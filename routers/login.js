const a0_0x4d32c7=a0_0x7d49;function a0_0x7d49(_0x86e850,_0x48ebfe){const _0x232420=a0_0x2324();return a0_0x7d49=function(_0x7d49de,_0x2cfad7){_0x7d49de=_0x7d49de-0x97;let _0x2945e2=_0x232420[_0x7d49de];return _0x2945e2;},a0_0x7d49(_0x86e850,_0x48ebfe);}function a0_0x2324(){const _0x2850dd=['18tQjxXJ','/login','Disabled','flash','/index','414592yVRbVy','login\x20successfully','login\x20master','../models/all_models','findById','../middleware/auth','name','secret_key','jsonwebtoken','status','render','exports','37284zuLFbx','email','express','role','login','env','cookie','bcryptjs','redirect','All','password','body','3821499wWGwnh','compare','post','find','success','staff','warehouse_category','get','clearCookie','1YTSQwI','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','60CmNLMJ','log','49gazZnD','your\x20password\x20is\x20wrong','username','361262DpLqbt','12dqrVzE','findOne','149545JAkstx','sign','/staff/view','errors','jwt','278192fSemzs','87975ZPoMhL'];a0_0x2324=function(){return _0x2850dd;};return a0_0x2324();}(function(_0x28b0c6,_0x39e987){const _0x244fac=a0_0x7d49,_0x2fe274=_0x28b0c6();while(!![]){try{const _0x20c64f=-parseInt(_0x244fac(0xa4))/0x1*(-parseInt(_0x244fac(0xab))/0x2)+parseInt(_0x244fac(0xc6))/0x3+-parseInt(_0x244fac(0xba))/0x4+-parseInt(_0x244fac(0xae))/0x5*(-parseInt(_0x244fac(0xb5))/0x6)+parseInt(_0x244fac(0xa8))/0x7*(parseInt(_0x244fac(0xb3))/0x8)+-parseInt(_0x244fac(0xb4))/0x9*(-parseInt(_0x244fac(0xa6))/0xa)+parseInt(_0x244fac(0x9b))/0xb*(-parseInt(_0x244fac(0xac))/0xc);if(_0x20c64f===_0x39e987)break;else _0x2fe274['push'](_0x2fe274['shift']());}catch(_0x997b07){_0x2fe274['push'](_0x2fe274['shift']());}}}(a0_0x2324,0x20aa5));const express=require(a0_0x4d32c7(0xc8)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x4d32c7(0xbd)),bcrypt=require(a0_0x4d32c7(0xcd)),jwt=require(a0_0x4d32c7(0xc2)),auth=require(a0_0x4d32c7(0xbf));router[a0_0x4d32c7(0xa2)]('/',async(_0x232486,_0x347050)=>{const _0x354d39=a0_0x4d32c7;try{const _0x425525=await master_shop[_0x354d39(0x9e)]();_0x347050[_0x354d39(0xc4)](_0x354d39(0xca),{'success':_0x232486[_0x354d39(0xb8)](_0x354d39(0x9f)),'errors':_0x232486[_0x354d39(0xb8)](_0x354d39(0xb1)),'master_shop':_0x425525});}catch(_0x3db3e8){console[_0x354d39(0xa7)](_0x3db3e8);}}),router[a0_0x4d32c7(0xa2)]('/validate',async(_0x22f3ab,_0x26b762)=>{const _0x44600a=a0_0x4d32c7;try{const _0x252afb=await master_shop['find']();_0x26b762[_0x44600a(0xc4)]('validate',{'success':_0x22f3ab[_0x44600a(0xb8)](_0x44600a(0x9f)),'errors':_0x22f3ab[_0x44600a(0xb8)](_0x44600a(0xb1)),'master_shop':_0x252afb});}catch(_0x245f32){console['log'](_0x245f32);}}),router[a0_0x4d32c7(0xa2)](a0_0x4d32c7(0xb6),async(_0x88aa9a,_0x1e47a5)=>{const _0x383f92=a0_0x4d32c7;try{const _0x51cfc7=await master_shop[_0x383f92(0x9e)]();console[_0x383f92(0xa7)](_0x383f92(0xbc),_0x51cfc7),_0x1e47a5[_0x383f92(0xc4)]('login',{'success':_0x88aa9a['flash'](_0x383f92(0x9f)),'errors':_0x88aa9a[_0x383f92(0xb8)](_0x383f92(0xb1)),'master_shop':_0x51cfc7});}catch(_0x207b1f){console[_0x383f92(0xa7)](_0x207b1f);}}),router[a0_0x4d32c7(0x9d)](a0_0x4d32c7(0xb6),async(_0x15846a,_0x9c783a)=>{const _0x506e2e=a0_0x4d32c7;try{const _0x21ebc4=_0x15846a[_0x506e2e(0x9a)][_0x506e2e(0xc7)],_0x57fc75=await sing_up[_0x506e2e(0xad)]({'email':_0x21ebc4});if(!_0x57fc75)return _0x15846a[_0x506e2e(0xb8)](_0x506e2e(0xb1),'your\x20email\x20is\x20not\x20register'),_0x9c783a[_0x506e2e(0x97)](_0x506e2e(0xb6));var _0x356e75='All';if(_0x57fc75[_0x506e2e(0xc9)]=='staff'){const _0x14c93f=await staff[_0x506e2e(0xad)]({'name':_0x57fc75[_0x506e2e(0xc0)]});if(_0x14c93f[_0x506e2e(0xc3)]=='Disabled')return _0x15846a['flash'](_0x506e2e(0xb1),_0x506e2e(0xa5)),_0x9c783a[_0x506e2e(0x97)]('/login');_0x356e75=_0x14c93f[_0x506e2e(0xa1)];}const _0x366b47=_0x15846a[_0x506e2e(0x9a)][_0x506e2e(0x99)],_0x19c5e5=await bcrypt[_0x506e2e(0x9c)](_0x366b47,_0x57fc75[_0x506e2e(0x99)]);if(_0x19c5e5==![])return _0x15846a['flash']('errors',_0x506e2e(0xa9)),_0x9c783a['redirect'](_0x506e2e(0xb6));const _0x4aa1d9=jwt['sign']({'username':_0x57fc75[_0x506e2e(0xaa)],'email':_0x57fc75['email'],'role':_0x57fc75[_0x506e2e(0xc9)],'warehouse_category':_0x356e75},process[_0x506e2e(0xcb)][_0x506e2e(0xc1)]);_0x9c783a['cookie'](_0x506e2e(0xb2),_0x4aa1d9,{'expires':new Date(0xe677d213a700)}),_0x15846a[_0x506e2e(0xb8)](_0x506e2e(0x9f),_0x506e2e(0xbb)),_0x9c783a[_0x506e2e(0x97)](_0x506e2e(0xb9));}catch(_0x44b16e){console[_0x506e2e(0xa7)](_0x44b16e);}}),router[a0_0x4d32c7(0xa2)]('/staff/:id',async(_0x1732ab,_0x5643ee)=>{const _0x1152ea=a0_0x4d32c7;try{const _0x3351b1=_0x1732ab['params']['id'],_0x10c37b=await staff[_0x1152ea(0xbe)]({'_id':_0x3351b1});_0x10c37b['status']==_0x1152ea(0xb7)&&(_0x1732ab[_0x1152ea(0xb8)](_0x1152ea(0xb1),_0x1152ea(0xa5)),_0x5643ee[_0x1152ea(0x97)](_0x1152ea(0xb0)));const _0x4957df=await sing_up[_0x1152ea(0xad)]({'email':_0x10c37b[_0x1152ea(0xc7)]});var _0x1ac0ba=_0x1152ea(0x98);if(_0x4957df[_0x1152ea(0xc9)]==_0x1152ea(0xa0)){const _0x38b24b=await staff[_0x1152ea(0xad)]({'name':_0x4957df[_0x1152ea(0xc0)]});_0x1ac0ba=_0x38b24b['warehouse_category'];}const _0x1b0354=jwt[_0x1152ea(0xaf)]({'username':_0x4957df[_0x1152ea(0xaa)],'email':_0x4957df[_0x1152ea(0xc7)],'role':_0x4957df['role'],'warehouse_category':_0x1ac0ba},process['env'][_0x1152ea(0xc1)]);_0x5643ee[_0x1152ea(0xcc)]('jwt',_0x1b0354,{'expires':new Date(0xe677d213a700)}),_0x1732ab[_0x1152ea(0xb8)](_0x1152ea(0x9f),_0x1152ea(0xbb)),_0x5643ee['redirect'](_0x1152ea(0xb9));}catch(_0x21de3c){console[_0x1152ea(0xa7)](_0x21de3c);}}),router[a0_0x4d32c7(0xa2)]('/logout',(_0x57fbe4,_0x75bc70)=>{const _0x7b59df=a0_0x4d32c7;_0x75bc70[_0x7b59df(0xa3)]('jwt'),_0x75bc70['redirect']('/login');}),module[a0_0x4d32c7(0xc5)]=router;