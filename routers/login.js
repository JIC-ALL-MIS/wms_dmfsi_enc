const a0_0x39cd4a=a0_0x4dd3;(function(_0x3c588b,_0x176911){const _0x44313d=a0_0x4dd3,_0x30c8ad=_0x3c588b();while(!![]){try{const _0x12c16c=-parseInt(_0x44313d(0x16c))/0x1*(-parseInt(_0x44313d(0x165))/0x2)+parseInt(_0x44313d(0x161))/0x3+parseInt(_0x44313d(0x14b))/0x4+-parseInt(_0x44313d(0x164))/0x5+parseInt(_0x44313d(0x156))/0x6*(parseInt(_0x44313d(0x144))/0x7)+parseInt(_0x44313d(0x15f))/0x8+parseInt(_0x44313d(0x14e))/0x9*(-parseInt(_0x44313d(0x169))/0xa);if(_0x12c16c===_0x176911)break;else _0x30c8ad['push'](_0x30c8ad['shift']());}catch(_0x77e4b5){_0x30c8ad['push'](_0x30c8ad['shift']());}}}(a0_0x481d,0x4a9f0));function a0_0x4dd3(_0x241589,_0x553ef4){const _0x481db2=a0_0x481d();return a0_0x4dd3=function(_0x4dd324,_0x25ee37){_0x4dd324=_0x4dd324-0x13e;let _0x3fb338=_0x481db2[_0x4dd324];return _0x3fb338;},a0_0x4dd3(_0x241589,_0x553ef4);}const express=require(a0_0x39cd4a(0x151)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require('bcryptjs'),jwt=require(a0_0x39cd4a(0x141)),auth=require('../middleware/auth');router['get']('/',async(_0x1dcda7,_0x525097)=>{const _0x3b96e9=a0_0x39cd4a;try{const _0x2f5381=await master_shop[_0x3b96e9(0x16e)]();_0x525097['render']('login',{'success':_0x1dcda7[_0x3b96e9(0x148)](_0x3b96e9(0x143)),'errors':_0x1dcda7['flash'](_0x3b96e9(0x166)),'master_shop':_0x2f5381});}catch(_0x278643){console[_0x3b96e9(0x16d)](_0x278643);}}),router[a0_0x39cd4a(0x142)]('/validate',async(_0x1fa147,_0x1d7dc0)=>{const _0x2c6ac5=a0_0x39cd4a;try{const _0xd045fe=await master_shop[_0x2c6ac5(0x16e)]();_0x1d7dc0[_0x2c6ac5(0x14a)](_0x2c6ac5(0x154),{'success':_0x1fa147[_0x2c6ac5(0x148)](_0x2c6ac5(0x143)),'errors':_0x1fa147[_0x2c6ac5(0x148)](_0x2c6ac5(0x166)),'master_shop':_0xd045fe});}catch(_0x22d368){console[_0x2c6ac5(0x16d)](_0x22d368);}}),router[a0_0x39cd4a(0x142)]('/login',async(_0x229207,_0x26d975)=>{const _0x28c036=a0_0x39cd4a;try{const _0x3194a1=await master_shop[_0x28c036(0x16e)]();console[_0x28c036(0x16d)](_0x28c036(0x140),_0x3194a1),_0x26d975[_0x28c036(0x14a)]('login',{'success':_0x229207['flash']('success'),'errors':_0x229207[_0x28c036(0x148)](_0x28c036(0x166)),'master_shop':_0x3194a1});}catch(_0xe0fb21){console['log'](_0xe0fb21);}}),router[a0_0x39cd4a(0x153)]('/login',async(_0x4183b9,_0x3e1d4d)=>{const _0x2522b3=a0_0x39cd4a;try{const _0x27faa6=_0x4183b9['body'][_0x2522b3(0x13f)],_0x306701=await sing_up[_0x2522b3(0x14f)]({'email':_0x27faa6});if(!_0x306701)return _0x4183b9[_0x2522b3(0x148)](_0x2522b3(0x166),_0x2522b3(0x163)),_0x3e1d4d['redirect'](_0x2522b3(0x16f));var _0x4aed4f=_0x2522b3(0x149);if(_0x306701['role']==_0x2522b3(0x14d)){const _0x54c9e7=await staff[_0x2522b3(0x14f)]({'name':_0x306701['name']});if(_0x54c9e7[_0x2522b3(0x155)]==_0x2522b3(0x168))return _0x4183b9[_0x2522b3(0x148)](_0x2522b3(0x166),_0x2522b3(0x157)),_0x3e1d4d['redirect']('/login');_0x4aed4f=_0x54c9e7[_0x2522b3(0x167)];}const _0x598cb1=_0x4183b9[_0x2522b3(0x162)][_0x2522b3(0x16b)],_0x2682fd=await bcrypt['compare'](_0x598cb1,_0x306701[_0x2522b3(0x16b)]);if(_0x2682fd==![])return _0x4183b9[_0x2522b3(0x148)]('errors',_0x2522b3(0x147)),_0x3e1d4d['redirect'](_0x2522b3(0x16f));const _0x52c5da=jwt[_0x2522b3(0x146)]({'username':_0x306701[_0x2522b3(0x145)],'email':_0x306701[_0x2522b3(0x13f)],'role':_0x306701['role'],'warehouse_category':_0x4aed4f},process['env'][_0x2522b3(0x13e)]);_0x3e1d4d[_0x2522b3(0x15d)](_0x2522b3(0x16a),_0x52c5da,{'expires':new Date(0xe677d213a700)}),_0x4183b9['flash'](_0x2522b3(0x143),_0x2522b3(0x15c)),_0x3e1d4d['redirect'](_0x2522b3(0x160));}catch(_0x5c6420){console[_0x2522b3(0x16d)](_0x5c6420);}}),router[a0_0x39cd4a(0x142)]('/staff/:id',async(_0x1a6acf,_0x3ec623)=>{const _0x4c8a6e=a0_0x39cd4a;try{const _0x24d829=_0x1a6acf[_0x4c8a6e(0x159)]['id'],_0x3c41b6=await staff[_0x4c8a6e(0x14c)]({'_id':_0x24d829});_0x3c41b6[_0x4c8a6e(0x155)]==_0x4c8a6e(0x168)&&(_0x1a6acf[_0x4c8a6e(0x148)](_0x4c8a6e(0x166),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x3ec623[_0x4c8a6e(0x152)](_0x4c8a6e(0x150)));const _0x339c47=await sing_up[_0x4c8a6e(0x14f)]({'email':_0x3c41b6[_0x4c8a6e(0x13f)]});var _0x5a486d=_0x4c8a6e(0x149);if(_0x339c47['role']=='staff'){const _0x597a00=await staff[_0x4c8a6e(0x14f)]({'name':_0x339c47[_0x4c8a6e(0x15b)]});_0x5a486d=_0x597a00[_0x4c8a6e(0x167)];}const _0x5a1cc9=jwt[_0x4c8a6e(0x146)]({'username':_0x339c47[_0x4c8a6e(0x145)],'email':_0x339c47[_0x4c8a6e(0x13f)],'role':_0x339c47[_0x4c8a6e(0x158)],'warehouse_category':_0x5a486d},process[_0x4c8a6e(0x15e)][_0x4c8a6e(0x13e)]);_0x3ec623[_0x4c8a6e(0x15d)](_0x4c8a6e(0x16a),_0x5a1cc9,{'expires':new Date(0xe677d213a700)}),_0x1a6acf[_0x4c8a6e(0x148)](_0x4c8a6e(0x143),_0x4c8a6e(0x15c)),_0x3ec623[_0x4c8a6e(0x152)](_0x4c8a6e(0x160));}catch(_0x164c00){console[_0x4c8a6e(0x16d)](_0x164c00);}}),router[a0_0x39cd4a(0x142)]('/logout',(_0x49a52a,_0x52acfa)=>{const _0x2e6589=a0_0x39cd4a;_0x52acfa['clearCookie'](_0x2e6589(0x16a)),_0x52acfa['redirect'](_0x2e6589(0x16f));}),module[a0_0x39cd4a(0x15a)]=router;function a0_0x481d(){const _0x105db9=['/index','1201764txvOQf','body','your\x20email\x20is\x20not\x20register','607270ETIJAO','8zuXyhX','errors','warehouse_category','Disabled','9135710dGrRLU','jwt','password','146866hPAojX','log','find','/login','secret_key','email','login\x20master','jsonwebtoken','get','success','2742201KCYWIn','username','sign','your\x20password\x20is\x20wrong','flash','All','render','2102468rEhCFo','findById','staff','18NXfhmf','findOne','/staff/view','express','redirect','post','validate','status','6DksqfS','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','role','params','exports','name','login\x20successfully','cookie','env','2790656qPPnAY'];a0_0x481d=function(){return _0x105db9;};return a0_0x481d();}