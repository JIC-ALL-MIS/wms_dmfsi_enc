const a0_0x5b4ebe=a0_0x5cc0;function a0_0x5cc0(_0x227a73,_0x51d8e5){const _0x441613=a0_0x4416();return a0_0x5cc0=function(_0x5cc036,_0x372724){_0x5cc036=_0x5cc036-0x190;let _0x1f9770=_0x441613[_0x5cc036];return _0x1f9770;},a0_0x5cc0(_0x227a73,_0x51d8e5);}function a0_0x4416(){const _0x5c962d=['secret_key','flash','status','2844UihjLZ','errors','All','name','find','Router','login','clearCookie','Disabled','../models/all_models','68335zABjWn','sign','get','render','35spJpqM','/validate','role','94488aOZKRB','redirect','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','login\x20master','your\x20password\x20is\x20wrong','staff','679830atLYmz','findById','post','your\x20email\x20is\x20not\x20register','590440mijjOm','findOne','/logout','login\x20successfully','cookie','params','express','/login','87234flXNCc','env','../middleware/auth','body','password','jwt','compare','/index','/staff/:id','3283272fCVKEA','success','validate','bcryptjs','username','exports','email','log'];a0_0x4416=function(){return _0x5c962d;};return a0_0x4416();}(function(_0x10e75a,_0x351b14){const _0x37ff0d=a0_0x5cc0,_0x443dd0=_0x10e75a();while(!![]){try{const _0x501718=-parseInt(_0x37ff0d(0x1ac))/0x1+parseInt(_0x37ff0d(0x1b3))/0x2+-parseInt(_0x37ff0d(0x1b9))/0x3+-parseInt(_0x37ff0d(0x1a2))/0x4+-parseInt(_0x37ff0d(0x1bd))/0x5+parseInt(_0x37ff0d(0x1c5))/0x6*(parseInt(_0x37ff0d(0x1b0))/0x7)+parseInt(_0x37ff0d(0x197))/0x8;if(_0x501718===_0x351b14)break;else _0x443dd0['push'](_0x443dd0['shift']());}catch(_0x2ce88a){_0x443dd0['push'](_0x443dd0['shift']());}}}(a0_0x4416,0x1c77c));const express=require(a0_0x5b4ebe(0x1c3)),app=express(),router=express[a0_0x5b4ebe(0x1a7)](),{sing_up,staff,profile,master_shop}=require(a0_0x5b4ebe(0x1ab)),bcrypt=require(a0_0x5b4ebe(0x19a)),jwt=require('jsonwebtoken'),auth=require(a0_0x5b4ebe(0x190));router[a0_0x5b4ebe(0x1ae)]('/',async(_0x50f2f8,_0x5f2fb5)=>{const _0x32fdce=a0_0x5b4ebe;try{const _0x543b88=await master_shop['find']();_0x5f2fb5[_0x32fdce(0x1af)](_0x32fdce(0x1a8),{'success':_0x50f2f8[_0x32fdce(0x1a0)](_0x32fdce(0x198)),'errors':_0x50f2f8[_0x32fdce(0x1a0)]('errors'),'master_shop':_0x543b88});}catch(_0x2a5cc0){console[_0x32fdce(0x19e)](_0x2a5cc0);}}),router[a0_0x5b4ebe(0x1ae)](a0_0x5b4ebe(0x1b1),async(_0x2105ba,_0x52b44d)=>{const _0x50e637=a0_0x5b4ebe;try{const _0x4ae0ba=await master_shop[_0x50e637(0x1a6)]();_0x52b44d['render'](_0x50e637(0x199),{'success':_0x2105ba[_0x50e637(0x1a0)]('success'),'errors':_0x2105ba['flash'](_0x50e637(0x1a3)),'master_shop':_0x4ae0ba});}catch(_0x242eaa){console[_0x50e637(0x19e)](_0x242eaa);}}),router['get'](a0_0x5b4ebe(0x1c4),async(_0x3793ea,_0x409e07)=>{const _0x20be7b=a0_0x5b4ebe;try{const _0x4d43b7=await master_shop[_0x20be7b(0x1a6)]();console['log'](_0x20be7b(0x1b6),_0x4d43b7),_0x409e07['render'](_0x20be7b(0x1a8),{'success':_0x3793ea[_0x20be7b(0x1a0)](_0x20be7b(0x198)),'errors':_0x3793ea[_0x20be7b(0x1a0)](_0x20be7b(0x1a3)),'master_shop':_0x4d43b7});}catch(_0xe7b976){console[_0x20be7b(0x19e)](_0xe7b976);}}),router[a0_0x5b4ebe(0x1bb)](a0_0x5b4ebe(0x1c4),async(_0x3f8137,_0x4f8538)=>{const _0x3e2e2c=a0_0x5b4ebe;try{const _0xc979bc=_0x3f8137[_0x3e2e2c(0x191)]['email'],_0x405174=await sing_up['findOne']({'email':_0xc979bc});if(!_0x405174)return _0x3f8137[_0x3e2e2c(0x1a0)](_0x3e2e2c(0x1a3),_0x3e2e2c(0x1bc)),_0x4f8538[_0x3e2e2c(0x1b4)](_0x3e2e2c(0x1c4));var _0x2e908f=_0x3e2e2c(0x1a4);if(_0x405174[_0x3e2e2c(0x1b2)]==_0x3e2e2c(0x1b8)){const _0x3a4582=await staff[_0x3e2e2c(0x1be)]({'name':_0x405174[_0x3e2e2c(0x1a5)]});if(_0x3a4582['status']=='Disabled')return _0x3f8137['flash'](_0x3e2e2c(0x1a3),_0x3e2e2c(0x1b5)),_0x4f8538[_0x3e2e2c(0x1b4)](_0x3e2e2c(0x1c4));_0x2e908f=_0x3a4582['warehouse_category'];}const _0x2142c4=_0x3f8137[_0x3e2e2c(0x191)]['password'],_0x45e096=await bcrypt[_0x3e2e2c(0x194)](_0x2142c4,_0x405174[_0x3e2e2c(0x192)]);if(_0x45e096==![])return _0x3f8137[_0x3e2e2c(0x1a0)]('errors',_0x3e2e2c(0x1b7)),_0x4f8538['redirect'](_0x3e2e2c(0x1c4));const _0x293630=jwt[_0x3e2e2c(0x1ad)]({'username':_0x405174[_0x3e2e2c(0x19b)],'email':_0x405174[_0x3e2e2c(0x19d)],'role':_0x405174['role'],'warehouse_category':_0x2e908f},process[_0x3e2e2c(0x1c6)][_0x3e2e2c(0x19f)]);_0x4f8538[_0x3e2e2c(0x1c1)](_0x3e2e2c(0x193),_0x293630,{'expires':new Date(0xe677d213a700)}),_0x3f8137[_0x3e2e2c(0x1a0)](_0x3e2e2c(0x198),_0x3e2e2c(0x1c0)),_0x4f8538['redirect'](_0x3e2e2c(0x195));}catch(_0x3cbde7){console[_0x3e2e2c(0x19e)](_0x3cbde7);}}),router[a0_0x5b4ebe(0x1ae)](a0_0x5b4ebe(0x196),async(_0x17c798,_0x5f50fd)=>{const _0x4a5025=a0_0x5b4ebe;try{const _0xe08132=_0x17c798[_0x4a5025(0x1c2)]['id'],_0x2749e3=await staff[_0x4a5025(0x1ba)]({'_id':_0xe08132});_0x2749e3[_0x4a5025(0x1a1)]==_0x4a5025(0x1aa)&&(_0x17c798[_0x4a5025(0x1a0)](_0x4a5025(0x1a3),_0x4a5025(0x1b5)),_0x5f50fd[_0x4a5025(0x1b4)]('/staff/view'));const _0x48ddc2=await sing_up[_0x4a5025(0x1be)]({'email':_0x2749e3[_0x4a5025(0x19d)]});var _0xa29f9a=_0x4a5025(0x1a4);if(_0x48ddc2['role']==_0x4a5025(0x1b8)){const _0x3b0d39=await staff[_0x4a5025(0x1be)]({'name':_0x48ddc2[_0x4a5025(0x1a5)]});_0xa29f9a=_0x3b0d39['warehouse_category'];}const _0xdfcae4=jwt[_0x4a5025(0x1ad)]({'username':_0x48ddc2['username'],'email':_0x48ddc2['email'],'role':_0x48ddc2['role'],'warehouse_category':_0xa29f9a},process['env']['secret_key']);_0x5f50fd[_0x4a5025(0x1c1)](_0x4a5025(0x193),_0xdfcae4,{'expires':new Date(0xe677d213a700)}),_0x17c798[_0x4a5025(0x1a0)](_0x4a5025(0x198),_0x4a5025(0x1c0)),_0x5f50fd[_0x4a5025(0x1b4)]('/index');}catch(_0x2e9e40){console[_0x4a5025(0x19e)](_0x2e9e40);}}),router['get'](a0_0x5b4ebe(0x1bf),(_0x576f8a,_0x219fb8)=>{const _0x322cf5=a0_0x5b4ebe;_0x219fb8[_0x322cf5(0x1a9)](_0x322cf5(0x193)),_0x219fb8[_0x322cf5(0x1b4)](_0x322cf5(0x1c4));}),module[a0_0x5b4ebe(0x19c)]=router;