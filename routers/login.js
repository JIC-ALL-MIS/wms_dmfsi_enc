const a0_0x436221=a0_0x8c8c;(function(_0x17dafb,_0x419eb5){const _0x20965c=a0_0x8c8c,_0xa8682=_0x17dafb();while(!![]){try{const _0x1d2dc8=-parseInt(_0x20965c(0xc5))/0x1+parseInt(_0x20965c(0xc6))/0x2*(-parseInt(_0x20965c(0xd7))/0x3)+parseInt(_0x20965c(0xbd))/0x4*(-parseInt(_0x20965c(0xdd))/0x5)+parseInt(_0x20965c(0xb9))/0x6*(parseInt(_0x20965c(0xc1))/0x7)+-parseInt(_0x20965c(0xce))/0x8*(parseInt(_0x20965c(0xb5))/0x9)+-parseInt(_0x20965c(0xca))/0xa+parseInt(_0x20965c(0xc7))/0xb*(parseInt(_0x20965c(0xd6))/0xc);if(_0x1d2dc8===_0x419eb5)break;else _0xa8682['push'](_0xa8682['shift']());}catch(_0x2aad69){_0xa8682['push'](_0xa8682['shift']());}}}(a0_0x176c,0xa50f0));function a0_0x176c(){const _0x577c12=['role','get','success','/staff/view','jsonwebtoken','Disabled','warehouse_category','body','sign','/validate','validate','9pzzmet','findById','../models/all_models','cookie','6INllcp','/staff/:id','status','exports','1436NETkMQ','findOne','compare','bcryptjs','3690813LPFVVZ','log','post','Router','431686LMpVhK','2zibMHt','18581123pjiyYr','render','name','2825670ZKPuzZ','login','staff','login\x20master','2685832kjMrTd','express','your\x20password\x20is\x20wrong','secret_key','env','login\x20successfully','jwt','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','12IVpTJr','408171gmulbG','password','/login','errors','../middleware/auth','email','4935VtfvCv','/logout','redirect','username','/index','flash'];a0_0x176c=function(){return _0x577c12;};return a0_0x176c();}const express=require(a0_0x436221(0xcf)),app=express(),router=express[a0_0x436221(0xc4)](),{sing_up,staff,profile,master_shop}=require(a0_0x436221(0xb7)),bcrypt=require(a0_0x436221(0xc0)),jwt=require(a0_0x436221(0xe7)),auth=require(a0_0x436221(0xdb));function a0_0x8c8c(_0x4c4a23,_0x2c996b){const _0x176caf=a0_0x176c();return a0_0x8c8c=function(_0x8c8c78,_0x48a5e9){_0x8c8c78=_0x8c8c78-0xb0;let _0x15ced1=_0x176caf[_0x8c8c78];return _0x15ced1;},a0_0x8c8c(_0x4c4a23,_0x2c996b);}router[a0_0x436221(0xe4)]('/',async(_0x3399e0,_0x46dd23)=>{const _0x4f6f78=a0_0x436221;try{const _0x499dba=await master_shop['find']();_0x46dd23[_0x4f6f78(0xc8)]('login',{'success':_0x3399e0[_0x4f6f78(0xe2)]('success'),'errors':_0x3399e0[_0x4f6f78(0xe2)](_0x4f6f78(0xda)),'master_shop':_0x499dba});}catch(_0x2f41d7){console['log'](_0x2f41d7);}}),router['get'](a0_0x436221(0xb3),async(_0x122231,_0x1e1cb6)=>{const _0x1096ba=a0_0x436221;try{const _0x5e51e3=await master_shop['find']();_0x1e1cb6[_0x1096ba(0xc8)](_0x1096ba(0xb4),{'success':_0x122231[_0x1096ba(0xe2)]('success'),'errors':_0x122231[_0x1096ba(0xe2)](_0x1096ba(0xda)),'master_shop':_0x5e51e3});}catch(_0xc9d183){console[_0x1096ba(0xc2)](_0xc9d183);}}),router[a0_0x436221(0xe4)]('/login',async(_0x294616,_0x48626b)=>{const _0x1f291e=a0_0x436221;try{const _0x767dd=await master_shop['find']();console[_0x1f291e(0xc2)](_0x1f291e(0xcd),_0x767dd),_0x48626b[_0x1f291e(0xc8)](_0x1f291e(0xcb),{'success':_0x294616[_0x1f291e(0xe2)]('success'),'errors':_0x294616['flash'](_0x1f291e(0xda)),'master_shop':_0x767dd});}catch(_0x57cad0){console[_0x1f291e(0xc2)](_0x57cad0);}}),router[a0_0x436221(0xc3)](a0_0x436221(0xd9),async(_0x51edcf,_0x4f4231)=>{const _0x2c7540=a0_0x436221;try{const _0x51e304=_0x51edcf[_0x2c7540(0xb1)][_0x2c7540(0xdc)],_0x5971c6=await sing_up['findOne']({'email':_0x51e304});if(!_0x5971c6)return _0x51edcf[_0x2c7540(0xe2)](_0x2c7540(0xda),'your\x20email\x20is\x20not\x20register'),_0x4f4231[_0x2c7540(0xdf)](_0x2c7540(0xd9));const _0x3262c7=await staff[_0x2c7540(0xbe)]({'email':_0x5971c6[_0x2c7540(0xdc)]});var _0x243c08=_0x3262c7[_0x2c7540(0xb0)];if(_0x5971c6[_0x2c7540(0xe3)]==_0x2c7540(0xcc)){const _0x4d7f7c=await staff[_0x2c7540(0xbe)]({'email':_0x5971c6[_0x2c7540(0xdc)]});if(_0x4d7f7c[_0x2c7540(0xbb)]==_0x2c7540(0xe8))return _0x51edcf['flash'](_0x2c7540(0xda),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x4f4231['redirect'](_0x2c7540(0xd9));_0x243c08=_0x4d7f7c[_0x2c7540(0xb0)];}const _0x3296f4=_0x51edcf[_0x2c7540(0xb1)][_0x2c7540(0xd8)],_0x5b8620=await bcrypt[_0x2c7540(0xbf)](_0x3296f4,_0x5971c6[_0x2c7540(0xd8)]);if(_0x5b8620==![])return _0x51edcf['flash']('errors',_0x2c7540(0xd0)),_0x4f4231[_0x2c7540(0xdf)](_0x2c7540(0xd9));const _0xc8f878=jwt[_0x2c7540(0xb2)]({'username':_0x5971c6[_0x2c7540(0xe0)],'email':_0x5971c6[_0x2c7540(0xdc)],'role':_0x5971c6[_0x2c7540(0xe3)],'warehouse_category':_0x243c08},process[_0x2c7540(0xd2)][_0x2c7540(0xd1)]);_0x4f4231[_0x2c7540(0xb8)](_0x2c7540(0xd4),_0xc8f878,{'expires':new Date(0xe677d213a700)}),_0x51edcf[_0x2c7540(0xe2)](_0x2c7540(0xe5),_0x2c7540(0xd3)),_0x4f4231['redirect'](_0x2c7540(0xe1));}catch(_0x2ed053){console[_0x2c7540(0xc2)](_0x2ed053);}}),router[a0_0x436221(0xe4)](a0_0x436221(0xba),async(_0x234612,_0x3f906d)=>{const _0x1c6f3b=a0_0x436221;try{const _0x59c155=_0x234612['params']['id'],_0x35cc27=await staff[_0x1c6f3b(0xb6)]({'_id':_0x59c155});_0x35cc27[_0x1c6f3b(0xbb)]==_0x1c6f3b(0xe8)&&(_0x234612['flash'](_0x1c6f3b(0xda),_0x1c6f3b(0xd5)),_0x3f906d[_0x1c6f3b(0xdf)](_0x1c6f3b(0xe6)));const _0x30a4b2=await sing_up[_0x1c6f3b(0xbe)]({'email':_0x35cc27[_0x1c6f3b(0xdc)]});var _0x4e2d02=_0x35cc27[_0x1c6f3b(0xb0)];if(_0x30a4b2[_0x1c6f3b(0xe3)]==_0x1c6f3b(0xcc)){const _0x27adb5=await staff[_0x1c6f3b(0xbe)]({'name':_0x30a4b2[_0x1c6f3b(0xc9)]});_0x4e2d02=_0x27adb5[_0x1c6f3b(0xb0)];}const _0x5a27b7=jwt['sign']({'username':_0x30a4b2[_0x1c6f3b(0xe0)],'email':_0x30a4b2[_0x1c6f3b(0xdc)],'role':_0x30a4b2['role'],'warehouse_category':_0x4e2d02},process[_0x1c6f3b(0xd2)]['secret_key']);_0x3f906d[_0x1c6f3b(0xb8)]('jwt',_0x5a27b7,{'expires':new Date(0xe677d213a700)}),_0x234612[_0x1c6f3b(0xe2)](_0x1c6f3b(0xe5),_0x1c6f3b(0xd3)),_0x3f906d[_0x1c6f3b(0xdf)](_0x1c6f3b(0xe1));}catch(_0x48377d){console[_0x1c6f3b(0xc2)](_0x48377d);}}),router[a0_0x436221(0xe4)](a0_0x436221(0xde),(_0x3416bd,_0x2a4357)=>{const _0x204e99=a0_0x436221;_0x2a4357['clearCookie'](_0x204e99(0xd4)),_0x2a4357[_0x204e99(0xdf)](_0x204e99(0xd9));}),module[a0_0x436221(0xbc)]=router;