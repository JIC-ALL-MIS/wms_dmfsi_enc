const a0_0x474560=a0_0x309c;(function(_0x394c45,_0x1ada1f){const _0x18e9cf=a0_0x309c,_0x5d88de=_0x394c45();while(!![]){try{const _0x1ce8ff=-parseInt(_0x18e9cf(0xc2))/0x1*(-parseInt(_0x18e9cf(0xb4))/0x2)+-parseInt(_0x18e9cf(0xbb))/0x3+-parseInt(_0x18e9cf(0xa4))/0x4+parseInt(_0x18e9cf(0xbc))/0x5+-parseInt(_0x18e9cf(0x96))/0x6+-parseInt(_0x18e9cf(0xc7))/0x7+-parseInt(_0x18e9cf(0xc3))/0x8*(-parseInt(_0x18e9cf(0xb9))/0x9);if(_0x1ce8ff===_0x1ada1f)break;else _0x5d88de['push'](_0x5d88de['shift']());}catch(_0x15212e){_0x5d88de['push'](_0x5d88de['shift']());}}}(a0_0x4ec4,0x891ae));const express=require(a0_0x474560(0xbe)),app=express(),router=express[a0_0x474560(0x97)](),{sing_up,staff,profile,master_shop}=require(a0_0x474560(0xb0)),bcrypt=require(a0_0x474560(0xb7)),jwt=require('jsonwebtoken'),auth=require(a0_0x474560(0xa3));function a0_0x4ec4(){const _0x58b4c8=['All','express','password','/login','findById','494149NYWABc','36248oDGqMS','secret_key','/logout','name','4092816inZUEZ','success','login\x20successfully','errors','find','4258710MLtHIk','Router','username','/index','status','/staff/view','login\x20master','env','get','your\x20password\x20is\x20wrong','sign','body','flash','../middleware/auth','1710292oxVRbI','cookie','/staff/:id','post','log','/validate','compare','role','findOne','warehouse_category','Disabled','render','../models/all_models','email','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','staff','2aIlbJJ','your\x20email\x20is\x20not\x20register','redirect','bcryptjs','login','3519PWsHXT','jwt','2490501NUUivq','4240125YXOcfe'];a0_0x4ec4=function(){return _0x58b4c8;};return a0_0x4ec4();}function a0_0x309c(_0x8e0576,_0x52a9df){const _0x4ec4e5=a0_0x4ec4();return a0_0x309c=function(_0x309c20,_0x424f84){_0x309c20=_0x309c20-0x94;let _0x4db61b=_0x4ec4e5[_0x309c20];return _0x4db61b;},a0_0x309c(_0x8e0576,_0x52a9df);}router[a0_0x474560(0x9e)]('/',async(_0x3fa10c,_0x46ded6)=>{const _0x1fd7d1=a0_0x474560;try{const _0x5bf6e6=await master_shop[_0x1fd7d1(0x95)]();_0x46ded6[_0x1fd7d1(0xaf)](_0x1fd7d1(0xb8),{'success':_0x3fa10c['flash'](_0x1fd7d1(0xc8)),'errors':_0x3fa10c[_0x1fd7d1(0xa2)](_0x1fd7d1(0x94)),'master_shop':_0x5bf6e6});}catch(_0x1f1c01){console[_0x1fd7d1(0xa8)](_0x1f1c01);}}),router[a0_0x474560(0x9e)](a0_0x474560(0xa9),async(_0x1e9cd2,_0x3c5454)=>{const _0x5b5d5b=a0_0x474560;try{const _0xd582e9=await master_shop[_0x5b5d5b(0x95)]();_0x3c5454[_0x5b5d5b(0xaf)]('validate',{'success':_0x1e9cd2[_0x5b5d5b(0xa2)](_0x5b5d5b(0xc8)),'errors':_0x1e9cd2['flash'](_0x5b5d5b(0x94)),'master_shop':_0xd582e9});}catch(_0x5e5430){console[_0x5b5d5b(0xa8)](_0x5e5430);}}),router[a0_0x474560(0x9e)](a0_0x474560(0xc0),async(_0x576da6,_0x2dcd8a)=>{const _0x2317fe=a0_0x474560;try{const _0x2e34cf=await master_shop[_0x2317fe(0x95)]();console[_0x2317fe(0xa8)](_0x2317fe(0x9c),_0x2e34cf),_0x2dcd8a[_0x2317fe(0xaf)](_0x2317fe(0xb8),{'success':_0x576da6[_0x2317fe(0xa2)]('success'),'errors':_0x576da6[_0x2317fe(0xa2)](_0x2317fe(0x94)),'master_shop':_0x2e34cf});}catch(_0x76be74){console[_0x2317fe(0xa8)](_0x76be74);}}),router[a0_0x474560(0xa7)](a0_0x474560(0xc0),async(_0x1aefc6,_0x574c8f)=>{const _0x3962d7=a0_0x474560;try{const _0x47fa1b=_0x1aefc6[_0x3962d7(0xa1)][_0x3962d7(0xb1)],_0x333fb2=await sing_up['findOne']({'email':_0x47fa1b});if(!_0x333fb2)return _0x1aefc6[_0x3962d7(0xa2)]('errors',_0x3962d7(0xb5)),_0x574c8f[_0x3962d7(0xb6)](_0x3962d7(0xc0));var _0x1fa987=_0x3962d7(0xbd);if(_0x333fb2[_0x3962d7(0xab)]==_0x3962d7(0xb3)){const _0x5a8717=await staff['findOne']({'name':_0x333fb2[_0x3962d7(0xc6)]});if(_0x5a8717[_0x3962d7(0x9a)]=='Disabled')return _0x1aefc6[_0x3962d7(0xa2)](_0x3962d7(0x94),_0x3962d7(0xb2)),_0x574c8f[_0x3962d7(0xb6)](_0x3962d7(0xc0));_0x1fa987=_0x5a8717[_0x3962d7(0xad)];}const _0x1d3375=_0x1aefc6['body']['password'],_0x1978be=await bcrypt[_0x3962d7(0xaa)](_0x1d3375,_0x333fb2[_0x3962d7(0xbf)]);if(_0x1978be==![])return _0x1aefc6[_0x3962d7(0xa2)](_0x3962d7(0x94),_0x3962d7(0x9f)),_0x574c8f['redirect'](_0x3962d7(0xc0));const _0x2717d9=jwt[_0x3962d7(0xa0)]({'username':_0x333fb2[_0x3962d7(0x98)],'email':_0x333fb2[_0x3962d7(0xb1)],'role':_0x333fb2[_0x3962d7(0xab)],'warehouse_category':_0x1fa987},process['env'][_0x3962d7(0xc4)]);_0x574c8f['cookie'](_0x3962d7(0xba),_0x2717d9,{'expires':new Date(0xe677d213a700)}),_0x1aefc6['flash']('success',_0x3962d7(0xc9)),_0x574c8f[_0x3962d7(0xb6)](_0x3962d7(0x99));}catch(_0xb028f0){console['log'](_0xb028f0);}}),router[a0_0x474560(0x9e)](a0_0x474560(0xa6),async(_0x5788d1,_0x3b26e8)=>{const _0x7467b2=a0_0x474560;try{const _0x21638f=_0x5788d1['params']['id'],_0x2a4526=await staff[_0x7467b2(0xc1)]({'_id':_0x21638f});_0x2a4526['status']==_0x7467b2(0xae)&&(_0x5788d1[_0x7467b2(0xa2)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x3b26e8[_0x7467b2(0xb6)](_0x7467b2(0x9b)));const _0x2e45b1=await sing_up[_0x7467b2(0xac)]({'email':_0x2a4526[_0x7467b2(0xb1)]});var _0x5e4da6='All';if(_0x2e45b1[_0x7467b2(0xab)]=='staff'){const _0x4260ac=await staff[_0x7467b2(0xac)]({'name':_0x2e45b1[_0x7467b2(0xc6)]});_0x5e4da6=_0x4260ac[_0x7467b2(0xad)];}const _0x3acd4a=jwt[_0x7467b2(0xa0)]({'username':_0x2e45b1[_0x7467b2(0x98)],'email':_0x2e45b1[_0x7467b2(0xb1)],'role':_0x2e45b1['role'],'warehouse_category':_0x5e4da6},process[_0x7467b2(0x9d)][_0x7467b2(0xc4)]);_0x3b26e8[_0x7467b2(0xa5)](_0x7467b2(0xba),_0x3acd4a,{'expires':new Date(0xe677d213a700)}),_0x5788d1['flash']('success',_0x7467b2(0xc9)),_0x3b26e8[_0x7467b2(0xb6)]('/index');}catch(_0x1fcf69){console[_0x7467b2(0xa8)](_0x1fcf69);}}),router[a0_0x474560(0x9e)](a0_0x474560(0xc5),(_0x44a118,_0x4619c8)=>{const _0x3cb9a4=a0_0x474560;_0x4619c8['clearCookie']('jwt'),_0x4619c8[_0x3cb9a4(0xb6)](_0x3cb9a4(0xc0));}),module['exports']=router;