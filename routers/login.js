const a0_0x277d29=a0_0x2935;(function(_0x11e565,_0x1d9c80){const _0x40c815=a0_0x2935,_0x45a003=_0x11e565();while(!![]){try{const _0x34753d=-parseInt(_0x40c815(0x18b))/0x1+-parseInt(_0x40c815(0x1a6))/0x2*(-parseInt(_0x40c815(0x190))/0x3)+-parseInt(_0x40c815(0x18a))/0x4+parseInt(_0x40c815(0x193))/0x5+parseInt(_0x40c815(0x1b3))/0x6+parseInt(_0x40c815(0x1b4))/0x7+parseInt(_0x40c815(0x19b))/0x8;if(_0x34753d===_0x1d9c80)break;else _0x45a003['push'](_0x45a003['shift']());}catch(_0x33cbcf){_0x45a003['push'](_0x45a003['shift']());}}}(a0_0x2887,0xe86cd));const express=require(a0_0x277d29(0x187)),app=express(),router=express[a0_0x277d29(0x188)](),{sing_up,staff,profile,master_shop}=require(a0_0x277d29(0x19f)),bcrypt=require(a0_0x277d29(0x1b5)),jwt=require('jsonwebtoken'),auth=require(a0_0x277d29(0x189));function a0_0x2935(_0x450ee6,_0x1a82b3){const _0x2887f1=a0_0x2887();return a0_0x2935=function(_0x2935da,_0x5517d9){_0x2935da=_0x2935da-0x185;let _0x255f07=_0x2887f1[_0x2935da];return _0x255f07;},a0_0x2935(_0x450ee6,_0x1a82b3);}function a0_0x2887(){const _0x1c9961=['4068558HzrJHZ','3775247MMlzZY','bcryptjs','log','exports','/login','find','staff','express','Router','../middleware/auth','793352HrjOET','1347392SQBCpq','post','secret_key','flash','status','189yzKcNi','redirect','/index','3266700uKNnbb','errors','username','/validate','params','your\x20password\x20is\x20wrong','/logout','role','938552NlGPMO','sign','cookie','findById','../models/all_models','success','email','login','password','body','get','16180qluJmS','Disabled','render','name','jwt','compare','warehouse_category','env','clearCookie','/staff/view','your\x20email\x20is\x20not\x20register','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','findOne'];a0_0x2887=function(){return _0x1c9961;};return a0_0x2887();}router['get']('/',async(_0x1744df,_0x36f615)=>{const _0xd5e260=a0_0x277d29;try{const _0x44f3bf=await master_shop[_0xd5e260(0x185)]();_0x36f615[_0xd5e260(0x1a8)](_0xd5e260(0x1a2),{'success':_0x1744df['flash']('success'),'errors':_0x1744df[_0xd5e260(0x18e)]('errors'),'master_shop':_0x44f3bf});}catch(_0x5322a1){console[_0xd5e260(0x1b6)](_0x5322a1);}}),router[a0_0x277d29(0x1a5)](a0_0x277d29(0x196),async(_0x1a155f,_0x2f3a8a)=>{const _0x229456=a0_0x277d29;try{const _0x3cef6a=await master_shop[_0x229456(0x185)]();_0x2f3a8a[_0x229456(0x1a8)]('validate',{'success':_0x1a155f[_0x229456(0x18e)](_0x229456(0x1a0)),'errors':_0x1a155f[_0x229456(0x18e)]('errors'),'master_shop':_0x3cef6a});}catch(_0x129d51){console['log'](_0x129d51);}}),router[a0_0x277d29(0x1a5)](a0_0x277d29(0x1b8),async(_0x41ab88,_0x3d4300)=>{const _0x4f8053=a0_0x277d29;try{const _0xce933c=await master_shop[_0x4f8053(0x185)]();console[_0x4f8053(0x1b6)]('login\x20master',_0xce933c),_0x3d4300['render'](_0x4f8053(0x1a2),{'success':_0x41ab88[_0x4f8053(0x18e)](_0x4f8053(0x1a0)),'errors':_0x41ab88[_0x4f8053(0x18e)](_0x4f8053(0x194)),'master_shop':_0xce933c});}catch(_0x2a434b){console[_0x4f8053(0x1b6)](_0x2a434b);}}),router[a0_0x277d29(0x18c)](a0_0x277d29(0x1b8),async(_0xd4b36e,_0x30b23d)=>{const _0x1901bc=a0_0x277d29;try{const _0x222b7b=_0xd4b36e[_0x1901bc(0x1a4)][_0x1901bc(0x1a1)],_0xf28372=await sing_up['findOne']({'email':_0x222b7b});if(!_0xf28372)return _0xd4b36e[_0x1901bc(0x18e)](_0x1901bc(0x194),_0x1901bc(0x1b0)),_0x30b23d['redirect'](_0x1901bc(0x1b8));const _0x877d72=await staff[_0x1901bc(0x1b2)]({'email':_0xf28372['email']});var _0xc5400c=_0x877d72['warehouse_category'];if(_0xf28372[_0x1901bc(0x19a)]==_0x1901bc(0x186)){const _0xe3af5e=await staff[_0x1901bc(0x1b2)]({'email':_0xf28372[_0x1901bc(0x1a1)]});if(_0xe3af5e[_0x1901bc(0x18f)]==_0x1901bc(0x1a7))return _0xd4b36e[_0x1901bc(0x18e)]('errors',_0x1901bc(0x1b1)),_0x30b23d[_0x1901bc(0x191)]('/login');_0xc5400c=_0xe3af5e[_0x1901bc(0x1ac)];}const _0x54f66c=_0xd4b36e[_0x1901bc(0x1a4)][_0x1901bc(0x1a3)],_0x4688b9=await bcrypt[_0x1901bc(0x1ab)](_0x54f66c,_0xf28372[_0x1901bc(0x1a3)]);if(_0x4688b9==![])return _0xd4b36e[_0x1901bc(0x18e)](_0x1901bc(0x194),_0x1901bc(0x198)),_0x30b23d[_0x1901bc(0x191)](_0x1901bc(0x1b8));const _0x1040d6=jwt[_0x1901bc(0x19c)]({'username':_0xf28372[_0x1901bc(0x195)],'email':_0xf28372['email'],'role':_0xf28372[_0x1901bc(0x19a)],'warehouse_category':_0xc5400c},process[_0x1901bc(0x1ad)][_0x1901bc(0x18d)]);_0x30b23d[_0x1901bc(0x19d)](_0x1901bc(0x1aa),_0x1040d6,{'expires':new Date(0xe677d213a700)}),_0xd4b36e[_0x1901bc(0x18e)](_0x1901bc(0x1a0),'login\x20successfully'),_0x30b23d[_0x1901bc(0x191)](_0x1901bc(0x192));}catch(_0x4ac64c){console[_0x1901bc(0x1b6)](_0x4ac64c);}}),router['get']('/staff/:id',async(_0x25fc79,_0x10d83b)=>{const _0x36cc1d=a0_0x277d29;try{const _0x4f747a=_0x25fc79[_0x36cc1d(0x197)]['id'],_0x33d935=await staff[_0x36cc1d(0x19e)]({'_id':_0x4f747a});_0x33d935['status']==_0x36cc1d(0x1a7)&&(_0x25fc79[_0x36cc1d(0x18e)](_0x36cc1d(0x194),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x10d83b[_0x36cc1d(0x191)](_0x36cc1d(0x1af)));const _0x3eaccb=await sing_up[_0x36cc1d(0x1b2)]({'email':_0x33d935[_0x36cc1d(0x1a1)]});var _0x7155f=_0x33d935[_0x36cc1d(0x1ac)];if(_0x3eaccb['role']==_0x36cc1d(0x186)){const _0x32d581=await staff[_0x36cc1d(0x1b2)]({'name':_0x3eaccb[_0x36cc1d(0x1a9)]});_0x7155f=_0x32d581[_0x36cc1d(0x1ac)];}const _0x36ea4f=jwt['sign']({'username':_0x3eaccb[_0x36cc1d(0x195)],'email':_0x3eaccb['email'],'role':_0x3eaccb[_0x36cc1d(0x19a)],'warehouse_category':_0x7155f},process[_0x36cc1d(0x1ad)][_0x36cc1d(0x18d)]);_0x10d83b[_0x36cc1d(0x19d)](_0x36cc1d(0x1aa),_0x36ea4f,{'expires':new Date(0xe677d213a700)}),_0x25fc79[_0x36cc1d(0x18e)](_0x36cc1d(0x1a0),'login\x20successfully'),_0x10d83b[_0x36cc1d(0x191)]('/index');}catch(_0x551199){console[_0x36cc1d(0x1b6)](_0x551199);}}),router[a0_0x277d29(0x1a5)](a0_0x277d29(0x199),(_0x234dfe,_0x5ad6a4)=>{const _0x232cdb=a0_0x277d29;_0x5ad6a4[_0x232cdb(0x1ae)]('jwt'),_0x5ad6a4[_0x232cdb(0x191)](_0x232cdb(0x1b8));}),module[a0_0x277d29(0x1b7)]=router;