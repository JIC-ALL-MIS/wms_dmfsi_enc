function a0_0x159e(_0x558f18,_0x3366df){const _0x4307fb=a0_0x4307();return a0_0x159e=function(_0x159ecf,_0x4f5436){_0x159ecf=_0x159ecf-0x1b2;let _0xd58ade=_0x4307fb[_0x159ecf];return _0xd58ade;},a0_0x159e(_0x558f18,_0x3366df);}function a0_0x4307(){const _0x3c0452=['params','body','19ZYPqcy','role','exports','log','staff','/login','/staff/:id','login\x20successfully','769360sjKkny','flash','4Nonksa','render','login\x20master','password','errors','cookie','status','success','findById','100PgWDxI','jwt','4228530SgFOij','email','150418eSZZrj','Router','username','/staff/view','compare','../models/all_models','express','../middleware/auth','redirect','secret_key','name','1078089yepODz','Disabled','All','findOne','find','/validate','get','your\x20password\x20is\x20wrong','/index','bcryptjs','jsonwebtoken','post','494670pVEcDL','6554030FnkdGd','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','9FXOFdX','4499572TFspST'];a0_0x4307=function(){return _0x3c0452;};return a0_0x4307();}const a0_0x4e3403=a0_0x159e;(function(_0xa495fa,_0x4de762){const _0x519672=a0_0x159e,_0x27c4ec=_0xa495fa();while(!![]){try{const _0x3a4719=parseInt(_0x519672(0x1bd))/0x1*(-parseInt(_0x519672(0x1d4))/0x2)+-parseInt(_0x519672(0x1df))/0x3*(-parseInt(_0x519672(0x1c7))/0x4)+parseInt(_0x519672(0x1b7))/0x5+parseInt(_0x519672(0x1d2))/0x6+-parseInt(_0x519672(0x1ba))/0x7+parseInt(_0x519672(0x1c5))/0x8*(parseInt(_0x519672(0x1b9))/0x9)+-parseInt(_0x519672(0x1d0))/0xa*(-parseInt(_0x519672(0x1b6))/0xb);if(_0x3a4719===_0x4de762)break;else _0x27c4ec['push'](_0x27c4ec['shift']());}catch(_0x5019e6){_0x27c4ec['push'](_0x27c4ec['shift']());}}}(a0_0x4307,0xcf483));const express=require(a0_0x4e3403(0x1da)),app=express(),router=express[a0_0x4e3403(0x1d5)](),{sing_up,staff,profile,master_shop}=require(a0_0x4e3403(0x1d9)),bcrypt=require(a0_0x4e3403(0x1b3)),jwt=require(a0_0x4e3403(0x1b4)),auth=require(a0_0x4e3403(0x1db));router[a0_0x4e3403(0x1e5)]('/',async(_0x33c7c9,_0x4002b5)=>{const _0x460337=a0_0x4e3403;try{const _0x12c4df=await master_shop['find']();_0x4002b5['render']('login',{'success':_0x33c7c9[_0x460337(0x1c6)](_0x460337(0x1ce)),'errors':_0x33c7c9[_0x460337(0x1c6)]('errors'),'master_shop':_0x12c4df});}catch(_0x543aab){console['log'](_0x543aab);}}),router['get'](a0_0x4e3403(0x1e4),async(_0x3c74d6,_0xd764da)=>{const _0x37d5bc=a0_0x4e3403;try{const _0x67d09e=await master_shop[_0x37d5bc(0x1e3)]();_0xd764da[_0x37d5bc(0x1c8)]('validate',{'success':_0x3c74d6[_0x37d5bc(0x1c6)]('success'),'errors':_0x3c74d6[_0x37d5bc(0x1c6)](_0x37d5bc(0x1cb)),'master_shop':_0x67d09e});}catch(_0x117e35){console[_0x37d5bc(0x1c0)](_0x117e35);}}),router[a0_0x4e3403(0x1e5)]('/login',async(_0x2c700c,_0xe9e6fc)=>{const _0x319790=a0_0x4e3403;try{const _0x4bdb87=await master_shop[_0x319790(0x1e3)]();console[_0x319790(0x1c0)](_0x319790(0x1c9),_0x4bdb87),_0xe9e6fc[_0x319790(0x1c8)]('login',{'success':_0x2c700c[_0x319790(0x1c6)](_0x319790(0x1ce)),'errors':_0x2c700c[_0x319790(0x1c6)]('errors'),'master_shop':_0x4bdb87});}catch(_0xb1b9f6){console[_0x319790(0x1c0)](_0xb1b9f6);}}),router[a0_0x4e3403(0x1b5)](a0_0x4e3403(0x1c2),async(_0x452ae3,_0x380109)=>{const _0x42ab8c=a0_0x4e3403;try{const _0xbe12a4=_0x452ae3[_0x42ab8c(0x1bc)]['email'],_0x5111a2=await sing_up['findOne']({'email':_0xbe12a4});if(!_0x5111a2)return _0x452ae3[_0x42ab8c(0x1c6)]('errors','your\x20email\x20is\x20not\x20register'),_0x380109[_0x42ab8c(0x1dc)]('/login');var _0x247c96=_0x42ab8c(0x1e1);if(_0x5111a2[_0x42ab8c(0x1be)]=='staff'){const _0x4747a9=await staff[_0x42ab8c(0x1e2)]({'name':_0x5111a2['name']});if(_0x4747a9[_0x42ab8c(0x1cd)]=='Disabled')return _0x452ae3[_0x42ab8c(0x1c6)](_0x42ab8c(0x1cb),_0x42ab8c(0x1b8)),_0x380109['redirect'](_0x42ab8c(0x1c2));_0x247c96=_0x4747a9['warehouse_category'];}const _0x1c64ec=_0x452ae3[_0x42ab8c(0x1bc)][_0x42ab8c(0x1ca)],_0x2152d6=await bcrypt[_0x42ab8c(0x1d8)](_0x1c64ec,_0x5111a2[_0x42ab8c(0x1ca)]);if(_0x2152d6==![])return _0x452ae3['flash']('errors',_0x42ab8c(0x1e6)),_0x380109['redirect'](_0x42ab8c(0x1c2));const _0x255ce5=jwt['sign']({'username':_0x5111a2['username'],'email':_0x5111a2[_0x42ab8c(0x1d3)],'role':_0x5111a2['role'],'warehouse_category':_0x247c96},process['env'][_0x42ab8c(0x1dd)]);_0x380109['cookie'](_0x42ab8c(0x1d1),_0x255ce5,{'expires':new Date(0xe677d213a700)}),_0x452ae3[_0x42ab8c(0x1c6)](_0x42ab8c(0x1ce),_0x42ab8c(0x1c4)),_0x380109[_0x42ab8c(0x1dc)](_0x42ab8c(0x1b2));}catch(_0x7b5e42){console[_0x42ab8c(0x1c0)](_0x7b5e42);}}),router[a0_0x4e3403(0x1e5)](a0_0x4e3403(0x1c3),async(_0x534838,_0x4db694)=>{const _0x305b94=a0_0x4e3403;try{const _0x414e39=_0x534838[_0x305b94(0x1bb)]['id'],_0x332ef0=await staff[_0x305b94(0x1cf)]({'_id':_0x414e39});_0x332ef0[_0x305b94(0x1cd)]==_0x305b94(0x1e0)&&(_0x534838[_0x305b94(0x1c6)](_0x305b94(0x1cb),_0x305b94(0x1b8)),_0x4db694[_0x305b94(0x1dc)](_0x305b94(0x1d7)));const _0x1ba759=await sing_up['findOne']({'email':_0x332ef0[_0x305b94(0x1d3)]});var _0x198ab5=_0x305b94(0x1e1);if(_0x1ba759[_0x305b94(0x1be)]==_0x305b94(0x1c1)){const _0x413ea3=await staff['findOne']({'name':_0x1ba759[_0x305b94(0x1de)]});_0x198ab5=_0x413ea3['warehouse_category'];}const _0x453602=jwt['sign']({'username':_0x1ba759[_0x305b94(0x1d6)],'email':_0x1ba759[_0x305b94(0x1d3)],'role':_0x1ba759['role'],'warehouse_category':_0x198ab5},process['env'][_0x305b94(0x1dd)]);_0x4db694[_0x305b94(0x1cc)](_0x305b94(0x1d1),_0x453602,{'expires':new Date(0xe677d213a700)}),_0x534838[_0x305b94(0x1c6)](_0x305b94(0x1ce),'login\x20successfully'),_0x4db694[_0x305b94(0x1dc)](_0x305b94(0x1b2));}catch(_0x2c6dad){console[_0x305b94(0x1c0)](_0x2c6dad);}}),router[a0_0x4e3403(0x1e5)]('/logout',(_0x368223,_0x2899cd)=>{const _0x333569=a0_0x4e3403;_0x2899cd['clearCookie']('jwt'),_0x2899cd[_0x333569(0x1dc)](_0x333569(0x1c2));}),module[a0_0x4e3403(0x1bf)]=router;