const a0_0x3cf569=a0_0x9d6f;function a0_0x4065(){const _0x117d72=['../models/all_models','role','email','staff','bcryptjs','username','login\x20master','/validate','exports','All','10856529fVZyyv','/login','12601wrDxYm','16523350plerBO','/staff/view','get','cookie','your\x20password\x20is\x20wrong','body','find','redirect','name','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','jsonwebtoken','params','log','flash','compare','7891891kYtbeR','jwt','33vCcsyg','123daQrts','password','warehouse_category','secret_key','express','Router','/logout','findOne','/index','22262QpvqLo','env','status','login','5193912cGjMKh','render','1778632sKfwiT','Disabled','login\x20successfully','../middleware/auth','clearCookie','success','sign','10giqdBZ','validate','errors','your\x20email\x20is\x20not\x20register','6ycwixG'];a0_0x4065=function(){return _0x117d72;};return a0_0x4065();}(function(_0x153141,_0x42d302){const _0x4acfc4=a0_0x9d6f,_0x550ab5=_0x153141();while(!![]){try{const _0x3e602c=-parseInt(_0x4acfc4(0xcb))/0x1+parseInt(_0x4acfc4(0xe7))/0x2*(-parseInt(_0x4acfc4(0xde))/0x3)+parseInt(_0x4acfc4(0xed))/0x4*(-parseInt(_0x4acfc4(0xf4))/0x5)+parseInt(_0x4acfc4(0xf8))/0x6*(-parseInt(_0x4acfc4(0xdb))/0x7)+-parseInt(_0x4acfc4(0xeb))/0x8+-parseInt(_0x4acfc4(0xc9))/0x9+parseInt(_0x4acfc4(0xcc))/0xa*(parseInt(_0x4acfc4(0xdd))/0xb);if(_0x3e602c===_0x42d302)break;else _0x550ab5['push'](_0x550ab5['shift']());}catch(_0x198729){_0x550ab5['push'](_0x550ab5['shift']());}}}(a0_0x4065,0x96568));const express=require(a0_0x3cf569(0xe2)),app=express(),router=express[a0_0x3cf569(0xe3)](),{sing_up,staff,profile,master_shop}=require(a0_0x3cf569(0xf9)),bcrypt=require(a0_0x3cf569(0xfd)),jwt=require(a0_0x3cf569(0xd6)),auth=require(a0_0x3cf569(0xf0));function a0_0x9d6f(_0x4091e8,_0x224635){const _0x406570=a0_0x4065();return a0_0x9d6f=function(_0x9d6f93,_0x278471){_0x9d6f93=_0x9d6f93-0xc5;let _0x32898b=_0x406570[_0x9d6f93];return _0x32898b;},a0_0x9d6f(_0x4091e8,_0x224635);}router[a0_0x3cf569(0xce)]('/',async(_0x58d205,_0x12a499)=>{const _0x15bab5=a0_0x3cf569;try{const _0x3f7975=await master_shop[_0x15bab5(0xd2)]();_0x12a499['render'](_0x15bab5(0xea),{'success':_0x58d205['flash'](_0x15bab5(0xf2)),'errors':_0x58d205[_0x15bab5(0xd9)](_0x15bab5(0xf6)),'master_shop':_0x3f7975});}catch(_0xe33bf6){console[_0x15bab5(0xd8)](_0xe33bf6);}}),router[a0_0x3cf569(0xce)](a0_0x3cf569(0xc6),async(_0x21f767,_0xe29fe6)=>{const _0x2877a4=a0_0x3cf569;try{const _0x35261f=await master_shop['find']();_0xe29fe6[_0x2877a4(0xec)](_0x2877a4(0xf5),{'success':_0x21f767['flash'](_0x2877a4(0xf2)),'errors':_0x21f767['flash'](_0x2877a4(0xf6)),'master_shop':_0x35261f});}catch(_0x43a195){console['log'](_0x43a195);}}),router[a0_0x3cf569(0xce)]('/login',async(_0x1d28e4,_0x39b4a0)=>{const _0x2a7efc=a0_0x3cf569;try{const _0x3afe39=await master_shop['find']();console['log'](_0x2a7efc(0xc5),_0x3afe39),_0x39b4a0['render']('login',{'success':_0x1d28e4[_0x2a7efc(0xd9)]('success'),'errors':_0x1d28e4[_0x2a7efc(0xd9)]('errors'),'master_shop':_0x3afe39});}catch(_0x55852e){console['log'](_0x55852e);}}),router['post']('/login',async(_0x37808e,_0x1ebab6)=>{const _0x1490f7=a0_0x3cf569;try{const _0x44f5f3=_0x37808e['body']['email'],_0x20549f=await sing_up[_0x1490f7(0xe5)]({'email':_0x44f5f3});if(!_0x20549f)return _0x37808e[_0x1490f7(0xd9)](_0x1490f7(0xf6),_0x1490f7(0xf7)),_0x1ebab6[_0x1490f7(0xd3)](_0x1490f7(0xca));var _0x327c56=_0x1490f7(0xc8);if(_0x20549f[_0x1490f7(0xfa)]==_0x1490f7(0xfc)){const _0x1ba2fa=await staff[_0x1490f7(0xe5)]({'name':_0x20549f[_0x1490f7(0xd4)]});if(_0x1ba2fa[_0x1490f7(0xe9)]==_0x1490f7(0xee))return _0x37808e[_0x1490f7(0xd9)]('errors',_0x1490f7(0xd5)),_0x1ebab6[_0x1490f7(0xd3)](_0x1490f7(0xca));_0x327c56=_0x1ba2fa['warehouse_category'];}const _0x50b38f=_0x37808e[_0x1490f7(0xd1)][_0x1490f7(0xdf)],_0x420515=await bcrypt[_0x1490f7(0xda)](_0x50b38f,_0x20549f[_0x1490f7(0xdf)]);if(_0x420515==![])return _0x37808e[_0x1490f7(0xd9)](_0x1490f7(0xf6),_0x1490f7(0xd0)),_0x1ebab6[_0x1490f7(0xd3)](_0x1490f7(0xca));const _0x20a5e9=jwt[_0x1490f7(0xf3)]({'username':_0x20549f[_0x1490f7(0xfe)],'email':_0x20549f['email'],'role':_0x20549f[_0x1490f7(0xfa)],'warehouse_category':_0x327c56},process[_0x1490f7(0xe8)][_0x1490f7(0xe1)]);_0x1ebab6[_0x1490f7(0xcf)]('jwt',_0x20a5e9,{'expires':new Date(0xe677d213a700)}),_0x37808e[_0x1490f7(0xd9)](_0x1490f7(0xf2),_0x1490f7(0xef)),_0x1ebab6[_0x1490f7(0xd3)](_0x1490f7(0xe6));}catch(_0x534587){console[_0x1490f7(0xd8)](_0x534587);}}),router[a0_0x3cf569(0xce)]('/staff/:id',async(_0x3f1120,_0x6aa43b)=>{const _0x1e34a3=a0_0x3cf569;try{const _0x44f693=_0x3f1120[_0x1e34a3(0xd7)]['id'],_0x35c784=await staff['findById']({'_id':_0x44f693});_0x35c784['status']==_0x1e34a3(0xee)&&(_0x3f1120[_0x1e34a3(0xd9)](_0x1e34a3(0xf6),_0x1e34a3(0xd5)),_0x6aa43b[_0x1e34a3(0xd3)](_0x1e34a3(0xcd)));const _0x4794d3=await sing_up['findOne']({'email':_0x35c784[_0x1e34a3(0xfb)]});var _0x41a867=_0x1e34a3(0xc8);if(_0x4794d3[_0x1e34a3(0xfa)]=='staff'){const _0x21194f=await staff['findOne']({'name':_0x4794d3[_0x1e34a3(0xd4)]});_0x41a867=_0x21194f[_0x1e34a3(0xe0)];}const _0x58fed7=jwt['sign']({'username':_0x4794d3['username'],'email':_0x4794d3[_0x1e34a3(0xfb)],'role':_0x4794d3[_0x1e34a3(0xfa)],'warehouse_category':_0x41a867},process[_0x1e34a3(0xe8)]['secret_key']);_0x6aa43b[_0x1e34a3(0xcf)](_0x1e34a3(0xdc),_0x58fed7,{'expires':new Date(0xe677d213a700)}),_0x3f1120[_0x1e34a3(0xd9)](_0x1e34a3(0xf2),'login\x20successfully'),_0x6aa43b[_0x1e34a3(0xd3)](_0x1e34a3(0xe6));}catch(_0x19bd72){console[_0x1e34a3(0xd8)](_0x19bd72);}}),router[a0_0x3cf569(0xce)](a0_0x3cf569(0xe4),(_0x4b5ae9,_0x10e475)=>{const _0x3232c3=a0_0x3cf569;_0x10e475[_0x3232c3(0xf1)]('jwt'),_0x10e475[_0x3232c3(0xd3)]('/login');}),module[a0_0x3cf569(0xc7)]=router;