function a0_0x2a10(_0x1ea279,_0x187158){const _0x4defdb=a0_0x4def();return a0_0x2a10=function(_0x2a101e,_0x161d74){_0x2a101e=_0x2a101e-0x91;let _0x3fe793=_0x4defdb[_0x2a101e];return _0x3fe793;},a0_0x2a10(_0x1ea279,_0x187158);}const a0_0x3cac3f=a0_0x2a10;function a0_0x4def(){const _0x48a6ce=['clearCookie','../models/all_models','4835133CNtEkp','validate','name','username','findById','staff','post','jsonwebtoken','232236yepzyK','9131570whvtRq','errors','16275754uMiGfE','render','945018BxctdY','find','8WnQNfH','/logout','/index','Disabled','/login','5342VMlonA','warehouse_category','log','secret_key','get','../middleware/auth','522570QmdNcv','body','575EhooRs','login\x20successfully','findOne','compare','email','exports','301vsaexv','success','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','16iNMaLd','sign','redirect','/staff/view','/validate','bcryptjs','jwt','role','flash','password','cookie','All','env'];a0_0x4def=function(){return _0x48a6ce;};return a0_0x4def();}(function(_0x2e6bae,_0x5a7cb7){const _0x1c36e0=a0_0x2a10,_0x10d674=_0x2e6bae();while(!![]){try{const _0xfcd6c7=parseInt(_0x1c36e0(0xad))/0x1*(-parseInt(_0x1c36e0(0xa5))/0x2)+parseInt(_0x1c36e0(0x9e))/0x3*(-parseInt(_0x1c36e0(0xa0))/0x4)+parseInt(_0x1c36e0(0xab))/0x5+parseInt(_0x1c36e0(0x99))/0x6*(parseInt(_0x1c36e0(0xb3))/0x7)+parseInt(_0x1c36e0(0xb6))/0x8*(-parseInt(_0x1c36e0(0x91))/0x9)+parseInt(_0x1c36e0(0x9a))/0xa+parseInt(_0x1c36e0(0x9c))/0xb;if(_0xfcd6c7===_0x5a7cb7)break;else _0x10d674['push'](_0x10d674['shift']());}catch(_0x4c89bf){_0x10d674['push'](_0x10d674['shift']());}}}(a0_0x4def,0xe0ef4));const express=require('express'),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x3cac3f(0xc4)),bcrypt=require(a0_0x3cac3f(0xbb)),jwt=require(a0_0x3cac3f(0x98)),auth=require(a0_0x3cac3f(0xaa));router[a0_0x3cac3f(0xa9)]('/',async(_0x691a68,_0x5b0dc4)=>{const _0x4661c8=a0_0x3cac3f;try{const _0xe6f4a0=await master_shop[_0x4661c8(0x9f)]();_0x5b0dc4[_0x4661c8(0x9d)]('login',{'success':_0x691a68[_0x4661c8(0xbe)](_0x4661c8(0xb4)),'errors':_0x691a68['flash'](_0x4661c8(0x9b)),'master_shop':_0xe6f4a0});}catch(_0x4c143a){console[_0x4661c8(0xa7)](_0x4c143a);}}),router[a0_0x3cac3f(0xa9)](a0_0x3cac3f(0xba),async(_0x519645,_0x484418)=>{const _0x2fa095=a0_0x3cac3f;try{const _0x22d666=await master_shop[_0x2fa095(0x9f)]();_0x484418['render'](_0x2fa095(0x92),{'success':_0x519645[_0x2fa095(0xbe)](_0x2fa095(0xb4)),'errors':_0x519645['flash']('errors'),'master_shop':_0x22d666});}catch(_0x43b087){console['log'](_0x43b087);}}),router[a0_0x3cac3f(0xa9)]('/login',async(_0x5cc79d,_0x1f607b)=>{const _0x4f76d0=a0_0x3cac3f;try{const _0x5e3e31=await master_shop[_0x4f76d0(0x9f)]();console[_0x4f76d0(0xa7)]('login\x20master',_0x5e3e31),_0x1f607b[_0x4f76d0(0x9d)]('login',{'success':_0x5cc79d[_0x4f76d0(0xbe)](_0x4f76d0(0xb4)),'errors':_0x5cc79d[_0x4f76d0(0xbe)](_0x4f76d0(0x9b)),'master_shop':_0x5e3e31});}catch(_0x3c911a){console[_0x4f76d0(0xa7)](_0x3c911a);}}),router[a0_0x3cac3f(0x97)]('/login',async(_0xee36d6,_0x2e16d9)=>{const _0x46b87c=a0_0x3cac3f;try{const _0x557bca=_0xee36d6['body']['email'],_0x371a7f=await sing_up['findOne']({'email':_0x557bca});if(!_0x371a7f)return _0xee36d6['flash']('errors','your\x20email\x20is\x20not\x20register'),_0x2e16d9[_0x46b87c(0xb8)](_0x46b87c(0xa4));var _0x25de23=_0x46b87c(0xc1);if(_0x371a7f['role']==_0x46b87c(0x96)){const _0x96ceca=await staff[_0x46b87c(0xaf)]({'name':_0x371a7f['name']});if(_0x96ceca['status']==_0x46b87c(0xa3))return _0xee36d6[_0x46b87c(0xbe)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x2e16d9[_0x46b87c(0xb8)](_0x46b87c(0xa4));_0x25de23=_0x96ceca[_0x46b87c(0xa6)];}const _0x9da9f2=_0xee36d6[_0x46b87c(0xac)][_0x46b87c(0xbf)],_0x1d2d24=await bcrypt[_0x46b87c(0xb0)](_0x9da9f2,_0x371a7f[_0x46b87c(0xbf)]);if(_0x1d2d24==![])return _0xee36d6[_0x46b87c(0xbe)](_0x46b87c(0x9b),'your\x20password\x20is\x20wrong'),_0x2e16d9[_0x46b87c(0xb8)](_0x46b87c(0xa4));const _0x320972=jwt[_0x46b87c(0xb7)]({'username':_0x371a7f['username'],'email':_0x371a7f[_0x46b87c(0xb1)],'role':_0x371a7f[_0x46b87c(0xbd)],'warehouse_category':_0x25de23},process[_0x46b87c(0xc2)][_0x46b87c(0xa8)]);_0x2e16d9['cookie']('jwt',_0x320972,{'expires':new Date(0xe677d213a700)}),_0xee36d6[_0x46b87c(0xbe)](_0x46b87c(0xb4),'login\x20successfully'),_0x2e16d9[_0x46b87c(0xb8)](_0x46b87c(0xa2));}catch(_0x5c8345){console['log'](_0x5c8345);}}),router[a0_0x3cac3f(0xa9)]('/staff/:id',async(_0x4f6327,_0x131e8f)=>{const _0xe960f7=a0_0x3cac3f;try{const _0x33afae=_0x4f6327['params']['id'],_0x4dcc83=await staff[_0xe960f7(0x95)]({'_id':_0x33afae});_0x4dcc83['status']==_0xe960f7(0xa3)&&(_0x4f6327[_0xe960f7(0xbe)](_0xe960f7(0x9b),_0xe960f7(0xb5)),_0x131e8f[_0xe960f7(0xb8)](_0xe960f7(0xb9)));const _0x2b4f9c=await sing_up['findOne']({'email':_0x4dcc83[_0xe960f7(0xb1)]});var _0x3d881d='All';if(_0x2b4f9c['role']==_0xe960f7(0x96)){const _0x6b9e40=await staff[_0xe960f7(0xaf)]({'name':_0x2b4f9c[_0xe960f7(0x93)]});_0x3d881d=_0x6b9e40[_0xe960f7(0xa6)];}const _0x365774=jwt[_0xe960f7(0xb7)]({'username':_0x2b4f9c[_0xe960f7(0x94)],'email':_0x2b4f9c[_0xe960f7(0xb1)],'role':_0x2b4f9c[_0xe960f7(0xbd)],'warehouse_category':_0x3d881d},process[_0xe960f7(0xc2)][_0xe960f7(0xa8)]);_0x131e8f[_0xe960f7(0xc0)]('jwt',_0x365774,{'expires':new Date(0xe677d213a700)}),_0x4f6327[_0xe960f7(0xbe)](_0xe960f7(0xb4),_0xe960f7(0xae)),_0x131e8f['redirect']('/index');}catch(_0xd727c5){console[_0xe960f7(0xa7)](_0xd727c5);}}),router[a0_0x3cac3f(0xa9)](a0_0x3cac3f(0xa1),(_0x49e92c,_0x9e27e0)=>{const _0x4b0d98=a0_0x3cac3f;_0x9e27e0[_0x4b0d98(0xc3)](_0x4b0d98(0xbc)),_0x9e27e0[_0x4b0d98(0xb8)](_0x4b0d98(0xa4));}),module[a0_0x3cac3f(0xb2)]=router;