function a0_0x3ccc(){const _0xfaf887=['body','/staff/view','1312872ladDYp','get','Router','render','email','/login','username','status','../middleware/auth','2RtGLIz','2708200qkbaAr','1021096cExjoy','../models/all_models','2604942BYhGNI','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','staff','flash','errors','3756571TGpXlp','/validate','find','exports','validate','env','4633484ipkweS','login\x20master','express','bcryptjs','995463NdtgSm','findById','your\x20email\x20is\x20not\x20register','findOne','login\x20successfully','All','/index','success','clearCookie','/logout','sign','cookie','compare','secret_key','log','jwt','name','role','password','Disabled','login','warehouse_category','redirect'];a0_0x3ccc=function(){return _0xfaf887;};return a0_0x3ccc();}function a0_0x26f9(_0x393a1a,_0x33ad01){const _0x3ccc9a=a0_0x3ccc();return a0_0x26f9=function(_0x26f926,_0xa82d5e){_0x26f926=_0x26f926-0x1eb;let _0x3e52fe=_0x3ccc9a[_0x26f926];return _0x3e52fe;},a0_0x26f9(_0x393a1a,_0x33ad01);}const a0_0x40f2af=a0_0x26f9;(function(_0x92c29f,_0x330e97){const _0x71baca=a0_0x26f9,_0x2563f3=_0x92c29f();while(!![]){try{const _0x4a4d44=parseInt(_0x71baca(0x218))/0x1*(-parseInt(_0x71baca(0x216))/0x2)+parseInt(_0x71baca(0x1f4))/0x3+parseInt(_0x71baca(0x1f0))/0x4+-parseInt(_0x71baca(0x217))/0x5+parseInt(_0x71baca(0x21a))/0x6+parseInt(_0x71baca(0x21f))/0x7+-parseInt(_0x71baca(0x20d))/0x8;if(_0x4a4d44===_0x330e97)break;else _0x2563f3['push'](_0x2563f3['shift']());}catch(_0x245481){_0x2563f3['push'](_0x2563f3['shift']());}}}(a0_0x3ccc,0xb33cd));const express=require(a0_0x40f2af(0x1f2)),app=express(),router=express[a0_0x40f2af(0x20f)](),{sing_up,staff,profile,master_shop}=require(a0_0x40f2af(0x219)),bcrypt=require(a0_0x40f2af(0x1f3)),jwt=require('jsonwebtoken'),auth=require(a0_0x40f2af(0x215));router['get']('/',async(_0x225156,_0xf4b18d)=>{const _0x47f9d2=a0_0x40f2af;try{const _0x2e9bd0=await master_shop['find']();_0xf4b18d[_0x47f9d2(0x210)]('login',{'success':_0x225156['flash']('success'),'errors':_0x225156[_0x47f9d2(0x21d)](_0x47f9d2(0x21e)),'master_shop':_0x2e9bd0});}catch(_0x566ba8){console[_0x47f9d2(0x202)](_0x566ba8);}}),router[a0_0x40f2af(0x20e)](a0_0x40f2af(0x1eb),async(_0x1bc351,_0x4fb70e)=>{const _0x285a12=a0_0x40f2af;try{const _0x2c23ae=await master_shop['find']();_0x4fb70e['render'](_0x285a12(0x1ee),{'success':_0x1bc351['flash'](_0x285a12(0x1fb)),'errors':_0x1bc351[_0x285a12(0x21d)]('errors'),'master_shop':_0x2c23ae});}catch(_0xb940c){console[_0x285a12(0x202)](_0xb940c);}}),router[a0_0x40f2af(0x20e)](a0_0x40f2af(0x212),async(_0x4c88b5,_0x14a739)=>{const _0x3642e8=a0_0x40f2af;try{const _0x2b890f=await master_shop[_0x3642e8(0x1ec)]();console[_0x3642e8(0x202)](_0x3642e8(0x1f1),_0x2b890f),_0x14a739[_0x3642e8(0x210)](_0x3642e8(0x208),{'success':_0x4c88b5[_0x3642e8(0x21d)](_0x3642e8(0x1fb)),'errors':_0x4c88b5[_0x3642e8(0x21d)](_0x3642e8(0x21e)),'master_shop':_0x2b890f});}catch(_0x562e96){console[_0x3642e8(0x202)](_0x562e96);}}),router['post'](a0_0x40f2af(0x212),async(_0x35ce98,_0x239c78)=>{const _0x4193dc=a0_0x40f2af;try{const _0x2f53ad=_0x35ce98[_0x4193dc(0x20b)][_0x4193dc(0x211)],_0x3a1412=await sing_up['findOne']({'email':_0x2f53ad});if(!_0x3a1412)return _0x35ce98[_0x4193dc(0x21d)](_0x4193dc(0x21e),_0x4193dc(0x1f6)),_0x239c78['redirect']('/login');var _0x474293=_0x4193dc(0x1f9);if(_0x3a1412[_0x4193dc(0x205)]=='staff'){const _0x1978e6=await staff[_0x4193dc(0x1f7)]({'name':_0x3a1412[_0x4193dc(0x204)]});if(_0x1978e6[_0x4193dc(0x214)]==_0x4193dc(0x207))return _0x35ce98[_0x4193dc(0x21d)]('errors',_0x4193dc(0x21b)),_0x239c78[_0x4193dc(0x20a)](_0x4193dc(0x212));_0x474293=_0x1978e6['warehouse_category'];}const _0x4a53c8=_0x35ce98[_0x4193dc(0x20b)]['password'],_0x3acdee=await bcrypt[_0x4193dc(0x200)](_0x4a53c8,_0x3a1412[_0x4193dc(0x206)]);if(_0x3acdee==![])return _0x35ce98['flash'](_0x4193dc(0x21e),'your\x20password\x20is\x20wrong'),_0x239c78['redirect'](_0x4193dc(0x212));const _0x5f3e93=jwt['sign']({'username':_0x3a1412['username'],'email':_0x3a1412[_0x4193dc(0x211)],'role':_0x3a1412['role'],'warehouse_category':_0x474293},process[_0x4193dc(0x1ef)][_0x4193dc(0x201)]);_0x239c78['cookie'](_0x4193dc(0x203),_0x5f3e93,{'expires':new Date(0xe677d213a700)}),_0x35ce98[_0x4193dc(0x21d)](_0x4193dc(0x1fb),_0x4193dc(0x1f8)),_0x239c78['redirect'](_0x4193dc(0x1fa));}catch(_0x4e522d){console[_0x4193dc(0x202)](_0x4e522d);}}),router[a0_0x40f2af(0x20e)]('/staff/:id',async(_0x1abf7b,_0x42ac24)=>{const _0x4a4937=a0_0x40f2af;try{const _0x3117ff=_0x1abf7b['params']['id'],_0x545fe0=await staff[_0x4a4937(0x1f5)]({'_id':_0x3117ff});_0x545fe0[_0x4a4937(0x214)]==_0x4a4937(0x207)&&(_0x1abf7b[_0x4a4937(0x21d)]('errors',_0x4a4937(0x21b)),_0x42ac24[_0x4a4937(0x20a)](_0x4a4937(0x20c)));const _0x42b5c7=await sing_up[_0x4a4937(0x1f7)]({'email':_0x545fe0['email']});var _0xdf72ea=_0x4a4937(0x1f9);if(_0x42b5c7['role']==_0x4a4937(0x21c)){const _0x32d510=await staff['findOne']({'name':_0x42b5c7['name']});_0xdf72ea=_0x32d510[_0x4a4937(0x209)];}const _0x2bbebb=jwt[_0x4a4937(0x1fe)]({'username':_0x42b5c7[_0x4a4937(0x213)],'email':_0x42b5c7['email'],'role':_0x42b5c7[_0x4a4937(0x205)],'warehouse_category':_0xdf72ea},process['env'][_0x4a4937(0x201)]);_0x42ac24[_0x4a4937(0x1ff)]('jwt',_0x2bbebb,{'expires':new Date(0xe677d213a700)}),_0x1abf7b['flash'](_0x4a4937(0x1fb),_0x4a4937(0x1f8)),_0x42ac24['redirect'](_0x4a4937(0x1fa));}catch(_0x1d3c20){console[_0x4a4937(0x202)](_0x1d3c20);}}),router[a0_0x40f2af(0x20e)](a0_0x40f2af(0x1fd),(_0xb08b2e,_0x8f8e4a)=>{const _0x5b2c1a=a0_0x40f2af;_0x8f8e4a[_0x5b2c1a(0x1fc)](_0x5b2c1a(0x203)),_0x8f8e4a['redirect'](_0x5b2c1a(0x212));}),module[a0_0x40f2af(0x1ed)]=router;