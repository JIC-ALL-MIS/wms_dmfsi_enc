function a0_0xc844(){const _0x507e01=['validate','3966336IlaPnR','get','warehouse_category','redirect','env','body','9951073MhfOvL','login\x20master','bcryptjs','success','20cXICvy','566036wdZjQV','8901eSecno','your\x20password\x20is\x20wrong','1505YRaxQl','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','name','/staff/:id','username','exports','email','/login','staff','696iAAjrD','All','sign','/index','../middleware/auth','Router','your\x20email\x20is\x20not\x20register','secret_key','jwt','17328NTcptc','findById','20OWSkzy','/logout','3776823BtdsWB','/validate','find','log','login\x20successfully','login','findOne','errors','render','role','express','flash','compare','880556wGTOgI','params','cookie','/staff/view','status','jsonwebtoken'];a0_0xc844=function(){return _0x507e01;};return a0_0xc844();}const a0_0x500fec=a0_0x1de5;function a0_0x1de5(_0x3187fd,_0x3fafc0){const _0xc84435=a0_0xc844();return a0_0x1de5=function(_0x1de58f,_0xd8466a){_0x1de58f=_0x1de58f-0x179;let _0x3f9780=_0xc84435[_0x1de58f];return _0x3f9780;},a0_0x1de5(_0x3187fd,_0x3fafc0);}(function(_0x50e82c,_0x447f05){const _0x3c998b=a0_0x1de5,_0x400478=_0x50e82c();while(!![]){try{const _0x5c0df1=parseInt(_0x3c998b(0x189))/0x1+parseInt(_0x3c998b(0x1a7))/0x2*(-parseInt(_0x3c998b(0x19c))/0x3)+parseInt(_0x3c998b(0x19b))/0x4*(-parseInt(_0x3c998b(0x19a))/0x5)+parseInt(_0x3c998b(0x1b0))/0x6*(-parseInt(_0x3c998b(0x19e))/0x7)+parseInt(_0x3c998b(0x190))/0x8+-parseInt(_0x3c998b(0x17c))/0x9+-parseInt(_0x3c998b(0x17a))/0xa*(-parseInt(_0x3c998b(0x196))/0xb);if(_0x5c0df1===_0x447f05)break;else _0x400478['push'](_0x400478['shift']());}catch(_0x130371){_0x400478['push'](_0x400478['shift']());}}}(a0_0xc844,0x856d3));const express=require(a0_0x500fec(0x186)),app=express(),router=express[a0_0x500fec(0x1ac)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x500fec(0x198)),jwt=require(a0_0x500fec(0x18e)),auth=require(a0_0x500fec(0x1ab));router['get']('/',async(_0x5dd295,_0x4f67fb)=>{const _0x485865=a0_0x500fec;try{const _0x3393f6=await master_shop[_0x485865(0x17e)]();_0x4f67fb['render'](_0x485865(0x181),{'success':_0x5dd295['flash'](_0x485865(0x199)),'errors':_0x5dd295[_0x485865(0x187)](_0x485865(0x183)),'master_shop':_0x3393f6});}catch(_0xe67162){console[_0x485865(0x17f)](_0xe67162);}}),router[a0_0x500fec(0x191)](a0_0x500fec(0x17d),async(_0x39601a,_0x56609c)=>{const _0x1f6537=a0_0x500fec;try{const _0x38f85b=await master_shop[_0x1f6537(0x17e)]();_0x56609c[_0x1f6537(0x184)](_0x1f6537(0x18f),{'success':_0x39601a[_0x1f6537(0x187)](_0x1f6537(0x199)),'errors':_0x39601a[_0x1f6537(0x187)](_0x1f6537(0x183)),'master_shop':_0x38f85b});}catch(_0x5bf5c8){console[_0x1f6537(0x17f)](_0x5bf5c8);}}),router['get']('/login',async(_0x2ec9e3,_0x4e69ce)=>{const _0x3cd494=a0_0x500fec;try{const _0x47cd03=await master_shop[_0x3cd494(0x17e)]();console[_0x3cd494(0x17f)](_0x3cd494(0x197),_0x47cd03),_0x4e69ce[_0x3cd494(0x184)](_0x3cd494(0x181),{'success':_0x2ec9e3['flash'](_0x3cd494(0x199)),'errors':_0x2ec9e3[_0x3cd494(0x187)](_0x3cd494(0x183)),'master_shop':_0x47cd03});}catch(_0x50a8b5){console[_0x3cd494(0x17f)](_0x50a8b5);}}),router['post'](a0_0x500fec(0x1a5),async(_0x5ec7c3,_0x2993e2)=>{const _0x4f75a0=a0_0x500fec;try{const _0x180395=_0x5ec7c3['body']['email'],_0x2bbbc3=await sing_up['findOne']({'email':_0x180395});if(!_0x2bbbc3)return _0x5ec7c3['flash'](_0x4f75a0(0x183),_0x4f75a0(0x1ad)),_0x2993e2[_0x4f75a0(0x193)]('/login');var _0xeab183=_0x4f75a0(0x1a8);if(_0x2bbbc3[_0x4f75a0(0x185)]==_0x4f75a0(0x1a6)){const _0x146be3=await staff[_0x4f75a0(0x182)]({'name':_0x2bbbc3['name']});if(_0x146be3['status']=='Disabled')return _0x5ec7c3[_0x4f75a0(0x187)](_0x4f75a0(0x183),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x2993e2['redirect'](_0x4f75a0(0x1a5));_0xeab183=_0x146be3[_0x4f75a0(0x192)];}const _0x17197e=_0x5ec7c3[_0x4f75a0(0x195)]['password'],_0x56eeee=await bcrypt[_0x4f75a0(0x188)](_0x17197e,_0x2bbbc3['password']);if(_0x56eeee==![])return _0x5ec7c3[_0x4f75a0(0x187)](_0x4f75a0(0x183),_0x4f75a0(0x19d)),_0x2993e2[_0x4f75a0(0x193)](_0x4f75a0(0x1a5));const _0x19e8b3=jwt[_0x4f75a0(0x1a9)]({'username':_0x2bbbc3[_0x4f75a0(0x1a2)],'email':_0x2bbbc3[_0x4f75a0(0x1a4)],'role':_0x2bbbc3[_0x4f75a0(0x185)],'warehouse_category':_0xeab183},process[_0x4f75a0(0x194)][_0x4f75a0(0x1ae)]);_0x2993e2[_0x4f75a0(0x18b)](_0x4f75a0(0x1af),_0x19e8b3,{'expires':new Date(0xe677d213a700)}),_0x5ec7c3[_0x4f75a0(0x187)](_0x4f75a0(0x199),_0x4f75a0(0x180)),_0x2993e2['redirect']('/index');}catch(_0x4cd7db){console['log'](_0x4cd7db);}}),router[a0_0x500fec(0x191)](a0_0x500fec(0x1a1),async(_0x4508b4,_0x1e655e)=>{const _0x4cafde=a0_0x500fec;try{const _0x2669d6=_0x4508b4[_0x4cafde(0x18a)]['id'],_0x82883c=await staff[_0x4cafde(0x179)]({'_id':_0x2669d6});_0x82883c[_0x4cafde(0x18d)]=='Disabled'&&(_0x4508b4['flash']('errors',_0x4cafde(0x19f)),_0x1e655e[_0x4cafde(0x193)](_0x4cafde(0x18c)));const _0xeca0c1=await sing_up['findOne']({'email':_0x82883c[_0x4cafde(0x1a4)]});var _0xa8d713=_0x4cafde(0x1a8);if(_0xeca0c1[_0x4cafde(0x185)]==_0x4cafde(0x1a6)){const _0x448bf2=await staff['findOne']({'name':_0xeca0c1[_0x4cafde(0x1a0)]});_0xa8d713=_0x448bf2['warehouse_category'];}const _0x2ed5c5=jwt['sign']({'username':_0xeca0c1[_0x4cafde(0x1a2)],'email':_0xeca0c1[_0x4cafde(0x1a4)],'role':_0xeca0c1[_0x4cafde(0x185)],'warehouse_category':_0xa8d713},process[_0x4cafde(0x194)][_0x4cafde(0x1ae)]);_0x1e655e[_0x4cafde(0x18b)](_0x4cafde(0x1af),_0x2ed5c5,{'expires':new Date(0xe677d213a700)}),_0x4508b4[_0x4cafde(0x187)](_0x4cafde(0x199),_0x4cafde(0x180)),_0x1e655e[_0x4cafde(0x193)](_0x4cafde(0x1aa));}catch(_0x9141e0){console[_0x4cafde(0x17f)](_0x9141e0);}}),router[a0_0x500fec(0x191)](a0_0x500fec(0x17b),(_0x30d568,_0x1ce2f3)=>{const _0x7606a0=a0_0x500fec;_0x1ce2f3['clearCookie'](_0x7606a0(0x1af)),_0x1ce2f3[_0x7606a0(0x193)](_0x7606a0(0x1a5));}),module[a0_0x500fec(0x1a3)]=router;