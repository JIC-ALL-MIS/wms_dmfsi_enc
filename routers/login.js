const a0_0x45e212=a0_0x432e;function a0_0x432e(_0x371bb1,_0x15edb3){const _0x8193a3=a0_0x8193();return a0_0x432e=function(_0x432e21,_0x64cf7){_0x432e21=_0x432e21-0x7e;let _0x260eea=_0x8193a3[_0x432e21];return _0x260eea;},a0_0x432e(_0x371bb1,_0x15edb3);}(function(_0x4c3afe,_0x493136){const _0x2f1fbb=a0_0x432e,_0x1a1f81=_0x4c3afe();while(!![]){try{const _0x2a8baf=parseInt(_0x2f1fbb(0xa1))/0x1*(parseInt(_0x2f1fbb(0x92))/0x2)+parseInt(_0x2f1fbb(0x9a))/0x3*(parseInt(_0x2f1fbb(0xb2))/0x4)+-parseInt(_0x2f1fbb(0x91))/0x5+parseInt(_0x2f1fbb(0x82))/0x6+parseInt(_0x2f1fbb(0x86))/0x7+-parseInt(_0x2f1fbb(0xa0))/0x8*(-parseInt(_0x2f1fbb(0x99))/0x9)+-parseInt(_0x2f1fbb(0x9d))/0xa;if(_0x2a8baf===_0x493136)break;else _0x1a1f81['push'](_0x1a1f81['shift']());}catch(_0x587158){_0x1a1f81['push'](_0x1a1f81['shift']());}}}(a0_0x8193,0x1da0d));const express=require('express'),app=express(),router=express[a0_0x45e212(0x7e)](),{sing_up,staff,profile,master_shop}=require(a0_0x45e212(0x9f)),bcrypt=require(a0_0x45e212(0x98)),jwt=require(a0_0x45e212(0xa2)),auth=require('../middleware/auth');router['get']('/',async(_0x1d2234,_0x110ca9)=>{const _0x524927=a0_0x45e212;try{const _0x5bd4ee=await master_shop[_0x524927(0xad)]();_0x110ca9['render'](_0x524927(0x81),{'success':_0x1d2234[_0x524927(0x8d)](_0x524927(0x85)),'errors':_0x1d2234[_0x524927(0x8d)](_0x524927(0xac)),'master_shop':_0x5bd4ee});}catch(_0x1e69ab){console[_0x524927(0xa6)](_0x1e69ab);}}),router[a0_0x45e212(0x80)](a0_0x45e212(0xa3),async(_0x335cba,_0x3409f2)=>{const _0x6d31db=a0_0x45e212;try{const _0x3ade32=await master_shop[_0x6d31db(0xad)]();_0x3409f2[_0x6d31db(0x88)](_0x6d31db(0xa4),{'success':_0x335cba[_0x6d31db(0x8d)](_0x6d31db(0x85)),'errors':_0x335cba['flash'](_0x6d31db(0xac)),'master_shop':_0x3ade32});}catch(_0x4ecd30){console['log'](_0x4ecd30);}}),router[a0_0x45e212(0x80)](a0_0x45e212(0x93),async(_0x3acd45,_0x348796)=>{const _0x45ffee=a0_0x45e212;try{const _0x176a64=await master_shop[_0x45ffee(0xad)]();console[_0x45ffee(0xa6)]('login\x20master',_0x176a64),_0x348796[_0x45ffee(0x88)](_0x45ffee(0x81),{'success':_0x3acd45['flash']('success'),'errors':_0x3acd45['flash'](_0x45ffee(0xac)),'master_shop':_0x176a64});}catch(_0x305e50){console[_0x45ffee(0xa6)](_0x305e50);}}),router[a0_0x45e212(0x84)](a0_0x45e212(0x93),async(_0x3c5f98,_0x132b66)=>{const _0x14a8f6=a0_0x45e212;try{const _0x446034=_0x3c5f98[_0x14a8f6(0xb1)][_0x14a8f6(0x8c)],_0x568428=await sing_up['findOne']({'email':_0x446034});if(!_0x568428)return _0x3c5f98[_0x14a8f6(0x8d)](_0x14a8f6(0xac),_0x14a8f6(0x9e)),_0x132b66['redirect']('/login');var _0x55b881=_0x14a8f6(0x83);if(_0x568428[_0x14a8f6(0xae)]==_0x14a8f6(0x7f)){const _0x23a38d=await staff[_0x14a8f6(0x95)]({'name':_0x568428[_0x14a8f6(0x97)]});if(_0x23a38d[_0x14a8f6(0xa5)]==_0x14a8f6(0xa9))return _0x3c5f98[_0x14a8f6(0x8d)](_0x14a8f6(0xac),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x132b66[_0x14a8f6(0x8e)]('/login');_0x55b881=_0x23a38d['warehouse_category'];}const _0x197503=_0x3c5f98[_0x14a8f6(0xb1)][_0x14a8f6(0xaa)],_0x2f8bab=await bcrypt['compare'](_0x197503,_0x568428['password']);if(_0x2f8bab==![])return _0x3c5f98['flash'](_0x14a8f6(0xac),'your\x20password\x20is\x20wrong'),_0x132b66['redirect'](_0x14a8f6(0x93));const _0x411826=jwt[_0x14a8f6(0xab)]({'username':_0x568428[_0x14a8f6(0x87)],'email':_0x568428[_0x14a8f6(0x8c)],'role':_0x568428[_0x14a8f6(0xae)],'warehouse_category':_0x55b881},process[_0x14a8f6(0x9c)][_0x14a8f6(0xaf)]);_0x132b66['cookie'](_0x14a8f6(0x90),_0x411826,{'expires':new Date(0xe677d213a700)}),_0x3c5f98['flash'](_0x14a8f6(0x85),_0x14a8f6(0x9b)),_0x132b66['redirect'](_0x14a8f6(0x89));}catch(_0x1c41a3){console[_0x14a8f6(0xa6)](_0x1c41a3);}}),router['get'](a0_0x45e212(0xa7),async(_0x4b9f4c,_0x11aa1f)=>{const _0x364bba=a0_0x45e212;try{const _0x5a1fb2=_0x4b9f4c[_0x364bba(0x8b)]['id'],_0x5f2b24=await staff[_0x364bba(0x96)]({'_id':_0x5a1fb2});_0x5f2b24['status']==_0x364bba(0xa9)&&(_0x4b9f4c['flash']('errors',_0x364bba(0x94)),_0x11aa1f[_0x364bba(0x8e)](_0x364bba(0xa8)));const _0x5da580=await sing_up[_0x364bba(0x95)]({'email':_0x5f2b24[_0x364bba(0x8c)]});var _0x49b539='All';if(_0x5da580['role']==_0x364bba(0x7f)){const _0x1ebe6a=await staff[_0x364bba(0x95)]({'name':_0x5da580['name']});_0x49b539=_0x1ebe6a[_0x364bba(0xb3)];}const _0x21a1d8=jwt[_0x364bba(0xab)]({'username':_0x5da580[_0x364bba(0x87)],'email':_0x5da580[_0x364bba(0x8c)],'role':_0x5da580[_0x364bba(0xae)],'warehouse_category':_0x49b539},process[_0x364bba(0x9c)][_0x364bba(0xaf)]);_0x11aa1f[_0x364bba(0x8f)](_0x364bba(0x90),_0x21a1d8,{'expires':new Date(0xe677d213a700)}),_0x4b9f4c[_0x364bba(0x8d)](_0x364bba(0x85),_0x364bba(0x9b)),_0x11aa1f['redirect'](_0x364bba(0x89));}catch(_0x593d00){console[_0x364bba(0xa6)](_0x593d00);}}),router[a0_0x45e212(0x80)](a0_0x45e212(0xb0),(_0x502627,_0x40f28b)=>{const _0x52eabe=a0_0x45e212;_0x40f28b[_0x52eabe(0x8a)](_0x52eabe(0x90)),_0x40f28b[_0x52eabe(0x8e)](_0x52eabe(0x93));}),module[a0_0x45e212(0xb4)]=router;function a0_0x8193(){const _0x10849c=['get','login','1277562mEpKrb','All','post','success','1134112XBVGXI','username','render','/index','clearCookie','params','email','flash','redirect','cookie','jwt','35185veCSCk','2714pltOXD','/login','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','findOne','findById','name','bcryptjs','1653489baulxh','72375KLEMZz','login\x20successfully','env','6724230eHPVPD','your\x20email\x20is\x20not\x20register','../models/all_models','8BFZTCh','54UpZNKC','jsonwebtoken','/validate','validate','status','log','/staff/:id','/staff/view','Disabled','password','sign','errors','find','role','secret_key','/logout','body','28eIQXHX','warehouse_category','exports','Router','staff'];a0_0x8193=function(){return _0x10849c;};return a0_0x8193();}