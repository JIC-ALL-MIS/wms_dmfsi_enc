const a0_0x1659b9=a0_0x5463;(function(_0x454064,_0x151c04){const _0x4977e0=a0_0x5463,_0xa26b61=_0x454064();while(!![]){try{const _0x4212b8=parseInt(_0x4977e0(0xe4))/0x1*(parseInt(_0x4977e0(0xd7))/0x2)+-parseInt(_0x4977e0(0xfa))/0x3*(parseInt(_0x4977e0(0xda))/0x4)+parseInt(_0x4977e0(0xfb))/0x5+-parseInt(_0x4977e0(0xd9))/0x6+parseInt(_0x4977e0(0xed))/0x7*(-parseInt(_0x4977e0(0x109))/0x8)+-parseInt(_0x4977e0(0xff))/0x9+parseInt(_0x4977e0(0xdc))/0xa;if(_0x4212b8===_0x151c04)break;else _0xa26b61['push'](_0xa26b61['shift']());}catch(_0x19d9c8){_0xa26b61['push'](_0xa26b61['shift']());}}}(a0_0x21db,0xc78e9));const express=require('express'),app=express(),router=express[a0_0x1659b9(0xf8)](),{sing_up,staff,profile,master_shop}=require(a0_0x1659b9(0xde)),bcrypt=require(a0_0x1659b9(0x100)),jwt=require(a0_0x1659b9(0xf3)),auth=require(a0_0x1659b9(0xee));function a0_0x5463(_0x397c9d,_0x4c8b47){const _0x21db42=a0_0x21db();return a0_0x5463=function(_0x546336,_0x411db6){_0x546336=_0x546336-0xd3;let _0x5e9898=_0x21db42[_0x546336];return _0x5e9898;},a0_0x5463(_0x397c9d,_0x4c8b47);}function a0_0x21db(){const _0x2ba160=['name','jwt','email','jsonwebtoken','render','/index','your\x20email\x20is\x20not\x20register','log','Router','get','1049889gVShjt','1675825lwJkDV','/logout','find','role','5333490SfmfIC','bcryptjs','cookie','login\x20master','errors','findById','clearCookie','params','/validate','password','148712mWGlXd','exports','username','env','flash','validate','612158CllkSp','sign','7492740ReSvMZ','8kSmRkU','/staff/view','32020600bslOmR','warehouse_category','../models/all_models','findOne','/staff/:id','your\x20password\x20is\x20wrong','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','redirect','3JZCPHn','/login','success','login\x20successfully','compare','login','post','Disabled','secret_key','413XwXfKL','../middleware/auth','All'];a0_0x21db=function(){return _0x2ba160;};return a0_0x21db();}router[a0_0x1659b9(0xf9)]('/',async(_0x50beae,_0x460111)=>{const _0x227c3c=a0_0x1659b9;try{const _0x33d4fe=await master_shop['find']();_0x460111['render'](_0x227c3c(0xe9),{'success':_0x50beae[_0x227c3c(0xd5)](_0x227c3c(0xe6)),'errors':_0x50beae[_0x227c3c(0xd5)](_0x227c3c(0x103)),'master_shop':_0x33d4fe});}catch(_0x65467a){console[_0x227c3c(0xf7)](_0x65467a);}}),router[a0_0x1659b9(0xf9)](a0_0x1659b9(0x107),async(_0x9c0999,_0x107207)=>{const _0x26de55=a0_0x1659b9;try{const _0x43a79c=await master_shop[_0x26de55(0xfd)]();_0x107207['render'](_0x26de55(0xd6),{'success':_0x9c0999['flash'](_0x26de55(0xe6)),'errors':_0x9c0999[_0x26de55(0xd5)]('errors'),'master_shop':_0x43a79c});}catch(_0x139815){console[_0x26de55(0xf7)](_0x139815);}}),router['get'](a0_0x1659b9(0xe5),async(_0xadf1bf,_0x77f432)=>{const _0x18d0e0=a0_0x1659b9;try{const _0x1c4729=await master_shop[_0x18d0e0(0xfd)]();console[_0x18d0e0(0xf7)](_0x18d0e0(0x102),_0x1c4729),_0x77f432[_0x18d0e0(0xf4)](_0x18d0e0(0xe9),{'success':_0xadf1bf[_0x18d0e0(0xd5)](_0x18d0e0(0xe6)),'errors':_0xadf1bf[_0x18d0e0(0xd5)](_0x18d0e0(0x103)),'master_shop':_0x1c4729});}catch(_0xc535f8){console[_0x18d0e0(0xf7)](_0xc535f8);}}),router[a0_0x1659b9(0xea)](a0_0x1659b9(0xe5),async(_0x1e4cce,_0x2f96e2)=>{const _0x4a4ac5=a0_0x1659b9;try{const _0x4eaefa=_0x1e4cce['body']['email'],_0x1e6899=await sing_up[_0x4a4ac5(0xdf)]({'email':_0x4eaefa});if(!_0x1e6899)return _0x1e4cce['flash'](_0x4a4ac5(0x103),_0x4a4ac5(0xf6)),_0x2f96e2[_0x4a4ac5(0xe3)](_0x4a4ac5(0xe5));var _0x5ed428='All';if(_0x1e6899['role']=='staff'){const _0x1fce5a=await staff[_0x4a4ac5(0xdf)]({'name':_0x1e6899['name']});if(_0x1fce5a['status']==_0x4a4ac5(0xeb))return _0x1e4cce[_0x4a4ac5(0xd5)](_0x4a4ac5(0x103),_0x4a4ac5(0xe2)),_0x2f96e2[_0x4a4ac5(0xe3)]('/login');_0x5ed428=_0x1fce5a[_0x4a4ac5(0xdd)];}const _0x50c4b5=_0x1e4cce['body'][_0x4a4ac5(0x108)],_0x2b6f70=await bcrypt[_0x4a4ac5(0xe8)](_0x50c4b5,_0x1e6899['password']);if(_0x2b6f70==![])return _0x1e4cce[_0x4a4ac5(0xd5)]('errors',_0x4a4ac5(0xe1)),_0x2f96e2['redirect'](_0x4a4ac5(0xe5));const _0x2a99e6=jwt[_0x4a4ac5(0xd8)]({'username':_0x1e6899['username'],'email':_0x1e6899['email'],'role':_0x1e6899[_0x4a4ac5(0xfe)],'warehouse_category':_0x5ed428},process[_0x4a4ac5(0xd4)][_0x4a4ac5(0xec)]);_0x2f96e2['cookie'](_0x4a4ac5(0xf1),_0x2a99e6,{'expires':new Date(0xe677d213a700)}),_0x1e4cce[_0x4a4ac5(0xd5)](_0x4a4ac5(0xe6),_0x4a4ac5(0xe7)),_0x2f96e2[_0x4a4ac5(0xe3)](_0x4a4ac5(0xf5));}catch(_0x553a5b){console[_0x4a4ac5(0xf7)](_0x553a5b);}}),router[a0_0x1659b9(0xf9)](a0_0x1659b9(0xe0),async(_0xb09f77,_0x5e0b25)=>{const _0x3c2224=a0_0x1659b9;try{const _0x2fdb21=_0xb09f77[_0x3c2224(0x106)]['id'],_0x411be7=await staff[_0x3c2224(0x104)]({'_id':_0x2fdb21});_0x411be7['status']==_0x3c2224(0xeb)&&(_0xb09f77['flash']('errors',_0x3c2224(0xe2)),_0x5e0b25[_0x3c2224(0xe3)](_0x3c2224(0xdb)));const _0x499d3f=await sing_up[_0x3c2224(0xdf)]({'email':_0x411be7[_0x3c2224(0xf2)]});var _0x54597c=_0x3c2224(0xef);if(_0x499d3f[_0x3c2224(0xfe)]=='staff'){const _0x5b1cf9=await staff['findOne']({'name':_0x499d3f[_0x3c2224(0xf0)]});_0x54597c=_0x5b1cf9[_0x3c2224(0xdd)];}const _0x44bc0e=jwt[_0x3c2224(0xd8)]({'username':_0x499d3f[_0x3c2224(0xd3)],'email':_0x499d3f[_0x3c2224(0xf2)],'role':_0x499d3f[_0x3c2224(0xfe)],'warehouse_category':_0x54597c},process['env'][_0x3c2224(0xec)]);_0x5e0b25[_0x3c2224(0x101)](_0x3c2224(0xf1),_0x44bc0e,{'expires':new Date(0xe677d213a700)}),_0xb09f77['flash']('success',_0x3c2224(0xe7)),_0x5e0b25[_0x3c2224(0xe3)]('/index');}catch(_0x56e419){console[_0x3c2224(0xf7)](_0x56e419);}}),router['get'](a0_0x1659b9(0xfc),(_0x2ebc6a,_0xde619e)=>{const _0x55ec6a=a0_0x1659b9;_0xde619e[_0x55ec6a(0x105)](_0x55ec6a(0xf1)),_0xde619e[_0x55ec6a(0xe3)](_0x55ec6a(0xe5));}),module[a0_0x1659b9(0x10a)]=router;