const a0_0x44fac3=a0_0xd49f;(function(_0x39303a,_0x3e9ebe){const _0x258754=a0_0xd49f,_0x29c17f=_0x39303a();while(!![]){try{const _0x4e417f=-parseInt(_0x258754(0x182))/0x1+-parseInt(_0x258754(0x193))/0x2*(-parseInt(_0x258754(0x18b))/0x3)+-parseInt(_0x258754(0x17d))/0x4*(-parseInt(_0x258754(0x18e))/0x5)+-parseInt(_0x258754(0x191))/0x6*(parseInt(_0x258754(0x190))/0x7)+parseInt(_0x258754(0x174))/0x8+-parseInt(_0x258754(0x17e))/0x9+parseInt(_0x258754(0x172))/0xa;if(_0x4e417f===_0x3e9ebe)break;else _0x29c17f['push'](_0x29c17f['shift']());}catch(_0x10b346){_0x29c17f['push'](_0x29c17f['shift']());}}}(a0_0x50ef,0x6f90c));const express=require('express'),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x44fac3(0x173)),bcrypt=require('bcryptjs'),jwt=require(a0_0x44fac3(0x19a)),auth=require(a0_0x44fac3(0x170));function a0_0xd49f(_0x15fb22,_0x282083){const _0x50ef29=a0_0x50ef();return a0_0xd49f=function(_0xd49f6f,_0x214b2c){_0xd49f6f=_0xd49f6f-0x170;let _0x3b6794=_0x50ef29[_0xd49f6f];return _0x3b6794;},a0_0xd49f(_0x15fb22,_0x282083);}function a0_0x50ef(){const _0x39cd49=['12949890UKGMYc','../models/all_models','5952216lPvlIN','secret_key','clearCookie','role','/index','exports','/logout','your\x20email\x20is\x20not\x20register','cookie','939100nqChsA','7991838hYPgXv','password','sign','staff','591307EfaXdD','status','findOne','get','/staff/view','/staff/:id','compare','log','username','6gzUgVf','login','All','5GeaKBm','email','1281252ioNUsB','24yYfduC','jwt','394614NJmEmp','render','errors','your\x20password\x20is\x20wrong','Disabled','/validate','warehouse_category','jsonwebtoken','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','/login','env','post','params','login\x20successfully','name','find','success','redirect','body','validate','../middleware/auth','flash'];a0_0x50ef=function(){return _0x39cd49;};return a0_0x50ef();}router[a0_0x44fac3(0x185)]('/',async(_0x226a1b,_0xfe24c6)=>{const _0x1f377c=a0_0x44fac3;try{const _0x5d08f8=await master_shop['find']();_0xfe24c6[_0x1f377c(0x194)](_0x1f377c(0x18c),{'success':_0x226a1b[_0x1f377c(0x171)](_0x1f377c(0x1a3)),'errors':_0x226a1b[_0x1f377c(0x171)](_0x1f377c(0x195)),'master_shop':_0x5d08f8});}catch(_0x533533){console[_0x1f377c(0x189)](_0x533533);}}),router[a0_0x44fac3(0x185)](a0_0x44fac3(0x198),async(_0x15ca4d,_0x5f5bf7)=>{const _0x1d43da=a0_0x44fac3;try{const _0x124912=await master_shop[_0x1d43da(0x1a2)]();_0x5f5bf7[_0x1d43da(0x194)](_0x1d43da(0x1a6),{'success':_0x15ca4d[_0x1d43da(0x171)](_0x1d43da(0x1a3)),'errors':_0x15ca4d['flash']('errors'),'master_shop':_0x124912});}catch(_0x29e598){console[_0x1d43da(0x189)](_0x29e598);}}),router[a0_0x44fac3(0x185)]('/login',async(_0x2e3ae8,_0x3c36ed)=>{const _0x31f235=a0_0x44fac3;try{const _0x25d54f=await master_shop['find']();console['log']('login\x20master',_0x25d54f),_0x3c36ed[_0x31f235(0x194)](_0x31f235(0x18c),{'success':_0x2e3ae8['flash']('success'),'errors':_0x2e3ae8[_0x31f235(0x171)](_0x31f235(0x195)),'master_shop':_0x25d54f});}catch(_0x42e79d){console[_0x31f235(0x189)](_0x42e79d);}}),router[a0_0x44fac3(0x19e)](a0_0x44fac3(0x19c),async(_0x30f85c,_0xba82a7)=>{const _0x20cf5d=a0_0x44fac3;try{const _0x269a35=_0x30f85c[_0x20cf5d(0x1a5)][_0x20cf5d(0x18f)],_0x25ab53=await sing_up['findOne']({'email':_0x269a35});if(!_0x25ab53)return _0x30f85c[_0x20cf5d(0x171)](_0x20cf5d(0x195),_0x20cf5d(0x17b)),_0xba82a7[_0x20cf5d(0x1a4)](_0x20cf5d(0x19c));var _0x18d68f=_0x20cf5d(0x18d);if(_0x25ab53[_0x20cf5d(0x177)]==_0x20cf5d(0x181)){const _0x190cb4=await staff[_0x20cf5d(0x184)]({'name':_0x25ab53[_0x20cf5d(0x1a1)]});if(_0x190cb4['status']==_0x20cf5d(0x197))return _0x30f85c[_0x20cf5d(0x171)]('errors',_0x20cf5d(0x19b)),_0xba82a7[_0x20cf5d(0x1a4)](_0x20cf5d(0x19c));_0x18d68f=_0x190cb4['warehouse_category'];}const _0x6d21f6=_0x30f85c[_0x20cf5d(0x1a5)][_0x20cf5d(0x17f)],_0x1e018f=await bcrypt[_0x20cf5d(0x188)](_0x6d21f6,_0x25ab53[_0x20cf5d(0x17f)]);if(_0x1e018f==![])return _0x30f85c[_0x20cf5d(0x171)](_0x20cf5d(0x195),_0x20cf5d(0x196)),_0xba82a7[_0x20cf5d(0x1a4)](_0x20cf5d(0x19c));const _0x3f6143=jwt['sign']({'username':_0x25ab53[_0x20cf5d(0x18a)],'email':_0x25ab53[_0x20cf5d(0x18f)],'role':_0x25ab53[_0x20cf5d(0x177)],'warehouse_category':_0x18d68f},process[_0x20cf5d(0x19d)]['secret_key']);_0xba82a7[_0x20cf5d(0x17c)]('jwt',_0x3f6143,{'expires':new Date(0xe677d213a700)}),_0x30f85c[_0x20cf5d(0x171)]('success',_0x20cf5d(0x1a0)),_0xba82a7[_0x20cf5d(0x1a4)](_0x20cf5d(0x178));}catch(_0x3c6e11){console['log'](_0x3c6e11);}}),router[a0_0x44fac3(0x185)](a0_0x44fac3(0x187),async(_0x4fa507,_0x2c840b)=>{const _0x334e10=a0_0x44fac3;try{const _0xe6c598=_0x4fa507[_0x334e10(0x19f)]['id'],_0x597d0a=await staff['findById']({'_id':_0xe6c598});_0x597d0a[_0x334e10(0x183)]==_0x334e10(0x197)&&(_0x4fa507['flash'](_0x334e10(0x195),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x2c840b[_0x334e10(0x1a4)](_0x334e10(0x186)));const _0x5b7716=await sing_up['findOne']({'email':_0x597d0a['email']});var _0x17ea20=_0x334e10(0x18d);if(_0x5b7716[_0x334e10(0x177)]==_0x334e10(0x181)){const _0x4eefd1=await staff[_0x334e10(0x184)]({'name':_0x5b7716['name']});_0x17ea20=_0x4eefd1[_0x334e10(0x199)];}const _0x1e22e2=jwt[_0x334e10(0x180)]({'username':_0x5b7716[_0x334e10(0x18a)],'email':_0x5b7716['email'],'role':_0x5b7716[_0x334e10(0x177)],'warehouse_category':_0x17ea20},process[_0x334e10(0x19d)][_0x334e10(0x175)]);_0x2c840b['cookie'](_0x334e10(0x192),_0x1e22e2,{'expires':new Date(0xe677d213a700)}),_0x4fa507['flash'](_0x334e10(0x1a3),_0x334e10(0x1a0)),_0x2c840b[_0x334e10(0x1a4)](_0x334e10(0x178));}catch(_0x38c35d){console[_0x334e10(0x189)](_0x38c35d);}}),router['get'](a0_0x44fac3(0x17a),(_0x36de7e,_0x94721a)=>{const _0x822725=a0_0x44fac3;_0x94721a[_0x822725(0x176)](_0x822725(0x192)),_0x94721a['redirect'](_0x822725(0x19c));}),module[a0_0x44fac3(0x179)]=router;