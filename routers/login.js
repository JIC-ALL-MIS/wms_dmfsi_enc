const a0_0x55670e=a0_0x571f;(function(_0x55dffd,_0x18b54c){const _0x5d83ea=a0_0x571f,_0xf49bb0=_0x55dffd();while(!![]){try{const _0x4b1c03=-parseInt(_0x5d83ea(0x1cf))/0x1*(-parseInt(_0x5d83ea(0x1f1))/0x2)+-parseInt(_0x5d83ea(0x1bc))/0x3*(-parseInt(_0x5d83ea(0x1c3))/0x4)+parseInt(_0x5d83ea(0x1c1))/0x5*(-parseInt(_0x5d83ea(0x1eb))/0x6)+-parseInt(_0x5d83ea(0x1cb))/0x7*(-parseInt(_0x5d83ea(0x1c4))/0x8)+-parseInt(_0x5d83ea(0x1d6))/0x9+-parseInt(_0x5d83ea(0x1df))/0xa*(parseInt(_0x5d83ea(0x1cd))/0xb)+parseInt(_0x5d83ea(0x1ca))/0xc;if(_0x4b1c03===_0x18b54c)break;else _0xf49bb0['push'](_0xf49bb0['shift']());}catch(_0x127f71){_0xf49bb0['push'](_0xf49bb0['shift']());}}}(a0_0x471d,0x9b7fa));function a0_0x471d(){const _0x317940=['jsonwebtoken','/staff/view','success','your\x20password\x20is\x20wrong','findOne','username','8538039jdIfBJ','bcryptjs','password','role','params','../middleware/auth','body','/logout','flash','6590TPiAeU','find','email','render','get','/index','staff','/validate','/staff/:id','express','warehouse_category','clearCookie','6570ajtaJw','status','login','secret_key','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','validate','2552VYWhDK','/login','321942gCFwbo','redirect','log','env','errors','3915GcGmHW','Disabled','16kRRqMQ','1088jtCTbv','login\x20successfully','jwt','All','exports','sign','6889380AXKnmS','64652ISGtqE','cookie','15829QVMCfy','compare','887PKqVxz'];a0_0x471d=function(){return _0x317940;};return a0_0x471d();}function a0_0x571f(_0x17fe62,_0x2717f9){const _0x471dfd=a0_0x471d();return a0_0x571f=function(_0x571ff7,_0xfc60b5){_0x571ff7=_0x571ff7-0x1bc;let _0x3e3131=_0x471dfd[_0x571ff7];return _0x3e3131;},a0_0x571f(_0x17fe62,_0x2717f9);}const express=require(a0_0x55670e(0x1e8)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x55670e(0x1d7)),jwt=require(a0_0x55670e(0x1d0)),auth=require(a0_0x55670e(0x1db));router[a0_0x55670e(0x1e3)]('/',async(_0x3754b3,_0x80f1ea)=>{const _0x3e70ca=a0_0x55670e;try{const _0x34593f=await master_shop['find']();_0x80f1ea[_0x3e70ca(0x1e2)](_0x3e70ca(0x1ed),{'success':_0x3754b3[_0x3e70ca(0x1de)](_0x3e70ca(0x1d2)),'errors':_0x3754b3['flash'](_0x3e70ca(0x1c0)),'master_shop':_0x34593f});}catch(_0x2b04ec){console[_0x3e70ca(0x1be)](_0x2b04ec);}}),router[a0_0x55670e(0x1e3)](a0_0x55670e(0x1e6),async(_0x5eb0b6,_0x5e72a1)=>{const _0x4a8d81=a0_0x55670e;try{const _0x5a22af=await master_shop[_0x4a8d81(0x1e0)]();_0x5e72a1[_0x4a8d81(0x1e2)](_0x4a8d81(0x1f0),{'success':_0x5eb0b6['flash'](_0x4a8d81(0x1d2)),'errors':_0x5eb0b6[_0x4a8d81(0x1de)](_0x4a8d81(0x1c0)),'master_shop':_0x5a22af});}catch(_0x569208){console[_0x4a8d81(0x1be)](_0x569208);}}),router[a0_0x55670e(0x1e3)](a0_0x55670e(0x1f2),async(_0x1e0985,_0x40d72a)=>{const _0x221177=a0_0x55670e;try{const _0x308c16=await master_shop[_0x221177(0x1e0)]();console[_0x221177(0x1be)]('login\x20master',_0x308c16),_0x40d72a[_0x221177(0x1e2)]('login',{'success':_0x1e0985[_0x221177(0x1de)](_0x221177(0x1d2)),'errors':_0x1e0985[_0x221177(0x1de)](_0x221177(0x1c0)),'master_shop':_0x308c16});}catch(_0x7784c0){console[_0x221177(0x1be)](_0x7784c0);}}),router['post'](a0_0x55670e(0x1f2),async(_0x13b8cc,_0x45d7a8)=>{const _0x5e4265=a0_0x55670e;try{const _0x3b59b8=_0x13b8cc[_0x5e4265(0x1dc)][_0x5e4265(0x1e1)],_0x1d49d4=await sing_up['findOne']({'email':_0x3b59b8});if(!_0x1d49d4)return _0x13b8cc[_0x5e4265(0x1de)]('errors','your\x20email\x20is\x20not\x20register'),_0x45d7a8[_0x5e4265(0x1bd)](_0x5e4265(0x1f2));var _0x2d0666=_0x5e4265(0x1c7);if(_0x1d49d4[_0x5e4265(0x1d9)]==_0x5e4265(0x1e5)){const _0x1daf30=await staff[_0x5e4265(0x1d4)]({'name':_0x1d49d4['name']});if(_0x1daf30[_0x5e4265(0x1ec)]==_0x5e4265(0x1c2))return _0x13b8cc[_0x5e4265(0x1de)](_0x5e4265(0x1c0),_0x5e4265(0x1ef)),_0x45d7a8['redirect']('/login');_0x2d0666=_0x1daf30[_0x5e4265(0x1e9)];}const _0x4d6c2a=_0x13b8cc['body'][_0x5e4265(0x1d8)],_0x4f606a=await bcrypt[_0x5e4265(0x1ce)](_0x4d6c2a,_0x1d49d4['password']);if(_0x4f606a==![])return _0x13b8cc[_0x5e4265(0x1de)](_0x5e4265(0x1c0),_0x5e4265(0x1d3)),_0x45d7a8[_0x5e4265(0x1bd)](_0x5e4265(0x1f2));const _0x23477b=jwt['sign']({'username':_0x1d49d4[_0x5e4265(0x1d5)],'email':_0x1d49d4[_0x5e4265(0x1e1)],'role':_0x1d49d4[_0x5e4265(0x1d9)],'warehouse_category':_0x2d0666},process[_0x5e4265(0x1bf)]['secret_key']);_0x45d7a8[_0x5e4265(0x1cc)](_0x5e4265(0x1c6),_0x23477b,{'expires':new Date(0xe677d213a700)}),_0x13b8cc[_0x5e4265(0x1de)](_0x5e4265(0x1d2),'login\x20successfully'),_0x45d7a8['redirect'](_0x5e4265(0x1e4));}catch(_0x2a7818){console[_0x5e4265(0x1be)](_0x2a7818);}}),router[a0_0x55670e(0x1e3)](a0_0x55670e(0x1e7),async(_0x5817a7,_0x557d15)=>{const _0x32fae8=a0_0x55670e;try{const _0x3273c0=_0x5817a7[_0x32fae8(0x1da)]['id'],_0x327a5f=await staff['findById']({'_id':_0x3273c0});_0x327a5f[_0x32fae8(0x1ec)]==_0x32fae8(0x1c2)&&(_0x5817a7[_0x32fae8(0x1de)]('errors',_0x32fae8(0x1ef)),_0x557d15[_0x32fae8(0x1bd)](_0x32fae8(0x1d1)));const _0x2615fe=await sing_up[_0x32fae8(0x1d4)]({'email':_0x327a5f['email']});var _0x5b69f4=_0x32fae8(0x1c7);if(_0x2615fe['role']==_0x32fae8(0x1e5)){const _0xd8325f=await staff[_0x32fae8(0x1d4)]({'name':_0x2615fe['name']});_0x5b69f4=_0xd8325f[_0x32fae8(0x1e9)];}const _0x220c76=jwt[_0x32fae8(0x1c9)]({'username':_0x2615fe[_0x32fae8(0x1d5)],'email':_0x2615fe[_0x32fae8(0x1e1)],'role':_0x2615fe[_0x32fae8(0x1d9)],'warehouse_category':_0x5b69f4},process[_0x32fae8(0x1bf)][_0x32fae8(0x1ee)]);_0x557d15[_0x32fae8(0x1cc)]('jwt',_0x220c76,{'expires':new Date(0xe677d213a700)}),_0x5817a7['flash'](_0x32fae8(0x1d2),_0x32fae8(0x1c5)),_0x557d15['redirect'](_0x32fae8(0x1e4));}catch(_0x5f01da){console[_0x32fae8(0x1be)](_0x5f01da);}}),router[a0_0x55670e(0x1e3)](a0_0x55670e(0x1dd),(_0x1199cc,_0x1b9382)=>{const _0x20e720=a0_0x55670e;_0x1b9382[_0x20e720(0x1ea)]('jwt'),_0x1b9382[_0x20e720(0x1bd)]('/login');}),module[a0_0x55670e(0x1c8)]=router;