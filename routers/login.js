const a0_0x4cf10d=a0_0x5141;(function(_0x62a163,_0x505159){const _0x42522a=a0_0x5141,_0x5ee461=_0x62a163();while(!![]){try{const _0x2e8a78=parseInt(_0x42522a(0x14f))/0x1+-parseInt(_0x42522a(0x143))/0x2*(parseInt(_0x42522a(0x158))/0x3)+-parseInt(_0x42522a(0x151))/0x4+parseInt(_0x42522a(0x147))/0x5*(parseInt(_0x42522a(0x140))/0x6)+parseInt(_0x42522a(0x13c))/0x7*(-parseInt(_0x42522a(0x168))/0x8)+-parseInt(_0x42522a(0x16b))/0x9+parseInt(_0x42522a(0x16a))/0xa*(parseInt(_0x42522a(0x141))/0xb);if(_0x2e8a78===_0x505159)break;else _0x5ee461['push'](_0x5ee461['shift']());}catch(_0x109f40){_0x5ee461['push'](_0x5ee461['shift']());}}}(a0_0x585b,0x276e0));function a0_0x5141(_0x139db6,_0xd28da0){const _0x585bdf=a0_0x585b();return a0_0x5141=function(_0x514131,_0x4e1f2e){_0x514131=_0x514131-0x137;let _0x2c953e=_0x585bdf[_0x514131];return _0x2c953e;},a0_0x5141(_0x139db6,_0xd28da0);}const express=require('express'),app=express(),router=express[a0_0x4cf10d(0x157)](),{sing_up,staff,profile,master_shop}=require(a0_0x4cf10d(0x14a)),bcrypt=require(a0_0x4cf10d(0x163)),jwt=require(a0_0x4cf10d(0x153)),auth=require(a0_0x4cf10d(0x142));function a0_0x585b(){const _0x15302f=['Disabled','warehouse_category','log','cookie','15368tJsvNc','flash','130HdMttt','1206783WoDnnW','/login','errors','env','login\x20master','name','21CGemJX','sign','success','status','6dDlrLa','36795wKysha','../middleware/auth','3662ZQoRCL','username','body','/logout','1601875gExlHO','findOne','login','../models/all_models','exports','/staff/:id','email','findById','272116FUilZw','clearCookie','422988HHoGKC','login\x20successfully','jsonwebtoken','find','role','/index','Router','375SgIzdC','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','your\x20password\x20is\x20wrong','validate','redirect','render','jwt','staff','your\x20email\x20is\x20not\x20register','get','secret_key','bcryptjs'];a0_0x585b=function(){return _0x15302f;};return a0_0x585b();}router[a0_0x4cf10d(0x161)]('/',async(_0x2cd633,_0x2e6b03)=>{const _0x4f5f2e=a0_0x4cf10d;try{const _0xf9acf0=await master_shop[_0x4f5f2e(0x154)]();_0x2e6b03[_0x4f5f2e(0x15d)](_0x4f5f2e(0x149),{'success':_0x2cd633[_0x4f5f2e(0x169)](_0x4f5f2e(0x13e)),'errors':_0x2cd633['flash'](_0x4f5f2e(0x138)),'master_shop':_0xf9acf0});}catch(_0x52bc44){console[_0x4f5f2e(0x166)](_0x52bc44);}}),router[a0_0x4cf10d(0x161)]('/validate',async(_0x215d77,_0x29c48e)=>{const _0x4b09cf=a0_0x4cf10d;try{const _0x1115b0=await master_shop['find']();_0x29c48e[_0x4b09cf(0x15d)](_0x4b09cf(0x15b),{'success':_0x215d77['flash'](_0x4b09cf(0x13e)),'errors':_0x215d77[_0x4b09cf(0x169)]('errors'),'master_shop':_0x1115b0});}catch(_0x133291){console[_0x4b09cf(0x166)](_0x133291);}}),router[a0_0x4cf10d(0x161)](a0_0x4cf10d(0x137),async(_0x424ddd,_0x2a3177)=>{const _0x31d869=a0_0x4cf10d;try{const _0x1c4d4a=await master_shop[_0x31d869(0x154)]();console['log'](_0x31d869(0x13a),_0x1c4d4a),_0x2a3177[_0x31d869(0x15d)](_0x31d869(0x149),{'success':_0x424ddd[_0x31d869(0x169)](_0x31d869(0x13e)),'errors':_0x424ddd[_0x31d869(0x169)](_0x31d869(0x138)),'master_shop':_0x1c4d4a});}catch(_0x19d0a8){console['log'](_0x19d0a8);}}),router['post'](a0_0x4cf10d(0x137),async(_0x1578a5,_0x4d120b)=>{const _0x2c81c7=a0_0x4cf10d;try{const _0x14906d=_0x1578a5[_0x2c81c7(0x145)][_0x2c81c7(0x14d)],_0x214e3f=await sing_up[_0x2c81c7(0x148)]({'email':_0x14906d});if(!_0x214e3f)return _0x1578a5['flash'](_0x2c81c7(0x138),_0x2c81c7(0x160)),_0x4d120b['redirect']('/login');const _0x10f479=await staff['findOne']({'email':_0x214e3f['email']});var _0x5d433e=_0x10f479[_0x2c81c7(0x165)];if(_0x214e3f[_0x2c81c7(0x155)]==_0x2c81c7(0x15f)){const _0x2a1c6d=await staff[_0x2c81c7(0x148)]({'email':_0x214e3f[_0x2c81c7(0x14d)]});if(_0x2a1c6d[_0x2c81c7(0x13f)]==_0x2c81c7(0x164))return _0x1578a5['flash'](_0x2c81c7(0x138),_0x2c81c7(0x159)),_0x4d120b['redirect']('/login');_0x5d433e=_0x2a1c6d['warehouse_category'];}const _0x5e1594=_0x1578a5['body']['password'],_0x2a281e=await bcrypt['compare'](_0x5e1594,_0x214e3f['password']);if(_0x2a281e==![])return _0x1578a5['flash'](_0x2c81c7(0x138),_0x2c81c7(0x15a)),_0x4d120b[_0x2c81c7(0x15c)]('/login');const _0x495543=jwt[_0x2c81c7(0x13d)]({'username':_0x214e3f['username'],'email':_0x214e3f[_0x2c81c7(0x14d)],'role':_0x214e3f[_0x2c81c7(0x155)],'warehouse_category':_0x5d433e},process[_0x2c81c7(0x139)][_0x2c81c7(0x162)]);_0x4d120b['cookie'](_0x2c81c7(0x15e),_0x495543,{'expires':new Date(0xe677d213a700)}),_0x1578a5[_0x2c81c7(0x169)](_0x2c81c7(0x13e),_0x2c81c7(0x152)),_0x4d120b[_0x2c81c7(0x15c)](_0x2c81c7(0x156));}catch(_0x1a4548){console[_0x2c81c7(0x166)](_0x1a4548);}}),router[a0_0x4cf10d(0x161)](a0_0x4cf10d(0x14c),async(_0x25ea70,_0x861294)=>{const _0x150187=a0_0x4cf10d;try{const _0x115adc=_0x25ea70['params']['id'],_0x3bf4b5=await staff[_0x150187(0x14e)]({'_id':_0x115adc});_0x3bf4b5[_0x150187(0x13f)]=='Disabled'&&(_0x25ea70[_0x150187(0x169)](_0x150187(0x138),_0x150187(0x159)),_0x861294['redirect']('/staff/view'));const _0x579a07=await sing_up['findOne']({'email':_0x3bf4b5['email']});var _0x2da1f2=_0x3bf4b5[_0x150187(0x165)];if(_0x579a07[_0x150187(0x155)]==_0x150187(0x15f)){const _0xe9c33b=await staff[_0x150187(0x148)]({'name':_0x579a07[_0x150187(0x13b)]});_0x2da1f2=_0xe9c33b['warehouse_category'];}const _0x318e24=jwt[_0x150187(0x13d)]({'username':_0x579a07[_0x150187(0x144)],'email':_0x579a07[_0x150187(0x14d)],'role':_0x579a07[_0x150187(0x155)],'warehouse_category':_0x2da1f2},process[_0x150187(0x139)][_0x150187(0x162)]);_0x861294[_0x150187(0x167)](_0x150187(0x15e),_0x318e24,{'expires':new Date(0xe677d213a700)}),_0x25ea70[_0x150187(0x169)](_0x150187(0x13e),_0x150187(0x152)),_0x861294[_0x150187(0x15c)](_0x150187(0x156));}catch(_0x406578){console['log'](_0x406578);}}),router[a0_0x4cf10d(0x161)](a0_0x4cf10d(0x146),(_0x3c7deb,_0x5e0445)=>{const _0x2eb3d7=a0_0x4cf10d;_0x5e0445[_0x2eb3d7(0x150)](_0x2eb3d7(0x15e)),_0x5e0445[_0x2eb3d7(0x15c)]('/login');}),module[a0_0x4cf10d(0x14b)]=router;