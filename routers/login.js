const a0_0x243975=a0_0xf5c2;(function(_0x37020f,_0x3cff3b){const _0x10f695=a0_0xf5c2,_0x504f5d=_0x37020f();while(!![]){try{const _0x1eac0d=-parseInt(_0x10f695(0x1ba))/0x1+parseInt(_0x10f695(0x1c8))/0x2*(-parseInt(_0x10f695(0x1c3))/0x3)+parseInt(_0x10f695(0x1bb))/0x4+parseInt(_0x10f695(0x1ac))/0x5+parseInt(_0x10f695(0x1bc))/0x6+parseInt(_0x10f695(0x1c6))/0x7+parseInt(_0x10f695(0x1af))/0x8*(parseInt(_0x10f695(0x1c2))/0x9);if(_0x1eac0d===_0x3cff3b)break;else _0x504f5d['push'](_0x504f5d['shift']());}catch(_0x5c3305){_0x504f5d['push'](_0x504f5d['shift']());}}}(a0_0x3af8,0x204c0));function a0_0x3af8(){const _0x14ea74=['email','jwt','2960lVUTII','/login','env','login\x20successfully','staff','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','bcryptjs','flash','findOne','username','Router','237313mfJTnt','739128mcIWcy','418716SZJScT','password','status','compare','../models/all_models','body','4887TtUHxp','537CAnMHI','your\x20password\x20is\x20wrong','secret_key','174846ySXUXa','render','2066MTQmDP','/validate','express','validate','cookie','Disabled','errors','find','All','name','role','redirect','findById','clearCookie','get','/index','success','warehouse_category','sign','exports','login\x20master','log','370260TwOSBz'];a0_0x3af8=function(){return _0x14ea74;};return a0_0x3af8();}function a0_0xf5c2(_0x29bac7,_0x4d89ed){const _0x3af8d5=a0_0x3af8();return a0_0xf5c2=function(_0xf5c233,_0x321fda){_0xf5c233=_0xf5c233-0x19b;let _0x224dd7=_0x3af8d5[_0xf5c233];return _0x224dd7;},a0_0xf5c2(_0x29bac7,_0x4d89ed);}const express=require(a0_0x243975(0x1ca)),app=express(),router=express[a0_0x243975(0x1b9)](),{sing_up,staff,profile,master_shop}=require(a0_0x243975(0x1c0)),bcrypt=require(a0_0x243975(0x1b5)),jwt=require('jsonwebtoken'),auth=require('../middleware/auth');router[a0_0x243975(0x1a4)]('/',async(_0x5b5454,_0x43119e)=>{const _0x43cd09=a0_0x243975;try{const _0x524008=await master_shop[_0x43cd09(0x19d)]();_0x43119e[_0x43cd09(0x1c7)]('login',{'success':_0x5b5454[_0x43cd09(0x1b6)](_0x43cd09(0x1a6)),'errors':_0x5b5454[_0x43cd09(0x1b6)](_0x43cd09(0x19c)),'master_shop':_0x524008});}catch(_0x426a77){console[_0x43cd09(0x1ab)](_0x426a77);}}),router['get'](a0_0x243975(0x1c9),async(_0x1e9a1e,_0x39ba71)=>{const _0x23e7f2=a0_0x243975;try{const _0x487413=await master_shop['find']();_0x39ba71[_0x23e7f2(0x1c7)](_0x23e7f2(0x1cb),{'success':_0x1e9a1e[_0x23e7f2(0x1b6)](_0x23e7f2(0x1a6)),'errors':_0x1e9a1e[_0x23e7f2(0x1b6)](_0x23e7f2(0x19c)),'master_shop':_0x487413});}catch(_0x3ab17d){console['log'](_0x3ab17d);}}),router[a0_0x243975(0x1a4)]('/login',async(_0x47e7e5,_0x210c6c)=>{const _0x1b9ff8=a0_0x243975;try{const _0x33fcfd=await master_shop[_0x1b9ff8(0x19d)]();console[_0x1b9ff8(0x1ab)](_0x1b9ff8(0x1aa),_0x33fcfd),_0x210c6c[_0x1b9ff8(0x1c7)]('login',{'success':_0x47e7e5['flash'](_0x1b9ff8(0x1a6)),'errors':_0x47e7e5[_0x1b9ff8(0x1b6)](_0x1b9ff8(0x19c)),'master_shop':_0x33fcfd});}catch(_0x44fe18){console[_0x1b9ff8(0x1ab)](_0x44fe18);}}),router['post'](a0_0x243975(0x1b0),async(_0x4c562d,_0x16460b)=>{const _0x4f2a96=a0_0x243975;try{const _0x1723d9=_0x4c562d[_0x4f2a96(0x1c1)][_0x4f2a96(0x1ad)],_0x1f0b8a=await sing_up[_0x4f2a96(0x1b7)]({'email':_0x1723d9});if(!_0x1f0b8a)return _0x4c562d['flash'](_0x4f2a96(0x19c),'your\x20email\x20is\x20not\x20register'),_0x16460b[_0x4f2a96(0x1a1)]('/login');var _0x9d8862='All';if(_0x1f0b8a[_0x4f2a96(0x1a0)]=='staff'){const _0x2b41e2=await staff[_0x4f2a96(0x1b7)]({'name':_0x1f0b8a['name']});if(_0x2b41e2[_0x4f2a96(0x1be)]==_0x4f2a96(0x19b))return _0x4c562d['flash'](_0x4f2a96(0x19c),_0x4f2a96(0x1b4)),_0x16460b[_0x4f2a96(0x1a1)](_0x4f2a96(0x1b0));_0x9d8862=_0x2b41e2[_0x4f2a96(0x1a7)];}const _0x70d8e9=_0x4c562d[_0x4f2a96(0x1c1)][_0x4f2a96(0x1bd)],_0xbadd31=await bcrypt[_0x4f2a96(0x1bf)](_0x70d8e9,_0x1f0b8a[_0x4f2a96(0x1bd)]);if(_0xbadd31==![])return _0x4c562d[_0x4f2a96(0x1b6)](_0x4f2a96(0x19c),_0x4f2a96(0x1c4)),_0x16460b['redirect'](_0x4f2a96(0x1b0));const _0xee391f=jwt[_0x4f2a96(0x1a8)]({'username':_0x1f0b8a[_0x4f2a96(0x1b8)],'email':_0x1f0b8a[_0x4f2a96(0x1ad)],'role':_0x1f0b8a['role'],'warehouse_category':_0x9d8862},process['env']['secret_key']);_0x16460b[_0x4f2a96(0x1cc)](_0x4f2a96(0x1ae),_0xee391f,{'expires':new Date(0xe677d213a700)}),_0x4c562d[_0x4f2a96(0x1b6)](_0x4f2a96(0x1a6),_0x4f2a96(0x1b2)),_0x16460b[_0x4f2a96(0x1a1)](_0x4f2a96(0x1a5));}catch(_0x439c23){console[_0x4f2a96(0x1ab)](_0x439c23);}}),router[a0_0x243975(0x1a4)]('/staff/:id',async(_0x2b91c4,_0x377f02)=>{const _0x1b20dd=a0_0x243975;try{const _0x5b19d1=_0x2b91c4['params']['id'],_0xf42e54=await staff[_0x1b20dd(0x1a2)]({'_id':_0x5b19d1});_0xf42e54[_0x1b20dd(0x1be)]==_0x1b20dd(0x19b)&&(_0x2b91c4[_0x1b20dd(0x1b6)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x377f02['redirect']('/staff/view'));const _0x4675ef=await sing_up[_0x1b20dd(0x1b7)]({'email':_0xf42e54[_0x1b20dd(0x1ad)]});var _0x46ebac=_0x1b20dd(0x19e);if(_0x4675ef[_0x1b20dd(0x1a0)]==_0x1b20dd(0x1b3)){const _0x5c77d5=await staff[_0x1b20dd(0x1b7)]({'name':_0x4675ef[_0x1b20dd(0x19f)]});_0x46ebac=_0x5c77d5['warehouse_category'];}const _0x424cd6=jwt[_0x1b20dd(0x1a8)]({'username':_0x4675ef[_0x1b20dd(0x1b8)],'email':_0x4675ef['email'],'role':_0x4675ef[_0x1b20dd(0x1a0)],'warehouse_category':_0x46ebac},process[_0x1b20dd(0x1b1)][_0x1b20dd(0x1c5)]);_0x377f02['cookie'](_0x1b20dd(0x1ae),_0x424cd6,{'expires':new Date(0xe677d213a700)}),_0x2b91c4['flash'](_0x1b20dd(0x1a6),'login\x20successfully'),_0x377f02[_0x1b20dd(0x1a1)](_0x1b20dd(0x1a5));}catch(_0x425909){console[_0x1b20dd(0x1ab)](_0x425909);}}),router[a0_0x243975(0x1a4)]('/logout',(_0xef3b94,_0x3d290e)=>{const _0x4c8ca8=a0_0x243975;_0x3d290e[_0x4c8ca8(0x1a3)](_0x4c8ca8(0x1ae)),_0x3d290e[_0x4c8ca8(0x1a1)](_0x4c8ca8(0x1b0));}),module[a0_0x243975(0x1a9)]=router;