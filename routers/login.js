function a0_0x4ba7(){const _0x4fef5e=['params','14517870uttGRC','findById','validate','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','log','848avTBtu','348qcPzzC','success','redirect','jsonwebtoken','password','2fhkLZp','render','secret_key','express','/index','../middleware/auth','9MgXhyA','flash','1428333VGJWBJ','sign','../models/all_models','find','name','/staff/:id','35010XYSliS','1247444dosUaj','1505TQwdXk','login\x20master','Router','/validate','findOne','status','jwt','login\x20successfully','/login','14048368MYKcSs','warehouse_category','/logout','username','email','role','errors','login','730FkgkPf','1020261ySkelP','cookie','body','compare','staff','env','get','bcryptjs'];a0_0x4ba7=function(){return _0x4fef5e;};return a0_0x4ba7();}function a0_0x5301(_0x4395c7,_0x5f1b00){const _0x4ba7dd=a0_0x4ba7();return a0_0x5301=function(_0x5301be,_0x346c64){_0x5301be=_0x5301be-0x75;let _0x4daa0a=_0x4ba7dd[_0x5301be];return _0x4daa0a;},a0_0x5301(_0x4395c7,_0x5f1b00);}const a0_0x2ceb79=a0_0x5301;(function(_0x13eb5f,_0x46a2a8){const _0x4b309f=a0_0x5301,_0xd72cd6=_0x13eb5f();while(!![]){try{const _0x5d6e61=-parseInt(_0x4b309f(0x84))/0x1+parseInt(_0x4b309f(0x75))/0x2*(parseInt(_0x4b309f(0x7d))/0x3)+parseInt(_0x4b309f(0xa5))/0x4*(parseInt(_0x4b309f(0x96))/0x5)+-parseInt(_0x4b309f(0x83))/0x6*(parseInt(_0x4b309f(0x85))/0x7)+parseInt(_0x4b309f(0x8e))/0x8+parseInt(_0x4b309f(0x7b))/0x9*(-parseInt(_0x4b309f(0xa0))/0xa)+-parseInt(_0x4b309f(0x97))/0xb*(-parseInt(_0x4b309f(0xa6))/0xc);if(_0x5d6e61===_0x46a2a8)break;else _0xd72cd6['push'](_0xd72cd6['shift']());}catch(_0x189620){_0xd72cd6['push'](_0xd72cd6['shift']());}}}(a0_0x4ba7,0xf3edc));const express=require(a0_0x2ceb79(0x78)),app=express(),router=express[a0_0x2ceb79(0x87)](),{sing_up,staff,profile,master_shop}=require(a0_0x2ceb79(0x7f)),bcrypt=require(a0_0x2ceb79(0x9e)),jwt=require(a0_0x2ceb79(0xa9)),auth=require(a0_0x2ceb79(0x7a));router[a0_0x2ceb79(0x9d)]('/',async(_0x159ec7,_0x90cb43)=>{const _0x36b44e=a0_0x2ceb79;try{const _0x1fb70d=await master_shop[_0x36b44e(0x80)]();_0x90cb43[_0x36b44e(0x76)](_0x36b44e(0x95),{'success':_0x159ec7[_0x36b44e(0x7c)](_0x36b44e(0xa7)),'errors':_0x159ec7[_0x36b44e(0x7c)](_0x36b44e(0x94)),'master_shop':_0x1fb70d});}catch(_0x2d68f5){console[_0x36b44e(0xa4)](_0x2d68f5);}}),router[a0_0x2ceb79(0x9d)](a0_0x2ceb79(0x88),async(_0x121f7d,_0x36c774)=>{const _0x50b720=a0_0x2ceb79;try{const _0x1835fb=await master_shop[_0x50b720(0x80)]();_0x36c774[_0x50b720(0x76)](_0x50b720(0xa2),{'success':_0x121f7d['flash'](_0x50b720(0xa7)),'errors':_0x121f7d['flash'](_0x50b720(0x94)),'master_shop':_0x1835fb});}catch(_0x163f2c){console[_0x50b720(0xa4)](_0x163f2c);}}),router[a0_0x2ceb79(0x9d)]('/login',async(_0x36ba02,_0x5be523)=>{const _0xa31ca4=a0_0x2ceb79;try{const _0x396690=await master_shop[_0xa31ca4(0x80)]();console[_0xa31ca4(0xa4)](_0xa31ca4(0x86),_0x396690),_0x5be523['render'](_0xa31ca4(0x95),{'success':_0x36ba02[_0xa31ca4(0x7c)](_0xa31ca4(0xa7)),'errors':_0x36ba02['flash'](_0xa31ca4(0x94)),'master_shop':_0x396690});}catch(_0x533e5e){console[_0xa31ca4(0xa4)](_0x533e5e);}}),router['post'](a0_0x2ceb79(0x8d),async(_0x59f9aa,_0x50d129)=>{const _0x228395=a0_0x2ceb79;try{const _0x540d1a=_0x59f9aa[_0x228395(0x99)][_0x228395(0x92)],_0x24ca2c=await sing_up[_0x228395(0x89)]({'email':_0x540d1a});if(!_0x24ca2c)return _0x59f9aa[_0x228395(0x7c)](_0x228395(0x94),'your\x20email\x20is\x20not\x20register'),_0x50d129[_0x228395(0xa8)]('/login');const _0x2b92c8=await staff[_0x228395(0x89)]({'email':_0x24ca2c[_0x228395(0x92)]});var _0x19a3be=_0x2b92c8[_0x228395(0x8f)];if(_0x24ca2c[_0x228395(0x93)]==_0x228395(0x9b)){const _0x248d74=await staff[_0x228395(0x89)]({'email':_0x24ca2c['email']});if(_0x248d74['status']=='Disabled')return _0x59f9aa[_0x228395(0x7c)](_0x228395(0x94),_0x228395(0xa3)),_0x50d129[_0x228395(0xa8)]('/login');_0x19a3be=_0x248d74[_0x228395(0x8f)];}const _0x2ac1ae=_0x59f9aa[_0x228395(0x99)][_0x228395(0xaa)],_0x12bbd0=await bcrypt[_0x228395(0x9a)](_0x2ac1ae,_0x24ca2c['password']);if(_0x12bbd0==![])return _0x59f9aa['flash'](_0x228395(0x94),'your\x20password\x20is\x20wrong'),_0x50d129[_0x228395(0xa8)](_0x228395(0x8d));const _0x1175bf=jwt['sign']({'username':_0x24ca2c[_0x228395(0x91)],'email':_0x24ca2c[_0x228395(0x92)],'role':_0x24ca2c[_0x228395(0x93)],'warehouse_category':_0x19a3be},process['env'][_0x228395(0x77)]);_0x50d129[_0x228395(0x98)]('jwt',_0x1175bf,{'expires':new Date(0xe677d213a700)}),_0x59f9aa[_0x228395(0x7c)](_0x228395(0xa7),_0x228395(0x8c)),_0x50d129[_0x228395(0xa8)](_0x228395(0x79));}catch(_0xab10d0){console['log'](_0xab10d0);}}),router['get'](a0_0x2ceb79(0x82),async(_0x7f66f0,_0x38eb2a)=>{const _0x23a212=a0_0x2ceb79;try{const _0x1eb2a3=_0x7f66f0[_0x23a212(0x9f)]['id'],_0x411b77=await staff[_0x23a212(0xa1)]({'_id':_0x1eb2a3});_0x411b77[_0x23a212(0x8a)]=='Disabled'&&(_0x7f66f0['flash'](_0x23a212(0x94),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x38eb2a[_0x23a212(0xa8)]('/staff/view'));const _0x387956=await sing_up[_0x23a212(0x89)]({'email':_0x411b77[_0x23a212(0x92)]});var _0x48058e=_0x411b77[_0x23a212(0x8f)];if(_0x387956['role']==_0x23a212(0x9b)){const _0x516daf=await staff[_0x23a212(0x89)]({'name':_0x387956[_0x23a212(0x81)]});_0x48058e=_0x516daf['warehouse_category'];}const _0x1cbe5=jwt[_0x23a212(0x7e)]({'username':_0x387956['username'],'email':_0x387956[_0x23a212(0x92)],'role':_0x387956['role'],'warehouse_category':_0x48058e},process[_0x23a212(0x9c)][_0x23a212(0x77)]);_0x38eb2a[_0x23a212(0x98)](_0x23a212(0x8b),_0x1cbe5,{'expires':new Date(0xe677d213a700)}),_0x7f66f0[_0x23a212(0x7c)](_0x23a212(0xa7),_0x23a212(0x8c)),_0x38eb2a['redirect'](_0x23a212(0x79));}catch(_0x451f3c){console[_0x23a212(0xa4)](_0x451f3c);}}),router[a0_0x2ceb79(0x9d)](a0_0x2ceb79(0x90),(_0x27fc6b,_0xf4e04a)=>{const _0x3d1a0f=a0_0x2ceb79;_0xf4e04a['clearCookie'](_0x3d1a0f(0x8b)),_0xf4e04a['redirect'](_0x3d1a0f(0x8d));}),module['exports']=router;