function a0_0x4ea5(_0x4302d8,_0x50d5ad){const _0x264b79=a0_0x264b();return a0_0x4ea5=function(_0x4ea533,_0x316bf1){_0x4ea533=_0x4ea533-0x91;let _0x4dc90b=_0x264b79[_0x4ea533];return _0x4dc90b;},a0_0x4ea5(_0x4302d8,_0x50d5ad);}const a0_0x37dc9a=a0_0x4ea5;(function(_0x4b6dcc,_0x22cc87){const _0x43f0db=a0_0x4ea5,_0x410fc5=_0x4b6dcc();while(!![]){try{const _0x3512ad=parseInt(_0x43f0db(0x93))/0x1+parseInt(_0x43f0db(0x99))/0x2*(parseInt(_0x43f0db(0x94))/0x3)+parseInt(_0x43f0db(0xc2))/0x4*(parseInt(_0x43f0db(0xb5))/0x5)+-parseInt(_0x43f0db(0xa7))/0x6+-parseInt(_0x43f0db(0xad))/0x7*(-parseInt(_0x43f0db(0xb1))/0x8)+-parseInt(_0x43f0db(0xaf))/0x9*(parseInt(_0x43f0db(0xc3))/0xa)+-parseInt(_0x43f0db(0xc4))/0xb*(parseInt(_0x43f0db(0xc0))/0xc);if(_0x3512ad===_0x22cc87)break;else _0x410fc5['push'](_0x410fc5['shift']());}catch(_0x130401){_0x410fc5['push'](_0x410fc5['shift']());}}}(a0_0x264b,0xbf6cb));function a0_0x264b(){const _0x41f410=['9364xYiOyu','310FafRok','12419cvnqta','validate','flash','774901fUoHEp','6vdXCPX','success','warehouse_category','email','findById','1049338bJCrDx','your\x20password\x20is\x20wrong','body','findOne','password','express','name','params','/index','secret_key','login\x20successfully','sign','jwt','/logout','2717106KhTerC','/validate','find','Disabled','username','exports','21oYeJUy','render','99486BHDNyg','/staff/:id','4031048ztZglA','cookie','../models/all_models','errors','2135uIlptV','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','log','get','/staff/view','/login','status','bcryptjs','your\x20email\x20is\x20not\x20register','env','redirect','29292eILfJS','role'];a0_0x264b=function(){return _0x41f410;};return a0_0x264b();}const express=require(a0_0x37dc9a(0x9e)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x37dc9a(0xb3)),bcrypt=require(a0_0x37dc9a(0xbc)),jwt=require('jsonwebtoken'),auth=require('../middleware/auth');router[a0_0x37dc9a(0xb8)]('/',async(_0x2c437d,_0x446368)=>{const _0x171dc3=a0_0x37dc9a;try{const _0x21308f=await master_shop['find']();_0x446368[_0x171dc3(0xae)]('login',{'success':_0x2c437d[_0x171dc3(0x92)](_0x171dc3(0x95)),'errors':_0x2c437d['flash'](_0x171dc3(0xb4)),'master_shop':_0x21308f});}catch(_0x5ede0a){console[_0x171dc3(0xb7)](_0x5ede0a);}}),router[a0_0x37dc9a(0xb8)](a0_0x37dc9a(0xa8),async(_0x233a89,_0x241887)=>{const _0x45ca72=a0_0x37dc9a;try{const _0x19188a=await master_shop[_0x45ca72(0xa9)]();_0x241887[_0x45ca72(0xae)](_0x45ca72(0x91),{'success':_0x233a89[_0x45ca72(0x92)](_0x45ca72(0x95)),'errors':_0x233a89[_0x45ca72(0x92)](_0x45ca72(0xb4)),'master_shop':_0x19188a});}catch(_0x448b48){console[_0x45ca72(0xb7)](_0x448b48);}}),router[a0_0x37dc9a(0xb8)](a0_0x37dc9a(0xba),async(_0xba02f9,_0x12781c)=>{const _0x995d4e=a0_0x37dc9a;try{const _0x21e803=await master_shop[_0x995d4e(0xa9)]();console[_0x995d4e(0xb7)]('login\x20master',_0x21e803),_0x12781c[_0x995d4e(0xae)]('login',{'success':_0xba02f9['flash'](_0x995d4e(0x95)),'errors':_0xba02f9['flash'](_0x995d4e(0xb4)),'master_shop':_0x21e803});}catch(_0x3d78a6){console[_0x995d4e(0xb7)](_0x3d78a6);}}),router['post']('/login',async(_0x126ab9,_0x32c342)=>{const _0x223ae0=a0_0x37dc9a;try{const _0x3be55a=_0x126ab9[_0x223ae0(0x9b)][_0x223ae0(0x97)],_0xea8f61=await sing_up[_0x223ae0(0x9c)]({'email':_0x3be55a});if(!_0xea8f61)return _0x126ab9[_0x223ae0(0x92)](_0x223ae0(0xb4),_0x223ae0(0xbd)),_0x32c342[_0x223ae0(0xbf)](_0x223ae0(0xba));const _0x2bcedf=await staff[_0x223ae0(0x9c)]({'email':_0xea8f61[_0x223ae0(0x97)]});var _0x2e6b24=_0x2bcedf[_0x223ae0(0x96)];if(_0xea8f61['role']=='staff'){const _0x7be25a=await staff[_0x223ae0(0x9c)]({'email':_0xea8f61[_0x223ae0(0x97)]});if(_0x7be25a[_0x223ae0(0xbb)]==_0x223ae0(0xaa))return _0x126ab9['flash']('errors',_0x223ae0(0xb6)),_0x32c342[_0x223ae0(0xbf)]('/login');_0x2e6b24=_0x7be25a['warehouse_category'];}const _0x309dc9=_0x126ab9[_0x223ae0(0x9b)][_0x223ae0(0x9d)],_0x323d51=await bcrypt['compare'](_0x309dc9,_0xea8f61[_0x223ae0(0x9d)]);if(_0x323d51==![])return _0x126ab9['flash'](_0x223ae0(0xb4),_0x223ae0(0x9a)),_0x32c342[_0x223ae0(0xbf)](_0x223ae0(0xba));const _0x42c079=jwt['sign']({'username':_0xea8f61['username'],'email':_0xea8f61[_0x223ae0(0x97)],'role':_0xea8f61[_0x223ae0(0xc1)],'warehouse_category':_0x2e6b24},process[_0x223ae0(0xbe)][_0x223ae0(0xa2)]);_0x32c342[_0x223ae0(0xb2)]('jwt',_0x42c079,{'expires':new Date(0xe677d213a700)}),_0x126ab9[_0x223ae0(0x92)](_0x223ae0(0x95),_0x223ae0(0xa3)),_0x32c342[_0x223ae0(0xbf)](_0x223ae0(0xa1));}catch(_0x44f61c){console[_0x223ae0(0xb7)](_0x44f61c);}}),router[a0_0x37dc9a(0xb8)](a0_0x37dc9a(0xb0),async(_0x4d09aa,_0x3918d7)=>{const _0x14de70=a0_0x37dc9a;try{const _0x1248e2=_0x4d09aa[_0x14de70(0xa0)]['id'],_0x19c2ed=await staff[_0x14de70(0x98)]({'_id':_0x1248e2});_0x19c2ed['status']=='Disabled'&&(_0x4d09aa[_0x14de70(0x92)](_0x14de70(0xb4),_0x14de70(0xb6)),_0x3918d7[_0x14de70(0xbf)](_0x14de70(0xb9)));const _0x44b4aa=await sing_up['findOne']({'email':_0x19c2ed[_0x14de70(0x97)]});var _0x41181b=_0x19c2ed[_0x14de70(0x96)];if(_0x44b4aa[_0x14de70(0xc1)]=='staff'){const _0x5826e0=await staff[_0x14de70(0x9c)]({'name':_0x44b4aa[_0x14de70(0x9f)]});_0x41181b=_0x5826e0[_0x14de70(0x96)];}const _0x1f4c56=jwt[_0x14de70(0xa4)]({'username':_0x44b4aa[_0x14de70(0xab)],'email':_0x44b4aa[_0x14de70(0x97)],'role':_0x44b4aa['role'],'warehouse_category':_0x41181b},process[_0x14de70(0xbe)]['secret_key']);_0x3918d7[_0x14de70(0xb2)](_0x14de70(0xa5),_0x1f4c56,{'expires':new Date(0xe677d213a700)}),_0x4d09aa[_0x14de70(0x92)](_0x14de70(0x95),_0x14de70(0xa3)),_0x3918d7[_0x14de70(0xbf)]('/index');}catch(_0x140e5d){console['log'](_0x140e5d);}}),router[a0_0x37dc9a(0xb8)](a0_0x37dc9a(0xa6),(_0x4b16a9,_0xb101cf)=>{const _0x3a3bd3=a0_0x37dc9a;_0xb101cf['clearCookie'](_0x3a3bd3(0xa5)),_0xb101cf[_0x3a3bd3(0xbf)](_0x3a3bd3(0xba));}),module[a0_0x37dc9a(0xac)]=router;