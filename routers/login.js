const a0_0x3fcab3=a0_0x46d2;function a0_0x21f9(){const _0x22865f=['success','log','login\x20successfully','your\x20password\x20is\x20wrong','Disabled','/logout','jsonwebtoken','role','/staff/view','compare','staff','flash','/index','username','express','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','secret_key','15ckziSK','redirect','find','2222RjLjkf','password','1329996LVNRMz','warehouse_category','body','836368tuHvFB','sign','1214122bwJNrS','errors','jwt','../middleware/auth','login','162987KuVvmZ','env','clearCookie','render','name','/staff/:id','18520XEzNas','email','All','findById','bcryptjs','5LaQXrl','78178uzWLAV','post','13BkMBTq','params','/login','Router','get','/validate','findOne','4892304UVaGYX','../models/all_models','cookie','6BBDUNH','54TyHils','status','exports','your\x20email\x20is\x20not\x20register'];a0_0x21f9=function(){return _0x22865f;};return a0_0x21f9();}(function(_0x33e2bf,_0xe84be5){const _0x20daae=a0_0x46d2,_0x44e65e=_0x33e2bf();while(!![]){try{const _0xd7c36c=-parseInt(_0x20daae(0x8d))/0x1*(-parseInt(_0x20daae(0xa8))/0x2)+parseInt(_0x20daae(0x9c))/0x3+parseInt(_0x20daae(0x92))/0x4*(-parseInt(_0x20daae(0xa7))/0x5)+-parseInt(_0x20daae(0xb4))/0x6*(-parseInt(_0x20daae(0x97))/0x7)+-parseInt(_0x20daae(0x95))/0x8*(-parseInt(_0x20daae(0xb5))/0x9)+-parseInt(_0x20daae(0xa2))/0xa*(parseInt(_0x20daae(0x90))/0xb)+-parseInt(_0x20daae(0xb1))/0xc*(parseInt(_0x20daae(0xaa))/0xd);if(_0xd7c36c===_0xe84be5)break;else _0x44e65e['push'](_0x44e65e['shift']());}catch(_0x1c8fb6){_0x44e65e['push'](_0x44e65e['shift']());}}}(a0_0x21f9,0x4fdb3));const express=require(a0_0x3fcab3(0x8a)),app=express(),router=express[a0_0x3fcab3(0xad)](),{sing_up,staff,profile,master_shop}=require(a0_0x3fcab3(0xb2)),bcrypt=require(a0_0x3fcab3(0xa6)),jwt=require(a0_0x3fcab3(0xbf)),auth=require(a0_0x3fcab3(0x9a));function a0_0x46d2(_0x210e01,_0x575d64){const _0x21f95f=a0_0x21f9();return a0_0x46d2=function(_0x46d23f,_0x34d1be){_0x46d23f=_0x46d23f-0x89;let _0x53a84e=_0x21f95f[_0x46d23f];return _0x53a84e;},a0_0x46d2(_0x210e01,_0x575d64);}router['get']('/',async(_0x216468,_0x4e33c7)=>{const _0x269bec=a0_0x3fcab3;try{const _0x255983=await master_shop[_0x269bec(0x8f)]();_0x4e33c7[_0x269bec(0x9f)](_0x269bec(0x9b),{'success':_0x216468[_0x269bec(0xc4)](_0x269bec(0xb9)),'errors':_0x216468[_0x269bec(0xc4)]('errors'),'master_shop':_0x255983});}catch(_0x4f5996){console[_0x269bec(0xba)](_0x4f5996);}}),router['get'](a0_0x3fcab3(0xaf),async(_0x4dbd49,_0x1e4fa7)=>{const _0xfd98fb=a0_0x3fcab3;try{const _0x45b5da=await master_shop[_0xfd98fb(0x8f)]();_0x1e4fa7[_0xfd98fb(0x9f)]('validate',{'success':_0x4dbd49['flash'](_0xfd98fb(0xb9)),'errors':_0x4dbd49['flash'](_0xfd98fb(0x98)),'master_shop':_0x45b5da});}catch(_0x20cca8){console[_0xfd98fb(0xba)](_0x20cca8);}}),router[a0_0x3fcab3(0xae)]('/login',async(_0x3cc99c,_0x27d1b6)=>{const _0x1f458a=a0_0x3fcab3;try{const _0x4db703=await master_shop[_0x1f458a(0x8f)]();console[_0x1f458a(0xba)]('login\x20master',_0x4db703),_0x27d1b6[_0x1f458a(0x9f)](_0x1f458a(0x9b),{'success':_0x3cc99c[_0x1f458a(0xc4)](_0x1f458a(0xb9)),'errors':_0x3cc99c[_0x1f458a(0xc4)](_0x1f458a(0x98)),'master_shop':_0x4db703});}catch(_0x50d5d6){console[_0x1f458a(0xba)](_0x50d5d6);}}),router[a0_0x3fcab3(0xa9)]('/login',async(_0x21dc6b,_0x118038)=>{const _0x225eb3=a0_0x3fcab3;try{const _0xf8bafe=_0x21dc6b[_0x225eb3(0x94)][_0x225eb3(0xa3)],_0x2435ad=await sing_up['findOne']({'email':_0xf8bafe});if(!_0x2435ad)return _0x21dc6b[_0x225eb3(0xc4)](_0x225eb3(0x98),_0x225eb3(0xb8)),_0x118038['redirect']('/login');var _0x2f0fd0=_0x225eb3(0xa4);if(_0x2435ad[_0x225eb3(0xc0)]=='staff'){const _0x1e52f1=await staff['findOne']({'name':_0x2435ad[_0x225eb3(0xa0)]});if(_0x1e52f1[_0x225eb3(0xb6)]==_0x225eb3(0xbd))return _0x21dc6b[_0x225eb3(0xc4)](_0x225eb3(0x98),_0x225eb3(0x8b)),_0x118038['redirect'](_0x225eb3(0xac));_0x2f0fd0=_0x1e52f1[_0x225eb3(0x93)];}const _0x531321=_0x21dc6b['body'][_0x225eb3(0x91)],_0x227039=await bcrypt[_0x225eb3(0xc2)](_0x531321,_0x2435ad[_0x225eb3(0x91)]);if(_0x227039==![])return _0x21dc6b[_0x225eb3(0xc4)](_0x225eb3(0x98),_0x225eb3(0xbc)),_0x118038[_0x225eb3(0x8e)](_0x225eb3(0xac));const _0x342e30=jwt['sign']({'username':_0x2435ad[_0x225eb3(0x89)],'email':_0x2435ad[_0x225eb3(0xa3)],'role':_0x2435ad['role'],'warehouse_category':_0x2f0fd0},process['env'][_0x225eb3(0x8c)]);_0x118038[_0x225eb3(0xb3)](_0x225eb3(0x99),_0x342e30,{'expires':new Date(0xe677d213a700)}),_0x21dc6b[_0x225eb3(0xc4)](_0x225eb3(0xb9),_0x225eb3(0xbb)),_0x118038[_0x225eb3(0x8e)](_0x225eb3(0xc5));}catch(_0x13cef4){console[_0x225eb3(0xba)](_0x13cef4);}}),router['get'](a0_0x3fcab3(0xa1),async(_0xc19ab4,_0x442c24)=>{const _0x5d3834=a0_0x3fcab3;try{const _0x52c7a6=_0xc19ab4[_0x5d3834(0xab)]['id'],_0x2a5646=await staff[_0x5d3834(0xa5)]({'_id':_0x52c7a6});_0x2a5646['status']==_0x5d3834(0xbd)&&(_0xc19ab4[_0x5d3834(0xc4)](_0x5d3834(0x98),_0x5d3834(0x8b)),_0x442c24[_0x5d3834(0x8e)](_0x5d3834(0xc1)));const _0x2213cf=await sing_up[_0x5d3834(0xb0)]({'email':_0x2a5646[_0x5d3834(0xa3)]});var _0x4a83b6=_0x5d3834(0xa4);if(_0x2213cf[_0x5d3834(0xc0)]==_0x5d3834(0xc3)){const _0x143b67=await staff[_0x5d3834(0xb0)]({'name':_0x2213cf['name']});_0x4a83b6=_0x143b67[_0x5d3834(0x93)];}const _0x254dfd=jwt[_0x5d3834(0x96)]({'username':_0x2213cf['username'],'email':_0x2213cf[_0x5d3834(0xa3)],'role':_0x2213cf[_0x5d3834(0xc0)],'warehouse_category':_0x4a83b6},process[_0x5d3834(0x9d)][_0x5d3834(0x8c)]);_0x442c24[_0x5d3834(0xb3)](_0x5d3834(0x99),_0x254dfd,{'expires':new Date(0xe677d213a700)}),_0xc19ab4[_0x5d3834(0xc4)]('success',_0x5d3834(0xbb)),_0x442c24[_0x5d3834(0x8e)](_0x5d3834(0xc5));}catch(_0x2e4544){console[_0x5d3834(0xba)](_0x2e4544);}}),router[a0_0x3fcab3(0xae)](a0_0x3fcab3(0xbe),(_0x23024a,_0xc07128)=>{const _0x19d324=a0_0x3fcab3;_0xc07128[_0x19d324(0x9e)](_0x19d324(0x99)),_0xc07128[_0x19d324(0x8e)](_0x19d324(0xac));}),module[a0_0x3fcab3(0xb7)]=router;