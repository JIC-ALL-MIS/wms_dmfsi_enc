function a0_0x2302(){const _0xc35db=['3QeFqZt','/staff/view','name','render','validate','jsonwebtoken','3016432qsCNeV','1248810bMJYcS','66389010PQbvBa','login\x20master','your\x20password\x20is\x20wrong','flash','redirect','env','find','email','status','params','125846lkOlQB','/login','/index','All','password','compare','express','1658060gaBEQe','cookie','get','11313666mFuAil','../middleware/auth','Router','warehouse_category','post','632LHtNIS','1389145vKQJIX','login','/staff/:id','login\x20successfully','sign','findOne','jwt','secret_key','36LmiVpI','success','staff','role','log','findById','../models/all_models','errors','bcryptjs'];a0_0x2302=function(){return _0xc35db;};return a0_0x2302();}const a0_0x1b7a57=a0_0x1e4b;(function(_0x41ffc8,_0x117a32){const _0x297b39=a0_0x1e4b,_0x8d6c06=_0x41ffc8();while(!![]){try{const _0x5adc68=parseInt(_0x297b39(0x11a))/0x1+-parseInt(_0x297b39(0x119))/0x2*(-parseInt(_0x297b39(0x146))/0x3)+parseInt(_0x297b39(0x12c))/0x4+parseInt(_0x297b39(0x135))/0x5*(parseInt(_0x297b39(0x13d))/0x6)+-parseInt(_0x297b39(0x125))/0x7*(-parseInt(_0x297b39(0x134))/0x8)+parseInt(_0x297b39(0x12f))/0x9+-parseInt(_0x297b39(0x11b))/0xa;if(_0x5adc68===_0x117a32)break;else _0x8d6c06['push'](_0x8d6c06['shift']());}catch(_0x47e89a){_0x8d6c06['push'](_0x8d6c06['shift']());}}}(a0_0x2302,0xd6196));const express=require(a0_0x1b7a57(0x12b)),app=express(),router=express[a0_0x1b7a57(0x131)](),{sing_up,staff,profile,master_shop}=require(a0_0x1b7a57(0x143)),bcrypt=require(a0_0x1b7a57(0x145)),jwt=require(a0_0x1b7a57(0x118)),auth=require(a0_0x1b7a57(0x130));function a0_0x1e4b(_0x23352e,_0x36e59e){const _0x2302ac=a0_0x2302();return a0_0x1e4b=function(_0x1e4bfa,_0x2e0674){_0x1e4bfa=_0x1e4bfa-0x118;let _0x3c16ef=_0x2302ac[_0x1e4bfa];return _0x3c16ef;},a0_0x1e4b(_0x23352e,_0x36e59e);}router[a0_0x1b7a57(0x12e)]('/',async(_0x427136,_0x48699)=>{const _0x1d7721=a0_0x1b7a57;try{const _0x1bb8dc=await master_shop[_0x1d7721(0x121)]();_0x48699['render'](_0x1d7721(0x136),{'success':_0x427136['flash'](_0x1d7721(0x13e)),'errors':_0x427136[_0x1d7721(0x11e)](_0x1d7721(0x144)),'master_shop':_0x1bb8dc});}catch(_0x11363e){console['log'](_0x11363e);}}),router[a0_0x1b7a57(0x12e)]('/validate',async(_0x5285e1,_0x1ef579)=>{const _0x1537b7=a0_0x1b7a57;try{const _0x4d637d=await master_shop[_0x1537b7(0x121)]();_0x1ef579[_0x1537b7(0x149)](_0x1537b7(0x14a),{'success':_0x5285e1[_0x1537b7(0x11e)](_0x1537b7(0x13e)),'errors':_0x5285e1['flash'](_0x1537b7(0x144)),'master_shop':_0x4d637d});}catch(_0x32b36a){console[_0x1537b7(0x141)](_0x32b36a);}}),router[a0_0x1b7a57(0x12e)](a0_0x1b7a57(0x126),async(_0x2711f4,_0x1273ab)=>{const _0x57c04a=a0_0x1b7a57;try{const _0x9070e5=await master_shop[_0x57c04a(0x121)]();console[_0x57c04a(0x141)](_0x57c04a(0x11c),_0x9070e5),_0x1273ab[_0x57c04a(0x149)](_0x57c04a(0x136),{'success':_0x2711f4['flash']('success'),'errors':_0x2711f4[_0x57c04a(0x11e)](_0x57c04a(0x144)),'master_shop':_0x9070e5});}catch(_0x3afba0){console[_0x57c04a(0x141)](_0x3afba0);}}),router[a0_0x1b7a57(0x133)](a0_0x1b7a57(0x126),async(_0x26bc9b,_0x471b44)=>{const _0x5e9bf1=a0_0x1b7a57;try{const _0x3b814e=_0x26bc9b['body']['email'],_0x17930a=await sing_up[_0x5e9bf1(0x13a)]({'email':_0x3b814e});if(!_0x17930a)return _0x26bc9b[_0x5e9bf1(0x11e)](_0x5e9bf1(0x144),'your\x20email\x20is\x20not\x20register'),_0x471b44[_0x5e9bf1(0x11f)](_0x5e9bf1(0x126));var _0x167b27=_0x5e9bf1(0x128);if(_0x17930a[_0x5e9bf1(0x140)]==_0x5e9bf1(0x13f)){const _0x387c2a=await staff[_0x5e9bf1(0x13a)]({'name':_0x17930a[_0x5e9bf1(0x148)]});if(_0x387c2a[_0x5e9bf1(0x123)]=='Disabled')return _0x26bc9b[_0x5e9bf1(0x11e)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x471b44[_0x5e9bf1(0x11f)]('/login');_0x167b27=_0x387c2a['warehouse_category'];}const _0x30b727=_0x26bc9b['body']['password'],_0x3472c3=await bcrypt[_0x5e9bf1(0x12a)](_0x30b727,_0x17930a[_0x5e9bf1(0x129)]);if(_0x3472c3==![])return _0x26bc9b[_0x5e9bf1(0x11e)](_0x5e9bf1(0x144),_0x5e9bf1(0x11d)),_0x471b44[_0x5e9bf1(0x11f)](_0x5e9bf1(0x126));const _0x219da2=jwt[_0x5e9bf1(0x139)]({'username':_0x17930a['username'],'email':_0x17930a[_0x5e9bf1(0x122)],'role':_0x17930a[_0x5e9bf1(0x140)],'warehouse_category':_0x167b27},process[_0x5e9bf1(0x120)][_0x5e9bf1(0x13c)]);_0x471b44[_0x5e9bf1(0x12d)](_0x5e9bf1(0x13b),_0x219da2,{'expires':new Date(0xe677d213a700)}),_0x26bc9b[_0x5e9bf1(0x11e)](_0x5e9bf1(0x13e),_0x5e9bf1(0x138)),_0x471b44[_0x5e9bf1(0x11f)]('/index');}catch(_0xd93d23){console[_0x5e9bf1(0x141)](_0xd93d23);}}),router['get'](a0_0x1b7a57(0x137),async(_0x2ad86d,_0x58aa26)=>{const _0x166509=a0_0x1b7a57;try{const _0x5e26dd=_0x2ad86d[_0x166509(0x124)]['id'],_0x1844d5=await staff[_0x166509(0x142)]({'_id':_0x5e26dd});_0x1844d5[_0x166509(0x123)]=='Disabled'&&(_0x2ad86d[_0x166509(0x11e)](_0x166509(0x144),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x58aa26[_0x166509(0x11f)](_0x166509(0x147)));const _0x2e8e28=await sing_up[_0x166509(0x13a)]({'email':_0x1844d5[_0x166509(0x122)]});var _0x320e6f=_0x166509(0x128);if(_0x2e8e28[_0x166509(0x140)]==_0x166509(0x13f)){const _0x145d55=await staff[_0x166509(0x13a)]({'name':_0x2e8e28[_0x166509(0x148)]});_0x320e6f=_0x145d55[_0x166509(0x132)];}const _0x247798=jwt['sign']({'username':_0x2e8e28['username'],'email':_0x2e8e28[_0x166509(0x122)],'role':_0x2e8e28[_0x166509(0x140)],'warehouse_category':_0x320e6f},process[_0x166509(0x120)][_0x166509(0x13c)]);_0x58aa26[_0x166509(0x12d)](_0x166509(0x13b),_0x247798,{'expires':new Date(0xe677d213a700)}),_0x2ad86d['flash'](_0x166509(0x13e),_0x166509(0x138)),_0x58aa26[_0x166509(0x11f)](_0x166509(0x127));}catch(_0x2de6e0){console['log'](_0x2de6e0);}}),router['get']('/logout',(_0x492bbb,_0x31200e)=>{const _0x3ac1d3=a0_0x1b7a57;_0x31200e['clearCookie'](_0x3ac1d3(0x13b)),_0x31200e[_0x3ac1d3(0x11f)](_0x3ac1d3(0x126));}),module['exports']=router;