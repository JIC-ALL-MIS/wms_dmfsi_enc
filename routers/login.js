const a0_0x375890=a0_0x4aea;(function(_0x48da59,_0x3c90b8){const _0x5c25ea=a0_0x4aea,_0x46c05b=_0x48da59();while(!![]){try{const _0x24611d=-parseInt(_0x5c25ea(0x127))/0x1*(-parseInt(_0x5c25ea(0x140))/0x2)+-parseInt(_0x5c25ea(0x13c))/0x3*(parseInt(_0x5c25ea(0x146))/0x4)+parseInt(_0x5c25ea(0x11f))/0x5+-parseInt(_0x5c25ea(0x14f))/0x6+parseInt(_0x5c25ea(0x147))/0x7*(-parseInt(_0x5c25ea(0x153))/0x8)+-parseInt(_0x5c25ea(0x14c))/0x9*(-parseInt(_0x5c25ea(0x124))/0xa)+parseInt(_0x5c25ea(0x12a))/0xb;if(_0x24611d===_0x3c90b8)break;else _0x46c05b['push'](_0x46c05b['shift']());}catch(_0x5db165){_0x46c05b['push'](_0x46c05b['shift']());}}}(a0_0x142c,0xd31ac));const express=require(a0_0x375890(0x126)),app=express(),router=express[a0_0x375890(0x141)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x375890(0x12e)),jwt=require('jsonwebtoken'),auth=require(a0_0x375890(0x12f));function a0_0x4aea(_0x2ec495,_0x3b83f2){const _0x142c11=a0_0x142c();return a0_0x4aea=function(_0x4aea7a,_0x4c8c2d){_0x4aea7a=_0x4aea7a-0x11d;let _0xecb5b7=_0x142c11[_0x4aea7a];return _0xecb5b7;},a0_0x4aea(_0x2ec495,_0x3b83f2);}router[a0_0x375890(0x142)]('/',async(_0x1f2e84,_0x5d242f)=>{const _0x3665cd=a0_0x375890;try{const _0x54d281=await master_shop['find']();_0x5d242f['render'](_0x3665cd(0x152),{'success':_0x1f2e84['flash']('success'),'errors':_0x1f2e84[_0x3665cd(0x13d)](_0x3665cd(0x120)),'master_shop':_0x54d281});}catch(_0xa4cc77){console[_0x3665cd(0x125)](_0xa4cc77);}}),router[a0_0x375890(0x142)]('/validate',async(_0x1c8b5b,_0x1e7f3f)=>{const _0x5cdbe7=a0_0x375890;try{const _0x308dd6=await master_shop[_0x5cdbe7(0x148)]();_0x1e7f3f[_0x5cdbe7(0x151)](_0x5cdbe7(0x12b),{'success':_0x1c8b5b['flash'](_0x5cdbe7(0x11e)),'errors':_0x1c8b5b[_0x5cdbe7(0x13d)](_0x5cdbe7(0x120)),'master_shop':_0x308dd6});}catch(_0x3dcf2b){console[_0x5cdbe7(0x125)](_0x3dcf2b);}}),router[a0_0x375890(0x142)](a0_0x375890(0x13e),async(_0x2acab6,_0x3ea21f)=>{const _0x2e2b60=a0_0x375890;try{const _0xde279b=await master_shop[_0x2e2b60(0x148)]();console[_0x2e2b60(0x125)](_0x2e2b60(0x13b),_0xde279b),_0x3ea21f[_0x2e2b60(0x151)](_0x2e2b60(0x152),{'success':_0x2acab6['flash'](_0x2e2b60(0x11e)),'errors':_0x2acab6[_0x2e2b60(0x13d)](_0x2e2b60(0x120)),'master_shop':_0xde279b});}catch(_0x884d9f){console['log'](_0x884d9f);}}),router[a0_0x375890(0x139)](a0_0x375890(0x13e),async(_0x320ba8,_0x64b3b6)=>{const _0x2f4882=a0_0x375890;try{const _0xddb9c=_0x320ba8[_0x2f4882(0x130)][_0x2f4882(0x145)],_0x38314d=await sing_up['findOne']({'email':_0xddb9c});if(!_0x38314d)return _0x320ba8['flash']('errors','your\x20email\x20is\x20not\x20register'),_0x64b3b6[_0x2f4882(0x14d)](_0x2f4882(0x13e));var _0x462863=_0x2f4882(0x150);if(_0x38314d[_0x2f4882(0x144)]==_0x2f4882(0x14e)){const _0x57a689=await staff[_0x2f4882(0x136)]({'name':_0x38314d[_0x2f4882(0x131)]});if(_0x57a689[_0x2f4882(0x11d)]==_0x2f4882(0x13f))return _0x320ba8[_0x2f4882(0x13d)](_0x2f4882(0x120),_0x2f4882(0x129)),_0x64b3b6[_0x2f4882(0x14d)]('/login');_0x462863=_0x57a689[_0x2f4882(0x13a)];}const _0x4d1540=_0x320ba8['body'][_0x2f4882(0x14b)],_0x4f4594=await bcrypt[_0x2f4882(0x134)](_0x4d1540,_0x38314d['password']);if(_0x4f4594==![])return _0x320ba8[_0x2f4882(0x13d)](_0x2f4882(0x120),'your\x20password\x20is\x20wrong'),_0x64b3b6[_0x2f4882(0x14d)](_0x2f4882(0x13e));const _0x3016a0=jwt[_0x2f4882(0x14a)]({'username':_0x38314d[_0x2f4882(0x137)],'email':_0x38314d['email'],'role':_0x38314d[_0x2f4882(0x144)],'warehouse_category':_0x462863},process[_0x2f4882(0x149)][_0x2f4882(0x133)]);_0x64b3b6[_0x2f4882(0x123)]('jwt',_0x3016a0,{'expires':new Date(0xe677d213a700)}),_0x320ba8['flash'](_0x2f4882(0x11e),_0x2f4882(0x135)),_0x64b3b6[_0x2f4882(0x14d)]('/index');}catch(_0x3fe752){console[_0x2f4882(0x125)](_0x3fe752);}}),router[a0_0x375890(0x142)](a0_0x375890(0x138),async(_0x2a9329,_0x511aa6)=>{const _0x219369=a0_0x375890;try{const _0x4ddd94=_0x2a9329['params']['id'],_0x39a0c6=await staff[_0x219369(0x128)]({'_id':_0x4ddd94});_0x39a0c6[_0x219369(0x11d)]==_0x219369(0x13f)&&(_0x2a9329[_0x219369(0x13d)](_0x219369(0x120),_0x219369(0x129)),_0x511aa6['redirect'](_0x219369(0x12d)));const _0x4c0b3c=await sing_up[_0x219369(0x136)]({'email':_0x39a0c6[_0x219369(0x145)]});var _0x38dd6b=_0x219369(0x150);if(_0x4c0b3c[_0x219369(0x144)]==_0x219369(0x14e)){const _0x4fbdd3=await staff['findOne']({'name':_0x4c0b3c[_0x219369(0x131)]});_0x38dd6b=_0x4fbdd3[_0x219369(0x13a)];}const _0x37621d=jwt[_0x219369(0x14a)]({'username':_0x4c0b3c['username'],'email':_0x4c0b3c[_0x219369(0x145)],'role':_0x4c0b3c[_0x219369(0x144)],'warehouse_category':_0x38dd6b},process[_0x219369(0x149)][_0x219369(0x133)]);_0x511aa6['cookie']('jwt',_0x37621d,{'expires':new Date(0xe677d213a700)}),_0x2a9329['flash']('success','login\x20successfully'),_0x511aa6['redirect'](_0x219369(0x121));}catch(_0x1f867b){console['log'](_0x1f867b);}}),router[a0_0x375890(0x142)](a0_0x375890(0x12c),(_0x476891,_0x37d31d)=>{const _0x31a639=a0_0x375890;_0x37d31d[_0x31a639(0x132)](_0x31a639(0x143)),_0x37d31d[_0x31a639(0x14d)](_0x31a639(0x13e));}),module[a0_0x375890(0x122)]=router;function a0_0x142c(){const _0x5a57e9=['sign','password','4371237ozravF','redirect','staff','2993640UTjfFR','All','render','login','8uiRPGN','status','success','5538890vbHuWt','errors','/index','exports','cookie','10jyUGZk','log','express','22567YLuIrZ','findById','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','6050429DNUhDN','validate','/logout','/staff/view','bcryptjs','../middleware/auth','body','name','clearCookie','secret_key','compare','login\x20successfully','findOne','username','/staff/:id','post','warehouse_category','login\x20master','331809Zdbvym','flash','/login','Disabled','22oXCYgj','Router','get','jwt','role','email','4eSymEv','6422640agKtNS','find','env'];a0_0x142c=function(){return _0x5a57e9;};return a0_0x142c();}