const a0_0xa6f363=a0_0x4897;(function(_0x4096b8,_0x5f4eb3){const _0x1364ce=a0_0x4897,_0x2f1c83=_0x4096b8();while(!![]){try{const _0x2f3c2b=-parseInt(_0x1364ce(0x10e))/0x1*(parseInt(_0x1364ce(0x10a))/0x2)+-parseInt(_0x1364ce(0xf6))/0x3*(-parseInt(_0x1364ce(0xe8))/0x4)+-parseInt(_0x1364ce(0xf2))/0x5+parseInt(_0x1364ce(0x116))/0x6*(-parseInt(_0x1364ce(0xf8))/0x7)+parseInt(_0x1364ce(0x10b))/0x8+-parseInt(_0x1364ce(0xfd))/0x9*(parseInt(_0x1364ce(0x108))/0xa)+parseInt(_0x1364ce(0xfc))/0xb;if(_0x2f3c2b===_0x5f4eb3)break;else _0x2f1c83['push'](_0x2f1c83['shift']());}catch(_0x352cb9){_0x2f1c83['push'](_0x2f1c83['shift']());}}}(a0_0x5c38,0x33cd6));const express=require(a0_0xa6f363(0x104)),app=express(),router=express[a0_0xa6f363(0x103)](),{sing_up,staff,profile,master_shop}=require(a0_0xa6f363(0xe5)),bcrypt=require('bcryptjs'),jwt=require(a0_0xa6f363(0x10f)),auth=require(a0_0xa6f363(0x100));function a0_0x4897(_0x12d7a2,_0x476c4f){const _0x5c382a=a0_0x5c38();return a0_0x4897=function(_0x489719,_0x551030){_0x489719=_0x489719-0xe2;let _0x315bfd=_0x5c382a[_0x489719];return _0x315bfd;},a0_0x4897(_0x12d7a2,_0x476c4f);}router['get']('/',async(_0x1d59ec,_0x38d344)=>{const _0x1dcb01=a0_0xa6f363;try{const _0x4786dc=await master_shop[_0x1dcb01(0x105)]();_0x38d344['render'](_0x1dcb01(0x115),{'success':_0x1d59ec['flash'](_0x1dcb01(0xfa)),'errors':_0x1d59ec[_0x1dcb01(0xe9)](_0x1dcb01(0xee)),'master_shop':_0x4786dc});}catch(_0x67a5f5){console[_0x1dcb01(0xec)](_0x67a5f5);}}),router['get'](a0_0xa6f363(0x106),async(_0x5e20b7,_0x724496)=>{const _0x545858=a0_0xa6f363;try{const _0x5079c7=await master_shop[_0x545858(0x105)]();_0x724496[_0x545858(0xf7)](_0x545858(0x109),{'success':_0x5e20b7[_0x545858(0xe9)]('success'),'errors':_0x5e20b7[_0x545858(0xe9)](_0x545858(0xee)),'master_shop':_0x5079c7});}catch(_0x28e56d){console[_0x545858(0xec)](_0x28e56d);}}),router['get']('/login',async(_0x5a9956,_0x529cf7)=>{const _0x5d466a=a0_0xa6f363;try{const _0x54b284=await master_shop[_0x5d466a(0x105)]();console[_0x5d466a(0xec)](_0x5d466a(0xf9),_0x54b284),_0x529cf7[_0x5d466a(0xf7)]('login',{'success':_0x5a9956[_0x5d466a(0xe9)](_0x5d466a(0xfa)),'errors':_0x5a9956[_0x5d466a(0xe9)](_0x5d466a(0xee)),'master_shop':_0x54b284});}catch(_0x335a9){console['log'](_0x335a9);}}),router['post'](a0_0xa6f363(0x10d),async(_0x49b3ad,_0x391b0f)=>{const _0x137abe=a0_0xa6f363;try{const _0x3ccfd2=_0x49b3ad[_0x137abe(0xeb)][_0x137abe(0xe2)],_0x49f6cb=await sing_up[_0x137abe(0xfe)]({'email':_0x3ccfd2});if(!_0x49f6cb)return _0x49b3ad[_0x137abe(0xe9)](_0x137abe(0xee),'your\x20email\x20is\x20not\x20register'),_0x391b0f[_0x137abe(0x110)](_0x137abe(0x10d));var _0x308957='All';if(_0x49f6cb[_0x137abe(0xea)]==_0x137abe(0xed)){const _0x45fdf5=await staff[_0x137abe(0xfe)]({'name':_0x49f6cb['name']});if(_0x45fdf5[_0x137abe(0x107)]==_0x137abe(0xf0))return _0x49b3ad[_0x137abe(0xe9)](_0x137abe(0xee),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x391b0f[_0x137abe(0x110)](_0x137abe(0x10d));_0x308957=_0x45fdf5[_0x137abe(0xe7)];}const _0x3a2b3d=_0x49b3ad[_0x137abe(0xeb)][_0x137abe(0xff)],_0x3cee60=await bcrypt['compare'](_0x3a2b3d,_0x49f6cb[_0x137abe(0xff)]);if(_0x3cee60==![])return _0x49b3ad['flash'](_0x137abe(0xee),'your\x20password\x20is\x20wrong'),_0x391b0f['redirect'](_0x137abe(0x10d));const _0x909689=jwt[_0x137abe(0xf3)]({'username':_0x49f6cb[_0x137abe(0xe4)],'email':_0x49f6cb['email'],'role':_0x49f6cb[_0x137abe(0xea)],'warehouse_category':_0x308957},process[_0x137abe(0xf5)]['secret_key']);_0x391b0f[_0x137abe(0xf1)](_0x137abe(0x10c),_0x909689,{'expires':new Date(0xe677d213a700)}),_0x49b3ad['flash'](_0x137abe(0xfa),_0x137abe(0x102)),_0x391b0f[_0x137abe(0x110)]('/index');}catch(_0x31f63d){console[_0x137abe(0xec)](_0x31f63d);}}),router[a0_0xa6f363(0x101)](a0_0xa6f363(0x114),async(_0x4b35b6,_0x1f3844)=>{const _0x25f2e0=a0_0xa6f363;try{const _0xd4cf57=_0x4b35b6[_0x25f2e0(0xe6)]['id'],_0x3c68da=await staff['findById']({'_id':_0xd4cf57});_0x3c68da[_0x25f2e0(0x107)]==_0x25f2e0(0xf0)&&(_0x4b35b6[_0x25f2e0(0xe9)]('errors',_0x25f2e0(0xfb)),_0x1f3844['redirect']('/staff/view'));const _0x239ca9=await sing_up[_0x25f2e0(0xfe)]({'email':_0x3c68da[_0x25f2e0(0xe2)]});var _0x517dc8=_0x25f2e0(0x111);if(_0x239ca9['role']==_0x25f2e0(0xed)){const _0x3a2047=await staff[_0x25f2e0(0xfe)]({'name':_0x239ca9[_0x25f2e0(0x113)]});_0x517dc8=_0x3a2047[_0x25f2e0(0xe7)];}const _0x266717=jwt['sign']({'username':_0x239ca9['username'],'email':_0x239ca9[_0x25f2e0(0xe2)],'role':_0x239ca9[_0x25f2e0(0xea)],'warehouse_category':_0x517dc8},process['env'][_0x25f2e0(0xe3)]);_0x1f3844[_0x25f2e0(0xf1)](_0x25f2e0(0x10c),_0x266717,{'expires':new Date(0xe677d213a700)}),_0x4b35b6[_0x25f2e0(0xe9)](_0x25f2e0(0xfa),_0x25f2e0(0x102)),_0x1f3844[_0x25f2e0(0x110)]('/index');}catch(_0x33fda1){console[_0x25f2e0(0xec)](_0x33fda1);}}),router[a0_0xa6f363(0x101)](a0_0xa6f363(0xf4),(_0xa793db,_0x234203)=>{const _0x9c880f=a0_0xa6f363;_0x234203[_0x9c880f(0xef)](_0x9c880f(0x10c)),_0x234203[_0x9c880f(0x110)](_0x9c880f(0x10d));}),module[a0_0xa6f363(0x112)]=router;function a0_0x5c38(){const _0x4202f9=['3156HNTkqH','flash','role','body','log','staff','errors','clearCookie','Disabled','cookie','1479075tshMxH','sign','/logout','env','474uUeleS','render','268667DDdjfw','login\x20master','success','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','12949673FtyHjz','99063azDymd','findOne','password','../middleware/auth','get','login\x20successfully','Router','express','find','/validate','status','100VyuQIW','validate','68xJukVD','169632wlRlxn','jwt','/login','9448JsyCLv','jsonwebtoken','redirect','All','exports','name','/staff/:id','login','60SBwVwb','email','secret_key','username','../models/all_models','params','warehouse_category'];a0_0x5c38=function(){return _0x4202f9;};return a0_0x5c38();}