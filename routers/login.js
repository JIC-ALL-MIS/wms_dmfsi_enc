const a0_0x19eee4=a0_0x3156;(function(_0x48d986,_0x516678){const _0x234363=a0_0x3156,_0x16968e=_0x48d986();while(!![]){try{const _0x2144a8=parseInt(_0x234363(0x110))/0x1*(parseInt(_0x234363(0x107))/0x2)+-parseInt(_0x234363(0x119))/0x3+-parseInt(_0x234363(0xf3))/0x4*(-parseInt(_0x234363(0xfe))/0x5)+parseInt(_0x234363(0xef))/0x6+-parseInt(_0x234363(0x10c))/0x7+parseInt(_0x234363(0x101))/0x8+-parseInt(_0x234363(0x114))/0x9*(-parseInt(_0x234363(0xfd))/0xa);if(_0x2144a8===_0x516678)break;else _0x16968e['push'](_0x16968e['shift']());}catch(_0x355eda){_0x16968e['push'](_0x16968e['shift']());}}}(a0_0x699d,0xdae28));const express=require('express'),app=express(),router=express[a0_0x19eee4(0x116)](),{sing_up,staff,profile,master_shop}=require(a0_0x19eee4(0xf6)),bcrypt=require(a0_0x19eee4(0xee)),jwt=require(a0_0x19eee4(0x106)),auth=require(a0_0x19eee4(0xff));router[a0_0x19eee4(0xf7)]('/',async(_0x30e55b,_0x37a40b)=>{const _0x370aee=a0_0x19eee4;try{const _0x52e9bd=await master_shop[_0x370aee(0xfc)]();_0x37a40b['render'](_0x370aee(0x10d),{'success':_0x30e55b[_0x370aee(0x10b)](_0x370aee(0xfb)),'errors':_0x30e55b['flash'](_0x370aee(0xf1)),'master_shop':_0x52e9bd});}catch(_0x51f91b){console[_0x370aee(0xf0)](_0x51f91b);}}),router[a0_0x19eee4(0xf7)](a0_0x19eee4(0x10e),async(_0x4127ff,_0x397f46)=>{const _0x3fa985=a0_0x19eee4;try{const _0x3129e8=await master_shop['find']();_0x397f46[_0x3fa985(0x108)]('validate',{'success':_0x4127ff[_0x3fa985(0x10b)]('success'),'errors':_0x4127ff[_0x3fa985(0x10b)]('errors'),'master_shop':_0x3129e8});}catch(_0x28c1bd){console[_0x3fa985(0xf0)](_0x28c1bd);}}),router[a0_0x19eee4(0xf7)](a0_0x19eee4(0x10a),async(_0x307a36,_0x4fe1c4)=>{const _0x4f6a5a=a0_0x19eee4;try{const _0x358ca5=await master_shop[_0x4f6a5a(0xfc)]();console['log']('login\x20master',_0x358ca5),_0x4fe1c4[_0x4f6a5a(0x108)]('login',{'success':_0x307a36[_0x4f6a5a(0x10b)](_0x4f6a5a(0xfb)),'errors':_0x307a36['flash'](_0x4f6a5a(0xf1)),'master_shop':_0x358ca5});}catch(_0x1388a7){console['log'](_0x1388a7);}}),router['post'](a0_0x19eee4(0x10a),async(_0x4b8315,_0xde7fbd)=>{const _0x43dcab=a0_0x19eee4;try{const _0x180e87=_0x4b8315[_0x43dcab(0x11c)][_0x43dcab(0x118)],_0x139893=await sing_up[_0x43dcab(0xf4)]({'email':_0x180e87});if(!_0x139893)return _0x4b8315[_0x43dcab(0x10b)](_0x43dcab(0xf1),_0x43dcab(0x11b)),_0xde7fbd[_0x43dcab(0x100)](_0x43dcab(0x10a));const _0x574510=await staff[_0x43dcab(0xf4)]({'email':_0x139893['email']});var _0x2889e8=_0x574510[_0x43dcab(0x111)];if(_0x139893[_0x43dcab(0x113)]==_0x43dcab(0x109)){const _0x51c79c=await staff[_0x43dcab(0xf4)]({'email':_0x139893[_0x43dcab(0x118)]});if(_0x51c79c[_0x43dcab(0xfa)]==_0x43dcab(0x10f))return _0x4b8315[_0x43dcab(0x10b)](_0x43dcab(0xf1),_0x43dcab(0x112)),_0xde7fbd[_0x43dcab(0x100)](_0x43dcab(0x10a));_0x2889e8=_0x51c79c[_0x43dcab(0x111)];}const _0xe060c6=_0x4b8315[_0x43dcab(0x11c)][_0x43dcab(0x102)],_0x3d7b9e=await bcrypt[_0x43dcab(0xf8)](_0xe060c6,_0x139893[_0x43dcab(0x102)]);if(_0x3d7b9e==![])return _0x4b8315[_0x43dcab(0x10b)](_0x43dcab(0xf1),_0x43dcab(0x11a)),_0xde7fbd['redirect'](_0x43dcab(0x10a));const _0x216550=jwt[_0x43dcab(0x115)]({'username':_0x139893[_0x43dcab(0x103)],'email':_0x139893['email'],'role':_0x139893[_0x43dcab(0x113)],'warehouse_category':_0x2889e8},process[_0x43dcab(0x104)]['secret_key']);_0xde7fbd[_0x43dcab(0xec)](_0x43dcab(0x11e),_0x216550,{'expires':new Date(0xe677d213a700)}),_0x4b8315[_0x43dcab(0x10b)](_0x43dcab(0xfb),'login\x20successfully'),_0xde7fbd['redirect'](_0x43dcab(0xed));}catch(_0x55e63a){console['log'](_0x55e63a);}}),router[a0_0x19eee4(0xf7)](a0_0x19eee4(0x11d),async(_0x20b483,_0x3e0860)=>{const _0x5bf364=a0_0x19eee4;try{const _0x1e4de5=_0x20b483['params']['id'],_0x244539=await staff[_0x5bf364(0xf9)]({'_id':_0x1e4de5});_0x244539[_0x5bf364(0xfa)]==_0x5bf364(0x10f)&&(_0x20b483[_0x5bf364(0x10b)](_0x5bf364(0xf1),_0x5bf364(0x112)),_0x3e0860[_0x5bf364(0x100)]('/staff/view'));const _0x53923a=await sing_up[_0x5bf364(0xf4)]({'email':_0x244539[_0x5bf364(0x118)]});var _0x1e2078=_0x244539[_0x5bf364(0x111)];if(_0x53923a['role']=='staff'){const _0x27596c=await staff['findOne']({'name':_0x53923a[_0x5bf364(0x117)]});_0x1e2078=_0x27596c[_0x5bf364(0x111)];}const _0x26ab86=jwt['sign']({'username':_0x53923a['username'],'email':_0x53923a[_0x5bf364(0x118)],'role':_0x53923a[_0x5bf364(0x113)],'warehouse_category':_0x1e2078},process[_0x5bf364(0x104)][_0x5bf364(0x105)]);_0x3e0860[_0x5bf364(0xec)]('jwt',_0x26ab86,{'expires':new Date(0xe677d213a700)}),_0x20b483['flash'](_0x5bf364(0xfb),'login\x20successfully'),_0x3e0860['redirect'](_0x5bf364(0xed));}catch(_0x34a205){console[_0x5bf364(0xf0)](_0x34a205);}}),router[a0_0x19eee4(0xf7)](a0_0x19eee4(0xf5),(_0x51a908,_0x3271ca)=>{const _0x49dd87=a0_0x19eee4;_0x3271ca['clearCookie']('jwt'),_0x3271ca[_0x49dd87(0x100)](_0x49dd87(0x10a));}),module[a0_0x19eee4(0xf2)]=router;function a0_0x3156(_0xa4b33a,_0x49c221){const _0x699d63=a0_0x699d();return a0_0x3156=function(_0x3156cd,_0x5a86f9){_0x3156cd=_0x3156cd-0xec;let _0x3c9df9=_0x699d63[_0x3156cd];return _0x3c9df9;},a0_0x3156(_0xa4b33a,_0x49c221);}function a0_0x699d(){const _0x3f1b28=['235156ruiVsI','render','staff','/login','flash','7669207ILqzMp','login','/validate','Disabled','1NiLMSB','warehouse_category','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','role','121239KHOoho','sign','Router','name','email','251058qeSjeB','your\x20password\x20is\x20wrong','your\x20email\x20is\x20not\x20register','body','/staff/:id','jwt','cookie','/index','bcryptjs','4122096PMMVhU','log','errors','exports','7640WRubpw','findOne','/logout','../models/all_models','get','compare','findById','status','success','find','190hunfNs','15RXtbds','../middleware/auth','redirect','8076528dJhYsK','password','username','env','secret_key','jsonwebtoken'];a0_0x699d=function(){return _0x3f1b28;};return a0_0x699d();}