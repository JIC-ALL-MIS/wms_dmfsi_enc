const a0_0x636e3c=a0_0x448c;(function(_0x45d7f3,_0x25aa77){const _0x42de2e=a0_0x448c,_0x43b82c=_0x45d7f3();while(!![]){try{const _0x50cd23=parseInt(_0x42de2e(0x1f9))/0x1+parseInt(_0x42de2e(0x1e7))/0x2*(parseInt(_0x42de2e(0x206))/0x3)+-parseInt(_0x42de2e(0x209))/0x4+parseInt(_0x42de2e(0x1eb))/0x5+parseInt(_0x42de2e(0x20f))/0x6*(parseInt(_0x42de2e(0x1fe))/0x7)+-parseInt(_0x42de2e(0x20b))/0x8*(-parseInt(_0x42de2e(0x1fd))/0x9)+-parseInt(_0x42de2e(0x207))/0xa;if(_0x50cd23===_0x25aa77)break;else _0x43b82c['push'](_0x43b82c['shift']());}catch(_0x50cc32){_0x43b82c['push'](_0x43b82c['shift']());}}}(a0_0x4717,0x72083));function a0_0x448c(_0x58ae46,_0x4d60ab){const _0x471772=a0_0x4717();return a0_0x448c=function(_0x448cf2,_0x410b97){_0x448cf2=_0x448cf2-0x1e7;let _0x334867=_0x471772[_0x448cf2];return _0x334867;},a0_0x448c(_0x58ae46,_0x4d60ab);}const express=require(a0_0x636e3c(0x1f5)),app=express(),router=express[a0_0x636e3c(0x1f7)](),{sing_up,staff,profile,master_shop}=require(a0_0x636e3c(0x1f3)),bcrypt=require(a0_0x636e3c(0x205)),jwt=require(a0_0x636e3c(0x1ed)),auth=require(a0_0x636e3c(0x1ef));router[a0_0x636e3c(0x203)]('/',async(_0x476f78,_0x177c28)=>{const _0xd01975=a0_0x636e3c;try{const _0x4fc5c2=await master_shop[_0xd01975(0x20e)]();_0x177c28[_0xd01975(0x212)](_0xd01975(0x214),{'success':_0x476f78[_0xd01975(0x218)]('success'),'errors':_0x476f78[_0xd01975(0x218)](_0xd01975(0x1f6)),'master_shop':_0x4fc5c2});}catch(_0x50c317){console[_0xd01975(0x1f8)](_0x50c317);}}),router[a0_0x636e3c(0x203)]('/validate',async(_0x5c79db,_0x39ab4b)=>{const _0x44d56d=a0_0x636e3c;try{const _0x364145=await master_shop['find']();_0x39ab4b[_0x44d56d(0x212)](_0x44d56d(0x1ff),{'success':_0x5c79db[_0x44d56d(0x218)](_0x44d56d(0x217)),'errors':_0x5c79db[_0x44d56d(0x218)](_0x44d56d(0x1f6)),'master_shop':_0x364145});}catch(_0x282d6e){console[_0x44d56d(0x1f8)](_0x282d6e);}}),router[a0_0x636e3c(0x203)](a0_0x636e3c(0x21a),async(_0x647d1b,_0x4a3637)=>{const _0x33b746=a0_0x636e3c;try{const _0x8226c=await master_shop[_0x33b746(0x20e)]();console['log'](_0x33b746(0x1fa),_0x8226c),_0x4a3637[_0x33b746(0x212)](_0x33b746(0x214),{'success':_0x647d1b[_0x33b746(0x218)](_0x33b746(0x217)),'errors':_0x647d1b[_0x33b746(0x218)](_0x33b746(0x1f6)),'master_shop':_0x8226c});}catch(_0x16e63c){console[_0x33b746(0x1f8)](_0x16e63c);}}),router['post']('/login',async(_0x12b34b,_0x215fc2)=>{const _0x1e7489=a0_0x636e3c;try{const _0x49a10e=_0x12b34b[_0x1e7489(0x204)][_0x1e7489(0x20a)],_0x47345c=await sing_up[_0x1e7489(0x1fc)]({'email':_0x49a10e});if(!_0x47345c)return _0x12b34b[_0x1e7489(0x218)](_0x1e7489(0x1f6),_0x1e7489(0x216)),_0x215fc2[_0x1e7489(0x200)](_0x1e7489(0x21a));const _0x3ff414=await staff['findOne']({'email':_0x47345c[_0x1e7489(0x20a)]});var _0x43461a=_0x3ff414[_0x1e7489(0x1f0)];if(_0x47345c[_0x1e7489(0x1f4)]=='staff'){const _0x5ca4c4=await staff[_0x1e7489(0x1fc)]({'email':_0x47345c[_0x1e7489(0x20a)]});if(_0x5ca4c4[_0x1e7489(0x208)]=='Disabled')return _0x12b34b['flash'](_0x1e7489(0x1f6),_0x1e7489(0x20c)),_0x215fc2['redirect'](_0x1e7489(0x21a));_0x43461a=_0x5ca4c4[_0x1e7489(0x1f0)];}const _0x2ec002=_0x12b34b['body'][_0x1e7489(0x215)],_0x4aecb5=await bcrypt['compare'](_0x2ec002,_0x47345c[_0x1e7489(0x215)]);if(_0x4aecb5==![])return _0x12b34b[_0x1e7489(0x218)](_0x1e7489(0x1f6),_0x1e7489(0x1ee)),_0x215fc2[_0x1e7489(0x200)](_0x1e7489(0x21a));const _0x36ea94=jwt[_0x1e7489(0x1fb)]({'username':_0x47345c[_0x1e7489(0x211)],'email':_0x47345c['email'],'role':_0x47345c[_0x1e7489(0x1f4)],'warehouse_category':_0x43461a},process['env'][_0x1e7489(0x21b)]);_0x215fc2[_0x1e7489(0x20d)]('jwt',_0x36ea94,{'expires':new Date(0xe677d213a700)}),_0x12b34b[_0x1e7489(0x218)](_0x1e7489(0x217),_0x1e7489(0x1e9)),_0x215fc2[_0x1e7489(0x200)](_0x1e7489(0x1f2));}catch(_0x83ff4){console[_0x1e7489(0x1f8)](_0x83ff4);}}),router[a0_0x636e3c(0x203)](a0_0x636e3c(0x1f1),async(_0x38e70e,_0x2da270)=>{const _0x87225e=a0_0x636e3c;try{const _0x3ae641=_0x38e70e[_0x87225e(0x1ec)]['id'],_0x2fd526=await staff[_0x87225e(0x21c)]({'_id':_0x3ae641});_0x2fd526[_0x87225e(0x208)]=='Disabled'&&(_0x38e70e[_0x87225e(0x218)](_0x87225e(0x1f6),_0x87225e(0x20c)),_0x2da270['redirect'](_0x87225e(0x210)));const _0x2d0470=await sing_up[_0x87225e(0x1fc)]({'email':_0x2fd526[_0x87225e(0x20a)]});var _0x1aa183=_0x2fd526[_0x87225e(0x1f0)];if(_0x2d0470[_0x87225e(0x1f4)]==_0x87225e(0x202)){const _0x3015a4=await staff['findOne']({'name':_0x2d0470[_0x87225e(0x213)]});_0x1aa183=_0x3015a4[_0x87225e(0x1f0)];}const _0x9bd30a=jwt['sign']({'username':_0x2d0470[_0x87225e(0x211)],'email':_0x2d0470[_0x87225e(0x20a)],'role':_0x2d0470[_0x87225e(0x1f4)],'warehouse_category':_0x1aa183},process[_0x87225e(0x1ea)][_0x87225e(0x21b)]);_0x2da270[_0x87225e(0x20d)]('jwt',_0x9bd30a,{'expires':new Date(0xe677d213a700)}),_0x38e70e[_0x87225e(0x218)](_0x87225e(0x217),_0x87225e(0x1e9)),_0x2da270['redirect'](_0x87225e(0x1f2));}catch(_0x2259c9){console[_0x87225e(0x1f8)](_0x2259c9);}}),router[a0_0x636e3c(0x203)](a0_0x636e3c(0x219),(_0x29f039,_0x2cfdcd)=>{const _0x306405=a0_0x636e3c;_0x2cfdcd['clearCookie'](_0x306405(0x201)),_0x2cfdcd['redirect'](_0x306405(0x21a));}),module[a0_0x636e3c(0x1e8)]=router;function a0_0x4717(){const _0x36f126=['7FNBRqe','validate','redirect','jwt','staff','get','body','bcryptjs','3OyuRPW','15643660LGdFva','status','1495172uczicV','email','8hcPVOp','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','cookie','find','2243022BiwOFd','/staff/view','username','render','name','login','password','your\x20email\x20is\x20not\x20register','success','flash','/logout','/login','secret_key','findById','1363226sFSKKU','exports','login\x20successfully','env','1834140zGmPPr','params','jsonwebtoken','your\x20password\x20is\x20wrong','../middleware/auth','warehouse_category','/staff/:id','/index','../models/all_models','role','express','errors','Router','log','671949xpbtJN','login\x20master','sign','findOne','2799063wuxnTV'];a0_0x4717=function(){return _0x36f126;};return a0_0x4717();}