function a0_0x16c7(_0xf52ec7,_0xd78b66){const _0x3dd24d=a0_0x3dd2();return a0_0x16c7=function(_0x16c783,_0xb326db){_0x16c783=_0x16c783-0x1f4;let _0x41324b=_0x3dd24d[_0x16c783];return _0x41324b;},a0_0x16c7(_0xf52ec7,_0xd78b66);}const a0_0x222a20=a0_0x16c7;(function(_0x476c58,_0x4918bb){const _0x58c114=a0_0x16c7,_0x3fc6d9=_0x476c58();while(!![]){try{const _0x1bbdee=-parseInt(_0x58c114(0x203))/0x1+parseInt(_0x58c114(0x220))/0x2*(-parseInt(_0x58c114(0x1f9))/0x3)+parseInt(_0x58c114(0x212))/0x4*(-parseInt(_0x58c114(0x20b))/0x5)+parseInt(_0x58c114(0x201))/0x6*(parseInt(_0x58c114(0x207))/0x7)+parseInt(_0x58c114(0x1f4))/0x8*(parseInt(_0x58c114(0x204))/0x9)+parseInt(_0x58c114(0x210))/0xa+-parseInt(_0x58c114(0x1fa))/0xb;if(_0x1bbdee===_0x4918bb)break;else _0x3fc6d9['push'](_0x3fc6d9['shift']());}catch(_0x2a598b){_0x3fc6d9['push'](_0x3fc6d9['shift']());}}}(a0_0x3dd2,0x62847));const express=require(a0_0x222a20(0x20f)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x222a20(0x1f7)),bcrypt=require(a0_0x222a20(0x216)),jwt=require(a0_0x222a20(0x226)),auth=require(a0_0x222a20(0x1ff));function a0_0x3dd2(){const _0x509fdf=['validate','jwt','success','role','password','post','your\x20email\x20is\x20not\x20register','59062WYaXdw','errors','sign','body','compare','/login','jsonwebtoken','login','1065704kKdtmB','staff','flash','../models/all_models','name','6JPQNqW','715517kkPhIf','redirect','warehouse_category','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','exports','../middleware/auth','get','18732mVIhDC','All','194689PuerTp','45OmqEPn','clearCookie','find','70cwzpHJ','/staff/:id','findOne','email','389495VazcQC','render','secret_key','log','express','3366360yFQeRr','login\x20successfully','16lNcgqs','cookie','username','/index','bcryptjs','your\x20password\x20is\x20wrong','/validate'];a0_0x3dd2=function(){return _0x509fdf;};return a0_0x3dd2();}router[a0_0x222a20(0x200)]('/',async(_0x2019c6,_0x3dd2a3)=>{const _0x1d48ce=a0_0x222a20;try{const _0x4b1f6f=await master_shop[_0x1d48ce(0x206)]();_0x3dd2a3[_0x1d48ce(0x20c)](_0x1d48ce(0x227),{'success':_0x2019c6[_0x1d48ce(0x1f6)](_0x1d48ce(0x21b)),'errors':_0x2019c6[_0x1d48ce(0x1f6)]('errors'),'master_shop':_0x4b1f6f});}catch(_0x24dc4a){console[_0x1d48ce(0x20e)](_0x24dc4a);}}),router[a0_0x222a20(0x200)](a0_0x222a20(0x218),async(_0x36b557,_0xd83b20)=>{const _0x19c4d2=a0_0x222a20;try{const _0x15dbef=await master_shop[_0x19c4d2(0x206)]();_0xd83b20[_0x19c4d2(0x20c)](_0x19c4d2(0x219),{'success':_0x36b557[_0x19c4d2(0x1f6)](_0x19c4d2(0x21b)),'errors':_0x36b557[_0x19c4d2(0x1f6)](_0x19c4d2(0x221)),'master_shop':_0x15dbef});}catch(_0x3739ac){console[_0x19c4d2(0x20e)](_0x3739ac);}}),router[a0_0x222a20(0x200)]('/login',async(_0x7be9de,_0x3417a7)=>{const _0x1c75e6=a0_0x222a20;try{const _0x4f6c8f=await master_shop[_0x1c75e6(0x206)]();console[_0x1c75e6(0x20e)]('login\x20master',_0x4f6c8f),_0x3417a7[_0x1c75e6(0x20c)]('login',{'success':_0x7be9de[_0x1c75e6(0x1f6)](_0x1c75e6(0x21b)),'errors':_0x7be9de['flash'](_0x1c75e6(0x221)),'master_shop':_0x4f6c8f});}catch(_0x4c1740){console[_0x1c75e6(0x20e)](_0x4c1740);}}),router[a0_0x222a20(0x21e)](a0_0x222a20(0x225),async(_0x4eb9a8,_0x5ca829)=>{const _0x139238=a0_0x222a20;try{const _0x4210c5=_0x4eb9a8[_0x139238(0x223)]['email'],_0x2a62f5=await sing_up[_0x139238(0x209)]({'email':_0x4210c5});if(!_0x2a62f5)return _0x4eb9a8[_0x139238(0x1f6)]('errors',_0x139238(0x21f)),_0x5ca829[_0x139238(0x1fb)](_0x139238(0x225));var _0xf3bd3b=_0x139238(0x202);if(_0x2a62f5[_0x139238(0x21c)]==_0x139238(0x1f5)){const _0x5620af=await staff[_0x139238(0x209)]({'name':_0x2a62f5[_0x139238(0x1f8)]});if(_0x5620af['status']=='Disabled')return _0x4eb9a8[_0x139238(0x1f6)](_0x139238(0x221),_0x139238(0x1fd)),_0x5ca829[_0x139238(0x1fb)](_0x139238(0x225));_0xf3bd3b=_0x5620af['warehouse_category'];}const _0xca6f00=_0x4eb9a8[_0x139238(0x223)]['password'],_0x13fa61=await bcrypt[_0x139238(0x224)](_0xca6f00,_0x2a62f5[_0x139238(0x21d)]);if(_0x13fa61==![])return _0x4eb9a8[_0x139238(0x1f6)]('errors',_0x139238(0x217)),_0x5ca829[_0x139238(0x1fb)](_0x139238(0x225));const _0x13e34a=jwt['sign']({'username':_0x2a62f5[_0x139238(0x214)],'email':_0x2a62f5['email'],'role':_0x2a62f5[_0x139238(0x21c)],'warehouse_category':_0xf3bd3b},process['env'][_0x139238(0x20d)]);_0x5ca829[_0x139238(0x213)]('jwt',_0x13e34a,{'expires':new Date(0xe677d213a700)}),_0x4eb9a8['flash'](_0x139238(0x21b),_0x139238(0x211)),_0x5ca829['redirect'](_0x139238(0x215));}catch(_0x438078){console[_0x139238(0x20e)](_0x438078);}}),router['get'](a0_0x222a20(0x208),async(_0x4e1c9e,_0x45df29)=>{const _0x110c18=a0_0x222a20;try{const _0x53a107=_0x4e1c9e['params']['id'],_0x470897=await staff['findById']({'_id':_0x53a107});_0x470897['status']=='Disabled'&&(_0x4e1c9e[_0x110c18(0x1f6)](_0x110c18(0x221),_0x110c18(0x1fd)),_0x45df29['redirect']('/staff/view'));const _0x368831=await sing_up[_0x110c18(0x209)]({'email':_0x470897[_0x110c18(0x20a)]});var _0x12c8e5=_0x110c18(0x202);if(_0x368831['role']=='staff'){const _0x4525e1=await staff[_0x110c18(0x209)]({'name':_0x368831[_0x110c18(0x1f8)]});_0x12c8e5=_0x4525e1[_0x110c18(0x1fc)];}const _0x31a7ff=jwt[_0x110c18(0x222)]({'username':_0x368831[_0x110c18(0x214)],'email':_0x368831['email'],'role':_0x368831[_0x110c18(0x21c)],'warehouse_category':_0x12c8e5},process['env'][_0x110c18(0x20d)]);_0x45df29[_0x110c18(0x213)](_0x110c18(0x21a),_0x31a7ff,{'expires':new Date(0xe677d213a700)}),_0x4e1c9e[_0x110c18(0x1f6)](_0x110c18(0x21b),_0x110c18(0x211)),_0x45df29[_0x110c18(0x1fb)](_0x110c18(0x215));}catch(_0x54c34f){console[_0x110c18(0x20e)](_0x54c34f);}}),router[a0_0x222a20(0x200)]('/logout',(_0x16cc4f,_0x8a5c0d)=>{const _0x2c12e0=a0_0x222a20;_0x8a5c0d[_0x2c12e0(0x205)](_0x2c12e0(0x21a)),_0x8a5c0d['redirect'](_0x2c12e0(0x225));}),module[a0_0x222a20(0x1fe)]=router;