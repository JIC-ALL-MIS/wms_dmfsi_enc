const a0_0x4a47d8=a0_0x1c78;function a0_0x1c78(_0xd6218e,_0x4b4deb){const _0x271275=a0_0x2712();return a0_0x1c78=function(_0x1c782e,_0x423012){_0x1c782e=_0x1c782e-0x9c;let _0xefceb5=_0x271275[_0x1c782e];return _0xefceb5;},a0_0x1c78(_0xd6218e,_0x4b4deb);}function a0_0x2712(){const _0x34edf1=['1167MbTePk','findById','status','password','exports','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','4480GHAlyM','errors','body','username','warehouse_category','email','render','sign','redirect','/login','4190680sDVtAr','login','Router','31200KbufnX','4252DSBSCx','secret_key','express','your\x20email\x20is\x20not\x20register','../middleware/auth','name','Disabled','jwt','compare','get','/staff/:id','/index','bcryptjs','success','All','role','/logout','25uoGqJo','243626MzbUye','your\x20password\x20is\x20wrong','env','find','cookie','flash','staff','76168zdgqwL','2120drXWjH','findOne','3586716ABRQHT','log','login\x20successfully','post','jsonwebtoken'];a0_0x2712=function(){return _0x34edf1;};return a0_0x2712();}(function(_0x23f8b3,_0x1daaa8){const _0x2bd08a=a0_0x1c78,_0x3a427f=_0x23f8b3();while(!![]){try{const _0x1ba193=parseInt(_0x2bd08a(0xa2))/0x1+-parseInt(_0x2bd08a(0xd0))/0x2+-parseInt(_0x2bd08a(0xaa))/0x3*(parseInt(_0x2bd08a(0xbe))/0x4)+-parseInt(_0x2bd08a(0xcf))/0x5*(-parseInt(_0x2bd08a(0xbd))/0x6)+parseInt(_0x2bd08a(0xb0))/0x7*(-parseInt(_0x2bd08a(0xa3))/0x8)+parseInt(_0x2bd08a(0xa5))/0x9+parseInt(_0x2bd08a(0xba))/0xa;if(_0x1ba193===_0x1daaa8)break;else _0x3a427f['push'](_0x3a427f['shift']());}catch(_0x497e18){_0x3a427f['push'](_0x3a427f['shift']());}}}(a0_0x2712,0x34738));const express=require(a0_0x4a47d8(0xc0)),app=express(),router=express[a0_0x4a47d8(0xbc)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x4a47d8(0xca)),jwt=require(a0_0x4a47d8(0xa9)),auth=require(a0_0x4a47d8(0xc2));router[a0_0x4a47d8(0xc7)]('/',async(_0x4199e6,_0x347bc9)=>{const _0x2d4477=a0_0x4a47d8;try{const _0x3f3fb0=await master_shop[_0x2d4477(0x9e)]();_0x347bc9[_0x2d4477(0xb6)](_0x2d4477(0xbb),{'success':_0x4199e6[_0x2d4477(0xa0)]('success'),'errors':_0x4199e6['flash']('errors'),'master_shop':_0x3f3fb0});}catch(_0x465553){console['log'](_0x465553);}}),router[a0_0x4a47d8(0xc7)]('/validate',async(_0x52f6e4,_0x54261b)=>{const _0x221873=a0_0x4a47d8;try{const _0x8b18f=await master_shop[_0x221873(0x9e)]();_0x54261b[_0x221873(0xb6)]('validate',{'success':_0x52f6e4['flash'](_0x221873(0xcb)),'errors':_0x52f6e4[_0x221873(0xa0)]('errors'),'master_shop':_0x8b18f});}catch(_0x3bc709){console[_0x221873(0xa6)](_0x3bc709);}}),router['get'](a0_0x4a47d8(0xb9),async(_0x21287e,_0x45b15b)=>{const _0x83ee28=a0_0x4a47d8;try{const _0x3a51be=await master_shop[_0x83ee28(0x9e)]();console[_0x83ee28(0xa6)]('login\x20master',_0x3a51be),_0x45b15b[_0x83ee28(0xb6)](_0x83ee28(0xbb),{'success':_0x21287e['flash'](_0x83ee28(0xcb)),'errors':_0x21287e[_0x83ee28(0xa0)](_0x83ee28(0xb1)),'master_shop':_0x3a51be});}catch(_0x56310c){console[_0x83ee28(0xa6)](_0x56310c);}}),router[a0_0x4a47d8(0xa8)](a0_0x4a47d8(0xb9),async(_0x3f955a,_0xe4bbbc)=>{const _0x2cf4ec=a0_0x4a47d8;try{const _0x21e5f4=_0x3f955a['body'][_0x2cf4ec(0xb5)],_0x4113c2=await sing_up['findOne']({'email':_0x21e5f4});if(!_0x4113c2)return _0x3f955a[_0x2cf4ec(0xa0)](_0x2cf4ec(0xb1),_0x2cf4ec(0xc1)),_0xe4bbbc[_0x2cf4ec(0xb8)](_0x2cf4ec(0xb9));var _0x356162='All';if(_0x4113c2[_0x2cf4ec(0xcd)]==_0x2cf4ec(0xa1)){const _0x31c253=await staff[_0x2cf4ec(0xa4)]({'name':_0x4113c2[_0x2cf4ec(0xc3)]});if(_0x31c253[_0x2cf4ec(0xac)]==_0x2cf4ec(0xc4))return _0x3f955a[_0x2cf4ec(0xa0)](_0x2cf4ec(0xb1),_0x2cf4ec(0xaf)),_0xe4bbbc[_0x2cf4ec(0xb8)](_0x2cf4ec(0xb9));_0x356162=_0x31c253['warehouse_category'];}const _0xdbb8cd=_0x3f955a[_0x2cf4ec(0xb2)][_0x2cf4ec(0xad)],_0x5a653d=await bcrypt[_0x2cf4ec(0xc6)](_0xdbb8cd,_0x4113c2['password']);if(_0x5a653d==![])return _0x3f955a[_0x2cf4ec(0xa0)]('errors',_0x2cf4ec(0x9c)),_0xe4bbbc[_0x2cf4ec(0xb8)]('/login');const _0x5e3bff=jwt[_0x2cf4ec(0xb7)]({'username':_0x4113c2[_0x2cf4ec(0xb3)],'email':_0x4113c2['email'],'role':_0x4113c2['role'],'warehouse_category':_0x356162},process[_0x2cf4ec(0x9d)][_0x2cf4ec(0xbf)]);_0xe4bbbc[_0x2cf4ec(0x9f)](_0x2cf4ec(0xc5),_0x5e3bff,{'expires':new Date(0xe677d213a700)}),_0x3f955a['flash']('success',_0x2cf4ec(0xa7)),_0xe4bbbc[_0x2cf4ec(0xb8)](_0x2cf4ec(0xc9));}catch(_0x5361e9){console[_0x2cf4ec(0xa6)](_0x5361e9);}}),router[a0_0x4a47d8(0xc7)](a0_0x4a47d8(0xc8),async(_0x2dd0aa,_0x1c1c4a)=>{const _0x2cb69b=a0_0x4a47d8;try{const _0x14f5b6=_0x2dd0aa['params']['id'],_0x4d584a=await staff[_0x2cb69b(0xab)]({'_id':_0x14f5b6});_0x4d584a[_0x2cb69b(0xac)]==_0x2cb69b(0xc4)&&(_0x2dd0aa['flash'](_0x2cb69b(0xb1),_0x2cb69b(0xaf)),_0x1c1c4a[_0x2cb69b(0xb8)]('/staff/view'));const _0x3dee73=await sing_up[_0x2cb69b(0xa4)]({'email':_0x4d584a[_0x2cb69b(0xb5)]});var _0x2baca5=_0x2cb69b(0xcc);if(_0x3dee73['role']==_0x2cb69b(0xa1)){const _0x53c4ca=await staff[_0x2cb69b(0xa4)]({'name':_0x3dee73[_0x2cb69b(0xc3)]});_0x2baca5=_0x53c4ca[_0x2cb69b(0xb4)];}const _0x639517=jwt[_0x2cb69b(0xb7)]({'username':_0x3dee73[_0x2cb69b(0xb3)],'email':_0x3dee73[_0x2cb69b(0xb5)],'role':_0x3dee73['role'],'warehouse_category':_0x2baca5},process[_0x2cb69b(0x9d)][_0x2cb69b(0xbf)]);_0x1c1c4a[_0x2cb69b(0x9f)](_0x2cb69b(0xc5),_0x639517,{'expires':new Date(0xe677d213a700)}),_0x2dd0aa[_0x2cb69b(0xa0)](_0x2cb69b(0xcb),_0x2cb69b(0xa7)),_0x1c1c4a[_0x2cb69b(0xb8)](_0x2cb69b(0xc9));}catch(_0x9565ae){console['log'](_0x9565ae);}}),router[a0_0x4a47d8(0xc7)](a0_0x4a47d8(0xce),(_0x360ece,_0x4f498f)=>{const _0x16cc1a=a0_0x4a47d8;_0x4f498f['clearCookie'](_0x16cc1a(0xc5)),_0x4f498f[_0x16cc1a(0xb8)](_0x16cc1a(0xb9));}),module[a0_0x4a47d8(0xae)]=router;