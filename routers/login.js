const a0_0x6da8cc=a0_0xb0f7;function a0_0x57d0(){const _0x5723c5=['/staff/:id','862raLvMC','email','login','your\x20password\x20is\x20wrong','status','login\x20master','36185480tgnkPf','3611IMJtUB','/staff/view','All','env','4905260RbgsTb','/validate','4Nyiakl','role','success','11661597xnNCyi','render','jwt','/index','compare','findOne','secret_key','find','body','params','../middleware/auth','612Eqafvg','warehouse_category','findById','sign','flash','password','/logout','get','express','log','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','Router','login\x20successfully','staff','Disabled','../models/all_models','errors','username','redirect','74809hpmpDc','validate','2740617tLjWMT','name','/login','7140912rHultA','your\x20email\x20is\x20not\x20register','cookie'];a0_0x57d0=function(){return _0x5723c5;};return a0_0x57d0();}(function(_0x2773dc,_0x4c2f94){const _0x59c6fd=a0_0xb0f7,_0x5d4fd0=_0x2773dc();while(!![]){try{const _0x3040b2=-parseInt(_0x59c6fd(0x149))/0x1*(parseInt(_0x59c6fd(0x142))/0x2)+-parseInt(_0x59c6fd(0x13b))/0x3+-parseInt(_0x59c6fd(0x14f))/0x4*(parseInt(_0x59c6fd(0x14d))/0x5)+-parseInt(_0x59c6fd(0x15d))/0x6*(-parseInt(_0x59c6fd(0x170))/0x7)+parseInt(_0x59c6fd(0x13e))/0x8+-parseInt(_0x59c6fd(0x152))/0x9+parseInt(_0x59c6fd(0x148))/0xa;if(_0x3040b2===_0x4c2f94)break;else _0x5d4fd0['push'](_0x5d4fd0['shift']());}catch(_0x13f9a4){_0x5d4fd0['push'](_0x5d4fd0['shift']());}}}(a0_0x57d0,0xd0a2b));const express=require(a0_0x6da8cc(0x165)),app=express(),router=express[a0_0x6da8cc(0x168)](),{sing_up,staff,profile,master_shop}=require(a0_0x6da8cc(0x16c)),bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),auth=require(a0_0x6da8cc(0x15c));function a0_0xb0f7(_0x224420,_0xa9017e){const _0x57d0ca=a0_0x57d0();return a0_0xb0f7=function(_0xb0f79c,_0x11de03){_0xb0f79c=_0xb0f79c-0x13a;let _0x141cc0=_0x57d0ca[_0xb0f79c];return _0x141cc0;},a0_0xb0f7(_0x224420,_0xa9017e);}router[a0_0x6da8cc(0x164)]('/',async(_0x329b4b,_0x4efc50)=>{const _0x3a4dfa=a0_0x6da8cc;try{const _0x581a4a=await master_shop[_0x3a4dfa(0x159)]();_0x4efc50[_0x3a4dfa(0x153)](_0x3a4dfa(0x144),{'success':_0x329b4b['flash'](_0x3a4dfa(0x151)),'errors':_0x329b4b[_0x3a4dfa(0x161)](_0x3a4dfa(0x16d)),'master_shop':_0x581a4a});}catch(_0x11852d){console['log'](_0x11852d);}}),router[a0_0x6da8cc(0x164)](a0_0x6da8cc(0x14e),async(_0x45ff46,_0x275935)=>{const _0x44f284=a0_0x6da8cc;try{const _0x2079f1=await master_shop['find']();_0x275935[_0x44f284(0x153)](_0x44f284(0x13a),{'success':_0x45ff46[_0x44f284(0x161)]('success'),'errors':_0x45ff46[_0x44f284(0x161)](_0x44f284(0x16d)),'master_shop':_0x2079f1});}catch(_0x378539){console[_0x44f284(0x166)](_0x378539);}}),router[a0_0x6da8cc(0x164)](a0_0x6da8cc(0x13d),async(_0x41bdf0,_0x2677b5)=>{const _0x229be6=a0_0x6da8cc;try{const _0xccf7ef=await master_shop[_0x229be6(0x159)]();console['log'](_0x229be6(0x147),_0xccf7ef),_0x2677b5['render'](_0x229be6(0x144),{'success':_0x41bdf0[_0x229be6(0x161)](_0x229be6(0x151)),'errors':_0x41bdf0[_0x229be6(0x161)](_0x229be6(0x16d)),'master_shop':_0xccf7ef});}catch(_0x3f2240){console[_0x229be6(0x166)](_0x3f2240);}}),router['post']('/login',async(_0xd01e8a,_0x39cea4)=>{const _0x17fef6=a0_0x6da8cc;try{const _0x3216f5=_0xd01e8a[_0x17fef6(0x15a)][_0x17fef6(0x143)],_0x3a28ed=await sing_up['findOne']({'email':_0x3216f5});if(!_0x3a28ed)return _0xd01e8a[_0x17fef6(0x161)](_0x17fef6(0x16d),_0x17fef6(0x13f)),_0x39cea4[_0x17fef6(0x16f)](_0x17fef6(0x13d));var _0x52416c=_0x17fef6(0x14b);if(_0x3a28ed[_0x17fef6(0x150)]==_0x17fef6(0x16a)){const _0x42e6dc=await staff[_0x17fef6(0x157)]({'name':_0x3a28ed[_0x17fef6(0x13c)]});if(_0x42e6dc[_0x17fef6(0x146)]==_0x17fef6(0x16b))return _0xd01e8a[_0x17fef6(0x161)](_0x17fef6(0x16d),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x39cea4[_0x17fef6(0x16f)](_0x17fef6(0x13d));_0x52416c=_0x42e6dc[_0x17fef6(0x15e)];}const _0x5f5703=_0xd01e8a['body'][_0x17fef6(0x162)],_0x16b42e=await bcrypt[_0x17fef6(0x156)](_0x5f5703,_0x3a28ed[_0x17fef6(0x162)]);if(_0x16b42e==![])return _0xd01e8a[_0x17fef6(0x161)]('errors',_0x17fef6(0x145)),_0x39cea4[_0x17fef6(0x16f)](_0x17fef6(0x13d));const _0x107310=jwt[_0x17fef6(0x160)]({'username':_0x3a28ed[_0x17fef6(0x16e)],'email':_0x3a28ed[_0x17fef6(0x143)],'role':_0x3a28ed['role'],'warehouse_category':_0x52416c},process[_0x17fef6(0x14c)][_0x17fef6(0x158)]);_0x39cea4[_0x17fef6(0x140)](_0x17fef6(0x154),_0x107310,{'expires':new Date(0xe677d213a700)}),_0xd01e8a[_0x17fef6(0x161)](_0x17fef6(0x151),_0x17fef6(0x169)),_0x39cea4[_0x17fef6(0x16f)](_0x17fef6(0x155));}catch(_0x40f84f){console[_0x17fef6(0x166)](_0x40f84f);}}),router[a0_0x6da8cc(0x164)](a0_0x6da8cc(0x141),async(_0x561e49,_0x445868)=>{const _0x1a05f5=a0_0x6da8cc;try{const _0x31c5f7=_0x561e49[_0x1a05f5(0x15b)]['id'],_0x4db2c=await staff[_0x1a05f5(0x15f)]({'_id':_0x31c5f7});_0x4db2c[_0x1a05f5(0x146)]==_0x1a05f5(0x16b)&&(_0x561e49[_0x1a05f5(0x161)]('errors',_0x1a05f5(0x167)),_0x445868[_0x1a05f5(0x16f)](_0x1a05f5(0x14a)));const _0x58ab02=await sing_up[_0x1a05f5(0x157)]({'email':_0x4db2c[_0x1a05f5(0x143)]});var _0x1e65db=_0x1a05f5(0x14b);if(_0x58ab02[_0x1a05f5(0x150)]==_0x1a05f5(0x16a)){const _0x190d3c=await staff[_0x1a05f5(0x157)]({'name':_0x58ab02['name']});_0x1e65db=_0x190d3c[_0x1a05f5(0x15e)];}const _0x5f2ad6=jwt['sign']({'username':_0x58ab02[_0x1a05f5(0x16e)],'email':_0x58ab02[_0x1a05f5(0x143)],'role':_0x58ab02[_0x1a05f5(0x150)],'warehouse_category':_0x1e65db},process[_0x1a05f5(0x14c)][_0x1a05f5(0x158)]);_0x445868[_0x1a05f5(0x140)]('jwt',_0x5f2ad6,{'expires':new Date(0xe677d213a700)}),_0x561e49[_0x1a05f5(0x161)](_0x1a05f5(0x151),_0x1a05f5(0x169)),_0x445868[_0x1a05f5(0x16f)](_0x1a05f5(0x155));}catch(_0xfa9f6){console[_0x1a05f5(0x166)](_0xfa9f6);}}),router[a0_0x6da8cc(0x164)](a0_0x6da8cc(0x163),(_0x3126c9,_0x1baf16)=>{const _0x460f2a=a0_0x6da8cc;_0x1baf16['clearCookie'](_0x460f2a(0x154)),_0x1baf16[_0x460f2a(0x16f)](_0x460f2a(0x13d));}),module['exports']=router;