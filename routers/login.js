function a0_0x2d82(){const _0x2f08af=['166164FLPssL','bcryptjs','../middleware/auth','login\x20master','jwt','Router','secret_key','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','login\x20successfully','log','1874kIlLVV','errors','password','249212GVDgFD','your\x20password\x20is\x20wrong','57355mxIigJ','username','body','express','params','env','findOne','6YogAYf','find','flash','150jsXZbI','All','187bJNgao','login','cookie','35478GEjidZ','email','render','8480524wAjmSB','610zjxPmu','status','your\x20email\x20is\x20not\x20register','8MHHADy','name','exports','857YJkrzx','sign','/login','findById','2025758bKfUZR','validate','success','warehouse_category','compare','/staff/:id','staff','../models/all_models','/logout','get','redirect','Disabled','role','/index'];a0_0x2d82=function(){return _0x2f08af;};return a0_0x2d82();}const a0_0x51edc3=a0_0x7220;(function(_0xc426ac,_0x3fa49e){const _0xe1e205=a0_0x7220,_0x54d9f5=_0xc426ac();while(!![]){try{const _0x164c76=-parseInt(_0xe1e205(0x16e))/0x1*(parseInt(_0xe1e205(0x18a))/0x2)+parseInt(_0xe1e205(0x15c))/0x3*(parseInt(_0xe1e205(0x153))/0x4)+-parseInt(_0xe1e205(0x155))/0x5*(-parseInt(_0xe1e205(0x15f))/0x6)+-parseInt(_0xe1e205(0x172))/0x7*(parseInt(_0xe1e205(0x16b))/0x8)+parseInt(_0xe1e205(0x164))/0x9*(parseInt(_0xe1e205(0x168))/0xa)+-parseInt(_0xe1e205(0x161))/0xb*(-parseInt(_0xe1e205(0x180))/0xc)+parseInt(_0xe1e205(0x167))/0xd;if(_0x164c76===_0x3fa49e)break;else _0x54d9f5['push'](_0x54d9f5['shift']());}catch(_0x13d02b){_0x54d9f5['push'](_0x54d9f5['shift']());}}}(a0_0x2d82,0x6d2d3));const express=require(a0_0x51edc3(0x158)),app=express(),router=express[a0_0x51edc3(0x185)](),{sing_up,staff,profile,master_shop}=require(a0_0x51edc3(0x179)),bcrypt=require(a0_0x51edc3(0x181)),jwt=require('jsonwebtoken'),auth=require(a0_0x51edc3(0x182));function a0_0x7220(_0x2375cc,_0x44932e){const _0x2d826c=a0_0x2d82();return a0_0x7220=function(_0x722014,_0x3786a1){_0x722014=_0x722014-0x151;let _0x39940e=_0x2d826c[_0x722014];return _0x39940e;},a0_0x7220(_0x2375cc,_0x44932e);}router[a0_0x51edc3(0x17b)]('/',async(_0x4a91b5,_0x505ba1)=>{const _0x4f0c9b=a0_0x51edc3;try{const _0x2406f5=await master_shop[_0x4f0c9b(0x15d)]();_0x505ba1['render']('login',{'success':_0x4a91b5[_0x4f0c9b(0x15e)](_0x4f0c9b(0x174)),'errors':_0x4a91b5[_0x4f0c9b(0x15e)]('errors'),'master_shop':_0x2406f5});}catch(_0x2ca987){console[_0x4f0c9b(0x189)](_0x2ca987);}}),router[a0_0x51edc3(0x17b)]('/validate',async(_0x1b82f8,_0x1728e1)=>{const _0x4515f7=a0_0x51edc3;try{const _0xb3b10d=await master_shop[_0x4515f7(0x15d)]();_0x1728e1[_0x4515f7(0x166)](_0x4515f7(0x173),{'success':_0x1b82f8[_0x4515f7(0x15e)](_0x4515f7(0x174)),'errors':_0x1b82f8['flash'](_0x4515f7(0x151)),'master_shop':_0xb3b10d});}catch(_0x4b8f40){console[_0x4515f7(0x189)](_0x4b8f40);}}),router['get'](a0_0x51edc3(0x170),async(_0x31b5b0,_0x2c581e)=>{const _0x209877=a0_0x51edc3;try{const _0x10358f=await master_shop[_0x209877(0x15d)]();console['log'](_0x209877(0x183),_0x10358f),_0x2c581e[_0x209877(0x166)](_0x209877(0x162),{'success':_0x31b5b0[_0x209877(0x15e)]('success'),'errors':_0x31b5b0['flash']('errors'),'master_shop':_0x10358f});}catch(_0x1d5873){console[_0x209877(0x189)](_0x1d5873);}}),router['post'](a0_0x51edc3(0x170),async(_0x5e239f,_0x419700)=>{const _0x5612a3=a0_0x51edc3;try{const _0x58fa99=_0x5e239f[_0x5612a3(0x157)]['email'],_0x468528=await sing_up[_0x5612a3(0x15b)]({'email':_0x58fa99});if(!_0x468528)return _0x5e239f[_0x5612a3(0x15e)](_0x5612a3(0x151),_0x5612a3(0x16a)),_0x419700[_0x5612a3(0x17c)](_0x5612a3(0x170));var _0x5023b4=_0x5612a3(0x160);if(_0x468528[_0x5612a3(0x17e)]==_0x5612a3(0x178)){const _0x143665=await staff['findOne']({'name':_0x468528['name']});if(_0x143665[_0x5612a3(0x169)]==_0x5612a3(0x17d))return _0x5e239f['flash'](_0x5612a3(0x151),_0x5612a3(0x187)),_0x419700[_0x5612a3(0x17c)](_0x5612a3(0x170));_0x5023b4=_0x143665[_0x5612a3(0x175)];}const _0x5cdc35=_0x5e239f['body'][_0x5612a3(0x152)],_0x47f2a3=await bcrypt[_0x5612a3(0x176)](_0x5cdc35,_0x468528[_0x5612a3(0x152)]);if(_0x47f2a3==![])return _0x5e239f[_0x5612a3(0x15e)]('errors',_0x5612a3(0x154)),_0x419700[_0x5612a3(0x17c)](_0x5612a3(0x170));const _0xdf80d1=jwt[_0x5612a3(0x16f)]({'username':_0x468528[_0x5612a3(0x156)],'email':_0x468528[_0x5612a3(0x165)],'role':_0x468528['role'],'warehouse_category':_0x5023b4},process['env'][_0x5612a3(0x186)]);_0x419700[_0x5612a3(0x163)]('jwt',_0xdf80d1,{'expires':new Date(0xe677d213a700)}),_0x5e239f[_0x5612a3(0x15e)](_0x5612a3(0x174),_0x5612a3(0x188)),_0x419700[_0x5612a3(0x17c)](_0x5612a3(0x17f));}catch(_0x76a320){console['log'](_0x76a320);}}),router[a0_0x51edc3(0x17b)](a0_0x51edc3(0x177),async(_0x373984,_0xa2aba7)=>{const _0x264425=a0_0x51edc3;try{const _0x556cfe=_0x373984[_0x264425(0x159)]['id'],_0x40a2c5=await staff[_0x264425(0x171)]({'_id':_0x556cfe});_0x40a2c5[_0x264425(0x169)]==_0x264425(0x17d)&&(_0x373984[_0x264425(0x15e)]('errors',_0x264425(0x187)),_0xa2aba7[_0x264425(0x17c)]('/staff/view'));const _0x2727e6=await sing_up['findOne']({'email':_0x40a2c5[_0x264425(0x165)]});var _0x312d53=_0x264425(0x160);if(_0x2727e6[_0x264425(0x17e)]=='staff'){const _0x74d499=await staff['findOne']({'name':_0x2727e6[_0x264425(0x16c)]});_0x312d53=_0x74d499[_0x264425(0x175)];}const _0x604560=jwt['sign']({'username':_0x2727e6[_0x264425(0x156)],'email':_0x2727e6['email'],'role':_0x2727e6[_0x264425(0x17e)],'warehouse_category':_0x312d53},process[_0x264425(0x15a)][_0x264425(0x186)]);_0xa2aba7[_0x264425(0x163)](_0x264425(0x184),_0x604560,{'expires':new Date(0xe677d213a700)}),_0x373984['flash'](_0x264425(0x174),_0x264425(0x188)),_0xa2aba7[_0x264425(0x17c)]('/index');}catch(_0x2dbf87){console['log'](_0x2dbf87);}}),router[a0_0x51edc3(0x17b)](a0_0x51edc3(0x17a),(_0x309b40,_0x4f38ad)=>{const _0x5b7616=a0_0x51edc3;_0x4f38ad['clearCookie'](_0x5b7616(0x184)),_0x4f38ad[_0x5b7616(0x17c)](_0x5b7616(0x170));}),module[a0_0x51edc3(0x16d)]=router;