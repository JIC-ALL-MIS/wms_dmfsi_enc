const a0_0x40faf4=a0_0x467d;function a0_0x5299(){const _0x1717ea=['username','findOne','1354087iTMrAd','1471332SSeQbt','7857230nRXRWj','cookie','log','exports','render','login','jsonwebtoken','login\x20master','jwt','11eVxfIQ','warehouse_category','password','9EMjdml','login\x20successfully','clearCookie','get','/staff/view','../models/all_models','compare','3maqhsJ','5383448zAVbcY','errors','role','env','post','3322965qgidFp','findById','11038qiqFWk','validate','/index','redirect','find','flash','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','/logout','email','success','28bNESVa','secret_key','/login','params','2323452dizPjH','name','bcryptjs','body','express','your\x20email\x20is\x20not\x20register','staff','status'];a0_0x5299=function(){return _0x1717ea;};return a0_0x5299();}(function(_0x447292,_0x12c114){const _0x358656=a0_0x467d,_0x51f574=_0x447292();while(!![]){try{const _0x42de76=-parseInt(_0x358656(0x1f3))/0x1*(parseInt(_0x358656(0x1fd))/0x2)+-parseInt(_0x358656(0x1eb))/0x3*(parseInt(_0x358656(0x20c))/0x4)+-parseInt(_0x358656(0x1f1))/0x5+parseInt(_0x358656(0x201))/0x6+-parseInt(_0x358656(0x20b))/0x7+parseInt(_0x358656(0x1ec))/0x8*(parseInt(_0x358656(0x1e4))/0x9)+parseInt(_0x358656(0x20d))/0xa*(parseInt(_0x358656(0x1e1))/0xb);if(_0x42de76===_0x12c114)break;else _0x51f574['push'](_0x51f574['shift']());}catch(_0x5c0b54){_0x51f574['push'](_0x51f574['shift']());}}}(a0_0x5299,0x71a59));function a0_0x467d(_0xecaec8,_0x44b9ff){const _0x52999f=a0_0x5299();return a0_0x467d=function(_0x467ded,_0x1e49de){_0x467ded=_0x467ded-0x1de;let _0x59d9d5=_0x52999f[_0x467ded];return _0x59d9d5;},a0_0x467d(_0xecaec8,_0x44b9ff);}const express=require(a0_0x40faf4(0x205)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x40faf4(0x1e9)),bcrypt=require(a0_0x40faf4(0x203)),jwt=require(a0_0x40faf4(0x1de)),auth=require('../middleware/auth');router[a0_0x40faf4(0x1e7)]('/',async(_0x539f67,_0xd505e1)=>{const _0x536cd9=a0_0x40faf4;try{const _0x538e33=await master_shop[_0x536cd9(0x1f7)]();_0xd505e1[_0x536cd9(0x211)](_0x536cd9(0x212),{'success':_0x539f67[_0x536cd9(0x1f8)](_0x536cd9(0x1fc)),'errors':_0x539f67[_0x536cd9(0x1f8)](_0x536cd9(0x1ed)),'master_shop':_0x538e33});}catch(_0x48ea05){console['log'](_0x48ea05);}}),router['get']('/validate',async(_0x39415a,_0x1490d8)=>{const _0xb20786=a0_0x40faf4;try{const _0x1c3874=await master_shop[_0xb20786(0x1f7)]();_0x1490d8[_0xb20786(0x211)](_0xb20786(0x1f4),{'success':_0x39415a['flash']('success'),'errors':_0x39415a[_0xb20786(0x1f8)](_0xb20786(0x1ed)),'master_shop':_0x1c3874});}catch(_0x10623b){console[_0xb20786(0x20f)](_0x10623b);}}),router['get']('/login',async(_0x2374fe,_0x2c93d3)=>{const _0x43cd60=a0_0x40faf4;try{const _0x33f578=await master_shop['find']();console['log'](_0x43cd60(0x1df),_0x33f578),_0x2c93d3[_0x43cd60(0x211)](_0x43cd60(0x212),{'success':_0x2374fe[_0x43cd60(0x1f8)](_0x43cd60(0x1fc)),'errors':_0x2374fe[_0x43cd60(0x1f8)](_0x43cd60(0x1ed)),'master_shop':_0x33f578});}catch(_0x22f1ec){console[_0x43cd60(0x20f)](_0x22f1ec);}}),router[a0_0x40faf4(0x1f0)](a0_0x40faf4(0x1ff),async(_0x4642f6,_0x484a3d)=>{const _0x2e9568=a0_0x40faf4;try{const _0x4d4261=_0x4642f6[_0x2e9568(0x204)][_0x2e9568(0x1fb)],_0x393fd9=await sing_up[_0x2e9568(0x20a)]({'email':_0x4d4261});if(!_0x393fd9)return _0x4642f6[_0x2e9568(0x1f8)](_0x2e9568(0x1ed),_0x2e9568(0x206)),_0x484a3d[_0x2e9568(0x1f6)]('/login');const _0xeed020=await staff['findOne']({'email':_0x393fd9[_0x2e9568(0x1fb)]});var _0x34624c=_0xeed020[_0x2e9568(0x1e2)];if(_0x393fd9[_0x2e9568(0x1ee)]==_0x2e9568(0x207)){const _0x3b0847=await staff[_0x2e9568(0x20a)]({'email':_0x393fd9[_0x2e9568(0x1fb)]});if(_0x3b0847[_0x2e9568(0x208)]=='Disabled')return _0x4642f6['flash']('errors',_0x2e9568(0x1f9)),_0x484a3d[_0x2e9568(0x1f6)](_0x2e9568(0x1ff));_0x34624c=_0x3b0847['warehouse_category'];}const _0x3bf5b4=_0x4642f6[_0x2e9568(0x204)][_0x2e9568(0x1e3)],_0x5b20f3=await bcrypt[_0x2e9568(0x1ea)](_0x3bf5b4,_0x393fd9[_0x2e9568(0x1e3)]);if(_0x5b20f3==![])return _0x4642f6['flash'](_0x2e9568(0x1ed),'your\x20password\x20is\x20wrong'),_0x484a3d[_0x2e9568(0x1f6)]('/login');const _0x47929c=jwt['sign']({'username':_0x393fd9[_0x2e9568(0x209)],'email':_0x393fd9[_0x2e9568(0x1fb)],'role':_0x393fd9[_0x2e9568(0x1ee)],'warehouse_category':_0x34624c},process[_0x2e9568(0x1ef)][_0x2e9568(0x1fe)]);_0x484a3d['cookie'](_0x2e9568(0x1e0),_0x47929c,{'expires':new Date(0xe677d213a700)}),_0x4642f6[_0x2e9568(0x1f8)](_0x2e9568(0x1fc),'login\x20successfully'),_0x484a3d[_0x2e9568(0x1f6)](_0x2e9568(0x1f5));}catch(_0x4ac438){console[_0x2e9568(0x20f)](_0x4ac438);}}),router[a0_0x40faf4(0x1e7)]('/staff/:id',async(_0x4675f4,_0x16b751)=>{const _0x146500=a0_0x40faf4;try{const _0x26d6a9=_0x4675f4[_0x146500(0x200)]['id'],_0x2df06c=await staff[_0x146500(0x1f2)]({'_id':_0x26d6a9});_0x2df06c[_0x146500(0x208)]=='Disabled'&&(_0x4675f4['flash'](_0x146500(0x1ed),_0x146500(0x1f9)),_0x16b751[_0x146500(0x1f6)](_0x146500(0x1e8)));const _0x2c34be=await sing_up['findOne']({'email':_0x2df06c[_0x146500(0x1fb)]});var _0x2e9f8e=_0x2df06c[_0x146500(0x1e2)];if(_0x2c34be[_0x146500(0x1ee)]==_0x146500(0x207)){const _0x11e810=await staff[_0x146500(0x20a)]({'name':_0x2c34be[_0x146500(0x202)]});_0x2e9f8e=_0x11e810[_0x146500(0x1e2)];}const _0x3af2b7=jwt['sign']({'username':_0x2c34be[_0x146500(0x209)],'email':_0x2c34be[_0x146500(0x1fb)],'role':_0x2c34be[_0x146500(0x1ee)],'warehouse_category':_0x2e9f8e},process[_0x146500(0x1ef)][_0x146500(0x1fe)]);_0x16b751[_0x146500(0x20e)]('jwt',_0x3af2b7,{'expires':new Date(0xe677d213a700)}),_0x4675f4[_0x146500(0x1f8)](_0x146500(0x1fc),_0x146500(0x1e5)),_0x16b751[_0x146500(0x1f6)](_0x146500(0x1f5));}catch(_0x30fed0){console['log'](_0x30fed0);}}),router['get'](a0_0x40faf4(0x1fa),(_0x46d7fb,_0x10b4cd)=>{const _0x5c442e=a0_0x40faf4;_0x10b4cd[_0x5c442e(0x1e6)]('jwt'),_0x10b4cd[_0x5c442e(0x1f6)](_0x5c442e(0x1ff));}),module[a0_0x40faf4(0x210)]=router;