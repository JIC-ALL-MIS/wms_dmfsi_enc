function a0_0x4abb(){const _0x1d3df8=['errors','log','params','8kHxqNp','../middleware/auth','exports','Disabled','bcryptjs','compare','express','/staff/view','staff','2805110gjhUlP','2332lTtPkB','cookie','findOne','739670OQKJSZ','render','30564PYvMyt','password','flash','367359uGknVd','../models/all_models','success','find','email','secret_key','get','jwt','158005clFRzg','/index','1539630LyEJAq','findById','warehouse_category','validate','status','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','18eRfCDd','/validate','1686gfOVgk','env','/logout','role','2372NSIYlC','sign','/staff/:id','clearCookie','your\x20password\x20is\x20wrong','login','login\x20successfully','/login','jsonwebtoken','post','redirect','name','Router','2kqyUXd'];a0_0x4abb=function(){return _0x1d3df8;};return a0_0x4abb();}const a0_0xfb1d34=a0_0x798f;function a0_0x798f(_0x565809,_0x45adc0){const _0x4abb05=a0_0x4abb();return a0_0x798f=function(_0x798f2b,_0x200af2){_0x798f2b=_0x798f2b-0x186;let _0x3193df=_0x4abb05[_0x798f2b];return _0x3193df;},a0_0x798f(_0x565809,_0x45adc0);}(function(_0x56cf5e,_0x4be939){const _0x5305a2=a0_0x798f,_0x549d03=_0x56cf5e();while(!![]){try{const _0x25fce2=parseInt(_0x5305a2(0x198))/0x1*(-parseInt(_0x5305a2(0x1bb))/0x2)+-parseInt(_0x5305a2(0x1aa))/0x3*(parseInt(_0x5305a2(0x1ae))/0x4)+-parseInt(_0x5305a2(0x1a0))/0x5*(parseInt(_0x5305a2(0x1a8))/0x6)+parseInt(_0x5305a2(0x18f))/0x7+-parseInt(_0x5305a2(0x186))/0x8*(-parseInt(_0x5305a2(0x1a2))/0x9)+-parseInt(_0x5305a2(0x193))/0xa+-parseInt(_0x5305a2(0x190))/0xb*(-parseInt(_0x5305a2(0x195))/0xc);if(_0x25fce2===_0x4be939)break;else _0x549d03['push'](_0x549d03['shift']());}catch(_0x3ce01a){_0x549d03['push'](_0x549d03['shift']());}}}(a0_0x4abb,0x3b2c1));const express=require(a0_0xfb1d34(0x18c)),app=express(),router=express[a0_0xfb1d34(0x1ba)](),{sing_up,staff,profile,master_shop}=require(a0_0xfb1d34(0x199)),bcrypt=require(a0_0xfb1d34(0x18a)),jwt=require(a0_0xfb1d34(0x1b6)),auth=require(a0_0xfb1d34(0x187));router['get']('/',async(_0x501cd5,_0x7193ba)=>{const _0x539820=a0_0xfb1d34;try{const _0x161680=await master_shop[_0x539820(0x19b)]();_0x7193ba[_0x539820(0x194)](_0x539820(0x1b3),{'success':_0x501cd5['flash'](_0x539820(0x19a)),'errors':_0x501cd5[_0x539820(0x197)](_0x539820(0x1bc)),'master_shop':_0x161680});}catch(_0x79c2c9){console['log'](_0x79c2c9);}}),router[a0_0xfb1d34(0x19e)](a0_0xfb1d34(0x1a9),async(_0x229593,_0x5a4420)=>{const _0x45ff03=a0_0xfb1d34;try{const _0x48ba10=await master_shop[_0x45ff03(0x19b)]();_0x5a4420[_0x45ff03(0x194)](_0x45ff03(0x1a5),{'success':_0x229593[_0x45ff03(0x197)](_0x45ff03(0x19a)),'errors':_0x229593[_0x45ff03(0x197)]('errors'),'master_shop':_0x48ba10});}catch(_0x140a0a){console[_0x45ff03(0x1bd)](_0x140a0a);}}),router[a0_0xfb1d34(0x19e)](a0_0xfb1d34(0x1b5),async(_0x233cc9,_0x2d0d24)=>{const _0x455094=a0_0xfb1d34;try{const _0x14d2c3=await master_shop['find']();console[_0x455094(0x1bd)]('login\x20master',_0x14d2c3),_0x2d0d24[_0x455094(0x194)]('login',{'success':_0x233cc9[_0x455094(0x197)](_0x455094(0x19a)),'errors':_0x233cc9['flash'](_0x455094(0x1bc)),'master_shop':_0x14d2c3});}catch(_0x3bec21){console[_0x455094(0x1bd)](_0x3bec21);}}),router[a0_0xfb1d34(0x1b7)]('/login',async(_0x5efbce,_0x1217ac)=>{const _0x58b0d8=a0_0xfb1d34;try{const _0x2db335=_0x5efbce['body'][_0x58b0d8(0x19c)],_0x227654=await sing_up['findOne']({'email':_0x2db335});if(!_0x227654)return _0x5efbce[_0x58b0d8(0x197)](_0x58b0d8(0x1bc),'your\x20email\x20is\x20not\x20register'),_0x1217ac['redirect']('/login');const _0x3cabc7=await staff[_0x58b0d8(0x192)]({'email':_0x227654[_0x58b0d8(0x19c)]});var _0x3b8ed1=_0x3cabc7[_0x58b0d8(0x1a4)];if(_0x227654[_0x58b0d8(0x1ad)]==_0x58b0d8(0x18e)){const _0x199f9b=await staff[_0x58b0d8(0x192)]({'email':_0x227654['email']});if(_0x199f9b[_0x58b0d8(0x1a6)]==_0x58b0d8(0x189))return _0x5efbce[_0x58b0d8(0x197)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x1217ac[_0x58b0d8(0x1b8)](_0x58b0d8(0x1b5));_0x3b8ed1=_0x199f9b[_0x58b0d8(0x1a4)];}const _0x46d09d=_0x5efbce['body'][_0x58b0d8(0x196)],_0x195077=await bcrypt[_0x58b0d8(0x18b)](_0x46d09d,_0x227654[_0x58b0d8(0x196)]);if(_0x195077==![])return _0x5efbce[_0x58b0d8(0x197)](_0x58b0d8(0x1bc),_0x58b0d8(0x1b2)),_0x1217ac[_0x58b0d8(0x1b8)](_0x58b0d8(0x1b5));const _0x5c1db5=jwt[_0x58b0d8(0x1af)]({'username':_0x227654['username'],'email':_0x227654['email'],'role':_0x227654[_0x58b0d8(0x1ad)],'warehouse_category':_0x3b8ed1},process['env'][_0x58b0d8(0x19d)]);_0x1217ac[_0x58b0d8(0x191)](_0x58b0d8(0x19f),_0x5c1db5,{'expires':new Date(0xe677d213a700)}),_0x5efbce['flash'](_0x58b0d8(0x19a),_0x58b0d8(0x1b4)),_0x1217ac[_0x58b0d8(0x1b8)](_0x58b0d8(0x1a1));}catch(_0x4ebda7){console[_0x58b0d8(0x1bd)](_0x4ebda7);}}),router['get'](a0_0xfb1d34(0x1b0),async(_0x10bbf5,_0x29b67c)=>{const _0x19fc4b=a0_0xfb1d34;try{const _0x48595e=_0x10bbf5[_0x19fc4b(0x1be)]['id'],_0x482280=await staff[_0x19fc4b(0x1a3)]({'_id':_0x48595e});_0x482280[_0x19fc4b(0x1a6)]==_0x19fc4b(0x189)&&(_0x10bbf5['flash']('errors',_0x19fc4b(0x1a7)),_0x29b67c[_0x19fc4b(0x1b8)](_0x19fc4b(0x18d)));const _0x48b238=await sing_up[_0x19fc4b(0x192)]({'email':_0x482280['email']});var _0x13ddde=_0x482280[_0x19fc4b(0x1a4)];if(_0x48b238[_0x19fc4b(0x1ad)]=='staff'){const _0x16814e=await staff[_0x19fc4b(0x192)]({'name':_0x48b238[_0x19fc4b(0x1b9)]});_0x13ddde=_0x16814e[_0x19fc4b(0x1a4)];}const _0x253f2d=jwt['sign']({'username':_0x48b238['username'],'email':_0x48b238[_0x19fc4b(0x19c)],'role':_0x48b238[_0x19fc4b(0x1ad)],'warehouse_category':_0x13ddde},process[_0x19fc4b(0x1ab)]['secret_key']);_0x29b67c[_0x19fc4b(0x191)](_0x19fc4b(0x19f),_0x253f2d,{'expires':new Date(0xe677d213a700)}),_0x10bbf5[_0x19fc4b(0x197)]('success','login\x20successfully'),_0x29b67c[_0x19fc4b(0x1b8)](_0x19fc4b(0x1a1));}catch(_0x261704){console[_0x19fc4b(0x1bd)](_0x261704);}}),router['get'](a0_0xfb1d34(0x1ac),(_0x3962c6,_0x2f8773)=>{const _0x25ee6a=a0_0xfb1d34;_0x2f8773[_0x25ee6a(0x1b1)]('jwt'),_0x2f8773['redirect']('/login');}),module[a0_0xfb1d34(0x188)]=router;