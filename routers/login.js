const a0_0x53b6f8=a0_0x54e8;(function(_0x4c013c,_0x39070d){const _0x57dd56=a0_0x54e8,_0x2a0e8b=_0x4c013c();while(!![]){try{const _0x509ee9=-parseInt(_0x57dd56(0x171))/0x1+parseInt(_0x57dd56(0x15b))/0x2*(-parseInt(_0x57dd56(0x16e))/0x3)+-parseInt(_0x57dd56(0x179))/0x4*(parseInt(_0x57dd56(0x170))/0x5)+-parseInt(_0x57dd56(0x164))/0x6*(-parseInt(_0x57dd56(0x16a))/0x7)+parseInt(_0x57dd56(0x16d))/0x8*(parseInt(_0x57dd56(0x17e))/0x9)+-parseInt(_0x57dd56(0x161))/0xa+-parseInt(_0x57dd56(0x17c))/0xb*(-parseInt(_0x57dd56(0x151))/0xc);if(_0x509ee9===_0x39070d)break;else _0x2a0e8b['push'](_0x2a0e8b['shift']());}catch(_0x344bb6){_0x2a0e8b['push'](_0x2a0e8b['shift']());}}}(a0_0x585f,0x379d3));const express=require(a0_0x53b6f8(0x153)),app=express(),router=express[a0_0x53b6f8(0x15f)](),{sing_up,staff,profile,master_shop}=require(a0_0x53b6f8(0x17f)),bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),auth=require(a0_0x53b6f8(0x15c));function a0_0x585f(){const _0x2908dc=['errors','20VHHcBc','username','secret_key','4704689UYlQvS','email','2596599SCIZut','../models/all_models','render','success','staff','12IfKHTG','/validate','express','redirect','find','login','/logout','cookie','findOne','name','142EAIQKA','../middleware/auth','clearCookie','jwt','Router','status','1718680pRdtXp','log','compare','2329524ZIwCus','env','your\x20email\x20is\x20not\x20register','sign','get','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','7NBjaGW','role','/login','8SztddV','10011QYnzKX','login\x20successfully','120155UTYEPq','347719haHMbk','warehouse_category','password','/staff/view','/index','flash','post'];a0_0x585f=function(){return _0x2908dc;};return a0_0x585f();}function a0_0x54e8(_0x1244bc,_0x17de86){const _0x585f08=a0_0x585f();return a0_0x54e8=function(_0x54e89f,_0x2d95dd){_0x54e89f=_0x54e89f-0x14e;let _0xe7c0bc=_0x585f08[_0x54e89f];return _0xe7c0bc;},a0_0x54e8(_0x1244bc,_0x17de86);}router[a0_0x53b6f8(0x168)]('/',async(_0x1db440,_0x3542)=>{const _0x5c02a2=a0_0x53b6f8;try{const _0x134411=await master_shop['find']();_0x3542[_0x5c02a2(0x14e)]('login',{'success':_0x1db440['flash'](_0x5c02a2(0x14f)),'errors':_0x1db440[_0x5c02a2(0x176)](_0x5c02a2(0x178)),'master_shop':_0x134411});}catch(_0x54034e){console[_0x5c02a2(0x162)](_0x54034e);}}),router[a0_0x53b6f8(0x168)](a0_0x53b6f8(0x152),async(_0x121fed,_0xc77f60)=>{const _0x4f33b2=a0_0x53b6f8;try{const _0x36cd1a=await master_shop[_0x4f33b2(0x155)]();_0xc77f60[_0x4f33b2(0x14e)]('validate',{'success':_0x121fed[_0x4f33b2(0x176)]('success'),'errors':_0x121fed[_0x4f33b2(0x176)](_0x4f33b2(0x178)),'master_shop':_0x36cd1a});}catch(_0x153b9f){console[_0x4f33b2(0x162)](_0x153b9f);}}),router[a0_0x53b6f8(0x168)](a0_0x53b6f8(0x16c),async(_0x4b6e97,_0x433d80)=>{const _0x516bf9=a0_0x53b6f8;try{const _0x3f32e3=await master_shop[_0x516bf9(0x155)]();console[_0x516bf9(0x162)]('login\x20master',_0x3f32e3),_0x433d80['render'](_0x516bf9(0x156),{'success':_0x4b6e97[_0x516bf9(0x176)](_0x516bf9(0x14f)),'errors':_0x4b6e97[_0x516bf9(0x176)](_0x516bf9(0x178)),'master_shop':_0x3f32e3});}catch(_0x4bf637){console[_0x516bf9(0x162)](_0x4bf637);}}),router[a0_0x53b6f8(0x177)]('/login',async(_0x32e286,_0x3abe64)=>{const _0x4e4537=a0_0x53b6f8;try{const _0x7f109e=_0x32e286['body'][_0x4e4537(0x17d)],_0x4109e8=await sing_up[_0x4e4537(0x159)]({'email':_0x7f109e});if(!_0x4109e8)return _0x32e286['flash']('errors',_0x4e4537(0x166)),_0x3abe64[_0x4e4537(0x154)](_0x4e4537(0x16c));const _0x2adcdf=await staff['findOne']({'email':_0x4109e8[_0x4e4537(0x17d)]});var _0x1667f9=_0x2adcdf[_0x4e4537(0x172)];if(_0x4109e8[_0x4e4537(0x16b)]==_0x4e4537(0x150)){const _0x1a95d0=await staff[_0x4e4537(0x159)]({'email':_0x4109e8[_0x4e4537(0x17d)]});if(_0x1a95d0[_0x4e4537(0x160)]=='Disabled')return _0x32e286[_0x4e4537(0x176)](_0x4e4537(0x178),_0x4e4537(0x169)),_0x3abe64['redirect'](_0x4e4537(0x16c));_0x1667f9=_0x1a95d0[_0x4e4537(0x172)];}const _0x31fc68=_0x32e286['body'][_0x4e4537(0x173)],_0x35cb58=await bcrypt[_0x4e4537(0x163)](_0x31fc68,_0x4109e8[_0x4e4537(0x173)]);if(_0x35cb58==![])return _0x32e286['flash'](_0x4e4537(0x178),'your\x20password\x20is\x20wrong'),_0x3abe64['redirect'](_0x4e4537(0x16c));const _0x31657e=jwt[_0x4e4537(0x167)]({'username':_0x4109e8[_0x4e4537(0x17a)],'email':_0x4109e8[_0x4e4537(0x17d)],'role':_0x4109e8['role'],'warehouse_category':_0x1667f9},process[_0x4e4537(0x165)][_0x4e4537(0x17b)]);_0x3abe64[_0x4e4537(0x158)](_0x4e4537(0x15e),_0x31657e,{'expires':new Date(0xe677d213a700)}),_0x32e286[_0x4e4537(0x176)](_0x4e4537(0x14f),_0x4e4537(0x16f)),_0x3abe64[_0x4e4537(0x154)](_0x4e4537(0x175));}catch(_0x10ff46){console[_0x4e4537(0x162)](_0x10ff46);}}),router['get']('/staff/:id',async(_0x4fb206,_0x12e4cc)=>{const _0x31c7c4=a0_0x53b6f8;try{const _0x9fa499=_0x4fb206['params']['id'],_0x3bf565=await staff['findById']({'_id':_0x9fa499});_0x3bf565['status']=='Disabled'&&(_0x4fb206['flash'](_0x31c7c4(0x178),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x12e4cc['redirect'](_0x31c7c4(0x174)));const _0x28e825=await sing_up[_0x31c7c4(0x159)]({'email':_0x3bf565[_0x31c7c4(0x17d)]});var _0x97d67=_0x3bf565[_0x31c7c4(0x172)];if(_0x28e825['role']=='staff'){const _0x42a2fa=await staff[_0x31c7c4(0x159)]({'name':_0x28e825[_0x31c7c4(0x15a)]});_0x97d67=_0x42a2fa[_0x31c7c4(0x172)];}const _0x499e96=jwt[_0x31c7c4(0x167)]({'username':_0x28e825['username'],'email':_0x28e825['email'],'role':_0x28e825[_0x31c7c4(0x16b)],'warehouse_category':_0x97d67},process[_0x31c7c4(0x165)][_0x31c7c4(0x17b)]);_0x12e4cc[_0x31c7c4(0x158)](_0x31c7c4(0x15e),_0x499e96,{'expires':new Date(0xe677d213a700)}),_0x4fb206['flash'](_0x31c7c4(0x14f),_0x31c7c4(0x16f)),_0x12e4cc['redirect'](_0x31c7c4(0x175));}catch(_0x548570){console['log'](_0x548570);}}),router[a0_0x53b6f8(0x168)](a0_0x53b6f8(0x157),(_0x135a8a,_0x5303b7)=>{const _0x277fc6=a0_0x53b6f8;_0x5303b7[_0x277fc6(0x15d)]('jwt'),_0x5303b7[_0x277fc6(0x154)](_0x277fc6(0x16c));}),module['exports']=router;