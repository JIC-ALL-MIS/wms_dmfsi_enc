const a0_0x5110c7=a0_0x56be;function a0_0x56be(_0x26ac2e,_0x1cb71b){const _0x51f449=a0_0x51f4();return a0_0x56be=function(_0x56be99,_0x3e7a06){_0x56be99=_0x56be99-0xb2;let _0x3ecbca=_0x51f449[_0x56be99];return _0x3ecbca;},a0_0x56be(_0x26ac2e,_0x1cb71b);}function a0_0x51f4(){const _0x1ef229=['/validate','../middleware/auth','jwt','3537744SyxqOV','2854215lXEOJL','express','4HjuZyi','staff','jsonwebtoken','name','findOne','/index','find','6642189kEJTYK','redirect','email','status','login\x20successfully','render','body','28050rFTJRh','44779QCIzEu','log','findById','login','flash','../models/all_models','293106FLBPbd','post','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','/logout','params','errors','sign','/staff/view','secret_key','validate','password','get','your\x20password\x20is\x20wrong','bcryptjs','username','clearCookie','824zkHGfZ','930314SpXdYD','exports','compare','/login','warehouse_category','your\x20email\x20is\x20not\x20register','/staff/:id','success','cookie','Disabled','role'];a0_0x51f4=function(){return _0x1ef229;};return a0_0x51f4();}(function(_0x551f7d,_0x529da3){const _0x3f98fe=a0_0x56be,_0x4764b0=_0x551f7d();while(!![]){try{const _0x332ffe=-parseInt(_0x3f98fe(0xcc))/0x1+parseInt(_0x3f98fe(0xe4))/0x2+-parseInt(_0x3f98fe(0xd3))/0x3*(-parseInt(_0x3f98fe(0xbe))/0x4)+-parseInt(_0x3f98fe(0xbc))/0x5+parseInt(_0x3f98fe(0xbb))/0x6+-parseInt(_0x3f98fe(0xcd))/0x7*(-parseInt(_0x3f98fe(0xe3))/0x8)+-parseInt(_0x3f98fe(0xc5))/0x9;if(_0x332ffe===_0x529da3)break;else _0x4764b0['push'](_0x4764b0['shift']());}catch(_0x49355b){_0x4764b0['push'](_0x4764b0['shift']());}}}(a0_0x51f4,0x73d5c));const express=require(a0_0x5110c7(0xbd)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x5110c7(0xd2)),bcrypt=require(a0_0x5110c7(0xe0)),jwt=require(a0_0x5110c7(0xc0)),auth=require(a0_0x5110c7(0xb9));router[a0_0x5110c7(0xde)]('/',async(_0x1121ef,_0x2e7b40)=>{const _0x443af2=a0_0x5110c7;try{const _0x4a631a=await master_shop['find']();_0x2e7b40['render'](_0x443af2(0xd0),{'success':_0x1121ef['flash'](_0x443af2(0xb4)),'errors':_0x1121ef[_0x443af2(0xd1)](_0x443af2(0xd8)),'master_shop':_0x4a631a});}catch(_0x4010bc){console['log'](_0x4010bc);}}),router[a0_0x5110c7(0xde)](a0_0x5110c7(0xb8),async(_0x310454,_0x40fc10)=>{const _0x35c277=a0_0x5110c7;try{const _0x5cf864=await master_shop[_0x35c277(0xc4)]();_0x40fc10[_0x35c277(0xca)](_0x35c277(0xdc),{'success':_0x310454[_0x35c277(0xd1)](_0x35c277(0xb4)),'errors':_0x310454[_0x35c277(0xd1)](_0x35c277(0xd8)),'master_shop':_0x5cf864});}catch(_0x14e603){console[_0x35c277(0xce)](_0x14e603);}}),router[a0_0x5110c7(0xde)](a0_0x5110c7(0xe7),async(_0x475f59,_0x5213ae)=>{const _0x9a54d8=a0_0x5110c7;try{const _0x37e2e9=await master_shop[_0x9a54d8(0xc4)]();console[_0x9a54d8(0xce)]('login\x20master',_0x37e2e9),_0x5213ae[_0x9a54d8(0xca)]('login',{'success':_0x475f59[_0x9a54d8(0xd1)]('success'),'errors':_0x475f59[_0x9a54d8(0xd1)](_0x9a54d8(0xd8)),'master_shop':_0x37e2e9});}catch(_0x20f8c1){console[_0x9a54d8(0xce)](_0x20f8c1);}}),router[a0_0x5110c7(0xd4)]('/login',async(_0x4143e9,_0x10e2f6)=>{const _0x2f25ff=a0_0x5110c7;try{const _0x345666=_0x4143e9[_0x2f25ff(0xcb)][_0x2f25ff(0xc7)],_0x401083=await sing_up[_0x2f25ff(0xc2)]({'email':_0x345666});if(!_0x401083)return _0x4143e9['flash'](_0x2f25ff(0xd8),_0x2f25ff(0xb2)),_0x10e2f6[_0x2f25ff(0xc6)](_0x2f25ff(0xe7));const _0x45320d=await staff['findOne']({'email':_0x401083[_0x2f25ff(0xc7)]});var _0x352e80=_0x45320d[_0x2f25ff(0xe8)];if(_0x401083['role']==_0x2f25ff(0xbf)){const _0x57ce9d=await staff[_0x2f25ff(0xc2)]({'email':_0x401083[_0x2f25ff(0xc7)]});if(_0x57ce9d[_0x2f25ff(0xc8)]=='Disabled')return _0x4143e9[_0x2f25ff(0xd1)](_0x2f25ff(0xd8),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x10e2f6['redirect'](_0x2f25ff(0xe7));_0x352e80=_0x57ce9d[_0x2f25ff(0xe8)];}const _0x3a9b14=_0x4143e9[_0x2f25ff(0xcb)][_0x2f25ff(0xdd)],_0x32b039=await bcrypt[_0x2f25ff(0xe6)](_0x3a9b14,_0x401083[_0x2f25ff(0xdd)]);if(_0x32b039==![])return _0x4143e9['flash'](_0x2f25ff(0xd8),_0x2f25ff(0xdf)),_0x10e2f6[_0x2f25ff(0xc6)](_0x2f25ff(0xe7));const _0x3fda08=jwt[_0x2f25ff(0xd9)]({'username':_0x401083['username'],'email':_0x401083[_0x2f25ff(0xc7)],'role':_0x401083[_0x2f25ff(0xb7)],'warehouse_category':_0x352e80},process['env'][_0x2f25ff(0xdb)]);_0x10e2f6[_0x2f25ff(0xb5)](_0x2f25ff(0xba),_0x3fda08,{'expires':new Date(0xe677d213a700)}),_0x4143e9[_0x2f25ff(0xd1)](_0x2f25ff(0xb4),_0x2f25ff(0xc9)),_0x10e2f6[_0x2f25ff(0xc6)](_0x2f25ff(0xc3));}catch(_0x38f5e8){console[_0x2f25ff(0xce)](_0x38f5e8);}}),router['get'](a0_0x5110c7(0xb3),async(_0x30d0af,_0x3f4f4f)=>{const _0x4e0416=a0_0x5110c7;try{const _0x1b0924=_0x30d0af[_0x4e0416(0xd7)]['id'],_0x585ca6=await staff[_0x4e0416(0xcf)]({'_id':_0x1b0924});_0x585ca6['status']==_0x4e0416(0xb6)&&(_0x30d0af[_0x4e0416(0xd1)](_0x4e0416(0xd8),_0x4e0416(0xd5)),_0x3f4f4f[_0x4e0416(0xc6)](_0x4e0416(0xda)));const _0x42afa6=await sing_up[_0x4e0416(0xc2)]({'email':_0x585ca6['email']});var _0x340659=_0x585ca6[_0x4e0416(0xe8)];if(_0x42afa6[_0x4e0416(0xb7)]==_0x4e0416(0xbf)){const _0x271a17=await staff['findOne']({'name':_0x42afa6[_0x4e0416(0xc1)]});_0x340659=_0x271a17[_0x4e0416(0xe8)];}const _0x38e968=jwt[_0x4e0416(0xd9)]({'username':_0x42afa6[_0x4e0416(0xe1)],'email':_0x42afa6['email'],'role':_0x42afa6[_0x4e0416(0xb7)],'warehouse_category':_0x340659},process['env'][_0x4e0416(0xdb)]);_0x3f4f4f[_0x4e0416(0xb5)](_0x4e0416(0xba),_0x38e968,{'expires':new Date(0xe677d213a700)}),_0x30d0af['flash'](_0x4e0416(0xb4),_0x4e0416(0xc9)),_0x3f4f4f[_0x4e0416(0xc6)](_0x4e0416(0xc3));}catch(_0x42f9a7){console[_0x4e0416(0xce)](_0x42f9a7);}}),router['get'](a0_0x5110c7(0xd6),(_0x5d5491,_0x3aad76)=>{const _0x1a44e6=a0_0x5110c7;_0x3aad76[_0x1a44e6(0xe2)](_0x1a44e6(0xba)),_0x3aad76[_0x1a44e6(0xc6)](_0x1a44e6(0xe7));}),module[a0_0x5110c7(0xe5)]=router;