const a0_0x123194=a0_0x4363;(function(_0x3a9301,_0xd548a5){const _0x3de90a=a0_0x4363,_0x4bd896=_0x3a9301();while(!![]){try{const _0x55f7fd=-parseInt(_0x3de90a(0x190))/0x1*(-parseInt(_0x3de90a(0x19f))/0x2)+-parseInt(_0x3de90a(0x1a8))/0x3+-parseInt(_0x3de90a(0x174))/0x4*(-parseInt(_0x3de90a(0x17e))/0x5)+-parseInt(_0x3de90a(0x198))/0x6+parseInt(_0x3de90a(0x179))/0x7*(parseInt(_0x3de90a(0x17a))/0x8)+-parseInt(_0x3de90a(0x18a))/0x9*(-parseInt(_0x3de90a(0x1a9))/0xa)+parseInt(_0x3de90a(0x184))/0xb*(-parseInt(_0x3de90a(0x17d))/0xc);if(_0x55f7fd===_0xd548a5)break;else _0x4bd896['push'](_0x4bd896['shift']());}catch(_0x4f2070){_0x4bd896['push'](_0x4bd896['shift']());}}}(a0_0x1418,0x88796));function a0_0x1418(){const _0x5b8281=['redirect','get','/staff/:id','325294HVYMOn','body','staff','clearCookie','secret_key','login\x20master','params','env','6337482rdTeHm','Router','compare','../models/all_models','find','login','/login','4vOcSxh','flash','role','findOne','username','validate','email','findById','/staff/view','2481150WWImfo','213670tnaQwd','your\x20email\x20is\x20not\x20register','login\x20successfully','8zlwHEs','jwt','log','express','success','334733cpzovn','120PilWLx','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','/validate','2172lecSQq','2319830kGNrfv','/logout','post','exports','errors','render','52129rFsNwV','jsonwebtoken','Disabled','status','/index','../middleware/auth','423gdTsWQ','warehouse_category','bcryptjs'];a0_0x1418=function(){return _0x5b8281;};return a0_0x1418();}const express=require(a0_0x123194(0x177)),app=express(),router=express[a0_0x123194(0x199)](),{sing_up,staff,profile,master_shop}=require(a0_0x123194(0x19b)),bcrypt=require(a0_0x123194(0x18c)),jwt=require(a0_0x123194(0x185)),auth=require(a0_0x123194(0x189));function a0_0x4363(_0x2ce2d0,_0x23144e){const _0x1418b0=a0_0x1418();return a0_0x4363=function(_0x4363e4,_0xed330b){_0x4363e4=_0x4363e4-0x172;let _0x1cfc8f=_0x1418b0[_0x4363e4];return _0x1cfc8f;},a0_0x4363(_0x2ce2d0,_0x23144e);}router[a0_0x123194(0x18e)]('/',async(_0x514b63,_0xb619d5)=>{const _0x400ead=a0_0x123194;try{const _0x42b45c=await master_shop[_0x400ead(0x19c)]();_0xb619d5[_0x400ead(0x183)](_0x400ead(0x19d),{'success':_0x514b63[_0x400ead(0x1a0)](_0x400ead(0x178)),'errors':_0x514b63[_0x400ead(0x1a0)](_0x400ead(0x182)),'master_shop':_0x42b45c});}catch(_0x3eb40b){console[_0x400ead(0x176)](_0x3eb40b);}}),router['get'](a0_0x123194(0x17c),async(_0x55e97a,_0x2e3707)=>{const _0x4e3d62=a0_0x123194;try{const _0x52b6a0=await master_shop[_0x4e3d62(0x19c)]();_0x2e3707['render'](_0x4e3d62(0x1a4),{'success':_0x55e97a[_0x4e3d62(0x1a0)](_0x4e3d62(0x178)),'errors':_0x55e97a['flash'](_0x4e3d62(0x182)),'master_shop':_0x52b6a0});}catch(_0xfc08){console[_0x4e3d62(0x176)](_0xfc08);}}),router[a0_0x123194(0x18e)](a0_0x123194(0x19e),async(_0x3f7eda,_0x56e0a6)=>{const _0x4933f9=a0_0x123194;try{const _0x26d991=await master_shop[_0x4933f9(0x19c)]();console['log'](_0x4933f9(0x195),_0x26d991),_0x56e0a6['render'](_0x4933f9(0x19d),{'success':_0x3f7eda[_0x4933f9(0x1a0)](_0x4933f9(0x178)),'errors':_0x3f7eda['flash'](_0x4933f9(0x182)),'master_shop':_0x26d991});}catch(_0x5274ad){console['log'](_0x5274ad);}}),router[a0_0x123194(0x180)](a0_0x123194(0x19e),async(_0x747ae,_0x3bc200)=>{const _0x2829c1=a0_0x123194;try{const _0x59aa16=_0x747ae[_0x2829c1(0x191)][_0x2829c1(0x1a5)],_0x37b632=await sing_up[_0x2829c1(0x1a2)]({'email':_0x59aa16});if(!_0x37b632)return _0x747ae[_0x2829c1(0x1a0)](_0x2829c1(0x182),_0x2829c1(0x172)),_0x3bc200[_0x2829c1(0x18d)](_0x2829c1(0x19e));const _0x8caf81=await staff['findOne']({'email':_0x37b632[_0x2829c1(0x1a5)]});var _0x4073d3=_0x8caf81[_0x2829c1(0x18b)];if(_0x37b632[_0x2829c1(0x1a1)]==_0x2829c1(0x192)){const _0x1416bd=await staff['findOne']({'email':_0x37b632[_0x2829c1(0x1a5)]});if(_0x1416bd[_0x2829c1(0x187)]==_0x2829c1(0x186))return _0x747ae[_0x2829c1(0x1a0)](_0x2829c1(0x182),_0x2829c1(0x17b)),_0x3bc200[_0x2829c1(0x18d)]('/login');_0x4073d3=_0x1416bd[_0x2829c1(0x18b)];}const _0x26d14d=_0x747ae['body']['password'],_0x1d36b6=await bcrypt[_0x2829c1(0x19a)](_0x26d14d,_0x37b632['password']);if(_0x1d36b6==![])return _0x747ae[_0x2829c1(0x1a0)]('errors','your\x20password\x20is\x20wrong'),_0x3bc200[_0x2829c1(0x18d)](_0x2829c1(0x19e));const _0x2549fc=jwt['sign']({'username':_0x37b632[_0x2829c1(0x1a3)],'email':_0x37b632[_0x2829c1(0x1a5)],'role':_0x37b632[_0x2829c1(0x1a1)],'warehouse_category':_0x4073d3},process[_0x2829c1(0x197)][_0x2829c1(0x194)]);_0x3bc200['cookie']('jwt',_0x2549fc,{'expires':new Date(0xe677d213a700)}),_0x747ae['flash']('success','login\x20successfully'),_0x3bc200[_0x2829c1(0x18d)](_0x2829c1(0x188));}catch(_0xd1f11d){console[_0x2829c1(0x176)](_0xd1f11d);}}),router[a0_0x123194(0x18e)](a0_0x123194(0x18f),async(_0x38f74b,_0x5b72c4)=>{const _0x2d4416=a0_0x123194;try{const _0x3243fb=_0x38f74b[_0x2d4416(0x196)]['id'],_0x36f39a=await staff[_0x2d4416(0x1a6)]({'_id':_0x3243fb});_0x36f39a[_0x2d4416(0x187)]==_0x2d4416(0x186)&&(_0x38f74b[_0x2d4416(0x1a0)](_0x2d4416(0x182),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x5b72c4['redirect'](_0x2d4416(0x1a7)));const _0x2f4967=await sing_up[_0x2d4416(0x1a2)]({'email':_0x36f39a[_0x2d4416(0x1a5)]});var _0x40816f=_0x36f39a['warehouse_category'];if(_0x2f4967['role']==_0x2d4416(0x192)){const _0x33a92e=await staff[_0x2d4416(0x1a2)]({'name':_0x2f4967['name']});_0x40816f=_0x33a92e[_0x2d4416(0x18b)];}const _0x6e7af3=jwt['sign']({'username':_0x2f4967[_0x2d4416(0x1a3)],'email':_0x2f4967[_0x2d4416(0x1a5)],'role':_0x2f4967['role'],'warehouse_category':_0x40816f},process['env'][_0x2d4416(0x194)]);_0x5b72c4['cookie'](_0x2d4416(0x175),_0x6e7af3,{'expires':new Date(0xe677d213a700)}),_0x38f74b[_0x2d4416(0x1a0)](_0x2d4416(0x178),_0x2d4416(0x173)),_0x5b72c4['redirect'](_0x2d4416(0x188));}catch(_0x5c582c){console[_0x2d4416(0x176)](_0x5c582c);}}),router[a0_0x123194(0x18e)](a0_0x123194(0x17f),(_0x22c360,_0x3933ff)=>{const _0x55ebfe=a0_0x123194;_0x3933ff[_0x55ebfe(0x193)](_0x55ebfe(0x175)),_0x3933ff[_0x55ebfe(0x18d)](_0x55ebfe(0x19e));}),module[a0_0x123194(0x181)]=router;