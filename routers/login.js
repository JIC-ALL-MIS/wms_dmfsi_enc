const a0_0x328d31=a0_0x3e24;function a0_0x3e24(_0x238a86,_0x530ad3){const _0x4d71c7=a0_0x4d71();return a0_0x3e24=function(_0x3e2483,_0x46044a){_0x3e2483=_0x3e2483-0xc7;let _0xdf2a53=_0x4d71c7[_0x3e2483];return _0xdf2a53;},a0_0x3e24(_0x238a86,_0x530ad3);}function a0_0x4d71(){const _0x14a003=['jsonwebtoken','183710iOPuhW','4EFoqwX','67516020MJOWGn','/index','/logout','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','561845QFTkeG','/login','secret_key','cookie','log','post','../models/all_models','567LZQjZS','login','bcryptjs','207696JiDxvZ','Disabled','7nbVoYJ','sign','Router','errors','username','15MmlDCz','role','warehouse_category','email','params','login\x20master','your\x20password\x20is\x20wrong','findById','status','1797162VyHVJv','redirect','env','password','findOne','login\x20successfully','find','848uLQoSq','staff','24237BZmaeI','4005160gBdAUM','../middleware/auth','body','55eVMWNw','jwt','success','/staff/view','render','compare','/staff/:id','exports','/validate','flash','get','express'];a0_0x4d71=function(){return _0x14a003;};return a0_0x4d71();}(function(_0x5a7f8f,_0x28466a){const _0x4ad0bc=a0_0x3e24,_0x3f2857=_0x5a7f8f();while(!![]){try{const _0x1b647b=parseInt(_0x4ad0bc(0x100))/0x1*(-parseInt(_0x4ad0bc(0xfb))/0x2)+parseInt(_0x4ad0bc(0xe9))/0x3*(-parseInt(_0x4ad0bc(0xe7))/0x4)+-parseInt(_0x4ad0bc(0xd7))/0x5*(parseInt(_0x4ad0bc(0xe0))/0x6)+-parseInt(_0x4ad0bc(0xd2))/0x7*(-parseInt(_0x4ad0bc(0xea))/0x8)+parseInt(_0x4ad0bc(0xcd))/0x9*(-parseInt(_0x4ad0bc(0xfa))/0xa)+-parseInt(_0x4ad0bc(0xed))/0xb*(-parseInt(_0x4ad0bc(0xd0))/0xc)+parseInt(_0x4ad0bc(0xfc))/0xd;if(_0x1b647b===_0x28466a)break;else _0x3f2857['push'](_0x3f2857['shift']());}catch(_0x5842c8){_0x3f2857['push'](_0x3f2857['shift']());}}}(a0_0x4d71,0xd8e0d));const express=require(a0_0x328d31(0xf8)),app=express(),router=express[a0_0x328d31(0xd4)](),{sing_up,staff,profile,master_shop}=require(a0_0x328d31(0xcc)),bcrypt=require(a0_0x328d31(0xcf)),jwt=require(a0_0x328d31(0xf9)),auth=require(a0_0x328d31(0xeb));router[a0_0x328d31(0xf7)]('/',async(_0x52aa26,_0x738c0c)=>{const _0x475cf9=a0_0x328d31;try{const _0x6bc9ff=await master_shop[_0x475cf9(0xe6)]();_0x738c0c[_0x475cf9(0xf1)](_0x475cf9(0xce),{'success':_0x52aa26[_0x475cf9(0xf6)](_0x475cf9(0xef)),'errors':_0x52aa26[_0x475cf9(0xf6)](_0x475cf9(0xd5)),'master_shop':_0x6bc9ff});}catch(_0x622521){console[_0x475cf9(0xca)](_0x622521);}}),router[a0_0x328d31(0xf7)](a0_0x328d31(0xf5),async(_0x57cda6,_0x4fc4b7)=>{const _0xf1424c=a0_0x328d31;try{const _0xdbc6d7=await master_shop['find']();_0x4fc4b7[_0xf1424c(0xf1)]('validate',{'success':_0x57cda6[_0xf1424c(0xf6)](_0xf1424c(0xef)),'errors':_0x57cda6[_0xf1424c(0xf6)](_0xf1424c(0xd5)),'master_shop':_0xdbc6d7});}catch(_0x1fccf1){console['log'](_0x1fccf1);}}),router['get'](a0_0x328d31(0xc7),async(_0x5e23bd,_0x4c1f43)=>{const _0x109631=a0_0x328d31;try{const _0x4b29b6=await master_shop['find']();console[_0x109631(0xca)](_0x109631(0xdc),_0x4b29b6),_0x4c1f43[_0x109631(0xf1)](_0x109631(0xce),{'success':_0x5e23bd['flash'](_0x109631(0xef)),'errors':_0x5e23bd[_0x109631(0xf6)]('errors'),'master_shop':_0x4b29b6});}catch(_0x5be20c){console[_0x109631(0xca)](_0x5be20c);}}),router[a0_0x328d31(0xcb)](a0_0x328d31(0xc7),async(_0x549ef6,_0xd42cfb)=>{const _0x339372=a0_0x328d31;try{const _0x30185c=_0x549ef6[_0x339372(0xec)]['email'],_0xa297f7=await sing_up[_0x339372(0xe4)]({'email':_0x30185c});if(!_0xa297f7)return _0x549ef6[_0x339372(0xf6)]('errors','your\x20email\x20is\x20not\x20register'),_0xd42cfb[_0x339372(0xe1)](_0x339372(0xc7));const _0x3e7466=await staff[_0x339372(0xe4)]({'email':_0xa297f7['email']});var _0x39de0c=_0x3e7466['warehouse_category'];if(_0xa297f7[_0x339372(0xd8)]==_0x339372(0xe8)){const _0x2bd821=await staff[_0x339372(0xe4)]({'email':_0xa297f7[_0x339372(0xda)]});if(_0x2bd821[_0x339372(0xdf)]==_0x339372(0xd1))return _0x549ef6[_0x339372(0xf6)](_0x339372(0xd5),_0x339372(0xff)),_0xd42cfb[_0x339372(0xe1)](_0x339372(0xc7));_0x39de0c=_0x2bd821[_0x339372(0xd9)];}const _0x4965d5=_0x549ef6[_0x339372(0xec)][_0x339372(0xe3)],_0x5e95d9=await bcrypt[_0x339372(0xf2)](_0x4965d5,_0xa297f7[_0x339372(0xe3)]);if(_0x5e95d9==![])return _0x549ef6[_0x339372(0xf6)](_0x339372(0xd5),_0x339372(0xdd)),_0xd42cfb['redirect'](_0x339372(0xc7));const _0x3702ac=jwt['sign']({'username':_0xa297f7[_0x339372(0xd6)],'email':_0xa297f7[_0x339372(0xda)],'role':_0xa297f7['role'],'warehouse_category':_0x39de0c},process[_0x339372(0xe2)]['secret_key']);_0xd42cfb[_0x339372(0xc9)](_0x339372(0xee),_0x3702ac,{'expires':new Date(0xe677d213a700)}),_0x549ef6[_0x339372(0xf6)](_0x339372(0xef),_0x339372(0xe5)),_0xd42cfb[_0x339372(0xe1)](_0x339372(0xfd));}catch(_0x1daaa5){console[_0x339372(0xca)](_0x1daaa5);}}),router[a0_0x328d31(0xf7)](a0_0x328d31(0xf3),async(_0x17e63b,_0x2edf33)=>{const _0x140736=a0_0x328d31;try{const _0x149628=_0x17e63b[_0x140736(0xdb)]['id'],_0x36454e=await staff[_0x140736(0xde)]({'_id':_0x149628});_0x36454e[_0x140736(0xdf)]==_0x140736(0xd1)&&(_0x17e63b[_0x140736(0xf6)]('errors',_0x140736(0xff)),_0x2edf33['redirect'](_0x140736(0xf0)));const _0x220e98=await sing_up[_0x140736(0xe4)]({'email':_0x36454e[_0x140736(0xda)]});var _0x2cb46d=_0x36454e[_0x140736(0xd9)];if(_0x220e98[_0x140736(0xd8)]==_0x140736(0xe8)){const _0x188db0=await staff[_0x140736(0xe4)]({'name':_0x220e98['name']});_0x2cb46d=_0x188db0[_0x140736(0xd9)];}const _0x12ace9=jwt[_0x140736(0xd3)]({'username':_0x220e98['username'],'email':_0x220e98['email'],'role':_0x220e98['role'],'warehouse_category':_0x2cb46d},process[_0x140736(0xe2)][_0x140736(0xc8)]);_0x2edf33[_0x140736(0xc9)]('jwt',_0x12ace9,{'expires':new Date(0xe677d213a700)}),_0x17e63b[_0x140736(0xf6)]('success','login\x20successfully'),_0x2edf33[_0x140736(0xe1)](_0x140736(0xfd));}catch(_0x274dec){console[_0x140736(0xca)](_0x274dec);}}),router['get'](a0_0x328d31(0xfe),(_0x4a9e84,_0xf7fcc1)=>{const _0x47821e=a0_0x328d31;_0xf7fcc1['clearCookie'](_0x47821e(0xee)),_0xf7fcc1[_0x47821e(0xe1)](_0x47821e(0xc7));}),module[a0_0x328d31(0xf4)]=router;