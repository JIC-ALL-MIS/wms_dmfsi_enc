function a0_0x3e3b(){const _0x4e2e17=['7236119ZHGPfS','errors','render','express','3403264dauxpd','username','/login','2142537miOUKP','role','log','email','password','success','../models/all_models','261930qXtqdM','1948dGcGQQ','get','status','params','env','warehouse_category','findOne','login\x20successfully','/staff/view','your\x20password\x20is\x20wrong','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','/staff/:id','post','redirect','name','jwt','Disabled','54wpxuTR','bcryptjs','your\x20email\x20is\x20not\x20register','jsonwebtoken','306ivNdcN','2362412AFgIIB','body','find','72jcNnvG','171630njlijz','259LiEMzv','findById','validate','flash','14XZYdyp','/validate','/index','4VNLtVn','login','sign','secret_key','staff','../middleware/auth','cookie'];a0_0x3e3b=function(){return _0x4e2e17;};return a0_0x3e3b();}const a0_0x2f18a2=a0_0x39de;(function(_0x4aea1e,_0x4350c0){const _0x23fb5c=a0_0x39de,_0x4ed742=_0x4aea1e();while(!![]){try{const _0x86f2e2=-parseInt(_0x23fb5c(0x157))/0x1*(parseInt(_0x23fb5c(0x174))/0x2)+parseInt(_0x23fb5c(0x16c))/0x3*(-parseInt(_0x23fb5c(0x15e))/0x4)+parseInt(_0x23fb5c(0x156))/0x5*(-parseInt(_0x23fb5c(0x14d))/0x6)+-parseInt(_0x23fb5c(0x15b))/0x7*(parseInt(_0x23fb5c(0x169))/0x8)+parseInt(_0x23fb5c(0x151))/0x9*(parseInt(_0x23fb5c(0x173))/0xa)+parseInt(_0x23fb5c(0x165))/0xb+-parseInt(_0x23fb5c(0x155))/0xc*(-parseInt(_0x23fb5c(0x152))/0xd);if(_0x86f2e2===_0x4350c0)break;else _0x4ed742['push'](_0x4ed742['shift']());}catch(_0x44ca9f){_0x4ed742['push'](_0x4ed742['shift']());}}}(a0_0x3e3b,0x7d21c));function a0_0x39de(_0x54454b,_0x2eca1f){const _0x3e3bb8=a0_0x3e3b();return a0_0x39de=function(_0x39de5a,_0x35f2fd){_0x39de5a=_0x39de5a-0x144;let _0x5c3147=_0x3e3bb8[_0x39de5a];return _0x5c3147;},a0_0x39de(_0x54454b,_0x2eca1f);}const express=require(a0_0x2f18a2(0x168)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x2f18a2(0x172)),bcrypt=require(a0_0x2f18a2(0x14e)),jwt=require(a0_0x2f18a2(0x150)),auth=require(a0_0x2f18a2(0x163));router[a0_0x2f18a2(0x175)]('/',async(_0xcb9df6,_0x5891be)=>{const _0x5061c8=a0_0x2f18a2;try{const _0x2569da=await master_shop[_0x5061c8(0x154)]();_0x5891be[_0x5061c8(0x167)](_0x5061c8(0x15f),{'success':_0xcb9df6[_0x5061c8(0x15a)]('success'),'errors':_0xcb9df6[_0x5061c8(0x15a)](_0x5061c8(0x166)),'master_shop':_0x2569da});}catch(_0x3fcc95){console[_0x5061c8(0x16e)](_0x3fcc95);}}),router[a0_0x2f18a2(0x175)](a0_0x2f18a2(0x15c),async(_0x2fd4c0,_0x55b23f)=>{const _0x526f62=a0_0x2f18a2;try{const _0x3d9e38=await master_shop[_0x526f62(0x154)]();_0x55b23f['render'](_0x526f62(0x159),{'success':_0x2fd4c0[_0x526f62(0x15a)](_0x526f62(0x171)),'errors':_0x2fd4c0['flash'](_0x526f62(0x166)),'master_shop':_0x3d9e38});}catch(_0x554896){console[_0x526f62(0x16e)](_0x554896);}}),router[a0_0x2f18a2(0x175)]('/login',async(_0x442bf0,_0x4d353e)=>{const _0x1f1690=a0_0x2f18a2;try{const _0x5c31c7=await master_shop[_0x1f1690(0x154)]();console['log']('login\x20master',_0x5c31c7),_0x4d353e[_0x1f1690(0x167)](_0x1f1690(0x15f),{'success':_0x442bf0[_0x1f1690(0x15a)](_0x1f1690(0x171)),'errors':_0x442bf0[_0x1f1690(0x15a)](_0x1f1690(0x166)),'master_shop':_0x5c31c7});}catch(_0x29490){console[_0x1f1690(0x16e)](_0x29490);}}),router[a0_0x2f18a2(0x148)](a0_0x2f18a2(0x16b),async(_0x33a4ca,_0x4d81f4)=>{const _0x29a6a7=a0_0x2f18a2;try{const _0x517659=_0x33a4ca[_0x29a6a7(0x153)]['email'],_0x3d7447=await sing_up[_0x29a6a7(0x17a)]({'email':_0x517659});if(!_0x3d7447)return _0x33a4ca['flash']('errors',_0x29a6a7(0x14f)),_0x4d81f4[_0x29a6a7(0x149)]('/login');const _0x34af63=await staff['findOne']({'email':_0x3d7447[_0x29a6a7(0x16f)]});var _0x1396e5=_0x34af63[_0x29a6a7(0x179)];if(_0x3d7447[_0x29a6a7(0x16d)]=='staff'){const _0xce21be=await staff['findOne']({'email':_0x3d7447[_0x29a6a7(0x16f)]});if(_0xce21be[_0x29a6a7(0x176)]==_0x29a6a7(0x14c))return _0x33a4ca['flash']('errors',_0x29a6a7(0x146)),_0x4d81f4['redirect'](_0x29a6a7(0x16b));_0x1396e5=_0xce21be[_0x29a6a7(0x179)];}const _0x531006=_0x33a4ca[_0x29a6a7(0x153)][_0x29a6a7(0x170)],_0x4d29fd=await bcrypt['compare'](_0x531006,_0x3d7447['password']);if(_0x4d29fd==![])return _0x33a4ca['flash'](_0x29a6a7(0x166),_0x29a6a7(0x145)),_0x4d81f4[_0x29a6a7(0x149)]('/login');const _0x472e02=jwt[_0x29a6a7(0x160)]({'username':_0x3d7447[_0x29a6a7(0x16a)],'email':_0x3d7447[_0x29a6a7(0x16f)],'role':_0x3d7447['role'],'warehouse_category':_0x1396e5},process['env'][_0x29a6a7(0x161)]);_0x4d81f4[_0x29a6a7(0x164)](_0x29a6a7(0x14b),_0x472e02,{'expires':new Date(0xe677d213a700)}),_0x33a4ca[_0x29a6a7(0x15a)]('success',_0x29a6a7(0x17b)),_0x4d81f4[_0x29a6a7(0x149)](_0x29a6a7(0x15d));}catch(_0x14938a){console[_0x29a6a7(0x16e)](_0x14938a);}}),router[a0_0x2f18a2(0x175)](a0_0x2f18a2(0x147),async(_0x1031d1,_0x2ea3d8)=>{const _0x5c7ba4=a0_0x2f18a2;try{const _0x3622ba=_0x1031d1[_0x5c7ba4(0x177)]['id'],_0x1ffb9d=await staff[_0x5c7ba4(0x158)]({'_id':_0x3622ba});_0x1ffb9d[_0x5c7ba4(0x176)]==_0x5c7ba4(0x14c)&&(_0x1031d1[_0x5c7ba4(0x15a)]('errors',_0x5c7ba4(0x146)),_0x2ea3d8[_0x5c7ba4(0x149)](_0x5c7ba4(0x144)));const _0x3addbd=await sing_up[_0x5c7ba4(0x17a)]({'email':_0x1ffb9d[_0x5c7ba4(0x16f)]});var _0x214551=_0x1ffb9d[_0x5c7ba4(0x179)];if(_0x3addbd[_0x5c7ba4(0x16d)]==_0x5c7ba4(0x162)){const _0x6c1642=await staff['findOne']({'name':_0x3addbd[_0x5c7ba4(0x14a)]});_0x214551=_0x6c1642['warehouse_category'];}const _0x33d5b8=jwt['sign']({'username':_0x3addbd[_0x5c7ba4(0x16a)],'email':_0x3addbd['email'],'role':_0x3addbd[_0x5c7ba4(0x16d)],'warehouse_category':_0x214551},process[_0x5c7ba4(0x178)][_0x5c7ba4(0x161)]);_0x2ea3d8[_0x5c7ba4(0x164)](_0x5c7ba4(0x14b),_0x33d5b8,{'expires':new Date(0xe677d213a700)}),_0x1031d1[_0x5c7ba4(0x15a)](_0x5c7ba4(0x171),_0x5c7ba4(0x17b)),_0x2ea3d8['redirect'](_0x5c7ba4(0x15d));}catch(_0x318a73){console[_0x5c7ba4(0x16e)](_0x318a73);}}),router['get']('/logout',(_0x29b750,_0x4c4ca2)=>{const _0x46c324=a0_0x2f18a2;_0x4c4ca2['clearCookie'](_0x46c324(0x14b)),_0x4c4ca2[_0x46c324(0x149)](_0x46c324(0x16b));}),module['exports']=router;