const a0_0x1de276=a0_0x1b6b;function a0_0x4fb3(){const _0x3e0014=['/staff/:id','success','username','flash','exports','post','env','720ofwpxI','body','name','log','Router','4npjnwd','186728OizCtd','15suUBWN','322aAfyjc','render','role','9530510ObqqVF','/login','All','../middleware/auth','Disabled','password','redirect','/index','staff','bcryptjs','/validate','../models/all_models','compare','errors','52650IFisdr','login','secret_key','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','login\x20successfully','/logout','status','700620WjloXw','sign','params','jwt','find','get','67216iWpXSq','findOne','cookie','your\x20password\x20is\x20wrong','warehouse_category','880446BBXgNA','findById','validate','581667naYSRf','your\x20email\x20is\x20not\x20register','clearCookie','express','/staff/view','email'];a0_0x4fb3=function(){return _0x3e0014;};return a0_0x4fb3();}(function(_0x50d544,_0x441528){const _0x80bcf2=a0_0x1b6b,_0x65634a=_0x50d544();while(!![]){try{const _0x49ca25=parseInt(_0x80bcf2(0x11f))/0x1+parseInt(_0x80bcf2(0x139))/0x2+parseInt(_0x80bcf2(0x147))/0x3*(parseInt(_0x80bcf2(0x11e))/0x4)+-parseInt(_0x80bcf2(0x120))/0x5*(parseInt(_0x80bcf2(0x144))/0x6)+parseInt(_0x80bcf2(0x121))/0x7*(parseInt(_0x80bcf2(0x13f))/0x8)+-parseInt(_0x80bcf2(0x132))/0x9*(-parseInt(_0x80bcf2(0x154))/0xa)+-parseInt(_0x80bcf2(0x124))/0xb;if(_0x49ca25===_0x441528)break;else _0x65634a['push'](_0x65634a['shift']());}catch(_0x54f936){_0x65634a['push'](_0x65634a['shift']());}}}(a0_0x4fb3,0x38a32));function a0_0x1b6b(_0x270a23,_0x69e842){const _0x4fb381=a0_0x4fb3();return a0_0x1b6b=function(_0x1b6bb7,_0x22ef5e){_0x1b6bb7=_0x1b6bb7-0x11e;let _0x2c9646=_0x4fb381[_0x1b6bb7];return _0x2c9646;},a0_0x1b6b(_0x270a23,_0x69e842);}const express=require(a0_0x1de276(0x14a)),app=express(),router=express[a0_0x1de276(0x158)](),{sing_up,staff,profile,master_shop}=require(a0_0x1de276(0x12f)),bcrypt=require(a0_0x1de276(0x12d)),jwt=require('jsonwebtoken'),auth=require(a0_0x1de276(0x127));router['get']('/',async(_0x3059b6,_0x33d215)=>{const _0x2728ee=a0_0x1de276;try{const _0x530abc=await master_shop['find']();_0x33d215[_0x2728ee(0x122)](_0x2728ee(0x133),{'success':_0x3059b6['flash'](_0x2728ee(0x14e)),'errors':_0x3059b6[_0x2728ee(0x150)](_0x2728ee(0x131)),'master_shop':_0x530abc});}catch(_0x29815c){console['log'](_0x29815c);}}),router[a0_0x1de276(0x13e)](a0_0x1de276(0x12e),async(_0x3e501c,_0x592f07)=>{const _0x5aa527=a0_0x1de276;try{const _0x13c6f3=await master_shop[_0x5aa527(0x13d)]();_0x592f07['render'](_0x5aa527(0x146),{'success':_0x3e501c[_0x5aa527(0x150)]('success'),'errors':_0x3e501c[_0x5aa527(0x150)](_0x5aa527(0x131)),'master_shop':_0x13c6f3});}catch(_0x39e000){console[_0x5aa527(0x157)](_0x39e000);}}),router['get']('/login',async(_0x2910eb,_0x2140c4)=>{const _0x252af9=a0_0x1de276;try{const _0x6dedbd=await master_shop[_0x252af9(0x13d)]();console[_0x252af9(0x157)]('login\x20master',_0x6dedbd),_0x2140c4[_0x252af9(0x122)](_0x252af9(0x133),{'success':_0x2910eb[_0x252af9(0x150)](_0x252af9(0x14e)),'errors':_0x2910eb['flash']('errors'),'master_shop':_0x6dedbd});}catch(_0x4a45e0){console[_0x252af9(0x157)](_0x4a45e0);}}),router[a0_0x1de276(0x152)]('/login',async(_0x5ad91e,_0x125175)=>{const _0x158089=a0_0x1de276;try{const _0xc3e23d=_0x5ad91e[_0x158089(0x155)][_0x158089(0x14c)],_0x4b84e9=await sing_up[_0x158089(0x140)]({'email':_0xc3e23d});if(!_0x4b84e9)return _0x5ad91e[_0x158089(0x150)](_0x158089(0x131),_0x158089(0x148)),_0x125175[_0x158089(0x12a)](_0x158089(0x125));var _0x394167=_0x158089(0x126);if(_0x4b84e9[_0x158089(0x123)]==_0x158089(0x12c)){const _0x2c98b8=await staff['findOne']({'name':_0x4b84e9[_0x158089(0x156)]});if(_0x2c98b8[_0x158089(0x138)]==_0x158089(0x128))return _0x5ad91e[_0x158089(0x150)](_0x158089(0x131),_0x158089(0x135)),_0x125175['redirect'](_0x158089(0x125));_0x394167=_0x2c98b8[_0x158089(0x143)];}const _0x32a209=_0x5ad91e[_0x158089(0x155)][_0x158089(0x129)],_0x57d9d9=await bcrypt[_0x158089(0x130)](_0x32a209,_0x4b84e9['password']);if(_0x57d9d9==![])return _0x5ad91e[_0x158089(0x150)](_0x158089(0x131),_0x158089(0x142)),_0x125175[_0x158089(0x12a)](_0x158089(0x125));const _0x242d76=jwt['sign']({'username':_0x4b84e9[_0x158089(0x14f)],'email':_0x4b84e9[_0x158089(0x14c)],'role':_0x4b84e9[_0x158089(0x123)],'warehouse_category':_0x394167},process['env'][_0x158089(0x134)]);_0x125175[_0x158089(0x141)]('jwt',_0x242d76,{'expires':new Date(0xe677d213a700)}),_0x5ad91e[_0x158089(0x150)]('success',_0x158089(0x136)),_0x125175[_0x158089(0x12a)](_0x158089(0x12b));}catch(_0x5c0261){console[_0x158089(0x157)](_0x5c0261);}}),router[a0_0x1de276(0x13e)](a0_0x1de276(0x14d),async(_0x5ab10e,_0x14dccb)=>{const _0xd6c634=a0_0x1de276;try{const _0x1b6c34=_0x5ab10e[_0xd6c634(0x13b)]['id'],_0x13fb1d=await staff[_0xd6c634(0x145)]({'_id':_0x1b6c34});_0x13fb1d[_0xd6c634(0x138)]==_0xd6c634(0x128)&&(_0x5ab10e[_0xd6c634(0x150)](_0xd6c634(0x131),_0xd6c634(0x135)),_0x14dccb[_0xd6c634(0x12a)](_0xd6c634(0x14b)));const _0x17c751=await sing_up[_0xd6c634(0x140)]({'email':_0x13fb1d[_0xd6c634(0x14c)]});var _0x41fbbf=_0xd6c634(0x126);if(_0x17c751[_0xd6c634(0x123)]==_0xd6c634(0x12c)){const _0x55437a=await staff['findOne']({'name':_0x17c751[_0xd6c634(0x156)]});_0x41fbbf=_0x55437a['warehouse_category'];}const _0x25f972=jwt[_0xd6c634(0x13a)]({'username':_0x17c751[_0xd6c634(0x14f)],'email':_0x17c751[_0xd6c634(0x14c)],'role':_0x17c751[_0xd6c634(0x123)],'warehouse_category':_0x41fbbf},process[_0xd6c634(0x153)][_0xd6c634(0x134)]);_0x14dccb['cookie'](_0xd6c634(0x13c),_0x25f972,{'expires':new Date(0xe677d213a700)}),_0x5ab10e['flash'](_0xd6c634(0x14e),_0xd6c634(0x136)),_0x14dccb[_0xd6c634(0x12a)]('/index');}catch(_0x1caa9d){console['log'](_0x1caa9d);}}),router[a0_0x1de276(0x13e)](a0_0x1de276(0x137),(_0x40242a,_0xa3c47a)=>{const _0x5c7e09=a0_0x1de276;_0xa3c47a[_0x5c7e09(0x149)](_0x5c7e09(0x13c)),_0xa3c47a[_0x5c7e09(0x12a)]('/login');}),module[a0_0x1de276(0x151)]=router;