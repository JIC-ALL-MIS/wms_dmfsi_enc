function a0_0x31c5(){const _0x2ebb95=['login\x20successfully','sign','warehouse_category','Disabled','status','1670358nZvJpE','exports','/staff/view','9337368psnFre','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','username','/login','3929552bZGCfr','get','6733517Tvbxka','email','/index','env','findOne','log','render','body','params','secret_key','cookie','jwt','5097970oopqdM','your\x20password\x20is\x20wrong','success','9JHMrKP','flash','6XAvjKu','express','1ebYAlR','/validate','name','clearCookie','935004msjyCZ','/staff/:id','jsonwebtoken','redirect','staff','5341665SsQTsC','findById','your\x20email\x20is\x20not\x20register','login','password','../models/all_models','role','../middleware/auth','find','validate','errors','/logout','88YCgOsS'];a0_0x31c5=function(){return _0x2ebb95;};return a0_0x31c5();}const a0_0x12f058=a0_0x4ecc;(function(_0x3f41f0,_0x1e6819){const _0x585bac=a0_0x4ecc,_0x22ed2f=_0x3f41f0();while(!![]){try{const _0x49921d=-parseInt(_0x585bac(0x102))/0x1*(parseInt(_0x585bac(0xe6))/0x2)+-parseInt(_0x585bac(0x106))/0x3+-parseInt(_0x585bac(0xed))/0x4+-parseInt(_0x585bac(0xd4))/0x5+-parseInt(_0x585bac(0x100))/0x6*(-parseInt(_0x585bac(0xef))/0x7)+parseInt(_0x585bac(0xe9))/0x8*(-parseInt(_0x585bac(0xfe))/0x9)+parseInt(_0x585bac(0xfb))/0xa*(parseInt(_0x585bac(0xe0))/0xb);if(_0x49921d===_0x1e6819)break;else _0x22ed2f['push'](_0x22ed2f['shift']());}catch(_0x42309a){_0x22ed2f['push'](_0x22ed2f['shift']());}}}(a0_0x31c5,0xa4ef0));const express=require(a0_0x12f058(0x101)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x12f058(0xd9)),bcrypt=require('bcryptjs'),jwt=require(a0_0x12f058(0xd1)),auth=require(a0_0x12f058(0xdb));function a0_0x4ecc(_0x545af5,_0x37531f){const _0x31c53b=a0_0x31c5();return a0_0x4ecc=function(_0x4ecc98,_0x19e18d){_0x4ecc98=_0x4ecc98-0xd1;let _0x3b858b=_0x31c53b[_0x4ecc98];return _0x3b858b;},a0_0x4ecc(_0x545af5,_0x37531f);}router[a0_0x12f058(0xee)]('/',async(_0x52d831,_0x5684f4)=>{const _0x24b072=a0_0x12f058;try{const _0x2bd9ea=await master_shop[_0x24b072(0xdc)]();_0x5684f4[_0x24b072(0xf5)](_0x24b072(0xd7),{'success':_0x52d831[_0x24b072(0xff)]('success'),'errors':_0x52d831[_0x24b072(0xff)](_0x24b072(0xde)),'master_shop':_0x2bd9ea});}catch(_0x5e6663){console[_0x24b072(0xf4)](_0x5e6663);}}),router[a0_0x12f058(0xee)](a0_0x12f058(0x103),async(_0x2f4c38,_0x17b132)=>{const _0x2f2666=a0_0x12f058;try{const _0xe17a0c=await master_shop['find']();_0x17b132[_0x2f2666(0xf5)](_0x2f2666(0xdd),{'success':_0x2f4c38[_0x2f2666(0xff)](_0x2f2666(0xfd)),'errors':_0x2f4c38[_0x2f2666(0xff)]('errors'),'master_shop':_0xe17a0c});}catch(_0x4b7a87){console['log'](_0x4b7a87);}}),router[a0_0x12f058(0xee)]('/login',async(_0x53b150,_0x3815a6)=>{const _0x311e49=a0_0x12f058;try{const _0x5a3a62=await master_shop[_0x311e49(0xdc)]();console[_0x311e49(0xf4)]('login\x20master',_0x5a3a62),_0x3815a6[_0x311e49(0xf5)](_0x311e49(0xd7),{'success':_0x53b150[_0x311e49(0xff)]('success'),'errors':_0x53b150[_0x311e49(0xff)](_0x311e49(0xde)),'master_shop':_0x5a3a62});}catch(_0x564451){console['log'](_0x564451);}}),router['post'](a0_0x12f058(0xec),async(_0x10aa14,_0x37e994)=>{const _0x408dc2=a0_0x12f058;try{const _0x56b076=_0x10aa14[_0x408dc2(0xf6)][_0x408dc2(0xf0)],_0x3173a4=await sing_up['findOne']({'email':_0x56b076});if(!_0x3173a4)return _0x10aa14[_0x408dc2(0xff)]('errors',_0x408dc2(0xd6)),_0x37e994['redirect'](_0x408dc2(0xec));const _0xd8e871=await staff['findOne']({'email':_0x3173a4[_0x408dc2(0xf0)]});var _0x4a9bf6=_0xd8e871[_0x408dc2(0xe3)];if(_0x3173a4[_0x408dc2(0xda)]==_0x408dc2(0xd3)){const _0x3f66a5=await staff[_0x408dc2(0xf3)]({'email':_0x3173a4['email']});if(_0x3f66a5[_0x408dc2(0xe5)]==_0x408dc2(0xe4))return _0x10aa14[_0x408dc2(0xff)]('errors',_0x408dc2(0xea)),_0x37e994[_0x408dc2(0xd2)](_0x408dc2(0xec));_0x4a9bf6=_0x3f66a5[_0x408dc2(0xe3)];}const _0x5caa58=_0x10aa14[_0x408dc2(0xf6)][_0x408dc2(0xd8)],_0x192894=await bcrypt['compare'](_0x5caa58,_0x3173a4[_0x408dc2(0xd8)]);if(_0x192894==![])return _0x10aa14[_0x408dc2(0xff)]('errors',_0x408dc2(0xfc)),_0x37e994[_0x408dc2(0xd2)](_0x408dc2(0xec));const _0x49ffb7=jwt[_0x408dc2(0xe2)]({'username':_0x3173a4[_0x408dc2(0xeb)],'email':_0x3173a4['email'],'role':_0x3173a4[_0x408dc2(0xda)],'warehouse_category':_0x4a9bf6},process[_0x408dc2(0xf2)][_0x408dc2(0xf8)]);_0x37e994[_0x408dc2(0xf9)](_0x408dc2(0xfa),_0x49ffb7,{'expires':new Date(0xe677d213a700)}),_0x10aa14['flash'](_0x408dc2(0xfd),_0x408dc2(0xe1)),_0x37e994[_0x408dc2(0xd2)](_0x408dc2(0xf1));}catch(_0x4b351e){console[_0x408dc2(0xf4)](_0x4b351e);}}),router['get'](a0_0x12f058(0x107),async(_0x216323,_0x323065)=>{const _0x47c14d=a0_0x12f058;try{const _0x1c4113=_0x216323[_0x47c14d(0xf7)]['id'],_0x339878=await staff[_0x47c14d(0xd5)]({'_id':_0x1c4113});_0x339878[_0x47c14d(0xe5)]=='Disabled'&&(_0x216323['flash'](_0x47c14d(0xde),_0x47c14d(0xea)),_0x323065[_0x47c14d(0xd2)](_0x47c14d(0xe8)));const _0x2be897=await sing_up[_0x47c14d(0xf3)]({'email':_0x339878[_0x47c14d(0xf0)]});var _0x41de3f=_0x339878[_0x47c14d(0xe3)];if(_0x2be897[_0x47c14d(0xda)]==_0x47c14d(0xd3)){const _0x7d9f5e=await staff[_0x47c14d(0xf3)]({'name':_0x2be897[_0x47c14d(0x104)]});_0x41de3f=_0x7d9f5e[_0x47c14d(0xe3)];}const _0x57af99=jwt[_0x47c14d(0xe2)]({'username':_0x2be897['username'],'email':_0x2be897['email'],'role':_0x2be897[_0x47c14d(0xda)],'warehouse_category':_0x41de3f},process['env'][_0x47c14d(0xf8)]);_0x323065['cookie'](_0x47c14d(0xfa),_0x57af99,{'expires':new Date(0xe677d213a700)}),_0x216323['flash'](_0x47c14d(0xfd),'login\x20successfully'),_0x323065[_0x47c14d(0xd2)]('/index');}catch(_0x43a2ce){console['log'](_0x43a2ce);}}),router[a0_0x12f058(0xee)](a0_0x12f058(0xdf),(_0x382aeb,_0x401149)=>{const _0x2211d2=a0_0x12f058;_0x401149[_0x2211d2(0x105)]('jwt'),_0x401149[_0x2211d2(0xd2)]('/login');}),module[a0_0x12f058(0xe7)]=router;