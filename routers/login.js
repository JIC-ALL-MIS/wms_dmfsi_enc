const a0_0x486418=a0_0x4689;function a0_0x44cd(){const _0x17a659=['login\x20successfully','body','redirect','secret_key','All','1840492LqmLTd','bcryptjs','Router','role','find','/staff/view','validate','8431668UlEOls','env','email','your\x20password\x20is\x20wrong','express','128530Fvkrmp','your\x20email\x20is\x20not\x20register','176ghKUoj','flash','errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','staff','clearCookie','exports','log','201789PGztej','jwt','password','716848JPLYvA','render','warehouse_category','success','../models/all_models','get','username','93394OByzSU','status','cookie','/validate','/index','compare','1291257aIroeV','Disabled','318IYXsfS','../middleware/auth','findOne','login','name','/login'];a0_0x44cd=function(){return _0x17a659;};return a0_0x44cd();}(function(_0x1d5e5e,_0x458af7){const _0x3c4c5f=a0_0x4689,_0x3e4493=_0x1d5e5e();while(!![]){try{const _0x5e9ded=parseInt(_0x3c4c5f(0x1cd))/0x1+parseInt(_0x3c4c5f(0x1d4))/0x2+-parseInt(_0x3c4c5f(0x1a7))/0x3+-parseInt(_0x3c4c5f(0x1b4))/0x4+-parseInt(_0x3c4c5f(0x1c0))/0x5*(-parseInt(_0x3c4c5f(0x1a9))/0x6)+parseInt(_0x3c4c5f(0x1ca))/0x7*(parseInt(_0x3c4c5f(0x1c2))/0x8)+-parseInt(_0x3c4c5f(0x1bb))/0x9;if(_0x5e9ded===_0x458af7)break;else _0x3e4493['push'](_0x3e4493['shift']());}catch(_0x63b16f){_0x3e4493['push'](_0x3e4493['shift']());}}}(a0_0x44cd,0xe3b9b));const express=require(a0_0x486418(0x1bf)),app=express(),router=express[a0_0x486418(0x1b6)](),{sing_up,staff,profile,master_shop}=require(a0_0x486418(0x1d1)),bcrypt=require(a0_0x486418(0x1b5)),jwt=require('jsonwebtoken'),auth=require(a0_0x486418(0x1aa));function a0_0x4689(_0x2efdb2,_0x587bbe){const _0x44cda0=a0_0x44cd();return a0_0x4689=function(_0x4689a5,_0xce0a47){_0x4689a5=_0x4689a5-0x1a6;let _0x4413a6=_0x44cda0[_0x4689a5];return _0x4413a6;},a0_0x4689(_0x2efdb2,_0x587bbe);}router[a0_0x486418(0x1d2)]('/',async(_0x320672,_0x3fb216)=>{const _0x3996b1=a0_0x486418;try{const _0x13b553=await master_shop['find']();_0x3fb216[_0x3996b1(0x1ce)](_0x3996b1(0x1ac),{'success':_0x320672['flash']('success'),'errors':_0x320672[_0x3996b1(0x1c3)](_0x3996b1(0x1c4)),'master_shop':_0x13b553});}catch(_0x5e65c2){console['log'](_0x5e65c2);}}),router[a0_0x486418(0x1d2)](a0_0x486418(0x1d7),async(_0x326a8f,_0x3f7578)=>{const _0x44246b=a0_0x486418;try{const _0x24b27e=await master_shop[_0x44246b(0x1b8)]();_0x3f7578[_0x44246b(0x1ce)](_0x44246b(0x1ba),{'success':_0x326a8f[_0x44246b(0x1c3)]('success'),'errors':_0x326a8f[_0x44246b(0x1c3)]('errors'),'master_shop':_0x24b27e});}catch(_0x32e0ea){console[_0x44246b(0x1c9)](_0x32e0ea);}}),router[a0_0x486418(0x1d2)](a0_0x486418(0x1ae),async(_0x255c74,_0xa5d83f)=>{const _0x849e69=a0_0x486418;try{const _0x2e6051=await master_shop[_0x849e69(0x1b8)]();console['log']('login\x20master',_0x2e6051),_0xa5d83f[_0x849e69(0x1ce)]('login',{'success':_0x255c74[_0x849e69(0x1c3)](_0x849e69(0x1d0)),'errors':_0x255c74[_0x849e69(0x1c3)](_0x849e69(0x1c4)),'master_shop':_0x2e6051});}catch(_0x3a5fe5){console[_0x849e69(0x1c9)](_0x3a5fe5);}}),router['post'](a0_0x486418(0x1ae),async(_0x4b919f,_0x1df7d0)=>{const _0x3a95d2=a0_0x486418;try{const _0x27391d=_0x4b919f[_0x3a95d2(0x1b0)][_0x3a95d2(0x1bd)],_0x178bec=await sing_up[_0x3a95d2(0x1ab)]({'email':_0x27391d});if(!_0x178bec)return _0x4b919f[_0x3a95d2(0x1c3)](_0x3a95d2(0x1c4),_0x3a95d2(0x1c1)),_0x1df7d0[_0x3a95d2(0x1b1)](_0x3a95d2(0x1ae));var _0x481e99=_0x3a95d2(0x1b3);if(_0x178bec[_0x3a95d2(0x1b7)]=='staff'){const _0x22cbc4=await staff[_0x3a95d2(0x1ab)]({'name':_0x178bec[_0x3a95d2(0x1ad)]});if(_0x22cbc4[_0x3a95d2(0x1d5)]==_0x3a95d2(0x1a8))return _0x4b919f[_0x3a95d2(0x1c3)]('errors',_0x3a95d2(0x1c5)),_0x1df7d0[_0x3a95d2(0x1b1)](_0x3a95d2(0x1ae));_0x481e99=_0x22cbc4['warehouse_category'];}const _0x3a8dc2=_0x4b919f['body'][_0x3a95d2(0x1cc)],_0x7d764d=await bcrypt[_0x3a95d2(0x1a6)](_0x3a8dc2,_0x178bec[_0x3a95d2(0x1cc)]);if(_0x7d764d==![])return _0x4b919f['flash'](_0x3a95d2(0x1c4),_0x3a95d2(0x1be)),_0x1df7d0[_0x3a95d2(0x1b1)](_0x3a95d2(0x1ae));const _0x2de4b1=jwt['sign']({'username':_0x178bec[_0x3a95d2(0x1d3)],'email':_0x178bec[_0x3a95d2(0x1bd)],'role':_0x178bec[_0x3a95d2(0x1b7)],'warehouse_category':_0x481e99},process[_0x3a95d2(0x1bc)][_0x3a95d2(0x1b2)]);_0x1df7d0['cookie'](_0x3a95d2(0x1cb),_0x2de4b1,{'expires':new Date(0xe677d213a700)}),_0x4b919f[_0x3a95d2(0x1c3)](_0x3a95d2(0x1d0),'login\x20successfully'),_0x1df7d0['redirect'](_0x3a95d2(0x1d8));}catch(_0x40ed28){console[_0x3a95d2(0x1c9)](_0x40ed28);}}),router[a0_0x486418(0x1d2)]('/staff/:id',async(_0x546062,_0x18fb8c)=>{const _0x4f03f6=a0_0x486418;try{const _0xc0e3fb=_0x546062['params']['id'],_0x369c16=await staff['findById']({'_id':_0xc0e3fb});_0x369c16['status']=='Disabled'&&(_0x546062[_0x4f03f6(0x1c3)]('errors',_0x4f03f6(0x1c5)),_0x18fb8c[_0x4f03f6(0x1b1)](_0x4f03f6(0x1b9)));const _0x205c63=await sing_up['findOne']({'email':_0x369c16[_0x4f03f6(0x1bd)]});var _0x3dece9=_0x4f03f6(0x1b3);if(_0x205c63[_0x4f03f6(0x1b7)]==_0x4f03f6(0x1c6)){const _0x5b695f=await staff[_0x4f03f6(0x1ab)]({'name':_0x205c63[_0x4f03f6(0x1ad)]});_0x3dece9=_0x5b695f[_0x4f03f6(0x1cf)];}const _0x10236d=jwt['sign']({'username':_0x205c63['username'],'email':_0x205c63[_0x4f03f6(0x1bd)],'role':_0x205c63['role'],'warehouse_category':_0x3dece9},process[_0x4f03f6(0x1bc)]['secret_key']);_0x18fb8c[_0x4f03f6(0x1d6)](_0x4f03f6(0x1cb),_0x10236d,{'expires':new Date(0xe677d213a700)}),_0x546062[_0x4f03f6(0x1c3)](_0x4f03f6(0x1d0),_0x4f03f6(0x1af)),_0x18fb8c[_0x4f03f6(0x1b1)](_0x4f03f6(0x1d8));}catch(_0x384b1d){console[_0x4f03f6(0x1c9)](_0x384b1d);}}),router['get']('/logout',(_0x803508,_0x294f7e)=>{const _0x7724cd=a0_0x486418;_0x294f7e[_0x7724cd(0x1c7)](_0x7724cd(0x1cb)),_0x294f7e[_0x7724cd(0x1b1)]('/login');}),module[a0_0x486418(0x1c8)]=router;