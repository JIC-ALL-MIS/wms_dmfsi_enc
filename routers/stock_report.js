var a0_0x252cbc=a0_0x4ed1;function a0_0x36bd(){var _0x103721=['Spanish','72uQqeVc','language','findOne','482321MlCREy','22ujtlaz','status','$product_details','email','4795WMVyhZ','$product_docs','111','446564XGEPND','body','Portuguese','../public/language/languages.json','/Reports','Arabic','Finished\x20Goods','French','post','Hindi','get','product_data','$product_details.product_name','products','$product_details.product_stock','exports','Chinese','Portuguese\x20(BR)','1752DDarMJ','530910nabwBT','success','role_data','3FbPivJ','aggregate','/Reports_product','product_details.rak_name','579273ofVigP','English','errors','ssd','/view/:id','173331iLqwnt','English\x20(US)','name','1411390eCkkXf','finish','Raw\x20Materials','log','$product_docs.sku','warehouse','German','find','$product_docs.brand','/view','$product_docs.unit','product_details.product_name','Arabic\x20(ae)','master','Router','../middleware/auth','flash','json','params'];a0_0x36bd=function(){return _0x103721;};return a0_0x36bd();}function a0_0x4ed1(_0x1b8428,_0x38b110){var _0x36bd7a=a0_0x36bd();return a0_0x4ed1=function(_0x4ed189,_0x348592){_0x4ed189=_0x4ed189-0x14e;var _0x5194aa=_0x36bd7a[_0x4ed189];return _0x5194aa;},a0_0x4ed1(_0x1b8428,_0x38b110);}(function(_0x1494d7,_0x127b08){var _0x5e398b=a0_0x4ed1,_0x491ca0=_0x1494d7();while(!![]){try{var _0x73314e=parseInt(_0x5e398b(0x17c))/0x1+parseInt(_0x5e398b(0x175))/0x2+parseInt(_0x5e398b(0x178))/0x3*(parseInt(_0x5e398b(0x162))/0x4)+parseInt(_0x5e398b(0x15f))/0x5*(-parseInt(_0x5e398b(0x174))/0x6)+-parseInt(_0x5e398b(0x15a))/0x7*(parseInt(_0x5e398b(0x157))/0x8)+-parseInt(_0x5e398b(0x181))/0x9+parseInt(_0x5e398b(0x184))/0xa*(parseInt(_0x5e398b(0x15b))/0xb);if(_0x73314e===_0x127b08)break;else _0x491ca0['push'](_0x491ca0['shift']());}catch(_0x2492cb){_0x491ca0['push'](_0x491ca0['shift']());}}}(a0_0x36bd,0x4df01));const express=require('express'),app=express(),router=express[a0_0x252cbc(0x151)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases}=require('../models/all_models'),auth=require(a0_0x252cbc(0x152)),users=require(a0_0x252cbc(0x165));router[a0_0x252cbc(0x16c)](a0_0x252cbc(0x18d),auth,async(_0x3ab03a,_0x18a19c)=>{var _0x17aae1=a0_0x252cbc;try{const _0x40fc61=_0x3ab03a['user'];console['log'](_0x17aae1(0x177),_0x3ab03a['user']);const _0x13f291=await profile[_0x17aae1(0x159)]({'email':_0x40fc61[_0x17aae1(0x15e)]}),_0x533c31=await master_shop[_0x17aae1(0x18b)]();console['log'](_0x17aae1(0x150),_0x533c31);const _0x565685=await warehouse[_0x17aae1(0x18b)]({}),_0x34a7ce=await product[_0x17aae1(0x18b)]({});if(_0x533c31[0x0][_0x17aae1(0x158)]==_0x17aae1(0x182)){var _0x34d55e=users[_0x17aae1(0x17d)];console[_0x17aae1(0x187)](_0x34d55e);}else{if(_0x533c31[0x0][_0x17aae1(0x158)]==_0x17aae1(0x16b))var _0x34d55e=users[_0x17aae1(0x16b)];else{if(_0x533c31[0x0][_0x17aae1(0x158)]=='German')var _0x34d55e=users[_0x17aae1(0x18a)];else{if(_0x533c31[0x0][_0x17aae1(0x158)]==_0x17aae1(0x156))var _0x34d55e=users['Spanish'];else{if(_0x533c31[0x0][_0x17aae1(0x158)]=='French')var _0x34d55e=users[_0x17aae1(0x169)];else{if(_0x533c31[0x0]['language']=='Portuguese\x20(BR)')var _0x34d55e=users[_0x17aae1(0x164)];else{if(_0x533c31[0x0][_0x17aae1(0x158)]==_0x17aae1(0x172))var _0x34d55e=users[_0x17aae1(0x172)];else{if(_0x533c31[0x0]['language']==_0x17aae1(0x14f))var _0x34d55e=users[_0x17aae1(0x167)];}}}}}}}_0x18a19c['render']('stock_report',{'success':_0x3ab03a[_0x17aae1(0x153)](_0x17aae1(0x176)),'errors':_0x3ab03a[_0x17aae1(0x153)](_0x17aae1(0x17e)),'role':_0x40fc61,'profile':_0x13f291,'master_shop':_0x533c31,'warehouse':_0x565685,'product':_0x34a7ce,'warehouse_doc':[],'product_doc':[],'language':_0x34d55e});}catch(_0x1428f6){console[_0x17aae1(0x187)](_0x1428f6);}}),router['get'](a0_0x252cbc(0x180),auth,async(_0x40aeb4,_0x43bf3b)=>{var _0x1098c2=a0_0x252cbc;try{const _0x1d7d0d=await master_shop[_0x1098c2(0x18b)]();console[_0x1098c2(0x187)]('master',_0x1d7d0d);if(_0x40aeb4[_0x1098c2(0x155)]['id']=='warehouse'){const _0x28b29a=await warehouse[_0x1098c2(0x18b)]();console[_0x1098c2(0x187)](_0x28b29a);if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x182)){var _0x49285d=users['English'];console[_0x1098c2(0x187)](_0x49285d);}else{if(_0x1d7d0d[0x0]['language']==_0x1098c2(0x16b))var _0x49285d=users[_0x1098c2(0x16b)];else{if(_0x1d7d0d[0x0]['language']==_0x1098c2(0x18a))var _0x49285d=users[_0x1098c2(0x18a)];else{if(_0x1d7d0d[0x0]['language']==_0x1098c2(0x156))var _0x49285d=users[_0x1098c2(0x156)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x169))var _0x49285d=users['French'];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x173))var _0x49285d=users['Portuguese'];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x172))var _0x49285d=users['Chinese'];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]=='Arabic\x20(ae)')var _0x49285d=users[_0x1098c2(0x167)];}}}}}}}_0x43bf3b[_0x1098c2(0x15c)](0xc8)[_0x1098c2(0x154)]({'data':_0x28b29a,'language':_0x49285d[_0x1098c2(0x189)]});}else{const _0x10db97=await product[_0x1098c2(0x18b)]();console[_0x1098c2(0x187)](_0x1098c2(0x161),_0x10db97);if(_0x1d7d0d[0x0]['language']==_0x1098c2(0x182)){var _0x49285d=users['English'];console[_0x1098c2(0x187)](_0x49285d);}else{if(_0x1d7d0d[0x0]['language']=='Hindi')var _0x49285d=users[_0x1098c2(0x16b)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x18a))var _0x49285d=users[_0x1098c2(0x18a)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x156))var _0x49285d=users[_0x1098c2(0x156)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x169))var _0x49285d=users['French'];else{if(_0x1d7d0d[0x0]['language']==_0x1098c2(0x173))var _0x49285d=users[_0x1098c2(0x164)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x172))var _0x49285d=users[_0x1098c2(0x172)];else{if(_0x1d7d0d[0x0][_0x1098c2(0x158)]==_0x1098c2(0x14f))var _0x49285d=users[_0x1098c2(0x167)];}}}}}}}_0x43bf3b[_0x1098c2(0x15c)](0xc8)[_0x1098c2(0x154)]({'data':_0x10db97,'language':_0x49285d[_0x1098c2(0x16f)]});}}catch(_0x1c9e3b){console[_0x1098c2(0x187)](_0x1c9e3b);}}),router[a0_0x252cbc(0x16c)]('/view/warehouse/:id',auth,async(_0xb6b7d8,_0x52ff3a)=>{var _0x5d1ada=a0_0x252cbc;try{const _0x2f9cab=_0xb6b7d8[_0x5d1ada(0x155)]['id'];console[_0x5d1ada(0x187)](_0x2f9cab);const _0x51b887=await master_shop['find']();console[_0x5d1ada(0x187)](_0x5d1ada(0x150),_0x51b887);const _0x33f542=await warehouse['aggregate']([{'$match':{'name':_0x2f9cab}},{'$unwind':_0x5d1ada(0x15d)},{'$lookup':{'from':_0x5d1ada(0x16f),'localField':_0x5d1ada(0x14e),'foreignField':_0x5d1ada(0x183),'as':'product_docs'}},{'$unwind':_0x5d1ada(0x160)},{'$project':{'name':0x1,'product_name':_0x5d1ada(0x16e),'product_stock':_0x5d1ada(0x170),'category':'$product_docs.category','brand':_0x5d1ada(0x18c),'sku':_0x5d1ada(0x188),'unit':_0x5d1ada(0x18e),'rak':_0x5d1ada(0x17b),'bin':'product_details.bin_name'}}]);console[_0x5d1ada(0x187)](_0x33f542);if(_0x51b887[0x0]['language']==_0x5d1ada(0x182)){var _0x1d192d=users['English'];console[_0x5d1ada(0x187)](_0x1d192d);}else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x16b))var _0x1d192d=users[_0x5d1ada(0x16b)];else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x18a))var _0x1d192d=users[_0x5d1ada(0x18a)];else{if(_0x51b887[0x0]['language']==_0x5d1ada(0x156))var _0x1d192d=users[_0x5d1ada(0x156)];else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x169))var _0x1d192d=users[_0x5d1ada(0x169)];else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x173))var _0x1d192d=users['Portuguese'];else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x172))var _0x1d192d=users[_0x5d1ada(0x172)];else{if(_0x51b887[0x0][_0x5d1ada(0x158)]==_0x5d1ada(0x14f))var _0x1d192d=users[_0x5d1ada(0x167)];}}}}}}}_0x52ff3a[_0x5d1ada(0x15c)](0xc8)[_0x5d1ada(0x154)]({'data':_0x33f542,'language':_0x1d192d});}catch(_0x19a7bb){console[_0x5d1ada(0x187)](_0x19a7bb);}}),router[a0_0x252cbc(0x16c)]('/view/product/:id',auth,async(_0x51a64c,_0x55fbc2)=>{var _0x2433dd=a0_0x252cbc;try{const _0x2a8d26=_0x51a64c[_0x2433dd(0x155)]['id'];console['log'](_0x2a8d26);const _0x4c95f9=await master_shop[_0x2433dd(0x18b)]();console[_0x2433dd(0x187)](_0x2433dd(0x150),_0x4c95f9);const _0x309d39=await product[_0x2433dd(0x159)]({'name':_0x2a8d26});console[_0x2433dd(0x187)](_0x2433dd(0x16d),_0x309d39);const _0x2219b6=await warehouse[_0x2433dd(0x179)]([{'$unwind':_0x2433dd(0x15d)},{'$match':{'product_details.product_name':_0x2a8d26}},{'$project':{'name':0x1,'product_name':_0x2433dd(0x16e),'product_stock':'$product_details.product_stock'}}]);console['log']('warehouse_data',_0x2219b6);if(_0x4c95f9[0x0][_0x2433dd(0x158)]==_0x2433dd(0x182)){var _0x359355=users[_0x2433dd(0x17d)];console[_0x2433dd(0x187)](_0x359355);}else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]=='Hindi')var _0x359355=users[_0x2433dd(0x16b)];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]=='German')var _0x359355=users[_0x2433dd(0x18a)];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]==_0x2433dd(0x156))var _0x359355=users['Spanish'];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]==_0x2433dd(0x169))var _0x359355=users['French'];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]=='Portuguese\x20(BR)')var _0x359355=users['Portuguese'];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]==_0x2433dd(0x172))var _0x359355=users[_0x2433dd(0x172)];else{if(_0x4c95f9[0x0][_0x2433dd(0x158)]=='Arabic\x20(ae)')var _0x359355=users[_0x2433dd(0x167)];}}}}}}}_0x55fbc2[_0x2433dd(0x15c)](0xc8)[_0x2433dd(0x154)]({'product_data':_0x309d39,'warehouse_data':_0x2219b6,'language':_0x359355});}catch(_0x9b8ec8){console[_0x2433dd(0x187)](_0x9b8ec8);}}),router[a0_0x252cbc(0x16a)](a0_0x252cbc(0x166),async(_0x3ea6d6,_0x5c16c3)=>{var _0x42bb3a=a0_0x252cbc;const {warehouseNew:_0x344dc1,rooms:_0x2d69c5,Type:_0x5b6d58,process_cat:_0x3d4da9,room_cat:_0x125d1f}=_0x3ea6d6[_0x42bb3a(0x163)];let _0x45f1ad;console[_0x42bb3a(0x187)](_0x3ea6d6[_0x42bb3a(0x163)]);if(_0x3d4da9=='raw')_0x45f1ad=await warehouse['aggregate']([{'$match':{'name':_0x344dc1,'room':_0x2d69c5,'warehouse_category':_0x42bb3a(0x186)}},{'$unwind':_0x42bb3a(0x15d)},{'$match':{'product_details.type':_0x5b6d58,'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]);else _0x3d4da9==_0x42bb3a(0x185)?_0x2d69c5=='All'?_0x45f1ad=await warehouse[_0x42bb3a(0x179)]([{'$match':{'name':_0x344dc1,'warehouse_category':_0x42bb3a(0x168)}},{'$unwind':_0x42bb3a(0x15d)},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]):_0x45f1ad=await warehouse[_0x42bb3a(0x179)]([{'$match':{'name':_0x344dc1,'room':_0x2d69c5,'warehouse_category':_0x42bb3a(0x168)}},{'$unwind':'$product_details'},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]):(console['log'](_0x42bb3a(0x17f)),Include=[{'$unwind':_0x42bb3a(0x15d)},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}],_0x45f1ad=await warehouse[_0x42bb3a(0x179)](Include));_0x5c16c3[_0x42bb3a(0x154)](_0x45f1ad);}),router['post'](a0_0x252cbc(0x17a),async(_0x300970,_0x1ea174)=>{var _0xe4da68=a0_0x252cbc;const {warehouseNew:_0x5b62ee,rooms:_0x996ff2,Type:_0x1ec39e,process_cat:_0x5d514a,room_cat:_0x1b3e68}=_0x300970[_0xe4da68(0x163)],_0x54f365=await product[_0xe4da68(0x18b)]();_0x1ea174[_0xe4da68(0x154)](_0x54f365);}),module[a0_0x252cbc(0x171)]=router;