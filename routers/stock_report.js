var a0_0x5ef8ce=a0_0x3203;(function(_0x29eb26,_0x1abf2f){var _0xbe78bb=a0_0x3203,_0xbd36cf=_0x29eb26();while(!![]){try{var _0x2571d0=parseInt(_0xbe78bb(0x1bf))/0x1+-parseInt(_0xbe78bb(0x1eb))/0x2+-parseInt(_0xbe78bb(0x1bb))/0x3+parseInt(_0xbe78bb(0x1c8))/0x4*(-parseInt(_0xbe78bb(0x1bd))/0x5)+parseInt(_0xbe78bb(0x1d7))/0x6+-parseInt(_0xbe78bb(0x1c1))/0x7*(parseInt(_0xbe78bb(0x1c0))/0x8)+parseInt(_0xbe78bb(0x1ee))/0x9*(parseInt(_0xbe78bb(0x1d0))/0xa);if(_0x2571d0===_0x1abf2f)break;else _0xbd36cf['push'](_0xbd36cf['shift']());}catch(_0x3e6f0c){_0xbd36cf['push'](_0xbd36cf['shift']());}}}(a0_0x2516,0xb54bd));const express=require('express'),app=express(),router=express[a0_0x5ef8ce(0x1cd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases}=require(a0_0x5ef8ce(0x1c9)),auth=require('../middleware/auth'),users=require(a0_0x5ef8ce(0x1bc));router[a0_0x5ef8ce(0x1b6)](a0_0x5ef8ce(0x1d9),auth,async(_0x5b2a28,_0x51b9d1)=>{var _0x3a7db4=a0_0x5ef8ce;try{const _0x351b4f=_0x5b2a28[_0x3a7db4(0x1da)];console[_0x3a7db4(0x1c2)](_0x3a7db4(0x1e4),_0x5b2a28['user']);const _0x20edb3=await profile[_0x3a7db4(0x1b0)]({'email':_0x351b4f['email']}),_0x3793ef=await master_shop[_0x3a7db4(0x1cc)]();console[_0x3a7db4(0x1c2)](_0x3a7db4(0x1dd),_0x3793ef);const _0x4a6828=await warehouse[_0x3a7db4(0x1cc)]({}),_0x5673f3=await product[_0x3a7db4(0x1cc)]({});if(_0x3793ef[0x0]['language']=='English\x20(US)'){var _0x401e01=users['English'];console['log'](_0x401e01);}else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]==_0x3a7db4(0x1b7))var _0x401e01=users[_0x3a7db4(0x1b7)];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]=='German')var _0x401e01=users[_0x3a7db4(0x1cb)];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]==_0x3a7db4(0x1ce))var _0x401e01=users['Spanish'];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]==_0x3a7db4(0x1ec))var _0x401e01=users[_0x3a7db4(0x1ec)];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]=='Portuguese\x20(BR)')var _0x401e01=users[_0x3a7db4(0x1b8)];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]=='Chinese')var _0x401e01=users[_0x3a7db4(0x1e3)];else{if(_0x3793ef[0x0][_0x3a7db4(0x1ed)]==_0x3a7db4(0x1e1))var _0x401e01=users['Arabic'];}}}}}}}_0x51b9d1[_0x3a7db4(0x1d5)]('stock_report',{'success':_0x5b2a28[_0x3a7db4(0x1df)]('success'),'errors':_0x5b2a28[_0x3a7db4(0x1df)](_0x3a7db4(0x1db)),'role':_0x351b4f,'profile':_0x20edb3,'master_shop':_0x3793ef,'warehouse':_0x4a6828,'product':_0x5673f3,'warehouse_doc':[],'product_doc':[],'language':_0x401e01});}catch(_0x153e77){console['log'](_0x153e77);}}),router[a0_0x5ef8ce(0x1b6)]('/view/:id',auth,async(_0x265cbf,_0x37a006)=>{var _0x2dde9d=a0_0x5ef8ce;try{const _0x4c51aa=await master_shop[_0x2dde9d(0x1cc)]();console[_0x2dde9d(0x1c2)](_0x2dde9d(0x1dd),_0x4c51aa);if(_0x265cbf[_0x2dde9d(0x1dc)]['id']==_0x2dde9d(0x1b3)){const _0x1ddf5c=await warehouse[_0x2dde9d(0x1cc)]();console['log'](_0x1ddf5c);if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1b5)){var _0x16a21f=users[_0x2dde9d(0x1e0)];console[_0x2dde9d(0x1c2)](_0x16a21f);}else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1b7))var _0x16a21f=users['Hindi'];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1cb))var _0x16a21f=users[_0x2dde9d(0x1cb)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]=='Spanish')var _0x16a21f=users[_0x2dde9d(0x1ce)];else{if(_0x4c51aa[0x0]['language']==_0x2dde9d(0x1ec))var _0x16a21f=users[_0x2dde9d(0x1ec)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1ba))var _0x16a21f=users[_0x2dde9d(0x1b8)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1e3))var _0x16a21f=users[_0x2dde9d(0x1e3)];else{if(_0x4c51aa[0x0]['language']==_0x2dde9d(0x1e1))var _0x16a21f=users[_0x2dde9d(0x1b1)];}}}}}}}_0x37a006[_0x2dde9d(0x1ca)](0xc8)['json']({'data':_0x1ddf5c,'language':_0x16a21f[_0x2dde9d(0x1b3)]});}else{const _0x48c11b=await product[_0x2dde9d(0x1cc)]();console[_0x2dde9d(0x1c2)](_0x2dde9d(0x1b4),_0x48c11b);if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]=='English\x20(US)'){var _0x16a21f=users[_0x2dde9d(0x1e0)];console[_0x2dde9d(0x1c2)](_0x16a21f);}else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1b7))var _0x16a21f=users[_0x2dde9d(0x1b7)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1cb))var _0x16a21f=users[_0x2dde9d(0x1cb)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1ce))var _0x16a21f=users['Spanish'];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1ec))var _0x16a21f=users[_0x2dde9d(0x1ec)];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1ba))var _0x16a21f=users['Portuguese'];else{if(_0x4c51aa[0x0][_0x2dde9d(0x1ed)]==_0x2dde9d(0x1e3))var _0x16a21f=users[_0x2dde9d(0x1e3)];else{if(_0x4c51aa[0x0]['language']=='Arabic\x20(ae)')var _0x16a21f=users['Arabic'];}}}}}}}_0x37a006['status'](0xc8)[_0x2dde9d(0x1e8)]({'data':_0x48c11b,'language':_0x16a21f['products']});}}catch(_0x5eaff7){console[_0x2dde9d(0x1c2)](_0x5eaff7);}}),router[a0_0x5ef8ce(0x1b6)]('/view/warehouse/:id',auth,async(_0x34ba99,_0x4afeb3)=>{var _0x284278=a0_0x5ef8ce;try{const _0x14b551=_0x34ba99['params']['id'];console[_0x284278(0x1c2)](_0x14b551);const _0x3b136b=await master_shop['find']();console[_0x284278(0x1c2)](_0x284278(0x1dd),_0x3b136b);const _0x8e642b=await warehouse['aggregate']([{'$match':{'name':_0x14b551}},{'$unwind':_0x284278(0x1c6)},{'$lookup':{'from':'products','localField':_0x284278(0x1b2),'foreignField':'name','as':_0x284278(0x1c5)}},{'$unwind':_0x284278(0x1d8)},{'$project':{'name':0x1,'product_name':_0x284278(0x1b9),'product_stock':_0x284278(0x1be),'category':'$product_docs.category','brand':'$product_docs.brand','sku':_0x284278(0x1ea),'unit':'$product_docs.unit','rak':'product_details.rak_name','bin':_0x284278(0x1d3)}}]);console[_0x284278(0x1c2)](_0x8e642b);if(_0x3b136b[0x0][_0x284278(0x1ed)]==_0x284278(0x1b5)){var _0xe38f07=users[_0x284278(0x1e0)];console[_0x284278(0x1c2)](_0xe38f07);}else{if(_0x3b136b[0x0][_0x284278(0x1ed)]==_0x284278(0x1b7))var _0xe38f07=users[_0x284278(0x1b7)];else{if(_0x3b136b[0x0][_0x284278(0x1ed)]=='German')var _0xe38f07=users[_0x284278(0x1cb)];else{if(_0x3b136b[0x0][_0x284278(0x1ed)]==_0x284278(0x1ce))var _0xe38f07=users[_0x284278(0x1ce)];else{if(_0x3b136b[0x0][_0x284278(0x1ed)]=='French')var _0xe38f07=users[_0x284278(0x1ec)];else{if(_0x3b136b[0x0]['language']==_0x284278(0x1ba))var _0xe38f07=users[_0x284278(0x1b8)];else{if(_0x3b136b[0x0]['language']==_0x284278(0x1e3))var _0xe38f07=users['Chinese'];else{if(_0x3b136b[0x0][_0x284278(0x1ed)]==_0x284278(0x1e1))var _0xe38f07=users['Arabic'];}}}}}}}_0x4afeb3[_0x284278(0x1ca)](0xc8)[_0x284278(0x1e8)]({'data':_0x8e642b,'language':_0xe38f07});}catch(_0x4ddd77){console[_0x284278(0x1c2)](_0x4ddd77);}}),router[a0_0x5ef8ce(0x1b6)](a0_0x5ef8ce(0x1cf),auth,async(_0xd7d704,_0xe7c5ba)=>{var _0x3bb423=a0_0x5ef8ce;try{const _0x1b40e3=_0xd7d704['params']['id'];console[_0x3bb423(0x1c2)](_0x1b40e3);const _0x13d399=await master_shop[_0x3bb423(0x1cc)]();console['log'](_0x3bb423(0x1dd),_0x13d399);const _0x2c02e6=await product[_0x3bb423(0x1b0)]({'name':_0x1b40e3});console[_0x3bb423(0x1c2)](_0x3bb423(0x1e2),_0x2c02e6);const _0xcf98bb=await warehouse[_0x3bb423(0x1d4)]([{'$unwind':_0x3bb423(0x1c6)},{'$match':{'product_details.product_name':_0x1b40e3}},{'$project':{'name':0x1,'product_name':_0x3bb423(0x1b9),'product_stock':_0x3bb423(0x1be)}}]);console[_0x3bb423(0x1c2)]('warehouse_data',_0xcf98bb);if(_0x13d399[0x0][_0x3bb423(0x1ed)]=='English\x20(US)'){var _0x5a91d3=users[_0x3bb423(0x1e0)];console[_0x3bb423(0x1c2)](_0x5a91d3);}else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]==_0x3bb423(0x1b7))var _0x5a91d3=users[_0x3bb423(0x1b7)];else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]==_0x3bb423(0x1cb))var _0x5a91d3=users['German'];else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]==_0x3bb423(0x1ce))var _0x5a91d3=users[_0x3bb423(0x1ce)];else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]==_0x3bb423(0x1ec))var _0x5a91d3=users['French'];else{if(_0x13d399[0x0]['language']=='Portuguese\x20(BR)')var _0x5a91d3=users[_0x3bb423(0x1b8)];else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]=='Chinese')var _0x5a91d3=users[_0x3bb423(0x1e3)];else{if(_0x13d399[0x0][_0x3bb423(0x1ed)]==_0x3bb423(0x1e1))var _0x5a91d3=users[_0x3bb423(0x1b1)];}}}}}}}_0xe7c5ba[_0x3bb423(0x1ca)](0xc8)['json']({'product_data':_0x2c02e6,'warehouse_data':_0xcf98bb,'language':_0x5a91d3});}catch(_0x350c04){console['log'](_0x350c04);}}),router['post'](a0_0x5ef8ce(0x1c3),async(_0x582484,_0x187dfd)=>{var _0x460e48=a0_0x5ef8ce;const {warehouseNew:_0x28717a,rooms:_0x1879f7,Type:_0x45ea82,process_cat:_0xfb4fe,room_cat:_0xa42ca3}=_0x582484[_0x460e48(0x1e5)];let _0x33378c;console[_0x460e48(0x1c2)](_0x582484[_0x460e48(0x1e5)]);if(_0xfb4fe==_0x460e48(0x1c7))_0x33378c=await warehouse['aggregate']([{'$match':{'name':_0x28717a,'room':_0x1879f7,'warehouse_category':_0x460e48(0x1d2)}},{'$unwind':_0x460e48(0x1c6)},{'$match':{'product_details.type':_0x45ea82,'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]);else _0xfb4fe==_0x460e48(0x1e7)?_0x1879f7==_0x460e48(0x1e6)?_0x33378c=await warehouse[_0x460e48(0x1d4)]([{'$match':{'name':_0x28717a,'warehouse_category':'Finished\x20Goods'}},{'$unwind':_0x460e48(0x1c6)},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]):_0x33378c=await warehouse['aggregate']([{'$match':{'name':_0x28717a,'room':_0x1879f7,'warehouse_category':_0x460e48(0x1d6)}},{'$unwind':_0x460e48(0x1c6)},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}]):(console['log'](_0x460e48(0x1c4)),Include=[{'$unwind':_0x460e48(0x1c6)},{'$match':{'product_details.product_stock':{'$gt':0x0}}},{'$sort':{'warehouse_category':0x1,'product_details.bay':0x1}}],_0x33378c=await warehouse[_0x460e48(0x1d4)](Include));_0x187dfd[_0x460e48(0x1e8)](_0x33378c);}),router[a0_0x5ef8ce(0x1de)](a0_0x5ef8ce(0x1d1),async(_0xe144ba,_0x4127a5)=>{var _0x1d4276=a0_0x5ef8ce;const {warehouseNew:_0x2c8686,rooms:_0x1da3d6,Type:_0x4a5139,process_cat:_0x1176b5,room_cat:_0x431af3}=_0xe144ba[_0x1d4276(0x1e5)],_0x4da12f=await product[_0x1d4276(0x1cc)]();_0x4127a5[_0x1d4276(0x1e8)](_0x4da12f);}),module[a0_0x5ef8ce(0x1e9)]=router;function a0_0x3203(_0x1b0183,_0x4ffd8c){var _0x2516f4=a0_0x2516();return a0_0x3203=function(_0x320310,_0x20a56c){_0x320310=_0x320310-0x1b0;var _0x122734=_0x2516f4[_0x320310];return _0x122734;},a0_0x3203(_0x1b0183,_0x4ffd8c);}function a0_0x2516(){var _0x20b4d2=['raw','4219912UZFUpV','../models/all_models','status','German','find','Router','Spanish','/view/product/:id','2603220bUEjVZ','/Reports_product','Raw\x20Materials','product_details.bin_name','aggregate','render','Finished\x20Goods','4177380lpCKjI','$product_docs','/view','user','errors','params','master','post','flash','English','Arabic\x20(ae)','product_data','Chinese','role_data','body','All','finish','json','exports','$product_docs.sku','2457896AdQUZF','French','language','117CZqaST','findOne','Arabic','product_details.product_name','warehouse','111','English\x20(US)','get','Hindi','Portuguese','$product_details.product_name','Portuguese\x20(BR)','2302641FsPImO','../public/language/languages.json','5BaTMca','$product_details.product_stock','1078217hadMEW','93304ZeDZpH','819GzPKFW','log','/Reports','ssd','product_docs','$product_details'];a0_0x2516=function(){return _0x20b4d2;};return a0_0x2516();}