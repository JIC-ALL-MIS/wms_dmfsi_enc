function a0_0x1048(){const _0x225d37=['439056QqsGpD','140nQOpJH','$warehouse_name','secondary_code_hide','purchase_quantity','$suppliers','$return_product.price','product_name','suppliers','Finished\x20Goods','$total_amount','stock_quantity','exports','product_stock','German','return_product','$received','note','$name','flash','French','redirect','Hindi','stocks','$note','return_qty','$supplier_docs','findOne','$product_details.product_code','post','/view','product_code','supplier_docs','168Btoswi','map','status','Router','2838282VOYSnS','user','$return_product.total','slice','amount','log','Arabic','$product_details.bay','4qlcOli','$invoice','../middleware/auth','Spanish','../models/all_models','5zsVvOk','master','../public/language/languages.json','Portuguese\x20(BR)','getFullYear','Return\x20Goods','save','$_id','$product_details.floorlevel','email','return_purchase_invoice','Purchase\x20Return','/purchases_return_finished/view','$supplier_docs.mobile','message','errors','$return_product','$return_product.return_qty','Arabic\x20(ae)','$return_product.product_name','199285uAfZKL','Chinese','$product_details.bin','getMonth','name','aggregate','forEach','render','product_code_hide','Enabled','/view/:id','$product_details','$product_details.product_stock','3140CaBZmF','/purchases_return/view','product_details','level','$product_details.storage','express','language','$supplier_docs.address','body','$supplier_docs.email','params','English','success','2450259KBnaCa','json','purchase\x20return\x20successfully','411688zFOdNX','return_purchase_edit_finished','$discount','invoice','$date','string','484946GsGtsj','warehouse_name','bay','findById','/invoice/:id','find','secondary_code','received','189dJaCLV','get','$due_amount','Portuguese','room','$product_details.secondary_code'];a0_0x1048=function(){return _0x225d37;};return a0_0x1048();}function a0_0xe239(_0x3e45c9,_0x1fa408){const _0x104818=a0_0x1048();return a0_0xe239=function(_0xe239d1,_0x4540da){_0xe239d1=_0xe239d1-0xd7;let _0x2781c4=_0x104818[_0xe239d1];return _0x2781c4;},a0_0xe239(_0x3e45c9,_0x1fa408);}const a0_0x3eb2d2=a0_0xe239;(function(_0x3e20ad,_0x1f6418){const _0xa49867=a0_0xe239,_0x4b64c0=_0x3e20ad();while(!![]){try{const _0x11c0cf=-parseInt(_0xa49867(0xf9))/0x1*(parseInt(_0xa49867(0xe0))/0x2)+-parseInt(_0xa49867(0x124))/0x3*(parseInt(_0xa49867(0x106))/0x4)+-parseInt(_0xa49867(0xe5))/0x5*(-parseInt(_0xa49867(0xd8))/0x6)+parseInt(_0xa49867(0x113))/0x7+-parseInt(_0xa49867(0x116))/0x8+-parseInt(_0xa49867(0x12a))/0x9*(-parseInt(_0xa49867(0x12b))/0xa)+-parseInt(_0xa49867(0x11c))/0xb*(parseInt(_0xa49867(0x14b))/0xc);if(_0x11c0cf===_0x1f6418)break;else _0x4b64c0['push'](_0x4b64c0['shift']());}catch(_0x5bd049){_0x4b64c0['push'](_0x4b64c0['shift']());}}}(a0_0x1048,0x5f0fa));const express=require(a0_0x3eb2d2(0x10b)),app=express(),router=express[a0_0x3eb2d2(0xd7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,purchases_return_finished}=require(a0_0x3eb2d2(0xe4)),auth=require(a0_0x3eb2d2(0xe2)),users=require(a0_0x3eb2d2(0xe7));router[a0_0x3eb2d2(0x125)](a0_0x3eb2d2(0x148),auth,async(_0x58f8b4,_0x3560df)=>{const _0x454d92=a0_0x3eb2d2;try{const {username:_0x12828c,email:_0x2e52c2,role:_0x71994}=_0x58f8b4[_0x454d92(0xd9)],_0x53e2dd=_0x58f8b4[_0x454d92(0xd9)],_0x27f868=await profile['findOne']({'email':_0x53e2dd[_0x454d92(0xee)]}),_0x436ed3=await master_shop[_0x454d92(0x121)]();console[_0x454d92(0xdd)]('master',_0x436ed3);const _0x3d9d65=await purchases_return_finished[_0x454d92(0xfe)]([{'$lookup':{'from':_0x454d92(0x132),'localField':'suppliers','foreignField':_0x454d92(0xfd),'as':_0x454d92(0x14a)}},{'$unwind':_0x454d92(0xf5)},{'$unwind':_0x454d92(0x144)},{'$group':{'_id':_0x454d92(0xec),'invoice':{'$first':_0x454d92(0xe1)},'date':{'$first':_0x454d92(0x11a)},'suppliers':{'$first':_0x454d92(0x12f)},'warehouse_name':{'$first':_0x454d92(0x12c)},'product_name':{'$first':_0x454d92(0xf8)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x454d92(0x130)},'total':{'$sum':_0x454d92(0xda)},'note':{'$first':_0x454d92(0x142)},'total_amount':{'$first':_0x454d92(0x134)},'discount':{'$first':_0x454d92(0x118)},'receivable':{'$first':'$receivable'},'received':{'$first':_0x454d92(0x13a)},'due_amount':{'$first':_0x454d92(0x126)},'mobile':{'$first':_0x454d92(0xf2)},'email':{'$first':_0x454d92(0x10f)},'address':{'$first':_0x454d92(0x10d)},'return_sum_qty':{'$sum':_0x454d92(0xf6)}}}]);console[_0x454d92(0xdd)](_0x3d9d65);if(_0x436ed3[0x0][_0x454d92(0x10c)]=='English\x20(US)'){var _0x145f65=users[_0x454d92(0x111)];console[_0x454d92(0xdd)](_0x145f65);}else{if(_0x436ed3[0x0][_0x454d92(0x10c)]==_0x454d92(0x140))var _0x145f65=users[_0x454d92(0x140)];else{if(_0x436ed3[0x0]['language']==_0x454d92(0x138))var _0x145f65=users['German'];else{if(_0x436ed3[0x0]['language']==_0x454d92(0xe3))var _0x145f65=users[_0x454d92(0xe3)];else{if(_0x436ed3[0x0][_0x454d92(0x10c)]=='French')var _0x145f65=users[_0x454d92(0x13e)];else{if(_0x436ed3[0x0][_0x454d92(0x10c)]==_0x454d92(0xe8))var _0x145f65=users['Portuguese'];else{if(_0x436ed3[0x0][_0x454d92(0x10c)]=='Chinese')var _0x145f65=users[_0x454d92(0xfa)];else{if(_0x436ed3[0x0]['language']==_0x454d92(0xf7))var _0x145f65=users[_0x454d92(0xde)];}}}}}}}_0x3560df[_0x454d92(0x100)]('purchases_return_finished',{'success':_0x58f8b4['flash'](_0x454d92(0x112)),'errors':_0x58f8b4[_0x454d92(0x13d)](_0x454d92(0xf4)),'role':_0x53e2dd,'profile':_0x27f868,'master_shop':_0x436ed3,'user':_0x3d9d65,'language':_0x145f65});}catch(_0x44ed21){console[_0x454d92(0xdd)](_0x44ed21);}}),router[a0_0x3eb2d2(0x125)](a0_0x3eb2d2(0x103),auth,async(_0x7e3da0,_0x53ea92)=>{const _0x522279=a0_0x3eb2d2;try{const {username:_0x33cb46,email:_0x4ca1f5,role:_0x538031}=_0x7e3da0['user'],_0xc28039=_0x7e3da0[_0x522279(0xd9)],_0x523908=await profile[_0x522279(0x145)]({'email':_0xc28039[_0x522279(0xee)]}),_0x18f3b8=await product['find']({}),_0x53d20b=await master_shop['find'](),_0x49d301=_0x7e3da0[_0x522279(0x110)]['id'],_0x146938=await purchases_return_finished[_0x522279(0x11f)](_0x49d301),_0x3eddec=await warehouse[_0x522279(0xfe)]([{'$match':{'name':_0x146938[_0x522279(0x11d)],'room':_0x146938[_0x522279(0x128)],'warehouse_category':_0x522279(0x133)}},{'$unwind':_0x522279(0x104)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x522279(0x105)},'bay':{'$first':_0x522279(0xdf)},'bin':{'$first':_0x522279(0xfb)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x522279(0xed)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x522279(0x129)},'product_code':{'$first':_0x522279(0x146)},'storage':{'$first':_0x522279(0x10a)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x522279(0xfe)]([{'$match':{'status':_0x522279(0x102),'name':_0x522279(0xea),'warehouse_category':_0x522279(0x133)}},{'$group':{'_id':_0x522279(0x13c),'name':{'$first':_0x522279(0x13c)}}},{'$sort':{'name':0x1}}]),console['log']('stock_data',_0x3eddec);if(_0x53d20b[0x0]['language']=='English\x20(US)'){var _0x32990e=users[_0x522279(0x111)];console['log'](_0x32990e);}else{if(_0x53d20b[0x0]['language']=='Hindi')var _0x32990e=users[_0x522279(0x140)];else{if(_0x53d20b[0x0][_0x522279(0x10c)]==_0x522279(0x138))var _0x32990e=users[_0x522279(0x138)];else{if(_0x53d20b[0x0]['language']=='Spanish')var _0x32990e=users[_0x522279(0xe3)];else{if(_0x53d20b[0x0][_0x522279(0x10c)]==_0x522279(0x13e))var _0x32990e=users['French'];else{if(_0x53d20b[0x0][_0x522279(0x10c)]==_0x522279(0xe8))var _0x32990e=users[_0x522279(0x127)];else{if(_0x53d20b[0x0]['language']=='Chinese')var _0x32990e=users[_0x522279(0xfa)];else{if(_0x53d20b[0x0]['language']=='Arabic\x20(ae)')var _0x32990e=users[_0x522279(0xde)];}}}}}}}_0x53ea92[_0x522279(0x100)](_0x522279(0x117),{'success':_0x7e3da0['flash'](_0x522279(0x112)),'errors':_0x7e3da0[_0x522279(0x13d)]('errors'),'role':_0xc28039,'master_shop':_0x53d20b,'profile':_0x523908,'user':_0x146938,'stock':_0x3eddec,'product':_0x18f3b8,'language':_0x32990e,'warehouse':warehouse_data});}catch(_0x3ca156){console[_0x522279(0xdd)](_0x3ca156);}}),router[a0_0x3eb2d2(0x147)](a0_0x3eb2d2(0x103),auth,async(_0x43bcec,_0x32929c)=>{const _0x469f0e=a0_0x3eb2d2;try{const _0x4dfb60=_0x43bcec[_0x469f0e(0x110)]['id'],_0x1a9c45=await purchases_return_finished['findOne']({'invoice':_0x43bcec['body'][_0x469f0e(0x119)]}),_0x378021=await warehouse[_0x469f0e(0x145)]({'name':_0x1a9c45['to_warehouse_name'],'room':_0x1a9c45['to_room'],'warehouse_category':_0x469f0e(0x133)}),{invoice:_0x5b3bf1,suppliers:_0x416a6f,date:_0x414298,warehouse_name:_0x161cce,product_name:_0x5b8611,purchase_quantity:_0x31f010,stocks:_0x22b3bb,return_qty:_0x38293b,note:_0xce5b70,Room_name:_0x557efc,level:_0x5d475e,isle:_0x4a24d1,pallet:_0x97f637,to_warehouse_name:_0x3bd676,to_Room_name:_0x4ca847}=_0x43bcec[_0x469f0e(0x10e)];if(typeof _0x5b8611==_0x469f0e(0x11b))var _0x435f89=[_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x131)]],_0x4082ac=[_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x12e)]],_0x200c10=[_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x141)]],_0x175c15=[_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x143)]],_0x1aaf96=[_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x109)]],_0xa64cd2=[_0x43bcec['body'][_0x469f0e(0x101)]],_0x420647=[_0x43bcec[_0x469f0e(0x10e)]['primary_code_hide']],_0x24c459=[_0x43bcec['body'][_0x469f0e(0x12d)]];else var _0x435f89=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x131)]],_0x4082ac=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x12e)]],_0x200c10=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x141)]],_0x175c15=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x143)]],_0x1aaf96=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x109)]],_0xa64cd2=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x101)]],_0x420647=[..._0x43bcec['body']['primary_code_hide']],_0x24c459=[..._0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x12d)]];const _0x5da99b=_0x435f89[_0x469f0e(0x14c)](_0x9f0e04=>{return _0x9f0e04={'product_name':_0x9f0e04};});_0x4082ac['forEach']((_0x52c79d,_0x38cddf)=>{const _0x3e49c7=_0x469f0e;_0x5da99b[_0x38cddf][_0x3e49c7(0x12e)]=_0x52c79d;}),_0x200c10[_0x469f0e(0xff)]((_0x519803,_0x42f410)=>{const _0x3e54a8=_0x469f0e;_0x5da99b[_0x42f410][_0x3e54a8(0x135)]=_0x519803;}),_0x175c15[_0x469f0e(0xff)]((_0x29a8cb,_0x2d09b7)=>{const _0x4d16f6=_0x469f0e;_0x5da99b[_0x2d09b7][_0x4d16f6(0x143)]=_0x29a8cb;}),_0x1aaf96['forEach']((_0x1f807a,_0xf2dc80)=>{_0x5da99b[_0xf2dc80]['bay']=_0x1f807a;}),_0xa64cd2[_0x469f0e(0xff)]((_0x21ef42,_0x2e5125)=>{const _0x2bd298=_0x469f0e;_0x5da99b[_0x2e5125][_0x2bd298(0x149)]=_0x21ef42;}),_0x420647['forEach']((_0x33d576,_0x3ea831)=>{_0x5da99b[_0x3ea831]['primary_code']=_0x33d576;}),_0x24c459[_0x469f0e(0xff)]((_0x51bff4,_0x5d138e)=>{const _0x36560e=_0x469f0e;_0x5da99b[_0x5d138e][_0x36560e(0x122)]=_0x51bff4;});var _0x326e81=0x0;_0x5da99b[_0x469f0e(0xff)](_0x3273f5=>{const _0x700192=_0x469f0e;(parseInt(_0x3273f5[_0x700192(0x12e)])<parseInt(_0x3273f5[_0x700192(0x143)])||parseInt(_0x3273f5[_0x700192(0x135)])<parseInt(_0x3273f5[_0x700192(0x143)]))&&_0x326e81++;});if(_0x326e81!=0x0)return _0x43bcec[_0x469f0e(0x13d)](_0x469f0e(0xf4),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x32929c[_0x469f0e(0x13f)]('back');_0x1a9c45[_0x469f0e(0x139)]['forEach'](_0x4a83ae=>{const _0x35bcf7=_0x469f0e;if(_0x4a83ae['return_qty']>0x0){const _0x4fec65=_0x378021[_0x35bcf7(0x108)][_0x35bcf7(0x14c)](_0x370a79=>{const _0x453e57=_0x35bcf7;_0x370a79['product_name']==_0x4a83ae[_0x453e57(0x131)]&&_0x370a79[_0x453e57(0x11e)]==_0x4a83ae[_0x453e57(0x11e)]&&(_0x370a79['product_stock']=parseInt(_0x370a79['product_stock'])+parseInt(_0x4a83ae[_0x453e57(0x143)]));});}}),await _0x378021['save'](),_0x1a9c45[_0x469f0e(0x119)]=_0x5b3bf1,_0x1a9c45['suppliers']=_0x416a6f,_0x1a9c45['date']=_0x414298,_0x1a9c45['warehouse_name']=_0x161cce,_0x1a9c45['return_product']=_0x5da99b,_0x1a9c45[_0x469f0e(0x13b)]=_0xce5b70,_0x1a9c45[_0x469f0e(0x128)]=_0x557efc,_0x1a9c45['to_warehouse_name']=_0x3bd676,_0x1a9c45['to_room']=_0x4ca847;const _0x6c0e5c=await _0x1a9c45[_0x469f0e(0xeb)](),_0x5cbd3e=await purchases_return_finished[_0x469f0e(0x145)]({'invoice':_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x119)]}),_0x394f42=await warehouse['findOne']({'name':_0x43bcec[_0x469f0e(0x10e)]['to_warehouse_name'],'room':_0x43bcec[_0x469f0e(0x10e)]['to_Room_name'],'warehouse_category':_0x469f0e(0x133)});_0x5cbd3e[_0x469f0e(0x139)][_0x469f0e(0xff)](_0xcb7ad4=>{const _0xd2d29d=_0x469f0e;_0x394f42[_0xd2d29d(0x108)][_0xd2d29d(0x14c)](_0x5275bc=>{const _0x307755=_0xd2d29d;_0x5275bc[_0x307755(0x131)]==_0xcb7ad4['product_name']&&_0x5275bc[_0x307755(0x11e)]==_0xcb7ad4[_0x307755(0x11e)]&&(_0x5275bc[_0x307755(0x137)]=parseInt(_0x5275bc[_0x307755(0x137)])-parseInt(_0xcb7ad4[_0x307755(0x143)]));});}),await _0x394f42[_0x469f0e(0xeb)]();const _0x2db480=await s_payment_data[_0x469f0e(0x145)]({'invoice':_0x43bcec[_0x469f0e(0x10e)][_0x469f0e(0x119)],'reason':_0x469f0e(0xf0)});await _0x2db480[_0x469f0e(0xeb)](),_0x43bcec[_0x469f0e(0x13d)](_0x469f0e(0x112),_0x469f0e(0x115)),_0x32929c[_0x469f0e(0x13f)](_0x469f0e(0xf1));}catch(_0x22b99f){console[_0x469f0e(0xdd)](_0x22b99f),_0x32929c[_0x469f0e(0x14d)](0xc8)[_0x469f0e(0x114)]({'message':_0x22b99f[_0x469f0e(0xf3)]});}}),router['get'](a0_0x3eb2d2(0x120),auth,async(_0xa6593f,_0x4d130e)=>{const _0x119c74=a0_0x3eb2d2;try{const {username:_0x246b16,email:_0x5cf2e4,role:_0x470368}=_0xa6593f[_0x119c74(0xd9)],_0x244d63=_0xa6593f['user'],_0x2baa0b=await profile[_0x119c74(0x145)]({'email':_0x244d63['email']}),_0x2eb822=await master_shop[_0x119c74(0x121)]();console[_0x119c74(0xdd)](_0x119c74(0xe6),_0x2eb822);const _0x436ed0=_0xa6593f['params']['id'],_0xb670a2=await purchases_return[_0x119c74(0x11f)](_0x436ed0);console[_0x119c74(0xdd)](_0xb670a2);const _0x14ecfa=await suppliers[_0x119c74(0x145)]({'name':_0xb670a2[_0x119c74(0x132)]});console['log'](_0x14ecfa);if(_0x2eb822[0x0]['language']=='English\x20(US)'){var _0x303d4c=users['English'];console[_0x119c74(0xdd)](_0x303d4c);}else{if(_0x2eb822[0x0]['language']=='Hindi')var _0x303d4c=users[_0x119c74(0x140)];else{if(_0x2eb822[0x0][_0x119c74(0x10c)]==_0x119c74(0x138))var _0x303d4c=users[_0x119c74(0x138)];else{if(_0x2eb822[0x0][_0x119c74(0x10c)]==_0x119c74(0xe3))var _0x303d4c=users[_0x119c74(0xe3)];else{if(_0x2eb822[0x0][_0x119c74(0x10c)]==_0x119c74(0x13e))var _0x303d4c=users[_0x119c74(0x13e)];else{if(_0x2eb822[0x0][_0x119c74(0x10c)]==_0x119c74(0xe8))var _0x303d4c=users['Portuguese'];else{if(_0x2eb822[0x0][_0x119c74(0x10c)]==_0x119c74(0xfa))var _0x303d4c=users[_0x119c74(0xfa)];else{if(_0x2eb822[0x0]['language']==_0x119c74(0xf7))var _0x303d4c=users[_0x119c74(0xde)];}}}}}}}_0x4d130e[_0x119c74(0x100)](_0x119c74(0xef),{'success':_0xa6593f[_0x119c74(0x13d)](_0x119c74(0x112)),'errors':_0xa6593f[_0x119c74(0x13d)](_0x119c74(0xf4)),'role':_0x244d63,'profile':_0x2baa0b,'master_shop':_0x2eb822,'supplier':_0x14ecfa,'purchase':_0xb670a2,'language':_0x303d4c});}catch(_0x91a02a){console[_0x119c74(0xdd)](_0x91a02a);}}),router[a0_0x3eb2d2(0x147)]('/receive_payment/:id',auth,async(_0x26198e,_0x2e23a1)=>{const _0x75ed70=a0_0x3eb2d2;try{const _0x12ecdd=_0x26198e[_0x75ed70(0x110)]['id'],{invoice:_0x16f6e9,suppliers:_0x4c87cb,receivable_amount:_0x3e9465,received_amount:_0x5e63d4}=_0x26198e[_0x75ed70(0x10e)],_0x95feb2=await purchases_return['findById'](_0x12ecdd);console['log'](_0x95feb2);var _0x1162b1=_0x3e9465-_0x5e63d4;console['log'](_0x5e63d4),_0x95feb2[_0x75ed70(0x123)]=parseFloat(_0x5e63d4)+parseFloat(_0x95feb2[_0x75ed70(0x123)]),_0x95feb2['due_amount']=_0x1162b1,console[_0x75ed70(0xdd)](_0x95feb2);const _0x507627=await _0x95feb2[_0x75ed70(0xeb)](),_0x56f56b=await s_payment_data['findOne']({'invoice':_0x26198e[_0x75ed70(0x10e)][_0x75ed70(0x119)],'reason':'Purchase\x20Return'});_0x56f56b[_0x75ed70(0xdc)]=_0x1162b1,await _0x56f56b[_0x75ed70(0xeb)]();let _0x52fc7e=new Date(),_0x17f5d2=('0'+_0x52fc7e['getDate']())[_0x75ed70(0xdb)](-0x2),_0x40aa4e=('0'+(_0x52fc7e[_0x75ed70(0xfc)]()+0x1))[_0x75ed70(0xdb)](-0x2),_0xc9432b=_0x52fc7e[_0x75ed70(0xe9)](),_0x2c67bc=_0xc9432b+'-'+_0x40aa4e+'-'+_0x17f5d2;const _0x542120=new suppliers_payment({'invoice':_0x16f6e9,'date':_0xc9432b+'-'+_0x40aa4e+'-'+_0x17f5d2,'suppliers':_0x4c87cb,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x5e63d4}),_0x5843b9=await _0x542120[_0x75ed70(0xeb)]();_0x26198e[_0x75ed70(0x13d)](_0x75ed70(0x112),'payment\x20successfull'),_0x2e23a1['redirect'](_0x75ed70(0x107));}catch(_0x228f48){console[_0x75ed70(0xdd)](_0x228f48);}}),module[a0_0x3eb2d2(0x136)]=router;