var a0_0x264324=a0_0x1b52;(function(_0x3c60b6,_0x4e9c0b){var _0x3205d6=a0_0x1b52,_0x405c44=_0x3c60b6();while(!![]){try{var _0x24c107=parseInt(_0x3205d6(0x24a))/0x1*(parseInt(_0x3205d6(0x232))/0x2)+parseInt(_0x3205d6(0x1b1))/0x3+-parseInt(_0x3205d6(0x218))/0x4*(-parseInt(_0x3205d6(0x22e))/0x5)+parseInt(_0x3205d6(0x257))/0x6+-parseInt(_0x3205d6(0x24f))/0x7+parseInt(_0x3205d6(0x1fe))/0x8+-parseInt(_0x3205d6(0x202))/0x9*(parseInt(_0x3205d6(0x1cb))/0xa);if(_0x24c107===_0x4e9c0b)break;else _0x405c44['push'](_0x405c44['shift']());}catch(_0x20915b){_0x405c44['push'](_0x405c44['shift']());}}}(a0_0x7f69,0x197d6));const express=require(a0_0x264324(0x247)),app=express(),router=express['Router'](),auth=require(a0_0x264324(0x1c2)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,adjustment_finished,email_settings,supervisor_settings}=require(a0_0x264324(0x224)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x264324(0x1c4));function a0_0x1b52(_0x2a4449,_0xb212bf){var _0x7f6972=a0_0x7f69();return a0_0x1b52=function(_0x1b5234,_0x40c5b4){_0x1b5234=_0x1b5234-0x1a7;var _0x168984=_0x7f6972[_0x1b5234];return _0x168984;},a0_0x1b52(_0x2a4449,_0xb212bf);}router[a0_0x264324(0x1d6)](a0_0x264324(0x250),auth,async(_0x52fe0d,_0x351141)=>{var _0x86430e=a0_0x264324;try{const {username:_0x1671d2,email:_0x4ed111,role:_0x2ef178}=_0x52fe0d[_0x86430e(0x1e0)],_0x5bb258=_0x52fe0d[_0x86430e(0x1e0)],_0x105a30=await profile[_0x86430e(0x210)]({'email':_0x5bb258['email']}),_0x308015=await master_shop[_0x86430e(0x1d8)]();let _0x5ce130;if(_0x5bb258[_0x86430e(0x21a)]==_0x86430e(0x246)){const _0x398e1b=await staff[_0x86430e(0x210)]({'email':_0x5bb258[_0x86430e(0x1da)]});_0x5ce130=await warehouse[_0x86430e(0x1d8)]({'status':_0x86430e(0x238),'name':_0x398e1b[_0x86430e(0x1f1)]});}else _0x5ce130=await warehouse[_0x86430e(0x1d8)]({'status':_0x86430e(0x238)});const _0x24b1ea=await product[_0x86430e(0x1d8)]();let _0x38cef6;if(_0x5bb258[_0x86430e(0x21a)]==_0x86430e(0x246)){const _0x3ef582=await staff[_0x86430e(0x210)]({'email':_0x5bb258['email']});_0x38cef6=await adjustment_finished['find']({'warehouse_name':_0x3ef582[_0x86430e(0x1f1)]});}else _0x38cef6=await adjustment_finished[_0x86430e(0x1fd)]([{'$unwind':'$product'},{'$group':{'_id':'$_id','invoice':{'$first':_0x86430e(0x245)},'date':{'$first':_0x86430e(0x1b9)},'warehouse_name':{'$first':_0x86430e(0x256)},'room':{'$addToSet':_0x86430e(0x23b)},'finalize':{'$first':'$finalize'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1}}]);if(_0x308015[0x0][_0x86430e(0x1df)]==_0x86430e(0x1cf)){var _0x37af48=users[_0x86430e(0x253)];console['log'](_0x37af48);}else{if(_0x308015[0x0]['language']==_0x86430e(0x267))var _0x37af48=users['Hindi'];else{if(_0x308015[0x0][_0x86430e(0x1df)]=='German')var _0x37af48=users[_0x86430e(0x1ec)];else{if(_0x308015[0x0][_0x86430e(0x1df)]==_0x86430e(0x1b4))var _0x37af48=users[_0x86430e(0x1b4)];else{if(_0x308015[0x0][_0x86430e(0x1df)]=='French')var _0x37af48=users[_0x86430e(0x1eb)];else{if(_0x308015[0x0]['language']==_0x86430e(0x200))var _0x37af48=users[_0x86430e(0x263)];else{if(_0x308015[0x0][_0x86430e(0x1df)]==_0x86430e(0x22a))var _0x37af48=users[_0x86430e(0x22a)];else{if(_0x308015[0x0][_0x86430e(0x1df)]==_0x86430e(0x216))var _0x37af48=users['Arabic'];}}}}}}}_0x351141[_0x86430e(0x1a9)](_0x86430e(0x242),{'success':_0x52fe0d[_0x86430e(0x1db)]('success'),'errors':_0x52fe0d['flash'](_0x86430e(0x254)),'role':_0x5bb258,'profile':_0x105a30,'warehouse':_0x5ce130,'product':_0x24b1ea,'adjustment':_0x38cef6,'master_shop':_0x308015,'language':_0x37af48});}catch(_0x123401){console[_0x86430e(0x1f5)](_0x123401);}});async function getRandom8DigitNumber(){var _0x54612d=a0_0x264324;const _0x4b04af=0x989680,_0x3d90e4=0x5f5e0ff,_0x4a6f92=Math[_0x54612d(0x1c3)](Math[_0x54612d(0x20d)]()*(_0x3d90e4-_0x4b04af+0x1))+_0x4b04af;var _0x5159d2;const _0x38bf65=await adjustment_finished[_0x54612d(0x210)]({'invoice':'ADJF-'+_0x4a6f92});return _0x38bf65&&_0x38bf65['length']>0x0?_0x5159d2='ADJF-'+_0x4a6f92:_0x5159d2=_0x54612d(0x233)+_0x4a6f92,_0x5159d2;}router[a0_0x264324(0x1d6)](a0_0x264324(0x23e),auth,async(_0x3df9ed,_0x35c3a4)=>{var _0x365b09=a0_0x264324;try{const {username:_0x597a3c,email:_0x4d71d4,role:_0x840171}=_0x3df9ed['user'],_0x3db6f2=_0x3df9ed[_0x365b09(0x1e0)],_0x2470de=await profile[_0x365b09(0x210)]({'email':_0x3db6f2[_0x365b09(0x1da)]}),_0x5d685d=await master_shop[_0x365b09(0x1d8)]();let _0x3b85a2;if(_0x3db6f2['role']==_0x365b09(0x246)){const _0x59bba8=await staff['findOne']({'email':_0x3db6f2['email']});_0x3b85a2=await warehouse[_0x365b09(0x1fd)]([{'$match':{'status':_0x365b09(0x238),'name':_0x59bba8[_0x365b09(0x1f1)],'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x365b09(0x264)}}},{'$group':{'_id':_0x365b09(0x203),'name':{'$first':_0x365b09(0x203)}}}]);}else _0x3b85a2=await warehouse[_0x365b09(0x1fd)]([{'$match':{'status':'Enabled','warehouse_category':_0x365b09(0x24c),'name':{'$ne':'QA\x20Warehouse'}}},{'$group':{'_id':_0x365b09(0x203),'name':{'$first':_0x365b09(0x203)}}}]);const _0x481f88=await product[_0x365b09(0x1d8)]({}),_0x50ac16=await adjustment_finished[_0x365b09(0x1d8)]({}),_0x3f00ab=_0x50ac16[_0x365b09(0x20b)]+0x1,_0x21daa4=_0x365b09(0x233)+_0x3f00ab[_0x365b09(0x208)]()[_0x365b09(0x23d)](0x5,'0');var _0x2d51f1=[_0x365b09(0x212),_0x365b09(0x1bf),_0x365b09(0x241)];if(_0x5d685d[0x0]['language']==_0x365b09(0x1cf))var _0x17a6c1=users['English'];else{if(_0x5d685d[0x0][_0x365b09(0x1df)]==_0x365b09(0x267))var _0x17a6c1=users[_0x365b09(0x267)];else{if(_0x5d685d[0x0]['language']==_0x365b09(0x1ec))var _0x17a6c1=users['German'];else{if(_0x5d685d[0x0]['language']==_0x365b09(0x1b4))var _0x17a6c1=users[_0x365b09(0x1b4)];else{if(_0x5d685d[0x0][_0x365b09(0x1df)]=='French')var _0x17a6c1=users[_0x365b09(0x1eb)];else{if(_0x5d685d[0x0][_0x365b09(0x1df)]==_0x365b09(0x200))var _0x17a6c1=users[_0x365b09(0x263)];else{if(_0x5d685d[0x0]['language']==_0x365b09(0x22a))var _0x17a6c1=users['Chinese'];else{if(_0x5d685d[0x0]['language']=='Arabic\x20(ae)')var _0x17a6c1=users['Arabic'];}}}}}}}const _0x445ec0=getRandom8DigitNumber();_0x445ec0[_0x365b09(0x1ea)](_0x4b0725=>{var _0x34d59c=_0x365b09;_0x35c3a4[_0x34d59c(0x1a9)]('add_adjustment_finished',{'success':_0x3df9ed[_0x34d59c(0x1db)]('success'),'errors':_0x3df9ed['flash']('errors'),'role':_0x3db6f2,'profile':_0x2470de,'warehouse':_0x3b85a2,'product':_0x481f88,'master_shop':_0x5d685d,'language':_0x17a6c1,'rooms_data':_0x2d51f1,'invoice_no':_0x4b0725});})[_0x365b09(0x236)](_0x3ed78d=>{var _0x540081=_0x365b09;_0x3df9ed[_0x540081(0x1db)](_0x540081(0x254),_0x540081(0x1d1)),_0x35c3a4[_0x540081(0x1ef)](_0x540081(0x1b5));});}catch(_0xcdefc2){console[_0x365b09(0x1f5)](_0xcdefc2);}}),router[a0_0x264324(0x1fb)](a0_0x264324(0x23e),auth,async(_0x28e4b8,_0x15aeb8)=>{var _0x331c4f=a0_0x264324;try{const {warehouse_name:_0x3867dc,date:_0x59faf7,prod_name:_0x2f80b9,level:_0x18778f,isle:_0x29f1bb,pallet:_0x169124,stock:_0x21f242,types:_0xcfecf3,adjust_qty:_0x505a41,new_adjust_qty:_0x22ef15,note:_0x3d9901,Room_name:_0x126b0a,invoice:_0xfc93f,JO_number:_0x4e5e98,expiry_date:_0x531bea}=_0x28e4b8['body'];if(typeof _0x2f80b9==_0x331c4f(0x252))var _0x465940=[_0x28e4b8[_0x331c4f(0x240)]['prod_name']],_0x515744=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1e5)]],_0x8d394f=[_0x28e4b8[_0x331c4f(0x240)]['stock']],_0x234f37=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x25e)]],_0x5641f1=[_0x28e4b8['body'][_0x331c4f(0x25d)]],_0x2c89a4=[_0x28e4b8['body'][_0x331c4f(0x1de)]],_0x56d159=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x20f)]],_0x1d310a=[_0x28e4b8[_0x331c4f(0x240)]['Secondary_units']],_0x5a2c31=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1a7)]],_0x5e7bd8=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1ca)]],_0x4cbeb0=[_0x28e4b8[_0x331c4f(0x240)]['expiry_date']],_0x3aeb59=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1f2)]],_0x1e8bd5=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x230)]],_0x4303f9=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1d9)]],_0x759660=[_0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x225)]],_0x31c103=[_0x28e4b8[_0x331c4f(0x240)]['prod_invoice']];else var _0x465940=[..._0x28e4b8['body'][_0x331c4f(0x1c1)]],_0x515744=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1e5)]],_0x8d394f=[..._0x28e4b8['body']['stock']],_0x234f37=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x25e)]],_0x5641f1=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x25d)]],_0x2c89a4=[..._0x28e4b8['body'][_0x331c4f(0x1de)]],_0x56d159=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x20f)]],_0x1d310a=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x25a)]],_0x5a2c31=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1a7)]],_0x5e7bd8=[..._0x28e4b8['body']['batch_code']],_0x4cbeb0=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1f6)]],_0x3aeb59=[..._0x28e4b8[_0x331c4f(0x240)][_0x331c4f(0x1f2)]],_0x1e8bd5=[..._0x28e4b8['body'][_0x331c4f(0x230)]],_0x4303f9=[..._0x28e4b8[_0x331c4f(0x240)]['Rooms']],_0x759660=[..._0x28e4b8['body'][_0x331c4f(0x225)]],_0x31c103=[..._0x28e4b8[_0x331c4f(0x240)]['prod_invoice']];const _0x5eac05=_0x465940[_0x331c4f(0x1f7)](_0x301a1b=>{return _0x301a1b={'product_name':_0x301a1b};});_0x515744['forEach']((_0x29ae50,_0x18d592)=>{var _0x319094=_0x331c4f;_0x5eac05[_0x18d592][_0x319094(0x222)]=_0x29ae50;}),_0x8d394f[_0x331c4f(0x260)]((_0x49637e,_0x4bc43b)=>{var _0x449dd4=_0x331c4f;_0x5eac05[_0x4bc43b][_0x449dd4(0x1ee)]=_0x49637e;}),_0x234f37['forEach']((_0x4ac7f5,_0xa45bf9)=>{var _0x50d8ce=_0x331c4f;_0x5eac05[_0xa45bf9][_0x50d8ce(0x25e)]=_0x4ac7f5;}),_0x5641f1[_0x331c4f(0x260)]((_0x587b36,_0x287c85)=>{var _0x10a5b7=_0x331c4f;_0x5eac05[_0x287c85][_0x10a5b7(0x1b2)]=_0x587b36;}),_0x2c89a4['forEach']((_0x5e051f,_0x2a1572)=>{var _0x2e80e6=_0x331c4f;_0x5eac05[_0x2a1572][_0x2e80e6(0x1b7)]=_0x5e051f;}),_0x56d159['forEach']((_0x1bf50f,_0x864cbc)=>{var _0x233c5b=_0x331c4f;_0x5eac05[_0x864cbc][_0x233c5b(0x1b6)]=_0x1bf50f;}),_0x1d310a['forEach']((_0x5e8a21,_0x1977f0)=>{var _0xe0a166=_0x331c4f;_0x5eac05[_0x1977f0][_0xe0a166(0x1e1)]=_0x5e8a21;}),_0x5a2c31['forEach']((_0x1b08c5,_0x4028f2)=>{var _0x6da488=_0x331c4f;_0x5eac05[_0x4028f2][_0x6da488(0x24e)]=_0x1b08c5;}),_0x5e7bd8[_0x331c4f(0x260)]((_0x2a2814,_0x458931)=>{var _0x4281de=_0x331c4f;_0x5eac05[_0x458931][_0x4281de(0x1ca)]=_0x2a2814;}),_0x4cbeb0[_0x331c4f(0x260)]((_0x596d77,_0x452b43)=>{var _0xba7c71=_0x331c4f;_0x5eac05[_0x452b43][_0xba7c71(0x1f6)]=_0x596d77;}),_0x3aeb59['forEach']((_0x3789f3,_0xbe0124)=>{var _0x3b50e3=_0x331c4f;_0x5eac05[_0xbe0124][_0x3b50e3(0x1b8)]=_0x3789f3;}),_0x1e8bd5['forEach']((_0x58af20,_0x261637)=>{var _0x3d90bf=_0x331c4f;_0x5eac05[_0x261637][_0x3d90bf(0x230)]=_0x58af20;}),_0x4303f9['forEach']((_0x3db321,_0x4b8af3)=>{_0x5eac05[_0x4b8af3]['room_names']=_0x3db321;}),_0x759660[_0x331c4f(0x260)]((_0x40be17,_0x420059)=>{var _0x179386=_0x331c4f;_0x5eac05[_0x420059][_0x179386(0x225)]=_0x40be17;}),_0x31c103[_0x331c4f(0x260)]((_0x4f3b84,_0x313d42)=>{var _0x44a14f=_0x331c4f;_0x5eac05[_0x313d42][_0x44a14f(0x234)]=_0x4f3b84;});const _0x2a8042=_0x5eac05[_0x331c4f(0x251)](_0x3352ac=>_0x3352ac['adjust_qty']!=='0'&&_0x3352ac[_0x331c4f(0x1b2)]!=='');var _0x415da1=0x0;_0x2a8042['forEach'](_0x2cab6f=>{var _0x9f7ed8=_0x331c4f;console['log'](_0x9f7ed8(0x248),_0x2cab6f),parseInt(_0x2cab6f[_0x9f7ed8(0x1b2)])<=0x0&&_0x415da1++;});if(_0x415da1!=0x0)return _0x28e4b8[_0x331c4f(0x1db)](_0x331c4f(0x254),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x15aeb8[_0x331c4f(0x1ef)]('back');const _0x2ee2f5=new adjustment_finished({'warehouse_name':_0x3867dc,'date':_0x59faf7,'product':_0x2a8042,'note':_0x3d9901,'room':_0x126b0a,'invoice':_0xfc93f,'JO_number':_0x4e5e98,'expiry_date':_0x531bea}),_0x53e3ac=await _0x2ee2f5[_0x331c4f(0x1ae)]();_0x28e4b8[_0x331c4f(0x1db)](_0x331c4f(0x205),_0x331c4f(0x244)),_0x15aeb8['redirect'](_0x331c4f(0x1d7)+_0x53e3ac[_0x331c4f(0x206)]);}catch(_0x415850){console[_0x331c4f(0x1f5)](_0x415850),_0x15aeb8[_0x331c4f(0x259)](0xc8)[_0x331c4f(0x1e4)]({'message':_0x415850[_0x331c4f(0x25f)]});}}),router['get']('/preview/:id',auth,async(_0x51a0d9,_0x5754a1)=>{var _0xc09aef=a0_0x264324;try{const {username:_0xabe81c,email:_0x280b82,role:_0x5115cd}=_0x51a0d9[_0xc09aef(0x1e0)],_0x513188=_0x51a0d9[_0xc09aef(0x1e0)],_0x2f36cd=await profile[_0xc09aef(0x210)]({'email':_0x513188['email']}),_0x2666d5=await master_shop['find'](),_0x585040=_0x51a0d9[_0xc09aef(0x1dc)]['id'],_0x461e3d=await adjustment_finished[_0xc09aef(0x1cd)]({'_id':_0x585040}),_0x9e0daa=await purchases['aggregate']([{'$match':{'warehouse_name':_0x461e3d['warehouse_name']}},{'$unwind':'$product'},{'$group':{'_id':'$product.product_name'}}]);console['log'](_0xc09aef(0x215),_0x9e0daa);const _0x143f18=await product[_0xc09aef(0x1d8)]({}),_0x3fbdba=await warehouse[_0xc09aef(0x1fd)]([{'$match':{'name':_0x461e3d['warehouse_name'],'warehouse_category':_0xc09aef(0x24c)}},{'$unwind':'$product_details'},{'$group':{'_id':_0xc09aef(0x24b),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0xc09aef(0x1d3)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xc09aef(0x266)},'type':{'$first':_0xc09aef(0x22c)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0xc09aef(0x22d)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xc09aef(0x1fc)},'storage':{'$first':_0xc09aef(0x1f8)},'rack':{'$first':_0xc09aef(0x1bd)},'expiry_date':{'$first':_0xc09aef(0x1e3)},'production_date':{'$first':_0xc09aef(0x223)},'batch_code':{'$first':_0xc09aef(0x1ac)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'room':{'$first':_0xc09aef(0x21b)}}}]);if(_0x2666d5[0x0][_0xc09aef(0x1df)]=='English\x20(US)'){var _0x566eeb=users['English'];console['log'](_0x566eeb);}else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x267))var _0x566eeb=users[_0xc09aef(0x267)];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]=='German')var _0x566eeb=users[_0xc09aef(0x1ec)];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x1b4))var _0x566eeb=users[_0xc09aef(0x1b4)];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x1eb))var _0x566eeb=users['French'];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x200))var _0x566eeb=users['Portuguese'];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x22a))var _0x566eeb=users[_0xc09aef(0x22a)];else{if(_0x2666d5[0x0][_0xc09aef(0x1df)]==_0xc09aef(0x216))var _0x566eeb=users[_0xc09aef(0x227)];}}}}}}}_0x5754a1[_0xc09aef(0x1a9)]('edit_adjustment_finished_view',{'success':_0x51a0d9['flash']('success'),'errors':_0x51a0d9[_0xc09aef(0x1db)]('errors'),'role':_0x513188,'profile':_0x2f36cd,'adjustment':_0x461e3d,'stock':_0x3fbdba,'master_shop':_0x2666d5,'warehouse_name':_0x9e0daa,'unit':_0x143f18,'language':_0x566eeb});}catch(_0x199e38){console[_0xc09aef(0x1f5)](_0x199e38),_0x5754a1[_0xc09aef(0x259)](0xc8)[_0xc09aef(0x1e4)]({'message':_0x199e38[_0xc09aef(0x25f)]});}}),router[a0_0x264324(0x1fb)]('/preview/:id',auth,async(_0x38e395,_0x3d74a2)=>{var _0x595794=a0_0x264324;try{const {invoice:_0x1aec29,warehouse_name:_0x1cabbf,Room_name:_0xc01bfd}=_0x38e395[_0x595794(0x240)],_0x237e93=_0x38e395[_0x595794(0x1dc)]['id'],_0x56356f=await adjustment_finished[_0x595794(0x1cd)]({'_id':_0x237e93});var _0x5d50c6;const _0x461b74=_0x56356f[_0x595794(0x207)][_0x595794(0x1f7)](async _0x58a6cd=>{var _0x1d8972=_0x595794;if(_0x58a6cd['adjust_qty']>0x0){_0x5d50c6=await warehouse[_0x1d8972(0x210)]({'name':_0x1cabbf,'room':_0x58a6cd['room_names'],'warehouse_category':_0x1d8972(0x24c)});const _0x3e19f4=_0x5d50c6['product_details'][_0x1d8972(0x1f7)](_0x5c4c2c=>{var _0x1a01cf=_0x1d8972;console['log'](_0x58a6cd[_0x1a01cf(0x25e)]);if(_0x58a6cd[_0x1a01cf(0x25e)]=='minus')_0x5c4c2c['product_name']==_0x58a6cd[_0x1a01cf(0x265)]&&_0x5c4c2c['bay']==_0x58a6cd[_0x1a01cf(0x222)]&&_0x5c4c2c[_0x1a01cf(0x1f6)]==_0x58a6cd[_0x1a01cf(0x1f6)]&&_0x5c4c2c[_0x1a01cf(0x1b8)]==_0x58a6cd[_0x1a01cf(0x1b8)]&&_0x5c4c2c[_0x1a01cf(0x1ca)]==_0x58a6cd[_0x1a01cf(0x1ca)]&&_0x5c4c2c['invoice']==_0x58a6cd[_0x1a01cf(0x234)]&&(_0x5c4c2c[_0x1a01cf(0x1bb)]=_0x5c4c2c[_0x1a01cf(0x1bb)]-_0x58a6cd[_0x1a01cf(0x1b2)]);else _0x58a6cd[_0x1a01cf(0x25e)]==_0x1a01cf(0x20e)&&(_0x5c4c2c[_0x1a01cf(0x265)]==_0x58a6cd[_0x1a01cf(0x265)]&&_0x5c4c2c[_0x1a01cf(0x222)]==_0x58a6cd[_0x1a01cf(0x222)]&&_0x5c4c2c[_0x1a01cf(0x1f6)]==_0x58a6cd['expiry_date']&&_0x5c4c2c[_0x1a01cf(0x1b8)]==_0x58a6cd[_0x1a01cf(0x1b8)]&&_0x5c4c2c[_0x1a01cf(0x1ca)]==_0x58a6cd[_0x1a01cf(0x1ca)]&&_0x5c4c2c[_0x1a01cf(0x234)]==_0x58a6cd[_0x1a01cf(0x234)]&&(_0x5c4c2c[_0x1a01cf(0x1bb)]=_0x5c4c2c['product_stock']+_0x58a6cd['adjust_qty']));});}return _0x5d50c6;});Promise[_0x595794(0x1e6)](_0x461b74)[_0x595794(0x1ea)](async _0x44e3f7=>{var _0x867120=_0x595794;try{for(const _0xe7725 of _0x44e3f7){await _0xe7725[_0x867120(0x1ae)]();}_0x56356f[_0x867120(0x1e9)]='True';const _0x1f89b7=await _0x56356f[_0x867120(0x1ae)](),_0x222a0e=await master_shop[_0x867120(0x1d8)](),_0x59058c=await email_settings['findOne'](),_0x4fb515=await supervisor_settings[_0x867120(0x1d8)]();var _0x478cfe=_0x56356f[_0x867120(0x207)],_0x3d9bec='',_0x565299;for(_0x565299 in _0x478cfe){var _0x134e78='FG';_0x56356f['warehouse_name']==_0x867120(0x1bc)&&(_0x134e78='DG'),_0x3d9bec+=_0x867120(0x217)+_0x867120(0x1aa)+_0x478cfe[_0x565299]['product_name']+_0x867120(0x1ad)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x478cfe[_0x565299][_0x867120(0x24e)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x478cfe[_0x565299]['adjust_qty']+_0x867120(0x1ad)+_0x867120(0x1aa)+_0x478cfe[_0x565299][_0x867120(0x1b6)]+_0x867120(0x1ad)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x478cfe[_0x565299]['secondary_unit']+'</td>'+_0x867120(0x1aa)+_0x56356f[_0x867120(0x1d5)]+'</td>'+_0x867120(0x1aa)+_0x478cfe[_0x565299][_0x867120(0x21d)]+_0x867120(0x1ad)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x134e78+_0x478cfe[_0x565299]['bay']+_0x867120(0x1ad)+_0x867120(0x201);}let _0xd6e4df=nodemailer[_0x867120(0x1f4)]({'host':_0x59058c['host'],'port':Number(_0x59058c[_0x867120(0x209)]),'secure':![],'auth':{'user':_0x59058c['email'],'pass':_0x59058c[_0x867120(0x1a8)]}}),_0x3bd4ef={'from':_0x59058c[_0x867120(0x1da)],'to':_0x4fb515[0x0]['FGSEmail'],'subject':'Adjustment\x20Mail','attachments':[{'filename':_0x867120(0x22f),'path':__dirname+_0x867120(0x1c0)+_0x867120(0x255)+_0x222a0e[0x0]['image'],'cid':'logo'}],'html':_0x867120(0x219)+_0x867120(0x24d)+'</head><body>'+_0x867120(0x226)+_0x867120(0x1c8)+_0x867120(0x226)+_0x867120(0x23c)+_0x867120(0x228)+_0x867120(0x226)+_0x867120(0x239)+_0x222a0e[0x0][_0x867120(0x229)]+_0x867120(0x1c9)+'</div>'+_0x867120(0x228)+'<hr\x20class=\x22my-3\x22>'+_0x867120(0x226)+_0x867120(0x1ba)+_0x867120(0x1f9)+_0x56356f['invoice']+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+'\x20Order\x20Date\x20:\x20'+_0x56356f[_0x867120(0x1ed)]+'\x20'+'</span>'+_0x867120(0x1d2)+_0x867120(0x228)+_0x867120(0x21c)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+_0x867120(0x204)+_0x867120(0x1e7)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x867120(0x261)+_0x867120(0x20a)+_0x867120(0x1f3)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x867120(0x201)+_0x867120(0x23f)+_0x867120(0x1ff)+'\x20'+_0x3d9bec+'\x20'+_0x867120(0x21f)+'</table>'+_0x867120(0x226)+_0x867120(0x243)+'<h5>'+_0x222a0e[0x0][_0x867120(0x229)]+_0x867120(0x1d2)+_0x867120(0x228)+'</div>'+'</body></html>'};_0xd6e4df[_0x867120(0x1b3)](_0x3bd4ef,function(_0x347718,_0x43ff10){var _0x33fa87=_0x867120;_0x347718?(console[_0x33fa87(0x1f5)](_0x347718),console[_0x33fa87(0x1f5)](_0x33fa87(0x211))):console['log'](_0x33fa87(0x1f0));}),_0x38e395['flash'](_0x867120(0x205),_0x867120(0x262)),_0x3d74a2[_0x867120(0x1ef)](_0x867120(0x1c5)+_0x1f89b7[_0x867120(0x206)]);}catch(_0x1c7820){console[_0x867120(0x258)](_0x1c7820),_0x3d74a2[_0x867120(0x259)](0x1f4)[_0x867120(0x1e4)]({'error':_0x867120(0x20c)});}})[_0x595794(0x236)](_0x480eb2=>{var _0x4c56aa=_0x595794;console[_0x4c56aa(0x258)](_0x480eb2),_0x3d74a2['status'](0x1f4)[_0x4c56aa(0x1e4)]({'error':'An\x20error\x20occurred.'});});}catch(_0x5bc520){_0x3d74a2[_0x595794(0x1e4)]({'message':_0x5bc520[_0x595794(0x25f)]});}}),router[a0_0x264324(0x1d6)](a0_0x264324(0x1e8),auth,async(_0x51ead1,_0xc0e1f3)=>{var _0x2e99d8=a0_0x264324;try{const {username:_0x45167e,email:_0x2cd9d6,role:_0x59e3ee}=_0x51ead1[_0x2e99d8(0x1e0)],_0x33c427=_0x51ead1['user'],_0x49362d=await profile[_0x2e99d8(0x210)]({'email':_0x33c427['email']}),_0x3e8dfb=await master_shop[_0x2e99d8(0x1d8)]();console['log'](_0x2e99d8(0x231),_0x3e8dfb);const _0x292986=_0x51ead1[_0x2e99d8(0x1dc)]['id'],_0x390b8b=await adjustment_finished[_0x2e99d8(0x1cd)]({'_id':_0x292986});let _0x43dbbc=new Date(_0x390b8b[_0x2e99d8(0x1f6)]),_0x35ea27=('0'+_0x43dbbc['getDate']())[_0x2e99d8(0x1d0)](-0x2),_0x5eccdd=('0'+(_0x43dbbc[_0x2e99d8(0x25b)]()+0x1))[_0x2e99d8(0x1d0)](-0x2),_0x5601bf=_0x43dbbc['getFullYear'](),_0x3a823f=_0x5601bf+'-'+_0x5eccdd+'-'+_0x35ea27;var _0x3a7931=[_0x2e99d8(0x212),_0x2e99d8(0x1bf),_0x2e99d8(0x241)];const _0x3124f8=await purchases[_0x2e99d8(0x1fd)]([{'$match':{'warehouse_name':_0x390b8b[_0x2e99d8(0x1d5)]}},{'$unwind':_0x2e99d8(0x22b)},{'$group':{'_id':_0x2e99d8(0x1b0)}}]);console['log'](_0x2e99d8(0x215),_0x3124f8);const _0x324071=await product['find']({}),_0x516ce9=await warehouse['aggregate']([{'$match':{'name':_0x390b8b[_0x2e99d8(0x1d5)],'room':_0x390b8b[_0x2e99d8(0x214)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x2e99d8(0x24b),'name':{'$first':_0x2e99d8(0x1e2)},'product_stock':{'$first':_0x2e99d8(0x1d3)},'bay':{'$first':_0x2e99d8(0x25c)},'bin':{'$first':_0x2e99d8(0x266)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x2e99d8(0x237)},'primary_code':{'$first':_0x2e99d8(0x22d)},'secondary_code':{'$first':_0x2e99d8(0x1be)},'product_code':{'$first':_0x2e99d8(0x1fc)},'storage':{'$first':_0x2e99d8(0x1f8)},'rack':{'$first':'$product_details.rack'}}}]);if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]=='English\x20(US)'){var _0x53cedb=users[_0x2e99d8(0x253)];console[_0x2e99d8(0x1f5)](_0x53cedb);}else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x267))var _0x53cedb=users[_0x2e99d8(0x267)];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x1ec))var _0x53cedb=users[_0x2e99d8(0x1ec)];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x1b4))var _0x53cedb=users['Spanish'];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]=='French')var _0x53cedb=users[_0x2e99d8(0x1eb)];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x200))var _0x53cedb=users[_0x2e99d8(0x263)];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x22a))var _0x53cedb=users[_0x2e99d8(0x22a)];else{if(_0x3e8dfb[0x0][_0x2e99d8(0x1df)]==_0x2e99d8(0x216))var _0x53cedb=users[_0x2e99d8(0x227)];}}}}}}}_0xc0e1f3[_0x2e99d8(0x1a9)](_0x2e99d8(0x23a),{'success':_0x51ead1[_0x2e99d8(0x1db)]('success'),'errors':_0x51ead1[_0x2e99d8(0x1db)](_0x2e99d8(0x254)),'role':_0x33c427,'profile':_0x49362d,'adjustment':_0x390b8b,'stock':_0x516ce9,'master_shop':_0x3e8dfb,'warehouse_name':_0x3124f8,'unit':_0x324071,'language':_0x53cedb,'rooms_data':_0x3a7931,'ed_fullDate':_0x3a823f});}catch(_0x47bb01){console['log'](_0x47bb01),_0xc0e1f3[_0x2e99d8(0x259)](0xc8)['json']({'message':_0x47bb01[_0x2e99d8(0x25f)]});}}),router[a0_0x264324(0x1fb)](a0_0x264324(0x1e8),auth,async(_0x5af31c,_0x5bb5ab)=>{var _0x155331=a0_0x264324;try{const _0x12dcba=_0x5af31c[_0x155331(0x1dc)]['id'],_0x1ebbfc=await adjustment_finished['findById']({'_id':_0x12dcba}),_0x256708=await warehouse[_0x155331(0x210)]({'name':_0x1ebbfc[_0x155331(0x1d5)],'room':_0x1ebbfc[_0x155331(0x214)]}),{warehouse_name:_0x5d301e,date:_0x5d0093,prod_name:_0x5d0697,level:_0x320f79,isle:_0x5e4861,pallet:_0x58948b,stock:_0x107612,types:_0xd5bc0d,adjust_qty:_0x206c20,new_adjust_qty:_0x181ca4,note:_0x3fa997,Room_name:_0x2f97aa,invoice:_0x34642a,JO_number:_0x1a971f}=_0x5af31c[_0x155331(0x240)];if(typeof _0x5d0697=='string')var _0x56a5af=[_0x5af31c[_0x155331(0x240)][_0x155331(0x1c1)]],_0x35c57f=[_0x5af31c['body'][_0x155331(0x1e5)]],_0x321c03=[_0x5af31c[_0x155331(0x240)]['stock']],_0x1b68c5=[_0x5af31c[_0x155331(0x240)][_0x155331(0x25e)]],_0x176aa7=[_0x5af31c['body'][_0x155331(0x1b2)]],_0x50c5ab=[_0x5af31c[_0x155331(0x240)][_0x155331(0x1b7)]],_0x1af61b=[_0x5af31c[_0x155331(0x240)][_0x155331(0x1a7)]],_0x1d7645=[_0x5af31c[_0x155331(0x240)]['unit']],_0x5679af=[_0x5af31c[_0x155331(0x240)][_0x155331(0x25a)]],_0x1c9860=[_0x5af31c[_0x155331(0x240)][_0x155331(0x1ca)]],_0x34d40c=[_0x5af31c[_0x155331(0x240)]['expiry_date']];else var _0x56a5af=[..._0x5af31c[_0x155331(0x240)][_0x155331(0x1c1)]],_0x35c57f=[..._0x5af31c['body']['level']],_0x321c03=[..._0x5af31c[_0x155331(0x240)][_0x155331(0x1c7)]],_0x1b68c5=[..._0x5af31c[_0x155331(0x240)]['types']],_0x176aa7=[..._0x5af31c[_0x155331(0x240)][_0x155331(0x1b2)]],_0x50c5ab=[..._0x5af31c[_0x155331(0x240)][_0x155331(0x1b7)]],_0x1af61b=[..._0x5af31c['body'][_0x155331(0x1a7)]],_0x1d7645=[..._0x5af31c[_0x155331(0x240)]['unit']],_0x5679af=[..._0x5af31c['body']['Secondary_units']],_0x1c9860=[..._0x5af31c[_0x155331(0x240)][_0x155331(0x1ca)]],_0x34d40c=[..._0x5af31c['body'][_0x155331(0x1f6)]];const _0x109db2=_0x56a5af[_0x155331(0x1f7)](_0x3e17d3=>{return _0x3e17d3={'product_name':_0x3e17d3};});_0x35c57f['forEach']((_0x5dc987,_0x56bc04)=>{var _0x9a4b4=_0x155331;_0x109db2[_0x56bc04][_0x9a4b4(0x222)]=_0x5dc987;}),_0x321c03['forEach']((_0x2859c8,_0x74132e)=>{var _0x2c5160=_0x155331;_0x109db2[_0x74132e][_0x2c5160(0x1ee)]=_0x2859c8;}),_0x1b68c5[_0x155331(0x260)]((_0x7c0672,_0x3a09f0)=>{var _0x2894a1=_0x155331;_0x109db2[_0x3a09f0][_0x2894a1(0x25e)]=_0x7c0672;}),_0x176aa7[_0x155331(0x260)]((_0x1d77ff,_0x407b3f)=>{_0x109db2[_0x407b3f]['adjust_qty']=_0x1d77ff;}),_0x50c5ab[_0x155331(0x260)]((_0x486d5e,_0xf8cfec)=>{var _0x221edd=_0x155331;_0x109db2[_0xf8cfec][_0x221edd(0x1b7)]=_0x486d5e;}),_0x1d7645[_0x155331(0x260)]((_0x54c8e2,_0x305f5d)=>{_0x109db2[_0x305f5d]['unit']=_0x54c8e2;}),_0x5679af[_0x155331(0x260)]((_0x573c37,_0x2f9390)=>{var _0x5850ec=_0x155331;_0x109db2[_0x2f9390][_0x5850ec(0x1e1)]=_0x573c37;}),_0x1af61b['forEach']((_0xa089c7,_0x4333e0)=>{var _0x498f88=_0x155331;_0x109db2[_0x4333e0][_0x498f88(0x24e)]=_0xa089c7;}),_0x1c9860[_0x155331(0x260)]((_0x9d633a,_0x3664de)=>{var _0x347ab0=_0x155331;_0x109db2[_0x3664de][_0x347ab0(0x1ca)]=_0x9d633a;}),_0x34d40c['forEach']((_0x304e81,_0x3d69fa)=>{var _0x3ccb73=_0x155331;_0x109db2[_0x3d69fa][_0x3ccb73(0x1f6)]=_0x304e81;});const _0x4cda9c=_0x109db2[_0x155331(0x251)](_0x37c532=>_0x37c532['adjust_qty']!=='0'&&_0x37c532[_0x155331(0x1b2)]!=='');var _0xc9873a=0x0;_0x4cda9c[_0x155331(0x260)](_0x36a2aa=>{var _0x55271d=_0x155331;console[_0x55271d(0x1f5)]('foreach\x20newproduct',_0x36a2aa),parseInt(_0x36a2aa[_0x55271d(0x1b2)])<=0x0&&_0xc9873a++;});if(_0xc9873a!=0x0)return _0x5af31c[_0x155331(0x1db)](_0x155331(0x254),_0x155331(0x1d4)),_0x5bb5ab[_0x155331(0x1ef)](_0x155331(0x1fa));_0x1ebbfc[_0x155331(0x1d5)]=_0x5d301e,_0x1ebbfc['date']=_0x5d0093,_0x1ebbfc[_0x155331(0x207)]=_0x4cda9c,_0x1ebbfc[_0x155331(0x1ab)]=_0x3fa997,_0x1ebbfc[_0x155331(0x214)]=_0x2f97aa,_0x1ebbfc[_0x155331(0x234)]=_0x34642a,_0x1ebbfc[_0x155331(0x249)]=_0x1a971f;const _0x31a815=await _0x1ebbfc[_0x155331(0x1ae)](),_0x5a74d6=await warehouse[_0x155331(0x210)]({'name':_0x5d301e,'room':_0x2f97aa});_0x31a815['product']['forEach'](_0x1788fa=>{var _0x423812=_0x155331;const _0x17b3cc=_0x5a74d6[_0x423812(0x220)][_0x423812(0x1f7)](_0x371626=>{var _0x30e368=_0x423812;_0x1788fa['types']==_0x30e368(0x1af)?_0x371626[_0x30e368(0x265)]==_0x1788fa['product_name']&&_0x371626[_0x30e368(0x222)]==_0x1788fa[_0x30e368(0x222)]&&(_0x371626['product_stock']=parseInt(_0x371626['product_stock'])-parseInt(_0x1788fa[_0x30e368(0x1b2)])):_0x371626[_0x30e368(0x265)]==_0x1788fa[_0x30e368(0x265)]&&_0x371626[_0x30e368(0x222)]==_0x1788fa['bay']&&(_0x371626['product_stock']=parseInt(_0x371626[_0x30e368(0x1bb)])+parseInt(_0x1788fa['adjust_qty']));});}),await _0x5a74d6[_0x155331(0x1ae)](),_0x5af31c[_0x155331(0x1db)]('success','adjustment\x20data\x20update\x20successfully'),_0x5bb5ab[_0x155331(0x1ef)]('/adjustment_finished/view');}catch(_0x8b39fd){console[_0x155331(0x1f5)](_0x8b39fd);}}),router['post'](a0_0x264324(0x235),async(_0x4e6e18,_0x1ff068)=>{var _0x5ad863=a0_0x264324;const {primary_code:_0x3e3a6a,warehouse_data:_0x1055d1,rooms_data:_0x3e0e48,Roomslist:_0x1551c4}=_0x4e6e18['body'],_0x220857=_0x1551c4['split'](','),_0x180a2d=[];async function _0x6d327d(_0x3b1256){var _0x1e52a8=a0_0x1b52;const _0x22bbb7=await warehouse[_0x1e52a8(0x1fd)]([{'$match':{'name':_0x1055d1,'room':_0x3b1256}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x3e3a6a}},{'$group':{'_id':_0x1e52a8(0x24b),'name':{'$first':_0x1e52a8(0x1e2)},'product_stock':{'$first':_0x1e52a8(0x1d3)},'primary_code':{'$first':_0x1e52a8(0x22d)},'secondary_code':{'$first':_0x1e52a8(0x1be)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x1e52a8(0x25c)},'isle':{'$first':_0x1e52a8(0x266)},'type':{'$first':_0x1e52a8(0x22c)},'pallet':{'$first':_0x1e52a8(0x237)},'unit':{'$first':_0x1e52a8(0x1cc)},'secondary_unit':{'$first':_0x1e52a8(0x213)},'storage':{'$first':_0x1e52a8(0x1f8)},'rack':{'$first':_0x1e52a8(0x1bd)},'expiry_date':{'$first':_0x1e52a8(0x1e3)},'production_date':{'$first':_0x1e52a8(0x223)},'batch_code':{'$first':_0x1e52a8(0x1ac)},'product_cat':{'$first':'P'},'maxPerUnit':{'$first':_0x1e52a8(0x1dd)},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x1e52a8(0x1ce)}}}]),_0x3fab40=await warehouse[_0x1e52a8(0x1fd)]([{'$match':{'name':_0x1055d1,'room':_0x3b1256}},{'$unwind':_0x1e52a8(0x21e)},{'$match':{'product_details.secondary_code':_0x3e3a6a}},{'$group':{'_id':_0x1e52a8(0x24b),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1e52a8(0x1d3)},'primary_code':{'$first':_0x1e52a8(0x22d)},'secondary_code':{'$first':_0x1e52a8(0x1be)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1e52a8(0x266)},'type':{'$first':_0x1e52a8(0x22c)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x1e52a8(0x1cc)},'secondary_unit':{'$first':_0x1e52a8(0x213)},'storage':{'$first':_0x1e52a8(0x1f8)},'rack':{'$first':_0x1e52a8(0x1bd)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1e52a8(0x223)},'batch_code':{'$first':_0x1e52a8(0x1ac)},'product_cat':{'$first':'S'},'maxPerUnit':{'$first':_0x1e52a8(0x1dd)},'roomNamed':{'$first':_0x1e52a8(0x21b)},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x22bbb7['length']>0x0)_0x180a2d['push'](_0x22bbb7);else _0x3fab40[_0x1e52a8(0x20b)]>0x0&&_0x180a2d['push'](_0x3fab40);}const _0x2754c5=_0x220857[_0x5ad863(0x1f7)](_0x2838be=>_0x6d327d(_0x2838be));await Promise[_0x5ad863(0x1e6)](_0x2754c5),_0x1ff068['json'](_0x180a2d);}),router[a0_0x264324(0x1fb)]('/CheckingWarehouse',async(_0x19d3bd,_0x1d70bf)=>{var _0x1e27e5=a0_0x264324;const {productCode:_0x40f8f7,bay:_0x4466dc,warehouses:_0x406655,room:_0x2685c7}=_0x19d3bd[_0x1e27e5(0x240)];console[_0x1e27e5(0x1f5)](_0x19d3bd[_0x1e27e5(0x240)]);try{const _0x4c48e0=await warehouse[_0x1e27e5(0x1fd)]([{'$match':{'name':_0x406655,'room':_0x2685c7}},{'$unwind':_0x1e27e5(0x21e)},{'$match':{'product_details.bay':parseInt(_0x4466dc)}},{'$group':{'_id':_0x1e27e5(0x24b),'name':{'$first':_0x1e27e5(0x1e2)},'product_stock':{'$first':_0x1e27e5(0x1d3)},'bay':{'$first':_0x1e27e5(0x25c)},'maxProducts':{'$first':_0x1e27e5(0x1c6)}}}]);_0x1d70bf[_0x1e27e5(0x259)](0xc8)['json'](_0x4c48e0);}catch(_0x5236ae){_0x1d70bf['status'](0x194)[_0x1e27e5(0x1e4)]({'message':_0x5236ae['message']});}}),module[a0_0x264324(0x221)]=router;function a0_0x7f69(){var _0x2415a2=['message','forEach','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Adjustment\x20Finalize\x20Successfully','Portuguese','QA\x20Warehouse','product_name','$product_details.bin','Hindi','prod_code','password','render','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','note','$product_details.batch_code','</td>','save','minus','$product.product_name','605712YPFfHL','adjust_qty','sendMail','Spanish','/adjustment/view','unit','new_adjust_qty','production_date','$date','<h5\x20style=\x22text-align:\x20left;\x22>','product_stock','DRY\x20GOODS','$product_details.rack','$product_details.secondary_code','Enclosed','/../public','prod_name','../middleware/auth','floor','nodemailer','/picking_list/PDF_adjustment/','$product_details.maxProducts','stock','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','\x20</h2>','batch_code','20hPQEcx','$product_details.unit','findById','$product_details.invoice','English\x20(US)','slice','There\x27s\x20a\x20error\x20in\x20this\x20transaction','</h5>','$product_details.product_stock','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','warehouse_name','get','/adjustment_finished/preview/','find','Rooms','email','flash','params','$product_details.maxPerUnit','New_Qty_Converted','language','user','secondary_unit','$product_details.product_name','$product_details.expiry_date','json','level','all','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','/view/:id','finalize','then','French','German','date','stockBefore','redirect','Email\x20sent\x20successfully','warehouse','product_date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','createTransport','log','expiry_date','map','$product_details.storage','\x20Order\x20Number\x20:\x20','back','post','$product_details.product_code','aggregate','243032VPPKCn','<tbody\x20style=\x22text-align:\x20center;\x22>','Portuguese\x20(BR)','</tr>','1848861pTLBkm','$name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','success','_id','product','toString','port','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','length','An\x20error\x20occurred\x20while\x20saving\x20data.','random','add','Primary_Units','findOne','Error\x20Occurs','Ambient','$product_details.secondary_unit','room','purchases_data','Arabic\x20(ae)','<tr>','83944eZARbd','<!DOCTYPE\x20html>','role','$room','<table\x20style=\x22width:\x20100%\x20!important;\x22>','room_names','$product_details','</tbody>','product_details','exports','bay','$product_details.production_date','../models/all_models','maxPerUnit','<div>','Arabic','</div>','site_title','Chinese','$product','$product_details.type','$product_details.primary_code','15IjBFJe','Logo.png','prod_cat','master','38dhlaPa','ADJF-','invoice','/barcode_scanner','catch','$product_details.floorlevel','Enabled','<h2>\x20','edit_adjustment_finished','$product.room_names','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','padStart','/view/add_adjustment','</thead>','body','Return\x20Rooms','adjustment_finished','<strong>\x20Regards\x20</strong>','adjustment\x20add\x20successfull','$invoice','staff','express','foreach\x20newproduct','JO_number','9142symbDR','$product_details._id','Finished\x20Goods','<html><head><title></title>','product_code','912156VbMxaR','/view','filter','string','English','errors','/upload/','$warehouse_name','1059798FTJxPM','error','status','Secondary_units','getMonth','$product_details.bay','New_Qty_Converted_adj','types'];a0_0x7f69=function(){return _0x2415a2;};return a0_0x7f69();}