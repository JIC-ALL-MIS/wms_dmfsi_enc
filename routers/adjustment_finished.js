var a0_0x51ee61=a0_0x295d;(function(_0x349484,_0x27abae){var _0x35fead=a0_0x295d,_0x4631a=_0x349484();while(!![]){try{var _0x19a3f8=-parseInt(_0x35fead(0x13c))/0x1+-parseInt(_0x35fead(0xed))/0x2+-parseInt(_0x35fead(0x181))/0x3+-parseInt(_0x35fead(0x193))/0x4+parseInt(_0x35fead(0x155))/0x5+-parseInt(_0x35fead(0x10b))/0x6*(-parseInt(_0x35fead(0x188))/0x7)+-parseInt(_0x35fead(0x113))/0x8*(-parseInt(_0x35fead(0x178))/0x9);if(_0x19a3f8===_0x27abae)break;else _0x4631a['push'](_0x4631a['shift']());}catch(_0x3a93b7){_0x4631a['push'](_0x4631a['shift']());}}}(a0_0x4e56,0xe693c));const express=require(a0_0x51ee61(0x152)),app=express(),router=express[a0_0x51ee61(0xec)](),auth=require(a0_0x51ee61(0x11f)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,adjustment_finished,email_settings,supervisor_settings}=require(a0_0x51ee61(0x18b)),users=require(a0_0x51ee61(0x199)),nodemailer=require('nodemailer');router[a0_0x51ee61(0xf8)]('/view',auth,async(_0x29ec34,_0x16fc5c)=>{var _0xbbfced=a0_0x51ee61;try{const {username:_0x4778e5,email:_0x58e085,role:_0x10527b}=_0x29ec34[_0xbbfced(0x137)],_0xeb6d50=_0x29ec34[_0xbbfced(0x137)],_0x3cca5e=await profile[_0xbbfced(0x13b)]({'email':_0xeb6d50[_0xbbfced(0x195)]}),_0x476d4f=await master_shop['find']();let _0xf7b24;if(_0xeb6d50['role']=='staff'){const _0x3e2ff0=await staff[_0xbbfced(0x13b)]({'email':_0xeb6d50[_0xbbfced(0x195)]});_0xf7b24=await warehouse[_0xbbfced(0x19e)]({'status':_0xbbfced(0x185),'name':_0x3e2ff0['warehouse']});}else _0xf7b24=await warehouse[_0xbbfced(0x19e)]({'status':_0xbbfced(0x185)});const _0x53152b=await product[_0xbbfced(0x19e)]();let _0x257ccb;if(_0xeb6d50[_0xbbfced(0x165)]==_0xbbfced(0x1a0)){const _0xbaa1c6=await staff[_0xbbfced(0x13b)]({'email':_0xeb6d50['email']});_0x257ccb=await adjustment_finished[_0xbbfced(0x19e)]({'warehouse_name':_0xbaa1c6[_0xbbfced(0x16f)]});}else _0x257ccb=await adjustment_finished[_0xbbfced(0x150)]([{'$unwind':_0xbbfced(0x118)},{'$group':{'_id':_0xbbfced(0xf9),'invoice':{'$first':_0xbbfced(0x144)},'date':{'$first':_0xbbfced(0x162)},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':_0xbbfced(0x12f)},'finalize':{'$first':_0xbbfced(0xfa)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1}}]);if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x157)){var _0x132963=users['English'];console['log'](_0x132963);}else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x12d))var _0x132963=users[_0xbbfced(0x12d)];else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x110))var _0x132963=users[_0xbbfced(0x110)];else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x147))var _0x132963=users['Spanish'];else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x119))var _0x132963=users[_0xbbfced(0x119)];else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]=='Portuguese\x20(BR)')var _0x132963=users[_0xbbfced(0x166)];else{if(_0x476d4f[0x0]['language']==_0xbbfced(0x121))var _0x132963=users[_0xbbfced(0x121)];else{if(_0x476d4f[0x0][_0xbbfced(0xe3)]==_0xbbfced(0x183))var _0x132963=users[_0xbbfced(0x15a)];}}}}}}}_0x16fc5c['render'](_0xbbfced(0x17d),{'success':_0x29ec34[_0xbbfced(0xe7)](_0xbbfced(0x19a)),'errors':_0x29ec34[_0xbbfced(0xe7)](_0xbbfced(0x15e)),'role':_0xeb6d50,'profile':_0x3cca5e,'warehouse':_0xf7b24,'product':_0x53152b,'adjustment':_0x257ccb,'master_shop':_0x476d4f,'language':_0x132963});}catch(_0x119319){console['log'](_0x119319);}});async function getRandom8DigitNumber(){var _0x316acf=a0_0x51ee61;const _0x4f0853=0x989680,_0x1129b0=0x5f5e0ff,_0x59b8ac=Math[_0x316acf(0x122)](Math[_0x316acf(0x171)]()*(_0x1129b0-_0x4f0853+0x1))+_0x4f0853;var _0x400da9;const _0x1429ac=await adjustment_finished[_0x316acf(0x13b)]({'invoice':_0x316acf(0x146)+_0x59b8ac});return _0x1429ac&&_0x1429ac[_0x316acf(0x16b)]>0x0?_0x400da9=_0x316acf(0x146)+_0x59b8ac:_0x400da9=_0x316acf(0x146)+_0x59b8ac,_0x400da9;}function a0_0x295d(_0xca32a9,_0x5188b8){var _0x4e568b=a0_0x4e56();return a0_0x295d=function(_0x295d30,_0x37443d){_0x295d30=_0x295d30-0xdd;var _0x37f54c=_0x4e568b[_0x295d30];return _0x37f54c;},a0_0x295d(_0xca32a9,_0x5188b8);}router[a0_0x51ee61(0xf8)](a0_0x51ee61(0x149),auth,async(_0x4d51a5,_0x568e6b)=>{var _0x365044=a0_0x51ee61;try{const {username:_0x5e5880,email:_0x4d7e0d,role:_0x44263b}=_0x4d51a5[_0x365044(0x137)],_0x5f5c4c=_0x4d51a5[_0x365044(0x137)],_0x58b9c=await profile[_0x365044(0x13b)]({'email':_0x5f5c4c[_0x365044(0x195)]}),_0x5e50c4=await master_shop['find']();let _0x5475a1;if(_0x5f5c4c['role']==_0x365044(0x1a0)){const _0xe6493f=await staff[_0x365044(0x13b)]({'email':_0x5f5c4c['email']});_0x5475a1=await warehouse[_0x365044(0x150)]([{'$match':{'status':_0x365044(0x185),'name':_0xe6493f[_0x365044(0x16f)],'warehouse_category':'Finished\x20Goods','name':{'$ne':'QA\x20Warehouse'}}},{'$group':{'_id':_0x365044(0xe1),'name':{'$first':_0x365044(0xe1)}}}]);}else _0x5475a1=await warehouse['aggregate']([{'$match':{'status':_0x365044(0x185),'warehouse_category':_0x365044(0x115),'name':{'$ne':_0x365044(0x18a)}}},{'$group':{'_id':_0x365044(0xe1),'name':{'$first':_0x365044(0xe1)}}}]);const _0x49f558=await product[_0x365044(0x19e)]({}),_0x485d60=await adjustment_finished['find']({}),_0x100af3=_0x485d60[_0x365044(0x16b)]+0x1,_0x2f2b3e=_0x365044(0x146)+_0x100af3[_0x365044(0xfe)]()[_0x365044(0x101)](0x5,'0');var _0x436b5b=[_0x365044(0x130),_0x365044(0x159),_0x365044(0x117)];if(_0x5e50c4[0x0][_0x365044(0xe3)]==_0x365044(0x157))var _0x4f6871=users[_0x365044(0x167)];else{if(_0x5e50c4[0x0]['language']==_0x365044(0x12d))var _0x4f6871=users['Hindi'];else{if(_0x5e50c4[0x0][_0x365044(0xe3)]==_0x365044(0x110))var _0x4f6871=users['German'];else{if(_0x5e50c4[0x0]['language']==_0x365044(0x147))var _0x4f6871=users['Spanish'];else{if(_0x5e50c4[0x0][_0x365044(0xe3)]==_0x365044(0x119))var _0x4f6871=users['French'];else{if(_0x5e50c4[0x0][_0x365044(0xe3)]==_0x365044(0xfc))var _0x4f6871=users[_0x365044(0x166)];else{if(_0x5e50c4[0x0]['language']=='Chinese')var _0x4f6871=users['Chinese'];else{if(_0x5e50c4[0x0][_0x365044(0xe3)]==_0x365044(0x183))var _0x4f6871=users[_0x365044(0x15a)];}}}}}}}const _0x589a26=getRandom8DigitNumber();_0x589a26['then'](_0x5f4a91=>{var _0x16a7de=_0x365044;_0x568e6b[_0x16a7de(0x10d)](_0x16a7de(0xef),{'success':_0x4d51a5[_0x16a7de(0xe7)]('success'),'errors':_0x4d51a5[_0x16a7de(0xe7)](_0x16a7de(0x15e)),'role':_0x5f5c4c,'profile':_0x58b9c,'warehouse':_0x5475a1,'product':_0x49f558,'master_shop':_0x5e50c4,'language':_0x4f6871,'rooms_data':_0x436b5b,'invoice_no':_0x5f4a91});})['catch'](_0x152be6=>{var _0x2d9b6b=_0x365044;_0x4d51a5[_0x2d9b6b(0xe7)](_0x2d9b6b(0x15e),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x568e6b['redirect'](_0x2d9b6b(0x112));});}catch(_0xd1a665){console[_0x365044(0x135)](_0xd1a665);}}),router[a0_0x51ee61(0x12a)](a0_0x51ee61(0x149),auth,async(_0xb41140,_0x62bfec)=>{var _0x34b1d9=a0_0x51ee61;try{const {warehouse_name:_0x150598,date:_0x5bf969,prod_name:_0x58b5c1,level:_0x57b36a,isle:_0x956c72,pallet:_0x37493d,stock:_0x2e31ca,types:_0x5717da,adjust_qty:_0x57cea2,new_adjust_qty:_0x10580b,note:_0x35f622,Room_name:_0x32cf35,invoice:_0x4f1e2f,JO_number:_0x12645c,expiry_date:_0x145dc1}=_0xb41140[_0x34b1d9(0x17f)];if(typeof _0x58b5c1=='string')var _0x45ba72=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x13e)]],_0x4ad499=[_0xb41140['body'][_0x34b1d9(0x154)]],_0x15d8a1=[_0xb41140[_0x34b1d9(0x17f)]['stock']],_0x35487c=[_0xb41140[_0x34b1d9(0x17f)]['types']],_0x53da88=[_0xb41140['body'][_0x34b1d9(0xdd)]],_0x156ba0=[_0xb41140['body'][_0x34b1d9(0x184)]],_0x27072d=[_0xb41140['body']['Primary_Units']],_0x89e9af=[_0xb41140[_0x34b1d9(0x17f)]['Secondary_units']],_0x1bcd2d=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0xe8)]],_0x249c1b=[_0xb41140[_0x34b1d9(0x17f)]['batch_code']],_0x3cf1d4=[_0xb41140['body'][_0x34b1d9(0x1a1)]],_0x349949=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x186)]],_0xe548a5=[_0xb41140['body'][_0x34b1d9(0x19f)]],_0x4bf7c6=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x143)]],_0x3a3edc=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x17a)]],_0x46401d=[_0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x133)]];else var _0x45ba72=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x13e)]],_0x4ad499=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x154)]],_0x15d8a1=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x151)]],_0x35487c=[..._0xb41140['body'][_0x34b1d9(0x140)]],_0x53da88=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0xdd)]],_0x156ba0=[..._0xb41140['body']['New_Qty_Converted']],_0x27072d=[..._0xb41140['body']['Primary_Units']],_0x89e9af=[..._0xb41140[_0x34b1d9(0x17f)]['Secondary_units']],_0x1bcd2d=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0xe8)]],_0x249c1b=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x196)]],_0x3cf1d4=[..._0xb41140['body'][_0x34b1d9(0x1a1)]],_0x349949=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x186)]],_0xe548a5=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x19f)]],_0x4bf7c6=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x143)]],_0x3a3edc=[..._0xb41140[_0x34b1d9(0x17f)][_0x34b1d9(0x17a)]],_0x46401d=[..._0xb41140[_0x34b1d9(0x17f)]['prod_invoice']];const _0x47f88d=_0x45ba72[_0x34b1d9(0x16a)](_0x1de0f9=>{return _0x1de0f9={'product_name':_0x1de0f9};});_0x4ad499[_0x34b1d9(0x19b)]((_0x1d57b3,_0x2f59bd)=>{_0x47f88d[_0x2f59bd]['bay']=_0x1d57b3;}),_0x15d8a1['forEach']((_0x4c7ae4,_0x4184bc)=>{var _0x222cab=_0x34b1d9;_0x47f88d[_0x4184bc][_0x222cab(0x176)]=_0x4c7ae4;}),_0x35487c[_0x34b1d9(0x19b)]((_0x526717,_0x523155)=>{_0x47f88d[_0x523155]['types']=_0x526717;}),_0x53da88[_0x34b1d9(0x19b)]((_0x26b005,_0x19505c)=>{_0x47f88d[_0x19505c]['adjust_qty']=_0x26b005;}),_0x156ba0[_0x34b1d9(0x19b)]((_0x368bd1,_0x309849)=>{var _0x2fb5b8=_0x34b1d9;_0x47f88d[_0x309849][_0x2fb5b8(0x131)]=_0x368bd1;}),_0x27072d['forEach']((_0xaef2a6,_0x437ae2)=>{var _0x18d98c=_0x34b1d9;_0x47f88d[_0x437ae2][_0x18d98c(0x163)]=_0xaef2a6;}),_0x89e9af[_0x34b1d9(0x19b)]((_0x4c682c,_0x1f5eeb)=>{var _0x2ed639=_0x34b1d9;_0x47f88d[_0x1f5eeb][_0x2ed639(0xf2)]=_0x4c682c;}),_0x1bcd2d[_0x34b1d9(0x19b)]((_0x23a569,_0x36ba3c)=>{_0x47f88d[_0x36ba3c]['product_code']=_0x23a569;}),_0x249c1b[_0x34b1d9(0x19b)]((_0xced55e,_0x3728f0)=>{var _0x484342=_0x34b1d9;_0x47f88d[_0x3728f0][_0x484342(0x196)]=_0xced55e;}),_0x3cf1d4[_0x34b1d9(0x19b)]((_0x109113,_0xd8c1da)=>{var _0x324983=_0x34b1d9;_0x47f88d[_0xd8c1da][_0x324983(0x1a1)]=_0x109113;}),_0x349949['forEach']((_0x5e9199,_0x222935)=>{var _0x22cb35=_0x34b1d9;_0x47f88d[_0x222935][_0x22cb35(0x129)]=_0x5e9199;}),_0xe548a5['forEach']((_0x3fe9e0,_0x48a9a6)=>{var _0x319756=_0x34b1d9;_0x47f88d[_0x48a9a6][_0x319756(0x19f)]=_0x3fe9e0;}),_0x4bf7c6['forEach']((_0x197c26,_0x548565)=>{_0x47f88d[_0x548565]['room_names']=_0x197c26;}),_0x3a3edc[_0x34b1d9(0x19b)]((_0x46c82e,_0x5c6627)=>{var _0x4780ee=_0x34b1d9;_0x47f88d[_0x5c6627][_0x4780ee(0x17a)]=_0x46c82e;}),_0x46401d[_0x34b1d9(0x19b)]((_0x261708,_0x4b0b64)=>{var _0x4ee8b3=_0x34b1d9;_0x47f88d[_0x4b0b64][_0x4ee8b3(0x116)]=_0x261708;});const _0x541ec0=_0x47f88d[_0x34b1d9(0x128)](_0x444d06=>_0x444d06[_0x34b1d9(0x170)]!=='0'&&_0x444d06[_0x34b1d9(0x170)]!=='');var _0x32895d=0x0;_0x541ec0[_0x34b1d9(0x19b)](_0x314ff7=>{var _0x18a2cc=_0x34b1d9;console[_0x18a2cc(0x135)](_0x18a2cc(0xde),_0x314ff7),parseInt(_0x314ff7[_0x18a2cc(0x170)])<=0x0&&_0x32895d++;});if(_0x32895d!=0x0)return _0xb41140[_0x34b1d9(0xe7)](_0x34b1d9(0x15e),_0x34b1d9(0x11a)),_0x62bfec[_0x34b1d9(0x15c)](_0x34b1d9(0x182));const _0x3d84a4=new adjustment_finished({'warehouse_name':_0x150598,'date':_0x5bf969,'product':_0x541ec0,'note':_0x35f622,'room':_0x32cf35,'invoice':_0x4f1e2f,'JO_number':_0x12645c,'expiry_date':_0x145dc1}),_0x3335d4=await _0x3d84a4[_0x34b1d9(0x179)]();_0xb41140['flash']('success',_0x34b1d9(0x104)),_0x62bfec[_0x34b1d9(0x15c)](_0x34b1d9(0x19c)+_0x3335d4[_0x34b1d9(0xf7)]);}catch(_0x596682){console['log'](_0x596682),_0x62bfec['status'](0xc8)[_0x34b1d9(0x13d)]({'message':_0x596682[_0x34b1d9(0xea)]});}}),router[a0_0x51ee61(0xf8)]('/preview/:id',auth,async(_0xa40b7,_0x40261e)=>{var _0x413658=a0_0x51ee61;try{const {username:_0xffc059,email:_0x4b4177,role:_0x12c9e9}=_0xa40b7[_0x413658(0x137)],_0x3fd940=_0xa40b7[_0x413658(0x137)],_0x2c6337=await profile[_0x413658(0x13b)]({'email':_0x3fd940['email']}),_0x31f43d=await master_shop['find'](),_0x7a634e=_0xa40b7[_0x413658(0x173)]['id'],_0x4a68a6=await adjustment_finished[_0x413658(0xeb)]({'_id':_0x7a634e}),_0x44d528=await purchases[_0x413658(0x150)]([{'$match':{'warehouse_name':_0x4a68a6[_0x413658(0x15d)]}},{'$unwind':_0x413658(0x118)},{'$group':{'_id':_0x413658(0x19d)}}]);console['log']('purchases_data',_0x44d528);const _0x5ce2cb=await product['find']({}),_0x106a81=await warehouse[_0x413658(0x150)]([{'$match':{'name':_0x4a68a6[_0x413658(0x15d)],'warehouse_category':_0x413658(0x115)}},{'$unwind':'$product_details'},{'$group':{'_id':_0x413658(0x139),'name':{'$first':_0x413658(0x108)},'product_stock':{'$first':_0x413658(0x156)},'bay':{'$first':_0x413658(0x11b)},'bin':{'$first':_0x413658(0x114)},'type':{'$first':_0x413658(0xf5)},'floorlevel':{'$first':_0x413658(0x191)},'primary_code':{'$first':_0x413658(0x10c)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x413658(0x105)},'storage':{'$first':_0x413658(0x124)},'rack':{'$first':_0x413658(0x15f)},'expiry_date':{'$first':_0x413658(0x16e)},'production_date':{'$first':_0x413658(0x187)},'batch_code':{'$first':_0x413658(0xfd)},'maxPerUnit':{'$first':_0x413658(0x134)},'room':{'$first':_0x413658(0x18e)}}}]);if(_0x31f43d[0x0][_0x413658(0xe3)]=='English\x20(US)'){var _0x351ca5=users[_0x413658(0x167)];console[_0x413658(0x135)](_0x351ca5);}else{if(_0x31f43d[0x0][_0x413658(0xe3)]==_0x413658(0x12d))var _0x351ca5=users['Hindi'];else{if(_0x31f43d[0x0][_0x413658(0xe3)]=='German')var _0x351ca5=users[_0x413658(0x110)];else{if(_0x31f43d[0x0][_0x413658(0xe3)]==_0x413658(0x147))var _0x351ca5=users[_0x413658(0x147)];else{if(_0x31f43d[0x0][_0x413658(0xe3)]=='French')var _0x351ca5=users[_0x413658(0x119)];else{if(_0x31f43d[0x0][_0x413658(0xe3)]==_0x413658(0xfc))var _0x351ca5=users[_0x413658(0x166)];else{if(_0x31f43d[0x0]['language']=='Chinese')var _0x351ca5=users[_0x413658(0x121)];else{if(_0x31f43d[0x0][_0x413658(0xe3)]==_0x413658(0x183))var _0x351ca5=users[_0x413658(0x15a)];}}}}}}}_0x40261e[_0x413658(0x10d)](_0x413658(0xf0),{'success':_0xa40b7[_0x413658(0xe7)]('success'),'errors':_0xa40b7[_0x413658(0xe7)](_0x413658(0x15e)),'role':_0x3fd940,'profile':_0x2c6337,'adjustment':_0x4a68a6,'stock':_0x106a81,'master_shop':_0x31f43d,'warehouse_name':_0x44d528,'unit':_0x5ce2cb,'language':_0x351ca5});}catch(_0x5b0a18){console[_0x413658(0x135)](_0x5b0a18),_0x40261e[_0x413658(0x10a)](0xc8)['json']({'message':_0x5b0a18[_0x413658(0xea)]});}}),router['post'](a0_0x51ee61(0xf1),auth,async(_0x355b55,_0x44a9d4)=>{var _0x14588b=a0_0x51ee61;try{const {invoice:_0x1e2bc8,warehouse_name:_0x19ad50,Room_name:_0x460775}=_0x355b55['body'],_0x575eec=_0x355b55[_0x14588b(0x173)]['id'],_0x6ac24=await adjustment_finished['findById']({'_id':_0x575eec});var _0x513ad9;const _0x4ac79b=_0x6ac24['product'][_0x14588b(0x16a)](async _0x2057c8=>{var _0x2ba87b=_0x14588b;if(_0x2057c8[_0x2ba87b(0x170)]>0x0){_0x513ad9=await warehouse[_0x2ba87b(0x13b)]({'name':_0x19ad50,'room':_0x2057c8[_0x2ba87b(0x107)],'warehouse_category':_0x2ba87b(0x115)});const _0x452220=_0x513ad9[_0x2ba87b(0xe4)][_0x2ba87b(0x16a)](_0x4018f1=>{var _0x35533c=_0x2ba87b;console[_0x35533c(0x135)](_0x2057c8['types']);if(_0x2057c8[_0x35533c(0x140)]=='minus')_0x4018f1['product_name']==_0x2057c8[_0x35533c(0xf4)]&&_0x4018f1['bay']==_0x2057c8['bay']&&_0x4018f1[_0x35533c(0x1a1)]==_0x2057c8[_0x35533c(0x1a1)]&&_0x4018f1['production_date']==_0x2057c8[_0x35533c(0x129)]&&_0x4018f1[_0x35533c(0x196)]==_0x2057c8[_0x35533c(0x196)]&&_0x4018f1['invoice']==_0x2057c8['invoice']&&(_0x4018f1[_0x35533c(0x13f)]=_0x4018f1['product_stock']-_0x2057c8[_0x35533c(0x170)]);else _0x2057c8[_0x35533c(0x140)]==_0x35533c(0x172)&&(_0x4018f1[_0x35533c(0xf4)]==_0x2057c8[_0x35533c(0xf4)]&&_0x4018f1[_0x35533c(0x16c)]==_0x2057c8[_0x35533c(0x16c)]&&_0x4018f1[_0x35533c(0x1a1)]==_0x2057c8[_0x35533c(0x1a1)]&&_0x4018f1['production_date']==_0x2057c8['production_date']&&_0x4018f1[_0x35533c(0x196)]==_0x2057c8['batch_code']&&_0x4018f1[_0x35533c(0x116)]==_0x2057c8[_0x35533c(0x116)]&&(_0x4018f1[_0x35533c(0x13f)]=_0x4018f1[_0x35533c(0x13f)]+_0x2057c8['adjust_qty']));});}return _0x513ad9;});Promise[_0x14588b(0x153)](_0x4ac79b)[_0x14588b(0x14a)](async _0x243995=>{var _0x12ed67=_0x14588b;try{for(const _0x112104 of _0x243995){await _0x112104['save']();}_0x6ac24[_0x12ed67(0x100)]=_0x12ed67(0x158);const _0x59de57=await _0x6ac24['save'](),_0x1004c2=await master_shop[_0x12ed67(0x19e)](),_0x377720=await email_settings['findOne'](),_0x11a708=await supervisor_settings[_0x12ed67(0x19e)]();var _0xcdf9f=_0x6ac24[_0x12ed67(0x145)],_0x2247a6='',_0x471ecc;for(_0x471ecc in _0xcdf9f){var _0x558067='FG';_0x6ac24['warehouse_name']==_0x12ed67(0x180)&&(_0x558067='DG'),_0x2247a6+=_0x12ed67(0x14b)+_0x12ed67(0x160)+_0xcdf9f[_0x471ecc][_0x12ed67(0xf4)]+_0x12ed67(0x126)+_0x12ed67(0x160)+_0xcdf9f[_0x471ecc]['product_code']+_0x12ed67(0x126)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xcdf9f[_0x471ecc]['adjust_qty']+'</td>'+_0x12ed67(0x160)+_0xcdf9f[_0x471ecc]['unit']+_0x12ed67(0x126)+_0x12ed67(0x160)+_0xcdf9f[_0x471ecc][_0x12ed67(0xf2)]+_0x12ed67(0x126)+_0x12ed67(0x160)+_0x6ac24[_0x12ed67(0x15d)]+_0x12ed67(0x126)+_0x12ed67(0x160)+_0xcdf9f[_0x471ecc][_0x12ed67(0x107)]+_0x12ed67(0x126)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x558067+_0xcdf9f[_0x471ecc][_0x12ed67(0x16c)]+'</td>'+_0x12ed67(0x141);}let _0x2de735=nodemailer[_0x12ed67(0x13a)]({'host':_0x377720[_0x12ed67(0xf3)],'port':Number(_0x377720[_0x12ed67(0x11e)]),'secure':![],'auth':{'user':_0x377720[_0x12ed67(0x195)],'pass':_0x377720[_0x12ed67(0xe2)]}}),_0x397803={'from':_0x377720[_0x12ed67(0x195)],'to':_0x11a708[0x0][_0x12ed67(0x175)],'subject':_0x12ed67(0x17c),'attachments':[{'filename':'Logo.png','path':__dirname+_0x12ed67(0x125)+'/upload/'+_0x1004c2[0x0]['image'],'cid':_0x12ed67(0xe5)}],'html':_0x12ed67(0x17b)+'<html><head><title></title>'+_0x12ed67(0x164)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x12ed67(0x106)+_0x12ed67(0xf6)+_0x12ed67(0x15b)+'<h2>\x20'+_0x1004c2[0x0][_0x12ed67(0x132)]+'\x20</h2>'+_0x12ed67(0xf6)+_0x12ed67(0xf6)+_0x12ed67(0x198)+_0x12ed67(0x15b)+_0x12ed67(0x161)+_0x12ed67(0x18f)+_0x6ac24['invoice']+'\x20'+_0x12ed67(0xe9)+'\x20Order\x20Date\x20:\x20'+_0x6ac24[_0x12ed67(0xfb)]+'\x20'+_0x12ed67(0xff)+_0x12ed67(0x194)+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x12ed67(0x14b)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x12ed67(0x177)+_0x12ed67(0x127)+_0x12ed67(0x16d)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x12ed67(0x18d)+_0x12ed67(0x141)+_0x12ed67(0xee)+_0x12ed67(0x190)+'\x20'+_0x2247a6+'\x20'+_0x12ed67(0xe6)+'</table>'+_0x12ed67(0x15b)+'<strong>\x20Regards\x20</strong>'+_0x12ed67(0x111)+_0x1004c2[0x0][_0x12ed67(0x132)]+_0x12ed67(0x194)+_0x12ed67(0xf6)+'</div>'+'</body></html>'};_0x2de735[_0x12ed67(0x10f)](_0x397803,function(_0x151ee1,_0x3cb78d){var _0x3d25e8=_0x12ed67;_0x151ee1?(console['log'](_0x151ee1),console[_0x3d25e8(0x135)](_0x3d25e8(0x17e))):console[_0x3d25e8(0x135)](_0x3d25e8(0x109));}),_0x355b55[_0x12ed67(0xe7)](_0x12ed67(0x19a),'Adjustment\x20Finalize\x20Successfully'),_0x44a9d4[_0x12ed67(0x15c)]('/picking_list/PDF_adjustment/'+_0x59de57['_id']);}catch(_0x5c1483){console['error'](_0x5c1483),_0x44a9d4[_0x12ed67(0x10a)](0x1f4)[_0x12ed67(0x13d)]({'error':_0x12ed67(0x142)});}})[_0x14588b(0xdf)](_0x2c8b1d=>{var _0x36774b=_0x14588b;console[_0x36774b(0x14e)](_0x2c8b1d),_0x44a9d4[_0x36774b(0x10a)](0x1f4)['json']({'error':_0x36774b(0x192)});});}catch(_0x454041){_0x44a9d4[_0x14588b(0x13d)]({'message':_0x454041[_0x14588b(0xea)]});}}),router[a0_0x51ee61(0xf8)](a0_0x51ee61(0x12e),auth,async(_0x301ac4,_0x8a9726)=>{var _0x5d96ab=a0_0x51ee61;try{const {username:_0x7610b4,email:_0x47fb24,role:_0x1abb5b}=_0x301ac4[_0x5d96ab(0x137)],_0x4b953b=_0x301ac4[_0x5d96ab(0x137)],_0x38f239=await profile[_0x5d96ab(0x13b)]({'email':_0x4b953b['email']}),_0x84ee29=await master_shop[_0x5d96ab(0x19e)]();console[_0x5d96ab(0x135)](_0x5d96ab(0x120),_0x84ee29);const _0x540bed=_0x301ac4[_0x5d96ab(0x173)]['id'],_0x5134d4=await adjustment_finished['findById']({'_id':_0x540bed});let _0x1258d5=new Date(_0x5134d4[_0x5d96ab(0x1a1)]),_0x1e4858=('0'+_0x1258d5[_0x5d96ab(0x10e)]())[_0x5d96ab(0x168)](-0x2),_0xc443f8=('0'+(_0x1258d5[_0x5d96ab(0x18c)]()+0x1))[_0x5d96ab(0x168)](-0x2),_0x5a98d4=_0x1258d5[_0x5d96ab(0x11d)](),_0x308b27=_0x5a98d4+'-'+_0xc443f8+'-'+_0x1e4858;var _0x3244eb=[_0x5d96ab(0x130),_0x5d96ab(0x159),'Return\x20Rooms'];const _0x358fe6=await purchases[_0x5d96ab(0x150)]([{'$match':{'warehouse_name':_0x5134d4[_0x5d96ab(0x15d)]}},{'$unwind':'$product'},{'$group':{'_id':_0x5d96ab(0x19d)}}]);console['log'](_0x5d96ab(0x148),_0x358fe6);const _0x6aac93=await product['find']({}),_0xe3a3d0=await warehouse[_0x5d96ab(0x150)]([{'$match':{'name':_0x5134d4[_0x5d96ab(0x15d)],'room':_0x5134d4[_0x5d96ab(0x12c)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x5d96ab(0x139),'name':{'$first':_0x5d96ab(0x108)},'product_stock':{'$first':_0x5d96ab(0x156)},'bay':{'$first':_0x5d96ab(0x11b)},'bin':{'$first':_0x5d96ab(0x114)},'type':{'$first':_0x5d96ab(0xf5)},'floorlevel':{'$first':_0x5d96ab(0x191)},'primary_code':{'$first':_0x5d96ab(0x10c)},'secondary_code':{'$first':_0x5d96ab(0x136)},'product_code':{'$first':_0x5d96ab(0x105)},'storage':{'$first':_0x5d96ab(0x124)},'rack':{'$first':_0x5d96ab(0x15f)}}}]);if(_0x84ee29[0x0][_0x5d96ab(0xe3)]==_0x5d96ab(0x157)){var _0x5dc2aa=users[_0x5d96ab(0x167)];console['log'](_0x5dc2aa);}else{if(_0x84ee29[0x0]['language']==_0x5d96ab(0x12d))var _0x5dc2aa=users[_0x5d96ab(0x12d)];else{if(_0x84ee29[0x0][_0x5d96ab(0xe3)]==_0x5d96ab(0x110))var _0x5dc2aa=users[_0x5d96ab(0x110)];else{if(_0x84ee29[0x0][_0x5d96ab(0xe3)]==_0x5d96ab(0x147))var _0x5dc2aa=users[_0x5d96ab(0x147)];else{if(_0x84ee29[0x0][_0x5d96ab(0xe3)]=='French')var _0x5dc2aa=users[_0x5d96ab(0x119)];else{if(_0x84ee29[0x0]['language']==_0x5d96ab(0xfc))var _0x5dc2aa=users[_0x5d96ab(0x166)];else{if(_0x84ee29[0x0][_0x5d96ab(0xe3)]==_0x5d96ab(0x121))var _0x5dc2aa=users[_0x5d96ab(0x121)];else{if(_0x84ee29[0x0][_0x5d96ab(0xe3)]==_0x5d96ab(0x183))var _0x5dc2aa=users[_0x5d96ab(0x15a)];}}}}}}}_0x8a9726[_0x5d96ab(0x10d)](_0x5d96ab(0x197),{'success':_0x301ac4['flash'](_0x5d96ab(0x19a)),'errors':_0x301ac4['flash'](_0x5d96ab(0x15e)),'role':_0x4b953b,'profile':_0x38f239,'adjustment':_0x5134d4,'stock':_0xe3a3d0,'master_shop':_0x84ee29,'warehouse_name':_0x358fe6,'unit':_0x6aac93,'language':_0x5dc2aa,'rooms_data':_0x3244eb,'ed_fullDate':_0x308b27});}catch(_0x40609c){console[_0x5d96ab(0x135)](_0x40609c),_0x8a9726[_0x5d96ab(0x10a)](0xc8)['json']({'message':_0x40609c[_0x5d96ab(0xea)]});}}),router[a0_0x51ee61(0x12a)](a0_0x51ee61(0x12e),auth,async(_0x204846,_0x1fa6b)=>{var _0x25a09e=a0_0x51ee61;try{const _0x5cacac=_0x204846[_0x25a09e(0x173)]['id'],_0x59bdbb=await adjustment_finished['findById']({'_id':_0x5cacac}),_0x5359a1=await warehouse[_0x25a09e(0x13b)]({'name':_0x59bdbb['warehouse_name'],'room':_0x59bdbb[_0x25a09e(0x12c)]}),{warehouse_name:_0x45bcca,date:_0x229e3d,prod_name:_0x34b275,level:_0x54fc00,isle:_0x5d0e79,pallet:_0x2b05b7,stock:_0x21c1de,types:_0x231ae1,adjust_qty:_0x1e0400,new_adjust_qty:_0x4e2d0c,note:_0x378b71,Room_name:_0x31b5cd,invoice:_0x422704,JO_number:_0x4d2408}=_0x204846[_0x25a09e(0x17f)];if(typeof _0x34b275==_0x25a09e(0x169))var _0x15da6b=[_0x204846['body']['prod_name']],_0x1e8a66=[_0x204846[_0x25a09e(0x17f)][_0x25a09e(0x154)]],_0x419cef=[_0x204846[_0x25a09e(0x17f)]['stock']],_0xfa739d=[_0x204846[_0x25a09e(0x17f)]['types']],_0x23ca1e=[_0x204846[_0x25a09e(0x17f)][_0x25a09e(0x170)]],_0x19bf0c=[_0x204846[_0x25a09e(0x17f)][_0x25a09e(0x131)]],_0x3fdd94=[_0x204846['body']['prod_code']],_0x16efc8=[_0x204846[_0x25a09e(0x17f)][_0x25a09e(0x163)]],_0x308a00=[_0x204846[_0x25a09e(0x17f)]['Secondary_units']],_0x1e69cd=[_0x204846[_0x25a09e(0x17f)]['batch_code']],_0x384b01=[_0x204846[_0x25a09e(0x17f)]['expiry_date']];else var _0x15da6b=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0x13e)]],_0x1e8a66=[..._0x204846[_0x25a09e(0x17f)]['level']],_0x419cef=[..._0x204846[_0x25a09e(0x17f)]['stock']],_0xfa739d=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0x140)]],_0x23ca1e=[..._0x204846[_0x25a09e(0x17f)]['adjust_qty']],_0x19bf0c=[..._0x204846['body'][_0x25a09e(0x131)]],_0x3fdd94=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0xe8)]],_0x16efc8=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0x163)]],_0x308a00=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0xe0)]],_0x1e69cd=[..._0x204846[_0x25a09e(0x17f)][_0x25a09e(0x196)]],_0x384b01=[..._0x204846['body'][_0x25a09e(0x1a1)]];const _0x4651a0=_0x15da6b[_0x25a09e(0x16a)](_0x6a4a4e=>{return _0x6a4a4e={'product_name':_0x6a4a4e};});_0x1e8a66[_0x25a09e(0x19b)]((_0x17fa60,_0x1f03d8)=>{_0x4651a0[_0x1f03d8]['bay']=_0x17fa60;}),_0x419cef[_0x25a09e(0x19b)]((_0x5263dd,_0x4cb3c9)=>{var _0x1dcc18=_0x25a09e;_0x4651a0[_0x4cb3c9][_0x1dcc18(0x176)]=_0x5263dd;}),_0xfa739d[_0x25a09e(0x19b)]((_0x1830a9,_0x1955af)=>{_0x4651a0[_0x1955af]['types']=_0x1830a9;}),_0x23ca1e[_0x25a09e(0x19b)]((_0x362126,_0x44d76a)=>{var _0x211105=_0x25a09e;_0x4651a0[_0x44d76a][_0x211105(0x170)]=_0x362126;}),_0x19bf0c[_0x25a09e(0x19b)]((_0x5b3263,_0x32df2e)=>{var _0x3b0c41=_0x25a09e;_0x4651a0[_0x32df2e][_0x3b0c41(0x131)]=_0x5b3263;}),_0x16efc8[_0x25a09e(0x19b)]((_0x37fc59,_0x3f64bc)=>{var _0x5baf58=_0x25a09e;_0x4651a0[_0x3f64bc][_0x5baf58(0x163)]=_0x37fc59;}),_0x308a00[_0x25a09e(0x19b)]((_0x509002,_0x35d74d)=>{_0x4651a0[_0x35d74d]['secondary_unit']=_0x509002;}),_0x3fdd94[_0x25a09e(0x19b)]((_0x2e11a6,_0x27384c)=>{var _0x32bbf7=_0x25a09e;_0x4651a0[_0x27384c][_0x32bbf7(0x174)]=_0x2e11a6;}),_0x1e69cd[_0x25a09e(0x19b)]((_0x60e52b,_0x1e44c2)=>{_0x4651a0[_0x1e44c2]['batch_code']=_0x60e52b;}),_0x384b01[_0x25a09e(0x19b)]((_0x1685b1,_0x2ebc3a)=>{_0x4651a0[_0x2ebc3a]['expiry_date']=_0x1685b1;});const _0x4206c6=_0x4651a0[_0x25a09e(0x128)](_0x5c3bb8=>_0x5c3bb8[_0x25a09e(0x170)]!=='0'&&_0x5c3bb8['adjust_qty']!=='');var _0x55f974=0x0;_0x4206c6[_0x25a09e(0x19b)](_0x1e919a=>{var _0x2a1c27=_0x25a09e;console[_0x2a1c27(0x135)](_0x2a1c27(0xde),_0x1e919a),parseInt(_0x1e919a[_0x2a1c27(0x170)])<=0x0&&_0x55f974++;});if(_0x55f974!=0x0)return _0x204846['flash']('errors',_0x25a09e(0x11a)),_0x1fa6b['redirect'](_0x25a09e(0x182));_0x59bdbb[_0x25a09e(0x15d)]=_0x45bcca,_0x59bdbb[_0x25a09e(0xfb)]=_0x229e3d,_0x59bdbb[_0x25a09e(0x145)]=_0x4206c6,_0x59bdbb['note']=_0x378b71,_0x59bdbb['room']=_0x31b5cd,_0x59bdbb['invoice']=_0x422704,_0x59bdbb['JO_number']=_0x4d2408;const _0x73fab8=await _0x59bdbb[_0x25a09e(0x179)](),_0x24bf32=await warehouse[_0x25a09e(0x13b)]({'name':_0x45bcca,'room':_0x31b5cd});_0x73fab8[_0x25a09e(0x145)][_0x25a09e(0x19b)](_0x1ad77a=>{const _0x5b5ea1=_0x24bf32['product_details']['map'](_0x3f2fe9=>{var _0x4f0e71=a0_0x295d;_0x1ad77a['types']==_0x4f0e71(0x12b)?_0x3f2fe9[_0x4f0e71(0xf4)]==_0x1ad77a['product_name']&&_0x3f2fe9[_0x4f0e71(0x16c)]==_0x1ad77a['bay']&&(_0x3f2fe9[_0x4f0e71(0x13f)]=parseInt(_0x3f2fe9[_0x4f0e71(0x13f)])-parseInt(_0x1ad77a[_0x4f0e71(0x170)])):_0x3f2fe9['product_name']==_0x1ad77a[_0x4f0e71(0xf4)]&&_0x3f2fe9['bay']==_0x1ad77a[_0x4f0e71(0x16c)]&&(_0x3f2fe9['product_stock']=parseInt(_0x3f2fe9['product_stock'])+parseInt(_0x1ad77a[_0x4f0e71(0x170)]));});}),await _0x24bf32[_0x25a09e(0x179)](),_0x204846[_0x25a09e(0xe7)](_0x25a09e(0x19a),'adjustment\x20data\x20update\x20successfully'),_0x1fa6b[_0x25a09e(0x15c)](_0x25a09e(0x14d));}catch(_0x4364fb){console[_0x25a09e(0x135)](_0x4364fb);}}),router['post']('/barcode_scanner',async(_0x381a4c,_0x521726)=>{var _0xb7e15b=a0_0x51ee61;const {primary_code:_0x437fec,warehouse_data:_0x483f7f,rooms_data:_0x422685,Roomslist:_0x5a3970}=_0x381a4c['body'],_0x3fa28c=_0x5a3970['split'](','),_0x4fb4c4=[];async function _0x18fd73(_0x209d42){var _0x279329=a0_0x295d;const _0x18ed29=await warehouse[_0x279329(0x150)]([{'$match':{'name':_0x483f7f,'room':_0x209d42}},{'$unwind':_0x279329(0x11c)},{'$match':{'product_details.primary_code':_0x437fec}},{'$group':{'_id':_0x279329(0x139),'name':{'$first':_0x279329(0x108)},'product_stock':{'$first':_0x279329(0x156)},'primary_code':{'$first':_0x279329(0x10c)},'secondary_code':{'$first':_0x279329(0x136)},'product_code':{'$first':_0x279329(0x105)},'level':{'$first':_0x279329(0x11b)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x279329(0xf5)},'pallet':{'$first':_0x279329(0x191)},'unit':{'$first':_0x279329(0x14c)},'secondary_unit':{'$first':_0x279329(0x189)},'storage':{'$first':_0x279329(0x124)},'rack':{'$first':_0x279329(0x15f)},'expiry_date':{'$first':_0x279329(0x16e)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':'P'},'maxPerUnit':{'$first':_0x279329(0x134)},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x279329(0x103)}}}]),_0x139af1=await warehouse[_0x279329(0x150)]([{'$match':{'name':_0x483f7f,'room':_0x209d42}},{'$unwind':_0x279329(0x11c)},{'$match':{'product_details.secondary_code':_0x437fec}},{'$group':{'_id':_0x279329(0x139),'name':{'$first':_0x279329(0x108)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x279329(0x10c)},'secondary_code':{'$first':_0x279329(0x136)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x279329(0x11b)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x279329(0xf5)},'pallet':{'$first':_0x279329(0x191)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x279329(0x189)},'storage':{'$first':_0x279329(0x124)},'rack':{'$first':_0x279329(0x15f)},'expiry_date':{'$first':_0x279329(0x16e)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':'S'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'roomNamed':{'$first':_0x279329(0x18e)},'invoice':{'$first':_0x279329(0x103)}}}]);if(_0x18ed29[_0x279329(0x16b)]>0x0)_0x4fb4c4[_0x279329(0x102)](_0x18ed29);else _0x139af1['length']>0x0&&_0x4fb4c4[_0x279329(0x102)](_0x139af1);}const _0xea6a58=_0x3fa28c[_0xb7e15b(0x16a)](_0x14797f=>_0x18fd73(_0x14797f));await Promise[_0xb7e15b(0x153)](_0xea6a58),_0x521726[_0xb7e15b(0x13d)](_0x4fb4c4);}),router[a0_0x51ee61(0x12a)](a0_0x51ee61(0x123),async(_0x41e18a,_0xb642dc)=>{var _0x2aba5f=a0_0x51ee61;const {productCode:_0x4a5a47,bay:_0x4aaff4,warehouses:_0x6060fb,room:_0x526f92}=_0x41e18a[_0x2aba5f(0x17f)];console['log'](_0x41e18a[_0x2aba5f(0x17f)]);try{const _0x571fea=await warehouse[_0x2aba5f(0x150)]([{'$match':{'name':_0x6060fb,'room':_0x526f92}},{'$unwind':'$product_details'},{'$match':{'product_details.bay':parseInt(_0x4aaff4)}},{'$group':{'_id':_0x2aba5f(0x139),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x2aba5f(0x156)},'bay':{'$first':'$product_details.bay'},'maxProducts':{'$first':_0x2aba5f(0x138)}}}]);_0xb642dc['status'](0xc8)['json'](_0x571fea);}catch(_0x42418e){_0xb642dc[_0x2aba5f(0x10a)](0x194)[_0x2aba5f(0x13d)]({'message':_0x42418e[_0x2aba5f(0xea)]});}}),module[a0_0x51ee61(0x14f)]=router;function a0_0x4e56(){var _0x4938cd=['DRY\x20GOODS','2883621Gnebnp','back','Arabic\x20(ae)','New_Qty_Converted','Enabled','product_date','$product_details.production_date','1356705spUaxM','$product_details.secondary_unit','QA\x20Warehouse','../models/all_models','getMonth','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','$room','\x20Order\x20Number\x20:\x20','<tbody\x20style=\x22text-align:\x20center;\x22>','$product_details.floorlevel','An\x20error\x20occurred.','3977608vJeFwI','</h5>','email','batch_code','edit_adjustment_finished','<hr\x20class=\x22my-3\x22>','../public/language/languages.json','success','forEach','/adjustment_finished/preview/','$product.product_name','find','prod_cat','staff','expiry_date','New_Qty_Converted_adj','foreach\x20newproduct','catch','Secondary_units','$name','password','language','product_details','logo','</tbody>','flash','prod_code','<span\x20style=\x22float:\x20right;\x22>','message','findById','Router','2881516kchFiJ','</thead>','add_adjustment_finished','edit_adjustment_finished_view','/preview/:id','secondary_unit','host','product_name','$product_details.type','</div>','_id','get','$_id','$finalize','date','Portuguese\x20(BR)','$product_details.batch_code','toString','</span>','finalize','padStart','push','$product_details.invoice','adjustment\x20add\x20successfull','$product_details.product_code','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','room_names','$product_details.product_name','Email\x20sent\x20successfully','status','6gjRiiD','$product_details.primary_code','render','getDate','sendMail','German','<h5>','/adjustment/view','3734896hWFJYV','$product_details.bin','Finished\x20Goods','invoice','Return\x20Rooms','$product','French','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','$product_details.bay','$product_details','getFullYear','port','../middleware/auth','master','Chinese','floor','/CheckingWarehouse','$product_details.storage','/../public','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','filter','production_date','post','minus','room','Hindi','/view/:id','$product.room_names','Ambient','new_adjust_qty','site_title','prod_invoice','$product_details.maxPerUnit','log','$product_details.secondary_code','user','$product_details.maxProducts','$product_details._id','createTransport','findOne','867380hhofMB','json','prod_name','product_stock','types','</tr>','An\x20error\x20occurred\x20while\x20saving\x20data.','Rooms','$invoice','product','ADJF-','Spanish','purchases_data','/view/add_adjustment','then','<tr>','$product_details.unit','/adjustment_finished/view','error','exports','aggregate','stock','express','all','level','8731710FqDLyJ','$product_details.product_stock','English\x20(US)','True','Enclosed','Arabic','<div>','redirect','warehouse_name','errors','$product_details.rack','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<h5\x20style=\x22text-align:\x20left;\x22>','$date','unit','</head><body>','role','Portuguese','English','slice','string','map','length','bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','$product_details.expiry_date','warehouse','adjust_qty','random','add','params','product_code','FGSEmail','stockBefore','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','63vUDKod','save','maxPerUnit','<!DOCTYPE\x20html>','Adjustment\x20Mail','adjustment_finished','Error\x20Occurs','body'];a0_0x4e56=function(){return _0x4938cd;};return a0_0x4e56();}