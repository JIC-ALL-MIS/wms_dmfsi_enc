function a0_0x2dfe(){var _0x16ffac=['$product_details.type','</body></html>','production_date','warehouse','finalize','36528ShMFgV','Receiving\x20Area','An\x20error\x20occurred\x20while\x20saving\x20data.','<h5>','map','/adjustment/preview/','$product_details.secondary_unit','rack','maxperunit','<tbody\x20style=\x22text-align:\x20center;\x22>','/view/add_adjustment','flash','\x20<>\x20','prod_code','filter','aggregate','1187949aJPVwi','Email\x20sent\x20successfully','$product_details.rack','2134VTBQdo','64390XcdXYr','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','user','slice','product_code','<span\x20style=\x22float:\x20right;\x22>','prime1','French','$product_details.maxPerUnit','Chinese','/view/:id','logo','</tr>','Level','find','$product_details.primary_code','Return\x20Rooms','$product_details.bin','\x20</h2>','$product','1223720pBFkkX','secondary_unit','Hindi','length','express','adjustment\x20data\x20update\x20successfully','/view','$product_details.expiry_date','$product_details.secondary_code','edit_adjustment','floor','/CheckingWarehouse','$product_details.batch_code','edit_adjustment_view','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','exports','<hr\x20class=\x22my-3\x22>','findById','<!DOCTYPE\x20html>','</head><body>','maxPerUnit','Rooms','findOne','then','adjustment','$product_details.isle','$product_details.unit','type','master','max_per_unit','English\x20(US)','</h5>','Enclosed','success','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','prod_name','redirect','False','site_title','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','post','<h5\x20style=\x22text-align:\x20left;\x22>','$product_details.bay','room','secondary_code','random','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','Logo.png','8qGTGVx','Adjustment\x20Mail','language','message','English','toString','60olBFtR','product','$product_details.storage','$product_details','ADJ-','</thead>','error','$room','get','primary_code','unit','$product.product_name','\x20Order\x20Date\x20:\x20','host','adjust_qty','/adjustment/view','$product_details.product_stock','stock','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','bin','email','body','<div>','createTransport','back','$product_details.production_date','errors','minus','Spanish','role','product_stock','invoice','Shelves','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','235806NqiVEc','133hQkquf','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','$name','</td>','expiry_date','Ambient','6321537pXfplv','adjustment\x20add\x20successfull','<table\x20style=\x22width:\x20100%\x20!important;\x22>','foreach\x20newproduct','True','../public/language/languages.json','log','152406KAiYAa','Arabic','status','level','all','$product_details.product_cat','$product_details._id','image','New_Qty_Converted_adj','German','batch_code','password','\x20Order\x20Number\x20:\x20','$product_details.product_code','room_names','new_adjust_qty','Enabled','nodemailer','prod_cat','Primary_Units','$product_details.pallet','adjustment\x20Finalized\x20successfully','catch','second1','json','../models/all_models','Router','Secondary_units','/picking_list/PDF_adjustment_rm/','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Arabic\x20(ae)','split','params','Error\x20Occurs','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.product_name','$product_details.maxProducts','</span>','warehouse_name','/barcode_scanner','/preview/:id','types','staff','string','render','stockBefore','storage','_id','floorlevel','sendMail','save','push','<tr>','product_name','</table>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Portuguese','Floor','An\x20error\x20occurred.','New_Qty_Converted','product_details','bay','</tbody>','Raw\x20Materials','</div>','$date','$product_details.floorlevel','date','Return\x20Goods','forEach','Portuguese\x20(BR)','1hacUIk'];a0_0x2dfe=function(){return _0x16ffac;};return a0_0x2dfe();}var a0_0x19176a=a0_0x23a1;(function(_0x430d05,_0xfd3354){var _0x14e4c3=a0_0x23a1,_0x44ef31=_0x430d05();while(!![]){try{var _0x2782b1=parseInt(_0x14e4c3(0x1ed))/0x1*(-parseInt(_0x14e4c3(0x198))/0x2)+-parseInt(_0x14e4c3(0x203))/0x3+-parseInt(_0x14e4c3(0x176))/0x4*(-parseInt(_0x14e4c3(0x207))/0x5)+parseInt(_0x14e4c3(0x1a6))/0x6*(-parseInt(_0x14e4c3(0x199))/0x7)+-parseInt(_0x14e4c3(0x170))/0x8*(-parseInt(_0x14e4c3(0x19f))/0x9)+-parseInt(_0x14e4c3(0x140))/0xa+parseInt(_0x14e4c3(0x206))/0xb*(parseInt(_0x14e4c3(0x1f3))/0xc);if(_0x2782b1===_0xfd3354)break;else _0x44ef31['push'](_0x44ef31['shift']());}catch(_0x5a5b57){_0x44ef31['push'](_0x44ef31['shift']());}}}(a0_0x2dfe,0x59a76));const express=require(a0_0x19176a(0x144)),app=express(),router=express[a0_0x19176a(0x1c0)](),auth=require('../middleware/auth'),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x19176a(0x1bf)),users=require(a0_0x19176a(0x1a4)),nodemailer=require(a0_0x19176a(0x1b7));function a0_0x23a1(_0xd94a4d,_0x10a12e){var _0x2dfe26=a0_0x2dfe();return a0_0x23a1=function(_0x23a1c9,_0x216cf0){_0x23a1c9=_0x23a1c9-0x13d;var _0x1a1f24=_0x2dfe26[_0x23a1c9];return _0x1a1f24;},a0_0x23a1(_0xd94a4d,_0x10a12e);}router['get'](a0_0x19176a(0x146),auth,async(_0x54ab73,_0x49473f)=>{var _0x2bd5d5=a0_0x19176a;try{const {username:_0x5bc461,email:_0x3f4ac0,role:_0x21c8b6}=_0x54ab73['user'],_0x5ded30=_0x54ab73[_0x2bd5d5(0x209)],_0x1a4e18=await profile[_0x2bd5d5(0x156)]({'email':_0x5ded30[_0x2bd5d5(0x18a)]}),_0x3c8c38=await master_shop['find']();console['log'](_0x2bd5d5(0x15c),_0x3c8c38);let _0x4ed8f8;if(_0x5ded30['role']=='staff'){const _0x4b5678=await staff[_0x2bd5d5(0x156)]({'email':_0x5ded30[_0x2bd5d5(0x18a)]});_0x4ed8f8=await warehouse[_0x2bd5d5(0x215)]({'status':_0x2bd5d5(0x1b6),'name':_0x4b5678[_0x2bd5d5(0x1f1)]});}else _0x4ed8f8=await warehouse[_0x2bd5d5(0x215)]({'status':_0x2bd5d5(0x1b6)});const _0xe00fbf=await product[_0x2bd5d5(0x215)]();let _0x3d2fff;if(_0x5ded30[_0x2bd5d5(0x193)]==_0x2bd5d5(0x1d0)){const _0x410deb=await staff['findOne']({'email':_0x5ded30[_0x2bd5d5(0x18a)]});_0x3d2fff=await adjustment[_0x2bd5d5(0x215)]({'warehouse_name':_0x410deb[_0x2bd5d5(0x1f1)]});}else _0x3d2fff=await adjustment['aggregate']([{'$unwind':_0x2bd5d5(0x13f)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':_0x2bd5d5(0x1e7)},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x3c8c38[0x0][_0x2bd5d5(0x172)]==_0x2bd5d5(0x15e)){var _0x2b614c=users[_0x2bd5d5(0x174)];console['log'](_0x2b614c);}else{if(_0x3c8c38[0x0]['language']==_0x2bd5d5(0x142))var _0x2b614c=users[_0x2bd5d5(0x142)];else{if(_0x3c8c38[0x0][_0x2bd5d5(0x172)]=='German')var _0x2b614c=users[_0x2bd5d5(0x1af)];else{if(_0x3c8c38[0x0]['language']==_0x2bd5d5(0x192))var _0x2b614c=users[_0x2bd5d5(0x192)];else{if(_0x3c8c38[0x0]['language']=='French')var _0x2b614c=users[_0x2bd5d5(0x20e)];else{if(_0x3c8c38[0x0][_0x2bd5d5(0x172)]==_0x2bd5d5(0x1ec))var _0x2b614c=users[_0x2bd5d5(0x1de)];else{if(_0x3c8c38[0x0][_0x2bd5d5(0x172)]==_0x2bd5d5(0x210))var _0x2b614c=users[_0x2bd5d5(0x210)];else{if(_0x3c8c38[0x0][_0x2bd5d5(0x172)]==_0x2bd5d5(0x1c4))var _0x2b614c=users[_0x2bd5d5(0x1a7)];}}}}}}}_0x49473f[_0x2bd5d5(0x1d2)](_0x2bd5d5(0x158),{'success':_0x54ab73[_0x2bd5d5(0x1fe)](_0x2bd5d5(0x161)),'errors':_0x54ab73['flash'](_0x2bd5d5(0x190)),'role':_0x5ded30,'profile':_0x1a4e18,'warehouse':_0x4ed8f8,'product':_0xe00fbf,'adjustment':_0x3d2fff,'master_shop':_0x3c8c38,'language':_0x2b614c});}catch(_0x40947c){console[_0x2bd5d5(0x1a5)](_0x40947c);}});async function getRandom8DigitNumber(){var _0x54c018=a0_0x19176a;const _0x435c81=0x989680,_0x4bbc3e=0x5f5e0ff,_0x20c0a2=Math[_0x54c018(0x14a)](Math[_0x54c018(0x16d)]()*(_0x4bbc3e-_0x435c81+0x1))+_0x435c81;var _0x25579;const _0x40cb7f=await adjustment[_0x54c018(0x156)]({'invoice':_0x54c018(0x17a)+_0x20c0a2});return _0x40cb7f&&_0x40cb7f[_0x54c018(0x143)]>0x0?_0x25579=_0x54c018(0x17a)+_0x20c0a2:_0x25579=_0x54c018(0x17a)+_0x20c0a2,_0x25579;}router[a0_0x19176a(0x17e)](a0_0x19176a(0x1fd),auth,async(_0x310867,_0x727934)=>{var _0x215038=a0_0x19176a;try{const {username:_0x314ade,email:_0x1f5485,role:_0x7dde82}=_0x310867['user'],_0x5bc5a9=_0x310867[_0x215038(0x209)],_0xf21660=await profile[_0x215038(0x156)]({'email':_0x5bc5a9['email']}),_0x6d4cc2=await master_shop[_0x215038(0x215)]();let _0x2f72e0;if(_0x5bc5a9[_0x215038(0x193)]==_0x215038(0x1d0)){const _0x4f5eea=await staff[_0x215038(0x156)]({'email':_0x5bc5a9['email']});_0x2f72e0=await warehouse[_0x215038(0x202)]([{'$match':{'status':_0x215038(0x1b6),'name':_0x4f5eea['warehouse'],'warehouse_category':_0x215038(0x1e5),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':'$name','name':{'$first':_0x215038(0x19b)}}}]);}else _0x2f72e0=await warehouse[_0x215038(0x202)]([{'$match':{'status':_0x215038(0x1b6),'warehouse_category':_0x215038(0x1e5),'name':{'$ne':_0x215038(0x1ea)}}},{'$group':{'_id':_0x215038(0x19b),'name':{'$first':'$name'}}}]);const _0x4d7f0b=await product[_0x215038(0x215)]({}),_0x5c74f4=await adjustment['find']({}),_0x1cc9ac=_0x5c74f4[_0x215038(0x143)]+0x1,_0x28d12a=_0x215038(0x17a)+_0x1cc9ac[_0x215038(0x175)]()['padStart'](0x5,'0');var _0x4aa144=[_0x215038(0x19e),_0x215038(0x160),_0x215038(0x217)];if(_0x6d4cc2[0x0]['language']==_0x215038(0x15e))var _0x20ec22=users[_0x215038(0x174)];else{if(_0x6d4cc2[0x0][_0x215038(0x172)]=='Hindi')var _0x20ec22=users[_0x215038(0x142)];else{if(_0x6d4cc2[0x0][_0x215038(0x172)]==_0x215038(0x1af))var _0x20ec22=users[_0x215038(0x1af)];else{if(_0x6d4cc2[0x0]['language']==_0x215038(0x192))var _0x20ec22=users['Spanish'];else{if(_0x6d4cc2[0x0]['language']==_0x215038(0x20e))var _0x20ec22=users[_0x215038(0x20e)];else{if(_0x6d4cc2[0x0]['language']==_0x215038(0x1ec))var _0x20ec22=users['Portuguese'];else{if(_0x6d4cc2[0x0]['language']=='Chinese')var _0x20ec22=users['Chinese'];else{if(_0x6d4cc2[0x0]['language']=='Arabic\x20(ae)')var _0x20ec22=users[_0x215038(0x1a7)];}}}}}}}const _0x5a27ec=getRandom8DigitNumber();_0x5a27ec[_0x215038(0x157)](_0x1f082d=>{var _0x8b3135=_0x215038;_0x727934[_0x8b3135(0x1d2)]('add_adjustment',{'success':_0x310867[_0x8b3135(0x1fe)](_0x8b3135(0x161)),'errors':_0x310867[_0x8b3135(0x1fe)]('errors'),'role':_0x5bc5a9,'profile':_0xf21660,'warehouse':_0x2f72e0,'product':_0x4d7f0b,'master_shop':_0x6d4cc2,'language':_0x20ec22,'rooms_data':_0x4aa144,'invoice_no':_0x1f082d});})[_0x215038(0x1bc)](_0x302140=>{var _0x2e1d06=_0x215038;_0x310867[_0x2e1d06(0x1fe)](_0x2e1d06(0x190),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x727934[_0x2e1d06(0x164)](_0x2e1d06(0x185));});}catch(_0x461681){console[_0x215038(0x1a5)](_0x461681);}}),router[a0_0x19176a(0x168)]('/view/add_adjustment',auth,async(_0x4ba68f,_0x56b707)=>{var _0x4a3646=a0_0x19176a;try{const {warehouse_name:_0x320828,date:_0x909652,prod_name:_0x486701,level:_0x206d89,isle:_0xeb4ac3,pallet:_0x1fa683,stock:_0xeaf764,types:_0x46a86c,adjust_qty:_0x37faef,new_adjust_qty:_0x1334af,note:_0x103b0e,Room_name:_0x549f80,invoice:_0x209a2e,JO_number:_0x5d5b6c,expiry_date:_0x45d985}=_0x4ba68f[_0x4a3646(0x18b)];if(typeof _0x486701==_0x4a3646(0x1d1))var _0x1a5ddd=[_0x4ba68f[_0x4a3646(0x18b)]['prod_name']],_0x52961d=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1a9)]],_0x9154a=[_0x4ba68f[_0x4a3646(0x18b)]['stock']],_0x466520=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1cf)]],_0x2caa1e=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1ae)]],_0xfad3aa=[_0x4ba68f[_0x4a3646(0x18b)]['New_Qty_Converted']],_0x2ca4e3=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1b9)]],_0x3c3d27=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1c1)]],_0x28bb0d=[_0x4ba68f['body'][_0x4a3646(0x200)]],_0x5c8ccb=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1b0)]],_0x331622=[_0x4ba68f[_0x4a3646(0x18b)]['expiry_date']],_0x41b5b5=[_0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x15d)]],_0x591c82=[_0x4ba68f[_0x4a3646(0x18b)]['production_date']],_0x5be578=[_0x4ba68f['body'][_0x4a3646(0x1b8)]],_0x4c450c=[_0x4ba68f['body'][_0x4a3646(0x155)]],_0x50715f=[_0x4ba68f['body']['prime1']],_0x4a810f=[_0x4ba68f[_0x4a3646(0x18b)]['second1']],_0x8b93d2=[_0x4ba68f[_0x4a3646(0x18b)]['prod_invoice']];else var _0x1a5ddd=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x163)]],_0x52961d=[..._0x4ba68f[_0x4a3646(0x18b)]['level']],_0x9154a=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x187)]],_0x466520=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1cf)]],_0x2caa1e=[..._0x4ba68f['body'][_0x4a3646(0x1ae)]],_0xfad3aa=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1e1)]],_0x2ca4e3=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x180)]],_0x3c3d27=[..._0x4ba68f['body'][_0x4a3646(0x1c1)]],_0x28bb0d=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x200)]],_0x5c8ccb=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1b0)]],_0x331622=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x19d)]],_0x41b5b5=[..._0x4ba68f['body'][_0x4a3646(0x15d)]],_0x591c82=[..._0x4ba68f[_0x4a3646(0x18b)]['production_date']],_0x5be578=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x1b8)]],_0x4c450c=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x155)]],_0x50715f=[..._0x4ba68f[_0x4a3646(0x18b)][_0x4a3646(0x20d)]],_0x4a810f=[..._0x4ba68f['body'][_0x4a3646(0x1bd)]],_0x8b93d2=[..._0x4ba68f[_0x4a3646(0x18b)]['prod_invoice']];const _0x25a07b=_0x1a5ddd[_0x4a3646(0x1f7)](_0x27f10d=>{return _0x27f10d={'product_name':_0x27f10d};});_0x52961d[_0x4a3646(0x1eb)]((_0x5306b6,_0x1ffe1e)=>{var _0x16b552=_0x4a3646;_0x4c450c[_0x16b552(0x1eb)]((_0x4a8054,_0x827447)=>{var _0x2427e6=_0x16b552;if(_0x4a8054=='Receiving\x20Area'&&_0x1ffe1e==_0x827447){var _0x50a67a=_0x5306b6[_0x2427e6(0x20a)](0x3);_0x25a07b[_0x1ffe1e][_0x2427e6(0x1d4)]=_0x5306b6[0x0],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1fa)]=_0x5306b6[0x1],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1e3)]=0x0,_0x25a07b[_0x1ffe1e]['bin']=0x0,_0x25a07b[_0x1ffe1e][_0x2427e6(0x15b)]=_0x2427e6(0x1df),_0x25a07b[_0x1ffe1e][_0x2427e6(0x1d6)]=_0x50a67a;}else{if(_0x4a8054==_0x2427e6(0x196)&&_0x1ffe1e==_0x827447){var _0x50a67a=_0x5306b6['slice'](0x3);_0x25a07b[_0x1ffe1e][_0x2427e6(0x1d4)]=_0x5306b6[0x0],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1fa)]=_0x5306b6[0x1],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1e3)]=0x0,_0x25a07b[_0x1ffe1e][_0x2427e6(0x189)]=0x0,_0x25a07b[_0x1ffe1e][_0x2427e6(0x15b)]='Floor',_0x25a07b[_0x1ffe1e]['floorlevel']=_0x5306b6[0x5];}else{if(_0x1ffe1e==_0x827447){var _0x1590fd;if(_0x5306b6[0x4]=='L')_0x1590fd='Level';else _0x5306b6[0x4]=='F'&&(_0x1590fd='Floor');_0x25a07b[_0x1ffe1e][_0x2427e6(0x1d4)]=_0x5306b6[0x0],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1fa)]=_0x5306b6[0x1],_0x25a07b[_0x1ffe1e][_0x2427e6(0x1e3)]=_0x5306b6[0x2],_0x25a07b[_0x1ffe1e][_0x2427e6(0x189)]=_0x5306b6[0x3],_0x25a07b[_0x1ffe1e][_0x2427e6(0x15b)]=_0x1590fd,_0x25a07b[_0x1ffe1e][_0x2427e6(0x1d6)]=_0x5306b6[0x5];}}}});}),_0x9154a[_0x4a3646(0x1eb)]((_0x5da61b,_0x499aa2)=>{var _0x56c5b0=_0x4a3646;_0x25a07b[_0x499aa2][_0x56c5b0(0x1d3)]=_0x5da61b;}),_0x466520['forEach']((_0xe01a6b,_0x1e4131)=>{var _0x2e168d=_0x4a3646;_0x25a07b[_0x1e4131][_0x2e168d(0x1cf)]=_0xe01a6b;}),_0x2caa1e['forEach']((_0x364ccf,_0x1d1e88)=>{_0x25a07b[_0x1d1e88]['adjust_qty']=_0x364ccf;}),_0xfad3aa['forEach']((_0x1e1685,_0x18beeb)=>{var _0x55e8ed=_0x4a3646;_0x25a07b[_0x18beeb][_0x55e8ed(0x1b5)]=_0x1e1685;}),_0x2ca4e3[_0x4a3646(0x1eb)]((_0x3680ac,_0x14761a)=>{var _0x2e305d=_0x4a3646;_0x25a07b[_0x14761a][_0x2e305d(0x180)]=_0x3680ac;}),_0x3c3d27[_0x4a3646(0x1eb)]((_0x1b4537,_0xf3dcbd)=>{var _0xb22565=_0x4a3646;_0x25a07b[_0xf3dcbd][_0xb22565(0x141)]=_0x1b4537;}),_0x28bb0d[_0x4a3646(0x1eb)]((_0x5b086c,_0x333eb6)=>{var _0x48bef0=_0x4a3646;_0x25a07b[_0x333eb6][_0x48bef0(0x20b)]=_0x5b086c;}),_0x5c8ccb[_0x4a3646(0x1eb)]((_0x576e50,_0x140089)=>{var _0x21902d=_0x4a3646;_0x25a07b[_0x140089][_0x21902d(0x1b0)]=_0x576e50;}),_0x331622['forEach']((_0x5c3b33,_0x1e9b44)=>{_0x25a07b[_0x1e9b44]['expiry_date']=_0x5c3b33;}),_0x41b5b5[_0x4a3646(0x1eb)]((_0x22f19b,_0x5592ed)=>{var _0xe4c0a9=_0x4a3646;_0x25a07b[_0x5592ed][_0xe4c0a9(0x1fb)]=_0x22f19b;}),_0x591c82[_0x4a3646(0x1eb)]((_0x25dc0c,_0x36d551)=>{var _0x531cf6=_0x4a3646;_0x25a07b[_0x36d551][_0x531cf6(0x1f0)]=_0x25dc0c;}),_0x5be578[_0x4a3646(0x1eb)]((_0x556b7a,_0x3a1776)=>{var _0x4da1af=_0x4a3646;_0x25a07b[_0x3a1776][_0x4da1af(0x1b8)]=_0x556b7a;}),_0x4c450c[_0x4a3646(0x1eb)]((_0x22af6a,_0x4a8d5c)=>{var _0x6a8faf=_0x4a3646;_0x25a07b[_0x4a8d5c][_0x6a8faf(0x1b4)]=_0x22af6a;}),_0x50715f[_0x4a3646(0x1eb)]((_0x3cd6a5,_0x4558e3)=>{var _0x344e15=_0x4a3646;_0x25a07b[_0x4558e3][_0x344e15(0x17f)]=_0x3cd6a5;}),_0x4a810f[_0x4a3646(0x1eb)]((_0x13fb13,_0x3a9655)=>{_0x25a07b[_0x3a9655]['secondary_code']=_0x13fb13;}),_0x8b93d2[_0x4a3646(0x1eb)]((_0x3ad7cb,_0x28e744)=>{_0x25a07b[_0x28e744]['invoice']=_0x3ad7cb;});const _0x39bb6c=_0x25a07b[_0x4a3646(0x201)](_0xf4c4c3=>_0xf4c4c3[_0x4a3646(0x184)]!=='0'&&_0xf4c4c3[_0x4a3646(0x184)]!=='');var _0x12e7df=0x0;_0x39bb6c[_0x4a3646(0x1eb)](_0x8bfa21=>{var _0x2c93c2=_0x4a3646;console['log'](_0x2c93c2(0x1a2),_0x8bfa21),parseInt(_0x8bfa21[_0x2c93c2(0x184)])<=0x0&&_0x12e7df++;});if(_0x12e7df!=0x0)return _0x4ba68f[_0x4a3646(0x1fe)](_0x4a3646(0x190),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x56b707[_0x4a3646(0x164)](_0x4a3646(0x18e));const _0x2387ac=new adjustment({'warehouse_name':_0x320828,'date':_0x909652,'product':_0x39bb6c,'note':_0x103b0e,'room':_0x549f80,'invoice':_0x209a2e,'JO_number':_0x5d5b6c,'expiry_date':_0x45d985}),_0x38785c=await _0x2387ac['save']();_0x4ba68f[_0x4a3646(0x1fe)](_0x4a3646(0x161),_0x4a3646(0x1a0)),_0x56b707[_0x4a3646(0x164)](_0x4a3646(0x1f8)+_0x38785c[_0x4a3646(0x1d5)]);}catch(_0x4fabd8){console[_0x4a3646(0x1a5)](_0x4fabd8),_0x56b707[_0x4a3646(0x1a8)](0xc8)[_0x4a3646(0x1be)]({'message':_0x4fabd8[_0x4a3646(0x173)]});}}),router[a0_0x19176a(0x17e)](a0_0x19176a(0x1ce),auth,async(_0x3ab9d3,_0x12100f)=>{var _0x3e33a6=a0_0x19176a;try{const {username:_0x26ee72,email:_0x11aad4,role:_0x48b269}=_0x3ab9d3[_0x3e33a6(0x209)],_0x23152c=_0x3ab9d3[_0x3e33a6(0x209)],_0x31f350=await profile['findOne']({'email':_0x23152c['email']}),_0x20641f=await master_shop['find'](),_0x3ad5b5=_0x3ab9d3[_0x3e33a6(0x1c6)]['id'],_0x5efcf1=await adjustment[_0x3e33a6(0x151)]({'_id':_0x3ad5b5}),_0x3bf75d=await purchases[_0x3e33a6(0x202)]([{'$match':{'warehouse_name':_0x5efcf1[_0x3e33a6(0x1cc)]}},{'$unwind':_0x3e33a6(0x13f)},{'$group':{'_id':_0x3e33a6(0x181)}}]),_0x25a1d5=await product[_0x3e33a6(0x215)]({}),_0x17ae05=await warehouse[_0x3e33a6(0x202)]([{'$match':{'name':_0x5efcf1[_0x3e33a6(0x1cc)]}},{'$unwind':_0x3e33a6(0x179)},{'$group':{'_id':_0x3e33a6(0x1ac),'name':{'$first':_0x3e33a6(0x1c9)},'product_stock':{'$first':_0x3e33a6(0x186)},'bay':{'$first':_0x3e33a6(0x16a)},'bin':{'$first':_0x3e33a6(0x13d)},'type':{'$first':_0x3e33a6(0x1ee)},'floorlevel':{'$first':_0x3e33a6(0x1e8)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3e33a6(0x148)},'product_code':{'$first':_0x3e33a6(0x1b3)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3e33a6(0x205)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x3e33a6(0x14c)},'room':{'$first':'$room'}}}]);if(_0x20641f[0x0][_0x3e33a6(0x172)]==_0x3e33a6(0x15e)){var _0x5a6441=users[_0x3e33a6(0x174)];console['log'](_0x5a6441);}else{if(_0x20641f[0x0][_0x3e33a6(0x172)]=='Hindi')var _0x5a6441=users[_0x3e33a6(0x142)];else{if(_0x20641f[0x0]['language']=='German')var _0x5a6441=users[_0x3e33a6(0x1af)];else{if(_0x20641f[0x0]['language']=='Spanish')var _0x5a6441=users[_0x3e33a6(0x192)];else{if(_0x20641f[0x0][_0x3e33a6(0x172)]==_0x3e33a6(0x20e))var _0x5a6441=users[_0x3e33a6(0x20e)];else{if(_0x20641f[0x0][_0x3e33a6(0x172)]=='Portuguese\x20(BR)')var _0x5a6441=users[_0x3e33a6(0x1de)];else{if(_0x20641f[0x0][_0x3e33a6(0x172)]==_0x3e33a6(0x210))var _0x5a6441=users['Chinese'];else{if(_0x20641f[0x0][_0x3e33a6(0x172)]=='Arabic\x20(ae)')var _0x5a6441=users[_0x3e33a6(0x1a7)];}}}}}}}_0x12100f['render'](_0x3e33a6(0x14d),{'success':_0x3ab9d3[_0x3e33a6(0x1fe)](_0x3e33a6(0x161)),'errors':_0x3ab9d3[_0x3e33a6(0x1fe)](_0x3e33a6(0x190)),'role':_0x23152c,'profile':_0x31f350,'adjustment':_0x5efcf1,'stock':_0x17ae05,'master_shop':_0x20641f,'warehouse_name':_0x3bf75d,'unit':_0x25a1d5,'language':_0x5a6441});}catch(_0x1bad7d){console[_0x3e33a6(0x1a5)](_0x1bad7d),_0x12100f['status'](0xc8)['json']({'message':_0x1bad7d[_0x3e33a6(0x173)]});}}),router[a0_0x19176a(0x168)](a0_0x19176a(0x1ce),auth,async(_0x38d12f,_0x21429c)=>{var _0x5a5264=a0_0x19176a;try{const _0x32705d=_0x38d12f[_0x5a5264(0x1c6)]['id'],{warehouse_name:_0x383459,Room_name:_0xfff6ad}=_0x38d12f[_0x5a5264(0x18b)],_0x1dbfab=await adjustment['findById']({'_id':_0x32705d}),_0x3fbad9=_0x1dbfab[_0x5a5264(0x177)]['map'](async _0x3d7949=>{var _0x43b609=_0x5a5264;if(_0x3d7949[_0x43b609(0x184)]>0x0){var _0x2166b2=await warehouse[_0x43b609(0x156)]({'name':_0x383459,'room':_0x3d7949[_0x43b609(0x1b4)],'warehouse_category':_0x43b609(0x1e5)});const _0x50c13f=_0x2166b2[_0x43b609(0x1e2)][_0x43b609(0x1f7)](_0x324722=>{var _0x374a5c=_0x43b609;if(_0x3d7949['type']==_0x374a5c(0x191)){if(_0x324722[_0x374a5c(0x1db)]==_0x3d7949[_0x374a5c(0x1db)]&&_0x324722[_0x374a5c(0x1d6)]==_0x3d7949[_0x374a5c(0x1d6)]&&_0x324722['type']==_0x3d7949[_0x374a5c(0x15b)]&&_0x324722[_0x374a5c(0x189)]==_0x3d7949[_0x374a5c(0x189)]&&_0x324722[_0x374a5c(0x1e3)]==_0x3d7949['bay']&&_0x324722[_0x374a5c(0x1fa)]==_0x3d7949['rack']&&_0x324722[_0x374a5c(0x1d4)]==_0x3d7949[_0x374a5c(0x1d4)]&&_0x324722[_0x374a5c(0x19d)]==_0x3d7949[_0x374a5c(0x19d)]&&_0x324722[_0x374a5c(0x1b0)]==_0x3d7949[_0x374a5c(0x1b0)]&&_0x324722[_0x374a5c(0x1f0)]==_0x3d7949[_0x374a5c(0x1f0)]&&_0x324722[_0x374a5c(0x195)]==_0x3d7949[_0x374a5c(0x195)]){var _0x1a0b17;_0x1a0b17=_0x3d7949['adjust_qty'],_0x3d7949[_0x374a5c(0x1b8)]=='S'&&(_0x1a0b17=_0x3d7949['adjust_qty']),_0x324722[_0x374a5c(0x194)]=_0x324722[_0x374a5c(0x194)]-_0x1a0b17;}}else{if(_0x324722['product_name']==_0x3d7949['product_name']&&_0x324722[_0x374a5c(0x1d6)]==_0x3d7949[_0x374a5c(0x1d6)]&&_0x324722[_0x374a5c(0x15b)]==_0x3d7949[_0x374a5c(0x15b)]&&_0x324722['bin']==_0x3d7949[_0x374a5c(0x189)]&&_0x324722[_0x374a5c(0x1e3)]==_0x3d7949[_0x374a5c(0x1e3)]&&_0x324722[_0x374a5c(0x1fa)]==_0x3d7949[_0x374a5c(0x1fa)]&&_0x324722[_0x374a5c(0x1d4)]==_0x3d7949[_0x374a5c(0x1d4)]&&_0x324722[_0x374a5c(0x19d)]==_0x3d7949[_0x374a5c(0x19d)]&&_0x324722[_0x374a5c(0x1b0)]==_0x3d7949[_0x374a5c(0x1b0)]&&_0x324722[_0x374a5c(0x1f0)]==_0x3d7949[_0x374a5c(0x1f0)]&&_0x324722[_0x374a5c(0x195)]==_0x3d7949[_0x374a5c(0x195)]){console[_0x374a5c(0x1a5)](_0x3d7949);var _0x1a0b17;_0x1a0b17=_0x3d7949['adjust_qty'],_0x3d7949[_0x374a5c(0x1b8)]=='S'&&(_0x1a0b17=_0x3d7949[_0x374a5c(0x184)]),console[_0x374a5c(0x1a5)](_0x1a0b17+_0x374a5c(0x1ff)+_0x3d7949[_0x374a5c(0x184)]+_0x374a5c(0x1ff)+_0x324722[_0x374a5c(0x154)]+'\x20<>\x20'+_0x3d7949['prod_cat']),_0x324722[_0x374a5c(0x194)]=_0x324722[_0x374a5c(0x194)]+_0x1a0b17;}}});}return _0x2166b2;});Promise[_0x5a5264(0x1aa)](_0x3fbad9)['then'](async _0x5e4aea=>{var _0x58a58c=_0x5a5264;try{for(const _0x3615bb of _0x5e4aea){await _0x3615bb['save']();}_0x1dbfab[_0x58a58c(0x1f2)]=_0x58a58c(0x1a3);const _0x3710f6=await _0x1dbfab[_0x58a58c(0x1d8)](),_0x14d9c9=await master_shop[_0x58a58c(0x215)](),_0x3fd5ec=await email_settings['findOne'](),_0x40e332=await supervisor_settings[_0x58a58c(0x215)]();var _0x3f061d=_0x1dbfab[_0x58a58c(0x177)],_0x590eb9='',_0x3909b5;for(_0x3909b5 in _0x3f061d){_0x590eb9+=_0x58a58c(0x1da)+_0x58a58c(0x197)+_0x3f061d[_0x3909b5]['product_name']+_0x58a58c(0x19c)+_0x58a58c(0x197)+_0x3f061d[_0x3909b5][_0x58a58c(0x20b)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3f061d[_0x3909b5][_0x58a58c(0x184)]+_0x58a58c(0x19c)+_0x58a58c(0x197)+_0x3f061d[_0x3909b5][_0x58a58c(0x180)]+_0x58a58c(0x19c)+_0x58a58c(0x197)+_0x3f061d[_0x3909b5][_0x58a58c(0x141)]+_0x58a58c(0x19c)+_0x58a58c(0x197)+_0x1dbfab[_0x58a58c(0x1cc)]+_0x58a58c(0x19c)+_0x58a58c(0x197)+_0x3f061d[_0x3909b5][_0x58a58c(0x1b4)]+_0x58a58c(0x19c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3f061d[_0x3909b5][_0x58a58c(0x1d4)]+_0x3f061d[_0x3909b5]['rack']+_0x3f061d[_0x3909b5][_0x58a58c(0x1e3)]+_0x3f061d[_0x3909b5][_0x58a58c(0x189)]+_0x3f061d[_0x3909b5]['type'][0x0]+_0x3f061d[_0x3909b5][_0x58a58c(0x1d6)]+_0x58a58c(0x19c),_0x58a58c(0x213);}let _0x14a8ad=nodemailer[_0x58a58c(0x18d)]({'host':_0x3fd5ec[_0x58a58c(0x183)],'port':Number(_0x3fd5ec['port']),'secure':![],'auth':{'user':_0x3fd5ec[_0x58a58c(0x18a)],'pass':_0x3fd5ec[_0x58a58c(0x1b1)]}}),_0x234295={'from':_0x3fd5ec['email'],'to':_0x40e332[0x0]['RMSEmail'],'subject':_0x58a58c(0x171),'attachments':[{'filename':_0x58a58c(0x16f),'path':__dirname+'/../public'+'/upload/'+_0x14d9c9[0x0][_0x58a58c(0x1ad)],'cid':_0x58a58c(0x212)}],'html':_0x58a58c(0x152)+'<html><head><title></title>'+_0x58a58c(0x153)+_0x58a58c(0x18c)+_0x58a58c(0x1dd)+_0x58a58c(0x18c)+_0x58a58c(0x1c3)+'</div>'+_0x58a58c(0x18c)+'<h2>\x20'+_0x14d9c9[0x0][_0x58a58c(0x166)]+_0x58a58c(0x13e)+'</div>'+_0x58a58c(0x1e6)+_0x58a58c(0x150)+_0x58a58c(0x18c)+_0x58a58c(0x169)+_0x58a58c(0x1b2)+_0x1dbfab[_0x58a58c(0x195)]+'\x20'+_0x58a58c(0x20c)+_0x58a58c(0x182)+_0x1dbfab[_0x58a58c(0x1e9)]+'\x20'+_0x58a58c(0x1cb)+'</h5>'+_0x58a58c(0x1e6)+_0x58a58c(0x1a1)+_0x58a58c(0x14e)+_0x58a58c(0x1da)+_0x58a58c(0x208)+_0x58a58c(0x167)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x58a58c(0x188)+_0x58a58c(0x19a)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x58a58c(0x1c8)+_0x58a58c(0x162)+_0x58a58c(0x213)+_0x58a58c(0x17b)+_0x58a58c(0x1fc)+'\x20'+_0x590eb9+'\x20'+_0x58a58c(0x1e4)+_0x58a58c(0x1dc)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x58a58c(0x1f6)+_0x14d9c9[0x0][_0x58a58c(0x166)]+_0x58a58c(0x15f)+'</div>'+_0x58a58c(0x1e6)+_0x58a58c(0x1ef)};_0x14a8ad[_0x58a58c(0x1d7)](_0x234295,function(_0x537bcc,_0x10ff53){var _0x284239=_0x58a58c;_0x537bcc?(console['log'](_0x537bcc),console[_0x284239(0x1a5)](_0x284239(0x1c7))):console[_0x284239(0x1a5)](_0x284239(0x204));}),_0x38d12f['flash'](_0x58a58c(0x161),_0x58a58c(0x1bb)),_0x21429c[_0x58a58c(0x164)](_0x58a58c(0x1c2)+_0x3710f6[_0x58a58c(0x1d5)]);}catch(_0x9864aa){console[_0x58a58c(0x17c)](_0x9864aa),_0x21429c['status'](0x1f4)[_0x58a58c(0x1be)]({'error':_0x58a58c(0x1f5)});}})[_0x5a5264(0x1bc)](_0x36e147=>{var _0x3f5e63=_0x5a5264;console[_0x3f5e63(0x17c)](_0x36e147),_0x21429c[_0x3f5e63(0x1a8)](0x1f4)[_0x3f5e63(0x1be)]({'error':_0x3f5e63(0x1e0)});});}catch(_0xec7378){console[_0x5a5264(0x1a5)](_0xec7378),_0x21429c[_0x5a5264(0x1a8)](0xc8)[_0x5a5264(0x1be)]({'message':_0xec7378['message']});}}),router[a0_0x19176a(0x17e)]('/view/:id',auth,async(_0x5f2b67,_0x469f8c)=>{var _0x2a5a4e=a0_0x19176a;try{const {username:_0x34274f,email:_0xa4cbf8,role:_0x2669a5}=_0x5f2b67['user'],_0x545736=_0x5f2b67['user'],_0x2a1390=await profile[_0x2a5a4e(0x156)]({'email':_0x545736[_0x2a5a4e(0x18a)]}),_0x5de30c=await master_shop[_0x2a5a4e(0x215)](),_0x54c30c=_0x5f2b67[_0x2a5a4e(0x1c6)]['id'],_0x3b7e05=await adjustment['findById']({'_id':_0x54c30c}),_0x11d182=await purchases[_0x2a5a4e(0x202)]([{'$match':{'warehouse_name':_0x3b7e05[_0x2a5a4e(0x1cc)]}},{'$unwind':_0x2a5a4e(0x13f)},{'$group':{'_id':_0x2a5a4e(0x181)}}]),_0xedf1d7=await product[_0x2a5a4e(0x215)]({}),_0x5de9bf=await warehouse[_0x2a5a4e(0x202)]([{'$match':{'name':_0x3b7e05[_0x2a5a4e(0x1cc)]}},{'$unwind':_0x2a5a4e(0x179)},{'$group':{'_id':_0x2a5a4e(0x1ac),'name':{'$first':_0x2a5a4e(0x1c9)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x2a5a4e(0x13d)},'type':{'$first':_0x2a5a4e(0x1ee)},'floorlevel':{'$first':_0x2a5a4e(0x1e8)},'primary_code':{'$first':_0x2a5a4e(0x216)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2a5a4e(0x1b3)},'storage':{'$first':_0x2a5a4e(0x178)},'rack':{'$first':_0x2a5a4e(0x205)},'maxPerUnit':{'$first':_0x2a5a4e(0x20f)},'expiry_date':{'$first':_0x2a5a4e(0x147)},'production_date':{'$first':_0x2a5a4e(0x18f)},'batch_code':{'$first':_0x2a5a4e(0x14c)},'room':{'$first':_0x2a5a4e(0x17d)}}}]);let _0x139110;if(_0x545736[_0x2a5a4e(0x193)]=='staff'){const _0x9510fc=await staff[_0x2a5a4e(0x156)]({'email':_0x545736[_0x2a5a4e(0x18a)]});_0x139110=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x9510fc[_0x2a5a4e(0x1f1)],'warehouse_category':_0x2a5a4e(0x1e5),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x139110=await warehouse[_0x2a5a4e(0x202)]([{'$match':{'status':_0x2a5a4e(0x1b6),'warehouse_category':_0x2a5a4e(0x1e5),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x2a5a4e(0x19b),'name':{'$first':_0x2a5a4e(0x19b)}}}]);if(_0x5de30c[0x0][_0x2a5a4e(0x172)]=='English\x20(US)'){var _0x4c706d=users[_0x2a5a4e(0x174)];console[_0x2a5a4e(0x1a5)](_0x4c706d);}else{if(_0x5de30c[0x0]['language']==_0x2a5a4e(0x142))var _0x4c706d=users[_0x2a5a4e(0x142)];else{if(_0x5de30c[0x0][_0x2a5a4e(0x172)]==_0x2a5a4e(0x1af))var _0x4c706d=users[_0x2a5a4e(0x1af)];else{if(_0x5de30c[0x0]['language']==_0x2a5a4e(0x192))var _0x4c706d=users['Spanish'];else{if(_0x5de30c[0x0][_0x2a5a4e(0x172)]==_0x2a5a4e(0x20e))var _0x4c706d=users[_0x2a5a4e(0x20e)];else{if(_0x5de30c[0x0][_0x2a5a4e(0x172)]=='Portuguese\x20(BR)')var _0x4c706d=users[_0x2a5a4e(0x1de)];else{if(_0x5de30c[0x0]['language']=='Chinese')var _0x4c706d=users[_0x2a5a4e(0x210)];else{if(_0x5de30c[0x0][_0x2a5a4e(0x172)]==_0x2a5a4e(0x1c4))var _0x4c706d=users[_0x2a5a4e(0x1a7)];}}}}}}}_0x469f8c[_0x2a5a4e(0x1d2)](_0x2a5a4e(0x149),{'success':_0x5f2b67['flash']('success'),'errors':_0x5f2b67[_0x2a5a4e(0x1fe)](_0x2a5a4e(0x190)),'role':_0x545736,'profile':_0x2a1390,'adjustment':_0x3b7e05,'stock':_0x5de9bf,'master_shop':_0x5de30c,'warehouse_name':_0x11d182,'unit':_0xedf1d7,'language':_0x4c706d,'warehouse':_0x139110});}catch(_0x37ddaf){console[_0x2a5a4e(0x1a5)](_0x37ddaf),_0x469f8c[_0x2a5a4e(0x1a8)](0xc8)[_0x2a5a4e(0x1be)]({'message':_0x37ddaf[_0x2a5a4e(0x173)]});}}),router['post'](a0_0x19176a(0x211),auth,async(_0x195c2c,_0x1170ce)=>{var _0x115777=a0_0x19176a;try{const _0x2d9529=_0x195c2c[_0x115777(0x1c6)]['id'],_0x5e26ce=await adjustment[_0x115777(0x151)]({'_id':_0x2d9529}),_0x1d4586=await warehouse[_0x115777(0x156)]({'name':_0x5e26ce['warehouse_name'],'room':_0x5e26ce[_0x115777(0x16b)]}),{warehouse_name:_0x12ea55,date:_0x5175d2,prod_name:_0x5c2748,level:_0x2042e6,isle:_0x561f8a,pallet:_0x22766f,stock:_0x52fc9f,types:_0x5e0dce,adjust_qty:_0x3ac204,new_adjust_qty:_0x238585,note:_0x173443,Room_name:_0x57cfc3,invoice:_0x3bce21,JO_number:_0x834ca4,expiry_date:_0x5ec9ad}=_0x195c2c[_0x115777(0x18b)];if(typeof _0x5c2748==_0x115777(0x1d1))var _0x3a265d=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x163)]],_0x2aaf2d=[_0x195c2c[_0x115777(0x18b)]['level']],_0x3a1dd3=[_0x195c2c['body'][_0x115777(0x187)]],_0x5773cc=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x1cf)]],_0x46c4ae=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x1ae)]],_0x4917af=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x1e1)]],_0x73a144=[_0x195c2c[_0x115777(0x18b)]['Primary_Units']],_0x5f1085=[_0x195c2c[_0x115777(0x18b)]['Secondary_units']],_0x427dff=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x200)]],_0x83f76c=[_0x195c2c['body'][_0x115777(0x1b0)]],_0x3e5a3c=[_0x195c2c['body'][_0x115777(0x19d)]],_0xde9cb9=[_0x195c2c[_0x115777(0x18b)]['max_per_unit']],_0x2fa690=[_0x195c2c[_0x115777(0x18b)]['production_date']],_0x53837b=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x1b8)]],_0x472d1b=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x155)]],_0x206470=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x20d)]],_0x5ee129=[_0x195c2c[_0x115777(0x18b)][_0x115777(0x1bd)]];else var _0x3a265d=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x163)]],_0x2aaf2d=[..._0x195c2c['body'][_0x115777(0x1a9)]],_0x3a1dd3=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x187)]],_0x5773cc=[..._0x195c2c[_0x115777(0x18b)]['types']],_0x46c4ae=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x1ae)]],_0x4917af=[..._0x195c2c['body'][_0x115777(0x1e1)]],_0x73a144=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x180)]],_0x5f1085=[..._0x195c2c['body'][_0x115777(0x1c1)]],_0x427dff=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x200)]],_0x83f76c=[..._0x195c2c[_0x115777(0x18b)]['batch_code']],_0x3e5a3c=[..._0x195c2c['body'][_0x115777(0x19d)]],_0xde9cb9=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x15d)]],_0x2fa690=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x1f0)]],_0x53837b=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x1b8)]],_0x472d1b=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x155)]],_0x206470=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x20d)]],_0x5ee129=[..._0x195c2c[_0x115777(0x18b)][_0x115777(0x1bd)]];const _0x4fbae=_0x3a265d[_0x115777(0x1f7)](_0x380f7b=>{return _0x380f7b={'product_name':_0x380f7b};});_0x2aaf2d['forEach']((_0x23cd64,_0xbf2f96)=>{var _0x365249=_0x115777;_0x472d1b[_0x365249(0x1eb)]((_0x792791,_0x33d7a2)=>{var _0x2ce8e6=_0x365249;if(_0x792791==_0x2ce8e6(0x1f4)&&_0xbf2f96==_0x33d7a2){var _0x4a2ffa=_0x23cd64[_0x2ce8e6(0x20a)](0x3);_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d4)]=_0x23cd64[0x0],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1fa)]=_0x23cd64[0x1],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1e3)]=0x0,_0x4fbae[_0xbf2f96][_0x2ce8e6(0x189)]=0x0,_0x4fbae[_0xbf2f96][_0x2ce8e6(0x15b)]=_0x2ce8e6(0x1df),_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d6)]=_0x4a2ffa;}else{if(_0x792791=='Shelves'&&_0xbf2f96==_0x33d7a2){var _0x4a2ffa=_0x23cd64[_0x2ce8e6(0x20a)](0x3);_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d4)]=_0x23cd64[0x0],_0x4fbae[_0xbf2f96]['rack']=_0x23cd64[0x1],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1e3)]=0x0,_0x4fbae[_0xbf2f96]['bin']=0x0,_0x4fbae[_0xbf2f96]['type']=_0x2ce8e6(0x1df),_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d6)]=_0x23cd64[0x5];}else{if(_0xbf2f96==_0x33d7a2){var _0x42d8a9;if(_0x23cd64[0x4]=='L')_0x42d8a9=_0x2ce8e6(0x214);else _0x23cd64[0x4]=='F'&&(_0x42d8a9=_0x2ce8e6(0x1df));_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d4)]=_0x23cd64[0x0],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1fa)]=_0x23cd64[0x1],_0x4fbae[_0xbf2f96]['bay']=_0x23cd64[0x2],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x189)]=_0x23cd64[0x3],_0x4fbae[_0xbf2f96][_0x2ce8e6(0x15b)]=_0x42d8a9,_0x4fbae[_0xbf2f96][_0x2ce8e6(0x1d6)]=_0x23cd64[0x5];}}}});}),_0x3a1dd3[_0x115777(0x1eb)]((_0x34b797,_0x56e243)=>{_0x4fbae[_0x56e243]['stockBefore']=_0x34b797;}),_0x5773cc[_0x115777(0x1eb)]((_0x4cb622,_0x473fbd)=>{var _0x4e9051=_0x115777;_0x4fbae[_0x473fbd][_0x4e9051(0x1cf)]=_0x4cb622;}),_0x46c4ae[_0x115777(0x1eb)]((_0x5e8a18,_0x241943)=>{var _0x41d5a6=_0x115777;_0x4fbae[_0x241943][_0x41d5a6(0x184)]=_0x5e8a18;}),_0x4917af[_0x115777(0x1eb)]((_0x2df4fa,_0x3eb544)=>{var _0x10952b=_0x115777;_0x4fbae[_0x3eb544][_0x10952b(0x1b5)]=_0x2df4fa;}),_0x73a144['forEach']((_0x3be078,_0x15cf50)=>{var _0x106050=_0x115777;_0x4fbae[_0x15cf50][_0x106050(0x180)]=_0x3be078;}),_0x5f1085[_0x115777(0x1eb)]((_0x30b12b,_0x5d950d)=>{var _0xd5487e=_0x115777;_0x4fbae[_0x5d950d][_0xd5487e(0x141)]=_0x30b12b;}),_0x427dff['forEach']((_0x464a22,_0x239d2c)=>{var _0x432dee=_0x115777;_0x4fbae[_0x239d2c][_0x432dee(0x20b)]=_0x464a22;}),_0x83f76c[_0x115777(0x1eb)]((_0x31e152,_0x42124a)=>{var _0x402ac3=_0x115777;_0x4fbae[_0x42124a][_0x402ac3(0x1b0)]=_0x31e152;}),_0x3e5a3c[_0x115777(0x1eb)]((_0x21ff4c,_0x58ca66)=>{var _0x30363b=_0x115777;_0x4fbae[_0x58ca66][_0x30363b(0x19d)]=_0x21ff4c;}),_0xde9cb9['forEach']((_0x1c738e,_0x53569e)=>{var _0x4dfd8d=_0x115777;_0x4fbae[_0x53569e][_0x4dfd8d(0x1fb)]=_0x1c738e;}),_0x2fa690[_0x115777(0x1eb)]((_0xb52bb8,_0x56fb3d)=>{var _0x136bce=_0x115777;_0x4fbae[_0x56fb3d][_0x136bce(0x1f0)]=_0xb52bb8;}),_0x53837b[_0x115777(0x1eb)]((_0xf0e3ff,_0x1aff31)=>{var _0x456901=_0x115777;_0x4fbae[_0x1aff31][_0x456901(0x1b8)]=_0xf0e3ff;}),_0x472d1b[_0x115777(0x1eb)]((_0x3b116e,_0xc08d75)=>{var _0x5ebab0=_0x115777;_0x4fbae[_0xc08d75][_0x5ebab0(0x1b4)]=_0x3b116e;}),_0x206470['forEach']((_0x46b856,_0x4a18e3)=>{var _0x4a6f42=_0x115777;_0x4fbae[_0x4a18e3][_0x4a6f42(0x17f)]=_0x46b856;}),_0x5ee129[_0x115777(0x1eb)]((_0x50c2e7,_0x534025)=>{var _0x292758=_0x115777;_0x4fbae[_0x534025][_0x292758(0x16c)]=_0x50c2e7;});const _0x2494b5=_0x4fbae[_0x115777(0x201)](_0x197750=>_0x197750[_0x115777(0x184)]!=='0'&&_0x197750['adjust_qty']!=='');var _0x3df6ad=0x0;_0x2494b5[_0x115777(0x1eb)](_0x51dd9e=>{var _0x2a042f=_0x115777;console['log'](_0x2a042f(0x1a2),_0x51dd9e),parseInt(_0x51dd9e[_0x2a042f(0x184)])<=0x0&&_0x3df6ad++;});if(_0x3df6ad!=0x0)return _0x195c2c[_0x115777(0x1fe)](_0x115777(0x190),_0x115777(0x16e)),_0x1170ce[_0x115777(0x164)](_0x115777(0x18e));_0x5e26ce[_0x115777(0x1cc)]=_0x12ea55,_0x5e26ce['date']=_0x5175d2,_0x5e26ce[_0x115777(0x177)]=_0x2494b5,_0x5e26ce['note']=_0x173443,_0x5e26ce[_0x115777(0x195)]=_0x3bce21,_0x5e26ce['isAllowEdit']=_0x115777(0x165);const _0x556631=await _0x5e26ce[_0x115777(0x1d8)]();_0x195c2c[_0x115777(0x1fe)]('success',_0x115777(0x145)),_0x1170ce[_0x115777(0x164)](_0x115777(0x185));}catch(_0x446733){console['log'](_0x446733);}}),router[a0_0x19176a(0x168)](a0_0x19176a(0x1cd),async(_0x4bd224,_0x466620)=>{var _0x4e2c2c=a0_0x19176a;const {primary_code:_0x4a6cdb,warehouse_data:_0x3d290b,rooms_data:_0x255668,Roomslist:_0x45ed6a}=_0x4bd224[_0x4e2c2c(0x18b)],_0x176e9c=_0x45ed6a[_0x4e2c2c(0x1c5)](','),_0x19280b=[];async function _0x96a6e(_0x5aec8c){var _0x4df3b5=_0x4e2c2c;const _0x25fabd=await warehouse['aggregate']([{'$match':{'name':_0x3d290b,'room':_0x5aec8c}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x4a6cdb}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x4df3b5(0x216)},'secondary_code':{'$first':_0x4df3b5(0x148)},'product_code':{'$first':_0x4df3b5(0x1b3)},'level':{'$first':_0x4df3b5(0x16a)},'isle':{'$first':_0x4df3b5(0x13d)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x4df3b5(0x15a)},'secondary_unit':{'$first':_0x4df3b5(0x1f9)},'storage':{'$first':_0x4df3b5(0x178)},'rack':{'$first':_0x4df3b5(0x205)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x4df3b5(0x20f)},'batch_code':{'$first':_0x4df3b5(0x14c)},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x4df3b5(0x17d)}}}]),_0x31cf77=await warehouse[_0x4df3b5(0x202)]([{'$match':{'name':_0x3d290b,'room':_0x5aec8c}},{'$unwind':_0x4df3b5(0x179)},{'$match':{'product_details.secondary_code':_0x4a6cdb}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x4df3b5(0x1c9)},'product_stock':{'$first':_0x4df3b5(0x186)},'primary_code':{'$first':_0x4df3b5(0x216)},'secondary_code':{'$first':_0x4df3b5(0x148)},'product_code':{'$first':_0x4df3b5(0x1b3)},'level':{'$first':_0x4df3b5(0x16a)},'isle':{'$first':_0x4df3b5(0x13d)},'type':{'$first':_0x4df3b5(0x1ee)},'pallet':{'$first':_0x4df3b5(0x1e8)},'unit':{'$first':_0x4df3b5(0x15a)},'secondary_unit':{'$first':_0x4df3b5(0x1f9)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x4df3b5(0x147)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x4df3b5(0x14c)},'product_cat':{'$first':_0x4df3b5(0x1ab)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x25fabd[_0x4df3b5(0x143)]>0x0)_0x19280b[_0x4df3b5(0x1d9)](_0x25fabd);else _0x31cf77[_0x4df3b5(0x143)]>0x0&&_0x19280b['push'](_0x31cf77);}const _0x5e33e4=_0x176e9c[_0x4e2c2c(0x1f7)](_0x530636=>_0x96a6e(_0x530636));await Promise[_0x4e2c2c(0x1aa)](_0x5e33e4),_0x466620[_0x4e2c2c(0x1be)](_0x19280b);}),router[a0_0x19176a(0x168)](a0_0x19176a(0x14b),async(_0x59d9f0,_0x433b51)=>{var _0x5c71d2=a0_0x19176a;const {primaryCode:_0x1aaebd,secondaryCode:_0x44e9e0,productCode:_0x12e9d3,level:_0x5681be,isle:_0xbcd571,pallet:_0xd4041d,warehouses:_0x47e8e1,room:_0x5028b5}=_0x59d9f0[_0x5c71d2(0x18b)];try{const _0x548353=await warehouse[_0x5c71d2(0x202)]([{'$match':{'name':_0x47e8e1,'room':_0x5028b5}},{'$unwind':_0x5c71d2(0x179)},{'$match':{'product_details.level':parseInt(_0x5681be),'product_details.isle':_0xbcd571,'product_details.pallet':parseInt(_0xd4041d)}},{'$group':{'_id':_0x5c71d2(0x1ac),'name':{'$first':_0x5c71d2(0x1c9)},'product_stock':{'$first':_0x5c71d2(0x186)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x5c71d2(0x159)},'pallet':{'$first':_0x5c71d2(0x1ba)},'maxProducts':{'$first':_0x5c71d2(0x1ca)}}}]);_0x433b51['status'](0xc8)['json'](_0x548353);}catch(_0x4cd01e){_0x433b51[_0x5c71d2(0x1a8)](0x194)[_0x5c71d2(0x1be)]({'message':_0x4cd01e['message']});}}),module[a0_0x19176a(0x14f)]=router;