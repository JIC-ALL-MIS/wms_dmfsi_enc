var a0_0x5b76b3=a0_0x39b4;(function(_0x237dba,_0x9fe610){var _0x189b59=a0_0x39b4,_0x5a9ef7=_0x237dba();while(!![]){try{var _0x400a04=parseInt(_0x189b59(0x1c3))/0x1*(-parseInt(_0x189b59(0x17f))/0x2)+parseInt(_0x189b59(0x19f))/0x3*(-parseInt(_0x189b59(0x153))/0x4)+-parseInt(_0x189b59(0x169))/0x5+parseInt(_0x189b59(0x221))/0x6*(parseInt(_0x189b59(0x192))/0x7)+parseInt(_0x189b59(0x1b4))/0x8+-parseInt(_0x189b59(0x16f))/0x9+-parseInt(_0x189b59(0x1a7))/0xa*(-parseInt(_0x189b59(0x16a))/0xb);if(_0x400a04===_0x9fe610)break;else _0x5a9ef7['push'](_0x5a9ef7['shift']());}catch(_0x5edf37){_0x5a9ef7['push'](_0x5a9ef7['shift']());}}}(a0_0x2a41,0xb0900));const express=require(a0_0x5b76b3(0x181)),app=express(),router=express['Router'](),auth=require(a0_0x5b76b3(0x1ce)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x5b76b3(0x1a0)),users=require(a0_0x5b76b3(0x1d2)),nodemailer=require('nodemailer');router[a0_0x5b76b3(0x172)]('/view',auth,async(_0x3c2907,_0xc80f28)=>{var _0x545295=a0_0x5b76b3;try{const {username:_0x3e49e8,email:_0x54acda,role:_0x368162}=_0x3c2907[_0x545295(0x1bc)],_0x33fdf3=_0x3c2907['user'],_0x43a2b1=await profile[_0x545295(0x1c6)]({'email':_0x33fdf3[_0x545295(0x220)]}),_0x446fe3=await master_shop['find']();console['log'](_0x545295(0x193),_0x446fe3);let _0x35349b;if(_0x33fdf3[_0x545295(0x21d)]==_0x545295(0x1ac)){const _0x3b9be3=await staff[_0x545295(0x1c6)]({'email':_0x33fdf3[_0x545295(0x220)]});_0x35349b=await warehouse[_0x545295(0x1b9)]({'status':_0x545295(0x1d3),'name':_0x3b9be3[_0x545295(0x178)]});}else _0x35349b=await warehouse[_0x545295(0x1b9)]({'status':'Enabled'});const _0x587b0a=await product[_0x545295(0x1b9)]();let _0xbb1849;if(_0x33fdf3[_0x545295(0x21d)]==_0x545295(0x1ac)){const _0x1b8dec=await staff['findOne']({'email':_0x33fdf3[_0x545295(0x220)]});_0xbb1849=await adjustment[_0x545295(0x1b9)]({'warehouse_name':_0x1b8dec[_0x545295(0x178)]});}else _0xbb1849=await adjustment[_0x545295(0x15a)]([{'$unwind':'$product'},{'$group':{'_id':_0x545295(0x19b),'invoice':{'$first':_0x545295(0x21a)},'date':{'$first':_0x545295(0x1a4)},'warehouse_name':{'$first':_0x545295(0x222)},'room':{'$addToSet':_0x545295(0x1b8)},'finalize':{'$first':_0x545295(0x160)},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x446fe3[0x0]['language']=='English\x20(US)'){var _0xef5b9e=users['English'];console[_0x545295(0x18d)](_0xef5b9e);}else{if(_0x446fe3[0x0]['language']==_0x545295(0x1ed))var _0xef5b9e=users[_0x545295(0x1ed)];else{if(_0x446fe3[0x0][_0x545295(0x16c)]==_0x545295(0x15c))var _0xef5b9e=users[_0x545295(0x15c)];else{if(_0x446fe3[0x0][_0x545295(0x16c)]=='Spanish')var _0xef5b9e=users[_0x545295(0x219)];else{if(_0x446fe3[0x0][_0x545295(0x16c)]=='French')var _0xef5b9e=users[_0x545295(0x217)];else{if(_0x446fe3[0x0][_0x545295(0x16c)]==_0x545295(0x198))var _0xef5b9e=users['Portuguese'];else{if(_0x446fe3[0x0]['language']==_0x545295(0x180))var _0xef5b9e=users[_0x545295(0x180)];else{if(_0x446fe3[0x0]['language']==_0x545295(0x17d))var _0xef5b9e=users[_0x545295(0x16b)];}}}}}}}_0xc80f28[_0x545295(0x173)](_0x545295(0x1dc),{'success':_0x3c2907[_0x545295(0x1f7)](_0x545295(0x170)),'errors':_0x3c2907[_0x545295(0x1f7)]('errors'),'role':_0x33fdf3,'profile':_0x43a2b1,'warehouse':_0x35349b,'product':_0x587b0a,'adjustment':_0xbb1849,'master_shop':_0x446fe3,'language':_0xef5b9e});}catch(_0x94d862){console[_0x545295(0x18d)](_0x94d862);}});async function getRandom8DigitNumber(){var _0x28bb8b=a0_0x5b76b3;const _0x219713=0x989680,_0x1ce5cd=0x5f5e0ff,_0x1183d0=Math[_0x28bb8b(0x224)](Math[_0x28bb8b(0x1b6)]()*(_0x1ce5cd-_0x219713+0x1))+_0x219713;var _0x24af10;const _0x16e325=await adjustment[_0x28bb8b(0x1c6)]({'invoice':_0x28bb8b(0x18e)+_0x1183d0});return _0x16e325&&_0x16e325[_0x28bb8b(0x152)]>0x0?_0x24af10='ADJ-'+_0x1183d0:_0x24af10=_0x28bb8b(0x18e)+_0x1183d0,_0x24af10;}router[a0_0x5b76b3(0x172)](a0_0x5b76b3(0x1d6),auth,async(_0x2e6c56,_0x398223)=>{var _0x1c33ed=a0_0x5b76b3;try{const {username:_0x427e7d,email:_0x1f173c,role:_0x2a862f}=_0x2e6c56[_0x1c33ed(0x1bc)],_0x1fbad7=_0x2e6c56['user'],_0x3f964c=await profile['findOne']({'email':_0x1fbad7[_0x1c33ed(0x220)]}),_0x23b7b7=await master_shop[_0x1c33ed(0x1b9)]();let _0x37c73c;if(_0x1fbad7[_0x1c33ed(0x21d)]=='staff'){const _0x3809ae=await staff[_0x1c33ed(0x1c6)]({'email':_0x1fbad7[_0x1c33ed(0x220)]});_0x37c73c=await warehouse[_0x1c33ed(0x15a)]([{'$match':{'status':'Enabled','name':_0x3809ae['warehouse'],'warehouse_category':_0x1c33ed(0x1de),'name':{'$ne':_0x1c33ed(0x1b1)}}},{'$group':{'_id':_0x1c33ed(0x176),'name':{'$first':_0x1c33ed(0x176)}}}]);}else _0x37c73c=await warehouse[_0x1c33ed(0x15a)]([{'$match':{'status':_0x1c33ed(0x1d3),'warehouse_category':_0x1c33ed(0x1de),'name':{'$ne':_0x1c33ed(0x1b1)}}},{'$group':{'_id':'$name','name':{'$first':_0x1c33ed(0x176)}}}]);const _0x3c99e3=await product['find']({}),_0x4d3d55=await adjustment[_0x1c33ed(0x1b9)]({}),_0x5b963a=_0x4d3d55[_0x1c33ed(0x152)]+0x1,_0x6c12b5=_0x1c33ed(0x18e)+_0x5b963a[_0x1c33ed(0x190)]()[_0x1c33ed(0x1dd)](0x5,'0');var _0x12ef25=[_0x1c33ed(0x17a),_0x1c33ed(0x195),_0x1c33ed(0x1bf)];if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]==_0x1c33ed(0x150))var _0x336b3f=users['English'];else{if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]==_0x1c33ed(0x1ed))var _0x336b3f=users['Hindi'];else{if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]==_0x1c33ed(0x15c))var _0x336b3f=users[_0x1c33ed(0x15c)];else{if(_0x23b7b7[0x0]['language']=='Spanish')var _0x336b3f=users['Spanish'];else{if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]==_0x1c33ed(0x217))var _0x336b3f=users['French'];else{if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]=='Portuguese\x20(BR)')var _0x336b3f=users[_0x1c33ed(0x1c8)];else{if(_0x23b7b7[0x0]['language']==_0x1c33ed(0x180))var _0x336b3f=users['Chinese'];else{if(_0x23b7b7[0x0][_0x1c33ed(0x16c)]==_0x1c33ed(0x17d))var _0x336b3f=users[_0x1c33ed(0x16b)];}}}}}}}const _0x3e7781=getRandom8DigitNumber();_0x3e7781[_0x1c33ed(0x1fd)](_0x750430=>{var _0x46d6c7=_0x1c33ed;_0x398223[_0x46d6c7(0x173)](_0x46d6c7(0x1c0),{'success':_0x2e6c56[_0x46d6c7(0x1f7)](_0x46d6c7(0x170)),'errors':_0x2e6c56[_0x46d6c7(0x1f7)](_0x46d6c7(0x1a5)),'role':_0x1fbad7,'profile':_0x3f964c,'warehouse':_0x37c73c,'product':_0x3c99e3,'master_shop':_0x23b7b7,'language':_0x336b3f,'rooms_data':_0x12ef25,'invoice_no':_0x750430});})['catch'](_0x282801=>{var _0x37f128=_0x1c33ed;_0x2e6c56['flash'](_0x37f128(0x1a5),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x398223[_0x37f128(0x1ba)](_0x37f128(0x1f3));});}catch(_0x47310c){console[_0x1c33ed(0x18d)](_0x47310c);}}),router[a0_0x5b76b3(0x211)](a0_0x5b76b3(0x1d6),auth,async(_0x176c07,_0x17e0c3)=>{var _0x173798=a0_0x5b76b3;try{const {warehouse_name:_0x4ecc58,date:_0x1da77e,prod_name:_0x43cc42,level:_0x450385,isle:_0x5c73fb,pallet:_0x246561,stock:_0x1d0b33,types:_0x349916,adjust_qty:_0xcee46e,new_adjust_qty:_0x48a7be,note:_0xc62ecd,Room_name:_0x4ed12b,invoice:_0xbc5825,JO_number:_0x2c8b60,expiry_date:_0x37e95d}=_0x176c07[_0x173798(0x1e4)];if(typeof _0x43cc42==_0x173798(0x1f2))var _0x2252a7=[_0x176c07[_0x173798(0x1e4)]['prod_name']],_0x344448=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x19c)]],_0x1cfe64=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x17e)]],_0x15c5fc=[_0x176c07['body']['types']],_0x17f2aa=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x1be)]],_0x9cad7b=[_0x176c07[_0x173798(0x1e4)]['New_Qty_Converted']],_0x44bb4b=[_0x176c07[_0x173798(0x1e4)]['Primary_Units']],_0x2e5401=[_0x176c07[_0x173798(0x1e4)]['Secondary_units']],_0x26ff16=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x165)]],_0x49f78d=[_0x176c07['body'][_0x173798(0x1af)]],_0x186f59=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x1a8)]],_0x16f5f1=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x182)]],_0x1dec00=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x174)]],_0x472710=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x158)]],_0x48cbee=[_0x176c07[_0x173798(0x1e4)]['Rooms']],_0x24de1e=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x1f1)]],_0x2d1c19=[_0x176c07[_0x173798(0x1e4)]['second1']],_0x780019=[_0x176c07[_0x173798(0x1e4)][_0x173798(0x228)]],_0x5d8cad=[_0x176c07['body'][_0x173798(0x155)]];else var _0x2252a7=[..._0x176c07[_0x173798(0x1e4)]['prod_name']],_0x344448=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x19c)]],_0x1cfe64=[..._0x176c07['body']['stock']],_0x15c5fc=[..._0x176c07['body'][_0x173798(0x18b)]],_0x17f2aa=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x1be)]],_0x9cad7b=[..._0x176c07[_0x173798(0x1e4)]['New_Qty_Converted']],_0x44bb4b=[..._0x176c07['body'][_0x173798(0x1c1)]],_0x2e5401=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x210)]],_0x26ff16=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x165)]],_0x49f78d=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x1af)]],_0x186f59=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x1a8)]],_0x16f5f1=[..._0x176c07['body'][_0x173798(0x182)]],_0x1dec00=[..._0x176c07['body']['production_date']],_0x472710=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x158)]],_0x48cbee=[..._0x176c07[_0x173798(0x1e4)]['Rooms']],_0x24de1e=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x1f1)]],_0x2d1c19=[..._0x176c07['body']['second1']],_0x780019=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x228)]],_0x5d8cad=[..._0x176c07[_0x173798(0x1e4)][_0x173798(0x155)]];const _0x36214f=_0x2252a7[_0x173798(0x1d7)](_0x2e478a=>{return _0x2e478a={'product_name':_0x2e478a};});_0x344448[_0x173798(0x191)]((_0x33aa5a,_0x426232)=>{var _0x1a8f66=_0x173798;_0x48cbee[_0x1a8f66(0x191)]((_0x4ace16,_0x4bbb5c)=>{var _0x4b7cba=_0x1a8f66;if(_0x4ace16==_0x4b7cba(0x1c5)&&_0x426232==_0x4bbb5c){var _0x51e13=_0x33aa5a[_0x4b7cba(0x1b7)](0x3);_0x36214f[_0x426232][_0x4b7cba(0x1f4)]=_0x33aa5a[0x0],_0x36214f[_0x426232][_0x4b7cba(0x215)]=_0x33aa5a[0x1],_0x36214f[_0x426232]['bay']=0x0,_0x36214f[_0x426232][_0x4b7cba(0x1a1)]=0x0,_0x36214f[_0x426232][_0x4b7cba(0x1ff)]=_0x4b7cba(0x197),_0x36214f[_0x426232][_0x4b7cba(0x19d)]=_0x51e13;}else{if(_0x4ace16==_0x4b7cba(0x1df)&&_0x426232==_0x4bbb5c){var _0x51e13=_0x33aa5a[_0x4b7cba(0x1b7)](0x3);_0x36214f[_0x426232]['storage']=_0x33aa5a[0x0],_0x36214f[_0x426232]['rack']=_0x33aa5a[0x1],_0x36214f[_0x426232]['bay']=0x0,_0x36214f[_0x426232]['bin']=0x0,_0x36214f[_0x426232]['type']=_0x4b7cba(0x197),_0x36214f[_0x426232][_0x4b7cba(0x19d)]=_0x33aa5a[0x5];}else{if(_0x426232==_0x4bbb5c){var _0x3f2ef0;if(_0x33aa5a[0x4]=='L')_0x3f2ef0='Level';else _0x33aa5a[0x4]=='F'&&(_0x3f2ef0=_0x4b7cba(0x197));_0x36214f[_0x426232][_0x4b7cba(0x1f4)]=_0x33aa5a[0x0],_0x36214f[_0x426232][_0x4b7cba(0x215)]=_0x33aa5a[0x1],_0x36214f[_0x426232][_0x4b7cba(0x1d0)]=_0x33aa5a[0x2],_0x36214f[_0x426232][_0x4b7cba(0x1a1)]=_0x33aa5a[0x3],_0x36214f[_0x426232][_0x4b7cba(0x1ff)]=_0x3f2ef0,_0x36214f[_0x426232][_0x4b7cba(0x19d)]=_0x33aa5a[0x5];}}}});}),_0x1cfe64['forEach']((_0x1326a4,_0x15ebc8)=>{var _0x5a4334=_0x173798;_0x36214f[_0x15ebc8][_0x5a4334(0x1bb)]=_0x1326a4;}),_0x5d8cad[_0x173798(0x191)]((_0x21ea0e,_0x391acc)=>{var _0x5b9e71=_0x173798;_0x36214f[_0x391acc][_0x5b9e71(0x21b)]=_0x21ea0e;}),_0x15c5fc[_0x173798(0x191)]((_0x5981cd,_0x2f2ce8)=>{var _0xb84442=_0x173798;_0x36214f[_0x2f2ce8][_0xb84442(0x18b)]=_0x5981cd;}),_0x17f2aa[_0x173798(0x191)]((_0x5282b0,_0x3c3174)=>{var _0x19e783=_0x173798;_0x36214f[_0x3c3174][_0x19e783(0x159)]=_0x5282b0;}),_0x9cad7b[_0x173798(0x191)]((_0x41ad37,_0x35fee9)=>{var _0x2a5a41=_0x173798;_0x36214f[_0x35fee9][_0x2a5a41(0x205)]=_0x41ad37;}),_0x44bb4b[_0x173798(0x191)]((_0x38ecfe,_0x3d1bce)=>{_0x36214f[_0x3d1bce]['unit']=_0x38ecfe;}),_0x2e5401['forEach']((_0x561ad5,_0x106cce)=>{_0x36214f[_0x106cce]['secondary_unit']=_0x561ad5;}),_0x26ff16['forEach']((_0x5a787e,_0x46323c)=>{var _0x32d412=_0x173798;_0x36214f[_0x46323c][_0x32d412(0x1fb)]=_0x5a787e;}),_0x49f78d[_0x173798(0x191)]((_0x3a392e,_0x367719)=>{var _0x893604=_0x173798;_0x36214f[_0x367719][_0x893604(0x1af)]=_0x3a392e;}),_0x186f59[_0x173798(0x191)]((_0x29a98c,_0xf34515)=>{var _0xe97411=_0x173798;_0x36214f[_0xf34515][_0xe97411(0x1a8)]=_0x29a98c;}),_0x16f5f1[_0x173798(0x191)]((_0x4762f1,_0xddd4d0)=>{_0x36214f[_0xddd4d0]['maxperunit']=_0x4762f1;}),_0x1dec00[_0x173798(0x191)]((_0x5254de,_0x592e90)=>{var _0x7ac919=_0x173798;_0x36214f[_0x592e90][_0x7ac919(0x174)]=_0x5254de;}),_0x472710[_0x173798(0x191)]((_0x37d4f1,_0x4e2631)=>{_0x36214f[_0x4e2631]['prod_cat']=_0x37d4f1;}),_0x48cbee[_0x173798(0x191)]((_0xcb5fdf,_0x41f6f7)=>{var _0x482600=_0x173798;_0x36214f[_0x41f6f7][_0x482600(0x218)]=_0xcb5fdf;}),_0x24de1e[_0x173798(0x191)]((_0x1a0599,_0x5bb5bc)=>{var _0x2e3bcf=_0x173798;_0x36214f[_0x5bb5bc][_0x2e3bcf(0x21c)]=_0x1a0599;}),_0x2d1c19['forEach']((_0x131f9b,_0x4fbd5f)=>{var _0x57293c=_0x173798;_0x36214f[_0x4fbd5f][_0x57293c(0x16e)]=_0x131f9b;}),_0x780019[_0x173798(0x191)]((_0x3fdd82,_0x4d7bf5)=>{_0x36214f[_0x4d7bf5]['invoice']=_0x3fdd82;});const _0x2d0b7f=_0x36214f[_0x173798(0x15b)](_0xda6bec=>_0xda6bec[_0x173798(0x159)]!=='0'&&_0xda6bec[_0x173798(0x159)]!=='');var _0x3ebe6a=0x0;_0x2d0b7f[_0x173798(0x191)](_0x2bc01f=>{var _0x256777=_0x173798;console[_0x256777(0x18d)](_0x256777(0x207),_0x2bc01f),parseInt(_0x2bc01f['adjust_qty'])<=0x0&&_0x3ebe6a++;});if(_0x3ebe6a!=0x0)return _0x176c07[_0x173798(0x1f7)]('errors',_0x173798(0x1c4)),_0x17e0c3[_0x173798(0x1ba)](_0x173798(0x18c));const _0x2edcfe=new adjustment({'warehouse_name':_0x4ecc58,'date':_0x1da77e,'product':_0x2d0b7f,'note':_0xc62ecd,'room':_0x4ed12b,'invoice':_0xbc5825,'JO_number':_0x2c8b60,'expiry_date':_0x37e95d}),_0x195a4f=await _0x2edcfe[_0x173798(0x1b2)]();_0x176c07['flash']('success',_0x173798(0x216)),_0x17e0c3[_0x173798(0x1ba)](_0x173798(0x179)+_0x195a4f['_id']);}catch(_0x3341bf){console[_0x173798(0x18d)](_0x3341bf),_0x17e0c3[_0x173798(0x15d)](0xc8)[_0x173798(0x1d1)]({'message':_0x3341bf[_0x173798(0x184)]});}}),router[a0_0x5b76b3(0x172)](a0_0x5b76b3(0x213),auth,async(_0x2668fa,_0x4aacf3)=>{var _0x5c247c=a0_0x5b76b3;try{const {username:_0x198bc9,email:_0x37737a,role:_0x2d2600}=_0x2668fa[_0x5c247c(0x1bc)],_0x184df3=_0x2668fa[_0x5c247c(0x1bc)],_0x85e185=await profile[_0x5c247c(0x1c6)]({'email':_0x184df3[_0x5c247c(0x220)]}),_0x44cb33=await master_shop['find'](),_0x1df711=_0x2668fa[_0x5c247c(0x20d)]['id'],_0x3afa81=await adjustment[_0x5c247c(0x18a)]({'_id':_0x1df711}),_0x175196=await purchases[_0x5c247c(0x15a)]([{'$match':{'warehouse_name':_0x3afa81[_0x5c247c(0x1b5)]}},{'$unwind':_0x5c247c(0x19e)},{'$group':{'_id':_0x5c247c(0x20f)}}]),_0x20eb4c=await product[_0x5c247c(0x1b9)]({}),_0x460b14=await warehouse[_0x5c247c(0x15a)]([{'$match':{'name':_0x3afa81[_0x5c247c(0x1b5)]}},{'$unwind':_0x5c247c(0x168)},{'$group':{'_id':_0x5c247c(0x201),'name':{'$first':_0x5c247c(0x18f)},'product_stock':{'$first':_0x5c247c(0x14f)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x5c247c(0x157)},'floorlevel':{'$first':_0x5c247c(0x171)},'primary_code':{'$first':_0x5c247c(0x1ec)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5c247c(0x15e)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5c247c(0x1bd)},'maxPerUnit':{'$first':_0x5c247c(0x1ad)},'expiry_date':{'$first':_0x5c247c(0x227)},'production_date':{'$first':_0x5c247c(0x189)},'batch_code':{'$first':_0x5c247c(0x154)},'room':{'$first':_0x5c247c(0x1a3)}}}]);if(_0x44cb33[0x0]['language']==_0x5c247c(0x150)){var _0x236b4a=users['English'];console[_0x5c247c(0x18d)](_0x236b4a);}else{if(_0x44cb33[0x0]['language']=='Hindi')var _0x236b4a=users[_0x5c247c(0x1ed)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]=='German')var _0x236b4a=users[_0x5c247c(0x15c)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]==_0x5c247c(0x219))var _0x236b4a=users[_0x5c247c(0x219)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]==_0x5c247c(0x217))var _0x236b4a=users[_0x5c247c(0x217)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]==_0x5c247c(0x198))var _0x236b4a=users[_0x5c247c(0x1c8)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]==_0x5c247c(0x180))var _0x236b4a=users[_0x5c247c(0x180)];else{if(_0x44cb33[0x0][_0x5c247c(0x16c)]==_0x5c247c(0x17d))var _0x236b4a=users[_0x5c247c(0x16b)];}}}}}}}_0x4aacf3[_0x5c247c(0x173)](_0x5c247c(0x1e1),{'success':_0x2668fa[_0x5c247c(0x1f7)]('success'),'errors':_0x2668fa['flash'](_0x5c247c(0x1a5)),'role':_0x184df3,'profile':_0x85e185,'adjustment':_0x3afa81,'stock':_0x460b14,'master_shop':_0x44cb33,'warehouse_name':_0x175196,'unit':_0x20eb4c,'language':_0x236b4a});}catch(_0x3f6b9c){console[_0x5c247c(0x18d)](_0x3f6b9c),_0x4aacf3[_0x5c247c(0x15d)](0xc8)[_0x5c247c(0x1d1)]({'message':_0x3f6b9c[_0x5c247c(0x184)]});}}),router['post'](a0_0x5b76b3(0x213),auth,async(_0x5de156,_0x2c668b)=>{var _0x551ef6=a0_0x5b76b3;try{const _0x307b3c=_0x5de156[_0x551ef6(0x20d)]['id'],{warehouse_name:_0xf9142f,Room_name:_0x51a04c}=_0x5de156[_0x551ef6(0x1e4)],_0x3df405=await adjustment[_0x551ef6(0x18a)]({'_id':_0x307b3c}),_0x750686=_0x3df405[_0x551ef6(0x16d)][_0x551ef6(0x1d7)](async _0x1ba419=>{var _0x36b590=_0x551ef6;if(_0x1ba419['adjust_qty']>0x0){var _0x494df7=await warehouse['findOne']({'name':_0xf9142f,'room':_0x1ba419['room_names'],'warehouse_category':'Raw\x20Materials'});const _0x873653=_0x494df7[_0x36b590(0x163)][_0x36b590(0x1d7)](_0x3b4302=>{var _0x46bfa6=_0x36b590;if(_0x1ba419[_0x46bfa6(0x1ff)]==_0x46bfa6(0x1a9)){if(_0x3b4302['product_name']==_0x1ba419[_0x46bfa6(0x1ee)]&&_0x3b4302['floorlevel']==_0x1ba419['floorlevel']&&_0x3b4302[_0x46bfa6(0x1ff)]==_0x1ba419['type']&&_0x3b4302[_0x46bfa6(0x1a1)]==_0x1ba419[_0x46bfa6(0x1a1)]&&_0x3b4302[_0x46bfa6(0x1d0)]==_0x1ba419['bay']&&_0x3b4302[_0x46bfa6(0x215)]==_0x1ba419[_0x46bfa6(0x215)]&&_0x3b4302[_0x46bfa6(0x1f4)]==_0x1ba419['storage']&&_0x3b4302[_0x46bfa6(0x1a8)]==_0x1ba419[_0x46bfa6(0x1a8)]&&_0x3b4302[_0x46bfa6(0x1af)]==_0x1ba419[_0x46bfa6(0x1af)]&&_0x3b4302[_0x46bfa6(0x174)]==_0x1ba419['production_date']&&_0x3b4302['invoice']==_0x1ba419[_0x46bfa6(0x1e5)]&&_0x3b4302[_0x46bfa6(0x1d8)]==_0x1ba419[_0x46bfa6(0x21b)]){var _0x5064cc;_0x5064cc=_0x1ba419[_0x46bfa6(0x159)],_0x1ba419[_0x46bfa6(0x158)]=='S'&&(_0x5064cc=_0x1ba419[_0x46bfa6(0x159)]),_0x3b4302['product_stock']=_0x3b4302[_0x46bfa6(0x20c)]-_0x5064cc;}}else{if(_0x3b4302[_0x46bfa6(0x1ee)]==_0x1ba419[_0x46bfa6(0x1ee)]&&_0x3b4302[_0x46bfa6(0x19d)]==_0x1ba419[_0x46bfa6(0x19d)]&&_0x3b4302[_0x46bfa6(0x1ff)]==_0x1ba419[_0x46bfa6(0x1ff)]&&_0x3b4302[_0x46bfa6(0x1a1)]==_0x1ba419[_0x46bfa6(0x1a1)]&&_0x3b4302[_0x46bfa6(0x1d0)]==_0x1ba419['bay']&&_0x3b4302['rack']==_0x1ba419[_0x46bfa6(0x215)]&&_0x3b4302['storage']==_0x1ba419['storage']&&_0x3b4302[_0x46bfa6(0x1a8)]==_0x1ba419[_0x46bfa6(0x1a8)]&&_0x3b4302['batch_code']==_0x1ba419['batch_code']&&_0x3b4302[_0x46bfa6(0x174)]==_0x1ba419[_0x46bfa6(0x174)]&&_0x3b4302['invoice']==_0x1ba419[_0x46bfa6(0x1e5)]&&_0x3b4302['_id']==_0x1ba419['id_transaction_from']){console['log'](_0x1ba419);var _0x5064cc;_0x5064cc=_0x1ba419['adjust_qty'],_0x1ba419[_0x46bfa6(0x158)]=='S'&&(_0x5064cc=_0x1ba419[_0x46bfa6(0x159)]),console[_0x46bfa6(0x18d)](_0x5064cc+_0x46bfa6(0x1b0)+_0x1ba419[_0x46bfa6(0x159)]+'\x20<>\x20'+_0x3b4302['maxPerUnit']+'\x20<>\x20'+_0x1ba419[_0x46bfa6(0x158)]),_0x3b4302['product_stock']=_0x3b4302[_0x46bfa6(0x20c)]+_0x5064cc;}}});}return _0x494df7;});Promise[_0x551ef6(0x151)](_0x750686)[_0x551ef6(0x1fd)](async _0x4d6295=>{var _0x4d7d44=_0x551ef6;try{for(const _0x1fb0cb of _0x4d6295){await _0x1fb0cb['save']();}_0x3df405['finalize']=_0x4d7d44(0x204);const _0x44dd5e=await _0x3df405[_0x4d7d44(0x1b2)](),_0x46ccc5=await master_shop[_0x4d7d44(0x1b9)](),_0x5b9c16=await email_settings['findOne'](),_0x2e4c25=await supervisor_settings['find']();var _0x24d2bc=_0x3df405['product'],_0x1b4030='',_0x11941a;for(_0x11941a in _0x24d2bc){_0x1b4030+=_0x4d7d44(0x1db)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24d2bc[_0x11941a][_0x4d7d44(0x1ee)]+_0x4d7d44(0x1cc)+_0x4d7d44(0x1e0)+_0x24d2bc[_0x11941a]['product_code']+'</td>'+_0x4d7d44(0x1e0)+_0x24d2bc[_0x11941a]['adjust_qty']+_0x4d7d44(0x1cc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24d2bc[_0x11941a][_0x4d7d44(0x1c1)]+_0x4d7d44(0x1cc)+_0x4d7d44(0x1e0)+_0x24d2bc[_0x11941a]['secondary_unit']+_0x4d7d44(0x1cc)+_0x4d7d44(0x1e0)+_0x3df405['warehouse_name']+'</td>'+_0x4d7d44(0x1e0)+_0x24d2bc[_0x11941a][_0x4d7d44(0x218)]+_0x4d7d44(0x1cc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24d2bc[_0x11941a]['storage']+_0x24d2bc[_0x11941a][_0x4d7d44(0x215)]+_0x24d2bc[_0x11941a]['bay']+_0x24d2bc[_0x11941a][_0x4d7d44(0x1a1)]+_0x24d2bc[_0x11941a][_0x4d7d44(0x1ff)][0x0]+_0x24d2bc[_0x11941a][_0x4d7d44(0x19d)]+'</td>',_0x4d7d44(0x1e6);}let _0x5c60ca=nodemailer['createTransport']({'host':_0x5b9c16[_0x4d7d44(0x206)],'port':Number(_0x5b9c16[_0x4d7d44(0x1d5)]),'secure':![],'auth':{'user':_0x5b9c16[_0x4d7d44(0x220)],'pass':_0x5b9c16[_0x4d7d44(0x1ae)]}}),_0x9901f8={'from':_0x5b9c16[_0x4d7d44(0x220)],'to':_0x2e4c25[0x0]['RMSEmail'],'subject':_0x4d7d44(0x167),'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x4d7d44(0x1da)+_0x46ccc5[0x0][_0x4d7d44(0x161)],'cid':_0x4d7d44(0x188)}],'html':'<!DOCTYPE\x20html>'+_0x4d7d44(0x209)+_0x4d7d44(0x214)+_0x4d7d44(0x1e2)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x4d7d44(0x1e2)+_0x4d7d44(0x22a)+_0x4d7d44(0x1eb)+_0x4d7d44(0x1e2)+_0x4d7d44(0x1ef)+_0x46ccc5[0x0][_0x4d7d44(0x1e9)]+_0x4d7d44(0x1fa)+_0x4d7d44(0x1eb)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x4d7d44(0x1e2)+_0x4d7d44(0x1ca)+_0x4d7d44(0x186)+_0x3df405['invoice']+'\x20'+_0x4d7d44(0x196)+_0x4d7d44(0x1fe)+_0x3df405[_0x4d7d44(0x175)]+'\x20'+_0x4d7d44(0x187)+_0x4d7d44(0x1cb)+_0x4d7d44(0x1eb)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x4d7d44(0x1e8)+'<tr>'+_0x4d7d44(0x1f8)+_0x4d7d44(0x1cf)+_0x4d7d44(0x156)+_0x4d7d44(0x20e)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x4d7d44(0x200)+_0x4d7d44(0x177)+_0x4d7d44(0x17b)+_0x4d7d44(0x1e6)+'</thead>'+_0x4d7d44(0x212)+'\x20'+_0x1b4030+'\x20'+_0x4d7d44(0x1b3)+_0x4d7d44(0x20a)+_0x4d7d44(0x1e2)+_0x4d7d44(0x194)+_0x4d7d44(0x19a)+_0x46ccc5[0x0][_0x4d7d44(0x1e9)]+_0x4d7d44(0x1cb)+_0x4d7d44(0x1eb)+_0x4d7d44(0x1eb)+'</body></html>'};_0x5c60ca[_0x4d7d44(0x1d9)](_0x9901f8,function(_0x3941e0,_0x4f7b80){var _0x4a5aa4=_0x4d7d44;_0x3941e0?(console['log'](_0x3941e0),console[_0x4a5aa4(0x18d)](_0x4a5aa4(0x15f))):console['log'](_0x4a5aa4(0x1f6));}),_0x5de156[_0x4d7d44(0x1f7)](_0x4d7d44(0x170),_0x4d7d44(0x1f0)),_0x2c668b[_0x4d7d44(0x1ba)](_0x4d7d44(0x1e3)+_0x44dd5e[_0x4d7d44(0x1d8)]);}catch(_0x364fd8){console[_0x4d7d44(0x225)](_0x364fd8),_0x2c668b[_0x4d7d44(0x15d)](0x1f4)[_0x4d7d44(0x1d1)]({'error':_0x4d7d44(0x203)});}})[_0x551ef6(0x208)](_0x1bc517=>{var _0x513bbb=_0x551ef6;console[_0x513bbb(0x225)](_0x1bc517),_0x2c668b[_0x513bbb(0x15d)](0x1f4)['json']({'error':'An\x20error\x20occurred.'});});}catch(_0x52d69f){console[_0x551ef6(0x18d)](_0x52d69f),_0x2c668b[_0x551ef6(0x15d)](0xc8)[_0x551ef6(0x1d1)]({'message':_0x52d69f[_0x551ef6(0x184)]});}}),router[a0_0x5b76b3(0x172)]('/view/:id',auth,async(_0x1e03c9,_0x350434)=>{var _0x3162f7=a0_0x5b76b3;try{const {username:_0x3afd64,email:_0x548e2c,role:_0x5a6cbe}=_0x1e03c9[_0x3162f7(0x1bc)],_0x3a441d=_0x1e03c9[_0x3162f7(0x1bc)],_0x41a900=await profile[_0x3162f7(0x1c6)]({'email':_0x3a441d['email']}),_0x1243ea=await master_shop[_0x3162f7(0x1b9)](),_0x47419c=_0x1e03c9[_0x3162f7(0x20d)]['id'],_0xa073c3=await adjustment['findById']({'_id':_0x47419c}),_0x4f75be=await purchases[_0x3162f7(0x15a)]([{'$match':{'warehouse_name':_0xa073c3[_0x3162f7(0x1b5)]}},{'$unwind':_0x3162f7(0x19e)},{'$group':{'_id':_0x3162f7(0x20f)}}]),_0x1d3b6d=await product[_0x3162f7(0x1b9)]({}),_0x2cfa2a=await warehouse[_0x3162f7(0x15a)]([{'$match':{'name':_0xa073c3['warehouse_name']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3162f7(0x18f)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x3162f7(0x171)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3162f7(0x1f5)},'product_code':{'$first':_0x3162f7(0x15e)},'storage':{'$first':_0x3162f7(0x21f)},'rack':{'$first':_0x3162f7(0x1bd)},'maxPerUnit':{'$first':_0x3162f7(0x1ad)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x3162f7(0x154)},'room':{'$first':_0x3162f7(0x1a3)}}}]);let _0x1615fb;if(_0x3a441d[_0x3162f7(0x21d)]==_0x3162f7(0x1ac)){const _0x3a7b1b=await staff[_0x3162f7(0x1c6)]({'email':_0x3a441d[_0x3162f7(0x220)]});_0x1615fb=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x3a7b1b[_0x3162f7(0x178)],'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x3162f7(0x1b1)}}},{'$group':{'_id':_0x3162f7(0x176),'name':{'$first':_0x3162f7(0x176)}}}]);}else _0x1615fb=await warehouse[_0x3162f7(0x15a)]([{'$match':{'status':_0x3162f7(0x1d3),'warehouse_category':_0x3162f7(0x1de),'name':{'$ne':_0x3162f7(0x1b1)}}},{'$group':{'_id':'$name','name':{'$first':_0x3162f7(0x176)}}}]);if(_0x1243ea[0x0][_0x3162f7(0x16c)]==_0x3162f7(0x150)){var _0x19720b=users[_0x3162f7(0x164)];console[_0x3162f7(0x18d)](_0x19720b);}else{if(_0x1243ea[0x0][_0x3162f7(0x16c)]==_0x3162f7(0x1ed))var _0x19720b=users[_0x3162f7(0x1ed)];else{if(_0x1243ea[0x0]['language']=='German')var _0x19720b=users[_0x3162f7(0x15c)];else{if(_0x1243ea[0x0][_0x3162f7(0x16c)]==_0x3162f7(0x219))var _0x19720b=users['Spanish'];else{if(_0x1243ea[0x0]['language']==_0x3162f7(0x217))var _0x19720b=users[_0x3162f7(0x217)];else{if(_0x1243ea[0x0]['language']==_0x3162f7(0x198))var _0x19720b=users['Portuguese'];else{if(_0x1243ea[0x0][_0x3162f7(0x16c)]==_0x3162f7(0x180))var _0x19720b=users['Chinese'];else{if(_0x1243ea[0x0][_0x3162f7(0x16c)]=='Arabic\x20(ae)')var _0x19720b=users[_0x3162f7(0x16b)];}}}}}}}_0x350434['render'](_0x3162f7(0x162),{'success':_0x1e03c9[_0x3162f7(0x1f7)](_0x3162f7(0x170)),'errors':_0x1e03c9[_0x3162f7(0x1f7)](_0x3162f7(0x1a5)),'role':_0x3a441d,'profile':_0x41a900,'adjustment':_0xa073c3,'stock':_0x2cfa2a,'master_shop':_0x1243ea,'warehouse_name':_0x4f75be,'unit':_0x1d3b6d,'language':_0x19720b,'warehouse':_0x1615fb});}catch(_0x45d802){console[_0x3162f7(0x18d)](_0x45d802),_0x350434[_0x3162f7(0x15d)](0xc8)[_0x3162f7(0x1d1)]({'message':_0x45d802[_0x3162f7(0x184)]});}}),router[a0_0x5b76b3(0x211)](a0_0x5b76b3(0x1cd),auth,async(_0x219641,_0x37bc92)=>{var _0x2f394f=a0_0x5b76b3;try{const _0x9a6eb4=_0x219641[_0x2f394f(0x20d)]['id'],_0x352c04=await adjustment[_0x2f394f(0x18a)]({'_id':_0x9a6eb4}),_0xca9b0a=await warehouse[_0x2f394f(0x1c6)]({'name':_0x352c04[_0x2f394f(0x1b5)],'room':_0x352c04[_0x2f394f(0x202)]}),{warehouse_name:_0x5a8cf7,date:_0x568ff3,prod_name:_0x1c7e29,level:_0x279eff,isle:_0x1555e0,pallet:_0x47f1b4,stock:_0x2f5617,types:_0x3658b4,adjust_qty:_0x149275,new_adjust_qty:_0x1b4c28,note:_0x1af88f,Room_name:_0x2feaf2,invoice:_0x366a48,JO_number:_0x2fad32,expiry_date:_0x5c4cb5}=_0x219641[_0x2f394f(0x1e4)];if(typeof _0x1c7e29==_0x2f394f(0x1f2))var _0x3c4e93=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x183)]],_0x130eef=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x19c)]],_0x57f516=[_0x219641['body']['stock']],_0x190ea6=[_0x219641['body'][_0x2f394f(0x18b)]],_0x5f0d63=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1be)]],_0x3a6bae=[_0x219641['body'][_0x2f394f(0x226)]],_0x59303b=[_0x219641[_0x2f394f(0x1e4)]['Primary_Units']],_0x3967ac=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x210)]],_0x3693ed=[_0x219641['body'][_0x2f394f(0x165)]],_0x5058f7=[_0x219641['body'][_0x2f394f(0x1af)]],_0x107975=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1a8)]],_0x2be322=[_0x219641['body'][_0x2f394f(0x182)]],_0x55eca0=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x174)]],_0x56b7bc=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x158)]],_0x4cf6c2=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1a6)]],_0xdb3b8=[_0x219641[_0x2f394f(0x1e4)]['prime1']],_0x53fa4a=[_0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1f9)]];else var _0x3c4e93=[..._0x219641['body'][_0x2f394f(0x183)]],_0x130eef=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x19c)]],_0x57f516=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x17e)]],_0x190ea6=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x18b)]],_0x5f0d63=[..._0x219641[_0x2f394f(0x1e4)]['New_Qty_Converted_adj']],_0x3a6bae=[..._0x219641['body'][_0x2f394f(0x226)]],_0x59303b=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1c1)]],_0x3967ac=[..._0x219641['body'][_0x2f394f(0x210)]],_0x3693ed=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x165)]],_0x5058f7=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1af)]],_0x107975=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1a8)]],_0x2be322=[..._0x219641[_0x2f394f(0x1e4)]['max_per_unit']],_0x55eca0=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x174)]],_0x56b7bc=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x158)]],_0x4cf6c2=[..._0x219641[_0x2f394f(0x1e4)]['Rooms']],_0xdb3b8=[..._0x219641[_0x2f394f(0x1e4)][_0x2f394f(0x1f1)]],_0x53fa4a=[..._0x219641['body'][_0x2f394f(0x1f9)]];const _0x38376d=_0x3c4e93[_0x2f394f(0x1d7)](_0x17c8cd=>{return _0x17c8cd={'product_name':_0x17c8cd};});_0x130eef[_0x2f394f(0x191)]((_0x4a24e7,_0x350e80)=>{var _0x4242b3=_0x2f394f;_0x4cf6c2[_0x4242b3(0x191)]((_0x4d94a0,_0x29ad08)=>{var _0x16553f=_0x4242b3;if(_0x4d94a0==_0x16553f(0x1c5)&&_0x350e80==_0x29ad08){var _0x2070f2=_0x4a24e7[_0x16553f(0x1b7)](0x3);_0x38376d[_0x350e80]['storage']=_0x4a24e7[0x0],_0x38376d[_0x350e80][_0x16553f(0x215)]=_0x4a24e7[0x1],_0x38376d[_0x350e80]['bay']=0x0,_0x38376d[_0x350e80]['bin']=0x0,_0x38376d[_0x350e80]['type']=_0x16553f(0x197),_0x38376d[_0x350e80][_0x16553f(0x19d)]=_0x2070f2;}else{if(_0x4d94a0=='Shelves'&&_0x350e80==_0x29ad08){var _0x2070f2=_0x4a24e7[_0x16553f(0x1b7)](0x3);_0x38376d[_0x350e80][_0x16553f(0x1f4)]=_0x4a24e7[0x0],_0x38376d[_0x350e80][_0x16553f(0x215)]=_0x4a24e7[0x1],_0x38376d[_0x350e80][_0x16553f(0x1d0)]=0x0,_0x38376d[_0x350e80][_0x16553f(0x1a1)]=0x0,_0x38376d[_0x350e80]['type']=_0x16553f(0x197),_0x38376d[_0x350e80][_0x16553f(0x19d)]=_0x4a24e7[0x5];}else{if(_0x350e80==_0x29ad08){var _0x35506e;if(_0x4a24e7[0x4]=='L')_0x35506e='Level';else _0x4a24e7[0x4]=='F'&&(_0x35506e=_0x16553f(0x197));_0x38376d[_0x350e80][_0x16553f(0x1f4)]=_0x4a24e7[0x0],_0x38376d[_0x350e80][_0x16553f(0x215)]=_0x4a24e7[0x1],_0x38376d[_0x350e80][_0x16553f(0x1d0)]=_0x4a24e7[0x2],_0x38376d[_0x350e80][_0x16553f(0x1a1)]=_0x4a24e7[0x3],_0x38376d[_0x350e80][_0x16553f(0x1ff)]=_0x35506e,_0x38376d[_0x350e80]['floorlevel']=_0x4a24e7[0x5];}}}});}),_0x57f516[_0x2f394f(0x191)]((_0x3395b9,_0x5799c1)=>{var _0x4d0bb8=_0x2f394f;_0x38376d[_0x5799c1][_0x4d0bb8(0x1bb)]=_0x3395b9;}),_0x190ea6['forEach']((_0x489040,_0x366199)=>{_0x38376d[_0x366199]['types']=_0x489040;}),_0x5f0d63[_0x2f394f(0x191)]((_0x5d0eb1,_0x4f0eeb)=>{_0x38376d[_0x4f0eeb]['adjust_qty']=_0x5d0eb1;}),_0x3a6bae[_0x2f394f(0x191)]((_0x158f08,_0xed724f)=>{var _0x210322=_0x2f394f;_0x38376d[_0xed724f][_0x210322(0x205)]=_0x158f08;}),_0x59303b[_0x2f394f(0x191)]((_0x28f6cc,_0x50c208)=>{var _0x50b9ac=_0x2f394f;_0x38376d[_0x50c208][_0x50b9ac(0x1c1)]=_0x28f6cc;}),_0x3967ac[_0x2f394f(0x191)]((_0x3754c9,_0x24df81)=>{var _0x57cd1b=_0x2f394f;_0x38376d[_0x24df81][_0x57cd1b(0x21e)]=_0x3754c9;}),_0x3693ed[_0x2f394f(0x191)]((_0x311138,_0xa48c84)=>{var _0x22e476=_0x2f394f;_0x38376d[_0xa48c84][_0x22e476(0x1fb)]=_0x311138;}),_0x5058f7[_0x2f394f(0x191)]((_0x28c621,_0x4201bd)=>{_0x38376d[_0x4201bd]['batch_code']=_0x28c621;}),_0x107975['forEach']((_0x599aed,_0x12c18d)=>{var _0x252a83=_0x2f394f;_0x38376d[_0x12c18d][_0x252a83(0x1a8)]=_0x599aed;}),_0x2be322['forEach']((_0x129050,_0x1ea52f)=>{var _0x9e369=_0x2f394f;_0x38376d[_0x1ea52f][_0x9e369(0x20b)]=_0x129050;}),_0x55eca0[_0x2f394f(0x191)]((_0x271b17,_0x3cb909)=>{var _0x2a47b4=_0x2f394f;_0x38376d[_0x3cb909][_0x2a47b4(0x174)]=_0x271b17;}),_0x56b7bc[_0x2f394f(0x191)]((_0xc82025,_0x1cfde7)=>{_0x38376d[_0x1cfde7]['prod_cat']=_0xc82025;}),_0x4cf6c2[_0x2f394f(0x191)]((_0x450f3a,_0x1c484b)=>{var _0x7795c7=_0x2f394f;_0x38376d[_0x1c484b][_0x7795c7(0x218)]=_0x450f3a;}),_0xdb3b8[_0x2f394f(0x191)]((_0x12276e,_0x3a6b85)=>{var _0x3a9e92=_0x2f394f;_0x38376d[_0x3a6b85][_0x3a9e92(0x21c)]=_0x12276e;}),_0x53fa4a[_0x2f394f(0x191)]((_0x1284ab,_0x5a2915)=>{var _0x33895f=_0x2f394f;_0x38376d[_0x5a2915][_0x33895f(0x16e)]=_0x1284ab;});const _0x3b0585=_0x38376d[_0x2f394f(0x15b)](_0x323571=>_0x323571[_0x2f394f(0x159)]!=='0'&&_0x323571[_0x2f394f(0x159)]!=='');var _0x11a8ee=0x0;_0x3b0585['forEach'](_0x3f9d8f=>{var _0x23dea8=_0x2f394f;console[_0x23dea8(0x18d)]('foreach\x20newproduct',_0x3f9d8f),parseInt(_0x3f9d8f[_0x23dea8(0x159)])<=0x0&&_0x11a8ee++;});if(_0x11a8ee!=0x0)return _0x219641['flash'](_0x2f394f(0x1a5),_0x2f394f(0x1c4)),_0x37bc92[_0x2f394f(0x1ba)](_0x2f394f(0x18c));_0x352c04[_0x2f394f(0x1b5)]=_0x5a8cf7,_0x352c04[_0x2f394f(0x175)]=_0x568ff3,_0x352c04[_0x2f394f(0x16d)]=_0x3b0585,_0x352c04[_0x2f394f(0x185)]=_0x1af88f,_0x352c04[_0x2f394f(0x1e5)]=_0x366a48,_0x352c04['isAllowEdit']=_0x2f394f(0x166);const _0x17922a=await _0x352c04['save']();_0x219641['flash'](_0x2f394f(0x170),_0x2f394f(0x1c2)),_0x37bc92[_0x2f394f(0x1ba)](_0x2f394f(0x1f3));}catch(_0x58ad7b){console[_0x2f394f(0x18d)](_0x58ad7b);}}),router[a0_0x5b76b3(0x211)](a0_0x5b76b3(0x1c9),async(_0xc9e813,_0x55d626)=>{var _0x494220=a0_0x5b76b3;const {primary_code:_0x186be2,warehouse_data:_0x468f31,rooms_data:_0x169b77,Roomslist:_0x2fd0ec}=_0xc9e813[_0x494220(0x1e4)],_0xf6cc71=_0x2fd0ec[_0x494220(0x1aa)](','),_0x4ff4af=[];async function _0xdceeb2(_0x21af95){var _0x3e6a81=_0x494220;const _0x32b8af=await warehouse[_0x3e6a81(0x15a)]([{'$match':{'name':_0x468f31,'room':_0x21af95}},{'$unwind':_0x3e6a81(0x168)},{'$match':{'product_details.primary_code':_0x186be2}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3e6a81(0x18f)},'product_stock':{'$first':_0x3e6a81(0x14f)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3e6a81(0x1f5)},'product_code':{'$first':_0x3e6a81(0x15e)},'level':{'$first':_0x3e6a81(0x17c)},'isle':{'$first':_0x3e6a81(0x223)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x3e6a81(0x171)},'unit':{'$first':_0x3e6a81(0x229)},'secondary_unit':{'$first':_0x3e6a81(0x1a2)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3e6a81(0x1bd)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x3e6a81(0x189)},'maxPerUnit':{'$first':_0x3e6a81(0x1ad)},'batch_code':{'$first':_0x3e6a81(0x154)},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x3e6a81(0x1a3)},'invoice':{'$first':_0x3e6a81(0x1ea)}}}]),_0x15d992=await warehouse[_0x3e6a81(0x15a)]([{'$match':{'name':_0x468f31,'room':_0x21af95}},{'$unwind':_0x3e6a81(0x168)},{'$match':{'product_details.secondary_code':_0x186be2}},{'$group':{'_id':_0x3e6a81(0x201),'name':{'$first':_0x3e6a81(0x18f)},'product_stock':{'$first':_0x3e6a81(0x14f)},'primary_code':{'$first':_0x3e6a81(0x1ec)},'secondary_code':{'$first':_0x3e6a81(0x1f5)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x3e6a81(0x17c)},'isle':{'$first':_0x3e6a81(0x223)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x3e6a81(0x171)},'unit':{'$first':_0x3e6a81(0x229)},'secondary_unit':{'$first':_0x3e6a81(0x1a2)},'storage':{'$first':_0x3e6a81(0x21f)},'rack':{'$first':_0x3e6a81(0x1bd)},'expiry_date':{'$first':_0x3e6a81(0x227)},'production_date':{'$first':_0x3e6a81(0x189)},'maxPerUnit':{'$first':_0x3e6a81(0x1ad)},'batch_code':{'$first':_0x3e6a81(0x154)},'product_cat':{'$first':_0x3e6a81(0x1c7)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x3e6a81(0x1a3)}}}]);if(_0x32b8af[_0x3e6a81(0x152)]>0x0)_0x4ff4af[_0x3e6a81(0x199)](_0x32b8af);else _0x15d992[_0x3e6a81(0x152)]>0x0&&_0x4ff4af[_0x3e6a81(0x199)](_0x15d992);}const _0x482603=_0xf6cc71[_0x494220(0x1d7)](_0x525a44=>_0xdceeb2(_0x525a44));await Promise[_0x494220(0x151)](_0x482603),_0x55d626[_0x494220(0x1d1)](_0x4ff4af);}),router['post'](a0_0x5b76b3(0x1e7),async(_0x497489,_0x1d2758)=>{var _0x47a7f7=a0_0x5b76b3;const {primaryCode:_0x152651,secondaryCode:_0x535cd9,productCode:_0x1f5c42,level:_0x9a9ef,isle:_0x21178e,pallet:_0xd6ae53,warehouses:_0x523e1c,room:_0x57fef4}=_0x497489[_0x47a7f7(0x1e4)];try{const _0x908cc2=await warehouse['aggregate']([{'$match':{'name':_0x523e1c,'room':_0x57fef4}},{'$unwind':_0x47a7f7(0x168)},{'$match':{'product_details.level':parseInt(_0x9a9ef),'product_details.isle':_0x21178e,'product_details.pallet':parseInt(_0xd6ae53)}},{'$group':{'_id':_0x47a7f7(0x201),'name':{'$first':_0x47a7f7(0x18f)},'product_stock':{'$first':_0x47a7f7(0x14f)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x47a7f7(0x1ab)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x47a7f7(0x1fc)}}}]);_0x1d2758['status'](0xc8)[_0x47a7f7(0x1d1)](_0x908cc2);}catch(_0x2ac0e6){_0x1d2758[_0x47a7f7(0x15d)](0x194)[_0x47a7f7(0x1d1)]({'message':_0x2ac0e6['message']});}}),module[a0_0x5b76b3(0x1d4)]=router;function a0_0x39b4(_0x2194c8,_0x12836f){var _0x2a4170=a0_0x2a41();return a0_0x39b4=function(_0x39b44b,_0x21a599){_0x39b44b=_0x39b44b-0x14f;var _0x273d8c=_0x2a4170[_0x39b44b];return _0x273d8c;},a0_0x39b4(_0x2194c8,_0x12836f);}function a0_0x2a41(){var _0x3872e1=['product','secondary_code','5432949oEIazd','success','$product_details.floorlevel','get','render','production_date','date','$name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','warehouse','/adjustment/preview/','Ambient','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','$product_details.bay','Arabic\x20(ae)','stock','2024434YcPdPz','Chinese','express','max_per_unit','prod_name','message','note','\x20Order\x20Number\x20:\x20','</span>','logo','$product_details.production_date','findById','types','back','log','ADJ-','$product_details.product_name','toString','forEach','9793PVMSRH','master','<strong>\x20Regards\x20</strong>','Enclosed','<span\x20style=\x22float:\x20right;\x22>','Floor','Portuguese\x20(BR)','push','<h5>','$_id','level','floorlevel','$product','15gKaLlO','../models/all_models','bin','$product_details.secondary_unit','$room','$date','errors','Rooms','20uXiFuY','expiry_date','minus','split','$product_details.isle','staff','$product_details.maxPerUnit','password','batch_code','\x20<>\x20','Return\x20Goods','save','</tbody>','6379944suSuxE','warehouse_name','random','slice','$product.room_names','find','redirect','stockBefore','user','$product_details.rack','New_Qty_Converted_adj','Return\x20Rooms','add_adjustment','unit','adjustment\x20data\x20update\x20successfully','1NgTNQW','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','Receiving\x20Area','findOne','$product_details.product_cat','Portuguese','/barcode_scanner','<h5\x20style=\x22text-align:\x20left;\x22>','</h5>','</td>','/view/:id','../middleware/auth','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','bay','json','../public/language/languages.json','Enabled','exports','port','/view/add_adjustment','map','_id','sendMail','/upload/','<tr>','adjustment','padStart','Raw\x20Materials','Shelves','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','edit_adjustment_view','<div>','/picking_list/PDF_adjustment_rm/','body','invoice','</tr>','/CheckingWarehouse','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','site_title','$product_details.invoice','</div>','$product_details.primary_code','Hindi','product_name','<h2>\x20','adjustment\x20Finalized\x20successfully','prime1','string','/adjustment/view','storage','$product_details.secondary_code','Email\x20sent\x20successfully','flash','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','second1','\x20</h2>','product_code','$product_details.maxProducts','then','\x20Order\x20Date\x20:\x20','type','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','$product_details._id','room','An\x20error\x20occurred\x20while\x20saving\x20data.','True','new_adjust_qty','host','foreach\x20newproduct','catch','<html><head><title></title>','</table>','maxperunit','product_stock','params','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$product.product_name','Secondary_units','post','<tbody\x20style=\x22text-align:\x20center;\x22>','/preview/:id','</head><body>','rack','adjustment\x20add\x20successfull','French','room_names','Spanish','$invoice','id_transaction_from','primary_code','role','secondary_unit','$product_details.storage','email','4152evzvpQ','$warehouse_name','$product_details.bin','floor','error','New_Qty_Converted','$product_details.expiry_date','prod_invoice','$product_details.unit','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','$product_details.product_stock','English\x20(US)','all','length','209892YWWPPQ','$product_details.batch_code','id_transaction','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','$product_details.type','prod_cat','adjust_qty','aggregate','filter','German','status','$product_details.product_code','Error\x20Occurs','$finalize','image','edit_adjustment','product_details','English','prod_code','False','Adjustment\x20Mail','$product_details','2937300WVlXrB','7828161hYnjah','Arabic','language'];a0_0x2a41=function(){return _0x3872e1;};return a0_0x2a41();}