function a0_0x4ba0(){var _0xc38687=['../public/language/languages.json','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','product_details','/view/:id','$product_details.maxPerUnit','flash','logo','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','67480IyvIRV','RMSEmail','Return\x20Goods','product','False','Error\x20Occurs','Chinese','</tbody>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','adjustment','secondary_unit','$isAllowEdit','3148920neHolK','message','New_Qty_Converted_adj','$product_details.floorlevel','type','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','redirect','$product_details.product_code','An\x20error\x20occurred\x20while\x20saving\x20data.','render','note','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','max_per_unit','Secondary_units','errors','Portuguese\x20(BR)','split','site_title','</body></html>','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','staff','adjustment\x20Finalized\x20successfully','760027DfHwof','$product_details.bay','product_code','language','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','$product.room_names','Enabled','maxPerUnit','room','Hindi','Portuguese','primary_code','/adjustment/view','$product_details.product_cat','</thead>','room_names','password','Ambient','prime1','batch_code','image','$product_details.rack','types','1056936pgowgI','role','save','Shelves','../models/all_models','all','$product_details.unit','random','bin','log','_id','prod_name','\x20<>\x20','second1','error','adjustment\x20data\x20update\x20successfully','Level','find','Enclosed','<table\x20style=\x22width:\x20100%\x20!important;\x22>','$finalize','slice','$_id','length','unit','There\x27s\x20a\x20error\x20in\x20this\x20transaction','params','/adjustment/preview/','padStart','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','user','<strong>\x20Regards\x20</strong>','forEach','New_Qty_Converted','$product_details.primary_code','$product_details.maxProducts','body','Arabic\x20(ae)','email','stockBefore','</h5>','floorlevel','map','$product_details._id','rack','$room','../middleware/auth','production_date','<div>','French','secondary_code','English\x20(US)','prod_cat','createTransport','catch','361848TqMeyB','bay','stock','get','filter','<!DOCTYPE\x20html>','$product','prod_code','Arabic','/view/add_adjustment','$product_details.level','$product_details.bin','aggregate','$product_details.pallet','warehouse','$product_details.expiry_date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<span\x20style=\x22float:\x20right;\x22>','success','json','<h2>\x20','floor','toString','$product_details.type','nodemailer','add_adjustment','English','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','$product_details.production_date','$name','express','German','/upload/','$product.product_name','Return\x20Rooms','$product_details.product_stock','<tbody\x20style=\x22text-align:\x20center;\x22>','findOne','expiry_date','push','ADJ-','True','new_adjust_qty','storage','</tr>','<h5>','warehouse_name','Receiving\x20Area','Email\x20sent\x20successfully','</div>','/view','<tr>','foreach\x20newproduct','30csLkBK','Floor','findById','<html><head><title></title>','then','adjustment\x20add\x20successfull','$product_details.batch_code','prod_invoice','\x20Order\x20Date\x20:\x20','103475MrTCdm','$product_details.secondary_code','Raw\x20Materials','level','product_stock','invoice','Rooms','</span>','24lrxOMS','$product_details.secondary_unit','$product_details.product_name','Logo.png','2405655txjSdi','Primary_Units','/picking_list/PDF_adjustment_rm/','back','status','post','$product_details.storage','adjust_qty','string','Spanish','$product_details','date','/preview/:id','maxperunit','product_name'];a0_0x4ba0=function(){return _0xc38687;};return a0_0x4ba0();}var a0_0x4812d7=a0_0x2d3d;(function(_0x1e5413,_0x2c157d){var _0x3e8b2a=a0_0x2d3d,_0x4019b8=_0x1e5413();while(!![]){try{var _0x3e264d=-parseInt(_0x3e8b2a(0x1b0))/0x1+parseInt(_0x3e8b2a(0xf4))/0x2+-parseInt(_0x3e8b2a(0x171))/0x3*(-parseInt(_0x3e8b2a(0x12b))/0x4)+-parseInt(_0x3e8b2a(0x169))/0x5*(parseInt(_0x3e8b2a(0x160))/0x6)+-parseInt(_0x3e8b2a(0x175))/0x7+parseInt(_0x3e8b2a(0x18d))/0x8+parseInt(_0x3e8b2a(0x199))/0x9;if(_0x3e264d===_0x2c157d)break;else _0x4019b8['push'](_0x4019b8['shift']());}catch(_0x517bc6){_0x4019b8['push'](_0x4019b8['shift']());}}}(a0_0x4ba0,0x62770));const express=require(a0_0x4812d7(0x149)),app=express(),router=express['Router'](),auth=require(a0_0x4812d7(0x122)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x4812d7(0xf8)),users=require(a0_0x4812d7(0x184)),nodemailer=require(a0_0x4812d7(0x143));router['get'](a0_0x4812d7(0x15d),auth,async(_0x524283,_0x3fae86)=>{var _0x24e95c=a0_0x4812d7;try{const {username:_0x2afc10,email:_0x1aca0f,role:_0x16fc63}=_0x524283['user'],_0x49afb7=_0x524283['user'],_0x1b2c6f=await profile[_0x24e95c(0x150)]({'email':_0x49afb7['email']}),_0x1dcfe4=await master_shop[_0x24e95c(0x105)]();console[_0x24e95c(0xfd)]('master',_0x1dcfe4);let _0x2a4b31;if(_0x49afb7[_0x24e95c(0xf5)]==_0x24e95c(0x1ae)){const _0x45c821=await staff['findOne']({'email':_0x49afb7['email']});_0x2a4b31=await warehouse[_0x24e95c(0x105)]({'status':_0x24e95c(0x1b6),'name':_0x45c821[_0x24e95c(0x139)]});}else _0x2a4b31=await warehouse[_0x24e95c(0x105)]({'status':'Enabled'});const _0x283062=await product[_0x24e95c(0x105)]();let _0xfaa25c;if(_0x49afb7['role']==_0x24e95c(0x1ae)){const _0x5bfdff=await staff[_0x24e95c(0x150)]({'email':_0x49afb7['email']});_0xfaa25c=await adjustment['find']({'warehouse_name':_0x5bfdff[_0x24e95c(0x139)]});}else _0xfaa25c=await adjustment[_0x24e95c(0x137)]([{'$unwind':'$product'},{'$group':{'_id':_0x24e95c(0x10a),'invoice':{'$first':'$invoice'},'date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':_0x24e95c(0x1b5)},'finalize':{'$first':_0x24e95c(0x108)},'isAllowEdit':{'$first':_0x24e95c(0x198)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x1dcfe4[0x0]['language']==_0x24e95c(0x127)){var _0xb9c97a=users[_0x24e95c(0x145)];console[_0x24e95c(0xfd)](_0xb9c97a);}else{if(_0x1dcfe4[0x0]['language']==_0x24e95c(0x1b9))var _0xb9c97a=users[_0x24e95c(0x1b9)];else{if(_0x1dcfe4[0x0][_0x24e95c(0x1b3)]=='German')var _0xb9c97a=users[_0x24e95c(0x14a)];else{if(_0x1dcfe4[0x0][_0x24e95c(0x1b3)]==_0x24e95c(0x17e))var _0xb9c97a=users[_0x24e95c(0x17e)];else{if(_0x1dcfe4[0x0]['language']==_0x24e95c(0x125))var _0xb9c97a=users[_0x24e95c(0x125)];else{if(_0x1dcfe4[0x0][_0x24e95c(0x1b3)]==_0x24e95c(0x1a8))var _0xb9c97a=users['Portuguese'];else{if(_0x1dcfe4[0x0][_0x24e95c(0x1b3)]=='Chinese')var _0xb9c97a=users[_0x24e95c(0x193)];else{if(_0x1dcfe4[0x0]['language']=='Arabic\x20(ae)')var _0xb9c97a=users[_0x24e95c(0x133)];}}}}}}}_0x3fae86['render'](_0x24e95c(0x196),{'success':_0x524283[_0x24e95c(0x18a)](_0x24e95c(0x13d)),'errors':_0x524283['flash']('errors'),'role':_0x49afb7,'profile':_0x1b2c6f,'warehouse':_0x2a4b31,'product':_0x283062,'adjustment':_0xfaa25c,'master_shop':_0x1dcfe4,'language':_0xb9c97a});}catch(_0x13b129){console[_0x24e95c(0xfd)](_0x13b129);}});function a0_0x2d3d(_0x2b6ec5,_0xf3a178){var _0x4ba069=a0_0x4ba0();return a0_0x2d3d=function(_0x2d3d01,_0x4a9087){_0x2d3d01=_0x2d3d01-0xef;var _0x272aa9=_0x4ba069[_0x2d3d01];return _0x272aa9;},a0_0x2d3d(_0x2b6ec5,_0xf3a178);}async function getRandom8DigitNumber(){var _0x18944f=a0_0x4812d7;const _0x35e1b3=0x989680,_0x116fd7=0x5f5e0ff,_0x2cec7e=Math[_0x18944f(0x140)](Math[_0x18944f(0xfb)]()*(_0x116fd7-_0x35e1b3+0x1))+_0x35e1b3;var _0x2566ad;const _0xb6fbfd=await adjustment[_0x18944f(0x150)]({'invoice':_0x18944f(0x153)+_0x2cec7e});return _0xb6fbfd&&_0xb6fbfd[_0x18944f(0x10b)]>0x0?_0x2566ad=_0x18944f(0x153)+_0x2cec7e:_0x2566ad=_0x18944f(0x153)+_0x2cec7e,_0x2566ad;}router[a0_0x4812d7(0x12e)](a0_0x4812d7(0x134),auth,async(_0x16f3ed,_0x1beaa8)=>{var _0x1eeb5a=a0_0x4812d7;try{const {username:_0x84c963,email:_0x396d52,role:_0x5d1104}=_0x16f3ed[_0x1eeb5a(0x112)],_0x2004a5=_0x16f3ed[_0x1eeb5a(0x112)],_0x454724=await profile['findOne']({'email':_0x2004a5[_0x1eeb5a(0x11a)]}),_0x14ce55=await master_shop[_0x1eeb5a(0x105)]();let _0x21f041;if(_0x2004a5[_0x1eeb5a(0xf5)]==_0x1eeb5a(0x1ae)){const _0x2b9157=await staff[_0x1eeb5a(0x150)]({'email':_0x2004a5[_0x1eeb5a(0x11a)]});_0x21f041=await warehouse[_0x1eeb5a(0x137)]([{'$match':{'status':_0x1eeb5a(0x1b6),'name':_0x2b9157[_0x1eeb5a(0x139)],'warehouse_category':_0x1eeb5a(0x16b),'name':{'$ne':_0x1eeb5a(0x18f)}}},{'$group':{'_id':_0x1eeb5a(0x148),'name':{'$first':_0x1eeb5a(0x148)}}}]);}else _0x21f041=await warehouse['aggregate']([{'$match':{'status':_0x1eeb5a(0x1b6),'warehouse_category':_0x1eeb5a(0x16b),'name':{'$ne':_0x1eeb5a(0x18f)}}},{'$group':{'_id':_0x1eeb5a(0x148),'name':{'$first':'$name'}}}]);const _0x566a02=await product[_0x1eeb5a(0x105)]({}),_0x2a75f4=await adjustment['find']({}),_0x3f8cd8=_0x2a75f4['length']+0x1,_0x5bc734=_0x1eeb5a(0x153)+_0x3f8cd8[_0x1eeb5a(0x141)]()[_0x1eeb5a(0x110)](0x5,'0');var _0x56f170=[_0x1eeb5a(0x1c1),_0x1eeb5a(0x106),_0x1eeb5a(0x14d)];if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x127))var _0x1f9565=users[_0x1eeb5a(0x145)];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x1b9))var _0x1f9565=users['Hindi'];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x14a))var _0x1f9565=users[_0x1eeb5a(0x14a)];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x17e))var _0x1f9565=users[_0x1eeb5a(0x17e)];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x125))var _0x1f9565=users[_0x1eeb5a(0x125)];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]=='Portuguese\x20(BR)')var _0x1f9565=users['Portuguese'];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]=='Chinese')var _0x1f9565=users[_0x1eeb5a(0x193)];else{if(_0x14ce55[0x0][_0x1eeb5a(0x1b3)]==_0x1eeb5a(0x119))var _0x1f9565=users[_0x1eeb5a(0x133)];}}}}}}}const _0x372da9=getRandom8DigitNumber();_0x372da9[_0x1eeb5a(0x164)](_0x2c84a2=>{var _0x1e24ea=_0x1eeb5a;_0x1beaa8[_0x1e24ea(0x1a2)](_0x1e24ea(0x144),{'success':_0x16f3ed[_0x1e24ea(0x18a)]('success'),'errors':_0x16f3ed[_0x1e24ea(0x18a)]('errors'),'role':_0x2004a5,'profile':_0x454724,'warehouse':_0x21f041,'product':_0x566a02,'master_shop':_0x14ce55,'language':_0x1f9565,'rooms_data':_0x56f170,'invoice_no':_0x2c84a2});})[_0x1eeb5a(0x12a)](_0x11061e=>{var _0x15a285=_0x1eeb5a;_0x16f3ed[_0x15a285(0x18a)](_0x15a285(0x1a7),_0x15a285(0x10d)),_0x1beaa8['redirect'](_0x15a285(0x1bc));});}catch(_0x38fb7a){console[_0x1eeb5a(0xfd)](_0x38fb7a);}}),router[a0_0x4812d7(0x17a)](a0_0x4812d7(0x134),auth,async(_0x547f71,_0x3e5b48)=>{var _0x1a11f5=a0_0x4812d7;try{const {warehouse_name:_0x1ed2db,date:_0x1f069d,prod_name:_0x2b15a5,level:_0x27d1f8,isle:_0x2c4e4d,pallet:_0x48ee2a,stock:_0x2616f2,types:_0x555fa4,adjust_qty:_0x40aff9,new_adjust_qty:_0x52fa2b,note:_0x5cb845,Room_name:_0x1cb27a,invoice:_0x53b418,JO_number:_0xc8fb5d,expiry_date:_0x38951f}=_0x547f71[_0x1a11f5(0x118)];if(typeof _0x2b15a5=='string')var _0x45c357=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0xff)]],_0x42ace0=[_0x547f71['body'][_0x1a11f5(0x16c)]],_0x440f1a=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x12d)]],_0x45774c=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0xf3)]],_0x5536a7=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x19b)]],_0x5e7f37=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x115)]],_0x387da0=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x176)]],_0x4cbfd1=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x1a6)]],_0x26c167=[_0x547f71[_0x1a11f5(0x118)]['prod_code']],_0x42f326=[_0x547f71['body'][_0x1a11f5(0xf0)]],_0x1429aa=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x151)]],_0x3300fc=[_0x547f71['body']['max_per_unit']],_0x4c8c32=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x123)]],_0x3ab17c=[_0x547f71[_0x1a11f5(0x118)]['prod_cat']],_0x4d890a=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x16f)]],_0x43557c=[_0x547f71['body'][_0x1a11f5(0xef)]],_0x10f760=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x101)]],_0x2456f0=[_0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x167)]];else var _0x45c357=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0xff)]],_0x42ace0=[..._0x547f71['body']['level']],_0x440f1a=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x12d)]],_0x45774c=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0xf3)]],_0x5536a7=[..._0x547f71['body'][_0x1a11f5(0x19b)]],_0x5e7f37=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x115)]],_0x387da0=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x10c)]],_0x4cbfd1=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x1a6)]],_0x26c167=[..._0x547f71[_0x1a11f5(0x118)]['prod_code']],_0x42f326=[..._0x547f71[_0x1a11f5(0x118)]['batch_code']],_0x1429aa=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x151)]],_0x3300fc=[..._0x547f71['body'][_0x1a11f5(0x1a5)]],_0x4c8c32=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x123)]],_0x3ab17c=[..._0x547f71['body'][_0x1a11f5(0x128)]],_0x4d890a=[..._0x547f71['body'][_0x1a11f5(0x16f)]],_0x43557c=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0xef)]],_0x10f760=[..._0x547f71[_0x1a11f5(0x118)][_0x1a11f5(0x101)]],_0x2456f0=[..._0x547f71['body'][_0x1a11f5(0x167)]];const _0x44317d=_0x45c357[_0x1a11f5(0x11e)](_0x11a51d=>{return _0x11a51d={'product_name':_0x11a51d};});_0x42ace0['forEach']((_0x113890,_0x2d8a5a)=>{var _0x1a2cdd=_0x1a11f5;_0x4d890a[_0x1a2cdd(0x114)]((_0x492e9c,_0x1ba545)=>{var _0x4d3df8=_0x1a2cdd;if(_0x492e9c=='Receiving\x20Area'&&_0x2d8a5a==_0x1ba545){var _0x156611=_0x113890[_0x4d3df8(0x109)](0x3);_0x44317d[_0x2d8a5a][_0x4d3df8(0x156)]=_0x113890[0x0],_0x44317d[_0x2d8a5a][_0x4d3df8(0x120)]=_0x113890[0x1],_0x44317d[_0x2d8a5a][_0x4d3df8(0x12c)]=0x0,_0x44317d[_0x2d8a5a]['bin']=0x0,_0x44317d[_0x2d8a5a][_0x4d3df8(0x19d)]=_0x4d3df8(0x161),_0x44317d[_0x2d8a5a]['floorlevel']=_0x156611;}else{if(_0x492e9c==_0x4d3df8(0xf7)&&_0x2d8a5a==_0x1ba545){var _0x156611=_0x113890['slice'](0x3);_0x44317d[_0x2d8a5a][_0x4d3df8(0x156)]=_0x113890[0x0],_0x44317d[_0x2d8a5a][_0x4d3df8(0x120)]=_0x113890[0x1],_0x44317d[_0x2d8a5a]['bay']=0x0,_0x44317d[_0x2d8a5a][_0x4d3df8(0xfc)]=0x0,_0x44317d[_0x2d8a5a]['type']=_0x4d3df8(0x161),_0x44317d[_0x2d8a5a]['floorlevel']=_0x113890[0x5];}else{if(_0x2d8a5a==_0x1ba545){var _0x3c9fce;if(_0x113890[0x4]=='L')_0x3c9fce=_0x4d3df8(0x104);else _0x113890[0x4]=='F'&&(_0x3c9fce=_0x4d3df8(0x161));_0x44317d[_0x2d8a5a][_0x4d3df8(0x156)]=_0x113890[0x0],_0x44317d[_0x2d8a5a][_0x4d3df8(0x120)]=_0x113890[0x1],_0x44317d[_0x2d8a5a][_0x4d3df8(0x12c)]=_0x113890[0x2],_0x44317d[_0x2d8a5a]['bin']=_0x113890[0x3],_0x44317d[_0x2d8a5a][_0x4d3df8(0x19d)]=_0x3c9fce,_0x44317d[_0x2d8a5a][_0x4d3df8(0x11d)]=_0x113890[0x5];}}}});}),_0x440f1a['forEach']((_0x237a31,_0x39b22c)=>{var _0x1e5753=_0x1a11f5;_0x44317d[_0x39b22c][_0x1e5753(0x11b)]=_0x237a31;}),_0x45774c['forEach']((_0x28a14f,_0x47cde3)=>{var _0x4ad437=_0x1a11f5;_0x44317d[_0x47cde3][_0x4ad437(0xf3)]=_0x28a14f;}),_0x5536a7[_0x1a11f5(0x114)]((_0x59dd32,_0x1e2855)=>{var _0x3124fc=_0x1a11f5;_0x44317d[_0x1e2855][_0x3124fc(0x17c)]=_0x59dd32;}),_0x5e7f37[_0x1a11f5(0x114)]((_0x4bf044,_0x59f0c6)=>{var _0x4a1aff=_0x1a11f5;_0x44317d[_0x59f0c6][_0x4a1aff(0x155)]=_0x4bf044;}),_0x387da0['forEach']((_0x591c00,_0x5e3675)=>{var _0x95b21=_0x1a11f5;_0x44317d[_0x5e3675][_0x95b21(0x10c)]=_0x591c00;}),_0x4cbfd1[_0x1a11f5(0x114)]((_0x4f7d63,_0x497693)=>{var _0x1cdc94=_0x1a11f5;_0x44317d[_0x497693][_0x1cdc94(0x197)]=_0x4f7d63;}),_0x26c167[_0x1a11f5(0x114)]((_0x3adbe7,_0x55c5f2)=>{var _0x5831d7=_0x1a11f5;_0x44317d[_0x55c5f2][_0x5831d7(0x1b2)]=_0x3adbe7;}),_0x42f326[_0x1a11f5(0x114)]((_0x4bbbd1,_0x68b8a5)=>{var _0x1e5618=_0x1a11f5;_0x44317d[_0x68b8a5][_0x1e5618(0xf0)]=_0x4bbbd1;}),_0x1429aa['forEach']((_0x482b78,_0x33a35f)=>{_0x44317d[_0x33a35f]['expiry_date']=_0x482b78;}),_0x3300fc[_0x1a11f5(0x114)]((_0x5a74e7,_0x4292e8)=>{var _0x2e3d9b=_0x1a11f5;_0x44317d[_0x4292e8][_0x2e3d9b(0x182)]=_0x5a74e7;}),_0x4c8c32[_0x1a11f5(0x114)]((_0x4d238a,_0x2efd9c)=>{var _0x18c4a5=_0x1a11f5;_0x44317d[_0x2efd9c][_0x18c4a5(0x123)]=_0x4d238a;}),_0x3ab17c[_0x1a11f5(0x114)]((_0x512130,_0x2d1ddd)=>{var _0x57f8ba=_0x1a11f5;_0x44317d[_0x2d1ddd][_0x57f8ba(0x128)]=_0x512130;}),_0x4d890a['forEach']((_0x590dff,_0x3c8187)=>{var _0x51be7d=_0x1a11f5;_0x44317d[_0x3c8187][_0x51be7d(0x1bf)]=_0x590dff;}),_0x43557c[_0x1a11f5(0x114)]((_0x27d6a0,_0x35e544)=>{var _0x1737fa=_0x1a11f5;_0x44317d[_0x35e544][_0x1737fa(0x1bb)]=_0x27d6a0;}),_0x10f760[_0x1a11f5(0x114)]((_0x10e037,_0x101582)=>{var _0x3c1c43=_0x1a11f5;_0x44317d[_0x101582][_0x3c1c43(0x126)]=_0x10e037;}),_0x2456f0['forEach']((_0x233a77,_0x4aa3b5)=>{var _0x40de09=_0x1a11f5;_0x44317d[_0x4aa3b5][_0x40de09(0x16e)]=_0x233a77;});const _0x34ea9f=_0x44317d['filter'](_0x51c869=>_0x51c869[_0x1a11f5(0x17c)]!=='0'&&_0x51c869[_0x1a11f5(0x17c)]!=='');var _0x317164=0x0;_0x34ea9f[_0x1a11f5(0x114)](_0x2a3ef1=>{var _0x235c61=_0x1a11f5;console[_0x235c61(0xfd)](_0x235c61(0x15f),_0x2a3ef1),parseInt(_0x2a3ef1[_0x235c61(0x17c)])<=0x0&&_0x317164++;});if(_0x317164!=0x0)return _0x547f71[_0x1a11f5(0x18a)](_0x1a11f5(0x1a7),_0x1a11f5(0x111)),_0x3e5b48[_0x1a11f5(0x19f)](_0x1a11f5(0x178));const _0x2fb289=new adjustment({'warehouse_name':_0x1ed2db,'date':_0x1f069d,'product':_0x34ea9f,'note':_0x5cb845,'room':_0x1cb27a,'invoice':_0x53b418,'JO_number':_0xc8fb5d,'expiry_date':_0x38951f}),_0x4fe6ab=await _0x2fb289[_0x1a11f5(0xf6)]();_0x547f71['flash'](_0x1a11f5(0x13d),_0x1a11f5(0x165)),_0x3e5b48['redirect'](_0x1a11f5(0x10f)+_0x4fe6ab[_0x1a11f5(0xfe)]);}catch(_0x911f25){console[_0x1a11f5(0xfd)](_0x911f25),_0x3e5b48[_0x1a11f5(0x179)](0xc8)[_0x1a11f5(0x13e)]({'message':_0x911f25[_0x1a11f5(0x19a)]});}}),router['get'](a0_0x4812d7(0x181),auth,async(_0x49d4c2,_0x100c2f)=>{var _0x57b75d=a0_0x4812d7;try{const {username:_0x1dc8a0,email:_0x12bf21,role:_0x44841d}=_0x49d4c2[_0x57b75d(0x112)],_0x31023a=_0x49d4c2[_0x57b75d(0x112)],_0x498948=await profile[_0x57b75d(0x150)]({'email':_0x31023a[_0x57b75d(0x11a)]}),_0x539016=await master_shop[_0x57b75d(0x105)](),_0x21421c=_0x49d4c2[_0x57b75d(0x10e)]['id'],_0x308fb5=await adjustment['findById']({'_id':_0x21421c}),_0x522c13=await purchases['aggregate']([{'$match':{'warehouse_name':_0x308fb5[_0x57b75d(0x159)]}},{'$unwind':'$product'},{'$group':{'_id':_0x57b75d(0x14c)}}]),_0x2427c5=await product['find']({}),_0x4f2fb4=await warehouse[_0x57b75d(0x137)]([{'$match':{'name':_0x308fb5[_0x57b75d(0x159)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x57b75d(0x11f),'name':{'$first':_0x57b75d(0x173)},'product_stock':{'$first':_0x57b75d(0x14e)},'bay':{'$first':_0x57b75d(0x1b1)},'bin':{'$first':_0x57b75d(0x136)},'type':{'$first':_0x57b75d(0x142)},'floorlevel':{'$first':_0x57b75d(0x19c)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x57b75d(0x16a)},'product_code':{'$first':_0x57b75d(0x1a0)},'storage':{'$first':_0x57b75d(0x17b)},'rack':{'$first':_0x57b75d(0xf2)},'maxPerUnit':{'$first':_0x57b75d(0x189)},'expiry_date':{'$first':_0x57b75d(0x13a)},'production_date':{'$first':_0x57b75d(0x147)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x57b75d(0x121)}}}]);if(_0x539016[0x0][_0x57b75d(0x1b3)]==_0x57b75d(0x127)){var _0x3cbd88=users[_0x57b75d(0x145)];console[_0x57b75d(0xfd)](_0x3cbd88);}else{if(_0x539016[0x0][_0x57b75d(0x1b3)]=='Hindi')var _0x3cbd88=users[_0x57b75d(0x1b9)];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]==_0x57b75d(0x14a))var _0x3cbd88=users[_0x57b75d(0x14a)];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]=='Spanish')var _0x3cbd88=users[_0x57b75d(0x17e)];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]==_0x57b75d(0x125))var _0x3cbd88=users['French'];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]==_0x57b75d(0x1a8))var _0x3cbd88=users[_0x57b75d(0x1ba)];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]==_0x57b75d(0x193))var _0x3cbd88=users['Chinese'];else{if(_0x539016[0x0][_0x57b75d(0x1b3)]=='Arabic\x20(ae)')var _0x3cbd88=users[_0x57b75d(0x133)];}}}}}}}_0x100c2f[_0x57b75d(0x1a2)]('edit_adjustment_view',{'success':_0x49d4c2[_0x57b75d(0x18a)](_0x57b75d(0x13d)),'errors':_0x49d4c2['flash'](_0x57b75d(0x1a7)),'role':_0x31023a,'profile':_0x498948,'adjustment':_0x308fb5,'stock':_0x4f2fb4,'master_shop':_0x539016,'warehouse_name':_0x522c13,'unit':_0x2427c5,'language':_0x3cbd88});}catch(_0x2ddecf){console[_0x57b75d(0xfd)](_0x2ddecf),_0x100c2f[_0x57b75d(0x179)](0xc8)[_0x57b75d(0x13e)]({'message':_0x2ddecf['message']});}}),router[a0_0x4812d7(0x17a)](a0_0x4812d7(0x181),auth,async(_0x1c6ddf,_0x255d9b)=>{var _0x33366e=a0_0x4812d7;try{const _0x358cfc=_0x1c6ddf[_0x33366e(0x10e)]['id'],{warehouse_name:_0x41875b,Room_name:_0x847ef3}=_0x1c6ddf[_0x33366e(0x118)],_0x266572=await adjustment[_0x33366e(0x162)]({'_id':_0x358cfc}),_0x49f75e=_0x266572[_0x33366e(0x190)][_0x33366e(0x11e)](async _0x5c0d07=>{var _0x5e1499=_0x33366e;if(_0x5c0d07[_0x5e1499(0x17c)]>0x0){var _0x1b76ee=await warehouse['findOne']({'name':_0x41875b,'room':_0x5c0d07[_0x5e1499(0x1bf)],'warehouse_category':'Raw\x20Materials'});const _0x365079=_0x1b76ee[_0x5e1499(0x187)]['map'](_0xe719c2=>{var _0x28413f=_0x5e1499;if(_0x5c0d07['type']=='minus'){if(_0xe719c2[_0x28413f(0x183)]==_0x5c0d07[_0x28413f(0x183)]&&_0xe719c2[_0x28413f(0x11d)]==_0x5c0d07[_0x28413f(0x11d)]&&_0xe719c2[_0x28413f(0x19d)]==_0x5c0d07[_0x28413f(0x19d)]&&_0xe719c2[_0x28413f(0xfc)]==_0x5c0d07[_0x28413f(0xfc)]&&_0xe719c2[_0x28413f(0x12c)]==_0x5c0d07[_0x28413f(0x12c)]&&_0xe719c2['rack']==_0x5c0d07['rack']&&_0xe719c2[_0x28413f(0x156)]==_0x5c0d07['storage']&&_0xe719c2[_0x28413f(0x151)]==_0x5c0d07['expiry_date']&&_0xe719c2['batch_code']==_0x5c0d07['batch_code']&&_0xe719c2[_0x28413f(0x123)]==_0x5c0d07['production_date']&&_0xe719c2[_0x28413f(0x16e)]==_0x5c0d07['invoice']){var _0x3bfe25;_0x3bfe25=_0x5c0d07[_0x28413f(0x17c)],_0x5c0d07[_0x28413f(0x128)]=='S'&&(_0x3bfe25=_0x5c0d07[_0x28413f(0x17c)]),_0xe719c2[_0x28413f(0x16d)]=_0xe719c2[_0x28413f(0x16d)]-_0x3bfe25;}}else{if(_0xe719c2['product_name']==_0x5c0d07[_0x28413f(0x183)]&&_0xe719c2['floorlevel']==_0x5c0d07[_0x28413f(0x11d)]&&_0xe719c2[_0x28413f(0x19d)]==_0x5c0d07[_0x28413f(0x19d)]&&_0xe719c2[_0x28413f(0xfc)]==_0x5c0d07[_0x28413f(0xfc)]&&_0xe719c2[_0x28413f(0x12c)]==_0x5c0d07[_0x28413f(0x12c)]&&_0xe719c2[_0x28413f(0x120)]==_0x5c0d07[_0x28413f(0x120)]&&_0xe719c2['storage']==_0x5c0d07['storage']&&_0xe719c2['expiry_date']==_0x5c0d07['expiry_date']&&_0xe719c2[_0x28413f(0xf0)]==_0x5c0d07[_0x28413f(0xf0)]&&_0xe719c2[_0x28413f(0x123)]==_0x5c0d07[_0x28413f(0x123)]&&_0xe719c2[_0x28413f(0x16e)]==_0x5c0d07[_0x28413f(0x16e)]){console[_0x28413f(0xfd)](_0x5c0d07);var _0x3bfe25;_0x3bfe25=_0x5c0d07['adjust_qty'],_0x5c0d07[_0x28413f(0x128)]=='S'&&(_0x3bfe25=_0x5c0d07['adjust_qty']),console[_0x28413f(0xfd)](_0x3bfe25+'\x20<>\x20'+_0x5c0d07['adjust_qty']+_0x28413f(0x100)+_0xe719c2[_0x28413f(0x1b7)]+_0x28413f(0x100)+_0x5c0d07['prod_cat']),_0xe719c2[_0x28413f(0x16d)]=_0xe719c2[_0x28413f(0x16d)]+_0x3bfe25;}}});}return _0x1b76ee;});Promise[_0x33366e(0xf9)](_0x49f75e)['then'](async _0x5a7849=>{var _0x2a2422=_0x33366e;try{for(const _0x2b5e10 of _0x5a7849){await _0x2b5e10[_0x2a2422(0xf6)]();}_0x266572['finalize']=_0x2a2422(0x154);const _0x585864=await _0x266572['save'](),_0x11f472=await master_shop[_0x2a2422(0x105)](),_0x42a9e8=await email_settings[_0x2a2422(0x150)](),_0x210712=await supervisor_settings[_0x2a2422(0x105)]();var _0x4b3e7b=_0x266572[_0x2a2422(0x190)],_0x5d1786='',_0x4e976c;for(_0x4e976c in _0x4b3e7b){_0x5d1786+=_0x2a2422(0x15e)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c][_0x2a2422(0x183)]+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c][_0x2a2422(0x1b2)]+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c][_0x2a2422(0x17c)]+_0x2a2422(0x1ac)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4b3e7b[_0x4e976c][_0x2a2422(0x10c)]+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c][_0x2a2422(0x197)]+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x266572[_0x2a2422(0x159)]+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c]['room_names']+_0x2a2422(0x1ac)+_0x2a2422(0x186)+_0x4b3e7b[_0x4e976c][_0x2a2422(0x156)]+_0x4b3e7b[_0x4e976c]['rack']+_0x4b3e7b[_0x4e976c][_0x2a2422(0x12c)]+_0x4b3e7b[_0x4e976c][_0x2a2422(0xfc)]+_0x4b3e7b[_0x4e976c]['type'][0x0]+_0x4b3e7b[_0x4e976c]['floorlevel']+_0x2a2422(0x1ac),_0x2a2422(0x157);}let _0x55eda9=nodemailer[_0x2a2422(0x129)]({'host':_0x42a9e8['host'],'port':Number(_0x42a9e8['port']),'secure':![],'auth':{'user':_0x42a9e8[_0x2a2422(0x11a)],'pass':_0x42a9e8[_0x2a2422(0x1c0)]}}),_0x127d34={'from':_0x42a9e8[_0x2a2422(0x11a)],'to':_0x210712[0x0][_0x2a2422(0x18e)],'subject':'Adjustment\x20Mail','attachments':[{'filename':_0x2a2422(0x174),'path':__dirname+'/../public'+_0x2a2422(0x14b)+_0x11f472[0x0][_0x2a2422(0xf1)],'cid':_0x2a2422(0x18b)}],'html':_0x2a2422(0x130)+_0x2a2422(0x163)+'</head><body>'+_0x2a2422(0x124)+_0x2a2422(0x1a4)+_0x2a2422(0x124)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x2a2422(0x15c)+_0x2a2422(0x124)+_0x2a2422(0x13f)+_0x11f472[0x0][_0x2a2422(0x1aa)]+'\x20</h2>'+_0x2a2422(0x15c)+_0x2a2422(0x15c)+'<hr\x20class=\x22my-3\x22>'+_0x2a2422(0x124)+'<h5\x20style=\x22text-align:\x20left;\x22>'+'\x20Order\x20Number\x20:\x20'+_0x266572[_0x2a2422(0x16e)]+'\x20'+_0x2a2422(0x13c)+_0x2a2422(0x168)+_0x266572['date']+'\x20'+_0x2a2422(0x170)+_0x2a2422(0x11c)+_0x2a2422(0x15c)+_0x2a2422(0x107)+_0x2a2422(0x19e)+_0x2a2422(0x15e)+_0x2a2422(0x13b)+_0x2a2422(0x18c)+_0x2a2422(0x195)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x2a2422(0x1b4)+_0x2a2422(0x1ad)+_0x2a2422(0x185)+_0x2a2422(0x146)+_0x2a2422(0x157)+_0x2a2422(0x1be)+_0x2a2422(0x14f)+'\x20'+_0x5d1786+'\x20'+_0x2a2422(0x194)+'</table>'+_0x2a2422(0x124)+_0x2a2422(0x113)+_0x2a2422(0x158)+_0x11f472[0x0][_0x2a2422(0x1aa)]+_0x2a2422(0x11c)+_0x2a2422(0x15c)+'</div>'+_0x2a2422(0x1ab)};_0x55eda9['sendMail'](_0x127d34,function(_0x142dc8,_0x55166a){var _0x1c534d=_0x2a2422;_0x142dc8?(console[_0x1c534d(0xfd)](_0x142dc8),console[_0x1c534d(0xfd)](_0x1c534d(0x192))):console[_0x1c534d(0xfd)](_0x1c534d(0x15b));}),_0x1c6ddf[_0x2a2422(0x18a)]('success',_0x2a2422(0x1af)),_0x255d9b['redirect'](_0x2a2422(0x177)+_0x585864['_id']);}catch(_0x6071fe){console[_0x2a2422(0x102)](_0x6071fe),_0x255d9b[_0x2a2422(0x179)](0x1f4)[_0x2a2422(0x13e)]({'error':_0x2a2422(0x1a1)});}})[_0x33366e(0x12a)](_0x4a622f=>{var _0x2d621c=_0x33366e;console[_0x2d621c(0x102)](_0x4a622f),_0x255d9b[_0x2d621c(0x179)](0x1f4)[_0x2d621c(0x13e)]({'error':'An\x20error\x20occurred.'});});}catch(_0x136f50){console['log'](_0x136f50),_0x255d9b['status'](0xc8)['json']({'message':_0x136f50['message']});}}),router['get'](a0_0x4812d7(0x188),auth,async(_0x4dfb1d,_0xda68e6)=>{var _0x4732bc=a0_0x4812d7;try{const {username:_0x295605,email:_0x20ed1b,role:_0x2db416}=_0x4dfb1d[_0x4732bc(0x112)],_0x2f8efa=_0x4dfb1d['user'],_0x432fe2=await profile[_0x4732bc(0x150)]({'email':_0x2f8efa['email']}),_0x116d7a=await master_shop[_0x4732bc(0x105)](),_0x26c276=_0x4dfb1d['params']['id'],_0x492150=await adjustment[_0x4732bc(0x162)]({'_id':_0x26c276}),_0x22019a=await purchases[_0x4732bc(0x137)]([{'$match':{'warehouse_name':_0x492150['warehouse_name']}},{'$unwind':_0x4732bc(0x131)},{'$group':{'_id':_0x4732bc(0x14c)}}]),_0x358fac=await product[_0x4732bc(0x105)]({}),_0x72e1b=await warehouse[_0x4732bc(0x137)]([{'$match':{'name':_0x492150[_0x4732bc(0x159)]}},{'$unwind':_0x4732bc(0x17f)},{'$group':{'_id':_0x4732bc(0x11f),'name':{'$first':_0x4732bc(0x173)},'product_stock':{'$first':_0x4732bc(0x14e)},'bay':{'$first':_0x4732bc(0x1b1)},'bin':{'$first':_0x4732bc(0x136)},'type':{'$first':_0x4732bc(0x142)},'floorlevel':{'$first':_0x4732bc(0x19c)},'primary_code':{'$first':_0x4732bc(0x116)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4732bc(0x1a0)},'storage':{'$first':_0x4732bc(0x17b)},'rack':{'$first':_0x4732bc(0xf2)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x4732bc(0x13a)},'production_date':{'$first':_0x4732bc(0x147)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x4732bc(0x121)}}}]);let _0x4588a9;if(_0x2f8efa[_0x4732bc(0xf5)]==_0x4732bc(0x1ae)){const _0x274fc8=await staff[_0x4732bc(0x150)]({'email':_0x2f8efa['email']});_0x4588a9=await warehouse[_0x4732bc(0x137)]([{'$match':{'status':_0x4732bc(0x1b6),'name':_0x274fc8[_0x4732bc(0x139)],'warehouse_category':_0x4732bc(0x16b),'name':{'$ne':_0x4732bc(0x18f)}}},{'$group':{'_id':_0x4732bc(0x148),'name':{'$first':_0x4732bc(0x148)}}}]);}else _0x4588a9=await warehouse[_0x4732bc(0x137)]([{'$match':{'status':'Enabled','warehouse_category':_0x4732bc(0x16b),'name':{'$ne':_0x4732bc(0x18f)}}},{'$group':{'_id':_0x4732bc(0x148),'name':{'$first':_0x4732bc(0x148)}}}]);if(_0x116d7a[0x0][_0x4732bc(0x1b3)]=='English\x20(US)'){var _0x492e8d=users[_0x4732bc(0x145)];console[_0x4732bc(0xfd)](_0x492e8d);}else{if(_0x116d7a[0x0][_0x4732bc(0x1b3)]==_0x4732bc(0x1b9))var _0x492e8d=users[_0x4732bc(0x1b9)];else{if(_0x116d7a[0x0][_0x4732bc(0x1b3)]==_0x4732bc(0x14a))var _0x492e8d=users[_0x4732bc(0x14a)];else{if(_0x116d7a[0x0][_0x4732bc(0x1b3)]=='Spanish')var _0x492e8d=users[_0x4732bc(0x17e)];else{if(_0x116d7a[0x0]['language']=='French')var _0x492e8d=users['French'];else{if(_0x116d7a[0x0]['language']==_0x4732bc(0x1a8))var _0x492e8d=users['Portuguese'];else{if(_0x116d7a[0x0][_0x4732bc(0x1b3)]==_0x4732bc(0x193))var _0x492e8d=users[_0x4732bc(0x193)];else{if(_0x116d7a[0x0][_0x4732bc(0x1b3)]==_0x4732bc(0x119))var _0x492e8d=users['Arabic'];}}}}}}}_0xda68e6[_0x4732bc(0x1a2)]('edit_adjustment',{'success':_0x4dfb1d[_0x4732bc(0x18a)](_0x4732bc(0x13d)),'errors':_0x4dfb1d[_0x4732bc(0x18a)](_0x4732bc(0x1a7)),'role':_0x2f8efa,'profile':_0x432fe2,'adjustment':_0x492150,'stock':_0x72e1b,'master_shop':_0x116d7a,'warehouse_name':_0x22019a,'unit':_0x358fac,'language':_0x492e8d,'warehouse':_0x4588a9});}catch(_0x10fcf2){console[_0x4732bc(0xfd)](_0x10fcf2),_0xda68e6[_0x4732bc(0x179)](0xc8)['json']({'message':_0x10fcf2[_0x4732bc(0x19a)]});}}),router[a0_0x4812d7(0x17a)](a0_0x4812d7(0x188),auth,async(_0x2baf52,_0x45ae1b)=>{var _0x51d6cc=a0_0x4812d7;try{const _0x342298=_0x2baf52[_0x51d6cc(0x10e)]['id'],_0x1a2db4=await adjustment[_0x51d6cc(0x162)]({'_id':_0x342298}),_0x2f2682=await warehouse[_0x51d6cc(0x150)]({'name':_0x1a2db4['warehouse_name'],'room':_0x1a2db4[_0x51d6cc(0x1b8)]}),{warehouse_name:_0x455aa5,date:_0x1f3b94,prod_name:_0x6d54ed,level:_0x3f89c5,isle:_0x186278,pallet:_0x37d48f,stock:_0x4f483f,types:_0x582423,adjust_qty:_0x5915e9,new_adjust_qty:_0xcda2ef,note:_0x27c037,Room_name:_0x231e9b,invoice:_0x1c10b7,JO_number:_0x33b4de,expiry_date:_0x25ec2d}=_0x2baf52[_0x51d6cc(0x118)];if(typeof _0x6d54ed==_0x51d6cc(0x17d))var _0xaecb2b=[_0x2baf52['body'][_0x51d6cc(0xff)]],_0xf9b6ca=[_0x2baf52['body'][_0x51d6cc(0x16c)]],_0x1fc490=[_0x2baf52[_0x51d6cc(0x118)]['stock']],_0x384288=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0xf3)]],_0x5c5fd4=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x19b)]],_0x40fd8b=[_0x2baf52[_0x51d6cc(0x118)]['New_Qty_Converted']],_0x145c7f=[_0x2baf52[_0x51d6cc(0x118)]['Primary_Units']],_0x2675ef=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x1a6)]],_0x2c346a=[_0x2baf52[_0x51d6cc(0x118)]['prod_code']],_0x201526=[_0x2baf52[_0x51d6cc(0x118)]['batch_code']],_0x1aa580=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x151)]],_0x4c4870=[_0x2baf52['body'][_0x51d6cc(0x1a5)]],_0x3ac54f=[_0x2baf52['body'][_0x51d6cc(0x123)]],_0x17e8f0=[_0x2baf52[_0x51d6cc(0x118)]['prod_cat']],_0x1bc2ac=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x16f)]],_0x20914d=[_0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0xef)]],_0x48cc47=[_0x2baf52['body'][_0x51d6cc(0x101)]];else var _0xaecb2b=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0xff)]],_0xf9b6ca=[..._0x2baf52[_0x51d6cc(0x118)]['level']],_0x1fc490=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x12d)]],_0x384288=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0xf3)]],_0x5c5fd4=[..._0x2baf52[_0x51d6cc(0x118)]['New_Qty_Converted_adj']],_0x40fd8b=[..._0x2baf52[_0x51d6cc(0x118)]['New_Qty_Converted']],_0x145c7f=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x10c)]],_0x2675ef=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x1a6)]],_0x2c346a=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x132)]],_0x201526=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0xf0)]],_0x1aa580=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x151)]],_0x4c4870=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x1a5)]],_0x3ac54f=[..._0x2baf52[_0x51d6cc(0x118)]['production_date']],_0x17e8f0=[..._0x2baf52[_0x51d6cc(0x118)]['prod_cat']],_0x1bc2ac=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x16f)]],_0x20914d=[..._0x2baf52['body'][_0x51d6cc(0xef)]],_0x48cc47=[..._0x2baf52[_0x51d6cc(0x118)][_0x51d6cc(0x101)]];const _0x3114c6=_0xaecb2b[_0x51d6cc(0x11e)](_0x5fe642=>{return _0x5fe642={'product_name':_0x5fe642};});_0xf9b6ca[_0x51d6cc(0x114)]((_0x9af8d4,_0xdc4a8b)=>{_0x1bc2ac['forEach']((_0x25c814,_0xa40d2a)=>{var _0xc60536=a0_0x2d3d;if(_0x25c814==_0xc60536(0x15a)&&_0xdc4a8b==_0xa40d2a){var _0x1b1b2a=_0x9af8d4[_0xc60536(0x109)](0x3);_0x3114c6[_0xdc4a8b]['storage']=_0x9af8d4[0x0],_0x3114c6[_0xdc4a8b][_0xc60536(0x120)]=_0x9af8d4[0x1],_0x3114c6[_0xdc4a8b][_0xc60536(0x12c)]=0x0,_0x3114c6[_0xdc4a8b][_0xc60536(0xfc)]=0x0,_0x3114c6[_0xdc4a8b][_0xc60536(0x19d)]='Floor',_0x3114c6[_0xdc4a8b][_0xc60536(0x11d)]=_0x1b1b2a;}else{if(_0x25c814==_0xc60536(0xf7)&&_0xdc4a8b==_0xa40d2a){var _0x1b1b2a=_0x9af8d4['slice'](0x3);_0x3114c6[_0xdc4a8b][_0xc60536(0x156)]=_0x9af8d4[0x0],_0x3114c6[_0xdc4a8b][_0xc60536(0x120)]=_0x9af8d4[0x1],_0x3114c6[_0xdc4a8b][_0xc60536(0x12c)]=0x0,_0x3114c6[_0xdc4a8b][_0xc60536(0xfc)]=0x0,_0x3114c6[_0xdc4a8b][_0xc60536(0x19d)]=_0xc60536(0x161),_0x3114c6[_0xdc4a8b]['floorlevel']=_0x9af8d4[0x5];}else{if(_0xdc4a8b==_0xa40d2a){var _0x1d5da9;if(_0x9af8d4[0x4]=='L')_0x1d5da9=_0xc60536(0x104);else _0x9af8d4[0x4]=='F'&&(_0x1d5da9=_0xc60536(0x161));_0x3114c6[_0xdc4a8b]['storage']=_0x9af8d4[0x0],_0x3114c6[_0xdc4a8b][_0xc60536(0x120)]=_0x9af8d4[0x1],_0x3114c6[_0xdc4a8b]['bay']=_0x9af8d4[0x2],_0x3114c6[_0xdc4a8b]['bin']=_0x9af8d4[0x3],_0x3114c6[_0xdc4a8b][_0xc60536(0x19d)]=_0x1d5da9,_0x3114c6[_0xdc4a8b][_0xc60536(0x11d)]=_0x9af8d4[0x5];}}}});}),_0x1fc490[_0x51d6cc(0x114)]((_0x1c758b,_0x27c2bd)=>{_0x3114c6[_0x27c2bd]['stockBefore']=_0x1c758b;}),_0x384288[_0x51d6cc(0x114)]((_0x46c4ef,_0x3e3621)=>{var _0x2f8cc6=_0x51d6cc;_0x3114c6[_0x3e3621][_0x2f8cc6(0xf3)]=_0x46c4ef;}),_0x5c5fd4[_0x51d6cc(0x114)]((_0x593752,_0x51c989)=>{var _0x3609b5=_0x51d6cc;_0x3114c6[_0x51c989][_0x3609b5(0x17c)]=_0x593752;}),_0x40fd8b[_0x51d6cc(0x114)]((_0x5a460a,_0x4388b0)=>{var _0x478a07=_0x51d6cc;_0x3114c6[_0x4388b0][_0x478a07(0x155)]=_0x5a460a;}),_0x145c7f[_0x51d6cc(0x114)]((_0x291195,_0x1314e5)=>{var _0x31e794=_0x51d6cc;_0x3114c6[_0x1314e5][_0x31e794(0x10c)]=_0x291195;}),_0x2675ef[_0x51d6cc(0x114)]((_0x4bd7bc,_0x1d39d4)=>{var _0x564c72=_0x51d6cc;_0x3114c6[_0x1d39d4][_0x564c72(0x197)]=_0x4bd7bc;}),_0x2c346a[_0x51d6cc(0x114)]((_0x4f0e9d,_0x4ebaf4)=>{var _0x83aa1a=_0x51d6cc;_0x3114c6[_0x4ebaf4][_0x83aa1a(0x1b2)]=_0x4f0e9d;}),_0x201526[_0x51d6cc(0x114)]((_0x54867a,_0x3982db)=>{var _0x3d0fde=_0x51d6cc;_0x3114c6[_0x3982db][_0x3d0fde(0xf0)]=_0x54867a;}),_0x1aa580[_0x51d6cc(0x114)]((_0x27f69f,_0x2eec09)=>{var _0x397faa=_0x51d6cc;_0x3114c6[_0x2eec09][_0x397faa(0x151)]=_0x27f69f;}),_0x4c4870[_0x51d6cc(0x114)]((_0x1f899e,_0x4e7f43)=>{var _0x2ddcab=_0x51d6cc;_0x3114c6[_0x4e7f43][_0x2ddcab(0x182)]=_0x1f899e;}),_0x3ac54f[_0x51d6cc(0x114)]((_0x17bff0,_0x190328)=>{var _0x2e9cd1=_0x51d6cc;_0x3114c6[_0x190328][_0x2e9cd1(0x123)]=_0x17bff0;}),_0x17e8f0[_0x51d6cc(0x114)]((_0x175384,_0xb8821b)=>{var _0xf3d858=_0x51d6cc;_0x3114c6[_0xb8821b][_0xf3d858(0x128)]=_0x175384;}),_0x1bc2ac[_0x51d6cc(0x114)]((_0xc327a4,_0x25fa42)=>{var _0xcafeb6=_0x51d6cc;_0x3114c6[_0x25fa42][_0xcafeb6(0x1bf)]=_0xc327a4;}),_0x20914d[_0x51d6cc(0x114)]((_0xd5c98b,_0x26389d)=>{var _0x384a00=_0x51d6cc;_0x3114c6[_0x26389d][_0x384a00(0x1bb)]=_0xd5c98b;}),_0x48cc47[_0x51d6cc(0x114)]((_0x10ae6b,_0x1334ee)=>{var _0x551027=_0x51d6cc;_0x3114c6[_0x1334ee][_0x551027(0x126)]=_0x10ae6b;});const _0x3d0aa3=_0x3114c6[_0x51d6cc(0x12f)](_0x183d6e=>_0x183d6e['adjust_qty']!=='0'&&_0x183d6e[_0x51d6cc(0x17c)]!=='');var _0x3162a3=0x0;_0x3d0aa3['forEach'](_0xfa0d30=>{var _0x274586=_0x51d6cc;console[_0x274586(0xfd)](_0x274586(0x15f),_0xfa0d30),parseInt(_0xfa0d30[_0x274586(0x17c)])<=0x0&&_0x3162a3++;});if(_0x3162a3!=0x0)return _0x2baf52[_0x51d6cc(0x18a)]('errors',_0x51d6cc(0x111)),_0x45ae1b[_0x51d6cc(0x19f)](_0x51d6cc(0x178));_0x1a2db4[_0x51d6cc(0x159)]=_0x455aa5,_0x1a2db4[_0x51d6cc(0x180)]=_0x1f3b94,_0x1a2db4['product']=_0x3d0aa3,_0x1a2db4[_0x51d6cc(0x1a3)]=_0x27c037,_0x1a2db4[_0x51d6cc(0x16e)]=_0x1c10b7,_0x1a2db4['isAllowEdit']=_0x51d6cc(0x191);const _0xfc78e5=await _0x1a2db4[_0x51d6cc(0xf6)]();_0x2baf52[_0x51d6cc(0x18a)](_0x51d6cc(0x13d),_0x51d6cc(0x103)),_0x45ae1b['redirect']('/adjustment/view');}catch(_0x2becb6){console[_0x51d6cc(0xfd)](_0x2becb6);}}),router['post']('/barcode_scanner',async(_0x2027a6,_0x50bbde)=>{var _0x465b59=a0_0x4812d7;const {primary_code:_0x5e9e82,warehouse_data:_0x23d2b8,rooms_data:_0x2262ca,Roomslist:_0x33e031}=_0x2027a6['body'],_0x558999=_0x33e031[_0x465b59(0x1a9)](','),_0x4d1a66=[];async function _0x502fa8(_0x2db120){var _0x12ca78=_0x465b59;const _0x24a348=await warehouse[_0x12ca78(0x137)]([{'$match':{'name':_0x23d2b8,'room':_0x2db120}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x5e9e82}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x12ca78(0x173)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x12ca78(0x1a0)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x12ca78(0x136)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x12ca78(0x19c)},'unit':{'$first':_0x12ca78(0xfa)},'secondary_unit':{'$first':_0x12ca78(0x172)},'storage':{'$first':_0x12ca78(0x17b)},'rack':{'$first':_0x12ca78(0xf2)},'expiry_date':{'$first':_0x12ca78(0x13a)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x12ca78(0x166)},'product_cat':{'$first':_0x12ca78(0x1bd)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x12ca78(0x121)}}}]),_0xb98e7=await warehouse[_0x12ca78(0x137)]([{'$match':{'name':_0x23d2b8,'room':_0x2db120}},{'$unwind':_0x12ca78(0x17f)},{'$match':{'product_details.secondary_code':_0x5e9e82}},{'$group':{'_id':_0x12ca78(0x11f),'name':{'$first':_0x12ca78(0x173)},'product_stock':{'$first':_0x12ca78(0x14e)},'primary_code':{'$first':_0x12ca78(0x116)},'secondary_code':{'$first':_0x12ca78(0x16a)},'product_code':{'$first':_0x12ca78(0x1a0)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x12ca78(0x136)},'type':{'$first':_0x12ca78(0x142)},'pallet':{'$first':_0x12ca78(0x19c)},'unit':{'$first':_0x12ca78(0xfa)},'secondary_unit':{'$first':_0x12ca78(0x172)},'storage':{'$first':_0x12ca78(0x17b)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x12ca78(0x13a)},'production_date':{'$first':_0x12ca78(0x147)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x12ca78(0x1bd)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x12ca78(0x121)}}}]);if(_0x24a348[_0x12ca78(0x10b)]>0x0)_0x4d1a66[_0x12ca78(0x152)](_0x24a348);else _0xb98e7[_0x12ca78(0x10b)]>0x0&&_0x4d1a66[_0x12ca78(0x152)](_0xb98e7);}const _0x1ff652=_0x558999[_0x465b59(0x11e)](_0x33ad11=>_0x502fa8(_0x33ad11));await Promise[_0x465b59(0xf9)](_0x1ff652),_0x50bbde[_0x465b59(0x13e)](_0x4d1a66);}),router['post']('/CheckingWarehouse',async(_0xf5515f,_0x1489bf)=>{var _0x7ba71=a0_0x4812d7;const {primaryCode:_0x24a62a,secondaryCode:_0x411d31,productCode:_0x53bc96,level:_0x302a22,isle:_0x553e40,pallet:_0x202d25,warehouses:_0x4892e1,room:_0x1fa632}=_0xf5515f[_0x7ba71(0x118)];try{const _0x5940f6=await warehouse[_0x7ba71(0x137)]([{'$match':{'name':_0x4892e1,'room':_0x1fa632}},{'$unwind':_0x7ba71(0x17f)},{'$match':{'product_details.level':parseInt(_0x302a22),'product_details.isle':_0x553e40,'product_details.pallet':parseInt(_0x202d25)}},{'$group':{'_id':_0x7ba71(0x11f),'name':{'$first':_0x7ba71(0x173)},'product_stock':{'$first':_0x7ba71(0x14e)},'level':{'$first':_0x7ba71(0x135)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x7ba71(0x138)},'maxProducts':{'$first':_0x7ba71(0x117)}}}]);_0x1489bf['status'](0xc8)[_0x7ba71(0x13e)](_0x5940f6);}catch(_0x25ee25){_0x1489bf[_0x7ba71(0x179)](0x194)[_0x7ba71(0x13e)]({'message':_0x25ee25['message']});}}),module['exports']=router;