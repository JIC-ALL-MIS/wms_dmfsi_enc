function a0_0x5479(){var _0x81c4e4=['$product.product_name','prod_code','bin','266HPKtSR','adjustment\x20Finalized\x20successfully','14798311AMemtc','New_Qty_Converted','Chinese','second1','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','redirect','$product_details.storage','message','../middleware/auth','1074ykQvdk','<h5>','$_id','/preview/:id','new_adjust_qty','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</div>','../public/language/languages.json','<hr\x20class=\x22my-3\x22>','post','language','prod_cat','findById','storage','Primary_Units','aggregate','flash','Router','finalize','express','Arabic','107504CImWeV','product_code','German','Floor','string','json','prod_invoice','forEach','$product_details.secondary_code','room_names','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','\x20Order\x20Number\x20:\x20','invoice','810hNrvkT','/barcode_scanner','staff','738490dAFdDO','warehouse_name','$product_details.secondary_unit','body','$product_details.floorlevel','<span\x20style=\x22float:\x20right;\x22>','</body></html>','Receiving\x20Area','<h5\x20style=\x22text-align:\x20left;\x22>','back','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','$product_details.production_date','</thead>','$room','product_details','prod_name','Secondary_units','False','$invoice','<tr>','foreach\x20newproduct','$product_details.maxPerUnit','note','$product_details.expiry_date','log','toString','createTransport','error','maxperunit','edit_adjustment_view','adjust_qty','date','$product_details.level','$product_details.product_stock','Rooms','expiry_date','stockBefore','type','ADJ-','Hindi','floorlevel','<strong>\x20Regards\x20</strong>','$product_details','Logo.png','adjustment\x20data\x20update\x20successfully','Enabled','$product_details.primary_code','get','/adjustment/preview/','room','2020uTqDrb','\x20</h2>','$product_details.isle','filter','product_stock','catch','/view/:id','/view/add_adjustment','New_Qty_Converted_adj','English','Portuguese\x20(BR)','maxPerUnit','product','$product_details.type','prime1','$product.room_names','English\x20(US)','logo','Shelves','_id','Return\x20Goods','production_date','exports','then','/../public','isAllowEdit','stock','Spanish','push','Portuguese','Error\x20Occurs','save','findOne','True','random','user','padStart','$product_details.product_cat','secondary_code','10BZCnOz','adjustment','port','success','secondary_unit','$product_details.unit','errors','<h2>\x20','nodemailer','slice','</head><body>','An\x20error\x20occurred.','password','email','4496886UfedXx','$product_details.pallet','<!DOCTYPE\x20html>','$isAllowEdit','<html><head><title></title>','Level','</tbody>','render','types','../models/all_models','adjustment\x20add\x20successfull','Return\x20Rooms','$product_details.bin','Arabic\x20(ae)','unit','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','$product_details.product_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','</h5>','Enclosed','French','bay','</td>','role','2237838mVKuPv','Raw\x20Materials','max_per_unit','all','$product_details.product_name','level','primary_code','\x20<>\x20','Adjustment\x20Mail','$product_details.maxProducts','master','$product_details.bay','$product','/view','$product_details._id','</span>','product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','$name','RMSEmail','<table\x20style=\x22width:\x20100%\x20!important;\x22>','rack','status','minus','<div>','$product_details.rack','batch_code','1220LqGEYC','site_title','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','$product_details.batch_code','warehouse','length','params','Ambient','find','split','map','/upload/'];a0_0x5479=function(){return _0x81c4e4;};return a0_0x5479();}var a0_0x3901e7=a0_0x2982;(function(_0x5aa218,_0x121953){var _0xd0ac63=a0_0x2982,_0x35183f=_0x5aa218();while(!![]){try{var _0x37bb92=parseInt(_0xd0ac63(0x171))/0x1*(parseInt(_0xd0ac63(0x18b))/0x2)+parseInt(_0xd0ac63(0x1af))/0x3*(-parseInt(_0xd0ac63(0x1e4))/0x4)+parseInt(_0xd0ac63(0x1b2))/0x5+parseInt(_0xd0ac63(0x156))/0x6+parseInt(_0xd0ac63(0x180))/0x7*(parseInt(_0xd0ac63(0x1a2))/0x8)+parseInt(_0xd0ac63(0x13e))/0x9+-parseInt(_0xd0ac63(0x130))/0xa*(parseInt(_0xd0ac63(0x182))/0xb);if(_0x37bb92===_0x121953)break;else _0x35183f['push'](_0x35183f['shift']());}catch(_0x443518){_0x35183f['push'](_0x35183f['shift']());}}}(a0_0x5479,0xabfca));const express=require(a0_0x3901e7(0x1a0)),app=express(),router=express[a0_0x3901e7(0x19e)](),auth=require(a0_0x3901e7(0x18a)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x3901e7(0x147)),users=require(a0_0x3901e7(0x194)),nodemailer=require(a0_0x3901e7(0x138));router[a0_0x3901e7(0x1e1)](a0_0x3901e7(0x163),auth,async(_0x2cb257,_0x2ab206)=>{var _0x29a2f5=a0_0x3901e7;try{const {username:_0x5e5cb6,email:_0x1a4fb7,role:_0x1c25ad}=_0x2cb257['user'],_0x1dbdd3=_0x2cb257[_0x29a2f5(0x12c)],_0x47d894=await profile[_0x29a2f5(0x129)]({'email':_0x1dbdd3['email']}),_0x220a79=await master_shop['find']();console[_0x29a2f5(0x1ca)](_0x29a2f5(0x160),_0x220a79);let _0x2fe4dc;if(_0x1dbdd3[_0x29a2f5(0x155)]==_0x29a2f5(0x1b1)){const _0x2d47b8=await staff[_0x29a2f5(0x129)]({'email':_0x1dbdd3[_0x29a2f5(0x13d)]});_0x2fe4dc=await warehouse['find']({'status':'Enabled','name':_0x2d47b8[_0x29a2f5(0x175)]});}else _0x2fe4dc=await warehouse[_0x29a2f5(0x179)]({'status':_0x29a2f5(0x1df)});const _0x16456d=await product['find']();let _0x7b33ba;if(_0x1dbdd3[_0x29a2f5(0x155)]==_0x29a2f5(0x1b1)){const _0xce625a=await staff[_0x29a2f5(0x129)]({'email':_0x1dbdd3[_0x29a2f5(0x13d)]});_0x7b33ba=await adjustment[_0x29a2f5(0x179)]({'warehouse_name':_0xce625a[_0x29a2f5(0x175)]});}else _0x7b33ba=await adjustment[_0x29a2f5(0x19c)]([{'$unwind':_0x29a2f5(0x162)},{'$group':{'_id':_0x29a2f5(0x18d),'invoice':{'$first':_0x29a2f5(0x1c4)},'date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':_0x29a2f5(0x1f3)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x29a2f5(0x141)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x220a79[0x0]['language']=='English\x20(US)'){var _0x248266=users['English'];console['log'](_0x248266);}else{if(_0x220a79[0x0][_0x29a2f5(0x197)]=='Hindi')var _0x248266=users[_0x29a2f5(0x1d9)];else{if(_0x220a79[0x0][_0x29a2f5(0x197)]==_0x29a2f5(0x1a4))var _0x248266=users[_0x29a2f5(0x1a4)];else{if(_0x220a79[0x0][_0x29a2f5(0x197)]=='Spanish')var _0x248266=users[_0x29a2f5(0x124)];else{if(_0x220a79[0x0][_0x29a2f5(0x197)]==_0x29a2f5(0x152))var _0x248266=users[_0x29a2f5(0x152)];else{if(_0x220a79[0x0]['language']==_0x29a2f5(0x1ee))var _0x248266=users[_0x29a2f5(0x126)];else{if(_0x220a79[0x0][_0x29a2f5(0x197)]==_0x29a2f5(0x184))var _0x248266=users[_0x29a2f5(0x184)];else{if(_0x220a79[0x0][_0x29a2f5(0x197)]=='Arabic\x20(ae)')var _0x248266=users[_0x29a2f5(0x1a1)];}}}}}}}_0x2ab206[_0x29a2f5(0x145)](_0x29a2f5(0x131),{'success':_0x2cb257['flash'](_0x29a2f5(0x133)),'errors':_0x2cb257[_0x29a2f5(0x19d)]('errors'),'role':_0x1dbdd3,'profile':_0x47d894,'warehouse':_0x2fe4dc,'product':_0x16456d,'adjustment':_0x7b33ba,'master_shop':_0x220a79,'language':_0x248266});}catch(_0x2b26fb){console['log'](_0x2b26fb);}});function a0_0x2982(_0x222aa8,_0x1a82b0){var _0x5479f1=a0_0x5479();return a0_0x2982=function(_0x29825c,_0x106db8){_0x29825c=_0x29825c-0x122;var _0x607cb5=_0x5479f1[_0x29825c];return _0x607cb5;},a0_0x2982(_0x222aa8,_0x1a82b0);}async function getRandom8DigitNumber(){var _0x28b731=a0_0x3901e7;const _0x5b61c2=0x989680,_0x20956a=0x5f5e0ff,_0x23b9ec=Math['floor'](Math[_0x28b731(0x12b)]()*(_0x20956a-_0x5b61c2+0x1))+_0x5b61c2;var _0x40c6f2;const _0x145370=await adjustment[_0x28b731(0x129)]({'invoice':_0x28b731(0x1d8)+_0x23b9ec});return _0x145370&&_0x145370[_0x28b731(0x176)]>0x0?_0x40c6f2='ADJ-'+_0x23b9ec:_0x40c6f2=_0x28b731(0x1d8)+_0x23b9ec,_0x40c6f2;}router['get']('/view/add_adjustment',auth,async(_0x17f400,_0x3867dc)=>{var _0x263cf3=a0_0x3901e7;try{const {username:_0x1988a1,email:_0x45532d,role:_0x58f467}=_0x17f400[_0x263cf3(0x12c)],_0x111a77=_0x17f400['user'],_0x4c84c1=await profile['findOne']({'email':_0x111a77[_0x263cf3(0x13d)]}),_0x3224dc=await master_shop[_0x263cf3(0x179)]();let _0x4a9b55;if(_0x111a77[_0x263cf3(0x155)]==_0x263cf3(0x1b1)){const _0x35d259=await staff[_0x263cf3(0x129)]({'email':_0x111a77['email']});_0x4a9b55=await warehouse[_0x263cf3(0x19c)]([{'$match':{'status':_0x263cf3(0x1df),'name':_0x35d259[_0x263cf3(0x175)],'warehouse_category':_0x263cf3(0x157),'name':{'$ne':_0x263cf3(0x1f8)}}},{'$group':{'_id':_0x263cf3(0x168),'name':{'$first':_0x263cf3(0x168)}}}]);}else _0x4a9b55=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials','name':{'$ne':_0x263cf3(0x1f8)}}},{'$group':{'_id':_0x263cf3(0x168),'name':{'$first':_0x263cf3(0x168)}}}]);const _0x669a6=await product[_0x263cf3(0x179)]({}),_0x9992f8=await adjustment['find']({}),_0x429711=_0x9992f8['length']+0x1,_0x5241ce=_0x263cf3(0x1d8)+_0x429711[_0x263cf3(0x1cb)]()[_0x263cf3(0x12d)](0x5,'0');var _0x3a62f2=[_0x263cf3(0x178),_0x263cf3(0x151),_0x263cf3(0x149)];if(_0x3224dc[0x0]['language']==_0x263cf3(0x1f4))var _0xc9fea8=users[_0x263cf3(0x1ed)];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]==_0x263cf3(0x1d9))var _0xc9fea8=users['Hindi'];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]==_0x263cf3(0x1a4))var _0xc9fea8=users['German'];else{if(_0x3224dc[0x0]['language']==_0x263cf3(0x124))var _0xc9fea8=users[_0x263cf3(0x124)];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]==_0x263cf3(0x152))var _0xc9fea8=users[_0x263cf3(0x152)];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]=='Portuguese\x20(BR)')var _0xc9fea8=users[_0x263cf3(0x126)];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]=='Chinese')var _0xc9fea8=users[_0x263cf3(0x184)];else{if(_0x3224dc[0x0][_0x263cf3(0x197)]==_0x263cf3(0x14b))var _0xc9fea8=users[_0x263cf3(0x1a1)];}}}}}}}const _0x4058f5=getRandom8DigitNumber();_0x4058f5[_0x263cf3(0x1fb)](_0x15ee28=>{var _0x256964=_0x263cf3;_0x3867dc['render']('add_adjustment',{'success':_0x17f400[_0x256964(0x19d)](_0x256964(0x133)),'errors':_0x17f400[_0x256964(0x19d)](_0x256964(0x136)),'role':_0x111a77,'profile':_0x4c84c1,'warehouse':_0x4a9b55,'product':_0x669a6,'master_shop':_0x3224dc,'language':_0xc9fea8,'rooms_data':_0x3a62f2,'invoice_no':_0x15ee28});})['catch'](_0xa2204=>{var _0x419526=_0x263cf3;_0x17f400[_0x419526(0x19d)](_0x419526(0x136),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x3867dc[_0x419526(0x187)]('/adjustment/view');});}catch(_0x3ba614){console[_0x263cf3(0x1ca)](_0x3ba614);}}),router[a0_0x3901e7(0x196)](a0_0x3901e7(0x1eb),auth,async(_0x3f7502,_0x1e4134)=>{var _0x39e344=a0_0x3901e7;try{const {warehouse_name:_0x4250e5,date:_0x481bc0,prod_name:_0x581f51,level:_0xe26d58,isle:_0x3d5be2,pallet:_0x23a86c,stock:_0x50e2da,types:_0x549ea5,adjust_qty:_0x1282cd,new_adjust_qty:_0x36d435,note:_0x5ee53d,Room_name:_0xc00ce,invoice:_0x156aae,JO_number:_0x362d2a,expiry_date:_0x21708d}=_0x3f7502['body'];if(typeof _0x581f51==_0x39e344(0x1a6))var _0x4f50ab=[_0x3f7502['body'][_0x39e344(0x1c1)]],_0x230a73=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x15b)]],_0x4e1e80=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x123)]],_0x457ef8=[_0x3f7502[_0x39e344(0x1b5)]['types']],_0x5d9d75=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1ec)]],_0x34d83b=[_0x3f7502[_0x39e344(0x1b5)]['New_Qty_Converted']],_0x3051f7=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x19b)]],_0xaacb29=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1c2)]],_0x3e8dff=[_0x3f7502['body'][_0x39e344(0x17e)]],_0x15f6f1=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x170)]],_0x20241b=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1d5)]],_0x4388df=[_0x3f7502[_0x39e344(0x1b5)]['max_per_unit']],_0x468064=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1f9)]],_0x4e4f3a=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x198)]],_0x241223=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1d4)]],_0x122781=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1f2)]],_0x8ddfe4=[_0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x185)]],_0x2e3dfa=[_0x3f7502['body']['prod_invoice']];else var _0x4f50ab=[..._0x3f7502[_0x39e344(0x1b5)]['prod_name']],_0x230a73=[..._0x3f7502[_0x39e344(0x1b5)]['level']],_0x4e1e80=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x123)]],_0x457ef8=[..._0x3f7502[_0x39e344(0x1b5)]['types']],_0x5d9d75=[..._0x3f7502['body']['New_Qty_Converted_adj']],_0x34d83b=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x183)]],_0x3051f7=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x14c)]],_0xaacb29=[..._0x3f7502['body'][_0x39e344(0x1c2)]],_0x3e8dff=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x17e)]],_0x15f6f1=[..._0x3f7502['body']['batch_code']],_0x20241b=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1d5)]],_0x4388df=[..._0x3f7502[_0x39e344(0x1b5)]['max_per_unit']],_0x468064=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x1f9)]],_0x4e4f3a=[..._0x3f7502['body']['prod_cat']],_0x241223=[..._0x3f7502['body']['Rooms']],_0x122781=[..._0x3f7502[_0x39e344(0x1b5)]['prime1']],_0x8ddfe4=[..._0x3f7502[_0x39e344(0x1b5)][_0x39e344(0x185)]],_0x2e3dfa=[..._0x3f7502['body'][_0x39e344(0x1a8)]];const _0x403ed3=_0x4f50ab['map'](_0x2a5649=>{return _0x2a5649={'product_name':_0x2a5649};});_0x230a73['forEach']((_0xa870df,_0xc8d178)=>{var _0x23a0ee=_0x39e344;_0x241223[_0x23a0ee(0x1a9)]((_0xd277a8,_0x202c22)=>{var _0x22b04c=_0x23a0ee;if(_0xd277a8==_0x22b04c(0x1b9)&&_0xc8d178==_0x202c22){var _0x603440=_0xa870df[_0x22b04c(0x139)](0x3);_0x403ed3[_0xc8d178][_0x22b04c(0x19a)]=_0xa870df[0x0],_0x403ed3[_0xc8d178][_0x22b04c(0x16b)]=_0xa870df[0x1],_0x403ed3[_0xc8d178][_0x22b04c(0x153)]=0x0,_0x403ed3[_0xc8d178][_0x22b04c(0x17f)]=0x0,_0x403ed3[_0xc8d178][_0x22b04c(0x1d7)]=_0x22b04c(0x1a5),_0x403ed3[_0xc8d178][_0x22b04c(0x1da)]=_0x603440;}else{if(_0xd277a8==_0x22b04c(0x1f6)&&_0xc8d178==_0x202c22){var _0x603440=_0xa870df[_0x22b04c(0x139)](0x3);_0x403ed3[_0xc8d178][_0x22b04c(0x19a)]=_0xa870df[0x0],_0x403ed3[_0xc8d178][_0x22b04c(0x16b)]=_0xa870df[0x1],_0x403ed3[_0xc8d178][_0x22b04c(0x153)]=0x0,_0x403ed3[_0xc8d178][_0x22b04c(0x17f)]=0x0,_0x403ed3[_0xc8d178]['type']=_0x22b04c(0x1a5),_0x403ed3[_0xc8d178][_0x22b04c(0x1da)]=_0xa870df[0x5];}else{if(_0xc8d178==_0x202c22){var _0x5317ac;if(_0xa870df[0x4]=='L')_0x5317ac=_0x22b04c(0x143);else _0xa870df[0x4]=='F'&&(_0x5317ac=_0x22b04c(0x1a5));_0x403ed3[_0xc8d178][_0x22b04c(0x19a)]=_0xa870df[0x0],_0x403ed3[_0xc8d178][_0x22b04c(0x16b)]=_0xa870df[0x1],_0x403ed3[_0xc8d178][_0x22b04c(0x153)]=_0xa870df[0x2],_0x403ed3[_0xc8d178][_0x22b04c(0x17f)]=_0xa870df[0x3],_0x403ed3[_0xc8d178][_0x22b04c(0x1d7)]=_0x5317ac,_0x403ed3[_0xc8d178][_0x22b04c(0x1da)]=_0xa870df[0x5];}}}});}),_0x4e1e80[_0x39e344(0x1a9)]((_0x36212d,_0x90755)=>{var _0x4c05d7=_0x39e344;_0x403ed3[_0x90755][_0x4c05d7(0x1d6)]=_0x36212d;}),_0x457ef8[_0x39e344(0x1a9)]((_0x335b24,_0x122e06)=>{var _0xfd8262=_0x39e344;_0x403ed3[_0x122e06][_0xfd8262(0x146)]=_0x335b24;}),_0x5d9d75[_0x39e344(0x1a9)]((_0x5b36b3,_0x327be7)=>{var _0x4eeda6=_0x39e344;_0x403ed3[_0x327be7][_0x4eeda6(0x1d0)]=_0x5b36b3;}),_0x34d83b[_0x39e344(0x1a9)]((_0x76d4fc,_0x1583fd)=>{var _0x41bf35=_0x39e344;_0x403ed3[_0x1583fd][_0x41bf35(0x18f)]=_0x76d4fc;}),_0x3051f7[_0x39e344(0x1a9)]((_0x579708,_0x1f850b)=>{var _0x5f32ce=_0x39e344;_0x403ed3[_0x1f850b][_0x5f32ce(0x14c)]=_0x579708;}),_0xaacb29[_0x39e344(0x1a9)]((_0x55a1a1,_0x56d51f)=>{var _0x266138=_0x39e344;_0x403ed3[_0x56d51f][_0x266138(0x134)]=_0x55a1a1;}),_0x3e8dff[_0x39e344(0x1a9)]((_0x5ada64,_0x562c4c)=>{var _0x38a66f=_0x39e344;_0x403ed3[_0x562c4c][_0x38a66f(0x1a3)]=_0x5ada64;}),_0x15f6f1['forEach']((_0x4f303a,_0xf45284)=>{_0x403ed3[_0xf45284]['batch_code']=_0x4f303a;}),_0x20241b['forEach']((_0x22bf61,_0x46610e)=>{var _0x132efb=_0x39e344;_0x403ed3[_0x46610e][_0x132efb(0x1d5)]=_0x22bf61;}),_0x4388df['forEach']((_0x26ab45,_0x59af91)=>{var _0x2acd20=_0x39e344;_0x403ed3[_0x59af91][_0x2acd20(0x1ce)]=_0x26ab45;}),_0x468064[_0x39e344(0x1a9)]((_0x24ad35,_0x2729e4)=>{var _0x5f200a=_0x39e344;_0x403ed3[_0x2729e4][_0x5f200a(0x1f9)]=_0x24ad35;}),_0x4e4f3a['forEach']((_0x1d812a,_0x2ef699)=>{var _0x2dfe2f=_0x39e344;_0x403ed3[_0x2ef699][_0x2dfe2f(0x198)]=_0x1d812a;}),_0x241223[_0x39e344(0x1a9)]((_0x15e99e,_0x1760da)=>{var _0x231283=_0x39e344;_0x403ed3[_0x1760da][_0x231283(0x1ab)]=_0x15e99e;}),_0x122781['forEach']((_0x1065cb,_0x591973)=>{var _0x407ca2=_0x39e344;_0x403ed3[_0x591973][_0x407ca2(0x15c)]=_0x1065cb;}),_0x8ddfe4['forEach']((_0x2fe097,_0xecdd1a)=>{var _0x20b9db=_0x39e344;_0x403ed3[_0xecdd1a][_0x20b9db(0x12f)]=_0x2fe097;}),_0x2e3dfa['forEach']((_0x5b372b,_0xe276c2)=>{_0x403ed3[_0xe276c2]['invoice']=_0x5b372b;});const _0x45e10f=_0x403ed3[_0x39e344(0x1e7)](_0x3b86b2=>_0x3b86b2['adjust_qty']!=='0'&&_0x3b86b2[_0x39e344(0x1d0)]!=='');var _0xeb4d42=0x0;_0x45e10f[_0x39e344(0x1a9)](_0x5aafd5=>{var _0x27b759=_0x39e344;console[_0x27b759(0x1ca)]('foreach\x20newproduct',_0x5aafd5),parseInt(_0x5aafd5[_0x27b759(0x1d0)])<=0x0&&_0xeb4d42++;});if(_0xeb4d42!=0x0)return _0x3f7502[_0x39e344(0x19d)](_0x39e344(0x136),_0x39e344(0x1bc)),_0x1e4134[_0x39e344(0x187)](_0x39e344(0x1bb));const _0xec62f5=new adjustment({'warehouse_name':_0x4250e5,'date':_0x481bc0,'product':_0x45e10f,'note':_0x5ee53d,'room':_0xc00ce,'invoice':_0x156aae,'JO_number':_0x362d2a,'expiry_date':_0x21708d}),_0x4135ae=await _0xec62f5[_0x39e344(0x128)]();_0x3f7502[_0x39e344(0x19d)]('success',_0x39e344(0x148)),_0x1e4134[_0x39e344(0x187)](_0x39e344(0x1e2)+_0x4135ae[_0x39e344(0x1f7)]);}catch(_0x358129){console['log'](_0x358129),_0x1e4134[_0x39e344(0x16c)](0xc8)[_0x39e344(0x1a7)]({'message':_0x358129[_0x39e344(0x189)]});}}),router[a0_0x3901e7(0x1e1)](a0_0x3901e7(0x18e),auth,async(_0x2f32fe,_0x1b190a)=>{var _0x40f5bf=a0_0x3901e7;try{const {username:_0x30d514,email:_0x5a9c37,role:_0xf5550e}=_0x2f32fe[_0x40f5bf(0x12c)],_0x3351ea=_0x2f32fe['user'],_0x8a7fd4=await profile[_0x40f5bf(0x129)]({'email':_0x3351ea['email']}),_0x2b04ee=await master_shop[_0x40f5bf(0x179)](),_0x5451d0=_0x2f32fe[_0x40f5bf(0x177)]['id'],_0x205493=await adjustment[_0x40f5bf(0x199)]({'_id':_0x5451d0}),_0x2197bc=await purchases[_0x40f5bf(0x19c)]([{'$match':{'warehouse_name':_0x205493[_0x40f5bf(0x1b3)]}},{'$unwind':_0x40f5bf(0x162)},{'$group':{'_id':_0x40f5bf(0x17d)}}]),_0x5e78e3=await product[_0x40f5bf(0x179)]({}),_0x48c50e=await warehouse[_0x40f5bf(0x19c)]([{'$match':{'name':_0x205493[_0x40f5bf(0x1b3)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x40f5bf(0x164),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x40f5bf(0x1d3)},'bay':{'$first':_0x40f5bf(0x161)},'bin':{'$first':_0x40f5bf(0x14a)},'type':{'$first':_0x40f5bf(0x1f1)},'floorlevel':{'$first':_0x40f5bf(0x1b6)},'primary_code':{'$first':_0x40f5bf(0x1e0)},'secondary_code':{'$first':_0x40f5bf(0x1aa)},'product_code':{'$first':_0x40f5bf(0x14e)},'storage':{'$first':_0x40f5bf(0x188)},'rack':{'$first':_0x40f5bf(0x16f)},'maxPerUnit':{'$first':_0x40f5bf(0x1c7)},'expiry_date':{'$first':_0x40f5bf(0x1c9)},'production_date':{'$first':_0x40f5bf(0x1bd)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x40f5bf(0x1bf)}}}]);if(_0x2b04ee[0x0][_0x40f5bf(0x197)]=='English\x20(US)'){var _0x4d808c=users['English'];console['log'](_0x4d808c);}else{if(_0x2b04ee[0x0][_0x40f5bf(0x197)]==_0x40f5bf(0x1d9))var _0x4d808c=users[_0x40f5bf(0x1d9)];else{if(_0x2b04ee[0x0][_0x40f5bf(0x197)]==_0x40f5bf(0x1a4))var _0x4d808c=users[_0x40f5bf(0x1a4)];else{if(_0x2b04ee[0x0]['language']=='Spanish')var _0x4d808c=users[_0x40f5bf(0x124)];else{if(_0x2b04ee[0x0][_0x40f5bf(0x197)]==_0x40f5bf(0x152))var _0x4d808c=users[_0x40f5bf(0x152)];else{if(_0x2b04ee[0x0][_0x40f5bf(0x197)]==_0x40f5bf(0x1ee))var _0x4d808c=users[_0x40f5bf(0x126)];else{if(_0x2b04ee[0x0]['language']=='Chinese')var _0x4d808c=users[_0x40f5bf(0x184)];else{if(_0x2b04ee[0x0][_0x40f5bf(0x197)]==_0x40f5bf(0x14b))var _0x4d808c=users[_0x40f5bf(0x1a1)];}}}}}}}_0x1b190a[_0x40f5bf(0x145)](_0x40f5bf(0x1cf),{'success':_0x2f32fe[_0x40f5bf(0x19d)](_0x40f5bf(0x133)),'errors':_0x2f32fe[_0x40f5bf(0x19d)](_0x40f5bf(0x136)),'role':_0x3351ea,'profile':_0x8a7fd4,'adjustment':_0x205493,'stock':_0x48c50e,'master_shop':_0x2b04ee,'warehouse_name':_0x2197bc,'unit':_0x5e78e3,'language':_0x4d808c});}catch(_0x81b34f){console[_0x40f5bf(0x1ca)](_0x81b34f),_0x1b190a[_0x40f5bf(0x16c)](0xc8)['json']({'message':_0x81b34f[_0x40f5bf(0x189)]});}}),router[a0_0x3901e7(0x196)]('/preview/:id',auth,async(_0x3df35e,_0x12d8db)=>{var _0x1dec57=a0_0x3901e7;try{const _0x5df660=_0x3df35e[_0x1dec57(0x177)]['id'],{warehouse_name:_0x3ae2bc,Room_name:_0x4a2f1e}=_0x3df35e['body'],_0x3075a1=await adjustment[_0x1dec57(0x199)]({'_id':_0x5df660}),_0x205a20=_0x3075a1[_0x1dec57(0x1f0)]['map'](async _0x2be688=>{var _0x553756=_0x1dec57;if(_0x2be688[_0x553756(0x1d0)]>0x0){var _0x4f254b=await warehouse[_0x553756(0x129)]({'name':_0x3ae2bc,'room':_0x2be688['room_names'],'warehouse_category':_0x553756(0x157)});const _0x3ff2c6=_0x4f254b[_0x553756(0x1c0)]['map'](_0x403613=>{var _0x167906=_0x553756;if(_0x2be688[_0x167906(0x1d7)]==_0x167906(0x16d)){if(_0x403613['product_name']==_0x2be688['product_name']&&_0x403613[_0x167906(0x1da)]==_0x2be688[_0x167906(0x1da)]&&_0x403613[_0x167906(0x1d7)]==_0x2be688['type']&&_0x403613[_0x167906(0x17f)]==_0x2be688[_0x167906(0x17f)]&&_0x403613[_0x167906(0x153)]==_0x2be688['bay']&&_0x403613[_0x167906(0x16b)]==_0x2be688[_0x167906(0x16b)]&&_0x403613[_0x167906(0x19a)]==_0x2be688[_0x167906(0x19a)]&&_0x403613['expiry_date']==_0x2be688[_0x167906(0x1d5)]&&_0x403613['batch_code']==_0x2be688[_0x167906(0x170)]&&_0x403613[_0x167906(0x1f9)]==_0x2be688['production_date']&&_0x403613[_0x167906(0x1ae)]==_0x2be688[_0x167906(0x1ae)]){var _0x8b3302;_0x8b3302=_0x2be688['adjust_qty'],_0x2be688[_0x167906(0x198)]=='S'&&(_0x8b3302=_0x2be688[_0x167906(0x1d0)]),_0x403613[_0x167906(0x1e8)]=_0x403613[_0x167906(0x1e8)]-_0x8b3302;}}else{if(_0x403613[_0x167906(0x166)]==_0x2be688['product_name']&&_0x403613[_0x167906(0x1da)]==_0x2be688[_0x167906(0x1da)]&&_0x403613[_0x167906(0x1d7)]==_0x2be688[_0x167906(0x1d7)]&&_0x403613[_0x167906(0x17f)]==_0x2be688[_0x167906(0x17f)]&&_0x403613[_0x167906(0x153)]==_0x2be688[_0x167906(0x153)]&&_0x403613[_0x167906(0x16b)]==_0x2be688[_0x167906(0x16b)]&&_0x403613[_0x167906(0x19a)]==_0x2be688[_0x167906(0x19a)]&&_0x403613[_0x167906(0x1d5)]==_0x2be688[_0x167906(0x1d5)]&&_0x403613[_0x167906(0x170)]==_0x2be688[_0x167906(0x170)]&&_0x403613[_0x167906(0x1f9)]==_0x2be688['production_date']&&_0x403613[_0x167906(0x1ae)]==_0x2be688[_0x167906(0x1ae)]){console[_0x167906(0x1ca)](_0x2be688);var _0x8b3302;_0x8b3302=_0x2be688[_0x167906(0x1d0)],_0x2be688[_0x167906(0x198)]=='S'&&(_0x8b3302=_0x2be688[_0x167906(0x1d0)]),console['log'](_0x8b3302+_0x167906(0x15d)+_0x2be688[_0x167906(0x1d0)]+_0x167906(0x15d)+_0x403613[_0x167906(0x1ef)]+_0x167906(0x15d)+_0x2be688[_0x167906(0x198)]),_0x403613[_0x167906(0x1e8)]=_0x403613[_0x167906(0x1e8)]+_0x8b3302;}}});}return _0x4f254b;});Promise['all'](_0x205a20)[_0x1dec57(0x1fb)](async _0xcf3394=>{var _0x30bfbc=_0x1dec57;try{for(const _0x112647 of _0xcf3394){await _0x112647[_0x30bfbc(0x128)]();}_0x3075a1[_0x30bfbc(0x19f)]=_0x30bfbc(0x12a);const _0x31f87b=await _0x3075a1[_0x30bfbc(0x128)](),_0x2b64e7=await master_shop[_0x30bfbc(0x179)](),_0xade17=await email_settings[_0x30bfbc(0x129)](),_0x2a0db5=await supervisor_settings['find']();var _0x2dc248=_0x3075a1[_0x30bfbc(0x1f0)],_0x420f70='',_0x5d9103;for(_0x5d9103 in _0x2dc248){_0x420f70+=_0x30bfbc(0x1c5)+_0x30bfbc(0x191)+_0x2dc248[_0x5d9103][_0x30bfbc(0x166)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2dc248[_0x5d9103][_0x30bfbc(0x1a3)]+_0x30bfbc(0x154)+_0x30bfbc(0x191)+_0x2dc248[_0x5d9103][_0x30bfbc(0x1d0)]+'</td>'+_0x30bfbc(0x191)+_0x2dc248[_0x5d9103][_0x30bfbc(0x14c)]+_0x30bfbc(0x154)+_0x30bfbc(0x191)+_0x2dc248[_0x5d9103]['secondary_unit']+_0x30bfbc(0x154)+_0x30bfbc(0x191)+_0x3075a1[_0x30bfbc(0x1b3)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2dc248[_0x5d9103][_0x30bfbc(0x1ab)]+'</td>'+_0x30bfbc(0x191)+_0x2dc248[_0x5d9103][_0x30bfbc(0x19a)]+_0x2dc248[_0x5d9103][_0x30bfbc(0x16b)]+_0x2dc248[_0x5d9103][_0x30bfbc(0x153)]+_0x2dc248[_0x5d9103][_0x30bfbc(0x17f)]+_0x2dc248[_0x5d9103][_0x30bfbc(0x1d7)][0x0]+_0x2dc248[_0x5d9103][_0x30bfbc(0x1da)]+'</td>','</tr>';}let _0x1695ca=nodemailer[_0x30bfbc(0x1cc)]({'host':_0xade17['host'],'port':Number(_0xade17[_0x30bfbc(0x132)]),'secure':![],'auth':{'user':_0xade17[_0x30bfbc(0x13d)],'pass':_0xade17[_0x30bfbc(0x13c)]}}),_0x21e4b4={'from':_0xade17[_0x30bfbc(0x13d)],'to':_0x2a0db5[0x0][_0x30bfbc(0x169)],'subject':_0x30bfbc(0x15e),'attachments':[{'filename':_0x30bfbc(0x1dd),'path':__dirname+_0x30bfbc(0x1fc)+_0x30bfbc(0x17c)+_0x2b64e7[0x0]['image'],'cid':_0x30bfbc(0x1f5)}],'html':_0x30bfbc(0x140)+_0x30bfbc(0x142)+_0x30bfbc(0x13a)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x30bfbc(0x16e)+_0x30bfbc(0x14d)+_0x30bfbc(0x193)+_0x30bfbc(0x16e)+_0x30bfbc(0x137)+_0x2b64e7[0x0]['site_title']+_0x30bfbc(0x1e5)+_0x30bfbc(0x193)+_0x30bfbc(0x193)+_0x30bfbc(0x195)+_0x30bfbc(0x16e)+_0x30bfbc(0x1ba)+_0x30bfbc(0x1ad)+_0x3075a1['invoice']+'\x20'+_0x30bfbc(0x1b7)+'\x20Order\x20Date\x20:\x20'+_0x3075a1[_0x30bfbc(0x1d1)]+'\x20'+_0x30bfbc(0x165)+_0x30bfbc(0x150)+_0x30bfbc(0x193)+_0x30bfbc(0x16a)+_0x30bfbc(0x190)+_0x30bfbc(0x1c5)+_0x30bfbc(0x192)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x30bfbc(0x167)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x30bfbc(0x173)+_0x30bfbc(0x1ac)+_0x30bfbc(0x186)+_0x30bfbc(0x14f)+'</tr>'+_0x30bfbc(0x1be)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x420f70+'\x20'+_0x30bfbc(0x144)+'</table>'+_0x30bfbc(0x16e)+_0x30bfbc(0x1db)+_0x30bfbc(0x18c)+_0x2b64e7[0x0][_0x30bfbc(0x172)]+_0x30bfbc(0x150)+_0x30bfbc(0x193)+_0x30bfbc(0x193)+_0x30bfbc(0x1b8)};_0x1695ca['sendMail'](_0x21e4b4,function(_0x2222a5,_0xa24412){var _0x365422=_0x30bfbc;_0x2222a5?(console[_0x365422(0x1ca)](_0x2222a5),console[_0x365422(0x1ca)](_0x365422(0x127))):console['log']('Email\x20sent\x20successfully');}),_0x3df35e[_0x30bfbc(0x19d)](_0x30bfbc(0x133),_0x30bfbc(0x181)),_0x12d8db[_0x30bfbc(0x187)]('/picking_list/PDF_adjustment_rm/'+_0x31f87b[_0x30bfbc(0x1f7)]);}catch(_0x45e4f6){console['error'](_0x45e4f6),_0x12d8db['status'](0x1f4)[_0x30bfbc(0x1a7)]({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x1dec57(0x1e9)](_0x2dd0a9=>{var _0x17dab1=_0x1dec57;console[_0x17dab1(0x1cd)](_0x2dd0a9),_0x12d8db[_0x17dab1(0x16c)](0x1f4)[_0x17dab1(0x1a7)]({'error':_0x17dab1(0x13b)});});}catch(_0x3b532f){console[_0x1dec57(0x1ca)](_0x3b532f),_0x12d8db[_0x1dec57(0x16c)](0xc8)[_0x1dec57(0x1a7)]({'message':_0x3b532f[_0x1dec57(0x189)]});}}),router[a0_0x3901e7(0x1e1)](a0_0x3901e7(0x1ea),auth,async(_0x3df450,_0x25bd43)=>{var _0x5ee5fb=a0_0x3901e7;try{const {username:_0x565611,email:_0x75eb8e,role:_0x490e9f}=_0x3df450['user'],_0x220db3=_0x3df450[_0x5ee5fb(0x12c)],_0x16e6ca=await profile[_0x5ee5fb(0x129)]({'email':_0x220db3['email']}),_0x434dc5=await master_shop['find'](),_0xa0132c=_0x3df450[_0x5ee5fb(0x177)]['id'],_0x4f6cd4=await adjustment[_0x5ee5fb(0x199)]({'_id':_0xa0132c}),_0x3d098a=await purchases[_0x5ee5fb(0x19c)]([{'$match':{'warehouse_name':_0x4f6cd4[_0x5ee5fb(0x1b3)]}},{'$unwind':_0x5ee5fb(0x162)},{'$group':{'_id':'$product.product_name'}}]),_0x3dcfb5=await product[_0x5ee5fb(0x179)]({}),_0x2ec115=await warehouse[_0x5ee5fb(0x19c)]([{'$match':{'name':_0x4f6cd4[_0x5ee5fb(0x1b3)]}},{'$unwind':_0x5ee5fb(0x1dc)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5ee5fb(0x15a)},'product_stock':{'$first':_0x5ee5fb(0x1d3)},'bay':{'$first':_0x5ee5fb(0x161)},'bin':{'$first':_0x5ee5fb(0x14a)},'type':{'$first':_0x5ee5fb(0x1f1)},'floorlevel':{'$first':_0x5ee5fb(0x1b6)},'primary_code':{'$first':_0x5ee5fb(0x1e0)},'secondary_code':{'$first':_0x5ee5fb(0x1aa)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x5ee5fb(0x188)},'rack':{'$first':_0x5ee5fb(0x16f)},'maxPerUnit':{'$first':_0x5ee5fb(0x1c7)},'expiry_date':{'$first':_0x5ee5fb(0x1c9)},'production_date':{'$first':_0x5ee5fb(0x1bd)},'batch_code':{'$first':_0x5ee5fb(0x174)},'room':{'$first':_0x5ee5fb(0x1bf)}}}]);let _0x52c155;if(_0x220db3['role']==_0x5ee5fb(0x1b1)){const _0x403049=await staff[_0x5ee5fb(0x129)]({'email':_0x220db3[_0x5ee5fb(0x13d)]});_0x52c155=await warehouse[_0x5ee5fb(0x19c)]([{'$match':{'status':_0x5ee5fb(0x1df),'name':_0x403049[_0x5ee5fb(0x175)],'warehouse_category':_0x5ee5fb(0x157),'name':{'$ne':_0x5ee5fb(0x1f8)}}},{'$group':{'_id':'$name','name':{'$first':_0x5ee5fb(0x168)}}}]);}else _0x52c155=await warehouse[_0x5ee5fb(0x19c)]([{'$match':{'status':_0x5ee5fb(0x1df),'warehouse_category':_0x5ee5fb(0x157),'name':{'$ne':_0x5ee5fb(0x1f8)}}},{'$group':{'_id':_0x5ee5fb(0x168),'name':{'$first':_0x5ee5fb(0x168)}}}]);if(_0x434dc5[0x0][_0x5ee5fb(0x197)]==_0x5ee5fb(0x1f4)){var _0x134484=users[_0x5ee5fb(0x1ed)];console[_0x5ee5fb(0x1ca)](_0x134484);}else{if(_0x434dc5[0x0][_0x5ee5fb(0x197)]==_0x5ee5fb(0x1d9))var _0x134484=users['Hindi'];else{if(_0x434dc5[0x0][_0x5ee5fb(0x197)]=='German')var _0x134484=users['German'];else{if(_0x434dc5[0x0][_0x5ee5fb(0x197)]=='Spanish')var _0x134484=users[_0x5ee5fb(0x124)];else{if(_0x434dc5[0x0]['language']==_0x5ee5fb(0x152))var _0x134484=users[_0x5ee5fb(0x152)];else{if(_0x434dc5[0x0]['language']==_0x5ee5fb(0x1ee))var _0x134484=users[_0x5ee5fb(0x126)];else{if(_0x434dc5[0x0][_0x5ee5fb(0x197)]==_0x5ee5fb(0x184))var _0x134484=users[_0x5ee5fb(0x184)];else{if(_0x434dc5[0x0][_0x5ee5fb(0x197)]=='Arabic\x20(ae)')var _0x134484=users[_0x5ee5fb(0x1a1)];}}}}}}}_0x25bd43[_0x5ee5fb(0x145)]('edit_adjustment',{'success':_0x3df450[_0x5ee5fb(0x19d)](_0x5ee5fb(0x133)),'errors':_0x3df450[_0x5ee5fb(0x19d)]('errors'),'role':_0x220db3,'profile':_0x16e6ca,'adjustment':_0x4f6cd4,'stock':_0x2ec115,'master_shop':_0x434dc5,'warehouse_name':_0x3d098a,'unit':_0x3dcfb5,'language':_0x134484,'warehouse':_0x52c155});}catch(_0x55b578){console[_0x5ee5fb(0x1ca)](_0x55b578),_0x25bd43[_0x5ee5fb(0x16c)](0xc8)[_0x5ee5fb(0x1a7)]({'message':_0x55b578['message']});}}),router['post'](a0_0x3901e7(0x1ea),auth,async(_0x33c3f0,_0x2761c1)=>{var _0x283cca=a0_0x3901e7;try{const _0x18195b=_0x33c3f0[_0x283cca(0x177)]['id'],_0x487459=await adjustment['findById']({'_id':_0x18195b}),_0x5b66dc=await warehouse[_0x283cca(0x129)]({'name':_0x487459[_0x283cca(0x1b3)],'room':_0x487459[_0x283cca(0x1e3)]}),{warehouse_name:_0x251e16,date:_0x4af284,prod_name:_0x1a34fe,level:_0xdc7cc0,isle:_0x18355b,pallet:_0x1b1184,stock:_0x2075cc,types:_0x3b243d,adjust_qty:_0x13e9cb,new_adjust_qty:_0x23e64f,note:_0x32a6f7,Room_name:_0x3777cd,invoice:_0xb3cfe6,JO_number:_0xc3f8a4,expiry_date:_0x3ed410}=_0x33c3f0[_0x283cca(0x1b5)];if(typeof _0x1a34fe==_0x283cca(0x1a6))var _0xf11e8b=[_0x33c3f0['body'][_0x283cca(0x1c1)]],_0x141698=[_0x33c3f0['body'][_0x283cca(0x15b)]],_0x21d9ab=[_0x33c3f0['body'][_0x283cca(0x123)]],_0x15498d=[_0x33c3f0['body'][_0x283cca(0x146)]],_0x5016d3=[_0x33c3f0['body']['New_Qty_Converted_adj']],_0x5df619=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x183)]],_0x1cef04=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x19b)]],_0x38be00=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1c2)]],_0x3e9e25=[_0x33c3f0['body'][_0x283cca(0x17e)]],_0x3d78f6=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x170)]],_0x31a2dd=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1d5)]],_0x15d606=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x158)]],_0x585a72=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1f9)]],_0x5668d6=[_0x33c3f0[_0x283cca(0x1b5)]['prod_cat']],_0x19bc7f=[_0x33c3f0['body']['Rooms']],_0x4a22bf=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1f2)]],_0x9819f5=[_0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x185)]];else var _0xf11e8b=[..._0x33c3f0['body'][_0x283cca(0x1c1)]],_0x141698=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x15b)]],_0x21d9ab=[..._0x33c3f0[_0x283cca(0x1b5)]['stock']],_0x15498d=[..._0x33c3f0[_0x283cca(0x1b5)]['types']],_0x5016d3=[..._0x33c3f0['body'][_0x283cca(0x1ec)]],_0x5df619=[..._0x33c3f0['body']['New_Qty_Converted']],_0x1cef04=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x14c)]],_0x38be00=[..._0x33c3f0[_0x283cca(0x1b5)]['Secondary_units']],_0x3e9e25=[..._0x33c3f0[_0x283cca(0x1b5)]['prod_code']],_0x3d78f6=[..._0x33c3f0['body']['batch_code']],_0x31a2dd=[..._0x33c3f0[_0x283cca(0x1b5)]['expiry_date']],_0x15d606=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x158)]],_0x585a72=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1f9)]],_0x5668d6=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x198)]],_0x19bc7f=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1d4)]],_0x4a22bf=[..._0x33c3f0[_0x283cca(0x1b5)][_0x283cca(0x1f2)]],_0x9819f5=[..._0x33c3f0[_0x283cca(0x1b5)]['second1']];const _0x334806=_0xf11e8b[_0x283cca(0x17b)](_0x477bc4=>{return _0x477bc4={'product_name':_0x477bc4};});_0x141698['forEach']((_0x5f2e60,_0x1fc209)=>{var _0x3ce709=_0x283cca;_0x19bc7f[_0x3ce709(0x1a9)]((_0x191a2a,_0x534ac9)=>{var _0x5032da=_0x3ce709;if(_0x191a2a==_0x5032da(0x1b9)&&_0x1fc209==_0x534ac9){var _0x5ac87f=_0x5f2e60[_0x5032da(0x139)](0x3);_0x334806[_0x1fc209][_0x5032da(0x19a)]=_0x5f2e60[0x0],_0x334806[_0x1fc209][_0x5032da(0x16b)]=_0x5f2e60[0x1],_0x334806[_0x1fc209][_0x5032da(0x153)]=0x0,_0x334806[_0x1fc209]['bin']=0x0,_0x334806[_0x1fc209][_0x5032da(0x1d7)]=_0x5032da(0x1a5),_0x334806[_0x1fc209][_0x5032da(0x1da)]=_0x5ac87f;}else{if(_0x191a2a==_0x5032da(0x1f6)&&_0x1fc209==_0x534ac9){var _0x5ac87f=_0x5f2e60['slice'](0x3);_0x334806[_0x1fc209][_0x5032da(0x19a)]=_0x5f2e60[0x0],_0x334806[_0x1fc209][_0x5032da(0x16b)]=_0x5f2e60[0x1],_0x334806[_0x1fc209][_0x5032da(0x153)]=0x0,_0x334806[_0x1fc209][_0x5032da(0x17f)]=0x0,_0x334806[_0x1fc209][_0x5032da(0x1d7)]=_0x5032da(0x1a5),_0x334806[_0x1fc209][_0x5032da(0x1da)]=_0x5f2e60[0x5];}else{if(_0x1fc209==_0x534ac9){var _0x545595;if(_0x5f2e60[0x4]=='L')_0x545595=_0x5032da(0x143);else _0x5f2e60[0x4]=='F'&&(_0x545595='Floor');_0x334806[_0x1fc209][_0x5032da(0x19a)]=_0x5f2e60[0x0],_0x334806[_0x1fc209][_0x5032da(0x16b)]=_0x5f2e60[0x1],_0x334806[_0x1fc209][_0x5032da(0x153)]=_0x5f2e60[0x2],_0x334806[_0x1fc209][_0x5032da(0x17f)]=_0x5f2e60[0x3],_0x334806[_0x1fc209][_0x5032da(0x1d7)]=_0x545595,_0x334806[_0x1fc209][_0x5032da(0x1da)]=_0x5f2e60[0x5];}}}});}),_0x21d9ab[_0x283cca(0x1a9)]((_0x2955c9,_0x38da82)=>{_0x334806[_0x38da82]['stockBefore']=_0x2955c9;}),_0x15498d[_0x283cca(0x1a9)]((_0x29eb4f,_0x3808ba)=>{var _0x425ef4=_0x283cca;_0x334806[_0x3808ba][_0x425ef4(0x146)]=_0x29eb4f;}),_0x5016d3[_0x283cca(0x1a9)]((_0x5c164,_0x321f65)=>{_0x334806[_0x321f65]['adjust_qty']=_0x5c164;}),_0x5df619[_0x283cca(0x1a9)]((_0x4aa681,_0x9a0f52)=>{_0x334806[_0x9a0f52]['new_adjust_qty']=_0x4aa681;}),_0x1cef04['forEach']((_0x47e3d1,_0x18d2cd)=>{var _0x325b74=_0x283cca;_0x334806[_0x18d2cd][_0x325b74(0x14c)]=_0x47e3d1;}),_0x38be00['forEach']((_0x19962a,_0x59761b)=>{var _0x35f8be=_0x283cca;_0x334806[_0x59761b][_0x35f8be(0x134)]=_0x19962a;}),_0x3e9e25[_0x283cca(0x1a9)]((_0x3fe075,_0x3c5d70)=>{var _0x1399cc=_0x283cca;_0x334806[_0x3c5d70][_0x1399cc(0x1a3)]=_0x3fe075;}),_0x3d78f6[_0x283cca(0x1a9)]((_0xe61683,_0x5e6a89)=>{var _0x3d00d0=_0x283cca;_0x334806[_0x5e6a89][_0x3d00d0(0x170)]=_0xe61683;}),_0x31a2dd[_0x283cca(0x1a9)]((_0x2f8688,_0x458324)=>{var _0x35d0c2=_0x283cca;_0x334806[_0x458324][_0x35d0c2(0x1d5)]=_0x2f8688;}),_0x15d606[_0x283cca(0x1a9)]((_0x3a223e,_0x461465)=>{var _0xbcf046=_0x283cca;_0x334806[_0x461465][_0xbcf046(0x1ce)]=_0x3a223e;}),_0x585a72[_0x283cca(0x1a9)]((_0x1f2215,_0x409021)=>{var _0x35d5f6=_0x283cca;_0x334806[_0x409021][_0x35d5f6(0x1f9)]=_0x1f2215;}),_0x5668d6[_0x283cca(0x1a9)]((_0x1ffa2b,_0x53881e)=>{_0x334806[_0x53881e]['prod_cat']=_0x1ffa2b;}),_0x19bc7f['forEach']((_0x822510,_0x118967)=>{_0x334806[_0x118967]['room_names']=_0x822510;}),_0x4a22bf[_0x283cca(0x1a9)]((_0x5a7c76,_0x5dd5da)=>{var _0x46695a=_0x283cca;_0x334806[_0x5dd5da][_0x46695a(0x15c)]=_0x5a7c76;}),_0x9819f5[_0x283cca(0x1a9)]((_0x22596c,_0x3f5247)=>{var _0x5d438a=_0x283cca;_0x334806[_0x3f5247][_0x5d438a(0x12f)]=_0x22596c;});const _0x41daa0=_0x334806[_0x283cca(0x1e7)](_0x3d0096=>_0x3d0096[_0x283cca(0x1d0)]!=='0'&&_0x3d0096[_0x283cca(0x1d0)]!=='');var _0x1e5b05=0x0;_0x41daa0[_0x283cca(0x1a9)](_0x5affcd=>{var _0x2a0ca3=_0x283cca;console[_0x2a0ca3(0x1ca)](_0x2a0ca3(0x1c6),_0x5affcd),parseInt(_0x5affcd[_0x2a0ca3(0x1d0)])<=0x0&&_0x1e5b05++;});if(_0x1e5b05!=0x0)return _0x33c3f0['flash'](_0x283cca(0x136),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x2761c1[_0x283cca(0x187)]('back');_0x487459[_0x283cca(0x1b3)]=_0x251e16,_0x487459[_0x283cca(0x1d1)]=_0x4af284,_0x487459['product']=_0x41daa0,_0x487459[_0x283cca(0x1c8)]=_0x32a6f7,_0x487459[_0x283cca(0x1ae)]=_0xb3cfe6,_0x487459[_0x283cca(0x122)]=_0x283cca(0x1c3);const _0x5dbc91=await _0x487459[_0x283cca(0x128)]();_0x33c3f0['flash'](_0x283cca(0x133),_0x283cca(0x1de)),_0x2761c1[_0x283cca(0x187)]('/adjustment/view');}catch(_0x41e509){console[_0x283cca(0x1ca)](_0x41e509);}}),router['post'](a0_0x3901e7(0x1b0),async(_0x478817,_0x295b5b)=>{var _0x26cd10=a0_0x3901e7;const {primary_code:_0x1771a8,warehouse_data:_0x25c666,rooms_data:_0x5e885f,Roomslist:_0x2c60ad}=_0x478817[_0x26cd10(0x1b5)],_0x3ea955=_0x2c60ad[_0x26cd10(0x17a)](','),_0x49d676=[];async function _0x22b854(_0x516b83){var _0x1e4c1b=_0x26cd10;const _0x12cfec=await warehouse['aggregate']([{'$match':{'name':_0x25c666,'room':_0x516b83}},{'$unwind':_0x1e4c1b(0x1dc)},{'$match':{'product_details.primary_code':_0x1771a8}},{'$group':{'_id':_0x1e4c1b(0x164),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1e4c1b(0x1d3)},'primary_code':{'$first':_0x1e4c1b(0x1e0)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x1e4c1b(0x14e)},'level':{'$first':_0x1e4c1b(0x161)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x1e4c1b(0x1f1)},'pallet':{'$first':_0x1e4c1b(0x1b6)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x1e4c1b(0x1b4)},'storage':{'$first':_0x1e4c1b(0x188)},'rack':{'$first':_0x1e4c1b(0x16f)},'expiry_date':{'$first':_0x1e4c1b(0x1c9)},'production_date':{'$first':_0x1e4c1b(0x1bd)},'maxPerUnit':{'$first':_0x1e4c1b(0x1c7)},'batch_code':{'$first':_0x1e4c1b(0x174)},'product_cat':{'$first':_0x1e4c1b(0x12e)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'}}}]),_0x3aa0a7=await warehouse[_0x1e4c1b(0x19c)]([{'$match':{'name':_0x25c666,'room':_0x516b83}},{'$unwind':_0x1e4c1b(0x1dc)},{'$match':{'product_details.secondary_code':_0x1771a8}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1e4c1b(0x15a)},'product_stock':{'$first':_0x1e4c1b(0x1d3)},'primary_code':{'$first':_0x1e4c1b(0x1e0)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x1e4c1b(0x1f1)},'pallet':{'$first':_0x1e4c1b(0x1b6)},'unit':{'$first':_0x1e4c1b(0x135)},'secondary_unit':{'$first':_0x1e4c1b(0x1b4)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1e4c1b(0x16f)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x1e4c1b(0x1c7)},'batch_code':{'$first':_0x1e4c1b(0x174)},'product_cat':{'$first':_0x1e4c1b(0x12e)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x12cfec[_0x1e4c1b(0x176)]>0x0)_0x49d676[_0x1e4c1b(0x125)](_0x12cfec);else _0x3aa0a7['length']>0x0&&_0x49d676[_0x1e4c1b(0x125)](_0x3aa0a7);}const _0x27e833=_0x3ea955[_0x26cd10(0x17b)](_0x45c85f=>_0x22b854(_0x45c85f));await Promise[_0x26cd10(0x159)](_0x27e833),_0x295b5b[_0x26cd10(0x1a7)](_0x49d676);}),router[a0_0x3901e7(0x196)]('/CheckingWarehouse',async(_0x2c26b7,_0x54af39)=>{var _0x4dde17=a0_0x3901e7;const {primaryCode:_0x2a7b9d,secondaryCode:_0x2a4a94,productCode:_0x3ed82c,level:_0x35057d,isle:_0x345172,pallet:_0x49b885,warehouses:_0x28b934,room:_0x58762d}=_0x2c26b7[_0x4dde17(0x1b5)];try{const _0x394ba1=await warehouse['aggregate']([{'$match':{'name':_0x28b934,'room':_0x58762d}},{'$unwind':_0x4dde17(0x1dc)},{'$match':{'product_details.level':parseInt(_0x35057d),'product_details.isle':_0x345172,'product_details.pallet':parseInt(_0x49b885)}},{'$group':{'_id':_0x4dde17(0x164),'name':{'$first':_0x4dde17(0x15a)},'product_stock':{'$first':_0x4dde17(0x1d3)},'level':{'$first':_0x4dde17(0x1d2)},'isle':{'$first':_0x4dde17(0x1e6)},'pallet':{'$first':_0x4dde17(0x13f)},'maxProducts':{'$first':_0x4dde17(0x15f)}}}]);_0x54af39['status'](0xc8)[_0x4dde17(0x1a7)](_0x394ba1);}catch(_0x2c8ed8){_0x54af39[_0x4dde17(0x16c)](0x194)[_0x4dde17(0x1a7)]({'message':_0x2c8ed8[_0x4dde17(0x189)]});}}),module[a0_0x3901e7(0x1fa)]=router;