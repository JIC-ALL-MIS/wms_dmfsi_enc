var a0_0x718f0d=a0_0x185e;(function(_0x3eabb0,_0x1924b2){var _0x3d1712=a0_0x185e,_0x3cdb47=_0x3eabb0();while(!![]){try{var _0x12bcfa=parseInt(_0x3d1712(0x2b4))/0x1+-parseInt(_0x3d1712(0x2a3))/0x2+parseInt(_0x3d1712(0x1ee))/0x3+-parseInt(_0x3d1712(0x236))/0x4*(-parseInt(_0x3d1712(0x243))/0x5)+parseInt(_0x3d1712(0x2a0))/0x6*(-parseInt(_0x3d1712(0x26a))/0x7)+-parseInt(_0x3d1712(0x257))/0x8*(-parseInt(_0x3d1712(0x287))/0x9)+-parseInt(_0x3d1712(0x2a6))/0xa*(-parseInt(_0x3d1712(0x20a))/0xb);if(_0x12bcfa===_0x1924b2)break;else _0x3cdb47['push'](_0x3cdb47['shift']());}catch(_0x54e7c7){_0x3cdb47['push'](_0x3cdb47['shift']());}}}(a0_0x4640,0x7c0e8));const express=require('express'),app=express(),router=express[a0_0x718f0d(0x247)](),auth=require(a0_0x718f0d(0x256)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x718f0d(0x238)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x718f0d(0x26e));router[a0_0x718f0d(0x22e)]('/view',auth,async(_0x533891,_0x28ad91)=>{var _0x13c9b0=a0_0x718f0d;try{const {username:_0x4d0d95,email:_0x19ec4a,role:_0x4429eb}=_0x533891['user'],_0x4296e1=_0x533891['user'],_0x4bfb4e=await profile[_0x13c9b0(0x25d)]({'email':_0x4296e1[_0x13c9b0(0x212)]}),_0x2f08e2=await master_shop[_0x13c9b0(0x2b3)]();console['log'](_0x13c9b0(0x21a),_0x2f08e2);let _0xa2bdb7;if(_0x4296e1[_0x13c9b0(0x2be)]==_0x13c9b0(0x1f2)){const _0x34b513=await staff['findOne']({'email':_0x4296e1[_0x13c9b0(0x212)]});_0xa2bdb7=await warehouse[_0x13c9b0(0x2b3)]({'status':_0x13c9b0(0x274),'name':_0x34b513[_0x13c9b0(0x270)]});}else _0xa2bdb7=await warehouse[_0x13c9b0(0x2b3)]({'status':_0x13c9b0(0x274)});const _0x6824a6=await product['find']();let _0xbb42fe;if(_0x4296e1[_0x13c9b0(0x2be)]==_0x13c9b0(0x1f2)){const _0x15e8d9=await staff[_0x13c9b0(0x25d)]({'email':_0x4296e1[_0x13c9b0(0x212)]});_0xbb42fe=await adjustment[_0x13c9b0(0x2b3)]({'warehouse_name':_0x15e8d9['warehouse']});}else _0xbb42fe=await adjustment['aggregate']([{'$unwind':'$product'},{'$group':{'_id':_0x13c9b0(0x2a1),'invoice':{'$first':_0x13c9b0(0x259)},'date':{'$first':_0x13c9b0(0x2aa)},'warehouse_name':{'$first':_0x13c9b0(0x1f7)},'room':{'$addToSet':_0x13c9b0(0x26d)},'finalize':{'$first':_0x13c9b0(0x228)},'isAllowEdit':{'$first':_0x13c9b0(0x290)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x2f08e2[0x0]['language']=='English\x20(US)'){var _0x59b92b=users[_0x13c9b0(0x23c)];console[_0x13c9b0(0x224)](_0x59b92b);}else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x2b9))var _0x59b92b=users[_0x13c9b0(0x2b9)];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]=='German')var _0x59b92b=users['German'];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x273))var _0x59b92b=users[_0x13c9b0(0x273)];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x1fd))var _0x59b92b=users['French'];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x27b))var _0x59b92b=users[_0x13c9b0(0x1f8)];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x20b))var _0x59b92b=users[_0x13c9b0(0x20b)];else{if(_0x2f08e2[0x0][_0x13c9b0(0x283)]==_0x13c9b0(0x1ff))var _0x59b92b=users[_0x13c9b0(0x245)];}}}}}}}_0x28ad91['render']('adjustment',{'success':_0x533891['flash']('success'),'errors':_0x533891['flash'](_0x13c9b0(0x2c5)),'role':_0x4296e1,'profile':_0x4bfb4e,'warehouse':_0xa2bdb7,'product':_0x6824a6,'adjustment':_0xbb42fe,'master_shop':_0x2f08e2,'language':_0x59b92b});}catch(_0x190605){console[_0x13c9b0(0x224)](_0x190605);}});async function getRandom8DigitNumber(){var _0x26f3fd=a0_0x718f0d;const _0x4a4ce3=0x989680,_0x1bf124=0x5f5e0ff,_0xd4469=Math['floor'](Math[_0x26f3fd(0x2bd)]()*(_0x1bf124-_0x4a4ce3+0x1))+_0x4a4ce3;var _0x309822;const _0x3a59cf=await adjustment[_0x26f3fd(0x25d)]({'invoice':_0x26f3fd(0x26b)+_0xd4469});return _0x3a59cf&&_0x3a59cf[_0x26f3fd(0x2c3)]>0x0?_0x309822=_0x26f3fd(0x26b)+_0xd4469:_0x309822=_0x26f3fd(0x26b)+_0xd4469,_0x309822;}function a0_0x185e(_0x274ec3,_0x10bcd0){var _0x4640ab=a0_0x4640();return a0_0x185e=function(_0x185e14,_0x2f1601){_0x185e14=_0x185e14-0x1ed;var _0xd8855b=_0x4640ab[_0x185e14];return _0xd8855b;},a0_0x185e(_0x274ec3,_0x10bcd0);}router[a0_0x718f0d(0x22e)]('/view/add_adjustment',auth,async(_0x29ed1b,_0x333523)=>{var _0x19d5ab=a0_0x718f0d;try{const {username:_0x3fda7d,email:_0x14150a,role:_0x543fd4}=_0x29ed1b['user'],_0xdc631a=_0x29ed1b[_0x19d5ab(0x22a)],_0x46a192=await profile[_0x19d5ab(0x25d)]({'email':_0xdc631a['email']}),_0x1cf5ce=await master_shop['find']();let _0x57eff6;if(_0xdc631a[_0x19d5ab(0x2be)]==_0x19d5ab(0x1f2)){const _0x1a680e=await staff[_0x19d5ab(0x25d)]({'email':_0xdc631a[_0x19d5ab(0x212)]});_0x57eff6=await warehouse[_0x19d5ab(0x29a)]([{'$match':{'status':_0x19d5ab(0x274),'name':_0x1a680e['warehouse'],'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x19d5ab(0x299)}}},{'$group':{'_id':'$name','name':{'$first':_0x19d5ab(0x21e)}}}]);}else _0x57eff6=await warehouse[_0x19d5ab(0x29a)]([{'$match':{'status':_0x19d5ab(0x274),'warehouse_category':_0x19d5ab(0x22d),'name':{'$ne':_0x19d5ab(0x299)}}},{'$group':{'_id':_0x19d5ab(0x21e),'name':{'$first':_0x19d5ab(0x21e)}}}]);const _0x4b699e=await product['find']({}),_0x30fdb2=await adjustment['find']({}),_0x4f2405=_0x30fdb2[_0x19d5ab(0x2c3)]+0x1,_0x12c903=_0x19d5ab(0x26b)+_0x4f2405[_0x19d5ab(0x214)]()[_0x19d5ab(0x277)](0x5,'0');var _0x1f4047=[_0x19d5ab(0x2a5),'Enclosed',_0x19d5ab(0x23f)];if(_0x1cf5ce[0x0][_0x19d5ab(0x283)]==_0x19d5ab(0x272))var _0xee2f5c=users['English'];else{if(_0x1cf5ce[0x0]['language']==_0x19d5ab(0x2b9))var _0xee2f5c=users['Hindi'];else{if(_0x1cf5ce[0x0][_0x19d5ab(0x283)]==_0x19d5ab(0x219))var _0xee2f5c=users[_0x19d5ab(0x219)];else{if(_0x1cf5ce[0x0][_0x19d5ab(0x283)]=='Spanish')var _0xee2f5c=users[_0x19d5ab(0x273)];else{if(_0x1cf5ce[0x0]['language']=='French')var _0xee2f5c=users[_0x19d5ab(0x1fd)];else{if(_0x1cf5ce[0x0]['language']==_0x19d5ab(0x27b))var _0xee2f5c=users[_0x19d5ab(0x1f8)];else{if(_0x1cf5ce[0x0][_0x19d5ab(0x283)]=='Chinese')var _0xee2f5c=users[_0x19d5ab(0x20b)];else{if(_0x1cf5ce[0x0][_0x19d5ab(0x283)]==_0x19d5ab(0x1ff))var _0xee2f5c=users['Arabic'];}}}}}}}const _0x1bf946=getRandom8DigitNumber();_0x1bf946['then'](_0x238fdc=>{var _0x58f34a=_0x19d5ab;_0x333523['render'](_0x58f34a(0x2bf),{'success':_0x29ed1b[_0x58f34a(0x254)](_0x58f34a(0x2b1)),'errors':_0x29ed1b[_0x58f34a(0x254)](_0x58f34a(0x2c5)),'role':_0xdc631a,'profile':_0x46a192,'warehouse':_0x57eff6,'product':_0x4b699e,'master_shop':_0x1cf5ce,'language':_0xee2f5c,'rooms_data':_0x1f4047,'invoice_no':_0x238fdc});})[_0x19d5ab(0x297)](_0x446d53=>{var _0x422219=_0x19d5ab;_0x29ed1b[_0x422219(0x254)](_0x422219(0x2c5),_0x422219(0x21d)),_0x333523[_0x422219(0x282)]('/adjustment/view');});}catch(_0x3aa8a9){console[_0x19d5ab(0x224)](_0x3aa8a9);}}),router[a0_0x718f0d(0x28b)](a0_0x718f0d(0x28c),auth,async(_0x5b2907,_0x103179)=>{var _0xe45e27=a0_0x718f0d;try{const {warehouse_name:_0x535801,date:_0x15781f,prod_name:_0xa5c398,level:_0x480d52,isle:_0x4b9383,pallet:_0x1959d0,stock:_0x44d8a3,types:_0xaf4a,adjust_qty:_0x1d2691,new_adjust_qty:_0x84d91b,note:_0x225c77,Room_name:_0x2aaf82,invoice:_0x106e4f,JO_number:_0x37fa34,expiry_date:_0x32336a}=_0x5b2907[_0xe45e27(0x221)];if(typeof _0xa5c398=='string')var _0x13ec83=[_0x5b2907[_0xe45e27(0x221)]['prod_name']],_0x5a60ef=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2c1)]],_0x52ada3=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x240)]],_0x593b3f=[_0x5b2907['body'][_0xe45e27(0x232)]],_0x5efcb2=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x29f)]],_0x163f6c=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x295)]],_0xa89fe8=[_0x5b2907[_0xe45e27(0x221)]['Primary_Units']],_0x3c4222=[_0x5b2907['body']['Secondary_units']],_0x16ab76=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x23a)]],_0x2e1c7b=[_0x5b2907[_0xe45e27(0x221)]['batch_code']],_0x337ff3=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x269)]],_0x5e8d2d=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x25f)]],_0x385d3a=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2b8)]],_0x13813a=[_0x5b2907[_0xe45e27(0x221)]['prod_cat']],_0x408a9d=[_0x5b2907['body']['Rooms']],_0x52b64d=[_0x5b2907[_0xe45e27(0x221)]['prime1']],_0x1d9af6=[_0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x285)]],_0xea6fe1=[_0x5b2907[_0xe45e27(0x221)]['prod_invoice']],_0x297b88=[_0x5b2907[_0xe45e27(0x221)]['id_transaction']];else var _0x13ec83=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x25c)]],_0x5a60ef=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2c1)]],_0x52ada3=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x240)]],_0x593b3f=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x232)]],_0x5efcb2=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x29f)]],_0x163f6c=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x295)]],_0xa89fe8=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x206)]],_0x3c4222=[..._0x5b2907['body']['Secondary_units']],_0x16ab76=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x23a)]],_0x2e1c7b=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2a7)]],_0x337ff3=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x269)]],_0x5e8d2d=[..._0x5b2907['body'][_0xe45e27(0x25f)]],_0x385d3a=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2b8)]],_0x13813a=[..._0x5b2907[_0xe45e27(0x221)]['prod_cat']],_0x408a9d=[..._0x5b2907[_0xe45e27(0x221)]['Rooms']],_0x52b64d=[..._0x5b2907['body'][_0xe45e27(0x203)]],_0x1d9af6=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x285)]],_0xea6fe1=[..._0x5b2907[_0xe45e27(0x221)][_0xe45e27(0x2ac)]],_0x297b88=[..._0x5b2907[_0xe45e27(0x221)]['id_transaction']];const _0x49b098=_0x13ec83[_0xe45e27(0x252)](_0x3d0504=>{return _0x3d0504={'product_name':_0x3d0504};});_0x5a60ef[_0xe45e27(0x284)]((_0x3a68cd,_0x5972d1)=>{var _0x5b574d=_0xe45e27;_0x408a9d[_0x5b574d(0x284)]((_0x3e91a1,_0x3790fc)=>{var _0x325241=_0x5b574d;if(_0x3e91a1==_0x325241(0x2bb)&&_0x5972d1==_0x3790fc){var _0x5728ee=_0x3a68cd['slice'](0x3);_0x49b098[_0x5972d1]['storage']=_0x3a68cd[0x0],_0x49b098[_0x5972d1][_0x325241(0x200)]=_0x3a68cd[0x1],_0x49b098[_0x5972d1][_0x325241(0x1f9)]=0x0,_0x49b098[_0x5972d1]['bin']=0x0,_0x49b098[_0x5972d1][_0x325241(0x271)]=_0x325241(0x275),_0x49b098[_0x5972d1][_0x325241(0x28e)]=_0x5728ee;}else{if(_0x3e91a1==_0x325241(0x231)&&_0x5972d1==_0x3790fc){var _0x5728ee=_0x3a68cd[_0x325241(0x249)](0x3);_0x49b098[_0x5972d1][_0x325241(0x226)]=_0x3a68cd[0x0],_0x49b098[_0x5972d1][_0x325241(0x200)]=_0x3a68cd[0x1],_0x49b098[_0x5972d1][_0x325241(0x1f9)]=0x0,_0x49b098[_0x5972d1][_0x325241(0x1fe)]=0x0,_0x49b098[_0x5972d1][_0x325241(0x271)]=_0x325241(0x275),_0x49b098[_0x5972d1][_0x325241(0x28e)]=_0x3a68cd[0x5];}else{if(_0x5972d1==_0x3790fc){var _0x5832e0;if(_0x3a68cd[0x4]=='L')_0x5832e0=_0x325241(0x1fa);else _0x3a68cd[0x4]=='F'&&(_0x5832e0=_0x325241(0x275));_0x49b098[_0x5972d1][_0x325241(0x226)]=_0x3a68cd[0x0],_0x49b098[_0x5972d1]['rack']=_0x3a68cd[0x1],_0x49b098[_0x5972d1][_0x325241(0x1f9)]=_0x3a68cd[0x2],_0x49b098[_0x5972d1][_0x325241(0x1fe)]=_0x3a68cd[0x3],_0x49b098[_0x5972d1][_0x325241(0x271)]=_0x5832e0,_0x49b098[_0x5972d1][_0x325241(0x28e)]=_0x3a68cd[0x5];}}}});}),_0x52ada3[_0xe45e27(0x284)]((_0x20de59,_0x281ca0)=>{var _0x1cb03e=_0xe45e27;_0x49b098[_0x281ca0][_0x1cb03e(0x296)]=_0x20de59;}),_0x297b88['forEach']((_0x144256,_0xdd5790)=>{var _0x216155=_0xe45e27;_0x49b098[_0xdd5790][_0x216155(0x253)]=_0x144256;}),_0x593b3f[_0xe45e27(0x284)]((_0x166f8a,_0x13b91a)=>{var _0x39732b=_0xe45e27;_0x49b098[_0x13b91a][_0x39732b(0x232)]=_0x166f8a;}),_0x5efcb2[_0xe45e27(0x284)]((_0x44c479,_0x753f14)=>{var _0x5b248f=_0xe45e27;_0x49b098[_0x753f14][_0x5b248f(0x266)]=_0x44c479;}),_0x163f6c[_0xe45e27(0x284)]((_0x102c12,_0x4e637d)=>{_0x49b098[_0x4e637d]['new_adjust_qty']=_0x102c12;}),_0xa89fe8[_0xe45e27(0x284)]((_0xe1e56b,_0x1d8c20)=>{_0x49b098[_0x1d8c20]['unit']=_0xe1e56b;}),_0x3c4222[_0xe45e27(0x284)]((_0x1b9442,_0x1a6680)=>{var _0x2a921a=_0xe45e27;_0x49b098[_0x1a6680][_0x2a921a(0x2a9)]=_0x1b9442;}),_0x16ab76[_0xe45e27(0x284)]((_0x481c55,_0x1a6adf)=>{var _0x2e46c6=_0xe45e27;_0x49b098[_0x1a6adf][_0x2e46c6(0x218)]=_0x481c55;}),_0x2e1c7b[_0xe45e27(0x284)]((_0x1b04df,_0x3f0d09)=>{var _0x3b279b=_0xe45e27;_0x49b098[_0x3f0d09][_0x3b279b(0x2a7)]=_0x1b04df;}),_0x337ff3[_0xe45e27(0x284)]((_0x308fd7,_0x3684fe)=>{var _0x4b9c24=_0xe45e27;_0x49b098[_0x3684fe][_0x4b9c24(0x269)]=_0x308fd7;}),_0x5e8d2d[_0xe45e27(0x284)]((_0x2a1fa9,_0x572a83)=>{var _0x24112a=_0xe45e27;_0x49b098[_0x572a83][_0x24112a(0x242)]=_0x2a1fa9;}),_0x385d3a[_0xe45e27(0x284)]((_0x12f47b,_0x321632)=>{_0x49b098[_0x321632]['production_date']=_0x12f47b;}),_0x13813a['forEach']((_0x1deacf,_0x1592ab)=>{_0x49b098[_0x1592ab]['prod_cat']=_0x1deacf;}),_0x408a9d[_0xe45e27(0x284)]((_0x17aecc,_0x5ea45d)=>{_0x49b098[_0x5ea45d]['room_names']=_0x17aecc;}),_0x52b64d['forEach']((_0x241e08,_0x4d2531)=>{var _0x244ed9=_0xe45e27;_0x49b098[_0x4d2531][_0x244ed9(0x2a4)]=_0x241e08;}),_0x1d9af6['forEach']((_0x597b8f,_0x5818ae)=>{var _0x2f1bee=_0xe45e27;_0x49b098[_0x5818ae][_0x2f1bee(0x268)]=_0x597b8f;}),_0xea6fe1['forEach']((_0x81892c,_0x3286e3)=>{var _0x58e485=_0xe45e27;_0x49b098[_0x3286e3][_0x58e485(0x24c)]=_0x81892c;});const _0x4a70f3=_0x49b098[_0xe45e27(0x24f)](_0x3252f8=>_0x3252f8['adjust_qty']!=='0'&&_0x3252f8[_0xe45e27(0x266)]!=='');var _0x51fe2f=0x0;_0x4a70f3[_0xe45e27(0x284)](_0x27add7=>{var _0x31f5a1=_0xe45e27;console[_0x31f5a1(0x224)]('foreach\x20newproduct',_0x27add7),parseInt(_0x27add7[_0x31f5a1(0x266)])<=0x0&&_0x51fe2f++;});if(_0x51fe2f!=0x0)return _0x5b2907[_0xe45e27(0x254)](_0xe45e27(0x2c5),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x103179[_0xe45e27(0x282)]('back');const _0x5115dd=new adjustment({'warehouse_name':_0x535801,'date':_0x15781f,'product':_0x4a70f3,'note':_0x225c77,'room':_0x2aaf82,'invoice':_0x106e4f,'JO_number':_0x37fa34,'expiry_date':_0x32336a}),_0x31a240=await _0x5115dd[_0xe45e27(0x2b6)]();_0x5b2907['flash'](_0xe45e27(0x2b1),_0xe45e27(0x289)),_0x103179[_0xe45e27(0x282)](_0xe45e27(0x2b2)+_0x31a240['_id']);}catch(_0x443b9e){console[_0xe45e27(0x224)](_0x443b9e),_0x103179[_0xe45e27(0x1f5)](0xc8)['json']({'message':_0x443b9e[_0xe45e27(0x2ad)]});}}),router[a0_0x718f0d(0x22e)](a0_0x718f0d(0x1f6),auth,async(_0x23959d,_0x21467b)=>{var _0x3a25be=a0_0x718f0d;try{const {username:_0x4cac12,email:_0x467c3f,role:_0x2edf00}=_0x23959d[_0x3a25be(0x22a)],_0x513056=_0x23959d['user'],_0x3c1c20=await profile['findOne']({'email':_0x513056[_0x3a25be(0x212)]}),_0x1cf9cd=await master_shop['find'](),_0x11fe03=_0x23959d[_0x3a25be(0x23d)]['id'],_0x5fbeeb=await adjustment[_0x3a25be(0x2af)]({'_id':_0x11fe03}),_0x211a80=await purchases[_0x3a25be(0x29a)]([{'$match':{'warehouse_name':_0x5fbeeb['warehouse_name']}},{'$unwind':_0x3a25be(0x27c)},{'$group':{'_id':_0x3a25be(0x260)}}]),_0x5690c8=await product[_0x3a25be(0x2b3)]({}),_0x4ebd30=await warehouse['aggregate']([{'$match':{'name':_0x5fbeeb['warehouse_name']}},{'$unwind':_0x3a25be(0x27a)},{'$group':{'_id':_0x3a25be(0x225),'name':{'$first':_0x3a25be(0x210)},'product_stock':{'$first':_0x3a25be(0x29d)},'bay':{'$first':_0x3a25be(0x278)},'bin':{'$first':_0x3a25be(0x222)},'type':{'$first':_0x3a25be(0x239)},'floorlevel':{'$first':_0x3a25be(0x2ae)},'primary_code':{'$first':_0x3a25be(0x2a8)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x3a25be(0x202)},'rack':{'$first':_0x3a25be(0x1f0)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x3a25be(0x230)},'production_date':{'$first':_0x3a25be(0x29e)},'batch_code':{'$first':_0x3a25be(0x209)},'room':{'$first':_0x3a25be(0x24b)}}}]);if(_0x1cf9cd[0x0][_0x3a25be(0x283)]==_0x3a25be(0x272)){var _0x1f64b3=users[_0x3a25be(0x23c)];console['log'](_0x1f64b3);}else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]=='Hindi')var _0x1f64b3=users[_0x3a25be(0x2b9)];else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]==_0x3a25be(0x219))var _0x1f64b3=users['German'];else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]=='Spanish')var _0x1f64b3=users[_0x3a25be(0x273)];else{if(_0x1cf9cd[0x0]['language']==_0x3a25be(0x1fd))var _0x1f64b3=users[_0x3a25be(0x1fd)];else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]==_0x3a25be(0x27b))var _0x1f64b3=users[_0x3a25be(0x1f8)];else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]==_0x3a25be(0x20b))var _0x1f64b3=users[_0x3a25be(0x20b)];else{if(_0x1cf9cd[0x0][_0x3a25be(0x283)]==_0x3a25be(0x1ff))var _0x1f64b3=users[_0x3a25be(0x245)];}}}}}}}_0x21467b['render']('edit_adjustment_view',{'success':_0x23959d[_0x3a25be(0x254)](_0x3a25be(0x2b1)),'errors':_0x23959d[_0x3a25be(0x254)](_0x3a25be(0x2c5)),'role':_0x513056,'profile':_0x3c1c20,'adjustment':_0x5fbeeb,'stock':_0x4ebd30,'master_shop':_0x1cf9cd,'warehouse_name':_0x211a80,'unit':_0x5690c8,'language':_0x1f64b3});}catch(_0x35a2dc){console['log'](_0x35a2dc),_0x21467b[_0x3a25be(0x1f5)](0xc8)[_0x3a25be(0x267)]({'message':_0x35a2dc['message']});}}),router[a0_0x718f0d(0x28b)](a0_0x718f0d(0x1f6),auth,async(_0x39595d,_0x2a2f1a)=>{var _0xf3447e=a0_0x718f0d;try{const _0x57b31c=_0x39595d[_0xf3447e(0x23d)]['id'],{warehouse_name:_0x62ff70,Room_name:_0x386126}=_0x39595d['body'],_0x5ad839=await adjustment['findById']({'_id':_0x57b31c}),_0x289d5b=_0x5ad839[_0xf3447e(0x2b7)][_0xf3447e(0x252)](async _0x41654f=>{var _0x304f3f=_0xf3447e;if(_0x41654f[_0x304f3f(0x266)]>0x0){var _0x2fd22b=await warehouse[_0x304f3f(0x25d)]({'name':_0x62ff70,'room':_0x41654f[_0x304f3f(0x25e)],'warehouse_category':'Raw\x20Materials'});const _0x3118c3=_0x2fd22b['product_details'][_0x304f3f(0x252)](_0x12a586=>{var _0x40e88b=_0x304f3f;if(_0x41654f[_0x40e88b(0x271)]==_0x40e88b(0x208)){if(_0x12a586[_0x40e88b(0x207)]==_0x41654f['product_name']&&_0x12a586[_0x40e88b(0x28e)]==_0x41654f['floorlevel']&&_0x12a586[_0x40e88b(0x271)]==_0x41654f['type']&&_0x12a586[_0x40e88b(0x1fe)]==_0x41654f['bin']&&_0x12a586[_0x40e88b(0x1f9)]==_0x41654f[_0x40e88b(0x1f9)]&&_0x12a586[_0x40e88b(0x200)]==_0x41654f[_0x40e88b(0x200)]&&_0x12a586[_0x40e88b(0x226)]==_0x41654f[_0x40e88b(0x226)]&&_0x12a586[_0x40e88b(0x269)]==_0x41654f[_0x40e88b(0x269)]&&_0x12a586[_0x40e88b(0x2a7)]==_0x41654f[_0x40e88b(0x2a7)]&&_0x12a586[_0x40e88b(0x2b8)]==_0x41654f[_0x40e88b(0x2b8)]&&_0x12a586['invoice']==_0x41654f[_0x40e88b(0x24c)]&&_0x12a586[_0x40e88b(0x2a2)]==_0x41654f[_0x40e88b(0x253)]){var _0x2854ee;_0x2854ee=_0x41654f[_0x40e88b(0x266)],_0x41654f['prod_cat']=='S'&&(_0x2854ee=_0x41654f[_0x40e88b(0x266)]),_0x12a586['product_stock']=_0x12a586[_0x40e88b(0x24e)]-_0x2854ee;}}else{if(_0x12a586[_0x40e88b(0x207)]==_0x41654f[_0x40e88b(0x207)]&&_0x12a586[_0x40e88b(0x28e)]==_0x41654f[_0x40e88b(0x28e)]&&_0x12a586['type']==_0x41654f[_0x40e88b(0x271)]&&_0x12a586[_0x40e88b(0x1fe)]==_0x41654f[_0x40e88b(0x1fe)]&&_0x12a586['bay']==_0x41654f['bay']&&_0x12a586[_0x40e88b(0x200)]==_0x41654f['rack']&&_0x12a586[_0x40e88b(0x226)]==_0x41654f[_0x40e88b(0x226)]&&_0x12a586[_0x40e88b(0x269)]==_0x41654f['expiry_date']&&_0x12a586[_0x40e88b(0x2a7)]==_0x41654f[_0x40e88b(0x2a7)]&&_0x12a586[_0x40e88b(0x2b8)]==_0x41654f[_0x40e88b(0x2b8)]&&_0x12a586['invoice']==_0x41654f[_0x40e88b(0x24c)]&&_0x12a586[_0x40e88b(0x2a2)]==_0x41654f[_0x40e88b(0x253)]){console[_0x40e88b(0x224)](_0x41654f);var _0x2854ee;_0x2854ee=_0x41654f[_0x40e88b(0x266)],_0x41654f['prod_cat']=='S'&&(_0x2854ee=_0x41654f['adjust_qty']),console[_0x40e88b(0x224)](_0x2854ee+_0x40e88b(0x22c)+_0x41654f[_0x40e88b(0x266)]+_0x40e88b(0x22c)+_0x12a586[_0x40e88b(0x24d)]+_0x40e88b(0x22c)+_0x41654f['prod_cat']),_0x12a586[_0x40e88b(0x24e)]=_0x12a586[_0x40e88b(0x24e)]+_0x2854ee;}}});}return _0x2fd22b;});Promise[_0xf3447e(0x248)](_0x289d5b)[_0xf3447e(0x2b5)](async _0x30071d=>{var _0xd1b13e=_0xf3447e;try{for(const _0x3c7687 of _0x30071d){await _0x3c7687[_0xd1b13e(0x2b6)]();}_0x5ad839[_0xd1b13e(0x29b)]=_0xd1b13e(0x279);const _0x5653d7=await _0x5ad839[_0xd1b13e(0x2b6)](),_0x30fb09=await master_shop['find'](),_0x4f91c5=await email_settings[_0xd1b13e(0x25d)](),_0x5380f6=await supervisor_settings[_0xd1b13e(0x2b3)]();var _0x155295=_0x5ad839[_0xd1b13e(0x2b7)],_0x2decb8='',_0x429f0e;for(_0x429f0e in _0x155295){_0x2decb8+=_0xd1b13e(0x294)+_0xd1b13e(0x1ed)+_0x155295[_0x429f0e][_0xd1b13e(0x207)]+_0xd1b13e(0x213)+_0xd1b13e(0x1ed)+_0x155295[_0x429f0e][_0xd1b13e(0x218)]+_0xd1b13e(0x213)+_0xd1b13e(0x1ed)+_0x155295[_0x429f0e]['adjust_qty']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x155295[_0x429f0e]['unit']+_0xd1b13e(0x213)+_0xd1b13e(0x1ed)+_0x155295[_0x429f0e]['secondary_unit']+_0xd1b13e(0x213)+_0xd1b13e(0x1ed)+_0x5ad839['warehouse_name']+'</td>'+_0xd1b13e(0x1ed)+_0x155295[_0x429f0e][_0xd1b13e(0x25e)]+_0xd1b13e(0x213)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x155295[_0x429f0e]['storage']+_0x155295[_0x429f0e][_0xd1b13e(0x200)]+_0x155295[_0x429f0e][_0xd1b13e(0x1f9)]+_0x155295[_0x429f0e][_0xd1b13e(0x1fe)]+_0x155295[_0x429f0e][_0xd1b13e(0x271)][0x0]+_0x155295[_0x429f0e][_0xd1b13e(0x28e)]+'</td>',_0xd1b13e(0x235);}let _0xde81e9=nodemailer[_0xd1b13e(0x264)]({'host':_0x4f91c5[_0xd1b13e(0x205)],'port':Number(_0x4f91c5[_0xd1b13e(0x288)]),'secure':![],'auth':{'user':_0x4f91c5[_0xd1b13e(0x212)],'pass':_0x4f91c5[_0xd1b13e(0x263)]}}),_0x4760f9={'from':_0x4f91c5[_0xd1b13e(0x212)],'to':_0x5380f6[0x0]['RMSEmail'],'subject':_0xd1b13e(0x251),'attachments':[{'filename':'Logo.png','path':__dirname+_0xd1b13e(0x2bc)+'/upload/'+_0x30fb09[0x0][_0xd1b13e(0x292)],'cid':_0xd1b13e(0x298)}],'html':_0xd1b13e(0x27d)+_0xd1b13e(0x23e)+_0xd1b13e(0x2ba)+_0xd1b13e(0x217)+_0xd1b13e(0x28a)+_0xd1b13e(0x217)+_0xd1b13e(0x22b)+'</div>'+_0xd1b13e(0x217)+_0xd1b13e(0x20f)+_0x30fb09[0x0][_0xd1b13e(0x204)]+_0xd1b13e(0x28f)+_0xd1b13e(0x20c)+_0xd1b13e(0x20c)+_0xd1b13e(0x201)+_0xd1b13e(0x217)+_0xd1b13e(0x286)+_0xd1b13e(0x1f3)+_0x5ad839[_0xd1b13e(0x24c)]+'\x20'+_0xd1b13e(0x244)+_0xd1b13e(0x234)+_0x5ad839[_0xd1b13e(0x229)]+'\x20'+'</span>'+'</h5>'+_0xd1b13e(0x20c)+_0xd1b13e(0x233)+_0xd1b13e(0x276)+_0xd1b13e(0x294)+_0xd1b13e(0x246)+_0xd1b13e(0x28d)+_0xd1b13e(0x261)+_0xd1b13e(0x1f4)+_0xd1b13e(0x29c)+_0xd1b13e(0x2b0)+_0xd1b13e(0x1ef)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+'</tr>'+_0xd1b13e(0x1fb)+_0xd1b13e(0x227)+'\x20'+_0x2decb8+'\x20'+_0xd1b13e(0x2ab)+'</table>'+_0xd1b13e(0x217)+_0xd1b13e(0x262)+_0xd1b13e(0x250)+_0x30fb09[0x0][_0xd1b13e(0x204)]+_0xd1b13e(0x26c)+'</div>'+_0xd1b13e(0x20c)+'</body></html>'};_0xde81e9[_0xd1b13e(0x258)](_0x4760f9,function(_0x1862ce,_0x243373){var _0x5eb17e=_0xd1b13e;_0x1862ce?(console[_0x5eb17e(0x224)](_0x1862ce),console['log']('Error\x20Occurs')):console['log'](_0x5eb17e(0x21f));}),_0x39595d[_0xd1b13e(0x254)]('success','adjustment\x20Finalized\x20successfully'),_0x2a2f1a[_0xd1b13e(0x282)]('/picking_list/PDF_adjustment_rm/'+_0x5653d7[_0xd1b13e(0x2a2)]);}catch(_0x141d66){console[_0xd1b13e(0x21b)](_0x141d66),_0x2a2f1a[_0xd1b13e(0x1f5)](0x1f4)[_0xd1b13e(0x267)]({'error':_0xd1b13e(0x237)});}})[_0xf3447e(0x297)](_0x22e7cb=>{var _0x3df4b3=_0xf3447e;console['error'](_0x22e7cb),_0x2a2f1a['status'](0x1f4)['json']({'error':_0x3df4b3(0x223)});});}catch(_0xa764d6){console[_0xf3447e(0x224)](_0xa764d6),_0x2a2f1a['status'](0xc8)[_0xf3447e(0x267)]({'message':_0xa764d6[_0xf3447e(0x2ad)]});}}),router['get']('/view/:id',auth,async(_0x452ad3,_0xf80b6e)=>{var _0x49afed=a0_0x718f0d;try{const {username:_0x39f1b9,email:_0x483593,role:_0x3a9fd5}=_0x452ad3[_0x49afed(0x22a)],_0x38485f=_0x452ad3[_0x49afed(0x22a)],_0x566a93=await profile[_0x49afed(0x25d)]({'email':_0x38485f['email']}),_0x3048fc=await master_shop['find'](),_0x13ff44=_0x452ad3['params']['id'],_0xf2309c=await adjustment[_0x49afed(0x2af)]({'_id':_0x13ff44}),_0x248677=await purchases['aggregate']([{'$match':{'warehouse_name':_0xf2309c[_0x49afed(0x20d)]}},{'$unwind':_0x49afed(0x27c)},{'$group':{'_id':_0x49afed(0x260)}}]),_0x2534d1=await product['find']({}),_0x248708=await warehouse[_0x49afed(0x29a)]([{'$match':{'name':_0xf2309c[_0x49afed(0x20d)]}},{'$unwind':_0x49afed(0x27a)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x49afed(0x210)},'product_stock':{'$first':_0x49afed(0x29d)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x49afed(0x222)},'type':{'$first':_0x49afed(0x239)},'floorlevel':{'$first':_0x49afed(0x2ae)},'primary_code':{'$first':_0x49afed(0x2a8)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x49afed(0x255)},'storage':{'$first':_0x49afed(0x202)},'rack':{'$first':_0x49afed(0x1f0)},'maxPerUnit':{'$first':_0x49afed(0x2c0)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x49afed(0x29e)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x49afed(0x24b)}}}]);let _0x3979cb;if(_0x38485f[_0x49afed(0x2be)]==_0x49afed(0x1f2)){const _0x2dab80=await staff[_0x49afed(0x25d)]({'email':_0x38485f['email']});_0x3979cb=await warehouse[_0x49afed(0x29a)]([{'$match':{'status':_0x49afed(0x274),'name':_0x2dab80['warehouse'],'warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x49afed(0x21e),'name':{'$first':'$name'}}}]);}else _0x3979cb=await warehouse['aggregate']([{'$match':{'status':_0x49afed(0x274),'warehouse_category':_0x49afed(0x22d),'name':{'$ne':_0x49afed(0x299)}}},{'$group':{'_id':_0x49afed(0x21e),'name':{'$first':'$name'}}}]);if(_0x3048fc[0x0]['language']==_0x49afed(0x272)){var _0x1d081f=users[_0x49afed(0x23c)];console[_0x49afed(0x224)](_0x1d081f);}else{if(_0x3048fc[0x0][_0x49afed(0x283)]=='Hindi')var _0x1d081f=users['Hindi'];else{if(_0x3048fc[0x0][_0x49afed(0x283)]==_0x49afed(0x219))var _0x1d081f=users[_0x49afed(0x219)];else{if(_0x3048fc[0x0][_0x49afed(0x283)]==_0x49afed(0x273))var _0x1d081f=users['Spanish'];else{if(_0x3048fc[0x0]['language']==_0x49afed(0x1fd))var _0x1d081f=users[_0x49afed(0x1fd)];else{if(_0x3048fc[0x0][_0x49afed(0x283)]==_0x49afed(0x27b))var _0x1d081f=users[_0x49afed(0x1f8)];else{if(_0x3048fc[0x0][_0x49afed(0x283)]==_0x49afed(0x20b))var _0x1d081f=users[_0x49afed(0x20b)];else{if(_0x3048fc[0x0][_0x49afed(0x283)]==_0x49afed(0x1ff))var _0x1d081f=users['Arabic'];}}}}}}}_0xf80b6e['render'](_0x49afed(0x211),{'success':_0x452ad3[_0x49afed(0x254)](_0x49afed(0x2b1)),'errors':_0x452ad3['flash']('errors'),'role':_0x38485f,'profile':_0x566a93,'adjustment':_0xf2309c,'stock':_0x248708,'master_shop':_0x3048fc,'warehouse_name':_0x248677,'unit':_0x2534d1,'language':_0x1d081f,'warehouse':_0x3979cb});}catch(_0xedf421){console['log'](_0xedf421),_0xf80b6e[_0x49afed(0x1f5)](0xc8)['json']({'message':_0xedf421[_0x49afed(0x2ad)]});}}),router[a0_0x718f0d(0x28b)](a0_0x718f0d(0x27e),auth,async(_0x3e43fd,_0x1d1bb8)=>{var _0x330566=a0_0x718f0d;try{const _0x3b8cc3=_0x3e43fd['params']['id'],_0xc50f4f=await adjustment[_0x330566(0x2af)]({'_id':_0x3b8cc3}),_0x1869df=await warehouse[_0x330566(0x25d)]({'name':_0xc50f4f[_0x330566(0x20d)],'room':_0xc50f4f[_0x330566(0x24a)]}),{warehouse_name:_0x156a2f,date:_0x5d5972,prod_name:_0x3b3451,level:_0xb3ef1d,isle:_0x35a197,pallet:_0x14966b,stock:_0x2d9389,types:_0x184adc,adjust_qty:_0x30cda2,new_adjust_qty:_0x3efabf,note:_0x112085,Room_name:_0x57b103,invoice:_0x1983e6,JO_number:_0x5ed14e,expiry_date:_0x5accfb}=_0x3e43fd[_0x330566(0x221)];if(typeof _0x3b3451==_0x330566(0x280))var _0x3882d7=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x25c)]],_0x119843=[_0x3e43fd[_0x330566(0x221)]['level']],_0x2dfa7f=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x240)]],_0x5c2bcc=[_0x3e43fd[_0x330566(0x221)]['types']],_0x92afe1=[_0x3e43fd[_0x330566(0x221)]['New_Qty_Converted_adj']],_0x2cdd57=[_0x3e43fd[_0x330566(0x221)]['New_Qty_Converted']],_0x57e9d5=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x26f)]],_0x57ac5a=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x1fc)]],_0x26cfdd=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x23a)]],_0x3d00d9=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x2a7)]],_0x368e03=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x269)]],_0x41763a=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x25f)]],_0x39f29b=[_0x3e43fd['body'][_0x330566(0x2b8)]],_0x5a93c2=[_0x3e43fd[_0x330566(0x221)]['prod_cat']],_0x517210=[_0x3e43fd['body'][_0x330566(0x293)]],_0x3c3586=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x203)]],_0x5de846=[_0x3e43fd[_0x330566(0x221)][_0x330566(0x285)]];else var _0x3882d7=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x25c)]],_0x119843=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x2c1)]],_0x2dfa7f=[..._0x3e43fd['body'][_0x330566(0x240)]],_0x5c2bcc=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x232)]],_0x92afe1=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x29f)]],_0x2cdd57=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x295)]],_0x57e9d5=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x206)]],_0x57ac5a=[..._0x3e43fd['body'][_0x330566(0x1fc)]],_0x26cfdd=[..._0x3e43fd['body'][_0x330566(0x23a)]],_0x3d00d9=[..._0x3e43fd['body'][_0x330566(0x2a7)]],_0x368e03=[..._0x3e43fd['body'][_0x330566(0x269)]],_0x41763a=[..._0x3e43fd[_0x330566(0x221)]['max_per_unit']],_0x39f29b=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x2b8)]],_0x5a93c2=[..._0x3e43fd[_0x330566(0x221)]['prod_cat']],_0x517210=[..._0x3e43fd['body'][_0x330566(0x293)]],_0x3c3586=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x203)]],_0x5de846=[..._0x3e43fd[_0x330566(0x221)][_0x330566(0x285)]];const _0x2ad17b=_0x3882d7['map'](_0x538fde=>{return _0x538fde={'product_name':_0x538fde};});_0x119843[_0x330566(0x284)]((_0x5e84df,_0x53dc07)=>{var _0x46f322=_0x330566;_0x517210[_0x46f322(0x284)]((_0xfc002b,_0x2017a9)=>{var _0x1523c8=_0x46f322;if(_0xfc002b=='Receiving\x20Area'&&_0x53dc07==_0x2017a9){var _0xbdb038=_0x5e84df['slice'](0x3);_0x2ad17b[_0x53dc07]['storage']=_0x5e84df[0x0],_0x2ad17b[_0x53dc07][_0x1523c8(0x200)]=_0x5e84df[0x1],_0x2ad17b[_0x53dc07][_0x1523c8(0x1f9)]=0x0,_0x2ad17b[_0x53dc07][_0x1523c8(0x1fe)]=0x0,_0x2ad17b[_0x53dc07][_0x1523c8(0x271)]=_0x1523c8(0x275),_0x2ad17b[_0x53dc07][_0x1523c8(0x28e)]=_0xbdb038;}else{if(_0xfc002b==_0x1523c8(0x231)&&_0x53dc07==_0x2017a9){var _0xbdb038=_0x5e84df[_0x1523c8(0x249)](0x3);_0x2ad17b[_0x53dc07][_0x1523c8(0x226)]=_0x5e84df[0x0],_0x2ad17b[_0x53dc07]['rack']=_0x5e84df[0x1],_0x2ad17b[_0x53dc07][_0x1523c8(0x1f9)]=0x0,_0x2ad17b[_0x53dc07][_0x1523c8(0x1fe)]=0x0,_0x2ad17b[_0x53dc07][_0x1523c8(0x271)]=_0x1523c8(0x275),_0x2ad17b[_0x53dc07][_0x1523c8(0x28e)]=_0x5e84df[0x5];}else{if(_0x53dc07==_0x2017a9){var _0x1e2c9b;if(_0x5e84df[0x4]=='L')_0x1e2c9b=_0x1523c8(0x1fa);else _0x5e84df[0x4]=='F'&&(_0x1e2c9b=_0x1523c8(0x275));_0x2ad17b[_0x53dc07][_0x1523c8(0x226)]=_0x5e84df[0x0],_0x2ad17b[_0x53dc07][_0x1523c8(0x200)]=_0x5e84df[0x1],_0x2ad17b[_0x53dc07]['bay']=_0x5e84df[0x2],_0x2ad17b[_0x53dc07][_0x1523c8(0x1fe)]=_0x5e84df[0x3],_0x2ad17b[_0x53dc07]['type']=_0x1e2c9b,_0x2ad17b[_0x53dc07][_0x1523c8(0x28e)]=_0x5e84df[0x5];}}}});}),_0x2dfa7f[_0x330566(0x284)]((_0x2917f0,_0x2824f3)=>{var _0x14ec47=_0x330566;_0x2ad17b[_0x2824f3][_0x14ec47(0x296)]=_0x2917f0;}),_0x5c2bcc[_0x330566(0x284)]((_0x3a0725,_0x2cd35f)=>{var _0x5010e6=_0x330566;_0x2ad17b[_0x2cd35f][_0x5010e6(0x232)]=_0x3a0725;}),_0x92afe1[_0x330566(0x284)]((_0x4c489a,_0x550cf6)=>{_0x2ad17b[_0x550cf6]['adjust_qty']=_0x4c489a;}),_0x2cdd57[_0x330566(0x284)]((_0x4c9657,_0x53c531)=>{_0x2ad17b[_0x53c531]['new_adjust_qty']=_0x4c9657;}),_0x57e9d5['forEach']((_0x1c8e27,_0x5d40ae)=>{var _0x57c152=_0x330566;_0x2ad17b[_0x5d40ae][_0x57c152(0x206)]=_0x1c8e27;}),_0x57ac5a[_0x330566(0x284)]((_0x3db4b6,_0x945d9)=>{_0x2ad17b[_0x945d9]['secondary_unit']=_0x3db4b6;}),_0x26cfdd[_0x330566(0x284)]((_0x61d4d7,_0x313592)=>{var _0x52a1a0=_0x330566;_0x2ad17b[_0x313592][_0x52a1a0(0x218)]=_0x61d4d7;}),_0x3d00d9[_0x330566(0x284)]((_0x569245,_0x10bb0d)=>{var _0x9c4afe=_0x330566;_0x2ad17b[_0x10bb0d][_0x9c4afe(0x2a7)]=_0x569245;}),_0x368e03[_0x330566(0x284)]((_0x24cab8,_0x142850)=>{_0x2ad17b[_0x142850]['expiry_date']=_0x24cab8;}),_0x41763a[_0x330566(0x284)]((_0x390fad,_0x1763f6)=>{var _0x150f82=_0x330566;_0x2ad17b[_0x1763f6][_0x150f82(0x242)]=_0x390fad;}),_0x39f29b['forEach']((_0x557eaa,_0x44c2f3)=>{_0x2ad17b[_0x44c2f3]['production_date']=_0x557eaa;}),_0x5a93c2[_0x330566(0x284)]((_0xd1ceb1,_0x123a3b)=>{var _0x312634=_0x330566;_0x2ad17b[_0x123a3b][_0x312634(0x2c2)]=_0xd1ceb1;}),_0x517210[_0x330566(0x284)]((_0x281eaf,_0x1400ce)=>{var _0xd51a9e=_0x330566;_0x2ad17b[_0x1400ce][_0xd51a9e(0x25e)]=_0x281eaf;}),_0x3c3586[_0x330566(0x284)]((_0x407a8b,_0xaaef38)=>{_0x2ad17b[_0xaaef38]['primary_code']=_0x407a8b;}),_0x5de846[_0x330566(0x284)]((_0x1c9511,_0x110334)=>{_0x2ad17b[_0x110334]['secondary_code']=_0x1c9511;});const _0x99e095=_0x2ad17b[_0x330566(0x24f)](_0x55181d=>_0x55181d['adjust_qty']!=='0'&&_0x55181d['adjust_qty']!=='');var _0x20d07f=0x0;_0x99e095[_0x330566(0x284)](_0x73127e=>{var _0x3cb10f=_0x330566;console[_0x3cb10f(0x224)](_0x3cb10f(0x2c4),_0x73127e),parseInt(_0x73127e[_0x3cb10f(0x266)])<=0x0&&_0x20d07f++;});if(_0x20d07f!=0x0)return _0x3e43fd[_0x330566(0x254)](_0x330566(0x2c5),_0x330566(0x1f1)),_0x1d1bb8[_0x330566(0x282)](_0x330566(0x281));_0xc50f4f['warehouse_name']=_0x156a2f,_0xc50f4f[_0x330566(0x229)]=_0x5d5972,_0xc50f4f[_0x330566(0x2b7)]=_0x99e095,_0xc50f4f['note']=_0x112085,_0xc50f4f[_0x330566(0x24c)]=_0x1983e6,_0xc50f4f[_0x330566(0x265)]='False';const _0x389dc4=await _0xc50f4f[_0x330566(0x2b6)]();_0x3e43fd[_0x330566(0x254)]('success',_0x330566(0x25b)),_0x1d1bb8[_0x330566(0x282)](_0x330566(0x23b));}catch(_0x3ecda0){console[_0x330566(0x224)](_0x3ecda0);}}),router[a0_0x718f0d(0x28b)](a0_0x718f0d(0x241),async(_0x2a2210,_0x144cd3)=>{var _0x4d634d=a0_0x718f0d;const {primary_code:_0x407400,warehouse_data:_0x57f1ec,rooms_data:_0x47287d,Roomslist:_0x4e0cc7}=_0x2a2210[_0x4d634d(0x221)],_0xe64391=_0x4e0cc7[_0x4d634d(0x22f)](','),_0xcbca94=[];async function _0x31680f(_0x1f526c){var _0x56714d=_0x4d634d;const _0x19ebbe=await warehouse[_0x56714d(0x29a)]([{'$match':{'name':_0x57f1ec,'room':_0x1f526c}},{'$unwind':_0x56714d(0x27a)},{'$match':{'product_details.primary_code':_0x407400}},{'$group':{'_id':_0x56714d(0x225),'name':{'$first':_0x56714d(0x210)},'product_stock':{'$first':_0x56714d(0x29d)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x56714d(0x216)},'product_code':{'$first':_0x56714d(0x255)},'level':{'$first':_0x56714d(0x278)},'isle':{'$first':_0x56714d(0x222)},'type':{'$first':_0x56714d(0x239)},'pallet':{'$first':_0x56714d(0x2ae)},'unit':{'$first':_0x56714d(0x25a)},'secondary_unit':{'$first':_0x56714d(0x27f)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x56714d(0x29e)},'maxPerUnit':{'$first':_0x56714d(0x2c0)},'batch_code':{'$first':_0x56714d(0x209)},'product_cat':{'$first':_0x56714d(0x20e)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x56714d(0x24b)},'invoice':{'$first':'$product_details.invoice'}}}]),_0x339e74=await warehouse[_0x56714d(0x29a)]([{'$match':{'name':_0x57f1ec,'room':_0x1f526c}},{'$unwind':_0x56714d(0x27a)},{'$match':{'product_details.secondary_code':_0x407400}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x56714d(0x210)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x56714d(0x216)},'product_code':{'$first':_0x56714d(0x255)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x56714d(0x222)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x56714d(0x27f)},'storage':{'$first':_0x56714d(0x202)},'rack':{'$first':_0x56714d(0x1f0)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x56714d(0x29e)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x56714d(0x209)},'product_cat':{'$first':_0x56714d(0x20e)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x56714d(0x24b)}}}]);if(_0x19ebbe[_0x56714d(0x2c3)]>0x0)_0xcbca94['push'](_0x19ebbe);else _0x339e74[_0x56714d(0x2c3)]>0x0&&_0xcbca94['push'](_0x339e74);}const _0xfd2826=_0xe64391[_0x4d634d(0x252)](_0x4de683=>_0x31680f(_0x4de683));await Promise['all'](_0xfd2826),_0x144cd3[_0x4d634d(0x267)](_0xcbca94);}),router[a0_0x718f0d(0x28b)](a0_0x718f0d(0x291),async(_0xe4ea3d,_0x55e76c)=>{var _0x45f2cf=a0_0x718f0d;const {primaryCode:_0x50ca50,secondaryCode:_0xf57f6,productCode:_0x5b113b,level:_0x214425,isle:_0x4df30d,pallet:_0x2436f3,warehouses:_0x33a387,room:_0x4393c1}=_0xe4ea3d[_0x45f2cf(0x221)];try{const _0xbf6952=await warehouse[_0x45f2cf(0x29a)]([{'$match':{'name':_0x33a387,'room':_0x4393c1}},{'$unwind':_0x45f2cf(0x27a)},{'$match':{'product_details.level':parseInt(_0x214425),'product_details.isle':_0x4df30d,'product_details.pallet':parseInt(_0x2436f3)}},{'$group':{'_id':_0x45f2cf(0x225),'name':{'$first':_0x45f2cf(0x210)},'product_stock':{'$first':_0x45f2cf(0x29d)},'level':{'$first':_0x45f2cf(0x220)},'isle':{'$first':_0x45f2cf(0x21c)},'pallet':{'$first':_0x45f2cf(0x215)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x55e76c[_0x45f2cf(0x1f5)](0xc8)['json'](_0xbf6952);}catch(_0x13cc5b){_0x55e76c[_0x45f2cf(0x1f5)](0x194)[_0x45f2cf(0x267)]({'message':_0x13cc5b[_0x45f2cf(0x2ad)]});}}),module['exports']=router;function a0_0x4640(){var _0x2c7d46=['\x20</h2>','$isAllowEdit','/CheckingWarehouse','image','Rooms','<tr>','New_Qty_Converted','stockBefore','catch','logo','Return\x20Goods','aggregate','finalize','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','$product_details.product_stock','$product_details.production_date','New_Qty_Converted_adj','62802ueYdQB','$_id','_id','1517096xuHsHJ','primary_code','Ambient','250uAkjOI','batch_code','$product_details.primary_code','secondary_unit','$date','</tbody>','prod_invoice','message','$product_details.floorlevel','findById','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','success','/adjustment/preview/','find','503843PdfueC','then','save','product','production_date','Hindi','</head><body>','Receiving\x20Area','/../public','random','role','add_adjustment','$product_details.maxPerUnit','level','prod_cat','length','foreach\x20newproduct','errors','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','1162479cxIbCO','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.rack','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','staff','\x20Order\x20Number\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','status','/preview/:id','$warehouse_name','Portuguese','bay','Level','</thead>','Secondary_units','French','bin','Arabic\x20(ae)','rack','<hr\x20class=\x22my-3\x22>','$product_details.storage','prime1','site_title','host','unit','product_name','minus','$product_details.batch_code','156277tcClTd','Chinese','</div>','warehouse_name','$product_details.product_cat','<h2>\x20','$product_details.product_name','edit_adjustment','email','</td>','toString','$product_details.pallet','$product_details.secondary_code','<div>','product_code','German','master','error','$product_details.isle','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$name','Email\x20sent\x20successfully','$product_details.level','body','$product_details.bin','An\x20error\x20occurred.','log','$product_details._id','storage','<tbody\x20style=\x22text-align:\x20center;\x22>','$finalize','date','user','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','\x20<>\x20','Raw\x20Materials','get','split','$product_details.expiry_date','Shelves','types','<table\x20style=\x22width:\x20100%\x20!important;\x22>','\x20Order\x20Date\x20:\x20','</tr>','20hWtjVL','An\x20error\x20occurred\x20while\x20saving\x20data.','../models/all_models','$product_details.type','prod_code','/adjustment/view','English','params','<html><head><title></title>','Return\x20Rooms','stock','/barcode_scanner','maxperunit','282925cQuZyF','<span\x20style=\x22float:\x20right;\x22>','Arabic','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','Router','all','slice','room','$room','invoice','maxPerUnit','product_stock','filter','<h5>','Adjustment\x20Mail','map','id_transaction_from','flash','$product_details.product_code','../middleware/auth','4429392hUvJuf','sendMail','$invoice','$product_details.unit','adjustment\x20data\x20update\x20successfully','prod_name','findOne','room_names','max_per_unit','$product.product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<strong>\x20Regards\x20</strong>','password','createTransport','isAllowEdit','adjust_qty','json','secondary_code','expiry_date','546XavUwi','ADJ-','</h5>','$product.room_names','nodemailer','Primary_Units','warehouse','type','English\x20(US)','Spanish','Enabled','Floor','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','padStart','$product_details.bay','True','$product_details','Portuguese\x20(BR)','$product','<!DOCTYPE\x20html>','/view/:id','$product_details.secondary_unit','string','back','redirect','language','forEach','second1','<h5\x20style=\x22text-align:\x20left;\x22>','9EfJiBg','port','adjustment\x20add\x20successfull','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','post','/view/add_adjustment','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','floorlevel'];a0_0x4640=function(){return _0x2c7d46;};return a0_0x4640();}