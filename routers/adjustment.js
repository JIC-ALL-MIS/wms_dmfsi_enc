function a0_0xb77a(){var _0x11e907=['2070hBiwGK','message','/upload/','$product_details.secondary_unit','$_id','</thead>','map','<tbody\x20style=\x22text-align:\x20center;\x22>','Logo.png','Shelves','max_per_unit','product_details','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','/adjustment/view','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','ADJ-','back','staff','Portuguese','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','push','$product.product_name','_id','Primary_Units','storage','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','aggregate','$product_details.batch_code','$product_details.floorlevel','English','json','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','nodemailer','$product_details','Enclosed','filter','get','password','RMSEmail','bay','../middleware/auth','string','findOne','types','<h5\x20style=\x22text-align:\x20left;\x22>','Router','$name','batch_code','status','split','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','language','primary_code','</table>','8tiSqMG','</body></html>','adjustment','Floor','Return\x20Rooms','product_code','$warehouse_name','prod_name','floorlevel','/view/:id','Return\x20Goods','$product_details.pallet','then','logo','level','prod_invoice','length','$date','role','$product_details.unit','find','/CheckingWarehouse','$product_details.production_date','$product_details._id','$finalize','$product_details.bay','isAllowEdit','adjustment\x20data\x20update\x20successfully','stock','231108JVXMxI','697731dyiWxy','expiry_date','<div>','slice','English\x20(US)','<!DOCTYPE\x20html>','An\x20error\x20occurred\x20while\x20saving\x20data.','Spanish','/barcode_scanner','$product_details.level','2702qcANkt','New_Qty_Converted','room_names','adjustment\x20add\x20successfull','12DwUOAK','$product','$product_details.secondary_code','$product_details.bin','forEach','$product_details.primary_code','catch','prod_code','\x20</h2>','There\x27s\x20a\x20error\x20in\x20this\x20transaction','New_Qty_Converted_adj','Email\x20sent\x20successfully','</div>','site_title','Enabled','$product_details.product_stock','adjustment\x20Finalized\x20successfully','email','bin','foreach\x20newproduct','$product_details.maxProducts','$product_details.storage','unit','post','True','French','error','success','$product_details.maxPerUnit','secondary_code','maxperunit','all','\x20Order\x20Number\x20:\x20','Secondary_units','product_stock','secondary_unit','Receiving\x20Area','2034825gOTSWd','warehouse','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','render','warehouse_name','<tr>','Raw\x20Materials','$product_details.product_cat','date','620073DUhFVX','</span>','new_adjust_qty','</head><body>','production_date','type','$product_details.type','2634BmmEcz','prime1','stockBefore','<span\x20style=\x22float:\x20right;\x22>','$product.room_names','maxPerUnit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','sendMail','rack','product_name','port','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','False','save','second1','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','note','adjust_qty','prod_cat','$product_details.product_name','log','German','Chinese','<h2>\x20','/view/add_adjustment','flash','finalize','Rooms','redirect','\x20<>\x20','../models/all_models','Level','</tr>','Arabic\x20(ae)','findById','padStart','$product_details.rack','body','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','An\x20error\x20occurred.','/../public','floor','user','$isAllowEdit','product','Hindi','image','/preview/:id','random','exports','</td>','694522IJrpNw','$product_details.expiry_date','params','Portuguese\x20(BR)','\x20Order\x20Date\x20:\x20','Adjustment\x20Mail','errors','invoice','Arabic','5907HhUKdI','$product_details.product_code','$room'];a0_0xb77a=function(){return _0x11e907;};return a0_0xb77a();}var a0_0x340bf4=a0_0xf2c5;(function(_0x39ab9b,_0x405ee9){var _0x384b68=a0_0xf2c5,_0x498e39=_0x39ab9b();while(!![]){try{var _0x4982fb=parseInt(_0x384b68(0x1eb))/0x1+-parseInt(_0x384b68(0x263))/0x2+-parseInt(_0x384b68(0x1ec))/0x3*(-parseInt(_0x384b68(0x1fa))/0x4)+-parseInt(_0x384b68(0x21f))/0x5+-parseInt(_0x384b68(0x230))/0x6*(-parseInt(_0x384b68(0x1f6))/0x7)+-parseInt(_0x384b68(0x1ce))/0x8*(-parseInt(_0x384b68(0x229))/0x9)+parseInt(_0x384b68(0x26f))/0xa*(parseInt(_0x384b68(0x26c))/0xb);if(_0x4982fb===_0x405ee9)break;else _0x498e39['push'](_0x498e39['shift']());}catch(_0xddf7f9){_0x498e39['push'](_0x498e39['shift']());}}}(a0_0xb77a,0x7ff5b));const express=require('express'),app=express(),router=express[a0_0x340bf4(0x29c)](),auth=require(a0_0x340bf4(0x297)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x340bf4(0x24e)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x340bf4(0x28f));router[a0_0x340bf4(0x293)]('/view',auth,async(_0x16af58,_0x29c999)=>{var _0x2fb9b2=a0_0x340bf4;try{const {username:_0x486369,email:_0x1b4746,role:_0x4cd728}=_0x16af58[_0x2fb9b2(0x25a)],_0x2491eb=_0x16af58[_0x2fb9b2(0x25a)],_0x305f93=await profile[_0x2fb9b2(0x299)]({'email':_0x2491eb[_0x2fb9b2(0x20b)]}),_0x42c7be=await master_shop[_0x2fb9b2(0x1e2)]();console[_0x2fb9b2(0x244)]('master',_0x42c7be);let _0x126300;if(_0x2491eb[_0x2fb9b2(0x1e0)]=='staff'){const _0x400168=await staff[_0x2fb9b2(0x299)]({'email':_0x2491eb[_0x2fb9b2(0x20b)]});_0x126300=await warehouse['find']({'status':_0x2fb9b2(0x208),'name':_0x400168['warehouse']});}else _0x126300=await warehouse['find']({'status':_0x2fb9b2(0x208)});const _0x221393=await product[_0x2fb9b2(0x1e2)]();let _0xf630fb;if(_0x2491eb['role']==_0x2fb9b2(0x280)){const _0x2e8d3b=await staff[_0x2fb9b2(0x299)]({'email':_0x2491eb[_0x2fb9b2(0x20b)]});_0xf630fb=await adjustment[_0x2fb9b2(0x1e2)]({'warehouse_name':_0x2e8d3b['warehouse']});}else _0xf630fb=await adjustment['aggregate']([{'$unwind':_0x2fb9b2(0x1fb)},{'$group':{'_id':_0x2fb9b2(0x273),'invoice':{'$first':'$invoice'},'date':{'$first':_0x2fb9b2(0x1df)},'warehouse_name':{'$first':_0x2fb9b2(0x1d4)},'room':{'$addToSet':_0x2fb9b2(0x234)},'finalize':{'$first':_0x2fb9b2(0x1e6)},'isAllowEdit':{'$first':_0x2fb9b2(0x25b)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]==_0x2fb9b2(0x1f0)){var _0x7fc3a8=users['English'];console[_0x2fb9b2(0x244)](_0x7fc3a8);}else{if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]=='Hindi')var _0x7fc3a8=users[_0x2fb9b2(0x25d)];else{if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]==_0x2fb9b2(0x245))var _0x7fc3a8=users[_0x2fb9b2(0x245)];else{if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]==_0x2fb9b2(0x1f3))var _0x7fc3a8=users[_0x2fb9b2(0x1f3)];else{if(_0x42c7be[0x0]['language']==_0x2fb9b2(0x213))var _0x7fc3a8=users[_0x2fb9b2(0x213)];else{if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]==_0x2fb9b2(0x266))var _0x7fc3a8=users[_0x2fb9b2(0x281)];else{if(_0x42c7be[0x0]['language']=='Chinese')var _0x7fc3a8=users[_0x2fb9b2(0x246)];else{if(_0x42c7be[0x0][_0x2fb9b2(0x1cb)]==_0x2fb9b2(0x251))var _0x7fc3a8=users['Arabic'];}}}}}}}_0x29c999[_0x2fb9b2(0x223)](_0x2fb9b2(0x1d0),{'success':_0x16af58[_0x2fb9b2(0x249)](_0x2fb9b2(0x215)),'errors':_0x16af58[_0x2fb9b2(0x249)](_0x2fb9b2(0x269)),'role':_0x2491eb,'profile':_0x305f93,'warehouse':_0x126300,'product':_0x221393,'adjustment':_0xf630fb,'master_shop':_0x42c7be,'language':_0x7fc3a8});}catch(_0x493c4c){console['log'](_0x493c4c);}});async function getRandom8DigitNumber(){var _0x2adce8=a0_0x340bf4;const _0x13a2ac=0x989680,_0x5f319f=0x5f5e0ff,_0x3ab905=Math[_0x2adce8(0x259)](Math[_0x2adce8(0x260)]()*(_0x5f319f-_0x13a2ac+0x1))+_0x13a2ac;var _0x2d1563;const _0x11418d=await adjustment[_0x2adce8(0x299)]({'invoice':'ADJ-'+_0x3ab905});return _0x11418d&&_0x11418d[_0x2adce8(0x1de)]>0x0?_0x2d1563=_0x2adce8(0x27e)+_0x3ab905:_0x2d1563=_0x2adce8(0x27e)+_0x3ab905,_0x2d1563;}function a0_0xf2c5(_0x2ea5c9,_0x2a2bee){var _0xb77a64=a0_0xb77a();return a0_0xf2c5=function(_0xf2c5d9,_0x4e1f04){_0xf2c5d9=_0xf2c5d9-0x1c7;var _0x2361e1=_0xb77a64[_0xf2c5d9];return _0x2361e1;},a0_0xf2c5(_0x2ea5c9,_0x2a2bee);}router[a0_0x340bf4(0x293)](a0_0x340bf4(0x248),auth,async(_0x56c1b7,_0x5818c8)=>{var _0x5d7b95=a0_0x340bf4;try{const {username:_0x32862f,email:_0x26d55e,role:_0x2d9c62}=_0x56c1b7['user'],_0x859931=_0x56c1b7['user'],_0x2e192e=await profile['findOne']({'email':_0x859931[_0x5d7b95(0x20b)]}),_0x329c5a=await master_shop[_0x5d7b95(0x1e2)]();let _0x5f2880;if(_0x859931[_0x5d7b95(0x1e0)]==_0x5d7b95(0x280)){const _0x5b9f5f=await staff[_0x5d7b95(0x299)]({'email':_0x859931[_0x5d7b95(0x20b)]});_0x5f2880=await warehouse[_0x5d7b95(0x289)]([{'$match':{'status':_0x5d7b95(0x208),'name':_0x5b9f5f[_0x5d7b95(0x220)],'warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x5d7b95(0x29d),'name':{'$first':_0x5d7b95(0x29d)}}}]);}else _0x5f2880=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x5d7b95(0x226),'name':{'$ne':_0x5d7b95(0x1d8)}}},{'$group':{'_id':_0x5d7b95(0x29d),'name':{'$first':_0x5d7b95(0x29d)}}}]);const _0x3a558d=await product[_0x5d7b95(0x1e2)]({}),_0x178f58=await adjustment[_0x5d7b95(0x1e2)]({}),_0x211e5e=_0x178f58['length']+0x1,_0x271734='ADJ-'+_0x211e5e['toString']()[_0x5d7b95(0x253)](0x5,'0');var _0x58cb63=['Ambient',_0x5d7b95(0x291),_0x5d7b95(0x1d2)];if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]==_0x5d7b95(0x1f0))var _0x2a66d3=users['English'];else{if(_0x329c5a[0x0]['language']==_0x5d7b95(0x25d))var _0x2a66d3=users['Hindi'];else{if(_0x329c5a[0x0]['language']==_0x5d7b95(0x245))var _0x2a66d3=users[_0x5d7b95(0x245)];else{if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]=='Spanish')var _0x2a66d3=users['Spanish'];else{if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]==_0x5d7b95(0x213))var _0x2a66d3=users[_0x5d7b95(0x213)];else{if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]=='Portuguese\x20(BR)')var _0x2a66d3=users[_0x5d7b95(0x281)];else{if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]=='Chinese')var _0x2a66d3=users['Chinese'];else{if(_0x329c5a[0x0][_0x5d7b95(0x1cb)]==_0x5d7b95(0x251))var _0x2a66d3=users['Arabic'];}}}}}}}const _0x39b354=getRandom8DigitNumber();_0x39b354[_0x5d7b95(0x1da)](_0x11963c=>{var _0x5122f3=_0x5d7b95;_0x5818c8[_0x5122f3(0x223)]('add_adjustment',{'success':_0x56c1b7['flash']('success'),'errors':_0x56c1b7['flash'](_0x5122f3(0x269)),'role':_0x859931,'profile':_0x2e192e,'warehouse':_0x5f2880,'product':_0x3a558d,'master_shop':_0x329c5a,'language':_0x2a66d3,'rooms_data':_0x58cb63,'invoice_no':_0x11963c});})[_0x5d7b95(0x200)](_0x3b5f7a=>{var _0x2ff010=_0x5d7b95;_0x56c1b7['flash'](_0x2ff010(0x269),_0x2ff010(0x203)),_0x5818c8[_0x2ff010(0x24c)](_0x2ff010(0x27c));});}catch(_0x22254d){console[_0x5d7b95(0x244)](_0x22254d);}}),router[a0_0x340bf4(0x211)](a0_0x340bf4(0x248),auth,async(_0x3235ce,_0x17efe5)=>{var _0x5b0e70=a0_0x340bf4;try{const {warehouse_name:_0x3f7612,date:_0x50fecf,prod_name:_0x593b7d,level:_0x254d41,isle:_0x51e506,pallet:_0x22ff0a,stock:_0x452588,types:_0x2dc080,adjust_qty:_0x532758,new_adjust_qty:_0xabd1da,note:_0x4648f1,Room_name:_0x2ad79d,invoice:_0x256903,JO_number:_0x26edd9,expiry_date:_0x4bcbbd}=_0x3235ce[_0x5b0e70(0x255)];if(typeof _0x593b7d==_0x5b0e70(0x298))var _0x25de9c=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1d5)]],_0x1ceef0=[_0x3235ce[_0x5b0e70(0x255)]['level']],_0x1b3f51=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1ea)]],_0x1bde91=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x29a)]],_0x2296ae=[_0x3235ce['body'][_0x5b0e70(0x204)]],_0x29bb0f=[_0x3235ce[_0x5b0e70(0x255)]['New_Qty_Converted']],_0x1ee407=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x286)]],_0x3446e8=[_0x3235ce[_0x5b0e70(0x255)]['Secondary_units']],_0x3ed8a6=[_0x3235ce[_0x5b0e70(0x255)]['prod_code']],_0x1cfdfd=[_0x3235ce[_0x5b0e70(0x255)]['batch_code']],_0x18faca=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1ed)]],_0x5f1b8b=[_0x3235ce['body']['max_per_unit']],_0x3694b6=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x22d)]],_0x50f629=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x242)]],_0x3adbf6=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x24b)]],_0xa5a7d8=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x231)]],_0x636dba=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x23e)]],_0x28e9ff=[_0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1dd)]];else var _0x25de9c=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1d5)]],_0x1ceef0=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1dc)]],_0x1b3f51=[..._0x3235ce['body'][_0x5b0e70(0x1ea)]],_0x1bde91=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x29a)]],_0x2296ae=[..._0x3235ce['body'][_0x5b0e70(0x204)]],_0x29bb0f=[..._0x3235ce[_0x5b0e70(0x255)]['New_Qty_Converted']],_0x1ee407=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x210)]],_0x3446e8=[..._0x3235ce['body'][_0x5b0e70(0x21b)]],_0x3ed8a6=[..._0x3235ce[_0x5b0e70(0x255)]['prod_code']],_0x1cfdfd=[..._0x3235ce[_0x5b0e70(0x255)]['batch_code']],_0x18faca=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1ed)]],_0x5f1b8b=[..._0x3235ce['body'][_0x5b0e70(0x279)]],_0x3694b6=[..._0x3235ce[_0x5b0e70(0x255)]['production_date']],_0x50f629=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x242)]],_0x3adbf6=[..._0x3235ce[_0x5b0e70(0x255)]['Rooms']],_0xa5a7d8=[..._0x3235ce['body']['prime1']],_0x636dba=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x23e)]],_0x28e9ff=[..._0x3235ce[_0x5b0e70(0x255)][_0x5b0e70(0x1dd)]];const _0x17eb1a=_0x25de9c[_0x5b0e70(0x275)](_0x2474ba=>{return _0x2474ba={'product_name':_0x2474ba};});_0x1ceef0[_0x5b0e70(0x1fe)]((_0x38b858,_0x800199)=>{_0x3adbf6['forEach']((_0x32eed4,_0x506ca9)=>{var _0x3cf84c=a0_0xf2c5;if(_0x32eed4==_0x3cf84c(0x21e)&&_0x800199==_0x506ca9){var _0x8eb7bb=_0x38b858[_0x3cf84c(0x1ef)](0x3);_0x17eb1a[_0x800199][_0x3cf84c(0x287)]=_0x38b858[0x0],_0x17eb1a[_0x800199]['rack']=_0x38b858[0x1],_0x17eb1a[_0x800199][_0x3cf84c(0x296)]=0x0,_0x17eb1a[_0x800199]['bin']=0x0,_0x17eb1a[_0x800199][_0x3cf84c(0x22e)]=_0x3cf84c(0x1d1),_0x17eb1a[_0x800199][_0x3cf84c(0x1d6)]=_0x8eb7bb;}else{if(_0x32eed4==_0x3cf84c(0x278)&&_0x800199==_0x506ca9){var _0x8eb7bb=_0x38b858[_0x3cf84c(0x1ef)](0x3);_0x17eb1a[_0x800199]['storage']=_0x38b858[0x0],_0x17eb1a[_0x800199]['rack']=_0x38b858[0x1],_0x17eb1a[_0x800199]['bay']=0x0,_0x17eb1a[_0x800199][_0x3cf84c(0x20c)]=0x0,_0x17eb1a[_0x800199][_0x3cf84c(0x22e)]='Floor',_0x17eb1a[_0x800199][_0x3cf84c(0x1d6)]=_0x38b858[0x5];}else{if(_0x800199==_0x506ca9){var _0x5ccfeb;if(_0x38b858[0x4]=='L')_0x5ccfeb=_0x3cf84c(0x24f);else _0x38b858[0x4]=='F'&&(_0x5ccfeb=_0x3cf84c(0x1d1));_0x17eb1a[_0x800199][_0x3cf84c(0x287)]=_0x38b858[0x0],_0x17eb1a[_0x800199][_0x3cf84c(0x238)]=_0x38b858[0x1],_0x17eb1a[_0x800199][_0x3cf84c(0x296)]=_0x38b858[0x2],_0x17eb1a[_0x800199][_0x3cf84c(0x20c)]=_0x38b858[0x3],_0x17eb1a[_0x800199][_0x3cf84c(0x22e)]=_0x5ccfeb,_0x17eb1a[_0x800199]['floorlevel']=_0x38b858[0x5];}}}});}),_0x1b3f51['forEach']((_0x1f195c,_0x4fd75c)=>{var _0x3dc98e=_0x5b0e70;_0x17eb1a[_0x4fd75c][_0x3dc98e(0x232)]=_0x1f195c;}),_0x1bde91[_0x5b0e70(0x1fe)]((_0x3d7cf6,_0x4e5e35)=>{var _0x137b25=_0x5b0e70;_0x17eb1a[_0x4e5e35][_0x137b25(0x29a)]=_0x3d7cf6;}),_0x2296ae[_0x5b0e70(0x1fe)]((_0x140cec,_0x5527df)=>{var _0x68bd4d=_0x5b0e70;_0x17eb1a[_0x5527df][_0x68bd4d(0x241)]=_0x140cec;}),_0x29bb0f[_0x5b0e70(0x1fe)]((_0x1a58c5,_0x5e90ce)=>{var _0x18f7f1=_0x5b0e70;_0x17eb1a[_0x5e90ce][_0x18f7f1(0x22b)]=_0x1a58c5;}),_0x1ee407[_0x5b0e70(0x1fe)]((_0x291c92,_0xd569e3)=>{var _0x357d43=_0x5b0e70;_0x17eb1a[_0xd569e3][_0x357d43(0x210)]=_0x291c92;}),_0x3446e8[_0x5b0e70(0x1fe)]((_0xf6498a,_0x2877fe)=>{var _0x2d7619=_0x5b0e70;_0x17eb1a[_0x2877fe][_0x2d7619(0x21d)]=_0xf6498a;}),_0x3ed8a6['forEach']((_0x3418b5,_0x1375b0)=>{var _0x531c00=_0x5b0e70;_0x17eb1a[_0x1375b0][_0x531c00(0x1d3)]=_0x3418b5;}),_0x1cfdfd[_0x5b0e70(0x1fe)]((_0x4e3f2,_0x1cccbc)=>{var _0x4aac94=_0x5b0e70;_0x17eb1a[_0x1cccbc][_0x4aac94(0x1c7)]=_0x4e3f2;}),_0x18faca[_0x5b0e70(0x1fe)]((_0x354ecc,_0x329dd6)=>{var _0x1a9f05=_0x5b0e70;_0x17eb1a[_0x329dd6][_0x1a9f05(0x1ed)]=_0x354ecc;}),_0x5f1b8b[_0x5b0e70(0x1fe)]((_0x2e568f,_0x44076e)=>{_0x17eb1a[_0x44076e]['maxperunit']=_0x2e568f;}),_0x3694b6[_0x5b0e70(0x1fe)]((_0x5ee3ee,_0x282aaa)=>{_0x17eb1a[_0x282aaa]['production_date']=_0x5ee3ee;}),_0x50f629[_0x5b0e70(0x1fe)]((_0x8dae59,_0x2f9e79)=>{var _0x4ffe4f=_0x5b0e70;_0x17eb1a[_0x2f9e79][_0x4ffe4f(0x242)]=_0x8dae59;}),_0x3adbf6[_0x5b0e70(0x1fe)]((_0x5304b2,_0x3ef16b)=>{var _0xf7245d=_0x5b0e70;_0x17eb1a[_0x3ef16b][_0xf7245d(0x1f8)]=_0x5304b2;}),_0xa5a7d8[_0x5b0e70(0x1fe)]((_0x584b5e,_0xce9a82)=>{var _0x3726b7=_0x5b0e70;_0x17eb1a[_0xce9a82][_0x3726b7(0x1cc)]=_0x584b5e;}),_0x636dba['forEach']((_0x401c19,_0x23264b)=>{var _0x4122da=_0x5b0e70;_0x17eb1a[_0x23264b][_0x4122da(0x217)]=_0x401c19;}),_0x28e9ff['forEach']((_0x1015b1,_0xfeebaa)=>{var _0x4916e6=_0x5b0e70;_0x17eb1a[_0xfeebaa][_0x4916e6(0x26a)]=_0x1015b1;});const _0xf47f99=_0x17eb1a[_0x5b0e70(0x292)](_0x12488c=>_0x12488c[_0x5b0e70(0x241)]!=='0'&&_0x12488c[_0x5b0e70(0x241)]!=='');var _0x1826a3=0x0;_0xf47f99[_0x5b0e70(0x1fe)](_0x31db53=>{var _0x2b22cb=_0x5b0e70;console[_0x2b22cb(0x244)](_0x2b22cb(0x20d),_0x31db53),parseInt(_0x31db53['adjust_qty'])<=0x0&&_0x1826a3++;});if(_0x1826a3!=0x0)return _0x3235ce[_0x5b0e70(0x249)](_0x5b0e70(0x269),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x17efe5[_0x5b0e70(0x24c)](_0x5b0e70(0x27f));const _0x2ff323=new adjustment({'warehouse_name':_0x3f7612,'date':_0x50fecf,'product':_0xf47f99,'note':_0x4648f1,'room':_0x2ad79d,'invoice':_0x256903,'JO_number':_0x26edd9,'expiry_date':_0x4bcbbd}),_0x5bb553=await _0x2ff323['save']();_0x3235ce[_0x5b0e70(0x249)](_0x5b0e70(0x215),_0x5b0e70(0x1f9)),_0x17efe5[_0x5b0e70(0x24c)]('/adjustment/preview/'+_0x5bb553[_0x5b0e70(0x285)]);}catch(_0x3205b9){console[_0x5b0e70(0x244)](_0x3205b9),_0x17efe5['status'](0xc8)['json']({'message':_0x3205b9[_0x5b0e70(0x270)]});}}),router[a0_0x340bf4(0x293)](a0_0x340bf4(0x25f),auth,async(_0x3fe269,_0x5e92ce)=>{var _0xbc3829=a0_0x340bf4;try{const {username:_0x24d3ad,email:_0x18038d,role:_0x2cba8c}=_0x3fe269['user'],_0x20d302=_0x3fe269[_0xbc3829(0x25a)],_0x70053f=await profile['findOne']({'email':_0x20d302[_0xbc3829(0x20b)]}),_0x2604e7=await master_shop[_0xbc3829(0x1e2)](),_0x1cddf3=_0x3fe269['params']['id'],_0x275bf8=await adjustment['findById']({'_id':_0x1cddf3}),_0x4ad326=await purchases[_0xbc3829(0x289)]([{'$match':{'warehouse_name':_0x275bf8['warehouse_name']}},{'$unwind':_0xbc3829(0x1fb)},{'$group':{'_id':_0xbc3829(0x284)}}]),_0x127d5f=await product[_0xbc3829(0x1e2)]({}),_0x1c7f34=await warehouse[_0xbc3829(0x289)]([{'$match':{'name':_0x275bf8['warehouse_name']}},{'$unwind':_0xbc3829(0x290)},{'$group':{'_id':_0xbc3829(0x1e5),'name':{'$first':_0xbc3829(0x243)},'product_stock':{'$first':_0xbc3829(0x209)},'bay':{'$first':_0xbc3829(0x1e7)},'bin':{'$first':_0xbc3829(0x1fd)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0xbc3829(0x28b)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0xbc3829(0x20f)},'rack':{'$first':_0xbc3829(0x254)},'maxPerUnit':{'$first':_0xbc3829(0x216)},'expiry_date':{'$first':_0xbc3829(0x264)},'production_date':{'$first':_0xbc3829(0x1e4)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0xbc3829(0x26e)}}}]);if(_0x2604e7[0x0][_0xbc3829(0x1cb)]==_0xbc3829(0x1f0)){var _0x2fa4e1=users[_0xbc3829(0x28c)];console[_0xbc3829(0x244)](_0x2fa4e1);}else{if(_0x2604e7[0x0][_0xbc3829(0x1cb)]=='Hindi')var _0x2fa4e1=users['Hindi'];else{if(_0x2604e7[0x0][_0xbc3829(0x1cb)]==_0xbc3829(0x245))var _0x2fa4e1=users[_0xbc3829(0x245)];else{if(_0x2604e7[0x0]['language']==_0xbc3829(0x1f3))var _0x2fa4e1=users['Spanish'];else{if(_0x2604e7[0x0][_0xbc3829(0x1cb)]=='French')var _0x2fa4e1=users[_0xbc3829(0x213)];else{if(_0x2604e7[0x0][_0xbc3829(0x1cb)]==_0xbc3829(0x266))var _0x2fa4e1=users[_0xbc3829(0x281)];else{if(_0x2604e7[0x0][_0xbc3829(0x1cb)]=='Chinese')var _0x2fa4e1=users['Chinese'];else{if(_0x2604e7[0x0]['language']=='Arabic\x20(ae)')var _0x2fa4e1=users['Arabic'];}}}}}}}_0x5e92ce['render']('edit_adjustment_view',{'success':_0x3fe269[_0xbc3829(0x249)](_0xbc3829(0x215)),'errors':_0x3fe269[_0xbc3829(0x249)](_0xbc3829(0x269)),'role':_0x20d302,'profile':_0x70053f,'adjustment':_0x275bf8,'stock':_0x1c7f34,'master_shop':_0x2604e7,'warehouse_name':_0x4ad326,'unit':_0x127d5f,'language':_0x2fa4e1});}catch(_0x1d0e88){console[_0xbc3829(0x244)](_0x1d0e88),_0x5e92ce[_0xbc3829(0x1c8)](0xc8)[_0xbc3829(0x28d)]({'message':_0x1d0e88['message']});}}),router['post'](a0_0x340bf4(0x25f),auth,async(_0x129a2b,_0x507a30)=>{var _0x4d520d=a0_0x340bf4;try{const _0x1079c9=_0x129a2b[_0x4d520d(0x265)]['id'],{warehouse_name:_0x12b68e,Room_name:_0x1bb4b0}=_0x129a2b['body'],_0xfe7bf6=await adjustment[_0x4d520d(0x252)]({'_id':_0x1079c9}),_0x2d095f=_0xfe7bf6['product'][_0x4d520d(0x275)](async _0x42c5b8=>{var _0x5805ed=_0x4d520d;if(_0x42c5b8['adjust_qty']>0x0){var _0x10f4d2=await warehouse[_0x5805ed(0x299)]({'name':_0x12b68e,'room':_0x42c5b8[_0x5805ed(0x1f8)],'warehouse_category':_0x5805ed(0x226)});const _0x4215b9=_0x10f4d2[_0x5805ed(0x27a)][_0x5805ed(0x275)](_0x470f6b=>{var _0x4dd432=_0x5805ed;if(_0x42c5b8['type']=='minus'){if(_0x470f6b[_0x4dd432(0x239)]==_0x42c5b8[_0x4dd432(0x239)]&&_0x470f6b[_0x4dd432(0x1d6)]==_0x42c5b8['floorlevel']&&_0x470f6b[_0x4dd432(0x22e)]==_0x42c5b8[_0x4dd432(0x22e)]&&_0x470f6b[_0x4dd432(0x20c)]==_0x42c5b8['bin']&&_0x470f6b['bay']==_0x42c5b8[_0x4dd432(0x296)]&&_0x470f6b[_0x4dd432(0x238)]==_0x42c5b8[_0x4dd432(0x238)]&&_0x470f6b[_0x4dd432(0x287)]==_0x42c5b8[_0x4dd432(0x287)]&&_0x470f6b['expiry_date']==_0x42c5b8[_0x4dd432(0x1ed)]&&_0x470f6b[_0x4dd432(0x1c7)]==_0x42c5b8[_0x4dd432(0x1c7)]&&_0x470f6b[_0x4dd432(0x22d)]==_0x42c5b8[_0x4dd432(0x22d)]&&_0x470f6b['invoice']==_0x42c5b8['invoice']){var _0x341655;_0x341655=_0x42c5b8['adjust_qty'],_0x42c5b8['prod_cat']=='S'&&(_0x341655=_0x42c5b8['adjust_qty']),_0x470f6b[_0x4dd432(0x21c)]=_0x470f6b['product_stock']-_0x341655;}}else{if(_0x470f6b['product_name']==_0x42c5b8[_0x4dd432(0x239)]&&_0x470f6b['floorlevel']==_0x42c5b8[_0x4dd432(0x1d6)]&&_0x470f6b['type']==_0x42c5b8[_0x4dd432(0x22e)]&&_0x470f6b[_0x4dd432(0x20c)]==_0x42c5b8[_0x4dd432(0x20c)]&&_0x470f6b[_0x4dd432(0x296)]==_0x42c5b8[_0x4dd432(0x296)]&&_0x470f6b[_0x4dd432(0x238)]==_0x42c5b8[_0x4dd432(0x238)]&&_0x470f6b[_0x4dd432(0x287)]==_0x42c5b8[_0x4dd432(0x287)]&&_0x470f6b['expiry_date']==_0x42c5b8[_0x4dd432(0x1ed)]&&_0x470f6b[_0x4dd432(0x1c7)]==_0x42c5b8[_0x4dd432(0x1c7)]&&_0x470f6b[_0x4dd432(0x22d)]==_0x42c5b8[_0x4dd432(0x22d)]&&_0x470f6b[_0x4dd432(0x26a)]==_0x42c5b8[_0x4dd432(0x26a)]){console[_0x4dd432(0x244)](_0x42c5b8);var _0x341655;_0x341655=_0x42c5b8[_0x4dd432(0x241)],_0x42c5b8[_0x4dd432(0x242)]=='S'&&(_0x341655=_0x42c5b8[_0x4dd432(0x241)]),console[_0x4dd432(0x244)](_0x341655+_0x4dd432(0x24d)+_0x42c5b8[_0x4dd432(0x241)]+'\x20<>\x20'+_0x470f6b[_0x4dd432(0x235)]+'\x20<>\x20'+_0x42c5b8[_0x4dd432(0x242)]),_0x470f6b[_0x4dd432(0x21c)]=_0x470f6b[_0x4dd432(0x21c)]+_0x341655;}}});}return _0x10f4d2;});Promise[_0x4d520d(0x219)](_0x2d095f)[_0x4d520d(0x1da)](async _0x2e76d2=>{var _0x2aaf31=_0x4d520d;try{for(const _0xb19624 of _0x2e76d2){await _0xb19624['save']();}_0xfe7bf6[_0x2aaf31(0x24a)]=_0x2aaf31(0x212);const _0x1f94eb=await _0xfe7bf6[_0x2aaf31(0x23d)](),_0x13f7d0=await master_shop[_0x2aaf31(0x1e2)](),_0x34eb39=await email_settings[_0x2aaf31(0x299)](),_0x24092a=await supervisor_settings['find']();var _0x1a6536=_0xfe7bf6[_0x2aaf31(0x25c)],_0x137c83='',_0x475eaf;for(_0x475eaf in _0x1a6536){_0x137c83+=_0x2aaf31(0x225)+_0x2aaf31(0x221)+_0x1a6536[_0x475eaf][_0x2aaf31(0x239)]+_0x2aaf31(0x262)+_0x2aaf31(0x221)+_0x1a6536[_0x475eaf][_0x2aaf31(0x1d3)]+_0x2aaf31(0x262)+_0x2aaf31(0x221)+_0x1a6536[_0x475eaf][_0x2aaf31(0x241)]+_0x2aaf31(0x262)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1a6536[_0x475eaf]['unit']+_0x2aaf31(0x262)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1a6536[_0x475eaf][_0x2aaf31(0x21d)]+_0x2aaf31(0x262)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xfe7bf6['warehouse_name']+_0x2aaf31(0x262)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1a6536[_0x475eaf]['room_names']+_0x2aaf31(0x262)+_0x2aaf31(0x221)+_0x1a6536[_0x475eaf][_0x2aaf31(0x287)]+_0x1a6536[_0x475eaf][_0x2aaf31(0x238)]+_0x1a6536[_0x475eaf]['bay']+_0x1a6536[_0x475eaf][_0x2aaf31(0x20c)]+_0x1a6536[_0x475eaf][_0x2aaf31(0x22e)][0x0]+_0x1a6536[_0x475eaf][_0x2aaf31(0x1d6)]+_0x2aaf31(0x262),_0x2aaf31(0x250);}let _0x45120b=nodemailer['createTransport']({'host':_0x34eb39['host'],'port':Number(_0x34eb39[_0x2aaf31(0x23a)]),'secure':![],'auth':{'user':_0x34eb39[_0x2aaf31(0x20b)],'pass':_0x34eb39[_0x2aaf31(0x294)]}}),_0xa16137={'from':_0x34eb39['email'],'to':_0x24092a[0x0][_0x2aaf31(0x295)],'subject':_0x2aaf31(0x268),'attachments':[{'filename':_0x2aaf31(0x277),'path':__dirname+_0x2aaf31(0x258)+_0x2aaf31(0x271)+_0x13f7d0[0x0][_0x2aaf31(0x25e)],'cid':_0x2aaf31(0x1db)}],'html':_0x2aaf31(0x1f1)+'<html><head><title></title>'+_0x2aaf31(0x22c)+_0x2aaf31(0x1ee)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x2aaf31(0x1ee)+_0x2aaf31(0x27d)+'</div>'+_0x2aaf31(0x1ee)+_0x2aaf31(0x247)+_0x13f7d0[0x0]['site_title']+_0x2aaf31(0x202)+_0x2aaf31(0x206)+'</div>'+'<hr\x20class=\x22my-3\x22>'+'<div>'+_0x2aaf31(0x29b)+_0x2aaf31(0x21a)+_0xfe7bf6['invoice']+'\x20'+_0x2aaf31(0x233)+_0x2aaf31(0x267)+_0xfe7bf6[_0x2aaf31(0x228)]+'\x20'+_0x2aaf31(0x22a)+'</h5>'+_0x2aaf31(0x206)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2aaf31(0x23f)+_0x2aaf31(0x225)+_0x2aaf31(0x256)+_0x2aaf31(0x1ca)+_0x2aaf31(0x288)+_0x2aaf31(0x28e)+_0x2aaf31(0x27b)+_0x2aaf31(0x282)+_0x2aaf31(0x222)+_0x2aaf31(0x236)+_0x2aaf31(0x250)+_0x2aaf31(0x274)+_0x2aaf31(0x276)+'\x20'+_0x137c83+'\x20'+'</tbody>'+_0x2aaf31(0x1cd)+_0x2aaf31(0x1ee)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x13f7d0[0x0][_0x2aaf31(0x207)]+'</h5>'+_0x2aaf31(0x206)+'</div>'+_0x2aaf31(0x1cf)};_0x45120b[_0x2aaf31(0x237)](_0xa16137,function(_0x5adc61,_0x303746){var _0x40b9df=_0x2aaf31;_0x5adc61?(console['log'](_0x5adc61),console[_0x40b9df(0x244)]('Error\x20Occurs')):console[_0x40b9df(0x244)](_0x40b9df(0x205));}),_0x129a2b[_0x2aaf31(0x249)]('success',_0x2aaf31(0x20a)),_0x507a30['redirect']('/picking_list/PDF_adjustment_rm/'+_0x1f94eb[_0x2aaf31(0x285)]);}catch(_0x151eff){console[_0x2aaf31(0x214)](_0x151eff),_0x507a30[_0x2aaf31(0x1c8)](0x1f4)[_0x2aaf31(0x28d)]({'error':_0x2aaf31(0x1f2)});}})['catch'](_0x147641=>{var _0x4e2f1c=_0x4d520d;console[_0x4e2f1c(0x214)](_0x147641),_0x507a30[_0x4e2f1c(0x1c8)](0x1f4)[_0x4e2f1c(0x28d)]({'error':_0x4e2f1c(0x257)});});}catch(_0x3a9285){console[_0x4d520d(0x244)](_0x3a9285),_0x507a30[_0x4d520d(0x1c8)](0xc8)[_0x4d520d(0x28d)]({'message':_0x3a9285[_0x4d520d(0x270)]});}}),router['get']('/view/:id',auth,async(_0x389021,_0x3aadbb)=>{var _0x74c0ec=a0_0x340bf4;try{const {username:_0xf9d5c7,email:_0x87c29f,role:_0x29ed01}=_0x389021[_0x74c0ec(0x25a)],_0x5f2045=_0x389021['user'],_0x3fcd32=await profile['findOne']({'email':_0x5f2045[_0x74c0ec(0x20b)]}),_0x4d6eaf=await master_shop[_0x74c0ec(0x1e2)](),_0x354a61=_0x389021[_0x74c0ec(0x265)]['id'],_0x4b45d8=await adjustment[_0x74c0ec(0x252)]({'_id':_0x354a61}),_0xa7930=await purchases['aggregate']([{'$match':{'warehouse_name':_0x4b45d8['warehouse_name']}},{'$unwind':_0x74c0ec(0x1fb)},{'$group':{'_id':_0x74c0ec(0x284)}}]),_0x13a4ef=await product[_0x74c0ec(0x1e2)]({}),_0x4624e1=await warehouse[_0x74c0ec(0x289)]([{'$match':{'name':_0x4b45d8[_0x74c0ec(0x224)]}},{'$unwind':_0x74c0ec(0x290)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x74c0ec(0x209)},'bay':{'$first':_0x74c0ec(0x1e7)},'bin':{'$first':_0x74c0ec(0x1fd)},'type':{'$first':_0x74c0ec(0x22f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x74c0ec(0x1ff)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x74c0ec(0x26d)},'storage':{'$first':_0x74c0ec(0x20f)},'rack':{'$first':_0x74c0ec(0x254)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x74c0ec(0x264)},'production_date':{'$first':_0x74c0ec(0x1e4)},'batch_code':{'$first':_0x74c0ec(0x28a)},'room':{'$first':_0x74c0ec(0x26e)}}}]);let _0x46b11e;if(_0x5f2045[_0x74c0ec(0x1e0)]==_0x74c0ec(0x280)){const _0x4c5402=await staff[_0x74c0ec(0x299)]({'email':_0x5f2045[_0x74c0ec(0x20b)]});_0x46b11e=await warehouse[_0x74c0ec(0x289)]([{'$match':{'status':_0x74c0ec(0x208),'name':_0x4c5402[_0x74c0ec(0x220)],'warehouse_category':_0x74c0ec(0x226),'name':{'$ne':_0x74c0ec(0x1d8)}}},{'$group':{'_id':_0x74c0ec(0x29d),'name':{'$first':_0x74c0ec(0x29d)}}}]);}else _0x46b11e=await warehouse[_0x74c0ec(0x289)]([{'$match':{'status':_0x74c0ec(0x208),'warehouse_category':_0x74c0ec(0x226),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x74c0ec(0x29d),'name':{'$first':'$name'}}}]);if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]==_0x74c0ec(0x1f0)){var _0x651be0=users[_0x74c0ec(0x28c)];console[_0x74c0ec(0x244)](_0x651be0);}else{if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]==_0x74c0ec(0x25d))var _0x651be0=users['Hindi'];else{if(_0x4d6eaf[0x0]['language']=='German')var _0x651be0=users[_0x74c0ec(0x245)];else{if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]=='Spanish')var _0x651be0=users['Spanish'];else{if(_0x4d6eaf[0x0]['language']==_0x74c0ec(0x213))var _0x651be0=users[_0x74c0ec(0x213)];else{if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]==_0x74c0ec(0x266))var _0x651be0=users[_0x74c0ec(0x281)];else{if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]==_0x74c0ec(0x246))var _0x651be0=users['Chinese'];else{if(_0x4d6eaf[0x0][_0x74c0ec(0x1cb)]==_0x74c0ec(0x251))var _0x651be0=users[_0x74c0ec(0x26b)];}}}}}}}_0x3aadbb['render']('edit_adjustment',{'success':_0x389021[_0x74c0ec(0x249)](_0x74c0ec(0x215)),'errors':_0x389021['flash'](_0x74c0ec(0x269)),'role':_0x5f2045,'profile':_0x3fcd32,'adjustment':_0x4b45d8,'stock':_0x4624e1,'master_shop':_0x4d6eaf,'warehouse_name':_0xa7930,'unit':_0x13a4ef,'language':_0x651be0,'warehouse':_0x46b11e});}catch(_0x470c00){console[_0x74c0ec(0x244)](_0x470c00),_0x3aadbb[_0x74c0ec(0x1c8)](0xc8)['json']({'message':_0x470c00[_0x74c0ec(0x270)]});}}),router[a0_0x340bf4(0x211)](a0_0x340bf4(0x1d7),auth,async(_0x4b6a6a,_0x422e65)=>{var _0x54d2d3=a0_0x340bf4;try{const _0x1eff06=_0x4b6a6a[_0x54d2d3(0x265)]['id'],_0x22e551=await adjustment[_0x54d2d3(0x252)]({'_id':_0x1eff06}),_0x1a5b47=await warehouse['findOne']({'name':_0x22e551[_0x54d2d3(0x224)],'room':_0x22e551['room']}),{warehouse_name:_0x20fff3,date:_0x2292a6,prod_name:_0x14717a,level:_0x416ec1,isle:_0xe6e9bb,pallet:_0x1458f9,stock:_0x5dde1b,types:_0x452edb,adjust_qty:_0xd5cbf1,new_adjust_qty:_0xa7d62d,note:_0x27110d,Room_name:_0x2231bb,invoice:_0x398d32,JO_number:_0x581a46,expiry_date:_0x4306a5}=_0x4b6a6a['body'];if(typeof _0x14717a==_0x54d2d3(0x298))var _0x197acc=[_0x4b6a6a[_0x54d2d3(0x255)]['prod_name']],_0x30b51c=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1dc)]],_0x309c70=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1ea)]],_0x36901a=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x29a)]],_0x1dbd41=[_0x4b6a6a['body']['New_Qty_Converted_adj']],_0x16e608=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1f7)]],_0x213543=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x286)]],_0x5de341=[_0x4b6a6a['body'][_0x54d2d3(0x21b)]],_0x58d81b=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x201)]],_0x5dc0b9=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1c7)]],_0x2488ad=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1ed)]],_0x145b0d=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x279)]],_0x14851a=[_0x4b6a6a['body'][_0x54d2d3(0x22d)]],_0x4b2c0a=[_0x4b6a6a['body'][_0x54d2d3(0x242)]],_0x4996ba=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x24b)]],_0x449196=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x231)]],_0xe80864=[_0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x23e)]];else var _0x197acc=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1d5)]],_0x30b51c=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1dc)]],_0x309c70=[..._0x4b6a6a['body'][_0x54d2d3(0x1ea)]],_0x36901a=[..._0x4b6a6a['body']['types']],_0x1dbd41=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x204)]],_0x16e608=[..._0x4b6a6a['body'][_0x54d2d3(0x1f7)]],_0x213543=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x210)]],_0x5de341=[..._0x4b6a6a[_0x54d2d3(0x255)]['Secondary_units']],_0x58d81b=[..._0x4b6a6a[_0x54d2d3(0x255)]['prod_code']],_0x5dc0b9=[..._0x4b6a6a['body']['batch_code']],_0x2488ad=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x1ed)]],_0x145b0d=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x279)]],_0x14851a=[..._0x4b6a6a[_0x54d2d3(0x255)]['production_date']],_0x4b2c0a=[..._0x4b6a6a[_0x54d2d3(0x255)]['prod_cat']],_0x4996ba=[..._0x4b6a6a[_0x54d2d3(0x255)][_0x54d2d3(0x24b)]],_0x449196=[..._0x4b6a6a['body'][_0x54d2d3(0x231)]],_0xe80864=[..._0x4b6a6a['body'][_0x54d2d3(0x23e)]];const _0x2e974d=_0x197acc[_0x54d2d3(0x275)](_0x39342b=>{return _0x39342b={'product_name':_0x39342b};});_0x30b51c[_0x54d2d3(0x1fe)]((_0x563835,_0x18cdd5)=>{var _0x2e6dce=_0x54d2d3;_0x4996ba[_0x2e6dce(0x1fe)]((_0x2e6c63,_0x4efc6c)=>{var _0x3b14e8=_0x2e6dce;if(_0x2e6c63==_0x3b14e8(0x21e)&&_0x18cdd5==_0x4efc6c){var _0xdc0d0c=_0x563835['slice'](0x3);_0x2e974d[_0x18cdd5][_0x3b14e8(0x287)]=_0x563835[0x0],_0x2e974d[_0x18cdd5][_0x3b14e8(0x238)]=_0x563835[0x1],_0x2e974d[_0x18cdd5][_0x3b14e8(0x296)]=0x0,_0x2e974d[_0x18cdd5][_0x3b14e8(0x20c)]=0x0,_0x2e974d[_0x18cdd5][_0x3b14e8(0x22e)]=_0x3b14e8(0x1d1),_0x2e974d[_0x18cdd5][_0x3b14e8(0x1d6)]=_0xdc0d0c;}else{if(_0x2e6c63==_0x3b14e8(0x278)&&_0x18cdd5==_0x4efc6c){var _0xdc0d0c=_0x563835['slice'](0x3);_0x2e974d[_0x18cdd5][_0x3b14e8(0x287)]=_0x563835[0x0],_0x2e974d[_0x18cdd5][_0x3b14e8(0x238)]=_0x563835[0x1],_0x2e974d[_0x18cdd5]['bay']=0x0,_0x2e974d[_0x18cdd5][_0x3b14e8(0x20c)]=0x0,_0x2e974d[_0x18cdd5][_0x3b14e8(0x22e)]='Floor',_0x2e974d[_0x18cdd5][_0x3b14e8(0x1d6)]=_0x563835[0x5];}else{if(_0x18cdd5==_0x4efc6c){var _0x33bebf;if(_0x563835[0x4]=='L')_0x33bebf=_0x3b14e8(0x24f);else _0x563835[0x4]=='F'&&(_0x33bebf='Floor');_0x2e974d[_0x18cdd5][_0x3b14e8(0x287)]=_0x563835[0x0],_0x2e974d[_0x18cdd5][_0x3b14e8(0x238)]=_0x563835[0x1],_0x2e974d[_0x18cdd5]['bay']=_0x563835[0x2],_0x2e974d[_0x18cdd5][_0x3b14e8(0x20c)]=_0x563835[0x3],_0x2e974d[_0x18cdd5][_0x3b14e8(0x22e)]=_0x33bebf,_0x2e974d[_0x18cdd5][_0x3b14e8(0x1d6)]=_0x563835[0x5];}}}});}),_0x309c70['forEach']((_0x49e25b,_0x4aca8b)=>{var _0x5657bf=_0x54d2d3;_0x2e974d[_0x4aca8b][_0x5657bf(0x232)]=_0x49e25b;}),_0x36901a['forEach']((_0x56abe0,_0x38715b)=>{var _0x17f5f7=_0x54d2d3;_0x2e974d[_0x38715b][_0x17f5f7(0x29a)]=_0x56abe0;}),_0x1dbd41[_0x54d2d3(0x1fe)]((_0x1dc263,_0xd57133)=>{_0x2e974d[_0xd57133]['adjust_qty']=_0x1dc263;}),_0x16e608[_0x54d2d3(0x1fe)]((_0x564179,_0xf98810)=>{_0x2e974d[_0xf98810]['new_adjust_qty']=_0x564179;}),_0x213543[_0x54d2d3(0x1fe)]((_0x15bb52,_0x4d7c70)=>{var _0xbb58f=_0x54d2d3;_0x2e974d[_0x4d7c70][_0xbb58f(0x210)]=_0x15bb52;}),_0x5de341[_0x54d2d3(0x1fe)]((_0x1b11b3,_0x4128bd)=>{var _0x4a4313=_0x54d2d3;_0x2e974d[_0x4128bd][_0x4a4313(0x21d)]=_0x1b11b3;}),_0x58d81b[_0x54d2d3(0x1fe)]((_0x411474,_0x18accb)=>{var _0x3d5e3d=_0x54d2d3;_0x2e974d[_0x18accb][_0x3d5e3d(0x1d3)]=_0x411474;}),_0x5dc0b9[_0x54d2d3(0x1fe)]((_0x28b39b,_0x392939)=>{var _0x2313a4=_0x54d2d3;_0x2e974d[_0x392939][_0x2313a4(0x1c7)]=_0x28b39b;}),_0x2488ad[_0x54d2d3(0x1fe)]((_0x2a9817,_0x35bbf6)=>{var _0x3b5098=_0x54d2d3;_0x2e974d[_0x35bbf6][_0x3b5098(0x1ed)]=_0x2a9817;}),_0x145b0d[_0x54d2d3(0x1fe)]((_0x2392cf,_0x1d1bf8)=>{var _0x56710b=_0x54d2d3;_0x2e974d[_0x1d1bf8][_0x56710b(0x218)]=_0x2392cf;}),_0x14851a['forEach']((_0x5533f1,_0x380cf2)=>{var _0xd5004d=_0x54d2d3;_0x2e974d[_0x380cf2][_0xd5004d(0x22d)]=_0x5533f1;}),_0x4b2c0a[_0x54d2d3(0x1fe)]((_0x3028dd,_0x5b6d50)=>{var _0x121eb3=_0x54d2d3;_0x2e974d[_0x5b6d50][_0x121eb3(0x242)]=_0x3028dd;}),_0x4996ba[_0x54d2d3(0x1fe)]((_0xe73753,_0x24ae95)=>{var _0x1aef12=_0x54d2d3;_0x2e974d[_0x24ae95][_0x1aef12(0x1f8)]=_0xe73753;}),_0x449196['forEach']((_0x344d2f,_0x1bea32)=>{var _0x435b40=_0x54d2d3;_0x2e974d[_0x1bea32][_0x435b40(0x1cc)]=_0x344d2f;}),_0xe80864[_0x54d2d3(0x1fe)]((_0x127f39,_0x33da46)=>{_0x2e974d[_0x33da46]['secondary_code']=_0x127f39;});const _0x592327=_0x2e974d[_0x54d2d3(0x292)](_0x210c26=>_0x210c26[_0x54d2d3(0x241)]!=='0'&&_0x210c26[_0x54d2d3(0x241)]!=='');var _0x2d741b=0x0;_0x592327['forEach'](_0x52249e=>{var _0x35d726=_0x54d2d3;console[_0x35d726(0x244)]('foreach\x20newproduct',_0x52249e),parseInt(_0x52249e[_0x35d726(0x241)])<=0x0&&_0x2d741b++;});if(_0x2d741b!=0x0)return _0x4b6a6a['flash'](_0x54d2d3(0x269),_0x54d2d3(0x23b)),_0x422e65[_0x54d2d3(0x24c)]('back');_0x22e551['warehouse_name']=_0x20fff3,_0x22e551[_0x54d2d3(0x228)]=_0x2292a6,_0x22e551[_0x54d2d3(0x25c)]=_0x592327,_0x22e551[_0x54d2d3(0x240)]=_0x27110d,_0x22e551['invoice']=_0x398d32,_0x22e551[_0x54d2d3(0x1e8)]=_0x54d2d3(0x23c);const _0x53af9f=await _0x22e551[_0x54d2d3(0x23d)]();_0x4b6a6a[_0x54d2d3(0x249)](_0x54d2d3(0x215),_0x54d2d3(0x1e9)),_0x422e65[_0x54d2d3(0x24c)]('/adjustment/view');}catch(_0x5c5920){console[_0x54d2d3(0x244)](_0x5c5920);}}),router[a0_0x340bf4(0x211)](a0_0x340bf4(0x1f4),async(_0x1ccd55,_0x3086aa)=>{var _0x2662b7=a0_0x340bf4;const {primary_code:_0x137ef9,warehouse_data:_0x4288fc,rooms_data:_0x1e1de3,Roomslist:_0x4d78e4}=_0x1ccd55[_0x2662b7(0x255)],_0x44ed2d=_0x4d78e4[_0x2662b7(0x1c9)](','),_0x4c04fb=[];async function _0x30ecf3(_0x402eba){var _0x1e1e63=_0x2662b7;const _0x57a4d5=await warehouse[_0x1e1e63(0x289)]([{'$match':{'name':_0x4288fc,'room':_0x402eba}},{'$unwind':_0x1e1e63(0x290)},{'$match':{'product_details.primary_code':_0x137ef9}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1e1e63(0x243)},'product_stock':{'$first':_0x1e1e63(0x209)},'primary_code':{'$first':_0x1e1e63(0x1ff)},'secondary_code':{'$first':_0x1e1e63(0x1fc)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1e1e63(0x1fd)},'type':{'$first':_0x1e1e63(0x22f)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x1e1e63(0x1e1)},'secondary_unit':{'$first':_0x1e1e63(0x272)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x1e1e63(0x264)},'production_date':{'$first':_0x1e1e63(0x1e4)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x1e1e63(0x227)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x1e1e63(0x26e)}}}]),_0x1e7ad2=await warehouse[_0x1e1e63(0x289)]([{'$match':{'name':_0x4288fc,'room':_0x402eba}},{'$unwind':_0x1e1e63(0x290)},{'$match':{'product_details.secondary_code':_0x137ef9}},{'$group':{'_id':_0x1e1e63(0x1e5),'name':{'$first':_0x1e1e63(0x243)},'product_stock':{'$first':_0x1e1e63(0x209)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1e1e63(0x1fc)},'product_code':{'$first':_0x1e1e63(0x26d)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1e1e63(0x1fd)},'type':{'$first':_0x1e1e63(0x22f)},'pallet':{'$first':_0x1e1e63(0x28b)},'unit':{'$first':_0x1e1e63(0x1e1)},'secondary_unit':{'$first':_0x1e1e63(0x272)},'storage':{'$first':_0x1e1e63(0x20f)},'rack':{'$first':_0x1e1e63(0x254)},'expiry_date':{'$first':_0x1e1e63(0x264)},'production_date':{'$first':_0x1e1e63(0x1e4)},'maxPerUnit':{'$first':_0x1e1e63(0x216)},'batch_code':{'$first':_0x1e1e63(0x28a)},'product_cat':{'$first':_0x1e1e63(0x227)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x57a4d5[_0x1e1e63(0x1de)]>0x0)_0x4c04fb[_0x1e1e63(0x283)](_0x57a4d5);else _0x1e7ad2[_0x1e1e63(0x1de)]>0x0&&_0x4c04fb['push'](_0x1e7ad2);}const _0x364643=_0x44ed2d[_0x2662b7(0x275)](_0x38c72c=>_0x30ecf3(_0x38c72c));await Promise['all'](_0x364643),_0x3086aa[_0x2662b7(0x28d)](_0x4c04fb);}),router['post'](a0_0x340bf4(0x1e3),async(_0x411299,_0x4c74ff)=>{var _0x5a0c25=a0_0x340bf4;const {primaryCode:_0x18759e,secondaryCode:_0x3f5de9,productCode:_0x808c17,level:_0x1fef71,isle:_0x46f654,pallet:_0x2edc2f,warehouses:_0x5bd6ea,room:_0xeb4600}=_0x411299[_0x5a0c25(0x255)];try{const _0x3c10e2=await warehouse['aggregate']([{'$match':{'name':_0x5bd6ea,'room':_0xeb4600}},{'$unwind':_0x5a0c25(0x290)},{'$match':{'product_details.level':parseInt(_0x1fef71),'product_details.isle':_0x46f654,'product_details.pallet':parseInt(_0x2edc2f)}},{'$group':{'_id':_0x5a0c25(0x1e5),'name':{'$first':_0x5a0c25(0x243)},'product_stock':{'$first':_0x5a0c25(0x209)},'level':{'$first':_0x5a0c25(0x1f5)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x5a0c25(0x1d9)},'maxProducts':{'$first':_0x5a0c25(0x20e)}}}]);_0x4c74ff[_0x5a0c25(0x1c8)](0xc8)[_0x5a0c25(0x28d)](_0x3c10e2);}catch(_0x44a2e0){_0x4c74ff[_0x5a0c25(0x1c8)](0x194)[_0x5a0c25(0x28d)]({'message':_0x44a2e0[_0x5a0c25(0x270)]});}}),module[a0_0x340bf4(0x261)]=router;