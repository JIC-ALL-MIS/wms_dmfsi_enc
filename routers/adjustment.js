var a0_0xa2d603=a0_0x2070;function a0_0x2070(_0x317f51,_0x18190b){var _0x658245=a0_0x6582();return a0_0x2070=function(_0x2070c7,_0x1e90cd){_0x2070c7=_0x2070c7-0x113;var _0x2749dc=_0x658245[_0x2070c7];return _0x2749dc;},a0_0x2070(_0x317f51,_0x18190b);}(function(_0x51723d,_0x1fdc9e){var _0x2b5dc1=a0_0x2070,_0x14b215=_0x51723d();while(!![]){try{var _0x5cd7a5=-parseInt(_0x2b5dc1(0x1e4))/0x1*(-parseInt(_0x2b5dc1(0x16d))/0x2)+-parseInt(_0x2b5dc1(0x191))/0x3+-parseInt(_0x2b5dc1(0x154))/0x4*(-parseInt(_0x2b5dc1(0x14e))/0x5)+parseInt(_0x2b5dc1(0x143))/0x6+parseInt(_0x2b5dc1(0x12a))/0x7+parseInt(_0x2b5dc1(0x11a))/0x8+parseInt(_0x2b5dc1(0x18e))/0x9*(-parseInt(_0x2b5dc1(0x188))/0xa);if(_0x5cd7a5===_0x1fdc9e)break;else _0x14b215['push'](_0x14b215['shift']());}catch(_0x1931b0){_0x14b215['push'](_0x14b215['shift']());}}}(a0_0x6582,0x57259));const express=require(a0_0xa2d603(0x193)),app=express(),router=express[a0_0xa2d603(0x1f0)](),auth=require(a0_0xa2d603(0x153)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0xa2d603(0x17e)),users=require('../public/language/languages.json'),nodemailer=require(a0_0xa2d603(0x1dd)),mongoose=require(a0_0xa2d603(0x1e1));router['get']('/view',auth,async(_0x8493c7,_0x45806e)=>{var _0x471c16=a0_0xa2d603;try{const {username:_0x26b51a,email:_0x22bef8,role:_0x4fe388}=_0x8493c7[_0x471c16(0x16b)],_0x3ad190=_0x8493c7['user'],_0x4bc967=await profile[_0x471c16(0x1b1)]({'email':_0x3ad190[_0x471c16(0x1b3)]}),_0x29501f=await master_shop[_0x471c16(0x1af)]();console[_0x471c16(0x181)](_0x471c16(0x165),_0x29501f);let _0x20b786;if(_0x3ad190[_0x471c16(0x16e)]==_0x471c16(0x176)){const _0xd60660=await staff[_0x471c16(0x1b1)]({'email':_0x3ad190[_0x471c16(0x1b3)]});_0x20b786=await warehouse['find']({'status':_0x471c16(0x1ea),'name':_0xd60660[_0x471c16(0x11e)]});}else _0x20b786=await warehouse[_0x471c16(0x1af)]({'status':_0x471c16(0x1ea)});const _0x3779d6=await product[_0x471c16(0x1af)]();let _0x27f84b;if(_0x3ad190['role']==_0x471c16(0x176)){const _0xd1107e=await staff[_0x471c16(0x1b1)]({'email':_0x3ad190[_0x471c16(0x1b3)]});_0x27f84b=await adjustment[_0x471c16(0x1af)]({'warehouse_name':_0xd1107e[_0x471c16(0x11e)]});}else _0x27f84b=await adjustment['aggregate']([{'$unwind':_0x471c16(0x1d7)},{'$group':{'_id':'$_id','invoice':{'$first':_0x471c16(0x148)},'date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x471c16(0x19c)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x29501f[0x0][_0x471c16(0x198)]=='English\x20(US)'){var _0xdb071c=users[_0x471c16(0x1db)];console[_0x471c16(0x181)](_0xdb071c);}else{if(_0x29501f[0x0]['language']=='Hindi')var _0xdb071c=users['Hindi'];else{if(_0x29501f[0x0][_0x471c16(0x198)]==_0x471c16(0x1d3))var _0xdb071c=users[_0x471c16(0x1d3)];else{if(_0x29501f[0x0]['language']==_0x471c16(0x137))var _0xdb071c=users[_0x471c16(0x137)];else{if(_0x29501f[0x0][_0x471c16(0x198)]==_0x471c16(0x1b5))var _0xdb071c=users[_0x471c16(0x1b5)];else{if(_0x29501f[0x0][_0x471c16(0x198)]==_0x471c16(0x146))var _0xdb071c=users['Portuguese'];else{if(_0x29501f[0x0][_0x471c16(0x198)]==_0x471c16(0x1ab))var _0xdb071c=users[_0x471c16(0x1ab)];else{if(_0x29501f[0x0][_0x471c16(0x198)]==_0x471c16(0x17f))var _0xdb071c=users[_0x471c16(0x114)];}}}}}}}_0x45806e[_0x471c16(0x19e)](_0x471c16(0x145),{'success':_0x8493c7[_0x471c16(0x1e0)](_0x471c16(0x169)),'errors':_0x8493c7[_0x471c16(0x1e0)](_0x471c16(0x1de)),'role':_0x3ad190,'profile':_0x4bc967,'warehouse':_0x20b786,'product':_0x3779d6,'adjustment':_0x27f84b,'master_shop':_0x29501f,'language':_0xdb071c});}catch(_0x4bbbbf){console[_0x471c16(0x181)](_0x4bbbbf);}});async function getRandom8DigitNumber(){var _0x316da1=a0_0xa2d603;const _0x2662ca=0x989680,_0x32445c=0x5f5e0ff,_0x3d9019=Math[_0x316da1(0x190)](Math['random']()*(_0x32445c-_0x2662ca+0x1))+_0x2662ca;var _0x101bce;const _0x37d659=await adjustment[_0x316da1(0x1b1)]({'invoice':_0x316da1(0x12f)+_0x3d9019});return _0x37d659&&_0x37d659[_0x316da1(0x186)]>0x0?_0x101bce='ADJ-'+_0x3d9019:_0x101bce='ADJ-'+_0x3d9019,_0x101bce;}router[a0_0xa2d603(0x13b)]('/view/add_adjustment',auth,async(_0x555397,_0x1b8d96)=>{var _0x2096cd=a0_0xa2d603;try{const {username:_0x5b99cd,email:_0x258cc1,role:_0x28d81a}=_0x555397['user'],_0x18e515=_0x555397[_0x2096cd(0x16b)],_0x18f18f=await profile['findOne']({'email':_0x18e515['email']}),_0x5624cd=await master_shop[_0x2096cd(0x1af)]();let _0x5626a6;if(_0x18e515[_0x2096cd(0x16e)]==_0x2096cd(0x176)){const _0x545db4=await staff[_0x2096cd(0x1b1)]({'email':_0x18e515['email']});_0x5626a6=await warehouse[_0x2096cd(0x115)]([{'$match':{'status':_0x2096cd(0x1ea),'name':_0x545db4[_0x2096cd(0x11e)],'warehouse_category':_0x2096cd(0x120),'name':{'$ne':_0x2096cd(0x1c0)}}},{'$group':{'_id':_0x2096cd(0x174),'name':{'$first':_0x2096cd(0x174)}}}]);}else _0x5626a6=await warehouse[_0x2096cd(0x115)]([{'$match':{'status':_0x2096cd(0x1ea),'warehouse_category':_0x2096cd(0x120),'name':{'$ne':_0x2096cd(0x1c0)}}},{'$group':{'_id':_0x2096cd(0x174),'name':{'$first':'$name'}}}]);const _0x18ef53=await product[_0x2096cd(0x1af)]({}),_0x2ad9eb=await adjustment[_0x2096cd(0x1af)]({}),_0x24db8b=_0x2ad9eb['length']+0x1,_0xd82e35=_0x2096cd(0x12f)+_0x24db8b[_0x2096cd(0x157)]()[_0x2096cd(0x144)](0x5,'0');var _0x32ad90=[_0x2096cd(0x1ce),_0x2096cd(0x15b),_0x2096cd(0x1a6)];if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x197))var _0x4e572b=users[_0x2096cd(0x1db)];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x121))var _0x4e572b=users[_0x2096cd(0x121)];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x1d3))var _0x4e572b=users['German'];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x137))var _0x4e572b=users[_0x2096cd(0x137)];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]=='French')var _0x4e572b=users[_0x2096cd(0x1b5)];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x146))var _0x4e572b=users[_0x2096cd(0x1e3)];else{if(_0x5624cd[0x0][_0x2096cd(0x198)]==_0x2096cd(0x1ab))var _0x4e572b=users[_0x2096cd(0x1ab)];else{if(_0x5624cd[0x0]['language']==_0x2096cd(0x17f))var _0x4e572b=users['Arabic'];}}}}}}}const _0x20cc81=getRandom8DigitNumber();_0x20cc81[_0x2096cd(0x1a3)](_0x5819e9=>{var _0x3d84c5=_0x2096cd;_0x1b8d96[_0x3d84c5(0x19e)](_0x3d84c5(0x1ae),{'success':_0x555397['flash']('success'),'errors':_0x555397[_0x3d84c5(0x1e0)](_0x3d84c5(0x1de)),'role':_0x18e515,'profile':_0x18f18f,'warehouse':_0x5626a6,'product':_0x18ef53,'master_shop':_0x5624cd,'language':_0x4e572b,'rooms_data':_0x32ad90,'invoice_no':_0x5819e9});})[_0x2096cd(0x171)](_0x4c5419=>{var _0x419fed=_0x2096cd;_0x555397['flash'](_0x419fed(0x1de),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x1b8d96[_0x419fed(0x17b)](_0x419fed(0x1ed));});}catch(_0x272a13){console[_0x2096cd(0x181)](_0x272a13);}}),router[a0_0xa2d603(0x1c5)](a0_0xa2d603(0x1b0),auth,async(_0x281532,_0x5f330f)=>{var _0x33b201=a0_0xa2d603;try{const {warehouse_name:_0x2417a1,date:_0x44bbb2,prod_name:_0x56a73f,level:_0x4ddb01,isle:_0x264eda,pallet:_0x50c2b6,stock:_0x42f04c,types:_0x25d710,adjust_qty:_0x59a950,new_adjust_qty:_0x545b5f,note:_0x2e4675,Room_name:_0x38f152,invoice:_0x3904e5,JO_number:_0x1b7f9c,expiry_date:_0xa1b548}=_0x281532[_0x33b201(0x1b7)];if(typeof _0x56a73f==_0x33b201(0x178))var _0x48dd3b=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x15e)]],_0x1c2576=[_0x281532[_0x33b201(0x1b7)]['level']],_0x409483=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x18b)]],_0x53d25a=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x129)]],_0x49da9d=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x117)]],_0x516edb=[_0x281532['body'][_0x33b201(0x167)]],_0x3b9444=[_0x281532['body']['Primary_Units']],_0x492813=[_0x281532['body'][_0x33b201(0x15a)]],_0x31975a=[_0x281532['body']['prod_code']],_0x2ec71a=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x1b8)]],_0x4c2d14=[_0x281532[_0x33b201(0x1b7)]['expiry_date']],_0x359808=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x11d)]],_0xf1d199=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x1cf)]],_0x3992ac=[_0x281532['body'][_0x33b201(0x132)]],_0x36456e=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x15d)]],_0x5b2d2f=[_0x281532['body']['prime1']],_0x41100c=[_0x281532[_0x33b201(0x1b7)]['second1']],_0x3532fc=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x1e8)]],_0x58954f=[_0x281532[_0x33b201(0x1b7)][_0x33b201(0x1a0)]];else var _0x48dd3b=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x15e)]],_0x1c2576=[..._0x281532[_0x33b201(0x1b7)]['level']],_0x409483=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x18b)]],_0x53d25a=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x129)]],_0x49da9d=[..._0x281532[_0x33b201(0x1b7)]['New_Qty_Converted_adj']],_0x516edb=[..._0x281532[_0x33b201(0x1b7)]['New_Qty_Converted']],_0x3b9444=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x160)]],_0x492813=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x15a)]],_0x31975a=[..._0x281532['body'][_0x33b201(0x189)]],_0x2ec71a=[..._0x281532['body'][_0x33b201(0x1b8)]],_0x4c2d14=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x16f)]],_0x359808=[..._0x281532['body'][_0x33b201(0x11d)]],_0xf1d199=[..._0x281532['body']['production_date']],_0x3992ac=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x132)]],_0x36456e=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x15d)]],_0x5b2d2f=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x18a)]],_0x41100c=[..._0x281532[_0x33b201(0x1b7)]['second1']],_0x3532fc=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x1e8)]],_0x58954f=[..._0x281532[_0x33b201(0x1b7)][_0x33b201(0x1a0)]];const _0x414ddf=_0x48dd3b[_0x33b201(0x13e)](_0x7aa37f=>{return _0x7aa37f={'product_name':_0x7aa37f};});_0x1c2576[_0x33b201(0x11b)]((_0x37f3c7,_0x41eff8)=>{var _0x15799e=_0x33b201;_0x36456e[_0x15799e(0x11b)]((_0x40cb76,_0x4b44ec)=>{var _0x3662c9=_0x15799e;if(_0x40cb76==_0x3662c9(0x12b)&&_0x41eff8==_0x4b44ec){var _0x247c34=_0x37f3c7[_0x3662c9(0x1a4)](0x3);_0x414ddf[_0x41eff8][_0x3662c9(0x170)]=_0x37f3c7[0x0],_0x414ddf[_0x41eff8][_0x3662c9(0x180)]=_0x37f3c7[0x1],_0x414ddf[_0x41eff8][_0x3662c9(0x1cb)]=0x0,_0x414ddf[_0x41eff8][_0x3662c9(0x1c9)]=0x0,_0x414ddf[_0x41eff8][_0x3662c9(0x182)]=_0x3662c9(0x1a8),_0x414ddf[_0x41eff8][_0x3662c9(0x1bc)]=_0x247c34;}else{if(_0x40cb76==_0x3662c9(0x1a7)&&_0x41eff8==_0x4b44ec){var _0x247c34=_0x37f3c7[_0x3662c9(0x1a4)](0x3);_0x414ddf[_0x41eff8]['storage']=_0x37f3c7[0x0],_0x414ddf[_0x41eff8][_0x3662c9(0x180)]=_0x37f3c7[0x1],_0x414ddf[_0x41eff8][_0x3662c9(0x1cb)]=0x0,_0x414ddf[_0x41eff8][_0x3662c9(0x1c9)]=0x0,_0x414ddf[_0x41eff8][_0x3662c9(0x182)]='Floor',_0x414ddf[_0x41eff8]['floorlevel']=_0x37f3c7[0x5];}else{if(_0x41eff8==_0x4b44ec){var _0x5256b9;if(_0x37f3c7[0x4]=='L')_0x5256b9='Level';else _0x37f3c7[0x4]=='F'&&(_0x5256b9='Floor');_0x414ddf[_0x41eff8][_0x3662c9(0x170)]=_0x37f3c7[0x0],_0x414ddf[_0x41eff8][_0x3662c9(0x180)]=_0x37f3c7[0x1],_0x414ddf[_0x41eff8]['bay']=_0x37f3c7[0x2],_0x414ddf[_0x41eff8][_0x3662c9(0x1c9)]=_0x37f3c7[0x3],_0x414ddf[_0x41eff8]['type']=_0x5256b9,_0x414ddf[_0x41eff8]['floorlevel']=_0x37f3c7[0x5];}}}});}),_0x409483[_0x33b201(0x11b)]((_0x3785f6,_0x16490e)=>{var _0x2e4d20=_0x33b201;_0x414ddf[_0x16490e][_0x2e4d20(0x113)]=_0x3785f6;}),_0x58954f[_0x33b201(0x11b)]((_0x4563b1,_0x26c4aa)=>{var _0x4d2455=_0x33b201;_0x414ddf[_0x26c4aa][_0x4d2455(0x1e2)]=_0x4563b1;}),_0x53d25a['forEach']((_0x3c9d4e,_0x4430ee)=>{var _0xc399db=_0x33b201;_0x414ddf[_0x4430ee][_0xc399db(0x129)]=_0x3c9d4e;}),_0x49da9d[_0x33b201(0x11b)]((_0x462c1a,_0x1aad62)=>{var _0x1caf5f=_0x33b201;_0x414ddf[_0x1aad62][_0x1caf5f(0x11c)]=_0x462c1a;}),_0x516edb[_0x33b201(0x11b)]((_0x59cf58,_0x254802)=>{var _0x1d7368=_0x33b201;_0x414ddf[_0x254802][_0x1d7368(0x135)]=_0x59cf58;}),_0x3b9444[_0x33b201(0x11b)]((_0xedfad2,_0x39b540)=>{var _0x595798=_0x33b201;_0x414ddf[_0x39b540][_0x595798(0x160)]=_0xedfad2;}),_0x492813[_0x33b201(0x11b)]((_0x591db7,_0x2c905a)=>{var _0x45423f=_0x33b201;_0x414ddf[_0x2c905a][_0x45423f(0x127)]=_0x591db7;}),_0x31975a[_0x33b201(0x11b)]((_0x11c94d,_0x1a06c2)=>{var _0xa623d6=_0x33b201;_0x414ddf[_0x1a06c2][_0xa623d6(0x1cc)]=_0x11c94d;}),_0x2ec71a[_0x33b201(0x11b)]((_0x33f661,_0x48c638)=>{var _0x47ce8b=_0x33b201;_0x414ddf[_0x48c638][_0x47ce8b(0x1b8)]=_0x33f661;}),_0x4c2d14[_0x33b201(0x11b)]((_0x2ed08b,_0x24257b)=>{var _0x46839f=_0x33b201;_0x414ddf[_0x24257b][_0x46839f(0x16f)]=_0x2ed08b;}),_0x359808['forEach']((_0x2366fe,_0x4e8b2e)=>{var _0xda28db=_0x33b201;_0x414ddf[_0x4e8b2e][_0xda28db(0x195)]=_0x2366fe;}),_0xf1d199[_0x33b201(0x11b)]((_0x5d32b6,_0x5dba7e)=>{var _0x164140=_0x33b201;_0x414ddf[_0x5dba7e][_0x164140(0x1cf)]=_0x5d32b6;}),_0x3992ac[_0x33b201(0x11b)]((_0x4b0e6d,_0x38182f)=>{var _0x43a9ae=_0x33b201;_0x414ddf[_0x38182f][_0x43a9ae(0x132)]=_0x4b0e6d;}),_0x36456e['forEach']((_0x2d5e0f,_0x148e12)=>{_0x414ddf[_0x148e12]['room_names']=_0x2d5e0f;}),_0x5b2d2f[_0x33b201(0x11b)]((_0x32a89a,_0xa0ee27)=>{var _0x15a401=_0x33b201;_0x414ddf[_0xa0ee27][_0x15a401(0x175)]=_0x32a89a;}),_0x41100c[_0x33b201(0x11b)]((_0x15840e,_0x3b9241)=>{var _0x5a61a1=_0x33b201;_0x414ddf[_0x3b9241][_0x5a61a1(0x13f)]=_0x15840e;}),_0x3532fc[_0x33b201(0x11b)]((_0x57fe0c,_0x58cf0e)=>{var _0x11b793=_0x33b201;_0x414ddf[_0x58cf0e][_0x11b793(0x1eb)]=_0x57fe0c;});const _0x589aea=_0x414ddf[_0x33b201(0x185)](_0x27eedc=>_0x27eedc[_0x33b201(0x11c)]!=='0'&&_0x27eedc['adjust_qty']!=='');var _0x466d41=0x0;_0x589aea['forEach'](_0x5972e0=>{var _0x3a312f=_0x33b201;console['log']('foreach\x20newproduct',_0x5972e0),parseInt(_0x5972e0[_0x3a312f(0x11c)])<=0x0&&_0x466d41++;});if(_0x466d41!=0x0)return _0x281532[_0x33b201(0x1e0)](_0x33b201(0x1de),_0x33b201(0x192)),_0x5f330f[_0x33b201(0x17b)](_0x33b201(0x158));const _0x70aa19=new adjustment({'warehouse_name':_0x2417a1,'date':_0x44bbb2,'product':_0x589aea,'note':_0x2e4675,'room':_0x38f152,'invoice':_0x3904e5,'JO_number':_0x1b7f9c,'expiry_date':_0xa1b548}),_0x435c22=await _0x70aa19['save']();_0x281532[_0x33b201(0x1e0)](_0x33b201(0x169),_0x33b201(0x1ca)),_0x5f330f[_0x33b201(0x17b)]('/adjustment/preview/'+_0x435c22['_id']);}catch(_0x137ed1){console[_0x33b201(0x181)](_0x137ed1),_0x5f330f[_0x33b201(0x1a1)](0xc8)['json']({'message':_0x137ed1[_0x33b201(0x125)]});}}),router[a0_0xa2d603(0x13b)](a0_0xa2d603(0x155),auth,async(_0x44e9db,_0x175349)=>{var _0x236e18=a0_0xa2d603;try{const {username:_0x173ae5,email:_0x57e08f,role:_0x1c22bb}=_0x44e9db['user'],_0x6fb039=_0x44e9db['user'],_0x48443f=await profile[_0x236e18(0x1b1)]({'email':_0x6fb039['email']}),_0x573f29=await master_shop[_0x236e18(0x1af)](),_0x1db59d=_0x44e9db['params']['id'],_0x43296a=await adjustment[_0x236e18(0x140)]({'_id':_0x1db59d}),_0x21fbe9=await purchases['aggregate']([{'$match':{'warehouse_name':_0x43296a['warehouse_name']}},{'$unwind':_0x236e18(0x1d7)},{'$group':{'_id':_0x236e18(0x19d)}}]),_0x1663e2=await product[_0x236e18(0x1af)]({}),_0x54771d=await warehouse['aggregate']([{'$match':{'name':_0x43296a[_0x236e18(0x150)]}},{'$unwind':_0x236e18(0x1c6)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x236e18(0x134)},'product_stock':{'$first':_0x236e18(0x1b6)},'bay':{'$first':_0x236e18(0x1ef)},'bin':{'$first':_0x236e18(0x119)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x236e18(0x1c8)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x236e18(0x184)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x236e18(0x15c)},'rack':{'$first':_0x236e18(0x118)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x236e18(0x1be)},'production_date':{'$first':_0x236e18(0x1da)},'batch_code':{'$first':_0x236e18(0x126)},'room':{'$first':_0x236e18(0x1ee)}}}]);if(_0x573f29[0x0]['language']==_0x236e18(0x197)){var _0x1b2e15=users[_0x236e18(0x1db)];console['log'](_0x1b2e15);}else{if(_0x573f29[0x0]['language']=='Hindi')var _0x1b2e15=users['Hindi'];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x1d3))var _0x1b2e15=users[_0x236e18(0x1d3)];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x137))var _0x1b2e15=users[_0x236e18(0x137)];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x1b5))var _0x1b2e15=users[_0x236e18(0x1b5)];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x146))var _0x1b2e15=users['Portuguese'];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x1ab))var _0x1b2e15=users[_0x236e18(0x1ab)];else{if(_0x573f29[0x0][_0x236e18(0x198)]==_0x236e18(0x17f))var _0x1b2e15=users[_0x236e18(0x114)];}}}}}}}_0x175349[_0x236e18(0x19e)](_0x236e18(0x1d0),{'success':_0x44e9db[_0x236e18(0x1e0)](_0x236e18(0x169)),'errors':_0x44e9db[_0x236e18(0x1e0)](_0x236e18(0x1de)),'role':_0x6fb039,'profile':_0x48443f,'adjustment':_0x43296a,'master_shop':_0x573f29,'warehouse_name':_0x21fbe9,'unit':_0x1663e2,'language':_0x1b2e15});}catch(_0x437e28){console[_0x236e18(0x181)](_0x437e28),_0x175349[_0x236e18(0x1a1)](0xc8)['json']({'message':_0x437e28[_0x236e18(0x125)]});}}),router['post'](a0_0xa2d603(0x155),auth,async(_0x6362a1,_0x38ddd0)=>{var _0xd49412=a0_0xa2d603;try{const _0x18c4e4=_0x6362a1[_0xd49412(0x199)]['id'],{warehouse_name:_0x38c9c7,Room_name:_0x1197d9}=_0x6362a1[_0xd49412(0x1b7)],_0x5a4004=await adjustment[_0xd49412(0x140)]({'_id':_0x18c4e4}),_0x50dc67=_0x5a4004['product'][_0xd49412(0x13e)](async _0x23c682=>{var _0x3b8213=_0xd49412;if(_0x23c682[_0x3b8213(0x11c)]>0x0){const _0x32f51e=mongoose[_0x3b8213(0x18c)]['ObjectId'];var _0x7406fc=await warehouse[_0x3b8213(0x115)]([{'$match':{'name':_0x38c9c7,'room':_0x23c682['room_names'],'warehouse_category':_0x3b8213(0x120)}},{'$unwind':_0x3b8213(0x1c6)},{'$match':{'product_details._id':_0x32f51e(_0x23c682[_0x3b8213(0x1e2)])}}]),_0x1fffab=0x0;for(let _0x3c60ad=0x0;_0x3c60ad<=_0x7406fc[_0x3b8213(0x186)]-0x1;_0x3c60ad++){const _0x245340=_0x7406fc[_0x3c60ad];_0x23c682[_0x3b8213(0x129)]==_0x3b8213(0x116)?(console[_0x3b8213(0x181)]('-'),_0x1fffab=parseFloat(_0x7406fc[_0x3c60ad][_0x3b8213(0x11f)][_0x3b8213(0x19a)])-parseFloat(_0x23c682[_0x3b8213(0x11c)])):(console[_0x3b8213(0x181)]('+'),_0x1fffab=parseFloat(_0x7406fc[_0x3c60ad][_0x3b8213(0x11f)][_0x3b8213(0x19a)])+parseFloat(_0x23c682[_0x3b8213(0x11c)])),await warehouse[_0x3b8213(0x133)]({'_id':_0x32f51e(_0x245340[_0x3b8213(0x136)]['valueOf']()),'product_details._id':_0x32f51e(_0x245340[_0x3b8213(0x11f)][_0x3b8213(0x136)])},{'$set':{'product_details.$.product_stock':_0x1fffab,'product_details.$.adj_invoice':_0x5a4004[_0x3b8213(0x1eb)]}}),console['log'](_0x245340[_0x3b8213(0x136)]['valueOf']()+_0x3b8213(0x16c)+_0x245340[_0x3b8213(0x11f)]['_id']+_0x3b8213(0x16c)+_0x1fffab);}}});_0x5a4004[_0xd49412(0x1ad)]=_0xd49412(0x194);const _0x1c4c99=await _0x5a4004[_0xd49412(0x1bb)](),_0x23b2a5=await master_shop[_0xd49412(0x1af)](),_0x2c1d8e=await email_settings[_0xd49412(0x1b1)](),_0x47fc10=await supervisor_settings[_0xd49412(0x1af)]();var _0xf02b03=_0x5a4004[_0xd49412(0x1df)],_0x4454cc='',_0x59b8ff;for(_0x59b8ff in _0xf02b03){_0x4454cc+=_0xd49412(0x123)+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff]['product_name']+_0xd49412(0x13a)+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff][_0xd49412(0x1cc)]+_0xd49412(0x13a)+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff]['adjust_qty']+_0xd49412(0x13a)+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff][_0xd49412(0x160)]+'</td>'+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff]['secondary_unit']+_0xd49412(0x13a)+_0xd49412(0x1c4)+_0x5a4004['warehouse_name']+_0xd49412(0x13a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xf02b03[_0x59b8ff][_0xd49412(0x1e7)]+_0xd49412(0x13a)+_0xd49412(0x1c4)+_0xf02b03[_0x59b8ff][_0xd49412(0x170)]+_0xf02b03[_0x59b8ff][_0xd49412(0x180)]+_0xf02b03[_0x59b8ff]['bay']+_0xf02b03[_0x59b8ff]['bin']+_0xf02b03[_0x59b8ff]['type'][0x0]+_0xf02b03[_0x59b8ff][_0xd49412(0x1bc)]+_0xd49412(0x13a),'</tr>';}let _0x3e90fe=nodemailer[_0xd49412(0x14b)]({'host':_0x2c1d8e[_0xd49412(0x12c)],'port':Number(_0x2c1d8e['port']),'secure':![],'auth':{'user':_0x2c1d8e[_0xd49412(0x1b3)],'pass':_0x2c1d8e[_0xd49412(0x172)]}}),_0x38a5c1={'from':_0x2c1d8e['email'],'to':_0x47fc10[0x0][_0xd49412(0x1aa)],'subject':_0xd49412(0x1d8),'attachments':[{'filename':_0xd49412(0x1d1),'path':__dirname+_0xd49412(0x173)+_0xd49412(0x15f)+_0x23b2a5[0x0][_0xd49412(0x1b2)],'cid':'logo'}],'html':_0xd49412(0x124)+_0xd49412(0x1c2)+_0xd49412(0x1c3)+'<div>'+_0xd49412(0x1ec)+_0xd49412(0x1b9)+_0xd49412(0x1d5)+'</div>'+_0xd49412(0x1b9)+'<h2>\x20'+_0x23b2a5[0x0]['site_title']+_0xd49412(0x168)+_0xd49412(0x1ba)+_0xd49412(0x1ba)+_0xd49412(0x196)+_0xd49412(0x1b9)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0xd49412(0x128)+_0x5a4004['invoice']+'\x20'+_0xd49412(0x177)+_0xd49412(0x1d6)+_0x5a4004[_0xd49412(0x13d)]+'\x20'+_0xd49412(0x17d)+_0xd49412(0x18f)+'</div>'+_0xd49412(0x138)+_0xd49412(0x162)+_0xd49412(0x123)+_0xd49412(0x18d)+_0xd49412(0x1d2)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0xd49412(0x179)+_0xd49412(0x17a)+_0xd49412(0x163)+_0xd49412(0x17c)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0xd49412(0x12d)+_0xd49412(0x1f1)+_0xd49412(0x1e6)+'\x20'+_0x4454cc+'\x20'+_0xd49412(0x130)+_0xd49412(0x141)+_0xd49412(0x1b9)+_0xd49412(0x151)+_0xd49412(0x156)+_0x23b2a5[0x0][_0xd49412(0x149)]+_0xd49412(0x18f)+_0xd49412(0x1ba)+_0xd49412(0x1ba)+_0xd49412(0x1d9)};_0x3e90fe[_0xd49412(0x159)](_0x38a5c1,function(_0x569ef3,_0x314fa8){var _0x3c00ba=_0xd49412;_0x569ef3?(console[_0x3c00ba(0x181)](_0x569ef3),console[_0x3c00ba(0x181)]('Error\x20Occurs')):console['log'](_0x3c00ba(0x14d));}),_0x6362a1['flash'](_0xd49412(0x169),_0xd49412(0x164)),_0x38ddd0[_0xd49412(0x17b)](_0xd49412(0x1ac)+_0x1c4c99['_id']);}catch(_0x213eba){console[_0xd49412(0x181)](_0x213eba),_0x38ddd0[_0xd49412(0x1a1)](0xc8)['json']({'message':_0x213eba[_0xd49412(0x125)]});}}),router[a0_0xa2d603(0x13b)](a0_0xa2d603(0x19b),auth,async(_0x2d6637,_0x4f10b2)=>{var _0x3bef9b=a0_0xa2d603;try{const {username:_0x4b53a0,email:_0x31c05c,role:_0x519b3b}=_0x2d6637[_0x3bef9b(0x16b)],_0x56dc0f=_0x2d6637['user'],_0x343e87=await profile[_0x3bef9b(0x1b1)]({'email':_0x56dc0f[_0x3bef9b(0x1b3)]}),_0x27c6e0=await master_shop[_0x3bef9b(0x1af)](),_0x5f0167=_0x2d6637[_0x3bef9b(0x199)]['id'],_0x34d6a9=await adjustment[_0x3bef9b(0x140)]({'_id':_0x5f0167}),_0x57588e=await purchases[_0x3bef9b(0x115)]([{'$match':{'warehouse_name':_0x34d6a9[_0x3bef9b(0x150)]}},{'$unwind':_0x3bef9b(0x1d7)},{'$group':{'_id':'$product.product_name'}}]),_0x402c48=await product[_0x3bef9b(0x1af)]({}),_0x48afc0=await warehouse[_0x3bef9b(0x115)]([{'$match':{'name':_0x34d6a9[_0x3bef9b(0x150)]}},{'$unwind':_0x3bef9b(0x1c6)},{'$group':{'_id':_0x3bef9b(0x16a),'name':{'$first':_0x3bef9b(0x134)},'product_stock':{'$first':_0x3bef9b(0x1b6)},'bay':{'$first':_0x3bef9b(0x1ef)},'bin':{'$first':_0x3bef9b(0x119)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x3bef9b(0x1c8)},'primary_code':{'$first':_0x3bef9b(0x1c7)},'secondary_code':{'$first':_0x3bef9b(0x184)},'product_code':{'$first':_0x3bef9b(0x1bf)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3bef9b(0x118)},'maxPerUnit':{'$first':_0x3bef9b(0x152)},'expiry_date':{'$first':_0x3bef9b(0x1be)},'production_date':{'$first':_0x3bef9b(0x1da)},'batch_code':{'$first':_0x3bef9b(0x126)},'room':{'$first':_0x3bef9b(0x1ee)}}}]);let _0x5e012a;if(_0x56dc0f[_0x3bef9b(0x16e)]==_0x3bef9b(0x176)){const _0x12122d=await staff[_0x3bef9b(0x1b1)]({'email':_0x56dc0f['email']});_0x5e012a=await warehouse[_0x3bef9b(0x115)]([{'$match':{'status':_0x3bef9b(0x1ea),'name':_0x12122d[_0x3bef9b(0x11e)],'warehouse_category':_0x3bef9b(0x120),'name':{'$ne':_0x3bef9b(0x1c0)}}},{'$group':{'_id':_0x3bef9b(0x174),'name':{'$first':'$name'}}}]);}else _0x5e012a=await warehouse[_0x3bef9b(0x115)]([{'$match':{'status':_0x3bef9b(0x1ea),'warehouse_category':_0x3bef9b(0x120),'name':{'$ne':_0x3bef9b(0x1c0)}}},{'$group':{'_id':'$name','name':{'$first':_0x3bef9b(0x174)}}}]);if(_0x27c6e0[0x0][_0x3bef9b(0x198)]=='English\x20(US)'){var _0x60ea65=users[_0x3bef9b(0x1db)];console[_0x3bef9b(0x181)](_0x60ea65);}else{if(_0x27c6e0[0x0][_0x3bef9b(0x198)]==_0x3bef9b(0x121))var _0x60ea65=users[_0x3bef9b(0x121)];else{if(_0x27c6e0[0x0]['language']=='German')var _0x60ea65=users['German'];else{if(_0x27c6e0[0x0][_0x3bef9b(0x198)]==_0x3bef9b(0x137))var _0x60ea65=users['Spanish'];else{if(_0x27c6e0[0x0]['language']==_0x3bef9b(0x1b5))var _0x60ea65=users[_0x3bef9b(0x1b5)];else{if(_0x27c6e0[0x0]['language']==_0x3bef9b(0x146))var _0x60ea65=users[_0x3bef9b(0x1e3)];else{if(_0x27c6e0[0x0][_0x3bef9b(0x198)]==_0x3bef9b(0x1ab))var _0x60ea65=users['Chinese'];else{if(_0x27c6e0[0x0][_0x3bef9b(0x198)]=='Arabic\x20(ae)')var _0x60ea65=users[_0x3bef9b(0x114)];}}}}}}}_0x4f10b2[_0x3bef9b(0x19e)](_0x3bef9b(0x1e9),{'success':_0x2d6637[_0x3bef9b(0x1e0)](_0x3bef9b(0x169)),'errors':_0x2d6637['flash'](_0x3bef9b(0x1de)),'role':_0x56dc0f,'profile':_0x343e87,'adjustment':_0x34d6a9,'stock':_0x48afc0,'master_shop':_0x27c6e0,'warehouse_name':_0x57588e,'unit':_0x402c48,'language':_0x60ea65,'warehouse':_0x5e012a});}catch(_0x521291){console[_0x3bef9b(0x181)](_0x521291),_0x4f10b2[_0x3bef9b(0x1a1)](0xc8)[_0x3bef9b(0x1d4)]({'message':_0x521291[_0x3bef9b(0x125)]});}}),router[a0_0xa2d603(0x1c5)](a0_0xa2d603(0x19b),auth,async(_0x33df71,_0x309e9d)=>{var _0x39c06c=a0_0xa2d603;try{const _0xe65206=_0x33df71[_0x39c06c(0x199)]['id'],_0x5d8525=await adjustment[_0x39c06c(0x140)]({'_id':_0xe65206}),_0x5a313b=await warehouse['findOne']({'name':_0x5d8525[_0x39c06c(0x150)],'room':_0x5d8525['room']}),{warehouse_name:_0x21b260,date:_0x52105e,prod_name:_0x1a642c,level:_0x15f7e3,isle:_0x20251d,pallet:_0x458986,stock:_0x248887,types:_0x373ba6,adjust_qty:_0x5a95c2,new_adjust_qty:_0x4e1077,note:_0x234285,Room_name:_0x2f614e,invoice:_0xcadd47,JO_number:_0x988988,expiry_date:_0x3f67a2}=_0x33df71[_0x39c06c(0x1b7)];if(typeof _0x1a642c==_0x39c06c(0x178))var _0x1c09f5=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x15e)]],_0x1ccdd2=[_0x33df71[_0x39c06c(0x1b7)]['level']],_0x4061fb=[_0x33df71['body'][_0x39c06c(0x18b)]],_0xe6ffc1=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x129)]],_0x3c1937=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x117)]],_0x2c044b=[_0x33df71['body']['New_Qty_Converted']],_0x594e9b=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x14a)]],_0x578f71=[_0x33df71[_0x39c06c(0x1b7)]['Secondary_units']],_0x36d1ce=[_0x33df71[_0x39c06c(0x1b7)]['prod_code']],_0x85aa9e=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x1b8)]],_0x3b8ff6=[_0x33df71['body']['expiry_date']],_0x5862ff=[_0x33df71[_0x39c06c(0x1b7)]['max_per_unit']],_0x3dc0f3=[_0x33df71['body']['production_date']],_0x1e1949=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x132)]],_0x1315d1=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x15d)]],_0x4488fc=[_0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x18a)]],_0x38e557=[_0x33df71[_0x39c06c(0x1b7)]['second1']];else var _0x1c09f5=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x15e)]],_0x1ccdd2=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x1e5)]],_0x4061fb=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x18b)]],_0xe6ffc1=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x129)]],_0x3c1937=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x117)]],_0x2c044b=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x167)]],_0x594e9b=[..._0x33df71['body'][_0x39c06c(0x160)]],_0x578f71=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x15a)]],_0x36d1ce=[..._0x33df71['body'][_0x39c06c(0x189)]],_0x85aa9e=[..._0x33df71['body'][_0x39c06c(0x1b8)]],_0x3b8ff6=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x16f)]],_0x5862ff=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x11d)]],_0x3dc0f3=[..._0x33df71[_0x39c06c(0x1b7)]['production_date']],_0x1e1949=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x132)]],_0x1315d1=[..._0x33df71[_0x39c06c(0x1b7)]['Rooms']],_0x4488fc=[..._0x33df71[_0x39c06c(0x1b7)]['prime1']],_0x38e557=[..._0x33df71[_0x39c06c(0x1b7)][_0x39c06c(0x131)]];const _0x3b6de8=_0x1c09f5[_0x39c06c(0x13e)](_0x3b3670=>{return _0x3b3670={'product_name':_0x3b3670};});_0x1ccdd2[_0x39c06c(0x11b)]((_0x3bd905,_0x50aead)=>{var _0x126288=_0x39c06c;_0x1315d1[_0x126288(0x11b)]((_0x4dbf46,_0x12e172)=>{var _0x521a35=_0x126288;if(_0x4dbf46=='Receiving\x20Area'&&_0x50aead==_0x12e172){var _0x322dac=_0x3bd905[_0x521a35(0x1a4)](0x3);_0x3b6de8[_0x50aead][_0x521a35(0x170)]=_0x3bd905[0x0],_0x3b6de8[_0x50aead]['rack']=_0x3bd905[0x1],_0x3b6de8[_0x50aead][_0x521a35(0x1cb)]=0x0,_0x3b6de8[_0x50aead][_0x521a35(0x1c9)]=0x0,_0x3b6de8[_0x50aead][_0x521a35(0x182)]='Floor',_0x3b6de8[_0x50aead]['floorlevel']=_0x322dac;}else{if(_0x4dbf46==_0x521a35(0x1a7)&&_0x50aead==_0x12e172){var _0x322dac=_0x3bd905[_0x521a35(0x1a4)](0x3);_0x3b6de8[_0x50aead]['storage']=_0x3bd905[0x0],_0x3b6de8[_0x50aead][_0x521a35(0x180)]=_0x3bd905[0x1],_0x3b6de8[_0x50aead][_0x521a35(0x1cb)]=0x0,_0x3b6de8[_0x50aead][_0x521a35(0x1c9)]=0x0,_0x3b6de8[_0x50aead][_0x521a35(0x182)]=_0x521a35(0x1a8),_0x3b6de8[_0x50aead][_0x521a35(0x1bc)]=_0x3bd905[0x5];}else{if(_0x50aead==_0x12e172){var _0x39e74a;if(_0x3bd905[0x4]=='L')_0x39e74a=_0x521a35(0x1a5);else _0x3bd905[0x4]=='F'&&(_0x39e74a=_0x521a35(0x1a8));_0x3b6de8[_0x50aead][_0x521a35(0x170)]=_0x3bd905[0x0],_0x3b6de8[_0x50aead][_0x521a35(0x180)]=_0x3bd905[0x1],_0x3b6de8[_0x50aead]['bay']=_0x3bd905[0x2],_0x3b6de8[_0x50aead][_0x521a35(0x1c9)]=_0x3bd905[0x3],_0x3b6de8[_0x50aead][_0x521a35(0x182)]=_0x39e74a,_0x3b6de8[_0x50aead]['floorlevel']=_0x3bd905[0x5];}}}});}),_0x4061fb[_0x39c06c(0x11b)]((_0x3f434e,_0x56d3d7)=>{var _0x536c31=_0x39c06c;_0x3b6de8[_0x56d3d7][_0x536c31(0x113)]=_0x3f434e;}),_0xe6ffc1[_0x39c06c(0x11b)]((_0x425952,_0x3b31d3)=>{var _0x593ae6=_0x39c06c;_0x3b6de8[_0x3b31d3][_0x593ae6(0x129)]=_0x425952;}),_0x3c1937[_0x39c06c(0x11b)]((_0x4e40d5,_0x749713)=>{var _0x5cbee9=_0x39c06c;_0x3b6de8[_0x749713][_0x5cbee9(0x11c)]=_0x4e40d5;}),_0x2c044b['forEach']((_0x3d6d37,_0x2ce74a)=>{var _0x9085c2=_0x39c06c;_0x3b6de8[_0x2ce74a][_0x9085c2(0x135)]=_0x3d6d37;}),_0x594e9b['forEach']((_0x1767e0,_0xb745c9)=>{var _0x5c728d=_0x39c06c;_0x3b6de8[_0xb745c9][_0x5c728d(0x160)]=_0x1767e0;}),_0x578f71[_0x39c06c(0x11b)]((_0x175859,_0x37a30b)=>{var _0x323b73=_0x39c06c;_0x3b6de8[_0x37a30b][_0x323b73(0x127)]=_0x175859;}),_0x36d1ce[_0x39c06c(0x11b)]((_0x2ba14c,_0x4644c4)=>{var _0x17a6c2=_0x39c06c;_0x3b6de8[_0x4644c4][_0x17a6c2(0x1cc)]=_0x2ba14c;}),_0x85aa9e[_0x39c06c(0x11b)]((_0xc2a844,_0x147190)=>{var _0x309f1d=_0x39c06c;_0x3b6de8[_0x147190][_0x309f1d(0x1b8)]=_0xc2a844;}),_0x3b8ff6[_0x39c06c(0x11b)]((_0x5d9929,_0x346c36)=>{var _0x9fe745=_0x39c06c;_0x3b6de8[_0x346c36][_0x9fe745(0x16f)]=_0x5d9929;}),_0x5862ff[_0x39c06c(0x11b)]((_0x13b28f,_0x28419c)=>{var _0xd7232b=_0x39c06c;_0x3b6de8[_0x28419c][_0xd7232b(0x195)]=_0x13b28f;}),_0x3dc0f3['forEach']((_0x235d40,_0x183cf4)=>{var _0xdfa65=_0x39c06c;_0x3b6de8[_0x183cf4][_0xdfa65(0x1cf)]=_0x235d40;}),_0x1e1949['forEach']((_0x59cf9c,_0x435364)=>{var _0x3a9527=_0x39c06c;_0x3b6de8[_0x435364][_0x3a9527(0x132)]=_0x59cf9c;}),_0x1315d1['forEach']((_0x5d23b7,_0x3cc2ae)=>{var _0x2f9eb5=_0x39c06c;_0x3b6de8[_0x3cc2ae][_0x2f9eb5(0x1e7)]=_0x5d23b7;}),_0x4488fc['forEach']((_0x169e7f,_0x125696)=>{var _0x4fa6a5=_0x39c06c;_0x3b6de8[_0x125696][_0x4fa6a5(0x175)]=_0x169e7f;}),_0x38e557[_0x39c06c(0x11b)]((_0x223fa3,_0x16ed31)=>{var _0x3efe57=_0x39c06c;_0x3b6de8[_0x16ed31][_0x3efe57(0x13f)]=_0x223fa3;});const _0x475eff=_0x3b6de8[_0x39c06c(0x185)](_0x1df282=>_0x1df282['adjust_qty']!=='0'&&_0x1df282[_0x39c06c(0x11c)]!=='');var _0x34dcc2=0x0;_0x475eff[_0x39c06c(0x11b)](_0x85b0de=>{var _0x532881=_0x39c06c;console[_0x532881(0x181)](_0x532881(0x166),_0x85b0de),parseInt(_0x85b0de[_0x532881(0x11c)])<=0x0&&_0x34dcc2++;});if(_0x34dcc2!=0x0)return _0x33df71[_0x39c06c(0x1e0)]('errors',_0x39c06c(0x192)),_0x309e9d[_0x39c06c(0x17b)](_0x39c06c(0x158));_0x5d8525[_0x39c06c(0x150)]=_0x21b260,_0x5d8525[_0x39c06c(0x13d)]=_0x52105e,_0x5d8525[_0x39c06c(0x1df)]=_0x475eff,_0x5d8525[_0x39c06c(0x147)]=_0x234285,_0x5d8525['invoice']=_0xcadd47,_0x5d8525[_0x39c06c(0x14c)]=_0x39c06c(0x1a2);const _0x4bde6f=await _0x5d8525[_0x39c06c(0x1bb)]();_0x33df71[_0x39c06c(0x1e0)](_0x39c06c(0x169),_0x39c06c(0x142)),_0x309e9d[_0x39c06c(0x17b)](_0x39c06c(0x1ed));}catch(_0x50b863){console['log'](_0x50b863);}}),router[a0_0xa2d603(0x1c5)](a0_0xa2d603(0x122),async(_0x3bbbc5,_0x404f64)=>{var _0xe441d=a0_0xa2d603;const {primary_code:_0x3e0383,warehouse_data:_0x1304a6,rooms_data:_0x2b9322,Roomslist:_0x1c82a9}=_0x3bbbc5[_0xe441d(0x1b7)],_0x350407=_0x1c82a9[_0xe441d(0x1cd)](','),_0x614577=[];async function _0x20efc4(_0x562b2a){var _0x4f9fbe=_0xe441d;const _0x371c82=await warehouse[_0x4f9fbe(0x115)]([{'$match':{'name':_0x1304a6,'room':_0x562b2a}},{'$unwind':_0x4f9fbe(0x1c6)},{'$match':{'product_details.primary_code':_0x3e0383}},{'$group':{'_id':_0x4f9fbe(0x16a),'name':{'$first':_0x4f9fbe(0x134)},'product_stock':{'$first':_0x4f9fbe(0x1b6)},'primary_code':{'$first':_0x4f9fbe(0x1c7)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x4f9fbe(0x119)},'type':{'$first':_0x4f9fbe(0x1bd)},'pallet':{'$first':_0x4f9fbe(0x1c8)},'unit':{'$first':_0x4f9fbe(0x13c)},'secondary_unit':{'$first':_0x4f9fbe(0x1b4)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x4f9fbe(0x118)},'expiry_date':{'$first':_0x4f9fbe(0x1be)},'production_date':{'$first':_0x4f9fbe(0x1da)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x4f9fbe(0x126)},'product_cat':{'$first':_0x4f9fbe(0x183)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x4f9fbe(0x161)}}}]),_0x441c66=await warehouse[_0x4f9fbe(0x115)]([{'$match':{'name':_0x1304a6,'room':_0x562b2a}},{'$unwind':_0x4f9fbe(0x1c6)},{'$match':{'product_details.secondary_code':_0x3e0383}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x4f9fbe(0x1b6)},'primary_code':{'$first':_0x4f9fbe(0x1c7)},'secondary_code':{'$first':_0x4f9fbe(0x184)},'product_code':{'$first':_0x4f9fbe(0x1bf)},'level':{'$first':_0x4f9fbe(0x1ef)},'isle':{'$first':_0x4f9fbe(0x119)},'type':{'$first':_0x4f9fbe(0x1bd)},'pallet':{'$first':_0x4f9fbe(0x1c8)},'unit':{'$first':_0x4f9fbe(0x13c)},'secondary_unit':{'$first':_0x4f9fbe(0x1b4)},'storage':{'$first':_0x4f9fbe(0x15c)},'rack':{'$first':_0x4f9fbe(0x118)},'expiry_date':{'$first':_0x4f9fbe(0x1be)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x4f9fbe(0x126)},'product_cat':{'$first':_0x4f9fbe(0x183)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x371c82['length']>0x0)_0x614577['push'](_0x371c82);else _0x441c66['length']>0x0&&_0x614577[_0x4f9fbe(0x19f)](_0x441c66);}const _0x37cae8=_0x350407['map'](_0x185ce8=>_0x20efc4(_0x185ce8));await Promise[_0xe441d(0x1a9)](_0x37cae8),_0x404f64[_0xe441d(0x1d4)](_0x614577);}),router['post'](a0_0xa2d603(0x12e),async(_0x374f3a,_0x50828c)=>{var _0x2f88a5=a0_0xa2d603;const {primaryCode:_0x2010a4,secondaryCode:_0x119f33,productCode:_0x3d364e,level:_0x348a6d,isle:_0x2185fd,pallet:_0x156df5,warehouses:_0x2ddedb,room:_0x10f1cc}=_0x374f3a[_0x2f88a5(0x1b7)];try{const _0x2b3fc6=await warehouse[_0x2f88a5(0x115)]([{'$match':{'name':_0x2ddedb,'room':_0x10f1cc}},{'$unwind':_0x2f88a5(0x1c6)},{'$match':{'product_details.level':parseInt(_0x348a6d),'product_details.isle':_0x2185fd,'product_details.pallet':parseInt(_0x156df5)}},{'$group':{'_id':_0x2f88a5(0x16a),'name':{'$first':_0x2f88a5(0x134)},'product_stock':{'$first':_0x2f88a5(0x1b6)},'level':{'$first':_0x2f88a5(0x139)},'isle':{'$first':_0x2f88a5(0x1c1)},'pallet':{'$first':_0x2f88a5(0x14f)},'maxProducts':{'$first':_0x2f88a5(0x187)}}}]);_0x50828c[_0x2f88a5(0x1a1)](0xc8)[_0x2f88a5(0x1d4)](_0x2b3fc6);}catch(_0x3bff24){_0x50828c[_0x2f88a5(0x1a1)](0x194)['json']({'message':_0x3bff24[_0x2f88a5(0x125)]});}}),module[a0_0xa2d603(0x1dc)]=router;function a0_0x6582(){var _0x32c56c=['<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','adjustment\x20Finalized\x20successfully','master','foreach\x20newproduct','New_Qty_Converted','\x20</h2>','success','$product_details._id','user','\x20<>\x20','2cTWxYe','role','expiry_date','storage','catch','password','/../public','$name','primary_code','staff','<span\x20style=\x22float:\x20right;\x22>','string','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','redirect','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','</span>','../models/all_models','Arabic\x20(ae)','rack','log','type','$product_details.product_cat','$product_details.secondary_code','filter','length','$product_details.maxProducts','750DLCOJG','prod_code','prime1','stock','Types','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','132633unSEBr','</h5>','floor','1059687SutSTE','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','express','True','maxperunit','<hr\x20class=\x22my-3\x22>','English\x20(US)','language','params','product_stock','/view/:id','$isAllowEdit','$product.product_name','render','push','id_transaction','status','False','then','slice','Level','Return\x20Rooms','Shelves','Floor','all','RMSEmail','Chinese','/picking_list/PDF_adjustment_rm/','finalize','add_adjustment','find','/view/add_adjustment','findOne','image','email','$product_details.secondary_unit','French','$product_details.product_stock','body','batch_code','<div>','</div>','save','floorlevel','$product_details.type','$product_details.expiry_date','$product_details.product_code','Return\x20Goods','$product_details.isle','<html><head><title></title>','</head><body>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','post','$product_details','$product_details.primary_code','$product_details.floorlevel','bin','adjustment\x20add\x20successfull','bay','product_code','split','Ambient','production_date','edit_adjustment_view','Logo.png','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','German','json','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','\x20Order\x20Date\x20:\x20','$product','Adjustment\x20Mail','</body></html>','$product_details.production_date','English','exports','nodemailer','errors','product','flash','mongoose','id_transaction_from','Portuguese','49961GxdtXN','level','<tbody\x20style=\x22text-align:\x20center;\x22>','room_names','prod_invoice','edit_adjustment','Enabled','invoice','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/adjustment/view','$room','$product_details.bay','Router','</thead>','stockBefore','Arabic','aggregate','minus','New_Qty_Converted_adj','$product_details.rack','$product_details.bin','5692056dsZIUJ','forEach','adjust_qty','max_per_unit','warehouse','product_details','Raw\x20Materials','Hindi','/barcode_scanner','<tr>','<!DOCTYPE\x20html>','message','$product_details.batch_code','secondary_unit','\x20Order\x20Number\x20:\x20','types','4193014eEyRJS','Receiving\x20Area','host','</tr>','/CheckingWarehouse','ADJ-','</tbody>','second1','prod_cat','updateOne','$product_details.product_name','new_adjust_qty','_id','Spanish','<table\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.level','</td>','get','$product_details.unit','date','map','secondary_code','findById','</table>','adjustment\x20data\x20update\x20successfully','186312lPWoHn','padStart','adjustment','Portuguese\x20(BR)','note','$invoice','site_title','Primary_Units','createTransport','isAllowEdit','Email\x20sent\x20successfully','423935DWzLQD','$product_details.pallet','warehouse_name','<strong>\x20Regards\x20</strong>','$product_details.maxPerUnit','../middleware/auth','20wQVHZa','/preview/:id','<h5>','toString','back','sendMail','Secondary_units','Enclosed','$product_details.storage','Rooms','prod_name','/upload/','unit','$product_details.invoice'];a0_0x6582=function(){return _0x32c56c;};return a0_0x6582();}