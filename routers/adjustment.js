function a0_0x2648(){var _0x3d1897=['invoice','1004KMbhhL','secondary_code','455085LGgMOG','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','adjustment','$_id','error','warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','\x20Order\x20Date\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$date','There\x27s\x20a\x20error\x20in\x20this\x20transaction','<hr\x20class=\x22my-3\x22>','\x20<>\x20','$product_details.storage','post','flash','status','site_title','$product_details.bin','stockBefore','New_Qty_Converted','Floor','$product_details.rack','</table>','8551592GOfoGB','role','slice','port','$product_details.batch_code','nodemailer','$product_details.secondary_unit','room_names','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Router','split','max_per_unit','finalize','redirect','save','maxPerUnit','_id','<tbody\x20style=\x22text-align:\x20center;\x22>','</td>','$product_details.maxProducts','staff','Enabled','findById','minus','$product_details.unit','</h5>','362xVsKKI','15LLKMdB','bin','$product_details.product_stock','$product_details.primary_code','primary_code','/adjustment/preview/','id_transaction_from','date','/view','log','10323624aYgiHO','<h2>\x20','edit_adjustment','Logo.png','storage','$product_details.product_cat','$product_details.secondary_code','Adjustment\x20Mail','Portuguese\x20(BR)','id_transaction','forEach','<tr>','Hindi','True','Portuguese','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','Error\x20Occurs','body','Ambient','params','French','/barcode_scanner','product_code','<h5>','<strong>\x20Regards\x20</strong>','$product_details.production_date','Shelves','$name','foreach\x20newproduct','second1','adjustment\x20Finalized\x20successfully','Email\x20sent\x20successfully','$warehouse_name','Spanish','Return\x20Goods','language','German','logo','adjustment\x20add\x20successfull','length','</div>','</tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Raw\x20Materials','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','$product_details.maxPerUnit','/upload/','findOne','../middleware/auth','3180978oqXbdn','\x20Order\x20Number\x20:\x20','$product_details.invoice','then','errors','Level','express','note','<h5\x20style=\x22text-align:\x20left;\x22>','$product_details.expiry_date','Receiving\x20Area','json','6140poblmL','master','</thead>','rack','$room','prod_code','/adjustment/view','Arabic','English\x20(US)','Primary_Units','340SoQLbL','$product_details.type','new_adjust_qty','stock','</tbody>','aggregate','product_name','<div>','/view/add_adjustment','get','English','expiry_date','room','warehouse_name','ADJ-','types','Rooms','product','1059LfXLmG','sendMail','$product_details','../public/language/languages.json','Secondary_units','\x20</h2>','/../public','prime1','toString','<table\x20style=\x22width:\x20100%\x20!important;\x22>','batch_code','email','Enclosed','prod_name','/picking_list/PDF_adjustment_rm/','type','back','product_details','secondary_unit','Arabic\x20(ae)','bay','render','unit','$product','$product.product_name','all','map','product_stock','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<span\x20style=\x22float:\x20right;\x22>','add_adjustment','$invoice','host','edit_adjustment_view','$product_details.product_code','$product_details._id','password','find','catch','adjustment\x20data\x20update\x20successfully','$product_details.product_name','Return\x20Rooms','user','$isAllowEdit','level','exports','maxperunit','40660565oaMzJQ','isAllowEdit','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.floorlevel','$product_details.level','string','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','adjust_qty','filter','push','success','New_Qty_Converted_adj','message','<html><head><title></title>','Chinese','prod_invoice','production_date','$product_details.bay','$product_details.pallet','</body></html>','floorlevel','/preview/:id','prod_cat'];a0_0x2648=function(){return _0x3d1897;};return a0_0x2648();}var a0_0x212c8b=a0_0x4f76;(function(_0x567bea,_0x2ae5b5){var _0xd1d679=a0_0x4f76,_0x70c3b2=_0x567bea();while(!![]){try{var _0x303c75=parseInt(_0xd1d679(0x150))/0x1*(-parseInt(_0xd1d679(0x1e7))/0x2)+-parseInt(_0xd1d679(0x16c))/0x3*(parseInt(_0xd1d679(0x1b3))/0x4)+-parseInt(_0xd1d679(0x1e8))/0x5*(-parseInt(_0xd1d679(0x223))/0x6)+parseInt(_0xd1d679(0x1cd))/0x7+parseInt(_0xd1d679(0x1f2))/0x8+-parseInt(_0xd1d679(0x1b5))/0x9*(-parseInt(_0xd1d679(0x15a))/0xa)+-parseInt(_0xd1d679(0x19b))/0xb;if(_0x303c75===_0x2ae5b5)break;else _0x70c3b2['push'](_0x70c3b2['shift']());}catch(_0x32b1b0){_0x70c3b2['push'](_0x70c3b2['shift']());}}}(a0_0x2648,0xe1f0a));const express=require(a0_0x212c8b(0x229)),app=express(),router=express[a0_0x212c8b(0x1d6)](),auth=require(a0_0x212c8b(0x222)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require('../models/all_models'),users=require(a0_0x212c8b(0x16f)),nodemailer=require(a0_0x212c8b(0x1d2));router[a0_0x212c8b(0x163)](a0_0x212c8b(0x1f0),auth,async(_0x1be59e,_0x249a20)=>{var _0x3a9c32=a0_0x212c8b;try{const {username:_0x276aeb,email:_0x1febcc,role:_0x1b6389}=_0x1be59e[_0x3a9c32(0x196)],_0x55a9d3=_0x1be59e['user'],_0x2390ac=await profile[_0x3a9c32(0x221)]({'email':_0x55a9d3[_0x3a9c32(0x177)]}),_0x5dc4bb=await master_shop[_0x3a9c32(0x191)]();console['log'](_0x3a9c32(0x151),_0x5dc4bb);let _0x4063ae;if(_0x55a9d3[_0x3a9c32(0x1ce)]==_0x3a9c32(0x1e1)){const _0x7be750=await staff[_0x3a9c32(0x221)]({'email':_0x55a9d3['email']});_0x4063ae=await warehouse[_0x3a9c32(0x191)]({'status':_0x3a9c32(0x1e2),'name':_0x7be750[_0x3a9c32(0x1ba)]});}else _0x4063ae=await warehouse['find']({'status':_0x3a9c32(0x1e2)});const _0x4e9ab7=await product['find']();let _0x550553;if(_0x55a9d3['role']==_0x3a9c32(0x1e1)){const _0x28efe4=await staff[_0x3a9c32(0x221)]({'email':_0x55a9d3[_0x3a9c32(0x177)]});_0x550553=await adjustment[_0x3a9c32(0x191)]({'warehouse_name':_0x28efe4['warehouse']});}else _0x550553=await adjustment[_0x3a9c32(0x15f)]([{'$unwind':_0x3a9c32(0x183)},{'$group':{'_id':_0x3a9c32(0x1b8),'invoice':{'$first':_0x3a9c32(0x18b)},'date':{'$first':_0x3a9c32(0x1be)},'warehouse_name':{'$first':_0x3a9c32(0x212)},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x3a9c32(0x197)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]==_0x3a9c32(0x158)){var _0x19c4b0=users[_0x3a9c32(0x164)];console[_0x3a9c32(0x1f1)](_0x19c4b0);}else{if(_0x5dc4bb[0x0]['language']=='Hindi')var _0x19c4b0=users[_0x3a9c32(0x1fe)];else{if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]==_0x3a9c32(0x216))var _0x19c4b0=users[_0x3a9c32(0x216)];else{if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]==_0x3a9c32(0x213))var _0x19c4b0=users[_0x3a9c32(0x213)];else{if(_0x5dc4bb[0x0]['language']==_0x3a9c32(0x206))var _0x19c4b0=users[_0x3a9c32(0x206)];else{if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]==_0x3a9c32(0x1fa))var _0x19c4b0=users[_0x3a9c32(0x200)];else{if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]=='Chinese')var _0x19c4b0=users[_0x3a9c32(0x1a9)];else{if(_0x5dc4bb[0x0][_0x3a9c32(0x215)]=='Arabic\x20(ae)')var _0x19c4b0=users[_0x3a9c32(0x157)];}}}}}}}_0x249a20[_0x3a9c32(0x181)](_0x3a9c32(0x1b7),{'success':_0x1be59e[_0x3a9c32(0x1c4)](_0x3a9c32(0x1a5)),'errors':_0x1be59e[_0x3a9c32(0x1c4)]('errors'),'role':_0x55a9d3,'profile':_0x2390ac,'warehouse':_0x4063ae,'product':_0x4e9ab7,'adjustment':_0x550553,'master_shop':_0x5dc4bb,'language':_0x19c4b0});}catch(_0x1e64c2){console[_0x3a9c32(0x1f1)](_0x1e64c2);}});async function getRandom8DigitNumber(){var _0x2f7424=a0_0x212c8b;const _0x47c445=0x989680,_0x41600f=0x5f5e0ff,_0x7b618c=Math['floor'](Math['random']()*(_0x41600f-_0x47c445+0x1))+_0x47c445;var _0x288ce9;const _0x19b6ad=await adjustment['findOne']({'invoice':_0x2f7424(0x168)+_0x7b618c});return _0x19b6ad&&_0x19b6ad[_0x2f7424(0x219)]>0x0?_0x288ce9='ADJ-'+_0x7b618c:_0x288ce9=_0x2f7424(0x168)+_0x7b618c,_0x288ce9;}function a0_0x4f76(_0x5a83da,_0x4a5544){var _0x2648ce=a0_0x2648();return a0_0x4f76=function(_0x4f765f,_0x3fbae1){_0x4f765f=_0x4f765f-0x14e;var _0x32c81=_0x2648ce[_0x4f765f];return _0x32c81;},a0_0x4f76(_0x5a83da,_0x4a5544);}router[a0_0x212c8b(0x163)]('/view/add_adjustment',auth,async(_0x381c7c,_0x5d8870)=>{var _0x14846b=a0_0x212c8b;try{const {username:_0x41c56b,email:_0x4221d9,role:_0x427fc2}=_0x381c7c['user'],_0x5c0360=_0x381c7c[_0x14846b(0x196)],_0x751036=await profile[_0x14846b(0x221)]({'email':_0x5c0360['email']}),_0x30988d=await master_shop['find']();let _0x197708;if(_0x5c0360[_0x14846b(0x1ce)]==_0x14846b(0x1e1)){const _0x11e667=await staff[_0x14846b(0x221)]({'email':_0x5c0360['email']});_0x197708=await warehouse[_0x14846b(0x15f)]([{'$match':{'status':_0x14846b(0x1e2),'name':_0x11e667[_0x14846b(0x1ba)],'warehouse_category':_0x14846b(0x21d),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x14846b(0x20d),'name':{'$first':_0x14846b(0x20d)}}}]);}else _0x197708=await warehouse[_0x14846b(0x15f)]([{'$match':{'status':_0x14846b(0x1e2),'warehouse_category':_0x14846b(0x21d),'name':{'$ne':_0x14846b(0x214)}}},{'$group':{'_id':_0x14846b(0x20d),'name':{'$first':_0x14846b(0x20d)}}}]);const _0x35646c=await product[_0x14846b(0x191)]({}),_0x3a74ac=await adjustment['find']({}),_0x8b15ef=_0x3a74ac['length']+0x1,_0x1a9bc0=_0x14846b(0x168)+_0x8b15ef[_0x14846b(0x174)]()['padStart'](0x5,'0');var _0x262c70=[_0x14846b(0x204),_0x14846b(0x178),_0x14846b(0x195)];if(_0x30988d[0x0]['language']==_0x14846b(0x158))var _0xbcb79d=users[_0x14846b(0x164)];else{if(_0x30988d[0x0][_0x14846b(0x215)]==_0x14846b(0x1fe))var _0xbcb79d=users[_0x14846b(0x1fe)];else{if(_0x30988d[0x0][_0x14846b(0x215)]==_0x14846b(0x216))var _0xbcb79d=users[_0x14846b(0x216)];else{if(_0x30988d[0x0][_0x14846b(0x215)]=='Spanish')var _0xbcb79d=users[_0x14846b(0x213)];else{if(_0x30988d[0x0][_0x14846b(0x215)]==_0x14846b(0x206))var _0xbcb79d=users[_0x14846b(0x206)];else{if(_0x30988d[0x0][_0x14846b(0x215)]==_0x14846b(0x1fa))var _0xbcb79d=users[_0x14846b(0x200)];else{if(_0x30988d[0x0]['language']=='Chinese')var _0xbcb79d=users['Chinese'];else{if(_0x30988d[0x0]['language']==_0x14846b(0x17f))var _0xbcb79d=users[_0x14846b(0x157)];}}}}}}}const _0x1ec2a7=getRandom8DigitNumber();_0x1ec2a7[_0x14846b(0x226)](_0xf71eb5=>{var _0x5e394d=_0x14846b;_0x5d8870[_0x5e394d(0x181)](_0x5e394d(0x18a),{'success':_0x381c7c['flash'](_0x5e394d(0x1a5)),'errors':_0x381c7c[_0x5e394d(0x1c4)]('errors'),'role':_0x5c0360,'profile':_0x751036,'warehouse':_0x197708,'product':_0x35646c,'master_shop':_0x30988d,'language':_0xbcb79d,'rooms_data':_0x262c70,'invoice_no':_0xf71eb5});})[_0x14846b(0x192)](_0x89b5b3=>{var _0x3eb3d6=_0x14846b;_0x381c7c[_0x3eb3d6(0x1c4)](_0x3eb3d6(0x227),_0x3eb3d6(0x1bf)),_0x5d8870[_0x3eb3d6(0x1da)](_0x3eb3d6(0x156));});}catch(_0x7fd7f6){console[_0x14846b(0x1f1)](_0x7fd7f6);}}),router[a0_0x212c8b(0x1c3)](a0_0x212c8b(0x162),auth,async(_0x3af334,_0x39e117)=>{var _0x341510=a0_0x212c8b;try{const {warehouse_name:_0x532286,date:_0x4931e6,prod_name:_0x1811dc,level:_0x3163c9,isle:_0x53f601,pallet:_0x25acf8,stock:_0x3d78a9,types:_0xba2710,adjust_qty:_0x268843,new_adjust_qty:_0x1ffa17,note:_0x15b1f3,Room_name:_0x4c7f9f,invoice:_0x16b70b,JO_number:_0x10136c,expiry_date:_0x1c7e53}=_0x3af334[_0x341510(0x203)];if(typeof _0x1811dc==_0x341510(0x1a0))var _0x5441b3=[_0x3af334[_0x341510(0x203)][_0x341510(0x179)]],_0x1812dc=[_0x3af334[_0x341510(0x203)][_0x341510(0x198)]],_0x38d4fb=[_0x3af334[_0x341510(0x203)][_0x341510(0x15d)]],_0x53edb3=[_0x3af334[_0x341510(0x203)]['types']],_0x9afb02=[_0x3af334['body'][_0x341510(0x1a6)]],_0x599d3e=[_0x3af334[_0x341510(0x203)]['New_Qty_Converted']],_0x3259c0=[_0x3af334[_0x341510(0x203)][_0x341510(0x159)]],_0x27429e=[_0x3af334[_0x341510(0x203)][_0x341510(0x170)]],_0x1a9a6a=[_0x3af334[_0x341510(0x203)]['prod_code']],_0x39ec71=[_0x3af334[_0x341510(0x203)][_0x341510(0x176)]],_0x9f4210=[_0x3af334[_0x341510(0x203)]['expiry_date']],_0x22c424=[_0x3af334[_0x341510(0x203)][_0x341510(0x1d8)]],_0x38700a=[_0x3af334[_0x341510(0x203)]['production_date']],_0xd466a9=[_0x3af334[_0x341510(0x203)][_0x341510(0x1b1)]],_0x26a14d=[_0x3af334[_0x341510(0x203)]['Rooms']],_0x1796d9=[_0x3af334[_0x341510(0x203)][_0x341510(0x173)]],_0x1ac068=[_0x3af334['body']['second1']],_0x46d4e1=[_0x3af334[_0x341510(0x203)][_0x341510(0x1aa)]],_0x485859=[_0x3af334[_0x341510(0x203)][_0x341510(0x1fb)]];else var _0x5441b3=[..._0x3af334['body'][_0x341510(0x179)]],_0x1812dc=[..._0x3af334[_0x341510(0x203)][_0x341510(0x198)]],_0x38d4fb=[..._0x3af334['body'][_0x341510(0x15d)]],_0x53edb3=[..._0x3af334[_0x341510(0x203)][_0x341510(0x169)]],_0x9afb02=[..._0x3af334['body']['New_Qty_Converted_adj']],_0x599d3e=[..._0x3af334['body'][_0x341510(0x1c9)]],_0x3259c0=[..._0x3af334[_0x341510(0x203)][_0x341510(0x182)]],_0x27429e=[..._0x3af334[_0x341510(0x203)][_0x341510(0x170)]],_0x1a9a6a=[..._0x3af334[_0x341510(0x203)]['prod_code']],_0x39ec71=[..._0x3af334[_0x341510(0x203)]['batch_code']],_0x9f4210=[..._0x3af334['body'][_0x341510(0x165)]],_0x22c424=[..._0x3af334[_0x341510(0x203)][_0x341510(0x1d8)]],_0x38700a=[..._0x3af334[_0x341510(0x203)][_0x341510(0x1ab)]],_0xd466a9=[..._0x3af334['body'][_0x341510(0x1b1)]],_0x26a14d=[..._0x3af334['body'][_0x341510(0x16a)]],_0x1796d9=[..._0x3af334[_0x341510(0x203)][_0x341510(0x173)]],_0x1ac068=[..._0x3af334[_0x341510(0x203)]['second1']],_0x46d4e1=[..._0x3af334[_0x341510(0x203)][_0x341510(0x1aa)]],_0x485859=[..._0x3af334[_0x341510(0x203)][_0x341510(0x1fb)]];const _0x5df0e5=_0x5441b3[_0x341510(0x186)](_0x306aa4=>{return _0x306aa4={'product_name':_0x306aa4};});_0x1812dc[_0x341510(0x1fc)]((_0x5f2327,_0x141df6)=>{var _0x189049=_0x341510;_0x26a14d[_0x189049(0x1fc)]((_0x443bf0,_0x15c43b)=>{var _0x1446fa=_0x189049;if(_0x443bf0==_0x1446fa(0x14e)&&_0x141df6==_0x15c43b){var _0x5973a2=_0x5f2327[_0x1446fa(0x1cf)](0x3);_0x5df0e5[_0x141df6][_0x1446fa(0x1f6)]=_0x5f2327[0x0],_0x5df0e5[_0x141df6][_0x1446fa(0x153)]=_0x5f2327[0x1],_0x5df0e5[_0x141df6][_0x1446fa(0x180)]=0x0,_0x5df0e5[_0x141df6][_0x1446fa(0x1e9)]=0x0,_0x5df0e5[_0x141df6][_0x1446fa(0x17b)]='Floor',_0x5df0e5[_0x141df6][_0x1446fa(0x1af)]=_0x5973a2;}else{if(_0x443bf0==_0x1446fa(0x20c)&&_0x141df6==_0x15c43b){var _0x5973a2=_0x5f2327['slice'](0x3);_0x5df0e5[_0x141df6][_0x1446fa(0x1f6)]=_0x5f2327[0x0],_0x5df0e5[_0x141df6]['rack']=_0x5f2327[0x1],_0x5df0e5[_0x141df6]['bay']=0x0,_0x5df0e5[_0x141df6][_0x1446fa(0x1e9)]=0x0,_0x5df0e5[_0x141df6][_0x1446fa(0x17b)]=_0x1446fa(0x1ca),_0x5df0e5[_0x141df6][_0x1446fa(0x1af)]=_0x5f2327[0x5];}else{if(_0x141df6==_0x15c43b){var _0x39a9e7;if(_0x5f2327[0x4]=='L')_0x39a9e7='Level';else _0x5f2327[0x4]=='F'&&(_0x39a9e7=_0x1446fa(0x1ca));_0x5df0e5[_0x141df6][_0x1446fa(0x1f6)]=_0x5f2327[0x0],_0x5df0e5[_0x141df6][_0x1446fa(0x153)]=_0x5f2327[0x1],_0x5df0e5[_0x141df6]['bay']=_0x5f2327[0x2],_0x5df0e5[_0x141df6][_0x1446fa(0x1e9)]=_0x5f2327[0x3],_0x5df0e5[_0x141df6][_0x1446fa(0x17b)]=_0x39a9e7,_0x5df0e5[_0x141df6][_0x1446fa(0x1af)]=_0x5f2327[0x5];}}}});}),_0x38d4fb[_0x341510(0x1fc)]((_0x1315a0,_0x5219f6)=>{var _0x764766=_0x341510;_0x5df0e5[_0x5219f6][_0x764766(0x1c8)]=_0x1315a0;}),_0x485859[_0x341510(0x1fc)]((_0x2e822f,_0x43b216)=>{var _0x2559ad=_0x341510;_0x5df0e5[_0x43b216][_0x2559ad(0x1ee)]=_0x2e822f;}),_0x53edb3['forEach']((_0x4ef44b,_0xfd9343)=>{var _0x45d706=_0x341510;_0x5df0e5[_0xfd9343][_0x45d706(0x169)]=_0x4ef44b;}),_0x9afb02[_0x341510(0x1fc)]((_0x318ac3,_0x55eb3a)=>{var _0x2eefaf=_0x341510;_0x5df0e5[_0x55eb3a][_0x2eefaf(0x1a2)]=_0x318ac3;}),_0x599d3e[_0x341510(0x1fc)]((_0x2e230e,_0x4b7cfb)=>{_0x5df0e5[_0x4b7cfb]['new_adjust_qty']=_0x2e230e;}),_0x3259c0[_0x341510(0x1fc)]((_0x3701c9,_0x37762d)=>{var _0x52a403=_0x341510;_0x5df0e5[_0x37762d][_0x52a403(0x182)]=_0x3701c9;}),_0x27429e[_0x341510(0x1fc)]((_0x41d1a7,_0x5a7615)=>{var _0x859e5e=_0x341510;_0x5df0e5[_0x5a7615][_0x859e5e(0x17e)]=_0x41d1a7;}),_0x1a9a6a[_0x341510(0x1fc)]((_0x5c1a18,_0x5c309c)=>{var _0x34a2bf=_0x341510;_0x5df0e5[_0x5c309c][_0x34a2bf(0x208)]=_0x5c1a18;}),_0x39ec71[_0x341510(0x1fc)]((_0x42c2c7,_0x136865)=>{var _0x254856=_0x341510;_0x5df0e5[_0x136865][_0x254856(0x176)]=_0x42c2c7;}),_0x9f4210[_0x341510(0x1fc)]((_0x319f74,_0x235fd7)=>{var _0x5076cb=_0x341510;_0x5df0e5[_0x235fd7][_0x5076cb(0x165)]=_0x319f74;}),_0x22c424[_0x341510(0x1fc)]((_0x673801,_0xedcec)=>{var _0x18c37a=_0x341510;_0x5df0e5[_0xedcec][_0x18c37a(0x19a)]=_0x673801;}),_0x38700a['forEach']((_0x3b92e7,_0x534608)=>{var _0x2f398f=_0x341510;_0x5df0e5[_0x534608][_0x2f398f(0x1ab)]=_0x3b92e7;}),_0xd466a9[_0x341510(0x1fc)]((_0x52a8a2,_0x3c2211)=>{var _0xda0808=_0x341510;_0x5df0e5[_0x3c2211][_0xda0808(0x1b1)]=_0x52a8a2;}),_0x26a14d['forEach']((_0x4c1339,_0x2b443c)=>{var _0x37bdea=_0x341510;_0x5df0e5[_0x2b443c][_0x37bdea(0x1d4)]=_0x4c1339;}),_0x1796d9[_0x341510(0x1fc)]((_0x2cfcbd,_0x30aa39)=>{var _0x60fed4=_0x341510;_0x5df0e5[_0x30aa39][_0x60fed4(0x1ec)]=_0x2cfcbd;}),_0x1ac068[_0x341510(0x1fc)]((_0x2a3ba3,_0x754c1)=>{var _0xeb853=_0x341510;_0x5df0e5[_0x754c1][_0xeb853(0x1b4)]=_0x2a3ba3;}),_0x46d4e1[_0x341510(0x1fc)]((_0x54af11,_0x881baf)=>{var _0x302897=_0x341510;_0x5df0e5[_0x881baf][_0x302897(0x1b2)]=_0x54af11;});const _0xb2b3d=_0x5df0e5[_0x341510(0x1a3)](_0x51ff4d=>_0x51ff4d[_0x341510(0x1a2)]!=='0'&&_0x51ff4d[_0x341510(0x1a2)]!=='');var _0x56c086=0x0;_0xb2b3d[_0x341510(0x1fc)](_0x460a2b=>{var _0x53e7c7=_0x341510;console[_0x53e7c7(0x1f1)](_0x53e7c7(0x20e),_0x460a2b),parseInt(_0x460a2b[_0x53e7c7(0x1a2)])<=0x0&&_0x56c086++;});if(_0x56c086!=0x0)return _0x3af334[_0x341510(0x1c4)](_0x341510(0x227),_0x341510(0x21e)),_0x39e117[_0x341510(0x1da)](_0x341510(0x17c));const _0x2bde32=new adjustment({'warehouse_name':_0x532286,'date':_0x4931e6,'product':_0xb2b3d,'note':_0x15b1f3,'room':_0x4c7f9f,'invoice':_0x16b70b,'JO_number':_0x10136c,'expiry_date':_0x1c7e53}),_0x5ccb0f=await _0x2bde32[_0x341510(0x1db)]();_0x3af334['flash'](_0x341510(0x1a5),_0x341510(0x218)),_0x39e117['redirect'](_0x341510(0x1ed)+_0x5ccb0f[_0x341510(0x1dd)]);}catch(_0x1e318e){console[_0x341510(0x1f1)](_0x1e318e),_0x39e117['status'](0xc8)['json']({'message':_0x1e318e['message']});}}),router['get']('/preview/:id',auth,async(_0x56d1c6,_0x1db3fc)=>{var _0x475ec4=a0_0x212c8b;try{const {username:_0x4809bc,email:_0x4de1df,role:_0x5d78f8}=_0x56d1c6['user'],_0x1fa1b8=_0x56d1c6[_0x475ec4(0x196)],_0x38b406=await profile[_0x475ec4(0x221)]({'email':_0x1fa1b8[_0x475ec4(0x177)]}),_0x26460a=await master_shop[_0x475ec4(0x191)](),_0x400659=_0x56d1c6[_0x475ec4(0x205)]['id'],_0x48e5ce=await adjustment['findById']({'_id':_0x400659}),_0x211620=await purchases[_0x475ec4(0x15f)]([{'$match':{'warehouse_name':_0x48e5ce[_0x475ec4(0x167)]}},{'$unwind':_0x475ec4(0x183)},{'$group':{'_id':_0x475ec4(0x184)}}]),_0x2213d5=await product[_0x475ec4(0x191)]({}),_0x35b857=await warehouse[_0x475ec4(0x15f)]([{'$match':{'name':_0x48e5ce[_0x475ec4(0x167)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x475ec4(0x194)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x475ec4(0x1ac)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x475ec4(0x19e)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x475ec4(0x1f8)},'product_code':{'$first':_0x475ec4(0x18e)},'storage':{'$first':_0x475ec4(0x1c2)},'rack':{'$first':_0x475ec4(0x1cb)},'maxPerUnit':{'$first':_0x475ec4(0x21f)},'expiry_date':{'$first':_0x475ec4(0x22c)},'production_date':{'$first':_0x475ec4(0x20b)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x475ec4(0x154)}}}]);if(_0x26460a[0x0][_0x475ec4(0x215)]=='English\x20(US)'){var _0x106f58=users[_0x475ec4(0x164)];console[_0x475ec4(0x1f1)](_0x106f58);}else{if(_0x26460a[0x0][_0x475ec4(0x215)]=='Hindi')var _0x106f58=users[_0x475ec4(0x1fe)];else{if(_0x26460a[0x0][_0x475ec4(0x215)]==_0x475ec4(0x216))var _0x106f58=users[_0x475ec4(0x216)];else{if(_0x26460a[0x0][_0x475ec4(0x215)]==_0x475ec4(0x213))var _0x106f58=users[_0x475ec4(0x213)];else{if(_0x26460a[0x0]['language']=='French')var _0x106f58=users['French'];else{if(_0x26460a[0x0][_0x475ec4(0x215)]=='Portuguese\x20(BR)')var _0x106f58=users[_0x475ec4(0x200)];else{if(_0x26460a[0x0][_0x475ec4(0x215)]=='Chinese')var _0x106f58=users['Chinese'];else{if(_0x26460a[0x0][_0x475ec4(0x215)]==_0x475ec4(0x17f))var _0x106f58=users[_0x475ec4(0x157)];}}}}}}}_0x1db3fc[_0x475ec4(0x181)](_0x475ec4(0x18d),{'success':_0x56d1c6[_0x475ec4(0x1c4)]('success'),'errors':_0x56d1c6[_0x475ec4(0x1c4)](_0x475ec4(0x227)),'role':_0x1fa1b8,'profile':_0x38b406,'adjustment':_0x48e5ce,'stock':_0x35b857,'master_shop':_0x26460a,'warehouse_name':_0x211620,'unit':_0x2213d5,'language':_0x106f58});}catch(_0x4a9fe1){console[_0x475ec4(0x1f1)](_0x4a9fe1),_0x1db3fc[_0x475ec4(0x1c5)](0xc8)[_0x475ec4(0x14f)]({'message':_0x4a9fe1[_0x475ec4(0x1a7)]});}}),router[a0_0x212c8b(0x1c3)](a0_0x212c8b(0x1b0),auth,async(_0x175295,_0x2c3e24)=>{var _0xb7679=a0_0x212c8b;try{const _0x2455b9=_0x175295[_0xb7679(0x205)]['id'],{warehouse_name:_0x3346ee,Room_name:_0x5148af}=_0x175295[_0xb7679(0x203)],_0x231791=await adjustment[_0xb7679(0x1e3)]({'_id':_0x2455b9}),_0x4d8ae3=_0x231791[_0xb7679(0x16b)][_0xb7679(0x186)](async _0x4ccd03=>{var _0x390234=_0xb7679;if(_0x4ccd03['adjust_qty']>0x0){var _0x483ef0=await warehouse[_0x390234(0x221)]({'name':_0x3346ee,'room':_0x4ccd03[_0x390234(0x1d4)],'warehouse_category':_0x390234(0x21d)});const _0x379f4d=_0x483ef0[_0x390234(0x17d)][_0x390234(0x186)](_0x30054f=>{var _0x5d0dc9=_0x390234;if(_0x4ccd03[_0x5d0dc9(0x17b)]==_0x5d0dc9(0x1e4)){if(_0x30054f['product_name']==_0x4ccd03['product_name']&&_0x30054f[_0x5d0dc9(0x1af)]==_0x4ccd03[_0x5d0dc9(0x1af)]&&_0x30054f['type']==_0x4ccd03['type']&&_0x30054f[_0x5d0dc9(0x1e9)]==_0x4ccd03[_0x5d0dc9(0x1e9)]&&_0x30054f[_0x5d0dc9(0x180)]==_0x4ccd03[_0x5d0dc9(0x180)]&&_0x30054f[_0x5d0dc9(0x153)]==_0x4ccd03['rack']&&_0x30054f[_0x5d0dc9(0x1f6)]==_0x4ccd03[_0x5d0dc9(0x1f6)]&&_0x30054f[_0x5d0dc9(0x165)]==_0x4ccd03[_0x5d0dc9(0x165)]&&_0x30054f[_0x5d0dc9(0x176)]==_0x4ccd03[_0x5d0dc9(0x176)]&&_0x30054f[_0x5d0dc9(0x1ab)]==_0x4ccd03['production_date']&&_0x30054f['invoice']==_0x4ccd03[_0x5d0dc9(0x1b2)]&&_0x30054f['_id']==_0x4ccd03[_0x5d0dc9(0x1ee)]){var _0x7ad274;_0x7ad274=_0x4ccd03['adjust_qty'],_0x4ccd03[_0x5d0dc9(0x1b1)]=='S'&&(_0x7ad274=_0x4ccd03[_0x5d0dc9(0x1a2)]),_0x30054f['product_stock']=_0x30054f[_0x5d0dc9(0x187)]-_0x7ad274;}}else{if(_0x30054f[_0x5d0dc9(0x160)]==_0x4ccd03['product_name']&&_0x30054f[_0x5d0dc9(0x1af)]==_0x4ccd03['floorlevel']&&_0x30054f[_0x5d0dc9(0x17b)]==_0x4ccd03[_0x5d0dc9(0x17b)]&&_0x30054f['bin']==_0x4ccd03['bin']&&_0x30054f[_0x5d0dc9(0x180)]==_0x4ccd03[_0x5d0dc9(0x180)]&&_0x30054f[_0x5d0dc9(0x153)]==_0x4ccd03[_0x5d0dc9(0x153)]&&_0x30054f['storage']==_0x4ccd03[_0x5d0dc9(0x1f6)]&&_0x30054f[_0x5d0dc9(0x165)]==_0x4ccd03[_0x5d0dc9(0x165)]&&_0x30054f[_0x5d0dc9(0x176)]==_0x4ccd03[_0x5d0dc9(0x176)]&&_0x30054f['production_date']==_0x4ccd03[_0x5d0dc9(0x1ab)]&&_0x30054f[_0x5d0dc9(0x1b2)]==_0x4ccd03[_0x5d0dc9(0x1b2)]&&_0x30054f[_0x5d0dc9(0x1dd)]==_0x4ccd03[_0x5d0dc9(0x1ee)]){console[_0x5d0dc9(0x1f1)](_0x4ccd03);var _0x7ad274;_0x7ad274=_0x4ccd03[_0x5d0dc9(0x1a2)],_0x4ccd03['prod_cat']=='S'&&(_0x7ad274=_0x4ccd03[_0x5d0dc9(0x1a2)]),console[_0x5d0dc9(0x1f1)](_0x7ad274+_0x5d0dc9(0x1c1)+_0x4ccd03[_0x5d0dc9(0x1a2)]+'\x20<>\x20'+_0x30054f[_0x5d0dc9(0x1dc)]+_0x5d0dc9(0x1c1)+_0x4ccd03['prod_cat']),_0x30054f[_0x5d0dc9(0x187)]=_0x30054f[_0x5d0dc9(0x187)]+_0x7ad274;}}});}return _0x483ef0;});Promise['all'](_0x4d8ae3)[_0xb7679(0x226)](async _0x58bd87=>{var _0x163e5d=_0xb7679;try{for(const _0x240d10 of _0x58bd87){await _0x240d10[_0x163e5d(0x1db)]();}_0x231791[_0x163e5d(0x1d9)]=_0x163e5d(0x1ff);const _0x50ad8e=await _0x231791[_0x163e5d(0x1db)](),_0x533216=await master_shop[_0x163e5d(0x191)](),_0x5a15c1=await email_settings[_0x163e5d(0x221)](),_0x516158=await supervisor_settings[_0x163e5d(0x191)]();var _0x3f0aad=_0x231791[_0x163e5d(0x16b)],_0x2c2a04='',_0x6552dd;for(_0x6552dd in _0x3f0aad){_0x2c2a04+=_0x163e5d(0x1fd)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3f0aad[_0x6552dd]['product_name']+_0x163e5d(0x1df)+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd][_0x163e5d(0x208)]+_0x163e5d(0x1df)+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd]['adjust_qty']+'</td>'+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd]['unit']+_0x163e5d(0x1df)+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd][_0x163e5d(0x17e)]+_0x163e5d(0x1df)+_0x163e5d(0x188)+_0x231791['warehouse_name']+'</td>'+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd][_0x163e5d(0x1d4)]+_0x163e5d(0x1df)+_0x163e5d(0x188)+_0x3f0aad[_0x6552dd]['storage']+_0x3f0aad[_0x6552dd]['rack']+_0x3f0aad[_0x6552dd][_0x163e5d(0x180)]+_0x3f0aad[_0x6552dd][_0x163e5d(0x1e9)]+_0x3f0aad[_0x6552dd][_0x163e5d(0x17b)][0x0]+_0x3f0aad[_0x6552dd][_0x163e5d(0x1af)]+_0x163e5d(0x1df),'</tr>';}let _0x42ed6d=nodemailer['createTransport']({'host':_0x5a15c1[_0x163e5d(0x18c)],'port':Number(_0x5a15c1[_0x163e5d(0x1d0)]),'secure':![],'auth':{'user':_0x5a15c1[_0x163e5d(0x177)],'pass':_0x5a15c1[_0x163e5d(0x190)]}}),_0x3dafa3={'from':_0x5a15c1[_0x163e5d(0x177)],'to':_0x516158[0x0]['RMSEmail'],'subject':_0x163e5d(0x1f9),'attachments':[{'filename':_0x163e5d(0x1f5),'path':__dirname+_0x163e5d(0x172)+_0x163e5d(0x220)+_0x533216[0x0]['image'],'cid':_0x163e5d(0x217)}],'html':'<!DOCTYPE\x20html>'+_0x163e5d(0x1a8)+'</head><body>'+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x163e5d(0x1b6)+_0x163e5d(0x21a)+_0x163e5d(0x161)+_0x163e5d(0x1f3)+_0x533216[0x0]['site_title']+_0x163e5d(0x171)+_0x163e5d(0x21a)+_0x163e5d(0x21a)+_0x163e5d(0x1c0)+_0x163e5d(0x161)+_0x163e5d(0x22b)+_0x163e5d(0x224)+_0x231791[_0x163e5d(0x1b2)]+'\x20'+_0x163e5d(0x189)+_0x163e5d(0x1bc)+_0x231791[_0x163e5d(0x1ef)]+'\x20'+'</span>'+_0x163e5d(0x1e6)+_0x163e5d(0x21a)+_0x163e5d(0x175)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x163e5d(0x1fd)+_0x163e5d(0x1bd)+_0x163e5d(0x1d5)+_0x163e5d(0x201)+_0x163e5d(0x21c)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x163e5d(0x1a1)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x163e5d(0x1bb)+_0x163e5d(0x21b)+_0x163e5d(0x152)+_0x163e5d(0x1de)+'\x20'+_0x2c2a04+'\x20'+_0x163e5d(0x15e)+_0x163e5d(0x1cc)+_0x163e5d(0x161)+_0x163e5d(0x20a)+_0x163e5d(0x209)+_0x533216[0x0][_0x163e5d(0x1c6)]+_0x163e5d(0x1e6)+_0x163e5d(0x21a)+_0x163e5d(0x21a)+_0x163e5d(0x1ae)};_0x42ed6d[_0x163e5d(0x16d)](_0x3dafa3,function(_0xab1fc5,_0x68be35){var _0x1eb6c6=_0x163e5d;_0xab1fc5?(console['log'](_0xab1fc5),console[_0x1eb6c6(0x1f1)](_0x1eb6c6(0x202))):console[_0x1eb6c6(0x1f1)](_0x1eb6c6(0x211));}),_0x175295[_0x163e5d(0x1c4)](_0x163e5d(0x1a5),_0x163e5d(0x210)),_0x2c3e24[_0x163e5d(0x1da)](_0x163e5d(0x17a)+_0x50ad8e['_id']);}catch(_0x45ab80){console[_0x163e5d(0x1b9)](_0x45ab80),_0x2c3e24[_0x163e5d(0x1c5)](0x1f4)[_0x163e5d(0x14f)]({'error':_0x163e5d(0x19d)});}})[_0xb7679(0x192)](_0x587b92=>{var _0xde130d=_0xb7679;console[_0xde130d(0x1b9)](_0x587b92),_0x2c3e24['status'](0x1f4)['json']({'error':'An\x20error\x20occurred.'});});}catch(_0x4db64d){console['log'](_0x4db64d),_0x2c3e24[_0xb7679(0x1c5)](0xc8)['json']({'message':_0x4db64d[_0xb7679(0x1a7)]});}}),router['get']('/view/:id',auth,async(_0x33e685,_0x423ec2)=>{var _0x3dd93b=a0_0x212c8b;try{const {username:_0x516125,email:_0x3ba6f3,role:_0x446060}=_0x33e685['user'],_0x1c6033=_0x33e685[_0x3dd93b(0x196)],_0x577efb=await profile[_0x3dd93b(0x221)]({'email':_0x1c6033[_0x3dd93b(0x177)]}),_0x40017d=await master_shop[_0x3dd93b(0x191)](),_0x2b3899=_0x33e685[_0x3dd93b(0x205)]['id'],_0x3e9257=await adjustment[_0x3dd93b(0x1e3)]({'_id':_0x2b3899}),_0x5429ce=await purchases[_0x3dd93b(0x15f)]([{'$match':{'warehouse_name':_0x3e9257[_0x3dd93b(0x167)]}},{'$unwind':_0x3dd93b(0x183)},{'$group':{'_id':'$product.product_name'}}]),_0x5a7ef3=await product['find']({}),_0x37791c=await warehouse[_0x3dd93b(0x15f)]([{'$match':{'name':_0x3e9257[_0x3dd93b(0x167)]}},{'$unwind':_0x3dd93b(0x16e)},{'$group':{'_id':_0x3dd93b(0x18f),'name':{'$first':_0x3dd93b(0x194)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x3dd93b(0x1ac)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x3dd93b(0x15b)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x3dd93b(0x1eb)},'secondary_code':{'$first':_0x3dd93b(0x1f8)},'product_code':{'$first':_0x3dd93b(0x18e)},'storage':{'$first':_0x3dd93b(0x1c2)},'rack':{'$first':_0x3dd93b(0x1cb)},'maxPerUnit':{'$first':_0x3dd93b(0x21f)},'expiry_date':{'$first':_0x3dd93b(0x22c)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x3dd93b(0x1d1)},'room':{'$first':_0x3dd93b(0x154)}}}]);let _0x57eb96;if(_0x1c6033[_0x3dd93b(0x1ce)]==_0x3dd93b(0x1e1)){const _0x465a9b=await staff[_0x3dd93b(0x221)]({'email':_0x1c6033['email']});_0x57eb96=await warehouse[_0x3dd93b(0x15f)]([{'$match':{'status':_0x3dd93b(0x1e2),'name':_0x465a9b[_0x3dd93b(0x1ba)],'warehouse_category':_0x3dd93b(0x21d),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x3dd93b(0x20d),'name':{'$first':_0x3dd93b(0x20d)}}}]);}else _0x57eb96=await warehouse[_0x3dd93b(0x15f)]([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials','name':{'$ne':_0x3dd93b(0x214)}}},{'$group':{'_id':_0x3dd93b(0x20d),'name':{'$first':'$name'}}}]);if(_0x40017d[0x0][_0x3dd93b(0x215)]=='English\x20(US)'){var _0x51b439=users['English'];console['log'](_0x51b439);}else{if(_0x40017d[0x0][_0x3dd93b(0x215)]==_0x3dd93b(0x1fe))var _0x51b439=users['Hindi'];else{if(_0x40017d[0x0][_0x3dd93b(0x215)]=='German')var _0x51b439=users[_0x3dd93b(0x216)];else{if(_0x40017d[0x0][_0x3dd93b(0x215)]==_0x3dd93b(0x213))var _0x51b439=users[_0x3dd93b(0x213)];else{if(_0x40017d[0x0]['language']==_0x3dd93b(0x206))var _0x51b439=users[_0x3dd93b(0x206)];else{if(_0x40017d[0x0][_0x3dd93b(0x215)]==_0x3dd93b(0x1fa))var _0x51b439=users[_0x3dd93b(0x200)];else{if(_0x40017d[0x0][_0x3dd93b(0x215)]=='Chinese')var _0x51b439=users[_0x3dd93b(0x1a9)];else{if(_0x40017d[0x0][_0x3dd93b(0x215)]==_0x3dd93b(0x17f))var _0x51b439=users[_0x3dd93b(0x157)];}}}}}}}_0x423ec2[_0x3dd93b(0x181)](_0x3dd93b(0x1f4),{'success':_0x33e685[_0x3dd93b(0x1c4)]('success'),'errors':_0x33e685[_0x3dd93b(0x1c4)](_0x3dd93b(0x227)),'role':_0x1c6033,'profile':_0x577efb,'adjustment':_0x3e9257,'stock':_0x37791c,'master_shop':_0x40017d,'warehouse_name':_0x5429ce,'unit':_0x5a7ef3,'language':_0x51b439,'warehouse':_0x57eb96});}catch(_0x50a3dc){console['log'](_0x50a3dc),_0x423ec2[_0x3dd93b(0x1c5)](0xc8)[_0x3dd93b(0x14f)]({'message':_0x50a3dc[_0x3dd93b(0x1a7)]});}}),router[a0_0x212c8b(0x1c3)]('/view/:id',auth,async(_0x104655,_0x50b760)=>{var _0x46dd02=a0_0x212c8b;try{const _0xfbf376=_0x104655[_0x46dd02(0x205)]['id'],_0x2b0c7e=await adjustment[_0x46dd02(0x1e3)]({'_id':_0xfbf376}),_0x4f1b9d=await warehouse[_0x46dd02(0x221)]({'name':_0x2b0c7e['warehouse_name'],'room':_0x2b0c7e[_0x46dd02(0x166)]}),{warehouse_name:_0x22b8fd,date:_0x2ec239,prod_name:_0x53cd2c,level:_0x467fc8,isle:_0x48b8cb,pallet:_0x5bb4ee,stock:_0x92cdf1,types:_0x3a0436,adjust_qty:_0x1afba0,new_adjust_qty:_0x34a8ef,note:_0x245ddc,Room_name:_0x271059,invoice:_0xa3fcb0,JO_number:_0x50cfe3,expiry_date:_0x2628ca}=_0x104655[_0x46dd02(0x203)];if(typeof _0x53cd2c==_0x46dd02(0x1a0))var _0x255a74=[_0x104655[_0x46dd02(0x203)]['prod_name']],_0x317e06=[_0x104655['body']['level']],_0x4b1665=[_0x104655['body'][_0x46dd02(0x15d)]],_0x2e37f3=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x169)]],_0x30c17e=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x1a6)]],_0xa52768=[_0x104655[_0x46dd02(0x203)]['New_Qty_Converted']],_0x2ebc62=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x159)]],_0x5a8b79=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x170)]],_0x344cde=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x155)]],_0x36a96c=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x176)]],_0x12c099=[_0x104655['body'][_0x46dd02(0x165)]],_0x35ea01=[_0x104655[_0x46dd02(0x203)]['max_per_unit']],_0x5c9c96=[_0x104655['body'][_0x46dd02(0x1ab)]],_0x53392a=[_0x104655[_0x46dd02(0x203)]['prod_cat']],_0x475e76=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x16a)]],_0x33b964=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x173)]],_0x53173a=[_0x104655[_0x46dd02(0x203)][_0x46dd02(0x20f)]];else var _0x255a74=[..._0x104655[_0x46dd02(0x203)]['prod_name']],_0x317e06=[..._0x104655[_0x46dd02(0x203)]['level']],_0x4b1665=[..._0x104655[_0x46dd02(0x203)]['stock']],_0x2e37f3=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x169)]],_0x30c17e=[..._0x104655[_0x46dd02(0x203)]['New_Qty_Converted_adj']],_0xa52768=[..._0x104655[_0x46dd02(0x203)]['New_Qty_Converted']],_0x2ebc62=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x182)]],_0x5a8b79=[..._0x104655['body'][_0x46dd02(0x170)]],_0x344cde=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x155)]],_0x36a96c=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x176)]],_0x12c099=[..._0x104655['body']['expiry_date']],_0x35ea01=[..._0x104655[_0x46dd02(0x203)]['max_per_unit']],_0x5c9c96=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x1ab)]],_0x53392a=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x1b1)]],_0x475e76=[..._0x104655[_0x46dd02(0x203)][_0x46dd02(0x16a)]],_0x33b964=[..._0x104655['body'][_0x46dd02(0x173)]],_0x53173a=[..._0x104655[_0x46dd02(0x203)]['second1']];const _0x4050f8=_0x255a74[_0x46dd02(0x186)](_0x3e78e7=>{return _0x3e78e7={'product_name':_0x3e78e7};});_0x317e06['forEach']((_0x1e106a,_0x100200)=>{_0x475e76['forEach']((_0x176801,_0x1db644)=>{var _0x2d6a6b=a0_0x4f76;if(_0x176801==_0x2d6a6b(0x14e)&&_0x100200==_0x1db644){var _0x54c657=_0x1e106a[_0x2d6a6b(0x1cf)](0x3);_0x4050f8[_0x100200]['storage']=_0x1e106a[0x0],_0x4050f8[_0x100200]['rack']=_0x1e106a[0x1],_0x4050f8[_0x100200][_0x2d6a6b(0x180)]=0x0,_0x4050f8[_0x100200]['bin']=0x0,_0x4050f8[_0x100200][_0x2d6a6b(0x17b)]='Floor',_0x4050f8[_0x100200]['floorlevel']=_0x54c657;}else{if(_0x176801==_0x2d6a6b(0x20c)&&_0x100200==_0x1db644){var _0x54c657=_0x1e106a['slice'](0x3);_0x4050f8[_0x100200][_0x2d6a6b(0x1f6)]=_0x1e106a[0x0],_0x4050f8[_0x100200][_0x2d6a6b(0x153)]=_0x1e106a[0x1],_0x4050f8[_0x100200]['bay']=0x0,_0x4050f8[_0x100200][_0x2d6a6b(0x1e9)]=0x0,_0x4050f8[_0x100200][_0x2d6a6b(0x17b)]=_0x2d6a6b(0x1ca),_0x4050f8[_0x100200]['floorlevel']=_0x1e106a[0x5];}else{if(_0x100200==_0x1db644){var _0x11a974;if(_0x1e106a[0x4]=='L')_0x11a974=_0x2d6a6b(0x228);else _0x1e106a[0x4]=='F'&&(_0x11a974=_0x2d6a6b(0x1ca));_0x4050f8[_0x100200][_0x2d6a6b(0x1f6)]=_0x1e106a[0x0],_0x4050f8[_0x100200]['rack']=_0x1e106a[0x1],_0x4050f8[_0x100200][_0x2d6a6b(0x180)]=_0x1e106a[0x2],_0x4050f8[_0x100200][_0x2d6a6b(0x1e9)]=_0x1e106a[0x3],_0x4050f8[_0x100200][_0x2d6a6b(0x17b)]=_0x11a974,_0x4050f8[_0x100200][_0x2d6a6b(0x1af)]=_0x1e106a[0x5];}}}});}),_0x4b1665[_0x46dd02(0x1fc)]((_0x3935e1,_0x30e1df)=>{var _0x29d3d3=_0x46dd02;_0x4050f8[_0x30e1df][_0x29d3d3(0x1c8)]=_0x3935e1;}),_0x2e37f3[_0x46dd02(0x1fc)]((_0xab5f0b,_0x4bf77c)=>{_0x4050f8[_0x4bf77c]['types']=_0xab5f0b;}),_0x30c17e[_0x46dd02(0x1fc)]((_0x5212bd,_0x1aaedd)=>{var _0x5ecbc9=_0x46dd02;_0x4050f8[_0x1aaedd][_0x5ecbc9(0x1a2)]=_0x5212bd;}),_0xa52768[_0x46dd02(0x1fc)]((_0x13dd48,_0xc75590)=>{var _0x538d5a=_0x46dd02;_0x4050f8[_0xc75590][_0x538d5a(0x15c)]=_0x13dd48;}),_0x2ebc62['forEach']((_0x5a8055,_0x420a49)=>{_0x4050f8[_0x420a49]['unit']=_0x5a8055;}),_0x5a8b79[_0x46dd02(0x1fc)]((_0x1c57b7,_0xccb1a9)=>{var _0x3222d6=_0x46dd02;_0x4050f8[_0xccb1a9][_0x3222d6(0x17e)]=_0x1c57b7;}),_0x344cde[_0x46dd02(0x1fc)]((_0x9a7497,_0x2063bd)=>{var _0xe91805=_0x46dd02;_0x4050f8[_0x2063bd][_0xe91805(0x208)]=_0x9a7497;}),_0x36a96c[_0x46dd02(0x1fc)]((_0x181a28,_0x3829af)=>{var _0x24e5f9=_0x46dd02;_0x4050f8[_0x3829af][_0x24e5f9(0x176)]=_0x181a28;}),_0x12c099['forEach']((_0x5c7bed,_0x3b949a)=>{var _0x1b8d01=_0x46dd02;_0x4050f8[_0x3b949a][_0x1b8d01(0x165)]=_0x5c7bed;}),_0x35ea01['forEach']((_0x52760c,_0x4c8a92)=>{_0x4050f8[_0x4c8a92]['maxperunit']=_0x52760c;}),_0x5c9c96[_0x46dd02(0x1fc)]((_0x1e3196,_0x127d68)=>{var _0x55f264=_0x46dd02;_0x4050f8[_0x127d68][_0x55f264(0x1ab)]=_0x1e3196;}),_0x53392a['forEach']((_0x50854b,_0x44ce58)=>{var _0x4e10be=_0x46dd02;_0x4050f8[_0x44ce58][_0x4e10be(0x1b1)]=_0x50854b;}),_0x475e76[_0x46dd02(0x1fc)]((_0x23f180,_0x5c26e3)=>{var _0x48a5df=_0x46dd02;_0x4050f8[_0x5c26e3][_0x48a5df(0x1d4)]=_0x23f180;}),_0x33b964[_0x46dd02(0x1fc)]((_0x3c1720,_0x29aa5b)=>{_0x4050f8[_0x29aa5b]['primary_code']=_0x3c1720;}),_0x53173a[_0x46dd02(0x1fc)]((_0x2fb4df,_0xedfbd6)=>{var _0x2b8129=_0x46dd02;_0x4050f8[_0xedfbd6][_0x2b8129(0x1b4)]=_0x2fb4df;});const _0x1ca39e=_0x4050f8[_0x46dd02(0x1a3)](_0x267d89=>_0x267d89[_0x46dd02(0x1a2)]!=='0'&&_0x267d89[_0x46dd02(0x1a2)]!=='');var _0x398905=0x0;_0x1ca39e['forEach'](_0x5aed63=>{var _0xb25204=_0x46dd02;console[_0xb25204(0x1f1)](_0xb25204(0x20e),_0x5aed63),parseInt(_0x5aed63['adjust_qty'])<=0x0&&_0x398905++;});if(_0x398905!=0x0)return _0x104655[_0x46dd02(0x1c4)](_0x46dd02(0x227),_0x46dd02(0x21e)),_0x50b760[_0x46dd02(0x1da)]('back');_0x2b0c7e['warehouse_name']=_0x22b8fd,_0x2b0c7e['date']=_0x2ec239,_0x2b0c7e[_0x46dd02(0x16b)]=_0x1ca39e,_0x2b0c7e[_0x46dd02(0x22a)]=_0x245ddc,_0x2b0c7e['invoice']=_0xa3fcb0,_0x2b0c7e[_0x46dd02(0x19c)]='False';const _0x26e740=await _0x2b0c7e[_0x46dd02(0x1db)]();_0x104655['flash'](_0x46dd02(0x1a5),_0x46dd02(0x193)),_0x50b760['redirect'](_0x46dd02(0x156));}catch(_0x4b96dd){console[_0x46dd02(0x1f1)](_0x4b96dd);}}),router[a0_0x212c8b(0x1c3)](a0_0x212c8b(0x207),async(_0x52628a,_0x45d204)=>{var _0x3cb5ec=a0_0x212c8b;const {primary_code:_0xecef49,warehouse_data:_0x4f55c7,rooms_data:_0x4c7de1,Roomslist:_0x10b63e}=_0x52628a[_0x3cb5ec(0x203)],_0x241639=_0x10b63e[_0x3cb5ec(0x1d7)](','),_0x55c8c7=[];async function _0x215732(_0xea9505){var _0x3d5dd0=_0x3cb5ec;const _0x219eda=await warehouse[_0x3d5dd0(0x15f)]([{'$match':{'name':_0x4f55c7,'room':_0xea9505}},{'$unwind':_0x3d5dd0(0x16e)},{'$match':{'product_details.primary_code':_0xecef49}},{'$group':{'_id':_0x3d5dd0(0x18f),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3d5dd0(0x1ea)},'primary_code':{'$first':_0x3d5dd0(0x1eb)},'secondary_code':{'$first':_0x3d5dd0(0x1f8)},'product_code':{'$first':_0x3d5dd0(0x18e)},'level':{'$first':_0x3d5dd0(0x1ac)},'isle':{'$first':_0x3d5dd0(0x1c7)},'type':{'$first':_0x3d5dd0(0x15b)},'pallet':{'$first':_0x3d5dd0(0x19e)},'unit':{'$first':_0x3d5dd0(0x1e5)},'secondary_unit':{'$first':_0x3d5dd0(0x1d3)},'storage':{'$first':_0x3d5dd0(0x1c2)},'rack':{'$first':_0x3d5dd0(0x1cb)},'expiry_date':{'$first':_0x3d5dd0(0x22c)},'production_date':{'$first':_0x3d5dd0(0x20b)},'maxPerUnit':{'$first':_0x3d5dd0(0x21f)},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x3d5dd0(0x1f7)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x3d5dd0(0x225)}}}]),_0x1e1a96=await warehouse[_0x3d5dd0(0x15f)]([{'$match':{'name':_0x4f55c7,'room':_0xea9505}},{'$unwind':_0x3d5dd0(0x16e)},{'$match':{'product_details.secondary_code':_0xecef49}},{'$group':{'_id':_0x3d5dd0(0x18f),'name':{'$first':_0x3d5dd0(0x194)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x3d5dd0(0x1eb)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3d5dd0(0x18e)},'level':{'$first':_0x3d5dd0(0x1ac)},'isle':{'$first':_0x3d5dd0(0x1c7)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x3d5dd0(0x1e5)},'secondary_unit':{'$first':_0x3d5dd0(0x1d3)},'storage':{'$first':_0x3d5dd0(0x1c2)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x3d5dd0(0x20b)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x3d5dd0(0x1f7)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x219eda[_0x3d5dd0(0x219)]>0x0)_0x55c8c7[_0x3d5dd0(0x1a4)](_0x219eda);else _0x1e1a96[_0x3d5dd0(0x219)]>0x0&&_0x55c8c7[_0x3d5dd0(0x1a4)](_0x1e1a96);}const _0x1f1e2c=_0x241639[_0x3cb5ec(0x186)](_0x648cac=>_0x215732(_0x648cac));await Promise[_0x3cb5ec(0x185)](_0x1f1e2c),_0x45d204[_0x3cb5ec(0x14f)](_0x55c8c7);}),router[a0_0x212c8b(0x1c3)]('/CheckingWarehouse',async(_0x25db20,_0x3d1932)=>{var _0x47b184=a0_0x212c8b;const {primaryCode:_0x31713b,secondaryCode:_0x1aa650,productCode:_0x5bf920,level:_0x2b54e7,isle:_0x2c3c88,pallet:_0x488a58,warehouses:_0x45c5b3,room:_0x51c0b8}=_0x25db20[_0x47b184(0x203)];try{const _0x452199=await warehouse['aggregate']([{'$match':{'name':_0x45c5b3,'room':_0x51c0b8}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x2b54e7),'product_details.isle':_0x2c3c88,'product_details.pallet':parseInt(_0x488a58)}},{'$group':{'_id':_0x47b184(0x18f),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x47b184(0x1ea)},'level':{'$first':_0x47b184(0x19f)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x47b184(0x1ad)},'maxProducts':{'$first':_0x47b184(0x1e0)}}}]);_0x3d1932['status'](0xc8)[_0x47b184(0x14f)](_0x452199);}catch(_0x243db8){_0x3d1932[_0x47b184(0x1c5)](0x194)[_0x47b184(0x14f)]({'message':_0x243db8[_0x47b184(0x1a7)]});}}),module[a0_0x212c8b(0x199)]=router;