function a0_0x1ab3(){var _0x32ae96=['$product_details.secondary_unit','invoice','New_Qty_Converted_adj','4700wpTPvJ','product','expiry_date','/CheckingWarehouse','log','<span\x20style=\x22float:\x20right;\x22>','type','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','171078rhDLMn','role','Router','3ouJeKC','room_names','primary_code','\x20<>\x20','Secondary_units','language','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','4599Ewlhse','post','Enabled','/adjustment/view','\x20Order\x20Date\x20:\x20','adjustment','Hindi','params','catch','success','$product_details.level','Primary_Units','<hr\x20class=\x22my-3\x22>','<html><head><title></title>','Level','flash','There\x27s\x20a\x20error\x20in\x20this\x20transaction','foreach\x20newproduct','message','date','finalize','error','True','$product_details.expiry_date','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','host','site_title','save','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','60dbkJjF','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/preview/:id','$product_details.bay','email','warehouse_name','push','string','</tr>','prod_code','map','maxperunit','1340JiVLxx','<h5>','status','image','staff','$warehouse_name','production_date','find','storage','user','$product.product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$product_details.storage','_id','<h2>\x20','182XUTvsn','</div>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','all','findById','<!DOCTYPE\x20html>','errors','nodemailer','floor','$product_details.batch_code','max_per_unit','$product_details.product_stock','exports','random','/view/:id','prod_name','logo','Spanish','An\x20error\x20occurred.','</td>','$product_details._id','$product_details.floorlevel','product_code','add_adjustment','2598mtwNEB','German','<h5\x20style=\x22text-align:\x20left;\x22>','level','json','Email\x20sent\x20successfully','password','$product_details.product_cat','New_Qty_Converted','rack','False','second1','product_name','Arabic\x20(ae)','Portuguese','/barcode_scanner','isAllowEdit','</tbody>','$product_details.invoice','Floor','$product_details.pallet','$product_details.rack','warehouse','Shelves','render','133221fhohMT','createTransport','toString','Rooms','English','then','</table>','../public/language/languages.json','adjustment\x20data\x20update\x20successfully','prime1','</h5>','prod_cat','unit','note','product_stock','port','$product_details.type','Logo.png','Portuguese\x20(BR)','English\x20(US)','$product_details.maxPerUnit','\x20Order\x20Number\x20:\x20','Receiving\x20Area','$room','../models/all_models','get','stockBefore','$product','Return\x20Rooms','minus','Arabic','$product_details.primary_code','21912zYNuka','/view','findOne','</span>','sendMail','slice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','<strong>\x20Regards\x20</strong>','Enclosed','secondary_code','forEach','edit_adjustment','id_transaction_from','12572myiqfe','prod_invoice','batch_code','864eDhuZc','$product_details.product_name','$product_details.secondary_code','secondary_unit','Error\x20Occurs','bay','back','<div>','$product_details.production_date','length','<tr>','master','padStart','stock','types','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','Raw\x20Materials','adjust_qty','body','Return\x20Goods','edit_adjustment_view','$product_details.bin','express','bin','redirect','French','$product_details.unit','Chinese','adjustment\x20add\x20successfull','aggregate','floorlevel','/view/add_adjustment','$name','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','filter','16440eeXqvX','new_adjust_qty','$product_details','../middleware/auth','ADJ-','$product_details.product_code'];a0_0x1ab3=function(){return _0x32ae96;};return a0_0x1ab3();}var a0_0x321b70=a0_0x1383;function a0_0x1383(_0x28b5db,_0x32bba1){var _0x1ab360=a0_0x1ab3();return a0_0x1383=function(_0x1383d6,_0x2f531b){_0x1383d6=_0x1383d6-0xea;var _0x2c09f2=_0x1ab360[_0x1383d6];return _0x2c09f2;},a0_0x1383(_0x28b5db,_0x32bba1);}(function(_0x584ccd,_0x1a5a15){var _0x4ae860=a0_0x1383,_0x2a1961=_0x584ccd();while(!![]){try{var _0x5a67ef=parseInt(_0x4ae860(0x11f))/0x1*(parseInt(_0x4ae860(0x11c))/0x2)+-parseInt(_0x4ae860(0x144))/0x3*(-parseInt(_0x4ae860(0x10b))/0x4)+parseInt(_0x4ae860(0x150))/0x5*(-parseInt(_0x4ae860(0x177))/0x6)+parseInt(_0x4ae860(0x1bd))/0x7*(parseInt(_0x4ae860(0x1c0))/0x8)+parseInt(_0x4ae860(0x127))/0x9*(-parseInt(_0x4ae860(0x114))/0xa)+-parseInt(_0x4ae860(0x190))/0xb+-parseInt(_0x4ae860(0x1b0))/0xc*(parseInt(_0x4ae860(0x15f))/0xd);if(_0x5a67ef===_0x1a5a15)break;else _0x2a1961['push'](_0x2a1961['shift']());}catch(_0x483717){_0x2a1961['push'](_0x2a1961['shift']());}}}(a0_0x1ab3,0x21e90));const express=require(a0_0x321b70(0xfe)),app=express(),router=express[a0_0x321b70(0x11e)](),auth=require(a0_0x321b70(0x10e)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x321b70(0x1a8)),users=require(a0_0x321b70(0x197)),nodemailer=require(a0_0x321b70(0x166));router[a0_0x321b70(0x1a9)](a0_0x321b70(0x1b1),auth,async(_0x34ffe4,_0x23fe53)=>{var _0x1787b4=a0_0x321b70;try{const {username:_0x26f631,email:_0x4ca3be,role:_0x5f1fc4}=_0x34ffe4['user'],_0x2c0892=_0x34ffe4[_0x1787b4(0x159)],_0x15c47a=await profile[_0x1787b4(0x1b2)]({'email':_0x2c0892['email']}),_0x5794fb=await master_shop[_0x1787b4(0x157)]();console[_0x1787b4(0x118)](_0x1787b4(0xf3),_0x5794fb);let _0x1ab1ce;if(_0x2c0892[_0x1787b4(0x11d)]==_0x1787b4(0x154)){const _0x2ef55b=await staff[_0x1787b4(0x1b2)]({'email':_0x2c0892[_0x1787b4(0x148)]});_0x1ab1ce=await warehouse[_0x1787b4(0x157)]({'status':_0x1787b4(0x129),'name':_0x2ef55b[_0x1787b4(0x18d)]});}else _0x1ab1ce=await warehouse[_0x1787b4(0x157)]({'status':'Enabled'});const _0x2660cf=await product[_0x1787b4(0x157)]();let _0x3d50cc;if(_0x2c0892[_0x1787b4(0x11d)]==_0x1787b4(0x154)){const _0x2aa939=await staff[_0x1787b4(0x1b2)]({'email':_0x2c0892['email']});_0x3d50cc=await adjustment[_0x1787b4(0x157)]({'warehouse_name':_0x2aa939[_0x1787b4(0x18d)]});}else _0x3d50cc=await adjustment[_0x1787b4(0x105)]([{'$unwind':_0x1787b4(0x1ab)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':'$date'},'warehouse_name':{'$first':_0x1787b4(0x155)},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x5794fb[0x0][_0x1787b4(0x124)]==_0x1787b4(0x1a3)){var _0x4ea8cc=users[_0x1787b4(0x194)];console['log'](_0x4ea8cc);}else{if(_0x5794fb[0x0][_0x1787b4(0x124)]==_0x1787b4(0x12d))var _0x4ea8cc=users[_0x1787b4(0x12d)];else{if(_0x5794fb[0x0][_0x1787b4(0x124)]==_0x1787b4(0x178))var _0x4ea8cc=users['German'];else{if(_0x5794fb[0x0][_0x1787b4(0x124)]==_0x1787b4(0x170))var _0x4ea8cc=users[_0x1787b4(0x170)];else{if(_0x5794fb[0x0]['language']==_0x1787b4(0x101))var _0x4ea8cc=users['French'];else{if(_0x5794fb[0x0][_0x1787b4(0x124)]=='Portuguese\x20(BR)')var _0x4ea8cc=users[_0x1787b4(0x185)];else{if(_0x5794fb[0x0][_0x1787b4(0x124)]=='Chinese')var _0x4ea8cc=users[_0x1787b4(0x103)];else{if(_0x5794fb[0x0][_0x1787b4(0x124)]==_0x1787b4(0x184))var _0x4ea8cc=users[_0x1787b4(0x1ae)];}}}}}}}_0x23fe53[_0x1787b4(0x18f)](_0x1787b4(0x12c),{'success':_0x34ffe4[_0x1787b4(0x136)]('success'),'errors':_0x34ffe4[_0x1787b4(0x136)](_0x1787b4(0x165)),'role':_0x2c0892,'profile':_0x15c47a,'warehouse':_0x1ab1ce,'product':_0x2660cf,'adjustment':_0x3d50cc,'master_shop':_0x5794fb,'language':_0x4ea8cc});}catch(_0x3a149d){console[_0x1787b4(0x118)](_0x3a149d);}});async function getRandom8DigitNumber(){var _0x24eecc=a0_0x321b70;const _0x2e2a34=0x989680,_0x5d2aef=0x5f5e0ff,_0x227eda=Math[_0x24eecc(0x167)](Math[_0x24eecc(0x16c)]()*(_0x5d2aef-_0x2e2a34+0x1))+_0x2e2a34;var _0x4625ef;const _0x59364b=await adjustment[_0x24eecc(0x1b2)]({'invoice':_0x24eecc(0x10f)+_0x227eda});return _0x59364b&&_0x59364b['length']>0x0?_0x4625ef=_0x24eecc(0x10f)+_0x227eda:_0x4625ef=_0x24eecc(0x10f)+_0x227eda,_0x4625ef;}router[a0_0x321b70(0x1a9)](a0_0x321b70(0x107),auth,async(_0x287a3a,_0x509007)=>{var _0x314a36=a0_0x321b70;try{const {username:_0x134876,email:_0x23d8c2,role:_0x5c6289}=_0x287a3a['user'],_0x2dbda6=_0x287a3a['user'],_0x245355=await profile[_0x314a36(0x1b2)]({'email':_0x2dbda6[_0x314a36(0x148)]}),_0xdff521=await master_shop['find']();let _0x49263a;if(_0x2dbda6['role']==_0x314a36(0x154)){const _0x585f62=await staff[_0x314a36(0x1b2)]({'email':_0x2dbda6[_0x314a36(0x148)]});_0x49263a=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x585f62['warehouse'],'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x314a36(0xfb)}}},{'$group':{'_id':_0x314a36(0x108),'name':{'$first':'$name'}}}]);}else _0x49263a=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x314a36(0xf8),'name':{'$ne':_0x314a36(0xfb)}}},{'$group':{'_id':_0x314a36(0x108),'name':{'$first':'$name'}}}]);const _0x365928=await product[_0x314a36(0x157)]({}),_0xfb0c7c=await adjustment[_0x314a36(0x157)]({}),_0x4da69f=_0xfb0c7c[_0x314a36(0xf1)]+0x1,_0xe2cc36=_0x314a36(0x10f)+_0x4da69f[_0x314a36(0x192)]()[_0x314a36(0xf4)](0x5,'0');var _0x3e2437=['Ambient',_0x314a36(0x1b8),_0x314a36(0x1ac)];if(_0xdff521[0x0]['language']==_0x314a36(0x1a3))var _0x83027=users[_0x314a36(0x194)];else{if(_0xdff521[0x0][_0x314a36(0x124)]==_0x314a36(0x12d))var _0x83027=users[_0x314a36(0x12d)];else{if(_0xdff521[0x0]['language']==_0x314a36(0x178))var _0x83027=users[_0x314a36(0x178)];else{if(_0xdff521[0x0][_0x314a36(0x124)]==_0x314a36(0x170))var _0x83027=users[_0x314a36(0x170)];else{if(_0xdff521[0x0]['language']==_0x314a36(0x101))var _0x83027=users['French'];else{if(_0xdff521[0x0][_0x314a36(0x124)]==_0x314a36(0x1a2))var _0x83027=users[_0x314a36(0x185)];else{if(_0xdff521[0x0][_0x314a36(0x124)]==_0x314a36(0x103))var _0x83027=users[_0x314a36(0x103)];else{if(_0xdff521[0x0][_0x314a36(0x124)]==_0x314a36(0x184))var _0x83027=users[_0x314a36(0x1ae)];}}}}}}}const _0xceb2ae=getRandom8DigitNumber();_0xceb2ae[_0x314a36(0x195)](_0x2233c9=>{var _0x1b5403=_0x314a36;_0x509007['render'](_0x1b5403(0x176),{'success':_0x287a3a[_0x1b5403(0x136)](_0x1b5403(0x130)),'errors':_0x287a3a[_0x1b5403(0x136)](_0x1b5403(0x165)),'role':_0x2dbda6,'profile':_0x245355,'warehouse':_0x49263a,'product':_0x365928,'master_shop':_0xdff521,'language':_0x83027,'rooms_data':_0x3e2437,'invoice_no':_0x2233c9});})[_0x314a36(0x12f)](_0x21709d=>{var _0x3841ea=_0x314a36;_0x287a3a[_0x3841ea(0x136)](_0x3841ea(0x165),_0x3841ea(0x137)),_0x509007['redirect']('/adjustment/view');});}catch(_0x23fd12){console[_0x314a36(0x118)](_0x23fd12);}}),router['post']('/view/add_adjustment',auth,async(_0x2bf19b,_0x1c32c2)=>{var _0xa38606=a0_0x321b70;try{const {warehouse_name:_0x2412ba,date:_0x295d57,prod_name:_0xeb9660,level:_0x457156,isle:_0x5d5779,pallet:_0x2a7c1f,stock:_0x3e886f,types:_0x4fe285,adjust_qty:_0x2963f8,new_adjust_qty:_0x1831c2,note:_0x169258,Room_name:_0x2e2d69,invoice:_0x4a2b7b,JO_number:_0x516312,expiry_date:_0x7541f5}=_0x2bf19b[_0xa38606(0xfa)];if(typeof _0xeb9660==_0xa38606(0x14b))var _0x2e16d6=[_0x2bf19b['body'][_0xa38606(0x16e)]],_0x17cefb=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x17a)]],_0x2c2fc2=[_0x2bf19b[_0xa38606(0xfa)]['stock']],_0x101990=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0xf6)]],_0x4b3f70=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x113)]],_0x136e31=[_0x2bf19b[_0xa38606(0xfa)]['New_Qty_Converted']],_0x2be330=[_0x2bf19b['body'][_0xa38606(0x132)]],_0x5f286a=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x123)]],_0x401e2c=[_0x2bf19b['body']['prod_code']],_0x2e4cbd=[_0x2bf19b[_0xa38606(0xfa)]['batch_code']],_0x3f56a9=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x116)]],_0x3caaa6=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x169)]],_0x3ce1a9=[_0x2bf19b['body'][_0xa38606(0x156)]],_0x17413d=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x19b)]],_0x37a4cb=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x193)]],_0x2a5c09=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x199)]],_0x5d3c4b=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x182)]],_0x4bb9c4=[_0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x1be)]],_0x165c53=[_0x2bf19b['body']['id_transaction']];else var _0x2e16d6=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x16e)]],_0x17cefb=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x17a)]],_0x2c2fc2=[..._0x2bf19b['body'][_0xa38606(0xf5)]],_0x101990=[..._0x2bf19b['body']['types']],_0x4b3f70=[..._0x2bf19b['body'][_0xa38606(0x113)]],_0x136e31=[..._0x2bf19b[_0xa38606(0xfa)]['New_Qty_Converted']],_0x2be330=[..._0x2bf19b[_0xa38606(0xfa)]['unit']],_0x5f286a=[..._0x2bf19b[_0xa38606(0xfa)]['Secondary_units']],_0x401e2c=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x14d)]],_0x2e4cbd=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x1bf)]],_0x3f56a9=[..._0x2bf19b[_0xa38606(0xfa)]['expiry_date']],_0x3caaa6=[..._0x2bf19b['body'][_0xa38606(0x169)]],_0x3ce1a9=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x156)]],_0x17413d=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x19b)]],_0x37a4cb=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x193)]],_0x2a5c09=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x199)]],_0x5d3c4b=[..._0x2bf19b[_0xa38606(0xfa)]['second1']],_0x4bb9c4=[..._0x2bf19b[_0xa38606(0xfa)][_0xa38606(0x1be)]],_0x165c53=[..._0x2bf19b[_0xa38606(0xfa)]['id_transaction']];const _0x32fbf3=_0x2e16d6[_0xa38606(0x14e)](_0xc2e704=>{return _0xc2e704={'product_name':_0xc2e704};});_0x17cefb[_0xa38606(0x1ba)]((_0x23a9bb,_0x318639)=>{var _0x36a345=_0xa38606;_0x37a4cb[_0x36a345(0x1ba)]((_0x3906fd,_0x5d891c)=>{var _0x56a95a=_0x36a345;if(_0x3906fd==_0x56a95a(0x1a6)&&_0x318639==_0x5d891c){var _0x233d9d=_0x23a9bb[_0x56a95a(0x1b5)](0x3);_0x32fbf3[_0x318639][_0x56a95a(0x158)]=_0x23a9bb[0x0],_0x32fbf3[_0x318639][_0x56a95a(0x180)]=_0x23a9bb[0x1],_0x32fbf3[_0x318639]['bay']=0x0,_0x32fbf3[_0x318639][_0x56a95a(0xff)]=0x0,_0x32fbf3[_0x318639]['type']='Floor',_0x32fbf3[_0x318639][_0x56a95a(0x106)]=_0x233d9d;}else{if(_0x3906fd==_0x56a95a(0x18e)&&_0x318639==_0x5d891c){var _0x233d9d=_0x23a9bb[_0x56a95a(0x1b5)](0x3);_0x32fbf3[_0x318639][_0x56a95a(0x158)]=_0x23a9bb[0x0],_0x32fbf3[_0x318639][_0x56a95a(0x180)]=_0x23a9bb[0x1],_0x32fbf3[_0x318639]['bay']=0x0,_0x32fbf3[_0x318639]['bin']=0x0,_0x32fbf3[_0x318639][_0x56a95a(0x11a)]=_0x56a95a(0x18a),_0x32fbf3[_0x318639]['floorlevel']=_0x23a9bb[0x5];}else{if(_0x318639==_0x5d891c){var _0x4a9f86;if(_0x23a9bb[0x4]=='L')_0x4a9f86='Level';else _0x23a9bb[0x4]=='F'&&(_0x4a9f86='Floor');_0x32fbf3[_0x318639]['storage']=_0x23a9bb[0x0],_0x32fbf3[_0x318639]['rack']=_0x23a9bb[0x1],_0x32fbf3[_0x318639][_0x56a95a(0xed)]=_0x23a9bb[0x2],_0x32fbf3[_0x318639][_0x56a95a(0xff)]=_0x23a9bb[0x3],_0x32fbf3[_0x318639][_0x56a95a(0x11a)]=_0x4a9f86,_0x32fbf3[_0x318639]['floorlevel']=_0x23a9bb[0x5];}}}});}),_0x2c2fc2[_0xa38606(0x1ba)]((_0x235a83,_0x16ba6b)=>{var _0x4e69ad=_0xa38606;_0x32fbf3[_0x16ba6b][_0x4e69ad(0x1aa)]=_0x235a83;}),_0x165c53['forEach']((_0xa027b0,_0x796a80)=>{var _0x43d5f3=_0xa38606;_0x32fbf3[_0x796a80][_0x43d5f3(0x1bc)]=_0xa027b0;}),_0x101990['forEach']((_0x3a77e5,_0x351918)=>{var _0x2ced5b=_0xa38606;_0x32fbf3[_0x351918][_0x2ced5b(0xf6)]=_0x3a77e5;}),_0x4b3f70[_0xa38606(0x1ba)]((_0x4d0092,_0x5e6a13)=>{var _0x1b87bc=_0xa38606;_0x32fbf3[_0x5e6a13][_0x1b87bc(0xf9)]=_0x4d0092;}),_0x136e31[_0xa38606(0x1ba)]((_0x12438b,_0x5bd19d)=>{var _0x4ac3b3=_0xa38606;_0x32fbf3[_0x5bd19d][_0x4ac3b3(0x10c)]=_0x12438b;}),_0x2be330['forEach']((_0x25f3a6,_0x3918ba)=>{var _0x8ef596=_0xa38606;_0x32fbf3[_0x3918ba][_0x8ef596(0x19c)]=_0x25f3a6;}),_0x5f286a[_0xa38606(0x1ba)]((_0xa0e06f,_0x412fb4)=>{var _0x331967=_0xa38606;_0x32fbf3[_0x412fb4][_0x331967(0xeb)]=_0xa0e06f;}),_0x401e2c[_0xa38606(0x1ba)]((_0x4d7a30,_0x1691ba)=>{_0x32fbf3[_0x1691ba]['product_code']=_0x4d7a30;}),_0x2e4cbd[_0xa38606(0x1ba)]((_0x4eca6d,_0x5e4ae1)=>{var _0x119ff7=_0xa38606;_0x32fbf3[_0x5e4ae1][_0x119ff7(0x1bf)]=_0x4eca6d;}),_0x3f56a9['forEach']((_0x1a99ca,_0xdaec39)=>{var _0x4c049a=_0xa38606;_0x32fbf3[_0xdaec39][_0x4c049a(0x116)]=_0x1a99ca;}),_0x3caaa6[_0xa38606(0x1ba)]((_0x4f29af,_0x343def)=>{var _0x1cb8df=_0xa38606;_0x32fbf3[_0x343def][_0x1cb8df(0x14f)]=_0x4f29af;}),_0x3ce1a9[_0xa38606(0x1ba)]((_0x45ce32,_0x51c3be)=>{var _0x305adb=_0xa38606;_0x32fbf3[_0x51c3be][_0x305adb(0x156)]=_0x45ce32;}),_0x17413d[_0xa38606(0x1ba)]((_0x4df618,_0x27c473)=>{var _0x4e93ce=_0xa38606;_0x32fbf3[_0x27c473][_0x4e93ce(0x19b)]=_0x4df618;}),_0x37a4cb[_0xa38606(0x1ba)]((_0x5ab537,_0x17caa7)=>{var _0x298889=_0xa38606;_0x32fbf3[_0x17caa7][_0x298889(0x120)]=_0x5ab537;}),_0x2a5c09[_0xa38606(0x1ba)]((_0x8ac006,_0x4f2707)=>{var _0x41c50d=_0xa38606;_0x32fbf3[_0x4f2707][_0x41c50d(0x121)]=_0x8ac006;}),_0x5d3c4b['forEach']((_0xafca88,_0x450852)=>{var _0x533b06=_0xa38606;_0x32fbf3[_0x450852][_0x533b06(0x1b9)]=_0xafca88;}),_0x4bb9c4[_0xa38606(0x1ba)]((_0x5d1933,_0x28773a)=>{_0x32fbf3[_0x28773a]['invoice']=_0x5d1933;});const _0x4cac9d=_0x32fbf3[_0xa38606(0x10a)](_0x120a38=>_0x120a38['adjust_qty']!=='0'&&_0x120a38[_0xa38606(0xf9)]!=='');var _0x6e2c0c=0x0;_0x4cac9d[_0xa38606(0x1ba)](_0x38b305=>{var _0x4e109b=_0xa38606;console['log']('foreach\x20newproduct',_0x38b305),parseInt(_0x38b305[_0x4e109b(0xf9)])<=0x0&&_0x6e2c0c++;});if(_0x6e2c0c!=0x0)return _0x2bf19b[_0xa38606(0x136)](_0xa38606(0x165),_0xa38606(0x109)),_0x1c32c2['redirect'](_0xa38606(0xee));const _0x2bd292=new adjustment({'warehouse_name':_0x2412ba,'date':_0x295d57,'product':_0x4cac9d,'note':_0x169258,'room':_0x2e2d69,'invoice':_0x4a2b7b,'JO_number':_0x516312,'expiry_date':_0x7541f5}),_0x57f556=await _0x2bd292[_0xa38606(0x142)]();_0x2bf19b[_0xa38606(0x136)](_0xa38606(0x130),_0xa38606(0x104)),_0x1c32c2[_0xa38606(0x100)]('/adjustment/preview/'+_0x57f556[_0xa38606(0x15d)]);}catch(_0x1e16cb){console[_0xa38606(0x118)](_0x1e16cb),_0x1c32c2['status'](0xc8)[_0xa38606(0x17b)]({'message':_0x1e16cb[_0xa38606(0x139)]});}}),router[a0_0x321b70(0x1a9)](a0_0x321b70(0x146),auth,async(_0x5a672e,_0x4d357e)=>{var _0x597a05=a0_0x321b70;try{const {username:_0x280748,email:_0x3c6257,role:_0x124049}=_0x5a672e['user'],_0xb84fc9=_0x5a672e[_0x597a05(0x159)],_0x28bfbe=await profile['findOne']({'email':_0xb84fc9[_0x597a05(0x148)]}),_0x8d831b=await master_shop[_0x597a05(0x157)](),_0x4f7181=_0x5a672e['params']['id'],_0x228491=await adjustment[_0x597a05(0x163)]({'_id':_0x4f7181}),_0x28f766=await purchases['aggregate']([{'$match':{'warehouse_name':_0x228491[_0x597a05(0x149)]}},{'$unwind':_0x597a05(0x1ab)},{'$group':{'_id':'$product.product_name'}}]),_0x534daa=await product[_0x597a05(0x157)]({}),_0x4d4d4c=await warehouse[_0x597a05(0x105)]([{'$match':{'name':_0x228491[_0x597a05(0x149)]}},{'$unwind':_0x597a05(0x10d)},{'$group':{'_id':_0x597a05(0x173),'name':{'$first':_0x597a05(0x1c1)},'product_stock':{'$first':_0x597a05(0x16a)},'bay':{'$first':_0x597a05(0x147)},'bin':{'$first':_0x597a05(0xfd)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x597a05(0x174)},'primary_code':{'$first':_0x597a05(0x1af)},'secondary_code':{'$first':_0x597a05(0xea)},'product_code':{'$first':_0x597a05(0x110)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x597a05(0x13e)},'production_date':{'$first':_0x597a05(0xf0)},'batch_code':{'$first':_0x597a05(0x168)},'room':{'$first':_0x597a05(0x1a7)}}}]);if(_0x8d831b[0x0]['language']==_0x597a05(0x1a3)){var _0x53fd30=users[_0x597a05(0x194)];console[_0x597a05(0x118)](_0x53fd30);}else{if(_0x8d831b[0x0][_0x597a05(0x124)]==_0x597a05(0x12d))var _0x53fd30=users['Hindi'];else{if(_0x8d831b[0x0][_0x597a05(0x124)]==_0x597a05(0x178))var _0x53fd30=users[_0x597a05(0x178)];else{if(_0x8d831b[0x0][_0x597a05(0x124)]=='Spanish')var _0x53fd30=users['Spanish'];else{if(_0x8d831b[0x0]['language']==_0x597a05(0x101))var _0x53fd30=users[_0x597a05(0x101)];else{if(_0x8d831b[0x0][_0x597a05(0x124)]==_0x597a05(0x1a2))var _0x53fd30=users[_0x597a05(0x185)];else{if(_0x8d831b[0x0][_0x597a05(0x124)]==_0x597a05(0x103))var _0x53fd30=users['Chinese'];else{if(_0x8d831b[0x0]['language']==_0x597a05(0x184))var _0x53fd30=users[_0x597a05(0x1ae)];}}}}}}}_0x4d357e[_0x597a05(0x18f)](_0x597a05(0xfc),{'success':_0x5a672e['flash']('success'),'errors':_0x5a672e[_0x597a05(0x136)](_0x597a05(0x165)),'role':_0xb84fc9,'profile':_0x28bfbe,'adjustment':_0x228491,'stock':_0x4d4d4c,'master_shop':_0x8d831b,'warehouse_name':_0x28f766,'unit':_0x534daa,'language':_0x53fd30});}catch(_0x68d017){console[_0x597a05(0x118)](_0x68d017),_0x4d357e[_0x597a05(0x152)](0xc8)[_0x597a05(0x17b)]({'message':_0x68d017[_0x597a05(0x139)]});}}),router[a0_0x321b70(0x128)]('/preview/:id',auth,async(_0x236186,_0x32da96)=>{var _0x49d0bc=a0_0x321b70;try{const _0x7b7f9d=_0x236186[_0x49d0bc(0x12e)]['id'],{warehouse_name:_0x150db9,Room_name:_0x3db05a}=_0x236186['body'],_0x11f886=await adjustment[_0x49d0bc(0x163)]({'_id':_0x7b7f9d}),_0x2e7202=_0x11f886[_0x49d0bc(0x115)]['map'](async _0x1dee84=>{var _0x5afc72=_0x49d0bc;if(_0x1dee84['adjust_qty']>0x0){var _0x3a7e27=await warehouse[_0x5afc72(0x1b2)]({'name':_0x150db9,'room':_0x1dee84[_0x5afc72(0x120)],'warehouse_category':_0x5afc72(0xf8)});const _0x189cad=_0x3a7e27['product_details'][_0x5afc72(0x14e)](_0x356868=>{var _0x2469fc=_0x5afc72;console[_0x2469fc(0x118)](_0x1dee84['types']+_0x2469fc(0x122));if(_0x1dee84[_0x2469fc(0xf6)]==_0x2469fc(0x1ad)){if(_0x356868['product_name']==_0x1dee84[_0x2469fc(0x183)]&&_0x356868[_0x2469fc(0x106)]==_0x1dee84[_0x2469fc(0x106)]&&_0x356868[_0x2469fc(0x11a)]==_0x1dee84[_0x2469fc(0x11a)]&&_0x356868[_0x2469fc(0xff)]==_0x1dee84[_0x2469fc(0xff)]&&_0x356868[_0x2469fc(0xed)]==_0x1dee84[_0x2469fc(0xed)]&&_0x356868[_0x2469fc(0x180)]==_0x1dee84[_0x2469fc(0x180)]&&_0x356868[_0x2469fc(0x158)]==_0x1dee84[_0x2469fc(0x158)]&&_0x356868[_0x2469fc(0x116)]==_0x1dee84['expiry_date']&&_0x356868[_0x2469fc(0x1bf)]==_0x1dee84[_0x2469fc(0x1bf)]&&_0x356868['production_date']==_0x1dee84['production_date']&&_0x356868[_0x2469fc(0x112)]==_0x1dee84[_0x2469fc(0x112)]&&_0x356868[_0x2469fc(0x15d)]==_0x1dee84[_0x2469fc(0x1bc)]){var _0x3cd1a2;_0x3cd1a2=_0x1dee84['adjust_qty'],_0x1dee84[_0x2469fc(0x19b)]=='S'&&(_0x3cd1a2=_0x1dee84['adjust_qty']),_0x356868['product_stock']=_0x356868[_0x2469fc(0x19e)]-_0x3cd1a2;}}else{if(_0x356868[_0x2469fc(0x183)]==_0x1dee84['product_name']&&_0x356868[_0x2469fc(0x106)]==_0x1dee84['floorlevel']&&_0x356868[_0x2469fc(0x11a)]==_0x1dee84[_0x2469fc(0x11a)]&&_0x356868[_0x2469fc(0xff)]==_0x1dee84[_0x2469fc(0xff)]&&_0x356868['bay']==_0x1dee84[_0x2469fc(0xed)]&&_0x356868[_0x2469fc(0x180)]==_0x1dee84[_0x2469fc(0x180)]&&_0x356868[_0x2469fc(0x158)]==_0x1dee84[_0x2469fc(0x158)]&&_0x356868[_0x2469fc(0x116)]==_0x1dee84[_0x2469fc(0x116)]&&_0x356868[_0x2469fc(0x1bf)]==_0x1dee84['batch_code']&&_0x356868[_0x2469fc(0x156)]==_0x1dee84[_0x2469fc(0x156)]&&_0x356868[_0x2469fc(0x112)]==_0x1dee84['invoice']&&_0x356868[_0x2469fc(0x15d)]==_0x1dee84[_0x2469fc(0x1bc)]){console['log'](_0x1dee84);var _0x3cd1a2;_0x3cd1a2=_0x1dee84[_0x2469fc(0xf9)],_0x1dee84['prod_cat']=='S'&&(_0x3cd1a2=_0x1dee84[_0x2469fc(0xf9)]),_0x356868[_0x2469fc(0x19e)]=_0x356868['product_stock']+_0x3cd1a2;}}});}return _0x3a7e27;});Promise[_0x49d0bc(0x162)](_0x2e7202)[_0x49d0bc(0x195)](async _0xe96ffd=>{var _0x3378df=_0x49d0bc;try{for(const _0x53c10f of _0xe96ffd){await _0x53c10f[_0x3378df(0x142)]();}_0x11f886[_0x3378df(0x13b)]=_0x3378df(0x13d);const _0xaad56e=await _0x11f886[_0x3378df(0x142)](),_0x52f4fe=await master_shop[_0x3378df(0x157)](),_0x282499=await email_settings['findOne'](),_0x12e2ae=await supervisor_settings[_0x3378df(0x157)]();var _0x24be41=_0x11f886[_0x3378df(0x115)],_0x3241c7='',_0x588052;for(_0x588052 in _0x24be41){_0x3241c7+=_0x3378df(0xf2)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24be41[_0x588052]['product_name']+_0x3378df(0x172)+_0x3378df(0x13f)+_0x24be41[_0x588052][_0x3378df(0x175)]+_0x3378df(0x172)+_0x3378df(0x13f)+_0x24be41[_0x588052][_0x3378df(0xf9)]+_0x3378df(0x172)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24be41[_0x588052]['unit']+_0x3378df(0x172)+_0x3378df(0x13f)+_0x24be41[_0x588052][_0x3378df(0xeb)]+_0x3378df(0x172)+_0x3378df(0x13f)+_0x11f886[_0x3378df(0x149)]+_0x3378df(0x172)+_0x3378df(0x13f)+_0x24be41[_0x588052][_0x3378df(0x120)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x24be41[_0x588052][_0x3378df(0x158)]+_0x24be41[_0x588052]['rack']+_0x24be41[_0x588052][_0x3378df(0xed)]+_0x24be41[_0x588052]['bin']+_0x24be41[_0x588052][_0x3378df(0x11a)][0x0]+_0x24be41[_0x588052]['floorlevel']+_0x3378df(0x172),_0x3378df(0x14c);}let _0x41cca2=nodemailer[_0x3378df(0x191)]({'host':_0x282499[_0x3378df(0x140)],'port':Number(_0x282499[_0x3378df(0x19f)]),'secure':![],'auth':{'user':_0x282499[_0x3378df(0x148)],'pass':_0x282499[_0x3378df(0x17d)]}}),_0x1ba62b={'from':_0x282499[_0x3378df(0x148)],'to':_0x12e2ae[0x0]['RMSEmail'],'subject':'Adjustment\x20Mail','attachments':[{'filename':_0x3378df(0x1a1),'path':__dirname+'/../public'+'/upload/'+_0x52f4fe[0x0][_0x3378df(0x153)],'cid':_0x3378df(0x16f)}],'html':_0x3378df(0x164)+_0x3378df(0x134)+'</head><body>'+_0x3378df(0xef)+_0x3378df(0x11b)+_0x3378df(0xef)+_0x3378df(0x145)+_0x3378df(0x160)+_0x3378df(0xef)+_0x3378df(0x15e)+_0x52f4fe[0x0]['site_title']+'\x20</h2>'+_0x3378df(0x160)+_0x3378df(0x160)+_0x3378df(0x133)+'<div>'+_0x3378df(0x179)+_0x3378df(0x1a5)+_0x11f886[_0x3378df(0x112)]+'\x20'+_0x3378df(0x119)+_0x3378df(0x12b)+_0x11f886[_0x3378df(0x13a)]+'\x20'+_0x3378df(0x1b3)+_0x3378df(0x19a)+_0x3378df(0x160)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x3378df(0x125)+_0x3378df(0xf2)+_0x3378df(0x143)+_0x3378df(0x15b)+_0x3378df(0x126)+_0x3378df(0x161)+_0x3378df(0x1b6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x3378df(0xf7)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x3378df(0x14c)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x3241c7+'\x20'+_0x3378df(0x188)+_0x3378df(0x196)+_0x3378df(0xef)+_0x3378df(0x1b7)+_0x3378df(0x151)+_0x52f4fe[0x0][_0x3378df(0x141)]+_0x3378df(0x19a)+_0x3378df(0x160)+'</div>'+'</body></html>'};_0x41cca2[_0x3378df(0x1b4)](_0x1ba62b,function(_0x3a0eda,_0x325b08){var _0x4cb952=_0x3378df;_0x3a0eda?(console[_0x4cb952(0x118)](_0x3a0eda),console['log'](_0x4cb952(0xec))):console[_0x4cb952(0x118)](_0x4cb952(0x17c));}),_0x236186[_0x3378df(0x136)](_0x3378df(0x130),'adjustment\x20Finalized\x20successfully'),_0x32da96[_0x3378df(0x100)]('/picking_list/PDF_adjustment_rm/'+_0xaad56e[_0x3378df(0x15d)]);}catch(_0x253da3){console[_0x3378df(0x13c)](_0x253da3),_0x32da96['status'](0x1f4)['json']({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x49d0bc(0x12f)](_0xda8b8d=>{var _0x53df43=_0x49d0bc;console['error'](_0xda8b8d),_0x32da96[_0x53df43(0x152)](0x1f4)[_0x53df43(0x17b)]({'error':_0x53df43(0x171)});});}catch(_0x452bb0){console[_0x49d0bc(0x118)](_0x452bb0),_0x32da96['status'](0xc8)[_0x49d0bc(0x17b)]({'message':_0x452bb0[_0x49d0bc(0x139)]});}}),router[a0_0x321b70(0x1a9)]('/view/:id',auth,async(_0x1ae655,_0x1c5464)=>{var _0x413a12=a0_0x321b70;try{const {username:_0x177171,email:_0x1a72c6,role:_0xb07547}=_0x1ae655['user'],_0x41d17e=_0x1ae655['user'],_0x4be97e=await profile['findOne']({'email':_0x41d17e[_0x413a12(0x148)]}),_0x385715=await master_shop['find'](),_0x461d6a=_0x1ae655[_0x413a12(0x12e)]['id'],_0x3c6ff1=await adjustment['findById']({'_id':_0x461d6a}),_0x9da574=await purchases[_0x413a12(0x105)]([{'$match':{'warehouse_name':_0x3c6ff1[_0x413a12(0x149)]}},{'$unwind':_0x413a12(0x1ab)},{'$group':{'_id':_0x413a12(0x15a)}}]),_0x1b4dcf=await product['find']({}),_0x2b05c5=await warehouse[_0x413a12(0x105)]([{'$match':{'name':_0x3c6ff1[_0x413a12(0x149)]}},{'$unwind':_0x413a12(0x10d)},{'$group':{'_id':_0x413a12(0x173),'name':{'$first':_0x413a12(0x1c1)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x413a12(0xfd)},'type':{'$first':_0x413a12(0x1a0)},'floorlevel':{'$first':_0x413a12(0x174)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x413a12(0x110)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x413a12(0x18c)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x413a12(0x13e)},'production_date':{'$first':_0x413a12(0xf0)},'batch_code':{'$first':_0x413a12(0x168)},'room':{'$first':_0x413a12(0x1a7)}}}]);let _0x41134f;if(_0x41d17e[_0x413a12(0x11d)]=='staff'){const _0x31702f=await staff[_0x413a12(0x1b2)]({'email':_0x41d17e[_0x413a12(0x148)]});_0x41134f=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x31702f[_0x413a12(0x18d)],'warehouse_category':_0x413a12(0xf8),'name':{'$ne':_0x413a12(0xfb)}}},{'$group':{'_id':_0x413a12(0x108),'name':{'$first':'$name'}}}]);}else _0x41134f=await warehouse[_0x413a12(0x105)]([{'$match':{'status':_0x413a12(0x129),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x413a12(0xfb)}}},{'$group':{'_id':_0x413a12(0x108),'name':{'$first':_0x413a12(0x108)}}}]);if(_0x385715[0x0][_0x413a12(0x124)]==_0x413a12(0x1a3)){var _0x48c974=users[_0x413a12(0x194)];console[_0x413a12(0x118)](_0x48c974);}else{if(_0x385715[0x0][_0x413a12(0x124)]=='Hindi')var _0x48c974=users[_0x413a12(0x12d)];else{if(_0x385715[0x0][_0x413a12(0x124)]==_0x413a12(0x178))var _0x48c974=users[_0x413a12(0x178)];else{if(_0x385715[0x0][_0x413a12(0x124)]=='Spanish')var _0x48c974=users[_0x413a12(0x170)];else{if(_0x385715[0x0]['language']==_0x413a12(0x101))var _0x48c974=users[_0x413a12(0x101)];else{if(_0x385715[0x0][_0x413a12(0x124)]=='Portuguese\x20(BR)')var _0x48c974=users['Portuguese'];else{if(_0x385715[0x0]['language']=='Chinese')var _0x48c974=users[_0x413a12(0x103)];else{if(_0x385715[0x0]['language']==_0x413a12(0x184))var _0x48c974=users[_0x413a12(0x1ae)];}}}}}}}_0x1c5464[_0x413a12(0x18f)](_0x413a12(0x1bb),{'success':_0x1ae655[_0x413a12(0x136)](_0x413a12(0x130)),'errors':_0x1ae655[_0x413a12(0x136)](_0x413a12(0x165)),'role':_0x41d17e,'profile':_0x4be97e,'adjustment':_0x3c6ff1,'stock':_0x2b05c5,'master_shop':_0x385715,'warehouse_name':_0x9da574,'unit':_0x1b4dcf,'language':_0x48c974,'warehouse':_0x41134f});}catch(_0x10bbd7){console[_0x413a12(0x118)](_0x10bbd7),_0x1c5464[_0x413a12(0x152)](0xc8)[_0x413a12(0x17b)]({'message':_0x10bbd7[_0x413a12(0x139)]});}}),router['post'](a0_0x321b70(0x16d),auth,async(_0x424f62,_0x2b826d)=>{var _0x390c88=a0_0x321b70;try{const _0x1f765f=_0x424f62['params']['id'],_0x4ab38b=await adjustment[_0x390c88(0x163)]({'_id':_0x1f765f}),_0x49422c=await warehouse[_0x390c88(0x1b2)]({'name':_0x4ab38b[_0x390c88(0x149)],'room':_0x4ab38b['room']}),{warehouse_name:_0x5c310c,date:_0x3174d3,prod_name:_0x3c5e61,level:_0x52201b,isle:_0x2a4484,pallet:_0x1c0c83,stock:_0x3e90a8,types:_0x49a972,adjust_qty:_0x47f170,new_adjust_qty:_0x4b7992,note:_0x5299b9,Room_name:_0x49e0bc,invoice:_0x1421e1,JO_number:_0x498403,expiry_date:_0x521cb4}=_0x424f62[_0x390c88(0xfa)];if(typeof _0x3c5e61=='string')var _0x1596f5=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x16e)]],_0xccdede=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x17a)]],_0x1b71c7=[_0x424f62['body']['stock']],_0xe90314=[_0x424f62['body'][_0x390c88(0xf6)]],_0x42b17b=[_0x424f62[_0x390c88(0xfa)]['New_Qty_Converted_adj']],_0x16d6dd=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x17f)]],_0x5d37a5=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x132)]],_0x16c323=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x123)]],_0x4c1f0e=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x14d)]],_0x300c78=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x1bf)]],_0x17718c=[_0x424f62['body']['expiry_date']],_0x21285d=[_0x424f62[_0x390c88(0xfa)]['max_per_unit']],_0x1905b9=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x156)]],_0x53d859=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x19b)]],_0x214a13=[_0x424f62[_0x390c88(0xfa)]['Rooms']],_0x196eb5=[_0x424f62[_0x390c88(0xfa)][_0x390c88(0x199)]],_0x2ba2b1=[_0x424f62['body'][_0x390c88(0x182)]];else var _0x1596f5=[..._0x424f62[_0x390c88(0xfa)]['prod_name']],_0xccdede=[..._0x424f62['body'][_0x390c88(0x17a)]],_0x1b71c7=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0xf5)]],_0xe90314=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0xf6)]],_0x42b17b=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x113)]],_0x16d6dd=[..._0x424f62[_0x390c88(0xfa)]['New_Qty_Converted']],_0x5d37a5=[..._0x424f62['body'][_0x390c88(0x19c)]],_0x16c323=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x123)]],_0x4c1f0e=[..._0x424f62['body']['prod_code']],_0x300c78=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x1bf)]],_0x17718c=[..._0x424f62['body'][_0x390c88(0x116)]],_0x21285d=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x169)]],_0x1905b9=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x156)]],_0x53d859=[..._0x424f62[_0x390c88(0xfa)][_0x390c88(0x19b)]],_0x214a13=[..._0x424f62[_0x390c88(0xfa)]['Rooms']],_0x196eb5=[..._0x424f62[_0x390c88(0xfa)]['prime1']],_0x2ba2b1=[..._0x424f62[_0x390c88(0xfa)]['second1']];const _0x1bdd8c=_0x1596f5[_0x390c88(0x14e)](_0x3ff1e9=>{return _0x3ff1e9={'product_name':_0x3ff1e9};});_0xccdede['forEach']((_0x379c79,_0x4c7e52)=>{var _0xd6073a=_0x390c88;_0x214a13[_0xd6073a(0x1ba)]((_0x190d98,_0x2e0f7d)=>{var _0x1fc093=_0xd6073a;if(_0x190d98==_0x1fc093(0x1a6)&&_0x4c7e52==_0x2e0f7d){var _0x172bf0=_0x379c79[_0x1fc093(0x1b5)](0x3);_0x1bdd8c[_0x4c7e52][_0x1fc093(0x158)]=_0x379c79[0x0],_0x1bdd8c[_0x4c7e52][_0x1fc093(0x180)]=_0x379c79[0x1],_0x1bdd8c[_0x4c7e52]['bay']=0x0,_0x1bdd8c[_0x4c7e52][_0x1fc093(0xff)]=0x0,_0x1bdd8c[_0x4c7e52]['type']=_0x1fc093(0x18a),_0x1bdd8c[_0x4c7e52][_0x1fc093(0x106)]=_0x172bf0;}else{if(_0x190d98==_0x1fc093(0x18e)&&_0x4c7e52==_0x2e0f7d){var _0x172bf0=_0x379c79[_0x1fc093(0x1b5)](0x3);_0x1bdd8c[_0x4c7e52][_0x1fc093(0x158)]=_0x379c79[0x0],_0x1bdd8c[_0x4c7e52]['rack']=_0x379c79[0x1],_0x1bdd8c[_0x4c7e52]['bay']=0x0,_0x1bdd8c[_0x4c7e52][_0x1fc093(0xff)]=0x0,_0x1bdd8c[_0x4c7e52][_0x1fc093(0x11a)]='Floor',_0x1bdd8c[_0x4c7e52][_0x1fc093(0x106)]=_0x379c79[0x5];}else{if(_0x4c7e52==_0x2e0f7d){var _0x4c6e7c;if(_0x379c79[0x4]=='L')_0x4c6e7c=_0x1fc093(0x135);else _0x379c79[0x4]=='F'&&(_0x4c6e7c=_0x1fc093(0x18a));_0x1bdd8c[_0x4c7e52][_0x1fc093(0x158)]=_0x379c79[0x0],_0x1bdd8c[_0x4c7e52][_0x1fc093(0x180)]=_0x379c79[0x1],_0x1bdd8c[_0x4c7e52][_0x1fc093(0xed)]=_0x379c79[0x2],_0x1bdd8c[_0x4c7e52][_0x1fc093(0xff)]=_0x379c79[0x3],_0x1bdd8c[_0x4c7e52][_0x1fc093(0x11a)]=_0x4c6e7c,_0x1bdd8c[_0x4c7e52][_0x1fc093(0x106)]=_0x379c79[0x5];}}}});}),_0x1b71c7[_0x390c88(0x1ba)]((_0x133a92,_0x5b230a)=>{_0x1bdd8c[_0x5b230a]['stockBefore']=_0x133a92;}),_0xe90314['forEach']((_0x5d5697,_0x114a76)=>{var _0x10509f=_0x390c88;_0x1bdd8c[_0x114a76][_0x10509f(0xf6)]=_0x5d5697;}),_0x42b17b[_0x390c88(0x1ba)]((_0x2fc1ae,_0x28ebc4)=>{_0x1bdd8c[_0x28ebc4]['adjust_qty']=_0x2fc1ae;}),_0x16d6dd[_0x390c88(0x1ba)]((_0x502892,_0x9fc085)=>{_0x1bdd8c[_0x9fc085]['new_adjust_qty']=_0x502892;}),_0x5d37a5[_0x390c88(0x1ba)]((_0x4900ff,_0x1aabee)=>{_0x1bdd8c[_0x1aabee]['unit']=_0x4900ff;}),_0x16c323[_0x390c88(0x1ba)]((_0x3ccebe,_0x5e8bf5)=>{var _0x23b5a4=_0x390c88;_0x1bdd8c[_0x5e8bf5][_0x23b5a4(0xeb)]=_0x3ccebe;}),_0x4c1f0e[_0x390c88(0x1ba)]((_0x29932a,_0x25371f)=>{_0x1bdd8c[_0x25371f]['product_code']=_0x29932a;}),_0x300c78[_0x390c88(0x1ba)]((_0xfe9ea4,_0x261485)=>{var _0x35a579=_0x390c88;_0x1bdd8c[_0x261485][_0x35a579(0x1bf)]=_0xfe9ea4;}),_0x17718c['forEach']((_0x15596b,_0x2b830a)=>{_0x1bdd8c[_0x2b830a]['expiry_date']=_0x15596b;}),_0x21285d[_0x390c88(0x1ba)]((_0x31607f,_0x56003e)=>{var _0x26c50e=_0x390c88;_0x1bdd8c[_0x56003e][_0x26c50e(0x14f)]=_0x31607f;}),_0x1905b9[_0x390c88(0x1ba)]((_0x8c88dc,_0x3ea84e)=>{var _0x16e089=_0x390c88;_0x1bdd8c[_0x3ea84e][_0x16e089(0x156)]=_0x8c88dc;}),_0x53d859[_0x390c88(0x1ba)]((_0x1bec69,_0xf18251)=>{_0x1bdd8c[_0xf18251]['prod_cat']=_0x1bec69;}),_0x214a13[_0x390c88(0x1ba)]((_0x1a2c46,_0x2e1c76)=>{_0x1bdd8c[_0x2e1c76]['room_names']=_0x1a2c46;}),_0x196eb5[_0x390c88(0x1ba)]((_0x334b4f,_0x26d486)=>{var _0x492681=_0x390c88;_0x1bdd8c[_0x26d486][_0x492681(0x121)]=_0x334b4f;}),_0x2ba2b1[_0x390c88(0x1ba)]((_0x386c52,_0x4a2ad4)=>{var _0x364f03=_0x390c88;_0x1bdd8c[_0x4a2ad4][_0x364f03(0x1b9)]=_0x386c52;});const _0x40de88=_0x1bdd8c['filter'](_0x5f5c78=>_0x5f5c78[_0x390c88(0xf9)]!=='0'&&_0x5f5c78[_0x390c88(0xf9)]!=='');var _0x1a00ce=0x0;_0x40de88[_0x390c88(0x1ba)](_0x407b7b=>{var _0x34f2c8=_0x390c88;console[_0x34f2c8(0x118)](_0x34f2c8(0x138),_0x407b7b),parseInt(_0x407b7b['adjust_qty'])<=0x0&&_0x1a00ce++;});if(_0x1a00ce!=0x0)return _0x424f62[_0x390c88(0x136)](_0x390c88(0x165),_0x390c88(0x109)),_0x2b826d[_0x390c88(0x100)]('back');_0x4ab38b['warehouse_name']=_0x5c310c,_0x4ab38b['date']=_0x3174d3,_0x4ab38b[_0x390c88(0x115)]=_0x40de88,_0x4ab38b[_0x390c88(0x19d)]=_0x5299b9,_0x4ab38b['invoice']=_0x1421e1,_0x4ab38b[_0x390c88(0x187)]=_0x390c88(0x181);const _0x1ff894=await _0x4ab38b[_0x390c88(0x142)]();_0x424f62[_0x390c88(0x136)](_0x390c88(0x130),_0x390c88(0x198)),_0x2b826d[_0x390c88(0x100)](_0x390c88(0x12a));}catch(_0x40eb90){console[_0x390c88(0x118)](_0x40eb90);}}),router[a0_0x321b70(0x128)](a0_0x321b70(0x186),async(_0x1ce195,_0x345025)=>{var _0x420995=a0_0x321b70;const {primary_code:_0x2ea456,warehouse_data:_0x36cda4,rooms_data:_0x10dff1,Roomslist:_0x11c11b}=_0x1ce195[_0x420995(0xfa)],_0x578efe=_0x11c11b['split'](','),_0x450350=[];async function _0x328fc7(_0x1ca538){var _0x5e4df2=_0x420995;const _0x53b835=await warehouse[_0x5e4df2(0x105)]([{'$match':{'name':_0x36cda4,'room':_0x1ca538}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x2ea456}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5e4df2(0x1c1)},'product_stock':{'$first':_0x5e4df2(0x16a)},'primary_code':{'$first':_0x5e4df2(0x1af)},'secondary_code':{'$first':_0x5e4df2(0xea)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x5e4df2(0x147)},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x5e4df2(0x174)},'unit':{'$first':_0x5e4df2(0x102)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x5e4df2(0x15c)},'rack':{'$first':_0x5e4df2(0x18c)},'expiry_date':{'$first':_0x5e4df2(0x13e)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x5e4df2(0x1a4)},'batch_code':{'$first':_0x5e4df2(0x168)},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x5e4df2(0x189)}}}]),_0xb3745e=await warehouse[_0x5e4df2(0x105)]([{'$match':{'name':_0x36cda4,'room':_0x1ca538}},{'$unwind':_0x5e4df2(0x10d)},{'$match':{'product_details.secondary_code':_0x2ea456}},{'$group':{'_id':_0x5e4df2(0x173),'name':{'$first':_0x5e4df2(0x1c1)},'product_stock':{'$first':_0x5e4df2(0x16a)},'primary_code':{'$first':_0x5e4df2(0x1af)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5e4df2(0x110)},'level':{'$first':_0x5e4df2(0x147)},'isle':{'$first':_0x5e4df2(0xfd)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x5e4df2(0x174)},'unit':{'$first':_0x5e4df2(0x102)},'secondary_unit':{'$first':_0x5e4df2(0x111)},'storage':{'$first':_0x5e4df2(0x15c)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x5e4df2(0x13e)},'production_date':{'$first':_0x5e4df2(0xf0)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x5e4df2(0x168)},'product_cat':{'$first':_0x5e4df2(0x17e)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x53b835[_0x5e4df2(0xf1)]>0x0)_0x450350[_0x5e4df2(0x14a)](_0x53b835);else _0xb3745e[_0x5e4df2(0xf1)]>0x0&&_0x450350[_0x5e4df2(0x14a)](_0xb3745e);}const _0x4e2835=_0x578efe[_0x420995(0x14e)](_0x90a39=>_0x328fc7(_0x90a39));await Promise[_0x420995(0x162)](_0x4e2835),_0x345025[_0x420995(0x17b)](_0x450350);}),router[a0_0x321b70(0x128)](a0_0x321b70(0x117),async(_0x30b882,_0x4a76c6)=>{var _0x41a579=a0_0x321b70;const {primaryCode:_0x3ad182,secondaryCode:_0x306b88,productCode:_0x5dcfcf,level:_0x5893b9,isle:_0x541c1d,pallet:_0x3d9109,warehouses:_0x4a67aa,room:_0x1d9c4b}=_0x30b882[_0x41a579(0xfa)];try{const _0xb79727=await warehouse[_0x41a579(0x105)]([{'$match':{'name':_0x4a67aa,'room':_0x1d9c4b}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x5893b9),'product_details.isle':_0x541c1d,'product_details.pallet':parseInt(_0x3d9109)}},{'$group':{'_id':_0x41a579(0x173),'name':{'$first':_0x41a579(0x1c1)},'product_stock':{'$first':_0x41a579(0x16a)},'level':{'$first':_0x41a579(0x131)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x41a579(0x18b)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x4a76c6[_0x41a579(0x152)](0xc8)[_0x41a579(0x17b)](_0xb79727);}catch(_0xd72f4e){_0x4a76c6[_0x41a579(0x152)](0x194)[_0x41a579(0x17b)]({'message':_0xd72f4e[_0x41a579(0x139)]});}}),module[a0_0x321b70(0x16b)]=router;