function a0_0x11e2(){var _0x4b0093=['catch','Portuguese\x20(BR)','$product_details.product_name','second1','260436gQNBaJ','$product','production_date','product_code','flash','id_transaction_from','$product_details.maxPerUnit','<!DOCTYPE\x20html>','Rooms','$room','RMSEmail','type','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<h5\x20style=\x22text-align:\x20left;\x22>','</h5>','/../public','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Return\x20Goods','edit_adjustment','$product_details.batch_code','render','slice','redirect','password','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','map','filter','error','Floor','level','Router','$product_details.pallet','</body></html>','$product_details.bay','Hindi','<tr>','German','adjustment','adjustment\x20Finalized\x20successfully','$product_details.production_date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','<hr\x20class=\x22my-3\x22>','logo','$product_details.secondary_unit','$product_details.unit','maxPerUnit','_id','json','Return\x20Rooms','<div>','master','room_names','params','</span>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$product_details.rack','$date','stockBefore','product','all','find','log','$product_details.storage','unit','<tbody\x20style=\x22text-align:\x20center;\x22>','success','1851822pTMjKQ','createTransport','product_name','$product_details.bin','Error\x20Occurs','staff','../middleware/auth','edit_adjustment_view','French','</div>','user','/adjustment/preview/','$product.product_name','3530745lzhVFu','An\x20error\x20occurred.','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','nodemailer','batch_code','prod_cat','</tr>','$product_details.floorlevel','get','/view','warehouse_name','aggregate','invoice','316416OaKREo','/adjustment/view','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','floorlevel','Enabled','room','$product_details.type','$name','/view/add_adjustment','bay','random','status','Receiving\x20Area','adjustment\x20add\x20successfull','Ambient','$product_details.expiry_date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.level','date','add_adjustment','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','floor','Level','secondary_unit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','findOne','email','isAllowEdit','rack','express','finalize','role','/upload/','host','$product_details','secondary_code','note','../public/language/languages.json','string','$product_details._id','False','foreach\x20newproduct','port','max_per_unit','save','5679884ozbIjU','Portuguese','</head><body>','sendMail','Shelves','primary_code','body','message','then','$product_details.product_stock','storage','English\x20(US)','prime1','$warehouse_name','$product_details.primary_code','prod_code','Chinese','image','</thead>','post','minus','Arabic\x20(ae)','expiry_date','bin','</td>','$product_details.product_cat','findById','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','maxperunit','19157187ayrhtL','Primary_Units','Spanish','New_Qty_Converted_adj','language','adjust_qty','push','\x20</h2>','padStart','/view/:id','length','True','Arabic','Secondary_units','<span\x20style=\x22float:\x20right;\x22>','stock','\x20<>\x20','\x20Order\x20Date\x20:\x20','$product_details.isle','exports','$isAllowEdit','English','prod_name','New_Qty_Converted','new_adjust_qty','ADJ-','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$finalize','id_transaction','product_stock','$product_details.secondary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','product_details','$product_details.product_code','Raw\x20Materials','back','/CheckingWarehouse','warehouse','forEach','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','errors','site_title','types','830742NuRuSP','$product_details.maxProducts','toString'];a0_0x11e2=function(){return _0x4b0093;};return a0_0x11e2();}var a0_0xf7a779=a0_0xc26c;function a0_0xc26c(_0x4d6171,_0x2f859e){var _0x11e2ae=a0_0x11e2();return a0_0xc26c=function(_0xc26cb7,_0x271318){_0xc26cb7=_0xc26cb7-0x69;var _0x36e200=_0x11e2ae[_0xc26cb7];return _0x36e200;},a0_0xc26c(_0x4d6171,_0x2f859e);}(function(_0x11a5a5,_0x22e573){var _0x2e342e=a0_0xc26c,_0x681c07=_0x11a5a5();while(!![]){try{var _0x3fc9b9=-parseInt(_0x2e342e(0x119))/0x1+parseInt(_0x2e342e(0x8a))/0x2+parseInt(_0x2e342e(0xa4))/0x3+-parseInt(_0x2e342e(0xd1))/0x4+-parseInt(_0x2e342e(0x97))/0x5+parseInt(_0x2e342e(0x120))/0x6+parseInt(_0x2e342e(0xee))/0x7;if(_0x3fc9b9===_0x22e573)break;else _0x681c07['push'](_0x681c07['shift']());}catch(_0x2fcb57){_0x681c07['push'](_0x681c07['shift']());}}}(a0_0x11e2,0xd0a8c));const express=require(a0_0xf7a779(0xc1)),app=express(),router=express[a0_0xf7a779(0x13e)](),auth=require(a0_0xf7a779(0x90)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require('../models/all_models'),users=require(a0_0xf7a779(0xc9)),nodemailer=require(a0_0xf7a779(0x9a));router[a0_0xf7a779(0x9f)](a0_0xf7a779(0xa0),auth,async(_0x433e0b,_0x35bc3c)=>{var _0x1bf963=a0_0xf7a779;try{const {username:_0x457605,email:_0x3fc670,role:_0x53fcf2}=_0x433e0b[_0x1bf963(0x94)],_0x595615=_0x433e0b[_0x1bf963(0x94)],_0x3636df=await profile[_0x1bf963(0xbd)]({'email':_0x595615[_0x1bf963(0xbe)]}),_0x4dc618=await master_shop[_0x1bf963(0x84)]();console[_0x1bf963(0x85)](_0x1bf963(0x7a),_0x4dc618);let _0x41e9c2;if(_0x595615['role']==_0x1bf963(0x8f)){const _0x415e55=await staff[_0x1bf963(0xbd)]({'email':_0x595615['email']});_0x41e9c2=await warehouse['find']({'status':_0x1bf963(0xa8),'name':_0x415e55[_0x1bf963(0x113)]});}else _0x41e9c2=await warehouse[_0x1bf963(0x84)]({'status':_0x1bf963(0xa8)});const _0x5a32f0=await product[_0x1bf963(0x84)]();let _0x3995aa;if(_0x595615[_0x1bf963(0xc3)]==_0x1bf963(0x8f)){const _0xf32aa8=await staff['findOne']({'email':_0x595615[_0x1bf963(0xbe)]});_0x3995aa=await adjustment[_0x1bf963(0x84)]({'warehouse_name':_0xf32aa8[_0x1bf963(0x113)]});}else _0x3995aa=await adjustment[_0x1bf963(0xa2)]([{'$unwind':'$product'},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':_0x1bf963(0x80)},'warehouse_name':{'$first':_0x1bf963(0xde)},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':_0x1bf963(0x109)},'isAllowEdit':{'$first':_0x1bf963(0x102)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x4dc618[0x0]['language']=='English\x20(US)'){var _0x5b1413=users[_0x1bf963(0x103)];console[_0x1bf963(0x85)](_0x5b1413);}else{if(_0x4dc618[0x0][_0x1bf963(0xf2)]==_0x1bf963(0x6a))var _0x5b1413=users['Hindi'];else{if(_0x4dc618[0x0][_0x1bf963(0xf2)]==_0x1bf963(0x6c))var _0x5b1413=users[_0x1bf963(0x6c)];else{if(_0x4dc618[0x0]['language']==_0x1bf963(0xf0))var _0x5b1413=users[_0x1bf963(0xf0)];else{if(_0x4dc618[0x0]['language']==_0x1bf963(0x92))var _0x5b1413=users['French'];else{if(_0x4dc618[0x0][_0x1bf963(0xf2)]==_0x1bf963(0x11d))var _0x5b1413=users[_0x1bf963(0xd2)];else{if(_0x4dc618[0x0][_0x1bf963(0xf2)]=='Chinese')var _0x5b1413=users['Chinese'];else{if(_0x4dc618[0x0][_0x1bf963(0xf2)]==_0x1bf963(0xe6))var _0x5b1413=users[_0x1bf963(0xfa)];}}}}}}}_0x35bc3c[_0x1bf963(0x134)](_0x1bf963(0x6d),{'success':_0x433e0b[_0x1bf963(0x124)](_0x1bf963(0x89)),'errors':_0x433e0b[_0x1bf963(0x124)](_0x1bf963(0x116)),'role':_0x595615,'profile':_0x3636df,'warehouse':_0x41e9c2,'product':_0x5a32f0,'adjustment':_0x3995aa,'master_shop':_0x4dc618,'language':_0x5b1413});}catch(_0x2ec7ed){console[_0x1bf963(0x85)](_0x2ec7ed);}});async function getRandom8DigitNumber(){var _0x13fca4=a0_0xf7a779;const _0x12dc87=0x989680,_0x3a22c8=0x5f5e0ff,_0x5932ad=Math[_0x13fca4(0xb9)](Math[_0x13fca4(0xae)]()*(_0x3a22c8-_0x12dc87+0x1))+_0x12dc87;var _0x32f018;const _0x61cf0=await adjustment[_0x13fca4(0xbd)]({'invoice':_0x13fca4(0x107)+_0x5932ad});return _0x61cf0&&_0x61cf0[_0x13fca4(0xf8)]>0x0?_0x32f018='ADJ-'+_0x5932ad:_0x32f018='ADJ-'+_0x5932ad,_0x32f018;}router[a0_0xf7a779(0x9f)](a0_0xf7a779(0xac),auth,async(_0x3c5a95,_0x5725aa)=>{var _0x2c7361=a0_0xf7a779;try{const {username:_0x106c1b,email:_0xd28084,role:_0xba5a36}=_0x3c5a95[_0x2c7361(0x94)],_0x3e472b=_0x3c5a95['user'],_0x4dd7ea=await profile[_0x2c7361(0xbd)]({'email':_0x3e472b[_0x2c7361(0xbe)]}),_0x12239a=await master_shop[_0x2c7361(0x84)]();let _0x1114f0;if(_0x3e472b[_0x2c7361(0xc3)]==_0x2c7361(0x8f)){const _0x445cc5=await staff['findOne']({'email':_0x3e472b[_0x2c7361(0xbe)]});_0x1114f0=await warehouse[_0x2c7361(0xa2)]([{'$match':{'status':_0x2c7361(0xa8),'name':_0x445cc5[_0x2c7361(0x113)],'warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x2c7361(0xab),'name':{'$first':_0x2c7361(0xab)}}}]);}else _0x1114f0=await warehouse[_0x2c7361(0xa2)]([{'$match':{'status':'Enabled','warehouse_category':_0x2c7361(0x110),'name':{'$ne':_0x2c7361(0x131)}}},{'$group':{'_id':_0x2c7361(0xab),'name':{'$first':_0x2c7361(0xab)}}}]);const _0x21614e=await product[_0x2c7361(0x84)]({}),_0x37172a=await adjustment[_0x2c7361(0x84)]({}),_0x57029b=_0x37172a[_0x2c7361(0xf8)]+0x1,_0x2002d1=_0x2c7361(0x107)+_0x57029b[_0x2c7361(0x11b)]()[_0x2c7361(0xf6)](0x5,'0');var _0x34b01d=[_0x2c7361(0xb2),'Enclosed',_0x2c7361(0x78)];if(_0x12239a[0x0][_0x2c7361(0xf2)]=='English\x20(US)')var _0x407d9e=users[_0x2c7361(0x103)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0x6a))var _0x407d9e=users[_0x2c7361(0x6a)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0x6c))var _0x407d9e=users[_0x2c7361(0x6c)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0xf0))var _0x407d9e=users[_0x2c7361(0xf0)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0x92))var _0x407d9e=users[_0x2c7361(0x92)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]=='Portuguese\x20(BR)')var _0x407d9e=users[_0x2c7361(0xd2)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0xe1))var _0x407d9e=users[_0x2c7361(0xe1)];else{if(_0x12239a[0x0][_0x2c7361(0xf2)]==_0x2c7361(0xe6))var _0x407d9e=users['Arabic'];}}}}}}}const _0x3d5c78=getRandom8DigitNumber();_0x3d5c78[_0x2c7361(0xd9)](_0x2069a0=>{var _0x461f2d=_0x2c7361;_0x5725aa['render'](_0x461f2d(0xb7),{'success':_0x3c5a95['flash'](_0x461f2d(0x89)),'errors':_0x3c5a95['flash'](_0x461f2d(0x116)),'role':_0x3e472b,'profile':_0x4dd7ea,'warehouse':_0x1114f0,'product':_0x21614e,'master_shop':_0x12239a,'language':_0x407d9e,'rooms_data':_0x34b01d,'invoice_no':_0x2069a0});})[_0x2c7361(0x11c)](_0xb4f080=>{var _0x634aa5=_0x2c7361;_0x3c5a95[_0x634aa5(0x124)](_0x634aa5(0x116),_0x634aa5(0x108)),_0x5725aa[_0x634aa5(0x136)](_0x634aa5(0xa5));});}catch(_0x326c11){console[_0x2c7361(0x85)](_0x326c11);}}),router[a0_0xf7a779(0xe4)]('/view/add_adjustment',auth,async(_0x1994cc,_0x3955df)=>{var _0x1819ab=a0_0xf7a779;try{const {warehouse_name:_0xfe8496,date:_0x15c207,prod_name:_0x219911,level:_0x2fddc7,isle:_0x2c98c6,pallet:_0x3262df,stock:_0x2b42d7,types:_0x31abc9,adjust_qty:_0x1f7f8e,new_adjust_qty:_0x3a6420,note:_0x4c065c,Room_name:_0x15d368,invoice:_0x588066,JO_number:_0x36246b,expiry_date:_0x32ee28}=_0x1994cc[_0x1819ab(0xd7)];if(typeof _0x219911==_0x1819ab(0xca))var _0x514530=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x104)]],_0x2e3345=[_0x1994cc[_0x1819ab(0xd7)]['level']],_0x29a6f1=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xfd)]],_0xf05bd9=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x118)]],_0x11a783=[_0x1994cc['body'][_0x1819ab(0xf1)]],_0x2a930f=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x105)]],_0x307db3=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xef)]],_0x3215b3=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xfb)]],_0x3f5a35=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xe0)]],_0x27d8f6=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x9b)]],_0x2a2c62=[_0x1994cc[_0x1819ab(0xd7)]['expiry_date']],_0x4b33c3=[_0x1994cc['body']['max_per_unit']],_0x14c623=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x122)]],_0x20b82c=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x9c)]],_0x5400cf=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x128)]],_0x26e7e8=[_0x1994cc[_0x1819ab(0xd7)]['prime1']],_0x5b2ed1=[_0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x11f)]],_0x1592dd=[_0x1994cc['body']['prod_invoice']],_0x134a07=[_0x1994cc[_0x1819ab(0xd7)]['id_transaction']];else var _0x514530=[..._0x1994cc[_0x1819ab(0xd7)]['prod_name']],_0x2e3345=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x13d)]],_0x29a6f1=[..._0x1994cc['body'][_0x1819ab(0xfd)]],_0xf05bd9=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x118)]],_0x11a783=[..._0x1994cc[_0x1819ab(0xd7)]['New_Qty_Converted_adj']],_0x2a930f=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x105)]],_0x307db3=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x87)]],_0x3215b3=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xfb)]],_0x3f5a35=[..._0x1994cc['body'][_0x1819ab(0xe0)]],_0x27d8f6=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x9b)]],_0x2a2c62=[..._0x1994cc[_0x1819ab(0xd7)]['expiry_date']],_0x4b33c3=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0xcf)]],_0x14c623=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x122)]],_0x20b82c=[..._0x1994cc['body'][_0x1819ab(0x9c)]],_0x5400cf=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x128)]],_0x26e7e8=[..._0x1994cc['body'][_0x1819ab(0xdd)]],_0x5b2ed1=[..._0x1994cc[_0x1819ab(0xd7)][_0x1819ab(0x11f)]],_0x1592dd=[..._0x1994cc[_0x1819ab(0xd7)]['prod_invoice']],_0x134a07=[..._0x1994cc['body'][_0x1819ab(0x10a)]];const _0x121939=_0x514530[_0x1819ab(0x139)](_0x3ca235=>{return _0x3ca235={'product_name':_0x3ca235};});_0x2e3345[_0x1819ab(0x114)]((_0x48ab47,_0x5ca65b)=>{var _0x50ad58=_0x1819ab;_0x5400cf[_0x50ad58(0x114)]((_0x1815e9,_0x2863da)=>{var _0x4d2745=_0x50ad58;if(_0x1815e9==_0x4d2745(0xb0)&&_0x5ca65b==_0x2863da){var _0xbfdaf=_0x48ab47[_0x4d2745(0x135)](0x3);_0x121939[_0x5ca65b][_0x4d2745(0xdb)]=_0x48ab47[0x0],_0x121939[_0x5ca65b][_0x4d2745(0xc0)]=_0x48ab47[0x1],_0x121939[_0x5ca65b][_0x4d2745(0xad)]=0x0,_0x121939[_0x5ca65b][_0x4d2745(0xe8)]=0x0,_0x121939[_0x5ca65b][_0x4d2745(0x12b)]='Floor',_0x121939[_0x5ca65b][_0x4d2745(0xa7)]=_0xbfdaf;}else{if(_0x1815e9==_0x4d2745(0xd5)&&_0x5ca65b==_0x2863da){var _0xbfdaf=_0x48ab47['slice'](0x3);_0x121939[_0x5ca65b]['storage']=_0x48ab47[0x0],_0x121939[_0x5ca65b][_0x4d2745(0xc0)]=_0x48ab47[0x1],_0x121939[_0x5ca65b][_0x4d2745(0xad)]=0x0,_0x121939[_0x5ca65b]['bin']=0x0,_0x121939[_0x5ca65b][_0x4d2745(0x12b)]=_0x4d2745(0x13c),_0x121939[_0x5ca65b][_0x4d2745(0xa7)]=_0x48ab47[0x5];}else{if(_0x5ca65b==_0x2863da){var _0x42b574;if(_0x48ab47[0x4]=='L')_0x42b574=_0x4d2745(0xba);else _0x48ab47[0x4]=='F'&&(_0x42b574=_0x4d2745(0x13c));_0x121939[_0x5ca65b]['storage']=_0x48ab47[0x0],_0x121939[_0x5ca65b][_0x4d2745(0xc0)]=_0x48ab47[0x1],_0x121939[_0x5ca65b]['bay']=_0x48ab47[0x2],_0x121939[_0x5ca65b]['bin']=_0x48ab47[0x3],_0x121939[_0x5ca65b][_0x4d2745(0x12b)]=_0x42b574,_0x121939[_0x5ca65b][_0x4d2745(0xa7)]=_0x48ab47[0x5];}}}});}),_0x29a6f1[_0x1819ab(0x114)]((_0x3a6fa5,_0x271530)=>{var _0x532b28=_0x1819ab;_0x121939[_0x271530][_0x532b28(0x81)]=_0x3a6fa5;}),_0x134a07[_0x1819ab(0x114)]((_0x329d44,_0x263ccd)=>{var _0x5ccc78=_0x1819ab;_0x121939[_0x263ccd][_0x5ccc78(0x125)]=_0x329d44;}),_0xf05bd9[_0x1819ab(0x114)]((_0x53be55,_0x3d0abd)=>{var _0x112a04=_0x1819ab;_0x121939[_0x3d0abd][_0x112a04(0x118)]=_0x53be55;}),_0x11a783[_0x1819ab(0x114)]((_0x202533,_0x36a889)=>{var _0x5099ac=_0x1819ab;_0x121939[_0x36a889][_0x5099ac(0xf3)]=_0x202533;}),_0x2a930f[_0x1819ab(0x114)]((_0x2c7b5c,_0xf33b62)=>{var _0x53a967=_0x1819ab;_0x121939[_0xf33b62][_0x53a967(0x106)]=_0x2c7b5c;}),_0x307db3[_0x1819ab(0x114)]((_0x2e9fe2,_0x35e838)=>{var _0x5606ce=_0x1819ab;_0x121939[_0x35e838][_0x5606ce(0x87)]=_0x2e9fe2;}),_0x3215b3[_0x1819ab(0x114)]((_0x3b7340,_0x248c52)=>{var _0x123318=_0x1819ab;_0x121939[_0x248c52][_0x123318(0xbb)]=_0x3b7340;}),_0x3f5a35[_0x1819ab(0x114)]((_0x5b7456,_0xa388de)=>{_0x121939[_0xa388de]['product_code']=_0x5b7456;}),_0x27d8f6['forEach']((_0x258fde,_0x5e51a8)=>{var _0x1ba8b8=_0x1819ab;_0x121939[_0x5e51a8][_0x1ba8b8(0x9b)]=_0x258fde;}),_0x2a2c62[_0x1819ab(0x114)]((_0x1e2bb1,_0x596c34)=>{var _0x395b4a=_0x1819ab;_0x121939[_0x596c34][_0x395b4a(0xe7)]=_0x1e2bb1;}),_0x4b33c3[_0x1819ab(0x114)]((_0x58bb66,_0x28713d)=>{var _0x22e01f=_0x1819ab;_0x121939[_0x28713d][_0x22e01f(0xed)]=_0x58bb66;}),_0x14c623[_0x1819ab(0x114)]((_0x4021bc,_0x12b24f)=>{_0x121939[_0x12b24f]['production_date']=_0x4021bc;}),_0x20b82c[_0x1819ab(0x114)]((_0xae2c14,_0x1464a0)=>{var _0x555234=_0x1819ab;_0x121939[_0x1464a0][_0x555234(0x9c)]=_0xae2c14;}),_0x5400cf[_0x1819ab(0x114)]((_0x483b57,_0x4063a4)=>{var _0x3784dd=_0x1819ab;_0x121939[_0x4063a4][_0x3784dd(0x7b)]=_0x483b57;}),_0x26e7e8[_0x1819ab(0x114)]((_0x427e43,_0x4f720d)=>{var _0x495dee=_0x1819ab;_0x121939[_0x4f720d][_0x495dee(0xd6)]=_0x427e43;}),_0x5b2ed1[_0x1819ab(0x114)]((_0x452a4b,_0x3bedc7)=>{var _0x3bbd77=_0x1819ab;_0x121939[_0x3bedc7][_0x3bbd77(0xc7)]=_0x452a4b;}),_0x1592dd['forEach']((_0x1d0b78,_0x4ced2b)=>{var _0x17cc61=_0x1819ab;_0x121939[_0x4ced2b][_0x17cc61(0xa3)]=_0x1d0b78;});const _0x27facc=_0x121939[_0x1819ab(0x13a)](_0x807243=>_0x807243[_0x1819ab(0xf3)]!=='0'&&_0x807243[_0x1819ab(0xf3)]!=='');var _0x3edc55=0x0;_0x27facc[_0x1819ab(0x114)](_0x4e5060=>{var _0x54a35c=_0x1819ab;console['log'](_0x54a35c(0xcd),_0x4e5060),parseInt(_0x4e5060[_0x54a35c(0xf3)])<=0x0&&_0x3edc55++;});if(_0x3edc55!=0x0)return _0x1994cc[_0x1819ab(0x124)](_0x1819ab(0x116),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x3955df[_0x1819ab(0x136)]('back');const _0x504996=new adjustment({'warehouse_name':_0xfe8496,'date':_0x15c207,'product':_0x27facc,'note':_0x4c065c,'room':_0x15d368,'invoice':_0x588066,'JO_number':_0x36246b,'expiry_date':_0x32ee28}),_0x33b76e=await _0x504996[_0x1819ab(0xd0)]();_0x1994cc[_0x1819ab(0x124)]('success',_0x1819ab(0xb1)),_0x3955df['redirect'](_0x1819ab(0x95)+_0x33b76e['_id']);}catch(_0x1268ea){console[_0x1819ab(0x85)](_0x1268ea),_0x3955df[_0x1819ab(0xaf)](0xc8)['json']({'message':_0x1268ea[_0x1819ab(0xd8)]});}}),router['get']('/preview/:id',auth,async(_0x5c4d49,_0x1152eb)=>{var _0x3b7d91=a0_0xf7a779;try{const {username:_0x45197c,email:_0x4bc8ce,role:_0x57ac4b}=_0x5c4d49['user'],_0x360bd1=_0x5c4d49[_0x3b7d91(0x94)],_0x10a5dd=await profile['findOne']({'email':_0x360bd1[_0x3b7d91(0xbe)]}),_0x86ef5c=await master_shop['find'](),_0x55e0d5=_0x5c4d49[_0x3b7d91(0x7c)]['id'],_0x2782d9=await adjustment[_0x3b7d91(0xeb)]({'_id':_0x55e0d5}),_0x4a0a7a=await purchases[_0x3b7d91(0xa2)]([{'$match':{'warehouse_name':_0x2782d9[_0x3b7d91(0xa1)]}},{'$unwind':'$product'},{'$group':{'_id':_0x3b7d91(0x96)}}]),_0x478a9b=await product[_0x3b7d91(0x84)]({}),_0x36cf5f=await warehouse[_0x3b7d91(0xa2)]([{'$match':{'name':_0x2782d9[_0x3b7d91(0xa1)]}},{'$unwind':_0x3b7d91(0xc6)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3b7d91(0x11e)},'product_stock':{'$first':_0x3b7d91(0xda)},'bay':{'$first':_0x3b7d91(0x69)},'bin':{'$first':_0x3b7d91(0x8d)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3b7d91(0x10f)},'storage':{'$first':_0x3b7d91(0x86)},'rack':{'$first':'$product_details.rack'},'maxPerUnit':{'$first':_0x3b7d91(0x126)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x3b7d91(0x6f)},'batch_code':{'$first':_0x3b7d91(0x133)},'room':{'$first':_0x3b7d91(0x129)}}}]);if(_0x86ef5c[0x0]['language']==_0x3b7d91(0xdc)){var _0xda788b=users[_0x3b7d91(0x103)];console[_0x3b7d91(0x85)](_0xda788b);}else{if(_0x86ef5c[0x0][_0x3b7d91(0xf2)]==_0x3b7d91(0x6a))var _0xda788b=users['Hindi'];else{if(_0x86ef5c[0x0]['language']==_0x3b7d91(0x6c))var _0xda788b=users['German'];else{if(_0x86ef5c[0x0][_0x3b7d91(0xf2)]==_0x3b7d91(0xf0))var _0xda788b=users[_0x3b7d91(0xf0)];else{if(_0x86ef5c[0x0]['language']==_0x3b7d91(0x92))var _0xda788b=users[_0x3b7d91(0x92)];else{if(_0x86ef5c[0x0][_0x3b7d91(0xf2)]==_0x3b7d91(0x11d))var _0xda788b=users[_0x3b7d91(0xd2)];else{if(_0x86ef5c[0x0]['language']==_0x3b7d91(0xe1))var _0xda788b=users[_0x3b7d91(0xe1)];else{if(_0x86ef5c[0x0][_0x3b7d91(0xf2)]==_0x3b7d91(0xe6))var _0xda788b=users[_0x3b7d91(0xfa)];}}}}}}}_0x1152eb['render'](_0x3b7d91(0x91),{'success':_0x5c4d49[_0x3b7d91(0x124)](_0x3b7d91(0x89)),'errors':_0x5c4d49[_0x3b7d91(0x124)]('errors'),'role':_0x360bd1,'profile':_0x10a5dd,'adjustment':_0x2782d9,'stock':_0x36cf5f,'master_shop':_0x86ef5c,'warehouse_name':_0x4a0a7a,'unit':_0x478a9b,'language':_0xda788b});}catch(_0x13b1fb){console['log'](_0x13b1fb),_0x1152eb[_0x3b7d91(0xaf)](0xc8)[_0x3b7d91(0x77)]({'message':_0x13b1fb[_0x3b7d91(0xd8)]});}}),router['post']('/preview/:id',auth,async(_0x2e0417,_0xbcfabd)=>{var _0x3feab4=a0_0xf7a779;try{const _0x5d48b7=_0x2e0417[_0x3feab4(0x7c)]['id'],{warehouse_name:_0x86baf9,Room_name:_0x332e10}=_0x2e0417[_0x3feab4(0xd7)],_0x3a738a=await adjustment[_0x3feab4(0xeb)]({'_id':_0x5d48b7}),_0x31ee2d=_0x3a738a[_0x3feab4(0x82)][_0x3feab4(0x139)](async _0x2e20a5=>{var _0x1fac9e=_0x3feab4;if(_0x2e20a5['adjust_qty']>0x0){var _0xb9a340=await warehouse[_0x1fac9e(0xbd)]({'name':_0x86baf9,'room':_0x2e20a5['room_names'],'warehouse_category':_0x1fac9e(0x110)});const _0xd57f37=_0xb9a340[_0x1fac9e(0x10e)][_0x1fac9e(0x139)](_0x54f17f=>{var _0x145acd=_0x1fac9e;if(_0x2e20a5['type']==_0x145acd(0xe5)){if(_0x54f17f['product_name']==_0x2e20a5[_0x145acd(0x8c)]&&_0x54f17f[_0x145acd(0xa7)]==_0x2e20a5['floorlevel']&&_0x54f17f['type']==_0x2e20a5[_0x145acd(0x12b)]&&_0x54f17f[_0x145acd(0xe8)]==_0x2e20a5[_0x145acd(0xe8)]&&_0x54f17f[_0x145acd(0xad)]==_0x2e20a5[_0x145acd(0xad)]&&_0x54f17f[_0x145acd(0xc0)]==_0x2e20a5[_0x145acd(0xc0)]&&_0x54f17f[_0x145acd(0xdb)]==_0x2e20a5[_0x145acd(0xdb)]&&_0x54f17f[_0x145acd(0xe7)]==_0x2e20a5['expiry_date']&&_0x54f17f['batch_code']==_0x2e20a5['batch_code']&&_0x54f17f[_0x145acd(0x122)]==_0x2e20a5[_0x145acd(0x122)]&&_0x54f17f[_0x145acd(0xa3)]==_0x2e20a5[_0x145acd(0xa3)]&&_0x54f17f[_0x145acd(0x76)]==_0x2e20a5[_0x145acd(0x125)]){var _0x19ebf2;_0x19ebf2=_0x2e20a5[_0x145acd(0xf3)],_0x2e20a5[_0x145acd(0x9c)]=='S'&&(_0x19ebf2=_0x2e20a5[_0x145acd(0xf3)]),_0x54f17f['product_stock']=_0x54f17f[_0x145acd(0x10b)]-_0x19ebf2;}}else{if(_0x54f17f[_0x145acd(0x8c)]==_0x2e20a5[_0x145acd(0x8c)]&&_0x54f17f[_0x145acd(0xa7)]==_0x2e20a5[_0x145acd(0xa7)]&&_0x54f17f[_0x145acd(0x12b)]==_0x2e20a5[_0x145acd(0x12b)]&&_0x54f17f['bin']==_0x2e20a5[_0x145acd(0xe8)]&&_0x54f17f[_0x145acd(0xad)]==_0x2e20a5[_0x145acd(0xad)]&&_0x54f17f[_0x145acd(0xc0)]==_0x2e20a5[_0x145acd(0xc0)]&&_0x54f17f[_0x145acd(0xdb)]==_0x2e20a5[_0x145acd(0xdb)]&&_0x54f17f[_0x145acd(0xe7)]==_0x2e20a5[_0x145acd(0xe7)]&&_0x54f17f[_0x145acd(0x9b)]==_0x2e20a5[_0x145acd(0x9b)]&&_0x54f17f[_0x145acd(0x122)]==_0x2e20a5[_0x145acd(0x122)]&&_0x54f17f['invoice']==_0x2e20a5[_0x145acd(0xa3)]&&_0x54f17f[_0x145acd(0x76)]==_0x2e20a5[_0x145acd(0x125)]){console['log'](_0x2e20a5);var _0x19ebf2;_0x19ebf2=_0x2e20a5[_0x145acd(0xf3)],_0x2e20a5[_0x145acd(0x9c)]=='S'&&(_0x19ebf2=_0x2e20a5[_0x145acd(0xf3)]),console['log'](_0x19ebf2+_0x145acd(0xfe)+_0x2e20a5[_0x145acd(0xf3)]+'\x20<>\x20'+_0x54f17f[_0x145acd(0x75)]+_0x145acd(0xfe)+_0x2e20a5[_0x145acd(0x9c)]),_0x54f17f['product_stock']=_0x54f17f['product_stock']+_0x19ebf2;}}});}return _0xb9a340;});Promise[_0x3feab4(0x83)](_0x31ee2d)[_0x3feab4(0xd9)](async _0x501115=>{var _0x2180b7=_0x3feab4;try{for(const _0x470d40 of _0x501115){await _0x470d40[_0x2180b7(0xd0)]();}_0x3a738a[_0x2180b7(0xc2)]=_0x2180b7(0xf9);const _0x109f60=await _0x3a738a[_0x2180b7(0xd0)](),_0x3d8d4a=await master_shop[_0x2180b7(0x84)](),_0x3278db=await email_settings[_0x2180b7(0xbd)](),_0x2877d0=await supervisor_settings[_0x2180b7(0x84)]();var _0x1964e5=_0x3a738a[_0x2180b7(0x82)],_0x487c35='',_0x2c38ad;for(_0x2c38ad in _0x1964e5){_0x487c35+='<tr>'+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad][_0x2180b7(0x8c)]+_0x2180b7(0xe9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1964e5[_0x2c38ad][_0x2180b7(0x123)]+_0x2180b7(0xe9)+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad][_0x2180b7(0xf3)]+_0x2180b7(0xe9)+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad][_0x2180b7(0x87)]+_0x2180b7(0xe9)+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad]['secondary_unit']+_0x2180b7(0xe9)+_0x2180b7(0xa6)+_0x3a738a['warehouse_name']+_0x2180b7(0xe9)+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad]['room_names']+'</td>'+_0x2180b7(0xa6)+_0x1964e5[_0x2c38ad][_0x2180b7(0xdb)]+_0x1964e5[_0x2c38ad][_0x2180b7(0xc0)]+_0x1964e5[_0x2c38ad][_0x2180b7(0xad)]+_0x1964e5[_0x2c38ad]['bin']+_0x1964e5[_0x2c38ad][_0x2180b7(0x12b)][0x0]+_0x1964e5[_0x2c38ad][_0x2180b7(0xa7)]+'</td>',_0x2180b7(0x9d);}let _0x2be331=nodemailer[_0x2180b7(0x8b)]({'host':_0x3278db[_0x2180b7(0xc5)],'port':Number(_0x3278db[_0x2180b7(0xce)]),'secure':![],'auth':{'user':_0x3278db[_0x2180b7(0xbe)],'pass':_0x3278db[_0x2180b7(0x137)]}}),_0x19ac99={'from':_0x3278db[_0x2180b7(0xbe)],'to':_0x2877d0[0x0][_0x2180b7(0x12a)],'subject':'Adjustment\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+_0x2180b7(0x12f)+_0x2180b7(0xc4)+_0x3d8d4a[0x0][_0x2180b7(0xe2)],'cid':_0x2180b7(0x72)}],'html':_0x2180b7(0x127)+'<html><head><title></title>'+_0x2180b7(0xd3)+_0x2180b7(0x79)+_0x2180b7(0x138)+_0x2180b7(0x79)+_0x2180b7(0x130)+'</div>'+_0x2180b7(0x79)+'<h2>\x20'+_0x3d8d4a[0x0][_0x2180b7(0x117)]+_0x2180b7(0xf5)+_0x2180b7(0x93)+_0x2180b7(0x93)+_0x2180b7(0x71)+_0x2180b7(0x79)+_0x2180b7(0x12d)+'\x20Order\x20Number\x20:\x20'+_0x3a738a[_0x2180b7(0xa3)]+'\x20'+_0x2180b7(0xfc)+_0x2180b7(0xff)+_0x3a738a[_0x2180b7(0xb6)]+'\x20'+_0x2180b7(0x7d)+_0x2180b7(0x12e)+_0x2180b7(0x93)+_0x2180b7(0x12c)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2180b7(0x6b)+_0x2180b7(0xb8)+_0x2180b7(0x99)+_0x2180b7(0xec)+_0x2180b7(0x7e)+_0x2180b7(0x70)+_0x2180b7(0x10d)+_0x2180b7(0xb4)+_0x2180b7(0xbc)+_0x2180b7(0x9d)+_0x2180b7(0xe3)+_0x2180b7(0x88)+'\x20'+_0x487c35+'\x20'+'</tbody>'+'</table>'+'<div>'+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x3d8d4a[0x0][_0x2180b7(0x117)]+'</h5>'+'</div>'+_0x2180b7(0x93)+_0x2180b7(0x140)};_0x2be331[_0x2180b7(0xd4)](_0x19ac99,function(_0x15bc70,_0x4b46be){var _0x180f0b=_0x2180b7;_0x15bc70?(console[_0x180f0b(0x85)](_0x15bc70),console[_0x180f0b(0x85)](_0x180f0b(0x8e))):console[_0x180f0b(0x85)]('Email\x20sent\x20successfully');}),_0x2e0417['flash']('success',_0x2180b7(0x6e)),_0xbcfabd[_0x2180b7(0x136)]('/picking_list/PDF_adjustment_rm/'+_0x109f60['_id']);}catch(_0x14d990){console[_0x2180b7(0x13b)](_0x14d990),_0xbcfabd['status'](0x1f4)[_0x2180b7(0x77)]({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})['catch'](_0x3d3b73=>{var _0x191c12=_0x3feab4;console[_0x191c12(0x13b)](_0x3d3b73),_0xbcfabd[_0x191c12(0xaf)](0x1f4)[_0x191c12(0x77)]({'error':_0x191c12(0x98)});});}catch(_0x581d4b){console[_0x3feab4(0x85)](_0x581d4b),_0xbcfabd['status'](0xc8)['json']({'message':_0x581d4b['message']});}}),router[a0_0xf7a779(0x9f)](a0_0xf7a779(0xf7),auth,async(_0xbb6ff0,_0x501123)=>{var _0x328c1c=a0_0xf7a779;try{const {username:_0x1e3aee,email:_0x5b4e83,role:_0x56c35c}=_0xbb6ff0[_0x328c1c(0x94)],_0x4a9215=_0xbb6ff0[_0x328c1c(0x94)],_0x54fc03=await profile[_0x328c1c(0xbd)]({'email':_0x4a9215[_0x328c1c(0xbe)]}),_0x4e8075=await master_shop[_0x328c1c(0x84)](),_0x91acdf=_0xbb6ff0[_0x328c1c(0x7c)]['id'],_0x2ce16e=await adjustment[_0x328c1c(0xeb)]({'_id':_0x91acdf}),_0xcd3b0d=await purchases[_0x328c1c(0xa2)]([{'$match':{'warehouse_name':_0x2ce16e['warehouse_name']}},{'$unwind':_0x328c1c(0x121)},{'$group':{'_id':_0x328c1c(0x96)}}]),_0x127561=await product['find']({}),_0x36b7ff=await warehouse[_0x328c1c(0xa2)]([{'$match':{'name':_0x2ce16e[_0x328c1c(0xa1)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x328c1c(0xcb),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x328c1c(0xda)},'bay':{'$first':_0x328c1c(0x69)},'bin':{'$first':_0x328c1c(0x8d)},'type':{'$first':_0x328c1c(0xaa)},'floorlevel':{'$first':_0x328c1c(0x9e)},'primary_code':{'$first':_0x328c1c(0xdf)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x328c1c(0x10f)},'storage':{'$first':_0x328c1c(0x86)},'rack':{'$first':'$product_details.rack'},'maxPerUnit':{'$first':_0x328c1c(0x126)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x328c1c(0x6f)},'batch_code':{'$first':_0x328c1c(0x133)},'room':{'$first':_0x328c1c(0x129)}}}]);let _0x1f8843;if(_0x4a9215[_0x328c1c(0xc3)]==_0x328c1c(0x8f)){const _0x2a0316=await staff['findOne']({'email':_0x4a9215[_0x328c1c(0xbe)]});_0x1f8843=await warehouse[_0x328c1c(0xa2)]([{'$match':{'status':_0x328c1c(0xa8),'name':_0x2a0316['warehouse'],'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x328c1c(0x131)}}},{'$group':{'_id':_0x328c1c(0xab),'name':{'$first':_0x328c1c(0xab)}}}]);}else _0x1f8843=await warehouse[_0x328c1c(0xa2)]([{'$match':{'status':_0x328c1c(0xa8),'warehouse_category':_0x328c1c(0x110),'name':{'$ne':_0x328c1c(0x131)}}},{'$group':{'_id':_0x328c1c(0xab),'name':{'$first':'$name'}}}]);if(_0x4e8075[0x0]['language']==_0x328c1c(0xdc)){var _0xd94a4f=users[_0x328c1c(0x103)];console['log'](_0xd94a4f);}else{if(_0x4e8075[0x0]['language']==_0x328c1c(0x6a))var _0xd94a4f=users[_0x328c1c(0x6a)];else{if(_0x4e8075[0x0]['language']==_0x328c1c(0x6c))var _0xd94a4f=users['German'];else{if(_0x4e8075[0x0][_0x328c1c(0xf2)]==_0x328c1c(0xf0))var _0xd94a4f=users[_0x328c1c(0xf0)];else{if(_0x4e8075[0x0][_0x328c1c(0xf2)]==_0x328c1c(0x92))var _0xd94a4f=users[_0x328c1c(0x92)];else{if(_0x4e8075[0x0]['language']==_0x328c1c(0x11d))var _0xd94a4f=users[_0x328c1c(0xd2)];else{if(_0x4e8075[0x0][_0x328c1c(0xf2)]=='Chinese')var _0xd94a4f=users[_0x328c1c(0xe1)];else{if(_0x4e8075[0x0][_0x328c1c(0xf2)]==_0x328c1c(0xe6))var _0xd94a4f=users[_0x328c1c(0xfa)];}}}}}}}_0x501123['render'](_0x328c1c(0x132),{'success':_0xbb6ff0[_0x328c1c(0x124)]('success'),'errors':_0xbb6ff0['flash'](_0x328c1c(0x116)),'role':_0x4a9215,'profile':_0x54fc03,'adjustment':_0x2ce16e,'stock':_0x36b7ff,'master_shop':_0x4e8075,'warehouse_name':_0xcd3b0d,'unit':_0x127561,'language':_0xd94a4f,'warehouse':_0x1f8843});}catch(_0x1da8f9){console[_0x328c1c(0x85)](_0x1da8f9),_0x501123[_0x328c1c(0xaf)](0xc8)[_0x328c1c(0x77)]({'message':_0x1da8f9['message']});}}),router[a0_0xf7a779(0xe4)](a0_0xf7a779(0xf7),auth,async(_0x1aaf85,_0x5a5751)=>{var _0x427be4=a0_0xf7a779;try{const _0x12854a=_0x1aaf85[_0x427be4(0x7c)]['id'],_0x2e9698=await adjustment[_0x427be4(0xeb)]({'_id':_0x12854a}),_0x59dca0=await warehouse[_0x427be4(0xbd)]({'name':_0x2e9698[_0x427be4(0xa1)],'room':_0x2e9698[_0x427be4(0xa9)]}),{warehouse_name:_0x27046c,date:_0xcd5932,prod_name:_0x280b39,level:_0x5eb078,isle:_0x5bd3ef,pallet:_0x136785,stock:_0x2b61b8,types:_0x1fe3fc,adjust_qty:_0x397a0b,new_adjust_qty:_0x4d4685,note:_0x148fe0,Room_name:_0x12011e,invoice:_0x10f327,JO_number:_0x23aeee,expiry_date:_0x2c0be8}=_0x1aaf85[_0x427be4(0xd7)];if(typeof _0x280b39==_0x427be4(0xca))var _0x553529=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x104)]],_0x15be93=[_0x1aaf85['body'][_0x427be4(0x13d)]],_0x306646=[_0x1aaf85['body']['stock']],_0x5dfb27=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x118)]],_0x59b1ad=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0xf1)]],_0x1daa4a=[_0x1aaf85['body'][_0x427be4(0x105)]],_0x2be6f9=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0xef)]],_0x13978c=[_0x1aaf85['body'][_0x427be4(0xfb)]],_0x4e03ec=[_0x1aaf85[_0x427be4(0xd7)]['prod_code']],_0xf56876=[_0x1aaf85['body'][_0x427be4(0x9b)]],_0x13eae3=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0xe7)]],_0x588d79=[_0x1aaf85['body'][_0x427be4(0xcf)]],_0x32ef8a=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x122)]],_0x4b6cb1=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x9c)]],_0x14bccc=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x128)]],_0x4ea51d=[_0x1aaf85['body'][_0x427be4(0xdd)]],_0x3840d5=[_0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x11f)]];else var _0x553529=[..._0x1aaf85[_0x427be4(0xd7)]['prod_name']],_0x15be93=[..._0x1aaf85[_0x427be4(0xd7)]['level']],_0x306646=[..._0x1aaf85['body'][_0x427be4(0xfd)]],_0x5dfb27=[..._0x1aaf85['body']['types']],_0x59b1ad=[..._0x1aaf85['body']['New_Qty_Converted_adj']],_0x1daa4a=[..._0x1aaf85['body'][_0x427be4(0x105)]],_0x2be6f9=[..._0x1aaf85['body'][_0x427be4(0x87)]],_0x13978c=[..._0x1aaf85[_0x427be4(0xd7)]['Secondary_units']],_0x4e03ec=[..._0x1aaf85[_0x427be4(0xd7)]['prod_code']],_0xf56876=[..._0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x9b)]],_0x13eae3=[..._0x1aaf85[_0x427be4(0xd7)][_0x427be4(0xe7)]],_0x588d79=[..._0x1aaf85[_0x427be4(0xd7)][_0x427be4(0xcf)]],_0x32ef8a=[..._0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x122)]],_0x4b6cb1=[..._0x1aaf85[_0x427be4(0xd7)]['prod_cat']],_0x14bccc=[..._0x1aaf85[_0x427be4(0xd7)][_0x427be4(0x128)]],_0x4ea51d=[..._0x1aaf85['body'][_0x427be4(0xdd)]],_0x3840d5=[..._0x1aaf85[_0x427be4(0xd7)]['second1']];const _0x5a08a3=_0x553529[_0x427be4(0x139)](_0x2c2f25=>{return _0x2c2f25={'product_name':_0x2c2f25};});_0x15be93[_0x427be4(0x114)]((_0x5b357f,_0x255837)=>{var _0x320b01=_0x427be4;_0x14bccc[_0x320b01(0x114)]((_0x2d6119,_0x522232)=>{var _0x211dab=_0x320b01;if(_0x2d6119=='Receiving\x20Area'&&_0x255837==_0x522232){var _0x114587=_0x5b357f['slice'](0x3);_0x5a08a3[_0x255837]['storage']=_0x5b357f[0x0],_0x5a08a3[_0x255837][_0x211dab(0xc0)]=_0x5b357f[0x1],_0x5a08a3[_0x255837][_0x211dab(0xad)]=0x0,_0x5a08a3[_0x255837][_0x211dab(0xe8)]=0x0,_0x5a08a3[_0x255837]['type']=_0x211dab(0x13c),_0x5a08a3[_0x255837][_0x211dab(0xa7)]=_0x114587;}else{if(_0x2d6119=='Shelves'&&_0x255837==_0x522232){var _0x114587=_0x5b357f[_0x211dab(0x135)](0x3);_0x5a08a3[_0x255837][_0x211dab(0xdb)]=_0x5b357f[0x0],_0x5a08a3[_0x255837][_0x211dab(0xc0)]=_0x5b357f[0x1],_0x5a08a3[_0x255837][_0x211dab(0xad)]=0x0,_0x5a08a3[_0x255837][_0x211dab(0xe8)]=0x0,_0x5a08a3[_0x255837][_0x211dab(0x12b)]=_0x211dab(0x13c),_0x5a08a3[_0x255837]['floorlevel']=_0x5b357f[0x5];}else{if(_0x255837==_0x522232){var _0x25fe0e;if(_0x5b357f[0x4]=='L')_0x25fe0e=_0x211dab(0xba);else _0x5b357f[0x4]=='F'&&(_0x25fe0e=_0x211dab(0x13c));_0x5a08a3[_0x255837][_0x211dab(0xdb)]=_0x5b357f[0x0],_0x5a08a3[_0x255837]['rack']=_0x5b357f[0x1],_0x5a08a3[_0x255837][_0x211dab(0xad)]=_0x5b357f[0x2],_0x5a08a3[_0x255837]['bin']=_0x5b357f[0x3],_0x5a08a3[_0x255837]['type']=_0x25fe0e,_0x5a08a3[_0x255837][_0x211dab(0xa7)]=_0x5b357f[0x5];}}}});}),_0x306646['forEach']((_0x26f16e,_0x225876)=>{var _0x50bae1=_0x427be4;_0x5a08a3[_0x225876][_0x50bae1(0x81)]=_0x26f16e;}),_0x5dfb27[_0x427be4(0x114)]((_0x515dd3,_0xa4a5ea)=>{var _0x3fd229=_0x427be4;_0x5a08a3[_0xa4a5ea][_0x3fd229(0x118)]=_0x515dd3;}),_0x59b1ad[_0x427be4(0x114)]((_0x4d3cf4,_0x218f44)=>{var _0x1837b8=_0x427be4;_0x5a08a3[_0x218f44][_0x1837b8(0xf3)]=_0x4d3cf4;}),_0x1daa4a['forEach']((_0x1a33a9,_0x2ff56a)=>{_0x5a08a3[_0x2ff56a]['new_adjust_qty']=_0x1a33a9;}),_0x2be6f9[_0x427be4(0x114)]((_0x3ca5f4,_0x45dd3c)=>{var _0x2e70eb=_0x427be4;_0x5a08a3[_0x45dd3c][_0x2e70eb(0x87)]=_0x3ca5f4;}),_0x13978c[_0x427be4(0x114)]((_0x238868,_0x2d3243)=>{var _0x248ed3=_0x427be4;_0x5a08a3[_0x2d3243][_0x248ed3(0xbb)]=_0x238868;}),_0x4e03ec[_0x427be4(0x114)]((_0x29c85c,_0x52f23f)=>{var _0x2b1687=_0x427be4;_0x5a08a3[_0x52f23f][_0x2b1687(0x123)]=_0x29c85c;}),_0xf56876['forEach']((_0x53a383,_0x1bec2c)=>{var _0x42ca45=_0x427be4;_0x5a08a3[_0x1bec2c][_0x42ca45(0x9b)]=_0x53a383;}),_0x13eae3['forEach']((_0x4f5d74,_0x2c116c)=>{var _0x5bd829=_0x427be4;_0x5a08a3[_0x2c116c][_0x5bd829(0xe7)]=_0x4f5d74;}),_0x588d79[_0x427be4(0x114)]((_0x478192,_0x1aac4d)=>{var _0x3e75fe=_0x427be4;_0x5a08a3[_0x1aac4d][_0x3e75fe(0xed)]=_0x478192;}),_0x32ef8a[_0x427be4(0x114)]((_0x2caebc,_0xbd52ce)=>{var _0xac60d3=_0x427be4;_0x5a08a3[_0xbd52ce][_0xac60d3(0x122)]=_0x2caebc;}),_0x4b6cb1[_0x427be4(0x114)]((_0x4fe343,_0x1dd559)=>{_0x5a08a3[_0x1dd559]['prod_cat']=_0x4fe343;}),_0x14bccc['forEach']((_0x238a40,_0x549653)=>{var _0x3484bc=_0x427be4;_0x5a08a3[_0x549653][_0x3484bc(0x7b)]=_0x238a40;}),_0x4ea51d[_0x427be4(0x114)]((_0x53e010,_0x40da18)=>{var _0x405ef5=_0x427be4;_0x5a08a3[_0x40da18][_0x405ef5(0xd6)]=_0x53e010;}),_0x3840d5['forEach']((_0x3ad85a,_0x593691)=>{_0x5a08a3[_0x593691]['secondary_code']=_0x3ad85a;});const _0x1a9e78=_0x5a08a3[_0x427be4(0x13a)](_0x3ef94b=>_0x3ef94b[_0x427be4(0xf3)]!=='0'&&_0x3ef94b[_0x427be4(0xf3)]!=='');var _0xd336cf=0x0;_0x1a9e78[_0x427be4(0x114)](_0x14a2ab=>{var _0x2501bf=_0x427be4;console['log'](_0x2501bf(0xcd),_0x14a2ab),parseInt(_0x14a2ab[_0x2501bf(0xf3)])<=0x0&&_0xd336cf++;});if(_0xd336cf!=0x0)return _0x1aaf85['flash'](_0x427be4(0x116),_0x427be4(0x115)),_0x5a5751[_0x427be4(0x136)](_0x427be4(0x111));_0x2e9698[_0x427be4(0xa1)]=_0x27046c,_0x2e9698[_0x427be4(0xb6)]=_0xcd5932,_0x2e9698['product']=_0x1a9e78,_0x2e9698[_0x427be4(0xc8)]=_0x148fe0,_0x2e9698[_0x427be4(0xa3)]=_0x10f327,_0x2e9698[_0x427be4(0xbf)]=_0x427be4(0xcc);const _0x37e9d5=await _0x2e9698[_0x427be4(0xd0)]();_0x1aaf85[_0x427be4(0x124)](_0x427be4(0x89),'adjustment\x20data\x20update\x20successfully'),_0x5a5751[_0x427be4(0x136)]('/adjustment/view');}catch(_0x3ff5ea){console['log'](_0x3ff5ea);}}),router[a0_0xf7a779(0xe4)]('/barcode_scanner',async(_0x2b7c33,_0x4ccc92)=>{var _0xeee147=a0_0xf7a779;const {primary_code:_0x20329d,warehouse_data:_0x4f919e,rooms_data:_0xa1ba0,Roomslist:_0x525825}=_0x2b7c33[_0xeee147(0xd7)],_0x31cb06=_0x525825['split'](','),_0x435a59=[];async function _0x3d2c01(_0x56ea83){var _0x400e45=_0xeee147;const _0x152c0c=await warehouse['aggregate']([{'$match':{'name':_0x4f919e,'room':_0x56ea83}},{'$unwind':_0x400e45(0xc6)},{'$match':{'product_details.primary_code':_0x20329d}},{'$group':{'_id':_0x400e45(0xcb),'name':{'$first':_0x400e45(0x11e)},'product_stock':{'$first':_0x400e45(0xda)},'primary_code':{'$first':_0x400e45(0xdf)},'secondary_code':{'$first':_0x400e45(0x10c)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x400e45(0x69)},'isle':{'$first':_0x400e45(0x8d)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x400e45(0x9e)},'unit':{'$first':_0x400e45(0x74)},'secondary_unit':{'$first':_0x400e45(0x73)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x400e45(0x7f)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x400e45(0x126)},'batch_code':{'$first':_0x400e45(0x133)},'product_cat':{'$first':_0x400e45(0xea)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x400e45(0x129)},'invoice':{'$first':'$product_details.invoice'}}}]),_0x2b39b7=await warehouse[_0x400e45(0xa2)]([{'$match':{'name':_0x4f919e,'room':_0x56ea83}},{'$unwind':_0x400e45(0xc6)},{'$match':{'product_details.secondary_code':_0x20329d}},{'$group':{'_id':_0x400e45(0xcb),'name':{'$first':_0x400e45(0x11e)},'product_stock':{'$first':_0x400e45(0xda)},'primary_code':{'$first':_0x400e45(0xdf)},'secondary_code':{'$first':_0x400e45(0x10c)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x400e45(0x8d)},'type':{'$first':_0x400e45(0xaa)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x400e45(0x74)},'secondary_unit':{'$first':_0x400e45(0x73)},'storage':{'$first':_0x400e45(0x86)},'rack':{'$first':_0x400e45(0x7f)},'expiry_date':{'$first':_0x400e45(0xb3)},'production_date':{'$first':_0x400e45(0x6f)},'maxPerUnit':{'$first':_0x400e45(0x126)},'batch_code':{'$first':_0x400e45(0x133)},'product_cat':{'$first':_0x400e45(0xea)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x400e45(0x129)}}}]);if(_0x152c0c[_0x400e45(0xf8)]>0x0)_0x435a59[_0x400e45(0xf4)](_0x152c0c);else _0x2b39b7['length']>0x0&&_0x435a59[_0x400e45(0xf4)](_0x2b39b7);}const _0xffe339=_0x31cb06[_0xeee147(0x139)](_0x40636f=>_0x3d2c01(_0x40636f));await Promise[_0xeee147(0x83)](_0xffe339),_0x4ccc92[_0xeee147(0x77)](_0x435a59);}),router[a0_0xf7a779(0xe4)](a0_0xf7a779(0x112),async(_0x2f0159,_0x732955)=>{var _0x18d202=a0_0xf7a779;const {primaryCode:_0x104c68,secondaryCode:_0x2a7240,productCode:_0x5507ac,level:_0x49cb6d,isle:_0x3f1216,pallet:_0x52faff,warehouses:_0x7626a4,room:_0x1e3cab}=_0x2f0159[_0x18d202(0xd7)];try{const _0x499495=await warehouse['aggregate']([{'$match':{'name':_0x7626a4,'room':_0x1e3cab}},{'$unwind':_0x18d202(0xc6)},{'$match':{'product_details.level':parseInt(_0x49cb6d),'product_details.isle':_0x3f1216,'product_details.pallet':parseInt(_0x52faff)}},{'$group':{'_id':_0x18d202(0xcb),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x18d202(0xda)},'level':{'$first':_0x18d202(0xb5)},'isle':{'$first':_0x18d202(0x100)},'pallet':{'$first':_0x18d202(0x13f)},'maxProducts':{'$first':_0x18d202(0x11a)}}}]);_0x732955[_0x18d202(0xaf)](0xc8)[_0x18d202(0x77)](_0x499495);}catch(_0xa6a6a2){_0x732955['status'](0x194)['json']({'message':_0xa6a6a2[_0x18d202(0xd8)]});}}),module[a0_0xf7a779(0x101)]=router;