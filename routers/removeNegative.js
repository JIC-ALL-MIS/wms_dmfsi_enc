const a0_0x5b3aec=a0_0x29f9;(function(_0x2b1e8d,_0x4866ef){const _0x167b05=a0_0x29f9,_0x34832c=_0x2b1e8d();while(!![]){try{const _0x584d1a=parseInt(_0x167b05(0x133))/0x1+parseInt(_0x167b05(0x14e))/0x2*(-parseInt(_0x167b05(0x147))/0x3)+-parseInt(_0x167b05(0x14c))/0x4*(parseInt(_0x167b05(0x125))/0x5)+-parseInt(_0x167b05(0x142))/0x6+-parseInt(_0x167b05(0x139))/0x7*(parseInt(_0x167b05(0x11d))/0x8)+parseInt(_0x167b05(0x137))/0x9*(-parseInt(_0x167b05(0x14a))/0xa)+parseInt(_0x167b05(0x12e))/0xb;if(_0x584d1a===_0x4866ef)break;else _0x34832c['push'](_0x34832c['shift']());}catch(_0x14473f){_0x34832c['push'](_0x34832c['shift']());}}}(a0_0x144a,0xbad36));function a0_0x144a(){const _0x3cc64a=['length','14800005047429','valueOf','get','table\x20page','message','$sale_product.room_name','$sale_product.quantity','updateMany','$product_details.product_name','9269992AwDTie','$to_warehouse','_id','$room','$sale_product.invoice','/warehouse_monitor','flash','$sale_product.id_transaction_from','245KMdEUV','express','warehouse_data','$name','$product.room_names','data_transfer','invoice','exports','\x20documents\x20updated','49479650hAbKRo','data_adjustment','$product_details.invoice','json','$product._id','1091443BSlRnr','$product.product_code','all','$invoice','11690433MkspEc','push','7wnVHIi','$product_details','warehouses','$product.product_name','log','$product_details.product_stock','success','render','data_sales','3266214hfeTvy','$product.to_quantity','Router','map','$$invoice','3390231yGiuQI','$warehouse_name','monitor','10RlKWNg','INCF-52068316','56508tVTpfn','aggregate','2VYAuXQ','$product.new_adjust_qty','$product'];a0_0x144a=function(){return _0x3cc64a;};return a0_0x144a();}function a0_0x29f9(_0x249210,_0x377e49){const _0x144a9e=a0_0x144a();return a0_0x29f9=function(_0x29f96a,_0x5675ad){_0x29f96a=_0x29f96a-0x116;let _0x1975c0=_0x144a9e[_0x29f96a];return _0x1975c0;},a0_0x29f9(_0x249210,_0x377e49);}const express=require(a0_0x5b3aec(0x126)),app=express(),router=express[a0_0x5b3aec(0x144)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x5b3aec(0x116)]('/negative',async(_0x2c09c2,_0x254bec)=>{const _0x43e7c1=a0_0x5b3aec;try{const _0xef4650=await warehouse[_0x43e7c1(0x11b)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x254bec[_0x43e7c1(0x131)]({'status':_0xef4650['modifiedCount']+_0x43e7c1(0x12d)});}catch(_0x4ed592){console[_0x43e7c1(0x13d)]('table\x20page',_0x4ed592),_0x254bec['status'](0xc8)[_0x43e7c1(0x131)]({'message':_0x4ed592[_0x43e7c1(0x118)]});}}),router['get']('/checking',async(_0x2e4cf4,_0x1a8922)=>{const _0x11d77f=a0_0x5b3aec;try{const _0x313466=await warehouse[_0x11d77f(0x14d)]([{'$unwind':_0x11d77f(0x13a)},{'$match':{'product_details.invoice':_0x11d77f(0x14b),'product_details.primary_code':_0x11d77f(0x152)}},{'$group':{'_id':{'name':'$name','room':'$room'},'products':{'$push':_0x11d77f(0x13a)}}}]);_0x1a8922['json'](_0x313466);}catch(_0x1bf267){console['log'](_0x11d77f(0x117),_0x1bf267),_0x1a8922['status'](0xc8)[_0x11d77f(0x131)]({'message':_0x1bf267[_0x11d77f(0x118)]});}}),router[a0_0x5b3aec(0x116)](a0_0x5b3aec(0x122),async(_0x4f3f34,_0xc2912d)=>{const _0x36e461=a0_0x5b3aec;_0xc2912d[_0x36e461(0x140)](_0x36e461(0x149),{'success':_0x4f3f34[_0x36e461(0x123)](_0x36e461(0x13f)),'errors':_0x4f3f34[_0x36e461(0x123)]('errors')});}),router[a0_0x5b3aec(0x116)]('/join',async(_0x10f54c,_0x24d383)=>{const _0x1948e8=a0_0x5b3aec;var _0x571fc5=await purchases[_0x1948e8(0x14d)]([{'$lookup':{'from':_0x1948e8(0x13b),'let':{'invoice':_0x1948e8(0x136)},'pipeline':[{'$unwind':_0x1948e8(0x13a)},{'$match':{'$expr':{'$eq':[_0x1948e8(0x146),_0x1948e8(0x130)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x1948e8(0x11c),'product_code':'$product_details.product_code','quantity_available':_0x1948e8(0x13e),'warehouse_name':_0x1948e8(0x128),'warehouse_room':_0x1948e8(0x120),'invoice':_0x1948e8(0x130)}}],'as':_0x1948e8(0x127)}}]);_0x571fc5[_0x1948e8(0x141)]={},await Promise[_0x1948e8(0x135)](_0x571fc5[_0x1948e8(0x145)](async _0x1eb51e=>{const _0x5ced58=_0x1948e8;_0x571fc5[_0x5ced58(0x141)][_0x1eb51e[_0x5ced58(0x12b)]]=[],await Promise['all'](_0x1eb51e['warehouse_data']['map'](async _0x4a60a5=>{const _0x8424c8=_0x5ced58,_0x4d52a7=await sales[_0x8424c8(0x14d)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x4a60a5[_0x8424c8(0x11f)][_0x8424c8(0x153)](),'sale_product.invoice':_0x4a60a5[_0x8424c8(0x12b)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':_0x8424c8(0x11a),'warehouse_name':_0x8424c8(0x148),'warehouse_room':_0x8424c8(0x119),'product_invoice':_0x8424c8(0x121),'invoice':_0x8424c8(0x136),'id_transaction_from':_0x8424c8(0x124)}}]);_0x4d52a7[_0x8424c8(0x151)]>0x0&&_0x571fc5[_0x8424c8(0x141)][_0x1eb51e[_0x8424c8(0x12b)]]['push'](..._0x4d52a7);}));})),_0x571fc5[_0x1948e8(0x141)]=_0x571fc5[_0x1948e8(0x141)],_0x571fc5['data_adjustment']={},await Promise[_0x1948e8(0x135)](_0x571fc5[_0x1948e8(0x145)](async _0x7f10ce=>{const _0x256f37=_0x1948e8;_0x571fc5[_0x256f37(0x12f)][_0x7f10ce[_0x256f37(0x12b)]]=[],await Promise[_0x256f37(0x135)](_0x7f10ce['warehouse_data']['map'](async _0x26cca3=>{const _0x3bcced=_0x256f37,_0x392f7b=await adjustment[_0x3bcced(0x14d)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x26cca3[_0x3bcced(0x11f)][_0x3bcced(0x153)](),'product.invoice':_0x26cca3[_0x3bcced(0x12b)]}},{'$project':{'_id':'$product._id','product_name':_0x3bcced(0x13c),'product_code':_0x3bcced(0x134),'quantity_available':_0x3bcced(0x14f),'warehouse_name':'$warehouse_name','warehouse_room':'$product.room_names','product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':'$product.id_transaction_from'}}]);_0x392f7b['length']>0x0&&_0x571fc5['data_adjustment'][_0x7f10ce[_0x3bcced(0x12b)]]['push'](..._0x392f7b);}));})),_0x571fc5[_0x1948e8(0x12a)]={},await Promise[_0x1948e8(0x135)](_0x571fc5['map'](async _0x455db9=>{const _0x3f513f=_0x1948e8;_0x571fc5['data_transfer'][_0x455db9[_0x3f513f(0x12b)]]=[],await Promise[_0x3f513f(0x135)](_0x455db9[_0x3f513f(0x127)][_0x3f513f(0x145)](async _0x17b5c5=>{const _0x5d1c16=_0x3f513f,_0x2502e9=await transfers[_0x5d1c16(0x14d)]([{'$unwind':_0x5d1c16(0x150)},{'$match':{'product.id_transaction_id':_0x17b5c5[_0x5d1c16(0x11f)][_0x5d1c16(0x153)](),'product.To_invoice':_0x17b5c5['invoice']}},{'$project':{'_id':_0x5d1c16(0x132),'product_name':_0x5d1c16(0x13c),'product_code':_0x5d1c16(0x134),'quantity_available':_0x5d1c16(0x143),'warehouse_name':_0x5d1c16(0x11e),'warehouse_room':_0x5d1c16(0x129),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_id':'$product.id_transaction_id'}}]);console[_0x5d1c16(0x13d)](_0x2502e9),_0x2502e9[_0x5d1c16(0x151)]>0x0&&_0x571fc5[_0x5d1c16(0x12a)][_0x455db9['invoice']][_0x5d1c16(0x138)](..._0x2502e9);}));})),_0x24d383[_0x1948e8(0x131)]({'purchases_warehouse':_0x571fc5,'data_sales':_0x571fc5[_0x1948e8(0x141)],'data_adjustment':_0x571fc5['data_adjustment'],'data_transfer':_0x571fc5['data_transfer']});}),module[a0_0x5b3aec(0x12c)]=router;