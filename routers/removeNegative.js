function a0_0x4288(_0x675258,_0x17746e){const _0x23f80f=a0_0x23f8();return a0_0x4288=function(_0x4288f9,_0x5f422e){_0x4288f9=_0x4288f9-0x16e;let _0x59611b=_0x23f80f[_0x4288f9];return _0x59611b;},a0_0x4288(_0x675258,_0x17746e);}const a0_0x12ca86=a0_0x4288;(function(_0x4405ae,_0x4daa7a){const _0x3369ba=a0_0x4288,_0x2424ba=_0x4405ae();while(!![]){try{const _0xedd81a=parseInt(_0x3369ba(0x176))/0x1*(parseInt(_0x3369ba(0x17a))/0x2)+-parseInt(_0x3369ba(0x1aa))/0x3+-parseInt(_0x3369ba(0x173))/0x4*(-parseInt(_0x3369ba(0x1a4))/0x5)+parseInt(_0x3369ba(0x172))/0x6*(parseInt(_0x3369ba(0x1b0))/0x7)+-parseInt(_0x3369ba(0x1a6))/0x8+parseInt(_0x3369ba(0x19c))/0x9*(parseInt(_0x3369ba(0x181))/0xa)+parseInt(_0x3369ba(0x19a))/0xb*(-parseInt(_0x3369ba(0x1a2))/0xc);if(_0xedd81a===_0x4daa7a)break;else _0x2424ba['push'](_0x2424ba['shift']());}catch(_0x56395a){_0x2424ba['push'](_0x2424ba['shift']());}}}(a0_0x23f8,0x8866a));const express=require('express'),app=express(),router=express[a0_0x12ca86(0x188)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x12ca86(0x198));router[a0_0x12ca86(0x1a5)](a0_0x12ca86(0x197),async(_0x1a714c,_0x487512)=>{const _0x1fb333=a0_0x12ca86;try{const _0x498cb9=await warehouse[_0x1fb333(0x18d)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x487512[_0x1fb333(0x1b3)]({'status':_0x498cb9[_0x1fb333(0x1ad)]+_0x1fb333(0x18e)});}catch(_0x42447b){console[_0x1fb333(0x18c)](_0x1fb333(0x1b1),_0x42447b),_0x487512['status'](0xc8)[_0x1fb333(0x1b3)]({'message':_0x42447b[_0x1fb333(0x195)]});}}),router[a0_0x12ca86(0x1a5)](a0_0x12ca86(0x194),async(_0xdd3494,_0x48f0e9)=>{const _0x19e09d=a0_0x12ca86;try{const _0x356682=await warehouse[_0x19e09d(0x1ab)]([{'$unwind':_0x19e09d(0x185)},{'$match':{'product_details.invoice':_0x19e09d(0x183),'product_details.primary_code':_0x19e09d(0x1ae)}},{'$group':{'_id':{'name':_0x19e09d(0x17c),'room':_0x19e09d(0x16e)},'products':{'$push':_0x19e09d(0x185)}}}]);_0x48f0e9[_0x19e09d(0x1b3)](_0x356682);}catch(_0x258a4f){console[_0x19e09d(0x18c)](_0x19e09d(0x1b1),_0x258a4f),_0x48f0e9[_0x19e09d(0x186)](0xc8)[_0x19e09d(0x1b3)]({'message':_0x258a4f['message']});}}),router[a0_0x12ca86(0x1a5)](a0_0x12ca86(0x177),async(_0x4a6295,_0x3ed3ac)=>{const _0x8285b5=a0_0x12ca86;_0x3ed3ac['render']('monitor',{'success':_0x4a6295[_0x8285b5(0x19b)](_0x8285b5(0x1a9)),'errors':_0x4a6295[_0x8285b5(0x19b)](_0x8285b5(0x1b5))});}),router[a0_0x12ca86(0x1a5)](a0_0x12ca86(0x175),async(_0x29ca29,_0x32c96a)=>{const _0x29dc31=a0_0x12ca86;var _0x19dbe2=await purchases[_0x29dc31(0x1ab)]([{'$lookup':{'from':_0x29dc31(0x17b),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x29dc31(0x185)},{'$match':{'$expr':{'$eq':[_0x29dc31(0x190),_0x29dc31(0x19e)]}}},{'$project':{'_id':_0x29dc31(0x18b),'product_name':_0x29dc31(0x17f),'product_code':_0x29dc31(0x187),'quantity_available':_0x29dc31(0x170),'warehouse_name':'$name','warehouse_room':_0x29dc31(0x16e),'invoice':_0x29dc31(0x19e)}}],'as':_0x29dc31(0x184)}}]);_0x19dbe2[_0x29dc31(0x191)]={},await Promise[_0x29dc31(0x171)](_0x19dbe2[_0x29dc31(0x1b2)](async _0x1b60fc=>{const _0x2fc9c9=_0x29dc31;_0x19dbe2[_0x2fc9c9(0x191)][_0x1b60fc[_0x2fc9c9(0x17e)]]=[],await Promise[_0x2fc9c9(0x171)](_0x1b60fc[_0x2fc9c9(0x184)][_0x2fc9c9(0x1b2)](async _0x8e39f9=>{const _0xb9649e=_0x2fc9c9,_0xc5fa64=await sales[_0xb9649e(0x1ab)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x8e39f9[_0xb9649e(0x1a3)][_0xb9649e(0x16f)](),'sale_product.invoice':_0x8e39f9[_0xb9649e(0x17e)]}},{'$project':{'_id':_0xb9649e(0x17d),'product_name':_0xb9649e(0x1a8),'product_code':_0xb9649e(0x1a7),'quantity_available':'$sale_product.quantity','warehouse_name':_0xb9649e(0x1a1),'warehouse_room':_0xb9649e(0x1af),'product_invoice':_0xb9649e(0x1b4),'invoice':_0xb9649e(0x18a),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0xc5fa64[_0xb9649e(0x178)]>0x0&&_0x19dbe2[_0xb9649e(0x191)][_0x1b60fc[_0xb9649e(0x17e)]][_0xb9649e(0x19f)](..._0xc5fa64);}));})),_0x19dbe2[_0x29dc31(0x191)]=_0x19dbe2[_0x29dc31(0x191)],_0x19dbe2[_0x29dc31(0x182)]={},await Promise[_0x29dc31(0x171)](_0x19dbe2[_0x29dc31(0x1b2)](async _0x355e7b=>{const _0x238e31=_0x29dc31;_0x19dbe2['data_adjustment'][_0x355e7b['invoice']]=[],await Promise[_0x238e31(0x171)](_0x355e7b[_0x238e31(0x184)]['map'](async _0x1646b3=>{const _0x324c27=_0x238e31,_0x4e98ed=await adjustment[_0x324c27(0x1ab)]([{'$unwind':_0x324c27(0x174)},{'$match':{'product.id_transaction_from':_0x1646b3[_0x324c27(0x1a3)][_0x324c27(0x16f)](),'product.invoice':_0x1646b3[_0x324c27(0x17e)]}},{'$project':{'_id':_0x324c27(0x179),'product_name':_0x324c27(0x199),'product_code':_0x324c27(0x193),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':'$product.room_names','product_invoice':_0x324c27(0x1a0),'invoice':'$invoice','id_transaction_from':_0x324c27(0x196)}}]);_0x4e98ed[_0x324c27(0x178)]>0x0&&_0x19dbe2['data_adjustment'][_0x355e7b[_0x324c27(0x17e)]][_0x324c27(0x19f)](..._0x4e98ed);}));})),_0x19dbe2[_0x29dc31(0x192)]={},await Promise[_0x29dc31(0x171)](_0x19dbe2[_0x29dc31(0x1b2)](async _0x4d8042=>{const _0x155720=_0x29dc31;_0x19dbe2['data_transfer'][_0x4d8042[_0x155720(0x17e)]]=[],await Promise[_0x155720(0x171)](_0x4d8042[_0x155720(0x184)]['map'](async _0x59fe69=>{const _0x3ca90d=_0x155720,_0x34b446=await transfers[_0x3ca90d(0x1ab)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x59fe69[_0x3ca90d(0x1a3)][_0x3ca90d(0x16f)](),'product.To_invoice':_0x59fe69['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x3ca90d(0x199),'product_code':'$product.product_code','quantity_available':_0x3ca90d(0x189),'warehouse_name':_0x3ca90d(0x180),'warehouse_room':_0x3ca90d(0x18f),'product_invoice':_0x3ca90d(0x1ac),'invoice':_0x3ca90d(0x18a),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x3ca90d(0x18c)](_0x34b446),_0x34b446[_0x3ca90d(0x178)]>0x0&&_0x19dbe2[_0x3ca90d(0x192)][_0x4d8042[_0x3ca90d(0x17e)]][_0x3ca90d(0x19f)](..._0x34b446);}));})),_0x32c96a[_0x29dc31(0x1b3)]({'purchases_warehouse':_0x19dbe2,'data_sales':_0x19dbe2[_0x29dc31(0x191)],'data_adjustment':_0x19dbe2[_0x29dc31(0x182)],'data_transfer':_0x19dbe2[_0x29dc31(0x192)]});}),module[a0_0x12ca86(0x19d)]=router;function a0_0x23f8(){const _0x35561d=['$product.id_transaction_from','/negative','../../models/all_models','$product.product_name','11aXPMay','flash','2817lpSAvQ','exports','$product_details.invoice','push','$product.invoice','$warehouse_name','20555112FCfkWT','_id','3165XlJwkG','get','1553616RSPrOl','$sale_product.product_code','$sale_product.product_name','success','2173083LwPbvl','aggregate','$product.to_room_name','modifiedCount','14800005047429','$sale_product.room_name','283227ubJZwG','table\x20page','map','json','$sale_product.invoice','errors','$room','valueOf','$product_details.product_stock','all','144djfhbj','4008zeHCtc','$product','/join','55285hpUhIC','/warehouse_monitor','length','$product._id','30pWVAQB','warehouses','$name','$sale_product._id','invoice','$product_details.product_name','$to_warehouse','24140NCMHqi','data_adjustment','INCF-52068316','warehouse_data','$product_details','status','$product_details.product_code','Router','$product.to_quantity','$invoice','$product_details._id','log','updateMany','\x20documents\x20updated','$product.room_names','$$invoice','data_sales','data_transfer','$product.product_code','/checking','message'];a0_0x23f8=function(){return _0x35561d;};return a0_0x23f8();}