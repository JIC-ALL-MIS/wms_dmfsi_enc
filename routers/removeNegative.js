const a0_0x57d830=a0_0xd6a0;(function(_0x3657ec,_0x3af7a8){const _0x463e99=a0_0xd6a0,_0x5967bd=_0x3657ec();while(!![]){try{const _0x3d933e=parseInt(_0x463e99(0x129))/0x1*(parseInt(_0x463e99(0x126))/0x2)+parseInt(_0x463e99(0x115))/0x3+parseInt(_0x463e99(0x120))/0x4*(-parseInt(_0x463e99(0x104))/0x5)+parseInt(_0x463e99(0x123))/0x6+parseInt(_0x463e99(0x10f))/0x7+-parseInt(_0x463e99(0x10a))/0x8*(parseInt(_0x463e99(0x111))/0x9)+parseInt(_0x463e99(0x108))/0xa;if(_0x3d933e===_0x3af7a8)break;else _0x5967bd['push'](_0x5967bd['shift']());}catch(_0x3da2fe){_0x5967bd['push'](_0x5967bd['shift']());}}}(a0_0x496d,0xbe22d));const express=require(a0_0x57d830(0x114)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished}=require(a0_0x57d830(0x11b));function a0_0xd6a0(_0x5cf5ad,_0x122106){const _0x496db6=a0_0x496d();return a0_0xd6a0=function(_0xd6a06,_0x164ef5){_0xd6a06=_0xd6a06-0x102;let _0x2dc772=_0x496db6[_0xd6a06];return _0x2dc772;},a0_0xd6a0(_0x5cf5ad,_0x122106);}router[a0_0x57d830(0x12a)](a0_0x57d830(0x106),async(_0x2e5016,_0x27b310)=>{const _0x3ce2e3=a0_0x57d830;try{const _0x12bd9f=await warehouse[_0x3ce2e3(0x121)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x27b310[_0x3ce2e3(0x11d)]({'status':_0x12bd9f[_0x3ce2e3(0x127)]+_0x3ce2e3(0x11c)});}catch(_0x4fdd34){console[_0x3ce2e3(0x124)](_0x3ce2e3(0x118),_0x4fdd34),_0x27b310[_0x3ce2e3(0x107)](0xc8)[_0x3ce2e3(0x11d)]({'message':_0x4fdd34[_0x3ce2e3(0x122)]});}}),router[a0_0x57d830(0x12a)]('/checking',async(_0x59d208,_0x3321e7)=>{const _0x37427b=a0_0x57d830;try{const _0x15ca0d=await warehouse[_0x37427b(0x110)]([{'$unwind':_0x37427b(0x125)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x37427b(0x10b)}},{'$group':{'_id':{'name':_0x37427b(0x116),'room':'$room'},'products':{'$push':_0x37427b(0x125)}}}]);_0x3321e7[_0x37427b(0x11d)](_0x15ca0d);}catch(_0x32cd9d){console['log']('table\x20page',_0x32cd9d),_0x3321e7[_0x37427b(0x107)](0xc8)['json']({'message':_0x32cd9d[_0x37427b(0x122)]});}}),router[a0_0x57d830(0x12a)]('/warehouse_monitor',async(_0x477011,_0x1b25b4)=>{const _0x29b420=a0_0x57d830;_0x1b25b4[_0x29b420(0x119)]('monitor',{'success':_0x477011['flash'](_0x29b420(0x117)),'errors':_0x477011[_0x29b420(0x105)]('errors')});}),router[a0_0x57d830(0x12a)]('/join',async(_0x43202f,_0x2e308e)=>{const _0x3c0cb8=a0_0x57d830,_0x1bab51=await purchases_finished[_0x3c0cb8(0x110)]([{'$match':{'invoice':_0x3c0cb8(0x128)}}]);let _0x435734=[];await Promise[_0x3c0cb8(0x11a)](_0x1bab51[_0x3c0cb8(0x109)](async _0xdd78bf=>{const _0x31c713=_0x3c0cb8;await Promise['all'](_0xdd78bf[_0x31c713(0x10c)][_0x31c713(0x109)](async _0x47df56=>{const _0x3b17dc=_0x31c713,_0x2dc7a3=await warehouse[_0x3b17dc(0x110)]([{'$match':{'name':_0xdd78bf[_0x3b17dc(0x11e)],'room':_0x47df56[_0x3b17dc(0x102)]}},{'$unwind':_0x3b17dc(0x125)},{'$match':{'product_details.invoice':_0x47df56[_0x3b17dc(0x103)],'product_details.id_incoming':_0x47df56[_0x3b17dc(0x113)]['valueOf']()}}]);_0x435734[_0x3b17dc(0x10e)](_0x2dc7a3);}));}));let _0x4b84ec=[];await Promise[_0x3c0cb8(0x11a)](_0x435734['map'](async _0x3120ab=>{const _0x265ac2=_0x3c0cb8;await Promise['all'](_0x3120ab[_0x265ac2(0x109)](async _0x3d7359=>{const _0x5ce2a1=_0x265ac2;console[_0x5ce2a1(0x124)](_0x3d7359[_0x5ce2a1(0x10d)][_0x5ce2a1(0x103)]);const _0x182a6d=await sales_finished['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x3d7359[_0x5ce2a1(0x10d)][_0x5ce2a1(0x113)]['valueOf'](),'sale_product.invoice':_0x3d7359[_0x5ce2a1(0x10d)][_0x5ce2a1(0x103)]}}]);console[_0x5ce2a1(0x124)](_0x182a6d[_0x5ce2a1(0x112)]),_0x182a6d[_0x5ce2a1(0x112)]>0x0&&_0x4b84ec['push'](_0x182a6d);}));}));}),module[a0_0x57d830(0x11f)]=router;function a0_0x496d(){const _0x4ad0b8=['message','2774484jCCjyv','log','$product_details','3336mCZRoj','modifiedCount','INCF-89085235','359Vbfrxq','get','room_name','invoice','10zJFOLw','flash','/negative','status','14058150tzaQdR','map','200LbEUzv','14800005047429','product','product_details','push','5194511eDYqDF','aggregate','378018znvQtP','length','_id','express','460611ovwsDA','$name','success','table\x20page','render','all','../../models/all_models','\x20documents\x20updated','json','warehouse_name','exports','3067608UPvSTS','updateMany'];a0_0x496d=function(){return _0x4ad0b8;};return a0_0x496d();}