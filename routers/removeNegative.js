function a0_0x365d(_0x3b6969,_0x57214a){const _0x155fcc=a0_0x155f();return a0_0x365d=function(_0x365de4,_0x5ee4d1){_0x365de4=_0x365de4-0x11c;let _0x3ca471=_0x155fcc[_0x365de4];return _0x3ca471;},a0_0x365d(_0x3b6969,_0x57214a);}function a0_0x155f(){const _0x2556b3=['$product.new_adjust_qty','get','push','status','$to_warehouse','$product._id','valueOf','data_sales','$product.to_room_name','2275zUDLNV','1xABeqV','$sale_product.id_transaction_from','../../models/all_models','flash','$product_details.product_code','warehouse_data','data_transfer','warehouses','18606QJrNsc','$product.id_transaction_from','$product_details._id','$product.invoice','INCF-52068316','$$invoice','1907854VnLXQJ','$sale_product.room_name','log','invoice','$product.product_code','14800005047429','errors','$product.id_transaction_id','$product_details.invoice','$product_details.product_name','$product.room_names','$product','/join','126606rHJKiD','$room','exports','3976184ukPzBk','/warehouse_monitor','data_adjustment','\x20documents\x20updated','$invoice','116vKLAZv','render','json','_id','$product_details.product_stock','length','table\x20page','map','Router','success','all','/negative','aggregate','updateMany','$product.product_name','$sale_product','$name','message','5194145FoamXO','5778486MIKdMr','10890950RSXWJR','$product_details','$warehouse_name'];a0_0x155f=function(){return _0x2556b3;};return a0_0x155f();}const a0_0x1cc933=a0_0x365d;(function(_0x3f7813,_0x58e094){const _0x23e344=a0_0x365d,_0x1bee9d=_0x3f7813();while(!![]){try{const _0x4a6954=parseInt(_0x23e344(0x136))/0x1*(parseInt(_0x23e344(0x144))/0x2)+-parseInt(_0x23e344(0x151))/0x3*(parseInt(_0x23e344(0x159))/0x4)+parseInt(_0x23e344(0x127))/0x5+parseInt(_0x23e344(0x13e))/0x6*(-parseInt(_0x23e344(0x135))/0x7)+parseInt(_0x23e344(0x154))/0x8+-parseInt(_0x23e344(0x128))/0x9+parseInt(_0x23e344(0x129))/0xa;if(_0x4a6954===_0x58e094)break;else _0x1bee9d['push'](_0x1bee9d['shift']());}catch(_0x2aa23f){_0x1bee9d['push'](_0x1bee9d['shift']());}}}(a0_0x155f,0xac271));const express=require('express'),app=express(),router=express[a0_0x1cc933(0x11d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x1cc933(0x138));router[a0_0x1cc933(0x12d)](a0_0x1cc933(0x120),async(_0x548c7c,_0x2fab01)=>{const _0x575087=a0_0x1cc933;try{const _0x21f495=await warehouse[_0x575087(0x122)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2fab01['json']({'status':_0x21f495['modifiedCount']+_0x575087(0x157)});}catch(_0x416d07){console[_0x575087(0x146)](_0x575087(0x15f),_0x416d07),_0x2fab01[_0x575087(0x12f)](0xc8)[_0x575087(0x15b)]({'message':_0x416d07[_0x575087(0x126)]});}}),router['get']('/checking',async(_0x1a47e4,_0x510176)=>{const _0x4decc0=a0_0x1cc933;try{const _0x1e8824=await warehouse[_0x4decc0(0x121)]([{'$unwind':_0x4decc0(0x12a)},{'$match':{'product_details.invoice':_0x4decc0(0x142),'product_details.primary_code':_0x4decc0(0x149)}},{'$group':{'_id':{'name':_0x4decc0(0x125),'room':_0x4decc0(0x152)},'products':{'$push':_0x4decc0(0x12a)}}}]);_0x510176['json'](_0x1e8824);}catch(_0x492e84){console['log'](_0x4decc0(0x15f),_0x492e84),_0x510176[_0x4decc0(0x12f)](0xc8)[_0x4decc0(0x15b)]({'message':_0x492e84[_0x4decc0(0x126)]});}}),router[a0_0x1cc933(0x12d)](a0_0x1cc933(0x155),async(_0x1dfa3d,_0x259da5)=>{const _0x4b9cf0=a0_0x1cc933;_0x259da5[_0x4b9cf0(0x15a)]('monitor',{'success':_0x1dfa3d[_0x4b9cf0(0x139)](_0x4b9cf0(0x11e)),'errors':_0x1dfa3d[_0x4b9cf0(0x139)](_0x4b9cf0(0x14a))});}),router[a0_0x1cc933(0x12d)](a0_0x1cc933(0x150),async(_0x1f6291,_0x2fcbfa)=>{const _0x52e069=a0_0x1cc933;var _0x109c6b=await purchases[_0x52e069(0x121)]([{'$lookup':{'from':_0x52e069(0x13d),'let':{'invoice':_0x52e069(0x158)},'pipeline':[{'$unwind':_0x52e069(0x12a)},{'$match':{'$expr':{'$eq':[_0x52e069(0x143),'$product_details.invoice']}}},{'$project':{'_id':_0x52e069(0x140),'product_name':_0x52e069(0x14d),'product_code':_0x52e069(0x13a),'quantity_available':_0x52e069(0x15d),'warehouse_name':_0x52e069(0x125),'warehouse_room':'$room','invoice':_0x52e069(0x14c)}}],'as':_0x52e069(0x13b)}}]);_0x109c6b['data_sales']={},await Promise[_0x52e069(0x11f)](_0x109c6b['map'](async _0x4157a4=>{const _0x106e49=_0x52e069;_0x109c6b[_0x106e49(0x133)][_0x4157a4[_0x106e49(0x147)]]=[],await Promise[_0x106e49(0x11f)](_0x4157a4['warehouse_data'][_0x106e49(0x11c)](async _0x18e816=>{const _0x124035=_0x106e49,_0x26987b=await sales['aggregate']([{'$unwind':_0x124035(0x124)},{'$match':{'sale_product.id_transaction_from':_0x18e816[_0x124035(0x15c)][_0x124035(0x132)](),'sale_product.invoice':_0x18e816[_0x124035(0x147)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0x124035(0x12b),'warehouse_room':_0x124035(0x145),'product_invoice':'$sale_product.invoice','invoice':_0x124035(0x158),'id_transaction_from':_0x124035(0x137)}}]);_0x26987b[_0x124035(0x15e)]>0x0&&_0x109c6b['data_sales'][_0x4157a4['invoice']][_0x124035(0x12e)](..._0x26987b);}));})),_0x109c6b[_0x52e069(0x133)]=_0x109c6b['data_sales'],_0x109c6b[_0x52e069(0x156)]={},await Promise[_0x52e069(0x11f)](_0x109c6b[_0x52e069(0x11c)](async _0x116d9b=>{const _0x29a0f1=_0x52e069;_0x109c6b['data_adjustment'][_0x116d9b[_0x29a0f1(0x147)]]=[],await Promise[_0x29a0f1(0x11f)](_0x116d9b['warehouse_data'][_0x29a0f1(0x11c)](async _0x1544e8=>{const _0x351b2b=_0x29a0f1,_0x3f50b0=await adjustment[_0x351b2b(0x121)]([{'$unwind':_0x351b2b(0x14f)},{'$match':{'product.id_transaction_from':_0x1544e8[_0x351b2b(0x15c)]['valueOf'](),'product.invoice':_0x1544e8[_0x351b2b(0x147)]}},{'$project':{'_id':_0x351b2b(0x131),'product_name':_0x351b2b(0x123),'product_code':_0x351b2b(0x148),'quantity_available':_0x351b2b(0x12c),'warehouse_name':_0x351b2b(0x12b),'warehouse_room':_0x351b2b(0x14e),'product_invoice':_0x351b2b(0x141),'invoice':_0x351b2b(0x158),'id_transaction_from':_0x351b2b(0x13f)}}]);_0x3f50b0[_0x351b2b(0x15e)]>0x0&&_0x109c6b[_0x351b2b(0x156)][_0x116d9b['invoice']]['push'](..._0x3f50b0);}));})),_0x109c6b[_0x52e069(0x13c)]={},await Promise[_0x52e069(0x11f)](_0x109c6b[_0x52e069(0x11c)](async _0x3558df=>{const _0x4e7953=_0x52e069;_0x109c6b['data_transfer'][_0x3558df[_0x4e7953(0x147)]]=[],await Promise[_0x4e7953(0x11f)](_0x3558df[_0x4e7953(0x13b)]['map'](async _0x5bbd87=>{const _0x5cd34a=_0x4e7953,_0x3081bf=await transfers[_0x5cd34a(0x121)]([{'$unwind':_0x5cd34a(0x14f)},{'$match':{'product.id_transaction_id':_0x5bbd87['_id'][_0x5cd34a(0x132)](),'product.To_invoice':_0x5bbd87['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x5cd34a(0x123),'product_code':_0x5cd34a(0x148),'quantity_available':'$product.to_quantity','warehouse_name':_0x5cd34a(0x130),'warehouse_room':_0x5cd34a(0x14e),'product_invoice':_0x5cd34a(0x134),'invoice':_0x5cd34a(0x158),'id_transaction_id':_0x5cd34a(0x14b)}}]);console[_0x5cd34a(0x146)](_0x3081bf),_0x3081bf[_0x5cd34a(0x15e)]>0x0&&_0x109c6b[_0x5cd34a(0x13c)][_0x3558df[_0x5cd34a(0x147)]][_0x5cd34a(0x12e)](..._0x3081bf);}));})),_0x2fcbfa[_0x52e069(0x15b)]({'purchases_warehouse':_0x109c6b,'data_sales':_0x109c6b['data_sales'],'data_adjustment':_0x109c6b['data_adjustment'],'data_transfer':_0x109c6b['data_transfer']});}),module[a0_0x1cc933(0x153)]=router;