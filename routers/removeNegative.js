const a0_0x500113=a0_0x2dda;(function(_0x1a3935,_0x45d024){const _0x27654b=a0_0x2dda,_0x3fd436=_0x1a3935();while(!![]){try{const _0x413e16=-parseInt(_0x27654b(0x152))/0x1+-parseInt(_0x27654b(0x157))/0x2*(parseInt(_0x27654b(0x154))/0x3)+-parseInt(_0x27654b(0x161))/0x4+-parseInt(_0x27654b(0x15f))/0x5*(-parseInt(_0x27654b(0x149))/0x6)+parseInt(_0x27654b(0x15b))/0x7+-parseInt(_0x27654b(0x168))/0x8+parseInt(_0x27654b(0x171))/0x9;if(_0x413e16===_0x45d024)break;else _0x3fd436['push'](_0x3fd436['shift']());}catch(_0x5d86a3){_0x3fd436['push'](_0x3fd436['shift']());}}}(a0_0x3400,0x32d3a));function a0_0x2dda(_0x2ce23a,_0xc47a76){const _0x34006b=a0_0x3400();return a0_0x2dda=function(_0x2dda4c,_0x36f33d){_0x2dda4c=_0x2dda4c-0x148;let _0x5223ab=_0x34006b[_0x2dda4c];return _0x5223ab;},a0_0x2dda(_0x2ce23a,_0xc47a76);}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished}=require(a0_0x500113(0x14a));router[a0_0x500113(0x165)](a0_0x500113(0x14f),async(_0x2bb65f,_0x2b63c2)=>{const _0x4a7dd4=a0_0x500113;try{const _0x2040d9=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2b63c2['json']({'status':_0x2040d9[_0x4a7dd4(0x15a)]+_0x4a7dd4(0x159)});}catch(_0x4a02f2){console[_0x4a7dd4(0x160)](_0x4a7dd4(0x16d),_0x4a02f2),_0x2b63c2[_0x4a7dd4(0x16a)](0xc8)[_0x4a7dd4(0x150)]({'message':_0x4a02f2[_0x4a7dd4(0x16e)]});}}),router['get'](a0_0x500113(0x16f),async(_0x480cb8,_0x4223e0)=>{const _0x54adc9=a0_0x500113;try{const _0x50ffe8=await warehouse['aggregate']([{'$unwind':_0x54adc9(0x14d)},{'$match':{'product_details.invoice':_0x54adc9(0x14c),'product_details.primary_code':_0x54adc9(0x162)}},{'$group':{'_id':{'name':_0x54adc9(0x14b),'room':_0x54adc9(0x172)},'products':{'$push':_0x54adc9(0x14d)}}}]);_0x4223e0[_0x54adc9(0x150)](_0x50ffe8);}catch(_0x41733b){console[_0x54adc9(0x160)](_0x54adc9(0x16d),_0x41733b),_0x4223e0['status'](0xc8)['json']({'message':_0x41733b[_0x54adc9(0x16e)]});}}),router[a0_0x500113(0x165)](a0_0x500113(0x15c),async(_0x294464,_0x197dc7)=>{const _0x5570d4=a0_0x500113;_0x197dc7[_0x5570d4(0x164)](_0x5570d4(0x15d),{'success':_0x294464[_0x5570d4(0x15e)](_0x5570d4(0x156)),'errors':_0x294464[_0x5570d4(0x15e)](_0x5570d4(0x16c))});}),router['get'](a0_0x500113(0x163),async(_0x20b380,_0x162a4a)=>{const _0x166bfa=a0_0x500113,_0x47c727=await purchases_finished['aggregate']([{'$match':{'invoice':'INCF-69565374'}},{'$lookup':{'from':_0x166bfa(0x170),'let':{'invoice':_0x166bfa(0x148)},'pipeline':[{'$unwind':_0x166bfa(0x14d)},{'$match':{'$expr':{'$eq':[_0x166bfa(0x166),_0x166bfa(0x14e)]}}},{'$project':{'_id':_0x166bfa(0x169),'product_name':_0x166bfa(0x16b),'product_code':_0x166bfa(0x151),'quantity_purchased':'$product.quantity','quantity_available':_0x166bfa(0x158),'warehouse_name':_0x166bfa(0x14b),'warehouse_address':_0x166bfa(0x155)}}],'as':_0x166bfa(0x167)}}]);_0x162a4a[_0x166bfa(0x150)](_0x47c727);}),module[a0_0x500113(0x153)]=router;function a0_0x3400(){const _0x4009b4=['$product_details.product_code','197122FtmtHM','exports','852630MwrfGm','$address','success','2PmTzbF','$product_details.product_stock','\x20documents\x20updated','modifiedCount','2576028KtryOo','/warehouse_monitor','monitor','flash','65BlWArf','log','314772OSDqmz','14800005047429','/join','render','get','$$invoice','warehouse_data','2494480yfZUoV','$product_details._id','status','$product_details.product_name','errors','table\x20page','message','/checking','warehouses','5386626kRMRaE','$room','$invoice','52386MCKaJc','../../models/all_models','$name','INCF-52068316','$product_details','$product_details.invoice','/negative','json'];a0_0x3400=function(){return _0x4009b4;};return a0_0x3400();}