function a0_0x4f43(_0x1f2212,_0x215b84){const _0x47bac7=a0_0x47ba();return a0_0x4f43=function(_0x4f4381,_0x549072){_0x4f4381=_0x4f4381-0x8e;let _0x34caaf=_0x47bac7[_0x4f4381];return _0x34caaf;},a0_0x4f43(_0x1f2212,_0x215b84);}const a0_0x1e9020=a0_0x4f43;(function(_0x2484b0,_0xa2c62a){const _0x1a8377=a0_0x4f43,_0x53f9a9=_0x2484b0();while(!![]){try{const _0x4653ce=-parseInt(_0x1a8377(0xa8))/0x1+parseInt(_0x1a8377(0x99))/0x2*(parseInt(_0x1a8377(0xb4))/0x3)+parseInt(_0x1a8377(0xa6))/0x4*(parseInt(_0x1a8377(0x95))/0x5)+parseInt(_0x1a8377(0xa3))/0x6+parseInt(_0x1a8377(0xa5))/0x7+-parseInt(_0x1a8377(0xb1))/0x8+parseInt(_0x1a8377(0x94))/0x9;if(_0x4653ce===_0xa2c62a)break;else _0x53f9a9['push'](_0x53f9a9['shift']());}catch(_0x32907f){_0x53f9a9['push'](_0x53f9a9['shift']());}}}(a0_0x47ba,0x4f508));function a0_0x47ba(){const _0x393ffa=['warehouse_data','invoice','map','/negative','$product.id_transaction_id','status','$sale_product.id_transaction_from','length','log','$product_details.product_name','\x20documents\x20updated','../../models/all_models','$name','$product.product_code','$sale_product.product_code','valueOf','table\x20page','$warehouse_name','push','768627CMntPN','4240ppcuOA','$room','$product.invoice','updateMany','7122AffnPu','errors','$sale_product._id','$sale_product.invoice','$product.new_adjust_qty','$invoice','$to_warehouse','all','$product.room_names','$$invoice','419058ayEEDq','$product._id','2330335DDwFwm','468xZeYZL','flash','83821FuhLMG','/warehouse_monitor','message','express','$sale_product.product_name','monitor','get','$product','$product.product_name','5047368BYtxyX','exports','$sale_product.quantity','381Coyyng','data_adjustment','json','$sale_product','data_transfer','$product.to_room_name','$product_details._id','data_sales','$product_details','_id','/join','$product_details.invoice','render','INCF-52068316','$product.id_transaction_from','aggregate'];a0_0x47ba=function(){return _0x393ffa;};return a0_0x47ba();}const express=require(a0_0x1e9020(0xab)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x1e9020(0xcf));router[a0_0x1e9020(0xae)](a0_0x1e9020(0xc7),async(_0x1c409d,_0x2d95f0)=>{const _0x35e0f1=a0_0x1e9020;try{const _0x593ec6=await warehouse[_0x35e0f1(0x98)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2d95f0[_0x35e0f1(0xb6)]({'status':_0x593ec6['modifiedCount']+_0x35e0f1(0xce)});}catch(_0x26b941){console[_0x35e0f1(0xcc)](_0x35e0f1(0x91),_0x26b941),_0x2d95f0[_0x35e0f1(0xc9)](0xc8)['json']({'message':_0x26b941['message']});}}),router[a0_0x1e9020(0xae)]('/checking',async(_0x55359d,_0x42b77a)=>{const _0x46d6cf=a0_0x1e9020;try{const _0xac7045=await warehouse['aggregate']([{'$unwind':_0x46d6cf(0xbc)},{'$match':{'product_details.invoice':_0x46d6cf(0xc1),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':'$name','room':_0x46d6cf(0x96)},'products':{'$push':'$product_details'}}}]);_0x42b77a['json'](_0xac7045);}catch(_0x526c1c){console[_0x46d6cf(0xcc)](_0x46d6cf(0x91),_0x526c1c),_0x42b77a[_0x46d6cf(0xc9)](0xc8)[_0x46d6cf(0xb6)]({'message':_0x526c1c[_0x46d6cf(0xaa)]});}}),router[a0_0x1e9020(0xae)](a0_0x1e9020(0xa9),async(_0x18994c,_0x28dfe6)=>{const _0x260ee4=a0_0x1e9020;_0x28dfe6[_0x260ee4(0xc0)](_0x260ee4(0xad),{'success':_0x18994c[_0x260ee4(0xa7)]('success'),'errors':_0x18994c[_0x260ee4(0xa7)](_0x260ee4(0x9a))});}),router[a0_0x1e9020(0xae)](a0_0x1e9020(0xbe),async(_0xfdda73,_0x4a1bd8)=>{const _0x1d1d20=a0_0x1e9020;var _0x1841e6=await purchases['aggregate']([{'$lookup':{'from':'warehouses','let':{'invoice':_0x1d1d20(0x9e)},'pipeline':[{'$unwind':_0x1d1d20(0xbc)},{'$match':{'$expr':{'$eq':[_0x1d1d20(0xa2),_0x1d1d20(0xbf)]}}},{'$project':{'_id':_0x1d1d20(0xba),'product_name':_0x1d1d20(0xcd),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x1d1d20(0xd0),'warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':'warehouse_data'}}]);_0x1841e6[_0x1d1d20(0xbb)]={},await Promise[_0x1d1d20(0xa0)](_0x1841e6[_0x1d1d20(0xc6)](async _0xaeef7f=>{const _0x181779=_0x1d1d20;_0x1841e6[_0x181779(0xbb)][_0xaeef7f[_0x181779(0xc5)]]=[],await Promise[_0x181779(0xa0)](_0xaeef7f['warehouse_data'][_0x181779(0xc6)](async _0x50743b=>{const _0x4c7bc0=_0x181779,_0x27e693=await sales[_0x4c7bc0(0xc3)]([{'$unwind':_0x4c7bc0(0xb7)},{'$match':{'sale_product.id_transaction_from':_0x50743b['_id'][_0x4c7bc0(0x90)](),'sale_product.invoice':_0x50743b['invoice']}},{'$project':{'_id':_0x4c7bc0(0x9b),'product_name':_0x4c7bc0(0xac),'product_code':_0x4c7bc0(0x8f),'quantity_available':_0x4c7bc0(0xb3),'warehouse_name':_0x4c7bc0(0x92),'warehouse_room':'$sale_product.room_name','product_invoice':_0x4c7bc0(0x9c),'invoice':'$invoice','id_transaction_from':_0x4c7bc0(0xca)}}]);_0x27e693[_0x4c7bc0(0xcb)]>0x0&&_0x1841e6[_0x4c7bc0(0xbb)][_0xaeef7f[_0x4c7bc0(0xc5)]][_0x4c7bc0(0x93)](..._0x27e693);}));})),_0x1841e6[_0x1d1d20(0xbb)]=_0x1841e6['data_sales'],_0x1841e6[_0x1d1d20(0xb5)]={},await Promise[_0x1d1d20(0xa0)](_0x1841e6[_0x1d1d20(0xc6)](async _0xf161ad=>{const _0x170c45=_0x1d1d20;_0x1841e6[_0x170c45(0xb5)][_0xf161ad[_0x170c45(0xc5)]]=[],await Promise[_0x170c45(0xa0)](_0xf161ad[_0x170c45(0xc4)][_0x170c45(0xc6)](async _0x348d10=>{const _0x2b9fb1=_0x170c45,_0x44c16c=await adjustment[_0x2b9fb1(0xc3)]([{'$unwind':_0x2b9fb1(0xaf)},{'$match':{'product.id_transaction_from':_0x348d10['_id'][_0x2b9fb1(0x90)](),'product.invoice':_0x348d10[_0x2b9fb1(0xc5)]}},{'$project':{'_id':_0x2b9fb1(0xa4),'product_name':_0x2b9fb1(0xb0),'product_code':_0x2b9fb1(0x8e),'quantity_available':_0x2b9fb1(0x9d),'warehouse_name':_0x2b9fb1(0x92),'warehouse_room':'$product.room_names','product_invoice':_0x2b9fb1(0x97),'invoice':_0x2b9fb1(0x9e),'id_transaction_from':_0x2b9fb1(0xc2)}}]);_0x44c16c[_0x2b9fb1(0xcb)]>0x0&&_0x1841e6[_0x2b9fb1(0xb5)][_0xf161ad['invoice']][_0x2b9fb1(0x93)](..._0x44c16c);}));})),_0x1841e6[_0x1d1d20(0xb8)]={},await Promise[_0x1d1d20(0xa0)](_0x1841e6[_0x1d1d20(0xc6)](async _0x3aa67a=>{const _0x1d3e0a=_0x1d1d20;_0x1841e6[_0x1d3e0a(0xb8)][_0x3aa67a[_0x1d3e0a(0xc5)]]=[],await Promise['all'](_0x3aa67a['warehouse_data'][_0x1d3e0a(0xc6)](async _0x27533c=>{const _0x2a7a7e=_0x1d3e0a,_0x11aa44=await transfers['aggregate']([{'$unwind':_0x2a7a7e(0xaf)},{'$match':{'product.id_transaction_id':_0x27533c[_0x2a7a7e(0xbd)][_0x2a7a7e(0x90)](),'product.To_invoice':_0x27533c['invoice']}},{'$project':{'_id':_0x2a7a7e(0xa4),'product_name':_0x2a7a7e(0xb0),'product_code':_0x2a7a7e(0x8e),'quantity_available':'$product.to_quantity','warehouse_name':_0x2a7a7e(0x9f),'warehouse_room':_0x2a7a7e(0xa1),'product_invoice':_0x2a7a7e(0xb9),'invoice':_0x2a7a7e(0x9e),'id_transaction_id':_0x2a7a7e(0xc8)}}]);console[_0x2a7a7e(0xcc)](_0x11aa44),_0x11aa44[_0x2a7a7e(0xcb)]>0x0&&_0x1841e6[_0x2a7a7e(0xb8)][_0x3aa67a[_0x2a7a7e(0xc5)]][_0x2a7a7e(0x93)](..._0x11aa44);}));})),_0x4a1bd8['json']({'purchases_warehouse':_0x1841e6,'data_sales':_0x1841e6['data_sales'],'data_adjustment':_0x1841e6[_0x1d1d20(0xb5)],'data_transfer':_0x1841e6[_0x1d1d20(0xb8)]});}),module[a0_0x1e9020(0xb2)]=router;