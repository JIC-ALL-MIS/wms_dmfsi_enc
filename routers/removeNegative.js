function a0_0x3269(_0x40cc9f,_0x58d90c){const _0x55cb80=a0_0x55cb();return a0_0x3269=function(_0x3269b8,_0x51b68b){_0x3269b8=_0x3269b8-0x15c;let _0x1f495d=_0x55cb80[_0x3269b8];return _0x1f495d;},a0_0x3269(_0x40cc9f,_0x58d90c);}const a0_0x41a03b=a0_0x3269;(function(_0x5d2cfc,_0x1bea46){const _0x490522=a0_0x3269,_0x309d83=_0x5d2cfc();while(!![]){try{const _0x15cb18=parseInt(_0x490522(0x168))/0x1+parseInt(_0x490522(0x18e))/0x2*(-parseInt(_0x490522(0x167))/0x3)+parseInt(_0x490522(0x17e))/0x4*(-parseInt(_0x490522(0x171))/0x5)+-parseInt(_0x490522(0x193))/0x6*(parseInt(_0x490522(0x160))/0x7)+parseInt(_0x490522(0x19d))/0x8*(-parseInt(_0x490522(0x17d))/0x9)+parseInt(_0x490522(0x16c))/0xa+parseInt(_0x490522(0x196))/0xb;if(_0x15cb18===_0x1bea46)break;else _0x309d83['push'](_0x309d83['shift']());}catch(_0x4407d8){_0x309d83['push'](_0x309d83['shift']());}}}(a0_0x55cb,0xdab39));const express=require(a0_0x41a03b(0x164)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x41a03b(0x178));function a0_0x55cb(){const _0x3cd89e=['warehouse_data','$product.id_transaction_from','../../models/all_models','$sale_product._id','$$invoice','$room','$product.invoice','78858JzrRcs','4MxgFfn','json','updateMany','$product.product_name','$to_warehouse','$product_details._id','$warehouse_name','$sale_product','valueOf','$product.room_names','status','14800005047429','log','\x20documents\x20updated','success','/join','1614uPWQoo','$product_details','$sale_product.product_name','$name','$product','764394xSQTcG','$product.to_room_name','$product.new_adjust_qty','24572405DektAZ','$product.id_transaction_id','all','$sale_product.product_code','aggregate','$sale_product.room_name','$invoice','152ajMJVF','data_sales','map','flash','table\x20page','data_adjustment','$sale_product.invoice','data_transfer','render','28lNMVEH','_id','errors','message','express','/warehouse_monitor','$sale_product.id_transaction_from','6114jPwDEI','1630070qXhAqJ','push','get','length','2378600hINnfW','$product.to_quantity','INCF-52068316','/negative','/checking','4426220UjYdUQ','$product_details.invoice','$product_details.product_stock','invoice','$product._id'];a0_0x55cb=function(){return _0x3cd89e;};return a0_0x55cb();}router[a0_0x41a03b(0x16a)](a0_0x41a03b(0x16f),async(_0x5b0171,_0x1402de)=>{const _0x3e48f7=a0_0x41a03b;try{const _0x32d6dc=await warehouse[_0x3e48f7(0x180)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1402de[_0x3e48f7(0x17f)]({'status':_0x32d6dc['modifiedCount']+_0x3e48f7(0x18b)});}catch(_0x3c2447){console[_0x3e48f7(0x18a)](_0x3e48f7(0x1a1),_0x3c2447),_0x1402de[_0x3e48f7(0x188)](0xc8)[_0x3e48f7(0x17f)]({'message':_0x3c2447[_0x3e48f7(0x163)]});}}),router['get'](a0_0x41a03b(0x170),async(_0x55e8c4,_0x207d8d)=>{const _0xf69c80=a0_0x41a03b;try{const _0x45f363=await warehouse[_0xf69c80(0x19a)]([{'$unwind':_0xf69c80(0x18f)},{'$match':{'product_details.invoice':_0xf69c80(0x16e),'product_details.primary_code':_0xf69c80(0x189)}},{'$group':{'_id':{'name':'$name','room':_0xf69c80(0x17b)},'products':{'$push':_0xf69c80(0x18f)}}}]);_0x207d8d[_0xf69c80(0x17f)](_0x45f363);}catch(_0x8d44ee){console[_0xf69c80(0x18a)](_0xf69c80(0x1a1),_0x8d44ee),_0x207d8d[_0xf69c80(0x188)](0xc8)[_0xf69c80(0x17f)]({'message':_0x8d44ee[_0xf69c80(0x163)]});}}),router[a0_0x41a03b(0x16a)](a0_0x41a03b(0x165),async(_0xff5cb2,_0x9638d)=>{const _0x5f00d6=a0_0x41a03b;_0x9638d[_0x5f00d6(0x15f)]('monitor',{'success':_0xff5cb2[_0x5f00d6(0x1a0)](_0x5f00d6(0x18c)),'errors':_0xff5cb2['flash'](_0x5f00d6(0x162))});}),router[a0_0x41a03b(0x16a)](a0_0x41a03b(0x18d),async(_0x216433,_0x48d117)=>{const _0x35d4a6=a0_0x41a03b;var _0x523615=await purchases['aggregate']([{'$lookup':{'from':'warehouses','let':{'invoice':_0x35d4a6(0x19c)},'pipeline':[{'$unwind':_0x35d4a6(0x18f)},{'$match':{'$expr':{'$eq':[_0x35d4a6(0x17a),_0x35d4a6(0x172)]}}},{'$project':{'_id':_0x35d4a6(0x183),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x35d4a6(0x173),'warehouse_name':_0x35d4a6(0x191),'warehouse_room':_0x35d4a6(0x17b),'invoice':_0x35d4a6(0x172)}}],'as':_0x35d4a6(0x176)}}]);_0x523615['data_sales']={},await Promise[_0x35d4a6(0x198)](_0x523615[_0x35d4a6(0x19f)](async _0x46c6ef=>{const _0x2681af=_0x35d4a6;_0x523615[_0x2681af(0x19e)][_0x46c6ef[_0x2681af(0x174)]]=[],await Promise[_0x2681af(0x198)](_0x46c6ef[_0x2681af(0x176)][_0x2681af(0x19f)](async _0x324a7a=>{const _0x14d117=_0x2681af,_0x258068=await sales['aggregate']([{'$unwind':_0x14d117(0x185)},{'$match':{'sale_product.id_transaction_from':_0x324a7a['_id'][_0x14d117(0x186)](),'sale_product.invoice':_0x324a7a[_0x14d117(0x174)]}},{'$project':{'_id':_0x14d117(0x179),'product_name':_0x14d117(0x190),'product_code':_0x14d117(0x199),'quantity_available':'$sale_product.quantity','warehouse_name':_0x14d117(0x184),'warehouse_room':_0x14d117(0x19b),'product_invoice':_0x14d117(0x15d),'invoice':_0x14d117(0x19c),'id_transaction_from':_0x14d117(0x166)}}]);_0x258068[_0x14d117(0x16b)]>0x0&&_0x523615['data_sales'][_0x46c6ef['invoice']][_0x14d117(0x169)](..._0x258068);}));})),_0x523615['data_sales']=_0x523615[_0x35d4a6(0x19e)],_0x523615[_0x35d4a6(0x15c)]={},await Promise[_0x35d4a6(0x198)](_0x523615['map'](async _0x4741b6=>{const _0xb02797=_0x35d4a6;_0x523615['data_adjustment'][_0x4741b6[_0xb02797(0x174)]]=[],await Promise['all'](_0x4741b6[_0xb02797(0x176)][_0xb02797(0x19f)](async _0x3f5602=>{const _0x5890c5=_0xb02797,_0x50b4b3=await adjustment[_0x5890c5(0x19a)]([{'$unwind':_0x5890c5(0x192)},{'$match':{'product.id_transaction_from':_0x3f5602[_0x5890c5(0x161)][_0x5890c5(0x186)](),'product.invoice':_0x3f5602[_0x5890c5(0x174)]}},{'$project':{'_id':'$product._id','product_name':_0x5890c5(0x181),'product_code':'$product.product_code','quantity_available':_0x5890c5(0x195),'warehouse_name':_0x5890c5(0x184),'warehouse_room':'$product.room_names','product_invoice':_0x5890c5(0x17c),'invoice':_0x5890c5(0x19c),'id_transaction_from':_0x5890c5(0x177)}}]);_0x50b4b3[_0x5890c5(0x16b)]>0x0&&_0x523615[_0x5890c5(0x15c)][_0x4741b6[_0x5890c5(0x174)]]['push'](..._0x50b4b3);}));})),_0x523615[_0x35d4a6(0x15e)]={},await Promise[_0x35d4a6(0x198)](_0x523615[_0x35d4a6(0x19f)](async _0x4be224=>{const _0x240a20=_0x35d4a6;_0x523615['data_transfer'][_0x4be224[_0x240a20(0x174)]]=[],await Promise[_0x240a20(0x198)](_0x4be224[_0x240a20(0x176)][_0x240a20(0x19f)](async _0x27e605=>{const _0x556cbf=_0x240a20,_0x1bc7d6=await transfers['aggregate']([{'$unwind':_0x556cbf(0x192)},{'$match':{'product.id_transaction_id':_0x27e605[_0x556cbf(0x161)][_0x556cbf(0x186)](),'product.To_invoice':_0x27e605[_0x556cbf(0x174)]}},{'$project':{'_id':_0x556cbf(0x175),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x556cbf(0x16d),'warehouse_name':_0x556cbf(0x182),'warehouse_room':_0x556cbf(0x187),'product_invoice':_0x556cbf(0x194),'invoice':_0x556cbf(0x19c),'id_transaction_id':_0x556cbf(0x197)}}]);console[_0x556cbf(0x18a)](_0x1bc7d6),_0x1bc7d6['length']>0x0&&_0x523615[_0x556cbf(0x15e)][_0x4be224[_0x556cbf(0x174)]][_0x556cbf(0x169)](..._0x1bc7d6);}));})),_0x48d117[_0x35d4a6(0x17f)]({'purchases_warehouse':_0x523615,'data_sales':_0x523615['data_sales'],'data_adjustment':_0x523615[_0x35d4a6(0x15c)],'data_transfer':_0x523615['data_transfer']});}),module['exports']=router;