var a0_0x42f059=a0_0x2c25;function a0_0x2c25(_0xf90c2d,_0x2d3db3){var _0x56ae63=a0_0x56ae();return a0_0x2c25=function(_0x2c25a4,_0x3f1dde){_0x2c25a4=_0x2c25a4-0x11f;var _0x2a822c=_0x56ae63[_0x2c25a4];return _0x2a822c;},a0_0x2c25(_0xf90c2d,_0x2d3db3);}(function(_0x3aed36,_0x13cfed){var _0x51497a=a0_0x2c25,_0x3ca2fa=_0x3aed36();while(!![]){try{var _0x38635f=parseInt(_0x51497a(0x15b))/0x1+-parseInt(_0x51497a(0x139))/0x2*(parseInt(_0x51497a(0x169))/0x3)+parseInt(_0x51497a(0x12f))/0x4+-parseInt(_0x51497a(0x128))/0x5*(parseInt(_0x51497a(0x17a))/0x6)+-parseInt(_0x51497a(0x148))/0x7+-parseInt(_0x51497a(0x16d))/0x8*(-parseInt(_0x51497a(0x138))/0x9)+parseInt(_0x51497a(0x14f))/0xa;if(_0x38635f===_0x13cfed)break;else _0x3ca2fa['push'](_0x3ca2fa['shift']());}catch(_0x10e89f){_0x3ca2fa['push'](_0x3ca2fa['shift']());}}}(a0_0x56ae,0x30c78));function a0_0x56ae(){var _0x4c2957=['$date','user','exports','French','params','/viewFG','json','$product.id_transaction','$sale_product.unit','English','$product.id_transaction_id','$product.new_adjust_qty','warehouse_data','$product.id_transaction_from','$warehouse_name','5YoZEmJ','$room','get','Hindi','English\x20(US)','express','$product_details._id','945860XkpSYK','view_og_table','Finished\x20Goods','$product_details','findById','warehouses','../models/all_models','Arabic\x20(ae)','nodemailer','1319823KsGoIu','2dpGrkG','$product.room_names','$sale_product.room_name','log','Spanish','$sale_product.product_code','flash','success','$product.expiry_date','data_sales','Portuguese','find','$sale_product.invoice','Arabic','$product.production_date','1127175siwwNb','$sale_product.product_name','$product_details.product_name','$product_details.unit','map','$product.product_name','$product_details.expiry_date','5730780kqdONG','aggregate','$product.to_room_name','German','all','Portuguese\x20(BR)','$product_details.product_code','push','/viewdata_og_fg/:id','$product_details.product_stock','transaction_finished_raw','length','32087ZPLApq','$product_details.production_date','$product','$$invoice','$sale_product.production_date','$product.invoice','data_transfer','invoice','render','$sale_product.quantity','data_adjustment','post','$product._id','view_tf_table','1041993hMbISp','$to_warehouse','$name','Enabled','8KQFUbD','$product.product_code','$sale_product._id','email','body','$product.unit','Chinese','errors','language','$product_details.invoice','$sale_product','$product.to_quantity','findOne','1680726sfHOZd','Router','$sale_product.expiry_date','valueOf','$invoice','/viewdata_inc_fg/:id','_id'];a0_0x56ae=function(){return _0x4c2957;};return a0_0x56ae();}const express=require(a0_0x42f059(0x12d)),app=express(),router=express[a0_0x42f059(0x17b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x42f059(0x135)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),nodemailer=require(a0_0x42f059(0x137));router['get']('/view',auth,async(_0x460e16,_0x47b5f9)=>{var _0xd34bfa=a0_0x42f059;try{const {username:_0x3cf906,email:_0x4a1282,role:_0x3b43bb}=_0x460e16['user'],_0x362261=_0x460e16[_0xd34bfa(0x182)],_0xb89e0b=await profile[_0xd34bfa(0x179)]({'email':_0x362261[_0xd34bfa(0x170)]}),_0x54b12e=await master_shop['find'](),_0x22d022=await warehouse[_0xd34bfa(0x150)]([{'$match':{'status':_0xd34bfa(0x16c),'warehouse_category':_0xd34bfa(0x131)}},{'$group':{'_id':_0xd34bfa(0x16b),'name':{'$first':_0xd34bfa(0x16b)}}}]);if(_0x54b12e[0x0][_0xd34bfa(0x175)]==_0xd34bfa(0x12c))var _0x4fb933=users[_0xd34bfa(0x122)];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]=='Hindi')var _0x4fb933=users[_0xd34bfa(0x12b)];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]==_0xd34bfa(0x152))var _0x4fb933=users[_0xd34bfa(0x152)];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]==_0xd34bfa(0x13d))var _0x4fb933=users['Spanish'];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]=='French')var _0x4fb933=users[_0xd34bfa(0x184)];else{if(_0x54b12e[0x0]['language']==_0xd34bfa(0x154))var _0x4fb933=users[_0xd34bfa(0x143)];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]==_0xd34bfa(0x173))var _0x4fb933=users['Chinese'];else{if(_0x54b12e[0x0][_0xd34bfa(0x175)]=='Arabic\x20(ae)')var _0x4fb933=users['Arabic'];}}}}}}}_0x47b5f9[_0xd34bfa(0x163)]('transaction_finished',{'success':_0x460e16[_0xd34bfa(0x13f)]('success'),'errors':_0x460e16[_0xd34bfa(0x13f)]('errors'),'role':_0x362261,'profile':_0xb89e0b,'master_shop':_0x54b12e,'dataProcess':_0x22d022,'language':_0x4fb933});}catch(_0x3856c5){console[_0xd34bfa(0x13c)](_0x3856c5);}}),router[a0_0x42f059(0x166)]('/reports',auth,async(_0x4c39cb,_0x5d2c08)=>{var _0xa3a438=a0_0x42f059;const {product_category:_0x426482,transaction_category:_0x44bf00,transaction_date_from:_0x1b4d50,transaction_date_to:_0x115667,warehouse_category:_0x619bde,item_code:_0x59f9e}=_0x4c39cb[_0xa3a438(0x171)];console[_0xa3a438(0x13c)](_0x619bde);if(_0x426482=='rm'){if(_0x619bde=='all'){var _0x2a43b2=await purchases[_0xa3a438(0x150)]([{'$match':{'date':{'$gte':_0x1b4d50,'$lte':_0x115667}}},{'$lookup':{'from':_0xa3a438(0x134),'let':{'invoice':_0xa3a438(0x17e)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0xa3a438(0x15e),_0xa3a438(0x176)]}}},{'$project':{'_id':_0xa3a438(0x12e),'product_name':_0xa3a438(0x14a),'product_code':_0xa3a438(0x155),'quantity_available':_0xa3a438(0x158),'warehouse_name':_0xa3a438(0x16b),'warehouse_room':'$room','invoice':_0xa3a438(0x176),'production_date':_0xa3a438(0x15c),'expiry_date':_0xa3a438(0x14e),'UOM':_0xa3a438(0x14b)}}],'as':_0xa3a438(0x125)}}]);_0x2a43b2['data_sales']={},await Promise['all'](_0x2a43b2['map'](async _0xfb5bf2=>{var _0x39a3cd=_0xa3a438;_0x2a43b2[_0x39a3cd(0x142)][_0xfb5bf2[_0x39a3cd(0x162)]]=[],await Promise['all'](_0xfb5bf2['warehouse_data'][_0x39a3cd(0x14c)](async _0x14538b=>{var _0x471d28=_0x39a3cd;const _0x390ca5=await sales[_0x471d28(0x150)]([{'$unwind':_0x471d28(0x177)},{'$match':{'sale_product.id_transaction_from':_0x14538b['_id'][_0x471d28(0x17d)](),'sale_product.invoice':_0x14538b[_0x471d28(0x162)]}},{'$project':{'_id':_0x471d28(0x16f),'product_name':_0x471d28(0x149),'product_code':_0x471d28(0x13e),'quantity_available':_0x471d28(0x164),'warehouse_name':_0x471d28(0x127),'warehouse_room':'$sale_product.room_name','product_invoice':_0x471d28(0x145),'invoice':_0x471d28(0x17e),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x471d28(0x181),'production_date':'$sale_product.production_date','expiry_date':_0x471d28(0x17c),'UOM':_0x471d28(0x121)}}]);_0x390ca5[_0x471d28(0x15a)]>0x0&&_0x2a43b2[_0x471d28(0x142)][_0xfb5bf2[_0x471d28(0x162)]][_0x471d28(0x156)](..._0x390ca5);}));})),_0x2a43b2['data_sales']=_0x2a43b2[_0xa3a438(0x142)],_0x2a43b2[_0xa3a438(0x165)]={},await Promise['all'](_0x2a43b2['map'](async _0x181469=>{var _0x3eab97=_0xa3a438;_0x2a43b2['data_adjustment'][_0x181469[_0x3eab97(0x162)]]=[],await Promise['all'](_0x181469[_0x3eab97(0x125)][_0x3eab97(0x14c)](async _0x2e6e35=>{var _0x35d2ec=_0x3eab97;const _0x26d3eb=await adjustment[_0x35d2ec(0x150)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x2e6e35['_id'][_0x35d2ec(0x17d)](),'product.invoice':_0x2e6e35[_0x35d2ec(0x162)]}},{'$project':{'_id':_0x35d2ec(0x167),'product_name':_0x35d2ec(0x14d),'product_code':_0x35d2ec(0x16e),'quantity_available':_0x35d2ec(0x124),'warehouse_name':_0x35d2ec(0x127),'warehouse_room':'$product.room_names','product_invoice':_0x35d2ec(0x160),'invoice':_0x35d2ec(0x17e),'id_transaction_from':_0x35d2ec(0x126),'date':_0x35d2ec(0x181),'production_date':_0x35d2ec(0x147),'expiry_date':_0x35d2ec(0x141),'UOM':'$product.unit'}}]);_0x26d3eb['length']>0x0&&_0x2a43b2[_0x35d2ec(0x165)][_0x181469[_0x35d2ec(0x162)]][_0x35d2ec(0x156)](..._0x26d3eb);}));})),_0x2a43b2[_0xa3a438(0x161)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x737346=>{var _0x4d7a51=_0xa3a438;_0x2a43b2['data_transfer'][_0x737346[_0x4d7a51(0x162)]]=[],await Promise[_0x4d7a51(0x153)](_0x737346['warehouse_data']['map'](async _0x239713=>{var _0x280f60=_0x4d7a51;const _0x138dab=await transfers['aggregate']([{'$unwind':_0x280f60(0x15d)},{'$match':{'product.id_transaction_id':_0x239713[_0x280f60(0x180)][_0x280f60(0x17d)](),'product.To_invoice':_0x239713[_0x280f60(0x162)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x280f60(0x178),'warehouse_name':_0x280f60(0x16a),'warehouse_room':_0x280f60(0x13a),'product_invoice':_0x280f60(0x151),'invoice':_0x280f60(0x17e),'id_transaction_from':_0x280f60(0x123),'date':'$date','production_date':_0x280f60(0x147),'expiry_date':'$product.expiry_date','UOM':_0x280f60(0x172)}}]);_0x138dab[_0x280f60(0x15a)]>0x0&&_0x2a43b2['data_transfer'][_0x737346['invoice']]['push'](..._0x138dab);}));})),_0x5d2c08[_0xa3a438(0x11f)]({'purchases_warehouse':_0x2a43b2,'data_sales':_0x2a43b2['data_sales'],'data_adjustment':_0x2a43b2[_0xa3a438(0x165)],'data_transfer':_0x2a43b2[_0xa3a438(0x161)]});}else{var _0x2a43b2=await purchases['aggregate']([{'$match':{'warehouse_name':_0x619bde,'date':{'$gte':_0x1b4d50,'$lte':_0x115667}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0xa3a438(0x17e)},'pipeline':[{'$unwind':_0xa3a438(0x132)},{'$match':{'$expr':{'$eq':[_0xa3a438(0x15e),'$product_details.invoice']}}},{'$project':{'_id':_0xa3a438(0x12e),'product_name':_0xa3a438(0x14a),'product_code':_0xa3a438(0x155),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':'$room','invoice':_0xa3a438(0x176),'production_date':_0xa3a438(0x15c),'expiry_date':'$product_details.expiry_date','UOM':_0xa3a438(0x14b)}}],'as':_0xa3a438(0x125)}}]);_0x2a43b2[_0xa3a438(0x142)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x20ab5a=>{var _0x309e88=_0xa3a438;_0x2a43b2[_0x309e88(0x142)][_0x20ab5a['invoice']]=[],await Promise[_0x309e88(0x153)](_0x20ab5a['warehouse_data'][_0x309e88(0x14c)](async _0x365c6f=>{var _0x5b4822=_0x309e88;const _0x2be6bd=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x365c6f[_0x5b4822(0x180)][_0x5b4822(0x17d)](),'sale_product.invoice':_0x365c6f[_0x5b4822(0x162)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':_0x5b4822(0x13e),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x5b4822(0x13b),'product_invoice':'$sale_product.invoice','invoice':_0x5b4822(0x17e),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x5b4822(0x181),'production_date':'$sale_product.production_date','expiry_date':'$sale_product.expiry_date','UOM':_0x5b4822(0x121)}}]);_0x2be6bd[_0x5b4822(0x15a)]>0x0&&_0x2a43b2[_0x5b4822(0x142)][_0x20ab5a[_0x5b4822(0x162)]][_0x5b4822(0x156)](..._0x2be6bd);}));})),_0x2a43b2[_0xa3a438(0x142)]=_0x2a43b2[_0xa3a438(0x142)],_0x2a43b2[_0xa3a438(0x165)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x49b2bb=>{var _0xda6e64=_0xa3a438;_0x2a43b2[_0xda6e64(0x165)][_0x49b2bb[_0xda6e64(0x162)]]=[],await Promise['all'](_0x49b2bb[_0xda6e64(0x125)][_0xda6e64(0x14c)](async _0x1ffead=>{var _0x329211=_0xda6e64;const _0x5b9863=await adjustment[_0x329211(0x150)]([{'$unwind':_0x329211(0x15d)},{'$match':{'product.id_transaction_from':_0x1ffead[_0x329211(0x180)]['valueOf'](),'product.invoice':_0x1ffead['invoice']}},{'$project':{'_id':_0x329211(0x167),'product_name':_0x329211(0x14d),'product_code':_0x329211(0x16e),'quantity_available':_0x329211(0x124),'warehouse_name':_0x329211(0x127),'warehouse_room':_0x329211(0x13a),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x329211(0x126),'date':_0x329211(0x181),'production_date':_0x329211(0x147),'expiry_date':'$product.expiry_date','UOM':_0x329211(0x172)}}]);_0x5b9863[_0x329211(0x15a)]>0x0&&_0x2a43b2[_0x329211(0x165)][_0x49b2bb['invoice']][_0x329211(0x156)](..._0x5b9863);}));})),_0x2a43b2[_0xa3a438(0x161)]={},await Promise['all'](_0x2a43b2[_0xa3a438(0x14c)](async _0x7b3a1d=>{var _0x18db08=_0xa3a438;_0x2a43b2[_0x18db08(0x161)][_0x7b3a1d[_0x18db08(0x162)]]=[],await Promise[_0x18db08(0x153)](_0x7b3a1d[_0x18db08(0x125)]['map'](async _0x13472a=>{var _0x228888=_0x18db08;const _0x283c6d=await transfers[_0x228888(0x150)]([{'$unwind':_0x228888(0x15d)},{'$match':{'product.id_transaction_id':_0x13472a['_id'][_0x228888(0x17d)](),'product.To_invoice':_0x13472a['invoice']}},{'$project':{'_id':_0x228888(0x167),'product_name':_0x228888(0x14d),'product_code':'$product.product_code','quantity_available':_0x228888(0x178),'warehouse_name':'$to_warehouse','warehouse_room':_0x228888(0x13a),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_from':_0x228888(0x123),'date':_0x228888(0x181),'production_date':_0x228888(0x147),'expiry_date':_0x228888(0x141),'UOM':_0x228888(0x172)}}]);_0x283c6d[_0x228888(0x15a)]>0x0&&_0x2a43b2[_0x228888(0x161)][_0x7b3a1d[_0x228888(0x162)]][_0x228888(0x156)](..._0x283c6d);}));})),_0x5d2c08[_0xa3a438(0x11f)]({'purchases_warehouse':_0x2a43b2,'data_sales':_0x2a43b2[_0xa3a438(0x142)],'data_adjustment':_0x2a43b2[_0xa3a438(0x165)],'data_transfer':_0x2a43b2[_0xa3a438(0x161)]});}}else{if(_0x619bde==_0xa3a438(0x153)){var _0x2a43b2=await purchases_finished[_0xa3a438(0x150)]([{'$match':{'date':{'$gte':_0x1b4d50,'$lte':_0x115667}}},{'$lookup':{'from':_0xa3a438(0x134),'let':{'invoice':_0xa3a438(0x17e)},'pipeline':[{'$unwind':_0xa3a438(0x132)},{'$match':{'$expr':{'$eq':[_0xa3a438(0x15e),_0xa3a438(0x176)]}}},{'$project':{'_id':_0xa3a438(0x12e),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0xa3a438(0x16b),'warehouse_room':_0xa3a438(0x129),'invoice':'$product_details.invoice','production_date':_0xa3a438(0x15c),'expiry_date':_0xa3a438(0x14e),'UOM':_0xa3a438(0x14b)}}],'as':_0xa3a438(0x125)}}]);_0x2a43b2[_0xa3a438(0x142)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x36ad27=>{var _0x144740=_0xa3a438;_0x2a43b2['data_sales'][_0x36ad27['invoice']]=[],await Promise['all'](_0x36ad27[_0x144740(0x125)][_0x144740(0x14c)](async _0x770eb4=>{var _0x10bf5a=_0x144740;const _0x22699a=await sales_finished[_0x10bf5a(0x150)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x770eb4[_0x10bf5a(0x180)]['valueOf'](),'sale_product.invoice':_0x770eb4['invoice']}},{'$project':{'_id':'$sale_product._id','product_name':_0x10bf5a(0x149),'product_code':'$sale_product.product_code','quantity_available':_0x10bf5a(0x164),'warehouse_name':_0x10bf5a(0x127),'warehouse_room':_0x10bf5a(0x13b),'product_invoice':_0x10bf5a(0x145),'invoice':_0x10bf5a(0x17e),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x10bf5a(0x181),'production_date':_0x10bf5a(0x15f),'expiry_date':_0x10bf5a(0x17c),'UOM':_0x10bf5a(0x121)}}]);_0x22699a[_0x10bf5a(0x15a)]>0x0&&_0x2a43b2['data_sales'][_0x36ad27[_0x10bf5a(0x162)]][_0x10bf5a(0x156)](..._0x22699a);}));})),_0x2a43b2[_0xa3a438(0x142)]=_0x2a43b2[_0xa3a438(0x142)],_0x2a43b2[_0xa3a438(0x165)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x3c7f58=>{var _0xad7661=_0xa3a438;_0x2a43b2[_0xad7661(0x165)][_0x3c7f58['invoice']]=[],await Promise[_0xad7661(0x153)](_0x3c7f58['warehouse_data'][_0xad7661(0x14c)](async _0x4337f8=>{var _0x368337=_0xad7661;const _0x981a77=await adjustment_finished[_0x368337(0x150)]([{'$unwind':_0x368337(0x15d)},{'$match':{'product.id_transaction_from':_0x4337f8[_0x368337(0x180)][_0x368337(0x17d)](),'product.invoice':_0x4337f8['invoice']}},{'$project':{'_id':_0x368337(0x167),'product_name':_0x368337(0x14d),'product_code':_0x368337(0x16e),'quantity_available':_0x368337(0x124),'warehouse_name':_0x368337(0x127),'warehouse_room':_0x368337(0x13a),'product_invoice':_0x368337(0x160),'invoice':_0x368337(0x17e),'id_transaction_from':'$product.id_transaction_from','date':_0x368337(0x181),'production_date':'$product.production_date','expiry_date':_0x368337(0x141),'UOM':_0x368337(0x172)}}]);_0x981a77[_0x368337(0x15a)]>0x0&&_0x2a43b2[_0x368337(0x165)][_0x3c7f58[_0x368337(0x162)]][_0x368337(0x156)](..._0x981a77);}));})),_0x2a43b2[_0xa3a438(0x161)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2['map'](async _0x32943c=>{var _0x432aac=_0xa3a438;_0x2a43b2['data_transfer'][_0x32943c[_0x432aac(0x162)]]=[],await Promise[_0x432aac(0x153)](_0x32943c[_0x432aac(0x125)][_0x432aac(0x14c)](async _0x1e19b5=>{var _0x40cc98=_0x432aac;const _0x5660f5=await transfers_finished['aggregate']([{'$unwind':_0x40cc98(0x15d)},{'$match':{'product.id_transaction':_0x1e19b5['_id']['valueOf'](),'product.from_invoice':_0x1e19b5[_0x40cc98(0x162)]}},{'$project':{'_id':_0x40cc98(0x167),'product_name':_0x40cc98(0x14d),'product_code':_0x40cc98(0x16e),'quantity_available':'$product.to_quantity','warehouse_name':_0x40cc98(0x16a),'warehouse_room':_0x40cc98(0x13a),'product_invoice':_0x40cc98(0x151),'invoice':_0x40cc98(0x17e),'id_transaction_from':'$product.id_transaction','date':_0x40cc98(0x181),'production_date':'$product.production_date','expiry_date':_0x40cc98(0x141),'UOM':_0x40cc98(0x172)}}]);_0x5660f5[_0x40cc98(0x15a)]>0x0&&_0x2a43b2[_0x40cc98(0x161)][_0x32943c['invoice']][_0x40cc98(0x156)](..._0x5660f5);}));})),_0x5d2c08[_0xa3a438(0x11f)]({'purchases_warehouse':_0x2a43b2,'data_sales':_0x2a43b2[_0xa3a438(0x142)],'data_adjustment':_0x2a43b2[_0xa3a438(0x165)],'data_transfer':_0x2a43b2['data_transfer']});}else{var _0x2a43b2=await purchases_finished[_0xa3a438(0x150)]([{'$match':{'warehouse_name':_0x619bde,'date':{'$gte':_0x1b4d50,'$lte':_0x115667}}},{'$lookup':{'from':_0xa3a438(0x134),'let':{'invoice':_0xa3a438(0x17e)},'pipeline':[{'$unwind':_0xa3a438(0x132)},{'$match':{'$expr':{'$eq':['$$invoice','$product_details.invoice']}}},{'$project':{'_id':_0xa3a438(0x12e),'product_name':_0xa3a438(0x14a),'product_code':_0xa3a438(0x155),'quantity_available':_0xa3a438(0x158),'warehouse_name':_0xa3a438(0x16b),'warehouse_room':'$room','invoice':_0xa3a438(0x176),'production_date':_0xa3a438(0x15c),'expiry_date':_0xa3a438(0x14e),'UOM':_0xa3a438(0x14b)}}],'as':_0xa3a438(0x125)}}]);_0x2a43b2[_0xa3a438(0x142)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x3fad1b=>{var _0x52edda=_0xa3a438;_0x2a43b2[_0x52edda(0x142)][_0x3fad1b[_0x52edda(0x162)]]=[],await Promise[_0x52edda(0x153)](_0x3fad1b['warehouse_data'][_0x52edda(0x14c)](async _0x109a6a=>{var _0x4baf68=_0x52edda;const _0x5e35c4=await sales_finished[_0x4baf68(0x150)]([{'$unwind':_0x4baf68(0x177)},{'$match':{'sale_product.id_transaction_from':_0x109a6a[_0x4baf68(0x180)][_0x4baf68(0x17d)](),'sale_product.invoice':_0x109a6a[_0x4baf68(0x162)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x4baf68(0x149),'product_code':_0x4baf68(0x13e),'quantity_available':_0x4baf68(0x164),'warehouse_name':'$warehouse_name','warehouse_room':_0x4baf68(0x13b),'product_invoice':'$sale_product.invoice','invoice':_0x4baf68(0x17e),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x4baf68(0x181),'production_date':_0x4baf68(0x15f),'expiry_date':_0x4baf68(0x17c),'UOM':_0x4baf68(0x121)}}]);_0x5e35c4[_0x4baf68(0x15a)]>0x0&&_0x2a43b2[_0x4baf68(0x142)][_0x3fad1b['invoice']][_0x4baf68(0x156)](..._0x5e35c4);}));})),_0x2a43b2[_0xa3a438(0x142)]=_0x2a43b2[_0xa3a438(0x142)],_0x2a43b2[_0xa3a438(0x165)]={},await Promise[_0xa3a438(0x153)](_0x2a43b2[_0xa3a438(0x14c)](async _0x2e7d98=>{var _0x82e6e3=_0xa3a438;_0x2a43b2[_0x82e6e3(0x165)][_0x2e7d98[_0x82e6e3(0x162)]]=[],await Promise[_0x82e6e3(0x153)](_0x2e7d98['warehouse_data'][_0x82e6e3(0x14c)](async _0x522b2b=>{var _0x14aa34=_0x82e6e3;const _0x4228b8=await adjustment_finished[_0x14aa34(0x150)]([{'$unwind':_0x14aa34(0x15d)},{'$match':{'product.id_transaction_from':_0x522b2b[_0x14aa34(0x180)][_0x14aa34(0x17d)](),'product.invoice':_0x522b2b[_0x14aa34(0x162)]}},{'$project':{'_id':_0x14aa34(0x167),'product_name':_0x14aa34(0x14d),'product_code':_0x14aa34(0x16e),'quantity_available':_0x14aa34(0x124),'warehouse_name':_0x14aa34(0x127),'warehouse_room':_0x14aa34(0x13a),'product_invoice':_0x14aa34(0x160),'invoice':_0x14aa34(0x17e),'id_transaction_from':_0x14aa34(0x126),'date':_0x14aa34(0x181),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x14aa34(0x172)}}]);_0x4228b8[_0x14aa34(0x15a)]>0x0&&_0x2a43b2[_0x14aa34(0x165)][_0x2e7d98[_0x14aa34(0x162)]]['push'](..._0x4228b8);}));})),_0x2a43b2['data_transfer']={},await Promise[_0xa3a438(0x153)](_0x2a43b2['map'](async _0x355d66=>{var _0xb68985=_0xa3a438;_0x2a43b2[_0xb68985(0x161)][_0x355d66['invoice']]=[],await Promise['all'](_0x355d66[_0xb68985(0x125)][_0xb68985(0x14c)](async _0x14a137=>{var _0x597465=_0xb68985;const _0x4f493f=await transfers_finished[_0x597465(0x150)]([{'$unwind':_0x597465(0x15d)},{'$match':{'product.id_transaction':_0x14a137[_0x597465(0x180)][_0x597465(0x17d)](),'product.from_invoice':_0x14a137[_0x597465(0x162)]}},{'$project':{'_id':_0x597465(0x167),'product_name':_0x597465(0x14d),'product_code':'$product.product_code','quantity_available':_0x597465(0x178),'warehouse_name':_0x597465(0x16a),'warehouse_room':_0x597465(0x13a),'product_invoice':'$product.to_room_name','invoice':_0x597465(0x17e),'id_transaction_from':_0x597465(0x120),'date':_0x597465(0x181),'production_date':'$product.production_date','expiry_date':_0x597465(0x141),'UOM':'$product.unit'}}]);_0x4f493f['length']>0x0&&_0x2a43b2['data_transfer'][_0x355d66['invoice']]['push'](..._0x4f493f);}));})),_0x5d2c08[_0xa3a438(0x11f)]({'purchases_warehouse':_0x2a43b2,'data_sales':_0x2a43b2[_0xa3a438(0x142)],'data_adjustment':_0x2a43b2[_0xa3a438(0x165)],'data_transfer':_0x2a43b2[_0xa3a438(0x161)]});}}}),router[a0_0x42f059(0x12a)](a0_0x42f059(0x17f),auth,async(_0x63fb96,_0x51b4b3)=>{var _0x1439cf=a0_0x42f059;try{const _0x25e9fb=_0x63fb96[_0x1439cf(0x185)]['id'];var _0x242040=await purchases_finished[_0x1439cf(0x133)](_0x25e9fb);const _0x5f393c=await master_shop[_0x1439cf(0x144)](),_0x53288f=_0x63fb96[_0x1439cf(0x182)],_0x14112f=await profile[_0x1439cf(0x179)]({'email':_0x53288f[_0x1439cf(0x170)]});if(_0x5f393c[0x0][_0x1439cf(0x175)]==_0x1439cf(0x12c))var _0x31bce0=users[_0x1439cf(0x122)];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]==_0x1439cf(0x12b))var _0x31bce0=users['Hindi'];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]=='German')var _0x31bce0=users[_0x1439cf(0x152)];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]=='Spanish')var _0x31bce0=users[_0x1439cf(0x13d)];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]=='French')var _0x31bce0=users[_0x1439cf(0x184)];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]==_0x1439cf(0x154))var _0x31bce0=users[_0x1439cf(0x143)];else{if(_0x5f393c[0x0]['language']==_0x1439cf(0x173))var _0x31bce0=users[_0x1439cf(0x173)];else{if(_0x5f393c[0x0][_0x1439cf(0x175)]=='Arabic\x20(ae)')var _0x31bce0=users[_0x1439cf(0x146)];}}}}}}}_0x51b4b3['render']('view_table',{'success':_0x63fb96[_0x1439cf(0x13f)]('success'),'errors':_0x63fb96[_0x1439cf(0x13f)]('errors'),'master_shop':_0x5f393c,'profile':_0x14112f,'role':_0x53288f,'language':_0x31bce0,'data':_0x242040});}catch(_0x357a35){_0x51b4b3['json'](_0x357a35);}}),router[a0_0x42f059(0x12a)](a0_0x42f059(0x157),auth,async(_0x49503d,_0x339ae7)=>{var _0x527032=a0_0x42f059;try{const _0x510cb2=_0x49503d[_0x527032(0x185)]['id'];var _0x399d9d=await sales_finished[_0x527032(0x133)](_0x510cb2);const _0x599a4c=await master_shop['find'](),_0x267b78=_0x49503d[_0x527032(0x182)],_0x3fc651=await profile[_0x527032(0x179)]({'email':_0x267b78[_0x527032(0x170)]});if(_0x599a4c[0x0][_0x527032(0x175)]=='English\x20(US)')var _0x3c4e7f=users[_0x527032(0x122)];else{if(_0x599a4c[0x0][_0x527032(0x175)]==_0x527032(0x12b))var _0x3c4e7f=users[_0x527032(0x12b)];else{if(_0x599a4c[0x0][_0x527032(0x175)]==_0x527032(0x152))var _0x3c4e7f=users[_0x527032(0x152)];else{if(_0x599a4c[0x0]['language']=='Spanish')var _0x3c4e7f=users[_0x527032(0x13d)];else{if(_0x599a4c[0x0][_0x527032(0x175)]==_0x527032(0x184))var _0x3c4e7f=users[_0x527032(0x184)];else{if(_0x599a4c[0x0][_0x527032(0x175)]==_0x527032(0x154))var _0x3c4e7f=users[_0x527032(0x143)];else{if(_0x599a4c[0x0][_0x527032(0x175)]=='Chinese')var _0x3c4e7f=users[_0x527032(0x173)];else{if(_0x599a4c[0x0]['language']==_0x527032(0x136))var _0x3c4e7f=users[_0x527032(0x146)];}}}}}}}_0x339ae7['render'](_0x527032(0x130),{'success':_0x49503d['flash'](_0x527032(0x140)),'errors':_0x49503d[_0x527032(0x13f)]('errors'),'master_shop':_0x599a4c,'profile':_0x3fc651,'role':_0x267b78,'language':_0x3c4e7f,'data':_0x399d9d});}catch(_0x568c60){_0x339ae7[_0x527032(0x11f)](_0x568c60);}}),router[a0_0x42f059(0x12a)]('/viewdata_tf_fg/:id',auth,async(_0x3921b6,_0x2dd21f)=>{var _0x1068c3=a0_0x42f059;try{const _0x3d9175=_0x3921b6[_0x1068c3(0x185)]['id'];var _0xb8b689=await transfers_finished['findById'](_0x3d9175);const _0x493ecf=await master_shop[_0x1068c3(0x144)](),_0x29a3ab=_0x3921b6[_0x1068c3(0x182)],_0x4d3d6e=await profile[_0x1068c3(0x179)]({'email':_0x29a3ab[_0x1068c3(0x170)]});if(_0x493ecf[0x0][_0x1068c3(0x175)]=='English\x20(US)')var _0x58da4b=users[_0x1068c3(0x122)];else{if(_0x493ecf[0x0]['language']==_0x1068c3(0x12b))var _0x58da4b=users['Hindi'];else{if(_0x493ecf[0x0]['language']==_0x1068c3(0x152))var _0x58da4b=users['German'];else{if(_0x493ecf[0x0][_0x1068c3(0x175)]==_0x1068c3(0x13d))var _0x58da4b=users[_0x1068c3(0x13d)];else{if(_0x493ecf[0x0][_0x1068c3(0x175)]==_0x1068c3(0x184))var _0x58da4b=users[_0x1068c3(0x184)];else{if(_0x493ecf[0x0][_0x1068c3(0x175)]==_0x1068c3(0x154))var _0x58da4b=users[_0x1068c3(0x143)];else{if(_0x493ecf[0x0][_0x1068c3(0x175)]=='Chinese')var _0x58da4b=users[_0x1068c3(0x173)];else{if(_0x493ecf[0x0]['language']=='Arabic\x20(ae)')var _0x58da4b=users[_0x1068c3(0x146)];}}}}}}}_0x2dd21f[_0x1068c3(0x163)](_0x1068c3(0x168),{'success':_0x3921b6[_0x1068c3(0x13f)](_0x1068c3(0x140)),'errors':_0x3921b6['flash'](_0x1068c3(0x174)),'master_shop':_0x493ecf,'profile':_0x4d3d6e,'role':_0x29a3ab,'language':_0x58da4b,'data':_0xb8b689});}catch(_0x1e641c){_0x2dd21f[_0x1068c3(0x11f)](_0x1e641c);}}),router[a0_0x42f059(0x12a)](a0_0x42f059(0x186),auth,async(_0x162013,_0xf1ec45)=>{var _0x10e8cb=a0_0x42f059;try{const {username:_0x1c77cb,email:_0x4b61b5,role:_0x31caa7}=_0x162013[_0x10e8cb(0x182)],_0xb6b35c=_0x162013['user'],_0x5176de=await profile[_0x10e8cb(0x179)]({'email':_0xb6b35c[_0x10e8cb(0x170)]}),_0x59bc2d=await master_shop[_0x10e8cb(0x144)](),_0x5833a9=await warehouse[_0x10e8cb(0x150)]([{'$match':{'status':_0x10e8cb(0x16c),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x10e8cb(0x16b),'name':{'$first':'$name'}}}]);if(_0x59bc2d[0x0]['language']=='English\x20(US)')var _0x451a27=users[_0x10e8cb(0x122)];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]=='Hindi')var _0x451a27=users['Hindi'];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]==_0x10e8cb(0x152))var _0x451a27=users[_0x10e8cb(0x152)];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]==_0x10e8cb(0x13d))var _0x451a27=users[_0x10e8cb(0x13d)];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]==_0x10e8cb(0x184))var _0x451a27=users[_0x10e8cb(0x184)];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]==_0x10e8cb(0x154))var _0x451a27=users[_0x10e8cb(0x143)];else{if(_0x59bc2d[0x0][_0x10e8cb(0x175)]==_0x10e8cb(0x173))var _0x451a27=users[_0x10e8cb(0x173)];else{if(_0x59bc2d[0x0]['language']==_0x10e8cb(0x136))var _0x451a27=users[_0x10e8cb(0x146)];}}}}}}}_0xf1ec45['render'](_0x10e8cb(0x159),{'success':_0x162013[_0x10e8cb(0x13f)](_0x10e8cb(0x140)),'errors':_0x162013[_0x10e8cb(0x13f)]('errors'),'role':_0xb6b35c,'profile':_0x5176de,'master_shop':_0x59bc2d,'dataProcess':_0x5833a9,'language':_0x451a27});}catch(_0x30b639){console['log'](_0x30b639);}}),module[a0_0x42f059(0x183)]=router;