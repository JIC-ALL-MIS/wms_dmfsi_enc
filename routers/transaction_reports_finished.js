var a0_0x60a2c2=a0_0xe16a;(function(_0x23fef1,_0x2e5de2){var _0x111bcc=a0_0xe16a,_0x13c73d=_0x23fef1();while(!![]){try{var _0x3dc039=parseInt(_0x111bcc(0xce))/0x1*(-parseInt(_0x111bcc(0xb2))/0x2)+-parseInt(_0x111bcc(0xdf))/0x3*(parseInt(_0x111bcc(0xb7))/0x4)+parseInt(_0x111bcc(0xe3))/0x5*(-parseInt(_0x111bcc(0xad))/0x6)+-parseInt(_0x111bcc(0xd5))/0x7*(parseInt(_0x111bcc(0xc5))/0x8)+-parseInt(_0x111bcc(0xb3))/0x9*(-parseInt(_0x111bcc(0xc4))/0xa)+parseInt(_0x111bcc(0xaf))/0xb*(-parseInt(_0x111bcc(0xb0))/0xc)+parseInt(_0x111bcc(0xb9))/0xd;if(_0x3dc039===_0x2e5de2)break;else _0x13c73d['push'](_0x13c73d['shift']());}catch(_0x5ecb0b){_0x13c73d['push'](_0x13c73d['shift']());}}}(a0_0x66d2,0xde8f3));function a0_0xe16a(_0x54f99f,_0x53c382){var _0x66d29f=a0_0x66d2();return a0_0xe16a=function(_0xe16a69,_0x40abd6){_0xe16a69=_0xe16a69-0xad;var _0x148144=_0x66d29f[_0xe16a69];return _0x148144;},a0_0xe16a(_0x54f99f,_0x53c382);}const express=require('express'),app=express(),router=express[a0_0x60a2c2(0xba)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x60a2c2(0xae)),auth=require(a0_0x60a2c2(0xc1)),users=require(a0_0x60a2c2(0xb6)),nodemailer=require('nodemailer');function a0_0x66d2(){var _0x58c45b=['$date','errors','view_og_table','1024468pUGuGa','email','language','params','$sale_product','body','success','679SPOPfY','/viewdata_inc_fg/:id','Hindi','$name','English','$invoice','length','exports','$product','French','12723CPjauK','get','Arabic\x20(ae)','German','5pFsuQR','view_table','findOne','$warehouse_name','aggregate','4939806BTSUwj','../models/all_models','110uFfIBQ','1319496SWYjBB','json','2UoPAPX','7893GIeDJD','/reports','user','../public/language/languages.json','64jMlwSt','post','56857840mqGqzm','Router','Finished\x20Goods','English\x20(US)','Arabic','/viewdata_tf_fg/:id','Portuguese','Portuguese\x20(BR)','../middleware/auth','findById','/view','14810IvWbkT','143976YFmPWl','Chinese','render','flash','Spanish','find'];a0_0x66d2=function(){return _0x58c45b;};return a0_0x66d2();}router['get'](a0_0x60a2c2(0xc3),auth,async(_0x563a6f,_0x493f20)=>{var _0x11082f=a0_0x60a2c2;try{const {username:_0x7621d2,email:_0x3ce17c,role:_0x2df213}=_0x563a6f[_0x11082f(0xb5)],_0x1f3d1b=_0x563a6f['user'],_0x218346=await profile[_0x11082f(0xe5)]({'email':_0x1f3d1b[_0x11082f(0xcf)]}),_0x161fdd=await master_shop[_0x11082f(0xca)](),_0x5814ee=await warehouse[_0x11082f(0xe7)]([{'$match':{'status':'Enabled','warehouse_category':_0x11082f(0xbb)}},{'$group':{'_id':_0x11082f(0xd8),'name':{'$first':_0x11082f(0xd8)}}}]);if(_0x161fdd[0x0][_0x11082f(0xd0)]==_0x11082f(0xbc))var _0x5ba60d=users[_0x11082f(0xd9)];else{if(_0x161fdd[0x0][_0x11082f(0xd0)]==_0x11082f(0xd7))var _0x5ba60d=users[_0x11082f(0xd7)];else{if(_0x161fdd[0x0][_0x11082f(0xd0)]==_0x11082f(0xe2))var _0x5ba60d=users[_0x11082f(0xe2)];else{if(_0x161fdd[0x0][_0x11082f(0xd0)]=='Spanish')var _0x5ba60d=users[_0x11082f(0xc9)];else{if(_0x161fdd[0x0][_0x11082f(0xd0)]==_0x11082f(0xde))var _0x5ba60d=users[_0x11082f(0xde)];else{if(_0x161fdd[0x0]['language']==_0x11082f(0xc0))var _0x5ba60d=users[_0x11082f(0xbf)];else{if(_0x161fdd[0x0]['language']=='Chinese')var _0x5ba60d=users[_0x11082f(0xc6)];else{if(_0x161fdd[0x0][_0x11082f(0xd0)]==_0x11082f(0xe1))var _0x5ba60d=users[_0x11082f(0xbd)];}}}}}}}_0x493f20['render']('transaction_finished',{'success':_0x563a6f['flash'](_0x11082f(0xd4)),'errors':_0x563a6f['flash']('errors'),'role':_0x1f3d1b,'profile':_0x218346,'master_shop':_0x161fdd,'dataProcess':_0x5814ee,'language':_0x5ba60d});}catch(_0x5150f2){console['log'](_0x5150f2);}}),router[a0_0x60a2c2(0xb8)](a0_0x60a2c2(0xb4),auth,async(_0x5f4e41,_0x3bc2df)=>{var _0x484a06=a0_0x60a2c2;const {product_category:_0x25cc40,transaction_category:_0x452a68,transaction_date_from:_0x3b4970,transaction_date_to:_0x17ab40,warehouse_category:_0x1d4b40,item_code:_0x553c6c}=_0x5f4e41[_0x484a06(0xd3)];var _0x4e8596;if(_0x25cc40=='rm'){}else{if(_0x25cc40=='fg')switch(_0x452a68){case'IC':_0x553c6c[_0x484a06(0xdb)]>0x0?_0x4e8596=await purchases_finished[_0x484a06(0xe7)]([{'$match':{'warehouse_name':_0x1d4b40,'date':{'$gte':_0x3b4970,'$lte':_0x17ab40}}},{'$unwind':_0x484a06(0xdd)},{'$match':{'$or':[{'product.product_code':_0x553c6c}]}},{'$group':{'_id':_0x484a06(0xda),'date':{'$first':_0x484a06(0xcb)},'warehouse_name':{'$first':_0x484a06(0xe6)},'products':{'$push':'$product'}}}]):_0x4e8596=await purchases_finished[_0x484a06(0xe7)]([{'$match':{'warehouse_name':_0x1d4b40,'date':{'$gte':_0x3b4970,'$lte':_0x17ab40}}},{'$unwind':_0x484a06(0xdd)},{'$group':{'_id':'$invoice','date':{'$first':_0x484a06(0xcb)},'warehouse_name':{'$first':_0x484a06(0xe6)},'products':{'$push':_0x484a06(0xdd)}}}]);break;case'OG':_0x553c6c[_0x484a06(0xdb)]>0x0?_0x4e8596=await sales_finished[_0x484a06(0xe7)]([{'$match':{'warehouse_name':_0x1d4b40,'date':{'$gte':_0x3b4970,'$lte':_0x17ab40}}},{'$unwind':_0x484a06(0xd2)},{'$match':{'$or':[{'sale_product.product_code':_0x553c6c}]}},{'$group':{'_id':_0x484a06(0xda),'date':{'$first':_0x484a06(0xcb)},'warehouse_name':{'$first':_0x484a06(0xe6)},'products':{'$push':_0x484a06(0xd2)}}}]):_0x4e8596=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0x1d4b40,'date':{'$gte':_0x3b4970,'$lte':_0x17ab40}}},{'$unwind':_0x484a06(0xd2)},{'$group':{'_id':_0x484a06(0xda),'date':{'$first':_0x484a06(0xcb)},'warehouse_name':{'$first':_0x484a06(0xe6)},'products':{'$push':_0x484a06(0xd2)}}}]);break;case'AJ':break;case'TF':_0x4e8596=await transfers_finished[_0x484a06(0xca)]({'warehouse':_0x1d4b40,'date':{'$gte':_0x3b4970,'$lte':_0x17ab40}});break;}}_0x3bc2df[_0x484a06(0xb1)]({'data':_0x4e8596});}),router[a0_0x60a2c2(0xe0)](a0_0x60a2c2(0xd6),auth,async(_0x43e532,_0x50ce79)=>{var _0x5f5c69=a0_0x60a2c2;try{const _0x47f748=_0x43e532[_0x5f5c69(0xd1)]['id'];var _0x2f2585=await purchases_finished[_0x5f5c69(0xc2)](_0x47f748);const _0x6ae54a=await master_shop[_0x5f5c69(0xca)](),_0x38530b=_0x43e532['user'],_0x4693d3=await profile[_0x5f5c69(0xe5)]({'email':_0x38530b[_0x5f5c69(0xcf)]});if(_0x6ae54a[0x0][_0x5f5c69(0xd0)]==_0x5f5c69(0xbc))var _0x4413c3=users[_0x5f5c69(0xd9)];else{if(_0x6ae54a[0x0][_0x5f5c69(0xd0)]==_0x5f5c69(0xd7))var _0x4413c3=users[_0x5f5c69(0xd7)];else{if(_0x6ae54a[0x0][_0x5f5c69(0xd0)]=='German')var _0x4413c3=users[_0x5f5c69(0xe2)];else{if(_0x6ae54a[0x0][_0x5f5c69(0xd0)]==_0x5f5c69(0xc9))var _0x4413c3=users[_0x5f5c69(0xc9)];else{if(_0x6ae54a[0x0]['language']==_0x5f5c69(0xde))var _0x4413c3=users[_0x5f5c69(0xde)];else{if(_0x6ae54a[0x0]['language']==_0x5f5c69(0xc0))var _0x4413c3=users[_0x5f5c69(0xbf)];else{if(_0x6ae54a[0x0]['language']==_0x5f5c69(0xc6))var _0x4413c3=users[_0x5f5c69(0xc6)];else{if(_0x6ae54a[0x0]['language']=='Arabic\x20(ae)')var _0x4413c3=users[_0x5f5c69(0xbd)];}}}}}}}_0x50ce79[_0x5f5c69(0xc7)](_0x5f5c69(0xe4),{'success':_0x43e532['flash'](_0x5f5c69(0xd4)),'errors':_0x43e532[_0x5f5c69(0xc8)](_0x5f5c69(0xcc)),'master_shop':_0x6ae54a,'profile':_0x4693d3,'role':_0x38530b,'language':_0x4413c3,'data':_0x2f2585});}catch(_0x39c2a4){_0x50ce79[_0x5f5c69(0xb1)](_0x39c2a4);}}),router[a0_0x60a2c2(0xe0)]('/viewdata_og_fg/:id',auth,async(_0xad806f,_0x2517ef)=>{var _0x45d951=a0_0x60a2c2;try{const _0x453c58=_0xad806f[_0x45d951(0xd1)]['id'];var _0x2bb10b=await sales_finished[_0x45d951(0xc2)](_0x453c58);const _0x269c00=await master_shop[_0x45d951(0xca)](),_0x3a1b96=_0xad806f[_0x45d951(0xb5)],_0x2b624f=await profile['findOne']({'email':_0x3a1b96[_0x45d951(0xcf)]});if(_0x269c00[0x0]['language']==_0x45d951(0xbc))var _0x52a7af=users[_0x45d951(0xd9)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]==_0x45d951(0xd7))var _0x52a7af=users[_0x45d951(0xd7)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]==_0x45d951(0xe2))var _0x52a7af=users[_0x45d951(0xe2)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]==_0x45d951(0xc9))var _0x52a7af=users[_0x45d951(0xc9)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]==_0x45d951(0xde))var _0x52a7af=users[_0x45d951(0xde)];else{if(_0x269c00[0x0]['language']==_0x45d951(0xc0))var _0x52a7af=users[_0x45d951(0xbf)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]=='Chinese')var _0x52a7af=users[_0x45d951(0xc6)];else{if(_0x269c00[0x0][_0x45d951(0xd0)]==_0x45d951(0xe1))var _0x52a7af=users[_0x45d951(0xbd)];}}}}}}}_0x2517ef[_0x45d951(0xc7)](_0x45d951(0xcd),{'success':_0xad806f[_0x45d951(0xc8)](_0x45d951(0xd4)),'errors':_0xad806f[_0x45d951(0xc8)]('errors'),'master_shop':_0x269c00,'profile':_0x2b624f,'role':_0x3a1b96,'language':_0x52a7af,'data':_0x2bb10b});}catch(_0x1b23b3){_0x2517ef[_0x45d951(0xb1)](_0x1b23b3);}}),router[a0_0x60a2c2(0xe0)](a0_0x60a2c2(0xbe),auth,async(_0x1656a0,_0x50dad6)=>{var _0x1a5e4a=a0_0x60a2c2;try{const _0x22c0cd=_0x1656a0[_0x1a5e4a(0xd1)]['id'];var _0x139776=await transfers_finished['findById'](_0x22c0cd);const _0x429002=await master_shop['find'](),_0x25fd8f=_0x1656a0[_0x1a5e4a(0xb5)],_0x526701=await profile['findOne']({'email':_0x25fd8f[_0x1a5e4a(0xcf)]});if(_0x429002[0x0][_0x1a5e4a(0xd0)]==_0x1a5e4a(0xbc))var _0x3fa2e7=users[_0x1a5e4a(0xd9)];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]=='Hindi')var _0x3fa2e7=users[_0x1a5e4a(0xd7)];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]==_0x1a5e4a(0xe2))var _0x3fa2e7=users[_0x1a5e4a(0xe2)];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]=='Spanish')var _0x3fa2e7=users['Spanish'];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]=='French')var _0x3fa2e7=users['French'];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]==_0x1a5e4a(0xc0))var _0x3fa2e7=users['Portuguese'];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]==_0x1a5e4a(0xc6))var _0x3fa2e7=users[_0x1a5e4a(0xc6)];else{if(_0x429002[0x0][_0x1a5e4a(0xd0)]==_0x1a5e4a(0xe1))var _0x3fa2e7=users['Arabic'];}}}}}}}_0x50dad6[_0x1a5e4a(0xc7)]('view_tf_table',{'success':_0x1656a0[_0x1a5e4a(0xc8)](_0x1a5e4a(0xd4)),'errors':_0x1656a0[_0x1a5e4a(0xc8)]('errors'),'master_shop':_0x429002,'profile':_0x526701,'role':_0x25fd8f,'language':_0x3fa2e7,'data':_0x139776});}catch(_0x42ed67){_0x50dad6[_0x1a5e4a(0xb1)](_0x42ed67);}}),module[a0_0x60a2c2(0xdc)]=router;