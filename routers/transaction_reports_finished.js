var a0_0x41881a=a0_0x4445;function a0_0x4445(_0x25becf,_0x1bf8dc){var _0x5881e0=a0_0x5881();return a0_0x4445=function(_0x444533,_0x544b2a){_0x444533=_0x444533-0x152;var _0x19aaa1=_0x5881e0[_0x444533];return _0x19aaa1;},a0_0x4445(_0x25becf,_0x1bf8dc);}(function(_0x3620f4,_0x21de0f){var _0x3987d6=a0_0x4445,_0x1e543b=_0x3620f4();while(!![]){try{var _0x158e0b=-parseInt(_0x3987d6(0x159))/0x1*(parseInt(_0x3987d6(0x17e))/0x2)+parseInt(_0x3987d6(0x16a))/0x3*(-parseInt(_0x3987d6(0x15e))/0x4)+parseInt(_0x3987d6(0x177))/0x5+parseInt(_0x3987d6(0x179))/0x6*(parseInt(_0x3987d6(0x173))/0x7)+parseInt(_0x3987d6(0x170))/0x8+-parseInt(_0x3987d6(0x184))/0x9*(parseInt(_0x3987d6(0x181))/0xa)+parseInt(_0x3987d6(0x17c))/0xb;if(_0x158e0b===_0x21de0f)break;else _0x1e543b['push'](_0x1e543b['shift']());}catch(_0x52a2c6){_0x1e543b['push'](_0x1e543b['shift']());}}}(a0_0x5881,0xdc0d2));function a0_0x5881(){var _0x4e96af=['2751478txLuSJ','../models/all_models','$warehouse_name','8365830DCseLj','express','post','9hOIEkJ','findById','length','errors','Portuguese','get','$date','email','Portuguese\x20(BR)','English','$sale_product','aggregate','/reports','language','flash','1eAZjOW','Finished\x20Goods','$product','success','render','636timtMC','view_og_table','/viewdata_og_fg/:id','body','json','Spanish','Hindi','Chinese','French','$invoice','findOne','/viewdata_inc_fg/:id','20265bkadcG','German','$name','../middleware/auth','Arabic\x20(ae)','params','2872584DdzZcm','../public/language/languages.json','/view','1064056NkqNYg','log','user','find','1878920jfMUpU','Arabic','12ZNRNFF','English\x20(US)','view_tf_table','34637064FSQLRJ','nodemailer'];a0_0x5881=function(){return _0x4e96af;};return a0_0x5881();}const express=require(a0_0x41881a(0x182)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x41881a(0x17f)),auth=require(a0_0x41881a(0x16d)),users=require(a0_0x41881a(0x171)),nodemailer=require(a0_0x41881a(0x17d));router['get'](a0_0x41881a(0x172),auth,async(_0x1017f9,_0x255c2e)=>{var _0x4b79c9=a0_0x41881a;try{const {username:_0x40309e,email:_0x37260d,role:_0x103bfd}=_0x1017f9[_0x4b79c9(0x175)],_0x83903c=_0x1017f9['user'],_0x5bb4e5=await profile[_0x4b79c9(0x168)]({'email':_0x83903c[_0x4b79c9(0x18b)]}),_0x1dd123=await master_shop['find'](),_0x9f978e=await warehouse[_0x4b79c9(0x155)]([{'$match':{'status':'Enabled','warehouse_category':_0x4b79c9(0x15a)}},{'$group':{'_id':_0x4b79c9(0x16c),'name':{'$first':_0x4b79c9(0x16c)}}}]);if(_0x1dd123[0x0][_0x4b79c9(0x157)]==_0x4b79c9(0x17a))var _0x4e9072=users[_0x4b79c9(0x153)];else{if(_0x1dd123[0x0][_0x4b79c9(0x157)]==_0x4b79c9(0x164))var _0x4e9072=users['Hindi'];else{if(_0x1dd123[0x0][_0x4b79c9(0x157)]==_0x4b79c9(0x16b))var _0x4e9072=users['German'];else{if(_0x1dd123[0x0][_0x4b79c9(0x157)]=='Spanish')var _0x4e9072=users['Spanish'];else{if(_0x1dd123[0x0][_0x4b79c9(0x157)]==_0x4b79c9(0x166))var _0x4e9072=users['French'];else{if(_0x1dd123[0x0]['language']==_0x4b79c9(0x152))var _0x4e9072=users[_0x4b79c9(0x188)];else{if(_0x1dd123[0x0][_0x4b79c9(0x157)]==_0x4b79c9(0x165))var _0x4e9072=users[_0x4b79c9(0x165)];else{if(_0x1dd123[0x0]['language']==_0x4b79c9(0x16e))var _0x4e9072=users[_0x4b79c9(0x178)];}}}}}}}_0x255c2e[_0x4b79c9(0x15d)]('transaction_finished',{'success':_0x1017f9[_0x4b79c9(0x158)](_0x4b79c9(0x15c)),'errors':_0x1017f9[_0x4b79c9(0x158)](_0x4b79c9(0x187)),'role':_0x83903c,'profile':_0x5bb4e5,'master_shop':_0x1dd123,'dataProcess':_0x9f978e,'language':_0x4e9072});}catch(_0x199e85){console[_0x4b79c9(0x174)](_0x199e85);}}),router[a0_0x41881a(0x183)](a0_0x41881a(0x156),auth,async(_0x18eae1,_0xa96a32)=>{var _0x2aa2b8=a0_0x41881a;const {product_category:_0x19cfe5,transaction_category:_0x22198f,transaction_date_from:_0x273d0e,transaction_date_to:_0x52c0f5,warehouse_category:_0x24f813,item_code:_0x1692bd}=_0x18eae1[_0x2aa2b8(0x161)];var _0x5e4c16;if(_0x19cfe5=='rm'){}else{if(_0x19cfe5=='fg')switch(_0x22198f){case'IC':_0x1692bd[_0x2aa2b8(0x186)]>0x0?_0x5e4c16=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x24f813,'date':{'$gte':_0x273d0e,'$lte':_0x52c0f5}}},{'$unwind':_0x2aa2b8(0x15b)},{'$match':{'$or':[{'product.product_code':_0x1692bd}]}},{'$group':{'_id':_0x2aa2b8(0x167),'date':{'$first':_0x2aa2b8(0x18a)},'warehouse_name':{'$first':_0x2aa2b8(0x180)},'products':{'$push':_0x2aa2b8(0x15b)}}}]):_0x5e4c16=await purchases_finished[_0x2aa2b8(0x155)]([{'$match':{'warehouse_name':_0x24f813,'date':{'$gte':_0x273d0e,'$lte':_0x52c0f5}}},{'$unwind':'$product'},{'$group':{'_id':_0x2aa2b8(0x167),'date':{'$first':_0x2aa2b8(0x18a)},'warehouse_name':{'$first':_0x2aa2b8(0x180)},'products':{'$push':'$product'}}}]);break;case'OG':_0x1692bd[_0x2aa2b8(0x186)]>0x0?_0x5e4c16=await sales_finished[_0x2aa2b8(0x155)]([{'$match':{'warehouse_name':_0x24f813,'date':{'$gte':_0x273d0e,'$lte':_0x52c0f5}}},{'$unwind':_0x2aa2b8(0x154)},{'$match':{'$or':[{'sale_product.product_code':_0x1692bd}]}},{'$group':{'_id':'$invoice','date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x2aa2b8(0x154)}}}]):_0x5e4c16=await sales_finished[_0x2aa2b8(0x155)]([{'$match':{'warehouse_name':_0x24f813,'date':{'$gte':_0x273d0e,'$lte':_0x52c0f5}}},{'$unwind':_0x2aa2b8(0x154)},{'$group':{'_id':_0x2aa2b8(0x167),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x2aa2b8(0x180)},'products':{'$push':_0x2aa2b8(0x154)}}}]);break;case'AJ':break;case'TF':_0x5e4c16=await transfers_finished['find']({'warehouse':_0x24f813,'date':{'$gte':_0x273d0e,'$lte':_0x52c0f5}});break;}}_0xa96a32[_0x2aa2b8(0x162)]({'data':_0x5e4c16});}),router['get'](a0_0x41881a(0x169),auth,async(_0x1fcc33,_0xb1345a)=>{var _0x526b05=a0_0x41881a;try{const _0x43d26d=_0x1fcc33[_0x526b05(0x16f)]['id'];var _0x1effc3=await purchases_finished[_0x526b05(0x185)](_0x43d26d);const _0x5e5240=await master_shop[_0x526b05(0x176)](),_0x34e3c8=_0x1fcc33[_0x526b05(0x175)],_0x69573b=await profile[_0x526b05(0x168)]({'email':_0x34e3c8[_0x526b05(0x18b)]});if(_0x5e5240[0x0][_0x526b05(0x157)]=='English\x20(US)')var _0x35eb17=users[_0x526b05(0x153)];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x164))var _0x35eb17=users[_0x526b05(0x164)];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x16b))var _0x35eb17=users[_0x526b05(0x16b)];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x163))var _0x35eb17=users['Spanish'];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x166))var _0x35eb17=users[_0x526b05(0x166)];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x152))var _0x35eb17=users['Portuguese'];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x165))var _0x35eb17=users[_0x526b05(0x165)];else{if(_0x5e5240[0x0][_0x526b05(0x157)]==_0x526b05(0x16e))var _0x35eb17=users[_0x526b05(0x178)];}}}}}}}_0xb1345a[_0x526b05(0x15d)]('view_table',{'success':_0x1fcc33[_0x526b05(0x158)](_0x526b05(0x15c)),'errors':_0x1fcc33[_0x526b05(0x158)](_0x526b05(0x187)),'master_shop':_0x5e5240,'profile':_0x69573b,'role':_0x34e3c8,'language':_0x35eb17,'data':_0x1effc3});}catch(_0x17e1e9){_0xb1345a[_0x526b05(0x162)](_0x17e1e9);}}),router[a0_0x41881a(0x189)](a0_0x41881a(0x160),auth,async(_0x1651ec,_0x21b839)=>{var _0x52d77f=a0_0x41881a;try{const _0x2a73ce=_0x1651ec[_0x52d77f(0x16f)]['id'];var _0x26e45e=await sales_finished[_0x52d77f(0x185)](_0x2a73ce);const _0x4683bb=await master_shop[_0x52d77f(0x176)](),_0x2f0cb8=_0x1651ec[_0x52d77f(0x175)],_0x1833e1=await profile[_0x52d77f(0x168)]({'email':_0x2f0cb8['email']});if(_0x4683bb[0x0][_0x52d77f(0x157)]=='English\x20(US)')var _0x513650=users[_0x52d77f(0x153)];else{if(_0x4683bb[0x0]['language']==_0x52d77f(0x164))var _0x513650=users[_0x52d77f(0x164)];else{if(_0x4683bb[0x0][_0x52d77f(0x157)]==_0x52d77f(0x16b))var _0x513650=users[_0x52d77f(0x16b)];else{if(_0x4683bb[0x0]['language']==_0x52d77f(0x163))var _0x513650=users['Spanish'];else{if(_0x4683bb[0x0]['language']==_0x52d77f(0x166))var _0x513650=users[_0x52d77f(0x166)];else{if(_0x4683bb[0x0][_0x52d77f(0x157)]=='Portuguese\x20(BR)')var _0x513650=users[_0x52d77f(0x188)];else{if(_0x4683bb[0x0][_0x52d77f(0x157)]==_0x52d77f(0x165))var _0x513650=users['Chinese'];else{if(_0x4683bb[0x0]['language']==_0x52d77f(0x16e))var _0x513650=users[_0x52d77f(0x178)];}}}}}}}_0x21b839[_0x52d77f(0x15d)](_0x52d77f(0x15f),{'success':_0x1651ec[_0x52d77f(0x158)](_0x52d77f(0x15c)),'errors':_0x1651ec[_0x52d77f(0x158)](_0x52d77f(0x187)),'master_shop':_0x4683bb,'profile':_0x1833e1,'role':_0x2f0cb8,'language':_0x513650,'data':_0x26e45e});}catch(_0xb3298d){_0x21b839['json'](_0xb3298d);}}),router['get']('/viewdata_tf_fg/:id',auth,async(_0x4c5663,_0x499429)=>{var _0x5c5cdb=a0_0x41881a;try{const _0x1c24b9=_0x4c5663[_0x5c5cdb(0x16f)]['id'];var _0x4576d7=await transfers_finished[_0x5c5cdb(0x185)](_0x1c24b9);const _0x11b706=await master_shop[_0x5c5cdb(0x176)](),_0x4ac87e=_0x4c5663[_0x5c5cdb(0x175)],_0x519e38=await profile[_0x5c5cdb(0x168)]({'email':_0x4ac87e[_0x5c5cdb(0x18b)]});if(_0x11b706[0x0]['language']==_0x5c5cdb(0x17a))var _0x43826a=users['English'];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]==_0x5c5cdb(0x164))var _0x43826a=users['Hindi'];else{if(_0x11b706[0x0]['language']==_0x5c5cdb(0x16b))var _0x43826a=users[_0x5c5cdb(0x16b)];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]=='Spanish')var _0x43826a=users[_0x5c5cdb(0x163)];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]==_0x5c5cdb(0x166))var _0x43826a=users['French'];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]==_0x5c5cdb(0x152))var _0x43826a=users[_0x5c5cdb(0x188)];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]==_0x5c5cdb(0x165))var _0x43826a=users[_0x5c5cdb(0x165)];else{if(_0x11b706[0x0][_0x5c5cdb(0x157)]=='Arabic\x20(ae)')var _0x43826a=users[_0x5c5cdb(0x178)];}}}}}}}_0x499429[_0x5c5cdb(0x15d)](_0x5c5cdb(0x17b),{'success':_0x4c5663[_0x5c5cdb(0x158)]('success'),'errors':_0x4c5663[_0x5c5cdb(0x158)](_0x5c5cdb(0x187)),'master_shop':_0x11b706,'profile':_0x519e38,'role':_0x4ac87e,'language':_0x43826a,'data':_0x4576d7});}catch(_0x31640c){_0x499429[_0x5c5cdb(0x162)](_0x31640c);}}),module['exports']=router;