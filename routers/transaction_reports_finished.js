var a0_0x2edadf=a0_0x4cb2;function a0_0x4cb2(_0x2fb924,_0x26862c){var _0x2f1d50=a0_0x2f1d();return a0_0x4cb2=function(_0x4cb2ba,_0x16ecf8){_0x4cb2ba=_0x4cb2ba-0x118;var _0x5323b5=_0x2f1d50[_0x4cb2ba];return _0x5323b5;},a0_0x4cb2(_0x2fb924,_0x26862c);}(function(_0x4cf555,_0x293b6e){var _0x80a793=a0_0x4cb2,_0x4035b5=_0x4cf555();while(!![]){try{var _0x3e9100=parseInt(_0x80a793(0x12a))/0x1*(-parseInt(_0x80a793(0x140))/0x2)+parseInt(_0x80a793(0x137))/0x3*(parseInt(_0x80a793(0x13e))/0x4)+-parseInt(_0x80a793(0x135))/0x5+parseInt(_0x80a793(0x11a))/0x6*(parseInt(_0x80a793(0x14d))/0x7)+-parseInt(_0x80a793(0x13d))/0x8+parseInt(_0x80a793(0x11f))/0x9*(-parseInt(_0x80a793(0x127))/0xa)+parseInt(_0x80a793(0x14a))/0xb;if(_0x3e9100===_0x293b6e)break;else _0x4035b5['push'](_0x4035b5['shift']());}catch(_0x36cfd0){_0x4035b5['push'](_0x4035b5['shift']());}}}(a0_0x2f1d,0x4fffe));function a0_0x2f1d(){var _0x3de15d=['render','aggregate','get','../middleware/auth','/viewdata_tf_fg/:id','1370nNQwPn','transaction_finished_raw','$sale_product','223TksISL','user','errors','$from_warehouse','$invoice','English','language','Hindi','params','/viewFG','flash','1812725XJAWGG','exports','577839aHffew','body','success','post','English\x20(US)','$date','4012720LaRGuk','12YFVEjx','$name','5378XoTUzm','find','$product','email','Arabic\x20(ae)','$warehouse_name','json','Spanish','Chinese','../models/all_models','11029150YNagfP','/reports','Arabic','15715ltgIxx','Router','view_tf_table','length','findOne','Enabled','Portuguese','findById','../public/language/languages.json','852IgDrHx','log','/viewdata_inc_fg/:id','Portuguese\x20(BR)','/viewdata_og_fg/:id','7083CXekrD','German','French'];a0_0x2f1d=function(){return _0x3de15d;};return a0_0x2f1d();}const express=require('express'),app=express(),router=express[a0_0x2edadf(0x14e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x2edadf(0x149)),auth=require(a0_0x2edadf(0x125)),users=require(a0_0x2edadf(0x119)),nodemailer=require('nodemailer');router[a0_0x2edadf(0x124)]('/view',auth,async(_0x363f6a,_0x11a70a)=>{var _0x3b74b2=a0_0x2edadf;try{const {username:_0x39268f,email:_0x46a7c0,role:_0x5ea12b}=_0x363f6a[_0x3b74b2(0x12b)],_0x44c381=_0x363f6a[_0x3b74b2(0x12b)],_0x323318=await profile[_0x3b74b2(0x151)]({'email':_0x44c381[_0x3b74b2(0x143)]}),_0x1017e1=await master_shop[_0x3b74b2(0x141)](),_0x2a6590=await warehouse[_0x3b74b2(0x123)]([{'$match':{'status':_0x3b74b2(0x152),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':'$name','name':{'$first':_0x3b74b2(0x13f)}}}]);if(_0x1017e1[0x0][_0x3b74b2(0x130)]==_0x3b74b2(0x13b))var _0x14210f=users[_0x3b74b2(0x12f)];else{if(_0x1017e1[0x0][_0x3b74b2(0x130)]==_0x3b74b2(0x131))var _0x14210f=users[_0x3b74b2(0x131)];else{if(_0x1017e1[0x0]['language']==_0x3b74b2(0x120))var _0x14210f=users[_0x3b74b2(0x120)];else{if(_0x1017e1[0x0][_0x3b74b2(0x130)]==_0x3b74b2(0x147))var _0x14210f=users[_0x3b74b2(0x147)];else{if(_0x1017e1[0x0][_0x3b74b2(0x130)]=='French')var _0x14210f=users['French'];else{if(_0x1017e1[0x0][_0x3b74b2(0x130)]=='Portuguese\x20(BR)')var _0x14210f=users['Portuguese'];else{if(_0x1017e1[0x0]['language']==_0x3b74b2(0x148))var _0x14210f=users[_0x3b74b2(0x148)];else{if(_0x1017e1[0x0][_0x3b74b2(0x130)]==_0x3b74b2(0x144))var _0x14210f=users[_0x3b74b2(0x14c)];}}}}}}}_0x11a70a['render']('transaction_finished',{'success':_0x363f6a[_0x3b74b2(0x134)](_0x3b74b2(0x139)),'errors':_0x363f6a[_0x3b74b2(0x134)](_0x3b74b2(0x12c)),'role':_0x44c381,'profile':_0x323318,'master_shop':_0x1017e1,'dataProcess':_0x2a6590,'language':_0x14210f});}catch(_0x4699c5){console['log'](_0x4699c5);}}),router[a0_0x2edadf(0x13a)](a0_0x2edadf(0x14b),auth,async(_0x3ceb6a,_0x3896d5)=>{var _0x531181=a0_0x2edadf;const {product_category:_0x21ce23,transaction_category:_0x5fee0c,transaction_date_from:_0x16ef1b,transaction_date_to:_0x377f25,warehouse_category:_0x4b225b,item_code:_0x34b97d}=_0x3ceb6a[_0x531181(0x138)];var _0x5aced9;if(_0x21ce23=='rm')switch(_0x5fee0c){case'IC':_0x34b97d[_0x531181(0x150)]>0x0?_0x5aced9=await purchases[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x142)},{'$match':{'$or':[{'product.product_code':_0x34b97d}]}},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':'$product'}}}]):_0x5aced9=await purchases[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x142)},{'$group':{'_id':'$invoice','date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':'$product'}}}]);break;case'OG':_0x34b97d['length']>0x0?_0x5aced9=await sales[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':'$sale_product'},{'$match':{'$or':[{'sale_product.product_code':_0x34b97d}]}},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x531181(0x129)}}}]):_0x5aced9=await sales[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x129)},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':_0x531181(0x129)}}}]);break;case'AJ':break;case'TF':_0x34b97d[_0x531181(0x150)]>0x0?_0x5aced9=await transfers[_0x531181(0x123)]([{'$match':{'from_warehouse':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':'$product'},{'$match':{'$or':[{'product.product_code':_0x34b97d}]}},{'$group':{'_id':'$invoice','date':{'$first':'$date'},'warehouse_name':{'$first':_0x531181(0x12d)},'products':{'$push':_0x531181(0x142)}}}]):_0x5aced9=await transfers[_0x531181(0x123)]([{'$match':{'from_warehouse':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x142)},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x12d)},'products':{'$push':'$product'}}}]);break;}else{if(_0x21ce23=='fg')switch(_0x5fee0c){case'IC':_0x34b97d[_0x531181(0x150)]>0x0?_0x5aced9=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x142)},{'$match':{'$or':[{'product.product_code':_0x34b97d}]}},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':_0x531181(0x142)}}}]):_0x5aced9=await purchases_finished[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x142)},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':_0x531181(0x142)}}}]);break;case'OG':_0x34b97d['length']>0x0?_0x5aced9=await sales_finished[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':'$sale_product'},{'$match':{'$or':[{'sale_product.product_code':_0x34b97d}]}},{'$group':{'_id':_0x531181(0x12e),'date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':_0x531181(0x129)}}}]):_0x5aced9=await sales_finished[_0x531181(0x123)]([{'$match':{'warehouse_name':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}}},{'$unwind':_0x531181(0x129)},{'$group':{'_id':'$invoice','date':{'$first':_0x531181(0x13c)},'warehouse_name':{'$first':_0x531181(0x145)},'products':{'$push':_0x531181(0x129)}}}]);break;case'AJ':break;case'TF':_0x5aced9=await transfers_finished[_0x531181(0x141)]({'warehouse':_0x4b225b,'date':{'$gte':_0x16ef1b,'$lte':_0x377f25}});break;}}_0x3896d5['json']({'data':_0x5aced9});}),router['get'](a0_0x2edadf(0x11c),auth,async(_0x2c14c8,_0x3f0911)=>{var _0x3469dd=a0_0x2edadf;try{const _0x5b3eec=_0x2c14c8[_0x3469dd(0x132)]['id'];var _0x40a404=await purchases_finished[_0x3469dd(0x118)](_0x5b3eec);const _0x4ac49c=await master_shop[_0x3469dd(0x141)](),_0x471db4=_0x2c14c8[_0x3469dd(0x12b)],_0x30c093=await profile[_0x3469dd(0x151)]({'email':_0x471db4['email']});if(_0x4ac49c[0x0][_0x3469dd(0x130)]==_0x3469dd(0x13b))var _0x5e7571=users[_0x3469dd(0x12f)];else{if(_0x4ac49c[0x0][_0x3469dd(0x130)]==_0x3469dd(0x131))var _0x5e7571=users[_0x3469dd(0x131)];else{if(_0x4ac49c[0x0]['language']==_0x3469dd(0x120))var _0x5e7571=users['German'];else{if(_0x4ac49c[0x0][_0x3469dd(0x130)]==_0x3469dd(0x147))var _0x5e7571=users['Spanish'];else{if(_0x4ac49c[0x0][_0x3469dd(0x130)]==_0x3469dd(0x121))var _0x5e7571=users[_0x3469dd(0x121)];else{if(_0x4ac49c[0x0][_0x3469dd(0x130)]==_0x3469dd(0x11d))var _0x5e7571=users['Portuguese'];else{if(_0x4ac49c[0x0]['language']==_0x3469dd(0x148))var _0x5e7571=users[_0x3469dd(0x148)];else{if(_0x4ac49c[0x0]['language']==_0x3469dd(0x144))var _0x5e7571=users[_0x3469dd(0x14c)];}}}}}}}_0x3f0911[_0x3469dd(0x122)]('view_table',{'success':_0x2c14c8[_0x3469dd(0x134)]('success'),'errors':_0x2c14c8['flash'](_0x3469dd(0x12c)),'master_shop':_0x4ac49c,'profile':_0x30c093,'role':_0x471db4,'language':_0x5e7571,'data':_0x40a404});}catch(_0x2fe2fb){_0x3f0911[_0x3469dd(0x146)](_0x2fe2fb);}}),router[a0_0x2edadf(0x124)](a0_0x2edadf(0x11e),auth,async(_0x24656f,_0x44d611)=>{var _0x3e3690=a0_0x2edadf;try{const _0x41315a=_0x24656f[_0x3e3690(0x132)]['id'];var _0x328f60=await sales_finished['findById'](_0x41315a);const _0x21dcd4=await master_shop['find'](),_0x3ff588=_0x24656f[_0x3e3690(0x12b)],_0x3446bc=await profile[_0x3e3690(0x151)]({'email':_0x3ff588[_0x3e3690(0x143)]});if(_0x21dcd4[0x0]['language']==_0x3e3690(0x13b))var _0x1af0f=users['English'];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]=='Hindi')var _0x1af0f=users[_0x3e3690(0x131)];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]==_0x3e3690(0x120))var _0x1af0f=users[_0x3e3690(0x120)];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]==_0x3e3690(0x147))var _0x1af0f=users['Spanish'];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]==_0x3e3690(0x121))var _0x1af0f=users['French'];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]=='Portuguese\x20(BR)')var _0x1af0f=users[_0x3e3690(0x153)];else{if(_0x21dcd4[0x0]['language']==_0x3e3690(0x148))var _0x1af0f=users[_0x3e3690(0x148)];else{if(_0x21dcd4[0x0][_0x3e3690(0x130)]==_0x3e3690(0x144))var _0x1af0f=users[_0x3e3690(0x14c)];}}}}}}}_0x44d611[_0x3e3690(0x122)]('view_og_table',{'success':_0x24656f['flash'](_0x3e3690(0x139)),'errors':_0x24656f[_0x3e3690(0x134)](_0x3e3690(0x12c)),'master_shop':_0x21dcd4,'profile':_0x3446bc,'role':_0x3ff588,'language':_0x1af0f,'data':_0x328f60});}catch(_0x40aa5c){_0x44d611['json'](_0x40aa5c);}}),router[a0_0x2edadf(0x124)](a0_0x2edadf(0x126),auth,async(_0x12a0e0,_0x12e2cd)=>{var _0x23ec56=a0_0x2edadf;try{const _0x16c421=_0x12a0e0['params']['id'];var _0x21f924=await transfers_finished[_0x23ec56(0x118)](_0x16c421);const _0x1d9a9d=await master_shop[_0x23ec56(0x141)](),_0x80437e=_0x12a0e0[_0x23ec56(0x12b)],_0x318946=await profile[_0x23ec56(0x151)]({'email':_0x80437e[_0x23ec56(0x143)]});if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x13b))var _0x1b82be=users[_0x23ec56(0x12f)];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x131))var _0x1b82be=users['Hindi'];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x120))var _0x1b82be=users[_0x23ec56(0x120)];else{if(_0x1d9a9d[0x0]['language']==_0x23ec56(0x147))var _0x1b82be=users[_0x23ec56(0x147)];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x121))var _0x1b82be=users[_0x23ec56(0x121)];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x11d))var _0x1b82be=users[_0x23ec56(0x153)];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]==_0x23ec56(0x148))var _0x1b82be=users['Chinese'];else{if(_0x1d9a9d[0x0][_0x23ec56(0x130)]=='Arabic\x20(ae)')var _0x1b82be=users['Arabic'];}}}}}}}_0x12e2cd[_0x23ec56(0x122)](_0x23ec56(0x14f),{'success':_0x12a0e0[_0x23ec56(0x134)](_0x23ec56(0x139)),'errors':_0x12a0e0['flash'](_0x23ec56(0x12c)),'master_shop':_0x1d9a9d,'profile':_0x318946,'role':_0x80437e,'language':_0x1b82be,'data':_0x21f924});}catch(_0x59521d){_0x12e2cd[_0x23ec56(0x146)](_0x59521d);}}),router[a0_0x2edadf(0x124)](a0_0x2edadf(0x133),auth,async(_0x1d9e9c,_0x214cf2)=>{var _0x285198=a0_0x2edadf;try{const {username:_0x34e560,email:_0x79c389,role:_0x50bd37}=_0x1d9e9c[_0x285198(0x12b)],_0x698dcb=_0x1d9e9c[_0x285198(0x12b)],_0x10340d=await profile['findOne']({'email':_0x698dcb['email']}),_0x3f9de9=await master_shop[_0x285198(0x141)](),_0x4dc896=await warehouse[_0x285198(0x123)]([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x285198(0x13f)}}}]);if(_0x3f9de9[0x0]['language']==_0x285198(0x13b))var _0x5c53bb=users['English'];else{if(_0x3f9de9[0x0][_0x285198(0x130)]==_0x285198(0x131))var _0x5c53bb=users[_0x285198(0x131)];else{if(_0x3f9de9[0x0][_0x285198(0x130)]==_0x285198(0x120))var _0x5c53bb=users['German'];else{if(_0x3f9de9[0x0][_0x285198(0x130)]==_0x285198(0x147))var _0x5c53bb=users[_0x285198(0x147)];else{if(_0x3f9de9[0x0]['language']==_0x285198(0x121))var _0x5c53bb=users[_0x285198(0x121)];else{if(_0x3f9de9[0x0][_0x285198(0x130)]==_0x285198(0x11d))var _0x5c53bb=users[_0x285198(0x153)];else{if(_0x3f9de9[0x0]['language']==_0x285198(0x148))var _0x5c53bb=users[_0x285198(0x148)];else{if(_0x3f9de9[0x0]['language']==_0x285198(0x144))var _0x5c53bb=users[_0x285198(0x14c)];}}}}}}}_0x214cf2['render'](_0x285198(0x128),{'success':_0x1d9e9c['flash'](_0x285198(0x139)),'errors':_0x1d9e9c[_0x285198(0x134)]('errors'),'role':_0x698dcb,'profile':_0x10340d,'master_shop':_0x3f9de9,'dataProcess':_0x4dc896,'language':_0x5c53bb});}catch(_0x1ef9e9){console[_0x285198(0x11b)](_0x1ef9e9);}}),module[a0_0x2edadf(0x136)]=router;