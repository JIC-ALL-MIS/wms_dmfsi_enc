function a0_0xd28a(){var _0x4248de=['$sale_product.product_code','$date','../models/all_models','$product_details.product_stock','all','aggregate','/view','8258kHEDLG','$product.expiry_date','$product.to_room_name','Enabled','111228dARLaH','$product.room_names','errors','$product.id_transaction_id','warehouse_data','$invoice','warehouses','1958iVlcOn','Portuguese','German','$product_details.invoice','$product_details','language','transaction_finished_raw','81102CFpwfX','transaction_finished','../public/language/languages.json','French','Raw\x20Materials','$sale_product.invoice','data_transfer','$sale_product.id_transaction_from','$product_details.production_date','$sale_product.room_name','$product.to_quantity','nodemailer','$sale_product._id','valueOf','findOne','push','$product_details.product_code','$name','length','$$invoice','$product_details.expiry_date','invoice','46TeBArh','103296gWdKob','data_sales','$sale_product.expiry_date','$product.production_date','view_og_table','English','Arabic\x20(ae)','../middleware/auth','findById','params','get','Hindi','Portuguese\x20(BR)','$product','$product.invoice','$product_details.unit','map','json','Router','/viewFG','$product_details.product_name','view_tf_table','user','9HKHlki','$warehouse_name','Arabic','/viewdata_tf_fg/:id','$product.id_transaction','log','render','success','email','$product.new_adjust_qty','/viewdata_og_fg/:id','Chinese','$sale_product.unit','$sale_product','$product.product_code','$product.id_transaction_from','$sale_product.quantity','$to_warehouse','$product.unit','5517495zHmKnl','$sale_product.production_date','data_adjustment','_id','480oqcxmh','find','Spanish','9514420iosMCR','$sale_product.product_name','$product._id','32348KKpQyc','$product_details._id','English\x20(US)','$product.product_name','581TVptQL','/reports','flash'];a0_0xd28a=function(){return _0x4248de;};return a0_0xd28a();}var a0_0x4c2071=a0_0x47de;(function(_0x4ca38e,_0x155525){var _0x308e13=a0_0x47de,_0x1ca44c=_0x4ca38e();while(!![]){try{var _0x4097a6=-parseInt(_0x308e13(0xb9))/0x1*(-parseInt(_0x308e13(0xfc))/0x2)+-parseInt(_0x308e13(0xe8))/0x3*(-parseInt(_0x308e13(0xee))/0x4)+-parseInt(_0x308e13(0xe4))/0x5+parseInt(_0x308e13(0x10e))/0x6*(parseInt(_0x308e13(0xf2))/0x7)+-parseInt(_0x308e13(0xba))/0x8+parseInt(_0x308e13(0xd1))/0x9*(parseInt(_0x308e13(0xeb))/0xa)+parseInt(_0x308e13(0x107))/0xb*(-parseInt(_0x308e13(0x100))/0xc);if(_0x4097a6===_0x155525)break;else _0x1ca44c['push'](_0x1ca44c['shift']());}catch(_0x45d77b){_0x1ca44c['push'](_0x1ca44c['shift']());}}}(a0_0xd28a,0xc1182));const express=require('express'),app=express(),router=express[a0_0x4c2071(0xcc)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x4c2071(0xf7)),auth=require(a0_0x4c2071(0xc1)),users=require(a0_0x4c2071(0x110)),nodemailer=require(a0_0x4c2071(0xae));function a0_0x47de(_0x55865f,_0x55d48d){var _0xd28af2=a0_0xd28a();return a0_0x47de=function(_0x47de59,_0x97b10d){_0x47de59=_0x47de59-0xa7;var _0x119bde=_0xd28af2[_0x47de59];return _0x119bde;},a0_0x47de(_0x55865f,_0x55d48d);}router[a0_0x4c2071(0xc4)](a0_0x4c2071(0xfb),auth,async(_0x55a7d8,_0x925df4)=>{var _0x5e82b9=a0_0x4c2071;try{const {username:_0x4cabc6,email:_0x273885,role:_0x4c858e}=_0x55a7d8['user'],_0x427b0c=_0x55a7d8['user'],_0x2f7a65=await profile[_0x5e82b9(0xb1)]({'email':_0x427b0c[_0x5e82b9(0xd9)]}),_0x24609c=await master_shop[_0x5e82b9(0xe9)](),_0xb12fc=await warehouse['aggregate']([{'$match':{'status':_0x5e82b9(0xff),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':'$name','name':{'$first':_0x5e82b9(0xb4)}}}]);if(_0x24609c[0x0]['language']==_0x5e82b9(0xf0))var _0x268657=users[_0x5e82b9(0xbf)];else{if(_0x24609c[0x0]['language']==_0x5e82b9(0xc5))var _0x268657=users['Hindi'];else{if(_0x24609c[0x0][_0x5e82b9(0x10c)]==_0x5e82b9(0x109))var _0x268657=users[_0x5e82b9(0x109)];else{if(_0x24609c[0x0]['language']==_0x5e82b9(0xea))var _0x268657=users[_0x5e82b9(0xea)];else{if(_0x24609c[0x0][_0x5e82b9(0x10c)]=='French')var _0x268657=users['French'];else{if(_0x24609c[0x0][_0x5e82b9(0x10c)]==_0x5e82b9(0xc6))var _0x268657=users[_0x5e82b9(0x108)];else{if(_0x24609c[0x0]['language']==_0x5e82b9(0xdc))var _0x268657=users[_0x5e82b9(0xdc)];else{if(_0x24609c[0x0][_0x5e82b9(0x10c)]==_0x5e82b9(0xc0))var _0x268657=users[_0x5e82b9(0xd3)];}}}}}}}_0x925df4[_0x5e82b9(0xd7)](_0x5e82b9(0x10f),{'success':_0x55a7d8[_0x5e82b9(0xf4)]('success'),'errors':_0x55a7d8[_0x5e82b9(0xf4)](_0x5e82b9(0x102)),'role':_0x427b0c,'profile':_0x2f7a65,'master_shop':_0x24609c,'dataProcess':_0xb12fc,'language':_0x268657});}catch(_0x3ec1bc){console[_0x5e82b9(0xd6)](_0x3ec1bc);}}),router['post'](a0_0x4c2071(0xf3),auth,async(_0x970327,_0x16c4d1)=>{var _0xa5bac7=a0_0x4c2071;const {product_category:_0x30c79d,transaction_category:_0x2ffeaf,transaction_date_from:_0x140be4,transaction_date_to:_0x460086,warehouse_category:_0x19cfa4,item_code:_0x5017b5}=_0x970327['body'];console[_0xa5bac7(0xd6)](_0x19cfa4);if(_0x30c79d=='rm'){if(_0x19cfa4=='all'){var _0x5bd464=await purchases[_0xa5bac7(0xfa)]([{'$match':{'date':{'$gte':_0x140be4,'$lte':_0x460086}}},{'$lookup':{'from':_0xa5bac7(0x106),'let':{'invoice':_0xa5bac7(0x105)},'pipeline':[{'$unwind':_0xa5bac7(0x10b)},{'$match':{'$expr':{'$eq':['$$invoice',_0xa5bac7(0x10a)]}}},{'$project':{'_id':_0xa5bac7(0xef),'product_name':_0xa5bac7(0xce),'product_code':_0xa5bac7(0xb3),'quantity_available':'$product_details.product_stock','warehouse_name':_0xa5bac7(0xb4),'warehouse_room':'$room','invoice':'$product_details.invoice','production_date':'$product_details.production_date','expiry_date':'$product_details.expiry_date','UOM':'$product_details.unit'}}],'as':_0xa5bac7(0x104)}}]);_0x5bd464[_0xa5bac7(0xbb)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0xb63882=>{var _0x4b94f4=_0xa5bac7;_0x5bd464[_0x4b94f4(0xbb)][_0xb63882['invoice']]=[],await Promise[_0x4b94f4(0xf9)](_0xb63882['warehouse_data']['map'](async _0xd7ecc4=>{var _0x4973e4=_0x4b94f4;const _0x26e3be=await sales[_0x4973e4(0xfa)]([{'$unwind':_0x4973e4(0xde)},{'$match':{'sale_product.id_transaction_from':_0xd7ecc4[_0x4973e4(0xe7)][_0x4973e4(0xb0)](),'sale_product.invoice':_0xd7ecc4[_0x4973e4(0xb8)]}},{'$project':{'_id':_0x4973e4(0xaf),'product_name':_0x4973e4(0xec),'product_code':'$sale_product.product_code','quantity_available':_0x4973e4(0xe1),'warehouse_name':_0x4973e4(0xd2),'warehouse_room':'$sale_product.room_name','product_invoice':_0x4973e4(0xa8),'invoice':_0x4973e4(0x105),'id_transaction_from':_0x4973e4(0xaa),'date':_0x4973e4(0xf6),'production_date':_0x4973e4(0xe5),'expiry_date':_0x4973e4(0xbc),'UOM':'$sale_product.unit'}}]);_0x26e3be[_0x4973e4(0xb5)]>0x0&&_0x5bd464[_0x4973e4(0xbb)][_0xb63882[_0x4973e4(0xb8)]][_0x4973e4(0xb2)](..._0x26e3be);}));})),_0x5bd464['data_sales']=_0x5bd464[_0xa5bac7(0xbb)],_0x5bd464[_0xa5bac7(0xe6)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x169372=>{var _0x4f20e6=_0xa5bac7;_0x5bd464[_0x4f20e6(0xe6)][_0x169372[_0x4f20e6(0xb8)]]=[],await Promise[_0x4f20e6(0xf9)](_0x169372['warehouse_data'][_0x4f20e6(0xca)](async _0x13b597=>{var _0x2e3440=_0x4f20e6;const _0x54fe2c=await adjustment[_0x2e3440(0xfa)]([{'$unwind':_0x2e3440(0xc7)},{'$match':{'product.id_transaction_from':_0x13b597[_0x2e3440(0xe7)]['valueOf'](),'product.invoice':_0x13b597[_0x2e3440(0xb8)]}},{'$project':{'_id':_0x2e3440(0xed),'product_name':'$product.product_name','product_code':_0x2e3440(0xdf),'quantity_available':_0x2e3440(0xda),'warehouse_name':_0x2e3440(0xd2),'warehouse_room':_0x2e3440(0x101),'product_invoice':_0x2e3440(0xc8),'invoice':_0x2e3440(0x105),'id_transaction_from':_0x2e3440(0xe0),'date':_0x2e3440(0xf6),'production_date':_0x2e3440(0xbd),'expiry_date':_0x2e3440(0xfd),'UOM':_0x2e3440(0xe3)}}]);_0x54fe2c[_0x2e3440(0xb5)]>0x0&&_0x5bd464['data_adjustment'][_0x169372[_0x2e3440(0xb8)]][_0x2e3440(0xb2)](..._0x54fe2c);}));})),_0x5bd464[_0xa5bac7(0xa9)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x575506=>{var _0x1ac138=_0xa5bac7;_0x5bd464['data_transfer'][_0x575506[_0x1ac138(0xb8)]]=[],await Promise[_0x1ac138(0xf9)](_0x575506[_0x1ac138(0x104)][_0x1ac138(0xca)](async _0x1a71e0=>{var _0x23132a=_0x1ac138;const _0x2b0679=await transfers[_0x23132a(0xfa)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x1a71e0[_0x23132a(0xe7)][_0x23132a(0xb0)](),'product.To_invoice':_0x1a71e0[_0x23132a(0xb8)]}},{'$project':{'_id':_0x23132a(0xed),'product_name':_0x23132a(0xf1),'product_code':_0x23132a(0xdf),'quantity_available':_0x23132a(0xad),'warehouse_name':_0x23132a(0xe2),'warehouse_room':_0x23132a(0x101),'product_invoice':_0x23132a(0xfe),'invoice':'$invoice','id_transaction_from':_0x23132a(0x103),'date':'$date','production_date':_0x23132a(0xbd),'expiry_date':_0x23132a(0xfd),'UOM':_0x23132a(0xe3)}}]);_0x2b0679['length']>0x0&&_0x5bd464[_0x23132a(0xa9)][_0x575506['invoice']][_0x23132a(0xb2)](..._0x2b0679);}));})),_0x16c4d1[_0xa5bac7(0xcb)]({'purchases_warehouse':_0x5bd464,'data_sales':_0x5bd464[_0xa5bac7(0xbb)],'data_adjustment':_0x5bd464[_0xa5bac7(0xe6)],'data_transfer':_0x5bd464[_0xa5bac7(0xa9)]});}else{var _0x5bd464=await purchases[_0xa5bac7(0xfa)]([{'$match':{'warehouse_name':_0x19cfa4,'date':{'$gte':_0x140be4,'$lte':_0x460086}}},{'$lookup':{'from':_0xa5bac7(0x106),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0xa5bac7(0x10b)},{'$match':{'$expr':{'$eq':[_0xa5bac7(0xb6),_0xa5bac7(0x10a)]}}},{'$project':{'_id':_0xa5bac7(0xef),'product_name':_0xa5bac7(0xce),'product_code':_0xa5bac7(0xb3),'quantity_available':_0xa5bac7(0xf8),'warehouse_name':'$name','warehouse_room':'$room','invoice':_0xa5bac7(0x10a),'production_date':_0xa5bac7(0xab),'expiry_date':_0xa5bac7(0xb7),'UOM':_0xa5bac7(0xc9)}}],'as':_0xa5bac7(0x104)}}]);_0x5bd464[_0xa5bac7(0xbb)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x4675f0=>{var _0x5c6b81=_0xa5bac7;_0x5bd464['data_sales'][_0x4675f0[_0x5c6b81(0xb8)]]=[],await Promise[_0x5c6b81(0xf9)](_0x4675f0['warehouse_data'][_0x5c6b81(0xca)](async _0x19331f=>{var _0x590383=_0x5c6b81;const _0x58a25d=await sales[_0x590383(0xfa)]([{'$unwind':_0x590383(0xde)},{'$match':{'sale_product.id_transaction_from':_0x19331f[_0x590383(0xe7)]['valueOf'](),'sale_product.invoice':_0x19331f[_0x590383(0xb8)]}},{'$project':{'_id':_0x590383(0xaf),'product_name':_0x590383(0xec),'product_code':_0x590383(0xf5),'quantity_available':_0x590383(0xe1),'warehouse_name':_0x590383(0xd2),'warehouse_room':_0x590383(0xac),'product_invoice':'$sale_product.invoice','invoice':'$invoice','id_transaction_from':'$sale_product.id_transaction_from','date':_0x590383(0xf6),'production_date':'$sale_product.production_date','expiry_date':_0x590383(0xbc),'UOM':'$sale_product.unit'}}]);_0x58a25d[_0x590383(0xb5)]>0x0&&_0x5bd464[_0x590383(0xbb)][_0x4675f0[_0x590383(0xb8)]]['push'](..._0x58a25d);}));})),_0x5bd464[_0xa5bac7(0xbb)]=_0x5bd464[_0xa5bac7(0xbb)],_0x5bd464['data_adjustment']={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x44a0eb=>{var _0x487a22=_0xa5bac7;_0x5bd464[_0x487a22(0xe6)][_0x44a0eb['invoice']]=[],await Promise['all'](_0x44a0eb[_0x487a22(0x104)][_0x487a22(0xca)](async _0x363450=>{var _0x10e61b=_0x487a22;const _0x2f5e43=await adjustment[_0x10e61b(0xfa)]([{'$unwind':_0x10e61b(0xc7)},{'$match':{'product.id_transaction_from':_0x363450[_0x10e61b(0xe7)][_0x10e61b(0xb0)](),'product.invoice':_0x363450[_0x10e61b(0xb8)]}},{'$project':{'_id':_0x10e61b(0xed),'product_name':_0x10e61b(0xf1),'product_code':_0x10e61b(0xdf),'quantity_available':_0x10e61b(0xda),'warehouse_name':_0x10e61b(0xd2),'warehouse_room':'$product.room_names','product_invoice':_0x10e61b(0xc8),'invoice':_0x10e61b(0x105),'id_transaction_from':_0x10e61b(0xe0),'date':_0x10e61b(0xf6),'production_date':_0x10e61b(0xbd),'expiry_date':_0x10e61b(0xfd),'UOM':_0x10e61b(0xe3)}}]);_0x2f5e43[_0x10e61b(0xb5)]>0x0&&_0x5bd464['data_adjustment'][_0x44a0eb[_0x10e61b(0xb8)]][_0x10e61b(0xb2)](..._0x2f5e43);}));})),_0x5bd464[_0xa5bac7(0xa9)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x1a043f=>{var _0xec495c=_0xa5bac7;_0x5bd464['data_transfer'][_0x1a043f['invoice']]=[],await Promise['all'](_0x1a043f[_0xec495c(0x104)]['map'](async _0x538424=>{var _0x4b71e7=_0xec495c;const _0x2b0097=await transfers[_0x4b71e7(0xfa)]([{'$unwind':_0x4b71e7(0xc7)},{'$match':{'product.id_transaction_id':_0x538424[_0x4b71e7(0xe7)]['valueOf'](),'product.To_invoice':_0x538424[_0x4b71e7(0xb8)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x4b71e7(0xdf),'quantity_available':_0x4b71e7(0xad),'warehouse_name':_0x4b71e7(0xe2),'warehouse_room':_0x4b71e7(0x101),'product_invoice':_0x4b71e7(0xfe),'invoice':_0x4b71e7(0x105),'id_transaction_from':_0x4b71e7(0x103),'date':_0x4b71e7(0xf6),'production_date':'$product.production_date','expiry_date':_0x4b71e7(0xfd),'UOM':_0x4b71e7(0xe3)}}]);_0x2b0097[_0x4b71e7(0xb5)]>0x0&&_0x5bd464[_0x4b71e7(0xa9)][_0x1a043f[_0x4b71e7(0xb8)]]['push'](..._0x2b0097);}));})),_0x16c4d1[_0xa5bac7(0xcb)]({'purchases_warehouse':_0x5bd464,'data_sales':_0x5bd464['data_sales'],'data_adjustment':_0x5bd464[_0xa5bac7(0xe6)],'data_transfer':_0x5bd464[_0xa5bac7(0xa9)]});}}else{if(_0x19cfa4==_0xa5bac7(0xf9)){var _0x5bd464=await purchases_finished[_0xa5bac7(0xfa)]([{'$match':{'date':{'$gte':_0x140be4,'$lte':_0x460086}}},{'$lookup':{'from':_0xa5bac7(0x106),'let':{'invoice':_0xa5bac7(0x105)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0xa5bac7(0xb6),_0xa5bac7(0x10a)]}}},{'$project':{'_id':_0xa5bac7(0xef),'product_name':'$product_details.product_name','product_code':_0xa5bac7(0xb3),'quantity_available':_0xa5bac7(0xf8),'warehouse_name':_0xa5bac7(0xb4),'warehouse_room':'$room','invoice':_0xa5bac7(0x10a),'production_date':_0xa5bac7(0xab),'expiry_date':_0xa5bac7(0xb7),'UOM':'$product_details.unit'}}],'as':_0xa5bac7(0x104)}}]);_0x5bd464['data_sales']={},await Promise[_0xa5bac7(0xf9)](_0x5bd464['map'](async _0x5c19d3=>{var _0xe81c82=_0xa5bac7;_0x5bd464[_0xe81c82(0xbb)][_0x5c19d3[_0xe81c82(0xb8)]]=[],await Promise['all'](_0x5c19d3[_0xe81c82(0x104)]['map'](async _0x41d656=>{var _0x3e0229=_0xe81c82;const _0x391f05=await sales_finished['aggregate']([{'$unwind':_0x3e0229(0xde)},{'$match':{'sale_product.id_transaction_from':_0x41d656[_0x3e0229(0xe7)][_0x3e0229(0xb0)](),'sale_product.invoice':_0x41d656[_0x3e0229(0xb8)]}},{'$project':{'_id':_0x3e0229(0xaf),'product_name':_0x3e0229(0xec),'product_code':_0x3e0229(0xf5),'quantity_available':_0x3e0229(0xe1),'warehouse_name':_0x3e0229(0xd2),'warehouse_room':_0x3e0229(0xac),'product_invoice':_0x3e0229(0xa8),'invoice':_0x3e0229(0x105),'id_transaction_from':_0x3e0229(0xaa),'date':_0x3e0229(0xf6),'production_date':_0x3e0229(0xe5),'expiry_date':_0x3e0229(0xbc),'UOM':_0x3e0229(0xdd)}}]);_0x391f05[_0x3e0229(0xb5)]>0x0&&_0x5bd464[_0x3e0229(0xbb)][_0x5c19d3[_0x3e0229(0xb8)]][_0x3e0229(0xb2)](..._0x391f05);}));})),_0x5bd464[_0xa5bac7(0xbb)]=_0x5bd464[_0xa5bac7(0xbb)],_0x5bd464['data_adjustment']={},await Promise[_0xa5bac7(0xf9)](_0x5bd464['map'](async _0x45955f=>{var _0x178bbe=_0xa5bac7;_0x5bd464[_0x178bbe(0xe6)][_0x45955f[_0x178bbe(0xb8)]]=[],await Promise['all'](_0x45955f[_0x178bbe(0x104)][_0x178bbe(0xca)](async _0x307303=>{var _0x36891b=_0x178bbe;const _0x2a7757=await adjustment_finished['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x307303[_0x36891b(0xe7)][_0x36891b(0xb0)](),'product.invoice':_0x307303[_0x36891b(0xb8)]}},{'$project':{'_id':_0x36891b(0xed),'product_name':'$product.product_name','product_code':_0x36891b(0xdf),'quantity_available':_0x36891b(0xda),'warehouse_name':_0x36891b(0xd2),'warehouse_room':_0x36891b(0x101),'product_invoice':'$product.invoice','invoice':_0x36891b(0x105),'id_transaction_from':_0x36891b(0xe0),'date':_0x36891b(0xf6),'production_date':'$product.production_date','expiry_date':_0x36891b(0xfd),'UOM':_0x36891b(0xe3)}}]);_0x2a7757[_0x36891b(0xb5)]>0x0&&_0x5bd464['data_adjustment'][_0x45955f[_0x36891b(0xb8)]][_0x36891b(0xb2)](..._0x2a7757);}));})),_0x5bd464[_0xa5bac7(0xa9)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x32367d=>{var _0x5d714e=_0xa5bac7;_0x5bd464['data_transfer'][_0x32367d[_0x5d714e(0xb8)]]=[],await Promise[_0x5d714e(0xf9)](_0x32367d[_0x5d714e(0x104)][_0x5d714e(0xca)](async _0x24e674=>{var _0x1c229a=_0x5d714e;const _0x21297a=await transfers_finished['aggregate']([{'$unwind':_0x1c229a(0xc7)},{'$match':{'product.id_transaction':_0x24e674['_id'][_0x1c229a(0xb0)](),'product.from_invoice':_0x24e674[_0x1c229a(0xb8)]}},{'$project':{'_id':_0x1c229a(0xed),'product_name':'$product.product_name','product_code':_0x1c229a(0xdf),'quantity_available':_0x1c229a(0xad),'warehouse_name':'$to_warehouse','warehouse_room':_0x1c229a(0x101),'product_invoice':'$product.to_room_name','invoice':_0x1c229a(0x105),'id_transaction_from':_0x1c229a(0xd5),'date':_0x1c229a(0xf6),'production_date':_0x1c229a(0xbd),'expiry_date':_0x1c229a(0xfd),'UOM':_0x1c229a(0xe3)}}]);_0x21297a[_0x1c229a(0xb5)]>0x0&&_0x5bd464['data_transfer'][_0x32367d[_0x1c229a(0xb8)]][_0x1c229a(0xb2)](..._0x21297a);}));})),_0x16c4d1[_0xa5bac7(0xcb)]({'purchases_warehouse':_0x5bd464,'data_sales':_0x5bd464['data_sales'],'data_adjustment':_0x5bd464['data_adjustment'],'data_transfer':_0x5bd464[_0xa5bac7(0xa9)]});}else{var _0x5bd464=await purchases_finished[_0xa5bac7(0xfa)]([{'$match':{'warehouse_name':_0x19cfa4,'date':{'$gte':_0x140be4,'$lte':_0x460086}}},{'$lookup':{'from':_0xa5bac7(0x106),'let':{'invoice':_0xa5bac7(0x105)},'pipeline':[{'$unwind':_0xa5bac7(0x10b)},{'$match':{'$expr':{'$eq':[_0xa5bac7(0xb6),_0xa5bac7(0x10a)]}}},{'$project':{'_id':'$product_details._id','product_name':_0xa5bac7(0xce),'product_code':'$product_details.product_code','quantity_available':_0xa5bac7(0xf8),'warehouse_name':_0xa5bac7(0xb4),'warehouse_room':'$room','invoice':_0xa5bac7(0x10a),'production_date':'$product_details.production_date','expiry_date':_0xa5bac7(0xb7),'UOM':_0xa5bac7(0xc9)}}],'as':_0xa5bac7(0x104)}}]);_0x5bd464[_0xa5bac7(0xbb)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x2c3d4a=>{var _0x4c81eb=_0xa5bac7;_0x5bd464[_0x4c81eb(0xbb)][_0x2c3d4a[_0x4c81eb(0xb8)]]=[],await Promise['all'](_0x2c3d4a[_0x4c81eb(0x104)][_0x4c81eb(0xca)](async _0x150acf=>{var _0x3ed4b6=_0x4c81eb;const _0xb026c1=await sales_finished[_0x3ed4b6(0xfa)]([{'$unwind':_0x3ed4b6(0xde)},{'$match':{'sale_product.id_transaction_from':_0x150acf[_0x3ed4b6(0xe7)][_0x3ed4b6(0xb0)](),'sale_product.invoice':_0x150acf[_0x3ed4b6(0xb8)]}},{'$project':{'_id':_0x3ed4b6(0xaf),'product_name':_0x3ed4b6(0xec),'product_code':_0x3ed4b6(0xf5),'quantity_available':_0x3ed4b6(0xe1),'warehouse_name':'$warehouse_name','warehouse_room':_0x3ed4b6(0xac),'product_invoice':_0x3ed4b6(0xa8),'invoice':_0x3ed4b6(0x105),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x3ed4b6(0xf6),'production_date':_0x3ed4b6(0xe5),'expiry_date':'$sale_product.expiry_date','UOM':_0x3ed4b6(0xdd)}}]);_0xb026c1[_0x3ed4b6(0xb5)]>0x0&&_0x5bd464['data_sales'][_0x2c3d4a['invoice']]['push'](..._0xb026c1);}));})),_0x5bd464[_0xa5bac7(0xbb)]=_0x5bd464[_0xa5bac7(0xbb)],_0x5bd464[_0xa5bac7(0xe6)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464[_0xa5bac7(0xca)](async _0x33f879=>{var _0x154235=_0xa5bac7;_0x5bd464[_0x154235(0xe6)][_0x33f879['invoice']]=[],await Promise[_0x154235(0xf9)](_0x33f879[_0x154235(0x104)]['map'](async _0x259d1a=>{var _0x1c41ba=_0x154235;const _0x301b13=await adjustment_finished[_0x1c41ba(0xfa)]([{'$unwind':_0x1c41ba(0xc7)},{'$match':{'product.id_transaction_from':_0x259d1a[_0x1c41ba(0xe7)]['valueOf'](),'product.invoice':_0x259d1a['invoice']}},{'$project':{'_id':_0x1c41ba(0xed),'product_name':'$product.product_name','product_code':_0x1c41ba(0xdf),'quantity_available':_0x1c41ba(0xda),'warehouse_name':_0x1c41ba(0xd2),'warehouse_room':_0x1c41ba(0x101),'product_invoice':_0x1c41ba(0xc8),'invoice':_0x1c41ba(0x105),'id_transaction_from':'$product.id_transaction_from','date':_0x1c41ba(0xf6),'production_date':_0x1c41ba(0xbd),'expiry_date':_0x1c41ba(0xfd),'UOM':'$product.unit'}}]);_0x301b13[_0x1c41ba(0xb5)]>0x0&&_0x5bd464[_0x1c41ba(0xe6)][_0x33f879[_0x1c41ba(0xb8)]]['push'](..._0x301b13);}));})),_0x5bd464[_0xa5bac7(0xa9)]={},await Promise[_0xa5bac7(0xf9)](_0x5bd464['map'](async _0x3ca456=>{var _0x6f9ae4=_0xa5bac7;_0x5bd464[_0x6f9ae4(0xa9)][_0x3ca456[_0x6f9ae4(0xb8)]]=[],await Promise[_0x6f9ae4(0xf9)](_0x3ca456[_0x6f9ae4(0x104)][_0x6f9ae4(0xca)](async _0x45ce77=>{var _0x2aaab2=_0x6f9ae4;const _0x3d9eb2=await transfers_finished[_0x2aaab2(0xfa)]([{'$unwind':_0x2aaab2(0xc7)},{'$match':{'product.id_transaction':_0x45ce77[_0x2aaab2(0xe7)][_0x2aaab2(0xb0)](),'product.from_invoice':_0x45ce77[_0x2aaab2(0xb8)]}},{'$project':{'_id':'$product._id','product_name':_0x2aaab2(0xf1),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':'$to_warehouse','warehouse_room':'$product.room_names','product_invoice':_0x2aaab2(0xfe),'invoice':_0x2aaab2(0x105),'id_transaction_from':_0x2aaab2(0xd5),'date':_0x2aaab2(0xf6),'production_date':_0x2aaab2(0xbd),'expiry_date':'$product.expiry_date','UOM':_0x2aaab2(0xe3)}}]);_0x3d9eb2[_0x2aaab2(0xb5)]>0x0&&_0x5bd464[_0x2aaab2(0xa9)][_0x3ca456[_0x2aaab2(0xb8)]]['push'](..._0x3d9eb2);}));})),_0x16c4d1[_0xa5bac7(0xcb)]({'purchases_warehouse':_0x5bd464,'data_sales':_0x5bd464['data_sales'],'data_adjustment':_0x5bd464[_0xa5bac7(0xe6)],'data_transfer':_0x5bd464[_0xa5bac7(0xa9)]});}}}),router['get']('/viewdata_inc_fg/:id',auth,async(_0x4b6b61,_0x17d8f8)=>{var _0x3b0da1=a0_0x4c2071;try{const _0x2d57c7=_0x4b6b61[_0x3b0da1(0xc3)]['id'];var _0x30d0a9=await purchases_finished[_0x3b0da1(0xc2)](_0x2d57c7);const _0x2f1051=await master_shop['find'](),_0x2e421a=_0x4b6b61[_0x3b0da1(0xd0)],_0x489338=await profile['findOne']({'email':_0x2e421a['email']});if(_0x2f1051[0x0][_0x3b0da1(0x10c)]=='English\x20(US)')var _0x3d369b=users['English'];else{if(_0x2f1051[0x0][_0x3b0da1(0x10c)]==_0x3b0da1(0xc5))var _0x3d369b=users[_0x3b0da1(0xc5)];else{if(_0x2f1051[0x0][_0x3b0da1(0x10c)]==_0x3b0da1(0x109))var _0x3d369b=users[_0x3b0da1(0x109)];else{if(_0x2f1051[0x0][_0x3b0da1(0x10c)]=='Spanish')var _0x3d369b=users['Spanish'];else{if(_0x2f1051[0x0]['language']=='French')var _0x3d369b=users[_0x3b0da1(0x111)];else{if(_0x2f1051[0x0][_0x3b0da1(0x10c)]==_0x3b0da1(0xc6))var _0x3d369b=users[_0x3b0da1(0x108)];else{if(_0x2f1051[0x0]['language']==_0x3b0da1(0xdc))var _0x3d369b=users[_0x3b0da1(0xdc)];else{if(_0x2f1051[0x0][_0x3b0da1(0x10c)]=='Arabic\x20(ae)')var _0x3d369b=users[_0x3b0da1(0xd3)];}}}}}}}_0x17d8f8['render']('view_table',{'success':_0x4b6b61[_0x3b0da1(0xf4)](_0x3b0da1(0xd8)),'errors':_0x4b6b61[_0x3b0da1(0xf4)](_0x3b0da1(0x102)),'master_shop':_0x2f1051,'profile':_0x489338,'role':_0x2e421a,'language':_0x3d369b,'data':_0x30d0a9});}catch(_0x47b7d6){_0x17d8f8[_0x3b0da1(0xcb)](_0x47b7d6);}}),router['get'](a0_0x4c2071(0xdb),auth,async(_0x5d0ecf,_0x17ffc5)=>{var _0x442b85=a0_0x4c2071;try{const _0x50f9a9=_0x5d0ecf[_0x442b85(0xc3)]['id'];var _0x12d589=await sales_finished['findById'](_0x50f9a9);const _0x19a599=await master_shop[_0x442b85(0xe9)](),_0x110720=_0x5d0ecf['user'],_0x8055b6=await profile[_0x442b85(0xb1)]({'email':_0x110720[_0x442b85(0xd9)]});if(_0x19a599[0x0][_0x442b85(0x10c)]==_0x442b85(0xf0))var _0x22cb69=users['English'];else{if(_0x19a599[0x0]['language']==_0x442b85(0xc5))var _0x22cb69=users[_0x442b85(0xc5)];else{if(_0x19a599[0x0]['language']==_0x442b85(0x109))var _0x22cb69=users['German'];else{if(_0x19a599[0x0][_0x442b85(0x10c)]=='Spanish')var _0x22cb69=users['Spanish'];else{if(_0x19a599[0x0][_0x442b85(0x10c)]==_0x442b85(0x111))var _0x22cb69=users[_0x442b85(0x111)];else{if(_0x19a599[0x0][_0x442b85(0x10c)]=='Portuguese\x20(BR)')var _0x22cb69=users[_0x442b85(0x108)];else{if(_0x19a599[0x0][_0x442b85(0x10c)]=='Chinese')var _0x22cb69=users[_0x442b85(0xdc)];else{if(_0x19a599[0x0][_0x442b85(0x10c)]==_0x442b85(0xc0))var _0x22cb69=users[_0x442b85(0xd3)];}}}}}}}_0x17ffc5[_0x442b85(0xd7)](_0x442b85(0xbe),{'success':_0x5d0ecf[_0x442b85(0xf4)](_0x442b85(0xd8)),'errors':_0x5d0ecf[_0x442b85(0xf4)](_0x442b85(0x102)),'master_shop':_0x19a599,'profile':_0x8055b6,'role':_0x110720,'language':_0x22cb69,'data':_0x12d589});}catch(_0x236da3){_0x17ffc5['json'](_0x236da3);}}),router[a0_0x4c2071(0xc4)](a0_0x4c2071(0xd4),auth,async(_0x2b78d2,_0x1c76f4)=>{var _0x7da9b7=a0_0x4c2071;try{const _0x34c47a=_0x2b78d2[_0x7da9b7(0xc3)]['id'];var _0x1f213f=await transfers_finished[_0x7da9b7(0xc2)](_0x34c47a);const _0x4baf17=await master_shop[_0x7da9b7(0xe9)](),_0x3eccf3=_0x2b78d2[_0x7da9b7(0xd0)],_0x214b88=await profile['findOne']({'email':_0x3eccf3[_0x7da9b7(0xd9)]});if(_0x4baf17[0x0]['language']==_0x7da9b7(0xf0))var _0xad73e6=users[_0x7da9b7(0xbf)];else{if(_0x4baf17[0x0][_0x7da9b7(0x10c)]==_0x7da9b7(0xc5))var _0xad73e6=users[_0x7da9b7(0xc5)];else{if(_0x4baf17[0x0]['language']==_0x7da9b7(0x109))var _0xad73e6=users['German'];else{if(_0x4baf17[0x0][_0x7da9b7(0x10c)]==_0x7da9b7(0xea))var _0xad73e6=users['Spanish'];else{if(_0x4baf17[0x0]['language']==_0x7da9b7(0x111))var _0xad73e6=users[_0x7da9b7(0x111)];else{if(_0x4baf17[0x0][_0x7da9b7(0x10c)]==_0x7da9b7(0xc6))var _0xad73e6=users['Portuguese'];else{if(_0x4baf17[0x0][_0x7da9b7(0x10c)]==_0x7da9b7(0xdc))var _0xad73e6=users[_0x7da9b7(0xdc)];else{if(_0x4baf17[0x0][_0x7da9b7(0x10c)]==_0x7da9b7(0xc0))var _0xad73e6=users[_0x7da9b7(0xd3)];}}}}}}}_0x1c76f4[_0x7da9b7(0xd7)](_0x7da9b7(0xcf),{'success':_0x2b78d2[_0x7da9b7(0xf4)](_0x7da9b7(0xd8)),'errors':_0x2b78d2[_0x7da9b7(0xf4)](_0x7da9b7(0x102)),'master_shop':_0x4baf17,'profile':_0x214b88,'role':_0x3eccf3,'language':_0xad73e6,'data':_0x1f213f});}catch(_0x1e60e7){_0x1c76f4[_0x7da9b7(0xcb)](_0x1e60e7);}}),router[a0_0x4c2071(0xc4)](a0_0x4c2071(0xcd),auth,async(_0x38bc93,_0x1d3c60)=>{var _0x54e7d8=a0_0x4c2071;try{const {username:_0x92d3b5,email:_0xf2253,role:_0xce4dbb}=_0x38bc93['user'],_0x26e4f3=_0x38bc93['user'],_0x46cbb6=await profile[_0x54e7d8(0xb1)]({'email':_0x26e4f3['email']}),_0x131acb=await master_shop[_0x54e7d8(0xe9)](),_0x582132=await warehouse[_0x54e7d8(0xfa)]([{'$match':{'status':_0x54e7d8(0xff),'warehouse_category':_0x54e7d8(0xa7)}},{'$group':{'_id':_0x54e7d8(0xb4),'name':{'$first':_0x54e7d8(0xb4)}}}]);if(_0x131acb[0x0]['language']==_0x54e7d8(0xf0))var _0x502eb7=users[_0x54e7d8(0xbf)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0xc5))var _0x502eb7=users['Hindi'];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0x109))var _0x502eb7=users[_0x54e7d8(0x109)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0xea))var _0x502eb7=users[_0x54e7d8(0xea)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0x111))var _0x502eb7=users[_0x54e7d8(0x111)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0xc6))var _0x502eb7=users[_0x54e7d8(0x108)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0xdc))var _0x502eb7=users[_0x54e7d8(0xdc)];else{if(_0x131acb[0x0][_0x54e7d8(0x10c)]==_0x54e7d8(0xc0))var _0x502eb7=users['Arabic'];}}}}}}}_0x1d3c60[_0x54e7d8(0xd7)](_0x54e7d8(0x10d),{'success':_0x38bc93[_0x54e7d8(0xf4)](_0x54e7d8(0xd8)),'errors':_0x38bc93[_0x54e7d8(0xf4)](_0x54e7d8(0x102)),'role':_0x26e4f3,'profile':_0x46cbb6,'master_shop':_0x131acb,'dataProcess':_0x582132,'language':_0x502eb7});}catch(_0x518de1){console['log'](_0x518de1);}}),module['exports']=router;