var a0_0x4783fe=a0_0x258b;function a0_0x258b(_0x5d4535,_0x43fb96){var _0xa6ea9d=a0_0xa6ea();return a0_0x258b=function(_0x258b0b,_0x49b709){_0x258b0b=_0x258b0b-0xbd;var _0x58773a=_0xa6ea9d[_0x258b0b];return _0x58773a;},a0_0x258b(_0x5d4535,_0x43fb96);}function a0_0xa6ea(){var _0x4fffdc=['2089632PppEvC','Portuguese','success','$warehouse_name','findOne','1349206zczbhO','aggregate','Enabled','find','Arabic\x20(ae)','render','exports','10gvQQRK','../middleware/auth','view_table','/viewdata_tf_fg/:id','32808TCDuwp','/viewdata_inc_fg/:id','/view','$date','2538366GhYDdn','transaction_finished','/reports','language','Spanish','$name','Chinese','631168zckPAS','view_og_table','json','Hindi','184432VRSCWI','$invoice','German','Arabic','French','email','findById','/viewdata_og_fg/:id','$sale_product','Finished\x20Goods','flash','get','errors','user','express','2149FxtWSp','post','Portuguese\x20(BR)','length','params','English','32186151NmqQhF','$product','English\x20(US)'];a0_0xa6ea=function(){return _0x4fffdc;};return a0_0xa6ea();}(function(_0x562ab6,_0x3b9918){var _0x5dc1d9=a0_0x258b,_0x565ba4=_0x562ab6();while(!![]){try{var _0x4a2b87=-parseInt(_0x5dc1d9(0xe0))/0x1+-parseInt(_0x5dc1d9(0xbf))/0x2+parseInt(_0x5dc1d9(0xef))/0x3+-parseInt(_0x5dc1d9(0xc3))/0x4+parseInt(_0x5dc1d9(0xe7))/0x5*(-parseInt(_0x5dc1d9(0xdb))/0x6)+-parseInt(_0x5dc1d9(0xd2))/0x7*(parseInt(_0x5dc1d9(0xeb))/0x8)+parseInt(_0x5dc1d9(0xd8))/0x9;if(_0x4a2b87===_0x3b9918)break;else _0x565ba4['push'](_0x565ba4['shift']());}catch(_0x1f5847){_0x565ba4['push'](_0x565ba4['shift']());}}}(a0_0xa6ea,0xb88c8));const express=require(a0_0x4783fe(0xd1)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require('../models/all_models'),auth=require(a0_0x4783fe(0xe8)),users=require('../public/language/languages.json'),nodemailer=require('nodemailer');router['get'](a0_0x4783fe(0xed),auth,async(_0x56473b,_0xdceba1)=>{var _0x918302=a0_0x4783fe;try{const {username:_0x3baec0,email:_0x597136,role:_0x16b238}=_0x56473b['user'],_0x120a40=_0x56473b[_0x918302(0xd0)],_0x3a720d=await profile[_0x918302(0xdf)]({'email':_0x120a40['email']}),_0x2db6d7=await master_shop['find'](),_0x1720be=await warehouse[_0x918302(0xe1)]([{'$match':{'status':_0x918302(0xe2),'warehouse_category':_0x918302(0xcc)}},{'$group':{'_id':_0x918302(0xbd),'name':{'$first':_0x918302(0xbd)}}}]);if(_0x2db6d7[0x0]['language']=='English\x20(US)')var _0x3a8e97=users[_0x918302(0xd7)];else{if(_0x2db6d7[0x0][_0x918302(0xf2)]==_0x918302(0xc2))var _0x3a8e97=users[_0x918302(0xc2)];else{if(_0x2db6d7[0x0]['language']==_0x918302(0xc5))var _0x3a8e97=users[_0x918302(0xc5)];else{if(_0x2db6d7[0x0]['language']==_0x918302(0xf3))var _0x3a8e97=users[_0x918302(0xf3)];else{if(_0x2db6d7[0x0][_0x918302(0xf2)]==_0x918302(0xc7))var _0x3a8e97=users[_0x918302(0xc7)];else{if(_0x2db6d7[0x0]['language']==_0x918302(0xd4))var _0x3a8e97=users[_0x918302(0xdc)];else{if(_0x2db6d7[0x0][_0x918302(0xf2)]==_0x918302(0xbe))var _0x3a8e97=users[_0x918302(0xbe)];else{if(_0x2db6d7[0x0][_0x918302(0xf2)]==_0x918302(0xe4))var _0x3a8e97=users[_0x918302(0xc6)];}}}}}}}_0xdceba1[_0x918302(0xe5)](_0x918302(0xf0),{'success':_0x56473b[_0x918302(0xcd)](_0x918302(0xdd)),'errors':_0x56473b[_0x918302(0xcd)](_0x918302(0xcf)),'role':_0x120a40,'profile':_0x3a720d,'master_shop':_0x2db6d7,'dataProcess':_0x1720be,'language':_0x3a8e97});}catch(_0x586a96){console['log'](_0x586a96);}}),router[a0_0x4783fe(0xd3)](a0_0x4783fe(0xf1),auth,async(_0x5af955,_0x4134e5)=>{var _0x386a57=a0_0x4783fe;const {product_category:_0x16d944,transaction_category:_0x3405f1,transaction_date_from:_0xc54e04,transaction_date_to:_0x1fb136,warehouse_category:_0x2a26b9,item_code:_0x2021b0}=_0x5af955['body'];var _0x5795ea;if(_0x16d944=='rm'){}else{if(_0x16d944=='fg')switch(_0x3405f1){case'IC':_0x2021b0[_0x386a57(0xd5)]>0x0?_0x5795ea=await purchases_finished[_0x386a57(0xe1)]([{'$match':{'warehouse_name':_0x2a26b9,'date':{'$gte':_0xc54e04,'$lte':_0x1fb136}}},{'$unwind':_0x386a57(0xd9)},{'$match':{'$or':[{'product.product_code':_0x2021b0}]}},{'$group':{'_id':_0x386a57(0xc4),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x386a57(0xde)},'products':{'$push':_0x386a57(0xd9)}}}]):_0x5795ea=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x2a26b9,'date':{'$gte':_0xc54e04,'$lte':_0x1fb136}}},{'$unwind':'$product'},{'$group':{'_id':_0x386a57(0xc4),'date':{'$first':_0x386a57(0xee)},'warehouse_name':{'$first':_0x386a57(0xde)},'products':{'$push':_0x386a57(0xd9)}}}]);break;case'OG':_0x2021b0[_0x386a57(0xd5)]>0x0?_0x5795ea=await sales_finished[_0x386a57(0xe1)]([{'$match':{'warehouse_name':_0x2a26b9,'date':{'$gte':_0xc54e04,'$lte':_0x1fb136}}},{'$unwind':_0x386a57(0xcb)},{'$match':{'$or':[{'sale_product.product_code':_0x2021b0}]}},{'$group':{'_id':_0x386a57(0xc4),'date':{'$first':_0x386a57(0xee)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x386a57(0xcb)}}}]):_0x5795ea=await sales_finished[_0x386a57(0xe1)]([{'$match':{'warehouse_name':_0x2a26b9,'date':{'$gte':_0xc54e04,'$lte':_0x1fb136}}},{'$unwind':_0x386a57(0xcb)},{'$group':{'_id':_0x386a57(0xc4),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x386a57(0xde)},'products':{'$push':_0x386a57(0xcb)}}}]);break;case'AJ':break;case'TF':_0x5795ea=await transfers_finished[_0x386a57(0xe3)]({'warehouse':_0x2a26b9,'date':{'$gte':_0xc54e04,'$lte':_0x1fb136}});break;}}_0x4134e5['json']({'data':_0x5795ea});}),router[a0_0x4783fe(0xce)](a0_0x4783fe(0xec),auth,async(_0x4c180b,_0x116d22)=>{var _0x418b91=a0_0x4783fe;try{const _0x10c9b3=_0x4c180b[_0x418b91(0xd6)]['id'];var _0xdc8e94=await purchases_finished['findById'](_0x10c9b3);const _0x552912=await master_shop[_0x418b91(0xe3)](),_0x4f323c=_0x4c180b[_0x418b91(0xd0)],_0x2e370f=await profile[_0x418b91(0xdf)]({'email':_0x4f323c['email']});if(_0x552912[0x0][_0x418b91(0xf2)]==_0x418b91(0xda))var _0x3e72fc=users[_0x418b91(0xd7)];else{if(_0x552912[0x0][_0x418b91(0xf2)]==_0x418b91(0xc2))var _0x3e72fc=users[_0x418b91(0xc2)];else{if(_0x552912[0x0][_0x418b91(0xf2)]==_0x418b91(0xc5))var _0x3e72fc=users['German'];else{if(_0x552912[0x0][_0x418b91(0xf2)]==_0x418b91(0xf3))var _0x3e72fc=users[_0x418b91(0xf3)];else{if(_0x552912[0x0]['language']==_0x418b91(0xc7))var _0x3e72fc=users['French'];else{if(_0x552912[0x0][_0x418b91(0xf2)]=='Portuguese\x20(BR)')var _0x3e72fc=users['Portuguese'];else{if(_0x552912[0x0]['language']==_0x418b91(0xbe))var _0x3e72fc=users[_0x418b91(0xbe)];else{if(_0x552912[0x0]['language']=='Arabic\x20(ae)')var _0x3e72fc=users[_0x418b91(0xc6)];}}}}}}}_0x116d22[_0x418b91(0xe5)](_0x418b91(0xe9),{'success':_0x4c180b['flash']('success'),'errors':_0x4c180b[_0x418b91(0xcd)]('errors'),'master_shop':_0x552912,'profile':_0x2e370f,'role':_0x4f323c,'language':_0x3e72fc,'data':_0xdc8e94});}catch(_0x21f2da){_0x116d22[_0x418b91(0xc1)](_0x21f2da);}}),router['get'](a0_0x4783fe(0xca),auth,async(_0x5e1224,_0x22b4b2)=>{var _0x1cfba3=a0_0x4783fe;try{const _0x1aa227=_0x5e1224[_0x1cfba3(0xd6)]['id'];var _0x320e11=await sales_finished['findById'](_0x1aa227);const _0x47c6ee=await master_shop[_0x1cfba3(0xe3)](),_0x1bad2b=_0x5e1224[_0x1cfba3(0xd0)],_0x18357d=await profile[_0x1cfba3(0xdf)]({'email':_0x1bad2b[_0x1cfba3(0xc8)]});if(_0x47c6ee[0x0][_0x1cfba3(0xf2)]==_0x1cfba3(0xda))var _0x472d8b=users[_0x1cfba3(0xd7)];else{if(_0x47c6ee[0x0][_0x1cfba3(0xf2)]==_0x1cfba3(0xc2))var _0x472d8b=users[_0x1cfba3(0xc2)];else{if(_0x47c6ee[0x0]['language']=='German')var _0x472d8b=users[_0x1cfba3(0xc5)];else{if(_0x47c6ee[0x0][_0x1cfba3(0xf2)]=='Spanish')var _0x472d8b=users[_0x1cfba3(0xf3)];else{if(_0x47c6ee[0x0][_0x1cfba3(0xf2)]=='French')var _0x472d8b=users[_0x1cfba3(0xc7)];else{if(_0x47c6ee[0x0]['language']==_0x1cfba3(0xd4))var _0x472d8b=users[_0x1cfba3(0xdc)];else{if(_0x47c6ee[0x0][_0x1cfba3(0xf2)]==_0x1cfba3(0xbe))var _0x472d8b=users[_0x1cfba3(0xbe)];else{if(_0x47c6ee[0x0]['language']==_0x1cfba3(0xe4))var _0x472d8b=users[_0x1cfba3(0xc6)];}}}}}}}_0x22b4b2[_0x1cfba3(0xe5)](_0x1cfba3(0xc0),{'success':_0x5e1224['flash'](_0x1cfba3(0xdd)),'errors':_0x5e1224[_0x1cfba3(0xcd)](_0x1cfba3(0xcf)),'master_shop':_0x47c6ee,'profile':_0x18357d,'role':_0x1bad2b,'language':_0x472d8b,'data':_0x320e11});}catch(_0x8ec02){_0x22b4b2['json'](_0x8ec02);}}),router[a0_0x4783fe(0xce)](a0_0x4783fe(0xea),auth,async(_0x1d86f6,_0x254537)=>{var _0x4b88ec=a0_0x4783fe;try{const _0x13fa56=_0x1d86f6['params']['id'];var _0x2c84f1=await transfers_finished[_0x4b88ec(0xc9)](_0x13fa56);const _0x25dd98=await master_shop[_0x4b88ec(0xe3)](),_0x4f806f=_0x1d86f6[_0x4b88ec(0xd0)],_0x5eccf6=await profile[_0x4b88ec(0xdf)]({'email':_0x4f806f[_0x4b88ec(0xc8)]});if(_0x25dd98[0x0][_0x4b88ec(0xf2)]=='English\x20(US)')var _0x54200=users[_0x4b88ec(0xd7)];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xc2))var _0x54200=users['Hindi'];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xc5))var _0x54200=users[_0x4b88ec(0xc5)];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xf3))var _0x54200=users[_0x4b88ec(0xf3)];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xc7))var _0x54200=users['French'];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xd4))var _0x54200=users[_0x4b88ec(0xdc)];else{if(_0x25dd98[0x0]['language']==_0x4b88ec(0xbe))var _0x54200=users[_0x4b88ec(0xbe)];else{if(_0x25dd98[0x0][_0x4b88ec(0xf2)]==_0x4b88ec(0xe4))var _0x54200=users['Arabic'];}}}}}}}_0x254537[_0x4b88ec(0xe5)]('view_tf_table',{'success':_0x1d86f6[_0x4b88ec(0xcd)](_0x4b88ec(0xdd)),'errors':_0x1d86f6[_0x4b88ec(0xcd)](_0x4b88ec(0xcf)),'master_shop':_0x25dd98,'profile':_0x5eccf6,'role':_0x4f806f,'language':_0x54200,'data':_0x2c84f1});}catch(_0x137972){_0x254537[_0x4b88ec(0xc1)](_0x137972);}}),module[a0_0x4783fe(0xe6)]=router;