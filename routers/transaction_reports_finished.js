var a0_0x520d33=a0_0x1b2d;function a0_0x1b2d(_0x355628,_0x4f12a7){var _0x4aad4f=a0_0x4aad();return a0_0x1b2d=function(_0x1b2de4,_0x28a89a){_0x1b2de4=_0x1b2de4-0xbf;var _0x32ca36=_0x4aad4f[_0x1b2de4];return _0x32ca36;},a0_0x1b2d(_0x355628,_0x4f12a7);}(function(_0x27f19b,_0x17f780){var _0x1dec6b=a0_0x1b2d,_0x3fe54e=_0x27f19b();while(!![]){try{var _0x22bd64=-parseInt(_0x1dec6b(0xc2))/0x1*(-parseInt(_0x1dec6b(0xef))/0x2)+parseInt(_0x1dec6b(0xd4))/0x3+-parseInt(_0x1dec6b(0xd6))/0x4+parseInt(_0x1dec6b(0xc1))/0x5*(parseInt(_0x1dec6b(0xf4))/0x6)+parseInt(_0x1dec6b(0x10e))/0x7*(parseInt(_0x1dec6b(0xf5))/0x8)+-parseInt(_0x1dec6b(0xec))/0x9*(-parseInt(_0x1dec6b(0x103))/0xa)+parseInt(_0x1dec6b(0xe5))/0xb*(-parseInt(_0x1dec6b(0xc7))/0xc);if(_0x22bd64===_0x17f780)break;else _0x3fe54e['push'](_0x3fe54e['shift']());}catch(_0xa1b883){_0x3fe54e['push'](_0x3fe54e['shift']());}}}(a0_0x4aad,0x663c7));const express=require(a0_0x520d33(0x128)),app=express(),router=express[a0_0x520d33(0xe3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require('../models/all_models'),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),nodemailer=require(a0_0x520d33(0x11e));router['get']('/view',auth,async(_0x33f230,_0x49910d)=>{var _0x513860=a0_0x520d33;try{const {username:_0x2a68a4,email:_0x1e3424,role:_0x3520f5}=_0x33f230[_0x513860(0x121)],_0x26debe=_0x33f230[_0x513860(0x121)],_0x49991f=await profile[_0x513860(0xfe)]({'email':_0x26debe[_0x513860(0xfb)]}),_0x45af86=await master_shop['find'](),_0x9d9c86=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x513860(0xe7)}},{'$group':{'_id':'$name','name':{'$first':_0x513860(0x116)}}}]);if(_0x45af86[0x0]['language']==_0x513860(0xcb))var _0x30332f=users[_0x513860(0x114)];else{if(_0x45af86[0x0][_0x513860(0x10d)]==_0x513860(0x104))var _0x30332f=users[_0x513860(0x104)];else{if(_0x45af86[0x0]['language']=='German')var _0x30332f=users['German'];else{if(_0x45af86[0x0][_0x513860(0x10d)]=='Spanish')var _0x30332f=users[_0x513860(0x11a)];else{if(_0x45af86[0x0]['language']=='French')var _0x30332f=users[_0x513860(0x10f)];else{if(_0x45af86[0x0][_0x513860(0x10d)]==_0x513860(0xd5))var _0x30332f=users[_0x513860(0x108)];else{if(_0x45af86[0x0][_0x513860(0x10d)]=='Chinese')var _0x30332f=users[_0x513860(0x101)];else{if(_0x45af86[0x0][_0x513860(0x10d)]==_0x513860(0x111))var _0x30332f=users[_0x513860(0xf3)];}}}}}}}_0x49910d[_0x513860(0x10a)](_0x513860(0xc4),{'success':_0x33f230['flash'](_0x513860(0xf8)),'errors':_0x33f230[_0x513860(0xcd)](_0x513860(0x118)),'role':_0x26debe,'profile':_0x49991f,'master_shop':_0x45af86,'dataProcess':_0x9d9c86,'language':_0x30332f});}catch(_0x3ad5bb){console['log'](_0x3ad5bb);}}),router[a0_0x520d33(0x12a)]('/reports',auth,async(_0x174e5e,_0xaf3ebf)=>{var _0x3f2aa3=a0_0x520d33;const {product_category:_0x6057c0,transaction_category:_0x5b50d9,transaction_date_from:_0x18b644,transaction_date_to:_0x281568,warehouse_category:_0x44b156,item_code:_0x29ecaa}=_0x174e5e[_0x3f2aa3(0xc6)];console[_0x3f2aa3(0xdc)](_0x44b156);if(_0x6057c0=='rm'){if(_0x44b156==_0x3f2aa3(0x125)){var _0x4b1c78=await purchases[_0x3f2aa3(0xf9)]([{'$match':{'date':{'$gte':_0x18b644,'$lte':_0x281568}}},{'$lookup':{'from':_0x3f2aa3(0xfc),'let':{'invoice':_0x3f2aa3(0xd9)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice',_0x3f2aa3(0x110)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x3f2aa3(0xe1),'product_code':_0x3f2aa3(0xd2),'quantity_available':_0x3f2aa3(0x127),'warehouse_name':'$name','warehouse_room':'$room','invoice':'$product_details.invoice','production_date':_0x3f2aa3(0x11d),'expiry_date':_0x3f2aa3(0x112),'UOM':_0x3f2aa3(0x129)}}],'as':_0x3f2aa3(0xd1)}}]);_0x4b1c78[_0x3f2aa3(0xf7)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78['map'](async _0x37e089=>{var _0x51ca1c=_0x3f2aa3;_0x4b1c78[_0x51ca1c(0xf7)][_0x37e089[_0x51ca1c(0xfd)]]=[],await Promise[_0x51ca1c(0x125)](_0x37e089[_0x51ca1c(0xd1)][_0x51ca1c(0xe8)](async _0x5b3f22=>{var _0x23bcca=_0x51ca1c;const _0x5d8161=await sales[_0x23bcca(0xf9)]([{'$unwind':_0x23bcca(0xd7)},{'$match':{'sale_product.id_transaction_from':_0x5b3f22[_0x23bcca(0xe6)][_0x23bcca(0xc8)](),'sale_product.invoice':_0x5b3f22['invoice']}},{'$project':{'_id':_0x23bcca(0x115),'product_name':'$sale_product.product_name','product_code':_0x23bcca(0xe9),'quantity_available':_0x23bcca(0x100),'warehouse_name':_0x23bcca(0x11c),'warehouse_room':_0x23bcca(0xd0),'product_invoice':_0x23bcca(0xdb),'invoice':_0x23bcca(0xd9),'id_transaction_from':_0x23bcca(0x109),'date':_0x23bcca(0xca),'production_date':_0x23bcca(0xf6),'expiry_date':_0x23bcca(0xda),'UOM':'$sale_product.unit'}}]);_0x5d8161['length']>0x0&&_0x4b1c78[_0x23bcca(0xf7)][_0x37e089['invoice']][_0x23bcca(0x126)](..._0x5d8161);}));})),_0x4b1c78[_0x3f2aa3(0xf7)]=_0x4b1c78['data_sales'],_0x4b1c78[_0x3f2aa3(0xde)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x4c20e8=>{var _0x4fdcff=_0x3f2aa3;_0x4b1c78[_0x4fdcff(0xde)][_0x4c20e8[_0x4fdcff(0xfd)]]=[],await Promise[_0x4fdcff(0x125)](_0x4c20e8[_0x4fdcff(0xd1)][_0x4fdcff(0xe8)](async _0x47ac6e=>{var _0x455f6c=_0x4fdcff;const _0x27b944=await adjustment[_0x455f6c(0xf9)]([{'$unwind':_0x455f6c(0xf2)},{'$match':{'product.id_transaction_from':_0x47ac6e[_0x455f6c(0xe6)][_0x455f6c(0xc8)](),'product.invoice':_0x47ac6e[_0x455f6c(0xfd)]}},{'$project':{'_id':_0x455f6c(0xe0),'product_name':_0x455f6c(0xdd),'product_code':_0x455f6c(0x123),'quantity_available':_0x455f6c(0x106),'warehouse_name':_0x455f6c(0x11c),'warehouse_room':_0x455f6c(0xf0),'product_invoice':'$product.invoice','invoice':_0x455f6c(0xd9),'id_transaction_from':_0x455f6c(0x11b),'date':_0x455f6c(0xca),'production_date':'$product.production_date','expiry_date':_0x455f6c(0xd3),'UOM':_0x455f6c(0x124)}}]);_0x27b944[_0x455f6c(0xc9)]>0x0&&_0x4b1c78[_0x455f6c(0xde)][_0x4c20e8[_0x455f6c(0xfd)]][_0x455f6c(0x126)](..._0x27b944);}));})),_0x4b1c78[_0x3f2aa3(0xee)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x1b508b=>{var _0x466387=_0x3f2aa3;_0x4b1c78[_0x466387(0xee)][_0x1b508b['invoice']]=[],await Promise[_0x466387(0x125)](_0x1b508b['warehouse_data'][_0x466387(0xe8)](async _0x49382d=>{var _0x49ccdd=_0x466387;const _0x122343=await transfers['aggregate']([{'$unwind':_0x49ccdd(0xf2)},{'$match':{'product.id_transaction_id':_0x49382d[_0x49ccdd(0xe6)][_0x49ccdd(0xc8)](),'product.To_invoice':_0x49382d[_0x49ccdd(0xfd)]}},{'$project':{'_id':_0x49ccdd(0xe0),'product_name':_0x49ccdd(0xdd),'product_code':_0x49ccdd(0x123),'quantity_available':_0x49ccdd(0xf1),'warehouse_name':_0x49ccdd(0x113),'warehouse_room':'$product.room_names','product_invoice':_0x49ccdd(0xcf),'invoice':'$invoice','id_transaction_from':_0x49ccdd(0xe2),'date':_0x49ccdd(0xca),'production_date':_0x49ccdd(0x11f),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x122343['length']>0x0&&_0x4b1c78[_0x49ccdd(0xee)][_0x1b508b[_0x49ccdd(0xfd)]][_0x49ccdd(0x126)](..._0x122343);}));})),_0xaf3ebf[_0x3f2aa3(0xed)]({'purchases_warehouse':_0x4b1c78,'data_sales':_0x4b1c78[_0x3f2aa3(0xf7)],'data_adjustment':_0x4b1c78[_0x3f2aa3(0xde)],'data_transfer':_0x4b1c78[_0x3f2aa3(0xee)]});}else{var _0x4b1c78=await purchases[_0x3f2aa3(0xf9)]([{'$match':{'warehouse_name':_0x44b156,'date':{'$gte':_0x18b644,'$lte':_0x281568}}},{'$lookup':{'from':_0x3f2aa3(0xfc),'let':{'invoice':_0x3f2aa3(0xd9)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x3f2aa3(0xea),_0x3f2aa3(0x110)]}}},{'$project':{'_id':_0x3f2aa3(0xce),'product_name':'$product_details.product_name','product_code':_0x3f2aa3(0xd2),'quantity_available':_0x3f2aa3(0x127),'warehouse_name':_0x3f2aa3(0x116),'warehouse_room':_0x3f2aa3(0x120),'invoice':_0x3f2aa3(0x110),'production_date':_0x3f2aa3(0x11d),'expiry_date':'$product_details.expiry_date','UOM':'$product_details.unit'}}],'as':_0x3f2aa3(0xd1)}}]);_0x4b1c78[_0x3f2aa3(0xf7)]={},await Promise['all'](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x5745c7=>{var _0x1b8529=_0x3f2aa3;_0x4b1c78[_0x1b8529(0xf7)][_0x5745c7['invoice']]=[],await Promise['all'](_0x5745c7[_0x1b8529(0xd1)][_0x1b8529(0xe8)](async _0x357ad1=>{var _0x2f1bee=_0x1b8529;const _0x3c8130=await sales[_0x2f1bee(0xf9)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x357ad1[_0x2f1bee(0xe6)][_0x2f1bee(0xc8)](),'sale_product.invoice':_0x357ad1[_0x2f1bee(0xfd)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x2f1bee(0xc0),'product_code':_0x2f1bee(0xe9),'quantity_available':_0x2f1bee(0x100),'warehouse_name':_0x2f1bee(0x11c),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':'$invoice','id_transaction_from':_0x2f1bee(0x109),'date':'$date','production_date':_0x2f1bee(0xf6),'expiry_date':'$sale_product.expiry_date','UOM':_0x2f1bee(0x107)}}]);_0x3c8130[_0x2f1bee(0xc9)]>0x0&&_0x4b1c78['data_sales'][_0x5745c7[_0x2f1bee(0xfd)]][_0x2f1bee(0x126)](..._0x3c8130);}));})),_0x4b1c78['data_sales']=_0x4b1c78['data_sales'],_0x4b1c78[_0x3f2aa3(0xde)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x254abc=>{var _0x42f19b=_0x3f2aa3;_0x4b1c78[_0x42f19b(0xde)][_0x254abc[_0x42f19b(0xfd)]]=[],await Promise[_0x42f19b(0x125)](_0x254abc[_0x42f19b(0xd1)][_0x42f19b(0xe8)](async _0x3d21db=>{var _0x33f72d=_0x42f19b;const _0xd8abe9=await adjustment[_0x33f72d(0xf9)]([{'$unwind':_0x33f72d(0xf2)},{'$match':{'product.id_transaction_from':_0x3d21db[_0x33f72d(0xe6)][_0x33f72d(0xc8)](),'product.invoice':_0x3d21db[_0x33f72d(0xfd)]}},{'$project':{'_id':'$product._id','product_name':_0x33f72d(0xdd),'product_code':_0x33f72d(0x123),'quantity_available':_0x33f72d(0x106),'warehouse_name':'$warehouse_name','warehouse_room':_0x33f72d(0xf0),'product_invoice':'$product.invoice','invoice':_0x33f72d(0xd9),'id_transaction_from':_0x33f72d(0x11b),'date':'$date','production_date':_0x33f72d(0x11f),'expiry_date':_0x33f72d(0xd3),'UOM':_0x33f72d(0x124)}}]);_0xd8abe9['length']>0x0&&_0x4b1c78['data_adjustment'][_0x254abc[_0x33f72d(0xfd)]][_0x33f72d(0x126)](..._0xd8abe9);}));})),_0x4b1c78[_0x3f2aa3(0xee)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x208d80=>{var _0x2a890b=_0x3f2aa3;_0x4b1c78[_0x2a890b(0xee)][_0x208d80[_0x2a890b(0xfd)]]=[],await Promise[_0x2a890b(0x125)](_0x208d80[_0x2a890b(0xd1)][_0x2a890b(0xe8)](async _0x2a37ad=>{var _0x5044ea=_0x2a890b;const _0x5eb281=await transfers['aggregate']([{'$unwind':_0x5044ea(0xf2)},{'$match':{'product.id_transaction_id':_0x2a37ad[_0x5044ea(0xe6)][_0x5044ea(0xc8)](),'product.To_invoice':_0x2a37ad[_0x5044ea(0xfd)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x5044ea(0xf1),'warehouse_name':'$to_warehouse','warehouse_room':_0x5044ea(0xf0),'product_invoice':_0x5044ea(0xcf),'invoice':_0x5044ea(0xd9),'id_transaction_from':_0x5044ea(0xe2),'date':_0x5044ea(0xca),'production_date':_0x5044ea(0x11f),'expiry_date':_0x5044ea(0xd3),'UOM':'$product.unit'}}]);_0x5eb281[_0x5044ea(0xc9)]>0x0&&_0x4b1c78[_0x5044ea(0xee)][_0x208d80[_0x5044ea(0xfd)]]['push'](..._0x5eb281);}));})),_0xaf3ebf[_0x3f2aa3(0xed)]({'purchases_warehouse':_0x4b1c78,'data_sales':_0x4b1c78[_0x3f2aa3(0xf7)],'data_adjustment':_0x4b1c78[_0x3f2aa3(0xde)],'data_transfer':_0x4b1c78[_0x3f2aa3(0xee)]});}}else{if(_0x44b156==_0x3f2aa3(0x125)){var _0x4b1c78=await purchases_finished[_0x3f2aa3(0xf9)]([{'$match':{'date':{'$gte':_0x18b644,'$lte':_0x281568}}},{'$lookup':{'from':_0x3f2aa3(0xfc),'let':{'invoice':_0x3f2aa3(0xd9)},'pipeline':[{'$unwind':_0x3f2aa3(0xeb)},{'$match':{'$expr':{'$eq':[_0x3f2aa3(0xea),'$product_details.invoice']}}},{'$project':{'_id':_0x3f2aa3(0xce),'product_name':_0x3f2aa3(0xe1),'product_code':_0x3f2aa3(0xd2),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':_0x3f2aa3(0x120),'invoice':_0x3f2aa3(0x110),'production_date':_0x3f2aa3(0x11d),'expiry_date':_0x3f2aa3(0x112),'UOM':'$product_details.unit'}}],'as':_0x3f2aa3(0xd1)}}]);_0x4b1c78[_0x3f2aa3(0xf7)]={},await Promise['all'](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x44fcbf=>{var _0x506435=_0x3f2aa3;_0x4b1c78['data_sales'][_0x44fcbf[_0x506435(0xfd)]]=[],await Promise['all'](_0x44fcbf[_0x506435(0xd1)][_0x506435(0xe8)](async _0x29dac4=>{var _0x35cd62=_0x506435;const _0x35a93d=await sales_finished['aggregate']([{'$unwind':_0x35cd62(0xd7)},{'$match':{'sale_product.id_transaction_from':_0x29dac4[_0x35cd62(0xe6)]['valueOf'](),'sale_product.invoice':_0x29dac4[_0x35cd62(0xfd)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x35cd62(0xc0),'product_code':_0x35cd62(0xe9),'quantity_available':_0x35cd62(0x100),'warehouse_name':_0x35cd62(0x11c),'warehouse_room':_0x35cd62(0xd0),'product_invoice':'$sale_product.invoice','invoice':_0x35cd62(0xd9),'id_transaction_from':_0x35cd62(0x109),'date':_0x35cd62(0xca),'production_date':_0x35cd62(0xf6),'expiry_date':_0x35cd62(0xda),'UOM':'$sale_product.unit'}}]);_0x35a93d[_0x35cd62(0xc9)]>0x0&&_0x4b1c78[_0x35cd62(0xf7)][_0x44fcbf[_0x35cd62(0xfd)]][_0x35cd62(0x126)](..._0x35a93d);}));})),_0x4b1c78[_0x3f2aa3(0xf7)]=_0x4b1c78[_0x3f2aa3(0xf7)],_0x4b1c78['data_adjustment']={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x2bb62f=>{var _0x4ca258=_0x3f2aa3;_0x4b1c78[_0x4ca258(0xde)][_0x2bb62f['invoice']]=[],await Promise[_0x4ca258(0x125)](_0x2bb62f['warehouse_data'][_0x4ca258(0xe8)](async _0x612eb1=>{var _0x19e851=_0x4ca258;const _0x4c426a=await adjustment_finished['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x612eb1[_0x19e851(0xe6)]['valueOf'](),'product.invoice':_0x612eb1[_0x19e851(0xfd)]}},{'$project':{'_id':_0x19e851(0xe0),'product_name':_0x19e851(0xdd),'product_code':_0x19e851(0x123),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x19e851(0x11c),'warehouse_room':'$product.room_names','product_invoice':_0x19e851(0x10b),'invoice':'$invoice','id_transaction_from':_0x19e851(0x11b),'date':_0x19e851(0xca),'production_date':'$product.production_date','expiry_date':_0x19e851(0xd3),'UOM':'$product.unit'}}]);_0x4c426a['length']>0x0&&_0x4b1c78[_0x19e851(0xde)][_0x2bb62f[_0x19e851(0xfd)]][_0x19e851(0x126)](..._0x4c426a);}));})),_0x4b1c78[_0x3f2aa3(0xee)]={},await Promise['all'](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x59ca20=>{var _0x5d1fff=_0x3f2aa3;_0x4b1c78[_0x5d1fff(0xee)][_0x59ca20[_0x5d1fff(0xfd)]]=[],await Promise['all'](_0x59ca20[_0x5d1fff(0xd1)][_0x5d1fff(0xe8)](async _0x5d7216=>{var _0x2a46e5=_0x5d1fff;const _0x298307=await transfers_finished[_0x2a46e5(0xf9)]([{'$unwind':_0x2a46e5(0xf2)},{'$match':{'product.id_transaction':_0x5d7216[_0x2a46e5(0xe6)]['valueOf'](),'product.from_invoice':_0x5d7216[_0x2a46e5(0xfd)]}},{'$project':{'_id':'$product._id','product_name':_0x2a46e5(0xdd),'product_code':'$product.product_code','quantity_available':_0x2a46e5(0xf1),'warehouse_name':'$to_warehouse','warehouse_room':_0x2a46e5(0xf0),'product_invoice':_0x2a46e5(0xcf),'invoice':_0x2a46e5(0xd9),'id_transaction_from':_0x2a46e5(0x10c),'date':_0x2a46e5(0xca),'production_date':_0x2a46e5(0x11f),'expiry_date':_0x2a46e5(0xd3),'UOM':_0x2a46e5(0x124)}}]);_0x298307[_0x2a46e5(0xc9)]>0x0&&_0x4b1c78[_0x2a46e5(0xee)][_0x59ca20[_0x2a46e5(0xfd)]]['push'](..._0x298307);}));})),_0xaf3ebf[_0x3f2aa3(0xed)]({'purchases_warehouse':_0x4b1c78,'data_sales':_0x4b1c78[_0x3f2aa3(0xf7)],'data_adjustment':_0x4b1c78[_0x3f2aa3(0xde)],'data_transfer':_0x4b1c78['data_transfer']});}else{var _0x4b1c78=await purchases_finished[_0x3f2aa3(0xf9)]([{'$match':{'warehouse_name':_0x44b156,'date':{'$gte':_0x18b644,'$lte':_0x281568}}},{'$lookup':{'from':_0x3f2aa3(0xfc),'let':{'invoice':_0x3f2aa3(0xd9)},'pipeline':[{'$unwind':_0x3f2aa3(0xeb)},{'$match':{'$expr':{'$eq':[_0x3f2aa3(0xea),_0x3f2aa3(0x110)]}}},{'$project':{'_id':_0x3f2aa3(0xce),'product_name':_0x3f2aa3(0xe1),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x3f2aa3(0x116),'warehouse_room':'$room','invoice':_0x3f2aa3(0x110),'production_date':'$product_details.production_date','expiry_date':_0x3f2aa3(0x112),'UOM':'$product_details.unit'}}],'as':_0x3f2aa3(0xd1)}}]);_0x4b1c78[_0x3f2aa3(0xf7)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78[_0x3f2aa3(0xe8)](async _0x278138=>{var _0x317a29=_0x3f2aa3;_0x4b1c78[_0x317a29(0xf7)][_0x278138['invoice']]=[],await Promise[_0x317a29(0x125)](_0x278138[_0x317a29(0xd1)][_0x317a29(0xe8)](async _0x55a276=>{var _0x5c2a4a=_0x317a29;const _0x5bfe17=await sales_finished[_0x5c2a4a(0xf9)]([{'$unwind':_0x5c2a4a(0xd7)},{'$match':{'sale_product.id_transaction_from':_0x55a276[_0x5c2a4a(0xe6)]['valueOf'](),'sale_product.invoice':_0x55a276[_0x5c2a4a(0xfd)]}},{'$project':{'_id':_0x5c2a4a(0x115),'product_name':_0x5c2a4a(0xc0),'product_code':'$sale_product.product_code','quantity_available':_0x5c2a4a(0x100),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x5c2a4a(0xdb),'invoice':_0x5c2a4a(0xd9),'id_transaction_from':_0x5c2a4a(0x109),'date':_0x5c2a4a(0xca),'production_date':_0x5c2a4a(0xf6),'expiry_date':_0x5c2a4a(0xda),'UOM':_0x5c2a4a(0x107)}}]);_0x5bfe17[_0x5c2a4a(0xc9)]>0x0&&_0x4b1c78[_0x5c2a4a(0xf7)][_0x278138['invoice']][_0x5c2a4a(0x126)](..._0x5bfe17);}));})),_0x4b1c78['data_sales']=_0x4b1c78[_0x3f2aa3(0xf7)],_0x4b1c78[_0x3f2aa3(0xde)]={},await Promise['all'](_0x4b1c78['map'](async _0x1f6064=>{var _0xe29b99=_0x3f2aa3;_0x4b1c78[_0xe29b99(0xde)][_0x1f6064[_0xe29b99(0xfd)]]=[],await Promise[_0xe29b99(0x125)](_0x1f6064[_0xe29b99(0xd1)][_0xe29b99(0xe8)](async _0x523fbf=>{var _0x41179a=_0xe29b99;const _0x118bff=await adjustment_finished['aggregate']([{'$unwind':_0x41179a(0xf2)},{'$match':{'product.id_transaction_from':_0x523fbf[_0x41179a(0xe6)][_0x41179a(0xc8)](),'product.invoice':_0x523fbf[_0x41179a(0xfd)]}},{'$project':{'_id':_0x41179a(0xe0),'product_name':'$product.product_name','product_code':_0x41179a(0x123),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x41179a(0x11c),'warehouse_room':_0x41179a(0xf0),'product_invoice':_0x41179a(0x10b),'invoice':_0x41179a(0xd9),'id_transaction_from':_0x41179a(0x11b),'date':_0x41179a(0xca),'production_date':_0x41179a(0x11f),'expiry_date':_0x41179a(0xd3),'UOM':_0x41179a(0x124)}}]);_0x118bff[_0x41179a(0xc9)]>0x0&&_0x4b1c78['data_adjustment'][_0x1f6064[_0x41179a(0xfd)]][_0x41179a(0x126)](..._0x118bff);}));})),_0x4b1c78[_0x3f2aa3(0xee)]={},await Promise[_0x3f2aa3(0x125)](_0x4b1c78['map'](async _0x105616=>{var _0x53c005=_0x3f2aa3;_0x4b1c78[_0x53c005(0xee)][_0x105616[_0x53c005(0xfd)]]=[],await Promise[_0x53c005(0x125)](_0x105616[_0x53c005(0xd1)][_0x53c005(0xe8)](async _0x5560c8=>{var _0x5b7d78=_0x53c005;const _0x12c37b=await transfers_finished['aggregate']([{'$unwind':_0x5b7d78(0xf2)},{'$match':{'product.id_transaction':_0x5560c8[_0x5b7d78(0xe6)]['valueOf'](),'product.from_invoice':_0x5560c8[_0x5b7d78(0xfd)]}},{'$project':{'_id':_0x5b7d78(0xe0),'product_name':_0x5b7d78(0xdd),'product_code':_0x5b7d78(0x123),'quantity_available':_0x5b7d78(0xf1),'warehouse_name':_0x5b7d78(0x113),'warehouse_room':_0x5b7d78(0xf0),'product_invoice':'$product.to_room_name','invoice':_0x5b7d78(0xd9),'id_transaction_from':_0x5b7d78(0x10c),'date':_0x5b7d78(0xca),'production_date':_0x5b7d78(0x11f),'expiry_date':_0x5b7d78(0xd3),'UOM':_0x5b7d78(0x124)}}]);_0x12c37b[_0x5b7d78(0xc9)]>0x0&&_0x4b1c78[_0x5b7d78(0xee)][_0x105616['invoice']]['push'](..._0x12c37b);}));})),_0xaf3ebf[_0x3f2aa3(0xed)]({'purchases_warehouse':_0x4b1c78,'data_sales':_0x4b1c78[_0x3f2aa3(0xf7)],'data_adjustment':_0x4b1c78['data_adjustment'],'data_transfer':_0x4b1c78[_0x3f2aa3(0xee)]});}}}),router[a0_0x520d33(0xe4)]('/viewdata_inc_fg/:id',auth,async(_0x4b0f3f,_0x553ece)=>{var _0x124d61=a0_0x520d33;try{const _0x1a7013=_0x4b0f3f[_0x124d61(0xc3)]['id'];var _0xc4e1c9=await purchases_finished[_0x124d61(0xff)](_0x1a7013);const _0x296afd=await master_shop[_0x124d61(0xc5)](),_0x307529=_0x4b0f3f[_0x124d61(0x121)],_0x59d769=await profile[_0x124d61(0xfe)]({'email':_0x307529[_0x124d61(0xfb)]});if(_0x296afd[0x0]['language']==_0x124d61(0xcb))var _0xb62b73=users['English'];else{if(_0x296afd[0x0]['language']=='Hindi')var _0xb62b73=users[_0x124d61(0x104)];else{if(_0x296afd[0x0][_0x124d61(0x10d)]==_0x124d61(0x102))var _0xb62b73=users['German'];else{if(_0x296afd[0x0][_0x124d61(0x10d)]==_0x124d61(0x11a))var _0xb62b73=users['Spanish'];else{if(_0x296afd[0x0][_0x124d61(0x10d)]==_0x124d61(0x10f))var _0xb62b73=users[_0x124d61(0x10f)];else{if(_0x296afd[0x0][_0x124d61(0x10d)]==_0x124d61(0xd5))var _0xb62b73=users[_0x124d61(0x108)];else{if(_0x296afd[0x0][_0x124d61(0x10d)]=='Chinese')var _0xb62b73=users[_0x124d61(0x101)];else{if(_0x296afd[0x0]['language']=='Arabic\x20(ae)')var _0xb62b73=users[_0x124d61(0xf3)];}}}}}}}_0x553ece[_0x124d61(0x10a)](_0x124d61(0x122),{'success':_0x4b0f3f[_0x124d61(0xcd)](_0x124d61(0xf8)),'errors':_0x4b0f3f[_0x124d61(0xcd)]('errors'),'master_shop':_0x296afd,'profile':_0x59d769,'role':_0x307529,'language':_0xb62b73,'data':_0xc4e1c9});}catch(_0x2aecd5){_0x553ece[_0x124d61(0xed)](_0x2aecd5);}}),router[a0_0x520d33(0xe4)](a0_0x520d33(0xfa),auth,async(_0x3ac25e,_0x352dbf)=>{var _0x508455=a0_0x520d33;try{const _0x1e6b86=_0x3ac25e['params']['id'];var _0x34b753=await sales_finished['findById'](_0x1e6b86);const _0x3cee71=await master_shop['find'](),_0x5b0dc1=_0x3ac25e[_0x508455(0x121)],_0x34e51e=await profile[_0x508455(0xfe)]({'email':_0x5b0dc1['email']});if(_0x3cee71[0x0][_0x508455(0x10d)]==_0x508455(0xcb))var _0x3f05a3=users[_0x508455(0x114)];else{if(_0x3cee71[0x0]['language']==_0x508455(0x104))var _0x3f05a3=users[_0x508455(0x104)];else{if(_0x3cee71[0x0]['language']==_0x508455(0x102))var _0x3f05a3=users[_0x508455(0x102)];else{if(_0x3cee71[0x0]['language']=='Spanish')var _0x3f05a3=users[_0x508455(0x11a)];else{if(_0x3cee71[0x0][_0x508455(0x10d)]==_0x508455(0x10f))var _0x3f05a3=users[_0x508455(0x10f)];else{if(_0x3cee71[0x0][_0x508455(0x10d)]==_0x508455(0xd5))var _0x3f05a3=users[_0x508455(0x108)];else{if(_0x3cee71[0x0][_0x508455(0x10d)]==_0x508455(0x101))var _0x3f05a3=users[_0x508455(0x101)];else{if(_0x3cee71[0x0][_0x508455(0x10d)]==_0x508455(0x111))var _0x3f05a3=users[_0x508455(0xf3)];}}}}}}}_0x352dbf[_0x508455(0x10a)](_0x508455(0xdf),{'success':_0x3ac25e['flash'](_0x508455(0xf8)),'errors':_0x3ac25e['flash'](_0x508455(0x118)),'master_shop':_0x3cee71,'profile':_0x34e51e,'role':_0x5b0dc1,'language':_0x3f05a3,'data':_0x34b753});}catch(_0x2d60d3){_0x352dbf[_0x508455(0xed)](_0x2d60d3);}}),router[a0_0x520d33(0xe4)](a0_0x520d33(0x105),auth,async(_0x4135a1,_0x5b4917)=>{var _0x397dc4=a0_0x520d33;try{const _0x44e4cb=_0x4135a1[_0x397dc4(0xc3)]['id'];var _0x14bbcf=await transfers_finished[_0x397dc4(0xff)](_0x44e4cb);const _0x37940f=await master_shop[_0x397dc4(0xc5)](),_0x50b58f=_0x4135a1[_0x397dc4(0x121)],_0x5b11df=await profile['findOne']({'email':_0x50b58f[_0x397dc4(0xfb)]});if(_0x37940f[0x0][_0x397dc4(0x10d)]==_0x397dc4(0xcb))var _0x47f5f3=users['English'];else{if(_0x37940f[0x0]['language']=='Hindi')var _0x47f5f3=users[_0x397dc4(0x104)];else{if(_0x37940f[0x0][_0x397dc4(0x10d)]==_0x397dc4(0x102))var _0x47f5f3=users['German'];else{if(_0x37940f[0x0][_0x397dc4(0x10d)]==_0x397dc4(0x11a))var _0x47f5f3=users['Spanish'];else{if(_0x37940f[0x0]['language']=='French')var _0x47f5f3=users[_0x397dc4(0x10f)];else{if(_0x37940f[0x0][_0x397dc4(0x10d)]==_0x397dc4(0xd5))var _0x47f5f3=users[_0x397dc4(0x108)];else{if(_0x37940f[0x0][_0x397dc4(0x10d)]==_0x397dc4(0x101))var _0x47f5f3=users[_0x397dc4(0x101)];else{if(_0x37940f[0x0][_0x397dc4(0x10d)]=='Arabic\x20(ae)')var _0x47f5f3=users[_0x397dc4(0xf3)];}}}}}}}_0x5b4917[_0x397dc4(0x10a)](_0x397dc4(0xcc),{'success':_0x4135a1[_0x397dc4(0xcd)](_0x397dc4(0xf8)),'errors':_0x4135a1[_0x397dc4(0xcd)]('errors'),'master_shop':_0x37940f,'profile':_0x5b11df,'role':_0x50b58f,'language':_0x47f5f3,'data':_0x14bbcf});}catch(_0x3e43ac){_0x5b4917[_0x397dc4(0xed)](_0x3e43ac);}}),router[a0_0x520d33(0xe4)]('/viewFG',auth,async(_0x3b71e6,_0x5d4216)=>{var _0x32557f=a0_0x520d33;try{const {username:_0x53bdca,email:_0x2f9c03,role:_0x48a182}=_0x3b71e6['user'],_0xf6f4d0=_0x3b71e6['user'],_0x2e3376=await profile[_0x32557f(0xfe)]({'email':_0xf6f4d0['email']}),_0x265985=await master_shop[_0x32557f(0xc5)](),_0x33aac5=await warehouse[_0x32557f(0xf9)]([{'$match':{'status':_0x32557f(0x117),'warehouse_category':_0x32557f(0x119)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);if(_0x265985[0x0][_0x32557f(0x10d)]=='English\x20(US)')var _0x15845a=users[_0x32557f(0x114)];else{if(_0x265985[0x0]['language']==_0x32557f(0x104))var _0x15845a=users[_0x32557f(0x104)];else{if(_0x265985[0x0][_0x32557f(0x10d)]==_0x32557f(0x102))var _0x15845a=users[_0x32557f(0x102)];else{if(_0x265985[0x0]['language']==_0x32557f(0x11a))var _0x15845a=users['Spanish'];else{if(_0x265985[0x0][_0x32557f(0x10d)]=='French')var _0x15845a=users[_0x32557f(0x10f)];else{if(_0x265985[0x0][_0x32557f(0x10d)]==_0x32557f(0xd5))var _0x15845a=users['Portuguese'];else{if(_0x265985[0x0]['language']==_0x32557f(0x101))var _0x15845a=users[_0x32557f(0x101)];else{if(_0x265985[0x0][_0x32557f(0x10d)]=='Arabic\x20(ae)')var _0x15845a=users['Arabic'];}}}}}}}_0x5d4216['render'](_0x32557f(0xd8),{'success':_0x3b71e6[_0x32557f(0xcd)](_0x32557f(0xf8)),'errors':_0x3b71e6[_0x32557f(0xcd)](_0x32557f(0x118)),'role':_0xf6f4d0,'profile':_0x2e3376,'master_shop':_0x265985,'dataProcess':_0x33aac5,'language':_0x15845a});}catch(_0x8f0f4c){console[_0x32557f(0xdc)](_0x8f0f4c);}}),module[a0_0x520d33(0xbf)]=router;function a0_0x4aad(){var _0x5911e1=['$warehouse_name','$product_details.production_date','nodemailer','$product.production_date','$room','user','view_table','$product.product_code','$product.unit','all','push','$product_details.product_stock','express','$product_details.unit','post','exports','$sale_product.product_name','40evBKMS','372155MobnaR','params','transaction_finished','find','body','24sDemJm','valueOf','length','$date','English\x20(US)','view_tf_table','flash','$product_details._id','$product.to_room_name','$sale_product.room_name','warehouse_data','$product_details.product_code','$product.expiry_date','1849062pEeYJt','Portuguese\x20(BR)','1024072uyIrXD','$sale_product','transaction_finished_raw','$invoice','$sale_product.expiry_date','$sale_product.invoice','log','$product.product_name','data_adjustment','view_og_table','$product._id','$product_details.product_name','$product.id_transaction_id','Router','get','10269985tborKz','_id','Finished\x20Goods','map','$sale_product.product_code','$$invoice','$product_details','117ILcSky','json','data_transfer','4ZJGXGt','$product.room_names','$product.to_quantity','$product','Arabic','300558pPCaSd','776hsgumr','$sale_product.production_date','data_sales','success','aggregate','/viewdata_og_fg/:id','email','warehouses','invoice','findOne','findById','$sale_product.quantity','Chinese','German','455290UFqIFS','Hindi','/viewdata_tf_fg/:id','$product.new_adjust_qty','$sale_product.unit','Portuguese','$sale_product.id_transaction_from','render','$product.invoice','$product.id_transaction','language','13622GIYOTE','French','$product_details.invoice','Arabic\x20(ae)','$product_details.expiry_date','$to_warehouse','English','$sale_product._id','$name','Enabled','errors','Raw\x20Materials','Spanish','$product.id_transaction_from'];a0_0x4aad=function(){return _0x5911e1;};return a0_0x4aad();}