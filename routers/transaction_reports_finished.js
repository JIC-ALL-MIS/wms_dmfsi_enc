var a0_0x18f665=a0_0x357a;function a0_0x357a(_0x1eb5d0,_0x4d0535){var _0x46a735=a0_0x46a7();return a0_0x357a=function(_0x357a41,_0x199c8b){_0x357a41=_0x357a41-0x9b;var _0x2ad2af=_0x46a735[_0x357a41];return _0x2ad2af;},a0_0x357a(_0x1eb5d0,_0x4d0535);}function a0_0x46a7(){var _0x39efaf=['errors','transaction_finished','log','English\x20(US)','Arabic\x20(ae)','English','email','German','French','$invoice','../public/language/languages.json','Arabic','$sale_product','../middleware/auth','120667ctANZU','params','length','/view','body','findOne','flash','/viewdata_tf_fg/:id','nodemailer','/viewdata_og_fg/:id','$product','Portuguese','Spanish','/viewdata_inc_fg/:id','express','$date','1028152DvQUTR','Enabled','find','get','aggregate','109042TfLERy','Hindi','render','367164TrKxBi','14ZAgbYd','Portuguese\x20(BR)','exports','8676IKboFs','1915MEzwlB','$name','view_og_table','json','user','381DhkyqF','success','findById','view_table','810230hcopQH','4428JRpjCx','language','Chinese','$warehouse_name','../models/all_models'];a0_0x46a7=function(){return _0x39efaf;};return a0_0x46a7();}(function(_0x5ea16e,_0xaf4cf2){var _0xd4b77b=a0_0x357a,_0x2a8444=_0x5ea16e();while(!![]){try{var _0x41ca8e=parseInt(_0xd4b77b(0x9d))/0x1+parseInt(_0xd4b77b(0xb2))/0x2+parseInt(_0xd4b77b(0xbf))/0x3*(-parseInt(_0xd4b77b(0xb9))/0x4)+parseInt(_0xd4b77b(0xba))/0x5*(parseInt(_0xd4b77b(0xc4))/0x6)+-parseInt(_0xd4b77b(0xb6))/0x7*(-parseInt(_0xd4b77b(0xad))/0x8)+-parseInt(_0xd4b77b(0xb5))/0x9+-parseInt(_0xd4b77b(0xc3))/0xa;if(_0x41ca8e===_0xaf4cf2)break;else _0x2a8444['push'](_0x2a8444['shift']());}catch(_0x2cfb21){_0x2a8444['push'](_0x2a8444['shift']());}}}(a0_0x46a7,0x4d89e));const express=require(a0_0x18f665(0xab)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x18f665(0xc8)),auth=require(a0_0x18f665(0x9c)),users=require(a0_0x18f665(0xd3)),nodemailer=require(a0_0x18f665(0xa5));router['get'](a0_0x18f665(0xa0),auth,async(_0x2864b5,_0x145363)=>{var _0x38a003=a0_0x18f665;try{const {username:_0x5763d3,email:_0x5a82ee,role:_0x50abb7}=_0x2864b5['user'],_0x308abe=_0x2864b5['user'],_0x56c430=await profile['findOne']({'email':_0x308abe[_0x38a003(0xcf)]}),_0x470431=await master_shop[_0x38a003(0xaf)](),_0x4cf0fa=await warehouse[_0x38a003(0xb1)]([{'$match':{'status':_0x38a003(0xae),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x38a003(0xbb),'name':{'$first':_0x38a003(0xbb)}}}]);if(_0x470431[0x0]['language']==_0x38a003(0xcc))var _0x1efa9d=users['English'];else{if(_0x470431[0x0][_0x38a003(0xc5)]==_0x38a003(0xb3))var _0x1efa9d=users['Hindi'];else{if(_0x470431[0x0][_0x38a003(0xc5)]==_0x38a003(0xd0))var _0x1efa9d=users[_0x38a003(0xd0)];else{if(_0x470431[0x0][_0x38a003(0xc5)]=='Spanish')var _0x1efa9d=users[_0x38a003(0xa9)];else{if(_0x470431[0x0][_0x38a003(0xc5)]==_0x38a003(0xd1))var _0x1efa9d=users['French'];else{if(_0x470431[0x0][_0x38a003(0xc5)]=='Portuguese\x20(BR)')var _0x1efa9d=users[_0x38a003(0xa8)];else{if(_0x470431[0x0]['language']==_0x38a003(0xc6))var _0x1efa9d=users[_0x38a003(0xc6)];else{if(_0x470431[0x0][_0x38a003(0xc5)]=='Arabic\x20(ae)')var _0x1efa9d=users[_0x38a003(0xd4)];}}}}}}}_0x145363[_0x38a003(0xb4)](_0x38a003(0xca),{'success':_0x2864b5['flash'](_0x38a003(0xc0)),'errors':_0x2864b5[_0x38a003(0xa3)](_0x38a003(0xc9)),'role':_0x308abe,'profile':_0x56c430,'master_shop':_0x470431,'dataProcess':_0x4cf0fa,'language':_0x1efa9d});}catch(_0x3ccc4f){console[_0x38a003(0xcb)](_0x3ccc4f);}}),router['post']('/reports',auth,async(_0x18ca5b,_0x229e6f)=>{var _0x4a5cf0=a0_0x18f665;const {product_category:_0x8d7a8d,transaction_category:_0x3a8b64,transaction_date_from:_0x280a36,transaction_date_to:_0x97016c,warehouse_category:_0xaafd6f,item_code:_0x46bdc3}=_0x18ca5b[_0x4a5cf0(0xa1)];var _0x454313;if(_0x8d7a8d=='rm'){}else{if(_0x8d7a8d=='fg')switch(_0x3a8b64){case'IC':_0x46bdc3[_0x4a5cf0(0x9f)]>0x0?_0x454313=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0xaafd6f,'date':{'$gte':_0x280a36,'$lte':_0x97016c}}},{'$unwind':_0x4a5cf0(0xa7)},{'$match':{'$or':[{'product.product_code':_0x46bdc3}]}},{'$group':{'_id':_0x4a5cf0(0xd2),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x4a5cf0(0xc7)},'products':{'$push':_0x4a5cf0(0xa7)}}}]):_0x454313=await purchases_finished[_0x4a5cf0(0xb1)]([{'$match':{'warehouse_name':_0xaafd6f,'date':{'$gte':_0x280a36,'$lte':_0x97016c}}},{'$unwind':_0x4a5cf0(0xa7)},{'$group':{'_id':'$invoice','date':{'$first':_0x4a5cf0(0xac)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':'$product'}}}]);break;case'OG':_0x46bdc3[_0x4a5cf0(0x9f)]>0x0?_0x454313=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0xaafd6f,'date':{'$gte':_0x280a36,'$lte':_0x97016c}}},{'$unwind':_0x4a5cf0(0x9b)},{'$match':{'$or':[{'sale_product.product_code':_0x46bdc3}]}},{'$group':{'_id':_0x4a5cf0(0xd2),'date':{'$first':_0x4a5cf0(0xac)},'warehouse_name':{'$first':_0x4a5cf0(0xc7)},'products':{'$push':'$sale_product'}}}]):_0x454313=await sales_finished[_0x4a5cf0(0xb1)]([{'$match':{'warehouse_name':_0xaafd6f,'date':{'$gte':_0x280a36,'$lte':_0x97016c}}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x4a5cf0(0xd2),'date':{'$first':_0x4a5cf0(0xac)},'warehouse_name':{'$first':_0x4a5cf0(0xc7)},'products':{'$push':'$sale_product'}}}]);break;case'AJ':break;case'TF':_0x454313=await transfers_finished[_0x4a5cf0(0xaf)]({'warehouse':_0xaafd6f,'date':{'$gte':_0x280a36,'$lte':_0x97016c}});break;}}_0x229e6f[_0x4a5cf0(0xbd)]({'data':_0x454313});}),router[a0_0x18f665(0xb0)](a0_0x18f665(0xaa),auth,async(_0xf513d8,_0x1c744d)=>{var _0x405235=a0_0x18f665;try{const _0x2929df=_0xf513d8[_0x405235(0x9e)]['id'];var _0xb0142c=await purchases_finished['findById'](_0x2929df);const _0x31cd22=await master_shop['find'](),_0x87daef=_0xf513d8[_0x405235(0xbe)],_0x1509dc=await profile['findOne']({'email':_0x87daef['email']});if(_0x31cd22[0x0][_0x405235(0xc5)]==_0x405235(0xcc))var _0x33ce59=users['English'];else{if(_0x31cd22[0x0][_0x405235(0xc5)]==_0x405235(0xb3))var _0x33ce59=users['Hindi'];else{if(_0x31cd22[0x0]['language']==_0x405235(0xd0))var _0x33ce59=users[_0x405235(0xd0)];else{if(_0x31cd22[0x0]['language']==_0x405235(0xa9))var _0x33ce59=users['Spanish'];else{if(_0x31cd22[0x0][_0x405235(0xc5)]==_0x405235(0xd1))var _0x33ce59=users[_0x405235(0xd1)];else{if(_0x31cd22[0x0][_0x405235(0xc5)]==_0x405235(0xb7))var _0x33ce59=users['Portuguese'];else{if(_0x31cd22[0x0]['language']=='Chinese')var _0x33ce59=users[_0x405235(0xc6)];else{if(_0x31cd22[0x0][_0x405235(0xc5)]==_0x405235(0xcd))var _0x33ce59=users[_0x405235(0xd4)];}}}}}}}_0x1c744d[_0x405235(0xb4)](_0x405235(0xc2),{'success':_0xf513d8[_0x405235(0xa3)]('success'),'errors':_0xf513d8[_0x405235(0xa3)](_0x405235(0xc9)),'master_shop':_0x31cd22,'profile':_0x1509dc,'role':_0x87daef,'language':_0x33ce59,'data':_0xb0142c});}catch(_0x9ad4e0){_0x1c744d[_0x405235(0xbd)](_0x9ad4e0);}}),router[a0_0x18f665(0xb0)](a0_0x18f665(0xa6),auth,async(_0x1a740b,_0x1f5c76)=>{var _0x285e15=a0_0x18f665;try{const _0x5c241e=_0x1a740b['params']['id'];var _0x4da4bc=await sales_finished[_0x285e15(0xc1)](_0x5c241e);const _0x480c3c=await master_shop[_0x285e15(0xaf)](),_0x4cbd81=_0x1a740b[_0x285e15(0xbe)],_0x4d277a=await profile['findOne']({'email':_0x4cbd81['email']});if(_0x480c3c[0x0][_0x285e15(0xc5)]=='English\x20(US)')var _0x4afa36=users['English'];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]==_0x285e15(0xb3))var _0x4afa36=users[_0x285e15(0xb3)];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]==_0x285e15(0xd0))var _0x4afa36=users['German'];else{if(_0x480c3c[0x0]['language']==_0x285e15(0xa9))var _0x4afa36=users['Spanish'];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]=='French')var _0x4afa36=users[_0x285e15(0xd1)];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]==_0x285e15(0xb7))var _0x4afa36=users[_0x285e15(0xa8)];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]=='Chinese')var _0x4afa36=users[_0x285e15(0xc6)];else{if(_0x480c3c[0x0][_0x285e15(0xc5)]==_0x285e15(0xcd))var _0x4afa36=users['Arabic'];}}}}}}}_0x1f5c76[_0x285e15(0xb4)](_0x285e15(0xbc),{'success':_0x1a740b[_0x285e15(0xa3)](_0x285e15(0xc0)),'errors':_0x1a740b[_0x285e15(0xa3)](_0x285e15(0xc9)),'master_shop':_0x480c3c,'profile':_0x4d277a,'role':_0x4cbd81,'language':_0x4afa36,'data':_0x4da4bc});}catch(_0x3d2ac8){_0x1f5c76[_0x285e15(0xbd)](_0x3d2ac8);}}),router[a0_0x18f665(0xb0)](a0_0x18f665(0xa4),auth,async(_0x1a7c05,_0x1d2b30)=>{var _0x4f2f29=a0_0x18f665;try{const _0x5cbf25=_0x1a7c05['params']['id'];var _0x78e8a7=await transfers_finished[_0x4f2f29(0xc1)](_0x5cbf25);const _0x1a8187=await master_shop[_0x4f2f29(0xaf)](),_0x732d78=_0x1a7c05[_0x4f2f29(0xbe)],_0x42acd1=await profile[_0x4f2f29(0xa2)]({'email':_0x732d78[_0x4f2f29(0xcf)]});if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xcc))var _0x2eb40b=users[_0x4f2f29(0xce)];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xb3))var _0x2eb40b=users[_0x4f2f29(0xb3)];else{if(_0x1a8187[0x0]['language']==_0x4f2f29(0xd0))var _0x2eb40b=users[_0x4f2f29(0xd0)];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xa9))var _0x2eb40b=users[_0x4f2f29(0xa9)];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xd1))var _0x2eb40b=users[_0x4f2f29(0xd1)];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]=='Portuguese\x20(BR)')var _0x2eb40b=users['Portuguese'];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xc6))var _0x2eb40b=users[_0x4f2f29(0xc6)];else{if(_0x1a8187[0x0][_0x4f2f29(0xc5)]==_0x4f2f29(0xcd))var _0x2eb40b=users['Arabic'];}}}}}}}_0x1d2b30[_0x4f2f29(0xb4)]('view_tf_table',{'success':_0x1a7c05[_0x4f2f29(0xa3)](_0x4f2f29(0xc0)),'errors':_0x1a7c05['flash']('errors'),'master_shop':_0x1a8187,'profile':_0x42acd1,'role':_0x732d78,'language':_0x2eb40b,'data':_0x78e8a7});}catch(_0x227dd5){_0x1d2b30['json'](_0x227dd5);}}),module[a0_0x18f665(0xb8)]=router;