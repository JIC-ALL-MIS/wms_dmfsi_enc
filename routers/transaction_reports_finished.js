function a0_0x4de9(){var _0x316102=['$sale_product.product_name','$sale_product._id','findById','../middleware/auth','/reports','map','$date','../models/all_models','German','2696cqkOzo','nodemailer','$product.production_date','8FPtaEK','all','json','/viewdata_inc_fg/:id','params','$sale_product','$product.to_quantity','transaction_finished','$sale_product.expiry_date','$sale_product.room_name','log','$sale_product.product_code','$product_details.production_date','$product.quantity','view_table','$product.unit','flash','English\x20(US)','1421656RPqXur','Raw\x20Materials','view_tf_table','$sale_product.invoice','$warehouse_name','Spanish','French','../public/language/languages.json','$product.id_transaction','407217evowMp','aggregate','$product.standard_unit','Enabled','$product_details','$product_details._id','email','$product.id_transaction_id','$sale_product.unit','transaction_finished_raw','$$invoice','$sale_product.quantity','/viewFG','warehouse_data','$invoice','data_sales','$product.product_code','Portuguese\x20(BR)','success','$product.room_names','$room','Hindi','data_adjustment','exports','$product.id_transaction_from','30hlPTdC','data_transfer','$to_warehouse','$product.to_room_name','push','$product.new_adjust_qty','$sale_product.production_date','$name','1173TMWTFq','valueOf','English','$product.product_name','invoice','$product.expiry_date','$product_details.invoice','/viewdata_og_fg/:id','24464340FUsQDL','/view','INCF-95558079','body','warehouses','1254904OdKMFE','4359925fnlAiA','Arabic','_id','length','$product','Portuguese','Router','$product_details.product_stock','/viewdata_tf_fg/:id','language','$product_details.expiry_date','$product._id','$product_details.unit','$product.invoice','Arabic\x20(ae)','findOne','5486022TozfXS','find','get','user','$product_details.product_code','Chinese','$sale_product.id_transaction_from','$product_details.product_name','render','Finished\x20Goods','errors'];a0_0x4de9=function(){return _0x316102;};return a0_0x4de9();}var a0_0x3cde0e=a0_0x52db;(function(_0x370989,_0x1647ee){var _0x47d564=a0_0x52db,_0x42eecc=_0x370989();while(!![]){try{var _0x42decc=-parseInt(_0x47d564(0xc3))/0x1+parseInt(_0x47d564(0xba))/0x2+-parseInt(_0x47d564(0xe4))/0x3*(-parseInt(_0x47d564(0x116))/0x4)+parseInt(_0x47d564(0xf2))/0x5+-parseInt(_0x47d564(0xdc))/0x6*(-parseInt(_0x47d564(0xf1))/0x7)+-parseInt(_0x47d564(0x119))/0x8*(-parseInt(_0x47d564(0x102))/0x9)+-parseInt(_0x47d564(0xec))/0xa;if(_0x42decc===_0x1647ee)break;else _0x42eecc['push'](_0x42eecc['shift']());}catch(_0x25ec81){_0x42eecc['push'](_0x42eecc['shift']());}}}(a0_0x4de9,0x79bb6));const express=require('express'),app=express(),router=express[a0_0x3cde0e(0xf8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x3cde0e(0x114)),auth=require(a0_0x3cde0e(0x110)),users=require(a0_0x3cde0e(0xc1)),nodemailer=require(a0_0x3cde0e(0x117));function a0_0x52db(_0x41ed70,_0x5c45a5){var _0x4de943=a0_0x4de9();return a0_0x52db=function(_0x52db1d,_0x21c059){_0x52db1d=_0x52db1d-0xaa;var _0x30cac9=_0x4de943[_0x52db1d];return _0x30cac9;},a0_0x52db(_0x41ed70,_0x5c45a5);}router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0xed),auth,async(_0x5a9fe1,_0xe2b8dc)=>{var _0x58efb0=a0_0x3cde0e;try{const {username:_0x4c5c33,email:_0x2146b9,role:_0x52d98b}=_0x5a9fe1[_0x58efb0(0x105)],_0x3c52a6=_0x5a9fe1[_0x58efb0(0x105)],_0x2f0ea0=await profile[_0x58efb0(0x101)]({'email':_0x3c52a6[_0x58efb0(0xc9)]}),_0x3428bb=await master_shop[_0x58efb0(0x103)](),_0x2d6bea=await warehouse[_0x58efb0(0xc4)]([{'$match':{'status':_0x58efb0(0xc6),'warehouse_category':_0x58efb0(0x10b)}},{'$group':{'_id':_0x58efb0(0xe3),'name':{'$first':'$name'}}}]);if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0xb9))var _0x3a0093=users[_0x58efb0(0xe6)];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0xd8))var _0x3a0093=users[_0x58efb0(0xd8)];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0x115))var _0x3a0093=users[_0x58efb0(0x115)];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0xbf))var _0x3a0093=users[_0x58efb0(0xbf)];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0xc0))var _0x3a0093=users['French'];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]==_0x58efb0(0xd4))var _0x3a0093=users[_0x58efb0(0xf7)];else{if(_0x3428bb[0x0][_0x58efb0(0xfb)]=='Chinese')var _0x3a0093=users[_0x58efb0(0x107)];else{if(_0x3428bb[0x0]['language']=='Arabic\x20(ae)')var _0x3a0093=users['Arabic'];}}}}}}}_0xe2b8dc[_0x58efb0(0x10a)](_0x58efb0(0xaf),{'success':_0x5a9fe1['flash'](_0x58efb0(0xd5)),'errors':_0x5a9fe1['flash'](_0x58efb0(0x10c)),'role':_0x3c52a6,'profile':_0x2f0ea0,'master_shop':_0x3428bb,'dataProcess':_0x2d6bea,'language':_0x3a0093});}catch(_0x2e718f){console[_0x58efb0(0xb2)](_0x2e718f);}}),router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0x111),async(_0x3eb18a,_0x40816e)=>{var _0x259190=a0_0x3cde0e;try{var _0x3f90b6='',_0x4a48b9=await purchases_finished['aggregate']([{'$match':{'invoice':_0x259190(0xee)}},{'$unwind':_0x259190(0xf6)},{'$group':{'_id':{'item_code':_0x259190(0xd3),'item_description':'$product.product_name','production_date':_0x259190(0x118),'expiry_date':_0x259190(0xe9)},'totalQty':{'$sum':_0x259190(0xb5)},'unit':{'$first':_0x259190(0xc5)},'secondary_unit':{'$first':'$product.secondary_unit'}}}]);_0x40816e['json'](_0x4a48b9);}catch(_0x12346d){_0x40816e[_0x259190(0xaa)](_0x12346d);}}),router['post']('/reports',auth,async(_0x3a134f,_0x1e7d8f)=>{var _0x116231=a0_0x3cde0e;const {product_category:_0x791c66,transaction_category:_0x12e105,transaction_date_from:_0x227436,transaction_date_to:_0x3d4cc7,warehouse_category:_0x3a37a6,item_code:_0x4d1f5c}=_0x3a134f[_0x116231(0xef)];console[_0x116231(0xb2)](_0x3a37a6);if(_0x791c66=='rm'){if(_0x3a37a6=='all'){var _0x3eb000=await purchases['aggregate']([{'$match':{'date':{'$gte':_0x227436,'$lte':_0x3d4cc7}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x116231(0xd1)},'pipeline':[{'$unwind':_0x116231(0xc7)},{'$match':{'$expr':{'$eq':[_0x116231(0xcd),_0x116231(0xea)]}}},{'$project':{'_id':_0x116231(0xc8),'product_name':_0x116231(0x109),'product_code':_0x116231(0x106),'quantity_available':_0x116231(0xf9),'warehouse_name':_0x116231(0xe3),'warehouse_room':_0x116231(0xd7),'invoice':_0x116231(0xea),'production_date':_0x116231(0xb4),'expiry_date':_0x116231(0xfc),'UOM':_0x116231(0xfe)}}],'as':_0x116231(0xd0)}}]);_0x3eb000['data_sales']={},await Promise[_0x116231(0x11a)](_0x3eb000['map'](async _0x2d1e64=>{var _0x5b3357=_0x116231;_0x3eb000['data_sales'][_0x2d1e64[_0x5b3357(0xe8)]]=[],await Promise[_0x5b3357(0x11a)](_0x2d1e64[_0x5b3357(0xd0)][_0x5b3357(0x112)](async _0x22b1dc=>{var _0x3b0757=_0x5b3357;const _0x18238d=await sales[_0x3b0757(0xc4)]([{'$unwind':_0x3b0757(0xad)},{'$match':{'sale_product.id_transaction_from':_0x22b1dc[_0x3b0757(0xf4)]['valueOf'](),'sale_product.invoice':_0x22b1dc[_0x3b0757(0xe8)]}},{'$project':{'_id':_0x3b0757(0x10e),'product_name':_0x3b0757(0x10d),'product_code':_0x3b0757(0xb3),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x3b0757(0xd1),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x3b0757(0x113),'production_date':_0x3b0757(0xe2),'expiry_date':_0x3b0757(0xb0),'UOM':_0x3b0757(0xcb)}}]);_0x18238d['length']>0x0&&_0x3eb000[_0x3b0757(0xd2)][_0x2d1e64['invoice']][_0x3b0757(0xe0)](..._0x18238d);}));})),_0x3eb000[_0x116231(0xd2)]=_0x3eb000[_0x116231(0xd2)],_0x3eb000[_0x116231(0xd9)]={},await Promise[_0x116231(0x11a)](_0x3eb000[_0x116231(0x112)](async _0x5f35d5=>{var _0x940025=_0x116231;_0x3eb000[_0x940025(0xd9)][_0x5f35d5[_0x940025(0xe8)]]=[],await Promise['all'](_0x5f35d5[_0x940025(0xd0)][_0x940025(0x112)](async _0x3e1f86=>{var _0x1b7c2b=_0x940025;const _0x598f7b=await adjustment[_0x1b7c2b(0xc4)]([{'$unwind':_0x1b7c2b(0xf6)},{'$match':{'product.id_transaction_from':_0x3e1f86[_0x1b7c2b(0xf4)]['valueOf'](),'product.invoice':_0x3e1f86[_0x1b7c2b(0xe8)]}},{'$project':{'_id':_0x1b7c2b(0xfd),'product_name':_0x1b7c2b(0xe7),'product_code':_0x1b7c2b(0xd3),'quantity_available':_0x1b7c2b(0xe1),'warehouse_name':_0x1b7c2b(0xbe),'warehouse_room':_0x1b7c2b(0xd6),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':'$product.id_transaction_from','date':_0x1b7c2b(0x113),'production_date':'$product.production_date','expiry_date':_0x1b7c2b(0xe9),'UOM':_0x1b7c2b(0xb7)}}]);_0x598f7b[_0x1b7c2b(0xf5)]>0x0&&_0x3eb000[_0x1b7c2b(0xd9)][_0x5f35d5[_0x1b7c2b(0xe8)]]['push'](..._0x598f7b);}));})),_0x3eb000['data_transfer']={},await Promise[_0x116231(0x11a)](_0x3eb000['map'](async _0x240ae2=>{var _0x38e7e6=_0x116231;_0x3eb000[_0x38e7e6(0xdd)][_0x240ae2[_0x38e7e6(0xe8)]]=[],await Promise[_0x38e7e6(0x11a)](_0x240ae2['warehouse_data'][_0x38e7e6(0x112)](async _0x422f84=>{var _0x545458=_0x38e7e6;const _0x3d4aff=await transfers[_0x545458(0xc4)]([{'$unwind':_0x545458(0xf6)},{'$match':{'product.id_transaction_id':_0x422f84[_0x545458(0xf4)]['valueOf'](),'product.To_invoice':_0x422f84[_0x545458(0xe8)]}},{'$project':{'_id':_0x545458(0xfd),'product_name':_0x545458(0xe7),'product_code':_0x545458(0xd3),'quantity_available':'$product.to_quantity','warehouse_name':_0x545458(0xde),'warehouse_room':_0x545458(0xd6),'product_invoice':_0x545458(0xdf),'invoice':_0x545458(0xd1),'id_transaction_from':_0x545458(0xca),'date':_0x545458(0x113),'production_date':_0x545458(0x118),'expiry_date':_0x545458(0xe9),'UOM':_0x545458(0xb7)}}]);_0x3d4aff[_0x545458(0xf5)]>0x0&&_0x3eb000['data_transfer'][_0x240ae2[_0x545458(0xe8)]]['push'](..._0x3d4aff);}));})),_0x1e7d8f[_0x116231(0xaa)]({'purchases_warehouse':_0x3eb000,'data_sales':_0x3eb000[_0x116231(0xd2)],'data_adjustment':_0x3eb000[_0x116231(0xd9)],'data_transfer':_0x3eb000[_0x116231(0xdd)]});}else{var _0x3eb000=await purchases[_0x116231(0xc4)]([{'$match':{'warehouse_name':_0x3a37a6,'date':{'$gte':_0x227436,'$lte':_0x3d4cc7}}},{'$lookup':{'from':_0x116231(0xf0),'let':{'invoice':_0x116231(0xd1)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x116231(0xcd),_0x116231(0xea)]}}},{'$project':{'_id':_0x116231(0xc8),'product_name':_0x116231(0x109),'product_code':_0x116231(0x106),'quantity_available':_0x116231(0xf9),'warehouse_name':_0x116231(0xe3),'warehouse_room':_0x116231(0xd7),'invoice':_0x116231(0xea),'production_date':_0x116231(0xb4),'expiry_date':_0x116231(0xfc),'UOM':_0x116231(0xfe)}}],'as':_0x116231(0xd0)}}]);_0x3eb000[_0x116231(0xd2)]={},await Promise['all'](_0x3eb000[_0x116231(0x112)](async _0x5f54c3=>{var _0xafd86b=_0x116231;_0x3eb000[_0xafd86b(0xd2)][_0x5f54c3[_0xafd86b(0xe8)]]=[],await Promise[_0xafd86b(0x11a)](_0x5f54c3[_0xafd86b(0xd0)][_0xafd86b(0x112)](async _0x3ea8d5=>{var _0x4109cb=_0xafd86b;const _0x2c8457=await sales[_0x4109cb(0xc4)]([{'$unwind':_0x4109cb(0xad)},{'$match':{'sale_product.id_transaction_from':_0x3ea8d5[_0x4109cb(0xf4)][_0x4109cb(0xe5)](),'sale_product.invoice':_0x3ea8d5['invoice']}},{'$project':{'_id':_0x4109cb(0x10e),'product_name':_0x4109cb(0x10d),'product_code':_0x4109cb(0xb3),'quantity_available':_0x4109cb(0xce),'warehouse_name':_0x4109cb(0xbe),'warehouse_room':'$sale_product.room_name','product_invoice':_0x4109cb(0xbd),'invoice':_0x4109cb(0xd1),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x4109cb(0x113),'production_date':_0x4109cb(0xe2),'expiry_date':_0x4109cb(0xb0),'UOM':_0x4109cb(0xcb)}}]);_0x2c8457[_0x4109cb(0xf5)]>0x0&&_0x3eb000[_0x4109cb(0xd2)][_0x5f54c3[_0x4109cb(0xe8)]][_0x4109cb(0xe0)](..._0x2c8457);}));})),_0x3eb000['data_sales']=_0x3eb000[_0x116231(0xd2)],_0x3eb000[_0x116231(0xd9)]={},await Promise['all'](_0x3eb000[_0x116231(0x112)](async _0x1a2a00=>{var _0x39c76f=_0x116231;_0x3eb000[_0x39c76f(0xd9)][_0x1a2a00[_0x39c76f(0xe8)]]=[],await Promise[_0x39c76f(0x11a)](_0x1a2a00[_0x39c76f(0xd0)][_0x39c76f(0x112)](async _0x5ce34c=>{var _0x484d81=_0x39c76f;const _0x1e14a4=await adjustment['aggregate']([{'$unwind':_0x484d81(0xf6)},{'$match':{'product.id_transaction_from':_0x5ce34c['_id']['valueOf'](),'product.invoice':_0x5ce34c['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x484d81(0xe7),'product_code':'$product.product_code','quantity_available':_0x484d81(0xe1),'warehouse_name':_0x484d81(0xbe),'warehouse_room':_0x484d81(0xd6),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':'$product.id_transaction_from','date':_0x484d81(0x113),'production_date':_0x484d81(0x118),'expiry_date':'$product.expiry_date','UOM':_0x484d81(0xb7)}}]);_0x1e14a4[_0x484d81(0xf5)]>0x0&&_0x3eb000[_0x484d81(0xd9)][_0x1a2a00['invoice']][_0x484d81(0xe0)](..._0x1e14a4);}));})),_0x3eb000[_0x116231(0xdd)]={},await Promise[_0x116231(0x11a)](_0x3eb000[_0x116231(0x112)](async _0x4df02b=>{var _0x2e6c6d=_0x116231;_0x3eb000[_0x2e6c6d(0xdd)][_0x4df02b[_0x2e6c6d(0xe8)]]=[],await Promise['all'](_0x4df02b[_0x2e6c6d(0xd0)][_0x2e6c6d(0x112)](async _0x45cc6c=>{var _0x220b17=_0x2e6c6d;const _0x53fed2=await transfers[_0x220b17(0xc4)]([{'$unwind':_0x220b17(0xf6)},{'$match':{'product.id_transaction_id':_0x45cc6c[_0x220b17(0xf4)][_0x220b17(0xe5)](),'product.To_invoice':_0x45cc6c[_0x220b17(0xe8)]}},{'$project':{'_id':_0x220b17(0xfd),'product_name':_0x220b17(0xe7),'product_code':_0x220b17(0xd3),'quantity_available':_0x220b17(0xae),'warehouse_name':_0x220b17(0xde),'warehouse_room':'$product.room_names','product_invoice':_0x220b17(0xdf),'invoice':_0x220b17(0xd1),'id_transaction_from':'$product.id_transaction_id','date':'$date','production_date':_0x220b17(0x118),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x53fed2[_0x220b17(0xf5)]>0x0&&_0x3eb000[_0x220b17(0xdd)][_0x4df02b[_0x220b17(0xe8)]][_0x220b17(0xe0)](..._0x53fed2);}));})),_0x1e7d8f[_0x116231(0xaa)]({'purchases_warehouse':_0x3eb000,'data_sales':_0x3eb000[_0x116231(0xd2)],'data_adjustment':_0x3eb000[_0x116231(0xd9)],'data_transfer':_0x3eb000[_0x116231(0xdd)]});}}else{if(_0x3a37a6==_0x116231(0x11a)){var _0x3eb000=await purchases_finished[_0x116231(0xc4)]([{'$match':{'date':{'$gte':_0x227436,'$lte':_0x3d4cc7}}},{'$lookup':{'from':'warehouses','let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x116231(0xc7)},{'$match':{'$expr':{'$eq':[_0x116231(0xcd),'$product_details.invoice']}}},{'$project':{'_id':_0x116231(0xc8),'product_name':_0x116231(0x109),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x116231(0xe3),'warehouse_room':_0x116231(0xd7),'invoice':_0x116231(0xea),'production_date':'$product_details.production_date','expiry_date':_0x116231(0xfc),'UOM':'$product_details.unit'}}],'as':'warehouse_data'}}]);_0x3eb000[_0x116231(0xd2)]={},await Promise[_0x116231(0x11a)](_0x3eb000[_0x116231(0x112)](async _0x2b4373=>{var _0x15f58e=_0x116231;_0x3eb000['data_sales'][_0x2b4373[_0x15f58e(0xe8)]]=[],await Promise[_0x15f58e(0x11a)](_0x2b4373[_0x15f58e(0xd0)]['map'](async _0x47368e=>{var _0x115e18=_0x15f58e;const _0x4c7f6c=await sales_finished[_0x115e18(0xc4)]([{'$unwind':_0x115e18(0xad)},{'$match':{'sale_product.id_transaction_from':_0x47368e[_0x115e18(0xf4)][_0x115e18(0xe5)](),'sale_product.invoice':_0x47368e[_0x115e18(0xe8)]}},{'$project':{'_id':_0x115e18(0x10e),'product_name':_0x115e18(0x10d),'product_code':_0x115e18(0xb3),'quantity_available':_0x115e18(0xce),'warehouse_name':_0x115e18(0xbe),'warehouse_room':_0x115e18(0xb1),'product_invoice':_0x115e18(0xbd),'invoice':'$invoice','id_transaction_from':'$sale_product.id_transaction_from','date':_0x115e18(0x113),'production_date':_0x115e18(0xe2),'expiry_date':'$sale_product.expiry_date','UOM':'$sale_product.unit'}}]);_0x4c7f6c[_0x115e18(0xf5)]>0x0&&_0x3eb000[_0x115e18(0xd2)][_0x2b4373['invoice']][_0x115e18(0xe0)](..._0x4c7f6c);}));})),_0x3eb000[_0x116231(0xd2)]=_0x3eb000[_0x116231(0xd2)],_0x3eb000[_0x116231(0xd9)]={},await Promise['all'](_0x3eb000[_0x116231(0x112)](async _0x5c8c63=>{var _0x166d47=_0x116231;_0x3eb000[_0x166d47(0xd9)][_0x5c8c63['invoice']]=[],await Promise[_0x166d47(0x11a)](_0x5c8c63[_0x166d47(0xd0)][_0x166d47(0x112)](async _0x11af99=>{var _0x496e60=_0x166d47;const _0x232dcb=await adjustment_finished[_0x496e60(0xc4)]([{'$unwind':_0x496e60(0xf6)},{'$match':{'product.id_transaction_from':_0x11af99[_0x496e60(0xf4)][_0x496e60(0xe5)](),'product.invoice':_0x11af99[_0x496e60(0xe8)]}},{'$project':{'_id':_0x496e60(0xfd),'product_name':'$product.product_name','product_code':_0x496e60(0xd3),'quantity_available':_0x496e60(0xe1),'warehouse_name':_0x496e60(0xbe),'warehouse_room':_0x496e60(0xd6),'product_invoice':_0x496e60(0xff),'invoice':_0x496e60(0xd1),'id_transaction_from':_0x496e60(0xdb),'date':'$date','production_date':_0x496e60(0x118),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x232dcb['length']>0x0&&_0x3eb000['data_adjustment'][_0x5c8c63['invoice']][_0x496e60(0xe0)](..._0x232dcb);}));})),_0x3eb000['data_transfer']={},await Promise[_0x116231(0x11a)](_0x3eb000[_0x116231(0x112)](async _0x5d4fc2=>{var _0x561546=_0x116231;_0x3eb000[_0x561546(0xdd)][_0x5d4fc2['invoice']]=[],await Promise[_0x561546(0x11a)](_0x5d4fc2[_0x561546(0xd0)][_0x561546(0x112)](async _0x139cf1=>{var _0x5bf828=_0x561546;const _0x1c6057=await transfers_finished[_0x5bf828(0xc4)]([{'$unwind':_0x5bf828(0xf6)},{'$match':{'product.id_transaction':_0x139cf1['_id']['valueOf'](),'product.from_invoice':_0x139cf1[_0x5bf828(0xe8)]}},{'$project':{'_id':_0x5bf828(0xfd),'product_name':_0x5bf828(0xe7),'product_code':_0x5bf828(0xd3),'quantity_available':'$product.to_quantity','warehouse_name':_0x5bf828(0xde),'warehouse_room':_0x5bf828(0xd6),'product_invoice':'$product.to_room_name','invoice':_0x5bf828(0xd1),'id_transaction_from':_0x5bf828(0xc2),'date':_0x5bf828(0x113),'production_date':_0x5bf828(0x118),'expiry_date':_0x5bf828(0xe9),'UOM':_0x5bf828(0xb7)}}]);_0x1c6057[_0x5bf828(0xf5)]>0x0&&_0x3eb000[_0x5bf828(0xdd)][_0x5d4fc2[_0x5bf828(0xe8)]][_0x5bf828(0xe0)](..._0x1c6057);}));})),_0x1e7d8f['json']({'purchases_warehouse':_0x3eb000,'data_sales':_0x3eb000['data_sales'],'data_adjustment':_0x3eb000[_0x116231(0xd9)],'data_transfer':_0x3eb000[_0x116231(0xdd)]});}else{var _0x3eb000=await purchases_finished[_0x116231(0xc4)]([{'$match':{'warehouse_name':_0x3a37a6,'date':{'$gte':_0x227436,'$lte':_0x3d4cc7}}},{'$lookup':{'from':_0x116231(0xf0),'let':{'invoice':_0x116231(0xd1)},'pipeline':[{'$unwind':_0x116231(0xc7)},{'$match':{'$expr':{'$eq':[_0x116231(0xcd),_0x116231(0xea)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x116231(0x109),'product_code':'$product_details.product_code','quantity_available':_0x116231(0xf9),'warehouse_name':'$name','warehouse_room':'$room','invoice':_0x116231(0xea),'production_date':_0x116231(0xb4),'expiry_date':'$product_details.expiry_date','UOM':_0x116231(0xfe)}}],'as':'warehouse_data'}}]);_0x3eb000[_0x116231(0xd2)]={},await Promise['all'](_0x3eb000[_0x116231(0x112)](async _0x1c2264=>{var _0x1177c8=_0x116231;_0x3eb000['data_sales'][_0x1c2264[_0x1177c8(0xe8)]]=[],await Promise[_0x1177c8(0x11a)](_0x1c2264[_0x1177c8(0xd0)][_0x1177c8(0x112)](async _0x1ff124=>{var _0x2a5708=_0x1177c8;const _0x779252=await sales_finished[_0x2a5708(0xc4)]([{'$unwind':_0x2a5708(0xad)},{'$match':{'sale_product.id_transaction_from':_0x1ff124[_0x2a5708(0xf4)]['valueOf'](),'sale_product.invoice':_0x1ff124[_0x2a5708(0xe8)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x2a5708(0x10d),'product_code':_0x2a5708(0xb3),'quantity_available':_0x2a5708(0xce),'warehouse_name':'$warehouse_name','warehouse_room':_0x2a5708(0xb1),'product_invoice':_0x2a5708(0xbd),'invoice':_0x2a5708(0xd1),'id_transaction_from':_0x2a5708(0x108),'date':_0x2a5708(0x113),'production_date':_0x2a5708(0xe2),'expiry_date':_0x2a5708(0xb0),'UOM':_0x2a5708(0xcb)}}]);_0x779252['length']>0x0&&_0x3eb000[_0x2a5708(0xd2)][_0x1c2264[_0x2a5708(0xe8)]][_0x2a5708(0xe0)](..._0x779252);}));})),_0x3eb000[_0x116231(0xd2)]=_0x3eb000[_0x116231(0xd2)],_0x3eb000[_0x116231(0xd9)]={},await Promise[_0x116231(0x11a)](_0x3eb000[_0x116231(0x112)](async _0x138344=>{var _0x592f2c=_0x116231;_0x3eb000['data_adjustment'][_0x138344[_0x592f2c(0xe8)]]=[],await Promise['all'](_0x138344[_0x592f2c(0xd0)][_0x592f2c(0x112)](async _0x4d9231=>{var _0x26a37f=_0x592f2c;const _0xeae241=await adjustment_finished[_0x26a37f(0xc4)]([{'$unwind':_0x26a37f(0xf6)},{'$match':{'product.id_transaction_from':_0x4d9231['_id'][_0x26a37f(0xe5)](),'product.invoice':_0x4d9231[_0x26a37f(0xe8)]}},{'$project':{'_id':_0x26a37f(0xfd),'product_name':_0x26a37f(0xe7),'product_code':_0x26a37f(0xd3),'quantity_available':_0x26a37f(0xe1),'warehouse_name':_0x26a37f(0xbe),'warehouse_room':_0x26a37f(0xd6),'product_invoice':_0x26a37f(0xff),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_from','date':_0x26a37f(0x113),'production_date':'$product.production_date','expiry_date':_0x26a37f(0xe9),'UOM':_0x26a37f(0xb7)}}]);_0xeae241[_0x26a37f(0xf5)]>0x0&&_0x3eb000[_0x26a37f(0xd9)][_0x138344[_0x26a37f(0xe8)]][_0x26a37f(0xe0)](..._0xeae241);}));})),_0x3eb000[_0x116231(0xdd)]={},await Promise[_0x116231(0x11a)](_0x3eb000['map'](async _0x2e50bf=>{var _0x1d89a6=_0x116231;_0x3eb000['data_transfer'][_0x2e50bf['invoice']]=[],await Promise[_0x1d89a6(0x11a)](_0x2e50bf[_0x1d89a6(0xd0)]['map'](async _0x3d3b7b=>{var _0x266ee9=_0x1d89a6;const _0x2eaefe=await transfers_finished[_0x266ee9(0xc4)]([{'$unwind':_0x266ee9(0xf6)},{'$match':{'product.id_transaction':_0x3d3b7b['_id'][_0x266ee9(0xe5)](),'product.from_invoice':_0x3d3b7b[_0x266ee9(0xe8)]}},{'$project':{'_id':_0x266ee9(0xfd),'product_name':_0x266ee9(0xe7),'product_code':_0x266ee9(0xd3),'quantity_available':_0x266ee9(0xae),'warehouse_name':'$to_warehouse','warehouse_room':_0x266ee9(0xd6),'product_invoice':_0x266ee9(0xdf),'invoice':'$invoice','id_transaction_from':_0x266ee9(0xc2),'date':_0x266ee9(0x113),'production_date':_0x266ee9(0x118),'expiry_date':'$product.expiry_date','UOM':_0x266ee9(0xb7)}}]);_0x2eaefe[_0x266ee9(0xf5)]>0x0&&_0x3eb000['data_transfer'][_0x2e50bf[_0x266ee9(0xe8)]][_0x266ee9(0xe0)](..._0x2eaefe);}));})),_0x1e7d8f['json']({'purchases_warehouse':_0x3eb000,'data_sales':_0x3eb000['data_sales'],'data_adjustment':_0x3eb000[_0x116231(0xd9)],'data_transfer':_0x3eb000[_0x116231(0xdd)]});}}}),router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0xab),auth,async(_0x2c6f3b,_0x4a3304)=>{var _0x3f77d7=a0_0x3cde0e;try{const _0x1af33a=_0x2c6f3b[_0x3f77d7(0xac)]['id'];var _0x27e2d2=await purchases_finished[_0x3f77d7(0x10f)](_0x1af33a);const _0x11c3d6=await master_shop[_0x3f77d7(0x103)](),_0x7f084=_0x2c6f3b['user'],_0x5553d2=await profile['findOne']({'email':_0x7f084[_0x3f77d7(0xc9)]});if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]==_0x3f77d7(0xb9))var _0x321ceb=users[_0x3f77d7(0xe6)];else{if(_0x11c3d6[0x0]['language']==_0x3f77d7(0xd8))var _0x321ceb=users[_0x3f77d7(0xd8)];else{if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]==_0x3f77d7(0x115))var _0x321ceb=users[_0x3f77d7(0x115)];else{if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]=='Spanish')var _0x321ceb=users[_0x3f77d7(0xbf)];else{if(_0x11c3d6[0x0]['language']=='French')var _0x321ceb=users[_0x3f77d7(0xc0)];else{if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]==_0x3f77d7(0xd4))var _0x321ceb=users[_0x3f77d7(0xf7)];else{if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]==_0x3f77d7(0x107))var _0x321ceb=users[_0x3f77d7(0x107)];else{if(_0x11c3d6[0x0][_0x3f77d7(0xfb)]==_0x3f77d7(0x100))var _0x321ceb=users['Arabic'];}}}}}}}_0x4a3304[_0x3f77d7(0x10a)](_0x3f77d7(0xb6),{'success':_0x2c6f3b['flash']('success'),'errors':_0x2c6f3b[_0x3f77d7(0xb8)](_0x3f77d7(0x10c)),'master_shop':_0x11c3d6,'profile':_0x5553d2,'role':_0x7f084,'language':_0x321ceb,'data':_0x27e2d2});}catch(_0x2c1df0){_0x4a3304[_0x3f77d7(0xaa)](_0x2c1df0);}}),router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0xeb),auth,async(_0x30d549,_0x506e1a)=>{var _0x23941d=a0_0x3cde0e;try{const _0x31fb99=_0x30d549[_0x23941d(0xac)]['id'];var _0x2bb889=await sales_finished[_0x23941d(0x10f)](_0x31fb99);const _0x527e09=await master_shop[_0x23941d(0x103)](),_0xe5644f=_0x30d549[_0x23941d(0x105)],_0x169949=await profile['findOne']({'email':_0xe5644f[_0x23941d(0xc9)]});if(_0x527e09[0x0][_0x23941d(0xfb)]==_0x23941d(0xb9))var _0x591eae=users[_0x23941d(0xe6)];else{if(_0x527e09[0x0][_0x23941d(0xfb)]=='Hindi')var _0x591eae=users[_0x23941d(0xd8)];else{if(_0x527e09[0x0][_0x23941d(0xfb)]==_0x23941d(0x115))var _0x591eae=users[_0x23941d(0x115)];else{if(_0x527e09[0x0][_0x23941d(0xfb)]==_0x23941d(0xbf))var _0x591eae=users[_0x23941d(0xbf)];else{if(_0x527e09[0x0][_0x23941d(0xfb)]==_0x23941d(0xc0))var _0x591eae=users[_0x23941d(0xc0)];else{if(_0x527e09[0x0][_0x23941d(0xfb)]==_0x23941d(0xd4))var _0x591eae=users[_0x23941d(0xf7)];else{if(_0x527e09[0x0]['language']==_0x23941d(0x107))var _0x591eae=users['Chinese'];else{if(_0x527e09[0x0]['language']==_0x23941d(0x100))var _0x591eae=users[_0x23941d(0xf3)];}}}}}}}_0x506e1a[_0x23941d(0x10a)]('view_og_table',{'success':_0x30d549[_0x23941d(0xb8)]('success'),'errors':_0x30d549[_0x23941d(0xb8)]('errors'),'master_shop':_0x527e09,'profile':_0x169949,'role':_0xe5644f,'language':_0x591eae,'data':_0x2bb889});}catch(_0x5d7f42){_0x506e1a[_0x23941d(0xaa)](_0x5d7f42);}}),router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0xfa),auth,async(_0x3973ba,_0x440241)=>{var _0x4cc214=a0_0x3cde0e;try{const _0x395bd6=_0x3973ba['params']['id'];var _0x495635=await transfers_finished[_0x4cc214(0x10f)](_0x395bd6);const _0x4229cd=await master_shop[_0x4cc214(0x103)](),_0x29e307=_0x3973ba[_0x4cc214(0x105)],_0x916de0=await profile[_0x4cc214(0x101)]({'email':_0x29e307[_0x4cc214(0xc9)]});if(_0x4229cd[0x0]['language']==_0x4cc214(0xb9))var _0xd5560d=users[_0x4cc214(0xe6)];else{if(_0x4229cd[0x0][_0x4cc214(0xfb)]=='Hindi')var _0xd5560d=users['Hindi'];else{if(_0x4229cd[0x0][_0x4cc214(0xfb)]==_0x4cc214(0x115))var _0xd5560d=users[_0x4cc214(0x115)];else{if(_0x4229cd[0x0]['language']==_0x4cc214(0xbf))var _0xd5560d=users[_0x4cc214(0xbf)];else{if(_0x4229cd[0x0]['language']==_0x4cc214(0xc0))var _0xd5560d=users[_0x4cc214(0xc0)];else{if(_0x4229cd[0x0][_0x4cc214(0xfb)]==_0x4cc214(0xd4))var _0xd5560d=users['Portuguese'];else{if(_0x4229cd[0x0][_0x4cc214(0xfb)]==_0x4cc214(0x107))var _0xd5560d=users['Chinese'];else{if(_0x4229cd[0x0][_0x4cc214(0xfb)]==_0x4cc214(0x100))var _0xd5560d=users[_0x4cc214(0xf3)];}}}}}}}_0x440241[_0x4cc214(0x10a)](_0x4cc214(0xbc),{'success':_0x3973ba[_0x4cc214(0xb8)]('success'),'errors':_0x3973ba[_0x4cc214(0xb8)](_0x4cc214(0x10c)),'master_shop':_0x4229cd,'profile':_0x916de0,'role':_0x29e307,'language':_0xd5560d,'data':_0x495635});}catch(_0x8a9af3){_0x440241[_0x4cc214(0xaa)](_0x8a9af3);}}),router[a0_0x3cde0e(0x104)](a0_0x3cde0e(0xcf),auth,async(_0xcb9e8c,_0x2403ec)=>{var _0x5027a2=a0_0x3cde0e;try{const {username:_0x3597d2,email:_0x5372ed,role:_0xdf5f4b}=_0xcb9e8c[_0x5027a2(0x105)],_0x368408=_0xcb9e8c[_0x5027a2(0x105)],_0x445f09=await profile[_0x5027a2(0x101)]({'email':_0x368408[_0x5027a2(0xc9)]}),_0x57e754=await master_shop[_0x5027a2(0x103)](),_0x526318=await warehouse[_0x5027a2(0xc4)]([{'$match':{'status':_0x5027a2(0xc6),'warehouse_category':_0x5027a2(0xbb)}},{'$group':{'_id':_0x5027a2(0xe3),'name':{'$first':'$name'}}}]);if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0xb9))var _0x35be10=users[_0x5027a2(0xe6)];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0xd8))var _0x35be10=users[_0x5027a2(0xd8)];else{if(_0x57e754[0x0]['language']==_0x5027a2(0x115))var _0x35be10=users[_0x5027a2(0x115)];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]=='Spanish')var _0x35be10=users[_0x5027a2(0xbf)];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0xc0))var _0x35be10=users[_0x5027a2(0xc0)];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0xd4))var _0x35be10=users[_0x5027a2(0xf7)];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0x107))var _0x35be10=users['Chinese'];else{if(_0x57e754[0x0][_0x5027a2(0xfb)]==_0x5027a2(0x100))var _0x35be10=users[_0x5027a2(0xf3)];}}}}}}}_0x2403ec[_0x5027a2(0x10a)](_0x5027a2(0xcc),{'success':_0xcb9e8c[_0x5027a2(0xb8)](_0x5027a2(0xd5)),'errors':_0xcb9e8c[_0x5027a2(0xb8)](_0x5027a2(0x10c)),'role':_0x368408,'profile':_0x445f09,'master_shop':_0x57e754,'dataProcess':_0x526318,'language':_0x35be10});}catch(_0x14409b){console[_0x5027a2(0xb2)](_0x14409b);}}),module[a0_0x3cde0e(0xda)]=router;