var a0_0x39b1ce=a0_0x4010;(function(_0x57287f,_0x1bb69b){var _0x5e1f42=a0_0x4010,_0x2a8f18=_0x57287f();while(!![]){try{var _0x31cc93=parseInt(_0x5e1f42(0xb0))/0x1+parseInt(_0x5e1f42(0xc8))/0x2+parseInt(_0x5e1f42(0xb3))/0x3*(-parseInt(_0x5e1f42(0xa4))/0x4)+parseInt(_0x5e1f42(0xd8))/0x5*(-parseInt(_0x5e1f42(0xd7))/0x6)+-parseInt(_0x5e1f42(0xbb))/0x7*(-parseInt(_0x5e1f42(0xd0))/0x8)+-parseInt(_0x5e1f42(0xa8))/0x9+parseInt(_0x5e1f42(0xb6))/0xa*(parseInt(_0x5e1f42(0x9c))/0xb);if(_0x31cc93===_0x1bb69b)break;else _0x2a8f18['push'](_0x2a8f18['shift']());}catch(_0x3e88d5){_0x2a8f18['push'](_0x2a8f18['shift']());}}}(a0_0x326c,0xbf37c));function a0_0x4010(_0x38e612,_0x141b2a){var _0x326cd4=a0_0x326c();return a0_0x4010=function(_0x40108b,_0x4669e9){_0x40108b=_0x40108b-0x9b;var _0x83f731=_0x326cd4[_0x40108b];return _0x83f731;},a0_0x4010(_0x38e612,_0x141b2a);}const express=require(a0_0x39b1ce(0xa5)),app=express(),router=express[a0_0x39b1ce(0xd1)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x39b1ce(0xaf)),nodemailer=require(a0_0x39b1ce(0xcc));function a0_0x326c(){var _0x46090b=['4bdSGSU','express','Portuguese','Enabled','10586583gggCGm','get','log','$invoice','Spanish','language','/reports','../public/language/languages.json','683681qLeQoA','success','params','1361112OqcoYr','json','$sale_product','241310oqWCsQ','findById','render','view_tf_table','view_og_table','1529927CCyVCN','Arabic\x20(ae)','body','/view','transaction_finished_raw','view_table','English\x20(US)','$name','Chinese','Finished\x20Goods','length','$date','transaction_finished','1620646PeTJMG','/viewdata_tf_fg/:id','exports','Hindi','nodemailer','English','$product','Portuguese\x20(BR)','8oyOBhw','Router','findOne','email','German','user','/viewFG','3180162HFgWfQ','5MLImVY','/viewdata_og_fg/:id','flash','$from_warehouse','/viewdata_inc_fg/:id','561nbZrUO','errors','French','Arabic','Raw\x20Materials','find','aggregate','$warehouse_name'];a0_0x326c=function(){return _0x46090b;};return a0_0x326c();}router[a0_0x39b1ce(0xa9)](a0_0x39b1ce(0xbe),auth,async(_0x2d8663,_0x477792)=>{var _0xee4c1c=a0_0x39b1ce;try{const {username:_0x5a9756,email:_0x4124e7,role:_0x4069c0}=_0x2d8663[_0xee4c1c(0xd5)],_0x1af359=_0x2d8663[_0xee4c1c(0xd5)],_0x17d3cf=await profile['findOne']({'email':_0x1af359[_0xee4c1c(0xd3)]}),_0x2912c4=await master_shop['find'](),_0x3fde88=await warehouse[_0xee4c1c(0xa2)]([{'$match':{'status':_0xee4c1c(0xa7),'warehouse_category':_0xee4c1c(0xc4)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);if(_0x2912c4[0x0][_0xee4c1c(0xad)]==_0xee4c1c(0xc1))var _0x1008f4=users[_0xee4c1c(0xcd)];else{if(_0x2912c4[0x0][_0xee4c1c(0xad)]==_0xee4c1c(0xcb))var _0x1008f4=users[_0xee4c1c(0xcb)];else{if(_0x2912c4[0x0]['language']==_0xee4c1c(0xd4))var _0x1008f4=users[_0xee4c1c(0xd4)];else{if(_0x2912c4[0x0][_0xee4c1c(0xad)]==_0xee4c1c(0xac))var _0x1008f4=users[_0xee4c1c(0xac)];else{if(_0x2912c4[0x0]['language']==_0xee4c1c(0x9e))var _0x1008f4=users[_0xee4c1c(0x9e)];else{if(_0x2912c4[0x0][_0xee4c1c(0xad)]=='Portuguese\x20(BR)')var _0x1008f4=users[_0xee4c1c(0xa6)];else{if(_0x2912c4[0x0][_0xee4c1c(0xad)]==_0xee4c1c(0xc3))var _0x1008f4=users[_0xee4c1c(0xc3)];else{if(_0x2912c4[0x0][_0xee4c1c(0xad)]==_0xee4c1c(0xbc))var _0x1008f4=users[_0xee4c1c(0x9f)];}}}}}}}_0x477792['render'](_0xee4c1c(0xc7),{'success':_0x2d8663[_0xee4c1c(0xda)](_0xee4c1c(0xb1)),'errors':_0x2d8663[_0xee4c1c(0xda)](_0xee4c1c(0x9d)),'role':_0x1af359,'profile':_0x17d3cf,'master_shop':_0x2912c4,'dataProcess':_0x3fde88,'language':_0x1008f4});}catch(_0x6d503e){console[_0xee4c1c(0xaa)](_0x6d503e);}}),router['post'](a0_0x39b1ce(0xae),auth,async(_0x35896b,_0x20140a)=>{var _0x1b6109=a0_0x39b1ce;const {product_category:_0x3c043a,transaction_category:_0x2e5601,transaction_date_from:_0x1cdaaa,transaction_date_to:_0xcb9659,warehouse_category:_0x25a6a8,item_code:_0x231a42}=_0x35896b[_0x1b6109(0xbd)];var _0xacd15c;if(_0x3c043a=='rm')switch(_0x2e5601){case'IC':_0x231a42[_0x1b6109(0xc5)]>0x0?_0xacd15c=await purchases[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xce)},{'$match':{'$or':[{'product.product_code':_0x231a42}]}},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xce)}}}]):_0xacd15c=await purchases[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xce)},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x1b6109(0xce)}}}]);break;case'OG':_0x231a42[_0x1b6109(0xc5)]>0x0?_0xacd15c=await sales[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xb5)},{'$match':{'$or':[{'sale_product.product_code':_0x231a42}]}},{'$group':{'_id':'$invoice','date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xb5)}}}]):_0xacd15c=await sales[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xb5)},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xb5)}}}]);break;case'AJ':break;case'TF':_0x231a42[_0x1b6109(0xc5)]>0x0?_0xacd15c=await transfers['aggregate']([{'$match':{'from_warehouse':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':'$product'},{'$match':{'$or':[{'product.product_code':_0x231a42}]}},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xdb)},'products':{'$push':_0x1b6109(0xce)}}}]):_0xacd15c=await transfers['aggregate']([{'$match':{'from_warehouse':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xce)},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xdb)},'products':{'$push':'$product'}}}]);break;}else{if(_0x3c043a=='fg')switch(_0x2e5601){case'IC':_0x231a42[_0x1b6109(0xc5)]>0x0?_0xacd15c=await purchases_finished[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xce)},{'$match':{'$or':[{'product.product_code':_0x231a42}]}},{'$group':{'_id':'$invoice','date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x1b6109(0xce)}}}]):_0xacd15c=await purchases_finished[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xce)},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xce)}}}]);break;case'OG':_0x231a42[_0x1b6109(0xc5)]>0x0?_0xacd15c=await sales_finished[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':_0x1b6109(0xb5)},{'$match':{'$or':[{'sale_product.product_code':_0x231a42}]}},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xb5)}}}]):_0xacd15c=await sales_finished[_0x1b6109(0xa2)]([{'$match':{'warehouse_name':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x1b6109(0xab),'date':{'$first':_0x1b6109(0xc6)},'warehouse_name':{'$first':_0x1b6109(0xa3)},'products':{'$push':_0x1b6109(0xb5)}}}]);break;case'AJ':break;case'TF':_0xacd15c=await transfers_finished[_0x1b6109(0xa1)]({'warehouse':_0x25a6a8,'date':{'$gte':_0x1cdaaa,'$lte':_0xcb9659}});break;}}_0x20140a[_0x1b6109(0xb4)]({'data':_0xacd15c});}),router[a0_0x39b1ce(0xa9)](a0_0x39b1ce(0x9b),auth,async(_0x2a869a,_0x283169)=>{var _0x5c20fe=a0_0x39b1ce;try{const _0x6cc494=_0x2a869a[_0x5c20fe(0xb2)]['id'];var _0x39a890=await purchases_finished[_0x5c20fe(0xb7)](_0x6cc494);const _0x5a14de=await master_shop[_0x5c20fe(0xa1)](),_0x22edb0=_0x2a869a['user'],_0x2c18de=await profile[_0x5c20fe(0xd2)]({'email':_0x22edb0[_0x5c20fe(0xd3)]});if(_0x5a14de[0x0]['language']=='English\x20(US)')var _0x1c2b8b=users[_0x5c20fe(0xcd)];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0xcb))var _0x1c2b8b=users[_0x5c20fe(0xcb)];else{if(_0x5a14de[0x0]['language']=='German')var _0x1c2b8b=users['German'];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0xac))var _0x1c2b8b=users['Spanish'];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0x9e))var _0x1c2b8b=users['French'];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0xcf))var _0x1c2b8b=users[_0x5c20fe(0xa6)];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0xc3))var _0x1c2b8b=users[_0x5c20fe(0xc3)];else{if(_0x5a14de[0x0][_0x5c20fe(0xad)]==_0x5c20fe(0xbc))var _0x1c2b8b=users[_0x5c20fe(0x9f)];}}}}}}}_0x283169[_0x5c20fe(0xb8)](_0x5c20fe(0xc0),{'success':_0x2a869a[_0x5c20fe(0xda)]('success'),'errors':_0x2a869a[_0x5c20fe(0xda)](_0x5c20fe(0x9d)),'master_shop':_0x5a14de,'profile':_0x2c18de,'role':_0x22edb0,'language':_0x1c2b8b,'data':_0x39a890});}catch(_0x2279da){_0x283169[_0x5c20fe(0xb4)](_0x2279da);}}),router['get'](a0_0x39b1ce(0xd9),auth,async(_0xd11dca,_0x1e999a)=>{var _0x51ec2e=a0_0x39b1ce;try{const _0x39697a=_0xd11dca['params']['id'];var _0x1df6fb=await sales_finished[_0x51ec2e(0xb7)](_0x39697a);const _0x22736d=await master_shop[_0x51ec2e(0xa1)](),_0x673a9=_0xd11dca[_0x51ec2e(0xd5)],_0x338ff8=await profile[_0x51ec2e(0xd2)]({'email':_0x673a9[_0x51ec2e(0xd3)]});if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xc1))var _0x57f094=users[_0x51ec2e(0xcd)];else{if(_0x22736d[0x0]['language']==_0x51ec2e(0xcb))var _0x57f094=users[_0x51ec2e(0xcb)];else{if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xd4))var _0x57f094=users[_0x51ec2e(0xd4)];else{if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xac))var _0x57f094=users[_0x51ec2e(0xac)];else{if(_0x22736d[0x0]['language']==_0x51ec2e(0x9e))var _0x57f094=users[_0x51ec2e(0x9e)];else{if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xcf))var _0x57f094=users['Portuguese'];else{if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xc3))var _0x57f094=users[_0x51ec2e(0xc3)];else{if(_0x22736d[0x0][_0x51ec2e(0xad)]==_0x51ec2e(0xbc))var _0x57f094=users[_0x51ec2e(0x9f)];}}}}}}}_0x1e999a[_0x51ec2e(0xb8)](_0x51ec2e(0xba),{'success':_0xd11dca[_0x51ec2e(0xda)](_0x51ec2e(0xb1)),'errors':_0xd11dca['flash'](_0x51ec2e(0x9d)),'master_shop':_0x22736d,'profile':_0x338ff8,'role':_0x673a9,'language':_0x57f094,'data':_0x1df6fb});}catch(_0x3886bf){_0x1e999a['json'](_0x3886bf);}}),router[a0_0x39b1ce(0xa9)](a0_0x39b1ce(0xc9),auth,async(_0x1d5b51,_0x491e9f)=>{var _0x296071=a0_0x39b1ce;try{const _0x229949=_0x1d5b51['params']['id'];var _0x426372=await transfers_finished['findById'](_0x229949);const _0x502c90=await master_shop[_0x296071(0xa1)](),_0x383d9e=_0x1d5b51[_0x296071(0xd5)],_0x505f79=await profile[_0x296071(0xd2)]({'email':_0x383d9e[_0x296071(0xd3)]});if(_0x502c90[0x0][_0x296071(0xad)]=='English\x20(US)')var _0x173278=users[_0x296071(0xcd)];else{if(_0x502c90[0x0][_0x296071(0xad)]==_0x296071(0xcb))var _0x173278=users['Hindi'];else{if(_0x502c90[0x0]['language']==_0x296071(0xd4))var _0x173278=users[_0x296071(0xd4)];else{if(_0x502c90[0x0][_0x296071(0xad)]==_0x296071(0xac))var _0x173278=users[_0x296071(0xac)];else{if(_0x502c90[0x0]['language']==_0x296071(0x9e))var _0x173278=users[_0x296071(0x9e)];else{if(_0x502c90[0x0][_0x296071(0xad)]==_0x296071(0xcf))var _0x173278=users['Portuguese'];else{if(_0x502c90[0x0][_0x296071(0xad)]==_0x296071(0xc3))var _0x173278=users[_0x296071(0xc3)];else{if(_0x502c90[0x0]['language']==_0x296071(0xbc))var _0x173278=users[_0x296071(0x9f)];}}}}}}}_0x491e9f[_0x296071(0xb8)](_0x296071(0xb9),{'success':_0x1d5b51[_0x296071(0xda)](_0x296071(0xb1)),'errors':_0x1d5b51['flash'](_0x296071(0x9d)),'master_shop':_0x502c90,'profile':_0x505f79,'role':_0x383d9e,'language':_0x173278,'data':_0x426372});}catch(_0x448019){_0x491e9f[_0x296071(0xb4)](_0x448019);}}),router[a0_0x39b1ce(0xa9)](a0_0x39b1ce(0xd6),auth,async(_0x4c5d57,_0x18e7cb)=>{var _0x1e12c9=a0_0x39b1ce;try{const {username:_0x1e38e1,email:_0xc948aa,role:_0x537992}=_0x4c5d57[_0x1e12c9(0xd5)],_0x351ebd=_0x4c5d57['user'],_0xb4d037=await profile[_0x1e12c9(0xd2)]({'email':_0x351ebd[_0x1e12c9(0xd3)]}),_0x167ce5=await master_shop[_0x1e12c9(0xa1)](),_0x1d5a6f=await warehouse[_0x1e12c9(0xa2)]([{'$match':{'status':_0x1e12c9(0xa7),'warehouse_category':_0x1e12c9(0xa0)}},{'$group':{'_id':_0x1e12c9(0xc2),'name':{'$first':'$name'}}}]);if(_0x167ce5[0x0][_0x1e12c9(0xad)]==_0x1e12c9(0xc1))var _0x4347f2=users[_0x1e12c9(0xcd)];else{if(_0x167ce5[0x0][_0x1e12c9(0xad)]==_0x1e12c9(0xcb))var _0x4347f2=users['Hindi'];else{if(_0x167ce5[0x0]['language']==_0x1e12c9(0xd4))var _0x4347f2=users['German'];else{if(_0x167ce5[0x0][_0x1e12c9(0xad)]=='Spanish')var _0x4347f2=users['Spanish'];else{if(_0x167ce5[0x0][_0x1e12c9(0xad)]==_0x1e12c9(0x9e))var _0x4347f2=users[_0x1e12c9(0x9e)];else{if(_0x167ce5[0x0][_0x1e12c9(0xad)]==_0x1e12c9(0xcf))var _0x4347f2=users['Portuguese'];else{if(_0x167ce5[0x0]['language']==_0x1e12c9(0xc3))var _0x4347f2=users[_0x1e12c9(0xc3)];else{if(_0x167ce5[0x0][_0x1e12c9(0xad)]=='Arabic\x20(ae)')var _0x4347f2=users[_0x1e12c9(0x9f)];}}}}}}}_0x18e7cb[_0x1e12c9(0xb8)](_0x1e12c9(0xbf),{'success':_0x4c5d57[_0x1e12c9(0xda)](_0x1e12c9(0xb1)),'errors':_0x4c5d57[_0x1e12c9(0xda)](_0x1e12c9(0x9d)),'role':_0x351ebd,'profile':_0xb4d037,'master_shop':_0x167ce5,'dataProcess':_0x1d5a6f,'language':_0x4347f2});}catch(_0x78c83f){console[_0x1e12c9(0xaa)](_0x78c83f);}}),module[a0_0x39b1ce(0xca)]=router;