var a0_0x40013d=a0_0x2b70;(function(_0x10fa3d,_0x545ff7){var _0x5a2694=a0_0x2b70,_0x36d815=_0x10fa3d();while(!![]){try{var _0x56a795=-parseInt(_0x5a2694(0xdc))/0x1*(parseInt(_0x5a2694(0xf8))/0x2)+-parseInt(_0x5a2694(0xe4))/0x3*(-parseInt(_0x5a2694(0xd4))/0x4)+parseInt(_0x5a2694(0xfa))/0x5*(-parseInt(_0x5a2694(0xcc))/0x6)+-parseInt(_0x5a2694(0xf7))/0x7+parseInt(_0x5a2694(0xe1))/0x8*(-parseInt(_0x5a2694(0xc6))/0x9)+-parseInt(_0x5a2694(0xd3))/0xa+parseInt(_0x5a2694(0xcd))/0xb*(parseInt(_0x5a2694(0xfd))/0xc);if(_0x56a795===_0x545ff7)break;else _0x36d815['push'](_0x36d815['shift']());}catch(_0xb6ee5e){_0x36d815['push'](_0x36d815['shift']());}}}(a0_0x2ad3,0x5d777));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x40013d(0xfb)),auth=require(a0_0x40013d(0xd6)),users=require(a0_0x40013d(0xd0)),nodemailer=require(a0_0x40013d(0xd5));function a0_0x2ad3(){var _0x1c5765=['8YtzzaJ','findOne','get','15DqXAbi','$invoice','Chinese','flash','German','email','$date','render','success','/viewdata_inc_fg/:id','French','view_table','/viewdata_og_fg/:id','Portuguese\x20(BR)','exports','Enabled','Arabic','Hindi','length','406665qHrrJK','431638sPUtqf','$name','115zfsFqX','../models/all_models','/viewdata_tf_fg/:id','17760IxgQqP','errors','Spanish','$warehouse_name','find','1183239QlufJy','/reports','transaction_finished','English','params','Portuguese','195996vhwJlR','14729HqGHaS','aggregate','language','../public/language/languages.json','$sale_product','English\x20(US)','4098150otHIFK','319420IcPvqy','nodemailer','../middleware/auth','$product','log','view_tf_table','findById','user','3TZpjqb','Arabic\x20(ae)','json','view_og_table','body'];a0_0x2ad3=function(){return _0x1c5765;};return a0_0x2ad3();}function a0_0x2b70(_0x275d85,_0x3985dd){var _0x2ad315=a0_0x2ad3();return a0_0x2b70=function(_0x2b70ee,_0x1b4098){_0x2b70ee=_0x2b70ee-0xc4;var _0x1262f6=_0x2ad315[_0x2b70ee];return _0x1262f6;},a0_0x2b70(_0x275d85,_0x3985dd);}router[a0_0x40013d(0xe3)]('/view',auth,async(_0x22d744,_0x5597bc)=>{var _0xe3e05b=a0_0x40013d;try{const {username:_0x16453f,email:_0x14d21e,role:_0x3be49b}=_0x22d744[_0xe3e05b(0xdb)],_0x3af595=_0x22d744[_0xe3e05b(0xdb)],_0x3b822b=await profile[_0xe3e05b(0xe2)]({'email':_0x3af595[_0xe3e05b(0xe9)]}),_0x334bf5=await master_shop[_0xe3e05b(0xc5)](),_0x16aa03=await warehouse['aggregate']([{'$match':{'status':_0xe3e05b(0xf3),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0xe3e05b(0xf9),'name':{'$first':_0xe3e05b(0xf9)}}}]);if(_0x334bf5[0x0][_0xe3e05b(0xcf)]=='English\x20(US)')var _0x3a86d7=users[_0xe3e05b(0xc9)];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xf5))var _0x3a86d7=users['Hindi'];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xe8))var _0x3a86d7=users[_0xe3e05b(0xe8)];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xff))var _0x3a86d7=users['Spanish'];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]=='French')var _0x3a86d7=users[_0xe3e05b(0xee)];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xf1))var _0x3a86d7=users[_0xe3e05b(0xcb)];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xe6))var _0x3a86d7=users['Chinese'];else{if(_0x334bf5[0x0][_0xe3e05b(0xcf)]==_0xe3e05b(0xdd))var _0x3a86d7=users['Arabic'];}}}}}}}_0x5597bc[_0xe3e05b(0xeb)](_0xe3e05b(0xc8),{'success':_0x22d744[_0xe3e05b(0xe7)](_0xe3e05b(0xec)),'errors':_0x22d744['flash'](_0xe3e05b(0xfe)),'role':_0x3af595,'profile':_0x3b822b,'master_shop':_0x334bf5,'dataProcess':_0x16aa03,'language':_0x3a86d7});}catch(_0x10a70b){console[_0xe3e05b(0xd8)](_0x10a70b);}}),router['post'](a0_0x40013d(0xc7),auth,async(_0x552a7f,_0x1949dd)=>{var _0x596b53=a0_0x40013d;const {product_category:_0x4cef64,transaction_category:_0x5e7503,transaction_date_from:_0x370f8c,transaction_date_to:_0x5af16d,warehouse_category:_0x7a67c4,item_code:_0x4ba1df}=_0x552a7f[_0x596b53(0xe0)];var _0x20d1be;if(_0x4cef64=='rm'){}else{if(_0x4cef64=='fg')switch(_0x5e7503){case'IC':_0x4ba1df[_0x596b53(0xf6)]>0x0?_0x20d1be=await purchases_finished[_0x596b53(0xce)]([{'$match':{'warehouse_name':_0x7a67c4,'date':{'$gte':_0x370f8c,'$lte':_0x5af16d}}},{'$unwind':_0x596b53(0xd7)},{'$match':{'$or':[{'product.product_code':_0x4ba1df}]}},{'$group':{'_id':_0x596b53(0xe5),'date':{'$first':_0x596b53(0xea)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':'$product'}}}]):_0x20d1be=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x7a67c4,'date':{'$gte':_0x370f8c,'$lte':_0x5af16d}}},{'$unwind':'$product'},{'$group':{'_id':_0x596b53(0xe5),'date':{'$first':_0x596b53(0xea)},'warehouse_name':{'$first':_0x596b53(0xc4)},'products':{'$push':'$product'}}}]);break;case'OG':_0x4ba1df[_0x596b53(0xf6)]>0x0?_0x20d1be=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0x7a67c4,'date':{'$gte':_0x370f8c,'$lte':_0x5af16d}}},{'$unwind':'$sale_product'},{'$match':{'$or':[{'sale_product.product_code':_0x4ba1df}]}},{'$group':{'_id':'$invoice','date':{'$first':'$date'},'warehouse_name':{'$first':_0x596b53(0xc4)},'products':{'$push':'$sale_product'}}}]):_0x20d1be=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0x7a67c4,'date':{'$gte':_0x370f8c,'$lte':_0x5af16d}}},{'$unwind':_0x596b53(0xd1)},{'$group':{'_id':_0x596b53(0xe5),'date':{'$first':_0x596b53(0xea)},'warehouse_name':{'$first':_0x596b53(0xc4)},'products':{'$push':_0x596b53(0xd1)}}}]);break;case'AJ':break;case'TF':_0x20d1be=await transfers_finished['find']({'warehouse':_0x7a67c4,'date':{'$gte':_0x370f8c,'$lte':_0x5af16d}});break;}}_0x1949dd[_0x596b53(0xde)]({'data':_0x20d1be});}),router[a0_0x40013d(0xe3)](a0_0x40013d(0xed),auth,async(_0x4e623c,_0x313cc3)=>{var _0x4dafc8=a0_0x40013d;try{const _0x307f19=_0x4e623c[_0x4dafc8(0xca)]['id'];var _0x2f700d=await purchases_finished[_0x4dafc8(0xda)](_0x307f19);const _0x5ce774=await master_shop['find'](),_0xa9e6eb=_0x4e623c[_0x4dafc8(0xdb)],_0x3b32a6=await profile[_0x4dafc8(0xe2)]({'email':_0xa9e6eb['email']});if(_0x5ce774[0x0][_0x4dafc8(0xcf)]=='English\x20(US)')var _0x52f561=users['English'];else{if(_0x5ce774[0x0][_0x4dafc8(0xcf)]==_0x4dafc8(0xf5))var _0x52f561=users[_0x4dafc8(0xf5)];else{if(_0x5ce774[0x0][_0x4dafc8(0xcf)]==_0x4dafc8(0xe8))var _0x52f561=users['German'];else{if(_0x5ce774[0x0]['language']=='Spanish')var _0x52f561=users[_0x4dafc8(0xff)];else{if(_0x5ce774[0x0]['language']==_0x4dafc8(0xee))var _0x52f561=users['French'];else{if(_0x5ce774[0x0]['language']=='Portuguese\x20(BR)')var _0x52f561=users[_0x4dafc8(0xcb)];else{if(_0x5ce774[0x0][_0x4dafc8(0xcf)]=='Chinese')var _0x52f561=users['Chinese'];else{if(_0x5ce774[0x0][_0x4dafc8(0xcf)]==_0x4dafc8(0xdd))var _0x52f561=users['Arabic'];}}}}}}}_0x313cc3['render'](_0x4dafc8(0xef),{'success':_0x4e623c[_0x4dafc8(0xe7)](_0x4dafc8(0xec)),'errors':_0x4e623c[_0x4dafc8(0xe7)](_0x4dafc8(0xfe)),'master_shop':_0x5ce774,'profile':_0x3b32a6,'role':_0xa9e6eb,'language':_0x52f561,'data':_0x2f700d});}catch(_0x4fdac1){_0x313cc3[_0x4dafc8(0xde)](_0x4fdac1);}}),router[a0_0x40013d(0xe3)](a0_0x40013d(0xf0),auth,async(_0x28ab3d,_0x1f5562)=>{var _0xa8f027=a0_0x40013d;try{const _0x4260ac=_0x28ab3d[_0xa8f027(0xca)]['id'];var _0x1dfd69=await sales_finished['findById'](_0x4260ac);const _0x4c9f99=await master_shop[_0xa8f027(0xc5)](),_0x31c934=_0x28ab3d[_0xa8f027(0xdb)],_0x1cc6a6=await profile[_0xa8f027(0xe2)]({'email':_0x31c934['email']});if(_0x4c9f99[0x0]['language']==_0xa8f027(0xd2))var _0x57bd86=users[_0xa8f027(0xc9)];else{if(_0x4c9f99[0x0][_0xa8f027(0xcf)]==_0xa8f027(0xf5))var _0x57bd86=users[_0xa8f027(0xf5)];else{if(_0x4c9f99[0x0]['language']==_0xa8f027(0xe8))var _0x57bd86=users['German'];else{if(_0x4c9f99[0x0]['language']==_0xa8f027(0xff))var _0x57bd86=users['Spanish'];else{if(_0x4c9f99[0x0]['language']==_0xa8f027(0xee))var _0x57bd86=users['French'];else{if(_0x4c9f99[0x0][_0xa8f027(0xcf)]==_0xa8f027(0xf1))var _0x57bd86=users[_0xa8f027(0xcb)];else{if(_0x4c9f99[0x0]['language']==_0xa8f027(0xe6))var _0x57bd86=users['Chinese'];else{if(_0x4c9f99[0x0][_0xa8f027(0xcf)]==_0xa8f027(0xdd))var _0x57bd86=users[_0xa8f027(0xf4)];}}}}}}}_0x1f5562['render'](_0xa8f027(0xdf),{'success':_0x28ab3d['flash'](_0xa8f027(0xec)),'errors':_0x28ab3d[_0xa8f027(0xe7)]('errors'),'master_shop':_0x4c9f99,'profile':_0x1cc6a6,'role':_0x31c934,'language':_0x57bd86,'data':_0x1dfd69});}catch(_0x21aea6){_0x1f5562[_0xa8f027(0xde)](_0x21aea6);}}),router['get'](a0_0x40013d(0xfc),auth,async(_0x4acda1,_0x3f2357)=>{var _0x34f38a=a0_0x40013d;try{const _0x27b716=_0x4acda1[_0x34f38a(0xca)]['id'];var _0x5c248e=await transfers_finished[_0x34f38a(0xda)](_0x27b716);const _0x1835ca=await master_shop[_0x34f38a(0xc5)](),_0x134168=_0x4acda1[_0x34f38a(0xdb)],_0x59fa5e=await profile[_0x34f38a(0xe2)]({'email':_0x134168[_0x34f38a(0xe9)]});if(_0x1835ca[0x0][_0x34f38a(0xcf)]==_0x34f38a(0xd2))var _0x53872b=users[_0x34f38a(0xc9)];else{if(_0x1835ca[0x0][_0x34f38a(0xcf)]==_0x34f38a(0xf5))var _0x53872b=users[_0x34f38a(0xf5)];else{if(_0x1835ca[0x0]['language']=='German')var _0x53872b=users['German'];else{if(_0x1835ca[0x0][_0x34f38a(0xcf)]=='Spanish')var _0x53872b=users[_0x34f38a(0xff)];else{if(_0x1835ca[0x0][_0x34f38a(0xcf)]==_0x34f38a(0xee))var _0x53872b=users[_0x34f38a(0xee)];else{if(_0x1835ca[0x0][_0x34f38a(0xcf)]==_0x34f38a(0xf1))var _0x53872b=users[_0x34f38a(0xcb)];else{if(_0x1835ca[0x0]['language']=='Chinese')var _0x53872b=users[_0x34f38a(0xe6)];else{if(_0x1835ca[0x0][_0x34f38a(0xcf)]==_0x34f38a(0xdd))var _0x53872b=users['Arabic'];}}}}}}}_0x3f2357['render'](_0x34f38a(0xd9),{'success':_0x4acda1[_0x34f38a(0xe7)]('success'),'errors':_0x4acda1['flash'](_0x34f38a(0xfe)),'master_shop':_0x1835ca,'profile':_0x59fa5e,'role':_0x134168,'language':_0x53872b,'data':_0x5c248e});}catch(_0x45c985){_0x3f2357['json'](_0x45c985);}}),module[a0_0x40013d(0xf2)]=router;