var a0_0x36aadb=a0_0x52ff;(function(_0x51b97e,_0x24bbfc){var _0x45fa84=a0_0x52ff,_0x3c863f=_0x51b97e();while(!![]){try{var _0x3106b8=-parseInt(_0x45fa84(0xda))/0x1*(parseInt(_0x45fa84(0xf3))/0x2)+-parseInt(_0x45fa84(0xcf))/0x3*(-parseInt(_0x45fa84(0xe8))/0x4)+-parseInt(_0x45fa84(0xe7))/0x5+parseInt(_0x45fa84(0xd9))/0x6*(parseInt(_0x45fa84(0xec))/0x7)+parseInt(_0x45fa84(0xe5))/0x8*(parseInt(_0x45fa84(0xdc))/0x9)+-parseInt(_0x45fa84(0xc0))/0xa*(parseInt(_0x45fa84(0xb7))/0xb)+parseInt(_0x45fa84(0xdb))/0xc;if(_0x3106b8===_0x24bbfc)break;else _0x3c863f['push'](_0x3c863f['shift']());}catch(_0x4bbdf1){_0x3c863f['push'](_0x3c863f['shift']());}}}(a0_0x340a,0x94b65));function a0_0x340a(){var _0x310a15=['../models/all_models','find','view_tf_table','params','flash','view_table','json','95049BBtEAt','$date','English','$name','$invoice','$from_warehouse','Arabic\x20(ae)','Portuguese\x20(BR)','Enabled','/reports','4779534BOpJZx','7whZahm','32050044YhRoTP','9hhxrvD','log','errors','../public/language/languages.json','body','English\x20(US)','../middleware/auth','findOne','Arabic','1485592fYtETZ','exports','6078015FrFxcd','8ZVBdQd','/viewdata_inc_fg/:id','user','/viewdata_tf_fg/:id','7UIrgkV','/viewFG','$warehouse_name','Finished\x20Goods','Chinese','aggregate','Portuguese','245654USPmMY','Spanish','success','language','Raw\x20Materials','findById','76186mUylpl','view_og_table','email','render','$product','/viewdata_og_fg/:id','post','transaction_finished','German','1490qPYrni','French','get','length','$sale_product','Router','/view','Hindi'];a0_0x340a=function(){return _0x310a15;};return a0_0x340a();}const express=require('express'),app=express(),router=express[a0_0x36aadb(0xc5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require(a0_0x36aadb(0xc8)),auth=require(a0_0x36aadb(0xe2)),users=require(a0_0x36aadb(0xdf)),nodemailer=require('nodemailer');function a0_0x52ff(_0x3678a0,_0xc1b430){var _0x340a54=a0_0x340a();return a0_0x52ff=function(_0x52fff4,_0x244a25){_0x52fff4=_0x52fff4-0xb5;var _0x211405=_0x340a54[_0x52fff4];return _0x211405;},a0_0x52ff(_0x3678a0,_0xc1b430);}router[a0_0x36aadb(0xc2)](a0_0x36aadb(0xc6),auth,async(_0x3493cc,_0x11da66)=>{var _0x35f3f8=a0_0x36aadb;try{const {username:_0x12cc8e,email:_0x16cbff,role:_0x1bad6e}=_0x3493cc[_0x35f3f8(0xea)],_0x3cf323=_0x3493cc['user'],_0x1d9c18=await profile[_0x35f3f8(0xe3)]({'email':_0x3cf323[_0x35f3f8(0xb9)]}),_0x55c447=await master_shop[_0x35f3f8(0xc9)](),_0x331f6d=await warehouse[_0x35f3f8(0xf1)]([{'$match':{'status':_0x35f3f8(0xd7),'warehouse_category':_0x35f3f8(0xef)}},{'$group':{'_id':'$name','name':{'$first':_0x35f3f8(0xd2)}}}]);if(_0x55c447[0x0][_0x35f3f8(0xf6)]=='English\x20(US)')var _0x1480f8=users[_0x35f3f8(0xd1)];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]=='Hindi')var _0x1480f8=users[_0x35f3f8(0xc7)];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]==_0x35f3f8(0xbf))var _0x1480f8=users['German'];else{if(_0x55c447[0x0]['language']=='Spanish')var _0x1480f8=users[_0x35f3f8(0xf4)];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]==_0x35f3f8(0xc1))var _0x1480f8=users[_0x35f3f8(0xc1)];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]==_0x35f3f8(0xd6))var _0x1480f8=users['Portuguese'];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]==_0x35f3f8(0xf0))var _0x1480f8=users[_0x35f3f8(0xf0)];else{if(_0x55c447[0x0][_0x35f3f8(0xf6)]==_0x35f3f8(0xd5))var _0x1480f8=users[_0x35f3f8(0xe4)];}}}}}}}_0x11da66['render'](_0x35f3f8(0xbe),{'success':_0x3493cc[_0x35f3f8(0xcc)](_0x35f3f8(0xf5)),'errors':_0x3493cc[_0x35f3f8(0xcc)]('errors'),'role':_0x3cf323,'profile':_0x1d9c18,'master_shop':_0x55c447,'dataProcess':_0x331f6d,'language':_0x1480f8});}catch(_0x8c0fac){console['log'](_0x8c0fac);}}),router[a0_0x36aadb(0xbd)](a0_0x36aadb(0xd8),auth,async(_0x4d9b0f,_0xb7635d)=>{var _0xf09846=a0_0x36aadb;const {product_category:_0x44c1e9,transaction_category:_0x27216e,transaction_date_from:_0x5aada1,transaction_date_to:_0x30373c,warehouse_category:_0x27a8af,item_code:_0x3603f9}=_0x4d9b0f[_0xf09846(0xe0)];var _0x39cff3;if(_0x44c1e9=='rm')switch(_0x27216e){case'IC':_0x3603f9[_0xf09846(0xc3)]>0x0?_0x39cff3=await purchases['aggregate']([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$match':{'$or':[{'product.product_code':_0x3603f9}]}},{'$group':{'_id':'$invoice','date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':'$product'}}}]):_0x39cff3=await purchases['aggregate']([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$group':{'_id':'$invoice','date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':'$product'}}}]);break;case'OG':_0x3603f9[_0xf09846(0xc3)]>0x0?_0x39cff3=await sales[_0xf09846(0xf1)]([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xc4)},{'$match':{'$or':[{'sale_product.product_code':_0x3603f9}]}},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':'$sale_product'}}}]):_0x39cff3=await sales[_0xf09846(0xf1)]([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xc4)},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':_0xf09846(0xc4)}}}]);break;case'AJ':break;case'TF':_0x3603f9[_0xf09846(0xc3)]>0x0?_0x39cff3=await transfers[_0xf09846(0xf1)]([{'$match':{'from_warehouse':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$match':{'$or':[{'product.product_code':_0x3603f9}]}},{'$group':{'_id':'$invoice','date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xd4)},'products':{'$push':'$product'}}}]):_0x39cff3=await transfers[_0xf09846(0xf1)]([{'$match':{'from_warehouse':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':'$from_warehouse'},'products':{'$push':_0xf09846(0xbb)}}}]);break;}else{if(_0x44c1e9=='fg')switch(_0x27216e){case'IC':_0x3603f9['length']>0x0?_0x39cff3=await purchases_finished[_0xf09846(0xf1)]([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$match':{'$or':[{'product.product_code':_0x3603f9}]}},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0xf09846(0xbb)}}}]):_0x39cff3=await purchases_finished[_0xf09846(0xf1)]([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xbb)},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':'$date'},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':_0xf09846(0xbb)}}}]);break;case'OG':_0x3603f9['length']>0x0?_0x39cff3=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xc4)},{'$match':{'$or':[{'sale_product.product_code':_0x3603f9}]}},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':_0xf09846(0xc4)}}}]):_0x39cff3=await sales_finished[_0xf09846(0xf1)]([{'$match':{'warehouse_name':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}}},{'$unwind':_0xf09846(0xc4)},{'$group':{'_id':_0xf09846(0xd3),'date':{'$first':_0xf09846(0xd0)},'warehouse_name':{'$first':_0xf09846(0xee)},'products':{'$push':_0xf09846(0xc4)}}}]);break;case'AJ':break;case'TF':_0x39cff3=await transfers_finished[_0xf09846(0xc9)]({'warehouse':_0x27a8af,'date':{'$gte':_0x5aada1,'$lte':_0x30373c}});break;}}_0xb7635d[_0xf09846(0xce)]({'data':_0x39cff3});}),router['get'](a0_0x36aadb(0xe9),auth,async(_0x3422b2,_0x4ad9dd)=>{var _0x1fa676=a0_0x36aadb;try{const _0x414682=_0x3422b2[_0x1fa676(0xcb)]['id'];var _0x4bd39c=await purchases_finished[_0x1fa676(0xb6)](_0x414682);const _0x56014d=await master_shop['find'](),_0x55cd68=_0x3422b2[_0x1fa676(0xea)],_0x2c6358=await profile[_0x1fa676(0xe3)]({'email':_0x55cd68['email']});if(_0x56014d[0x0]['language']==_0x1fa676(0xe1))var _0x2796fc=users[_0x1fa676(0xd1)];else{if(_0x56014d[0x0][_0x1fa676(0xf6)]==_0x1fa676(0xc7))var _0x2796fc=users[_0x1fa676(0xc7)];else{if(_0x56014d[0x0][_0x1fa676(0xf6)]==_0x1fa676(0xbf))var _0x2796fc=users['German'];else{if(_0x56014d[0x0][_0x1fa676(0xf6)]==_0x1fa676(0xf4))var _0x2796fc=users['Spanish'];else{if(_0x56014d[0x0][_0x1fa676(0xf6)]==_0x1fa676(0xc1))var _0x2796fc=users[_0x1fa676(0xc1)];else{if(_0x56014d[0x0]['language']==_0x1fa676(0xd6))var _0x2796fc=users[_0x1fa676(0xf2)];else{if(_0x56014d[0x0][_0x1fa676(0xf6)]==_0x1fa676(0xf0))var _0x2796fc=users[_0x1fa676(0xf0)];else{if(_0x56014d[0x0]['language']==_0x1fa676(0xd5))var _0x2796fc=users[_0x1fa676(0xe4)];}}}}}}}_0x4ad9dd[_0x1fa676(0xba)](_0x1fa676(0xcd),{'success':_0x3422b2[_0x1fa676(0xcc)](_0x1fa676(0xf5)),'errors':_0x3422b2[_0x1fa676(0xcc)]('errors'),'master_shop':_0x56014d,'profile':_0x2c6358,'role':_0x55cd68,'language':_0x2796fc,'data':_0x4bd39c});}catch(_0x3bb381){_0x4ad9dd[_0x1fa676(0xce)](_0x3bb381);}}),router['get'](a0_0x36aadb(0xbc),auth,async(_0x130ba7,_0x517dce)=>{var _0x54029b=a0_0x36aadb;try{const _0x220fe2=_0x130ba7['params']['id'];var _0xcfa6fc=await sales_finished['findById'](_0x220fe2);const _0x347257=await master_shop[_0x54029b(0xc9)](),_0x67ae0=_0x130ba7[_0x54029b(0xea)],_0x5bdb7b=await profile['findOne']({'email':_0x67ae0[_0x54029b(0xb9)]});if(_0x347257[0x0][_0x54029b(0xf6)]==_0x54029b(0xe1))var _0x3532d5=users[_0x54029b(0xd1)];else{if(_0x347257[0x0][_0x54029b(0xf6)]==_0x54029b(0xc7))var _0x3532d5=users[_0x54029b(0xc7)];else{if(_0x347257[0x0][_0x54029b(0xf6)]==_0x54029b(0xbf))var _0x3532d5=users[_0x54029b(0xbf)];else{if(_0x347257[0x0][_0x54029b(0xf6)]=='Spanish')var _0x3532d5=users[_0x54029b(0xf4)];else{if(_0x347257[0x0][_0x54029b(0xf6)]=='French')var _0x3532d5=users[_0x54029b(0xc1)];else{if(_0x347257[0x0]['language']==_0x54029b(0xd6))var _0x3532d5=users['Portuguese'];else{if(_0x347257[0x0]['language']==_0x54029b(0xf0))var _0x3532d5=users['Chinese'];else{if(_0x347257[0x0][_0x54029b(0xf6)]==_0x54029b(0xd5))var _0x3532d5=users['Arabic'];}}}}}}}_0x517dce[_0x54029b(0xba)](_0x54029b(0xb8),{'success':_0x130ba7[_0x54029b(0xcc)](_0x54029b(0xf5)),'errors':_0x130ba7[_0x54029b(0xcc)](_0x54029b(0xde)),'master_shop':_0x347257,'profile':_0x5bdb7b,'role':_0x67ae0,'language':_0x3532d5,'data':_0xcfa6fc});}catch(_0x3b4542){_0x517dce[_0x54029b(0xce)](_0x3b4542);}}),router[a0_0x36aadb(0xc2)](a0_0x36aadb(0xeb),auth,async(_0x2ca0d2,_0x200cdc)=>{var _0x2c61dc=a0_0x36aadb;try{const _0x128859=_0x2ca0d2[_0x2c61dc(0xcb)]['id'];var _0x44e6eb=await transfers_finished['findById'](_0x128859);const _0x10fd9d=await master_shop['find'](),_0x50fb64=_0x2ca0d2[_0x2c61dc(0xea)],_0x2f8110=await profile['findOne']({'email':_0x50fb64['email']});if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xe1))var _0xfc9765=users[_0x2c61dc(0xd1)];else{if(_0x10fd9d[0x0]['language']==_0x2c61dc(0xc7))var _0xfc9765=users[_0x2c61dc(0xc7)];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xbf))var _0xfc9765=users['German'];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xf4))var _0xfc9765=users[_0x2c61dc(0xf4)];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xc1))var _0xfc9765=users[_0x2c61dc(0xc1)];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xd6))var _0xfc9765=users[_0x2c61dc(0xf2)];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]=='Chinese')var _0xfc9765=users[_0x2c61dc(0xf0)];else{if(_0x10fd9d[0x0][_0x2c61dc(0xf6)]==_0x2c61dc(0xd5))var _0xfc9765=users[_0x2c61dc(0xe4)];}}}}}}}_0x200cdc['render'](_0x2c61dc(0xca),{'success':_0x2ca0d2[_0x2c61dc(0xcc)]('success'),'errors':_0x2ca0d2['flash'](_0x2c61dc(0xde)),'master_shop':_0x10fd9d,'profile':_0x2f8110,'role':_0x50fb64,'language':_0xfc9765,'data':_0x44e6eb});}catch(_0x5105fc){_0x200cdc[_0x2c61dc(0xce)](_0x5105fc);}}),router[a0_0x36aadb(0xc2)](a0_0x36aadb(0xed),auth,async(_0x479d11,_0x5459fe)=>{var _0x478808=a0_0x36aadb;try{const {username:_0x4e0af0,email:_0xc22287,role:_0x354cb0}=_0x479d11[_0x478808(0xea)],_0xb8b7a9=_0x479d11[_0x478808(0xea)],_0x344ca6=await profile[_0x478808(0xe3)]({'email':_0xb8b7a9['email']}),_0x16bd20=await master_shop[_0x478808(0xc9)](),_0x127269=await warehouse[_0x478808(0xf1)]([{'$match':{'status':_0x478808(0xd7),'warehouse_category':_0x478808(0xb5)}},{'$group':{'_id':_0x478808(0xd2),'name':{'$first':_0x478808(0xd2)}}}]);if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xe1))var _0x53c7d4=users['English'];else{if(_0x16bd20[0x0]['language']==_0x478808(0xc7))var _0x53c7d4=users[_0x478808(0xc7)];else{if(_0x16bd20[0x0]['language']==_0x478808(0xbf))var _0x53c7d4=users[_0x478808(0xbf)];else{if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xf4))var _0x53c7d4=users['Spanish'];else{if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xc1))var _0x53c7d4=users[_0x478808(0xc1)];else{if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xd6))var _0x53c7d4=users[_0x478808(0xf2)];else{if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xf0))var _0x53c7d4=users[_0x478808(0xf0)];else{if(_0x16bd20[0x0][_0x478808(0xf6)]==_0x478808(0xd5))var _0x53c7d4=users[_0x478808(0xe4)];}}}}}}}_0x5459fe[_0x478808(0xba)]('transaction_finished_raw',{'success':_0x479d11[_0x478808(0xcc)](_0x478808(0xf5)),'errors':_0x479d11['flash'](_0x478808(0xde)),'role':_0xb8b7a9,'profile':_0x344ca6,'master_shop':_0x16bd20,'dataProcess':_0x127269,'language':_0x53c7d4});}catch(_0x18d17e){console[_0x478808(0xdd)](_0x18d17e);}}),module[a0_0x36aadb(0xe6)]=router;