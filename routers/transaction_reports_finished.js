var a0_0x1dabf6=a0_0x510a;function a0_0x425e(){var _0x16fc7e=['find','length','json','success','exports','$invoice','view_table','aggregate','996023pWzEHE','findOne','/view','9YxvYXG','../middleware/auth','French','params','$warehouse_name','log','1334426HsQspm','Chinese','Arabic','7180230VnQGXO','Portuguese\x20(BR)','render','German','33uHxRSP','English\x20(US)','$sale_product','Enabled','12595856OUVBpM','587382VhrKOn','Router','$name','English','298580DUYbPe','findById','/viewdata_og_fg/:id','Hindi','user','view_tf_table','flash','body','Portuguese','email','Arabic\x20(ae)','language','view_og_table','Spanish','/viewdata_tf_fg/:id','nodemailer','errors','$product','transaction_finished','get','$date','39281952tTCvFZ'];a0_0x425e=function(){return _0x16fc7e;};return a0_0x425e();}function a0_0x510a(_0x5df1d0,_0x3ae101){var _0x425e45=a0_0x425e();return a0_0x510a=function(_0x510af6,_0x50dc49){_0x510af6=_0x510af6-0xc7;var _0x2e4d96=_0x425e45[_0x510af6];return _0x2e4d96;},a0_0x510a(_0x5df1d0,_0x3ae101);}(function(_0x1e154f,_0x1dfbe7){var _0x48e94e=a0_0x510a,_0x243e4d=_0x1e154f();while(!![]){try{var _0x207bbc=parseInt(_0x48e94e(0xcd))/0x1+parseInt(_0x48e94e(0xd6))/0x2+-parseInt(_0x48e94e(0xdd))/0x3*(-parseInt(_0x48e94e(0xe6))/0x4)+parseInt(_0x48e94e(0xd9))/0x5+parseInt(_0x48e94e(0xe2))/0x6+parseInt(_0x48e94e(0xe1))/0x7+parseInt(_0x48e94e(0xfb))/0x8*(-parseInt(_0x48e94e(0xd0))/0x9);if(_0x207bbc===_0x1dfbe7)break;else _0x243e4d['push'](_0x243e4d['shift']());}catch(_0x39cc1f){_0x243e4d['push'](_0x243e4d['shift']());}}}(a0_0x425e,0xdd8ae));const express=require('express'),app=express(),router=express[a0_0x1dabf6(0xe3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require('../models/all_models'),auth=require(a0_0x1dabf6(0xd1)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x1dabf6(0xf5));router[a0_0x1dabf6(0xf9)](a0_0x1dabf6(0xcf),auth,async(_0x4b6cce,_0x1ac8f4)=>{var _0x12704c=a0_0x1dabf6;try{const {username:_0x1d36ca,email:_0x16420f,role:_0x1899cf}=_0x4b6cce['user'],_0x492449=_0x4b6cce[_0x12704c(0xea)],_0x4bd164=await profile['findOne']({'email':_0x492449[_0x12704c(0xef)]}),_0xd444cf=await master_shop['find'](),_0x1ba40d=await warehouse[_0x12704c(0xcc)]([{'$match':{'status':_0x12704c(0xe0),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x12704c(0xe4),'name':{'$first':_0x12704c(0xe4)}}}]);if(_0xd444cf[0x0]['language']==_0x12704c(0xde))var _0x6e36f6=users[_0x12704c(0xe5)];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]==_0x12704c(0xe9))var _0x6e36f6=users[_0x12704c(0xe9)];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]==_0x12704c(0xdc))var _0x6e36f6=users['German'];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]=='Spanish')var _0x6e36f6=users[_0x12704c(0xf3)];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]=='French')var _0x6e36f6=users[_0x12704c(0xd2)];else{if(_0xd444cf[0x0]['language']==_0x12704c(0xda))var _0x6e36f6=users[_0x12704c(0xee)];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]==_0x12704c(0xd7))var _0x6e36f6=users[_0x12704c(0xd7)];else{if(_0xd444cf[0x0][_0x12704c(0xf1)]==_0x12704c(0xf0))var _0x6e36f6=users[_0x12704c(0xd8)];}}}}}}}_0x1ac8f4['render'](_0x12704c(0xf8),{'success':_0x4b6cce[_0x12704c(0xec)](_0x12704c(0xc8)),'errors':_0x4b6cce[_0x12704c(0xec)](_0x12704c(0xf6)),'role':_0x492449,'profile':_0x4bd164,'master_shop':_0xd444cf,'dataProcess':_0x1ba40d,'language':_0x6e36f6});}catch(_0x45d2ca){console[_0x12704c(0xd5)](_0x45d2ca);}}),router['post']('/reports',auth,async(_0x3af53c,_0x5da1c3)=>{var _0x14f3cb=a0_0x1dabf6;const {product_category:_0x59ee5a,transaction_category:_0x5cebba,transaction_date_from:_0x324da7,transaction_date_to:_0x26146e,warehouse_category:_0x23a134,item_code:_0x285892}=_0x3af53c[_0x14f3cb(0xed)];var _0x577d11;if(_0x59ee5a=='rm'){}else{if(_0x59ee5a=='fg')switch(_0x5cebba){case'IC':_0x285892[_0x14f3cb(0xfd)]>0x0?_0x577d11=await purchases_finished[_0x14f3cb(0xcc)]([{'$match':{'warehouse_name':_0x23a134,'date':{'$gte':_0x324da7,'$lte':_0x26146e}}},{'$unwind':_0x14f3cb(0xf7)},{'$match':{'$or':[{'product.product_code':_0x285892}]}},{'$group':{'_id':'$invoice','date':{'$first':_0x14f3cb(0xfa)},'warehouse_name':{'$first':_0x14f3cb(0xd4)},'products':{'$push':_0x14f3cb(0xf7)}}}]):_0x577d11=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x23a134,'date':{'$gte':_0x324da7,'$lte':_0x26146e}}},{'$unwind':_0x14f3cb(0xf7)},{'$group':{'_id':_0x14f3cb(0xca),'date':{'$first':'$date'},'warehouse_name':{'$first':_0x14f3cb(0xd4)},'products':{'$push':_0x14f3cb(0xf7)}}}]);break;case'OG':_0x285892[_0x14f3cb(0xfd)]>0x0?_0x577d11=await sales_finished[_0x14f3cb(0xcc)]([{'$match':{'warehouse_name':_0x23a134,'date':{'$gte':_0x324da7,'$lte':_0x26146e}}},{'$unwind':'$sale_product'},{'$match':{'$or':[{'sale_product.product_code':_0x285892}]}},{'$group':{'_id':_0x14f3cb(0xca),'date':{'$first':_0x14f3cb(0xfa)},'warehouse_name':{'$first':'$warehouse_name'},'products':{'$push':_0x14f3cb(0xdf)}}}]):_0x577d11=await sales_finished[_0x14f3cb(0xcc)]([{'$match':{'warehouse_name':_0x23a134,'date':{'$gte':_0x324da7,'$lte':_0x26146e}}},{'$unwind':_0x14f3cb(0xdf)},{'$group':{'_id':_0x14f3cb(0xca),'date':{'$first':_0x14f3cb(0xfa)},'warehouse_name':{'$first':_0x14f3cb(0xd4)},'products':{'$push':_0x14f3cb(0xdf)}}}]);break;case'AJ':break;case'TF':_0x577d11=await transfers_finished[_0x14f3cb(0xfc)]({'warehouse':_0x23a134,'date':{'$gte':_0x324da7,'$lte':_0x26146e}});break;}}_0x5da1c3[_0x14f3cb(0xc7)]({'data':_0x577d11});}),router[a0_0x1dabf6(0xf9)]('/viewdata_inc_fg/:id',auth,async(_0x1c7bef,_0x34f692)=>{var _0x20afec=a0_0x1dabf6;try{const _0x28bc4b=_0x1c7bef[_0x20afec(0xd3)]['id'];var _0x311fae=await purchases_finished[_0x20afec(0xe7)](_0x28bc4b);const _0x54a0d7=await master_shop[_0x20afec(0xfc)](),_0xd09e95=_0x1c7bef['user'],_0x213444=await profile[_0x20afec(0xce)]({'email':_0xd09e95[_0x20afec(0xef)]});if(_0x54a0d7[0x0][_0x20afec(0xf1)]==_0x20afec(0xde))var _0x4acea6=users['English'];else{if(_0x54a0d7[0x0]['language']==_0x20afec(0xe9))var _0x4acea6=users[_0x20afec(0xe9)];else{if(_0x54a0d7[0x0][_0x20afec(0xf1)]==_0x20afec(0xdc))var _0x4acea6=users[_0x20afec(0xdc)];else{if(_0x54a0d7[0x0]['language']==_0x20afec(0xf3))var _0x4acea6=users[_0x20afec(0xf3)];else{if(_0x54a0d7[0x0]['language']==_0x20afec(0xd2))var _0x4acea6=users['French'];else{if(_0x54a0d7[0x0][_0x20afec(0xf1)]==_0x20afec(0xda))var _0x4acea6=users[_0x20afec(0xee)];else{if(_0x54a0d7[0x0]['language']==_0x20afec(0xd7))var _0x4acea6=users[_0x20afec(0xd7)];else{if(_0x54a0d7[0x0][_0x20afec(0xf1)]==_0x20afec(0xf0))var _0x4acea6=users['Arabic'];}}}}}}}_0x34f692['render'](_0x20afec(0xcb),{'success':_0x1c7bef[_0x20afec(0xec)](_0x20afec(0xc8)),'errors':_0x1c7bef[_0x20afec(0xec)](_0x20afec(0xf6)),'master_shop':_0x54a0d7,'profile':_0x213444,'role':_0xd09e95,'language':_0x4acea6,'data':_0x311fae});}catch(_0x37c052){_0x34f692['json'](_0x37c052);}}),router['get'](a0_0x1dabf6(0xe8),auth,async(_0x25de85,_0x4175f8)=>{var _0xad0ed4=a0_0x1dabf6;try{const _0x173e6f=_0x25de85[_0xad0ed4(0xd3)]['id'];var _0x4ff497=await sales_finished[_0xad0ed4(0xe7)](_0x173e6f);const _0x33a3d6=await master_shop[_0xad0ed4(0xfc)](),_0xbccde4=_0x25de85[_0xad0ed4(0xea)],_0x39dd45=await profile['findOne']({'email':_0xbccde4[_0xad0ed4(0xef)]});if(_0x33a3d6[0x0]['language']==_0xad0ed4(0xde))var _0x4d7761=users[_0xad0ed4(0xe5)];else{if(_0x33a3d6[0x0][_0xad0ed4(0xf1)]==_0xad0ed4(0xe9))var _0x4d7761=users['Hindi'];else{if(_0x33a3d6[0x0]['language']=='German')var _0x4d7761=users[_0xad0ed4(0xdc)];else{if(_0x33a3d6[0x0]['language']=='Spanish')var _0x4d7761=users[_0xad0ed4(0xf3)];else{if(_0x33a3d6[0x0][_0xad0ed4(0xf1)]==_0xad0ed4(0xd2))var _0x4d7761=users['French'];else{if(_0x33a3d6[0x0]['language']==_0xad0ed4(0xda))var _0x4d7761=users[_0xad0ed4(0xee)];else{if(_0x33a3d6[0x0]['language']=='Chinese')var _0x4d7761=users['Chinese'];else{if(_0x33a3d6[0x0]['language']==_0xad0ed4(0xf0))var _0x4d7761=users[_0xad0ed4(0xd8)];}}}}}}}_0x4175f8[_0xad0ed4(0xdb)](_0xad0ed4(0xf2),{'success':_0x25de85[_0xad0ed4(0xec)]('success'),'errors':_0x25de85[_0xad0ed4(0xec)](_0xad0ed4(0xf6)),'master_shop':_0x33a3d6,'profile':_0x39dd45,'role':_0xbccde4,'language':_0x4d7761,'data':_0x4ff497});}catch(_0x1be5b3){_0x4175f8['json'](_0x1be5b3);}}),router[a0_0x1dabf6(0xf9)](a0_0x1dabf6(0xf4),auth,async(_0x2d9e26,_0x341a14)=>{var _0x4bd37c=a0_0x1dabf6;try{const _0x39f741=_0x2d9e26['params']['id'];var _0x2a015a=await transfers_finished[_0x4bd37c(0xe7)](_0x39f741);const _0x48e22c=await master_shop[_0x4bd37c(0xfc)](),_0x28fd1b=_0x2d9e26['user'],_0x1e9cbe=await profile['findOne']({'email':_0x28fd1b[_0x4bd37c(0xef)]});if(_0x48e22c[0x0][_0x4bd37c(0xf1)]==_0x4bd37c(0xde))var _0x5a6ee4=users[_0x4bd37c(0xe5)];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]==_0x4bd37c(0xe9))var _0x5a6ee4=users['Hindi'];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]==_0x4bd37c(0xdc))var _0x5a6ee4=users[_0x4bd37c(0xdc)];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]=='Spanish')var _0x5a6ee4=users[_0x4bd37c(0xf3)];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]==_0x4bd37c(0xd2))var _0x5a6ee4=users[_0x4bd37c(0xd2)];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]==_0x4bd37c(0xda))var _0x5a6ee4=users[_0x4bd37c(0xee)];else{if(_0x48e22c[0x0][_0x4bd37c(0xf1)]=='Chinese')var _0x5a6ee4=users[_0x4bd37c(0xd7)];else{if(_0x48e22c[0x0]['language']==_0x4bd37c(0xf0))var _0x5a6ee4=users['Arabic'];}}}}}}}_0x341a14[_0x4bd37c(0xdb)](_0x4bd37c(0xeb),{'success':_0x2d9e26[_0x4bd37c(0xec)](_0x4bd37c(0xc8)),'errors':_0x2d9e26[_0x4bd37c(0xec)]('errors'),'master_shop':_0x48e22c,'profile':_0x1e9cbe,'role':_0x28fd1b,'language':_0x5a6ee4,'data':_0x2a015a});}catch(_0x1b503a){_0x341a14[_0x4bd37c(0xc7)](_0x1b503a);}}),module[a0_0x1dabf6(0xc9)]=router;