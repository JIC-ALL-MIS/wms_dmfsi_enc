var a0_0x2da029=a0_0x4996;(function(_0x41b6ca,_0x330fe8){var _0x4d0a83=a0_0x4996,_0x2090ed=_0x41b6ca();while(!![]){try{var _0xf59270=-parseInt(_0x4d0a83(0x14f))/0x1*(-parseInt(_0x4d0a83(0x13b))/0x2)+-parseInt(_0x4d0a83(0x14a))/0x3*(-parseInt(_0x4d0a83(0x141))/0x4)+-parseInt(_0x4d0a83(0x16d))/0x5+-parseInt(_0x4d0a83(0x13a))/0x6*(-parseInt(_0x4d0a83(0x136))/0x7)+parseInt(_0x4d0a83(0x143))/0x8*(-parseInt(_0x4d0a83(0x159))/0x9)+-parseInt(_0x4d0a83(0x138))/0xa+parseInt(_0x4d0a83(0x15f))/0xb*(-parseInt(_0x4d0a83(0x168))/0xc);if(_0xf59270===_0x330fe8)break;else _0x2090ed['push'](_0x2090ed['shift']());}catch(_0x3a64e6){_0x2090ed['push'](_0x2090ed['shift']());}}}(a0_0x3ff5,0xa57f0));function a0_0x3ff5(){var _0x387006=['1073245yfmNXQ','aggregate','$sale_product','German','$warehouse_name','169001pFdYDW','email','930530JbLkQC','findById','222MITArs','2nmQLQC','exports','length','Chinese','transaction_finished','nodemailer','224zusoEc','French','932152RQXChU','Portuguese\x20(BR)','../public/language/languages.json','errors','express','Spanish','render','3093hlWeiY','view_tf_table','params','$date','find','387322IMfJDS','language','get','view_og_table','body','log','English\x20(US)','view_table','/viewdata_og_fg/:id','Portuguese','27BEOaUe','$name','/viewdata_tf_fg/:id','/viewdata_inc_fg/:id','flash','Arabic','11yleCNY','English','$product','success','findOne','post','Enabled','$invoice','/view','38616HWVxiy','user','Hindi','json','Arabic\x20(ae)'];a0_0x3ff5=function(){return _0x387006;};return a0_0x3ff5();}const express=require(a0_0x2da029(0x147)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x2da029(0x145)),nodemailer=require(a0_0x2da029(0x140));function a0_0x4996(_0x46b482,_0x50cc91){var _0x3ff533=a0_0x3ff5();return a0_0x4996=function(_0x49969a,_0x3f4fa1){_0x49969a=_0x49969a-0x133;var _0x28e1ee=_0x3ff533[_0x49969a];return _0x28e1ee;},a0_0x4996(_0x46b482,_0x50cc91);}router[a0_0x2da029(0x151)](a0_0x2da029(0x167),auth,async(_0x309ad8,_0x375397)=>{var _0x132f0c=a0_0x2da029;try{const {username:_0x261051,email:_0x266ad4,role:_0x4d45d5}=_0x309ad8[_0x132f0c(0x169)],_0x1c99d8=_0x309ad8[_0x132f0c(0x169)],_0x2625a2=await profile['findOne']({'email':_0x1c99d8['email']}),_0x1c0800=await master_shop['find'](),_0x592aee=await warehouse[_0x132f0c(0x16e)]([{'$match':{'status':_0x132f0c(0x165),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x132f0c(0x15a),'name':{'$first':_0x132f0c(0x15a)}}}]);if(_0x1c0800[0x0]['language']==_0x132f0c(0x155))var _0x5e9006=users[_0x132f0c(0x160)];else{if(_0x1c0800[0x0]['language']==_0x132f0c(0x16a))var _0x5e9006=users[_0x132f0c(0x16a)];else{if(_0x1c0800[0x0][_0x132f0c(0x150)]==_0x132f0c(0x134))var _0x5e9006=users[_0x132f0c(0x134)];else{if(_0x1c0800[0x0][_0x132f0c(0x150)]==_0x132f0c(0x148))var _0x5e9006=users[_0x132f0c(0x148)];else{if(_0x1c0800[0x0][_0x132f0c(0x150)]==_0x132f0c(0x142))var _0x5e9006=users[_0x132f0c(0x142)];else{if(_0x1c0800[0x0][_0x132f0c(0x150)]==_0x132f0c(0x144))var _0x5e9006=users[_0x132f0c(0x158)];else{if(_0x1c0800[0x0]['language']=='Chinese')var _0x5e9006=users[_0x132f0c(0x13e)];else{if(_0x1c0800[0x0][_0x132f0c(0x150)]==_0x132f0c(0x16c))var _0x5e9006=users[_0x132f0c(0x15e)];}}}}}}}_0x375397[_0x132f0c(0x149)](_0x132f0c(0x13f),{'success':_0x309ad8[_0x132f0c(0x15d)]('success'),'errors':_0x309ad8[_0x132f0c(0x15d)](_0x132f0c(0x146)),'role':_0x1c99d8,'profile':_0x2625a2,'master_shop':_0x1c0800,'dataProcess':_0x592aee,'language':_0x5e9006});}catch(_0x36fda8){console[_0x132f0c(0x154)](_0x36fda8);}}),router[a0_0x2da029(0x164)]('/reports',auth,async(_0x2f494c,_0xadf483)=>{var _0x3d4fde=a0_0x2da029;const {product_category:_0x213472,transaction_category:_0x43021c,transaction_date_from:_0x29341c,transaction_date_to:_0x38de6b,warehouse_category:_0x274fb9,item_code:_0x219f50}=_0x2f494c[_0x3d4fde(0x153)];var _0x274c98;if(_0x213472=='rm'){}else{if(_0x213472=='fg')switch(_0x43021c){case'IC':_0x219f50[_0x3d4fde(0x13d)]>0x0?_0x274c98=await purchases_finished[_0x3d4fde(0x16e)]([{'$match':{'warehouse_name':_0x274fb9,'date':{'$gte':_0x29341c,'$lte':_0x38de6b}}},{'$unwind':_0x3d4fde(0x161)},{'$match':{'$or':[{'product.product_code':_0x219f50}]}},{'$group':{'_id':_0x3d4fde(0x166),'date':{'$first':_0x3d4fde(0x14d)},'warehouse_name':{'$first':_0x3d4fde(0x135)},'products':{'$push':_0x3d4fde(0x161)}}}]):_0x274c98=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x274fb9,'date':{'$gte':_0x29341c,'$lte':_0x38de6b}}},{'$unwind':_0x3d4fde(0x161)},{'$group':{'_id':_0x3d4fde(0x166),'date':{'$first':_0x3d4fde(0x14d)},'warehouse_name':{'$first':_0x3d4fde(0x135)},'products':{'$push':_0x3d4fde(0x161)}}}]);break;case'OG':_0x219f50[_0x3d4fde(0x13d)]>0x0?_0x274c98=await sales_finished[_0x3d4fde(0x16e)]([{'$match':{'warehouse_name':_0x274fb9,'date':{'$gte':_0x29341c,'$lte':_0x38de6b}}},{'$unwind':'$sale_product'},{'$match':{'$or':[{'sale_product.product_code':_0x219f50}]}},{'$group':{'_id':_0x3d4fde(0x166),'date':{'$first':_0x3d4fde(0x14d)},'warehouse_name':{'$first':_0x3d4fde(0x135)},'products':{'$push':_0x3d4fde(0x133)}}}]):_0x274c98=await sales_finished['aggregate']([{'$match':{'warehouse_name':_0x274fb9,'date':{'$gte':_0x29341c,'$lte':_0x38de6b}}},{'$unwind':_0x3d4fde(0x133)},{'$group':{'_id':'$invoice','date':{'$first':_0x3d4fde(0x14d)},'warehouse_name':{'$first':_0x3d4fde(0x135)},'products':{'$push':'$sale_product'}}}]);break;case'AJ':break;case'TF':_0x274c98=await transfers_finished[_0x3d4fde(0x14e)]({'warehouse':_0x274fb9,'date':{'$gte':_0x29341c,'$lte':_0x38de6b}});break;}}_0xadf483['json']({'data':_0x274c98});}),router['get'](a0_0x2da029(0x15c),auth,async(_0x43bb53,_0x347fb1)=>{var _0x1c08bf=a0_0x2da029;try{const _0x4ffdb8=_0x43bb53[_0x1c08bf(0x14c)]['id'];var _0x4ea64c=await purchases_finished['findById'](_0x4ffdb8);const _0x449a71=await master_shop[_0x1c08bf(0x14e)](),_0x3b1874=_0x43bb53[_0x1c08bf(0x169)],_0x3f9e7c=await profile[_0x1c08bf(0x163)]({'email':_0x3b1874[_0x1c08bf(0x137)]});if(_0x449a71[0x0][_0x1c08bf(0x150)]=='English\x20(US)')var _0x15ed49=users[_0x1c08bf(0x160)];else{if(_0x449a71[0x0][_0x1c08bf(0x150)]=='Hindi')var _0x15ed49=users[_0x1c08bf(0x16a)];else{if(_0x449a71[0x0]['language']=='German')var _0x15ed49=users[_0x1c08bf(0x134)];else{if(_0x449a71[0x0][_0x1c08bf(0x150)]==_0x1c08bf(0x148))var _0x15ed49=users[_0x1c08bf(0x148)];else{if(_0x449a71[0x0][_0x1c08bf(0x150)]==_0x1c08bf(0x142))var _0x15ed49=users[_0x1c08bf(0x142)];else{if(_0x449a71[0x0][_0x1c08bf(0x150)]==_0x1c08bf(0x144))var _0x15ed49=users[_0x1c08bf(0x158)];else{if(_0x449a71[0x0]['language']==_0x1c08bf(0x13e))var _0x15ed49=users[_0x1c08bf(0x13e)];else{if(_0x449a71[0x0]['language']==_0x1c08bf(0x16c))var _0x15ed49=users[_0x1c08bf(0x15e)];}}}}}}}_0x347fb1[_0x1c08bf(0x149)](_0x1c08bf(0x156),{'success':_0x43bb53[_0x1c08bf(0x15d)](_0x1c08bf(0x162)),'errors':_0x43bb53[_0x1c08bf(0x15d)](_0x1c08bf(0x146)),'master_shop':_0x449a71,'profile':_0x3f9e7c,'role':_0x3b1874,'language':_0x15ed49,'data':_0x4ea64c});}catch(_0x554da1){_0x347fb1['json'](_0x554da1);}}),router['get'](a0_0x2da029(0x157),auth,async(_0x5c1850,_0x5583b0)=>{var _0x53f069=a0_0x2da029;try{const _0x487743=_0x5c1850[_0x53f069(0x14c)]['id'];var _0x315f25=await sales_finished[_0x53f069(0x139)](_0x487743);const _0x1d0b6b=await master_shop[_0x53f069(0x14e)](),_0xee72ae=_0x5c1850[_0x53f069(0x169)],_0xc106da=await profile['findOne']({'email':_0xee72ae[_0x53f069(0x137)]});if(_0x1d0b6b[0x0][_0x53f069(0x150)]=='English\x20(US)')var _0x953ce1=users[_0x53f069(0x160)];else{if(_0x1d0b6b[0x0][_0x53f069(0x150)]=='Hindi')var _0x953ce1=users[_0x53f069(0x16a)];else{if(_0x1d0b6b[0x0][_0x53f069(0x150)]==_0x53f069(0x134))var _0x953ce1=users[_0x53f069(0x134)];else{if(_0x1d0b6b[0x0]['language']==_0x53f069(0x148))var _0x953ce1=users[_0x53f069(0x148)];else{if(_0x1d0b6b[0x0][_0x53f069(0x150)]==_0x53f069(0x142))var _0x953ce1=users[_0x53f069(0x142)];else{if(_0x1d0b6b[0x0]['language']==_0x53f069(0x144))var _0x953ce1=users[_0x53f069(0x158)];else{if(_0x1d0b6b[0x0][_0x53f069(0x150)]==_0x53f069(0x13e))var _0x953ce1=users[_0x53f069(0x13e)];else{if(_0x1d0b6b[0x0][_0x53f069(0x150)]==_0x53f069(0x16c))var _0x953ce1=users['Arabic'];}}}}}}}_0x5583b0['render'](_0x53f069(0x152),{'success':_0x5c1850[_0x53f069(0x15d)](_0x53f069(0x162)),'errors':_0x5c1850[_0x53f069(0x15d)](_0x53f069(0x146)),'master_shop':_0x1d0b6b,'profile':_0xc106da,'role':_0xee72ae,'language':_0x953ce1,'data':_0x315f25});}catch(_0x1d6fda){_0x5583b0[_0x53f069(0x16b)](_0x1d6fda);}}),router[a0_0x2da029(0x151)](a0_0x2da029(0x15b),auth,async(_0x476b91,_0x24faab)=>{var _0x5afad1=a0_0x2da029;try{const _0x3b4fba=_0x476b91[_0x5afad1(0x14c)]['id'];var _0x15ea84=await transfers_finished[_0x5afad1(0x139)](_0x3b4fba);const _0x13abbf=await master_shop[_0x5afad1(0x14e)](),_0x40104c=_0x476b91[_0x5afad1(0x169)],_0x1dc227=await profile[_0x5afad1(0x163)]({'email':_0x40104c['email']});if(_0x13abbf[0x0][_0x5afad1(0x150)]==_0x5afad1(0x155))var _0x28e436=users[_0x5afad1(0x160)];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]==_0x5afad1(0x16a))var _0x28e436=users['Hindi'];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]==_0x5afad1(0x134))var _0x28e436=users[_0x5afad1(0x134)];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]=='Spanish')var _0x28e436=users[_0x5afad1(0x148)];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]=='French')var _0x28e436=users['French'];else{if(_0x13abbf[0x0]['language']==_0x5afad1(0x144))var _0x28e436=users['Portuguese'];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]==_0x5afad1(0x13e))var _0x28e436=users[_0x5afad1(0x13e)];else{if(_0x13abbf[0x0][_0x5afad1(0x150)]==_0x5afad1(0x16c))var _0x28e436=users[_0x5afad1(0x15e)];}}}}}}}_0x24faab[_0x5afad1(0x149)](_0x5afad1(0x14b),{'success':_0x476b91[_0x5afad1(0x15d)](_0x5afad1(0x162)),'errors':_0x476b91[_0x5afad1(0x15d)](_0x5afad1(0x146)),'master_shop':_0x13abbf,'profile':_0x1dc227,'role':_0x40104c,'language':_0x28e436,'data':_0x15ea84});}catch(_0x493a7f){_0x24faab[_0x5afad1(0x16b)](_0x493a7f);}}),module[a0_0x2da029(0x13c)]=router;