var a0_0x3c6c6b=a0_0x5586;(function(_0xa77d89,_0x407ebe){var _0x5c6353=a0_0x5586,_0x19175f=_0xa77d89();while(!![]){try{var _0x4c700c=parseInt(_0x5c6353(0x1ab))/0x1*(-parseInt(_0x5c6353(0x1b0))/0x2)+-parseInt(_0x5c6353(0x1bd))/0x3+-parseInt(_0x5c6353(0x1d4))/0x4+parseInt(_0x5c6353(0x1ce))/0x5+parseInt(_0x5c6353(0x1ad))/0x6*(-parseInt(_0x5c6353(0x1b4))/0x7)+parseInt(_0x5c6353(0x1f2))/0x8+parseInt(_0x5c6353(0x1d1))/0x9;if(_0x4c700c===_0x407ebe)break;else _0x19175f['push'](_0x19175f['shift']());}catch(_0x82eaa8){_0x19175f['push'](_0x19175f['shift']());}}}(a0_0x5e2d,0x79ca6));const express=require(a0_0x3c6c6b(0x20a)),app=express(),router=express[a0_0x3c6c6b(0x1e3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x3c6c6b(0x1cd)),auth=require(a0_0x3c6c6b(0x203)),users=require(a0_0x3c6c6b(0x1a7)),nodemailer=require(a0_0x3c6c6b(0x1f0));function a0_0x5e2d(){var _0x1ed7fc=['nodemailer','$product_details.product_code','1595912UcgjZn','$product.id_transaction_from','Portuguese\x20(BR)','$product.to_quantity','data_transfer','English\x20(US)','$product._id','post','$sale_product.room_name','find','body','map','_id','$product.room_names','Arabic','data_adjustment','$date','../middleware/auth','$product_details.expiry_date','Raw\x20Materials','$warehouse_name','$sale_product.production_date','get','German','express','render','language','success','Chinese','English','log','Arabic\x20(ae)','aggregate','../public/language/languages.json','flash','warehouses','transaction_finished_raw','2iAopde','$product.production_date','234kKLbGf','$sale_product.quantity','view_tf_table','806234oPvWpe','$sale_product.id_transaction_from','$product_details','warehouse_data','51303pzlOBO','errors','Hindi','$product_details.product_name','$product.product_code','$product.new_adjust_qty','view_og_table','$product.expiry_date','$sale_product.invoice','2851632iAdjYC','Spanish','json','Enabled','params','all','$sale_product.product_name','data_sales','$product.id_transaction','findById','invoice','/reports','$product.to_room_name','$product.unit','$sale_product._id','Portuguese','../models/all_models','856290zxAssj','user','exports','20431800jCAaNr','findOne','/viewFG','397936cibrkb','$$invoice','$product.product_name','$product_details._id','$product.invoice','$product_details.product_stock','$invoice','$product','$to_warehouse','$sale_product.expiry_date','$room','$sale_product.product_code','French','$name','push','Router','$sale_product','$sale_product.unit','$product_details.invoice','$product.id_transaction_id','/viewdata_inc_fg/:id','/view','$product_details.unit','$product_details.production_date','/viewdata_tf_fg/:id','length','valueOf','email'];a0_0x5e2d=function(){return _0x1ed7fc;};return a0_0x5e2d();}function a0_0x5586(_0x1ad72e,_0x91016b){var _0x5e2d61=a0_0x5e2d();return a0_0x5586=function(_0x558672,_0x19c86f){_0x558672=_0x558672-0x1a3;var _0x5dfd49=_0x5e2d61[_0x558672];return _0x5dfd49;},a0_0x5586(_0x1ad72e,_0x91016b);}router[a0_0x3c6c6b(0x208)](a0_0x3c6c6b(0x1e9),auth,async(_0x251575,_0x13ff5f)=>{var _0x2a4e7a=a0_0x3c6c6b;try{const {username:_0x58c557,email:_0x3da477,role:_0x1292fe}=_0x251575[_0x2a4e7a(0x1cf)],_0x2f1d20=_0x251575[_0x2a4e7a(0x1cf)],_0x880974=await profile[_0x2a4e7a(0x1d2)]({'email':_0x2f1d20[_0x2a4e7a(0x1ef)]}),_0x16a4be=await master_shop[_0x2a4e7a(0x1fb)](),_0xa5391b=await warehouse['aggregate']([{'$match':{'status':_0x2a4e7a(0x1c0),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x2a4e7a(0x1e1),'name':{'$first':_0x2a4e7a(0x1e1)}}}]);if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x1f7))var _0x1efa02=users[_0x2a4e7a(0x1a3)];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x1b6))var _0x1efa02=users['Hindi'];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x209))var _0x1efa02=users['German'];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x1be))var _0x1efa02=users[_0x2a4e7a(0x1be)];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x1e0))var _0x1efa02=users[_0x2a4e7a(0x1e0)];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]==_0x2a4e7a(0x1f4))var _0x1efa02=users[_0x2a4e7a(0x1cc)];else{if(_0x16a4be[0x0][_0x2a4e7a(0x20c)]=='Chinese')var _0x1efa02=users['Chinese'];else{if(_0x16a4be[0x0]['language']=='Arabic\x20(ae)')var _0x1efa02=users['Arabic'];}}}}}}}_0x13ff5f[_0x2a4e7a(0x20b)]('transaction_finished',{'success':_0x251575[_0x2a4e7a(0x1a8)](_0x2a4e7a(0x20d)),'errors':_0x251575[_0x2a4e7a(0x1a8)]('errors'),'role':_0x2f1d20,'profile':_0x880974,'master_shop':_0x16a4be,'dataProcess':_0xa5391b,'language':_0x1efa02});}catch(_0x339c68){console[_0x2a4e7a(0x1a4)](_0x339c68);}}),router[a0_0x3c6c6b(0x1f9)](a0_0x3c6c6b(0x1c8),auth,async(_0x1d43da,_0x29f65a)=>{var _0x5a140d=a0_0x3c6c6b;const {product_category:_0x70dfd7,transaction_category:_0x939fdc,transaction_date_from:_0x10dd55,transaction_date_to:_0x34c078,warehouse_category:_0x52d6a7,item_code:_0xa2bebf}=_0x1d43da[_0x5a140d(0x1fc)];console[_0x5a140d(0x1a4)](_0x52d6a7);if(_0x70dfd7=='rm'){if(_0x52d6a7==_0x5a140d(0x1c2)){var _0x175b02=await purchases[_0x5a140d(0x1a6)]([{'$match':{'date':{'$gte':_0x10dd55,'$lte':_0x34c078}}},{'$lookup':{'from':_0x5a140d(0x1a9),'let':{'invoice':_0x5a140d(0x1da)},'pipeline':[{'$unwind':_0x5a140d(0x1b2)},{'$match':{'$expr':{'$eq':['$$invoice',_0x5a140d(0x1e6)]}}},{'$project':{'_id':_0x5a140d(0x1d7),'product_name':_0x5a140d(0x1b7),'product_code':_0x5a140d(0x1f1),'quantity_available':_0x5a140d(0x1d9),'warehouse_name':_0x5a140d(0x1e1),'warehouse_room':_0x5a140d(0x1de),'invoice':'$product_details.invoice','production_date':_0x5a140d(0x1eb),'expiry_date':_0x5a140d(0x204),'UOM':'$product_details.unit'}}],'as':_0x5a140d(0x1b3)}}]);_0x175b02[_0x5a140d(0x1c4)]={},await Promise['all'](_0x175b02[_0x5a140d(0x1fd)](async _0x945348=>{var _0xe81c56=_0x5a140d;_0x175b02['data_sales'][_0x945348['invoice']]=[],await Promise['all'](_0x945348[_0xe81c56(0x1b3)][_0xe81c56(0x1fd)](async _0x3d4a40=>{var _0xf053b1=_0xe81c56;const _0x1d85ab=await sales[_0xf053b1(0x1a6)]([{'$unwind':_0xf053b1(0x1e4)},{'$match':{'sale_product.id_transaction_from':_0x3d4a40[_0xf053b1(0x1fe)][_0xf053b1(0x1ee)](),'sale_product.invoice':_0x3d4a40[_0xf053b1(0x1c7)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':_0xf053b1(0x1df),'quantity_available':_0xf053b1(0x1ae),'warehouse_name':_0xf053b1(0x206),'warehouse_room':_0xf053b1(0x1fa),'product_invoice':_0xf053b1(0x1bc),'invoice':_0xf053b1(0x1da),'id_transaction_from':_0xf053b1(0x1b1),'date':_0xf053b1(0x202),'production_date':_0xf053b1(0x207),'expiry_date':_0xf053b1(0x1dd),'UOM':'$sale_product.unit'}}]);_0x1d85ab[_0xf053b1(0x1ed)]>0x0&&_0x175b02[_0xf053b1(0x1c4)][_0x945348[_0xf053b1(0x1c7)]][_0xf053b1(0x1e2)](..._0x1d85ab);}));})),_0x175b02[_0x5a140d(0x1c4)]=_0x175b02['data_sales'],_0x175b02[_0x5a140d(0x201)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02['map'](async _0x402993=>{var _0x173ea4=_0x5a140d;_0x175b02[_0x173ea4(0x201)][_0x402993[_0x173ea4(0x1c7)]]=[],await Promise[_0x173ea4(0x1c2)](_0x402993['warehouse_data'][_0x173ea4(0x1fd)](async _0x395b38=>{var _0x4fc13b=_0x173ea4;const _0x55b5c6=await adjustment[_0x4fc13b(0x1a6)]([{'$unwind':_0x4fc13b(0x1db)},{'$match':{'product.id_transaction_from':_0x395b38[_0x4fc13b(0x1fe)][_0x4fc13b(0x1ee)](),'product.invoice':_0x395b38[_0x4fc13b(0x1c7)]}},{'$project':{'_id':_0x4fc13b(0x1f8),'product_name':_0x4fc13b(0x1d6),'product_code':_0x4fc13b(0x1b8),'quantity_available':_0x4fc13b(0x1b9),'warehouse_name':_0x4fc13b(0x206),'warehouse_room':_0x4fc13b(0x1ff),'product_invoice':'$product.invoice','invoice':_0x4fc13b(0x1da),'id_transaction_from':'$product.id_transaction_from','date':_0x4fc13b(0x202),'production_date':_0x4fc13b(0x1ac),'expiry_date':_0x4fc13b(0x1bb),'UOM':_0x4fc13b(0x1ca)}}]);_0x55b5c6[_0x4fc13b(0x1ed)]>0x0&&_0x175b02[_0x4fc13b(0x201)][_0x402993[_0x4fc13b(0x1c7)]][_0x4fc13b(0x1e2)](..._0x55b5c6);}));})),_0x175b02[_0x5a140d(0x1f6)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x30189c=>{var _0x2b69bc=_0x5a140d;_0x175b02[_0x2b69bc(0x1f6)][_0x30189c[_0x2b69bc(0x1c7)]]=[],await Promise['all'](_0x30189c[_0x2b69bc(0x1b3)][_0x2b69bc(0x1fd)](async _0x2485c9=>{var _0x56cdda=_0x2b69bc;const _0x1b297f=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x2485c9['_id']['valueOf'](),'product.To_invoice':_0x2485c9[_0x56cdda(0x1c7)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x56cdda(0x1b8),'quantity_available':_0x56cdda(0x1f5),'warehouse_name':_0x56cdda(0x1dc),'warehouse_room':_0x56cdda(0x1ff),'product_invoice':_0x56cdda(0x1c9),'invoice':_0x56cdda(0x1da),'id_transaction_from':_0x56cdda(0x1e7),'date':_0x56cdda(0x202),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x56cdda(0x1ca)}}]);_0x1b297f[_0x56cdda(0x1ed)]>0x0&&_0x175b02[_0x56cdda(0x1f6)][_0x30189c[_0x56cdda(0x1c7)]]['push'](..._0x1b297f);}));})),_0x29f65a[_0x5a140d(0x1bf)]({'purchases_warehouse':_0x175b02,'data_sales':_0x175b02[_0x5a140d(0x1c4)],'data_adjustment':_0x175b02['data_adjustment'],'data_transfer':_0x175b02[_0x5a140d(0x1f6)]});}else{var _0x175b02=await purchases[_0x5a140d(0x1a6)]([{'$match':{'warehouse_name':_0x52d6a7,'date':{'$gte':_0x10dd55,'$lte':_0x34c078}}},{'$lookup':{'from':_0x5a140d(0x1a9),'let':{'invoice':_0x5a140d(0x1da)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice',_0x5a140d(0x1e6)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x5a140d(0x1b7),'product_code':'$product_details.product_code','quantity_available':_0x5a140d(0x1d9),'warehouse_name':_0x5a140d(0x1e1),'warehouse_room':_0x5a140d(0x1de),'invoice':_0x5a140d(0x1e6),'production_date':_0x5a140d(0x1eb),'expiry_date':_0x5a140d(0x204),'UOM':_0x5a140d(0x1ea)}}],'as':_0x5a140d(0x1b3)}}]);_0x175b02[_0x5a140d(0x1c4)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02['map'](async _0xd7c2c8=>{var _0x2a92ba=_0x5a140d;_0x175b02[_0x2a92ba(0x1c4)][_0xd7c2c8[_0x2a92ba(0x1c7)]]=[],await Promise[_0x2a92ba(0x1c2)](_0xd7c2c8['warehouse_data']['map'](async _0x35c783=>{var _0x2161f0=_0x2a92ba;const _0x188fce=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x35c783['_id'][_0x2161f0(0x1ee)](),'sale_product.invoice':_0x35c783[_0x2161f0(0x1c7)]}},{'$project':{'_id':_0x2161f0(0x1cb),'product_name':_0x2161f0(0x1c3),'product_code':_0x2161f0(0x1df),'quantity_available':_0x2161f0(0x1ae),'warehouse_name':'$warehouse_name','warehouse_room':_0x2161f0(0x1fa),'product_invoice':_0x2161f0(0x1bc),'invoice':_0x2161f0(0x1da),'id_transaction_from':_0x2161f0(0x1b1),'date':_0x2161f0(0x202),'production_date':_0x2161f0(0x207),'expiry_date':'$sale_product.expiry_date','UOM':_0x2161f0(0x1e5)}}]);_0x188fce[_0x2161f0(0x1ed)]>0x0&&_0x175b02[_0x2161f0(0x1c4)][_0xd7c2c8[_0x2161f0(0x1c7)]][_0x2161f0(0x1e2)](..._0x188fce);}));})),_0x175b02[_0x5a140d(0x1c4)]=_0x175b02[_0x5a140d(0x1c4)],_0x175b02[_0x5a140d(0x201)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02['map'](async _0x56e4d5=>{var _0x3f6d8a=_0x5a140d;_0x175b02[_0x3f6d8a(0x201)][_0x56e4d5[_0x3f6d8a(0x1c7)]]=[],await Promise[_0x3f6d8a(0x1c2)](_0x56e4d5[_0x3f6d8a(0x1b3)][_0x3f6d8a(0x1fd)](async _0x3d7468=>{var _0xa33d7b=_0x3f6d8a;const _0x43db18=await adjustment[_0xa33d7b(0x1a6)]([{'$unwind':_0xa33d7b(0x1db)},{'$match':{'product.id_transaction_from':_0x3d7468['_id'][_0xa33d7b(0x1ee)](),'product.invoice':_0x3d7468[_0xa33d7b(0x1c7)]}},{'$project':{'_id':_0xa33d7b(0x1f8),'product_name':_0xa33d7b(0x1d6),'product_code':_0xa33d7b(0x1b8),'quantity_available':_0xa33d7b(0x1b9),'warehouse_name':_0xa33d7b(0x206),'warehouse_room':_0xa33d7b(0x1ff),'product_invoice':'$product.invoice','invoice':_0xa33d7b(0x1da),'id_transaction_from':_0xa33d7b(0x1f3),'date':_0xa33d7b(0x202),'production_date':_0xa33d7b(0x1ac),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x43db18[_0xa33d7b(0x1ed)]>0x0&&_0x175b02[_0xa33d7b(0x201)][_0x56e4d5[_0xa33d7b(0x1c7)]][_0xa33d7b(0x1e2)](..._0x43db18);}));})),_0x175b02[_0x5a140d(0x1f6)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x43da6d=>{var _0x3416c3=_0x5a140d;_0x175b02[_0x3416c3(0x1f6)][_0x43da6d['invoice']]=[],await Promise['all'](_0x43da6d[_0x3416c3(0x1b3)][_0x3416c3(0x1fd)](async _0xcb92db=>{var _0x1b5882=_0x3416c3;const _0x3fe5df=await transfers[_0x1b5882(0x1a6)]([{'$unwind':_0x1b5882(0x1db)},{'$match':{'product.id_transaction_id':_0xcb92db[_0x1b5882(0x1fe)][_0x1b5882(0x1ee)](),'product.To_invoice':_0xcb92db[_0x1b5882(0x1c7)]}},{'$project':{'_id':_0x1b5882(0x1f8),'product_name':'$product.product_name','product_code':_0x1b5882(0x1b8),'quantity_available':_0x1b5882(0x1f5),'warehouse_name':_0x1b5882(0x1dc),'warehouse_room':_0x1b5882(0x1ff),'product_invoice':_0x1b5882(0x1c9),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_id','date':'$date','production_date':_0x1b5882(0x1ac),'expiry_date':'$product.expiry_date','UOM':_0x1b5882(0x1ca)}}]);_0x3fe5df[_0x1b5882(0x1ed)]>0x0&&_0x175b02[_0x1b5882(0x1f6)][_0x43da6d['invoice']][_0x1b5882(0x1e2)](..._0x3fe5df);}));})),_0x29f65a[_0x5a140d(0x1bf)]({'purchases_warehouse':_0x175b02,'data_sales':_0x175b02[_0x5a140d(0x1c4)],'data_adjustment':_0x175b02[_0x5a140d(0x201)],'data_transfer':_0x175b02[_0x5a140d(0x1f6)]});}}else{if(_0x52d6a7==_0x5a140d(0x1c2)){var _0x175b02=await purchases_finished['aggregate']([{'$match':{'date':{'$gte':_0x10dd55,'$lte':_0x34c078}}},{'$lookup':{'from':_0x5a140d(0x1a9),'let':{'invoice':_0x5a140d(0x1da)},'pipeline':[{'$unwind':_0x5a140d(0x1b2)},{'$match':{'$expr':{'$eq':[_0x5a140d(0x1d5),_0x5a140d(0x1e6)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x5a140d(0x1b7),'product_code':_0x5a140d(0x1f1),'quantity_available':_0x5a140d(0x1d9),'warehouse_name':'$name','warehouse_room':_0x5a140d(0x1de),'invoice':_0x5a140d(0x1e6),'production_date':_0x5a140d(0x1eb),'expiry_date':_0x5a140d(0x204),'UOM':'$product_details.unit'}}],'as':_0x5a140d(0x1b3)}}]);_0x175b02[_0x5a140d(0x1c4)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x3ca047=>{var _0x600dd5=_0x5a140d;_0x175b02[_0x600dd5(0x1c4)][_0x3ca047[_0x600dd5(0x1c7)]]=[],await Promise[_0x600dd5(0x1c2)](_0x3ca047[_0x600dd5(0x1b3)][_0x600dd5(0x1fd)](async _0x233b49=>{var _0x5207d3=_0x600dd5;const _0x50a755=await sales_finished[_0x5207d3(0x1a6)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x233b49['_id'][_0x5207d3(0x1ee)](),'sale_product.invoice':_0x233b49[_0x5207d3(0x1c7)]}},{'$project':{'_id':_0x5207d3(0x1cb),'product_name':'$sale_product.product_name','product_code':_0x5207d3(0x1df),'quantity_available':_0x5207d3(0x1ae),'warehouse_name':_0x5207d3(0x206),'warehouse_room':'$sale_product.room_name','product_invoice':_0x5207d3(0x1bc),'invoice':_0x5207d3(0x1da),'id_transaction_from':'$sale_product.id_transaction_from','date':'$date','production_date':_0x5207d3(0x207),'expiry_date':'$sale_product.expiry_date','UOM':_0x5207d3(0x1e5)}}]);_0x50a755[_0x5207d3(0x1ed)]>0x0&&_0x175b02[_0x5207d3(0x1c4)][_0x3ca047[_0x5207d3(0x1c7)]][_0x5207d3(0x1e2)](..._0x50a755);}));})),_0x175b02[_0x5a140d(0x1c4)]=_0x175b02[_0x5a140d(0x1c4)],_0x175b02[_0x5a140d(0x201)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x58b151=>{var _0x1f60d8=_0x5a140d;_0x175b02[_0x1f60d8(0x201)][_0x58b151[_0x1f60d8(0x1c7)]]=[],await Promise['all'](_0x58b151[_0x1f60d8(0x1b3)][_0x1f60d8(0x1fd)](async _0x38ad26=>{var _0x250fff=_0x1f60d8;const _0xe48177=await adjustment_finished[_0x250fff(0x1a6)]([{'$unwind':_0x250fff(0x1db)},{'$match':{'product.id_transaction_from':_0x38ad26['_id']['valueOf'](),'product.invoice':_0x38ad26[_0x250fff(0x1c7)]}},{'$project':{'_id':_0x250fff(0x1f8),'product_name':_0x250fff(0x1d6),'product_code':_0x250fff(0x1b8),'quantity_available':_0x250fff(0x1b9),'warehouse_name':_0x250fff(0x206),'warehouse_room':_0x250fff(0x1ff),'product_invoice':_0x250fff(0x1d8),'invoice':'$invoice','id_transaction_from':_0x250fff(0x1f3),'date':_0x250fff(0x202),'production_date':'$product.production_date','expiry_date':_0x250fff(0x1bb),'UOM':'$product.unit'}}]);_0xe48177[_0x250fff(0x1ed)]>0x0&&_0x175b02['data_adjustment'][_0x58b151[_0x250fff(0x1c7)]][_0x250fff(0x1e2)](..._0xe48177);}));})),_0x175b02[_0x5a140d(0x1f6)]={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x369a7a=>{var _0x2ad1d3=_0x5a140d;_0x175b02[_0x2ad1d3(0x1f6)][_0x369a7a['invoice']]=[],await Promise[_0x2ad1d3(0x1c2)](_0x369a7a[_0x2ad1d3(0x1b3)][_0x2ad1d3(0x1fd)](async _0x1ee183=>{var _0x35d94f=_0x2ad1d3;const _0x5793b1=await transfers_finished[_0x35d94f(0x1a6)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x1ee183['_id']['valueOf'](),'product.from_invoice':_0x1ee183[_0x35d94f(0x1c7)]}},{'$project':{'_id':_0x35d94f(0x1f8),'product_name':_0x35d94f(0x1d6),'product_code':_0x35d94f(0x1b8),'quantity_available':_0x35d94f(0x1f5),'warehouse_name':'$to_warehouse','warehouse_room':_0x35d94f(0x1ff),'product_invoice':_0x35d94f(0x1c9),'invoice':'$invoice','id_transaction_from':'$product.id_transaction','date':'$date','production_date':_0x35d94f(0x1ac),'expiry_date':_0x35d94f(0x1bb),'UOM':_0x35d94f(0x1ca)}}]);_0x5793b1[_0x35d94f(0x1ed)]>0x0&&_0x175b02[_0x35d94f(0x1f6)][_0x369a7a[_0x35d94f(0x1c7)]][_0x35d94f(0x1e2)](..._0x5793b1);}));})),_0x29f65a[_0x5a140d(0x1bf)]({'purchases_warehouse':_0x175b02,'data_sales':_0x175b02[_0x5a140d(0x1c4)],'data_adjustment':_0x175b02[_0x5a140d(0x201)],'data_transfer':_0x175b02[_0x5a140d(0x1f6)]});}else{var _0x175b02=await purchases_finished[_0x5a140d(0x1a6)]([{'$match':{'warehouse_name':_0x52d6a7,'date':{'$gte':_0x10dd55,'$lte':_0x34c078}}},{'$lookup':{'from':_0x5a140d(0x1a9),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x5a140d(0x1d5),'$product_details.invoice']}}},{'$project':{'_id':_0x5a140d(0x1d7),'product_name':'$product_details.product_name','product_code':_0x5a140d(0x1f1),'quantity_available':_0x5a140d(0x1d9),'warehouse_name':_0x5a140d(0x1e1),'warehouse_room':_0x5a140d(0x1de),'invoice':_0x5a140d(0x1e6),'production_date':_0x5a140d(0x1eb),'expiry_date':_0x5a140d(0x204),'UOM':_0x5a140d(0x1ea)}}],'as':_0x5a140d(0x1b3)}}]);_0x175b02[_0x5a140d(0x1c4)]={},await Promise['all'](_0x175b02[_0x5a140d(0x1fd)](async _0x4e1414=>{var _0x3bac1a=_0x5a140d;_0x175b02[_0x3bac1a(0x1c4)][_0x4e1414['invoice']]=[],await Promise['all'](_0x4e1414[_0x3bac1a(0x1b3)][_0x3bac1a(0x1fd)](async _0x4c1766=>{var _0x10e80c=_0x3bac1a;const _0x6f7d9b=await sales_finished[_0x10e80c(0x1a6)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x4c1766[_0x10e80c(0x1fe)][_0x10e80c(0x1ee)](),'sale_product.invoice':_0x4c1766[_0x10e80c(0x1c7)]}},{'$project':{'_id':_0x10e80c(0x1cb),'product_name':_0x10e80c(0x1c3),'product_code':_0x10e80c(0x1df),'quantity_available':'$sale_product.quantity','warehouse_name':_0x10e80c(0x206),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x10e80c(0x1da),'id_transaction_from':_0x10e80c(0x1b1),'date':_0x10e80c(0x202),'production_date':_0x10e80c(0x207),'expiry_date':'$sale_product.expiry_date','UOM':'$sale_product.unit'}}]);_0x6f7d9b[_0x10e80c(0x1ed)]>0x0&&_0x175b02['data_sales'][_0x4e1414[_0x10e80c(0x1c7)]][_0x10e80c(0x1e2)](..._0x6f7d9b);}));})),_0x175b02[_0x5a140d(0x1c4)]=_0x175b02['data_sales'],_0x175b02['data_adjustment']={},await Promise[_0x5a140d(0x1c2)](_0x175b02[_0x5a140d(0x1fd)](async _0x499453=>{var _0xc8f261=_0x5a140d;_0x175b02[_0xc8f261(0x201)][_0x499453[_0xc8f261(0x1c7)]]=[],await Promise['all'](_0x499453[_0xc8f261(0x1b3)]['map'](async _0x359717=>{var _0x219940=_0xc8f261;const _0x43698c=await adjustment_finished['aggregate']([{'$unwind':_0x219940(0x1db)},{'$match':{'product.id_transaction_from':_0x359717[_0x219940(0x1fe)][_0x219940(0x1ee)](),'product.invoice':_0x359717[_0x219940(0x1c7)]}},{'$project':{'_id':_0x219940(0x1f8),'product_name':'$product.product_name','product_code':_0x219940(0x1b8),'quantity_available':_0x219940(0x1b9),'warehouse_name':_0x219940(0x206),'warehouse_room':_0x219940(0x1ff),'product_invoice':'$product.invoice','invoice':_0x219940(0x1da),'id_transaction_from':_0x219940(0x1f3),'date':_0x219940(0x202),'production_date':_0x219940(0x1ac),'expiry_date':'$product.expiry_date','UOM':_0x219940(0x1ca)}}]);_0x43698c[_0x219940(0x1ed)]>0x0&&_0x175b02[_0x219940(0x201)][_0x499453[_0x219940(0x1c7)]][_0x219940(0x1e2)](..._0x43698c);}));})),_0x175b02[_0x5a140d(0x1f6)]={},await Promise['all'](_0x175b02[_0x5a140d(0x1fd)](async _0x258c47=>{var _0x457a70=_0x5a140d;_0x175b02[_0x457a70(0x1f6)][_0x258c47[_0x457a70(0x1c7)]]=[],await Promise[_0x457a70(0x1c2)](_0x258c47[_0x457a70(0x1b3)]['map'](async _0x56cfce=>{var _0x2ba573=_0x457a70;const _0x5d2e9d=await transfers_finished[_0x2ba573(0x1a6)]([{'$unwind':_0x2ba573(0x1db)},{'$match':{'product.id_transaction':_0x56cfce[_0x2ba573(0x1fe)]['valueOf'](),'product.from_invoice':_0x56cfce[_0x2ba573(0x1c7)]}},{'$project':{'_id':_0x2ba573(0x1f8),'product_name':_0x2ba573(0x1d6),'product_code':_0x2ba573(0x1b8),'quantity_available':_0x2ba573(0x1f5),'warehouse_name':_0x2ba573(0x1dc),'warehouse_room':_0x2ba573(0x1ff),'product_invoice':_0x2ba573(0x1c9),'invoice':_0x2ba573(0x1da),'id_transaction_from':_0x2ba573(0x1c5),'date':_0x2ba573(0x202),'production_date':_0x2ba573(0x1ac),'expiry_date':_0x2ba573(0x1bb),'UOM':_0x2ba573(0x1ca)}}]);_0x5d2e9d[_0x2ba573(0x1ed)]>0x0&&_0x175b02[_0x2ba573(0x1f6)][_0x258c47['invoice']][_0x2ba573(0x1e2)](..._0x5d2e9d);}));})),_0x29f65a['json']({'purchases_warehouse':_0x175b02,'data_sales':_0x175b02['data_sales'],'data_adjustment':_0x175b02[_0x5a140d(0x201)],'data_transfer':_0x175b02[_0x5a140d(0x1f6)]});}}}),router[a0_0x3c6c6b(0x208)](a0_0x3c6c6b(0x1e8),auth,async(_0x317b0e,_0x235b45)=>{var _0x5e439c=a0_0x3c6c6b;try{const _0x2fce24=_0x317b0e['params']['id'];var _0x2bbaec=await purchases_finished['findById'](_0x2fce24);const _0x310263=await master_shop[_0x5e439c(0x1fb)](),_0xdb5afa=_0x317b0e['user'],_0x41a734=await profile['findOne']({'email':_0xdb5afa[_0x5e439c(0x1ef)]});if(_0x310263[0x0]['language']==_0x5e439c(0x1f7))var _0x17c210=users[_0x5e439c(0x1a3)];else{if(_0x310263[0x0][_0x5e439c(0x20c)]==_0x5e439c(0x1b6))var _0x17c210=users['Hindi'];else{if(_0x310263[0x0][_0x5e439c(0x20c)]==_0x5e439c(0x209))var _0x17c210=users['German'];else{if(_0x310263[0x0][_0x5e439c(0x20c)]==_0x5e439c(0x1be))var _0x17c210=users[_0x5e439c(0x1be)];else{if(_0x310263[0x0][_0x5e439c(0x20c)]==_0x5e439c(0x1e0))var _0x17c210=users['French'];else{if(_0x310263[0x0]['language']=='Portuguese\x20(BR)')var _0x17c210=users['Portuguese'];else{if(_0x310263[0x0]['language']=='Chinese')var _0x17c210=users['Chinese'];else{if(_0x310263[0x0][_0x5e439c(0x20c)]=='Arabic\x20(ae)')var _0x17c210=users[_0x5e439c(0x200)];}}}}}}}_0x235b45[_0x5e439c(0x20b)]('view_table',{'success':_0x317b0e[_0x5e439c(0x1a8)]('success'),'errors':_0x317b0e[_0x5e439c(0x1a8)](_0x5e439c(0x1b5)),'master_shop':_0x310263,'profile':_0x41a734,'role':_0xdb5afa,'language':_0x17c210,'data':_0x2bbaec});}catch(_0x62cb60){_0x235b45[_0x5e439c(0x1bf)](_0x62cb60);}}),router[a0_0x3c6c6b(0x208)]('/viewdata_og_fg/:id',auth,async(_0x3f6ff8,_0x1fbc23)=>{var _0x15e2fd=a0_0x3c6c6b;try{const _0x30a03c=_0x3f6ff8[_0x15e2fd(0x1c1)]['id'];var _0x473224=await sales_finished[_0x15e2fd(0x1c6)](_0x30a03c);const _0x481676=await master_shop[_0x15e2fd(0x1fb)](),_0x56b7d0=_0x3f6ff8[_0x15e2fd(0x1cf)],_0x2fdfe2=await profile[_0x15e2fd(0x1d2)]({'email':_0x56b7d0[_0x15e2fd(0x1ef)]});if(_0x481676[0x0][_0x15e2fd(0x20c)]==_0x15e2fd(0x1f7))var _0x56cf39=users[_0x15e2fd(0x1a3)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]==_0x15e2fd(0x1b6))var _0x56cf39=users[_0x15e2fd(0x1b6)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]==_0x15e2fd(0x209))var _0x56cf39=users[_0x15e2fd(0x209)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]=='Spanish')var _0x56cf39=users[_0x15e2fd(0x1be)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]=='French')var _0x56cf39=users[_0x15e2fd(0x1e0)];else{if(_0x481676[0x0]['language']==_0x15e2fd(0x1f4))var _0x56cf39=users[_0x15e2fd(0x1cc)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]==_0x15e2fd(0x20e))var _0x56cf39=users[_0x15e2fd(0x20e)];else{if(_0x481676[0x0][_0x15e2fd(0x20c)]==_0x15e2fd(0x1a5))var _0x56cf39=users[_0x15e2fd(0x200)];}}}}}}}_0x1fbc23['render'](_0x15e2fd(0x1ba),{'success':_0x3f6ff8[_0x15e2fd(0x1a8)](_0x15e2fd(0x20d)),'errors':_0x3f6ff8['flash'](_0x15e2fd(0x1b5)),'master_shop':_0x481676,'profile':_0x2fdfe2,'role':_0x56b7d0,'language':_0x56cf39,'data':_0x473224});}catch(_0x4ac68e){_0x1fbc23[_0x15e2fd(0x1bf)](_0x4ac68e);}}),router[a0_0x3c6c6b(0x208)](a0_0x3c6c6b(0x1ec),auth,async(_0x38470d,_0x49068c)=>{var _0x48ce4a=a0_0x3c6c6b;try{const _0x2451f4=_0x38470d[_0x48ce4a(0x1c1)]['id'];var _0x2aaae6=await transfers_finished[_0x48ce4a(0x1c6)](_0x2451f4);const _0x494da8=await master_shop[_0x48ce4a(0x1fb)](),_0x58bc1b=_0x38470d['user'],_0x248738=await profile[_0x48ce4a(0x1d2)]({'email':_0x58bc1b[_0x48ce4a(0x1ef)]});if(_0x494da8[0x0][_0x48ce4a(0x20c)]==_0x48ce4a(0x1f7))var _0x1bea13=users['English'];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]=='Hindi')var _0x1bea13=users['Hindi'];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]==_0x48ce4a(0x209))var _0x1bea13=users[_0x48ce4a(0x209)];else{if(_0x494da8[0x0]['language']==_0x48ce4a(0x1be))var _0x1bea13=users[_0x48ce4a(0x1be)];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]==_0x48ce4a(0x1e0))var _0x1bea13=users['French'];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]==_0x48ce4a(0x1f4))var _0x1bea13=users[_0x48ce4a(0x1cc)];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]=='Chinese')var _0x1bea13=users[_0x48ce4a(0x20e)];else{if(_0x494da8[0x0][_0x48ce4a(0x20c)]==_0x48ce4a(0x1a5))var _0x1bea13=users[_0x48ce4a(0x200)];}}}}}}}_0x49068c[_0x48ce4a(0x20b)](_0x48ce4a(0x1af),{'success':_0x38470d['flash'](_0x48ce4a(0x20d)),'errors':_0x38470d[_0x48ce4a(0x1a8)]('errors'),'master_shop':_0x494da8,'profile':_0x248738,'role':_0x58bc1b,'language':_0x1bea13,'data':_0x2aaae6});}catch(_0xb14fb6){_0x49068c[_0x48ce4a(0x1bf)](_0xb14fb6);}}),router[a0_0x3c6c6b(0x208)](a0_0x3c6c6b(0x1d3),auth,async(_0x2bb208,_0xf84367)=>{var _0x5e2901=a0_0x3c6c6b;try{const {username:_0x13bf0c,email:_0x48bd08,role:_0x441a89}=_0x2bb208[_0x5e2901(0x1cf)],_0x17f7e1=_0x2bb208[_0x5e2901(0x1cf)],_0x1f39a2=await profile[_0x5e2901(0x1d2)]({'email':_0x17f7e1['email']}),_0x1d1e83=await master_shop[_0x5e2901(0x1fb)](),_0x348b0b=await warehouse[_0x5e2901(0x1a6)]([{'$match':{'status':_0x5e2901(0x1c0),'warehouse_category':_0x5e2901(0x205)}},{'$group':{'_id':_0x5e2901(0x1e1),'name':{'$first':_0x5e2901(0x1e1)}}}]);if(_0x1d1e83[0x0][_0x5e2901(0x20c)]=='English\x20(US)')var _0x899263=users[_0x5e2901(0x1a3)];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]=='Hindi')var _0x899263=users[_0x5e2901(0x1b6)];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]=='German')var _0x899263=users[_0x5e2901(0x209)];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]==_0x5e2901(0x1be))var _0x899263=users[_0x5e2901(0x1be)];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]==_0x5e2901(0x1e0))var _0x899263=users['French'];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]==_0x5e2901(0x1f4))var _0x899263=users['Portuguese'];else{if(_0x1d1e83[0x0][_0x5e2901(0x20c)]==_0x5e2901(0x20e))var _0x899263=users[_0x5e2901(0x20e)];else{if(_0x1d1e83[0x0]['language']=='Arabic\x20(ae)')var _0x899263=users['Arabic'];}}}}}}}_0xf84367[_0x5e2901(0x20b)](_0x5e2901(0x1aa),{'success':_0x2bb208[_0x5e2901(0x1a8)](_0x5e2901(0x20d)),'errors':_0x2bb208[_0x5e2901(0x1a8)]('errors'),'role':_0x17f7e1,'profile':_0x1f39a2,'master_shop':_0x1d1e83,'dataProcess':_0x348b0b,'language':_0x899263});}catch(_0x20302d){console['log'](_0x20302d);}}),module[a0_0x3c6c6b(0x1d0)]=router;