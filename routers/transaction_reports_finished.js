var a0_0x2386e7=a0_0x2ce0;(function(_0x2ef94e,_0xfd573a){var _0x5bfb52=a0_0x2ce0,_0x4cc401=_0x2ef94e();while(!![]){try{var _0x1ecf89=-parseInt(_0x5bfb52(0x1c4))/0x1*(parseInt(_0x5bfb52(0x18d))/0x2)+parseInt(_0x5bfb52(0x1b4))/0x3+parseInt(_0x5bfb52(0x1d0))/0x4+-parseInt(_0x5bfb52(0x17c))/0x5+parseInt(_0x5bfb52(0x196))/0x6+-parseInt(_0x5bfb52(0x1de))/0x7+parseInt(_0x5bfb52(0x1cf))/0x8*(parseInt(_0x5bfb52(0x1c8))/0x9);if(_0x1ecf89===_0xfd573a)break;else _0x4cc401['push'](_0x4cc401['shift']());}catch(_0x1d7185){_0x4cc401['push'](_0x4cc401['shift']());}}}(a0_0xd9a7,0xa4b64));function a0_0x2ce0(_0x2dfbd8,_0xf20079){var _0xd9a7a1=a0_0xd9a7();return a0_0x2ce0=function(_0x2ce011,_0x3ebf52){_0x2ce011=_0x2ce011-0x17c;var _0x5771ec=_0xd9a7a1[_0x2ce011];return _0x5771ec;},a0_0x2ce0(_0x2dfbd8,_0xf20079);}function a0_0xd9a7(){var _0x35b600=['Arabic','Enabled','data_transfer','$product_details.invoice','Finished\x20Goods','Chinese','$sale_product.invoice','1CgYaMt','$sale_product.product_name','English','push','2066733tNPBPO','/view','$product.product_code','$sale_product.quantity','$product.invoice','$sale_product.production_date','$product.new_adjust_qty','40eucPGO','3690508zASkvD','_id','$product.expiry_date','data_sales','json','$invoice','$name','$product_details.product_name','nodemailer','warehouses','$warehouse_name','$product_details.product_code','Hindi','$sale_product.unit','5187140ZNEdis','Router','errors','$product._id','find','view_tf_table','$sale_product.id_transaction_from','$product_details.unit','../public/language/languages.json','$product_details.production_date','3212630xTcgVd','render','success','transaction_finished','$sale_product.product_code','../middleware/auth','$date','log','express','$product','post','$room','/reports','Raw\x20Materials','params','body','length','1441738rEXHuq','invoice','aggregate','exports','$sale_product.expiry_date','$to_warehouse','$product.product_name','/viewFG','user','3915504BJuPKG','$product.id_transaction_from','Portuguese','$product_details','$product.to_quantity','warehouse_data','findOne','Arabic\x20(ae)','$product_details.expiry_date','language','$product.production_date','$$invoice','$product.to_room_name','data_adjustment','map','$product.id_transaction_id','French','$product.room_names','flash','get','$sale_product._id','$product_details.product_stock','email','Portuguese\x20(BR)','valueOf','/viewdata_inc_fg/:id','findById','$product.unit','English\x20(US)','all','167037xqCUZq','$product.id_transaction','$sale_product','../models/all_models','German','Spanish','$sale_product.room_name','$product_details._id','/viewdata_tf_fg/:id'];a0_0xd9a7=function(){return _0x35b600;};return a0_0xd9a7();}const express=require(a0_0x2386e7(0x184)),app=express(),router=express[a0_0x2386e7(0x1df)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x2386e7(0x1b7)),auth=require(a0_0x2386e7(0x181)),users=require(a0_0x2386e7(0x1e6)),nodemailer=require(a0_0x2386e7(0x1d8));router[a0_0x2386e7(0x1a9)](a0_0x2386e7(0x1c9),auth,async(_0x3338b9,_0x3620ea)=>{var _0xddaae=a0_0x2386e7;try{const {username:_0x5c6a5e,email:_0x4ea196,role:_0x5cff63}=_0x3338b9[_0xddaae(0x195)],_0x24ee2a=_0x3338b9[_0xddaae(0x195)],_0x471f28=await profile[_0xddaae(0x19c)]({'email':_0x24ee2a['email']}),_0xac1387=await master_shop[_0xddaae(0x1e2)](),_0x401978=await warehouse[_0xddaae(0x18f)]([{'$match':{'status':_0xddaae(0x1be),'warehouse_category':_0xddaae(0x1c1)}},{'$group':{'_id':_0xddaae(0x1d6),'name':{'$first':'$name'}}}]);if(_0xac1387[0x0][_0xddaae(0x19f)]==_0xddaae(0x1b2))var _0x952002=users[_0xddaae(0x1c6)];else{if(_0xac1387[0x0]['language']==_0xddaae(0x1dc))var _0x952002=users[_0xddaae(0x1dc)];else{if(_0xac1387[0x0]['language']==_0xddaae(0x1b8))var _0x952002=users['German'];else{if(_0xac1387[0x0][_0xddaae(0x19f)]=='Spanish')var _0x952002=users[_0xddaae(0x1b9)];else{if(_0xac1387[0x0][_0xddaae(0x19f)]==_0xddaae(0x1a6))var _0x952002=users[_0xddaae(0x1a6)];else{if(_0xac1387[0x0][_0xddaae(0x19f)]==_0xddaae(0x1ad))var _0x952002=users[_0xddaae(0x198)];else{if(_0xac1387[0x0]['language']==_0xddaae(0x1c2))var _0x952002=users['Chinese'];else{if(_0xac1387[0x0][_0xddaae(0x19f)]==_0xddaae(0x19d))var _0x952002=users[_0xddaae(0x1bd)];}}}}}}}_0x3620ea[_0xddaae(0x17d)](_0xddaae(0x17f),{'success':_0x3338b9[_0xddaae(0x1a8)](_0xddaae(0x17e)),'errors':_0x3338b9[_0xddaae(0x1a8)](_0xddaae(0x1e0)),'role':_0x24ee2a,'profile':_0x471f28,'master_shop':_0xac1387,'dataProcess':_0x401978,'language':_0x952002});}catch(_0x7c15d6){console['log'](_0x7c15d6);}}),router[a0_0x2386e7(0x186)](a0_0x2386e7(0x188),auth,async(_0x14b3e4,_0xf26a9d)=>{var _0x149329=a0_0x2386e7;const {product_category:_0x610e76,transaction_category:_0x50e379,transaction_date_from:_0x52b10b,transaction_date_to:_0x2b0a7b,warehouse_category:_0x5a4965,item_code:_0x2c6f86}=_0x14b3e4[_0x149329(0x18b)];console[_0x149329(0x183)](_0x5a4965);if(_0x610e76=='rm'){if(_0x5a4965=='all'){var _0xb43da2=await purchases[_0x149329(0x18f)]([{'$match':{'date':{'$gte':_0x52b10b,'$lte':_0x2b0a7b}}},{'$lookup':{'from':_0x149329(0x1d9),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x149329(0x199)},{'$match':{'$expr':{'$eq':[_0x149329(0x1a1),'$product_details.invoice']}}},{'$project':{'_id':_0x149329(0x1bb),'product_name':_0x149329(0x1d7),'product_code':_0x149329(0x1db),'quantity_available':_0x149329(0x1ab),'warehouse_name':_0x149329(0x1d6),'warehouse_room':_0x149329(0x187),'invoice':_0x149329(0x1c0),'production_date':_0x149329(0x1e7),'expiry_date':'$product_details.expiry_date','UOM':_0x149329(0x1e5)}}],'as':_0x149329(0x19b)}}]);_0xb43da2['data_sales']={},await Promise[_0x149329(0x1b3)](_0xb43da2['map'](async _0x194fe2=>{var _0x483a03=_0x149329;_0xb43da2[_0x483a03(0x1d3)][_0x194fe2[_0x483a03(0x18e)]]=[],await Promise[_0x483a03(0x1b3)](_0x194fe2['warehouse_data'][_0x483a03(0x1a4)](async _0x26fd52=>{var _0x4cdb00=_0x483a03;const _0x507d5c=await sales[_0x4cdb00(0x18f)]([{'$unwind':_0x4cdb00(0x1b6)},{'$match':{'sale_product.id_transaction_from':_0x26fd52[_0x4cdb00(0x1d1)][_0x4cdb00(0x1ae)](),'sale_product.invoice':_0x26fd52[_0x4cdb00(0x18e)]}},{'$project':{'_id':_0x4cdb00(0x1aa),'product_name':_0x4cdb00(0x1c5),'product_code':_0x4cdb00(0x180),'quantity_available':_0x4cdb00(0x1cb),'warehouse_name':_0x4cdb00(0x1da),'warehouse_room':_0x4cdb00(0x1ba),'product_invoice':'$sale_product.invoice','invoice':_0x4cdb00(0x1d5),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x4cdb00(0x182),'production_date':_0x4cdb00(0x1cd),'expiry_date':_0x4cdb00(0x191),'UOM':_0x4cdb00(0x1dd)}}]);_0x507d5c[_0x4cdb00(0x18c)]>0x0&&_0xb43da2[_0x4cdb00(0x1d3)][_0x194fe2['invoice']][_0x4cdb00(0x1c7)](..._0x507d5c);}));})),_0xb43da2[_0x149329(0x1d3)]=_0xb43da2[_0x149329(0x1d3)],_0xb43da2[_0x149329(0x1a3)]={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x2215b1=>{var _0x1f8cab=_0x149329;_0xb43da2[_0x1f8cab(0x1a3)][_0x2215b1['invoice']]=[],await Promise['all'](_0x2215b1[_0x1f8cab(0x19b)][_0x1f8cab(0x1a4)](async _0x3d24c6=>{var _0x4a8600=_0x1f8cab;const _0x4f1cdb=await adjustment[_0x4a8600(0x18f)]([{'$unwind':_0x4a8600(0x185)},{'$match':{'product.id_transaction_from':_0x3d24c6[_0x4a8600(0x1d1)][_0x4a8600(0x1ae)](),'product.invoice':_0x3d24c6['invoice']}},{'$project':{'_id':_0x4a8600(0x1e1),'product_name':_0x4a8600(0x193),'product_code':_0x4a8600(0x1ca),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x4a8600(0x1da),'warehouse_room':'$product.room_names','product_invoice':_0x4a8600(0x1cc),'invoice':_0x4a8600(0x1d5),'id_transaction_from':_0x4a8600(0x197),'date':_0x4a8600(0x182),'production_date':'$product.production_date','expiry_date':_0x4a8600(0x1d2),'UOM':'$product.unit'}}]);_0x4f1cdb[_0x4a8600(0x18c)]>0x0&&_0xb43da2[_0x4a8600(0x1a3)][_0x2215b1['invoice']][_0x4a8600(0x1c7)](..._0x4f1cdb);}));})),_0xb43da2['data_transfer']={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x4065a8=>{var _0x4a9a0c=_0x149329;_0xb43da2['data_transfer'][_0x4065a8['invoice']]=[],await Promise[_0x4a9a0c(0x1b3)](_0x4065a8['warehouse_data'][_0x4a9a0c(0x1a4)](async _0x1dbf70=>{var _0x6b1655=_0x4a9a0c;const _0x425e70=await transfers[_0x6b1655(0x18f)]([{'$unwind':_0x6b1655(0x185)},{'$match':{'product.id_transaction_id':_0x1dbf70[_0x6b1655(0x1d1)][_0x6b1655(0x1ae)](),'product.To_invoice':_0x1dbf70['invoice']}},{'$project':{'_id':_0x6b1655(0x1e1),'product_name':_0x6b1655(0x193),'product_code':_0x6b1655(0x1ca),'quantity_available':_0x6b1655(0x19a),'warehouse_name':_0x6b1655(0x192),'warehouse_room':_0x6b1655(0x1a7),'product_invoice':_0x6b1655(0x1a2),'invoice':_0x6b1655(0x1d5),'id_transaction_from':_0x6b1655(0x1a5),'date':_0x6b1655(0x182),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x425e70['length']>0x0&&_0xb43da2[_0x6b1655(0x1bf)][_0x4065a8[_0x6b1655(0x18e)]][_0x6b1655(0x1c7)](..._0x425e70);}));})),_0xf26a9d[_0x149329(0x1d4)]({'purchases_warehouse':_0xb43da2,'data_sales':_0xb43da2[_0x149329(0x1d3)],'data_adjustment':_0xb43da2[_0x149329(0x1a3)],'data_transfer':_0xb43da2[_0x149329(0x1bf)]});}else{var _0xb43da2=await purchases[_0x149329(0x18f)]([{'$match':{'warehouse_name':_0x5a4965,'date':{'$gte':_0x52b10b,'$lte':_0x2b0a7b}}},{'$lookup':{'from':_0x149329(0x1d9),'let':{'invoice':_0x149329(0x1d5)},'pipeline':[{'$unwind':_0x149329(0x199)},{'$match':{'$expr':{'$eq':[_0x149329(0x1a1),_0x149329(0x1c0)]}}},{'$project':{'_id':_0x149329(0x1bb),'product_name':_0x149329(0x1d7),'product_code':_0x149329(0x1db),'quantity_available':_0x149329(0x1ab),'warehouse_name':_0x149329(0x1d6),'warehouse_room':_0x149329(0x187),'invoice':_0x149329(0x1c0),'production_date':'$product_details.production_date','expiry_date':_0x149329(0x19e),'UOM':_0x149329(0x1e5)}}],'as':_0x149329(0x19b)}}]);_0xb43da2['data_sales']={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x165e7f=>{var _0x25207c=_0x149329;_0xb43da2['data_sales'][_0x165e7f[_0x25207c(0x18e)]]=[],await Promise[_0x25207c(0x1b3)](_0x165e7f['warehouse_data'][_0x25207c(0x1a4)](async _0x546972=>{var _0x3915ab=_0x25207c;const _0x2a6ad8=await sales[_0x3915ab(0x18f)]([{'$unwind':_0x3915ab(0x1b6)},{'$match':{'sale_product.id_transaction_from':_0x546972[_0x3915ab(0x1d1)][_0x3915ab(0x1ae)](),'sale_product.invoice':_0x546972['invoice']}},{'$project':{'_id':_0x3915ab(0x1aa),'product_name':_0x3915ab(0x1c5),'product_code':_0x3915ab(0x180),'quantity_available':_0x3915ab(0x1cb),'warehouse_name':_0x3915ab(0x1da),'warehouse_room':_0x3915ab(0x1ba),'product_invoice':_0x3915ab(0x1c3),'invoice':'$invoice','id_transaction_from':_0x3915ab(0x1e4),'date':'$date','production_date':'$sale_product.production_date','expiry_date':'$sale_product.expiry_date','UOM':_0x3915ab(0x1dd)}}]);_0x2a6ad8['length']>0x0&&_0xb43da2[_0x3915ab(0x1d3)][_0x165e7f[_0x3915ab(0x18e)]]['push'](..._0x2a6ad8);}));})),_0xb43da2[_0x149329(0x1d3)]=_0xb43da2[_0x149329(0x1d3)],_0xb43da2[_0x149329(0x1a3)]={},await Promise['all'](_0xb43da2[_0x149329(0x1a4)](async _0x570725=>{var _0x4c5f87=_0x149329;_0xb43da2[_0x4c5f87(0x1a3)][_0x570725[_0x4c5f87(0x18e)]]=[],await Promise['all'](_0x570725[_0x4c5f87(0x19b)]['map'](async _0x1a7a2c=>{var _0x3b5857=_0x4c5f87;const _0x3909ef=await adjustment[_0x3b5857(0x18f)]([{'$unwind':_0x3b5857(0x185)},{'$match':{'product.id_transaction_from':_0x1a7a2c['_id'][_0x3b5857(0x1ae)](),'product.invoice':_0x1a7a2c[_0x3b5857(0x18e)]}},{'$project':{'_id':_0x3b5857(0x1e1),'product_name':_0x3b5857(0x193),'product_code':_0x3b5857(0x1ca),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x3b5857(0x1da),'warehouse_room':'$product.room_names','product_invoice':_0x3b5857(0x1cc),'invoice':_0x3b5857(0x1d5),'id_transaction_from':_0x3b5857(0x197),'date':'$date','production_date':_0x3b5857(0x1a0),'expiry_date':_0x3b5857(0x1d2),'UOM':'$product.unit'}}]);_0x3909ef[_0x3b5857(0x18c)]>0x0&&_0xb43da2[_0x3b5857(0x1a3)][_0x570725['invoice']][_0x3b5857(0x1c7)](..._0x3909ef);}));})),_0xb43da2[_0x149329(0x1bf)]={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x1c0c2d=>{var _0x4b6ea9=_0x149329;_0xb43da2[_0x4b6ea9(0x1bf)][_0x1c0c2d['invoice']]=[],await Promise[_0x4b6ea9(0x1b3)](_0x1c0c2d[_0x4b6ea9(0x19b)]['map'](async _0x346e6c=>{var _0x30159a=_0x4b6ea9;const _0x36fef8=await transfers[_0x30159a(0x18f)]([{'$unwind':_0x30159a(0x185)},{'$match':{'product.id_transaction_id':_0x346e6c[_0x30159a(0x1d1)][_0x30159a(0x1ae)](),'product.To_invoice':_0x346e6c[_0x30159a(0x18e)]}},{'$project':{'_id':_0x30159a(0x1e1),'product_name':_0x30159a(0x193),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x30159a(0x192),'warehouse_room':_0x30159a(0x1a7),'product_invoice':_0x30159a(0x1a2),'invoice':_0x30159a(0x1d5),'id_transaction_from':_0x30159a(0x1a5),'date':_0x30159a(0x182),'production_date':_0x30159a(0x1a0),'expiry_date':_0x30159a(0x1d2),'UOM':'$product.unit'}}]);_0x36fef8[_0x30159a(0x18c)]>0x0&&_0xb43da2[_0x30159a(0x1bf)][_0x1c0c2d[_0x30159a(0x18e)]]['push'](..._0x36fef8);}));})),_0xf26a9d[_0x149329(0x1d4)]({'purchases_warehouse':_0xb43da2,'data_sales':_0xb43da2[_0x149329(0x1d3)],'data_adjustment':_0xb43da2[_0x149329(0x1a3)],'data_transfer':_0xb43da2[_0x149329(0x1bf)]});}}else{if(_0x5a4965=='all'){var _0xb43da2=await purchases_finished['aggregate']([{'$match':{'date':{'$gte':_0x52b10b,'$lte':_0x2b0a7b}}},{'$lookup':{'from':_0x149329(0x1d9),'let':{'invoice':_0x149329(0x1d5)},'pipeline':[{'$unwind':_0x149329(0x199)},{'$match':{'$expr':{'$eq':[_0x149329(0x1a1),_0x149329(0x1c0)]}}},{'$project':{'_id':_0x149329(0x1bb),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x149329(0x1ab),'warehouse_name':_0x149329(0x1d6),'warehouse_room':'$room','invoice':_0x149329(0x1c0),'production_date':_0x149329(0x1e7),'expiry_date':_0x149329(0x19e),'UOM':_0x149329(0x1e5)}}],'as':_0x149329(0x19b)}}]);_0xb43da2[_0x149329(0x1d3)]={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x4534d6=>{var _0x11868e=_0x149329;_0xb43da2[_0x11868e(0x1d3)][_0x4534d6[_0x11868e(0x18e)]]=[],await Promise[_0x11868e(0x1b3)](_0x4534d6['warehouse_data'][_0x11868e(0x1a4)](async _0x491977=>{var _0x1c5919=_0x11868e;const _0x5aaf8e=await sales_finished['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x491977[_0x1c5919(0x1d1)]['valueOf'](),'sale_product.invoice':_0x491977[_0x1c5919(0x18e)]}},{'$project':{'_id':_0x1c5919(0x1aa),'product_name':_0x1c5919(0x1c5),'product_code':_0x1c5919(0x180),'quantity_available':_0x1c5919(0x1cb),'warehouse_name':_0x1c5919(0x1da),'warehouse_room':_0x1c5919(0x1ba),'product_invoice':_0x1c5919(0x1c3),'invoice':_0x1c5919(0x1d5),'id_transaction_from':_0x1c5919(0x1e4),'date':_0x1c5919(0x182),'production_date':_0x1c5919(0x1cd),'expiry_date':'$sale_product.expiry_date','UOM':'$sale_product.unit'}}]);_0x5aaf8e['length']>0x0&&_0xb43da2['data_sales'][_0x4534d6['invoice']][_0x1c5919(0x1c7)](..._0x5aaf8e);}));})),_0xb43da2[_0x149329(0x1d3)]=_0xb43da2['data_sales'],_0xb43da2['data_adjustment']={},await Promise['all'](_0xb43da2['map'](async _0x443a0e=>{var _0x4e7f9e=_0x149329;_0xb43da2[_0x4e7f9e(0x1a3)][_0x443a0e[_0x4e7f9e(0x18e)]]=[],await Promise[_0x4e7f9e(0x1b3)](_0x443a0e[_0x4e7f9e(0x19b)][_0x4e7f9e(0x1a4)](async _0x4ff20b=>{var _0x340ffe=_0x4e7f9e;const _0x5c2aad=await adjustment_finished[_0x340ffe(0x18f)]([{'$unwind':_0x340ffe(0x185)},{'$match':{'product.id_transaction_from':_0x4ff20b['_id']['valueOf'](),'product.invoice':_0x4ff20b[_0x340ffe(0x18e)]}},{'$project':{'_id':_0x340ffe(0x1e1),'product_name':'$product.product_name','product_code':_0x340ffe(0x1ca),'quantity_available':_0x340ffe(0x1ce),'warehouse_name':_0x340ffe(0x1da),'warehouse_room':'$product.room_names','product_invoice':_0x340ffe(0x1cc),'invoice':_0x340ffe(0x1d5),'id_transaction_from':'$product.id_transaction_from','date':_0x340ffe(0x182),'production_date':_0x340ffe(0x1a0),'expiry_date':_0x340ffe(0x1d2),'UOM':_0x340ffe(0x1b1)}}]);_0x5c2aad['length']>0x0&&_0xb43da2[_0x340ffe(0x1a3)][_0x443a0e['invoice']]['push'](..._0x5c2aad);}));})),_0xb43da2[_0x149329(0x1bf)]={},await Promise['all'](_0xb43da2[_0x149329(0x1a4)](async _0x27cf07=>{var _0x428ffd=_0x149329;_0xb43da2[_0x428ffd(0x1bf)][_0x27cf07['invoice']]=[],await Promise['all'](_0x27cf07[_0x428ffd(0x19b)][_0x428ffd(0x1a4)](async _0x6020b9=>{var _0x2fac3e=_0x428ffd;const _0x1bcaeb=await transfers_finished[_0x2fac3e(0x18f)]([{'$unwind':_0x2fac3e(0x185)},{'$match':{'product.id_transaction':_0x6020b9['_id'][_0x2fac3e(0x1ae)](),'product.from_invoice':_0x6020b9['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x2fac3e(0x193),'product_code':'$product.product_code','quantity_available':_0x2fac3e(0x19a),'warehouse_name':_0x2fac3e(0x192),'warehouse_room':_0x2fac3e(0x1a7),'product_invoice':_0x2fac3e(0x1a2),'invoice':_0x2fac3e(0x1d5),'id_transaction_from':_0x2fac3e(0x1b5),'date':_0x2fac3e(0x182),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x2fac3e(0x1b1)}}]);_0x1bcaeb['length']>0x0&&_0xb43da2[_0x2fac3e(0x1bf)][_0x27cf07[_0x2fac3e(0x18e)]]['push'](..._0x1bcaeb);}));})),_0xf26a9d[_0x149329(0x1d4)]({'purchases_warehouse':_0xb43da2,'data_sales':_0xb43da2[_0x149329(0x1d3)],'data_adjustment':_0xb43da2[_0x149329(0x1a3)],'data_transfer':_0xb43da2[_0x149329(0x1bf)]});}else{var _0xb43da2=await purchases_finished[_0x149329(0x18f)]([{'$match':{'warehouse_name':_0x5a4965,'date':{'$gte':_0x52b10b,'$lte':_0x2b0a7b}}},{'$lookup':{'from':_0x149329(0x1d9),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x149329(0x199)},{'$match':{'$expr':{'$eq':[_0x149329(0x1a1),_0x149329(0x1c0)]}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x149329(0x1ab),'warehouse_name':_0x149329(0x1d6),'warehouse_room':_0x149329(0x187),'invoice':_0x149329(0x1c0),'production_date':_0x149329(0x1e7),'expiry_date':_0x149329(0x19e),'UOM':'$product_details.unit'}}],'as':_0x149329(0x19b)}}]);_0xb43da2[_0x149329(0x1d3)]={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x5e5911=>{var _0x2f9d56=_0x149329;_0xb43da2['data_sales'][_0x5e5911[_0x2f9d56(0x18e)]]=[],await Promise['all'](_0x5e5911[_0x2f9d56(0x19b)][_0x2f9d56(0x1a4)](async _0x585c8e=>{var _0xe447ad=_0x2f9d56;const _0x30fc4f=await sales_finished[_0xe447ad(0x18f)]([{'$unwind':_0xe447ad(0x1b6)},{'$match':{'sale_product.id_transaction_from':_0x585c8e[_0xe447ad(0x1d1)][_0xe447ad(0x1ae)](),'sale_product.invoice':_0x585c8e[_0xe447ad(0x18e)]}},{'$project':{'_id':_0xe447ad(0x1aa),'product_name':'$sale_product.product_name','product_code':_0xe447ad(0x180),'quantity_available':_0xe447ad(0x1cb),'warehouse_name':'$warehouse_name','warehouse_room':_0xe447ad(0x1ba),'product_invoice':'$sale_product.invoice','invoice':_0xe447ad(0x1d5),'id_transaction_from':_0xe447ad(0x1e4),'date':'$date','production_date':_0xe447ad(0x1cd),'expiry_date':_0xe447ad(0x191),'UOM':_0xe447ad(0x1dd)}}]);_0x30fc4f[_0xe447ad(0x18c)]>0x0&&_0xb43da2[_0xe447ad(0x1d3)][_0x5e5911[_0xe447ad(0x18e)]][_0xe447ad(0x1c7)](..._0x30fc4f);}));})),_0xb43da2[_0x149329(0x1d3)]=_0xb43da2[_0x149329(0x1d3)],_0xb43da2[_0x149329(0x1a3)]={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x2f1be6=>{var _0x47f73f=_0x149329;_0xb43da2['data_adjustment'][_0x2f1be6[_0x47f73f(0x18e)]]=[],await Promise[_0x47f73f(0x1b3)](_0x2f1be6['warehouse_data']['map'](async _0x5eced4=>{var _0x214f28=_0x47f73f;const _0x5dc328=await adjustment_finished['aggregate']([{'$unwind':_0x214f28(0x185)},{'$match':{'product.id_transaction_from':_0x5eced4[_0x214f28(0x1d1)][_0x214f28(0x1ae)](),'product.invoice':_0x5eced4[_0x214f28(0x18e)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x214f28(0x1ca),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x214f28(0x1da),'warehouse_room':_0x214f28(0x1a7),'product_invoice':_0x214f28(0x1cc),'invoice':_0x214f28(0x1d5),'id_transaction_from':_0x214f28(0x197),'date':_0x214f28(0x182),'production_date':_0x214f28(0x1a0),'expiry_date':_0x214f28(0x1d2),'UOM':_0x214f28(0x1b1)}}]);_0x5dc328[_0x214f28(0x18c)]>0x0&&_0xb43da2['data_adjustment'][_0x2f1be6[_0x214f28(0x18e)]]['push'](..._0x5dc328);}));})),_0xb43da2['data_transfer']={},await Promise[_0x149329(0x1b3)](_0xb43da2[_0x149329(0x1a4)](async _0x32aa0a=>{var _0xebf5a9=_0x149329;_0xb43da2[_0xebf5a9(0x1bf)][_0x32aa0a[_0xebf5a9(0x18e)]]=[],await Promise[_0xebf5a9(0x1b3)](_0x32aa0a[_0xebf5a9(0x19b)][_0xebf5a9(0x1a4)](async _0x571446=>{var _0x1afc62=_0xebf5a9;const _0x4e72b4=await transfers_finished[_0x1afc62(0x18f)]([{'$unwind':_0x1afc62(0x185)},{'$match':{'product.id_transaction':_0x571446[_0x1afc62(0x1d1)]['valueOf'](),'product.from_invoice':_0x571446['invoice']}},{'$project':{'_id':_0x1afc62(0x1e1),'product_name':_0x1afc62(0x193),'product_code':_0x1afc62(0x1ca),'quantity_available':'$product.to_quantity','warehouse_name':_0x1afc62(0x192),'warehouse_room':_0x1afc62(0x1a7),'product_invoice':_0x1afc62(0x1a2),'invoice':_0x1afc62(0x1d5),'id_transaction_from':_0x1afc62(0x1b5),'date':_0x1afc62(0x182),'production_date':_0x1afc62(0x1a0),'expiry_date':_0x1afc62(0x1d2),'UOM':_0x1afc62(0x1b1)}}]);_0x4e72b4[_0x1afc62(0x18c)]>0x0&&_0xb43da2[_0x1afc62(0x1bf)][_0x32aa0a[_0x1afc62(0x18e)]][_0x1afc62(0x1c7)](..._0x4e72b4);}));})),_0xf26a9d[_0x149329(0x1d4)]({'purchases_warehouse':_0xb43da2,'data_sales':_0xb43da2['data_sales'],'data_adjustment':_0xb43da2['data_adjustment'],'data_transfer':_0xb43da2[_0x149329(0x1bf)]});}}}),router[a0_0x2386e7(0x1a9)](a0_0x2386e7(0x1af),auth,async(_0x204f4b,_0x39ccd9)=>{var _0x1d574d=a0_0x2386e7;try{const _0x29d097=_0x204f4b[_0x1d574d(0x18a)]['id'];var _0x121d9f=await purchases_finished[_0x1d574d(0x1b0)](_0x29d097);const _0x344130=await master_shop[_0x1d574d(0x1e2)](),_0xff03f7=_0x204f4b['user'],_0x4c1d50=await profile['findOne']({'email':_0xff03f7['email']});if(_0x344130[0x0][_0x1d574d(0x19f)]=='English\x20(US)')var _0x15c5fc=users[_0x1d574d(0x1c6)];else{if(_0x344130[0x0][_0x1d574d(0x19f)]==_0x1d574d(0x1dc))var _0x15c5fc=users['Hindi'];else{if(_0x344130[0x0]['language']==_0x1d574d(0x1b8))var _0x15c5fc=users[_0x1d574d(0x1b8)];else{if(_0x344130[0x0][_0x1d574d(0x19f)]==_0x1d574d(0x1b9))var _0x15c5fc=users['Spanish'];else{if(_0x344130[0x0]['language']==_0x1d574d(0x1a6))var _0x15c5fc=users[_0x1d574d(0x1a6)];else{if(_0x344130[0x0][_0x1d574d(0x19f)]==_0x1d574d(0x1ad))var _0x15c5fc=users[_0x1d574d(0x198)];else{if(_0x344130[0x0][_0x1d574d(0x19f)]==_0x1d574d(0x1c2))var _0x15c5fc=users[_0x1d574d(0x1c2)];else{if(_0x344130[0x0][_0x1d574d(0x19f)]==_0x1d574d(0x19d))var _0x15c5fc=users[_0x1d574d(0x1bd)];}}}}}}}_0x39ccd9[_0x1d574d(0x17d)]('view_table',{'success':_0x204f4b[_0x1d574d(0x1a8)](_0x1d574d(0x17e)),'errors':_0x204f4b['flash'](_0x1d574d(0x1e0)),'master_shop':_0x344130,'profile':_0x4c1d50,'role':_0xff03f7,'language':_0x15c5fc,'data':_0x121d9f});}catch(_0x4f1c43){_0x39ccd9[_0x1d574d(0x1d4)](_0x4f1c43);}}),router[a0_0x2386e7(0x1a9)]('/viewdata_og_fg/:id',auth,async(_0x3499fc,_0x27034e)=>{var _0xe98eec=a0_0x2386e7;try{const _0x26b5ba=_0x3499fc['params']['id'];var _0x1bfd50=await sales_finished[_0xe98eec(0x1b0)](_0x26b5ba);const _0x3b9caa=await master_shop[_0xe98eec(0x1e2)](),_0x5d8178=_0x3499fc['user'],_0x35a0ab=await profile[_0xe98eec(0x19c)]({'email':_0x5d8178[_0xe98eec(0x1ac)]});if(_0x3b9caa[0x0][_0xe98eec(0x19f)]=='English\x20(US)')var _0x494fc5=users['English'];else{if(_0x3b9caa[0x0]['language']==_0xe98eec(0x1dc))var _0x494fc5=users['Hindi'];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]==_0xe98eec(0x1b8))var _0x494fc5=users['German'];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]==_0xe98eec(0x1b9))var _0x494fc5=users[_0xe98eec(0x1b9)];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]=='French')var _0x494fc5=users['French'];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]=='Portuguese\x20(BR)')var _0x494fc5=users[_0xe98eec(0x198)];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]==_0xe98eec(0x1c2))var _0x494fc5=users[_0xe98eec(0x1c2)];else{if(_0x3b9caa[0x0][_0xe98eec(0x19f)]=='Arabic\x20(ae)')var _0x494fc5=users[_0xe98eec(0x1bd)];}}}}}}}_0x27034e[_0xe98eec(0x17d)]('view_og_table',{'success':_0x3499fc['flash'](_0xe98eec(0x17e)),'errors':_0x3499fc[_0xe98eec(0x1a8)](_0xe98eec(0x1e0)),'master_shop':_0x3b9caa,'profile':_0x35a0ab,'role':_0x5d8178,'language':_0x494fc5,'data':_0x1bfd50});}catch(_0x3a63be){_0x27034e[_0xe98eec(0x1d4)](_0x3a63be);}}),router[a0_0x2386e7(0x1a9)](a0_0x2386e7(0x1bc),auth,async(_0x50aff6,_0x4b2d69)=>{var _0x3d7398=a0_0x2386e7;try{const _0x3274c2=_0x50aff6[_0x3d7398(0x18a)]['id'];var _0x56b2f5=await transfers_finished['findById'](_0x3274c2);const _0x3280d=await master_shop[_0x3d7398(0x1e2)](),_0x5b8c96=_0x50aff6['user'],_0x4bd870=await profile[_0x3d7398(0x19c)]({'email':_0x5b8c96[_0x3d7398(0x1ac)]});if(_0x3280d[0x0][_0x3d7398(0x19f)]=='English\x20(US)')var _0x1483b2=users[_0x3d7398(0x1c6)];else{if(_0x3280d[0x0][_0x3d7398(0x19f)]==_0x3d7398(0x1dc))var _0x1483b2=users[_0x3d7398(0x1dc)];else{if(_0x3280d[0x0][_0x3d7398(0x19f)]==_0x3d7398(0x1b8))var _0x1483b2=users[_0x3d7398(0x1b8)];else{if(_0x3280d[0x0][_0x3d7398(0x19f)]==_0x3d7398(0x1b9))var _0x1483b2=users['Spanish'];else{if(_0x3280d[0x0]['language']==_0x3d7398(0x1a6))var _0x1483b2=users['French'];else{if(_0x3280d[0x0][_0x3d7398(0x19f)]=='Portuguese\x20(BR)')var _0x1483b2=users[_0x3d7398(0x198)];else{if(_0x3280d[0x0][_0x3d7398(0x19f)]==_0x3d7398(0x1c2))var _0x1483b2=users[_0x3d7398(0x1c2)];else{if(_0x3280d[0x0]['language']==_0x3d7398(0x19d))var _0x1483b2=users[_0x3d7398(0x1bd)];}}}}}}}_0x4b2d69[_0x3d7398(0x17d)](_0x3d7398(0x1e3),{'success':_0x50aff6[_0x3d7398(0x1a8)]('success'),'errors':_0x50aff6[_0x3d7398(0x1a8)](_0x3d7398(0x1e0)),'master_shop':_0x3280d,'profile':_0x4bd870,'role':_0x5b8c96,'language':_0x1483b2,'data':_0x56b2f5});}catch(_0x4e8490){_0x4b2d69['json'](_0x4e8490);}}),router[a0_0x2386e7(0x1a9)](a0_0x2386e7(0x194),auth,async(_0x2adbcd,_0x5043c8)=>{var _0x313047=a0_0x2386e7;try{const {username:_0x53a73b,email:_0x24235f,role:_0x21afe4}=_0x2adbcd[_0x313047(0x195)],_0x29a31e=_0x2adbcd[_0x313047(0x195)],_0x486572=await profile[_0x313047(0x19c)]({'email':_0x29a31e[_0x313047(0x1ac)]}),_0x379e9f=await master_shop[_0x313047(0x1e2)](),_0xca0417=await warehouse['aggregate']([{'$match':{'status':_0x313047(0x1be),'warehouse_category':_0x313047(0x189)}},{'$group':{'_id':_0x313047(0x1d6),'name':{'$first':'$name'}}}]);if(_0x379e9f[0x0]['language']=='English\x20(US)')var _0x27b9fd=users[_0x313047(0x1c6)];else{if(_0x379e9f[0x0]['language']==_0x313047(0x1dc))var _0x27b9fd=users[_0x313047(0x1dc)];else{if(_0x379e9f[0x0][_0x313047(0x19f)]==_0x313047(0x1b8))var _0x27b9fd=users[_0x313047(0x1b8)];else{if(_0x379e9f[0x0][_0x313047(0x19f)]==_0x313047(0x1b9))var _0x27b9fd=users['Spanish'];else{if(_0x379e9f[0x0][_0x313047(0x19f)]==_0x313047(0x1a6))var _0x27b9fd=users[_0x313047(0x1a6)];else{if(_0x379e9f[0x0]['language']==_0x313047(0x1ad))var _0x27b9fd=users[_0x313047(0x198)];else{if(_0x379e9f[0x0][_0x313047(0x19f)]=='Chinese')var _0x27b9fd=users['Chinese'];else{if(_0x379e9f[0x0]['language']=='Arabic\x20(ae)')var _0x27b9fd=users['Arabic'];}}}}}}}_0x5043c8[_0x313047(0x17d)]('transaction_finished_raw',{'success':_0x2adbcd[_0x313047(0x1a8)]('success'),'errors':_0x2adbcd[_0x313047(0x1a8)](_0x313047(0x1e0)),'role':_0x29a31e,'profile':_0x486572,'master_shop':_0x379e9f,'dataProcess':_0xca0417,'language':_0x27b9fd});}catch(_0x5eb745){console[_0x313047(0x183)](_0x5eb745);}}),module[a0_0x2386e7(0x190)]=router;