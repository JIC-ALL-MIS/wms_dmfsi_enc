const a0_0x38c1b6=a0_0x20b6;(function(_0x359042,_0x1735ab){const _0x6ce207=a0_0x20b6,_0xad6d98=_0x359042();while(!![]){try{const _0x140cfb=parseInt(_0x6ce207(0xf4))/0x1*(parseInt(_0x6ce207(0xf8))/0x2)+-parseInt(_0x6ce207(0xd7))/0x3+-parseInt(_0x6ce207(0x17b))/0x4+-parseInt(_0x6ce207(0xff))/0x5*(parseInt(_0x6ce207(0x137))/0x6)+-parseInt(_0x6ce207(0x181))/0x7+parseInt(_0x6ce207(0x124))/0x8+parseInt(_0x6ce207(0x138))/0x9*(parseInt(_0x6ce207(0x114))/0xa);if(_0x140cfb===_0x1735ab)break;else _0xad6d98['push'](_0xad6d98['shift']());}catch(_0x871132){_0xad6d98['push'](_0xad6d98['shift']());}}}(a0_0xc0eb,0x333ef));function a0_0x20b6(_0x56ba33,_0x7096e6){const _0xc0eb5=a0_0xc0eb();return a0_0x20b6=function(_0x20b68a,_0x55eaca){_0x20b68a=_0x20b68a-0xcf;let _0x4bc74c=_0xc0eb5[_0x20b68a];return _0x4bc74c;},a0_0x20b6(_0x56ba33,_0x7096e6);}const express=require(a0_0x38c1b6(0x160)),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require(a0_0x38c1b6(0x151)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x38c1b6(0x18b)),auth=require(a0_0x38c1b6(0x128)),users=require('../public/language/languages.json'),excelJS=require(a0_0x38c1b6(0xee)),xlsx=require('xlsx'),JsBarcode=require(a0_0x38c1b6(0x125)),{Canvas}=require(a0_0x38c1b6(0x189)),PDFDocument=require('pdfkit-table');function a0_0xc0eb(){const _0x2c3784=['findByIdAndUpdate','exceljs','findOne','alertquantity','$brand','brand\x20data\x20delete\x20successfully','\x20brand\x20is\x20add\x20successfully','3rCoCOd','Products\x20find_data','\x20<>\x20','toBuffer','226994qcAYie','status','flash','units','/view/add_products','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic','5CmWujr','English\x20(US)','\x20unit\x20is\x20add\x20successfully','/barcode/:id','Enabled','migrate_product_fule','Content-Disposition','PUnits','post','PCat','product\x20edit','/brands/:id','Spanish','Products','/products/categories','log','stock','Arabic\x20(ae)','xlsx','length','toString','360XwLBnU','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Secondary_Units','filename','barcode\x20user_id','/products_export_migrate_file','originalname','then','product\x20update\x20successfully','product_code','product_category','$product_docs','unit\x20data\x20delete\x20successfully','/view/:id','Maximum_Stocks','$product_name','1560600qoewMg','jsbarcode','PName','master','../middleware/auth','json','push','/products/units','$product_details.product_stock','Prod_Cat','/categories/:id','/view','Category','/units/:id','Portuguese','Portuguese\x20(BR)','product_stock','file','German','2079384vDBONQ','120870CwLMLL','findById','products','public/upload','Primary_Code','category','/brands','min','/brands/delete/:id','unit\x20data\x20update\x20successfully','$product_details.product_name','hello','Raw\x20Materials','diskStorage','public/Migration/','/print_barcode_filter/','/products_import_migrate_file','secondary_code','prod_categ','write','Chinese','English','maxStocks','concat','name','multer','add_product','width','single','Product_Name','\x20Edit\x20Successfully','product\x20add\x20successfully','brand','addWorksheet','errors','end','message','warehouse','Brands','/filter_product','express','get','Alert_QTY','Hindi','categories','image','$_id','email','$category','base64','product_barcode','numeric','aggregate','forEach','primary_code','render','$product_details','defaultProduct.avif','/products/brands','max_number_per_units','$product_stock','French','MaxperUnits','now','brands','readFile','/print_barcode','493944uKJSJk','/categories/delete/:id','Units','redirect','Secondary_Code','utils','1227681CtsoTb','height','maxProdPerUnit','edit\x20Product\x20master','\x20categories\x20is\x20add\x20successfully','unit','success','/barcode_data','canvas','CODE128','../models/all_models','save','/print_barcode_single/:id','Workbook','secondary_unit','PAlQty','attachment;\x20filename=Product_Migration_File.xlsx','params','\x20added\x20successfully','findByIdAndDelete','/products/view','491130KtxRvV','product_details.product_name','PSecondaryUnits','send','sku','body','data','/categories','categories\x20data\x20delete\x20successfully','find','Finished\x20Goods','language','bind','addPage','categ','user','Products_category','brand\x20data\x20update\x20successfully','public/Migration','setHeader','/units/delete/:id','/select_data'];a0_0xc0eb=function(){return _0x2c3784;};return a0_0xc0eb();}router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0xde),auth,async(_0x1f0626,_0x3e07cf)=>{const _0x38679e=a0_0x38c1b6;try{const {username:_0x1dfd14,email:_0x20e4ca,role:_0x1087bc}=_0x1f0626['user'],_0x2395dd=_0x1f0626[_0x38679e(0xe6)],_0x1db6e6=await profile['findOne']({'email':_0x2395dd[_0x38679e(0x167)]}),_0x117531=await master_shop['find']();console[_0x38679e(0x10e)](_0x38679e(0x127),_0x117531);const _0x319fc3=await categories['find']();if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x100))var _0x2eb649=users['English'];else{if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x163))var _0x2eb649=users[_0x38679e(0x163)];else{if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x136))var _0x2eb649=users[_0x38679e(0x136)];else{if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x10b))var _0x2eb649=users[_0x38679e(0x10b)];else{if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x175))var _0x2eb649=users[_0x38679e(0x175)];else{if(_0x117531[0x0][_0x38679e(0xe2)]=='Portuguese\x20(BR)')var _0x2eb649=users[_0x38679e(0x132)];else{if(_0x117531[0x0][_0x38679e(0xe2)]==_0x38679e(0x14c))var _0x2eb649=users[_0x38679e(0x14c)];else{if(_0x117531[0x0]['language']=='Arabic\x20(ae)')var _0x2eb649=users['Arabic'];}}}}}}}_0x3e07cf['render'](_0x38679e(0x164),{'success':_0x1f0626[_0x38679e(0xfa)](_0x38679e(0x187)),'errors':_0x1f0626[_0x38679e(0xfa)](_0x38679e(0x15a)),'role':_0x2395dd,'profile':_0x1db6e6,'user':_0x319fc3,'master_shop':_0x117531,'language':_0x2eb649});}catch(_0x1e542f){console[_0x38679e(0x10e)](_0x1e542f);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0xde),auth,async(_0x4315a4,_0x5548f5)=>{const _0x121304=a0_0x38c1b6;try{const {name:_0x3a4693,products:_0x5056c5}=_0x4315a4[_0x121304(0xdc)],_0x14d2a3=new categories({'name':_0x3a4693,'products':_0x5056c5}),_0x17e3e4=await categories[_0x121304(0xef)]({'name':_0x3a4693});_0x17e3e4?_0x4315a4['flash'](_0x121304(0x15a),_0x3a4693+_0x121304(0xfd)):_0x4315a4[_0x121304(0xfa)](_0x121304(0x187),_0x3a4693+_0x121304(0x185));const _0x4d10ce=await _0x14d2a3['save']();_0x5548f5[_0x121304(0x17e)](_0x121304(0x10d));}catch(_0x120dc6){console[_0x121304(0x10e)](_0x120dc6);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x12e),auth,async(_0x20d2ea,_0x1c11c1)=>{const _0x553aeb=a0_0x38c1b6;try{const {username:_0x31c364,email:_0x3b7632,role:_0x2bc7af}=_0x20d2ea[_0x553aeb(0xe6)],_0x81d511=_0x20d2ea[_0x553aeb(0xe6)],_0x23b92d=await profile[_0x553aeb(0xef)]({'email':_0x81d511[_0x553aeb(0x167)]}),_0x218eb0=await master_shop[_0x553aeb(0xe0)]();console[_0x553aeb(0x10e)](_0x553aeb(0x127),_0x218eb0);const _0x584ca3=_0x20d2ea[_0x553aeb(0xd3)]['id'];console[_0x553aeb(0x10e)](_0x584ca3);const _0x3b5617=await categories[_0x553aeb(0x139)](_0x584ca3);if(_0x218eb0[0x0][_0x553aeb(0xe2)]=='English\x20(US)')var _0x1a2335=users['English'];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]==_0x553aeb(0x163))var _0x1a2335=users[_0x553aeb(0x163)];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]==_0x553aeb(0x136))var _0x1a2335=users[_0x553aeb(0x136)];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]==_0x553aeb(0x10b))var _0x1a2335=users[_0x553aeb(0x10b)];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]==_0x553aeb(0x175))var _0x1a2335=users[_0x553aeb(0x175)];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]=='Portuguese\x20(BR)')var _0x1a2335=users[_0x553aeb(0x132)];else{if(_0x218eb0[0x0]['language']==_0x553aeb(0x14c))var _0x1a2335=users[_0x553aeb(0x14c)];else{if(_0x218eb0[0x0][_0x553aeb(0xe2)]==_0x553aeb(0x110))var _0x1a2335=users[_0x553aeb(0xfe)];}}}}}}}_0x1c11c1['render'](_0x553aeb(0x164),{'success':_0x20d2ea[_0x553aeb(0xfa)](_0x553aeb(0x187)),'errors':_0x20d2ea[_0x553aeb(0xfa)]('errors'),'role':_0x81d511,'profile':_0x23b92d,'master_shop':_0x218eb0,'user':_0x3b5617,'language':_0x1a2335});}catch(_0x56cafb){console[_0x553aeb(0x10e)](_0x56cafb);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x12e),auth,async(_0x5d7003,_0x37aace)=>{const _0x587d2b=a0_0x38c1b6;try{const _0x3c3fae=_0x5d7003[_0x587d2b(0xd3)]['id'],_0x363d86=await categories[_0x587d2b(0xed)](_0x3c3fae,_0x5d7003['body']);_0x5d7003[_0x587d2b(0xfa)](_0x587d2b(0x187),''+users['categories_edit']),_0x37aace[_0x587d2b(0x17e)]('/products/categories');}catch(_0x2d21ee){console[_0x587d2b(0x10e)](_0x2d21ee);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x17c),auth,async(_0x333bef,_0x498d13)=>{const _0x1cb248=a0_0x38c1b6;try{const _0x587794=_0x333bef['params']['id'],_0x3ea047=await categories['findByIdAndDelete'](_0x587794);_0x333bef['flash'](_0x1cb248(0x187),_0x1cb248(0xdf)),_0x498d13['redirect']('/products/categories');}catch(_0x422d4e){console[_0x1cb248(0x10e)](_0x422d4e);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x13e),auth,async(_0x22380a,_0x1407fe)=>{const _0x234cbe=a0_0x38c1b6;try{const {username:_0x53437d,email:_0x453be8,role:_0x35fcb2}=_0x22380a[_0x234cbe(0xe6)],_0x99c36e=_0x22380a['user'],_0xf736a0=await profile['findOne']({'email':_0x99c36e[_0x234cbe(0x167)]}),_0x5694fe=await master_shop[_0x234cbe(0xe0)]();console[_0x234cbe(0x10e)]('master',_0x5694fe);const _0x4ff10d=await brands[_0x234cbe(0xe0)]();if(_0x5694fe[0x0][_0x234cbe(0xe2)]==_0x234cbe(0x100))var _0x5f39f1=users[_0x234cbe(0x14d)];else{if(_0x5694fe[0x0]['language']==_0x234cbe(0x163))var _0x5f39f1=users[_0x234cbe(0x163)];else{if(_0x5694fe[0x0][_0x234cbe(0xe2)]==_0x234cbe(0x136))var _0x5f39f1=users[_0x234cbe(0x136)];else{if(_0x5694fe[0x0][_0x234cbe(0xe2)]==_0x234cbe(0x10b))var _0x5f39f1=users[_0x234cbe(0x10b)];else{if(_0x5694fe[0x0][_0x234cbe(0xe2)]==_0x234cbe(0x175))var _0x5f39f1=users[_0x234cbe(0x175)];else{if(_0x5694fe[0x0][_0x234cbe(0xe2)]=='Portuguese\x20(BR)')var _0x5f39f1=users[_0x234cbe(0x132)];else{if(_0x5694fe[0x0][_0x234cbe(0xe2)]==_0x234cbe(0x14c))var _0x5f39f1=users['Chinese'];else{if(_0x5694fe[0x0]['language']=='Arabic\x20(ae)')var _0x5f39f1=users[_0x234cbe(0xfe)];}}}}}}}_0x1407fe['render']('brands',{'success':_0x22380a[_0x234cbe(0xfa)](_0x234cbe(0x187)),'errors':_0x22380a[_0x234cbe(0xfa)](_0x234cbe(0x15a)),'role':_0x99c36e,'profile':_0xf736a0,'master_shop':_0x5694fe,'user':_0x4ff10d,'language':_0x5f39f1});}catch(_0x1eb2ad){console[_0x234cbe(0x10e)](_0x1eb2ad);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x13e),auth,async(_0x3ff8ec,_0xa9ac47)=>{const _0x2dc311=a0_0x38c1b6;try{const {name:_0x52c195,products:_0x2c0301}=_0x3ff8ec[_0x2dc311(0xdc)],_0x1a750e=new brands({'name':_0x52c195,'products':_0x2c0301}),_0x5737bd=await brands[_0x2dc311(0xef)]({'name':_0x52c195});_0x5737bd?_0x3ff8ec['flash'](_0x2dc311(0x15a),_0x52c195+_0x2dc311(0x115)):_0x3ff8ec['flash'](_0x2dc311(0x187),_0x52c195+_0x2dc311(0xf3));const _0x3a2dab=await _0x1a750e['save']();_0xa9ac47[_0x2dc311(0x17e)](_0x2dc311(0x172));}catch(_0x33a774){console[_0x2dc311(0x10e)](_0x33a774);}}),router['get']('/brands/:id',auth,async(_0x1e8cdd,_0x10cd72)=>{const _0x377296=a0_0x38c1b6;try{const {username:_0xced923,email:_0x17db85,role:_0xd42cdc}=_0x1e8cdd[_0x377296(0xe6)],_0x1a9951=_0x1e8cdd[_0x377296(0xe6)],_0x239337=await profile['findOne']({'email':_0x1a9951[_0x377296(0x167)]}),_0x27292a=await master_shop[_0x377296(0xe0)]();console[_0x377296(0x10e)](_0x377296(0x127),_0x27292a);const _0x4c1b21=_0x1e8cdd[_0x377296(0xd3)]['id'];console[_0x377296(0x10e)](_0x4c1b21);const _0x560ef9=await brands['findById'](_0x4c1b21);if(_0x27292a[0x0][_0x377296(0xe2)]=='English\x20(US)')var _0x50de77=users[_0x377296(0x14d)];else{if(_0x27292a[0x0]['language']==_0x377296(0x163))var _0x50de77=users[_0x377296(0x163)];else{if(_0x27292a[0x0][_0x377296(0xe2)]=='German')var _0x50de77=users[_0x377296(0x136)];else{if(_0x27292a[0x0][_0x377296(0xe2)]==_0x377296(0x10b))var _0x50de77=users[_0x377296(0x10b)];else{if(_0x27292a[0x0]['language']==_0x377296(0x175))var _0x50de77=users[_0x377296(0x175)];else{if(_0x27292a[0x0][_0x377296(0xe2)]==_0x377296(0x133))var _0x50de77=users[_0x377296(0x132)];else{if(_0x27292a[0x0][_0x377296(0xe2)]==_0x377296(0x14c))var _0x50de77=users['Chinese'];else{if(_0x27292a[0x0]['language']==_0x377296(0x110))var _0x50de77=users[_0x377296(0xfe)];}}}}}}}_0x10cd72[_0x377296(0x16f)](_0x377296(0x178),{'success':_0x1e8cdd[_0x377296(0xfa)](_0x377296(0x187)),'errors':_0x1e8cdd[_0x377296(0xfa)](_0x377296(0x15a)),'role':_0x1a9951,'profile':_0x239337,'master_shop':_0x27292a,'user':_0x560ef9,'language':_0x50de77});}catch(_0x5be918){console[_0x377296(0x10e)](_0x5be918);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x10a),auth,async(_0x591d67,_0x9a1eaa)=>{const _0x4348a3=a0_0x38c1b6;try{const _0x3aa54a=_0x591d67['params']['id'],_0x3721d0=await brands[_0x4348a3(0xed)](_0x3aa54a,_0x591d67[_0x4348a3(0xdc)]);_0x591d67[_0x4348a3(0xfa)](_0x4348a3(0x187),_0x4348a3(0xe8)),_0x9a1eaa[_0x4348a3(0x17e)](_0x4348a3(0x172));}catch(_0x1dc67c){console[_0x4348a3(0x10e)](_0x1dc67c);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x140),auth,async(_0x430097,_0x2bef8d)=>{const _0x5d63a2=a0_0x38c1b6;try{const _0x3447c7=_0x430097[_0x5d63a2(0xd3)]['id'],_0x946feb=await brands[_0x5d63a2(0xd5)](_0x3447c7);_0x430097['flash'](_0x5d63a2(0x187),_0x5d63a2(0xf2)),_0x2bef8d['redirect']('/products/brands');}catch(_0x1835bf){console['log'](_0x1835bf);}}),router[a0_0x38c1b6(0x161)]('/units',auth,async(_0x5cedc1,_0x2340d2)=>{const _0x1cbc6d=a0_0x38c1b6;try{const {username:_0x5e3ac2,email:_0x441ca2,role:_0x54f364}=_0x5cedc1[_0x1cbc6d(0xe6)],_0x580be1=_0x5cedc1[_0x1cbc6d(0xe6)],_0x22ba5c=await profile[_0x1cbc6d(0xef)]({'email':_0x580be1[_0x1cbc6d(0x167)]}),_0x5395e5=await master_shop[_0x1cbc6d(0xe0)]();console[_0x1cbc6d(0x10e)]('master',_0x5395e5);const _0x19ebf=await units[_0x1cbc6d(0xe0)]();if(_0x5395e5[0x0]['language']==_0x1cbc6d(0x100))var _0x530788=users[_0x1cbc6d(0x14d)];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x163))var _0x530788=users[_0x1cbc6d(0x163)];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x136))var _0x530788=users[_0x1cbc6d(0x136)];else{if(_0x5395e5[0x0]['language']==_0x1cbc6d(0x10b))var _0x530788=users[_0x1cbc6d(0x10b)];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x175))var _0x530788=users['French'];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x133))var _0x530788=users[_0x1cbc6d(0x132)];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x14c))var _0x530788=users['Chinese'];else{if(_0x5395e5[0x0][_0x1cbc6d(0xe2)]==_0x1cbc6d(0x110))var _0x530788=users['Arabic'];}}}}}}}_0x2340d2['render']('units',{'success':_0x5cedc1['flash']('success'),'errors':_0x5cedc1[_0x1cbc6d(0xfa)](_0x1cbc6d(0x15a)),'role':_0x580be1,'profile':_0x22ba5c,'master_shop':_0x5395e5,'user':_0x19ebf,'language':_0x530788});}catch(_0x42a2f4){console[_0x1cbc6d(0x10e)](_0x42a2f4);}}),router[a0_0x38c1b6(0x107)]('/units',auth,async(_0x2b9d5b,_0xf6a97c)=>{const _0x1a7353=a0_0x38c1b6;try{const {name:_0x28f35d,secondary_unit:_0x2853a9,products:_0x1cbe78}=_0x2b9d5b[_0x1a7353(0xdc)],_0x36041e=new units({'name':_0x28f35d,'secondary_unit':_0x2853a9,'products':_0x1cbe78}),_0x4851d8=await units[_0x1a7353(0xef)]({'name':_0x28f35d});_0x4851d8?_0x2b9d5b[_0x1a7353(0xfa)](_0x1a7353(0x15a),_0x28f35d+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x2b9d5b[_0x1a7353(0xfa)](_0x1a7353(0x187),_0x28f35d+_0x1a7353(0x101));const _0x52118e=await _0x36041e[_0x1a7353(0x18c)]();_0xf6a97c[_0x1a7353(0x17e)](_0x1a7353(0x12b));}catch(_0x272dd5){console[_0x1a7353(0x10e)](_0x272dd5);}}),router[a0_0x38c1b6(0x161)]('/units/:id',auth,async(_0x5ee099,_0x41c6ff)=>{const _0x356084=a0_0x38c1b6;try{const {username:_0x583b8a,email:_0x1de352,role:_0x45ee2d}=_0x5ee099[_0x356084(0xe6)],_0x2525c7=_0x5ee099[_0x356084(0xe6)],_0x269538=await profile[_0x356084(0xef)]({'email':_0x2525c7['email']}),_0x2a200f=await master_shop['find']();console[_0x356084(0x10e)](_0x356084(0x127),_0x2a200f);const _0x54798a=_0x5ee099[_0x356084(0xd3)]['id'],_0x4d06dd=await units[_0x356084(0x139)](_0x54798a);if(_0x2a200f[0x0][_0x356084(0xe2)]==_0x356084(0x100))var _0x9cd1cc=users[_0x356084(0x14d)];else{if(_0x2a200f[0x0][_0x356084(0xe2)]==_0x356084(0x163))var _0x9cd1cc=users['Hindi'];else{if(_0x2a200f[0x0][_0x356084(0xe2)]==_0x356084(0x136))var _0x9cd1cc=users[_0x356084(0x136)];else{if(_0x2a200f[0x0][_0x356084(0xe2)]=='Spanish')var _0x9cd1cc=users[_0x356084(0x10b)];else{if(_0x2a200f[0x0]['language']==_0x356084(0x175))var _0x9cd1cc=users['French'];else{if(_0x2a200f[0x0][_0x356084(0xe2)]==_0x356084(0x133))var _0x9cd1cc=users[_0x356084(0x132)];else{if(_0x2a200f[0x0][_0x356084(0xe2)]==_0x356084(0x14c))var _0x9cd1cc=users[_0x356084(0x14c)];else{if(_0x2a200f[0x0][_0x356084(0xe2)]=='Arabic\x20(ae)')var _0x9cd1cc=users[_0x356084(0xfe)];}}}}}}}_0x41c6ff[_0x356084(0x16f)](_0x356084(0xfb),{'success':_0x5ee099['flash'](_0x356084(0x187)),'errors':_0x5ee099['flash']('errors'),'role':_0x2525c7,'profile':_0x269538,'master_shop':_0x2a200f,'user':_0x4d06dd,'language':_0x9cd1cc});}catch(_0x13ad66){console[_0x356084(0x10e)](_0x13ad66);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x131),auth,async(_0x25e2c5,_0x41a610)=>{const _0x487bec=a0_0x38c1b6;try{const _0xcf03e3=_0x25e2c5[_0x487bec(0xd3)]['id'],_0x5bbbc7=await units[_0x487bec(0xed)](_0xcf03e3,_0x25e2c5['body']);_0x25e2c5[_0x487bec(0xfa)](_0x487bec(0x187),_0x487bec(0x141)),_0x41a610[_0x487bec(0x17e)](_0x487bec(0x12b));}catch(_0x50b19e){console[_0x487bec(0x10e)](_0x50b19e);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0xeb),auth,async(_0x45d544,_0x2e29c2)=>{const _0x5c6468=a0_0x38c1b6;try{const _0x2725d5=_0x45d544['params']['id'],_0x17bb90=await units['findByIdAndDelete'](_0x2725d5);_0x45d544[_0x5c6468(0xfa)](_0x5c6468(0x187),_0x5c6468(0x120)),_0x2e29c2[_0x5c6468(0x17e)](_0x5c6468(0x12b));}catch(_0x244106){console[_0x5c6468(0x10e)](_0x244106);}});const storage=multer[a0_0x38c1b6(0x145)]({'destination':(_0x433a47,_0xd35a56,_0x78190c)=>{const _0x437f12=a0_0x38c1b6;_0x78190c(null,_0x437f12(0x13b));},'filename':(_0x30654e,_0x2202d4,_0x3ea562)=>{const _0x16aa57=a0_0x38c1b6;_0x3ea562(null,Date[_0x16aa57(0x177)]()+_0x2202d4[_0x16aa57(0x11a)]);}}),upload=multer({'storage':storage});router['get'](a0_0x38c1b6(0x12f),auth,async(_0xe4a7f3,_0x3b6dcc)=>{const _0x1ce980=a0_0x38c1b6;try{const {username:_0xd02a80,email:_0x443281,role:_0x1e65f1}=_0xe4a7f3[_0x1ce980(0xe6)],_0x39bcf9=_0xe4a7f3['user'],_0x5b0baa=await profile[_0x1ce980(0xef)]({'email':_0x39bcf9[_0x1ce980(0x167)]}),_0x4c634d={'year':_0x1ce980(0x16b),'month':'long','day':_0x1ce980(0x16b)},_0x473ad8=await master_shop[_0x1ce980(0xe0)]();console[_0x1ce980(0x10e)]('Products\x20master',_0x473ad8);const _0x56509b=await product[_0x1ce980(0xe0)]();console[_0x1ce980(0x10e)]('Products\x20find_data',_0x56509b);const _0x36f9fb=await warehouse[_0x1ce980(0x16c)]([{'$unwind':_0x1ce980(0x170)},{'$lookup':{'from':'products','localField':_0x1ce980(0xd8),'foreignField':_0x1ce980(0x150),'as':'product_docs'}},{'$unwind':_0x1ce980(0x11f)},{'$project':{'product_name':_0x1ce980(0x142),'product_stock':_0x1ce980(0x12c)}},{'$group':{'_id':_0x1ce980(0x123),'product_stock':{'$sum':_0x1ce980(0x174)}}}]);console[_0x1ce980(0x10e)]('Products\x20warehouse_data',_0x36f9fb),_0x36f9fb[_0x1ce980(0x16d)](_0xd9ec1c=>{const _0x39f756=_0x56509b['map'](_0x38a92b=>{const _0x27ea0e=a0_0x20b6;_0x38a92b[_0x27ea0e(0x150)]==_0xd9ec1c['_id']&&(_0x38a92b['stock']=parseInt(_0x38a92b[_0x27ea0e(0x10f)])+parseInt(_0xd9ec1c[_0x27ea0e(0x134)]));});}),console[_0x1ce980(0x10e)](_0x1ce980(0xf5),_0x56509b);if(_0x473ad8[0x0][_0x1ce980(0xe2)]==_0x1ce980(0x100))var _0x873b89=users[_0x1ce980(0x14d)];else{if(_0x473ad8[0x0][_0x1ce980(0xe2)]==_0x1ce980(0x163))var _0x873b89=users[_0x1ce980(0x163)];else{if(_0x473ad8[0x0][_0x1ce980(0xe2)]==_0x1ce980(0x136))var _0x873b89=users[_0x1ce980(0x136)];else{if(_0x473ad8[0x0][_0x1ce980(0xe2)]=='Spanish')var _0x873b89=users[_0x1ce980(0x10b)];else{if(_0x473ad8[0x0]['language']==_0x1ce980(0x175))var _0x873b89=users[_0x1ce980(0x175)];else{if(_0x473ad8[0x0]['language']==_0x1ce980(0x133))var _0x873b89=users['Portuguese'];else{if(_0x473ad8[0x0][_0x1ce980(0xe2)]==_0x1ce980(0x14c))var _0x873b89=users['Chinese'];else{if(_0x473ad8[0x0][_0x1ce980(0xe2)]==_0x1ce980(0x110))var _0x873b89=users[_0x1ce980(0xfe)];}}}}}}}_0x3b6dcc[_0x1ce980(0x16f)](_0x1ce980(0x13a),{'success':_0xe4a7f3[_0x1ce980(0xfa)]('success'),'errors':_0xe4a7f3[_0x1ce980(0xfa)](_0x1ce980(0x15a)),'alldata':_0x56509b,'profile':_0x5b0baa,'master_shop':_0x473ad8,'role':_0x39bcf9,'product_stock':_0x36f9fb,'language':_0x873b89});}catch(_0x175f95){console['log'](_0x175f95);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0xfc),auth,async(_0x1eb494,_0x3ecf68)=>{const _0x57533e=a0_0x38c1b6;try{const {username:_0x2eb5a0,email:_0x291ad2,role:_0x176270}=_0x1eb494['user'],_0x52599d=_0x1eb494[_0x57533e(0xe6)],_0x5f36ff=await profile[_0x57533e(0xef)]({'email':_0x52599d[_0x57533e(0x167)]}),_0x14485c=await master_shop['find']();console[_0x57533e(0x10e)](_0x57533e(0x127),_0x14485c);const _0x21e3e9=await categories[_0x57533e(0xe0)]({}),_0x3b23f0=await brands[_0x57533e(0xe0)]({}),_0x252548=await units[_0x57533e(0xe0)]({}),_0x1b9cca=await warehouse[_0x57533e(0xe0)]({'status':_0x57533e(0x103)});if(_0x14485c[0x0][_0x57533e(0xe2)]==_0x57533e(0x100))var _0x212e15=users['English'];else{if(_0x14485c[0x0][_0x57533e(0xe2)]=='Hindi')var _0x212e15=users['Hindi'];else{if(_0x14485c[0x0][_0x57533e(0xe2)]==_0x57533e(0x136))var _0x212e15=users['German'];else{if(_0x14485c[0x0][_0x57533e(0xe2)]==_0x57533e(0x10b))var _0x212e15=users[_0x57533e(0x10b)];else{if(_0x14485c[0x0]['language']==_0x57533e(0x175))var _0x212e15=users[_0x57533e(0x175)];else{if(_0x14485c[0x0][_0x57533e(0xe2)]=='Portuguese\x20(BR)')var _0x212e15=users['Portuguese'];else{if(_0x14485c[0x0][_0x57533e(0xe2)]=='Chinese')var _0x212e15=users[_0x57533e(0x14c)];else{if(_0x14485c[0x0][_0x57533e(0xe2)]=='Arabic\x20(ae)')var _0x212e15=users['Arabic'];}}}}}}}_0x3ecf68[_0x57533e(0x16f)](_0x57533e(0x152),{'success':_0x1eb494[_0x57533e(0xfa)](_0x57533e(0x187)),'errors':_0x1eb494[_0x57533e(0xfa)](_0x57533e(0x15a)),'role':_0x52599d,'profile':_0x5f36ff,'categories':_0x21e3e9,'brands':_0x3b23f0,'master_shop':_0x14485c,'units':_0x252548,'language':_0x212e15,'find_data':_0x1b9cca});}catch(_0x6775c7){console[_0x57533e(0x10e)](_0x6775c7);}}),router['post'](a0_0x38c1b6(0xfc),auth,upload[a0_0x38c1b6(0x154)](a0_0x38c1b6(0x165)),async(_0x2d8a4a,_0x180811)=>{const _0x83d3b2=a0_0x38c1b6;try{const {name:_0x1a4303,category:_0x9296e4,brand:_0x299b48,unit:_0x383171,alertquantity:_0x4267cc,stock:_0x118f18,product_code:_0x5197fa,warehouse:_0x50dca0,primary_ItemCode:_0x386380,second_ItemCode:_0x79a851,second_unit:_0x50c500,maxPerUnit:_0x57b130,MaxPerProduct:_0x42312c}=_0x2d8a4a[_0x83d3b2(0xdc)],_0x1bf4bf=_0x2d8a4a[_0x83d3b2(0x135)]?.['filename']||_0x83d3b2(0x171),_0x5f0202=new product({'image':_0x1bf4bf,'name':_0x1a4303,'category':_0x9296e4,'brand':_0x299b48,'unit':_0x383171,'alertquantity':_0x4267cc,'stock':_0x118f18,'product_code':_0x5197fa,'warehouse':_0x50dca0,'primary_code':_0x386380,'secondary_code':_0x79a851,'second_unit':_0x50c500,'maxStocks':_0x42312c,'maxProdPerUnit':_0x57b130}),_0x424c20=await _0x5f0202[_0x83d3b2(0x18c)](),_0x12a561=await categories[_0x83d3b2(0xef)]({'name':_0x9296e4});_0x12a561[_0x83d3b2(0x13a)]=parseInt(_0x12a561[_0x83d3b2(0x13a)])+0x1,await _0x12a561[_0x83d3b2(0x18c)]();const _0xecd71a=await brands[_0x83d3b2(0xef)]({'name':_0x299b48});_0xecd71a[_0x83d3b2(0x13a)]=parseInt(_0xecd71a['products'])+0x1,await _0xecd71a['save']();const _0x58e696=await units[_0x83d3b2(0xef)]({'name':_0x383171});_0x58e696[_0x83d3b2(0x13a)]=parseInt(_0x58e696[_0x83d3b2(0x13a)])+0x1,await _0x58e696[_0x83d3b2(0x18c)](),_0x2d8a4a['flash'](_0x83d3b2(0x187),_0x83d3b2(0x157)),_0x180811[_0x83d3b2(0x17e)](_0x83d3b2(0xd6));}catch(_0x2c3b4b){console[_0x83d3b2(0x10e)](_0x2c3b4b);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x121),auth,async(_0x3e2407,_0x4ad4be)=>{const _0xa76eb3=a0_0x38c1b6;try{const {username:_0x2d66a7,email:_0x27cbed,role:_0x3f0361}=_0x3e2407[_0xa76eb3(0xe6)],_0x47f7da=_0x3e2407[_0xa76eb3(0xe6)],_0x2fb89f=await profile[_0xa76eb3(0xef)]({'email':_0x47f7da[_0xa76eb3(0x167)]}),_0x2e0579=await master_shop['find']();console[_0xa76eb3(0x10e)](_0xa76eb3(0x184),_0x2e0579);const _0x3439e5=_0x3e2407['params']['id'],_0x299e95=await product[_0xa76eb3(0x139)](_0x3439e5),_0x452dcf=await categories[_0xa76eb3(0xe0)]({}),_0x3e4956=await brands[_0xa76eb3(0xe0)]({}),_0x147c77=await units[_0xa76eb3(0xe0)]({}),_0x78edd9=await warehouse[_0xa76eb3(0xe0)]({'status':_0xa76eb3(0x103)}),_0x22762a=await units[_0xa76eb3(0x16c)]([{'$group':{'_id':_0xa76eb3(0x166),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x100))var _0x3bb0ba=users[_0xa76eb3(0x14d)];else{if(_0x2e0579[0x0]['language']==_0xa76eb3(0x163))var _0x3bb0ba=users[_0xa76eb3(0x163)];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x136))var _0x3bb0ba=users['German'];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x10b))var _0x3bb0ba=users[_0xa76eb3(0x10b)];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x175))var _0x3bb0ba=users[_0xa76eb3(0x175)];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]=='Portuguese\x20(BR)')var _0x3bb0ba=users[_0xa76eb3(0x132)];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x14c))var _0x3bb0ba=users['Chinese'];else{if(_0x2e0579[0x0][_0xa76eb3(0xe2)]==_0xa76eb3(0x110))var _0x3bb0ba=users[_0xa76eb3(0xfe)];}}}}}}}_0x4ad4be[_0xa76eb3(0x16f)]('edit_product',{'success':_0x3e2407[_0xa76eb3(0xfa)]('success'),'errors':_0x3e2407['flash']('errors'),'role':_0x47f7da,'profile':_0x2fb89f,'alldata':_0x299e95,'categories':_0x452dcf,'brands':_0x3e4956,'master_shop':_0x2e0579,'units':_0x147c77,'secondunit':_0x22762a,'find_data':_0x78edd9,'language':_0x3bb0ba});}catch(_0x1a909d){console[_0xa76eb3(0x10e)](_0x1a909d);}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x121),auth,upload[a0_0x38c1b6(0x154)](a0_0x38c1b6(0x165)),async(_0x1324fd,_0x1eadfd)=>{const _0x6b3833=a0_0x38c1b6;try{console[_0x6b3833(0x10e)](_0x6b3833(0x143));const _0x5dc019=_0x1324fd[_0x6b3833(0xd3)]['id'],_0x177b07=await product['findById'](_0x5dc019),{image:_0x4ac23a,name:_0x294157,category:_0x233b60,brand:_0x2f3b35,sku:_0x346ef0,unit:_0x29a0eb,alertquantity:_0xe8be23,product_code:_0x442065,warehouse:_0x434ccd,primary_ItemCode:_0x5746dc,second_ItemCode:_0xe3979,second_unit:_0x11064f,maxPerUnit:_0x186196,MaxPerProduct:_0x59cde0,prod_catdata:_0x241679}=_0x1324fd[_0x6b3833(0xdc)];_0x1324fd[_0x6b3833(0x135)]&&(_0x177b07[_0x6b3833(0x165)]=_0x1324fd['file']['filename']);_0x177b07[_0x6b3833(0x150)]=_0x294157,_0x177b07[_0x6b3833(0x13d)]=_0x233b60,_0x177b07[_0x6b3833(0x158)]=_0x2f3b35,_0x177b07[_0x6b3833(0xdb)]=_0x346ef0,_0x177b07[_0x6b3833(0x186)]=_0x29a0eb,_0x177b07[_0x6b3833(0xf0)]=_0xe8be23,_0x177b07['product_code']=_0x442065,_0x177b07[_0x6b3833(0x15d)]=_0x434ccd,_0x177b07[_0x6b3833(0x16e)]=_0x5746dc,_0x177b07['secondary_code']=_0xe3979,_0x177b07['secondary_unit']=_0x11064f,_0x177b07[_0x6b3833(0x14e)]=_0x59cde0,_0x177b07[_0x6b3833(0x183)]=_0x186196,_0x177b07[_0x6b3833(0x11e)]=_0x241679;const _0x26a71b=await _0x177b07[_0x6b3833(0x18c)]();console[_0x6b3833(0x10e)](_0x6b3833(0x109),_0x177b07),_0x1324fd[_0x6b3833(0xfa)](_0x6b3833(0x187),_0x6b3833(0x11c)),_0x1eadfd[_0x6b3833(0x17e)](_0x6b3833(0xd6));}catch(_0x14fe4e){console['log'](_0x14fe4e);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x102),auth,async(_0x22b49b,_0x412fc7)=>{const _0x4d1e67=a0_0x38c1b6;try{const {username:_0x3b1cf2,email:_0x1b8bf7,role:_0x1c3859}=_0x22b49b[_0x4d1e67(0xe6)],_0x5ef528=_0x22b49b[_0x4d1e67(0xe6)],_0x49b917=await profile['findOne']({'email':_0x5ef528[_0x4d1e67(0x167)]}),_0x23984c=await master_shop[_0x4d1e67(0xe0)]();console['log']('barcode\x20Product\x20master',_0x23984c);const _0x544c30=_0x22b49b[_0x4d1e67(0xd3)]['id'],_0x537670=await product[_0x4d1e67(0x139)](_0x544c30);console['log'](_0x4d1e67(0x118),_0x537670);if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x100))var _0x385605=users[_0x4d1e67(0x14d)];else{if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x163))var _0x385605=users['Hindi'];else{if(_0x23984c[0x0]['language']==_0x4d1e67(0x136))var _0x385605=users[_0x4d1e67(0x136)];else{if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x10b))var _0x385605=users[_0x4d1e67(0x10b)];else{if(_0x23984c[0x0]['language']=='French')var _0x385605=users['French'];else{if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x133))var _0x385605=users[_0x4d1e67(0x132)];else{if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x14c))var _0x385605=users[_0x4d1e67(0x14c)];else{if(_0x23984c[0x0][_0x4d1e67(0xe2)]==_0x4d1e67(0x110))var _0x385605=users[_0x4d1e67(0xfe)];}}}}}}}_0x412fc7[_0x4d1e67(0x16f)](_0x4d1e67(0x16a),{'success':_0x22b49b[_0x4d1e67(0xfa)](_0x4d1e67(0x187)),'errors':_0x22b49b[_0x4d1e67(0xfa)]('errors'),'role':_0x5ef528,'profile':_0x49b917,'alldata':_0x537670,'master_shop':_0x23984c,'language':_0x385605});}catch(_0x2f4792){console[_0x4d1e67(0x10e)](_0x2f4792);}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x119),auth,async(_0x7e2f71,_0x1f7346)=>{const _0x52b75e=a0_0x38c1b6;try{const _0xcce106=new excelJS[(_0x52b75e(0xcf))](),_0x68b3ce=_0xcce106[_0x52b75e(0x159)](_0x52b75e(0x10c));return _0x68b3ce['columns']=[{'header':_0x52b75e(0x155),'key':_0x52b75e(0x126),'width':0xa},{'header':_0x52b75e(0x15e),'key':'PBrands','width':0xa},{'header':'Units','key':_0x52b75e(0x106),'width':0xa},{'header':'Secondary_Units','key':_0x52b75e(0xd9),'width':0xa},{'header':_0x52b75e(0x173),'key':_0x52b75e(0x176),'width':0xa},{'header':_0x52b75e(0x13c),'key':'ProductCode','width':0xa},{'header':_0x52b75e(0x17f),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0x52b75e(0x130),'key':_0x52b75e(0x108),'width':0xa},{'header':_0x52b75e(0x162),'key':_0x52b75e(0xd1),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x52b75e(0xe7),'key':_0x52b75e(0x12d),'width':0xa}],_0x1f7346[_0x52b75e(0xea)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x1f7346[_0x52b75e(0xea)](_0x52b75e(0x105),_0x52b75e(0xd2)),_0xcce106[_0x52b75e(0x111)][_0x52b75e(0x14b)](_0x1f7346)[_0x52b75e(0x11b)](()=>{const _0x181112=_0x52b75e;_0x1f7346[_0x181112(0xf9)](0xc8);});}catch(_0x5ec2af){_0x1f7346['status'](0x190)[_0x52b75e(0xda)](_0x5ec2af);}});const storage1=multer[a0_0x38c1b6(0x145)]({'destination':(_0x2cedfa,_0x2d0ff2,_0x104bd7)=>{const _0x3c37e0=a0_0x38c1b6;_0x104bd7(null,_0x3c37e0(0xe9));},'filename':(_0x2a3d43,_0x28bb3e,_0x1e166a)=>{const _0xf7e990=a0_0x38c1b6;_0x1e166a(null,Date[_0xf7e990(0x177)]()+_0x28bb3e['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x148),auth,uploadMigrate[a0_0x38c1b6(0x154)](a0_0x38c1b6(0x104)),async(_0x4fbd37,_0x49a0a6)=>{const _0x3af303=a0_0x38c1b6,_0x1a9063=_0x4fbd37[_0x3af303(0x135)][_0x3af303(0x117)],_0x57ff41=await xlsx[_0x3af303(0x179)](_0x3af303(0x146)+_0x1a9063);let _0x2bf430=_0x57ff41['SheetNames'],_0x192e99=xlsx[_0x3af303(0x180)]['sheet_to_json'](_0x57ff41['Sheets'][_0x2bf430[0x0]]);for(const _0x547309 of _0x192e99){const _0x50fb88=_0x547309['Product_Name'],_0x474628=_0x547309[_0x3af303(0x15e)],_0x38af6d=_0x547309[_0x3af303(0x17d)],_0x4878ff=_0x547309[_0x3af303(0x116)],_0x503b72=_0x547309['Product_Code'],_0x4030cb=_0x547309['Category'],_0x120f63=_0x547309['Alert_QTY'],_0x1c2bfc=_0x547309[_0x3af303(0x13c)],_0xfd0ea0=_0x547309['Secondary_Code'],_0x1be467=_0x547309[_0x3af303(0x122)],_0x459482=_0x547309[_0x3af303(0x173)],_0x33acae=_0x547309[_0x3af303(0xe7)];try{let _0x1ed24f=await categories[_0x3af303(0xef)]({'name':_0x4030cb});if(!_0x1ed24f){const _0x2394ae=new categories({'name':_0x4030cb,'products':'0'});_0x1ed24f=await _0x2394ae[_0x3af303(0x18c)]();}let _0x48ca71=await brands[_0x3af303(0xef)]({'name':_0x474628});if(!_0x48ca71){const _0x946aba=new brands({'name':_0x474628,'products':'0'});_0x48ca71=await _0x946aba[_0x3af303(0x18c)]();}let _0x4c0ae2=await units[_0x3af303(0xef)]({'name':_0x38af6d,'secondary_unit':_0x4878ff});if(!_0x4c0ae2){const _0x4e4b1d=new units({'name':_0x38af6d,'secondary_unit':_0x4878ff,'products':'0'});_0x4c0ae2=await _0x4e4b1d['save']();}const _0x4fd339=await product[_0x3af303(0xe0)]({'name':_0x50fb88,'category':_0x1ed24f['name'],'brand':_0x48ca71['name'],'secondary_unit':_0x4c0ae2['secondary_unit'],'product_code':_0x503b72});console[_0x3af303(0x10e)](_0x4fd339[_0x3af303(0x112)]+_0x3af303(0xf6)+_0x1ed24f[_0x3af303(0x150)]+_0x3af303(0xf6)+_0x48ca71[_0x3af303(0x150)]+_0x3af303(0xf6)+_0x4c0ae2[_0x3af303(0xd0)]+_0x3af303(0xf6)+_0x503b72+_0x3af303(0xf6)+_0x50fb88);if(_0x4fd339[_0x3af303(0x112)]===0x0){const _0x30fdbc=new product({'image':_0x3af303(0x171),'name':_0x50fb88,'category':_0x1ed24f['name'],'brand':_0x48ca71[_0x3af303(0x150)],'unit':_0x4c0ae2[_0x3af303(0x150)],'alertquantity':_0x120f63,'product_code':_0x503b72,'secondary_unit':_0x4c0ae2[_0x3af303(0xd0)],'primary_code':_0x1c2bfc,'secondary_code':_0xfd0ea0,'maxStocks':_0x1be467,'maxProdPerUnit':_0x459482,'product_category':_0x33acae}),_0x287ede=await _0x30fdbc['save']();_0x1ed24f['products']=parseInt(_0x1ed24f[_0x3af303(0x13a)])+0x1,await _0x1ed24f[_0x3af303(0x18c)](),_0x48ca71['products']=parseInt(_0x48ca71[_0x3af303(0x13a)])+0x1,await _0x48ca71[_0x3af303(0x18c)](),_0x4c0ae2['products']=parseInt(_0x4c0ae2[_0x3af303(0x13a)])+0x1,await _0x4c0ae2['save'](),_0x4fbd37['flash']('success',_0x50fb88+_0x3af303(0xd4));}else{console[_0x3af303(0x10e)](_0x4fd339[0x0]);const _0x4d2425=_0x4fd339[0x0];_0x4d2425['category']=_0x1ed24f[_0x3af303(0x150)],_0x4d2425['brand']=_0x48ca71[_0x3af303(0x150)],_0x4d2425[_0x3af303(0x186)]=_0x4c0ae2[_0x3af303(0x150)],_0x4d2425['alertquantity']=_0x120f63,_0x4d2425[_0x3af303(0x11d)]=_0x503b72,_0x4d2425[_0x3af303(0xd0)]=_0x4c0ae2[_0x3af303(0xd0)],_0x4d2425['primary_code']=_0x1c2bfc,_0x4d2425[_0x3af303(0x149)]=_0xfd0ea0,_0x4d2425[_0x3af303(0x14e)]=_0x1be467,_0x4d2425['maxProdPerUnit']=_0x459482,_0x4d2425[_0x3af303(0x11e)]=_0x33acae;const _0x4f49aa=await _0x4d2425[_0x3af303(0x18c)]();_0x4fbd37[_0x3af303(0xfa)](_0x3af303(0x187),_0x4f49aa[_0x3af303(0x150)]+_0x3af303(0x156));}}catch(_0x2dacc7){_0x49a0a6['status'](0x1f4)['json']({'proderror':_0x2dacc7['message'],'aproduct':_0x50fb88});}}_0x49a0a6[_0x3af303(0x17e)](_0x3af303(0xd6));}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0xec),auth,async(_0x2f0217,_0x6c7d1b)=>{const _0xc8a61a=a0_0x38c1b6;try{console['log'](_0x2f0217[_0xc8a61a(0xdc)]);const {data_cateory:_0x5e021d,datachoose:_0x1ab7e6}=_0x2f0217['body'];var _0x5c6dab;if(_0x1ab7e6==_0xc8a61a(0x14a))_0x5c6dab=await product['aggregate']([{'$group':{'_id':'$product_category'}}]);else{if(_0x1ab7e6==_0xc8a61a(0x178))_0x5c6dab=await product[_0xc8a61a(0x16c)]([{'$match':{'product_category':_0x5e021d}},{'$group':{'_id':_0xc8a61a(0xf1)}}]);else _0x1ab7e6==_0xc8a61a(0xe5)&&(_0x5c6dab=await product[_0xc8a61a(0x16c)]([{'$match':{'product_category':_0x5e021d}},{'$group':{'_id':_0xc8a61a(0x168)}}]));}_0x6c7d1b[_0xc8a61a(0x129)](_0x5c6dab);}catch(_0x533978){_0x6c7d1b[_0xc8a61a(0x129)]({'message':_0x533978[_0xc8a61a(0x15c)]});}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x15f),auth,async(_0x4c0eca,_0x1401b7)=>{const _0x131bfc=a0_0x38c1b6;try{const {data_choosing:_0x4c1574,data_selected:_0x10c5d7}=_0x4c0eca[_0x131bfc(0xdc)];var _0x17cbfb;if(_0x4c1574==_0x131bfc(0x14a))_0x17cbfb=await product[_0x131bfc(0x16c)]([{'$match':{'product_category':_0x10c5d7}}]);else{if(_0x4c1574=='brands')_0x17cbfb=await product[_0x131bfc(0x16c)]([{'$match':{'brand':_0x10c5d7}}]);else _0x4c1574==_0x131bfc(0xe5)&&(_0x17cbfb=await product[_0x131bfc(0x16c)]([{'$match':{'category':_0x10c5d7}}]));}_0x1401b7[_0x131bfc(0x129)](_0x17cbfb);}catch(_0x4d44fb){_0x1401b7[_0x131bfc(0x129)]({'message':_0x4d44fb['message']});}}),router[a0_0x38c1b6(0x161)](a0_0x38c1b6(0x17a),auth,async(_0x22dd91,_0x1d3c42)=>{const _0x281753=a0_0x38c1b6,_0xa15807=_0x22dd91['user'],_0x30a726=await profile[_0x281753(0xef)]({'email':_0xa15807[_0x281753(0x167)]}),_0x1df0f7=await master_shop[_0x281753(0xe0)](),_0x338d03=await product[_0x281753(0xe0)]();if(_0x1df0f7[0x0][_0x281753(0xe2)]==_0x281753(0x100))var _0x4f6f2c=users[_0x281753(0x14d)];else{if(_0x1df0f7[0x0]['language']=='Hindi')var _0x4f6f2c=users[_0x281753(0x163)];else{if(_0x1df0f7[0x0]['language']==_0x281753(0x136))var _0x4f6f2c=users[_0x281753(0x136)];else{if(_0x1df0f7[0x0]['language']==_0x281753(0x10b))var _0x4f6f2c=users[_0x281753(0x10b)];else{if(_0x1df0f7[0x0][_0x281753(0xe2)]==_0x281753(0x175))var _0x4f6f2c=users[_0x281753(0x175)];else{if(_0x1df0f7[0x0]['language']==_0x281753(0x133))var _0x4f6f2c=users['Portuguese'];else{if(_0x1df0f7[0x0][_0x281753(0xe2)]=='Chinese')var _0x4f6f2c=users['Chinese'];else{if(_0x1df0f7[0x0][_0x281753(0xe2)]==_0x281753(0x110))var _0x4f6f2c=users[_0x281753(0xfe)];}}}}}}}_0x1d3c42[_0x281753(0x16f)]('product_barcode_products',{'success':_0x22dd91['flash'](_0x281753(0x187)),'errors':_0x22dd91['flash']('errors'),'role':_0xa15807,'profile':_0x30a726,'products':_0x338d03,'master_shop':_0x1df0f7,'language':_0x4f6f2c});}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x188),auth,async(_0x3d9b12,_0x206263)=>{const _0x2b5a48=a0_0x38c1b6,_0x406473=await product[_0x2b5a48(0xe0)]();_0x206263[_0x2b5a48(0x129)]({'data':_0x406473});}),router['post']('/barcode_filter',auth,async(_0x40cb14,_0x403f6e)=>{const _0x3cad1d=a0_0x38c1b6;try{const {dataProdCat:_0x2e96de,dataProdIdentity:_0x9871b2}=_0x40cb14['body'];var _0x43e4b0;switch(_0x2e96de){case'fg':switch(_0x9871b2){case _0x3cad1d(0x15e):_0x43e4b0=await product[_0x3cad1d(0x16c)]([{'$match':{'product_category':_0x3cad1d(0xe1)}},{'$group':{'_id':_0x3cad1d(0xf1)}},{'$project':{'brand':_0x3cad1d(0x166)}}]);break;case _0x3cad1d(0x130):_0x43e4b0=await product[_0x3cad1d(0x16c)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x3cad1d(0x168)}},{'$project':{'category':_0x3cad1d(0x166)}}]);break;}break;case'rm':switch(_0x9871b2){case _0x3cad1d(0x15e):_0x43e4b0=await product[_0x3cad1d(0x16c)]([{'$match':{'product_category':_0x3cad1d(0x144)}},{'$group':{'_id':_0x3cad1d(0xf1)}},{'$project':{'brand':'$_id'}}]);break;case _0x3cad1d(0x130):_0x43e4b0=await product[_0x3cad1d(0x16c)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x3cad1d(0x168)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x403f6e[_0x3cad1d(0x129)](_0x43e4b0);}catch(_0x3ae64a){_0x403f6e[_0x3cad1d(0x129)]({'message':_0x3ae64a['message']});}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x147),auth,async(_0x2e6b1b,_0x585185)=>{const _0x27f2c9=a0_0x38c1b6;try{console[_0x27f2c9(0x10e)](_0x2e6b1b[_0x27f2c9(0xdc)]);const {prod_cat:_0x55b406,identity:_0x1097d4,valueData:_0x13f41b,typeofbarcode:_0x132449}=_0x2e6b1b[_0x27f2c9(0xdc)];let _0x51d0fe;switch(_0x55b406){case'fg':if(_0x1097d4==_0x27f2c9(0x15e))_0x51d0fe=await product[_0x27f2c9(0x16c)]([{'$match':{'product_category':_0x27f2c9(0xe1),'brand':_0x13f41b}}]);else _0x1097d4==_0x27f2c9(0x130)&&(_0x51d0fe=await product[_0x27f2c9(0x16c)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x13f41b}}]));break;case'rm':if(_0x1097d4==_0x27f2c9(0x15e))_0x51d0fe=await product['aggregate']([{'$match':{'product_category':_0x27f2c9(0x144),'brand':_0x13f41b}}]);else _0x1097d4==_0x27f2c9(0x130)&&(_0x51d0fe=await product[_0x27f2c9(0x16c)]([{'$match':{'product_category':_0x27f2c9(0x144),'category':_0x13f41b}}]));break;}const _0x59149c=_0x561321=>_0x561321*0x48,_0x2f6209={'width':0x3,'height':0x1},_0xbf35ae=new PDFDocument({'margin':_0x59149c(0.75),'size':[_0x59149c(_0x2f6209[_0x27f2c9(0x153)]),_0x59149c(_0x2f6209[_0x27f2c9(0x182)])],'bufferPages':!![]}),_0x4f5887=_0x51d0fe['length'];for(let _0x1c52f3=0x0;_0x1c52f3<=_0x4f5887;_0x1c52f3++){if(_0x1c52f3!=_0x4f5887){const _0x3da108=_0x51d0fe[_0x1c52f3][_0x27f2c9(0x150)],_0x92e2b3=_0x51d0fe[_0x1c52f3]['primary_code'],_0x4714eb=_0x51d0fe[_0x1c52f3][_0x27f2c9(0x149)],_0xde5718=_0x51d0fe[_0x1c52f3]['product_code'];var _0x164f61;switch(_0x132449){case'1':_0x164f61=_0x92e2b3;break;case'2':_0x164f61=_0x4714eb;break;case'3':_0x164f61=_0xde5718;break;}const _0x3a8b56={'width':0xd2,'height':0x64},_0x4b776e={'width':_0x59149c(_0x2f6209['width']),'height':_0x59149c(_0x2f6209[_0x27f2c9(0x182)])},_0x4c7e07=new Canvas();JsBarcode(_0x4c7e07,_0x164f61,{'format':_0x27f2c9(0x18a),'height':_0x3a8b56[_0x27f2c9(0x182)],'displayValue':!![],'text':_0x164f61});const _0x80bf83=_0x4c7e07[_0x27f2c9(0xf7)](),_0x428c3b=_0x4b776e['width']/_0x3a8b56[_0x27f2c9(0x153)],_0x37bdc8=_0x4b776e[_0x27f2c9(0x182)]/_0x3a8b56[_0x27f2c9(0x182)],_0x7edad5=Math[_0x27f2c9(0x13f)](_0x428c3b,_0x37bdc8),_0xefd3a8=_0x3a8b56[_0x27f2c9(0x153)]*_0x7edad5,_0x49ea89=_0x3a8b56[_0x27f2c9(0x182)]*_0x7edad5,_0x31fdec=(_0x4b776e[_0x27f2c9(0x153)]-_0xefd3a8)/0x2,_0x5cc70e=(_0x4b776e[_0x27f2c9(0x182)]-_0x49ea89)/0x2;_0xbf35ae['image'](_0x80bf83,_0x31fdec,_0x5cc70e,{'width':_0xefd3a8,'height':_0x49ea89}),_0x1c52f3!=_0x4f5887&&_0xbf35ae[_0x27f2c9(0xe4)]();}}const _0x5965e2=[];_0xbf35ae['on']('data',_0x5965e2[_0x27f2c9(0x12a)][_0x27f2c9(0xe3)](_0x5965e2)),_0xbf35ae['on'](_0x27f2c9(0x15b),()=>{const _0x1e3487=_0x27f2c9,_0x4b63c1=Buffer[_0x1e3487(0x14f)](_0x5965e2),_0x552177=_0x4b63c1['toString'](_0x1e3487(0x169));_0x585185[_0x1e3487(0x129)]({'pdfContent':_0x552177});}),_0xbf35ae['end']();}catch(_0xc5df3d){_0x585185[_0x27f2c9(0x129)]({'message':_0xc5df3d['message']});}}),router[a0_0x38c1b6(0x107)]('/print_barcode_filter_search/',auth,async(_0x5240cc,_0xeb8a0f)=>{const _0x31c0ed=a0_0x38c1b6;try{console[_0x31c0ed(0x10e)](_0x5240cc[_0x31c0ed(0xdc)]);const {prod_cat:_0x294b19,identity:_0x405fe6,valueData:_0x2889ce}=_0x5240cc['body'];let _0x41d8a6;switch(_0x294b19){case'fg':if(_0x405fe6==_0x31c0ed(0x15e))_0x41d8a6=await product[_0x31c0ed(0x16c)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x2889ce}}]);else _0x405fe6==_0x31c0ed(0x130)&&(_0x41d8a6=await product[_0x31c0ed(0x16c)]([{'$match':{'product_category':_0x31c0ed(0xe1),'category':_0x2889ce}}]));break;case'rm':if(_0x405fe6==_0x31c0ed(0x15e))_0x41d8a6=await product[_0x31c0ed(0x16c)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x2889ce}}]);else _0x405fe6=='Category'&&(_0x41d8a6=await product[_0x31c0ed(0x16c)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x2889ce}}]));break;}_0xeb8a0f[_0x31c0ed(0x129)](_0x41d8a6);}catch(_0x2d35a2){_0xeb8a0f['json']({'message':_0x2d35a2[_0x31c0ed(0x15c)]});}}),router[a0_0x38c1b6(0x107)](a0_0x38c1b6(0x18d),auth,async(_0x4afb7b,_0x45a9ec)=>{const _0x537f2e=a0_0x38c1b6;try{const _0x1926fb=_0x4afb7b[_0x537f2e(0xd3)]['id'],{copies:_0x596eac,typeofbarcode:_0x15e579}=_0x4afb7b[_0x537f2e(0xdc)];var _0x190b7e=await product['findById'](_0x1926fb);const _0x379dbc=_0x1cf9e1=>_0x1cf9e1*0x48,_0x45897c={'width':0x3,'height':0x1},_0x2f2f66=new PDFDocument({'margin':_0x379dbc(0.75),'size':[_0x379dbc(_0x45897c[_0x537f2e(0x153)]),_0x379dbc(_0x45897c[_0x537f2e(0x182)])],'bufferPages':!![]}),_0xc4060f=_0x596eac,_0x3de0de=_0x190b7e[_0x537f2e(0x150)],_0x2ed2bd=_0x190b7e['primary_code'],_0x507bb0=_0x190b7e[_0x537f2e(0x149)],_0x5f0e74=_0x190b7e[_0x537f2e(0x11d)];let _0x28cae2;switch(_0x15e579){case'1':_0x28cae2=_0x2ed2bd;break;case'2':_0x28cae2=_0x507bb0;break;case'3':_0x28cae2=_0x5f0e74;break;}const _0x4fa92c={'width':0xd2,'height':0x64},_0x46e7b9={'width':_0x379dbc(_0x45897c[_0x537f2e(0x153)]),'height':_0x379dbc(_0x45897c[_0x537f2e(0x182)])};for(let _0x416942=0x1;_0x416942<=_0xc4060f;_0x416942++){const _0x2799f1=new Canvas();JsBarcode(_0x2799f1,_0x28cae2,{'format':'CODE128','height':_0x4fa92c[_0x537f2e(0x182)],'displayValue':!![],'text':_0x28cae2});const _0x4a62f7=_0x2799f1[_0x537f2e(0xf7)](),_0x477c23=_0x46e7b9[_0x537f2e(0x153)]/_0x4fa92c['width'],_0x390f35=_0x46e7b9[_0x537f2e(0x182)]/_0x4fa92c[_0x537f2e(0x182)],_0x4ca05f=Math[_0x537f2e(0x13f)](_0x477c23,_0x390f35),_0x257624=_0x4fa92c['width']*_0x4ca05f,_0x3f70f2=_0x4fa92c['height']*_0x4ca05f,_0x4c6bba=(_0x46e7b9[_0x537f2e(0x153)]-_0x257624)/0x2,_0x4deef2=(_0x46e7b9[_0x537f2e(0x182)]-_0x3f70f2)/0x2;_0x2f2f66[_0x537f2e(0x165)](_0x4a62f7,_0x4c6bba,_0x4deef2,{'width':_0x257624,'height':_0x3f70f2}),_0x416942!=_0xc4060f&&_0x2f2f66[_0x537f2e(0xe4)]();}const _0x2e71bb=[];_0x2f2f66['on'](_0x537f2e(0xdd),_0x2e71bb[_0x537f2e(0x12a)]['bind'](_0x2e71bb)),_0x2f2f66['on'](_0x537f2e(0x15b),()=>{const _0xb87b27=_0x537f2e,_0x3013c7=Buffer['concat'](_0x2e71bb),_0x38f7c1=_0x3013c7[_0xb87b27(0x113)](_0xb87b27(0x169));_0x45a9ec['json']({'pdfContent':_0x38f7c1});}),_0x2f2f66[_0x537f2e(0x15b)]();}catch(_0x2b27b1){_0x45a9ec[_0x537f2e(0x129)]({'message':_0x2b27b1[_0x537f2e(0x15c)]});}}),module['exports']=router;