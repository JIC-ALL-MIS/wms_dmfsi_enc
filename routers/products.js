const a0_0x20309f=a0_0x5e62;function a0_0x4d50(){const _0x13daa9=['Units','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/brands/:id','save','toBuffer','/print_barcode_filter/','addWorksheet','$product_details','Products\x20master','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic\x20(ae)','9PJCpMf','unit\x20data\x20update\x20successfully','Raw\x20Materials','Maximum_Stocks','18MCMNUE','barcode\x20user_id','stock','../models/all_models','../public/language/languages.json','PCat','Alert_QTY','hello','/print_barcode','$product_stock','edit_product','diskStorage','/products/units','readFile','width','base64','$product_category','products','brand','length','end','English\x20(US)','Hindi','success','$category','Content-Disposition','/print_barcode_single/:id','render','Products_category','user','exports','/categories/:id','alertquantity','maxStocks','/print_barcode_filter_search/','concat','send','PName','\x20<>\x20','Product_Name','$secondary_unit','master','20acdzmS','aggregate','data','originalname','log','Spanish','columns','Workbook','status','multer','findByIdAndUpdate','numeric','get','file','Brands','addPage','Secondary_Units','Products\x20find_data','/brands','/units/:id','\x20Edit\x20Successfully','language','xlsx','product\x20edit','ProductCode','email','now','Secondary_Code','unit','/products/brands','Portuguese\x20(BR)','barcode\x20Product\x20master','/products/categories','public/Migration/','map','write','/barcode_filter','flash','find','/view/:id','/products/view','product\x20add\x20successfully','Prod_Cat','Products\x20warehouse_data','42328946BrkXKJ','MaxperUnits','forEach','express','1760730FZQUqL','findByIdAndDelete','findById','/brands/delete/:id','Content-Type','English','$brand','message','categories\x20data\x20delete\x20successfully','brands','then','units','Enabled','426350bZgMzC','min','/products_import_migrate_file','single','product_code','/barcode_data','1659664xqFIpz','Portuguese','defaultProduct.avif','product_category','PAlQty','bind','migrate_product_fule','/view/add_products','$_id','body','sku','PUnits','1880955RxIBnj','category','filename','CODE128','Arabic','utils','881314vqQrxq','categories_edit','\x20categories\x20is\x20add\x20successfully','Chinese','image','toString','pdfkit-table','695679FhmyUN','\x20unit\x20is\x20add\x20successfully','redirect','warehouse','height','errors','categories','product\x20update\x20successfully','brand\x20data\x20delete\x20successfully','$product_docs','\x20added\x20successfully','brand\x20data\x20update\x20successfully','/products_export_migrate_file','max_number_per_units','secondary_unit','post','edit\x20Product\x20master','Primary_Code','$product_details.product_name','unit\x20data\x20delete\x20successfully','attachment;\x20filename=Product_Migration_File.xlsx','/units','push','Product_Code','Category','French','product_stock','product_barcode','SheetNames','Finished\x20Goods','json','/categories','German','product_barcode_products','findOne','primary_code','secondary_code','categ','params','2kxUlXG','name','product_docs','maxProdPerUnit','$product_details.product_stock','setHeader'];a0_0x4d50=function(){return _0x13daa9;};return a0_0x4d50();}(function(_0x8d1688,_0x357d74){const _0x512837=a0_0x5e62,_0x2c1666=_0x8d1688();while(!![]){try{const _0x374412=parseInt(_0x512837(0x1f6))/0x1*(-parseInt(_0x512837(0x23c))/0x2)+parseInt(_0x512837(0x215))/0x3*(-parseInt(_0x512837(0x1b9))/0x4)+-parseInt(_0x512837(0x208))/0x5*(parseInt(_0x512837(0x18f))/0x6)+-parseInt(_0x512837(0x20e))/0x7+parseInt(_0x512837(0x1fc))/0x8*(-parseInt(_0x512837(0x24d))/0x9)+-parseInt(_0x512837(0x1e9))/0xa+parseInt(_0x512837(0x1e5))/0xb;if(_0x374412===_0x357d74)break;else _0x2c1666['push'](_0x2c1666['shift']());}catch(_0xba368a){_0x2c1666['push'](_0x2c1666['shift']());}}}(a0_0x4d50,0x98689));const express=require(a0_0x20309f(0x1e8)),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require(a0_0x20309f(0x1c2)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x20309f(0x192)),auth=require('../middleware/auth'),users=require(a0_0x20309f(0x193)),excelJS=require('exceljs'),xlsx=require(a0_0x20309f(0x1cf)),JsBarcode=require('jsbarcode'),{Canvas}=require('canvas'),PDFDocument=require(a0_0x20309f(0x214));router[a0_0x20309f(0x1c5)](a0_0x20309f(0x234),auth,async(_0x1101c7,_0x135660)=>{const _0x32395b=a0_0x20309f;try{const {username:_0xa988b3,email:_0x400a92,role:_0x3028bc}=_0x1101c7[_0x32395b(0x1ac)],_0x133a9f=_0x1101c7[_0x32395b(0x1ac)],_0x318905=await profile[_0x32395b(0x237)]({'email':_0x133a9f['email']}),_0x2da0f2=await master_shop[_0x32395b(0x1df)]();console[_0x32395b(0x1bd)](_0x32395b(0x1b8),_0x2da0f2);const _0x1ff91b=await categories[_0x32395b(0x1df)]();if(_0x2da0f2[0x0]['language']=='English\x20(US)')var _0x44af38=users[_0x32395b(0x1ee)];else{if(_0x2da0f2[0x0][_0x32395b(0x1ce)]=='Hindi')var _0x44af38=users[_0x32395b(0x1a5)];else{if(_0x2da0f2[0x0][_0x32395b(0x1ce)]==_0x32395b(0x235))var _0x44af38=users[_0x32395b(0x235)];else{if(_0x2da0f2[0x0][_0x32395b(0x1ce)]==_0x32395b(0x1be))var _0x44af38=users[_0x32395b(0x1be)];else{if(_0x2da0f2[0x0]['language']==_0x32395b(0x22e))var _0x44af38=users['French'];else{if(_0x2da0f2[0x0][_0x32395b(0x1ce)]==_0x32395b(0x1d7))var _0x44af38=users[_0x32395b(0x1fd)];else{if(_0x2da0f2[0x0]['language']==_0x32395b(0x211))var _0x44af38=users['Chinese'];else{if(_0x2da0f2[0x0][_0x32395b(0x1ce)]==_0x32395b(0x24c))var _0x44af38=users[_0x32395b(0x20c)];}}}}}}}_0x135660[_0x32395b(0x1aa)]('categories',{'success':_0x1101c7[_0x32395b(0x1de)](_0x32395b(0x1a6)),'errors':_0x1101c7[_0x32395b(0x1de)]('errors'),'role':_0x133a9f,'profile':_0x318905,'user':_0x1ff91b,'master_shop':_0x2da0f2,'language':_0x44af38});}catch(_0x3f1be1){console['log'](_0x3f1be1);}}),router[a0_0x20309f(0x224)]('/categories',auth,async(_0x416ef3,_0x205480)=>{const _0x4b0150=a0_0x20309f;try{const {name:_0x559626,products:_0x4c4051}=_0x416ef3[_0x4b0150(0x205)],_0x14b753=new categories({'name':_0x559626,'products':_0x4c4051}),_0x4a67a2=await categories[_0x4b0150(0x237)]({'name':_0x559626});_0x4a67a2?_0x416ef3['flash'](_0x4b0150(0x21a),_0x559626+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x416ef3[_0x4b0150(0x1de)](_0x4b0150(0x1a6),_0x559626+_0x4b0150(0x210));const _0x1ffea1=await _0x14b753['save']();_0x205480['redirect']('/products/categories');}catch(_0x12c515){console[_0x4b0150(0x1bd)](_0x12c515);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x1ae),auth,async(_0x12cc39,_0x3385bf)=>{const _0xa24c2e=a0_0x20309f;try{const {username:_0x1ab1a8,email:_0x1906bb,role:_0x29c8aa}=_0x12cc39[_0xa24c2e(0x1ac)],_0x132fb5=_0x12cc39['user'],_0x4a5943=await profile[_0xa24c2e(0x237)]({'email':_0x132fb5[_0xa24c2e(0x1d2)]}),_0xa11d8b=await master_shop[_0xa24c2e(0x1df)]();console[_0xa24c2e(0x1bd)]('master',_0xa11d8b);const _0x5b226d=_0x12cc39[_0xa24c2e(0x23b)]['id'];console[_0xa24c2e(0x1bd)](_0x5b226d);const _0x541464=await categories[_0xa24c2e(0x1eb)](_0x5b226d);if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x1a4))var _0x39f8ea=users[_0xa24c2e(0x1ee)];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x1a5))var _0x39f8ea=users[_0xa24c2e(0x1a5)];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x235))var _0x39f8ea=users[_0xa24c2e(0x235)];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x1be))var _0x39f8ea=users[_0xa24c2e(0x1be)];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x22e))var _0x39f8ea=users[_0xa24c2e(0x22e)];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x1d7))var _0x39f8ea=users['Portuguese'];else{if(_0xa11d8b[0x0][_0xa24c2e(0x1ce)]==_0xa24c2e(0x211))var _0x39f8ea=users[_0xa24c2e(0x211)];else{if(_0xa11d8b[0x0]['language']==_0xa24c2e(0x24c))var _0x39f8ea=users[_0xa24c2e(0x20c)];}}}}}}}_0x3385bf[_0xa24c2e(0x1aa)](_0xa24c2e(0x21b),{'success':_0x12cc39['flash'](_0xa24c2e(0x1a6)),'errors':_0x12cc39[_0xa24c2e(0x1de)](_0xa24c2e(0x21a)),'role':_0x132fb5,'profile':_0x4a5943,'master_shop':_0xa11d8b,'user':_0x541464,'language':_0x39f8ea});}catch(_0x2c46c4){console[_0xa24c2e(0x1bd)](_0x2c46c4);}}),router['post'](a0_0x20309f(0x1ae),auth,async(_0x1e7ba6,_0x1b3984)=>{const _0x599a07=a0_0x20309f;try{const _0x56c481=_0x1e7ba6[_0x599a07(0x23b)]['id'],_0x32f811=await categories[_0x599a07(0x1c3)](_0x56c481,_0x1e7ba6[_0x599a07(0x205)]);_0x1e7ba6[_0x599a07(0x1de)](_0x599a07(0x1a6),''+users[_0x599a07(0x20f)]),_0x1b3984[_0x599a07(0x217)](_0x599a07(0x1d9));}catch(_0x19bf50){console['log'](_0x19bf50);}}),router[a0_0x20309f(0x1c5)]('/categories/delete/:id',auth,async(_0x1b4b28,_0x85c56f)=>{const _0x3b2add=a0_0x20309f;try{const _0x16a0fc=_0x1b4b28['params']['id'],_0x5f1c58=await categories[_0x3b2add(0x1ea)](_0x16a0fc);_0x1b4b28['flash']('success',_0x3b2add(0x1f1)),_0x85c56f[_0x3b2add(0x217)](_0x3b2add(0x1d9));}catch(_0xa77f6c){console[_0x3b2add(0x1bd)](_0xa77f6c);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x1cb),auth,async(_0x59a3d8,_0x12834b)=>{const _0x1cc8a4=a0_0x20309f;try{const {username:_0x2f1a7a,email:_0x27bf8f,role:_0x14addc}=_0x59a3d8[_0x1cc8a4(0x1ac)],_0x52f562=_0x59a3d8[_0x1cc8a4(0x1ac)],_0x2b4673=await profile['findOne']({'email':_0x52f562['email']}),_0x360231=await master_shop[_0x1cc8a4(0x1df)]();console[_0x1cc8a4(0x1bd)](_0x1cc8a4(0x1b8),_0x360231);const _0xe42ff6=await brands[_0x1cc8a4(0x1df)]();if(_0x360231[0x0][_0x1cc8a4(0x1ce)]==_0x1cc8a4(0x1a4))var _0x45b45b=users['English'];else{if(_0x360231[0x0]['language']==_0x1cc8a4(0x1a5))var _0x45b45b=users[_0x1cc8a4(0x1a5)];else{if(_0x360231[0x0]['language']==_0x1cc8a4(0x235))var _0x45b45b=users[_0x1cc8a4(0x235)];else{if(_0x360231[0x0][_0x1cc8a4(0x1ce)]=='Spanish')var _0x45b45b=users[_0x1cc8a4(0x1be)];else{if(_0x360231[0x0][_0x1cc8a4(0x1ce)]=='French')var _0x45b45b=users[_0x1cc8a4(0x22e)];else{if(_0x360231[0x0][_0x1cc8a4(0x1ce)]=='Portuguese\x20(BR)')var _0x45b45b=users[_0x1cc8a4(0x1fd)];else{if(_0x360231[0x0][_0x1cc8a4(0x1ce)]==_0x1cc8a4(0x211))var _0x45b45b=users['Chinese'];else{if(_0x360231[0x0][_0x1cc8a4(0x1ce)]==_0x1cc8a4(0x24c))var _0x45b45b=users[_0x1cc8a4(0x20c)];}}}}}}}_0x12834b[_0x1cc8a4(0x1aa)](_0x1cc8a4(0x1f2),{'success':_0x59a3d8['flash'](_0x1cc8a4(0x1a6)),'errors':_0x59a3d8[_0x1cc8a4(0x1de)]('errors'),'role':_0x52f562,'profile':_0x2b4673,'master_shop':_0x360231,'user':_0xe42ff6,'language':_0x45b45b});}catch(_0x1c867e){console['log'](_0x1c867e);}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1cb),auth,async(_0x4db9bc,_0x522811)=>{const _0x14939a=a0_0x20309f;try{const {name:_0x1eae15,products:_0x45d66a}=_0x4db9bc[_0x14939a(0x205)],_0x294956=new brands({'name':_0x1eae15,'products':_0x45d66a}),_0x3bcb52=await brands[_0x14939a(0x237)]({'name':_0x1eae15});_0x3bcb52?_0x4db9bc[_0x14939a(0x1de)](_0x14939a(0x21a),_0x1eae15+_0x14939a(0x24b)):_0x4db9bc[_0x14939a(0x1de)]('success',_0x1eae15+'\x20brand\x20is\x20add\x20successfully');const _0x378ffd=await _0x294956[_0x14939a(0x245)]();_0x522811[_0x14939a(0x217)](_0x14939a(0x1d6));}catch(_0x2922dc){console[_0x14939a(0x1bd)](_0x2922dc);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x244),auth,async(_0x386c6c,_0x1b611d)=>{const _0x599ad5=a0_0x20309f;try{const {username:_0x97c6e0,email:_0x4cd193,role:_0x4138af}=_0x386c6c[_0x599ad5(0x1ac)],_0x347812=_0x386c6c['user'],_0x29fd74=await profile[_0x599ad5(0x237)]({'email':_0x347812[_0x599ad5(0x1d2)]}),_0x57567d=await master_shop[_0x599ad5(0x1df)]();console['log'](_0x599ad5(0x1b8),_0x57567d);const _0x572aaa=_0x386c6c['params']['id'];console['log'](_0x572aaa);const _0xd2a8d8=await brands[_0x599ad5(0x1eb)](_0x572aaa);if(_0x57567d[0x0][_0x599ad5(0x1ce)]=='English\x20(US)')var _0x3baac7=users[_0x599ad5(0x1ee)];else{if(_0x57567d[0x0]['language']==_0x599ad5(0x1a5))var _0x3baac7=users[_0x599ad5(0x1a5)];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]==_0x599ad5(0x235))var _0x3baac7=users[_0x599ad5(0x235)];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]==_0x599ad5(0x1be))var _0x3baac7=users[_0x599ad5(0x1be)];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]==_0x599ad5(0x22e))var _0x3baac7=users['French'];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]==_0x599ad5(0x1d7))var _0x3baac7=users[_0x599ad5(0x1fd)];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]==_0x599ad5(0x211))var _0x3baac7=users[_0x599ad5(0x211)];else{if(_0x57567d[0x0][_0x599ad5(0x1ce)]=='Arabic\x20(ae)')var _0x3baac7=users[_0x599ad5(0x20c)];}}}}}}}_0x1b611d[_0x599ad5(0x1aa)]('brands',{'success':_0x386c6c[_0x599ad5(0x1de)](_0x599ad5(0x1a6)),'errors':_0x386c6c['flash'](_0x599ad5(0x21a)),'role':_0x347812,'profile':_0x29fd74,'master_shop':_0x57567d,'user':_0xd2a8d8,'language':_0x3baac7});}catch(_0x3d6830){console['log'](_0x3d6830);}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x244),auth,async(_0x335583,_0x66060a)=>{const _0x195745=a0_0x20309f;try{const _0x31b590=_0x335583['params']['id'],_0x588509=await brands[_0x195745(0x1c3)](_0x31b590,_0x335583['body']);_0x335583[_0x195745(0x1de)](_0x195745(0x1a6),_0x195745(0x220)),_0x66060a[_0x195745(0x217)](_0x195745(0x1d6));}catch(_0xb0bbd2){console[_0x195745(0x1bd)](_0xb0bbd2);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x1ec),auth,async(_0x5ac44d,_0x6f54f6)=>{const _0x2811c0=a0_0x20309f;try{const _0x4c9aa1=_0x5ac44d[_0x2811c0(0x23b)]['id'],_0x2b426e=await brands['findByIdAndDelete'](_0x4c9aa1);_0x5ac44d[_0x2811c0(0x1de)](_0x2811c0(0x1a6),_0x2811c0(0x21d)),_0x6f54f6[_0x2811c0(0x217)](_0x2811c0(0x1d6));}catch(_0x468795){console[_0x2811c0(0x1bd)](_0x468795);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x22a),auth,async(_0x1e0779,_0x4e5664)=>{const _0x2300c6=a0_0x20309f;try{const {username:_0x30d45e,email:_0x13f982,role:_0x5af727}=_0x1e0779[_0x2300c6(0x1ac)],_0x6f840f=_0x1e0779['user'],_0x1bb270=await profile[_0x2300c6(0x237)]({'email':_0x6f840f[_0x2300c6(0x1d2)]}),_0x3487c0=await master_shop[_0x2300c6(0x1df)]();console['log']('master',_0x3487c0);const _0x46a73c=await units['find']();if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x1a4))var _0x663d89=users[_0x2300c6(0x1ee)];else{if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x1a5))var _0x663d89=users[_0x2300c6(0x1a5)];else{if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x235))var _0x663d89=users['German'];else{if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x1be))var _0x663d89=users[_0x2300c6(0x1be)];else{if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x22e))var _0x663d89=users[_0x2300c6(0x22e)];else{if(_0x3487c0[0x0][_0x2300c6(0x1ce)]==_0x2300c6(0x1d7))var _0x663d89=users[_0x2300c6(0x1fd)];else{if(_0x3487c0[0x0]['language']=='Chinese')var _0x663d89=users[_0x2300c6(0x211)];else{if(_0x3487c0[0x0]['language']=='Arabic\x20(ae)')var _0x663d89=users[_0x2300c6(0x20c)];}}}}}}}_0x4e5664[_0x2300c6(0x1aa)]('units',{'success':_0x1e0779[_0x2300c6(0x1de)](_0x2300c6(0x1a6)),'errors':_0x1e0779['flash'](_0x2300c6(0x21a)),'role':_0x6f840f,'profile':_0x1bb270,'master_shop':_0x3487c0,'user':_0x46a73c,'language':_0x663d89});}catch(_0x3043d4){console[_0x2300c6(0x1bd)](_0x3043d4);}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x22a),auth,async(_0x4c27f9,_0x406385)=>{const _0x5678ca=a0_0x20309f;try{const {name:_0x3943b6,secondary_unit:_0x19e5e2,products:_0x1e9c1e}=_0x4c27f9[_0x5678ca(0x205)],_0x1622b5=new units({'name':_0x3943b6,'secondary_unit':_0x19e5e2,'products':_0x1e9c1e}),_0x55b37d=await units[_0x5678ca(0x237)]({'name':_0x3943b6});_0x55b37d?_0x4c27f9[_0x5678ca(0x1de)](_0x5678ca(0x21a),_0x3943b6+_0x5678ca(0x243)):_0x4c27f9['flash'](_0x5678ca(0x1a6),_0x3943b6+_0x5678ca(0x216));const _0x322a13=await _0x1622b5['save']();_0x406385[_0x5678ca(0x217)](_0x5678ca(0x19b));}catch(_0xc52c65){console[_0x5678ca(0x1bd)](_0xc52c65);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x1cc),auth,async(_0x25dbe4,_0x82f368)=>{const _0x443976=a0_0x20309f;try{const {username:_0x70acc8,email:_0x46c0be,role:_0x1c6114}=_0x25dbe4[_0x443976(0x1ac)],_0x4cb994=_0x25dbe4[_0x443976(0x1ac)],_0x326c2a=await profile[_0x443976(0x237)]({'email':_0x4cb994['email']}),_0x344900=await master_shop[_0x443976(0x1df)]();console[_0x443976(0x1bd)]('master',_0x344900);const _0x21811d=_0x25dbe4[_0x443976(0x23b)]['id'],_0xff1de4=await units[_0x443976(0x1eb)](_0x21811d);if(_0x344900[0x0][_0x443976(0x1ce)]==_0x443976(0x1a4))var _0x11c737=users['English'];else{if(_0x344900[0x0][_0x443976(0x1ce)]=='Hindi')var _0x11c737=users[_0x443976(0x1a5)];else{if(_0x344900[0x0][_0x443976(0x1ce)]==_0x443976(0x235))var _0x11c737=users[_0x443976(0x235)];else{if(_0x344900[0x0]['language']=='Spanish')var _0x11c737=users['Spanish'];else{if(_0x344900[0x0]['language']==_0x443976(0x22e))var _0x11c737=users['French'];else{if(_0x344900[0x0][_0x443976(0x1ce)]=='Portuguese\x20(BR)')var _0x11c737=users['Portuguese'];else{if(_0x344900[0x0]['language']=='Chinese')var _0x11c737=users[_0x443976(0x211)];else{if(_0x344900[0x0][_0x443976(0x1ce)]==_0x443976(0x24c))var _0x11c737=users[_0x443976(0x20c)];}}}}}}}_0x82f368[_0x443976(0x1aa)](_0x443976(0x1f4),{'success':_0x25dbe4['flash'](_0x443976(0x1a6)),'errors':_0x25dbe4[_0x443976(0x1de)](_0x443976(0x21a)),'role':_0x4cb994,'profile':_0x326c2a,'master_shop':_0x344900,'user':_0xff1de4,'language':_0x11c737});}catch(_0x3865ec){console[_0x443976(0x1bd)](_0x3865ec);}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1cc),auth,async(_0x499698,_0x10315b)=>{const _0x471fa9=a0_0x20309f;try{const _0x1edc15=_0x499698[_0x471fa9(0x23b)]['id'],_0x1a7c03=await units[_0x471fa9(0x1c3)](_0x1edc15,_0x499698[_0x471fa9(0x205)]);_0x499698[_0x471fa9(0x1de)]('success',_0x471fa9(0x24e)),_0x10315b['redirect'](_0x471fa9(0x19b));}catch(_0x445b67){console['log'](_0x445b67);}}),router[a0_0x20309f(0x1c5)]('/units/delete/:id',auth,async(_0x36d639,_0xfc336d)=>{const _0x2dceaa=a0_0x20309f;try{const _0x268df1=_0x36d639[_0x2dceaa(0x23b)]['id'],_0x33a179=await units['findByIdAndDelete'](_0x268df1);_0x36d639[_0x2dceaa(0x1de)](_0x2dceaa(0x1a6),_0x2dceaa(0x228)),_0xfc336d[_0x2dceaa(0x217)]('/products/units');}catch(_0x572148){console[_0x2dceaa(0x1bd)](_0x572148);}});const storage=multer['diskStorage']({'destination':(_0x2bf02d,_0x2293f4,_0x372936)=>{_0x372936(null,'public/upload');},'filename':(_0x2e5526,_0x435fc0,_0x211ca2)=>{const _0x31dfa5=a0_0x20309f;_0x211ca2(null,Date[_0x31dfa5(0x1d3)]()+_0x435fc0[_0x31dfa5(0x1bc)]);}}),upload=multer({'storage':storage});router[a0_0x20309f(0x1c5)]('/view',auth,async(_0x5c41d5,_0x274970)=>{const _0x179b28=a0_0x20309f;try{const {username:_0x158b71,email:_0x2b9659,role:_0x258971}=_0x5c41d5[_0x179b28(0x1ac)],_0x301955=_0x5c41d5[_0x179b28(0x1ac)],_0x2db39b=await profile[_0x179b28(0x237)]({'email':_0x301955[_0x179b28(0x1d2)]}),_0x132c4c={'year':_0x179b28(0x1c4),'month':'long','day':_0x179b28(0x1c4)},_0x4170e9=await master_shop[_0x179b28(0x1df)]();console[_0x179b28(0x1bd)](_0x179b28(0x24a),_0x4170e9);const _0x15996f=await product['find']();console[_0x179b28(0x1bd)](_0x179b28(0x1ca),_0x15996f);const _0x5c94b5=await warehouse[_0x179b28(0x1ba)]([{'$unwind':_0x179b28(0x249)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':'name','as':_0x179b28(0x23e)}},{'$unwind':_0x179b28(0x21e)},{'$project':{'product_name':_0x179b28(0x227),'product_stock':_0x179b28(0x240)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x179b28(0x198)}}}]);console['log'](_0x179b28(0x1e4),_0x5c94b5),_0x5c94b5[_0x179b28(0x1e7)](_0x1f9b3f=>{const _0x1a21f3=_0x179b28,_0x30f180=_0x15996f[_0x1a21f3(0x1db)](_0x409dc6=>{const _0x23316e=_0x1a21f3;_0x409dc6[_0x23316e(0x23d)]==_0x1f9b3f['_id']&&(_0x409dc6['stock']=parseInt(_0x409dc6[_0x23316e(0x191)])+parseInt(_0x1f9b3f[_0x23316e(0x22f)]));});}),console[_0x179b28(0x1bd)](_0x179b28(0x1ca),_0x15996f);if(_0x4170e9[0x0][_0x179b28(0x1ce)]==_0x179b28(0x1a4))var _0x364305=users[_0x179b28(0x1ee)];else{if(_0x4170e9[0x0][_0x179b28(0x1ce)]=='Hindi')var _0x364305=users['Hindi'];else{if(_0x4170e9[0x0][_0x179b28(0x1ce)]==_0x179b28(0x235))var _0x364305=users[_0x179b28(0x235)];else{if(_0x4170e9[0x0][_0x179b28(0x1ce)]==_0x179b28(0x1be))var _0x364305=users[_0x179b28(0x1be)];else{if(_0x4170e9[0x0]['language']=='French')var _0x364305=users[_0x179b28(0x22e)];else{if(_0x4170e9[0x0]['language']=='Portuguese\x20(BR)')var _0x364305=users[_0x179b28(0x1fd)];else{if(_0x4170e9[0x0][_0x179b28(0x1ce)]==_0x179b28(0x211))var _0x364305=users[_0x179b28(0x211)];else{if(_0x4170e9[0x0][_0x179b28(0x1ce)]==_0x179b28(0x24c))var _0x364305=users[_0x179b28(0x20c)];}}}}}}}_0x274970['render'](_0x179b28(0x1a0),{'success':_0x5c41d5[_0x179b28(0x1de)](_0x179b28(0x1a6)),'errors':_0x5c41d5[_0x179b28(0x1de)](_0x179b28(0x21a)),'alldata':_0x15996f,'profile':_0x2db39b,'master_shop':_0x4170e9,'role':_0x301955,'product_stock':_0x5c94b5,'language':_0x364305});}catch(_0x5372ab){console[_0x179b28(0x1bd)](_0x5372ab);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x203),auth,async(_0x4e2493,_0x251297)=>{const _0x98434a=a0_0x20309f;try{const {username:_0x287c6d,email:_0x3c2e34,role:_0x47f401}=_0x4e2493[_0x98434a(0x1ac)],_0x4ba810=_0x4e2493[_0x98434a(0x1ac)],_0x25540c=await profile['findOne']({'email':_0x4ba810[_0x98434a(0x1d2)]}),_0x288328=await master_shop[_0x98434a(0x1df)]();console[_0x98434a(0x1bd)](_0x98434a(0x1b8),_0x288328);const _0x55e96c=await categories[_0x98434a(0x1df)]({}),_0xbfbca3=await brands[_0x98434a(0x1df)]({}),_0xbee161=await units[_0x98434a(0x1df)]({}),_0x53ce8f=await warehouse[_0x98434a(0x1df)]({'status':_0x98434a(0x1f5)});if(_0x288328[0x0][_0x98434a(0x1ce)]=='English\x20(US)')var _0x5b4c14=users['English'];else{if(_0x288328[0x0][_0x98434a(0x1ce)]==_0x98434a(0x1a5))var _0x5b4c14=users[_0x98434a(0x1a5)];else{if(_0x288328[0x0][_0x98434a(0x1ce)]==_0x98434a(0x235))var _0x5b4c14=users[_0x98434a(0x235)];else{if(_0x288328[0x0]['language']==_0x98434a(0x1be))var _0x5b4c14=users[_0x98434a(0x1be)];else{if(_0x288328[0x0]['language']==_0x98434a(0x22e))var _0x5b4c14=users[_0x98434a(0x22e)];else{if(_0x288328[0x0]['language']==_0x98434a(0x1d7))var _0x5b4c14=users[_0x98434a(0x1fd)];else{if(_0x288328[0x0][_0x98434a(0x1ce)]==_0x98434a(0x211))var _0x5b4c14=users['Chinese'];else{if(_0x288328[0x0][_0x98434a(0x1ce)]=='Arabic\x20(ae)')var _0x5b4c14=users['Arabic'];}}}}}}}_0x251297[_0x98434a(0x1aa)]('add_product',{'success':_0x4e2493['flash'](_0x98434a(0x1a6)),'errors':_0x4e2493[_0x98434a(0x1de)]('errors'),'role':_0x4ba810,'profile':_0x25540c,'categories':_0x55e96c,'brands':_0xbfbca3,'master_shop':_0x288328,'units':_0xbee161,'language':_0x5b4c14,'find_data':_0x53ce8f});}catch(_0x2344e8){console['log'](_0x2344e8);}}),router['post']('/view/add_products',auth,upload[a0_0x20309f(0x1f9)](a0_0x20309f(0x212)),async(_0x2d20a7,_0x35bd4a)=>{const _0x54a984=a0_0x20309f;try{const {name:_0x558bbf,category:_0x39a424,brand:_0x237f1c,unit:_0x43d913,alertquantity:_0x11f309,stock:_0xb983dc,product_code:_0x5728ad,warehouse:_0x1dcad8,primary_ItemCode:_0x27d4d4,second_ItemCode:_0x3a28b6,second_unit:_0x42d473,maxPerUnit:_0xcc34c,MaxPerProduct:_0x36b023}=_0x2d20a7[_0x54a984(0x205)],_0xfd5398=_0x2d20a7[_0x54a984(0x1c6)]?.[_0x54a984(0x20a)]||_0x54a984(0x1fe),_0x398484=new product({'image':_0xfd5398,'name':_0x558bbf,'category':_0x39a424,'brand':_0x237f1c,'unit':_0x43d913,'alertquantity':_0x11f309,'stock':_0xb983dc,'product_code':_0x5728ad,'warehouse':_0x1dcad8,'primary_code':_0x27d4d4,'secondary_code':_0x3a28b6,'second_unit':_0x42d473,'maxStocks':_0x36b023,'maxProdPerUnit':_0xcc34c}),_0x328271=await _0x398484[_0x54a984(0x245)](),_0x1af94d=await categories['findOne']({'name':_0x39a424});_0x1af94d[_0x54a984(0x1a0)]=parseInt(_0x1af94d[_0x54a984(0x1a0)])+0x1,await _0x1af94d['save']();const _0x539ad7=await brands['findOne']({'name':_0x237f1c});_0x539ad7[_0x54a984(0x1a0)]=parseInt(_0x539ad7[_0x54a984(0x1a0)])+0x1,await _0x539ad7[_0x54a984(0x245)]();const _0x4868a4=await units[_0x54a984(0x237)]({'name':_0x43d913});_0x4868a4['products']=parseInt(_0x4868a4[_0x54a984(0x1a0)])+0x1,await _0x4868a4[_0x54a984(0x245)](),_0x2d20a7['flash']('success',_0x54a984(0x1e2)),_0x35bd4a[_0x54a984(0x217)](_0x54a984(0x1e1));}catch(_0x619363){console['log'](_0x619363);}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x1e0),auth,async(_0x14884e,_0x8f92dc)=>{const _0x56033e=a0_0x20309f;try{const {username:_0x5d3454,email:_0x39df0f,role:_0xfa5f3a}=_0x14884e[_0x56033e(0x1ac)],_0x2c2805=_0x14884e['user'],_0x283967=await profile['findOne']({'email':_0x2c2805['email']}),_0x63b22d=await master_shop[_0x56033e(0x1df)]();console[_0x56033e(0x1bd)](_0x56033e(0x225),_0x63b22d);const _0x4c0486=_0x14884e[_0x56033e(0x23b)]['id'],_0x2fef0a=await product[_0x56033e(0x1eb)](_0x4c0486),_0x27be8e=await categories[_0x56033e(0x1df)]({}),_0x157f4f=await brands[_0x56033e(0x1df)]({}),_0x1cfffe=await units[_0x56033e(0x1df)]({}),_0x42a254=await warehouse[_0x56033e(0x1df)]({'status':_0x56033e(0x1f5)}),_0x3e2de8=await units['aggregate']([{'$group':{'_id':_0x56033e(0x204),'secondaryunit':{'$first':_0x56033e(0x1b7)}}}]);if(_0x63b22d[0x0][_0x56033e(0x1ce)]=='English\x20(US)')var _0x56e457=users['English'];else{if(_0x63b22d[0x0][_0x56033e(0x1ce)]=='Hindi')var _0x56e457=users[_0x56033e(0x1a5)];else{if(_0x63b22d[0x0][_0x56033e(0x1ce)]==_0x56033e(0x235))var _0x56e457=users[_0x56033e(0x235)];else{if(_0x63b22d[0x0][_0x56033e(0x1ce)]=='Spanish')var _0x56e457=users['Spanish'];else{if(_0x63b22d[0x0]['language']==_0x56033e(0x22e))var _0x56e457=users[_0x56033e(0x22e)];else{if(_0x63b22d[0x0][_0x56033e(0x1ce)]==_0x56033e(0x1d7))var _0x56e457=users[_0x56033e(0x1fd)];else{if(_0x63b22d[0x0]['language']==_0x56033e(0x211))var _0x56e457=users[_0x56033e(0x211)];else{if(_0x63b22d[0x0][_0x56033e(0x1ce)]==_0x56033e(0x24c))var _0x56e457=users[_0x56033e(0x20c)];}}}}}}}_0x8f92dc[_0x56033e(0x1aa)](_0x56033e(0x199),{'success':_0x14884e[_0x56033e(0x1de)](_0x56033e(0x1a6)),'errors':_0x14884e[_0x56033e(0x1de)]('errors'),'role':_0x2c2805,'profile':_0x283967,'alldata':_0x2fef0a,'categories':_0x27be8e,'brands':_0x157f4f,'master_shop':_0x63b22d,'units':_0x1cfffe,'secondunit':_0x3e2de8,'find_data':_0x42a254,'language':_0x56e457});}catch(_0x138125){console[_0x56033e(0x1bd)](_0x138125);}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1e0),auth,upload['single']('image'),async(_0x1b54ab,_0x7493ce)=>{const _0x342a21=a0_0x20309f;try{console[_0x342a21(0x1bd)](_0x342a21(0x196));const _0x4846ca=_0x1b54ab['params']['id'],_0x260fd4=await product[_0x342a21(0x1eb)](_0x4846ca),{image:_0x2d7c3d,name:_0x13a148,category:_0x395277,brand:_0x11bf41,sku:_0x24e568,unit:_0x3dc42e,alertquantity:_0x59e9b6,product_code:_0x1c2fb6,warehouse:_0x184e08,primary_ItemCode:_0x12fa71,second_ItemCode:_0x3d177c,second_unit:_0x4f0cdc,maxPerUnit:_0x4a755c,MaxPerProduct:_0x21c10c,prod_catdata:_0x12d6cd}=_0x1b54ab[_0x342a21(0x205)];_0x1b54ab[_0x342a21(0x1c6)]&&(_0x260fd4['image']=_0x1b54ab[_0x342a21(0x1c6)][_0x342a21(0x20a)]);_0x260fd4[_0x342a21(0x23d)]=_0x13a148,_0x260fd4[_0x342a21(0x209)]=_0x395277,_0x260fd4[_0x342a21(0x1a1)]=_0x11bf41,_0x260fd4[_0x342a21(0x206)]=_0x24e568,_0x260fd4[_0x342a21(0x1d5)]=_0x3dc42e,_0x260fd4[_0x342a21(0x1af)]=_0x59e9b6,_0x260fd4[_0x342a21(0x1fa)]=_0x1c2fb6,_0x260fd4[_0x342a21(0x218)]=_0x184e08,_0x260fd4[_0x342a21(0x238)]=_0x12fa71,_0x260fd4[_0x342a21(0x239)]=_0x3d177c,_0x260fd4['secondary_unit']=_0x4f0cdc,_0x260fd4['maxStocks']=_0x21c10c,_0x260fd4[_0x342a21(0x23f)]=_0x4a755c,_0x260fd4['product_category']=_0x12d6cd;const _0x3bcf33=await _0x260fd4['save']();console['log'](_0x342a21(0x1d0),_0x260fd4),_0x1b54ab[_0x342a21(0x1de)](_0x342a21(0x1a6),_0x342a21(0x21c)),_0x7493ce[_0x342a21(0x217)]('/products/view');}catch(_0x268500){console[_0x342a21(0x1bd)](_0x268500);}}),router['get']('/barcode/:id',auth,async(_0xfe6f,_0x314160)=>{const _0x51867a=a0_0x20309f;try{const {username:_0x27925f,email:_0x1f0088,role:_0x4646cf}=_0xfe6f[_0x51867a(0x1ac)],_0x218d2c=_0xfe6f[_0x51867a(0x1ac)],_0x3c8b50=await profile[_0x51867a(0x237)]({'email':_0x218d2c[_0x51867a(0x1d2)]}),_0x2e63c8=await master_shop['find']();console[_0x51867a(0x1bd)](_0x51867a(0x1d8),_0x2e63c8);const _0x48b0dd=_0xfe6f[_0x51867a(0x23b)]['id'],_0x7be81c=await product['findById'](_0x48b0dd);console[_0x51867a(0x1bd)](_0x51867a(0x190),_0x7be81c);if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x1a4))var _0x2bb07d=users[_0x51867a(0x1ee)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x1a5))var _0x2bb07d=users[_0x51867a(0x1a5)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x235))var _0x2bb07d=users[_0x51867a(0x235)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]=='Spanish')var _0x2bb07d=users[_0x51867a(0x1be)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x22e))var _0x2bb07d=users[_0x51867a(0x22e)];else{if(_0x2e63c8[0x0]['language']==_0x51867a(0x1d7))var _0x2bb07d=users[_0x51867a(0x1fd)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x211))var _0x2bb07d=users[_0x51867a(0x211)];else{if(_0x2e63c8[0x0][_0x51867a(0x1ce)]==_0x51867a(0x24c))var _0x2bb07d=users[_0x51867a(0x20c)];}}}}}}}_0x314160[_0x51867a(0x1aa)](_0x51867a(0x230),{'success':_0xfe6f[_0x51867a(0x1de)](_0x51867a(0x1a6)),'errors':_0xfe6f[_0x51867a(0x1de)](_0x51867a(0x21a)),'role':_0x218d2c,'profile':_0x3c8b50,'alldata':_0x7be81c,'master_shop':_0x2e63c8,'language':_0x2bb07d});}catch(_0xfd05fd){console[_0x51867a(0x1bd)](_0xfd05fd);}}),router['get'](a0_0x20309f(0x221),auth,async(_0x4a8b93,_0xa7aeda)=>{const _0x33391a=a0_0x20309f;try{const _0xc7500b=new excelJS[(_0x33391a(0x1c0))](),_0x5cab88=_0xc7500b[_0x33391a(0x248)]('Products');return _0x5cab88[_0x33391a(0x1bf)]=[{'header':_0x33391a(0x1b6),'key':_0x33391a(0x1b4),'width':0xa},{'header':_0x33391a(0x1c7),'key':'PBrands','width':0xa},{'header':'Units','key':_0x33391a(0x207),'width':0xa},{'header':_0x33391a(0x1c9),'key':'PSecondaryUnits','width':0xa},{'header':_0x33391a(0x222),'key':_0x33391a(0x1e6),'width':0xa},{'header':_0x33391a(0x226),'key':_0x33391a(0x1d1),'width':0xa},{'header':_0x33391a(0x1d4),'key':_0x33391a(0x1d1),'width':0xa},{'header':_0x33391a(0x22c),'key':_0x33391a(0x1d1),'width':0xa},{'header':_0x33391a(0x22d),'key':_0x33391a(0x194),'width':0xa},{'header':'Alert_QTY','key':_0x33391a(0x200),'width':0xa},{'header':_0x33391a(0x250),'key':'PAlQty','width':0xa},{'header':_0x33391a(0x1ab),'key':_0x33391a(0x1e3),'width':0xa}],_0xa7aeda[_0x33391a(0x241)](_0x33391a(0x1ed),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0xa7aeda[_0x33391a(0x241)](_0x33391a(0x1a8),_0x33391a(0x229)),_0xc7500b[_0x33391a(0x1cf)][_0x33391a(0x1dc)](_0xa7aeda)[_0x33391a(0x1f3)](()=>{const _0x11afe1=_0x33391a;_0xa7aeda[_0x11afe1(0x1c1)](0xc8);});}catch(_0x405071){_0xa7aeda[_0x33391a(0x1c1)](0x190)[_0x33391a(0x1b3)](_0x405071);}});const storage1=multer[a0_0x20309f(0x19a)]({'destination':(_0x40216c,_0x188f54,_0x5bd093)=>{_0x5bd093(null,'public/Migration');},'filename':(_0x3e5d60,_0x36f754,_0x4ccea7)=>{const _0x1f6bd7=a0_0x20309f;_0x4ccea7(null,Date['now']()+_0x36f754[_0x1f6bd7(0x1bc)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x5e62(_0x308422,_0xc0ed5b){const _0x4d500f=a0_0x4d50();return a0_0x5e62=function(_0x5e627f,_0x3c9eb2){_0x5e627f=_0x5e627f-0x18f;let _0x182014=_0x4d500f[_0x5e627f];return _0x182014;},a0_0x5e62(_0x308422,_0xc0ed5b);}router[a0_0x20309f(0x224)](a0_0x20309f(0x1f8),auth,uploadMigrate[a0_0x20309f(0x1f9)](a0_0x20309f(0x202)),async(_0x9a028c,_0xef725d)=>{const _0x4c8fbb=a0_0x20309f,_0x3b03cc=_0x9a028c[_0x4c8fbb(0x1c6)][_0x4c8fbb(0x20a)],_0x35f8f9=await xlsx[_0x4c8fbb(0x19c)](_0x4c8fbb(0x1da)+_0x3b03cc);let _0x3d575d=_0x35f8f9[_0x4c8fbb(0x231)],_0x44e0b9=xlsx[_0x4c8fbb(0x20d)]['sheet_to_json'](_0x35f8f9['Sheets'][_0x3d575d[0x0]]);for(const _0xca2906 of _0x44e0b9){const _0x21d652=_0xca2906[_0x4c8fbb(0x1b6)],_0x3a5386=_0xca2906[_0x4c8fbb(0x1c7)],_0x3b350a=_0xca2906[_0x4c8fbb(0x242)],_0x2b95fe=_0xca2906[_0x4c8fbb(0x1c9)],_0x507a45=_0xca2906['Product_Code'],_0x265eaf=_0xca2906[_0x4c8fbb(0x22d)],_0x5e7c5e=_0xca2906[_0x4c8fbb(0x195)],_0x1db52a=_0xca2906['Primary_Code'],_0x16980e=_0xca2906[_0x4c8fbb(0x1d4)],_0x4858cf=_0xca2906[_0x4c8fbb(0x250)],_0x131720=_0xca2906['max_number_per_units'],_0x7dede0=_0xca2906['Products_category'];try{let _0x1724cd=await categories['findOne']({'name':_0x265eaf});if(!_0x1724cd){const _0x291373=new categories({'name':_0x265eaf,'products':'0'});_0x1724cd=await _0x291373['save']();}let _0x1d87d0=await brands[_0x4c8fbb(0x237)]({'name':_0x3a5386});if(!_0x1d87d0){const _0x2dbf54=new brands({'name':_0x3a5386,'products':'0'});_0x1d87d0=await _0x2dbf54[_0x4c8fbb(0x245)]();}let _0x26f14d=await units[_0x4c8fbb(0x237)]({'name':_0x3b350a,'secondary_unit':_0x2b95fe});if(!_0x26f14d){const _0xd6d284=new units({'name':_0x3b350a,'secondary_unit':_0x2b95fe,'products':'0'});_0x26f14d=await _0xd6d284[_0x4c8fbb(0x245)]();}const _0x3bd342=await product[_0x4c8fbb(0x1df)]({'name':_0x21d652,'category':_0x1724cd[_0x4c8fbb(0x23d)],'brand':_0x1d87d0[_0x4c8fbb(0x23d)],'secondary_unit':_0x26f14d['secondary_unit'],'product_code':_0x507a45});console['log'](_0x3bd342[_0x4c8fbb(0x1a2)]+_0x4c8fbb(0x1b5)+_0x1724cd[_0x4c8fbb(0x23d)]+_0x4c8fbb(0x1b5)+_0x1d87d0[_0x4c8fbb(0x23d)]+_0x4c8fbb(0x1b5)+_0x26f14d['secondary_unit']+_0x4c8fbb(0x1b5)+_0x507a45+_0x4c8fbb(0x1b5)+_0x21d652);if(_0x3bd342[_0x4c8fbb(0x1a2)]===0x0){const _0x376b84=new product({'image':_0x4c8fbb(0x1fe),'name':_0x21d652,'category':_0x1724cd[_0x4c8fbb(0x23d)],'brand':_0x1d87d0['name'],'unit':_0x26f14d[_0x4c8fbb(0x23d)],'alertquantity':_0x5e7c5e,'product_code':_0x507a45,'secondary_unit':_0x26f14d[_0x4c8fbb(0x223)],'primary_code':_0x1db52a,'secondary_code':_0x16980e,'maxStocks':_0x4858cf,'maxProdPerUnit':_0x131720,'product_category':_0x7dede0}),_0x41c5c5=await _0x376b84['save']();_0x1724cd['products']=parseInt(_0x1724cd[_0x4c8fbb(0x1a0)])+0x1,await _0x1724cd[_0x4c8fbb(0x245)](),_0x1d87d0[_0x4c8fbb(0x1a0)]=parseInt(_0x1d87d0[_0x4c8fbb(0x1a0)])+0x1,await _0x1d87d0['save'](),_0x26f14d[_0x4c8fbb(0x1a0)]=parseInt(_0x26f14d[_0x4c8fbb(0x1a0)])+0x1,await _0x26f14d['save'](),_0x9a028c['flash']('success',_0x21d652+_0x4c8fbb(0x21f));}else{console['log'](_0x3bd342[0x0]);const _0x5c0ff3=_0x3bd342[0x0];_0x5c0ff3[_0x4c8fbb(0x209)]=_0x1724cd['name'],_0x5c0ff3[_0x4c8fbb(0x1a1)]=_0x1d87d0['name'],_0x5c0ff3['unit']=_0x26f14d[_0x4c8fbb(0x23d)],_0x5c0ff3[_0x4c8fbb(0x1af)]=_0x5e7c5e,_0x5c0ff3['product_code']=_0x507a45,_0x5c0ff3[_0x4c8fbb(0x223)]=_0x26f14d[_0x4c8fbb(0x223)],_0x5c0ff3[_0x4c8fbb(0x238)]=_0x1db52a,_0x5c0ff3[_0x4c8fbb(0x239)]=_0x16980e,_0x5c0ff3[_0x4c8fbb(0x1b0)]=_0x4858cf,_0x5c0ff3['maxProdPerUnit']=_0x131720,_0x5c0ff3[_0x4c8fbb(0x1ff)]=_0x7dede0;const _0x5645e9=await _0x5c0ff3['save']();_0x9a028c[_0x4c8fbb(0x1de)](_0x4c8fbb(0x1a6),_0x5645e9['name']+_0x4c8fbb(0x1cd));}}catch(_0xde9673){_0xef725d[_0x4c8fbb(0x1c1)](0x1f4)['json']({'proderror':_0xde9673[_0x4c8fbb(0x1f0)],'aproduct':_0x21d652});}}_0xef725d[_0x4c8fbb(0x217)](_0x4c8fbb(0x1e1));}),router[a0_0x20309f(0x224)]('/select_data',auth,async(_0x1315a0,_0x119b85)=>{const _0x4de53a=a0_0x20309f;try{console[_0x4de53a(0x1bd)](_0x1315a0[_0x4de53a(0x205)]);const {data_cateory:_0x3ed7bd,datachoose:_0x28fdf8}=_0x1315a0[_0x4de53a(0x205)];var _0x43fdc8;if(_0x28fdf8=='prod_categ')_0x43fdc8=await product[_0x4de53a(0x1ba)]([{'$group':{'_id':_0x4de53a(0x19f)}}]);else{if(_0x28fdf8==_0x4de53a(0x1f2))_0x43fdc8=await product[_0x4de53a(0x1ba)]([{'$match':{'product_category':_0x3ed7bd}},{'$group':{'_id':_0x4de53a(0x1ef)}}]);else _0x28fdf8==_0x4de53a(0x23a)&&(_0x43fdc8=await product[_0x4de53a(0x1ba)]([{'$match':{'product_category':_0x3ed7bd}},{'$group':{'_id':_0x4de53a(0x1a7)}}]));}_0x119b85['json'](_0x43fdc8);}catch(_0x703274){_0x119b85[_0x4de53a(0x233)]({'message':_0x703274[_0x4de53a(0x1f0)]});}}),router['post']('/filter_product',auth,async(_0x276969,_0x31d179)=>{const _0x5cc303=a0_0x20309f;try{const {data_choosing:_0x19145e,data_selected:_0x490ece}=_0x276969[_0x5cc303(0x205)];var _0x34b794;if(_0x19145e=='prod_categ')_0x34b794=await product['aggregate']([{'$match':{'product_category':_0x490ece}}]);else{if(_0x19145e==_0x5cc303(0x1f2))_0x34b794=await product['aggregate']([{'$match':{'brand':_0x490ece}}]);else _0x19145e==_0x5cc303(0x23a)&&(_0x34b794=await product['aggregate']([{'$match':{'category':_0x490ece}}]));}_0x31d179[_0x5cc303(0x233)](_0x34b794);}catch(_0x517ee9){_0x31d179['json']({'message':_0x517ee9['message']});}}),router[a0_0x20309f(0x1c5)](a0_0x20309f(0x197),auth,async(_0x42dea1,_0x4575da)=>{const _0xcdb976=a0_0x20309f,_0x107f95=_0x42dea1[_0xcdb976(0x1ac)],_0xae4f72=await profile[_0xcdb976(0x237)]({'email':_0x107f95[_0xcdb976(0x1d2)]}),_0x1991a2=await master_shop['find'](),_0x2fb0c8=await product[_0xcdb976(0x1df)]();if(_0x1991a2[0x0][_0xcdb976(0x1ce)]==_0xcdb976(0x1a4))var _0x23405d=users[_0xcdb976(0x1ee)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]=='Hindi')var _0x23405d=users[_0xcdb976(0x1a5)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]=='German')var _0x23405d=users[_0xcdb976(0x235)];else{if(_0x1991a2[0x0]['language']==_0xcdb976(0x1be))var _0x23405d=users[_0xcdb976(0x1be)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]==_0xcdb976(0x22e))var _0x23405d=users[_0xcdb976(0x22e)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]==_0xcdb976(0x1d7))var _0x23405d=users[_0xcdb976(0x1fd)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]==_0xcdb976(0x211))var _0x23405d=users[_0xcdb976(0x211)];else{if(_0x1991a2[0x0][_0xcdb976(0x1ce)]==_0xcdb976(0x24c))var _0x23405d=users[_0xcdb976(0x20c)];}}}}}}}_0x4575da['render'](_0xcdb976(0x236),{'success':_0x42dea1['flash']('success'),'errors':_0x42dea1[_0xcdb976(0x1de)](_0xcdb976(0x21a)),'role':_0x107f95,'profile':_0xae4f72,'products':_0x2fb0c8,'master_shop':_0x1991a2,'language':_0x23405d});}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1fb),auth,async(_0x544903,_0x5a6f2a)=>{const _0x5c0bcd=a0_0x20309f,_0x59a150=await product['find']();_0x5a6f2a[_0x5c0bcd(0x233)]({'data':_0x59a150});}),router['post'](a0_0x20309f(0x1dd),auth,async(_0x563628,_0x346b70)=>{const _0x47bc50=a0_0x20309f;try{const {dataProdCat:_0x443906,dataProdIdentity:_0x3f1d11}=_0x563628[_0x47bc50(0x205)];var _0xbb2dc4;switch(_0x443906){case'fg':switch(_0x3f1d11){case _0x47bc50(0x1c7):_0xbb2dc4=await product[_0x47bc50(0x1ba)]([{'$match':{'product_category':_0x47bc50(0x232)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x47bc50(0x204)}}]);break;case _0x47bc50(0x22d):_0xbb2dc4=await product[_0x47bc50(0x1ba)]([{'$match':{'product_category':_0x47bc50(0x232)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x47bc50(0x204)}}]);break;}break;case'rm':switch(_0x3f1d11){case _0x47bc50(0x1c7):_0xbb2dc4=await product['aggregate']([{'$match':{'product_category':_0x47bc50(0x24f)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case _0x47bc50(0x22d):_0xbb2dc4=await product['aggregate']([{'$match':{'product_category':_0x47bc50(0x24f)}},{'$group':{'_id':_0x47bc50(0x1a7)}},{'$project':{'category':_0x47bc50(0x204)}}]);break;}break;}_0x346b70[_0x47bc50(0x233)](_0xbb2dc4);}catch(_0x10557b){_0x346b70[_0x47bc50(0x233)]({'message':_0x10557b['message']});}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x247),auth,async(_0x681b27,_0x1745e6)=>{const _0x185cc7=a0_0x20309f;try{console[_0x185cc7(0x1bd)](_0x681b27[_0x185cc7(0x205)]);const {prod_cat:_0x1e02e0,identity:_0x4afea7,valueData:_0x3ae907,typeofbarcode:_0x190fe0}=_0x681b27['body'];let _0x28e46f;switch(_0x1e02e0){case'fg':if(_0x4afea7==_0x185cc7(0x1c7))_0x28e46f=await product['aggregate']([{'$match':{'product_category':_0x185cc7(0x232),'brand':_0x3ae907}}]);else _0x4afea7=='Category'&&(_0x28e46f=await product[_0x185cc7(0x1ba)]([{'$match':{'product_category':_0x185cc7(0x232),'category':_0x3ae907}}]));break;case'rm':if(_0x4afea7==_0x185cc7(0x1c7))_0x28e46f=await product[_0x185cc7(0x1ba)]([{'$match':{'product_category':_0x185cc7(0x24f),'brand':_0x3ae907}}]);else _0x4afea7=='Category'&&(_0x28e46f=await product[_0x185cc7(0x1ba)]([{'$match':{'product_category':_0x185cc7(0x24f),'category':_0x3ae907}}]));break;}const _0x1c1aee=_0x367bc6=>_0x367bc6*0x48,_0x18b666={'width':0x3,'height':0x1},_0x198dd=new PDFDocument({'margin':_0x1c1aee(0.75),'size':[_0x1c1aee(_0x18b666[_0x185cc7(0x19d)]),_0x1c1aee(_0x18b666[_0x185cc7(0x219)])],'bufferPages':!![]}),_0x1c7197=_0x28e46f[_0x185cc7(0x1a2)];for(let _0x5717e3=0x0;_0x5717e3<=_0x1c7197;_0x5717e3++){if(_0x5717e3!=_0x1c7197){const _0x3c3898=_0x28e46f[_0x5717e3][_0x185cc7(0x23d)],_0x51f95b=_0x28e46f[_0x5717e3][_0x185cc7(0x238)],_0x191afa=_0x28e46f[_0x5717e3][_0x185cc7(0x239)],_0x140f8e=_0x28e46f[_0x5717e3][_0x185cc7(0x1fa)];var _0xa8f015;switch(_0x190fe0){case'1':_0xa8f015=_0x51f95b;break;case'2':_0xa8f015=_0x191afa;break;case'3':_0xa8f015=_0x140f8e;break;}const _0x556805={'width':0xd2,'height':0x64},_0x33c591={'width':_0x1c1aee(_0x18b666[_0x185cc7(0x19d)]),'height':_0x1c1aee(_0x18b666[_0x185cc7(0x219)])},_0x36b7ed=new Canvas();JsBarcode(_0x36b7ed,_0xa8f015,{'format':_0x185cc7(0x20b),'height':_0x556805[_0x185cc7(0x219)],'displayValue':!![],'text':_0xa8f015});const _0x30cfeb=_0x36b7ed[_0x185cc7(0x246)](),_0x4ff269=_0x33c591['width']/_0x556805[_0x185cc7(0x19d)],_0x1ffa88=_0x33c591[_0x185cc7(0x219)]/_0x556805['height'],_0x423533=Math[_0x185cc7(0x1f7)](_0x4ff269,_0x1ffa88),_0x48303d=_0x556805[_0x185cc7(0x19d)]*_0x423533,_0xd3f7a4=_0x556805['height']*_0x423533,_0x2bbace=(_0x33c591[_0x185cc7(0x19d)]-_0x48303d)/0x2,_0x298aca=(_0x33c591['height']-_0xd3f7a4)/0x2;_0x198dd['image'](_0x30cfeb,_0x2bbace,_0x298aca,{'width':_0x48303d,'height':_0xd3f7a4}),_0x5717e3!=_0x1c7197&&_0x198dd[_0x185cc7(0x1c8)]();}}const _0x4745bd=[];_0x198dd['on']('data',_0x4745bd[_0x185cc7(0x22b)][_0x185cc7(0x201)](_0x4745bd)),_0x198dd['on'](_0x185cc7(0x1a3),()=>{const _0x2ff227=_0x185cc7,_0x3cd266=Buffer[_0x2ff227(0x1b2)](_0x4745bd),_0x28f4b1=_0x3cd266[_0x2ff227(0x213)](_0x2ff227(0x19e));_0x1745e6[_0x2ff227(0x233)]({'pdfContent':_0x28f4b1});}),_0x198dd[_0x185cc7(0x1a3)]();}catch(_0x5ab1de){_0x1745e6[_0x185cc7(0x233)]({'message':_0x5ab1de['message']});}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1b1),auth,async(_0x566b59,_0xb2d18f)=>{const _0x22caf0=a0_0x20309f;try{console[_0x22caf0(0x1bd)](_0x566b59[_0x22caf0(0x205)]);const {prod_cat:_0x5362fc,identity:_0x83d500,valueData:_0x2e872d}=_0x566b59[_0x22caf0(0x205)];let _0x24245a;switch(_0x5362fc){case'fg':if(_0x83d500=='Brands')_0x24245a=await product[_0x22caf0(0x1ba)]([{'$match':{'product_category':_0x22caf0(0x232),'brand':_0x2e872d}}]);else _0x83d500==_0x22caf0(0x22d)&&(_0x24245a=await product[_0x22caf0(0x1ba)]([{'$match':{'product_category':_0x22caf0(0x232),'category':_0x2e872d}}]));break;case'rm':if(_0x83d500==_0x22caf0(0x1c7))_0x24245a=await product[_0x22caf0(0x1ba)]([{'$match':{'product_category':_0x22caf0(0x24f),'brand':_0x2e872d}}]);else _0x83d500==_0x22caf0(0x22d)&&(_0x24245a=await product[_0x22caf0(0x1ba)]([{'$match':{'product_category':_0x22caf0(0x24f),'category':_0x2e872d}}]));break;}_0xb2d18f[_0x22caf0(0x233)]({'data':_0x24245a});}catch(_0x48b9c4){_0xb2d18f['json']({'message':_0x48b9c4[_0x22caf0(0x1f0)]});}}),router[a0_0x20309f(0x224)](a0_0x20309f(0x1a9),auth,async(_0x5af8a1,_0xbb601c)=>{const _0x540e85=a0_0x20309f;try{const _0x4be4a6=_0x5af8a1[_0x540e85(0x23b)]['id'],{copies:_0x34b596,typeofbarcode:_0x47b5}=_0x5af8a1['body'];var _0xf9c0f0=await product[_0x540e85(0x1eb)](_0x4be4a6);const _0x4eb8f3=_0x47ee51=>_0x47ee51*0x48,_0x1c2482={'width':0x3,'height':0x1},_0x4d6faf=new PDFDocument({'margin':_0x4eb8f3(0.75),'size':[_0x4eb8f3(_0x1c2482[_0x540e85(0x19d)]),_0x4eb8f3(_0x1c2482[_0x540e85(0x219)])],'bufferPages':!![]}),_0x5872d2=_0x34b596,_0x19bed9=_0xf9c0f0['name'],_0x266f88=_0xf9c0f0[_0x540e85(0x238)],_0x411a70=_0xf9c0f0['secondary_code'],_0x2b23d6=_0xf9c0f0[_0x540e85(0x1fa)];let _0x4e9925;switch(_0x47b5){case'1':_0x4e9925=_0x266f88;break;case'2':_0x4e9925=_0x411a70;break;case'3':_0x4e9925=_0x2b23d6;break;}const _0x313941={'width':0xd2,'height':0x64},_0x55ee6a={'width':_0x4eb8f3(_0x1c2482[_0x540e85(0x19d)]),'height':_0x4eb8f3(_0x1c2482[_0x540e85(0x219)])};for(let _0x3af310=0x1;_0x3af310<=_0x5872d2;_0x3af310++){const _0x2c1968=new Canvas();JsBarcode(_0x2c1968,_0x4e9925,{'format':_0x540e85(0x20b),'height':_0x313941[_0x540e85(0x219)],'displayValue':!![],'text':_0x4e9925});const _0x2b8225=_0x2c1968['toBuffer'](),_0x436182=_0x55ee6a['width']/_0x313941[_0x540e85(0x19d)],_0x1f4fd5=_0x55ee6a[_0x540e85(0x219)]/_0x313941['height'],_0x1903a3=Math[_0x540e85(0x1f7)](_0x436182,_0x1f4fd5),_0x255ef5=_0x313941['width']*_0x1903a3,_0xfa1836=_0x313941[_0x540e85(0x219)]*_0x1903a3,_0x1c2850=(_0x55ee6a['width']-_0x255ef5)/0x2,_0x228cbd=(_0x55ee6a[_0x540e85(0x219)]-_0xfa1836)/0x2;_0x4d6faf[_0x540e85(0x212)](_0x2b8225,_0x1c2850,_0x228cbd,{'width':_0x255ef5,'height':_0xfa1836}),_0x3af310!=_0x5872d2&&_0x4d6faf[_0x540e85(0x1c8)]();}const _0x230a92=[];_0x4d6faf['on'](_0x540e85(0x1bb),_0x230a92[_0x540e85(0x22b)]['bind'](_0x230a92)),_0x4d6faf['on'](_0x540e85(0x1a3),()=>{const _0x2e6861=_0x540e85,_0x249251=Buffer['concat'](_0x230a92),_0x14a196=_0x249251[_0x2e6861(0x213)]('base64');_0xbb601c[_0x2e6861(0x233)]({'pdfContent':_0x14a196});}),_0x4d6faf[_0x540e85(0x1a3)]();}catch(_0x2692ac){_0xbb601c[_0x540e85(0x233)]({'message':_0x2692ac[_0x540e85(0x1f0)]});}}),module[a0_0x20309f(0x1ad)]=router;