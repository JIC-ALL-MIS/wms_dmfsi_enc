const a0_0x2d7d6d=a0_0x5e16;function a0_0x5e16(_0x36c46f,_0x5e34a2){const _0x5d5f6f=a0_0x5d5f();return a0_0x5e16=function(_0x5e16bd,_0x5a70f0){_0x5e16bd=_0x5e16bd-0xcb;let _0x5ab653=_0x5d5f6f[_0x5e16bd];return _0x5ab653;},a0_0x5e16(_0x36c46f,_0x5e34a2);}(function(_0x5f3615,_0x18e1ac){const _0x36e86e=a0_0x5e16,_0x1e6051=_0x5f3615();while(!![]){try{const _0x132512=parseInt(_0x36e86e(0xf4))/0x1*(-parseInt(_0x36e86e(0x13b))/0x2)+-parseInt(_0x36e86e(0xe2))/0x3+parseInt(_0x36e86e(0x13e))/0x4*(parseInt(_0x36e86e(0x159))/0x5)+parseInt(_0x36e86e(0x17a))/0x6*(-parseInt(_0x36e86e(0xe3))/0x7)+-parseInt(_0x36e86e(0x150))/0x8*(parseInt(_0x36e86e(0xcd))/0x9)+parseInt(_0x36e86e(0x17e))/0xa+parseInt(_0x36e86e(0x105))/0xb*(parseInt(_0x36e86e(0x129))/0xc);if(_0x132512===_0x18e1ac)break;else _0x1e6051['push'](_0x1e6051['shift']());}catch(_0xeab017){_0x1e6051['push'](_0x1e6051['shift']());}}}(a0_0x5d5f,0x8050d));const express=require(a0_0x2d7d6d(0x11e)),res=require(a0_0x2d7d6d(0x12f)),app=express(),router=express[a0_0x2d7d6d(0x167)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x2d7d6d(0x18a)),auth=require(a0_0x2d7d6d(0x116)),users=require(a0_0x2d7d6d(0xe1)),excelJS=require(a0_0x2d7d6d(0x140)),xlsx=require('xlsx'),JsBarcode=require(a0_0x2d7d6d(0x14f)),{Canvas}=require('canvas'),PDFDocument=require('pdfkit-table');router['get'](a0_0x2d7d6d(0x147),auth,async(_0x5a7a73,_0x5c5839)=>{const _0x3762a2=a0_0x2d7d6d;try{const {username:_0x2a50ac,email:_0x27390a,role:_0x3b668e}=_0x5a7a73[_0x3762a2(0x14b)],_0x24b8b8=_0x5a7a73['user'],_0x206b0e=await profile[_0x3762a2(0x12d)]({'email':_0x24b8b8[_0x3762a2(0x174)]}),_0x2b51dc=await master_shop['find']();console[_0x3762a2(0x153)]('master',_0x2b51dc);const _0x46ebdf=await categories['find']();if(_0x2b51dc[0x0][_0x3762a2(0xef)]==_0x3762a2(0xea))var _0x567e4e=users['English'];else{if(_0x2b51dc[0x0]['language']==_0x3762a2(0x10c))var _0x567e4e=users[_0x3762a2(0x10c)];else{if(_0x2b51dc[0x0][_0x3762a2(0xef)]==_0x3762a2(0xd4))var _0x567e4e=users[_0x3762a2(0xd4)];else{if(_0x2b51dc[0x0]['language']==_0x3762a2(0xfa))var _0x567e4e=users[_0x3762a2(0xfa)];else{if(_0x2b51dc[0x0]['language']==_0x3762a2(0xd0))var _0x567e4e=users[_0x3762a2(0xd0)];else{if(_0x2b51dc[0x0][_0x3762a2(0xef)]=='Portuguese\x20(BR)')var _0x567e4e=users['Portuguese'];else{if(_0x2b51dc[0x0][_0x3762a2(0xef)]=='Chinese')var _0x567e4e=users[_0x3762a2(0x188)];else{if(_0x2b51dc[0x0][_0x3762a2(0xef)]==_0x3762a2(0x15f))var _0x567e4e=users[_0x3762a2(0x123)];}}}}}}}_0x5c5839[_0x3762a2(0xda)]('categories',{'success':_0x5a7a73[_0x3762a2(0x15e)](_0x3762a2(0x17f)),'errors':_0x5a7a73[_0x3762a2(0x15e)]('errors'),'role':_0x24b8b8,'profile':_0x206b0e,'user':_0x46ebdf,'master_shop':_0x2b51dc,'language':_0x567e4e});}catch(_0x33c750){console[_0x3762a2(0x153)](_0x33c750);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x147),auth,async(_0x3174a4,_0x4683b7)=>{const _0x336c69=a0_0x2d7d6d;try{const {name:_0x1c2b31,products:_0x2908e2}=_0x3174a4[_0x336c69(0xd1)],_0x5e626b=new categories({'name':_0x1c2b31,'products':_0x2908e2}),_0x27c1a9=await categories['findOne']({'name':_0x1c2b31});_0x27c1a9?_0x3174a4['flash']('errors',_0x1c2b31+_0x336c69(0xdb)):_0x3174a4[_0x336c69(0x15e)]('success',_0x1c2b31+_0x336c69(0x146));const _0x195d77=await _0x5e626b['save']();_0x4683b7[_0x336c69(0x158)]('/products/categories');}catch(_0x2494b2){console['log'](_0x2494b2);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x103),auth,async(_0x17467b,_0x188b34)=>{const _0x44c8e1=a0_0x2d7d6d;try{const {username:_0x44bdab,email:_0x46d0ba,role:_0x5aae52}=_0x17467b[_0x44c8e1(0x14b)],_0x4804e0=_0x17467b[_0x44c8e1(0x14b)],_0x46310b=await profile[_0x44c8e1(0x12d)]({'email':_0x4804e0[_0x44c8e1(0x174)]}),_0x5a3f8b=await master_shop[_0x44c8e1(0x183)]();console[_0x44c8e1(0x153)](_0x44c8e1(0x13f),_0x5a3f8b);const _0x1b3a4b=_0x17467b[_0x44c8e1(0xf3)]['id'];console[_0x44c8e1(0x153)](_0x1b3a4b);const _0x1b1f55=await categories[_0x44c8e1(0xdc)](_0x1b3a4b);if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]==_0x44c8e1(0xea))var _0x4adb01=users[_0x44c8e1(0x16b)];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]=='Hindi')var _0x4adb01=users[_0x44c8e1(0x10c)];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]=='German')var _0x4adb01=users[_0x44c8e1(0xd4)];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]==_0x44c8e1(0xfa))var _0x4adb01=users['Spanish'];else{if(_0x5a3f8b[0x0]['language']=='French')var _0x4adb01=users['French'];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]=='Portuguese\x20(BR)')var _0x4adb01=users['Portuguese'];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]=='Chinese')var _0x4adb01=users[_0x44c8e1(0x188)];else{if(_0x5a3f8b[0x0][_0x44c8e1(0xef)]=='Arabic\x20(ae)')var _0x4adb01=users[_0x44c8e1(0x123)];}}}}}}}_0x188b34[_0x44c8e1(0xda)]('categories',{'success':_0x17467b[_0x44c8e1(0x15e)](_0x44c8e1(0x17f)),'errors':_0x17467b[_0x44c8e1(0x15e)](_0x44c8e1(0x104)),'role':_0x4804e0,'profile':_0x46310b,'master_shop':_0x5a3f8b,'user':_0x1b1f55,'language':_0x4adb01});}catch(_0x3da0c8){console[_0x44c8e1(0x153)](_0x3da0c8);}}),router['post'](a0_0x2d7d6d(0x103),auth,async(_0x639d52,_0x541e97)=>{const _0x26fcb1=a0_0x2d7d6d;try{const _0x3a7e5=_0x639d52[_0x26fcb1(0xf3)]['id'],_0x44f34d=await categories[_0x26fcb1(0xe0)](_0x3a7e5,_0x639d52[_0x26fcb1(0xd1)]);_0x639d52[_0x26fcb1(0x15e)]('success',''+users[_0x26fcb1(0x180)]),_0x541e97[_0x26fcb1(0x158)](_0x26fcb1(0x139));}catch(_0x347e94){console['log'](_0x347e94);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x11f),auth,async(_0x23aab1,_0x421057)=>{const _0x529231=a0_0x2d7d6d;try{const _0x40bcb6=_0x23aab1[_0x529231(0xf3)]['id'],_0x108ad5=await categories['findByIdAndDelete'](_0x40bcb6);_0x23aab1[_0x529231(0x15e)](_0x529231(0x17f),_0x529231(0x113)),_0x421057[_0x529231(0x158)](_0x529231(0x139));}catch(_0x533995){console[_0x529231(0x153)](_0x533995);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x16c),auth,async(_0x47258d,_0xba6419)=>{const _0x534886=a0_0x2d7d6d;try{const {username:_0x2e4265,email:_0x3b15ec,role:_0x20ef1f}=_0x47258d['user'],_0x2fed3a=_0x47258d[_0x534886(0x14b)],_0x2ccadf=await profile[_0x534886(0x12d)]({'email':_0x2fed3a['email']}),_0x4906f4=await master_shop[_0x534886(0x183)]();console[_0x534886(0x153)]('master',_0x4906f4);const _0x1c5b02=await brands[_0x534886(0x183)]();if(_0x4906f4[0x0][_0x534886(0xef)]==_0x534886(0xea))var _0x718ce7=users[_0x534886(0x16b)];else{if(_0x4906f4[0x0][_0x534886(0xef)]==_0x534886(0x10c))var _0x718ce7=users['Hindi'];else{if(_0x4906f4[0x0][_0x534886(0xef)]==_0x534886(0xd4))var _0x718ce7=users['German'];else{if(_0x4906f4[0x0][_0x534886(0xef)]==_0x534886(0xfa))var _0x718ce7=users[_0x534886(0xfa)];else{if(_0x4906f4[0x0]['language']==_0x534886(0xd0))var _0x718ce7=users[_0x534886(0xd0)];else{if(_0x4906f4[0x0]['language']==_0x534886(0x178))var _0x718ce7=users['Portuguese'];else{if(_0x4906f4[0x0][_0x534886(0xef)]==_0x534886(0x188))var _0x718ce7=users[_0x534886(0x188)];else{if(_0x4906f4[0x0]['language']==_0x534886(0x15f))var _0x718ce7=users[_0x534886(0x123)];}}}}}}}_0xba6419['render'](_0x534886(0x127),{'success':_0x47258d[_0x534886(0x15e)]('success'),'errors':_0x47258d[_0x534886(0x15e)]('errors'),'role':_0x2fed3a,'profile':_0x2ccadf,'master_shop':_0x4906f4,'user':_0x1c5b02,'language':_0x718ce7});}catch(_0x1e2150){console[_0x534886(0x153)](_0x1e2150);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x16c),auth,async(_0x500b10,_0xf5dd1b)=>{const _0x528fb4=a0_0x2d7d6d;try{const {name:_0x14dd59,products:_0x496d09}=_0x500b10[_0x528fb4(0xd1)],_0x421eeb=new brands({'name':_0x14dd59,'products':_0x496d09}),_0x12f9c1=await brands[_0x528fb4(0x12d)]({'name':_0x14dd59});_0x12f9c1?_0x500b10[_0x528fb4(0x15e)](_0x528fb4(0x104),_0x14dd59+_0x528fb4(0xec)):_0x500b10[_0x528fb4(0x15e)]('success',_0x14dd59+_0x528fb4(0x15a));const _0x40443a=await _0x421eeb[_0x528fb4(0xf9)]();_0xf5dd1b[_0x528fb4(0x158)](_0x528fb4(0x107));}catch(_0x214128){console[_0x528fb4(0x153)](_0x214128);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x134),auth,async(_0x4b2b26,_0x82520a)=>{const _0x2a195b=a0_0x2d7d6d;try{const {username:_0x57383f,email:_0x50bbe8,role:_0x40fb80}=_0x4b2b26[_0x2a195b(0x14b)],_0x35b672=_0x4b2b26[_0x2a195b(0x14b)],_0x4c25de=await profile[_0x2a195b(0x12d)]({'email':_0x35b672['email']}),_0x1dc164=await master_shop[_0x2a195b(0x183)]();console[_0x2a195b(0x153)](_0x2a195b(0x13f),_0x1dc164);const _0x46214a=_0x4b2b26['params']['id'];console[_0x2a195b(0x153)](_0x46214a);const _0x3c170a=await brands[_0x2a195b(0xdc)](_0x46214a);if(_0x1dc164[0x0][_0x2a195b(0xef)]==_0x2a195b(0xea))var _0x26b3ef=users['English'];else{if(_0x1dc164[0x0][_0x2a195b(0xef)]=='Hindi')var _0x26b3ef=users[_0x2a195b(0x10c)];else{if(_0x1dc164[0x0][_0x2a195b(0xef)]==_0x2a195b(0xd4))var _0x26b3ef=users[_0x2a195b(0xd4)];else{if(_0x1dc164[0x0]['language']==_0x2a195b(0xfa))var _0x26b3ef=users[_0x2a195b(0xfa)];else{if(_0x1dc164[0x0][_0x2a195b(0xef)]==_0x2a195b(0xd0))var _0x26b3ef=users[_0x2a195b(0xd0)];else{if(_0x1dc164[0x0]['language']==_0x2a195b(0x178))var _0x26b3ef=users['Portuguese'];else{if(_0x1dc164[0x0]['language']==_0x2a195b(0x188))var _0x26b3ef=users[_0x2a195b(0x188)];else{if(_0x1dc164[0x0][_0x2a195b(0xef)]==_0x2a195b(0x15f))var _0x26b3ef=users[_0x2a195b(0x123)];}}}}}}}_0x82520a[_0x2a195b(0xda)]('brands',{'success':_0x4b2b26[_0x2a195b(0x15e)]('success'),'errors':_0x4b2b26[_0x2a195b(0x15e)](_0x2a195b(0x104)),'role':_0x35b672,'profile':_0x4c25de,'master_shop':_0x1dc164,'user':_0x3c170a,'language':_0x26b3ef});}catch(_0x53cf29){console[_0x2a195b(0x153)](_0x53cf29);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x134),auth,async(_0x1c4f25,_0x54fe67)=>{const _0x954505=a0_0x2d7d6d;try{const _0x4fed95=_0x1c4f25[_0x954505(0xf3)]['id'],_0x2923c7=await brands['findByIdAndUpdate'](_0x4fed95,_0x1c4f25['body']);_0x1c4f25[_0x954505(0x15e)]('success',_0x954505(0x130)),_0x54fe67[_0x954505(0x158)](_0x954505(0x107));}catch(_0x59cfc6){console[_0x954505(0x153)](_0x59cfc6);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0xf7),auth,async(_0x336153,_0x34c2ca)=>{const _0x96304c=a0_0x2d7d6d;try{const _0x16915f=_0x336153[_0x96304c(0xf3)]['id'],_0x304f34=await brands[_0x96304c(0x189)](_0x16915f);_0x336153[_0x96304c(0x15e)](_0x96304c(0x17f),_0x96304c(0x148)),_0x34c2ca[_0x96304c(0x158)](_0x96304c(0x107));}catch(_0x5f3e14){console[_0x96304c(0x153)](_0x5f3e14);}}),router[a0_0x2d7d6d(0x138)]('/units',auth,async(_0x26fa69,_0x5b811d)=>{const _0x4fd03f=a0_0x2d7d6d;try{const {username:_0x15f2bf,email:_0x17a371,role:_0x2376dc}=_0x26fa69['user'],_0xd76779=_0x26fa69[_0x4fd03f(0x14b)],_0xf89209=await profile[_0x4fd03f(0x12d)]({'email':_0xd76779[_0x4fd03f(0x174)]}),_0x1a2714=await master_shop[_0x4fd03f(0x183)]();console[_0x4fd03f(0x153)](_0x4fd03f(0x13f),_0x1a2714);const _0x52a940=await units[_0x4fd03f(0x183)]();if(_0x1a2714[0x0]['language']=='English\x20(US)')var _0xa60aa0=users['English'];else{if(_0x1a2714[0x0]['language']==_0x4fd03f(0x10c))var _0xa60aa0=users[_0x4fd03f(0x10c)];else{if(_0x1a2714[0x0][_0x4fd03f(0xef)]==_0x4fd03f(0xd4))var _0xa60aa0=users[_0x4fd03f(0xd4)];else{if(_0x1a2714[0x0][_0x4fd03f(0xef)]==_0x4fd03f(0xfa))var _0xa60aa0=users[_0x4fd03f(0xfa)];else{if(_0x1a2714[0x0][_0x4fd03f(0xef)]=='French')var _0xa60aa0=users[_0x4fd03f(0xd0)];else{if(_0x1a2714[0x0]['language']==_0x4fd03f(0x178))var _0xa60aa0=users[_0x4fd03f(0x12e)];else{if(_0x1a2714[0x0][_0x4fd03f(0xef)]==_0x4fd03f(0x188))var _0xa60aa0=users[_0x4fd03f(0x188)];else{if(_0x1a2714[0x0]['language']=='Arabic\x20(ae)')var _0xa60aa0=users['Arabic'];}}}}}}}_0x5b811d[_0x4fd03f(0xda)]('units',{'success':_0x26fa69[_0x4fd03f(0x15e)]('success'),'errors':_0x26fa69[_0x4fd03f(0x15e)]('errors'),'role':_0xd76779,'profile':_0xf89209,'master_shop':_0x1a2714,'user':_0x52a940,'language':_0xa60aa0});}catch(_0x2716ef){console[_0x4fd03f(0x153)](_0x2716ef);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0xe5),auth,async(_0x58a7ed,_0x3809a0)=>{const _0x4932e9=a0_0x2d7d6d;try{const {name:_0x458201,secondary_unit:_0x3a56f2,products:_0x12402b}=_0x58a7ed['body'],_0x5e99f0=new units({'name':_0x458201,'secondary_unit':_0x3a56f2,'products':_0x12402b}),_0x48854d=await units['findOne']({'name':_0x458201});_0x48854d?_0x58a7ed[_0x4932e9(0x15e)](_0x4932e9(0x104),_0x458201+_0x4932e9(0x120)):_0x58a7ed[_0x4932e9(0x15e)](_0x4932e9(0x17f),_0x458201+_0x4932e9(0x128));const _0x197046=await _0x5e99f0[_0x4932e9(0xf9)]();_0x3809a0[_0x4932e9(0x158)]('/products/units');}catch(_0x2d9b97){console[_0x4932e9(0x153)](_0x2d9b97);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x14d),auth,async(_0x44f945,_0x1911c0)=>{const _0x5373dd=a0_0x2d7d6d;try{const {username:_0x590b0d,email:_0x104334,role:_0x55562e}=_0x44f945[_0x5373dd(0x14b)],_0x5b96a6=_0x44f945[_0x5373dd(0x14b)],_0x124ef0=await profile['findOne']({'email':_0x5b96a6[_0x5373dd(0x174)]}),_0x36ea6c=await master_shop[_0x5373dd(0x183)]();console['log'](_0x5373dd(0x13f),_0x36ea6c);const _0x10fbaf=_0x44f945['params']['id'],_0x5f28af=await units[_0x5373dd(0xdc)](_0x10fbaf);if(_0x36ea6c[0x0][_0x5373dd(0xef)]==_0x5373dd(0xea))var _0x2f658a=users['English'];else{if(_0x36ea6c[0x0]['language']=='Hindi')var _0x2f658a=users['Hindi'];else{if(_0x36ea6c[0x0]['language']==_0x5373dd(0xd4))var _0x2f658a=users[_0x5373dd(0xd4)];else{if(_0x36ea6c[0x0][_0x5373dd(0xef)]=='Spanish')var _0x2f658a=users['Spanish'];else{if(_0x36ea6c[0x0]['language']=='French')var _0x2f658a=users[_0x5373dd(0xd0)];else{if(_0x36ea6c[0x0]['language']==_0x5373dd(0x178))var _0x2f658a=users[_0x5373dd(0x12e)];else{if(_0x36ea6c[0x0][_0x5373dd(0xef)]=='Chinese')var _0x2f658a=users['Chinese'];else{if(_0x36ea6c[0x0][_0x5373dd(0xef)]==_0x5373dd(0x15f))var _0x2f658a=users['Arabic'];}}}}}}}_0x1911c0[_0x5373dd(0xda)]('units',{'success':_0x44f945['flash'](_0x5373dd(0x17f)),'errors':_0x44f945[_0x5373dd(0x15e)](_0x5373dd(0x104)),'role':_0x5b96a6,'profile':_0x124ef0,'master_shop':_0x36ea6c,'user':_0x5f28af,'language':_0x2f658a});}catch(_0x522d26){console['log'](_0x522d26);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x14d),auth,async(_0x2060fc,_0x156ba)=>{const _0x510abc=a0_0x2d7d6d;try{const _0x2c499b=_0x2060fc[_0x510abc(0xf3)]['id'],_0x4caa07=await units[_0x510abc(0xe0)](_0x2c499b,_0x2060fc['body']);_0x2060fc['flash'](_0x510abc(0x17f),_0x510abc(0xed)),_0x156ba[_0x510abc(0x158)](_0x510abc(0xde));}catch(_0x97fb35){console[_0x510abc(0x153)](_0x97fb35);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x18e),auth,async(_0x24cd98,_0x5ed676)=>{const _0x785ed2=a0_0x2d7d6d;try{const _0x551c75=_0x24cd98[_0x785ed2(0xf3)]['id'],_0x21d09a=await units['findByIdAndDelete'](_0x551c75);_0x24cd98['flash'](_0x785ed2(0x17f),'unit\x20data\x20delete\x20successfully'),_0x5ed676[_0x785ed2(0x158)](_0x785ed2(0xde));}catch(_0x3e01d5){console[_0x785ed2(0x153)](_0x3e01d5);}});const storage=multer['diskStorage']({'destination':(_0x22f215,_0x3de9fb,_0x255179)=>{const _0x515c0a=a0_0x2d7d6d;_0x255179(null,_0x515c0a(0x135));},'filename':(_0x33979e,_0x31bcc1,_0x22a28a)=>{const _0x3c3db3=a0_0x2d7d6d;_0x22a28a(null,Date[_0x3c3db3(0x151)]()+_0x31bcc1[_0x3c3db3(0x186)]);}}),upload=multer({'storage':storage});router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0xd2),auth,async(_0x454ec1,_0x459615)=>{const _0x44a8bc=a0_0x2d7d6d;try{const {username:_0x1c0d08,email:_0x51132a,role:_0x3349dc}=_0x454ec1[_0x44a8bc(0x14b)],_0x4c2fcc=_0x454ec1[_0x44a8bc(0x14b)],_0x29ea66=await profile['findOne']({'email':_0x4c2fcc[_0x44a8bc(0x174)]}),_0x4ff5ae={'year':_0x44a8bc(0x177),'month':_0x44a8bc(0x124),'day':_0x44a8bc(0x177)},_0x9feb99=await master_shop[_0x44a8bc(0x183)]();console[_0x44a8bc(0x153)](_0x44a8bc(0x133),_0x9feb99);const _0x2ea409=await product[_0x44a8bc(0x183)]();console[_0x44a8bc(0x153)](_0x44a8bc(0x144),_0x2ea409);const _0x83f0cc=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$lookup':{'from':_0x44a8bc(0x18d),'localField':_0x44a8bc(0x117),'foreignField':_0x44a8bc(0x137),'as':_0x44a8bc(0x154)}},{'$unwind':'$product_docs'},{'$project':{'product_name':'$product_details.product_name','product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x44a8bc(0xf0),'product_stock':{'$sum':_0x44a8bc(0xcc)}}}]);console[_0x44a8bc(0x153)]('Products\x20warehouse_data',_0x83f0cc),_0x83f0cc[_0x44a8bc(0xee)](_0x1b2ee7=>{const _0x122e21=_0x44a8bc,_0x45ad28=_0x2ea409[_0x122e21(0xd7)](_0x5b40bf=>{const _0x83ed16=_0x122e21;_0x5b40bf[_0x83ed16(0x137)]==_0x1b2ee7[_0x83ed16(0x173)]&&(_0x5b40bf['stock']=parseInt(_0x5b40bf[_0x83ed16(0x149)])+parseInt(_0x1b2ee7[_0x83ed16(0x110)]));});}),console[_0x44a8bc(0x153)](_0x44a8bc(0x144),_0x2ea409);if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0xea))var _0x7dff0d=users[_0x44a8bc(0x16b)];else{if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0x10c))var _0x7dff0d=users['Hindi'];else{if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0xd4))var _0x7dff0d=users['German'];else{if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0xfa))var _0x7dff0d=users['Spanish'];else{if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0xd0))var _0x7dff0d=users[_0x44a8bc(0xd0)];else{if(_0x9feb99[0x0][_0x44a8bc(0xef)]==_0x44a8bc(0x178))var _0x7dff0d=users[_0x44a8bc(0x12e)];else{if(_0x9feb99[0x0]['language']==_0x44a8bc(0x188))var _0x7dff0d=users[_0x44a8bc(0x188)];else{if(_0x9feb99[0x0]['language']==_0x44a8bc(0x15f))var _0x7dff0d=users[_0x44a8bc(0x123)];}}}}}}}_0x459615['render'](_0x44a8bc(0x18d),{'success':_0x454ec1[_0x44a8bc(0x15e)]('success'),'errors':_0x454ec1['flash']('errors'),'alldata':_0x2ea409,'profile':_0x29ea66,'master_shop':_0x9feb99,'role':_0x4c2fcc,'product_stock':_0x83f0cc,'language':_0x7dff0d});}catch(_0x11ef30){console[_0x44a8bc(0x153)](_0x11ef30);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x164),auth,async(_0x2f2cc6,_0x18aeb8)=>{const _0xf459a7=a0_0x2d7d6d;try{const {username:_0x1e2a19,email:_0x27fbe9,role:_0x526995}=_0x2f2cc6[_0xf459a7(0x14b)],_0x52a95b=_0x2f2cc6['user'],_0x5aca42=await profile['findOne']({'email':_0x52a95b[_0xf459a7(0x174)]}),_0x5645ac=await master_shop[_0xf459a7(0x183)]();console['log']('master',_0x5645ac);const _0x104a4d=await categories[_0xf459a7(0x183)]({}),_0x24f9c8=await brands[_0xf459a7(0x183)]({}),_0x24cc63=await units[_0xf459a7(0x183)]({}),_0x5a73d6=await warehouse[_0xf459a7(0x183)]({'status':_0xf459a7(0x12c)});if(_0x5645ac[0x0][_0xf459a7(0xef)]=='English\x20(US)')var _0x3abcbe=users[_0xf459a7(0x16b)];else{if(_0x5645ac[0x0][_0xf459a7(0xef)]=='Hindi')var _0x3abcbe=users[_0xf459a7(0x10c)];else{if(_0x5645ac[0x0][_0xf459a7(0xef)]==_0xf459a7(0xd4))var _0x3abcbe=users[_0xf459a7(0xd4)];else{if(_0x5645ac[0x0]['language']==_0xf459a7(0xfa))var _0x3abcbe=users[_0xf459a7(0xfa)];else{if(_0x5645ac[0x0]['language']==_0xf459a7(0xd0))var _0x3abcbe=users[_0xf459a7(0xd0)];else{if(_0x5645ac[0x0][_0xf459a7(0xef)]==_0xf459a7(0x178))var _0x3abcbe=users[_0xf459a7(0x12e)];else{if(_0x5645ac[0x0][_0xf459a7(0xef)]==_0xf459a7(0x188))var _0x3abcbe=users[_0xf459a7(0x188)];else{if(_0x5645ac[0x0][_0xf459a7(0xef)]==_0xf459a7(0x15f))var _0x3abcbe=users[_0xf459a7(0x123)];}}}}}}}_0x18aeb8[_0xf459a7(0xda)](_0xf459a7(0xf5),{'success':_0x2f2cc6[_0xf459a7(0x15e)](_0xf459a7(0x17f)),'errors':_0x2f2cc6[_0xf459a7(0x15e)](_0xf459a7(0x104)),'role':_0x52a95b,'profile':_0x5aca42,'categories':_0x104a4d,'brands':_0x24f9c8,'master_shop':_0x5645ac,'units':_0x24cc63,'language':_0x3abcbe,'find_data':_0x5a73d6});}catch(_0x12ef95){console[_0xf459a7(0x153)](_0x12ef95);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x164),auth,upload['single'](a0_0x2d7d6d(0x185)),async(_0x11c817,_0x4c3e7b)=>{const _0xf31997=a0_0x2d7d6d;try{const {name:_0x8abcbe,category:_0x9cae0c,brand:_0x5c7459,unit:_0x18c817,alertquantity:_0x4994a2,stock:_0x43beb2,product_code:_0x2c582a,warehouse:_0x47c3e9,primary_ItemCode:_0x1a9ca2,second_ItemCode:_0x548fc3,second_unit:_0x234c10,maxPerUnit:_0x513ed8,MaxPerProduct:_0x14ebd2}=_0x11c817['body'],_0x2bcc1e=_0x11c817['file']?.[_0xf31997(0xeb)]||_0xf31997(0x121),_0x22bbd1=new product({'image':_0x2bcc1e,'name':_0x8abcbe,'category':_0x9cae0c,'brand':_0x5c7459,'unit':_0x18c817,'alertquantity':_0x4994a2,'stock':_0x43beb2,'product_code':_0x2c582a,'warehouse':_0x47c3e9,'primary_code':_0x1a9ca2,'secondary_code':_0x548fc3,'second_unit':_0x234c10,'maxStocks':_0x14ebd2,'maxProdPerUnit':_0x513ed8}),_0x2ab898=await _0x22bbd1[_0xf31997(0xf9)](),_0x5d25c3=await categories[_0xf31997(0x12d)]({'name':_0x9cae0c});_0x5d25c3['products']=parseInt(_0x5d25c3['products'])+0x1,await _0x5d25c3[_0xf31997(0xf9)]();const _0x2e74dd=await brands[_0xf31997(0x12d)]({'name':_0x5c7459});_0x2e74dd[_0xf31997(0x18d)]=parseInt(_0x2e74dd['products'])+0x1,await _0x2e74dd[_0xf31997(0xf9)]();const _0x594b44=await units['findOne']({'name':_0x18c817});_0x594b44[_0xf31997(0x18d)]=parseInt(_0x594b44[_0xf31997(0x18d)])+0x1,await _0x594b44[_0xf31997(0xf9)](),_0x11c817['flash'](_0xf31997(0x17f),'product\x20add\x20successfully'),_0x4c3e7b['redirect'](_0xf31997(0x155));}catch(_0x27582f){console[_0xf31997(0x153)](_0x27582f);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x11c),auth,async(_0x408b02,_0x5c1a55)=>{const _0x1d9d87=a0_0x2d7d6d;try{const {username:_0x1fe957,email:_0x25a4d9,role:_0x5ed7f1}=_0x408b02['user'],_0x2bfd09=_0x408b02[_0x1d9d87(0x14b)],_0x3be7c0=await profile[_0x1d9d87(0x12d)]({'email':_0x2bfd09[_0x1d9d87(0x174)]}),_0x1a9a6d=await master_shop['find']();console['log'](_0x1d9d87(0x18c),_0x1a9a6d);const _0x240c20=_0x408b02[_0x1d9d87(0xf3)]['id'],_0x1c9624=await product['findById'](_0x240c20),_0x4d9e4f=await categories['find']({}),_0x132ef1=await brands[_0x1d9d87(0x183)]({}),_0x4d813a=await units[_0x1d9d87(0x183)]({}),_0x12870a=await warehouse[_0x1d9d87(0x183)]({'status':'Enabled'}),_0xa13c9c=await units['aggregate']([{'$group':{'_id':_0x1d9d87(0x13c),'secondaryunit':{'$first':_0x1d9d87(0x111)}}}]);if(_0x1a9a6d[0x0]['language']==_0x1d9d87(0xea))var _0x2a8c07=users[_0x1d9d87(0x16b)];else{if(_0x1a9a6d[0x0][_0x1d9d87(0xef)]=='Hindi')var _0x2a8c07=users[_0x1d9d87(0x10c)];else{if(_0x1a9a6d[0x0][_0x1d9d87(0xef)]==_0x1d9d87(0xd4))var _0x2a8c07=users[_0x1d9d87(0xd4)];else{if(_0x1a9a6d[0x0][_0x1d9d87(0xef)]==_0x1d9d87(0xfa))var _0x2a8c07=users['Spanish'];else{if(_0x1a9a6d[0x0][_0x1d9d87(0xef)]==_0x1d9d87(0xd0))var _0x2a8c07=users['French'];else{if(_0x1a9a6d[0x0][_0x1d9d87(0xef)]==_0x1d9d87(0x178))var _0x2a8c07=users[_0x1d9d87(0x12e)];else{if(_0x1a9a6d[0x0]['language']==_0x1d9d87(0x188))var _0x2a8c07=users['Chinese'];else{if(_0x1a9a6d[0x0]['language']==_0x1d9d87(0x15f))var _0x2a8c07=users[_0x1d9d87(0x123)];}}}}}}}_0x5c1a55[_0x1d9d87(0xda)](_0x1d9d87(0x11a),{'success':_0x408b02[_0x1d9d87(0x15e)](_0x1d9d87(0x17f)),'errors':_0x408b02['flash'](_0x1d9d87(0x104)),'role':_0x2bfd09,'profile':_0x3be7c0,'alldata':_0x1c9624,'categories':_0x4d9e4f,'brands':_0x132ef1,'master_shop':_0x1a9a6d,'units':_0x4d813a,'secondunit':_0xa13c9c,'find_data':_0x12870a,'language':_0x2a8c07});}catch(_0x868ec2){console['log'](_0x868ec2);}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x11c),auth,upload[a0_0x2d7d6d(0xd9)]('image'),async(_0x56ddcc,_0x35da91)=>{const _0x1e79f8=a0_0x2d7d6d;try{console[_0x1e79f8(0x153)]('hello');const _0x18a22c=_0x56ddcc[_0x1e79f8(0xf3)]['id'],_0x389ba1=await product['findById'](_0x18a22c),{image:_0x1618bd,name:_0x5616e8,category:_0x3d7e2f,brand:_0x122d09,sku:_0x47ec1e,unit:_0x1971d9,alertquantity:_0x4d1405,product_code:_0x1c8a88,warehouse:_0x1f3ee3,primary_ItemCode:_0x2ec53c,second_ItemCode:_0x2a4485,second_unit:_0x211293,maxPerUnit:_0x5d7896,MaxPerProduct:_0x57951d,prod_catdata:_0x57d958}=_0x56ddcc[_0x1e79f8(0xd1)];_0x56ddcc['file']&&(_0x389ba1[_0x1e79f8(0x185)]=_0x56ddcc[_0x1e79f8(0x119)]['filename']);_0x389ba1[_0x1e79f8(0x137)]=_0x5616e8,_0x389ba1[_0x1e79f8(0x157)]=_0x3d7e2f,_0x389ba1[_0x1e79f8(0x16d)]=_0x122d09,_0x389ba1[_0x1e79f8(0x16e)]=_0x47ec1e,_0x389ba1[_0x1e79f8(0x108)]=_0x1971d9,_0x389ba1['alertquantity']=_0x4d1405,_0x389ba1[_0x1e79f8(0x161)]=_0x1c8a88,_0x389ba1['warehouse']=_0x1f3ee3,_0x389ba1['primary_code']=_0x2ec53c,_0x389ba1['secondary_code']=_0x2a4485,_0x389ba1[_0x1e79f8(0x170)]=_0x211293,_0x389ba1['maxStocks']=_0x57951d,_0x389ba1['maxProdPerUnit']=_0x5d7896,_0x389ba1[_0x1e79f8(0x176)]=_0x57d958;const _0x3e3a06=await _0x389ba1[_0x1e79f8(0xf9)]();console['log']('product\x20edit',_0x389ba1),_0x56ddcc[_0x1e79f8(0x15e)](_0x1e79f8(0x17f),_0x1e79f8(0x18b)),_0x35da91['redirect'](_0x1e79f8(0x155));}catch(_0x369316){console[_0x1e79f8(0x153)](_0x369316);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0xff),auth,async(_0x26c04d,_0x5dfbf6)=>{const _0x47cde8=a0_0x2d7d6d;try{const {username:_0x3702d4,email:_0x367dcc,role:_0x53b828}=_0x26c04d['user'],_0xb14096=_0x26c04d[_0x47cde8(0x14b)],_0x102b63=await profile[_0x47cde8(0x12d)]({'email':_0xb14096[_0x47cde8(0x174)]}),_0x1a2a06=await master_shop['find']();console[_0x47cde8(0x153)](_0x47cde8(0xdf),_0x1a2a06);const _0x586ec4=_0x26c04d[_0x47cde8(0xf3)]['id'],_0x450e12=await product['findById'](_0x586ec4);console[_0x47cde8(0x153)](_0x47cde8(0x109),_0x450e12);if(_0x1a2a06[0x0][_0x47cde8(0xef)]==_0x47cde8(0xea))var _0x7446d9=users['English'];else{if(_0x1a2a06[0x0][_0x47cde8(0xef)]=='Hindi')var _0x7446d9=users['Hindi'];else{if(_0x1a2a06[0x0][_0x47cde8(0xef)]=='German')var _0x7446d9=users['German'];else{if(_0x1a2a06[0x0]['language']=='Spanish')var _0x7446d9=users['Spanish'];else{if(_0x1a2a06[0x0]['language']==_0x47cde8(0xd0))var _0x7446d9=users[_0x47cde8(0xd0)];else{if(_0x1a2a06[0x0][_0x47cde8(0xef)]=='Portuguese\x20(BR)')var _0x7446d9=users[_0x47cde8(0x12e)];else{if(_0x1a2a06[0x0][_0x47cde8(0xef)]==_0x47cde8(0x188))var _0x7446d9=users[_0x47cde8(0x188)];else{if(_0x1a2a06[0x0][_0x47cde8(0xef)]==_0x47cde8(0x15f))var _0x7446d9=users[_0x47cde8(0x123)];}}}}}}}_0x5dfbf6['render'](_0x47cde8(0xe6),{'success':_0x26c04d[_0x47cde8(0x15e)](_0x47cde8(0x17f)),'errors':_0x26c04d[_0x47cde8(0x15e)](_0x47cde8(0x104)),'role':_0xb14096,'profile':_0x102b63,'alldata':_0x450e12,'master_shop':_0x1a2a06,'language':_0x7446d9});}catch(_0xd630c2){console[_0x47cde8(0x153)](_0xd630c2);}}),router[a0_0x2d7d6d(0x138)](a0_0x2d7d6d(0x171),auth,async(_0x9c73e1,_0x300d4e)=>{const _0xc75064=a0_0x2d7d6d;try{const _0x49bf74=new excelJS[(_0xc75064(0x163))](),_0x43e8c9=_0x49bf74['addWorksheet']('Products');return _0x43e8c9['columns']=[{'header':_0xc75064(0xf8),'key':_0xc75064(0x101),'width':0xa},{'header':'Brands','key':_0xc75064(0xce),'width':0xa},{'header':_0xc75064(0x165),'key':'PUnits','width':0xa},{'header':'Secondary_Units','key':_0xc75064(0x106),'width':0xa},{'header':_0xc75064(0xf2),'key':_0xc75064(0xfc),'width':0xa},{'header':_0xc75064(0x15b),'key':_0xc75064(0xcb),'width':0xa},{'header':_0xc75064(0x11d),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0xc75064(0xcb),'width':0xa},{'header':'Category','key':_0xc75064(0x118),'width':0xa},{'header':_0xc75064(0x10a),'key':_0xc75064(0x142),'width':0xa},{'header':'Maximum_Stocks','key':_0xc75064(0x142),'width':0xa},{'header':_0xc75064(0xd5),'key':_0xc75064(0x175),'width':0xa}],_0x300d4e['setHeader'](_0xc75064(0x112),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x300d4e[_0xc75064(0x102)](_0xc75064(0x10e),_0xc75064(0xfd)),_0x49bf74[_0xc75064(0x184)][_0xc75064(0x179)](_0x300d4e)['then'](()=>{_0x300d4e['status'](0xc8);});}catch(_0x7b454a){_0x300d4e['status'](0x190)[_0xc75064(0x12a)](_0x7b454a);}});const storage1=multer[a0_0x2d7d6d(0x141)]({'destination':(_0x57b699,_0x1b822e,_0x23f30b)=>{_0x23f30b(null,'public/Migration');},'filename':(_0x3602b6,_0x1b6da1,_0x43b83e)=>{const _0x212fae=a0_0x2d7d6d;_0x43b83e(null,Date[_0x212fae(0x151)]()+_0x1b6da1[_0x212fae(0x186)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x5d5f(){const _0x178fbc=['status','user','addPage','/units/:id','product_barcode_products','jsbarcode','8ImZoZW','now','Raw\x20Materials','log','product_docs','/products/view','min','category','redirect','305BykTux','\x20brand\x20is\x20add\x20successfully','Primary_Code','width','/print_barcode_single/:id','flash','Arabic\x20(ae)','bind','product_code','base64','Workbook','/view/add_products','Units','/barcode_data','Router','$category','categ','toBuffer','English','/brands','brand','sku','data','secondary_unit','/products_export_migrate_file','/filter_product','_id','email','Prod_Cat','product_category','numeric','Portuguese\x20(BR)','write','234DpgFkF','utils','length','end','917560PpTUgB','success','categories_edit','toString','public/Migration/','find','xlsx','image','originalname','/barcode_filter','Chinese','findByIdAndDelete','../models/all_models','product\x20update\x20successfully','edit\x20Product\x20master','products','/units/delete/:id','ProductCode','$product_stock','8781237EdrkxT','PBrands','message','French','body','/view','$brand','German','Products_category','SheetNames','map','Secondary_Units','single','render','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','findById','/print_barcode_filter/','/products/units','barcode\x20Product\x20master','findByIdAndUpdate','../public/language/languages.json','773832fbEdRq','148113QZiulU','migrate_product_fule','/units','product_barcode','\x20<>\x20','Finished\x20Goods','Maximum_Stocks','English\x20(US)','filename','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','unit\x20data\x20update\x20successfully','forEach','language','$product_name','height','max_number_per_units','params','1787iRUTxY','add_product','maxProdPerUnit','/brands/delete/:id','Product_Name','save','Spanish','primary_code','MaxperUnits','attachment;\x20filename=Product_Migration_File.xlsx','Product_Code','/barcode/:id','concat','PName','setHeader','/categories/:id','errors','30239MVALKb','PSecondaryUnits','/products/brands','unit','barcode\x20user_id','Alert_QTY','/select_data','Hindi','prod_categ','Content-Disposition','maxStocks','product_stock','$secondary_unit','Content-Type','categories\x20data\x20delete\x20successfully','Brands','alertquantity','../middleware/auth','product_details.product_name','PCat','file','edit_product','sheet_to_json','/view/:id','Secondary_Code','express','/categories/delete/:id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','defaultProduct.avif','readFile','Arabic','long','exports','Sheets','brands','\x20unit\x20is\x20add\x20successfully','14748WrpCOi','send','post','Enabled','findOne','Portuguese','express/lib/response','brand\x20data\x20update\x20successfully','\x20added\x20successfully','Category','Products\x20master','/brands/:id','public/upload','secondary_code','name','get','/products/categories','push','1154ChDLrH','$_id','json','9524klAbcR','master','exceljs','diskStorage','PAlQty','aggregate','Products\x20find_data','CODE128','\x20categories\x20is\x20add\x20successfully','/categories','brand\x20data\x20delete\x20successfully','stock'];a0_0x5d5f=function(){return _0x178fbc;};return a0_0x5d5f();}router[a0_0x2d7d6d(0x12b)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x2d7d6d(0xd9)](a0_0x2d7d6d(0xe4)),async(_0x38d7c9,_0x2c736c)=>{const _0x2c40fc=a0_0x2d7d6d,_0x49f929=_0x38d7c9[_0x2c40fc(0x119)][_0x2c40fc(0xeb)],_0x983c9c=await xlsx[_0x2c40fc(0x122)](_0x2c40fc(0x182)+_0x49f929);let _0x5c7171=_0x983c9c[_0x2c40fc(0xd6)],_0x5d8d66=xlsx[_0x2c40fc(0x17b)][_0x2c40fc(0x11b)](_0x983c9c[_0x2c40fc(0x126)][_0x5c7171[0x0]]);for(const _0x7c75f8 of _0x5d8d66){const _0x4859ab=_0x7c75f8['Product_Name'],_0x259744=_0x7c75f8[_0x2c40fc(0x114)],_0x5cac1a=_0x7c75f8[_0x2c40fc(0x165)],_0x48b131=_0x7c75f8[_0x2c40fc(0xd8)],_0xccdfd7=_0x7c75f8[_0x2c40fc(0xfe)],_0x26277f=_0x7c75f8['Category'],_0x42a06f=_0x7c75f8[_0x2c40fc(0x10a)],_0x3dd8e9=_0x7c75f8[_0x2c40fc(0x15b)],_0x56b846=_0x7c75f8[_0x2c40fc(0x11d)],_0x4fea77=_0x7c75f8[_0x2c40fc(0xe9)],_0x5a6c64=_0x7c75f8[_0x2c40fc(0xf2)],_0x3f970e=_0x7c75f8['Products_category'];try{let _0x3e5f18=await categories[_0x2c40fc(0x12d)]({'name':_0x26277f});if(!_0x3e5f18){const _0xb89834=new categories({'name':_0x26277f,'products':'0'});_0x3e5f18=await _0xb89834[_0x2c40fc(0xf9)]();}let _0x4cb2b9=await brands[_0x2c40fc(0x12d)]({'name':_0x259744});if(!_0x4cb2b9){const _0x8c3189=new brands({'name':_0x259744,'products':'0'});_0x4cb2b9=await _0x8c3189[_0x2c40fc(0xf9)]();}let _0x3d91bf=await units[_0x2c40fc(0x12d)]({'name':_0x5cac1a,'secondary_unit':_0x48b131});if(!_0x3d91bf){const _0x1cc761=new units({'name':_0x5cac1a,'secondary_unit':_0x48b131,'products':'0'});_0x3d91bf=await _0x1cc761[_0x2c40fc(0xf9)]();}const _0x504e4d=await product[_0x2c40fc(0x183)]({'name':_0x4859ab,'category':_0x3e5f18[_0x2c40fc(0x137)],'brand':_0x4cb2b9['name'],'secondary_unit':_0x3d91bf['secondary_unit'],'product_code':_0xccdfd7});console[_0x2c40fc(0x153)](_0x504e4d['length']+_0x2c40fc(0xe7)+_0x3e5f18[_0x2c40fc(0x137)]+'\x20<>\x20'+_0x4cb2b9[_0x2c40fc(0x137)]+'\x20<>\x20'+_0x3d91bf[_0x2c40fc(0x170)]+_0x2c40fc(0xe7)+_0xccdfd7+_0x2c40fc(0xe7)+_0x4859ab);if(_0x504e4d[_0x2c40fc(0x17c)]===0x0){const _0x38d897=new product({'image':_0x2c40fc(0x121),'name':_0x4859ab,'category':_0x3e5f18[_0x2c40fc(0x137)],'brand':_0x4cb2b9[_0x2c40fc(0x137)],'unit':_0x3d91bf[_0x2c40fc(0x137)],'alertquantity':_0x42a06f,'product_code':_0xccdfd7,'secondary_unit':_0x3d91bf['secondary_unit'],'primary_code':_0x3dd8e9,'secondary_code':_0x56b846,'maxStocks':_0x4fea77,'maxProdPerUnit':_0x5a6c64,'product_category':_0x3f970e}),_0x2cdb64=await _0x38d897[_0x2c40fc(0xf9)]();_0x3e5f18[_0x2c40fc(0x18d)]=parseInt(_0x3e5f18[_0x2c40fc(0x18d)])+0x1,await _0x3e5f18['save'](),_0x4cb2b9[_0x2c40fc(0x18d)]=parseInt(_0x4cb2b9[_0x2c40fc(0x18d)])+0x1,await _0x4cb2b9[_0x2c40fc(0xf9)](),_0x3d91bf[_0x2c40fc(0x18d)]=parseInt(_0x3d91bf[_0x2c40fc(0x18d)])+0x1,await _0x3d91bf[_0x2c40fc(0xf9)](),_0x38d7c9[_0x2c40fc(0x15e)](_0x2c40fc(0x17f),_0x4859ab+_0x2c40fc(0x131));}else{console[_0x2c40fc(0x153)](_0x504e4d[0x0]);const _0x59704a=_0x504e4d[0x0];_0x59704a[_0x2c40fc(0x157)]=_0x3e5f18[_0x2c40fc(0x137)],_0x59704a['brand']=_0x4cb2b9[_0x2c40fc(0x137)],_0x59704a[_0x2c40fc(0x108)]=_0x3d91bf['name'],_0x59704a[_0x2c40fc(0x115)]=_0x42a06f,_0x59704a[_0x2c40fc(0x161)]=_0xccdfd7,_0x59704a['secondary_unit']=_0x3d91bf['secondary_unit'],_0x59704a[_0x2c40fc(0xfb)]=_0x3dd8e9,_0x59704a[_0x2c40fc(0x136)]=_0x56b846,_0x59704a[_0x2c40fc(0x10f)]=_0x4fea77,_0x59704a[_0x2c40fc(0xf6)]=_0x5a6c64,_0x59704a['product_category']=_0x3f970e;const _0x2a4757=await _0x59704a[_0x2c40fc(0xf9)]();_0x38d7c9['flash']('success',_0x2a4757[_0x2c40fc(0x137)]+'\x20Edit\x20Successfully');}}catch(_0x2441fa){_0x2c736c[_0x2c40fc(0x14a)](0x1f4)['json']({'proderror':_0x2441fa[_0x2c40fc(0xcf)],'aproduct':_0x4859ab});}}_0x2c736c[_0x2c40fc(0x158)](_0x2c40fc(0x155));}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x10b),auth,async(_0x26e25c,_0x1b285)=>{const _0x44a10e=a0_0x2d7d6d;try{console[_0x44a10e(0x153)](_0x26e25c[_0x44a10e(0xd1)]);const {data_cateory:_0x5e9b5c,datachoose:_0x2fb644}=_0x26e25c[_0x44a10e(0xd1)];var _0x522ff7;if(_0x2fb644==_0x44a10e(0x10d))_0x522ff7=await product[_0x44a10e(0x143)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x2fb644==_0x44a10e(0x127))_0x522ff7=await product['aggregate']([{'$match':{'product_category':_0x5e9b5c}},{'$group':{'_id':'$brand'}}]);else _0x2fb644==_0x44a10e(0x169)&&(_0x522ff7=await product[_0x44a10e(0x143)]([{'$match':{'product_category':_0x5e9b5c}},{'$group':{'_id':_0x44a10e(0x168)}}]));}_0x1b285[_0x44a10e(0x13d)](_0x522ff7);}catch(_0x12f08e){_0x1b285[_0x44a10e(0x13d)]({'message':_0x12f08e[_0x44a10e(0xcf)]});}}),router['post'](a0_0x2d7d6d(0x172),auth,async(_0x51bca7,_0x490d0c)=>{const _0x580d2a=a0_0x2d7d6d;try{const {data_choosing:_0x3babe0,data_selected:_0x4e1c96}=_0x51bca7['body'];var _0x421c7f;if(_0x3babe0==_0x580d2a(0x10d))_0x421c7f=await product[_0x580d2a(0x143)]([{'$match':{'product_category':_0x4e1c96}}]);else{if(_0x3babe0=='brands')_0x421c7f=await product[_0x580d2a(0x143)]([{'$match':{'brand':_0x4e1c96}}]);else _0x3babe0=='categ'&&(_0x421c7f=await product['aggregate']([{'$match':{'category':_0x4e1c96}}]));}_0x490d0c['json'](_0x421c7f);}catch(_0x40b939){_0x490d0c[_0x580d2a(0x13d)]({'message':_0x40b939['message']});}}),router[a0_0x2d7d6d(0x138)]('/print_barcode',auth,async(_0x3a037d,_0x4e7ebc)=>{const _0x5a02bd=a0_0x2d7d6d,_0xc600d2=_0x3a037d[_0x5a02bd(0x14b)],_0x2030a1=await profile[_0x5a02bd(0x12d)]({'email':_0xc600d2['email']}),_0x33947e=await master_shop['find'](),_0x13dda9=await product[_0x5a02bd(0x183)]();if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0xea))var _0x3c2fb9=users['English'];else{if(_0x33947e[0x0]['language']=='Hindi')var _0x3c2fb9=users[_0x5a02bd(0x10c)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0xd4))var _0x3c2fb9=users[_0x5a02bd(0xd4)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0xfa))var _0x3c2fb9=users[_0x5a02bd(0xfa)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0xd0))var _0x3c2fb9=users[_0x5a02bd(0xd0)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0x178))var _0x3c2fb9=users[_0x5a02bd(0x12e)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0x188))var _0x3c2fb9=users[_0x5a02bd(0x188)];else{if(_0x33947e[0x0][_0x5a02bd(0xef)]==_0x5a02bd(0x15f))var _0x3c2fb9=users[_0x5a02bd(0x123)];}}}}}}}_0x4e7ebc[_0x5a02bd(0xda)](_0x5a02bd(0x14e),{'success':_0x3a037d[_0x5a02bd(0x15e)](_0x5a02bd(0x17f)),'errors':_0x3a037d[_0x5a02bd(0x15e)](_0x5a02bd(0x104)),'role':_0xc600d2,'profile':_0x2030a1,'products':_0x13dda9,'master_shop':_0x33947e,'language':_0x3c2fb9});}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x166),auth,async(_0x3b7196,_0x1e96dd)=>{const _0x4df272=a0_0x2d7d6d,_0x2b7283=await product['find']();_0x1e96dd[_0x4df272(0x13d)]({'data':_0x2b7283});}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0x187),auth,async(_0x5f3ad3,_0x42e5b5)=>{const _0x46d51a=a0_0x2d7d6d;try{const {dataProdCat:_0x1b0989,dataProdIdentity:_0x5249b2}=_0x5f3ad3[_0x46d51a(0xd1)];var _0x3e51c3;switch(_0x1b0989){case'fg':switch(_0x5249b2){case _0x46d51a(0x114):_0x3e51c3=await product[_0x46d51a(0x143)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x46d51a(0xd3)}},{'$project':{'brand':'$_id'}}]);break;case _0x46d51a(0x132):_0x3e51c3=await product[_0x46d51a(0x143)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x46d51a(0x13c)}}]);break;}break;case'rm':switch(_0x5249b2){case _0x46d51a(0x114):_0x3e51c3=await product[_0x46d51a(0x143)]([{'$match':{'product_category':_0x46d51a(0x152)}},{'$group':{'_id':_0x46d51a(0xd3)}},{'$project':{'brand':'$_id'}}]);break;case _0x46d51a(0x132):_0x3e51c3=await product[_0x46d51a(0x143)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x46d51a(0x168)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x42e5b5[_0x46d51a(0x13d)](_0x3e51c3);}catch(_0x5e64fd){_0x42e5b5[_0x46d51a(0x13d)]({'message':_0x5e64fd[_0x46d51a(0xcf)]});}}),router[a0_0x2d7d6d(0x12b)](a0_0x2d7d6d(0xdd),auth,async(_0x1e919f,_0x14ca33)=>{const _0x44cd73=a0_0x2d7d6d;try{console[_0x44cd73(0x153)](_0x1e919f['body']);const {prod_cat:_0x5ed3bf,identity:_0x1ee9f8,valueData:_0x209f25,typeofbarcode:_0x18949b}=_0x1e919f[_0x44cd73(0xd1)];let _0x1350b2;switch(_0x5ed3bf){case'fg':if(_0x1ee9f8==_0x44cd73(0x114))_0x1350b2=await product['aggregate']([{'$match':{'product_category':_0x44cd73(0xe8),'brand':_0x209f25}}]);else _0x1ee9f8==_0x44cd73(0x132)&&(_0x1350b2=await product[_0x44cd73(0x143)]([{'$match':{'product_category':_0x44cd73(0xe8),'category':_0x209f25}}]));break;case'rm':if(_0x1ee9f8==_0x44cd73(0x114))_0x1350b2=await product['aggregate']([{'$match':{'product_category':_0x44cd73(0x152),'brand':_0x209f25}}]);else _0x1ee9f8==_0x44cd73(0x132)&&(_0x1350b2=await product[_0x44cd73(0x143)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x209f25}}]));break;}const _0x291f83=_0x36fea5=>_0x36fea5*0x48,_0x1b75e0={'width':0x3,'height':0x1},_0x2c9a58=new PDFDocument({'margin':_0x291f83(0.75),'size':[_0x291f83(_0x1b75e0[_0x44cd73(0x15c)]),_0x291f83(_0x1b75e0[_0x44cd73(0xf1)])],'bufferPages':!![]}),_0xada41c=_0x1350b2[_0x44cd73(0x17c)];for(let _0x2e0399=0x0;_0x2e0399<=_0xada41c;_0x2e0399++){if(_0x2e0399!=_0xada41c){const _0x23eaf5=_0x1350b2[_0x2e0399][_0x44cd73(0x137)],_0x1f6a63=_0x1350b2[_0x2e0399][_0x44cd73(0xfb)],_0xe50b0f=_0x1350b2[_0x2e0399][_0x44cd73(0x136)],_0xfdc641=_0x1350b2[_0x2e0399][_0x44cd73(0x161)];var _0x31ba8f;switch(_0x18949b){case'1':_0x31ba8f=_0x1f6a63;break;case'2':_0x31ba8f=_0xe50b0f;break;case'3':_0x31ba8f=_0xfdc641;break;}const _0x116723={'width':0xd2,'height':0x64},_0x20d7e4={'width':_0x291f83(_0x1b75e0[_0x44cd73(0x15c)]),'height':_0x291f83(_0x1b75e0[_0x44cd73(0xf1)])},_0x5881f5=new Canvas();JsBarcode(_0x5881f5,_0x31ba8f,{'format':'CODE128','height':_0x116723[_0x44cd73(0xf1)],'displayValue':!![],'text':_0x31ba8f});const _0xb7cf91=_0x5881f5['toBuffer'](),_0x4e9ee0=_0x20d7e4[_0x44cd73(0x15c)]/_0x116723['width'],_0x2116c3=_0x20d7e4[_0x44cd73(0xf1)]/_0x116723['height'],_0x182585=Math[_0x44cd73(0x156)](_0x4e9ee0,_0x2116c3),_0x11485e=_0x116723[_0x44cd73(0x15c)]*_0x182585,_0x58cf9a=_0x116723[_0x44cd73(0xf1)]*_0x182585,_0x4eb236=(_0x20d7e4[_0x44cd73(0x15c)]-_0x11485e)/0x2,_0x1c803b=(_0x20d7e4[_0x44cd73(0xf1)]-_0x58cf9a)/0x2;_0x2c9a58['image'](_0xb7cf91,_0x4eb236,_0x1c803b,{'width':_0x11485e,'height':_0x58cf9a}),_0x2e0399!=_0xada41c&&_0x2c9a58[_0x44cd73(0x14c)]();}}const _0x2cd91c=[];_0x2c9a58['on'](_0x44cd73(0x16f),_0x2cd91c[_0x44cd73(0x13a)][_0x44cd73(0x160)](_0x2cd91c)),_0x2c9a58['on'](_0x44cd73(0x17d),()=>{const _0x267529=_0x44cd73,_0x50c40e=Buffer[_0x267529(0x100)](_0x2cd91c),_0x3b37be=_0x50c40e[_0x267529(0x181)](_0x267529(0x162));_0x14ca33[_0x267529(0x13d)]({'pdfContent':_0x3b37be});}),_0x2c9a58[_0x44cd73(0x17d)]();}catch(_0x5cb854){_0x14ca33['json']({'message':_0x5cb854[_0x44cd73(0xcf)]});}}),router[a0_0x2d7d6d(0x12b)]('/print_barcode_filter_search/',auth,async(_0x5321f6,_0x305f38)=>{const _0x4e7744=a0_0x2d7d6d;try{console[_0x4e7744(0x153)](_0x5321f6['body']);const {prod_cat:_0x5c14c8,identity:_0x2d5924,valueData:_0x5aebe9}=_0x5321f6['body'];let _0x6329d0;switch(_0x5c14c8){case'fg':if(_0x2d5924=='Brands')_0x6329d0=await product['aggregate']([{'$match':{'product_category':_0x4e7744(0xe8),'brand':_0x5aebe9}}]);else _0x2d5924==_0x4e7744(0x132)&&(_0x6329d0=await product[_0x4e7744(0x143)]([{'$match':{'product_category':_0x4e7744(0xe8),'category':_0x5aebe9}}]));break;case'rm':if(_0x2d5924==_0x4e7744(0x114))_0x6329d0=await product[_0x4e7744(0x143)]([{'$match':{'product_category':_0x4e7744(0x152),'brand':_0x5aebe9}}]);else _0x2d5924==_0x4e7744(0x132)&&(_0x6329d0=await product[_0x4e7744(0x143)]([{'$match':{'product_category':_0x4e7744(0x152),'category':_0x5aebe9}}]));break;}_0x305f38['json']({'data':_0x6329d0});}catch(_0x5a8fcf){_0x305f38[_0x4e7744(0x13d)]({'message':_0x5a8fcf[_0x4e7744(0xcf)]});}}),router['post'](a0_0x2d7d6d(0x15d),auth,async(_0x156cad,_0x2d1105)=>{const _0x4354e4=a0_0x2d7d6d;try{const _0x307d4f=_0x156cad[_0x4354e4(0xf3)]['id'],{copies:_0x2d5274,typeofbarcode:_0x43846e}=_0x156cad[_0x4354e4(0xd1)];var _0x32f2aa=await product[_0x4354e4(0xdc)](_0x307d4f);const _0x46eb48=_0x967a8c=>_0x967a8c*0x48,_0x5733e2={'width':0x3,'height':0x1},_0x5e5588=new PDFDocument({'margin':_0x46eb48(0.75),'size':[_0x46eb48(_0x5733e2['width']),_0x46eb48(_0x5733e2['height'])],'bufferPages':!![]}),_0x26a3c4=_0x2d5274,_0x5267d0=_0x32f2aa[_0x4354e4(0x137)],_0x5e10ac=_0x32f2aa['primary_code'],_0x53cdb7=_0x32f2aa[_0x4354e4(0x136)],_0x80ef51=_0x32f2aa['product_code'];let _0x6d29e9;switch(_0x43846e){case'1':_0x6d29e9=_0x5e10ac;break;case'2':_0x6d29e9=_0x53cdb7;break;case'3':_0x6d29e9=_0x80ef51;break;}const _0x244c58={'width':0xd2,'height':0x64},_0x5ef794={'width':_0x46eb48(_0x5733e2['width']),'height':_0x46eb48(_0x5733e2[_0x4354e4(0xf1)])};for(let _0x5e9218=0x1;_0x5e9218<=_0x26a3c4;_0x5e9218++){const _0x4f2376=new Canvas();JsBarcode(_0x4f2376,_0x6d29e9,{'format':_0x4354e4(0x145),'height':_0x244c58[_0x4354e4(0xf1)],'displayValue':!![],'text':_0x6d29e9});const _0x16e499=_0x4f2376[_0x4354e4(0x16a)](),_0x36de2c=_0x5ef794['width']/_0x244c58['width'],_0x17dcba=_0x5ef794[_0x4354e4(0xf1)]/_0x244c58['height'],_0x132086=Math[_0x4354e4(0x156)](_0x36de2c,_0x17dcba),_0x9faffe=_0x244c58[_0x4354e4(0x15c)]*_0x132086,_0x2f4741=_0x244c58[_0x4354e4(0xf1)]*_0x132086,_0x390367=(_0x5ef794[_0x4354e4(0x15c)]-_0x9faffe)/0x2,_0x3ca727=(_0x5ef794[_0x4354e4(0xf1)]-_0x2f4741)/0x2;_0x5e5588['image'](_0x16e499,_0x390367,_0x3ca727,{'width':_0x9faffe,'height':_0x2f4741}),_0x5e9218!=_0x26a3c4&&_0x5e5588[_0x4354e4(0x14c)]();}const _0x246483=[];_0x5e5588['on'](_0x4354e4(0x16f),_0x246483[_0x4354e4(0x13a)][_0x4354e4(0x160)](_0x246483)),_0x5e5588['on'](_0x4354e4(0x17d),()=>{const _0x33ad2e=_0x4354e4,_0x50d6f1=Buffer[_0x33ad2e(0x100)](_0x246483),_0x1bf0fc=_0x50d6f1[_0x33ad2e(0x181)](_0x33ad2e(0x162));_0x2d1105[_0x33ad2e(0x13d)]({'pdfContent':_0x1bf0fc});}),_0x5e5588[_0x4354e4(0x17d)]();}catch(_0xd1a992){_0x2d1105['json']({'message':_0xd1a992['message']});}}),module[a0_0x2d7d6d(0x125)]=router;