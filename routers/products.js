const a0_0x3070b7=a0_0x4dbe;function a0_0x43e8(){const _0x38d7e2=['migrate_product_fule','barcode\x20user_id','PName','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/units/delete/:id','edit\x20Product\x20master','find','/products/units','language','Products\x20master','product_barcode_products','10jrnmhs','Workbook','Raw\x20Materials','push','add_product','then','product_barcode','secondary_code','Enabled','$_id','brand','$product_name','save','\x20<>\x20','flash','Content-Disposition','/products_import_migrate_file','PCat','hello','88220ybZKQv','secondary_unit','2114472SaKnLv','name','params','filename','image','Hindi','xlsx','findByIdAndUpdate','unit\x20data\x20update\x20successfully','/categories/:id','171ZjEleL','barcode\x20Product\x20master','post','Spanish','maxStocks','findByIdAndDelete','brands','now','PSecondaryUnits','toString','map','findById','product_category','height','product_code','multer','/products/categories','English','errors','Secondary_Units','Finished\x20Goods','sheet_to_json','data','categories\x20data\x20delete\x20successfully','aggregate','json','user','length','log','defaultProduct.avif','prod_categ','PBrands','Product_Name','../middleware/auth','public/Migration','ProductCode','CODE128','product\x20edit','1134046WDScEn','Brands','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','addPage','file','public/Migration/','/barcode_filter','Products','Arabic','concat','primary_code','public/upload','$product_details','setHeader','Sheets','../public/language/languages.json','/brands','Chinese','alertquantity','originalname','/brands/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/view','stock','base64','English\x20(US)','readFile','9UJmvNC','maxProdPerUnit','Portuguese','/brands/delete/:id','100825aQUqzn','_id','canvas','$product_category','brand\x20data\x20delete\x20successfully','end','Alert_QTY','French','product_docs','/view/:id','\x20categories\x20is\x20add\x20successfully','body','MaxperUnits','$product_docs','columns','$brand','\x20added\x20successfully','\x20unit\x20is\x20add\x20successfully','master','long','/select_data','Units','German','units','categories_edit','product\x20add\x20successfully','diskStorage','265MocTvN','products','\x20Edit\x20Successfully','Products\x20find_data','/barcode/:id','message','exports','/units','category','Primary_Code','redirect','Products_category','utils','max_number_per_units','PAlQty','success','/print_barcode_filter/','render','min','/view/add_products','13273271jNyrcA','brand\x20data\x20update\x20successfully','Portuguese\x20(BR)','bind','forEach','/categories','/print_barcode','Maximum_Stocks','/products_export_migrate_file','$category','$product_details.product_stock','findOne','/products/brands','$product_stock','numeric','attachment;\x20filename=Product_Migration_File.xlsx','status','get','email','/barcode_data','592888nELXJc','Category','Secondary_Code','/view','categories','categ','width','Content-Type','unit','Arabic\x20(ae)','toBuffer','/units/:id','sku','2523976hniJRD','single','Product_Code','exceljs'];a0_0x43e8=function(){return _0x38d7e2;};return a0_0x43e8();}(function(_0x476353,_0x1650b1){const _0x445c3e=a0_0x4dbe,_0x3f3be5=_0x476353();while(!![]){try{const _0x2b74b3=-parseInt(_0x445c3e(0x1e7))/0x1+parseInt(_0x445c3e(0x1c8))/0x2*(parseInt(_0x445c3e(0x1e3))/0x3)+-parseInt(_0x445c3e(0x196))/0x4*(-parseInt(_0x445c3e(0x13f))/0x5)+parseInt(_0x445c3e(0x198))/0x6+parseInt(_0x445c3e(0x174))/0x7+parseInt(_0x445c3e(0x167))/0x8*(-parseInt(_0x445c3e(0x1a2))/0x9)+parseInt(_0x445c3e(0x183))/0xa*(-parseInt(_0x445c3e(0x153))/0xb);if(_0x2b74b3===_0x1650b1)break;else _0x3f3be5['push'](_0x3f3be5['shift']());}catch(_0x4cbc08){_0x3f3be5['push'](_0x3f3be5['shift']());}}}(a0_0x43e8,0xd3c29));const express=require('express'),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require(a0_0x3070b7(0x1b1)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x3070b7(0x1c3)),users=require(a0_0x3070b7(0x1d7)),excelJS=require(a0_0x3070b7(0x177)),xlsx=require(a0_0x3070b7(0x19e)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x3070b7(0x1e9)),PDFDocument=require('pdfkit-table');router[a0_0x3070b7(0x164)](a0_0x3070b7(0x158),auth,async(_0x3f9c6c,_0x4d2309)=>{const _0x5b0ce9=a0_0x3070b7;try{const {username:_0x562ba8,email:_0x2448df,role:_0x2f011b}=_0x3f9c6c[_0x5b0ce9(0x1bc)],_0x4723a7=_0x3f9c6c[_0x5b0ce9(0x1bc)],_0x2b3d86=await profile[_0x5b0ce9(0x15e)]({'email':_0x4723a7['email']}),_0x1e486b=await master_shop[_0x5b0ce9(0x17e)]();console[_0x5b0ce9(0x1be)](_0x5b0ce9(0x1f9),_0x1e486b);const _0x158510=await categories[_0x5b0ce9(0x17e)]();if(_0x1e486b[0x0][_0x5b0ce9(0x180)]=='English\x20(US)')var _0x1c70eb=users['English'];else{if(_0x1e486b[0x0][_0x5b0ce9(0x180)]==_0x5b0ce9(0x19d))var _0x1c70eb=users[_0x5b0ce9(0x19d)];else{if(_0x1e486b[0x0]['language']==_0x5b0ce9(0x1fd))var _0x1c70eb=users[_0x5b0ce9(0x1fd)];else{if(_0x1e486b[0x0]['language']==_0x5b0ce9(0x1a5))var _0x1c70eb=users[_0x5b0ce9(0x1a5)];else{if(_0x1e486b[0x0][_0x5b0ce9(0x180)]==_0x5b0ce9(0x1ee))var _0x1c70eb=users[_0x5b0ce9(0x1ee)];else{if(_0x1e486b[0x0][_0x5b0ce9(0x180)]==_0x5b0ce9(0x155))var _0x1c70eb=users[_0x5b0ce9(0x1e5)];else{if(_0x1e486b[0x0][_0x5b0ce9(0x180)]==_0x5b0ce9(0x1d9))var _0x1c70eb=users[_0x5b0ce9(0x1d9)];else{if(_0x1e486b[0x0]['language']==_0x5b0ce9(0x170))var _0x1c70eb=users['Arabic'];}}}}}}}_0x4d2309[_0x5b0ce9(0x150)](_0x5b0ce9(0x16b),{'success':_0x3f9c6c[_0x5b0ce9(0x191)](_0x5b0ce9(0x14e)),'errors':_0x3f9c6c[_0x5b0ce9(0x191)](_0x5b0ce9(0x1b4)),'role':_0x4723a7,'profile':_0x2b3d86,'user':_0x158510,'master_shop':_0x1e486b,'language':_0x1c70eb});}catch(_0x53c2b0){console['log'](_0x53c2b0);}}),router[a0_0x3070b7(0x1a4)]('/categories',auth,async(_0x4afb1e,_0x13a0f5)=>{const _0x1f5c7c=a0_0x3070b7;try{const {name:_0x2b3894,products:_0x1c51df}=_0x4afb1e[_0x1f5c7c(0x1f2)],_0x14742b=new categories({'name':_0x2b3894,'products':_0x1c51df}),_0x3c590c=await categories[_0x1f5c7c(0x15e)]({'name':_0x2b3894});_0x3c590c?_0x4afb1e[_0x1f5c7c(0x191)](_0x1f5c7c(0x1b4),_0x2b3894+_0x1f5c7c(0x1dd)):_0x4afb1e[_0x1f5c7c(0x191)](_0x1f5c7c(0x14e),_0x2b3894+_0x1f5c7c(0x1f1));const _0x2c5f92=await _0x14742b[_0x1f5c7c(0x18f)]();_0x13a0f5[_0x1f5c7c(0x149)](_0x1f5c7c(0x1b2));}catch(_0x4976de){console[_0x1f5c7c(0x1be)](_0x4976de);}}),router[a0_0x3070b7(0x164)]('/categories/:id',auth,async(_0x1b7857,_0x5706c1)=>{const _0x1eb1e6=a0_0x3070b7;try{const {username:_0x479c7c,email:_0xa34cc5,role:_0x45c9f0}=_0x1b7857['user'],_0x590ae4=_0x1b7857[_0x1eb1e6(0x1bc)],_0x3d2249=await profile['findOne']({'email':_0x590ae4[_0x1eb1e6(0x165)]}),_0x2961be=await master_shop[_0x1eb1e6(0x17e)]();console['log'](_0x1eb1e6(0x1f9),_0x2961be);const _0x51a97a=_0x1b7857[_0x1eb1e6(0x19a)]['id'];console[_0x1eb1e6(0x1be)](_0x51a97a);const _0xbbfe96=await categories['findById'](_0x51a97a);if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x1e1))var _0x5151f6=users[_0x1eb1e6(0x1b3)];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x19d))var _0x5151f6=users[_0x1eb1e6(0x19d)];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x1fd))var _0x5151f6=users[_0x1eb1e6(0x1fd)];else{if(_0x2961be[0x0]['language']==_0x1eb1e6(0x1a5))var _0x5151f6=users['Spanish'];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x1ee))var _0x5151f6=users[_0x1eb1e6(0x1ee)];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]=='Portuguese\x20(BR)')var _0x5151f6=users[_0x1eb1e6(0x1e5)];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x1d9))var _0x5151f6=users[_0x1eb1e6(0x1d9)];else{if(_0x2961be[0x0][_0x1eb1e6(0x180)]==_0x1eb1e6(0x170))var _0x5151f6=users['Arabic'];}}}}}}}_0x5706c1['render'](_0x1eb1e6(0x16b),{'success':_0x1b7857[_0x1eb1e6(0x191)](_0x1eb1e6(0x14e)),'errors':_0x1b7857['flash'](_0x1eb1e6(0x1b4)),'role':_0x590ae4,'profile':_0x3d2249,'master_shop':_0x2961be,'user':_0xbbfe96,'language':_0x5151f6});}catch(_0x286001){console[_0x1eb1e6(0x1be)](_0x286001);}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1a1),auth,async(_0x31a2dd,_0x219456)=>{const _0x32ac83=a0_0x3070b7;try{const _0x3d6310=_0x31a2dd['params']['id'],_0x246fd8=await categories[_0x32ac83(0x19f)](_0x3d6310,_0x31a2dd[_0x32ac83(0x1f2)]);_0x31a2dd[_0x32ac83(0x191)](_0x32ac83(0x14e),''+users[_0x32ac83(0x1ff)]),_0x219456[_0x32ac83(0x149)](_0x32ac83(0x1b2));}catch(_0x20df62){console[_0x32ac83(0x1be)](_0x20df62);}}),router['get']('/categories/delete/:id',auth,async(_0x3c3506,_0x5abc14)=>{const _0x42bec5=a0_0x3070b7;try{const _0x49a12d=_0x3c3506[_0x42bec5(0x19a)]['id'],_0x155401=await categories['findByIdAndDelete'](_0x49a12d);_0x3c3506[_0x42bec5(0x191)](_0x42bec5(0x14e),_0x42bec5(0x1b9)),_0x5abc14[_0x42bec5(0x149)](_0x42bec5(0x1b2));}catch(_0x2ec00e){console['log'](_0x2ec00e);}}),router[a0_0x3070b7(0x164)]('/brands',auth,async(_0xc92347,_0x335ca5)=>{const _0x3eb677=a0_0x3070b7;try{const {username:_0x1aa9f8,email:_0x28eb5b,role:_0x3acfdc}=_0xc92347['user'],_0x452905=_0xc92347['user'],_0x24ae1e=await profile[_0x3eb677(0x15e)]({'email':_0x452905[_0x3eb677(0x165)]}),_0x3af1a0=await master_shop['find']();console['log'](_0x3eb677(0x1f9),_0x3af1a0);const _0x18ed39=await brands[_0x3eb677(0x17e)]();if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x1e1))var _0x6cff45=users['English'];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x19d))var _0x6cff45=users[_0x3eb677(0x19d)];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x1fd))var _0x6cff45=users[_0x3eb677(0x1fd)];else{if(_0x3af1a0[0x0]['language']==_0x3eb677(0x1a5))var _0x6cff45=users['Spanish'];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]=='French')var _0x6cff45=users['French'];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x155))var _0x6cff45=users['Portuguese'];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x1d9))var _0x6cff45=users[_0x3eb677(0x1d9)];else{if(_0x3af1a0[0x0][_0x3eb677(0x180)]==_0x3eb677(0x170))var _0x6cff45=users[_0x3eb677(0x1d0)];}}}}}}}_0x335ca5['render'](_0x3eb677(0x1a8),{'success':_0xc92347[_0x3eb677(0x191)]('success'),'errors':_0xc92347['flash'](_0x3eb677(0x1b4)),'role':_0x452905,'profile':_0x24ae1e,'master_shop':_0x3af1a0,'user':_0x18ed39,'language':_0x6cff45});}catch(_0x11a77c){console['log'](_0x11a77c);}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1d8),auth,async(_0x33c8e6,_0x25de20)=>{const _0x451f40=a0_0x3070b7;try{const {name:_0x40c8bc,products:_0x16b7e2}=_0x33c8e6[_0x451f40(0x1f2)],_0x54b065=new brands({'name':_0x40c8bc,'products':_0x16b7e2}),_0x566a56=await brands[_0x451f40(0x15e)]({'name':_0x40c8bc});_0x566a56?_0x33c8e6[_0x451f40(0x191)](_0x451f40(0x1b4),_0x40c8bc+_0x451f40(0x17b)):_0x33c8e6['flash'](_0x451f40(0x14e),_0x40c8bc+'\x20brand\x20is\x20add\x20successfully');const _0x21d491=await _0x54b065['save']();_0x25de20['redirect'](_0x451f40(0x15f));}catch(_0x419645){console[_0x451f40(0x1be)](_0x419645);}}),router[a0_0x3070b7(0x164)]('/brands/:id',auth,async(_0x1f939f,_0x2e0d31)=>{const _0x43a011=a0_0x3070b7;try{const {username:_0x579c6b,email:_0x487ca5,role:_0xa70cc2}=_0x1f939f[_0x43a011(0x1bc)],_0x50b9e8=_0x1f939f['user'],_0x15c127=await profile[_0x43a011(0x15e)]({'email':_0x50b9e8[_0x43a011(0x165)]}),_0x146167=await master_shop[_0x43a011(0x17e)]();console[_0x43a011(0x1be)](_0x43a011(0x1f9),_0x146167);const _0x509236=_0x1f939f['params']['id'];console[_0x43a011(0x1be)](_0x509236);const _0x104044=await brands[_0x43a011(0x1ad)](_0x509236);if(_0x146167[0x0][_0x43a011(0x180)]==_0x43a011(0x1e1))var _0x1c4347=users[_0x43a011(0x1b3)];else{if(_0x146167[0x0][_0x43a011(0x180)]==_0x43a011(0x19d))var _0x1c4347=users[_0x43a011(0x19d)];else{if(_0x146167[0x0][_0x43a011(0x180)]=='German')var _0x1c4347=users['German'];else{if(_0x146167[0x0]['language']==_0x43a011(0x1a5))var _0x1c4347=users['Spanish'];else{if(_0x146167[0x0]['language']=='French')var _0x1c4347=users[_0x43a011(0x1ee)];else{if(_0x146167[0x0][_0x43a011(0x180)]==_0x43a011(0x155))var _0x1c4347=users['Portuguese'];else{if(_0x146167[0x0][_0x43a011(0x180)]==_0x43a011(0x1d9))var _0x1c4347=users[_0x43a011(0x1d9)];else{if(_0x146167[0x0][_0x43a011(0x180)]==_0x43a011(0x170))var _0x1c4347=users[_0x43a011(0x1d0)];}}}}}}}_0x2e0d31[_0x43a011(0x150)]('brands',{'success':_0x1f939f['flash'](_0x43a011(0x14e)),'errors':_0x1f939f[_0x43a011(0x191)]('errors'),'role':_0x50b9e8,'profile':_0x15c127,'master_shop':_0x146167,'user':_0x104044,'language':_0x1c4347});}catch(_0x1bc2df){console['log'](_0x1bc2df);}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1dc),auth,async(_0x2a3a85,_0x307585)=>{const _0x9939a9=a0_0x3070b7;try{const _0x573b4b=_0x2a3a85[_0x9939a9(0x19a)]['id'],_0x324fb6=await brands['findByIdAndUpdate'](_0x573b4b,_0x2a3a85['body']);_0x2a3a85['flash'](_0x9939a9(0x14e),_0x9939a9(0x154)),_0x307585[_0x9939a9(0x149)](_0x9939a9(0x15f));}catch(_0x5add22){console['log'](_0x5add22);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x1e6),auth,async(_0x3e924b,_0x46e44b)=>{const _0x3fe5ae=a0_0x3070b7;try{const _0x265074=_0x3e924b['params']['id'],_0x2c79b3=await brands[_0x3fe5ae(0x1a7)](_0x265074);_0x3e924b[_0x3fe5ae(0x191)](_0x3fe5ae(0x14e),_0x3fe5ae(0x1eb)),_0x46e44b[_0x3fe5ae(0x149)]('/products/brands');}catch(_0x4630a6){console[_0x3fe5ae(0x1be)](_0x4630a6);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x146),auth,async(_0x57003a,_0xf2e23a)=>{const _0x3d89a8=a0_0x3070b7;try{const {username:_0x4c0497,email:_0x195783,role:_0x4cd512}=_0x57003a[_0x3d89a8(0x1bc)],_0x253161=_0x57003a[_0x3d89a8(0x1bc)],_0x3874d1=await profile['findOne']({'email':_0x253161[_0x3d89a8(0x165)]}),_0xc9c15d=await master_shop['find']();console[_0x3d89a8(0x1be)](_0x3d89a8(0x1f9),_0xc9c15d);const _0x366be7=await units[_0x3d89a8(0x17e)]();if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x1e1))var _0x268b19=users[_0x3d89a8(0x1b3)];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x19d))var _0x268b19=users[_0x3d89a8(0x19d)];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x1fd))var _0x268b19=users[_0x3d89a8(0x1fd)];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x1a5))var _0x268b19=users[_0x3d89a8(0x1a5)];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x1ee))var _0x268b19=users[_0x3d89a8(0x1ee)];else{if(_0xc9c15d[0x0]['language']=='Portuguese\x20(BR)')var _0x268b19=users['Portuguese'];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x1d9))var _0x268b19=users[_0x3d89a8(0x1d9)];else{if(_0xc9c15d[0x0][_0x3d89a8(0x180)]==_0x3d89a8(0x170))var _0x268b19=users[_0x3d89a8(0x1d0)];}}}}}}}_0xf2e23a[_0x3d89a8(0x150)](_0x3d89a8(0x1fe),{'success':_0x57003a[_0x3d89a8(0x191)](_0x3d89a8(0x14e)),'errors':_0x57003a[_0x3d89a8(0x191)]('errors'),'role':_0x253161,'profile':_0x3874d1,'master_shop':_0xc9c15d,'user':_0x366be7,'language':_0x268b19});}catch(_0x33e802){console[_0x3d89a8(0x1be)](_0x33e802);}}),router['post']('/units',auth,async(_0x19e329,_0x20c7b8)=>{const _0x168b8c=a0_0x3070b7;try{const {name:_0x3aaad0,secondary_unit:_0x21e075,products:_0x3a1877}=_0x19e329['body'],_0x3fa30e=new units({'name':_0x3aaad0,'secondary_unit':_0x21e075,'products':_0x3a1877}),_0x4087da=await units[_0x168b8c(0x15e)]({'name':_0x3aaad0});_0x4087da?_0x19e329[_0x168b8c(0x191)](_0x168b8c(0x1b4),_0x3aaad0+_0x168b8c(0x1ca)):_0x19e329[_0x168b8c(0x191)](_0x168b8c(0x14e),_0x3aaad0+_0x168b8c(0x1f8));const _0x28113f=await _0x3fa30e['save']();_0x20c7b8[_0x168b8c(0x149)](_0x168b8c(0x17f));}catch(_0x3e3c4b){console[_0x168b8c(0x1be)](_0x3e3c4b);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x172),auth,async(_0x2ca9e1,_0x4159ed)=>{const _0x4aced0=a0_0x3070b7;try{const {username:_0x1c0e2d,email:_0xd3eff6,role:_0x55f649}=_0x2ca9e1['user'],_0x31ec63=_0x2ca9e1['user'],_0x3f066b=await profile[_0x4aced0(0x15e)]({'email':_0x31ec63['email']}),_0x45ef77=await master_shop[_0x4aced0(0x17e)]();console[_0x4aced0(0x1be)]('master',_0x45ef77);const _0x4c8ef0=_0x2ca9e1[_0x4aced0(0x19a)]['id'],_0x5f1e82=await units[_0x4aced0(0x1ad)](_0x4c8ef0);if(_0x45ef77[0x0][_0x4aced0(0x180)]==_0x4aced0(0x1e1))var _0x449997=users['English'];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]=='Hindi')var _0x449997=users[_0x4aced0(0x19d)];else{if(_0x45ef77[0x0]['language']=='German')var _0x449997=users['German'];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]==_0x4aced0(0x1a5))var _0x449997=users['Spanish'];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]=='French')var _0x449997=users[_0x4aced0(0x1ee)];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]=='Portuguese\x20(BR)')var _0x449997=users[_0x4aced0(0x1e5)];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]==_0x4aced0(0x1d9))var _0x449997=users[_0x4aced0(0x1d9)];else{if(_0x45ef77[0x0][_0x4aced0(0x180)]==_0x4aced0(0x170))var _0x449997=users[_0x4aced0(0x1d0)];}}}}}}}_0x4159ed[_0x4aced0(0x150)](_0x4aced0(0x1fe),{'success':_0x2ca9e1[_0x4aced0(0x191)](_0x4aced0(0x14e)),'errors':_0x2ca9e1[_0x4aced0(0x191)](_0x4aced0(0x1b4)),'role':_0x31ec63,'profile':_0x3f066b,'master_shop':_0x45ef77,'user':_0x5f1e82,'language':_0x449997});}catch(_0x5f2be8){console[_0x4aced0(0x1be)](_0x5f2be8);}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x172),auth,async(_0x26e2af,_0x19b780)=>{const _0x46af04=a0_0x3070b7;try{const _0x39544d=_0x26e2af[_0x46af04(0x19a)]['id'],_0x56cd01=await units[_0x46af04(0x19f)](_0x39544d,_0x26e2af['body']);_0x26e2af[_0x46af04(0x191)](_0x46af04(0x14e),_0x46af04(0x1a0)),_0x19b780[_0x46af04(0x149)](_0x46af04(0x17f));}catch(_0xdd9f72){console[_0x46af04(0x1be)](_0xdd9f72);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x17c),auth,async(_0x36b261,_0x25c04e)=>{const _0x1d79cb=a0_0x3070b7;try{const _0x991401=_0x36b261['params']['id'],_0x5a0754=await units[_0x1d79cb(0x1a7)](_0x991401);_0x36b261[_0x1d79cb(0x191)](_0x1d79cb(0x14e),'unit\x20data\x20delete\x20successfully'),_0x25c04e[_0x1d79cb(0x149)](_0x1d79cb(0x17f));}catch(_0x3f2463){console[_0x1d79cb(0x1be)](_0x3f2463);}});const storage=multer[a0_0x3070b7(0x13e)]({'destination':(_0x154902,_0x3048ae,_0x57b316)=>{const _0x23e757=a0_0x3070b7;_0x57b316(null,_0x23e757(0x1d3));},'filename':(_0x5b06bc,_0xede1c,_0x13f9a8)=>{const _0x3483cd=a0_0x3070b7;_0x13f9a8(null,Date['now']()+_0xede1c[_0x3483cd(0x1db)]);}}),upload=multer({'storage':storage});router[a0_0x3070b7(0x164)](a0_0x3070b7(0x16a),auth,async(_0x586d0a,_0x5002bb)=>{const _0x24849=a0_0x3070b7;try{const {username:_0x55ee3e,email:_0x445f9d,role:_0x9b3c74}=_0x586d0a[_0x24849(0x1bc)],_0x114c5=_0x586d0a[_0x24849(0x1bc)],_0x7495bc=await profile['findOne']({'email':_0x114c5[_0x24849(0x165)]}),_0x2323fc={'year':_0x24849(0x161),'month':_0x24849(0x1fa),'day':_0x24849(0x161)},_0x242023=await master_shop[_0x24849(0x17e)]();console[_0x24849(0x1be)](_0x24849(0x181),_0x242023);const _0x58fffe=await product[_0x24849(0x17e)]();console[_0x24849(0x1be)](_0x24849(0x142),_0x58fffe);const _0x467c63=await warehouse[_0x24849(0x1ba)]([{'$unwind':_0x24849(0x1d4)},{'$lookup':{'from':_0x24849(0x140),'localField':'product_details.product_name','foreignField':_0x24849(0x199),'as':_0x24849(0x1ef)}},{'$unwind':_0x24849(0x1f4)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x24849(0x15d)}},{'$group':{'_id':_0x24849(0x18e),'product_stock':{'$sum':_0x24849(0x160)}}}]);console[_0x24849(0x1be)]('Products\x20warehouse_data',_0x467c63),_0x467c63[_0x24849(0x157)](_0x22471c=>{const _0x6ef15d=_0x24849,_0x297d09=_0x58fffe[_0x6ef15d(0x1ac)](_0x3537fe=>{const _0x4e4bf4=_0x6ef15d;_0x3537fe['name']==_0x22471c[_0x4e4bf4(0x1e8)]&&(_0x3537fe[_0x4e4bf4(0x1df)]=parseInt(_0x3537fe['stock'])+parseInt(_0x22471c['product_stock']));});}),console[_0x24849(0x1be)](_0x24849(0x142),_0x58fffe);if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x1e1))var _0x3646c5=users[_0x24849(0x1b3)];else{if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x19d))var _0x3646c5=users[_0x24849(0x19d)];else{if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x1fd))var _0x3646c5=users[_0x24849(0x1fd)];else{if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x1a5))var _0x3646c5=users['Spanish'];else{if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x1ee))var _0x3646c5=users['French'];else{if(_0x242023[0x0][_0x24849(0x180)]=='Portuguese\x20(BR)')var _0x3646c5=users[_0x24849(0x1e5)];else{if(_0x242023[0x0][_0x24849(0x180)]==_0x24849(0x1d9))var _0x3646c5=users[_0x24849(0x1d9)];else{if(_0x242023[0x0]['language']==_0x24849(0x170))var _0x3646c5=users[_0x24849(0x1d0)];}}}}}}}_0x5002bb[_0x24849(0x150)](_0x24849(0x140),{'success':_0x586d0a['flash'](_0x24849(0x14e)),'errors':_0x586d0a['flash'](_0x24849(0x1b4)),'alldata':_0x58fffe,'profile':_0x7495bc,'master_shop':_0x242023,'role':_0x114c5,'product_stock':_0x467c63,'language':_0x3646c5});}catch(_0x565c56){console[_0x24849(0x1be)](_0x565c56);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x152),auth,async(_0x522d65,_0xeb4b95)=>{const _0x62e9c6=a0_0x3070b7;try{const {username:_0x334d10,email:_0x38e12d,role:_0x3ba10e}=_0x522d65['user'],_0x40cce1=_0x522d65[_0x62e9c6(0x1bc)],_0x5acb3f=await profile[_0x62e9c6(0x15e)]({'email':_0x40cce1[_0x62e9c6(0x165)]}),_0x86ea3b=await master_shop['find']();console[_0x62e9c6(0x1be)](_0x62e9c6(0x1f9),_0x86ea3b);const _0x2d14dd=await categories[_0x62e9c6(0x17e)]({}),_0x1562f3=await brands[_0x62e9c6(0x17e)]({}),_0x4e6a7b=await units[_0x62e9c6(0x17e)]({}),_0x236433=await warehouse[_0x62e9c6(0x17e)]({'status':'Enabled'});if(_0x86ea3b[0x0][_0x62e9c6(0x180)]==_0x62e9c6(0x1e1))var _0x9ab688=users['English'];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]==_0x62e9c6(0x19d))var _0x9ab688=users['Hindi'];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]=='German')var _0x9ab688=users['German'];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]=='Spanish')var _0x9ab688=users[_0x62e9c6(0x1a5)];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]=='French')var _0x9ab688=users[_0x62e9c6(0x1ee)];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]==_0x62e9c6(0x155))var _0x9ab688=users[_0x62e9c6(0x1e5)];else{if(_0x86ea3b[0x0]['language']==_0x62e9c6(0x1d9))var _0x9ab688=users[_0x62e9c6(0x1d9)];else{if(_0x86ea3b[0x0][_0x62e9c6(0x180)]=='Arabic\x20(ae)')var _0x9ab688=users[_0x62e9c6(0x1d0)];}}}}}}}_0xeb4b95['render'](_0x62e9c6(0x187),{'success':_0x522d65[_0x62e9c6(0x191)]('success'),'errors':_0x522d65[_0x62e9c6(0x191)](_0x62e9c6(0x1b4)),'role':_0x40cce1,'profile':_0x5acb3f,'categories':_0x2d14dd,'brands':_0x1562f3,'master_shop':_0x86ea3b,'units':_0x4e6a7b,'language':_0x9ab688,'find_data':_0x236433});}catch(_0x3053e1){console[_0x62e9c6(0x1be)](_0x3053e1);}}),router['post'](a0_0x3070b7(0x152),auth,upload[a0_0x3070b7(0x175)](a0_0x3070b7(0x19c)),async(_0x17855c,_0x395cab)=>{const _0x40ca18=a0_0x3070b7;try{const {name:_0x23f96b,category:_0x42baf5,brand:_0x19ce5e,unit:_0x2f2b71,alertquantity:_0x259183,stock:_0x35dcb4,product_code:_0x5272aa,warehouse:_0x19ff19,primary_ItemCode:_0x273924,second_ItemCode:_0x233338,second_unit:_0x3c2344,maxPerUnit:_0x58708f,MaxPerProduct:_0x4e4e6d}=_0x17855c[_0x40ca18(0x1f2)],_0x53a3b5=_0x17855c[_0x40ca18(0x1cc)]?.[_0x40ca18(0x19b)]||_0x40ca18(0x1bf),_0x11d5ff=new product({'image':_0x53a3b5,'name':_0x23f96b,'category':_0x42baf5,'brand':_0x19ce5e,'unit':_0x2f2b71,'alertquantity':_0x259183,'stock':_0x35dcb4,'product_code':_0x5272aa,'warehouse':_0x19ff19,'primary_code':_0x273924,'secondary_code':_0x233338,'second_unit':_0x3c2344,'maxStocks':_0x4e4e6d,'maxProdPerUnit':_0x58708f}),_0x1b68dd=await _0x11d5ff['save'](),_0x8c4dc=await categories['findOne']({'name':_0x42baf5});_0x8c4dc[_0x40ca18(0x140)]=parseInt(_0x8c4dc[_0x40ca18(0x140)])+0x1,await _0x8c4dc['save']();const _0x968456=await brands['findOne']({'name':_0x19ce5e});_0x968456[_0x40ca18(0x140)]=parseInt(_0x968456['products'])+0x1,await _0x968456[_0x40ca18(0x18f)]();const _0x441415=await units[_0x40ca18(0x15e)]({'name':_0x2f2b71});_0x441415[_0x40ca18(0x140)]=parseInt(_0x441415['products'])+0x1,await _0x441415[_0x40ca18(0x18f)](),_0x17855c[_0x40ca18(0x191)](_0x40ca18(0x14e),_0x40ca18(0x200)),_0x395cab[_0x40ca18(0x149)](_0x40ca18(0x1de));}catch(_0x5de3c){console[_0x40ca18(0x1be)](_0x5de3c);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x1f0),auth,async(_0x93682e,_0xbc501a)=>{const _0x5ba99f=a0_0x3070b7;try{const {username:_0x50f5e5,email:_0x3f278b,role:_0x20b0e9}=_0x93682e[_0x5ba99f(0x1bc)],_0x259224=_0x93682e[_0x5ba99f(0x1bc)],_0x4b21e7=await profile[_0x5ba99f(0x15e)]({'email':_0x259224[_0x5ba99f(0x165)]}),_0x35c442=await master_shop[_0x5ba99f(0x17e)]();console[_0x5ba99f(0x1be)](_0x5ba99f(0x17d),_0x35c442);const _0x5664df=_0x93682e[_0x5ba99f(0x19a)]['id'],_0x29dffd=await product[_0x5ba99f(0x1ad)](_0x5664df),_0x437240=await categories[_0x5ba99f(0x17e)]({}),_0x463e15=await brands[_0x5ba99f(0x17e)]({}),_0x2f200c=await units[_0x5ba99f(0x17e)]({}),_0x5181e1=await warehouse[_0x5ba99f(0x17e)]({'status':_0x5ba99f(0x18b)}),_0x5c1cc3=await units['aggregate']([{'$group':{'_id':'$_id','secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x35c442[0x0]['language']=='English\x20(US)')var _0xeb0e82=users[_0x5ba99f(0x1b3)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x19d))var _0xeb0e82=users[_0x5ba99f(0x19d)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x1fd))var _0xeb0e82=users[_0x5ba99f(0x1fd)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x1a5))var _0xeb0e82=users[_0x5ba99f(0x1a5)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x1ee))var _0xeb0e82=users[_0x5ba99f(0x1ee)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x155))var _0xeb0e82=users[_0x5ba99f(0x1e5)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x1d9))var _0xeb0e82=users[_0x5ba99f(0x1d9)];else{if(_0x35c442[0x0][_0x5ba99f(0x180)]==_0x5ba99f(0x170))var _0xeb0e82=users[_0x5ba99f(0x1d0)];}}}}}}}_0xbc501a[_0x5ba99f(0x150)]('edit_product',{'success':_0x93682e[_0x5ba99f(0x191)](_0x5ba99f(0x14e)),'errors':_0x93682e[_0x5ba99f(0x191)](_0x5ba99f(0x1b4)),'role':_0x259224,'profile':_0x4b21e7,'alldata':_0x29dffd,'categories':_0x437240,'brands':_0x463e15,'master_shop':_0x35c442,'units':_0x2f200c,'secondunit':_0x5c1cc3,'find_data':_0x5181e1,'language':_0xeb0e82});}catch(_0x3fae41){console[_0x5ba99f(0x1be)](_0x3fae41);}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1f0),auth,upload[a0_0x3070b7(0x175)](a0_0x3070b7(0x19c)),async(_0x3bd227,_0x26f3c4)=>{const _0x160c33=a0_0x3070b7;try{console[_0x160c33(0x1be)](_0x160c33(0x195));const _0x242e97=_0x3bd227[_0x160c33(0x19a)]['id'],_0x1cd670=await product[_0x160c33(0x1ad)](_0x242e97),{image:_0x591ddc,name:_0x213cf7,category:_0x114caa,brand:_0x4320f7,sku:_0x2220b7,unit:_0x20cba7,alertquantity:_0x40a858,product_code:_0x2edec5,warehouse:_0x3adb6d,primary_ItemCode:_0x21f63a,second_ItemCode:_0x122b9f,second_unit:_0x2fa03f,maxPerUnit:_0x2c9bf3,MaxPerProduct:_0xe839a,prod_catdata:_0x1fe393}=_0x3bd227[_0x160c33(0x1f2)];_0x3bd227['file']&&(_0x1cd670[_0x160c33(0x19c)]=_0x3bd227[_0x160c33(0x1cc)][_0x160c33(0x19b)]);_0x1cd670[_0x160c33(0x199)]=_0x213cf7,_0x1cd670[_0x160c33(0x147)]=_0x114caa,_0x1cd670[_0x160c33(0x18d)]=_0x4320f7,_0x1cd670[_0x160c33(0x173)]=_0x2220b7,_0x1cd670[_0x160c33(0x16f)]=_0x20cba7,_0x1cd670[_0x160c33(0x1da)]=_0x40a858,_0x1cd670[_0x160c33(0x1b0)]=_0x2edec5,_0x1cd670['warehouse']=_0x3adb6d,_0x1cd670[_0x160c33(0x1d2)]=_0x21f63a,_0x1cd670['secondary_code']=_0x122b9f,_0x1cd670[_0x160c33(0x197)]=_0x2fa03f,_0x1cd670[_0x160c33(0x1a6)]=_0xe839a,_0x1cd670['maxProdPerUnit']=_0x2c9bf3,_0x1cd670[_0x160c33(0x1ae)]=_0x1fe393;const _0x2137a8=await _0x1cd670[_0x160c33(0x18f)]();console[_0x160c33(0x1be)](_0x160c33(0x1c7),_0x1cd670),_0x3bd227[_0x160c33(0x191)](_0x160c33(0x14e),'product\x20update\x20successfully'),_0x26f3c4[_0x160c33(0x149)](_0x160c33(0x1de));}catch(_0x463f9b){console[_0x160c33(0x1be)](_0x463f9b);}}),router['get'](a0_0x3070b7(0x143),auth,async(_0xde2c38,_0x1c9db2)=>{const _0x132c0c=a0_0x3070b7;try{const {username:_0x24d5fb,email:_0x345439,role:_0x35ac32}=_0xde2c38[_0x132c0c(0x1bc)],_0x17f276=_0xde2c38[_0x132c0c(0x1bc)],_0x178e4b=await profile['findOne']({'email':_0x17f276[_0x132c0c(0x165)]}),_0x186ca5=await master_shop[_0x132c0c(0x17e)]();console['log'](_0x132c0c(0x1a3),_0x186ca5);const _0x28827b=_0xde2c38[_0x132c0c(0x19a)]['id'],_0x22b38e=await product[_0x132c0c(0x1ad)](_0x28827b);console[_0x132c0c(0x1be)](_0x132c0c(0x179),_0x22b38e);if(_0x186ca5[0x0][_0x132c0c(0x180)]=='English\x20(US)')var _0x5770f7=users[_0x132c0c(0x1b3)];else{if(_0x186ca5[0x0]['language']==_0x132c0c(0x19d))var _0x5770f7=users[_0x132c0c(0x19d)];else{if(_0x186ca5[0x0][_0x132c0c(0x180)]==_0x132c0c(0x1fd))var _0x5770f7=users[_0x132c0c(0x1fd)];else{if(_0x186ca5[0x0][_0x132c0c(0x180)]==_0x132c0c(0x1a5))var _0x5770f7=users[_0x132c0c(0x1a5)];else{if(_0x186ca5[0x0][_0x132c0c(0x180)]==_0x132c0c(0x1ee))var _0x5770f7=users['French'];else{if(_0x186ca5[0x0][_0x132c0c(0x180)]==_0x132c0c(0x155))var _0x5770f7=users['Portuguese'];else{if(_0x186ca5[0x0]['language']==_0x132c0c(0x1d9))var _0x5770f7=users[_0x132c0c(0x1d9)];else{if(_0x186ca5[0x0][_0x132c0c(0x180)]=='Arabic\x20(ae)')var _0x5770f7=users[_0x132c0c(0x1d0)];}}}}}}}_0x1c9db2['render'](_0x132c0c(0x189),{'success':_0xde2c38[_0x132c0c(0x191)](_0x132c0c(0x14e)),'errors':_0xde2c38[_0x132c0c(0x191)](_0x132c0c(0x1b4)),'role':_0x17f276,'profile':_0x178e4b,'alldata':_0x22b38e,'master_shop':_0x186ca5,'language':_0x5770f7});}catch(_0x994272){console['log'](_0x994272);}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x15b),auth,async(_0x185611,_0x56fc26)=>{const _0x4cefcf=a0_0x3070b7;try{const _0x4d5f3e=new excelJS[(_0x4cefcf(0x184))](),_0x7d87b=_0x4d5f3e['addWorksheet'](_0x4cefcf(0x1cf));return _0x7d87b[_0x4cefcf(0x1f5)]=[{'header':_0x4cefcf(0x1c2),'key':_0x4cefcf(0x17a),'width':0xa},{'header':'Brands','key':_0x4cefcf(0x1c1),'width':0xa},{'header':_0x4cefcf(0x1fc),'key':'PUnits','width':0xa},{'header':_0x4cefcf(0x1b5),'key':_0x4cefcf(0x1aa),'width':0xa},{'header':_0x4cefcf(0x14c),'key':_0x4cefcf(0x1f3),'width':0xa},{'header':_0x4cefcf(0x148),'key':_0x4cefcf(0x1c5),'width':0xa},{'header':_0x4cefcf(0x169),'key':_0x4cefcf(0x1c5),'width':0xa},{'header':_0x4cefcf(0x176),'key':'ProductCode','width':0xa},{'header':_0x4cefcf(0x168),'key':_0x4cefcf(0x194),'width':0xa},{'header':_0x4cefcf(0x1ed),'key':_0x4cefcf(0x14d),'width':0xa},{'header':'Maximum_Stocks','key':_0x4cefcf(0x14d),'width':0xa},{'header':_0x4cefcf(0x14a),'key':'Prod_Cat','width':0xa}],_0x56fc26[_0x4cefcf(0x1d5)](_0x4cefcf(0x16e),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x56fc26[_0x4cefcf(0x1d5)](_0x4cefcf(0x192),_0x4cefcf(0x162)),_0x4d5f3e['xlsx']['write'](_0x56fc26)[_0x4cefcf(0x188)](()=>{const _0x1bca85=_0x4cefcf;_0x56fc26[_0x1bca85(0x163)](0xc8);});}catch(_0x5e88d6){_0x56fc26[_0x4cefcf(0x163)](0x190)['send'](_0x5e88d6);}});const storage1=multer[a0_0x3070b7(0x13e)]({'destination':(_0x12f26b,_0x26cbdb,_0x3c9748)=>{const _0x4b5a70=a0_0x3070b7;_0x3c9748(null,_0x4b5a70(0x1c4));},'filename':(_0x3d52d7,_0x385e74,_0x31f5b7)=>{const _0x1d0fa1=a0_0x3070b7;_0x31f5b7(null,Date[_0x1d0fa1(0x1a9)]()+_0x385e74['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x4dbe(_0xa7a1cd,_0x4ef110){const _0x43e811=a0_0x43e8();return a0_0x4dbe=function(_0x4dbe05,_0x549640){_0x4dbe05=_0x4dbe05-0x13e;let _0x1c7f52=_0x43e811[_0x4dbe05];return _0x1c7f52;},a0_0x4dbe(_0xa7a1cd,_0x4ef110);}router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x193),auth,uploadMigrate[a0_0x3070b7(0x175)](a0_0x3070b7(0x178)),async(_0x5e7990,_0x501e1b)=>{const _0x507e1d=a0_0x3070b7,_0x40c642=_0x5e7990[_0x507e1d(0x1cc)]['filename'],_0x3393a0=await xlsx[_0x507e1d(0x1e2)](_0x507e1d(0x1cd)+_0x40c642);let _0x21fa67=_0x3393a0['SheetNames'],_0x574244=xlsx[_0x507e1d(0x14b)][_0x507e1d(0x1b7)](_0x3393a0[_0x507e1d(0x1d6)][_0x21fa67[0x0]]);for(const _0x7f3d2a of _0x574244){const _0x1ebf06=_0x7f3d2a['Product_Name'],_0x297da0=_0x7f3d2a['Brands'],_0x1b3b19=_0x7f3d2a[_0x507e1d(0x1fc)],_0x2345a1=_0x7f3d2a[_0x507e1d(0x1b5)],_0x1a5baa=_0x7f3d2a['Product_Code'],_0x5243a6=_0x7f3d2a[_0x507e1d(0x168)],_0x2a5a97=_0x7f3d2a[_0x507e1d(0x1ed)],_0x3c53f3=_0x7f3d2a[_0x507e1d(0x148)],_0x765348=_0x7f3d2a['Secondary_Code'],_0x2a51dd=_0x7f3d2a[_0x507e1d(0x15a)],_0x2dff2d=_0x7f3d2a[_0x507e1d(0x14c)],_0x496e99=_0x7f3d2a[_0x507e1d(0x14a)];try{let _0x1c46dd=await categories['findOne']({'name':_0x5243a6});if(!_0x1c46dd){const _0x2e15aa=new categories({'name':_0x5243a6,'products':'0'});_0x1c46dd=await _0x2e15aa[_0x507e1d(0x18f)]();}let _0x3e7935=await brands[_0x507e1d(0x15e)]({'name':_0x297da0});if(!_0x3e7935){const _0x3baeb1=new brands({'name':_0x297da0,'products':'0'});_0x3e7935=await _0x3baeb1[_0x507e1d(0x18f)]();}let _0x2cc822=await units[_0x507e1d(0x15e)]({'name':_0x1b3b19,'secondary_unit':_0x2345a1});if(!_0x2cc822){const _0x509680=new units({'name':_0x1b3b19,'secondary_unit':_0x2345a1,'products':'0'});_0x2cc822=await _0x509680[_0x507e1d(0x18f)]();}const _0x18ec31=await product[_0x507e1d(0x17e)]({'name':_0x1ebf06,'category':_0x1c46dd[_0x507e1d(0x199)],'brand':_0x3e7935[_0x507e1d(0x199)],'secondary_unit':_0x2cc822[_0x507e1d(0x197)],'product_code':_0x1a5baa});console['log'](_0x18ec31['length']+_0x507e1d(0x190)+_0x1c46dd[_0x507e1d(0x199)]+_0x507e1d(0x190)+_0x3e7935['name']+_0x507e1d(0x190)+_0x2cc822[_0x507e1d(0x197)]+_0x507e1d(0x190)+_0x1a5baa+'\x20<>\x20'+_0x1ebf06);if(_0x18ec31[_0x507e1d(0x1bd)]===0x0){const _0x5ba728=new product({'image':_0x507e1d(0x1bf),'name':_0x1ebf06,'category':_0x1c46dd[_0x507e1d(0x199)],'brand':_0x3e7935[_0x507e1d(0x199)],'unit':_0x2cc822[_0x507e1d(0x199)],'alertquantity':_0x2a5a97,'product_code':_0x1a5baa,'secondary_unit':_0x2cc822[_0x507e1d(0x197)],'primary_code':_0x3c53f3,'secondary_code':_0x765348,'maxStocks':_0x2a51dd,'maxProdPerUnit':_0x2dff2d,'product_category':_0x496e99}),_0x4bfc50=await _0x5ba728[_0x507e1d(0x18f)]();_0x1c46dd['products']=parseInt(_0x1c46dd[_0x507e1d(0x140)])+0x1,await _0x1c46dd['save'](),_0x3e7935[_0x507e1d(0x140)]=parseInt(_0x3e7935[_0x507e1d(0x140)])+0x1,await _0x3e7935[_0x507e1d(0x18f)](),_0x2cc822['products']=parseInt(_0x2cc822[_0x507e1d(0x140)])+0x1,await _0x2cc822[_0x507e1d(0x18f)](),_0x5e7990[_0x507e1d(0x191)](_0x507e1d(0x14e),_0x1ebf06+_0x507e1d(0x1f7));}else{console['log'](_0x18ec31[0x0]);const _0x3d9029=_0x18ec31[0x0];_0x3d9029[_0x507e1d(0x147)]=_0x1c46dd[_0x507e1d(0x199)],_0x3d9029[_0x507e1d(0x18d)]=_0x3e7935[_0x507e1d(0x199)],_0x3d9029[_0x507e1d(0x16f)]=_0x2cc822[_0x507e1d(0x199)],_0x3d9029[_0x507e1d(0x1da)]=_0x2a5a97,_0x3d9029[_0x507e1d(0x1b0)]=_0x1a5baa,_0x3d9029['secondary_unit']=_0x2cc822[_0x507e1d(0x197)],_0x3d9029[_0x507e1d(0x1d2)]=_0x3c53f3,_0x3d9029[_0x507e1d(0x18a)]=_0x765348,_0x3d9029[_0x507e1d(0x1a6)]=_0x2a51dd,_0x3d9029[_0x507e1d(0x1e4)]=_0x2dff2d,_0x3d9029[_0x507e1d(0x1ae)]=_0x496e99;const _0x5188b8=await _0x3d9029[_0x507e1d(0x18f)]();_0x5e7990[_0x507e1d(0x191)](_0x507e1d(0x14e),_0x5188b8[_0x507e1d(0x199)]+_0x507e1d(0x141));}}catch(_0x5b6b18){_0x501e1b[_0x507e1d(0x163)](0x1f4)[_0x507e1d(0x1bb)]({'proderror':_0x5b6b18[_0x507e1d(0x144)],'aproduct':_0x1ebf06});}}_0x501e1b['redirect'](_0x507e1d(0x1de));}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1fb),auth,async(_0xa58fdf,_0x83a272)=>{const _0x246532=a0_0x3070b7;try{console['log'](_0xa58fdf[_0x246532(0x1f2)]);const {data_cateory:_0x518b92,datachoose:_0x1ef784}=_0xa58fdf[_0x246532(0x1f2)];var _0x1480b9;if(_0x1ef784==_0x246532(0x1c0))_0x1480b9=await product[_0x246532(0x1ba)]([{'$group':{'_id':_0x246532(0x1ea)}}]);else{if(_0x1ef784=='brands')_0x1480b9=await product['aggregate']([{'$match':{'product_category':_0x518b92}},{'$group':{'_id':_0x246532(0x1f6)}}]);else _0x1ef784==_0x246532(0x16c)&&(_0x1480b9=await product[_0x246532(0x1ba)]([{'$match':{'product_category':_0x518b92}},{'$group':{'_id':_0x246532(0x15c)}}]));}_0x83a272[_0x246532(0x1bb)](_0x1480b9);}catch(_0x2d8b2c){_0x83a272['json']({'message':_0x2d8b2c['message']});}}),router[a0_0x3070b7(0x1a4)]('/filter_product',auth,async(_0x3a0d07,_0x58dac9)=>{const _0x56e3bc=a0_0x3070b7;try{const {data_choosing:_0x189329,data_selected:_0x557384}=_0x3a0d07[_0x56e3bc(0x1f2)];var _0xee92ef;if(_0x189329=='prod_categ')_0xee92ef=await product[_0x56e3bc(0x1ba)]([{'$match':{'product_category':_0x557384}}]);else{if(_0x189329==_0x56e3bc(0x1a8))_0xee92ef=await product[_0x56e3bc(0x1ba)]([{'$match':{'brand':_0x557384}}]);else _0x189329==_0x56e3bc(0x16c)&&(_0xee92ef=await product['aggregate']([{'$match':{'category':_0x557384}}]));}_0x58dac9['json'](_0xee92ef);}catch(_0x17d0e3){_0x58dac9[_0x56e3bc(0x1bb)]({'message':_0x17d0e3[_0x56e3bc(0x144)]});}}),router[a0_0x3070b7(0x164)](a0_0x3070b7(0x159),auth,async(_0x5a2e7e,_0x26c0d2)=>{const _0x1ccf8c=a0_0x3070b7,_0x27ac6a=_0x5a2e7e[_0x1ccf8c(0x1bc)],_0x4a93fb=await profile[_0x1ccf8c(0x15e)]({'email':_0x27ac6a[_0x1ccf8c(0x165)]}),_0x514d73=await master_shop['find'](),_0x2e51a6=await product[_0x1ccf8c(0x17e)]();if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x1e1))var _0x2e4e43=users[_0x1ccf8c(0x1b3)];else{if(_0x514d73[0x0]['language']=='Hindi')var _0x2e4e43=users[_0x1ccf8c(0x19d)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x1fd))var _0x2e4e43=users[_0x1ccf8c(0x1fd)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x1a5))var _0x2e4e43=users[_0x1ccf8c(0x1a5)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x1ee))var _0x2e4e43=users[_0x1ccf8c(0x1ee)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x155))var _0x2e4e43=users[_0x1ccf8c(0x1e5)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x1d9))var _0x2e4e43=users[_0x1ccf8c(0x1d9)];else{if(_0x514d73[0x0][_0x1ccf8c(0x180)]==_0x1ccf8c(0x170))var _0x2e4e43=users[_0x1ccf8c(0x1d0)];}}}}}}}_0x26c0d2[_0x1ccf8c(0x150)](_0x1ccf8c(0x182),{'success':_0x5a2e7e['flash']('success'),'errors':_0x5a2e7e[_0x1ccf8c(0x191)](_0x1ccf8c(0x1b4)),'role':_0x27ac6a,'profile':_0x4a93fb,'products':_0x2e51a6,'master_shop':_0x514d73,'language':_0x2e4e43});}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x166),auth,async(_0x1576f2,_0x37e4ab)=>{const _0x583231=a0_0x3070b7,_0x21e7ec=await product[_0x583231(0x17e)]();_0x37e4ab[_0x583231(0x1bb)]({'data':_0x21e7ec});}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x1ce),auth,async(_0x1fa9e3,_0xbea40e)=>{const _0x822199=a0_0x3070b7;try{const {dataProdCat:_0x23977b,dataProdIdentity:_0x37a3c1}=_0x1fa9e3[_0x822199(0x1f2)];var _0x447bd2;switch(_0x23977b){case'fg':switch(_0x37a3c1){case _0x822199(0x1c9):_0x447bd2=await product[_0x822199(0x1ba)]([{'$match':{'product_category':_0x822199(0x1b6)}},{'$group':{'_id':_0x822199(0x1f6)}},{'$project':{'brand':_0x822199(0x18c)}}]);break;case _0x822199(0x168):_0x447bd2=await product['aggregate']([{'$match':{'product_category':_0x822199(0x1b6)}},{'$group':{'_id':_0x822199(0x15c)}},{'$project':{'category':_0x822199(0x18c)}}]);break;}break;case'rm':switch(_0x37a3c1){case'Brands':_0x447bd2=await product[_0x822199(0x1ba)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x822199(0x1f6)}},{'$project':{'brand':_0x822199(0x18c)}}]);break;case _0x822199(0x168):_0x447bd2=await product[_0x822199(0x1ba)]([{'$match':{'product_category':_0x822199(0x185)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x822199(0x18c)}}]);break;}break;}_0xbea40e['json'](_0x447bd2);}catch(_0xa37d5a){_0xbea40e[_0x822199(0x1bb)]({'message':_0xa37d5a[_0x822199(0x144)]});}}),router[a0_0x3070b7(0x1a4)](a0_0x3070b7(0x14f),auth,async(_0x53d2f5,_0x38fe5b)=>{const _0x1263b2=a0_0x3070b7;try{console['log'](_0x53d2f5[_0x1263b2(0x1f2)]);const {prod_cat:_0x17b45a,identity:_0xdd757f,valueData:_0x4b0376,typeofbarcode:_0x102c4a}=_0x53d2f5[_0x1263b2(0x1f2)];let _0x45e7b2;switch(_0x17b45a){case'fg':if(_0xdd757f==_0x1263b2(0x1c9))_0x45e7b2=await product[_0x1263b2(0x1ba)]([{'$match':{'product_category':_0x1263b2(0x1b6),'brand':_0x4b0376}}]);else _0xdd757f==_0x1263b2(0x168)&&(_0x45e7b2=await product['aggregate']([{'$match':{'product_category':_0x1263b2(0x1b6),'category':_0x4b0376}}]));break;case'rm':if(_0xdd757f==_0x1263b2(0x1c9))_0x45e7b2=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x4b0376}}]);else _0xdd757f==_0x1263b2(0x168)&&(_0x45e7b2=await product[_0x1263b2(0x1ba)]([{'$match':{'product_category':_0x1263b2(0x185),'category':_0x4b0376}}]));break;}const _0x17e353=_0x5a6ec3=>_0x5a6ec3*0x48,_0x306594={'width':0x3,'height':0x1},_0x55e4a5=new PDFDocument({'margin':_0x17e353(0.75),'size':[_0x17e353(_0x306594['width']),_0x17e353(_0x306594[_0x1263b2(0x1af)])],'bufferPages':!![]}),_0x122506=_0x45e7b2['length'];for(let _0x465185=0x0;_0x465185<=_0x122506;_0x465185++){if(_0x465185!=_0x122506){const _0xcc2245=_0x45e7b2[_0x465185]['name'],_0x711b29=_0x45e7b2[_0x465185][_0x1263b2(0x1d2)],_0x17048a=_0x45e7b2[_0x465185][_0x1263b2(0x18a)],_0x398733=_0x45e7b2[_0x465185][_0x1263b2(0x1b0)];var _0x1a2a24;switch(_0x102c4a){case'1':_0x1a2a24=_0x711b29;break;case'2':_0x1a2a24=_0x17048a;break;case'3':_0x1a2a24=_0x398733;break;}const _0x4b7b69={'width':0xd2,'height':0x64},_0x57e83d={'width':_0x17e353(_0x306594[_0x1263b2(0x16d)]),'height':_0x17e353(_0x306594[_0x1263b2(0x1af)])},_0x5c4812=new Canvas();JsBarcode(_0x5c4812,_0x1a2a24,{'format':_0x1263b2(0x1c6),'height':_0x4b7b69[_0x1263b2(0x1af)],'displayValue':!![],'text':_0x1a2a24});const _0x584f92=_0x5c4812[_0x1263b2(0x171)](),_0x1225cd=_0x57e83d[_0x1263b2(0x16d)]/_0x4b7b69[_0x1263b2(0x16d)],_0x24a207=_0x57e83d['height']/_0x4b7b69[_0x1263b2(0x1af)],_0x183dbe=Math[_0x1263b2(0x151)](_0x1225cd,_0x24a207),_0x12a281=_0x4b7b69[_0x1263b2(0x16d)]*_0x183dbe,_0x2ad25b=_0x4b7b69[_0x1263b2(0x1af)]*_0x183dbe,_0x128cf1=(_0x57e83d['width']-_0x12a281)/0x2,_0x15d07c=(_0x57e83d['height']-_0x2ad25b)/0x2;_0x55e4a5[_0x1263b2(0x19c)](_0x584f92,_0x128cf1,_0x15d07c,{'width':_0x12a281,'height':_0x2ad25b}),_0x465185!=_0x122506&&_0x55e4a5[_0x1263b2(0x1cb)]();}}const _0xaf59=[];_0x55e4a5['on']('data',_0xaf59[_0x1263b2(0x186)][_0x1263b2(0x156)](_0xaf59)),_0x55e4a5['on']('end',()=>{const _0x4b0056=_0x1263b2,_0x2c2181=Buffer[_0x4b0056(0x1d1)](_0xaf59),_0x529a85=_0x2c2181['toString']('base64');_0x38fe5b[_0x4b0056(0x1bb)]({'pdfContent':_0x529a85});}),_0x55e4a5['end']();}catch(_0x598bab){_0x38fe5b[_0x1263b2(0x1bb)]({'message':_0x598bab['message']});}}),router[a0_0x3070b7(0x1a4)]('/print_barcode_filter_search/',auth,async(_0x161d86,_0x43cda8)=>{const _0xe3bdd9=a0_0x3070b7;try{console['log'](_0x161d86[_0xe3bdd9(0x1f2)]);const {prod_cat:_0x57393a,identity:_0x1ad2b4,valueData:_0x47f142}=_0x161d86['body'];let _0xb99678;switch(_0x57393a){case'fg':if(_0x1ad2b4=='Brands')_0xb99678=await product['aggregate']([{'$match':{'product_category':_0xe3bdd9(0x1b6),'brand':_0x47f142}}]);else _0x1ad2b4=='Category'&&(_0xb99678=await product[_0xe3bdd9(0x1ba)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x47f142}}]));break;case'rm':if(_0x1ad2b4==_0xe3bdd9(0x1c9))_0xb99678=await product[_0xe3bdd9(0x1ba)]([{'$match':{'product_category':_0xe3bdd9(0x185),'brand':_0x47f142}}]);else _0x1ad2b4==_0xe3bdd9(0x168)&&(_0xb99678=await product['aggregate']([{'$match':{'product_category':_0xe3bdd9(0x185),'category':_0x47f142}}]));break;}_0x43cda8[_0xe3bdd9(0x1bb)](_0xb99678);}catch(_0x3a2d39){_0x43cda8[_0xe3bdd9(0x1bb)]({'message':_0x3a2d39[_0xe3bdd9(0x144)]});}}),router['post']('/print_barcode_single/:id',auth,async(_0x5814c3,_0x321f2b)=>{const _0x151f65=a0_0x3070b7;try{const _0x2b9f86=_0x5814c3[_0x151f65(0x19a)]['id'],{copies:_0x32806f,typeofbarcode:_0x25c858}=_0x5814c3[_0x151f65(0x1f2)];var _0xc1b413=await product[_0x151f65(0x1ad)](_0x2b9f86);const _0x47a563=_0x5538e5=>_0x5538e5*0x48,_0xe6edca={'width':0x3,'height':0x1},_0x46edf2=new PDFDocument({'margin':_0x47a563(0.75),'size':[_0x47a563(_0xe6edca[_0x151f65(0x16d)]),_0x47a563(_0xe6edca[_0x151f65(0x1af)])],'bufferPages':!![]}),_0x1a8740=_0x32806f,_0x1ea8d9=_0xc1b413[_0x151f65(0x199)],_0x26817f=_0xc1b413[_0x151f65(0x1d2)],_0x1b36b0=_0xc1b413['secondary_code'],_0x5b386c=_0xc1b413['product_code'];let _0x201eb9;switch(_0x25c858){case'1':_0x201eb9=_0x26817f;break;case'2':_0x201eb9=_0x1b36b0;break;case'3':_0x201eb9=_0x5b386c;break;}const _0x12a525={'width':0xd2,'height':0x64},_0x1c7b5c={'width':_0x47a563(_0xe6edca[_0x151f65(0x16d)]),'height':_0x47a563(_0xe6edca['height'])};for(let _0xa0f2f5=0x1;_0xa0f2f5<=_0x1a8740;_0xa0f2f5++){const _0xaded03=new Canvas();JsBarcode(_0xaded03,_0x201eb9,{'format':'CODE128','height':_0x12a525[_0x151f65(0x1af)],'displayValue':!![],'text':_0x201eb9});const _0x464956=_0xaded03[_0x151f65(0x171)](),_0x5b6f8b=_0x1c7b5c[_0x151f65(0x16d)]/_0x12a525[_0x151f65(0x16d)],_0x338fb1=_0x1c7b5c[_0x151f65(0x1af)]/_0x12a525[_0x151f65(0x1af)],_0x2d2d58=Math[_0x151f65(0x151)](_0x5b6f8b,_0x338fb1),_0x10eb0e=_0x12a525[_0x151f65(0x16d)]*_0x2d2d58,_0x2d2cd8=_0x12a525[_0x151f65(0x1af)]*_0x2d2d58,_0x22c4c2=(_0x1c7b5c[_0x151f65(0x16d)]-_0x10eb0e)/0x2,_0x4d4c61=(_0x1c7b5c[_0x151f65(0x1af)]-_0x2d2cd8)/0x2;_0x46edf2['image'](_0x464956,_0x22c4c2,_0x4d4c61,{'width':_0x10eb0e,'height':_0x2d2cd8}),_0xa0f2f5!=_0x1a8740&&_0x46edf2[_0x151f65(0x1cb)]();}const _0x2a3fc1=[];_0x46edf2['on'](_0x151f65(0x1b8),_0x2a3fc1[_0x151f65(0x186)][_0x151f65(0x156)](_0x2a3fc1)),_0x46edf2['on'](_0x151f65(0x1ec),()=>{const _0xa2e5=_0x151f65,_0x141d77=Buffer[_0xa2e5(0x1d1)](_0x2a3fc1),_0x9b2e1c=_0x141d77[_0xa2e5(0x1ab)](_0xa2e5(0x1e0));_0x321f2b['json']({'pdfContent':_0x9b2e1c});}),_0x46edf2['end']();}catch(_0x1e9ecb){_0x321f2b['json']({'message':_0x1e9ecb[_0x151f65(0x144)]});}}),module[a0_0x3070b7(0x145)]=router;