const a0_0x169e21=a0_0x3893;function a0_0x219c(){const _0x5360a6=['brands','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','jsbarcode','length','/print_barcode_filter_search/','findByIdAndDelete','PSecondaryUnits','sheet_to_json','json','flash','$product_name','maxStocks','German','categories','\x20brand\x20is\x20add\x20successfully','save','master','$product_docs','/units/:id','canvas','numeric','French','8792063hUGLVV','post','warehouse','\x20<>\x20','primary_code','findOne','PName','/products/view','22482LfpJzs','Hindi','$brand','Units','secondary_unit','originalname','SheetNames','/units','secondary_code','36ffsklk','products','unit\x20data\x20delete\x20successfully','/products_import_migrate_file','product_category','get','unit','push','/units/delete/:id','exceljs','/barcode/:id','English\x20(US)','PAlQty','diskStorage','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_code','now','Primary_Code','Product_Name','Products\x20warehouse_data','barcode\x20Product\x20master','columns','/products_export_migrate_file','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','$product_details','Arabic','brand\x20data\x20update\x20successfully','hello','Workbook','/view/add_products','find','message','3620784AnzhDG','concat','language','migrate_product_fule','/brands/:id','width','base64','map','long','express','Portuguese','log','email','English','/filter_product','PUnits','user','/categories','/brands/delete/:id','PCat','\x20Edit\x20Successfully','alertquantity','readFile','../public/language/languages.json','$category','end','Product_Code','/products/categories','aggregate','prod_categ','findByIdAndUpdate','public/Migration/','Raw\x20Materials','Sheets','Brands','/print_barcode_filter/','barcode\x20user_id','/products/units','bind','/view/:id','exports','edit_product','body','findById','product_docs','pdfkit-table','\x20unit\x20is\x20add\x20successfully','\x20categories\x20is\x20add\x20successfully','/categories/delete/:id','addPage','render','brand','product\x20add\x20successfully','toBuffer','public/upload','min','Portuguese\x20(BR)','categ','stock','Spanish','success','PBrands','category','MaxperUnits','Router','/brands','Arabic\x20(ae)','height','Prod_Cat','then','8427552qoSODV','$product_stock','name','../models/all_models','file','Content-Disposition','max_number_per_units','$_id','product_details.product_name','Chinese','product_stock','Products\x20master','addWorksheet','Content-Type','image','sku','data','/barcode_data','$product_category','\x20added\x20successfully','write','Products\x20find_data','Enabled','ProductCode','redirect','/view','forEach','status','errors','/products/brands','xlsx','Maximum_Stocks','15022494tEFusG','toString','Products','Secondary_Units','categories\x20data\x20delete\x20successfully','CODE128','brand\x20data\x20delete\x20successfully','setHeader','maxProdPerUnit','425485IecGuw','defaultProduct.avif','Finished\x20Goods','single','78sPSOdE','/categories/:id','644076txqjgy','_id','Products_category','units','Category','params','product\x20update\x20successfully'];a0_0x219c=function(){return _0x5360a6;};return a0_0x219c();}(function(_0x358722,_0x53fb1d){const _0x514b82=a0_0x3893,_0x3732af=_0x358722();while(!![]){try{const _0x5c4007=-parseInt(_0x514b82(0xbc))/0x1*(parseInt(_0x514b82(0xe3))/0x2)+parseInt(_0x514b82(0xbe))/0x3+parseInt(_0x514b82(0xec))/0x4*(-parseInt(_0x514b82(0xb8))/0x5)+parseInt(_0x514b82(0x10c))/0x6+-parseInt(_0x514b82(0xdb))/0x7+parseInt(_0x514b82(0x8f))/0x8+parseInt(_0x514b82(0xaf))/0x9;if(_0x5c4007===_0x53fb1d)break;else _0x3732af['push'](_0x3732af['shift']());}catch(_0x21c684){_0x3732af['push'](_0x3732af['shift']());}}}(a0_0x219c,0x9cc26));const express=require(a0_0x169e21(0x115)),res=require('express/lib/response'),app=express(),router=express[a0_0x169e21(0x89)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x169e21(0x92)),auth=require('../middleware/auth'),users=require(a0_0x169e21(0x123)),excelJS=require(a0_0x169e21(0xf5)),xlsx=require(a0_0x169e21(0xad)),JsBarcode=require(a0_0x169e21(0xc7)),{Canvas}=require(a0_0x169e21(0xd8)),PDFDocument=require(a0_0x169e21(0x76));router[a0_0x169e21(0xf1)](a0_0x169e21(0x11d),auth,async(_0x3ce969,_0xbbda8f)=>{const _0x281c59=a0_0x169e21;try{const {username:_0x46c489,email:_0x221c9f,role:_0x553e21}=_0x3ce969[_0x281c59(0x11c)],_0x22ed5f=_0x3ce969['user'],_0x53adf2=await profile[_0x281c59(0xe0)]({'email':_0x22ed5f[_0x281c59(0x118)]}),_0x5e8752=await master_shop[_0x281c59(0x10a)]();console[_0x281c59(0x117)]('master',_0x5e8752);const _0xc489f8=await categories[_0x281c59(0x10a)]();if(_0x5e8752[0x0][_0x281c59(0x10e)]==_0x281c59(0xf7))var _0x5366f2=users[_0x281c59(0x119)];else{if(_0x5e8752[0x0][_0x281c59(0x10e)]=='Hindi')var _0x5366f2=users[_0x281c59(0xe4)];else{if(_0x5e8752[0x0]['language']==_0x281c59(0xd1))var _0x5366f2=users[_0x281c59(0xd1)];else{if(_0x5e8752[0x0][_0x281c59(0x10e)]=='Spanish')var _0x5366f2=users[_0x281c59(0x84)];else{if(_0x5e8752[0x0][_0x281c59(0x10e)]==_0x281c59(0xda))var _0x5366f2=users[_0x281c59(0xda)];else{if(_0x5e8752[0x0]['language']==_0x281c59(0x81))var _0x5366f2=users[_0x281c59(0x116)];else{if(_0x5e8752[0x0]['language']=='Chinese')var _0x5366f2=users['Chinese'];else{if(_0x5e8752[0x0][_0x281c59(0x10e)]==_0x281c59(0x8b))var _0x5366f2=users['Arabic'];}}}}}}}_0xbbda8f['render'](_0x281c59(0xd2),{'success':_0x3ce969[_0x281c59(0xce)](_0x281c59(0x85)),'errors':_0x3ce969['flash'](_0x281c59(0xab)),'role':_0x22ed5f,'profile':_0x53adf2,'user':_0xc489f8,'master_shop':_0x5e8752,'language':_0x5366f2});}catch(_0x5aeccd){console[_0x281c59(0x117)](_0x5aeccd);}}),router[a0_0x169e21(0xdc)]('/categories',auth,async(_0x20d24f,_0x5891d1)=>{const _0x458c58=a0_0x169e21;try{const {name:_0x53c67a,products:_0x28f522}=_0x20d24f[_0x458c58(0x73)],_0x2175fa=new categories({'name':_0x53c67a,'products':_0x28f522}),_0x46e1a0=await categories[_0x458c58(0xe0)]({'name':_0x53c67a});_0x46e1a0?_0x20d24f['flash']('errors',_0x53c67a+_0x458c58(0xc6)):_0x20d24f[_0x458c58(0xce)](_0x458c58(0x85),_0x53c67a+_0x458c58(0x78));const _0x55aabc=await _0x2175fa[_0x458c58(0xd4)]();_0x5891d1[_0x458c58(0xa7)](_0x458c58(0x127));}catch(_0x877273){console['log'](_0x877273);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0xbd),auth,async(_0x2d6a84,_0x41fb25)=>{const _0x1dc8cd=a0_0x169e21;try{const {username:_0x426ed6,email:_0x5ecdcc,role:_0x4ac765}=_0x2d6a84['user'],_0x29745e=_0x2d6a84[_0x1dc8cd(0x11c)],_0x4cc1f6=await profile[_0x1dc8cd(0xe0)]({'email':_0x29745e['email']}),_0x1da060=await master_shop[_0x1dc8cd(0x10a)]();console[_0x1dc8cd(0x117)](_0x1dc8cd(0xd5),_0x1da060);const _0x1a2d6f=_0x2d6a84['params']['id'];console[_0x1dc8cd(0x117)](_0x1a2d6f);const _0x10e679=await categories[_0x1dc8cd(0x74)](_0x1a2d6f);if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0xf7))var _0x33ad44=users[_0x1dc8cd(0x119)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0xe4))var _0x33ad44=users[_0x1dc8cd(0xe4)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0xd1))var _0x33ad44=users[_0x1dc8cd(0xd1)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0x84))var _0x33ad44=users[_0x1dc8cd(0x84)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0xda))var _0x33ad44=users[_0x1dc8cd(0xda)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]=='Portuguese\x20(BR)')var _0x33ad44=users[_0x1dc8cd(0x116)];else{if(_0x1da060[0x0][_0x1dc8cd(0x10e)]==_0x1dc8cd(0x98))var _0x33ad44=users[_0x1dc8cd(0x98)];else{if(_0x1da060[0x0]['language']==_0x1dc8cd(0x8b))var _0x33ad44=users['Arabic'];}}}}}}}_0x41fb25[_0x1dc8cd(0x7b)](_0x1dc8cd(0xd2),{'success':_0x2d6a84['flash'](_0x1dc8cd(0x85)),'errors':_0x2d6a84['flash']('errors'),'role':_0x29745e,'profile':_0x4cc1f6,'master_shop':_0x1da060,'user':_0x10e679,'language':_0x33ad44});}catch(_0x407ab4){console['log'](_0x407ab4);}}),router[a0_0x169e21(0xdc)](a0_0x169e21(0xbd),auth,async(_0x1ae659,_0x4cf3bc)=>{const _0x239ccf=a0_0x169e21;try{const _0x2bab05=_0x1ae659[_0x239ccf(0xc3)]['id'],_0x506c8a=await categories[_0x239ccf(0x12a)](_0x2bab05,_0x1ae659[_0x239ccf(0x73)]);_0x1ae659['flash']('success',''+users['categories_edit']),_0x4cf3bc[_0x239ccf(0xa7)](_0x239ccf(0x127));}catch(_0x2ca5e1){console[_0x239ccf(0x117)](_0x2ca5e1);}}),router['get'](a0_0x169e21(0x79),auth,async(_0xf3f1d1,_0x3cc5a5)=>{const _0x511b7f=a0_0x169e21;try{const _0x238952=_0xf3f1d1[_0x511b7f(0xc3)]['id'],_0xf89f17=await categories[_0x511b7f(0xca)](_0x238952);_0xf3f1d1[_0x511b7f(0xce)]('success',_0x511b7f(0xb3)),_0x3cc5a5[_0x511b7f(0xa7)](_0x511b7f(0x127));}catch(_0x233ee9){console['log'](_0x233ee9);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0x8a),auth,async(_0x552603,_0x448738)=>{const _0x19aaf3=a0_0x169e21;try{const {username:_0x16b201,email:_0x13ddc4,role:_0x1901c3}=_0x552603[_0x19aaf3(0x11c)],_0x45a861=_0x552603[_0x19aaf3(0x11c)],_0x5e07ba=await profile['findOne']({'email':_0x45a861[_0x19aaf3(0x118)]}),_0x559074=await master_shop[_0x19aaf3(0x10a)]();console[_0x19aaf3(0x117)](_0x19aaf3(0xd5),_0x559074);const _0x382156=await brands[_0x19aaf3(0x10a)]();if(_0x559074[0x0][_0x19aaf3(0x10e)]==_0x19aaf3(0xf7))var _0x31b67b=users[_0x19aaf3(0x119)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]=='Hindi')var _0x31b67b=users[_0x19aaf3(0xe4)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]=='German')var _0x31b67b=users[_0x19aaf3(0xd1)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]==_0x19aaf3(0x84))var _0x31b67b=users[_0x19aaf3(0x84)];else{if(_0x559074[0x0]['language']==_0x19aaf3(0xda))var _0x31b67b=users[_0x19aaf3(0xda)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]==_0x19aaf3(0x81))var _0x31b67b=users[_0x19aaf3(0x116)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]==_0x19aaf3(0x98))var _0x31b67b=users[_0x19aaf3(0x98)];else{if(_0x559074[0x0][_0x19aaf3(0x10e)]==_0x19aaf3(0x8b))var _0x31b67b=users[_0x19aaf3(0x105)];}}}}}}}_0x448738[_0x19aaf3(0x7b)]('brands',{'success':_0x552603[_0x19aaf3(0xce)]('success'),'errors':_0x552603[_0x19aaf3(0xce)](_0x19aaf3(0xab)),'role':_0x45a861,'profile':_0x5e07ba,'master_shop':_0x559074,'user':_0x382156,'language':_0x31b67b});}catch(_0x4af8fb){console[_0x19aaf3(0x117)](_0x4af8fb);}}),router['post'](a0_0x169e21(0x8a),auth,async(_0x16fa6b,_0x343c3b)=>{const _0x127241=a0_0x169e21;try{const {name:_0x195f19,products:_0x1dd27c}=_0x16fa6b[_0x127241(0x73)],_0x95f5cc=new brands({'name':_0x195f19,'products':_0x1dd27c}),_0x14e7fe=await brands[_0x127241(0xe0)]({'name':_0x195f19});_0x14e7fe?_0x16fa6b[_0x127241(0xce)](_0x127241(0xab),_0x195f19+_0x127241(0xfa)):_0x16fa6b['flash'](_0x127241(0x85),_0x195f19+_0x127241(0xd3));const _0x2b7236=await _0x95f5cc[_0x127241(0xd4)]();_0x343c3b[_0x127241(0xa7)](_0x127241(0xac));}catch(_0x47d648){console['log'](_0x47d648);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0x110),auth,async(_0x911e5a,_0x33b054)=>{const _0x75f85f=a0_0x169e21;try{const {username:_0x452a45,email:_0x6887d7,role:_0x418799}=_0x911e5a[_0x75f85f(0x11c)],_0x3b8aa2=_0x911e5a[_0x75f85f(0x11c)],_0x54dedc=await profile['findOne']({'email':_0x3b8aa2[_0x75f85f(0x118)]}),_0x5d23f3=await master_shop[_0x75f85f(0x10a)]();console[_0x75f85f(0x117)](_0x75f85f(0xd5),_0x5d23f3);const _0x8f68c9=_0x911e5a[_0x75f85f(0xc3)]['id'];console[_0x75f85f(0x117)](_0x8f68c9);const _0xbab3fc=await brands['findById'](_0x8f68c9);if(_0x5d23f3[0x0]['language']==_0x75f85f(0xf7))var _0xc6d3f2=users[_0x75f85f(0x119)];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]==_0x75f85f(0xe4))var _0xc6d3f2=users[_0x75f85f(0xe4)];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]=='German')var _0xc6d3f2=users[_0x75f85f(0xd1)];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]==_0x75f85f(0x84))var _0xc6d3f2=users[_0x75f85f(0x84)];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]=='French')var _0xc6d3f2=users['French'];else{if(_0x5d23f3[0x0]['language']==_0x75f85f(0x81))var _0xc6d3f2=users[_0x75f85f(0x116)];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]==_0x75f85f(0x98))var _0xc6d3f2=users['Chinese'];else{if(_0x5d23f3[0x0][_0x75f85f(0x10e)]==_0x75f85f(0x8b))var _0xc6d3f2=users['Arabic'];}}}}}}}_0x33b054[_0x75f85f(0x7b)]('brands',{'success':_0x911e5a[_0x75f85f(0xce)](_0x75f85f(0x85)),'errors':_0x911e5a[_0x75f85f(0xce)]('errors'),'role':_0x3b8aa2,'profile':_0x54dedc,'master_shop':_0x5d23f3,'user':_0xbab3fc,'language':_0xc6d3f2});}catch(_0x3ffd8a){console['log'](_0x3ffd8a);}}),router[a0_0x169e21(0xdc)](a0_0x169e21(0x110),auth,async(_0x211c65,_0x4b6526)=>{const _0x1da8f4=a0_0x169e21;try{const _0x51f0f9=_0x211c65['params']['id'],_0xf7fffa=await brands['findByIdAndUpdate'](_0x51f0f9,_0x211c65[_0x1da8f4(0x73)]);_0x211c65['flash'](_0x1da8f4(0x85),_0x1da8f4(0x106)),_0x4b6526[_0x1da8f4(0xa7)]('/products/brands');}catch(_0x418510){console[_0x1da8f4(0x117)](_0x418510);}}),router['get'](a0_0x169e21(0x11e),auth,async(_0x14516d,_0x5d5a33)=>{const _0x56d24c=a0_0x169e21;try{const _0x263c2d=_0x14516d[_0x56d24c(0xc3)]['id'],_0x110e75=await brands[_0x56d24c(0xca)](_0x263c2d);_0x14516d[_0x56d24c(0xce)](_0x56d24c(0x85),_0x56d24c(0xb5)),_0x5d5a33[_0x56d24c(0xa7)](_0x56d24c(0xac));}catch(_0x1d0e2a){console[_0x56d24c(0x117)](_0x1d0e2a);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0xea),auth,async(_0x2cc981,_0xc54f41)=>{const _0x2b0b0b=a0_0x169e21;try{const {username:_0x1a4a0e,email:_0x4a84ac,role:_0x4bf6d8}=_0x2cc981[_0x2b0b0b(0x11c)],_0x47d796=_0x2cc981['user'],_0x2c0828=await profile[_0x2b0b0b(0xe0)]({'email':_0x47d796[_0x2b0b0b(0x118)]}),_0x5e7d98=await master_shop[_0x2b0b0b(0x10a)]();console['log']('master',_0x5e7d98);const _0x43101c=await units[_0x2b0b0b(0x10a)]();if(_0x5e7d98[0x0]['language']==_0x2b0b0b(0xf7))var _0x622160=users[_0x2b0b0b(0x119)];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]==_0x2b0b0b(0xe4))var _0x622160=users['Hindi'];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]=='German')var _0x622160=users[_0x2b0b0b(0xd1)];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]==_0x2b0b0b(0x84))var _0x622160=users[_0x2b0b0b(0x84)];else{if(_0x5e7d98[0x0]['language']==_0x2b0b0b(0xda))var _0x622160=users['French'];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]=='Portuguese\x20(BR)')var _0x622160=users['Portuguese'];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]==_0x2b0b0b(0x98))var _0x622160=users[_0x2b0b0b(0x98)];else{if(_0x5e7d98[0x0][_0x2b0b0b(0x10e)]==_0x2b0b0b(0x8b))var _0x622160=users[_0x2b0b0b(0x105)];}}}}}}}_0xc54f41['render'](_0x2b0b0b(0xc1),{'success':_0x2cc981[_0x2b0b0b(0xce)](_0x2b0b0b(0x85)),'errors':_0x2cc981[_0x2b0b0b(0xce)](_0x2b0b0b(0xab)),'role':_0x47d796,'profile':_0x2c0828,'master_shop':_0x5e7d98,'user':_0x43101c,'language':_0x622160});}catch(_0x371916){console[_0x2b0b0b(0x117)](_0x371916);}}),router[a0_0x169e21(0xdc)](a0_0x169e21(0xea),auth,async(_0x1b4594,_0x4ee2dc)=>{const _0x256dae=a0_0x169e21;try{const {name:_0x4b1aa9,secondary_unit:_0x4b64f3,products:_0x33493a}=_0x1b4594[_0x256dae(0x73)],_0x3fc95f=new units({'name':_0x4b1aa9,'secondary_unit':_0x4b64f3,'products':_0x33493a}),_0x4f7784=await units['findOne']({'name':_0x4b1aa9});_0x4f7784?_0x1b4594['flash'](_0x256dae(0xab),_0x4b1aa9+_0x256dae(0x103)):_0x1b4594[_0x256dae(0xce)]('success',_0x4b1aa9+_0x256dae(0x77));const _0x3af80c=await _0x3fc95f['save']();_0x4ee2dc[_0x256dae(0xa7)](_0x256dae(0x131));}catch(_0x3285eb){console[_0x256dae(0x117)](_0x3285eb);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0xd7),auth,async(_0x24b785,_0x5f2812)=>{const _0x1f4939=a0_0x169e21;try{const {username:_0x4b1a7f,email:_0x1e5642,role:_0x1c1076}=_0x24b785['user'],_0x2d4d1c=_0x24b785[_0x1f4939(0x11c)],_0x4ae03c=await profile[_0x1f4939(0xe0)]({'email':_0x2d4d1c['email']}),_0x55cb7f=await master_shop['find']();console[_0x1f4939(0x117)](_0x1f4939(0xd5),_0x55cb7f);const _0x18608d=_0x24b785[_0x1f4939(0xc3)]['id'],_0x13289f=await units[_0x1f4939(0x74)](_0x18608d);if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0xf7))var _0x5a867d=users['English'];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0xe4))var _0x5a867d=users[_0x1f4939(0xe4)];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0xd1))var _0x5a867d=users[_0x1f4939(0xd1)];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0x84))var _0x5a867d=users[_0x1f4939(0x84)];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0xda))var _0x5a867d=users[_0x1f4939(0xda)];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0x81))var _0x5a867d=users['Portuguese'];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]=='Chinese')var _0x5a867d=users[_0x1f4939(0x98)];else{if(_0x55cb7f[0x0][_0x1f4939(0x10e)]==_0x1f4939(0x8b))var _0x5a867d=users['Arabic'];}}}}}}}_0x5f2812[_0x1f4939(0x7b)](_0x1f4939(0xc1),{'success':_0x24b785[_0x1f4939(0xce)](_0x1f4939(0x85)),'errors':_0x24b785['flash'](_0x1f4939(0xab)),'role':_0x2d4d1c,'profile':_0x4ae03c,'master_shop':_0x55cb7f,'user':_0x13289f,'language':_0x5a867d});}catch(_0x11e585){console[_0x1f4939(0x117)](_0x11e585);}}),router[a0_0x169e21(0xdc)]('/units/:id',auth,async(_0x140884,_0x3e5836)=>{const _0x47f1c1=a0_0x169e21;try{const _0x17a6b8=_0x140884['params']['id'],_0x3fb4ce=await units['findByIdAndUpdate'](_0x17a6b8,_0x140884['body']);_0x140884[_0x47f1c1(0xce)]('success','unit\x20data\x20update\x20successfully'),_0x3e5836[_0x47f1c1(0xa7)]('/products/units');}catch(_0xd69760){console[_0x47f1c1(0x117)](_0xd69760);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0xf4),auth,async(_0x3bdf9b,_0x602bc2)=>{const _0x5627df=a0_0x169e21;try{const _0xe47328=_0x3bdf9b[_0x5627df(0xc3)]['id'],_0x4b301c=await units['findByIdAndDelete'](_0xe47328);_0x3bdf9b[_0x5627df(0xce)](_0x5627df(0x85),_0x5627df(0xee)),_0x602bc2[_0x5627df(0xa7)](_0x5627df(0x131));}catch(_0x8d8ca8){console[_0x5627df(0x117)](_0x8d8ca8);}});function a0_0x3893(_0xbdf62c,_0x49b8dd){const _0x219cba=a0_0x219c();return a0_0x3893=function(_0x38930d,_0x559d94){_0x38930d=_0x38930d-0x72;let _0x35d78c=_0x219cba[_0x38930d];return _0x35d78c;},a0_0x3893(_0xbdf62c,_0x49b8dd);}const storage=multer[a0_0x169e21(0xf9)]({'destination':(_0x144c54,_0x5646e2,_0x2e171c)=>{const _0x528f58=a0_0x169e21;_0x2e171c(null,_0x528f58(0x7f));},'filename':(_0x5353af,_0x286ada,_0x416a90)=>{const _0x2d06b7=a0_0x169e21;_0x416a90(null,Date['now']()+_0x286ada[_0x2d06b7(0xe8)]);}}),upload=multer({'storage':storage});router[a0_0x169e21(0xf1)](a0_0x169e21(0xa8),auth,async(_0x217187,_0xc41f51)=>{const _0x6f5c7b=a0_0x169e21;try{const {username:_0xad121e,email:_0x5249dd,role:_0x10390b}=_0x217187[_0x6f5c7b(0x11c)],_0xcfb283=_0x217187[_0x6f5c7b(0x11c)],_0x1e1524=await profile[_0x6f5c7b(0xe0)]({'email':_0xcfb283['email']}),_0x9c992d={'year':_0x6f5c7b(0xd9),'month':_0x6f5c7b(0x114),'day':_0x6f5c7b(0xd9)},_0x3262de=await master_shop['find']();console[_0x6f5c7b(0x117)](_0x6f5c7b(0x9a),_0x3262de);const _0x3d59de=await product[_0x6f5c7b(0x10a)]();console[_0x6f5c7b(0x117)](_0x6f5c7b(0xa4),_0x3d59de);const _0x1cb570=await warehouse[_0x6f5c7b(0x128)]([{'$unwind':_0x6f5c7b(0x104)},{'$lookup':{'from':_0x6f5c7b(0xed),'localField':_0x6f5c7b(0x97),'foreignField':_0x6f5c7b(0x91),'as':_0x6f5c7b(0x75)}},{'$unwind':_0x6f5c7b(0xd6)},{'$project':{'product_name':'$product_details.product_name','product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x6f5c7b(0xcf),'product_stock':{'$sum':_0x6f5c7b(0x90)}}}]);console[_0x6f5c7b(0x117)](_0x6f5c7b(0xff),_0x1cb570),_0x1cb570[_0x6f5c7b(0xa9)](_0x56c6cc=>{const _0x3f5a24=_0x6f5c7b,_0x1c5d2b=_0x3d59de[_0x3f5a24(0x113)](_0x4982b7=>{const _0x4e140a=_0x3f5a24;_0x4982b7[_0x4e140a(0x91)]==_0x56c6cc[_0x4e140a(0xbf)]&&(_0x4982b7[_0x4e140a(0x83)]=parseInt(_0x4982b7[_0x4e140a(0x83)])+parseInt(_0x56c6cc[_0x4e140a(0x99)]));});}),console['log'](_0x6f5c7b(0xa4),_0x3d59de);if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0xf7))var _0x492ef5=users[_0x6f5c7b(0x119)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]=='Hindi')var _0x492ef5=users[_0x6f5c7b(0xe4)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]=='German')var _0x492ef5=users['German'];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0x84))var _0x492ef5=users[_0x6f5c7b(0x84)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0xda))var _0x492ef5=users[_0x6f5c7b(0xda)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0x81))var _0x492ef5=users[_0x6f5c7b(0x116)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0x98))var _0x492ef5=users[_0x6f5c7b(0x98)];else{if(_0x3262de[0x0][_0x6f5c7b(0x10e)]==_0x6f5c7b(0x8b))var _0x492ef5=users[_0x6f5c7b(0x105)];}}}}}}}_0xc41f51[_0x6f5c7b(0x7b)](_0x6f5c7b(0xed),{'success':_0x217187[_0x6f5c7b(0xce)]('success'),'errors':_0x217187[_0x6f5c7b(0xce)]('errors'),'alldata':_0x3d59de,'profile':_0x1e1524,'master_shop':_0x3262de,'role':_0xcfb283,'product_stock':_0x1cb570,'language':_0x492ef5});}catch(_0x73f5fe){console[_0x6f5c7b(0x117)](_0x73f5fe);}}),router['get'](a0_0x169e21(0x109),auth,async(_0x3fb85a,_0x52f44d)=>{const _0x328245=a0_0x169e21;try{const {username:_0x1d88aa,email:_0x2c63eb,role:_0x4e329}=_0x3fb85a[_0x328245(0x11c)],_0xdb239a=_0x3fb85a[_0x328245(0x11c)],_0x23734b=await profile[_0x328245(0xe0)]({'email':_0xdb239a[_0x328245(0x118)]}),_0x5626a8=await master_shop[_0x328245(0x10a)]();console[_0x328245(0x117)](_0x328245(0xd5),_0x5626a8);const _0x44ff2e=await categories[_0x328245(0x10a)]({}),_0x42bb30=await brands[_0x328245(0x10a)]({}),_0x37b4bc=await units[_0x328245(0x10a)]({}),_0x548a76=await warehouse[_0x328245(0x10a)]({'status':'Enabled'});if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0xf7))var _0x2f3c0c=users[_0x328245(0x119)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0xe4))var _0x2f3c0c=users[_0x328245(0xe4)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0xd1))var _0x2f3c0c=users[_0x328245(0xd1)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0x84))var _0x2f3c0c=users['Spanish'];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0xda))var _0x2f3c0c=users[_0x328245(0xda)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0x81))var _0x2f3c0c=users[_0x328245(0x116)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0x98))var _0x2f3c0c=users[_0x328245(0x98)];else{if(_0x5626a8[0x0][_0x328245(0x10e)]==_0x328245(0x8b))var _0x2f3c0c=users[_0x328245(0x105)];}}}}}}}_0x52f44d['render']('add_product',{'success':_0x3fb85a['flash'](_0x328245(0x85)),'errors':_0x3fb85a[_0x328245(0xce)]('errors'),'role':_0xdb239a,'profile':_0x23734b,'categories':_0x44ff2e,'brands':_0x42bb30,'master_shop':_0x5626a8,'units':_0x37b4bc,'language':_0x2f3c0c,'find_data':_0x548a76});}catch(_0x30f38c){console['log'](_0x30f38c);}}),router[a0_0x169e21(0xdc)]('/view/add_products',auth,upload[a0_0x169e21(0xbb)]('image'),async(_0x3e3b49,_0x1daba1)=>{const _0x1dd021=a0_0x169e21;try{const {name:_0x33043a,category:_0x36a19f,brand:_0x190e72,unit:_0x4abb19,alertquantity:_0x16e4ad,stock:_0x58db5f,product_code:_0x64ebf6,warehouse:_0x53d2f7,primary_ItemCode:_0x195924,second_ItemCode:_0x417ec8,second_unit:_0x1118ec,maxPerUnit:_0xe58f4b,MaxPerProduct:_0xbe99ff}=_0x3e3b49[_0x1dd021(0x73)],_0x1cd0d9=_0x3e3b49[_0x1dd021(0x93)]?.['filename']||'defaultProduct.avif',_0xa3a51c=new product({'image':_0x1cd0d9,'name':_0x33043a,'category':_0x36a19f,'brand':_0x190e72,'unit':_0x4abb19,'alertquantity':_0x16e4ad,'stock':_0x58db5f,'product_code':_0x64ebf6,'warehouse':_0x53d2f7,'primary_code':_0x195924,'secondary_code':_0x417ec8,'second_unit':_0x1118ec,'maxStocks':_0xbe99ff,'maxProdPerUnit':_0xe58f4b}),_0xecc122=await _0xa3a51c[_0x1dd021(0xd4)](),_0x2649f8=await categories[_0x1dd021(0xe0)]({'name':_0x36a19f});_0x2649f8[_0x1dd021(0xed)]=parseInt(_0x2649f8['products'])+0x1,await _0x2649f8['save']();const _0x58a238=await brands[_0x1dd021(0xe0)]({'name':_0x190e72});_0x58a238[_0x1dd021(0xed)]=parseInt(_0x58a238['products'])+0x1,await _0x58a238[_0x1dd021(0xd4)]();const _0x563bd4=await units['findOne']({'name':_0x4abb19});_0x563bd4[_0x1dd021(0xed)]=parseInt(_0x563bd4[_0x1dd021(0xed)])+0x1,await _0x563bd4[_0x1dd021(0xd4)](),_0x3e3b49[_0x1dd021(0xce)](_0x1dd021(0x85),_0x1dd021(0x7d)),_0x1daba1[_0x1dd021(0xa7)](_0x1dd021(0xe2));}catch(_0x92f84b){console[_0x1dd021(0x117)](_0x92f84b);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0x133),auth,async(_0x40c9c6,_0x2ab4aa)=>{const _0x5edfe1=a0_0x169e21;try{const {username:_0x1377f0,email:_0x2e6b54,role:_0x56605b}=_0x40c9c6[_0x5edfe1(0x11c)],_0x210067=_0x40c9c6[_0x5edfe1(0x11c)],_0x526dd6=await profile[_0x5edfe1(0xe0)]({'email':_0x210067[_0x5edfe1(0x118)]}),_0xc9ec11=await master_shop[_0x5edfe1(0x10a)]();console[_0x5edfe1(0x117)]('edit\x20Product\x20master',_0xc9ec11);const _0x143c8c=_0x40c9c6[_0x5edfe1(0xc3)]['id'],_0x2b3713=await product[_0x5edfe1(0x74)](_0x143c8c),_0x133f66=await categories[_0x5edfe1(0x10a)]({}),_0x32471d=await brands[_0x5edfe1(0x10a)]({}),_0x300fb8=await units[_0x5edfe1(0x10a)]({}),_0x57287c=await warehouse[_0x5edfe1(0x10a)]({'status':_0x5edfe1(0xa5)}),_0x25aa1a=await units[_0x5edfe1(0x128)]([{'$group':{'_id':_0x5edfe1(0x96),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0xc9ec11[0x0][_0x5edfe1(0x10e)]==_0x5edfe1(0xf7))var _0x5dcf1c=users['English'];else{if(_0xc9ec11[0x0][_0x5edfe1(0x10e)]=='Hindi')var _0x5dcf1c=users[_0x5edfe1(0xe4)];else{if(_0xc9ec11[0x0]['language']==_0x5edfe1(0xd1))var _0x5dcf1c=users[_0x5edfe1(0xd1)];else{if(_0xc9ec11[0x0]['language']=='Spanish')var _0x5dcf1c=users['Spanish'];else{if(_0xc9ec11[0x0][_0x5edfe1(0x10e)]=='French')var _0x5dcf1c=users['French'];else{if(_0xc9ec11[0x0][_0x5edfe1(0x10e)]=='Portuguese\x20(BR)')var _0x5dcf1c=users[_0x5edfe1(0x116)];else{if(_0xc9ec11[0x0]['language']=='Chinese')var _0x5dcf1c=users['Chinese'];else{if(_0xc9ec11[0x0][_0x5edfe1(0x10e)]=='Arabic\x20(ae)')var _0x5dcf1c=users[_0x5edfe1(0x105)];}}}}}}}_0x2ab4aa[_0x5edfe1(0x7b)](_0x5edfe1(0x72),{'success':_0x40c9c6[_0x5edfe1(0xce)](_0x5edfe1(0x85)),'errors':_0x40c9c6[_0x5edfe1(0xce)](_0x5edfe1(0xab)),'role':_0x210067,'profile':_0x526dd6,'alldata':_0x2b3713,'categories':_0x133f66,'brands':_0x32471d,'master_shop':_0xc9ec11,'units':_0x300fb8,'secondunit':_0x25aa1a,'find_data':_0x57287c,'language':_0x5dcf1c});}catch(_0x50338d){console[_0x5edfe1(0x117)](_0x50338d);}}),router[a0_0x169e21(0xdc)]('/view/:id',auth,upload['single'](a0_0x169e21(0x9d)),async(_0x464e10,_0x2234f5)=>{const _0x2fa380=a0_0x169e21;try{console[_0x2fa380(0x117)](_0x2fa380(0x107));const _0x1d6635=_0x464e10[_0x2fa380(0xc3)]['id'],_0x33e552=await product['findById'](_0x1d6635),{image:_0x4906b4,name:_0x1d5b86,category:_0x45ff36,brand:_0x1fbe5d,sku:_0x1b6365,unit:_0x503c0a,alertquantity:_0x4be68d,product_code:_0x2ac537,warehouse:_0x189b22,primary_ItemCode:_0x5ea488,second_ItemCode:_0x3dcce5,second_unit:_0x2fa8e3,maxPerUnit:_0x3bcedd,MaxPerProduct:_0x24da72,prod_catdata:_0x5d847e}=_0x464e10['body'];_0x464e10[_0x2fa380(0x93)]&&(_0x33e552[_0x2fa380(0x9d)]=_0x464e10['file']['filename']);_0x33e552[_0x2fa380(0x91)]=_0x1d5b86,_0x33e552[_0x2fa380(0x87)]=_0x45ff36,_0x33e552[_0x2fa380(0x7c)]=_0x1fbe5d,_0x33e552[_0x2fa380(0x9e)]=_0x1b6365,_0x33e552[_0x2fa380(0xf2)]=_0x503c0a,_0x33e552[_0x2fa380(0x121)]=_0x4be68d,_0x33e552[_0x2fa380(0xfb)]=_0x2ac537,_0x33e552[_0x2fa380(0xdd)]=_0x189b22,_0x33e552[_0x2fa380(0xdf)]=_0x5ea488,_0x33e552[_0x2fa380(0xeb)]=_0x3dcce5,_0x33e552['secondary_unit']=_0x2fa8e3,_0x33e552[_0x2fa380(0xd0)]=_0x24da72,_0x33e552[_0x2fa380(0xb7)]=_0x3bcedd,_0x33e552[_0x2fa380(0xf0)]=_0x5d847e;const _0xd49fe7=await _0x33e552['save']();console['log']('product\x20edit',_0x33e552),_0x464e10['flash'](_0x2fa380(0x85),_0x2fa380(0xc4)),_0x2234f5[_0x2fa380(0xa7)](_0x2fa380(0xe2));}catch(_0x578473){console[_0x2fa380(0x117)](_0x578473);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0xf6),auth,async(_0x4045f7,_0x447019)=>{const _0x1a0839=a0_0x169e21;try{const {username:_0x10b4d7,email:_0x49b3a7,role:_0x3ea624}=_0x4045f7['user'],_0x4aeed4=_0x4045f7['user'],_0xa1179a=await profile[_0x1a0839(0xe0)]({'email':_0x4aeed4[_0x1a0839(0x118)]}),_0x312033=await master_shop[_0x1a0839(0x10a)]();console['log'](_0x1a0839(0x100),_0x312033);const _0x419d70=_0x4045f7[_0x1a0839(0xc3)]['id'],_0x19ec55=await product[_0x1a0839(0x74)](_0x419d70);console['log'](_0x1a0839(0x130),_0x19ec55);if(_0x312033[0x0][_0x1a0839(0x10e)]==_0x1a0839(0xf7))var _0x5c77de=users[_0x1a0839(0x119)];else{if(_0x312033[0x0][_0x1a0839(0x10e)]==_0x1a0839(0xe4))var _0x5c77de=users[_0x1a0839(0xe4)];else{if(_0x312033[0x0]['language']==_0x1a0839(0xd1))var _0x5c77de=users['German'];else{if(_0x312033[0x0][_0x1a0839(0x10e)]==_0x1a0839(0x84))var _0x5c77de=users['Spanish'];else{if(_0x312033[0x0][_0x1a0839(0x10e)]=='French')var _0x5c77de=users['French'];else{if(_0x312033[0x0][_0x1a0839(0x10e)]==_0x1a0839(0x81))var _0x5c77de=users[_0x1a0839(0x116)];else{if(_0x312033[0x0][_0x1a0839(0x10e)]==_0x1a0839(0x98))var _0x5c77de=users[_0x1a0839(0x98)];else{if(_0x312033[0x0][_0x1a0839(0x10e)]=='Arabic\x20(ae)')var _0x5c77de=users['Arabic'];}}}}}}}_0x447019['render']('product_barcode',{'success':_0x4045f7[_0x1a0839(0xce)](_0x1a0839(0x85)),'errors':_0x4045f7['flash'](_0x1a0839(0xab)),'role':_0x4aeed4,'profile':_0xa1179a,'alldata':_0x19ec55,'master_shop':_0x312033,'language':_0x5c77de});}catch(_0x1f9f1b){console[_0x1a0839(0x117)](_0x1f9f1b);}}),router[a0_0x169e21(0xf1)](a0_0x169e21(0x102),auth,async(_0x4b3955,_0x3da222)=>{const _0x52b3a0=a0_0x169e21;try{const _0x4aa050=new excelJS[(_0x52b3a0(0x108))](),_0x1f2247=_0x4aa050[_0x52b3a0(0x9b)](_0x52b3a0(0xb1));return _0x1f2247[_0x52b3a0(0x101)]=[{'header':_0x52b3a0(0xfe),'key':_0x52b3a0(0xe1),'width':0xa},{'header':_0x52b3a0(0x12e),'key':_0x52b3a0(0x86),'width':0xa},{'header':_0x52b3a0(0xe6),'key':_0x52b3a0(0x11b),'width':0xa},{'header':_0x52b3a0(0xb2),'key':_0x52b3a0(0xcb),'width':0xa},{'header':_0x52b3a0(0x95),'key':_0x52b3a0(0x88),'width':0xa},{'header':_0x52b3a0(0xfd),'key':_0x52b3a0(0xa6),'width':0xa},{'header':'Secondary_Code','key':_0x52b3a0(0xa6),'width':0xa},{'header':'Product_Code','key':_0x52b3a0(0xa6),'width':0xa},{'header':_0x52b3a0(0xc2),'key':_0x52b3a0(0x11f),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x52b3a0(0xae),'key':_0x52b3a0(0xf8),'width':0xa},{'header':_0x52b3a0(0xc0),'key':_0x52b3a0(0x8d),'width':0xa}],_0x3da222[_0x52b3a0(0xb6)](_0x52b3a0(0x9c),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x3da222[_0x52b3a0(0xb6)](_0x52b3a0(0x94),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x4aa050[_0x52b3a0(0xad)][_0x52b3a0(0xa3)](_0x3da222)[_0x52b3a0(0x8e)](()=>{const _0x48d26b=_0x52b3a0;_0x3da222[_0x48d26b(0xaa)](0xc8);});}catch(_0x2c0e97){_0x3da222[_0x52b3a0(0xaa)](0x190)['send'](_0x2c0e97);}});const storage1=multer[a0_0x169e21(0xf9)]({'destination':(_0x1dbacb,_0x285bb7,_0x52abef)=>{_0x52abef(null,'public/Migration');},'filename':(_0x324e76,_0x5e5d62,_0x47e1c0)=>{const _0x4bf36b=a0_0x169e21;_0x47e1c0(null,Date[_0x4bf36b(0xfc)]()+_0x5e5d62[_0x4bf36b(0xe8)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x169e21(0xef),auth,uploadMigrate['single'](a0_0x169e21(0x10f)),async(_0x527f06,_0x553eda)=>{const _0x52a8c9=a0_0x169e21,_0x357ac0=_0x527f06[_0x52a8c9(0x93)]['filename'],_0x21ae67=await xlsx[_0x52a8c9(0x122)](_0x52a8c9(0x12b)+_0x357ac0);let _0x5e8e1b=_0x21ae67[_0x52a8c9(0xe9)],_0x5e918e=xlsx['utils'][_0x52a8c9(0xcc)](_0x21ae67[_0x52a8c9(0x12d)][_0x5e8e1b[0x0]]);for(const _0xdc1a92 of _0x5e918e){const _0x43ee6c=_0xdc1a92['Product_Name'],_0x4dd7a0=_0xdc1a92['Brands'],_0x156743=_0xdc1a92[_0x52a8c9(0xe6)],_0x1ccb20=_0xdc1a92['Secondary_Units'],_0x21d841=_0xdc1a92[_0x52a8c9(0x126)],_0x28b860=_0xdc1a92['Category'],_0x3c55a0=_0xdc1a92['Alert_QTY'],_0x45fa75=_0xdc1a92['Primary_Code'],_0x47b001=_0xdc1a92['Secondary_Code'],_0x16ce48=_0xdc1a92[_0x52a8c9(0xae)],_0x1b9882=_0xdc1a92[_0x52a8c9(0x95)],_0x8e8b57=_0xdc1a92[_0x52a8c9(0xc0)];try{let _0x4d86fa=await categories[_0x52a8c9(0xe0)]({'name':_0x28b860});if(!_0x4d86fa){const _0x58ef88=new categories({'name':_0x28b860,'products':'0'});_0x4d86fa=await _0x58ef88[_0x52a8c9(0xd4)]();}let _0x473a15=await brands[_0x52a8c9(0xe0)]({'name':_0x4dd7a0});if(!_0x473a15){const _0x18d4ab=new brands({'name':_0x4dd7a0,'products':'0'});_0x473a15=await _0x18d4ab[_0x52a8c9(0xd4)]();}let _0x5e7cc7=await units[_0x52a8c9(0xe0)]({'name':_0x156743,'secondary_unit':_0x1ccb20});if(!_0x5e7cc7){const _0x3e108b=new units({'name':_0x156743,'secondary_unit':_0x1ccb20,'products':'0'});_0x5e7cc7=await _0x3e108b['save']();}const _0x4ff6c0=await product[_0x52a8c9(0x10a)]({'name':_0x43ee6c,'category':_0x4d86fa[_0x52a8c9(0x91)],'brand':_0x473a15[_0x52a8c9(0x91)],'secondary_unit':_0x5e7cc7[_0x52a8c9(0xe7)],'product_code':_0x21d841});console[_0x52a8c9(0x117)](_0x4ff6c0[_0x52a8c9(0xc8)]+_0x52a8c9(0xde)+_0x4d86fa[_0x52a8c9(0x91)]+_0x52a8c9(0xde)+_0x473a15[_0x52a8c9(0x91)]+_0x52a8c9(0xde)+_0x5e7cc7[_0x52a8c9(0xe7)]+_0x52a8c9(0xde)+_0x21d841+_0x52a8c9(0xde)+_0x43ee6c);if(_0x4ff6c0[_0x52a8c9(0xc8)]===0x0){const _0xd779bb=new product({'image':_0x52a8c9(0xb9),'name':_0x43ee6c,'category':_0x4d86fa[_0x52a8c9(0x91)],'brand':_0x473a15[_0x52a8c9(0x91)],'unit':_0x5e7cc7[_0x52a8c9(0x91)],'alertquantity':_0x3c55a0,'product_code':_0x21d841,'secondary_unit':_0x5e7cc7[_0x52a8c9(0xe7)],'primary_code':_0x45fa75,'secondary_code':_0x47b001,'maxStocks':_0x16ce48,'maxProdPerUnit':_0x1b9882,'product_category':_0x8e8b57}),_0x5304fe=await _0xd779bb[_0x52a8c9(0xd4)]();_0x4d86fa[_0x52a8c9(0xed)]=parseInt(_0x4d86fa[_0x52a8c9(0xed)])+0x1,await _0x4d86fa[_0x52a8c9(0xd4)](),_0x473a15[_0x52a8c9(0xed)]=parseInt(_0x473a15[_0x52a8c9(0xed)])+0x1,await _0x473a15[_0x52a8c9(0xd4)](),_0x5e7cc7[_0x52a8c9(0xed)]=parseInt(_0x5e7cc7[_0x52a8c9(0xed)])+0x1,await _0x5e7cc7[_0x52a8c9(0xd4)](),_0x527f06[_0x52a8c9(0xce)](_0x52a8c9(0x85),_0x43ee6c+_0x52a8c9(0xa2));}else{console[_0x52a8c9(0x117)](_0x4ff6c0[0x0]);const _0x42fd41=_0x4ff6c0[0x0];_0x42fd41[_0x52a8c9(0x87)]=_0x4d86fa[_0x52a8c9(0x91)],_0x42fd41['brand']=_0x473a15[_0x52a8c9(0x91)],_0x42fd41[_0x52a8c9(0xf2)]=_0x5e7cc7[_0x52a8c9(0x91)],_0x42fd41[_0x52a8c9(0x121)]=_0x3c55a0,_0x42fd41['product_code']=_0x21d841,_0x42fd41[_0x52a8c9(0xe7)]=_0x5e7cc7[_0x52a8c9(0xe7)],_0x42fd41[_0x52a8c9(0xdf)]=_0x45fa75,_0x42fd41['secondary_code']=_0x47b001,_0x42fd41[_0x52a8c9(0xd0)]=_0x16ce48,_0x42fd41[_0x52a8c9(0xb7)]=_0x1b9882,_0x42fd41[_0x52a8c9(0xf0)]=_0x8e8b57;const _0x17b8ee=await _0x42fd41[_0x52a8c9(0xd4)]();_0x527f06['flash'](_0x52a8c9(0x85),_0x17b8ee[_0x52a8c9(0x91)]+_0x52a8c9(0x120));}}catch(_0x7bac18){_0x553eda[_0x52a8c9(0xaa)](0x1f4)['json']({'proderror':_0x7bac18[_0x52a8c9(0x10b)],'aproduct':_0x43ee6c});}}_0x553eda[_0x52a8c9(0xa7)]('/products/view');}),router[a0_0x169e21(0xdc)]('/select_data',auth,async(_0x4d5303,_0x1a2e9c)=>{const _0x5eb2d8=a0_0x169e21;try{console[_0x5eb2d8(0x117)](_0x4d5303[_0x5eb2d8(0x73)]);const {data_cateory:_0x226c88,datachoose:_0x130079}=_0x4d5303[_0x5eb2d8(0x73)];var _0x30ed94;if(_0x130079=='prod_categ')_0x30ed94=await product['aggregate']([{'$group':{'_id':_0x5eb2d8(0xa1)}}]);else{if(_0x130079==_0x5eb2d8(0xc5))_0x30ed94=await product['aggregate']([{'$match':{'product_category':_0x226c88}},{'$group':{'_id':'$brand'}}]);else _0x130079==_0x5eb2d8(0x82)&&(_0x30ed94=await product[_0x5eb2d8(0x128)]([{'$match':{'product_category':_0x226c88}},{'$group':{'_id':_0x5eb2d8(0x124)}}]));}_0x1a2e9c[_0x5eb2d8(0xcd)](_0x30ed94);}catch(_0xaf4a74){_0x1a2e9c[_0x5eb2d8(0xcd)]({'message':_0xaf4a74[_0x5eb2d8(0x10b)]});}}),router[a0_0x169e21(0xdc)](a0_0x169e21(0x11a),auth,async(_0x6f5753,_0x45a4f0)=>{const _0x33f63d=a0_0x169e21;try{const {data_choosing:_0x3b8dd2,data_selected:_0x2b18ba}=_0x6f5753['body'];var _0x105e84;if(_0x3b8dd2==_0x33f63d(0x129))_0x105e84=await product[_0x33f63d(0x128)]([{'$match':{'product_category':_0x2b18ba}}]);else{if(_0x3b8dd2=='brands')_0x105e84=await product[_0x33f63d(0x128)]([{'$match':{'brand':_0x2b18ba}}]);else _0x3b8dd2==_0x33f63d(0x82)&&(_0x105e84=await product[_0x33f63d(0x128)]([{'$match':{'category':_0x2b18ba}}]));}_0x45a4f0[_0x33f63d(0xcd)](_0x105e84);}catch(_0x418e0a){_0x45a4f0['json']({'message':_0x418e0a[_0x33f63d(0x10b)]});}}),router['get']('/print_barcode',auth,async(_0x17b824,_0x27bf8d)=>{const _0x46e289=a0_0x169e21,_0x48832b=_0x17b824[_0x46e289(0x11c)],_0x7002ed=await profile[_0x46e289(0xe0)]({'email':_0x48832b[_0x46e289(0x118)]}),_0x25ff40=await master_shop[_0x46e289(0x10a)](),_0xe4220a=await product[_0x46e289(0x10a)]();if(_0x25ff40[0x0]['language']==_0x46e289(0xf7))var _0x1dd964=users[_0x46e289(0x119)];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]=='Hindi')var _0x1dd964=users['Hindi'];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]==_0x46e289(0xd1))var _0x1dd964=users[_0x46e289(0xd1)];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]==_0x46e289(0x84))var _0x1dd964=users[_0x46e289(0x84)];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]==_0x46e289(0xda))var _0x1dd964=users['French'];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]=='Portuguese\x20(BR)')var _0x1dd964=users['Portuguese'];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]==_0x46e289(0x98))var _0x1dd964=users['Chinese'];else{if(_0x25ff40[0x0][_0x46e289(0x10e)]==_0x46e289(0x8b))var _0x1dd964=users['Arabic'];}}}}}}}_0x27bf8d[_0x46e289(0x7b)]('product_barcode_products',{'success':_0x17b824[_0x46e289(0xce)](_0x46e289(0x85)),'errors':_0x17b824[_0x46e289(0xce)]('errors'),'role':_0x48832b,'profile':_0x7002ed,'products':_0xe4220a,'master_shop':_0x25ff40,'language':_0x1dd964});}),router[a0_0x169e21(0xdc)](a0_0x169e21(0xa0),auth,async(_0x53fbf5,_0x32c862)=>{const _0x514640=a0_0x169e21,_0x56c0ef=await product[_0x514640(0x10a)]();_0x32c862[_0x514640(0xcd)]({'data':_0x56c0ef});}),router[a0_0x169e21(0xdc)]('/barcode_filter',auth,async(_0x1f18f9,_0x355040)=>{const _0x464b99=a0_0x169e21;try{const {dataProdCat:_0x4d5a92,dataProdIdentity:_0x537c23}=_0x1f18f9[_0x464b99(0x73)];var _0x46f932;switch(_0x4d5a92){case'fg':switch(_0x537c23){case _0x464b99(0x12e):_0x46f932=await product[_0x464b99(0x128)]([{'$match':{'product_category':_0x464b99(0xba)}},{'$group':{'_id':_0x464b99(0xe5)}},{'$project':{'brand':_0x464b99(0x96)}}]);break;case'Category':_0x46f932=await product['aggregate']([{'$match':{'product_category':_0x464b99(0xba)}},{'$group':{'_id':_0x464b99(0x124)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x537c23){case'Brands':_0x46f932=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x464b99(0x96)}}]);break;case'Category':_0x46f932=await product[_0x464b99(0x128)]([{'$match':{'product_category':_0x464b99(0x12c)}},{'$group':{'_id':_0x464b99(0x124)}},{'$project':{'category':_0x464b99(0x96)}}]);break;}break;}_0x355040[_0x464b99(0xcd)](_0x46f932);}catch(_0x43db5d){_0x355040[_0x464b99(0xcd)]({'message':_0x43db5d[_0x464b99(0x10b)]});}}),router['post'](a0_0x169e21(0x12f),auth,async(_0x25215b,_0x5c10d0)=>{const _0x30866c=a0_0x169e21;try{console[_0x30866c(0x117)](_0x25215b[_0x30866c(0x73)]);const {prod_cat:_0x15c051,identity:_0x2f7cc3,valueData:_0x44ce5e,typeofbarcode:_0xdc6c84}=_0x25215b['body'];let _0x55fdfd;switch(_0x15c051){case'fg':if(_0x2f7cc3==_0x30866c(0x12e))_0x55fdfd=await product[_0x30866c(0x128)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x44ce5e}}]);else _0x2f7cc3==_0x30866c(0xc2)&&(_0x55fdfd=await product[_0x30866c(0x128)]([{'$match':{'product_category':_0x30866c(0xba),'category':_0x44ce5e}}]));break;case'rm':if(_0x2f7cc3==_0x30866c(0x12e))_0x55fdfd=await product[_0x30866c(0x128)]([{'$match':{'product_category':_0x30866c(0x12c),'brand':_0x44ce5e}}]);else _0x2f7cc3==_0x30866c(0xc2)&&(_0x55fdfd=await product[_0x30866c(0x128)]([{'$match':{'product_category':_0x30866c(0x12c),'category':_0x44ce5e}}]));break;}const _0x50125d=_0x26a815=>_0x26a815*0x48,_0x5c8633={'width':0x3,'height':0x1},_0x3be34b=new PDFDocument({'margin':_0x50125d(0.75),'size':[_0x50125d(_0x5c8633[_0x30866c(0x111)]),_0x50125d(_0x5c8633[_0x30866c(0x8c)])],'bufferPages':!![]}),_0x494a8a=_0x55fdfd['length'];for(let _0x19b18f=0x0;_0x19b18f<=_0x494a8a;_0x19b18f++){if(_0x19b18f!=_0x494a8a){const _0x115880=_0x55fdfd[_0x19b18f][_0x30866c(0x91)],_0x182124=_0x55fdfd[_0x19b18f]['primary_code'],_0x310e1b=_0x55fdfd[_0x19b18f][_0x30866c(0xeb)],_0x2f6653=_0x55fdfd[_0x19b18f][_0x30866c(0xfb)];var _0xeeff68;switch(_0xdc6c84){case'1':_0xeeff68=_0x182124;break;case'2':_0xeeff68=_0x310e1b;break;case'3':_0xeeff68=_0x2f6653;break;}const _0x31bec8={'width':0xd2,'height':0x64},_0x4824c6={'width':_0x50125d(_0x5c8633[_0x30866c(0x111)]),'height':_0x50125d(_0x5c8633[_0x30866c(0x8c)])},_0x36c734=new Canvas();JsBarcode(_0x36c734,_0xeeff68,{'format':_0x30866c(0xb4),'height':_0x31bec8['height'],'displayValue':!![],'text':_0xeeff68});const _0x269437=_0x36c734['toBuffer'](),_0x56ce43=_0x4824c6['width']/_0x31bec8['width'],_0x54000d=_0x4824c6[_0x30866c(0x8c)]/_0x31bec8[_0x30866c(0x8c)],_0x5bf2cf=Math['min'](_0x56ce43,_0x54000d),_0x22d370=_0x31bec8[_0x30866c(0x111)]*_0x5bf2cf,_0x22565e=_0x31bec8[_0x30866c(0x8c)]*_0x5bf2cf,_0x25bd8e=(_0x4824c6[_0x30866c(0x111)]-_0x22d370)/0x2,_0x49ecea=(_0x4824c6[_0x30866c(0x8c)]-_0x22565e)/0x2;_0x3be34b[_0x30866c(0x9d)](_0x269437,_0x25bd8e,_0x49ecea,{'width':_0x22d370,'height':_0x22565e}),_0x19b18f!=_0x494a8a&&_0x3be34b[_0x30866c(0x7a)]();}}const _0x5b1e4e=[];_0x3be34b['on'](_0x30866c(0x9f),_0x5b1e4e[_0x30866c(0xf3)][_0x30866c(0x132)](_0x5b1e4e)),_0x3be34b['on'](_0x30866c(0x125),()=>{const _0x579f72=_0x30866c,_0x91e90d=Buffer[_0x579f72(0x10d)](_0x5b1e4e),_0x34d1a1=_0x91e90d['toString'](_0x579f72(0x112));_0x5c10d0[_0x579f72(0xcd)]({'pdfContent':_0x34d1a1});}),_0x3be34b[_0x30866c(0x125)]();}catch(_0x558fee){_0x5c10d0['json']({'message':_0x558fee[_0x30866c(0x10b)]});}}),router['post'](a0_0x169e21(0xc9),auth,async(_0x540dd6,_0x18b3aa)=>{const _0x10c727=a0_0x169e21;try{console['log'](_0x540dd6[_0x10c727(0x73)]);const {prod_cat:_0x4a26a4,identity:_0x2627db,valueData:_0x526ac2}=_0x540dd6[_0x10c727(0x73)];let _0x5c69f4;switch(_0x4a26a4){case'fg':if(_0x2627db==_0x10c727(0x12e))_0x5c69f4=await product[_0x10c727(0x128)]([{'$match':{'product_category':_0x10c727(0xba),'brand':_0x526ac2}}]);else _0x2627db==_0x10c727(0xc2)&&(_0x5c69f4=await product[_0x10c727(0x128)]([{'$match':{'product_category':_0x10c727(0xba),'category':_0x526ac2}}]));break;case'rm':if(_0x2627db==_0x10c727(0x12e))_0x5c69f4=await product[_0x10c727(0x128)]([{'$match':{'product_category':_0x10c727(0x12c),'brand':_0x526ac2}}]);else _0x2627db=='Category'&&(_0x5c69f4=await product[_0x10c727(0x128)]([{'$match':{'product_category':_0x10c727(0x12c),'category':_0x526ac2}}]));break;}_0x18b3aa[_0x10c727(0xcd)]({'data':_0x5c69f4});}catch(_0x1afc13){_0x18b3aa[_0x10c727(0xcd)]({'message':_0x1afc13[_0x10c727(0x10b)]});}}),router[a0_0x169e21(0xdc)]('/print_barcode_single/:id',auth,async(_0x149cb6,_0x715eab)=>{const _0x53b71a=a0_0x169e21;try{const _0x49ea05=_0x149cb6[_0x53b71a(0xc3)]['id'],{copies:_0x30c315,typeofbarcode:_0xa79706}=_0x149cb6[_0x53b71a(0x73)];var _0x47965e=await product[_0x53b71a(0x74)](_0x49ea05);const _0x5e72f8=_0xf67636=>_0xf67636*0x48,_0xfa2893={'width':0x3,'height':0x1},_0x423be3=new PDFDocument({'margin':_0x5e72f8(0.75),'size':[_0x5e72f8(_0xfa2893['width']),_0x5e72f8(_0xfa2893[_0x53b71a(0x8c)])],'bufferPages':!![]}),_0x2e35a4=_0x30c315,_0x3051dc=_0x47965e[_0x53b71a(0x91)],_0x4a0196=_0x47965e[_0x53b71a(0xdf)],_0xde11dd=_0x47965e[_0x53b71a(0xeb)],_0x34be82=_0x47965e[_0x53b71a(0xfb)];let _0x47ddb8;switch(_0xa79706){case'1':_0x47ddb8=_0x4a0196;break;case'2':_0x47ddb8=_0xde11dd;break;case'3':_0x47ddb8=_0x34be82;break;}const _0x48e79b={'width':0xd2,'height':0x64},_0x182c36={'width':_0x5e72f8(_0xfa2893[_0x53b71a(0x111)]),'height':_0x5e72f8(_0xfa2893['height'])};for(let _0xb093d7=0x1;_0xb093d7<=_0x2e35a4;_0xb093d7++){const _0x184b73=new Canvas();JsBarcode(_0x184b73,_0x47ddb8,{'format':_0x53b71a(0xb4),'height':_0x48e79b[_0x53b71a(0x8c)],'displayValue':!![],'text':_0x47ddb8});const _0x4fb414=_0x184b73[_0x53b71a(0x7e)](),_0x597c0a=_0x182c36[_0x53b71a(0x111)]/_0x48e79b[_0x53b71a(0x111)],_0x14319f=_0x182c36[_0x53b71a(0x8c)]/_0x48e79b['height'],_0xc58dd8=Math[_0x53b71a(0x80)](_0x597c0a,_0x14319f),_0x4dc95e=_0x48e79b[_0x53b71a(0x111)]*_0xc58dd8,_0xe89bd7=_0x48e79b[_0x53b71a(0x8c)]*_0xc58dd8,_0x33c7e4=(_0x182c36[_0x53b71a(0x111)]-_0x4dc95e)/0x2,_0xe41153=(_0x182c36[_0x53b71a(0x8c)]-_0xe89bd7)/0x2;_0x423be3['image'](_0x4fb414,_0x33c7e4,_0xe41153,{'width':_0x4dc95e,'height':_0xe89bd7}),_0xb093d7!=_0x2e35a4&&_0x423be3[_0x53b71a(0x7a)]();}const _0x1abd04=[];_0x423be3['on'](_0x53b71a(0x9f),_0x1abd04[_0x53b71a(0xf3)][_0x53b71a(0x132)](_0x1abd04)),_0x423be3['on'](_0x53b71a(0x125),()=>{const _0x5bc4d2=_0x53b71a,_0x23ab38=Buffer['concat'](_0x1abd04),_0x4d6328=_0x23ab38[_0x5bc4d2(0xb0)](_0x5bc4d2(0x112));_0x715eab[_0x5bc4d2(0xcd)]({'pdfContent':_0x4d6328});}),_0x423be3[_0x53b71a(0x125)]();}catch(_0x579279){_0x715eab['json']({'message':_0x579279['message']});}}),module[a0_0x169e21(0x134)]=router;