const a0_0x5cc024=a0_0x2323;(function(_0x22822f,_0x413156){const _0x295d0b=a0_0x2323,_0x833a60=_0x22822f();while(!![]){try{const _0x5cda01=-parseInt(_0x295d0b(0x1e0))/0x1+parseInt(_0x295d0b(0x169))/0x2*(parseInt(_0x295d0b(0x15e))/0x3)+parseInt(_0x295d0b(0x195))/0x4+-parseInt(_0x295d0b(0x17c))/0x5+-parseInt(_0x295d0b(0x148))/0x6*(parseInt(_0x295d0b(0x1ec))/0x7)+-parseInt(_0x295d0b(0x1c1))/0x8*(parseInt(_0x295d0b(0x1c9))/0x9)+parseInt(_0x295d0b(0x14c))/0xa;if(_0x5cda01===_0x413156)break;else _0x833a60['push'](_0x833a60['shift']());}catch(_0xa1ec89){_0x833a60['push'](_0x833a60['shift']());}}}(a0_0x4f28,0x5d87f));const express=require(a0_0x5cc024(0x177)),res=require(a0_0x5cc024(0x1f8)),app=express(),router=express[a0_0x5cc024(0x1f3)](),multer=require(a0_0x5cc024(0x181)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5cc024(0x205)),auth=require(a0_0x5cc024(0x1a5)),users=require(a0_0x5cc024(0x16f)),excelJS=require(a0_0x5cc024(0x1d2)),xlsx=require('xlsx'),JsBarcode=require(a0_0x5cc024(0x202)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x5cc024(0x19b));function a0_0x2323(_0x9637e6,_0x2051e3){const _0x4f287c=a0_0x4f28();return a0_0x2323=function(_0x232333,_0x2f9da1){_0x232333=_0x232333-0x148;let _0x5c0104=_0x4f287c[_0x232333];return _0x5c0104;},a0_0x2323(_0x9637e6,_0x2051e3);}router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1e6),auth,async(_0x1989e6,_0x5e3ab7)=>{const _0x32b427=a0_0x5cc024;try{const {username:_0x26756b,email:_0x1d494b,role:_0x567bb9}=_0x1989e6[_0x32b427(0x193)],_0x2a8c0e=_0x1989e6[_0x32b427(0x193)],_0x5f1ba7=await profile[_0x32b427(0x1c7)]({'email':_0x2a8c0e[_0x32b427(0x1bd)]}),_0x1bc1b0=await master_shop[_0x32b427(0x151)]();console['log'](_0x32b427(0x1e7),_0x1bc1b0);const _0x5bdde5=await categories[_0x32b427(0x151)]();if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x1f1))var _0x296977=users[_0x32b427(0x1a0)];else{if(_0x1bc1b0[0x0]['language']==_0x32b427(0x198))var _0x296977=users[_0x32b427(0x198)];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x1a4))var _0x296977=users[_0x32b427(0x1a4)];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x17f))var _0x296977=users['Spanish'];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x186))var _0x296977=users['French'];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x1cc))var _0x296977=users['Portuguese'];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]==_0x32b427(0x18d))var _0x296977=users[_0x32b427(0x18d)];else{if(_0x1bc1b0[0x0][_0x32b427(0x16b)]=='Arabic\x20(ae)')var _0x296977=users[_0x32b427(0x197)];}}}}}}}_0x5e3ab7[_0x32b427(0x1d8)]('categories',{'success':_0x1989e6[_0x32b427(0x191)](_0x32b427(0x178)),'errors':_0x1989e6[_0x32b427(0x191)](_0x32b427(0x1bc)),'role':_0x2a8c0e,'profile':_0x5f1ba7,'user':_0x5bdde5,'master_shop':_0x1bc1b0,'language':_0x296977});}catch(_0x1270d8){console[_0x32b427(0x166)](_0x1270d8);}}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1e6),auth,async(_0x1d749a,_0x915c92)=>{const _0x49efcb=a0_0x5cc024;try{const {name:_0x2ca393,products:_0x3ffbba}=_0x1d749a[_0x49efcb(0x1ce)],_0x4ec39b=new categories({'name':_0x2ca393,'products':_0x3ffbba}),_0x36f400=await categories['findOne']({'name':_0x2ca393});_0x36f400?_0x1d749a[_0x49efcb(0x191)]('errors',_0x2ca393+_0x49efcb(0x176)):_0x1d749a['flash'](_0x49efcb(0x178),_0x2ca393+_0x49efcb(0x1e8));const _0xb41341=await _0x4ec39b[_0x49efcb(0x1cb)]();_0x915c92['redirect'](_0x49efcb(0x1c5));}catch(_0x2c3ad9){console['log'](_0x2c3ad9);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1f9),auth,async(_0x51f680,_0x25a24e)=>{const _0x3d4324=a0_0x5cc024;try{const {username:_0x2cc457,email:_0xa95c91,role:_0x20b138}=_0x51f680['user'],_0x2d37e3=_0x51f680[_0x3d4324(0x193)],_0x28c0e2=await profile[_0x3d4324(0x1c7)]({'email':_0x2d37e3['email']}),_0x4b0b78=await master_shop['find']();console[_0x3d4324(0x166)](_0x3d4324(0x1e7),_0x4b0b78);const _0x5179c4=_0x51f680[_0x3d4324(0x1ad)]['id'];console[_0x3d4324(0x166)](_0x5179c4);const _0x158ccb=await categories[_0x3d4324(0x1f0)](_0x5179c4);if(_0x4b0b78[0x0][_0x3d4324(0x16b)]=='English\x20(US)')var _0x110bab=users[_0x3d4324(0x1a0)];else{if(_0x4b0b78[0x0][_0x3d4324(0x16b)]==_0x3d4324(0x198))var _0x110bab=users['Hindi'];else{if(_0x4b0b78[0x0][_0x3d4324(0x16b)]=='German')var _0x110bab=users['German'];else{if(_0x4b0b78[0x0]['language']=='Spanish')var _0x110bab=users[_0x3d4324(0x17f)];else{if(_0x4b0b78[0x0]['language']==_0x3d4324(0x186))var _0x110bab=users[_0x3d4324(0x186)];else{if(_0x4b0b78[0x0][_0x3d4324(0x16b)]==_0x3d4324(0x1cc))var _0x110bab=users[_0x3d4324(0x185)];else{if(_0x4b0b78[0x0]['language']=='Chinese')var _0x110bab=users[_0x3d4324(0x18d)];else{if(_0x4b0b78[0x0]['language']==_0x3d4324(0x1b9))var _0x110bab=users[_0x3d4324(0x197)];}}}}}}}_0x25a24e[_0x3d4324(0x1d8)](_0x3d4324(0x167),{'success':_0x51f680[_0x3d4324(0x191)](_0x3d4324(0x178)),'errors':_0x51f680[_0x3d4324(0x191)](_0x3d4324(0x1bc)),'role':_0x2d37e3,'profile':_0x28c0e2,'master_shop':_0x4b0b78,'user':_0x158ccb,'language':_0x110bab});}catch(_0x538f50){console[_0x3d4324(0x166)](_0x538f50);}}),router[a0_0x5cc024(0x14d)]('/categories/:id',auth,async(_0x4dc04d,_0x40ac7a)=>{const _0x176d0b=a0_0x5cc024;try{const _0x3240ff=_0x4dc04d[_0x176d0b(0x1ad)]['id'],_0x59083a=await categories[_0x176d0b(0x1fd)](_0x3240ff,_0x4dc04d[_0x176d0b(0x1ce)]);_0x4dc04d[_0x176d0b(0x191)](_0x176d0b(0x178),''+users['categories_edit']),_0x40ac7a[_0x176d0b(0x152)](_0x176d0b(0x1c5));}catch(_0x1c71d1){console[_0x176d0b(0x166)](_0x1c71d1);}}),router['get'](a0_0x5cc024(0x18e),auth,async(_0x1c8c29,_0x2e2fd8)=>{const _0x3c1391=a0_0x5cc024;try{const _0x37ba03=_0x1c8c29[_0x3c1391(0x1ad)]['id'],_0x22ebee=await categories[_0x3c1391(0x150)](_0x37ba03);_0x1c8c29[_0x3c1391(0x191)]('success',_0x3c1391(0x1ca)),_0x2e2fd8['redirect'](_0x3c1391(0x1c5));}catch(_0x5db211){console[_0x3c1391(0x166)](_0x5db211);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x160),auth,async(_0xa31e79,_0x49a69d)=>{const _0x4a4c38=a0_0x5cc024;try{const {username:_0x347cec,email:_0x2d40c8,role:_0x432a6b}=_0xa31e79[_0x4a4c38(0x193)],_0x1b9fe=_0xa31e79['user'],_0x15d422=await profile[_0x4a4c38(0x1c7)]({'email':_0x1b9fe[_0x4a4c38(0x1bd)]}),_0x74ecd1=await master_shop['find']();console['log'](_0x4a4c38(0x1e7),_0x74ecd1);const _0x3e38c1=await brands['find']();if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x1f1))var _0x535eea=users[_0x4a4c38(0x1a0)];else{if(_0x74ecd1[0x0]['language']=='Hindi')var _0x535eea=users['Hindi'];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x1a4))var _0x535eea=users[_0x4a4c38(0x1a4)];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x17f))var _0x535eea=users['Spanish'];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x186))var _0x535eea=users['French'];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x1cc))var _0x535eea=users['Portuguese'];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x18d))var _0x535eea=users[_0x4a4c38(0x18d)];else{if(_0x74ecd1[0x0][_0x4a4c38(0x16b)]==_0x4a4c38(0x1b9))var _0x535eea=users['Arabic'];}}}}}}}_0x49a69d[_0x4a4c38(0x1d8)]('brands',{'success':_0xa31e79[_0x4a4c38(0x191)]('success'),'errors':_0xa31e79['flash']('errors'),'role':_0x1b9fe,'profile':_0x15d422,'master_shop':_0x74ecd1,'user':_0x3e38c1,'language':_0x535eea});}catch(_0x30c9f1){console[_0x4a4c38(0x166)](_0x30c9f1);}}),router['post'](a0_0x5cc024(0x160),auth,async(_0x48b1e8,_0x12bead)=>{const _0x201acd=a0_0x5cc024;try{const {name:_0x41a64b,products:_0x35a514}=_0x48b1e8[_0x201acd(0x1ce)],_0x3d01d6=new brands({'name':_0x41a64b,'products':_0x35a514}),_0x1b5454=await brands[_0x201acd(0x1c7)]({'name':_0x41a64b});_0x1b5454?_0x48b1e8[_0x201acd(0x191)](_0x201acd(0x1bc),_0x41a64b+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x48b1e8[_0x201acd(0x191)](_0x201acd(0x178),_0x41a64b+_0x201acd(0x1b1));const _0x5b871d=await _0x3d01d6[_0x201acd(0x1cb)]();_0x12bead[_0x201acd(0x152)](_0x201acd(0x1d0));}catch(_0x303627){console[_0x201acd(0x166)](_0x303627);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x14f),auth,async(_0x52378c,_0x513dd8)=>{const _0x1f5dd0=a0_0x5cc024;try{const {username:_0x59fbd4,email:_0x57a660,role:_0x3d90ff}=_0x52378c[_0x1f5dd0(0x193)],_0x3997fa=_0x52378c[_0x1f5dd0(0x193)],_0x3a7072=await profile[_0x1f5dd0(0x1c7)]({'email':_0x3997fa['email']}),_0x272ebb=await master_shop[_0x1f5dd0(0x151)]();console[_0x1f5dd0(0x166)]('master',_0x272ebb);const _0x1a5ce9=_0x52378c[_0x1f5dd0(0x1ad)]['id'];console['log'](_0x1a5ce9);const _0x36aa01=await brands['findById'](_0x1a5ce9);if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]=='English\x20(US)')var _0x216a09=users[_0x1f5dd0(0x1a0)];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x198))var _0x216a09=users[_0x1f5dd0(0x198)];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x1a4))var _0x216a09=users[_0x1f5dd0(0x1a4)];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x17f))var _0x216a09=users['Spanish'];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x186))var _0x216a09=users[_0x1f5dd0(0x186)];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x1cc))var _0x216a09=users[_0x1f5dd0(0x185)];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x18d))var _0x216a09=users['Chinese'];else{if(_0x272ebb[0x0][_0x1f5dd0(0x16b)]==_0x1f5dd0(0x1b9))var _0x216a09=users[_0x1f5dd0(0x197)];}}}}}}}_0x513dd8[_0x1f5dd0(0x1d8)](_0x1f5dd0(0x1d9),{'success':_0x52378c['flash'](_0x1f5dd0(0x178)),'errors':_0x52378c[_0x1f5dd0(0x191)]('errors'),'role':_0x3997fa,'profile':_0x3a7072,'master_shop':_0x272ebb,'user':_0x36aa01,'language':_0x216a09});}catch(_0x486b0c){console[_0x1f5dd0(0x166)](_0x486b0c);}}),router['post'](a0_0x5cc024(0x14f),auth,async(_0x4517aa,_0x349cb6)=>{const _0x3f5951=a0_0x5cc024;try{const _0x13a054=_0x4517aa['params']['id'],_0x4a3ed7=await brands[_0x3f5951(0x1fd)](_0x13a054,_0x4517aa[_0x3f5951(0x1ce)]);_0x4517aa[_0x3f5951(0x191)](_0x3f5951(0x178),_0x3f5951(0x1ac)),_0x349cb6['redirect'](_0x3f5951(0x1d0));}catch(_0x47630e){console[_0x3f5951(0x166)](_0x47630e);}}),router['get'](a0_0x5cc024(0x156),auth,async(_0xf0387c,_0x45dcd4)=>{const _0x34d943=a0_0x5cc024;try{const _0x5ba733=_0xf0387c[_0x34d943(0x1ad)]['id'],_0x31a517=await brands[_0x34d943(0x150)](_0x5ba733);_0xf0387c[_0x34d943(0x191)](_0x34d943(0x178),_0x34d943(0x19a)),_0x45dcd4[_0x34d943(0x152)](_0x34d943(0x1d0));}catch(_0x4aabd5){console['log'](_0x4aabd5);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x171),auth,async(_0x2931c1,_0x293b00)=>{const _0x51f198=a0_0x5cc024;try{const {username:_0x3854bf,email:_0x2c1877,role:_0xa04523}=_0x2931c1[_0x51f198(0x193)],_0x196773=_0x2931c1[_0x51f198(0x193)],_0x367210=await profile[_0x51f198(0x1c7)]({'email':_0x196773[_0x51f198(0x1bd)]}),_0x1a7324=await master_shop[_0x51f198(0x151)]();console['log']('master',_0x1a7324);const _0x41b6fd=await units[_0x51f198(0x151)]();if(_0x1a7324[0x0][_0x51f198(0x16b)]=='English\x20(US)')var _0x75ae90=users[_0x51f198(0x1a0)];else{if(_0x1a7324[0x0][_0x51f198(0x16b)]==_0x51f198(0x198))var _0x75ae90=users[_0x51f198(0x198)];else{if(_0x1a7324[0x0]['language']==_0x51f198(0x1a4))var _0x75ae90=users[_0x51f198(0x1a4)];else{if(_0x1a7324[0x0][_0x51f198(0x16b)]=='Spanish')var _0x75ae90=users[_0x51f198(0x17f)];else{if(_0x1a7324[0x0][_0x51f198(0x16b)]==_0x51f198(0x186))var _0x75ae90=users[_0x51f198(0x186)];else{if(_0x1a7324[0x0]['language']==_0x51f198(0x1cc))var _0x75ae90=users['Portuguese'];else{if(_0x1a7324[0x0][_0x51f198(0x16b)]==_0x51f198(0x18d))var _0x75ae90=users['Chinese'];else{if(_0x1a7324[0x0]['language']==_0x51f198(0x1b9))var _0x75ae90=users[_0x51f198(0x197)];}}}}}}}_0x293b00[_0x51f198(0x1d8)](_0x51f198(0x1e1),{'success':_0x2931c1['flash'](_0x51f198(0x178)),'errors':_0x2931c1[_0x51f198(0x191)](_0x51f198(0x1bc)),'role':_0x196773,'profile':_0x367210,'master_shop':_0x1a7324,'user':_0x41b6fd,'language':_0x75ae90});}catch(_0x5a2966){console[_0x51f198(0x166)](_0x5a2966);}}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x171),auth,async(_0x729fa3,_0x41ec7d)=>{const _0x1c8e93=a0_0x5cc024;try{const {name:_0x4d63d1,secondary_unit:_0x42c309,products:_0x45efb7}=_0x729fa3[_0x1c8e93(0x1ce)],_0x277134=new units({'name':_0x4d63d1,'secondary_unit':_0x42c309,'products':_0x45efb7}),_0x32a7a6=await units['findOne']({'name':_0x4d63d1});_0x32a7a6?_0x729fa3[_0x1c8e93(0x191)](_0x1c8e93(0x1bc),_0x4d63d1+_0x1c8e93(0x1f4)):_0x729fa3[_0x1c8e93(0x191)](_0x1c8e93(0x178),_0x4d63d1+'\x20unit\x20is\x20add\x20successfully');const _0x2d9e74=await _0x277134[_0x1c8e93(0x1cb)]();_0x41ec7d['redirect'](_0x1c8e93(0x15a));}catch(_0x356017){console[_0x1c8e93(0x166)](_0x356017);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1de),auth,async(_0x2552a4,_0x95ba19)=>{const _0x22b938=a0_0x5cc024;try{const {username:_0x13bf71,email:_0x36ab9a,role:_0x31ae7c}=_0x2552a4[_0x22b938(0x193)],_0x1ea05d=_0x2552a4[_0x22b938(0x193)],_0x5f02ce=await profile[_0x22b938(0x1c7)]({'email':_0x1ea05d[_0x22b938(0x1bd)]}),_0x355230=await master_shop['find']();console['log'](_0x22b938(0x1e7),_0x355230);const _0x25f581=_0x2552a4[_0x22b938(0x1ad)]['id'],_0x23d755=await units[_0x22b938(0x1f0)](_0x25f581);if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x1f1))var _0x4a6478=users[_0x22b938(0x1a0)];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x198))var _0x4a6478=users['Hindi'];else{if(_0x355230[0x0][_0x22b938(0x16b)]=='German')var _0x4a6478=users[_0x22b938(0x1a4)];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x17f))var _0x4a6478=users[_0x22b938(0x17f)];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x186))var _0x4a6478=users[_0x22b938(0x186)];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x1cc))var _0x4a6478=users['Portuguese'];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x18d))var _0x4a6478=users['Chinese'];else{if(_0x355230[0x0][_0x22b938(0x16b)]==_0x22b938(0x1b9))var _0x4a6478=users['Arabic'];}}}}}}}_0x95ba19[_0x22b938(0x1d8)](_0x22b938(0x1e1),{'success':_0x2552a4[_0x22b938(0x191)](_0x22b938(0x178)),'errors':_0x2552a4[_0x22b938(0x191)](_0x22b938(0x1bc)),'role':_0x1ea05d,'profile':_0x5f02ce,'master_shop':_0x355230,'user':_0x23d755,'language':_0x4a6478});}catch(_0x235558){console[_0x22b938(0x166)](_0x235558);}}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1de),auth,async(_0x377d60,_0x49ed5d)=>{const _0x296d39=a0_0x5cc024;try{const _0x151eec=_0x377d60[_0x296d39(0x1ad)]['id'],_0x48a4ed=await units[_0x296d39(0x1fd)](_0x151eec,_0x377d60[_0x296d39(0x1ce)]);_0x377d60[_0x296d39(0x191)](_0x296d39(0x178),_0x296d39(0x183)),_0x49ed5d[_0x296d39(0x152)](_0x296d39(0x15a));}catch(_0x2d2ff6){console['log'](_0x2d2ff6);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1cd),auth,async(_0x3ada72,_0x417a64)=>{const _0x4bf0cb=a0_0x5cc024;try{const _0x41f4bb=_0x3ada72[_0x4bf0cb(0x1ad)]['id'],_0x5d705a=await units['findByIdAndDelete'](_0x41f4bb);_0x3ada72[_0x4bf0cb(0x191)](_0x4bf0cb(0x178),_0x4bf0cb(0x1ae)),_0x417a64['redirect']('/products/units');}catch(_0x5f05c1){console['log'](_0x5f05c1);}});const storage=multer[a0_0x5cc024(0x1dd)]({'destination':(_0x30f1b3,_0x3dcf77,_0x4782f9)=>{const _0x1c89fa=a0_0x5cc024;_0x4782f9(null,_0x1c89fa(0x17b));},'filename':(_0x52bcf4,_0x27cf62,_0x14bee8)=>{const _0x24b2df=a0_0x5cc024;_0x14bee8(null,Date[_0x24b2df(0x1be)]()+_0x27cf62['originalname']);}}),upload=multer({'storage':storage});router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x15b),auth,async(_0x550100,_0x3bb61c)=>{const _0x5bc42a=a0_0x5cc024;try{const {username:_0x337508,email:_0x3293cc,role:_0x5b904e}=_0x550100[_0x5bc42a(0x193)],_0x54db81=_0x550100[_0x5bc42a(0x193)],_0x5bdcdc=await profile[_0x5bc42a(0x1c7)]({'email':_0x54db81['email']}),_0x11566e={'year':_0x5bc42a(0x174),'month':_0x5bc42a(0x192),'day':'numeric'},_0x20b17a=await master_shop['find']();console[_0x5bc42a(0x166)](_0x5bc42a(0x201),_0x20b17a);const _0x203d39=await product[_0x5bc42a(0x151)]();console[_0x5bc42a(0x166)](_0x5bc42a(0x1b0),_0x203d39);const _0x597e0d=await warehouse[_0x5bc42a(0x187)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x5bc42a(0x17e),'localField':'product_details.product_name','foreignField':_0x5bc42a(0x1e5),'as':_0x5bc42a(0x19e)}},{'$unwind':_0x5bc42a(0x200)},{'$project':{'product_name':_0x5bc42a(0x189),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x5bc42a(0x1f6),'product_stock':{'$sum':_0x5bc42a(0x157)}}}]);console[_0x5bc42a(0x166)]('Products\x20warehouse_data',_0x597e0d),_0x597e0d[_0x5bc42a(0x16c)](_0x487a6c=>{const _0x386a9a=_0x5bc42a,_0x3246cb=_0x203d39[_0x386a9a(0x19f)](_0x56a2e0=>{const _0x2f8900=_0x386a9a;_0x56a2e0[_0x2f8900(0x1e5)]==_0x487a6c[_0x2f8900(0x14b)]&&(_0x56a2e0[_0x2f8900(0x206)]=parseInt(_0x56a2e0[_0x2f8900(0x206)])+parseInt(_0x487a6c['product_stock']));});}),console[_0x5bc42a(0x166)](_0x5bc42a(0x1b0),_0x203d39);if(_0x20b17a[0x0][_0x5bc42a(0x16b)]==_0x5bc42a(0x1f1))var _0x1bd4e7=users[_0x5bc42a(0x1a0)];else{if(_0x20b17a[0x0][_0x5bc42a(0x16b)]==_0x5bc42a(0x198))var _0x1bd4e7=users[_0x5bc42a(0x198)];else{if(_0x20b17a[0x0][_0x5bc42a(0x16b)]==_0x5bc42a(0x1a4))var _0x1bd4e7=users['German'];else{if(_0x20b17a[0x0]['language']==_0x5bc42a(0x17f))var _0x1bd4e7=users[_0x5bc42a(0x17f)];else{if(_0x20b17a[0x0][_0x5bc42a(0x16b)]==_0x5bc42a(0x186))var _0x1bd4e7=users[_0x5bc42a(0x186)];else{if(_0x20b17a[0x0][_0x5bc42a(0x16b)]=='Portuguese\x20(BR)')var _0x1bd4e7=users[_0x5bc42a(0x185)];else{if(_0x20b17a[0x0][_0x5bc42a(0x16b)]=='Chinese')var _0x1bd4e7=users[_0x5bc42a(0x18d)];else{if(_0x20b17a[0x0]['language']==_0x5bc42a(0x1b9))var _0x1bd4e7=users[_0x5bc42a(0x197)];}}}}}}}_0x3bb61c[_0x5bc42a(0x1d8)](_0x5bc42a(0x17e),{'success':_0x550100['flash']('success'),'errors':_0x550100[_0x5bc42a(0x191)]('errors'),'alldata':_0x203d39,'profile':_0x5bdcdc,'master_shop':_0x20b17a,'role':_0x54db81,'product_stock':_0x597e0d,'language':_0x1bd4e7});}catch(_0x51e592){console[_0x5bc42a(0x166)](_0x51e592);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1c2),auth,async(_0x30622f,_0x2b59c6)=>{const _0x3e6c3e=a0_0x5cc024;try{const {username:_0x596286,email:_0x5f4886,role:_0xb9fc86}=_0x30622f[_0x3e6c3e(0x193)],_0x59489e=_0x30622f[_0x3e6c3e(0x193)],_0x18bdb7=await profile['findOne']({'email':_0x59489e[_0x3e6c3e(0x1bd)]}),_0x34a552=await master_shop[_0x3e6c3e(0x151)]();console['log'](_0x3e6c3e(0x1e7),_0x34a552);const _0x177d32=await categories[_0x3e6c3e(0x151)]({}),_0x3b4b59=await brands[_0x3e6c3e(0x151)]({}),_0x11acb1=await units[_0x3e6c3e(0x151)]({}),_0xe1a60f=await warehouse[_0x3e6c3e(0x151)]({'status':_0x3e6c3e(0x175)});if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x1f1))var _0x575f1c=users['English'];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x198))var _0x575f1c=users[_0x3e6c3e(0x198)];else{if(_0x34a552[0x0]['language']==_0x3e6c3e(0x1a4))var _0x575f1c=users['German'];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x17f))var _0x575f1c=users['Spanish'];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]=='French')var _0x575f1c=users[_0x3e6c3e(0x186)];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x1cc))var _0x575f1c=users[_0x3e6c3e(0x185)];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x18d))var _0x575f1c=users[_0x3e6c3e(0x18d)];else{if(_0x34a552[0x0][_0x3e6c3e(0x16b)]==_0x3e6c3e(0x1b9))var _0x575f1c=users[_0x3e6c3e(0x197)];}}}}}}}_0x2b59c6[_0x3e6c3e(0x1d8)](_0x3e6c3e(0x14e),{'success':_0x30622f['flash'](_0x3e6c3e(0x178)),'errors':_0x30622f['flash'](_0x3e6c3e(0x1bc)),'role':_0x59489e,'profile':_0x18bdb7,'categories':_0x177d32,'brands':_0x3b4b59,'master_shop':_0x34a552,'units':_0x11acb1,'language':_0x575f1c,'find_data':_0xe1a60f});}catch(_0x9293f2){console['log'](_0x9293f2);}}),router[a0_0x5cc024(0x14d)]('/view/add_products',auth,upload[a0_0x5cc024(0x149)](a0_0x5cc024(0x194)),async(_0x260005,_0x4ba1f0)=>{const _0x43981a=a0_0x5cc024;try{const {name:_0x5a90fd,category:_0x39f6b4,brand:_0x24a809,unit:_0x555916,alertquantity:_0x222de2,stock:_0x15e306,product_code:_0x2a1a88,warehouse:_0x3d42a8,primary_ItemCode:_0x1aeae5,second_ItemCode:_0x12cbfa,second_unit:_0x5019ee,maxPerUnit:_0x164720,MaxPerProduct:_0x4a85e1}=_0x260005[_0x43981a(0x1ce)],_0x5872d9=_0x260005[_0x43981a(0x1c6)]?.[_0x43981a(0x1a7)]||_0x43981a(0x165),_0x586085=new product({'image':_0x5872d9,'name':_0x5a90fd,'category':_0x39f6b4,'brand':_0x24a809,'unit':_0x555916,'alertquantity':_0x222de2,'stock':_0x15e306,'product_code':_0x2a1a88,'warehouse':_0x3d42a8,'primary_code':_0x1aeae5,'secondary_code':_0x12cbfa,'second_unit':_0x5019ee,'maxStocks':_0x4a85e1,'maxProdPerUnit':_0x164720}),_0x21a859=await _0x586085[_0x43981a(0x1cb)](),_0x201d9f=await categories[_0x43981a(0x1c7)]({'name':_0x39f6b4});_0x201d9f[_0x43981a(0x17e)]=parseInt(_0x201d9f[_0x43981a(0x17e)])+0x1,await _0x201d9f[_0x43981a(0x1cb)]();const _0x24d169=await brands['findOne']({'name':_0x24a809});_0x24d169[_0x43981a(0x17e)]=parseInt(_0x24d169[_0x43981a(0x17e)])+0x1,await _0x24d169['save']();const _0x7928e9=await units[_0x43981a(0x1c7)]({'name':_0x555916});_0x7928e9[_0x43981a(0x17e)]=parseInt(_0x7928e9[_0x43981a(0x17e)])+0x1,await _0x7928e9[_0x43981a(0x1cb)](),_0x260005[_0x43981a(0x191)](_0x43981a(0x178),_0x43981a(0x159)),_0x4ba1f0[_0x43981a(0x152)]('/products/view');}catch(_0x24e042){console[_0x43981a(0x166)](_0x24e042);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x1b5),auth,async(_0x36b313,_0x189850)=>{const _0x3e21b1=a0_0x5cc024;try{const {username:_0x4f11be,email:_0x340587,role:_0x3dd49b}=_0x36b313[_0x3e21b1(0x193)],_0x3078bd=_0x36b313[_0x3e21b1(0x193)],_0x5186c8=await profile[_0x3e21b1(0x1c7)]({'email':_0x3078bd[_0x3e21b1(0x1bd)]}),_0x37585d=await master_shop['find']();console['log'](_0x3e21b1(0x17d),_0x37585d);const _0x5e85a5=_0x36b313[_0x3e21b1(0x1ad)]['id'],_0x3be55f=await product[_0x3e21b1(0x1f0)](_0x5e85a5),_0xc813d6=await categories[_0x3e21b1(0x151)]({}),_0xcf4396=await brands['find']({}),_0x2317b5=await units['find']({}),_0x299460=await warehouse[_0x3e21b1(0x151)]({'status':'Enabled'}),_0x337260=await units['aggregate']([{'$group':{'_id':_0x3e21b1(0x179),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x37585d[0x0]['language']==_0x3e21b1(0x1f1))var _0x23e6c4=users[_0x3e21b1(0x1a0)];else{if(_0x37585d[0x0]['language']==_0x3e21b1(0x198))var _0x23e6c4=users[_0x3e21b1(0x198)];else{if(_0x37585d[0x0][_0x3e21b1(0x16b)]==_0x3e21b1(0x1a4))var _0x23e6c4=users['German'];else{if(_0x37585d[0x0][_0x3e21b1(0x16b)]==_0x3e21b1(0x17f))var _0x23e6c4=users['Spanish'];else{if(_0x37585d[0x0][_0x3e21b1(0x16b)]==_0x3e21b1(0x186))var _0x23e6c4=users[_0x3e21b1(0x186)];else{if(_0x37585d[0x0][_0x3e21b1(0x16b)]==_0x3e21b1(0x1cc))var _0x23e6c4=users['Portuguese'];else{if(_0x37585d[0x0][_0x3e21b1(0x16b)]=='Chinese')var _0x23e6c4=users['Chinese'];else{if(_0x37585d[0x0]['language']==_0x3e21b1(0x1b9))var _0x23e6c4=users['Arabic'];}}}}}}}_0x189850[_0x3e21b1(0x1d8)]('edit_product',{'success':_0x36b313[_0x3e21b1(0x191)](_0x3e21b1(0x178)),'errors':_0x36b313['flash']('errors'),'role':_0x3078bd,'profile':_0x5186c8,'alldata':_0x3be55f,'categories':_0xc813d6,'brands':_0xcf4396,'master_shop':_0x37585d,'units':_0x2317b5,'secondunit':_0x337260,'find_data':_0x299460,'language':_0x23e6c4});}catch(_0x59d602){console[_0x3e21b1(0x166)](_0x59d602);}}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1b5),auth,upload[a0_0x5cc024(0x149)]('image'),async(_0x55625a,_0x299b3e)=>{const _0x2ac5a5=a0_0x5cc024;try{console[_0x2ac5a5(0x166)](_0x2ac5a5(0x16e));const _0x2b2296=_0x55625a[_0x2ac5a5(0x1ad)]['id'],_0xffd052=await product[_0x2ac5a5(0x1f0)](_0x2b2296),{image:_0x215b61,name:_0x4053c3,category:_0x5ed68f,brand:_0x40c4c9,sku:_0x5f5358,unit:_0x16f3d6,alertquantity:_0x1f0fa5,product_code:_0x47c81b,warehouse:_0x50576a,primary_ItemCode:_0x448ac1,second_ItemCode:_0x393b72,second_unit:_0x4704bf,maxPerUnit:_0xdbfde2,MaxPerProduct:_0x391756,prod_catdata:_0x5e12ab}=_0x55625a[_0x2ac5a5(0x1ce)];_0x55625a['file']&&(_0xffd052[_0x2ac5a5(0x194)]=_0x55625a['file']['filename']);_0xffd052['name']=_0x4053c3,_0xffd052[_0x2ac5a5(0x15d)]=_0x5ed68f,_0xffd052[_0x2ac5a5(0x1fa)]=_0x40c4c9,_0xffd052[_0x2ac5a5(0x1a6)]=_0x5f5358,_0xffd052[_0x2ac5a5(0x164)]=_0x16f3d6,_0xffd052[_0x2ac5a5(0x1db)]=_0x1f0fa5,_0xffd052[_0x2ac5a5(0x1af)]=_0x47c81b,_0xffd052['warehouse']=_0x50576a,_0xffd052[_0x2ac5a5(0x1d4)]=_0x448ac1,_0xffd052['secondary_code']=_0x393b72,_0xffd052[_0x2ac5a5(0x155)]=_0x4704bf,_0xffd052['maxStocks']=_0x391756,_0xffd052[_0x2ac5a5(0x172)]=_0xdbfde2,_0xffd052['product_category']=_0x5e12ab;const _0x2d5be1=await _0xffd052[_0x2ac5a5(0x1cb)]();console[_0x2ac5a5(0x166)](_0x2ac5a5(0x1df),_0xffd052),_0x55625a['flash'](_0x2ac5a5(0x178),'product\x20update\x20successfully'),_0x299b3e['redirect'](_0x2ac5a5(0x1d1));}catch(_0x149511){console[_0x2ac5a5(0x166)](_0x149511);}}),router[a0_0x5cc024(0x1b4)]('/barcode/:id',auth,async(_0x2bfd6a,_0x1c0a84)=>{const _0x4cf0df=a0_0x5cc024;try{const {username:_0x2ad5d7,email:_0x2b1ed9,role:_0x24803e}=_0x2bfd6a[_0x4cf0df(0x193)],_0x42b5db=_0x2bfd6a['user'],_0x5e0700=await profile[_0x4cf0df(0x1c7)]({'email':_0x42b5db[_0x4cf0df(0x1bd)]}),_0x1cfb16=await master_shop[_0x4cf0df(0x151)]();console[_0x4cf0df(0x166)](_0x4cf0df(0x1b6),_0x1cfb16);const _0x5c888b=_0x2bfd6a[_0x4cf0df(0x1ad)]['id'],_0x273a1b=await product[_0x4cf0df(0x1f0)](_0x5c888b);console['log'](_0x4cf0df(0x15c),_0x273a1b);if(_0x1cfb16[0x0]['language']==_0x4cf0df(0x1f1))var _0x20fc1b=users[_0x4cf0df(0x1a0)];else{if(_0x1cfb16[0x0][_0x4cf0df(0x16b)]==_0x4cf0df(0x198))var _0x20fc1b=users[_0x4cf0df(0x198)];else{if(_0x1cfb16[0x0]['language']==_0x4cf0df(0x1a4))var _0x20fc1b=users[_0x4cf0df(0x1a4)];else{if(_0x1cfb16[0x0][_0x4cf0df(0x16b)]=='Spanish')var _0x20fc1b=users[_0x4cf0df(0x17f)];else{if(_0x1cfb16[0x0]['language']==_0x4cf0df(0x186))var _0x20fc1b=users['French'];else{if(_0x1cfb16[0x0][_0x4cf0df(0x16b)]=='Portuguese\x20(BR)')var _0x20fc1b=users['Portuguese'];else{if(_0x1cfb16[0x0]['language']==_0x4cf0df(0x18d))var _0x20fc1b=users[_0x4cf0df(0x18d)];else{if(_0x1cfb16[0x0][_0x4cf0df(0x16b)]==_0x4cf0df(0x1b9))var _0x20fc1b=users[_0x4cf0df(0x197)];}}}}}}}_0x1c0a84['render'](_0x4cf0df(0x1f5),{'success':_0x2bfd6a[_0x4cf0df(0x191)](_0x4cf0df(0x178)),'errors':_0x2bfd6a[_0x4cf0df(0x191)](_0x4cf0df(0x1bc)),'role':_0x42b5db,'profile':_0x5e0700,'alldata':_0x273a1b,'master_shop':_0x1cfb16,'language':_0x20fc1b});}catch(_0x5adbba){console['log'](_0x5adbba);}}),router[a0_0x5cc024(0x1b4)](a0_0x5cc024(0x203),auth,async(_0x4c7d12,_0x5261a1)=>{const _0x52b0f8=a0_0x5cc024;try{const _0x52ac2a=new excelJS[(_0x52b0f8(0x1e3))](),_0x4c91de=_0x52ac2a[_0x52b0f8(0x1d3)](_0x52b0f8(0x18f));return _0x4c91de['columns']=[{'header':_0x52b0f8(0x1ab),'key':_0x52b0f8(0x153),'width':0xa},{'header':_0x52b0f8(0x184),'key':_0x52b0f8(0x1fe),'width':0xa},{'header':'Units','key':_0x52b0f8(0x1fb),'width':0xa},{'header':'Secondary_Units','key':_0x52b0f8(0x1ef),'width':0xa},{'header':_0x52b0f8(0x16d),'key':_0x52b0f8(0x19d),'width':0xa},{'header':_0x52b0f8(0x19c),'key':_0x52b0f8(0x1cf),'width':0xa},{'header':_0x52b0f8(0x14a),'key':'ProductCode','width':0xa},{'header':_0x52b0f8(0x161),'key':_0x52b0f8(0x1cf),'width':0xa},{'header':_0x52b0f8(0x18c),'key':_0x52b0f8(0x1e4),'width':0xa},{'header':_0x52b0f8(0x1dc),'key':_0x52b0f8(0x1c8),'width':0xa},{'header':_0x52b0f8(0x1ee),'key':_0x52b0f8(0x1c8),'width':0xa},{'header':_0x52b0f8(0x1da),'key':_0x52b0f8(0x1c0),'width':0xa}],_0x5261a1['setHeader']('Content-Type',_0x52b0f8(0x1f7)),_0x5261a1[_0x52b0f8(0x1a3)](_0x52b0f8(0x1fc),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x52ac2a[_0x52b0f8(0x1eb)][_0x52b0f8(0x1bb)](_0x5261a1)['then'](()=>{const _0x5b300e=_0x52b0f8;_0x5261a1[_0x5b300e(0x163)](0xc8);});}catch(_0x21c708){_0x5261a1[_0x52b0f8(0x163)](0x190)[_0x52b0f8(0x15f)](_0x21c708);}});const storage1=multer['diskStorage']({'destination':(_0x517c04,_0x130f6d,_0x369a13)=>{_0x369a13(null,'public/Migration');},'filename':(_0x39762e,_0x228ffd,_0x406455)=>{const _0x3c2967=a0_0x5cc024;_0x406455(null,Date[_0x3c2967(0x1be)]()+_0x228ffd[_0x3c2967(0x199)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1ea),auth,uploadMigrate[a0_0x5cc024(0x149)](a0_0x5cc024(0x162)),async(_0xebf438,_0x398df1)=>{const _0x36f88b=a0_0x5cc024,_0x1f0f4b=_0xebf438['file'][_0x36f88b(0x1a7)],_0x442a12=await xlsx['readFile']('public/Migration/'+_0x1f0f4b);let _0x50ee10=_0x442a12[_0x36f88b(0x196)],_0x50c94f=xlsx['utils'][_0x36f88b(0x1d7)](_0x442a12[_0x36f88b(0x190)][_0x50ee10[0x0]]);for(const _0x5f461 of _0x50c94f){const _0x3a18e9=_0x5f461[_0x36f88b(0x1ab)],_0x34075c=_0x5f461[_0x36f88b(0x184)],_0x12c86a=_0x5f461[_0x36f88b(0x170)],_0x598956=_0x5f461[_0x36f88b(0x173)],_0x13e433=_0x5f461[_0x36f88b(0x161)],_0x4cf9ca=_0x5f461[_0x36f88b(0x18c)],_0x17b46d=_0x5f461[_0x36f88b(0x1dc)],_0x263653=_0x5f461[_0x36f88b(0x19c)],_0x2c53bc=_0x5f461['Secondary_Code'],_0x427500=_0x5f461[_0x36f88b(0x1ee)],_0x18b9bb=_0x5f461[_0x36f88b(0x16d)],_0x26afd0=_0x5f461[_0x36f88b(0x1da)];try{let _0x9fa247=await categories[_0x36f88b(0x1c7)]({'name':_0x4cf9ca});if(!_0x9fa247){const _0x369f09=new categories({'name':_0x4cf9ca,'products':'0'});_0x9fa247=await _0x369f09[_0x36f88b(0x1cb)]();}let _0x25a933=await brands[_0x36f88b(0x1c7)]({'name':_0x34075c});if(!_0x25a933){const _0x27af7d=new brands({'name':_0x34075c,'products':'0'});_0x25a933=await _0x27af7d['save']();}let _0xee7004=await units[_0x36f88b(0x1c7)]({'name':_0x12c86a,'secondary_unit':_0x598956});if(!_0xee7004){const _0x44d0be=new units({'name':_0x12c86a,'secondary_unit':_0x598956,'products':'0'});_0xee7004=await _0x44d0be['save']();}const _0x5c70ad=await product[_0x36f88b(0x151)]({'name':_0x3a18e9,'category':_0x9fa247[_0x36f88b(0x1e5)],'brand':_0x25a933['name'],'secondary_unit':_0xee7004[_0x36f88b(0x155)],'product_code':_0x13e433});console[_0x36f88b(0x166)](_0x5c70ad['length']+_0x36f88b(0x1aa)+_0x9fa247[_0x36f88b(0x1e5)]+_0x36f88b(0x1aa)+_0x25a933[_0x36f88b(0x1e5)]+_0x36f88b(0x1aa)+_0xee7004[_0x36f88b(0x155)]+_0x36f88b(0x1aa)+_0x13e433+_0x36f88b(0x1aa)+_0x3a18e9);if(_0x5c70ad[_0x36f88b(0x1a2)]===0x0){const _0x13356d=new product({'image':'defaultProduct.avif','name':_0x3a18e9,'category':_0x9fa247[_0x36f88b(0x1e5)],'brand':_0x25a933[_0x36f88b(0x1e5)],'unit':_0xee7004['name'],'alertquantity':_0x17b46d,'product_code':_0x13e433,'secondary_unit':_0xee7004['secondary_unit'],'primary_code':_0x263653,'secondary_code':_0x2c53bc,'maxStocks':_0x427500,'maxProdPerUnit':_0x18b9bb,'product_category':_0x26afd0}),_0x625899=await _0x13356d['save']();_0x9fa247[_0x36f88b(0x17e)]=parseInt(_0x9fa247[_0x36f88b(0x17e)])+0x1,await _0x9fa247[_0x36f88b(0x1cb)](),_0x25a933[_0x36f88b(0x17e)]=parseInt(_0x25a933[_0x36f88b(0x17e)])+0x1,await _0x25a933[_0x36f88b(0x1cb)](),_0xee7004['products']=parseInt(_0xee7004[_0x36f88b(0x17e)])+0x1,await _0xee7004[_0x36f88b(0x1cb)](),_0xebf438[_0x36f88b(0x191)](_0x36f88b(0x178),_0x3a18e9+_0x36f88b(0x1b8));}else{console['log'](_0x5c70ad[0x0]);const _0x5f190c=_0x5c70ad[0x0];_0x5f190c[_0x36f88b(0x15d)]=_0x9fa247[_0x36f88b(0x1e5)],_0x5f190c[_0x36f88b(0x1fa)]=_0x25a933[_0x36f88b(0x1e5)],_0x5f190c[_0x36f88b(0x164)]=_0xee7004['name'],_0x5f190c[_0x36f88b(0x1db)]=_0x17b46d,_0x5f190c[_0x36f88b(0x1af)]=_0x13e433,_0x5f190c['secondary_unit']=_0xee7004[_0x36f88b(0x155)],_0x5f190c[_0x36f88b(0x1d4)]=_0x263653,_0x5f190c['secondary_code']=_0x2c53bc,_0x5f190c[_0x36f88b(0x18b)]=_0x427500,_0x5f190c['maxProdPerUnit']=_0x18b9bb,_0x5f190c['product_category']=_0x26afd0;const _0xcfc336=await _0x5f190c[_0x36f88b(0x1cb)]();_0xebf438['flash'](_0x36f88b(0x178),_0xcfc336[_0x36f88b(0x1e5)]+_0x36f88b(0x1b7));}}catch(_0x27debb){_0x398df1['status'](0x1f4)['json']({'proderror':_0x27debb[_0x36f88b(0x1d5)],'aproduct':_0x3a18e9});}}_0x398df1['redirect'](_0x36f88b(0x1d1));}),router['post'](a0_0x5cc024(0x17a),auth,async(_0x114d24,_0x5b0039)=>{const _0x56b0b0=a0_0x5cc024;try{console[_0x56b0b0(0x166)](_0x114d24[_0x56b0b0(0x1ce)]);const {data_cateory:_0x3e9c53,datachoose:_0x5aed15}=_0x114d24[_0x56b0b0(0x1ce)];var _0x45f253;if(_0x5aed15=='prod_categ')_0x45f253=await product[_0x56b0b0(0x187)]([{'$group':{'_id':_0x56b0b0(0x204)}}]);else{if(_0x5aed15==_0x56b0b0(0x1d9))_0x45f253=await product[_0x56b0b0(0x187)]([{'$match':{'product_category':_0x3e9c53}},{'$group':{'_id':'$brand'}}]);else _0x5aed15==_0x56b0b0(0x1a9)&&(_0x45f253=await product[_0x56b0b0(0x187)]([{'$match':{'product_category':_0x3e9c53}},{'$group':{'_id':_0x56b0b0(0x1a8)}}]));}_0x5b0039[_0x56b0b0(0x154)](_0x45f253);}catch(_0x3ff438){_0x5b0039[_0x56b0b0(0x154)]({'message':_0x3ff438['message']});}}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1bf),auth,async(_0x45ae78,_0x2a8e0f)=>{const _0x1e0d19=a0_0x5cc024;try{const {data_choosing:_0x4f33b1,data_selected:_0x2935f9}=_0x45ae78[_0x1e0d19(0x1ce)];var _0x1ec7e4;if(_0x4f33b1=='prod_categ')_0x1ec7e4=await product['aggregate']([{'$match':{'product_category':_0x2935f9}}]);else{if(_0x4f33b1==_0x1e0d19(0x1d9))_0x1ec7e4=await product[_0x1e0d19(0x187)]([{'$match':{'brand':_0x2935f9}}]);else _0x4f33b1==_0x1e0d19(0x1a9)&&(_0x1ec7e4=await product[_0x1e0d19(0x187)]([{'$match':{'category':_0x2935f9}}]));}_0x2a8e0f[_0x1e0d19(0x154)](_0x1ec7e4);}catch(_0x17a1d1){_0x2a8e0f[_0x1e0d19(0x154)]({'message':_0x17a1d1['message']});}}),router[a0_0x5cc024(0x1b4)]('/print_barcode',auth,async(_0x4c2912,_0x6d8cec)=>{const _0x371858=a0_0x5cc024,_0x140194=_0x4c2912[_0x371858(0x193)],_0x4b67a1=await profile[_0x371858(0x1c7)]({'email':_0x140194[_0x371858(0x1bd)]}),_0x2854ab=await master_shop[_0x371858(0x151)](),_0x5130c8=await product[_0x371858(0x151)]();if(_0x2854ab[0x0][_0x371858(0x16b)]==_0x371858(0x1f1))var _0x5d1519=users[_0x371858(0x1a0)];else{if(_0x2854ab[0x0][_0x371858(0x16b)]=='Hindi')var _0x5d1519=users[_0x371858(0x198)];else{if(_0x2854ab[0x0][_0x371858(0x16b)]==_0x371858(0x1a4))var _0x5d1519=users[_0x371858(0x1a4)];else{if(_0x2854ab[0x0][_0x371858(0x16b)]==_0x371858(0x17f))var _0x5d1519=users[_0x371858(0x17f)];else{if(_0x2854ab[0x0]['language']==_0x371858(0x186))var _0x5d1519=users[_0x371858(0x186)];else{if(_0x2854ab[0x0]['language']==_0x371858(0x1cc))var _0x5d1519=users['Portuguese'];else{if(_0x2854ab[0x0]['language']==_0x371858(0x18d))var _0x5d1519=users[_0x371858(0x18d)];else{if(_0x2854ab[0x0][_0x371858(0x16b)]=='Arabic\x20(ae)')var _0x5d1519=users[_0x371858(0x197)];}}}}}}}_0x6d8cec[_0x371858(0x1d8)](_0x371858(0x18a),{'success':_0x4c2912[_0x371858(0x191)](_0x371858(0x178)),'errors':_0x4c2912[_0x371858(0x191)]('errors'),'role':_0x140194,'profile':_0x4b67a1,'products':_0x5130c8,'master_shop':_0x2854ab,'language':_0x5d1519});}),router[a0_0x5cc024(0x14d)](a0_0x5cc024(0x1c3),auth,async(_0x56bdd5,_0x18c797)=>{const _0x37867d=a0_0x5cc024,_0x32691c=await product['find']();_0x18c797[_0x37867d(0x154)]({'data':_0x32691c});}),router[a0_0x5cc024(0x14d)]('/barcode_filter',auth,async(_0x1dc943,_0x35c3f3)=>{const _0x363627=a0_0x5cc024;try{const {dataProdCat:_0x1eadbd,dataProdIdentity:_0x42d497}=_0x1dc943[_0x363627(0x1ce)];var _0x47de06;switch(_0x1eadbd){case'fg':switch(_0x42d497){case'Brands':_0x47de06=await product[_0x363627(0x187)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x363627(0x188)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x47de06=await product[_0x363627(0x187)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x363627(0x1a8)}},{'$project':{'category':_0x363627(0x179)}}]);break;}break;case'rm':switch(_0x42d497){case _0x363627(0x184):_0x47de06=await product[_0x363627(0x187)]([{'$match':{'product_category':_0x363627(0x1a1)}},{'$group':{'_id':_0x363627(0x188)}},{'$project':{'brand':_0x363627(0x179)}}]);break;case _0x363627(0x18c):_0x47de06=await product[_0x363627(0x187)]([{'$match':{'product_category':_0x363627(0x1a1)}},{'$group':{'_id':_0x363627(0x1a8)}},{'$project':{'category':_0x363627(0x179)}}]);break;}break;}_0x35c3f3[_0x363627(0x154)](_0x47de06);}catch(_0x4e00b1){_0x35c3f3['json']({'message':_0x4e00b1[_0x363627(0x1d5)]});}}),router[a0_0x5cc024(0x14d)]('/print_barcode_filter/',auth,async(_0xeef80d,_0x34aecd)=>{const _0x31bc81=a0_0x5cc024;try{console[_0x31bc81(0x166)](_0xeef80d[_0x31bc81(0x1ce)]);const {prod_cat:_0x684a8b,identity:_0x4ffd80,valueData:_0x11a593,typeofbarcode:_0x3928a}=_0xeef80d['body'];let _0x4f4827;switch(_0x684a8b){case'fg':if(_0x4ffd80==_0x31bc81(0x184))_0x4f4827=await product[_0x31bc81(0x187)]([{'$match':{'product_category':_0x31bc81(0x180),'brand':_0x11a593}}]);else _0x4ffd80==_0x31bc81(0x18c)&&(_0x4f4827=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','category':_0x11a593}}]));break;case'rm':if(_0x4ffd80==_0x31bc81(0x184))_0x4f4827=await product[_0x31bc81(0x187)]([{'$match':{'product_category':_0x31bc81(0x1a1),'brand':_0x11a593}}]);else _0x4ffd80=='Category'&&(_0x4f4827=await product[_0x31bc81(0x187)]([{'$match':{'product_category':_0x31bc81(0x1a1),'category':_0x11a593}}]));break;}const _0x5b5fc4=_0x33b88e=>_0x33b88e*0x48,_0xf3a9b9={'width':0x3,'height':0x1},_0x16346b=new PDFDocument({'margin':_0x5b5fc4(0.75),'size':[_0x5b5fc4(_0xf3a9b9['width']),_0x5b5fc4(_0xf3a9b9[_0x31bc81(0x1b3)])],'bufferPages':!![]}),_0x2cfd91=_0x4f4827[_0x31bc81(0x1a2)];for(let _0x227161=0x0;_0x227161<=_0x2cfd91;_0x227161++){if(_0x227161!=_0x2cfd91){const _0x5f61f7=_0x4f4827[_0x227161][_0x31bc81(0x1e5)],_0x3b1eff=_0x4f4827[_0x227161]['primary_code'],_0x153c00=_0x4f4827[_0x227161][_0x31bc81(0x182)],_0x14619b=_0x4f4827[_0x227161][_0x31bc81(0x1af)];var _0x277a96;switch(_0x3928a){case'1':_0x277a96=_0x3b1eff;break;case'2':_0x277a96=_0x153c00;break;case'3':_0x277a96=_0x14619b;break;}const _0x2a0b2e={'width':0xd2,'height':0x64},_0x10a699={'width':_0x5b5fc4(_0xf3a9b9[_0x31bc81(0x158)]),'height':_0x5b5fc4(_0xf3a9b9[_0x31bc81(0x1b3)])},_0x454180=new Canvas();JsBarcode(_0x454180,_0x277a96,{'format':'CODE128','height':_0x2a0b2e[_0x31bc81(0x1b3)],'displayValue':!![],'text':_0x277a96});const _0x284fde=_0x454180[_0x31bc81(0x168)](),_0x41ad5f=_0x10a699['width']/_0x2a0b2e[_0x31bc81(0x158)],_0x10f44d=_0x10a699[_0x31bc81(0x1b3)]/_0x2a0b2e[_0x31bc81(0x1b3)],_0x352f8e=Math[_0x31bc81(0x16a)](_0x41ad5f,_0x10f44d),_0x28f15e=_0x2a0b2e[_0x31bc81(0x158)]*_0x352f8e,_0x499635=_0x2a0b2e[_0x31bc81(0x1b3)]*_0x352f8e,_0x1ef906=(_0x10a699['width']-_0x28f15e)/0x2,_0x44bfa9=(_0x10a699[_0x31bc81(0x1b3)]-_0x499635)/0x2;_0x16346b[_0x31bc81(0x194)](_0x284fde,_0x1ef906,_0x44bfa9,{'width':_0x28f15e,'height':_0x499635}),_0x227161!=_0x2cfd91&&_0x16346b[_0x31bc81(0x1d6)]();}}const _0x2a64c1=[];_0x16346b['on'](_0x31bc81(0x1c4),_0x2a64c1[_0x31bc81(0x1ba)][_0x31bc81(0x1e9)](_0x2a64c1)),_0x16346b['on']('end',()=>{const _0xb0d64=_0x31bc81,_0x3d5d2=Buffer['concat'](_0x2a64c1),_0x5338ec=_0x3d5d2['toString']('base64');_0x34aecd[_0xb0d64(0x154)]({'pdfContent':_0x5338ec});}),_0x16346b['end']();}catch(_0x47395a){_0x34aecd[_0x31bc81(0x154)]({'message':_0x47395a[_0x31bc81(0x1d5)]});}}),router['post']('/print_barcode_filter_search/',auth,async(_0x1be279,_0x4fab60)=>{const _0x1d9a89=a0_0x5cc024;try{console['log'](_0x1be279[_0x1d9a89(0x1ce)]);const {prod_cat:_0xb21221,identity:_0x1f4b4e,valueData:_0x4bbf88}=_0x1be279[_0x1d9a89(0x1ce)];let _0x1eade6;switch(_0xb21221){case'fg':if(_0x1f4b4e==_0x1d9a89(0x184))_0x1eade6=await product[_0x1d9a89(0x187)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x4bbf88}}]);else _0x1f4b4e==_0x1d9a89(0x18c)&&(_0x1eade6=await product[_0x1d9a89(0x187)]([{'$match':{'product_category':_0x1d9a89(0x180),'category':_0x4bbf88}}]));break;case'rm':if(_0x1f4b4e==_0x1d9a89(0x184))_0x1eade6=await product[_0x1d9a89(0x187)]([{'$match':{'product_category':_0x1d9a89(0x1a1),'brand':_0x4bbf88}}]);else _0x1f4b4e==_0x1d9a89(0x18c)&&(_0x1eade6=await product['aggregate']([{'$match':{'product_category':_0x1d9a89(0x1a1),'category':_0x4bbf88}}]));break;}_0x4fab60[_0x1d9a89(0x154)]({'data':_0x1eade6});}catch(_0x3c4a4c){_0x4fab60[_0x1d9a89(0x154)]({'message':_0x3c4a4c[_0x1d9a89(0x1d5)]});}}),router['post'](a0_0x5cc024(0x1ff),auth,async(_0x462709,_0x1cac11)=>{const _0x4df6ad=a0_0x5cc024;try{const _0x565b56=_0x462709['params']['id'],{copies:_0x82357a,typeofbarcode:_0x3a4b27}=_0x462709[_0x4df6ad(0x1ce)];var _0x5a7c29=await product[_0x4df6ad(0x1f0)](_0x565b56);const _0x35feaa=_0x3118c6=>_0x3118c6*0x48,_0x1b9e59={'width':0x3,'height':0x1},_0x28a389=new PDFDocument({'margin':_0x35feaa(0.75),'size':[_0x35feaa(_0x1b9e59[_0x4df6ad(0x158)]),_0x35feaa(_0x1b9e59[_0x4df6ad(0x1b3)])],'bufferPages':!![]}),_0x3e33bd=_0x82357a,_0x430029=_0x5a7c29[_0x4df6ad(0x1e5)],_0x318292=_0x5a7c29['primary_code'],_0x3298ee=_0x5a7c29[_0x4df6ad(0x182)],_0xe58d15=_0x5a7c29['product_code'];let _0x3faef2;switch(_0x3a4b27){case'1':_0x3faef2=_0x318292;break;case'2':_0x3faef2=_0x3298ee;break;case'3':_0x3faef2=_0xe58d15;break;}const _0x43fe65={'width':0xd2,'height':0x64},_0x152904={'width':_0x35feaa(_0x1b9e59[_0x4df6ad(0x158)]),'height':_0x35feaa(_0x1b9e59[_0x4df6ad(0x1b3)])};for(let _0x461d1f=0x1;_0x461d1f<=_0x3e33bd;_0x461d1f++){const _0x3e3351=new Canvas();JsBarcode(_0x3e3351,_0x3faef2,{'format':_0x4df6ad(0x1ed),'height':_0x43fe65[_0x4df6ad(0x1b3)],'displayValue':!![],'text':_0x3faef2});const _0x4e927a=_0x3e3351[_0x4df6ad(0x168)](),_0xddb299=_0x152904[_0x4df6ad(0x158)]/_0x43fe65[_0x4df6ad(0x158)],_0x46df87=_0x152904['height']/_0x43fe65[_0x4df6ad(0x1b3)],_0x3a5858=Math[_0x4df6ad(0x16a)](_0xddb299,_0x46df87),_0x419d62=_0x43fe65[_0x4df6ad(0x158)]*_0x3a5858,_0x1d6458=_0x43fe65[_0x4df6ad(0x1b3)]*_0x3a5858,_0x49e605=(_0x152904[_0x4df6ad(0x158)]-_0x419d62)/0x2,_0x1701f1=(_0x152904['height']-_0x1d6458)/0x2;_0x28a389[_0x4df6ad(0x194)](_0x4e927a,_0x49e605,_0x1701f1,{'width':_0x419d62,'height':_0x1d6458}),_0x461d1f!=_0x3e33bd&&_0x28a389[_0x4df6ad(0x1d6)]();}const _0x4e4594=[];_0x28a389['on']('data',_0x4e4594[_0x4df6ad(0x1ba)]['bind'](_0x4e4594)),_0x28a389['on'](_0x4df6ad(0x207),()=>{const _0x30eaa4=_0x4df6ad,_0x49bc53=Buffer['concat'](_0x4e4594),_0x48c400=_0x49bc53[_0x30eaa4(0x1e2)](_0x30eaa4(0x1f2));_0x1cac11['json']({'pdfContent':_0x48c400});}),_0x28a389[_0x4df6ad(0x207)]();}catch(_0x40be9a){_0x1cac11[_0x4df6ad(0x154)]({'message':_0x40be9a[_0x4df6ad(0x1d5)]});}}),module[a0_0x5cc024(0x1b2)]=router;function a0_0x4f28(){const _0x5ce2c3=['/units','maxProdPerUnit','Secondary_Units','numeric','Enabled','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','express','success','$_id','/select_data','public/upload','897960UzHpDj','edit\x20Product\x20master','products','Spanish','Finished\x20Goods','multer','secondary_code','unit\x20data\x20update\x20successfully','Brands','Portuguese','French','aggregate','$brand','$product_details.product_name','product_barcode_products','maxStocks','Category','Chinese','/categories/delete/:id','Products','Sheets','flash','long','user','image','1987072WVLmJy','SheetNames','Arabic','Hindi','originalname','brand\x20data\x20delete\x20successfully','pdfkit-table','Primary_Code','MaxperUnits','product_docs','map','English','Raw\x20Materials','length','setHeader','German','../middleware/auth','sku','filename','$category','categ','\x20<>\x20','Product_Name','brand\x20data\x20update\x20successfully','params','unit\x20data\x20delete\x20successfully','product_code','Products\x20find_data','\x20brand\x20is\x20add\x20successfully','exports','height','get','/view/:id','barcode\x20Product\x20master','\x20Edit\x20Successfully','\x20added\x20successfully','Arabic\x20(ae)','push','write','errors','email','now','/filter_product','Prod_Cat','192wXnAln','/view/add_products','/barcode_data','data','/products/categories','file','findOne','PAlQty','175833AzcFeK','categories\x20data\x20delete\x20successfully','save','Portuguese\x20(BR)','/units/delete/:id','body','ProductCode','/products/brands','/products/view','exceljs','addWorksheet','primary_code','message','addPage','sheet_to_json','render','brands','Products_category','alertquantity','Alert_QTY','diskStorage','/units/:id','product\x20edit','96818iLOOqd','units','toString','Workbook','PCat','name','/categories','master','\x20categories\x20is\x20add\x20successfully','bind','/products_import_migrate_file','xlsx','77HfMOBZ','CODE128','Maximum_Stocks','PSecondaryUnits','findById','English\x20(US)','base64','Router','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_barcode','$product_name','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','express/lib/response','/categories/:id','brand','PUnits','Content-Disposition','findByIdAndUpdate','PBrands','/print_barcode_single/:id','$product_docs','Products\x20master','jsbarcode','/products_export_migrate_file','$product_category','../models/all_models','stock','end','215154kYjTUu','single','Secondary_Code','_id','2628420zhbTsQ','post','add_product','/brands/:id','findByIdAndDelete','find','redirect','PName','json','secondary_unit','/brands/delete/:id','$product_stock','width','product\x20add\x20successfully','/products/units','/view','barcode\x20user_id','category','114486RWAwNQ','send','/brands','Product_Code','migrate_product_fule','status','unit','defaultProduct.avif','log','categories','toBuffer','40dtZNdY','min','language','forEach','max_number_per_units','hello','../public/language/languages.json','Units'];a0_0x4f28=function(){return _0x5ce2c3;};return a0_0x4f28();}