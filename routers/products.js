const a0_0x11cb79=a0_0x2440;function a0_0x2440(_0x4dc71e,_0x2908e9){const _0x3cff2a=a0_0x3cff();return a0_0x2440=function(_0x2440df,_0x22d2c0){_0x2440df=_0x2440df-0x88;let _0x302e13=_0x3cff2a[_0x2440df];return _0x302e13;},a0_0x2440(_0x4dc71e,_0x2908e9);}(function(_0x4ba51c,_0x5e1a59){const _0xcbb21d=a0_0x2440,_0xf0b43e=_0x4ba51c();while(!![]){try{const _0x2ef30b=parseInt(_0xcbb21d(0xdc))/0x1*(-parseInt(_0xcbb21d(0x10d))/0x2)+-parseInt(_0xcbb21d(0x131))/0x3*(-parseInt(_0xcbb21d(0x105))/0x4)+parseInt(_0xcbb21d(0xc0))/0x5+-parseInt(_0xcbb21d(0x145))/0x6+parseInt(_0xcbb21d(0x107))/0x7+-parseInt(_0xcbb21d(0xdb))/0x8*(-parseInt(_0xcbb21d(0xcb))/0x9)+-parseInt(_0xcbb21d(0xa0))/0xa*(parseInt(_0xcbb21d(0x147))/0xb);if(_0x2ef30b===_0x5e1a59)break;else _0xf0b43e['push'](_0xf0b43e['shift']());}catch(_0x2757c8){_0xf0b43e['push'](_0xf0b43e['shift']());}}}(a0_0x3cff,0x84fb2));const express=require('express'),res=require(a0_0x11cb79(0xe2)),app=express(),router=express[a0_0x11cb79(0xef)](),multer=require(a0_0x11cb79(0x126)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x11cb79(0xfd)),users=require(a0_0x11cb79(0x10c)),excelJS=require(a0_0x11cb79(0xd4)),xlsx=require(a0_0x11cb79(0x11c)),JsBarcode=require(a0_0x11cb79(0x14b)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x11cb79(0xc4));function a0_0x3cff(){const _0x2de3fd=['/categories/:id','base64','CODE128','language','Products\x20find_data','Arabic\x20(ae)','Router','bind','edit\x20Product\x20master','errors','\x20Edit\x20Successfully','Sheets','categories\x20data\x20delete\x20successfully','params','Primary_Code','alertquantity','long','prod_categ','defaultProduct.avif','Portuguese','../middleware/auth','product_details.product_name','Hindi','Arabic','findOne','originalname','/filter_product','$product_details','674712fijRWO','\x20<>\x20','7242662KhiwNS','findByIdAndDelete','product_barcode_products','get','flash','../public/language/languages.json','22BHPJLe','category','message','Chinese','/units/delete/:id','secondary_unit','send','\x20unit\x20is\x20add\x20successfully','PCat','/print_barcode_filter/','render','sheet_to_json','redirect','_id','status','xlsx','$brand','Raw\x20Materials','numeric','secondary_code','/brands','log','Finished\x20Goods','Alert_QTY','/units','multer','addPage','PName','utils','migrate_product_fule','diskStorage','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Units','Products','/print_barcode_single/:id','now','18fzozru','product_barcode','Spanish','barcode\x20Product\x20master','post','width','edit_product','$secondary_unit','MaxperUnits','/units/:id','primary_code','body','single','/products/categories','$product_details.product_stock','unit','Workbook','Products\x20warehouse_data','file','max_number_per_units','4354422LNeevU','sku','1609113GjInPc','unit\x20data\x20delete\x20successfully','Enabled','$_id','jsbarcode','min','toBuffer','warehouse','units','forEach','product\x20add\x20successfully','$product_docs','brand\x20data\x20update\x20successfully','json','readFile','user','add_product','PUnits','\x20brand\x20is\x20add\x20successfully','categories','Product_Code','Portuguese\x20(BR)','categories_edit','height','product_docs','Content-Disposition','product\x20update\x20successfully','product_stock','Secondary_Units','100bUkTzF','find','/products/units','brands','/view/add_products','name','setHeader','success','toString','categ','findById','/brands/:id','save','end','/barcode_filter','push','then','products','concat','product_code','maxStocks','German','/products/view','length','hello','English\x20(US)','maxProdPerUnit','image','master','stock','/products_export_migrate_file','write','2326500ZavSvA','/categories','Prod_Cat','/select_data','pdfkit-table','Brands','Category','public/Migration/','findByIdAndUpdate','Product_Name','\x20added\x20successfully','18wuXljd','unit\x20data\x20update\x20successfully','Content-Type','aggregate','Products_category','/products_import_migrate_file','brand\x20data\x20delete\x20successfully','/categories/delete/:id','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','exceljs','data','Maximum_Stocks','/products/brands','Secondary_Code','French','product\x20edit','2666320zytTyS','40487TrLgjC','email','filename','ProductCode','/print_barcode_filter_search/','$product_stock','express/lib/response','$product_name','/barcode_data','$category','English','product_category','/view/:id'];a0_0x3cff=function(){return _0x2de3fd;};return a0_0x3cff();}router[a0_0x11cb79(0x10a)]('/categories',auth,async(_0x436181,_0x4f7681)=>{const _0x180a00=a0_0x11cb79;try{const {username:_0x216e80,email:_0x26c5f4,role:_0x568f63}=_0x436181['user'],_0x1e3a91=_0x436181['user'],_0x4a8147=await profile[_0x180a00(0x101)]({'email':_0x1e3a91[_0x180a00(0xdd)]}),_0x57949c=await master_shop[_0x180a00(0xa1)]();console[_0x180a00(0x122)]('master',_0x57949c);const _0x5d45ed=await categories[_0x180a00(0xa1)]();if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0xb9))var _0x31c912=users[_0x180a00(0xe6)];else{if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0xff))var _0x31c912=users[_0x180a00(0xff)];else{if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0xb5))var _0x31c912=users[_0x180a00(0xb5)];else{if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0x133))var _0x31c912=users[_0x180a00(0x133)];else{if(_0x57949c[0x0][_0x180a00(0xec)]=='French')var _0x31c912=users['French'];else{if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0x98))var _0x31c912=users[_0x180a00(0xfc)];else{if(_0x57949c[0x0][_0x180a00(0xec)]==_0x180a00(0x110))var _0x31c912=users[_0x180a00(0x110)];else{if(_0x57949c[0x0][_0x180a00(0xec)]=='Arabic\x20(ae)')var _0x31c912=users[_0x180a00(0x100)];}}}}}}}_0x4f7681['render'](_0x180a00(0x96),{'success':_0x436181[_0x180a00(0x10b)](_0x180a00(0xa7)),'errors':_0x436181['flash']('errors'),'role':_0x1e3a91,'profile':_0x4a8147,'user':_0x5d45ed,'master_shop':_0x57949c,'language':_0x31c912});}catch(_0x2dc391){console[_0x180a00(0x122)](_0x2dc391);}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xc1),auth,async(_0x22f902,_0x2fbb9f)=>{const _0x5ba754=a0_0x11cb79;try{const {name:_0x175e0d,products:_0x140800}=_0x22f902[_0x5ba754(0x13c)],_0x4676d9=new categories({'name':_0x175e0d,'products':_0x140800}),_0x2020c5=await categories[_0x5ba754(0x101)]({'name':_0x175e0d});_0x2020c5?_0x22f902[_0x5ba754(0x10b)](_0x5ba754(0xf2),_0x175e0d+_0x5ba754(0x12c)):_0x22f902[_0x5ba754(0x10b)]('success',_0x175e0d+'\x20categories\x20is\x20add\x20successfully');const _0x370c1e=await _0x4676d9[_0x5ba754(0xac)]();_0x2fbb9f[_0x5ba754(0x119)](_0x5ba754(0x13e));}catch(_0x46933a){console[_0x5ba754(0x122)](_0x46933a);}}),router[a0_0x11cb79(0x10a)]('/categories/:id',auth,async(_0x52e1ef,_0x2449f4)=>{const _0x34505e=a0_0x11cb79;try{const {username:_0x4ec3dc,email:_0x57fafc,role:_0x46c514}=_0x52e1ef[_0x34505e(0x92)],_0x5a9681=_0x52e1ef[_0x34505e(0x92)],_0x3fc167=await profile[_0x34505e(0x101)]({'email':_0x5a9681[_0x34505e(0xdd)]}),_0x3c5371=await master_shop[_0x34505e(0xa1)]();console[_0x34505e(0x122)](_0x34505e(0xbc),_0x3c5371);const _0x127ae4=_0x52e1ef[_0x34505e(0xf6)]['id'];console[_0x34505e(0x122)](_0x127ae4);const _0x22a291=await categories[_0x34505e(0xaa)](_0x127ae4);if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0xb9))var _0x20be8e=users['English'];else{if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0xff))var _0x20be8e=users[_0x34505e(0xff)];else{if(_0x3c5371[0x0][_0x34505e(0xec)]=='German')var _0x20be8e=users[_0x34505e(0xb5)];else{if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0x133))var _0x20be8e=users[_0x34505e(0x133)];else{if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0xd9))var _0x20be8e=users[_0x34505e(0xd9)];else{if(_0x3c5371[0x0][_0x34505e(0xec)]=='Portuguese\x20(BR)')var _0x20be8e=users['Portuguese'];else{if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0x110))var _0x20be8e=users[_0x34505e(0x110)];else{if(_0x3c5371[0x0][_0x34505e(0xec)]==_0x34505e(0xee))var _0x20be8e=users[_0x34505e(0x100)];}}}}}}}_0x2449f4['render']('categories',{'success':_0x52e1ef['flash'](_0x34505e(0xa7)),'errors':_0x52e1ef[_0x34505e(0x10b)](_0x34505e(0xf2)),'role':_0x5a9681,'profile':_0x3fc167,'master_shop':_0x3c5371,'user':_0x22a291,'language':_0x20be8e});}catch(_0x1af4e5){console[_0x34505e(0x122)](_0x1af4e5);}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xe9),auth,async(_0x2d69b3,_0x2aa5d4)=>{const _0x42fd11=a0_0x11cb79;try{const _0x4640d5=_0x2d69b3['params']['id'],_0x311feb=await categories[_0x42fd11(0xc8)](_0x4640d5,_0x2d69b3['body']);_0x2d69b3['flash'](_0x42fd11(0xa7),''+users[_0x42fd11(0x99)]),_0x2aa5d4['redirect'](_0x42fd11(0x13e));}catch(_0x31d824){console[_0x42fd11(0x122)](_0x31d824);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0xd2),auth,async(_0x4f45d6,_0x5becad)=>{const _0x33dac2=a0_0x11cb79;try{const _0x3c454d=_0x4f45d6[_0x33dac2(0xf6)]['id'],_0x11271d=await categories[_0x33dac2(0x108)](_0x3c454d);_0x4f45d6['flash'](_0x33dac2(0xa7),_0x33dac2(0xf5)),_0x5becad['redirect']('/products/categories');}catch(_0x336695){console[_0x33dac2(0x122)](_0x336695);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0x121),auth,async(_0x3e90dc,_0x3bbe2a)=>{const _0x5834cb=a0_0x11cb79;try{const {username:_0x3c1b3e,email:_0x495262,role:_0xa24e7b}=_0x3e90dc[_0x5834cb(0x92)],_0x3f07e9=_0x3e90dc[_0x5834cb(0x92)],_0x1640c2=await profile[_0x5834cb(0x101)]({'email':_0x3f07e9[_0x5834cb(0xdd)]}),_0x269b86=await master_shop['find']();console[_0x5834cb(0x122)](_0x5834cb(0xbc),_0x269b86);const _0x1c1db9=await brands[_0x5834cb(0xa1)]();if(_0x269b86[0x0][_0x5834cb(0xec)]==_0x5834cb(0xb9))var _0x5b92da=users[_0x5834cb(0xe6)];else{if(_0x269b86[0x0]['language']==_0x5834cb(0xff))var _0x5b92da=users['Hindi'];else{if(_0x269b86[0x0]['language']=='German')var _0x5b92da=users[_0x5834cb(0xb5)];else{if(_0x269b86[0x0]['language']==_0x5834cb(0x133))var _0x5b92da=users[_0x5834cb(0x133)];else{if(_0x269b86[0x0][_0x5834cb(0xec)]==_0x5834cb(0xd9))var _0x5b92da=users[_0x5834cb(0xd9)];else{if(_0x269b86[0x0][_0x5834cb(0xec)]==_0x5834cb(0x98))var _0x5b92da=users['Portuguese'];else{if(_0x269b86[0x0][_0x5834cb(0xec)]==_0x5834cb(0x110))var _0x5b92da=users[_0x5834cb(0x110)];else{if(_0x269b86[0x0]['language']==_0x5834cb(0xee))var _0x5b92da=users[_0x5834cb(0x100)];}}}}}}}_0x3bbe2a[_0x5834cb(0x117)](_0x5834cb(0xa3),{'success':_0x3e90dc['flash']('success'),'errors':_0x3e90dc[_0x5834cb(0x10b)](_0x5834cb(0xf2)),'role':_0x3f07e9,'profile':_0x1640c2,'master_shop':_0x269b86,'user':_0x1c1db9,'language':_0x5b92da});}catch(_0x13d8fc){console[_0x5834cb(0x122)](_0x13d8fc);}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0x121),auth,async(_0x317d87,_0x56672f)=>{const _0x4ec66e=a0_0x11cb79;try{const {name:_0x54400a,products:_0x3a73ea}=_0x317d87['body'],_0x3bc9a3=new brands({'name':_0x54400a,'products':_0x3a73ea}),_0x1bf105=await brands['findOne']({'name':_0x54400a});_0x1bf105?_0x317d87[_0x4ec66e(0x10b)]('errors',_0x54400a+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x317d87['flash'](_0x4ec66e(0xa7),_0x54400a+_0x4ec66e(0x95));const _0x40441b=await _0x3bc9a3[_0x4ec66e(0xac)]();_0x56672f[_0x4ec66e(0x119)](_0x4ec66e(0xd7));}catch(_0x18d6a2){console['log'](_0x18d6a2);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0xab),auth,async(_0x56fcb1,_0xb48313)=>{const _0x25b2fc=a0_0x11cb79;try{const {username:_0x5a07ab,email:_0x4b8cbf,role:_0x31e955}=_0x56fcb1['user'],_0x108bd9=_0x56fcb1[_0x25b2fc(0x92)],_0x529abf=await profile[_0x25b2fc(0x101)]({'email':_0x108bd9[_0x25b2fc(0xdd)]}),_0x2e900e=await master_shop[_0x25b2fc(0xa1)]();console['log'](_0x25b2fc(0xbc),_0x2e900e);const _0x2d2b3f=_0x56fcb1[_0x25b2fc(0xf6)]['id'];console[_0x25b2fc(0x122)](_0x2d2b3f);const _0x385ed1=await brands[_0x25b2fc(0xaa)](_0x2d2b3f);if(_0x2e900e[0x0][_0x25b2fc(0xec)]=='English\x20(US)')var _0x592463=users[_0x25b2fc(0xe6)];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]=='Hindi')var _0x592463=users[_0x25b2fc(0xff)];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]==_0x25b2fc(0xb5))var _0x592463=users[_0x25b2fc(0xb5)];else{if(_0x2e900e[0x0]['language']==_0x25b2fc(0x133))var _0x592463=users[_0x25b2fc(0x133)];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]==_0x25b2fc(0xd9))var _0x592463=users[_0x25b2fc(0xd9)];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]==_0x25b2fc(0x98))var _0x592463=users['Portuguese'];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]=='Chinese')var _0x592463=users[_0x25b2fc(0x110)];else{if(_0x2e900e[0x0][_0x25b2fc(0xec)]==_0x25b2fc(0xee))var _0x592463=users[_0x25b2fc(0x100)];}}}}}}}_0xb48313[_0x25b2fc(0x117)](_0x25b2fc(0xa3),{'success':_0x56fcb1['flash'](_0x25b2fc(0xa7)),'errors':_0x56fcb1[_0x25b2fc(0x10b)](_0x25b2fc(0xf2)),'role':_0x108bd9,'profile':_0x529abf,'master_shop':_0x2e900e,'user':_0x385ed1,'language':_0x592463});}catch(_0x45fe93){console['log'](_0x45fe93);}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xab),auth,async(_0x3558f8,_0x159e7f)=>{const _0x24d357=a0_0x11cb79;try{const _0xcdf6fb=_0x3558f8[_0x24d357(0xf6)]['id'],_0x5f2b03=await brands['findByIdAndUpdate'](_0xcdf6fb,_0x3558f8[_0x24d357(0x13c)]);_0x3558f8['flash']('success',_0x24d357(0x8f)),_0x159e7f[_0x24d357(0x119)](_0x24d357(0xd7));}catch(_0x3fe5be){console[_0x24d357(0x122)](_0x3fe5be);}}),router[a0_0x11cb79(0x10a)]('/brands/delete/:id',auth,async(_0x505618,_0x2c69fe)=>{const _0xd10746=a0_0x11cb79;try{const _0x34746a=_0x505618[_0xd10746(0xf6)]['id'],_0x702cd6=await brands[_0xd10746(0x108)](_0x34746a);_0x505618[_0xd10746(0x10b)]('success',_0xd10746(0xd1)),_0x2c69fe[_0xd10746(0x119)]('/products/brands');}catch(_0x4f5e49){console[_0xd10746(0x122)](_0x4f5e49);}}),router['get'](a0_0x11cb79(0x125),auth,async(_0x2c57c7,_0x388f85)=>{const _0x298021=a0_0x11cb79;try{const {username:_0x4acd83,email:_0x56620d,role:_0x11f4f2}=_0x2c57c7[_0x298021(0x92)],_0x44ab4c=_0x2c57c7[_0x298021(0x92)],_0x2d26a6=await profile[_0x298021(0x101)]({'email':_0x44ab4c[_0x298021(0xdd)]}),_0x45c29b=await master_shop[_0x298021(0xa1)]();console[_0x298021(0x122)](_0x298021(0xbc),_0x45c29b);const _0x4f6cc7=await units[_0x298021(0xa1)]();if(_0x45c29b[0x0][_0x298021(0xec)]==_0x298021(0xb9))var _0x56b02b=users[_0x298021(0xe6)];else{if(_0x45c29b[0x0][_0x298021(0xec)]==_0x298021(0xff))var _0x56b02b=users['Hindi'];else{if(_0x45c29b[0x0]['language']=='German')var _0x56b02b=users['German'];else{if(_0x45c29b[0x0]['language']=='Spanish')var _0x56b02b=users[_0x298021(0x133)];else{if(_0x45c29b[0x0]['language']==_0x298021(0xd9))var _0x56b02b=users[_0x298021(0xd9)];else{if(_0x45c29b[0x0][_0x298021(0xec)]==_0x298021(0x98))var _0x56b02b=users[_0x298021(0xfc)];else{if(_0x45c29b[0x0]['language']==_0x298021(0x110))var _0x56b02b=users[_0x298021(0x110)];else{if(_0x45c29b[0x0][_0x298021(0xec)]==_0x298021(0xee))var _0x56b02b=users[_0x298021(0x100)];}}}}}}}_0x388f85[_0x298021(0x117)](_0x298021(0x8b),{'success':_0x2c57c7[_0x298021(0x10b)](_0x298021(0xa7)),'errors':_0x2c57c7[_0x298021(0x10b)](_0x298021(0xf2)),'role':_0x44ab4c,'profile':_0x2d26a6,'master_shop':_0x45c29b,'user':_0x4f6cc7,'language':_0x56b02b});}catch(_0x205010){console[_0x298021(0x122)](_0x205010);}}),router[a0_0x11cb79(0x135)]('/units',auth,async(_0x2c951e,_0x31b5a5)=>{const _0x327427=a0_0x11cb79;try{const {name:_0x421dee,secondary_unit:_0x4d781f,products:_0x194bf9}=_0x2c951e['body'],_0x5c3525=new units({'name':_0x421dee,'secondary_unit':_0x4d781f,'products':_0x194bf9}),_0x11cdf3=await units[_0x327427(0x101)]({'name':_0x421dee});_0x11cdf3?_0x2c951e[_0x327427(0x10b)](_0x327427(0xf2),_0x421dee+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x2c951e[_0x327427(0x10b)](_0x327427(0xa7),_0x421dee+_0x327427(0x114));const _0x11383a=await _0x5c3525[_0x327427(0xac)]();_0x31b5a5[_0x327427(0x119)](_0x327427(0xa2));}catch(_0x332e30){console['log'](_0x332e30);}}),router['get'](a0_0x11cb79(0x13a),auth,async(_0x3e9d47,_0xe44a62)=>{const _0x4dc1b6=a0_0x11cb79;try{const {username:_0x2790bd,email:_0x2dbb40,role:_0x11b36e}=_0x3e9d47[_0x4dc1b6(0x92)],_0x22b203=_0x3e9d47['user'],_0x470ab5=await profile[_0x4dc1b6(0x101)]({'email':_0x22b203['email']}),_0x3366e0=await master_shop[_0x4dc1b6(0xa1)]();console['log'](_0x4dc1b6(0xbc),_0x3366e0);const _0x4089ca=_0x3e9d47[_0x4dc1b6(0xf6)]['id'],_0x1de2ff=await units[_0x4dc1b6(0xaa)](_0x4089ca);if(_0x3366e0[0x0]['language']==_0x4dc1b6(0xb9))var _0x55c9cb=users[_0x4dc1b6(0xe6)];else{if(_0x3366e0[0x0]['language']==_0x4dc1b6(0xff))var _0x55c9cb=users[_0x4dc1b6(0xff)];else{if(_0x3366e0[0x0]['language']=='German')var _0x55c9cb=users[_0x4dc1b6(0xb5)];else{if(_0x3366e0[0x0][_0x4dc1b6(0xec)]==_0x4dc1b6(0x133))var _0x55c9cb=users[_0x4dc1b6(0x133)];else{if(_0x3366e0[0x0]['language']==_0x4dc1b6(0xd9))var _0x55c9cb=users[_0x4dc1b6(0xd9)];else{if(_0x3366e0[0x0][_0x4dc1b6(0xec)]==_0x4dc1b6(0x98))var _0x55c9cb=users[_0x4dc1b6(0xfc)];else{if(_0x3366e0[0x0][_0x4dc1b6(0xec)]==_0x4dc1b6(0x110))var _0x55c9cb=users[_0x4dc1b6(0x110)];else{if(_0x3366e0[0x0]['language']==_0x4dc1b6(0xee))var _0x55c9cb=users['Arabic'];}}}}}}}_0xe44a62[_0x4dc1b6(0x117)]('units',{'success':_0x3e9d47[_0x4dc1b6(0x10b)](_0x4dc1b6(0xa7)),'errors':_0x3e9d47[_0x4dc1b6(0x10b)]('errors'),'role':_0x22b203,'profile':_0x470ab5,'master_shop':_0x3366e0,'user':_0x1de2ff,'language':_0x55c9cb});}catch(_0x2e2ee5){console['log'](_0x2e2ee5);}}),router[a0_0x11cb79(0x135)]('/units/:id',auth,async(_0x55b107,_0x279add)=>{const _0x138abc=a0_0x11cb79;try{const _0xe09c35=_0x55b107['params']['id'],_0x40b8fd=await units[_0x138abc(0xc8)](_0xe09c35,_0x55b107[_0x138abc(0x13c)]);_0x55b107[_0x138abc(0x10b)](_0x138abc(0xa7),_0x138abc(0xcc)),_0x279add[_0x138abc(0x119)](_0x138abc(0xa2));}catch(_0x321c27){console[_0x138abc(0x122)](_0x321c27);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0x111),auth,async(_0x1c9e40,_0x2cdbef)=>{const _0x3427d2=a0_0x11cb79;try{const _0x45ff86=_0x1c9e40[_0x3427d2(0xf6)]['id'],_0x874f58=await units['findByIdAndDelete'](_0x45ff86);_0x1c9e40[_0x3427d2(0x10b)](_0x3427d2(0xa7),_0x3427d2(0x148)),_0x2cdbef['redirect'](_0x3427d2(0xa2));}catch(_0x2a75f2){console[_0x3427d2(0x122)](_0x2a75f2);}});const storage=multer[a0_0x11cb79(0x12b)]({'destination':(_0x2d520a,_0x12af82,_0x1f6345)=>{_0x1f6345(null,'public/upload');},'filename':(_0x5bef17,_0x4a2fd5,_0x5c0e3b)=>{const _0x2fc480=a0_0x11cb79;_0x5c0e3b(null,Date['now']()+_0x4a2fd5[_0x2fc480(0x102)]);}}),upload=multer({'storage':storage});router[a0_0x11cb79(0x10a)]('/view',auth,async(_0xe2687e,_0x7fc63d)=>{const _0x46fc89=a0_0x11cb79;try{const {username:_0x35c715,email:_0x557487,role:_0x6392db}=_0xe2687e[_0x46fc89(0x92)],_0x2b05c6=_0xe2687e['user'],_0x2f29b8=await profile['findOne']({'email':_0x2b05c6[_0x46fc89(0xdd)]}),_0x26a5c1={'year':_0x46fc89(0x11f),'month':_0x46fc89(0xf9),'day':_0x46fc89(0x11f)},_0x57f8a4=await master_shop[_0x46fc89(0xa1)]();console['log']('Products\x20master',_0x57f8a4);const _0x1e163c=await product[_0x46fc89(0xa1)]();console[_0x46fc89(0x122)]('Products\x20find_data',_0x1e163c);const _0xd5838b=await warehouse[_0x46fc89(0xce)]([{'$unwind':_0x46fc89(0x104)},{'$lookup':{'from':_0x46fc89(0xb1),'localField':_0x46fc89(0xfe),'foreignField':_0x46fc89(0xa5),'as':_0x46fc89(0x9b)}},{'$unwind':_0x46fc89(0x8e)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x46fc89(0x13f)}},{'$group':{'_id':_0x46fc89(0xe3),'product_stock':{'$sum':_0x46fc89(0xe1)}}}]);console[_0x46fc89(0x122)](_0x46fc89(0x142),_0xd5838b),_0xd5838b[_0x46fc89(0x8c)](_0x280548=>{const _0x44ead5=_0x1e163c['map'](_0x476530=>{const _0x6e34af=a0_0x2440;_0x476530[_0x6e34af(0xa5)]==_0x280548[_0x6e34af(0x11a)]&&(_0x476530['stock']=parseInt(_0x476530[_0x6e34af(0xbd)])+parseInt(_0x280548[_0x6e34af(0x9e)]));});}),console['log'](_0x46fc89(0xed),_0x1e163c);if(_0x57f8a4[0x0][_0x46fc89(0xec)]==_0x46fc89(0xb9))var _0x2d274f=users[_0x46fc89(0xe6)];else{if(_0x57f8a4[0x0]['language']==_0x46fc89(0xff))var _0x2d274f=users[_0x46fc89(0xff)];else{if(_0x57f8a4[0x0]['language']=='German')var _0x2d274f=users['German'];else{if(_0x57f8a4[0x0]['language']==_0x46fc89(0x133))var _0x2d274f=users[_0x46fc89(0x133)];else{if(_0x57f8a4[0x0][_0x46fc89(0xec)]==_0x46fc89(0xd9))var _0x2d274f=users[_0x46fc89(0xd9)];else{if(_0x57f8a4[0x0][_0x46fc89(0xec)]==_0x46fc89(0x98))var _0x2d274f=users['Portuguese'];else{if(_0x57f8a4[0x0][_0x46fc89(0xec)]==_0x46fc89(0x110))var _0x2d274f=users[_0x46fc89(0x110)];else{if(_0x57f8a4[0x0]['language']==_0x46fc89(0xee))var _0x2d274f=users[_0x46fc89(0x100)];}}}}}}}_0x7fc63d['render'](_0x46fc89(0xb1),{'success':_0xe2687e[_0x46fc89(0x10b)](_0x46fc89(0xa7)),'errors':_0xe2687e['flash']('errors'),'alldata':_0x1e163c,'profile':_0x2f29b8,'master_shop':_0x57f8a4,'role':_0x2b05c6,'product_stock':_0xd5838b,'language':_0x2d274f});}catch(_0x228dc8){console['log'](_0x228dc8);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0xa4),auth,async(_0x1e115d,_0x325e2e)=>{const _0x492627=a0_0x11cb79;try{const {username:_0x3eefd3,email:_0x3b0fdd,role:_0x4fad31}=_0x1e115d[_0x492627(0x92)],_0x68978d=_0x1e115d[_0x492627(0x92)],_0x23d23c=await profile['findOne']({'email':_0x68978d[_0x492627(0xdd)]}),_0x3ee8a5=await master_shop[_0x492627(0xa1)]();console[_0x492627(0x122)]('master',_0x3ee8a5);const _0x2e33c1=await categories[_0x492627(0xa1)]({}),_0x1b97b2=await brands[_0x492627(0xa1)]({}),_0x549c37=await units['find']({}),_0x55b0e2=await warehouse[_0x492627(0xa1)]({'status':'Enabled'});if(_0x3ee8a5[0x0][_0x492627(0xec)]=='English\x20(US)')var _0x34d0dd=users[_0x492627(0xe6)];else{if(_0x3ee8a5[0x0][_0x492627(0xec)]=='Hindi')var _0x34d0dd=users[_0x492627(0xff)];else{if(_0x3ee8a5[0x0][_0x492627(0xec)]=='German')var _0x34d0dd=users[_0x492627(0xb5)];else{if(_0x3ee8a5[0x0]['language']==_0x492627(0x133))var _0x34d0dd=users[_0x492627(0x133)];else{if(_0x3ee8a5[0x0]['language']=='French')var _0x34d0dd=users[_0x492627(0xd9)];else{if(_0x3ee8a5[0x0][_0x492627(0xec)]==_0x492627(0x98))var _0x34d0dd=users[_0x492627(0xfc)];else{if(_0x3ee8a5[0x0][_0x492627(0xec)]==_0x492627(0x110))var _0x34d0dd=users['Chinese'];else{if(_0x3ee8a5[0x0]['language']==_0x492627(0xee))var _0x34d0dd=users['Arabic'];}}}}}}}_0x325e2e[_0x492627(0x117)](_0x492627(0x93),{'success':_0x1e115d['flash'](_0x492627(0xa7)),'errors':_0x1e115d[_0x492627(0x10b)](_0x492627(0xf2)),'role':_0x68978d,'profile':_0x23d23c,'categories':_0x2e33c1,'brands':_0x1b97b2,'master_shop':_0x3ee8a5,'units':_0x549c37,'language':_0x34d0dd,'find_data':_0x55b0e2});}catch(_0x58eda5){console[_0x492627(0x122)](_0x58eda5);}}),router[a0_0x11cb79(0x135)]('/view/add_products',auth,upload[a0_0x11cb79(0x13d)](a0_0x11cb79(0xbb)),async(_0x277f40,_0x2cf950)=>{const _0x4454b6=a0_0x11cb79;try{const {name:_0x8497a,category:_0x1b88d0,brand:_0x3a244a,unit:_0x56dfa1,alertquantity:_0x1c9891,stock:_0x874131,product_code:_0x4f0665,warehouse:_0x22f5c2,primary_ItemCode:_0x1c587d,second_ItemCode:_0x356127,second_unit:_0x312779,maxPerUnit:_0xe429d0,MaxPerProduct:_0x162bbb}=_0x277f40['body'],_0x16dbb7=_0x277f40[_0x4454b6(0x143)]?.['filename']||_0x4454b6(0xfb),_0x1b9433=new product({'image':_0x16dbb7,'name':_0x8497a,'category':_0x1b88d0,'brand':_0x3a244a,'unit':_0x56dfa1,'alertquantity':_0x1c9891,'stock':_0x874131,'product_code':_0x4f0665,'warehouse':_0x22f5c2,'primary_code':_0x1c587d,'secondary_code':_0x356127,'second_unit':_0x312779,'maxStocks':_0x162bbb,'maxProdPerUnit':_0xe429d0}),_0xb7b28b=await _0x1b9433[_0x4454b6(0xac)](),_0x3181cd=await categories[_0x4454b6(0x101)]({'name':_0x1b88d0});_0x3181cd[_0x4454b6(0xb1)]=parseInt(_0x3181cd['products'])+0x1,await _0x3181cd[_0x4454b6(0xac)]();const _0x896ae8=await brands[_0x4454b6(0x101)]({'name':_0x3a244a});_0x896ae8[_0x4454b6(0xb1)]=parseInt(_0x896ae8['products'])+0x1,await _0x896ae8['save']();const _0x526fab=await units['findOne']({'name':_0x56dfa1});_0x526fab[_0x4454b6(0xb1)]=parseInt(_0x526fab[_0x4454b6(0xb1)])+0x1,await _0x526fab['save'](),_0x277f40[_0x4454b6(0x10b)](_0x4454b6(0xa7),_0x4454b6(0x8d)),_0x2cf950[_0x4454b6(0x119)](_0x4454b6(0xb6));}catch(_0x23bd40){console['log'](_0x23bd40);}}),router['get'](a0_0x11cb79(0xe8),auth,async(_0x395e1a,_0x4e0189)=>{const _0x151b2e=a0_0x11cb79;try{const {username:_0x25834c,email:_0x5dda0f,role:_0x11a72a}=_0x395e1a[_0x151b2e(0x92)],_0x3c1a80=_0x395e1a[_0x151b2e(0x92)],_0x52b3a4=await profile[_0x151b2e(0x101)]({'email':_0x3c1a80[_0x151b2e(0xdd)]}),_0x31f2e1=await master_shop[_0x151b2e(0xa1)]();console['log'](_0x151b2e(0xf1),_0x31f2e1);const _0x4d1153=_0x395e1a['params']['id'],_0x2ea517=await product[_0x151b2e(0xaa)](_0x4d1153),_0xfce1f5=await categories[_0x151b2e(0xa1)]({}),_0x115fb3=await brands[_0x151b2e(0xa1)]({}),_0x56ab09=await units[_0x151b2e(0xa1)]({}),_0x5d0e72=await warehouse[_0x151b2e(0xa1)]({'status':_0x151b2e(0x149)}),_0x57adc4=await units['aggregate']([{'$group':{'_id':_0x151b2e(0x14a),'secondaryunit':{'$first':_0x151b2e(0x138)}}}]);if(_0x31f2e1[0x0][_0x151b2e(0xec)]=='English\x20(US)')var _0xdf6cf7=users[_0x151b2e(0xe6)];else{if(_0x31f2e1[0x0]['language']==_0x151b2e(0xff))var _0xdf6cf7=users[_0x151b2e(0xff)];else{if(_0x31f2e1[0x0]['language']==_0x151b2e(0xb5))var _0xdf6cf7=users['German'];else{if(_0x31f2e1[0x0][_0x151b2e(0xec)]==_0x151b2e(0x133))var _0xdf6cf7=users[_0x151b2e(0x133)];else{if(_0x31f2e1[0x0]['language']==_0x151b2e(0xd9))var _0xdf6cf7=users[_0x151b2e(0xd9)];else{if(_0x31f2e1[0x0][_0x151b2e(0xec)]==_0x151b2e(0x98))var _0xdf6cf7=users[_0x151b2e(0xfc)];else{if(_0x31f2e1[0x0][_0x151b2e(0xec)]==_0x151b2e(0x110))var _0xdf6cf7=users[_0x151b2e(0x110)];else{if(_0x31f2e1[0x0][_0x151b2e(0xec)]==_0x151b2e(0xee))var _0xdf6cf7=users['Arabic'];}}}}}}}_0x4e0189[_0x151b2e(0x117)](_0x151b2e(0x137),{'success':_0x395e1a[_0x151b2e(0x10b)](_0x151b2e(0xa7)),'errors':_0x395e1a['flash'](_0x151b2e(0xf2)),'role':_0x3c1a80,'profile':_0x52b3a4,'alldata':_0x2ea517,'categories':_0xfce1f5,'brands':_0x115fb3,'master_shop':_0x31f2e1,'units':_0x56ab09,'secondunit':_0x57adc4,'find_data':_0x5d0e72,'language':_0xdf6cf7});}catch(_0x2f57f4){console['log'](_0x2f57f4);}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xe8),auth,upload[a0_0x11cb79(0x13d)]('image'),async(_0x4acd3c,_0x85b293)=>{const _0x285e32=a0_0x11cb79;try{console[_0x285e32(0x122)](_0x285e32(0xb8));const _0x1dfc33=_0x4acd3c[_0x285e32(0xf6)]['id'],_0x578785=await product[_0x285e32(0xaa)](_0x1dfc33),{image:_0x6a4a2b,name:_0x1a3827,category:_0x21708e,brand:_0x2144d0,sku:_0x42cd27,unit:_0x31e582,alertquantity:_0x2fee2c,product_code:_0x365062,warehouse:_0x51eaaf,primary_ItemCode:_0x2186dc,second_ItemCode:_0x344a35,second_unit:_0x186abe,maxPerUnit:_0x75d36c,MaxPerProduct:_0x547089,prod_catdata:_0x310b50}=_0x4acd3c[_0x285e32(0x13c)];_0x4acd3c[_0x285e32(0x143)]&&(_0x578785[_0x285e32(0xbb)]=_0x4acd3c[_0x285e32(0x143)][_0x285e32(0xde)]);_0x578785[_0x285e32(0xa5)]=_0x1a3827,_0x578785[_0x285e32(0x10e)]=_0x21708e,_0x578785['brand']=_0x2144d0,_0x578785[_0x285e32(0x146)]=_0x42cd27,_0x578785[_0x285e32(0x140)]=_0x31e582,_0x578785[_0x285e32(0xf8)]=_0x2fee2c,_0x578785[_0x285e32(0xb3)]=_0x365062,_0x578785[_0x285e32(0x8a)]=_0x51eaaf,_0x578785[_0x285e32(0x13b)]=_0x2186dc,_0x578785[_0x285e32(0x120)]=_0x344a35,_0x578785[_0x285e32(0x112)]=_0x186abe,_0x578785[_0x285e32(0xb4)]=_0x547089,_0x578785[_0x285e32(0xba)]=_0x75d36c,_0x578785[_0x285e32(0xe7)]=_0x310b50;const _0x505973=await _0x578785[_0x285e32(0xac)]();console[_0x285e32(0x122)](_0x285e32(0xda),_0x578785),_0x4acd3c[_0x285e32(0x10b)](_0x285e32(0xa7),_0x285e32(0x9d)),_0x85b293[_0x285e32(0x119)](_0x285e32(0xb6));}catch(_0x1e0abe){console['log'](_0x1e0abe);}}),router[a0_0x11cb79(0x10a)]('/barcode/:id',auth,async(_0x1a7d92,_0x53c8d7)=>{const _0x974661=a0_0x11cb79;try{const {username:_0x3c2ed8,email:_0x59047d,role:_0x7ffb93}=_0x1a7d92[_0x974661(0x92)],_0x47a7d7=_0x1a7d92[_0x974661(0x92)],_0x359100=await profile[_0x974661(0x101)]({'email':_0x47a7d7['email']}),_0x43cbc1=await master_shop['find']();console[_0x974661(0x122)](_0x974661(0x134),_0x43cbc1);const _0x9a7dad=_0x1a7d92[_0x974661(0xf6)]['id'],_0x3778bb=await product[_0x974661(0xaa)](_0x9a7dad);console['log']('barcode\x20user_id',_0x3778bb);if(_0x43cbc1[0x0][_0x974661(0xec)]=='English\x20(US)')var _0x49eeba=users[_0x974661(0xe6)];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0xff))var _0x49eeba=users[_0x974661(0xff)];else{if(_0x43cbc1[0x0][_0x974661(0xec)]=='German')var _0x49eeba=users[_0x974661(0xb5)];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0x133))var _0x49eeba=users[_0x974661(0x133)];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0xd9))var _0x49eeba=users[_0x974661(0xd9)];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0x98))var _0x49eeba=users['Portuguese'];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0x110))var _0x49eeba=users['Chinese'];else{if(_0x43cbc1[0x0][_0x974661(0xec)]==_0x974661(0xee))var _0x49eeba=users[_0x974661(0x100)];}}}}}}}_0x53c8d7['render'](_0x974661(0x132),{'success':_0x1a7d92[_0x974661(0x10b)](_0x974661(0xa7)),'errors':_0x1a7d92[_0x974661(0x10b)]('errors'),'role':_0x47a7d7,'profile':_0x359100,'alldata':_0x3778bb,'master_shop':_0x43cbc1,'language':_0x49eeba});}catch(_0x293494){console[_0x974661(0x122)](_0x293494);}}),router[a0_0x11cb79(0x10a)](a0_0x11cb79(0xbe),auth,async(_0x1bee2f,_0x268b8e)=>{const _0x5d5a62=a0_0x11cb79;try{const _0x16b93d=new excelJS[(_0x5d5a62(0x141))](),_0x5c374e=_0x16b93d['addWorksheet'](_0x5d5a62(0x12e));return _0x5c374e['columns']=[{'header':'Product_Name','key':_0x5d5a62(0x128),'width':0xa},{'header':'Brands','key':'PBrands','width':0xa},{'header':'Units','key':_0x5d5a62(0x94),'width':0xa},{'header':_0x5d5a62(0x9f),'key':'PSecondaryUnits','width':0xa},{'header':_0x5d5a62(0x144),'key':_0x5d5a62(0x139),'width':0xa},{'header':_0x5d5a62(0xf7),'key':_0x5d5a62(0xdf),'width':0xa},{'header':_0x5d5a62(0xd8),'key':_0x5d5a62(0xdf),'width':0xa},{'header':_0x5d5a62(0x97),'key':'ProductCode','width':0xa},{'header':_0x5d5a62(0xc6),'key':_0x5d5a62(0x115),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x5d5a62(0xd6),'key':'PAlQty','width':0xa},{'header':'Products_category','key':_0x5d5a62(0xc2),'width':0xa}],_0x268b8e['setHeader'](_0x5d5a62(0xcd),_0x5d5a62(0xd3)),_0x268b8e[_0x5d5a62(0xa6)](_0x5d5a62(0x9c),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x16b93d['xlsx'][_0x5d5a62(0xbf)](_0x268b8e)[_0x5d5a62(0xb0)](()=>{_0x268b8e['status'](0xc8);});}catch(_0x9bac6a){_0x268b8e['status'](0x190)[_0x5d5a62(0x113)](_0x9bac6a);}});const storage1=multer[a0_0x11cb79(0x12b)]({'destination':(_0x2dbc8c,_0x2a5fad,_0x533a98)=>{_0x533a98(null,'public/Migration');},'filename':(_0x493df6,_0x4396c3,_0x2014b8)=>{const _0x1e7d92=a0_0x11cb79;_0x2014b8(null,Date[_0x1e7d92(0x130)]()+_0x4396c3['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x11cb79(0x135)](a0_0x11cb79(0xd0),auth,uploadMigrate[a0_0x11cb79(0x13d)](a0_0x11cb79(0x12a)),async(_0x3586fe,_0x4f3c2c)=>{const _0x2bf5a0=a0_0x11cb79,_0x14b261=_0x3586fe['file'][_0x2bf5a0(0xde)],_0x571a44=await xlsx[_0x2bf5a0(0x91)](_0x2bf5a0(0xc7)+_0x14b261);let _0x39d0fe=_0x571a44['SheetNames'],_0x41c23a=xlsx[_0x2bf5a0(0x129)][_0x2bf5a0(0x118)](_0x571a44[_0x2bf5a0(0xf4)][_0x39d0fe[0x0]]);for(const _0x193c20 of _0x41c23a){const _0x5bd104=_0x193c20[_0x2bf5a0(0xc9)],_0x463bb8=_0x193c20['Brands'],_0x476d59=_0x193c20[_0x2bf5a0(0x12d)],_0x5bdec0=_0x193c20[_0x2bf5a0(0x9f)],_0x6d2bba=_0x193c20[_0x2bf5a0(0x97)],_0x5719d5=_0x193c20['Category'],_0x4cba06=_0x193c20[_0x2bf5a0(0x124)],_0xc4da84=_0x193c20[_0x2bf5a0(0xf7)],_0x289691=_0x193c20[_0x2bf5a0(0xd8)],_0x14424c=_0x193c20[_0x2bf5a0(0xd6)],_0x56da85=_0x193c20[_0x2bf5a0(0x144)],_0x3ac810=_0x193c20[_0x2bf5a0(0xcf)];try{let _0x5a2b2c=await categories[_0x2bf5a0(0x101)]({'name':_0x5719d5});if(!_0x5a2b2c){const _0x218e55=new categories({'name':_0x5719d5,'products':'0'});_0x5a2b2c=await _0x218e55[_0x2bf5a0(0xac)]();}let _0x5d2116=await brands['findOne']({'name':_0x463bb8});if(!_0x5d2116){const _0x5cc3b9=new brands({'name':_0x463bb8,'products':'0'});_0x5d2116=await _0x5cc3b9[_0x2bf5a0(0xac)]();}let _0x143f28=await units[_0x2bf5a0(0x101)]({'name':_0x476d59,'secondary_unit':_0x5bdec0});if(!_0x143f28){const _0x3261ea=new units({'name':_0x476d59,'secondary_unit':_0x5bdec0,'products':'0'});_0x143f28=await _0x3261ea[_0x2bf5a0(0xac)]();}const _0x2b2655=await product[_0x2bf5a0(0xa1)]({'name':_0x5bd104,'category':_0x5a2b2c[_0x2bf5a0(0xa5)],'brand':_0x5d2116['name'],'secondary_unit':_0x143f28[_0x2bf5a0(0x112)],'product_code':_0x6d2bba});console[_0x2bf5a0(0x122)](_0x2b2655[_0x2bf5a0(0xb7)]+_0x2bf5a0(0x106)+_0x5a2b2c[_0x2bf5a0(0xa5)]+_0x2bf5a0(0x106)+_0x5d2116[_0x2bf5a0(0xa5)]+_0x2bf5a0(0x106)+_0x143f28[_0x2bf5a0(0x112)]+_0x2bf5a0(0x106)+_0x6d2bba+_0x2bf5a0(0x106)+_0x5bd104);if(_0x2b2655[_0x2bf5a0(0xb7)]===0x0){const _0x1986c=new product({'image':_0x2bf5a0(0xfb),'name':_0x5bd104,'category':_0x5a2b2c[_0x2bf5a0(0xa5)],'brand':_0x5d2116[_0x2bf5a0(0xa5)],'unit':_0x143f28['name'],'alertquantity':_0x4cba06,'product_code':_0x6d2bba,'secondary_unit':_0x143f28[_0x2bf5a0(0x112)],'primary_code':_0xc4da84,'secondary_code':_0x289691,'maxStocks':_0x14424c,'maxProdPerUnit':_0x56da85,'product_category':_0x3ac810}),_0x440b59=await _0x1986c[_0x2bf5a0(0xac)]();_0x5a2b2c['products']=parseInt(_0x5a2b2c['products'])+0x1,await _0x5a2b2c[_0x2bf5a0(0xac)](),_0x5d2116['products']=parseInt(_0x5d2116[_0x2bf5a0(0xb1)])+0x1,await _0x5d2116[_0x2bf5a0(0xac)](),_0x143f28[_0x2bf5a0(0xb1)]=parseInt(_0x143f28['products'])+0x1,await _0x143f28['save'](),_0x3586fe['flash'](_0x2bf5a0(0xa7),_0x5bd104+_0x2bf5a0(0xca));}else{console['log'](_0x2b2655[0x0]);const _0x494054=_0x2b2655[0x0];_0x494054[_0x2bf5a0(0x10e)]=_0x5a2b2c[_0x2bf5a0(0xa5)],_0x494054['brand']=_0x5d2116[_0x2bf5a0(0xa5)],_0x494054[_0x2bf5a0(0x140)]=_0x143f28[_0x2bf5a0(0xa5)],_0x494054[_0x2bf5a0(0xf8)]=_0x4cba06,_0x494054[_0x2bf5a0(0xb3)]=_0x6d2bba,_0x494054[_0x2bf5a0(0x112)]=_0x143f28['secondary_unit'],_0x494054['primary_code']=_0xc4da84,_0x494054[_0x2bf5a0(0x120)]=_0x289691,_0x494054[_0x2bf5a0(0xb4)]=_0x14424c,_0x494054['maxProdPerUnit']=_0x56da85,_0x494054[_0x2bf5a0(0xe7)]=_0x3ac810;const _0x207627=await _0x494054[_0x2bf5a0(0xac)]();_0x3586fe[_0x2bf5a0(0x10b)]('success',_0x207627['name']+_0x2bf5a0(0xf3));}}catch(_0x471a60){_0x4f3c2c[_0x2bf5a0(0x11b)](0x1f4)[_0x2bf5a0(0x90)]({'proderror':_0x471a60[_0x2bf5a0(0x10f)],'aproduct':_0x5bd104});}}_0x4f3c2c[_0x2bf5a0(0x119)](_0x2bf5a0(0xb6));}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xc3),auth,async(_0x5d11d6,_0x1b2b67)=>{const _0x41f569=a0_0x11cb79;try{console[_0x41f569(0x122)](_0x5d11d6[_0x41f569(0x13c)]);const {data_cateory:_0x562298,datachoose:_0x251f5b}=_0x5d11d6['body'];var _0x2e86d6;if(_0x251f5b==_0x41f569(0xfa))_0x2e86d6=await product[_0x41f569(0xce)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x251f5b=='brands')_0x2e86d6=await product[_0x41f569(0xce)]([{'$match':{'product_category':_0x562298}},{'$group':{'_id':_0x41f569(0x11d)}}]);else _0x251f5b==_0x41f569(0xa9)&&(_0x2e86d6=await product[_0x41f569(0xce)]([{'$match':{'product_category':_0x562298}},{'$group':{'_id':'$category'}}]));}_0x1b2b67[_0x41f569(0x90)](_0x2e86d6);}catch(_0x980fe5){_0x1b2b67['json']({'message':_0x980fe5['message']});}}),router['post'](a0_0x11cb79(0x103),auth,async(_0x47a1aa,_0x12aa44)=>{const _0x4f3f6f=a0_0x11cb79;try{const {data_choosing:_0x2ade6a,data_selected:_0x4b80b0}=_0x47a1aa['body'];var _0x1dc95b;if(_0x2ade6a==_0x4f3f6f(0xfa))_0x1dc95b=await product['aggregate']([{'$match':{'product_category':_0x4b80b0}}]);else{if(_0x2ade6a==_0x4f3f6f(0xa3))_0x1dc95b=await product[_0x4f3f6f(0xce)]([{'$match':{'brand':_0x4b80b0}}]);else _0x2ade6a==_0x4f3f6f(0xa9)&&(_0x1dc95b=await product[_0x4f3f6f(0xce)]([{'$match':{'category':_0x4b80b0}}]));}_0x12aa44[_0x4f3f6f(0x90)](_0x1dc95b);}catch(_0x55c62d){_0x12aa44[_0x4f3f6f(0x90)]({'message':_0x55c62d[_0x4f3f6f(0x10f)]});}}),router[a0_0x11cb79(0x10a)]('/print_barcode',auth,async(_0x459ccb,_0x303fae)=>{const _0x17a498=a0_0x11cb79,_0x70a78c=_0x459ccb[_0x17a498(0x92)],_0x5df2f8=await profile[_0x17a498(0x101)]({'email':_0x70a78c[_0x17a498(0xdd)]}),_0x1250f5=await master_shop[_0x17a498(0xa1)](),_0x1f80c0=await product[_0x17a498(0xa1)]();if(_0x1250f5[0x0][_0x17a498(0xec)]==_0x17a498(0xb9))var _0x5dec6d=users[_0x17a498(0xe6)];else{if(_0x1250f5[0x0][_0x17a498(0xec)]==_0x17a498(0xff))var _0x5dec6d=users[_0x17a498(0xff)];else{if(_0x1250f5[0x0][_0x17a498(0xec)]=='German')var _0x5dec6d=users['German'];else{if(_0x1250f5[0x0]['language']==_0x17a498(0x133))var _0x5dec6d=users[_0x17a498(0x133)];else{if(_0x1250f5[0x0]['language']==_0x17a498(0xd9))var _0x5dec6d=users[_0x17a498(0xd9)];else{if(_0x1250f5[0x0][_0x17a498(0xec)]==_0x17a498(0x98))var _0x5dec6d=users[_0x17a498(0xfc)];else{if(_0x1250f5[0x0]['language']==_0x17a498(0x110))var _0x5dec6d=users[_0x17a498(0x110)];else{if(_0x1250f5[0x0][_0x17a498(0xec)]=='Arabic\x20(ae)')var _0x5dec6d=users[_0x17a498(0x100)];}}}}}}}_0x303fae[_0x17a498(0x117)](_0x17a498(0x109),{'success':_0x459ccb[_0x17a498(0x10b)](_0x17a498(0xa7)),'errors':_0x459ccb[_0x17a498(0x10b)](_0x17a498(0xf2)),'role':_0x70a78c,'profile':_0x5df2f8,'products':_0x1f80c0,'master_shop':_0x1250f5,'language':_0x5dec6d});}),router['post'](a0_0x11cb79(0xe4),auth,async(_0x4918fa,_0x34ca22)=>{const _0x1f308c=a0_0x11cb79,_0x2a0fe0=await product[_0x1f308c(0xa1)]();_0x34ca22['json']({'data':_0x2a0fe0});}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xae),auth,async(_0x1ece5b,_0x5625bd)=>{const _0x4a57e3=a0_0x11cb79;try{const {dataProdCat:_0x130d49,dataProdIdentity:_0x382186}=_0x1ece5b[_0x4a57e3(0x13c)];var _0x3261de;switch(_0x130d49){case'fg':switch(_0x382186){case'Brands':_0x3261de=await product[_0x4a57e3(0xce)]([{'$match':{'product_category':_0x4a57e3(0x123)}},{'$group':{'_id':_0x4a57e3(0x11d)}},{'$project':{'brand':'$_id'}}]);break;case _0x4a57e3(0xc6):_0x3261de=await product[_0x4a57e3(0xce)]([{'$match':{'product_category':_0x4a57e3(0x123)}},{'$group':{'_id':_0x4a57e3(0xe5)}},{'$project':{'category':_0x4a57e3(0x14a)}}]);break;}break;case'rm':switch(_0x382186){case'Brands':_0x3261de=await product['aggregate']([{'$match':{'product_category':_0x4a57e3(0x11e)}},{'$group':{'_id':_0x4a57e3(0x11d)}},{'$project':{'brand':_0x4a57e3(0x14a)}}]);break;case _0x4a57e3(0xc6):_0x3261de=await product[_0x4a57e3(0xce)]([{'$match':{'product_category':_0x4a57e3(0x11e)}},{'$group':{'_id':_0x4a57e3(0xe5)}},{'$project':{'category':_0x4a57e3(0x14a)}}]);break;}break;}_0x5625bd['json'](_0x3261de);}catch(_0x14040c){_0x5625bd[_0x4a57e3(0x90)]({'message':_0x14040c[_0x4a57e3(0x10f)]});}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0x116),auth,async(_0x3386bc,_0x5d9581)=>{const _0x4957b5=a0_0x11cb79;try{console[_0x4957b5(0x122)](_0x3386bc[_0x4957b5(0x13c)]);const {prod_cat:_0x296d64,identity:_0x597933,valueData:_0x5dc992,typeofbarcode:_0x356f29}=_0x3386bc['body'];let _0x536182;switch(_0x296d64){case'fg':if(_0x597933==_0x4957b5(0xc5))_0x536182=await product[_0x4957b5(0xce)]([{'$match':{'product_category':_0x4957b5(0x123),'brand':_0x5dc992}}]);else _0x597933=='Category'&&(_0x536182=await product[_0x4957b5(0xce)]([{'$match':{'product_category':_0x4957b5(0x123),'category':_0x5dc992}}]));break;case'rm':if(_0x597933==_0x4957b5(0xc5))_0x536182=await product[_0x4957b5(0xce)]([{'$match':{'product_category':_0x4957b5(0x11e),'brand':_0x5dc992}}]);else _0x597933==_0x4957b5(0xc6)&&(_0x536182=await product[_0x4957b5(0xce)]([{'$match':{'product_category':_0x4957b5(0x11e),'category':_0x5dc992}}]));break;}const _0x51533a=_0x177cc4=>_0x177cc4*0x48,_0xe48cda={'width':0x3,'height':0x1},_0x5472e2=new PDFDocument({'margin':_0x51533a(0.75),'size':[_0x51533a(_0xe48cda[_0x4957b5(0x136)]),_0x51533a(_0xe48cda[_0x4957b5(0x9a)])],'bufferPages':!![]}),_0x5b581e=_0x536182[_0x4957b5(0xb7)];for(let _0xafbce3=0x0;_0xafbce3<=_0x5b581e;_0xafbce3++){if(_0xafbce3!=_0x5b581e){const _0x441d42=_0x536182[_0xafbce3][_0x4957b5(0xa5)],_0x3de83c=_0x536182[_0xafbce3]['primary_code'],_0x228972=_0x536182[_0xafbce3][_0x4957b5(0x120)],_0x3f87b6=_0x536182[_0xafbce3][_0x4957b5(0xb3)];var _0x18c796;switch(_0x356f29){case'1':_0x18c796=_0x3de83c;break;case'2':_0x18c796=_0x228972;break;case'3':_0x18c796=_0x3f87b6;break;}const _0x33527c={'width':0xd2,'height':0x64},_0x278ff6={'width':_0x51533a(_0xe48cda[_0x4957b5(0x136)]),'height':_0x51533a(_0xe48cda[_0x4957b5(0x9a)])},_0x10b862=new Canvas();JsBarcode(_0x10b862,_0x18c796,{'format':_0x4957b5(0xeb),'height':_0x33527c[_0x4957b5(0x9a)],'displayValue':!![],'text':_0x18c796});const _0x28bcee=_0x10b862[_0x4957b5(0x89)](),_0x5c762b=_0x278ff6[_0x4957b5(0x136)]/_0x33527c[_0x4957b5(0x136)],_0x39eea2=_0x278ff6[_0x4957b5(0x9a)]/_0x33527c['height'],_0x297b4f=Math[_0x4957b5(0x88)](_0x5c762b,_0x39eea2),_0xf71f95=_0x33527c['width']*_0x297b4f,_0x170824=_0x33527c[_0x4957b5(0x9a)]*_0x297b4f,_0x1eeea7=(_0x278ff6['width']-_0xf71f95)/0x2,_0x4da21a=(_0x278ff6[_0x4957b5(0x9a)]-_0x170824)/0x2;_0x5472e2[_0x4957b5(0xbb)](_0x28bcee,_0x1eeea7,_0x4da21a,{'width':_0xf71f95,'height':_0x170824}),_0xafbce3!=_0x5b581e&&_0x5472e2[_0x4957b5(0x127)]();}}const _0x1be982=[];_0x5472e2['on']('data',_0x1be982['push'][_0x4957b5(0xf0)](_0x1be982)),_0x5472e2['on']('end',()=>{const _0x483ee4=_0x4957b5,_0xe29ad5=Buffer[_0x483ee4(0xb2)](_0x1be982),_0x109952=_0xe29ad5[_0x483ee4(0xa8)]('base64');_0x5d9581[_0x483ee4(0x90)]({'pdfContent':_0x109952});}),_0x5472e2['end']();}catch(_0x23cce0){_0x5d9581[_0x4957b5(0x90)]({'message':_0x23cce0[_0x4957b5(0x10f)]});}}),router[a0_0x11cb79(0x135)](a0_0x11cb79(0xe0),auth,async(_0x21b448,_0x2c2522)=>{const _0x35f11c=a0_0x11cb79;try{console[_0x35f11c(0x122)](_0x21b448[_0x35f11c(0x13c)]);const {prod_cat:_0x33ac45,identity:_0x427204,valueData:_0x56be1d}=_0x21b448[_0x35f11c(0x13c)];let _0x32a504;switch(_0x33ac45){case'fg':if(_0x427204=='Brands')_0x32a504=await product[_0x35f11c(0xce)]([{'$match':{'product_category':_0x35f11c(0x123),'brand':_0x56be1d}}]);else _0x427204==_0x35f11c(0xc6)&&(_0x32a504=await product[_0x35f11c(0xce)]([{'$match':{'product_category':_0x35f11c(0x123),'category':_0x56be1d}}]));break;case'rm':if(_0x427204==_0x35f11c(0xc5))_0x32a504=await product['aggregate']([{'$match':{'product_category':_0x35f11c(0x11e),'brand':_0x56be1d}}]);else _0x427204==_0x35f11c(0xc6)&&(_0x32a504=await product[_0x35f11c(0xce)]([{'$match':{'product_category':_0x35f11c(0x11e),'category':_0x56be1d}}]));break;}_0x2c2522[_0x35f11c(0x90)](_0x32a504);}catch(_0x117552){_0x2c2522[_0x35f11c(0x90)]({'message':_0x117552[_0x35f11c(0x10f)]});}}),router['post'](a0_0x11cb79(0x12f),auth,async(_0x26c8fe,_0x101898)=>{const _0x1b3e91=a0_0x11cb79;try{const _0xc75d15=_0x26c8fe[_0x1b3e91(0xf6)]['id'],{copies:_0x43b8c5,typeofbarcode:_0x18d01b}=_0x26c8fe[_0x1b3e91(0x13c)];var _0x1c9396=await product[_0x1b3e91(0xaa)](_0xc75d15);const _0x227219=_0x16f0cc=>_0x16f0cc*0x48,_0x249cfa={'width':0x3,'height':0x1},_0x5e0e83=new PDFDocument({'margin':_0x227219(0.75),'size':[_0x227219(_0x249cfa[_0x1b3e91(0x136)]),_0x227219(_0x249cfa[_0x1b3e91(0x9a)])],'bufferPages':!![]}),_0x3cd1b6=_0x43b8c5,_0x3a9025=_0x1c9396[_0x1b3e91(0xa5)],_0x1f406f=_0x1c9396[_0x1b3e91(0x13b)],_0x2d85a6=_0x1c9396[_0x1b3e91(0x120)],_0x30b5c0=_0x1c9396[_0x1b3e91(0xb3)];let _0x495302;switch(_0x18d01b){case'1':_0x495302=_0x1f406f;break;case'2':_0x495302=_0x2d85a6;break;case'3':_0x495302=_0x30b5c0;break;}const _0x370a23={'width':0xd2,'height':0x64},_0x543cca={'width':_0x227219(_0x249cfa[_0x1b3e91(0x136)]),'height':_0x227219(_0x249cfa[_0x1b3e91(0x9a)])};for(let _0x50df91=0x1;_0x50df91<=_0x3cd1b6;_0x50df91++){const _0x475e3f=new Canvas();JsBarcode(_0x475e3f,_0x495302,{'format':_0x1b3e91(0xeb),'height':_0x370a23[_0x1b3e91(0x9a)],'displayValue':!![],'text':_0x495302});const _0x2deec7=_0x475e3f[_0x1b3e91(0x89)](),_0x47125a=_0x543cca['width']/_0x370a23['width'],_0x430dd0=_0x543cca[_0x1b3e91(0x9a)]/_0x370a23[_0x1b3e91(0x9a)],_0x54e040=Math[_0x1b3e91(0x88)](_0x47125a,_0x430dd0),_0x211722=_0x370a23[_0x1b3e91(0x136)]*_0x54e040,_0x4385c8=_0x370a23[_0x1b3e91(0x9a)]*_0x54e040,_0x585493=(_0x543cca[_0x1b3e91(0x136)]-_0x211722)/0x2,_0x112e4d=(_0x543cca[_0x1b3e91(0x9a)]-_0x4385c8)/0x2;_0x5e0e83[_0x1b3e91(0xbb)](_0x2deec7,_0x585493,_0x112e4d,{'width':_0x211722,'height':_0x4385c8}),_0x50df91!=_0x3cd1b6&&_0x5e0e83[_0x1b3e91(0x127)]();}const _0x17cf21=[];_0x5e0e83['on'](_0x1b3e91(0xd5),_0x17cf21[_0x1b3e91(0xaf)][_0x1b3e91(0xf0)](_0x17cf21)),_0x5e0e83['on'](_0x1b3e91(0xad),()=>{const _0x570b24=_0x1b3e91,_0x80f518=Buffer[_0x570b24(0xb2)](_0x17cf21),_0x29afe4=_0x80f518['toString'](_0x570b24(0xea));_0x101898['json']({'pdfContent':_0x29afe4});}),_0x5e0e83[_0x1b3e91(0xad)]();}catch(_0x4e37f1){_0x101898[_0x1b3e91(0x90)]({'message':_0x4e37f1['message']});}}),module['exports']=router;