const a0_0x12c21a=a0_0x4b19;(function(_0x214c92,_0x1e9228){const _0x180f8a=a0_0x4b19,_0x2d9d70=_0x214c92();while(!![]){try{const _0x2cd4e7=-parseInt(_0x180f8a(0xa7))/0x1*(-parseInt(_0x180f8a(0x154))/0x2)+parseInt(_0x180f8a(0xcd))/0x3*(parseInt(_0x180f8a(0xd6))/0x4)+-parseInt(_0x180f8a(0xb8))/0x5*(-parseInt(_0x180f8a(0x143))/0x6)+-parseInt(_0x180f8a(0x13f))/0x7+parseInt(_0x180f8a(0xc3))/0x8*(-parseInt(_0x180f8a(0xdf))/0x9)+parseInt(_0x180f8a(0x151))/0xa+parseInt(_0x180f8a(0xd4))/0xb*(-parseInt(_0x180f8a(0x116))/0xc);if(_0x2cd4e7===_0x1e9228)break;else _0x2d9d70['push'](_0x2d9d70['shift']());}catch(_0x353f0a){_0x2d9d70['push'](_0x2d9d70['shift']());}}}(a0_0x1962,0x3797e));const express=require(a0_0x12c21a(0x12a)),res=require(a0_0x12c21a(0x157)),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x12c21a(0xa2)),auth=require(a0_0x12c21a(0xcf)),users=require('../public/language/languages.json'),excelJS=require(a0_0x12c21a(0x102)),xlsx=require(a0_0x12c21a(0xaa)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x12c21a(0xeb)),PDFDocument=require(a0_0x12c21a(0xb4));router['get'](a0_0x12c21a(0xb2),auth,async(_0x2d1c95,_0x3913be)=>{const _0x130646=a0_0x12c21a;try{const {username:_0x42b024,email:_0x577116,role:_0x2cebaa}=_0x2d1c95['user'],_0x5cd1c2=_0x2d1c95['user'],_0x226b3c=await profile[_0x130646(0x153)]({'email':_0x5cd1c2['email']}),_0x4f2847=await master_shop[_0x130646(0xfd)]();console[_0x130646(0x9f)](_0x130646(0x14f),_0x4f2847);const _0x1f6706=await categories[_0x130646(0xfd)]();if(_0x4f2847[0x0][_0x130646(0x11d)]==_0x130646(0xa4))var _0x425401=users[_0x130646(0xe6)];else{if(_0x4f2847[0x0]['language']=='Hindi')var _0x425401=users['Hindi'];else{if(_0x4f2847[0x0][_0x130646(0x11d)]==_0x130646(0xc1))var _0x425401=users[_0x130646(0xc1)];else{if(_0x4f2847[0x0][_0x130646(0x11d)]==_0x130646(0xe3))var _0x425401=users['Spanish'];else{if(_0x4f2847[0x0]['language']==_0x130646(0xbb))var _0x425401=users['French'];else{if(_0x4f2847[0x0][_0x130646(0x11d)]=='Portuguese\x20(BR)')var _0x425401=users['Portuguese'];else{if(_0x4f2847[0x0][_0x130646(0x11d)]==_0x130646(0x12d))var _0x425401=users[_0x130646(0x12d)];else{if(_0x4f2847[0x0]['language']==_0x130646(0xe4))var _0x425401=users[_0x130646(0x14b)];}}}}}}}_0x3913be[_0x130646(0x10c)](_0x130646(0x158),{'success':_0x2d1c95['flash']('success'),'errors':_0x2d1c95[_0x130646(0x107)](_0x130646(0xac)),'role':_0x5cd1c2,'profile':_0x226b3c,'user':_0x1f6706,'master_shop':_0x4f2847,'language':_0x425401});}catch(_0xa6ce81){console[_0x130646(0x9f)](_0xa6ce81);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xb2),auth,async(_0x74f188,_0x4eac53)=>{const _0x5e8e2c=a0_0x12c21a;try{const {name:_0x2b55ac,products:_0x2d200c}=_0x74f188[_0x5e8e2c(0x103)],_0x1d74e1=new categories({'name':_0x2b55ac,'products':_0x2d200c}),_0x50a245=await categories[_0x5e8e2c(0x153)]({'name':_0x2b55ac});_0x50a245?_0x74f188[_0x5e8e2c(0x107)](_0x5e8e2c(0xac),_0x2b55ac+_0x5e8e2c(0x14c)):_0x74f188[_0x5e8e2c(0x107)](_0x5e8e2c(0x106),_0x2b55ac+_0x5e8e2c(0x137));const _0x27477b=await _0x1d74e1['save']();_0x4eac53[_0x5e8e2c(0xb1)](_0x5e8e2c(0x145));}catch(_0x14a4f3){console[_0x5e8e2c(0x9f)](_0x14a4f3);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x9d),auth,async(_0x466940,_0x33e593)=>{const _0x4fd243=a0_0x12c21a;try{const {username:_0x3d6766,email:_0x2cd000,role:_0x253f93}=_0x466940[_0x4fd243(0x11b)],_0x16ad71=_0x466940[_0x4fd243(0x11b)],_0x280bbf=await profile[_0x4fd243(0x153)]({'email':_0x16ad71[_0x4fd243(0x141)]}),_0x2ca949=await master_shop[_0x4fd243(0xfd)]();console[_0x4fd243(0x9f)](_0x4fd243(0x14f),_0x2ca949);const _0x4b6248=_0x466940[_0x4fd243(0xc0)]['id'];console[_0x4fd243(0x9f)](_0x4b6248);const _0xcfdbb1=await categories[_0x4fd243(0x109)](_0x4b6248);if(_0x2ca949[0x0][_0x4fd243(0x11d)]=='English\x20(US)')var _0x57ca94=users[_0x4fd243(0xe6)];else{if(_0x2ca949[0x0]['language']==_0x4fd243(0x11f))var _0x57ca94=users[_0x4fd243(0x11f)];else{if(_0x2ca949[0x0]['language']==_0x4fd243(0xc1))var _0x57ca94=users[_0x4fd243(0xc1)];else{if(_0x2ca949[0x0][_0x4fd243(0x11d)]==_0x4fd243(0xe3))var _0x57ca94=users[_0x4fd243(0xe3)];else{if(_0x2ca949[0x0][_0x4fd243(0x11d)]==_0x4fd243(0xbb))var _0x57ca94=users[_0x4fd243(0xbb)];else{if(_0x2ca949[0x0]['language']==_0x4fd243(0xce))var _0x57ca94=users[_0x4fd243(0x123)];else{if(_0x2ca949[0x0][_0x4fd243(0x11d)]==_0x4fd243(0x12d))var _0x57ca94=users[_0x4fd243(0x12d)];else{if(_0x2ca949[0x0]['language']=='Arabic\x20(ae)')var _0x57ca94=users[_0x4fd243(0x14b)];}}}}}}}_0x33e593[_0x4fd243(0x10c)](_0x4fd243(0x158),{'success':_0x466940[_0x4fd243(0x107)](_0x4fd243(0x106)),'errors':_0x466940[_0x4fd243(0x107)](_0x4fd243(0xac)),'role':_0x16ad71,'profile':_0x280bbf,'master_shop':_0x2ca949,'user':_0xcfdbb1,'language':_0x57ca94});}catch(_0x3a20ee){console['log'](_0x3a20ee);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0x9d),auth,async(_0x2ca1b8,_0x1d424b)=>{const _0x5b0b48=a0_0x12c21a;try{const _0x38a776=_0x2ca1b8[_0x5b0b48(0xc0)]['id'],_0x5dcba0=await categories[_0x5b0b48(0xcb)](_0x38a776,_0x2ca1b8[_0x5b0b48(0x103)]);_0x2ca1b8[_0x5b0b48(0x107)](_0x5b0b48(0x106),''+users['categories_edit']),_0x1d424b[_0x5b0b48(0xb1)](_0x5b0b48(0x145));}catch(_0xc583b8){console[_0x5b0b48(0x9f)](_0xc583b8);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x112),auth,async(_0xaf5b59,_0x24aea2)=>{const _0x55631a=a0_0x12c21a;try{const _0x11fbd9=_0xaf5b59[_0x55631a(0xc0)]['id'],_0x500238=await categories[_0x55631a(0x11e)](_0x11fbd9);_0xaf5b59[_0x55631a(0x107)](_0x55631a(0x106),'categories\x20data\x20delete\x20successfully'),_0x24aea2[_0x55631a(0xb1)](_0x55631a(0x145));}catch(_0x488b03){console[_0x55631a(0x9f)](_0x488b03);}}),router[a0_0x12c21a(0xd7)]('/brands',auth,async(_0xc8671,_0x25dd16)=>{const _0x544f0e=a0_0x12c21a;try{const {username:_0x2925c8,email:_0x311f7b,role:_0x50c2b8}=_0xc8671[_0x544f0e(0x11b)],_0x4274c8=_0xc8671[_0x544f0e(0x11b)],_0x33abe2=await profile[_0x544f0e(0x153)]({'email':_0x4274c8[_0x544f0e(0x141)]}),_0xf07939=await master_shop[_0x544f0e(0xfd)]();console['log'](_0x544f0e(0x14f),_0xf07939);const _0x11a16b=await brands[_0x544f0e(0xfd)]();if(_0xf07939[0x0]['language']==_0x544f0e(0xa4))var _0x185469=users[_0x544f0e(0xe6)];else{if(_0xf07939[0x0][_0x544f0e(0x11d)]==_0x544f0e(0x11f))var _0x185469=users[_0x544f0e(0x11f)];else{if(_0xf07939[0x0]['language']=='German')var _0x185469=users[_0x544f0e(0xc1)];else{if(_0xf07939[0x0]['language']==_0x544f0e(0xe3))var _0x185469=users[_0x544f0e(0xe3)];else{if(_0xf07939[0x0]['language']==_0x544f0e(0xbb))var _0x185469=users[_0x544f0e(0xbb)];else{if(_0xf07939[0x0][_0x544f0e(0x11d)]=='Portuguese\x20(BR)')var _0x185469=users[_0x544f0e(0x123)];else{if(_0xf07939[0x0][_0x544f0e(0x11d)]==_0x544f0e(0x12d))var _0x185469=users[_0x544f0e(0x12d)];else{if(_0xf07939[0x0][_0x544f0e(0x11d)]==_0x544f0e(0xe4))var _0x185469=users['Arabic'];}}}}}}}_0x25dd16[_0x544f0e(0x10c)](_0x544f0e(0x15f),{'success':_0xc8671[_0x544f0e(0x107)](_0x544f0e(0x106)),'errors':_0xc8671[_0x544f0e(0x107)](_0x544f0e(0xac)),'role':_0x4274c8,'profile':_0x33abe2,'master_shop':_0xf07939,'user':_0x11a16b,'language':_0x185469});}catch(_0x37f3a1){console[_0x544f0e(0x9f)](_0x37f3a1);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xef),auth,async(_0x3dfc0f,_0x53e06b)=>{const _0x4e6840=a0_0x12c21a;try{const {name:_0x3ace89,products:_0x243c62}=_0x3dfc0f[_0x4e6840(0x103)],_0x5df452=new brands({'name':_0x3ace89,'products':_0x243c62}),_0x240272=await brands[_0x4e6840(0x153)]({'name':_0x3ace89});_0x240272?_0x3dfc0f[_0x4e6840(0x107)](_0x4e6840(0xac),_0x3ace89+_0x4e6840(0xbe)):_0x3dfc0f[_0x4e6840(0x107)](_0x4e6840(0x106),_0x3ace89+_0x4e6840(0x9c));const _0x1b2a07=await _0x5df452['save']();_0x53e06b[_0x4e6840(0xb1)](_0x4e6840(0xea));}catch(_0x2604c1){console[_0x4e6840(0x9f)](_0x2604c1);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x132),auth,async(_0x4f8ebc,_0x4aef59)=>{const _0x2a3ee6=a0_0x12c21a;try{const {username:_0x36c193,email:_0xff4529,role:_0x32d57d}=_0x4f8ebc['user'],_0x117648=_0x4f8ebc['user'],_0x159dd2=await profile['findOne']({'email':_0x117648['email']}),_0x1f0470=await master_shop['find']();console[_0x2a3ee6(0x9f)](_0x2a3ee6(0x14f),_0x1f0470);const _0x48d7de=_0x4f8ebc[_0x2a3ee6(0xc0)]['id'];console['log'](_0x48d7de);const _0x3efc63=await brands['findById'](_0x48d7de);if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0xa4))var _0x18ef6f=users['English'];else{if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0x11f))var _0x18ef6f=users['Hindi'];else{if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0xc1))var _0x18ef6f=users['German'];else{if(_0x1f0470[0x0]['language']==_0x2a3ee6(0xe3))var _0x18ef6f=users[_0x2a3ee6(0xe3)];else{if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0xbb))var _0x18ef6f=users[_0x2a3ee6(0xbb)];else{if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0xce))var _0x18ef6f=users[_0x2a3ee6(0x123)];else{if(_0x1f0470[0x0][_0x2a3ee6(0x11d)]==_0x2a3ee6(0x12d))var _0x18ef6f=users[_0x2a3ee6(0x12d)];else{if(_0x1f0470[0x0]['language']==_0x2a3ee6(0xe4))var _0x18ef6f=users[_0x2a3ee6(0x14b)];}}}}}}}_0x4aef59[_0x2a3ee6(0x10c)](_0x2a3ee6(0x15f),{'success':_0x4f8ebc['flash'](_0x2a3ee6(0x106)),'errors':_0x4f8ebc[_0x2a3ee6(0x107)](_0x2a3ee6(0xac)),'role':_0x117648,'profile':_0x159dd2,'master_shop':_0x1f0470,'user':_0x3efc63,'language':_0x18ef6f});}catch(_0x1ccdbb){console[_0x2a3ee6(0x9f)](_0x1ccdbb);}}),router['post']('/brands/:id',auth,async(_0x48c3f7,_0x472630)=>{const _0x262411=a0_0x12c21a;try{const _0x37669c=_0x48c3f7['params']['id'],_0x5a1c5d=await brands[_0x262411(0xcb)](_0x37669c,_0x48c3f7[_0x262411(0x103)]);_0x48c3f7[_0x262411(0x107)]('success',_0x262411(0xe0)),_0x472630[_0x262411(0xb1)]('/products/brands');}catch(_0x446515){console['log'](_0x446515);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x131),auth,async(_0x9801f7,_0xcb4d67)=>{const _0x3db1d6=a0_0x12c21a;try{const _0x3b120d=_0x9801f7['params']['id'],_0x176117=await brands['findByIdAndDelete'](_0x3b120d);_0x9801f7[_0x3db1d6(0x107)](_0x3db1d6(0x106),_0x3db1d6(0xa6)),_0xcb4d67[_0x3db1d6(0xb1)](_0x3db1d6(0xea));}catch(_0xb54914){console[_0x3db1d6(0x9f)](_0xb54914);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0xbd),auth,async(_0x170bc3,_0x587281)=>{const _0x56de16=a0_0x12c21a;try{const {username:_0x3856e4,email:_0x174788,role:_0x3e2267}=_0x170bc3['user'],_0x495d48=_0x170bc3[_0x56de16(0x11b)],_0x32f062=await profile['findOne']({'email':_0x495d48[_0x56de16(0x141)]}),_0x2f5b1e=await master_shop[_0x56de16(0xfd)]();console[_0x56de16(0x9f)](_0x56de16(0x14f),_0x2f5b1e);const _0x435757=await units['find']();if(_0x2f5b1e[0x0]['language']=='English\x20(US)')var _0x5c134d=users['English'];else{if(_0x2f5b1e[0x0]['language']==_0x56de16(0x11f))var _0x5c134d=users[_0x56de16(0x11f)];else{if(_0x2f5b1e[0x0][_0x56de16(0x11d)]==_0x56de16(0xc1))var _0x5c134d=users[_0x56de16(0xc1)];else{if(_0x2f5b1e[0x0][_0x56de16(0x11d)]==_0x56de16(0xe3))var _0x5c134d=users['Spanish'];else{if(_0x2f5b1e[0x0]['language']==_0x56de16(0xbb))var _0x5c134d=users[_0x56de16(0xbb)];else{if(_0x2f5b1e[0x0][_0x56de16(0x11d)]==_0x56de16(0xce))var _0x5c134d=users['Portuguese'];else{if(_0x2f5b1e[0x0][_0x56de16(0x11d)]==_0x56de16(0x12d))var _0x5c134d=users[_0x56de16(0x12d)];else{if(_0x2f5b1e[0x0]['language']=='Arabic\x20(ae)')var _0x5c134d=users[_0x56de16(0x14b)];}}}}}}}_0x587281[_0x56de16(0x10c)](_0x56de16(0xc4),{'success':_0x170bc3[_0x56de16(0x107)](_0x56de16(0x106)),'errors':_0x170bc3['flash'](_0x56de16(0xac)),'role':_0x495d48,'profile':_0x32f062,'master_shop':_0x2f5b1e,'user':_0x435757,'language':_0x5c134d});}catch(_0x2ed4b6){console[_0x56de16(0x9f)](_0x2ed4b6);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xbd),auth,async(_0x5ac5d6,_0x431d0d)=>{const _0x48dad8=a0_0x12c21a;try{const {name:_0x60ed7e,secondary_unit:_0x584f70,products:_0xbde620}=_0x5ac5d6[_0x48dad8(0x103)],_0x543628=new units({'name':_0x60ed7e,'secondary_unit':_0x584f70,'products':_0xbde620}),_0x1cbd83=await units[_0x48dad8(0x153)]({'name':_0x60ed7e});_0x1cbd83?_0x5ac5d6['flash'](_0x48dad8(0xac),_0x60ed7e+_0x48dad8(0x125)):_0x5ac5d6[_0x48dad8(0x107)](_0x48dad8(0x106),_0x60ed7e+_0x48dad8(0x120));const _0x336d2a=await _0x543628[_0x48dad8(0x111)]();_0x431d0d[_0x48dad8(0xb1)](_0x48dad8(0x130));}catch(_0x41b598){console[_0x48dad8(0x9f)](_0x41b598);}}),router['get'](a0_0x12c21a(0xca),auth,async(_0x15e0e8,_0x551ddd)=>{const _0x35511f=a0_0x12c21a;try{const {username:_0x44b458,email:_0x4662cd,role:_0xba2096}=_0x15e0e8['user'],_0x3dd9dd=_0x15e0e8[_0x35511f(0x11b)],_0x4f6dd1=await profile[_0x35511f(0x153)]({'email':_0x3dd9dd[_0x35511f(0x141)]}),_0x591555=await master_shop['find']();console[_0x35511f(0x9f)](_0x35511f(0x14f),_0x591555);const _0x48802b=_0x15e0e8['params']['id'],_0x219b6f=await units[_0x35511f(0x109)](_0x48802b);if(_0x591555[0x0]['language']==_0x35511f(0xa4))var _0x592a5d=users[_0x35511f(0xe6)];else{if(_0x591555[0x0]['language']==_0x35511f(0x11f))var _0x592a5d=users[_0x35511f(0x11f)];else{if(_0x591555[0x0][_0x35511f(0x11d)]==_0x35511f(0xc1))var _0x592a5d=users[_0x35511f(0xc1)];else{if(_0x591555[0x0][_0x35511f(0x11d)]=='Spanish')var _0x592a5d=users[_0x35511f(0xe3)];else{if(_0x591555[0x0]['language']=='French')var _0x592a5d=users['French'];else{if(_0x591555[0x0][_0x35511f(0x11d)]==_0x35511f(0xce))var _0x592a5d=users[_0x35511f(0x123)];else{if(_0x591555[0x0]['language']=='Chinese')var _0x592a5d=users['Chinese'];else{if(_0x591555[0x0]['language']=='Arabic\x20(ae)')var _0x592a5d=users[_0x35511f(0x14b)];}}}}}}}_0x551ddd[_0x35511f(0x10c)](_0x35511f(0xc4),{'success':_0x15e0e8[_0x35511f(0x107)]('success'),'errors':_0x15e0e8[_0x35511f(0x107)](_0x35511f(0xac)),'role':_0x3dd9dd,'profile':_0x4f6dd1,'master_shop':_0x591555,'user':_0x219b6f,'language':_0x592a5d});}catch(_0x236a7b){console[_0x35511f(0x9f)](_0x236a7b);}}),router[a0_0x12c21a(0xfc)]('/units/:id',auth,async(_0x5e8a8f,_0x54002d)=>{const _0x4badce=a0_0x12c21a;try{const _0x3e063b=_0x5e8a8f[_0x4badce(0xc0)]['id'],_0x2dd201=await units[_0x4badce(0xcb)](_0x3e063b,_0x5e8a8f['body']);_0x5e8a8f[_0x4badce(0x107)](_0x4badce(0x106),'unit\x20data\x20update\x20successfully'),_0x54002d[_0x4badce(0xb1)]('/products/units');}catch(_0x438e5f){console[_0x4badce(0x9f)](_0x438e5f);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x128),auth,async(_0x34623a,_0x74c5fa)=>{const _0x1f68d8=a0_0x12c21a;try{const _0x5cb497=_0x34623a[_0x1f68d8(0xc0)]['id'],_0x648024=await units[_0x1f68d8(0x11e)](_0x5cb497);_0x34623a[_0x1f68d8(0x107)](_0x1f68d8(0x106),'unit\x20data\x20delete\x20successfully'),_0x74c5fa[_0x1f68d8(0xb1)](_0x1f68d8(0x130));}catch(_0x131fab){console[_0x1f68d8(0x9f)](_0x131fab);}});function a0_0x4b19(_0x17952a,_0x3e7c07){const _0x19620a=a0_0x1962();return a0_0x4b19=function(_0x4b192c,_0x39d54b){_0x4b192c=_0x4b192c-0x9b;let _0x275a27=_0x19620a[_0x4b192c];return _0x275a27;},a0_0x4b19(_0x17952a,_0x3e7c07);}const storage=multer[a0_0x12c21a(0x14a)]({'destination':(_0x2cfe29,_0x1cfd57,_0x58dea7)=>{const _0x42ece7=a0_0x12c21a;_0x58dea7(null,_0x42ece7(0x13e));},'filename':(_0x485eeb,_0x267b49,_0x535bd6)=>{const _0x53647e=a0_0x12c21a;_0x535bd6(null,Date[_0x53647e(0xf8)]()+_0x267b49['originalname']);}}),upload=multer({'storage':storage});router[a0_0x12c21a(0xd7)](a0_0x12c21a(0x124),auth,async(_0x1a063b,_0x13985e)=>{const _0x4c7207=a0_0x12c21a;try{const {username:_0x3d65f7,email:_0x1ab764,role:_0x253e32}=_0x1a063b[_0x4c7207(0x11b)],_0x291590=_0x1a063b[_0x4c7207(0x11b)],_0x16ee0a=await profile['findOne']({'email':_0x291590[_0x4c7207(0x141)]}),_0xb7e6a9={'year':_0x4c7207(0x160),'month':'long','day':_0x4c7207(0x160)},_0x4deda0=await master_shop[_0x4c7207(0xfd)]();console[_0x4c7207(0x9f)](_0x4c7207(0x15e),_0x4deda0);const _0x29c729=await product[_0x4c7207(0xfd)]();console['log'](_0x4c7207(0xf6),_0x29c729);const _0x4a34a5=await warehouse[_0x4c7207(0x100)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x4c7207(0xd8),'localField':'product_details.product_name','foreignField':_0x4c7207(0x13c),'as':_0x4c7207(0xd1)}},{'$unwind':_0x4c7207(0x129)},{'$project':{'product_name':_0x4c7207(0x146),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x4c7207(0xc9),'product_stock':{'$sum':_0x4c7207(0xa3)}}}]);console['log'](_0x4c7207(0xc8),_0x4a34a5),_0x4a34a5[_0x4c7207(0x150)](_0x4640e9=>{const _0x19ca8e=_0x29c729['map'](_0x111408=>{const _0x1ea659=a0_0x4b19;_0x111408[_0x1ea659(0x13c)]==_0x4640e9[_0x1ea659(0x119)]&&(_0x111408['stock']=parseInt(_0x111408['stock'])+parseInt(_0x4640e9[_0x1ea659(0x11a)]));});}),console['log'](_0x4c7207(0xf6),_0x29c729);if(_0x4deda0[0x0][_0x4c7207(0x11d)]=='English\x20(US)')var _0x16c98a=users['English'];else{if(_0x4deda0[0x0][_0x4c7207(0x11d)]=='Hindi')var _0x16c98a=users[_0x4c7207(0x11f)];else{if(_0x4deda0[0x0]['language']=='German')var _0x16c98a=users[_0x4c7207(0xc1)];else{if(_0x4deda0[0x0][_0x4c7207(0x11d)]==_0x4c7207(0xe3))var _0x16c98a=users[_0x4c7207(0xe3)];else{if(_0x4deda0[0x0][_0x4c7207(0x11d)]==_0x4c7207(0xbb))var _0x16c98a=users['French'];else{if(_0x4deda0[0x0][_0x4c7207(0x11d)]==_0x4c7207(0xce))var _0x16c98a=users['Portuguese'];else{if(_0x4deda0[0x0]['language']==_0x4c7207(0x12d))var _0x16c98a=users[_0x4c7207(0x12d)];else{if(_0x4deda0[0x0]['language']==_0x4c7207(0xe4))var _0x16c98a=users['Arabic'];}}}}}}}_0x13985e[_0x4c7207(0x10c)](_0x4c7207(0xd8),{'success':_0x1a063b[_0x4c7207(0x107)]('success'),'errors':_0x1a063b[_0x4c7207(0x107)](_0x4c7207(0xac)),'alldata':_0x29c729,'profile':_0x16ee0a,'master_shop':_0x4deda0,'role':_0x291590,'product_stock':_0x4a34a5,'language':_0x16c98a});}catch(_0x2316dc){console[_0x4c7207(0x9f)](_0x2316dc);}}),router['get']('/view/add_products',auth,async(_0x2be386,_0x1e180f)=>{const _0x4d60d7=a0_0x12c21a;try{const {username:_0x941ce1,email:_0x589f79,role:_0x1ebe77}=_0x2be386[_0x4d60d7(0x11b)],_0x2bc35b=_0x2be386[_0x4d60d7(0x11b)],_0x146a20=await profile[_0x4d60d7(0x153)]({'email':_0x2bc35b[_0x4d60d7(0x141)]}),_0x2f5b70=await master_shop[_0x4d60d7(0xfd)]();console[_0x4d60d7(0x9f)](_0x4d60d7(0x14f),_0x2f5b70);const _0x217bf3=await categories['find']({}),_0x1241a8=await brands[_0x4d60d7(0xfd)]({}),_0x4e288b=await units[_0x4d60d7(0xfd)]({}),_0x375593=await warehouse[_0x4d60d7(0xfd)]({'status':'Enabled'});if(_0x2f5b70[0x0]['language']==_0x4d60d7(0xa4))var _0x30e8ff=users[_0x4d60d7(0xe6)];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]==_0x4d60d7(0x11f))var _0x30e8ff=users[_0x4d60d7(0x11f)];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]=='German')var _0x30e8ff=users[_0x4d60d7(0xc1)];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]==_0x4d60d7(0xe3))var _0x30e8ff=users['Spanish'];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]==_0x4d60d7(0xbb))var _0x30e8ff=users['French'];else{if(_0x2f5b70[0x0]['language']==_0x4d60d7(0xce))var _0x30e8ff=users[_0x4d60d7(0x123)];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]==_0x4d60d7(0x12d))var _0x30e8ff=users['Chinese'];else{if(_0x2f5b70[0x0][_0x4d60d7(0x11d)]==_0x4d60d7(0xe4))var _0x30e8ff=users['Arabic'];}}}}}}}_0x1e180f[_0x4d60d7(0x10c)](_0x4d60d7(0x122),{'success':_0x2be386[_0x4d60d7(0x107)](_0x4d60d7(0x106)),'errors':_0x2be386[_0x4d60d7(0x107)](_0x4d60d7(0xac)),'role':_0x2bc35b,'profile':_0x146a20,'categories':_0x217bf3,'brands':_0x1241a8,'master_shop':_0x2f5b70,'units':_0x4e288b,'language':_0x30e8ff,'find_data':_0x375593});}catch(_0x3ab589){console[_0x4d60d7(0x9f)](_0x3ab589);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xc6),auth,upload[a0_0x12c21a(0xe5)](a0_0x12c21a(0x127)),async(_0x5730fc,_0x5a2cc8)=>{const _0x429f70=a0_0x12c21a;try{const {name:_0x20f235,category:_0x34cded,brand:_0x3587ee,unit:_0x5d98bf,alertquantity:_0x1e26f1,stock:_0x1f14b5,product_code:_0x1c897b,warehouse:_0x28294b,primary_ItemCode:_0x599b89,second_ItemCode:_0x2383e6,second_unit:_0x1a200f,maxPerUnit:_0x67a8f6,MaxPerProduct:_0x73ae63}=_0x5730fc[_0x429f70(0x103)],_0x20810f=_0x5730fc[_0x429f70(0xd3)]?.[_0x429f70(0x135)]||_0x429f70(0xb0),_0x532f89=new product({'image':_0x20810f,'name':_0x20f235,'category':_0x34cded,'brand':_0x3587ee,'unit':_0x5d98bf,'alertquantity':_0x1e26f1,'stock':_0x1f14b5,'product_code':_0x1c897b,'warehouse':_0x28294b,'primary_code':_0x599b89,'secondary_code':_0x2383e6,'second_unit':_0x1a200f,'maxStocks':_0x73ae63,'maxProdPerUnit':_0x67a8f6}),_0x378f0e=await _0x532f89['save'](),_0x8721cb=await categories[_0x429f70(0x153)]({'name':_0x34cded});_0x8721cb['products']=parseInt(_0x8721cb[_0x429f70(0xd8)])+0x1,await _0x8721cb[_0x429f70(0x111)]();const _0x36d58b=await brands[_0x429f70(0x153)]({'name':_0x3587ee});_0x36d58b[_0x429f70(0xd8)]=parseInt(_0x36d58b[_0x429f70(0xd8)])+0x1,await _0x36d58b[_0x429f70(0x111)]();const _0xe69aa0=await units['findOne']({'name':_0x5d98bf});_0xe69aa0[_0x429f70(0xd8)]=parseInt(_0xe69aa0[_0x429f70(0xd8)])+0x1,await _0xe69aa0[_0x429f70(0x111)](),_0x5730fc[_0x429f70(0x107)](_0x429f70(0x106),_0x429f70(0xe8)),_0x5a2cc8[_0x429f70(0xb1)](_0x429f70(0x10b));}catch(_0x3be5d9){console[_0x429f70(0x9f)](_0x3be5d9);}}),router[a0_0x12c21a(0xd7)]('/view/:id',auth,async(_0x410a42,_0x181567)=>{const _0x55002f=a0_0x12c21a;try{const {username:_0x1043fc,email:_0x18108d,role:_0x493299}=_0x410a42[_0x55002f(0x11b)],_0x308aff=_0x410a42[_0x55002f(0x11b)],_0x2ed6a6=await profile[_0x55002f(0x153)]({'email':_0x308aff[_0x55002f(0x141)]}),_0x505886=await master_shop['find']();console[_0x55002f(0x9f)](_0x55002f(0x159),_0x505886);const _0x4b27a8=_0x410a42['params']['id'],_0x2b302f=await product[_0x55002f(0x109)](_0x4b27a8),_0x407380=await categories[_0x55002f(0xfd)]({}),_0x105fb0=await brands[_0x55002f(0xfd)]({}),_0xba4aba=await units[_0x55002f(0xfd)]({}),_0x4a0de4=await warehouse[_0x55002f(0xfd)]({'status':_0x55002f(0x101)}),_0x41d521=await units[_0x55002f(0x100)]([{'$group':{'_id':_0x55002f(0xb5),'secondaryunit':{'$first':_0x55002f(0x13d)}}}]);if(_0x505886[0x0][_0x55002f(0x11d)]=='English\x20(US)')var _0x4fcf12=users['English'];else{if(_0x505886[0x0]['language']==_0x55002f(0x11f))var _0x4fcf12=users[_0x55002f(0x11f)];else{if(_0x505886[0x0][_0x55002f(0x11d)]=='German')var _0x4fcf12=users[_0x55002f(0xc1)];else{if(_0x505886[0x0][_0x55002f(0x11d)]=='Spanish')var _0x4fcf12=users[_0x55002f(0xe3)];else{if(_0x505886[0x0]['language']=='French')var _0x4fcf12=users[_0x55002f(0xbb)];else{if(_0x505886[0x0][_0x55002f(0x11d)]==_0x55002f(0xce))var _0x4fcf12=users[_0x55002f(0x123)];else{if(_0x505886[0x0][_0x55002f(0x11d)]==_0x55002f(0x12d))var _0x4fcf12=users[_0x55002f(0x12d)];else{if(_0x505886[0x0][_0x55002f(0x11d)]==_0x55002f(0xe4))var _0x4fcf12=users['Arabic'];}}}}}}}_0x181567[_0x55002f(0x10c)](_0x55002f(0x115),{'success':_0x410a42[_0x55002f(0x107)](_0x55002f(0x106)),'errors':_0x410a42[_0x55002f(0x107)](_0x55002f(0xac)),'role':_0x308aff,'profile':_0x2ed6a6,'alldata':_0x2b302f,'categories':_0x407380,'brands':_0x105fb0,'master_shop':_0x505886,'units':_0xba4aba,'secondunit':_0x41d521,'find_data':_0x4a0de4,'language':_0x4fcf12});}catch(_0x3cd580){console[_0x55002f(0x9f)](_0x3cd580);}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xbc),auth,upload[a0_0x12c21a(0xe5)](a0_0x12c21a(0x127)),async(_0x10957e,_0x41e6e1)=>{const _0x78c45f=a0_0x12c21a;try{console[_0x78c45f(0x9f)](_0x78c45f(0x149));const _0x2dc84c=_0x10957e[_0x78c45f(0xc0)]['id'],_0x16f763=await product[_0x78c45f(0x109)](_0x2dc84c),{image:_0x113423,name:_0x398014,category:_0x1ec892,brand:_0x55b129,sku:_0x360bc7,unit:_0x4aed0b,alertquantity:_0x528034,product_code:_0x34f31e,warehouse:_0x37764a,primary_ItemCode:_0x2b1351,second_ItemCode:_0xf4d722,second_unit:_0x3221e7,maxPerUnit:_0x127718,MaxPerProduct:_0x42fbd5,prod_catdata:_0x4f0faf}=_0x10957e[_0x78c45f(0x103)];_0x10957e[_0x78c45f(0xd3)]&&(_0x16f763['image']=_0x10957e[_0x78c45f(0xd3)]['filename']);_0x16f763[_0x78c45f(0x13c)]=_0x398014,_0x16f763[_0x78c45f(0x114)]=_0x1ec892,_0x16f763[_0x78c45f(0xf0)]=_0x55b129,_0x16f763[_0x78c45f(0xee)]=_0x360bc7,_0x16f763[_0x78c45f(0xa9)]=_0x4aed0b,_0x16f763['alertquantity']=_0x528034,_0x16f763[_0x78c45f(0xf3)]=_0x34f31e,_0x16f763[_0x78c45f(0xf4)]=_0x37764a,_0x16f763[_0x78c45f(0x12e)]=_0x2b1351,_0x16f763[_0x78c45f(0x108)]=_0xf4d722,_0x16f763[_0x78c45f(0x9e)]=_0x3221e7,_0x16f763[_0x78c45f(0xfb)]=_0x42fbd5,_0x16f763['maxProdPerUnit']=_0x127718,_0x16f763[_0x78c45f(0x10a)]=_0x4f0faf;const _0x4c4c03=await _0x16f763[_0x78c45f(0x111)]();console['log']('product\x20edit',_0x16f763),_0x10957e[_0x78c45f(0x107)](_0x78c45f(0x106),'product\x20update\x20successfully'),_0x41e6e1['redirect']('/products/view');}catch(_0x2af860){console[_0x78c45f(0x9f)](_0x2af860);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0xf2),auth,async(_0x3fae2a,_0x26d3d8)=>{const _0x3236d8=a0_0x12c21a;try{const {username:_0x236f22,email:_0x73a144,role:_0x13ea03}=_0x3fae2a[_0x3236d8(0x11b)],_0x3ee7bb=_0x3fae2a[_0x3236d8(0x11b)],_0x612949=await profile[_0x3236d8(0x153)]({'email':_0x3ee7bb[_0x3236d8(0x141)]}),_0x187e49=await master_shop[_0x3236d8(0xfd)]();console[_0x3236d8(0x9f)]('barcode\x20Product\x20master',_0x187e49);const _0x3ad6e6=_0x3fae2a[_0x3236d8(0xc0)]['id'],_0x533b81=await product[_0x3236d8(0x109)](_0x3ad6e6);console[_0x3236d8(0x9f)](_0x3236d8(0x133),_0x533b81);if(_0x187e49[0x0][_0x3236d8(0x11d)]==_0x3236d8(0xa4))var _0x3090f8=users['English'];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]=='Hindi')var _0x3090f8=users[_0x3236d8(0x11f)];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]==_0x3236d8(0xc1))var _0x3090f8=users[_0x3236d8(0xc1)];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]=='Spanish')var _0x3090f8=users['Spanish'];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]=='French')var _0x3090f8=users['French'];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]==_0x3236d8(0xce))var _0x3090f8=users['Portuguese'];else{if(_0x187e49[0x0]['language']==_0x3236d8(0x12d))var _0x3090f8=users[_0x3236d8(0x12d)];else{if(_0x187e49[0x0][_0x3236d8(0x11d)]==_0x3236d8(0xe4))var _0x3090f8=users[_0x3236d8(0x14b)];}}}}}}}_0x26d3d8[_0x3236d8(0x10c)]('product_barcode',{'success':_0x3fae2a[_0x3236d8(0x107)](_0x3236d8(0x106)),'errors':_0x3fae2a[_0x3236d8(0x107)](_0x3236d8(0xac)),'role':_0x3ee7bb,'profile':_0x612949,'alldata':_0x533b81,'master_shop':_0x187e49,'language':_0x3090f8});}catch(_0x4b123d){console[_0x3236d8(0x9f)](_0x4b123d);}}),router[a0_0x12c21a(0xd7)](a0_0x12c21a(0xe1),auth,async(_0x569736,_0x470da5)=>{const _0x474ec1=a0_0x12c21a;try{const _0xc56b8e=new excelJS[(_0x474ec1(0xdc))](),_0x3afc62=_0xc56b8e[_0x474ec1(0xda)](_0x474ec1(0x152));return _0x3afc62[_0x474ec1(0x155)]=[{'header':_0x474ec1(0xb7),'key':_0x474ec1(0xa5),'width':0xa},{'header':_0x474ec1(0x104),'key':_0x474ec1(0x147),'width':0xa},{'header':_0x474ec1(0x12f),'key':_0x474ec1(0xd9),'width':0xa},{'header':_0x474ec1(0x134),'key':'PSecondaryUnits','width':0xa},{'header':_0x474ec1(0x126),'key':_0x474ec1(0x148),'width':0xa},{'header':_0x474ec1(0xb9),'key':'ProductCode','width':0xa},{'header':_0x474ec1(0xa8),'key':_0x474ec1(0xcc),'width':0xa},{'header':_0x474ec1(0x121),'key':_0x474ec1(0xcc),'width':0xa},{'header':_0x474ec1(0x15d),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x474ec1(0xb6),'width':0xa},{'header':_0x474ec1(0xd0),'key':_0x474ec1(0xb6),'width':0xa},{'header':_0x474ec1(0xaf),'key':_0x474ec1(0xdb),'width':0xa}],_0x470da5[_0x474ec1(0xf5)](_0x474ec1(0x136),_0x474ec1(0x13a)),_0x470da5['setHeader'](_0x474ec1(0x11c),_0x474ec1(0x113)),_0xc56b8e['xlsx'][_0x474ec1(0xb3)](_0x470da5)[_0x474ec1(0xba)](()=>{_0x470da5['status'](0xc8);});}catch(_0x51db75){_0x470da5[_0x474ec1(0x15c)](0x190)[_0x474ec1(0xbf)](_0x51db75);}});function a0_0x1962(){const _0x3fe821=['hello','diskStorage','Arabic','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','SheetNames','sheet_to_json','master','forEach','1235500XCkrmb','Products','findOne','4XiXCBy','columns','product_barcode_products','express/lib/response','categories','edit\x20Product\x20master','/products_import_migrate_file','prod_categ','status','Category','Products\x20master','brands','numeric','Raw\x20Materials','\x20brand\x20is\x20add\x20successfully','/categories/:id','secondary_unit','log','bind','toString','../models/all_models','$product_stock','English\x20(US)','PName','brand\x20data\x20delete\x20successfully','58657ngqORh','Secondary_Code','unit','xlsx','public/Migration/','errors','categ','readFile','Products_category','defaultProduct.avif','redirect','/categories','write','pdfkit-table','$_id','PAlQty','Product_Name','5AGtlzl','Primary_Code','then','French','/view/:id','/units','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','send','params','German','alertquantity','3160veSgob','units','maxProdPerUnit','/view/add_products','/filter_product','Products\x20warehouse_data','$product_name','/units/:id','findByIdAndUpdate','ProductCode','51nUXjlQ','Portuguese\x20(BR)','../middleware/auth','Maximum_Stocks','product_docs','height','file','445709TADcWb','end','72188aamTkP','get','products','PUnits','addWorksheet','Prod_Cat','Workbook','$brand','exports','27PSobRB','brand\x20data\x20update\x20successfully','/products_export_migrate_file','$category','Spanish','Arabic\x20(ae)','single','English','\x20added\x20successfully','product\x20add\x20successfully','originalname','/products/brands','canvas','min','CODE128','sku','/brands','brand','toBuffer','/barcode/:id','product_code','warehouse','setHeader','Products\x20find_data','/barcode_filter','now','addPage','\x20<>\x20','maxStocks','post','find','concat','/select_data','aggregate','Enabled','exceljs','body','Brands','Finished\x20Goods','success','flash','secondary_code','findById','product_category','/products/view','render','data','Alert_QTY','public/Migration','length','save','/categories/delete/:id','attachment;\x20filename=Product_Migration_File.xlsx','category','edit_product','12fsAIdq','/print_barcode_filter_search/','/print_barcode','_id','product_stock','user','Content-Disposition','language','findByIdAndDelete','Hindi','\x20unit\x20is\x20add\x20successfully','Product_Code','add_product','Portuguese','/view','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','max_number_per_units','image','/units/delete/:id','$product_docs','express','base64','width','Chinese','primary_code','Units','/products/units','/brands/delete/:id','/brands/:id','barcode\x20user_id','Secondary_Units','filename','Content-Type','\x20categories\x20is\x20add\x20successfully','Sheets','utils','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','message','name','$secondary_unit','public/upload','2914415tapUWl','/barcode_data','email','json','828576KpepMz','push','/products/categories','$product_details.product_name','PBrands','MaxperUnits'];a0_0x1962=function(){return _0x3fe821;};return a0_0x1962();}const storage1=multer[a0_0x12c21a(0x14a)]({'destination':(_0x4ba427,_0x316e85,_0x1bdebc)=>{const _0x48be9c=a0_0x12c21a;_0x1bdebc(null,_0x48be9c(0x10f));},'filename':(_0x369be8,_0x40bcbe,_0x8d4fd9)=>{const _0x561924=a0_0x12c21a;_0x8d4fd9(null,Date[_0x561924(0xf8)]()+_0x40bcbe[_0x561924(0xe9)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x12c21a(0xfc)](a0_0x12c21a(0x15a),auth,uploadMigrate['single']('migrate_product_fule'),async(_0x5526c5,_0x188837)=>{const _0x5048a4=a0_0x12c21a,_0x1c87c1=_0x5526c5['file'][_0x5048a4(0x135)],_0x5393e5=await xlsx[_0x5048a4(0xae)](_0x5048a4(0xab)+_0x1c87c1);let _0x762d50=_0x5393e5[_0x5048a4(0x14d)],_0x21334f=xlsx[_0x5048a4(0x139)][_0x5048a4(0x14e)](_0x5393e5[_0x5048a4(0x138)][_0x762d50[0x0]]);for(const _0x219f77 of _0x21334f){const _0xc8f9e7=_0x219f77[_0x5048a4(0xb7)],_0x501813=_0x219f77[_0x5048a4(0x104)],_0x4cf1bc=_0x219f77['Units'],_0x2e43c1=_0x219f77[_0x5048a4(0x134)],_0x4c0a65=_0x219f77[_0x5048a4(0x121)],_0x4f29b2=_0x219f77[_0x5048a4(0x15d)],_0x4f921d=_0x219f77[_0x5048a4(0x10e)],_0xfd4c9d=_0x219f77['Primary_Code'],_0x237d6f=_0x219f77['Secondary_Code'],_0x41a394=_0x219f77[_0x5048a4(0xd0)],_0xf008bd=_0x219f77[_0x5048a4(0x126)],_0x46f1e6=_0x219f77[_0x5048a4(0xaf)];try{let _0x9a22ea=await categories['findOne']({'name':_0x4f29b2});if(!_0x9a22ea){const _0x314d3e=new categories({'name':_0x4f29b2,'products':'0'});_0x9a22ea=await _0x314d3e[_0x5048a4(0x111)]();}let _0x2439b6=await brands[_0x5048a4(0x153)]({'name':_0x501813});if(!_0x2439b6){const _0x3f4176=new brands({'name':_0x501813,'products':'0'});_0x2439b6=await _0x3f4176[_0x5048a4(0x111)]();}let _0x44fb6a=await units[_0x5048a4(0x153)]({'name':_0x4cf1bc,'secondary_unit':_0x2e43c1});if(!_0x44fb6a){const _0x638af1=new units({'name':_0x4cf1bc,'secondary_unit':_0x2e43c1,'products':'0'});_0x44fb6a=await _0x638af1[_0x5048a4(0x111)]();}const _0x1f1489=await product['find']({'name':_0xc8f9e7,'category':_0x9a22ea[_0x5048a4(0x13c)],'brand':_0x2439b6['name'],'secondary_unit':_0x44fb6a[_0x5048a4(0x9e)],'product_code':_0x4c0a65});console[_0x5048a4(0x9f)](_0x1f1489[_0x5048a4(0x110)]+_0x5048a4(0xfa)+_0x9a22ea[_0x5048a4(0x13c)]+'\x20<>\x20'+_0x2439b6['name']+'\x20<>\x20'+_0x44fb6a[_0x5048a4(0x9e)]+_0x5048a4(0xfa)+_0x4c0a65+_0x5048a4(0xfa)+_0xc8f9e7);if(_0x1f1489['length']===0x0){const _0x378338=new product({'image':_0x5048a4(0xb0),'name':_0xc8f9e7,'category':_0x9a22ea[_0x5048a4(0x13c)],'brand':_0x2439b6[_0x5048a4(0x13c)],'unit':_0x44fb6a['name'],'alertquantity':_0x4f921d,'product_code':_0x4c0a65,'secondary_unit':_0x44fb6a['secondary_unit'],'primary_code':_0xfd4c9d,'secondary_code':_0x237d6f,'maxStocks':_0x41a394,'maxProdPerUnit':_0xf008bd,'product_category':_0x46f1e6}),_0x5d0b00=await _0x378338[_0x5048a4(0x111)]();_0x9a22ea['products']=parseInt(_0x9a22ea[_0x5048a4(0xd8)])+0x1,await _0x9a22ea[_0x5048a4(0x111)](),_0x2439b6[_0x5048a4(0xd8)]=parseInt(_0x2439b6[_0x5048a4(0xd8)])+0x1,await _0x2439b6['save'](),_0x44fb6a['products']=parseInt(_0x44fb6a[_0x5048a4(0xd8)])+0x1,await _0x44fb6a[_0x5048a4(0x111)](),_0x5526c5['flash'](_0x5048a4(0x106),_0xc8f9e7+_0x5048a4(0xe7));}else{console[_0x5048a4(0x9f)](_0x1f1489[0x0]);const _0x3921ee=_0x1f1489[0x0];_0x3921ee[_0x5048a4(0x114)]=_0x9a22ea[_0x5048a4(0x13c)],_0x3921ee['brand']=_0x2439b6[_0x5048a4(0x13c)],_0x3921ee[_0x5048a4(0xa9)]=_0x44fb6a[_0x5048a4(0x13c)],_0x3921ee[_0x5048a4(0xc2)]=_0x4f921d,_0x3921ee[_0x5048a4(0xf3)]=_0x4c0a65,_0x3921ee[_0x5048a4(0x9e)]=_0x44fb6a[_0x5048a4(0x9e)],_0x3921ee[_0x5048a4(0x12e)]=_0xfd4c9d,_0x3921ee['secondary_code']=_0x237d6f,_0x3921ee['maxStocks']=_0x41a394,_0x3921ee[_0x5048a4(0xc5)]=_0xf008bd,_0x3921ee['product_category']=_0x46f1e6;const _0x39913c=await _0x3921ee[_0x5048a4(0x111)]();_0x5526c5['flash'](_0x5048a4(0x106),_0x39913c[_0x5048a4(0x13c)]+'\x20Edit\x20Successfully');}}catch(_0x32da8a){_0x188837[_0x5048a4(0x15c)](0x1f4)[_0x5048a4(0x142)]({'proderror':_0x32da8a[_0x5048a4(0x13b)],'aproduct':_0xc8f9e7});}}_0x188837[_0x5048a4(0xb1)](_0x5048a4(0x10b));}),router['post'](a0_0x12c21a(0xff),auth,async(_0x216f4e,_0x568448)=>{const _0x1c60c9=a0_0x12c21a;try{console[_0x1c60c9(0x9f)](_0x216f4e['body']);const {data_cateory:_0x518de7,datachoose:_0x5d2f9d}=_0x216f4e[_0x1c60c9(0x103)];var _0x35c1cb;if(_0x5d2f9d==_0x1c60c9(0x15b))_0x35c1cb=await product[_0x1c60c9(0x100)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x5d2f9d=='brands')_0x35c1cb=await product[_0x1c60c9(0x100)]([{'$match':{'product_category':_0x518de7}},{'$group':{'_id':_0x1c60c9(0xdd)}}]);else _0x5d2f9d==_0x1c60c9(0xad)&&(_0x35c1cb=await product['aggregate']([{'$match':{'product_category':_0x518de7}},{'$group':{'_id':_0x1c60c9(0xe2)}}]));}_0x568448[_0x1c60c9(0x142)](_0x35c1cb);}catch(_0xa49187){_0x568448[_0x1c60c9(0x142)]({'message':_0xa49187[_0x1c60c9(0x13b)]});}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xc7),auth,async(_0x593f2b,_0x360729)=>{const _0x15c747=a0_0x12c21a;try{const {data_choosing:_0xa3c9bf,data_selected:_0x5581a0}=_0x593f2b['body'];var _0x45419d;if(_0xa3c9bf==_0x15c747(0x15b))_0x45419d=await product[_0x15c747(0x100)]([{'$match':{'product_category':_0x5581a0}}]);else{if(_0xa3c9bf==_0x15c747(0x15f))_0x45419d=await product[_0x15c747(0x100)]([{'$match':{'brand':_0x5581a0}}]);else _0xa3c9bf=='categ'&&(_0x45419d=await product[_0x15c747(0x100)]([{'$match':{'category':_0x5581a0}}]));}_0x360729[_0x15c747(0x142)](_0x45419d);}catch(_0x90676c){_0x360729[_0x15c747(0x142)]({'message':_0x90676c[_0x15c747(0x13b)]});}}),router['get'](a0_0x12c21a(0x118),auth,async(_0x250187,_0x4054d7)=>{const _0x39064e=a0_0x12c21a,_0x3571a4=_0x250187[_0x39064e(0x11b)],_0x298e60=await profile[_0x39064e(0x153)]({'email':_0x3571a4[_0x39064e(0x141)]}),_0x4870e2=await master_shop[_0x39064e(0xfd)](),_0x53c3d5=await product['find']();if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0xa4))var _0x11764d=users[_0x39064e(0xe6)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0x11f))var _0x11764d=users[_0x39064e(0x11f)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0xc1))var _0x11764d=users[_0x39064e(0xc1)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0xe3))var _0x11764d=users[_0x39064e(0xe3)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0xbb))var _0x11764d=users['French'];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]=='Portuguese\x20(BR)')var _0x11764d=users[_0x39064e(0x123)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0x12d))var _0x11764d=users[_0x39064e(0x12d)];else{if(_0x4870e2[0x0][_0x39064e(0x11d)]==_0x39064e(0xe4))var _0x11764d=users['Arabic'];}}}}}}}_0x4054d7['render'](_0x39064e(0x156),{'success':_0x250187[_0x39064e(0x107)](_0x39064e(0x106)),'errors':_0x250187[_0x39064e(0x107)](_0x39064e(0xac)),'role':_0x3571a4,'profile':_0x298e60,'products':_0x53c3d5,'master_shop':_0x4870e2,'language':_0x11764d});}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0x140),auth,async(_0x5933fa,_0xd49adc)=>{const _0x1a1742=a0_0x12c21a,_0x4d0abb=await product['find']();_0xd49adc[_0x1a1742(0x142)]({'data':_0x4d0abb});}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0xf7),auth,async(_0x3da4e6,_0x292af3)=>{const _0x2b9345=a0_0x12c21a;try{const {dataProdCat:_0x4aa5dd,dataProdIdentity:_0x5dc356}=_0x3da4e6[_0x2b9345(0x103)];var _0x262c54;switch(_0x4aa5dd){case'fg':switch(_0x5dc356){case'Brands':_0x262c54=await product[_0x2b9345(0x100)]([{'$match':{'product_category':_0x2b9345(0x105)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x2b9345(0xb5)}}]);break;case _0x2b9345(0x15d):_0x262c54=await product[_0x2b9345(0x100)]([{'$match':{'product_category':_0x2b9345(0x105)}},{'$group':{'_id':_0x2b9345(0xe2)}},{'$project':{'category':_0x2b9345(0xb5)}}]);break;}break;case'rm':switch(_0x5dc356){case _0x2b9345(0x104):_0x262c54=await product[_0x2b9345(0x100)]([{'$match':{'product_category':_0x2b9345(0x9b)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x2b9345(0xb5)}}]);break;case _0x2b9345(0x15d):_0x262c54=await product[_0x2b9345(0x100)]([{'$match':{'product_category':_0x2b9345(0x9b)}},{'$group':{'_id':_0x2b9345(0xe2)}},{'$project':{'category':_0x2b9345(0xb5)}}]);break;}break;}_0x292af3[_0x2b9345(0x142)](_0x262c54);}catch(_0x371908){_0x292af3['json']({'message':_0x371908[_0x2b9345(0x13b)]});}}),router[a0_0x12c21a(0xfc)]('/print_barcode_filter/',auth,async(_0x273a75,_0x4953a0)=>{const _0x419c9f=a0_0x12c21a;try{console[_0x419c9f(0x9f)](_0x273a75[_0x419c9f(0x103)]);const {prod_cat:_0x5c7fc3,identity:_0x1f2d65,valueData:_0x554fc2,typeofbarcode:_0x87d9f9}=_0x273a75[_0x419c9f(0x103)];let _0x4e1daf;switch(_0x5c7fc3){case'fg':if(_0x1f2d65==_0x419c9f(0x104))_0x4e1daf=await product['aggregate']([{'$match':{'product_category':_0x419c9f(0x105),'brand':_0x554fc2}}]);else _0x1f2d65==_0x419c9f(0x15d)&&(_0x4e1daf=await product[_0x419c9f(0x100)]([{'$match':{'product_category':_0x419c9f(0x105),'category':_0x554fc2}}]));break;case'rm':if(_0x1f2d65==_0x419c9f(0x104))_0x4e1daf=await product[_0x419c9f(0x100)]([{'$match':{'product_category':_0x419c9f(0x9b),'brand':_0x554fc2}}]);else _0x1f2d65==_0x419c9f(0x15d)&&(_0x4e1daf=await product[_0x419c9f(0x100)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x554fc2}}]));break;}const _0x1419ed=_0x4032bf=>_0x4032bf*0x48,_0x578f50={'width':0x3,'height':0x1},_0x581666=new PDFDocument({'margin':_0x1419ed(0.75),'size':[_0x1419ed(_0x578f50[_0x419c9f(0x12c)]),_0x1419ed(_0x578f50[_0x419c9f(0xd2)])],'bufferPages':!![]}),_0x1077f3=_0x4e1daf[_0x419c9f(0x110)];for(let _0x5dd51d=0x0;_0x5dd51d<=_0x1077f3;_0x5dd51d++){if(_0x5dd51d!=_0x1077f3){const _0x3d457f=_0x4e1daf[_0x5dd51d][_0x419c9f(0x13c)],_0x39356c=_0x4e1daf[_0x5dd51d]['primary_code'],_0x7abe46=_0x4e1daf[_0x5dd51d][_0x419c9f(0x108)],_0x5c6bd9=_0x4e1daf[_0x5dd51d][_0x419c9f(0xf3)];var _0xa28bb8;switch(_0x87d9f9){case'1':_0xa28bb8=_0x39356c;break;case'2':_0xa28bb8=_0x7abe46;break;case'3':_0xa28bb8=_0x5c6bd9;break;}const _0xe02d4d={'width':0xd2,'height':0x64},_0x58186f={'width':_0x1419ed(_0x578f50[_0x419c9f(0x12c)]),'height':_0x1419ed(_0x578f50['height'])},_0xb00dbf=new Canvas();JsBarcode(_0xb00dbf,_0xa28bb8,{'format':_0x419c9f(0xed),'height':_0xe02d4d[_0x419c9f(0xd2)],'displayValue':!![],'text':_0xa28bb8});const _0x4ff33f=_0xb00dbf[_0x419c9f(0xf1)](),_0x10eb0b=_0x58186f[_0x419c9f(0x12c)]/_0xe02d4d['width'],_0x3d296b=_0x58186f[_0x419c9f(0xd2)]/_0xe02d4d[_0x419c9f(0xd2)],_0x41b5d8=Math[_0x419c9f(0xec)](_0x10eb0b,_0x3d296b),_0x18fef1=_0xe02d4d[_0x419c9f(0x12c)]*_0x41b5d8,_0x5a0af3=_0xe02d4d[_0x419c9f(0xd2)]*_0x41b5d8,_0x3172a0=(_0x58186f['width']-_0x18fef1)/0x2,_0x26980c=(_0x58186f[_0x419c9f(0xd2)]-_0x5a0af3)/0x2;_0x581666[_0x419c9f(0x127)](_0x4ff33f,_0x3172a0,_0x26980c,{'width':_0x18fef1,'height':_0x5a0af3}),_0x5dd51d!=_0x1077f3&&_0x581666[_0x419c9f(0xf9)]();}}const _0x471f0f=[];_0x581666['on'](_0x419c9f(0x10d),_0x471f0f[_0x419c9f(0x144)][_0x419c9f(0xa0)](_0x471f0f)),_0x581666['on'](_0x419c9f(0xd5),()=>{const _0x3d1626=_0x419c9f,_0x2482cb=Buffer[_0x3d1626(0xfe)](_0x471f0f),_0x28c59b=_0x2482cb[_0x3d1626(0xa1)]('base64');_0x4953a0['json']({'pdfContent':_0x28c59b});}),_0x581666['end']();}catch(_0x95d504){_0x4953a0[_0x419c9f(0x142)]({'message':_0x95d504['message']});}}),router[a0_0x12c21a(0xfc)](a0_0x12c21a(0x117),auth,async(_0x4bc924,_0x32645d)=>{const _0x4a70df=a0_0x12c21a;try{console['log'](_0x4bc924[_0x4a70df(0x103)]);const {prod_cat:_0x541411,identity:_0x478d89,valueData:_0x2b48c2}=_0x4bc924[_0x4a70df(0x103)];let _0x11cc6f;switch(_0x541411){case'fg':if(_0x478d89==_0x4a70df(0x104))_0x11cc6f=await product[_0x4a70df(0x100)]([{'$match':{'product_category':_0x4a70df(0x105),'brand':_0x2b48c2}}]);else _0x478d89==_0x4a70df(0x15d)&&(_0x11cc6f=await product[_0x4a70df(0x100)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x2b48c2}}]));break;case'rm':if(_0x478d89==_0x4a70df(0x104))_0x11cc6f=await product[_0x4a70df(0x100)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x2b48c2}}]);else _0x478d89==_0x4a70df(0x15d)&&(_0x11cc6f=await product[_0x4a70df(0x100)]([{'$match':{'product_category':_0x4a70df(0x9b),'category':_0x2b48c2}}]));break;}_0x32645d['json']({'data':_0x11cc6f});}catch(_0x7047b1){_0x32645d[_0x4a70df(0x142)]({'message':_0x7047b1['message']});}}),router[a0_0x12c21a(0xfc)]('/print_barcode_single/:id',auth,async(_0x22d78e,_0x194518)=>{const _0x30879b=a0_0x12c21a;try{const _0x2653e9=_0x22d78e[_0x30879b(0xc0)]['id'],{copies:_0xaf7bbf,typeofbarcode:_0x57d3fb}=_0x22d78e[_0x30879b(0x103)];var _0x174ba7=await product[_0x30879b(0x109)](_0x2653e9);const _0x14d5fa=_0x1b5f68=>_0x1b5f68*0x48,_0x17712f={'width':0x3,'height':0x1},_0xdf9eee=new PDFDocument({'margin':_0x14d5fa(0.75),'size':[_0x14d5fa(_0x17712f[_0x30879b(0x12c)]),_0x14d5fa(_0x17712f[_0x30879b(0xd2)])],'bufferPages':!![]}),_0x5cd87e=_0xaf7bbf,_0x265307=_0x174ba7['name'],_0x332960=_0x174ba7['primary_code'],_0x44b782=_0x174ba7[_0x30879b(0x108)],_0x32ac6c=_0x174ba7[_0x30879b(0xf3)];let _0x48af8d;switch(_0x57d3fb){case'1':_0x48af8d=_0x332960;break;case'2':_0x48af8d=_0x44b782;break;case'3':_0x48af8d=_0x32ac6c;break;}const _0x1a7694={'width':0xd2,'height':0x64},_0x3300dd={'width':_0x14d5fa(_0x17712f[_0x30879b(0x12c)]),'height':_0x14d5fa(_0x17712f[_0x30879b(0xd2)])};for(let _0x34356d=0x1;_0x34356d<=_0x5cd87e;_0x34356d++){const _0x1a4b87=new Canvas();JsBarcode(_0x1a4b87,_0x48af8d,{'format':_0x30879b(0xed),'height':_0x1a7694[_0x30879b(0xd2)],'displayValue':!![],'text':_0x48af8d});const _0x29d4d5=_0x1a4b87['toBuffer'](),_0x41fa8a=_0x3300dd[_0x30879b(0x12c)]/_0x1a7694[_0x30879b(0x12c)],_0x46c2f5=_0x3300dd[_0x30879b(0xd2)]/_0x1a7694[_0x30879b(0xd2)],_0x2b4c4a=Math[_0x30879b(0xec)](_0x41fa8a,_0x46c2f5),_0x247926=_0x1a7694['width']*_0x2b4c4a,_0x2e7f78=_0x1a7694[_0x30879b(0xd2)]*_0x2b4c4a,_0x26d883=(_0x3300dd[_0x30879b(0x12c)]-_0x247926)/0x2,_0x170156=(_0x3300dd['height']-_0x2e7f78)/0x2;_0xdf9eee['image'](_0x29d4d5,_0x26d883,_0x170156,{'width':_0x247926,'height':_0x2e7f78}),_0x34356d!=_0x5cd87e&&_0xdf9eee[_0x30879b(0xf9)]();}const _0x460784=[];_0xdf9eee['on'](_0x30879b(0x10d),_0x460784['push'][_0x30879b(0xa0)](_0x460784)),_0xdf9eee['on'](_0x30879b(0xd5),()=>{const _0x50fdd5=_0x30879b,_0x28c385=Buffer['concat'](_0x460784),_0x103e78=_0x28c385[_0x50fdd5(0xa1)](_0x50fdd5(0x12b));_0x194518[_0x50fdd5(0x142)]({'pdfContent':_0x103e78});}),_0xdf9eee[_0x30879b(0xd5)]();}catch(_0x45abe6){_0x194518['json']({'message':_0x45abe6[_0x30879b(0x13b)]});}}),module[a0_0x12c21a(0xde)]=router;