const a0_0x1914a3=a0_0x5103;function a0_0x5103(_0x3be847,_0x54b917){const _0x41e1b9=a0_0x41e1();return a0_0x5103=function(_0x51039e,_0x49abcf){_0x51039e=_0x51039e-0xc8;let _0x1443f9=_0x41e1b9[_0x51039e];return _0x1443f9;},a0_0x5103(_0x3be847,_0x54b917);}(function(_0x13cb8c,_0x447ac6){const _0x23f77a=a0_0x5103,_0x1fca73=_0x13cb8c();while(!![]){try{const _0x4d784b=-parseInt(_0x23f77a(0xd8))/0x1+-parseInt(_0x23f77a(0x12c))/0x2+parseInt(_0x23f77a(0x17e))/0x3+-parseInt(_0x23f77a(0x117))/0x4*(-parseInt(_0x23f77a(0xe0))/0x5)+-parseInt(_0x23f77a(0x12d))/0x6+parseInt(_0x23f77a(0x16f))/0x7+parseInt(_0x23f77a(0x10b))/0x8;if(_0x4d784b===_0x447ac6)break;else _0x1fca73['push'](_0x1fca73['shift']());}catch(_0x3e6fbc){_0x1fca73['push'](_0x1fca73['shift']());}}}(a0_0x41e1,0x98c6a));const express=require(a0_0x1914a3(0x17c)),res=require(a0_0x1914a3(0x112)),app=express(),router=express['Router'](),multer=require(a0_0x1914a3(0xd3)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x1914a3(0xf0)),excelJS=require(a0_0x1914a3(0x118)),xlsx=require(a0_0x1914a3(0x14f)),JsBarcode=require(a0_0x1914a3(0x164)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x1914a3(0xcc));router['get'](a0_0x1914a3(0x17d),auth,async(_0x35a43b,_0x1c938d)=>{const _0x27c579=a0_0x1914a3;try{const {username:_0x2bce9e,email:_0x2ff2eb,role:_0xa85c70}=_0x35a43b['user'],_0x5bbbb9=_0x35a43b['user'],_0x5e3a05=await profile[_0x27c579(0xd0)]({'email':_0x5bbbb9[_0x27c579(0x170)]}),_0x3157cb=await master_shop[_0x27c579(0xe3)]();console[_0x27c579(0x104)](_0x27c579(0xf4),_0x3157cb);const _0x85fdbc=await categories[_0x27c579(0xe3)]();if(_0x3157cb[0x0][_0x27c579(0x11c)]==_0x27c579(0x125))var _0x36e254=users[_0x27c579(0x121)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]==_0x27c579(0xe5))var _0x36e254=users[_0x27c579(0xe5)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]==_0x27c579(0x109))var _0x36e254=users[_0x27c579(0x109)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]==_0x27c579(0x14c))var _0x36e254=users[_0x27c579(0x14c)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]==_0x27c579(0x151))var _0x36e254=users[_0x27c579(0x151)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]=='Portuguese\x20(BR)')var _0x36e254=users[_0x27c579(0xcb)];else{if(_0x3157cb[0x0][_0x27c579(0x11c)]=='Chinese')var _0x36e254=users['Chinese'];else{if(_0x3157cb[0x0]['language']=='Arabic\x20(ae)')var _0x36e254=users[_0x27c579(0x16e)];}}}}}}}_0x1c938d[_0x27c579(0x115)]('categories',{'success':_0x35a43b['flash'](_0x27c579(0x162)),'errors':_0x35a43b[_0x27c579(0x15a)](_0x27c579(0xea)),'role':_0x5bbbb9,'profile':_0x5e3a05,'user':_0x85fdbc,'master_shop':_0x3157cb,'language':_0x36e254});}catch(_0x49bd52){console['log'](_0x49bd52);}}),router['post'](a0_0x1914a3(0x17d),auth,async(_0x471d64,_0x340c9f)=>{const _0xf4235d=a0_0x1914a3;try{const {name:_0x185c8e,products:_0x315dd5}=_0x471d64[_0xf4235d(0x136)],_0x5c6868=new categories({'name':_0x185c8e,'products':_0x315dd5}),_0x4f1e4b=await categories[_0xf4235d(0xd0)]({'name':_0x185c8e});_0x4f1e4b?_0x471d64[_0xf4235d(0x15a)](_0xf4235d(0xea),_0x185c8e+_0xf4235d(0x12b)):_0x471d64['flash'](_0xf4235d(0x162),_0x185c8e+'\x20categories\x20is\x20add\x20successfully');const _0x1a437d=await _0x5c6868['save']();_0x340c9f[_0xf4235d(0x130)]('/products/categories');}catch(_0x4b18b4){console[_0xf4235d(0x104)](_0x4b18b4);}}),router['get'](a0_0x1914a3(0x14d),auth,async(_0x54d979,_0x387521)=>{const _0x3cfa30=a0_0x1914a3;try{const {username:_0x465804,email:_0x52c2c8,role:_0xb9dd88}=_0x54d979[_0x3cfa30(0xce)],_0x4feff1=_0x54d979['user'],_0x5145a4=await profile['findOne']({'email':_0x4feff1['email']}),_0x10da90=await master_shop[_0x3cfa30(0xe3)]();console[_0x3cfa30(0x104)]('master',_0x10da90);const _0x3c3921=_0x54d979[_0x3cfa30(0xd2)]['id'];console[_0x3cfa30(0x104)](_0x3c3921);const _0x11070a=await categories['findById'](_0x3c3921);if(_0x10da90[0x0]['language']==_0x3cfa30(0x125))var _0x179b42=users[_0x3cfa30(0x121)];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0xe5))var _0x179b42=users[_0x3cfa30(0xe5)];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0x109))var _0x179b42=users['German'];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0x14c))var _0x179b42=users[_0x3cfa30(0x14c)];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0x151))var _0x179b42=users[_0x3cfa30(0x151)];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0x174))var _0x179b42=users[_0x3cfa30(0xcb)];else{if(_0x10da90[0x0][_0x3cfa30(0x11c)]==_0x3cfa30(0x10f))var _0x179b42=users[_0x3cfa30(0x10f)];else{if(_0x10da90[0x0]['language']==_0x3cfa30(0xe8))var _0x179b42=users[_0x3cfa30(0x16e)];}}}}}}}_0x387521[_0x3cfa30(0x115)](_0x3cfa30(0x100),{'success':_0x54d979[_0x3cfa30(0x15a)]('success'),'errors':_0x54d979[_0x3cfa30(0x15a)](_0x3cfa30(0xea)),'role':_0x4feff1,'profile':_0x5145a4,'master_shop':_0x10da90,'user':_0x11070a,'language':_0x179b42});}catch(_0x2439f5){console[_0x3cfa30(0x104)](_0x2439f5);}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x14d),auth,async(_0x439920,_0x3f005e)=>{const _0x39fe9c=a0_0x1914a3;try{const _0x35e41d=_0x439920[_0x39fe9c(0xd2)]['id'],_0x180c17=await categories[_0x39fe9c(0xf5)](_0x35e41d,_0x439920[_0x39fe9c(0x136)]);_0x439920[_0x39fe9c(0x15a)](_0x39fe9c(0x162),''+users[_0x39fe9c(0x145)]),_0x3f005e['redirect']('/products/categories');}catch(_0x2a63c0){console[_0x39fe9c(0x104)](_0x2a63c0);}}),router['get']('/categories/delete/:id',auth,async(_0x1782fd,_0x45b538)=>{const _0x1d0a07=a0_0x1914a3;try{const _0xc57f71=_0x1782fd[_0x1d0a07(0xd2)]['id'],_0x9f9e76=await categories[_0x1d0a07(0xcd)](_0xc57f71);_0x1782fd['flash'](_0x1d0a07(0x162),'categories\x20data\x20delete\x20successfully'),_0x45b538[_0x1d0a07(0x130)](_0x1d0a07(0xd1));}catch(_0x4fc194){console['log'](_0x4fc194);}}),router[a0_0x1914a3(0xc9)](a0_0x1914a3(0x13d),auth,async(_0xd1f4a6,_0x52979c)=>{const _0x14bcc8=a0_0x1914a3;try{const {username:_0x367836,email:_0x26943c,role:_0x2702fd}=_0xd1f4a6[_0x14bcc8(0xce)],_0x50db89=_0xd1f4a6['user'],_0xb28679=await profile[_0x14bcc8(0xd0)]({'email':_0x50db89[_0x14bcc8(0x170)]}),_0x25bddd=await master_shop[_0x14bcc8(0xe3)]();console[_0x14bcc8(0x104)](_0x14bcc8(0xf4),_0x25bddd);const _0x160af0=await brands['find']();if(_0x25bddd[0x0][_0x14bcc8(0x11c)]==_0x14bcc8(0x125))var _0xf58761=users[_0x14bcc8(0x121)];else{if(_0x25bddd[0x0]['language']==_0x14bcc8(0xe5))var _0xf58761=users[_0x14bcc8(0xe5)];else{if(_0x25bddd[0x0][_0x14bcc8(0x11c)]==_0x14bcc8(0x109))var _0xf58761=users[_0x14bcc8(0x109)];else{if(_0x25bddd[0x0][_0x14bcc8(0x11c)]=='Spanish')var _0xf58761=users[_0x14bcc8(0x14c)];else{if(_0x25bddd[0x0]['language']==_0x14bcc8(0x151))var _0xf58761=users[_0x14bcc8(0x151)];else{if(_0x25bddd[0x0][_0x14bcc8(0x11c)]==_0x14bcc8(0x174))var _0xf58761=users[_0x14bcc8(0xcb)];else{if(_0x25bddd[0x0]['language']==_0x14bcc8(0x10f))var _0xf58761=users[_0x14bcc8(0x10f)];else{if(_0x25bddd[0x0][_0x14bcc8(0x11c)]==_0x14bcc8(0xe8))var _0xf58761=users[_0x14bcc8(0x16e)];}}}}}}}_0x52979c['render'](_0x14bcc8(0xe4),{'success':_0xd1f4a6[_0x14bcc8(0x15a)]('success'),'errors':_0xd1f4a6['flash'](_0x14bcc8(0xea)),'role':_0x50db89,'profile':_0xb28679,'master_shop':_0x25bddd,'user':_0x160af0,'language':_0xf58761});}catch(_0x3ac3f2){console[_0x14bcc8(0x104)](_0x3ac3f2);}}),router['post']('/brands',auth,async(_0x537b45,_0x4a7fe6)=>{const _0x3baf9a=a0_0x1914a3;try{const {name:_0xdaa705,products:_0x268f16}=_0x537b45[_0x3baf9a(0x136)],_0x38e989=new brands({'name':_0xdaa705,'products':_0x268f16}),_0x5bc45a=await brands[_0x3baf9a(0xd0)]({'name':_0xdaa705});_0x5bc45a?_0x537b45['flash']('errors',_0xdaa705+_0x3baf9a(0x181)):_0x537b45[_0x3baf9a(0x15a)](_0x3baf9a(0x162),_0xdaa705+'\x20brand\x20is\x20add\x20successfully');const _0x369ccd=await _0x38e989[_0x3baf9a(0x175)]();_0x4a7fe6[_0x3baf9a(0x130)](_0x3baf9a(0x135));}catch(_0x3f22e5){console[_0x3baf9a(0x104)](_0x3f22e5);}}),router[a0_0x1914a3(0xc9)]('/brands/:id',auth,async(_0x2c12c9,_0x21ffef)=>{const _0x16b64e=a0_0x1914a3;try{const {username:_0xafe25e,email:_0x1d4914,role:_0x6e0581}=_0x2c12c9['user'],_0x5def3e=_0x2c12c9[_0x16b64e(0xce)],_0x53ad17=await profile[_0x16b64e(0xd0)]({'email':_0x5def3e[_0x16b64e(0x170)]}),_0xb47ebd=await master_shop[_0x16b64e(0xe3)]();console[_0x16b64e(0x104)]('master',_0xb47ebd);const _0x4d129e=_0x2c12c9['params']['id'];console[_0x16b64e(0x104)](_0x4d129e);const _0x3b7e5e=await brands[_0x16b64e(0xe1)](_0x4d129e);if(_0xb47ebd[0x0][_0x16b64e(0x11c)]==_0x16b64e(0x125))var _0x5f47b1=users[_0x16b64e(0x121)];else{if(_0xb47ebd[0x0]['language']=='Hindi')var _0x5f47b1=users[_0x16b64e(0xe5)];else{if(_0xb47ebd[0x0][_0x16b64e(0x11c)]==_0x16b64e(0x109))var _0x5f47b1=users[_0x16b64e(0x109)];else{if(_0xb47ebd[0x0]['language']==_0x16b64e(0x14c))var _0x5f47b1=users['Spanish'];else{if(_0xb47ebd[0x0][_0x16b64e(0x11c)]==_0x16b64e(0x151))var _0x5f47b1=users['French'];else{if(_0xb47ebd[0x0]['language']==_0x16b64e(0x174))var _0x5f47b1=users['Portuguese'];else{if(_0xb47ebd[0x0][_0x16b64e(0x11c)]==_0x16b64e(0x10f))var _0x5f47b1=users[_0x16b64e(0x10f)];else{if(_0xb47ebd[0x0][_0x16b64e(0x11c)]==_0x16b64e(0xe8))var _0x5f47b1=users[_0x16b64e(0x16e)];}}}}}}}_0x21ffef[_0x16b64e(0x115)](_0x16b64e(0xe4),{'success':_0x2c12c9['flash'](_0x16b64e(0x162)),'errors':_0x2c12c9['flash']('errors'),'role':_0x5def3e,'profile':_0x53ad17,'master_shop':_0xb47ebd,'user':_0x3b7e5e,'language':_0x5f47b1});}catch(_0x5db732){console[_0x16b64e(0x104)](_0x5db732);}}),router[a0_0x1914a3(0x128)]('/brands/:id',auth,async(_0x4925,_0x24c4b4)=>{const _0x5182b7=a0_0x1914a3;try{const _0x406ce8=_0x4925['params']['id'],_0x574f45=await brands['findByIdAndUpdate'](_0x406ce8,_0x4925['body']);_0x4925[_0x5182b7(0x15a)]('success',_0x5182b7(0x147)),_0x24c4b4[_0x5182b7(0x130)](_0x5182b7(0x135));}catch(_0x43ff48){console[_0x5182b7(0x104)](_0x43ff48);}}),router[a0_0x1914a3(0xc9)]('/brands/delete/:id',auth,async(_0x12d006,_0x1df16c)=>{const _0x41caa9=a0_0x1914a3;try{const _0x1cbb24=_0x12d006[_0x41caa9(0xd2)]['id'],_0x43c551=await brands[_0x41caa9(0xcd)](_0x1cbb24);_0x12d006[_0x41caa9(0x15a)](_0x41caa9(0x162),_0x41caa9(0x158)),_0x1df16c[_0x41caa9(0x130)](_0x41caa9(0x135));}catch(_0x11bf31){console['log'](_0x11bf31);}}),router[a0_0x1914a3(0xc9)](a0_0x1914a3(0x144),auth,async(_0x458752,_0x3db458)=>{const _0x10603b=a0_0x1914a3;try{const {username:_0x3236e1,email:_0x45ff74,role:_0x585459}=_0x458752['user'],_0x4026c8=_0x458752[_0x10603b(0xce)],_0x16ec3c=await profile[_0x10603b(0xd0)]({'email':_0x4026c8[_0x10603b(0x170)]}),_0x23fff9=await master_shop[_0x10603b(0xe3)]();console[_0x10603b(0x104)](_0x10603b(0xf4),_0x23fff9);const _0x4aa12d=await units[_0x10603b(0xe3)]();if(_0x23fff9[0x0][_0x10603b(0x11c)]==_0x10603b(0x125))var _0x34d2a4=users[_0x10603b(0x121)];else{if(_0x23fff9[0x0]['language']==_0x10603b(0xe5))var _0x34d2a4=users[_0x10603b(0xe5)];else{if(_0x23fff9[0x0][_0x10603b(0x11c)]=='German')var _0x34d2a4=users[_0x10603b(0x109)];else{if(_0x23fff9[0x0][_0x10603b(0x11c)]=='Spanish')var _0x34d2a4=users[_0x10603b(0x14c)];else{if(_0x23fff9[0x0]['language']==_0x10603b(0x151))var _0x34d2a4=users[_0x10603b(0x151)];else{if(_0x23fff9[0x0][_0x10603b(0x11c)]==_0x10603b(0x174))var _0x34d2a4=users[_0x10603b(0xcb)];else{if(_0x23fff9[0x0]['language']=='Chinese')var _0x34d2a4=users['Chinese'];else{if(_0x23fff9[0x0][_0x10603b(0x11c)]==_0x10603b(0xe8))var _0x34d2a4=users[_0x10603b(0x16e)];}}}}}}}_0x3db458['render'](_0x10603b(0x106),{'success':_0x458752['flash'](_0x10603b(0x162)),'errors':_0x458752[_0x10603b(0x15a)](_0x10603b(0xea)),'role':_0x4026c8,'profile':_0x16ec3c,'master_shop':_0x23fff9,'user':_0x4aa12d,'language':_0x34d2a4});}catch(_0x329020){console[_0x10603b(0x104)](_0x329020);}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x144),auth,async(_0x182411,_0x767df5)=>{const _0x58cd1c=a0_0x1914a3;try{const {name:_0x24c936,secondary_unit:_0xa0403,products:_0x29ed0b}=_0x182411['body'],_0x32e2bc=new units({'name':_0x24c936,'secondary_unit':_0xa0403,'products':_0x29ed0b}),_0x257dbc=await units[_0x58cd1c(0xd0)]({'name':_0x24c936});_0x257dbc?_0x182411[_0x58cd1c(0x15a)](_0x58cd1c(0xea),_0x24c936+_0x58cd1c(0x140)):_0x182411[_0x58cd1c(0x15a)](_0x58cd1c(0x162),_0x24c936+_0x58cd1c(0x101));const _0x345388=await _0x32e2bc['save']();_0x767df5[_0x58cd1c(0x130)]('/products/units');}catch(_0x5d8ccc){console[_0x58cd1c(0x104)](_0x5d8ccc);}}),router['get'](a0_0x1914a3(0xee),auth,async(_0x5b70d1,_0x24d7fe)=>{const _0x26f1e2=a0_0x1914a3;try{const {username:_0x396de0,email:_0x538f2a,role:_0x14ecee}=_0x5b70d1[_0x26f1e2(0xce)],_0x59ee4b=_0x5b70d1[_0x26f1e2(0xce)],_0xf03559=await profile[_0x26f1e2(0xd0)]({'email':_0x59ee4b[_0x26f1e2(0x170)]}),_0x10f08f=await master_shop[_0x26f1e2(0xe3)]();console[_0x26f1e2(0x104)](_0x26f1e2(0xf4),_0x10f08f);const _0x32bd51=_0x5b70d1[_0x26f1e2(0xd2)]['id'],_0x1dc1f0=await units[_0x26f1e2(0xe1)](_0x32bd51);if(_0x10f08f[0x0][_0x26f1e2(0x11c)]==_0x26f1e2(0x125))var _0x2ed43f=users[_0x26f1e2(0x121)];else{if(_0x10f08f[0x0][_0x26f1e2(0x11c)]==_0x26f1e2(0xe5))var _0x2ed43f=users[_0x26f1e2(0xe5)];else{if(_0x10f08f[0x0][_0x26f1e2(0x11c)]==_0x26f1e2(0x109))var _0x2ed43f=users[_0x26f1e2(0x109)];else{if(_0x10f08f[0x0]['language']=='Spanish')var _0x2ed43f=users[_0x26f1e2(0x14c)];else{if(_0x10f08f[0x0][_0x26f1e2(0x11c)]=='French')var _0x2ed43f=users['French'];else{if(_0x10f08f[0x0]['language']=='Portuguese\x20(BR)')var _0x2ed43f=users[_0x26f1e2(0xcb)];else{if(_0x10f08f[0x0][_0x26f1e2(0x11c)]=='Chinese')var _0x2ed43f=users[_0x26f1e2(0x10f)];else{if(_0x10f08f[0x0][_0x26f1e2(0x11c)]==_0x26f1e2(0xe8))var _0x2ed43f=users[_0x26f1e2(0x16e)];}}}}}}}_0x24d7fe[_0x26f1e2(0x115)](_0x26f1e2(0x106),{'success':_0x5b70d1[_0x26f1e2(0x15a)](_0x26f1e2(0x162)),'errors':_0x5b70d1[_0x26f1e2(0x15a)](_0x26f1e2(0xea)),'role':_0x59ee4b,'profile':_0xf03559,'master_shop':_0x10f08f,'user':_0x1dc1f0,'language':_0x2ed43f});}catch(_0x79871b){console['log'](_0x79871b);}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0xee),auth,async(_0x2df4f8,_0x5a325b)=>{const _0x5bd8fc=a0_0x1914a3;try{const _0x1974ff=_0x2df4f8[_0x5bd8fc(0xd2)]['id'],_0x3d691b=await units[_0x5bd8fc(0xf5)](_0x1974ff,_0x2df4f8[_0x5bd8fc(0x136)]);_0x2df4f8['flash'](_0x5bd8fc(0x162),_0x5bd8fc(0xed)),_0x5a325b['redirect'](_0x5bd8fc(0xe2));}catch(_0x4b2c93){console['log'](_0x4b2c93);}}),router[a0_0x1914a3(0xc9)]('/units/delete/:id',auth,async(_0x1fdc73,_0x473943)=>{const _0x5b7f7=a0_0x1914a3;try{const _0x594463=_0x1fdc73['params']['id'],_0x365d31=await units['findByIdAndDelete'](_0x594463);_0x1fdc73[_0x5b7f7(0x15a)](_0x5b7f7(0x162),_0x5b7f7(0x107)),_0x473943[_0x5b7f7(0x130)](_0x5b7f7(0xe2));}catch(_0x202335){console['log'](_0x202335);}});const storage=multer[a0_0x1914a3(0x114)]({'destination':(_0x141fd2,_0x22398d,_0x5f3ea1)=>{const _0x107698=a0_0x1914a3;_0x5f3ea1(null,_0x107698(0x15f));},'filename':(_0x5f17fd,_0x1ced1c,_0x1c1872)=>{const _0x488ca0=a0_0x1914a3;_0x1c1872(null,Date[_0x488ca0(0xf9)]()+_0x1ced1c[_0x488ca0(0xda)]);}}),upload=multer({'storage':storage});router[a0_0x1914a3(0xc9)](a0_0x1914a3(0x14e),auth,async(_0x5c3b51,_0x276880)=>{const _0x4f5e6f=a0_0x1914a3;try{const {username:_0x1e6f05,email:_0x2aad48,role:_0x277502}=_0x5c3b51[_0x4f5e6f(0xce)],_0x5e077c=_0x5c3b51['user'],_0x47fdd9=await profile[_0x4f5e6f(0xd0)]({'email':_0x5e077c['email']}),_0xf875e7={'year':'numeric','month':_0x4f5e6f(0x15d),'day':'numeric'},_0x4a29df=await master_shop[_0x4f5e6f(0xe3)]();console[_0x4f5e6f(0x104)](_0x4f5e6f(0x138),_0x4a29df);const _0xe04275=await product[_0x4f5e6f(0xe3)]();console['log'](_0x4f5e6f(0xfb),_0xe04275);const _0x4a9f6c=await warehouse[_0x4f5e6f(0x183)]([{'$unwind':_0x4f5e6f(0xd9)},{'$lookup':{'from':_0x4f5e6f(0x143),'localField':_0x4f5e6f(0xfa),'foreignField':_0x4f5e6f(0x10e),'as':_0x4f5e6f(0x16a)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x4f5e6f(0x157),'product_stock':_0x4f5e6f(0xe7)}},{'$group':{'_id':_0x4f5e6f(0x15b),'product_stock':{'$sum':_0x4f5e6f(0xfe)}}}]);console[_0x4f5e6f(0x104)](_0x4f5e6f(0xf6),_0x4a9f6c),_0x4a9f6c[_0x4f5e6f(0x156)](_0x21bd05=>{const _0x4735c0=_0x4f5e6f,_0x33b433=_0xe04275[_0x4735c0(0xe6)](_0x260779=>{const _0x4cd73b=_0x4735c0;_0x260779[_0x4cd73b(0x10e)]==_0x21bd05[_0x4cd73b(0x108)]&&(_0x260779['stock']=parseInt(_0x260779[_0x4cd73b(0xca)])+parseInt(_0x21bd05[_0x4cd73b(0x13e)]));});}),console[_0x4f5e6f(0x104)](_0x4f5e6f(0xfb),_0xe04275);if(_0x4a29df[0x0]['language']==_0x4f5e6f(0x125))var _0x34072f=users[_0x4f5e6f(0x121)];else{if(_0x4a29df[0x0]['language']=='Hindi')var _0x34072f=users[_0x4f5e6f(0xe5)];else{if(_0x4a29df[0x0][_0x4f5e6f(0x11c)]==_0x4f5e6f(0x109))var _0x34072f=users['German'];else{if(_0x4a29df[0x0][_0x4f5e6f(0x11c)]==_0x4f5e6f(0x14c))var _0x34072f=users['Spanish'];else{if(_0x4a29df[0x0][_0x4f5e6f(0x11c)]==_0x4f5e6f(0x151))var _0x34072f=users['French'];else{if(_0x4a29df[0x0]['language']==_0x4f5e6f(0x174))var _0x34072f=users[_0x4f5e6f(0xcb)];else{if(_0x4a29df[0x0][_0x4f5e6f(0x11c)]==_0x4f5e6f(0x10f))var _0x34072f=users['Chinese'];else{if(_0x4a29df[0x0][_0x4f5e6f(0x11c)]==_0x4f5e6f(0xe8))var _0x34072f=users['Arabic'];}}}}}}}_0x276880['render'](_0x4f5e6f(0x143),{'success':_0x5c3b51[_0x4f5e6f(0x15a)](_0x4f5e6f(0x162)),'errors':_0x5c3b51[_0x4f5e6f(0x15a)](_0x4f5e6f(0xea)),'alldata':_0xe04275,'profile':_0x47fdd9,'master_shop':_0x4a29df,'role':_0x5e077c,'product_stock':_0x4a9f6c,'language':_0x34072f});}catch(_0x400c51){console[_0x4f5e6f(0x104)](_0x400c51);}}),router['get']('/view/add_products',auth,async(_0x10827b,_0x223fc9)=>{const _0x1bb84d=a0_0x1914a3;try{const {username:_0x19e6b0,email:_0x3caaa8,role:_0x53ba12}=_0x10827b[_0x1bb84d(0xce)],_0x453197=_0x10827b[_0x1bb84d(0xce)],_0x514123=await profile['findOne']({'email':_0x453197[_0x1bb84d(0x170)]}),_0x156710=await master_shop[_0x1bb84d(0xe3)]();console[_0x1bb84d(0x104)](_0x1bb84d(0xf4),_0x156710);const _0x452b55=await categories[_0x1bb84d(0xe3)]({}),_0x4206c4=await brands[_0x1bb84d(0xe3)]({}),_0xf32104=await units[_0x1bb84d(0xe3)]({}),_0xfff1fb=await warehouse[_0x1bb84d(0xe3)]({'status':_0x1bb84d(0xdb)});if(_0x156710[0x0][_0x1bb84d(0x11c)]==_0x1bb84d(0x125))var _0x52d8ba=users[_0x1bb84d(0x121)];else{if(_0x156710[0x0]['language']==_0x1bb84d(0xe5))var _0x52d8ba=users[_0x1bb84d(0xe5)];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]=='German')var _0x52d8ba=users[_0x1bb84d(0x109)];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]=='Spanish')var _0x52d8ba=users['Spanish'];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]==_0x1bb84d(0x151))var _0x52d8ba=users[_0x1bb84d(0x151)];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]=='Portuguese\x20(BR)')var _0x52d8ba=users[_0x1bb84d(0xcb)];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]=='Chinese')var _0x52d8ba=users[_0x1bb84d(0x10f)];else{if(_0x156710[0x0][_0x1bb84d(0x11c)]=='Arabic\x20(ae)')var _0x52d8ba=users['Arabic'];}}}}}}}_0x223fc9[_0x1bb84d(0x115)](_0x1bb84d(0x120),{'success':_0x10827b['flash'](_0x1bb84d(0x162)),'errors':_0x10827b[_0x1bb84d(0x15a)](_0x1bb84d(0xea)),'role':_0x453197,'profile':_0x514123,'categories':_0x452b55,'brands':_0x4206c4,'master_shop':_0x156710,'units':_0xf32104,'language':_0x52d8ba,'find_data':_0xfff1fb});}catch(_0x4c7122){console[_0x1bb84d(0x104)](_0x4c7122);}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x180),auth,upload[a0_0x1914a3(0x148)]('image'),async(_0x14a096,_0x577ab4)=>{const _0x878b93=a0_0x1914a3;try{const {name:_0x159f10,category:_0x45cd67,brand:_0x2b2e58,unit:_0x1671d2,alertquantity:_0x42908c,stock:_0x421b7f,product_code:_0x27dc56,warehouse:_0x116fd6,primary_ItemCode:_0x11788e,second_ItemCode:_0x44052c,second_unit:_0x59e66c,maxPerUnit:_0xc471c7,MaxPerProduct:_0x41ad67}=_0x14a096['body'],_0x57115f=_0x14a096[_0x878b93(0x110)]?.[_0x878b93(0x105)]||_0x878b93(0x11e),_0x148f55=new product({'image':_0x57115f,'name':_0x159f10,'category':_0x45cd67,'brand':_0x2b2e58,'unit':_0x1671d2,'alertquantity':_0x42908c,'stock':_0x421b7f,'product_code':_0x27dc56,'warehouse':_0x116fd6,'primary_code':_0x11788e,'secondary_code':_0x44052c,'second_unit':_0x59e66c,'maxStocks':_0x41ad67,'maxProdPerUnit':_0xc471c7}),_0x4ac684=await _0x148f55[_0x878b93(0x175)](),_0x564045=await categories[_0x878b93(0xd0)]({'name':_0x45cd67});_0x564045[_0x878b93(0x143)]=parseInt(_0x564045[_0x878b93(0x143)])+0x1,await _0x564045[_0x878b93(0x175)]();const _0x1f7f10=await brands['findOne']({'name':_0x2b2e58});_0x1f7f10[_0x878b93(0x143)]=parseInt(_0x1f7f10['products'])+0x1,await _0x1f7f10['save']();const _0x3db7bf=await units[_0x878b93(0xd0)]({'name':_0x1671d2});_0x3db7bf['products']=parseInt(_0x3db7bf[_0x878b93(0x143)])+0x1,await _0x3db7bf[_0x878b93(0x175)](),_0x14a096[_0x878b93(0x15a)](_0x878b93(0x162),_0x878b93(0x13b)),_0x577ab4['redirect'](_0x878b93(0xc8));}catch(_0x275e01){console[_0x878b93(0x104)](_0x275e01);}}),router[a0_0x1914a3(0xc9)](a0_0x1914a3(0x159),auth,async(_0x343505,_0x1efd40)=>{const _0x4ae463=a0_0x1914a3;try{const {username:_0x36a9c5,email:_0x276e9e,role:_0x3935de}=_0x343505[_0x4ae463(0xce)],_0x35739a=_0x343505[_0x4ae463(0xce)],_0x562cfc=await profile[_0x4ae463(0xd0)]({'email':_0x35739a[_0x4ae463(0x170)]}),_0x303eae=await master_shop['find']();console['log']('edit\x20Product\x20master',_0x303eae);const _0x4e74df=_0x343505['params']['id'],_0x4ecc9b=await product['findById'](_0x4e74df),_0x124bd2=await categories['find']({}),_0xbd4704=await brands[_0x4ae463(0xe3)]({}),_0x35f155=await units[_0x4ae463(0xe3)]({}),_0x267be5=await warehouse['find']({'status':_0x4ae463(0xdb)}),_0x3d35cb=await units[_0x4ae463(0x183)]([{'$group':{'_id':_0x4ae463(0x111),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x303eae[0x0][_0x4ae463(0x11c)]==_0x4ae463(0x125))var _0x77283f=users[_0x4ae463(0x121)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]=='Hindi')var _0x77283f=users[_0x4ae463(0xe5)];else{if(_0x303eae[0x0]['language']==_0x4ae463(0x109))var _0x77283f=users[_0x4ae463(0x109)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]=='Spanish')var _0x77283f=users[_0x4ae463(0x14c)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]=='French')var _0x77283f=users[_0x4ae463(0x151)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]==_0x4ae463(0x174))var _0x77283f=users[_0x4ae463(0xcb)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]=='Chinese')var _0x77283f=users[_0x4ae463(0x10f)];else{if(_0x303eae[0x0][_0x4ae463(0x11c)]==_0x4ae463(0xe8))var _0x77283f=users[_0x4ae463(0x16e)];}}}}}}}_0x1efd40[_0x4ae463(0x115)](_0x4ae463(0x12f),{'success':_0x343505[_0x4ae463(0x15a)]('success'),'errors':_0x343505[_0x4ae463(0x15a)](_0x4ae463(0xea)),'role':_0x35739a,'profile':_0x562cfc,'alldata':_0x4ecc9b,'categories':_0x124bd2,'brands':_0xbd4704,'master_shop':_0x303eae,'units':_0x35f155,'secondunit':_0x3d35cb,'find_data':_0x267be5,'language':_0x77283f});}catch(_0x30f843){console[_0x4ae463(0x104)](_0x30f843);}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x159),auth,upload[a0_0x1914a3(0x148)](a0_0x1914a3(0x166)),async(_0x1deff5,_0x3a0712)=>{const _0x2ee953=a0_0x1914a3;try{console[_0x2ee953(0x104)](_0x2ee953(0xfc));const _0x42f761=_0x1deff5[_0x2ee953(0xd2)]['id'],_0x49477d=await product[_0x2ee953(0xe1)](_0x42f761),{image:_0x24305e,name:_0x279c98,category:_0x2eee7c,brand:_0x1f6290,sku:_0x344899,unit:_0xfea76f,alertquantity:_0x645229,product_code:_0x53bc3f,warehouse:_0x4b0ac6,primary_ItemCode:_0x12d71e,second_ItemCode:_0x25d7b6,second_unit:_0x3fe84c,maxPerUnit:_0x29431d,MaxPerProduct:_0xa5fa70,prod_catdata:_0xa6c805}=_0x1deff5['body'];_0x1deff5['file']&&(_0x49477d['image']=_0x1deff5['file'][_0x2ee953(0x105)]);_0x49477d['name']=_0x279c98,_0x49477d['category']=_0x2eee7c,_0x49477d[_0x2ee953(0x17a)]=_0x1f6290,_0x49477d[_0x2ee953(0x10d)]=_0x344899,_0x49477d[_0x2ee953(0x12a)]=_0xfea76f,_0x49477d[_0x2ee953(0xdf)]=_0x645229,_0x49477d[_0x2ee953(0x11b)]=_0x53bc3f,_0x49477d[_0x2ee953(0xf3)]=_0x4b0ac6,_0x49477d['primary_code']=_0x12d71e,_0x49477d[_0x2ee953(0xf1)]=_0x25d7b6,_0x49477d[_0x2ee953(0x154)]=_0x3fe84c,_0x49477d[_0x2ee953(0x11f)]=_0xa5fa70,_0x49477d[_0x2ee953(0xef)]=_0x29431d,_0x49477d[_0x2ee953(0x168)]=_0xa6c805;const _0x3a28e6=await _0x49477d[_0x2ee953(0x175)]();console['log']('product\x20edit',_0x49477d),_0x1deff5['flash'](_0x2ee953(0x162),_0x2ee953(0x142)),_0x3a0712[_0x2ee953(0x130)](_0x2ee953(0xc8));}catch(_0x4c8750){console['log'](_0x4c8750);}}),router[a0_0x1914a3(0xc9)]('/barcode/:id',auth,async(_0x33c639,_0x3e23d2)=>{const _0x2270af=a0_0x1914a3;try{const {username:_0xa6e23d,email:_0x2407a6,role:_0x5795e3}=_0x33c639[_0x2270af(0xce)],_0x31de0e=_0x33c639[_0x2270af(0xce)],_0x55747c=await profile[_0x2270af(0xd0)]({'email':_0x31de0e[_0x2270af(0x170)]}),_0x1a0791=await master_shop[_0x2270af(0xe3)]();console[_0x2270af(0x104)]('barcode\x20Product\x20master',_0x1a0791);const _0x56d73d=_0x33c639[_0x2270af(0xd2)]['id'],_0x3fa828=await product['findById'](_0x56d73d);console[_0x2270af(0x104)](_0x2270af(0x126),_0x3fa828);if(_0x1a0791[0x0]['language']==_0x2270af(0x125))var _0x14a1d3=users[_0x2270af(0x121)];else{if(_0x1a0791[0x0]['language']==_0x2270af(0xe5))var _0x14a1d3=users['Hindi'];else{if(_0x1a0791[0x0][_0x2270af(0x11c)]==_0x2270af(0x109))var _0x14a1d3=users[_0x2270af(0x109)];else{if(_0x1a0791[0x0][_0x2270af(0x11c)]=='Spanish')var _0x14a1d3=users['Spanish'];else{if(_0x1a0791[0x0]['language']==_0x2270af(0x151))var _0x14a1d3=users[_0x2270af(0x151)];else{if(_0x1a0791[0x0]['language']==_0x2270af(0x174))var _0x14a1d3=users['Portuguese'];else{if(_0x1a0791[0x0][_0x2270af(0x11c)]=='Chinese')var _0x14a1d3=users[_0x2270af(0x10f)];else{if(_0x1a0791[0x0]['language']==_0x2270af(0xe8))var _0x14a1d3=users[_0x2270af(0x16e)];}}}}}}}_0x3e23d2[_0x2270af(0x115)]('product_barcode',{'success':_0x33c639[_0x2270af(0x15a)](_0x2270af(0x162)),'errors':_0x33c639[_0x2270af(0x15a)](_0x2270af(0xea)),'role':_0x31de0e,'profile':_0x55747c,'alldata':_0x3fa828,'master_shop':_0x1a0791,'language':_0x14a1d3});}catch(_0x94966f){console[_0x2270af(0x104)](_0x94966f);}}),router['get'](a0_0x1914a3(0xd6),auth,async(_0x2c6cf6,_0x7f58c0)=>{const _0x53ee51=a0_0x1914a3;try{const _0x5e8efb=new excelJS[(_0x53ee51(0x167))](),_0x18c38f=_0x5e8efb[_0x53ee51(0xf8)](_0x53ee51(0x131));return _0x18c38f[_0x53ee51(0x17f)]=[{'header':_0x53ee51(0x137),'key':_0x53ee51(0x16b),'width':0xa},{'header':_0x53ee51(0xd5),'key':_0x53ee51(0xdc),'width':0xa},{'header':_0x53ee51(0x124),'key':_0x53ee51(0xf2),'width':0xa},{'header':'Secondary_Units','key':_0x53ee51(0x122),'width':0xa},{'header':'max_number_per_units','key':_0x53ee51(0xdd),'width':0xa},{'header':_0x53ee51(0xe9),'key':_0x53ee51(0x15c),'width':0xa},{'header':_0x53ee51(0x11d),'key':_0x53ee51(0x15c),'width':0xa},{'header':_0x53ee51(0x16c),'key':_0x53ee51(0x15c),'width':0xa},{'header':_0x53ee51(0x10a),'key':_0x53ee51(0x116),'width':0xa},{'header':_0x53ee51(0x133),'key':_0x53ee51(0x160),'width':0xa},{'header':_0x53ee51(0x153),'key':'PAlQty','width':0xa},{'header':_0x53ee51(0x15e),'key':_0x53ee51(0xec),'width':0xa}],_0x7f58c0[_0x53ee51(0x16d)]('Content-Type',_0x53ee51(0xd4)),_0x7f58c0['setHeader']('Content-Disposition',_0x53ee51(0x102)),_0x5e8efb[_0x53ee51(0x14f)][_0x53ee51(0x113)](_0x7f58c0)[_0x53ee51(0x14b)](()=>{const _0x2e8a1b=_0x53ee51;_0x7f58c0[_0x2e8a1b(0x171)](0xc8);});}catch(_0x1ceda8){_0x7f58c0['status'](0x190)[_0x53ee51(0xde)](_0x1ceda8);}});const storage1=multer['diskStorage']({'destination':(_0x399a5e,_0x1a3ce3,_0x47c1e7)=>{_0x47c1e7(null,'public/Migration');},'filename':(_0x473ef5,_0x35f33e,_0x3c279a)=>{const _0x24d22d=a0_0x1914a3;_0x3c279a(null,Date[_0x24d22d(0xf9)]()+_0x35f33e[_0x24d22d(0xda)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1914a3(0x128)](a0_0x1914a3(0x13c),auth,uploadMigrate['single'](a0_0x1914a3(0x152)),async(_0x2a21f6,_0x434dc4)=>{const _0x2dc489=a0_0x1914a3,_0x4f6a1e=_0x2a21f6[_0x2dc489(0x110)][_0x2dc489(0x105)],_0x3494b2=await xlsx[_0x2dc489(0x119)]('public/Migration/'+_0x4f6a1e);let _0x553c4a=_0x3494b2[_0x2dc489(0x155)],_0x3939da=xlsx['utils'][_0x2dc489(0x177)](_0x3494b2['Sheets'][_0x553c4a[0x0]]);for(const _0x309b94 of _0x3939da){const _0x3b4855=_0x309b94[_0x2dc489(0x137)],_0x18ffde=_0x309b94[_0x2dc489(0xd5)],_0x4fdab4=_0x309b94[_0x2dc489(0x124)],_0x5e165d=_0x309b94[_0x2dc489(0x123)],_0x414844=_0x309b94[_0x2dc489(0x16c)],_0x5acaa9=_0x309b94['Category'],_0x1c7c35=_0x309b94[_0x2dc489(0x133)],_0x2840fe=_0x309b94[_0x2dc489(0xe9)],_0x411fe0=_0x309b94[_0x2dc489(0x11d)],_0x365c0e=_0x309b94['Maximum_Stocks'],_0x227dbc=_0x309b94[_0x2dc489(0x149)],_0x54663d=_0x309b94[_0x2dc489(0x15e)];try{let _0x2de841=await categories['findOne']({'name':_0x5acaa9});if(!_0x2de841){const _0x11d6ff=new categories({'name':_0x5acaa9,'products':'0'});_0x2de841=await _0x11d6ff[_0x2dc489(0x175)]();}let _0x939ecc=await brands[_0x2dc489(0xd0)]({'name':_0x18ffde});if(!_0x939ecc){const _0x532c33=new brands({'name':_0x18ffde,'products':'0'});_0x939ecc=await _0x532c33[_0x2dc489(0x175)]();}let _0x135ba5=await units[_0x2dc489(0xd0)]({'name':_0x4fdab4,'secondary_unit':_0x5e165d});if(!_0x135ba5){const _0x245ee4=new units({'name':_0x4fdab4,'secondary_unit':_0x5e165d,'products':'0'});_0x135ba5=await _0x245ee4['save']();}const _0x9936e=await product['find']({'name':_0x3b4855,'category':_0x2de841[_0x2dc489(0x10e)],'brand':_0x939ecc[_0x2dc489(0x10e)],'secondary_unit':_0x135ba5[_0x2dc489(0x154)],'product_code':_0x414844});console[_0x2dc489(0x104)](_0x9936e[_0x2dc489(0x12e)]+_0x2dc489(0x13a)+_0x2de841['name']+'\x20<>\x20'+_0x939ecc[_0x2dc489(0x10e)]+_0x2dc489(0x13a)+_0x135ba5[_0x2dc489(0x154)]+_0x2dc489(0x13a)+_0x414844+_0x2dc489(0x13a)+_0x3b4855);if(_0x9936e[_0x2dc489(0x12e)]===0x0){const _0x1d0072=new product({'image':_0x2dc489(0x11e),'name':_0x3b4855,'category':_0x2de841[_0x2dc489(0x10e)],'brand':_0x939ecc[_0x2dc489(0x10e)],'unit':_0x135ba5[_0x2dc489(0x10e)],'alertquantity':_0x1c7c35,'product_code':_0x414844,'secondary_unit':_0x135ba5[_0x2dc489(0x154)],'primary_code':_0x2840fe,'secondary_code':_0x411fe0,'maxStocks':_0x365c0e,'maxProdPerUnit':_0x227dbc,'product_category':_0x54663d}),_0x494c46=await _0x1d0072[_0x2dc489(0x175)]();_0x2de841[_0x2dc489(0x143)]=parseInt(_0x2de841['products'])+0x1,await _0x2de841['save'](),_0x939ecc[_0x2dc489(0x143)]=parseInt(_0x939ecc['products'])+0x1,await _0x939ecc[_0x2dc489(0x175)](),_0x135ba5['products']=parseInt(_0x135ba5[_0x2dc489(0x143)])+0x1,await _0x135ba5[_0x2dc489(0x175)](),_0x2a21f6[_0x2dc489(0x15a)](_0x2dc489(0x162),_0x3b4855+_0x2dc489(0x163));}else{console[_0x2dc489(0x104)](_0x9936e[0x0]);const _0x4e5834=_0x9936e[0x0];_0x4e5834[_0x2dc489(0x165)]=_0x2de841[_0x2dc489(0x10e)],_0x4e5834[_0x2dc489(0x17a)]=_0x939ecc['name'],_0x4e5834[_0x2dc489(0x12a)]=_0x135ba5['name'],_0x4e5834[_0x2dc489(0xdf)]=_0x1c7c35,_0x4e5834[_0x2dc489(0x11b)]=_0x414844,_0x4e5834['secondary_unit']=_0x135ba5['secondary_unit'],_0x4e5834[_0x2dc489(0x146)]=_0x2840fe,_0x4e5834['secondary_code']=_0x411fe0,_0x4e5834['maxStocks']=_0x365c0e,_0x4e5834[_0x2dc489(0xef)]=_0x227dbc,_0x4e5834['product_category']=_0x54663d;const _0x3af5a1=await _0x4e5834['save']();_0x2a21f6['flash'](_0x2dc489(0x162),_0x3af5a1[_0x2dc489(0x10e)]+'\x20Edit\x20Successfully');}}catch(_0x4b8a53){_0x434dc4[_0x2dc489(0x171)](0x1f4)['json']({'proderror':_0x4b8a53[_0x2dc489(0x13f)],'aproduct':_0x3b4855});}}_0x434dc4[_0x2dc489(0x130)](_0x2dc489(0xc8));}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x169),auth,async(_0x28940f,_0x3da007)=>{const _0x727e74=a0_0x1914a3;try{console[_0x727e74(0x104)](_0x28940f['body']);const {data_cateory:_0xbac1b9,datachoose:_0x546602}=_0x28940f[_0x727e74(0x136)];var _0x57f535;if(_0x546602==_0x727e74(0x176))_0x57f535=await product[_0x727e74(0x183)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x546602==_0x727e74(0xe4))_0x57f535=await product[_0x727e74(0x183)]([{'$match':{'product_category':_0xbac1b9}},{'$group':{'_id':_0x727e74(0x129)}}]);else _0x546602==_0x727e74(0xfd)&&(_0x57f535=await product[_0x727e74(0x183)]([{'$match':{'product_category':_0xbac1b9}},{'$group':{'_id':_0x727e74(0x10c)}}]));}_0x3da007[_0x727e74(0x150)](_0x57f535);}catch(_0x594295){_0x3da007['json']({'message':_0x594295[_0x727e74(0x13f)]});}}),router['post']('/filter_product',auth,async(_0x982aae,_0x3ac0f7)=>{const _0xd425ec=a0_0x1914a3;try{const {data_choosing:_0x28615d,data_selected:_0x5814b1}=_0x982aae[_0xd425ec(0x136)];var _0x2508c6;if(_0x28615d==_0xd425ec(0x176))_0x2508c6=await product[_0xd425ec(0x183)]([{'$match':{'product_category':_0x5814b1}}]);else{if(_0x28615d=='brands')_0x2508c6=await product[_0xd425ec(0x183)]([{'$match':{'brand':_0x5814b1}}]);else _0x28615d=='categ'&&(_0x2508c6=await product['aggregate']([{'$match':{'category':_0x5814b1}}]));}_0x3ac0f7[_0xd425ec(0x150)](_0x2508c6);}catch(_0x508205){_0x3ac0f7[_0xd425ec(0x150)]({'message':_0x508205[_0xd425ec(0x13f)]});}}),router[a0_0x1914a3(0xc9)]('/print_barcode',auth,async(_0x1848a1,_0xb9ceb2)=>{const _0x34480a=a0_0x1914a3,_0x4cd105=_0x1848a1[_0x34480a(0xce)],_0x332a75=await profile[_0x34480a(0xd0)]({'email':_0x4cd105[_0x34480a(0x170)]}),_0x205d7b=await master_shop[_0x34480a(0xe3)](),_0x896fd2=await product[_0x34480a(0xe3)]();if(_0x205d7b[0x0][_0x34480a(0x11c)]==_0x34480a(0x125))var _0x3b572f=users['English'];else{if(_0x205d7b[0x0][_0x34480a(0x11c)]=='Hindi')var _0x3b572f=users[_0x34480a(0xe5)];else{if(_0x205d7b[0x0]['language']==_0x34480a(0x109))var _0x3b572f=users[_0x34480a(0x109)];else{if(_0x205d7b[0x0]['language']==_0x34480a(0x14c))var _0x3b572f=users[_0x34480a(0x14c)];else{if(_0x205d7b[0x0][_0x34480a(0x11c)]==_0x34480a(0x151))var _0x3b572f=users[_0x34480a(0x151)];else{if(_0x205d7b[0x0][_0x34480a(0x11c)]==_0x34480a(0x174))var _0x3b572f=users[_0x34480a(0xcb)];else{if(_0x205d7b[0x0]['language']==_0x34480a(0x10f))var _0x3b572f=users[_0x34480a(0x10f)];else{if(_0x205d7b[0x0][_0x34480a(0x11c)]==_0x34480a(0xe8))var _0x3b572f=users[_0x34480a(0x16e)];}}}}}}}_0xb9ceb2['render'](_0x34480a(0xff),{'success':_0x1848a1['flash'](_0x34480a(0x162)),'errors':_0x1848a1[_0x34480a(0x15a)](_0x34480a(0xea)),'role':_0x4cd105,'profile':_0x332a75,'products':_0x896fd2,'master_shop':_0x205d7b,'language':_0x3b572f});}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x134),auth,async(_0x435bee,_0x5cb79e)=>{const _0x16cbe0=a0_0x1914a3,_0x1d6a51=await product[_0x16cbe0(0xe3)]();_0x5cb79e['json']({'data':_0x1d6a51});}),router['post'](a0_0x1914a3(0x132),auth,async(_0x154ae2,_0xdc92ba)=>{const _0x25da02=a0_0x1914a3;try{const {dataProdCat:_0x550572,dataProdIdentity:_0x41e40f}=_0x154ae2['body'];var _0x36ca96;switch(_0x550572){case'fg':switch(_0x41e40f){case _0x25da02(0xd5):_0x36ca96=await product['aggregate']([{'$match':{'product_category':_0x25da02(0x172)}},{'$group':{'_id':_0x25da02(0x129)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x36ca96=await product[_0x25da02(0x183)]([{'$match':{'product_category':_0x25da02(0x172)}},{'$group':{'_id':_0x25da02(0x10c)}},{'$project':{'category':_0x25da02(0x111)}}]);break;}break;case'rm':switch(_0x41e40f){case _0x25da02(0xd5):_0x36ca96=await product['aggregate']([{'$match':{'product_category':_0x25da02(0xd7)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x25da02(0x111)}}]);break;case'Category':_0x36ca96=await product[_0x25da02(0x183)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x25da02(0x10c)}},{'$project':{'category':_0x25da02(0x111)}}]);break;}break;}_0xdc92ba['json'](_0x36ca96);}catch(_0x1154bc){_0xdc92ba['json']({'message':_0x1154bc[_0x25da02(0x13f)]});}}),router['post'](a0_0x1914a3(0x14a),auth,async(_0x42d05f,_0x1032af)=>{const _0x509862=a0_0x1914a3;try{console[_0x509862(0x104)](_0x42d05f['body']);const {prod_cat:_0x1d4351,identity:_0x5eb1ed,valueData:_0x40a9e4,typeofbarcode:_0x1408ae}=_0x42d05f[_0x509862(0x136)];let _0x4688f5;switch(_0x1d4351){case'fg':if(_0x5eb1ed==_0x509862(0xd5))_0x4688f5=await product[_0x509862(0x183)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x40a9e4}}]);else _0x5eb1ed==_0x509862(0x10a)&&(_0x4688f5=await product[_0x509862(0x183)]([{'$match':{'product_category':_0x509862(0x172),'category':_0x40a9e4}}]));break;case'rm':if(_0x5eb1ed==_0x509862(0xd5))_0x4688f5=await product[_0x509862(0x183)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x40a9e4}}]);else _0x5eb1ed==_0x509862(0x10a)&&(_0x4688f5=await product[_0x509862(0x183)]([{'$match':{'product_category':_0x509862(0xd7),'category':_0x40a9e4}}]));break;}const _0xc8a018=_0x108421=>_0x108421*0x48,_0x21cc5e={'width':0x3,'height':0x1},_0x131478=new PDFDocument({'margin':_0xc8a018(0.75),'size':[_0xc8a018(_0x21cc5e[_0x509862(0x139)]),_0xc8a018(_0x21cc5e[_0x509862(0xf7)])],'bufferPages':!![]}),_0x578d2a=_0x4688f5[_0x509862(0x12e)];for(let _0x384ac2=0x0;_0x384ac2<=_0x578d2a;_0x384ac2++){if(_0x384ac2!=_0x578d2a){const _0x1c8409=_0x4688f5[_0x384ac2][_0x509862(0x10e)],_0x474a2a=_0x4688f5[_0x384ac2][_0x509862(0x146)],_0x5bda1f=_0x4688f5[_0x384ac2][_0x509862(0xf1)],_0x35ad9d=_0x4688f5[_0x384ac2][_0x509862(0x11b)];var _0x14da27;switch(_0x1408ae){case'1':_0x14da27=_0x474a2a;break;case'2':_0x14da27=_0x5bda1f;break;case'3':_0x14da27=_0x35ad9d;break;}const _0x8bf82b={'width':0xd2,'height':0x64},_0xbb7cbf={'width':_0xc8a018(_0x21cc5e['width']),'height':_0xc8a018(_0x21cc5e[_0x509862(0xf7)])},_0x18cb9e=new Canvas();JsBarcode(_0x18cb9e,_0x14da27,{'format':_0x509862(0x127),'height':_0x8bf82b[_0x509862(0xf7)],'displayValue':!![],'text':_0x14da27});const _0x252ddb=_0x18cb9e[_0x509862(0x17b)](),_0x557a1d=_0xbb7cbf[_0x509862(0x139)]/_0x8bf82b['width'],_0x5040b2=_0xbb7cbf[_0x509862(0xf7)]/_0x8bf82b[_0x509862(0xf7)],_0x4ef242=Math['min'](_0x557a1d,_0x5040b2),_0x4af625=_0x8bf82b[_0x509862(0x139)]*_0x4ef242,_0x31b386=_0x8bf82b['height']*_0x4ef242,_0x2e1a8d=(_0xbb7cbf[_0x509862(0x139)]-_0x4af625)/0x2,_0xc13384=(_0xbb7cbf['height']-_0x31b386)/0x2;_0x131478[_0x509862(0x166)](_0x252ddb,_0x2e1a8d,_0xc13384,{'width':_0x4af625,'height':_0x31b386}),_0x384ac2!=_0x578d2a&&_0x131478[_0x509862(0x103)]();}}const _0x1106fb=[];_0x131478['on'](_0x509862(0x179),_0x1106fb[_0x509862(0x11a)][_0x509862(0x161)](_0x1106fb)),_0x131478['on']('end',()=>{const _0x593fb8=_0x509862,_0x28e681=Buffer[_0x593fb8(0x182)](_0x1106fb),_0x2af7d2=_0x28e681[_0x593fb8(0xeb)]('base64');_0x1032af[_0x593fb8(0x150)]({'pdfContent':_0x2af7d2});}),_0x131478['end']();}catch(_0x323269){_0x1032af[_0x509862(0x150)]({'message':_0x323269[_0x509862(0x13f)]});}}),router[a0_0x1914a3(0x128)]('/print_barcode_filter_search/',auth,async(_0x588745,_0x467a2b)=>{const _0x5565cd=a0_0x1914a3;try{console[_0x5565cd(0x104)](_0x588745[_0x5565cd(0x136)]);const {prod_cat:_0x331d1e,identity:_0x542f36,valueData:_0x1e14bd}=_0x588745[_0x5565cd(0x136)];let _0x2379b3;switch(_0x331d1e){case'fg':if(_0x542f36==_0x5565cd(0xd5))_0x2379b3=await product['aggregate']([{'$match':{'product_category':_0x5565cd(0x172),'brand':_0x1e14bd}}]);else _0x542f36==_0x5565cd(0x10a)&&(_0x2379b3=await product[_0x5565cd(0x183)]([{'$match':{'product_category':_0x5565cd(0x172),'category':_0x1e14bd}}]));break;case'rm':if(_0x542f36=='Brands')_0x2379b3=await product[_0x5565cd(0x183)]([{'$match':{'product_category':_0x5565cd(0xd7),'brand':_0x1e14bd}}]);else _0x542f36==_0x5565cd(0x10a)&&(_0x2379b3=await product[_0x5565cd(0x183)]([{'$match':{'product_category':_0x5565cd(0xd7),'category':_0x1e14bd}}]));break;}_0x467a2b[_0x5565cd(0x150)](_0x2379b3);}catch(_0x421a47){_0x467a2b['json']({'message':_0x421a47['message']});}}),router[a0_0x1914a3(0x128)](a0_0x1914a3(0x173),auth,async(_0x2138d3,_0x15e46f)=>{const _0x282fab=a0_0x1914a3;try{const _0x3c99fb=_0x2138d3[_0x282fab(0xd2)]['id'],{copies:_0xefae64,typeofbarcode:_0x15ed0e}=_0x2138d3[_0x282fab(0x136)];var _0x1d6165=await product[_0x282fab(0xe1)](_0x3c99fb);const _0x45c811=_0x36e22c=>_0x36e22c*0x48,_0x1e1f1d={'width':0x3,'height':0x1},_0x52c329=new PDFDocument({'margin':_0x45c811(0.75),'size':[_0x45c811(_0x1e1f1d[_0x282fab(0x139)]),_0x45c811(_0x1e1f1d[_0x282fab(0xf7)])],'bufferPages':!![]}),_0x3fedb0=_0xefae64,_0x39c499=_0x1d6165[_0x282fab(0x10e)],_0x593df0=_0x1d6165[_0x282fab(0x146)],_0x2e114d=_0x1d6165[_0x282fab(0xf1)],_0x382781=_0x1d6165[_0x282fab(0x11b)];let _0x30ff4a;switch(_0x15ed0e){case'1':_0x30ff4a=_0x593df0;break;case'2':_0x30ff4a=_0x2e114d;break;case'3':_0x30ff4a=_0x382781;break;}const _0x247377={'width':0xd2,'height':0x64},_0x247fda={'width':_0x45c811(_0x1e1f1d[_0x282fab(0x139)]),'height':_0x45c811(_0x1e1f1d[_0x282fab(0xf7)])};for(let _0x2a2fa7=0x1;_0x2a2fa7<=_0x3fedb0;_0x2a2fa7++){const _0x3b4f23=new Canvas();JsBarcode(_0x3b4f23,_0x30ff4a,{'format':'CODE128','height':_0x247377['height'],'displayValue':!![],'text':_0x30ff4a});const _0x224576=_0x3b4f23[_0x282fab(0x17b)](),_0x1495ee=_0x247fda[_0x282fab(0x139)]/_0x247377[_0x282fab(0x139)],_0x4efb29=_0x247fda[_0x282fab(0xf7)]/_0x247377[_0x282fab(0xf7)],_0x4de495=Math[_0x282fab(0xcf)](_0x1495ee,_0x4efb29),_0xe60400=_0x247377[_0x282fab(0x139)]*_0x4de495,_0x5de41b=_0x247377[_0x282fab(0xf7)]*_0x4de495,_0x22cf2a=(_0x247fda['width']-_0xe60400)/0x2,_0x108e15=(_0x247fda[_0x282fab(0xf7)]-_0x5de41b)/0x2;_0x52c329[_0x282fab(0x166)](_0x224576,_0x22cf2a,_0x108e15,{'width':_0xe60400,'height':_0x5de41b}),_0x2a2fa7!=_0x3fedb0&&_0x52c329['addPage']();}const _0x5bf02d=[];_0x52c329['on']('data',_0x5bf02d['push'][_0x282fab(0x161)](_0x5bf02d)),_0x52c329['on']('end',()=>{const _0x31c0a1=_0x282fab,_0xb2881d=Buffer['concat'](_0x5bf02d),_0x49fab2=_0xb2881d['toString'](_0x31c0a1(0x178));_0x15e46f[_0x31c0a1(0x150)]({'pdfContent':_0x49fab2});}),_0x52c329['end']();}catch(_0xd81d){_0x15e46f[_0x282fab(0x150)]({'message':_0xd81d[_0x282fab(0x13f)]});}}),module[a0_0x1914a3(0x141)]=router;function a0_0x41e1(){const _0x345adf=['exceljs','readFile','push','product_code','language','Secondary_Code','defaultProduct.avif','maxStocks','add_product','English','PSecondaryUnits','Secondary_Units','Units','English\x20(US)','barcode\x20user_id','CODE128','post','$brand','unit','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','1218018XNGKid','4475298qtVJnR','length','edit_product','redirect','Products','/barcode_filter','Alert_QTY','/barcode_data','/products/brands','body','Product_Name','Products\x20master','width','\x20<>\x20','product\x20add\x20successfully','/products_import_migrate_file','/brands','product_stock','message','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','exports','product\x20update\x20successfully','products','/units','categories_edit','primary_code','brand\x20data\x20update\x20successfully','single','max_number_per_units','/print_barcode_filter/','then','Spanish','/categories/:id','/view','xlsx','json','French','migrate_product_fule','Maximum_Stocks','secondary_unit','SheetNames','forEach','$product_details.product_name','brand\x20data\x20delete\x20successfully','/view/:id','flash','$product_name','ProductCode','long','Products_category','public/upload','PAlQty','bind','success','\x20added\x20successfully','jsbarcode','category','image','Workbook','product_category','/select_data','product_docs','PName','Product_Code','setHeader','Arabic','5494146bUhqhB','email','status','Finished\x20Goods','/print_barcode_single/:id','Portuguese\x20(BR)','save','prod_categ','sheet_to_json','base64','data','brand','toBuffer','express','/categories','2416914FtoSBF','columns','/view/add_products','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','concat','aggregate','/products/view','get','stock','Portuguese','pdfkit-table','findByIdAndDelete','user','min','findOne','/products/categories','params','multer','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Brands','/products_export_migrate_file','Raw\x20Materials','1169348DuoMhT','$product_details','originalname','Enabled','PBrands','MaxperUnits','send','alertquantity','1975605mExoBY','findById','/products/units','find','brands','Hindi','map','$product_details.product_stock','Arabic\x20(ae)','Primary_Code','errors','toString','Prod_Cat','unit\x20data\x20update\x20successfully','/units/:id','maxProdPerUnit','../public/language/languages.json','secondary_code','PUnits','warehouse','master','findByIdAndUpdate','Products\x20warehouse_data','height','addWorksheet','now','product_details.product_name','Products\x20find_data','hello','categ','$product_stock','product_barcode_products','categories','\x20unit\x20is\x20add\x20successfully','attachment;\x20filename=Product_Migration_File.xlsx','addPage','log','filename','units','unit\x20data\x20delete\x20successfully','_id','German','Category','2993048ZILTKH','$category','sku','name','Chinese','file','$_id','express/lib/response','write','diskStorage','render','PCat','12pdXHum'];a0_0x41e1=function(){return _0x345adf;};return a0_0x41e1();}