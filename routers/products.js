const a0_0x337b4b=a0_0x53e9;function a0_0x3f97(){const _0x1474ae=['Workbook','30XwivQH','multer','concat','Hindi','English\x20(US)','brand\x20data\x20update\x20successfully','Alert_QTY','body','brands','primary_code','secondary_code','309089YLEFzL','json','diskStorage','/categories','pdfkit-table','/units/delete/:id','min','height','public/Migration','unit\x20data\x20update\x20successfully','/products/units','toBuffer','edit\x20Product\x20master','hello','brand','redirect','Product_Name','$brand','274548BHhXKR','product\x20add\x20successfully','/brands/:id','products','2211408UryfLf','1159767ovGMSQ','Category','\x20<>\x20','canvas','$product_name','language','../models/all_models','Raw\x20Materials','name','/products/brands','Maximum_Stocks','French','jsbarcode','Brands','columns','attachment;\x20filename=Product_Migration_File.xlsx','bind','length','PSecondaryUnits','express','get','/brands','product_stock','migrate_product_fule','file','then','Finished\x20Goods','width','/view','status','Product_Code','product_category','barcode\x20Product\x20master','\x20categories\x20is\x20add\x20successfully','Arabic\x20(ae)','stock','find','product\x20edit','PCat','alertquantity','push','utils','maxStocks','8RSYrEY','/products_import_migrate_file','unit\x20data\x20delete\x20successfully','PBrands','/products/categories','Portuguese\x20(BR)','$product_stock','end','/categories/:id','Router','/categories/delete/:id','defaultProduct.avif','product_docs','log','render','findOne','prod_categ','PName','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','German','$product_category','public/upload','image','master','\x20added\x20successfully','product_code','English','categ','max_number_per_units','forEach','xlsx','Primary_Code','SheetNames','/barcode_data','$product_details','write','/filter_product','280KMJqpG','map','save','exports','setHeader','2925041kLEHVU','Units','toString','findByIdAndUpdate','$_id','product_details.product_name','Portuguese','\x20brand\x20is\x20add\x20successfully','numeric','Products\x20warehouse_data','Spanish','readFile','Arabic','brand\x20data\x20delete\x20successfully','unit','Products','../public/language/languages.json','2KPdeLL','/print_barcode_single/:id','public/Migration/','secondary_unit','errors','now','category','long','$category','/print_barcode','base64','categories_edit','single','/units/:id','/view/add_products','sku','units','user','categories','Content-Type','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','data','aggregate','Secondary_Units','message','success','warehouse','$product_details.product_stock','Enabled','13732NCiKNH','Products\x20find_data','addWorksheet','findByIdAndDelete','/print_barcode_filter/','flash','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Secondary_Code','sheet_to_json','PAlQty','CODE128','product_barcode','Products_category','findById','$product_docs','email','PUnits','Chinese','/products/view','params','filename','3320130DuujCd','originalname','express/lib/response','../middleware/auth','addPage','/brands/delete/:id','post','ProductCode'];a0_0x3f97=function(){return _0x1474ae;};return a0_0x3f97();}(function(_0x340bf7,_0x1013c9){const _0x35928c=a0_0x53e9,_0x205463=_0x340bf7();while(!![]){try{const _0x4b3e70=parseInt(_0x35928c(0x29d))/0x1*(parseInt(_0x35928c(0x257))/0x2)+parseInt(_0x35928c(0x1f1))/0x3+parseInt(_0x35928c(0x274))/0x4*(-parseInt(_0x35928c(0x241))/0x5)+-parseInt(_0x35928c(0x1ec))/0x6+parseInt(_0x35928c(0x246))/0x7+-parseInt(_0x35928c(0x21c))/0x8*(-parseInt(_0x35928c(0x1f0))/0x9)+-parseInt(_0x35928c(0x292))/0xa*(parseInt(_0x35928c(0x289))/0xb);if(_0x4b3e70===_0x1013c9)break;else _0x205463['push'](_0x205463['shift']());}catch(_0xc842d0){_0x205463['push'](_0x205463['shift']());}}}(a0_0x3f97,0x34acd));const express=require(a0_0x337b4b(0x204)),res=require(a0_0x337b4b(0x28b)),app=express(),router=express[a0_0x337b4b(0x225)](),multer=require(a0_0x337b4b(0x293)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x337b4b(0x1f7)),auth=require(a0_0x337b4b(0x28c)),users=require(a0_0x337b4b(0x256)),excelJS=require('exceljs'),xlsx=require(a0_0x337b4b(0x23a)),JsBarcode=require(a0_0x337b4b(0x1fd)),{Canvas}=require(a0_0x337b4b(0x1f4)),PDFDocument=require(a0_0x337b4b(0x2a1));function a0_0x53e9(_0x4cdc43,_0x2c57fe){const _0x3f97dd=a0_0x3f97();return a0_0x53e9=function(_0x53e996,_0x396caa){_0x53e996=_0x53e996-0x1e1;let _0x4e4f20=_0x3f97dd[_0x53e996];return _0x4e4f20;},a0_0x53e9(_0x4cdc43,_0x2c57fe);}router[a0_0x337b4b(0x205)]('/categories',auth,async(_0x2fedf6,_0x21a1d9)=>{const _0x5a42f6=a0_0x337b4b;try{const {username:_0x414edc,email:_0x4f30cc,role:_0x7589c7}=_0x2fedf6[_0x5a42f6(0x268)],_0x38bcca=_0x2fedf6[_0x5a42f6(0x268)],_0x4cf8b1=await profile[_0x5a42f6(0x22b)]({'email':_0x38bcca[_0x5a42f6(0x283)]}),_0x23616f=await master_shop[_0x5a42f6(0x215)]();console[_0x5a42f6(0x229)](_0x5a42f6(0x233),_0x23616f);const _0xb13d8c=await categories[_0x5a42f6(0x215)]();if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x296))var _0x15cffd=users[_0x5a42f6(0x236)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x295))var _0x15cffd=users[_0x5a42f6(0x295)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x22f))var _0x15cffd=users[_0x5a42f6(0x22f)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x250))var _0x15cffd=users[_0x5a42f6(0x250)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x1fc))var _0x15cffd=users[_0x5a42f6(0x1fc)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]==_0x5a42f6(0x221))var _0x15cffd=users[_0x5a42f6(0x24c)];else{if(_0x23616f[0x0]['language']==_0x5a42f6(0x285))var _0x15cffd=users[_0x5a42f6(0x285)];else{if(_0x23616f[0x0][_0x5a42f6(0x1f6)]=='Arabic\x20(ae)')var _0x15cffd=users[_0x5a42f6(0x252)];}}}}}}}_0x21a1d9['render'](_0x5a42f6(0x269),{'success':_0x2fedf6[_0x5a42f6(0x279)](_0x5a42f6(0x270)),'errors':_0x2fedf6[_0x5a42f6(0x279)]('errors'),'role':_0x38bcca,'profile':_0x4cf8b1,'user':_0xb13d8c,'master_shop':_0x23616f,'language':_0x15cffd});}catch(_0xdce20f){console[_0x5a42f6(0x229)](_0xdce20f);}}),router['post'](a0_0x337b4b(0x2a0),auth,async(_0x406c64,_0x1880c6)=>{const _0x4f817c=a0_0x337b4b;try{const {name:_0x20d6e2,products:_0x2d12b9}=_0x406c64[_0x4f817c(0x299)],_0x5886b9=new categories({'name':_0x20d6e2,'products':_0x2d12b9}),_0x4a0763=await categories[_0x4f817c(0x22b)]({'name':_0x20d6e2});_0x4a0763?_0x406c64[_0x4f817c(0x279)]('errors',_0x20d6e2+_0x4f817c(0x27a)):_0x406c64[_0x4f817c(0x279)](_0x4f817c(0x270),_0x20d6e2+_0x4f817c(0x212));const _0x3ef0b6=await _0x5886b9[_0x4f817c(0x243)]();_0x1880c6['redirect'](_0x4f817c(0x220));}catch(_0x3ccd59){console[_0x4f817c(0x229)](_0x3ccd59);}}),router['get'](a0_0x337b4b(0x224),auth,async(_0x11cb20,_0x490bd7)=>{const _0x8c86ee=a0_0x337b4b;try{const {username:_0x34c247,email:_0x1f0957,role:_0x1feb20}=_0x11cb20['user'],_0x5f1867=_0x11cb20[_0x8c86ee(0x268)],_0x1da3e8=await profile[_0x8c86ee(0x22b)]({'email':_0x5f1867[_0x8c86ee(0x283)]}),_0x3b12e6=await master_shop[_0x8c86ee(0x215)]();console[_0x8c86ee(0x229)](_0x8c86ee(0x233),_0x3b12e6);const _0x4c54b3=_0x11cb20[_0x8c86ee(0x287)]['id'];console['log'](_0x4c54b3);const _0x36e638=await categories[_0x8c86ee(0x281)](_0x4c54b3);if(_0x3b12e6[0x0][_0x8c86ee(0x1f6)]==_0x8c86ee(0x296))var _0x17051b=users[_0x8c86ee(0x236)];else{if(_0x3b12e6[0x0][_0x8c86ee(0x1f6)]==_0x8c86ee(0x295))var _0x17051b=users[_0x8c86ee(0x295)];else{if(_0x3b12e6[0x0][_0x8c86ee(0x1f6)]==_0x8c86ee(0x22f))var _0x17051b=users[_0x8c86ee(0x22f)];else{if(_0x3b12e6[0x0]['language']=='Spanish')var _0x17051b=users[_0x8c86ee(0x250)];else{if(_0x3b12e6[0x0][_0x8c86ee(0x1f6)]==_0x8c86ee(0x1fc))var _0x17051b=users['French'];else{if(_0x3b12e6[0x0][_0x8c86ee(0x1f6)]==_0x8c86ee(0x221))var _0x17051b=users[_0x8c86ee(0x24c)];else{if(_0x3b12e6[0x0]['language']=='Chinese')var _0x17051b=users[_0x8c86ee(0x285)];else{if(_0x3b12e6[0x0]['language']==_0x8c86ee(0x213))var _0x17051b=users['Arabic'];}}}}}}}_0x490bd7[_0x8c86ee(0x22a)]('categories',{'success':_0x11cb20[_0x8c86ee(0x279)](_0x8c86ee(0x270)),'errors':_0x11cb20[_0x8c86ee(0x279)](_0x8c86ee(0x25b)),'role':_0x5f1867,'profile':_0x1da3e8,'master_shop':_0x3b12e6,'user':_0x36e638,'language':_0x17051b});}catch(_0x137188){console[_0x8c86ee(0x229)](_0x137188);}}),router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x224),auth,async(_0x2bb336,_0x5781fe)=>{const _0x44e827=a0_0x337b4b;try{const _0x148c69=_0x2bb336[_0x44e827(0x287)]['id'],_0x315b40=await categories[_0x44e827(0x249)](_0x148c69,_0x2bb336[_0x44e827(0x299)]);_0x2bb336[_0x44e827(0x279)]('success',''+users[_0x44e827(0x262)]),_0x5781fe[_0x44e827(0x1e9)](_0x44e827(0x220));}catch(_0x2b169b){console[_0x44e827(0x229)](_0x2b169b);}}),router[a0_0x337b4b(0x205)](a0_0x337b4b(0x226),auth,async(_0x457900,_0x19211e)=>{const _0x21f521=a0_0x337b4b;try{const _0x14276=_0x457900[_0x21f521(0x287)]['id'],_0x325f1d=await categories['findByIdAndDelete'](_0x14276);_0x457900[_0x21f521(0x279)](_0x21f521(0x270),'categories\x20data\x20delete\x20successfully'),_0x19211e[_0x21f521(0x1e9)](_0x21f521(0x220));}catch(_0xadf64b){console['log'](_0xadf64b);}}),router[a0_0x337b4b(0x205)](a0_0x337b4b(0x206),auth,async(_0x35c438,_0x1996b1)=>{const _0x3d82be=a0_0x337b4b;try{const {username:_0x5c8246,email:_0xbde195,role:_0x163691}=_0x35c438[_0x3d82be(0x268)],_0x344230=_0x35c438[_0x3d82be(0x268)],_0xc9801e=await profile['findOne']({'email':_0x344230[_0x3d82be(0x283)]}),_0x1dfd0a=await master_shop[_0x3d82be(0x215)]();console['log'](_0x3d82be(0x233),_0x1dfd0a);const _0x43d66b=await brands[_0x3d82be(0x215)]();if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x296))var _0x40469e=users[_0x3d82be(0x236)];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]=='Hindi')var _0x40469e=users[_0x3d82be(0x295)];else{if(_0x1dfd0a[0x0]['language']=='German')var _0x40469e=users[_0x3d82be(0x22f)];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x250))var _0x40469e=users[_0x3d82be(0x250)];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x1fc))var _0x40469e=users[_0x3d82be(0x1fc)];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x221))var _0x40469e=users['Portuguese'];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x285))var _0x40469e=users[_0x3d82be(0x285)];else{if(_0x1dfd0a[0x0][_0x3d82be(0x1f6)]==_0x3d82be(0x213))var _0x40469e=users[_0x3d82be(0x252)];}}}}}}}_0x1996b1[_0x3d82be(0x22a)]('brands',{'success':_0x35c438[_0x3d82be(0x279)](_0x3d82be(0x270)),'errors':_0x35c438['flash'](_0x3d82be(0x25b)),'role':_0x344230,'profile':_0xc9801e,'master_shop':_0x1dfd0a,'user':_0x43d66b,'language':_0x40469e});}catch(_0x512413){console[_0x3d82be(0x229)](_0x512413);}}),router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x206),auth,async(_0x1caf3b,_0x3601a1)=>{const _0x5c96eb=a0_0x337b4b;try{const {name:_0x5c77a1,products:_0x2d6cb4}=_0x1caf3b[_0x5c96eb(0x299)],_0x3437c0=new brands({'name':_0x5c77a1,'products':_0x2d6cb4}),_0x4ff47d=await brands['findOne']({'name':_0x5c77a1});_0x4ff47d?_0x1caf3b['flash']('errors',_0x5c77a1+_0x5c96eb(0x26b)):_0x1caf3b[_0x5c96eb(0x279)](_0x5c96eb(0x270),_0x5c77a1+_0x5c96eb(0x24d));const _0x209cb8=await _0x3437c0[_0x5c96eb(0x243)]();_0x3601a1[_0x5c96eb(0x1e9)](_0x5c96eb(0x1fa));}catch(_0x2cedf7){console[_0x5c96eb(0x229)](_0x2cedf7);}}),router['get'](a0_0x337b4b(0x1ee),auth,async(_0x48fb9a,_0x13403e)=>{const _0x22a60a=a0_0x337b4b;try{const {username:_0x2fc4c3,email:_0x12d880,role:_0x168999}=_0x48fb9a[_0x22a60a(0x268)],_0x18c925=_0x48fb9a['user'],_0x583ed5=await profile[_0x22a60a(0x22b)]({'email':_0x18c925[_0x22a60a(0x283)]}),_0x5e3079=await master_shop[_0x22a60a(0x215)]();console[_0x22a60a(0x229)](_0x22a60a(0x233),_0x5e3079);const _0xba03b2=_0x48fb9a['params']['id'];console[_0x22a60a(0x229)](_0xba03b2);const _0x3ab6e5=await brands['findById'](_0xba03b2);if(_0x5e3079[0x0][_0x22a60a(0x1f6)]=='English\x20(US)')var _0x3e5968=users[_0x22a60a(0x236)];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]=='Hindi')var _0x3e5968=users[_0x22a60a(0x295)];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]=='German')var _0x3e5968=users['German'];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]==_0x22a60a(0x250))var _0x3e5968=users[_0x22a60a(0x250)];else{if(_0x5e3079[0x0]['language']==_0x22a60a(0x1fc))var _0x3e5968=users[_0x22a60a(0x1fc)];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]==_0x22a60a(0x221))var _0x3e5968=users[_0x22a60a(0x24c)];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]==_0x22a60a(0x285))var _0x3e5968=users[_0x22a60a(0x285)];else{if(_0x5e3079[0x0][_0x22a60a(0x1f6)]==_0x22a60a(0x213))var _0x3e5968=users[_0x22a60a(0x252)];}}}}}}}_0x13403e['render']('brands',{'success':_0x48fb9a[_0x22a60a(0x279)](_0x22a60a(0x270)),'errors':_0x48fb9a[_0x22a60a(0x279)]('errors'),'role':_0x18c925,'profile':_0x583ed5,'master_shop':_0x5e3079,'user':_0x3ab6e5,'language':_0x3e5968});}catch(_0x29688b){console[_0x22a60a(0x229)](_0x29688b);}}),router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x1ee),auth,async(_0x4d9849,_0x364523)=>{const _0x114d00=a0_0x337b4b;try{const _0x5df34c=_0x4d9849[_0x114d00(0x287)]['id'],_0x40fc1a=await brands[_0x114d00(0x249)](_0x5df34c,_0x4d9849[_0x114d00(0x299)]);_0x4d9849[_0x114d00(0x279)](_0x114d00(0x270),_0x114d00(0x297)),_0x364523[_0x114d00(0x1e9)](_0x114d00(0x1fa));}catch(_0x2ba356){console[_0x114d00(0x229)](_0x2ba356);}}),router['get'](a0_0x337b4b(0x28e),auth,async(_0x3be0b0,_0x34d914)=>{const _0x13d3b2=a0_0x337b4b;try{const _0x7e4a13=_0x3be0b0[_0x13d3b2(0x287)]['id'],_0x556d82=await brands[_0x13d3b2(0x277)](_0x7e4a13);_0x3be0b0[_0x13d3b2(0x279)](_0x13d3b2(0x270),_0x13d3b2(0x253)),_0x34d914[_0x13d3b2(0x1e9)](_0x13d3b2(0x1fa));}catch(_0xc1e507){console['log'](_0xc1e507);}}),router[a0_0x337b4b(0x205)]('/units',auth,async(_0x8ad6b0,_0x2ba323)=>{const _0x2ccf45=a0_0x337b4b;try{const {username:_0x5628b5,email:_0x1d9f22,role:_0x283fc4}=_0x8ad6b0[_0x2ccf45(0x268)],_0x54f150=_0x8ad6b0[_0x2ccf45(0x268)],_0x15d409=await profile['findOne']({'email':_0x54f150[_0x2ccf45(0x283)]}),_0x1be1cf=await master_shop[_0x2ccf45(0x215)]();console[_0x2ccf45(0x229)](_0x2ccf45(0x233),_0x1be1cf);const _0x248169=await units['find']();if(_0x1be1cf[0x0]['language']==_0x2ccf45(0x296))var _0x1627a1=users[_0x2ccf45(0x236)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]==_0x2ccf45(0x295))var _0x1627a1=users[_0x2ccf45(0x295)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]=='German')var _0x1627a1=users['German'];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]==_0x2ccf45(0x250))var _0x1627a1=users[_0x2ccf45(0x250)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]==_0x2ccf45(0x1fc))var _0x1627a1=users[_0x2ccf45(0x1fc)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]=='Portuguese\x20(BR)')var _0x1627a1=users[_0x2ccf45(0x24c)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]=='Chinese')var _0x1627a1=users[_0x2ccf45(0x285)];else{if(_0x1be1cf[0x0][_0x2ccf45(0x1f6)]==_0x2ccf45(0x213))var _0x1627a1=users['Arabic'];}}}}}}}_0x2ba323[_0x2ccf45(0x22a)](_0x2ccf45(0x267),{'success':_0x8ad6b0[_0x2ccf45(0x279)](_0x2ccf45(0x270)),'errors':_0x8ad6b0[_0x2ccf45(0x279)](_0x2ccf45(0x25b)),'role':_0x54f150,'profile':_0x15d409,'master_shop':_0x1be1cf,'user':_0x248169,'language':_0x1627a1});}catch(_0x112c9a){console[_0x2ccf45(0x229)](_0x112c9a);}}),router[a0_0x337b4b(0x28f)]('/units',auth,async(_0x1e5560,_0x189c15)=>{const _0x568ba1=a0_0x337b4b;try{const {name:_0x1accc4,secondary_unit:_0x3b7a84,products:_0x6cc573}=_0x1e5560[_0x568ba1(0x299)],_0x3ba761=new units({'name':_0x1accc4,'secondary_unit':_0x3b7a84,'products':_0x6cc573}),_0x553051=await units[_0x568ba1(0x22b)]({'name':_0x1accc4});_0x553051?_0x1e5560[_0x568ba1(0x279)](_0x568ba1(0x25b),_0x1accc4+_0x568ba1(0x22e)):_0x1e5560[_0x568ba1(0x279)](_0x568ba1(0x270),_0x1accc4+'\x20unit\x20is\x20add\x20successfully');const _0x330fa6=await _0x3ba761['save']();_0x189c15[_0x568ba1(0x1e9)](_0x568ba1(0x1e4));}catch(_0xc8b767){console[_0x568ba1(0x229)](_0xc8b767);}}),router[a0_0x337b4b(0x205)](a0_0x337b4b(0x264),auth,async(_0x49932c,_0x5aba02)=>{const _0x16a2c1=a0_0x337b4b;try{const {username:_0x1a3d60,email:_0x31249f,role:_0xb2ddf8}=_0x49932c[_0x16a2c1(0x268)],_0x4bd0e2=_0x49932c[_0x16a2c1(0x268)],_0x48cd6f=await profile[_0x16a2c1(0x22b)]({'email':_0x4bd0e2['email']}),_0x5c6093=await master_shop[_0x16a2c1(0x215)]();console[_0x16a2c1(0x229)](_0x16a2c1(0x233),_0x5c6093);const _0x2c4ca7=_0x49932c[_0x16a2c1(0x287)]['id'],_0x26936d=await units[_0x16a2c1(0x281)](_0x2c4ca7);if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x296))var _0x573e1a=users[_0x16a2c1(0x236)];else{if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x295))var _0x573e1a=users[_0x16a2c1(0x295)];else{if(_0x5c6093[0x0]['language']==_0x16a2c1(0x22f))var _0x573e1a=users[_0x16a2c1(0x22f)];else{if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x250))var _0x573e1a=users[_0x16a2c1(0x250)];else{if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x1fc))var _0x573e1a=users['French'];else{if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x221))var _0x573e1a=users[_0x16a2c1(0x24c)];else{if(_0x5c6093[0x0]['language']==_0x16a2c1(0x285))var _0x573e1a=users[_0x16a2c1(0x285)];else{if(_0x5c6093[0x0][_0x16a2c1(0x1f6)]==_0x16a2c1(0x213))var _0x573e1a=users[_0x16a2c1(0x252)];}}}}}}}_0x5aba02[_0x16a2c1(0x22a)]('units',{'success':_0x49932c[_0x16a2c1(0x279)](_0x16a2c1(0x270)),'errors':_0x49932c[_0x16a2c1(0x279)](_0x16a2c1(0x25b)),'role':_0x4bd0e2,'profile':_0x48cd6f,'master_shop':_0x5c6093,'user':_0x26936d,'language':_0x573e1a});}catch(_0x64645d){console[_0x16a2c1(0x229)](_0x64645d);}}),router['post'](a0_0x337b4b(0x264),auth,async(_0x412abd,_0x2605a9)=>{const _0x2225d3=a0_0x337b4b;try{const _0x5b76eb=_0x412abd[_0x2225d3(0x287)]['id'],_0x36e066=await units[_0x2225d3(0x249)](_0x5b76eb,_0x412abd[_0x2225d3(0x299)]);_0x412abd['flash'](_0x2225d3(0x270),_0x2225d3(0x1e3)),_0x2605a9['redirect'](_0x2225d3(0x1e4));}catch(_0x44badd){console[_0x2225d3(0x229)](_0x44badd);}}),router[a0_0x337b4b(0x205)](a0_0x337b4b(0x2a2),auth,async(_0x21c89e,_0x94a700)=>{const _0x2ef81b=a0_0x337b4b;try{const _0x51135b=_0x21c89e[_0x2ef81b(0x287)]['id'],_0x547036=await units[_0x2ef81b(0x277)](_0x51135b);_0x21c89e[_0x2ef81b(0x279)](_0x2ef81b(0x270),_0x2ef81b(0x21e)),_0x94a700['redirect']('/products/units');}catch(_0xf1723d){console[_0x2ef81b(0x229)](_0xf1723d);}});const storage=multer[a0_0x337b4b(0x29f)]({'destination':(_0x9884fa,_0x4435b2,_0x1f0ee0)=>{const _0x2ce185=a0_0x337b4b;_0x1f0ee0(null,_0x2ce185(0x231));},'filename':(_0x21be25,_0x1fc38e,_0x340541)=>{const _0x328be2=a0_0x337b4b;_0x340541(null,Date[_0x328be2(0x25c)]()+_0x1fc38e[_0x328be2(0x28a)]);}}),upload=multer({'storage':storage});router[a0_0x337b4b(0x205)](a0_0x337b4b(0x20d),auth,async(_0x24d6f8,_0xba9261)=>{const _0x14afc2=a0_0x337b4b;try{const {username:_0xb334bd,email:_0x3df50a,role:_0x3834bb}=_0x24d6f8[_0x14afc2(0x268)],_0x3269ff=_0x24d6f8[_0x14afc2(0x268)],_0x1cb566=await profile['findOne']({'email':_0x3269ff['email']}),_0x488bca={'year':_0x14afc2(0x24e),'month':_0x14afc2(0x25e),'day':_0x14afc2(0x24e)},_0x572a67=await master_shop[_0x14afc2(0x215)]();console[_0x14afc2(0x229)]('Products\x20master',_0x572a67);const _0x54c097=await product[_0x14afc2(0x215)]();console['log'](_0x14afc2(0x275),_0x54c097);const _0x3cd461=await warehouse[_0x14afc2(0x26d)]([{'$unwind':_0x14afc2(0x23e)},{'$lookup':{'from':_0x14afc2(0x1ef),'localField':_0x14afc2(0x24b),'foreignField':_0x14afc2(0x1f9),'as':_0x14afc2(0x228)}},{'$unwind':_0x14afc2(0x282)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x14afc2(0x272)}},{'$group':{'_id':_0x14afc2(0x1f5),'product_stock':{'$sum':_0x14afc2(0x222)}}}]);console[_0x14afc2(0x229)](_0x14afc2(0x24f),_0x3cd461),_0x3cd461[_0x14afc2(0x239)](_0x39d61d=>{const _0x43ecd1=_0x14afc2,_0x5cf96b=_0x54c097[_0x43ecd1(0x242)](_0x8787bc=>{const _0x267f12=_0x43ecd1;_0x8787bc[_0x267f12(0x1f9)]==_0x39d61d['_id']&&(_0x8787bc[_0x267f12(0x214)]=parseInt(_0x8787bc[_0x267f12(0x214)])+parseInt(_0x39d61d[_0x267f12(0x207)]));});}),console[_0x14afc2(0x229)]('Products\x20find_data',_0x54c097);if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x296))var _0x5f2170=users[_0x14afc2(0x236)];else{if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x295))var _0x5f2170=users[_0x14afc2(0x295)];else{if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x22f))var _0x5f2170=users[_0x14afc2(0x22f)];else{if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x250))var _0x5f2170=users[_0x14afc2(0x250)];else{if(_0x572a67[0x0]['language']==_0x14afc2(0x1fc))var _0x5f2170=users[_0x14afc2(0x1fc)];else{if(_0x572a67[0x0]['language']==_0x14afc2(0x221))var _0x5f2170=users['Portuguese'];else{if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x285))var _0x5f2170=users[_0x14afc2(0x285)];else{if(_0x572a67[0x0][_0x14afc2(0x1f6)]==_0x14afc2(0x213))var _0x5f2170=users[_0x14afc2(0x252)];}}}}}}}_0xba9261[_0x14afc2(0x22a)](_0x14afc2(0x1ef),{'success':_0x24d6f8[_0x14afc2(0x279)]('success'),'errors':_0x24d6f8[_0x14afc2(0x279)](_0x14afc2(0x25b)),'alldata':_0x54c097,'profile':_0x1cb566,'master_shop':_0x572a67,'role':_0x3269ff,'product_stock':_0x3cd461,'language':_0x5f2170});}catch(_0x53c590){console['log'](_0x53c590);}}),router['get']('/view/add_products',auth,async(_0x4dad41,_0x31d3bf)=>{const _0x399ddc=a0_0x337b4b;try{const {username:_0x2b932b,email:_0x15a442,role:_0x23ec41}=_0x4dad41[_0x399ddc(0x268)],_0x1e02d2=_0x4dad41['user'],_0x5eb33c=await profile[_0x399ddc(0x22b)]({'email':_0x1e02d2[_0x399ddc(0x283)]}),_0x650cf8=await master_shop[_0x399ddc(0x215)]();console['log'](_0x399ddc(0x233),_0x650cf8);const _0x24e415=await categories[_0x399ddc(0x215)]({}),_0x582fd7=await brands[_0x399ddc(0x215)]({}),_0x2900a0=await units[_0x399ddc(0x215)]({}),_0x7686b0=await warehouse[_0x399ddc(0x215)]({'status':_0x399ddc(0x273)});if(_0x650cf8[0x0][_0x399ddc(0x1f6)]==_0x399ddc(0x296))var _0x187369=users[_0x399ddc(0x236)];else{if(_0x650cf8[0x0]['language']==_0x399ddc(0x295))var _0x187369=users[_0x399ddc(0x295)];else{if(_0x650cf8[0x0][_0x399ddc(0x1f6)]=='German')var _0x187369=users['German'];else{if(_0x650cf8[0x0][_0x399ddc(0x1f6)]==_0x399ddc(0x250))var _0x187369=users['Spanish'];else{if(_0x650cf8[0x0][_0x399ddc(0x1f6)]==_0x399ddc(0x1fc))var _0x187369=users['French'];else{if(_0x650cf8[0x0][_0x399ddc(0x1f6)]=='Portuguese\x20(BR)')var _0x187369=users[_0x399ddc(0x24c)];else{if(_0x650cf8[0x0]['language']==_0x399ddc(0x285))var _0x187369=users['Chinese'];else{if(_0x650cf8[0x0]['language']==_0x399ddc(0x213))var _0x187369=users[_0x399ddc(0x252)];}}}}}}}_0x31d3bf[_0x399ddc(0x22a)]('add_product',{'success':_0x4dad41[_0x399ddc(0x279)](_0x399ddc(0x270)),'errors':_0x4dad41[_0x399ddc(0x279)](_0x399ddc(0x25b)),'role':_0x1e02d2,'profile':_0x5eb33c,'categories':_0x24e415,'brands':_0x582fd7,'master_shop':_0x650cf8,'units':_0x2900a0,'language':_0x187369,'find_data':_0x7686b0});}catch(_0x322b1c){console[_0x399ddc(0x229)](_0x322b1c);}}),router['post'](a0_0x337b4b(0x265),auth,upload[a0_0x337b4b(0x263)](a0_0x337b4b(0x232)),async(_0x1b6dcc,_0xc6d94f)=>{const _0x1774ee=a0_0x337b4b;try{const {name:_0x4c12c1,category:_0x1c628c,brand:_0x1186e5,unit:_0x2fe3f4,alertquantity:_0x1e5388,stock:_0xcc1e52,product_code:_0x570696,warehouse:_0x374ffa,primary_ItemCode:_0x5e9798,second_ItemCode:_0x4b4f31,second_unit:_0x4027b9,maxPerUnit:_0x5f1293,MaxPerProduct:_0x3d9d02}=_0x1b6dcc[_0x1774ee(0x299)],_0x19c8fa=_0x1b6dcc[_0x1774ee(0x209)]?.[_0x1774ee(0x288)]||_0x1774ee(0x227),_0x2fa0fd=new product({'image':_0x19c8fa,'name':_0x4c12c1,'category':_0x1c628c,'brand':_0x1186e5,'unit':_0x2fe3f4,'alertquantity':_0x1e5388,'stock':_0xcc1e52,'product_code':_0x570696,'warehouse':_0x374ffa,'primary_code':_0x5e9798,'secondary_code':_0x4b4f31,'second_unit':_0x4027b9,'maxStocks':_0x3d9d02,'maxProdPerUnit':_0x5f1293}),_0x11d0f6=await _0x2fa0fd[_0x1774ee(0x243)](),_0x1c18e3=await categories[_0x1774ee(0x22b)]({'name':_0x1c628c});_0x1c18e3[_0x1774ee(0x1ef)]=parseInt(_0x1c18e3[_0x1774ee(0x1ef)])+0x1,await _0x1c18e3[_0x1774ee(0x243)]();const _0x48a1b1=await brands[_0x1774ee(0x22b)]({'name':_0x1186e5});_0x48a1b1[_0x1774ee(0x1ef)]=parseInt(_0x48a1b1[_0x1774ee(0x1ef)])+0x1,await _0x48a1b1['save']();const _0xc1b807=await units[_0x1774ee(0x22b)]({'name':_0x2fe3f4});_0xc1b807['products']=parseInt(_0xc1b807[_0x1774ee(0x1ef)])+0x1,await _0xc1b807['save'](),_0x1b6dcc[_0x1774ee(0x279)](_0x1774ee(0x270),_0x1774ee(0x1ed)),_0xc6d94f[_0x1774ee(0x1e9)](_0x1774ee(0x286));}catch(_0xb59cd1){console[_0x1774ee(0x229)](_0xb59cd1);}}),router[a0_0x337b4b(0x205)]('/view/:id',auth,async(_0x1638c5,_0xdf2fe4)=>{const _0x1c3ee4=a0_0x337b4b;try{const {username:_0xd07608,email:_0x10747c,role:_0x51871e}=_0x1638c5['user'],_0x548973=_0x1638c5[_0x1c3ee4(0x268)],_0xec966c=await profile[_0x1c3ee4(0x22b)]({'email':_0x548973[_0x1c3ee4(0x283)]}),_0x44b03a=await master_shop[_0x1c3ee4(0x215)]();console[_0x1c3ee4(0x229)](_0x1c3ee4(0x1e6),_0x44b03a);const _0x471fa6=_0x1638c5[_0x1c3ee4(0x287)]['id'],_0x5295ef=await product['findById'](_0x471fa6),_0x13945e=await categories[_0x1c3ee4(0x215)]({}),_0x564e7a=await brands[_0x1c3ee4(0x215)]({}),_0x29ce60=await units[_0x1c3ee4(0x215)]({}),_0x1b469d=await warehouse['find']({'status':'Enabled'}),_0x158150=await units[_0x1c3ee4(0x26d)]([{'$group':{'_id':_0x1c3ee4(0x24a),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x44b03a[0x0]['language']==_0x1c3ee4(0x296))var _0x320ada=users[_0x1c3ee4(0x236)];else{if(_0x44b03a[0x0]['language']==_0x1c3ee4(0x295))var _0x320ada=users['Hindi'];else{if(_0x44b03a[0x0][_0x1c3ee4(0x1f6)]==_0x1c3ee4(0x22f))var _0x320ada=users[_0x1c3ee4(0x22f)];else{if(_0x44b03a[0x0][_0x1c3ee4(0x1f6)]==_0x1c3ee4(0x250))var _0x320ada=users[_0x1c3ee4(0x250)];else{if(_0x44b03a[0x0][_0x1c3ee4(0x1f6)]==_0x1c3ee4(0x1fc))var _0x320ada=users[_0x1c3ee4(0x1fc)];else{if(_0x44b03a[0x0]['language']==_0x1c3ee4(0x221))var _0x320ada=users[_0x1c3ee4(0x24c)];else{if(_0x44b03a[0x0][_0x1c3ee4(0x1f6)]==_0x1c3ee4(0x285))var _0x320ada=users[_0x1c3ee4(0x285)];else{if(_0x44b03a[0x0][_0x1c3ee4(0x1f6)]==_0x1c3ee4(0x213))var _0x320ada=users[_0x1c3ee4(0x252)];}}}}}}}_0xdf2fe4[_0x1c3ee4(0x22a)]('edit_product',{'success':_0x1638c5[_0x1c3ee4(0x279)](_0x1c3ee4(0x270)),'errors':_0x1638c5[_0x1c3ee4(0x279)](_0x1c3ee4(0x25b)),'role':_0x548973,'profile':_0xec966c,'alldata':_0x5295ef,'categories':_0x13945e,'brands':_0x564e7a,'master_shop':_0x44b03a,'units':_0x29ce60,'secondunit':_0x158150,'find_data':_0x1b469d,'language':_0x320ada});}catch(_0x48a71b){console['log'](_0x48a71b);}}),router['post']('/view/:id',auth,upload[a0_0x337b4b(0x263)](a0_0x337b4b(0x232)),async(_0x6abae9,_0xd9307a)=>{const _0x145f4f=a0_0x337b4b;try{console[_0x145f4f(0x229)](_0x145f4f(0x1e7));const _0x20e764=_0x6abae9[_0x145f4f(0x287)]['id'],_0x57ee76=await product[_0x145f4f(0x281)](_0x20e764),{image:_0x50a405,name:_0x1a8dde,category:_0x1038ea,brand:_0x1b31d9,sku:_0x327bc2,unit:_0x35f61a,alertquantity:_0x282a12,product_code:_0xa55d8d,warehouse:_0x445e5f,primary_ItemCode:_0x48f466,second_ItemCode:_0x2ca82f,second_unit:_0x5a1299,maxPerUnit:_0x2f7187,MaxPerProduct:_0x853c58,prod_catdata:_0x188eaf}=_0x6abae9[_0x145f4f(0x299)];_0x6abae9['file']&&(_0x57ee76['image']=_0x6abae9[_0x145f4f(0x209)]['filename']);_0x57ee76[_0x145f4f(0x1f9)]=_0x1a8dde,_0x57ee76[_0x145f4f(0x25d)]=_0x1038ea,_0x57ee76[_0x145f4f(0x1e8)]=_0x1b31d9,_0x57ee76[_0x145f4f(0x266)]=_0x327bc2,_0x57ee76[_0x145f4f(0x254)]=_0x35f61a,_0x57ee76[_0x145f4f(0x218)]=_0x282a12,_0x57ee76['product_code']=_0xa55d8d,_0x57ee76[_0x145f4f(0x271)]=_0x445e5f,_0x57ee76[_0x145f4f(0x29b)]=_0x48f466,_0x57ee76[_0x145f4f(0x29c)]=_0x2ca82f,_0x57ee76['secondary_unit']=_0x5a1299,_0x57ee76[_0x145f4f(0x21b)]=_0x853c58,_0x57ee76['maxProdPerUnit']=_0x2f7187,_0x57ee76[_0x145f4f(0x210)]=_0x188eaf;const _0x125125=await _0x57ee76['save']();console[_0x145f4f(0x229)](_0x145f4f(0x216),_0x57ee76),_0x6abae9[_0x145f4f(0x279)]('success','product\x20update\x20successfully'),_0xd9307a[_0x145f4f(0x1e9)](_0x145f4f(0x286));}catch(_0x31ca63){console['log'](_0x31ca63);}}),router[a0_0x337b4b(0x205)]('/barcode/:id',auth,async(_0x561b3e,_0x277bd0)=>{const _0x1c5bbc=a0_0x337b4b;try{const {username:_0x403265,email:_0x376540,role:_0xab9621}=_0x561b3e[_0x1c5bbc(0x268)],_0x486aed=_0x561b3e['user'],_0x4e204c=await profile[_0x1c5bbc(0x22b)]({'email':_0x486aed[_0x1c5bbc(0x283)]}),_0x35951e=await master_shop[_0x1c5bbc(0x215)]();console[_0x1c5bbc(0x229)](_0x1c5bbc(0x211),_0x35951e);const _0x2284d3=_0x561b3e[_0x1c5bbc(0x287)]['id'],_0x30ca7a=await product['findById'](_0x2284d3);console['log']('barcode\x20user_id',_0x30ca7a);if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]==_0x1c5bbc(0x296))var _0x407a3f=users[_0x1c5bbc(0x236)];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]=='Hindi')var _0x407a3f=users[_0x1c5bbc(0x295)];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]==_0x1c5bbc(0x22f))var _0x407a3f=users['German'];else{if(_0x35951e[0x0]['language']==_0x1c5bbc(0x250))var _0x407a3f=users['Spanish'];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]=='French')var _0x407a3f=users['French'];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]==_0x1c5bbc(0x221))var _0x407a3f=users['Portuguese'];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]==_0x1c5bbc(0x285))var _0x407a3f=users['Chinese'];else{if(_0x35951e[0x0][_0x1c5bbc(0x1f6)]=='Arabic\x20(ae)')var _0x407a3f=users[_0x1c5bbc(0x252)];}}}}}}}_0x277bd0[_0x1c5bbc(0x22a)](_0x1c5bbc(0x27f),{'success':_0x561b3e[_0x1c5bbc(0x279)](_0x1c5bbc(0x270)),'errors':_0x561b3e[_0x1c5bbc(0x279)](_0x1c5bbc(0x25b)),'role':_0x486aed,'profile':_0x4e204c,'alldata':_0x30ca7a,'master_shop':_0x35951e,'language':_0x407a3f});}catch(_0x25d5f7){console[_0x1c5bbc(0x229)](_0x25d5f7);}}),router['get']('/products_export_migrate_file',auth,async(_0x4fb692,_0x1ebfbd)=>{const _0x34a0c1=a0_0x337b4b;try{const _0x4208d8=new excelJS[(_0x34a0c1(0x291))](),_0x56cd0b=_0x4208d8[_0x34a0c1(0x276)](_0x34a0c1(0x255));return _0x56cd0b[_0x34a0c1(0x1ff)]=[{'header':_0x34a0c1(0x1ea),'key':_0x34a0c1(0x22d),'width':0xa},{'header':'Brands','key':_0x34a0c1(0x21f),'width':0xa},{'header':_0x34a0c1(0x247),'key':_0x34a0c1(0x284),'width':0xa},{'header':_0x34a0c1(0x26e),'key':_0x34a0c1(0x203),'width':0xa},{'header':_0x34a0c1(0x238),'key':'MaxperUnits','width':0xa},{'header':_0x34a0c1(0x23b),'key':_0x34a0c1(0x290),'width':0xa},{'header':'Secondary_Code','key':_0x34a0c1(0x290),'width':0xa},{'header':'Product_Code','key':_0x34a0c1(0x290),'width':0xa},{'header':_0x34a0c1(0x1f2),'key':_0x34a0c1(0x217),'width':0xa},{'header':_0x34a0c1(0x298),'key':_0x34a0c1(0x27d),'width':0xa},{'header':'Maximum_Stocks','key':_0x34a0c1(0x27d),'width':0xa},{'header':'Products_category','key':'Prod_Cat','width':0xa}],_0x1ebfbd[_0x34a0c1(0x245)](_0x34a0c1(0x26a),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x1ebfbd[_0x34a0c1(0x245)]('Content-Disposition',_0x34a0c1(0x200)),_0x4208d8[_0x34a0c1(0x23a)][_0x34a0c1(0x23f)](_0x1ebfbd)[_0x34a0c1(0x20a)](()=>{_0x1ebfbd['status'](0xc8);});}catch(_0x557978){_0x1ebfbd[_0x34a0c1(0x20e)](0x190)['send'](_0x557978);}});const storage1=multer[a0_0x337b4b(0x29f)]({'destination':(_0x2c42e4,_0x3df691,_0x287361)=>{const _0x4559d2=a0_0x337b4b;_0x287361(null,_0x4559d2(0x1e2));},'filename':(_0x454bfe,_0x732d3e,_0x52fe34)=>{const _0x1c7d0d=a0_0x337b4b;_0x52fe34(null,Date[_0x1c7d0d(0x25c)]()+_0x732d3e['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x21d),auth,uploadMigrate[a0_0x337b4b(0x263)](a0_0x337b4b(0x208)),async(_0x5597f2,_0xeb1572)=>{const _0x2623eb=a0_0x337b4b,_0x224b47=_0x5597f2[_0x2623eb(0x209)][_0x2623eb(0x288)],_0x184af8=await xlsx[_0x2623eb(0x251)](_0x2623eb(0x259)+_0x224b47);let _0x1b89cb=_0x184af8[_0x2623eb(0x23c)],_0x553e96=xlsx[_0x2623eb(0x21a)][_0x2623eb(0x27c)](_0x184af8['Sheets'][_0x1b89cb[0x0]]);for(const _0x2c1b57 of _0x553e96){const _0x22a15e=_0x2c1b57[_0x2623eb(0x1ea)],_0x275a5d=_0x2c1b57[_0x2623eb(0x1fe)],_0x3d8698=_0x2c1b57['Units'],_0x3da43e=_0x2c1b57[_0x2623eb(0x26e)],_0xbf9298=_0x2c1b57[_0x2623eb(0x20f)],_0xfb212d=_0x2c1b57[_0x2623eb(0x1f2)],_0x4fb895=_0x2c1b57[_0x2623eb(0x298)],_0x418388=_0x2c1b57[_0x2623eb(0x23b)],_0x2413f0=_0x2c1b57[_0x2623eb(0x27b)],_0x519566=_0x2c1b57[_0x2623eb(0x1fb)],_0x2bc041=_0x2c1b57[_0x2623eb(0x238)],_0x54777b=_0x2c1b57[_0x2623eb(0x280)];try{let _0x18dbd9=await categories[_0x2623eb(0x22b)]({'name':_0xfb212d});if(!_0x18dbd9){const _0x4923c7=new categories({'name':_0xfb212d,'products':'0'});_0x18dbd9=await _0x4923c7[_0x2623eb(0x243)]();}let _0x2c7339=await brands[_0x2623eb(0x22b)]({'name':_0x275a5d});if(!_0x2c7339){const _0x434a7f=new brands({'name':_0x275a5d,'products':'0'});_0x2c7339=await _0x434a7f[_0x2623eb(0x243)]();}let _0x32e2f2=await units[_0x2623eb(0x22b)]({'name':_0x3d8698,'secondary_unit':_0x3da43e});if(!_0x32e2f2){const _0x3067bd=new units({'name':_0x3d8698,'secondary_unit':_0x3da43e,'products':'0'});_0x32e2f2=await _0x3067bd['save']();}const _0xee57db=await product[_0x2623eb(0x215)]({'name':_0x22a15e,'category':_0x18dbd9[_0x2623eb(0x1f9)],'brand':_0x2c7339['name'],'secondary_unit':_0x32e2f2['secondary_unit'],'product_code':_0xbf9298});console[_0x2623eb(0x229)](_0xee57db[_0x2623eb(0x202)]+_0x2623eb(0x1f3)+_0x18dbd9[_0x2623eb(0x1f9)]+_0x2623eb(0x1f3)+_0x2c7339['name']+_0x2623eb(0x1f3)+_0x32e2f2[_0x2623eb(0x25a)]+_0x2623eb(0x1f3)+_0xbf9298+_0x2623eb(0x1f3)+_0x22a15e);if(_0xee57db[_0x2623eb(0x202)]===0x0){const _0x278d16=new product({'image':_0x2623eb(0x227),'name':_0x22a15e,'category':_0x18dbd9['name'],'brand':_0x2c7339[_0x2623eb(0x1f9)],'unit':_0x32e2f2[_0x2623eb(0x1f9)],'alertquantity':_0x4fb895,'product_code':_0xbf9298,'secondary_unit':_0x32e2f2['secondary_unit'],'primary_code':_0x418388,'secondary_code':_0x2413f0,'maxStocks':_0x519566,'maxProdPerUnit':_0x2bc041,'product_category':_0x54777b}),_0x5f0fcb=await _0x278d16[_0x2623eb(0x243)]();_0x18dbd9[_0x2623eb(0x1ef)]=parseInt(_0x18dbd9[_0x2623eb(0x1ef)])+0x1,await _0x18dbd9['save'](),_0x2c7339[_0x2623eb(0x1ef)]=parseInt(_0x2c7339['products'])+0x1,await _0x2c7339['save'](),_0x32e2f2[_0x2623eb(0x1ef)]=parseInt(_0x32e2f2[_0x2623eb(0x1ef)])+0x1,await _0x32e2f2[_0x2623eb(0x243)](),_0x5597f2[_0x2623eb(0x279)](_0x2623eb(0x270),_0x22a15e+_0x2623eb(0x234));}else{console[_0x2623eb(0x229)](_0xee57db[0x0]);const _0x549097=_0xee57db[0x0];_0x549097['category']=_0x18dbd9['name'],_0x549097[_0x2623eb(0x1e8)]=_0x2c7339[_0x2623eb(0x1f9)],_0x549097[_0x2623eb(0x254)]=_0x32e2f2[_0x2623eb(0x1f9)],_0x549097[_0x2623eb(0x218)]=_0x4fb895,_0x549097[_0x2623eb(0x235)]=_0xbf9298,_0x549097[_0x2623eb(0x25a)]=_0x32e2f2[_0x2623eb(0x25a)],_0x549097[_0x2623eb(0x29b)]=_0x418388,_0x549097['secondary_code']=_0x2413f0,_0x549097[_0x2623eb(0x21b)]=_0x519566,_0x549097['maxProdPerUnit']=_0x2bc041,_0x549097[_0x2623eb(0x210)]=_0x54777b;const _0x3ce31d=await _0x549097[_0x2623eb(0x243)]();_0x5597f2[_0x2623eb(0x279)](_0x2623eb(0x270),_0x3ce31d[_0x2623eb(0x1f9)]+'\x20Edit\x20Successfully');}}catch(_0x20b4b0){_0xeb1572[_0x2623eb(0x20e)](0x1f4)[_0x2623eb(0x29e)]({'proderror':_0x20b4b0[_0x2623eb(0x26f)],'aproduct':_0x22a15e});}}_0xeb1572[_0x2623eb(0x1e9)](_0x2623eb(0x286));}),router['post']('/select_data',auth,async(_0x54182d,_0x49568b)=>{const _0x4e3b6c=a0_0x337b4b;try{console[_0x4e3b6c(0x229)](_0x54182d[_0x4e3b6c(0x299)]);const {data_cateory:_0x34bcf1,datachoose:_0x3ad28b}=_0x54182d[_0x4e3b6c(0x299)];var _0x3331ea;if(_0x3ad28b==_0x4e3b6c(0x22c))_0x3331ea=await product[_0x4e3b6c(0x26d)]([{'$group':{'_id':_0x4e3b6c(0x230)}}]);else{if(_0x3ad28b=='brands')_0x3331ea=await product[_0x4e3b6c(0x26d)]([{'$match':{'product_category':_0x34bcf1}},{'$group':{'_id':'$brand'}}]);else _0x3ad28b==_0x4e3b6c(0x237)&&(_0x3331ea=await product['aggregate']([{'$match':{'product_category':_0x34bcf1}},{'$group':{'_id':_0x4e3b6c(0x25f)}}]));}_0x49568b['json'](_0x3331ea);}catch(_0x83bb3c){_0x49568b[_0x4e3b6c(0x29e)]({'message':_0x83bb3c['message']});}}),router['post'](a0_0x337b4b(0x240),auth,async(_0x5f9ca4,_0x46c9c2)=>{const _0xf57aa3=a0_0x337b4b;try{const {data_choosing:_0x429f5c,data_selected:_0xe13154}=_0x5f9ca4[_0xf57aa3(0x299)];var _0x3bb6d3;if(_0x429f5c==_0xf57aa3(0x22c))_0x3bb6d3=await product[_0xf57aa3(0x26d)]([{'$match':{'product_category':_0xe13154}}]);else{if(_0x429f5c==_0xf57aa3(0x29a))_0x3bb6d3=await product[_0xf57aa3(0x26d)]([{'$match':{'brand':_0xe13154}}]);else _0x429f5c==_0xf57aa3(0x237)&&(_0x3bb6d3=await product[_0xf57aa3(0x26d)]([{'$match':{'category':_0xe13154}}]));}_0x46c9c2[_0xf57aa3(0x29e)](_0x3bb6d3);}catch(_0x5096af){_0x46c9c2[_0xf57aa3(0x29e)]({'message':_0x5096af[_0xf57aa3(0x26f)]});}}),router[a0_0x337b4b(0x205)](a0_0x337b4b(0x260),auth,async(_0x3ac208,_0x1abdd2)=>{const _0x20b61c=a0_0x337b4b,_0x3cfbfc=_0x3ac208[_0x20b61c(0x268)],_0x5ecac1=await profile[_0x20b61c(0x22b)]({'email':_0x3cfbfc['email']}),_0x3c12f4=await master_shop[_0x20b61c(0x215)](),_0x54f48e=await product[_0x20b61c(0x215)]();if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]==_0x20b61c(0x296))var _0x38c882=users[_0x20b61c(0x236)];else{if(_0x3c12f4[0x0]['language']==_0x20b61c(0x295))var _0x38c882=users[_0x20b61c(0x295)];else{if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]=='German')var _0x38c882=users[_0x20b61c(0x22f)];else{if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]==_0x20b61c(0x250))var _0x38c882=users['Spanish'];else{if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]==_0x20b61c(0x1fc))var _0x38c882=users[_0x20b61c(0x1fc)];else{if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]=='Portuguese\x20(BR)')var _0x38c882=users[_0x20b61c(0x24c)];else{if(_0x3c12f4[0x0]['language']=='Chinese')var _0x38c882=users['Chinese'];else{if(_0x3c12f4[0x0][_0x20b61c(0x1f6)]==_0x20b61c(0x213))var _0x38c882=users[_0x20b61c(0x252)];}}}}}}}_0x1abdd2[_0x20b61c(0x22a)]('product_barcode_products',{'success':_0x3ac208['flash'](_0x20b61c(0x270)),'errors':_0x3ac208[_0x20b61c(0x279)](_0x20b61c(0x25b)),'role':_0x3cfbfc,'profile':_0x5ecac1,'products':_0x54f48e,'master_shop':_0x3c12f4,'language':_0x38c882});}),router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x23d),auth,async(_0x546a5c,_0x5db4f8)=>{const _0x1ed111=a0_0x337b4b,_0x5a98da=await product[_0x1ed111(0x215)]();_0x5db4f8['json']({'data':_0x5a98da});}),router[a0_0x337b4b(0x28f)]('/barcode_filter',auth,async(_0x20c6dc,_0x32d435)=>{const _0x3f2425=a0_0x337b4b;try{const {dataProdCat:_0x389fa8,dataProdIdentity:_0x596660}=_0x20c6dc[_0x3f2425(0x299)];var _0x3beb78;switch(_0x389fa8){case'fg':switch(_0x596660){case _0x3f2425(0x1fe):_0x3beb78=await product['aggregate']([{'$match':{'product_category':_0x3f2425(0x20b)}},{'$group':{'_id':_0x3f2425(0x1eb)}},{'$project':{'brand':_0x3f2425(0x24a)}}]);break;case'Category':_0x3beb78=await product[_0x3f2425(0x26d)]([{'$match':{'product_category':_0x3f2425(0x20b)}},{'$group':{'_id':_0x3f2425(0x25f)}},{'$project':{'category':_0x3f2425(0x24a)}}]);break;}break;case'rm':switch(_0x596660){case'Brands':_0x3beb78=await product['aggregate']([{'$match':{'product_category':_0x3f2425(0x1f8)}},{'$group':{'_id':_0x3f2425(0x1eb)}},{'$project':{'brand':_0x3f2425(0x24a)}}]);break;case _0x3f2425(0x1f2):_0x3beb78=await product[_0x3f2425(0x26d)]([{'$match':{'product_category':_0x3f2425(0x1f8)}},{'$group':{'_id':_0x3f2425(0x25f)}},{'$project':{'category':_0x3f2425(0x24a)}}]);break;}break;}_0x32d435[_0x3f2425(0x29e)](_0x3beb78);}catch(_0x152f54){_0x32d435[_0x3f2425(0x29e)]({'message':_0x152f54[_0x3f2425(0x26f)]});}}),router['post'](a0_0x337b4b(0x278),auth,async(_0x5ef1d9,_0x304621)=>{const _0x2be115=a0_0x337b4b;try{console[_0x2be115(0x229)](_0x5ef1d9[_0x2be115(0x299)]);const {prod_cat:_0x1eb861,identity:_0x55444d,valueData:_0x32efdd,typeofbarcode:_0x3cf067}=_0x5ef1d9[_0x2be115(0x299)];let _0x22a229;switch(_0x1eb861){case'fg':if(_0x55444d==_0x2be115(0x1fe))_0x22a229=await product[_0x2be115(0x26d)]([{'$match':{'product_category':_0x2be115(0x20b),'brand':_0x32efdd}}]);else _0x55444d==_0x2be115(0x1f2)&&(_0x22a229=await product[_0x2be115(0x26d)]([{'$match':{'product_category':_0x2be115(0x20b),'category':_0x32efdd}}]));break;case'rm':if(_0x55444d=='Brands')_0x22a229=await product[_0x2be115(0x26d)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x32efdd}}]);else _0x55444d==_0x2be115(0x1f2)&&(_0x22a229=await product[_0x2be115(0x26d)]([{'$match':{'product_category':_0x2be115(0x1f8),'category':_0x32efdd}}]));break;}const _0x20be17=_0xb3a924=>_0xb3a924*0x48,_0x52940f={'width':0x3,'height':0x1},_0x1c494e=new PDFDocument({'margin':_0x20be17(0.75),'size':[_0x20be17(_0x52940f[_0x2be115(0x20c)]),_0x20be17(_0x52940f['height'])],'bufferPages':!![]}),_0x3a15a7=_0x22a229[_0x2be115(0x202)];for(let _0x398c1f=0x0;_0x398c1f<=_0x3a15a7;_0x398c1f++){if(_0x398c1f!=_0x3a15a7){const _0x277985=_0x22a229[_0x398c1f][_0x2be115(0x1f9)],_0x20766a=_0x22a229[_0x398c1f][_0x2be115(0x29b)],_0x15998a=_0x22a229[_0x398c1f][_0x2be115(0x29c)],_0x19db9d=_0x22a229[_0x398c1f][_0x2be115(0x235)];var _0x1969a9;switch(_0x3cf067){case'1':_0x1969a9=_0x20766a;break;case'2':_0x1969a9=_0x15998a;break;case'3':_0x1969a9=_0x19db9d;break;}const _0x4fca53={'width':0xd2,'height':0x64},_0xf2ce6d={'width':_0x20be17(_0x52940f[_0x2be115(0x20c)]),'height':_0x20be17(_0x52940f['height'])},_0x509d01=new Canvas();JsBarcode(_0x509d01,_0x1969a9,{'format':_0x2be115(0x27e),'height':_0x4fca53[_0x2be115(0x1e1)],'displayValue':!![],'text':_0x1969a9});const _0x79de9e=_0x509d01[_0x2be115(0x1e5)](),_0x125c77=_0xf2ce6d[_0x2be115(0x20c)]/_0x4fca53['width'],_0x172dd8=_0xf2ce6d[_0x2be115(0x1e1)]/_0x4fca53[_0x2be115(0x1e1)],_0x8ac024=Math['min'](_0x125c77,_0x172dd8),_0x2ffc42=_0x4fca53[_0x2be115(0x20c)]*_0x8ac024,_0x354ee6=_0x4fca53['height']*_0x8ac024,_0x294023=(_0xf2ce6d[_0x2be115(0x20c)]-_0x2ffc42)/0x2,_0x3043cb=(_0xf2ce6d[_0x2be115(0x1e1)]-_0x354ee6)/0x2;_0x1c494e[_0x2be115(0x232)](_0x79de9e,_0x294023,_0x3043cb,{'width':_0x2ffc42,'height':_0x354ee6}),_0x398c1f!=_0x3a15a7&&_0x1c494e['addPage']();}}const _0x2d67b1=[];_0x1c494e['on']('data',_0x2d67b1['push'][_0x2be115(0x201)](_0x2d67b1)),_0x1c494e['on'](_0x2be115(0x223),()=>{const _0x59e71d=_0x2be115,_0x32902f=Buffer['concat'](_0x2d67b1),_0x2be583=_0x32902f[_0x59e71d(0x248)](_0x59e71d(0x261));_0x304621[_0x59e71d(0x29e)]({'pdfContent':_0x2be583});}),_0x1c494e[_0x2be115(0x223)]();}catch(_0x5623b4){_0x304621[_0x2be115(0x29e)]({'message':_0x5623b4[_0x2be115(0x26f)]});}}),router[a0_0x337b4b(0x28f)]('/print_barcode_filter_search/',auth,async(_0x474306,_0x584870)=>{const _0x253275=a0_0x337b4b;try{console[_0x253275(0x229)](_0x474306[_0x253275(0x299)]);const {prod_cat:_0x398964,identity:_0x5446b7,valueData:_0xc27ce5}=_0x474306['body'];let _0x18cf55;switch(_0x398964){case'fg':if(_0x5446b7==_0x253275(0x1fe))_0x18cf55=await product[_0x253275(0x26d)]([{'$match':{'product_category':_0x253275(0x20b),'brand':_0xc27ce5}}]);else _0x5446b7==_0x253275(0x1f2)&&(_0x18cf55=await product[_0x253275(0x26d)]([{'$match':{'product_category':_0x253275(0x20b),'category':_0xc27ce5}}]));break;case'rm':if(_0x5446b7==_0x253275(0x1fe))_0x18cf55=await product['aggregate']([{'$match':{'product_category':_0x253275(0x1f8),'brand':_0xc27ce5}}]);else _0x5446b7=='Category'&&(_0x18cf55=await product['aggregate']([{'$match':{'product_category':_0x253275(0x1f8),'category':_0xc27ce5}}]));break;}_0x584870['json']({'data':_0x18cf55});}catch(_0x4c88fd){_0x584870[_0x253275(0x29e)]({'message':_0x4c88fd[_0x253275(0x26f)]});}}),router[a0_0x337b4b(0x28f)](a0_0x337b4b(0x258),auth,async(_0x28ff59,_0x13d61b)=>{const _0x500579=a0_0x337b4b;try{const _0x224660=_0x28ff59['params']['id'],{copies:_0x29de11,typeofbarcode:_0xff1cc0}=_0x28ff59[_0x500579(0x299)];var _0xbe10d5=await product[_0x500579(0x281)](_0x224660);const _0x5830c0=_0x49e4bc=>_0x49e4bc*0x48,_0x256473={'width':0x3,'height':0x1},_0x30f901=new PDFDocument({'margin':_0x5830c0(0.75),'size':[_0x5830c0(_0x256473['width']),_0x5830c0(_0x256473['height'])],'bufferPages':!![]}),_0x55efc7=_0x29de11,_0x273dfb=_0xbe10d5[_0x500579(0x1f9)],_0x4564bd=_0xbe10d5['primary_code'],_0x24904f=_0xbe10d5[_0x500579(0x29c)],_0x592e10=_0xbe10d5[_0x500579(0x235)];let _0x271f7f;switch(_0xff1cc0){case'1':_0x271f7f=_0x4564bd;break;case'2':_0x271f7f=_0x24904f;break;case'3':_0x271f7f=_0x592e10;break;}const _0x491b8a={'width':0xd2,'height':0x64},_0x496401={'width':_0x5830c0(_0x256473[_0x500579(0x20c)]),'height':_0x5830c0(_0x256473[_0x500579(0x1e1)])};for(let _0x4b9256=0x1;_0x4b9256<=_0x55efc7;_0x4b9256++){const _0x537c51=new Canvas();JsBarcode(_0x537c51,_0x271f7f,{'format':_0x500579(0x27e),'height':_0x491b8a[_0x500579(0x1e1)],'displayValue':!![],'text':_0x271f7f});const _0x5c3a19=_0x537c51[_0x500579(0x1e5)](),_0x270431=_0x496401[_0x500579(0x20c)]/_0x491b8a[_0x500579(0x20c)],_0x389540=_0x496401['height']/_0x491b8a[_0x500579(0x1e1)],_0x34a93d=Math[_0x500579(0x2a3)](_0x270431,_0x389540),_0x4961b6=_0x491b8a['width']*_0x34a93d,_0xff5620=_0x491b8a[_0x500579(0x1e1)]*_0x34a93d,_0x2f9c73=(_0x496401['width']-_0x4961b6)/0x2,_0x37565d=(_0x496401[_0x500579(0x1e1)]-_0xff5620)/0x2;_0x30f901[_0x500579(0x232)](_0x5c3a19,_0x2f9c73,_0x37565d,{'width':_0x4961b6,'height':_0xff5620}),_0x4b9256!=_0x55efc7&&_0x30f901[_0x500579(0x28d)]();}const _0xef8616=[];_0x30f901['on'](_0x500579(0x26c),_0xef8616[_0x500579(0x219)][_0x500579(0x201)](_0xef8616)),_0x30f901['on'](_0x500579(0x223),()=>{const _0x2332a7=_0x500579,_0x385a29=Buffer[_0x2332a7(0x294)](_0xef8616),_0x522d34=_0x385a29[_0x2332a7(0x248)](_0x2332a7(0x261));_0x13d61b[_0x2332a7(0x29e)]({'pdfContent':_0x522d34});}),_0x30f901[_0x500579(0x223)]();}catch(_0x30a04b){_0x13d61b[_0x500579(0x29e)]({'message':_0x30a04b['message']});}}),module[a0_0x337b4b(0x244)]=router;