const a0_0x3a6b27=a0_0x3327;(function(_0x2aa725,_0x1b7f78){const _0xfb8f41=a0_0x3327,_0x24a012=_0x2aa725();while(!![]){try{const _0x5401ce=parseInt(_0xfb8f41(0x1e5))/0x1+parseInt(_0xfb8f41(0x217))/0x2*(-parseInt(_0xfb8f41(0x23e))/0x3)+parseInt(_0xfb8f41(0x1e0))/0x4+parseInt(_0xfb8f41(0x210))/0x5+-parseInt(_0xfb8f41(0x246))/0x6*(parseInt(_0xfb8f41(0x201))/0x7)+-parseInt(_0xfb8f41(0x1e7))/0x8+-parseInt(_0xfb8f41(0x1b6))/0x9;if(_0x5401ce===_0x1b7f78)break;else _0x24a012['push'](_0x24a012['shift']());}catch(_0x2a9656){_0x24a012['push'](_0x24a012['shift']());}}}(a0_0x17bf,0x64d6e));const express=require(a0_0x3a6b27(0x1f3)),res=require('express/lib/response'),app=express(),router=express[a0_0x3a6b27(0x1bc)](),multer=require(a0_0x3a6b27(0x266)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x3a6b27(0x1c5)),auth=require(a0_0x3a6b27(0x20b)),users=require('../public/language/languages.json'),excelJS=require(a0_0x3a6b27(0x249)),xlsx=require(a0_0x3a6b27(0x257)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x3a6b27(0x214)),PDFDocument=require(a0_0x3a6b27(0x24e));function a0_0x17bf(){const _0x5c1fb0=['toBuffer','140198ytFrLl','/print_barcode','brand','$_id','params','/select_data','forEach','Product_Name','stock','Raw\x20Materials','concat','diskStorage','Content-Type','addPage','Category','/view/add_products','numeric','Arabic','send','defaultProduct.avif','barcode\x20Product\x20master','/categories','/print_barcode_filter_search/','units','PUnits','/view','Finished\x20Goods','/products/units','$product_category','\x20unit\x20is\x20add\x20successfully','maxStocks','\x20<>\x20','/products/view','migrate_product_fule','base64','file','$secondary_unit','category','Portuguese\x20(BR)','6kbbtsJ','Product_Code','/products/categories','render','findOne','/brands/:id','width','status','84OwIbOL','write','ProductCode','exceljs','/brands','/products_import_migrate_file','now','brands','pdfkit-table','$product_name','single','get','toString','errors','CODE128','save','utils','xlsx','/barcode_filter','setHeader','master','redirect','English\x20(US)','sheet_to_json','product_docs','primary_code','edit\x20Product\x20master','/brands/delete/:id','brand\x20data\x20delete\x20successfully','Units','_id','PCat','multer','language','Secondary_Code','product_category','length','PSecondaryUnits','flash','hello','8583858TFujGy','brand\x20data\x20update\x20successfully','log','long','end','Workbook','Router','PBrands','public/Migration','product\x20add\x20successfully','\x20categories\x20is\x20add\x20successfully','Primary_Code','PAlQty','Maximum_Stocks','Brands','../models/all_models','maxProdPerUnit','barcode\x20user_id','\x20Edit\x20Successfully','sku','user','Chinese','max_number_per_units','product_code','warehouse','email','French','alertquantity','Spanish','German','categ','success','Products','bind','name','product_barcode','/filter_product','secondary_unit','/print_barcode_filter/','findById','public/Migration/','height','2931156BpZdjD','/print_barcode_single/:id','Portuguese','message','image','138099MCcuvw','findByIdAndUpdate','534928gZwYxF','\x20added\x20successfully','Products\x20find_data','find','MaxperUnits','columns','SheetNames','json','English','secondary_code','$brand','data','express','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Enabled','Hindi','public/upload','/units/:id','/categories/:id','add_product','$product_docs','/view/:id','\x20brand\x20is\x20add\x20successfully','Alert_QTY','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/products/brands','20524ZAWEWb','findByIdAndDelete','/units','filename','products','addWorksheet','unit\x20data\x20update\x20successfully','/barcode/:id','Secondary_Units','unit\x20data\x20delete\x20successfully','../middleware/auth','Arabic\x20(ae)','unit','$product_details.product_stock','$category','3720120gNJAtW','body','post','aggregate','canvas','Sheets'];a0_0x17bf=function(){return _0x5c1fb0;};return a0_0x17bf();}function a0_0x3327(_0x6dac27,_0x31ea5e){const _0x17bfc9=a0_0x17bf();return a0_0x3327=function(_0x3327a8,_0x2be32e){_0x3327a8=_0x3327a8-0x1b1;let _0x4a9dc7=_0x17bfc9[_0x3327a8];return _0x4a9dc7;},a0_0x3327(_0x6dac27,_0x31ea5e);}router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x22c),auth,async(_0x44c86c,_0x49d172)=>{const _0x4c83c8=a0_0x3a6b27;try{const {username:_0x306444,email:_0x270efd,role:_0xc35c44}=_0x44c86c[_0x4c83c8(0x1ca)],_0x5df08b=_0x44c86c[_0x4c83c8(0x1ca)],_0x2eb5af=await profile[_0x4c83c8(0x242)]({'email':_0x5df08b[_0x4c83c8(0x1cf)]}),_0x59bb60=await master_shop[_0x4c83c8(0x1ea)]();console['log']('master',_0x59bb60);const _0x34794d=await categories[_0x4c83c8(0x1ea)]();if(_0x59bb60[0x0][_0x4c83c8(0x267)]==_0x4c83c8(0x25c))var _0x5a0a74=users[_0x4c83c8(0x1ef)];else{if(_0x59bb60[0x0][_0x4c83c8(0x267)]==_0x4c83c8(0x1f6))var _0x5a0a74=users[_0x4c83c8(0x1f6)];else{if(_0x59bb60[0x0]['language']=='German')var _0x5a0a74=users[_0x4c83c8(0x1d3)];else{if(_0x59bb60[0x0]['language']=='Spanish')var _0x5a0a74=users['Spanish'];else{if(_0x59bb60[0x0][_0x4c83c8(0x267)]==_0x4c83c8(0x1d0))var _0x5a0a74=users[_0x4c83c8(0x1d0)];else{if(_0x59bb60[0x0][_0x4c83c8(0x267)]=='Portuguese\x20(BR)')var _0x5a0a74=users[_0x4c83c8(0x1e2)];else{if(_0x59bb60[0x0]['language']==_0x4c83c8(0x1cb))var _0x5a0a74=users['Chinese'];else{if(_0x59bb60[0x0][_0x4c83c8(0x267)]==_0x4c83c8(0x20c))var _0x5a0a74=users['Arabic'];}}}}}}}_0x49d172[_0x4c83c8(0x241)]('categories',{'success':_0x44c86c[_0x4c83c8(0x1b4)](_0x4c83c8(0x1d5)),'errors':_0x44c86c[_0x4c83c8(0x1b4)](_0x4c83c8(0x253)),'role':_0x5df08b,'profile':_0x2eb5af,'user':_0x34794d,'master_shop':_0x59bb60,'language':_0x5a0a74});}catch(_0x4af7f2){console[_0x4c83c8(0x1b8)](_0x4af7f2);}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x22c),auth,async(_0x1d44a7,_0x4134da)=>{const _0xbd7c89=a0_0x3a6b27;try{const {name:_0x4df3f2,products:_0x181dd6}=_0x1d44a7[_0xbd7c89(0x211)],_0x3a1c13=new categories({'name':_0x4df3f2,'products':_0x181dd6}),_0x1b4c86=await categories['findOne']({'name':_0x4df3f2});_0x1b4c86?_0x1d44a7[_0xbd7c89(0x1b4)]('errors',_0x4df3f2+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1d44a7[_0xbd7c89(0x1b4)](_0xbd7c89(0x1d5),_0x4df3f2+_0xbd7c89(0x1c0));const _0x144350=await _0x3a1c13['save']();_0x4134da[_0xbd7c89(0x25b)](_0xbd7c89(0x240));}catch(_0x3375d6){console[_0xbd7c89(0x1b8)](_0x3375d6);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x1f9),auth,async(_0x2328c3,_0x2e95c6)=>{const _0x33a6b6=a0_0x3a6b27;try{const {username:_0x80471e,email:_0x50abe9,role:_0x192806}=_0x2328c3[_0x33a6b6(0x1ca)],_0x9e60=_0x2328c3[_0x33a6b6(0x1ca)],_0x550668=await profile[_0x33a6b6(0x242)]({'email':_0x9e60[_0x33a6b6(0x1cf)]}),_0x25ee81=await master_shop['find']();console[_0x33a6b6(0x1b8)](_0x33a6b6(0x25a),_0x25ee81);const _0x2c8491=_0x2328c3[_0x33a6b6(0x21b)]['id'];console[_0x33a6b6(0x1b8)](_0x2c8491);const _0x11702d=await categories[_0x33a6b6(0x1dd)](_0x2c8491);if(_0x25ee81[0x0][_0x33a6b6(0x267)]==_0x33a6b6(0x25c))var _0x27ce1b=users['English'];else{if(_0x25ee81[0x0][_0x33a6b6(0x267)]==_0x33a6b6(0x1f6))var _0x27ce1b=users[_0x33a6b6(0x1f6)];else{if(_0x25ee81[0x0][_0x33a6b6(0x267)]==_0x33a6b6(0x1d3))var _0x27ce1b=users[_0x33a6b6(0x1d3)];else{if(_0x25ee81[0x0]['language']=='Spanish')var _0x27ce1b=users[_0x33a6b6(0x1d2)];else{if(_0x25ee81[0x0][_0x33a6b6(0x267)]==_0x33a6b6(0x1d0))var _0x27ce1b=users[_0x33a6b6(0x1d0)];else{if(_0x25ee81[0x0]['language']==_0x33a6b6(0x23d))var _0x27ce1b=users[_0x33a6b6(0x1e2)];else{if(_0x25ee81[0x0][_0x33a6b6(0x267)]==_0x33a6b6(0x1cb))var _0x27ce1b=users[_0x33a6b6(0x1cb)];else{if(_0x25ee81[0x0][_0x33a6b6(0x267)]=='Arabic\x20(ae)')var _0x27ce1b=users['Arabic'];}}}}}}}_0x2e95c6[_0x33a6b6(0x241)]('categories',{'success':_0x2328c3[_0x33a6b6(0x1b4)](_0x33a6b6(0x1d5)),'errors':_0x2328c3[_0x33a6b6(0x1b4)](_0x33a6b6(0x253)),'role':_0x9e60,'profile':_0x550668,'master_shop':_0x25ee81,'user':_0x11702d,'language':_0x27ce1b});}catch(_0x527709){console[_0x33a6b6(0x1b8)](_0x527709);}}),router['post'](a0_0x3a6b27(0x1f9),auth,async(_0x1a0bd4,_0x2c794f)=>{const _0x2eeb52=a0_0x3a6b27;try{const _0x4fa990=_0x1a0bd4[_0x2eeb52(0x21b)]['id'],_0x3dedb1=await categories[_0x2eeb52(0x1e6)](_0x4fa990,_0x1a0bd4[_0x2eeb52(0x211)]);_0x1a0bd4[_0x2eeb52(0x1b4)]('success',''+users['categories_edit']),_0x2c794f['redirect'](_0x2eeb52(0x240));}catch(_0x1b2f26){console[_0x2eeb52(0x1b8)](_0x1b2f26);}}),router[a0_0x3a6b27(0x251)]('/categories/delete/:id',auth,async(_0x4799db,_0xdf3732)=>{const _0x580047=a0_0x3a6b27;try{const _0x4ee21c=_0x4799db[_0x580047(0x21b)]['id'],_0x5361af=await categories[_0x580047(0x202)](_0x4ee21c);_0x4799db['flash']('success','categories\x20data\x20delete\x20successfully'),_0xdf3732[_0x580047(0x25b)](_0x580047(0x240));}catch(_0x35eb2a){console[_0x580047(0x1b8)](_0x35eb2a);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x24a),auth,async(_0x53a010,_0x50f2c3)=>{const _0x28d19f=a0_0x3a6b27;try{const {username:_0x274ecb,email:_0x1ba250,role:_0x464cdb}=_0x53a010[_0x28d19f(0x1ca)],_0x5c9dfd=_0x53a010[_0x28d19f(0x1ca)],_0x527929=await profile[_0x28d19f(0x242)]({'email':_0x5c9dfd[_0x28d19f(0x1cf)]}),_0x21e958=await master_shop[_0x28d19f(0x1ea)]();console[_0x28d19f(0x1b8)](_0x28d19f(0x25a),_0x21e958);const _0x5bd5bf=await brands[_0x28d19f(0x1ea)]();if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x25c))var _0x328e7c=users[_0x28d19f(0x1ef)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x1f6))var _0x328e7c=users[_0x28d19f(0x1f6)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x1d3))var _0x328e7c=users[_0x28d19f(0x1d3)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]=='Spanish')var _0x328e7c=users['Spanish'];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x1d0))var _0x328e7c=users[_0x28d19f(0x1d0)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x23d))var _0x328e7c=users[_0x28d19f(0x1e2)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x1cb))var _0x328e7c=users[_0x28d19f(0x1cb)];else{if(_0x21e958[0x0][_0x28d19f(0x267)]==_0x28d19f(0x20c))var _0x328e7c=users[_0x28d19f(0x228)];}}}}}}}_0x50f2c3[_0x28d19f(0x241)](_0x28d19f(0x24d),{'success':_0x53a010[_0x28d19f(0x1b4)](_0x28d19f(0x1d5)),'errors':_0x53a010[_0x28d19f(0x1b4)](_0x28d19f(0x253)),'role':_0x5c9dfd,'profile':_0x527929,'master_shop':_0x21e958,'user':_0x5bd5bf,'language':_0x328e7c});}catch(_0x20c63c){console[_0x28d19f(0x1b8)](_0x20c63c);}}),router[a0_0x3a6b27(0x212)]('/brands',auth,async(_0x4880d1,_0x386bc4)=>{const _0x5c8254=a0_0x3a6b27;try{const {name:_0x108416,products:_0x303c02}=_0x4880d1[_0x5c8254(0x211)],_0x5ae8ea=new brands({'name':_0x108416,'products':_0x303c02}),_0x282b06=await brands[_0x5c8254(0x242)]({'name':_0x108416});_0x282b06?_0x4880d1[_0x5c8254(0x1b4)]('errors',_0x108416+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4880d1[_0x5c8254(0x1b4)]('success',_0x108416+_0x5c8254(0x1fd));const _0x963955=await _0x5ae8ea[_0x5c8254(0x255)]();_0x386bc4[_0x5c8254(0x25b)](_0x5c8254(0x200));}catch(_0x2016ea){console['log'](_0x2016ea);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x243),auth,async(_0x5ca405,_0x1c1d33)=>{const _0x88e5ba=a0_0x3a6b27;try{const {username:_0x338e50,email:_0x28032e,role:_0x5c45de}=_0x5ca405[_0x88e5ba(0x1ca)],_0x1b4e56=_0x5ca405[_0x88e5ba(0x1ca)],_0x55285c=await profile[_0x88e5ba(0x242)]({'email':_0x1b4e56[_0x88e5ba(0x1cf)]}),_0x185f27=await master_shop[_0x88e5ba(0x1ea)]();console[_0x88e5ba(0x1b8)](_0x88e5ba(0x25a),_0x185f27);const _0x3d89a1=_0x5ca405['params']['id'];console[_0x88e5ba(0x1b8)](_0x3d89a1);const _0x4347c5=await brands[_0x88e5ba(0x1dd)](_0x3d89a1);if(_0x185f27[0x0][_0x88e5ba(0x267)]==_0x88e5ba(0x25c))var _0x4891dc=users['English'];else{if(_0x185f27[0x0]['language']==_0x88e5ba(0x1f6))var _0x4891dc=users['Hindi'];else{if(_0x185f27[0x0]['language']==_0x88e5ba(0x1d3))var _0x4891dc=users[_0x88e5ba(0x1d3)];else{if(_0x185f27[0x0][_0x88e5ba(0x267)]==_0x88e5ba(0x1d2))var _0x4891dc=users[_0x88e5ba(0x1d2)];else{if(_0x185f27[0x0]['language']==_0x88e5ba(0x1d0))var _0x4891dc=users[_0x88e5ba(0x1d0)];else{if(_0x185f27[0x0][_0x88e5ba(0x267)]=='Portuguese\x20(BR)')var _0x4891dc=users['Portuguese'];else{if(_0x185f27[0x0][_0x88e5ba(0x267)]=='Chinese')var _0x4891dc=users[_0x88e5ba(0x1cb)];else{if(_0x185f27[0x0][_0x88e5ba(0x267)]=='Arabic\x20(ae)')var _0x4891dc=users[_0x88e5ba(0x228)];}}}}}}}_0x1c1d33[_0x88e5ba(0x241)](_0x88e5ba(0x24d),{'success':_0x5ca405[_0x88e5ba(0x1b4)](_0x88e5ba(0x1d5)),'errors':_0x5ca405[_0x88e5ba(0x1b4)](_0x88e5ba(0x253)),'role':_0x1b4e56,'profile':_0x55285c,'master_shop':_0x185f27,'user':_0x4347c5,'language':_0x4891dc});}catch(_0x7819ad){console[_0x88e5ba(0x1b8)](_0x7819ad);}}),router[a0_0x3a6b27(0x212)]('/brands/:id',auth,async(_0x1c0555,_0x27cbc9)=>{const _0x13a250=a0_0x3a6b27;try{const _0x26a7ff=_0x1c0555[_0x13a250(0x21b)]['id'],_0x4901a2=await brands[_0x13a250(0x1e6)](_0x26a7ff,_0x1c0555[_0x13a250(0x211)]);_0x1c0555[_0x13a250(0x1b4)](_0x13a250(0x1d5),_0x13a250(0x1b7)),_0x27cbc9[_0x13a250(0x25b)](_0x13a250(0x200));}catch(_0x3e2110){console[_0x13a250(0x1b8)](_0x3e2110);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x261),auth,async(_0x10606f,_0x5370aa)=>{const _0x39ba43=a0_0x3a6b27;try{const _0x3ba4b4=_0x10606f[_0x39ba43(0x21b)]['id'],_0x21a1ac=await brands[_0x39ba43(0x202)](_0x3ba4b4);_0x10606f['flash'](_0x39ba43(0x1d5),_0x39ba43(0x262)),_0x5370aa[_0x39ba43(0x25b)](_0x39ba43(0x200));}catch(_0x52b9fd){console['log'](_0x52b9fd);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x203),auth,async(_0x56846d,_0x1e8af4)=>{const _0xc57c53=a0_0x3a6b27;try{const {username:_0x43bc3b,email:_0x222f0e,role:_0x292ba8}=_0x56846d[_0xc57c53(0x1ca)],_0x1b007b=_0x56846d[_0xc57c53(0x1ca)],_0x383ca4=await profile[_0xc57c53(0x242)]({'email':_0x1b007b[_0xc57c53(0x1cf)]}),_0x1835ef=await master_shop[_0xc57c53(0x1ea)]();console[_0xc57c53(0x1b8)](_0xc57c53(0x25a),_0x1835ef);const _0x40148d=await units['find']();if(_0x1835ef[0x0][_0xc57c53(0x267)]==_0xc57c53(0x25c))var _0x193286=users[_0xc57c53(0x1ef)];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]==_0xc57c53(0x1f6))var _0x193286=users[_0xc57c53(0x1f6)];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]=='German')var _0x193286=users['German'];else{if(_0x1835ef[0x0]['language']==_0xc57c53(0x1d2))var _0x193286=users[_0xc57c53(0x1d2)];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]==_0xc57c53(0x1d0))var _0x193286=users['French'];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]=='Portuguese\x20(BR)')var _0x193286=users[_0xc57c53(0x1e2)];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]==_0xc57c53(0x1cb))var _0x193286=users[_0xc57c53(0x1cb)];else{if(_0x1835ef[0x0][_0xc57c53(0x267)]==_0xc57c53(0x20c))var _0x193286=users['Arabic'];}}}}}}}_0x1e8af4[_0xc57c53(0x241)](_0xc57c53(0x22e),{'success':_0x56846d[_0xc57c53(0x1b4)](_0xc57c53(0x1d5)),'errors':_0x56846d[_0xc57c53(0x1b4)](_0xc57c53(0x253)),'role':_0x1b007b,'profile':_0x383ca4,'master_shop':_0x1835ef,'user':_0x40148d,'language':_0x193286});}catch(_0x7590a0){console['log'](_0x7590a0);}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x203),auth,async(_0x53b972,_0x10b2ba)=>{const _0x2d42c4=a0_0x3a6b27;try{const {name:_0x3ca59c,secondary_unit:_0x368f93,products:_0x153e35}=_0x53b972[_0x2d42c4(0x211)],_0x43d612=new units({'name':_0x3ca59c,'secondary_unit':_0x368f93,'products':_0x153e35}),_0x499761=await units[_0x2d42c4(0x242)]({'name':_0x3ca59c});_0x499761?_0x53b972[_0x2d42c4(0x1b4)]('errors',_0x3ca59c+_0x2d42c4(0x1f4)):_0x53b972[_0x2d42c4(0x1b4)](_0x2d42c4(0x1d5),_0x3ca59c+_0x2d42c4(0x234));const _0x50625f=await _0x43d612[_0x2d42c4(0x255)]();_0x10b2ba[_0x2d42c4(0x25b)](_0x2d42c4(0x232));}catch(_0x39693c){console['log'](_0x39693c);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x1f8),auth,async(_0x52392b,_0x2cff28)=>{const _0x2da40b=a0_0x3a6b27;try{const {username:_0x4feacb,email:_0x14c170,role:_0x28ebc0}=_0x52392b[_0x2da40b(0x1ca)],_0x23b584=_0x52392b[_0x2da40b(0x1ca)],_0x547978=await profile['findOne']({'email':_0x23b584[_0x2da40b(0x1cf)]}),_0x3196cf=await master_shop[_0x2da40b(0x1ea)]();console[_0x2da40b(0x1b8)]('master',_0x3196cf);const _0x4a31c2=_0x52392b[_0x2da40b(0x21b)]['id'],_0x5a0529=await units[_0x2da40b(0x1dd)](_0x4a31c2);if(_0x3196cf[0x0][_0x2da40b(0x267)]=='English\x20(US)')var _0x1588ae=users[_0x2da40b(0x1ef)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x1f6))var _0x1588ae=users[_0x2da40b(0x1f6)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x1d3))var _0x1588ae=users['German'];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x1d2))var _0x1588ae=users[_0x2da40b(0x1d2)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x1d0))var _0x1588ae=users[_0x2da40b(0x1d0)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x23d))var _0x1588ae=users[_0x2da40b(0x1e2)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x1cb))var _0x1588ae=users[_0x2da40b(0x1cb)];else{if(_0x3196cf[0x0][_0x2da40b(0x267)]==_0x2da40b(0x20c))var _0x1588ae=users[_0x2da40b(0x228)];}}}}}}}_0x2cff28[_0x2da40b(0x241)]('units',{'success':_0x52392b[_0x2da40b(0x1b4)](_0x2da40b(0x1d5)),'errors':_0x52392b[_0x2da40b(0x1b4)](_0x2da40b(0x253)),'role':_0x23b584,'profile':_0x547978,'master_shop':_0x3196cf,'user':_0x5a0529,'language':_0x1588ae});}catch(_0x50e131){console[_0x2da40b(0x1b8)](_0x50e131);}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x1f8),auth,async(_0x24789c,_0x404834)=>{const _0x2438b1=a0_0x3a6b27;try{const _0x5d7e00=_0x24789c[_0x2438b1(0x21b)]['id'],_0x4af3f9=await units[_0x2438b1(0x1e6)](_0x5d7e00,_0x24789c[_0x2438b1(0x211)]);_0x24789c[_0x2438b1(0x1b4)](_0x2438b1(0x1d5),_0x2438b1(0x207)),_0x404834[_0x2438b1(0x25b)](_0x2438b1(0x232));}catch(_0xc7249f){console[_0x2438b1(0x1b8)](_0xc7249f);}}),router['get']('/units/delete/:id',auth,async(_0x134dde,_0x2664fb)=>{const _0xe779f0=a0_0x3a6b27;try{const _0x209e6a=_0x134dde[_0xe779f0(0x21b)]['id'],_0x22b874=await units[_0xe779f0(0x202)](_0x209e6a);_0x134dde[_0xe779f0(0x1b4)]('success',_0xe779f0(0x20a)),_0x2664fb[_0xe779f0(0x25b)](_0xe779f0(0x232));}catch(_0x1d6b03){console['log'](_0x1d6b03);}});const storage=multer['diskStorage']({'destination':(_0x4ab8b2,_0x47b176,_0x4bf068)=>{const _0x2b905a=a0_0x3a6b27;_0x4bf068(null,_0x2b905a(0x1f7));},'filename':(_0x472dc4,_0x426adb,_0xeba8c0)=>{const _0x44dc10=a0_0x3a6b27;_0xeba8c0(null,Date[_0x44dc10(0x24c)]()+_0x426adb['originalname']);}}),upload=multer({'storage':storage});router['get'](a0_0x3a6b27(0x230),auth,async(_0x59070f,_0x2a8576)=>{const _0x331989=a0_0x3a6b27;try{const {username:_0x3f7b7e,email:_0x1e52c3,role:_0x341c5c}=_0x59070f[_0x331989(0x1ca)],_0x2ed626=_0x59070f[_0x331989(0x1ca)],_0x58a865=await profile[_0x331989(0x242)]({'email':_0x2ed626[_0x331989(0x1cf)]}),_0x2923f3={'year':'numeric','month':_0x331989(0x1b9),'day':_0x331989(0x227)},_0x45909a=await master_shop[_0x331989(0x1ea)]();console[_0x331989(0x1b8)]('Products\x20master',_0x45909a);const _0x2e0c3d=await product[_0x331989(0x1ea)]();console[_0x331989(0x1b8)](_0x331989(0x1e9),_0x2e0c3d);const _0x59fdd5=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$lookup':{'from':_0x331989(0x205),'localField':'product_details.product_name','foreignField':_0x331989(0x1d8),'as':_0x331989(0x25e)}},{'$unwind':_0x331989(0x1fb)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x331989(0x20e)}},{'$group':{'_id':_0x331989(0x24f),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x331989(0x1b8)]('Products\x20warehouse_data',_0x59fdd5),_0x59fdd5[_0x331989(0x21d)](_0xe34fb2=>{const _0x365370=_0x2e0c3d['map'](_0x318c7a=>{const _0x53cf20=a0_0x3327;_0x318c7a[_0x53cf20(0x1d8)]==_0xe34fb2[_0x53cf20(0x264)]&&(_0x318c7a[_0x53cf20(0x21f)]=parseInt(_0x318c7a[_0x53cf20(0x21f)])+parseInt(_0xe34fb2['product_stock']));});}),console['log'](_0x331989(0x1e9),_0x2e0c3d);if(_0x45909a[0x0][_0x331989(0x267)]=='English\x20(US)')var _0x3e213e=users[_0x331989(0x1ef)];else{if(_0x45909a[0x0]['language']==_0x331989(0x1f6))var _0x3e213e=users[_0x331989(0x1f6)];else{if(_0x45909a[0x0][_0x331989(0x267)]==_0x331989(0x1d3))var _0x3e213e=users[_0x331989(0x1d3)];else{if(_0x45909a[0x0][_0x331989(0x267)]==_0x331989(0x1d2))var _0x3e213e=users[_0x331989(0x1d2)];else{if(_0x45909a[0x0]['language']==_0x331989(0x1d0))var _0x3e213e=users['French'];else{if(_0x45909a[0x0][_0x331989(0x267)]=='Portuguese\x20(BR)')var _0x3e213e=users[_0x331989(0x1e2)];else{if(_0x45909a[0x0][_0x331989(0x267)]==_0x331989(0x1cb))var _0x3e213e=users['Chinese'];else{if(_0x45909a[0x0][_0x331989(0x267)]==_0x331989(0x20c))var _0x3e213e=users[_0x331989(0x228)];}}}}}}}_0x2a8576[_0x331989(0x241)](_0x331989(0x205),{'success':_0x59070f[_0x331989(0x1b4)](_0x331989(0x1d5)),'errors':_0x59070f[_0x331989(0x1b4)](_0x331989(0x253)),'alldata':_0x2e0c3d,'profile':_0x58a865,'master_shop':_0x45909a,'role':_0x2ed626,'product_stock':_0x59fdd5,'language':_0x3e213e});}catch(_0x58606f){console[_0x331989(0x1b8)](_0x58606f);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x226),auth,async(_0x1cc729,_0x4f3f62)=>{const _0x3340bb=a0_0x3a6b27;try{const {username:_0x111a32,email:_0x5b1fa1,role:_0x36e8f1}=_0x1cc729['user'],_0x2c6ef7=_0x1cc729[_0x3340bb(0x1ca)],_0x2f7036=await profile[_0x3340bb(0x242)]({'email':_0x2c6ef7[_0x3340bb(0x1cf)]}),_0xe08513=await master_shop['find']();console[_0x3340bb(0x1b8)](_0x3340bb(0x25a),_0xe08513);const _0x5ea230=await categories[_0x3340bb(0x1ea)]({}),_0x209da4=await brands[_0x3340bb(0x1ea)]({}),_0x137b0d=await units[_0x3340bb(0x1ea)]({}),_0x5ccad4=await warehouse[_0x3340bb(0x1ea)]({'status':_0x3340bb(0x1f5)});if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x25c))var _0x133f38=users[_0x3340bb(0x1ef)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x1f6))var _0x133f38=users[_0x3340bb(0x1f6)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x1d3))var _0x133f38=users[_0x3340bb(0x1d3)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x1d2))var _0x133f38=users[_0x3340bb(0x1d2)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x1d0))var _0x133f38=users[_0x3340bb(0x1d0)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x23d))var _0x133f38=users[_0x3340bb(0x1e2)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x1cb))var _0x133f38=users[_0x3340bb(0x1cb)];else{if(_0xe08513[0x0][_0x3340bb(0x267)]==_0x3340bb(0x20c))var _0x133f38=users['Arabic'];}}}}}}}_0x4f3f62[_0x3340bb(0x241)](_0x3340bb(0x1fa),{'success':_0x1cc729[_0x3340bb(0x1b4)](_0x3340bb(0x1d5)),'errors':_0x1cc729['flash'](_0x3340bb(0x253)),'role':_0x2c6ef7,'profile':_0x2f7036,'categories':_0x5ea230,'brands':_0x209da4,'master_shop':_0xe08513,'units':_0x137b0d,'language':_0x133f38,'find_data':_0x5ccad4});}catch(_0x4083e0){console[_0x3340bb(0x1b8)](_0x4083e0);}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x226),auth,upload[a0_0x3a6b27(0x250)]('image'),async(_0x27d92e,_0x1e94f5)=>{const _0x32e804=a0_0x3a6b27;try{const {name:_0x4834f5,category:_0x51e1e0,brand:_0x55f330,unit:_0x25830e,alertquantity:_0x29c9a1,stock:_0x5d9a77,product_code:_0xd06e50,warehouse:_0x2d0bb5,primary_ItemCode:_0x1def84,second_ItemCode:_0x3da324,second_unit:_0x512a80,maxPerUnit:_0x2d6416,MaxPerProduct:_0x14b4ea}=_0x27d92e[_0x32e804(0x211)],_0x3b5708=_0x27d92e[_0x32e804(0x23a)]?.[_0x32e804(0x204)]||'defaultProduct.avif',_0x276211=new product({'image':_0x3b5708,'name':_0x4834f5,'category':_0x51e1e0,'brand':_0x55f330,'unit':_0x25830e,'alertquantity':_0x29c9a1,'stock':_0x5d9a77,'product_code':_0xd06e50,'warehouse':_0x2d0bb5,'primary_code':_0x1def84,'secondary_code':_0x3da324,'second_unit':_0x512a80,'maxStocks':_0x14b4ea,'maxProdPerUnit':_0x2d6416}),_0x54d5e2=await _0x276211[_0x32e804(0x255)](),_0x46f092=await categories[_0x32e804(0x242)]({'name':_0x51e1e0});_0x46f092[_0x32e804(0x205)]=parseInt(_0x46f092[_0x32e804(0x205)])+0x1,await _0x46f092['save']();const _0x3d0022=await brands[_0x32e804(0x242)]({'name':_0x55f330});_0x3d0022[_0x32e804(0x205)]=parseInt(_0x3d0022[_0x32e804(0x205)])+0x1,await _0x3d0022[_0x32e804(0x255)]();const _0x10c63e=await units['findOne']({'name':_0x25830e});_0x10c63e[_0x32e804(0x205)]=parseInt(_0x10c63e['products'])+0x1,await _0x10c63e['save'](),_0x27d92e[_0x32e804(0x1b4)](_0x32e804(0x1d5),_0x32e804(0x1bf)),_0x1e94f5[_0x32e804(0x25b)](_0x32e804(0x237));}catch(_0x34d124){console['log'](_0x34d124);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x1fc),auth,async(_0x257903,_0xfae19c)=>{const _0xea3793=a0_0x3a6b27;try{const {username:_0x11e44e,email:_0x11dc2f,role:_0x2b6e24}=_0x257903['user'],_0x7a18a8=_0x257903[_0xea3793(0x1ca)],_0x15d05b=await profile[_0xea3793(0x242)]({'email':_0x7a18a8['email']}),_0x3e9ee1=await master_shop[_0xea3793(0x1ea)]();console[_0xea3793(0x1b8)](_0xea3793(0x260),_0x3e9ee1);const _0x555af9=_0x257903[_0xea3793(0x21b)]['id'],_0x39cc9e=await product[_0xea3793(0x1dd)](_0x555af9),_0x28d7d1=await categories['find']({}),_0x4e2ddf=await brands[_0xea3793(0x1ea)]({}),_0x24b635=await units[_0xea3793(0x1ea)]({}),_0x5f3109=await warehouse['find']({'status':'Enabled'}),_0x256107=await units['aggregate']([{'$group':{'_id':_0xea3793(0x21a),'secondaryunit':{'$first':_0xea3793(0x23b)}}}]);if(_0x3e9ee1[0x0]['language']==_0xea3793(0x25c))var _0x217499=users['English'];else{if(_0x3e9ee1[0x0][_0xea3793(0x267)]==_0xea3793(0x1f6))var _0x217499=users[_0xea3793(0x1f6)];else{if(_0x3e9ee1[0x0][_0xea3793(0x267)]==_0xea3793(0x1d3))var _0x217499=users[_0xea3793(0x1d3)];else{if(_0x3e9ee1[0x0]['language']==_0xea3793(0x1d2))var _0x217499=users['Spanish'];else{if(_0x3e9ee1[0x0][_0xea3793(0x267)]=='French')var _0x217499=users[_0xea3793(0x1d0)];else{if(_0x3e9ee1[0x0]['language']==_0xea3793(0x23d))var _0x217499=users['Portuguese'];else{if(_0x3e9ee1[0x0]['language']=='Chinese')var _0x217499=users['Chinese'];else{if(_0x3e9ee1[0x0]['language']==_0xea3793(0x20c))var _0x217499=users[_0xea3793(0x228)];}}}}}}}_0xfae19c[_0xea3793(0x241)]('edit_product',{'success':_0x257903[_0xea3793(0x1b4)](_0xea3793(0x1d5)),'errors':_0x257903['flash'](_0xea3793(0x253)),'role':_0x7a18a8,'profile':_0x15d05b,'alldata':_0x39cc9e,'categories':_0x28d7d1,'brands':_0x4e2ddf,'master_shop':_0x3e9ee1,'units':_0x24b635,'secondunit':_0x256107,'find_data':_0x5f3109,'language':_0x217499});}catch(_0x8f2160){console[_0xea3793(0x1b8)](_0x8f2160);}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x1fc),auth,upload[a0_0x3a6b27(0x250)](a0_0x3a6b27(0x1e4)),async(_0x3d1412,_0x1d1088)=>{const _0x1cad4e=a0_0x3a6b27;try{console[_0x1cad4e(0x1b8)](_0x1cad4e(0x1b5));const _0x4a9066=_0x3d1412[_0x1cad4e(0x21b)]['id'],_0x52060a=await product[_0x1cad4e(0x1dd)](_0x4a9066),{image:_0x31f468,name:_0x748a2d,category:_0x124929,brand:_0xb0dc45,sku:_0x5d16d3,unit:_0xe0c427,alertquantity:_0x5eea21,product_code:_0x52cfc7,warehouse:_0x13e129,primary_ItemCode:_0x48ee67,second_ItemCode:_0x5948c7,second_unit:_0xad40e1,maxPerUnit:_0x42917b,MaxPerProduct:_0x36facd,prod_catdata:_0x3a8d8d}=_0x3d1412['body'];_0x3d1412['file']&&(_0x52060a['image']=_0x3d1412['file'][_0x1cad4e(0x204)]);_0x52060a[_0x1cad4e(0x1d8)]=_0x748a2d,_0x52060a[_0x1cad4e(0x23c)]=_0x124929,_0x52060a[_0x1cad4e(0x219)]=_0xb0dc45,_0x52060a[_0x1cad4e(0x1c9)]=_0x5d16d3,_0x52060a[_0x1cad4e(0x20d)]=_0xe0c427,_0x52060a['alertquantity']=_0x5eea21,_0x52060a[_0x1cad4e(0x1cd)]=_0x52cfc7,_0x52060a[_0x1cad4e(0x1ce)]=_0x13e129,_0x52060a[_0x1cad4e(0x25f)]=_0x48ee67,_0x52060a[_0x1cad4e(0x1f0)]=_0x5948c7,_0x52060a['secondary_unit']=_0xad40e1,_0x52060a[_0x1cad4e(0x235)]=_0x36facd,_0x52060a[_0x1cad4e(0x1c6)]=_0x42917b,_0x52060a[_0x1cad4e(0x1b1)]=_0x3a8d8d;const _0x449737=await _0x52060a[_0x1cad4e(0x255)]();console['log']('product\x20edit',_0x52060a),_0x3d1412[_0x1cad4e(0x1b4)](_0x1cad4e(0x1d5),'product\x20update\x20successfully'),_0x1d1088['redirect']('/products/view');}catch(_0x1cd1cf){console['log'](_0x1cd1cf);}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x208),auth,async(_0x2dbad9,_0x184b0f)=>{const _0x54eecf=a0_0x3a6b27;try{const {username:_0x9a975f,email:_0x36fbfb,role:_0x18957a}=_0x2dbad9[_0x54eecf(0x1ca)],_0x42683b=_0x2dbad9[_0x54eecf(0x1ca)],_0x2e3838=await profile[_0x54eecf(0x242)]({'email':_0x42683b[_0x54eecf(0x1cf)]}),_0x296183=await master_shop[_0x54eecf(0x1ea)]();console[_0x54eecf(0x1b8)](_0x54eecf(0x22b),_0x296183);const _0x3737b5=_0x2dbad9[_0x54eecf(0x21b)]['id'],_0x31ebf5=await product[_0x54eecf(0x1dd)](_0x3737b5);console[_0x54eecf(0x1b8)](_0x54eecf(0x1c7),_0x31ebf5);if(_0x296183[0x0]['language']==_0x54eecf(0x25c))var _0x2dd32e=users[_0x54eecf(0x1ef)];else{if(_0x296183[0x0][_0x54eecf(0x267)]==_0x54eecf(0x1f6))var _0x2dd32e=users[_0x54eecf(0x1f6)];else{if(_0x296183[0x0][_0x54eecf(0x267)]==_0x54eecf(0x1d3))var _0x2dd32e=users['German'];else{if(_0x296183[0x0][_0x54eecf(0x267)]==_0x54eecf(0x1d2))var _0x2dd32e=users[_0x54eecf(0x1d2)];else{if(_0x296183[0x0][_0x54eecf(0x267)]=='French')var _0x2dd32e=users[_0x54eecf(0x1d0)];else{if(_0x296183[0x0][_0x54eecf(0x267)]=='Portuguese\x20(BR)')var _0x2dd32e=users[_0x54eecf(0x1e2)];else{if(_0x296183[0x0][_0x54eecf(0x267)]=='Chinese')var _0x2dd32e=users[_0x54eecf(0x1cb)];else{if(_0x296183[0x0][_0x54eecf(0x267)]==_0x54eecf(0x20c))var _0x2dd32e=users[_0x54eecf(0x228)];}}}}}}}_0x184b0f[_0x54eecf(0x241)](_0x54eecf(0x1d9),{'success':_0x2dbad9[_0x54eecf(0x1b4)](_0x54eecf(0x1d5)),'errors':_0x2dbad9[_0x54eecf(0x1b4)](_0x54eecf(0x253)),'role':_0x42683b,'profile':_0x2e3838,'alldata':_0x31ebf5,'master_shop':_0x296183,'language':_0x2dd32e});}catch(_0x2fde66){console[_0x54eecf(0x1b8)](_0x2fde66);}}),router[a0_0x3a6b27(0x251)]('/products_export_migrate_file',auth,async(_0xef4b2a,_0x4fc8bf)=>{const _0x19135b=a0_0x3a6b27;try{const _0x3a62bb=new excelJS[(_0x19135b(0x1bb))](),_0x2ac7a2=_0x3a62bb[_0x19135b(0x206)](_0x19135b(0x1d6));return _0x2ac7a2[_0x19135b(0x1ec)]=[{'header':'Product_Name','key':'PName','width':0xa},{'header':'Brands','key':_0x19135b(0x1bd),'width':0xa},{'header':'Units','key':_0x19135b(0x22f),'width':0xa},{'header':_0x19135b(0x209),'key':_0x19135b(0x1b3),'width':0xa},{'header':_0x19135b(0x1cc),'key':_0x19135b(0x1eb),'width':0xa},{'header':_0x19135b(0x1c1),'key':'ProductCode','width':0xa},{'header':_0x19135b(0x268),'key':_0x19135b(0x248),'width':0xa},{'header':_0x19135b(0x23f),'key':_0x19135b(0x248),'width':0xa},{'header':_0x19135b(0x225),'key':_0x19135b(0x265),'width':0xa},{'header':_0x19135b(0x1fe),'key':'PAlQty','width':0xa},{'header':'Maximum_Stocks','key':_0x19135b(0x1c2),'width':0xa},{'header':'Products_category','key':'Prod_Cat','width':0xa}],_0x4fc8bf[_0x19135b(0x259)](_0x19135b(0x223),_0x19135b(0x1ff)),_0x4fc8bf[_0x19135b(0x259)]('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x3a62bb[_0x19135b(0x257)][_0x19135b(0x247)](_0x4fc8bf)['then'](()=>{const _0x33b9a4=_0x19135b;_0x4fc8bf[_0x33b9a4(0x245)](0xc8);});}catch(_0x3c1998){_0x4fc8bf[_0x19135b(0x245)](0x190)[_0x19135b(0x229)](_0x3c1998);}});const storage1=multer[a0_0x3a6b27(0x222)]({'destination':(_0x5c1fd3,_0x20fd28,_0x37b1b6)=>{const _0x975235=a0_0x3a6b27;_0x37b1b6(null,_0x975235(0x1be));},'filename':(_0x564e0c,_0x5188e3,_0x25b441)=>{const _0x3fac87=a0_0x3a6b27;_0x25b441(null,Date[_0x3fac87(0x24c)]()+_0x5188e3['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x24b),auth,uploadMigrate['single'](a0_0x3a6b27(0x238)),async(_0x1738e1,_0x49c5c8)=>{const _0x2d6ded=a0_0x3a6b27,_0xa44ca7=_0x1738e1[_0x2d6ded(0x23a)][_0x2d6ded(0x204)],_0x184aad=await xlsx['readFile'](_0x2d6ded(0x1de)+_0xa44ca7);let _0x58f3f1=_0x184aad[_0x2d6ded(0x1ed)],_0x1c7d2e=xlsx[_0x2d6ded(0x256)][_0x2d6ded(0x25d)](_0x184aad[_0x2d6ded(0x215)][_0x58f3f1[0x0]]);for(const _0x26ef01 of _0x1c7d2e){const _0xd3d305=_0x26ef01[_0x2d6ded(0x21e)],_0x3cf49f=_0x26ef01[_0x2d6ded(0x1c4)],_0x121e46=_0x26ef01[_0x2d6ded(0x263)],_0x11131b=_0x26ef01['Secondary_Units'],_0x271dff=_0x26ef01[_0x2d6ded(0x23f)],_0x255086=_0x26ef01[_0x2d6ded(0x225)],_0x3c8ecc=_0x26ef01['Alert_QTY'],_0x478aa7=_0x26ef01['Primary_Code'],_0x442975=_0x26ef01[_0x2d6ded(0x268)],_0x3bca72=_0x26ef01[_0x2d6ded(0x1c3)],_0x73793a=_0x26ef01['max_number_per_units'],_0x463b47=_0x26ef01['Products_category'];try{let _0x3255a1=await categories[_0x2d6ded(0x242)]({'name':_0x255086});if(!_0x3255a1){const _0x22ee77=new categories({'name':_0x255086,'products':'0'});_0x3255a1=await _0x22ee77[_0x2d6ded(0x255)]();}let _0x15ed12=await brands[_0x2d6ded(0x242)]({'name':_0x3cf49f});if(!_0x15ed12){const _0x386aac=new brands({'name':_0x3cf49f,'products':'0'});_0x15ed12=await _0x386aac['save']();}let _0x37688d=await units[_0x2d6ded(0x242)]({'name':_0x121e46,'secondary_unit':_0x11131b});if(!_0x37688d){const _0x4129ec=new units({'name':_0x121e46,'secondary_unit':_0x11131b,'products':'0'});_0x37688d=await _0x4129ec['save']();}const _0x45df70=await product['find']({'name':_0xd3d305,'category':_0x3255a1[_0x2d6ded(0x1d8)],'brand':_0x15ed12[_0x2d6ded(0x1d8)],'secondary_unit':_0x37688d[_0x2d6ded(0x1db)],'product_code':_0x271dff});console['log'](_0x45df70['length']+_0x2d6ded(0x236)+_0x3255a1[_0x2d6ded(0x1d8)]+_0x2d6ded(0x236)+_0x15ed12[_0x2d6ded(0x1d8)]+_0x2d6ded(0x236)+_0x37688d[_0x2d6ded(0x1db)]+_0x2d6ded(0x236)+_0x271dff+'\x20<>\x20'+_0xd3d305);if(_0x45df70[_0x2d6ded(0x1b2)]===0x0){const _0xc6a058=new product({'image':_0x2d6ded(0x22a),'name':_0xd3d305,'category':_0x3255a1[_0x2d6ded(0x1d8)],'brand':_0x15ed12['name'],'unit':_0x37688d[_0x2d6ded(0x1d8)],'alertquantity':_0x3c8ecc,'product_code':_0x271dff,'secondary_unit':_0x37688d['secondary_unit'],'primary_code':_0x478aa7,'secondary_code':_0x442975,'maxStocks':_0x3bca72,'maxProdPerUnit':_0x73793a,'product_category':_0x463b47}),_0x525a51=await _0xc6a058[_0x2d6ded(0x255)]();_0x3255a1[_0x2d6ded(0x205)]=parseInt(_0x3255a1[_0x2d6ded(0x205)])+0x1,await _0x3255a1[_0x2d6ded(0x255)](),_0x15ed12['products']=parseInt(_0x15ed12[_0x2d6ded(0x205)])+0x1,await _0x15ed12[_0x2d6ded(0x255)](),_0x37688d[_0x2d6ded(0x205)]=parseInt(_0x37688d[_0x2d6ded(0x205)])+0x1,await _0x37688d[_0x2d6ded(0x255)](),_0x1738e1[_0x2d6ded(0x1b4)](_0x2d6ded(0x1d5),_0xd3d305+_0x2d6ded(0x1e8));}else{console[_0x2d6ded(0x1b8)](_0x45df70[0x0]);const _0x1c652f=_0x45df70[0x0];_0x1c652f[_0x2d6ded(0x23c)]=_0x3255a1[_0x2d6ded(0x1d8)],_0x1c652f[_0x2d6ded(0x219)]=_0x15ed12[_0x2d6ded(0x1d8)],_0x1c652f[_0x2d6ded(0x20d)]=_0x37688d['name'],_0x1c652f[_0x2d6ded(0x1d1)]=_0x3c8ecc,_0x1c652f[_0x2d6ded(0x1cd)]=_0x271dff,_0x1c652f[_0x2d6ded(0x1db)]=_0x37688d[_0x2d6ded(0x1db)],_0x1c652f['primary_code']=_0x478aa7,_0x1c652f['secondary_code']=_0x442975,_0x1c652f[_0x2d6ded(0x235)]=_0x3bca72,_0x1c652f[_0x2d6ded(0x1c6)]=_0x73793a,_0x1c652f['product_category']=_0x463b47;const _0xb5661f=await _0x1c652f[_0x2d6ded(0x255)]();_0x1738e1[_0x2d6ded(0x1b4)](_0x2d6ded(0x1d5),_0xb5661f[_0x2d6ded(0x1d8)]+_0x2d6ded(0x1c8));}}catch(_0x145144){_0x49c5c8[_0x2d6ded(0x245)](0x1f4)[_0x2d6ded(0x1ee)]({'proderror':_0x145144['message'],'aproduct':_0xd3d305});}}_0x49c5c8[_0x2d6ded(0x25b)]('/products/view');}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x21c),auth,async(_0x2be961,_0x420726)=>{const _0x549a18=a0_0x3a6b27;try{console[_0x549a18(0x1b8)](_0x2be961['body']);const {data_cateory:_0x26828e,datachoose:_0x4890e8}=_0x2be961[_0x549a18(0x211)];var _0x334e13;if(_0x4890e8=='prod_categ')_0x334e13=await product[_0x549a18(0x213)]([{'$group':{'_id':_0x549a18(0x233)}}]);else{if(_0x4890e8=='brands')_0x334e13=await product['aggregate']([{'$match':{'product_category':_0x26828e}},{'$group':{'_id':_0x549a18(0x1f1)}}]);else _0x4890e8==_0x549a18(0x1d4)&&(_0x334e13=await product[_0x549a18(0x213)]([{'$match':{'product_category':_0x26828e}},{'$group':{'_id':_0x549a18(0x20f)}}]));}_0x420726[_0x549a18(0x1ee)](_0x334e13);}catch(_0x5876da){_0x420726['json']({'message':_0x5876da[_0x549a18(0x1e3)]});}}),router['post'](a0_0x3a6b27(0x1da),auth,async(_0x54b87e,_0x36b69e)=>{const _0x3fe311=a0_0x3a6b27;try{const {data_choosing:_0xd6ea5c,data_selected:_0x48e6c7}=_0x54b87e['body'];var _0x3cb44b;if(_0xd6ea5c=='prod_categ')_0x3cb44b=await product[_0x3fe311(0x213)]([{'$match':{'product_category':_0x48e6c7}}]);else{if(_0xd6ea5c==_0x3fe311(0x24d))_0x3cb44b=await product[_0x3fe311(0x213)]([{'$match':{'brand':_0x48e6c7}}]);else _0xd6ea5c==_0x3fe311(0x1d4)&&(_0x3cb44b=await product[_0x3fe311(0x213)]([{'$match':{'category':_0x48e6c7}}]));}_0x36b69e[_0x3fe311(0x1ee)](_0x3cb44b);}catch(_0x2fd24e){_0x36b69e['json']({'message':_0x2fd24e[_0x3fe311(0x1e3)]});}}),router[a0_0x3a6b27(0x251)](a0_0x3a6b27(0x218),auth,async(_0x39845c,_0xbfd39c)=>{const _0x4d2d0c=a0_0x3a6b27,_0x2861af=_0x39845c[_0x4d2d0c(0x1ca)],_0x5ea837=await profile[_0x4d2d0c(0x242)]({'email':_0x2861af[_0x4d2d0c(0x1cf)]}),_0xb6ab78=await master_shop['find'](),_0x21f3d9=await product[_0x4d2d0c(0x1ea)]();if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]==_0x4d2d0c(0x25c))var _0x1e4ca0=users[_0x4d2d0c(0x1ef)];else{if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]==_0x4d2d0c(0x1f6))var _0x1e4ca0=users[_0x4d2d0c(0x1f6)];else{if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]==_0x4d2d0c(0x1d3))var _0x1e4ca0=users[_0x4d2d0c(0x1d3)];else{if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]=='Spanish')var _0x1e4ca0=users[_0x4d2d0c(0x1d2)];else{if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]==_0x4d2d0c(0x1d0))var _0x1e4ca0=users[_0x4d2d0c(0x1d0)];else{if(_0xb6ab78[0x0][_0x4d2d0c(0x267)]==_0x4d2d0c(0x23d))var _0x1e4ca0=users[_0x4d2d0c(0x1e2)];else{if(_0xb6ab78[0x0]['language']==_0x4d2d0c(0x1cb))var _0x1e4ca0=users[_0x4d2d0c(0x1cb)];else{if(_0xb6ab78[0x0]['language']==_0x4d2d0c(0x20c))var _0x1e4ca0=users[_0x4d2d0c(0x228)];}}}}}}}_0xbfd39c[_0x4d2d0c(0x241)]('product_barcode_products',{'success':_0x39845c['flash'](_0x4d2d0c(0x1d5)),'errors':_0x39845c['flash'](_0x4d2d0c(0x253)),'role':_0x2861af,'profile':_0x5ea837,'products':_0x21f3d9,'master_shop':_0xb6ab78,'language':_0x1e4ca0});}),router[a0_0x3a6b27(0x212)]('/barcode_data',auth,async(_0x2c8aa7,_0x1d9d53)=>{const _0x39e42f=a0_0x3a6b27,_0x3960a3=await product[_0x39e42f(0x1ea)]();_0x1d9d53[_0x39e42f(0x1ee)]({'data':_0x3960a3});}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x258),auth,async(_0x215ee9,_0x31c47d)=>{const _0x578936=a0_0x3a6b27;try{const {dataProdCat:_0x119723,dataProdIdentity:_0x393278}=_0x215ee9[_0x578936(0x211)];var _0x4bbe6d;switch(_0x119723){case'fg':switch(_0x393278){case _0x578936(0x1c4):_0x4bbe6d=await product[_0x578936(0x213)]([{'$match':{'product_category':_0x578936(0x231)}},{'$group':{'_id':_0x578936(0x1f1)}},{'$project':{'brand':_0x578936(0x21a)}}]);break;case _0x578936(0x225):_0x4bbe6d=await product[_0x578936(0x213)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x578936(0x20f)}},{'$project':{'category':_0x578936(0x21a)}}]);break;}break;case'rm':switch(_0x393278){case _0x578936(0x1c4):_0x4bbe6d=await product['aggregate']([{'$match':{'product_category':_0x578936(0x220)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x578936(0x21a)}}]);break;case'Category':_0x4bbe6d=await product[_0x578936(0x213)]([{'$match':{'product_category':_0x578936(0x220)}},{'$group':{'_id':_0x578936(0x20f)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x31c47d[_0x578936(0x1ee)](_0x4bbe6d);}catch(_0x4dd39f){_0x31c47d[_0x578936(0x1ee)]({'message':_0x4dd39f[_0x578936(0x1e3)]});}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x1dc),auth,async(_0x1f7a1b,_0x53b65e)=>{const _0x498424=a0_0x3a6b27;try{console[_0x498424(0x1b8)](_0x1f7a1b['body']);const {prod_cat:_0x1ffbfd,identity:_0x4f1953,valueData:_0x16d63a,typeofbarcode:_0x417605}=_0x1f7a1b[_0x498424(0x211)];let _0x3c3991;switch(_0x1ffbfd){case'fg':if(_0x4f1953==_0x498424(0x1c4))_0x3c3991=await product['aggregate']([{'$match':{'product_category':_0x498424(0x231),'brand':_0x16d63a}}]);else _0x4f1953==_0x498424(0x225)&&(_0x3c3991=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','category':_0x16d63a}}]));break;case'rm':if(_0x4f1953==_0x498424(0x1c4))_0x3c3991=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x16d63a}}]);else _0x4f1953=='Category'&&(_0x3c3991=await product[_0x498424(0x213)]([{'$match':{'product_category':_0x498424(0x220),'category':_0x16d63a}}]));break;}const _0x4ba347=_0x59aa5f=>_0x59aa5f*0x48,_0x2cec7d={'width':0x3,'height':0x1},_0x30fd04=new PDFDocument({'margin':_0x4ba347(0.75),'size':[_0x4ba347(_0x2cec7d[_0x498424(0x244)]),_0x4ba347(_0x2cec7d[_0x498424(0x1df)])],'bufferPages':!![]}),_0xf9d1f5=_0x3c3991[_0x498424(0x1b2)];for(let _0x306410=0x0;_0x306410<=_0xf9d1f5;_0x306410++){if(_0x306410!=_0xf9d1f5){const _0x2f21cd=_0x3c3991[_0x306410][_0x498424(0x1d8)],_0x4a273e=_0x3c3991[_0x306410][_0x498424(0x25f)],_0x4c4119=_0x3c3991[_0x306410][_0x498424(0x1f0)],_0x41e2bb=_0x3c3991[_0x306410][_0x498424(0x1cd)];var _0x3db6a9;switch(_0x417605){case'1':_0x3db6a9=_0x4a273e;break;case'2':_0x3db6a9=_0x4c4119;break;case'3':_0x3db6a9=_0x41e2bb;break;}const _0x5da7b9={'width':0xd2,'height':0x64},_0x19277f={'width':_0x4ba347(_0x2cec7d['width']),'height':_0x4ba347(_0x2cec7d['height'])},_0xf2d04b=new Canvas();JsBarcode(_0xf2d04b,_0x3db6a9,{'format':_0x498424(0x254),'height':_0x5da7b9[_0x498424(0x1df)],'displayValue':!![],'text':_0x3db6a9});const _0x56b13b=_0xf2d04b[_0x498424(0x216)](),_0x2caba3=_0x19277f['width']/_0x5da7b9['width'],_0x1e20d9=_0x19277f['height']/_0x5da7b9[_0x498424(0x1df)],_0x25a84e=Math['min'](_0x2caba3,_0x1e20d9),_0x5a5cd0=_0x5da7b9['width']*_0x25a84e,_0x5495d9=_0x5da7b9[_0x498424(0x1df)]*_0x25a84e,_0x77e3de=(_0x19277f[_0x498424(0x244)]-_0x5a5cd0)/0x2,_0x305412=(_0x19277f[_0x498424(0x1df)]-_0x5495d9)/0x2;_0x30fd04[_0x498424(0x1e4)](_0x56b13b,_0x77e3de,_0x305412,{'width':_0x5a5cd0,'height':_0x5495d9}),_0x306410!=_0xf9d1f5&&_0x30fd04[_0x498424(0x224)]();}}const _0x25e77c=[];_0x30fd04['on'](_0x498424(0x1f2),_0x25e77c['push'][_0x498424(0x1d7)](_0x25e77c)),_0x30fd04['on'](_0x498424(0x1ba),()=>{const _0x225c1b=_0x498424,_0x2f6768=Buffer[_0x225c1b(0x221)](_0x25e77c),_0x24d450=_0x2f6768[_0x225c1b(0x252)]('base64');_0x53b65e[_0x225c1b(0x1ee)]({'pdfContent':_0x24d450});}),_0x30fd04['end']();}catch(_0x187216){_0x53b65e['json']({'message':_0x187216[_0x498424(0x1e3)]});}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x22d),auth,async(_0x4690d3,_0x4742a0)=>{const _0x4da857=a0_0x3a6b27;try{console['log'](_0x4690d3[_0x4da857(0x211)]);const {prod_cat:_0x1e9945,identity:_0x1ab396,valueData:_0x4195d0}=_0x4690d3[_0x4da857(0x211)];let _0x543f83;switch(_0x1e9945){case'fg':if(_0x1ab396==_0x4da857(0x1c4))_0x543f83=await product[_0x4da857(0x213)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x4195d0}}]);else _0x1ab396==_0x4da857(0x225)&&(_0x543f83=await product[_0x4da857(0x213)]([{'$match':{'product_category':_0x4da857(0x231),'category':_0x4195d0}}]));break;case'rm':if(_0x1ab396==_0x4da857(0x1c4))_0x543f83=await product[_0x4da857(0x213)]([{'$match':{'product_category':_0x4da857(0x220),'brand':_0x4195d0}}]);else _0x1ab396==_0x4da857(0x225)&&(_0x543f83=await product[_0x4da857(0x213)]([{'$match':{'product_category':_0x4da857(0x220),'category':_0x4195d0}}]));break;}_0x4742a0['json']({'data':_0x543f83});}catch(_0x35f8b4){_0x4742a0[_0x4da857(0x1ee)]({'message':_0x35f8b4[_0x4da857(0x1e3)]});}}),router[a0_0x3a6b27(0x212)](a0_0x3a6b27(0x1e1),auth,async(_0x6c5812,_0xe6ded9)=>{const _0x6533af=a0_0x3a6b27;try{const _0x4942c0=_0x6c5812[_0x6533af(0x21b)]['id'],{copies:_0x2f208b,typeofbarcode:_0x20a4fc}=_0x6c5812[_0x6533af(0x211)];var _0x5931fb=await product[_0x6533af(0x1dd)](_0x4942c0);const _0x40834f=_0x2d2b62=>_0x2d2b62*0x48,_0x3e07d6={'width':0x3,'height':0x1},_0x16a391=new PDFDocument({'margin':_0x40834f(0.75),'size':[_0x40834f(_0x3e07d6[_0x6533af(0x244)]),_0x40834f(_0x3e07d6['height'])],'bufferPages':!![]}),_0x43e731=_0x2f208b,_0xcf1aac=_0x5931fb['name'],_0x4bd3ff=_0x5931fb['primary_code'],_0x398211=_0x5931fb[_0x6533af(0x1f0)],_0x3799d8=_0x5931fb[_0x6533af(0x1cd)];let _0x8bcbd2;switch(_0x20a4fc){case'1':_0x8bcbd2=_0x4bd3ff;break;case'2':_0x8bcbd2=_0x398211;break;case'3':_0x8bcbd2=_0x3799d8;break;}const _0x500344={'width':0xd2,'height':0x64},_0x3b023a={'width':_0x40834f(_0x3e07d6[_0x6533af(0x244)]),'height':_0x40834f(_0x3e07d6[_0x6533af(0x1df)])};for(let _0x10d741=0x1;_0x10d741<=_0x43e731;_0x10d741++){const _0x3657bc=new Canvas();JsBarcode(_0x3657bc,_0x8bcbd2,{'format':_0x6533af(0x254),'height':_0x500344[_0x6533af(0x1df)],'displayValue':!![],'text':_0x8bcbd2});const _0x145c82=_0x3657bc[_0x6533af(0x216)](),_0x449d4f=_0x3b023a[_0x6533af(0x244)]/_0x500344[_0x6533af(0x244)],_0x30bbe6=_0x3b023a['height']/_0x500344['height'],_0x28a89f=Math['min'](_0x449d4f,_0x30bbe6),_0x2f387b=_0x500344['width']*_0x28a89f,_0x1ab732=_0x500344[_0x6533af(0x1df)]*_0x28a89f,_0x11aa09=(_0x3b023a[_0x6533af(0x244)]-_0x2f387b)/0x2,_0x2839fd=(_0x3b023a[_0x6533af(0x1df)]-_0x1ab732)/0x2;_0x16a391[_0x6533af(0x1e4)](_0x145c82,_0x11aa09,_0x2839fd,{'width':_0x2f387b,'height':_0x1ab732}),_0x10d741!=_0x43e731&&_0x16a391[_0x6533af(0x224)]();}const _0x1edb18=[];_0x16a391['on'](_0x6533af(0x1f2),_0x1edb18['push'][_0x6533af(0x1d7)](_0x1edb18)),_0x16a391['on'](_0x6533af(0x1ba),()=>{const _0x67005b=_0x6533af,_0x55a0f9=Buffer[_0x67005b(0x221)](_0x1edb18),_0x1ebd67=_0x55a0f9[_0x67005b(0x252)](_0x67005b(0x239));_0xe6ded9['json']({'pdfContent':_0x1ebd67});}),_0x16a391[_0x6533af(0x1ba)]();}catch(_0x47b29a){_0xe6ded9[_0x6533af(0x1ee)]({'message':_0x47b29a[_0x6533af(0x1e3)]});}}),module['exports']=router;