const a0_0x1d488f=a0_0x20aa;(function(_0x547fa4,_0x234274){const _0x2b95d9=a0_0x20aa,_0x24f97d=_0x547fa4();while(!![]){try{const _0x45e726=parseInt(_0x2b95d9(0x1e2))/0x1+parseInt(_0x2b95d9(0x1d0))/0x2+-parseInt(_0x2b95d9(0x202))/0x3+parseInt(_0x2b95d9(0x1c0))/0x4*(-parseInt(_0x2b95d9(0x213))/0x5)+parseInt(_0x2b95d9(0x1d8))/0x6*(parseInt(_0x2b95d9(0x252))/0x7)+parseInt(_0x2b95d9(0x1f5))/0x8+-parseInt(_0x2b95d9(0x255))/0x9;if(_0x45e726===_0x234274)break;else _0x24f97d['push'](_0x24f97d['shift']());}catch(_0x4bffd2){_0x24f97d['push'](_0x24f97d['shift']());}}}(a0_0x4170,0xed18a));const express=require(a0_0x1d488f(0x231)),res=require(a0_0x1d488f(0x1ca)),app=express(),router=express[a0_0x1d488f(0x21e)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x1d488f(0x1c2)),auth=require(a0_0x1d488f(0x225)),users=require(a0_0x1d488f(0x201)),excelJS=require(a0_0x1d488f(0x262)),xlsx=require('xlsx'),JsBarcode=require(a0_0x1d488f(0x261)),{Canvas}=require(a0_0x1d488f(0x235)),PDFDocument=require('pdfkit-table');router['get'](a0_0x1d488f(0x260),auth,async(_0x3bf1d8,_0x3f795e)=>{const _0x20e190=a0_0x1d488f;try{const {username:_0x294017,email:_0x1a3adc,role:_0x4a4805}=_0x3bf1d8[_0x20e190(0x20c)],_0x2e4c19=_0x3bf1d8[_0x20e190(0x20c)],_0x4b2357=await profile[_0x20e190(0x25d)]({'email':_0x2e4c19[_0x20e190(0x1cd)]}),_0xfec389=await master_shop[_0x20e190(0x258)]();console[_0x20e190(0x1de)](_0x20e190(0x211),_0xfec389);const _0x351adf=await categories[_0x20e190(0x258)]();if(_0xfec389[0x0][_0x20e190(0x230)]==_0x20e190(0x210))var _0x559f52=users[_0x20e190(0x1fd)];else{if(_0xfec389[0x0]['language']==_0x20e190(0x1d5))var _0x559f52=users[_0x20e190(0x1d5)];else{if(_0xfec389[0x0]['language']==_0x20e190(0x237))var _0x559f52=users['German'];else{if(_0xfec389[0x0][_0x20e190(0x230)]==_0x20e190(0x1c4))var _0x559f52=users[_0x20e190(0x1c4)];else{if(_0xfec389[0x0][_0x20e190(0x230)]==_0x20e190(0x24e))var _0x559f52=users[_0x20e190(0x24e)];else{if(_0xfec389[0x0]['language']=='Portuguese\x20(BR)')var _0x559f52=users['Portuguese'];else{if(_0xfec389[0x0][_0x20e190(0x230)]=='Chinese')var _0x559f52=users['Chinese'];else{if(_0xfec389[0x0][_0x20e190(0x230)]==_0x20e190(0x1bd))var _0x559f52=users[_0x20e190(0x1db)];}}}}}}}_0x3f795e[_0x20e190(0x215)](_0x20e190(0x239),{'success':_0x3bf1d8[_0x20e190(0x1c8)](_0x20e190(0x1f3)),'errors':_0x3bf1d8[_0x20e190(0x1c8)](_0x20e190(0x200)),'role':_0x2e4c19,'profile':_0x4b2357,'user':_0x351adf,'master_shop':_0xfec389,'language':_0x559f52});}catch(_0x46e648){console['log'](_0x46e648);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x260),auth,async(_0x39b7b5,_0x3ddccb)=>{const _0x57f25a=a0_0x1d488f;try{const {name:_0x3a9f97,products:_0x2f8cf3}=_0x39b7b5[_0x57f25a(0x25b)],_0x44e47c=new categories({'name':_0x3a9f97,'products':_0x2f8cf3}),_0x32a213=await categories[_0x57f25a(0x25d)]({'name':_0x3a9f97});_0x32a213?_0x39b7b5['flash']('errors',_0x3a9f97+_0x57f25a(0x20d)):_0x39b7b5[_0x57f25a(0x1c8)](_0x57f25a(0x1f3),_0x3a9f97+_0x57f25a(0x1eb));const _0x3f93e8=await _0x44e47c[_0x57f25a(0x1f0)]();_0x3ddccb[_0x57f25a(0x227)](_0x57f25a(0x219));}catch(_0x1877d0){console[_0x57f25a(0x1de)](_0x1877d0);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x24d),auth,async(_0x41f675,_0x423c32)=>{const _0x50b50b=a0_0x1d488f;try{const {username:_0x4881e5,email:_0x2edb4d,role:_0x4c56d9}=_0x41f675['user'],_0x4fbc73=_0x41f675[_0x50b50b(0x20c)],_0x30a7f0=await profile[_0x50b50b(0x25d)]({'email':_0x4fbc73[_0x50b50b(0x1cd)]}),_0x5914cb=await master_shop[_0x50b50b(0x258)]();console['log']('master',_0x5914cb);const _0x30dde4=_0x41f675[_0x50b50b(0x216)]['id'];console[_0x50b50b(0x1de)](_0x30dde4);const _0x54c308=await categories[_0x50b50b(0x1cc)](_0x30dde4);if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x210))var _0x23754d=users[_0x50b50b(0x1fd)];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x1d5))var _0x23754d=users[_0x50b50b(0x1d5)];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x237))var _0x23754d=users[_0x50b50b(0x237)];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x1c4))var _0x23754d=users['Spanish'];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]=='French')var _0x23754d=users[_0x50b50b(0x24e)];else{if(_0x5914cb[0x0]['language']=='Portuguese\x20(BR)')var _0x23754d=users[_0x50b50b(0x1d3)];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x1c9))var _0x23754d=users[_0x50b50b(0x1c9)];else{if(_0x5914cb[0x0][_0x50b50b(0x230)]==_0x50b50b(0x1bd))var _0x23754d=users[_0x50b50b(0x1db)];}}}}}}}_0x423c32[_0x50b50b(0x215)]('categories',{'success':_0x41f675[_0x50b50b(0x1c8)](_0x50b50b(0x1f3)),'errors':_0x41f675[_0x50b50b(0x1c8)]('errors'),'role':_0x4fbc73,'profile':_0x30a7f0,'master_shop':_0x5914cb,'user':_0x54c308,'language':_0x23754d});}catch(_0x5338ac){console[_0x50b50b(0x1de)](_0x5338ac);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x24d),auth,async(_0x6e4259,_0x3bd1e5)=>{const _0x1ad2e9=a0_0x1d488f;try{const _0x1da220=_0x6e4259[_0x1ad2e9(0x216)]['id'],_0x449219=await categories['findByIdAndUpdate'](_0x1da220,_0x6e4259[_0x1ad2e9(0x25b)]);_0x6e4259['flash'](_0x1ad2e9(0x1f3),''+users['categories_edit']),_0x3bd1e5[_0x1ad2e9(0x227)](_0x1ad2e9(0x219));}catch(_0x1c752b){console[_0x1ad2e9(0x1de)](_0x1c752b);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x20f),auth,async(_0x7212a2,_0x25dc55)=>{const _0x494c20=a0_0x1d488f;try{const _0x1aef08=_0x7212a2[_0x494c20(0x216)]['id'],_0x1c3736=await categories[_0x494c20(0x1e5)](_0x1aef08);_0x7212a2['flash'](_0x494c20(0x1f3),_0x494c20(0x1e3)),_0x25dc55[_0x494c20(0x227)](_0x494c20(0x219));}catch(_0xfd4cb7){console[_0x494c20(0x1de)](_0xfd4cb7);}}),router['get'](a0_0x1d488f(0x1aa),auth,async(_0x224fad,_0x4b7875)=>{const _0x5f42cb=a0_0x1d488f;try{const {username:_0x247af8,email:_0x34d797,role:_0x595978}=_0x224fad[_0x5f42cb(0x20c)],_0x4d6fc3=_0x224fad[_0x5f42cb(0x20c)],_0x447a80=await profile[_0x5f42cb(0x25d)]({'email':_0x4d6fc3[_0x5f42cb(0x1cd)]}),_0x3fabfe=await master_shop[_0x5f42cb(0x258)]();console[_0x5f42cb(0x1de)]('master',_0x3fabfe);const _0x102ddc=await brands[_0x5f42cb(0x258)]();if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x210))var _0x3fad68=users[_0x5f42cb(0x1fd)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x1d5))var _0x3fad68=users['Hindi'];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x237))var _0x3fad68=users[_0x5f42cb(0x237)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x1c4))var _0x3fad68=users[_0x5f42cb(0x1c4)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]=='French')var _0x3fad68=users[_0x5f42cb(0x24e)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]=='Portuguese\x20(BR)')var _0x3fad68=users[_0x5f42cb(0x1d3)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x1c9))var _0x3fad68=users[_0x5f42cb(0x1c9)];else{if(_0x3fabfe[0x0][_0x5f42cb(0x230)]==_0x5f42cb(0x1bd))var _0x3fad68=users[_0x5f42cb(0x1db)];}}}}}}}_0x4b7875[_0x5f42cb(0x215)]('brands',{'success':_0x224fad[_0x5f42cb(0x1c8)](_0x5f42cb(0x1f3)),'errors':_0x224fad[_0x5f42cb(0x1c8)](_0x5f42cb(0x200)),'role':_0x4d6fc3,'profile':_0x447a80,'master_shop':_0x3fabfe,'user':_0x102ddc,'language':_0x3fad68});}catch(_0x4e1794){console[_0x5f42cb(0x1de)](_0x4e1794);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x1aa),auth,async(_0x330d22,_0x53977e)=>{const _0x5d20b0=a0_0x1d488f;try{const {name:_0x18ac63,products:_0x5758bc}=_0x330d22['body'],_0x211d49=new brands({'name':_0x18ac63,'products':_0x5758bc}),_0x27fea9=await brands[_0x5d20b0(0x25d)]({'name':_0x18ac63});_0x27fea9?_0x330d22[_0x5d20b0(0x1c8)](_0x5d20b0(0x200),_0x18ac63+_0x5d20b0(0x1d7)):_0x330d22[_0x5d20b0(0x1c8)]('success',_0x18ac63+_0x5d20b0(0x23a));const _0x425f4b=await _0x211d49[_0x5d20b0(0x1f0)]();_0x53977e[_0x5d20b0(0x227)](_0x5d20b0(0x218));}catch(_0x4e40c9){console[_0x5d20b0(0x1de)](_0x4e40c9);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x1e1),auth,async(_0x58783c,_0x10ff68)=>{const _0x15476b=a0_0x1d488f;try{const {username:_0x417ddf,email:_0x42edc3,role:_0x2ae195}=_0x58783c[_0x15476b(0x20c)],_0x37de73=_0x58783c[_0x15476b(0x20c)],_0x586cd9=await profile[_0x15476b(0x25d)]({'email':_0x37de73[_0x15476b(0x1cd)]}),_0x3f3f9b=await master_shop[_0x15476b(0x258)]();console[_0x15476b(0x1de)](_0x15476b(0x211),_0x3f3f9b);const _0x2a1f60=_0x58783c[_0x15476b(0x216)]['id'];console[_0x15476b(0x1de)](_0x2a1f60);const _0x11e7fe=await brands[_0x15476b(0x1cc)](_0x2a1f60);if(_0x3f3f9b[0x0]['language']==_0x15476b(0x210))var _0xf5f2de=users[_0x15476b(0x1fd)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x1d5))var _0xf5f2de=users[_0x15476b(0x1d5)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x237))var _0xf5f2de=users[_0x15476b(0x237)];else{if(_0x3f3f9b[0x0]['language']==_0x15476b(0x1c4))var _0xf5f2de=users[_0x15476b(0x1c4)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x24e))var _0xf5f2de=users[_0x15476b(0x24e)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x1e0))var _0xf5f2de=users[_0x15476b(0x1d3)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x1c9))var _0xf5f2de=users[_0x15476b(0x1c9)];else{if(_0x3f3f9b[0x0][_0x15476b(0x230)]==_0x15476b(0x1bd))var _0xf5f2de=users[_0x15476b(0x1db)];}}}}}}}_0x10ff68[_0x15476b(0x215)](_0x15476b(0x24b),{'success':_0x58783c[_0x15476b(0x1c8)](_0x15476b(0x1f3)),'errors':_0x58783c[_0x15476b(0x1c8)](_0x15476b(0x200)),'role':_0x37de73,'profile':_0x586cd9,'master_shop':_0x3f3f9b,'user':_0x11e7fe,'language':_0xf5f2de});}catch(_0x346f02){console[_0x15476b(0x1de)](_0x346f02);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x1e1),auth,async(_0x173407,_0x15673a)=>{const _0x2b5b42=a0_0x1d488f;try{const _0x586c2f=_0x173407[_0x2b5b42(0x216)]['id'],_0x523a72=await brands[_0x2b5b42(0x1cf)](_0x586c2f,_0x173407[_0x2b5b42(0x25b)]);_0x173407['flash'](_0x2b5b42(0x1f3),'brand\x20data\x20update\x20successfully'),_0x15673a[_0x2b5b42(0x227)](_0x2b5b42(0x218));}catch(_0x1525c5){console[_0x2b5b42(0x1de)](_0x1525c5);}}),router['get'](a0_0x1d488f(0x1f1),auth,async(_0x41f5d6,_0x2d7461)=>{const _0x48de1e=a0_0x1d488f;try{const _0xc32e33=_0x41f5d6['params']['id'],_0x1c89e6=await brands[_0x48de1e(0x1e5)](_0xc32e33);_0x41f5d6[_0x48de1e(0x1c8)](_0x48de1e(0x1f3),_0x48de1e(0x1c6)),_0x2d7461[_0x48de1e(0x227)](_0x48de1e(0x218));}catch(_0x128e98){console[_0x48de1e(0x1de)](_0x128e98);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x1ae),auth,async(_0x24f7a5,_0x160abe)=>{const _0x51969e=a0_0x1d488f;try{const {username:_0x5605e9,email:_0x46b758,role:_0xbf898c}=_0x24f7a5[_0x51969e(0x20c)],_0x3e0773=_0x24f7a5[_0x51969e(0x20c)],_0x31c5de=await profile[_0x51969e(0x25d)]({'email':_0x3e0773[_0x51969e(0x1cd)]}),_0xb04fd7=await master_shop[_0x51969e(0x258)]();console[_0x51969e(0x1de)](_0x51969e(0x211),_0xb04fd7);const _0x11f917=await units['find']();if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x210))var _0x17b9fb=users[_0x51969e(0x1fd)];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x1d5))var _0x17b9fb=users['Hindi'];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x237))var _0x17b9fb=users[_0x51969e(0x237)];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x1c4))var _0x17b9fb=users[_0x51969e(0x1c4)];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x24e))var _0x17b9fb=users[_0x51969e(0x24e)];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x1e0))var _0x17b9fb=users[_0x51969e(0x1d3)];else{if(_0xb04fd7[0x0][_0x51969e(0x230)]==_0x51969e(0x1c9))var _0x17b9fb=users[_0x51969e(0x1c9)];else{if(_0xb04fd7[0x0]['language']=='Arabic\x20(ae)')var _0x17b9fb=users[_0x51969e(0x1db)];}}}}}}}_0x160abe[_0x51969e(0x215)](_0x51969e(0x1ee),{'success':_0x24f7a5[_0x51969e(0x1c8)](_0x51969e(0x1f3)),'errors':_0x24f7a5[_0x51969e(0x1c8)](_0x51969e(0x200)),'role':_0x3e0773,'profile':_0x31c5de,'master_shop':_0xb04fd7,'user':_0x11f917,'language':_0x17b9fb});}catch(_0x2ef5c1){console['log'](_0x2ef5c1);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x1ae),auth,async(_0x1e3271,_0x41c3f5)=>{const _0x4eaec6=a0_0x1d488f;try{const {name:_0x2d80bb,secondary_unit:_0x4b5a43,products:_0x75f3b0}=_0x1e3271['body'],_0x41be51=new units({'name':_0x2d80bb,'secondary_unit':_0x4b5a43,'products':_0x75f3b0}),_0x1418c3=await units[_0x4eaec6(0x25d)]({'name':_0x2d80bb});_0x1418c3?_0x1e3271[_0x4eaec6(0x1c8)]('errors',_0x2d80bb+_0x4eaec6(0x22b)):_0x1e3271[_0x4eaec6(0x1c8)](_0x4eaec6(0x1f3),_0x2d80bb+_0x4eaec6(0x1be));const _0x461075=await _0x41be51[_0x4eaec6(0x1f0)]();_0x41c3f5[_0x4eaec6(0x227)]('/products/units');}catch(_0x50b6e7){console['log'](_0x50b6e7);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x23d),auth,async(_0x36fe64,_0x37c48e)=>{const _0x539948=a0_0x1d488f;try{const {username:_0x1a10fc,email:_0x5a8b0e,role:_0x2e3715}=_0x36fe64[_0x539948(0x20c)],_0x3f2cf1=_0x36fe64['user'],_0x504484=await profile[_0x539948(0x25d)]({'email':_0x3f2cf1['email']}),_0x59ed48=await master_shop[_0x539948(0x258)]();console[_0x539948(0x1de)]('master',_0x59ed48);const _0x2d31a2=_0x36fe64[_0x539948(0x216)]['id'],_0x47e729=await units['findById'](_0x2d31a2);if(_0x59ed48[0x0][_0x539948(0x230)]=='English\x20(US)')var _0x1d7c3f=users[_0x539948(0x1fd)];else{if(_0x59ed48[0x0][_0x539948(0x230)]==_0x539948(0x1d5))var _0x1d7c3f=users['Hindi'];else{if(_0x59ed48[0x0][_0x539948(0x230)]==_0x539948(0x237))var _0x1d7c3f=users[_0x539948(0x237)];else{if(_0x59ed48[0x0]['language']==_0x539948(0x1c4))var _0x1d7c3f=users[_0x539948(0x1c4)];else{if(_0x59ed48[0x0][_0x539948(0x230)]=='French')var _0x1d7c3f=users[_0x539948(0x24e)];else{if(_0x59ed48[0x0][_0x539948(0x230)]==_0x539948(0x1e0))var _0x1d7c3f=users[_0x539948(0x1d3)];else{if(_0x59ed48[0x0][_0x539948(0x230)]==_0x539948(0x1c9))var _0x1d7c3f=users[_0x539948(0x1c9)];else{if(_0x59ed48[0x0][_0x539948(0x230)]=='Arabic\x20(ae)')var _0x1d7c3f=users['Arabic'];}}}}}}}_0x37c48e[_0x539948(0x215)](_0x539948(0x1ee),{'success':_0x36fe64[_0x539948(0x1c8)](_0x539948(0x1f3)),'errors':_0x36fe64[_0x539948(0x1c8)]('errors'),'role':_0x3f2cf1,'profile':_0x504484,'master_shop':_0x59ed48,'user':_0x47e729,'language':_0x1d7c3f});}catch(_0x16fa70){console[_0x539948(0x1de)](_0x16fa70);}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x23d),auth,async(_0x18f8fc,_0x44232d)=>{const _0x2cbe71=a0_0x1d488f;try{const _0x2a64f4=_0x18f8fc[_0x2cbe71(0x216)]['id'],_0x2c85b6=await units[_0x2cbe71(0x1cf)](_0x2a64f4,_0x18f8fc[_0x2cbe71(0x25b)]);_0x18f8fc[_0x2cbe71(0x1c8)](_0x2cbe71(0x1f3),_0x2cbe71(0x1dd)),_0x44232d['redirect'](_0x2cbe71(0x224));}catch(_0x505904){console['log'](_0x505904);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x22f),auth,async(_0x4bc414,_0x5c07b5)=>{const _0x2b6e18=a0_0x1d488f;try{const _0x3b911b=_0x4bc414['params']['id'],_0x560008=await units[_0x2b6e18(0x1e5)](_0x3b911b);_0x4bc414[_0x2b6e18(0x1c8)](_0x2b6e18(0x1f3),_0x2b6e18(0x1da)),_0x5c07b5[_0x2b6e18(0x227)](_0x2b6e18(0x224));}catch(_0x2665a9){console[_0x2b6e18(0x1de)](_0x2665a9);}});const storage=multer[a0_0x1d488f(0x1ec)]({'destination':(_0x4b73f5,_0x7bdae2,_0x312608)=>{const _0x219b9e=a0_0x1d488f;_0x312608(null,_0x219b9e(0x1b9));},'filename':(_0x182873,_0x1b3b4f,_0x55c21f)=>{const _0x33f536=a0_0x1d488f;_0x55c21f(null,Date[_0x33f536(0x22d)]()+_0x1b3b4f[_0x33f536(0x1f2)]);}}),upload=multer({'storage':storage});function a0_0x20aa(_0x2ff209,_0x40bea9){const _0x417001=a0_0x4170();return a0_0x20aa=function(_0x20aac4,_0x5c6fda){_0x20aac4=_0x20aac4-0x1a6;let _0x2e52e1=_0x417001[_0x20aac4];return _0x2e52e1;},a0_0x20aa(_0x2ff209,_0x40bea9);}router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x22c),auth,async(_0x37e1ae,_0xdeab3d)=>{const _0x14d925=a0_0x1d488f;try{const {username:_0x5298bb,email:_0x3c7e4e,role:_0x16582f}=_0x37e1ae[_0x14d925(0x20c)],_0x480715=_0x37e1ae[_0x14d925(0x20c)],_0x4b4971=await profile['findOne']({'email':_0x480715[_0x14d925(0x1cd)]}),_0x36d638={'year':'numeric','month':_0x14d925(0x226),'day':_0x14d925(0x1f4)},_0x2df4d0=await master_shop[_0x14d925(0x258)]();console[_0x14d925(0x1de)](_0x14d925(0x1d1),_0x2df4d0);const _0x39158a=await product[_0x14d925(0x258)]();console[_0x14d925(0x1de)]('Products\x20find_data',_0x39158a);const _0x44d165=await warehouse['aggregate']([{'$unwind':_0x14d925(0x248)},{'$lookup':{'from':_0x14d925(0x1e4),'localField':'product_details.product_name','foreignField':_0x14d925(0x1fc),'as':_0x14d925(0x1c7)}},{'$unwind':_0x14d925(0x23c)},{'$project':{'product_name':_0x14d925(0x23b),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x14d925(0x208),'product_stock':{'$sum':_0x14d925(0x250)}}}]);console[_0x14d925(0x1de)](_0x14d925(0x214),_0x44d165),_0x44d165[_0x14d925(0x1af)](_0x3d823e=>{const _0x4501fc=_0x14d925,_0x2d9dcd=_0x39158a[_0x4501fc(0x251)](_0x36762c=>{const _0x55a9bc=_0x4501fc;_0x36762c[_0x55a9bc(0x1fc)]==_0x3d823e['_id']&&(_0x36762c[_0x55a9bc(0x1bc)]=parseInt(_0x36762c['stock'])+parseInt(_0x3d823e[_0x55a9bc(0x1ce)]));});}),console[_0x14d925(0x1de)](_0x14d925(0x220),_0x39158a);if(_0x2df4d0[0x0][_0x14d925(0x230)]==_0x14d925(0x210))var _0x2dc5aa=users['English'];else{if(_0x2df4d0[0x0]['language']=='Hindi')var _0x2dc5aa=users[_0x14d925(0x1d5)];else{if(_0x2df4d0[0x0][_0x14d925(0x230)]==_0x14d925(0x237))var _0x2dc5aa=users[_0x14d925(0x237)];else{if(_0x2df4d0[0x0][_0x14d925(0x230)]=='Spanish')var _0x2dc5aa=users[_0x14d925(0x1c4)];else{if(_0x2df4d0[0x0]['language']==_0x14d925(0x24e))var _0x2dc5aa=users[_0x14d925(0x24e)];else{if(_0x2df4d0[0x0][_0x14d925(0x230)]=='Portuguese\x20(BR)')var _0x2dc5aa=users[_0x14d925(0x1d3)];else{if(_0x2df4d0[0x0][_0x14d925(0x230)]==_0x14d925(0x1c9))var _0x2dc5aa=users[_0x14d925(0x1c9)];else{if(_0x2df4d0[0x0][_0x14d925(0x230)]==_0x14d925(0x1bd))var _0x2dc5aa=users[_0x14d925(0x1db)];}}}}}}}_0xdeab3d[_0x14d925(0x215)](_0x14d925(0x1e4),{'success':_0x37e1ae['flash'](_0x14d925(0x1f3)),'errors':_0x37e1ae[_0x14d925(0x1c8)](_0x14d925(0x200)),'alldata':_0x39158a,'profile':_0x4b4971,'master_shop':_0x2df4d0,'role':_0x480715,'product_stock':_0x44d165,'language':_0x2dc5aa});}catch(_0x1b5630){console[_0x14d925(0x1de)](_0x1b5630);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x1a6),auth,async(_0x745b3b,_0x6a6407)=>{const _0x49ba18=a0_0x1d488f;try{const {username:_0x321ce0,email:_0x4eff9b,role:_0x894971}=_0x745b3b[_0x49ba18(0x20c)],_0x5a62db=_0x745b3b[_0x49ba18(0x20c)],_0x520b6e=await profile[_0x49ba18(0x25d)]({'email':_0x5a62db[_0x49ba18(0x1cd)]}),_0x4d7030=await master_shop[_0x49ba18(0x258)]();console[_0x49ba18(0x1de)]('master',_0x4d7030);const _0x476e74=await categories[_0x49ba18(0x258)]({}),_0x2eb774=await brands[_0x49ba18(0x258)]({}),_0x5e5e9c=await units[_0x49ba18(0x258)]({}),_0x33fa63=await warehouse['find']({'status':'Enabled'});if(_0x4d7030[0x0][_0x49ba18(0x230)]=='English\x20(US)')var _0x35060b=users['English'];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x1d5))var _0x35060b=users['Hindi'];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x237))var _0x35060b=users[_0x49ba18(0x237)];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x1c4))var _0x35060b=users[_0x49ba18(0x1c4)];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x24e))var _0x35060b=users[_0x49ba18(0x24e)];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x1e0))var _0x35060b=users[_0x49ba18(0x1d3)];else{if(_0x4d7030[0x0][_0x49ba18(0x230)]==_0x49ba18(0x1c9))var _0x35060b=users[_0x49ba18(0x1c9)];else{if(_0x4d7030[0x0]['language']=='Arabic\x20(ae)')var _0x35060b=users[_0x49ba18(0x1db)];}}}}}}}_0x6a6407['render'](_0x49ba18(0x1ac),{'success':_0x745b3b['flash'](_0x49ba18(0x1f3)),'errors':_0x745b3b[_0x49ba18(0x1c8)](_0x49ba18(0x200)),'role':_0x5a62db,'profile':_0x520b6e,'categories':_0x476e74,'brands':_0x2eb774,'master_shop':_0x4d7030,'units':_0x5e5e9c,'language':_0x35060b,'find_data':_0x33fa63});}catch(_0x8ac78d){console[_0x49ba18(0x1de)](_0x8ac78d);}}),router['post'](a0_0x1d488f(0x1a6),auth,upload['single']('image'),async(_0xae904a,_0x2aee78)=>{const _0x1dd599=a0_0x1d488f;try{const {name:_0x5be4ed,category:_0x18e0f4,brand:_0x4e4365,unit:_0x2a22ab,alertquantity:_0x28958c,stock:_0x327fc3,product_code:_0x4b169f,warehouse:_0x4efc10,primary_ItemCode:_0x59e828,second_ItemCode:_0x3d0999,second_unit:_0x452b46,maxPerUnit:_0x3dbbc4,MaxPerProduct:_0x2eba8e}=_0xae904a[_0x1dd599(0x25b)],_0x62b809=_0xae904a[_0x1dd599(0x1d2)]?.['filename']||_0x1dd599(0x207),_0x497bb6=new product({'image':_0x62b809,'name':_0x5be4ed,'category':_0x18e0f4,'brand':_0x4e4365,'unit':_0x2a22ab,'alertquantity':_0x28958c,'stock':_0x327fc3,'product_code':_0x4b169f,'warehouse':_0x4efc10,'primary_code':_0x59e828,'secondary_code':_0x3d0999,'second_unit':_0x452b46,'maxStocks':_0x2eba8e,'maxProdPerUnit':_0x3dbbc4}),_0x3a475b=await _0x497bb6[_0x1dd599(0x1f0)](),_0x4a474f=await categories[_0x1dd599(0x25d)]({'name':_0x18e0f4});_0x4a474f[_0x1dd599(0x1e4)]=parseInt(_0x4a474f[_0x1dd599(0x1e4)])+0x1,await _0x4a474f['save']();const _0x4e363f=await brands[_0x1dd599(0x25d)]({'name':_0x4e4365});_0x4e363f[_0x1dd599(0x1e4)]=parseInt(_0x4e363f[_0x1dd599(0x1e4)])+0x1,await _0x4e363f[_0x1dd599(0x1f0)]();const _0x481568=await units[_0x1dd599(0x25d)]({'name':_0x2a22ab});_0x481568[_0x1dd599(0x1e4)]=parseInt(_0x481568['products'])+0x1,await _0x481568['save'](),_0xae904a[_0x1dd599(0x1c8)]('success',_0x1dd599(0x1ab)),_0x2aee78['redirect'](_0x1dd599(0x1c3));}catch(_0x1d9967){console['log'](_0x1d9967);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x222),auth,async(_0x40aa28,_0x59c32b)=>{const _0x471f35=a0_0x1d488f;try{const {username:_0x5d1d3f,email:_0xb72df7,role:_0x6d5d8b}=_0x40aa28['user'],_0x1f197d=_0x40aa28['user'],_0x5c86f3=await profile[_0x471f35(0x25d)]({'email':_0x1f197d[_0x471f35(0x1cd)]}),_0x2e9604=await master_shop[_0x471f35(0x258)]();console['log'](_0x471f35(0x1ed),_0x2e9604);const _0x4acbdb=_0x40aa28[_0x471f35(0x216)]['id'],_0x4c5f04=await product['findById'](_0x4acbdb),_0x535e51=await categories[_0x471f35(0x258)]({}),_0xa3ce9b=await brands[_0x471f35(0x258)]({}),_0x47d319=await units[_0x471f35(0x258)]({}),_0x11df91=await warehouse[_0x471f35(0x258)]({'status':'Enabled'}),_0x2c5a7a=await units[_0x471f35(0x217)]([{'$group':{'_id':_0x471f35(0x1d4),'secondaryunit':{'$first':_0x471f35(0x20a)}}}]);if(_0x2e9604[0x0]['language']==_0x471f35(0x210))var _0x271351=users[_0x471f35(0x1fd)];else{if(_0x2e9604[0x0][_0x471f35(0x230)]==_0x471f35(0x1d5))var _0x271351=users[_0x471f35(0x1d5)];else{if(_0x2e9604[0x0][_0x471f35(0x230)]==_0x471f35(0x237))var _0x271351=users[_0x471f35(0x237)];else{if(_0x2e9604[0x0]['language']=='Spanish')var _0x271351=users[_0x471f35(0x1c4)];else{if(_0x2e9604[0x0][_0x471f35(0x230)]==_0x471f35(0x24e))var _0x271351=users[_0x471f35(0x24e)];else{if(_0x2e9604[0x0][_0x471f35(0x230)]=='Portuguese\x20(BR)')var _0x271351=users['Portuguese'];else{if(_0x2e9604[0x0]['language']=='Chinese')var _0x271351=users[_0x471f35(0x1c9)];else{if(_0x2e9604[0x0][_0x471f35(0x230)]==_0x471f35(0x1bd))var _0x271351=users[_0x471f35(0x1db)];}}}}}}}_0x59c32b[_0x471f35(0x215)]('edit_product',{'success':_0x40aa28[_0x471f35(0x1c8)](_0x471f35(0x1f3)),'errors':_0x40aa28[_0x471f35(0x1c8)]('errors'),'role':_0x1f197d,'profile':_0x5c86f3,'alldata':_0x4c5f04,'categories':_0x535e51,'brands':_0xa3ce9b,'master_shop':_0x2e9604,'units':_0x47d319,'secondunit':_0x2c5a7a,'find_data':_0x11df91,'language':_0x271351});}catch(_0x5d3f3f){console[_0x471f35(0x1de)](_0x5d3f3f);}}),router[a0_0x1d488f(0x1ff)]('/view/:id',auth,upload['single']('image'),async(_0x51b910,_0x1f5955)=>{const _0x1ddb77=a0_0x1d488f;try{console[_0x1ddb77(0x1de)](_0x1ddb77(0x1bb));const _0x1af91d=_0x51b910[_0x1ddb77(0x216)]['id'],_0x449be7=await product[_0x1ddb77(0x1cc)](_0x1af91d),{image:_0xd285f3,name:_0x118b58,category:_0x1affc0,brand:_0x2bb3c5,sku:_0x16d5a6,unit:_0xd5ca18,alertquantity:_0x250237,product_code:_0x256ecc,warehouse:_0x3cce94,primary_ItemCode:_0x189615,second_ItemCode:_0x180dfa,second_unit:_0x3623aa,maxPerUnit:_0xcab055,MaxPerProduct:_0x27e074,prod_catdata:_0x4a3413}=_0x51b910[_0x1ddb77(0x25b)];_0x51b910[_0x1ddb77(0x1d2)]&&(_0x449be7['image']=_0x51b910[_0x1ddb77(0x1d2)][_0x1ddb77(0x259)]);_0x449be7[_0x1ddb77(0x1fc)]=_0x118b58,_0x449be7['category']=_0x1affc0,_0x449be7[_0x1ddb77(0x1fa)]=_0x2bb3c5,_0x449be7[_0x1ddb77(0x257)]=_0x16d5a6,_0x449be7['unit']=_0xd5ca18,_0x449be7['alertquantity']=_0x250237,_0x449be7[_0x1ddb77(0x1c5)]=_0x256ecc,_0x449be7['warehouse']=_0x3cce94,_0x449be7[_0x1ddb77(0x25a)]=_0x189615,_0x449be7[_0x1ddb77(0x1b4)]=_0x180dfa,_0x449be7[_0x1ddb77(0x1f9)]=_0x3623aa,_0x449be7[_0x1ddb77(0x25e)]=_0x27e074,_0x449be7[_0x1ddb77(0x1ad)]=_0xcab055,_0x449be7['product_category']=_0x4a3413;const _0x33d0e8=await _0x449be7[_0x1ddb77(0x1f0)]();console[_0x1ddb77(0x1de)](_0x1ddb77(0x221),_0x449be7),_0x51b910['flash'](_0x1ddb77(0x1f3),_0x1ddb77(0x1bf)),_0x1f5955['redirect']('/products/view');}catch(_0x558955){console[_0x1ddb77(0x1de)](_0x558955);}}),router['get'](a0_0x1d488f(0x1e8),auth,async(_0x1a04a0,_0x2beaca)=>{const _0x225438=a0_0x1d488f;try{const {username:_0x4a3835,email:_0x48aeb0,role:_0x4aaec8}=_0x1a04a0[_0x225438(0x20c)],_0x344522=_0x1a04a0[_0x225438(0x20c)],_0x3232bb=await profile[_0x225438(0x25d)]({'email':_0x344522['email']}),_0x5345e6=await master_shop[_0x225438(0x258)]();console[_0x225438(0x1de)]('barcode\x20Product\x20master',_0x5345e6);const _0x56f5e3=_0x1a04a0['params']['id'],_0x96463b=await product[_0x225438(0x1cc)](_0x56f5e3);console[_0x225438(0x1de)](_0x225438(0x247),_0x96463b);if(_0x5345e6[0x0][_0x225438(0x230)]=='English\x20(US)')var _0x5c0cdb=users['English'];else{if(_0x5345e6[0x0][_0x225438(0x230)]==_0x225438(0x1d5))var _0x5c0cdb=users[_0x225438(0x1d5)];else{if(_0x5345e6[0x0][_0x225438(0x230)]=='German')var _0x5c0cdb=users[_0x225438(0x237)];else{if(_0x5345e6[0x0][_0x225438(0x230)]=='Spanish')var _0x5c0cdb=users[_0x225438(0x1c4)];else{if(_0x5345e6[0x0][_0x225438(0x230)]=='French')var _0x5c0cdb=users['French'];else{if(_0x5345e6[0x0][_0x225438(0x230)]==_0x225438(0x1e0))var _0x5c0cdb=users[_0x225438(0x1d3)];else{if(_0x5345e6[0x0][_0x225438(0x230)]=='Chinese')var _0x5c0cdb=users[_0x225438(0x1c9)];else{if(_0x5345e6[0x0][_0x225438(0x230)]==_0x225438(0x1bd))var _0x5c0cdb=users[_0x225438(0x1db)];}}}}}}}_0x2beaca[_0x225438(0x215)]('product_barcode',{'success':_0x1a04a0[_0x225438(0x1c8)]('success'),'errors':_0x1a04a0[_0x225438(0x1c8)](_0x225438(0x200)),'role':_0x344522,'profile':_0x3232bb,'alldata':_0x96463b,'master_shop':_0x5345e6,'language':_0x5c0cdb});}catch(_0x3df043){console['log'](_0x3df043);}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x205),auth,async(_0xd3bdf8,_0xb9f090)=>{const _0xa25c88=a0_0x1d488f;try{const _0x3fddaa=new excelJS['Workbook'](),_0x144e18=_0x3fddaa['addWorksheet'](_0xa25c88(0x1a9));return _0x144e18[_0xa25c88(0x1ba)]=[{'header':_0xa25c88(0x206),'key':'PName','width':0xa},{'header':_0xa25c88(0x229),'key':'PBrands','width':0xa},{'header':'Units','key':_0xa25c88(0x25f),'width':0xa},{'header':_0xa25c88(0x1a8),'key':_0xa25c88(0x256),'width':0xa},{'header':_0xa25c88(0x21d),'key':'MaxperUnits','width':0xa},{'header':'Primary_Code','key':'ProductCode','width':0xa},{'header':_0xa25c88(0x20b),'key':'ProductCode','width':0xa},{'header':_0xa25c88(0x244),'key':_0xa25c88(0x20e),'width':0xa},{'header':'Category','key':_0xa25c88(0x236),'width':0xa},{'header':_0xa25c88(0x1b0),'key':_0xa25c88(0x1a7),'width':0xa},{'header':_0xa25c88(0x232),'key':_0xa25c88(0x1a7),'width':0xa},{'header':_0xa25c88(0x1b5),'key':'Prod_Cat','width':0xa}],_0xb9f090['setHeader'](_0xa25c88(0x21a),_0xa25c88(0x1f8)),_0xb9f090['setHeader']('Content-Disposition',_0xa25c88(0x1fe)),_0x3fddaa[_0xa25c88(0x234)][_0xa25c88(0x243)](_0xb9f090)[_0xa25c88(0x253)](()=>{const _0x2ae08c=_0xa25c88;_0xb9f090[_0x2ae08c(0x1fb)](0xc8);});}catch(_0x4d385f){_0xb9f090[_0xa25c88(0x1fb)](0x190)[_0xa25c88(0x24c)](_0x4d385f);}});const storage1=multer[a0_0x1d488f(0x1ec)]({'destination':(_0x3de8a2,_0x41f898,_0x1b3d8b)=>{_0x1b3d8b(null,'public/Migration');},'filename':(_0x2012a7,_0x1008d6,_0x412fe3)=>{const _0x3323aa=a0_0x1d488f;_0x412fe3(null,Date[_0x3323aa(0x22d)]()+_0x1008d6[_0x3323aa(0x1f2)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x4170(){const _0x23c461=['file','Portuguese','$_id','Hindi','min','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','558510iDxoFb','Primary_Code','unit\x20data\x20delete\x20successfully','Arabic','prod_categ','unit\x20data\x20update\x20successfully','log','categ','Portuguese\x20(BR)','/brands/:id','46625aARNMk','categories\x20data\x20delete\x20successfully','products','findByIdAndDelete','toBuffer','Finished\x20Goods','/barcode/:id','category','/select_data','\x20categories\x20is\x20add\x20successfully','diskStorage','edit\x20Product\x20master','units','alertquantity','save','/brands/delete/:id','originalname','success','numeric','11430472KQnsXv','product_barcode_products','public/Migration/','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','secondary_unit','brand','status','name','English','attachment;\x20filename=Product_Migration_File.xlsx','post','errors','../public/language/languages.json','2196312etkUcr','toString','json','/products_export_migrate_file','Product_Name','defaultProduct.avif','$product_name','sheet_to_json','$secondary_unit','Secondary_Code','user','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','ProductCode','/categories/delete/:id','English\x20(US)','master','addPage','24555lUjaFg','Products\x20warehouse_data','render','params','aggregate','/products/brands','/products/categories','Content-Type','unit','length','max_number_per_units','Router','Raw\x20Materials','Products\x20find_data','product\x20edit','/view/:id','height','/products/units','../middleware/auth','long','redirect','/barcode_data','Brands','$product_category','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/view','now','$category','/units/delete/:id','language','express','Maximum_Stocks','message','xlsx','canvas','PCat','German','migrate_product_fule','categories','\x20brand\x20is\x20add\x20successfully','$product_details.product_name','$product_docs','/units/:id','/filter_product','get','\x20added\x20successfully','bind','Sheets','write','Product_Code','CODE128','\x20<>\x20','barcode\x20user_id','$product_details','product_category','Units','brands','send','/categories/:id','French','$brand','$product_stock','map','140lWRnbG','then','concat','16900290HbTxoB','PSecondaryUnits','sku','find','filename','primary_code','body','image','findOne','maxStocks','PUnits','/categories','jsbarcode','exceljs','Category','/view/add_products','PAlQty','Secondary_Units','Products','/brands','product\x20add\x20successfully','add_product','maxProdPerUnit','/units','forEach','Alert_QTY','width','end','single','secondary_code','Products_category','base64','data','push','public/upload','columns','hello','stock','Arabic\x20(ae)','\x20unit\x20is\x20add\x20successfully','product\x20update\x20successfully','916wMxQBP','/print_barcode','../models/all_models','/products/view','Spanish','product_code','brand\x20data\x20delete\x20successfully','product_docs','flash','Chinese','express/lib/response','utils','findById','email','product_stock','findByIdAndUpdate','2737090ORWBVk','Products\x20master'];a0_0x4170=function(){return _0x23c461;};return a0_0x4170();}router[a0_0x1d488f(0x1ff)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x1d488f(0x1b3)](a0_0x1d488f(0x238)),async(_0x37a805,_0x2e0970)=>{const _0x2d7489=a0_0x1d488f,_0x519b60=_0x37a805[_0x2d7489(0x1d2)][_0x2d7489(0x259)],_0x89f8d6=await xlsx['readFile'](_0x2d7489(0x1f7)+_0x519b60);let _0x5cd75f=_0x89f8d6['SheetNames'],_0x2fb6aa=xlsx[_0x2d7489(0x1cb)][_0x2d7489(0x209)](_0x89f8d6[_0x2d7489(0x242)][_0x5cd75f[0x0]]);for(const _0x2173b5 of _0x2fb6aa){const _0xf2e6db=_0x2173b5['Product_Name'],_0x441efa=_0x2173b5[_0x2d7489(0x229)],_0x1d649e=_0x2173b5[_0x2d7489(0x24a)],_0x5c0e4f=_0x2173b5[_0x2d7489(0x1a8)],_0x3c848c=_0x2173b5[_0x2d7489(0x244)],_0x13245c=_0x2173b5[_0x2d7489(0x263)],_0x18899c=_0x2173b5['Alert_QTY'],_0x5c57a8=_0x2173b5[_0x2d7489(0x1d9)],_0x2b00a4=_0x2173b5['Secondary_Code'],_0x1e8b10=_0x2173b5[_0x2d7489(0x232)],_0x1781e7=_0x2173b5[_0x2d7489(0x21d)],_0x5b16ea=_0x2173b5[_0x2d7489(0x1b5)];try{let _0x550f08=await categories['findOne']({'name':_0x13245c});if(!_0x550f08){const _0x513a39=new categories({'name':_0x13245c,'products':'0'});_0x550f08=await _0x513a39[_0x2d7489(0x1f0)]();}let _0x5be326=await brands[_0x2d7489(0x25d)]({'name':_0x441efa});if(!_0x5be326){const _0x497b47=new brands({'name':_0x441efa,'products':'0'});_0x5be326=await _0x497b47[_0x2d7489(0x1f0)]();}let _0x4157b1=await units[_0x2d7489(0x25d)]({'name':_0x1d649e,'secondary_unit':_0x5c0e4f});if(!_0x4157b1){const _0x2acd6c=new units({'name':_0x1d649e,'secondary_unit':_0x5c0e4f,'products':'0'});_0x4157b1=await _0x2acd6c[_0x2d7489(0x1f0)]();}const _0x4160d5=await product[_0x2d7489(0x258)]({'name':_0xf2e6db,'category':_0x550f08['name'],'brand':_0x5be326[_0x2d7489(0x1fc)],'secondary_unit':_0x4157b1['secondary_unit'],'product_code':_0x3c848c});console[_0x2d7489(0x1de)](_0x4160d5['length']+_0x2d7489(0x246)+_0x550f08['name']+_0x2d7489(0x246)+_0x5be326[_0x2d7489(0x1fc)]+_0x2d7489(0x246)+_0x4157b1[_0x2d7489(0x1f9)]+_0x2d7489(0x246)+_0x3c848c+_0x2d7489(0x246)+_0xf2e6db);if(_0x4160d5[_0x2d7489(0x21c)]===0x0){const _0x204238=new product({'image':_0x2d7489(0x207),'name':_0xf2e6db,'category':_0x550f08['name'],'brand':_0x5be326['name'],'unit':_0x4157b1[_0x2d7489(0x1fc)],'alertquantity':_0x18899c,'product_code':_0x3c848c,'secondary_unit':_0x4157b1[_0x2d7489(0x1f9)],'primary_code':_0x5c57a8,'secondary_code':_0x2b00a4,'maxStocks':_0x1e8b10,'maxProdPerUnit':_0x1781e7,'product_category':_0x5b16ea}),_0x111b9b=await _0x204238[_0x2d7489(0x1f0)]();_0x550f08[_0x2d7489(0x1e4)]=parseInt(_0x550f08[_0x2d7489(0x1e4)])+0x1,await _0x550f08['save'](),_0x5be326['products']=parseInt(_0x5be326[_0x2d7489(0x1e4)])+0x1,await _0x5be326[_0x2d7489(0x1f0)](),_0x4157b1['products']=parseInt(_0x4157b1['products'])+0x1,await _0x4157b1[_0x2d7489(0x1f0)](),_0x37a805[_0x2d7489(0x1c8)](_0x2d7489(0x1f3),_0xf2e6db+_0x2d7489(0x240));}else{console['log'](_0x4160d5[0x0]);const _0x350a61=_0x4160d5[0x0];_0x350a61[_0x2d7489(0x1e9)]=_0x550f08[_0x2d7489(0x1fc)],_0x350a61[_0x2d7489(0x1fa)]=_0x5be326[_0x2d7489(0x1fc)],_0x350a61[_0x2d7489(0x21b)]=_0x4157b1['name'],_0x350a61[_0x2d7489(0x1ef)]=_0x18899c,_0x350a61[_0x2d7489(0x1c5)]=_0x3c848c,_0x350a61[_0x2d7489(0x1f9)]=_0x4157b1[_0x2d7489(0x1f9)],_0x350a61[_0x2d7489(0x25a)]=_0x5c57a8,_0x350a61[_0x2d7489(0x1b4)]=_0x2b00a4,_0x350a61[_0x2d7489(0x25e)]=_0x1e8b10,_0x350a61[_0x2d7489(0x1ad)]=_0x1781e7,_0x350a61[_0x2d7489(0x249)]=_0x5b16ea;const _0xe83279=await _0x350a61[_0x2d7489(0x1f0)]();_0x37a805[_0x2d7489(0x1c8)](_0x2d7489(0x1f3),_0xe83279[_0x2d7489(0x1fc)]+'\x20Edit\x20Successfully');}}catch(_0x57b76c){_0x2e0970[_0x2d7489(0x1fb)](0x1f4)[_0x2d7489(0x204)]({'proderror':_0x57b76c[_0x2d7489(0x233)],'aproduct':_0xf2e6db});}}_0x2e0970[_0x2d7489(0x227)](_0x2d7489(0x1c3));}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x1ea),auth,async(_0x503a4b,_0x20321e)=>{const _0x555651=a0_0x1d488f;try{console[_0x555651(0x1de)](_0x503a4b[_0x555651(0x25b)]);const {data_cateory:_0x44c071,datachoose:_0x5f5dae}=_0x503a4b[_0x555651(0x25b)];var _0x72d9d3;if(_0x5f5dae==_0x555651(0x1dc))_0x72d9d3=await product[_0x555651(0x217)]([{'$group':{'_id':_0x555651(0x22a)}}]);else{if(_0x5f5dae==_0x555651(0x24b))_0x72d9d3=await product[_0x555651(0x217)]([{'$match':{'product_category':_0x44c071}},{'$group':{'_id':_0x555651(0x24f)}}]);else _0x5f5dae==_0x555651(0x1df)&&(_0x72d9d3=await product[_0x555651(0x217)]([{'$match':{'product_category':_0x44c071}},{'$group':{'_id':'$category'}}]));}_0x20321e[_0x555651(0x204)](_0x72d9d3);}catch(_0x3f3aa4){_0x20321e['json']({'message':_0x3f3aa4['message']});}}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x23e),auth,async(_0x258d5f,_0x5e6339)=>{const _0x69257d=a0_0x1d488f;try{const {data_choosing:_0x1ad3ed,data_selected:_0x1dd4a4}=_0x258d5f[_0x69257d(0x25b)];var _0x35ff15;if(_0x1ad3ed=='prod_categ')_0x35ff15=await product[_0x69257d(0x217)]([{'$match':{'product_category':_0x1dd4a4}}]);else{if(_0x1ad3ed==_0x69257d(0x24b))_0x35ff15=await product['aggregate']([{'$match':{'brand':_0x1dd4a4}}]);else _0x1ad3ed=='categ'&&(_0x35ff15=await product[_0x69257d(0x217)]([{'$match':{'category':_0x1dd4a4}}]));}_0x5e6339[_0x69257d(0x204)](_0x35ff15);}catch(_0x2cb218){_0x5e6339['json']({'message':_0x2cb218[_0x69257d(0x233)]});}}),router[a0_0x1d488f(0x23f)](a0_0x1d488f(0x1c1),auth,async(_0x497a43,_0xd056d5)=>{const _0x11917f=a0_0x1d488f,_0x4c3d36=_0x497a43[_0x11917f(0x20c)],_0x2170ad=await profile[_0x11917f(0x25d)]({'email':_0x4c3d36[_0x11917f(0x1cd)]}),_0x35c7a3=await master_shop['find'](),_0x13374a=await product[_0x11917f(0x258)]();if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x210))var _0x229f4a=users['English'];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x1d5))var _0x229f4a=users['Hindi'];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x237))var _0x229f4a=users[_0x11917f(0x237)];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x1c4))var _0x229f4a=users[_0x11917f(0x1c4)];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x24e))var _0x229f4a=users[_0x11917f(0x24e)];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]=='Portuguese\x20(BR)')var _0x229f4a=users[_0x11917f(0x1d3)];else{if(_0x35c7a3[0x0]['language']==_0x11917f(0x1c9))var _0x229f4a=users[_0x11917f(0x1c9)];else{if(_0x35c7a3[0x0][_0x11917f(0x230)]==_0x11917f(0x1bd))var _0x229f4a=users[_0x11917f(0x1db)];}}}}}}}_0xd056d5[_0x11917f(0x215)](_0x11917f(0x1f6),{'success':_0x497a43[_0x11917f(0x1c8)](_0x11917f(0x1f3)),'errors':_0x497a43[_0x11917f(0x1c8)](_0x11917f(0x200)),'role':_0x4c3d36,'profile':_0x2170ad,'products':_0x13374a,'master_shop':_0x35c7a3,'language':_0x229f4a});}),router[a0_0x1d488f(0x1ff)](a0_0x1d488f(0x228),auth,async(_0x177da6,_0x5d03bd)=>{const _0x308945=a0_0x1d488f,_0xbf46ff=await product['find']();_0x5d03bd[_0x308945(0x204)]({'data':_0xbf46ff});}),router[a0_0x1d488f(0x1ff)]('/barcode_filter',auth,async(_0x2ee9bc,_0x4a6b15)=>{const _0x40a729=a0_0x1d488f;try{const {dataProdCat:_0x52454f,dataProdIdentity:_0x185776}=_0x2ee9bc[_0x40a729(0x25b)];var _0x1bbafc;switch(_0x52454f){case'fg':switch(_0x185776){case _0x40a729(0x229):_0x1bbafc=await product[_0x40a729(0x217)]([{'$match':{'product_category':_0x40a729(0x1e7)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x40a729(0x1d4)}}]);break;case _0x40a729(0x263):_0x1bbafc=await product[_0x40a729(0x217)]([{'$match':{'product_category':_0x40a729(0x1e7)}},{'$group':{'_id':_0x40a729(0x22e)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x185776){case _0x40a729(0x229):_0x1bbafc=await product[_0x40a729(0x217)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x40a729(0x1d4)}}]);break;case'Category':_0x1bbafc=await product['aggregate']([{'$match':{'product_category':_0x40a729(0x21f)}},{'$group':{'_id':_0x40a729(0x22e)}},{'$project':{'category':_0x40a729(0x1d4)}}]);break;}break;}_0x4a6b15['json'](_0x1bbafc);}catch(_0x2afaa0){_0x4a6b15[_0x40a729(0x204)]({'message':_0x2afaa0['message']});}}),router[a0_0x1d488f(0x1ff)]('/print_barcode_filter/',auth,async(_0x17ac58,_0x43ec94)=>{const _0x519268=a0_0x1d488f;try{console[_0x519268(0x1de)](_0x17ac58['body']);const {prod_cat:_0x303119,identity:_0x84d009,valueData:_0x27f402,typeofbarcode:_0x2ec2ba}=_0x17ac58[_0x519268(0x25b)];let _0x22001c;switch(_0x303119){case'fg':if(_0x84d009=='Brands')_0x22001c=await product[_0x519268(0x217)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x27f402}}]);else _0x84d009==_0x519268(0x263)&&(_0x22001c=await product[_0x519268(0x217)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x27f402}}]));break;case'rm':if(_0x84d009==_0x519268(0x229))_0x22001c=await product[_0x519268(0x217)]([{'$match':{'product_category':_0x519268(0x21f),'brand':_0x27f402}}]);else _0x84d009==_0x519268(0x263)&&(_0x22001c=await product['aggregate']([{'$match':{'product_category':_0x519268(0x21f),'category':_0x27f402}}]));break;}const _0x4b0621=_0x4365f3=>_0x4365f3*0x48,_0xce965e={'width':0x3,'height':0x1},_0xd636b3=new PDFDocument({'margin':_0x4b0621(0.75),'size':[_0x4b0621(_0xce965e['width']),_0x4b0621(_0xce965e[_0x519268(0x223)])],'bufferPages':!![]}),_0x301104=_0x22001c['length'];for(let _0x597fd9=0x0;_0x597fd9<=_0x301104;_0x597fd9++){if(_0x597fd9!=_0x301104){const _0x3b126a=_0x22001c[_0x597fd9][_0x519268(0x1fc)],_0x181c36=_0x22001c[_0x597fd9][_0x519268(0x25a)],_0x4b6fc4=_0x22001c[_0x597fd9]['secondary_code'],_0x470d9c=_0x22001c[_0x597fd9][_0x519268(0x1c5)];var _0x41ef5d;switch(_0x2ec2ba){case'1':_0x41ef5d=_0x181c36;break;case'2':_0x41ef5d=_0x4b6fc4;break;case'3':_0x41ef5d=_0x470d9c;break;}const _0x2dbc25={'width':0xd2,'height':0x64},_0x558b15={'width':_0x4b0621(_0xce965e[_0x519268(0x1b1)]),'height':_0x4b0621(_0xce965e[_0x519268(0x223)])},_0x3d1500=new Canvas();JsBarcode(_0x3d1500,_0x41ef5d,{'format':_0x519268(0x245),'height':_0x2dbc25[_0x519268(0x223)],'displayValue':!![],'text':_0x41ef5d});const _0x204cd5=_0x3d1500[_0x519268(0x1e6)](),_0x42b73a=_0x558b15[_0x519268(0x1b1)]/_0x2dbc25[_0x519268(0x1b1)],_0x5a51d7=_0x558b15[_0x519268(0x223)]/_0x2dbc25[_0x519268(0x223)],_0x6b8c49=Math['min'](_0x42b73a,_0x5a51d7),_0x22bc74=_0x2dbc25[_0x519268(0x1b1)]*_0x6b8c49,_0x5cd1ec=_0x2dbc25[_0x519268(0x223)]*_0x6b8c49,_0x57537e=(_0x558b15[_0x519268(0x1b1)]-_0x22bc74)/0x2,_0x2d265e=(_0x558b15['height']-_0x5cd1ec)/0x2;_0xd636b3[_0x519268(0x25c)](_0x204cd5,_0x57537e,_0x2d265e,{'width':_0x22bc74,'height':_0x5cd1ec}),_0x597fd9!=_0x301104&&_0xd636b3[_0x519268(0x212)]();}}const _0x115e61=[];_0xd636b3['on'](_0x519268(0x1b7),_0x115e61[_0x519268(0x1b8)][_0x519268(0x241)](_0x115e61)),_0xd636b3['on'](_0x519268(0x1b2),()=>{const _0x2876bc=_0x519268,_0x163f6=Buffer[_0x2876bc(0x254)](_0x115e61),_0x566b7e=_0x163f6[_0x2876bc(0x203)]('base64');_0x43ec94[_0x2876bc(0x204)]({'pdfContent':_0x566b7e});}),_0xd636b3[_0x519268(0x1b2)]();}catch(_0x42ffcb){_0x43ec94[_0x519268(0x204)]({'message':_0x42ffcb[_0x519268(0x233)]});}}),router[a0_0x1d488f(0x1ff)]('/print_barcode_filter_search/',auth,async(_0x3f1f71,_0x1485ea)=>{const _0x2e8bc3=a0_0x1d488f;try{console[_0x2e8bc3(0x1de)](_0x3f1f71[_0x2e8bc3(0x25b)]);const {prod_cat:_0x3ca9cc,identity:_0x1948b2,valueData:_0xfeb8a5}=_0x3f1f71[_0x2e8bc3(0x25b)];let _0x33efdb;switch(_0x3ca9cc){case'fg':if(_0x1948b2=='Brands')_0x33efdb=await product[_0x2e8bc3(0x217)]([{'$match':{'product_category':_0x2e8bc3(0x1e7),'brand':_0xfeb8a5}}]);else _0x1948b2==_0x2e8bc3(0x263)&&(_0x33efdb=await product[_0x2e8bc3(0x217)]([{'$match':{'product_category':_0x2e8bc3(0x1e7),'category':_0xfeb8a5}}]));break;case'rm':if(_0x1948b2==_0x2e8bc3(0x229))_0x33efdb=await product[_0x2e8bc3(0x217)]([{'$match':{'product_category':_0x2e8bc3(0x21f),'brand':_0xfeb8a5}}]);else _0x1948b2==_0x2e8bc3(0x263)&&(_0x33efdb=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0xfeb8a5}}]));break;}_0x1485ea['json'](_0x33efdb);}catch(_0x50753c){_0x1485ea['json']({'message':_0x50753c[_0x2e8bc3(0x233)]});}}),router[a0_0x1d488f(0x1ff)]('/print_barcode_single/:id',auth,async(_0x102101,_0x35f602)=>{const _0x3bee30=a0_0x1d488f;try{const _0x409be5=_0x102101['params']['id'],{copies:_0x159e6c,typeofbarcode:_0x30f341}=_0x102101[_0x3bee30(0x25b)];var _0x19c36e=await product[_0x3bee30(0x1cc)](_0x409be5);const _0x250632=_0x49ba29=>_0x49ba29*0x48,_0xce262={'width':0x3,'height':0x1},_0x5356ba=new PDFDocument({'margin':_0x250632(0.75),'size':[_0x250632(_0xce262[_0x3bee30(0x1b1)]),_0x250632(_0xce262[_0x3bee30(0x223)])],'bufferPages':!![]}),_0x3c9044=_0x159e6c,_0x4a7871=_0x19c36e[_0x3bee30(0x1fc)],_0x1f173b=_0x19c36e[_0x3bee30(0x25a)],_0x399d4c=_0x19c36e['secondary_code'],_0x3e22a0=_0x19c36e[_0x3bee30(0x1c5)];let _0x4007d0;switch(_0x30f341){case'1':_0x4007d0=_0x1f173b;break;case'2':_0x4007d0=_0x399d4c;break;case'3':_0x4007d0=_0x3e22a0;break;}const _0x4a47cb={'width':0xd2,'height':0x64},_0x1cd3ac={'width':_0x250632(_0xce262[_0x3bee30(0x1b1)]),'height':_0x250632(_0xce262[_0x3bee30(0x223)])};for(let _0x4fc315=0x1;_0x4fc315<=_0x3c9044;_0x4fc315++){const _0x1813ec=new Canvas();JsBarcode(_0x1813ec,_0x4007d0,{'format':_0x3bee30(0x245),'height':_0x4a47cb['height'],'displayValue':!![],'text':_0x4007d0});const _0x4c9aaa=_0x1813ec[_0x3bee30(0x1e6)](),_0x50c79c=_0x1cd3ac['width']/_0x4a47cb[_0x3bee30(0x1b1)],_0x37633d=_0x1cd3ac[_0x3bee30(0x223)]/_0x4a47cb[_0x3bee30(0x223)],_0x1fe4cc=Math[_0x3bee30(0x1d6)](_0x50c79c,_0x37633d),_0x44b680=_0x4a47cb[_0x3bee30(0x1b1)]*_0x1fe4cc,_0x468275=_0x4a47cb[_0x3bee30(0x223)]*_0x1fe4cc,_0x41a918=(_0x1cd3ac['width']-_0x44b680)/0x2,_0x4e2404=(_0x1cd3ac['height']-_0x468275)/0x2;_0x5356ba[_0x3bee30(0x25c)](_0x4c9aaa,_0x41a918,_0x4e2404,{'width':_0x44b680,'height':_0x468275}),_0x4fc315!=_0x3c9044&&_0x5356ba[_0x3bee30(0x212)]();}const _0x27dcbf=[];_0x5356ba['on'](_0x3bee30(0x1b7),_0x27dcbf[_0x3bee30(0x1b8)][_0x3bee30(0x241)](_0x27dcbf)),_0x5356ba['on'](_0x3bee30(0x1b2),()=>{const _0x4e8724=_0x3bee30,_0x3d0dd8=pdfData[_0x4e8724(0x203)](_0x4e8724(0x1b6));_0x35f602[_0x4e8724(0x204)]({'pdfContent':_0x3d0dd8});}),_0x5356ba[_0x3bee30(0x1b2)]();}catch(_0x7063f2){_0x35f602[_0x3bee30(0x204)]({'message':_0x7063f2['message']});}}),module['exports']=router;