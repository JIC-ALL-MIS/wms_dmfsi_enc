const a0_0x403e56=a0_0x104b;(function(_0x2d5e60,_0x16ef5d){const _0x49e348=a0_0x104b,_0x3bd415=_0x2d5e60();while(!![]){try{const _0x515871=parseInt(_0x49e348(0x1b8))/0x1*(-parseInt(_0x49e348(0x1b7))/0x2)+-parseInt(_0x49e348(0x144))/0x3+-parseInt(_0x49e348(0x15d))/0x4*(-parseInt(_0x49e348(0x18f))/0x5)+parseInt(_0x49e348(0x1d4))/0x6+parseInt(_0x49e348(0x16f))/0x7*(parseInt(_0x49e348(0x1d9))/0x8)+parseInt(_0x49e348(0x163))/0x9*(-parseInt(_0x49e348(0x1cc))/0xa)+parseInt(_0x49e348(0x1dc))/0xb;if(_0x515871===_0x16ef5d)break;else _0x3bd415['push'](_0x3bd415['shift']());}catch(_0x56c9af){_0x3bd415['push'](_0x3bd415['shift']());}}}(a0_0x3311,0xe4220));const express=require(a0_0x403e56(0x1be)),res=require(a0_0x403e56(0x17a)),app=express(),router=express[a0_0x403e56(0x1cf)](),multer=require(a0_0x403e56(0x1a2)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x403e56(0x193)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x403e56(0x1fa)),JsBarcode=require(a0_0x403e56(0x1b0)),{Canvas}=require(a0_0x403e56(0x17c)),PDFDocument=require(a0_0x403e56(0x1cd));function a0_0x3311(){const _0x4a4e96=['\x20unit\x20is\x20add\x20successfully','Products\x20find_data','/print_barcode_single/:id','$category','get','max_number_per_units','primary_code','numeric','$product_details.product_stock','\x20categories\x20is\x20add\x20successfully','end','xlsx','\x20<>\x20','/brands/:id','findOne','Prod_Cat','bind','Brands','exports','categ','length','warehouse','brand\x20data\x20update\x20successfully','aggregate','2865693cQNTlm','$product_name','$_id','/categories','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','single','/print_barcode_filter/','Workbook','products','Products_category','\x20Edit\x20Successfully','brand','file','maxStocks','unit\x20data\x20update\x20successfully','min','PCat','$brand','/select_data','PName','master','Finished\x20Goods','alertquantity','product_stock','concat','4kSeHgt','filename','Spanish','Arabic','German','/view/:id','48645FpHJAq','/products/units','toString','language','/view','Raw\x20Materials','Portuguese','flash','PSecondaryUnits','product_details.product_name','find','sheet_to_json','10283HtnEwO','base64','diskStorage','utils','height','migrate_product_fule','French','edit\x20Product\x20master','product_docs','product_barcode','forEach','express/lib/response','product\x20add\x20successfully','canvas','message','width','user','save','Products\x20master','/products_export_migrate_file','Secondary_Code','Hindi','errors','Portuguese\x20(BR)','defaultProduct.avif','brands','add_product','units','prod_categ','CODE128','/barcode/:id','success','7507135ZYLuZD','secondary_code','$product_details','json','../models/all_models','unit','ProductCode','/products/view','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/units','redirect','$product_details.product_name','post','category','categories_edit','push','Units','/products/categories','Content-Disposition','multer','findById','/barcode_filter','secondary_unit','image','Secondary_Units','Alert_QTY','findByIdAndDelete','Product_Name','readFile','send','Category','columns','/categories/delete/:id','jsbarcode','$secondary_unit','categories\x20data\x20delete\x20successfully','body','render','Enabled','Chinese','42TtvysO','26375AsKWLX','toBuffer','product\x20update\x20successfully','maxProdPerUnit','log','/brands','express','status','hello','long','email','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','stock','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','product_category','/categories/:id','Sheets','name','product_code','Primary_Code','1350WnLKLQ','pdfkit-table','English','Router','PAlQty','addPage','setHeader','/products/brands','1710594MGOmkA','brand\x20data\x20delete\x20successfully','public/upload','Arabic\x20(ae)','sku','7536CaumaC','/brands/delete/:id','English\x20(US)','31779fCIXgW','barcode\x20user_id','params','_id','/print_barcode_filter_search/','originalname','barcode\x20Product\x20master','/view/add_products','\x20added\x20successfully','now','PUnits','Product_Code','/units/:id','\x20brand\x20is\x20add\x20successfully','/filter_product','attachment;\x20filename=Product_Migration_File.xlsx','map','public/Migration','findByIdAndUpdate'];a0_0x3311=function(){return _0x4a4e96;};return a0_0x3311();}router[a0_0x403e56(0x1f3)](a0_0x403e56(0x147),auth,async(_0x1c9164,_0x814d2)=>{const _0x32fce9=a0_0x403e56;try{const {username:_0x114a01,email:_0x1b5b87,role:_0x524237}=_0x1c9164[_0x32fce9(0x17f)],_0x2cd42b=_0x1c9164[_0x32fce9(0x17f)],_0x3b26fa=await profile['findOne']({'email':_0x2cd42b[_0x32fce9(0x1c2)]}),_0x407a5c=await master_shop['find']();console[_0x32fce9(0x1bc)](_0x32fce9(0x158),_0x407a5c);const _0x160785=await categories[_0x32fce9(0x16d)]();if(_0x407a5c[0x0]['language']=='English\x20(US)')var _0x19d328=users[_0x32fce9(0x1ce)];else{if(_0x407a5c[0x0][_0x32fce9(0x166)]==_0x32fce9(0x184))var _0x19d328=users['Hindi'];else{if(_0x407a5c[0x0]['language']=='German')var _0x19d328=users[_0x32fce9(0x161)];else{if(_0x407a5c[0x0][_0x32fce9(0x166)]==_0x32fce9(0x15f))var _0x19d328=users[_0x32fce9(0x15f)];else{if(_0x407a5c[0x0][_0x32fce9(0x166)]=='French')var _0x19d328=users[_0x32fce9(0x175)];else{if(_0x407a5c[0x0]['language']==_0x32fce9(0x186))var _0x19d328=users[_0x32fce9(0x169)];else{if(_0x407a5c[0x0][_0x32fce9(0x166)]==_0x32fce9(0x1b6))var _0x19d328=users['Chinese'];else{if(_0x407a5c[0x0]['language']==_0x32fce9(0x1d7))var _0x19d328=users[_0x32fce9(0x160)];}}}}}}}_0x814d2[_0x32fce9(0x1b4)]('categories',{'success':_0x1c9164['flash'](_0x32fce9(0x18e)),'errors':_0x1c9164['flash'](_0x32fce9(0x185)),'role':_0x2cd42b,'profile':_0x3b26fa,'user':_0x160785,'master_shop':_0x407a5c,'language':_0x19d328});}catch(_0x49d82d){console[_0x32fce9(0x1bc)](_0x49d82d);}}),router['post'](a0_0x403e56(0x147),auth,async(_0x247564,_0x2b4ca8)=>{const _0x4dfe78=a0_0x403e56;try{const {name:_0x252eb1,products:_0x2aa4c1}=_0x247564[_0x4dfe78(0x1b3)],_0x968d58=new categories({'name':_0x252eb1,'products':_0x2aa4c1}),_0x1738a9=await categories['findOne']({'name':_0x252eb1});_0x1738a9?_0x247564['flash'](_0x4dfe78(0x185),_0x252eb1+_0x4dfe78(0x148)):_0x247564['flash'](_0x4dfe78(0x18e),_0x252eb1+_0x4dfe78(0x1f8));const _0x569556=await _0x968d58['save']();_0x2b4ca8[_0x4dfe78(0x199)](_0x4dfe78(0x1a0));}catch(_0x215120){console[_0x4dfe78(0x1bc)](_0x215120);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x1c7),auth,async(_0x54e659,_0x49a7b9)=>{const _0x42eae7=a0_0x403e56;try{const {username:_0x3fc3dc,email:_0x430f8d,role:_0x44c480}=_0x54e659[_0x42eae7(0x17f)],_0x31f420=_0x54e659[_0x42eae7(0x17f)],_0x5ef187=await profile[_0x42eae7(0x13a)]({'email':_0x31f420[_0x42eae7(0x1c2)]}),_0x10cb24=await master_shop[_0x42eae7(0x16d)]();console['log'](_0x42eae7(0x158),_0x10cb24);const _0x7be33d=_0x54e659[_0x42eae7(0x1de)]['id'];console['log'](_0x7be33d);const _0x1a8947=await categories[_0x42eae7(0x1a3)](_0x7be33d);if(_0x10cb24[0x0]['language']==_0x42eae7(0x1db))var _0x5e97fd=users[_0x42eae7(0x1ce)];else{if(_0x10cb24[0x0][_0x42eae7(0x166)]=='Hindi')var _0x5e97fd=users['Hindi'];else{if(_0x10cb24[0x0]['language']==_0x42eae7(0x161))var _0x5e97fd=users[_0x42eae7(0x161)];else{if(_0x10cb24[0x0][_0x42eae7(0x166)]==_0x42eae7(0x15f))var _0x5e97fd=users[_0x42eae7(0x15f)];else{if(_0x10cb24[0x0][_0x42eae7(0x166)]==_0x42eae7(0x175))var _0x5e97fd=users[_0x42eae7(0x175)];else{if(_0x10cb24[0x0][_0x42eae7(0x166)]==_0x42eae7(0x186))var _0x5e97fd=users['Portuguese'];else{if(_0x10cb24[0x0][_0x42eae7(0x166)]=='Chinese')var _0x5e97fd=users[_0x42eae7(0x1b6)];else{if(_0x10cb24[0x0]['language']=='Arabic\x20(ae)')var _0x5e97fd=users[_0x42eae7(0x160)];}}}}}}}_0x49a7b9['render']('categories',{'success':_0x54e659['flash']('success'),'errors':_0x54e659[_0x42eae7(0x16a)]('errors'),'role':_0x31f420,'profile':_0x5ef187,'master_shop':_0x10cb24,'user':_0x1a8947,'language':_0x5e97fd});}catch(_0x446db1){console['log'](_0x446db1);}}),router[a0_0x403e56(0x19b)]('/categories/:id',auth,async(_0x1532f1,_0x2c706c)=>{const _0x1d4134=a0_0x403e56;try{const _0x5be004=_0x1532f1[_0x1d4134(0x1de)]['id'],_0x5bcb7c=await categories[_0x1d4134(0x1ee)](_0x5be004,_0x1532f1[_0x1d4134(0x1b3)]);_0x1532f1['flash'](_0x1d4134(0x18e),''+users[_0x1d4134(0x19d)]),_0x2c706c[_0x1d4134(0x199)]('/products/categories');}catch(_0x49cd13){console[_0x1d4134(0x1bc)](_0x49cd13);}}),router['get'](a0_0x403e56(0x1af),auth,async(_0x48161f,_0x43fd44)=>{const _0x105fb3=a0_0x403e56;try{const _0x2834b9=_0x48161f['params']['id'],_0x567893=await categories['findByIdAndDelete'](_0x2834b9);_0x48161f[_0x105fb3(0x16a)](_0x105fb3(0x18e),_0x105fb3(0x1b2)),_0x43fd44['redirect'](_0x105fb3(0x1a0));}catch(_0x567170){console['log'](_0x567170);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x1bd),auth,async(_0x2876ea,_0x11f844)=>{const _0x1b8e50=a0_0x403e56;try{const {username:_0x4510eb,email:_0x190d8a,role:_0x455ac7}=_0x2876ea[_0x1b8e50(0x17f)],_0x558570=_0x2876ea[_0x1b8e50(0x17f)],_0x34831c=await profile[_0x1b8e50(0x13a)]({'email':_0x558570[_0x1b8e50(0x1c2)]}),_0x5a8cc8=await master_shop['find']();console[_0x1b8e50(0x1bc)](_0x1b8e50(0x158),_0x5a8cc8);const _0x1408d7=await brands['find']();if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x1db))var _0xc92894=users[_0x1b8e50(0x1ce)];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x184))var _0xc92894=users[_0x1b8e50(0x184)];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x161))var _0xc92894=users[_0x1b8e50(0x161)];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]=='Spanish')var _0xc92894=users['Spanish'];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x175))var _0xc92894=users[_0x1b8e50(0x175)];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x186))var _0xc92894=users['Portuguese'];else{if(_0x5a8cc8[0x0]['language']==_0x1b8e50(0x1b6))var _0xc92894=users[_0x1b8e50(0x1b6)];else{if(_0x5a8cc8[0x0][_0x1b8e50(0x166)]==_0x1b8e50(0x1d7))var _0xc92894=users[_0x1b8e50(0x160)];}}}}}}}_0x11f844[_0x1b8e50(0x1b4)](_0x1b8e50(0x188),{'success':_0x2876ea[_0x1b8e50(0x16a)](_0x1b8e50(0x18e)),'errors':_0x2876ea[_0x1b8e50(0x16a)]('errors'),'role':_0x558570,'profile':_0x34831c,'master_shop':_0x5a8cc8,'user':_0x1408d7,'language':_0xc92894});}catch(_0x166e1c){console[_0x1b8e50(0x1bc)](_0x166e1c);}}),router['post']('/brands',auth,async(_0x269bb4,_0x4621f1)=>{const _0x59b197=a0_0x403e56;try{const {name:_0x45f962,products:_0x290fd7}=_0x269bb4[_0x59b197(0x1b3)],_0x52556b=new brands({'name':_0x45f962,'products':_0x290fd7}),_0x1a2f47=await brands['findOne']({'name':_0x45f962});_0x1a2f47?_0x269bb4[_0x59b197(0x16a)]('errors',_0x45f962+_0x59b197(0x1c3)):_0x269bb4[_0x59b197(0x16a)](_0x59b197(0x18e),_0x45f962+_0x59b197(0x1e9));const _0x2fb916=await _0x52556b['save']();_0x4621f1[_0x59b197(0x199)](_0x59b197(0x1d3));}catch(_0x43e036){console['log'](_0x43e036);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x139),auth,async(_0x4c7dbb,_0x2532d2)=>{const _0x5232da=a0_0x403e56;try{const {username:_0x57169f,email:_0x9599a5,role:_0x24839c}=_0x4c7dbb[_0x5232da(0x17f)],_0x1fb935=_0x4c7dbb[_0x5232da(0x17f)],_0x3d8803=await profile[_0x5232da(0x13a)]({'email':_0x1fb935['email']}),_0x287be7=await master_shop[_0x5232da(0x16d)]();console[_0x5232da(0x1bc)](_0x5232da(0x158),_0x287be7);const _0x2dfdee=_0x4c7dbb[_0x5232da(0x1de)]['id'];console[_0x5232da(0x1bc)](_0x2dfdee);const _0x472402=await brands[_0x5232da(0x1a3)](_0x2dfdee);if(_0x287be7[0x0][_0x5232da(0x166)]==_0x5232da(0x1db))var _0x37f815=users[_0x5232da(0x1ce)];else{if(_0x287be7[0x0][_0x5232da(0x166)]==_0x5232da(0x184))var _0x37f815=users[_0x5232da(0x184)];else{if(_0x287be7[0x0][_0x5232da(0x166)]=='German')var _0x37f815=users[_0x5232da(0x161)];else{if(_0x287be7[0x0]['language']==_0x5232da(0x15f))var _0x37f815=users[_0x5232da(0x15f)];else{if(_0x287be7[0x0][_0x5232da(0x166)]==_0x5232da(0x175))var _0x37f815=users['French'];else{if(_0x287be7[0x0][_0x5232da(0x166)]=='Portuguese\x20(BR)')var _0x37f815=users[_0x5232da(0x169)];else{if(_0x287be7[0x0][_0x5232da(0x166)]==_0x5232da(0x1b6))var _0x37f815=users[_0x5232da(0x1b6)];else{if(_0x287be7[0x0][_0x5232da(0x166)]==_0x5232da(0x1d7))var _0x37f815=users[_0x5232da(0x160)];}}}}}}}_0x2532d2['render'](_0x5232da(0x188),{'success':_0x4c7dbb['flash'](_0x5232da(0x18e)),'errors':_0x4c7dbb['flash']('errors'),'role':_0x1fb935,'profile':_0x3d8803,'master_shop':_0x287be7,'user':_0x472402,'language':_0x37f815});}catch(_0x2f6503){console[_0x5232da(0x1bc)](_0x2f6503);}}),router['post'](a0_0x403e56(0x139),auth,async(_0x3306ff,_0x276c0d)=>{const _0x2f864e=a0_0x403e56;try{const _0x35a043=_0x3306ff[_0x2f864e(0x1de)]['id'],_0x23ee09=await brands[_0x2f864e(0x1ee)](_0x35a043,_0x3306ff[_0x2f864e(0x1b3)]);_0x3306ff[_0x2f864e(0x16a)](_0x2f864e(0x18e),_0x2f864e(0x142)),_0x276c0d['redirect']('/products/brands');}catch(_0x128000){console['log'](_0x128000);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x1da),auth,async(_0x2a304e,_0x37df07)=>{const _0x163e10=a0_0x403e56;try{const _0x181b2c=_0x2a304e['params']['id'],_0x1b58fe=await brands[_0x163e10(0x1a9)](_0x181b2c);_0x2a304e[_0x163e10(0x16a)](_0x163e10(0x18e),_0x163e10(0x1d5)),_0x37df07['redirect'](_0x163e10(0x1d3));}catch(_0x41473a){console[_0x163e10(0x1bc)](_0x41473a);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x198),auth,async(_0x4dc1c6,_0x53fe3e)=>{const _0x4bbb58=a0_0x403e56;try{const {username:_0xc5d447,email:_0x448b9a,role:_0x2afbde}=_0x4dc1c6[_0x4bbb58(0x17f)],_0x2c9f33=_0x4dc1c6[_0x4bbb58(0x17f)],_0x3c2b49=await profile[_0x4bbb58(0x13a)]({'email':_0x2c9f33[_0x4bbb58(0x1c2)]}),_0x4052e0=await master_shop[_0x4bbb58(0x16d)]();console[_0x4bbb58(0x1bc)]('master',_0x4052e0);const _0x5f011c=await units[_0x4bbb58(0x16d)]();if(_0x4052e0[0x0][_0x4bbb58(0x166)]=='English\x20(US)')var _0x559eb4=users[_0x4bbb58(0x1ce)];else{if(_0x4052e0[0x0]['language']==_0x4bbb58(0x184))var _0x559eb4=users['Hindi'];else{if(_0x4052e0[0x0][_0x4bbb58(0x166)]==_0x4bbb58(0x161))var _0x559eb4=users[_0x4bbb58(0x161)];else{if(_0x4052e0[0x0][_0x4bbb58(0x166)]==_0x4bbb58(0x15f))var _0x559eb4=users[_0x4bbb58(0x15f)];else{if(_0x4052e0[0x0][_0x4bbb58(0x166)]=='French')var _0x559eb4=users[_0x4bbb58(0x175)];else{if(_0x4052e0[0x0][_0x4bbb58(0x166)]==_0x4bbb58(0x186))var _0x559eb4=users[_0x4bbb58(0x169)];else{if(_0x4052e0[0x0]['language']==_0x4bbb58(0x1b6))var _0x559eb4=users[_0x4bbb58(0x1b6)];else{if(_0x4052e0[0x0][_0x4bbb58(0x166)]==_0x4bbb58(0x1d7))var _0x559eb4=users[_0x4bbb58(0x160)];}}}}}}}_0x53fe3e[_0x4bbb58(0x1b4)](_0x4bbb58(0x18a),{'success':_0x4dc1c6[_0x4bbb58(0x16a)](_0x4bbb58(0x18e)),'errors':_0x4dc1c6[_0x4bbb58(0x16a)]('errors'),'role':_0x2c9f33,'profile':_0x3c2b49,'master_shop':_0x4052e0,'user':_0x5f011c,'language':_0x559eb4});}catch(_0x48da5b){console[_0x4bbb58(0x1bc)](_0x48da5b);}}),router[a0_0x403e56(0x19b)]('/units',auth,async(_0x1c7420,_0x5bc2e5)=>{const _0x23531b=a0_0x403e56;try{const {name:_0x436c3b,secondary_unit:_0x5a3d28,products:_0x4a94cb}=_0x1c7420[_0x23531b(0x1b3)],_0x3d37e7=new units({'name':_0x436c3b,'secondary_unit':_0x5a3d28,'products':_0x4a94cb}),_0x7b9976=await units[_0x23531b(0x13a)]({'name':_0x436c3b});_0x7b9976?_0x1c7420[_0x23531b(0x16a)](_0x23531b(0x185),_0x436c3b+_0x23531b(0x197)):_0x1c7420[_0x23531b(0x16a)]('success',_0x436c3b+_0x23531b(0x1ef));const _0x14405f=await _0x3d37e7[_0x23531b(0x180)]();_0x5bc2e5[_0x23531b(0x199)](_0x23531b(0x164));}catch(_0x57564b){console[_0x23531b(0x1bc)](_0x57564b);}}),router[a0_0x403e56(0x1f3)]('/units/:id',auth,async(_0x3fd5f6,_0x571b78)=>{const _0x49d27f=a0_0x403e56;try{const {username:_0x128ba8,email:_0x13d601,role:_0x222d91}=_0x3fd5f6[_0x49d27f(0x17f)],_0x57f152=_0x3fd5f6[_0x49d27f(0x17f)],_0x345427=await profile[_0x49d27f(0x13a)]({'email':_0x57f152[_0x49d27f(0x1c2)]}),_0x3065d3=await master_shop[_0x49d27f(0x16d)]();console[_0x49d27f(0x1bc)]('master',_0x3065d3);const _0xee6e82=_0x3fd5f6[_0x49d27f(0x1de)]['id'],_0x4acda1=await units[_0x49d27f(0x1a3)](_0xee6e82);if(_0x3065d3[0x0][_0x49d27f(0x166)]==_0x49d27f(0x1db))var _0x4426ee=users[_0x49d27f(0x1ce)];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]==_0x49d27f(0x184))var _0x4426ee=users[_0x49d27f(0x184)];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]==_0x49d27f(0x161))var _0x4426ee=users[_0x49d27f(0x161)];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]==_0x49d27f(0x15f))var _0x4426ee=users[_0x49d27f(0x15f)];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]=='French')var _0x4426ee=users[_0x49d27f(0x175)];else{if(_0x3065d3[0x0]['language']=='Portuguese\x20(BR)')var _0x4426ee=users['Portuguese'];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]=='Chinese')var _0x4426ee=users[_0x49d27f(0x1b6)];else{if(_0x3065d3[0x0][_0x49d27f(0x166)]==_0x49d27f(0x1d7))var _0x4426ee=users[_0x49d27f(0x160)];}}}}}}}_0x571b78['render'](_0x49d27f(0x18a),{'success':_0x3fd5f6[_0x49d27f(0x16a)](_0x49d27f(0x18e)),'errors':_0x3fd5f6['flash']('errors'),'role':_0x57f152,'profile':_0x345427,'master_shop':_0x3065d3,'user':_0x4acda1,'language':_0x4426ee});}catch(_0x5630da){console[_0x49d27f(0x1bc)](_0x5630da);}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x1e8),auth,async(_0x5daadd,_0x2bdf04)=>{const _0x238489=a0_0x403e56;try{const _0x455f13=_0x5daadd['params']['id'],_0x55a0c5=await units['findByIdAndUpdate'](_0x455f13,_0x5daadd[_0x238489(0x1b3)]);_0x5daadd[_0x238489(0x16a)]('success',_0x238489(0x152)),_0x2bdf04[_0x238489(0x199)]('/products/units');}catch(_0x4aef5e){console['log'](_0x4aef5e);}}),router[a0_0x403e56(0x1f3)]('/units/delete/:id',auth,async(_0x527d05,_0x1a341c)=>{const _0x5cb34b=a0_0x403e56;try{const _0x1d6170=_0x527d05[_0x5cb34b(0x1de)]['id'],_0x5419af=await units['findByIdAndDelete'](_0x1d6170);_0x527d05[_0x5cb34b(0x16a)](_0x5cb34b(0x18e),'unit\x20data\x20delete\x20successfully'),_0x1a341c[_0x5cb34b(0x199)]('/products/units');}catch(_0x253592){console[_0x5cb34b(0x1bc)](_0x253592);}});const storage=multer[a0_0x403e56(0x171)]({'destination':(_0x1ab17d,_0x347433,_0x396201)=>{const _0x750242=a0_0x403e56;_0x396201(null,_0x750242(0x1d6));},'filename':(_0x1018c2,_0x54a77f,_0x364651)=>{const _0x4c27ec=a0_0x403e56;_0x364651(null,Date[_0x4c27ec(0x1e5)]()+_0x54a77f[_0x4c27ec(0x1e1)]);}}),upload=multer({'storage':storage});router[a0_0x403e56(0x1f3)](a0_0x403e56(0x167),auth,async(_0x31804f,_0x428e10)=>{const _0x427e9a=a0_0x403e56;try{const {username:_0x4de250,email:_0x5ca4e5,role:_0x559a86}=_0x31804f[_0x427e9a(0x17f)],_0xf58fc5=_0x31804f[_0x427e9a(0x17f)],_0x14a4c5=await profile[_0x427e9a(0x13a)]({'email':_0xf58fc5[_0x427e9a(0x1c2)]}),_0x1121cb={'year':'numeric','month':_0x427e9a(0x1c1),'day':_0x427e9a(0x1f6)},_0x58b715=await master_shop[_0x427e9a(0x16d)]();console['log'](_0x427e9a(0x181),_0x58b715);const _0x37ca08=await product[_0x427e9a(0x16d)]();console[_0x427e9a(0x1bc)](_0x427e9a(0x1f0),_0x37ca08);const _0x145041=await warehouse[_0x427e9a(0x143)]([{'$unwind':_0x427e9a(0x191)},{'$lookup':{'from':_0x427e9a(0x14c),'localField':_0x427e9a(0x16c),'foreignField':'name','as':_0x427e9a(0x177)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x427e9a(0x19a),'product_stock':_0x427e9a(0x1f7)}},{'$group':{'_id':_0x427e9a(0x145),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x427e9a(0x1bc)]('Products\x20warehouse_data',_0x145041),_0x145041[_0x427e9a(0x179)](_0x1ace15=>{const _0x3d821b=_0x427e9a,_0x4285a7=_0x37ca08[_0x3d821b(0x1ec)](_0x219d60=>{const _0x5be56a=_0x3d821b;_0x219d60[_0x5be56a(0x1c9)]==_0x1ace15[_0x5be56a(0x1df)]&&(_0x219d60[_0x5be56a(0x1c4)]=parseInt(_0x219d60['stock'])+parseInt(_0x1ace15[_0x5be56a(0x15b)]));});}),console[_0x427e9a(0x1bc)](_0x427e9a(0x1f0),_0x37ca08);if(_0x58b715[0x0][_0x427e9a(0x166)]=='English\x20(US)')var _0x4d3700=users[_0x427e9a(0x1ce)];else{if(_0x58b715[0x0]['language']==_0x427e9a(0x184))var _0x4d3700=users[_0x427e9a(0x184)];else{if(_0x58b715[0x0][_0x427e9a(0x166)]==_0x427e9a(0x161))var _0x4d3700=users[_0x427e9a(0x161)];else{if(_0x58b715[0x0]['language']=='Spanish')var _0x4d3700=users['Spanish'];else{if(_0x58b715[0x0][_0x427e9a(0x166)]=='French')var _0x4d3700=users[_0x427e9a(0x175)];else{if(_0x58b715[0x0]['language']==_0x427e9a(0x186))var _0x4d3700=users[_0x427e9a(0x169)];else{if(_0x58b715[0x0][_0x427e9a(0x166)]=='Chinese')var _0x4d3700=users[_0x427e9a(0x1b6)];else{if(_0x58b715[0x0][_0x427e9a(0x166)]==_0x427e9a(0x1d7))var _0x4d3700=users[_0x427e9a(0x160)];}}}}}}}_0x428e10[_0x427e9a(0x1b4)](_0x427e9a(0x14c),{'success':_0x31804f[_0x427e9a(0x16a)](_0x427e9a(0x18e)),'errors':_0x31804f[_0x427e9a(0x16a)](_0x427e9a(0x185)),'alldata':_0x37ca08,'profile':_0x14a4c5,'master_shop':_0x58b715,'role':_0xf58fc5,'product_stock':_0x145041,'language':_0x4d3700});}catch(_0x424c41){console[_0x427e9a(0x1bc)](_0x424c41);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x1e3),auth,async(_0x4db4e8,_0xcf1828)=>{const _0x568eb2=a0_0x403e56;try{const {username:_0x507117,email:_0x5d5f5f,role:_0x594676}=_0x4db4e8[_0x568eb2(0x17f)],_0x8895f2=_0x4db4e8[_0x568eb2(0x17f)],_0x5f4145=await profile[_0x568eb2(0x13a)]({'email':_0x8895f2[_0x568eb2(0x1c2)]}),_0x26045e=await master_shop[_0x568eb2(0x16d)]();console[_0x568eb2(0x1bc)]('master',_0x26045e);const _0x3751f3=await categories[_0x568eb2(0x16d)]({}),_0x159faa=await brands[_0x568eb2(0x16d)]({}),_0x3de8e2=await units[_0x568eb2(0x16d)]({}),_0x271dee=await warehouse['find']({'status':'Enabled'});if(_0x26045e[0x0][_0x568eb2(0x166)]==_0x568eb2(0x1db))var _0x296b28=users[_0x568eb2(0x1ce)];else{if(_0x26045e[0x0]['language']==_0x568eb2(0x184))var _0x296b28=users[_0x568eb2(0x184)];else{if(_0x26045e[0x0]['language']==_0x568eb2(0x161))var _0x296b28=users[_0x568eb2(0x161)];else{if(_0x26045e[0x0]['language']==_0x568eb2(0x15f))var _0x296b28=users[_0x568eb2(0x15f)];else{if(_0x26045e[0x0]['language']=='French')var _0x296b28=users[_0x568eb2(0x175)];else{if(_0x26045e[0x0][_0x568eb2(0x166)]==_0x568eb2(0x186))var _0x296b28=users[_0x568eb2(0x169)];else{if(_0x26045e[0x0][_0x568eb2(0x166)]=='Chinese')var _0x296b28=users[_0x568eb2(0x1b6)];else{if(_0x26045e[0x0]['language']==_0x568eb2(0x1d7))var _0x296b28=users['Arabic'];}}}}}}}_0xcf1828[_0x568eb2(0x1b4)](_0x568eb2(0x189),{'success':_0x4db4e8[_0x568eb2(0x16a)](_0x568eb2(0x18e)),'errors':_0x4db4e8['flash'](_0x568eb2(0x185)),'role':_0x8895f2,'profile':_0x5f4145,'categories':_0x3751f3,'brands':_0x159faa,'master_shop':_0x26045e,'units':_0x3de8e2,'language':_0x296b28,'find_data':_0x271dee});}catch(_0x995498){console[_0x568eb2(0x1bc)](_0x995498);}}),router['post'](a0_0x403e56(0x1e3),auth,upload[a0_0x403e56(0x149)](a0_0x403e56(0x1a6)),async(_0xa50e78,_0x5aeeea)=>{const _0x2c55d0=a0_0x403e56;try{const {name:_0x9c3aa4,category:_0x5178d1,brand:_0x283a16,unit:_0x26b8eb,alertquantity:_0x224e90,stock:_0x544e1b,product_code:_0x280778,warehouse:_0x1e4bc6,primary_ItemCode:_0x2f1f25,second_ItemCode:_0x2767d3,second_unit:_0x35624e,maxPerUnit:_0x10ec77,MaxPerProduct:_0x18193a}=_0xa50e78[_0x2c55d0(0x1b3)],_0x57af10=_0xa50e78[_0x2c55d0(0x150)]?.[_0x2c55d0(0x15e)]||_0x2c55d0(0x187),_0x324762=new product({'image':_0x57af10,'name':_0x9c3aa4,'category':_0x5178d1,'brand':_0x283a16,'unit':_0x26b8eb,'alertquantity':_0x224e90,'stock':_0x544e1b,'product_code':_0x280778,'warehouse':_0x1e4bc6,'primary_code':_0x2f1f25,'secondary_code':_0x2767d3,'second_unit':_0x35624e,'maxStocks':_0x18193a,'maxProdPerUnit':_0x10ec77}),_0x2eecf3=await _0x324762[_0x2c55d0(0x180)](),_0x39e296=await categories[_0x2c55d0(0x13a)]({'name':_0x5178d1});_0x39e296['products']=parseInt(_0x39e296[_0x2c55d0(0x14c)])+0x1,await _0x39e296[_0x2c55d0(0x180)]();const _0x5e2565=await brands[_0x2c55d0(0x13a)]({'name':_0x283a16});_0x5e2565['products']=parseInt(_0x5e2565['products'])+0x1,await _0x5e2565[_0x2c55d0(0x180)]();const _0x48d3fb=await units['findOne']({'name':_0x26b8eb});_0x48d3fb[_0x2c55d0(0x14c)]=parseInt(_0x48d3fb[_0x2c55d0(0x14c)])+0x1,await _0x48d3fb[_0x2c55d0(0x180)](),_0xa50e78[_0x2c55d0(0x16a)](_0x2c55d0(0x18e),_0x2c55d0(0x17b)),_0x5aeeea[_0x2c55d0(0x199)](_0x2c55d0(0x196));}catch(_0x5f3811){console['log'](_0x5f3811);}}),router['get'](a0_0x403e56(0x162),auth,async(_0x57a2cd,_0x393486)=>{const _0x179a73=a0_0x403e56;try{const {username:_0x12a404,email:_0x7da073,role:_0x11c88e}=_0x57a2cd[_0x179a73(0x17f)],_0x241425=_0x57a2cd['user'],_0x589beb=await profile['findOne']({'email':_0x241425[_0x179a73(0x1c2)]}),_0x439ba1=await master_shop[_0x179a73(0x16d)]();console[_0x179a73(0x1bc)](_0x179a73(0x176),_0x439ba1);const _0x2d5d99=_0x57a2cd[_0x179a73(0x1de)]['id'],_0x4bea19=await product['findById'](_0x2d5d99),_0x286ac1=await categories['find']({}),_0x2df7b6=await brands[_0x179a73(0x16d)]({}),_0x15f466=await units[_0x179a73(0x16d)]({}),_0x4b271f=await warehouse['find']({'status':_0x179a73(0x1b5)}),_0x82e37=await units[_0x179a73(0x143)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x179a73(0x1b1)}}}]);if(_0x439ba1[0x0][_0x179a73(0x166)]==_0x179a73(0x1db))var _0x21bf75=users[_0x179a73(0x1ce)];else{if(_0x439ba1[0x0][_0x179a73(0x166)]==_0x179a73(0x184))var _0x21bf75=users['Hindi'];else{if(_0x439ba1[0x0]['language']==_0x179a73(0x161))var _0x21bf75=users[_0x179a73(0x161)];else{if(_0x439ba1[0x0]['language']=='Spanish')var _0x21bf75=users['Spanish'];else{if(_0x439ba1[0x0][_0x179a73(0x166)]==_0x179a73(0x175))var _0x21bf75=users[_0x179a73(0x175)];else{if(_0x439ba1[0x0][_0x179a73(0x166)]=='Portuguese\x20(BR)')var _0x21bf75=users[_0x179a73(0x169)];else{if(_0x439ba1[0x0][_0x179a73(0x166)]==_0x179a73(0x1b6))var _0x21bf75=users['Chinese'];else{if(_0x439ba1[0x0][_0x179a73(0x166)]==_0x179a73(0x1d7))var _0x21bf75=users[_0x179a73(0x160)];}}}}}}}_0x393486[_0x179a73(0x1b4)]('edit_product',{'success':_0x57a2cd[_0x179a73(0x16a)](_0x179a73(0x18e)),'errors':_0x57a2cd[_0x179a73(0x16a)](_0x179a73(0x185)),'role':_0x241425,'profile':_0x589beb,'alldata':_0x4bea19,'categories':_0x286ac1,'brands':_0x2df7b6,'master_shop':_0x439ba1,'units':_0x15f466,'secondunit':_0x82e37,'find_data':_0x4b271f,'language':_0x21bf75});}catch(_0x58d2ab){console[_0x179a73(0x1bc)](_0x58d2ab);}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x162),auth,upload[a0_0x403e56(0x149)](a0_0x403e56(0x1a6)),async(_0x3f1fb7,_0xaccb31)=>{const _0x55c757=a0_0x403e56;try{console[_0x55c757(0x1bc)](_0x55c757(0x1c0));const _0x116e2f=_0x3f1fb7[_0x55c757(0x1de)]['id'],_0x25567d=await product[_0x55c757(0x1a3)](_0x116e2f),{image:_0x2022f4,name:_0x444184,category:_0x30bd76,brand:_0x470a84,sku:_0x572059,unit:_0x2f9883,alertquantity:_0x2c0372,product_code:_0x4f61da,warehouse:_0x31d36a,primary_ItemCode:_0x1ca6b7,second_ItemCode:_0x1bd085,second_unit:_0xf5f095,maxPerUnit:_0xd4ef3c,MaxPerProduct:_0x16555f,prod_catdata:_0x5cf410}=_0x3f1fb7[_0x55c757(0x1b3)];_0x3f1fb7[_0x55c757(0x150)]&&(_0x25567d[_0x55c757(0x1a6)]=_0x3f1fb7[_0x55c757(0x150)]['filename']);_0x25567d[_0x55c757(0x1c9)]=_0x444184,_0x25567d['category']=_0x30bd76,_0x25567d[_0x55c757(0x14f)]=_0x470a84,_0x25567d[_0x55c757(0x1d8)]=_0x572059,_0x25567d[_0x55c757(0x194)]=_0x2f9883,_0x25567d[_0x55c757(0x15a)]=_0x2c0372,_0x25567d['product_code']=_0x4f61da,_0x25567d[_0x55c757(0x141)]=_0x31d36a,_0x25567d[_0x55c757(0x1f5)]=_0x1ca6b7,_0x25567d[_0x55c757(0x190)]=_0x1bd085,_0x25567d[_0x55c757(0x1a5)]=_0xf5f095,_0x25567d[_0x55c757(0x151)]=_0x16555f,_0x25567d[_0x55c757(0x1bb)]=_0xd4ef3c,_0x25567d[_0x55c757(0x1c6)]=_0x5cf410;const _0x2f12b1=await _0x25567d['save']();console['log']('product\x20edit',_0x25567d),_0x3f1fb7[_0x55c757(0x16a)]('success',_0x55c757(0x1ba)),_0xaccb31[_0x55c757(0x199)](_0x55c757(0x196));}catch(_0x2faf7b){console[_0x55c757(0x1bc)](_0x2faf7b);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x18d),auth,async(_0x35d39a,_0x3671fa)=>{const _0x256e0d=a0_0x403e56;try{const {username:_0x559418,email:_0x29e954,role:_0x4a075a}=_0x35d39a[_0x256e0d(0x17f)],_0x236829=_0x35d39a[_0x256e0d(0x17f)],_0x36d3a7=await profile['findOne']({'email':_0x236829['email']}),_0x20db61=await master_shop[_0x256e0d(0x16d)]();console[_0x256e0d(0x1bc)](_0x256e0d(0x1e2),_0x20db61);const _0x4b7b42=_0x35d39a[_0x256e0d(0x1de)]['id'],_0x1b2f3c=await product[_0x256e0d(0x1a3)](_0x4b7b42);console[_0x256e0d(0x1bc)](_0x256e0d(0x1dd),_0x1b2f3c);if(_0x20db61[0x0]['language']==_0x256e0d(0x1db))var _0x5f569b=users[_0x256e0d(0x1ce)];else{if(_0x20db61[0x0][_0x256e0d(0x166)]=='Hindi')var _0x5f569b=users[_0x256e0d(0x184)];else{if(_0x20db61[0x0][_0x256e0d(0x166)]==_0x256e0d(0x161))var _0x5f569b=users[_0x256e0d(0x161)];else{if(_0x20db61[0x0]['language']==_0x256e0d(0x15f))var _0x5f569b=users[_0x256e0d(0x15f)];else{if(_0x20db61[0x0][_0x256e0d(0x166)]==_0x256e0d(0x175))var _0x5f569b=users[_0x256e0d(0x175)];else{if(_0x20db61[0x0][_0x256e0d(0x166)]=='Portuguese\x20(BR)')var _0x5f569b=users['Portuguese'];else{if(_0x20db61[0x0][_0x256e0d(0x166)]==_0x256e0d(0x1b6))var _0x5f569b=users['Chinese'];else{if(_0x20db61[0x0][_0x256e0d(0x166)]==_0x256e0d(0x1d7))var _0x5f569b=users['Arabic'];}}}}}}}_0x3671fa[_0x256e0d(0x1b4)](_0x256e0d(0x178),{'success':_0x35d39a[_0x256e0d(0x16a)](_0x256e0d(0x18e)),'errors':_0x35d39a[_0x256e0d(0x16a)](_0x256e0d(0x185)),'role':_0x236829,'profile':_0x36d3a7,'alldata':_0x1b2f3c,'master_shop':_0x20db61,'language':_0x5f569b});}catch(_0x27eafc){console[_0x256e0d(0x1bc)](_0x27eafc);}}),router[a0_0x403e56(0x1f3)](a0_0x403e56(0x182),auth,async(_0x54bd7e,_0x25122e)=>{const _0x1745fc=a0_0x403e56;try{const _0x405bd5=new excelJS[(_0x1745fc(0x14b))](),_0x103d63=_0x405bd5['addWorksheet']('Products');return _0x103d63[_0x1745fc(0x1ae)]=[{'header':_0x1745fc(0x1aa),'key':_0x1745fc(0x157),'width':0xa},{'header':_0x1745fc(0x13d),'key':'PBrands','width':0xa},{'header':_0x1745fc(0x19f),'key':_0x1745fc(0x1e6),'width':0xa},{'header':_0x1745fc(0x1a7),'key':_0x1745fc(0x16b),'width':0xa},{'header':_0x1745fc(0x1f4),'key':'MaxperUnits','width':0xa},{'header':_0x1745fc(0x1cb),'key':'ProductCode','width':0xa},{'header':_0x1745fc(0x183),'key':_0x1745fc(0x195),'width':0xa},{'header':_0x1745fc(0x1e7),'key':'ProductCode','width':0xa},{'header':_0x1745fc(0x1ad),'key':_0x1745fc(0x154),'width':0xa},{'header':'Alert_QTY','key':_0x1745fc(0x1d0),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x1745fc(0x14d),'key':_0x1745fc(0x13b),'width':0xa}],_0x25122e[_0x1745fc(0x1d2)]('Content-Type',_0x1745fc(0x1c5)),_0x25122e[_0x1745fc(0x1d2)](_0x1745fc(0x1a1),_0x1745fc(0x1eb)),_0x405bd5[_0x1745fc(0x1fa)]['write'](_0x25122e)['then'](()=>{const _0x309cf3=_0x1745fc;_0x25122e[_0x309cf3(0x1bf)](0xc8);});}catch(_0x30aa84){_0x25122e[_0x1745fc(0x1bf)](0x190)[_0x1745fc(0x1ac)](_0x30aa84);}});function a0_0x104b(_0x52eee6,_0x5b3d62){const _0x331101=a0_0x3311();return a0_0x104b=function(_0x104b28,_0x358cd5){_0x104b28=_0x104b28-0x138;let _0x194cee=_0x331101[_0x104b28];return _0x194cee;},a0_0x104b(_0x52eee6,_0x5b3d62);}const storage1=multer['diskStorage']({'destination':(_0x4648c6,_0x4dd3f3,_0x500c94)=>{const _0x16455f=a0_0x403e56;_0x500c94(null,_0x16455f(0x1ed));},'filename':(_0xce1538,_0x5eccdf,_0x4dd577)=>{const _0x100cbc=a0_0x403e56;_0x4dd577(null,Date['now']()+_0x5eccdf[_0x100cbc(0x1e1)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x403e56(0x19b)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x403e56(0x149)](a0_0x403e56(0x174)),async(_0x2c24c2,_0x61a9ee)=>{const _0x472d8b=a0_0x403e56,_0x1de5bf=_0x2c24c2['file']['filename'],_0x336675=await xlsx[_0x472d8b(0x1ab)]('public/Migration/'+_0x1de5bf);let _0x49c475=_0x336675['SheetNames'],_0x45dd20=xlsx[_0x472d8b(0x172)][_0x472d8b(0x16e)](_0x336675[_0x472d8b(0x1c8)][_0x49c475[0x0]]);for(const _0x3c9bff of _0x45dd20){const _0x2f00af=_0x3c9bff['Product_Name'],_0x2b5470=_0x3c9bff[_0x472d8b(0x13d)],_0x551fdd=_0x3c9bff[_0x472d8b(0x19f)],_0x435dd3=_0x3c9bff['Secondary_Units'],_0x2da457=_0x3c9bff[_0x472d8b(0x1e7)],_0x51400d=_0x3c9bff[_0x472d8b(0x1ad)],_0xb1d14d=_0x3c9bff[_0x472d8b(0x1a8)],_0x2af0e3=_0x3c9bff['Primary_Code'],_0x10ebae=_0x3c9bff[_0x472d8b(0x183)],_0x42602e=_0x3c9bff['Maximum_Stocks'],_0x32b5fe=_0x3c9bff['max_number_per_units'],_0x443cff=_0x3c9bff[_0x472d8b(0x14d)];try{let _0x3f386b=await categories[_0x472d8b(0x13a)]({'name':_0x51400d});if(!_0x3f386b){const _0x53cc2f=new categories({'name':_0x51400d,'products':'0'});_0x3f386b=await _0x53cc2f[_0x472d8b(0x180)]();}let _0x3d1d51=await brands[_0x472d8b(0x13a)]({'name':_0x2b5470});if(!_0x3d1d51){const _0x1500bd=new brands({'name':_0x2b5470,'products':'0'});_0x3d1d51=await _0x1500bd[_0x472d8b(0x180)]();}let _0x59159a=await units['findOne']({'name':_0x551fdd,'secondary_unit':_0x435dd3});if(!_0x59159a){const _0x19dc58=new units({'name':_0x551fdd,'secondary_unit':_0x435dd3,'products':'0'});_0x59159a=await _0x19dc58[_0x472d8b(0x180)]();}const _0x5e4fa8=await product[_0x472d8b(0x16d)]({'name':_0x2f00af,'category':_0x3f386b[_0x472d8b(0x1c9)],'brand':_0x3d1d51[_0x472d8b(0x1c9)],'secondary_unit':_0x59159a[_0x472d8b(0x1a5)],'product_code':_0x2da457});console[_0x472d8b(0x1bc)](_0x5e4fa8[_0x472d8b(0x140)]+_0x472d8b(0x138)+_0x3f386b[_0x472d8b(0x1c9)]+_0x472d8b(0x138)+_0x3d1d51[_0x472d8b(0x1c9)]+_0x472d8b(0x138)+_0x59159a[_0x472d8b(0x1a5)]+'\x20<>\x20'+_0x2da457+_0x472d8b(0x138)+_0x2f00af);if(_0x5e4fa8['length']===0x0){const _0x2d76d3=new product({'image':_0x472d8b(0x187),'name':_0x2f00af,'category':_0x3f386b[_0x472d8b(0x1c9)],'brand':_0x3d1d51[_0x472d8b(0x1c9)],'unit':_0x59159a['name'],'alertquantity':_0xb1d14d,'product_code':_0x2da457,'secondary_unit':_0x59159a[_0x472d8b(0x1a5)],'primary_code':_0x2af0e3,'secondary_code':_0x10ebae,'maxStocks':_0x42602e,'maxProdPerUnit':_0x32b5fe,'product_category':_0x443cff}),_0x20fb17=await _0x2d76d3[_0x472d8b(0x180)]();_0x3f386b['products']=parseInt(_0x3f386b[_0x472d8b(0x14c)])+0x1,await _0x3f386b[_0x472d8b(0x180)](),_0x3d1d51[_0x472d8b(0x14c)]=parseInt(_0x3d1d51['products'])+0x1,await _0x3d1d51['save'](),_0x59159a[_0x472d8b(0x14c)]=parseInt(_0x59159a[_0x472d8b(0x14c)])+0x1,await _0x59159a[_0x472d8b(0x180)](),_0x2c24c2[_0x472d8b(0x16a)](_0x472d8b(0x18e),_0x2f00af+_0x472d8b(0x1e4));}else{console[_0x472d8b(0x1bc)](_0x5e4fa8[0x0]);const _0x3d8e9e=_0x5e4fa8[0x0];_0x3d8e9e[_0x472d8b(0x19c)]=_0x3f386b['name'],_0x3d8e9e[_0x472d8b(0x14f)]=_0x3d1d51['name'],_0x3d8e9e[_0x472d8b(0x194)]=_0x59159a['name'],_0x3d8e9e[_0x472d8b(0x15a)]=_0xb1d14d,_0x3d8e9e[_0x472d8b(0x1ca)]=_0x2da457,_0x3d8e9e[_0x472d8b(0x1a5)]=_0x59159a[_0x472d8b(0x1a5)],_0x3d8e9e[_0x472d8b(0x1f5)]=_0x2af0e3,_0x3d8e9e[_0x472d8b(0x190)]=_0x10ebae,_0x3d8e9e[_0x472d8b(0x151)]=_0x42602e,_0x3d8e9e[_0x472d8b(0x1bb)]=_0x32b5fe,_0x3d8e9e[_0x472d8b(0x1c6)]=_0x443cff;const _0x5b4fd6=await _0x3d8e9e[_0x472d8b(0x180)]();_0x2c24c2[_0x472d8b(0x16a)](_0x472d8b(0x18e),_0x5b4fd6[_0x472d8b(0x1c9)]+_0x472d8b(0x14e));}}catch(_0x2065fc){_0x61a9ee[_0x472d8b(0x1bf)](0x1f4)[_0x472d8b(0x192)]({'proderror':_0x2065fc[_0x472d8b(0x17d)],'aproduct':_0x2f00af});}}_0x61a9ee[_0x472d8b(0x199)](_0x472d8b(0x196));}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x156),auth,async(_0x209b83,_0x2dde37)=>{const _0x357842=a0_0x403e56;try{console[_0x357842(0x1bc)](_0x209b83[_0x357842(0x1b3)]);const {data_cateory:_0x3b7d94,datachoose:_0x8e535c}=_0x209b83[_0x357842(0x1b3)];var _0x3183e2;if(_0x8e535c==_0x357842(0x18b))_0x3183e2=await product['aggregate']([{'$group':{'_id':'$product_category'}}]);else{if(_0x8e535c==_0x357842(0x188))_0x3183e2=await product[_0x357842(0x143)]([{'$match':{'product_category':_0x3b7d94}},{'$group':{'_id':_0x357842(0x155)}}]);else _0x8e535c==_0x357842(0x13f)&&(_0x3183e2=await product[_0x357842(0x143)]([{'$match':{'product_category':_0x3b7d94}},{'$group':{'_id':_0x357842(0x1f2)}}]));}_0x2dde37[_0x357842(0x192)](_0x3183e2);}catch(_0x64d4c6){_0x2dde37[_0x357842(0x192)]({'message':_0x64d4c6[_0x357842(0x17d)]});}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x1ea),auth,async(_0xb9aee1,_0x2c61e2)=>{const _0x5c61e0=a0_0x403e56;try{const {data_choosing:_0x3dbc32,data_selected:_0x1aa9d3}=_0xb9aee1[_0x5c61e0(0x1b3)];var _0x26f8a5;if(_0x3dbc32==_0x5c61e0(0x18b))_0x26f8a5=await product[_0x5c61e0(0x143)]([{'$match':{'product_category':_0x1aa9d3}}]);else{if(_0x3dbc32==_0x5c61e0(0x188))_0x26f8a5=await product[_0x5c61e0(0x143)]([{'$match':{'brand':_0x1aa9d3}}]);else _0x3dbc32==_0x5c61e0(0x13f)&&(_0x26f8a5=await product[_0x5c61e0(0x143)]([{'$match':{'category':_0x1aa9d3}}]));}_0x2c61e2[_0x5c61e0(0x192)](_0x26f8a5);}catch(_0x50c6ba){_0x2c61e2['json']({'message':_0x50c6ba[_0x5c61e0(0x17d)]});}}),router['get']('/print_barcode',auth,async(_0x3b5189,_0x1ce12f)=>{const _0x112f3a=a0_0x403e56,_0x4a75d1=_0x3b5189[_0x112f3a(0x17f)],_0x5a90d0=await profile[_0x112f3a(0x13a)]({'email':_0x4a75d1[_0x112f3a(0x1c2)]}),_0x554755=await master_shop[_0x112f3a(0x16d)](),_0x33696e=await product[_0x112f3a(0x16d)]();if(_0x554755[0x0]['language']==_0x112f3a(0x1db))var _0x38464e=users[_0x112f3a(0x1ce)];else{if(_0x554755[0x0][_0x112f3a(0x166)]==_0x112f3a(0x184))var _0x38464e=users[_0x112f3a(0x184)];else{if(_0x554755[0x0][_0x112f3a(0x166)]=='German')var _0x38464e=users[_0x112f3a(0x161)];else{if(_0x554755[0x0][_0x112f3a(0x166)]==_0x112f3a(0x15f))var _0x38464e=users[_0x112f3a(0x15f)];else{if(_0x554755[0x0][_0x112f3a(0x166)]==_0x112f3a(0x175))var _0x38464e=users[_0x112f3a(0x175)];else{if(_0x554755[0x0][_0x112f3a(0x166)]==_0x112f3a(0x186))var _0x38464e=users['Portuguese'];else{if(_0x554755[0x0][_0x112f3a(0x166)]=='Chinese')var _0x38464e=users['Chinese'];else{if(_0x554755[0x0]['language']=='Arabic\x20(ae)')var _0x38464e=users[_0x112f3a(0x160)];}}}}}}}_0x1ce12f[_0x112f3a(0x1b4)]('product_barcode_products',{'success':_0x3b5189[_0x112f3a(0x16a)](_0x112f3a(0x18e)),'errors':_0x3b5189[_0x112f3a(0x16a)](_0x112f3a(0x185)),'role':_0x4a75d1,'profile':_0x5a90d0,'products':_0x33696e,'master_shop':_0x554755,'language':_0x38464e});}),router[a0_0x403e56(0x19b)]('/barcode_data',auth,async(_0x5d1c8f,_0x552ff8)=>{const _0x39e81f=a0_0x403e56,_0x372072=await product[_0x39e81f(0x16d)]();_0x552ff8[_0x39e81f(0x192)]({'data':_0x372072});}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x1a4),auth,async(_0x4188ab,_0x1fb42c)=>{const _0x560f00=a0_0x403e56;try{const {dataProdCat:_0x479634,dataProdIdentity:_0x3b03fe}=_0x4188ab[_0x560f00(0x1b3)];var _0x4b5a4b;switch(_0x479634){case'fg':switch(_0x3b03fe){case'Brands':_0x4b5a4b=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x560f00(0x155)}},{'$project':{'brand':'$_id'}}]);break;case _0x560f00(0x1ad):_0x4b5a4b=await product[_0x560f00(0x143)]([{'$match':{'product_category':_0x560f00(0x159)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x560f00(0x146)}}]);break;}break;case'rm':switch(_0x3b03fe){case'Brands':_0x4b5a4b=await product[_0x560f00(0x143)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x560f00(0x155)}},{'$project':{'brand':_0x560f00(0x146)}}]);break;case _0x560f00(0x1ad):_0x4b5a4b=await product[_0x560f00(0x143)]([{'$match':{'product_category':_0x560f00(0x168)}},{'$group':{'_id':_0x560f00(0x1f2)}},{'$project':{'category':_0x560f00(0x146)}}]);break;}break;}_0x1fb42c[_0x560f00(0x192)](_0x4b5a4b);}catch(_0x56f6db){_0x1fb42c[_0x560f00(0x192)]({'message':_0x56f6db['message']});}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x14a),auth,async(_0x535ae3,_0x163cea)=>{const _0x7d3e9b=a0_0x403e56;try{console['log'](_0x535ae3[_0x7d3e9b(0x1b3)]);const {prod_cat:_0x4c3474,identity:_0x37c5be,valueData:_0x471b52,typeofbarcode:_0x21dcc9}=_0x535ae3[_0x7d3e9b(0x1b3)];let _0x34844b;switch(_0x4c3474){case'fg':if(_0x37c5be=='Brands')_0x34844b=await product[_0x7d3e9b(0x143)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x471b52}}]);else _0x37c5be==_0x7d3e9b(0x1ad)&&(_0x34844b=await product[_0x7d3e9b(0x143)]([{'$match':{'product_category':_0x7d3e9b(0x159),'category':_0x471b52}}]));break;case'rm':if(_0x37c5be==_0x7d3e9b(0x13d))_0x34844b=await product[_0x7d3e9b(0x143)]([{'$match':{'product_category':_0x7d3e9b(0x168),'brand':_0x471b52}}]);else _0x37c5be==_0x7d3e9b(0x1ad)&&(_0x34844b=await product[_0x7d3e9b(0x143)]([{'$match':{'product_category':_0x7d3e9b(0x168),'category':_0x471b52}}]));break;}const _0x1cdabd=_0x3a74ac=>_0x3a74ac*0x48,_0x276395={'width':0x3,'height':0x1},_0x225bca=new PDFDocument({'margin':_0x1cdabd(0.75),'size':[_0x1cdabd(_0x276395[_0x7d3e9b(0x17e)]),_0x1cdabd(_0x276395[_0x7d3e9b(0x173)])],'bufferPages':!![]}),_0x333385=_0x34844b[_0x7d3e9b(0x140)];for(let _0x1fc0f2=0x0;_0x1fc0f2<=_0x333385;_0x1fc0f2++){if(_0x1fc0f2!=_0x333385){const _0x48cba2=_0x34844b[_0x1fc0f2][_0x7d3e9b(0x1c9)],_0x225e76=_0x34844b[_0x1fc0f2][_0x7d3e9b(0x1f5)],_0x3d4d86=_0x34844b[_0x1fc0f2][_0x7d3e9b(0x190)],_0x2e20c4=_0x34844b[_0x1fc0f2][_0x7d3e9b(0x1ca)];var _0x588bc9;switch(_0x21dcc9){case'1':_0x588bc9=_0x225e76;break;case'2':_0x588bc9=_0x3d4d86;break;case'3':_0x588bc9=_0x2e20c4;break;}const _0x5e48c1={'width':0xd2,'height':0x64},_0x2b90f4={'width':_0x1cdabd(_0x276395['width']),'height':_0x1cdabd(_0x276395[_0x7d3e9b(0x173)])},_0x5f3ded=new Canvas();JsBarcode(_0x5f3ded,_0x588bc9,{'format':'CODE128','height':_0x5e48c1[_0x7d3e9b(0x173)],'displayValue':!![],'text':_0x588bc9});const _0x5a6859=_0x5f3ded[_0x7d3e9b(0x1b9)](),_0x652924=_0x2b90f4[_0x7d3e9b(0x17e)]/_0x5e48c1[_0x7d3e9b(0x17e)],_0x25fa60=_0x2b90f4[_0x7d3e9b(0x173)]/_0x5e48c1[_0x7d3e9b(0x173)],_0xe5e635=Math[_0x7d3e9b(0x153)](_0x652924,_0x25fa60),_0x1f37ff=_0x5e48c1['width']*_0xe5e635,_0x6ae5a1=_0x5e48c1['height']*_0xe5e635,_0xf2974=(_0x2b90f4[_0x7d3e9b(0x17e)]-_0x1f37ff)/0x2,_0x4f0799=(_0x2b90f4[_0x7d3e9b(0x173)]-_0x6ae5a1)/0x2;_0x225bca['image'](_0x5a6859,_0xf2974,_0x4f0799,{'width':_0x1f37ff,'height':_0x6ae5a1}),_0x1fc0f2!=_0x333385&&_0x225bca[_0x7d3e9b(0x1d1)]();}}const _0x47b6e7=[];_0x225bca['on']('data',_0x47b6e7[_0x7d3e9b(0x19e)][_0x7d3e9b(0x13c)](_0x47b6e7)),_0x225bca['on'](_0x7d3e9b(0x1f9),()=>{const _0xf32da6=_0x7d3e9b,_0x3676bf=Buffer[_0xf32da6(0x15c)](_0x47b6e7),_0x46f5f7=_0x3676bf['toString'](_0xf32da6(0x170));_0x163cea[_0xf32da6(0x192)]({'pdfContent':_0x46f5f7});}),_0x225bca[_0x7d3e9b(0x1f9)]();}catch(_0x430a76){_0x163cea[_0x7d3e9b(0x192)]({'message':_0x430a76['message']});}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x1e0),auth,async(_0x59aa19,_0x19e53f)=>{const _0x565d87=a0_0x403e56;try{console[_0x565d87(0x1bc)](_0x59aa19[_0x565d87(0x1b3)]);const {prod_cat:_0x5608d2,identity:_0x2996a6,valueData:_0x562e1d}=_0x59aa19[_0x565d87(0x1b3)];let _0x13b056;switch(_0x5608d2){case'fg':if(_0x2996a6=='Brands')_0x13b056=await product[_0x565d87(0x143)]([{'$match':{'product_category':_0x565d87(0x159),'brand':_0x562e1d}}]);else _0x2996a6==_0x565d87(0x1ad)&&(_0x13b056=await product[_0x565d87(0x143)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x562e1d}}]));break;case'rm':if(_0x2996a6=='Brands')_0x13b056=await product[_0x565d87(0x143)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x562e1d}}]);else _0x2996a6==_0x565d87(0x1ad)&&(_0x13b056=await product[_0x565d87(0x143)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x562e1d}}]));break;}_0x19e53f['json']({'data':_0x13b056});}catch(_0xcdf317){_0x19e53f['json']({'message':_0xcdf317['message']});}}),router[a0_0x403e56(0x19b)](a0_0x403e56(0x1f1),auth,async(_0x14867e,_0x493fb0)=>{const _0x51b0f5=a0_0x403e56;try{const _0x5bcff4=_0x14867e[_0x51b0f5(0x1de)]['id'],{copies:_0x1c99e6,typeofbarcode:_0x139a86}=_0x14867e[_0x51b0f5(0x1b3)];var _0x1a4621=await product[_0x51b0f5(0x1a3)](_0x5bcff4);const _0x55f2f5=_0x57f7b0=>_0x57f7b0*0x48,_0x2e9144={'width':0x3,'height':0x1},_0x2fa836=new PDFDocument({'margin':_0x55f2f5(0.75),'size':[_0x55f2f5(_0x2e9144[_0x51b0f5(0x17e)]),_0x55f2f5(_0x2e9144[_0x51b0f5(0x173)])],'bufferPages':!![]}),_0x1c9b42=_0x1c99e6,_0x3f6871=_0x1a4621[_0x51b0f5(0x1c9)],_0x29a205=_0x1a4621[_0x51b0f5(0x1f5)],_0x26c096=_0x1a4621['secondary_code'],_0x5aa799=_0x1a4621[_0x51b0f5(0x1ca)];let _0x40ea2b;switch(_0x139a86){case'1':_0x40ea2b=_0x29a205;break;case'2':_0x40ea2b=_0x26c096;break;case'3':_0x40ea2b=_0x5aa799;break;}const _0x56c6a7={'width':0xd2,'height':0x64},_0x41a53c={'width':_0x55f2f5(_0x2e9144['width']),'height':_0x55f2f5(_0x2e9144[_0x51b0f5(0x173)])};for(let _0x441d77=0x1;_0x441d77<=_0x1c9b42;_0x441d77++){const _0x1eb3c2=new Canvas();JsBarcode(_0x1eb3c2,_0x40ea2b,{'format':_0x51b0f5(0x18c),'height':_0x56c6a7[_0x51b0f5(0x173)],'displayValue':!![],'text':_0x40ea2b});const _0x3f589d=_0x1eb3c2[_0x51b0f5(0x1b9)](),_0x57d662=_0x41a53c[_0x51b0f5(0x17e)]/_0x56c6a7[_0x51b0f5(0x17e)],_0x5e71f3=_0x41a53c[_0x51b0f5(0x173)]/_0x56c6a7['height'],_0x56ec94=Math[_0x51b0f5(0x153)](_0x57d662,_0x5e71f3),_0x1a5f6e=_0x56c6a7['width']*_0x56ec94,_0x498271=_0x56c6a7[_0x51b0f5(0x173)]*_0x56ec94,_0x50ac6d=(_0x41a53c[_0x51b0f5(0x17e)]-_0x1a5f6e)/0x2,_0x202744=(_0x41a53c[_0x51b0f5(0x173)]-_0x498271)/0x2;_0x2fa836[_0x51b0f5(0x1a6)](_0x3f589d,_0x50ac6d,_0x202744,{'width':_0x1a5f6e,'height':_0x498271}),_0x441d77!=_0x1c9b42&&_0x2fa836['addPage']();}const _0x568ed2=[];_0x2fa836['on']('data',_0x568ed2[_0x51b0f5(0x19e)][_0x51b0f5(0x13c)](_0x568ed2)),_0x2fa836['on'](_0x51b0f5(0x1f9),()=>{const _0xed860d=_0x51b0f5,_0x1e1a84=Buffer[_0xed860d(0x15c)](_0x568ed2),_0x5a8583=_0x1e1a84[_0xed860d(0x165)](_0xed860d(0x170));_0x493fb0[_0xed860d(0x192)]({'pdfContent':_0x5a8583});}),_0x2fa836[_0x51b0f5(0x1f9)]();}catch(_0xdd6f72){_0x493fb0[_0x51b0f5(0x192)]({'message':_0xdd6f72[_0x51b0f5(0x17d)]});}}),module[a0_0x403e56(0x13e)]=router;