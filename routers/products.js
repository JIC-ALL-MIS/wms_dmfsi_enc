function a0_0xfc4e(_0x4be639,_0x11bcfc){const _0x2c7fed=a0_0x2c7f();return a0_0xfc4e=function(_0xfc4e7,_0x691b50){_0xfc4e7=_0xfc4e7-0x111;let _0x2b6225=_0x2c7fed[_0xfc4e7];return _0x2b6225;},a0_0xfc4e(_0x4be639,_0x11bcfc);}function a0_0x2c7f(){const _0x572520=['categories_edit','/units/delete/:id','Spanish','addWorksheet','Enabled','Primary_Code','unit\x20data\x20delete\x20successfully','$product_docs','diskStorage','xlsx','readFile','../middleware/auth','stock','width','Raw\x20Materials','brand\x20data\x20delete\x20successfully','json','hello','errors','brands','Products\x20master','prod_categ','categories','product\x20add\x20successfully','success','/print_barcode','write','/categories/:id','then','file','CODE128','migrate_product_fule','/barcode/:id','298008PXYZrK','findByIdAndDelete','$product_details','barcode\x20Product\x20master','warehouse','Secondary_Units','height','English\x20(US)','Units','exports','barcode\x20user_id','5iHHqSJ','exceljs','$brand','aggregate','send','multer','categ','pdfkit-table','PSecondaryUnits','base64','unit','brand','/view/:id','data','save','status','user','MaxperUnits','2529kWHYfi','Arabic','filename','max_number_per_units','2314718oiJTZq','Content-Disposition','name','$category','columns','$product_name','SheetNames','Finished\x20Goods','PAlQty','long','/view/add_products','now','secondary_unit','Secondary_Code','/brands/:id','product_code','/brands','params','concat','Portuguese','ProductCode','min','/print_barcode_single/:id','$product_details.product_stock','8LwnnHm','Products\x20warehouse_data','length','category','master','416KDtvhh','numeric','setHeader','Category','../models/all_models','$_id','Product_Name','public/Migration/','/products/units','\x20<>\x20','brand\x20data\x20update\x20successfully','sheet_to_json','product_category','secondary_code','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','get','_id','product\x20edit','findByIdAndUpdate','originalname','3931340KJjSdF','render','findOne','German','/brands/delete/:id','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','toBuffer','/barcode_data','PUnits','/categories','edit\x20Product\x20master','canvas','1333612zMwxLu','attachment;\x20filename=Product_Migration_File.xlsx','English','/products/brands','product_docs','Product_Code','products','PBrands','Alert_QTY','unit\x20data\x20update\x20successfully','/products/categories','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','727281euvLXP','French','PName','Chinese','find','Workbook','redirect','$product_category','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Hindi','post','Arabic\x20(ae)','utils','bind','/select_data','push','public/upload','alertquantity','Products\x20find_data','image','primary_code','Portuguese\x20(BR)','message','findById','edit_product','language','Router','add_product','body','Products','flash','toString','defaultProduct.avif','Brands','Sheets','end','forEach','express','/units/:id','/categories/delete/:id','units','maxStocks','single','\x20unit\x20is\x20add\x20successfully','Maximum_Stocks','/products/view','log','PCat','/view','maxProdPerUnit','product_barcode_products','email','../public/language/languages.json','product_details.product_name','addPage','420426OmkMoy','/print_barcode_filter_search/'];a0_0x2c7f=function(){return _0x572520;};return a0_0x2c7f();}const a0_0xc833b1=a0_0xfc4e;(function(_0x1334c7,_0x43d6fd){const _0x4cbc8f=a0_0xfc4e,_0x1e4717=_0x1334c7();while(!![]){try{const _0x44cc43=-parseInt(_0x4cbc8f(0x161))/0x1*(-parseInt(_0x4cbc8f(0x182))/0x2)+parseInt(_0x4cbc8f(0x1ae))/0x3+parseInt(_0x4cbc8f(0x1a2))/0x4*(-parseInt(_0x4cbc8f(0x14f))/0x5)+-parseInt(_0x4cbc8f(0x121))/0x6+parseInt(_0x4cbc8f(0x165))/0x7+parseInt(_0x4cbc8f(0x17d))/0x8*(-parseInt(_0x4cbc8f(0x144))/0x9)+-parseInt(_0x4cbc8f(0x196))/0xa;if(_0x44cc43===_0x43d6fd)break;else _0x1e4717['push'](_0x1e4717['shift']());}catch(_0x586f5a){_0x1e4717['push'](_0x1e4717['shift']());}}}(a0_0x2c7f,0x41c65));const express=require(a0_0xc833b1(0x1d3)),res=require('express/lib/response'),app=express(),router=express[a0_0xc833b1(0x1c8)](),multer=require(a0_0xc833b1(0x154)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0xc833b1(0x186)),auth=require(a0_0xc833b1(0x12e)),users=require(a0_0xc833b1(0x11e)),excelJS=require(a0_0xc833b1(0x150)),xlsx=require(a0_0xc833b1(0x12c)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0xc833b1(0x1a1)),PDFDocument=require(a0_0xc833b1(0x156));router[a0_0xc833b1(0x191)](a0_0xc833b1(0x19f),auth,async(_0x2ea935,_0x2be457)=>{const _0x58d7f8=a0_0xc833b1;try{const {username:_0x3de687,email:_0x4019d7,role:_0x115909}=_0x2ea935[_0x58d7f8(0x15f)],_0x15a59c=_0x2ea935[_0x58d7f8(0x15f)],_0x7d2541=await profile['findOne']({'email':_0x15a59c[_0x58d7f8(0x11d)]}),_0x110243=await master_shop[_0x58d7f8(0x1b2)]();console['log'](_0x58d7f8(0x181),_0x110243);const _0x38fc51=await categories[_0x58d7f8(0x1b2)]();if(_0x110243[0x0]['language']==_0x58d7f8(0x14b))var _0x3375a7=users[_0x58d7f8(0x1a4)];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]=='Hindi')var _0x3375a7=users[_0x58d7f8(0x1b7)];else{if(_0x110243[0x0]['language']==_0x58d7f8(0x199))var _0x3375a7=users[_0x58d7f8(0x199)];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]==_0x58d7f8(0x125))var _0x3375a7=users['Spanish'];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]=='French')var _0x3375a7=users[_0x58d7f8(0x1af)];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]=='Portuguese\x20(BR)')var _0x3375a7=users['Portuguese'];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]=='Chinese')var _0x3375a7=users['Chinese'];else{if(_0x110243[0x0][_0x58d7f8(0x1c7)]==_0x58d7f8(0x1b9))var _0x3375a7=users[_0x58d7f8(0x162)];}}}}}}}_0x2be457[_0x58d7f8(0x197)](_0x58d7f8(0x139),{'success':_0x2ea935[_0x58d7f8(0x1cc)]('success'),'errors':_0x2ea935[_0x58d7f8(0x1cc)](_0x58d7f8(0x135)),'role':_0x15a59c,'profile':_0x7d2541,'user':_0x38fc51,'master_shop':_0x110243,'language':_0x3375a7});}catch(_0xa140cd){console['log'](_0xa140cd);}}),router['post'](a0_0xc833b1(0x19f),auth,async(_0x4307d6,_0x36e83b)=>{const _0x2dcb41=a0_0xc833b1;try{const {name:_0x30104a,products:_0x5bd52b}=_0x4307d6[_0x2dcb41(0x1ca)],_0x2075ea=new categories({'name':_0x30104a,'products':_0x5bd52b}),_0x57e1f4=await categories[_0x2dcb41(0x198)]({'name':_0x30104a});_0x57e1f4?_0x4307d6['flash'](_0x2dcb41(0x135),_0x30104a+_0x2dcb41(0x190)):_0x4307d6[_0x2dcb41(0x1cc)](_0x2dcb41(0x13b),_0x30104a+'\x20categories\x20is\x20add\x20successfully');const _0x20864a=await _0x2075ea['save']();_0x36e83b[_0x2dcb41(0x1b4)](_0x2dcb41(0x1ac));}catch(_0x4585f5){console[_0x2dcb41(0x118)](_0x4585f5);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x13e),auth,async(_0x309f0e,_0x1807cb)=>{const _0x1ca439=a0_0xc833b1;try{const {username:_0x16c7ef,email:_0x4fcfd0,role:_0x45af9b}=_0x309f0e[_0x1ca439(0x15f)],_0x76a46e=_0x309f0e[_0x1ca439(0x15f)],_0x4fd68b=await profile[_0x1ca439(0x198)]({'email':_0x76a46e[_0x1ca439(0x11d)]}),_0xec6559=await master_shop[_0x1ca439(0x1b2)]();console['log'](_0x1ca439(0x181),_0xec6559);const _0x5bc2c7=_0x309f0e[_0x1ca439(0x176)]['id'];console[_0x1ca439(0x118)](_0x5bc2c7);const _0x169ade=await categories[_0x1ca439(0x1c5)](_0x5bc2c7);if(_0xec6559[0x0][_0x1ca439(0x1c7)]=='English\x20(US)')var _0x236ca7=users[_0x1ca439(0x1a4)];else{if(_0xec6559[0x0]['language']==_0x1ca439(0x1b7))var _0x236ca7=users[_0x1ca439(0x1b7)];else{if(_0xec6559[0x0][_0x1ca439(0x1c7)]==_0x1ca439(0x199))var _0x236ca7=users['German'];else{if(_0xec6559[0x0][_0x1ca439(0x1c7)]=='Spanish')var _0x236ca7=users['Spanish'];else{if(_0xec6559[0x0]['language']==_0x1ca439(0x1af))var _0x236ca7=users[_0x1ca439(0x1af)];else{if(_0xec6559[0x0]['language']==_0x1ca439(0x1c3))var _0x236ca7=users[_0x1ca439(0x178)];else{if(_0xec6559[0x0][_0x1ca439(0x1c7)]==_0x1ca439(0x1b1))var _0x236ca7=users[_0x1ca439(0x1b1)];else{if(_0xec6559[0x0][_0x1ca439(0x1c7)]==_0x1ca439(0x1b9))var _0x236ca7=users[_0x1ca439(0x162)];}}}}}}}_0x1807cb[_0x1ca439(0x197)](_0x1ca439(0x139),{'success':_0x309f0e[_0x1ca439(0x1cc)](_0x1ca439(0x13b)),'errors':_0x309f0e[_0x1ca439(0x1cc)](_0x1ca439(0x135)),'role':_0x76a46e,'profile':_0x4fd68b,'master_shop':_0xec6559,'user':_0x169ade,'language':_0x236ca7});}catch(_0x3fdf44){console['log'](_0x3fdf44);}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x13e),auth,async(_0x4c28bf,_0x94b8e1)=>{const _0x5c4ed5=a0_0xc833b1;try{const _0x221e40=_0x4c28bf[_0x5c4ed5(0x176)]['id'],_0x1dfb46=await categories['findByIdAndUpdate'](_0x221e40,_0x4c28bf[_0x5c4ed5(0x1ca)]);_0x4c28bf[_0x5c4ed5(0x1cc)](_0x5c4ed5(0x13b),''+users[_0x5c4ed5(0x123)]),_0x94b8e1[_0x5c4ed5(0x1b4)](_0x5c4ed5(0x1ac));}catch(_0x56fb72){console['log'](_0x56fb72);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x111),auth,async(_0xa38b79,_0x213761)=>{const _0x5d1295=a0_0xc833b1;try{const _0x49b8c9=_0xa38b79['params']['id'],_0x46ea37=await categories[_0x5d1295(0x145)](_0x49b8c9);_0xa38b79[_0x5d1295(0x1cc)](_0x5d1295(0x13b),'categories\x20data\x20delete\x20successfully'),_0x213761[_0x5d1295(0x1b4)](_0x5d1295(0x1ac));}catch(_0x2968d6){console[_0x5d1295(0x118)](_0x2968d6);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x175),auth,async(_0x153907,_0x233204)=>{const _0xfab226=a0_0xc833b1;try{const {username:_0x3f72d4,email:_0x5e173c,role:_0x643f3c}=_0x153907[_0xfab226(0x15f)],_0x4daa61=_0x153907[_0xfab226(0x15f)],_0x48bb96=await profile[_0xfab226(0x198)]({'email':_0x4daa61[_0xfab226(0x11d)]}),_0x475086=await master_shop[_0xfab226(0x1b2)]();console['log']('master',_0x475086);const _0x142630=await brands['find']();if(_0x475086[0x0][_0xfab226(0x1c7)]=='English\x20(US)')var _0x2eb549=users[_0xfab226(0x1a4)];else{if(_0x475086[0x0][_0xfab226(0x1c7)]=='Hindi')var _0x2eb549=users[_0xfab226(0x1b7)];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x199))var _0x2eb549=users['German'];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x125))var _0x2eb549=users['Spanish'];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x1af))var _0x2eb549=users[_0xfab226(0x1af)];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x1c3))var _0x2eb549=users[_0xfab226(0x178)];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x1b1))var _0x2eb549=users[_0xfab226(0x1b1)];else{if(_0x475086[0x0][_0xfab226(0x1c7)]==_0xfab226(0x1b9))var _0x2eb549=users[_0xfab226(0x162)];}}}}}}}_0x233204[_0xfab226(0x197)](_0xfab226(0x136),{'success':_0x153907[_0xfab226(0x1cc)](_0xfab226(0x13b)),'errors':_0x153907[_0xfab226(0x1cc)](_0xfab226(0x135)),'role':_0x4daa61,'profile':_0x48bb96,'master_shop':_0x475086,'user':_0x142630,'language':_0x2eb549});}catch(_0x43bdde){console[_0xfab226(0x118)](_0x43bdde);}}),router['post'](a0_0xc833b1(0x175),auth,async(_0x5c62bb,_0x54ac10)=>{const _0x48577d=a0_0xc833b1;try{const {name:_0x317c6b,products:_0x54322a}=_0x5c62bb[_0x48577d(0x1ca)],_0x490107=new brands({'name':_0x317c6b,'products':_0x54322a}),_0x2791c3=await brands[_0x48577d(0x198)]({'name':_0x317c6b});_0x2791c3?_0x5c62bb[_0x48577d(0x1cc)]('errors',_0x317c6b+_0x48577d(0x1ad)):_0x5c62bb[_0x48577d(0x1cc)]('success',_0x317c6b+'\x20brand\x20is\x20add\x20successfully');const _0x29a98e=await _0x490107[_0x48577d(0x15d)]();_0x54ac10['redirect']('/products/brands');}catch(_0x27b5e6){console['log'](_0x27b5e6);}}),router[a0_0xc833b1(0x191)]('/brands/:id',auth,async(_0x10597a,_0xcdce51)=>{const _0x26b5e3=a0_0xc833b1;try{const {username:_0x394882,email:_0x51cd15,role:_0x5e2e21}=_0x10597a[_0x26b5e3(0x15f)],_0x5ed69f=_0x10597a[_0x26b5e3(0x15f)],_0x109702=await profile[_0x26b5e3(0x198)]({'email':_0x5ed69f[_0x26b5e3(0x11d)]}),_0x1dbf25=await master_shop[_0x26b5e3(0x1b2)]();console['log']('master',_0x1dbf25);const _0x5e3813=_0x10597a['params']['id'];console['log'](_0x5e3813);const _0x1279de=await brands['findById'](_0x5e3813);if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]=='English\x20(US)')var _0x6fd173=users['English'];else{if(_0x1dbf25[0x0]['language']==_0x26b5e3(0x1b7))var _0x6fd173=users[_0x26b5e3(0x1b7)];else{if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]=='German')var _0x6fd173=users[_0x26b5e3(0x199)];else{if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]==_0x26b5e3(0x125))var _0x6fd173=users[_0x26b5e3(0x125)];else{if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]=='French')var _0x6fd173=users['French'];else{if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]==_0x26b5e3(0x1c3))var _0x6fd173=users[_0x26b5e3(0x178)];else{if(_0x1dbf25[0x0]['language']==_0x26b5e3(0x1b1))var _0x6fd173=users[_0x26b5e3(0x1b1)];else{if(_0x1dbf25[0x0][_0x26b5e3(0x1c7)]==_0x26b5e3(0x1b9))var _0x6fd173=users[_0x26b5e3(0x162)];}}}}}}}_0xcdce51[_0x26b5e3(0x197)](_0x26b5e3(0x136),{'success':_0x10597a['flash']('success'),'errors':_0x10597a['flash'](_0x26b5e3(0x135)),'role':_0x5ed69f,'profile':_0x109702,'master_shop':_0x1dbf25,'user':_0x1279de,'language':_0x6fd173});}catch(_0x1f2644){console[_0x26b5e3(0x118)](_0x1f2644);}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x173),auth,async(_0x11baec,_0x52c041)=>{const _0x1c8d65=a0_0xc833b1;try{const _0x4ef12d=_0x11baec[_0x1c8d65(0x176)]['id'],_0x322b10=await brands[_0x1c8d65(0x194)](_0x4ef12d,_0x11baec['body']);_0x11baec[_0x1c8d65(0x1cc)]('success',_0x1c8d65(0x18c)),_0x52c041['redirect'](_0x1c8d65(0x1a5));}catch(_0xc61cc9){console[_0x1c8d65(0x118)](_0xc61cc9);}}),router['get'](a0_0xc833b1(0x19a),auth,async(_0x37eb50,_0x424ab8)=>{const _0x149faf=a0_0xc833b1;try{const _0x417b2c=_0x37eb50[_0x149faf(0x176)]['id'],_0xcb0d42=await brands[_0x149faf(0x145)](_0x417b2c);_0x37eb50[_0x149faf(0x1cc)](_0x149faf(0x13b),_0x149faf(0x132)),_0x424ab8[_0x149faf(0x1b4)]('/products/brands');}catch(_0x201646){console[_0x149faf(0x118)](_0x201646);}}),router['get']('/units',auth,async(_0x39f235,_0x4ec7d4)=>{const _0xa5d5ea=a0_0xc833b1;try{const {username:_0x2804e6,email:_0x1a81fc,role:_0x19559d}=_0x39f235[_0xa5d5ea(0x15f)],_0x490298=_0x39f235[_0xa5d5ea(0x15f)],_0x53e747=await profile[_0xa5d5ea(0x198)]({'email':_0x490298[_0xa5d5ea(0x11d)]}),_0x1d0f5a=await master_shop[_0xa5d5ea(0x1b2)]();console['log'](_0xa5d5ea(0x181),_0x1d0f5a);const _0x55c417=await units[_0xa5d5ea(0x1b2)]();if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]==_0xa5d5ea(0x14b))var _0x178ee4=users[_0xa5d5ea(0x1a4)];else{if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]==_0xa5d5ea(0x1b7))var _0x178ee4=users[_0xa5d5ea(0x1b7)];else{if(_0x1d0f5a[0x0]['language']==_0xa5d5ea(0x199))var _0x178ee4=users[_0xa5d5ea(0x199)];else{if(_0x1d0f5a[0x0]['language']==_0xa5d5ea(0x125))var _0x178ee4=users[_0xa5d5ea(0x125)];else{if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]=='French')var _0x178ee4=users[_0xa5d5ea(0x1af)];else{if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]==_0xa5d5ea(0x1c3))var _0x178ee4=users[_0xa5d5ea(0x178)];else{if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]==_0xa5d5ea(0x1b1))var _0x178ee4=users[_0xa5d5ea(0x1b1)];else{if(_0x1d0f5a[0x0][_0xa5d5ea(0x1c7)]==_0xa5d5ea(0x1b9))var _0x178ee4=users[_0xa5d5ea(0x162)];}}}}}}}_0x4ec7d4['render'](_0xa5d5ea(0x112),{'success':_0x39f235[_0xa5d5ea(0x1cc)](_0xa5d5ea(0x13b)),'errors':_0x39f235[_0xa5d5ea(0x1cc)](_0xa5d5ea(0x135)),'role':_0x490298,'profile':_0x53e747,'master_shop':_0x1d0f5a,'user':_0x55c417,'language':_0x178ee4});}catch(_0x5d10bd){console[_0xa5d5ea(0x118)](_0x5d10bd);}}),router[a0_0xc833b1(0x1b8)]('/units',auth,async(_0x55cd1d,_0x270274)=>{const _0x532ed3=a0_0xc833b1;try{const {name:_0x3cade3,secondary_unit:_0xf4f0a0,products:_0x19b331}=_0x55cd1d[_0x532ed3(0x1ca)],_0x5dd879=new units({'name':_0x3cade3,'secondary_unit':_0xf4f0a0,'products':_0x19b331}),_0x1924b0=await units[_0x532ed3(0x198)]({'name':_0x3cade3});_0x1924b0?_0x55cd1d[_0x532ed3(0x1cc)]('errors',_0x3cade3+_0x532ed3(0x1b6)):_0x55cd1d[_0x532ed3(0x1cc)]('success',_0x3cade3+_0x532ed3(0x115));const _0x1e79eb=await _0x5dd879[_0x532ed3(0x15d)]();_0x270274[_0x532ed3(0x1b4)](_0x532ed3(0x18a));}catch(_0x1342d8){console[_0x532ed3(0x118)](_0x1342d8);}}),router['get'](a0_0xc833b1(0x1d4),auth,async(_0x18892e,_0x1bfeb9)=>{const _0x3cb16f=a0_0xc833b1;try{const {username:_0x136751,email:_0x53e419,role:_0x5f586b}=_0x18892e[_0x3cb16f(0x15f)],_0x5ce8e5=_0x18892e[_0x3cb16f(0x15f)],_0x55d412=await profile[_0x3cb16f(0x198)]({'email':_0x5ce8e5[_0x3cb16f(0x11d)]}),_0x44fd10=await master_shop[_0x3cb16f(0x1b2)]();console[_0x3cb16f(0x118)](_0x3cb16f(0x181),_0x44fd10);const _0x8bced5=_0x18892e[_0x3cb16f(0x176)]['id'],_0xfa9d20=await units[_0x3cb16f(0x1c5)](_0x8bced5);if(_0x44fd10[0x0][_0x3cb16f(0x1c7)]=='English\x20(US)')var _0x3e5cdd=users[_0x3cb16f(0x1a4)];else{if(_0x44fd10[0x0]['language']==_0x3cb16f(0x1b7))var _0x3e5cdd=users[_0x3cb16f(0x1b7)];else{if(_0x44fd10[0x0][_0x3cb16f(0x1c7)]==_0x3cb16f(0x199))var _0x3e5cdd=users[_0x3cb16f(0x199)];else{if(_0x44fd10[0x0][_0x3cb16f(0x1c7)]==_0x3cb16f(0x125))var _0x3e5cdd=users[_0x3cb16f(0x125)];else{if(_0x44fd10[0x0][_0x3cb16f(0x1c7)]=='French')var _0x3e5cdd=users[_0x3cb16f(0x1af)];else{if(_0x44fd10[0x0][_0x3cb16f(0x1c7)]==_0x3cb16f(0x1c3))var _0x3e5cdd=users['Portuguese'];else{if(_0x44fd10[0x0]['language']==_0x3cb16f(0x1b1))var _0x3e5cdd=users[_0x3cb16f(0x1b1)];else{if(_0x44fd10[0x0]['language']==_0x3cb16f(0x1b9))var _0x3e5cdd=users[_0x3cb16f(0x162)];}}}}}}}_0x1bfeb9[_0x3cb16f(0x197)](_0x3cb16f(0x112),{'success':_0x18892e[_0x3cb16f(0x1cc)](_0x3cb16f(0x13b)),'errors':_0x18892e[_0x3cb16f(0x1cc)](_0x3cb16f(0x135)),'role':_0x5ce8e5,'profile':_0x55d412,'master_shop':_0x44fd10,'user':_0xfa9d20,'language':_0x3e5cdd});}catch(_0x3d1e1c){console['log'](_0x3d1e1c);}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x1d4),auth,async(_0x154323,_0x13dac8)=>{const _0x2031fe=a0_0xc833b1;try{const _0x2f37f3=_0x154323['params']['id'],_0xf7da6c=await units[_0x2031fe(0x194)](_0x2f37f3,_0x154323['body']);_0x154323[_0x2031fe(0x1cc)](_0x2031fe(0x13b),_0x2031fe(0x1ab)),_0x13dac8['redirect'](_0x2031fe(0x18a));}catch(_0x3e2ff3){console[_0x2031fe(0x118)](_0x3e2ff3);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x124),auth,async(_0x212f1f,_0x44e10d)=>{const _0x3f1ae3=a0_0xc833b1;try{const _0x33e2f2=_0x212f1f['params']['id'],_0x5e2f9=await units[_0x3f1ae3(0x145)](_0x33e2f2);_0x212f1f[_0x3f1ae3(0x1cc)](_0x3f1ae3(0x13b),_0x3f1ae3(0x129)),_0x44e10d['redirect'](_0x3f1ae3(0x18a));}catch(_0x1e2574){console[_0x3f1ae3(0x118)](_0x1e2574);}});const storage=multer[a0_0xc833b1(0x12b)]({'destination':(_0x2d4081,_0x38c5f8,_0x57afa1)=>{const _0x342fbc=a0_0xc833b1;_0x57afa1(null,_0x342fbc(0x1be));},'filename':(_0x41afb7,_0x54585d,_0x2b86b8)=>{const _0x544f08=a0_0xc833b1;_0x2b86b8(null,Date['now']()+_0x54585d[_0x544f08(0x195)]);}}),upload=multer({'storage':storage});router[a0_0xc833b1(0x191)](a0_0xc833b1(0x11a),auth,async(_0xa6663b,_0x232843)=>{const _0xd16649=a0_0xc833b1;try{const {username:_0x2071f3,email:_0x426b41,role:_0x2f9e76}=_0xa6663b['user'],_0x436644=_0xa6663b[_0xd16649(0x15f)],_0xc837d7=await profile[_0xd16649(0x198)]({'email':_0x436644[_0xd16649(0x11d)]}),_0x39d870={'year':'numeric','month':_0xd16649(0x16e),'day':_0xd16649(0x183)},_0x3730e3=await master_shop[_0xd16649(0x1b2)]();console[_0xd16649(0x118)](_0xd16649(0x137),_0x3730e3);const _0x19b069=await product[_0xd16649(0x1b2)]();console[_0xd16649(0x118)](_0xd16649(0x1c0),_0x19b069);const _0x80c48a=await warehouse['aggregate']([{'$unwind':_0xd16649(0x146)},{'$lookup':{'from':_0xd16649(0x1a8),'localField':_0xd16649(0x11f),'foreignField':_0xd16649(0x167),'as':_0xd16649(0x1a6)}},{'$unwind':_0xd16649(0x12a)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0xd16649(0x17c)}},{'$group':{'_id':_0xd16649(0x16a),'product_stock':{'$sum':'$product_stock'}}}]);console[_0xd16649(0x118)](_0xd16649(0x17e),_0x80c48a),_0x80c48a[_0xd16649(0x1d2)](_0x5eddd8=>{const _0x2d577b=_0x19b069['map'](_0x5984a0=>{const _0xd5044b=a0_0xfc4e;_0x5984a0[_0xd5044b(0x167)]==_0x5eddd8[_0xd5044b(0x192)]&&(_0x5984a0[_0xd5044b(0x12f)]=parseInt(_0x5984a0[_0xd5044b(0x12f)])+parseInt(_0x5eddd8['product_stock']));});}),console[_0xd16649(0x118)]('Products\x20find_data',_0x19b069);if(_0x3730e3[0x0][_0xd16649(0x1c7)]=='English\x20(US)')var _0x3b56c0=users[_0xd16649(0x1a4)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]=='Hindi')var _0x3b56c0=users[_0xd16649(0x1b7)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]==_0xd16649(0x199))var _0x3b56c0=users[_0xd16649(0x199)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]==_0xd16649(0x125))var _0x3b56c0=users[_0xd16649(0x125)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]=='French')var _0x3b56c0=users['French'];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]==_0xd16649(0x1c3))var _0x3b56c0=users[_0xd16649(0x178)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]==_0xd16649(0x1b1))var _0x3b56c0=users[_0xd16649(0x1b1)];else{if(_0x3730e3[0x0][_0xd16649(0x1c7)]==_0xd16649(0x1b9))var _0x3b56c0=users[_0xd16649(0x162)];}}}}}}}_0x232843[_0xd16649(0x197)](_0xd16649(0x1a8),{'success':_0xa6663b['flash'](_0xd16649(0x13b)),'errors':_0xa6663b[_0xd16649(0x1cc)](_0xd16649(0x135)),'alldata':_0x19b069,'profile':_0xc837d7,'master_shop':_0x3730e3,'role':_0x436644,'product_stock':_0x80c48a,'language':_0x3b56c0});}catch(_0xec31d9){console[_0xd16649(0x118)](_0xec31d9);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x16f),auth,async(_0x35fda6,_0x2c09ea)=>{const _0x1517ad=a0_0xc833b1;try{const {username:_0x55e3d4,email:_0x547f1a,role:_0xa833c5}=_0x35fda6['user'],_0xa3745e=_0x35fda6[_0x1517ad(0x15f)],_0x4f1edb=await profile[_0x1517ad(0x198)]({'email':_0xa3745e[_0x1517ad(0x11d)]}),_0x1ed07c=await master_shop[_0x1517ad(0x1b2)]();console[_0x1517ad(0x118)](_0x1517ad(0x181),_0x1ed07c);const _0x3fefb8=await categories['find']({}),_0x4fd05b=await brands[_0x1517ad(0x1b2)]({}),_0xfee6a0=await units[_0x1517ad(0x1b2)]({}),_0x50a3bf=await warehouse[_0x1517ad(0x1b2)]({'status':_0x1517ad(0x127)});if(_0x1ed07c[0x0][_0x1517ad(0x1c7)]==_0x1517ad(0x14b))var _0x3c6c08=users[_0x1517ad(0x1a4)];else{if(_0x1ed07c[0x0]['language']==_0x1517ad(0x1b7))var _0x3c6c08=users[_0x1517ad(0x1b7)];else{if(_0x1ed07c[0x0][_0x1517ad(0x1c7)]==_0x1517ad(0x199))var _0x3c6c08=users['German'];else{if(_0x1ed07c[0x0][_0x1517ad(0x1c7)]==_0x1517ad(0x125))var _0x3c6c08=users[_0x1517ad(0x125)];else{if(_0x1ed07c[0x0][_0x1517ad(0x1c7)]=='French')var _0x3c6c08=users[_0x1517ad(0x1af)];else{if(_0x1ed07c[0x0]['language']==_0x1517ad(0x1c3))var _0x3c6c08=users[_0x1517ad(0x178)];else{if(_0x1ed07c[0x0]['language']=='Chinese')var _0x3c6c08=users[_0x1517ad(0x1b1)];else{if(_0x1ed07c[0x0]['language']==_0x1517ad(0x1b9))var _0x3c6c08=users[_0x1517ad(0x162)];}}}}}}}_0x2c09ea[_0x1517ad(0x197)](_0x1517ad(0x1c9),{'success':_0x35fda6['flash'](_0x1517ad(0x13b)),'errors':_0x35fda6[_0x1517ad(0x1cc)]('errors'),'role':_0xa3745e,'profile':_0x4f1edb,'categories':_0x3fefb8,'brands':_0x4fd05b,'master_shop':_0x1ed07c,'units':_0xfee6a0,'language':_0x3c6c08,'find_data':_0x50a3bf});}catch(_0x24e304){console[_0x1517ad(0x118)](_0x24e304);}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x16f),auth,upload[a0_0xc833b1(0x114)](a0_0xc833b1(0x1c1)),async(_0xc307f7,_0x518a0e)=>{const _0x15d435=a0_0xc833b1;try{const {name:_0x31acdc,category:_0x50d704,brand:_0x4c8e8d,unit:_0x5f98dd,alertquantity:_0x4cd45b,stock:_0x1f46a8,product_code:_0x58b0f6,warehouse:_0x1dceac,primary_ItemCode:_0x244ae3,second_ItemCode:_0x3fe9b5,second_unit:_0x5c4d7e,maxPerUnit:_0xd5f055,MaxPerProduct:_0x4cc222}=_0xc307f7['body'],_0x1bc258=_0xc307f7[_0x15d435(0x140)]?.[_0x15d435(0x163)]||'defaultProduct.avif',_0x36f662=new product({'image':_0x1bc258,'name':_0x31acdc,'category':_0x50d704,'brand':_0x4c8e8d,'unit':_0x5f98dd,'alertquantity':_0x4cd45b,'stock':_0x1f46a8,'product_code':_0x58b0f6,'warehouse':_0x1dceac,'primary_code':_0x244ae3,'secondary_code':_0x3fe9b5,'second_unit':_0x5c4d7e,'maxStocks':_0x4cc222,'maxProdPerUnit':_0xd5f055}),_0x46e69e=await _0x36f662[_0x15d435(0x15d)](),_0x53a860=await categories['findOne']({'name':_0x50d704});_0x53a860[_0x15d435(0x1a8)]=parseInt(_0x53a860[_0x15d435(0x1a8)])+0x1,await _0x53a860['save']();const _0x2c8807=await brands[_0x15d435(0x198)]({'name':_0x4c8e8d});_0x2c8807[_0x15d435(0x1a8)]=parseInt(_0x2c8807[_0x15d435(0x1a8)])+0x1,await _0x2c8807[_0x15d435(0x15d)]();const _0x52fe21=await units['findOne']({'name':_0x5f98dd});_0x52fe21[_0x15d435(0x1a8)]=parseInt(_0x52fe21[_0x15d435(0x1a8)])+0x1,await _0x52fe21[_0x15d435(0x15d)](),_0xc307f7[_0x15d435(0x1cc)](_0x15d435(0x13b),_0x15d435(0x13a)),_0x518a0e[_0x15d435(0x1b4)](_0x15d435(0x117));}catch(_0x15a3c9){console[_0x15d435(0x118)](_0x15a3c9);}}),router[a0_0xc833b1(0x191)](a0_0xc833b1(0x15b),auth,async(_0x1ebb97,_0x485fcb)=>{const _0x4a58d5=a0_0xc833b1;try{const {username:_0x193c6e,email:_0x1eb6f6,role:_0x16b010}=_0x1ebb97[_0x4a58d5(0x15f)],_0x12ef05=_0x1ebb97[_0x4a58d5(0x15f)],_0x2a311e=await profile[_0x4a58d5(0x198)]({'email':_0x12ef05[_0x4a58d5(0x11d)]}),_0x515d4a=await master_shop[_0x4a58d5(0x1b2)]();console[_0x4a58d5(0x118)](_0x4a58d5(0x1a0),_0x515d4a);const _0x24c8ab=_0x1ebb97['params']['id'],_0x870c38=await product[_0x4a58d5(0x1c5)](_0x24c8ab),_0x504f44=await categories[_0x4a58d5(0x1b2)]({}),_0x2c0650=await brands[_0x4a58d5(0x1b2)]({}),_0x40cdc6=await units[_0x4a58d5(0x1b2)]({}),_0x45cff2=await warehouse[_0x4a58d5(0x1b2)]({'status':_0x4a58d5(0x127)}),_0x4c2e86=await units[_0x4a58d5(0x152)]([{'$group':{'_id':_0x4a58d5(0x187),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x515d4a[0x0][_0x4a58d5(0x1c7)]=='English\x20(US)')var _0x19bb2c=users[_0x4a58d5(0x1a4)];else{if(_0x515d4a[0x0]['language']==_0x4a58d5(0x1b7))var _0x19bb2c=users[_0x4a58d5(0x1b7)];else{if(_0x515d4a[0x0][_0x4a58d5(0x1c7)]==_0x4a58d5(0x199))var _0x19bb2c=users[_0x4a58d5(0x199)];else{if(_0x515d4a[0x0][_0x4a58d5(0x1c7)]==_0x4a58d5(0x125))var _0x19bb2c=users[_0x4a58d5(0x125)];else{if(_0x515d4a[0x0]['language']=='French')var _0x19bb2c=users[_0x4a58d5(0x1af)];else{if(_0x515d4a[0x0]['language']=='Portuguese\x20(BR)')var _0x19bb2c=users[_0x4a58d5(0x178)];else{if(_0x515d4a[0x0][_0x4a58d5(0x1c7)]==_0x4a58d5(0x1b1))var _0x19bb2c=users[_0x4a58d5(0x1b1)];else{if(_0x515d4a[0x0]['language']==_0x4a58d5(0x1b9))var _0x19bb2c=users['Arabic'];}}}}}}}_0x485fcb['render'](_0x4a58d5(0x1c6),{'success':_0x1ebb97[_0x4a58d5(0x1cc)](_0x4a58d5(0x13b)),'errors':_0x1ebb97['flash']('errors'),'role':_0x12ef05,'profile':_0x2a311e,'alldata':_0x870c38,'categories':_0x504f44,'brands':_0x2c0650,'master_shop':_0x515d4a,'units':_0x40cdc6,'secondunit':_0x4c2e86,'find_data':_0x45cff2,'language':_0x19bb2c});}catch(_0x108a39){console[_0x4a58d5(0x118)](_0x108a39);}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x15b),auth,upload[a0_0xc833b1(0x114)](a0_0xc833b1(0x1c1)),async(_0xeb288b,_0x1f9bbc)=>{const _0x5d363b=a0_0xc833b1;try{console[_0x5d363b(0x118)](_0x5d363b(0x134));const _0x2ce790=_0xeb288b[_0x5d363b(0x176)]['id'],_0x21d280=await product['findById'](_0x2ce790),{image:_0x35d360,name:_0x581aa6,category:_0x354d45,brand:_0x4971d1,sku:_0x47b7bd,unit:_0x37dd9a,alertquantity:_0x5919ac,product_code:_0x7e708,warehouse:_0x1cc2e5,primary_ItemCode:_0x465b91,second_ItemCode:_0x5b3cd6,second_unit:_0x4d8a9a,maxPerUnit:_0x462f15,MaxPerProduct:_0x2a54a5,prod_catdata:_0x33a895}=_0xeb288b[_0x5d363b(0x1ca)];_0xeb288b[_0x5d363b(0x140)]&&(_0x21d280[_0x5d363b(0x1c1)]=_0xeb288b[_0x5d363b(0x140)][_0x5d363b(0x163)]);_0x21d280[_0x5d363b(0x167)]=_0x581aa6,_0x21d280[_0x5d363b(0x180)]=_0x354d45,_0x21d280[_0x5d363b(0x15a)]=_0x4971d1,_0x21d280['sku']=_0x47b7bd,_0x21d280[_0x5d363b(0x159)]=_0x37dd9a,_0x21d280[_0x5d363b(0x1bf)]=_0x5919ac,_0x21d280[_0x5d363b(0x174)]=_0x7e708,_0x21d280[_0x5d363b(0x148)]=_0x1cc2e5,_0x21d280[_0x5d363b(0x1c2)]=_0x465b91,_0x21d280[_0x5d363b(0x18f)]=_0x5b3cd6,_0x21d280['secondary_unit']=_0x4d8a9a,_0x21d280[_0x5d363b(0x113)]=_0x2a54a5,_0x21d280[_0x5d363b(0x11b)]=_0x462f15,_0x21d280[_0x5d363b(0x18e)]=_0x33a895;const _0x1645ba=await _0x21d280[_0x5d363b(0x15d)]();console[_0x5d363b(0x118)](_0x5d363b(0x193),_0x21d280),_0xeb288b[_0x5d363b(0x1cc)]('success','product\x20update\x20successfully'),_0x1f9bbc[_0x5d363b(0x1b4)]('/products/view');}catch(_0x3be247){console['log'](_0x3be247);}}),router['get'](a0_0xc833b1(0x143),auth,async(_0x40311b,_0x357b48)=>{const _0x247399=a0_0xc833b1;try{const {username:_0x18f175,email:_0x4ae20f,role:_0x41d5d6}=_0x40311b['user'],_0x13d1eb=_0x40311b[_0x247399(0x15f)],_0x4c1992=await profile['findOne']({'email':_0x13d1eb[_0x247399(0x11d)]}),_0x24ff91=await master_shop[_0x247399(0x1b2)]();console[_0x247399(0x118)](_0x247399(0x147),_0x24ff91);const _0x54f97c=_0x40311b[_0x247399(0x176)]['id'],_0x214517=await product[_0x247399(0x1c5)](_0x54f97c);console['log'](_0x247399(0x14e),_0x214517);if(_0x24ff91[0x0][_0x247399(0x1c7)]==_0x247399(0x14b))var _0xc04f35=users[_0x247399(0x1a4)];else{if(_0x24ff91[0x0][_0x247399(0x1c7)]==_0x247399(0x1b7))var _0xc04f35=users[_0x247399(0x1b7)];else{if(_0x24ff91[0x0]['language']=='German')var _0xc04f35=users['German'];else{if(_0x24ff91[0x0][_0x247399(0x1c7)]=='Spanish')var _0xc04f35=users[_0x247399(0x125)];else{if(_0x24ff91[0x0][_0x247399(0x1c7)]==_0x247399(0x1af))var _0xc04f35=users[_0x247399(0x1af)];else{if(_0x24ff91[0x0]['language']==_0x247399(0x1c3))var _0xc04f35=users['Portuguese'];else{if(_0x24ff91[0x0]['language']==_0x247399(0x1b1))var _0xc04f35=users['Chinese'];else{if(_0x24ff91[0x0][_0x247399(0x1c7)]==_0x247399(0x1b9))var _0xc04f35=users['Arabic'];}}}}}}}_0x357b48['render']('product_barcode',{'success':_0x40311b[_0x247399(0x1cc)](_0x247399(0x13b)),'errors':_0x40311b[_0x247399(0x1cc)]('errors'),'role':_0x13d1eb,'profile':_0x4c1992,'alldata':_0x214517,'master_shop':_0x24ff91,'language':_0xc04f35});}catch(_0x5c9613){console['log'](_0x5c9613);}}),router['get']('/products_export_migrate_file',auth,async(_0x4fd778,_0x1bc54c)=>{const _0x23332e=a0_0xc833b1;try{const _0x1b6017=new excelJS[(_0x23332e(0x1b3))](),_0x466354=_0x1b6017[_0x23332e(0x126)](_0x23332e(0x1cb));return _0x466354[_0x23332e(0x169)]=[{'header':_0x23332e(0x188),'key':_0x23332e(0x1b0),'width':0xa},{'header':'Brands','key':_0x23332e(0x1a9),'width':0xa},{'header':_0x23332e(0x14c),'key':_0x23332e(0x19e),'width':0xa},{'header':_0x23332e(0x149),'key':_0x23332e(0x157),'width':0xa},{'header':_0x23332e(0x164),'key':_0x23332e(0x160),'width':0xa},{'header':_0x23332e(0x128),'key':_0x23332e(0x179),'width':0xa},{'header':'Secondary_Code','key':_0x23332e(0x179),'width':0xa},{'header':_0x23332e(0x1a7),'key':_0x23332e(0x179),'width':0xa},{'header':_0x23332e(0x185),'key':_0x23332e(0x119),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x23332e(0x116),'key':_0x23332e(0x16d),'width':0xa},{'header':'Products_category','key':'Prod_Cat','width':0xa}],_0x1bc54c[_0x23332e(0x184)]('Content-Type',_0x23332e(0x19b)),_0x1bc54c['setHeader'](_0x23332e(0x166),_0x23332e(0x1a3)),_0x1b6017[_0x23332e(0x12c)][_0x23332e(0x13d)](_0x1bc54c)[_0x23332e(0x13f)](()=>{const _0x3dd10a=_0x23332e;_0x1bc54c[_0x3dd10a(0x15e)](0xc8);});}catch(_0x1569e0){_0x1bc54c[_0x23332e(0x15e)](0x190)[_0x23332e(0x153)](_0x1569e0);}});const storage1=multer[a0_0xc833b1(0x12b)]({'destination':(_0x967d36,_0x37169a,_0x13efe4)=>{_0x13efe4(null,'public/Migration');},'filename':(_0x4a992f,_0x364cd5,_0x5ec14c)=>{const _0x925e0b=a0_0xc833b1;_0x5ec14c(null,Date[_0x925e0b(0x170)]()+_0x364cd5[_0x925e0b(0x195)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0xc833b1(0x1b8)]('/products_import_migrate_file',auth,uploadMigrate[a0_0xc833b1(0x114)](a0_0xc833b1(0x142)),async(_0x11260b,_0x1c5cdd)=>{const _0x21b00a=a0_0xc833b1,_0x837090=_0x11260b['file'][_0x21b00a(0x163)],_0x39734d=await xlsx[_0x21b00a(0x12d)](_0x21b00a(0x189)+_0x837090);let _0x24af8b=_0x39734d[_0x21b00a(0x16b)],_0x6a92c1=xlsx[_0x21b00a(0x1ba)][_0x21b00a(0x18d)](_0x39734d[_0x21b00a(0x1d0)][_0x24af8b[0x0]]);for(const _0x35e7d2 of _0x6a92c1){const _0x37ae87=_0x35e7d2[_0x21b00a(0x188)],_0x1e97b5=_0x35e7d2['Brands'],_0x6547b4=_0x35e7d2[_0x21b00a(0x14c)],_0x56cf20=_0x35e7d2[_0x21b00a(0x149)],_0x508815=_0x35e7d2[_0x21b00a(0x1a7)],_0x48dfd8=_0x35e7d2[_0x21b00a(0x185)],_0x4517d3=_0x35e7d2[_0x21b00a(0x1aa)],_0x20a01e=_0x35e7d2[_0x21b00a(0x128)],_0x4f19b9=_0x35e7d2[_0x21b00a(0x172)],_0x490c31=_0x35e7d2[_0x21b00a(0x116)],_0x5ab288=_0x35e7d2[_0x21b00a(0x164)],_0x215619=_0x35e7d2['Products_category'];try{let _0x2c6947=await categories[_0x21b00a(0x198)]({'name':_0x48dfd8});if(!_0x2c6947){const _0x3211a2=new categories({'name':_0x48dfd8,'products':'0'});_0x2c6947=await _0x3211a2[_0x21b00a(0x15d)]();}let _0x41cd77=await brands[_0x21b00a(0x198)]({'name':_0x1e97b5});if(!_0x41cd77){const _0x15d12a=new brands({'name':_0x1e97b5,'products':'0'});_0x41cd77=await _0x15d12a[_0x21b00a(0x15d)]();}let _0x5d3931=await units[_0x21b00a(0x198)]({'name':_0x6547b4,'secondary_unit':_0x56cf20});if(!_0x5d3931){const _0x2ede2b=new units({'name':_0x6547b4,'secondary_unit':_0x56cf20,'products':'0'});_0x5d3931=await _0x2ede2b[_0x21b00a(0x15d)]();}const _0x158468=await product[_0x21b00a(0x1b2)]({'name':_0x37ae87,'category':_0x2c6947[_0x21b00a(0x167)],'brand':_0x41cd77[_0x21b00a(0x167)],'secondary_unit':_0x5d3931[_0x21b00a(0x171)],'product_code':_0x508815});console[_0x21b00a(0x118)](_0x158468[_0x21b00a(0x17f)]+_0x21b00a(0x18b)+_0x2c6947['name']+_0x21b00a(0x18b)+_0x41cd77[_0x21b00a(0x167)]+_0x21b00a(0x18b)+_0x5d3931[_0x21b00a(0x171)]+_0x21b00a(0x18b)+_0x508815+_0x21b00a(0x18b)+_0x37ae87);if(_0x158468[_0x21b00a(0x17f)]===0x0){const _0x35f380=new product({'image':_0x21b00a(0x1ce),'name':_0x37ae87,'category':_0x2c6947['name'],'brand':_0x41cd77['name'],'unit':_0x5d3931[_0x21b00a(0x167)],'alertquantity':_0x4517d3,'product_code':_0x508815,'secondary_unit':_0x5d3931[_0x21b00a(0x171)],'primary_code':_0x20a01e,'secondary_code':_0x4f19b9,'maxStocks':_0x490c31,'maxProdPerUnit':_0x5ab288,'product_category':_0x215619}),_0x1d767b=await _0x35f380['save']();_0x2c6947[_0x21b00a(0x1a8)]=parseInt(_0x2c6947['products'])+0x1,await _0x2c6947[_0x21b00a(0x15d)](),_0x41cd77['products']=parseInt(_0x41cd77['products'])+0x1,await _0x41cd77[_0x21b00a(0x15d)](),_0x5d3931[_0x21b00a(0x1a8)]=parseInt(_0x5d3931['products'])+0x1,await _0x5d3931[_0x21b00a(0x15d)](),_0x11260b[_0x21b00a(0x1cc)](_0x21b00a(0x13b),_0x37ae87+'\x20added\x20successfully');}else{console[_0x21b00a(0x118)](_0x158468[0x0]);const _0x2d9bb8=_0x158468[0x0];_0x2d9bb8[_0x21b00a(0x180)]=_0x2c6947[_0x21b00a(0x167)],_0x2d9bb8[_0x21b00a(0x15a)]=_0x41cd77['name'],_0x2d9bb8['unit']=_0x5d3931[_0x21b00a(0x167)],_0x2d9bb8['alertquantity']=_0x4517d3,_0x2d9bb8[_0x21b00a(0x174)]=_0x508815,_0x2d9bb8[_0x21b00a(0x171)]=_0x5d3931[_0x21b00a(0x171)],_0x2d9bb8[_0x21b00a(0x1c2)]=_0x20a01e,_0x2d9bb8[_0x21b00a(0x18f)]=_0x4f19b9,_0x2d9bb8[_0x21b00a(0x113)]=_0x490c31,_0x2d9bb8['maxProdPerUnit']=_0x5ab288,_0x2d9bb8[_0x21b00a(0x18e)]=_0x215619;const _0x500593=await _0x2d9bb8[_0x21b00a(0x15d)]();_0x11260b['flash'](_0x21b00a(0x13b),_0x500593['name']+'\x20Edit\x20Successfully');}}catch(_0x3c4734){_0x1c5cdd[_0x21b00a(0x15e)](0x1f4)['json']({'proderror':_0x3c4734['message'],'aproduct':_0x37ae87});}}_0x1c5cdd[_0x21b00a(0x1b4)](_0x21b00a(0x117));}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x1bc),auth,async(_0x50226e,_0x6bbd6b)=>{const _0x3924b7=a0_0xc833b1;try{console['log'](_0x50226e[_0x3924b7(0x1ca)]);const {data_cateory:_0x45efea,datachoose:_0x468626}=_0x50226e['body'];var _0x470347;if(_0x468626==_0x3924b7(0x138))_0x470347=await product[_0x3924b7(0x152)]([{'$group':{'_id':_0x3924b7(0x1b5)}}]);else{if(_0x468626==_0x3924b7(0x136))_0x470347=await product['aggregate']([{'$match':{'product_category':_0x45efea}},{'$group':{'_id':'$brand'}}]);else _0x468626=='categ'&&(_0x470347=await product[_0x3924b7(0x152)]([{'$match':{'product_category':_0x45efea}},{'$group':{'_id':_0x3924b7(0x168)}}]));}_0x6bbd6b[_0x3924b7(0x133)](_0x470347);}catch(_0xc43c76){_0x6bbd6b[_0x3924b7(0x133)]({'message':_0xc43c76[_0x3924b7(0x1c4)]});}}),router[a0_0xc833b1(0x1b8)]('/filter_product',auth,async(_0x435388,_0x57c31b)=>{const _0x4ed15a=a0_0xc833b1;try{const {data_choosing:_0x5a0a99,data_selected:_0x3a1a82}=_0x435388['body'];var _0x4d4b44;if(_0x5a0a99==_0x4ed15a(0x138))_0x4d4b44=await product[_0x4ed15a(0x152)]([{'$match':{'product_category':_0x3a1a82}}]);else{if(_0x5a0a99==_0x4ed15a(0x136))_0x4d4b44=await product[_0x4ed15a(0x152)]([{'$match':{'brand':_0x3a1a82}}]);else _0x5a0a99==_0x4ed15a(0x155)&&(_0x4d4b44=await product[_0x4ed15a(0x152)]([{'$match':{'category':_0x3a1a82}}]));}_0x57c31b[_0x4ed15a(0x133)](_0x4d4b44);}catch(_0x52013f){_0x57c31b[_0x4ed15a(0x133)]({'message':_0x52013f[_0x4ed15a(0x1c4)]});}}),router['get'](a0_0xc833b1(0x13c),auth,async(_0x3c5a9d,_0x13b45d)=>{const _0x240af4=a0_0xc833b1,_0x2c2cf2=_0x3c5a9d[_0x240af4(0x15f)],_0x30c58a=await profile['findOne']({'email':_0x2c2cf2['email']}),_0x456195=await master_shop['find'](),_0x3891fc=await product[_0x240af4(0x1b2)]();if(_0x456195[0x0][_0x240af4(0x1c7)]==_0x240af4(0x14b))var _0x13c203=users[_0x240af4(0x1a4)];else{if(_0x456195[0x0]['language']==_0x240af4(0x1b7))var _0x13c203=users[_0x240af4(0x1b7)];else{if(_0x456195[0x0][_0x240af4(0x1c7)]==_0x240af4(0x199))var _0x13c203=users[_0x240af4(0x199)];else{if(_0x456195[0x0]['language']==_0x240af4(0x125))var _0x13c203=users[_0x240af4(0x125)];else{if(_0x456195[0x0][_0x240af4(0x1c7)]==_0x240af4(0x1af))var _0x13c203=users[_0x240af4(0x1af)];else{if(_0x456195[0x0][_0x240af4(0x1c7)]==_0x240af4(0x1c3))var _0x13c203=users['Portuguese'];else{if(_0x456195[0x0][_0x240af4(0x1c7)]=='Chinese')var _0x13c203=users['Chinese'];else{if(_0x456195[0x0][_0x240af4(0x1c7)]==_0x240af4(0x1b9))var _0x13c203=users[_0x240af4(0x162)];}}}}}}}_0x13b45d[_0x240af4(0x197)](_0x240af4(0x11c),{'success':_0x3c5a9d[_0x240af4(0x1cc)](_0x240af4(0x13b)),'errors':_0x3c5a9d[_0x240af4(0x1cc)](_0x240af4(0x135)),'role':_0x2c2cf2,'profile':_0x30c58a,'products':_0x3891fc,'master_shop':_0x456195,'language':_0x13c203});}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x19d),auth,async(_0x22f60d,_0x4a1635)=>{const _0x33c4ab=a0_0xc833b1,_0x1b7b5a=await product[_0x33c4ab(0x1b2)]();_0x4a1635[_0x33c4ab(0x133)]({'data':_0x1b7b5a});}),router[a0_0xc833b1(0x1b8)]('/barcode_filter',auth,async(_0x47922f,_0x5b1144)=>{const _0x3e1f61=a0_0xc833b1;try{const {dataProdCat:_0x3d1220,dataProdIdentity:_0x443e58}=_0x47922f[_0x3e1f61(0x1ca)];var _0x1336ca;switch(_0x3d1220){case'fg':switch(_0x443e58){case _0x3e1f61(0x1cf):_0x1336ca=await product[_0x3e1f61(0x152)]([{'$match':{'product_category':_0x3e1f61(0x16c)}},{'$group':{'_id':_0x3e1f61(0x151)}},{'$project':{'brand':_0x3e1f61(0x187)}}]);break;case _0x3e1f61(0x185):_0x1336ca=await product[_0x3e1f61(0x152)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x443e58){case'Brands':_0x1336ca=await product['aggregate']([{'$match':{'product_category':_0x3e1f61(0x131)}},{'$group':{'_id':_0x3e1f61(0x151)}},{'$project':{'brand':_0x3e1f61(0x187)}}]);break;case _0x3e1f61(0x185):_0x1336ca=await product[_0x3e1f61(0x152)]([{'$match':{'product_category':_0x3e1f61(0x131)}},{'$group':{'_id':_0x3e1f61(0x168)}},{'$project':{'category':_0x3e1f61(0x187)}}]);break;}break;}_0x5b1144['json'](_0x1336ca);}catch(_0x465f1e){_0x5b1144[_0x3e1f61(0x133)]({'message':_0x465f1e[_0x3e1f61(0x1c4)]});}}),router[a0_0xc833b1(0x1b8)]('/print_barcode_filter/',auth,async(_0x2ebf0e,_0x29b173)=>{const _0x2dffe9=a0_0xc833b1;try{console[_0x2dffe9(0x118)](_0x2ebf0e[_0x2dffe9(0x1ca)]);const {prod_cat:_0x5b27ce,identity:_0x267851,valueData:_0x5f79d6,typeofbarcode:_0x39ecbe}=_0x2ebf0e[_0x2dffe9(0x1ca)];let _0x5c21a2;switch(_0x5b27ce){case'fg':if(_0x267851=='Brands')_0x5c21a2=await product[_0x2dffe9(0x152)]([{'$match':{'product_category':_0x2dffe9(0x16c),'brand':_0x5f79d6}}]);else _0x267851==_0x2dffe9(0x185)&&(_0x5c21a2=await product[_0x2dffe9(0x152)]([{'$match':{'product_category':_0x2dffe9(0x16c),'category':_0x5f79d6}}]));break;case'rm':if(_0x267851=='Brands')_0x5c21a2=await product[_0x2dffe9(0x152)]([{'$match':{'product_category':_0x2dffe9(0x131),'brand':_0x5f79d6}}]);else _0x267851==_0x2dffe9(0x185)&&(_0x5c21a2=await product[_0x2dffe9(0x152)]([{'$match':{'product_category':_0x2dffe9(0x131),'category':_0x5f79d6}}]));break;}const _0x4d58fd=_0x3afcfc=>_0x3afcfc*0x48,_0x5d5723={'width':0x3,'height':0x1},_0x536e9e=new PDFDocument({'margin':_0x4d58fd(0.75),'size':[_0x4d58fd(_0x5d5723[_0x2dffe9(0x130)]),_0x4d58fd(_0x5d5723['height'])],'bufferPages':!![]}),_0x568a1c=_0x5c21a2['length'];for(let _0x231167=0x0;_0x231167<=_0x568a1c;_0x231167++){if(_0x231167!=_0x568a1c){const _0x5e25bd=_0x5c21a2[_0x231167][_0x2dffe9(0x167)],_0x3333d4=_0x5c21a2[_0x231167][_0x2dffe9(0x1c2)],_0x2cccc9=_0x5c21a2[_0x231167]['secondary_code'],_0x5e840c=_0x5c21a2[_0x231167][_0x2dffe9(0x174)];var _0x562efa;switch(_0x39ecbe){case'1':_0x562efa=_0x3333d4;break;case'2':_0x562efa=_0x2cccc9;break;case'3':_0x562efa=_0x5e840c;break;}const _0x277d3b={'width':0xd2,'height':0x64},_0x534ead={'width':_0x4d58fd(_0x5d5723[_0x2dffe9(0x130)]),'height':_0x4d58fd(_0x5d5723[_0x2dffe9(0x14a)])},_0x39677a=new Canvas();JsBarcode(_0x39677a,_0x562efa,{'format':_0x2dffe9(0x141),'height':_0x277d3b[_0x2dffe9(0x14a)],'displayValue':!![],'text':_0x562efa});const _0x39f1bf=_0x39677a[_0x2dffe9(0x19c)](),_0x43e5be=_0x534ead[_0x2dffe9(0x130)]/_0x277d3b[_0x2dffe9(0x130)],_0x12ba83=_0x534ead[_0x2dffe9(0x14a)]/_0x277d3b['height'],_0x241d8a=Math[_0x2dffe9(0x17a)](_0x43e5be,_0x12ba83),_0x3a21b8=_0x277d3b[_0x2dffe9(0x130)]*_0x241d8a,_0x368a81=_0x277d3b['height']*_0x241d8a,_0x8a923d=(_0x534ead[_0x2dffe9(0x130)]-_0x3a21b8)/0x2,_0x456eb8=(_0x534ead['height']-_0x368a81)/0x2;_0x536e9e['image'](_0x39f1bf,_0x8a923d,_0x456eb8,{'width':_0x3a21b8,'height':_0x368a81}),_0x231167!=_0x568a1c&&_0x536e9e[_0x2dffe9(0x120)]();}}const _0x11722b=[];_0x536e9e['on'](_0x2dffe9(0x15c),_0x11722b['push']['bind'](_0x11722b)),_0x536e9e['on'](_0x2dffe9(0x1d1),()=>{const _0x1b0ce0=_0x2dffe9,_0x5bcd3b=Buffer[_0x1b0ce0(0x177)](_0x11722b),_0x427146=_0x5bcd3b[_0x1b0ce0(0x1cd)](_0x1b0ce0(0x158));_0x29b173[_0x1b0ce0(0x133)]({'pdfContent':_0x427146});}),_0x536e9e[_0x2dffe9(0x1d1)]();}catch(_0x37fdca){_0x29b173[_0x2dffe9(0x133)]({'message':_0x37fdca[_0x2dffe9(0x1c4)]});}}),router[a0_0xc833b1(0x1b8)](a0_0xc833b1(0x122),auth,async(_0x4d3017,_0x2b5f92)=>{const _0x4c83ea=a0_0xc833b1;try{console[_0x4c83ea(0x118)](_0x4d3017[_0x4c83ea(0x1ca)]);const {prod_cat:_0x1b7788,identity:_0x206e52,valueData:_0x5db28b}=_0x4d3017[_0x4c83ea(0x1ca)];let _0x416d56;switch(_0x1b7788){case'fg':if(_0x206e52=='Brands')_0x416d56=await product[_0x4c83ea(0x152)]([{'$match':{'product_category':_0x4c83ea(0x16c),'brand':_0x5db28b}}]);else _0x206e52==_0x4c83ea(0x185)&&(_0x416d56=await product[_0x4c83ea(0x152)]([{'$match':{'product_category':_0x4c83ea(0x16c),'category':_0x5db28b}}]));break;case'rm':if(_0x206e52==_0x4c83ea(0x1cf))_0x416d56=await product[_0x4c83ea(0x152)]([{'$match':{'product_category':_0x4c83ea(0x131),'brand':_0x5db28b}}]);else _0x206e52==_0x4c83ea(0x185)&&(_0x416d56=await product[_0x4c83ea(0x152)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x5db28b}}]));break;}_0x2b5f92['json']({'data':_0x416d56});}catch(_0x130318){_0x2b5f92['json']({'message':_0x130318[_0x4c83ea(0x1c4)]});}}),router['post'](a0_0xc833b1(0x17b),auth,async(_0x4dcb8b,_0x34fa16)=>{const _0x3a0754=a0_0xc833b1;try{const _0x5ddb17=_0x4dcb8b[_0x3a0754(0x176)]['id'],{copies:_0x415506,typeofbarcode:_0x4dd41b}=_0x4dcb8b[_0x3a0754(0x1ca)];var _0x1639e7=await product[_0x3a0754(0x1c5)](_0x5ddb17);const _0x2fdc0e=_0x456994=>_0x456994*0x48,_0x2f4190={'width':0x3,'height':0x1},_0x5f3f06=new PDFDocument({'margin':_0x2fdc0e(0.75),'size':[_0x2fdc0e(_0x2f4190['width']),_0x2fdc0e(_0x2f4190[_0x3a0754(0x14a)])],'bufferPages':!![]}),_0x1a07fc=_0x415506,_0x3f15fb=_0x1639e7[_0x3a0754(0x167)],_0x59be4e=_0x1639e7[_0x3a0754(0x1c2)],_0x3e030e=_0x1639e7[_0x3a0754(0x18f)],_0x33bb7d=_0x1639e7['product_code'];let _0x44e59d;switch(_0x4dd41b){case'1':_0x44e59d=_0x59be4e;break;case'2':_0x44e59d=_0x3e030e;break;case'3':_0x44e59d=_0x33bb7d;break;}const _0x5bac1f={'width':0xd2,'height':0x64},_0x589524={'width':_0x2fdc0e(_0x2f4190['width']),'height':_0x2fdc0e(_0x2f4190['height'])};for(let _0x8f8443=0x1;_0x8f8443<=_0x1a07fc;_0x8f8443++){const _0x28be0f=new Canvas();JsBarcode(_0x28be0f,_0x44e59d,{'format':_0x3a0754(0x141),'height':_0x5bac1f[_0x3a0754(0x14a)],'displayValue':!![],'text':_0x44e59d});const _0x1f545a=_0x28be0f[_0x3a0754(0x19c)](),_0x141b46=_0x589524['width']/_0x5bac1f[_0x3a0754(0x130)],_0x5ab317=_0x589524[_0x3a0754(0x14a)]/_0x5bac1f['height'],_0x10acf3=Math['min'](_0x141b46,_0x5ab317),_0x366c15=_0x5bac1f[_0x3a0754(0x130)]*_0x10acf3,_0x447b0f=_0x5bac1f['height']*_0x10acf3,_0x5b8ed6=(_0x589524[_0x3a0754(0x130)]-_0x366c15)/0x2,_0x3e901f=(_0x589524[_0x3a0754(0x14a)]-_0x447b0f)/0x2;_0x5f3f06[_0x3a0754(0x1c1)](_0x1f545a,_0x5b8ed6,_0x3e901f,{'width':_0x366c15,'height':_0x447b0f}),_0x8f8443!=_0x1a07fc&&_0x5f3f06[_0x3a0754(0x120)]();}const _0x2b108e=[];_0x5f3f06['on'](_0x3a0754(0x15c),_0x2b108e[_0x3a0754(0x1bd)][_0x3a0754(0x1bb)](_0x2b108e)),_0x5f3f06['on'](_0x3a0754(0x1d1),()=>{const _0x9d98d6=_0x3a0754,_0x2b376e=Buffer['concat'](_0x2b108e),_0x18c689=_0x2b376e['toString'](_0x9d98d6(0x158));_0x34fa16[_0x9d98d6(0x133)]({'pdfContent':_0x18c689});}),_0x5f3f06[_0x3a0754(0x1d1)]();}catch(_0x1e079d){_0x34fa16[_0x3a0754(0x133)]({'message':_0x1e079d[_0x3a0754(0x1c4)]});}}),module[a0_0xc833b1(0x14d)]=router;