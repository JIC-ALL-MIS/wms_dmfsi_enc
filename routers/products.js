const a0_0xebe173=a0_0x580c;(function(_0x3fb515,_0x1a9bca){const _0x4e51f3=a0_0x580c,_0x38bf2c=_0x3fb515();while(!![]){try{const _0x523a88=parseInt(_0x4e51f3(0x1be))/0x1+parseInt(_0x4e51f3(0x20b))/0x2*(-parseInt(_0x4e51f3(0x19a))/0x3)+parseInt(_0x4e51f3(0x1fd))/0x4+parseInt(_0x4e51f3(0x1f5))/0x5+parseInt(_0x4e51f3(0x1cd))/0x6*(parseInt(_0x4e51f3(0x1d9))/0x7)+parseInt(_0x4e51f3(0x1f6))/0x8*(-parseInt(_0x4e51f3(0x23c))/0x9)+-parseInt(_0x4e51f3(0x218))/0xa;if(_0x523a88===_0x1a9bca)break;else _0x38bf2c['push'](_0x38bf2c['shift']());}catch(_0x167e62){_0x38bf2c['push'](_0x38bf2c['shift']());}}}(a0_0x4611,0x51831));const express=require(a0_0xebe173(0x1ca)),res=require('express/lib/response'),app=express(),router=express[a0_0xebe173(0x1d8)](),multer=require(a0_0xebe173(0x245)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0xebe173(0x1ce)),auth=require(a0_0xebe173(0x1aa)),users=require(a0_0xebe173(0x20d)),excelJS=require(a0_0xebe173(0x215)),xlsx=require(a0_0xebe173(0x1cc)),JsBarcode=require(a0_0xebe173(0x1f4)),{Canvas}=require(a0_0xebe173(0x22d)),PDFDocument=require('pdfkit-table');router['get']('/categories',auth,async(_0x4832b4,_0x2aa4df)=>{const _0x570c23=a0_0xebe173;try{const {username:_0x36901e,email:_0x443919,role:_0x1e6ca2}=_0x4832b4[_0x570c23(0x208)],_0x4e1bda=_0x4832b4[_0x570c23(0x208)],_0x5b8813=await profile['findOne']({'email':_0x4e1bda['email']}),_0x300d20=await master_shop[_0x570c23(0x1b5)]();console[_0x570c23(0x22e)](_0x570c23(0x1e4),_0x300d20);const _0x4bba5b=await categories[_0x570c23(0x1b5)]();if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x1d5))var _0x268f4a=users[_0x570c23(0x225)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x1e8))var _0x268f4a=users[_0x570c23(0x1e8)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x198))var _0x268f4a=users[_0x570c23(0x198)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x243))var _0x268f4a=users[_0x570c23(0x243)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x1e3))var _0x268f4a=users[_0x570c23(0x1e3)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]==_0x570c23(0x195))var _0x268f4a=users[_0x570c23(0x204)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]=='Chinese')var _0x268f4a=users[_0x570c23(0x18c)];else{if(_0x300d20[0x0][_0x570c23(0x1dc)]=='Arabic\x20(ae)')var _0x268f4a=users[_0x570c23(0x219)];}}}}}}}_0x2aa4df[_0x570c23(0x1ef)](_0x570c23(0x22a),{'success':_0x4832b4[_0x570c23(0x1ab)](_0x570c23(0x1f0)),'errors':_0x4832b4[_0x570c23(0x1ab)]('errors'),'role':_0x4e1bda,'profile':_0x5b8813,'user':_0x4bba5b,'master_shop':_0x300d20,'language':_0x268f4a});}catch(_0x47609a){console['log'](_0x47609a);}}),router['post'](a0_0xebe173(0x1fb),auth,async(_0x4f05c2,_0x5985ec)=>{const _0x448e63=a0_0xebe173;try{const {name:_0x199c77,products:_0x22ab6e}=_0x4f05c2[_0x448e63(0x1a4)],_0x559518=new categories({'name':_0x199c77,'products':_0x22ab6e}),_0x1a3857=await categories[_0x448e63(0x1de)]({'name':_0x199c77});_0x1a3857?_0x4f05c2[_0x448e63(0x1ab)](_0x448e63(0x216),_0x199c77+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4f05c2['flash']('success',_0x199c77+_0x448e63(0x23f));const _0x19fbc3=await _0x559518['save']();_0x5985ec['redirect'](_0x448e63(0x203));}catch(_0x176eb5){console[_0x448e63(0x22e)](_0x176eb5);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x1a7),auth,async(_0x52b2bc,_0x31043d)=>{const _0x512e98=a0_0xebe173;try{const {username:_0xfa45cb,email:_0x3fda67,role:_0x2a5a2f}=_0x52b2bc[_0x512e98(0x208)],_0x140403=_0x52b2bc[_0x512e98(0x208)],_0x3eaac4=await profile[_0x512e98(0x1de)]({'email':_0x140403[_0x512e98(0x18b)]}),_0xfc35a6=await master_shop['find']();console[_0x512e98(0x22e)](_0x512e98(0x1e4),_0xfc35a6);const _0xccb5ec=_0x52b2bc['params']['id'];console[_0x512e98(0x22e)](_0xccb5ec);const _0x4ca401=await categories['findById'](_0xccb5ec);if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x1d5))var _0x219b2e=users[_0x512e98(0x225)];else{if(_0xfc35a6[0x0]['language']=='Hindi')var _0x219b2e=users[_0x512e98(0x1e8)];else{if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x198))var _0x219b2e=users[_0x512e98(0x198)];else{if(_0xfc35a6[0x0]['language']=='Spanish')var _0x219b2e=users[_0x512e98(0x243)];else{if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x1e3))var _0x219b2e=users[_0x512e98(0x1e3)];else{if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x195))var _0x219b2e=users[_0x512e98(0x204)];else{if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x18c))var _0x219b2e=users[_0x512e98(0x18c)];else{if(_0xfc35a6[0x0][_0x512e98(0x1dc)]==_0x512e98(0x1d2))var _0x219b2e=users['Arabic'];}}}}}}}_0x31043d[_0x512e98(0x1ef)]('categories',{'success':_0x52b2bc[_0x512e98(0x1ab)]('success'),'errors':_0x52b2bc[_0x512e98(0x1ab)](_0x512e98(0x216)),'role':_0x140403,'profile':_0x3eaac4,'master_shop':_0xfc35a6,'user':_0x4ca401,'language':_0x219b2e});}catch(_0x519b42){console[_0x512e98(0x22e)](_0x519b42);}}),router[a0_0xebe173(0x23e)]('/categories/:id',auth,async(_0x2f6a4a,_0x3b8605)=>{const _0x133021=a0_0xebe173;try{const _0x512f39=_0x2f6a4a[_0x133021(0x21b)]['id'],_0x430c24=await categories['findByIdAndUpdate'](_0x512f39,_0x2f6a4a[_0x133021(0x1a4)]);_0x2f6a4a[_0x133021(0x1ab)](_0x133021(0x1f0),''+users[_0x133021(0x1c4)]),_0x3b8605[_0x133021(0x1ed)]('/products/categories');}catch(_0x52dade){console['log'](_0x52dade);}}),router['get'](a0_0xebe173(0x230),auth,async(_0x386aaf,_0x40041c)=>{const _0x3da430=a0_0xebe173;try{const _0x30fe39=_0x386aaf[_0x3da430(0x21b)]['id'],_0x4aac38=await categories['findByIdAndDelete'](_0x30fe39);_0x386aaf[_0x3da430(0x1ab)](_0x3da430(0x1f0),_0x3da430(0x1e7)),_0x40041c[_0x3da430(0x1ed)]('/products/categories');}catch(_0x2925c8){console['log'](_0x2925c8);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x22f),auth,async(_0x409d8f,_0x2fadd9)=>{const _0x42c5c6=a0_0xebe173;try{const {username:_0x1fba74,email:_0x312b56,role:_0x22ff7e}=_0x409d8f['user'],_0x448fa8=_0x409d8f[_0x42c5c6(0x208)],_0x2d8fa6=await profile[_0x42c5c6(0x1de)]({'email':_0x448fa8[_0x42c5c6(0x18b)]}),_0x646e60=await master_shop[_0x42c5c6(0x1b5)]();console[_0x42c5c6(0x22e)]('master',_0x646e60);const _0x56b436=await brands['find']();if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x1d5))var _0x459e57=users[_0x42c5c6(0x225)];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x1e8))var _0x459e57=users[_0x42c5c6(0x1e8)];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x198))var _0x459e57=users[_0x42c5c6(0x198)];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x243))var _0x459e57=users[_0x42c5c6(0x243)];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x1e3))var _0x459e57=users[_0x42c5c6(0x1e3)];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x195))var _0x459e57=users['Portuguese'];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]=='Chinese')var _0x459e57=users['Chinese'];else{if(_0x646e60[0x0][_0x42c5c6(0x1dc)]==_0x42c5c6(0x1d2))var _0x459e57=users[_0x42c5c6(0x219)];}}}}}}}_0x2fadd9[_0x42c5c6(0x1ef)]('brands',{'success':_0x409d8f[_0x42c5c6(0x1ab)](_0x42c5c6(0x1f0)),'errors':_0x409d8f[_0x42c5c6(0x1ab)](_0x42c5c6(0x216)),'role':_0x448fa8,'profile':_0x2d8fa6,'master_shop':_0x646e60,'user':_0x56b436,'language':_0x459e57});}catch(_0xd7da4c){console[_0x42c5c6(0x22e)](_0xd7da4c);}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x22f),auth,async(_0x5335df,_0x321361)=>{const _0x1b0cca=a0_0xebe173;try{const {name:_0x37ffb4,products:_0x504436}=_0x5335df[_0x1b0cca(0x1a4)],_0x2e3af5=new brands({'name':_0x37ffb4,'products':_0x504436}),_0xc3b306=await brands[_0x1b0cca(0x1de)]({'name':_0x37ffb4});_0xc3b306?_0x5335df['flash'](_0x1b0cca(0x216),_0x37ffb4+_0x1b0cca(0x1ee)):_0x5335df[_0x1b0cca(0x1ab)](_0x1b0cca(0x1f0),_0x37ffb4+_0x1b0cca(0x1b9));const _0x38bf18=await _0x2e3af5[_0x1b0cca(0x1dd)]();_0x321361[_0x1b0cca(0x1ed)](_0x1b0cca(0x1b8));}catch(_0x4ad26d){console[_0x1b0cca(0x22e)](_0x4ad26d);}}),router['get'](a0_0xebe173(0x1f8),auth,async(_0x1e5454,_0x267dd0)=>{const _0x408d11=a0_0xebe173;try{const {username:_0xb01439,email:_0x52b6d6,role:_0x595dda}=_0x1e5454[_0x408d11(0x208)],_0x19b259=_0x1e5454[_0x408d11(0x208)],_0x3b4bf3=await profile['findOne']({'email':_0x19b259[_0x408d11(0x18b)]}),_0x1c4d43=await master_shop[_0x408d11(0x1b5)]();console[_0x408d11(0x22e)](_0x408d11(0x1e4),_0x1c4d43);const _0x1314a6=_0x1e5454[_0x408d11(0x21b)]['id'];console[_0x408d11(0x22e)](_0x1314a6);const _0x3cf902=await brands[_0x408d11(0x1ac)](_0x1314a6);if(_0x1c4d43[0x0][_0x408d11(0x1dc)]=='English\x20(US)')var _0x18d322=users['English'];else{if(_0x1c4d43[0x0][_0x408d11(0x1dc)]==_0x408d11(0x1e8))var _0x18d322=users[_0x408d11(0x1e8)];else{if(_0x1c4d43[0x0][_0x408d11(0x1dc)]=='German')var _0x18d322=users[_0x408d11(0x198)];else{if(_0x1c4d43[0x0][_0x408d11(0x1dc)]==_0x408d11(0x243))var _0x18d322=users[_0x408d11(0x243)];else{if(_0x1c4d43[0x0][_0x408d11(0x1dc)]==_0x408d11(0x1e3))var _0x18d322=users['French'];else{if(_0x1c4d43[0x0][_0x408d11(0x1dc)]==_0x408d11(0x195))var _0x18d322=users[_0x408d11(0x204)];else{if(_0x1c4d43[0x0]['language']=='Chinese')var _0x18d322=users[_0x408d11(0x18c)];else{if(_0x1c4d43[0x0]['language']==_0x408d11(0x1d2))var _0x18d322=users[_0x408d11(0x219)];}}}}}}}_0x267dd0[_0x408d11(0x1ef)](_0x408d11(0x226),{'success':_0x1e5454[_0x408d11(0x1ab)](_0x408d11(0x1f0)),'errors':_0x1e5454[_0x408d11(0x1ab)](_0x408d11(0x216)),'role':_0x19b259,'profile':_0x3b4bf3,'master_shop':_0x1c4d43,'user':_0x3cf902,'language':_0x18d322});}catch(_0x464163){console[_0x408d11(0x22e)](_0x464163);}}),router[a0_0xebe173(0x23e)]('/brands/:id',auth,async(_0x1894b5,_0x2b9fb0)=>{const _0x5656e2=a0_0xebe173;try{const _0x4e69e8=_0x1894b5[_0x5656e2(0x21b)]['id'],_0x3e9da6=await brands['findByIdAndUpdate'](_0x4e69e8,_0x1894b5[_0x5656e2(0x1a4)]);_0x1894b5[_0x5656e2(0x1ab)](_0x5656e2(0x1f0),_0x5656e2(0x227)),_0x2b9fb0[_0x5656e2(0x1ed)](_0x5656e2(0x1b8));}catch(_0x104d66){console['log'](_0x104d66);}}),router['get'](a0_0xebe173(0x231),auth,async(_0x555b29,_0x19cb08)=>{const _0x15cc45=a0_0xebe173;try{const _0x4215cb=_0x555b29[_0x15cc45(0x21b)]['id'],_0x5de9fc=await brands[_0x15cc45(0x220)](_0x4215cb);_0x555b29[_0x15cc45(0x1ab)](_0x15cc45(0x1f0),_0x15cc45(0x1fe)),_0x19cb08[_0x15cc45(0x1ed)](_0x15cc45(0x1b8));}catch(_0x58b995){console[_0x15cc45(0x22e)](_0x58b995);}}),router[a0_0xebe173(0x20c)]('/units',auth,async(_0x5dd55d,_0x3af107)=>{const _0x3e32a7=a0_0xebe173;try{const {username:_0x4aa32a,email:_0x3b824a,role:_0x77777f}=_0x5dd55d['user'],_0x288db4=_0x5dd55d[_0x3e32a7(0x208)],_0x17d6fb=await profile[_0x3e32a7(0x1de)]({'email':_0x288db4[_0x3e32a7(0x18b)]}),_0x228d3d=await master_shop[_0x3e32a7(0x1b5)]();console[_0x3e32a7(0x22e)](_0x3e32a7(0x1e4),_0x228d3d);const _0x3ef4e5=await units[_0x3e32a7(0x1b5)]();if(_0x228d3d[0x0][_0x3e32a7(0x1dc)]==_0x3e32a7(0x1d5))var _0x1facca=users[_0x3e32a7(0x225)];else{if(_0x228d3d[0x0][_0x3e32a7(0x1dc)]==_0x3e32a7(0x1e8))var _0x1facca=users['Hindi'];else{if(_0x228d3d[0x0]['language']==_0x3e32a7(0x198))var _0x1facca=users[_0x3e32a7(0x198)];else{if(_0x228d3d[0x0]['language']=='Spanish')var _0x1facca=users[_0x3e32a7(0x243)];else{if(_0x228d3d[0x0][_0x3e32a7(0x1dc)]==_0x3e32a7(0x1e3))var _0x1facca=users[_0x3e32a7(0x1e3)];else{if(_0x228d3d[0x0][_0x3e32a7(0x1dc)]=='Portuguese\x20(BR)')var _0x1facca=users[_0x3e32a7(0x204)];else{if(_0x228d3d[0x0]['language']==_0x3e32a7(0x18c))var _0x1facca=users['Chinese'];else{if(_0x228d3d[0x0][_0x3e32a7(0x1dc)]==_0x3e32a7(0x1d2))var _0x1facca=users['Arabic'];}}}}}}}_0x3af107[_0x3e32a7(0x1ef)](_0x3e32a7(0x206),{'success':_0x5dd55d[_0x3e32a7(0x1ab)](_0x3e32a7(0x1f0)),'errors':_0x5dd55d[_0x3e32a7(0x1ab)](_0x3e32a7(0x216)),'role':_0x288db4,'profile':_0x17d6fb,'master_shop':_0x228d3d,'user':_0x3ef4e5,'language':_0x1facca});}catch(_0x362983){console['log'](_0x362983);}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x19f),auth,async(_0x520b72,_0x36ad34)=>{const _0x487d43=a0_0xebe173;try{const {name:_0x5c59e2,secondary_unit:_0x2dbb38,products:_0x4e545e}=_0x520b72[_0x487d43(0x1a4)],_0x1cd277=new units({'name':_0x5c59e2,'secondary_unit':_0x2dbb38,'products':_0x4e545e}),_0x229efc=await units[_0x487d43(0x1de)]({'name':_0x5c59e2});_0x229efc?_0x520b72[_0x487d43(0x1ab)](_0x487d43(0x216),_0x5c59e2+_0x487d43(0x21a)):_0x520b72[_0x487d43(0x1ab)](_0x487d43(0x1f0),_0x5c59e2+_0x487d43(0x1da));const _0xd35ce4=await _0x1cd277[_0x487d43(0x1dd)]();_0x36ad34['redirect'](_0x487d43(0x1df));}catch(_0x41c81c){console['log'](_0x41c81c);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x207),auth,async(_0x4d0d61,_0x3500dd)=>{const _0x56dbfc=a0_0xebe173;try{const {username:_0x407fe1,email:_0x11454e,role:_0x1f398b}=_0x4d0d61[_0x56dbfc(0x208)],_0x4cac85=_0x4d0d61[_0x56dbfc(0x208)],_0x3240c9=await profile[_0x56dbfc(0x1de)]({'email':_0x4cac85[_0x56dbfc(0x18b)]}),_0x53da82=await master_shop['find']();console[_0x56dbfc(0x22e)]('master',_0x53da82);const _0x1e3b80=_0x4d0d61[_0x56dbfc(0x21b)]['id'],_0x265623=await units[_0x56dbfc(0x1ac)](_0x1e3b80);if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x1d5))var _0x170b60=users[_0x56dbfc(0x225)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x1e8))var _0x170b60=users[_0x56dbfc(0x1e8)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x198))var _0x170b60=users[_0x56dbfc(0x198)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x243))var _0x170b60=users[_0x56dbfc(0x243)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x1e3))var _0x170b60=users[_0x56dbfc(0x1e3)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x195))var _0x170b60=users['Portuguese'];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]=='Chinese')var _0x170b60=users[_0x56dbfc(0x18c)];else{if(_0x53da82[0x0][_0x56dbfc(0x1dc)]==_0x56dbfc(0x1d2))var _0x170b60=users[_0x56dbfc(0x219)];}}}}}}}_0x3500dd[_0x56dbfc(0x1ef)](_0x56dbfc(0x206),{'success':_0x4d0d61[_0x56dbfc(0x1ab)](_0x56dbfc(0x1f0)),'errors':_0x4d0d61['flash']('errors'),'role':_0x4cac85,'profile':_0x3240c9,'master_shop':_0x53da82,'user':_0x265623,'language':_0x170b60});}catch(_0x28559b){console[_0x56dbfc(0x22e)](_0x28559b);}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x207),auth,async(_0x5553dd,_0x56c96d)=>{const _0x3789b7=a0_0xebe173;try{const _0x17c85a=_0x5553dd[_0x3789b7(0x21b)]['id'],_0x4ec7be=await units['findByIdAndUpdate'](_0x17c85a,_0x5553dd[_0x3789b7(0x1a4)]);_0x5553dd[_0x3789b7(0x1ab)](_0x3789b7(0x1f0),_0x3789b7(0x18e)),_0x56c96d[_0x3789b7(0x1ed)](_0x3789b7(0x1df));}catch(_0x5eb278){console[_0x3789b7(0x22e)](_0x5eb278);}}),router['get']('/units/delete/:id',auth,async(_0x45a94f,_0x20139d)=>{const _0x40ce81=a0_0xebe173;try{const _0x32bebd=_0x45a94f['params']['id'],_0x210a56=await units[_0x40ce81(0x220)](_0x32bebd);_0x45a94f[_0x40ce81(0x1ab)]('success',_0x40ce81(0x1d7)),_0x20139d[_0x40ce81(0x1ed)]('/products/units');}catch(_0x371787){console[_0x40ce81(0x22e)](_0x371787);}});const storage=multer[a0_0xebe173(0x1a3)]({'destination':(_0x313b31,_0x3d1b28,_0x588cad)=>{const _0x28f05d=a0_0xebe173;_0x588cad(null,_0x28f05d(0x19e));},'filename':(_0xce3f7b,_0x2feb73,_0x2bced8)=>{const _0x507535=a0_0xebe173;_0x2bced8(null,Date[_0x507535(0x1f9)]()+_0x2feb73[_0x507535(0x200)]);}}),upload=multer({'storage':storage});router[a0_0xebe173(0x20c)](a0_0xebe173(0x19d),auth,async(_0x56d18b,_0x895f9c)=>{const _0x79a5f5=a0_0xebe173;try{const {username:_0xd4c7f3,email:_0x51263e,role:_0x1cf507}=_0x56d18b[_0x79a5f5(0x208)],_0x4a1669=_0x56d18b[_0x79a5f5(0x208)],_0xc58b=await profile[_0x79a5f5(0x1de)]({'email':_0x4a1669[_0x79a5f5(0x18b)]}),_0x49950c={'year':_0x79a5f5(0x242),'month':_0x79a5f5(0x235),'day':'numeric'},_0x5be0f8=await master_shop[_0x79a5f5(0x1b5)]();console[_0x79a5f5(0x22e)](_0x79a5f5(0x1a9),_0x5be0f8);const _0x33becb=await product[_0x79a5f5(0x1b5)]();console[_0x79a5f5(0x22e)]('Products\x20find_data',_0x33becb);const _0x4516fd=await warehouse[_0x79a5f5(0x185)]([{'$unwind':'$product_details'},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':'name','as':_0x79a5f5(0x1fc)}},{'$unwind':_0x79a5f5(0x214)},{'$project':{'product_name':_0x79a5f5(0x186),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x79a5f5(0x1e1),'product_stock':{'$sum':_0x79a5f5(0x196)}}}]);console['log'](_0x79a5f5(0x22b),_0x4516fd),_0x4516fd[_0x79a5f5(0x239)](_0x382dc2=>{const _0x60a853=_0x33becb['map'](_0x351cd9=>{const _0x43567d=a0_0x580c;_0x351cd9[_0x43567d(0x23a)]==_0x382dc2['_id']&&(_0x351cd9[_0x43567d(0x199)]=parseInt(_0x351cd9[_0x43567d(0x199)])+parseInt(_0x382dc2[_0x43567d(0x236)]));});}),console[_0x79a5f5(0x22e)]('Products\x20find_data',_0x33becb);if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]=='English\x20(US)')var _0x276758=users['English'];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]==_0x79a5f5(0x1e8))var _0x276758=users[_0x79a5f5(0x1e8)];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]=='German')var _0x276758=users['German'];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]==_0x79a5f5(0x243))var _0x276758=users[_0x79a5f5(0x243)];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]==_0x79a5f5(0x1e3))var _0x276758=users['French'];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]==_0x79a5f5(0x195))var _0x276758=users['Portuguese'];else{if(_0x5be0f8[0x0]['language']==_0x79a5f5(0x18c))var _0x276758=users[_0x79a5f5(0x18c)];else{if(_0x5be0f8[0x0][_0x79a5f5(0x1dc)]=='Arabic\x20(ae)')var _0x276758=users[_0x79a5f5(0x219)];}}}}}}}_0x895f9c['render'](_0x79a5f5(0x209),{'success':_0x56d18b[_0x79a5f5(0x1ab)]('success'),'errors':_0x56d18b['flash'](_0x79a5f5(0x216)),'alldata':_0x33becb,'profile':_0xc58b,'master_shop':_0x5be0f8,'role':_0x4a1669,'product_stock':_0x4516fd,'language':_0x276758});}catch(_0x2720b8){console[_0x79a5f5(0x22e)](_0x2720b8);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x1bf),auth,async(_0x32fdc5,_0x431abe)=>{const _0x233251=a0_0xebe173;try{const {username:_0x14084d,email:_0x3bb57f,role:_0x4aebd8}=_0x32fdc5[_0x233251(0x208)],_0x221913=_0x32fdc5[_0x233251(0x208)],_0x57778c=await profile['findOne']({'email':_0x221913['email']}),_0x5b6347=await master_shop[_0x233251(0x1b5)]();console[_0x233251(0x22e)](_0x233251(0x1e4),_0x5b6347);const _0x10cc03=await categories[_0x233251(0x1b5)]({}),_0x940c01=await brands[_0x233251(0x1b5)]({}),_0x15edf7=await units[_0x233251(0x1b5)]({}),_0x399c9d=await warehouse[_0x233251(0x1b5)]({'status':_0x233251(0x201)});if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x1d5))var _0x548d5b=users['English'];else{if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x1e8))var _0x548d5b=users['Hindi'];else{if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x198))var _0x548d5b=users[_0x233251(0x198)];else{if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x243))var _0x548d5b=users[_0x233251(0x243)];else{if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x1e3))var _0x548d5b=users[_0x233251(0x1e3)];else{if(_0x5b6347[0x0][_0x233251(0x1dc)]==_0x233251(0x195))var _0x548d5b=users['Portuguese'];else{if(_0x5b6347[0x0]['language']==_0x233251(0x18c))var _0x548d5b=users['Chinese'];else{if(_0x5b6347[0x0]['language']==_0x233251(0x1d2))var _0x548d5b=users[_0x233251(0x219)];}}}}}}}_0x431abe[_0x233251(0x1ef)](_0x233251(0x21f),{'success':_0x32fdc5[_0x233251(0x1ab)](_0x233251(0x1f0)),'errors':_0x32fdc5['flash'](_0x233251(0x216)),'role':_0x221913,'profile':_0x57778c,'categories':_0x10cc03,'brands':_0x940c01,'master_shop':_0x5b6347,'units':_0x15edf7,'language':_0x548d5b,'find_data':_0x399c9d});}catch(_0x3f22b8){console[_0x233251(0x22e)](_0x3f22b8);}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x1bf),auth,upload[a0_0xebe173(0x1cb)](a0_0xebe173(0x1a1)),async(_0x18fa63,_0x52873e)=>{const _0x46061a=a0_0xebe173;try{const {name:_0x426258,category:_0x188cc4,brand:_0x1d350e,unit:_0x2baf6c,alertquantity:_0x13160f,stock:_0xdc6f0f,product_code:_0x3a621f,warehouse:_0x2ae789,primary_ItemCode:_0x30714a,second_ItemCode:_0x2d9a81,second_unit:_0x57d98e,maxPerUnit:_0x2c334a,MaxPerProduct:_0x59d5ca}=_0x18fa63['body'],_0x2978eb=_0x18fa63[_0x46061a(0x1b4)]?.['filename']||_0x46061a(0x237),_0x2b20fe=new product({'image':_0x2978eb,'name':_0x426258,'category':_0x188cc4,'brand':_0x1d350e,'unit':_0x2baf6c,'alertquantity':_0x13160f,'stock':_0xdc6f0f,'product_code':_0x3a621f,'warehouse':_0x2ae789,'primary_code':_0x30714a,'secondary_code':_0x2d9a81,'second_unit':_0x57d98e,'maxStocks':_0x59d5ca,'maxProdPerUnit':_0x2c334a}),_0x182aa6=await _0x2b20fe[_0x46061a(0x1dd)](),_0xa2d65f=await categories[_0x46061a(0x1de)]({'name':_0x188cc4});_0xa2d65f[_0x46061a(0x209)]=parseInt(_0xa2d65f[_0x46061a(0x209)])+0x1,await _0xa2d65f[_0x46061a(0x1dd)]();const _0x4b32fd=await brands['findOne']({'name':_0x1d350e});_0x4b32fd[_0x46061a(0x209)]=parseInt(_0x4b32fd[_0x46061a(0x209)])+0x1,await _0x4b32fd[_0x46061a(0x1dd)]();const _0x2a4151=await units[_0x46061a(0x1de)]({'name':_0x2baf6c});_0x2a4151[_0x46061a(0x209)]=parseInt(_0x2a4151[_0x46061a(0x209)])+0x1,await _0x2a4151[_0x46061a(0x1dd)](),_0x18fa63[_0x46061a(0x1ab)](_0x46061a(0x1f0),'product\x20add\x20successfully'),_0x52873e[_0x46061a(0x1ed)](_0x46061a(0x20e));}catch(_0xcfe985){console[_0x46061a(0x22e)](_0xcfe985);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x1d1),auth,async(_0x1d1d59,_0x5016b7)=>{const _0x2acccc=a0_0xebe173;try{const {username:_0x5a829d,email:_0x4d9810,role:_0x284bab}=_0x1d1d59['user'],_0x150706=_0x1d1d59[_0x2acccc(0x208)],_0x7005b5=await profile['findOne']({'email':_0x150706['email']}),_0x414d7e=await master_shop[_0x2acccc(0x1b5)]();console['log'](_0x2acccc(0x193),_0x414d7e);const _0x854b78=_0x1d1d59[_0x2acccc(0x21b)]['id'],_0x84e014=await product[_0x2acccc(0x1ac)](_0x854b78),_0x211687=await categories['find']({}),_0x137eab=await brands[_0x2acccc(0x1b5)]({}),_0x1093aa=await units[_0x2acccc(0x1b5)]({}),_0x2d7196=await warehouse[_0x2acccc(0x1b5)]({'status':_0x2acccc(0x201)}),_0xd7c304=await units[_0x2acccc(0x185)]([{'$group':{'_id':_0x2acccc(0x1b1),'secondaryunit':{'$first':_0x2acccc(0x1c7)}}}]);if(_0x414d7e[0x0][_0x2acccc(0x1dc)]=='English\x20(US)')var _0x507946=users['English'];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]=='Hindi')var _0x507946=users[_0x2acccc(0x1e8)];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]==_0x2acccc(0x198))var _0x507946=users[_0x2acccc(0x198)];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]==_0x2acccc(0x243))var _0x507946=users[_0x2acccc(0x243)];else{if(_0x414d7e[0x0]['language']==_0x2acccc(0x1e3))var _0x507946=users['French'];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]==_0x2acccc(0x195))var _0x507946=users['Portuguese'];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]==_0x2acccc(0x18c))var _0x507946=users[_0x2acccc(0x18c)];else{if(_0x414d7e[0x0][_0x2acccc(0x1dc)]==_0x2acccc(0x1d2))var _0x507946=users[_0x2acccc(0x219)];}}}}}}}_0x5016b7[_0x2acccc(0x1ef)](_0x2acccc(0x20f),{'success':_0x1d1d59['flash'](_0x2acccc(0x1f0)),'errors':_0x1d1d59['flash']('errors'),'role':_0x150706,'profile':_0x7005b5,'alldata':_0x84e014,'categories':_0x211687,'brands':_0x137eab,'master_shop':_0x414d7e,'units':_0x1093aa,'secondunit':_0xd7c304,'find_data':_0x2d7196,'language':_0x507946});}catch(_0xfc5689){console[_0x2acccc(0x22e)](_0xfc5689);}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x1d1),auth,upload['single'](a0_0xebe173(0x1a1)),async(_0x201afe,_0x4f68f2)=>{const _0xdbfa21=a0_0xebe173;try{console['log']('hello');const _0x2e662e=_0x201afe[_0xdbfa21(0x21b)]['id'],_0x385f67=await product['findById'](_0x2e662e),{image:_0x7bf2ee,name:_0x204420,category:_0x46d769,brand:_0xd1cb15,sku:_0x1748c8,unit:_0x5410c5,alertquantity:_0x45b152,product_code:_0x1b772f,warehouse:_0x38a15b,primary_ItemCode:_0x4b180e,second_ItemCode:_0x5a7f08,second_unit:_0x140c4d,maxPerUnit:_0x32c3a9,MaxPerProduct:_0x3d2647,prod_catdata:_0x378284}=_0x201afe[_0xdbfa21(0x1a4)];_0x201afe[_0xdbfa21(0x1b4)]&&(_0x385f67[_0xdbfa21(0x1a1)]=_0x201afe[_0xdbfa21(0x1b4)]['filename']);_0x385f67[_0xdbfa21(0x23a)]=_0x204420,_0x385f67[_0xdbfa21(0x223)]=_0x46d769,_0x385f67[_0xdbfa21(0x1c8)]=_0xd1cb15,_0x385f67['sku']=_0x1748c8,_0x385f67['unit']=_0x5410c5,_0x385f67[_0xdbfa21(0x1e6)]=_0x45b152,_0x385f67[_0xdbfa21(0x1b0)]=_0x1b772f,_0x385f67[_0xdbfa21(0x234)]=_0x38a15b,_0x385f67[_0xdbfa21(0x18a)]=_0x4b180e,_0x385f67[_0xdbfa21(0x1c1)]=_0x5a7f08,_0x385f67[_0xdbfa21(0x229)]=_0x140c4d,_0x385f67[_0xdbfa21(0x1b3)]=_0x3d2647,_0x385f67['maxProdPerUnit']=_0x32c3a9,_0x385f67[_0xdbfa21(0x233)]=_0x378284;const _0x520b5a=await _0x385f67['save']();console[_0xdbfa21(0x22e)](_0xdbfa21(0x197),_0x385f67),_0x201afe[_0xdbfa21(0x1ab)](_0xdbfa21(0x1f0),_0xdbfa21(0x1f1)),_0x4f68f2[_0xdbfa21(0x1ed)](_0xdbfa21(0x20e));}catch(_0x269174){console['log'](_0x269174);}}),router['get'](a0_0xebe173(0x1cf),auth,async(_0x2b111a,_0x47a9d7)=>{const _0x2e1234=a0_0xebe173;try{const {username:_0x1d6102,email:_0x5328e0,role:_0xcfdc03}=_0x2b111a['user'],_0x329396=_0x2b111a['user'],_0x2c754a=await profile[_0x2e1234(0x1de)]({'email':_0x329396[_0x2e1234(0x18b)]}),_0x547665=await master_shop[_0x2e1234(0x1b5)]();console['log']('barcode\x20Product\x20master',_0x547665);const _0x44f36a=_0x2b111a['params']['id'],_0x53cfb2=await product[_0x2e1234(0x1ac)](_0x44f36a);console[_0x2e1234(0x22e)](_0x2e1234(0x21c),_0x53cfb2);if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x1d5))var _0x30b651=users['English'];else{if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x1e8))var _0x30b651=users[_0x2e1234(0x1e8)];else{if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x198))var _0x30b651=users[_0x2e1234(0x198)];else{if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x243))var _0x30b651=users[_0x2e1234(0x243)];else{if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x1e3))var _0x30b651=users[_0x2e1234(0x1e3)];else{if(_0x547665[0x0][_0x2e1234(0x1dc)]==_0x2e1234(0x195))var _0x30b651=users[_0x2e1234(0x204)];else{if(_0x547665[0x0]['language']=='Chinese')var _0x30b651=users[_0x2e1234(0x18c)];else{if(_0x547665[0x0]['language']==_0x2e1234(0x1d2))var _0x30b651=users[_0x2e1234(0x219)];}}}}}}}_0x47a9d7[_0x2e1234(0x1ef)](_0x2e1234(0x1e2),{'success':_0x2b111a[_0x2e1234(0x1ab)]('success'),'errors':_0x2b111a['flash'](_0x2e1234(0x216)),'role':_0x329396,'profile':_0x2c754a,'alldata':_0x53cfb2,'master_shop':_0x547665,'language':_0x30b651});}catch(_0x2350dc){console[_0x2e1234(0x22e)](_0x2350dc);}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x1af),auth,async(_0x57037c,_0x173bc2)=>{const _0x437559=a0_0xebe173;try{const _0x3a87c1=new excelJS[(_0x437559(0x1c6))](),_0x4e8de2=_0x3a87c1[_0x437559(0x1ae)](_0x437559(0x244));return _0x4e8de2[_0x437559(0x1d3)]=[{'header':_0x437559(0x18f),'key':_0x437559(0x1c2),'width':0xa},{'header':_0x437559(0x19c),'key':_0x437559(0x1ba),'width':0xa},{'header':_0x437559(0x21e),'key':_0x437559(0x1b6),'width':0xa},{'header':_0x437559(0x1a2),'key':_0x437559(0x1f2),'width':0xa},{'header':_0x437559(0x1d0),'key':_0x437559(0x184),'width':0xa},{'header':_0x437559(0x1fa),'key':_0x437559(0x1ff),'width':0xa},{'header':_0x437559(0x1a0),'key':_0x437559(0x1ff),'width':0xa},{'header':_0x437559(0x1c5),'key':_0x437559(0x1ff),'width':0xa},{'header':'Category','key':'PCat','width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x437559(0x190),'key':'Prod_Cat','width':0xa}],_0x173bc2['setHeader'](_0x437559(0x1eb),_0x437559(0x1c9)),_0x173bc2[_0x437559(0x18d)](_0x437559(0x224),_0x437559(0x1ad)),_0x3a87c1['xlsx'][_0x437559(0x183)](_0x173bc2)[_0x437559(0x1c3)](()=>{_0x173bc2['status'](0xc8);});}catch(_0x237d35){_0x173bc2[_0x437559(0x238)](0x190)[_0x437559(0x1f7)](_0x237d35);}});function a0_0x4611(){const _0x51f454=['columns','unit','English\x20(US)','push','unit\x20data\x20delete\x20successfully','Router','7WSgnKW','\x20unit\x20is\x20add\x20successfully','$brand','language','save','findOne','/products/units','sheet_to_json','$product_name','product_barcode','French','master','Sheets','alertquantity','categories\x20data\x20delete\x20successfully','Hindi','data','\x20<>\x20','Content-Type','base64','redirect','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','render','success','product\x20update\x20successfully','PSecondaryUnits','filename','jsbarcode','97935OjMJha','303072LezsNA','send','/brands/:id','now','Primary_Code','/categories','product_docs','1674508xPPnde','brand\x20data\x20delete\x20successfully','ProductCode','originalname','Enabled','/print_barcode_filter_search/','/products/categories','Portuguese','Finished\x20Goods','units','/units/:id','user','products','public/Migration','268166PnmtxS','get','../public/language/languages.json','/products/view','edit_product','$category','/print_barcode','/barcode_data','Alert_QTY','$product_docs','exceljs','errors','/select_data','6224970dBSJDD','Arabic','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','params','barcode\x20user_id','Raw\x20Materials','Units','add_product','findByIdAndDelete','Maximum_Stocks','concat','category','Content-Disposition','English','brands','brand\x20data\x20update\x20successfully','toString','secondary_unit','categories','Products\x20warehouse_data','CODE128','canvas','log','/brands','/categories/delete/:id','/brands/delete/:id','prod_categ','product_category','warehouse','long','product_stock','defaultProduct.avif','status','forEach','name','width','81VRwDqh','bind','post','\x20categories\x20is\x20add\x20successfully','Category','product_barcode_products','numeric','Spanish','Products','multer','/filter_product','write','MaxperUnits','aggregate','$product_details.product_name','end','json','readFile','primary_code','email','Chinese','setHeader','unit\x20data\x20update\x20successfully','Product_Name','Products_category','message','exports','edit\x20Product\x20master','$product_category','Portuguese\x20(BR)','$product_stock','product\x20edit','German','stock','3TUmzhF','toBuffer','Brands','/view','public/upload','/units','Secondary_Code','image','Secondary_Units','diskStorage','body','\x20Edit\x20Successfully','/barcode_filter','/categories/:id','SheetNames','Products\x20master','../middleware/auth','flash','findById','attachment;\x20filename=Product_Migration_File.xlsx','addWorksheet','/products_export_migrate_file','product_code','$_id','\x20added\x20successfully','maxStocks','file','find','PUnits','length','/products/brands','\x20brand\x20is\x20add\x20successfully','PBrands','height','categ','min','586044KHEdiI','/view/add_products','migrate_product_fule','secondary_code','PName','then','categories_edit','Product_Code','Workbook','$secondary_unit','brand','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','express','single','xlsx','2442906AivuTd','../models/all_models','/barcode/:id','max_number_per_units','/view/:id','Arabic\x20(ae)'];a0_0x4611=function(){return _0x51f454;};return a0_0x4611();}const storage1=multer[a0_0xebe173(0x1a3)]({'destination':(_0x4fec29,_0x484844,_0x2031f9)=>{const _0x4acede=a0_0xebe173;_0x2031f9(null,_0x4acede(0x20a));},'filename':(_0x21ba09,_0x5e541b,_0x176dbc)=>{const _0x4d0dd9=a0_0xebe173;_0x176dbc(null,Date[_0x4d0dd9(0x1f9)]()+_0x5e541b[_0x4d0dd9(0x200)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x580c(_0x38b69b,_0x5c431d){const _0x461159=a0_0x4611();return a0_0x580c=function(_0x580c9c,_0x1a2665){_0x580c9c=_0x580c9c-0x182;let _0x2140f8=_0x461159[_0x580c9c];return _0x2140f8;},a0_0x580c(_0x38b69b,_0x5c431d);}router['post']('/products_import_migrate_file',auth,uploadMigrate['single'](a0_0xebe173(0x1c0)),async(_0x5740a9,_0xce04e7)=>{const _0x5e78a5=a0_0xebe173,_0x4bae0f=_0x5740a9['file'][_0x5e78a5(0x1f3)],_0x239357=await xlsx[_0x5e78a5(0x189)]('public/Migration/'+_0x4bae0f);let _0xa0f1c4=_0x239357[_0x5e78a5(0x1a8)],_0x3c064d=xlsx['utils'][_0x5e78a5(0x1e0)](_0x239357[_0x5e78a5(0x1e5)][_0xa0f1c4[0x0]]);for(const _0x1fac6d of _0x3c064d){const _0x3c4229=_0x1fac6d[_0x5e78a5(0x18f)],_0x3d4012=_0x1fac6d['Brands'],_0x526312=_0x1fac6d[_0x5e78a5(0x21e)],_0xfde7fa=_0x1fac6d[_0x5e78a5(0x1a2)],_0x2f3249=_0x1fac6d[_0x5e78a5(0x1c5)],_0xffdd32=_0x1fac6d[_0x5e78a5(0x240)],_0x156419=_0x1fac6d[_0x5e78a5(0x213)],_0x241383=_0x1fac6d[_0x5e78a5(0x1fa)],_0x5990e3=_0x1fac6d[_0x5e78a5(0x1a0)],_0x3fcbe3=_0x1fac6d[_0x5e78a5(0x221)],_0x1b7828=_0x1fac6d['max_number_per_units'],_0x11c3bd=_0x1fac6d['Products_category'];try{let _0x15ffda=await categories['findOne']({'name':_0xffdd32});if(!_0x15ffda){const _0x1007d0=new categories({'name':_0xffdd32,'products':'0'});_0x15ffda=await _0x1007d0[_0x5e78a5(0x1dd)]();}let _0x887d07=await brands[_0x5e78a5(0x1de)]({'name':_0x3d4012});if(!_0x887d07){const _0xda57bf=new brands({'name':_0x3d4012,'products':'0'});_0x887d07=await _0xda57bf[_0x5e78a5(0x1dd)]();}let _0xfcc6ed=await units[_0x5e78a5(0x1de)]({'name':_0x526312,'secondary_unit':_0xfde7fa});if(!_0xfcc6ed){const _0x1c801a=new units({'name':_0x526312,'secondary_unit':_0xfde7fa,'products':'0'});_0xfcc6ed=await _0x1c801a[_0x5e78a5(0x1dd)]();}const _0x3b3e70=await product[_0x5e78a5(0x1b5)]({'name':_0x3c4229,'category':_0x15ffda[_0x5e78a5(0x23a)],'brand':_0x887d07[_0x5e78a5(0x23a)],'secondary_unit':_0xfcc6ed['secondary_unit'],'product_code':_0x2f3249});console[_0x5e78a5(0x22e)](_0x3b3e70[_0x5e78a5(0x1b7)]+'\x20<>\x20'+_0x15ffda['name']+_0x5e78a5(0x1ea)+_0x887d07[_0x5e78a5(0x23a)]+'\x20<>\x20'+_0xfcc6ed[_0x5e78a5(0x229)]+_0x5e78a5(0x1ea)+_0x2f3249+_0x5e78a5(0x1ea)+_0x3c4229);if(_0x3b3e70[_0x5e78a5(0x1b7)]===0x0){const _0x1f4515=new product({'image':_0x5e78a5(0x237),'name':_0x3c4229,'category':_0x15ffda[_0x5e78a5(0x23a)],'brand':_0x887d07['name'],'unit':_0xfcc6ed[_0x5e78a5(0x23a)],'alertquantity':_0x156419,'product_code':_0x2f3249,'secondary_unit':_0xfcc6ed[_0x5e78a5(0x229)],'primary_code':_0x241383,'secondary_code':_0x5990e3,'maxStocks':_0x3fcbe3,'maxProdPerUnit':_0x1b7828,'product_category':_0x11c3bd}),_0x2bea74=await _0x1f4515[_0x5e78a5(0x1dd)]();_0x15ffda[_0x5e78a5(0x209)]=parseInt(_0x15ffda['products'])+0x1,await _0x15ffda[_0x5e78a5(0x1dd)](),_0x887d07[_0x5e78a5(0x209)]=parseInt(_0x887d07[_0x5e78a5(0x209)])+0x1,await _0x887d07[_0x5e78a5(0x1dd)](),_0xfcc6ed['products']=parseInt(_0xfcc6ed[_0x5e78a5(0x209)])+0x1,await _0xfcc6ed[_0x5e78a5(0x1dd)](),_0x5740a9['flash'](_0x5e78a5(0x1f0),_0x3c4229+_0x5e78a5(0x1b2));}else{console['log'](_0x3b3e70[0x0]);const _0x433dea=_0x3b3e70[0x0];_0x433dea[_0x5e78a5(0x223)]=_0x15ffda[_0x5e78a5(0x23a)],_0x433dea[_0x5e78a5(0x1c8)]=_0x887d07[_0x5e78a5(0x23a)],_0x433dea[_0x5e78a5(0x1d4)]=_0xfcc6ed['name'],_0x433dea['alertquantity']=_0x156419,_0x433dea['product_code']=_0x2f3249,_0x433dea['secondary_unit']=_0xfcc6ed['secondary_unit'],_0x433dea[_0x5e78a5(0x18a)]=_0x241383,_0x433dea[_0x5e78a5(0x1c1)]=_0x5990e3,_0x433dea[_0x5e78a5(0x1b3)]=_0x3fcbe3,_0x433dea['maxProdPerUnit']=_0x1b7828,_0x433dea[_0x5e78a5(0x233)]=_0x11c3bd;const _0x12a465=await _0x433dea[_0x5e78a5(0x1dd)]();_0x5740a9[_0x5e78a5(0x1ab)]('success',_0x12a465['name']+_0x5e78a5(0x1a5));}}catch(_0x572180){_0xce04e7['status'](0x1f4)[_0x5e78a5(0x188)]({'proderror':_0x572180['message'],'aproduct':_0x3c4229});}}_0xce04e7[_0x5e78a5(0x1ed)](_0x5e78a5(0x20e));}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x217),auth,async(_0x5bd84f,_0x41e5ec)=>{const _0x3ab3a3=a0_0xebe173;try{console[_0x3ab3a3(0x22e)](_0x5bd84f['body']);const {data_cateory:_0x1ab36d,datachoose:_0x4be6b0}=_0x5bd84f[_0x3ab3a3(0x1a4)];var _0x23edad;if(_0x4be6b0==_0x3ab3a3(0x232))_0x23edad=await product[_0x3ab3a3(0x185)]([{'$group':{'_id':_0x3ab3a3(0x194)}}]);else{if(_0x4be6b0==_0x3ab3a3(0x226))_0x23edad=await product[_0x3ab3a3(0x185)]([{'$match':{'product_category':_0x1ab36d}},{'$group':{'_id':_0x3ab3a3(0x1db)}}]);else _0x4be6b0==_0x3ab3a3(0x1bc)&&(_0x23edad=await product[_0x3ab3a3(0x185)]([{'$match':{'product_category':_0x1ab36d}},{'$group':{'_id':_0x3ab3a3(0x210)}}]));}_0x41e5ec[_0x3ab3a3(0x188)](_0x23edad);}catch(_0x23cda1){_0x41e5ec[_0x3ab3a3(0x188)]({'message':_0x23cda1[_0x3ab3a3(0x191)]});}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x182),auth,async(_0x4479a6,_0x5a82ef)=>{const _0x5b93b8=a0_0xebe173;try{const {data_choosing:_0x295e23,data_selected:_0x41b995}=_0x4479a6[_0x5b93b8(0x1a4)];var _0x537b3a;if(_0x295e23==_0x5b93b8(0x232))_0x537b3a=await product[_0x5b93b8(0x185)]([{'$match':{'product_category':_0x41b995}}]);else{if(_0x295e23==_0x5b93b8(0x226))_0x537b3a=await product[_0x5b93b8(0x185)]([{'$match':{'brand':_0x41b995}}]);else _0x295e23==_0x5b93b8(0x1bc)&&(_0x537b3a=await product[_0x5b93b8(0x185)]([{'$match':{'category':_0x41b995}}]));}_0x5a82ef[_0x5b93b8(0x188)](_0x537b3a);}catch(_0x1d4829){_0x5a82ef[_0x5b93b8(0x188)]({'message':_0x1d4829[_0x5b93b8(0x191)]});}}),router[a0_0xebe173(0x20c)](a0_0xebe173(0x211),auth,async(_0x377786,_0x30c384)=>{const _0x355c9d=a0_0xebe173,_0x562a7e=_0x377786['user'],_0x56a75f=await profile[_0x355c9d(0x1de)]({'email':_0x562a7e['email']}),_0x106375=await master_shop[_0x355c9d(0x1b5)](),_0x44ce5b=await product[_0x355c9d(0x1b5)]();if(_0x106375[0x0]['language']==_0x355c9d(0x1d5))var _0x221746=users['English'];else{if(_0x106375[0x0]['language']==_0x355c9d(0x1e8))var _0x221746=users[_0x355c9d(0x1e8)];else{if(_0x106375[0x0][_0x355c9d(0x1dc)]==_0x355c9d(0x198))var _0x221746=users['German'];else{if(_0x106375[0x0][_0x355c9d(0x1dc)]==_0x355c9d(0x243))var _0x221746=users['Spanish'];else{if(_0x106375[0x0][_0x355c9d(0x1dc)]==_0x355c9d(0x1e3))var _0x221746=users[_0x355c9d(0x1e3)];else{if(_0x106375[0x0][_0x355c9d(0x1dc)]==_0x355c9d(0x195))var _0x221746=users[_0x355c9d(0x204)];else{if(_0x106375[0x0]['language']==_0x355c9d(0x18c))var _0x221746=users[_0x355c9d(0x18c)];else{if(_0x106375[0x0]['language']==_0x355c9d(0x1d2))var _0x221746=users[_0x355c9d(0x219)];}}}}}}}_0x30c384[_0x355c9d(0x1ef)](_0x355c9d(0x241),{'success':_0x377786[_0x355c9d(0x1ab)](_0x355c9d(0x1f0)),'errors':_0x377786['flash'](_0x355c9d(0x216)),'role':_0x562a7e,'profile':_0x56a75f,'products':_0x44ce5b,'master_shop':_0x106375,'language':_0x221746});}),router['post'](a0_0xebe173(0x212),auth,async(_0x2e2a3f,_0x2d8c7d)=>{const _0xdc71c6=a0_0xebe173,_0x1e48de=await product[_0xdc71c6(0x1b5)]();_0x2d8c7d[_0xdc71c6(0x188)]({'data':_0x1e48de});}),router['post'](a0_0xebe173(0x1a6),auth,async(_0x2da6c4,_0x346ca8)=>{const _0x481c4b=a0_0xebe173;try{const {dataProdCat:_0x11f374,dataProdIdentity:_0x522ab2}=_0x2da6c4[_0x481c4b(0x1a4)];var _0x5de2a7;switch(_0x11f374){case'fg':switch(_0x522ab2){case _0x481c4b(0x19c):_0x5de2a7=await product[_0x481c4b(0x185)]([{'$match':{'product_category':_0x481c4b(0x205)}},{'$group':{'_id':_0x481c4b(0x1db)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x5de2a7=await product[_0x481c4b(0x185)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x481c4b(0x210)}},{'$project':{'category':_0x481c4b(0x1b1)}}]);break;}break;case'rm':switch(_0x522ab2){case _0x481c4b(0x19c):_0x5de2a7=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x481c4b(0x1db)}},{'$project':{'brand':_0x481c4b(0x1b1)}}]);break;case _0x481c4b(0x240):_0x5de2a7=await product[_0x481c4b(0x185)]([{'$match':{'product_category':_0x481c4b(0x21d)}},{'$group':{'_id':_0x481c4b(0x210)}},{'$project':{'category':_0x481c4b(0x1b1)}}]);break;}break;}_0x346ca8[_0x481c4b(0x188)](_0x5de2a7);}catch(_0x3ef494){_0x346ca8['json']({'message':_0x3ef494[_0x481c4b(0x191)]});}}),router['post']('/print_barcode_filter/',auth,async(_0x309c4e,_0x2812bd)=>{const _0x4a54a1=a0_0xebe173;try{console[_0x4a54a1(0x22e)](_0x309c4e[_0x4a54a1(0x1a4)]);const {prod_cat:_0x357680,identity:_0xca1301,valueData:_0x22c667,typeofbarcode:_0x26c8db}=_0x309c4e[_0x4a54a1(0x1a4)];let _0x4bf08a;switch(_0x357680){case'fg':if(_0xca1301==_0x4a54a1(0x19c))_0x4bf08a=await product[_0x4a54a1(0x185)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x22c667}}]);else _0xca1301==_0x4a54a1(0x240)&&(_0x4bf08a=await product['aggregate']([{'$match':{'product_category':_0x4a54a1(0x205),'category':_0x22c667}}]));break;case'rm':if(_0xca1301=='Brands')_0x4bf08a=await product['aggregate']([{'$match':{'product_category':_0x4a54a1(0x21d),'brand':_0x22c667}}]);else _0xca1301==_0x4a54a1(0x240)&&(_0x4bf08a=await product[_0x4a54a1(0x185)]([{'$match':{'product_category':_0x4a54a1(0x21d),'category':_0x22c667}}]));break;}const _0x4b913c=_0x1585ab=>_0x1585ab*0x48,_0x34b56f={'width':0x3,'height':0x1},_0x515c32=new PDFDocument({'margin':_0x4b913c(0.75),'size':[_0x4b913c(_0x34b56f[_0x4a54a1(0x23b)]),_0x4b913c(_0x34b56f[_0x4a54a1(0x1bb)])],'bufferPages':!![]}),_0x4f5c53=_0x4bf08a['length'];for(let _0x33255f=0x0;_0x33255f<=_0x4f5c53;_0x33255f++){if(_0x33255f!=_0x4f5c53){const _0xfaf698=_0x4bf08a[_0x33255f]['name'],_0x1632de=_0x4bf08a[_0x33255f]['primary_code'],_0x34d590=_0x4bf08a[_0x33255f]['secondary_code'],_0x1ba8c8=_0x4bf08a[_0x33255f][_0x4a54a1(0x1b0)];var _0xa559c3;switch(_0x26c8db){case'1':_0xa559c3=_0x1632de;break;case'2':_0xa559c3=_0x34d590;break;case'3':_0xa559c3=_0x1ba8c8;break;}const _0xc3f805={'width':0xd2,'height':0x64},_0xeaba04={'width':_0x4b913c(_0x34b56f[_0x4a54a1(0x23b)]),'height':_0x4b913c(_0x34b56f[_0x4a54a1(0x1bb)])},_0x13c744=new Canvas();JsBarcode(_0x13c744,_0xa559c3,{'format':_0x4a54a1(0x22c),'height':_0xc3f805['height'],'displayValue':!![],'text':_0xa559c3});const _0x456000=_0x13c744['toBuffer'](),_0x5abff5=_0xeaba04[_0x4a54a1(0x23b)]/_0xc3f805[_0x4a54a1(0x23b)],_0x28a8b2=_0xeaba04[_0x4a54a1(0x1bb)]/_0xc3f805[_0x4a54a1(0x1bb)],_0x2baac6=Math['min'](_0x5abff5,_0x28a8b2),_0xc0e212=_0xc3f805['width']*_0x2baac6,_0x4dfa76=_0xc3f805[_0x4a54a1(0x1bb)]*_0x2baac6,_0x51729f=(_0xeaba04['width']-_0xc0e212)/0x2,_0x268c60=(_0xeaba04[_0x4a54a1(0x1bb)]-_0x4dfa76)/0x2;_0x515c32[_0x4a54a1(0x1a1)](_0x456000,_0x51729f,_0x268c60,{'width':_0xc0e212,'height':_0x4dfa76}),_0x33255f!=_0x4f5c53&&_0x515c32['addPage']();}}const _0x2df4bd=[];_0x515c32['on'](_0x4a54a1(0x1e9),_0x2df4bd[_0x4a54a1(0x1d6)][_0x4a54a1(0x23d)](_0x2df4bd)),_0x515c32['on'](_0x4a54a1(0x187),()=>{const _0xfb748=_0x4a54a1,_0x38dbe6=Buffer[_0xfb748(0x222)](_0x2df4bd),_0x2abe57=_0x38dbe6[_0xfb748(0x228)]('base64');_0x2812bd[_0xfb748(0x188)]({'pdfContent':_0x2abe57});}),_0x515c32['end']();}catch(_0x5b799d){_0x2812bd[_0x4a54a1(0x188)]({'message':_0x5b799d[_0x4a54a1(0x191)]});}}),router[a0_0xebe173(0x23e)](a0_0xebe173(0x202),auth,async(_0xfe9328,_0x39f348)=>{const _0x19ec52=a0_0xebe173;try{console[_0x19ec52(0x22e)](_0xfe9328[_0x19ec52(0x1a4)]);const {prod_cat:_0x39f423,identity:_0x36306a,valueData:_0x138380}=_0xfe9328[_0x19ec52(0x1a4)];let _0x3e2277;switch(_0x39f423){case'fg':if(_0x36306a==_0x19ec52(0x19c))_0x3e2277=await product['aggregate']([{'$match':{'product_category':_0x19ec52(0x205),'brand':_0x138380}}]);else _0x36306a==_0x19ec52(0x240)&&(_0x3e2277=await product['aggregate']([{'$match':{'product_category':_0x19ec52(0x205),'category':_0x138380}}]));break;case'rm':if(_0x36306a==_0x19ec52(0x19c))_0x3e2277=await product[_0x19ec52(0x185)]([{'$match':{'product_category':_0x19ec52(0x21d),'brand':_0x138380}}]);else _0x36306a==_0x19ec52(0x240)&&(_0x3e2277=await product[_0x19ec52(0x185)]([{'$match':{'product_category':_0x19ec52(0x21d),'category':_0x138380}}]));break;}_0x39f348[_0x19ec52(0x188)]({'data':_0x3e2277});}catch(_0xebb3f9){_0x39f348[_0x19ec52(0x188)]({'message':_0xebb3f9[_0x19ec52(0x191)]});}}),router[a0_0xebe173(0x23e)]('/print_barcode_single/:id',auth,async(_0x83611d,_0x1ecddb)=>{const _0x91967f=a0_0xebe173;try{const _0x61ea5f=_0x83611d[_0x91967f(0x21b)]['id'],{copies:_0x5ab06f,typeofbarcode:_0x4c59a5}=_0x83611d['body'];var _0x376416=await product[_0x91967f(0x1ac)](_0x61ea5f);const _0xbfb8fc=_0x56221a=>_0x56221a*0x48,_0x410de5={'width':0x3,'height':0x1},_0x46d686=new PDFDocument({'margin':_0xbfb8fc(0.75),'size':[_0xbfb8fc(_0x410de5[_0x91967f(0x23b)]),_0xbfb8fc(_0x410de5[_0x91967f(0x1bb)])],'bufferPages':!![]}),_0x424722=_0x5ab06f,_0x28105c=_0x376416[_0x91967f(0x23a)],_0x3be822=_0x376416[_0x91967f(0x18a)],_0x43adc1=_0x376416[_0x91967f(0x1c1)],_0x43b404=_0x376416[_0x91967f(0x1b0)];let _0x5ca6c1;switch(_0x4c59a5){case'1':_0x5ca6c1=_0x3be822;break;case'2':_0x5ca6c1=_0x43adc1;break;case'3':_0x5ca6c1=_0x43b404;break;}const _0x35965c={'width':0xd2,'height':0x64},_0x28e963={'width':_0xbfb8fc(_0x410de5[_0x91967f(0x23b)]),'height':_0xbfb8fc(_0x410de5[_0x91967f(0x1bb)])};for(let _0xeeca65=0x1;_0xeeca65<=_0x424722;_0xeeca65++){const _0x4c404b=new Canvas();JsBarcode(_0x4c404b,_0x5ca6c1,{'format':_0x91967f(0x22c),'height':_0x35965c['height'],'displayValue':!![],'text':_0x5ca6c1});const _0x35c773=_0x4c404b[_0x91967f(0x19b)](),_0x4ff8fb=_0x28e963[_0x91967f(0x23b)]/_0x35965c[_0x91967f(0x23b)],_0x52b4e9=_0x28e963[_0x91967f(0x1bb)]/_0x35965c['height'],_0x3a2b57=Math[_0x91967f(0x1bd)](_0x4ff8fb,_0x52b4e9),_0x5a27e2=_0x35965c[_0x91967f(0x23b)]*_0x3a2b57,_0x4bd195=_0x35965c['height']*_0x3a2b57,_0x426294=(_0x28e963['width']-_0x5a27e2)/0x2,_0x1c880f=(_0x28e963[_0x91967f(0x1bb)]-_0x4bd195)/0x2;_0x46d686[_0x91967f(0x1a1)](_0x35c773,_0x426294,_0x1c880f,{'width':_0x5a27e2,'height':_0x4bd195}),_0xeeca65!=_0x424722&&_0x46d686['addPage']();}const _0x16fdb3=[];_0x46d686['on'](_0x91967f(0x1e9),_0x16fdb3[_0x91967f(0x1d6)][_0x91967f(0x23d)](_0x16fdb3)),_0x46d686['on'](_0x91967f(0x187),()=>{const _0x7dbca9=_0x91967f,_0x3ed128=Buffer[_0x7dbca9(0x222)](_0x16fdb3),_0x302d0b=_0x3ed128[_0x7dbca9(0x228)](_0x7dbca9(0x1ec));_0x1ecddb[_0x7dbca9(0x188)]({'pdfContent':_0x302d0b});}),_0x46d686[_0x91967f(0x187)]();}catch(_0xe1b773){_0x1ecddb['json']({'message':_0xe1b773[_0x91967f(0x191)]});}}),module[a0_0xebe173(0x192)]=router;