const a0_0x4fcd7b=a0_0x70e5;(function(_0x427781,_0x54ada7){const _0xe6a7c6=a0_0x70e5,_0x1b7d71=_0x427781();while(!![]){try{const _0x1c5d93=-parseInt(_0xe6a7c6(0x189))/0x1+parseInt(_0xe6a7c6(0xee))/0x2+parseInt(_0xe6a7c6(0x161))/0x3*(-parseInt(_0xe6a7c6(0x137))/0x4)+parseInt(_0xe6a7c6(0x16b))/0x5*(parseInt(_0xe6a7c6(0x130))/0x6)+parseInt(_0xe6a7c6(0xfc))/0x7*(parseInt(_0xe6a7c6(0x12a))/0x8)+parseInt(_0xe6a7c6(0x15a))/0x9+-parseInt(_0xe6a7c6(0xf7))/0xa;if(_0x1c5d93===_0x54ada7)break;else _0x1b7d71['push'](_0x1b7d71['shift']());}catch(_0x13fe29){_0x1b7d71['push'](_0x1b7d71['shift']());}}}(a0_0x1984,0xdf09e));const express=require('express'),res=require(a0_0x4fcd7b(0xf6)),app=express(),router=express[a0_0x4fcd7b(0x127)](),multer=require(a0_0x4fcd7b(0x10c)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x4fcd7b(0x19b)),auth=require(a0_0x4fcd7b(0x1a9)),users=require(a0_0x4fcd7b(0x171)),excelJS=require(a0_0x4fcd7b(0x198)),xlsx=require(a0_0x4fcd7b(0x197)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x4fcd7b(0x14f)),PDFDocument=require('pdfkit-table');router['get'](a0_0x4fcd7b(0x155),auth,async(_0x582751,_0x3df1ad)=>{const _0x5d7ded=a0_0x4fcd7b;try{const {username:_0x538ed5,email:_0x567a63,role:_0x30f07b}=_0x582751[_0x5d7ded(0x133)],_0x152e81=_0x582751['user'],_0x5df0f4=await profile[_0x5d7ded(0x11e)]({'email':_0x152e81['email']}),_0x34605e=await master_shop[_0x5d7ded(0x179)]();console['log']('master',_0x34605e);const _0x4857da=await categories[_0x5d7ded(0x179)]();if(_0x34605e[0x0][_0x5d7ded(0x14d)]=='English\x20(US)')var _0x4e9431=users['English'];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x121))var _0x4e9431=users[_0x5d7ded(0x121)];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x14a))var _0x4e9431=users[_0x5d7ded(0x14a)];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x12c))var _0x4e9431=users[_0x5d7ded(0x12c)];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x177))var _0x4e9431=users[_0x5d7ded(0x177)];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x181))var _0x4e9431=users[_0x5d7ded(0x195)];else{if(_0x34605e[0x0]['language']=='Chinese')var _0x4e9431=users[_0x5d7ded(0x180)];else{if(_0x34605e[0x0][_0x5d7ded(0x14d)]==_0x5d7ded(0x17a))var _0x4e9431=users[_0x5d7ded(0x162)];}}}}}}}_0x3df1ad['render']('categories',{'success':_0x582751[_0x5d7ded(0x183)](_0x5d7ded(0x10b)),'errors':_0x582751[_0x5d7ded(0x183)](_0x5d7ded(0x1a1)),'role':_0x152e81,'profile':_0x5df0f4,'user':_0x4857da,'master_shop':_0x34605e,'language':_0x4e9431});}catch(_0x2fe344){console[_0x5d7ded(0x149)](_0x2fe344);}}),router['post']('/categories',auth,async(_0x3907d0,_0x447003)=>{const _0x46e8da=a0_0x4fcd7b;try{const {name:_0x5bc88e,products:_0x2f9a6a}=_0x3907d0[_0x46e8da(0x173)],_0x4c5f01=new categories({'name':_0x5bc88e,'products':_0x2f9a6a}),_0x35499f=await categories[_0x46e8da(0x11e)]({'name':_0x5bc88e});_0x35499f?_0x3907d0[_0x46e8da(0x183)](_0x46e8da(0x1a1),_0x5bc88e+_0x46e8da(0x1a0)):_0x3907d0['flash'](_0x46e8da(0x10b),_0x5bc88e+'\x20categories\x20is\x20add\x20successfully');const _0x3631b9=await _0x4c5f01[_0x46e8da(0x164)]();_0x447003[_0x46e8da(0x184)](_0x46e8da(0x185));}catch(_0x163a3e){console[_0x46e8da(0x149)](_0x163a3e);}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0x16a),auth,async(_0x2aa78d,_0x5c0cf9)=>{const _0x405a10=a0_0x4fcd7b;try{const {username:_0x25b382,email:_0x3f963c,role:_0xd8bdb6}=_0x2aa78d[_0x405a10(0x133)],_0x3e78a4=_0x2aa78d[_0x405a10(0x133)],_0x37d02a=await profile[_0x405a10(0x11e)]({'email':_0x3e78a4[_0x405a10(0x15f)]}),_0xeab4cb=await master_shop[_0x405a10(0x179)]();console[_0x405a10(0x149)](_0x405a10(0x122),_0xeab4cb);const _0x2a4577=_0x2aa78d['params']['id'];console[_0x405a10(0x149)](_0x2a4577);const _0x295ed2=await categories[_0x405a10(0x141)](_0x2a4577);if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x1a6))var _0x17b5fa=users['English'];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x121))var _0x17b5fa=users['Hindi'];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]=='German')var _0x17b5fa=users[_0x405a10(0x14a)];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x12c))var _0x17b5fa=users[_0x405a10(0x12c)];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x177))var _0x17b5fa=users[_0x405a10(0x177)];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x181))var _0x17b5fa=users[_0x405a10(0x195)];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x180))var _0x17b5fa=users[_0x405a10(0x180)];else{if(_0xeab4cb[0x0][_0x405a10(0x14d)]==_0x405a10(0x17a))var _0x17b5fa=users[_0x405a10(0x162)];}}}}}}}_0x5c0cf9[_0x405a10(0xfb)](_0x405a10(0x148),{'success':_0x2aa78d[_0x405a10(0x183)](_0x405a10(0x10b)),'errors':_0x2aa78d[_0x405a10(0x183)](_0x405a10(0x1a1)),'role':_0x3e78a4,'profile':_0x37d02a,'master_shop':_0xeab4cb,'user':_0x295ed2,'language':_0x17b5fa});}catch(_0x151b6f){console[_0x405a10(0x149)](_0x151b6f);}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x16a),auth,async(_0x4b76fb,_0x3660f1)=>{const _0x1d5dcd=a0_0x4fcd7b;try{const _0x21b45f=_0x4b76fb[_0x1d5dcd(0x13f)]['id'],_0x2fa7b7=await categories[_0x1d5dcd(0x115)](_0x21b45f,_0x4b76fb['body']);_0x4b76fb[_0x1d5dcd(0x183)](_0x1d5dcd(0x10b),''+users[_0x1d5dcd(0xf9)]),_0x3660f1[_0x1d5dcd(0x184)](_0x1d5dcd(0x185));}catch(_0x360e44){console[_0x1d5dcd(0x149)](_0x360e44);}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0x12b),auth,async(_0x2cb75d,_0x2cb49e)=>{const _0x22937a=a0_0x4fcd7b;try{const _0x202890=_0x2cb75d[_0x22937a(0x13f)]['id'],_0x48dab8=await categories[_0x22937a(0x194)](_0x202890);_0x2cb75d[_0x22937a(0x183)](_0x22937a(0x10b),_0x22937a(0x140)),_0x2cb49e[_0x22937a(0x184)]('/products/categories');}catch(_0x57131e){console[_0x22937a(0x149)](_0x57131e);}}),router[a0_0x4fcd7b(0x14b)]('/brands',auth,async(_0x461f4d,_0x410dad)=>{const _0x1b620f=a0_0x4fcd7b;try{const {username:_0x5c97dd,email:_0x1c57b8,role:_0x1cceb8}=_0x461f4d[_0x1b620f(0x133)],_0xbbb396=_0x461f4d['user'],_0x2f0e27=await profile[_0x1b620f(0x11e)]({'email':_0xbbb396['email']}),_0x2ff2b7=await master_shop['find']();console[_0x1b620f(0x149)](_0x1b620f(0x122),_0x2ff2b7);const _0x24c6c9=await brands[_0x1b620f(0x179)]();if(_0x2ff2b7[0x0]['language']==_0x1b620f(0x1a6))var _0x34dc8f=users['English'];else{if(_0x2ff2b7[0x0][_0x1b620f(0x14d)]=='Hindi')var _0x34dc8f=users[_0x1b620f(0x121)];else{if(_0x2ff2b7[0x0]['language']==_0x1b620f(0x14a))var _0x34dc8f=users[_0x1b620f(0x14a)];else{if(_0x2ff2b7[0x0][_0x1b620f(0x14d)]==_0x1b620f(0x12c))var _0x34dc8f=users['Spanish'];else{if(_0x2ff2b7[0x0][_0x1b620f(0x14d)]==_0x1b620f(0x177))var _0x34dc8f=users[_0x1b620f(0x177)];else{if(_0x2ff2b7[0x0]['language']==_0x1b620f(0x181))var _0x34dc8f=users[_0x1b620f(0x195)];else{if(_0x2ff2b7[0x0][_0x1b620f(0x14d)]==_0x1b620f(0x180))var _0x34dc8f=users['Chinese'];else{if(_0x2ff2b7[0x0]['language']==_0x1b620f(0x17a))var _0x34dc8f=users[_0x1b620f(0x162)];}}}}}}}_0x410dad['render'](_0x1b620f(0xeb),{'success':_0x461f4d['flash']('success'),'errors':_0x461f4d['flash'](_0x1b620f(0x1a1)),'role':_0xbbb396,'profile':_0x2f0e27,'master_shop':_0x2ff2b7,'user':_0x24c6c9,'language':_0x34dc8f});}catch(_0xbe65a3){console[_0x1b620f(0x149)](_0xbe65a3);}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x19a),auth,async(_0x5ec33a,_0x5dfeea)=>{const _0x43228d=a0_0x4fcd7b;try{const {name:_0x158c66,products:_0x319e3c}=_0x5ec33a[_0x43228d(0x173)],_0xa28f86=new brands({'name':_0x158c66,'products':_0x319e3c}),_0x128b33=await brands[_0x43228d(0x11e)]({'name':_0x158c66});_0x128b33?_0x5ec33a[_0x43228d(0x183)](_0x43228d(0x1a1),_0x158c66+_0x43228d(0x14c)):_0x5ec33a[_0x43228d(0x183)](_0x43228d(0x10b),_0x158c66+_0x43228d(0x1a8));const _0x3d8901=await _0xa28f86[_0x43228d(0x164)]();_0x5dfeea['redirect'](_0x43228d(0x15b));}catch(_0x2c263c){console[_0x43228d(0x149)](_0x2c263c);}}),router['get'](a0_0x4fcd7b(0x131),auth,async(_0x4cb82e,_0x207d5f)=>{const _0x1c705f=a0_0x4fcd7b;try{const {username:_0x3b1d6c,email:_0xf80045,role:_0x366360}=_0x4cb82e[_0x1c705f(0x133)],_0x5be8cd=_0x4cb82e[_0x1c705f(0x133)],_0x3982d0=await profile['findOne']({'email':_0x5be8cd['email']}),_0xf36d85=await master_shop[_0x1c705f(0x179)]();console[_0x1c705f(0x149)](_0x1c705f(0x122),_0xf36d85);const _0x557516=_0x4cb82e[_0x1c705f(0x13f)]['id'];console[_0x1c705f(0x149)](_0x557516);const _0x54e558=await brands[_0x1c705f(0x141)](_0x557516);if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x1a6))var _0x22a272=users[_0x1c705f(0x169)];else{if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x121))var _0x22a272=users[_0x1c705f(0x121)];else{if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x14a))var _0x22a272=users[_0x1c705f(0x14a)];else{if(_0xf36d85[0x0]['language']==_0x1c705f(0x12c))var _0x22a272=users[_0x1c705f(0x12c)];else{if(_0xf36d85[0x0]['language']==_0x1c705f(0x177))var _0x22a272=users[_0x1c705f(0x177)];else{if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x181))var _0x22a272=users[_0x1c705f(0x195)];else{if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x180))var _0x22a272=users[_0x1c705f(0x180)];else{if(_0xf36d85[0x0][_0x1c705f(0x14d)]==_0x1c705f(0x17a))var _0x22a272=users['Arabic'];}}}}}}}_0x207d5f[_0x1c705f(0xfb)](_0x1c705f(0xeb),{'success':_0x4cb82e[_0x1c705f(0x183)](_0x1c705f(0x10b)),'errors':_0x4cb82e[_0x1c705f(0x183)](_0x1c705f(0x1a1)),'role':_0x5be8cd,'profile':_0x3982d0,'master_shop':_0xf36d85,'user':_0x54e558,'language':_0x22a272});}catch(_0x173fd9){console['log'](_0x173fd9);}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x131),auth,async(_0x2576b7,_0x3f4382)=>{const _0x492136=a0_0x4fcd7b;try{const _0xab5b14=_0x2576b7[_0x492136(0x13f)]['id'],_0x574b8a=await brands[_0x492136(0x115)](_0xab5b14,_0x2576b7[_0x492136(0x173)]);_0x2576b7[_0x492136(0x183)](_0x492136(0x10b),_0x492136(0xf0)),_0x3f4382['redirect'](_0x492136(0x15b));}catch(_0x5568a2){console['log'](_0x5568a2);}}),router['get'](a0_0x4fcd7b(0x19f),auth,async(_0x595cce,_0x36d84c)=>{const _0x1dc124=a0_0x4fcd7b;try{const _0x5256cf=_0x595cce[_0x1dc124(0x13f)]['id'],_0x197cec=await brands[_0x1dc124(0x194)](_0x5256cf);_0x595cce[_0x1dc124(0x183)]('success',_0x1dc124(0x100)),_0x36d84c[_0x1dc124(0x184)](_0x1dc124(0x15b));}catch(_0x23360){console[_0x1dc124(0x149)](_0x23360);}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0x118),auth,async(_0x3dad00,_0x2e49fd)=>{const _0x13ff8b=a0_0x4fcd7b;try{const {username:_0x2eb576,email:_0xd6f9fd,role:_0x464e7e}=_0x3dad00[_0x13ff8b(0x133)],_0x1a5a2e=_0x3dad00[_0x13ff8b(0x133)],_0x141567=await profile[_0x13ff8b(0x11e)]({'email':_0x1a5a2e['email']}),_0x53e1c2=await master_shop['find']();console['log'](_0x13ff8b(0x122),_0x53e1c2);const _0x41f238=await units[_0x13ff8b(0x179)]();if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x1a6))var _0x3a9501=users[_0x13ff8b(0x169)];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x121))var _0x3a9501=users['Hindi'];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x14a))var _0x3a9501=users['German'];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x12c))var _0x3a9501=users['Spanish'];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]=='French')var _0x3a9501=users[_0x13ff8b(0x177)];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x181))var _0x3a9501=users[_0x13ff8b(0x195)];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]==_0x13ff8b(0x180))var _0x3a9501=users[_0x13ff8b(0x180)];else{if(_0x53e1c2[0x0][_0x13ff8b(0x14d)]=='Arabic\x20(ae)')var _0x3a9501=users[_0x13ff8b(0x162)];}}}}}}}_0x2e49fd['render']('units',{'success':_0x3dad00[_0x13ff8b(0x183)](_0x13ff8b(0x10b)),'errors':_0x3dad00[_0x13ff8b(0x183)]('errors'),'role':_0x1a5a2e,'profile':_0x141567,'master_shop':_0x53e1c2,'user':_0x41f238,'language':_0x3a9501});}catch(_0x151f92){console[_0x13ff8b(0x149)](_0x151f92);}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x118),auth,async(_0x2352a8,_0x4df5b9)=>{const _0x2c418a=a0_0x4fcd7b;try{const {name:_0x437668,secondary_unit:_0x332596,products:_0xf6f31b}=_0x2352a8[_0x2c418a(0x173)],_0x5f3151=new units({'name':_0x437668,'secondary_unit':_0x332596,'products':_0xf6f31b}),_0x1a85fb=await units[_0x2c418a(0x11e)]({'name':_0x437668});_0x1a85fb?_0x2352a8['flash']('errors',_0x437668+_0x2c418a(0xfe)):_0x2352a8['flash'](_0x2c418a(0x10b),_0x437668+_0x2c418a(0x132));const _0x3086f5=await _0x5f3151[_0x2c418a(0x164)]();_0x4df5b9['redirect'](_0x2c418a(0x170));}catch(_0x303ac0){console[_0x2c418a(0x149)](_0x303ac0);}}),router['get'](a0_0x4fcd7b(0x142),auth,async(_0x2f885a,_0x347d34)=>{const _0x57a5e4=a0_0x4fcd7b;try{const {username:_0x4f5580,email:_0x409b8a,role:_0x5de9b2}=_0x2f885a[_0x57a5e4(0x133)],_0x3b3245=_0x2f885a[_0x57a5e4(0x133)],_0x361d96=await profile[_0x57a5e4(0x11e)]({'email':_0x3b3245['email']}),_0x3bb978=await master_shop[_0x57a5e4(0x179)]();console[_0x57a5e4(0x149)](_0x57a5e4(0x122),_0x3bb978);const _0x6e9f64=_0x2f885a['params']['id'],_0x27419f=await units[_0x57a5e4(0x141)](_0x6e9f64);if(_0x3bb978[0x0][_0x57a5e4(0x14d)]==_0x57a5e4(0x1a6))var _0x24934a=users[_0x57a5e4(0x169)];else{if(_0x3bb978[0x0][_0x57a5e4(0x14d)]==_0x57a5e4(0x121))var _0x24934a=users['Hindi'];else{if(_0x3bb978[0x0]['language']==_0x57a5e4(0x14a))var _0x24934a=users['German'];else{if(_0x3bb978[0x0]['language']==_0x57a5e4(0x12c))var _0x24934a=users[_0x57a5e4(0x12c)];else{if(_0x3bb978[0x0][_0x57a5e4(0x14d)]==_0x57a5e4(0x177))var _0x24934a=users[_0x57a5e4(0x177)];else{if(_0x3bb978[0x0][_0x57a5e4(0x14d)]=='Portuguese\x20(BR)')var _0x24934a=users[_0x57a5e4(0x195)];else{if(_0x3bb978[0x0][_0x57a5e4(0x14d)]==_0x57a5e4(0x180))var _0x24934a=users[_0x57a5e4(0x180)];else{if(_0x3bb978[0x0][_0x57a5e4(0x14d)]=='Arabic\x20(ae)')var _0x24934a=users[_0x57a5e4(0x162)];}}}}}}}_0x347d34[_0x57a5e4(0xfb)]('units',{'success':_0x2f885a['flash'](_0x57a5e4(0x10b)),'errors':_0x2f885a[_0x57a5e4(0x183)](_0x57a5e4(0x1a1)),'role':_0x3b3245,'profile':_0x361d96,'master_shop':_0x3bb978,'user':_0x27419f,'language':_0x24934a});}catch(_0x4f9f53){console[_0x57a5e4(0x149)](_0x4f9f53);}}),router[a0_0x4fcd7b(0xf5)]('/units/:id',auth,async(_0xdebb50,_0x24cba8)=>{const _0x297118=a0_0x4fcd7b;try{const _0x3d2b16=_0xdebb50[_0x297118(0x13f)]['id'],_0xbd05d8=await units[_0x297118(0x115)](_0x3d2b16,_0xdebb50[_0x297118(0x173)]);_0xdebb50['flash'](_0x297118(0x10b),_0x297118(0x116)),_0x24cba8[_0x297118(0x184)](_0x297118(0x170));}catch(_0x734222){console['log'](_0x734222);}}),router[a0_0x4fcd7b(0x14b)]('/units/delete/:id',auth,async(_0x53a059,_0xb50a58)=>{const _0x28bd2a=a0_0x4fcd7b;try{const _0x3f950b=_0x53a059['params']['id'],_0x5a8f39=await units[_0x28bd2a(0x194)](_0x3f950b);_0x53a059['flash']('success',_0x28bd2a(0x13e)),_0xb50a58[_0x28bd2a(0x184)]('/products/units');}catch(_0x1900ad){console[_0x28bd2a(0x149)](_0x1900ad);}});const storage=multer['diskStorage']({'destination':(_0x16f1d8,_0x241ef4,_0x4db00d)=>{const _0x4ff31a=a0_0x4fcd7b;_0x4db00d(null,_0x4ff31a(0x151));},'filename':(_0x109613,_0x49eb28,_0x787bb8)=>{const _0x2d46ef=a0_0x4fcd7b;_0x787bb8(null,Date[_0x2d46ef(0x110)]()+_0x49eb28[_0x2d46ef(0x186)]);}}),upload=multer({'storage':storage});function a0_0x70e5(_0x264a78,_0x3d6890){const _0x198498=a0_0x1984();return a0_0x70e5=function(_0x70e5d6,_0x28db81){_0x70e5d6=_0x70e5d6-0xeb;let _0x1d8af9=_0x198498[_0x70e5d6];return _0x1d8af9;},a0_0x70e5(_0x264a78,_0x3d6890);}router[a0_0x4fcd7b(0x14b)]('/view',auth,async(_0x466724,_0x4ecfaa)=>{const _0x3a7396=a0_0x4fcd7b;try{const {username:_0x1e6248,email:_0x218549,role:_0x5d61f2}=_0x466724['user'],_0x4d57df=_0x466724['user'],_0x70595b=await profile['findOne']({'email':_0x4d57df['email']}),_0xf5de34={'year':_0x3a7396(0x188),'month':_0x3a7396(0x187),'day':_0x3a7396(0x188)},_0x1ba75e=await master_shop[_0x3a7396(0x179)]();console['log'](_0x3a7396(0x117),_0x1ba75e);const _0x4bde35=await product[_0x3a7396(0x179)]();console[_0x3a7396(0x149)](_0x3a7396(0x19c),_0x4bde35);const _0x5adc09=await warehouse[_0x3a7396(0x18c)]([{'$unwind':_0x3a7396(0x11a)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x3a7396(0x18b),'as':_0x3a7396(0x13d)}},{'$unwind':_0x3a7396(0x16d)},{'$project':{'product_name':_0x3a7396(0x11d),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x3a7396(0x13b),'product_stock':{'$sum':'$product_stock'}}}]);console['log'](_0x3a7396(0x11b),_0x5adc09),_0x5adc09['forEach'](_0x16510a=>{const _0x364733=_0x4bde35['map'](_0x69fc8b=>{const _0x25a637=a0_0x70e5;_0x69fc8b['name']==_0x16510a[_0x25a637(0x152)]&&(_0x69fc8b[_0x25a637(0x191)]=parseInt(_0x69fc8b[_0x25a637(0x191)])+parseInt(_0x16510a[_0x25a637(0x154)]));});}),console[_0x3a7396(0x149)](_0x3a7396(0x19c),_0x4bde35);if(_0x1ba75e[0x0][_0x3a7396(0x14d)]==_0x3a7396(0x1a6))var _0x324ab5=users['English'];else{if(_0x1ba75e[0x0][_0x3a7396(0x14d)]=='Hindi')var _0x324ab5=users['Hindi'];else{if(_0x1ba75e[0x0][_0x3a7396(0x14d)]==_0x3a7396(0x14a))var _0x324ab5=users[_0x3a7396(0x14a)];else{if(_0x1ba75e[0x0]['language']==_0x3a7396(0x12c))var _0x324ab5=users[_0x3a7396(0x12c)];else{if(_0x1ba75e[0x0][_0x3a7396(0x14d)]=='French')var _0x324ab5=users[_0x3a7396(0x177)];else{if(_0x1ba75e[0x0]['language']=='Portuguese\x20(BR)')var _0x324ab5=users[_0x3a7396(0x195)];else{if(_0x1ba75e[0x0][_0x3a7396(0x14d)]==_0x3a7396(0x180))var _0x324ab5=users[_0x3a7396(0x180)];else{if(_0x1ba75e[0x0]['language']==_0x3a7396(0x17a))var _0x324ab5=users['Arabic'];}}}}}}}_0x4ecfaa[_0x3a7396(0xfb)](_0x3a7396(0xf3),{'success':_0x466724[_0x3a7396(0x183)](_0x3a7396(0x10b)),'errors':_0x466724[_0x3a7396(0x183)]('errors'),'alldata':_0x4bde35,'profile':_0x70595b,'master_shop':_0x1ba75e,'role':_0x4d57df,'product_stock':_0x5adc09,'language':_0x324ab5});}catch(_0xf20ade){console['log'](_0xf20ade);}}),router['get']('/view/add_products',auth,async(_0x4a9420,_0x44f9eb)=>{const _0x22a4c1=a0_0x4fcd7b;try{const {username:_0x3a9f06,email:_0x43b7fb,role:_0x394cc5}=_0x4a9420[_0x22a4c1(0x133)],_0x13d453=_0x4a9420[_0x22a4c1(0x133)],_0x2839da=await profile['findOne']({'email':_0x13d453[_0x22a4c1(0x15f)]}),_0x38485e=await master_shop['find']();console[_0x22a4c1(0x149)](_0x22a4c1(0x122),_0x38485e);const _0x3fd8bb=await categories[_0x22a4c1(0x179)]({}),_0x5b0230=await brands[_0x22a4c1(0x179)]({}),_0x496dff=await units['find']({}),_0x12e3f5=await warehouse[_0x22a4c1(0x179)]({'status':_0x22a4c1(0x19e)});if(_0x38485e[0x0][_0x22a4c1(0x14d)]=='English\x20(US)')var _0x31d912=users[_0x22a4c1(0x169)];else{if(_0x38485e[0x0]['language']==_0x22a4c1(0x121))var _0x31d912=users['Hindi'];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]==_0x22a4c1(0x14a))var _0x31d912=users[_0x22a4c1(0x14a)];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]=='Spanish')var _0x31d912=users[_0x22a4c1(0x12c)];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]==_0x22a4c1(0x177))var _0x31d912=users[_0x22a4c1(0x177)];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]=='Portuguese\x20(BR)')var _0x31d912=users[_0x22a4c1(0x195)];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]==_0x22a4c1(0x180))var _0x31d912=users[_0x22a4c1(0x180)];else{if(_0x38485e[0x0][_0x22a4c1(0x14d)]==_0x22a4c1(0x17a))var _0x31d912=users['Arabic'];}}}}}}}_0x44f9eb[_0x22a4c1(0xfb)](_0x22a4c1(0x190),{'success':_0x4a9420['flash'](_0x22a4c1(0x10b)),'errors':_0x4a9420['flash'](_0x22a4c1(0x1a1)),'role':_0x13d453,'profile':_0x2839da,'categories':_0x3fd8bb,'brands':_0x5b0230,'master_shop':_0x38485e,'units':_0x496dff,'language':_0x31d912,'find_data':_0x12e3f5});}catch(_0x15db4a){console[_0x22a4c1(0x149)](_0x15db4a);}}),router[a0_0x4fcd7b(0xf5)]('/view/add_products',auth,upload['single'](a0_0x4fcd7b(0x156)),async(_0x41ae12,_0x5b33ea)=>{const _0x4c902f=a0_0x4fcd7b;try{const {name:_0x410a34,category:_0x1a4c6c,brand:_0x3f824c,unit:_0xd88ca1,alertquantity:_0x4b5506,stock:_0x2ded67,product_code:_0x9e182,warehouse:_0x5a77df,primary_ItemCode:_0x7ba1cc,second_ItemCode:_0x214309,second_unit:_0x5d7d56,maxPerUnit:_0x538b5f,MaxPerProduct:_0x1ae2c0}=_0x41ae12[_0x4c902f(0x173)],_0x141da2=_0x41ae12[_0x4c902f(0x123)]?.['filename']||_0x4c902f(0x18f),_0x4e1b6d=new product({'image':_0x141da2,'name':_0x410a34,'category':_0x1a4c6c,'brand':_0x3f824c,'unit':_0xd88ca1,'alertquantity':_0x4b5506,'stock':_0x2ded67,'product_code':_0x9e182,'warehouse':_0x5a77df,'primary_code':_0x7ba1cc,'secondary_code':_0x214309,'second_unit':_0x5d7d56,'maxStocks':_0x1ae2c0,'maxProdPerUnit':_0x538b5f}),_0x2f506f=await _0x4e1b6d[_0x4c902f(0x164)](),_0x154f3d=await categories[_0x4c902f(0x11e)]({'name':_0x1a4c6c});_0x154f3d[_0x4c902f(0xf3)]=parseInt(_0x154f3d['products'])+0x1,await _0x154f3d[_0x4c902f(0x164)]();const _0x1d3224=await brands[_0x4c902f(0x11e)]({'name':_0x3f824c});_0x1d3224['products']=parseInt(_0x1d3224[_0x4c902f(0xf3)])+0x1,await _0x1d3224['save']();const _0x52e779=await units[_0x4c902f(0x11e)]({'name':_0xd88ca1});_0x52e779['products']=parseInt(_0x52e779[_0x4c902f(0xf3)])+0x1,await _0x52e779['save'](),_0x41ae12['flash'](_0x4c902f(0x10b),_0x4c902f(0x10a)),_0x5b33ea[_0x4c902f(0x184)]('/products/view');}catch(_0x38b5c7){console['log'](_0x38b5c7);}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0xff),auth,async(_0x2b920b,_0x23cf45)=>{const _0x43aca9=a0_0x4fcd7b;try{const {username:_0x16f71e,email:_0x4882f6,role:_0x3128ce}=_0x2b920b[_0x43aca9(0x133)],_0x465239=_0x2b920b[_0x43aca9(0x133)],_0x5328fb=await profile[_0x43aca9(0x11e)]({'email':_0x465239['email']}),_0x2e164a=await master_shop[_0x43aca9(0x179)]();console[_0x43aca9(0x149)](_0x43aca9(0x114),_0x2e164a);const _0x289900=_0x2b920b['params']['id'],_0x1e4847=await product['findById'](_0x289900),_0x4a09a1=await categories[_0x43aca9(0x179)]({}),_0x2cc605=await brands[_0x43aca9(0x179)]({}),_0x542207=await units[_0x43aca9(0x179)]({}),_0x19d557=await warehouse['find']({'status':_0x43aca9(0x19e)}),_0x5973dd=await units[_0x43aca9(0x18c)]([{'$group':{'_id':_0x43aca9(0x159),'secondaryunit':{'$first':_0x43aca9(0x134)}}}]);if(_0x2e164a[0x0][_0x43aca9(0x14d)]=='English\x20(US)')var _0x95fcc8=users[_0x43aca9(0x169)];else{if(_0x2e164a[0x0][_0x43aca9(0x14d)]==_0x43aca9(0x121))var _0x95fcc8=users['Hindi'];else{if(_0x2e164a[0x0]['language']==_0x43aca9(0x14a))var _0x95fcc8=users[_0x43aca9(0x14a)];else{if(_0x2e164a[0x0][_0x43aca9(0x14d)]==_0x43aca9(0x12c))var _0x95fcc8=users[_0x43aca9(0x12c)];else{if(_0x2e164a[0x0][_0x43aca9(0x14d)]==_0x43aca9(0x177))var _0x95fcc8=users[_0x43aca9(0x177)];else{if(_0x2e164a[0x0]['language']=='Portuguese\x20(BR)')var _0x95fcc8=users[_0x43aca9(0x195)];else{if(_0x2e164a[0x0]['language']==_0x43aca9(0x180))var _0x95fcc8=users[_0x43aca9(0x180)];else{if(_0x2e164a[0x0][_0x43aca9(0x14d)]=='Arabic\x20(ae)')var _0x95fcc8=users[_0x43aca9(0x162)];}}}}}}}_0x23cf45[_0x43aca9(0xfb)]('edit_product',{'success':_0x2b920b['flash'](_0x43aca9(0x10b)),'errors':_0x2b920b[_0x43aca9(0x183)]('errors'),'role':_0x465239,'profile':_0x5328fb,'alldata':_0x1e4847,'categories':_0x4a09a1,'brands':_0x2cc605,'master_shop':_0x2e164a,'units':_0x542207,'secondunit':_0x5973dd,'find_data':_0x19d557,'language':_0x95fcc8});}catch(_0x1777e1){console[_0x43aca9(0x149)](_0x1777e1);}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0xff),auth,upload[a0_0x4fcd7b(0xed)](a0_0x4fcd7b(0x156)),async(_0x2ac5fe,_0x9ed20a)=>{const _0x3a1f27=a0_0x4fcd7b;try{console[_0x3a1f27(0x149)](_0x3a1f27(0x158));const _0x301dd8=_0x2ac5fe[_0x3a1f27(0x13f)]['id'],_0x353e55=await product[_0x3a1f27(0x141)](_0x301dd8),{image:_0x26d32a,name:_0x3787b4,category:_0x936fe,brand:_0x27e553,sku:_0x335dcb,unit:_0x2debfa,alertquantity:_0x3442b3,product_code:_0x83e410,warehouse:_0x54468a,primary_ItemCode:_0x1ff802,second_ItemCode:_0x3c6f98,second_unit:_0x1fae7e,maxPerUnit:_0x1776a1,MaxPerProduct:_0x44f882,prod_catdata:_0x57ebe4}=_0x2ac5fe['body'];_0x2ac5fe[_0x3a1f27(0x123)]&&(_0x353e55[_0x3a1f27(0x156)]=_0x2ac5fe[_0x3a1f27(0x123)]['filename']);_0x353e55['name']=_0x3787b4,_0x353e55[_0x3a1f27(0x11f)]=_0x936fe,_0x353e55['brand']=_0x27e553,_0x353e55['sku']=_0x335dcb,_0x353e55['unit']=_0x2debfa,_0x353e55[_0x3a1f27(0x17c)]=_0x3442b3,_0x353e55[_0x3a1f27(0x175)]=_0x83e410,_0x353e55['warehouse']=_0x54468a,_0x353e55[_0x3a1f27(0x12d)]=_0x1ff802,_0x353e55[_0x3a1f27(0x166)]=_0x3c6f98,_0x353e55[_0x3a1f27(0x111)]=_0x1fae7e,_0x353e55[_0x3a1f27(0x124)]=_0x44f882,_0x353e55['maxProdPerUnit']=_0x1776a1,_0x353e55[_0x3a1f27(0x120)]=_0x57ebe4;const _0x1ad73f=await _0x353e55[_0x3a1f27(0x164)]();console[_0x3a1f27(0x149)](_0x3a1f27(0x107),_0x353e55),_0x2ac5fe[_0x3a1f27(0x183)](_0x3a1f27(0x10b),_0x3a1f27(0xfa)),_0x9ed20a['redirect'](_0x3a1f27(0xf1));}catch(_0x19927f){console['log'](_0x19927f);}}),router['get'](a0_0x4fcd7b(0xfd),auth,async(_0x32cf93,_0x1180c9)=>{const _0x539412=a0_0x4fcd7b;try{const {username:_0x183852,email:_0x2c2d49,role:_0x4d0fbe}=_0x32cf93[_0x539412(0x133)],_0x42967e=_0x32cf93[_0x539412(0x133)],_0x4c39ec=await profile[_0x539412(0x11e)]({'email':_0x42967e[_0x539412(0x15f)]}),_0x5c22c6=await master_shop['find']();console[_0x539412(0x149)](_0x539412(0x1a7),_0x5c22c6);const _0x1b9c4e=_0x32cf93[_0x539412(0x13f)]['id'],_0x480be4=await product[_0x539412(0x141)](_0x1b9c4e);console[_0x539412(0x149)](_0x539412(0x128),_0x480be4);if(_0x5c22c6[0x0][_0x539412(0x14d)]==_0x539412(0x1a6))var _0x365400=users[_0x539412(0x169)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]=='Hindi')var _0x365400=users[_0x539412(0x121)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]==_0x539412(0x14a))var _0x365400=users[_0x539412(0x14a)];else{if(_0x5c22c6[0x0]['language']==_0x539412(0x12c))var _0x365400=users[_0x539412(0x12c)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]==_0x539412(0x177))var _0x365400=users[_0x539412(0x177)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]=='Portuguese\x20(BR)')var _0x365400=users[_0x539412(0x195)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]==_0x539412(0x180))var _0x365400=users[_0x539412(0x180)];else{if(_0x5c22c6[0x0][_0x539412(0x14d)]==_0x539412(0x17a))var _0x365400=users[_0x539412(0x162)];}}}}}}}_0x1180c9[_0x539412(0xfb)](_0x539412(0x172),{'success':_0x32cf93[_0x539412(0x183)](_0x539412(0x10b)),'errors':_0x32cf93[_0x539412(0x183)]('errors'),'role':_0x42967e,'profile':_0x4c39ec,'alldata':_0x480be4,'master_shop':_0x5c22c6,'language':_0x365400});}catch(_0x524fe0){console[_0x539412(0x149)](_0x524fe0);}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0x126),auth,async(_0x45cf87,_0x1d513b)=>{const _0x2a4b3e=a0_0x4fcd7b;try{const _0x10accb=new excelJS['Workbook'](),_0x2e5627=_0x10accb['addWorksheet'](_0x2a4b3e(0x12f));return _0x2e5627[_0x2a4b3e(0x135)]=[{'header':_0x2a4b3e(0x17d),'key':_0x2a4b3e(0x167),'width':0xa},{'header':'Brands','key':_0x2a4b3e(0x101),'width':0xa},{'header':_0x2a4b3e(0x153),'key':_0x2a4b3e(0x138),'width':0xa},{'header':_0x2a4b3e(0x10f),'key':'PSecondaryUnits','width':0xa},{'header':'max_number_per_units','key':_0x2a4b3e(0x104),'width':0xa},{'header':'Primary_Code','key':_0x2a4b3e(0x16c),'width':0xa},{'header':'Secondary_Code','key':_0x2a4b3e(0x16c),'width':0xa},{'header':_0x2a4b3e(0x16f),'key':_0x2a4b3e(0x16c),'width':0xa},{'header':'Category','key':_0x2a4b3e(0x15e),'width':0xa},{'header':_0x2a4b3e(0x19d),'key':_0x2a4b3e(0x178),'width':0xa},{'header':_0x2a4b3e(0x125),'key':_0x2a4b3e(0x178),'width':0xa},{'header':'Products_category','key':_0x2a4b3e(0x150),'width':0xa}],_0x1d513b[_0x2a4b3e(0x168)]('Content-Type',_0x2a4b3e(0x144)),_0x1d513b[_0x2a4b3e(0x168)](_0x2a4b3e(0x10d),_0x2a4b3e(0xf2)),_0x10accb['xlsx'][_0x2a4b3e(0xec)](_0x1d513b)[_0x2a4b3e(0x108)](()=>{const _0x3d69f9=_0x2a4b3e;_0x1d513b[_0x3d69f9(0x199)](0xc8);});}catch(_0x15eac6){_0x1d513b[_0x2a4b3e(0x199)](0x190)[_0x2a4b3e(0x165)](_0x15eac6);}});function a0_0x1984(){const _0x505fa1=['/brands/delete/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','errors','end','$brand','/select_data','/print_barcode_filter/','English\x20(US)','barcode\x20Product\x20master','\x20brand\x20is\x20add\x20successfully','../middleware/auth','brands','write','single','375932gGxVEm','Primary_Code','brand\x20data\x20update\x20successfully','/products/view','attachment;\x20filename=Product_Migration_File.xlsx','products','public/Migration','post','express/lib/response','3004470jLXLWG','$category','categories_edit','product\x20update\x20successfully','render','15617MOAVuY','/barcode/:id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/view/:id','brand\x20data\x20delete\x20successfully','PBrands','Raw\x20Materials','width','MaxperUnits','sheet_to_json','diskStorage','product\x20edit','then','Brands','product\x20add\x20successfully','success','multer','Content-Disposition','concat','Secondary_Units','now','secondary_unit','exports','\x20Edit\x20Successfully','edit\x20Product\x20master','findByIdAndUpdate','unit\x20data\x20update\x20successfully','Products\x20master','/units','/print_barcode_single/:id','$product_details','Products\x20warehouse_data','height','$product_details.product_name','findOne','category','product_category','Hindi','master','file','maxStocks','Maximum_Stocks','/products_export_migrate_file','Router','barcode\x20user_id','bind','3040JBxSJl','/categories/delete/:id','Spanish','primary_code','utils','Products','42ZQxZll','/brands/:id','\x20unit\x20is\x20add\x20successfully','user','$secondary_unit','columns','/print_barcode','467844dKEbMK','PUnits','CODE128','categ','$product_name','Category','product_docs','unit\x20data\x20delete\x20successfully','params','categories\x20data\x20delete\x20successfully','findById','/units/:id','base64','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','toString','\x20added\x20successfully','length','categories','log','German','get','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','language','product_barcode_products','canvas','Prod_Cat','public/upload','_id','Units','product_stock','/categories','image','migrate_product_fule','hello','$_id','13487058plaMFr','/products/brands','prod_categ','data','PCat','email','min','18jBEioe','Arabic','/barcode_filter','save','send','secondary_code','PName','setHeader','English','/categories/:id','692350gEnrZN','ProductCode','$product_docs','max_number_per_units','Product_Code','/products/units','../public/language/languages.json','product_barcode','body','Sheets','product_code','push','French','PAlQty','find','Arabic\x20(ae)','\x20<>\x20','alertquantity','Product_Name','message','toBuffer','Chinese','Portuguese\x20(BR)','/products_import_migrate_file','flash','redirect','/products/categories','originalname','long','numeric','1587819FylocG','$product_category','name','aggregate','Secondary_Code','/barcode_data','defaultProduct.avif','add_product','stock','json','Finished\x20Goods','findByIdAndDelete','Portuguese','brand','xlsx','exceljs','status','/brands','../models/all_models','Products\x20find_data','Alert_QTY','Enabled'];a0_0x1984=function(){return _0x505fa1;};return a0_0x1984();}const storage1=multer[a0_0x4fcd7b(0x106)]({'destination':(_0x33a582,_0x49309b,_0x3e730c)=>{const _0x31a9f4=a0_0x4fcd7b;_0x3e730c(null,_0x31a9f4(0xf4));},'filename':(_0x12052f,_0x55b5a1,_0x3c25dd)=>{const _0x57443f=a0_0x4fcd7b;_0x3c25dd(null,Date[_0x57443f(0x110)]()+_0x55b5a1[_0x57443f(0x186)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x182),auth,uploadMigrate['single'](a0_0x4fcd7b(0x157)),async(_0x28cda2,_0x25d108)=>{const _0x117011=a0_0x4fcd7b,_0x366efe=_0x28cda2['file']['filename'],_0x1fe0c6=await xlsx['readFile']('public/Migration/'+_0x366efe);let _0x3111e4=_0x1fe0c6['SheetNames'],_0x34aa02=xlsx[_0x117011(0x12e)][_0x117011(0x105)](_0x1fe0c6[_0x117011(0x174)][_0x3111e4[0x0]]);for(const _0x1e574f of _0x34aa02){const _0x415a3e=_0x1e574f['Product_Name'],_0x3fedf9=_0x1e574f[_0x117011(0x109)],_0x90cfde=_0x1e574f['Units'],_0x53ce07=_0x1e574f['Secondary_Units'],_0x2a2f90=_0x1e574f[_0x117011(0x16f)],_0x1fc70d=_0x1e574f[_0x117011(0x13c)],_0x293a33=_0x1e574f[_0x117011(0x19d)],_0xc20e20=_0x1e574f[_0x117011(0xef)],_0x21122e=_0x1e574f[_0x117011(0x18d)],_0x4cce6c=_0x1e574f[_0x117011(0x125)],_0x2cbf19=_0x1e574f[_0x117011(0x16e)],_0x28c177=_0x1e574f['Products_category'];try{let _0x5c76ce=await categories[_0x117011(0x11e)]({'name':_0x1fc70d});if(!_0x5c76ce){const _0x1807c4=new categories({'name':_0x1fc70d,'products':'0'});_0x5c76ce=await _0x1807c4[_0x117011(0x164)]();}let _0x18fae5=await brands['findOne']({'name':_0x3fedf9});if(!_0x18fae5){const _0x1bd183=new brands({'name':_0x3fedf9,'products':'0'});_0x18fae5=await _0x1bd183['save']();}let _0x4c3971=await units['findOne']({'name':_0x90cfde,'secondary_unit':_0x53ce07});if(!_0x4c3971){const _0x216864=new units({'name':_0x90cfde,'secondary_unit':_0x53ce07,'products':'0'});_0x4c3971=await _0x216864[_0x117011(0x164)]();}const _0x1314ff=await product[_0x117011(0x179)]({'name':_0x415a3e,'category':_0x5c76ce[_0x117011(0x18b)],'brand':_0x18fae5[_0x117011(0x18b)],'secondary_unit':_0x4c3971['secondary_unit'],'product_code':_0x2a2f90});console['log'](_0x1314ff['length']+_0x117011(0x17b)+_0x5c76ce[_0x117011(0x18b)]+'\x20<>\x20'+_0x18fae5[_0x117011(0x18b)]+_0x117011(0x17b)+_0x4c3971[_0x117011(0x111)]+_0x117011(0x17b)+_0x2a2f90+_0x117011(0x17b)+_0x415a3e);if(_0x1314ff[_0x117011(0x147)]===0x0){const _0x29dd44=new product({'image':_0x117011(0x18f),'name':_0x415a3e,'category':_0x5c76ce[_0x117011(0x18b)],'brand':_0x18fae5['name'],'unit':_0x4c3971[_0x117011(0x18b)],'alertquantity':_0x293a33,'product_code':_0x2a2f90,'secondary_unit':_0x4c3971[_0x117011(0x111)],'primary_code':_0xc20e20,'secondary_code':_0x21122e,'maxStocks':_0x4cce6c,'maxProdPerUnit':_0x2cbf19,'product_category':_0x28c177}),_0x36e1bb=await _0x29dd44[_0x117011(0x164)]();_0x5c76ce[_0x117011(0xf3)]=parseInt(_0x5c76ce[_0x117011(0xf3)])+0x1,await _0x5c76ce['save'](),_0x18fae5[_0x117011(0xf3)]=parseInt(_0x18fae5['products'])+0x1,await _0x18fae5[_0x117011(0x164)](),_0x4c3971[_0x117011(0xf3)]=parseInt(_0x4c3971[_0x117011(0xf3)])+0x1,await _0x4c3971['save'](),_0x28cda2[_0x117011(0x183)](_0x117011(0x10b),_0x415a3e+_0x117011(0x146));}else{console['log'](_0x1314ff[0x0]);const _0x2c4823=_0x1314ff[0x0];_0x2c4823['category']=_0x5c76ce['name'],_0x2c4823[_0x117011(0x196)]=_0x18fae5[_0x117011(0x18b)],_0x2c4823['unit']=_0x4c3971[_0x117011(0x18b)],_0x2c4823[_0x117011(0x17c)]=_0x293a33,_0x2c4823[_0x117011(0x175)]=_0x2a2f90,_0x2c4823[_0x117011(0x111)]=_0x4c3971[_0x117011(0x111)],_0x2c4823[_0x117011(0x12d)]=_0xc20e20,_0x2c4823[_0x117011(0x166)]=_0x21122e,_0x2c4823['maxStocks']=_0x4cce6c,_0x2c4823['maxProdPerUnit']=_0x2cbf19,_0x2c4823[_0x117011(0x120)]=_0x28c177;const _0x11a8dd=await _0x2c4823[_0x117011(0x164)]();_0x28cda2[_0x117011(0x183)](_0x117011(0x10b),_0x11a8dd[_0x117011(0x18b)]+_0x117011(0x113));}}catch(_0x11e1a7){_0x25d108[_0x117011(0x199)](0x1f4)[_0x117011(0x192)]({'proderror':_0x11e1a7['message'],'aproduct':_0x415a3e});}}_0x25d108[_0x117011(0x184)]('/products/view');}),router['post'](a0_0x4fcd7b(0x1a4),auth,async(_0x2b0274,_0x5ac97d)=>{const _0x31e962=a0_0x4fcd7b;try{console['log'](_0x2b0274['body']);const {data_cateory:_0x10b052,datachoose:_0x2a76a1}=_0x2b0274[_0x31e962(0x173)];var _0x132f13;if(_0x2a76a1=='prod_categ')_0x132f13=await product[_0x31e962(0x18c)]([{'$group':{'_id':_0x31e962(0x18a)}}]);else{if(_0x2a76a1==_0x31e962(0xeb))_0x132f13=await product['aggregate']([{'$match':{'product_category':_0x10b052}},{'$group':{'_id':_0x31e962(0x1a3)}}]);else _0x2a76a1==_0x31e962(0x13a)&&(_0x132f13=await product[_0x31e962(0x18c)]([{'$match':{'product_category':_0x10b052}},{'$group':{'_id':_0x31e962(0xf8)}}]));}_0x5ac97d['json'](_0x132f13);}catch(_0x1440da){_0x5ac97d[_0x31e962(0x192)]({'message':_0x1440da[_0x31e962(0x17e)]});}}),router[a0_0x4fcd7b(0xf5)]('/filter_product',auth,async(_0x33447a,_0x1f7d9a)=>{const _0x13bb41=a0_0x4fcd7b;try{const {data_choosing:_0x2972d7,data_selected:_0x1d4210}=_0x33447a[_0x13bb41(0x173)];var _0x1eb596;if(_0x2972d7==_0x13bb41(0x15c))_0x1eb596=await product[_0x13bb41(0x18c)]([{'$match':{'product_category':_0x1d4210}}]);else{if(_0x2972d7==_0x13bb41(0xeb))_0x1eb596=await product['aggregate']([{'$match':{'brand':_0x1d4210}}]);else _0x2972d7==_0x13bb41(0x13a)&&(_0x1eb596=await product[_0x13bb41(0x18c)]([{'$match':{'category':_0x1d4210}}]));}_0x1f7d9a[_0x13bb41(0x192)](_0x1eb596);}catch(_0x3fee0d){_0x1f7d9a[_0x13bb41(0x192)]({'message':_0x3fee0d['message']});}}),router[a0_0x4fcd7b(0x14b)](a0_0x4fcd7b(0x136),auth,async(_0x74ba79,_0x425f4f)=>{const _0x33cd4d=a0_0x4fcd7b,_0x172aae=_0x74ba79[_0x33cd4d(0x133)],_0x433fdd=await profile[_0x33cd4d(0x11e)]({'email':_0x172aae[_0x33cd4d(0x15f)]}),_0x93641=await master_shop[_0x33cd4d(0x179)](),_0x5f3031=await product[_0x33cd4d(0x179)]();if(_0x93641[0x0][_0x33cd4d(0x14d)]==_0x33cd4d(0x1a6))var _0x31a763=users[_0x33cd4d(0x169)];else{if(_0x93641[0x0][_0x33cd4d(0x14d)]=='Hindi')var _0x31a763=users[_0x33cd4d(0x121)];else{if(_0x93641[0x0][_0x33cd4d(0x14d)]==_0x33cd4d(0x14a))var _0x31a763=users['German'];else{if(_0x93641[0x0][_0x33cd4d(0x14d)]==_0x33cd4d(0x12c))var _0x31a763=users[_0x33cd4d(0x12c)];else{if(_0x93641[0x0]['language']==_0x33cd4d(0x177))var _0x31a763=users['French'];else{if(_0x93641[0x0][_0x33cd4d(0x14d)]==_0x33cd4d(0x181))var _0x31a763=users[_0x33cd4d(0x195)];else{if(_0x93641[0x0]['language']==_0x33cd4d(0x180))var _0x31a763=users[_0x33cd4d(0x180)];else{if(_0x93641[0x0][_0x33cd4d(0x14d)]==_0x33cd4d(0x17a))var _0x31a763=users[_0x33cd4d(0x162)];}}}}}}}_0x425f4f[_0x33cd4d(0xfb)](_0x33cd4d(0x14e),{'success':_0x74ba79[_0x33cd4d(0x183)](_0x33cd4d(0x10b)),'errors':_0x74ba79['flash'](_0x33cd4d(0x1a1)),'role':_0x172aae,'profile':_0x433fdd,'products':_0x5f3031,'master_shop':_0x93641,'language':_0x31a763});}),router['post'](a0_0x4fcd7b(0x18e),auth,async(_0x44a2f7,_0xfd10d9)=>{const _0x2329d9=a0_0x4fcd7b,_0x1dfee9=await product[_0x2329d9(0x179)]();_0xfd10d9[_0x2329d9(0x192)]({'data':_0x1dfee9});}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x163),auth,async(_0x1dc2bf,_0x589642)=>{const _0xaeb0b8=a0_0x4fcd7b;try{const {dataProdCat:_0x526ef7,dataProdIdentity:_0x31357e}=_0x1dc2bf['body'];var _0x23f43c;switch(_0x526ef7){case'fg':switch(_0x31357e){case _0xaeb0b8(0x109):_0x23f43c=await product[_0xaeb0b8(0x18c)]([{'$match':{'product_category':_0xaeb0b8(0x193)}},{'$group':{'_id':_0xaeb0b8(0x1a3)}},{'$project':{'brand':_0xaeb0b8(0x159)}}]);break;case _0xaeb0b8(0x13c):_0x23f43c=await product[_0xaeb0b8(0x18c)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0xaeb0b8(0x159)}}]);break;}break;case'rm':switch(_0x31357e){case _0xaeb0b8(0x109):_0x23f43c=await product[_0xaeb0b8(0x18c)]([{'$match':{'product_category':_0xaeb0b8(0x102)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0xaeb0b8(0x159)}}]);break;case _0xaeb0b8(0x13c):_0x23f43c=await product[_0xaeb0b8(0x18c)]([{'$match':{'product_category':_0xaeb0b8(0x102)}},{'$group':{'_id':_0xaeb0b8(0xf8)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x589642[_0xaeb0b8(0x192)](_0x23f43c);}catch(_0x5b121f){_0x589642[_0xaeb0b8(0x192)]({'message':_0x5b121f[_0xaeb0b8(0x17e)]});}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x1a5),auth,async(_0x19345e,_0x225609)=>{const _0x120de4=a0_0x4fcd7b;try{console[_0x120de4(0x149)](_0x19345e[_0x120de4(0x173)]);const {prod_cat:_0x5dfa4c,identity:_0x22f7f7,valueData:_0x532978,typeofbarcode:_0x17ee86}=_0x19345e[_0x120de4(0x173)];let _0x191885;switch(_0x5dfa4c){case'fg':if(_0x22f7f7==_0x120de4(0x109))_0x191885=await product['aggregate']([{'$match':{'product_category':_0x120de4(0x193),'brand':_0x532978}}]);else _0x22f7f7==_0x120de4(0x13c)&&(_0x191885=await product['aggregate']([{'$match':{'product_category':_0x120de4(0x193),'category':_0x532978}}]));break;case'rm':if(_0x22f7f7==_0x120de4(0x109))_0x191885=await product[_0x120de4(0x18c)]([{'$match':{'product_category':_0x120de4(0x102),'brand':_0x532978}}]);else _0x22f7f7==_0x120de4(0x13c)&&(_0x191885=await product[_0x120de4(0x18c)]([{'$match':{'product_category':_0x120de4(0x102),'category':_0x532978}}]));break;}const _0x5acd08=_0x382d6b=>_0x382d6b*0x48,_0x1fd5e8={'width':0x3,'height':0x1},_0x181940=new PDFDocument({'margin':_0x5acd08(0.75),'size':[_0x5acd08(_0x1fd5e8[_0x120de4(0x103)]),_0x5acd08(_0x1fd5e8['height'])],'bufferPages':!![]}),_0xfc1f3d=_0x191885[_0x120de4(0x147)];for(let _0x204610=0x0;_0x204610<=_0xfc1f3d;_0x204610++){if(_0x204610!=_0xfc1f3d){const _0x4b010f=_0x191885[_0x204610]['name'],_0x30c0de=_0x191885[_0x204610][_0x120de4(0x12d)],_0x13439b=_0x191885[_0x204610][_0x120de4(0x166)],_0x19b085=_0x191885[_0x204610][_0x120de4(0x175)];var _0x175831;switch(_0x17ee86){case'1':_0x175831=_0x30c0de;break;case'2':_0x175831=_0x13439b;break;case'3':_0x175831=_0x19b085;break;}const _0x2549ae={'width':0xd2,'height':0x64},_0x58101f={'width':_0x5acd08(_0x1fd5e8[_0x120de4(0x103)]),'height':_0x5acd08(_0x1fd5e8[_0x120de4(0x11c)])},_0x98b28c=new Canvas();JsBarcode(_0x98b28c,_0x175831,{'format':'CODE128','height':_0x2549ae[_0x120de4(0x11c)],'displayValue':!![],'text':_0x175831});const _0x3ac619=_0x98b28c['toBuffer'](),_0x287082=_0x58101f[_0x120de4(0x103)]/_0x2549ae[_0x120de4(0x103)],_0x3952e4=_0x58101f[_0x120de4(0x11c)]/_0x2549ae[_0x120de4(0x11c)],_0x82d1e3=Math['min'](_0x287082,_0x3952e4),_0x711dab=_0x2549ae[_0x120de4(0x103)]*_0x82d1e3,_0x212c79=_0x2549ae[_0x120de4(0x11c)]*_0x82d1e3,_0x355a8e=(_0x58101f[_0x120de4(0x103)]-_0x711dab)/0x2,_0x3d9731=(_0x58101f[_0x120de4(0x11c)]-_0x212c79)/0x2;_0x181940[_0x120de4(0x156)](_0x3ac619,_0x355a8e,_0x3d9731,{'width':_0x711dab,'height':_0x212c79}),_0x204610!=_0xfc1f3d&&_0x181940['addPage']();}}const _0x31e4e2=[];_0x181940['on'](_0x120de4(0x15d),_0x31e4e2[_0x120de4(0x176)][_0x120de4(0x129)](_0x31e4e2)),_0x181940['on']('end',()=>{const _0x1110c4=_0x120de4,_0x4b3233=Buffer[_0x1110c4(0x10e)](_0x31e4e2),_0x4dd069=_0x4b3233[_0x1110c4(0x145)]('base64');_0x225609[_0x1110c4(0x192)]({'pdfContent':_0x4dd069});}),_0x181940['end']();}catch(_0x58fcfe){_0x225609[_0x120de4(0x192)]({'message':_0x58fcfe[_0x120de4(0x17e)]});}}),router[a0_0x4fcd7b(0xf5)]('/print_barcode_filter_search/',auth,async(_0x18c428,_0x16596a)=>{const _0x4f1fb6=a0_0x4fcd7b;try{console['log'](_0x18c428[_0x4f1fb6(0x173)]);const {prod_cat:_0x7e3b38,identity:_0x156e82,valueData:_0x1bbee4}=_0x18c428[_0x4f1fb6(0x173)];let _0xcf305f;switch(_0x7e3b38){case'fg':if(_0x156e82==_0x4f1fb6(0x109))_0xcf305f=await product['aggregate']([{'$match':{'product_category':_0x4f1fb6(0x193),'brand':_0x1bbee4}}]);else _0x156e82==_0x4f1fb6(0x13c)&&(_0xcf305f=await product['aggregate']([{'$match':{'product_category':_0x4f1fb6(0x193),'category':_0x1bbee4}}]));break;case'rm':if(_0x156e82=='Brands')_0xcf305f=await product[_0x4f1fb6(0x18c)]([{'$match':{'product_category':_0x4f1fb6(0x102),'brand':_0x1bbee4}}]);else _0x156e82==_0x4f1fb6(0x13c)&&(_0xcf305f=await product[_0x4f1fb6(0x18c)]([{'$match':{'product_category':_0x4f1fb6(0x102),'category':_0x1bbee4}}]));break;}_0x16596a[_0x4f1fb6(0x192)]({'data':_0xcf305f});}catch(_0x487d49){_0x16596a[_0x4f1fb6(0x192)]({'message':_0x487d49[_0x4f1fb6(0x17e)]});}}),router[a0_0x4fcd7b(0xf5)](a0_0x4fcd7b(0x119),auth,async(_0x387981,_0x6c170c)=>{const _0x4923e5=a0_0x4fcd7b;try{const _0x33932f=_0x387981['params']['id'],{copies:_0x370e38,typeofbarcode:_0x13f596}=_0x387981[_0x4923e5(0x173)];var _0x844d96=await product['findById'](_0x33932f);const _0x8f51cd=_0xa2f59c=>_0xa2f59c*0x48,_0x5aac75={'width':0x3,'height':0x1},_0xc35b7b=new PDFDocument({'margin':_0x8f51cd(0.75),'size':[_0x8f51cd(_0x5aac75[_0x4923e5(0x103)]),_0x8f51cd(_0x5aac75[_0x4923e5(0x11c)])],'bufferPages':!![]}),_0x3680a0=_0x370e38,_0x2ea4a1=_0x844d96[_0x4923e5(0x18b)],_0x26a22b=_0x844d96[_0x4923e5(0x12d)],_0x54eb8f=_0x844d96[_0x4923e5(0x166)],_0x5a4cfa=_0x844d96[_0x4923e5(0x175)];let _0x50c834;switch(_0x13f596){case'1':_0x50c834=_0x26a22b;break;case'2':_0x50c834=_0x54eb8f;break;case'3':_0x50c834=_0x5a4cfa;break;}const _0x18e048={'width':0xd2,'height':0x64},_0x33997a={'width':_0x8f51cd(_0x5aac75[_0x4923e5(0x103)]),'height':_0x8f51cd(_0x5aac75['height'])};for(let _0x467fe5=0x1;_0x467fe5<=_0x3680a0;_0x467fe5++){const _0x5bad21=new Canvas();JsBarcode(_0x5bad21,_0x50c834,{'format':_0x4923e5(0x139),'height':_0x18e048[_0x4923e5(0x11c)],'displayValue':!![],'text':_0x50c834});const _0x28c2e4=_0x5bad21[_0x4923e5(0x17f)](),_0x3d5e06=_0x33997a['width']/_0x18e048['width'],_0x33be26=_0x33997a[_0x4923e5(0x11c)]/_0x18e048[_0x4923e5(0x11c)],_0x487e72=Math[_0x4923e5(0x160)](_0x3d5e06,_0x33be26),_0x30ccc6=_0x18e048[_0x4923e5(0x103)]*_0x487e72,_0x381b98=_0x18e048['height']*_0x487e72,_0x11d048=(_0x33997a[_0x4923e5(0x103)]-_0x30ccc6)/0x2,_0x3c41ca=(_0x33997a[_0x4923e5(0x11c)]-_0x381b98)/0x2;_0xc35b7b['image'](_0x28c2e4,_0x11d048,_0x3c41ca,{'width':_0x30ccc6,'height':_0x381b98}),_0x467fe5!=_0x3680a0&&_0xc35b7b['addPage']();}const _0x960b20=[];_0xc35b7b['on'](_0x4923e5(0x15d),_0x960b20['push'][_0x4923e5(0x129)](_0x960b20)),_0xc35b7b['on'](_0x4923e5(0x1a2),()=>{const _0x3bc796=_0x4923e5,_0x51dd05=Buffer[_0x3bc796(0x10e)](_0x960b20),_0x2475e6=_0x51dd05[_0x3bc796(0x145)](_0x3bc796(0x143));_0x6c170c[_0x3bc796(0x192)]({'pdfContent':_0x2475e6});}),_0xc35b7b[_0x4923e5(0x1a2)]();}catch(_0x458a8e){_0x6c170c[_0x4923e5(0x192)]({'message':_0x458a8e[_0x4923e5(0x17e)]});}}),module[a0_0x4fcd7b(0x112)]=router;