const a0_0x5405d5=a0_0xa55b;(function(_0x3c462b,_0x2e25ef){const _0x1bcfd9=a0_0xa55b,_0x5bd5ab=_0x3c462b();while(!![]){try{const _0x48633a=-parseInt(_0x1bcfd9(0xfb))/0x1*(-parseInt(_0x1bcfd9(0xd8))/0x2)+-parseInt(_0x1bcfd9(0x112))/0x3*(parseInt(_0x1bcfd9(0x92))/0x4)+-parseInt(_0x1bcfd9(0xe4))/0x5+-parseInt(_0x1bcfd9(0x132))/0x6+-parseInt(_0x1bcfd9(0x113))/0x7+-parseInt(_0x1bcfd9(0xbc))/0x8+-parseInt(_0x1bcfd9(0xd0))/0x9*(-parseInt(_0x1bcfd9(0x8b))/0xa);if(_0x48633a===_0x2e25ef)break;else _0x5bd5ab['push'](_0x5bd5ab['shift']());}catch(_0x56809a){_0x5bd5ab['push'](_0x5bd5ab['shift']());}}}(a0_0x3ac7,0x2bbfe));const express=require('express'),res=require(a0_0x5405d5(0x126)),app=express(),router=express[a0_0x5405d5(0x9c)](),multer=require(a0_0x5405d5(0x80)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5405d5(0xfd)),auth=require(a0_0x5405d5(0x118)),users=require('../public/language/languages.json'),excelJS=require(a0_0x5405d5(0xd1)),xlsx=require(a0_0x5405d5(0x93)),JsBarcode=require(a0_0x5405d5(0x102)),{Canvas}=require(a0_0x5405d5(0xd7)),PDFDocument=require('pdfkit-table');router[a0_0x5405d5(0x12d)](a0_0x5405d5(0xe0),auth,async(_0x58d2d2,_0x79fb13)=>{const _0x34b31e=a0_0x5405d5;try{const {username:_0xd63e79,email:_0x5daabb,role:_0x5b93f2}=_0x58d2d2[_0x34b31e(0xf4)],_0xa68d9d=_0x58d2d2[_0x34b31e(0xf4)],_0x5247b1=await profile[_0x34b31e(0xe7)]({'email':_0xa68d9d[_0x34b31e(0x10f)]}),_0x5c09ec=await master_shop['find']();console[_0x34b31e(0x107)]('master',_0x5c09ec);const _0x4ecdc2=await categories[_0x34b31e(0xd2)]();if(_0x5c09ec[0x0][_0x34b31e(0x111)]==_0x34b31e(0xae))var _0x3039be=users['English'];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]==_0x34b31e(0x106))var _0x3039be=users[_0x34b31e(0x106)];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]==_0x34b31e(0xaf))var _0x3039be=users['German'];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]==_0x34b31e(0xb1))var _0x3039be=users['Spanish'];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]=='French')var _0x3039be=users[_0x34b31e(0x97)];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]=='Portuguese\x20(BR)')var _0x3039be=users['Portuguese'];else{if(_0x5c09ec[0x0]['language']==_0x34b31e(0xf5))var _0x3039be=users['Chinese'];else{if(_0x5c09ec[0x0][_0x34b31e(0x111)]==_0x34b31e(0x10b))var _0x3039be=users[_0x34b31e(0xcb)];}}}}}}}_0x79fb13[_0x34b31e(0x83)](_0x34b31e(0x88),{'success':_0x58d2d2['flash'](_0x34b31e(0xb8)),'errors':_0x58d2d2[_0x34b31e(0x8a)](_0x34b31e(0xcd)),'role':_0xa68d9d,'profile':_0x5247b1,'user':_0x4ecdc2,'master_shop':_0x5c09ec,'language':_0x3039be});}catch(_0x1543be){console[_0x34b31e(0x107)](_0x1543be);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xe0),auth,async(_0x2b72ff,_0x133efa)=>{const _0x3db699=a0_0x5405d5;try{const {name:_0x16af1f,products:_0x14ecd0}=_0x2b72ff['body'],_0x1b6b30=new categories({'name':_0x16af1f,'products':_0x14ecd0}),_0x435e55=await categories[_0x3db699(0xe7)]({'name':_0x16af1f});_0x435e55?_0x2b72ff[_0x3db699(0x8a)](_0x3db699(0xcd),_0x16af1f+_0x3db699(0x136)):_0x2b72ff[_0x3db699(0x8a)]('success',_0x16af1f+'\x20categories\x20is\x20add\x20successfully');const _0x359fc0=await _0x1b6b30[_0x3db699(0xdb)]();_0x133efa[_0x3db699(0xc3)](_0x3db699(0x82));}catch(_0x3022fa){console[_0x3db699(0x107)](_0x3022fa);}}),router[a0_0x5405d5(0x12d)](a0_0x5405d5(0xa0),auth,async(_0x3b7e99,_0x584589)=>{const _0x2a175a=a0_0x5405d5;try{const {username:_0x411dd9,email:_0x4de1a0,role:_0x5592e9}=_0x3b7e99['user'],_0x35d1e6=_0x3b7e99['user'],_0x4e53c1=await profile[_0x2a175a(0xe7)]({'email':_0x35d1e6[_0x2a175a(0x10f)]}),_0x4ba8e8=await master_shop['find']();console['log'](_0x2a175a(0xf1),_0x4ba8e8);const _0x986036=_0x3b7e99[_0x2a175a(0x9e)]['id'];console['log'](_0x986036);const _0x45f149=await categories['findById'](_0x986036);if(_0x4ba8e8[0x0][_0x2a175a(0x111)]==_0x2a175a(0xae))var _0x3000dd=users['English'];else{if(_0x4ba8e8[0x0][_0x2a175a(0x111)]==_0x2a175a(0x106))var _0x3000dd=users[_0x2a175a(0x106)];else{if(_0x4ba8e8[0x0][_0x2a175a(0x111)]==_0x2a175a(0xaf))var _0x3000dd=users[_0x2a175a(0xaf)];else{if(_0x4ba8e8[0x0][_0x2a175a(0x111)]=='Spanish')var _0x3000dd=users[_0x2a175a(0xb1)];else{if(_0x4ba8e8[0x0]['language']==_0x2a175a(0x97))var _0x3000dd=users[_0x2a175a(0x97)];else{if(_0x4ba8e8[0x0]['language']==_0x2a175a(0x9d))var _0x3000dd=users['Portuguese'];else{if(_0x4ba8e8[0x0][_0x2a175a(0x111)]==_0x2a175a(0xf5))var _0x3000dd=users['Chinese'];else{if(_0x4ba8e8[0x0][_0x2a175a(0x111)]==_0x2a175a(0x10b))var _0x3000dd=users[_0x2a175a(0xcb)];}}}}}}}_0x584589[_0x2a175a(0x83)](_0x2a175a(0x88),{'success':_0x3b7e99[_0x2a175a(0x8a)](_0x2a175a(0xb8)),'errors':_0x3b7e99['flash'](_0x2a175a(0xcd)),'role':_0x35d1e6,'profile':_0x4e53c1,'master_shop':_0x4ba8e8,'user':_0x45f149,'language':_0x3000dd});}catch(_0x14c869){console[_0x2a175a(0x107)](_0x14c869);}}),router[a0_0x5405d5(0x115)]('/categories/:id',auth,async(_0x37650d,_0x5806e9)=>{const _0x3b1c5e=a0_0x5405d5;try{const _0x227041=_0x37650d['params']['id'],_0x3c782b=await categories['findByIdAndUpdate'](_0x227041,_0x37650d[_0x3b1c5e(0x11f)]);_0x37650d['flash'](_0x3b1c5e(0xb8),''+users[_0x3b1c5e(0xad)]),_0x5806e9[_0x3b1c5e(0xc3)](_0x3b1c5e(0x82));}catch(_0x316b41){console[_0x3b1c5e(0x107)](_0x316b41);}}),router[a0_0x5405d5(0x12d)]('/categories/delete/:id',auth,async(_0x3316cb,_0x50e774)=>{const _0x146c60=a0_0x5405d5;try{const _0x4f27e0=_0x3316cb[_0x146c60(0x9e)]['id'],_0x4ae46b=await categories[_0x146c60(0x103)](_0x4f27e0);_0x3316cb[_0x146c60(0x8a)](_0x146c60(0xb8),_0x146c60(0xa1)),_0x50e774[_0x146c60(0xc3)](_0x146c60(0x82));}catch(_0x2020f0){console['log'](_0x2020f0);}}),router[a0_0x5405d5(0x12d)]('/brands',auth,async(_0x50a40e,_0x36408a)=>{const _0x101166=a0_0x5405d5;try{const {username:_0x42836f,email:_0x57710d,role:_0x272b40}=_0x50a40e[_0x101166(0xf4)],_0x4e7efb=_0x50a40e[_0x101166(0xf4)],_0x15214d=await profile[_0x101166(0xe7)]({'email':_0x4e7efb[_0x101166(0x10f)]}),_0x70e04f=await master_shop[_0x101166(0xd2)]();console['log'](_0x101166(0xf1),_0x70e04f);const _0x4bba90=await brands[_0x101166(0xd2)]();if(_0x70e04f[0x0][_0x101166(0x111)]==_0x101166(0xae))var _0x38ab7d=users[_0x101166(0xff)];else{if(_0x70e04f[0x0][_0x101166(0x111)]==_0x101166(0x106))var _0x38ab7d=users[_0x101166(0x106)];else{if(_0x70e04f[0x0]['language']==_0x101166(0xaf))var _0x38ab7d=users['German'];else{if(_0x70e04f[0x0][_0x101166(0x111)]=='Spanish')var _0x38ab7d=users[_0x101166(0xb1)];else{if(_0x70e04f[0x0][_0x101166(0x111)]=='French')var _0x38ab7d=users[_0x101166(0x97)];else{if(_0x70e04f[0x0]['language']==_0x101166(0x9d))var _0x38ab7d=users['Portuguese'];else{if(_0x70e04f[0x0][_0x101166(0x111)]==_0x101166(0xf5))var _0x38ab7d=users[_0x101166(0xf5)];else{if(_0x70e04f[0x0][_0x101166(0x111)]==_0x101166(0x10b))var _0x38ab7d=users[_0x101166(0xcb)];}}}}}}}_0x36408a[_0x101166(0x83)](_0x101166(0x95),{'success':_0x50a40e[_0x101166(0x8a)](_0x101166(0xb8)),'errors':_0x50a40e[_0x101166(0x8a)]('errors'),'role':_0x4e7efb,'profile':_0x15214d,'master_shop':_0x70e04f,'user':_0x4bba90,'language':_0x38ab7d});}catch(_0x586cd0){console[_0x101166(0x107)](_0x586cd0);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xeb),auth,async(_0x23ac6b,_0x28cde9)=>{const _0x31cd2d=a0_0x5405d5;try{const {name:_0x4dd69e,products:_0x1f370f}=_0x23ac6b[_0x31cd2d(0x11f)],_0xade337=new brands({'name':_0x4dd69e,'products':_0x1f370f}),_0x2ec7a6=await brands['findOne']({'name':_0x4dd69e});_0x2ec7a6?_0x23ac6b[_0x31cd2d(0x8a)](_0x31cd2d(0xcd),_0x4dd69e+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x23ac6b[_0x31cd2d(0x8a)]('success',_0x4dd69e+_0x31cd2d(0x11c));const _0x2d6fe3=await _0xade337[_0x31cd2d(0xdb)]();_0x28cde9['redirect']('/products/brands');}catch(_0x310837){console[_0x31cd2d(0x107)](_0x310837);}}),router[a0_0x5405d5(0x12d)]('/brands/:id',auth,async(_0x372f8d,_0x3f850c)=>{const _0x526fe1=a0_0x5405d5;try{const {username:_0x3addc5,email:_0x47baf4,role:_0x2d119f}=_0x372f8d['user'],_0x48a980=_0x372f8d['user'],_0x4ae342=await profile[_0x526fe1(0xe7)]({'email':_0x48a980[_0x526fe1(0x10f)]}),_0xd22d74=await master_shop[_0x526fe1(0xd2)]();console['log'](_0x526fe1(0xf1),_0xd22d74);const _0x5e3441=_0x372f8d['params']['id'];console[_0x526fe1(0x107)](_0x5e3441);const _0x28f481=await brands['findById'](_0x5e3441);if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0xae))var _0x3f7ad0=users[_0x526fe1(0xff)];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0x106))var _0x3f7ad0=users[_0x526fe1(0x106)];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]=='German')var _0x3f7ad0=users['German'];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0xb1))var _0x3f7ad0=users['Spanish'];else{if(_0xd22d74[0x0]['language']==_0x526fe1(0x97))var _0x3f7ad0=users[_0x526fe1(0x97)];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0x9d))var _0x3f7ad0=users[_0x526fe1(0xa4)];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0xf5))var _0x3f7ad0=users[_0x526fe1(0xf5)];else{if(_0xd22d74[0x0][_0x526fe1(0x111)]==_0x526fe1(0x10b))var _0x3f7ad0=users[_0x526fe1(0xcb)];}}}}}}}_0x3f850c['render'](_0x526fe1(0x95),{'success':_0x372f8d[_0x526fe1(0x8a)](_0x526fe1(0xb8)),'errors':_0x372f8d[_0x526fe1(0x8a)]('errors'),'role':_0x48a980,'profile':_0x4ae342,'master_shop':_0xd22d74,'user':_0x28f481,'language':_0x3f7ad0});}catch(_0x179651){console[_0x526fe1(0x107)](_0x179651);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0x11a),auth,async(_0x2727b3,_0x236046)=>{const _0x5e3d00=a0_0x5405d5;try{const _0x53e5b2=_0x2727b3['params']['id'],_0x4a73c7=await brands[_0x5e3d00(0xa3)](_0x53e5b2,_0x2727b3['body']);_0x2727b3[_0x5e3d00(0x8a)](_0x5e3d00(0xb8),'brand\x20data\x20update\x20successfully'),_0x236046['redirect'](_0x5e3d00(0xc8));}catch(_0x2f45a5){console[_0x5e3d00(0x107)](_0x2f45a5);}}),router['get'](a0_0x5405d5(0xd3),auth,async(_0x50b029,_0xfafb11)=>{const _0x4d6719=a0_0x5405d5;try{const _0x3cb5bd=_0x50b029[_0x4d6719(0x9e)]['id'],_0x531443=await brands[_0x4d6719(0x103)](_0x3cb5bd);_0x50b029[_0x4d6719(0x8a)](_0x4d6719(0xb8),_0x4d6719(0x13a)),_0xfafb11[_0x4d6719(0xc3)](_0x4d6719(0xc8));}catch(_0x147d57){console[_0x4d6719(0x107)](_0x147d57);}}),router[a0_0x5405d5(0x12d)](a0_0x5405d5(0xa7),auth,async(_0xb2af30,_0x3e74de)=>{const _0x2a12db=a0_0x5405d5;try{const {username:_0x4e1fed,email:_0x3ab59b,role:_0x57b565}=_0xb2af30['user'],_0x1c2994=_0xb2af30['user'],_0x5cb1be=await profile[_0x2a12db(0xe7)]({'email':_0x1c2994['email']}),_0x1444d7=await master_shop[_0x2a12db(0xd2)]();console[_0x2a12db(0x107)](_0x2a12db(0xf1),_0x1444d7);const _0x34d421=await units[_0x2a12db(0xd2)]();if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0xae))var _0x440014=users['English'];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0x106))var _0x440014=users['Hindi'];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0xaf))var _0x440014=users['German'];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]=='Spanish')var _0x440014=users[_0x2a12db(0xb1)];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0x97))var _0x440014=users[_0x2a12db(0x97)];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0x9d))var _0x440014=users[_0x2a12db(0xa4)];else{if(_0x1444d7[0x0]['language']==_0x2a12db(0xf5))var _0x440014=users['Chinese'];else{if(_0x1444d7[0x0][_0x2a12db(0x111)]==_0x2a12db(0x10b))var _0x440014=users['Arabic'];}}}}}}}_0x3e74de['render'](_0x2a12db(0x121),{'success':_0xb2af30[_0x2a12db(0x8a)](_0x2a12db(0xb8)),'errors':_0xb2af30[_0x2a12db(0x8a)](_0x2a12db(0xcd)),'role':_0x1c2994,'profile':_0x5cb1be,'master_shop':_0x1444d7,'user':_0x34d421,'language':_0x440014});}catch(_0x22ca6d){console[_0x2a12db(0x107)](_0x22ca6d);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xa7),auth,async(_0x199a1b,_0x1ee59f)=>{const _0x1af2aa=a0_0x5405d5;try{const {name:_0x4a3361,secondary_unit:_0x35c9f0,products:_0x3f7ec5}=_0x199a1b[_0x1af2aa(0x11f)],_0x46f357=new units({'name':_0x4a3361,'secondary_unit':_0x35c9f0,'products':_0x3f7ec5}),_0x1dfd35=await units['findOne']({'name':_0x4a3361});_0x1dfd35?_0x199a1b[_0x1af2aa(0x8a)](_0x1af2aa(0xcd),_0x4a3361+_0x1af2aa(0xc0)):_0x199a1b[_0x1af2aa(0x8a)](_0x1af2aa(0xb8),_0x4a3361+_0x1af2aa(0xe6));const _0x59b36b=await _0x46f357['save']();_0x1ee59f[_0x1af2aa(0xc3)]('/products/units');}catch(_0x4b490d){console[_0x1af2aa(0x107)](_0x4b490d);}}),router[a0_0x5405d5(0x12d)](a0_0x5405d5(0xc1),auth,async(_0x21994e,_0xbaa343)=>{const _0x52c679=a0_0x5405d5;try{const {username:_0x38ff92,email:_0x151baa,role:_0x33bc1d}=_0x21994e['user'],_0x432675=_0x21994e[_0x52c679(0xf4)],_0x21bc79=await profile['findOne']({'email':_0x432675[_0x52c679(0x10f)]}),_0x12a014=await master_shop[_0x52c679(0xd2)]();console[_0x52c679(0x107)](_0x52c679(0xf1),_0x12a014);const _0x383e80=_0x21994e[_0x52c679(0x9e)]['id'],_0x5c5bb2=await units[_0x52c679(0xb7)](_0x383e80);if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0xae))var _0x33648e=users[_0x52c679(0xff)];else{if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0x106))var _0x33648e=users[_0x52c679(0x106)];else{if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0xaf))var _0x33648e=users[_0x52c679(0xaf)];else{if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0xb1))var _0x33648e=users[_0x52c679(0xb1)];else{if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0x97))var _0x33648e=users['French'];else{if(_0x12a014[0x0]['language']==_0x52c679(0x9d))var _0x33648e=users['Portuguese'];else{if(_0x12a014[0x0]['language']==_0x52c679(0xf5))var _0x33648e=users[_0x52c679(0xf5)];else{if(_0x12a014[0x0][_0x52c679(0x111)]==_0x52c679(0x10b))var _0x33648e=users[_0x52c679(0xcb)];}}}}}}}_0xbaa343[_0x52c679(0x83)](_0x52c679(0x121),{'success':_0x21994e[_0x52c679(0x8a)](_0x52c679(0xb8)),'errors':_0x21994e['flash'](_0x52c679(0xcd)),'role':_0x432675,'profile':_0x21bc79,'master_shop':_0x12a014,'user':_0x5c5bb2,'language':_0x33648e});}catch(_0x19f724){console[_0x52c679(0x107)](_0x19f724);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xc1),auth,async(_0x4e2715,_0x366a9a)=>{const _0x429ad9=a0_0x5405d5;try{const _0x5b303d=_0x4e2715[_0x429ad9(0x9e)]['id'],_0x5ace96=await units[_0x429ad9(0xa3)](_0x5b303d,_0x4e2715['body']);_0x4e2715[_0x429ad9(0x8a)](_0x429ad9(0xb8),_0x429ad9(0xab)),_0x366a9a[_0x429ad9(0xc3)](_0x429ad9(0x85));}catch(_0x3d1097){console[_0x429ad9(0x107)](_0x3d1097);}}),router[a0_0x5405d5(0x12d)]('/units/delete/:id',auth,async(_0x3cd3a8,_0x133003)=>{const _0x414421=a0_0x5405d5;try{const _0x2d5666=_0x3cd3a8[_0x414421(0x9e)]['id'],_0x1631ef=await units[_0x414421(0x103)](_0x2d5666);_0x3cd3a8['flash'](_0x414421(0xb8),_0x414421(0xa5)),_0x133003[_0x414421(0xc3)](_0x414421(0x85));}catch(_0x219259){console[_0x414421(0x107)](_0x219259);}});function a0_0x3ac7(){const _0x335325=['Prod_Cat','/barcode_filter','1414125EDexNn','exceljs','find','/brands/delete/:id','edit\x20Product\x20master','Brands','single','canvas','135494bCQrpe','product_barcode','$secondary_unit','save','/products_export_migrate_file','Alert_QTY','category','height','/categories','PBrands','$category','edit_product','933920QVvNts','stock','\x20unit\x20is\x20add\x20successfully','findOne','status','forEach','Products_category','/brands','file','Sheets','CODE128','product_stock','$_id','master','migrate_product_fule','PName','user','Chinese','Product_Name','primary_code','sku','products','max_number_per_units','3Epckpp','Secondary_Code','../models/all_models','maxStocks','English','unit','/print_barcode_filter/','jsbarcode','findByIdAndDelete','Raw\x20Materials','diskStorage','Hindi','log','warehouse','product_category','Workbook','Arabic\x20(ae)','send','$product_details.product_stock','PAlQty','email','product\x20update\x20successfully','language','36039MmmaLy','1274679efCqNS','/barcode_data','post','addPage','$product_name','../middleware/auth','public/Migration/','/brands/:id','length','\x20brand\x20is\x20add\x20successfully','product_docs','now','body','Products\x20master','units','SheetNames','Units','categ','brand','express/lib/response','public/upload','secondary_code','Primary_Code','width','concat','public/Migration','get','\x20<>\x20','end','/products/view','\x20added\x20successfully','742314GBrnJf','Finished\x20Goods','PCat','$product_category','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','setHeader','/select_data','message','brand\x20data\x20delete\x20successfully','multer','maxProdPerUnit','/products/categories','render','$product_stock','/products/units','Enabled','/view/:id','categories','Content-Type','flash','40agNUvK','_id','/barcode/:id','/view','defaultProduct.avif','ProductCode','product_code','8VUEPAN','xlsx','Product_Code','brands','name','French','json','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','image','aggregate','Router','Portuguese\x20(BR)','params','numeric','/categories/:id','categories\x20data\x20delete\x20successfully','toBuffer','findByIdAndUpdate','Portuguese','unit\x20data\x20delete\x20successfully','Products\x20find_data','/units','originalname','/print_barcode_filter_search/','push','unit\x20data\x20update\x20successfully','toString','categories_edit','English\x20(US)','German','Category','Spanish','Maximum_Stocks','sheet_to_json','product\x20edit','/view/add_products','alertquantity','findById','success','product_details.product_name','bind','add_product','1087336qfeYPl','readFile','/print_barcode_single/:id','secondary_unit','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/units/:id','/filter_product','redirect','Content-Disposition','\x20Edit\x20Successfully','filename','min','/products/brands','$brand','Products','Arabic','PUnits','errors'];a0_0x3ac7=function(){return _0x335325;};return a0_0x3ac7();}const storage=multer[a0_0x5405d5(0x105)]({'destination':(_0x3c04ef,_0x2e57d7,_0x3c2f04)=>{const _0x1ef71e=a0_0x5405d5;_0x3c2f04(null,_0x1ef71e(0x127));},'filename':(_0x5e4d4d,_0x2b52fa,_0x29d55b)=>{const _0x47a3e4=a0_0x5405d5;_0x29d55b(null,Date[_0x47a3e4(0x11e)]()+_0x2b52fa[_0x47a3e4(0xa8)]);}}),upload=multer({'storage':storage});router['get'](a0_0x5405d5(0x8e),auth,async(_0xedc1e3,_0x585e04)=>{const _0x14f8c2=a0_0x5405d5;try{const {username:_0x27dbda,email:_0x34a0e4,role:_0x1d752a}=_0xedc1e3[_0x14f8c2(0xf4)],_0x5f0a9d=_0xedc1e3['user'],_0x56ab9f=await profile['findOne']({'email':_0x5f0a9d['email']}),_0x24ca16={'year':'numeric','month':'long','day':_0x14f8c2(0x9f)},_0x27cdc7=await master_shop[_0x14f8c2(0xd2)]();console[_0x14f8c2(0x107)](_0x14f8c2(0x120),_0x27cdc7);const _0x333238=await product[_0x14f8c2(0xd2)]();console[_0x14f8c2(0x107)]('Products\x20find_data',_0x333238);const _0xa9ed36=await warehouse[_0x14f8c2(0x9b)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x14f8c2(0xf9),'localField':_0x14f8c2(0xb9),'foreignField':_0x14f8c2(0x96),'as':_0x14f8c2(0x11d)}},{'$unwind':'$product_docs'},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x14f8c2(0x10d)}},{'$group':{'_id':_0x14f8c2(0x117),'product_stock':{'$sum':_0x14f8c2(0x84)}}}]);console[_0x14f8c2(0x107)]('Products\x20warehouse_data',_0xa9ed36),_0xa9ed36[_0x14f8c2(0xe9)](_0x473bb5=>{const _0x110e7d=_0x333238['map'](_0x1e821a=>{const _0x13efb1=a0_0xa55b;_0x1e821a['name']==_0x473bb5[_0x13efb1(0x8c)]&&(_0x1e821a[_0x13efb1(0xe5)]=parseInt(_0x1e821a['stock'])+parseInt(_0x473bb5[_0x13efb1(0xef)]));});}),console['log'](_0x14f8c2(0xa6),_0x333238);if(_0x27cdc7[0x0]['language']==_0x14f8c2(0xae))var _0x2992cb=users['English'];else{if(_0x27cdc7[0x0][_0x14f8c2(0x111)]==_0x14f8c2(0x106))var _0x2992cb=users[_0x14f8c2(0x106)];else{if(_0x27cdc7[0x0][_0x14f8c2(0x111)]==_0x14f8c2(0xaf))var _0x2992cb=users[_0x14f8c2(0xaf)];else{if(_0x27cdc7[0x0][_0x14f8c2(0x111)]==_0x14f8c2(0xb1))var _0x2992cb=users[_0x14f8c2(0xb1)];else{if(_0x27cdc7[0x0][_0x14f8c2(0x111)]==_0x14f8c2(0x97))var _0x2992cb=users[_0x14f8c2(0x97)];else{if(_0x27cdc7[0x0]['language']=='Portuguese\x20(BR)')var _0x2992cb=users[_0x14f8c2(0xa4)];else{if(_0x27cdc7[0x0][_0x14f8c2(0x111)]==_0x14f8c2(0xf5))var _0x2992cb=users[_0x14f8c2(0xf5)];else{if(_0x27cdc7[0x0]['language']==_0x14f8c2(0x10b))var _0x2992cb=users[_0x14f8c2(0xcb)];}}}}}}}_0x585e04[_0x14f8c2(0x83)]('products',{'success':_0xedc1e3['flash'](_0x14f8c2(0xb8)),'errors':_0xedc1e3[_0x14f8c2(0x8a)]('errors'),'alldata':_0x333238,'profile':_0x56ab9f,'master_shop':_0x27cdc7,'role':_0x5f0a9d,'product_stock':_0xa9ed36,'language':_0x2992cb});}catch(_0x535767){console['log'](_0x535767);}}),router[a0_0x5405d5(0x12d)](a0_0x5405d5(0xb5),auth,async(_0x406bc2,_0x8e5ca5)=>{const _0x1b0e76=a0_0x5405d5;try{const {username:_0x3294b9,email:_0x3d8195,role:_0x458c7f}=_0x406bc2[_0x1b0e76(0xf4)],_0x1c3a23=_0x406bc2[_0x1b0e76(0xf4)],_0x58dbdd=await profile[_0x1b0e76(0xe7)]({'email':_0x1c3a23[_0x1b0e76(0x10f)]}),_0x191fbf=await master_shop['find']();console['log'](_0x1b0e76(0xf1),_0x191fbf);const _0x3fe1ea=await categories[_0x1b0e76(0xd2)]({}),_0x6bd4ac=await brands['find']({}),_0x33a077=await units[_0x1b0e76(0xd2)]({}),_0x1a09ea=await warehouse[_0x1b0e76(0xd2)]({'status':'Enabled'});if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0xae))var _0x400844=users['English'];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0x106))var _0x400844=users[_0x1b0e76(0x106)];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0xaf))var _0x400844=users[_0x1b0e76(0xaf)];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0xb1))var _0x400844=users[_0x1b0e76(0xb1)];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0x97))var _0x400844=users['French'];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]=='Portuguese\x20(BR)')var _0x400844=users[_0x1b0e76(0xa4)];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0xf5))var _0x400844=users[_0x1b0e76(0xf5)];else{if(_0x191fbf[0x0][_0x1b0e76(0x111)]==_0x1b0e76(0x10b))var _0x400844=users['Arabic'];}}}}}}}_0x8e5ca5[_0x1b0e76(0x83)](_0x1b0e76(0xbb),{'success':_0x406bc2[_0x1b0e76(0x8a)](_0x1b0e76(0xb8)),'errors':_0x406bc2[_0x1b0e76(0x8a)](_0x1b0e76(0xcd)),'role':_0x1c3a23,'profile':_0x58dbdd,'categories':_0x3fe1ea,'brands':_0x6bd4ac,'master_shop':_0x191fbf,'units':_0x33a077,'language':_0x400844,'find_data':_0x1a09ea});}catch(_0x466ef2){console[_0x1b0e76(0x107)](_0x466ef2);}}),router['post'](a0_0x5405d5(0xb5),auth,upload[a0_0x5405d5(0xd6)]('image'),async(_0x3981ea,_0x389c3e)=>{const _0x5a218b=a0_0x5405d5;try{const {name:_0x36d181,category:_0x48b3f1,brand:_0xa4f318,unit:_0x1ea275,alertquantity:_0x166261,stock:_0x32c3b5,product_code:_0x5a63cb,warehouse:_0x14f13d,primary_ItemCode:_0x52f820,second_ItemCode:_0x7cdae1,second_unit:_0x1ee1f9,maxPerUnit:_0x558c1d,MaxPerProduct:_0x4daf0c}=_0x3981ea['body'],_0x461ca6=_0x3981ea['file']?.[_0x5a218b(0xc6)]||_0x5a218b(0x8f),_0x28fbda=new product({'image':_0x461ca6,'name':_0x36d181,'category':_0x48b3f1,'brand':_0xa4f318,'unit':_0x1ea275,'alertquantity':_0x166261,'stock':_0x32c3b5,'product_code':_0x5a63cb,'warehouse':_0x14f13d,'primary_code':_0x52f820,'secondary_code':_0x7cdae1,'second_unit':_0x1ee1f9,'maxStocks':_0x4daf0c,'maxProdPerUnit':_0x558c1d}),_0xed078a=await _0x28fbda['save'](),_0x461f20=await categories[_0x5a218b(0xe7)]({'name':_0x48b3f1});_0x461f20[_0x5a218b(0xf9)]=parseInt(_0x461f20[_0x5a218b(0xf9)])+0x1,await _0x461f20[_0x5a218b(0xdb)]();const _0x442e2a=await brands['findOne']({'name':_0xa4f318});_0x442e2a[_0x5a218b(0xf9)]=parseInt(_0x442e2a[_0x5a218b(0xf9)])+0x1,await _0x442e2a[_0x5a218b(0xdb)]();const _0x4671f6=await units[_0x5a218b(0xe7)]({'name':_0x1ea275});_0x4671f6[_0x5a218b(0xf9)]=parseInt(_0x4671f6[_0x5a218b(0xf9)])+0x1,await _0x4671f6['save'](),_0x3981ea[_0x5a218b(0x8a)](_0x5a218b(0xb8),'product\x20add\x20successfully'),_0x389c3e[_0x5a218b(0xc3)](_0x5a218b(0x130));}catch(_0xbb896e){console[_0x5a218b(0x107)](_0xbb896e);}}),router[a0_0x5405d5(0x12d)]('/view/:id',auth,async(_0x50adee,_0x480742)=>{const _0x1d6505=a0_0x5405d5;try{const {username:_0x21e83b,email:_0x14f2fd,role:_0x11d77e}=_0x50adee[_0x1d6505(0xf4)],_0x59aa1e=_0x50adee[_0x1d6505(0xf4)],_0x44820a=await profile[_0x1d6505(0xe7)]({'email':_0x59aa1e[_0x1d6505(0x10f)]}),_0x179b5f=await master_shop[_0x1d6505(0xd2)]();console[_0x1d6505(0x107)](_0x1d6505(0xd4),_0x179b5f);const _0x553e0e=_0x50adee['params']['id'],_0x310f3a=await product[_0x1d6505(0xb7)](_0x553e0e),_0x7eadd9=await categories['find']({}),_0x56d7c7=await brands[_0x1d6505(0xd2)]({}),_0x28e6c7=await units['find']({}),_0x137373=await warehouse[_0x1d6505(0xd2)]({'status':_0x1d6505(0x86)}),_0x59fd77=await units[_0x1d6505(0x9b)]([{'$group':{'_id':_0x1d6505(0xf0),'secondaryunit':{'$first':_0x1d6505(0xda)}}}]);if(_0x179b5f[0x0]['language']==_0x1d6505(0xae))var _0x5dcd1b=users['English'];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]=='Hindi')var _0x5dcd1b=users[_0x1d6505(0x106)];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]==_0x1d6505(0xaf))var _0x5dcd1b=users[_0x1d6505(0xaf)];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]==_0x1d6505(0xb1))var _0x5dcd1b=users[_0x1d6505(0xb1)];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]==_0x1d6505(0x97))var _0x5dcd1b=users[_0x1d6505(0x97)];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]==_0x1d6505(0x9d))var _0x5dcd1b=users[_0x1d6505(0xa4)];else{if(_0x179b5f[0x0]['language']=='Chinese')var _0x5dcd1b=users[_0x1d6505(0xf5)];else{if(_0x179b5f[0x0][_0x1d6505(0x111)]==_0x1d6505(0x10b))var _0x5dcd1b=users['Arabic'];}}}}}}}_0x480742[_0x1d6505(0x83)](_0x1d6505(0xe3),{'success':_0x50adee[_0x1d6505(0x8a)](_0x1d6505(0xb8)),'errors':_0x50adee[_0x1d6505(0x8a)]('errors'),'role':_0x59aa1e,'profile':_0x44820a,'alldata':_0x310f3a,'categories':_0x7eadd9,'brands':_0x56d7c7,'master_shop':_0x179b5f,'units':_0x28e6c7,'secondunit':_0x59fd77,'find_data':_0x137373,'language':_0x5dcd1b});}catch(_0x10e92c){console[_0x1d6505(0x107)](_0x10e92c);}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0x87),auth,upload[a0_0x5405d5(0xd6)]('image'),async(_0x5a3dd3,_0x14030e)=>{const _0x360d5d=a0_0x5405d5;try{console[_0x360d5d(0x107)]('hello');const _0x20b344=_0x5a3dd3[_0x360d5d(0x9e)]['id'],_0x150b10=await product[_0x360d5d(0xb7)](_0x20b344),{image:_0x4168f8,name:_0xf16a18,category:_0x738dfb,brand:_0xf554b4,sku:_0x25d45f,unit:_0x2b1112,alertquantity:_0x2c8763,product_code:_0x16f5c9,warehouse:_0x2b1246,primary_ItemCode:_0x3d200d,second_ItemCode:_0x1f9633,second_unit:_0x560f0c,maxPerUnit:_0x1d283f,MaxPerProduct:_0x1abade,prod_catdata:_0x408f4a}=_0x5a3dd3[_0x360d5d(0x11f)];_0x5a3dd3[_0x360d5d(0xec)]&&(_0x150b10[_0x360d5d(0x9a)]=_0x5a3dd3['file']['filename']);_0x150b10[_0x360d5d(0x96)]=_0xf16a18,_0x150b10['category']=_0x738dfb,_0x150b10[_0x360d5d(0x125)]=_0xf554b4,_0x150b10[_0x360d5d(0xf8)]=_0x25d45f,_0x150b10[_0x360d5d(0x100)]=_0x2b1112,_0x150b10[_0x360d5d(0xb6)]=_0x2c8763,_0x150b10[_0x360d5d(0x91)]=_0x16f5c9,_0x150b10[_0x360d5d(0x108)]=_0x2b1246,_0x150b10['primary_code']=_0x3d200d,_0x150b10[_0x360d5d(0x128)]=_0x1f9633,_0x150b10[_0x360d5d(0xbf)]=_0x560f0c,_0x150b10['maxStocks']=_0x1abade,_0x150b10[_0x360d5d(0x81)]=_0x1d283f,_0x150b10[_0x360d5d(0x109)]=_0x408f4a;const _0x470b6b=await _0x150b10[_0x360d5d(0xdb)]();console['log'](_0x360d5d(0xb4),_0x150b10),_0x5a3dd3[_0x360d5d(0x8a)](_0x360d5d(0xb8),_0x360d5d(0x110)),_0x14030e[_0x360d5d(0xc3)]('/products/view');}catch(_0x3c68ec){console['log'](_0x3c68ec);}}),router[a0_0x5405d5(0x12d)](a0_0x5405d5(0x8d),auth,async(_0x679fc6,_0x45e9fa)=>{const _0x546f95=a0_0x5405d5;try{const {username:_0x219e99,email:_0x425841,role:_0xc46298}=_0x679fc6[_0x546f95(0xf4)],_0xfff40a=_0x679fc6['user'],_0x32ae70=await profile[_0x546f95(0xe7)]({'email':_0xfff40a[_0x546f95(0x10f)]}),_0xf8317a=await master_shop[_0x546f95(0xd2)]();console[_0x546f95(0x107)]('barcode\x20Product\x20master',_0xf8317a);const _0x41517f=_0x679fc6[_0x546f95(0x9e)]['id'],_0x26c386=await product['findById'](_0x41517f);console[_0x546f95(0x107)]('barcode\x20user_id',_0x26c386);if(_0xf8317a[0x0][_0x546f95(0x111)]==_0x546f95(0xae))var _0x5ec02a=users[_0x546f95(0xff)];else{if(_0xf8317a[0x0][_0x546f95(0x111)]==_0x546f95(0x106))var _0x5ec02a=users['Hindi'];else{if(_0xf8317a[0x0]['language']==_0x546f95(0xaf))var _0x5ec02a=users['German'];else{if(_0xf8317a[0x0][_0x546f95(0x111)]=='Spanish')var _0x5ec02a=users[_0x546f95(0xb1)];else{if(_0xf8317a[0x0][_0x546f95(0x111)]=='French')var _0x5ec02a=users[_0x546f95(0x97)];else{if(_0xf8317a[0x0][_0x546f95(0x111)]==_0x546f95(0x9d))var _0x5ec02a=users[_0x546f95(0xa4)];else{if(_0xf8317a[0x0][_0x546f95(0x111)]==_0x546f95(0xf5))var _0x5ec02a=users[_0x546f95(0xf5)];else{if(_0xf8317a[0x0][_0x546f95(0x111)]==_0x546f95(0x10b))var _0x5ec02a=users['Arabic'];}}}}}}}_0x45e9fa[_0x546f95(0x83)](_0x546f95(0xd9),{'success':_0x679fc6[_0x546f95(0x8a)]('success'),'errors':_0x679fc6['flash']('errors'),'role':_0xfff40a,'profile':_0x32ae70,'alldata':_0x26c386,'master_shop':_0xf8317a,'language':_0x5ec02a});}catch(_0x55819a){console[_0x546f95(0x107)](_0x55819a);}}),router['get'](a0_0x5405d5(0xdc),auth,async(_0x7171de,_0x4a6cd0)=>{const _0x13d27c=a0_0x5405d5;try{const _0x55750a=new excelJS[(_0x13d27c(0x10a))](),_0x169fd8=_0x55750a['addWorksheet'](_0x13d27c(0xca));return _0x169fd8['columns']=[{'header':_0x13d27c(0xf6),'key':_0x13d27c(0xf3),'width':0xa},{'header':_0x13d27c(0xd5),'key':_0x13d27c(0xe1),'width':0xa},{'header':_0x13d27c(0x123),'key':_0x13d27c(0xcc),'width':0xa},{'header':'Secondary_Units','key':'PSecondaryUnits','width':0xa},{'header':_0x13d27c(0xfa),'key':'MaxperUnits','width':0xa},{'header':_0x13d27c(0x129),'key':_0x13d27c(0x90),'width':0xa},{'header':'Secondary_Code','key':_0x13d27c(0x90),'width':0xa},{'header':_0x13d27c(0x94),'key':_0x13d27c(0x90),'width':0xa},{'header':'Category','key':_0x13d27c(0x134),'width':0xa},{'header':_0x13d27c(0xdd),'key':_0x13d27c(0x10e),'width':0xa},{'header':_0x13d27c(0xb2),'key':_0x13d27c(0x10e),'width':0xa},{'header':_0x13d27c(0xea),'key':_0x13d27c(0xce),'width':0xa}],_0x4a6cd0[_0x13d27c(0x137)](_0x13d27c(0x89),_0x13d27c(0x99)),_0x4a6cd0['setHeader'](_0x13d27c(0xc4),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x55750a[_0x13d27c(0x93)]['write'](_0x4a6cd0)['then'](()=>{const _0x56577f=_0x13d27c;_0x4a6cd0[_0x56577f(0xe8)](0xc8);});}catch(_0x10e08c){_0x4a6cd0['status'](0x190)[_0x13d27c(0x10c)](_0x10e08c);}});const storage1=multer[a0_0x5405d5(0x105)]({'destination':(_0x209c80,_0x2f8195,_0x1cbe99)=>{const _0x2b1c98=a0_0x5405d5;_0x1cbe99(null,_0x2b1c98(0x12c));},'filename':(_0x1b856d,_0x1f720b,_0x1fe337)=>{const _0x5e0865=a0_0x5405d5;_0x1fe337(null,Date[_0x5e0865(0x11e)]()+_0x1f720b[_0x5e0865(0xa8)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0xa55b(_0x1c02cc,_0x2a4fdf){const _0x3ac76b=a0_0x3ac7();return a0_0xa55b=function(_0xa55bab,_0x114251){_0xa55bab=_0xa55bab-0x80;let _0x5b7eee=_0x3ac76b[_0xa55bab];return _0x5b7eee;},a0_0xa55b(_0x1c02cc,_0x2a4fdf);}router[a0_0x5405d5(0x115)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x5405d5(0xd6)](a0_0x5405d5(0xf2)),async(_0xc38946,_0x46290e)=>{const _0xc2b7ee=a0_0x5405d5,_0x3d6e31=_0xc38946[_0xc2b7ee(0xec)]['filename'],_0x462090=await xlsx[_0xc2b7ee(0xbd)](_0xc2b7ee(0x119)+_0x3d6e31);let _0x15f8cb=_0x462090[_0xc2b7ee(0x122)],_0x127510=xlsx['utils'][_0xc2b7ee(0xb3)](_0x462090[_0xc2b7ee(0xed)][_0x15f8cb[0x0]]);for(const _0x5530d3 of _0x127510){const _0x5509ba=_0x5530d3['Product_Name'],_0xcb7ea7=_0x5530d3['Brands'],_0x14b614=_0x5530d3[_0xc2b7ee(0x123)],_0x372ef5=_0x5530d3['Secondary_Units'],_0x4ea2b4=_0x5530d3['Product_Code'],_0xab2040=_0x5530d3['Category'],_0x5d7a8e=_0x5530d3['Alert_QTY'],_0x261acf=_0x5530d3[_0xc2b7ee(0x129)],_0xd01531=_0x5530d3[_0xc2b7ee(0xfc)],_0x186240=_0x5530d3[_0xc2b7ee(0xb2)],_0x39c2ae=_0x5530d3['max_number_per_units'],_0x2a56d8=_0x5530d3['Products_category'];try{let _0x41ca2d=await categories[_0xc2b7ee(0xe7)]({'name':_0xab2040});if(!_0x41ca2d){const _0xe98f7d=new categories({'name':_0xab2040,'products':'0'});_0x41ca2d=await _0xe98f7d['save']();}let _0x53f1fb=await brands[_0xc2b7ee(0xe7)]({'name':_0xcb7ea7});if(!_0x53f1fb){const _0xe80e30=new brands({'name':_0xcb7ea7,'products':'0'});_0x53f1fb=await _0xe80e30[_0xc2b7ee(0xdb)]();}let _0x34daaa=await units[_0xc2b7ee(0xe7)]({'name':_0x14b614,'secondary_unit':_0x372ef5});if(!_0x34daaa){const _0x3e5c0e=new units({'name':_0x14b614,'secondary_unit':_0x372ef5,'products':'0'});_0x34daaa=await _0x3e5c0e[_0xc2b7ee(0xdb)]();}const _0x570360=await product[_0xc2b7ee(0xd2)]({'name':_0x5509ba,'category':_0x41ca2d[_0xc2b7ee(0x96)],'brand':_0x53f1fb[_0xc2b7ee(0x96)],'secondary_unit':_0x34daaa[_0xc2b7ee(0xbf)],'product_code':_0x4ea2b4});console[_0xc2b7ee(0x107)](_0x570360[_0xc2b7ee(0x11b)]+_0xc2b7ee(0x12e)+_0x41ca2d[_0xc2b7ee(0x96)]+_0xc2b7ee(0x12e)+_0x53f1fb[_0xc2b7ee(0x96)]+_0xc2b7ee(0x12e)+_0x34daaa[_0xc2b7ee(0xbf)]+_0xc2b7ee(0x12e)+_0x4ea2b4+_0xc2b7ee(0x12e)+_0x5509ba);if(_0x570360[_0xc2b7ee(0x11b)]===0x0){const _0x1634ff=new product({'image':_0xc2b7ee(0x8f),'name':_0x5509ba,'category':_0x41ca2d[_0xc2b7ee(0x96)],'brand':_0x53f1fb[_0xc2b7ee(0x96)],'unit':_0x34daaa[_0xc2b7ee(0x96)],'alertquantity':_0x5d7a8e,'product_code':_0x4ea2b4,'secondary_unit':_0x34daaa[_0xc2b7ee(0xbf)],'primary_code':_0x261acf,'secondary_code':_0xd01531,'maxStocks':_0x186240,'maxProdPerUnit':_0x39c2ae,'product_category':_0x2a56d8}),_0x519967=await _0x1634ff['save']();_0x41ca2d[_0xc2b7ee(0xf9)]=parseInt(_0x41ca2d['products'])+0x1,await _0x41ca2d[_0xc2b7ee(0xdb)](),_0x53f1fb[_0xc2b7ee(0xf9)]=parseInt(_0x53f1fb[_0xc2b7ee(0xf9)])+0x1,await _0x53f1fb[_0xc2b7ee(0xdb)](),_0x34daaa['products']=parseInt(_0x34daaa[_0xc2b7ee(0xf9)])+0x1,await _0x34daaa[_0xc2b7ee(0xdb)](),_0xc38946[_0xc2b7ee(0x8a)](_0xc2b7ee(0xb8),_0x5509ba+_0xc2b7ee(0x131));}else{console[_0xc2b7ee(0x107)](_0x570360[0x0]);const _0x5437c9=_0x570360[0x0];_0x5437c9[_0xc2b7ee(0xde)]=_0x41ca2d[_0xc2b7ee(0x96)],_0x5437c9[_0xc2b7ee(0x125)]=_0x53f1fb[_0xc2b7ee(0x96)],_0x5437c9['unit']=_0x34daaa[_0xc2b7ee(0x96)],_0x5437c9[_0xc2b7ee(0xb6)]=_0x5d7a8e,_0x5437c9[_0xc2b7ee(0x91)]=_0x4ea2b4,_0x5437c9['secondary_unit']=_0x34daaa['secondary_unit'],_0x5437c9[_0xc2b7ee(0xf7)]=_0x261acf,_0x5437c9[_0xc2b7ee(0x128)]=_0xd01531,_0x5437c9[_0xc2b7ee(0xfe)]=_0x186240,_0x5437c9[_0xc2b7ee(0x81)]=_0x39c2ae,_0x5437c9[_0xc2b7ee(0x109)]=_0x2a56d8;const _0x473290=await _0x5437c9['save']();_0xc38946['flash'](_0xc2b7ee(0xb8),_0x473290['name']+_0xc2b7ee(0xc5));}}catch(_0x259958){_0x46290e['status'](0x1f4)[_0xc2b7ee(0x98)]({'proderror':_0x259958[_0xc2b7ee(0x139)],'aproduct':_0x5509ba});}}_0x46290e[_0xc2b7ee(0xc3)](_0xc2b7ee(0x130));}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0x138),auth,async(_0x492689,_0x4c79c1)=>{const _0x5d8b8c=a0_0x5405d5;try{console[_0x5d8b8c(0x107)](_0x492689[_0x5d8b8c(0x11f)]);const {data_cateory:_0x557c7a,datachoose:_0xd73cc8}=_0x492689[_0x5d8b8c(0x11f)];var _0x9e21ce;if(_0xd73cc8=='prod_categ')_0x9e21ce=await product[_0x5d8b8c(0x9b)]([{'$group':{'_id':_0x5d8b8c(0x135)}}]);else{if(_0xd73cc8==_0x5d8b8c(0x95))_0x9e21ce=await product[_0x5d8b8c(0x9b)]([{'$match':{'product_category':_0x557c7a}},{'$group':{'_id':_0x5d8b8c(0xc9)}}]);else _0xd73cc8==_0x5d8b8c(0x124)&&(_0x9e21ce=await product[_0x5d8b8c(0x9b)]([{'$match':{'product_category':_0x557c7a}},{'$group':{'_id':_0x5d8b8c(0xe2)}}]));}_0x4c79c1[_0x5d8b8c(0x98)](_0x9e21ce);}catch(_0x5dbd05){_0x4c79c1[_0x5d8b8c(0x98)]({'message':_0x5dbd05[_0x5d8b8c(0x139)]});}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xc2),auth,async(_0xc8b3b,_0x4c74e9)=>{const _0x17bcc9=a0_0x5405d5;try{const {data_choosing:_0x29ec9f,data_selected:_0x147264}=_0xc8b3b['body'];var _0x575dc9;if(_0x29ec9f=='prod_categ')_0x575dc9=await product[_0x17bcc9(0x9b)]([{'$match':{'product_category':_0x147264}}]);else{if(_0x29ec9f=='brands')_0x575dc9=await product['aggregate']([{'$match':{'brand':_0x147264}}]);else _0x29ec9f==_0x17bcc9(0x124)&&(_0x575dc9=await product['aggregate']([{'$match':{'category':_0x147264}}]));}_0x4c74e9['json'](_0x575dc9);}catch(_0x360328){_0x4c74e9['json']({'message':_0x360328[_0x17bcc9(0x139)]});}}),router[a0_0x5405d5(0x12d)]('/print_barcode',auth,async(_0x1aff98,_0xcf9280)=>{const _0x44d65e=a0_0x5405d5,_0x5992bd=_0x1aff98['user'],_0x14d65c=await profile[_0x44d65e(0xe7)]({'email':_0x5992bd[_0x44d65e(0x10f)]}),_0x4bae5a=await master_shop[_0x44d65e(0xd2)](),_0x2e47df=await product[_0x44d65e(0xd2)]();if(_0x4bae5a[0x0]['language']==_0x44d65e(0xae))var _0x400dcf=users[_0x44d65e(0xff)];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0x106))var _0x400dcf=users[_0x44d65e(0x106)];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0xaf))var _0x400dcf=users[_0x44d65e(0xaf)];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0xb1))var _0x400dcf=users[_0x44d65e(0xb1)];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0x97))var _0x400dcf=users['French'];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0x9d))var _0x400dcf=users[_0x44d65e(0xa4)];else{if(_0x4bae5a[0x0]['language']==_0x44d65e(0xf5))var _0x400dcf=users[_0x44d65e(0xf5)];else{if(_0x4bae5a[0x0][_0x44d65e(0x111)]==_0x44d65e(0x10b))var _0x400dcf=users['Arabic'];}}}}}}}_0xcf9280[_0x44d65e(0x83)]('product_barcode_products',{'success':_0x1aff98[_0x44d65e(0x8a)]('success'),'errors':_0x1aff98[_0x44d65e(0x8a)](_0x44d65e(0xcd)),'role':_0x5992bd,'profile':_0x14d65c,'products':_0x2e47df,'master_shop':_0x4bae5a,'language':_0x400dcf});}),router['post'](a0_0x5405d5(0x114),auth,async(_0x39a34d,_0xa85172)=>{const _0x279154=a0_0x5405d5,_0x4bf463=await product['find']();_0xa85172[_0x279154(0x98)]({'data':_0x4bf463});}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xcf),auth,async(_0x27ff50,_0x4165fa)=>{const _0x46f950=a0_0x5405d5;try{const {dataProdCat:_0x2c7b2d,dataProdIdentity:_0x244f56}=_0x27ff50[_0x46f950(0x11f)];var _0x53958d;switch(_0x2c7b2d){case'fg':switch(_0x244f56){case'Brands':_0x53958d=await product[_0x46f950(0x9b)]([{'$match':{'product_category':_0x46f950(0x133)}},{'$group':{'_id':_0x46f950(0xc9)}},{'$project':{'brand':_0x46f950(0xf0)}}]);break;case _0x46f950(0xb0):_0x53958d=await product['aggregate']([{'$match':{'product_category':_0x46f950(0x133)}},{'$group':{'_id':_0x46f950(0xe2)}},{'$project':{'category':_0x46f950(0xf0)}}]);break;}break;case'rm':switch(_0x244f56){case _0x46f950(0xd5):_0x53958d=await product[_0x46f950(0x9b)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x46f950(0xf0)}}]);break;case'Category':_0x53958d=await product['aggregate']([{'$match':{'product_category':_0x46f950(0x104)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x46f950(0xf0)}}]);break;}break;}_0x4165fa[_0x46f950(0x98)](_0x53958d);}catch(_0x25eeb5){_0x4165fa['json']({'message':_0x25eeb5[_0x46f950(0x139)]});}}),router['post'](a0_0x5405d5(0x101),auth,async(_0x4a70ec,_0x292c60)=>{const _0x3796ca=a0_0x5405d5;try{console[_0x3796ca(0x107)](_0x4a70ec[_0x3796ca(0x11f)]);const {prod_cat:_0x49a610,identity:_0x54286b,valueData:_0x53b42b,typeofbarcode:_0x384edb}=_0x4a70ec[_0x3796ca(0x11f)];let _0x47d671;switch(_0x49a610){case'fg':if(_0x54286b==_0x3796ca(0xd5))_0x47d671=await product[_0x3796ca(0x9b)]([{'$match':{'product_category':_0x3796ca(0x133),'brand':_0x53b42b}}]);else _0x54286b=='Category'&&(_0x47d671=await product[_0x3796ca(0x9b)]([{'$match':{'product_category':_0x3796ca(0x133),'category':_0x53b42b}}]));break;case'rm':if(_0x54286b==_0x3796ca(0xd5))_0x47d671=await product[_0x3796ca(0x9b)]([{'$match':{'product_category':_0x3796ca(0x104),'brand':_0x53b42b}}]);else _0x54286b==_0x3796ca(0xb0)&&(_0x47d671=await product[_0x3796ca(0x9b)]([{'$match':{'product_category':_0x3796ca(0x104),'category':_0x53b42b}}]));break;}const _0xfb1921=_0x2a6992=>_0x2a6992*0x48,_0x3ba707={'width':0x3,'height':0x1},_0x21ef87=new PDFDocument({'margin':_0xfb1921(0.75),'size':[_0xfb1921(_0x3ba707[_0x3796ca(0x12a)]),_0xfb1921(_0x3ba707[_0x3796ca(0xdf)])],'bufferPages':!![]}),_0x1f2805=_0x47d671[_0x3796ca(0x11b)];for(let _0x5540cc=0x0;_0x5540cc<=_0x1f2805;_0x5540cc++){if(_0x5540cc!=_0x1f2805){const _0x19f94b=_0x47d671[_0x5540cc][_0x3796ca(0x96)],_0x3c5cfe=_0x47d671[_0x5540cc]['primary_code'],_0x4ab52f=_0x47d671[_0x5540cc]['secondary_code'],_0x65e7d5=_0x47d671[_0x5540cc][_0x3796ca(0x91)];var _0x564881;switch(_0x384edb){case'1':_0x564881=_0x3c5cfe;break;case'2':_0x564881=_0x4ab52f;break;case'3':_0x564881=_0x65e7d5;break;}const _0x4320e6={'width':0xd2,'height':0x64},_0x24b2b0={'width':_0xfb1921(_0x3ba707[_0x3796ca(0x12a)]),'height':_0xfb1921(_0x3ba707['height'])},_0x291dac=new Canvas();JsBarcode(_0x291dac,_0x564881,{'format':_0x3796ca(0xee),'height':_0x4320e6[_0x3796ca(0xdf)],'displayValue':!![],'text':_0x564881});const _0x212894=_0x291dac[_0x3796ca(0xa2)](),_0x19ecec=_0x24b2b0['width']/_0x4320e6['width'],_0x46ba6f=_0x24b2b0[_0x3796ca(0xdf)]/_0x4320e6[_0x3796ca(0xdf)],_0x4547a7=Math[_0x3796ca(0xc7)](_0x19ecec,_0x46ba6f),_0x32a667=_0x4320e6[_0x3796ca(0x12a)]*_0x4547a7,_0x8c1c=_0x4320e6[_0x3796ca(0xdf)]*_0x4547a7,_0x1c9870=(_0x24b2b0[_0x3796ca(0x12a)]-_0x32a667)/0x2,_0x68ffba=(_0x24b2b0['height']-_0x8c1c)/0x2;_0x21ef87['image'](_0x212894,_0x1c9870,_0x68ffba,{'width':_0x32a667,'height':_0x8c1c}),_0x5540cc!=_0x1f2805&&_0x21ef87[_0x3796ca(0x116)]();}}const _0x1059b8=[];_0x21ef87['on']('data',_0x1059b8[_0x3796ca(0xaa)][_0x3796ca(0xba)](_0x1059b8)),_0x21ef87['on'](_0x3796ca(0x12f),()=>{const _0x10f2bc=_0x3796ca,_0x4bce7e=Buffer[_0x10f2bc(0x12b)](_0x1059b8),_0x10ca50=_0x4bce7e['toString']('base64');_0x292c60[_0x10f2bc(0x98)]({'pdfContent':_0x10ca50});}),_0x21ef87['end']();}catch(_0xa8fb95){_0x292c60['json']({'message':_0xa8fb95['message']});}}),router['post'](a0_0x5405d5(0xa9),auth,async(_0x18b1fe,_0xe55494)=>{const _0x42b708=a0_0x5405d5;try{console[_0x42b708(0x107)](_0x18b1fe[_0x42b708(0x11f)]);const {prod_cat:_0x67f7ab,identity:_0x2cdb9d,valueData:_0x1fc225}=_0x18b1fe[_0x42b708(0x11f)];let _0x2c5482;switch(_0x67f7ab){case'fg':if(_0x2cdb9d==_0x42b708(0xd5))_0x2c5482=await product[_0x42b708(0x9b)]([{'$match':{'product_category':_0x42b708(0x133),'brand':_0x1fc225}}]);else _0x2cdb9d==_0x42b708(0xb0)&&(_0x2c5482=await product[_0x42b708(0x9b)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x1fc225}}]));break;case'rm':if(_0x2cdb9d==_0x42b708(0xd5))_0x2c5482=await product['aggregate']([{'$match':{'product_category':_0x42b708(0x104),'brand':_0x1fc225}}]);else _0x2cdb9d=='Category'&&(_0x2c5482=await product[_0x42b708(0x9b)]([{'$match':{'product_category':_0x42b708(0x104),'category':_0x1fc225}}]));break;}_0xe55494['json']({'data':_0x2c5482});}catch(_0x5140dd){_0xe55494[_0x42b708(0x98)]({'message':_0x5140dd[_0x42b708(0x139)]});}}),router[a0_0x5405d5(0x115)](a0_0x5405d5(0xbe),auth,async(_0x204164,_0x1db27a)=>{const _0x58695a=a0_0x5405d5;try{const _0x108cf8=_0x204164[_0x58695a(0x9e)]['id'],{copies:_0x4efe91,typeofbarcode:_0x34d313}=_0x204164[_0x58695a(0x11f)];var _0x102ba7=await product[_0x58695a(0xb7)](_0x108cf8);const _0x3109aa=_0x570c00=>_0x570c00*0x48,_0x4c0bcc={'width':0x3,'height':0x1},_0x3e3350=new PDFDocument({'margin':_0x3109aa(0.75),'size':[_0x3109aa(_0x4c0bcc['width']),_0x3109aa(_0x4c0bcc['height'])],'bufferPages':!![]}),_0x2569f6=_0x4efe91,_0x280f1e=_0x102ba7[_0x58695a(0x96)],_0x1636bd=_0x102ba7[_0x58695a(0xf7)],_0xd4f350=_0x102ba7[_0x58695a(0x128)],_0x42750a=_0x102ba7[_0x58695a(0x91)];let _0x29d48c;switch(_0x34d313){case'1':_0x29d48c=_0x1636bd;break;case'2':_0x29d48c=_0xd4f350;break;case'3':_0x29d48c=_0x42750a;break;}const _0xf1ff5f={'width':0xd2,'height':0x64},_0x5410b2={'width':_0x3109aa(_0x4c0bcc['width']),'height':_0x3109aa(_0x4c0bcc[_0x58695a(0xdf)])};for(let _0x142782=0x1;_0x142782<=_0x2569f6;_0x142782++){const _0x1e5b41=new Canvas();JsBarcode(_0x1e5b41,_0x29d48c,{'format':_0x58695a(0xee),'height':_0xf1ff5f[_0x58695a(0xdf)],'displayValue':!![],'text':_0x29d48c});const _0x1f84f4=_0x1e5b41[_0x58695a(0xa2)](),_0x1f955e=_0x5410b2[_0x58695a(0x12a)]/_0xf1ff5f[_0x58695a(0x12a)],_0x177c39=_0x5410b2[_0x58695a(0xdf)]/_0xf1ff5f[_0x58695a(0xdf)],_0x3f6f2d=Math[_0x58695a(0xc7)](_0x1f955e,_0x177c39),_0x2b6330=_0xf1ff5f[_0x58695a(0x12a)]*_0x3f6f2d,_0xddd3da=_0xf1ff5f[_0x58695a(0xdf)]*_0x3f6f2d,_0x175135=(_0x5410b2['width']-_0x2b6330)/0x2,_0x41c2aa=(_0x5410b2[_0x58695a(0xdf)]-_0xddd3da)/0x2;_0x3e3350['image'](_0x1f84f4,_0x175135,_0x41c2aa,{'width':_0x2b6330,'height':_0xddd3da}),_0x142782!=_0x2569f6&&_0x3e3350[_0x58695a(0x116)]();}const _0x139a97=[];_0x3e3350['on']('data',_0x139a97[_0x58695a(0xaa)]['bind'](_0x139a97)),_0x3e3350['on'](_0x58695a(0x12f),()=>{const _0x1c5daa=_0x58695a,_0x214796=Buffer[_0x1c5daa(0x12b)](_0x139a97),_0x29986c=_0x214796[_0x1c5daa(0xac)]('base64');_0x1db27a[_0x1c5daa(0x98)]({'pdfContent':_0x29986c});}),_0x3e3350[_0x58695a(0x12f)]();}catch(_0x2c8d74){_0x1db27a[_0x58695a(0x98)]({'message':_0x2c8d74[_0x58695a(0x139)]});}}),module['exports']=router;