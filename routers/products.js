const a0_0x4c98a7=a0_0x4c56;(function(_0x21cfe6,_0x2aa2fa){const _0x185e6b=a0_0x4c56,_0xd9d846=_0x21cfe6();while(!![]){try{const _0x5579e6=-parseInt(_0x185e6b(0xd4))/0x1*(parseInt(_0x185e6b(0xf3))/0x2)+parseInt(_0x185e6b(0xa8))/0x3+parseInt(_0x185e6b(0xbc))/0x4+parseInt(_0x185e6b(0x13f))/0x5*(parseInt(_0x185e6b(0xca))/0x6)+-parseInt(_0x185e6b(0x13d))/0x7*(parseInt(_0x185e6b(0xd2))/0x8)+parseInt(_0x185e6b(0x98))/0x9+parseInt(_0x185e6b(0x10a))/0xa;if(_0x5579e6===_0x2aa2fa)break;else _0xd9d846['push'](_0xd9d846['shift']());}catch(_0x3fd9a0){_0xd9d846['push'](_0xd9d846['shift']());}}}(a0_0x2ffc,0x36a99));const express=require(a0_0x4c98a7(0x116)),res=require('express/lib/response'),app=express(),router=express[a0_0x4c98a7(0x136)](),multer=require(a0_0x4c98a7(0xd8)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x4c98a7(0x107)),auth=require('../middleware/auth'),users=require(a0_0x4c98a7(0xab)),excelJS=require(a0_0x4c98a7(0xe7)),xlsx=require(a0_0x4c98a7(0xa4)),JsBarcode=require(a0_0x4c98a7(0x95)),{Canvas}=require(a0_0x4c98a7(0x13e)),PDFDocument=require(a0_0x4c98a7(0x8d));router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x92),auth,async(_0x34164e,_0x3ee967)=>{const _0x23ae20=a0_0x4c98a7;try{const {username:_0x43136f,email:_0x79ae8d,role:_0x2d914f}=_0x34164e[_0x23ae20(0xf5)],_0x21f942=_0x34164e[_0x23ae20(0xf5)],_0x16e539=await profile[_0x23ae20(0x10c)]({'email':_0x21f942[_0x23ae20(0xd7)]}),_0x507c34=await master_shop[_0x23ae20(0xff)]();console['log'](_0x23ae20(0x12d),_0x507c34);const _0x32e276=await categories[_0x23ae20(0xff)]();if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0x139))var _0xa052cd=users[_0x23ae20(0x134)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0xed))var _0xa052cd=users[_0x23ae20(0xed)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0xd3))var _0xa052cd=users[_0x23ae20(0xd3)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0xb3))var _0xa052cd=users[_0x23ae20(0xb3)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0x137))var _0xa052cd=users[_0x23ae20(0x137)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]=='Portuguese\x20(BR)')var _0xa052cd=users[_0x23ae20(0x141)];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0x10b))var _0xa052cd=users['Chinese'];else{if(_0x507c34[0x0][_0x23ae20(0xb9)]==_0x23ae20(0xf8))var _0xa052cd=users['Arabic'];}}}}}}}_0x3ee967[_0x23ae20(0xa0)](_0x23ae20(0x11e),{'success':_0x34164e[_0x23ae20(0xf9)]('success'),'errors':_0x34164e['flash'](_0x23ae20(0xe1)),'role':_0x21f942,'profile':_0x16e539,'user':_0x32e276,'master_shop':_0x507c34,'language':_0xa052cd});}catch(_0xa16f41){console[_0x23ae20(0xb8)](_0xa16f41);}}),router[a0_0x4c98a7(0xe4)]('/categories',auth,async(_0x21dcae,_0x120d9f)=>{const _0x4eb5d9=a0_0x4c98a7;try{const {name:_0x21b269,products:_0x56a270}=_0x21dcae[_0x4eb5d9(0x125)],_0x2c67dd=new categories({'name':_0x21b269,'products':_0x56a270}),_0x407969=await categories['findOne']({'name':_0x21b269});_0x407969?_0x21dcae[_0x4eb5d9(0xf9)](_0x4eb5d9(0xe1),_0x21b269+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x21dcae[_0x4eb5d9(0xf9)](_0x4eb5d9(0xa9),_0x21b269+_0x4eb5d9(0x127));const _0x5030be=await _0x2c67dd[_0x4eb5d9(0xb0)]();_0x120d9f[_0x4eb5d9(0x108)](_0x4eb5d9(0xdf));}catch(_0x18d349){console[_0x4eb5d9(0xb8)](_0x18d349);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x10f),auth,async(_0x34475e,_0x1408e4)=>{const _0x2db082=a0_0x4c98a7;try{const {username:_0x2ce195,email:_0x450212,role:_0x202ad7}=_0x34475e[_0x2db082(0xf5)],_0x2cd426=_0x34475e['user'],_0x4ba971=await profile[_0x2db082(0x10c)]({'email':_0x2cd426[_0x2db082(0xd7)]}),_0x58fd30=await master_shop[_0x2db082(0xff)]();console[_0x2db082(0xb8)](_0x2db082(0x12d),_0x58fd30);const _0x1fb18a=_0x34475e['params']['id'];console[_0x2db082(0xb8)](_0x1fb18a);const _0x1654ae=await categories[_0x2db082(0x132)](_0x1fb18a);if(_0x58fd30[0x0]['language']=='English\x20(US)')var _0x27f7aa=users[_0x2db082(0x134)];else{if(_0x58fd30[0x0]['language']==_0x2db082(0xed))var _0x27f7aa=users[_0x2db082(0xed)];else{if(_0x58fd30[0x0]['language']==_0x2db082(0xd3))var _0x27f7aa=users['German'];else{if(_0x58fd30[0x0]['language']==_0x2db082(0xb3))var _0x27f7aa=users['Spanish'];else{if(_0x58fd30[0x0][_0x2db082(0xb9)]==_0x2db082(0x137))var _0x27f7aa=users[_0x2db082(0x137)];else{if(_0x58fd30[0x0][_0x2db082(0xb9)]==_0x2db082(0xaa))var _0x27f7aa=users['Portuguese'];else{if(_0x58fd30[0x0][_0x2db082(0xb9)]==_0x2db082(0x10b))var _0x27f7aa=users[_0x2db082(0x10b)];else{if(_0x58fd30[0x0][_0x2db082(0xb9)]==_0x2db082(0xf8))var _0x27f7aa=users[_0x2db082(0x11c)];}}}}}}}_0x1408e4[_0x2db082(0xa0)](_0x2db082(0x11e),{'success':_0x34475e[_0x2db082(0xf9)]('success'),'errors':_0x34475e[_0x2db082(0xf9)](_0x2db082(0xe1)),'role':_0x2cd426,'profile':_0x4ba971,'master_shop':_0x58fd30,'user':_0x1654ae,'language':_0x27f7aa});}catch(_0x26ac09){console[_0x2db082(0xb8)](_0x26ac09);}}),router['post'](a0_0x4c98a7(0x10f),auth,async(_0x4c93c2,_0x4bc7cd)=>{const _0x57a61f=a0_0x4c98a7;try{const _0x51fb4b=_0x4c93c2[_0x57a61f(0xa7)]['id'],_0x284bf6=await categories[_0x57a61f(0xcf)](_0x51fb4b,_0x4c93c2[_0x57a61f(0x125)]);_0x4c93c2[_0x57a61f(0xf9)]('success',''+users[_0x57a61f(0xb1)]),_0x4bc7cd[_0x57a61f(0x108)]('/products/categories');}catch(_0x143a2a){console['log'](_0x143a2a);}}),router['get'](a0_0x4c98a7(0xbd),auth,async(_0x302f70,_0x5ca0da)=>{const _0x1e32d8=a0_0x4c98a7;try{const _0x1b34dd=_0x302f70[_0x1e32d8(0xa7)]['id'],_0x7c2cea=await categories[_0x1e32d8(0xa2)](_0x1b34dd);_0x302f70[_0x1e32d8(0xf9)](_0x1e32d8(0xa9),_0x1e32d8(0x13b)),_0x5ca0da['redirect'](_0x1e32d8(0xdf));}catch(_0x513650){console[_0x1e32d8(0xb8)](_0x513650);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x11f),auth,async(_0x2cf974,_0x3a6dd9)=>{const _0x34844c=a0_0x4c98a7;try{const {username:_0x3ef09a,email:_0x520ed5,role:_0x58618d}=_0x2cf974['user'],_0x2aecf1=_0x2cf974[_0x34844c(0xf5)],_0x45030c=await profile[_0x34844c(0x10c)]({'email':_0x2aecf1[_0x34844c(0xd7)]}),_0x4f665c=await master_shop[_0x34844c(0xff)]();console[_0x34844c(0xb8)](_0x34844c(0x12d),_0x4f665c);const _0x4be291=await brands['find']();if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0x139))var _0x2532ba=users['English'];else{if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0xed))var _0x2532ba=users[_0x34844c(0xed)];else{if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0xd3))var _0x2532ba=users['German'];else{if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0xb3))var _0x2532ba=users[_0x34844c(0xb3)];else{if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0x137))var _0x2532ba=users[_0x34844c(0x137)];else{if(_0x4f665c[0x0]['language']==_0x34844c(0xaa))var _0x2532ba=users[_0x34844c(0x141)];else{if(_0x4f665c[0x0]['language']=='Chinese')var _0x2532ba=users['Chinese'];else{if(_0x4f665c[0x0][_0x34844c(0xb9)]==_0x34844c(0xf8))var _0x2532ba=users['Arabic'];}}}}}}}_0x3a6dd9[_0x34844c(0xa0)](_0x34844c(0x114),{'success':_0x2cf974[_0x34844c(0xf9)](_0x34844c(0xa9)),'errors':_0x2cf974['flash'](_0x34844c(0xe1)),'role':_0x2aecf1,'profile':_0x45030c,'master_shop':_0x4f665c,'user':_0x4be291,'language':_0x2532ba});}catch(_0x5d3e37){console[_0x34844c(0xb8)](_0x5d3e37);}}),router[a0_0x4c98a7(0xe4)]('/brands',auth,async(_0x39ca03,_0x4a61aa)=>{const _0x39d209=a0_0x4c98a7;try{const {name:_0x53ddae,products:_0x247336}=_0x39ca03[_0x39d209(0x125)],_0x4a5c90=new brands({'name':_0x53ddae,'products':_0x247336}),_0x127693=await brands['findOne']({'name':_0x53ddae});_0x127693?_0x39ca03[_0x39d209(0xf9)](_0x39d209(0xe1),_0x53ddae+_0x39d209(0x113)):_0x39ca03[_0x39d209(0xf9)]('success',_0x53ddae+_0x39d209(0xad));const _0x33ab3b=await _0x4a5c90[_0x39d209(0xb0)]();_0x4a61aa[_0x39d209(0x108)](_0x39d209(0x14c));}catch(_0x395397){console[_0x39d209(0xb8)](_0x395397);}}),router[a0_0x4c98a7(0xfa)]('/brands/:id',auth,async(_0x3cd3af,_0x2c6ba7)=>{const _0x73cf4a=a0_0x4c98a7;try{const {username:_0x5cbe78,email:_0x3bfdc3,role:_0x4dd4b4}=_0x3cd3af['user'],_0x16aa80=_0x3cd3af[_0x73cf4a(0xf5)],_0xe6db9d=await profile[_0x73cf4a(0x10c)]({'email':_0x16aa80['email']}),_0x15688e=await master_shop['find']();console[_0x73cf4a(0xb8)](_0x73cf4a(0x12d),_0x15688e);const _0x15aa09=_0x3cd3af[_0x73cf4a(0xa7)]['id'];console[_0x73cf4a(0xb8)](_0x15aa09);const _0x5846ce=await brands['findById'](_0x15aa09);if(_0x15688e[0x0][_0x73cf4a(0xb9)]==_0x73cf4a(0x139))var _0x42e59d=users[_0x73cf4a(0x134)];else{if(_0x15688e[0x0]['language']==_0x73cf4a(0xed))var _0x42e59d=users[_0x73cf4a(0xed)];else{if(_0x15688e[0x0]['language']==_0x73cf4a(0xd3))var _0x42e59d=users[_0x73cf4a(0xd3)];else{if(_0x15688e[0x0][_0x73cf4a(0xb9)]=='Spanish')var _0x42e59d=users[_0x73cf4a(0xb3)];else{if(_0x15688e[0x0]['language']=='French')var _0x42e59d=users[_0x73cf4a(0x137)];else{if(_0x15688e[0x0][_0x73cf4a(0xb9)]==_0x73cf4a(0xaa))var _0x42e59d=users['Portuguese'];else{if(_0x15688e[0x0][_0x73cf4a(0xb9)]==_0x73cf4a(0x10b))var _0x42e59d=users[_0x73cf4a(0x10b)];else{if(_0x15688e[0x0][_0x73cf4a(0xb9)]==_0x73cf4a(0xf8))var _0x42e59d=users[_0x73cf4a(0x11c)];}}}}}}}_0x2c6ba7['render'](_0x73cf4a(0x114),{'success':_0x3cd3af[_0x73cf4a(0xf9)](_0x73cf4a(0xa9)),'errors':_0x3cd3af[_0x73cf4a(0xf9)](_0x73cf4a(0xe1)),'role':_0x16aa80,'profile':_0xe6db9d,'master_shop':_0x15688e,'user':_0x5846ce,'language':_0x42e59d});}catch(_0x2b2473){console[_0x73cf4a(0xb8)](_0x2b2473);}}),router[a0_0x4c98a7(0xe4)]('/brands/:id',auth,async(_0x34f467,_0x9112a1)=>{const _0x219d70=a0_0x4c98a7;try{const _0x333b46=_0x34f467[_0x219d70(0xa7)]['id'],_0x318523=await brands[_0x219d70(0xcf)](_0x333b46,_0x34f467['body']);_0x34f467[_0x219d70(0xf9)](_0x219d70(0xa9),_0x219d70(0x8e)),_0x9112a1[_0x219d70(0x108)](_0x219d70(0x14c));}catch(_0x542806){console[_0x219d70(0xb8)](_0x542806);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x115),auth,async(_0x586574,_0x18d3a3)=>{const _0x1c7dcf=a0_0x4c98a7;try{const _0x3e1167=_0x586574[_0x1c7dcf(0xa7)]['id'],_0x3c24e4=await brands[_0x1c7dcf(0xa2)](_0x3e1167);_0x586574[_0x1c7dcf(0xf9)](_0x1c7dcf(0xa9),_0x1c7dcf(0xeb)),_0x18d3a3['redirect'](_0x1c7dcf(0x14c));}catch(_0x14f953){console['log'](_0x14f953);}}),router[a0_0x4c98a7(0xfa)]('/units',auth,async(_0xdd0ded,_0x1765c4)=>{const _0x599cfa=a0_0x4c98a7;try{const {username:_0x585349,email:_0x495e56,role:_0x12ea91}=_0xdd0ded[_0x599cfa(0xf5)],_0x8579b0=_0xdd0ded[_0x599cfa(0xf5)],_0x56b8d1=await profile['findOne']({'email':_0x8579b0[_0x599cfa(0xd7)]}),_0x5d0e9a=await master_shop[_0x599cfa(0xff)]();console[_0x599cfa(0xb8)](_0x599cfa(0x12d),_0x5d0e9a);const _0x51bfc6=await units[_0x599cfa(0xff)]();if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0x139))var _0x582374=users['English'];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0xed))var _0x582374=users['Hindi'];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0xd3))var _0x582374=users[_0x599cfa(0xd3)];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0xb3))var _0x582374=users[_0x599cfa(0xb3)];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0x137))var _0x582374=users[_0x599cfa(0x137)];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0xaa))var _0x582374=users[_0x599cfa(0x141)];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]=='Chinese')var _0x582374=users['Chinese'];else{if(_0x5d0e9a[0x0][_0x599cfa(0xb9)]==_0x599cfa(0xf8))var _0x582374=users[_0x599cfa(0x11c)];}}}}}}}_0x1765c4['render'](_0x599cfa(0x112),{'success':_0xdd0ded[_0x599cfa(0xf9)](_0x599cfa(0xa9)),'errors':_0xdd0ded[_0x599cfa(0xf9)]('errors'),'role':_0x8579b0,'profile':_0x56b8d1,'master_shop':_0x5d0e9a,'user':_0x51bfc6,'language':_0x582374});}catch(_0x194fa6){console[_0x599cfa(0xb8)](_0x194fa6);}}),router[a0_0x4c98a7(0xe4)]('/units',auth,async(_0x1dff5c,_0x324205)=>{const _0x48345d=a0_0x4c98a7;try{const {name:_0x5a810c,secondary_unit:_0x5f2b97,products:_0x1c6840}=_0x1dff5c[_0x48345d(0x125)],_0x3b3bcd=new units({'name':_0x5a810c,'secondary_unit':_0x5f2b97,'products':_0x1c6840}),_0x20215c=await units['findOne']({'name':_0x5a810c});_0x20215c?_0x1dff5c[_0x48345d(0xf9)](_0x48345d(0xe1),_0x5a810c+_0x48345d(0xc8)):_0x1dff5c[_0x48345d(0xf9)](_0x48345d(0xa9),_0x5a810c+'\x20unit\x20is\x20add\x20successfully');const _0x4c9a53=await _0x3b3bcd[_0x48345d(0xb0)]();_0x324205['redirect'](_0x48345d(0x101));}catch(_0x4818d3){console[_0x48345d(0xb8)](_0x4818d3);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0xd6),auth,async(_0x11e834,_0x16ced4)=>{const _0x4d0834=a0_0x4c98a7;try{const {username:_0x96bade,email:_0x27b85b,role:_0x381fd5}=_0x11e834[_0x4d0834(0xf5)],_0x3e7d57=_0x11e834[_0x4d0834(0xf5)],_0x524788=await profile[_0x4d0834(0x10c)]({'email':_0x3e7d57[_0x4d0834(0xd7)]}),_0xdcd31f=await master_shop[_0x4d0834(0xff)]();console[_0x4d0834(0xb8)](_0x4d0834(0x12d),_0xdcd31f);const _0x21117f=_0x11e834[_0x4d0834(0xa7)]['id'],_0x19f913=await units[_0x4d0834(0x132)](_0x21117f);if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0x139))var _0x2e8da0=users['English'];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0xed))var _0x2e8da0=users['Hindi'];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0xd3))var _0x2e8da0=users[_0x4d0834(0xd3)];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0xb3))var _0x2e8da0=users[_0x4d0834(0xb3)];else{if(_0xdcd31f[0x0]['language']==_0x4d0834(0x137))var _0x2e8da0=users[_0x4d0834(0x137)];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]=='Portuguese\x20(BR)')var _0x2e8da0=users[_0x4d0834(0x141)];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0x10b))var _0x2e8da0=users[_0x4d0834(0x10b)];else{if(_0xdcd31f[0x0][_0x4d0834(0xb9)]==_0x4d0834(0xf8))var _0x2e8da0=users[_0x4d0834(0x11c)];}}}}}}}_0x16ced4['render'](_0x4d0834(0x112),{'success':_0x11e834[_0x4d0834(0xf9)]('success'),'errors':_0x11e834[_0x4d0834(0xf9)]('errors'),'role':_0x3e7d57,'profile':_0x524788,'master_shop':_0xdcd31f,'user':_0x19f913,'language':_0x2e8da0});}catch(_0x2bc343){console[_0x4d0834(0xb8)](_0x2bc343);}}),router['post'](a0_0x4c98a7(0xd6),auth,async(_0xa38cd5,_0x364750)=>{const _0x1cf599=a0_0x4c98a7;try{const _0x195c98=_0xa38cd5[_0x1cf599(0xa7)]['id'],_0x252407=await units[_0x1cf599(0xcf)](_0x195c98,_0xa38cd5['body']);_0xa38cd5[_0x1cf599(0xf9)]('success',_0x1cf599(0x11a)),_0x364750['redirect'](_0x1cf599(0x101));}catch(_0xddd3d1){console['log'](_0xddd3d1);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x143),auth,async(_0x12424a,_0x1d1c38)=>{const _0x39c9b7=a0_0x4c98a7;try{const _0x1f9442=_0x12424a[_0x39c9b7(0xa7)]['id'],_0x300071=await units[_0x39c9b7(0xa2)](_0x1f9442);_0x12424a['flash']('success',_0x39c9b7(0xde)),_0x1d1c38[_0x39c9b7(0x108)](_0x39c9b7(0x101));}catch(_0x2f364c){console[_0x39c9b7(0xb8)](_0x2f364c);}});function a0_0x4c56(_0xe517d6,_0x7fa73d){const _0x2ffc2e=a0_0x2ffc();return a0_0x4c56=function(_0x4c5683,_0x310d0e){_0x4c5683=_0x4c5683-0x8d;let _0x486696=_0x2ffc2e[_0x4c5683];return _0x486696;},a0_0x4c56(_0xe517d6,_0x7fa73d);}const storage=multer[a0_0x4c98a7(0xc9)]({'destination':(_0x29a12e,_0x2bcab0,_0x52487a)=>{const _0xfcd756=a0_0x4c98a7;_0x52487a(null,_0xfcd756(0x133));},'filename':(_0x40ad42,_0x46b11c,_0xc42094)=>{const _0x5b5cab=a0_0x4c98a7;_0xc42094(null,Date[_0x5b5cab(0x129)]()+_0x46b11c[_0x5b5cab(0x124)]);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0x5efd59,_0x477445)=>{const _0x54feb1=a0_0x4c98a7;try{const {username:_0x57376f,email:_0xf2d20c,role:_0x2f988a}=_0x5efd59[_0x54feb1(0xf5)],_0xb18670=_0x5efd59[_0x54feb1(0xf5)],_0x1ddd66=await profile[_0x54feb1(0x10c)]({'email':_0xb18670[_0x54feb1(0xd7)]}),_0x5d68c0={'year':_0x54feb1(0x122),'month':_0x54feb1(0x103),'day':_0x54feb1(0x122)},_0x44e99b=await master_shop[_0x54feb1(0xff)]();console['log']('Products\x20master',_0x44e99b);const _0xcc254b=await product[_0x54feb1(0xff)]();console[_0x54feb1(0xb8)](_0x54feb1(0x12e),_0xcc254b);const _0x5ee406=await warehouse[_0x54feb1(0xe9)]([{'$unwind':'$product_details'},{'$lookup':{'from':'products','localField':_0x54feb1(0xdd),'foreignField':_0x54feb1(0x12b),'as':_0x54feb1(0xc5)}},{'$unwind':_0x54feb1(0x9f)},{'$project':{'product_name':_0x54feb1(0x9e),'product_stock':_0x54feb1(0x96)}},{'$group':{'_id':_0x54feb1(0xd5),'product_stock':{'$sum':_0x54feb1(0xe3)}}}]);console[_0x54feb1(0xb8)]('Products\x20warehouse_data',_0x5ee406),_0x5ee406[_0x54feb1(0xc3)](_0x2285a4=>{const _0x4c3108=_0x54feb1,_0x271437=_0xcc254b[_0x4c3108(0x106)](_0x119abe=>{const _0x4ed3b6=_0x4c3108;_0x119abe['name']==_0x2285a4[_0x4ed3b6(0x99)]&&(_0x119abe[_0x4ed3b6(0x130)]=parseInt(_0x119abe[_0x4ed3b6(0x130)])+parseInt(_0x2285a4['product_stock']));});}),console[_0x54feb1(0xb8)]('Products\x20find_data',_0xcc254b);if(_0x44e99b[0x0][_0x54feb1(0xb9)]=='English\x20(US)')var _0x1968d4=users[_0x54feb1(0x134)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]==_0x54feb1(0xed))var _0x1968d4=users[_0x54feb1(0xed)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]=='German')var _0x1968d4=users[_0x54feb1(0xd3)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]=='Spanish')var _0x1968d4=users['Spanish'];else{if(_0x44e99b[0x0]['language']==_0x54feb1(0x137))var _0x1968d4=users[_0x54feb1(0x137)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]==_0x54feb1(0xaa))var _0x1968d4=users[_0x54feb1(0x141)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]==_0x54feb1(0x10b))var _0x1968d4=users[_0x54feb1(0x10b)];else{if(_0x44e99b[0x0][_0x54feb1(0xb9)]==_0x54feb1(0xf8))var _0x1968d4=users[_0x54feb1(0x11c)];}}}}}}}_0x477445[_0x54feb1(0xa0)](_0x54feb1(0x121),{'success':_0x5efd59[_0x54feb1(0xf9)](_0x54feb1(0xa9)),'errors':_0x5efd59[_0x54feb1(0xf9)]('errors'),'alldata':_0xcc254b,'profile':_0x1ddd66,'master_shop':_0x44e99b,'role':_0xb18670,'product_stock':_0x5ee406,'language':_0x1968d4});}catch(_0x590e23){console[_0x54feb1(0xb8)](_0x590e23);}}),router['get']('/view/add_products',auth,async(_0x5ee037,_0x276472)=>{const _0x466a5b=a0_0x4c98a7;try{const {username:_0x5c0583,email:_0x21f562,role:_0x4b0480}=_0x5ee037[_0x466a5b(0xf5)],_0x3dded6=_0x5ee037[_0x466a5b(0xf5)],_0x19d0ef=await profile[_0x466a5b(0x10c)]({'email':_0x3dded6[_0x466a5b(0xd7)]}),_0x577f5c=await master_shop[_0x466a5b(0xff)]();console[_0x466a5b(0xb8)](_0x466a5b(0x12d),_0x577f5c);const _0x2084fc=await categories[_0x466a5b(0xff)]({}),_0x2dafd0=await brands[_0x466a5b(0xff)]({}),_0x50ab95=await units[_0x466a5b(0xff)]({}),_0x533a5f=await warehouse[_0x466a5b(0xff)]({'status':_0x466a5b(0xae)});if(_0x577f5c[0x0][_0x466a5b(0xb9)]=='English\x20(US)')var _0x46b2ae=users[_0x466a5b(0x134)];else{if(_0x577f5c[0x0]['language']=='Hindi')var _0x46b2ae=users['Hindi'];else{if(_0x577f5c[0x0][_0x466a5b(0xb9)]==_0x466a5b(0xd3))var _0x46b2ae=users[_0x466a5b(0xd3)];else{if(_0x577f5c[0x0]['language']==_0x466a5b(0xb3))var _0x46b2ae=users[_0x466a5b(0xb3)];else{if(_0x577f5c[0x0][_0x466a5b(0xb9)]==_0x466a5b(0x137))var _0x46b2ae=users[_0x466a5b(0x137)];else{if(_0x577f5c[0x0]['language']==_0x466a5b(0xaa))var _0x46b2ae=users[_0x466a5b(0x141)];else{if(_0x577f5c[0x0][_0x466a5b(0xb9)]==_0x466a5b(0x10b))var _0x46b2ae=users['Chinese'];else{if(_0x577f5c[0x0][_0x466a5b(0xb9)]==_0x466a5b(0xf8))var _0x46b2ae=users['Arabic'];}}}}}}}_0x276472['render'](_0x466a5b(0xaf),{'success':_0x5ee037[_0x466a5b(0xf9)](_0x466a5b(0xa9)),'errors':_0x5ee037[_0x466a5b(0xf9)](_0x466a5b(0xe1)),'role':_0x3dded6,'profile':_0x19d0ef,'categories':_0x2084fc,'brands':_0x2dafd0,'master_shop':_0x577f5c,'units':_0x50ab95,'language':_0x46b2ae,'find_data':_0x533a5f});}catch(_0x52c599){console[_0x466a5b(0xb8)](_0x52c599);}}),router[a0_0x4c98a7(0xe4)](a0_0x4c98a7(0x14b),auth,upload[a0_0x4c98a7(0xa5)]('image'),async(_0x3403c7,_0x4a1769)=>{const _0x25029b=a0_0x4c98a7;try{const {name:_0x52bf25,category:_0x3cb849,brand:_0x42a65d,unit:_0x22fd3a,alertquantity:_0x3841ba,stock:_0x2f1e81,product_code:_0x2b18bc,warehouse:_0x429088,primary_ItemCode:_0x4c0c6a,second_ItemCode:_0x5db182,second_unit:_0x57a4c1,maxPerUnit:_0x4336d6,MaxPerProduct:_0x7f654c}=_0x3403c7[_0x25029b(0x125)],_0x423074=_0x3403c7['file']?.[_0x25029b(0x94)]||_0x25029b(0xb4),_0x33768e=new product({'image':_0x423074,'name':_0x52bf25,'category':_0x3cb849,'brand':_0x42a65d,'unit':_0x22fd3a,'alertquantity':_0x3841ba,'stock':_0x2f1e81,'product_code':_0x2b18bc,'warehouse':_0x429088,'primary_code':_0x4c0c6a,'secondary_code':_0x5db182,'second_unit':_0x57a4c1,'maxStocks':_0x7f654c,'maxProdPerUnit':_0x4336d6}),_0x2896dd=await _0x33768e[_0x25029b(0xb0)](),_0x229865=await categories[_0x25029b(0x10c)]({'name':_0x3cb849});_0x229865[_0x25029b(0x121)]=parseInt(_0x229865[_0x25029b(0x121)])+0x1,await _0x229865[_0x25029b(0xb0)]();const _0x5309a0=await brands[_0x25029b(0x10c)]({'name':_0x42a65d});_0x5309a0['products']=parseInt(_0x5309a0[_0x25029b(0x121)])+0x1,await _0x5309a0[_0x25029b(0xb0)]();const _0x34cb53=await units[_0x25029b(0x10c)]({'name':_0x22fd3a});_0x34cb53[_0x25029b(0x121)]=parseInt(_0x34cb53['products'])+0x1,await _0x34cb53[_0x25029b(0xb0)](),_0x3403c7[_0x25029b(0xf9)](_0x25029b(0xa9),_0x25029b(0xc4)),_0x4a1769['redirect'](_0x25029b(0xcb));}catch(_0x364033){console[_0x25029b(0xb8)](_0x364033);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0xe0),auth,async(_0x4e0197,_0x8b72b2)=>{const _0xcc2778=a0_0x4c98a7;try{const {username:_0x49befc,email:_0x2e5eac,role:_0x412afb}=_0x4e0197[_0xcc2778(0xf5)],_0x54863a=_0x4e0197[_0xcc2778(0xf5)],_0x43ae86=await profile[_0xcc2778(0x10c)]({'email':_0x54863a[_0xcc2778(0xd7)]}),_0x30c8e6=await master_shop[_0xcc2778(0xff)]();console[_0xcc2778(0xb8)](_0xcc2778(0xbf),_0x30c8e6);const _0x31ef07=_0x4e0197[_0xcc2778(0xa7)]['id'],_0x4c7afa=await product[_0xcc2778(0x132)](_0x31ef07),_0x33be6d=await categories[_0xcc2778(0xff)]({}),_0x3b1346=await brands[_0xcc2778(0xff)]({}),_0x3957f9=await units['find']({}),_0x268fc5=await warehouse['find']({'status':_0xcc2778(0xae)}),_0x438958=await units[_0xcc2778(0xe9)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0xcc2778(0xfc)}}}]);if(_0x30c8e6[0x0][_0xcc2778(0xb9)]==_0xcc2778(0x139))var _0x34d84e=users['English'];else{if(_0x30c8e6[0x0]['language']==_0xcc2778(0xed))var _0x34d84e=users[_0xcc2778(0xed)];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]=='German')var _0x34d84e=users[_0xcc2778(0xd3)];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]=='Spanish')var _0x34d84e=users[_0xcc2778(0xb3)];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]==_0xcc2778(0x137))var _0x34d84e=users['French'];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]==_0xcc2778(0xaa))var _0x34d84e=users[_0xcc2778(0x141)];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]=='Chinese')var _0x34d84e=users['Chinese'];else{if(_0x30c8e6[0x0][_0xcc2778(0xb9)]==_0xcc2778(0xf8))var _0x34d84e=users[_0xcc2778(0x11c)];}}}}}}}_0x8b72b2[_0xcc2778(0xa0)](_0xcc2778(0x148),{'success':_0x4e0197[_0xcc2778(0xf9)]('success'),'errors':_0x4e0197[_0xcc2778(0xf9)](_0xcc2778(0xe1)),'role':_0x54863a,'profile':_0x43ae86,'alldata':_0x4c7afa,'categories':_0x33be6d,'brands':_0x3b1346,'master_shop':_0x30c8e6,'units':_0x3957f9,'secondunit':_0x438958,'find_data':_0x268fc5,'language':_0x34d84e});}catch(_0x5d29db){console['log'](_0x5d29db);}}),router['post']('/view/:id',auth,upload[a0_0x4c98a7(0xa5)](a0_0x4c98a7(0x11b)),async(_0x1b1064,_0x15318a)=>{const _0x52fd1d=a0_0x4c98a7;try{console[_0x52fd1d(0xb8)](_0x52fd1d(0x104));const _0x864d59=_0x1b1064[_0x52fd1d(0xa7)]['id'],_0x3c0b6f=await product[_0x52fd1d(0x132)](_0x864d59),{image:_0x5f2c7c,name:_0x2a6853,category:_0x3e1acb,brand:_0x58b1f4,sku:_0x12be13,unit:_0x80dbf6,alertquantity:_0x5e27ba,product_code:_0x298908,warehouse:_0x2de67e,primary_ItemCode:_0x44d597,second_ItemCode:_0x2b5cc9,second_unit:_0x21208f,maxPerUnit:_0x1adea3,MaxPerProduct:_0x1c6c08,prod_catdata:_0x2459a6}=_0x1b1064[_0x52fd1d(0x125)];_0x1b1064[_0x52fd1d(0xf7)]&&(_0x3c0b6f['image']=_0x1b1064[_0x52fd1d(0xf7)]['filename']);_0x3c0b6f[_0x52fd1d(0x12b)]=_0x2a6853,_0x3c0b6f[_0x52fd1d(0x119)]=_0x3e1acb,_0x3c0b6f[_0x52fd1d(0x10e)]=_0x58b1f4,_0x3c0b6f[_0x52fd1d(0xa6)]=_0x12be13,_0x3c0b6f[_0x52fd1d(0x12c)]=_0x80dbf6,_0x3c0b6f[_0x52fd1d(0xb5)]=_0x5e27ba,_0x3c0b6f[_0x52fd1d(0x9c)]=_0x298908,_0x3c0b6f[_0x52fd1d(0x90)]=_0x2de67e,_0x3c0b6f[_0x52fd1d(0x123)]=_0x44d597,_0x3c0b6f[_0x52fd1d(0x93)]=_0x2b5cc9,_0x3c0b6f[_0x52fd1d(0x138)]=_0x21208f,_0x3c0b6f[_0x52fd1d(0x91)]=_0x1c6c08,_0x3c0b6f[_0x52fd1d(0x120)]=_0x1adea3,_0x3c0b6f[_0x52fd1d(0x128)]=_0x2459a6;const _0x12dcdc=await _0x3c0b6f['save']();console[_0x52fd1d(0xb8)]('product\x20edit',_0x3c0b6f),_0x1b1064[_0x52fd1d(0xf9)](_0x52fd1d(0xa9),'product\x20update\x20successfully'),_0x15318a[_0x52fd1d(0x108)](_0x52fd1d(0xcb));}catch(_0x53a5b3){console[_0x52fd1d(0xb8)](_0x53a5b3);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x10d),auth,async(_0x1ce62e,_0x9c0e0e)=>{const _0x4fa264=a0_0x4c98a7;try{const {username:_0x536b03,email:_0x3984f,role:_0x3ff663}=_0x1ce62e[_0x4fa264(0xf5)],_0x5babbe=_0x1ce62e[_0x4fa264(0xf5)],_0x204ff2=await profile[_0x4fa264(0x10c)]({'email':_0x5babbe[_0x4fa264(0xd7)]}),_0x354e20=await master_shop[_0x4fa264(0xff)]();console[_0x4fa264(0xb8)](_0x4fa264(0xec),_0x354e20);const _0x1da45b=_0x1ce62e[_0x4fa264(0xa7)]['id'],_0x5efc3b=await product[_0x4fa264(0x132)](_0x1da45b);console[_0x4fa264(0xb8)](_0x4fa264(0xc7),_0x5efc3b);if(_0x354e20[0x0][_0x4fa264(0xb9)]==_0x4fa264(0x139))var _0x4d0cd6=users['English'];else{if(_0x354e20[0x0]['language']=='Hindi')var _0x4d0cd6=users['Hindi'];else{if(_0x354e20[0x0][_0x4fa264(0xb9)]==_0x4fa264(0xd3))var _0x4d0cd6=users[_0x4fa264(0xd3)];else{if(_0x354e20[0x0]['language']==_0x4fa264(0xb3))var _0x4d0cd6=users[_0x4fa264(0xb3)];else{if(_0x354e20[0x0][_0x4fa264(0xb9)]==_0x4fa264(0x137))var _0x4d0cd6=users['French'];else{if(_0x354e20[0x0][_0x4fa264(0xb9)]==_0x4fa264(0xaa))var _0x4d0cd6=users[_0x4fa264(0x141)];else{if(_0x354e20[0x0][_0x4fa264(0xb9)]==_0x4fa264(0x10b))var _0x4d0cd6=users[_0x4fa264(0x10b)];else{if(_0x354e20[0x0][_0x4fa264(0xb9)]=='Arabic\x20(ae)')var _0x4d0cd6=users[_0x4fa264(0x11c)];}}}}}}}_0x9c0e0e[_0x4fa264(0xa0)](_0x4fa264(0x13c),{'success':_0x1ce62e['flash'](_0x4fa264(0xa9)),'errors':_0x1ce62e[_0x4fa264(0xf9)](_0x4fa264(0xe1)),'role':_0x5babbe,'profile':_0x204ff2,'alldata':_0x5efc3b,'master_shop':_0x354e20,'language':_0x4d0cd6});}catch(_0x488445){console[_0x4fa264(0xb8)](_0x488445);}}),router[a0_0x4c98a7(0xfa)](a0_0x4c98a7(0x146),auth,async(_0xadaf90,_0x2e12fe)=>{const _0x3cebcb=a0_0x4c98a7;try{const _0x3ae757=new excelJS[(_0x3cebcb(0x144))](),_0x35078e=_0x3ae757['addWorksheet'](_0x3cebcb(0x109));return _0x35078e['columns']=[{'header':_0x3cebcb(0x9d),'key':'PName','width':0xa},{'header':'Brands','key':_0x3cebcb(0x13a),'width':0xa},{'header':'Units','key':'PUnits','width':0xa},{'header':_0x3cebcb(0x117),'key':'PSecondaryUnits','width':0xa},{'header':_0x3cebcb(0x118),'key':_0x3cebcb(0x12f),'width':0xa},{'header':'Primary_Code','key':'ProductCode','width':0xa},{'header':'Secondary_Code','key':_0x3cebcb(0xba),'width':0xa},{'header':_0x3cebcb(0xea),'key':_0x3cebcb(0xba),'width':0xa},{'header':_0x3cebcb(0xdc),'key':_0x3cebcb(0xe2),'width':0xa},{'header':_0x3cebcb(0x105),'key':_0x3cebcb(0xb2),'width':0xa},{'header':_0x3cebcb(0x142),'key':_0x3cebcb(0xb2),'width':0xa},{'header':_0x3cebcb(0x135),'key':_0x3cebcb(0xf0),'width':0xa}],_0x2e12fe['setHeader']('Content-Type',_0x3cebcb(0xd0)),_0x2e12fe[_0x3cebcb(0xef)]('Content-Disposition',_0x3cebcb(0x12a)),_0x3ae757['xlsx'][_0x3cebcb(0xb6)](_0x2e12fe)[_0x3cebcb(0x145)](()=>{const _0x495381=_0x3cebcb;_0x2e12fe[_0x495381(0xf1)](0xc8);});}catch(_0x2798d7){_0x2e12fe[_0x3cebcb(0xf1)](0x190)[_0x3cebcb(0xe8)](_0x2798d7);}});function a0_0x2ffc(){const _0x88372=['Secondary_Units','max_number_per_units','category','unit\x20data\x20update\x20successfully','image','Arabic','Secondary_Code','categories','/brands','maxProdPerUnit','products','numeric','primary_code','originalname','body','CODE128','\x20categories\x20is\x20add\x20successfully','product_category','now','attachment;\x20filename=Product_Migration_File.xlsx','name','unit','master','Products\x20find_data','MaxperUnits','stock','exports','findById','public/upload','English','Products_category','Router','French','secondary_unit','English\x20(US)','PBrands','categories\x20data\x20delete\x20successfully','product_barcode','49IEwKJH','canvas','656755QgTktt','json','Portuguese','Maximum_Stocks','/units/delete/:id','Workbook','then','/products_export_migrate_file','concat','edit_product','length','prod_categ','/view/add_products','/products/brands','pdfkit-table','brand\x20data\x20update\x20successfully','message','warehouse','maxStocks','/categories','secondary_code','filename','jsbarcode','$product_details.product_stock','data','2112336fKdSSx','_id','\x20<>\x20','public/Migration/','product_code','Product_Name','$product_details.product_name','$product_docs','render','Primary_Code','findByIdAndDelete','Raw\x20Materials','xlsx','single','sku','params','708180QGKytu','success','Portuguese\x20(BR)','../public/language/languages.json','$product_category','\x20brand\x20is\x20add\x20successfully','Enabled','add_product','save','categories_edit','PAlQty','Spanish','defaultProduct.avif','alertquantity','write','push','log','language','ProductCode','$_id','661836Oygpmz','/categories/delete/:id','SheetNames','edit\x20Product\x20master','categ','\x20Edit\x20Successfully','base64','forEach','product\x20add\x20successfully','product_docs','$category','barcode\x20user_id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','diskStorage','6cFvQKi','/products/view','toBuffer','readFile','public/Migration','findByIdAndUpdate','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','width','450072QDahjM','German','1033xlkHSj','$product_name','/units/:id','email','multer','/products_import_migrate_file','/select_data','/print_barcode_filter/','Category','product_details.product_name','unit\x20data\x20delete\x20successfully','/products/categories','/view/:id','errors','PCat','$product_stock','post','toString','end','exceljs','send','aggregate','Product_Code','brand\x20data\x20delete\x20successfully','barcode\x20Product\x20master','Hindi','bind','setHeader','Prod_Cat','status','Finished\x20Goods','328DFlVyL','Brands','user','/filter_product','file','Arabic\x20(ae)','flash','get','height','$secondary_unit','min','$brand','find','/barcode_filter','/products/units','migrate_product_fule','long','hello','Alert_QTY','map','../models/all_models','redirect','Products','195480ErthyO','Chinese','findOne','/barcode/:id','brand','/categories/:id','\x20added\x20successfully','utils','units','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','brands','/brands/delete/:id','express'];a0_0x2ffc=function(){return _0x88372;};return a0_0x2ffc();}const storage1=multer[a0_0x4c98a7(0xc9)]({'destination':(_0xc7e9ef,_0x1e42dd,_0x596496)=>{const _0x405bb8=a0_0x4c98a7;_0x596496(null,_0x405bb8(0xce));},'filename':(_0x4eff6d,_0xbadef7,_0x2e7d23)=>{const _0x3f7de8=a0_0x4c98a7;_0x2e7d23(null,Date[_0x3f7de8(0x129)]()+_0xbadef7['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x4c98a7(0xe4)](a0_0x4c98a7(0xd9),auth,uploadMigrate[a0_0x4c98a7(0xa5)](a0_0x4c98a7(0x102)),async(_0x42d714,_0x1611e5)=>{const _0x4d8559=a0_0x4c98a7,_0x45f77c=_0x42d714['file'][_0x4d8559(0x94)],_0x15b0eb=await xlsx[_0x4d8559(0xcd)](_0x4d8559(0x9b)+_0x45f77c);let _0xacf5bc=_0x15b0eb[_0x4d8559(0xbe)],_0x2e1baa=xlsx[_0x4d8559(0x111)]['sheet_to_json'](_0x15b0eb['Sheets'][_0xacf5bc[0x0]]);for(const _0x4bfe54 of _0x2e1baa){const _0x1ea695=_0x4bfe54['Product_Name'],_0x887548=_0x4bfe54[_0x4d8559(0xf4)],_0x26efa2=_0x4bfe54['Units'],_0x459098=_0x4bfe54[_0x4d8559(0x117)],_0x53d2de=_0x4bfe54[_0x4d8559(0xea)],_0x18344b=_0x4bfe54['Category'],_0x41badc=_0x4bfe54[_0x4d8559(0x105)],_0x1eb5ba=_0x4bfe54[_0x4d8559(0xa1)],_0x558ee9=_0x4bfe54[_0x4d8559(0x11d)],_0xe8e47a=_0x4bfe54['Maximum_Stocks'],_0x3b22e3=_0x4bfe54[_0x4d8559(0x118)],_0x142b8d=_0x4bfe54[_0x4d8559(0x135)];try{let _0x15caa5=await categories[_0x4d8559(0x10c)]({'name':_0x18344b});if(!_0x15caa5){const _0x23730f=new categories({'name':_0x18344b,'products':'0'});_0x15caa5=await _0x23730f[_0x4d8559(0xb0)]();}let _0x128bd3=await brands['findOne']({'name':_0x887548});if(!_0x128bd3){const _0x300647=new brands({'name':_0x887548,'products':'0'});_0x128bd3=await _0x300647['save']();}let _0x4ae624=await units['findOne']({'name':_0x26efa2,'secondary_unit':_0x459098});if(!_0x4ae624){const _0x229f7d=new units({'name':_0x26efa2,'secondary_unit':_0x459098,'products':'0'});_0x4ae624=await _0x229f7d[_0x4d8559(0xb0)]();}const _0x47a6dd=await product[_0x4d8559(0xff)]({'name':_0x1ea695,'category':_0x15caa5[_0x4d8559(0x12b)],'brand':_0x128bd3[_0x4d8559(0x12b)],'secondary_unit':_0x4ae624['secondary_unit'],'product_code':_0x53d2de});console['log'](_0x47a6dd[_0x4d8559(0x149)]+_0x4d8559(0x9a)+_0x15caa5[_0x4d8559(0x12b)]+_0x4d8559(0x9a)+_0x128bd3[_0x4d8559(0x12b)]+'\x20<>\x20'+_0x4ae624[_0x4d8559(0x138)]+_0x4d8559(0x9a)+_0x53d2de+_0x4d8559(0x9a)+_0x1ea695);if(_0x47a6dd[_0x4d8559(0x149)]===0x0){const _0x3d7510=new product({'image':_0x4d8559(0xb4),'name':_0x1ea695,'category':_0x15caa5[_0x4d8559(0x12b)],'brand':_0x128bd3['name'],'unit':_0x4ae624['name'],'alertquantity':_0x41badc,'product_code':_0x53d2de,'secondary_unit':_0x4ae624['secondary_unit'],'primary_code':_0x1eb5ba,'secondary_code':_0x558ee9,'maxStocks':_0xe8e47a,'maxProdPerUnit':_0x3b22e3,'product_category':_0x142b8d}),_0x198a83=await _0x3d7510[_0x4d8559(0xb0)]();_0x15caa5[_0x4d8559(0x121)]=parseInt(_0x15caa5[_0x4d8559(0x121)])+0x1,await _0x15caa5[_0x4d8559(0xb0)](),_0x128bd3[_0x4d8559(0x121)]=parseInt(_0x128bd3[_0x4d8559(0x121)])+0x1,await _0x128bd3[_0x4d8559(0xb0)](),_0x4ae624[_0x4d8559(0x121)]=parseInt(_0x4ae624[_0x4d8559(0x121)])+0x1,await _0x4ae624['save'](),_0x42d714['flash'](_0x4d8559(0xa9),_0x1ea695+_0x4d8559(0x110));}else{console['log'](_0x47a6dd[0x0]);const _0x41e781=_0x47a6dd[0x0];_0x41e781['category']=_0x15caa5[_0x4d8559(0x12b)],_0x41e781[_0x4d8559(0x10e)]=_0x128bd3[_0x4d8559(0x12b)],_0x41e781[_0x4d8559(0x12c)]=_0x4ae624[_0x4d8559(0x12b)],_0x41e781[_0x4d8559(0xb5)]=_0x41badc,_0x41e781['product_code']=_0x53d2de,_0x41e781['secondary_unit']=_0x4ae624[_0x4d8559(0x138)],_0x41e781[_0x4d8559(0x123)]=_0x1eb5ba,_0x41e781[_0x4d8559(0x93)]=_0x558ee9,_0x41e781[_0x4d8559(0x91)]=_0xe8e47a,_0x41e781[_0x4d8559(0x120)]=_0x3b22e3,_0x41e781['product_category']=_0x142b8d;const _0x3e234b=await _0x41e781[_0x4d8559(0xb0)]();_0x42d714[_0x4d8559(0xf9)](_0x4d8559(0xa9),_0x3e234b[_0x4d8559(0x12b)]+_0x4d8559(0xc1));}}catch(_0x1f36b7){_0x1611e5[_0x4d8559(0xf1)](0x1f4)['json']({'proderror':_0x1f36b7[_0x4d8559(0x8f)],'aproduct':_0x1ea695});}}_0x1611e5[_0x4d8559(0x108)](_0x4d8559(0xcb));}),router[a0_0x4c98a7(0xe4)](a0_0x4c98a7(0xda),auth,async(_0x2cb158,_0x2e28db)=>{const _0x1c01cd=a0_0x4c98a7;try{console['log'](_0x2cb158[_0x1c01cd(0x125)]);const {data_cateory:_0x22b012,datachoose:_0x55a327}=_0x2cb158[_0x1c01cd(0x125)];var _0x1ffdf5;if(_0x55a327==_0x1c01cd(0x14a))_0x1ffdf5=await product['aggregate']([{'$group':{'_id':_0x1c01cd(0xac)}}]);else{if(_0x55a327=='brands')_0x1ffdf5=await product[_0x1c01cd(0xe9)]([{'$match':{'product_category':_0x22b012}},{'$group':{'_id':_0x1c01cd(0xfe)}}]);else _0x55a327=='categ'&&(_0x1ffdf5=await product[_0x1c01cd(0xe9)]([{'$match':{'product_category':_0x22b012}},{'$group':{'_id':_0x1c01cd(0xc6)}}]));}_0x2e28db[_0x1c01cd(0x140)](_0x1ffdf5);}catch(_0x586a7c){_0x2e28db[_0x1c01cd(0x140)]({'message':_0x586a7c['message']});}}),router['post'](a0_0x4c98a7(0xf6),auth,async(_0x1e591e,_0x35ec25)=>{const _0x47f6f1=a0_0x4c98a7;try{const {data_choosing:_0x55068f,data_selected:_0xbe7fce}=_0x1e591e[_0x47f6f1(0x125)];var _0x34f4c2;if(_0x55068f==_0x47f6f1(0x14a))_0x34f4c2=await product[_0x47f6f1(0xe9)]([{'$match':{'product_category':_0xbe7fce}}]);else{if(_0x55068f==_0x47f6f1(0x114))_0x34f4c2=await product[_0x47f6f1(0xe9)]([{'$match':{'brand':_0xbe7fce}}]);else _0x55068f==_0x47f6f1(0xc0)&&(_0x34f4c2=await product[_0x47f6f1(0xe9)]([{'$match':{'category':_0xbe7fce}}]));}_0x35ec25['json'](_0x34f4c2);}catch(_0x4400c6){_0x35ec25[_0x47f6f1(0x140)]({'message':_0x4400c6[_0x47f6f1(0x8f)]});}}),router['get']('/print_barcode',auth,async(_0x660843,_0x163166)=>{const _0x1c2a53=a0_0x4c98a7,_0x22f7c0=_0x660843[_0x1c2a53(0xf5)],_0x49416d=await profile[_0x1c2a53(0x10c)]({'email':_0x22f7c0['email']}),_0x37ce83=await master_shop[_0x1c2a53(0xff)](),_0x430ee1=await product['find']();if(_0x37ce83[0x0]['language']==_0x1c2a53(0x139))var _0x4d199f=users[_0x1c2a53(0x134)];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]=='Hindi')var _0x4d199f=users['Hindi'];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]==_0x1c2a53(0xd3))var _0x4d199f=users[_0x1c2a53(0xd3)];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]=='Spanish')var _0x4d199f=users[_0x1c2a53(0xb3)];else{if(_0x37ce83[0x0]['language']==_0x1c2a53(0x137))var _0x4d199f=users[_0x1c2a53(0x137)];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]==_0x1c2a53(0xaa))var _0x4d199f=users['Portuguese'];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]==_0x1c2a53(0x10b))var _0x4d199f=users[_0x1c2a53(0x10b)];else{if(_0x37ce83[0x0][_0x1c2a53(0xb9)]==_0x1c2a53(0xf8))var _0x4d199f=users['Arabic'];}}}}}}}_0x163166['render']('product_barcode_products',{'success':_0x660843[_0x1c2a53(0xf9)](_0x1c2a53(0xa9)),'errors':_0x660843['flash'](_0x1c2a53(0xe1)),'role':_0x22f7c0,'profile':_0x49416d,'products':_0x430ee1,'master_shop':_0x37ce83,'language':_0x4d199f});}),router[a0_0x4c98a7(0xe4)]('/barcode_data',auth,async(_0x4292cf,_0x1998d3)=>{const _0x308465=a0_0x4c98a7,_0x4ec847=await product[_0x308465(0xff)]();_0x1998d3[_0x308465(0x140)]({'data':_0x4ec847});}),router[a0_0x4c98a7(0xe4)](a0_0x4c98a7(0x100),auth,async(_0x287348,_0x174d92)=>{const _0xc8a2f8=a0_0x4c98a7;try{const {dataProdCat:_0xc30a26,dataProdIdentity:_0x56c4ae}=_0x287348['body'];var _0x4baa0a;switch(_0xc30a26){case'fg':switch(_0x56c4ae){case _0xc8a2f8(0xf4):_0x4baa0a=await product['aggregate']([{'$match':{'product_category':_0xc8a2f8(0xf2)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0xc8a2f8(0xbb)}}]);break;case _0xc8a2f8(0xdc):_0x4baa0a=await product['aggregate']([{'$match':{'product_category':_0xc8a2f8(0xf2)}},{'$group':{'_id':'$category'}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x56c4ae){case _0xc8a2f8(0xf4):_0x4baa0a=await product[_0xc8a2f8(0xe9)]([{'$match':{'product_category':_0xc8a2f8(0xa3)}},{'$group':{'_id':_0xc8a2f8(0xfe)}},{'$project':{'brand':_0xc8a2f8(0xbb)}}]);break;case _0xc8a2f8(0xdc):_0x4baa0a=await product[_0xc8a2f8(0xe9)]([{'$match':{'product_category':_0xc8a2f8(0xa3)}},{'$group':{'_id':_0xc8a2f8(0xc6)}},{'$project':{'category':_0xc8a2f8(0xbb)}}]);break;}break;}_0x174d92[_0xc8a2f8(0x140)](_0x4baa0a);}catch(_0x1214bd){_0x174d92[_0xc8a2f8(0x140)]({'message':_0x1214bd['message']});}}),router[a0_0x4c98a7(0xe4)](a0_0x4c98a7(0xdb),auth,async(_0x39ca22,_0x20bf6f)=>{const _0x594ae6=a0_0x4c98a7;try{console['log'](_0x39ca22[_0x594ae6(0x125)]);const {prod_cat:_0x822085,identity:_0x40e020,valueData:_0x3a7a99,typeofbarcode:_0x490a66}=_0x39ca22[_0x594ae6(0x125)];let _0x417198;switch(_0x822085){case'fg':if(_0x40e020==_0x594ae6(0xf4))_0x417198=await product[_0x594ae6(0xe9)]([{'$match':{'product_category':_0x594ae6(0xf2),'brand':_0x3a7a99}}]);else _0x40e020=='Category'&&(_0x417198=await product['aggregate']([{'$match':{'product_category':_0x594ae6(0xf2),'category':_0x3a7a99}}]));break;case'rm':if(_0x40e020==_0x594ae6(0xf4))_0x417198=await product['aggregate']([{'$match':{'product_category':_0x594ae6(0xa3),'brand':_0x3a7a99}}]);else _0x40e020==_0x594ae6(0xdc)&&(_0x417198=await product[_0x594ae6(0xe9)]([{'$match':{'product_category':_0x594ae6(0xa3),'category':_0x3a7a99}}]));break;}const _0xd74ff2=_0x3b1a47=>_0x3b1a47*0x48,_0x5cc2eb={'width':0x3,'height':0x1},_0x32c520=new PDFDocument({'margin':_0xd74ff2(0.75),'size':[_0xd74ff2(_0x5cc2eb[_0x594ae6(0xd1)]),_0xd74ff2(_0x5cc2eb['height'])],'bufferPages':!![]}),_0xbf4a27=_0x417198[_0x594ae6(0x149)];for(let _0x1ef217=0x0;_0x1ef217<=_0xbf4a27;_0x1ef217++){if(_0x1ef217!=_0xbf4a27){const _0x5b5a4b=_0x417198[_0x1ef217]['name'],_0x2ec08e=_0x417198[_0x1ef217]['primary_code'],_0x201a73=_0x417198[_0x1ef217][_0x594ae6(0x93)],_0x2b3034=_0x417198[_0x1ef217]['product_code'];var _0x57e819;switch(_0x490a66){case'1':_0x57e819=_0x2ec08e;break;case'2':_0x57e819=_0x201a73;break;case'3':_0x57e819=_0x2b3034;break;}const _0x4cdda7={'width':0xd2,'height':0x64},_0x28f03a={'width':_0xd74ff2(_0x5cc2eb[_0x594ae6(0xd1)]),'height':_0xd74ff2(_0x5cc2eb[_0x594ae6(0xfb)])},_0x2ac342=new Canvas();JsBarcode(_0x2ac342,_0x57e819,{'format':_0x594ae6(0x126),'height':_0x4cdda7[_0x594ae6(0xfb)],'displayValue':!![],'text':_0x57e819});const _0xe2e37=_0x2ac342['toBuffer'](),_0xac770a=_0x28f03a['width']/_0x4cdda7[_0x594ae6(0xd1)],_0x5c44db=_0x28f03a[_0x594ae6(0xfb)]/_0x4cdda7['height'],_0x825996=Math[_0x594ae6(0xfd)](_0xac770a,_0x5c44db),_0x5b2ab1=_0x4cdda7['width']*_0x825996,_0x557dd5=_0x4cdda7[_0x594ae6(0xfb)]*_0x825996,_0x1d6553=(_0x28f03a[_0x594ae6(0xd1)]-_0x5b2ab1)/0x2,_0x53fc13=(_0x28f03a['height']-_0x557dd5)/0x2;_0x32c520[_0x594ae6(0x11b)](_0xe2e37,_0x1d6553,_0x53fc13,{'width':_0x5b2ab1,'height':_0x557dd5}),_0x1ef217!=_0xbf4a27&&_0x32c520['addPage']();}}const _0x1e51e0=[];_0x32c520['on']('data',_0x1e51e0[_0x594ae6(0xb7)][_0x594ae6(0xee)](_0x1e51e0)),_0x32c520['on'](_0x594ae6(0xe6),()=>{const _0x2d1c33=_0x594ae6,_0x19990f=Buffer[_0x2d1c33(0x147)](_0x1e51e0),_0x46114f=_0x19990f['toString']('base64');_0x20bf6f['json']({'pdfContent':_0x46114f});}),_0x32c520[_0x594ae6(0xe6)]();}catch(_0x800f77){_0x20bf6f['json']({'message':_0x800f77[_0x594ae6(0x8f)]});}}),router[a0_0x4c98a7(0xe4)]('/print_barcode_filter_search/',auth,async(_0x5df436,_0x5ccd6a)=>{const _0x1b83e9=a0_0x4c98a7;try{console['log'](_0x5df436[_0x1b83e9(0x125)]);const {prod_cat:_0x25a2ea,identity:_0x49934c,valueData:_0x14cfe4}=_0x5df436[_0x1b83e9(0x125)];let _0x32f4b3;switch(_0x25a2ea){case'fg':if(_0x49934c=='Brands')_0x32f4b3=await product[_0x1b83e9(0xe9)]([{'$match':{'product_category':_0x1b83e9(0xf2),'brand':_0x14cfe4}}]);else _0x49934c=='Category'&&(_0x32f4b3=await product[_0x1b83e9(0xe9)]([{'$match':{'product_category':_0x1b83e9(0xf2),'category':_0x14cfe4}}]));break;case'rm':if(_0x49934c==_0x1b83e9(0xf4))_0x32f4b3=await product[_0x1b83e9(0xe9)]([{'$match':{'product_category':_0x1b83e9(0xa3),'brand':_0x14cfe4}}]);else _0x49934c==_0x1b83e9(0xdc)&&(_0x32f4b3=await product[_0x1b83e9(0xe9)]([{'$match':{'product_category':_0x1b83e9(0xa3),'category':_0x14cfe4}}]));break;}_0x5ccd6a[_0x1b83e9(0x140)]({'data':_0x32f4b3});}catch(_0x754123){_0x5ccd6a[_0x1b83e9(0x140)]({'message':_0x754123[_0x1b83e9(0x8f)]});}}),router[a0_0x4c98a7(0xe4)]('/print_barcode_single/:id',auth,async(_0x41b567,_0x2461a7)=>{const _0x378bf6=a0_0x4c98a7;try{const _0x92271c=_0x41b567[_0x378bf6(0xa7)]['id'],{copies:_0x480c87,typeofbarcode:_0x4f9b30}=_0x41b567[_0x378bf6(0x125)];var _0x48eb2b=await product['findById'](_0x92271c);const _0x1c8ea6=_0xd2c69c=>_0xd2c69c*0x48,_0x5e5416={'width':0x3,'height':0x1},_0x55893c=new PDFDocument({'margin':_0x1c8ea6(0.75),'size':[_0x1c8ea6(_0x5e5416[_0x378bf6(0xd1)]),_0x1c8ea6(_0x5e5416[_0x378bf6(0xfb)])],'bufferPages':!![]}),_0x35c1a1=_0x480c87,_0x43e9b6=_0x48eb2b['name'],_0xc26e2b=_0x48eb2b['primary_code'],_0x29043e=_0x48eb2b[_0x378bf6(0x93)],_0x2c484e=_0x48eb2b[_0x378bf6(0x9c)];let _0x1efaa9;switch(_0x4f9b30){case'1':_0x1efaa9=_0xc26e2b;break;case'2':_0x1efaa9=_0x29043e;break;case'3':_0x1efaa9=_0x2c484e;break;}const _0x1f73a7={'width':0xd2,'height':0x64},_0x2585c7={'width':_0x1c8ea6(_0x5e5416['width']),'height':_0x1c8ea6(_0x5e5416[_0x378bf6(0xfb)])};for(let _0x5ed563=0x1;_0x5ed563<=_0x35c1a1;_0x5ed563++){const _0x5d98e6=new Canvas();JsBarcode(_0x5d98e6,_0x1efaa9,{'format':_0x378bf6(0x126),'height':_0x1f73a7['height'],'displayValue':!![],'text':_0x1efaa9});const _0x2bba9c=_0x5d98e6[_0x378bf6(0xcc)](),_0x2cc1e9=_0x2585c7['width']/_0x1f73a7[_0x378bf6(0xd1)],_0x27ceec=_0x2585c7[_0x378bf6(0xfb)]/_0x1f73a7[_0x378bf6(0xfb)],_0x2f2b50=Math[_0x378bf6(0xfd)](_0x2cc1e9,_0x27ceec),_0x14e3a6=_0x1f73a7[_0x378bf6(0xd1)]*_0x2f2b50,_0x4b198d=_0x1f73a7[_0x378bf6(0xfb)]*_0x2f2b50,_0x1868b9=(_0x2585c7[_0x378bf6(0xd1)]-_0x14e3a6)/0x2,_0x543dbe=(_0x2585c7[_0x378bf6(0xfb)]-_0x4b198d)/0x2;_0x55893c[_0x378bf6(0x11b)](_0x2bba9c,_0x1868b9,_0x543dbe,{'width':_0x14e3a6,'height':_0x4b198d}),_0x5ed563!=_0x35c1a1&&_0x55893c['addPage']();}const _0x3a48cb=[];_0x55893c['on'](_0x378bf6(0x97),_0x3a48cb['push'][_0x378bf6(0xee)](_0x3a48cb)),_0x55893c['on'](_0x378bf6(0xe6),()=>{const _0x1e47c7=_0x378bf6,_0x2d3d3e=Buffer[_0x1e47c7(0x147)](_0x3a48cb),_0x5eb8d4=_0x2d3d3e[_0x1e47c7(0xe5)](_0x1e47c7(0xc2));_0x2461a7[_0x1e47c7(0x140)]({'pdfContent':_0x5eb8d4});}),_0x55893c[_0x378bf6(0xe6)]();}catch(_0xe05928){_0x2461a7['json']({'message':_0xe05928['message']});}}),module[a0_0x4c98a7(0x131)]=router;