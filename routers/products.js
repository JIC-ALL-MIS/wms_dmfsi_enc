function a0_0x4078(_0x331e92,_0x20a330){const _0x2e498f=a0_0x2e49();return a0_0x4078=function(_0x407827,_0xad35d0){_0x407827=_0x407827-0x8d;let _0x33f2be=_0x2e498f[_0x407827];return _0x33f2be;},a0_0x4078(_0x331e92,_0x20a330);}const a0_0x231013=a0_0x4078;(function(_0x4cd380,_0xf7f72a){const _0x391fdb=a0_0x4078,_0x383aa2=_0x4cd380();while(!![]){try{const _0x132a74=parseInt(_0x391fdb(0xe5))/0x1+-parseInt(_0x391fdb(0xd6))/0x2+-parseInt(_0x391fdb(0xeb))/0x3*(-parseInt(_0x391fdb(0xa9))/0x4)+parseInt(_0x391fdb(0xc1))/0x5*(parseInt(_0x391fdb(0x104))/0x6)+parseInt(_0x391fdb(0xf5))/0x7*(parseInt(_0x391fdb(0x9a))/0x8)+-parseInt(_0x391fdb(0xef))/0x9+parseInt(_0x391fdb(0xdf))/0xa;if(_0x132a74===_0xf7f72a)break;else _0x383aa2['push'](_0x383aa2['shift']());}catch(_0x16ff4c){_0x383aa2['push'](_0x383aa2['shift']());}}}(a0_0x2e49,0x8350d));const express=require(a0_0x231013(0x9f)),res=require('express/lib/response'),app=express(),router=express[a0_0x231013(0xd3)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x231013(0xb7)),auth=require('../middleware/auth'),users=require(a0_0x231013(0x8d)),excelJS=require('exceljs'),xlsx=require(a0_0x231013(0x149)),JsBarcode=require(a0_0x231013(0xda)),{Canvas}=require(a0_0x231013(0x11a)),PDFDocument=require(a0_0x231013(0x11f));router[a0_0x231013(0xdc)](a0_0x231013(0xe1),auth,async(_0x384c43,_0x37d11e)=>{const _0x355815=a0_0x231013;try{const {username:_0x5d00a0,email:_0x214fc2,role:_0x4fd2ea}=_0x384c43[_0x355815(0x9c)],_0x3f10f5=_0x384c43[_0x355815(0x9c)],_0x5210ec=await profile['findOne']({'email':_0x3f10f5[_0x355815(0x13c)]}),_0x43c29f=await master_shop[_0x355815(0xd0)]();console['log']('master',_0x43c29f);const _0x34a03b=await categories[_0x355815(0xd0)]();if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0x144))var _0x1ca213=users['English'];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0x123))var _0x1ca213=users[_0x355815(0x123)];else{if(_0x43c29f[0x0]['language']==_0x355815(0x147))var _0x1ca213=users[_0x355815(0x147)];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0xfc))var _0x1ca213=users[_0x355815(0xfc)];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0xed))var _0x1ca213=users[_0x355815(0xed)];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0x9b))var _0x1ca213=users[_0x355815(0x10b)];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0x14a))var _0x1ca213=users[_0x355815(0x14a)];else{if(_0x43c29f[0x0][_0x355815(0xa2)]==_0x355815(0x13d))var _0x1ca213=users[_0x355815(0xca)];}}}}}}}_0x37d11e[_0x355815(0xb4)]('categories',{'success':_0x384c43[_0x355815(0xb2)]('success'),'errors':_0x384c43['flash'](_0x355815(0x13a)),'role':_0x3f10f5,'profile':_0x5210ec,'user':_0x34a03b,'master_shop':_0x43c29f,'language':_0x1ca213});}catch(_0x28dfb6){console[_0x355815(0x11d)](_0x28dfb6);}}),router[a0_0x231013(0x10a)]('/categories',auth,async(_0x1e0712,_0x5d0f95)=>{const _0x1ad3f5=a0_0x231013;try{const {name:_0x302908,products:_0x535dbf}=_0x1e0712[_0x1ad3f5(0x129)],_0x1a849a=new categories({'name':_0x302908,'products':_0x535dbf}),_0x25fd45=await categories[_0x1ad3f5(0xd1)]({'name':_0x302908});_0x25fd45?_0x1e0712[_0x1ad3f5(0xb2)](_0x1ad3f5(0x13a),_0x302908+_0x1ad3f5(0x100)):_0x1e0712['flash'](_0x1ad3f5(0xc2),_0x302908+'\x20categories\x20is\x20add\x20successfully');const _0x2e4e8a=await _0x1a849a[_0x1ad3f5(0xfe)]();_0x5d0f95[_0x1ad3f5(0xe4)](_0x1ad3f5(0x115));}catch(_0x24541c){console[_0x1ad3f5(0x11d)](_0x24541c);}}),router[a0_0x231013(0xdc)](a0_0x231013(0x14b),auth,async(_0x1dab03,_0x3e7e1d)=>{const _0xf572f6=a0_0x231013;try{const {username:_0x56baf5,email:_0x45bc18,role:_0x442b90}=_0x1dab03[_0xf572f6(0x9c)],_0x473a7b=_0x1dab03[_0xf572f6(0x9c)],_0x390deb=await profile[_0xf572f6(0xd1)]({'email':_0x473a7b[_0xf572f6(0x13c)]}),_0x4967b5=await master_shop['find']();console['log'](_0xf572f6(0xbc),_0x4967b5);const _0x54b817=_0x1dab03[_0xf572f6(0x112)]['id'];console[_0xf572f6(0x11d)](_0x54b817);const _0x796ac=await categories['findById'](_0x54b817);if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0x144))var _0x203979=users['English'];else{if(_0x4967b5[0x0]['language']==_0xf572f6(0x123))var _0x203979=users['Hindi'];else{if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0x147))var _0x203979=users[_0xf572f6(0x147)];else{if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0xfc))var _0x203979=users['Spanish'];else{if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0xed))var _0x203979=users[_0xf572f6(0xed)];else{if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0x9b))var _0x203979=users['Portuguese'];else{if(_0x4967b5[0x0]['language']==_0xf572f6(0x14a))var _0x203979=users[_0xf572f6(0x14a)];else{if(_0x4967b5[0x0][_0xf572f6(0xa2)]==_0xf572f6(0x13d))var _0x203979=users[_0xf572f6(0xca)];}}}}}}}_0x3e7e1d['render'](_0xf572f6(0x141),{'success':_0x1dab03['flash'](_0xf572f6(0xc2)),'errors':_0x1dab03['flash'](_0xf572f6(0x13a)),'role':_0x473a7b,'profile':_0x390deb,'master_shop':_0x4967b5,'user':_0x796ac,'language':_0x203979});}catch(_0x1529da){console[_0xf572f6(0x11d)](_0x1529da);}}),router[a0_0x231013(0x10a)](a0_0x231013(0x14b),auth,async(_0x14004c,_0x4cf25c)=>{const _0x4bf7a3=a0_0x231013;try{const _0x6474e4=_0x14004c['params']['id'],_0x834ac6=await categories['findByIdAndUpdate'](_0x6474e4,_0x14004c[_0x4bf7a3(0x129)]);_0x14004c[_0x4bf7a3(0xb2)](_0x4bf7a3(0xc2),''+users[_0x4bf7a3(0xb6)]),_0x4cf25c['redirect'](_0x4bf7a3(0x115));}catch(_0x51938f){console['log'](_0x51938f);}}),router['get']('/categories/delete/:id',auth,async(_0x4dda03,_0x396957)=>{const _0x932a1d=a0_0x231013;try{const _0x3d157e=_0x4dda03['params']['id'],_0x39bd7a=await categories[_0x932a1d(0x8e)](_0x3d157e);_0x4dda03['flash'](_0x932a1d(0xc2),_0x932a1d(0x127)),_0x396957[_0x932a1d(0xe4)]('/products/categories');}catch(_0x4b2552){console['log'](_0x4b2552);}}),router['get'](a0_0x231013(0x128),auth,async(_0x2f5755,_0x363dbc)=>{const _0x383b42=a0_0x231013;try{const {username:_0x22a261,email:_0x5e5b5d,role:_0x9d977}=_0x2f5755[_0x383b42(0x9c)],_0x1f6677=_0x2f5755['user'],_0x5a91d9=await profile[_0x383b42(0xd1)]({'email':_0x1f6677[_0x383b42(0x13c)]}),_0x221aab=await master_shop[_0x383b42(0xd0)]();console[_0x383b42(0x11d)](_0x383b42(0xbc),_0x221aab);const _0x124a5a=await brands[_0x383b42(0xd0)]();if(_0x221aab[0x0][_0x383b42(0xa2)]=='English\x20(US)')var _0x477ba8=users[_0x383b42(0x142)];else{if(_0x221aab[0x0][_0x383b42(0xa2)]=='Hindi')var _0x477ba8=users[_0x383b42(0x123)];else{if(_0x221aab[0x0]['language']=='German')var _0x477ba8=users['German'];else{if(_0x221aab[0x0][_0x383b42(0xa2)]=='Spanish')var _0x477ba8=users['Spanish'];else{if(_0x221aab[0x0]['language']==_0x383b42(0xed))var _0x477ba8=users['French'];else{if(_0x221aab[0x0][_0x383b42(0xa2)]=='Portuguese\x20(BR)')var _0x477ba8=users[_0x383b42(0x10b)];else{if(_0x221aab[0x0][_0x383b42(0xa2)]==_0x383b42(0x14a))var _0x477ba8=users[_0x383b42(0x14a)];else{if(_0x221aab[0x0][_0x383b42(0xa2)]==_0x383b42(0x13d))var _0x477ba8=users[_0x383b42(0xca)];}}}}}}}_0x363dbc[_0x383b42(0xb4)](_0x383b42(0x95),{'success':_0x2f5755[_0x383b42(0xb2)](_0x383b42(0xc2)),'errors':_0x2f5755[_0x383b42(0xb2)](_0x383b42(0x13a)),'role':_0x1f6677,'profile':_0x5a91d9,'master_shop':_0x221aab,'user':_0x124a5a,'language':_0x477ba8});}catch(_0x5133b8){console[_0x383b42(0x11d)](_0x5133b8);}}),router['post'](a0_0x231013(0x128),auth,async(_0xaf4067,_0x4b9f43)=>{const _0xc4070e=a0_0x231013;try{const {name:_0x144e2e,products:_0x58d8c0}=_0xaf4067[_0xc4070e(0x129)],_0x579334=new brands({'name':_0x144e2e,'products':_0x58d8c0}),_0x5e4c21=await brands[_0xc4070e(0xd1)]({'name':_0x144e2e});_0x5e4c21?_0xaf4067[_0xc4070e(0xb2)](_0xc4070e(0x13a),_0x144e2e+_0xc4070e(0x12b)):_0xaf4067['flash']('success',_0x144e2e+'\x20brand\x20is\x20add\x20successfully');const _0x49f2cf=await _0x579334[_0xc4070e(0xfe)]();_0x4b9f43[_0xc4070e(0xe4)]('/products/brands');}catch(_0xdee3fd){console[_0xc4070e(0x11d)](_0xdee3fd);}}),router[a0_0x231013(0xdc)](a0_0x231013(0xb9),auth,async(_0x1c891f,_0x3261b0)=>{const _0x46094c=a0_0x231013;try{const {username:_0x118b13,email:_0x5e9b31,role:_0x401393}=_0x1c891f['user'],_0x399031=_0x1c891f['user'],_0x44a79b=await profile[_0x46094c(0xd1)]({'email':_0x399031[_0x46094c(0x13c)]}),_0x4ab316=await master_shop['find']();console[_0x46094c(0x11d)](_0x46094c(0xbc),_0x4ab316);const _0x1d7ca5=_0x1c891f['params']['id'];console['log'](_0x1d7ca5);const _0x2b37fb=await brands[_0x46094c(0x12e)](_0x1d7ca5);if(_0x4ab316[0x0]['language']==_0x46094c(0x144))var _0x877559=users[_0x46094c(0x142)];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]=='Hindi')var _0x877559=users[_0x46094c(0x123)];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]=='German')var _0x877559=users[_0x46094c(0x147)];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]==_0x46094c(0xfc))var _0x877559=users[_0x46094c(0xfc)];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]==_0x46094c(0xed))var _0x877559=users[_0x46094c(0xed)];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]==_0x46094c(0x9b))var _0x877559=users['Portuguese'];else{if(_0x4ab316[0x0]['language']=='Chinese')var _0x877559=users['Chinese'];else{if(_0x4ab316[0x0][_0x46094c(0xa2)]=='Arabic\x20(ae)')var _0x877559=users[_0x46094c(0xca)];}}}}}}}_0x3261b0['render'](_0x46094c(0x95),{'success':_0x1c891f[_0x46094c(0xb2)](_0x46094c(0xc2)),'errors':_0x1c891f[_0x46094c(0xb2)](_0x46094c(0x13a)),'role':_0x399031,'profile':_0x44a79b,'master_shop':_0x4ab316,'user':_0x2b37fb,'language':_0x877559});}catch(_0x11ece6){console[_0x46094c(0x11d)](_0x11ece6);}}),router[a0_0x231013(0x10a)]('/brands/:id',auth,async(_0x427f82,_0x7017ab)=>{const _0x478b91=a0_0x231013;try{const _0x5015b2=_0x427f82[_0x478b91(0x112)]['id'],_0x303837=await brands[_0x478b91(0xcb)](_0x5015b2,_0x427f82[_0x478b91(0x129)]);_0x427f82['flash']('success',_0x478b91(0xf9)),_0x7017ab[_0x478b91(0xe4)]('/products/brands');}catch(_0x439e1b){console[_0x478b91(0x11d)](_0x439e1b);}}),router[a0_0x231013(0xdc)](a0_0x231013(0x143),auth,async(_0x3caf27,_0x5955cc)=>{const _0x42f3fd=a0_0x231013;try{const _0x3f3ccb=_0x3caf27[_0x42f3fd(0x112)]['id'],_0x47cc66=await brands[_0x42f3fd(0x8e)](_0x3f3ccb);_0x3caf27['flash'](_0x42f3fd(0xc2),_0x42f3fd(0x130)),_0x5955cc['redirect'](_0x42f3fd(0xf4));}catch(_0x339dc0){console[_0x42f3fd(0x11d)](_0x339dc0);}}),router[a0_0x231013(0xdc)](a0_0x231013(0xd4),auth,async(_0x597aa1,_0x29b4a4)=>{const _0x5e5e25=a0_0x231013;try{const {username:_0x32737f,email:_0x55f86b,role:_0xc92324}=_0x597aa1[_0x5e5e25(0x9c)],_0x896bd4=_0x597aa1['user'],_0x11c26c=await profile[_0x5e5e25(0xd1)]({'email':_0x896bd4[_0x5e5e25(0x13c)]}),_0x320c36=await master_shop[_0x5e5e25(0xd0)]();console[_0x5e5e25(0x11d)](_0x5e5e25(0xbc),_0x320c36);const _0x57f87c=await units[_0x5e5e25(0xd0)]();if(_0x320c36[0x0][_0x5e5e25(0xa2)]==_0x5e5e25(0x144))var _0x4c8276=users['English'];else{if(_0x320c36[0x0]['language']=='Hindi')var _0x4c8276=users[_0x5e5e25(0x123)];else{if(_0x320c36[0x0][_0x5e5e25(0xa2)]==_0x5e5e25(0x147))var _0x4c8276=users[_0x5e5e25(0x147)];else{if(_0x320c36[0x0][_0x5e5e25(0xa2)]==_0x5e5e25(0xfc))var _0x4c8276=users[_0x5e5e25(0xfc)];else{if(_0x320c36[0x0][_0x5e5e25(0xa2)]==_0x5e5e25(0xed))var _0x4c8276=users[_0x5e5e25(0xed)];else{if(_0x320c36[0x0][_0x5e5e25(0xa2)]=='Portuguese\x20(BR)')var _0x4c8276=users[_0x5e5e25(0x10b)];else{if(_0x320c36[0x0]['language']==_0x5e5e25(0x14a))var _0x4c8276=users[_0x5e5e25(0x14a)];else{if(_0x320c36[0x0][_0x5e5e25(0xa2)]=='Arabic\x20(ae)')var _0x4c8276=users['Arabic'];}}}}}}}_0x29b4a4[_0x5e5e25(0xb4)](_0x5e5e25(0xdd),{'success':_0x597aa1[_0x5e5e25(0xb2)](_0x5e5e25(0xc2)),'errors':_0x597aa1['flash'](_0x5e5e25(0x13a)),'role':_0x896bd4,'profile':_0x11c26c,'master_shop':_0x320c36,'user':_0x57f87c,'language':_0x4c8276});}catch(_0x18912e){console[_0x5e5e25(0x11d)](_0x18912e);}}),router[a0_0x231013(0x10a)](a0_0x231013(0xd4),auth,async(_0x5d3859,_0x2764e4)=>{const _0x517525=a0_0x231013;try{const {name:_0x3fa30e,secondary_unit:_0x554763,products:_0x104c10}=_0x5d3859[_0x517525(0x129)],_0x3f6c74=new units({'name':_0x3fa30e,'secondary_unit':_0x554763,'products':_0x104c10}),_0x537e84=await units[_0x517525(0xd1)]({'name':_0x3fa30e});_0x537e84?_0x5d3859[_0x517525(0xb2)]('errors',_0x3fa30e+_0x517525(0xfd)):_0x5d3859[_0x517525(0xb2)](_0x517525(0xc2),_0x3fa30e+_0x517525(0x139));const _0x2a4cdc=await _0x3f6c74[_0x517525(0xfe)]();_0x2764e4[_0x517525(0xe4)](_0x517525(0xbd));}catch(_0xc6144d){console['log'](_0xc6144d);}}),router[a0_0x231013(0xdc)](a0_0x231013(0xbe),auth,async(_0x51fbd9,_0x416430)=>{const _0x44b3f5=a0_0x231013;try{const {username:_0x396abd,email:_0x5614b4,role:_0xd9c572}=_0x51fbd9['user'],_0x39d99e=_0x51fbd9[_0x44b3f5(0x9c)],_0x124db4=await profile[_0x44b3f5(0xd1)]({'email':_0x39d99e[_0x44b3f5(0x13c)]}),_0x2df62=await master_shop[_0x44b3f5(0xd0)]();console[_0x44b3f5(0x11d)](_0x44b3f5(0xbc),_0x2df62);const _0x589f12=_0x51fbd9[_0x44b3f5(0x112)]['id'],_0x2cd154=await units[_0x44b3f5(0x12e)](_0x589f12);if(_0x2df62[0x0]['language']==_0x44b3f5(0x144))var _0x1321a5=users['English'];else{if(_0x2df62[0x0][_0x44b3f5(0xa2)]=='Hindi')var _0x1321a5=users[_0x44b3f5(0x123)];else{if(_0x2df62[0x0][_0x44b3f5(0xa2)]==_0x44b3f5(0x147))var _0x1321a5=users[_0x44b3f5(0x147)];else{if(_0x2df62[0x0][_0x44b3f5(0xa2)]==_0x44b3f5(0xfc))var _0x1321a5=users['Spanish'];else{if(_0x2df62[0x0]['language']==_0x44b3f5(0xed))var _0x1321a5=users[_0x44b3f5(0xed)];else{if(_0x2df62[0x0]['language']=='Portuguese\x20(BR)')var _0x1321a5=users[_0x44b3f5(0x10b)];else{if(_0x2df62[0x0][_0x44b3f5(0xa2)]=='Chinese')var _0x1321a5=users[_0x44b3f5(0x14a)];else{if(_0x2df62[0x0][_0x44b3f5(0xa2)]=='Arabic\x20(ae)')var _0x1321a5=users['Arabic'];}}}}}}}_0x416430['render'](_0x44b3f5(0xdd),{'success':_0x51fbd9['flash'](_0x44b3f5(0xc2)),'errors':_0x51fbd9[_0x44b3f5(0xb2)](_0x44b3f5(0x13a)),'role':_0x39d99e,'profile':_0x124db4,'master_shop':_0x2df62,'user':_0x2cd154,'language':_0x1321a5});}catch(_0x522107){console[_0x44b3f5(0x11d)](_0x522107);}}),router[a0_0x231013(0x10a)](a0_0x231013(0xbe),auth,async(_0x58d77f,_0x275ea5)=>{const _0x1e93e5=a0_0x231013;try{const _0x4080d8=_0x58d77f['params']['id'],_0x14fc81=await units['findByIdAndUpdate'](_0x4080d8,_0x58d77f[_0x1e93e5(0x129)]);_0x58d77f[_0x1e93e5(0xb2)](_0x1e93e5(0xc2),'unit\x20data\x20update\x20successfully'),_0x275ea5[_0x1e93e5(0xe4)](_0x1e93e5(0xbd));}catch(_0x5af218){console['log'](_0x5af218);}}),router[a0_0x231013(0xdc)](a0_0x231013(0x108),auth,async(_0x249c33,_0x94e49f)=>{const _0x5ee10f=a0_0x231013;try{const _0x91108f=_0x249c33[_0x5ee10f(0x112)]['id'],_0xaa0e5b=await units['findByIdAndDelete'](_0x91108f);_0x249c33['flash']('success','unit\x20data\x20delete\x20successfully'),_0x94e49f['redirect'](_0x5ee10f(0xbd));}catch(_0x1c1271){console[_0x5ee10f(0x11d)](_0x1c1271);}});function a0_0x2e49(){const _0x26cba2=['753JjSsHO','products','French','alertquantity','6548130qnwxgn','map','$secondary_unit','category','max_number_per_units','/products/brands','7gjOwCO','PAlQty','PSecondaryUnits','product\x20update\x20successfully','brand\x20data\x20update\x20successfully','Products\x20warehouse_data','Alert_QTY','Spanish','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','save','_id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','diskStorage','forEach','Category','1773894zkjbjo','aggregate','data','Sheets','/units/delete/:id','product\x20edit','post','Portuguese','Prod_Cat','product_details.product_name','/print_barcode','send','name','$product_docs','params','PBrands','Brands','/products/categories','warehouse','Product_Name','Product_Code','product_barcode_products','canvas','$product_name','$category','log','SheetNames','pdfkit-table','push','defaultProduct.avif','addPage','Hindi','$product_details.product_stock','product_barcode','prod_categ','categories\x20data\x20delete\x20successfully','/brands','body','public/Migration/','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','status','toString','findById','product_stock','brand\x20data\x20delete\x20successfully','CODE128','readFile','file','concat','attachment;\x20filename=Product_Migration_File.xlsx','secondary_unit','/barcode_data','message','\x20unit\x20is\x20add\x20successfully','errors','hello','email','Arabic\x20(ae)','length','numeric','width','categories','English','/brands/delete/:id','English\x20(US)','toBuffer','brand','German','stock','xlsx','Chinese','/categories/:id','primary_code','MaxperUnits','$product_stock','../public/language/languages.json','findByIdAndDelete','/products_export_migrate_file','Raw\x20Materials','$brand','PName','\x20Edit\x20Successfully','barcode\x20user_id','brands','then','setHeader','secondary_code','filename','3759248LTVmFs','Portuguese\x20(BR)','user','maxProdPerUnit','edit_product','express','PUnits','$_id','language','/products/view','/print_barcode_filter/','json','now','/filter_product','height','11028kcOTOL','Products\x20master','/view','write','Units','Enabled','/select_data','Products_category','image','flash','Maximum_Stocks','render','\x20<>\x20','categories_edit','../models/all_models','/view/add_products','/brands/:id','Primary_Code','end','master','/products/units','/units/:id','Content-Disposition','base64','5VSrJyP','success','bind','product_docs','originalname','add_product','/print_barcode_filter_search/','maxStocks','Secondary_Units','Arabic','findByIdAndUpdate','single','sku','/products_import_migrate_file','ProductCode','find','findOne','unit','Router','/units','exports','1327224tVdTHX','Secondary_Code','columns','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','jsbarcode','$product_details.product_name','get','units','product_category','1127380WANrPV','categ','/categories','/print_barcode_single/:id','barcode\x20Product\x20master','redirect','358751CoLBgL','Finished\x20Goods','Products\x20find_data','product_code','Workbook','Content-Type'];a0_0x2e49=function(){return _0x26cba2;};return a0_0x2e49();}const storage=multer['diskStorage']({'destination':(_0x489edd,_0x99afc1,_0x5b6914)=>{_0x5b6914(null,'public/upload');},'filename':(_0x27e1e3,_0x2b748a,_0x3f7c98)=>{const _0x4dbd87=a0_0x231013;_0x3f7c98(null,Date[_0x4dbd87(0xa6)]()+_0x2b748a['originalname']);}}),upload=multer({'storage':storage});router[a0_0x231013(0xdc)](a0_0x231013(0xab),auth,async(_0x375c90,_0xee4804)=>{const _0x4f979b=a0_0x231013;try{const {username:_0x4ac57f,email:_0x17b04a,role:_0x52f302}=_0x375c90[_0x4f979b(0x9c)],_0x50248f=_0x375c90['user'],_0x27128e=await profile[_0x4f979b(0xd1)]({'email':_0x50248f[_0x4f979b(0x13c)]}),_0x40e1f1={'year':'numeric','month':'long','day':_0x4f979b(0x13f)},_0x21cebd=await master_shop[_0x4f979b(0xd0)]();console[_0x4f979b(0x11d)](_0x4f979b(0xaa),_0x21cebd);const _0xe7e26a=await product[_0x4f979b(0xd0)]();console[_0x4f979b(0x11d)](_0x4f979b(0xe7),_0xe7e26a);const _0x100054=await warehouse[_0x4f979b(0x105)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x4f979b(0xec),'localField':_0x4f979b(0x10d),'foreignField':_0x4f979b(0x110),'as':_0x4f979b(0xc4)}},{'$unwind':_0x4f979b(0x111)},{'$project':{'product_name':_0x4f979b(0xdb),'product_stock':_0x4f979b(0x124)}},{'$group':{'_id':_0x4f979b(0x11b),'product_stock':{'$sum':_0x4f979b(0x14e)}}}]);console[_0x4f979b(0x11d)](_0x4f979b(0xfa),_0x100054),_0x100054[_0x4f979b(0x102)](_0x438a7d=>{const _0x276d97=_0x4f979b,_0x51801a=_0xe7e26a[_0x276d97(0xf0)](_0x45aa2e=>{const _0x305561=_0x276d97;_0x45aa2e[_0x305561(0x110)]==_0x438a7d[_0x305561(0xff)]&&(_0x45aa2e[_0x305561(0x148)]=parseInt(_0x45aa2e[_0x305561(0x148)])+parseInt(_0x438a7d[_0x305561(0x12f)]));});}),console[_0x4f979b(0x11d)](_0x4f979b(0xe7),_0xe7e26a);if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0x144))var _0xede73=users[_0x4f979b(0x142)];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0x123))var _0xede73=users[_0x4f979b(0x123)];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0x147))var _0xede73=users[_0x4f979b(0x147)];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]=='Spanish')var _0xede73=users['Spanish'];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0xed))var _0xede73=users[_0x4f979b(0xed)];else{if(_0x21cebd[0x0]['language']==_0x4f979b(0x9b))var _0xede73=users['Portuguese'];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0x14a))var _0xede73=users[_0x4f979b(0x14a)];else{if(_0x21cebd[0x0][_0x4f979b(0xa2)]==_0x4f979b(0x13d))var _0xede73=users[_0x4f979b(0xca)];}}}}}}}_0xee4804[_0x4f979b(0xb4)]('products',{'success':_0x375c90[_0x4f979b(0xb2)]('success'),'errors':_0x375c90['flash'](_0x4f979b(0x13a)),'alldata':_0xe7e26a,'profile':_0x27128e,'master_shop':_0x21cebd,'role':_0x50248f,'product_stock':_0x100054,'language':_0xede73});}catch(_0x281ec2){console[_0x4f979b(0x11d)](_0x281ec2);}}),router['get']('/view/add_products',auth,async(_0xc7c37f,_0x215a4f)=>{const _0x49c14b=a0_0x231013;try{const {username:_0x3fdda6,email:_0x1b9214,role:_0x192609}=_0xc7c37f['user'],_0x49f6a4=_0xc7c37f[_0x49c14b(0x9c)],_0x8d9852=await profile[_0x49c14b(0xd1)]({'email':_0x49f6a4[_0x49c14b(0x13c)]}),_0x4f230c=await master_shop[_0x49c14b(0xd0)]();console[_0x49c14b(0x11d)](_0x49c14b(0xbc),_0x4f230c);const _0x564250=await categories['find']({}),_0x82f8c0=await brands[_0x49c14b(0xd0)]({}),_0x1426cb=await units[_0x49c14b(0xd0)]({}),_0x171945=await warehouse[_0x49c14b(0xd0)]({'status':_0x49c14b(0xae)});if(_0x4f230c[0x0][_0x49c14b(0xa2)]==_0x49c14b(0x144))var _0x52c758=users[_0x49c14b(0x142)];else{if(_0x4f230c[0x0]['language']==_0x49c14b(0x123))var _0x52c758=users[_0x49c14b(0x123)];else{if(_0x4f230c[0x0]['language']==_0x49c14b(0x147))var _0x52c758=users[_0x49c14b(0x147)];else{if(_0x4f230c[0x0]['language']==_0x49c14b(0xfc))var _0x52c758=users[_0x49c14b(0xfc)];else{if(_0x4f230c[0x0][_0x49c14b(0xa2)]==_0x49c14b(0xed))var _0x52c758=users[_0x49c14b(0xed)];else{if(_0x4f230c[0x0][_0x49c14b(0xa2)]==_0x49c14b(0x9b))var _0x52c758=users['Portuguese'];else{if(_0x4f230c[0x0][_0x49c14b(0xa2)]==_0x49c14b(0x14a))var _0x52c758=users[_0x49c14b(0x14a)];else{if(_0x4f230c[0x0][_0x49c14b(0xa2)]==_0x49c14b(0x13d))var _0x52c758=users[_0x49c14b(0xca)];}}}}}}}_0x215a4f['render'](_0x49c14b(0xc6),{'success':_0xc7c37f[_0x49c14b(0xb2)](_0x49c14b(0xc2)),'errors':_0xc7c37f[_0x49c14b(0xb2)]('errors'),'role':_0x49f6a4,'profile':_0x8d9852,'categories':_0x564250,'brands':_0x82f8c0,'master_shop':_0x4f230c,'units':_0x1426cb,'language':_0x52c758,'find_data':_0x171945});}catch(_0x209d64){console[_0x49c14b(0x11d)](_0x209d64);}}),router['post'](a0_0x231013(0xb8),auth,upload[a0_0x231013(0xcc)]('image'),async(_0x309e0a,_0x3cad6f)=>{const _0x453f61=a0_0x231013;try{const {name:_0x49a932,category:_0x338495,brand:_0x5c5c61,unit:_0x469b78,alertquantity:_0x4db8d9,stock:_0x434c85,product_code:_0x412645,warehouse:_0x61480c,primary_ItemCode:_0x2f16f8,second_ItemCode:_0xcc41de,second_unit:_0x4a16ca,maxPerUnit:_0x405097,MaxPerProduct:_0x24f4d4}=_0x309e0a['body'],_0x55a306=_0x309e0a[_0x453f61(0x133)]?.[_0x453f61(0x99)]||'defaultProduct.avif',_0xa63484=new product({'image':_0x55a306,'name':_0x49a932,'category':_0x338495,'brand':_0x5c5c61,'unit':_0x469b78,'alertquantity':_0x4db8d9,'stock':_0x434c85,'product_code':_0x412645,'warehouse':_0x61480c,'primary_code':_0x2f16f8,'secondary_code':_0xcc41de,'second_unit':_0x4a16ca,'maxStocks':_0x24f4d4,'maxProdPerUnit':_0x405097}),_0x3f487f=await _0xa63484[_0x453f61(0xfe)](),_0x116cf4=await categories[_0x453f61(0xd1)]({'name':_0x338495});_0x116cf4[_0x453f61(0xec)]=parseInt(_0x116cf4[_0x453f61(0xec)])+0x1,await _0x116cf4[_0x453f61(0xfe)]();const _0x3bfc8a=await brands[_0x453f61(0xd1)]({'name':_0x5c5c61});_0x3bfc8a[_0x453f61(0xec)]=parseInt(_0x3bfc8a[_0x453f61(0xec)])+0x1,await _0x3bfc8a[_0x453f61(0xfe)]();const _0x3ba3b1=await units[_0x453f61(0xd1)]({'name':_0x469b78});_0x3ba3b1[_0x453f61(0xec)]=parseInt(_0x3ba3b1[_0x453f61(0xec)])+0x1,await _0x3ba3b1['save'](),_0x309e0a[_0x453f61(0xb2)](_0x453f61(0xc2),'product\x20add\x20successfully'),_0x3cad6f[_0x453f61(0xe4)]('/products/view');}catch(_0x10fe72){console[_0x453f61(0x11d)](_0x10fe72);}}),router[a0_0x231013(0xdc)]('/view/:id',auth,async(_0x20106a,_0x4bb8af)=>{const _0x199136=a0_0x231013;try{const {username:_0x1f4d37,email:_0x2f0006,role:_0x2cc7e4}=_0x20106a[_0x199136(0x9c)],_0x111fd4=_0x20106a[_0x199136(0x9c)],_0x217c54=await profile[_0x199136(0xd1)]({'email':_0x111fd4['email']}),_0xd155c=await master_shop[_0x199136(0xd0)]();console[_0x199136(0x11d)]('edit\x20Product\x20master',_0xd155c);const _0x402ad2=_0x20106a[_0x199136(0x112)]['id'],_0x4b1b4e=await product[_0x199136(0x12e)](_0x402ad2),_0xcdaf6d=await categories[_0x199136(0xd0)]({}),_0x2f1c6a=await brands['find']({}),_0x59297b=await units[_0x199136(0xd0)]({}),_0x124301=await warehouse[_0x199136(0xd0)]({'status':_0x199136(0xae)}),_0x453d56=await units[_0x199136(0x105)]([{'$group':{'_id':_0x199136(0xa1),'secondaryunit':{'$first':_0x199136(0xf1)}}}]);if(_0xd155c[0x0]['language']==_0x199136(0x144))var _0x59eee4=users['English'];else{if(_0xd155c[0x0]['language']=='Hindi')var _0x59eee4=users['Hindi'];else{if(_0xd155c[0x0][_0x199136(0xa2)]=='German')var _0x59eee4=users[_0x199136(0x147)];else{if(_0xd155c[0x0][_0x199136(0xa2)]==_0x199136(0xfc))var _0x59eee4=users[_0x199136(0xfc)];else{if(_0xd155c[0x0][_0x199136(0xa2)]==_0x199136(0xed))var _0x59eee4=users['French'];else{if(_0xd155c[0x0][_0x199136(0xa2)]=='Portuguese\x20(BR)')var _0x59eee4=users[_0x199136(0x10b)];else{if(_0xd155c[0x0][_0x199136(0xa2)]==_0x199136(0x14a))var _0x59eee4=users[_0x199136(0x14a)];else{if(_0xd155c[0x0][_0x199136(0xa2)]=='Arabic\x20(ae)')var _0x59eee4=users['Arabic'];}}}}}}}_0x4bb8af['render'](_0x199136(0x9e),{'success':_0x20106a[_0x199136(0xb2)](_0x199136(0xc2)),'errors':_0x20106a['flash'](_0x199136(0x13a)),'role':_0x111fd4,'profile':_0x217c54,'alldata':_0x4b1b4e,'categories':_0xcdaf6d,'brands':_0x2f1c6a,'master_shop':_0xd155c,'units':_0x59297b,'secondunit':_0x453d56,'find_data':_0x124301,'language':_0x59eee4});}catch(_0x41103d){console[_0x199136(0x11d)](_0x41103d);}}),router[a0_0x231013(0x10a)]('/view/:id',auth,upload[a0_0x231013(0xcc)](a0_0x231013(0xb1)),async(_0xe22a2c,_0x3b7da2)=>{const _0x405a98=a0_0x231013;try{console[_0x405a98(0x11d)](_0x405a98(0x13b));const _0x1ac2c8=_0xe22a2c[_0x405a98(0x112)]['id'],_0x342924=await product['findById'](_0x1ac2c8),{image:_0x16a623,name:_0x49d70f,category:_0x57bf8f,brand:_0x5d5da3,sku:_0x12b8f2,unit:_0x1443b8,alertquantity:_0x2618a7,product_code:_0x132d94,warehouse:_0x5e267d,primary_ItemCode:_0x298d3d,second_ItemCode:_0x3f5334,second_unit:_0x57b096,maxPerUnit:_0x595976,MaxPerProduct:_0x4b0c90,prod_catdata:_0x488a18}=_0xe22a2c['body'];_0xe22a2c[_0x405a98(0x133)]&&(_0x342924['image']=_0xe22a2c[_0x405a98(0x133)][_0x405a98(0x99)]);_0x342924[_0x405a98(0x110)]=_0x49d70f,_0x342924[_0x405a98(0xf2)]=_0x57bf8f,_0x342924['brand']=_0x5d5da3,_0x342924[_0x405a98(0xcd)]=_0x12b8f2,_0x342924[_0x405a98(0xd2)]=_0x1443b8,_0x342924[_0x405a98(0xee)]=_0x2618a7,_0x342924[_0x405a98(0xe8)]=_0x132d94,_0x342924[_0x405a98(0x116)]=_0x5e267d,_0x342924[_0x405a98(0x14c)]=_0x298d3d,_0x342924[_0x405a98(0x98)]=_0x3f5334,_0x342924[_0x405a98(0x136)]=_0x57b096,_0x342924[_0x405a98(0xc8)]=_0x4b0c90,_0x342924['maxProdPerUnit']=_0x595976,_0x342924[_0x405a98(0xde)]=_0x488a18;const _0x737ca=await _0x342924[_0x405a98(0xfe)]();console['log'](_0x405a98(0x109),_0x342924),_0xe22a2c[_0x405a98(0xb2)](_0x405a98(0xc2),_0x405a98(0xf8)),_0x3b7da2[_0x405a98(0xe4)](_0x405a98(0xa3));}catch(_0x1ae49d){console[_0x405a98(0x11d)](_0x1ae49d);}}),router[a0_0x231013(0xdc)]('/barcode/:id',auth,async(_0x4f80a2,_0x294f17)=>{const _0x1e9363=a0_0x231013;try{const {username:_0x489b66,email:_0xed5a02,role:_0x2c656e}=_0x4f80a2[_0x1e9363(0x9c)],_0x5465f5=_0x4f80a2[_0x1e9363(0x9c)],_0x1bfc30=await profile[_0x1e9363(0xd1)]({'email':_0x5465f5[_0x1e9363(0x13c)]}),_0x4e2db5=await master_shop['find']();console[_0x1e9363(0x11d)](_0x1e9363(0xe3),_0x4e2db5);const _0x50ccd5=_0x4f80a2['params']['id'],_0x39b1d4=await product[_0x1e9363(0x12e)](_0x50ccd5);console[_0x1e9363(0x11d)](_0x1e9363(0x94),_0x39b1d4);if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0x144))var _0x3a6895=users[_0x1e9363(0x142)];else{if(_0x4e2db5[0x0]['language']==_0x1e9363(0x123))var _0x3a6895=users[_0x1e9363(0x123)];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0x147))var _0x3a6895=users[_0x1e9363(0x147)];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0xfc))var _0x3a6895=users[_0x1e9363(0xfc)];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0xed))var _0x3a6895=users['French'];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]=='Portuguese\x20(BR)')var _0x3a6895=users[_0x1e9363(0x10b)];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0x14a))var _0x3a6895=users[_0x1e9363(0x14a)];else{if(_0x4e2db5[0x0][_0x1e9363(0xa2)]==_0x1e9363(0x13d))var _0x3a6895=users[_0x1e9363(0xca)];}}}}}}}_0x294f17['render'](_0x1e9363(0x125),{'success':_0x4f80a2[_0x1e9363(0xb2)](_0x1e9363(0xc2)),'errors':_0x4f80a2[_0x1e9363(0xb2)]('errors'),'role':_0x5465f5,'profile':_0x1bfc30,'alldata':_0x39b1d4,'master_shop':_0x4e2db5,'language':_0x3a6895});}catch(_0x4744fb){console['log'](_0x4744fb);}}),router[a0_0x231013(0xdc)](a0_0x231013(0x8f),auth,async(_0x58c7d0,_0x3d2f30)=>{const _0x3260c3=a0_0x231013;try{const _0xe44b18=new excelJS[(_0x3260c3(0xe9))](),_0x52ac0c=_0xe44b18['addWorksheet']('Products');return _0x52ac0c[_0x3260c3(0xd8)]=[{'header':_0x3260c3(0x117),'key':_0x3260c3(0x92),'width':0xa},{'header':_0x3260c3(0x114),'key':_0x3260c3(0x113),'width':0xa},{'header':_0x3260c3(0xad),'key':_0x3260c3(0xa0),'width':0xa},{'header':'Secondary_Units','key':_0x3260c3(0xf7),'width':0xa},{'header':_0x3260c3(0xf3),'key':_0x3260c3(0x14d),'width':0xa},{'header':'Primary_Code','key':'ProductCode','width':0xa},{'header':_0x3260c3(0xd7),'key':'ProductCode','width':0xa},{'header':_0x3260c3(0x118),'key':_0x3260c3(0xcf),'width':0xa},{'header':_0x3260c3(0x103),'key':'PCat','width':0xa},{'header':_0x3260c3(0xfb),'key':_0x3260c3(0xf6),'width':0xa},{'header':_0x3260c3(0xb3),'key':_0x3260c3(0xf6),'width':0xa},{'header':_0x3260c3(0xb0),'key':_0x3260c3(0x10c),'width':0xa}],_0x3d2f30['setHeader'](_0x3260c3(0xea),_0x3260c3(0xd9)),_0x3d2f30[_0x3260c3(0x97)](_0x3260c3(0xbf),_0x3260c3(0x135)),_0xe44b18[_0x3260c3(0x149)][_0x3260c3(0xac)](_0x3d2f30)[_0x3260c3(0x96)](()=>{_0x3d2f30['status'](0xc8);});}catch(_0x3b8b31){_0x3d2f30[_0x3260c3(0x12c)](0x190)[_0x3260c3(0x10f)](_0x3b8b31);}});const storage1=multer[a0_0x231013(0x101)]({'destination':(_0x5a6d6b,_0x2f1b58,_0x2b487b)=>{_0x2b487b(null,'public/Migration');},'filename':(_0x1e7427,_0x5c338a,_0xbae2d5)=>{const _0x1d7822=a0_0x231013;_0xbae2d5(null,Date[_0x1d7822(0xa6)]()+_0x5c338a[_0x1d7822(0xc5)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x231013(0x10a)](a0_0x231013(0xce),auth,uploadMigrate[a0_0x231013(0xcc)]('migrate_product_fule'),async(_0x59e88d,_0x220ed1)=>{const _0x24ff7a=a0_0x231013,_0xd50c69=_0x59e88d[_0x24ff7a(0x133)][_0x24ff7a(0x99)],_0xf5599a=await xlsx[_0x24ff7a(0x132)](_0x24ff7a(0x12a)+_0xd50c69);let _0x542fb6=_0xf5599a[_0x24ff7a(0x11e)],_0x187bbb=xlsx['utils']['sheet_to_json'](_0xf5599a[_0x24ff7a(0x107)][_0x542fb6[0x0]]);for(const _0x404387 of _0x187bbb){const _0x445d36=_0x404387[_0x24ff7a(0x117)],_0x49a1c6=_0x404387[_0x24ff7a(0x114)],_0x2a7aa7=_0x404387['Units'],_0xed820=_0x404387[_0x24ff7a(0xc9)],_0x3c855c=_0x404387[_0x24ff7a(0x118)],_0x3e6d07=_0x404387['Category'],_0x4c1b6f=_0x404387[_0x24ff7a(0xfb)],_0x556d60=_0x404387[_0x24ff7a(0xba)],_0x125b61=_0x404387['Secondary_Code'],_0x36ae14=_0x404387[_0x24ff7a(0xb3)],_0x4817b4=_0x404387['max_number_per_units'],_0x49e7b3=_0x404387[_0x24ff7a(0xb0)];try{let _0x53e4db=await categories['findOne']({'name':_0x3e6d07});if(!_0x53e4db){const _0xa65ea8=new categories({'name':_0x3e6d07,'products':'0'});_0x53e4db=await _0xa65ea8[_0x24ff7a(0xfe)]();}let _0x42850f=await brands[_0x24ff7a(0xd1)]({'name':_0x49a1c6});if(!_0x42850f){const _0x40dd66=new brands({'name':_0x49a1c6,'products':'0'});_0x42850f=await _0x40dd66[_0x24ff7a(0xfe)]();}let _0x53df1c=await units[_0x24ff7a(0xd1)]({'name':_0x2a7aa7,'secondary_unit':_0xed820});if(!_0x53df1c){const _0x4072f8=new units({'name':_0x2a7aa7,'secondary_unit':_0xed820,'products':'0'});_0x53df1c=await _0x4072f8['save']();}const _0x428218=await product[_0x24ff7a(0xd0)]({'name':_0x445d36,'category':_0x53e4db[_0x24ff7a(0x110)],'brand':_0x42850f[_0x24ff7a(0x110)],'secondary_unit':_0x53df1c['secondary_unit'],'product_code':_0x3c855c});console['log'](_0x428218[_0x24ff7a(0x13e)]+'\x20<>\x20'+_0x53e4db[_0x24ff7a(0x110)]+_0x24ff7a(0xb5)+_0x42850f[_0x24ff7a(0x110)]+_0x24ff7a(0xb5)+_0x53df1c[_0x24ff7a(0x136)]+_0x24ff7a(0xb5)+_0x3c855c+_0x24ff7a(0xb5)+_0x445d36);if(_0x428218[_0x24ff7a(0x13e)]===0x0){const _0x25627a=new product({'image':_0x24ff7a(0x121),'name':_0x445d36,'category':_0x53e4db[_0x24ff7a(0x110)],'brand':_0x42850f['name'],'unit':_0x53df1c[_0x24ff7a(0x110)],'alertquantity':_0x4c1b6f,'product_code':_0x3c855c,'secondary_unit':_0x53df1c[_0x24ff7a(0x136)],'primary_code':_0x556d60,'secondary_code':_0x125b61,'maxStocks':_0x36ae14,'maxProdPerUnit':_0x4817b4,'product_category':_0x49e7b3}),_0x5bd58f=await _0x25627a[_0x24ff7a(0xfe)]();_0x53e4db['products']=parseInt(_0x53e4db[_0x24ff7a(0xec)])+0x1,await _0x53e4db[_0x24ff7a(0xfe)](),_0x42850f[_0x24ff7a(0xec)]=parseInt(_0x42850f['products'])+0x1,await _0x42850f[_0x24ff7a(0xfe)](),_0x53df1c[_0x24ff7a(0xec)]=parseInt(_0x53df1c[_0x24ff7a(0xec)])+0x1,await _0x53df1c['save'](),_0x59e88d[_0x24ff7a(0xb2)](_0x24ff7a(0xc2),_0x445d36+'\x20added\x20successfully');}else{console[_0x24ff7a(0x11d)](_0x428218[0x0]);const _0x1d0909=_0x428218[0x0];_0x1d0909[_0x24ff7a(0xf2)]=_0x53e4db['name'],_0x1d0909[_0x24ff7a(0x146)]=_0x42850f[_0x24ff7a(0x110)],_0x1d0909[_0x24ff7a(0xd2)]=_0x53df1c['name'],_0x1d0909[_0x24ff7a(0xee)]=_0x4c1b6f,_0x1d0909['product_code']=_0x3c855c,_0x1d0909[_0x24ff7a(0x136)]=_0x53df1c[_0x24ff7a(0x136)],_0x1d0909['primary_code']=_0x556d60,_0x1d0909[_0x24ff7a(0x98)]=_0x125b61,_0x1d0909[_0x24ff7a(0xc8)]=_0x36ae14,_0x1d0909[_0x24ff7a(0x9d)]=_0x4817b4,_0x1d0909[_0x24ff7a(0xde)]=_0x49e7b3;const _0x447fd5=await _0x1d0909[_0x24ff7a(0xfe)]();_0x59e88d['flash'](_0x24ff7a(0xc2),_0x447fd5['name']+_0x24ff7a(0x93));}}catch(_0x4291d7){_0x220ed1['status'](0x1f4)[_0x24ff7a(0xa5)]({'proderror':_0x4291d7[_0x24ff7a(0x138)],'aproduct':_0x445d36});}}_0x220ed1[_0x24ff7a(0xe4)](_0x24ff7a(0xa3));}),router[a0_0x231013(0x10a)](a0_0x231013(0xaf),auth,async(_0x127b7e,_0x21654e)=>{const _0x1d5e3f=a0_0x231013;try{console['log'](_0x127b7e[_0x1d5e3f(0x129)]);const {data_cateory:_0x5d0824,datachoose:_0x47e692}=_0x127b7e[_0x1d5e3f(0x129)];var _0x5d8fbf;if(_0x47e692==_0x1d5e3f(0x126))_0x5d8fbf=await product[_0x1d5e3f(0x105)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x47e692=='brands')_0x5d8fbf=await product[_0x1d5e3f(0x105)]([{'$match':{'product_category':_0x5d0824}},{'$group':{'_id':_0x1d5e3f(0x91)}}]);else _0x47e692==_0x1d5e3f(0xe0)&&(_0x5d8fbf=await product[_0x1d5e3f(0x105)]([{'$match':{'product_category':_0x5d0824}},{'$group':{'_id':_0x1d5e3f(0x11c)}}]));}_0x21654e[_0x1d5e3f(0xa5)](_0x5d8fbf);}catch(_0x265475){_0x21654e[_0x1d5e3f(0xa5)]({'message':_0x265475['message']});}}),router[a0_0x231013(0x10a)](a0_0x231013(0xa7),auth,async(_0x576ff7,_0x4edbe7)=>{const _0xac8999=a0_0x231013;try{const {data_choosing:_0x1be336,data_selected:_0x51cb7e}=_0x576ff7[_0xac8999(0x129)];var _0x26c4de;if(_0x1be336=='prod_categ')_0x26c4de=await product[_0xac8999(0x105)]([{'$match':{'product_category':_0x51cb7e}}]);else{if(_0x1be336==_0xac8999(0x95))_0x26c4de=await product['aggregate']([{'$match':{'brand':_0x51cb7e}}]);else _0x1be336=='categ'&&(_0x26c4de=await product['aggregate']([{'$match':{'category':_0x51cb7e}}]));}_0x4edbe7[_0xac8999(0xa5)](_0x26c4de);}catch(_0x307b0b){_0x4edbe7['json']({'message':_0x307b0b[_0xac8999(0x138)]});}}),router['get'](a0_0x231013(0x10e),auth,async(_0x50aa14,_0x10bc4f)=>{const _0x2bddb4=a0_0x231013,_0x4de7d2=_0x50aa14[_0x2bddb4(0x9c)],_0x3fb2d5=await profile[_0x2bddb4(0xd1)]({'email':_0x4de7d2[_0x2bddb4(0x13c)]}),_0x5d120e=await master_shop[_0x2bddb4(0xd0)](),_0x8b2fc7=await product['find']();if(_0x5d120e[0x0][_0x2bddb4(0xa2)]==_0x2bddb4(0x144))var _0x2d30fa=users[_0x2bddb4(0x142)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]==_0x2bddb4(0x123))var _0x2d30fa=users[_0x2bddb4(0x123)];else{if(_0x5d120e[0x0]['language']==_0x2bddb4(0x147))var _0x2d30fa=users[_0x2bddb4(0x147)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]==_0x2bddb4(0xfc))var _0x2d30fa=users[_0x2bddb4(0xfc)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]=='French')var _0x2d30fa=users[_0x2bddb4(0xed)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]=='Portuguese\x20(BR)')var _0x2d30fa=users[_0x2bddb4(0x10b)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]==_0x2bddb4(0x14a))var _0x2d30fa=users[_0x2bddb4(0x14a)];else{if(_0x5d120e[0x0][_0x2bddb4(0xa2)]==_0x2bddb4(0x13d))var _0x2d30fa=users[_0x2bddb4(0xca)];}}}}}}}_0x10bc4f[_0x2bddb4(0xb4)](_0x2bddb4(0x119),{'success':_0x50aa14[_0x2bddb4(0xb2)](_0x2bddb4(0xc2)),'errors':_0x50aa14[_0x2bddb4(0xb2)]('errors'),'role':_0x4de7d2,'profile':_0x3fb2d5,'products':_0x8b2fc7,'master_shop':_0x5d120e,'language':_0x2d30fa});}),router['post'](a0_0x231013(0x137),auth,async(_0x2f6c5d,_0x3cc588)=>{const _0x10e458=await product['find']();_0x3cc588['json']({'data':_0x10e458});}),router[a0_0x231013(0x10a)]('/barcode_filter',auth,async(_0x119b4b,_0x30946a)=>{const _0x17eb8=a0_0x231013;try{const {dataProdCat:_0x4a1570,dataProdIdentity:_0xa9d0e}=_0x119b4b['body'];var _0x59b384;switch(_0x4a1570){case'fg':switch(_0xa9d0e){case _0x17eb8(0x114):_0x59b384=await product[_0x17eb8(0x105)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x17eb8(0x91)}},{'$project':{'brand':_0x17eb8(0xa1)}}]);break;case'Category':_0x59b384=await product[_0x17eb8(0x105)]([{'$match':{'product_category':_0x17eb8(0xe6)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x17eb8(0xa1)}}]);break;}break;case'rm':switch(_0xa9d0e){case _0x17eb8(0x114):_0x59b384=await product[_0x17eb8(0x105)]([{'$match':{'product_category':_0x17eb8(0x90)}},{'$group':{'_id':_0x17eb8(0x91)}},{'$project':{'brand':'$_id'}}]);break;case _0x17eb8(0x103):_0x59b384=await product[_0x17eb8(0x105)]([{'$match':{'product_category':_0x17eb8(0x90)}},{'$group':{'_id':_0x17eb8(0x11c)}},{'$project':{'category':_0x17eb8(0xa1)}}]);break;}break;}_0x30946a['json'](_0x59b384);}catch(_0x317764){_0x30946a[_0x17eb8(0xa5)]({'message':_0x317764[_0x17eb8(0x138)]});}}),router[a0_0x231013(0x10a)](a0_0x231013(0xa4),auth,async(_0x7868a2,_0x3b1939)=>{const _0x47c714=a0_0x231013;try{console['log'](_0x7868a2[_0x47c714(0x129)]);const {prod_cat:_0x4d1d31,identity:_0x7eb4c8,valueData:_0x5318ba,typeofbarcode:_0x3d70ff}=_0x7868a2[_0x47c714(0x129)];let _0x3d6616;switch(_0x4d1d31){case'fg':if(_0x7eb4c8=='Brands')_0x3d6616=await product[_0x47c714(0x105)]([{'$match':{'product_category':_0x47c714(0xe6),'brand':_0x5318ba}}]);else _0x7eb4c8==_0x47c714(0x103)&&(_0x3d6616=await product['aggregate']([{'$match':{'product_category':_0x47c714(0xe6),'category':_0x5318ba}}]));break;case'rm':if(_0x7eb4c8=='Brands')_0x3d6616=await product[_0x47c714(0x105)]([{'$match':{'product_category':_0x47c714(0x90),'brand':_0x5318ba}}]);else _0x7eb4c8==_0x47c714(0x103)&&(_0x3d6616=await product[_0x47c714(0x105)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x5318ba}}]));break;}const _0x3ef73f=_0x2741d5=>_0x2741d5*0x48,_0x940fb8={'width':0x3,'height':0x1},_0x381924=new PDFDocument({'margin':_0x3ef73f(0.75),'size':[_0x3ef73f(_0x940fb8[_0x47c714(0x140)]),_0x3ef73f(_0x940fb8[_0x47c714(0xa8)])],'bufferPages':!![]}),_0x14c0d4=_0x3d6616[_0x47c714(0x13e)];for(let _0x3eb8a3=0x0;_0x3eb8a3<=_0x14c0d4;_0x3eb8a3++){if(_0x3eb8a3!=_0x14c0d4){const _0x33c4c6=_0x3d6616[_0x3eb8a3][_0x47c714(0x110)],_0x2c5a8c=_0x3d6616[_0x3eb8a3][_0x47c714(0x14c)],_0x2114ce=_0x3d6616[_0x3eb8a3][_0x47c714(0x98)],_0x5f1a37=_0x3d6616[_0x3eb8a3][_0x47c714(0xe8)];var _0x290311;switch(_0x3d70ff){case'1':_0x290311=_0x2c5a8c;break;case'2':_0x290311=_0x2114ce;break;case'3':_0x290311=_0x5f1a37;break;}const _0x1f812a={'width':0xd2,'height':0x64},_0x471436={'width':_0x3ef73f(_0x940fb8['width']),'height':_0x3ef73f(_0x940fb8[_0x47c714(0xa8)])},_0x3ed37b=new Canvas();JsBarcode(_0x3ed37b,_0x290311,{'format':_0x47c714(0x131),'height':_0x1f812a[_0x47c714(0xa8)],'displayValue':!![],'text':_0x290311});const _0x3a0469=_0x3ed37b[_0x47c714(0x145)](),_0x59dcb8=_0x471436[_0x47c714(0x140)]/_0x1f812a['width'],_0x584887=_0x471436[_0x47c714(0xa8)]/_0x1f812a[_0x47c714(0xa8)],_0x34cd28=Math['min'](_0x59dcb8,_0x584887),_0x4587f8=_0x1f812a['width']*_0x34cd28,_0x31e810=_0x1f812a['height']*_0x34cd28,_0x583b29=(_0x471436['width']-_0x4587f8)/0x2,_0x43b2f7=(_0x471436[_0x47c714(0xa8)]-_0x31e810)/0x2;_0x381924[_0x47c714(0xb1)](_0x3a0469,_0x583b29,_0x43b2f7,{'width':_0x4587f8,'height':_0x31e810}),_0x3eb8a3!=_0x14c0d4&&_0x381924[_0x47c714(0x122)]();}}const _0x269d3d=[];_0x381924['on'](_0x47c714(0x106),_0x269d3d[_0x47c714(0x120)]['bind'](_0x269d3d)),_0x381924['on'](_0x47c714(0xbb),()=>{const _0x554fed=_0x47c714,_0x8a44b9=Buffer[_0x554fed(0x134)](_0x269d3d),_0xddb24c=_0x8a44b9[_0x554fed(0x12d)](_0x554fed(0xc0));_0x3b1939['json']({'pdfContent':_0xddb24c});}),_0x381924[_0x47c714(0xbb)]();}catch(_0x2f7369){_0x3b1939[_0x47c714(0xa5)]({'message':_0x2f7369['message']});}}),router[a0_0x231013(0x10a)](a0_0x231013(0xc7),auth,async(_0x20629e,_0x222f96)=>{const _0x43c501=a0_0x231013;try{console['log'](_0x20629e['body']);const {prod_cat:_0xa00ef3,identity:_0x926388,valueData:_0xdc9421}=_0x20629e[_0x43c501(0x129)];let _0x11e3b6;switch(_0xa00ef3){case'fg':if(_0x926388==_0x43c501(0x114))_0x11e3b6=await product['aggregate']([{'$match':{'product_category':_0x43c501(0xe6),'brand':_0xdc9421}}]);else _0x926388=='Category'&&(_0x11e3b6=await product[_0x43c501(0x105)]([{'$match':{'product_category':_0x43c501(0xe6),'category':_0xdc9421}}]));break;case'rm':if(_0x926388==_0x43c501(0x114))_0x11e3b6=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0xdc9421}}]);else _0x926388==_0x43c501(0x103)&&(_0x11e3b6=await product[_0x43c501(0x105)]([{'$match':{'product_category':_0x43c501(0x90),'category':_0xdc9421}}]));break;}_0x222f96[_0x43c501(0xa5)]({'data':_0x11e3b6});}catch(_0x1cdb3f){_0x222f96['json']({'message':_0x1cdb3f[_0x43c501(0x138)]});}}),router[a0_0x231013(0x10a)](a0_0x231013(0xe2),auth,async(_0x3511f8,_0xa42eb4)=>{const _0x4fae1e=a0_0x231013;try{const _0x3790bd=_0x3511f8['params']['id'],{copies:_0x3513f8,typeofbarcode:_0x1de320}=_0x3511f8['body'];var _0x49d5f7=await product[_0x4fae1e(0x12e)](_0x3790bd);const _0x4520f3=_0x4de425=>_0x4de425*0x48,_0x4c90ec={'width':0x3,'height':0x1},_0x588a2a=new PDFDocument({'margin':_0x4520f3(0.75),'size':[_0x4520f3(_0x4c90ec[_0x4fae1e(0x140)]),_0x4520f3(_0x4c90ec['height'])],'bufferPages':!![]}),_0x570368=_0x3513f8,_0xbfe3f3=_0x49d5f7[_0x4fae1e(0x110)],_0x4f1866=_0x49d5f7[_0x4fae1e(0x14c)],_0x442b86=_0x49d5f7[_0x4fae1e(0x98)],_0xc28bbc=_0x49d5f7['product_code'];let _0x3385ee;switch(_0x1de320){case'1':_0x3385ee=_0x4f1866;break;case'2':_0x3385ee=_0x442b86;break;case'3':_0x3385ee=_0xc28bbc;break;}const _0x3e75e6={'width':0xd2,'height':0x64},_0x429b1b={'width':_0x4520f3(_0x4c90ec[_0x4fae1e(0x140)]),'height':_0x4520f3(_0x4c90ec[_0x4fae1e(0xa8)])};for(let _0x2a01a8=0x1;_0x2a01a8<=_0x570368;_0x2a01a8++){const _0x4bd777=new Canvas();JsBarcode(_0x4bd777,_0x3385ee,{'format':_0x4fae1e(0x131),'height':_0x3e75e6[_0x4fae1e(0xa8)],'displayValue':!![],'text':_0x3385ee});const _0x262fd2=_0x4bd777[_0x4fae1e(0x145)](),_0x502706=_0x429b1b[_0x4fae1e(0x140)]/_0x3e75e6[_0x4fae1e(0x140)],_0x271f70=_0x429b1b[_0x4fae1e(0xa8)]/_0x3e75e6['height'],_0xc86680=Math['min'](_0x502706,_0x271f70),_0x17c04c=_0x3e75e6[_0x4fae1e(0x140)]*_0xc86680,_0x1f2836=_0x3e75e6['height']*_0xc86680,_0x8b0e5b=(_0x429b1b[_0x4fae1e(0x140)]-_0x17c04c)/0x2,_0x2821a1=(_0x429b1b['height']-_0x1f2836)/0x2;_0x588a2a[_0x4fae1e(0xb1)](_0x262fd2,_0x8b0e5b,_0x2821a1,{'width':_0x17c04c,'height':_0x1f2836}),_0x2a01a8!=_0x570368&&_0x588a2a[_0x4fae1e(0x122)]();}const _0x4df803=[];_0x588a2a['on']('data',_0x4df803[_0x4fae1e(0x120)][_0x4fae1e(0xc3)](_0x4df803)),_0x588a2a['on'](_0x4fae1e(0xbb),()=>{const _0x334f0e=_0x4fae1e,_0x493112=Buffer['concat'](_0x4df803),_0x3856b6=_0x493112[_0x334f0e(0x12d)](_0x334f0e(0xc0));_0xa42eb4['json']({'pdfContent':_0x3856b6});}),_0x588a2a[_0x4fae1e(0xbb)]();}catch(_0x1b77a8){_0xa42eb4[_0x4fae1e(0xa5)]({'message':_0x1b77a8[_0x4fae1e(0x138)]});}}),module[a0_0x231013(0xd5)]=router;