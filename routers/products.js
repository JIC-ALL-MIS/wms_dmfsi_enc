const a0_0xfeb98=a0_0x97bb;function a0_0x97bb(_0x2015a7,_0x2db2aa){const _0xc15fcb=a0_0xc15f();return a0_0x97bb=function(_0x97bbdc,_0x24fcff){_0x97bbdc=_0x97bbdc-0x158;let _0x8d0fcd=_0xc15fcb[_0x97bbdc];return _0x8d0fcd;},a0_0x97bb(_0x2015a7,_0x2db2aa);}(function(_0x4f0726,_0x294d25){const _0x16a5fe=a0_0x97bb,_0x325755=_0x4f0726();while(!![]){try{const _0x2a590e=parseInt(_0x16a5fe(0x1da))/0x1+parseInt(_0x16a5fe(0x16f))/0x2+parseInt(_0x16a5fe(0x1c1))/0x3*(parseInt(_0x16a5fe(0x1aa))/0x4)+-parseInt(_0x16a5fe(0x1fa))/0x5*(-parseInt(_0x16a5fe(0x1d9))/0x6)+parseInt(_0x16a5fe(0x1a2))/0x7+-parseInt(_0x16a5fe(0x1e2))/0x8*(parseInt(_0x16a5fe(0x1cd))/0x9)+-parseInt(_0x16a5fe(0x158))/0xa;if(_0x2a590e===_0x294d25)break;else _0x325755['push'](_0x325755['shift']());}catch(_0x2f6565){_0x325755['push'](_0x325755['shift']());}}}(a0_0xc15f,0xb0b91));function a0_0xc15f(){const _0x23d43b=['xlsx','Content-Disposition','Alert_QTY','Content-Type','Products\x20master','_id','write','Chinese','exceljs','/print_barcode_filter_search/','ProductCode','filename','/units/:id','edit_product','Spanish','originalname','Portuguese\x20(BR)','\x20added\x20successfully','alertquantity','stock','Brands','categ','CODE128','master','file','aggregate','PBrands','/view','/select_data','width','image','data','brand','Finished\x20Goods','/brands/delete/:id','PCat','Products\x20find_data','Products','Arabic\x20(ae)','post','\x20brand\x20is\x20add\x20successfully','primary_code','edit\x20Product\x20master','355565UNpoEu','Products_category','$_id','product_barcode_products','defaultProduct.avif','categories','toBuffer','save','2840516JqwIOv','$brand','min','/brands','Raw\x20Materials','redirect','add_product','addPage','migrate_product_fule','public/Migration','category','message','/products_export_migrate_file','English','bind','unit','\x20<>\x20','length','../public/language/languages.json','success','$product_details.product_name','/barcode_data','PUnits','6yfECew','/categories/delete/:id','secondary_code','flash','canvas','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','base64','get','find','send','/products/categories','hello','18gMfSPq','Prod_Cat','Product_Code','language','PName','brands','Product_Name','product_docs','public/upload','log','product_category','express','6BIYIRd','411615NWuOCZ','render','French','sku','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','prod_categ','1582688sysibf','concat','body','/products/view','numeric','$category','/categories/:id','findByIdAndUpdate','../middleware/auth','status','$product_details','PAlQty','toString','/view/add_products','diskStorage','findByIdAndDelete','$secondary_unit','Portuguese','English\x20(US)','/print_barcode_single/:id','json','end','Category','barcode\x20Product\x20master','3630275pJjxDt','/units','Primary_Code','../models/all_models','express/lib/response','/filter_product','German','email','product_stock','warehouse','product\x20edit','jsbarcode','addWorksheet','attachment;\x20filename=Product_Migration_File.xlsx','findById','maxStocks','Enabled','Hindi','product\x20update\x20successfully','/view/:id','/barcode/:id','now','SheetNames','secondary_unit','findOne','name','PSecondaryUnits','maxProdPerUnit','Sheets','Units','height','/print_barcode_filter/','columns','21964560zewQpy','utils','Secondary_Units','pdfkit-table','/units/delete/:id','params','/categories','product_code','single','$product_name','/brands/:id','Arabic','user','errors','/products/units','units','brand\x20data\x20update\x20successfully','max_number_per_units','/products_import_migrate_file','push','Workbook','map','barcode\x20user_id','1414524dYkGwd','\x20categories\x20is\x20add\x20successfully','/products/brands','Router','Maximum_Stocks','long','products','product\x20add\x20successfully'];a0_0xc15f=function(){return _0x23d43b;};return a0_0xc15f();}const express=require(a0_0xfeb98(0x1d8)),res=require(a0_0xfeb98(0x1fe)),app=express(),router=express[a0_0xfeb98(0x172)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0xfeb98(0x1fd)),auth=require(a0_0xfeb98(0x1ea)),users=require(a0_0xfeb98(0x1bc)),excelJS=require(a0_0xfeb98(0x17f)),xlsx=require(a0_0xfeb98(0x177)),JsBarcode=require(a0_0xfeb98(0x205)),{Canvas}=require(a0_0xfeb98(0x1c5)),PDFDocument=require(a0_0xfeb98(0x15b));router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x15e),auth,async(_0x10f112,_0x170b61)=>{const _0x1d51bd=a0_0xfeb98;try{const {username:_0x17f9c5,email:_0x3f9928,role:_0xa2f1e8}=_0x10f112[_0x1d51bd(0x164)],_0x636c5d=_0x10f112['user'],_0xff835b=await profile[_0x1d51bd(0x212)]({'email':_0x636c5d[_0x1d51bd(0x201)]}),_0x980ec5=await master_shop['find']();console[_0x1d51bd(0x1d6)](_0x1d51bd(0x18e),_0x980ec5);const _0x52780d=await categories[_0x1d51bd(0x1c9)]();if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x1f4))var _0x11a880=users['English'];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x20b))var _0x11a880=users['Hindi'];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x200))var _0x11a880=users[_0x1d51bd(0x200)];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x185))var _0x11a880=users[_0x1d51bd(0x185)];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]=='French')var _0x11a880=users[_0x1d51bd(0x1dc)];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x187))var _0x11a880=users[_0x1d51bd(0x1f3)];else{if(_0x980ec5[0x0][_0x1d51bd(0x1d0)]==_0x1d51bd(0x17e))var _0x11a880=users['Chinese'];else{if(_0x980ec5[0x0]['language']==_0x1d51bd(0x19d))var _0x11a880=users['Arabic'];}}}}}}}_0x170b61[_0x1d51bd(0x1db)](_0x1d51bd(0x1a7),{'success':_0x10f112['flash'](_0x1d51bd(0x1bd)),'errors':_0x10f112[_0x1d51bd(0x1c4)](_0x1d51bd(0x165)),'role':_0x636c5d,'profile':_0xff835b,'user':_0x52780d,'master_shop':_0x980ec5,'language':_0x11a880});}catch(_0x28933a){console[_0x1d51bd(0x1d6)](_0x28933a);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x15e),auth,async(_0x1c3f06,_0x137b7d)=>{const _0x8a540e=a0_0xfeb98;try{const {name:_0x16b05a,products:_0x523da0}=_0x1c3f06['body'],_0x1fb6ba=new categories({'name':_0x16b05a,'products':_0x523da0}),_0x130e0f=await categories[_0x8a540e(0x212)]({'name':_0x16b05a});_0x130e0f?_0x1c3f06['flash'](_0x8a540e(0x165),_0x16b05a+_0x8a540e(0x1de)):_0x1c3f06[_0x8a540e(0x1c4)]('success',_0x16b05a+_0x8a540e(0x170));const _0x2d903f=await _0x1fb6ba['save']();_0x137b7d['redirect']('/products/categories');}catch(_0x389d7f){console['log'](_0x389d7f);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1e8),auth,async(_0x3e1b46,_0x27a331)=>{const _0x4da446=a0_0xfeb98;try{const {username:_0x28c6fc,email:_0x52474a,role:_0x10a04f}=_0x3e1b46['user'],_0x59cfb4=_0x3e1b46['user'],_0xb9b39c=await profile['findOne']({'email':_0x59cfb4[_0x4da446(0x201)]}),_0x4c2baa=await master_shop['find']();console[_0x4da446(0x1d6)](_0x4da446(0x18e),_0x4c2baa);const _0x2c46c0=_0x3e1b46[_0x4da446(0x15d)]['id'];console[_0x4da446(0x1d6)](_0x2c46c0);const _0x4392bb=await categories[_0x4da446(0x208)](_0x2c46c0);if(_0x4c2baa[0x0]['language']=='English\x20(US)')var _0x1c4ff4=users[_0x4da446(0x1b7)];else{if(_0x4c2baa[0x0]['language']=='Hindi')var _0x1c4ff4=users[_0x4da446(0x20b)];else{if(_0x4c2baa[0x0][_0x4da446(0x1d0)]==_0x4da446(0x200))var _0x1c4ff4=users[_0x4da446(0x200)];else{if(_0x4c2baa[0x0][_0x4da446(0x1d0)]==_0x4da446(0x185))var _0x1c4ff4=users[_0x4da446(0x185)];else{if(_0x4c2baa[0x0]['language']==_0x4da446(0x1dc))var _0x1c4ff4=users[_0x4da446(0x1dc)];else{if(_0x4c2baa[0x0][_0x4da446(0x1d0)]==_0x4da446(0x187))var _0x1c4ff4=users[_0x4da446(0x1f3)];else{if(_0x4c2baa[0x0]['language']==_0x4da446(0x17e))var _0x1c4ff4=users[_0x4da446(0x17e)];else{if(_0x4c2baa[0x0]['language']==_0x4da446(0x19d))var _0x1c4ff4=users[_0x4da446(0x163)];}}}}}}}_0x27a331[_0x4da446(0x1db)](_0x4da446(0x1a7),{'success':_0x3e1b46[_0x4da446(0x1c4)](_0x4da446(0x1bd)),'errors':_0x3e1b46['flash'](_0x4da446(0x165)),'role':_0x59cfb4,'profile':_0xb9b39c,'master_shop':_0x4c2baa,'user':_0x4392bb,'language':_0x1c4ff4});}catch(_0x2d7051){console[_0x4da446(0x1d6)](_0x2d7051);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x1e8),auth,async(_0xfa7153,_0x567384)=>{const _0x32dd23=a0_0xfeb98;try{const _0x4d4e67=_0xfa7153[_0x32dd23(0x15d)]['id'],_0x525480=await categories[_0x32dd23(0x1e9)](_0x4d4e67,_0xfa7153[_0x32dd23(0x1e4)]);_0xfa7153[_0x32dd23(0x1c4)](_0x32dd23(0x1bd),''+users['categories_edit']),_0x567384[_0x32dd23(0x1af)](_0x32dd23(0x1cb));}catch(_0x2ae413){console[_0x32dd23(0x1d6)](_0x2ae413);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1c2),auth,async(_0x5c345e,_0x2fc144)=>{const _0x348e25=a0_0xfeb98;try{const _0x3572e6=_0x5c345e['params']['id'],_0x55e83d=await categories['findByIdAndDelete'](_0x3572e6);_0x5c345e[_0x348e25(0x1c4)](_0x348e25(0x1bd),'categories\x20data\x20delete\x20successfully'),_0x2fc144[_0x348e25(0x1af)]('/products/categories');}catch(_0xbf952e){console[_0x348e25(0x1d6)](_0xbf952e);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1ad),auth,async(_0x5507bd,_0x9455f7)=>{const _0x2255a8=a0_0xfeb98;try{const {username:_0x474500,email:_0x43e84d,role:_0x5c1cab}=_0x5507bd[_0x2255a8(0x164)],_0x1bf767=_0x5507bd[_0x2255a8(0x164)],_0x30c053=await profile['findOne']({'email':_0x1bf767[_0x2255a8(0x201)]}),_0x1fa199=await master_shop[_0x2255a8(0x1c9)]();console[_0x2255a8(0x1d6)]('master',_0x1fa199);const _0x195b41=await brands[_0x2255a8(0x1c9)]();if(_0x1fa199[0x0][_0x2255a8(0x1d0)]==_0x2255a8(0x1f4))var _0x3a1e17=users[_0x2255a8(0x1b7)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]=='Hindi')var _0x3a1e17=users[_0x2255a8(0x20b)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]=='German')var _0x3a1e17=users[_0x2255a8(0x200)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]==_0x2255a8(0x185))var _0x3a1e17=users[_0x2255a8(0x185)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]=='French')var _0x3a1e17=users[_0x2255a8(0x1dc)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]=='Portuguese\x20(BR)')var _0x3a1e17=users[_0x2255a8(0x1f3)];else{if(_0x1fa199[0x0][_0x2255a8(0x1d0)]==_0x2255a8(0x17e))var _0x3a1e17=users[_0x2255a8(0x17e)];else{if(_0x1fa199[0x0]['language']=='Arabic\x20(ae)')var _0x3a1e17=users[_0x2255a8(0x163)];}}}}}}}_0x9455f7[_0x2255a8(0x1db)](_0x2255a8(0x1d2),{'success':_0x5507bd['flash'](_0x2255a8(0x1bd)),'errors':_0x5507bd[_0x2255a8(0x1c4)]('errors'),'role':_0x1bf767,'profile':_0x30c053,'master_shop':_0x1fa199,'user':_0x195b41,'language':_0x3a1e17});}catch(_0x4cc10a){console[_0x2255a8(0x1d6)](_0x4cc10a);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x1ad),auth,async(_0x279b23,_0x1888fe)=>{const _0x4d0c5b=a0_0xfeb98;try{const {name:_0x3fdace,products:_0x2d33cc}=_0x279b23[_0x4d0c5b(0x1e4)],_0x490868=new brands({'name':_0x3fdace,'products':_0x2d33cc}),_0x158f2f=await brands[_0x4d0c5b(0x212)]({'name':_0x3fdace});_0x158f2f?_0x279b23[_0x4d0c5b(0x1c4)](_0x4d0c5b(0x165),_0x3fdace+_0x4d0c5b(0x1e0)):_0x279b23[_0x4d0c5b(0x1c4)]('success',_0x3fdace+_0x4d0c5b(0x19f));const _0x55d0ef=await _0x490868[_0x4d0c5b(0x1a9)]();_0x1888fe[_0x4d0c5b(0x1af)](_0x4d0c5b(0x171));}catch(_0x12fa64){console[_0x4d0c5b(0x1d6)](_0x12fa64);}}),router[a0_0xfeb98(0x1c8)]('/brands/:id',auth,async(_0x4bd486,_0x4631b7)=>{const _0xea6c51=a0_0xfeb98;try{const {username:_0x1617b0,email:_0x4a3e6a,role:_0xcb7978}=_0x4bd486[_0xea6c51(0x164)],_0x37a47d=_0x4bd486[_0xea6c51(0x164)],_0x480599=await profile['findOne']({'email':_0x37a47d['email']}),_0x10f79d=await master_shop[_0xea6c51(0x1c9)]();console[_0xea6c51(0x1d6)](_0xea6c51(0x18e),_0x10f79d);const _0x112b0d=_0x4bd486[_0xea6c51(0x15d)]['id'];console[_0xea6c51(0x1d6)](_0x112b0d);const _0xa1c0ef=await brands[_0xea6c51(0x208)](_0x112b0d);if(_0x10f79d[0x0][_0xea6c51(0x1d0)]==_0xea6c51(0x1f4))var _0x5f52f4=users[_0xea6c51(0x1b7)];else{if(_0x10f79d[0x0][_0xea6c51(0x1d0)]==_0xea6c51(0x20b))var _0x5f52f4=users[_0xea6c51(0x20b)];else{if(_0x10f79d[0x0][_0xea6c51(0x1d0)]=='German')var _0x5f52f4=users['German'];else{if(_0x10f79d[0x0][_0xea6c51(0x1d0)]==_0xea6c51(0x185))var _0x5f52f4=users[_0xea6c51(0x185)];else{if(_0x10f79d[0x0]['language']==_0xea6c51(0x1dc))var _0x5f52f4=users[_0xea6c51(0x1dc)];else{if(_0x10f79d[0x0][_0xea6c51(0x1d0)]==_0xea6c51(0x187))var _0x5f52f4=users['Portuguese'];else{if(_0x10f79d[0x0]['language']=='Chinese')var _0x5f52f4=users[_0xea6c51(0x17e)];else{if(_0x10f79d[0x0]['language']=='Arabic\x20(ae)')var _0x5f52f4=users[_0xea6c51(0x163)];}}}}}}}_0x4631b7[_0xea6c51(0x1db)](_0xea6c51(0x1d2),{'success':_0x4bd486['flash'](_0xea6c51(0x1bd)),'errors':_0x4bd486[_0xea6c51(0x1c4)](_0xea6c51(0x165)),'role':_0x37a47d,'profile':_0x480599,'master_shop':_0x10f79d,'user':_0xa1c0ef,'language':_0x5f52f4});}catch(_0x1d2c73){console[_0xea6c51(0x1d6)](_0x1d2c73);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x162),auth,async(_0x51c340,_0x2739e1)=>{const _0x983056=a0_0xfeb98;try{const _0x21e573=_0x51c340[_0x983056(0x15d)]['id'],_0xc3a247=await brands[_0x983056(0x1e9)](_0x21e573,_0x51c340[_0x983056(0x1e4)]);_0x51c340[_0x983056(0x1c4)](_0x983056(0x1bd),_0x983056(0x168)),_0x2739e1['redirect'](_0x983056(0x171));}catch(_0x9c1e52){console['log'](_0x9c1e52);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x199),auth,async(_0x2c6ecf,_0xa52e22)=>{const _0xd82d19=a0_0xfeb98;try{const _0x81ffa7=_0x2c6ecf[_0xd82d19(0x15d)]['id'],_0x237f06=await brands[_0xd82d19(0x1f1)](_0x81ffa7);_0x2c6ecf[_0xd82d19(0x1c4)](_0xd82d19(0x1bd),'brand\x20data\x20delete\x20successfully'),_0xa52e22[_0xd82d19(0x1af)](_0xd82d19(0x171));}catch(_0x38b4fc){console[_0xd82d19(0x1d6)](_0x38b4fc);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1fb),auth,async(_0x1f0e80,_0x9d61b)=>{const _0x1053e6=a0_0xfeb98;try{const {username:_0x3bcbc6,email:_0x26d927,role:_0x5a1c22}=_0x1f0e80['user'],_0x258eda=_0x1f0e80['user'],_0x156a0c=await profile[_0x1053e6(0x212)]({'email':_0x258eda[_0x1053e6(0x201)]}),_0xeeb984=await master_shop[_0x1053e6(0x1c9)]();console[_0x1053e6(0x1d6)](_0x1053e6(0x18e),_0xeeb984);const _0x287bd2=await units[_0x1053e6(0x1c9)]();if(_0xeeb984[0x0][_0x1053e6(0x1d0)]=='English\x20(US)')var _0x2015e8=users['English'];else{if(_0xeeb984[0x0]['language']=='Hindi')var _0x2015e8=users[_0x1053e6(0x20b)];else{if(_0xeeb984[0x0][_0x1053e6(0x1d0)]==_0x1053e6(0x200))var _0x2015e8=users[_0x1053e6(0x200)];else{if(_0xeeb984[0x0][_0x1053e6(0x1d0)]=='Spanish')var _0x2015e8=users['Spanish'];else{if(_0xeeb984[0x0]['language']==_0x1053e6(0x1dc))var _0x2015e8=users[_0x1053e6(0x1dc)];else{if(_0xeeb984[0x0][_0x1053e6(0x1d0)]=='Portuguese\x20(BR)')var _0x2015e8=users['Portuguese'];else{if(_0xeeb984[0x0][_0x1053e6(0x1d0)]==_0x1053e6(0x17e))var _0x2015e8=users['Chinese'];else{if(_0xeeb984[0x0][_0x1053e6(0x1d0)]=='Arabic\x20(ae)')var _0x2015e8=users[_0x1053e6(0x163)];}}}}}}}_0x9d61b[_0x1053e6(0x1db)](_0x1053e6(0x167),{'success':_0x1f0e80[_0x1053e6(0x1c4)](_0x1053e6(0x1bd)),'errors':_0x1f0e80[_0x1053e6(0x1c4)](_0x1053e6(0x165)),'role':_0x258eda,'profile':_0x156a0c,'master_shop':_0xeeb984,'user':_0x287bd2,'language':_0x2015e8});}catch(_0x56ab4b){console[_0x1053e6(0x1d6)](_0x56ab4b);}}),router['post'](a0_0xfeb98(0x1fb),auth,async(_0x3b9698,_0x4573f5)=>{const _0x5e41df=a0_0xfeb98;try{const {name:_0x2761f3,secondary_unit:_0x1d9a16,products:_0x181a55}=_0x3b9698[_0x5e41df(0x1e4)],_0x1e90e8=new units({'name':_0x2761f3,'secondary_unit':_0x1d9a16,'products':_0x181a55}),_0x4be3d8=await units[_0x5e41df(0x212)]({'name':_0x2761f3});_0x4be3d8?_0x3b9698[_0x5e41df(0x1c4)](_0x5e41df(0x165),_0x2761f3+_0x5e41df(0x1df)):_0x3b9698['flash'](_0x5e41df(0x1bd),_0x2761f3+'\x20unit\x20is\x20add\x20successfully');const _0x37feb0=await _0x1e90e8[_0x5e41df(0x1a9)]();_0x4573f5[_0x5e41df(0x1af)](_0x5e41df(0x166));}catch(_0x540e62){console[_0x5e41df(0x1d6)](_0x540e62);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x183),auth,async(_0x31d7c9,_0x1466be)=>{const _0x2d3266=a0_0xfeb98;try{const {username:_0x5d1918,email:_0x36b80e,role:_0x54b9a9}=_0x31d7c9['user'],_0x2fed09=_0x31d7c9[_0x2d3266(0x164)],_0xccc250=await profile[_0x2d3266(0x212)]({'email':_0x2fed09[_0x2d3266(0x201)]}),_0x47613e=await master_shop[_0x2d3266(0x1c9)]();console['log'](_0x2d3266(0x18e),_0x47613e);const _0x5f39cf=_0x31d7c9[_0x2d3266(0x15d)]['id'],_0x49dd65=await units[_0x2d3266(0x208)](_0x5f39cf);if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x1f4))var _0x337a74=users[_0x2d3266(0x1b7)];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x20b))var _0x337a74=users[_0x2d3266(0x20b)];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x200))var _0x337a74=users['German'];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x185))var _0x337a74=users[_0x2d3266(0x185)];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x1dc))var _0x337a74=users[_0x2d3266(0x1dc)];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x187))var _0x337a74=users['Portuguese'];else{if(_0x47613e[0x0]['language']==_0x2d3266(0x17e))var _0x337a74=users['Chinese'];else{if(_0x47613e[0x0][_0x2d3266(0x1d0)]==_0x2d3266(0x19d))var _0x337a74=users['Arabic'];}}}}}}}_0x1466be[_0x2d3266(0x1db)]('units',{'success':_0x31d7c9[_0x2d3266(0x1c4)]('success'),'errors':_0x31d7c9[_0x2d3266(0x1c4)](_0x2d3266(0x165)),'role':_0x2fed09,'profile':_0xccc250,'master_shop':_0x47613e,'user':_0x49dd65,'language':_0x337a74});}catch(_0x761b2f){console['log'](_0x761b2f);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x183),auth,async(_0x590dac,_0x102ef8)=>{const _0x1756dd=a0_0xfeb98;try{const _0x3b7496=_0x590dac['params']['id'],_0x442b67=await units['findByIdAndUpdate'](_0x3b7496,_0x590dac[_0x1756dd(0x1e4)]);_0x590dac[_0x1756dd(0x1c4)](_0x1756dd(0x1bd),'unit\x20data\x20update\x20successfully'),_0x102ef8[_0x1756dd(0x1af)]('/products/units');}catch(_0x4a0f8d){console[_0x1756dd(0x1d6)](_0x4a0f8d);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x15c),auth,async(_0x5b94e9,_0x4e9da1)=>{const _0x2c2cb9=a0_0xfeb98;try{const _0x50fa33=_0x5b94e9[_0x2c2cb9(0x15d)]['id'],_0x4c259=await units[_0x2c2cb9(0x1f1)](_0x50fa33);_0x5b94e9[_0x2c2cb9(0x1c4)](_0x2c2cb9(0x1bd),'unit\x20data\x20delete\x20successfully'),_0x4e9da1[_0x2c2cb9(0x1af)]('/products/units');}catch(_0x34cc46){console[_0x2c2cb9(0x1d6)](_0x34cc46);}});const storage=multer[a0_0xfeb98(0x1f0)]({'destination':(_0x1b2caf,_0x249e71,_0x53b15d)=>{const _0x44648f=a0_0xfeb98;_0x53b15d(null,_0x44648f(0x1d5));},'filename':(_0x3a1984,_0x44da90,_0x1ed055)=>{const _0x1356ba=a0_0xfeb98;_0x1ed055(null,Date['now']()+_0x44da90[_0x1356ba(0x186)]);}}),upload=multer({'storage':storage});router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x192),auth,async(_0x2c1c09,_0x467b88)=>{const _0x1de9c2=a0_0xfeb98;try{const {username:_0x23b410,email:_0x4b3ffe,role:_0xbf77f6}=_0x2c1c09[_0x1de9c2(0x164)],_0x23a931=_0x2c1c09['user'],_0x1ca607=await profile[_0x1de9c2(0x212)]({'email':_0x23a931[_0x1de9c2(0x201)]}),_0x59ae57={'year':_0x1de9c2(0x1e6),'month':_0x1de9c2(0x174),'day':_0x1de9c2(0x1e6)},_0x54da19=await master_shop['find']();console[_0x1de9c2(0x1d6)](_0x1de9c2(0x17b),_0x54da19);const _0x9fcd06=await product[_0x1de9c2(0x1c9)]();console[_0x1de9c2(0x1d6)]('Products\x20find_data',_0x9fcd06);const _0x4d16a5=await warehouse[_0x1de9c2(0x190)]([{'$unwind':_0x1de9c2(0x1ec)},{'$lookup':{'from':_0x1de9c2(0x175),'localField':'product_details.product_name','foreignField':'name','as':_0x1de9c2(0x1d4)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x1de9c2(0x1be),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x1de9c2(0x161),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x1de9c2(0x1d6)]('Products\x20warehouse_data',_0x4d16a5),_0x4d16a5['forEach'](_0x16d771=>{const _0x392e6b=_0x1de9c2,_0x39e68a=_0x9fcd06[_0x392e6b(0x16d)](_0x121ebc=>{const _0x439601=_0x392e6b;_0x121ebc['name']==_0x16d771[_0x439601(0x17c)]&&(_0x121ebc[_0x439601(0x18a)]=parseInt(_0x121ebc[_0x439601(0x18a)])+parseInt(_0x16d771[_0x439601(0x202)]));});}),console[_0x1de9c2(0x1d6)](_0x1de9c2(0x19b),_0x9fcd06);if(_0x54da19[0x0][_0x1de9c2(0x1d0)]==_0x1de9c2(0x1f4))var _0x2b1add=users[_0x1de9c2(0x1b7)];else{if(_0x54da19[0x0]['language']==_0x1de9c2(0x20b))var _0x2b1add=users[_0x1de9c2(0x20b)];else{if(_0x54da19[0x0][_0x1de9c2(0x1d0)]=='German')var _0x2b1add=users['German'];else{if(_0x54da19[0x0][_0x1de9c2(0x1d0)]==_0x1de9c2(0x185))var _0x2b1add=users['Spanish'];else{if(_0x54da19[0x0][_0x1de9c2(0x1d0)]==_0x1de9c2(0x1dc))var _0x2b1add=users['French'];else{if(_0x54da19[0x0][_0x1de9c2(0x1d0)]==_0x1de9c2(0x187))var _0x2b1add=users[_0x1de9c2(0x1f3)];else{if(_0x54da19[0x0][_0x1de9c2(0x1d0)]==_0x1de9c2(0x17e))var _0x2b1add=users[_0x1de9c2(0x17e)];else{if(_0x54da19[0x0]['language']==_0x1de9c2(0x19d))var _0x2b1add=users[_0x1de9c2(0x163)];}}}}}}}_0x467b88[_0x1de9c2(0x1db)](_0x1de9c2(0x175),{'success':_0x2c1c09[_0x1de9c2(0x1c4)](_0x1de9c2(0x1bd)),'errors':_0x2c1c09[_0x1de9c2(0x1c4)]('errors'),'alldata':_0x9fcd06,'profile':_0x1ca607,'master_shop':_0x54da19,'role':_0x23a931,'product_stock':_0x4d16a5,'language':_0x2b1add});}catch(_0x2e2162){console['log'](_0x2e2162);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1ef),auth,async(_0xc5d011,_0x16b3a2)=>{const _0x57a182=a0_0xfeb98;try{const {username:_0xf13b7a,email:_0x2a7381,role:_0x67fd60}=_0xc5d011[_0x57a182(0x164)],_0x4cc9a6=_0xc5d011['user'],_0x4b6efd=await profile[_0x57a182(0x212)]({'email':_0x4cc9a6[_0x57a182(0x201)]}),_0x303e30=await master_shop[_0x57a182(0x1c9)]();console[_0x57a182(0x1d6)](_0x57a182(0x18e),_0x303e30);const _0x46d1fa=await categories['find']({}),_0x3e08ea=await brands[_0x57a182(0x1c9)]({}),_0x1fd352=await units[_0x57a182(0x1c9)]({}),_0x3492b0=await warehouse[_0x57a182(0x1c9)]({'status':_0x57a182(0x20a)});if(_0x303e30[0x0]['language']==_0x57a182(0x1f4))var _0xa67d3=users[_0x57a182(0x1b7)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]=='Hindi')var _0xa67d3=users[_0x57a182(0x20b)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]==_0x57a182(0x200))var _0xa67d3=users[_0x57a182(0x200)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]==_0x57a182(0x185))var _0xa67d3=users[_0x57a182(0x185)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]==_0x57a182(0x1dc))var _0xa67d3=users[_0x57a182(0x1dc)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]=='Portuguese\x20(BR)')var _0xa67d3=users['Portuguese'];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]==_0x57a182(0x17e))var _0xa67d3=users[_0x57a182(0x17e)];else{if(_0x303e30[0x0][_0x57a182(0x1d0)]==_0x57a182(0x19d))var _0xa67d3=users[_0x57a182(0x163)];}}}}}}}_0x16b3a2[_0x57a182(0x1db)](_0x57a182(0x1b0),{'success':_0xc5d011[_0x57a182(0x1c4)](_0x57a182(0x1bd)),'errors':_0xc5d011[_0x57a182(0x1c4)](_0x57a182(0x165)),'role':_0x4cc9a6,'profile':_0x4b6efd,'categories':_0x46d1fa,'brands':_0x3e08ea,'master_shop':_0x303e30,'units':_0x1fd352,'language':_0xa67d3,'find_data':_0x3492b0});}catch(_0x8a6b1a){console[_0x57a182(0x1d6)](_0x8a6b1a);}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x1ef),auth,upload[a0_0xfeb98(0x160)]('image'),async(_0x944006,_0x21ec86)=>{const _0x39748e=a0_0xfeb98;try{const {name:_0x5e14ec,category:_0x162dc6,brand:_0x41a0ee,unit:_0x1e1417,alertquantity:_0x26625e,stock:_0x1f2629,product_code:_0xdb807c,warehouse:_0x4e94de,primary_ItemCode:_0x1c93c4,second_ItemCode:_0x31a8c7,second_unit:_0xb7432f,maxPerUnit:_0x359fdc,MaxPerProduct:_0x24d738}=_0x944006['body'],_0x4a0f12=_0x944006['file']?.['filename']||_0x39748e(0x1a6),_0x468dee=new product({'image':_0x4a0f12,'name':_0x5e14ec,'category':_0x162dc6,'brand':_0x41a0ee,'unit':_0x1e1417,'alertquantity':_0x26625e,'stock':_0x1f2629,'product_code':_0xdb807c,'warehouse':_0x4e94de,'primary_code':_0x1c93c4,'secondary_code':_0x31a8c7,'second_unit':_0xb7432f,'maxStocks':_0x24d738,'maxProdPerUnit':_0x359fdc}),_0x97673=await _0x468dee[_0x39748e(0x1a9)](),_0x1aab84=await categories[_0x39748e(0x212)]({'name':_0x162dc6});_0x1aab84[_0x39748e(0x175)]=parseInt(_0x1aab84[_0x39748e(0x175)])+0x1,await _0x1aab84[_0x39748e(0x1a9)]();const _0x3031bd=await brands['findOne']({'name':_0x41a0ee});_0x3031bd['products']=parseInt(_0x3031bd[_0x39748e(0x175)])+0x1,await _0x3031bd[_0x39748e(0x1a9)]();const _0x4052dd=await units[_0x39748e(0x212)]({'name':_0x1e1417});_0x4052dd[_0x39748e(0x175)]=parseInt(_0x4052dd['products'])+0x1,await _0x4052dd[_0x39748e(0x1a9)](),_0x944006['flash'](_0x39748e(0x1bd),_0x39748e(0x176)),_0x21ec86[_0x39748e(0x1af)](_0x39748e(0x1e5));}catch(_0x1671e1){console['log'](_0x1671e1);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x20d),auth,async(_0x2f769b,_0x8edbe9)=>{const _0x550eb7=a0_0xfeb98;try{const {username:_0x269dc6,email:_0x1805eb,role:_0x5e737d}=_0x2f769b['user'],_0x42d567=_0x2f769b['user'],_0x224069=await profile[_0x550eb7(0x212)]({'email':_0x42d567[_0x550eb7(0x201)]}),_0x197eda=await master_shop[_0x550eb7(0x1c9)]();console[_0x550eb7(0x1d6)](_0x550eb7(0x1a1),_0x197eda);const _0xd33974=_0x2f769b[_0x550eb7(0x15d)]['id'],_0x23871b=await product[_0x550eb7(0x208)](_0xd33974),_0x152d01=await categories[_0x550eb7(0x1c9)]({}),_0x275f44=await brands[_0x550eb7(0x1c9)]({}),_0x8dda41=await units[_0x550eb7(0x1c9)]({}),_0x507433=await warehouse[_0x550eb7(0x1c9)]({'status':_0x550eb7(0x20a)}),_0x5a2d5b=await units[_0x550eb7(0x190)]([{'$group':{'_id':_0x550eb7(0x1a4),'secondaryunit':{'$first':_0x550eb7(0x1f2)}}}]);if(_0x197eda[0x0]['language']=='English\x20(US)')var _0x29c81a=users[_0x550eb7(0x1b7)];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x20b))var _0x29c81a=users[_0x550eb7(0x20b)];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x200))var _0x29c81a=users[_0x550eb7(0x200)];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x185))var _0x29c81a=users[_0x550eb7(0x185)];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x1dc))var _0x29c81a=users['French'];else{if(_0x197eda[0x0]['language']==_0x550eb7(0x187))var _0x29c81a=users[_0x550eb7(0x1f3)];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x17e))var _0x29c81a=users['Chinese'];else{if(_0x197eda[0x0][_0x550eb7(0x1d0)]==_0x550eb7(0x19d))var _0x29c81a=users[_0x550eb7(0x163)];}}}}}}}_0x8edbe9['render'](_0x550eb7(0x184),{'success':_0x2f769b['flash'](_0x550eb7(0x1bd)),'errors':_0x2f769b[_0x550eb7(0x1c4)]('errors'),'role':_0x42d567,'profile':_0x224069,'alldata':_0x23871b,'categories':_0x152d01,'brands':_0x275f44,'master_shop':_0x197eda,'units':_0x8dda41,'secondunit':_0x5a2d5b,'find_data':_0x507433,'language':_0x29c81a});}catch(_0x5031c8){console[_0x550eb7(0x1d6)](_0x5031c8);}}),router[a0_0xfeb98(0x19e)]('/view/:id',auth,upload[a0_0xfeb98(0x160)](a0_0xfeb98(0x195)),async(_0x356a08,_0x1db6f3)=>{const _0x1e3672=a0_0xfeb98;try{console[_0x1e3672(0x1d6)](_0x1e3672(0x1cc));const _0x27c314=_0x356a08[_0x1e3672(0x15d)]['id'],_0x48c621=await product[_0x1e3672(0x208)](_0x27c314),{image:_0x4c0bfc,name:_0x3dcea4,category:_0x595577,brand:_0x4316ec,sku:_0x36a9ae,unit:_0x5eb7e9,alertquantity:_0xdda42,product_code:_0x3c4f2f,warehouse:_0x37f4cd,primary_ItemCode:_0x48f155,second_ItemCode:_0x288841,second_unit:_0x499b96,maxPerUnit:_0x5ceeed,MaxPerProduct:_0x4be2d0,prod_catdata:_0x3544a9}=_0x356a08['body'];_0x356a08['file']&&(_0x48c621[_0x1e3672(0x195)]=_0x356a08[_0x1e3672(0x18f)][_0x1e3672(0x182)]);_0x48c621[_0x1e3672(0x213)]=_0x3dcea4,_0x48c621[_0x1e3672(0x1b4)]=_0x595577,_0x48c621[_0x1e3672(0x197)]=_0x4316ec,_0x48c621[_0x1e3672(0x1dd)]=_0x36a9ae,_0x48c621[_0x1e3672(0x1b9)]=_0x5eb7e9,_0x48c621[_0x1e3672(0x189)]=_0xdda42,_0x48c621[_0x1e3672(0x15f)]=_0x3c4f2f,_0x48c621[_0x1e3672(0x203)]=_0x37f4cd,_0x48c621['primary_code']=_0x48f155,_0x48c621[_0x1e3672(0x1c3)]=_0x288841,_0x48c621[_0x1e3672(0x211)]=_0x499b96,_0x48c621[_0x1e3672(0x209)]=_0x4be2d0,_0x48c621[_0x1e3672(0x215)]=_0x5ceeed,_0x48c621['product_category']=_0x3544a9;const _0x4010a1=await _0x48c621[_0x1e3672(0x1a9)]();console['log'](_0x1e3672(0x204),_0x48c621),_0x356a08[_0x1e3672(0x1c4)](_0x1e3672(0x1bd),_0x1e3672(0x20c)),_0x1db6f3[_0x1e3672(0x1af)](_0x1e3672(0x1e5));}catch(_0x439d79){console[_0x1e3672(0x1d6)](_0x439d79);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x20e),auth,async(_0x450bdb,_0x1a99fd)=>{const _0x10ec5b=a0_0xfeb98;try{const {username:_0x281d96,email:_0x36f186,role:_0x27fdd5}=_0x450bdb[_0x10ec5b(0x164)],_0x54c21b=_0x450bdb[_0x10ec5b(0x164)],_0xde1bf8=await profile[_0x10ec5b(0x212)]({'email':_0x54c21b['email']}),_0x45ad6d=await master_shop[_0x10ec5b(0x1c9)]();console[_0x10ec5b(0x1d6)](_0x10ec5b(0x1f9),_0x45ad6d);const _0xd5a7f3=_0x450bdb[_0x10ec5b(0x15d)]['id'],_0x1835d3=await product[_0x10ec5b(0x208)](_0xd5a7f3);console[_0x10ec5b(0x1d6)](_0x10ec5b(0x16e),_0x1835d3);if(_0x45ad6d[0x0][_0x10ec5b(0x1d0)]==_0x10ec5b(0x1f4))var _0x22d899=users[_0x10ec5b(0x1b7)];else{if(_0x45ad6d[0x0]['language']==_0x10ec5b(0x20b))var _0x22d899=users[_0x10ec5b(0x20b)];else{if(_0x45ad6d[0x0][_0x10ec5b(0x1d0)]==_0x10ec5b(0x200))var _0x22d899=users[_0x10ec5b(0x200)];else{if(_0x45ad6d[0x0]['language']==_0x10ec5b(0x185))var _0x22d899=users['Spanish'];else{if(_0x45ad6d[0x0][_0x10ec5b(0x1d0)]==_0x10ec5b(0x1dc))var _0x22d899=users[_0x10ec5b(0x1dc)];else{if(_0x45ad6d[0x0]['language']==_0x10ec5b(0x187))var _0x22d899=users['Portuguese'];else{if(_0x45ad6d[0x0][_0x10ec5b(0x1d0)]=='Chinese')var _0x22d899=users[_0x10ec5b(0x17e)];else{if(_0x45ad6d[0x0][_0x10ec5b(0x1d0)]=='Arabic\x20(ae)')var _0x22d899=users['Arabic'];}}}}}}}_0x1a99fd['render']('product_barcode',{'success':_0x450bdb[_0x10ec5b(0x1c4)](_0x10ec5b(0x1bd)),'errors':_0x450bdb[_0x10ec5b(0x1c4)](_0x10ec5b(0x165)),'role':_0x54c21b,'profile':_0xde1bf8,'alldata':_0x1835d3,'master_shop':_0x45ad6d,'language':_0x22d899});}catch(_0x4fda0b){console[_0x10ec5b(0x1d6)](_0x4fda0b);}}),router[a0_0xfeb98(0x1c8)](a0_0xfeb98(0x1b6),auth,async(_0xa3285f,_0x469b18)=>{const _0x5d18d8=a0_0xfeb98;try{const _0x37e2c5=new excelJS[(_0x5d18d8(0x16c))](),_0x16b7a1=_0x37e2c5[_0x5d18d8(0x206)](_0x5d18d8(0x19c));return _0x16b7a1[_0x5d18d8(0x21a)]=[{'header':_0x5d18d8(0x1d3),'key':_0x5d18d8(0x1d1),'width':0xa},{'header':'Brands','key':_0x5d18d8(0x191),'width':0xa},{'header':_0x5d18d8(0x217),'key':_0x5d18d8(0x1c0),'width':0xa},{'header':_0x5d18d8(0x15a),'key':_0x5d18d8(0x214),'width':0xa},{'header':'max_number_per_units','key':'MaxperUnits','width':0xa},{'header':'Primary_Code','key':_0x5d18d8(0x181),'width':0xa},{'header':'Secondary_Code','key':_0x5d18d8(0x181),'width':0xa},{'header':_0x5d18d8(0x1cf),'key':'ProductCode','width':0xa},{'header':'Category','key':_0x5d18d8(0x19a),'width':0xa},{'header':_0x5d18d8(0x179),'key':_0x5d18d8(0x1ed),'width':0xa},{'header':_0x5d18d8(0x173),'key':'PAlQty','width':0xa},{'header':_0x5d18d8(0x1a3),'key':_0x5d18d8(0x1ce),'width':0xa}],_0x469b18['setHeader'](_0x5d18d8(0x17a),_0x5d18d8(0x1c6)),_0x469b18['setHeader'](_0x5d18d8(0x178),_0x5d18d8(0x207)),_0x37e2c5[_0x5d18d8(0x177)][_0x5d18d8(0x17d)](_0x469b18)['then'](()=>{const _0x5507c2=_0x5d18d8;_0x469b18[_0x5507c2(0x1eb)](0xc8);});}catch(_0x1d4251){_0x469b18[_0x5d18d8(0x1eb)](0x190)[_0x5d18d8(0x1ca)](_0x1d4251);}});const storage1=multer[a0_0xfeb98(0x1f0)]({'destination':(_0x4acc32,_0x1c74f5,_0x2271d)=>{const _0x3c0a55=a0_0xfeb98;_0x2271d(null,_0x3c0a55(0x1b3));},'filename':(_0x47db7a,_0x4688e5,_0x12b608)=>{const _0x10d501=a0_0xfeb98;_0x12b608(null,Date[_0x10d501(0x20f)]()+_0x4688e5[_0x10d501(0x186)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x16a),auth,uploadMigrate[a0_0xfeb98(0x160)](a0_0xfeb98(0x1b2)),async(_0x3af3c5,_0x37624b)=>{const _0x3b7474=a0_0xfeb98,_0x55e527=_0x3af3c5[_0x3b7474(0x18f)][_0x3b7474(0x182)],_0x156b30=await xlsx['readFile']('public/Migration/'+_0x55e527);let _0x4f09de=_0x156b30[_0x3b7474(0x210)],_0x51ffa2=xlsx[_0x3b7474(0x159)]['sheet_to_json'](_0x156b30[_0x3b7474(0x216)][_0x4f09de[0x0]]);for(const _0x1fd31c of _0x51ffa2){const _0xc2bc96=_0x1fd31c[_0x3b7474(0x1d3)],_0x1ca86a=_0x1fd31c[_0x3b7474(0x18b)],_0x3b61d5=_0x1fd31c[_0x3b7474(0x217)],_0x239f93=_0x1fd31c[_0x3b7474(0x15a)],_0x5a4422=_0x1fd31c[_0x3b7474(0x1cf)],_0x3b4d9f=_0x1fd31c[_0x3b7474(0x1f8)],_0x3e76cb=_0x1fd31c[_0x3b7474(0x179)],_0x29c256=_0x1fd31c[_0x3b7474(0x1fc)],_0x53fa4b=_0x1fd31c['Secondary_Code'],_0x10f819=_0x1fd31c[_0x3b7474(0x173)],_0x1c1c45=_0x1fd31c[_0x3b7474(0x169)],_0x3412aa=_0x1fd31c[_0x3b7474(0x1a3)];try{let _0xc40d10=await categories[_0x3b7474(0x212)]({'name':_0x3b4d9f});if(!_0xc40d10){const _0x383c3f=new categories({'name':_0x3b4d9f,'products':'0'});_0xc40d10=await _0x383c3f[_0x3b7474(0x1a9)]();}let _0x3173bc=await brands['findOne']({'name':_0x1ca86a});if(!_0x3173bc){const _0x473f98=new brands({'name':_0x1ca86a,'products':'0'});_0x3173bc=await _0x473f98['save']();}let _0x57d075=await units[_0x3b7474(0x212)]({'name':_0x3b61d5,'secondary_unit':_0x239f93});if(!_0x57d075){const _0x3d43b1=new units({'name':_0x3b61d5,'secondary_unit':_0x239f93,'products':'0'});_0x57d075=await _0x3d43b1[_0x3b7474(0x1a9)]();}const _0x42486c=await product['find']({'name':_0xc2bc96,'category':_0xc40d10[_0x3b7474(0x213)],'brand':_0x3173bc['name'],'secondary_unit':_0x57d075[_0x3b7474(0x211)],'product_code':_0x5a4422});console[_0x3b7474(0x1d6)](_0x42486c[_0x3b7474(0x1bb)]+_0x3b7474(0x1ba)+_0xc40d10[_0x3b7474(0x213)]+_0x3b7474(0x1ba)+_0x3173bc['name']+'\x20<>\x20'+_0x57d075['secondary_unit']+'\x20<>\x20'+_0x5a4422+_0x3b7474(0x1ba)+_0xc2bc96);if(_0x42486c[_0x3b7474(0x1bb)]===0x0){const _0x34b672=new product({'image':_0x3b7474(0x1a6),'name':_0xc2bc96,'category':_0xc40d10[_0x3b7474(0x213)],'brand':_0x3173bc[_0x3b7474(0x213)],'unit':_0x57d075[_0x3b7474(0x213)],'alertquantity':_0x3e76cb,'product_code':_0x5a4422,'secondary_unit':_0x57d075['secondary_unit'],'primary_code':_0x29c256,'secondary_code':_0x53fa4b,'maxStocks':_0x10f819,'maxProdPerUnit':_0x1c1c45,'product_category':_0x3412aa}),_0x26512b=await _0x34b672[_0x3b7474(0x1a9)]();_0xc40d10['products']=parseInt(_0xc40d10[_0x3b7474(0x175)])+0x1,await _0xc40d10[_0x3b7474(0x1a9)](),_0x3173bc[_0x3b7474(0x175)]=parseInt(_0x3173bc['products'])+0x1,await _0x3173bc[_0x3b7474(0x1a9)](),_0x57d075[_0x3b7474(0x175)]=parseInt(_0x57d075[_0x3b7474(0x175)])+0x1,await _0x57d075['save'](),_0x3af3c5[_0x3b7474(0x1c4)]('success',_0xc2bc96+_0x3b7474(0x188));}else{console[_0x3b7474(0x1d6)](_0x42486c[0x0]);const _0x52671c=_0x42486c[0x0];_0x52671c[_0x3b7474(0x1b4)]=_0xc40d10['name'],_0x52671c[_0x3b7474(0x197)]=_0x3173bc[_0x3b7474(0x213)],_0x52671c[_0x3b7474(0x1b9)]=_0x57d075[_0x3b7474(0x213)],_0x52671c[_0x3b7474(0x189)]=_0x3e76cb,_0x52671c['product_code']=_0x5a4422,_0x52671c[_0x3b7474(0x211)]=_0x57d075[_0x3b7474(0x211)],_0x52671c[_0x3b7474(0x1a0)]=_0x29c256,_0x52671c[_0x3b7474(0x1c3)]=_0x53fa4b,_0x52671c[_0x3b7474(0x209)]=_0x10f819,_0x52671c[_0x3b7474(0x215)]=_0x1c1c45,_0x52671c[_0x3b7474(0x1d7)]=_0x3412aa;const _0x315f27=await _0x52671c['save']();_0x3af3c5[_0x3b7474(0x1c4)](_0x3b7474(0x1bd),_0x315f27[_0x3b7474(0x213)]+'\x20Edit\x20Successfully');}}catch(_0x327307){_0x37624b[_0x3b7474(0x1eb)](0x1f4)[_0x3b7474(0x1f6)]({'proderror':_0x327307[_0x3b7474(0x1b5)],'aproduct':_0xc2bc96});}}_0x37624b[_0x3b7474(0x1af)](_0x3b7474(0x1e5));}),router['post'](a0_0xfeb98(0x193),auth,async(_0x1f8576,_0xcc507f)=>{const _0x19166c=a0_0xfeb98;try{console[_0x19166c(0x1d6)](_0x1f8576[_0x19166c(0x1e4)]);const {data_cateory:_0x3f9e41,datachoose:_0x28fe85}=_0x1f8576[_0x19166c(0x1e4)];var _0x2eb0e0;if(_0x28fe85=='prod_categ')_0x2eb0e0=await product[_0x19166c(0x190)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x28fe85==_0x19166c(0x1d2))_0x2eb0e0=await product[_0x19166c(0x190)]([{'$match':{'product_category':_0x3f9e41}},{'$group':{'_id':_0x19166c(0x1ab)}}]);else _0x28fe85=='categ'&&(_0x2eb0e0=await product[_0x19166c(0x190)]([{'$match':{'product_category':_0x3f9e41}},{'$group':{'_id':_0x19166c(0x1e7)}}]));}_0xcc507f[_0x19166c(0x1f6)](_0x2eb0e0);}catch(_0x232492){_0xcc507f['json']({'message':_0x232492[_0x19166c(0x1b5)]});}}),router['post'](a0_0xfeb98(0x1ff),auth,async(_0x4ee852,_0x43d229)=>{const _0xb3504b=a0_0xfeb98;try{const {data_choosing:_0x39c09a,data_selected:_0x547de7}=_0x4ee852[_0xb3504b(0x1e4)];var _0x56898e;if(_0x39c09a==_0xb3504b(0x1e1))_0x56898e=await product[_0xb3504b(0x190)]([{'$match':{'product_category':_0x547de7}}]);else{if(_0x39c09a==_0xb3504b(0x1d2))_0x56898e=await product[_0xb3504b(0x190)]([{'$match':{'brand':_0x547de7}}]);else _0x39c09a==_0xb3504b(0x18c)&&(_0x56898e=await product[_0xb3504b(0x190)]([{'$match':{'category':_0x547de7}}]));}_0x43d229[_0xb3504b(0x1f6)](_0x56898e);}catch(_0x19e80d){_0x43d229['json']({'message':_0x19e80d[_0xb3504b(0x1b5)]});}}),router[a0_0xfeb98(0x1c8)]('/print_barcode',auth,async(_0x1e9c76,_0x38909f)=>{const _0x341ef7=a0_0xfeb98,_0x507251=_0x1e9c76['user'],_0x42a65d=await profile[_0x341ef7(0x212)]({'email':_0x507251[_0x341ef7(0x201)]}),_0x199947=await master_shop[_0x341ef7(0x1c9)](),_0x32d9fc=await product['find']();if(_0x199947[0x0][_0x341ef7(0x1d0)]==_0x341ef7(0x1f4))var _0x2705e1=users[_0x341ef7(0x1b7)];else{if(_0x199947[0x0][_0x341ef7(0x1d0)]==_0x341ef7(0x20b))var _0x2705e1=users[_0x341ef7(0x20b)];else{if(_0x199947[0x0][_0x341ef7(0x1d0)]=='German')var _0x2705e1=users['German'];else{if(_0x199947[0x0]['language']==_0x341ef7(0x185))var _0x2705e1=users[_0x341ef7(0x185)];else{if(_0x199947[0x0][_0x341ef7(0x1d0)]=='French')var _0x2705e1=users[_0x341ef7(0x1dc)];else{if(_0x199947[0x0]['language']==_0x341ef7(0x187))var _0x2705e1=users[_0x341ef7(0x1f3)];else{if(_0x199947[0x0][_0x341ef7(0x1d0)]==_0x341ef7(0x17e))var _0x2705e1=users[_0x341ef7(0x17e)];else{if(_0x199947[0x0][_0x341ef7(0x1d0)]==_0x341ef7(0x19d))var _0x2705e1=users[_0x341ef7(0x163)];}}}}}}}_0x38909f[_0x341ef7(0x1db)](_0x341ef7(0x1a5),{'success':_0x1e9c76['flash']('success'),'errors':_0x1e9c76[_0x341ef7(0x1c4)](_0x341ef7(0x165)),'role':_0x507251,'profile':_0x42a65d,'products':_0x32d9fc,'master_shop':_0x199947,'language':_0x2705e1});}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x1bf),auth,async(_0x5c2366,_0x3e321a)=>{const _0x16a9c0=a0_0xfeb98,_0x31f8ee=await product[_0x16a9c0(0x1c9)]();_0x3e321a[_0x16a9c0(0x1f6)]({'data':_0x31f8ee});}),router['post']('/barcode_filter',auth,async(_0x30b64a,_0x5c5203)=>{const _0x1abb4e=a0_0xfeb98;try{const {dataProdCat:_0x4a5c38,dataProdIdentity:_0x4f0817}=_0x30b64a[_0x1abb4e(0x1e4)];var _0x5acd2f;switch(_0x4a5c38){case'fg':switch(_0x4f0817){case _0x1abb4e(0x18b):_0x5acd2f=await product[_0x1abb4e(0x190)]([{'$match':{'product_category':_0x1abb4e(0x198)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x1abb4e(0x1a4)}}]);break;case _0x1abb4e(0x1f8):_0x5acd2f=await product[_0x1abb4e(0x190)]([{'$match':{'product_category':_0x1abb4e(0x198)}},{'$group':{'_id':_0x1abb4e(0x1e7)}},{'$project':{'category':_0x1abb4e(0x1a4)}}]);break;}break;case'rm':switch(_0x4f0817){case _0x1abb4e(0x18b):_0x5acd2f=await product[_0x1abb4e(0x190)]([{'$match':{'product_category':_0x1abb4e(0x1ae)}},{'$group':{'_id':_0x1abb4e(0x1ab)}},{'$project':{'brand':_0x1abb4e(0x1a4)}}]);break;case _0x1abb4e(0x1f8):_0x5acd2f=await product[_0x1abb4e(0x190)]([{'$match':{'product_category':_0x1abb4e(0x1ae)}},{'$group':{'_id':_0x1abb4e(0x1e7)}},{'$project':{'category':_0x1abb4e(0x1a4)}}]);break;}break;}_0x5c5203[_0x1abb4e(0x1f6)](_0x5acd2f);}catch(_0x1b8469){_0x5c5203[_0x1abb4e(0x1f6)]({'message':_0x1b8469[_0x1abb4e(0x1b5)]});}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x219),auth,async(_0x187040,_0x56a410)=>{const _0x1bd8a4=a0_0xfeb98;try{console[_0x1bd8a4(0x1d6)](_0x187040[_0x1bd8a4(0x1e4)]);const {prod_cat:_0xa7274,identity:_0x10edfa,valueData:_0x1b6af8,typeofbarcode:_0x2061ee}=_0x187040[_0x1bd8a4(0x1e4)];let _0x42c6f7;switch(_0xa7274){case'fg':if(_0x10edfa==_0x1bd8a4(0x18b))_0x42c6f7=await product[_0x1bd8a4(0x190)]([{'$match':{'product_category':_0x1bd8a4(0x198),'brand':_0x1b6af8}}]);else _0x10edfa==_0x1bd8a4(0x1f8)&&(_0x42c6f7=await product[_0x1bd8a4(0x190)]([{'$match':{'product_category':_0x1bd8a4(0x198),'category':_0x1b6af8}}]));break;case'rm':if(_0x10edfa==_0x1bd8a4(0x18b))_0x42c6f7=await product[_0x1bd8a4(0x190)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x1b6af8}}]);else _0x10edfa=='Category'&&(_0x42c6f7=await product[_0x1bd8a4(0x190)]([{'$match':{'product_category':_0x1bd8a4(0x1ae),'category':_0x1b6af8}}]));break;}const _0x524b4e=_0x31a033=>_0x31a033*0x48,_0x300ef0={'width':0x3,'height':0x1},_0x867fa5=new PDFDocument({'margin':_0x524b4e(0.75),'size':[_0x524b4e(_0x300ef0['width']),_0x524b4e(_0x300ef0[_0x1bd8a4(0x218)])],'bufferPages':!![]}),_0x380acb=_0x42c6f7[_0x1bd8a4(0x1bb)];for(let _0xcf8fae=0x0;_0xcf8fae<=_0x380acb;_0xcf8fae++){if(_0xcf8fae!=_0x380acb){const _0x24be48=_0x42c6f7[_0xcf8fae]['name'],_0x19ea58=_0x42c6f7[_0xcf8fae][_0x1bd8a4(0x1a0)],_0x13b729=_0x42c6f7[_0xcf8fae]['secondary_code'],_0x4c2bb0=_0x42c6f7[_0xcf8fae][_0x1bd8a4(0x15f)];var _0x477b74;switch(_0x2061ee){case'1':_0x477b74=_0x19ea58;break;case'2':_0x477b74=_0x13b729;break;case'3':_0x477b74=_0x4c2bb0;break;}const _0x23e2de={'width':0xd2,'height':0x64},_0x384bd7={'width':_0x524b4e(_0x300ef0[_0x1bd8a4(0x194)]),'height':_0x524b4e(_0x300ef0[_0x1bd8a4(0x218)])},_0x3d1341=new Canvas();JsBarcode(_0x3d1341,_0x477b74,{'format':_0x1bd8a4(0x18d),'height':_0x23e2de[_0x1bd8a4(0x218)],'displayValue':!![],'text':_0x477b74});const _0x3a90d0=_0x3d1341['toBuffer'](),_0x3e7b99=_0x384bd7['width']/_0x23e2de[_0x1bd8a4(0x194)],_0x1fcf01=_0x384bd7[_0x1bd8a4(0x218)]/_0x23e2de[_0x1bd8a4(0x218)],_0x5ef350=Math[_0x1bd8a4(0x1ac)](_0x3e7b99,_0x1fcf01),_0x409f8c=_0x23e2de[_0x1bd8a4(0x194)]*_0x5ef350,_0x27a048=_0x23e2de[_0x1bd8a4(0x218)]*_0x5ef350,_0x13198b=(_0x384bd7[_0x1bd8a4(0x194)]-_0x409f8c)/0x2,_0x4efd35=(_0x384bd7[_0x1bd8a4(0x218)]-_0x27a048)/0x2;_0x867fa5[_0x1bd8a4(0x195)](_0x3a90d0,_0x13198b,_0x4efd35,{'width':_0x409f8c,'height':_0x27a048}),_0xcf8fae!=_0x380acb&&_0x867fa5[_0x1bd8a4(0x1b1)]();}}const _0x5a68af=[];_0x867fa5['on']('data',_0x5a68af[_0x1bd8a4(0x16b)][_0x1bd8a4(0x1b8)](_0x5a68af)),_0x867fa5['on']('end',()=>{const _0x49ec8f=_0x1bd8a4,_0x282f03=Buffer['concat'](_0x5a68af),_0x435522=_0x282f03[_0x49ec8f(0x1ee)](_0x49ec8f(0x1c7));_0x56a410[_0x49ec8f(0x1f6)]({'pdfContent':_0x435522});}),_0x867fa5['end']();}catch(_0x5b3489){_0x56a410[_0x1bd8a4(0x1f6)]({'message':_0x5b3489[_0x1bd8a4(0x1b5)]});}}),router['post'](a0_0xfeb98(0x180),auth,async(_0x3ca262,_0x160590)=>{const _0x407594=a0_0xfeb98;try{console[_0x407594(0x1d6)](_0x3ca262[_0x407594(0x1e4)]);const {prod_cat:_0x3c555c,identity:_0x12cf11,valueData:_0x4ca771}=_0x3ca262['body'];let _0x2581c3;switch(_0x3c555c){case'fg':if(_0x12cf11==_0x407594(0x18b))_0x2581c3=await product[_0x407594(0x190)]([{'$match':{'product_category':_0x407594(0x198),'brand':_0x4ca771}}]);else _0x12cf11=='Category'&&(_0x2581c3=await product[_0x407594(0x190)]([{'$match':{'product_category':_0x407594(0x198),'category':_0x4ca771}}]));break;case'rm':if(_0x12cf11==_0x407594(0x18b))_0x2581c3=await product['aggregate']([{'$match':{'product_category':_0x407594(0x1ae),'brand':_0x4ca771}}]);else _0x12cf11==_0x407594(0x1f8)&&(_0x2581c3=await product[_0x407594(0x190)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x4ca771}}]));break;}_0x160590[_0x407594(0x1f6)]({'data':_0x2581c3});}catch(_0x382771){_0x160590[_0x407594(0x1f6)]({'message':_0x382771[_0x407594(0x1b5)]});}}),router[a0_0xfeb98(0x19e)](a0_0xfeb98(0x1f5),auth,async(_0x423c4a,_0x4461d0)=>{const _0x3c0bdb=a0_0xfeb98;try{const _0x194d18=_0x423c4a['params']['id'],{copies:_0x4aeced,typeofbarcode:_0x3b4e28}=_0x423c4a[_0x3c0bdb(0x1e4)];var _0x31436a=await product[_0x3c0bdb(0x208)](_0x194d18);const _0x452996=_0x463240=>_0x463240*0x48,_0x31866f={'width':0x3,'height':0x1},_0x2124d7=new PDFDocument({'margin':_0x452996(0.75),'size':[_0x452996(_0x31866f['width']),_0x452996(_0x31866f[_0x3c0bdb(0x218)])],'bufferPages':!![]}),_0x1d1e5a=_0x4aeced,_0x3e889a=_0x31436a[_0x3c0bdb(0x213)],_0x4703d1=_0x31436a['primary_code'],_0x48967c=_0x31436a[_0x3c0bdb(0x1c3)],_0x5318b2=_0x31436a['product_code'];let _0x4db324;switch(_0x3b4e28){case'1':_0x4db324=_0x4703d1;break;case'2':_0x4db324=_0x48967c;break;case'3':_0x4db324=_0x5318b2;break;}const _0x53b4ee={'width':0xd2,'height':0x64},_0x2cb59d={'width':_0x452996(_0x31866f[_0x3c0bdb(0x194)]),'height':_0x452996(_0x31866f[_0x3c0bdb(0x218)])};for(let _0x1be53e=0x1;_0x1be53e<=_0x1d1e5a;_0x1be53e++){const _0x188d66=new Canvas();JsBarcode(_0x188d66,_0x4db324,{'format':_0x3c0bdb(0x18d),'height':_0x53b4ee[_0x3c0bdb(0x218)],'displayValue':!![],'text':_0x4db324});const _0x552d41=_0x188d66[_0x3c0bdb(0x1a8)](),_0x5244da=_0x2cb59d[_0x3c0bdb(0x194)]/_0x53b4ee[_0x3c0bdb(0x194)],_0x4a3d52=_0x2cb59d[_0x3c0bdb(0x218)]/_0x53b4ee[_0x3c0bdb(0x218)],_0x44d14c=Math[_0x3c0bdb(0x1ac)](_0x5244da,_0x4a3d52),_0x198e3f=_0x53b4ee[_0x3c0bdb(0x194)]*_0x44d14c,_0x3ff737=_0x53b4ee[_0x3c0bdb(0x218)]*_0x44d14c,_0x1bccd3=(_0x2cb59d['width']-_0x198e3f)/0x2,_0xcd3590=(_0x2cb59d['height']-_0x3ff737)/0x2;_0x2124d7['image'](_0x552d41,_0x1bccd3,_0xcd3590,{'width':_0x198e3f,'height':_0x3ff737}),_0x1be53e!=_0x1d1e5a&&_0x2124d7['addPage']();}const _0x40d816=[];_0x2124d7['on'](_0x3c0bdb(0x196),_0x40d816[_0x3c0bdb(0x16b)][_0x3c0bdb(0x1b8)](_0x40d816)),_0x2124d7['on'](_0x3c0bdb(0x1f7),()=>{const _0x46a8c=_0x3c0bdb,_0x3262fb=Buffer[_0x46a8c(0x1e3)](_0x40d816),_0x18b701=_0x3262fb[_0x46a8c(0x1ee)](_0x46a8c(0x1c7));_0x4461d0[_0x46a8c(0x1f6)]({'pdfContent':_0x18b701});}),_0x2124d7[_0x3c0bdb(0x1f7)]();}catch(_0x33c6bc){_0x4461d0[_0x3c0bdb(0x1f6)]({'message':_0x33c6bc[_0x3c0bdb(0x1b5)]});}}),module['exports']=router;