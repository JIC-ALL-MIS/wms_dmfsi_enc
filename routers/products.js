const a0_0x24b8c1=a0_0x5dcb;function a0_0x5dcb(_0x370ac6,_0x4e7616){const _0x1128ff=a0_0x1128();return a0_0x5dcb=function(_0x5dcb00,_0x4fad4b){_0x5dcb00=_0x5dcb00-0x14b;let _0x2c8283=_0x1128ff[_0x5dcb00];return _0x2c8283;},a0_0x5dcb(_0x370ac6,_0x4e7616);}function a0_0x1128(){const _0x2f6661=['/categories/delete/:id','Finished\x20Goods','product_barcode_products','defaultProduct.avif','maxProdPerUnit','French','categories','/products/units','unit\x20data\x20delete\x20successfully','German','public/Migration/','height','product\x20edit','2208849CpjkGY','barcode\x20Product\x20master','attachment;\x20filename=Product_Migration_File.xlsx','2wWLKId','\x20<>\x20','/print_barcode_filter/','Content-Disposition','Router','product_details.product_name','xlsx','errors','$secondary_unit','max_number_per_units','Category','PName','findByIdAndUpdate','PAlQty','/barcode/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product\x20add\x20successfully','product_category','Chinese','unit','PUnits','Arabic','toBuffer','columns','prod_categ','3689350kCMKDF','body','get','brands','Brands','primary_code','width','/categories','success','filename','/view/add_products','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','product_docs','Secondary_Units','/products_export_migrate_file','$category','edit\x20Product\x20master','public/Migration','products','bind','/products/categories','data','addWorksheet','Raw\x20Materials','then','English','edit_product','now','categ','/brands/:id','post','Products\x20find_data','Hindi','push','findByIdAndDelete','file','5UcrryT','end','alertquantity','Enabled','/products_import_migrate_file','Products_category','Sheets','secondary_unit','readFile','/print_barcode_single/:id','_id','exports','min','master','Units','numeric','json','aggregate','diskStorage','ProductCode','express/lib/response','English\x20(US)','stock','$product_stock','Arabic\x20(ae)','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','$product_details','Spanish','find','utils','/categories/:id','\x20added\x20successfully','Product_Name','$product_details.product_stock','categories\x20data\x20delete\x20successfully','toString','/select_data','status','findById','/units/delete/:id','log','language','units','../middleware/auth','Alert_QTY','Portuguese','$product_category','sheet_to_json','/print_barcode_filter_search/','params','../public/language/languages.json','SheetNames','40FENhMw','Content-Type','single','$brand','/products/view','Secondary_Code','user','flash','Product_Code','Prod_Cat','Products','name','358324iVSUzG','originalname','base64','4391226NVeyhx','forEach','secondary_code','message','/brands/delete/:id','\x20categories\x20is\x20add\x20successfully','pdfkit-table','addPage','product_stock','Portuguese\x20(BR)','Primary_Code','\x20Edit\x20Successfully','save','5059320rcgEWz','$_id','/units/:id','Maximum_Stocks','unit\x20data\x20update\x20successfully','render','send','/filter_product','hello','brand','sku','/units','migrate_product_fule','canvas','redirect','Products\x20master','length','320364wwvERq','2791828RRRsus','findOne','category','brand\x20data\x20delete\x20successfully','map','maxStocks','/brands','/view/:id','Workbook','CODE128','warehouse','image','/view','write','email','PSecondaryUnits','setHeader','/products/brands'];a0_0x1128=function(){return _0x2f6661;};return a0_0x1128();}(function(_0x39831b,_0x4ee174){const _0x4626e4=a0_0x5dcb,_0x4dbfb4=_0x39831b();while(!![]){try{const _0x48f59b=-parseInt(_0x4626e4(0x1b9))/0x1*(parseInt(_0x4626e4(0x1fd))/0x2)+parseInt(_0x4626e4(0x1fa))/0x3+-parseInt(_0x4626e4(0x1db))/0x4+-parseInt(_0x4626e4(0x179))/0x5*(-parseInt(_0x4626e4(0x1bc))/0x6)+parseInt(_0x4626e4(0x155))/0x7+parseInt(_0x4626e4(0x1ad))/0x8*(parseInt(_0x4626e4(0x1da))/0x9)+-parseInt(_0x4626e4(0x1c9))/0xa;if(_0x48f59b===_0x4ee174)break;else _0x4dbfb4['push'](_0x4dbfb4['shift']());}catch(_0x4e4004){_0x4dbfb4['push'](_0x4dbfb4['shift']());}}}(a0_0x1128,0x9529b));const express=require('express'),res=require(a0_0x24b8c1(0x18d)),app=express(),router=express[a0_0x24b8c1(0x201)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x24b8c1(0x1a4)),users=require(a0_0x24b8c1(0x1ab)),excelJS=require('exceljs'),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x24b8c1(0x1d6)),PDFDocument=require(a0_0x24b8c1(0x1c2));router['get']('/categories',auth,async(_0x485edf,_0x420c1f)=>{const _0x181d3a=a0_0x24b8c1;try{const {username:_0x1f38c9,email:_0x57e9fe,role:_0x4e6375}=_0x485edf[_0x181d3a(0x1b3)],_0x4481e5=_0x485edf[_0x181d3a(0x1b3)],_0x169d61=await profile[_0x181d3a(0x1dc)]({'email':_0x4481e5[_0x181d3a(0x1e9)]}),_0x872faa=await master_shop[_0x181d3a(0x195)]();console['log']('master',_0x872faa);const _0x3b184e=await categories[_0x181d3a(0x195)]();if(_0x872faa[0x0][_0x181d3a(0x1a2)]==_0x181d3a(0x18e))var _0x1ab0d2=users[_0x181d3a(0x16e)];else{if(_0x872faa[0x0]['language']=='Hindi')var _0x1ab0d2=users[_0x181d3a(0x175)];else{if(_0x872faa[0x0][_0x181d3a(0x1a2)]==_0x181d3a(0x1f6))var _0x1ab0d2=users[_0x181d3a(0x1f6)];else{if(_0x872faa[0x0][_0x181d3a(0x1a2)]==_0x181d3a(0x194))var _0x1ab0d2=users['Spanish'];else{if(_0x872faa[0x0][_0x181d3a(0x1a2)]==_0x181d3a(0x1f2))var _0x1ab0d2=users[_0x181d3a(0x1f2)];else{if(_0x872faa[0x0][_0x181d3a(0x1a2)]==_0x181d3a(0x1c5))var _0x1ab0d2=users['Portuguese'];else{if(_0x872faa[0x0]['language']==_0x181d3a(0x14e))var _0x1ab0d2=users[_0x181d3a(0x14e)];else{if(_0x872faa[0x0]['language']==_0x181d3a(0x191))var _0x1ab0d2=users[_0x181d3a(0x151)];}}}}}}}_0x420c1f[_0x181d3a(0x1ce)](_0x181d3a(0x1f3),{'success':_0x485edf['flash']('success'),'errors':_0x485edf['flash'](_0x181d3a(0x204)),'role':_0x4481e5,'profile':_0x169d61,'user':_0x3b184e,'master_shop':_0x872faa,'language':_0x1ab0d2});}catch(_0x5b8fa7){console['log'](_0x5b8fa7);}}),router['post'](a0_0x24b8c1(0x15c),auth,async(_0x4a25f1,_0xc98776)=>{const _0x1f28cb=a0_0x24b8c1;try{const {name:_0x40d7a0,products:_0x287289}=_0x4a25f1['body'],_0x514083=new categories({'name':_0x40d7a0,'products':_0x287289}),_0x1b03f2=await categories['findOne']({'name':_0x40d7a0});_0x1b03f2?_0x4a25f1[_0x1f28cb(0x1b4)]('errors',_0x40d7a0+_0x1f28cb(0x14b)):_0x4a25f1[_0x1f28cb(0x1b4)](_0x1f28cb(0x15d),_0x40d7a0+_0x1f28cb(0x1c1));const _0x407ea7=await _0x514083['save']();_0xc98776['redirect'](_0x1f28cb(0x169));}catch(_0x30e093){console[_0x1f28cb(0x1a1)](_0x30e093);}}),router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x197),auth,async(_0x338d4b,_0x96ec6b)=>{const _0x38e678=a0_0x24b8c1;try{const {username:_0x52e5cd,email:_0x27b29a,role:_0x14c249}=_0x338d4b[_0x38e678(0x1b3)],_0x4cea29=_0x338d4b[_0x38e678(0x1b3)],_0x364902=await profile[_0x38e678(0x1dc)]({'email':_0x4cea29[_0x38e678(0x1e9)]}),_0x5d4425=await master_shop[_0x38e678(0x195)]();console[_0x38e678(0x1a1)](_0x38e678(0x186),_0x5d4425);const _0x2158e2=_0x338d4b[_0x38e678(0x1aa)]['id'];console[_0x38e678(0x1a1)](_0x2158e2);const _0x2ab0f2=await categories[_0x38e678(0x19f)](_0x2158e2);if(_0x5d4425[0x0][_0x38e678(0x1a2)]==_0x38e678(0x18e))var _0x563cc7=users[_0x38e678(0x16e)];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]==_0x38e678(0x175))var _0x563cc7=users[_0x38e678(0x175)];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]==_0x38e678(0x1f6))var _0x563cc7=users['German'];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]=='Spanish')var _0x563cc7=users[_0x38e678(0x194)];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]==_0x38e678(0x1f2))var _0x563cc7=users['French'];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]==_0x38e678(0x1c5))var _0x563cc7=users[_0x38e678(0x1a6)];else{if(_0x5d4425[0x0][_0x38e678(0x1a2)]=='Chinese')var _0x563cc7=users[_0x38e678(0x14e)];else{if(_0x5d4425[0x0]['language']==_0x38e678(0x191))var _0x563cc7=users['Arabic'];}}}}}}}_0x96ec6b[_0x38e678(0x1ce)](_0x38e678(0x1f3),{'success':_0x338d4b[_0x38e678(0x1b4)](_0x38e678(0x15d)),'errors':_0x338d4b[_0x38e678(0x1b4)](_0x38e678(0x204)),'role':_0x4cea29,'profile':_0x364902,'master_shop':_0x5d4425,'user':_0x2ab0f2,'language':_0x563cc7});}catch(_0x69e2f){console[_0x38e678(0x1a1)](_0x69e2f);}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x197),auth,async(_0x1777ad,_0xf0c126)=>{const _0x327111=a0_0x24b8c1;try{const _0x5369b2=_0x1777ad['params']['id'],_0xfeee2d=await categories[_0x327111(0x209)](_0x5369b2,_0x1777ad[_0x327111(0x156)]);_0x1777ad['flash'](_0x327111(0x15d),''+users['categories_edit']),_0xf0c126[_0x327111(0x1d7)]('/products/categories');}catch(_0x599e81){console[_0x327111(0x1a1)](_0x599e81);}}),router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x1ed),auth,async(_0x1185ec,_0x560e67)=>{const _0x3efdb0=a0_0x24b8c1;try{const _0x481ec5=_0x1185ec[_0x3efdb0(0x1aa)]['id'],_0x360921=await categories['findByIdAndDelete'](_0x481ec5);_0x1185ec['flash']('success',_0x3efdb0(0x19b)),_0x560e67['redirect'](_0x3efdb0(0x169));}catch(_0x26edae){console['log'](_0x26edae);}}),router['get'](a0_0x24b8c1(0x1e1),auth,async(_0x15c9fc,_0x5617f9)=>{const _0x12fcc8=a0_0x24b8c1;try{const {username:_0x1c8f19,email:_0x103af2,role:_0x125b87}=_0x15c9fc[_0x12fcc8(0x1b3)],_0x1f1ceb=_0x15c9fc[_0x12fcc8(0x1b3)],_0x4c069c=await profile['findOne']({'email':_0x1f1ceb[_0x12fcc8(0x1e9)]}),_0x4c5f27=await master_shop[_0x12fcc8(0x195)]();console[_0x12fcc8(0x1a1)](_0x12fcc8(0x186),_0x4c5f27);const _0x4b49f9=await brands[_0x12fcc8(0x195)]();if(_0x4c5f27[0x0][_0x12fcc8(0x1a2)]==_0x12fcc8(0x18e))var _0x3cd966=users[_0x12fcc8(0x16e)];else{if(_0x4c5f27[0x0][_0x12fcc8(0x1a2)]==_0x12fcc8(0x175))var _0x3cd966=users[_0x12fcc8(0x175)];else{if(_0x4c5f27[0x0][_0x12fcc8(0x1a2)]==_0x12fcc8(0x1f6))var _0x3cd966=users[_0x12fcc8(0x1f6)];else{if(_0x4c5f27[0x0][_0x12fcc8(0x1a2)]==_0x12fcc8(0x194))var _0x3cd966=users[_0x12fcc8(0x194)];else{if(_0x4c5f27[0x0]['language']==_0x12fcc8(0x1f2))var _0x3cd966=users[_0x12fcc8(0x1f2)];else{if(_0x4c5f27[0x0]['language']==_0x12fcc8(0x1c5))var _0x3cd966=users[_0x12fcc8(0x1a6)];else{if(_0x4c5f27[0x0]['language']=='Chinese')var _0x3cd966=users[_0x12fcc8(0x14e)];else{if(_0x4c5f27[0x0][_0x12fcc8(0x1a2)]==_0x12fcc8(0x191))var _0x3cd966=users[_0x12fcc8(0x151)];}}}}}}}_0x5617f9[_0x12fcc8(0x1ce)](_0x12fcc8(0x158),{'success':_0x15c9fc['flash']('success'),'errors':_0x15c9fc['flash'](_0x12fcc8(0x204)),'role':_0x1f1ceb,'profile':_0x4c069c,'master_shop':_0x4c5f27,'user':_0x4b49f9,'language':_0x3cd966});}catch(_0x125dba){console[_0x12fcc8(0x1a1)](_0x125dba);}}),router['post'](a0_0x24b8c1(0x1e1),auth,async(_0x59c35f,_0x1a5b79)=>{const _0x23d96d=a0_0x24b8c1;try{const {name:_0x4e3cce,products:_0x6c6751}=_0x59c35f[_0x23d96d(0x156)],_0x17e284=new brands({'name':_0x4e3cce,'products':_0x6c6751}),_0x39789c=await brands['findOne']({'name':_0x4e3cce});_0x39789c?_0x59c35f['flash'](_0x23d96d(0x204),_0x4e3cce+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x59c35f[_0x23d96d(0x1b4)](_0x23d96d(0x15d),_0x4e3cce+'\x20brand\x20is\x20add\x20successfully');const _0x317b21=await _0x17e284[_0x23d96d(0x1c8)]();_0x1a5b79[_0x23d96d(0x1d7)](_0x23d96d(0x1ec));}catch(_0x1a4f49){console[_0x23d96d(0x1a1)](_0x1a4f49);}}),router[a0_0x24b8c1(0x157)]('/brands/:id',auth,async(_0x4b2058,_0x4fee13)=>{const _0x22d2f7=a0_0x24b8c1;try{const {username:_0xf88108,email:_0x5c098d,role:_0x4620bc}=_0x4b2058['user'],_0xa8506a=_0x4b2058[_0x22d2f7(0x1b3)],_0xf2659b=await profile[_0x22d2f7(0x1dc)]({'email':_0xa8506a[_0x22d2f7(0x1e9)]}),_0x28d96e=await master_shop[_0x22d2f7(0x195)]();console['log'](_0x22d2f7(0x186),_0x28d96e);const _0xed9079=_0x4b2058[_0x22d2f7(0x1aa)]['id'];console[_0x22d2f7(0x1a1)](_0xed9079);const _0x407949=await brands[_0x22d2f7(0x19f)](_0xed9079);if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]==_0x22d2f7(0x18e))var _0x20f36b=users[_0x22d2f7(0x16e)];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]=='Hindi')var _0x20f36b=users[_0x22d2f7(0x175)];else{if(_0x28d96e[0x0]['language']=='German')var _0x20f36b=users[_0x22d2f7(0x1f6)];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]==_0x22d2f7(0x194))var _0x20f36b=users[_0x22d2f7(0x194)];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]==_0x22d2f7(0x1f2))var _0x20f36b=users[_0x22d2f7(0x1f2)];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]=='Portuguese\x20(BR)')var _0x20f36b=users[_0x22d2f7(0x1a6)];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]=='Chinese')var _0x20f36b=users['Chinese'];else{if(_0x28d96e[0x0][_0x22d2f7(0x1a2)]==_0x22d2f7(0x191))var _0x20f36b=users[_0x22d2f7(0x151)];}}}}}}}_0x4fee13['render'](_0x22d2f7(0x158),{'success':_0x4b2058[_0x22d2f7(0x1b4)](_0x22d2f7(0x15d)),'errors':_0x4b2058['flash']('errors'),'role':_0xa8506a,'profile':_0xf2659b,'master_shop':_0x28d96e,'user':_0x407949,'language':_0x20f36b});}catch(_0x1f6c3d){console['log'](_0x1f6c3d);}}),router['post'](a0_0x24b8c1(0x172),auth,async(_0x2f38e5,_0xa5e6a9)=>{const _0xea8868=a0_0x24b8c1;try{const _0x372f90=_0x2f38e5['params']['id'],_0x9a2f09=await brands[_0xea8868(0x209)](_0x372f90,_0x2f38e5[_0xea8868(0x156)]);_0x2f38e5[_0xea8868(0x1b4)](_0xea8868(0x15d),'brand\x20data\x20update\x20successfully'),_0xa5e6a9[_0xea8868(0x1d7)]('/products/brands');}catch(_0xc7c836){console[_0xea8868(0x1a1)](_0xc7c836);}}),router['get'](a0_0x24b8c1(0x1c0),auth,async(_0x18e690,_0x4b7c10)=>{const _0x35934c=a0_0x24b8c1;try{const _0x27a570=_0x18e690['params']['id'],_0x5d4a48=await brands[_0x35934c(0x177)](_0x27a570);_0x18e690[_0x35934c(0x1b4)](_0x35934c(0x15d),_0x35934c(0x1de)),_0x4b7c10[_0x35934c(0x1d7)](_0x35934c(0x1ec));}catch(_0x1d1b9d){console['log'](_0x1d1b9d);}}),router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x1d4),auth,async(_0x2d9e96,_0x4e24e4)=>{const _0x444908=a0_0x24b8c1;try{const {username:_0x124c25,email:_0x80706b,role:_0x25b04b}=_0x2d9e96['user'],_0x243735=_0x2d9e96[_0x444908(0x1b3)],_0x11412d=await profile['findOne']({'email':_0x243735[_0x444908(0x1e9)]}),_0x1af14b=await master_shop['find']();console[_0x444908(0x1a1)]('master',_0x1af14b);const _0x1829fe=await units['find']();if(_0x1af14b[0x0][_0x444908(0x1a2)]==_0x444908(0x18e))var _0x4f9659=users['English'];else{if(_0x1af14b[0x0][_0x444908(0x1a2)]==_0x444908(0x175))var _0x4f9659=users[_0x444908(0x175)];else{if(_0x1af14b[0x0]['language']==_0x444908(0x1f6))var _0x4f9659=users[_0x444908(0x1f6)];else{if(_0x1af14b[0x0][_0x444908(0x1a2)]=='Spanish')var _0x4f9659=users[_0x444908(0x194)];else{if(_0x1af14b[0x0][_0x444908(0x1a2)]==_0x444908(0x1f2))var _0x4f9659=users['French'];else{if(_0x1af14b[0x0]['language']==_0x444908(0x1c5))var _0x4f9659=users['Portuguese'];else{if(_0x1af14b[0x0][_0x444908(0x1a2)]==_0x444908(0x14e))var _0x4f9659=users[_0x444908(0x14e)];else{if(_0x1af14b[0x0]['language']==_0x444908(0x191))var _0x4f9659=users[_0x444908(0x151)];}}}}}}}_0x4e24e4[_0x444908(0x1ce)](_0x444908(0x1a3),{'success':_0x2d9e96[_0x444908(0x1b4)](_0x444908(0x15d)),'errors':_0x2d9e96[_0x444908(0x1b4)](_0x444908(0x204)),'role':_0x243735,'profile':_0x11412d,'master_shop':_0x1af14b,'user':_0x1829fe,'language':_0x4f9659});}catch(_0x20b198){console[_0x444908(0x1a1)](_0x20b198);}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1d4),auth,async(_0x492f26,_0x5d73e3)=>{const _0x387781=a0_0x24b8c1;try{const {name:_0x552098,secondary_unit:_0x1ff2a2,products:_0x2d7e7b}=_0x492f26['body'],_0x255edc=new units({'name':_0x552098,'secondary_unit':_0x1ff2a2,'products':_0x2d7e7b}),_0x276715=await units[_0x387781(0x1dc)]({'name':_0x552098});_0x276715?_0x492f26[_0x387781(0x1b4)]('errors',_0x552098+_0x387781(0x192)):_0x492f26[_0x387781(0x1b4)](_0x387781(0x15d),_0x552098+'\x20unit\x20is\x20add\x20successfully');const _0x34bed7=await _0x255edc[_0x387781(0x1c8)]();_0x5d73e3[_0x387781(0x1d7)](_0x387781(0x1f4));}catch(_0x5222be){console[_0x387781(0x1a1)](_0x5222be);}}),router['get'](a0_0x24b8c1(0x1cb),auth,async(_0x3f7b7b,_0x3d1fe7)=>{const _0x5742d1=a0_0x24b8c1;try{const {username:_0x2ec275,email:_0xa37da0,role:_0x5b7433}=_0x3f7b7b[_0x5742d1(0x1b3)],_0x1ae0ac=_0x3f7b7b[_0x5742d1(0x1b3)],_0x1f643f=await profile[_0x5742d1(0x1dc)]({'email':_0x1ae0ac[_0x5742d1(0x1e9)]}),_0xfd9b06=await master_shop[_0x5742d1(0x195)]();console[_0x5742d1(0x1a1)](_0x5742d1(0x186),_0xfd9b06);const _0x55e7fc=_0x3f7b7b['params']['id'],_0x6b7c05=await units[_0x5742d1(0x19f)](_0x55e7fc);if(_0xfd9b06[0x0][_0x5742d1(0x1a2)]==_0x5742d1(0x18e))var _0x468fd8=users[_0x5742d1(0x16e)];else{if(_0xfd9b06[0x0][_0x5742d1(0x1a2)]==_0x5742d1(0x175))var _0x468fd8=users[_0x5742d1(0x175)];else{if(_0xfd9b06[0x0]['language']==_0x5742d1(0x1f6))var _0x468fd8=users[_0x5742d1(0x1f6)];else{if(_0xfd9b06[0x0][_0x5742d1(0x1a2)]==_0x5742d1(0x194))var _0x468fd8=users[_0x5742d1(0x194)];else{if(_0xfd9b06[0x0][_0x5742d1(0x1a2)]=='French')var _0x468fd8=users[_0x5742d1(0x1f2)];else{if(_0xfd9b06[0x0]['language']==_0x5742d1(0x1c5))var _0x468fd8=users[_0x5742d1(0x1a6)];else{if(_0xfd9b06[0x0][_0x5742d1(0x1a2)]==_0x5742d1(0x14e))var _0x468fd8=users['Chinese'];else{if(_0xfd9b06[0x0]['language']=='Arabic\x20(ae)')var _0x468fd8=users[_0x5742d1(0x151)];}}}}}}}_0x3d1fe7['render']('units',{'success':_0x3f7b7b[_0x5742d1(0x1b4)](_0x5742d1(0x15d)),'errors':_0x3f7b7b[_0x5742d1(0x1b4)](_0x5742d1(0x204)),'role':_0x1ae0ac,'profile':_0x1f643f,'master_shop':_0xfd9b06,'user':_0x6b7c05,'language':_0x468fd8});}catch(_0x2f34ec){console['log'](_0x2f34ec);}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1cb),auth,async(_0x20eb04,_0x3e181a)=>{const _0x1e24bb=a0_0x24b8c1;try{const _0xd5e8d5=_0x20eb04[_0x1e24bb(0x1aa)]['id'],_0x1353b3=await units[_0x1e24bb(0x209)](_0xd5e8d5,_0x20eb04[_0x1e24bb(0x156)]);_0x20eb04[_0x1e24bb(0x1b4)]('success',_0x1e24bb(0x1cd)),_0x3e181a[_0x1e24bb(0x1d7)](_0x1e24bb(0x1f4));}catch(_0x52b27a){console[_0x1e24bb(0x1a1)](_0x52b27a);}}),router['get'](a0_0x24b8c1(0x1a0),auth,async(_0x55c98e,_0x4d119b)=>{const _0x2fb37c=a0_0x24b8c1;try{const _0x43f9fe=_0x55c98e[_0x2fb37c(0x1aa)]['id'],_0x4edd8a=await units[_0x2fb37c(0x177)](_0x43f9fe);_0x55c98e[_0x2fb37c(0x1b4)](_0x2fb37c(0x15d),_0x2fb37c(0x1f5)),_0x4d119b['redirect'](_0x2fb37c(0x1f4));}catch(_0x4060a1){console['log'](_0x4060a1);}});const storage=multer[a0_0x24b8c1(0x18b)]({'destination':(_0x533fe7,_0x3513f2,_0x8563dd)=>{_0x8563dd(null,'public/upload');},'filename':(_0x25bde8,_0x3ae8be,_0x19c5d7)=>{const _0x1949da=a0_0x24b8c1;_0x19c5d7(null,Date[_0x1949da(0x170)]()+_0x3ae8be[_0x1949da(0x1ba)]);}}),upload=multer({'storage':storage});router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x1e7),auth,async(_0x2e8d73,_0x52ec74)=>{const _0x5282d5=a0_0x24b8c1;try{const {username:_0x17b888,email:_0x3aa797,role:_0x2d920}=_0x2e8d73[_0x5282d5(0x1b3)],_0x25b35f=_0x2e8d73[_0x5282d5(0x1b3)],_0x32e20c=await profile['findOne']({'email':_0x25b35f[_0x5282d5(0x1e9)]}),_0x331ddd={'year':_0x5282d5(0x188),'month':'long','day':_0x5282d5(0x188)},_0x1023a5=await master_shop[_0x5282d5(0x195)]();console[_0x5282d5(0x1a1)](_0x5282d5(0x1d8),_0x1023a5);const _0x27222f=await product[_0x5282d5(0x195)]();console[_0x5282d5(0x1a1)](_0x5282d5(0x174),_0x27222f);const _0x3e323a=await warehouse['aggregate']([{'$unwind':_0x5282d5(0x193)},{'$lookup':{'from':_0x5282d5(0x167),'localField':_0x5282d5(0x202),'foreignField':_0x5282d5(0x1b8),'as':_0x5282d5(0x161)}},{'$unwind':'$product_docs'},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x5282d5(0x19a)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x5282d5(0x190)}}}]);console[_0x5282d5(0x1a1)]('Products\x20warehouse_data',_0x3e323a),_0x3e323a[_0x5282d5(0x1bd)](_0x5270f4=>{const _0x2e6daa=_0x5282d5,_0xcce097=_0x27222f[_0x2e6daa(0x1df)](_0x5bd43d=>{const _0x32bd5e=_0x2e6daa;_0x5bd43d[_0x32bd5e(0x1b8)]==_0x5270f4[_0x32bd5e(0x183)]&&(_0x5bd43d['stock']=parseInt(_0x5bd43d[_0x32bd5e(0x18f)])+parseInt(_0x5270f4[_0x32bd5e(0x1c4)]));});}),console[_0x5282d5(0x1a1)]('Products\x20find_data',_0x27222f);if(_0x1023a5[0x0]['language']==_0x5282d5(0x18e))var _0x10764f=users['English'];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]==_0x5282d5(0x175))var _0x10764f=users['Hindi'];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]==_0x5282d5(0x1f6))var _0x10764f=users[_0x5282d5(0x1f6)];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]==_0x5282d5(0x194))var _0x10764f=users[_0x5282d5(0x194)];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]==_0x5282d5(0x1f2))var _0x10764f=users[_0x5282d5(0x1f2)];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]=='Portuguese\x20(BR)')var _0x10764f=users[_0x5282d5(0x1a6)];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]=='Chinese')var _0x10764f=users['Chinese'];else{if(_0x1023a5[0x0][_0x5282d5(0x1a2)]=='Arabic\x20(ae)')var _0x10764f=users[_0x5282d5(0x151)];}}}}}}}_0x52ec74[_0x5282d5(0x1ce)]('products',{'success':_0x2e8d73[_0x5282d5(0x1b4)](_0x5282d5(0x15d)),'errors':_0x2e8d73['flash'](_0x5282d5(0x204)),'alldata':_0x27222f,'profile':_0x32e20c,'master_shop':_0x1023a5,'role':_0x25b35f,'product_stock':_0x3e323a,'language':_0x10764f});}catch(_0x2c98bb){console[_0x5282d5(0x1a1)](_0x2c98bb);}}),router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x15f),auth,async(_0x466fc5,_0x4d8443)=>{const _0x203b93=a0_0x24b8c1;try{const {username:_0x51bdb9,email:_0xeddfea,role:_0x281b8d}=_0x466fc5[_0x203b93(0x1b3)],_0x1d6d72=_0x466fc5[_0x203b93(0x1b3)],_0x19889e=await profile[_0x203b93(0x1dc)]({'email':_0x1d6d72[_0x203b93(0x1e9)]}),_0x5e967a=await master_shop[_0x203b93(0x195)]();console['log'](_0x203b93(0x186),_0x5e967a);const _0x7f65be=await categories[_0x203b93(0x195)]({}),_0x185573=await brands['find']({}),_0x580a96=await units[_0x203b93(0x195)]({}),_0x4a36fc=await warehouse[_0x203b93(0x195)]({'status':_0x203b93(0x17c)});if(_0x5e967a[0x0][_0x203b93(0x1a2)]=='English\x20(US)')var _0x58217c=users[_0x203b93(0x16e)];else{if(_0x5e967a[0x0][_0x203b93(0x1a2)]=='Hindi')var _0x58217c=users[_0x203b93(0x175)];else{if(_0x5e967a[0x0][_0x203b93(0x1a2)]==_0x203b93(0x1f6))var _0x58217c=users[_0x203b93(0x1f6)];else{if(_0x5e967a[0x0]['language']==_0x203b93(0x194))var _0x58217c=users[_0x203b93(0x194)];else{if(_0x5e967a[0x0][_0x203b93(0x1a2)]=='French')var _0x58217c=users['French'];else{if(_0x5e967a[0x0][_0x203b93(0x1a2)]==_0x203b93(0x1c5))var _0x58217c=users[_0x203b93(0x1a6)];else{if(_0x5e967a[0x0]['language']=='Chinese')var _0x58217c=users[_0x203b93(0x14e)];else{if(_0x5e967a[0x0][_0x203b93(0x1a2)]==_0x203b93(0x191))var _0x58217c=users[_0x203b93(0x151)];}}}}}}}_0x4d8443[_0x203b93(0x1ce)]('add_product',{'success':_0x466fc5[_0x203b93(0x1b4)]('success'),'errors':_0x466fc5[_0x203b93(0x1b4)](_0x203b93(0x204)),'role':_0x1d6d72,'profile':_0x19889e,'categories':_0x7f65be,'brands':_0x185573,'master_shop':_0x5e967a,'units':_0x580a96,'language':_0x58217c,'find_data':_0x4a36fc});}catch(_0x2e6929){console[_0x203b93(0x1a1)](_0x2e6929);}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x15f),auth,upload[a0_0x24b8c1(0x1af)]('image'),async(_0x583e76,_0x402d72)=>{const _0x517d81=a0_0x24b8c1;try{const {name:_0x58e821,category:_0x426a52,brand:_0x2cd900,unit:_0x3dc459,alertquantity:_0x435904,stock:_0x18aee5,product_code:_0x1f8a60,warehouse:_0x2556cc,primary_ItemCode:_0x4f91a2,second_ItemCode:_0x1e7577,second_unit:_0x442452,maxPerUnit:_0x44cb74,MaxPerProduct:_0x518334}=_0x583e76[_0x517d81(0x156)],_0x3de0e3=_0x583e76[_0x517d81(0x178)]?.[_0x517d81(0x15e)]||_0x517d81(0x1f0),_0x2e72ae=new product({'image':_0x3de0e3,'name':_0x58e821,'category':_0x426a52,'brand':_0x2cd900,'unit':_0x3dc459,'alertquantity':_0x435904,'stock':_0x18aee5,'product_code':_0x1f8a60,'warehouse':_0x2556cc,'primary_code':_0x4f91a2,'secondary_code':_0x1e7577,'second_unit':_0x442452,'maxStocks':_0x518334,'maxProdPerUnit':_0x44cb74}),_0xa5c41c=await _0x2e72ae[_0x517d81(0x1c8)](),_0x33474b=await categories[_0x517d81(0x1dc)]({'name':_0x426a52});_0x33474b[_0x517d81(0x167)]=parseInt(_0x33474b['products'])+0x1,await _0x33474b[_0x517d81(0x1c8)]();const _0x36e09d=await brands['findOne']({'name':_0x2cd900});_0x36e09d[_0x517d81(0x167)]=parseInt(_0x36e09d[_0x517d81(0x167)])+0x1,await _0x36e09d[_0x517d81(0x1c8)]();const _0x444936=await units[_0x517d81(0x1dc)]({'name':_0x3dc459});_0x444936[_0x517d81(0x167)]=parseInt(_0x444936[_0x517d81(0x167)])+0x1,await _0x444936[_0x517d81(0x1c8)](),_0x583e76[_0x517d81(0x1b4)](_0x517d81(0x15d),_0x517d81(0x14c)),_0x402d72[_0x517d81(0x1d7)](_0x517d81(0x1b1));}catch(_0x118a6a){console[_0x517d81(0x1a1)](_0x118a6a);}}),router['get'](a0_0x24b8c1(0x1e2),auth,async(_0x947ca1,_0x48cad1)=>{const _0x176feb=a0_0x24b8c1;try{const {username:_0x595b7d,email:_0x46bdde,role:_0x38cb71}=_0x947ca1[_0x176feb(0x1b3)],_0x386474=_0x947ca1[_0x176feb(0x1b3)],_0x47c5ab=await profile['findOne']({'email':_0x386474['email']}),_0x49acc5=await master_shop[_0x176feb(0x195)]();console[_0x176feb(0x1a1)](_0x176feb(0x165),_0x49acc5);const _0x591ebf=_0x947ca1[_0x176feb(0x1aa)]['id'],_0x3fbd45=await product[_0x176feb(0x19f)](_0x591ebf),_0x51e67b=await categories[_0x176feb(0x195)]({}),_0x11cbc2=await brands['find']({}),_0x5a3ecf=await units['find']({}),_0x5698cc=await warehouse[_0x176feb(0x195)]({'status':_0x176feb(0x17c)}),_0x9359f7=await units[_0x176feb(0x18a)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x176feb(0x205)}}}]);if(_0x49acc5[0x0][_0x176feb(0x1a2)]==_0x176feb(0x18e))var _0x416bdf=users['English'];else{if(_0x49acc5[0x0]['language']==_0x176feb(0x175))var _0x416bdf=users[_0x176feb(0x175)];else{if(_0x49acc5[0x0]['language']==_0x176feb(0x1f6))var _0x416bdf=users['German'];else{if(_0x49acc5[0x0][_0x176feb(0x1a2)]==_0x176feb(0x194))var _0x416bdf=users[_0x176feb(0x194)];else{if(_0x49acc5[0x0][_0x176feb(0x1a2)]==_0x176feb(0x1f2))var _0x416bdf=users[_0x176feb(0x1f2)];else{if(_0x49acc5[0x0][_0x176feb(0x1a2)]=='Portuguese\x20(BR)')var _0x416bdf=users[_0x176feb(0x1a6)];else{if(_0x49acc5[0x0][_0x176feb(0x1a2)]==_0x176feb(0x14e))var _0x416bdf=users[_0x176feb(0x14e)];else{if(_0x49acc5[0x0][_0x176feb(0x1a2)]==_0x176feb(0x191))var _0x416bdf=users[_0x176feb(0x151)];}}}}}}}_0x48cad1[_0x176feb(0x1ce)](_0x176feb(0x16f),{'success':_0x947ca1['flash']('success'),'errors':_0x947ca1[_0x176feb(0x1b4)](_0x176feb(0x204)),'role':_0x386474,'profile':_0x47c5ab,'alldata':_0x3fbd45,'categories':_0x51e67b,'brands':_0x11cbc2,'master_shop':_0x49acc5,'units':_0x5a3ecf,'secondunit':_0x9359f7,'find_data':_0x5698cc,'language':_0x416bdf});}catch(_0x37ef83){console[_0x176feb(0x1a1)](_0x37ef83);}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1e2),auth,upload[a0_0x24b8c1(0x1af)]('image'),async(_0x5e2173,_0x2fdc0a)=>{const _0x67d96f=a0_0x24b8c1;try{console[_0x67d96f(0x1a1)](_0x67d96f(0x1d1));const _0x4da791=_0x5e2173[_0x67d96f(0x1aa)]['id'],_0x488227=await product[_0x67d96f(0x19f)](_0x4da791),{image:_0x5da038,name:_0x55b75c,category:_0x2e642e,brand:_0x56d4b2,sku:_0x5006f4,unit:_0x5376d3,alertquantity:_0x4e8985,product_code:_0x4b471d,warehouse:_0xd62e82,primary_ItemCode:_0x2a7ec6,second_ItemCode:_0x5bbbe6,second_unit:_0x176a3c,maxPerUnit:_0x4f8768,MaxPerProduct:_0x39d25f,prod_catdata:_0x494c93}=_0x5e2173[_0x67d96f(0x156)];_0x5e2173['file']&&(_0x488227[_0x67d96f(0x1e6)]=_0x5e2173[_0x67d96f(0x178)][_0x67d96f(0x15e)]);_0x488227['name']=_0x55b75c,_0x488227[_0x67d96f(0x1dd)]=_0x2e642e,_0x488227[_0x67d96f(0x1d2)]=_0x56d4b2,_0x488227[_0x67d96f(0x1d3)]=_0x5006f4,_0x488227[_0x67d96f(0x14f)]=_0x5376d3,_0x488227[_0x67d96f(0x17b)]=_0x4e8985,_0x488227['product_code']=_0x4b471d,_0x488227[_0x67d96f(0x1e5)]=_0xd62e82,_0x488227[_0x67d96f(0x15a)]=_0x2a7ec6,_0x488227[_0x67d96f(0x1be)]=_0x5bbbe6,_0x488227['secondary_unit']=_0x176a3c,_0x488227[_0x67d96f(0x1e0)]=_0x39d25f,_0x488227[_0x67d96f(0x1f1)]=_0x4f8768,_0x488227[_0x67d96f(0x14d)]=_0x494c93;const _0x505c60=await _0x488227[_0x67d96f(0x1c8)]();console['log'](_0x67d96f(0x1f9),_0x488227),_0x5e2173[_0x67d96f(0x1b4)]('success','product\x20update\x20successfully'),_0x2fdc0a[_0x67d96f(0x1d7)](_0x67d96f(0x1b1));}catch(_0x24b806){console[_0x67d96f(0x1a1)](_0x24b806);}}),router[a0_0x24b8c1(0x157)](a0_0x24b8c1(0x20b),auth,async(_0x4bceae,_0x4a24e7)=>{const _0x972afb=a0_0x24b8c1;try{const {username:_0x388086,email:_0x52cac2,role:_0x56f61d}=_0x4bceae[_0x972afb(0x1b3)],_0x3cfb57=_0x4bceae[_0x972afb(0x1b3)],_0x254b6a=await profile[_0x972afb(0x1dc)]({'email':_0x3cfb57[_0x972afb(0x1e9)]}),_0x563b59=await master_shop[_0x972afb(0x195)]();console[_0x972afb(0x1a1)](_0x972afb(0x1fb),_0x563b59);const _0x252ab8=_0x4bceae[_0x972afb(0x1aa)]['id'],_0x346984=await product[_0x972afb(0x19f)](_0x252ab8);console[_0x972afb(0x1a1)]('barcode\x20user_id',_0x346984);if(_0x563b59[0x0][_0x972afb(0x1a2)]==_0x972afb(0x18e))var _0x5b3230=users[_0x972afb(0x16e)];else{if(_0x563b59[0x0]['language']=='Hindi')var _0x5b3230=users['Hindi'];else{if(_0x563b59[0x0][_0x972afb(0x1a2)]==_0x972afb(0x1f6))var _0x5b3230=users[_0x972afb(0x1f6)];else{if(_0x563b59[0x0][_0x972afb(0x1a2)]==_0x972afb(0x194))var _0x5b3230=users[_0x972afb(0x194)];else{if(_0x563b59[0x0]['language']==_0x972afb(0x1f2))var _0x5b3230=users[_0x972afb(0x1f2)];else{if(_0x563b59[0x0][_0x972afb(0x1a2)]=='Portuguese\x20(BR)')var _0x5b3230=users[_0x972afb(0x1a6)];else{if(_0x563b59[0x0][_0x972afb(0x1a2)]==_0x972afb(0x14e))var _0x5b3230=users['Chinese'];else{if(_0x563b59[0x0][_0x972afb(0x1a2)]==_0x972afb(0x191))var _0x5b3230=users[_0x972afb(0x151)];}}}}}}}_0x4a24e7['render']('product_barcode',{'success':_0x4bceae[_0x972afb(0x1b4)](_0x972afb(0x15d)),'errors':_0x4bceae[_0x972afb(0x1b4)](_0x972afb(0x204)),'role':_0x3cfb57,'profile':_0x254b6a,'alldata':_0x346984,'master_shop':_0x563b59,'language':_0x5b3230});}catch(_0x5c4889){console['log'](_0x5c4889);}}),router['get'](a0_0x24b8c1(0x163),auth,async(_0x3fb7e4,_0x2f12f2)=>{const _0x3d41d3=a0_0x24b8c1;try{const _0x59db7e=new excelJS[(_0x3d41d3(0x1e3))](),_0xc9a368=_0x59db7e[_0x3d41d3(0x16b)](_0x3d41d3(0x1b7));return _0xc9a368[_0x3d41d3(0x153)]=[{'header':'Product_Name','key':_0x3d41d3(0x208),'width':0xa},{'header':'Brands','key':'PBrands','width':0xa},{'header':_0x3d41d3(0x187),'key':_0x3d41d3(0x150),'width':0xa},{'header':_0x3d41d3(0x162),'key':_0x3d41d3(0x1ea),'width':0xa},{'header':'max_number_per_units','key':'MaxperUnits','width':0xa},{'header':_0x3d41d3(0x1c6),'key':_0x3d41d3(0x18c),'width':0xa},{'header':'Secondary_Code','key':_0x3d41d3(0x18c),'width':0xa},{'header':_0x3d41d3(0x1b5),'key':_0x3d41d3(0x18c),'width':0xa},{'header':_0x3d41d3(0x207),'key':'PCat','width':0xa},{'header':_0x3d41d3(0x1a5),'key':'PAlQty','width':0xa},{'header':_0x3d41d3(0x1cc),'key':_0x3d41d3(0x20a),'width':0xa},{'header':'Products_category','key':_0x3d41d3(0x1b6),'width':0xa}],_0x2f12f2[_0x3d41d3(0x1eb)](_0x3d41d3(0x1ae),_0x3d41d3(0x160)),_0x2f12f2[_0x3d41d3(0x1eb)](_0x3d41d3(0x200),_0x3d41d3(0x1fc)),_0x59db7e[_0x3d41d3(0x203)][_0x3d41d3(0x1e8)](_0x2f12f2)[_0x3d41d3(0x16d)](()=>{const _0x3308aa=_0x3d41d3;_0x2f12f2[_0x3308aa(0x19e)](0xc8);});}catch(_0x9e2adc){_0x2f12f2[_0x3d41d3(0x19e)](0x190)[_0x3d41d3(0x1cf)](_0x9e2adc);}});const storage1=multer[a0_0x24b8c1(0x18b)]({'destination':(_0x278ff4,_0x3079e3,_0x3dc0ce)=>{const _0x10ac25=a0_0x24b8c1;_0x3dc0ce(null,_0x10ac25(0x166));},'filename':(_0x50382c,_0xf9bc8e,_0x2ca0cf)=>{const _0x4e7922=a0_0x24b8c1;_0x2ca0cf(null,Date[_0x4e7922(0x170)]()+_0xf9bc8e[_0x4e7922(0x1ba)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x24b8c1(0x17d),auth,uploadMigrate[a0_0x24b8c1(0x1af)](a0_0x24b8c1(0x1d5)),async(_0x4ae219,_0x112a56)=>{const _0x3e421e=a0_0x24b8c1,_0x2f76a8=_0x4ae219[_0x3e421e(0x178)][_0x3e421e(0x15e)],_0x52c450=await xlsx[_0x3e421e(0x181)](_0x3e421e(0x1f7)+_0x2f76a8);let _0xc62ff9=_0x52c450[_0x3e421e(0x1ac)],_0xf40544=xlsx[_0x3e421e(0x196)][_0x3e421e(0x1a8)](_0x52c450[_0x3e421e(0x17f)][_0xc62ff9[0x0]]);for(const _0x21dad2 of _0xf40544){const _0x54e9bd=_0x21dad2[_0x3e421e(0x199)],_0x42f68e=_0x21dad2[_0x3e421e(0x159)],_0x512aae=_0x21dad2[_0x3e421e(0x187)],_0x17dbcf=_0x21dad2[_0x3e421e(0x162)],_0x3aadd3=_0x21dad2[_0x3e421e(0x1b5)],_0x5a45a4=_0x21dad2['Category'],_0x550d22=_0x21dad2[_0x3e421e(0x1a5)],_0x49a341=_0x21dad2[_0x3e421e(0x1c6)],_0x125f35=_0x21dad2[_0x3e421e(0x1b2)],_0x48d15b=_0x21dad2[_0x3e421e(0x1cc)],_0x3fcf64=_0x21dad2[_0x3e421e(0x206)],_0x5469e4=_0x21dad2[_0x3e421e(0x17e)];try{let _0x8e6556=await categories[_0x3e421e(0x1dc)]({'name':_0x5a45a4});if(!_0x8e6556){const _0x2f4f21=new categories({'name':_0x5a45a4,'products':'0'});_0x8e6556=await _0x2f4f21[_0x3e421e(0x1c8)]();}let _0xc9b5e3=await brands[_0x3e421e(0x1dc)]({'name':_0x42f68e});if(!_0xc9b5e3){const _0x2cfae4=new brands({'name':_0x42f68e,'products':'0'});_0xc9b5e3=await _0x2cfae4['save']();}let _0x494099=await units['findOne']({'name':_0x512aae,'secondary_unit':_0x17dbcf});if(!_0x494099){const _0x3ce67e=new units({'name':_0x512aae,'secondary_unit':_0x17dbcf,'products':'0'});_0x494099=await _0x3ce67e[_0x3e421e(0x1c8)]();}const _0x5a18fc=await product[_0x3e421e(0x195)]({'name':_0x54e9bd,'category':_0x8e6556[_0x3e421e(0x1b8)],'brand':_0xc9b5e3[_0x3e421e(0x1b8)],'secondary_unit':_0x494099[_0x3e421e(0x180)],'product_code':_0x3aadd3});console[_0x3e421e(0x1a1)](_0x5a18fc[_0x3e421e(0x1d9)]+_0x3e421e(0x1fe)+_0x8e6556[_0x3e421e(0x1b8)]+_0x3e421e(0x1fe)+_0xc9b5e3[_0x3e421e(0x1b8)]+_0x3e421e(0x1fe)+_0x494099[_0x3e421e(0x180)]+'\x20<>\x20'+_0x3aadd3+_0x3e421e(0x1fe)+_0x54e9bd);if(_0x5a18fc['length']===0x0){const _0x4de51c=new product({'image':_0x3e421e(0x1f0),'name':_0x54e9bd,'category':_0x8e6556[_0x3e421e(0x1b8)],'brand':_0xc9b5e3[_0x3e421e(0x1b8)],'unit':_0x494099[_0x3e421e(0x1b8)],'alertquantity':_0x550d22,'product_code':_0x3aadd3,'secondary_unit':_0x494099[_0x3e421e(0x180)],'primary_code':_0x49a341,'secondary_code':_0x125f35,'maxStocks':_0x48d15b,'maxProdPerUnit':_0x3fcf64,'product_category':_0x5469e4}),_0x25449b=await _0x4de51c[_0x3e421e(0x1c8)]();_0x8e6556[_0x3e421e(0x167)]=parseInt(_0x8e6556[_0x3e421e(0x167)])+0x1,await _0x8e6556[_0x3e421e(0x1c8)](),_0xc9b5e3[_0x3e421e(0x167)]=parseInt(_0xc9b5e3[_0x3e421e(0x167)])+0x1,await _0xc9b5e3[_0x3e421e(0x1c8)](),_0x494099[_0x3e421e(0x167)]=parseInt(_0x494099[_0x3e421e(0x167)])+0x1,await _0x494099[_0x3e421e(0x1c8)](),_0x4ae219[_0x3e421e(0x1b4)](_0x3e421e(0x15d),_0x54e9bd+_0x3e421e(0x198));}else{console['log'](_0x5a18fc[0x0]);const _0x280056=_0x5a18fc[0x0];_0x280056[_0x3e421e(0x1dd)]=_0x8e6556[_0x3e421e(0x1b8)],_0x280056[_0x3e421e(0x1d2)]=_0xc9b5e3[_0x3e421e(0x1b8)],_0x280056[_0x3e421e(0x14f)]=_0x494099['name'],_0x280056['alertquantity']=_0x550d22,_0x280056['product_code']=_0x3aadd3,_0x280056[_0x3e421e(0x180)]=_0x494099['secondary_unit'],_0x280056[_0x3e421e(0x15a)]=_0x49a341,_0x280056['secondary_code']=_0x125f35,_0x280056[_0x3e421e(0x1e0)]=_0x48d15b,_0x280056[_0x3e421e(0x1f1)]=_0x3fcf64,_0x280056[_0x3e421e(0x14d)]=_0x5469e4;const _0x2a734a=await _0x280056[_0x3e421e(0x1c8)]();_0x4ae219[_0x3e421e(0x1b4)](_0x3e421e(0x15d),_0x2a734a['name']+_0x3e421e(0x1c7));}}catch(_0x155205){_0x112a56[_0x3e421e(0x19e)](0x1f4)['json']({'proderror':_0x155205[_0x3e421e(0x1bf)],'aproduct':_0x54e9bd});}}_0x112a56[_0x3e421e(0x1d7)](_0x3e421e(0x1b1));}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x19d),auth,async(_0x87802e,_0xb1751)=>{const _0x51f114=a0_0x24b8c1;try{console[_0x51f114(0x1a1)](_0x87802e['body']);const {data_cateory:_0x37fe2b,datachoose:_0x3106cc}=_0x87802e[_0x51f114(0x156)];var _0x5f395c;if(_0x3106cc==_0x51f114(0x154))_0x5f395c=await product[_0x51f114(0x18a)]([{'$group':{'_id':_0x51f114(0x1a7)}}]);else{if(_0x3106cc==_0x51f114(0x158))_0x5f395c=await product[_0x51f114(0x18a)]([{'$match':{'product_category':_0x37fe2b}},{'$group':{'_id':_0x51f114(0x1b0)}}]);else _0x3106cc==_0x51f114(0x171)&&(_0x5f395c=await product[_0x51f114(0x18a)]([{'$match':{'product_category':_0x37fe2b}},{'$group':{'_id':_0x51f114(0x164)}}]));}_0xb1751[_0x51f114(0x189)](_0x5f395c);}catch(_0x2897a9){_0xb1751[_0x51f114(0x189)]({'message':_0x2897a9[_0x51f114(0x1bf)]});}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1d0),auth,async(_0x20d0c3,_0x1cd555)=>{const _0x48ddff=a0_0x24b8c1;try{const {data_choosing:_0x5cb10,data_selected:_0x4f098d}=_0x20d0c3['body'];var _0x24fcf0;if(_0x5cb10=='prod_categ')_0x24fcf0=await product[_0x48ddff(0x18a)]([{'$match':{'product_category':_0x4f098d}}]);else{if(_0x5cb10=='brands')_0x24fcf0=await product['aggregate']([{'$match':{'brand':_0x4f098d}}]);else _0x5cb10=='categ'&&(_0x24fcf0=await product[_0x48ddff(0x18a)]([{'$match':{'category':_0x4f098d}}]));}_0x1cd555[_0x48ddff(0x189)](_0x24fcf0);}catch(_0x3c877f){_0x1cd555['json']({'message':_0x3c877f['message']});}}),router[a0_0x24b8c1(0x157)]('/print_barcode',auth,async(_0x294f67,_0xcd879)=>{const _0x481d67=a0_0x24b8c1,_0x4b9267=_0x294f67['user'],_0x122922=await profile[_0x481d67(0x1dc)]({'email':_0x4b9267[_0x481d67(0x1e9)]}),_0x4685b3=await master_shop[_0x481d67(0x195)](),_0x40750e=await product[_0x481d67(0x195)]();if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x18e))var _0x4e95d2=users[_0x481d67(0x16e)];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x175))var _0x4e95d2=users[_0x481d67(0x175)];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x1f6))var _0x4e95d2=users[_0x481d67(0x1f6)];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x194))var _0x4e95d2=users['Spanish'];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x1f2))var _0x4e95d2=users['French'];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]==_0x481d67(0x1c5))var _0x4e95d2=users[_0x481d67(0x1a6)];else{if(_0x4685b3[0x0]['language']==_0x481d67(0x14e))var _0x4e95d2=users['Chinese'];else{if(_0x4685b3[0x0][_0x481d67(0x1a2)]=='Arabic\x20(ae)')var _0x4e95d2=users[_0x481d67(0x151)];}}}}}}}_0xcd879[_0x481d67(0x1ce)](_0x481d67(0x1ef),{'success':_0x294f67[_0x481d67(0x1b4)](_0x481d67(0x15d)),'errors':_0x294f67[_0x481d67(0x1b4)](_0x481d67(0x204)),'role':_0x4b9267,'profile':_0x122922,'products':_0x40750e,'master_shop':_0x4685b3,'language':_0x4e95d2});}),router[a0_0x24b8c1(0x173)]('/barcode_data',auth,async(_0x2392f5,_0x3e6050)=>{const _0x51dfe7=a0_0x24b8c1,_0x234205=await product[_0x51dfe7(0x195)]();_0x3e6050['json']({'data':_0x234205});}),router['post']('/barcode_filter',auth,async(_0x4dfe07,_0x109f6c)=>{const _0x3e57f0=a0_0x24b8c1;try{const {dataProdCat:_0x1be96e,dataProdIdentity:_0x3ad276}=_0x4dfe07[_0x3e57f0(0x156)];var _0x42276d;switch(_0x1be96e){case'fg':switch(_0x3ad276){case _0x3e57f0(0x159):_0x42276d=await product['aggregate']([{'$match':{'product_category':_0x3e57f0(0x1ee)}},{'$group':{'_id':_0x3e57f0(0x1b0)}},{'$project':{'brand':_0x3e57f0(0x1ca)}}]);break;case _0x3e57f0(0x207):_0x42276d=await product[_0x3e57f0(0x18a)]([{'$match':{'product_category':_0x3e57f0(0x1ee)}},{'$group':{'_id':_0x3e57f0(0x164)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x3ad276){case'Brands':_0x42276d=await product[_0x3e57f0(0x18a)]([{'$match':{'product_category':_0x3e57f0(0x16c)}},{'$group':{'_id':_0x3e57f0(0x1b0)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x42276d=await product[_0x3e57f0(0x18a)]([{'$match':{'product_category':_0x3e57f0(0x16c)}},{'$group':{'_id':_0x3e57f0(0x164)}},{'$project':{'category':_0x3e57f0(0x1ca)}}]);break;}break;}_0x109f6c[_0x3e57f0(0x189)](_0x42276d);}catch(_0x4a1261){_0x109f6c[_0x3e57f0(0x189)]({'message':_0x4a1261[_0x3e57f0(0x1bf)]});}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1ff),auth,async(_0x320ec4,_0x59c806)=>{const _0x5085a3=a0_0x24b8c1;try{console[_0x5085a3(0x1a1)](_0x320ec4['body']);const {prod_cat:_0xbdfa26,identity:_0x1ce646,valueData:_0x4a4773,typeofbarcode:_0x5c4929}=_0x320ec4[_0x5085a3(0x156)];let _0x597449;switch(_0xbdfa26){case'fg':if(_0x1ce646==_0x5085a3(0x159))_0x597449=await product[_0x5085a3(0x18a)]([{'$match':{'product_category':_0x5085a3(0x1ee),'brand':_0x4a4773}}]);else _0x1ce646=='Category'&&(_0x597449=await product[_0x5085a3(0x18a)]([{'$match':{'product_category':_0x5085a3(0x1ee),'category':_0x4a4773}}]));break;case'rm':if(_0x1ce646==_0x5085a3(0x159))_0x597449=await product[_0x5085a3(0x18a)]([{'$match':{'product_category':_0x5085a3(0x16c),'brand':_0x4a4773}}]);else _0x1ce646==_0x5085a3(0x207)&&(_0x597449=await product['aggregate']([{'$match':{'product_category':_0x5085a3(0x16c),'category':_0x4a4773}}]));break;}const _0x29c4d1=_0x4a1be9=>_0x4a1be9*0x48,_0x485968={'width':0x3,'height':0x1},_0x325bb6=new PDFDocument({'margin':_0x29c4d1(0.75),'size':[_0x29c4d1(_0x485968[_0x5085a3(0x15b)]),_0x29c4d1(_0x485968['height'])],'bufferPages':!![]}),_0x523f4f=_0x597449[_0x5085a3(0x1d9)];for(let _0x40535e=0x0;_0x40535e<=_0x523f4f;_0x40535e++){if(_0x40535e!=_0x523f4f){const _0x3a61ea=_0x597449[_0x40535e][_0x5085a3(0x1b8)],_0x5595a1=_0x597449[_0x40535e][_0x5085a3(0x15a)],_0x364fb3=_0x597449[_0x40535e][_0x5085a3(0x1be)],_0x187760=_0x597449[_0x40535e]['product_code'];var _0xd10645;switch(_0x5c4929){case'1':_0xd10645=_0x5595a1;break;case'2':_0xd10645=_0x364fb3;break;case'3':_0xd10645=_0x187760;break;}const _0x58f78b={'width':0xd2,'height':0x64},_0x5bfffc={'width':_0x29c4d1(_0x485968[_0x5085a3(0x15b)]),'height':_0x29c4d1(_0x485968[_0x5085a3(0x1f8)])},_0x2f8c3a=new Canvas();JsBarcode(_0x2f8c3a,_0xd10645,{'format':'CODE128','height':_0x58f78b['height'],'displayValue':!![],'text':_0xd10645});const _0x27a47c=_0x2f8c3a['toBuffer'](),_0x40dd21=_0x5bfffc[_0x5085a3(0x15b)]/_0x58f78b[_0x5085a3(0x15b)],_0x1f0d4e=_0x5bfffc['height']/_0x58f78b['height'],_0x19b25e=Math[_0x5085a3(0x185)](_0x40dd21,_0x1f0d4e),_0x4c42bf=_0x58f78b[_0x5085a3(0x15b)]*_0x19b25e,_0x51f295=_0x58f78b[_0x5085a3(0x1f8)]*_0x19b25e,_0x10cd05=(_0x5bfffc[_0x5085a3(0x15b)]-_0x4c42bf)/0x2,_0x1afb41=(_0x5bfffc[_0x5085a3(0x1f8)]-_0x51f295)/0x2;_0x325bb6['image'](_0x27a47c,_0x10cd05,_0x1afb41,{'width':_0x4c42bf,'height':_0x51f295}),_0x40535e!=_0x523f4f&&_0x325bb6['addPage']();}}const _0x2ff6c4=[];_0x325bb6['on'](_0x5085a3(0x16a),_0x2ff6c4[_0x5085a3(0x176)]['bind'](_0x2ff6c4)),_0x325bb6['on'](_0x5085a3(0x17a),()=>{const _0x702c0a=Buffer['concat'](_0x2ff6c4),_0x11f915=_0x702c0a['toString']('base64');_0x59c806['json']({'pdfContent':_0x11f915});}),_0x325bb6[_0x5085a3(0x17a)]();}catch(_0x4fee82){_0x59c806[_0x5085a3(0x189)]({'message':_0x4fee82[_0x5085a3(0x1bf)]});}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x1a9),auth,async(_0xa4f1ee,_0x24d43d)=>{const _0x4ed680=a0_0x24b8c1;try{console[_0x4ed680(0x1a1)](_0xa4f1ee[_0x4ed680(0x156)]);const {prod_cat:_0x104aa0,identity:_0x2a08dd,valueData:_0x180aa5}=_0xa4f1ee['body'];let _0x5b85b5;switch(_0x104aa0){case'fg':if(_0x2a08dd==_0x4ed680(0x159))_0x5b85b5=await product[_0x4ed680(0x18a)]([{'$match':{'product_category':_0x4ed680(0x1ee),'brand':_0x180aa5}}]);else _0x2a08dd==_0x4ed680(0x207)&&(_0x5b85b5=await product[_0x4ed680(0x18a)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x180aa5}}]));break;case'rm':if(_0x2a08dd==_0x4ed680(0x159))_0x5b85b5=await product[_0x4ed680(0x18a)]([{'$match':{'product_category':_0x4ed680(0x16c),'brand':_0x180aa5}}]);else _0x2a08dd==_0x4ed680(0x207)&&(_0x5b85b5=await product['aggregate']([{'$match':{'product_category':_0x4ed680(0x16c),'category':_0x180aa5}}]));break;}_0x24d43d[_0x4ed680(0x189)]({'data':_0x5b85b5});}catch(_0x522bfb){_0x24d43d[_0x4ed680(0x189)]({'message':_0x522bfb[_0x4ed680(0x1bf)]});}}),router[a0_0x24b8c1(0x173)](a0_0x24b8c1(0x182),auth,async(_0x147770,_0x10821f)=>{const _0x335d9e=a0_0x24b8c1;try{const _0x559719=_0x147770[_0x335d9e(0x1aa)]['id'],{copies:_0x403910,typeofbarcode:_0x146bfb}=_0x147770[_0x335d9e(0x156)];var _0x15545e=await product[_0x335d9e(0x19f)](_0x559719);const _0x2abc8b=_0x3999d5=>_0x3999d5*0x48,_0xfb6ce7={'width':0x3,'height':0x1},_0x33a2d8=new PDFDocument({'margin':_0x2abc8b(0.75),'size':[_0x2abc8b(_0xfb6ce7[_0x335d9e(0x15b)]),_0x2abc8b(_0xfb6ce7[_0x335d9e(0x1f8)])],'bufferPages':!![]}),_0x50fe52=_0x403910,_0x47c983=_0x15545e[_0x335d9e(0x1b8)],_0x599182=_0x15545e[_0x335d9e(0x15a)],_0x39b577=_0x15545e[_0x335d9e(0x1be)],_0x346cf5=_0x15545e['product_code'];let _0x14af2d;switch(_0x146bfb){case'1':_0x14af2d=_0x599182;break;case'2':_0x14af2d=_0x39b577;break;case'3':_0x14af2d=_0x346cf5;break;}const _0x454f1c={'width':0xd2,'height':0x64},_0x453f2c={'width':_0x2abc8b(_0xfb6ce7[_0x335d9e(0x15b)]),'height':_0x2abc8b(_0xfb6ce7[_0x335d9e(0x1f8)])};for(let _0x31d336=0x1;_0x31d336<=_0x50fe52;_0x31d336++){const _0x580ab8=new Canvas();JsBarcode(_0x580ab8,_0x14af2d,{'format':_0x335d9e(0x1e4),'height':_0x454f1c[_0x335d9e(0x1f8)],'displayValue':!![],'text':_0x14af2d});const _0x58d8cf=_0x580ab8[_0x335d9e(0x152)](),_0x4e4897=_0x453f2c[_0x335d9e(0x15b)]/_0x454f1c[_0x335d9e(0x15b)],_0x357c51=_0x453f2c[_0x335d9e(0x1f8)]/_0x454f1c['height'],_0x4c97a6=Math['min'](_0x4e4897,_0x357c51),_0x4cec3c=_0x454f1c[_0x335d9e(0x15b)]*_0x4c97a6,_0x39ad2b=_0x454f1c['height']*_0x4c97a6,_0x79b61e=(_0x453f2c[_0x335d9e(0x15b)]-_0x4cec3c)/0x2,_0x21a038=(_0x453f2c[_0x335d9e(0x1f8)]-_0x39ad2b)/0x2;_0x33a2d8[_0x335d9e(0x1e6)](_0x58d8cf,_0x79b61e,_0x21a038,{'width':_0x4cec3c,'height':_0x39ad2b}),_0x31d336!=_0x50fe52&&_0x33a2d8[_0x335d9e(0x1c3)]();}const _0x52d3f0=[];_0x33a2d8['on']('data',_0x52d3f0['push'][_0x335d9e(0x168)](_0x52d3f0)),_0x33a2d8['on'](_0x335d9e(0x17a),()=>{const _0x6720c=_0x335d9e,_0x5d60d2=Buffer['concat'](_0x52d3f0),_0x4ade18=_0x5d60d2[_0x6720c(0x19c)](_0x6720c(0x1bb));_0x10821f[_0x6720c(0x189)]({'pdfContent':_0x4ade18});}),_0x33a2d8[_0x335d9e(0x17a)]();}catch(_0x234d34){_0x10821f[_0x335d9e(0x189)]({'message':_0x234d34['message']});}}),module[a0_0x24b8c1(0x184)]=router;