const a0_0x319ae2=a0_0x6a1b;(function(_0x4bcc3d,_0x57fb89){const _0x1e0276=a0_0x6a1b,_0x26e8cf=_0x4bcc3d();while(!![]){try{const _0x4dcd92=parseInt(_0x1e0276(0x16b))/0x1+-parseInt(_0x1e0276(0x152))/0x2*(-parseInt(_0x1e0276(0x174))/0x3)+parseInt(_0x1e0276(0x140))/0x4*(-parseInt(_0x1e0276(0x1a1))/0x5)+-parseInt(_0x1e0276(0x159))/0x6+-parseInt(_0x1e0276(0x173))/0x7*(-parseInt(_0x1e0276(0x17d))/0x8)+-parseInt(_0x1e0276(0xed))/0x9+-parseInt(_0x1e0276(0x165))/0xa;if(_0x4dcd92===_0x57fb89)break;else _0x26e8cf['push'](_0x26e8cf['shift']());}catch(_0x5d9dff){_0x26e8cf['push'](_0x26e8cf['shift']());}}}(a0_0x2346,0x48bfd));const express=require(a0_0x319ae2(0x18e)),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x319ae2(0x146)),auth=require(a0_0x319ae2(0x11d)),users=require('../public/language/languages.json'),excelJS=require(a0_0x319ae2(0x192)),xlsx=require(a0_0x319ae2(0xf3)),JsBarcode=require(a0_0x319ae2(0x18a)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x319ae2(0xf8));function a0_0x2346(){const _0x1189bc=['product_stock','203384OnWPbJ','/units','end','json','max_number_per_units','master','../models/all_models','message','now','Maximum_Stocks','success','image','migrate_product_fule','Products_category','defaultProduct.avif','/brands/:id','\x20added\x20successfully','unit','1109904ibEdcA','Content-Disposition','Secondary_Code','Content-Type','$product_category','status','Sheets','3535890yXuaWT','edit\x20Product\x20master','public/upload','/products_export_migrate_file','PBrands','edit_product','products','$product_details.product_name','CODE128','PName','$category','Enabled','1673430UGmdIP','brand\x20data\x20delete\x20successfully','findById','unit\x20data\x20delete\x20successfully','$secondary_unit','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','474635LAmyrV','ProductCode','body','English\x20(US)','Alert_QTY','render','post','Prod_Cat','8834LJjnes','3sscTiL','/products/categories','log','numeric','data','bind','send','/print_barcode','errors','3296qbYAgo','Finished\x20Goods','categ','unit\x20data\x20update\x20successfully','setHeader','exports','Portuguese','secondary_code','Arabic\x20(ae)','/products/brands','maxProdPerUnit','base64','toString','jsbarcode','Products','MaxperUnits','product_barcode_products','express','barcode\x20user_id','height','categories_edit','exceljs','categories','diskStorage','product_category','forEach','hello','Spanish','maxStocks','\x20brand\x20is\x20add\x20successfully','PSecondaryUnits','get','/view/add_products','secondary_unit','toBuffer','Products\x20find_data','40BwoKDk','primary_code','Brands','readFile','write','PCat','Secondary_Units','Portuguese\x20(BR)','brands','SheetNames','Product_Code','min','\x20categories\x20is\x20add\x20successfully','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','product_barcode','sku','findOne','save','793116svWGNk','warehouse','product\x20add\x20successfully','Hindi','Raw\x20Materials','/view/:id','xlsx','Units','prod_categ','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/barcode_data','pdfkit-table','product_code','file','/print_barcode_single/:id','/units/:id','Chinese','Category','product\x20update\x20successfully','/products/view','_id','/brands','aggregate','flash','/brands/delete/:id','/products_import_migrate_file','length','language','user','Arabic','Products\x20master','long','$product_docs','findByIdAndDelete','/products/units','/categories/:id','English','single','alertquantity','columns','originalname','$product_details','\x20unit\x20is\x20add\x20successfully','email','PAlQty','findByIdAndUpdate','attachment;\x20filename=Product_Migration_File.xlsx','then','../middleware/auth','public/Migration/','filename','units','$product_stock','stock','brand','public/Migration','French','Products\x20warehouse_data','/filter_product','params','$_id','\x20Edit\x20Successfully','name','width','category','Primary_Code','/print_barcode_filter_search/','\x20<>\x20','Product_Name','brand\x20data\x20update\x20successfully','product_docs','push','redirect','product_details.product_name','/barcode_filter','concat','$brand','find','Workbook','German','/categories','/view'];a0_0x2346=function(){return _0x1189bc;};return a0_0x2346();}function a0_0x6a1b(_0x55bfce,_0x513a59){const _0x23466d=a0_0x2346();return a0_0x6a1b=function(_0x6a1ba3,_0x349548){_0x6a1ba3=_0x6a1ba3-0xe4;let _0x46c1b4=_0x23466d[_0x6a1ba3];return _0x46c1b4;},a0_0x6a1b(_0x55bfce,_0x513a59);}router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x13d),auth,async(_0x5a75a6,_0x3e5762)=>{const _0x21d986=a0_0x319ae2;try{const {username:_0x325e21,email:_0x5211ae,role:_0x5eef6d}=_0x5a75a6['user'],_0x5d4a52=_0x5a75a6[_0x21d986(0x109)],_0x1afca1=await profile[_0x21d986(0xeb)]({'email':_0x5d4a52['email']}),_0x3fdefe=await master_shop['find']();console[_0x21d986(0x176)](_0x21d986(0x145),_0x3fdefe);const _0x428f70=await categories[_0x21d986(0x13a)]();if(_0x3fdefe[0x0][_0x21d986(0x108)]==_0x21d986(0x16e))var _0xcc8bb7=users[_0x21d986(0x111)];else{if(_0x3fdefe[0x0][_0x21d986(0x108)]==_0x21d986(0xf0))var _0xcc8bb7=users[_0x21d986(0xf0)];else{if(_0x3fdefe[0x0][_0x21d986(0x108)]==_0x21d986(0x13c))var _0xcc8bb7=users[_0x21d986(0x13c)];else{if(_0x3fdefe[0x0][_0x21d986(0x108)]==_0x21d986(0x198))var _0xcc8bb7=users[_0x21d986(0x198)];else{if(_0x3fdefe[0x0][_0x21d986(0x108)]==_0x21d986(0x125))var _0xcc8bb7=users[_0x21d986(0x125)];else{if(_0x3fdefe[0x0]['language']=='Portuguese\x20(BR)')var _0xcc8bb7=users[_0x21d986(0x183)];else{if(_0x3fdefe[0x0][_0x21d986(0x108)]=='Chinese')var _0xcc8bb7=users[_0x21d986(0xfd)];else{if(_0x3fdefe[0x0]['language']==_0x21d986(0x185))var _0xcc8bb7=users[_0x21d986(0x10a)];}}}}}}}_0x3e5762['render'](_0x21d986(0x193),{'success':_0x5a75a6[_0x21d986(0x104)](_0x21d986(0x14a)),'errors':_0x5a75a6['flash']('errors'),'role':_0x5d4a52,'profile':_0x1afca1,'user':_0x428f70,'master_shop':_0x3fdefe,'language':_0xcc8bb7});}catch(_0xd0a8fc){console[_0x21d986(0x176)](_0xd0a8fc);}}),router[a0_0x319ae2(0x171)]('/categories',auth,async(_0x2e69d0,_0x1f4f7c)=>{const _0x26700a=a0_0x319ae2;try{const {name:_0x2d2ca4,products:_0x15a2d1}=_0x2e69d0[_0x26700a(0x16d)],_0x4d2ecd=new categories({'name':_0x2d2ca4,'products':_0x15a2d1}),_0x4bb7a8=await categories[_0x26700a(0xeb)]({'name':_0x2d2ca4});_0x4bb7a8?_0x2e69d0[_0x26700a(0x104)](_0x26700a(0x17c),_0x2d2ca4+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x2e69d0[_0x26700a(0x104)](_0x26700a(0x14a),_0x2d2ca4+_0x26700a(0xe7));const _0x1c196e=await _0x4d2ecd[_0x26700a(0xec)]();_0x1f4f7c['redirect'](_0x26700a(0x175));}catch(_0x59a9e8){console[_0x26700a(0x176)](_0x59a9e8);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x110),auth,async(_0x42b1d8,_0x6ef8fc)=>{const _0x1f3a35=a0_0x319ae2;try{const {username:_0x19b737,email:_0x46957c,role:_0x3cf6e3}=_0x42b1d8[_0x1f3a35(0x109)],_0x52a3bf=_0x42b1d8[_0x1f3a35(0x109)],_0x5005aa=await profile[_0x1f3a35(0xeb)]({'email':_0x52a3bf['email']}),_0xaef847=await master_shop[_0x1f3a35(0x13a)]();console[_0x1f3a35(0x176)](_0x1f3a35(0x145),_0xaef847);const _0x46c27c=_0x42b1d8[_0x1f3a35(0x128)]['id'];console[_0x1f3a35(0x176)](_0x46c27c);const _0x4e728c=await categories[_0x1f3a35(0x167)](_0x46c27c);if(_0xaef847[0x0][_0x1f3a35(0x108)]==_0x1f3a35(0x16e))var _0x38e170=users[_0x1f3a35(0x111)];else{if(_0xaef847[0x0][_0x1f3a35(0x108)]=='Hindi')var _0x38e170=users[_0x1f3a35(0xf0)];else{if(_0xaef847[0x0]['language']==_0x1f3a35(0x13c))var _0x38e170=users[_0x1f3a35(0x13c)];else{if(_0xaef847[0x0]['language']==_0x1f3a35(0x198))var _0x38e170=users[_0x1f3a35(0x198)];else{if(_0xaef847[0x0][_0x1f3a35(0x108)]==_0x1f3a35(0x125))var _0x38e170=users['French'];else{if(_0xaef847[0x0]['language']==_0x1f3a35(0x1a8))var _0x38e170=users[_0x1f3a35(0x183)];else{if(_0xaef847[0x0][_0x1f3a35(0x108)]==_0x1f3a35(0xfd))var _0x38e170=users[_0x1f3a35(0xfd)];else{if(_0xaef847[0x0][_0x1f3a35(0x108)]==_0x1f3a35(0x185))var _0x38e170=users[_0x1f3a35(0x10a)];}}}}}}}_0x6ef8fc[_0x1f3a35(0x170)](_0x1f3a35(0x193),{'success':_0x42b1d8[_0x1f3a35(0x104)](_0x1f3a35(0x14a)),'errors':_0x42b1d8[_0x1f3a35(0x104)](_0x1f3a35(0x17c)),'role':_0x52a3bf,'profile':_0x5005aa,'master_shop':_0xaef847,'user':_0x4e728c,'language':_0x38e170});}catch(_0x52b75b){console[_0x1f3a35(0x176)](_0x52b75b);}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x110),auth,async(_0x507db2,_0xc47d1c)=>{const _0x94a523=a0_0x319ae2;try{const _0x1950c9=_0x507db2['params']['id'],_0x209e72=await categories[_0x94a523(0x11a)](_0x1950c9,_0x507db2['body']);_0x507db2['flash'](_0x94a523(0x14a),''+users[_0x94a523(0x191)]),_0xc47d1c[_0x94a523(0x135)](_0x94a523(0x175));}catch(_0x222679){console[_0x94a523(0x176)](_0x222679);}}),router[a0_0x319ae2(0x19c)]('/categories/delete/:id',auth,async(_0x3807ad,_0x322551)=>{const _0x14a6c4=a0_0x319ae2;try{const _0x178bc2=_0x3807ad[_0x14a6c4(0x128)]['id'],_0x13e99a=await categories[_0x14a6c4(0x10e)](_0x178bc2);_0x3807ad['flash'](_0x14a6c4(0x14a),'categories\x20data\x20delete\x20successfully'),_0x322551[_0x14a6c4(0x135)](_0x14a6c4(0x175));}catch(_0x1e575a){console[_0x14a6c4(0x176)](_0x1e575a);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x102),auth,async(_0x53b1bd,_0x13820a)=>{const _0x2875ac=a0_0x319ae2;try{const {username:_0x56f172,email:_0x5a018a,role:_0x1fd2fb}=_0x53b1bd[_0x2875ac(0x109)],_0x5bb1a3=_0x53b1bd[_0x2875ac(0x109)],_0xdd7f5a=await profile[_0x2875ac(0xeb)]({'email':_0x5bb1a3['email']}),_0x28cfbe=await master_shop[_0x2875ac(0x13a)]();console['log']('master',_0x28cfbe);const _0x5ade67=await brands[_0x2875ac(0x13a)]();if(_0x28cfbe[0x0][_0x2875ac(0x108)]==_0x2875ac(0x16e))var _0x9b5b7f=users[_0x2875ac(0x111)];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]==_0x2875ac(0xf0))var _0x9b5b7f=users[_0x2875ac(0xf0)];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]==_0x2875ac(0x13c))var _0x9b5b7f=users['German'];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]==_0x2875ac(0x198))var _0x9b5b7f=users['Spanish'];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]=='French')var _0x9b5b7f=users[_0x2875ac(0x125)];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]==_0x2875ac(0x1a8))var _0x9b5b7f=users[_0x2875ac(0x183)];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]=='Chinese')var _0x9b5b7f=users[_0x2875ac(0xfd)];else{if(_0x28cfbe[0x0][_0x2875ac(0x108)]=='Arabic\x20(ae)')var _0x9b5b7f=users[_0x2875ac(0x10a)];}}}}}}}_0x13820a[_0x2875ac(0x170)](_0x2875ac(0x1a9),{'success':_0x53b1bd[_0x2875ac(0x104)](_0x2875ac(0x14a)),'errors':_0x53b1bd['flash'](_0x2875ac(0x17c)),'role':_0x5bb1a3,'profile':_0xdd7f5a,'master_shop':_0x28cfbe,'user':_0x5ade67,'language':_0x9b5b7f});}catch(_0x48d15c){console['log'](_0x48d15c);}}),router['post'](a0_0x319ae2(0x102),auth,async(_0xeb7a4a,_0x58629c)=>{const _0x526d3a=a0_0x319ae2;try{const {name:_0x52e24f,products:_0x45ba15}=_0xeb7a4a[_0x526d3a(0x16d)],_0x53de58=new brands({'name':_0x52e24f,'products':_0x45ba15}),_0x335595=await brands[_0x526d3a(0xeb)]({'name':_0x52e24f});_0x335595?_0xeb7a4a[_0x526d3a(0x104)](_0x526d3a(0x17c),_0x52e24f+_0x526d3a(0xf6)):_0xeb7a4a['flash']('success',_0x52e24f+_0x526d3a(0x19a));const _0xb9e136=await _0x53de58[_0x526d3a(0xec)]();_0x58629c[_0x526d3a(0x135)]('/products/brands');}catch(_0x321bed){console[_0x526d3a(0x176)](_0x321bed);}}),router[a0_0x319ae2(0x19c)]('/brands/:id',auth,async(_0x476c39,_0x397cd9)=>{const _0x1a0d81=a0_0x319ae2;try{const {username:_0x1497aa,email:_0xa34d25,role:_0x44d0bd}=_0x476c39[_0x1a0d81(0x109)],_0xefbaf7=_0x476c39[_0x1a0d81(0x109)],_0x4cdbba=await profile[_0x1a0d81(0xeb)]({'email':_0xefbaf7[_0x1a0d81(0x118)]}),_0xa44c7c=await master_shop[_0x1a0d81(0x13a)]();console[_0x1a0d81(0x176)]('master',_0xa44c7c);const _0xb9f8e6=_0x476c39[_0x1a0d81(0x128)]['id'];console[_0x1a0d81(0x176)](_0xb9f8e6);const _0xb7353c=await brands[_0x1a0d81(0x167)](_0xb9f8e6);if(_0xa44c7c[0x0][_0x1a0d81(0x108)]=='English\x20(US)')var _0x24410d=users[_0x1a0d81(0x111)];else{if(_0xa44c7c[0x0][_0x1a0d81(0x108)]==_0x1a0d81(0xf0))var _0x24410d=users[_0x1a0d81(0xf0)];else{if(_0xa44c7c[0x0][_0x1a0d81(0x108)]==_0x1a0d81(0x13c))var _0x24410d=users['German'];else{if(_0xa44c7c[0x0]['language']==_0x1a0d81(0x198))var _0x24410d=users[_0x1a0d81(0x198)];else{if(_0xa44c7c[0x0][_0x1a0d81(0x108)]==_0x1a0d81(0x125))var _0x24410d=users[_0x1a0d81(0x125)];else{if(_0xa44c7c[0x0][_0x1a0d81(0x108)]=='Portuguese\x20(BR)')var _0x24410d=users['Portuguese'];else{if(_0xa44c7c[0x0]['language']=='Chinese')var _0x24410d=users[_0x1a0d81(0xfd)];else{if(_0xa44c7c[0x0][_0x1a0d81(0x108)]==_0x1a0d81(0x185))var _0x24410d=users[_0x1a0d81(0x10a)];}}}}}}}_0x397cd9['render']('brands',{'success':_0x476c39['flash'](_0x1a0d81(0x14a)),'errors':_0x476c39['flash'](_0x1a0d81(0x17c)),'role':_0xefbaf7,'profile':_0x4cdbba,'master_shop':_0xa44c7c,'user':_0xb7353c,'language':_0x24410d});}catch(_0x58734e){console[_0x1a0d81(0x176)](_0x58734e);}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x14f),auth,async(_0x4160fc,_0x5cb857)=>{const _0x30da29=a0_0x319ae2;try{const _0x27e652=_0x4160fc['params']['id'],_0x4c75fc=await brands[_0x30da29(0x11a)](_0x27e652,_0x4160fc[_0x30da29(0x16d)]);_0x4160fc[_0x30da29(0x104)]('success',_0x30da29(0x132)),_0x5cb857[_0x30da29(0x135)](_0x30da29(0x186));}catch(_0x399d54){console['log'](_0x399d54);}}),router['get'](a0_0x319ae2(0x105),auth,async(_0x43330f,_0x49c6ff)=>{const _0x151e06=a0_0x319ae2;try{const _0x591d96=_0x43330f[_0x151e06(0x128)]['id'],_0x39fdb3=await brands['findByIdAndDelete'](_0x591d96);_0x43330f['flash'](_0x151e06(0x14a),_0x151e06(0x166)),_0x49c6ff[_0x151e06(0x135)]('/products/brands');}catch(_0x13c869){console['log'](_0x13c869);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x141),auth,async(_0x212e8a,_0x2d93c9)=>{const _0x2aa539=a0_0x319ae2;try{const {username:_0x352a1a,email:_0x2043d1,role:_0xd8f601}=_0x212e8a['user'],_0x52760e=_0x212e8a[_0x2aa539(0x109)],_0x277e09=await profile[_0x2aa539(0xeb)]({'email':_0x52760e[_0x2aa539(0x118)]}),_0x2ba9f7=await master_shop[_0x2aa539(0x13a)]();console['log'](_0x2aa539(0x145),_0x2ba9f7);const _0x5a8bf1=await units[_0x2aa539(0x13a)]();if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0x16e))var _0x23b77b=users[_0x2aa539(0x111)];else{if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0xf0))var _0x23b77b=users[_0x2aa539(0xf0)];else{if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0x13c))var _0x23b77b=users[_0x2aa539(0x13c)];else{if(_0x2ba9f7[0x0]['language']==_0x2aa539(0x198))var _0x23b77b=users[_0x2aa539(0x198)];else{if(_0x2ba9f7[0x0]['language']==_0x2aa539(0x125))var _0x23b77b=users[_0x2aa539(0x125)];else{if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0x1a8))var _0x23b77b=users[_0x2aa539(0x183)];else{if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0xfd))var _0x23b77b=users['Chinese'];else{if(_0x2ba9f7[0x0][_0x2aa539(0x108)]==_0x2aa539(0x185))var _0x23b77b=users[_0x2aa539(0x10a)];}}}}}}}_0x2d93c9[_0x2aa539(0x170)]('units',{'success':_0x212e8a[_0x2aa539(0x104)](_0x2aa539(0x14a)),'errors':_0x212e8a[_0x2aa539(0x104)]('errors'),'role':_0x52760e,'profile':_0x277e09,'master_shop':_0x2ba9f7,'user':_0x5a8bf1,'language':_0x23b77b});}catch(_0x1cd73b){console['log'](_0x1cd73b);}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x141),auth,async(_0x39e86e,_0x2e015a)=>{const _0x5b5835=a0_0x319ae2;try{const {name:_0x3776dc,secondary_unit:_0x132fe1,products:_0x396973}=_0x39e86e[_0x5b5835(0x16d)],_0x3ca541=new units({'name':_0x3776dc,'secondary_unit':_0x132fe1,'products':_0x396973}),_0x3fdd6a=await units['findOne']({'name':_0x3776dc});_0x3fdd6a?_0x39e86e[_0x5b5835(0x104)](_0x5b5835(0x17c),_0x3776dc+_0x5b5835(0x16a)):_0x39e86e[_0x5b5835(0x104)](_0x5b5835(0x14a),_0x3776dc+_0x5b5835(0x117));const _0x1f6fb7=await _0x3ca541['save']();_0x2e015a['redirect'](_0x5b5835(0x10f));}catch(_0x5628f8){console[_0x5b5835(0x176)](_0x5628f8);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0xfc),auth,async(_0x4ff58f,_0x222271)=>{const _0x58b8f6=a0_0x319ae2;try{const {username:_0x45ef0a,email:_0x3459d8,role:_0x5418c0}=_0x4ff58f[_0x58b8f6(0x109)],_0x13541a=_0x4ff58f[_0x58b8f6(0x109)],_0x4d45b4=await profile[_0x58b8f6(0xeb)]({'email':_0x13541a[_0x58b8f6(0x118)]}),_0x33a49a=await master_shop['find']();console[_0x58b8f6(0x176)](_0x58b8f6(0x145),_0x33a49a);const _0x52719c=_0x4ff58f[_0x58b8f6(0x128)]['id'],_0x3454e1=await units[_0x58b8f6(0x167)](_0x52719c);if(_0x33a49a[0x0][_0x58b8f6(0x108)]==_0x58b8f6(0x16e))var _0x2bb192=users[_0x58b8f6(0x111)];else{if(_0x33a49a[0x0][_0x58b8f6(0x108)]==_0x58b8f6(0xf0))var _0x2bb192=users[_0x58b8f6(0xf0)];else{if(_0x33a49a[0x0][_0x58b8f6(0x108)]=='German')var _0x2bb192=users['German'];else{if(_0x33a49a[0x0]['language']=='Spanish')var _0x2bb192=users[_0x58b8f6(0x198)];else{if(_0x33a49a[0x0]['language']=='French')var _0x2bb192=users[_0x58b8f6(0x125)];else{if(_0x33a49a[0x0][_0x58b8f6(0x108)]==_0x58b8f6(0x1a8))var _0x2bb192=users[_0x58b8f6(0x183)];else{if(_0x33a49a[0x0][_0x58b8f6(0x108)]==_0x58b8f6(0xfd))var _0x2bb192=users[_0x58b8f6(0xfd)];else{if(_0x33a49a[0x0]['language']=='Arabic\x20(ae)')var _0x2bb192=users['Arabic'];}}}}}}}_0x222271['render'](_0x58b8f6(0x120),{'success':_0x4ff58f[_0x58b8f6(0x104)](_0x58b8f6(0x14a)),'errors':_0x4ff58f[_0x58b8f6(0x104)](_0x58b8f6(0x17c)),'role':_0x13541a,'profile':_0x4d45b4,'master_shop':_0x33a49a,'user':_0x3454e1,'language':_0x2bb192});}catch(_0x58df3d){console['log'](_0x58df3d);}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0xfc),auth,async(_0xcb2295,_0x503af9)=>{const _0x5be7b5=a0_0x319ae2;try{const _0x5ca541=_0xcb2295[_0x5be7b5(0x128)]['id'],_0x296791=await units[_0x5be7b5(0x11a)](_0x5ca541,_0xcb2295[_0x5be7b5(0x16d)]);_0xcb2295[_0x5be7b5(0x104)](_0x5be7b5(0x14a),_0x5be7b5(0x180)),_0x503af9['redirect'](_0x5be7b5(0x10f));}catch(_0x4a2162){console[_0x5be7b5(0x176)](_0x4a2162);}}),router[a0_0x319ae2(0x19c)]('/units/delete/:id',auth,async(_0x3d6767,_0x2b92e8)=>{const _0x3a042a=a0_0x319ae2;try{const _0xada039=_0x3d6767[_0x3a042a(0x128)]['id'],_0x285393=await units[_0x3a042a(0x10e)](_0xada039);_0x3d6767[_0x3a042a(0x104)]('success',_0x3a042a(0x168)),_0x2b92e8[_0x3a042a(0x135)](_0x3a042a(0x10f));}catch(_0x10fb5a){console[_0x3a042a(0x176)](_0x10fb5a);}});const storage=multer['diskStorage']({'destination':(_0x3a47d6,_0x170e8d,_0x409b13)=>{const _0x4fb253=a0_0x319ae2;_0x409b13(null,_0x4fb253(0x15b));},'filename':(_0x48c039,_0xc92fba,_0x1cc8ee)=>{const _0x329e14=a0_0x319ae2;_0x1cc8ee(null,Date[_0x329e14(0x148)]()+_0xc92fba[_0x329e14(0x115)]);}}),upload=multer({'storage':storage});router['get'](a0_0x319ae2(0x13e),auth,async(_0x1d639f,_0x273d83)=>{const _0x50950c=a0_0x319ae2;try{const {username:_0x4d6b20,email:_0x16ed5d,role:_0x12cd67}=_0x1d639f[_0x50950c(0x109)],_0x2e0067=_0x1d639f[_0x50950c(0x109)],_0x389775=await profile[_0x50950c(0xeb)]({'email':_0x2e0067[_0x50950c(0x118)]}),_0x39747e={'year':_0x50950c(0x177),'month':_0x50950c(0x10c),'day':'numeric'},_0x5b83a2=await master_shop['find']();console[_0x50950c(0x176)](_0x50950c(0x10b),_0x5b83a2);const _0x496a55=await product['find']();console[_0x50950c(0x176)](_0x50950c(0x1a0),_0x496a55);const _0x52cfb8=await warehouse[_0x50950c(0x103)]([{'$unwind':_0x50950c(0x116)},{'$lookup':{'from':_0x50950c(0x15f),'localField':_0x50950c(0x136),'foreignField':_0x50950c(0x12b),'as':_0x50950c(0x133)}},{'$unwind':_0x50950c(0x10d)},{'$project':{'product_name':_0x50950c(0x160),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x50950c(0x121)}}}]);console['log'](_0x50950c(0x126),_0x52cfb8),_0x52cfb8[_0x50950c(0x196)](_0x56ea9d=>{const _0x4a6aa5=_0x496a55['map'](_0x15d29d=>{const _0x553f8c=a0_0x6a1b;_0x15d29d[_0x553f8c(0x12b)]==_0x56ea9d[_0x553f8c(0x101)]&&(_0x15d29d[_0x553f8c(0x122)]=parseInt(_0x15d29d[_0x553f8c(0x122)])+parseInt(_0x56ea9d[_0x553f8c(0x13f)]));});}),console[_0x50950c(0x176)](_0x50950c(0x1a0),_0x496a55);if(_0x5b83a2[0x0]['language']==_0x50950c(0x16e))var _0x3eb531=users['English'];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]==_0x50950c(0xf0))var _0x3eb531=users[_0x50950c(0xf0)];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]==_0x50950c(0x13c))var _0x3eb531=users['German'];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]==_0x50950c(0x198))var _0x3eb531=users[_0x50950c(0x198)];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]=='French')var _0x3eb531=users[_0x50950c(0x125)];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]==_0x50950c(0x1a8))var _0x3eb531=users[_0x50950c(0x183)];else{if(_0x5b83a2[0x0]['language']==_0x50950c(0xfd))var _0x3eb531=users[_0x50950c(0xfd)];else{if(_0x5b83a2[0x0][_0x50950c(0x108)]==_0x50950c(0x185))var _0x3eb531=users[_0x50950c(0x10a)];}}}}}}}_0x273d83[_0x50950c(0x170)](_0x50950c(0x15f),{'success':_0x1d639f[_0x50950c(0x104)](_0x50950c(0x14a)),'errors':_0x1d639f['flash'](_0x50950c(0x17c)),'alldata':_0x496a55,'profile':_0x389775,'master_shop':_0x5b83a2,'role':_0x2e0067,'product_stock':_0x52cfb8,'language':_0x3eb531});}catch(_0x519520){console['log'](_0x519520);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x19d),auth,async(_0x3f9183,_0x5e3f04)=>{const _0x29659d=a0_0x319ae2;try{const {username:_0x2ab3a8,email:_0x2e7efe,role:_0x554dbe}=_0x3f9183['user'],_0x259709=_0x3f9183[_0x29659d(0x109)],_0x3f4fef=await profile[_0x29659d(0xeb)]({'email':_0x259709[_0x29659d(0x118)]}),_0x1ae20f=await master_shop[_0x29659d(0x13a)]();console['log'](_0x29659d(0x145),_0x1ae20f);const _0x1ff1b7=await categories[_0x29659d(0x13a)]({}),_0x234507=await brands[_0x29659d(0x13a)]({}),_0x1412d4=await units[_0x29659d(0x13a)]({}),_0x18315c=await warehouse['find']({'status':_0x29659d(0x164)});if(_0x1ae20f[0x0][_0x29659d(0x108)]==_0x29659d(0x16e))var _0x3295f5=users[_0x29659d(0x111)];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]=='Hindi')var _0x3295f5=users['Hindi'];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]==_0x29659d(0x13c))var _0x3295f5=users['German'];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]=='Spanish')var _0x3295f5=users[_0x29659d(0x198)];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]=='French')var _0x3295f5=users[_0x29659d(0x125)];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]==_0x29659d(0x1a8))var _0x3295f5=users[_0x29659d(0x183)];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]==_0x29659d(0xfd))var _0x3295f5=users[_0x29659d(0xfd)];else{if(_0x1ae20f[0x0][_0x29659d(0x108)]==_0x29659d(0x185))var _0x3295f5=users[_0x29659d(0x10a)];}}}}}}}_0x5e3f04[_0x29659d(0x170)]('add_product',{'success':_0x3f9183[_0x29659d(0x104)]('success'),'errors':_0x3f9183[_0x29659d(0x104)](_0x29659d(0x17c)),'role':_0x259709,'profile':_0x3f4fef,'categories':_0x1ff1b7,'brands':_0x234507,'master_shop':_0x1ae20f,'units':_0x1412d4,'language':_0x3295f5,'find_data':_0x18315c});}catch(_0x2d7d44){console['log'](_0x2d7d44);}}),router[a0_0x319ae2(0x171)]('/view/add_products',auth,upload[a0_0x319ae2(0x112)](a0_0x319ae2(0x14b)),async(_0x25dbe2,_0xf20593)=>{const _0x2f2f88=a0_0x319ae2;try{const {name:_0x36984b,category:_0x340799,brand:_0x884b88,unit:_0x246f8e,alertquantity:_0x2ccacd,stock:_0x2d10c9,product_code:_0x195eca,warehouse:_0x1c7b77,primary_ItemCode:_0x193aab,second_ItemCode:_0x3a7633,second_unit:_0x3dea2b,maxPerUnit:_0x290964,MaxPerProduct:_0x2bd365}=_0x25dbe2['body'],_0x3454f5=_0x25dbe2[_0x2f2f88(0xfa)]?.['filename']||'defaultProduct.avif',_0x599238=new product({'image':_0x3454f5,'name':_0x36984b,'category':_0x340799,'brand':_0x884b88,'unit':_0x246f8e,'alertquantity':_0x2ccacd,'stock':_0x2d10c9,'product_code':_0x195eca,'warehouse':_0x1c7b77,'primary_code':_0x193aab,'secondary_code':_0x3a7633,'second_unit':_0x3dea2b,'maxStocks':_0x2bd365,'maxProdPerUnit':_0x290964}),_0x250321=await _0x599238[_0x2f2f88(0xec)](),_0xd842bd=await categories['findOne']({'name':_0x340799});_0xd842bd['products']=parseInt(_0xd842bd['products'])+0x1,await _0xd842bd[_0x2f2f88(0xec)]();const _0x2265d8=await brands[_0x2f2f88(0xeb)]({'name':_0x884b88});_0x2265d8['products']=parseInt(_0x2265d8['products'])+0x1,await _0x2265d8[_0x2f2f88(0xec)]();const _0x518b03=await units[_0x2f2f88(0xeb)]({'name':_0x246f8e});_0x518b03[_0x2f2f88(0x15f)]=parseInt(_0x518b03[_0x2f2f88(0x15f)])+0x1,await _0x518b03[_0x2f2f88(0xec)](),_0x25dbe2[_0x2f2f88(0x104)](_0x2f2f88(0x14a),_0x2f2f88(0xef)),_0xf20593[_0x2f2f88(0x135)](_0x2f2f88(0x100));}catch(_0x2f3300){console[_0x2f2f88(0x176)](_0x2f3300);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0xf2),auth,async(_0x1f506c,_0x3db645)=>{const _0x5e2594=a0_0x319ae2;try{const {username:_0x16ba6c,email:_0x37fbe9,role:_0x2faacb}=_0x1f506c[_0x5e2594(0x109)],_0x59cc4b=_0x1f506c[_0x5e2594(0x109)],_0x89fdc9=await profile['findOne']({'email':_0x59cc4b[_0x5e2594(0x118)]}),_0x2045ba=await master_shop[_0x5e2594(0x13a)]();console[_0x5e2594(0x176)](_0x5e2594(0x15a),_0x2045ba);const _0x1e05b4=_0x1f506c[_0x5e2594(0x128)]['id'],_0x51f186=await product['findById'](_0x1e05b4),_0xb8a345=await categories[_0x5e2594(0x13a)]({}),_0x5ee757=await brands['find']({}),_0x3019ca=await units['find']({}),_0x349da7=await warehouse[_0x5e2594(0x13a)]({'status':_0x5e2594(0x164)}),_0x10669b=await units[_0x5e2594(0x103)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x5e2594(0x169)}}}]);if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x16e))var _0xc09d2b=users[_0x5e2594(0x111)];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0xf0))var _0xc09d2b=users[_0x5e2594(0xf0)];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x13c))var _0xc09d2b=users[_0x5e2594(0x13c)];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x198))var _0xc09d2b=users[_0x5e2594(0x198)];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x125))var _0xc09d2b=users['French'];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x1a8))var _0xc09d2b=users[_0x5e2594(0x183)];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]=='Chinese')var _0xc09d2b=users['Chinese'];else{if(_0x2045ba[0x0][_0x5e2594(0x108)]==_0x5e2594(0x185))var _0xc09d2b=users['Arabic'];}}}}}}}_0x3db645[_0x5e2594(0x170)](_0x5e2594(0x15e),{'success':_0x1f506c[_0x5e2594(0x104)]('success'),'errors':_0x1f506c['flash'](_0x5e2594(0x17c)),'role':_0x59cc4b,'profile':_0x89fdc9,'alldata':_0x51f186,'categories':_0xb8a345,'brands':_0x5ee757,'master_shop':_0x2045ba,'units':_0x3019ca,'secondunit':_0x10669b,'find_data':_0x349da7,'language':_0xc09d2b});}catch(_0x441c18){console[_0x5e2594(0x176)](_0x441c18);}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0xf2),auth,upload[a0_0x319ae2(0x112)]('image'),async(_0x20c97a,_0x5e663c)=>{const _0x1ab64e=a0_0x319ae2;try{console[_0x1ab64e(0x176)](_0x1ab64e(0x197));const _0x472a22=_0x20c97a[_0x1ab64e(0x128)]['id'],_0x3df327=await product[_0x1ab64e(0x167)](_0x472a22),{image:_0x5e9cf5,name:_0x3051f5,category:_0x431cd0,brand:_0x5cc890,sku:_0x4927c0,unit:_0x37b2a3,alertquantity:_0x1db7b0,product_code:_0x30d80b,warehouse:_0x126716,primary_ItemCode:_0x25af90,second_ItemCode:_0x754863,second_unit:_0x554bf3,maxPerUnit:_0x22bafa,MaxPerProduct:_0x38256a,prod_catdata:_0x4cfdff}=_0x20c97a[_0x1ab64e(0x16d)];_0x20c97a[_0x1ab64e(0xfa)]&&(_0x3df327[_0x1ab64e(0x14b)]=_0x20c97a[_0x1ab64e(0xfa)][_0x1ab64e(0x11f)]);_0x3df327['name']=_0x3051f5,_0x3df327[_0x1ab64e(0x12d)]=_0x431cd0,_0x3df327[_0x1ab64e(0x123)]=_0x5cc890,_0x3df327[_0x1ab64e(0xea)]=_0x4927c0,_0x3df327[_0x1ab64e(0x151)]=_0x37b2a3,_0x3df327['alertquantity']=_0x1db7b0,_0x3df327[_0x1ab64e(0xf9)]=_0x30d80b,_0x3df327[_0x1ab64e(0xee)]=_0x126716,_0x3df327[_0x1ab64e(0x1a2)]=_0x25af90,_0x3df327[_0x1ab64e(0x184)]=_0x754863,_0x3df327['secondary_unit']=_0x554bf3,_0x3df327[_0x1ab64e(0x199)]=_0x38256a,_0x3df327[_0x1ab64e(0x187)]=_0x22bafa,_0x3df327['product_category']=_0x4cfdff;const _0x1bd9ae=await _0x3df327['save']();console[_0x1ab64e(0x176)]('product\x20edit',_0x3df327),_0x20c97a[_0x1ab64e(0x104)](_0x1ab64e(0x14a),_0x1ab64e(0xff)),_0x5e663c[_0x1ab64e(0x135)]('/products/view');}catch(_0x2ec5de){console[_0x1ab64e(0x176)](_0x2ec5de);}}),router[a0_0x319ae2(0x19c)]('/barcode/:id',auth,async(_0x288c70,_0x287596)=>{const _0x802005=a0_0x319ae2;try{const {username:_0x164573,email:_0x45e71e,role:_0x558e53}=_0x288c70[_0x802005(0x109)],_0x5819bf=_0x288c70['user'],_0x12fe93=await profile[_0x802005(0xeb)]({'email':_0x5819bf['email']}),_0x3d3b9f=await master_shop['find']();console[_0x802005(0x176)]('barcode\x20Product\x20master',_0x3d3b9f);const _0x28c759=_0x288c70['params']['id'],_0x1e91df=await product[_0x802005(0x167)](_0x28c759);console[_0x802005(0x176)](_0x802005(0x18f),_0x1e91df);if(_0x3d3b9f[0x0][_0x802005(0x108)]==_0x802005(0x16e))var _0x208ac9=users[_0x802005(0x111)];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]==_0x802005(0xf0))var _0x208ac9=users['Hindi'];else{if(_0x3d3b9f[0x0]['language']==_0x802005(0x13c))var _0x208ac9=users[_0x802005(0x13c)];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]==_0x802005(0x198))var _0x208ac9=users['Spanish'];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]==_0x802005(0x125))var _0x208ac9=users['French'];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]==_0x802005(0x1a8))var _0x208ac9=users['Portuguese'];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]=='Chinese')var _0x208ac9=users[_0x802005(0xfd)];else{if(_0x3d3b9f[0x0][_0x802005(0x108)]=='Arabic\x20(ae)')var _0x208ac9=users[_0x802005(0x10a)];}}}}}}}_0x287596['render'](_0x802005(0xe9),{'success':_0x288c70[_0x802005(0x104)](_0x802005(0x14a)),'errors':_0x288c70[_0x802005(0x104)](_0x802005(0x17c)),'role':_0x5819bf,'profile':_0x12fe93,'alldata':_0x1e91df,'master_shop':_0x3d3b9f,'language':_0x208ac9});}catch(_0x3bdc28){console[_0x802005(0x176)](_0x3bdc28);}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x15c),auth,async(_0x4bab21,_0x5742d9)=>{const _0x29eab9=a0_0x319ae2;try{const _0x460229=new excelJS[(_0x29eab9(0x13b))](),_0xbc9c1b=_0x460229['addWorksheet'](_0x29eab9(0x18b));return _0xbc9c1b[_0x29eab9(0x114)]=[{'header':_0x29eab9(0x131),'key':_0x29eab9(0x162),'width':0xa},{'header':_0x29eab9(0x1a3),'key':_0x29eab9(0x15d),'width':0xa},{'header':'Units','key':'PUnits','width':0xa},{'header':_0x29eab9(0x1a7),'key':_0x29eab9(0x19b),'width':0xa},{'header':_0x29eab9(0x144),'key':_0x29eab9(0x18c),'width':0xa},{'header':_0x29eab9(0x12e),'key':_0x29eab9(0x16c),'width':0xa},{'header':_0x29eab9(0x154),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0x29eab9(0xfe),'key':_0x29eab9(0x1a6),'width':0xa},{'header':_0x29eab9(0x16f),'key':'PAlQty','width':0xa},{'header':_0x29eab9(0x149),'key':_0x29eab9(0x119),'width':0xa},{'header':_0x29eab9(0x14d),'key':_0x29eab9(0x172),'width':0xa}],_0x5742d9[_0x29eab9(0x181)](_0x29eab9(0x155),_0x29eab9(0xe8)),_0x5742d9[_0x29eab9(0x181)](_0x29eab9(0x153),_0x29eab9(0x11b)),_0x460229['xlsx'][_0x29eab9(0x1a5)](_0x5742d9)[_0x29eab9(0x11c)](()=>{const _0x7dd5a8=_0x29eab9;_0x5742d9[_0x7dd5a8(0x157)](0xc8);});}catch(_0x630218){_0x5742d9[_0x29eab9(0x157)](0x190)[_0x29eab9(0x17a)](_0x630218);}});const storage1=multer[a0_0x319ae2(0x194)]({'destination':(_0x575ccc,_0x11def0,_0x386258)=>{const _0x1aaa88=a0_0x319ae2;_0x386258(null,_0x1aaa88(0x124));},'filename':(_0x149cea,_0x572ddc,_0x25f132)=>{const _0x28d4e9=a0_0x319ae2;_0x25f132(null,Date[_0x28d4e9(0x148)]()+_0x572ddc[_0x28d4e9(0x115)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x319ae2(0x106),auth,uploadMigrate[a0_0x319ae2(0x112)](a0_0x319ae2(0x14c)),async(_0x404e52,_0x3679a7)=>{const _0x1b771f=a0_0x319ae2,_0x5f4ff3=_0x404e52[_0x1b771f(0xfa)][_0x1b771f(0x11f)],_0x1fcf18=await xlsx[_0x1b771f(0x1a4)](_0x1b771f(0x11e)+_0x5f4ff3);let _0x1c0b27=_0x1fcf18[_0x1b771f(0xe4)],_0x130d4d=xlsx['utils']['sheet_to_json'](_0x1fcf18[_0x1b771f(0x158)][_0x1c0b27[0x0]]);for(const _0xfa09b of _0x130d4d){const _0x2edd20=_0xfa09b[_0x1b771f(0x131)],_0x38110a=_0xfa09b[_0x1b771f(0x1a3)],_0x51ac68=_0xfa09b[_0x1b771f(0xf4)],_0x224eea=_0xfa09b[_0x1b771f(0x1a7)],_0x1e56e8=_0xfa09b[_0x1b771f(0xe5)],_0x4df2ea=_0xfa09b[_0x1b771f(0xfe)],_0x1f67eb=_0xfa09b['Alert_QTY'],_0x5ee30e=_0xfa09b[_0x1b771f(0x12e)],_0xd9b167=_0xfa09b[_0x1b771f(0x154)],_0x3e92f3=_0xfa09b[_0x1b771f(0x149)],_0x59f9b7=_0xfa09b['max_number_per_units'],_0x1ed38c=_0xfa09b[_0x1b771f(0x14d)];try{let _0x53ac25=await categories[_0x1b771f(0xeb)]({'name':_0x4df2ea});if(!_0x53ac25){const _0x1c62a6=new categories({'name':_0x4df2ea,'products':'0'});_0x53ac25=await _0x1c62a6[_0x1b771f(0xec)]();}let _0x194e7b=await brands['findOne']({'name':_0x38110a});if(!_0x194e7b){const _0x461953=new brands({'name':_0x38110a,'products':'0'});_0x194e7b=await _0x461953[_0x1b771f(0xec)]();}let _0x32ebab=await units[_0x1b771f(0xeb)]({'name':_0x51ac68,'secondary_unit':_0x224eea});if(!_0x32ebab){const _0x2827c3=new units({'name':_0x51ac68,'secondary_unit':_0x224eea,'products':'0'});_0x32ebab=await _0x2827c3[_0x1b771f(0xec)]();}const _0xf48305=await product[_0x1b771f(0x13a)]({'name':_0x2edd20,'category':_0x53ac25[_0x1b771f(0x12b)],'brand':_0x194e7b['name'],'secondary_unit':_0x32ebab[_0x1b771f(0x19e)],'product_code':_0x1e56e8});console['log'](_0xf48305[_0x1b771f(0x107)]+_0x1b771f(0x130)+_0x53ac25[_0x1b771f(0x12b)]+_0x1b771f(0x130)+_0x194e7b[_0x1b771f(0x12b)]+_0x1b771f(0x130)+_0x32ebab[_0x1b771f(0x19e)]+'\x20<>\x20'+_0x1e56e8+'\x20<>\x20'+_0x2edd20);if(_0xf48305[_0x1b771f(0x107)]===0x0){const _0x5e99bf=new product({'image':_0x1b771f(0x14e),'name':_0x2edd20,'category':_0x53ac25[_0x1b771f(0x12b)],'brand':_0x194e7b[_0x1b771f(0x12b)],'unit':_0x32ebab[_0x1b771f(0x12b)],'alertquantity':_0x1f67eb,'product_code':_0x1e56e8,'secondary_unit':_0x32ebab[_0x1b771f(0x19e)],'primary_code':_0x5ee30e,'secondary_code':_0xd9b167,'maxStocks':_0x3e92f3,'maxProdPerUnit':_0x59f9b7,'product_category':_0x1ed38c}),_0x4e7280=await _0x5e99bf[_0x1b771f(0xec)]();_0x53ac25[_0x1b771f(0x15f)]=parseInt(_0x53ac25['products'])+0x1,await _0x53ac25[_0x1b771f(0xec)](),_0x194e7b[_0x1b771f(0x15f)]=parseInt(_0x194e7b['products'])+0x1,await _0x194e7b[_0x1b771f(0xec)](),_0x32ebab[_0x1b771f(0x15f)]=parseInt(_0x32ebab[_0x1b771f(0x15f)])+0x1,await _0x32ebab['save'](),_0x404e52[_0x1b771f(0x104)](_0x1b771f(0x14a),_0x2edd20+_0x1b771f(0x150));}else{console[_0x1b771f(0x176)](_0xf48305[0x0]);const _0x35f2a9=_0xf48305[0x0];_0x35f2a9[_0x1b771f(0x12d)]=_0x53ac25[_0x1b771f(0x12b)],_0x35f2a9[_0x1b771f(0x123)]=_0x194e7b['name'],_0x35f2a9[_0x1b771f(0x151)]=_0x32ebab[_0x1b771f(0x12b)],_0x35f2a9[_0x1b771f(0x113)]=_0x1f67eb,_0x35f2a9[_0x1b771f(0xf9)]=_0x1e56e8,_0x35f2a9['secondary_unit']=_0x32ebab['secondary_unit'],_0x35f2a9[_0x1b771f(0x1a2)]=_0x5ee30e,_0x35f2a9[_0x1b771f(0x184)]=_0xd9b167,_0x35f2a9[_0x1b771f(0x199)]=_0x3e92f3,_0x35f2a9[_0x1b771f(0x187)]=_0x59f9b7,_0x35f2a9[_0x1b771f(0x195)]=_0x1ed38c;const _0x475bea=await _0x35f2a9['save']();_0x404e52['flash'](_0x1b771f(0x14a),_0x475bea[_0x1b771f(0x12b)]+_0x1b771f(0x12a));}}catch(_0x34a85f){_0x3679a7[_0x1b771f(0x157)](0x1f4)[_0x1b771f(0x143)]({'proderror':_0x34a85f[_0x1b771f(0x147)],'aproduct':_0x2edd20});}}_0x3679a7['redirect'](_0x1b771f(0x100));}),router[a0_0x319ae2(0x171)]('/select_data',auth,async(_0x137e06,_0x4af915)=>{const _0xcf84a8=a0_0x319ae2;try{console[_0xcf84a8(0x176)](_0x137e06[_0xcf84a8(0x16d)]);const {data_cateory:_0xb5e224,datachoose:_0xf7fa1d}=_0x137e06[_0xcf84a8(0x16d)];var _0x238f77;if(_0xf7fa1d=='prod_categ')_0x238f77=await product[_0xcf84a8(0x103)]([{'$group':{'_id':_0xcf84a8(0x156)}}]);else{if(_0xf7fa1d=='brands')_0x238f77=await product[_0xcf84a8(0x103)]([{'$match':{'product_category':_0xb5e224}},{'$group':{'_id':_0xcf84a8(0x139)}}]);else _0xf7fa1d=='categ'&&(_0x238f77=await product[_0xcf84a8(0x103)]([{'$match':{'product_category':_0xb5e224}},{'$group':{'_id':'$category'}}]));}_0x4af915['json'](_0x238f77);}catch(_0x54e91a){_0x4af915[_0xcf84a8(0x143)]({'message':_0x54e91a[_0xcf84a8(0x147)]});}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x127),auth,async(_0x4f470a,_0x1d2533)=>{const _0x18b79a=a0_0x319ae2;try{const {data_choosing:_0xec3f41,data_selected:_0x49c361}=_0x4f470a['body'];var _0x5c0df0;if(_0xec3f41==_0x18b79a(0xf5))_0x5c0df0=await product['aggregate']([{'$match':{'product_category':_0x49c361}}]);else{if(_0xec3f41==_0x18b79a(0x1a9))_0x5c0df0=await product['aggregate']([{'$match':{'brand':_0x49c361}}]);else _0xec3f41==_0x18b79a(0x17f)&&(_0x5c0df0=await product[_0x18b79a(0x103)]([{'$match':{'category':_0x49c361}}]));}_0x1d2533[_0x18b79a(0x143)](_0x5c0df0);}catch(_0x2d8ea0){_0x1d2533[_0x18b79a(0x143)]({'message':_0x2d8ea0[_0x18b79a(0x147)]});}}),router[a0_0x319ae2(0x19c)](a0_0x319ae2(0x17b),auth,async(_0x4439e3,_0x19f527)=>{const _0x471781=a0_0x319ae2,_0x4ea16c=_0x4439e3['user'],_0x430e7e=await profile[_0x471781(0xeb)]({'email':_0x4ea16c[_0x471781(0x118)]}),_0x387c7e=await master_shop[_0x471781(0x13a)](),_0x140735=await product[_0x471781(0x13a)]();if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0x16e))var _0xd14f34=users[_0x471781(0x111)];else{if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0xf0))var _0xd14f34=users[_0x471781(0xf0)];else{if(_0x387c7e[0x0]['language']==_0x471781(0x13c))var _0xd14f34=users['German'];else{if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0x198))var _0xd14f34=users[_0x471781(0x198)];else{if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0x125))var _0xd14f34=users['French'];else{if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0x1a8))var _0xd14f34=users[_0x471781(0x183)];else{if(_0x387c7e[0x0][_0x471781(0x108)]==_0x471781(0xfd))var _0xd14f34=users[_0x471781(0xfd)];else{if(_0x387c7e[0x0][_0x471781(0x108)]=='Arabic\x20(ae)')var _0xd14f34=users[_0x471781(0x10a)];}}}}}}}_0x19f527[_0x471781(0x170)](_0x471781(0x18d),{'success':_0x4439e3['flash'](_0x471781(0x14a)),'errors':_0x4439e3[_0x471781(0x104)]('errors'),'role':_0x4ea16c,'profile':_0x430e7e,'products':_0x140735,'master_shop':_0x387c7e,'language':_0xd14f34});}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0xf7),auth,async(_0x374849,_0x9dcfff)=>{const _0x45a4a9=a0_0x319ae2,_0x55a856=await product[_0x45a4a9(0x13a)]();_0x9dcfff[_0x45a4a9(0x143)]({'data':_0x55a856});}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x137),auth,async(_0x27a5c6,_0x275b7d)=>{const _0x4eca99=a0_0x319ae2;try{const {dataProdCat:_0x335831,dataProdIdentity:_0x43839e}=_0x27a5c6[_0x4eca99(0x16d)];var _0x380c68;switch(_0x335831){case'fg':switch(_0x43839e){case'Brands':_0x380c68=await product[_0x4eca99(0x103)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x4eca99(0x139)}},{'$project':{'brand':'$_id'}}]);break;case _0x4eca99(0xfe):_0x380c68=await product[_0x4eca99(0x103)]([{'$match':{'product_category':_0x4eca99(0x17e)}},{'$group':{'_id':_0x4eca99(0x163)}},{'$project':{'category':_0x4eca99(0x129)}}]);break;}break;case'rm':switch(_0x43839e){case _0x4eca99(0x1a3):_0x380c68=await product[_0x4eca99(0x103)]([{'$match':{'product_category':_0x4eca99(0xf1)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x380c68=await product[_0x4eca99(0x103)]([{'$match':{'product_category':_0x4eca99(0xf1)}},{'$group':{'_id':_0x4eca99(0x163)}},{'$project':{'category':_0x4eca99(0x129)}}]);break;}break;}_0x275b7d[_0x4eca99(0x143)](_0x380c68);}catch(_0x29cf0b){_0x275b7d['json']({'message':_0x29cf0b[_0x4eca99(0x147)]});}}),router['post']('/print_barcode_filter/',auth,async(_0x3b5a51,_0x30dfbf)=>{const _0x3245c5=a0_0x319ae2;try{console['log'](_0x3b5a51[_0x3245c5(0x16d)]);const {prod_cat:_0x578392,identity:_0xb28c96,valueData:_0x1861eb,typeofbarcode:_0x20f438}=_0x3b5a51[_0x3245c5(0x16d)];let _0x4bb9b8;switch(_0x578392){case'fg':if(_0xb28c96==_0x3245c5(0x1a3))_0x4bb9b8=await product[_0x3245c5(0x103)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x1861eb}}]);else _0xb28c96=='Category'&&(_0x4bb9b8=await product[_0x3245c5(0x103)]([{'$match':{'product_category':_0x3245c5(0x17e),'category':_0x1861eb}}]));break;case'rm':if(_0xb28c96=='Brands')_0x4bb9b8=await product[_0x3245c5(0x103)]([{'$match':{'product_category':_0x3245c5(0xf1),'brand':_0x1861eb}}]);else _0xb28c96==_0x3245c5(0xfe)&&(_0x4bb9b8=await product[_0x3245c5(0x103)]([{'$match':{'product_category':_0x3245c5(0xf1),'category':_0x1861eb}}]));break;}const _0x487cf3=_0x5d4e84=>_0x5d4e84*0x48,_0x59c0d6={'width':0x3,'height':0x1},_0x34ee76=new PDFDocument({'margin':_0x487cf3(0.75),'size':[_0x487cf3(_0x59c0d6['width']),_0x487cf3(_0x59c0d6[_0x3245c5(0x190)])],'bufferPages':!![]}),_0x1f7c5d=_0x4bb9b8['length'];for(let _0x1fb959=0x0;_0x1fb959<=_0x1f7c5d;_0x1fb959++){if(_0x1fb959!=_0x1f7c5d){const _0x1a89bf=_0x4bb9b8[_0x1fb959][_0x3245c5(0x12b)],_0xecc9aa=_0x4bb9b8[_0x1fb959][_0x3245c5(0x1a2)],_0x5b573e=_0x4bb9b8[_0x1fb959]['secondary_code'],_0x1c8d4e=_0x4bb9b8[_0x1fb959][_0x3245c5(0xf9)];var _0xaa712c;switch(_0x20f438){case'1':_0xaa712c=_0xecc9aa;break;case'2':_0xaa712c=_0x5b573e;break;case'3':_0xaa712c=_0x1c8d4e;break;}const _0x392bc0={'width':0xd2,'height':0x64},_0x1740ce={'width':_0x487cf3(_0x59c0d6[_0x3245c5(0x12c)]),'height':_0x487cf3(_0x59c0d6[_0x3245c5(0x190)])},_0x1b8241=new Canvas();JsBarcode(_0x1b8241,_0xaa712c,{'format':_0x3245c5(0x161),'height':_0x392bc0[_0x3245c5(0x190)],'displayValue':!![],'text':_0xaa712c});const _0x17665c=_0x1b8241[_0x3245c5(0x19f)](),_0x1855b4=_0x1740ce[_0x3245c5(0x12c)]/_0x392bc0[_0x3245c5(0x12c)],_0x2c7b23=_0x1740ce[_0x3245c5(0x190)]/_0x392bc0['height'],_0x1224b3=Math[_0x3245c5(0xe6)](_0x1855b4,_0x2c7b23),_0x3e3ff1=_0x392bc0[_0x3245c5(0x12c)]*_0x1224b3,_0x40a4f9=_0x392bc0[_0x3245c5(0x190)]*_0x1224b3,_0xac5335=(_0x1740ce[_0x3245c5(0x12c)]-_0x3e3ff1)/0x2,_0x3ae599=(_0x1740ce[_0x3245c5(0x190)]-_0x40a4f9)/0x2;_0x34ee76[_0x3245c5(0x14b)](_0x17665c,_0xac5335,_0x3ae599,{'width':_0x3e3ff1,'height':_0x40a4f9}),_0x1fb959!=_0x1f7c5d&&_0x34ee76['addPage']();}}const _0xdfb7bf=[];_0x34ee76['on'](_0x3245c5(0x178),_0xdfb7bf[_0x3245c5(0x134)][_0x3245c5(0x179)](_0xdfb7bf)),_0x34ee76['on'](_0x3245c5(0x142),()=>{const _0x256af5=_0x3245c5,_0x2897da=Buffer[_0x256af5(0x138)](_0xdfb7bf),_0x22e122=_0x2897da[_0x256af5(0x189)](_0x256af5(0x188));_0x30dfbf['json']({'pdfContent':_0x22e122});}),_0x34ee76[_0x3245c5(0x142)]();}catch(_0x529cc2){_0x30dfbf[_0x3245c5(0x143)]({'message':_0x529cc2[_0x3245c5(0x147)]});}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0x12f),auth,async(_0x3862cb,_0x5287f8)=>{const _0x472670=a0_0x319ae2;try{console[_0x472670(0x176)](_0x3862cb['body']);const {prod_cat:_0x5e5644,identity:_0x190071,valueData:_0x3fc140}=_0x3862cb[_0x472670(0x16d)];let _0x5f2631;switch(_0x5e5644){case'fg':if(_0x190071=='Brands')_0x5f2631=await product['aggregate']([{'$match':{'product_category':_0x472670(0x17e),'brand':_0x3fc140}}]);else _0x190071==_0x472670(0xfe)&&(_0x5f2631=await product['aggregate']([{'$match':{'product_category':_0x472670(0x17e),'category':_0x3fc140}}]));break;case'rm':if(_0x190071==_0x472670(0x1a3))_0x5f2631=await product['aggregate']([{'$match':{'product_category':_0x472670(0xf1),'brand':_0x3fc140}}]);else _0x190071==_0x472670(0xfe)&&(_0x5f2631=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x3fc140}}]));break;}_0x5287f8['json']({'data':_0x5f2631});}catch(_0x498af8){_0x5287f8[_0x472670(0x143)]({'message':_0x498af8[_0x472670(0x147)]});}}),router[a0_0x319ae2(0x171)](a0_0x319ae2(0xfb),auth,async(_0x3f8c88,_0x145816)=>{const _0x35246b=a0_0x319ae2;try{const _0x4b974e=_0x3f8c88['params']['id'],{copies:_0x298bb9,typeofbarcode:_0x39043f}=_0x3f8c88[_0x35246b(0x16d)];var _0x5dc924=await product['findById'](_0x4b974e);const _0x57b41f=_0x417b55=>_0x417b55*0x48,_0x3be98f={'width':0x3,'height':0x1},_0x2ad44a=new PDFDocument({'margin':_0x57b41f(0.75),'size':[_0x57b41f(_0x3be98f[_0x35246b(0x12c)]),_0x57b41f(_0x3be98f[_0x35246b(0x190)])],'bufferPages':!![]}),_0x4021a5=_0x298bb9,_0x5f2647=_0x5dc924[_0x35246b(0x12b)],_0x24db05=_0x5dc924[_0x35246b(0x1a2)],_0x53f9ce=_0x5dc924[_0x35246b(0x184)],_0x553dc3=_0x5dc924[_0x35246b(0xf9)];let _0x254663;switch(_0x39043f){case'1':_0x254663=_0x24db05;break;case'2':_0x254663=_0x53f9ce;break;case'3':_0x254663=_0x553dc3;break;}const _0x534771={'width':0xd2,'height':0x64},_0x4fe162={'width':_0x57b41f(_0x3be98f[_0x35246b(0x12c)]),'height':_0x57b41f(_0x3be98f[_0x35246b(0x190)])};for(let _0xfb81e6=0x1;_0xfb81e6<=_0x4021a5;_0xfb81e6++){const _0x5a3203=new Canvas();JsBarcode(_0x5a3203,_0x254663,{'format':_0x35246b(0x161),'height':_0x534771[_0x35246b(0x190)],'displayValue':!![],'text':_0x254663});const _0x289987=_0x5a3203[_0x35246b(0x19f)](),_0x2ea617=_0x4fe162[_0x35246b(0x12c)]/_0x534771[_0x35246b(0x12c)],_0x534854=_0x4fe162[_0x35246b(0x190)]/_0x534771[_0x35246b(0x190)],_0x219be2=Math[_0x35246b(0xe6)](_0x2ea617,_0x534854),_0x3224d8=_0x534771[_0x35246b(0x12c)]*_0x219be2,_0x1f138a=_0x534771[_0x35246b(0x190)]*_0x219be2,_0x3c1b88=(_0x4fe162[_0x35246b(0x12c)]-_0x3224d8)/0x2,_0x1d5bdf=(_0x4fe162[_0x35246b(0x190)]-_0x1f138a)/0x2;_0x2ad44a[_0x35246b(0x14b)](_0x289987,_0x3c1b88,_0x1d5bdf,{'width':_0x3224d8,'height':_0x1f138a}),_0xfb81e6!=_0x4021a5&&_0x2ad44a['addPage']();}const _0x1d4013=[];_0x2ad44a['on']('data',_0x1d4013[_0x35246b(0x134)][_0x35246b(0x179)](_0x1d4013)),_0x2ad44a['on']('end',()=>{const _0x7775d2=_0x35246b,_0x41cfbc=Buffer['concat'](_0x1d4013),_0xe69fae=_0x41cfbc[_0x7775d2(0x189)](_0x7775d2(0x188));_0x145816['json']({'pdfContent':_0xe69fae});}),_0x2ad44a[_0x35246b(0x142)]();}catch(_0x2734f0){_0x145816['json']({'message':_0x2734f0['message']});}}),module[a0_0x319ae2(0x182)]=router;