const a0_0x561c0e=a0_0x392f;function a0_0x392f(_0x474dde,_0x1e4ec5){const _0x3babe6=a0_0x3bab();return a0_0x392f=function(_0x392fd7,_0x21ffff){_0x392fd7=_0x392fd7-0x11f;let _0x352dc7=_0x3babe6[_0x392fd7];return _0x352dc7;},a0_0x392f(_0x474dde,_0x1e4ec5);}(function(_0x5b3450,_0x27a2b0){const _0x58363d=a0_0x392f,_0x567cfd=_0x5b3450();while(!![]){try{const _0x346fb8=parseInt(_0x58363d(0x15c))/0x1*(-parseInt(_0x58363d(0x154))/0x2)+parseInt(_0x58363d(0x1c6))/0x3+-parseInt(_0x58363d(0x176))/0x4*(parseInt(_0x58363d(0x19c))/0x5)+-parseInt(_0x58363d(0x140))/0x6+-parseInt(_0x58363d(0x1c0))/0x7*(parseInt(_0x58363d(0x1a5))/0x8)+-parseInt(_0x58363d(0x15d))/0x9+parseInt(_0x58363d(0x1ce))/0xa*(parseInt(_0x58363d(0x167))/0xb);if(_0x346fb8===_0x27a2b0)break;else _0x567cfd['push'](_0x567cfd['shift']());}catch(_0x48fba5){_0x567cfd['push'](_0x567cfd['shift']());}}}(a0_0x3bab,0x7ad27));const express=require(a0_0x561c0e(0x138)),res=require('express/lib/response'),app=express(),router=express[a0_0x561c0e(0x15a)](),multer=require(a0_0x561c0e(0x14c)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x561c0e(0x14d)),auth=require(a0_0x561c0e(0x191)),users=require('../public/language/languages.json'),excelJS=require(a0_0x561c0e(0x1ab)),xlsx=require(a0_0x561c0e(0x1d4)),JsBarcode=require(a0_0x561c0e(0x1c8)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x561c0e(0x1a1));router[a0_0x561c0e(0x128)]('/categories',auth,async(_0x5e543e,_0x58dc94)=>{const _0x3a6323=a0_0x561c0e;try{const {username:_0x5241a1,email:_0x457318,role:_0x56c843}=_0x5e543e['user'],_0x46b083=_0x5e543e[_0x3a6323(0x135)],_0x5859cc=await profile[_0x3a6323(0x145)]({'email':_0x46b083[_0x3a6323(0x158)]}),_0x46fd35=await master_shop[_0x3a6323(0x16c)]();console[_0x3a6323(0x139)](_0x3a6323(0x1c2),_0x46fd35);const _0x1074ef=await categories[_0x3a6323(0x16c)]();if(_0x46fd35[0x0]['language']=='English\x20(US)')var _0x22b796=users[_0x3a6323(0x1af)];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x171))var _0x22b796=users['Hindi'];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x13c))var _0x22b796=users[_0x3a6323(0x13c)];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x168))var _0x22b796=users['Spanish'];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x16b))var _0x22b796=users['French'];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x14b))var _0x22b796=users['Portuguese'];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x1c5))var _0x22b796=users[_0x3a6323(0x1c5)];else{if(_0x46fd35[0x0][_0x3a6323(0x142)]==_0x3a6323(0x17c))var _0x22b796=users[_0x3a6323(0x178)];}}}}}}}_0x58dc94[_0x3a6323(0x1ba)](_0x3a6323(0x152),{'success':_0x5e543e[_0x3a6323(0x122)](_0x3a6323(0x199)),'errors':_0x5e543e[_0x3a6323(0x122)](_0x3a6323(0x18f)),'role':_0x46b083,'profile':_0x5859cc,'user':_0x1074ef,'master_shop':_0x46fd35,'language':_0x22b796});}catch(_0x341739){console[_0x3a6323(0x139)](_0x341739);}}),router['post'](a0_0x561c0e(0x1de),auth,async(_0x1fd5c9,_0x2bc888)=>{const _0x1e1ba0=a0_0x561c0e;try{const {name:_0x3ae953,products:_0x211ed5}=_0x1fd5c9[_0x1e1ba0(0x196)],_0x552df4=new categories({'name':_0x3ae953,'products':_0x211ed5}),_0x47d847=await categories['findOne']({'name':_0x3ae953});_0x47d847?_0x1fd5c9[_0x1e1ba0(0x122)]('errors',_0x3ae953+_0x1e1ba0(0x1c1)):_0x1fd5c9['flash']('success',_0x3ae953+_0x1e1ba0(0x1c4));const _0x596bd6=await _0x552df4[_0x1e1ba0(0x1bf)]();_0x2bc888[_0x1e1ba0(0x12f)](_0x1e1ba0(0x13b));}catch(_0xf372cb){console[_0x1e1ba0(0x139)](_0xf372cb);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x186),auth,async(_0x1dc705,_0xb8044b)=>{const _0x5c7f38=a0_0x561c0e;try{const {username:_0x10e98a,email:_0x29e540,role:_0x27e4c8}=_0x1dc705[_0x5c7f38(0x135)],_0x2277d=_0x1dc705[_0x5c7f38(0x135)],_0x146b77=await profile[_0x5c7f38(0x145)]({'email':_0x2277d[_0x5c7f38(0x158)]}),_0x5f5a4b=await master_shop['find']();console[_0x5c7f38(0x139)](_0x5c7f38(0x1c2),_0x5f5a4b);const _0x495346=_0x1dc705[_0x5c7f38(0x177)]['id'];console[_0x5c7f38(0x139)](_0x495346);const _0x519035=await categories['findById'](_0x495346);if(_0x5f5a4b[0x0][_0x5c7f38(0x142)]==_0x5c7f38(0x125))var _0x2ae29c=users['English'];else{if(_0x5f5a4b[0x0]['language']==_0x5c7f38(0x171))var _0x2ae29c=users[_0x5c7f38(0x171)];else{if(_0x5f5a4b[0x0][_0x5c7f38(0x142)]==_0x5c7f38(0x13c))var _0x2ae29c=users[_0x5c7f38(0x13c)];else{if(_0x5f5a4b[0x0]['language']==_0x5c7f38(0x168))var _0x2ae29c=users[_0x5c7f38(0x168)];else{if(_0x5f5a4b[0x0][_0x5c7f38(0x142)]==_0x5c7f38(0x16b))var _0x2ae29c=users['French'];else{if(_0x5f5a4b[0x0]['language']==_0x5c7f38(0x14b))var _0x2ae29c=users['Portuguese'];else{if(_0x5f5a4b[0x0][_0x5c7f38(0x142)]==_0x5c7f38(0x1c5))var _0x2ae29c=users[_0x5c7f38(0x1c5)];else{if(_0x5f5a4b[0x0][_0x5c7f38(0x142)]=='Arabic\x20(ae)')var _0x2ae29c=users[_0x5c7f38(0x178)];}}}}}}}_0xb8044b[_0x5c7f38(0x1ba)](_0x5c7f38(0x152),{'success':_0x1dc705[_0x5c7f38(0x122)]('success'),'errors':_0x1dc705[_0x5c7f38(0x122)]('errors'),'role':_0x2277d,'profile':_0x146b77,'master_shop':_0x5f5a4b,'user':_0x519035,'language':_0x2ae29c});}catch(_0x42a9b3){console[_0x5c7f38(0x139)](_0x42a9b3);}}),router['post'](a0_0x561c0e(0x186),auth,async(_0x5b6fc7,_0x32d1a3)=>{const _0x849058=a0_0x561c0e;try{const _0x32db9a=_0x5b6fc7[_0x849058(0x177)]['id'],_0x15ea47=await categories[_0x849058(0x13d)](_0x32db9a,_0x5b6fc7[_0x849058(0x196)]);_0x5b6fc7[_0x849058(0x122)](_0x849058(0x199),''+users['categories_edit']),_0x32d1a3[_0x849058(0x12f)](_0x849058(0x13b));}catch(_0x414125){console[_0x849058(0x139)](_0x414125);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x1d9),auth,async(_0x3fd37a,_0x6c216)=>{const _0xad933=a0_0x561c0e;try{const _0x29e375=_0x3fd37a[_0xad933(0x177)]['id'],_0x1fd751=await categories[_0xad933(0x156)](_0x29e375);_0x3fd37a['flash']('success',_0xad933(0x17a)),_0x6c216[_0xad933(0x12f)]('/products/categories');}catch(_0x5ec123){console[_0xad933(0x139)](_0x5ec123);}}),router['get'](a0_0x561c0e(0x161),auth,async(_0x5db92c,_0xe2b1f3)=>{const _0x21ded8=a0_0x561c0e;try{const {username:_0x13d9a7,email:_0x3b39a5,role:_0x561186}=_0x5db92c[_0x21ded8(0x135)],_0x36ad78=_0x5db92c['user'],_0x2df3d7=await profile['findOne']({'email':_0x36ad78['email']}),_0x2a9808=await master_shop[_0x21ded8(0x16c)]();console[_0x21ded8(0x139)]('master',_0x2a9808);const _0xf57d67=await brands['find']();if(_0x2a9808[0x0]['language']==_0x21ded8(0x125))var _0x34261d=users[_0x21ded8(0x1af)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]==_0x21ded8(0x171))var _0x34261d=users[_0x21ded8(0x171)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]=='German')var _0x34261d=users[_0x21ded8(0x13c)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]==_0x21ded8(0x168))var _0x34261d=users[_0x21ded8(0x168)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]==_0x21ded8(0x16b))var _0x34261d=users[_0x21ded8(0x16b)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]==_0x21ded8(0x14b))var _0x34261d=users[_0x21ded8(0x1b8)];else{if(_0x2a9808[0x0]['language']==_0x21ded8(0x1c5))var _0x34261d=users[_0x21ded8(0x1c5)];else{if(_0x2a9808[0x0][_0x21ded8(0x142)]==_0x21ded8(0x17c))var _0x34261d=users[_0x21ded8(0x178)];}}}}}}}_0xe2b1f3[_0x21ded8(0x1ba)](_0x21ded8(0x17f),{'success':_0x5db92c['flash'](_0x21ded8(0x199)),'errors':_0x5db92c['flash'](_0x21ded8(0x18f)),'role':_0x36ad78,'profile':_0x2df3d7,'master_shop':_0x2a9808,'user':_0xf57d67,'language':_0x34261d});}catch(_0x464ac9){console[_0x21ded8(0x139)](_0x464ac9);}}),router[a0_0x561c0e(0x12b)]('/brands',auth,async(_0x4bdc99,_0x2a5149)=>{const _0x3949f2=a0_0x561c0e;try{const {name:_0x2ecd27,products:_0x5c112c}=_0x4bdc99[_0x3949f2(0x196)],_0x231aff=new brands({'name':_0x2ecd27,'products':_0x5c112c}),_0x332301=await brands['findOne']({'name':_0x2ecd27});_0x332301?_0x4bdc99[_0x3949f2(0x122)](_0x3949f2(0x18f),_0x2ecd27+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4bdc99[_0x3949f2(0x122)](_0x3949f2(0x199),_0x2ecd27+_0x3949f2(0x163));const _0x401286=await _0x231aff['save']();_0x2a5149['redirect'](_0x3949f2(0x11f));}catch(_0x271fd4){console['log'](_0x271fd4);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x1a7),auth,async(_0x31d217,_0x2b4040)=>{const _0x36ed71=a0_0x561c0e;try{const {username:_0x5502f0,email:_0x4ca1de,role:_0x1ef357}=_0x31d217['user'],_0x2494bb=_0x31d217[_0x36ed71(0x135)],_0x5ea2d3=await profile[_0x36ed71(0x145)]({'email':_0x2494bb[_0x36ed71(0x158)]}),_0xb6ad45=await master_shop['find']();console[_0x36ed71(0x139)](_0x36ed71(0x1c2),_0xb6ad45);const _0x525500=_0x31d217[_0x36ed71(0x177)]['id'];console[_0x36ed71(0x139)](_0x525500);const _0x2b9fd6=await brands['findById'](_0x525500);if(_0xb6ad45[0x0]['language']==_0x36ed71(0x125))var _0x4e8537=users[_0x36ed71(0x1af)];else{if(_0xb6ad45[0x0][_0x36ed71(0x142)]==_0x36ed71(0x171))var _0x4e8537=users[_0x36ed71(0x171)];else{if(_0xb6ad45[0x0][_0x36ed71(0x142)]==_0x36ed71(0x13c))var _0x4e8537=users[_0x36ed71(0x13c)];else{if(_0xb6ad45[0x0]['language']=='Spanish')var _0x4e8537=users['Spanish'];else{if(_0xb6ad45[0x0][_0x36ed71(0x142)]==_0x36ed71(0x16b))var _0x4e8537=users[_0x36ed71(0x16b)];else{if(_0xb6ad45[0x0]['language']==_0x36ed71(0x14b))var _0x4e8537=users[_0x36ed71(0x1b8)];else{if(_0xb6ad45[0x0][_0x36ed71(0x142)]==_0x36ed71(0x1c5))var _0x4e8537=users[_0x36ed71(0x1c5)];else{if(_0xb6ad45[0x0][_0x36ed71(0x142)]==_0x36ed71(0x17c))var _0x4e8537=users['Arabic'];}}}}}}}_0x2b4040[_0x36ed71(0x1ba)](_0x36ed71(0x17f),{'success':_0x31d217[_0x36ed71(0x122)](_0x36ed71(0x199)),'errors':_0x31d217[_0x36ed71(0x122)](_0x36ed71(0x18f)),'role':_0x2494bb,'profile':_0x5ea2d3,'master_shop':_0xb6ad45,'user':_0x2b9fd6,'language':_0x4e8537});}catch(_0x4396fc){console[_0x36ed71(0x139)](_0x4396fc);}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x1a7),auth,async(_0x4d94c2,_0x1800c5)=>{const _0x41324a=a0_0x561c0e;try{const _0x2fe4d6=_0x4d94c2[_0x41324a(0x177)]['id'],_0xdc61b5=await brands[_0x41324a(0x13d)](_0x2fe4d6,_0x4d94c2['body']);_0x4d94c2[_0x41324a(0x122)]('success',_0x41324a(0x1cb)),_0x1800c5[_0x41324a(0x12f)](_0x41324a(0x11f));}catch(_0x1ef387){console[_0x41324a(0x139)](_0x1ef387);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x1bc),auth,async(_0x1f950b,_0x3a9de9)=>{const _0x3245ed=a0_0x561c0e;try{const _0x5beb56=_0x1f950b[_0x3245ed(0x177)]['id'],_0x24cd93=await brands[_0x3245ed(0x156)](_0x5beb56);_0x1f950b[_0x3245ed(0x122)](_0x3245ed(0x199),'brand\x20data\x20delete\x20successfully'),_0x3a9de9[_0x3245ed(0x12f)]('/products/brands');}catch(_0x33cd86){console[_0x3245ed(0x139)](_0x33cd86);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x187),auth,async(_0x34d5ac,_0x3668af)=>{const _0x11ec40=a0_0x561c0e;try{const {username:_0x254af7,email:_0x429a43,role:_0x3e968a}=_0x34d5ac[_0x11ec40(0x135)],_0x220cf8=_0x34d5ac[_0x11ec40(0x135)],_0x4caf95=await profile['findOne']({'email':_0x220cf8['email']}),_0x46464a=await master_shop[_0x11ec40(0x16c)]();console[_0x11ec40(0x139)](_0x11ec40(0x1c2),_0x46464a);const _0x1757bc=await units[_0x11ec40(0x16c)]();if(_0x46464a[0x0][_0x11ec40(0x142)]=='English\x20(US)')var _0x350e99=users[_0x11ec40(0x1af)];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x171))var _0x350e99=users[_0x11ec40(0x171)];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x13c))var _0x350e99=users[_0x11ec40(0x13c)];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x168))var _0x350e99=users[_0x11ec40(0x168)];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x16b))var _0x350e99=users[_0x11ec40(0x16b)];else{if(_0x46464a[0x0]['language']==_0x11ec40(0x14b))var _0x350e99=users['Portuguese'];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x1c5))var _0x350e99=users[_0x11ec40(0x1c5)];else{if(_0x46464a[0x0][_0x11ec40(0x142)]==_0x11ec40(0x17c))var _0x350e99=users['Arabic'];}}}}}}}_0x3668af[_0x11ec40(0x1ba)](_0x11ec40(0x134),{'success':_0x34d5ac['flash'](_0x11ec40(0x199)),'errors':_0x34d5ac[_0x11ec40(0x122)](_0x11ec40(0x18f)),'role':_0x220cf8,'profile':_0x4caf95,'master_shop':_0x46464a,'user':_0x1757bc,'language':_0x350e99});}catch(_0x1958f4){console[_0x11ec40(0x139)](_0x1958f4);}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x187),auth,async(_0x36daf7,_0x5e3584)=>{const _0x286851=a0_0x561c0e;try{const {name:_0x4df316,secondary_unit:_0x33f3ea,products:_0x828054}=_0x36daf7[_0x286851(0x196)],_0x13a42e=new units({'name':_0x4df316,'secondary_unit':_0x33f3ea,'products':_0x828054}),_0x2075b5=await units[_0x286851(0x145)]({'name':_0x4df316});_0x2075b5?_0x36daf7[_0x286851(0x122)](_0x286851(0x18f),_0x4df316+_0x286851(0x1a3)):_0x36daf7['flash'](_0x286851(0x199),_0x4df316+'\x20unit\x20is\x20add\x20successfully');const _0x3ed378=await _0x13a42e[_0x286851(0x1bf)]();_0x5e3584['redirect'](_0x286851(0x1ca));}catch(_0x38a281){console[_0x286851(0x139)](_0x38a281);}}),router['get'](a0_0x561c0e(0x1d8),auth,async(_0x8e4e99,_0x5d426a)=>{const _0xb36466=a0_0x561c0e;try{const {username:_0x37a579,email:_0x2e0588,role:_0x485c03}=_0x8e4e99[_0xb36466(0x135)],_0x4607c2=_0x8e4e99[_0xb36466(0x135)],_0x916f8f=await profile[_0xb36466(0x145)]({'email':_0x4607c2['email']}),_0x5b4ee3=await master_shop['find']();console[_0xb36466(0x139)](_0xb36466(0x1c2),_0x5b4ee3);const _0x411fa1=_0x8e4e99[_0xb36466(0x177)]['id'],_0x4b8182=await units[_0xb36466(0x175)](_0x411fa1);if(_0x5b4ee3[0x0][_0xb36466(0x142)]=='English\x20(US)')var _0xcb0985=users[_0xb36466(0x1af)];else{if(_0x5b4ee3[0x0]['language']==_0xb36466(0x171))var _0xcb0985=users[_0xb36466(0x171)];else{if(_0x5b4ee3[0x0][_0xb36466(0x142)]==_0xb36466(0x13c))var _0xcb0985=users[_0xb36466(0x13c)];else{if(_0x5b4ee3[0x0][_0xb36466(0x142)]=='Spanish')var _0xcb0985=users['Spanish'];else{if(_0x5b4ee3[0x0]['language']==_0xb36466(0x16b))var _0xcb0985=users[_0xb36466(0x16b)];else{if(_0x5b4ee3[0x0][_0xb36466(0x142)]==_0xb36466(0x14b))var _0xcb0985=users['Portuguese'];else{if(_0x5b4ee3[0x0]['language']=='Chinese')var _0xcb0985=users[_0xb36466(0x1c5)];else{if(_0x5b4ee3[0x0][_0xb36466(0x142)]==_0xb36466(0x17c))var _0xcb0985=users[_0xb36466(0x178)];}}}}}}}_0x5d426a[_0xb36466(0x1ba)](_0xb36466(0x134),{'success':_0x8e4e99[_0xb36466(0x122)](_0xb36466(0x199)),'errors':_0x8e4e99[_0xb36466(0x122)]('errors'),'role':_0x4607c2,'profile':_0x916f8f,'master_shop':_0x5b4ee3,'user':_0x4b8182,'language':_0xcb0985});}catch(_0x366d1a){console[_0xb36466(0x139)](_0x366d1a);}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x1d8),auth,async(_0xd30156,_0x335d63)=>{const _0x4aa784=a0_0x561c0e;try{const _0x367dd7=_0xd30156[_0x4aa784(0x177)]['id'],_0x5f168c=await units['findByIdAndUpdate'](_0x367dd7,_0xd30156[_0x4aa784(0x196)]);_0xd30156['flash'](_0x4aa784(0x199),'unit\x20data\x20update\x20successfully'),_0x335d63[_0x4aa784(0x12f)]('/products/units');}catch(_0x52655f){console['log'](_0x52655f);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x19a),auth,async(_0x883e0,_0x4c895a)=>{const _0x4daa32=a0_0x561c0e;try{const _0x17404d=_0x883e0[_0x4daa32(0x177)]['id'],_0x2be07c=await units[_0x4daa32(0x156)](_0x17404d);_0x883e0[_0x4daa32(0x122)](_0x4daa32(0x199),_0x4daa32(0x189)),_0x4c895a['redirect'](_0x4daa32(0x1ca));}catch(_0x1046d7){console[_0x4daa32(0x139)](_0x1046d7);}});const storage=multer['diskStorage']({'destination':(_0x5411f3,_0x40ee21,_0x2af92d)=>{const _0xda986b=a0_0x561c0e;_0x2af92d(null,_0xda986b(0x188));},'filename':(_0x41015f,_0x5930d1,_0x447dbf)=>{const _0xa670c1=a0_0x561c0e;_0x447dbf(null,Date[_0xa670c1(0x17d)]()+_0x5930d1[_0xa670c1(0x1b3)]);}}),upload=multer({'storage':storage});function a0_0x3bab(){const _0x301051=['/filter_product','save','189hMqeOT','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','master','defaultProduct.avif','\x20categories\x20is\x20add\x20successfully','Chinese','993327yRjBso','status','jsbarcode','Products\x20find_data','/products/units','brand\x20data\x20update\x20successfully','Primary_Code','aggregate','150OqOWVW','data','CODE128','\x20<>\x20','height','warehouse','xlsx','$product_stock','categ','utils','/units/:id','/categories/delete/:id','push','single','product_category','PBrands','/categories','/products/brands','maxProdPerUnit','alertquantity','flash','product_docs','min','English\x20(US)','createObjectURL','Brands','get','add_product','numeric','post','Secondary_Code','image','barcode\x20Product\x20master','redirect','message','SheetNames','PName','toString','units','user','Products\x20master','/barcode_data','express','log','/barcode/:id','/products/categories','German','findByIdAndUpdate','length','exports','5330100vmDeef','brand','language','edit_product','ProductCode','findOne','/products/view','/view/:id','Product_Code','json','PAlQty','Portuguese\x20(BR)','multer','../models/all_models','/view/add_products','secondary_code','product_details.product_name','Secondary_Units','categories','product_barcode_products','68830zYziRl','toBuffer','findByIdAndDelete','long','email','migrate_product_fule','Router','$product_details','4Uieiod','2751300aIFvOq','base64','Content-Disposition','Raw\x20Materials','/brands','filename','\x20brand\x20is\x20add\x20successfully','public/Migration/','forEach','setHeader','1588829kUKyTg','Spanish','/barcode_filter','Enabled','French','find','Workbook','bind','barcode\x20user_id','application/pdf','Hindi','/view','file','category','findById','8qYdZsK','params','Arabic','product\x20update\x20successfully','categories\x20data\x20delete\x20successfully','columns','Arabic\x20(ae)','now','unit','brands','$_id','$brand','edit\x20Product\x20master','Prod_Cat','/print_barcode_single/:id','/products_import_migrate_file','/categories/:id','/units','public/upload','unit\x20data\x20delete\x20successfully','products','max_number_per_units','product_code','Products\x20warehouse_data','Products_category','errors','diskStorage','../middleware/auth','hello','$category','product_barcode','maxStocks','body','$product_category','public/Migration','success','/units/delete/:id','/print_barcode_filter_search/','1229785Oyisnk','Maximum_Stocks','sku','end','addPage','pdfkit-table','Category','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Alert_QTY','50664ZJBqae','width','/brands/:id','$product_details.product_name','Units','/print_barcode_filter/','exceljs','map','PUnits','addWorksheet','English','Finished\x20Goods','secondary_unit','name','originalname','Product_Name','primary_code','/products_export_migrate_file','stock','Portuguese','write','render','concat','/brands/delete/:id','product_stock'];a0_0x3bab=function(){return _0x301051;};return a0_0x3bab();}router[a0_0x561c0e(0x128)](a0_0x561c0e(0x172),auth,async(_0x23a2d4,_0x5275ff)=>{const _0x52c029=a0_0x561c0e;try{const {username:_0x2cc54c,email:_0xe7b7c4,role:_0x3b3d11}=_0x23a2d4[_0x52c029(0x135)],_0x2748bc=_0x23a2d4[_0x52c029(0x135)],_0x3530d2=await profile[_0x52c029(0x145)]({'email':_0x2748bc[_0x52c029(0x158)]}),_0x5da187={'year':'numeric','month':_0x52c029(0x157),'day':_0x52c029(0x12a)},_0x26eb0a=await master_shop[_0x52c029(0x16c)]();console[_0x52c029(0x139)](_0x52c029(0x136),_0x26eb0a);const _0x1c87c2=await product[_0x52c029(0x16c)]();console[_0x52c029(0x139)]('Products\x20find_data',_0x1c87c2);const _0x1c6845=await warehouse[_0x52c029(0x1cd)]([{'$unwind':_0x52c029(0x15b)},{'$lookup':{'from':_0x52c029(0x18a),'localField':_0x52c029(0x150),'foreignField':'name','as':_0x52c029(0x123)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x52c029(0x1a8),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x52c029(0x1d5)}}}]);console[_0x52c029(0x139)](_0x52c029(0x18d),_0x1c6845),_0x1c6845[_0x52c029(0x165)](_0x3fcc0f=>{const _0x2bd55c=_0x52c029,_0x1fa84f=_0x1c87c2[_0x2bd55c(0x1ac)](_0x1cace0=>{const _0x15c63f=_0x2bd55c;_0x1cace0[_0x15c63f(0x1b2)]==_0x3fcc0f['_id']&&(_0x1cace0[_0x15c63f(0x1b7)]=parseInt(_0x1cace0[_0x15c63f(0x1b7)])+parseInt(_0x3fcc0f[_0x15c63f(0x1bd)]));});}),console['log'](_0x52c029(0x1c9),_0x1c87c2);if(_0x26eb0a[0x0][_0x52c029(0x142)]=='English\x20(US)')var _0x1d3821=users[_0x52c029(0x1af)];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]==_0x52c029(0x171))var _0x1d3821=users[_0x52c029(0x171)];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]==_0x52c029(0x13c))var _0x1d3821=users[_0x52c029(0x13c)];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]==_0x52c029(0x168))var _0x1d3821=users[_0x52c029(0x168)];else{if(_0x26eb0a[0x0]['language']==_0x52c029(0x16b))var _0x1d3821=users[_0x52c029(0x16b)];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]=='Portuguese\x20(BR)')var _0x1d3821=users[_0x52c029(0x1b8)];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]=='Chinese')var _0x1d3821=users['Chinese'];else{if(_0x26eb0a[0x0][_0x52c029(0x142)]==_0x52c029(0x17c))var _0x1d3821=users[_0x52c029(0x178)];}}}}}}}_0x5275ff[_0x52c029(0x1ba)]('products',{'success':_0x23a2d4[_0x52c029(0x122)](_0x52c029(0x199)),'errors':_0x23a2d4[_0x52c029(0x122)]('errors'),'alldata':_0x1c87c2,'profile':_0x3530d2,'master_shop':_0x26eb0a,'role':_0x2748bc,'product_stock':_0x1c6845,'language':_0x1d3821});}catch(_0x48d0ce){console[_0x52c029(0x139)](_0x48d0ce);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x14e),auth,async(_0x58305a,_0x35d049)=>{const _0x4c4c81=a0_0x561c0e;try{const {username:_0x5df71e,email:_0x228f8a,role:_0x4f5ca2}=_0x58305a[_0x4c4c81(0x135)],_0x2727de=_0x58305a['user'],_0x38b006=await profile[_0x4c4c81(0x145)]({'email':_0x2727de[_0x4c4c81(0x158)]}),_0x1834cd=await master_shop[_0x4c4c81(0x16c)]();console[_0x4c4c81(0x139)](_0x4c4c81(0x1c2),_0x1834cd);const _0x44380c=await categories[_0x4c4c81(0x16c)]({}),_0x7fcb3d=await brands[_0x4c4c81(0x16c)]({}),_0x3535eb=await units[_0x4c4c81(0x16c)]({}),_0x21c5ed=await warehouse['find']({'status':_0x4c4c81(0x16a)});if(_0x1834cd[0x0][_0x4c4c81(0x142)]==_0x4c4c81(0x125))var _0xc54960=users[_0x4c4c81(0x1af)];else{if(_0x1834cd[0x0][_0x4c4c81(0x142)]==_0x4c4c81(0x171))var _0xc54960=users[_0x4c4c81(0x171)];else{if(_0x1834cd[0x0][_0x4c4c81(0x142)]=='German')var _0xc54960=users[_0x4c4c81(0x13c)];else{if(_0x1834cd[0x0][_0x4c4c81(0x142)]==_0x4c4c81(0x168))var _0xc54960=users[_0x4c4c81(0x168)];else{if(_0x1834cd[0x0]['language']==_0x4c4c81(0x16b))var _0xc54960=users[_0x4c4c81(0x16b)];else{if(_0x1834cd[0x0][_0x4c4c81(0x142)]==_0x4c4c81(0x14b))var _0xc54960=users[_0x4c4c81(0x1b8)];else{if(_0x1834cd[0x0]['language']==_0x4c4c81(0x1c5))var _0xc54960=users[_0x4c4c81(0x1c5)];else{if(_0x1834cd[0x0]['language']==_0x4c4c81(0x17c))var _0xc54960=users[_0x4c4c81(0x178)];}}}}}}}_0x35d049[_0x4c4c81(0x1ba)](_0x4c4c81(0x129),{'success':_0x58305a[_0x4c4c81(0x122)](_0x4c4c81(0x199)),'errors':_0x58305a['flash']('errors'),'role':_0x2727de,'profile':_0x38b006,'categories':_0x44380c,'brands':_0x7fcb3d,'master_shop':_0x1834cd,'units':_0x3535eb,'language':_0xc54960,'find_data':_0x21c5ed});}catch(_0x3a0971){console[_0x4c4c81(0x139)](_0x3a0971);}}),router['post'](a0_0x561c0e(0x14e),auth,upload[a0_0x561c0e(0x1db)](a0_0x561c0e(0x12d)),async(_0x12f153,_0x2f5d8d)=>{const _0x372145=a0_0x561c0e;try{const {name:_0x4371d4,category:_0x2d78de,brand:_0x4e0e9d,unit:_0x316b73,alertquantity:_0x1e662e,stock:_0x8f4f1b,product_code:_0x5ddfcb,warehouse:_0x1b9c69,primary_ItemCode:_0x5b6e31,second_ItemCode:_0x4fe44c,second_unit:_0x1e8a9a,maxPerUnit:_0x25674e,MaxPerProduct:_0x1c6206}=_0x12f153[_0x372145(0x196)],_0x1142e9=_0x12f153['file']?.[_0x372145(0x162)]||_0x372145(0x1c3),_0x3e7671=new product({'image':_0x1142e9,'name':_0x4371d4,'category':_0x2d78de,'brand':_0x4e0e9d,'unit':_0x316b73,'alertquantity':_0x1e662e,'stock':_0x8f4f1b,'product_code':_0x5ddfcb,'warehouse':_0x1b9c69,'primary_code':_0x5b6e31,'secondary_code':_0x4fe44c,'second_unit':_0x1e8a9a,'maxStocks':_0x1c6206,'maxProdPerUnit':_0x25674e}),_0x56d0df=await _0x3e7671[_0x372145(0x1bf)](),_0x17fb86=await categories[_0x372145(0x145)]({'name':_0x2d78de});_0x17fb86['products']=parseInt(_0x17fb86[_0x372145(0x18a)])+0x1,await _0x17fb86[_0x372145(0x1bf)]();const _0x1cdfd6=await brands[_0x372145(0x145)]({'name':_0x4e0e9d});_0x1cdfd6[_0x372145(0x18a)]=parseInt(_0x1cdfd6[_0x372145(0x18a)])+0x1,await _0x1cdfd6['save']();const _0x4be1ca=await units[_0x372145(0x145)]({'name':_0x316b73});_0x4be1ca[_0x372145(0x18a)]=parseInt(_0x4be1ca['products'])+0x1,await _0x4be1ca[_0x372145(0x1bf)](),_0x12f153[_0x372145(0x122)](_0x372145(0x199),'product\x20add\x20successfully'),_0x2f5d8d[_0x372145(0x12f)]('/products/view');}catch(_0x3cf0a3){console['log'](_0x3cf0a3);}}),router[a0_0x561c0e(0x128)](a0_0x561c0e(0x147),auth,async(_0x6ff54,_0x4adf5f)=>{const _0x3ccb04=a0_0x561c0e;try{const {username:_0x545192,email:_0x3648df,role:_0x4928dd}=_0x6ff54[_0x3ccb04(0x135)],_0x29fe49=_0x6ff54[_0x3ccb04(0x135)],_0x1c24d9=await profile[_0x3ccb04(0x145)]({'email':_0x29fe49[_0x3ccb04(0x158)]}),_0x59a6d6=await master_shop[_0x3ccb04(0x16c)]();console['log'](_0x3ccb04(0x182),_0x59a6d6);const _0x571f26=_0x6ff54[_0x3ccb04(0x177)]['id'],_0x35d98f=await product[_0x3ccb04(0x175)](_0x571f26),_0x48f6e9=await categories[_0x3ccb04(0x16c)]({}),_0x210dfb=await brands[_0x3ccb04(0x16c)]({}),_0x15d59e=await units[_0x3ccb04(0x16c)]({}),_0x25a5fc=await warehouse[_0x3ccb04(0x16c)]({'status':_0x3ccb04(0x16a)}),_0x347dff=await units['aggregate']([{'$group':{'_id':_0x3ccb04(0x180),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x59a6d6[0x0][_0x3ccb04(0x142)]=='English\x20(US)')var _0x119568=users[_0x3ccb04(0x1af)];else{if(_0x59a6d6[0x0][_0x3ccb04(0x142)]==_0x3ccb04(0x171))var _0x119568=users[_0x3ccb04(0x171)];else{if(_0x59a6d6[0x0][_0x3ccb04(0x142)]=='German')var _0x119568=users[_0x3ccb04(0x13c)];else{if(_0x59a6d6[0x0]['language']==_0x3ccb04(0x168))var _0x119568=users['Spanish'];else{if(_0x59a6d6[0x0]['language']=='French')var _0x119568=users[_0x3ccb04(0x16b)];else{if(_0x59a6d6[0x0][_0x3ccb04(0x142)]=='Portuguese\x20(BR)')var _0x119568=users[_0x3ccb04(0x1b8)];else{if(_0x59a6d6[0x0][_0x3ccb04(0x142)]==_0x3ccb04(0x1c5))var _0x119568=users[_0x3ccb04(0x1c5)];else{if(_0x59a6d6[0x0][_0x3ccb04(0x142)]=='Arabic\x20(ae)')var _0x119568=users[_0x3ccb04(0x178)];}}}}}}}_0x4adf5f[_0x3ccb04(0x1ba)](_0x3ccb04(0x143),{'success':_0x6ff54['flash'](_0x3ccb04(0x199)),'errors':_0x6ff54['flash'](_0x3ccb04(0x18f)),'role':_0x29fe49,'profile':_0x1c24d9,'alldata':_0x35d98f,'categories':_0x48f6e9,'brands':_0x210dfb,'master_shop':_0x59a6d6,'units':_0x15d59e,'secondunit':_0x347dff,'find_data':_0x25a5fc,'language':_0x119568});}catch(_0x238c26){console['log'](_0x238c26);}}),router[a0_0x561c0e(0x12b)]('/view/:id',auth,upload['single']('image'),async(_0x109fa0,_0x5ec39f)=>{const _0x270719=a0_0x561c0e;try{console[_0x270719(0x139)](_0x270719(0x192));const _0xd6d49d=_0x109fa0['params']['id'],_0x5546c5=await product[_0x270719(0x175)](_0xd6d49d),{image:_0x38fcb0,name:_0x490c3c,category:_0x5caecb,brand:_0x1e4298,sku:_0x43188d,unit:_0x421f22,alertquantity:_0x523f20,product_code:_0x3651bd,warehouse:_0x2f3d17,primary_ItemCode:_0x5d3344,second_ItemCode:_0x3da06c,second_unit:_0x238746,maxPerUnit:_0xae1784,MaxPerProduct:_0x1a027d,prod_catdata:_0xb1b7f0}=_0x109fa0[_0x270719(0x196)];_0x109fa0[_0x270719(0x173)]&&(_0x5546c5[_0x270719(0x12d)]=_0x109fa0['file'][_0x270719(0x162)]);_0x5546c5[_0x270719(0x1b2)]=_0x490c3c,_0x5546c5['category']=_0x5caecb,_0x5546c5[_0x270719(0x141)]=_0x1e4298,_0x5546c5[_0x270719(0x19e)]=_0x43188d,_0x5546c5[_0x270719(0x17e)]=_0x421f22,_0x5546c5[_0x270719(0x121)]=_0x523f20,_0x5546c5[_0x270719(0x18c)]=_0x3651bd,_0x5546c5[_0x270719(0x1d3)]=_0x2f3d17,_0x5546c5['primary_code']=_0x5d3344,_0x5546c5[_0x270719(0x14f)]=_0x3da06c,_0x5546c5[_0x270719(0x1b1)]=_0x238746,_0x5546c5[_0x270719(0x195)]=_0x1a027d,_0x5546c5[_0x270719(0x120)]=_0xae1784,_0x5546c5[_0x270719(0x1dc)]=_0xb1b7f0;const _0x3a3f05=await _0x5546c5[_0x270719(0x1bf)]();console['log']('product\x20edit',_0x5546c5),_0x109fa0[_0x270719(0x122)](_0x270719(0x199),_0x270719(0x179)),_0x5ec39f[_0x270719(0x12f)](_0x270719(0x146));}catch(_0x1f1e35){console[_0x270719(0x139)](_0x1f1e35);}}),router['get'](a0_0x561c0e(0x13a),auth,async(_0x298b09,_0x18a5fe)=>{const _0x3d3e4c=a0_0x561c0e;try{const {username:_0x23c826,email:_0x24d0a8,role:_0x41bb3a}=_0x298b09[_0x3d3e4c(0x135)],_0x46c7c3=_0x298b09[_0x3d3e4c(0x135)],_0x9a4175=await profile['findOne']({'email':_0x46c7c3['email']}),_0x20c0ee=await master_shop[_0x3d3e4c(0x16c)]();console[_0x3d3e4c(0x139)](_0x3d3e4c(0x12e),_0x20c0ee);const _0x122280=_0x298b09[_0x3d3e4c(0x177)]['id'],_0x45df77=await product[_0x3d3e4c(0x175)](_0x122280);console[_0x3d3e4c(0x139)](_0x3d3e4c(0x16f),_0x45df77);if(_0x20c0ee[0x0]['language']=='English\x20(US)')var _0x1f8564=users[_0x3d3e4c(0x1af)];else{if(_0x20c0ee[0x0][_0x3d3e4c(0x142)]=='Hindi')var _0x1f8564=users[_0x3d3e4c(0x171)];else{if(_0x20c0ee[0x0][_0x3d3e4c(0x142)]==_0x3d3e4c(0x13c))var _0x1f8564=users[_0x3d3e4c(0x13c)];else{if(_0x20c0ee[0x0][_0x3d3e4c(0x142)]==_0x3d3e4c(0x168))var _0x1f8564=users['Spanish'];else{if(_0x20c0ee[0x0][_0x3d3e4c(0x142)]==_0x3d3e4c(0x16b))var _0x1f8564=users[_0x3d3e4c(0x16b)];else{if(_0x20c0ee[0x0][_0x3d3e4c(0x142)]==_0x3d3e4c(0x14b))var _0x1f8564=users[_0x3d3e4c(0x1b8)];else{if(_0x20c0ee[0x0]['language']=='Chinese')var _0x1f8564=users[_0x3d3e4c(0x1c5)];else{if(_0x20c0ee[0x0]['language']==_0x3d3e4c(0x17c))var _0x1f8564=users[_0x3d3e4c(0x178)];}}}}}}}_0x18a5fe['render'](_0x3d3e4c(0x194),{'success':_0x298b09[_0x3d3e4c(0x122)](_0x3d3e4c(0x199)),'errors':_0x298b09[_0x3d3e4c(0x122)](_0x3d3e4c(0x18f)),'role':_0x46c7c3,'profile':_0x9a4175,'alldata':_0x45df77,'master_shop':_0x20c0ee,'language':_0x1f8564});}catch(_0x24c1d7){console[_0x3d3e4c(0x139)](_0x24c1d7);}}),router['get'](a0_0x561c0e(0x1b6),auth,async(_0x4b98c3,_0x3634bd)=>{const _0x296010=a0_0x561c0e;try{const _0x28cd68=new excelJS[(_0x296010(0x16d))](),_0x46af89=_0x28cd68[_0x296010(0x1ae)]('Products');return _0x46af89[_0x296010(0x17b)]=[{'header':_0x296010(0x1b4),'key':_0x296010(0x132),'width':0xa},{'header':_0x296010(0x127),'key':_0x296010(0x1dd),'width':0xa},{'header':_0x296010(0x1a9),'key':_0x296010(0x1ad),'width':0xa},{'header':_0x296010(0x151),'key':'PSecondaryUnits','width':0xa},{'header':'max_number_per_units','key':'MaxperUnits','width':0xa},{'header':_0x296010(0x1cc),'key':'ProductCode','width':0xa},{'header':_0x296010(0x12c),'key':_0x296010(0x144),'width':0xa},{'header':_0x296010(0x148),'key':_0x296010(0x144),'width':0xa},{'header':_0x296010(0x1a2),'key':'PCat','width':0xa},{'header':_0x296010(0x1a4),'key':_0x296010(0x14a),'width':0xa},{'header':'Maximum_Stocks','key':_0x296010(0x14a),'width':0xa},{'header':'Products_category','key':_0x296010(0x183),'width':0xa}],_0x3634bd[_0x296010(0x166)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x3634bd[_0x296010(0x166)](_0x296010(0x15f),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x28cd68[_0x296010(0x1d4)][_0x296010(0x1b9)](_0x3634bd)['then'](()=>{const _0x4c2cdd=_0x296010;_0x3634bd[_0x4c2cdd(0x1c7)](0xc8);});}catch(_0x24dc66){_0x3634bd[_0x296010(0x1c7)](0x190)['send'](_0x24dc66);}});const storage1=multer[a0_0x561c0e(0x190)]({'destination':(_0x4f79af,_0xc6fb6b,_0x1ef738)=>{const _0x20df9f=a0_0x561c0e;_0x1ef738(null,_0x20df9f(0x198));},'filename':(_0x582824,_0x1f5ea8,_0x2251b5)=>{const _0x52da48=a0_0x561c0e;_0x2251b5(null,Date[_0x52da48(0x17d)]()+_0x1f5ea8[_0x52da48(0x1b3)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x561c0e(0x185),auth,uploadMigrate['single'](a0_0x561c0e(0x159)),async(_0x8e8e92,_0x1edcb2)=>{const _0x3f3b4f=a0_0x561c0e,_0x5ecc6b=_0x8e8e92[_0x3f3b4f(0x173)][_0x3f3b4f(0x162)],_0x459793=await xlsx['readFile'](_0x3f3b4f(0x164)+_0x5ecc6b);let _0x33ef09=_0x459793[_0x3f3b4f(0x131)],_0x3b0f9e=xlsx[_0x3f3b4f(0x1d7)]['sheet_to_json'](_0x459793['Sheets'][_0x33ef09[0x0]]);for(const _0x5b2bcc of _0x3b0f9e){const _0x554566=_0x5b2bcc[_0x3f3b4f(0x1b4)],_0x23f931=_0x5b2bcc['Brands'],_0x4cf59e=_0x5b2bcc[_0x3f3b4f(0x1a9)],_0x337d14=_0x5b2bcc[_0x3f3b4f(0x151)],_0x1908c9=_0x5b2bcc[_0x3f3b4f(0x148)],_0x30da9d=_0x5b2bcc[_0x3f3b4f(0x1a2)],_0x880918=_0x5b2bcc['Alert_QTY'],_0x5c76c2=_0x5b2bcc['Primary_Code'],_0x16a06a=_0x5b2bcc[_0x3f3b4f(0x12c)],_0x31322e=_0x5b2bcc[_0x3f3b4f(0x19d)],_0x15e66d=_0x5b2bcc[_0x3f3b4f(0x18b)],_0x5b7f2c=_0x5b2bcc[_0x3f3b4f(0x18e)];try{let _0x2e5a2b=await categories[_0x3f3b4f(0x145)]({'name':_0x30da9d});if(!_0x2e5a2b){const _0x35e58e=new categories({'name':_0x30da9d,'products':'0'});_0x2e5a2b=await _0x35e58e[_0x3f3b4f(0x1bf)]();}let _0x1cb95c=await brands['findOne']({'name':_0x23f931});if(!_0x1cb95c){const _0xab420e=new brands({'name':_0x23f931,'products':'0'});_0x1cb95c=await _0xab420e['save']();}let _0x385378=await units[_0x3f3b4f(0x145)]({'name':_0x4cf59e,'secondary_unit':_0x337d14});if(!_0x385378){const _0x5645e1=new units({'name':_0x4cf59e,'secondary_unit':_0x337d14,'products':'0'});_0x385378=await _0x5645e1[_0x3f3b4f(0x1bf)]();}const _0xce721e=await product[_0x3f3b4f(0x16c)]({'name':_0x554566,'category':_0x2e5a2b[_0x3f3b4f(0x1b2)],'brand':_0x1cb95c[_0x3f3b4f(0x1b2)],'secondary_unit':_0x385378[_0x3f3b4f(0x1b1)],'product_code':_0x1908c9});console[_0x3f3b4f(0x139)](_0xce721e[_0x3f3b4f(0x13e)]+_0x3f3b4f(0x1d1)+_0x2e5a2b[_0x3f3b4f(0x1b2)]+_0x3f3b4f(0x1d1)+_0x1cb95c['name']+'\x20<>\x20'+_0x385378[_0x3f3b4f(0x1b1)]+_0x3f3b4f(0x1d1)+_0x1908c9+_0x3f3b4f(0x1d1)+_0x554566);if(_0xce721e[_0x3f3b4f(0x13e)]===0x0){const _0x588ff2=new product({'image':_0x3f3b4f(0x1c3),'name':_0x554566,'category':_0x2e5a2b[_0x3f3b4f(0x1b2)],'brand':_0x1cb95c['name'],'unit':_0x385378[_0x3f3b4f(0x1b2)],'alertquantity':_0x880918,'product_code':_0x1908c9,'secondary_unit':_0x385378[_0x3f3b4f(0x1b1)],'primary_code':_0x5c76c2,'secondary_code':_0x16a06a,'maxStocks':_0x31322e,'maxProdPerUnit':_0x15e66d,'product_category':_0x5b7f2c}),_0x862106=await _0x588ff2[_0x3f3b4f(0x1bf)]();_0x2e5a2b['products']=parseInt(_0x2e5a2b['products'])+0x1,await _0x2e5a2b[_0x3f3b4f(0x1bf)](),_0x1cb95c['products']=parseInt(_0x1cb95c['products'])+0x1,await _0x1cb95c[_0x3f3b4f(0x1bf)](),_0x385378['products']=parseInt(_0x385378[_0x3f3b4f(0x18a)])+0x1,await _0x385378[_0x3f3b4f(0x1bf)](),_0x8e8e92['flash']('success',_0x554566+'\x20added\x20successfully');}else{console[_0x3f3b4f(0x139)](_0xce721e[0x0]);const _0x3fd537=_0xce721e[0x0];_0x3fd537[_0x3f3b4f(0x174)]=_0x2e5a2b[_0x3f3b4f(0x1b2)],_0x3fd537[_0x3f3b4f(0x141)]=_0x1cb95c[_0x3f3b4f(0x1b2)],_0x3fd537[_0x3f3b4f(0x17e)]=_0x385378[_0x3f3b4f(0x1b2)],_0x3fd537[_0x3f3b4f(0x121)]=_0x880918,_0x3fd537['product_code']=_0x1908c9,_0x3fd537['secondary_unit']=_0x385378['secondary_unit'],_0x3fd537[_0x3f3b4f(0x1b5)]=_0x5c76c2,_0x3fd537['secondary_code']=_0x16a06a,_0x3fd537[_0x3f3b4f(0x195)]=_0x31322e,_0x3fd537[_0x3f3b4f(0x120)]=_0x15e66d,_0x3fd537[_0x3f3b4f(0x1dc)]=_0x5b7f2c;const _0x5f30c6=await _0x3fd537[_0x3f3b4f(0x1bf)]();_0x8e8e92[_0x3f3b4f(0x122)](_0x3f3b4f(0x199),_0x5f30c6[_0x3f3b4f(0x1b2)]+'\x20Edit\x20Successfully');}}catch(_0x39976b){_0x1edcb2[_0x3f3b4f(0x1c7)](0x1f4)['json']({'proderror':_0x39976b[_0x3f3b4f(0x130)],'aproduct':_0x554566});}}_0x1edcb2[_0x3f3b4f(0x12f)](_0x3f3b4f(0x146));}),router[a0_0x561c0e(0x12b)]('/select_data',auth,async(_0x4d6be8,_0x16aa01)=>{const _0x4e11f7=a0_0x561c0e;try{console[_0x4e11f7(0x139)](_0x4d6be8['body']);const {data_cateory:_0xb5a1cb,datachoose:_0x69b74c}=_0x4d6be8[_0x4e11f7(0x196)];var _0x9c3fed;if(_0x69b74c=='prod_categ')_0x9c3fed=await product[_0x4e11f7(0x1cd)]([{'$group':{'_id':_0x4e11f7(0x197)}}]);else{if(_0x69b74c==_0x4e11f7(0x17f))_0x9c3fed=await product[_0x4e11f7(0x1cd)]([{'$match':{'product_category':_0xb5a1cb}},{'$group':{'_id':_0x4e11f7(0x181)}}]);else _0x69b74c==_0x4e11f7(0x1d6)&&(_0x9c3fed=await product[_0x4e11f7(0x1cd)]([{'$match':{'product_category':_0xb5a1cb}},{'$group':{'_id':_0x4e11f7(0x193)}}]));}_0x16aa01[_0x4e11f7(0x149)](_0x9c3fed);}catch(_0x5d9b56){_0x16aa01[_0x4e11f7(0x149)]({'message':_0x5d9b56[_0x4e11f7(0x130)]});}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x1be),auth,async(_0x77bcba,_0x3c3a6e)=>{const _0x4a03dc=a0_0x561c0e;try{const {data_choosing:_0x64763,data_selected:_0x3b8c46}=_0x77bcba[_0x4a03dc(0x196)];var _0x567141;if(_0x64763=='prod_categ')_0x567141=await product[_0x4a03dc(0x1cd)]([{'$match':{'product_category':_0x3b8c46}}]);else{if(_0x64763==_0x4a03dc(0x17f))_0x567141=await product['aggregate']([{'$match':{'brand':_0x3b8c46}}]);else _0x64763==_0x4a03dc(0x1d6)&&(_0x567141=await product['aggregate']([{'$match':{'category':_0x3b8c46}}]));}_0x3c3a6e[_0x4a03dc(0x149)](_0x567141);}catch(_0x2ff724){_0x3c3a6e[_0x4a03dc(0x149)]({'message':_0x2ff724['message']});}}),router[a0_0x561c0e(0x128)]('/print_barcode',auth,async(_0x10b033,_0x48c5fa)=>{const _0x8816db=a0_0x561c0e,_0x1318fe=_0x10b033[_0x8816db(0x135)],_0x2c017d=await profile[_0x8816db(0x145)]({'email':_0x1318fe[_0x8816db(0x158)]}),_0x22489b=await master_shop['find'](),_0x400ea9=await product[_0x8816db(0x16c)]();if(_0x22489b[0x0][_0x8816db(0x142)]==_0x8816db(0x125))var _0x25017e=users[_0x8816db(0x1af)];else{if(_0x22489b[0x0][_0x8816db(0x142)]==_0x8816db(0x171))var _0x25017e=users[_0x8816db(0x171)];else{if(_0x22489b[0x0][_0x8816db(0x142)]=='German')var _0x25017e=users['German'];else{if(_0x22489b[0x0]['language']=='Spanish')var _0x25017e=users[_0x8816db(0x168)];else{if(_0x22489b[0x0][_0x8816db(0x142)]==_0x8816db(0x16b))var _0x25017e=users[_0x8816db(0x16b)];else{if(_0x22489b[0x0][_0x8816db(0x142)]==_0x8816db(0x14b))var _0x25017e=users[_0x8816db(0x1b8)];else{if(_0x22489b[0x0]['language']==_0x8816db(0x1c5))var _0x25017e=users['Chinese'];else{if(_0x22489b[0x0][_0x8816db(0x142)]=='Arabic\x20(ae)')var _0x25017e=users['Arabic'];}}}}}}}_0x48c5fa[_0x8816db(0x1ba)](_0x8816db(0x153),{'success':_0x10b033[_0x8816db(0x122)](_0x8816db(0x199)),'errors':_0x10b033[_0x8816db(0x122)]('errors'),'role':_0x1318fe,'profile':_0x2c017d,'products':_0x400ea9,'master_shop':_0x22489b,'language':_0x25017e});}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x137),auth,async(_0x4264c1,_0x561892)=>{const _0x4ae209=a0_0x561c0e,_0x4ad8e8=await product[_0x4ae209(0x16c)]();_0x561892[_0x4ae209(0x149)]({'data':_0x4ad8e8});}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x169),auth,async(_0x1f1327,_0xa6b0a2)=>{const _0x175c7a=a0_0x561c0e;try{const {dataProdCat:_0x168018,dataProdIdentity:_0x1f9cfa}=_0x1f1327[_0x175c7a(0x196)];var _0x425462;switch(_0x168018){case'fg':switch(_0x1f9cfa){case'Brands':_0x425462=await product['aggregate']([{'$match':{'product_category':_0x175c7a(0x1b0)}},{'$group':{'_id':_0x175c7a(0x181)}},{'$project':{'brand':_0x175c7a(0x180)}}]);break;case _0x175c7a(0x1a2):_0x425462=await product[_0x175c7a(0x1cd)]([{'$match':{'product_category':_0x175c7a(0x1b0)}},{'$group':{'_id':_0x175c7a(0x193)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x1f9cfa){case _0x175c7a(0x127):_0x425462=await product['aggregate']([{'$match':{'product_category':_0x175c7a(0x160)}},{'$group':{'_id':_0x175c7a(0x181)}},{'$project':{'brand':_0x175c7a(0x180)}}]);break;case _0x175c7a(0x1a2):_0x425462=await product[_0x175c7a(0x1cd)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x175c7a(0x193)}},{'$project':{'category':_0x175c7a(0x180)}}]);break;}break;}_0xa6b0a2[_0x175c7a(0x149)](_0x425462);}catch(_0x1e34d3){_0xa6b0a2[_0x175c7a(0x149)]({'message':_0x1e34d3[_0x175c7a(0x130)]});}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x1aa),auth,async(_0x116ff0,_0x49f9f4)=>{const _0x28625b=a0_0x561c0e;try{console[_0x28625b(0x139)](_0x116ff0[_0x28625b(0x196)]);const {prod_cat:_0x1daf30,identity:_0x5389b6,valueData:_0x474392,typeofbarcode:_0x5d5a95}=_0x116ff0[_0x28625b(0x196)];let _0x318a67;switch(_0x1daf30){case'fg':if(_0x5389b6==_0x28625b(0x127))_0x318a67=await product[_0x28625b(0x1cd)]([{'$match':{'product_category':_0x28625b(0x1b0),'brand':_0x474392}}]);else _0x5389b6=='Category'&&(_0x318a67=await product[_0x28625b(0x1cd)]([{'$match':{'product_category':_0x28625b(0x1b0),'category':_0x474392}}]));break;case'rm':if(_0x5389b6==_0x28625b(0x127))_0x318a67=await product[_0x28625b(0x1cd)]([{'$match':{'product_category':_0x28625b(0x160),'brand':_0x474392}}]);else _0x5389b6==_0x28625b(0x1a2)&&(_0x318a67=await product[_0x28625b(0x1cd)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x474392}}]));break;}const _0x22b783=_0x3b754f=>_0x3b754f*0x48,_0x555b2f={'width':0x3,'height':0x1},_0x5c7a8e=new PDFDocument({'margin':_0x22b783(0.75),'size':[_0x22b783(_0x555b2f[_0x28625b(0x1a6)]),_0x22b783(_0x555b2f[_0x28625b(0x1d2)])],'bufferPages':!![]}),_0x3b4bc1=_0x318a67['length'];for(let _0x1e0669=0x0;_0x1e0669<=_0x3b4bc1;_0x1e0669++){if(_0x1e0669!=_0x3b4bc1){const _0x279cb5=_0x318a67[_0x1e0669][_0x28625b(0x1b2)],_0x54ab2b=_0x318a67[_0x1e0669][_0x28625b(0x1b5)],_0x2ef714=_0x318a67[_0x1e0669][_0x28625b(0x14f)],_0x404f8a=_0x318a67[_0x1e0669][_0x28625b(0x18c)];var _0x46c22d;switch(_0x5d5a95){case'1':_0x46c22d=_0x54ab2b;break;case'2':_0x46c22d=_0x2ef714;break;case'3':_0x46c22d=_0x404f8a;break;}const _0x19b9c3={'width':0xd2,'height':0x64},_0x3e8a34={'width':_0x22b783(_0x555b2f[_0x28625b(0x1a6)]),'height':_0x22b783(_0x555b2f['height'])},_0x31e4b7=new Canvas();JsBarcode(_0x31e4b7,_0x46c22d,{'format':_0x28625b(0x1d0),'height':_0x19b9c3[_0x28625b(0x1d2)],'displayValue':!![],'text':_0x46c22d});const _0x52f502=_0x31e4b7[_0x28625b(0x155)](),_0x1b2de4=_0x3e8a34[_0x28625b(0x1a6)]/_0x19b9c3[_0x28625b(0x1a6)],_0x2de224=_0x3e8a34[_0x28625b(0x1d2)]/_0x19b9c3[_0x28625b(0x1d2)],_0x2776bd=Math['min'](_0x1b2de4,_0x2de224),_0x559d3c=_0x19b9c3[_0x28625b(0x1a6)]*_0x2776bd,_0x3e7fb0=_0x19b9c3['height']*_0x2776bd,_0x2d5616=(_0x3e8a34[_0x28625b(0x1a6)]-_0x559d3c)/0x2,_0x29c568=(_0x3e8a34['height']-_0x3e7fb0)/0x2;_0x5c7a8e[_0x28625b(0x12d)](_0x52f502,_0x2d5616,_0x29c568,{'width':_0x559d3c,'height':_0x3e7fb0}),_0x1e0669!=_0x3b4bc1&&_0x5c7a8e[_0x28625b(0x1a0)]();}}const _0x2612b9=[];_0x5c7a8e['on'](_0x28625b(0x1cf),_0x2612b9['push'][_0x28625b(0x16e)](_0x2612b9)),_0x5c7a8e['on'](_0x28625b(0x19f),()=>{const _0x1a301f=_0x28625b,_0x44df4e=Buffer[_0x1a301f(0x1bb)](_0x2612b9),_0x47f878=new Blob([_0x44df4e],{'type':_0x1a301f(0x170)}),_0x11bbbc=URL[_0x1a301f(0x126)](_0x47f878);_0x49f9f4[_0x1a301f(0x149)]({'pdfContent':_0x44df4e['toString'](_0x1a301f(0x15e))});}),_0x5c7a8e[_0x28625b(0x19f)]();}catch(_0xf62f19){_0x49f9f4[_0x28625b(0x149)]({'message':_0xf62f19[_0x28625b(0x130)]});}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x19b),auth,async(_0x106408,_0x14fb8b)=>{const _0x52bec1=a0_0x561c0e;try{console['log'](_0x106408[_0x52bec1(0x196)]);const {prod_cat:_0x5d9c84,identity:_0xc2974d,valueData:_0x35ed2e}=_0x106408[_0x52bec1(0x196)];let _0x5285d8;switch(_0x5d9c84){case'fg':if(_0xc2974d=='Brands')_0x5285d8=await product[_0x52bec1(0x1cd)]([{'$match':{'product_category':_0x52bec1(0x1b0),'brand':_0x35ed2e}}]);else _0xc2974d==_0x52bec1(0x1a2)&&(_0x5285d8=await product[_0x52bec1(0x1cd)]([{'$match':{'product_category':_0x52bec1(0x1b0),'category':_0x35ed2e}}]));break;case'rm':if(_0xc2974d==_0x52bec1(0x127))_0x5285d8=await product[_0x52bec1(0x1cd)]([{'$match':{'product_category':_0x52bec1(0x160),'brand':_0x35ed2e}}]);else _0xc2974d==_0x52bec1(0x1a2)&&(_0x5285d8=await product['aggregate']([{'$match':{'product_category':_0x52bec1(0x160),'category':_0x35ed2e}}]));break;}_0x14fb8b[_0x52bec1(0x149)](_0x5285d8);}catch(_0x2423a5){_0x14fb8b[_0x52bec1(0x149)]({'message':_0x2423a5[_0x52bec1(0x130)]});}}),router[a0_0x561c0e(0x12b)](a0_0x561c0e(0x184),auth,async(_0x1edaa7,_0x12fe2b)=>{const _0x4ddecc=a0_0x561c0e;try{const _0x5c3f88=_0x1edaa7[_0x4ddecc(0x177)]['id'],{copies:_0x331ca3,typeofbarcode:_0x416618}=_0x1edaa7[_0x4ddecc(0x196)];var _0x235003=await product[_0x4ddecc(0x175)](_0x5c3f88);const _0x406090=_0x244efe=>_0x244efe*0x48,_0x2a7a50={'width':0x3,'height':0x1},_0x43b150=new PDFDocument({'margin':_0x406090(0.75),'size':[_0x406090(_0x2a7a50['width']),_0x406090(_0x2a7a50[_0x4ddecc(0x1d2)])],'bufferPages':!![]}),_0x89d443=_0x331ca3,_0xcfa766=_0x235003['name'],_0x1fd4fc=_0x235003[_0x4ddecc(0x1b5)],_0x3293af=_0x235003['secondary_code'],_0xf216c0=_0x235003[_0x4ddecc(0x18c)];let _0x1b54d2;switch(_0x416618){case'1':_0x1b54d2=_0x1fd4fc;break;case'2':_0x1b54d2=_0x3293af;break;case'3':_0x1b54d2=_0xf216c0;break;}const _0x3be15c={'width':0xd2,'height':0x64},_0x2078c8={'width':_0x406090(_0x2a7a50[_0x4ddecc(0x1a6)]),'height':_0x406090(_0x2a7a50[_0x4ddecc(0x1d2)])};for(let _0x1f2e02=0x1;_0x1f2e02<=_0x89d443;_0x1f2e02++){const _0x47dee8=new Canvas();JsBarcode(_0x47dee8,_0x1b54d2,{'format':_0x4ddecc(0x1d0),'height':_0x3be15c[_0x4ddecc(0x1d2)],'displayValue':!![],'text':_0x1b54d2});const _0x2b6e24=_0x47dee8[_0x4ddecc(0x155)](),_0x45b69c=_0x2078c8['width']/_0x3be15c[_0x4ddecc(0x1a6)],_0x20b2b1=_0x2078c8[_0x4ddecc(0x1d2)]/_0x3be15c[_0x4ddecc(0x1d2)],_0x45c0aa=Math[_0x4ddecc(0x124)](_0x45b69c,_0x20b2b1),_0x4333a3=_0x3be15c['width']*_0x45c0aa,_0x1db466=_0x3be15c[_0x4ddecc(0x1d2)]*_0x45c0aa,_0x14ba9b=(_0x2078c8[_0x4ddecc(0x1a6)]-_0x4333a3)/0x2,_0x414ac6=(_0x2078c8[_0x4ddecc(0x1d2)]-_0x1db466)/0x2;_0x43b150[_0x4ddecc(0x12d)](_0x2b6e24,_0x14ba9b,_0x414ac6,{'width':_0x4333a3,'height':_0x1db466}),_0x1f2e02!=_0x89d443&&_0x43b150[_0x4ddecc(0x1a0)]();}const _0x2b35b5=[];_0x43b150['on'](_0x4ddecc(0x1cf),_0x2b35b5[_0x4ddecc(0x1da)][_0x4ddecc(0x16e)](_0x2b35b5)),_0x43b150['on'](_0x4ddecc(0x19f),()=>{const _0x59c6fb=_0x4ddecc,_0x56f9e6=Buffer[_0x59c6fb(0x1bb)](_0x2b35b5),_0x2164e9=new Blob([_0x56f9e6],{'type':_0x59c6fb(0x170)}),_0x2e3465=URL[_0x59c6fb(0x126)](_0x2164e9);_0x12fe2b[_0x59c6fb(0x149)]({'pdfContent':_0x56f9e6[_0x59c6fb(0x133)](_0x59c6fb(0x15e))});}),_0x43b150[_0x4ddecc(0x19f)]();}catch(_0x204755){_0x12fe2b['json']({'message':_0x204755[_0x4ddecc(0x130)]});}}),module[a0_0x561c0e(0x13f)]=router;