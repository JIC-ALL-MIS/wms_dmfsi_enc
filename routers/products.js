const a0_0x25d49c=a0_0x4118;(function(_0xecb9a3,_0x1607d1){const _0x2cd69d=a0_0x4118,_0x4c3409=_0xecb9a3();while(!![]){try{const _0x511f90=parseInt(_0x2cd69d(0x24e))/0x1*(parseInt(_0x2cd69d(0x1b4))/0x2)+parseInt(_0x2cd69d(0x226))/0x3*(-parseInt(_0x2cd69d(0x25c))/0x4)+parseInt(_0x2cd69d(0x262))/0x5+parseInt(_0x2cd69d(0x261))/0x6*(parseInt(_0x2cd69d(0x1b2))/0x7)+parseInt(_0x2cd69d(0x25d))/0x8+parseInt(_0x2cd69d(0x1b1))/0x9*(-parseInt(_0x2cd69d(0x1f7))/0xa)+parseInt(_0x2cd69d(0x1dd))/0xb;if(_0x511f90===_0x1607d1)break;else _0x4c3409['push'](_0x4c3409['shift']());}catch(_0x11b5a2){_0x4c3409['push'](_0x4c3409['shift']());}}}(a0_0x1903,0xa2baa));function a0_0x4118(_0xeadd94,_0x54e613){const _0x19031b=a0_0x1903();return a0_0x4118=function(_0x4118fa,_0x17c9c8){_0x4118fa=_0x4118fa-0x1a6;let _0x440df5=_0x19031b[_0x4118fa];return _0x440df5;},a0_0x4118(_0xeadd94,_0x54e613);}function a0_0x1903(){const _0x3fb1b9=['defaultProduct.avif','126045DlSsJt','7aFOZvm','findOne','2eVCTSf','now','findByIdAndDelete','product_barcode','$product_docs','secondary_code','single','/select_data','$category','brand\x20data\x20delete\x20successfully','Product_Name','/barcode_data','aggregate','Arabic','Secondary_Units','utils','post','barcode\x20Product\x20master','bind','Primary_Code','unit','image','filename','product_code','Content-Disposition','brand\x20data\x20update\x20successfully','/categories/:id','Product_Code','json','unit\x20data\x20delete\x20successfully','/barcode_filter','Alert_QTY','readFile','MaxperUnits','product_category','log','Products\x20warehouse_data','product_details.product_name','express/lib/response','addWorksheet','email','5157284cyPDAe','maxProdPerUnit','Workbook','PSecondaryUnits','product\x20edit','Arabic\x20(ae)','Portuguese','PName','Raw\x20Materials','toBuffer','Chinese','save','toString','$brand','render','base64','product\x20update\x20successfully','edit\x20Product\x20master','/print_barcode_single/:id','/brands','/units/delete/:id','language','PCat','canvas','exports','findById','510akxuuL','name','express','brands','map','/brands/delete/:id','alertquantity','Brands','/view','products','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Enabled','Sheets','Units','barcode\x20user_id','/brands/:id','Maximum_Stocks','Category','PUnits','/products/categories','errors','findByIdAndUpdate','$secondary_unit','maxStocks','end','categ','Products\x20find_data','primary_code','find','/products/brands','Router','exceljs','concat','originalname','public/upload','_id','$product_details.product_stock','params','Products\x20master','long','stock','\x20brand\x20is\x20add\x20successfully','body','Finished\x20Goods','length','$product_name','success','1783737CrZahQ','$_id','German','send','$product_stock','diskStorage','categories_edit','Hindi','/view/:id','multer','jsbarcode','public/Migration/','get','SheetNames','\x20<>\x20','edit_product','$product_category','sheet_to_json','$product_details.product_name','min','redirect','setHeader','../models/all_models','French','columns','addPage','Products','width','$product_details','user','English\x20(US)','/print_barcode_filter_search/','master','height','xlsx','Spanish','\x20categories\x20is\x20add\x20successfully','add_product','status','flash','407995XoDEtc','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','push','product_stock','/filter_product','Portuguese\x20(BR)','Secondary_Code','numeric','units','data','secondary_unit','/products/units','warehouse','/barcode/:id','4BNBIqX','6273104SCVTEC','category','ProductCode','/print_barcode_filter/','478554WvHlOg','1173180YecvjN','English','Content-Type','then','/categories','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/products/view','/units','PAlQty','hello','max_number_per_units','/products_import_migrate_file','file','message','/view/add_products','\x20unit\x20is\x20add\x20successfully','Products_category'];a0_0x1903=function(){return _0x3fb1b9;};return a0_0x1903();}const express=require(a0_0x25d49c(0x1f9)),res=require(a0_0x25d49c(0x1da)),app=express(),router=express[a0_0x25d49c(0x215)](),multer=require(a0_0x25d49c(0x22f)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x25d49c(0x23c)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require(a0_0x25d49c(0x216)),xlsx=require(a0_0x25d49c(0x248)),JsBarcode=require(a0_0x25d49c(0x230)),{Canvas}=require(a0_0x25d49c(0x1f4)),PDFDocument=require('pdfkit-table');router[a0_0x25d49c(0x232)](a0_0x25d49c(0x266),auth,async(_0x56e680,_0x162c30)=>{const _0x4211bd=a0_0x25d49c;try{const {username:_0x1f5fda,email:_0x439985,role:_0x27cb2d}=_0x56e680[_0x4211bd(0x243)],_0x1ad93f=_0x56e680[_0x4211bd(0x243)],_0x23390c=await profile[_0x4211bd(0x1b3)]({'email':_0x1ad93f[_0x4211bd(0x1dc)]}),_0x5a319d=await master_shop[_0x4211bd(0x213)]();console[_0x4211bd(0x1d7)](_0x4211bd(0x246),_0x5a319d);const _0x2898d8=await categories[_0x4211bd(0x213)]();if(_0x5a319d[0x0][_0x4211bd(0x1f2)]=='English\x20(US)')var _0x19dfb0=users[_0x4211bd(0x263)];else{if(_0x5a319d[0x0][_0x4211bd(0x1f2)]==_0x4211bd(0x22d))var _0x19dfb0=users['Hindi'];else{if(_0x5a319d[0x0][_0x4211bd(0x1f2)]=='German')var _0x19dfb0=users[_0x4211bd(0x228)];else{if(_0x5a319d[0x0][_0x4211bd(0x1f2)]==_0x4211bd(0x249))var _0x19dfb0=users[_0x4211bd(0x249)];else{if(_0x5a319d[0x0]['language']==_0x4211bd(0x23d))var _0x19dfb0=users['French'];else{if(_0x5a319d[0x0][_0x4211bd(0x1f2)]==_0x4211bd(0x253))var _0x19dfb0=users['Portuguese'];else{if(_0x5a319d[0x0]['language']==_0x4211bd(0x1e7))var _0x19dfb0=users[_0x4211bd(0x1e7)];else{if(_0x5a319d[0x0]['language']==_0x4211bd(0x1e2))var _0x19dfb0=users[_0x4211bd(0x1c1)];}}}}}}}_0x162c30['render']('categories',{'success':_0x56e680['flash'](_0x4211bd(0x225)),'errors':_0x56e680[_0x4211bd(0x24d)](_0x4211bd(0x20b)),'role':_0x1ad93f,'profile':_0x23390c,'user':_0x2898d8,'master_shop':_0x5a319d,'language':_0x19dfb0});}catch(_0x596788){console[_0x4211bd(0x1d7)](_0x596788);}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x266),auth,async(_0x2e0eee,_0x25bb69)=>{const _0x2934fb=a0_0x25d49c;try{const {name:_0x53c6c7,products:_0x380eef}=_0x2e0eee[_0x2934fb(0x221)],_0x3a6475=new categories({'name':_0x53c6c7,'products':_0x380eef}),_0x51daec=await categories[_0x2934fb(0x1b3)]({'name':_0x53c6c7});_0x51daec?_0x2e0eee['flash'](_0x2934fb(0x20b),_0x53c6c7+_0x2934fb(0x24f)):_0x2e0eee['flash'](_0x2934fb(0x225),_0x53c6c7+_0x2934fb(0x24a));const _0x254b1b=await _0x3a6475['save']();_0x25bb69[_0x2934fb(0x23a)](_0x2934fb(0x20a));}catch(_0x25be47){console[_0x2934fb(0x1d7)](_0x25be47);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x1ce),auth,async(_0x7f6a99,_0x12399e)=>{const _0x1a97b1=a0_0x25d49c;try{const {username:_0x38957c,email:_0x34dc89,role:_0x91c509}=_0x7f6a99[_0x1a97b1(0x243)],_0x20ad4f=_0x7f6a99[_0x1a97b1(0x243)],_0x5bb038=await profile[_0x1a97b1(0x1b3)]({'email':_0x20ad4f[_0x1a97b1(0x1dc)]}),_0x2008bb=await master_shop[_0x1a97b1(0x213)]();console[_0x1a97b1(0x1d7)](_0x1a97b1(0x246),_0x2008bb);const _0x3e1ada=_0x7f6a99[_0x1a97b1(0x21c)]['id'];console[_0x1a97b1(0x1d7)](_0x3e1ada);const _0x50f7d2=await categories['findById'](_0x3e1ada);if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x244))var _0x75ffb3=users['English'];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x22d))var _0x75ffb3=users[_0x1a97b1(0x22d)];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x228))var _0x75ffb3=users[_0x1a97b1(0x228)];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x249))var _0x75ffb3=users[_0x1a97b1(0x249)];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x23d))var _0x75ffb3=users[_0x1a97b1(0x23d)];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x253))var _0x75ffb3=users['Portuguese'];else{if(_0x2008bb[0x0][_0x1a97b1(0x1f2)]==_0x1a97b1(0x1e7))var _0x75ffb3=users[_0x1a97b1(0x1e7)];else{if(_0x2008bb[0x0]['language']==_0x1a97b1(0x1e2))var _0x75ffb3=users['Arabic'];}}}}}}}_0x12399e['render']('categories',{'success':_0x7f6a99[_0x1a97b1(0x24d)](_0x1a97b1(0x225)),'errors':_0x7f6a99[_0x1a97b1(0x24d)]('errors'),'role':_0x20ad4f,'profile':_0x5bb038,'master_shop':_0x2008bb,'user':_0x50f7d2,'language':_0x75ffb3});}catch(_0x44c8d7){console[_0x1a97b1(0x1d7)](_0x44c8d7);}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1ce),auth,async(_0x5a386d,_0x57725f)=>{const _0x2d5f55=a0_0x25d49c;try{const _0x30da6d=_0x5a386d[_0x2d5f55(0x21c)]['id'],_0x11ec60=await categories[_0x2d5f55(0x20c)](_0x30da6d,_0x5a386d[_0x2d5f55(0x221)]);_0x5a386d[_0x2d5f55(0x24d)](_0x2d5f55(0x225),''+users[_0x2d5f55(0x22c)]),_0x57725f['redirect'](_0x2d5f55(0x20a));}catch(_0x1267b9){console[_0x2d5f55(0x1d7)](_0x1267b9);}}),router[a0_0x25d49c(0x232)]('/categories/delete/:id',auth,async(_0x371ffa,_0x5013a4)=>{const _0x1b207d=a0_0x25d49c;try{const _0x2e0cbe=_0x371ffa[_0x1b207d(0x21c)]['id'],_0x5325da=await categories[_0x1b207d(0x1b6)](_0x2e0cbe);_0x371ffa[_0x1b207d(0x24d)]('success','categories\x20data\x20delete\x20successfully'),_0x5013a4['redirect'](_0x1b207d(0x20a));}catch(_0x2b934b){console[_0x1b207d(0x1d7)](_0x2b934b);}}),router['get'](a0_0x25d49c(0x1f0),auth,async(_0x2cb9ba,_0xf75842)=>{const _0x478343=a0_0x25d49c;try{const {username:_0x1e8e68,email:_0x10e1ae,role:_0x59eb0b}=_0x2cb9ba[_0x478343(0x243)],_0x29b3b7=_0x2cb9ba[_0x478343(0x243)],_0x30f938=await profile[_0x478343(0x1b3)]({'email':_0x29b3b7[_0x478343(0x1dc)]}),_0x15996c=await master_shop[_0x478343(0x213)]();console[_0x478343(0x1d7)](_0x478343(0x246),_0x15996c);const _0x234916=await brands[_0x478343(0x213)]();if(_0x15996c[0x0][_0x478343(0x1f2)]==_0x478343(0x244))var _0x3d0d35=users['English'];else{if(_0x15996c[0x0][_0x478343(0x1f2)]=='Hindi')var _0x3d0d35=users[_0x478343(0x22d)];else{if(_0x15996c[0x0][_0x478343(0x1f2)]==_0x478343(0x228))var _0x3d0d35=users[_0x478343(0x228)];else{if(_0x15996c[0x0][_0x478343(0x1f2)]==_0x478343(0x249))var _0x3d0d35=users[_0x478343(0x249)];else{if(_0x15996c[0x0][_0x478343(0x1f2)]==_0x478343(0x23d))var _0x3d0d35=users[_0x478343(0x23d)];else{if(_0x15996c[0x0]['language']==_0x478343(0x253))var _0x3d0d35=users[_0x478343(0x1e3)];else{if(_0x15996c[0x0]['language']==_0x478343(0x1e7))var _0x3d0d35=users['Chinese'];else{if(_0x15996c[0x0][_0x478343(0x1f2)]==_0x478343(0x1e2))var _0x3d0d35=users[_0x478343(0x1c1)];}}}}}}}_0xf75842[_0x478343(0x1eb)]('brands',{'success':_0x2cb9ba[_0x478343(0x24d)](_0x478343(0x225)),'errors':_0x2cb9ba[_0x478343(0x24d)]('errors'),'role':_0x29b3b7,'profile':_0x30f938,'master_shop':_0x15996c,'user':_0x234916,'language':_0x3d0d35});}catch(_0x32d83f){console[_0x478343(0x1d7)](_0x32d83f);}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1f0),auth,async(_0x2eca08,_0x52ca85)=>{const _0x3d072e=a0_0x25d49c;try{const {name:_0x174f27,products:_0x441d8a}=_0x2eca08[_0x3d072e(0x221)],_0x42ac86=new brands({'name':_0x174f27,'products':_0x441d8a}),_0x2047d8=await brands[_0x3d072e(0x1b3)]({'name':_0x174f27});_0x2047d8?_0x2eca08[_0x3d072e(0x24d)](_0x3d072e(0x20b),_0x174f27+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x2eca08[_0x3d072e(0x24d)]('success',_0x174f27+_0x3d072e(0x220));const _0x5ed345=await _0x42ac86[_0x3d072e(0x1e8)]();_0x52ca85[_0x3d072e(0x23a)](_0x3d072e(0x214));}catch(_0x2af0db){console[_0x3d072e(0x1d7)](_0x2af0db);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x206),auth,async(_0x14e6fe,_0xceb19a)=>{const _0x12ff25=a0_0x25d49c;try{const {username:_0xe4516b,email:_0x3bc7d7,role:_0x3d1959}=_0x14e6fe[_0x12ff25(0x243)],_0x15d758=_0x14e6fe[_0x12ff25(0x243)],_0x5d13f9=await profile[_0x12ff25(0x1b3)]({'email':_0x15d758['email']}),_0x4ff75f=await master_shop[_0x12ff25(0x213)]();console[_0x12ff25(0x1d7)](_0x12ff25(0x246),_0x4ff75f);const _0x368419=_0x14e6fe[_0x12ff25(0x21c)]['id'];console['log'](_0x368419);const _0x784b26=await brands[_0x12ff25(0x1f6)](_0x368419);if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]==_0x12ff25(0x244))var _0x4df688=users[_0x12ff25(0x263)];else{if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]=='Hindi')var _0x4df688=users[_0x12ff25(0x22d)];else{if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]=='German')var _0x4df688=users[_0x12ff25(0x228)];else{if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]=='Spanish')var _0x4df688=users[_0x12ff25(0x249)];else{if(_0x4ff75f[0x0]['language']==_0x12ff25(0x23d))var _0x4df688=users[_0x12ff25(0x23d)];else{if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]=='Portuguese\x20(BR)')var _0x4df688=users[_0x12ff25(0x1e3)];else{if(_0x4ff75f[0x0]['language']==_0x12ff25(0x1e7))var _0x4df688=users[_0x12ff25(0x1e7)];else{if(_0x4ff75f[0x0][_0x12ff25(0x1f2)]=='Arabic\x20(ae)')var _0x4df688=users['Arabic'];}}}}}}}_0xceb19a['render'](_0x12ff25(0x1fa),{'success':_0x14e6fe[_0x12ff25(0x24d)]('success'),'errors':_0x14e6fe[_0x12ff25(0x24d)](_0x12ff25(0x20b)),'role':_0x15d758,'profile':_0x5d13f9,'master_shop':_0x4ff75f,'user':_0x784b26,'language':_0x4df688});}catch(_0x47ab32){console[_0x12ff25(0x1d7)](_0x47ab32);}}),router['post'](a0_0x25d49c(0x206),auth,async(_0x41c03f,_0x31a48e)=>{const _0x4fa249=a0_0x25d49c;try{const _0x5890ab=_0x41c03f[_0x4fa249(0x21c)]['id'],_0x4533da=await brands['findByIdAndUpdate'](_0x5890ab,_0x41c03f[_0x4fa249(0x221)]);_0x41c03f[_0x4fa249(0x24d)](_0x4fa249(0x225),_0x4fa249(0x1cd)),_0x31a48e['redirect'](_0x4fa249(0x214));}catch(_0xb606){console[_0x4fa249(0x1d7)](_0xb606);}}),router['get'](a0_0x25d49c(0x1fc),auth,async(_0x72e8d9,_0x1f3ca4)=>{const _0x785000=a0_0x25d49c;try{const _0x54f1ae=_0x72e8d9[_0x785000(0x21c)]['id'],_0x32509f=await brands[_0x785000(0x1b6)](_0x54f1ae);_0x72e8d9[_0x785000(0x24d)]('success',_0x785000(0x1bd)),_0x1f3ca4['redirect'](_0x785000(0x214));}catch(_0x5f08b7){console[_0x785000(0x1d7)](_0x5f08b7);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x1a6),auth,async(_0x1e4fef,_0x547e46)=>{const _0x28e75f=a0_0x25d49c;try{const {username:_0x3a7ebb,email:_0x191fd4,role:_0x4aec95}=_0x1e4fef[_0x28e75f(0x243)],_0x4f7c47=_0x1e4fef[_0x28e75f(0x243)],_0x580a4e=await profile['findOne']({'email':_0x4f7c47[_0x28e75f(0x1dc)]}),_0x1466c4=await master_shop['find']();console['log'](_0x28e75f(0x246),_0x1466c4);const _0x1ae5b7=await units[_0x28e75f(0x213)]();if(_0x1466c4[0x0][_0x28e75f(0x1f2)]==_0x28e75f(0x244))var _0x34c87a=users[_0x28e75f(0x263)];else{if(_0x1466c4[0x0][_0x28e75f(0x1f2)]==_0x28e75f(0x22d))var _0x34c87a=users[_0x28e75f(0x22d)];else{if(_0x1466c4[0x0]['language']=='German')var _0x34c87a=users[_0x28e75f(0x228)];else{if(_0x1466c4[0x0][_0x28e75f(0x1f2)]==_0x28e75f(0x249))var _0x34c87a=users[_0x28e75f(0x249)];else{if(_0x1466c4[0x0]['language']==_0x28e75f(0x23d))var _0x34c87a=users[_0x28e75f(0x23d)];else{if(_0x1466c4[0x0]['language']==_0x28e75f(0x253))var _0x34c87a=users[_0x28e75f(0x1e3)];else{if(_0x1466c4[0x0][_0x28e75f(0x1f2)]=='Chinese')var _0x34c87a=users[_0x28e75f(0x1e7)];else{if(_0x1466c4[0x0]['language']==_0x28e75f(0x1e2))var _0x34c87a=users[_0x28e75f(0x1c1)];}}}}}}}_0x547e46['render']('units',{'success':_0x1e4fef[_0x28e75f(0x24d)](_0x28e75f(0x225)),'errors':_0x1e4fef[_0x28e75f(0x24d)](_0x28e75f(0x20b)),'role':_0x4f7c47,'profile':_0x580a4e,'master_shop':_0x1466c4,'user':_0x1ae5b7,'language':_0x34c87a});}catch(_0x4e84e0){console[_0x28e75f(0x1d7)](_0x4e84e0);}}),router['post'](a0_0x25d49c(0x1a6),auth,async(_0x2edb9e,_0x3a679)=>{const _0x57dfc6=a0_0x25d49c;try{const {name:_0x1549b1,secondary_unit:_0x5198fb,products:_0xa57524}=_0x2edb9e['body'],_0xe1f2e6=new units({'name':_0x1549b1,'secondary_unit':_0x5198fb,'products':_0xa57524}),_0x258112=await units[_0x57dfc6(0x1b3)]({'name':_0x1549b1});_0x258112?_0x2edb9e[_0x57dfc6(0x24d)](_0x57dfc6(0x20b),_0x1549b1+_0x57dfc6(0x201)):_0x2edb9e[_0x57dfc6(0x24d)](_0x57dfc6(0x225),_0x1549b1+_0x57dfc6(0x1ae));const _0x1be80f=await _0xe1f2e6['save']();_0x3a679[_0x57dfc6(0x23a)](_0x57dfc6(0x259));}catch(_0xadd86a){console[_0x57dfc6(0x1d7)](_0xadd86a);}}),router[a0_0x25d49c(0x232)]('/units/:id',auth,async(_0x46cc17,_0x3c3f3d)=>{const _0x17982f=a0_0x25d49c;try{const {username:_0x1b87a1,email:_0x3b29ee,role:_0x4db0f0}=_0x46cc17['user'],_0x361509=_0x46cc17[_0x17982f(0x243)],_0x159d0f=await profile['findOne']({'email':_0x361509['email']}),_0x5c767d=await master_shop[_0x17982f(0x213)]();console[_0x17982f(0x1d7)]('master',_0x5c767d);const _0xe184db=_0x46cc17['params']['id'],_0x423448=await units[_0x17982f(0x1f6)](_0xe184db);if(_0x5c767d[0x0][_0x17982f(0x1f2)]==_0x17982f(0x244))var _0x427255=users['English'];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]=='Hindi')var _0x427255=users['Hindi'];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]==_0x17982f(0x228))var _0x427255=users['German'];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]=='Spanish')var _0x427255=users[_0x17982f(0x249)];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]==_0x17982f(0x23d))var _0x427255=users['French'];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]==_0x17982f(0x253))var _0x427255=users[_0x17982f(0x1e3)];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]=='Chinese')var _0x427255=users['Chinese'];else{if(_0x5c767d[0x0][_0x17982f(0x1f2)]==_0x17982f(0x1e2))var _0x427255=users[_0x17982f(0x1c1)];}}}}}}}_0x3c3f3d['render'](_0x17982f(0x256),{'success':_0x46cc17[_0x17982f(0x24d)](_0x17982f(0x225)),'errors':_0x46cc17[_0x17982f(0x24d)](_0x17982f(0x20b)),'role':_0x361509,'profile':_0x159d0f,'master_shop':_0x5c767d,'user':_0x423448,'language':_0x427255});}catch(_0x1f5656){console[_0x17982f(0x1d7)](_0x1f5656);}}),router[a0_0x25d49c(0x1c4)]('/units/:id',auth,async(_0x572dc7,_0x5e4610)=>{const _0x1e3fdd=a0_0x25d49c;try{const _0x2ca073=_0x572dc7[_0x1e3fdd(0x21c)]['id'],_0x51c4a9=await units[_0x1e3fdd(0x20c)](_0x2ca073,_0x572dc7['body']);_0x572dc7[_0x1e3fdd(0x24d)]('success','unit\x20data\x20update\x20successfully'),_0x5e4610['redirect']('/products/units');}catch(_0x5d26f5){console[_0x1e3fdd(0x1d7)](_0x5d26f5);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x1f1),auth,async(_0x3b620c,_0x4a27bf)=>{const _0x1c4c2c=a0_0x25d49c;try{const _0x599061=_0x3b620c[_0x1c4c2c(0x21c)]['id'],_0x1f31f5=await units[_0x1c4c2c(0x1b6)](_0x599061);_0x3b620c[_0x1c4c2c(0x24d)](_0x1c4c2c(0x225),_0x1c4c2c(0x1d1)),_0x4a27bf['redirect']('/products/units');}catch(_0x33807d){console[_0x1c4c2c(0x1d7)](_0x33807d);}});const storage=multer['diskStorage']({'destination':(_0x58db8a,_0xd44ef1,_0x2c8875)=>{const _0xafadea=a0_0x25d49c;_0x2c8875(null,_0xafadea(0x219));},'filename':(_0x1c5375,_0x1ad1d5,_0x139414)=>{const _0x294fa4=a0_0x25d49c;_0x139414(null,Date[_0x294fa4(0x1b5)]()+_0x1ad1d5[_0x294fa4(0x218)]);}}),upload=multer({'storage':storage});router[a0_0x25d49c(0x232)](a0_0x25d49c(0x1ff),auth,async(_0x308d03,_0x30312b)=>{const _0x50ac2c=a0_0x25d49c;try{const {username:_0x44e101,email:_0x559ced,role:_0x2893a9}=_0x308d03['user'],_0x37d7e5=_0x308d03[_0x50ac2c(0x243)],_0x4bf518=await profile[_0x50ac2c(0x1b3)]({'email':_0x37d7e5[_0x50ac2c(0x1dc)]}),_0x8f6d69={'year':_0x50ac2c(0x255),'month':_0x50ac2c(0x21e),'day':_0x50ac2c(0x255)},_0x2eb560=await master_shop[_0x50ac2c(0x213)]();console[_0x50ac2c(0x1d7)](_0x50ac2c(0x21d),_0x2eb560);const _0x183ccd=await product[_0x50ac2c(0x213)]();console[_0x50ac2c(0x1d7)](_0x50ac2c(0x211),_0x183ccd);const _0x55eb9b=await warehouse[_0x50ac2c(0x1c0)]([{'$unwind':_0x50ac2c(0x242)},{'$lookup':{'from':_0x50ac2c(0x200),'localField':_0x50ac2c(0x1d9),'foreignField':_0x50ac2c(0x1f8),'as':'product_docs'}},{'$unwind':_0x50ac2c(0x1b8)},{'$project':{'product_name':_0x50ac2c(0x238),'product_stock':_0x50ac2c(0x21b)}},{'$group':{'_id':_0x50ac2c(0x224),'product_stock':{'$sum':_0x50ac2c(0x22a)}}}]);console[_0x50ac2c(0x1d7)](_0x50ac2c(0x1d8),_0x55eb9b),_0x55eb9b['forEach'](_0x1a7134=>{const _0x47c113=_0x50ac2c,_0x3931dd=_0x183ccd[_0x47c113(0x1fb)](_0xa03540=>{const _0x27d053=_0x47c113;_0xa03540[_0x27d053(0x1f8)]==_0x1a7134[_0x27d053(0x21a)]&&(_0xa03540['stock']=parseInt(_0xa03540[_0x27d053(0x21f)])+parseInt(_0x1a7134[_0x27d053(0x251)]));});}),console[_0x50ac2c(0x1d7)](_0x50ac2c(0x211),_0x183ccd);if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]==_0x50ac2c(0x244))var _0x3591e9=users[_0x50ac2c(0x263)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]==_0x50ac2c(0x22d))var _0x3591e9=users[_0x50ac2c(0x22d)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]=='German')var _0x3591e9=users[_0x50ac2c(0x228)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]==_0x50ac2c(0x249))var _0x3591e9=users['Spanish'];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]=='French')var _0x3591e9=users[_0x50ac2c(0x23d)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]==_0x50ac2c(0x253))var _0x3591e9=users[_0x50ac2c(0x1e3)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]=='Chinese')var _0x3591e9=users[_0x50ac2c(0x1e7)];else{if(_0x2eb560[0x0][_0x50ac2c(0x1f2)]=='Arabic\x20(ae)')var _0x3591e9=users[_0x50ac2c(0x1c1)];}}}}}}}_0x30312b[_0x50ac2c(0x1eb)](_0x50ac2c(0x200),{'success':_0x308d03['flash']('success'),'errors':_0x308d03[_0x50ac2c(0x24d)](_0x50ac2c(0x20b)),'alldata':_0x183ccd,'profile':_0x4bf518,'master_shop':_0x2eb560,'role':_0x37d7e5,'product_stock':_0x55eb9b,'language':_0x3591e9});}catch(_0x109d06){console[_0x50ac2c(0x1d7)](_0x109d06);}}),router['get'](a0_0x25d49c(0x1ad),auth,async(_0x20c996,_0x15118a)=>{const _0x39a6cf=a0_0x25d49c;try{const {username:_0x5f3f0d,email:_0x375266,role:_0x4a581a}=_0x20c996[_0x39a6cf(0x243)],_0x41311c=_0x20c996[_0x39a6cf(0x243)],_0x21d1c8=await profile[_0x39a6cf(0x1b3)]({'email':_0x41311c[_0x39a6cf(0x1dc)]}),_0x2622e6=await master_shop['find']();console[_0x39a6cf(0x1d7)](_0x39a6cf(0x246),_0x2622e6);const _0xe9a365=await categories[_0x39a6cf(0x213)]({}),_0x1e68ee=await brands[_0x39a6cf(0x213)]({}),_0x2d5e16=await units['find']({}),_0x3a2cb1=await warehouse[_0x39a6cf(0x213)]({'status':_0x39a6cf(0x202)});if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x244))var _0x29f576=users[_0x39a6cf(0x263)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]=='Hindi')var _0x29f576=users[_0x39a6cf(0x22d)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x228))var _0x29f576=users[_0x39a6cf(0x228)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x249))var _0x29f576=users[_0x39a6cf(0x249)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x23d))var _0x29f576=users[_0x39a6cf(0x23d)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x253))var _0x29f576=users[_0x39a6cf(0x1e3)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]=='Chinese')var _0x29f576=users[_0x39a6cf(0x1e7)];else{if(_0x2622e6[0x0][_0x39a6cf(0x1f2)]==_0x39a6cf(0x1e2))var _0x29f576=users[_0x39a6cf(0x1c1)];}}}}}}}_0x15118a[_0x39a6cf(0x1eb)](_0x39a6cf(0x24b),{'success':_0x20c996[_0x39a6cf(0x24d)](_0x39a6cf(0x225)),'errors':_0x20c996[_0x39a6cf(0x24d)](_0x39a6cf(0x20b)),'role':_0x41311c,'profile':_0x21d1c8,'categories':_0xe9a365,'brands':_0x1e68ee,'master_shop':_0x2622e6,'units':_0x2d5e16,'language':_0x29f576,'find_data':_0x3a2cb1});}catch(_0x351323){console[_0x39a6cf(0x1d7)](_0x351323);}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1ad),auth,upload[a0_0x25d49c(0x1ba)](a0_0x25d49c(0x1c9)),async(_0x19e567,_0x459a85)=>{const _0x361ab7=a0_0x25d49c;try{const {name:_0x34199f,category:_0x234d16,brand:_0x99b71d,unit:_0x356693,alertquantity:_0x4499e6,stock:_0x13a202,product_code:_0xcb99bb,warehouse:_0x336f5c,primary_ItemCode:_0x204472,second_ItemCode:_0x491e9a,second_unit:_0xa4c8d6,maxPerUnit:_0x20e323,MaxPerProduct:_0x520d54}=_0x19e567[_0x361ab7(0x221)],_0x2aff1e=_0x19e567['file']?.[_0x361ab7(0x1ca)]||'defaultProduct.avif',_0x222e2f=new product({'image':_0x2aff1e,'name':_0x34199f,'category':_0x234d16,'brand':_0x99b71d,'unit':_0x356693,'alertquantity':_0x4499e6,'stock':_0x13a202,'product_code':_0xcb99bb,'warehouse':_0x336f5c,'primary_code':_0x204472,'secondary_code':_0x491e9a,'second_unit':_0xa4c8d6,'maxStocks':_0x520d54,'maxProdPerUnit':_0x20e323}),_0x5c9c59=await _0x222e2f['save'](),_0x5308e5=await categories[_0x361ab7(0x1b3)]({'name':_0x234d16});_0x5308e5['products']=parseInt(_0x5308e5[_0x361ab7(0x200)])+0x1,await _0x5308e5[_0x361ab7(0x1e8)]();const _0x2148de=await brands[_0x361ab7(0x1b3)]({'name':_0x99b71d});_0x2148de['products']=parseInt(_0x2148de[_0x361ab7(0x200)])+0x1,await _0x2148de[_0x361ab7(0x1e8)]();const _0x150eac=await units[_0x361ab7(0x1b3)]({'name':_0x356693});_0x150eac['products']=parseInt(_0x150eac['products'])+0x1,await _0x150eac['save'](),_0x19e567['flash'](_0x361ab7(0x225),'product\x20add\x20successfully'),_0x459a85[_0x361ab7(0x23a)]('/products/view');}catch(_0x53b1b2){console[_0x361ab7(0x1d7)](_0x53b1b2);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x22e),auth,async(_0x1f023c,_0x2d9cca)=>{const _0x36a59e=a0_0x25d49c;try{const {username:_0xe3ca6a,email:_0x153cab,role:_0x537d85}=_0x1f023c[_0x36a59e(0x243)],_0x12e937=_0x1f023c[_0x36a59e(0x243)],_0x395933=await profile[_0x36a59e(0x1b3)]({'email':_0x12e937[_0x36a59e(0x1dc)]}),_0x5af467=await master_shop[_0x36a59e(0x213)]();console[_0x36a59e(0x1d7)](_0x36a59e(0x1ee),_0x5af467);const _0x116bbc=_0x1f023c['params']['id'],_0xd4891=await product[_0x36a59e(0x1f6)](_0x116bbc),_0x8df189=await categories[_0x36a59e(0x213)]({}),_0x5bc7d8=await brands[_0x36a59e(0x213)]({}),_0x2e2634=await units[_0x36a59e(0x213)]({}),_0x4d8a2a=await warehouse[_0x36a59e(0x213)]({'status':_0x36a59e(0x202)}),_0x246065=await units[_0x36a59e(0x1c0)]([{'$group':{'_id':_0x36a59e(0x227),'secondaryunit':{'$first':_0x36a59e(0x20d)}}}]);if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x244))var _0x4defe7=users['English'];else{if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x22d))var _0x4defe7=users[_0x36a59e(0x22d)];else{if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x228))var _0x4defe7=users[_0x36a59e(0x228)];else{if(_0x5af467[0x0]['language']=='Spanish')var _0x4defe7=users[_0x36a59e(0x249)];else{if(_0x5af467[0x0]['language']==_0x36a59e(0x23d))var _0x4defe7=users[_0x36a59e(0x23d)];else{if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x253))var _0x4defe7=users[_0x36a59e(0x1e3)];else{if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x1e7))var _0x4defe7=users['Chinese'];else{if(_0x5af467[0x0][_0x36a59e(0x1f2)]==_0x36a59e(0x1e2))var _0x4defe7=users[_0x36a59e(0x1c1)];}}}}}}}_0x2d9cca[_0x36a59e(0x1eb)](_0x36a59e(0x235),{'success':_0x1f023c[_0x36a59e(0x24d)](_0x36a59e(0x225)),'errors':_0x1f023c[_0x36a59e(0x24d)]('errors'),'role':_0x12e937,'profile':_0x395933,'alldata':_0xd4891,'categories':_0x8df189,'brands':_0x5bc7d8,'master_shop':_0x5af467,'units':_0x2e2634,'secondunit':_0x246065,'find_data':_0x4d8a2a,'language':_0x4defe7});}catch(_0x2c3337){console[_0x36a59e(0x1d7)](_0x2c3337);}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x22e),auth,upload['single'](a0_0x25d49c(0x1c9)),async(_0x474f83,_0x6649df)=>{const _0x520176=a0_0x25d49c;try{console[_0x520176(0x1d7)](_0x520176(0x1a8));const _0x62bc81=_0x474f83['params']['id'],_0x241a19=await product[_0x520176(0x1f6)](_0x62bc81),{image:_0x22123d,name:_0x5cf09b,category:_0x2e9d56,brand:_0x191adf,sku:_0x5dcfcd,unit:_0x5f2422,alertquantity:_0x402003,product_code:_0x108787,warehouse:_0x4a086a,primary_ItemCode:_0x10af63,second_ItemCode:_0x2d52c5,second_unit:_0xec286a,maxPerUnit:_0x5e066e,MaxPerProduct:_0x139acb,prod_catdata:_0x4e3ea8}=_0x474f83[_0x520176(0x221)];_0x474f83[_0x520176(0x1ab)]&&(_0x241a19[_0x520176(0x1c9)]=_0x474f83[_0x520176(0x1ab)][_0x520176(0x1ca)]);_0x241a19[_0x520176(0x1f8)]=_0x5cf09b,_0x241a19['category']=_0x2e9d56,_0x241a19['brand']=_0x191adf,_0x241a19['sku']=_0x5dcfcd,_0x241a19[_0x520176(0x1c8)]=_0x5f2422,_0x241a19[_0x520176(0x1fd)]=_0x402003,_0x241a19[_0x520176(0x1cb)]=_0x108787,_0x241a19[_0x520176(0x25a)]=_0x4a086a,_0x241a19[_0x520176(0x212)]=_0x10af63,_0x241a19['secondary_code']=_0x2d52c5,_0x241a19[_0x520176(0x258)]=_0xec286a,_0x241a19[_0x520176(0x20e)]=_0x139acb,_0x241a19[_0x520176(0x1de)]=_0x5e066e,_0x241a19[_0x520176(0x1d6)]=_0x4e3ea8;const _0x41dea7=await _0x241a19[_0x520176(0x1e8)]();console[_0x520176(0x1d7)](_0x520176(0x1e1),_0x241a19),_0x474f83[_0x520176(0x24d)]('success',_0x520176(0x1ed)),_0x6649df[_0x520176(0x23a)](_0x520176(0x268));}catch(_0x2d18d9){console['log'](_0x2d18d9);}}),router[a0_0x25d49c(0x232)](a0_0x25d49c(0x25b),auth,async(_0x3334d9,_0x38fb05)=>{const _0x4e4f22=a0_0x25d49c;try{const {username:_0x3b5115,email:_0x13a649,role:_0x5f1800}=_0x3334d9[_0x4e4f22(0x243)],_0x8d1d32=_0x3334d9['user'],_0x1b42fb=await profile[_0x4e4f22(0x1b3)]({'email':_0x8d1d32[_0x4e4f22(0x1dc)]}),_0x120ec0=await master_shop['find']();console[_0x4e4f22(0x1d7)](_0x4e4f22(0x1c5),_0x120ec0);const _0x3c02aa=_0x3334d9['params']['id'],_0x48ccee=await product['findById'](_0x3c02aa);console[_0x4e4f22(0x1d7)](_0x4e4f22(0x205),_0x48ccee);if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]==_0x4e4f22(0x244))var _0x15a135=users[_0x4e4f22(0x263)];else{if(_0x120ec0[0x0]['language']==_0x4e4f22(0x22d))var _0x15a135=users[_0x4e4f22(0x22d)];else{if(_0x120ec0[0x0]['language']==_0x4e4f22(0x228))var _0x15a135=users[_0x4e4f22(0x228)];else{if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]==_0x4e4f22(0x249))var _0x15a135=users['Spanish'];else{if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]==_0x4e4f22(0x23d))var _0x15a135=users[_0x4e4f22(0x23d)];else{if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]=='Portuguese\x20(BR)')var _0x15a135=users[_0x4e4f22(0x1e3)];else{if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]==_0x4e4f22(0x1e7))var _0x15a135=users[_0x4e4f22(0x1e7)];else{if(_0x120ec0[0x0][_0x4e4f22(0x1f2)]==_0x4e4f22(0x1e2))var _0x15a135=users[_0x4e4f22(0x1c1)];}}}}}}}_0x38fb05[_0x4e4f22(0x1eb)](_0x4e4f22(0x1b7),{'success':_0x3334d9[_0x4e4f22(0x24d)](_0x4e4f22(0x225)),'errors':_0x3334d9[_0x4e4f22(0x24d)](_0x4e4f22(0x20b)),'role':_0x8d1d32,'profile':_0x1b42fb,'alldata':_0x48ccee,'master_shop':_0x120ec0,'language':_0x15a135});}catch(_0x185beb){console['log'](_0x185beb);}}),router[a0_0x25d49c(0x232)]('/products_export_migrate_file',auth,async(_0x357a29,_0xed26ff)=>{const _0x28296c=a0_0x25d49c;try{const _0x3497c3=new excelJS[(_0x28296c(0x1df))](),_0x3d6283=_0x3497c3[_0x28296c(0x1db)](_0x28296c(0x240));return _0x3d6283[_0x28296c(0x23e)]=[{'header':'Product_Name','key':_0x28296c(0x1e4),'width':0xa},{'header':_0x28296c(0x1fe),'key':'PBrands','width':0xa},{'header':_0x28296c(0x204),'key':_0x28296c(0x209),'width':0xa},{'header':_0x28296c(0x1c2),'key':_0x28296c(0x1e0),'width':0xa},{'header':_0x28296c(0x1a9),'key':_0x28296c(0x1d5),'width':0xa},{'header':_0x28296c(0x1c7),'key':_0x28296c(0x25f),'width':0xa},{'header':_0x28296c(0x254),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0x28296c(0x208),'key':_0x28296c(0x1f3),'width':0xa},{'header':_0x28296c(0x1d3),'key':'PAlQty','width':0xa},{'header':_0x28296c(0x207),'key':_0x28296c(0x1a7),'width':0xa},{'header':_0x28296c(0x1af),'key':'Prod_Cat','width':0xa}],_0xed26ff[_0x28296c(0x23b)](_0x28296c(0x264),_0x28296c(0x267)),_0xed26ff[_0x28296c(0x23b)](_0x28296c(0x1cc),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x3497c3[_0x28296c(0x248)]['write'](_0xed26ff)[_0x28296c(0x265)](()=>{const _0x38b80e=_0x28296c;_0xed26ff[_0x38b80e(0x24c)](0xc8);});}catch(_0x2fe749){_0xed26ff[_0x28296c(0x24c)](0x190)[_0x28296c(0x229)](_0x2fe749);}});const storage1=multer[a0_0x25d49c(0x22b)]({'destination':(_0x53b806,_0x16f067,_0x243189)=>{_0x243189(null,'public/Migration');},'filename':(_0x13a45e,_0x162500,_0x1af40b)=>{const _0x5d36cc=a0_0x25d49c;_0x1af40b(null,Date[_0x5d36cc(0x1b5)]()+_0x162500['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x25d49c(0x1aa),auth,uploadMigrate[a0_0x25d49c(0x1ba)]('migrate_product_fule'),async(_0x5cdf0c,_0x5526a0)=>{const _0x2adc90=a0_0x25d49c,_0xd3d0eb=_0x5cdf0c[_0x2adc90(0x1ab)][_0x2adc90(0x1ca)],_0x3ceb1a=await xlsx[_0x2adc90(0x1d4)](_0x2adc90(0x231)+_0xd3d0eb);let _0x2c0adf=_0x3ceb1a[_0x2adc90(0x233)],_0x27bf11=xlsx[_0x2adc90(0x1c3)][_0x2adc90(0x237)](_0x3ceb1a[_0x2adc90(0x203)][_0x2c0adf[0x0]]);for(const _0x23a917 of _0x27bf11){const _0x9012b9=_0x23a917[_0x2adc90(0x1be)],_0x20f9f8=_0x23a917[_0x2adc90(0x1fe)],_0x2fd930=_0x23a917[_0x2adc90(0x204)],_0x3fbc83=_0x23a917[_0x2adc90(0x1c2)],_0x43a3c2=_0x23a917[_0x2adc90(0x1cf)],_0x118564=_0x23a917[_0x2adc90(0x208)],_0x52bed7=_0x23a917[_0x2adc90(0x1d3)],_0x169080=_0x23a917[_0x2adc90(0x1c7)],_0x13f11b=_0x23a917[_0x2adc90(0x254)],_0x24e8ff=_0x23a917[_0x2adc90(0x207)],_0x36cee8=_0x23a917[_0x2adc90(0x1a9)],_0x1e7daf=_0x23a917['Products_category'];try{let _0x7c9b5a=await categories[_0x2adc90(0x1b3)]({'name':_0x118564});if(!_0x7c9b5a){const _0x2331c3=new categories({'name':_0x118564,'products':'0'});_0x7c9b5a=await _0x2331c3[_0x2adc90(0x1e8)]();}let _0x573f98=await brands[_0x2adc90(0x1b3)]({'name':_0x20f9f8});if(!_0x573f98){const _0xa13b29=new brands({'name':_0x20f9f8,'products':'0'});_0x573f98=await _0xa13b29[_0x2adc90(0x1e8)]();}let _0x1d7b77=await units['findOne']({'name':_0x2fd930,'secondary_unit':_0x3fbc83});if(!_0x1d7b77){const _0x12d1c3=new units({'name':_0x2fd930,'secondary_unit':_0x3fbc83,'products':'0'});_0x1d7b77=await _0x12d1c3[_0x2adc90(0x1e8)]();}const _0x5567bf=await product[_0x2adc90(0x213)]({'name':_0x9012b9,'category':_0x7c9b5a[_0x2adc90(0x1f8)],'brand':_0x573f98['name'],'secondary_unit':_0x1d7b77[_0x2adc90(0x258)],'product_code':_0x43a3c2});console[_0x2adc90(0x1d7)](_0x5567bf[_0x2adc90(0x223)]+'\x20<>\x20'+_0x7c9b5a[_0x2adc90(0x1f8)]+'\x20<>\x20'+_0x573f98[_0x2adc90(0x1f8)]+_0x2adc90(0x234)+_0x1d7b77[_0x2adc90(0x258)]+_0x2adc90(0x234)+_0x43a3c2+_0x2adc90(0x234)+_0x9012b9);if(_0x5567bf['length']===0x0){const _0x58b891=new product({'image':_0x2adc90(0x1b0),'name':_0x9012b9,'category':_0x7c9b5a[_0x2adc90(0x1f8)],'brand':_0x573f98[_0x2adc90(0x1f8)],'unit':_0x1d7b77[_0x2adc90(0x1f8)],'alertquantity':_0x52bed7,'product_code':_0x43a3c2,'secondary_unit':_0x1d7b77[_0x2adc90(0x258)],'primary_code':_0x169080,'secondary_code':_0x13f11b,'maxStocks':_0x24e8ff,'maxProdPerUnit':_0x36cee8,'product_category':_0x1e7daf}),_0x4d4280=await _0x58b891[_0x2adc90(0x1e8)]();_0x7c9b5a['products']=parseInt(_0x7c9b5a[_0x2adc90(0x200)])+0x1,await _0x7c9b5a['save'](),_0x573f98[_0x2adc90(0x200)]=parseInt(_0x573f98['products'])+0x1,await _0x573f98[_0x2adc90(0x1e8)](),_0x1d7b77[_0x2adc90(0x200)]=parseInt(_0x1d7b77[_0x2adc90(0x200)])+0x1,await _0x1d7b77[_0x2adc90(0x1e8)](),_0x5cdf0c['flash'](_0x2adc90(0x225),_0x9012b9+'\x20added\x20successfully');}else{console[_0x2adc90(0x1d7)](_0x5567bf[0x0]);const _0x4b536a=_0x5567bf[0x0];_0x4b536a[_0x2adc90(0x25e)]=_0x7c9b5a[_0x2adc90(0x1f8)],_0x4b536a['brand']=_0x573f98[_0x2adc90(0x1f8)],_0x4b536a[_0x2adc90(0x1c8)]=_0x1d7b77[_0x2adc90(0x1f8)],_0x4b536a['alertquantity']=_0x52bed7,_0x4b536a[_0x2adc90(0x1cb)]=_0x43a3c2,_0x4b536a[_0x2adc90(0x258)]=_0x1d7b77[_0x2adc90(0x258)],_0x4b536a[_0x2adc90(0x212)]=_0x169080,_0x4b536a['secondary_code']=_0x13f11b,_0x4b536a[_0x2adc90(0x20e)]=_0x24e8ff,_0x4b536a[_0x2adc90(0x1de)]=_0x36cee8,_0x4b536a[_0x2adc90(0x1d6)]=_0x1e7daf;const _0x4948af=await _0x4b536a[_0x2adc90(0x1e8)]();_0x5cdf0c[_0x2adc90(0x24d)](_0x2adc90(0x225),_0x4948af[_0x2adc90(0x1f8)]+'\x20Edit\x20Successfully');}}catch(_0x39edaa){_0x5526a0['status'](0x1f4)[_0x2adc90(0x1d0)]({'proderror':_0x39edaa['message'],'aproduct':_0x9012b9});}}_0x5526a0[_0x2adc90(0x23a)](_0x2adc90(0x268));}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1bb),auth,async(_0x474abb,_0x1531ca)=>{const _0x3954d0=a0_0x25d49c;try{console[_0x3954d0(0x1d7)](_0x474abb[_0x3954d0(0x221)]);const {data_cateory:_0xcc9278,datachoose:_0x1bc2e5}=_0x474abb['body'];var _0x4944a1;if(_0x1bc2e5=='prod_categ')_0x4944a1=await product['aggregate']([{'$group':{'_id':_0x3954d0(0x236)}}]);else{if(_0x1bc2e5=='brands')_0x4944a1=await product[_0x3954d0(0x1c0)]([{'$match':{'product_category':_0xcc9278}},{'$group':{'_id':_0x3954d0(0x1ea)}}]);else _0x1bc2e5==_0x3954d0(0x210)&&(_0x4944a1=await product[_0x3954d0(0x1c0)]([{'$match':{'product_category':_0xcc9278}},{'$group':{'_id':'$category'}}]));}_0x1531ca['json'](_0x4944a1);}catch(_0x3e2498){_0x1531ca[_0x3954d0(0x1d0)]({'message':_0x3e2498[_0x3954d0(0x1ac)]});}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x252),auth,async(_0x1c5e80,_0x7c961f)=>{const _0x5e9045=a0_0x25d49c;try{const {data_choosing:_0x2e1b05,data_selected:_0x46e529}=_0x1c5e80[_0x5e9045(0x221)];var _0x93f215;if(_0x2e1b05=='prod_categ')_0x93f215=await product[_0x5e9045(0x1c0)]([{'$match':{'product_category':_0x46e529}}]);else{if(_0x2e1b05==_0x5e9045(0x1fa))_0x93f215=await product[_0x5e9045(0x1c0)]([{'$match':{'brand':_0x46e529}}]);else _0x2e1b05==_0x5e9045(0x210)&&(_0x93f215=await product[_0x5e9045(0x1c0)]([{'$match':{'category':_0x46e529}}]));}_0x7c961f[_0x5e9045(0x1d0)](_0x93f215);}catch(_0x170ad5){_0x7c961f[_0x5e9045(0x1d0)]({'message':_0x170ad5[_0x5e9045(0x1ac)]});}}),router[a0_0x25d49c(0x232)]('/print_barcode',auth,async(_0x51bde6,_0x33d643)=>{const _0x8eb65e=a0_0x25d49c,_0x507937=_0x51bde6[_0x8eb65e(0x243)],_0x4dba84=await profile[_0x8eb65e(0x1b3)]({'email':_0x507937[_0x8eb65e(0x1dc)]}),_0x17dc83=await master_shop[_0x8eb65e(0x213)](),_0xd2f294=await product['find']();if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x244))var _0x362855=users['English'];else{if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x22d))var _0x362855=users[_0x8eb65e(0x22d)];else{if(_0x17dc83[0x0]['language']=='German')var _0x362855=users[_0x8eb65e(0x228)];else{if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x249))var _0x362855=users['Spanish'];else{if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x23d))var _0x362855=users['French'];else{if(_0x17dc83[0x0]['language']==_0x8eb65e(0x253))var _0x362855=users['Portuguese'];else{if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x1e7))var _0x362855=users[_0x8eb65e(0x1e7)];else{if(_0x17dc83[0x0][_0x8eb65e(0x1f2)]==_0x8eb65e(0x1e2))var _0x362855=users[_0x8eb65e(0x1c1)];}}}}}}}_0x33d643['render']('product_barcode_products',{'success':_0x51bde6[_0x8eb65e(0x24d)](_0x8eb65e(0x225)),'errors':_0x51bde6[_0x8eb65e(0x24d)](_0x8eb65e(0x20b)),'role':_0x507937,'profile':_0x4dba84,'products':_0xd2f294,'master_shop':_0x17dc83,'language':_0x362855});}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1bf),auth,async(_0x1ad79e,_0x547995)=>{const _0x3d52da=a0_0x25d49c,_0x22dc79=await product[_0x3d52da(0x213)]();_0x547995[_0x3d52da(0x1d0)]({'data':_0x22dc79});}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1d2),auth,async(_0x50e78d,_0x216a79)=>{const _0x692e63=a0_0x25d49c;try{const {dataProdCat:_0x3b301f,dataProdIdentity:_0xc48d53}=_0x50e78d['body'];var _0x1fef37;switch(_0x3b301f){case'fg':switch(_0xc48d53){case _0x692e63(0x1fe):_0x1fef37=await product[_0x692e63(0x1c0)]([{'$match':{'product_category':_0x692e63(0x222)}},{'$group':{'_id':_0x692e63(0x1ea)}},{'$project':{'brand':_0x692e63(0x227)}}]);break;case'Category':_0x1fef37=await product[_0x692e63(0x1c0)]([{'$match':{'product_category':_0x692e63(0x222)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x692e63(0x227)}}]);break;}break;case'rm':switch(_0xc48d53){case _0x692e63(0x1fe):_0x1fef37=await product[_0x692e63(0x1c0)]([{'$match':{'product_category':_0x692e63(0x1e5)}},{'$group':{'_id':_0x692e63(0x1ea)}},{'$project':{'brand':_0x692e63(0x227)}}]);break;case'Category':_0x1fef37=await product[_0x692e63(0x1c0)]([{'$match':{'product_category':_0x692e63(0x1e5)}},{'$group':{'_id':_0x692e63(0x1bc)}},{'$project':{'category':_0x692e63(0x227)}}]);break;}break;}_0x216a79[_0x692e63(0x1d0)](_0x1fef37);}catch(_0x1ded80){_0x216a79[_0x692e63(0x1d0)]({'message':_0x1ded80['message']});}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x260),auth,async(_0x118325,_0x5787ff)=>{const _0x5e40ca=a0_0x25d49c;try{console[_0x5e40ca(0x1d7)](_0x118325[_0x5e40ca(0x221)]);const {prod_cat:_0x2a54b0,identity:_0x26ac6f,valueData:_0x48b5e7,typeofbarcode:_0x512923}=_0x118325[_0x5e40ca(0x221)];let _0x347fda;switch(_0x2a54b0){case'fg':if(_0x26ac6f==_0x5e40ca(0x1fe))_0x347fda=await product['aggregate']([{'$match':{'product_category':_0x5e40ca(0x222),'brand':_0x48b5e7}}]);else _0x26ac6f==_0x5e40ca(0x208)&&(_0x347fda=await product[_0x5e40ca(0x1c0)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x48b5e7}}]));break;case'rm':if(_0x26ac6f=='Brands')_0x347fda=await product[_0x5e40ca(0x1c0)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x48b5e7}}]);else _0x26ac6f==_0x5e40ca(0x208)&&(_0x347fda=await product['aggregate']([{'$match':{'product_category':_0x5e40ca(0x1e5),'category':_0x48b5e7}}]));break;}const _0x26e655=_0x227292=>_0x227292*0x48,_0x2e4c5e={'width':0x3,'height':0x1},_0xdc5fe7=new PDFDocument({'margin':_0x26e655(0.75),'size':[_0x26e655(_0x2e4c5e['width']),_0x26e655(_0x2e4c5e[_0x5e40ca(0x247)])],'bufferPages':!![]}),_0x460715=_0x347fda[_0x5e40ca(0x223)];for(let _0x217ab6=0x0;_0x217ab6<=_0x460715;_0x217ab6++){if(_0x217ab6!=_0x460715){const _0x12317c=_0x347fda[_0x217ab6][_0x5e40ca(0x1f8)],_0x7b2819=_0x347fda[_0x217ab6]['primary_code'],_0xa5524c=_0x347fda[_0x217ab6][_0x5e40ca(0x1b9)],_0x560239=_0x347fda[_0x217ab6]['product_code'];var _0x15c150;switch(_0x512923){case'1':_0x15c150=_0x7b2819;break;case'2':_0x15c150=_0xa5524c;break;case'3':_0x15c150=_0x560239;break;}const _0x290d38={'width':0xd2,'height':0x64},_0x2559df={'width':_0x26e655(_0x2e4c5e[_0x5e40ca(0x241)]),'height':_0x26e655(_0x2e4c5e['height'])},_0x4ccd02=new Canvas();JsBarcode(_0x4ccd02,_0x15c150,{'format':'CODE128','height':_0x290d38[_0x5e40ca(0x247)],'displayValue':!![],'text':_0x15c150});const _0x46dcb7=_0x4ccd02[_0x5e40ca(0x1e6)](),_0x2e9e81=_0x2559df[_0x5e40ca(0x241)]/_0x290d38[_0x5e40ca(0x241)],_0x2b21b1=_0x2559df[_0x5e40ca(0x247)]/_0x290d38[_0x5e40ca(0x247)],_0x4d773a=Math['min'](_0x2e9e81,_0x2b21b1),_0x57416a=_0x290d38[_0x5e40ca(0x241)]*_0x4d773a,_0x18a956=_0x290d38[_0x5e40ca(0x247)]*_0x4d773a,_0x2c744e=(_0x2559df['width']-_0x57416a)/0x2,_0x444beb=(_0x2559df[_0x5e40ca(0x247)]-_0x18a956)/0x2;_0xdc5fe7[_0x5e40ca(0x1c9)](_0x46dcb7,_0x2c744e,_0x444beb,{'width':_0x57416a,'height':_0x18a956}),_0x217ab6!=_0x460715&&_0xdc5fe7[_0x5e40ca(0x23f)]();}}const _0x55af98=[];_0xdc5fe7['on'](_0x5e40ca(0x257),_0x55af98[_0x5e40ca(0x250)][_0x5e40ca(0x1c6)](_0x55af98)),_0xdc5fe7['on'](_0x5e40ca(0x20f),()=>{const _0x1d9712=_0x5e40ca,_0x15ae50=Buffer[_0x1d9712(0x217)](_0x55af98),_0x3a9e0f=_0x15ae50[_0x1d9712(0x1e9)]('base64');_0x5787ff['json']({'pdfContent':_0x3a9e0f});}),_0xdc5fe7['end']();}catch(_0x11f400){_0x5787ff[_0x5e40ca(0x1d0)]({'message':_0x11f400[_0x5e40ca(0x1ac)]});}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x245),auth,async(_0x57a53b,_0x3f900b)=>{const _0x30560b=a0_0x25d49c;try{console[_0x30560b(0x1d7)](_0x57a53b[_0x30560b(0x221)]);const {prod_cat:_0x5da81f,identity:_0xc50b82,valueData:_0x23abaa}=_0x57a53b[_0x30560b(0x221)];let _0x3b86df;switch(_0x5da81f){case'fg':if(_0xc50b82=='Brands')_0x3b86df=await product[_0x30560b(0x1c0)]([{'$match':{'product_category':_0x30560b(0x222),'brand':_0x23abaa}}]);else _0xc50b82=='Category'&&(_0x3b86df=await product[_0x30560b(0x1c0)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x23abaa}}]));break;case'rm':if(_0xc50b82=='Brands')_0x3b86df=await product['aggregate']([{'$match':{'product_category':_0x30560b(0x1e5),'brand':_0x23abaa}}]);else _0xc50b82=='Category'&&(_0x3b86df=await product['aggregate']([{'$match':{'product_category':_0x30560b(0x1e5),'category':_0x23abaa}}]));break;}_0x3f900b[_0x30560b(0x1d0)]({'data':_0x3b86df});}catch(_0x1ab06e){_0x3f900b['json']({'message':_0x1ab06e[_0x30560b(0x1ac)]});}}),router[a0_0x25d49c(0x1c4)](a0_0x25d49c(0x1ef),auth,async(_0x48ead8,_0x5a5e50)=>{const _0xe4eae=a0_0x25d49c;try{const _0x324558=_0x48ead8['params']['id'],{copies:_0x3a79a4,typeofbarcode:_0x59680f}=_0x48ead8[_0xe4eae(0x221)];var _0x503529=await product[_0xe4eae(0x1f6)](_0x324558);const _0x42d901=_0x2c98e7=>_0x2c98e7*0x48,_0x5375aa={'width':0x3,'height':0x1},_0x4c901b=new PDFDocument({'margin':_0x42d901(0.75),'size':[_0x42d901(_0x5375aa[_0xe4eae(0x241)]),_0x42d901(_0x5375aa[_0xe4eae(0x247)])],'bufferPages':!![]}),_0x449f06=_0x3a79a4,_0x150bcb=_0x503529[_0xe4eae(0x1f8)],_0x42d556=_0x503529[_0xe4eae(0x212)],_0x4e6bbe=_0x503529[_0xe4eae(0x1b9)],_0x5996f9=_0x503529[_0xe4eae(0x1cb)];let _0x2793d0;switch(_0x59680f){case'1':_0x2793d0=_0x42d556;break;case'2':_0x2793d0=_0x4e6bbe;break;case'3':_0x2793d0=_0x5996f9;break;}const _0x204ce3={'width':0xd2,'height':0x64},_0x410e9c={'width':_0x42d901(_0x5375aa[_0xe4eae(0x241)]),'height':_0x42d901(_0x5375aa[_0xe4eae(0x247)])};for(let _0x9f8601=0x1;_0x9f8601<=_0x449f06;_0x9f8601++){const _0x10f733=new Canvas();JsBarcode(_0x10f733,_0x2793d0,{'format':'CODE128','height':_0x204ce3[_0xe4eae(0x247)],'displayValue':!![],'text':_0x2793d0});const _0x31c73f=_0x10f733[_0xe4eae(0x1e6)](),_0x11df3e=_0x410e9c[_0xe4eae(0x241)]/_0x204ce3['width'],_0x4b5f11=_0x410e9c[_0xe4eae(0x247)]/_0x204ce3[_0xe4eae(0x247)],_0x2ba973=Math[_0xe4eae(0x239)](_0x11df3e,_0x4b5f11),_0x41a6f1=_0x204ce3[_0xe4eae(0x241)]*_0x2ba973,_0xa343fe=_0x204ce3[_0xe4eae(0x247)]*_0x2ba973,_0x40fca5=(_0x410e9c[_0xe4eae(0x241)]-_0x41a6f1)/0x2,_0x50b904=(_0x410e9c[_0xe4eae(0x247)]-_0xa343fe)/0x2;_0x4c901b['image'](_0x31c73f,_0x40fca5,_0x50b904,{'width':_0x41a6f1,'height':_0xa343fe}),_0x9f8601!=_0x449f06&&_0x4c901b['addPage']();}const _0x16168d=[];_0x4c901b['on'](_0xe4eae(0x257),_0x16168d[_0xe4eae(0x250)][_0xe4eae(0x1c6)](_0x16168d)),_0x4c901b['on'](_0xe4eae(0x20f),()=>{const _0x1de0ce=_0xe4eae,_0x8e0a9c=Buffer[_0x1de0ce(0x217)](_0x16168d),_0x49ce1a=_0x8e0a9c[_0x1de0ce(0x1e9)](_0x1de0ce(0x1ec));_0x5a5e50[_0x1de0ce(0x1d0)]({'pdfContent':_0x49ce1a});}),_0x4c901b[_0xe4eae(0x20f)]();}catch(_0x54ddc5){_0x5a5e50[_0xe4eae(0x1d0)]({'message':_0x54ddc5[_0xe4eae(0x1ac)]});}}),module[a0_0x25d49c(0x1f5)]=router;