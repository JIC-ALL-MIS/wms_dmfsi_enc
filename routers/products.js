function a0_0x221b(){const _0x42d6fe=['\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_barcode','Chinese','prod_categ','categ','PName','brands','product_docs','originalname','Secondary_Code','length','canvas','307001uXwYze','ProductCode','/categories/:id','migrate_product_fule','long','toBuffer','category','Category','/categories','Product_Name','Arabic','574690igrXno','then','products','Products\x20warehouse_data','$secondary_unit','11363BBRACp','end','redirect','French','$category','Sheets','push','/print_barcode_single/:id','CODE128','Finished\x20Goods','Enabled','12JvjwAt','/products_import_migrate_file','_id','English','PCat','Primary_Code','save','numeric','maxProdPerUnit','Workbook','Alert_QTY','Hindi','/view/add_products','find','Raw\x20Materials','Portuguese','defaultProduct.avif','language','/units/:id','German','brand','master','sheet_to_json','/view/:id','user','email','units','product_stock','MaxperUnits','send','/products/brands','warehouse','categories\x20data\x20delete\x20successfully','max_number_per_units','primary_code','bind','/brands/:id','render','write','body','Products_category','post','/products/categories','message','product\x20edit','name','barcode\x20Product\x20master','\x20unit\x20is\x20add\x20successfully','width','191529pTfJqh','Prod_Cat','base64','status','SheetNames','\x20Edit\x20Successfully','secondary_unit','Router','../middleware/auth','Portuguese\x20(BR)','flash','$product_name','alertquantity','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','map','diskStorage','/select_data','24VrwSBa','findByIdAndUpdate','findByIdAndDelete','categories_edit','658395CaPRzR','unit','errors','secondary_code','xlsx','/products/units','/units/delete/:id','filename','hello','edit_product','$product_details','\x20<>\x20','height','/brands/delete/:id','$brand','/brands','/products/view','Products\x20master','Products\x20find_data','data','express','params','success','8040wzhInF','aggregate','Units','min','/print_barcode','20uaclhH','Arabic\x20(ae)','product_category','\x20brand\x20is\x20add\x20successfully','Spanish','concat','single','$_id','jsbarcode','\x20categories\x20is\x20add\x20successfully','/units','302258ZHoxRX','/products_export_migrate_file','findOne','59997cgVzce','public/Migration','now','English\x20(US)','file','/barcode_data','setHeader','Products','$product_details.product_name','unit\x20data\x20delete\x20successfully','product_code','product_barcode_products','product\x20update\x20successfully','json','forEach','../models/all_models','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/filter_product','product\x20add\x20successfully','Brands','/barcode/:id','Product_Code','PAlQty','log','stock','/view','addPage','image','Content-Type','unit\x20data\x20update\x20successfully','findById','Maximum_Stocks','toString','get','exceljs'];a0_0x221b=function(){return _0x42d6fe;};return a0_0x221b();}const a0_0x18aad4=a0_0xd788;(function(_0x562b7b,_0x3cdd91){const _0x32ea71=a0_0xd788,_0x21e2ee=_0x562b7b();while(!![]){try{const _0x211012=-parseInt(_0x32ea71(0x1cc))/0x1+-parseInt(_0x32ea71(0x254))/0x2+-parseInt(_0x32ea71(0x218))/0x3*(parseInt(_0x32ea71(0x249))/0x4)+-parseInt(_0x32ea71(0x1d7))/0x5+parseInt(_0x32ea71(0x1e7))/0x6*(parseInt(_0x32ea71(0x257))/0x7)+parseInt(_0x32ea71(0x229))/0x8*(parseInt(_0x32ea71(0x22d))/0x9)+-parseInt(_0x32ea71(0x244))/0xa*(-parseInt(_0x32ea71(0x1dc))/0xb);if(_0x211012===_0x3cdd91)break;else _0x21e2ee['push'](_0x21e2ee['shift']());}catch(_0x91c583){_0x21e2ee['push'](_0x21e2ee['shift']());}}}(a0_0x221b,0x2ab08));const express=require(a0_0x18aad4(0x241)),res=require('express/lib/response'),app=express(),router=express[a0_0x18aad4(0x21f)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x18aad4(0x266)),auth=require(a0_0x18aad4(0x220)),users=require('../public/language/languages.json'),excelJS=require(a0_0x18aad4(0x1bf)),xlsx=require('xlsx'),JsBarcode=require(a0_0x18aad4(0x251)),{Canvas}=require(a0_0x18aad4(0x1cb)),PDFDocument=require('pdfkit-table');function a0_0xd788(_0x2c1793,_0x183cc3){const _0x221b8b=a0_0x221b();return a0_0xd788=function(_0xd78817,_0x17fb93){_0xd78817=_0xd78817-0x1bb;let _0x1e1fd4=_0x221b8b[_0xd78817];return _0x1e1fd4;},a0_0xd788(_0x2c1793,_0x183cc3);}router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x1d4),auth,async(_0x5c4093,_0x47435f)=>{const _0x4604a6=a0_0x18aad4;try{const {username:_0x339db5,email:_0x14f1c6,role:_0x5d4205}=_0x5c4093['user'],_0x2b46f0=_0x5c4093[_0x4604a6(0x1ff)],_0x27805f=await profile[_0x4604a6(0x256)]({'email':_0x2b46f0[_0x4604a6(0x200)]}),_0x225a3f=await master_shop[_0x4604a6(0x1f4)]();console[_0x4604a6(0x26e)](_0x4604a6(0x1fc),_0x225a3f);const _0x57e5b1=await categories[_0x4604a6(0x1f4)]();if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='English\x20(US)')var _0x5c3b14=users[_0x4604a6(0x1ea)];else{if(_0x225a3f[0x0]['language']=='Hindi')var _0x5c3b14=users[_0x4604a6(0x1f2)];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='German')var _0x5c3b14=users[_0x4604a6(0x1fa)];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]==_0x4604a6(0x24d))var _0x5c3b14=users[_0x4604a6(0x24d)];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='French')var _0x5c3b14=users[_0x4604a6(0x1df)];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='Portuguese\x20(BR)')var _0x5c3b14=users['Portuguese'];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='Chinese')var _0x5c3b14=users['Chinese'];else{if(_0x225a3f[0x0][_0x4604a6(0x1f8)]=='Arabic\x20(ae)')var _0x5c3b14=users[_0x4604a6(0x1d6)];}}}}}}}_0x47435f[_0x4604a6(0x20c)]('categories',{'success':_0x5c4093[_0x4604a6(0x222)](_0x4604a6(0x243)),'errors':_0x5c4093['flash'](_0x4604a6(0x22f)),'role':_0x2b46f0,'profile':_0x27805f,'user':_0x57e5b1,'master_shop':_0x225a3f,'language':_0x5c3b14});}catch(_0x32f413){console[_0x4604a6(0x26e)](_0x32f413);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x1d4),auth,async(_0x3ee019,_0x4d7e05)=>{const _0x1fe325=a0_0x18aad4;try{const {name:_0x586ebd,products:_0x4c5d13}=_0x3ee019[_0x1fe325(0x20e)],_0x4ae0b2=new categories({'name':_0x586ebd,'products':_0x4c5d13}),_0x393f29=await categories[_0x1fe325(0x256)]({'name':_0x586ebd});_0x393f29?_0x3ee019[_0x1fe325(0x222)](_0x1fe325(0x22f),_0x586ebd+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3ee019[_0x1fe325(0x222)](_0x1fe325(0x243),_0x586ebd+_0x1fe325(0x252));const _0x15391e=await _0x4ae0b2['save']();_0x4d7e05[_0x1fe325(0x1de)](_0x1fe325(0x211));}catch(_0x4199d7){console[_0x1fe325(0x26e)](_0x4199d7);}}),router['get'](a0_0x18aad4(0x1ce),auth,async(_0x5b19af,_0x35af6d)=>{const _0x4b3c78=a0_0x18aad4;try{const {username:_0x2cce2b,email:_0x2231ec,role:_0x1f3c5b}=_0x5b19af[_0x4b3c78(0x1ff)],_0x575e79=_0x5b19af['user'],_0x206ec9=await profile[_0x4b3c78(0x256)]({'email':_0x575e79['email']}),_0xb6346c=await master_shop['find']();console['log'](_0x4b3c78(0x1fc),_0xb6346c);const _0x3a6fb3=_0x5b19af[_0x4b3c78(0x242)]['id'];console[_0x4b3c78(0x26e)](_0x3a6fb3);const _0x5a770a=await categories[_0x4b3c78(0x1bb)](_0x3a6fb3);if(_0xb6346c[0x0][_0x4b3c78(0x1f8)]=='English\x20(US)')var _0x9a9ce8=users[_0x4b3c78(0x1ea)];else{if(_0xb6346c[0x0]['language']==_0x4b3c78(0x1f2))var _0x9a9ce8=users[_0x4b3c78(0x1f2)];else{if(_0xb6346c[0x0][_0x4b3c78(0x1f8)]==_0x4b3c78(0x1fa))var _0x9a9ce8=users[_0x4b3c78(0x1fa)];else{if(_0xb6346c[0x0][_0x4b3c78(0x1f8)]==_0x4b3c78(0x24d))var _0x9a9ce8=users[_0x4b3c78(0x24d)];else{if(_0xb6346c[0x0][_0x4b3c78(0x1f8)]==_0x4b3c78(0x1df))var _0x9a9ce8=users[_0x4b3c78(0x1df)];else{if(_0xb6346c[0x0]['language']==_0x4b3c78(0x221))var _0x9a9ce8=users[_0x4b3c78(0x1f6)];else{if(_0xb6346c[0x0]['language']==_0x4b3c78(0x1c2))var _0x9a9ce8=users['Chinese'];else{if(_0xb6346c[0x0][_0x4b3c78(0x1f8)]==_0x4b3c78(0x24a))var _0x9a9ce8=users[_0x4b3c78(0x1d6)];}}}}}}}_0x35af6d[_0x4b3c78(0x20c)]('categories',{'success':_0x5b19af[_0x4b3c78(0x222)](_0x4b3c78(0x243)),'errors':_0x5b19af[_0x4b3c78(0x222)](_0x4b3c78(0x22f)),'role':_0x575e79,'profile':_0x206ec9,'master_shop':_0xb6346c,'user':_0x5a770a,'language':_0x9a9ce8});}catch(_0x2f4997){console[_0x4b3c78(0x26e)](_0x2f4997);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x1ce),auth,async(_0x66b58b,_0x280939)=>{const _0x19266e=a0_0x18aad4;try{const _0x5b0fc0=_0x66b58b['params']['id'],_0x16d9bb=await categories[_0x19266e(0x22a)](_0x5b0fc0,_0x66b58b[_0x19266e(0x20e)]);_0x66b58b[_0x19266e(0x222)](_0x19266e(0x243),''+users[_0x19266e(0x22c)]),_0x280939[_0x19266e(0x1de)](_0x19266e(0x211));}catch(_0x1ba673){console['log'](_0x1ba673);}}),router[a0_0x18aad4(0x1be)]('/categories/delete/:id',auth,async(_0x18f1cb,_0xf49611)=>{const _0x10b6a6=a0_0x18aad4;try{const _0x1e4106=_0x18f1cb[_0x10b6a6(0x242)]['id'],_0x281631=await categories[_0x10b6a6(0x22b)](_0x1e4106);_0x18f1cb[_0x10b6a6(0x222)](_0x10b6a6(0x243),_0x10b6a6(0x207)),_0xf49611[_0x10b6a6(0x1de)](_0x10b6a6(0x211));}catch(_0x9b9b29){console[_0x10b6a6(0x26e)](_0x9b9b29);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x23c),auth,async(_0x3449c7,_0x5c3ff1)=>{const _0x58d61a=a0_0x18aad4;try{const {username:_0x5c9442,email:_0x17facb,role:_0x5b19c0}=_0x3449c7[_0x58d61a(0x1ff)],_0x34321f=_0x3449c7['user'],_0x368494=await profile[_0x58d61a(0x256)]({'email':_0x34321f[_0x58d61a(0x200)]}),_0x334683=await master_shop[_0x58d61a(0x1f4)]();console[_0x58d61a(0x26e)](_0x58d61a(0x1fc),_0x334683);const _0x13a694=await brands[_0x58d61a(0x1f4)]();if(_0x334683[0x0]['language']==_0x58d61a(0x25a))var _0xdc2a3=users[_0x58d61a(0x1ea)];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]==_0x58d61a(0x1f2))var _0xdc2a3=users[_0x58d61a(0x1f2)];else{if(_0x334683[0x0]['language']=='German')var _0xdc2a3=users[_0x58d61a(0x1fa)];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]==_0x58d61a(0x24d))var _0xdc2a3=users[_0x58d61a(0x24d)];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]==_0x58d61a(0x1df))var _0xdc2a3=users[_0x58d61a(0x1df)];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]==_0x58d61a(0x221))var _0xdc2a3=users['Portuguese'];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]==_0x58d61a(0x1c2))var _0xdc2a3=users[_0x58d61a(0x1c2)];else{if(_0x334683[0x0][_0x58d61a(0x1f8)]=='Arabic\x20(ae)')var _0xdc2a3=users[_0x58d61a(0x1d6)];}}}}}}}_0x5c3ff1[_0x58d61a(0x20c)](_0x58d61a(0x1c6),{'success':_0x3449c7['flash'](_0x58d61a(0x243)),'errors':_0x3449c7[_0x58d61a(0x222)]('errors'),'role':_0x34321f,'profile':_0x368494,'master_shop':_0x334683,'user':_0x13a694,'language':_0xdc2a3});}catch(_0x1f0d69){console[_0x58d61a(0x26e)](_0x1f0d69);}}),router[a0_0x18aad4(0x210)]('/brands',auth,async(_0x5053c2,_0x9a29c8)=>{const _0x4b30e7=a0_0x18aad4;try{const {name:_0x4f211b,products:_0x13364d}=_0x5053c2['body'],_0x48e6fb=new brands({'name':_0x4f211b,'products':_0x13364d}),_0x4f1041=await brands[_0x4b30e7(0x256)]({'name':_0x4f211b});_0x4f1041?_0x5053c2[_0x4b30e7(0x222)](_0x4b30e7(0x22f),_0x4f211b+_0x4b30e7(0x267)):_0x5053c2[_0x4b30e7(0x222)]('success',_0x4f211b+_0x4b30e7(0x24c));const _0xea4a31=await _0x48e6fb[_0x4b30e7(0x1ed)]();_0x9a29c8[_0x4b30e7(0x1de)]('/products/brands');}catch(_0x8228bd){console['log'](_0x8228bd);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x20b),auth,async(_0x290b3a,_0x45951d)=>{const _0x425527=a0_0x18aad4;try{const {username:_0x1d1a50,email:_0x2b9289,role:_0x4911cc}=_0x290b3a[_0x425527(0x1ff)],_0x589997=_0x290b3a[_0x425527(0x1ff)],_0x12c67a=await profile['findOne']({'email':_0x589997['email']}),_0x1c1447=await master_shop[_0x425527(0x1f4)]();console['log'](_0x425527(0x1fc),_0x1c1447);const _0x482e9f=_0x290b3a[_0x425527(0x242)]['id'];console[_0x425527(0x26e)](_0x482e9f);const _0x1dae57=await brands['findById'](_0x482e9f);if(_0x1c1447[0x0][_0x425527(0x1f8)]=='English\x20(US)')var _0x4c2759=users['English'];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x1f2))var _0x4c2759=users[_0x425527(0x1f2)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x1fa))var _0x4c2759=users[_0x425527(0x1fa)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x24d))var _0x4c2759=users[_0x425527(0x24d)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]=='French')var _0x4c2759=users[_0x425527(0x1df)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x221))var _0x4c2759=users[_0x425527(0x1f6)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x1c2))var _0x4c2759=users[_0x425527(0x1c2)];else{if(_0x1c1447[0x0][_0x425527(0x1f8)]==_0x425527(0x24a))var _0x4c2759=users['Arabic'];}}}}}}}_0x45951d[_0x425527(0x20c)](_0x425527(0x1c6),{'success':_0x290b3a[_0x425527(0x222)](_0x425527(0x243)),'errors':_0x290b3a[_0x425527(0x222)](_0x425527(0x22f)),'role':_0x589997,'profile':_0x12c67a,'master_shop':_0x1c1447,'user':_0x1dae57,'language':_0x4c2759});}catch(_0x3520f2){console[_0x425527(0x26e)](_0x3520f2);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x20b),auth,async(_0x138e02,_0x53b0c8)=>{const _0x412f76=a0_0x18aad4;try{const _0x52fce8=_0x138e02[_0x412f76(0x242)]['id'],_0x5f3fad=await brands['findByIdAndUpdate'](_0x52fce8,_0x138e02[_0x412f76(0x20e)]);_0x138e02['flash'](_0x412f76(0x243),'brand\x20data\x20update\x20successfully'),_0x53b0c8[_0x412f76(0x1de)]('/products/brands');}catch(_0x37c25b){console['log'](_0x37c25b);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x23a),auth,async(_0x38210b,_0x354496)=>{const _0x51348d=a0_0x18aad4;try{const _0x3aa38f=_0x38210b['params']['id'],_0x2b2a29=await brands[_0x51348d(0x22b)](_0x3aa38f);_0x38210b[_0x51348d(0x222)]('success','brand\x20data\x20delete\x20successfully'),_0x354496[_0x51348d(0x1de)](_0x51348d(0x205));}catch(_0x48b232){console['log'](_0x48b232);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x253),auth,async(_0x87dad7,_0x4b64a5)=>{const _0x4e7219=a0_0x18aad4;try{const {username:_0x3547c8,email:_0x25bbda,role:_0x3a3b1b}=_0x87dad7[_0x4e7219(0x1ff)],_0x529ad3=_0x87dad7['user'],_0x1db158=await profile['findOne']({'email':_0x529ad3[_0x4e7219(0x200)]}),_0x319c81=await master_shop[_0x4e7219(0x1f4)]();console['log'](_0x4e7219(0x1fc),_0x319c81);const _0x541a9a=await units[_0x4e7219(0x1f4)]();if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x25a))var _0x176692=users[_0x4e7219(0x1ea)];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x1f2))var _0x176692=users[_0x4e7219(0x1f2)];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x1fa))var _0x176692=users[_0x4e7219(0x1fa)];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x24d))var _0x176692=users['Spanish'];else{if(_0x319c81[0x0]['language']==_0x4e7219(0x1df))var _0x176692=users[_0x4e7219(0x1df)];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x221))var _0x176692=users[_0x4e7219(0x1f6)];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x1c2))var _0x176692=users['Chinese'];else{if(_0x319c81[0x0][_0x4e7219(0x1f8)]==_0x4e7219(0x24a))var _0x176692=users[_0x4e7219(0x1d6)];}}}}}}}_0x4b64a5[_0x4e7219(0x20c)](_0x4e7219(0x201),{'success':_0x87dad7[_0x4e7219(0x222)]('success'),'errors':_0x87dad7[_0x4e7219(0x222)](_0x4e7219(0x22f)),'role':_0x529ad3,'profile':_0x1db158,'master_shop':_0x319c81,'user':_0x541a9a,'language':_0x176692});}catch(_0x8c41af){console[_0x4e7219(0x26e)](_0x8c41af);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x253),auth,async(_0x356d8e,_0x1c84f4)=>{const _0x1f3325=a0_0x18aad4;try{const {name:_0x7e0fd0,secondary_unit:_0x1e4b66,products:_0x95eb6}=_0x356d8e[_0x1f3325(0x20e)],_0x277cea=new units({'name':_0x7e0fd0,'secondary_unit':_0x1e4b66,'products':_0x95eb6}),_0x287cd1=await units['findOne']({'name':_0x7e0fd0});_0x287cd1?_0x356d8e[_0x1f3325(0x222)](_0x1f3325(0x22f),_0x7e0fd0+_0x1f3325(0x1c0)):_0x356d8e[_0x1f3325(0x222)](_0x1f3325(0x243),_0x7e0fd0+_0x1f3325(0x216));const _0x435b2b=await _0x277cea[_0x1f3325(0x1ed)]();_0x1c84f4[_0x1f3325(0x1de)](_0x1f3325(0x232));}catch(_0x5da5d1){console[_0x1f3325(0x26e)](_0x5da5d1);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x1f9),auth,async(_0x3333b2,_0x3e136f)=>{const _0x498419=a0_0x18aad4;try{const {username:_0x477a1a,email:_0x152531,role:_0x1066e6}=_0x3333b2[_0x498419(0x1ff)],_0x2320c3=_0x3333b2[_0x498419(0x1ff)],_0x4ff353=await profile['findOne']({'email':_0x2320c3[_0x498419(0x200)]}),_0x1459aa=await master_shop['find']();console[_0x498419(0x26e)](_0x498419(0x1fc),_0x1459aa);const _0x5d325e=_0x3333b2[_0x498419(0x242)]['id'],_0x195150=await units['findById'](_0x5d325e);if(_0x1459aa[0x0][_0x498419(0x1f8)]=='English\x20(US)')var _0x51cd42=users['English'];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]==_0x498419(0x1f2))var _0x51cd42=users[_0x498419(0x1f2)];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]=='German')var _0x51cd42=users[_0x498419(0x1fa)];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]==_0x498419(0x24d))var _0x51cd42=users['Spanish'];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]==_0x498419(0x1df))var _0x51cd42=users[_0x498419(0x1df)];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]==_0x498419(0x221))var _0x51cd42=users[_0x498419(0x1f6)];else{if(_0x1459aa[0x0]['language']=='Chinese')var _0x51cd42=users['Chinese'];else{if(_0x1459aa[0x0][_0x498419(0x1f8)]==_0x498419(0x24a))var _0x51cd42=users['Arabic'];}}}}}}}_0x3e136f['render'](_0x498419(0x201),{'success':_0x3333b2[_0x498419(0x222)](_0x498419(0x243)),'errors':_0x3333b2['flash']('errors'),'role':_0x2320c3,'profile':_0x4ff353,'master_shop':_0x1459aa,'user':_0x195150,'language':_0x51cd42});}catch(_0x37a13c){console[_0x498419(0x26e)](_0x37a13c);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x1f9),auth,async(_0x3f86af,_0xb894fe)=>{const _0x4f6cd9=a0_0x18aad4;try{const _0x21a25d=_0x3f86af[_0x4f6cd9(0x242)]['id'],_0x29d1d3=await units[_0x4f6cd9(0x22a)](_0x21a25d,_0x3f86af[_0x4f6cd9(0x20e)]);_0x3f86af[_0x4f6cd9(0x222)](_0x4f6cd9(0x243),_0x4f6cd9(0x274)),_0xb894fe[_0x4f6cd9(0x1de)](_0x4f6cd9(0x232));}catch(_0xdc9706){console[_0x4f6cd9(0x26e)](_0xdc9706);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x233),auth,async(_0x28fed6,_0xcb3c)=>{const _0x53c856=a0_0x18aad4;try{const _0x5bd6a2=_0x28fed6[_0x53c856(0x242)]['id'],_0x197efd=await units[_0x53c856(0x22b)](_0x5bd6a2);_0x28fed6[_0x53c856(0x222)](_0x53c856(0x243),_0x53c856(0x260)),_0xcb3c[_0x53c856(0x1de)]('/products/units');}catch(_0x1861d8){console[_0x53c856(0x26e)](_0x1861d8);}});const storage=multer[a0_0x18aad4(0x227)]({'destination':(_0x61a6ff,_0x53e336,_0x3a629a)=>{_0x3a629a(null,'public/upload');},'filename':(_0x12063f,_0x277ac0,_0x27c3b3)=>{const _0x576945=a0_0x18aad4;_0x27c3b3(null,Date[_0x576945(0x259)]()+_0x277ac0[_0x576945(0x1c8)]);}}),upload=multer({'storage':storage});router['get'](a0_0x18aad4(0x270),auth,async(_0x124d16,_0x1cac83)=>{const _0x11a335=a0_0x18aad4;try{const {username:_0x21f1aa,email:_0x3fe78f,role:_0x18fa3b}=_0x124d16['user'],_0x516488=_0x124d16[_0x11a335(0x1ff)],_0x105dca=await profile[_0x11a335(0x256)]({'email':_0x516488[_0x11a335(0x200)]}),_0x3ea3f6={'year':'numeric','month':_0x11a335(0x1d0),'day':_0x11a335(0x1ee)},_0x2c68da=await master_shop['find']();console[_0x11a335(0x26e)](_0x11a335(0x23e),_0x2c68da);const _0x6f8234=await product[_0x11a335(0x1f4)]();console[_0x11a335(0x26e)]('Products\x20find_data',_0x6f8234);const _0x589ae7=await warehouse['aggregate']([{'$unwind':_0x11a335(0x237)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x11a335(0x214),'as':_0x11a335(0x1c7)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x11a335(0x25f),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x11a335(0x223),'product_stock':{'$sum':'$product_stock'}}}]);console['log'](_0x11a335(0x1da),_0x589ae7),_0x589ae7[_0x11a335(0x265)](_0x343727=>{const _0x445f18=_0x11a335,_0x1cf069=_0x6f8234[_0x445f18(0x226)](_0x581951=>{const _0x1e0621=_0x445f18;_0x581951['name']==_0x343727[_0x1e0621(0x1e9)]&&(_0x581951[_0x1e0621(0x26f)]=parseInt(_0x581951[_0x1e0621(0x26f)])+parseInt(_0x343727[_0x1e0621(0x202)]));});}),console[_0x11a335(0x26e)](_0x11a335(0x23f),_0x6f8234);if(_0x2c68da[0x0][_0x11a335(0x1f8)]=='English\x20(US)')var _0x1bad93=users[_0x11a335(0x1ea)];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x1f2))var _0x1bad93=users[_0x11a335(0x1f2)];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x1fa))var _0x1bad93=users[_0x11a335(0x1fa)];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x24d))var _0x1bad93=users[_0x11a335(0x24d)];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x1df))var _0x1bad93=users[_0x11a335(0x1df)];else{if(_0x2c68da[0x0]['language']==_0x11a335(0x221))var _0x1bad93=users[_0x11a335(0x1f6)];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x1c2))var _0x1bad93=users['Chinese'];else{if(_0x2c68da[0x0][_0x11a335(0x1f8)]==_0x11a335(0x24a))var _0x1bad93=users[_0x11a335(0x1d6)];}}}}}}}_0x1cac83[_0x11a335(0x20c)]('products',{'success':_0x124d16[_0x11a335(0x222)](_0x11a335(0x243)),'errors':_0x124d16['flash'](_0x11a335(0x22f)),'alldata':_0x6f8234,'profile':_0x105dca,'master_shop':_0x2c68da,'role':_0x516488,'product_stock':_0x589ae7,'language':_0x1bad93});}catch(_0x2c69ed){console[_0x11a335(0x26e)](_0x2c69ed);}}),router['get'](a0_0x18aad4(0x1f3),auth,async(_0x452bc2,_0x5175f7)=>{const _0x5c384e=a0_0x18aad4;try{const {username:_0x4b57a4,email:_0x27dfbe,role:_0x30b5fe}=_0x452bc2[_0x5c384e(0x1ff)],_0x28cde9=_0x452bc2[_0x5c384e(0x1ff)],_0x208b0a=await profile[_0x5c384e(0x256)]({'email':_0x28cde9[_0x5c384e(0x200)]}),_0x583138=await master_shop[_0x5c384e(0x1f4)]();console['log'](_0x5c384e(0x1fc),_0x583138);const _0x3029ea=await categories['find']({}),_0x4bd314=await brands[_0x5c384e(0x1f4)]({}),_0x1e7399=await units[_0x5c384e(0x1f4)]({}),_0x4f07ef=await warehouse['find']({'status':'Enabled'});if(_0x583138[0x0][_0x5c384e(0x1f8)]=='English\x20(US)')var _0xe2a226=users['English'];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x1f2))var _0xe2a226=users[_0x5c384e(0x1f2)];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x1fa))var _0xe2a226=users[_0x5c384e(0x1fa)];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x24d))var _0xe2a226=users[_0x5c384e(0x24d)];else{if(_0x583138[0x0]['language']==_0x5c384e(0x1df))var _0xe2a226=users[_0x5c384e(0x1df)];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x221))var _0xe2a226=users[_0x5c384e(0x1f6)];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x1c2))var _0xe2a226=users['Chinese'];else{if(_0x583138[0x0][_0x5c384e(0x1f8)]==_0x5c384e(0x24a))var _0xe2a226=users['Arabic'];}}}}}}}_0x5175f7[_0x5c384e(0x20c)]('add_product',{'success':_0x452bc2[_0x5c384e(0x222)](_0x5c384e(0x243)),'errors':_0x452bc2[_0x5c384e(0x222)]('errors'),'role':_0x28cde9,'profile':_0x208b0a,'categories':_0x3029ea,'brands':_0x4bd314,'master_shop':_0x583138,'units':_0x1e7399,'language':_0xe2a226,'find_data':_0x4f07ef});}catch(_0x44674b){console[_0x5c384e(0x26e)](_0x44674b);}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x1f3),auth,upload['single'](a0_0x18aad4(0x272)),async(_0x57298f,_0x406d1d)=>{const _0x26ac9b=a0_0x18aad4;try{const {name:_0x4caec9,category:_0x591343,brand:_0x9ff729,unit:_0x4758fb,alertquantity:_0x2471dc,stock:_0x1949e,product_code:_0x57488b,warehouse:_0xb0286b,primary_ItemCode:_0x44a192,second_ItemCode:_0x110ad5,second_unit:_0x143bc2,maxPerUnit:_0x2d7c7e,MaxPerProduct:_0x164372}=_0x57298f[_0x26ac9b(0x20e)],_0x218f4b=_0x57298f[_0x26ac9b(0x25b)]?.[_0x26ac9b(0x234)]||_0x26ac9b(0x1f7),_0x34e33f=new product({'image':_0x218f4b,'name':_0x4caec9,'category':_0x591343,'brand':_0x9ff729,'unit':_0x4758fb,'alertquantity':_0x2471dc,'stock':_0x1949e,'product_code':_0x57488b,'warehouse':_0xb0286b,'primary_code':_0x44a192,'secondary_code':_0x110ad5,'second_unit':_0x143bc2,'maxStocks':_0x164372,'maxProdPerUnit':_0x2d7c7e}),_0x6656ca=await _0x34e33f[_0x26ac9b(0x1ed)](),_0x29860f=await categories['findOne']({'name':_0x591343});_0x29860f[_0x26ac9b(0x1d9)]=parseInt(_0x29860f[_0x26ac9b(0x1d9)])+0x1,await _0x29860f[_0x26ac9b(0x1ed)]();const _0x419980=await brands[_0x26ac9b(0x256)]({'name':_0x9ff729});_0x419980['products']=parseInt(_0x419980[_0x26ac9b(0x1d9)])+0x1,await _0x419980[_0x26ac9b(0x1ed)]();const _0x1e6e99=await units[_0x26ac9b(0x256)]({'name':_0x4758fb});_0x1e6e99['products']=parseInt(_0x1e6e99[_0x26ac9b(0x1d9)])+0x1,await _0x1e6e99[_0x26ac9b(0x1ed)](),_0x57298f[_0x26ac9b(0x222)](_0x26ac9b(0x243),_0x26ac9b(0x269)),_0x406d1d[_0x26ac9b(0x1de)](_0x26ac9b(0x23d));}catch(_0x2946b3){console[_0x26ac9b(0x26e)](_0x2946b3);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x1fe),auth,async(_0x21ff69,_0x3bb41c)=>{const _0xfc728a=a0_0x18aad4;try{const {username:_0x4c9710,email:_0x2c16f0,role:_0x2cb12b}=_0x21ff69['user'],_0x2dd660=_0x21ff69['user'],_0x385e59=await profile[_0xfc728a(0x256)]({'email':_0x2dd660[_0xfc728a(0x200)]}),_0x56aa75=await master_shop[_0xfc728a(0x1f4)]();console['log']('edit\x20Product\x20master',_0x56aa75);const _0x174364=_0x21ff69['params']['id'],_0x3b352f=await product[_0xfc728a(0x1bb)](_0x174364),_0x15d4cb=await categories['find']({}),_0x1d014d=await brands[_0xfc728a(0x1f4)]({}),_0xfb885f=await units['find']({}),_0x517b54=await warehouse[_0xfc728a(0x1f4)]({'status':_0xfc728a(0x1e6)}),_0x19a42d=await units[_0xfc728a(0x245)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0xfc728a(0x1db)}}}]);if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x25a))var _0x138cdf=users[_0xfc728a(0x1ea)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x1f2))var _0x138cdf=users[_0xfc728a(0x1f2)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x1fa))var _0x138cdf=users[_0xfc728a(0x1fa)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x24d))var _0x138cdf=users[_0xfc728a(0x24d)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]=='French')var _0x138cdf=users[_0xfc728a(0x1df)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x221))var _0x138cdf=users[_0xfc728a(0x1f6)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]=='Chinese')var _0x138cdf=users[_0xfc728a(0x1c2)];else{if(_0x56aa75[0x0][_0xfc728a(0x1f8)]==_0xfc728a(0x24a))var _0x138cdf=users['Arabic'];}}}}}}}_0x3bb41c['render'](_0xfc728a(0x236),{'success':_0x21ff69[_0xfc728a(0x222)](_0xfc728a(0x243)),'errors':_0x21ff69[_0xfc728a(0x222)](_0xfc728a(0x22f)),'role':_0x2dd660,'profile':_0x385e59,'alldata':_0x3b352f,'categories':_0x15d4cb,'brands':_0x1d014d,'master_shop':_0x56aa75,'units':_0xfb885f,'secondunit':_0x19a42d,'find_data':_0x517b54,'language':_0x138cdf});}catch(_0x4fcda1){console[_0xfc728a(0x26e)](_0x4fcda1);}}),router['post'](a0_0x18aad4(0x1fe),auth,upload[a0_0x18aad4(0x24f)]('image'),async(_0x33a9d7,_0x46efd9)=>{const _0x5b6439=a0_0x18aad4;try{console['log'](_0x5b6439(0x235));const _0x54b4af=_0x33a9d7['params']['id'],_0x287095=await product[_0x5b6439(0x1bb)](_0x54b4af),{image:_0x33fea3,name:_0x1648dd,category:_0x3930f9,brand:_0x3ff2af,sku:_0x26c918,unit:_0x6c2083,alertquantity:_0x2d4600,product_code:_0x3269d0,warehouse:_0x39e2bc,primary_ItemCode:_0x3c7491,second_ItemCode:_0x17d8d3,second_unit:_0x4bb0bb,maxPerUnit:_0x599cda,MaxPerProduct:_0x57f934,prod_catdata:_0x5a7236}=_0x33a9d7[_0x5b6439(0x20e)];_0x33a9d7[_0x5b6439(0x25b)]&&(_0x287095[_0x5b6439(0x272)]=_0x33a9d7[_0x5b6439(0x25b)][_0x5b6439(0x234)]);_0x287095['name']=_0x1648dd,_0x287095[_0x5b6439(0x1d2)]=_0x3930f9,_0x287095[_0x5b6439(0x1fb)]=_0x3ff2af,_0x287095['sku']=_0x26c918,_0x287095[_0x5b6439(0x22e)]=_0x6c2083,_0x287095[_0x5b6439(0x224)]=_0x2d4600,_0x287095['product_code']=_0x3269d0,_0x287095[_0x5b6439(0x206)]=_0x39e2bc,_0x287095['primary_code']=_0x3c7491,_0x287095[_0x5b6439(0x230)]=_0x17d8d3,_0x287095[_0x5b6439(0x21e)]=_0x4bb0bb,_0x287095['maxStocks']=_0x57f934,_0x287095[_0x5b6439(0x1ef)]=_0x599cda,_0x287095[_0x5b6439(0x24b)]=_0x5a7236;const _0x2302ea=await _0x287095[_0x5b6439(0x1ed)]();console[_0x5b6439(0x26e)](_0x5b6439(0x213),_0x287095),_0x33a9d7[_0x5b6439(0x222)](_0x5b6439(0x243),_0x5b6439(0x263)),_0x46efd9[_0x5b6439(0x1de)]('/products/view');}catch(_0x5ac0c7){console['log'](_0x5ac0c7);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x26b),auth,async(_0x37f751,_0x5f5827)=>{const _0x467582=a0_0x18aad4;try{const {username:_0x628bba,email:_0x5496ab,role:_0x121b16}=_0x37f751[_0x467582(0x1ff)],_0xf41655=_0x37f751[_0x467582(0x1ff)],_0x72910a=await profile[_0x467582(0x256)]({'email':_0xf41655[_0x467582(0x200)]}),_0x20628d=await master_shop[_0x467582(0x1f4)]();console['log'](_0x467582(0x215),_0x20628d);const _0x527115=_0x37f751[_0x467582(0x242)]['id'],_0x2c0dcd=await product[_0x467582(0x1bb)](_0x527115);console['log']('barcode\x20user_id',_0x2c0dcd);if(_0x20628d[0x0][_0x467582(0x1f8)]==_0x467582(0x25a))var _0x5ac926=users[_0x467582(0x1ea)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]==_0x467582(0x1f2))var _0x5ac926=users[_0x467582(0x1f2)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]==_0x467582(0x1fa))var _0x5ac926=users[_0x467582(0x1fa)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]==_0x467582(0x24d))var _0x5ac926=users[_0x467582(0x24d)];else{if(_0x20628d[0x0]['language']=='French')var _0x5ac926=users[_0x467582(0x1df)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]=='Portuguese\x20(BR)')var _0x5ac926=users[_0x467582(0x1f6)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]=='Chinese')var _0x5ac926=users[_0x467582(0x1c2)];else{if(_0x20628d[0x0][_0x467582(0x1f8)]==_0x467582(0x24a))var _0x5ac926=users['Arabic'];}}}}}}}_0x5f5827[_0x467582(0x20c)](_0x467582(0x1c1),{'success':_0x37f751['flash']('success'),'errors':_0x37f751[_0x467582(0x222)](_0x467582(0x22f)),'role':_0xf41655,'profile':_0x72910a,'alldata':_0x2c0dcd,'master_shop':_0x20628d,'language':_0x5ac926});}catch(_0x53e094){console[_0x467582(0x26e)](_0x53e094);}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x255),auth,async(_0x4b40f9,_0x51e98f)=>{const _0x31421f=a0_0x18aad4;try{const _0x623d80=new excelJS[(_0x31421f(0x1f0))](),_0x227269=_0x623d80['addWorksheet'](_0x31421f(0x25e));return _0x227269['columns']=[{'header':_0x31421f(0x1d5),'key':_0x31421f(0x1c5),'width':0xa},{'header':'Brands','key':'PBrands','width':0xa},{'header':_0x31421f(0x246),'key':'PUnits','width':0xa},{'header':'Secondary_Units','key':'PSecondaryUnits','width':0xa},{'header':_0x31421f(0x208),'key':_0x31421f(0x203),'width':0xa},{'header':_0x31421f(0x1ec),'key':_0x31421f(0x1cd),'width':0xa},{'header':'Secondary_Code','key':_0x31421f(0x1cd),'width':0xa},{'header':_0x31421f(0x26c),'key':_0x31421f(0x1cd),'width':0xa},{'header':'Category','key':_0x31421f(0x1eb),'width':0xa},{'header':_0x31421f(0x1f1),'key':_0x31421f(0x26d),'width':0xa},{'header':_0x31421f(0x1bc),'key':'PAlQty','width':0xa},{'header':'Products_category','key':_0x31421f(0x219),'width':0xa}],_0x51e98f[_0x31421f(0x25d)](_0x31421f(0x273),_0x31421f(0x225)),_0x51e98f[_0x31421f(0x25d)]('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x623d80[_0x31421f(0x231)][_0x31421f(0x20d)](_0x51e98f)[_0x31421f(0x1d8)](()=>{const _0x399cfa=_0x31421f;_0x51e98f[_0x399cfa(0x21b)](0xc8);});}catch(_0x2ddfcf){_0x51e98f[_0x31421f(0x21b)](0x190)[_0x31421f(0x204)](_0x2ddfcf);}});const storage1=multer[a0_0x18aad4(0x227)]({'destination':(_0x8a5864,_0x532813,_0x27d2e3)=>{const _0x4a13a4=a0_0x18aad4;_0x27d2e3(null,_0x4a13a4(0x258));},'filename':(_0x308acb,_0x1d5892,_0x5c1051)=>{const _0x22015c=a0_0x18aad4;_0x5c1051(null,Date[_0x22015c(0x259)]()+_0x1d5892['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x18aad4(0x210)](a0_0x18aad4(0x1e8),auth,uploadMigrate[a0_0x18aad4(0x24f)](a0_0x18aad4(0x1cf)),async(_0x36f73a,_0x22cd34)=>{const _0x44e507=a0_0x18aad4,_0x39cb7d=_0x36f73a[_0x44e507(0x25b)]['filename'],_0x4cc5c2=await xlsx['readFile']('public/Migration/'+_0x39cb7d);let _0x1b6cc3=_0x4cc5c2[_0x44e507(0x21c)],_0x2350bf=xlsx['utils'][_0x44e507(0x1fd)](_0x4cc5c2[_0x44e507(0x1e1)][_0x1b6cc3[0x0]]);for(const _0x14e22c of _0x2350bf){const _0xe430f6=_0x14e22c[_0x44e507(0x1d5)],_0x3b3631=_0x14e22c['Brands'],_0x1a2fba=_0x14e22c[_0x44e507(0x246)],_0x527ee0=_0x14e22c['Secondary_Units'],_0x544797=_0x14e22c['Product_Code'],_0x28658c=_0x14e22c[_0x44e507(0x1d3)],_0x1ae7bf=_0x14e22c[_0x44e507(0x1f1)],_0x16eb44=_0x14e22c[_0x44e507(0x1ec)],_0xb8167e=_0x14e22c[_0x44e507(0x1c9)],_0x5cc441=_0x14e22c[_0x44e507(0x1bc)],_0x33c7a3=_0x14e22c['max_number_per_units'],_0x5d5643=_0x14e22c[_0x44e507(0x20f)];try{let _0x1c02bd=await categories['findOne']({'name':_0x28658c});if(!_0x1c02bd){const _0x1c0324=new categories({'name':_0x28658c,'products':'0'});_0x1c02bd=await _0x1c0324['save']();}let _0x64b03d=await brands['findOne']({'name':_0x3b3631});if(!_0x64b03d){const _0x1e2e66=new brands({'name':_0x3b3631,'products':'0'});_0x64b03d=await _0x1e2e66[_0x44e507(0x1ed)]();}let _0x10a8bf=await units[_0x44e507(0x256)]({'name':_0x1a2fba,'secondary_unit':_0x527ee0});if(!_0x10a8bf){const _0x2a21b2=new units({'name':_0x1a2fba,'secondary_unit':_0x527ee0,'products':'0'});_0x10a8bf=await _0x2a21b2[_0x44e507(0x1ed)]();}const _0x93df1e=await product['find']({'name':_0xe430f6,'category':_0x1c02bd[_0x44e507(0x214)],'brand':_0x64b03d['name'],'secondary_unit':_0x10a8bf['secondary_unit'],'product_code':_0x544797});console['log'](_0x93df1e[_0x44e507(0x1ca)]+'\x20<>\x20'+_0x1c02bd[_0x44e507(0x214)]+_0x44e507(0x238)+_0x64b03d[_0x44e507(0x214)]+_0x44e507(0x238)+_0x10a8bf['secondary_unit']+_0x44e507(0x238)+_0x544797+_0x44e507(0x238)+_0xe430f6);if(_0x93df1e[_0x44e507(0x1ca)]===0x0){const _0x135c61=new product({'image':_0x44e507(0x1f7),'name':_0xe430f6,'category':_0x1c02bd['name'],'brand':_0x64b03d[_0x44e507(0x214)],'unit':_0x10a8bf['name'],'alertquantity':_0x1ae7bf,'product_code':_0x544797,'secondary_unit':_0x10a8bf[_0x44e507(0x21e)],'primary_code':_0x16eb44,'secondary_code':_0xb8167e,'maxStocks':_0x5cc441,'maxProdPerUnit':_0x33c7a3,'product_category':_0x5d5643}),_0x586807=await _0x135c61[_0x44e507(0x1ed)]();_0x1c02bd[_0x44e507(0x1d9)]=parseInt(_0x1c02bd[_0x44e507(0x1d9)])+0x1,await _0x1c02bd[_0x44e507(0x1ed)](),_0x64b03d['products']=parseInt(_0x64b03d[_0x44e507(0x1d9)])+0x1,await _0x64b03d[_0x44e507(0x1ed)](),_0x10a8bf[_0x44e507(0x1d9)]=parseInt(_0x10a8bf[_0x44e507(0x1d9)])+0x1,await _0x10a8bf[_0x44e507(0x1ed)](),_0x36f73a[_0x44e507(0x222)]('success',_0xe430f6+'\x20added\x20successfully');}else{console[_0x44e507(0x26e)](_0x93df1e[0x0]);const _0x3f4056=_0x93df1e[0x0];_0x3f4056[_0x44e507(0x1d2)]=_0x1c02bd[_0x44e507(0x214)],_0x3f4056[_0x44e507(0x1fb)]=_0x64b03d[_0x44e507(0x214)],_0x3f4056[_0x44e507(0x22e)]=_0x10a8bf[_0x44e507(0x214)],_0x3f4056['alertquantity']=_0x1ae7bf,_0x3f4056['product_code']=_0x544797,_0x3f4056[_0x44e507(0x21e)]=_0x10a8bf['secondary_unit'],_0x3f4056[_0x44e507(0x209)]=_0x16eb44,_0x3f4056['secondary_code']=_0xb8167e,_0x3f4056['maxStocks']=_0x5cc441,_0x3f4056[_0x44e507(0x1ef)]=_0x33c7a3,_0x3f4056[_0x44e507(0x24b)]=_0x5d5643;const _0x464c51=await _0x3f4056['save']();_0x36f73a[_0x44e507(0x222)](_0x44e507(0x243),_0x464c51[_0x44e507(0x214)]+_0x44e507(0x21d));}}catch(_0x24af27){_0x22cd34[_0x44e507(0x21b)](0x1f4)[_0x44e507(0x264)]({'proderror':_0x24af27[_0x44e507(0x212)],'aproduct':_0xe430f6});}}_0x22cd34['redirect'](_0x44e507(0x23d));}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x228),auth,async(_0x2a506f,_0x25a0b8)=>{const _0x491ec8=a0_0x18aad4;try{console['log'](_0x2a506f['body']);const {data_cateory:_0x276c79,datachoose:_0x274166}=_0x2a506f['body'];var _0x2d62e8;if(_0x274166==_0x491ec8(0x1c3))_0x2d62e8=await product[_0x491ec8(0x245)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x274166==_0x491ec8(0x1c6))_0x2d62e8=await product['aggregate']([{'$match':{'product_category':_0x276c79}},{'$group':{'_id':_0x491ec8(0x23b)}}]);else _0x274166==_0x491ec8(0x1c4)&&(_0x2d62e8=await product['aggregate']([{'$match':{'product_category':_0x276c79}},{'$group':{'_id':_0x491ec8(0x1e0)}}]));}_0x25a0b8[_0x491ec8(0x264)](_0x2d62e8);}catch(_0x392f1c){_0x25a0b8[_0x491ec8(0x264)]({'message':_0x392f1c[_0x491ec8(0x212)]});}}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x268),auth,async(_0x2e955d,_0x284974)=>{const _0x39b29f=a0_0x18aad4;try{const {data_choosing:_0xde0393,data_selected:_0x26e69d}=_0x2e955d['body'];var _0x45d6a7;if(_0xde0393==_0x39b29f(0x1c3))_0x45d6a7=await product['aggregate']([{'$match':{'product_category':_0x26e69d}}]);else{if(_0xde0393=='brands')_0x45d6a7=await product[_0x39b29f(0x245)]([{'$match':{'brand':_0x26e69d}}]);else _0xde0393==_0x39b29f(0x1c4)&&(_0x45d6a7=await product[_0x39b29f(0x245)]([{'$match':{'category':_0x26e69d}}]));}_0x284974['json'](_0x45d6a7);}catch(_0x15c08f){_0x284974[_0x39b29f(0x264)]({'message':_0x15c08f[_0x39b29f(0x212)]});}}),router[a0_0x18aad4(0x1be)](a0_0x18aad4(0x248),auth,async(_0x2716e0,_0x3da5a5)=>{const _0x4dcd5d=a0_0x18aad4,_0x32b872=_0x2716e0[_0x4dcd5d(0x1ff)],_0x2af9db=await profile[_0x4dcd5d(0x256)]({'email':_0x32b872[_0x4dcd5d(0x200)]}),_0x5e2a1b=await master_shop[_0x4dcd5d(0x1f4)](),_0x24dc94=await product[_0x4dcd5d(0x1f4)]();if(_0x5e2a1b[0x0][_0x4dcd5d(0x1f8)]==_0x4dcd5d(0x25a))var _0x33423d=users[_0x4dcd5d(0x1ea)];else{if(_0x5e2a1b[0x0]['language']=='Hindi')var _0x33423d=users[_0x4dcd5d(0x1f2)];else{if(_0x5e2a1b[0x0][_0x4dcd5d(0x1f8)]=='German')var _0x33423d=users[_0x4dcd5d(0x1fa)];else{if(_0x5e2a1b[0x0][_0x4dcd5d(0x1f8)]=='Spanish')var _0x33423d=users[_0x4dcd5d(0x24d)];else{if(_0x5e2a1b[0x0][_0x4dcd5d(0x1f8)]=='French')var _0x33423d=users['French'];else{if(_0x5e2a1b[0x0]['language']==_0x4dcd5d(0x221))var _0x33423d=users['Portuguese'];else{if(_0x5e2a1b[0x0]['language']==_0x4dcd5d(0x1c2))var _0x33423d=users['Chinese'];else{if(_0x5e2a1b[0x0][_0x4dcd5d(0x1f8)]==_0x4dcd5d(0x24a))var _0x33423d=users[_0x4dcd5d(0x1d6)];}}}}}}}_0x3da5a5[_0x4dcd5d(0x20c)](_0x4dcd5d(0x262),{'success':_0x2716e0[_0x4dcd5d(0x222)](_0x4dcd5d(0x243)),'errors':_0x2716e0['flash'](_0x4dcd5d(0x22f)),'role':_0x32b872,'profile':_0x2af9db,'products':_0x24dc94,'master_shop':_0x5e2a1b,'language':_0x33423d});}),router[a0_0x18aad4(0x210)](a0_0x18aad4(0x25c),auth,async(_0x51e906,_0x5593d4)=>{const _0x2af4ad=await product['find']();_0x5593d4['json']({'data':_0x2af4ad});}),router[a0_0x18aad4(0x210)]('/barcode_filter',auth,async(_0x1b6236,_0x13bef6)=>{const _0x58f3fc=a0_0x18aad4;try{const {dataProdCat:_0x33011d,dataProdIdentity:_0x37d317}=_0x1b6236[_0x58f3fc(0x20e)];var _0x404f8a;switch(_0x33011d){case'fg':switch(_0x37d317){case _0x58f3fc(0x26a):_0x404f8a=await product[_0x58f3fc(0x245)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x58f3fc(0x23b)}},{'$project':{'brand':_0x58f3fc(0x250)}}]);break;case _0x58f3fc(0x1d3):_0x404f8a=await product['aggregate']([{'$match':{'product_category':_0x58f3fc(0x1e5)}},{'$group':{'_id':_0x58f3fc(0x1e0)}},{'$project':{'category':_0x58f3fc(0x250)}}]);break;}break;case'rm':switch(_0x37d317){case _0x58f3fc(0x26a):_0x404f8a=await product[_0x58f3fc(0x245)]([{'$match':{'product_category':_0x58f3fc(0x1f5)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x58f3fc(0x250)}}]);break;case'Category':_0x404f8a=await product['aggregate']([{'$match':{'product_category':_0x58f3fc(0x1f5)}},{'$group':{'_id':_0x58f3fc(0x1e0)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x13bef6[_0x58f3fc(0x264)](_0x404f8a);}catch(_0x13eda6){_0x13bef6[_0x58f3fc(0x264)]({'message':_0x13eda6[_0x58f3fc(0x212)]});}}),router['post']('/print_barcode_filter/',auth,async(_0x7077d9,_0x1929d4)=>{const _0x36cb7a=a0_0x18aad4;try{console[_0x36cb7a(0x26e)](_0x7077d9['body']);const {prod_cat:_0x564cbf,identity:_0x462678,valueData:_0x271fcb,typeofbarcode:_0x596830}=_0x7077d9[_0x36cb7a(0x20e)];let _0x384972;switch(_0x564cbf){case'fg':if(_0x462678=='Brands')_0x384972=await product[_0x36cb7a(0x245)]([{'$match':{'product_category':_0x36cb7a(0x1e5),'brand':_0x271fcb}}]);else _0x462678==_0x36cb7a(0x1d3)&&(_0x384972=await product['aggregate']([{'$match':{'product_category':_0x36cb7a(0x1e5),'category':_0x271fcb}}]));break;case'rm':if(_0x462678=='Brands')_0x384972=await product[_0x36cb7a(0x245)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x271fcb}}]);else _0x462678=='Category'&&(_0x384972=await product[_0x36cb7a(0x245)]([{'$match':{'product_category':_0x36cb7a(0x1f5),'category':_0x271fcb}}]));break;}const _0x3e340b=_0x57f70d=>_0x57f70d*0x48,_0x3ba35a={'width':0x3,'height':0x1},_0x228efc=new PDFDocument({'margin':_0x3e340b(0.75),'size':[_0x3e340b(_0x3ba35a[_0x36cb7a(0x217)]),_0x3e340b(_0x3ba35a['height'])],'bufferPages':!![]}),_0x42d0f9=_0x384972[_0x36cb7a(0x1ca)];for(let _0x4d71d2=0x0;_0x4d71d2<=_0x42d0f9;_0x4d71d2++){if(_0x4d71d2!=_0x42d0f9){const _0x3e0305=_0x384972[_0x4d71d2][_0x36cb7a(0x214)],_0x2f8e64=_0x384972[_0x4d71d2][_0x36cb7a(0x209)],_0x193a9b=_0x384972[_0x4d71d2][_0x36cb7a(0x230)],_0x3658fe=_0x384972[_0x4d71d2][_0x36cb7a(0x261)];var _0x36f2f1;switch(_0x596830){case'1':_0x36f2f1=_0x2f8e64;break;case'2':_0x36f2f1=_0x193a9b;break;case'3':_0x36f2f1=_0x3658fe;break;}const _0x17a6b9={'width':0xd2,'height':0x64},_0x5923c3={'width':_0x3e340b(_0x3ba35a[_0x36cb7a(0x217)]),'height':_0x3e340b(_0x3ba35a[_0x36cb7a(0x239)])},_0x4edf4e=new Canvas();JsBarcode(_0x4edf4e,_0x36f2f1,{'format':'CODE128','height':_0x17a6b9[_0x36cb7a(0x239)],'displayValue':!![],'text':_0x36f2f1});const _0x31a400=_0x4edf4e[_0x36cb7a(0x1d1)](),_0x2dc7b4=_0x5923c3[_0x36cb7a(0x217)]/_0x17a6b9['width'],_0x440cea=_0x5923c3['height']/_0x17a6b9[_0x36cb7a(0x239)],_0x134de8=Math[_0x36cb7a(0x247)](_0x2dc7b4,_0x440cea),_0x1250a3=_0x17a6b9['width']*_0x134de8,_0x4a60b2=_0x17a6b9[_0x36cb7a(0x239)]*_0x134de8,_0x2f4621=(_0x5923c3[_0x36cb7a(0x217)]-_0x1250a3)/0x2,_0x53d566=(_0x5923c3['height']-_0x4a60b2)/0x2;_0x228efc[_0x36cb7a(0x272)](_0x31a400,_0x2f4621,_0x53d566,{'width':_0x1250a3,'height':_0x4a60b2}),_0x4d71d2!=_0x42d0f9&&_0x228efc[_0x36cb7a(0x271)]();}}const _0x1236cf=[];_0x228efc['on'](_0x36cb7a(0x240),_0x1236cf[_0x36cb7a(0x1e2)][_0x36cb7a(0x20a)](_0x1236cf)),_0x228efc['on'](_0x36cb7a(0x1dd),()=>{const _0xa48c1d=_0x36cb7a,_0x7ec957=Buffer[_0xa48c1d(0x24e)](_0x1236cf),_0x19eca1=_0x7ec957['toString']('base64');_0x1929d4['json']({'pdfContent':_0x19eca1});}),_0x228efc[_0x36cb7a(0x1dd)]();}catch(_0x1d6b26){_0x1929d4[_0x36cb7a(0x264)]({'message':_0x1d6b26[_0x36cb7a(0x212)]});}}),router[a0_0x18aad4(0x210)]('/print_barcode_filter_search/',auth,async(_0x525fa1,_0x3411ea)=>{const _0x137e0a=a0_0x18aad4;try{console[_0x137e0a(0x26e)](_0x525fa1[_0x137e0a(0x20e)]);const {prod_cat:_0x202735,identity:_0x53fb21,valueData:_0x419794}=_0x525fa1['body'];let _0xe0d13;switch(_0x202735){case'fg':if(_0x53fb21==_0x137e0a(0x26a))_0xe0d13=await product[_0x137e0a(0x245)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x419794}}]);else _0x53fb21==_0x137e0a(0x1d3)&&(_0xe0d13=await product[_0x137e0a(0x245)]([{'$match':{'product_category':_0x137e0a(0x1e5),'category':_0x419794}}]));break;case'rm':if(_0x53fb21=='Brands')_0xe0d13=await product[_0x137e0a(0x245)]([{'$match':{'product_category':_0x137e0a(0x1f5),'brand':_0x419794}}]);else _0x53fb21==_0x137e0a(0x1d3)&&(_0xe0d13=await product[_0x137e0a(0x245)]([{'$match':{'product_category':_0x137e0a(0x1f5),'category':_0x419794}}]));break;}_0x3411ea[_0x137e0a(0x264)]({'data':_0xe0d13});}catch(_0xb1e09b){_0x3411ea[_0x137e0a(0x264)]({'message':_0xb1e09b[_0x137e0a(0x212)]});}}),router['post'](a0_0x18aad4(0x1e3),auth,async(_0x2e0f2e,_0x72c3d)=>{const _0x2811db=a0_0x18aad4;try{const _0x1b29b0=_0x2e0f2e['params']['id'],{copies:_0x35ddcb,typeofbarcode:_0x866f85}=_0x2e0f2e['body'];var _0x150c4e=await product[_0x2811db(0x1bb)](_0x1b29b0);const _0x315347=_0x35862c=>_0x35862c*0x48,_0x4282d6={'width':0x3,'height':0x1},_0x343a77=new PDFDocument({'margin':_0x315347(0.75),'size':[_0x315347(_0x4282d6['width']),_0x315347(_0x4282d6['height'])],'bufferPages':!![]}),_0x1370ce=_0x35ddcb,_0x4bf63b=_0x150c4e[_0x2811db(0x214)],_0x31ae0a=_0x150c4e[_0x2811db(0x209)],_0x4c3fdb=_0x150c4e[_0x2811db(0x230)],_0x1f5157=_0x150c4e[_0x2811db(0x261)];let _0x18bd89;switch(_0x866f85){case'1':_0x18bd89=_0x31ae0a;break;case'2':_0x18bd89=_0x4c3fdb;break;case'3':_0x18bd89=_0x1f5157;break;}const _0x1a8e50={'width':0xd2,'height':0x64},_0x2d0d1c={'width':_0x315347(_0x4282d6[_0x2811db(0x217)]),'height':_0x315347(_0x4282d6['height'])};for(let _0x3b1c2f=0x1;_0x3b1c2f<=_0x1370ce;_0x3b1c2f++){const _0x274a7d=new Canvas();JsBarcode(_0x274a7d,_0x18bd89,{'format':_0x2811db(0x1e4),'height':_0x1a8e50[_0x2811db(0x239)],'displayValue':!![],'text':_0x18bd89});const _0xefb81b=_0x274a7d[_0x2811db(0x1d1)](),_0x1f457b=_0x2d0d1c[_0x2811db(0x217)]/_0x1a8e50[_0x2811db(0x217)],_0x213e0e=_0x2d0d1c[_0x2811db(0x239)]/_0x1a8e50[_0x2811db(0x239)],_0x4fbafb=Math[_0x2811db(0x247)](_0x1f457b,_0x213e0e),_0x2d6118=_0x1a8e50[_0x2811db(0x217)]*_0x4fbafb,_0x417c1d=_0x1a8e50[_0x2811db(0x239)]*_0x4fbafb,_0x48b73f=(_0x2d0d1c['width']-_0x2d6118)/0x2,_0xd16649=(_0x2d0d1c[_0x2811db(0x239)]-_0x417c1d)/0x2;_0x343a77['image'](_0xefb81b,_0x48b73f,_0xd16649,{'width':_0x2d6118,'height':_0x417c1d}),_0x3b1c2f!=_0x1370ce&&_0x343a77[_0x2811db(0x271)]();}const _0x21fef5=[];_0x343a77['on'](_0x2811db(0x240),_0x21fef5[_0x2811db(0x1e2)]['bind'](_0x21fef5)),_0x343a77['on'](_0x2811db(0x1dd),()=>{const _0x4ace47=_0x2811db,_0xa30223=Buffer[_0x4ace47(0x24e)](_0x21fef5),_0x3731cb=_0xa30223[_0x4ace47(0x1bd)](_0x4ace47(0x21a));_0x72c3d[_0x4ace47(0x264)]({'pdfContent':_0x3731cb});}),_0x343a77['end']();}catch(_0xb5b51a){_0x72c3d[_0x2811db(0x264)]({'message':_0xb5b51a[_0x2811db(0x212)]});}}),module['exports']=router;