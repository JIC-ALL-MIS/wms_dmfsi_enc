const a0_0x243948=a0_0x2093;(function(_0x24e202,_0x11d66a){const _0x4bd781=a0_0x2093,_0x2bde3c=_0x24e202();while(!![]){try{const _0x5db17e=parseInt(_0x4bd781(0xf5))/0x1*(parseInt(_0x4bd781(0x13b))/0x2)+parseInt(_0x4bd781(0xec))/0x3*(-parseInt(_0x4bd781(0xc0))/0x4)+-parseInt(_0x4bd781(0xd7))/0x5*(parseInt(_0x4bd781(0xaf))/0x6)+-parseInt(_0x4bd781(0x113))/0x7+parseInt(_0x4bd781(0x90))/0x8+-parseInt(_0x4bd781(0xa4))/0x9+parseInt(_0x4bd781(0xe3))/0xa*(parseInt(_0x4bd781(0xba))/0xb);if(_0x5db17e===_0x11d66a)break;else _0x2bde3c['push'](_0x2bde3c['shift']());}catch(_0x3694bc){_0x2bde3c['push'](_0x2bde3c['shift']());}}}(a0_0x4b01,0xdc762));function a0_0x4b01(){const _0x3332f8=['end','Products\x20warehouse_data','originalname','data','length','PCat','4362585pfsEmB','\x20categories\x20is\x20add\x20successfully','/print_barcode_filter/','\x20added\x20successfully','save','forEach','PUnits','filename','master','now','Product_Name','redirect','125270gtRuXO','Primary_Code','/print_barcode','width','name','/products/view','German','PSecondaryUnits','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','3aYSuVX','push','primary_code','Prod_Cat','min','xlsx','Secondary_Units','toString','Products_category','2kiYIcU','user','json','diskStorage','Products\x20find_data','then','\x20<>\x20','ProductCode','Category','/products_import_migrate_file','Brands','find','/view/add_products','French','Units','categories','English\x20(US)','/brands','product\x20add\x20successfully','Hindi','brand\x20data\x20update\x20successfully','params','exceljs','categ','unit','/view','public/Migration','$product_details.product_stock','findByIdAndDelete','Portuguese\x20(BR)','10569531JGJudR','concat','/categories/delete/:id','CODE128','$product_category','product_code','log','Router','$_id','Portuguese','addWorksheet','../public/language/languages.json','$category','get','findById','MaxperUnits','Products','product_barcode_products','aggregate','message','$product_stock','base64','Content-Type','/brands/:id','product\x20update\x20successfully','Spanish','secondary_unit','/print_barcode_filter_search/','categories\x20data\x20delete\x20successfully','Enabled','products','findByIdAndUpdate','brand','utils','warehouse','image','$product_details.product_name','/filter_product','sheet_to_json','product_details.product_name','1768062cyNgdu','map','/categories/:id','render','/barcode/:id','Sheets','defaultProduct.avif','send','add_product','post','errors','PBrands','Secondary_Code','flash','file','PAlQty','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/brands','\x20unit\x20is\x20add\x20successfully','stock','product\x20edit','single','Product_Code','language','$secondary_unit','/products_export_migrate_file','$brand','product_stock','jsbarcode','11992624kaYNTk','category','bind','Content-Disposition','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','unit\x20data\x20update\x20successfully','prod_categ','\x20Edit\x20Successfully','columns','express/lib/response','product_docs','SheetNames','maxProdPerUnit','readFile','success','product_category','Chinese','attachment;\x20filename=Product_Migration_File.xlsx','$product_docs','/categories','9014715cOZJWO','hello','/barcode_filter','alertquantity','Alert_QTY','/products/categories','status','addPage','brands','toBuffer','height','12hLngOI','/view/:id','unit\x20data\x20delete\x20successfully','max_number_per_units','/print_barcode_single/:id','body','/barcode_data','barcode\x20user_id','$product_details','English','secondary_code','2827PJMdxO','Arabic\x20(ae)','Raw\x20Materials','/select_data','Workbook','units','5307868IIkDmn','exports','email','public/upload','maxStocks','Maximum_Stocks','PName','barcode\x20Product\x20master','numeric','/brands/delete/:id','Arabic','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/units','/units','$product_name','Finished\x20Goods','findOne'];a0_0x4b01=function(){return _0x3332f8;};return a0_0x4b01();}const express=require('express'),res=require(a0_0x243948(0x99)),app=express(),router=express[a0_0x243948(0x11a)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x243948(0x11e)),excelJS=require(a0_0x243948(0x10b)),xlsx=require(a0_0x243948(0xf1)),JsBarcode=require(a0_0x243948(0x8f)),{Canvas}=require('canvas'),PDFDocument=require('pdfkit-table');function a0_0x2093(_0x34e790,_0x2c5c0d){const _0x4b013d=a0_0x4b01();return a0_0x2093=function(_0x2093fa,_0x211cf3){_0x2093fa=_0x2093fa-0x89;let _0x52146f=_0x4b013d[_0x2093fa];return _0x52146f;},a0_0x2093(_0x34e790,_0x2c5c0d);}router[a0_0x243948(0x120)](a0_0x243948(0xa3),auth,async(_0x349cbc,_0x615338)=>{const _0x5174bc=a0_0x243948;try{const {username:_0x240ea7,email:_0x1a3959,role:_0x2332b2}=_0x349cbc['user'],_0x240e55=_0x349cbc[_0x5174bc(0xf6)],_0x110545=await profile[_0x5174bc(0xd0)]({'email':_0x240e55[_0x5174bc(0xc2)]}),_0x2a3252=await master_shop[_0x5174bc(0x100)]();console[_0x5174bc(0x119)](_0x5174bc(0xdf),_0x2a3252);const _0x4ec61d=await categories[_0x5174bc(0x100)]();if(_0x2a3252[0x0][_0x5174bc(0x8a)]==_0x5174bc(0x105))var _0x55abbc=users[_0x5174bc(0xb8)];else{if(_0x2a3252[0x0][_0x5174bc(0x8a)]=='Hindi')var _0x55abbc=users['Hindi'];else{if(_0x2a3252[0x0][_0x5174bc(0x8a)]==_0x5174bc(0xe9))var _0x55abbc=users[_0x5174bc(0xe9)];else{if(_0x2a3252[0x0]['language']=='Spanish')var _0x55abbc=users[_0x5174bc(0x12c)];else{if(_0x2a3252[0x0][_0x5174bc(0x8a)]=='French')var _0x55abbc=users[_0x5174bc(0x102)];else{if(_0x2a3252[0x0][_0x5174bc(0x8a)]=='Portuguese\x20(BR)')var _0x55abbc=users['Portuguese'];else{if(_0x2a3252[0x0]['language']==_0x5174bc(0xa0))var _0x55abbc=users[_0x5174bc(0xa0)];else{if(_0x2a3252[0x0][_0x5174bc(0x8a)]==_0x5174bc(0xbb))var _0x55abbc=users[_0x5174bc(0xca)];}}}}}}}_0x615338[_0x5174bc(0x13e)](_0x5174bc(0x104),{'success':_0x349cbc[_0x5174bc(0x148)](_0x5174bc(0x9e)),'errors':_0x349cbc[_0x5174bc(0x148)]('errors'),'role':_0x240e55,'profile':_0x110545,'user':_0x4ec61d,'master_shop':_0x2a3252,'language':_0x55abbc});}catch(_0x440c28){console[_0x5174bc(0x119)](_0x440c28);}}),router[a0_0x243948(0x144)](a0_0x243948(0xa3),auth,async(_0x3484bf,_0x17a9ef)=>{const _0x87bb0f=a0_0x243948;try{const {name:_0x2e93fc,products:_0x4103a4}=_0x3484bf[_0x87bb0f(0xb4)],_0x125e70=new categories({'name':_0x2e93fc,'products':_0x4103a4}),_0x3c9daf=await categories['findOne']({'name':_0x2e93fc});_0x3c9daf?_0x3484bf['flash'](_0x87bb0f(0x145),_0x2e93fc+_0x87bb0f(0x14b)):_0x3484bf['flash'](_0x87bb0f(0x9e),_0x2e93fc+_0x87bb0f(0xd8));const _0x1c6ee5=await _0x125e70[_0x87bb0f(0xdb)]();_0x17a9ef[_0x87bb0f(0xe2)]('/products/categories');}catch(_0x2be360){console[_0x87bb0f(0x119)](_0x2be360);}}),router[a0_0x243948(0x120)](a0_0x243948(0x13d),auth,async(_0xb668ab,_0x1af409)=>{const _0x4fe630=a0_0x243948;try{const {username:_0xd4e271,email:_0x3a24b4,role:_0x290dbf}=_0xb668ab[_0x4fe630(0xf6)],_0x5c267f=_0xb668ab['user'],_0x3beb04=await profile[_0x4fe630(0xd0)]({'email':_0x5c267f['email']}),_0x3fe88d=await master_shop[_0x4fe630(0x100)]();console[_0x4fe630(0x119)](_0x4fe630(0xdf),_0x3fe88d);const _0x396564=_0xb668ab[_0x4fe630(0x10a)]['id'];console[_0x4fe630(0x119)](_0x396564);const _0x3b9617=await categories[_0x4fe630(0x121)](_0x396564);if(_0x3fe88d[0x0]['language']==_0x4fe630(0x105))var _0x150481=users['English'];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]=='Hindi')var _0x150481=users['Hindi'];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]==_0x4fe630(0xe9))var _0x150481=users[_0x4fe630(0xe9)];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]==_0x4fe630(0x12c))var _0x150481=users[_0x4fe630(0x12c)];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]==_0x4fe630(0x102))var _0x150481=users['French'];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]=='Portuguese\x20(BR)')var _0x150481=users[_0x4fe630(0x11c)];else{if(_0x3fe88d[0x0][_0x4fe630(0x8a)]==_0x4fe630(0xa0))var _0x150481=users['Chinese'];else{if(_0x3fe88d[0x0]['language']==_0x4fe630(0xbb))var _0x150481=users['Arabic'];}}}}}}}_0x1af409[_0x4fe630(0x13e)](_0x4fe630(0x104),{'success':_0xb668ab[_0x4fe630(0x148)](_0x4fe630(0x9e)),'errors':_0xb668ab[_0x4fe630(0x148)](_0x4fe630(0x145)),'role':_0x5c267f,'profile':_0x3beb04,'master_shop':_0x3fe88d,'user':_0x3b9617,'language':_0x150481});}catch(_0x28f4cb){console[_0x4fe630(0x119)](_0x28f4cb);}}),router[a0_0x243948(0x144)]('/categories/:id',auth,async(_0x129cdc,_0x53188a)=>{const _0x4e69d1=a0_0x243948;try{const _0x3861d8=_0x129cdc[_0x4e69d1(0x10a)]['id'],_0x30d609=await categories['findByIdAndUpdate'](_0x3861d8,_0x129cdc['body']);_0x129cdc[_0x4e69d1(0x148)](_0x4e69d1(0x9e),''+users['categories_edit']),_0x53188a['redirect'](_0x4e69d1(0xa9));}catch(_0x49ab9f){console[_0x4e69d1(0x119)](_0x49ab9f);}}),router[a0_0x243948(0x120)](a0_0x243948(0x115),auth,async(_0x5ca1cd,_0x5f400f)=>{const _0x2445b8=a0_0x243948;try{const _0x233726=_0x5ca1cd[_0x2445b8(0x10a)]['id'],_0xb9ba68=await categories[_0x2445b8(0x111)](_0x233726);_0x5ca1cd[_0x2445b8(0x148)](_0x2445b8(0x9e),_0x2445b8(0x12f)),_0x5f400f[_0x2445b8(0xe2)]('/products/categories');}catch(_0x1528c7){console[_0x2445b8(0x119)](_0x1528c7);}}),router[a0_0x243948(0x120)](a0_0x243948(0x106),auth,async(_0x14f538,_0x4a6a5f)=>{const _0x2fef2d=a0_0x243948;try{const {username:_0x5ec206,email:_0x220ee0,role:_0x152697}=_0x14f538[_0x2fef2d(0xf6)],_0xc51afb=_0x14f538[_0x2fef2d(0xf6)],_0x2da9df=await profile[_0x2fef2d(0xd0)]({'email':_0xc51afb[_0x2fef2d(0xc2)]}),_0x27b825=await master_shop[_0x2fef2d(0x100)]();console['log'](_0x2fef2d(0xdf),_0x27b825);const _0x23e5c9=await brands[_0x2fef2d(0x100)]();if(_0x27b825[0x0]['language']==_0x2fef2d(0x105))var _0x3c4ca8=users[_0x2fef2d(0xb8)];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]=='Hindi')var _0x3c4ca8=users[_0x2fef2d(0x108)];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]==_0x2fef2d(0xe9))var _0x3c4ca8=users['German'];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]==_0x2fef2d(0x12c))var _0x3c4ca8=users[_0x2fef2d(0x12c)];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]==_0x2fef2d(0x102))var _0x3c4ca8=users[_0x2fef2d(0x102)];else{if(_0x27b825[0x0]['language']==_0x2fef2d(0x112))var _0x3c4ca8=users['Portuguese'];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]==_0x2fef2d(0xa0))var _0x3c4ca8=users['Chinese'];else{if(_0x27b825[0x0][_0x2fef2d(0x8a)]==_0x2fef2d(0xbb))var _0x3c4ca8=users[_0x2fef2d(0xca)];}}}}}}}_0x4a6a5f['render'](_0x2fef2d(0xac),{'success':_0x14f538[_0x2fef2d(0x148)]('success'),'errors':_0x14f538['flash'](_0x2fef2d(0x145)),'role':_0xc51afb,'profile':_0x2da9df,'master_shop':_0x27b825,'user':_0x23e5c9,'language':_0x3c4ca8});}catch(_0x285a4f){console[_0x2fef2d(0x119)](_0x285a4f);}}),router[a0_0x243948(0x144)]('/brands',auth,async(_0x1bdb71,_0x2ced53)=>{const _0x2a0a28=a0_0x243948;try{const {name:_0x14ba0a,products:_0x5b477d}=_0x1bdb71[_0x2a0a28(0xb4)],_0xe0e76b=new brands({'name':_0x14ba0a,'products':_0x5b477d}),_0x4cc84f=await brands[_0x2a0a28(0xd0)]({'name':_0x14ba0a});_0x4cc84f?_0x1bdb71['flash'](_0x2a0a28(0x145),_0x14ba0a+_0x2a0a28(0xcb)):_0x1bdb71[_0x2a0a28(0x148)](_0x2a0a28(0x9e),_0x14ba0a+'\x20brand\x20is\x20add\x20successfully');const _0x469e8e=await _0xe0e76b[_0x2a0a28(0xdb)]();_0x2ced53[_0x2a0a28(0xe2)](_0x2a0a28(0x14c));}catch(_0x300423){console[_0x2a0a28(0x119)](_0x300423);}}),router[a0_0x243948(0x120)](a0_0x243948(0x12a),auth,async(_0x2b7472,_0x101afe)=>{const _0x1762a7=a0_0x243948;try{const {username:_0x443bc9,email:_0x51d25d,role:_0x5c0f4d}=_0x2b7472[_0x1762a7(0xf6)],_0x628ffc=_0x2b7472[_0x1762a7(0xf6)],_0x8a25da=await profile[_0x1762a7(0xd0)]({'email':_0x628ffc[_0x1762a7(0xc2)]}),_0x46ed5e=await master_shop[_0x1762a7(0x100)]();console[_0x1762a7(0x119)](_0x1762a7(0xdf),_0x46ed5e);const _0x237923=_0x2b7472[_0x1762a7(0x10a)]['id'];console[_0x1762a7(0x119)](_0x237923);const _0x1e72ae=await brands[_0x1762a7(0x121)](_0x237923);if(_0x46ed5e[0x0][_0x1762a7(0x8a)]==_0x1762a7(0x105))var _0xfdff61=users[_0x1762a7(0xb8)];else{if(_0x46ed5e[0x0][_0x1762a7(0x8a)]=='Hindi')var _0xfdff61=users['Hindi'];else{if(_0x46ed5e[0x0]['language']==_0x1762a7(0xe9))var _0xfdff61=users[_0x1762a7(0xe9)];else{if(_0x46ed5e[0x0][_0x1762a7(0x8a)]=='Spanish')var _0xfdff61=users[_0x1762a7(0x12c)];else{if(_0x46ed5e[0x0][_0x1762a7(0x8a)]=='French')var _0xfdff61=users[_0x1762a7(0x102)];else{if(_0x46ed5e[0x0][_0x1762a7(0x8a)]==_0x1762a7(0x112))var _0xfdff61=users[_0x1762a7(0x11c)];else{if(_0x46ed5e[0x0]['language']==_0x1762a7(0xa0))var _0xfdff61=users[_0x1762a7(0xa0)];else{if(_0x46ed5e[0x0][_0x1762a7(0x8a)]=='Arabic\x20(ae)')var _0xfdff61=users[_0x1762a7(0xca)];}}}}}}}_0x101afe['render'](_0x1762a7(0xac),{'success':_0x2b7472['flash'](_0x1762a7(0x9e)),'errors':_0x2b7472[_0x1762a7(0x148)](_0x1762a7(0x145)),'role':_0x628ffc,'profile':_0x8a25da,'master_shop':_0x46ed5e,'user':_0x1e72ae,'language':_0xfdff61});}catch(_0x525681){console[_0x1762a7(0x119)](_0x525681);}}),router[a0_0x243948(0x144)]('/brands/:id',auth,async(_0x596f74,_0x52d2f8)=>{const _0x1e0c8f=a0_0x243948;try{const _0x31fcf4=_0x596f74[_0x1e0c8f(0x10a)]['id'],_0x415935=await brands['findByIdAndUpdate'](_0x31fcf4,_0x596f74[_0x1e0c8f(0xb4)]);_0x596f74[_0x1e0c8f(0x148)](_0x1e0c8f(0x9e),_0x1e0c8f(0x109)),_0x52d2f8['redirect'](_0x1e0c8f(0x14c));}catch(_0x590d20){console[_0x1e0c8f(0x119)](_0x590d20);}}),router[a0_0x243948(0x120)](a0_0x243948(0xc9),auth,async(_0x5223e1,_0x30c090)=>{const _0x3674a7=a0_0x243948;try{const _0x49c9ed=_0x5223e1[_0x3674a7(0x10a)]['id'],_0x3bfef1=await brands[_0x3674a7(0x111)](_0x49c9ed);_0x5223e1[_0x3674a7(0x148)](_0x3674a7(0x9e),'brand\x20data\x20delete\x20successfully'),_0x30c090['redirect'](_0x3674a7(0x14c));}catch(_0x28ec8d){console[_0x3674a7(0x119)](_0x28ec8d);}}),router[a0_0x243948(0x120)](a0_0x243948(0xcd),auth,async(_0x1eb347,_0xeb85e4)=>{const _0x7418f4=a0_0x243948;try{const {username:_0x1dca18,email:_0x428ff0,role:_0x393502}=_0x1eb347[_0x7418f4(0xf6)],_0x47fa11=_0x1eb347[_0x7418f4(0xf6)],_0x350fe8=await profile[_0x7418f4(0xd0)]({'email':_0x47fa11[_0x7418f4(0xc2)]}),_0xb0e2c6=await master_shop[_0x7418f4(0x100)]();console[_0x7418f4(0x119)](_0x7418f4(0xdf),_0xb0e2c6);const _0xd87b24=await units[_0x7418f4(0x100)]();if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]==_0x7418f4(0x105))var _0x36d220=users[_0x7418f4(0xb8)];else{if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]=='Hindi')var _0x36d220=users[_0x7418f4(0x108)];else{if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]=='German')var _0x36d220=users[_0x7418f4(0xe9)];else{if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]==_0x7418f4(0x12c))var _0x36d220=users[_0x7418f4(0x12c)];else{if(_0xb0e2c6[0x0]['language']==_0x7418f4(0x102))var _0x36d220=users[_0x7418f4(0x102)];else{if(_0xb0e2c6[0x0]['language']==_0x7418f4(0x112))var _0x36d220=users[_0x7418f4(0x11c)];else{if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]=='Chinese')var _0x36d220=users[_0x7418f4(0xa0)];else{if(_0xb0e2c6[0x0][_0x7418f4(0x8a)]==_0x7418f4(0xbb))var _0x36d220=users[_0x7418f4(0xca)];}}}}}}}_0xeb85e4[_0x7418f4(0x13e)](_0x7418f4(0xbf),{'success':_0x1eb347[_0x7418f4(0x148)]('success'),'errors':_0x1eb347[_0x7418f4(0x148)](_0x7418f4(0x145)),'role':_0x47fa11,'profile':_0x350fe8,'master_shop':_0xb0e2c6,'user':_0xd87b24,'language':_0x36d220});}catch(_0x4fb17c){console[_0x7418f4(0x119)](_0x4fb17c);}}),router[a0_0x243948(0x144)](a0_0x243948(0xcd),auth,async(_0x15241b,_0x2e2698)=>{const _0x116adb=a0_0x243948;try{const {name:_0x1f2422,secondary_unit:_0x2e572b,products:_0x1a8bef}=_0x15241b['body'],_0x58270e=new units({'name':_0x1f2422,'secondary_unit':_0x2e572b,'products':_0x1a8bef}),_0x2bcc25=await units[_0x116adb(0xd0)]({'name':_0x1f2422});_0x2bcc25?_0x15241b[_0x116adb(0x148)]('errors',_0x1f2422+_0x116adb(0x94)):_0x15241b[_0x116adb(0x148)](_0x116adb(0x9e),_0x1f2422+_0x116adb(0x14d));const _0x4bc719=await _0x58270e[_0x116adb(0xdb)]();_0x2e2698[_0x116adb(0xe2)]('/products/units');}catch(_0x5578f5){console[_0x116adb(0x119)](_0x5578f5);}}),router['get']('/units/:id',auth,async(_0x4ff06b,_0x2ba42e)=>{const _0x18e3ae=a0_0x243948;try{const {username:_0xe418af,email:_0x69bc86,role:_0x53d216}=_0x4ff06b[_0x18e3ae(0xf6)],_0x284134=_0x4ff06b['user'],_0x7d8e49=await profile['findOne']({'email':_0x284134[_0x18e3ae(0xc2)]}),_0x25c591=await master_shop['find']();console['log'](_0x18e3ae(0xdf),_0x25c591);const _0xa1a4ec=_0x4ff06b[_0x18e3ae(0x10a)]['id'],_0x3eb397=await units[_0x18e3ae(0x121)](_0xa1a4ec);if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0x105))var _0x2822c5=users[_0x18e3ae(0xb8)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0x108))var _0x2822c5=users[_0x18e3ae(0x108)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0xe9))var _0x2822c5=users[_0x18e3ae(0xe9)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0x12c))var _0x2822c5=users['Spanish'];else{if(_0x25c591[0x0]['language']==_0x18e3ae(0x102))var _0x2822c5=users[_0x18e3ae(0x102)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0x112))var _0x2822c5=users[_0x18e3ae(0x11c)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0xa0))var _0x2822c5=users[_0x18e3ae(0xa0)];else{if(_0x25c591[0x0][_0x18e3ae(0x8a)]==_0x18e3ae(0xbb))var _0x2822c5=users[_0x18e3ae(0xca)];}}}}}}}_0x2ba42e[_0x18e3ae(0x13e)](_0x18e3ae(0xbf),{'success':_0x4ff06b[_0x18e3ae(0x148)]('success'),'errors':_0x4ff06b[_0x18e3ae(0x148)](_0x18e3ae(0x145)),'role':_0x284134,'profile':_0x7d8e49,'master_shop':_0x25c591,'user':_0x3eb397,'language':_0x2822c5});}catch(_0x2cc496){console[_0x18e3ae(0x119)](_0x2cc496);}}),router[a0_0x243948(0x144)]('/units/:id',auth,async(_0x21e620,_0x4a6659)=>{const _0x509756=a0_0x243948;try{const _0x564840=_0x21e620[_0x509756(0x10a)]['id'],_0x49060a=await units[_0x509756(0x132)](_0x564840,_0x21e620[_0x509756(0xb4)]);_0x21e620[_0x509756(0x148)](_0x509756(0x9e),_0x509756(0x95)),_0x4a6659['redirect'](_0x509756(0xcc));}catch(_0x1b3b56){console[_0x509756(0x119)](_0x1b3b56);}}),router[a0_0x243948(0x120)]('/units/delete/:id',auth,async(_0x4b261e,_0xff89c1)=>{const _0x431c0d=a0_0x243948;try{const _0x348118=_0x4b261e['params']['id'],_0x1599ca=await units['findByIdAndDelete'](_0x348118);_0x4b261e[_0x431c0d(0x148)](_0x431c0d(0x9e),_0x431c0d(0xb1)),_0xff89c1[_0x431c0d(0xe2)](_0x431c0d(0xcc));}catch(_0x2d9f6d){console[_0x431c0d(0x119)](_0x2d9f6d);}});const storage=multer[a0_0x243948(0xf8)]({'destination':(_0x52f426,_0x56dbf9,_0x49f9ef)=>{const _0xd3861a=a0_0x243948;_0x49f9ef(null,_0xd3861a(0xc3));},'filename':(_0x211c13,_0x1266ea,_0x2170c8)=>{const _0x34e665=a0_0x243948;_0x2170c8(null,Date[_0x34e665(0xe0)]()+_0x1266ea[_0x34e665(0xd3)]);}}),upload=multer({'storage':storage});router[a0_0x243948(0x120)](a0_0x243948(0x10e),auth,async(_0x3dbef9,_0x34c032)=>{const _0x122e0b=a0_0x243948;try{const {username:_0x27761c,email:_0x5d61fa,role:_0x32ce80}=_0x3dbef9['user'],_0x470385=_0x3dbef9[_0x122e0b(0xf6)],_0x370652=await profile[_0x122e0b(0xd0)]({'email':_0x470385[_0x122e0b(0xc2)]}),_0x43b4cf={'year':_0x122e0b(0xc8),'month':'long','day':_0x122e0b(0xc8)},_0x16a00f=await master_shop['find']();console['log']('Products\x20master',_0x16a00f);const _0x2d4cdd=await product['find']();console['log'](_0x122e0b(0xf9),_0x2d4cdd);const _0x396a63=await warehouse['aggregate']([{'$unwind':_0x122e0b(0xb7)},{'$lookup':{'from':'products','localField':_0x122e0b(0x13a),'foreignField':_0x122e0b(0xe7),'as':_0x122e0b(0x9a)}},{'$unwind':_0x122e0b(0xa2)},{'$project':{'product_name':_0x122e0b(0x137),'product_stock':_0x122e0b(0x110)}},{'$group':{'_id':_0x122e0b(0xce),'product_stock':{'$sum':_0x122e0b(0x127)}}}]);console[_0x122e0b(0x119)](_0x122e0b(0xd2),_0x396a63),_0x396a63[_0x122e0b(0xdc)](_0x273867=>{const _0x5ea5a3=_0x122e0b,_0x531fa3=_0x2d4cdd[_0x5ea5a3(0x13c)](_0x453205=>{const _0x4b053d=_0x5ea5a3;_0x453205[_0x4b053d(0xe7)]==_0x273867['_id']&&(_0x453205[_0x4b053d(0x14e)]=parseInt(_0x453205[_0x4b053d(0x14e)])+parseInt(_0x273867[_0x4b053d(0x8e)]));});}),console[_0x122e0b(0x119)](_0x122e0b(0xf9),_0x2d4cdd);if(_0x16a00f[0x0]['language']==_0x122e0b(0x105))var _0x5d998f=users['English'];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]==_0x122e0b(0x108))var _0x5d998f=users['Hindi'];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]==_0x122e0b(0xe9))var _0x5d998f=users[_0x122e0b(0xe9)];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]=='Spanish')var _0x5d998f=users[_0x122e0b(0x12c)];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]==_0x122e0b(0x102))var _0x5d998f=users[_0x122e0b(0x102)];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]=='Portuguese\x20(BR)')var _0x5d998f=users[_0x122e0b(0x11c)];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]==_0x122e0b(0xa0))var _0x5d998f=users['Chinese'];else{if(_0x16a00f[0x0][_0x122e0b(0x8a)]==_0x122e0b(0xbb))var _0x5d998f=users[_0x122e0b(0xca)];}}}}}}}_0x34c032['render'](_0x122e0b(0x131),{'success':_0x3dbef9[_0x122e0b(0x148)](_0x122e0b(0x9e)),'errors':_0x3dbef9[_0x122e0b(0x148)](_0x122e0b(0x145)),'alldata':_0x2d4cdd,'profile':_0x370652,'master_shop':_0x16a00f,'role':_0x470385,'product_stock':_0x396a63,'language':_0x5d998f});}catch(_0x225ac3){console[_0x122e0b(0x119)](_0x225ac3);}}),router[a0_0x243948(0x120)](a0_0x243948(0x101),auth,async(_0x171a6f,_0x475d47)=>{const _0x3a6159=a0_0x243948;try{const {username:_0xad7c39,email:_0x264ef2,role:_0xcc3ec2}=_0x171a6f[_0x3a6159(0xf6)],_0x3d626d=_0x171a6f[_0x3a6159(0xf6)],_0x18ae04=await profile[_0x3a6159(0xd0)]({'email':_0x3d626d[_0x3a6159(0xc2)]}),_0x458eb9=await master_shop[_0x3a6159(0x100)]();console[_0x3a6159(0x119)](_0x3a6159(0xdf),_0x458eb9);const _0x3c0bc0=await categories[_0x3a6159(0x100)]({}),_0x375790=await brands[_0x3a6159(0x100)]({}),_0x475dce=await units[_0x3a6159(0x100)]({}),_0x2028a6=await warehouse[_0x3a6159(0x100)]({'status':_0x3a6159(0x130)});if(_0x458eb9[0x0]['language']==_0x3a6159(0x105))var _0x1902e7=users[_0x3a6159(0xb8)];else{if(_0x458eb9[0x0][_0x3a6159(0x8a)]==_0x3a6159(0x108))var _0x1902e7=users[_0x3a6159(0x108)];else{if(_0x458eb9[0x0]['language']==_0x3a6159(0xe9))var _0x1902e7=users['German'];else{if(_0x458eb9[0x0][_0x3a6159(0x8a)]==_0x3a6159(0x12c))var _0x1902e7=users[_0x3a6159(0x12c)];else{if(_0x458eb9[0x0][_0x3a6159(0x8a)]==_0x3a6159(0x102))var _0x1902e7=users[_0x3a6159(0x102)];else{if(_0x458eb9[0x0]['language']==_0x3a6159(0x112))var _0x1902e7=users['Portuguese'];else{if(_0x458eb9[0x0][_0x3a6159(0x8a)]==_0x3a6159(0xa0))var _0x1902e7=users[_0x3a6159(0xa0)];else{if(_0x458eb9[0x0][_0x3a6159(0x8a)]==_0x3a6159(0xbb))var _0x1902e7=users[_0x3a6159(0xca)];}}}}}}}_0x475d47[_0x3a6159(0x13e)](_0x3a6159(0x143),{'success':_0x171a6f['flash']('success'),'errors':_0x171a6f[_0x3a6159(0x148)](_0x3a6159(0x145)),'role':_0x3d626d,'profile':_0x18ae04,'categories':_0x3c0bc0,'brands':_0x375790,'master_shop':_0x458eb9,'units':_0x475dce,'language':_0x1902e7,'find_data':_0x2028a6});}catch(_0x5dc436){console[_0x3a6159(0x119)](_0x5dc436);}}),router[a0_0x243948(0x144)](a0_0x243948(0x101),auth,upload[a0_0x243948(0x150)](a0_0x243948(0x136)),async(_0x31f27c,_0x30a845)=>{const _0x3d10d8=a0_0x243948;try{const {name:_0x25d3e9,category:_0x418a64,brand:_0x198533,unit:_0xa97960,alertquantity:_0x19e5b2,stock:_0x2b9f66,product_code:_0x5eb893,warehouse:_0x2cad15,primary_ItemCode:_0x46b93e,second_ItemCode:_0x5d2936,second_unit:_0x26d6f5,maxPerUnit:_0x1e5d11,MaxPerProduct:_0x1536eb}=_0x31f27c[_0x3d10d8(0xb4)],_0x1e6c60=_0x31f27c[_0x3d10d8(0x149)]?.[_0x3d10d8(0xde)]||_0x3d10d8(0x141),_0x4f3fe6=new product({'image':_0x1e6c60,'name':_0x25d3e9,'category':_0x418a64,'brand':_0x198533,'unit':_0xa97960,'alertquantity':_0x19e5b2,'stock':_0x2b9f66,'product_code':_0x5eb893,'warehouse':_0x2cad15,'primary_code':_0x46b93e,'secondary_code':_0x5d2936,'second_unit':_0x26d6f5,'maxStocks':_0x1536eb,'maxProdPerUnit':_0x1e5d11}),_0x4e0f1c=await _0x4f3fe6[_0x3d10d8(0xdb)](),_0x144a2e=await categories[_0x3d10d8(0xd0)]({'name':_0x418a64});_0x144a2e['products']=parseInt(_0x144a2e['products'])+0x1,await _0x144a2e['save']();const _0xb4875f=await brands[_0x3d10d8(0xd0)]({'name':_0x198533});_0xb4875f['products']=parseInt(_0xb4875f[_0x3d10d8(0x131)])+0x1,await _0xb4875f[_0x3d10d8(0xdb)]();const _0x3823b6=await units[_0x3d10d8(0xd0)]({'name':_0xa97960});_0x3823b6['products']=parseInt(_0x3823b6[_0x3d10d8(0x131)])+0x1,await _0x3823b6[_0x3d10d8(0xdb)](),_0x31f27c[_0x3d10d8(0x148)](_0x3d10d8(0x9e),_0x3d10d8(0x107)),_0x30a845[_0x3d10d8(0xe2)](_0x3d10d8(0xe8));}catch(_0x6d0f64){console[_0x3d10d8(0x119)](_0x6d0f64);}}),router['get'](a0_0x243948(0xb0),auth,async(_0x2b1be,_0x2e9e68)=>{const _0x4d16fd=a0_0x243948;try{const {username:_0x32adc6,email:_0x2a8f09,role:_0x149ace}=_0x2b1be[_0x4d16fd(0xf6)],_0x2bd348=_0x2b1be['user'],_0x321321=await profile['findOne']({'email':_0x2bd348['email']}),_0x1a05da=await master_shop[_0x4d16fd(0x100)]();console[_0x4d16fd(0x119)]('edit\x20Product\x20master',_0x1a05da);const _0x201601=_0x2b1be[_0x4d16fd(0x10a)]['id'],_0x24890c=await product['findById'](_0x201601),_0x25031e=await categories[_0x4d16fd(0x100)]({}),_0x135682=await brands['find']({}),_0x457bda=await units[_0x4d16fd(0x100)]({}),_0x502376=await warehouse[_0x4d16fd(0x100)]({'status':_0x4d16fd(0x130)}),_0x383072=await units[_0x4d16fd(0x125)]([{'$group':{'_id':_0x4d16fd(0x11b),'secondaryunit':{'$first':_0x4d16fd(0x8b)}}}]);if(_0x1a05da[0x0][_0x4d16fd(0x8a)]==_0x4d16fd(0x105))var _0x22c56b=users[_0x4d16fd(0xb8)];else{if(_0x1a05da[0x0][_0x4d16fd(0x8a)]=='Hindi')var _0x22c56b=users[_0x4d16fd(0x108)];else{if(_0x1a05da[0x0]['language']==_0x4d16fd(0xe9))var _0x22c56b=users[_0x4d16fd(0xe9)];else{if(_0x1a05da[0x0][_0x4d16fd(0x8a)]==_0x4d16fd(0x12c))var _0x22c56b=users['Spanish'];else{if(_0x1a05da[0x0]['language']==_0x4d16fd(0x102))var _0x22c56b=users[_0x4d16fd(0x102)];else{if(_0x1a05da[0x0][_0x4d16fd(0x8a)]=='Portuguese\x20(BR)')var _0x22c56b=users['Portuguese'];else{if(_0x1a05da[0x0][_0x4d16fd(0x8a)]=='Chinese')var _0x22c56b=users[_0x4d16fd(0xa0)];else{if(_0x1a05da[0x0][_0x4d16fd(0x8a)]==_0x4d16fd(0xbb))var _0x22c56b=users[_0x4d16fd(0xca)];}}}}}}}_0x2e9e68[_0x4d16fd(0x13e)]('edit_product',{'success':_0x2b1be[_0x4d16fd(0x148)]('success'),'errors':_0x2b1be[_0x4d16fd(0x148)](_0x4d16fd(0x145)),'role':_0x2bd348,'profile':_0x321321,'alldata':_0x24890c,'categories':_0x25031e,'brands':_0x135682,'master_shop':_0x1a05da,'units':_0x457bda,'secondunit':_0x383072,'find_data':_0x502376,'language':_0x22c56b});}catch(_0x50e270){console[_0x4d16fd(0x119)](_0x50e270);}}),router[a0_0x243948(0x144)](a0_0x243948(0xb0),auth,upload['single'](a0_0x243948(0x136)),async(_0x294a3d,_0x93624d)=>{const _0x5e8c51=a0_0x243948;try{console[_0x5e8c51(0x119)](_0x5e8c51(0xa5));const _0x56b1c4=_0x294a3d[_0x5e8c51(0x10a)]['id'],_0x454361=await product[_0x5e8c51(0x121)](_0x56b1c4),{image:_0x12f5d4,name:_0x287040,category:_0x1053b4,brand:_0xd62d86,sku:_0x199f21,unit:_0x2bf996,alertquantity:_0x294806,product_code:_0x5d3118,warehouse:_0x4d0d55,primary_ItemCode:_0x5a0821,second_ItemCode:_0xd44730,second_unit:_0x23e27f,maxPerUnit:_0x2959e4,MaxPerProduct:_0x226de9,prod_catdata:_0x2b5f67}=_0x294a3d[_0x5e8c51(0xb4)];_0x294a3d[_0x5e8c51(0x149)]&&(_0x454361['image']=_0x294a3d[_0x5e8c51(0x149)]['filename']);_0x454361[_0x5e8c51(0xe7)]=_0x287040,_0x454361[_0x5e8c51(0x91)]=_0x1053b4,_0x454361[_0x5e8c51(0x133)]=_0xd62d86,_0x454361['sku']=_0x199f21,_0x454361[_0x5e8c51(0x10d)]=_0x2bf996,_0x454361['alertquantity']=_0x294806,_0x454361[_0x5e8c51(0x118)]=_0x5d3118,_0x454361[_0x5e8c51(0x135)]=_0x4d0d55,_0x454361['primary_code']=_0x5a0821,_0x454361[_0x5e8c51(0xb9)]=_0xd44730,_0x454361['secondary_unit']=_0x23e27f,_0x454361[_0x5e8c51(0xc4)]=_0x226de9,_0x454361[_0x5e8c51(0x9c)]=_0x2959e4,_0x454361[_0x5e8c51(0x9f)]=_0x2b5f67;const _0x41c95c=await _0x454361[_0x5e8c51(0xdb)]();console[_0x5e8c51(0x119)](_0x5e8c51(0x14f),_0x454361),_0x294a3d['flash'](_0x5e8c51(0x9e),_0x5e8c51(0x12b)),_0x93624d[_0x5e8c51(0xe2)](_0x5e8c51(0xe8));}catch(_0x573a0f){console[_0x5e8c51(0x119)](_0x573a0f);}}),router[a0_0x243948(0x120)](a0_0x243948(0x13f),auth,async(_0x4bdf16,_0x3422e0)=>{const _0x5efe71=a0_0x243948;try{const {username:_0x402116,email:_0x3c272e,role:_0x5519bc}=_0x4bdf16[_0x5efe71(0xf6)],_0x162d92=_0x4bdf16['user'],_0x3f0193=await profile[_0x5efe71(0xd0)]({'email':_0x162d92['email']}),_0x42bdda=await master_shop[_0x5efe71(0x100)]();console[_0x5efe71(0x119)](_0x5efe71(0xc7),_0x42bdda);const _0x47ac06=_0x4bdf16['params']['id'],_0x20a2ef=await product[_0x5efe71(0x121)](_0x47ac06);console[_0x5efe71(0x119)](_0x5efe71(0xb6),_0x20a2ef);if(_0x42bdda[0x0][_0x5efe71(0x8a)]==_0x5efe71(0x105))var _0x5e3261=users[_0x5efe71(0xb8)];else{if(_0x42bdda[0x0][_0x5efe71(0x8a)]==_0x5efe71(0x108))var _0x5e3261=users[_0x5efe71(0x108)];else{if(_0x42bdda[0x0][_0x5efe71(0x8a)]==_0x5efe71(0xe9))var _0x5e3261=users[_0x5efe71(0xe9)];else{if(_0x42bdda[0x0][_0x5efe71(0x8a)]==_0x5efe71(0x12c))var _0x5e3261=users[_0x5efe71(0x12c)];else{if(_0x42bdda[0x0]['language']=='French')var _0x5e3261=users[_0x5efe71(0x102)];else{if(_0x42bdda[0x0]['language']==_0x5efe71(0x112))var _0x5e3261=users['Portuguese'];else{if(_0x42bdda[0x0]['language']==_0x5efe71(0xa0))var _0x5e3261=users['Chinese'];else{if(_0x42bdda[0x0][_0x5efe71(0x8a)]=='Arabic\x20(ae)')var _0x5e3261=users[_0x5efe71(0xca)];}}}}}}}_0x3422e0[_0x5efe71(0x13e)]('product_barcode',{'success':_0x4bdf16['flash'](_0x5efe71(0x9e)),'errors':_0x4bdf16['flash'](_0x5efe71(0x145)),'role':_0x162d92,'profile':_0x3f0193,'alldata':_0x20a2ef,'master_shop':_0x42bdda,'language':_0x5e3261});}catch(_0x199009){console[_0x5efe71(0x119)](_0x199009);}}),router['get'](a0_0x243948(0x8c),auth,async(_0x46585c,_0x51d3c9)=>{const _0x4538d1=a0_0x243948;try{const _0x210446=new excelJS[(_0x4538d1(0xbe))](),_0x35e483=_0x210446[_0x4538d1(0x11d)](_0x4538d1(0x123));return _0x35e483[_0x4538d1(0x98)]=[{'header':_0x4538d1(0xe1),'key':_0x4538d1(0xc6),'width':0xa},{'header':_0x4538d1(0xff),'key':_0x4538d1(0x146),'width':0xa},{'header':_0x4538d1(0x103),'key':_0x4538d1(0xdd),'width':0xa},{'header':_0x4538d1(0xf2),'key':_0x4538d1(0xea),'width':0xa},{'header':_0x4538d1(0xb2),'key':_0x4538d1(0x122),'width':0xa},{'header':_0x4538d1(0xe4),'key':_0x4538d1(0xfc),'width':0xa},{'header':'Secondary_Code','key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0x4538d1(0xfc),'width':0xa},{'header':_0x4538d1(0xfd),'key':_0x4538d1(0xd6),'width':0xa},{'header':'Alert_QTY','key':_0x4538d1(0x14a),'width':0xa},{'header':_0x4538d1(0xc5),'key':_0x4538d1(0x14a),'width':0xa},{'header':_0x4538d1(0xf4),'key':_0x4538d1(0xef),'width':0xa}],_0x51d3c9['setHeader'](_0x4538d1(0x129),_0x4538d1(0xeb)),_0x51d3c9['setHeader'](_0x4538d1(0x93),_0x4538d1(0xa1)),_0x210446['xlsx']['write'](_0x51d3c9)[_0x4538d1(0xfa)](()=>{const _0x13ed6c=_0x4538d1;_0x51d3c9[_0x13ed6c(0xaa)](0xc8);});}catch(_0x4bdc51){_0x51d3c9[_0x4538d1(0xaa)](0x190)[_0x4538d1(0x142)](_0x4bdc51);}});const storage1=multer[a0_0x243948(0xf8)]({'destination':(_0x1d73f4,_0x4bc0e6,_0x9651ee)=>{const _0x56ebcc=a0_0x243948;_0x9651ee(null,_0x56ebcc(0x10f));},'filename':(_0x5afcfb,_0x5c65ff,_0x2627e4)=>{const _0xb9410=a0_0x243948;_0x2627e4(null,Date[_0xb9410(0xe0)]()+_0x5c65ff[_0xb9410(0xd3)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x243948(0xfe),auth,uploadMigrate[a0_0x243948(0x150)]('migrate_product_fule'),async(_0xc5f81,_0x49b13d)=>{const _0x7edfe3=a0_0x243948,_0x1bf1c1=_0xc5f81[_0x7edfe3(0x149)][_0x7edfe3(0xde)],_0x55b926=await xlsx[_0x7edfe3(0x9d)]('public/Migration/'+_0x1bf1c1);let _0x3a76a2=_0x55b926[_0x7edfe3(0x9b)],_0x5aa420=xlsx[_0x7edfe3(0x134)][_0x7edfe3(0x139)](_0x55b926[_0x7edfe3(0x140)][_0x3a76a2[0x0]]);for(const _0x15baaf of _0x5aa420){const _0x52747c=_0x15baaf[_0x7edfe3(0xe1)],_0x113734=_0x15baaf[_0x7edfe3(0xff)],_0x6cbd=_0x15baaf[_0x7edfe3(0x103)],_0x148cc3=_0x15baaf[_0x7edfe3(0xf2)],_0x4418c5=_0x15baaf[_0x7edfe3(0x89)],_0x415c99=_0x15baaf['Category'],_0x31d735=_0x15baaf[_0x7edfe3(0xa8)],_0x346594=_0x15baaf[_0x7edfe3(0xe4)],_0x51b4f1=_0x15baaf[_0x7edfe3(0x147)],_0x9b5d78=_0x15baaf[_0x7edfe3(0xc5)],_0x1448a2=_0x15baaf['max_number_per_units'],_0x55f761=_0x15baaf['Products_category'];try{let _0x536fe0=await categories[_0x7edfe3(0xd0)]({'name':_0x415c99});if(!_0x536fe0){const _0xc11b58=new categories({'name':_0x415c99,'products':'0'});_0x536fe0=await _0xc11b58[_0x7edfe3(0xdb)]();}let _0xa89dd=await brands[_0x7edfe3(0xd0)]({'name':_0x113734});if(!_0xa89dd){const _0x1d17dd=new brands({'name':_0x113734,'products':'0'});_0xa89dd=await _0x1d17dd[_0x7edfe3(0xdb)]();}let _0x11c86c=await units[_0x7edfe3(0xd0)]({'name':_0x6cbd,'secondary_unit':_0x148cc3});if(!_0x11c86c){const _0x56e278=new units({'name':_0x6cbd,'secondary_unit':_0x148cc3,'products':'0'});_0x11c86c=await _0x56e278[_0x7edfe3(0xdb)]();}const _0x1fc618=await product[_0x7edfe3(0x100)]({'name':_0x52747c,'category':_0x536fe0['name'],'brand':_0xa89dd[_0x7edfe3(0xe7)],'secondary_unit':_0x11c86c['secondary_unit'],'product_code':_0x4418c5});console['log'](_0x1fc618[_0x7edfe3(0xd5)]+_0x7edfe3(0xfb)+_0x536fe0[_0x7edfe3(0xe7)]+_0x7edfe3(0xfb)+_0xa89dd[_0x7edfe3(0xe7)]+'\x20<>\x20'+_0x11c86c[_0x7edfe3(0x12d)]+'\x20<>\x20'+_0x4418c5+_0x7edfe3(0xfb)+_0x52747c);if(_0x1fc618['length']===0x0){const _0x18669a=new product({'image':_0x7edfe3(0x141),'name':_0x52747c,'category':_0x536fe0[_0x7edfe3(0xe7)],'brand':_0xa89dd[_0x7edfe3(0xe7)],'unit':_0x11c86c[_0x7edfe3(0xe7)],'alertquantity':_0x31d735,'product_code':_0x4418c5,'secondary_unit':_0x11c86c[_0x7edfe3(0x12d)],'primary_code':_0x346594,'secondary_code':_0x51b4f1,'maxStocks':_0x9b5d78,'maxProdPerUnit':_0x1448a2,'product_category':_0x55f761}),_0x3f13b6=await _0x18669a[_0x7edfe3(0xdb)]();_0x536fe0['products']=parseInt(_0x536fe0[_0x7edfe3(0x131)])+0x1,await _0x536fe0[_0x7edfe3(0xdb)](),_0xa89dd[_0x7edfe3(0x131)]=parseInt(_0xa89dd[_0x7edfe3(0x131)])+0x1,await _0xa89dd['save'](),_0x11c86c[_0x7edfe3(0x131)]=parseInt(_0x11c86c['products'])+0x1,await _0x11c86c[_0x7edfe3(0xdb)](),_0xc5f81[_0x7edfe3(0x148)](_0x7edfe3(0x9e),_0x52747c+_0x7edfe3(0xda));}else{console[_0x7edfe3(0x119)](_0x1fc618[0x0]);const _0x23a064=_0x1fc618[0x0];_0x23a064['category']=_0x536fe0[_0x7edfe3(0xe7)],_0x23a064[_0x7edfe3(0x133)]=_0xa89dd[_0x7edfe3(0xe7)],_0x23a064[_0x7edfe3(0x10d)]=_0x11c86c[_0x7edfe3(0xe7)],_0x23a064[_0x7edfe3(0xa7)]=_0x31d735,_0x23a064[_0x7edfe3(0x118)]=_0x4418c5,_0x23a064['secondary_unit']=_0x11c86c[_0x7edfe3(0x12d)],_0x23a064[_0x7edfe3(0xee)]=_0x346594,_0x23a064[_0x7edfe3(0xb9)]=_0x51b4f1,_0x23a064['maxStocks']=_0x9b5d78,_0x23a064[_0x7edfe3(0x9c)]=_0x1448a2,_0x23a064[_0x7edfe3(0x9f)]=_0x55f761;const _0x490ae5=await _0x23a064['save']();_0xc5f81['flash'](_0x7edfe3(0x9e),_0x490ae5[_0x7edfe3(0xe7)]+_0x7edfe3(0x97));}}catch(_0x275c8d){_0x49b13d[_0x7edfe3(0xaa)](0x1f4)[_0x7edfe3(0xf7)]({'proderror':_0x275c8d[_0x7edfe3(0x126)],'aproduct':_0x52747c});}}_0x49b13d['redirect'](_0x7edfe3(0xe8));}),router[a0_0x243948(0x144)](a0_0x243948(0xbd),auth,async(_0x876dbd,_0xfa44aa)=>{const _0xe33dbb=a0_0x243948;try{console[_0xe33dbb(0x119)](_0x876dbd[_0xe33dbb(0xb4)]);const {data_cateory:_0x885bd2,datachoose:_0x19d34d}=_0x876dbd['body'];var _0x42e9f7;if(_0x19d34d==_0xe33dbb(0x96))_0x42e9f7=await product[_0xe33dbb(0x125)]([{'$group':{'_id':_0xe33dbb(0x117)}}]);else{if(_0x19d34d==_0xe33dbb(0xac))_0x42e9f7=await product['aggregate']([{'$match':{'product_category':_0x885bd2}},{'$group':{'_id':_0xe33dbb(0x8d)}}]);else _0x19d34d==_0xe33dbb(0x10c)&&(_0x42e9f7=await product[_0xe33dbb(0x125)]([{'$match':{'product_category':_0x885bd2}},{'$group':{'_id':_0xe33dbb(0x11f)}}]));}_0xfa44aa[_0xe33dbb(0xf7)](_0x42e9f7);}catch(_0x1e04af){_0xfa44aa[_0xe33dbb(0xf7)]({'message':_0x1e04af[_0xe33dbb(0x126)]});}}),router['post'](a0_0x243948(0x138),auth,async(_0x3f93dd,_0x1b1b54)=>{const _0x1d337b=a0_0x243948;try{const {data_choosing:_0x4c5abc,data_selected:_0x3a9f1d}=_0x3f93dd[_0x1d337b(0xb4)];var _0x29bcaa;if(_0x4c5abc=='prod_categ')_0x29bcaa=await product[_0x1d337b(0x125)]([{'$match':{'product_category':_0x3a9f1d}}]);else{if(_0x4c5abc=='brands')_0x29bcaa=await product['aggregate']([{'$match':{'brand':_0x3a9f1d}}]);else _0x4c5abc==_0x1d337b(0x10c)&&(_0x29bcaa=await product['aggregate']([{'$match':{'category':_0x3a9f1d}}]));}_0x1b1b54[_0x1d337b(0xf7)](_0x29bcaa);}catch(_0x5aa83a){_0x1b1b54[_0x1d337b(0xf7)]({'message':_0x5aa83a[_0x1d337b(0x126)]});}}),router[a0_0x243948(0x120)](a0_0x243948(0xe5),auth,async(_0x149c9c,_0x3d419c)=>{const _0x2f785b=a0_0x243948,_0xe68949=_0x149c9c[_0x2f785b(0xf6)],_0x1f7547=await profile['findOne']({'email':_0xe68949[_0x2f785b(0xc2)]}),_0x568fda=await master_shop[_0x2f785b(0x100)](),_0x1394cf=await product[_0x2f785b(0x100)]();if(_0x568fda[0x0][_0x2f785b(0x8a)]==_0x2f785b(0x105))var _0x1890a0=users[_0x2f785b(0xb8)];else{if(_0x568fda[0x0]['language']==_0x2f785b(0x108))var _0x1890a0=users['Hindi'];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]==_0x2f785b(0xe9))var _0x1890a0=users[_0x2f785b(0xe9)];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]==_0x2f785b(0x12c))var _0x1890a0=users['Spanish'];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]==_0x2f785b(0x102))var _0x1890a0=users[_0x2f785b(0x102)];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]=='Portuguese\x20(BR)')var _0x1890a0=users['Portuguese'];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]==_0x2f785b(0xa0))var _0x1890a0=users[_0x2f785b(0xa0)];else{if(_0x568fda[0x0][_0x2f785b(0x8a)]=='Arabic\x20(ae)')var _0x1890a0=users[_0x2f785b(0xca)];}}}}}}}_0x3d419c['render'](_0x2f785b(0x124),{'success':_0x149c9c[_0x2f785b(0x148)](_0x2f785b(0x9e)),'errors':_0x149c9c[_0x2f785b(0x148)](_0x2f785b(0x145)),'role':_0xe68949,'profile':_0x1f7547,'products':_0x1394cf,'master_shop':_0x568fda,'language':_0x1890a0});}),router[a0_0x243948(0x144)](a0_0x243948(0xb5),auth,async(_0x3043ed,_0x529a7f)=>{const _0x41c37c=a0_0x243948,_0x519410=await product[_0x41c37c(0x100)]();_0x529a7f[_0x41c37c(0xf7)]({'data':_0x519410});}),router[a0_0x243948(0x144)](a0_0x243948(0xa6),auth,async(_0x130895,_0x10c8fa)=>{const _0x210504=a0_0x243948;try{const {dataProdCat:_0x146a32,dataProdIdentity:_0xfda02b}=_0x130895['body'];var _0x4c4a92;switch(_0x146a32){case'fg':switch(_0xfda02b){case _0x210504(0xff):_0x4c4a92=await product[_0x210504(0x125)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x210504(0x8d)}},{'$project':{'brand':'$_id'}}]);break;case _0x210504(0xfd):_0x4c4a92=await product[_0x210504(0x125)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x210504(0x11f)}},{'$project':{'category':_0x210504(0x11b)}}]);break;}break;case'rm':switch(_0xfda02b){case _0x210504(0xff):_0x4c4a92=await product[_0x210504(0x125)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x210504(0x8d)}},{'$project':{'brand':_0x210504(0x11b)}}]);break;case _0x210504(0xfd):_0x4c4a92=await product[_0x210504(0x125)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x210504(0x11b)}}]);break;}break;}_0x10c8fa['json'](_0x4c4a92);}catch(_0x35e70b){_0x10c8fa[_0x210504(0xf7)]({'message':_0x35e70b[_0x210504(0x126)]});}}),router[a0_0x243948(0x144)](a0_0x243948(0xd9),auth,async(_0x2e99ef,_0x454dfe)=>{const _0x6947b=a0_0x243948;try{console[_0x6947b(0x119)](_0x2e99ef['body']);const {prod_cat:_0x1049a7,identity:_0x46c6b4,valueData:_0x3d7b3b,typeofbarcode:_0xd1856}=_0x2e99ef['body'];let _0x277999;switch(_0x1049a7){case'fg':if(_0x46c6b4==_0x6947b(0xff))_0x277999=await product[_0x6947b(0x125)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x3d7b3b}}]);else _0x46c6b4=='Category'&&(_0x277999=await product['aggregate']([{'$match':{'product_category':_0x6947b(0xcf),'category':_0x3d7b3b}}]));break;case'rm':if(_0x46c6b4==_0x6947b(0xff))_0x277999=await product['aggregate']([{'$match':{'product_category':_0x6947b(0xbc),'brand':_0x3d7b3b}}]);else _0x46c6b4==_0x6947b(0xfd)&&(_0x277999=await product[_0x6947b(0x125)]([{'$match':{'product_category':_0x6947b(0xbc),'category':_0x3d7b3b}}]));break;}const _0x4d6cf0=_0x3ee01b=>_0x3ee01b*0x48,_0x25f710={'width':0x3,'height':0x1},_0x10e20e=new PDFDocument({'margin':_0x4d6cf0(0.75),'size':[_0x4d6cf0(_0x25f710['width']),_0x4d6cf0(_0x25f710[_0x6947b(0xae)])],'bufferPages':!![]}),_0x394c24=_0x277999[_0x6947b(0xd5)];for(let _0x41987c=0x0;_0x41987c<=_0x394c24;_0x41987c++){if(_0x41987c!=_0x394c24){const _0x4a08bb=_0x277999[_0x41987c]['name'],_0x46b718=_0x277999[_0x41987c]['primary_code'],_0x209769=_0x277999[_0x41987c]['secondary_code'],_0x20d881=_0x277999[_0x41987c][_0x6947b(0x118)];var _0x4ba9b4;switch(_0xd1856){case'1':_0x4ba9b4=_0x46b718;break;case'2':_0x4ba9b4=_0x209769;break;case'3':_0x4ba9b4=_0x20d881;break;}const _0x47aab0={'width':0xd2,'height':0x64},_0x508690={'width':_0x4d6cf0(_0x25f710['width']),'height':_0x4d6cf0(_0x25f710['height'])},_0x22108c=new Canvas();JsBarcode(_0x22108c,_0x4ba9b4,{'format':_0x6947b(0x116),'height':_0x47aab0[_0x6947b(0xae)],'displayValue':!![],'text':_0x4ba9b4});const _0x287092=_0x22108c[_0x6947b(0xad)](),_0x23eaf5=_0x508690['width']/_0x47aab0[_0x6947b(0xe6)],_0xd7d0bf=_0x508690[_0x6947b(0xae)]/_0x47aab0[_0x6947b(0xae)],_0x521163=Math[_0x6947b(0xf0)](_0x23eaf5,_0xd7d0bf),_0x17efec=_0x47aab0['width']*_0x521163,_0x1f0aa7=_0x47aab0['height']*_0x521163,_0x3f7457=(_0x508690[_0x6947b(0xe6)]-_0x17efec)/0x2,_0x15f4ff=(_0x508690['height']-_0x1f0aa7)/0x2;_0x10e20e[_0x6947b(0x136)](_0x287092,_0x3f7457,_0x15f4ff,{'width':_0x17efec,'height':_0x1f0aa7}),_0x41987c!=_0x394c24&&_0x10e20e[_0x6947b(0xab)]();}}const _0x98c2fb=[];_0x10e20e['on'](_0x6947b(0xd4),_0x98c2fb[_0x6947b(0xed)][_0x6947b(0x92)](_0x98c2fb)),_0x10e20e['on']('end',()=>{const _0x32a5d5=_0x6947b,_0xa662f0=Buffer[_0x32a5d5(0x114)](_0x98c2fb),_0x3dd2cb=_0xa662f0[_0x32a5d5(0xf3)](_0x32a5d5(0x128));_0x454dfe[_0x32a5d5(0xf7)]({'pdfContent':_0x3dd2cb});}),_0x10e20e['end']();}catch(_0x21f191){_0x454dfe['json']({'message':_0x21f191[_0x6947b(0x126)]});}}),router[a0_0x243948(0x144)](a0_0x243948(0x12e),auth,async(_0x4ed352,_0x1c4dac)=>{const _0x587501=a0_0x243948;try{console[_0x587501(0x119)](_0x4ed352['body']);const {prod_cat:_0x3389f5,identity:_0xb97dc5,valueData:_0x3af518}=_0x4ed352[_0x587501(0xb4)];let _0x4cd431;switch(_0x3389f5){case'fg':if(_0xb97dc5=='Brands')_0x4cd431=await product['aggregate']([{'$match':{'product_category':_0x587501(0xcf),'brand':_0x3af518}}]);else _0xb97dc5==_0x587501(0xfd)&&(_0x4cd431=await product[_0x587501(0x125)]([{'$match':{'product_category':_0x587501(0xcf),'category':_0x3af518}}]));break;case'rm':if(_0xb97dc5==_0x587501(0xff))_0x4cd431=await product[_0x587501(0x125)]([{'$match':{'product_category':_0x587501(0xbc),'brand':_0x3af518}}]);else _0xb97dc5=='Category'&&(_0x4cd431=await product[_0x587501(0x125)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x3af518}}]));break;}_0x1c4dac['json']({'data':_0x4cd431});}catch(_0xe2699d){_0x1c4dac[_0x587501(0xf7)]({'message':_0xe2699d[_0x587501(0x126)]});}}),router['post'](a0_0x243948(0xb3),auth,async(_0x18ef96,_0x12505e)=>{const _0x1004bd=a0_0x243948;try{const _0x24f568=_0x18ef96[_0x1004bd(0x10a)]['id'],{copies:_0x2da2c6,typeofbarcode:_0x28a850}=_0x18ef96['body'];var _0x33d87c=await product[_0x1004bd(0x121)](_0x24f568);const _0x235e7f=_0x22c714=>_0x22c714*0x48,_0x26ac29={'width':0x3,'height':0x1},_0x3a30a7=new PDFDocument({'margin':_0x235e7f(0.75),'size':[_0x235e7f(_0x26ac29[_0x1004bd(0xe6)]),_0x235e7f(_0x26ac29['height'])],'bufferPages':!![]}),_0x57f2b5=_0x2da2c6,_0x4f0ec7=_0x33d87c[_0x1004bd(0xe7)],_0x5348e2=_0x33d87c[_0x1004bd(0xee)],_0x3f1beb=_0x33d87c[_0x1004bd(0xb9)],_0x3da408=_0x33d87c[_0x1004bd(0x118)];let _0x1a88b5;switch(_0x28a850){case'1':_0x1a88b5=_0x5348e2;break;case'2':_0x1a88b5=_0x3f1beb;break;case'3':_0x1a88b5=_0x3da408;break;}const _0x304773={'width':0xd2,'height':0x64},_0x352f71={'width':_0x235e7f(_0x26ac29[_0x1004bd(0xe6)]),'height':_0x235e7f(_0x26ac29[_0x1004bd(0xae)])};for(let _0x37c9ed=0x1;_0x37c9ed<=_0x57f2b5;_0x37c9ed++){const _0x474cb6=new Canvas();JsBarcode(_0x474cb6,_0x1a88b5,{'format':_0x1004bd(0x116),'height':_0x304773[_0x1004bd(0xae)],'displayValue':!![],'text':_0x1a88b5});const _0x7c7f29=_0x474cb6['toBuffer'](),_0x148010=_0x352f71[_0x1004bd(0xe6)]/_0x304773[_0x1004bd(0xe6)],_0x5461fd=_0x352f71[_0x1004bd(0xae)]/_0x304773[_0x1004bd(0xae)],_0x22ec02=Math[_0x1004bd(0xf0)](_0x148010,_0x5461fd),_0xafe762=_0x304773[_0x1004bd(0xe6)]*_0x22ec02,_0x3ee13f=_0x304773[_0x1004bd(0xae)]*_0x22ec02,_0x529712=(_0x352f71[_0x1004bd(0xe6)]-_0xafe762)/0x2,_0x34c643=(_0x352f71[_0x1004bd(0xae)]-_0x3ee13f)/0x2;_0x3a30a7['image'](_0x7c7f29,_0x529712,_0x34c643,{'width':_0xafe762,'height':_0x3ee13f}),_0x37c9ed!=_0x57f2b5&&_0x3a30a7[_0x1004bd(0xab)]();}const _0x4485d4=[];_0x3a30a7['on']('data',_0x4485d4['push'][_0x1004bd(0x92)](_0x4485d4)),_0x3a30a7['on'](_0x1004bd(0xd1),()=>{const _0x48d3be=_0x1004bd,_0x20db16=Buffer['concat'](_0x4485d4),_0x5ab600=_0x20db16['toString']('base64');_0x12505e[_0x48d3be(0xf7)]({'pdfContent':_0x5ab600});}),_0x3a30a7[_0x1004bd(0xd1)]();}catch(_0x187f81){_0x12505e[_0x1004bd(0xf7)]({'message':_0x187f81[_0x1004bd(0x126)]});}}),module[a0_0x243948(0xc1)]=router;