const a0_0x511d0e=a0_0x338b;(function(_0x49ca96,_0x4f9567){const _0x582ac3=a0_0x338b,_0x447ea2=_0x49ca96();while(!![]){try{const _0x1c78e1=parseInt(_0x582ac3(0xd5))/0x1*(-parseInt(_0x582ac3(0x16a))/0x2)+-parseInt(_0x582ac3(0xd0))/0x3*(-parseInt(_0x582ac3(0xe7))/0x4)+-parseInt(_0x582ac3(0x153))/0x5*(-parseInt(_0x582ac3(0xf2))/0x6)+parseInt(_0x582ac3(0x100))/0x7*(-parseInt(_0x582ac3(0xe4))/0x8)+parseInt(_0x582ac3(0x137))/0x9+-parseInt(_0x582ac3(0x157))/0xa+-parseInt(_0x582ac3(0x177))/0xb*(-parseInt(_0x582ac3(0x14f))/0xc);if(_0x1c78e1===_0x4f9567)break;else _0x447ea2['push'](_0x447ea2['shift']());}catch(_0x1cdf69){_0x447ea2['push'](_0x447ea2['shift']());}}}(a0_0x36ef,0xe1a52));const express=require(a0_0x511d0e(0x11c)),res=require(a0_0x511d0e(0xfd)),app=express(),router=express['Router'](),multer=require(a0_0x511d0e(0x12c)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x511d0e(0xff)),auth=require('../middleware/auth'),users=require(a0_0x511d0e(0x154)),excelJS=require('exceljs'),xlsx=require('xlsx'),JsBarcode=require(a0_0x511d0e(0xe3)),{Canvas}=require(a0_0x511d0e(0x103)),PDFDocument=require(a0_0x511d0e(0xdc));function a0_0x338b(_0x40f631,_0xafeb1f){const _0x36ef69=a0_0x36ef();return a0_0x338b=function(_0x338b02,_0x3ac80c){_0x338b02=_0x338b02-0xc5;let _0x821567=_0x36ef69[_0x338b02];return _0x821567;},a0_0x338b(_0x40f631,_0xafeb1f);}router['get'](a0_0x511d0e(0xdd),auth,async(_0x34dba4,_0x2847fc)=>{const _0x588dbc=a0_0x511d0e;try{const {username:_0x327a5a,email:_0x47714a,role:_0x155e11}=_0x34dba4[_0x588dbc(0x13e)],_0x819c5f=_0x34dba4[_0x588dbc(0x13e)],_0x45b7f9=await profile['findOne']({'email':_0x819c5f['email']}),_0x491c26=await master_shop['find']();console['log'](_0x588dbc(0x136),_0x491c26);const _0x4fa891=await categories[_0x588dbc(0xec)]();if(_0x491c26[0x0][_0x588dbc(0x13b)]=='English\x20(US)')var _0x34c01c=users[_0x588dbc(0x14d)];else{if(_0x491c26[0x0][_0x588dbc(0x13b)]==_0x588dbc(0x145))var _0x34c01c=users['Hindi'];else{if(_0x491c26[0x0][_0x588dbc(0x13b)]==_0x588dbc(0x16c))var _0x34c01c=users[_0x588dbc(0x16c)];else{if(_0x491c26[0x0][_0x588dbc(0x13b)]==_0x588dbc(0x16b))var _0x34c01c=users[_0x588dbc(0x16b)];else{if(_0x491c26[0x0]['language']==_0x588dbc(0x17c))var _0x34c01c=users[_0x588dbc(0x17c)];else{if(_0x491c26[0x0]['language']==_0x588dbc(0x140))var _0x34c01c=users[_0x588dbc(0xf5)];else{if(_0x491c26[0x0][_0x588dbc(0x13b)]=='Chinese')var _0x34c01c=users[_0x588dbc(0xd2)];else{if(_0x491c26[0x0][_0x588dbc(0x13b)]=='Arabic\x20(ae)')var _0x34c01c=users[_0x588dbc(0x148)];}}}}}}}_0x2847fc['render'](_0x588dbc(0x133),{'success':_0x34dba4[_0x588dbc(0x159)](_0x588dbc(0xde)),'errors':_0x34dba4['flash']('errors'),'role':_0x819c5f,'profile':_0x45b7f9,'user':_0x4fa891,'master_shop':_0x491c26,'language':_0x34c01c});}catch(_0x4442d4){console[_0x588dbc(0x110)](_0x4442d4);}}),router['post'](a0_0x511d0e(0xdd),auth,async(_0x17b955,_0x343231)=>{const _0x118a8f=a0_0x511d0e;try{const {name:_0x59afd9,products:_0x12eeed}=_0x17b955[_0x118a8f(0x11a)],_0x52fae1=new categories({'name':_0x59afd9,'products':_0x12eeed}),_0x2ac40f=await categories[_0x118a8f(0xfe)]({'name':_0x59afd9});_0x2ac40f?_0x17b955['flash'](_0x118a8f(0x142),_0x59afd9+_0x118a8f(0x12d)):_0x17b955[_0x118a8f(0x159)]('success',_0x59afd9+_0x118a8f(0xc5));const _0x5296ff=await _0x52fae1['save']();_0x343231[_0x118a8f(0x152)](_0x118a8f(0xed));}catch(_0x3c983f){console[_0x118a8f(0x110)](_0x3c983f);}}),router[a0_0x511d0e(0x15a)]('/categories/:id',auth,async(_0x10cf18,_0x1801de)=>{const _0x5d4f24=a0_0x511d0e;try{const {username:_0x74c61f,email:_0x26d16d,role:_0x329825}=_0x10cf18['user'],_0xfddd76=_0x10cf18[_0x5d4f24(0x13e)],_0x14433a=await profile[_0x5d4f24(0xfe)]({'email':_0xfddd76['email']}),_0x2050c6=await master_shop['find']();console['log']('master',_0x2050c6);const _0x7d4f12=_0x10cf18['params']['id'];console['log'](_0x7d4f12);const _0x56946f=await categories[_0x5d4f24(0xf3)](_0x7d4f12);if(_0x2050c6[0x0]['language']=='English\x20(US)')var _0x315886=users[_0x5d4f24(0x14d)];else{if(_0x2050c6[0x0][_0x5d4f24(0x13b)]==_0x5d4f24(0x145))var _0x315886=users[_0x5d4f24(0x145)];else{if(_0x2050c6[0x0]['language']==_0x5d4f24(0x16c))var _0x315886=users['German'];else{if(_0x2050c6[0x0][_0x5d4f24(0x13b)]==_0x5d4f24(0x16b))var _0x315886=users[_0x5d4f24(0x16b)];else{if(_0x2050c6[0x0][_0x5d4f24(0x13b)]==_0x5d4f24(0x17c))var _0x315886=users[_0x5d4f24(0x17c)];else{if(_0x2050c6[0x0]['language']=='Portuguese\x20(BR)')var _0x315886=users['Portuguese'];else{if(_0x2050c6[0x0][_0x5d4f24(0x13b)]==_0x5d4f24(0xd2))var _0x315886=users[_0x5d4f24(0xd2)];else{if(_0x2050c6[0x0][_0x5d4f24(0x13b)]==_0x5d4f24(0x173))var _0x315886=users[_0x5d4f24(0x148)];}}}}}}}_0x1801de['render'](_0x5d4f24(0x133),{'success':_0x10cf18[_0x5d4f24(0x159)](_0x5d4f24(0xde)),'errors':_0x10cf18['flash']('errors'),'role':_0xfddd76,'profile':_0x14433a,'master_shop':_0x2050c6,'user':_0x56946f,'language':_0x315886});}catch(_0x2e4411){console[_0x5d4f24(0x110)](_0x2e4411);}}),router['post']('/categories/:id',auth,async(_0x53199d,_0x2cfc40)=>{const _0x5cc5c9=a0_0x511d0e;try{const _0x1d4593=_0x53199d[_0x5cc5c9(0xe9)]['id'],_0x4f78c6=await categories[_0x5cc5c9(0xea)](_0x1d4593,_0x53199d[_0x5cc5c9(0x11a)]);_0x53199d[_0x5cc5c9(0x159)]('success',''+users[_0x5cc5c9(0xe5)]),_0x2cfc40[_0x5cc5c9(0x152)](_0x5cc5c9(0xed));}catch(_0x59d95d){console[_0x5cc5c9(0x110)](_0x59d95d);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x170),auth,async(_0x13ea43,_0x840fb1)=>{const _0x46b0dd=a0_0x511d0e;try{const _0x15e91c=_0x13ea43[_0x46b0dd(0xe9)]['id'],_0x344665=await categories[_0x46b0dd(0x13a)](_0x15e91c);_0x13ea43[_0x46b0dd(0x159)](_0x46b0dd(0xde),_0x46b0dd(0x127)),_0x840fb1[_0x46b0dd(0x152)](_0x46b0dd(0xed));}catch(_0x4ee070){console['log'](_0x4ee070);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x149),auth,async(_0x5e0fde,_0x32caf4)=>{const _0x311974=a0_0x511d0e;try{const {username:_0x28cd66,email:_0x4a7da5,role:_0x4d69f6}=_0x5e0fde[_0x311974(0x13e)],_0x5c08d5=_0x5e0fde[_0x311974(0x13e)],_0x59309d=await profile[_0x311974(0xfe)]({'email':_0x5c08d5[_0x311974(0x11f)]}),_0x8c476b=await master_shop['find']();console[_0x311974(0x110)](_0x311974(0x136),_0x8c476b);const _0x227756=await brands[_0x311974(0xec)]();if(_0x8c476b[0x0][_0x311974(0x13b)]==_0x311974(0x11b))var _0xce4bb3=users[_0x311974(0x14d)];else{if(_0x8c476b[0x0]['language']=='Hindi')var _0xce4bb3=users['Hindi'];else{if(_0x8c476b[0x0][_0x311974(0x13b)]==_0x311974(0x16c))var _0xce4bb3=users['German'];else{if(_0x8c476b[0x0][_0x311974(0x13b)]=='Spanish')var _0xce4bb3=users[_0x311974(0x16b)];else{if(_0x8c476b[0x0]['language']=='French')var _0xce4bb3=users[_0x311974(0x17c)];else{if(_0x8c476b[0x0]['language']=='Portuguese\x20(BR)')var _0xce4bb3=users['Portuguese'];else{if(_0x8c476b[0x0][_0x311974(0x13b)]==_0x311974(0xd2))var _0xce4bb3=users['Chinese'];else{if(_0x8c476b[0x0][_0x311974(0x13b)]==_0x311974(0x173))var _0xce4bb3=users[_0x311974(0x148)];}}}}}}}_0x32caf4[_0x311974(0x132)](_0x311974(0x176),{'success':_0x5e0fde[_0x311974(0x159)](_0x311974(0xde)),'errors':_0x5e0fde[_0x311974(0x159)](_0x311974(0x142)),'role':_0x5c08d5,'profile':_0x59309d,'master_shop':_0x8c476b,'user':_0x227756,'language':_0xce4bb3});}catch(_0xd08199){console[_0x311974(0x110)](_0xd08199);}}),router[a0_0x511d0e(0xd3)](a0_0x511d0e(0x149),auth,async(_0x2195fa,_0x3ff5e9)=>{const _0x4b608b=a0_0x511d0e;try{const {name:_0x4a1889,products:_0x3f76f2}=_0x2195fa[_0x4b608b(0x11a)],_0x368372=new brands({'name':_0x4a1889,'products':_0x3f76f2}),_0xdd2be5=await brands['findOne']({'name':_0x4a1889});_0xdd2be5?_0x2195fa[_0x4b608b(0x159)](_0x4b608b(0x142),_0x4a1889+_0x4b608b(0x124)):_0x2195fa[_0x4b608b(0x159)](_0x4b608b(0xde),_0x4a1889+'\x20brand\x20is\x20add\x20successfully');const _0x438697=await _0x368372[_0x4b608b(0x138)]();_0x3ff5e9[_0x4b608b(0x152)]('/products/brands');}catch(_0x4a213b){console[_0x4b608b(0x110)](_0x4a213b);}}),router[a0_0x511d0e(0x15a)]('/brands/:id',auth,async(_0x41f9f6,_0x2e6ec4)=>{const _0x32eb01=a0_0x511d0e;try{const {username:_0x1f43cd,email:_0xe1e023,role:_0x266f12}=_0x41f9f6[_0x32eb01(0x13e)],_0xdb1e24=_0x41f9f6['user'],_0x34b0ac=await profile[_0x32eb01(0xfe)]({'email':_0xdb1e24[_0x32eb01(0x11f)]}),_0x3e36a9=await master_shop[_0x32eb01(0xec)]();console[_0x32eb01(0x110)](_0x32eb01(0x136),_0x3e36a9);const _0x3f3ca4=_0x41f9f6[_0x32eb01(0xe9)]['id'];console[_0x32eb01(0x110)](_0x3f3ca4);const _0x216997=await brands['findById'](_0x3f3ca4);if(_0x3e36a9[0x0][_0x32eb01(0x13b)]==_0x32eb01(0x11b))var _0x1448fe=users[_0x32eb01(0x14d)];else{if(_0x3e36a9[0x0][_0x32eb01(0x13b)]=='Hindi')var _0x1448fe=users[_0x32eb01(0x145)];else{if(_0x3e36a9[0x0]['language']==_0x32eb01(0x16c))var _0x1448fe=users[_0x32eb01(0x16c)];else{if(_0x3e36a9[0x0][_0x32eb01(0x13b)]==_0x32eb01(0x16b))var _0x1448fe=users[_0x32eb01(0x16b)];else{if(_0x3e36a9[0x0][_0x32eb01(0x13b)]==_0x32eb01(0x17c))var _0x1448fe=users[_0x32eb01(0x17c)];else{if(_0x3e36a9[0x0]['language']==_0x32eb01(0x140))var _0x1448fe=users[_0x32eb01(0xf5)];else{if(_0x3e36a9[0x0][_0x32eb01(0x13b)]==_0x32eb01(0xd2))var _0x1448fe=users[_0x32eb01(0xd2)];else{if(_0x3e36a9[0x0][_0x32eb01(0x13b)]==_0x32eb01(0x173))var _0x1448fe=users[_0x32eb01(0x148)];}}}}}}}_0x2e6ec4['render'](_0x32eb01(0x176),{'success':_0x41f9f6[_0x32eb01(0x159)](_0x32eb01(0xde)),'errors':_0x41f9f6[_0x32eb01(0x159)](_0x32eb01(0x142)),'role':_0xdb1e24,'profile':_0x34b0ac,'master_shop':_0x3e36a9,'user':_0x216997,'language':_0x1448fe});}catch(_0x5ab685){console[_0x32eb01(0x110)](_0x5ab685);}}),router['post'](a0_0x511d0e(0x130),auth,async(_0x1be523,_0x38676e)=>{const _0x578ebf=a0_0x511d0e;try{const _0x209425=_0x1be523['params']['id'],_0x1be469=await brands['findByIdAndUpdate'](_0x209425,_0x1be523['body']);_0x1be523[_0x578ebf(0x159)](_0x578ebf(0xde),_0x578ebf(0x141)),_0x38676e[_0x578ebf(0x152)](_0x578ebf(0x125));}catch(_0x15089f){console[_0x578ebf(0x110)](_0x15089f);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x120),auth,async(_0x11593a,_0x15f9be)=>{const _0xec7654=a0_0x511d0e;try{const _0x2ae162=_0x11593a['params']['id'],_0x337d44=await brands[_0xec7654(0x13a)](_0x2ae162);_0x11593a['flash'](_0xec7654(0xde),'brand\x20data\x20delete\x20successfully'),_0x15f9be[_0xec7654(0x152)](_0xec7654(0x125));}catch(_0x511228){console[_0xec7654(0x110)](_0x511228);}}),router['get']('/units',auth,async(_0x452862,_0x42b652)=>{const _0x5833d3=a0_0x511d0e;try{const {username:_0x3999d0,email:_0x2b29e2,role:_0x54dcc7}=_0x452862[_0x5833d3(0x13e)],_0x34f45a=_0x452862['user'],_0x527cd1=await profile[_0x5833d3(0xfe)]({'email':_0x34f45a[_0x5833d3(0x11f)]}),_0x4445e1=await master_shop['find']();console[_0x5833d3(0x110)]('master',_0x4445e1);const _0x496253=await units[_0x5833d3(0xec)]();if(_0x4445e1[0x0][_0x5833d3(0x13b)]==_0x5833d3(0x11b))var _0x44ff80=users['English'];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]=='Hindi')var _0x44ff80=users[_0x5833d3(0x145)];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]==_0x5833d3(0x16c))var _0x44ff80=users['German'];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]==_0x5833d3(0x16b))var _0x44ff80=users['Spanish'];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]==_0x5833d3(0x17c))var _0x44ff80=users[_0x5833d3(0x17c)];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]==_0x5833d3(0x140))var _0x44ff80=users['Portuguese'];else{if(_0x4445e1[0x0]['language']=='Chinese')var _0x44ff80=users[_0x5833d3(0xd2)];else{if(_0x4445e1[0x0][_0x5833d3(0x13b)]=='Arabic\x20(ae)')var _0x44ff80=users[_0x5833d3(0x148)];}}}}}}}_0x42b652[_0x5833d3(0x132)]('units',{'success':_0x452862[_0x5833d3(0x159)](_0x5833d3(0xde)),'errors':_0x452862[_0x5833d3(0x159)]('errors'),'role':_0x34f45a,'profile':_0x527cd1,'master_shop':_0x4445e1,'user':_0x496253,'language':_0x44ff80});}catch(_0xf170ed){console[_0x5833d3(0x110)](_0xf170ed);}}),router['post'](a0_0x511d0e(0xf0),auth,async(_0x10225c,_0x130562)=>{const _0x3d17d9=a0_0x511d0e;try{const {name:_0x430469,secondary_unit:_0x845aaf,products:_0x3fffcb}=_0x10225c[_0x3d17d9(0x11a)],_0x4577c5=new units({'name':_0x430469,'secondary_unit':_0x845aaf,'products':_0x3fffcb}),_0xd7c19b=await units[_0x3d17d9(0xfe)]({'name':_0x430469});_0xd7c19b?_0x10225c[_0x3d17d9(0x159)](_0x3d17d9(0x142),_0x430469+_0x3d17d9(0xce)):_0x10225c[_0x3d17d9(0x159)]('success',_0x430469+_0x3d17d9(0x14e));const _0x1d2412=await _0x4577c5[_0x3d17d9(0x138)]();_0x130562[_0x3d17d9(0x152)](_0x3d17d9(0x16e));}catch(_0x380814){console[_0x3d17d9(0x110)](_0x380814);}}),router['get']('/units/:id',auth,async(_0x8d9e1c,_0x30c157)=>{const _0x3523ff=a0_0x511d0e;try{const {username:_0x5d709f,email:_0x3ab9dc,role:_0x3f7beb}=_0x8d9e1c[_0x3523ff(0x13e)],_0x1ca23d=_0x8d9e1c[_0x3523ff(0x13e)],_0x5f394c=await profile[_0x3523ff(0xfe)]({'email':_0x1ca23d[_0x3523ff(0x11f)]}),_0x100da4=await master_shop[_0x3523ff(0xec)]();console[_0x3523ff(0x110)](_0x3523ff(0x136),_0x100da4);const _0x1cabc2=_0x8d9e1c[_0x3523ff(0xe9)]['id'],_0x41b808=await units[_0x3523ff(0xf3)](_0x1cabc2);if(_0x100da4[0x0][_0x3523ff(0x13b)]=='English\x20(US)')var _0x5ab0eb=users[_0x3523ff(0x14d)];else{if(_0x100da4[0x0]['language']==_0x3523ff(0x145))var _0x5ab0eb=users[_0x3523ff(0x145)];else{if(_0x100da4[0x0][_0x3523ff(0x13b)]=='German')var _0x5ab0eb=users['German'];else{if(_0x100da4[0x0][_0x3523ff(0x13b)]==_0x3523ff(0x16b))var _0x5ab0eb=users[_0x3523ff(0x16b)];else{if(_0x100da4[0x0][_0x3523ff(0x13b)]=='French')var _0x5ab0eb=users['French'];else{if(_0x100da4[0x0]['language']==_0x3523ff(0x140))var _0x5ab0eb=users[_0x3523ff(0xf5)];else{if(_0x100da4[0x0][_0x3523ff(0x13b)]=='Chinese')var _0x5ab0eb=users[_0x3523ff(0xd2)];else{if(_0x100da4[0x0]['language']==_0x3523ff(0x173))var _0x5ab0eb=users[_0x3523ff(0x148)];}}}}}}}_0x30c157[_0x3523ff(0x132)]('units',{'success':_0x8d9e1c['flash']('success'),'errors':_0x8d9e1c[_0x3523ff(0x159)]('errors'),'role':_0x1ca23d,'profile':_0x5f394c,'master_shop':_0x100da4,'user':_0x41b808,'language':_0x5ab0eb});}catch(_0x57d250){console[_0x3523ff(0x110)](_0x57d250);}}),router[a0_0x511d0e(0xd3)](a0_0x511d0e(0x10e),auth,async(_0xdb7c85,_0x364e8e)=>{const _0x9165ab=a0_0x511d0e;try{const _0x660525=_0xdb7c85[_0x9165ab(0xe9)]['id'],_0x4d055f=await units[_0x9165ab(0xea)](_0x660525,_0xdb7c85[_0x9165ab(0x11a)]);_0xdb7c85[_0x9165ab(0x159)]('success','unit\x20data\x20update\x20successfully'),_0x364e8e[_0x9165ab(0x152)](_0x9165ab(0x16e));}catch(_0x3c7484){console[_0x9165ab(0x110)](_0x3c7484);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x105),auth,async(_0x43ef50,_0x5bec3e)=>{const _0x548bc4=a0_0x511d0e;try{const _0x224c60=_0x43ef50['params']['id'],_0x4baf89=await units[_0x548bc4(0x13a)](_0x224c60);_0x43ef50[_0x548bc4(0x159)]('success',_0x548bc4(0x118)),_0x5bec3e[_0x548bc4(0x152)](_0x548bc4(0x16e));}catch(_0x56afd){console['log'](_0x56afd);}});const storage=multer[a0_0x511d0e(0x167)]({'destination':(_0x3505a3,_0x3ec31b,_0x207554)=>{const _0xd0c0eb=a0_0x511d0e;_0x207554(null,_0xd0c0eb(0x15b));},'filename':(_0x7bf8c1,_0x55e71d,_0x1de2c8)=>{const _0x4dcd98=a0_0x511d0e;_0x1de2c8(null,Date[_0x4dcd98(0x14b)]()+_0x55e71d[_0x4dcd98(0x166)]);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0x2aaff5,_0x5afdda)=>{const _0x1049a8=a0_0x511d0e;try{const {username:_0x5c1b8b,email:_0x5b6a56,role:_0x1b6598}=_0x2aaff5[_0x1049a8(0x13e)],_0x46d92d=_0x2aaff5[_0x1049a8(0x13e)],_0x5c2d03=await profile[_0x1049a8(0xfe)]({'email':_0x46d92d[_0x1049a8(0x11f)]}),_0x8fbc7b={'year':_0x1049a8(0x164),'month':_0x1049a8(0x172),'day':_0x1049a8(0x164)},_0x1f454b=await master_shop[_0x1049a8(0xec)]();console['log']('Products\x20master',_0x1f454b);const _0x5b1735=await product[_0x1049a8(0xec)]();console[_0x1049a8(0x110)](_0x1049a8(0x123),_0x5b1735);const _0x4bc79e=await warehouse['aggregate']([{'$unwind':_0x1049a8(0xf9)},{'$lookup':{'from':_0x1049a8(0x139),'localField':_0x1049a8(0xc7),'foreignField':_0x1049a8(0x109),'as':_0x1049a8(0x13d)}},{'$unwind':_0x1049a8(0x10b)},{'$project':{'product_name':_0x1049a8(0xca),'product_stock':_0x1049a8(0xe6)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x1049a8(0x17e)}}}]);console[_0x1049a8(0x110)](_0x1049a8(0x11e),_0x4bc79e),_0x4bc79e['forEach'](_0x203a60=>{const _0x5ba225=_0x1049a8,_0x28038f=_0x5b1735[_0x5ba225(0x121)](_0x124edc=>{const _0x8bdb29=_0x5ba225;_0x124edc[_0x8bdb29(0x109)]==_0x203a60['_id']&&(_0x124edc[_0x8bdb29(0x158)]=parseInt(_0x124edc[_0x8bdb29(0x158)])+parseInt(_0x203a60[_0x8bdb29(0x150)]));});}),console[_0x1049a8(0x110)](_0x1049a8(0x123),_0x5b1735);if(_0x1f454b[0x0][_0x1049a8(0x13b)]==_0x1049a8(0x11b))var _0x4a4b5e=users[_0x1049a8(0x14d)];else{if(_0x1f454b[0x0][_0x1049a8(0x13b)]==_0x1049a8(0x145))var _0x4a4b5e=users[_0x1049a8(0x145)];else{if(_0x1f454b[0x0][_0x1049a8(0x13b)]=='German')var _0x4a4b5e=users['German'];else{if(_0x1f454b[0x0]['language']==_0x1049a8(0x16b))var _0x4a4b5e=users[_0x1049a8(0x16b)];else{if(_0x1f454b[0x0][_0x1049a8(0x13b)]==_0x1049a8(0x17c))var _0x4a4b5e=users['French'];else{if(_0x1f454b[0x0]['language']==_0x1049a8(0x140))var _0x4a4b5e=users[_0x1049a8(0xf5)];else{if(_0x1f454b[0x0][_0x1049a8(0x13b)]==_0x1049a8(0xd2))var _0x4a4b5e=users[_0x1049a8(0xd2)];else{if(_0x1f454b[0x0]['language']==_0x1049a8(0x173))var _0x4a4b5e=users[_0x1049a8(0x148)];}}}}}}}_0x5afdda[_0x1049a8(0x132)](_0x1049a8(0x139),{'success':_0x2aaff5[_0x1049a8(0x159)](_0x1049a8(0xde)),'errors':_0x2aaff5['flash'](_0x1049a8(0x142)),'alldata':_0x5b1735,'profile':_0x5c2d03,'master_shop':_0x1f454b,'role':_0x46d92d,'product_stock':_0x4bc79e,'language':_0x4a4b5e});}catch(_0x73654a){console['log'](_0x73654a);}}),router['get'](a0_0x511d0e(0x15c),auth,async(_0x3c8c1b,_0x122066)=>{const _0x38fd2=a0_0x511d0e;try{const {username:_0x24cb43,email:_0x28de09,role:_0x1ee0c8}=_0x3c8c1b[_0x38fd2(0x13e)],_0x42c76e=_0x3c8c1b[_0x38fd2(0x13e)],_0xfa8c60=await profile[_0x38fd2(0xfe)]({'email':_0x42c76e[_0x38fd2(0x11f)]}),_0x88d830=await master_shop[_0x38fd2(0xec)]();console[_0x38fd2(0x110)]('master',_0x88d830);const _0xc89f0=await categories['find']({}),_0x2f70b1=await brands[_0x38fd2(0xec)]({}),_0x505ad9=await units[_0x38fd2(0xec)]({}),_0x8a06f3=await warehouse['find']({'status':_0x38fd2(0xd6)});if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x11b))var _0x7e6024=users[_0x38fd2(0x14d)];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x145))var _0x7e6024=users[_0x38fd2(0x145)];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x16c))var _0x7e6024=users[_0x38fd2(0x16c)];else{if(_0x88d830[0x0]['language']==_0x38fd2(0x16b))var _0x7e6024=users['Spanish'];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x17c))var _0x7e6024=users[_0x38fd2(0x17c)];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x140))var _0x7e6024=users[_0x38fd2(0xf5)];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0xd2))var _0x7e6024=users[_0x38fd2(0xd2)];else{if(_0x88d830[0x0][_0x38fd2(0x13b)]==_0x38fd2(0x173))var _0x7e6024=users[_0x38fd2(0x148)];}}}}}}}_0x122066[_0x38fd2(0x132)](_0x38fd2(0xd8),{'success':_0x3c8c1b['flash']('success'),'errors':_0x3c8c1b['flash'](_0x38fd2(0x142)),'role':_0x42c76e,'profile':_0xfa8c60,'categories':_0xc89f0,'brands':_0x2f70b1,'master_shop':_0x88d830,'units':_0x505ad9,'language':_0x7e6024,'find_data':_0x8a06f3});}catch(_0x22ee4b){console[_0x38fd2(0x110)](_0x22ee4b);}}),router[a0_0x511d0e(0xd3)]('/view/add_products',auth,upload[a0_0x511d0e(0x182)](a0_0x511d0e(0xf4)),async(_0x579c3f,_0x5a19e6)=>{const _0x3fdaaf=a0_0x511d0e;try{const {name:_0x341958,category:_0x578bee,brand:_0x411b86,unit:_0x451640,alertquantity:_0x3644eb,stock:_0x5c5fba,product_code:_0x5c3980,warehouse:_0x36e4b6,primary_ItemCode:_0x228e65,second_ItemCode:_0x35e0ec,second_unit:_0x31b5a7,maxPerUnit:_0x21df3e,MaxPerProduct:_0x5d5a7c}=_0x579c3f[_0x3fdaaf(0x11a)],_0x2e5be4=_0x579c3f[_0x3fdaaf(0xf1)]?.['filename']||'defaultProduct.avif',_0x334562=new product({'image':_0x2e5be4,'name':_0x341958,'category':_0x578bee,'brand':_0x411b86,'unit':_0x451640,'alertquantity':_0x3644eb,'stock':_0x5c5fba,'product_code':_0x5c3980,'warehouse':_0x36e4b6,'primary_code':_0x228e65,'secondary_code':_0x35e0ec,'second_unit':_0x31b5a7,'maxStocks':_0x5d5a7c,'maxProdPerUnit':_0x21df3e}),_0x342938=await _0x334562['save'](),_0xdbc10f=await categories[_0x3fdaaf(0xfe)]({'name':_0x578bee});_0xdbc10f[_0x3fdaaf(0x139)]=parseInt(_0xdbc10f[_0x3fdaaf(0x139)])+0x1,await _0xdbc10f['save']();const _0x2f58d4=await brands[_0x3fdaaf(0xfe)]({'name':_0x411b86});_0x2f58d4[_0x3fdaaf(0x139)]=parseInt(_0x2f58d4['products'])+0x1,await _0x2f58d4['save']();const _0x2a3beb=await units['findOne']({'name':_0x451640});_0x2a3beb[_0x3fdaaf(0x139)]=parseInt(_0x2a3beb['products'])+0x1,await _0x2a3beb['save'](),_0x579c3f['flash'](_0x3fdaaf(0xde),_0x3fdaaf(0x179)),_0x5a19e6['redirect'](_0x3fdaaf(0x13c));}catch(_0xd22bea){console['log'](_0xd22bea);}}),router['get'](a0_0x511d0e(0x12b),auth,async(_0x194f95,_0x1dc96f)=>{const _0x2f3339=a0_0x511d0e;try{const {username:_0x4452fc,email:_0x26ddbb,role:_0x505288}=_0x194f95[_0x2f3339(0x13e)],_0x1c2da8=_0x194f95['user'],_0x5eefa4=await profile[_0x2f3339(0xfe)]({'email':_0x1c2da8[_0x2f3339(0x11f)]}),_0x12865c=await master_shop[_0x2f3339(0xec)]();console[_0x2f3339(0x110)](_0x2f3339(0xfc),_0x12865c);const _0xeabc84=_0x194f95[_0x2f3339(0xe9)]['id'],_0x1efc54=await product[_0x2f3339(0xf3)](_0xeabc84),_0x2fa76e=await categories[_0x2f3339(0xec)]({}),_0x1e3a86=await brands[_0x2f3339(0xec)]({}),_0x3a39a7=await units[_0x2f3339(0xec)]({}),_0x4fb9d6=await warehouse[_0x2f3339(0xec)]({'status':_0x2f3339(0xd6)}),_0x106288=await units['aggregate']([{'$group':{'_id':_0x2f3339(0x156),'secondaryunit':{'$first':_0x2f3339(0x128)}}}]);if(_0x12865c[0x0][_0x2f3339(0x13b)]==_0x2f3339(0x11b))var _0x3995eb=users[_0x2f3339(0x14d)];else{if(_0x12865c[0x0][_0x2f3339(0x13b)]==_0x2f3339(0x145))var _0x3995eb=users[_0x2f3339(0x145)];else{if(_0x12865c[0x0]['language']=='German')var _0x3995eb=users[_0x2f3339(0x16c)];else{if(_0x12865c[0x0][_0x2f3339(0x13b)]==_0x2f3339(0x16b))var _0x3995eb=users[_0x2f3339(0x16b)];else{if(_0x12865c[0x0][_0x2f3339(0x13b)]=='French')var _0x3995eb=users[_0x2f3339(0x17c)];else{if(_0x12865c[0x0]['language']=='Portuguese\x20(BR)')var _0x3995eb=users[_0x2f3339(0xf5)];else{if(_0x12865c[0x0][_0x2f3339(0x13b)]=='Chinese')var _0x3995eb=users[_0x2f3339(0xd2)];else{if(_0x12865c[0x0][_0x2f3339(0x13b)]==_0x2f3339(0x173))var _0x3995eb=users[_0x2f3339(0x148)];}}}}}}}_0x1dc96f[_0x2f3339(0x132)](_0x2f3339(0x165),{'success':_0x194f95['flash'](_0x2f3339(0xde)),'errors':_0x194f95[_0x2f3339(0x159)]('errors'),'role':_0x1c2da8,'profile':_0x5eefa4,'alldata':_0x1efc54,'categories':_0x2fa76e,'brands':_0x1e3a86,'master_shop':_0x12865c,'units':_0x3a39a7,'secondunit':_0x106288,'find_data':_0x4fb9d6,'language':_0x3995eb});}catch(_0x2536af){console[_0x2f3339(0x110)](_0x2536af);}}),router['post'](a0_0x511d0e(0x12b),auth,upload[a0_0x511d0e(0x182)](a0_0x511d0e(0xf4)),async(_0x5ceeb1,_0xa476b5)=>{const _0x43adc4=a0_0x511d0e;try{console[_0x43adc4(0x110)](_0x43adc4(0x178));const _0x3d8979=_0x5ceeb1[_0x43adc4(0xe9)]['id'],_0x41e03c=await product[_0x43adc4(0xf3)](_0x3d8979),{image:_0x54eb90,name:_0x49780e,category:_0x1e16bf,brand:_0x20925b,sku:_0x475787,unit:_0x242195,alertquantity:_0x435f25,product_code:_0x24b760,warehouse:_0x15c170,primary_ItemCode:_0x51a64f,second_ItemCode:_0x4fe986,second_unit:_0x27b0f1,maxPerUnit:_0x228d2e,MaxPerProduct:_0x3ca760,prod_catdata:_0x322a92}=_0x5ceeb1[_0x43adc4(0x11a)];_0x5ceeb1['file']&&(_0x41e03c[_0x43adc4(0xf4)]=_0x5ceeb1['file'][_0x43adc4(0x14c)]);_0x41e03c['name']=_0x49780e,_0x41e03c[_0x43adc4(0x144)]=_0x1e16bf,_0x41e03c[_0x43adc4(0xda)]=_0x20925b,_0x41e03c[_0x43adc4(0xe1)]=_0x475787,_0x41e03c['unit']=_0x242195,_0x41e03c[_0x43adc4(0x101)]=_0x435f25,_0x41e03c['product_code']=_0x24b760,_0x41e03c[_0x43adc4(0xe8)]=_0x15c170,_0x41e03c[_0x43adc4(0x134)]=_0x51a64f,_0x41e03c[_0x43adc4(0xc9)]=_0x4fe986,_0x41e03c[_0x43adc4(0x15d)]=_0x27b0f1,_0x41e03c['maxStocks']=_0x3ca760,_0x41e03c['maxProdPerUnit']=_0x228d2e,_0x41e03c[_0x43adc4(0x10f)]=_0x322a92;const _0x153ad4=await _0x41e03c['save']();console[_0x43adc4(0x110)](_0x43adc4(0x113),_0x41e03c),_0x5ceeb1['flash'](_0x43adc4(0xde),'product\x20update\x20successfully'),_0xa476b5['redirect'](_0x43adc4(0x13c));}catch(_0x151b2d){console[_0x43adc4(0x110)](_0x151b2d);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x13f),auth,async(_0x4458f2,_0xbfbe6d)=>{const _0x4735b4=a0_0x511d0e;try{const {username:_0x4dce85,email:_0x6c6828,role:_0x4beb7f}=_0x4458f2[_0x4735b4(0x13e)],_0x10f06a=_0x4458f2[_0x4735b4(0x13e)],_0x5713ca=await profile[_0x4735b4(0xfe)]({'email':_0x10f06a[_0x4735b4(0x11f)]}),_0x344996=await master_shop[_0x4735b4(0xec)]();console[_0x4735b4(0x110)](_0x4735b4(0x163),_0x344996);const _0x5e2d6b=_0x4458f2[_0x4735b4(0xe9)]['id'],_0x3469d4=await product[_0x4735b4(0xf3)](_0x5e2d6b);console[_0x4735b4(0x110)]('barcode\x20user_id',_0x3469d4);if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x11b))var _0x383dce=users[_0x4735b4(0x14d)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x145))var _0x383dce=users['Hindi'];else{if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x16c))var _0x383dce=users[_0x4735b4(0x16c)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x16b))var _0x383dce=users[_0x4735b4(0x16b)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]=='French')var _0x383dce=users[_0x4735b4(0x17c)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x140))var _0x383dce=users[_0x4735b4(0xf5)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]=='Chinese')var _0x383dce=users[_0x4735b4(0xd2)];else{if(_0x344996[0x0][_0x4735b4(0x13b)]==_0x4735b4(0x173))var _0x383dce=users[_0x4735b4(0x148)];}}}}}}}_0xbfbe6d['render']('product_barcode',{'success':_0x4458f2[_0x4735b4(0x159)](_0x4735b4(0xde)),'errors':_0x4458f2[_0x4735b4(0x159)](_0x4735b4(0x142)),'role':_0x10f06a,'profile':_0x5713ca,'alldata':_0x3469d4,'master_shop':_0x344996,'language':_0x383dce});}catch(_0x16f26b){console[_0x4735b4(0x110)](_0x16f26b);}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0x180),auth,async(_0x5cf315,_0x2ffd51)=>{const _0x14fa58=a0_0x511d0e;try{const _0xd6a3d5=new excelJS[(_0x14fa58(0xdf))](),_0x4fa7f9=_0xd6a3d5[_0x14fa58(0x115)](_0x14fa58(0x143));return _0x4fa7f9[_0x14fa58(0x162)]=[{'header':_0x14fa58(0x14a),'key':_0x14fa58(0x169),'width':0xa},{'header':_0x14fa58(0x146),'key':'PBrands','width':0xa},{'header':'Units','key':_0x14fa58(0x181),'width':0xa},{'header':'Secondary_Units','key':_0x14fa58(0x17f),'width':0xa},{'header':_0x14fa58(0xc6),'key':_0x14fa58(0x131),'width':0xa},{'header':_0x14fa58(0x17a),'key':_0x14fa58(0x10a),'width':0xa},{'header':_0x14fa58(0x16d),'key':_0x14fa58(0x10a),'width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0x14fa58(0x161),'key':_0x14fa58(0x114),'width':0xa},{'header':_0x14fa58(0x155),'key':_0x14fa58(0x147),'width':0xa},{'header':_0x14fa58(0x168),'key':'PAlQty','width':0xa},{'header':_0x14fa58(0xd4),'key':'Prod_Cat','width':0xa}],_0x2ffd51['setHeader']('Content-Type',_0x14fa58(0x111)),_0x2ffd51[_0x14fa58(0x16f)]('Content-Disposition',_0x14fa58(0xcb)),_0xd6a3d5['xlsx'][_0x14fa58(0x104)](_0x2ffd51)['then'](()=>{const _0x3aa619=_0x14fa58;_0x2ffd51[_0x3aa619(0xe2)](0xc8);});}catch(_0x302d0d){_0x2ffd51[_0x14fa58(0xe2)](0x190)[_0x14fa58(0xfa)](_0x302d0d);}});const storage1=multer[a0_0x511d0e(0x167)]({'destination':(_0x3fb728,_0x403ab5,_0x5bb3f9)=>{const _0x38608b=a0_0x511d0e;_0x5bb3f9(null,_0x38608b(0x107));},'filename':(_0x3f32bd,_0x20219e,_0x16cd84)=>{const _0x4e4ef8=a0_0x511d0e;_0x16cd84(null,Date[_0x4e4ef8(0x14b)]()+_0x20219e[_0x4e4ef8(0x166)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x36ef(){const _0x3201c3=['181128SHBeyp','product_stock','$product_category','redirect','440590QYYbJX','../public/language/languages.json','Alert_QTY','$_id','11971780DucsiS','stock','flash','get','public/upload','/view/add_products','secondary_unit','sheet_to_json','/products_import_migrate_file','toString','Category','columns','barcode\x20Product\x20master','numeric','edit_product','originalname','diskStorage','Maximum_Stocks','PName','186SqXmkj','Spanish','German','Secondary_Code','/products/units','setHeader','/categories/delete/:id','product_code','long','Arabic\x20(ae)','utils','\x20added\x20successfully','brands','143GPvAdI','hello','product\x20add\x20successfully','Primary_Code','$brand','French','prod_categ','$product_stock','PSecondaryUnits','/products_export_migrate_file','PUnits','single','\x20categories\x20is\x20add\x20successfully','max_number_per_units','product_details.product_name','/print_barcode','secondary_code','$product_details.product_name','attachment;\x20filename=Product_Migration_File.xlsx','/filter_product','Secondary_Units','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','$category','1590RuxbaW','/print_barcode_filter_search/','Chinese','post','Products_category','258BQyIJX','Enabled','/barcode_data','add_product','Units','brand','exports','pdfkit-table','/categories','success','Workbook','data','sku','status','jsbarcode','1330600kvIPnE','categories_edit','$product_details.product_stock','2140VAvKrz','warehouse','params','findByIdAndUpdate','SheetNames','find','/products/categories','Product_Code','min','/units','file','54FxINlN','findById','image','Portuguese','width','readFile','json','$product_details','send','toBuffer','edit\x20Product\x20master','express/lib/response','findOne','../models/all_models','21xBHOGv','alertquantity','concat','canvas','write','/units/delete/:id','maxStocks','public/Migration','Finished\x20Goods','name','ProductCode','$product_docs','categ','Raw\x20Materials','/units/:id','product_category','log','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','length','product\x20edit','PCat','addWorksheet','end','CODE128','unit\x20data\x20delete\x20successfully','aggregate','body','English\x20(US)','express','migrate_product_fule','Products\x20warehouse_data','email','/brands/delete/:id','map','message','Products\x20find_data','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/brands','base64','categories\x20data\x20delete\x20successfully','$secondary_unit','addPage','height','/view/:id','multer','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20<>\x20','/print_barcode_single/:id','/brands/:id','MaxperUnits','render','categories','primary_code','bind','master','12343995MADoMP','save','products','findByIdAndDelete','language','/products/view','product_docs','user','/barcode/:id','Portuguese\x20(BR)','brand\x20data\x20update\x20successfully','errors','Products','category','Hindi','Brands','PAlQty','Arabic','/brands','Product_Name','now','filename','English','\x20unit\x20is\x20add\x20successfully'];a0_0x36ef=function(){return _0x3201c3;};return a0_0x36ef();}router[a0_0x511d0e(0xd3)](a0_0x511d0e(0x15f),auth,uploadMigrate[a0_0x511d0e(0x182)](a0_0x511d0e(0x11d)),async(_0x5165c5,_0x531457)=>{const _0xea81f4=a0_0x511d0e,_0x5e8e99=_0x5165c5[_0xea81f4(0xf1)][_0xea81f4(0x14c)],_0xaf449a=await xlsx[_0xea81f4(0xf7)]('public/Migration/'+_0x5e8e99);let _0x332962=_0xaf449a[_0xea81f4(0xeb)],_0x495e33=xlsx[_0xea81f4(0x174)][_0xea81f4(0x15e)](_0xaf449a['Sheets'][_0x332962[0x0]]);for(const _0x52625c of _0x495e33){const _0x3c79db=_0x52625c[_0xea81f4(0x14a)],_0x5470de=_0x52625c[_0xea81f4(0x146)],_0x3f04f1=_0x52625c[_0xea81f4(0xd9)],_0x165eb5=_0x52625c[_0xea81f4(0xcd)],_0x1a81b9=_0x52625c[_0xea81f4(0xee)],_0x2dea73=_0x52625c[_0xea81f4(0x161)],_0x16bcad=_0x52625c['Alert_QTY'],_0x55af44=_0x52625c[_0xea81f4(0x17a)],_0x28bc22=_0x52625c[_0xea81f4(0x16d)],_0x2fc55e=_0x52625c[_0xea81f4(0x168)],_0x5768d7=_0x52625c[_0xea81f4(0xc6)],_0x490050=_0x52625c[_0xea81f4(0xd4)];try{let _0x34f607=await categories[_0xea81f4(0xfe)]({'name':_0x2dea73});if(!_0x34f607){const _0xf49c18=new categories({'name':_0x2dea73,'products':'0'});_0x34f607=await _0xf49c18[_0xea81f4(0x138)]();}let _0x3253be=await brands[_0xea81f4(0xfe)]({'name':_0x5470de});if(!_0x3253be){const _0x11d691=new brands({'name':_0x5470de,'products':'0'});_0x3253be=await _0x11d691['save']();}let _0x429e1e=await units[_0xea81f4(0xfe)]({'name':_0x3f04f1,'secondary_unit':_0x165eb5});if(!_0x429e1e){const _0xd0a75e=new units({'name':_0x3f04f1,'secondary_unit':_0x165eb5,'products':'0'});_0x429e1e=await _0xd0a75e[_0xea81f4(0x138)]();}const _0x40fd9f=await product[_0xea81f4(0xec)]({'name':_0x3c79db,'category':_0x34f607[_0xea81f4(0x109)],'brand':_0x3253be[_0xea81f4(0x109)],'secondary_unit':_0x429e1e[_0xea81f4(0x15d)],'product_code':_0x1a81b9});console['log'](_0x40fd9f[_0xea81f4(0x112)]+'\x20<>\x20'+_0x34f607[_0xea81f4(0x109)]+_0xea81f4(0x12e)+_0x3253be['name']+'\x20<>\x20'+_0x429e1e[_0xea81f4(0x15d)]+_0xea81f4(0x12e)+_0x1a81b9+_0xea81f4(0x12e)+_0x3c79db);if(_0x40fd9f[_0xea81f4(0x112)]===0x0){const _0x3c1945=new product({'image':'defaultProduct.avif','name':_0x3c79db,'category':_0x34f607[_0xea81f4(0x109)],'brand':_0x3253be['name'],'unit':_0x429e1e[_0xea81f4(0x109)],'alertquantity':_0x16bcad,'product_code':_0x1a81b9,'secondary_unit':_0x429e1e[_0xea81f4(0x15d)],'primary_code':_0x55af44,'secondary_code':_0x28bc22,'maxStocks':_0x2fc55e,'maxProdPerUnit':_0x5768d7,'product_category':_0x490050}),_0x314603=await _0x3c1945[_0xea81f4(0x138)]();_0x34f607[_0xea81f4(0x139)]=parseInt(_0x34f607[_0xea81f4(0x139)])+0x1,await _0x34f607[_0xea81f4(0x138)](),_0x3253be[_0xea81f4(0x139)]=parseInt(_0x3253be['products'])+0x1,await _0x3253be['save'](),_0x429e1e[_0xea81f4(0x139)]=parseInt(_0x429e1e[_0xea81f4(0x139)])+0x1,await _0x429e1e[_0xea81f4(0x138)](),_0x5165c5[_0xea81f4(0x159)](_0xea81f4(0xde),_0x3c79db+_0xea81f4(0x175));}else{console[_0xea81f4(0x110)](_0x40fd9f[0x0]);const _0x436242=_0x40fd9f[0x0];_0x436242[_0xea81f4(0x144)]=_0x34f607[_0xea81f4(0x109)],_0x436242[_0xea81f4(0xda)]=_0x3253be['name'],_0x436242['unit']=_0x429e1e[_0xea81f4(0x109)],_0x436242['alertquantity']=_0x16bcad,_0x436242['product_code']=_0x1a81b9,_0x436242[_0xea81f4(0x15d)]=_0x429e1e['secondary_unit'],_0x436242['primary_code']=_0x55af44,_0x436242[_0xea81f4(0xc9)]=_0x28bc22,_0x436242[_0xea81f4(0x106)]=_0x2fc55e,_0x436242['maxProdPerUnit']=_0x5768d7,_0x436242['product_category']=_0x490050;const _0x3c0a83=await _0x436242[_0xea81f4(0x138)]();_0x5165c5[_0xea81f4(0x159)]('success',_0x3c0a83[_0xea81f4(0x109)]+'\x20Edit\x20Successfully');}}catch(_0x5abfd3){_0x531457[_0xea81f4(0xe2)](0x1f4)[_0xea81f4(0xf8)]({'proderror':_0x5abfd3[_0xea81f4(0x122)],'aproduct':_0x3c79db});}}_0x531457[_0xea81f4(0x152)](_0xea81f4(0x13c));}),router[a0_0x511d0e(0xd3)]('/select_data',auth,async(_0x23785a,_0x493c1f)=>{const _0x270460=a0_0x511d0e;try{console[_0x270460(0x110)](_0x23785a[_0x270460(0x11a)]);const {data_cateory:_0x4c7728,datachoose:_0x71b92f}=_0x23785a[_0x270460(0x11a)];var _0xd3679a;if(_0x71b92f==_0x270460(0x17d))_0xd3679a=await product['aggregate']([{'$group':{'_id':_0x270460(0x151)}}]);else{if(_0x71b92f==_0x270460(0x176))_0xd3679a=await product[_0x270460(0x119)]([{'$match':{'product_category':_0x4c7728}},{'$group':{'_id':_0x270460(0x17b)}}]);else _0x71b92f==_0x270460(0x10c)&&(_0xd3679a=await product[_0x270460(0x119)]([{'$match':{'product_category':_0x4c7728}},{'$group':{'_id':'$category'}}]));}_0x493c1f[_0x270460(0xf8)](_0xd3679a);}catch(_0x1123c0){_0x493c1f[_0x270460(0xf8)]({'message':_0x1123c0['message']});}}),router[a0_0x511d0e(0xd3)](a0_0x511d0e(0xcc),auth,async(_0x4e7d07,_0x43e584)=>{const _0x7d30bf=a0_0x511d0e;try{const {data_choosing:_0x6d5bc1,data_selected:_0x2f0d11}=_0x4e7d07[_0x7d30bf(0x11a)];var _0x109fdf;if(_0x6d5bc1==_0x7d30bf(0x17d))_0x109fdf=await product[_0x7d30bf(0x119)]([{'$match':{'product_category':_0x2f0d11}}]);else{if(_0x6d5bc1==_0x7d30bf(0x176))_0x109fdf=await product[_0x7d30bf(0x119)]([{'$match':{'brand':_0x2f0d11}}]);else _0x6d5bc1=='categ'&&(_0x109fdf=await product['aggregate']([{'$match':{'category':_0x2f0d11}}]));}_0x43e584[_0x7d30bf(0xf8)](_0x109fdf);}catch(_0x2daa08){_0x43e584[_0x7d30bf(0xf8)]({'message':_0x2daa08[_0x7d30bf(0x122)]});}}),router[a0_0x511d0e(0x15a)](a0_0x511d0e(0xc8),auth,async(_0x108e10,_0x5595d7)=>{const _0xe262b9=a0_0x511d0e,_0x168793=_0x108e10[_0xe262b9(0x13e)],_0x352cfd=await profile[_0xe262b9(0xfe)]({'email':_0x168793['email']}),_0x5ad5a8=await master_shop[_0xe262b9(0xec)](),_0x5ac47e=await product['find']();if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0x11b))var _0x2da7ff=users['English'];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0x145))var _0x2da7ff=users[_0xe262b9(0x145)];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0x16c))var _0x2da7ff=users['German'];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0x16b))var _0x2da7ff=users['Spanish'];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0x17c))var _0x2da7ff=users[_0xe262b9(0x17c)];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]=='Portuguese\x20(BR)')var _0x2da7ff=users['Portuguese'];else{if(_0x5ad5a8[0x0][_0xe262b9(0x13b)]==_0xe262b9(0xd2))var _0x2da7ff=users['Chinese'];else{if(_0x5ad5a8[0x0]['language']==_0xe262b9(0x173))var _0x2da7ff=users[_0xe262b9(0x148)];}}}}}}}_0x5595d7['render']('product_barcode_products',{'success':_0x108e10['flash'](_0xe262b9(0xde)),'errors':_0x108e10[_0xe262b9(0x159)]('errors'),'role':_0x168793,'profile':_0x352cfd,'products':_0x5ac47e,'master_shop':_0x5ad5a8,'language':_0x2da7ff});}),router['post'](a0_0x511d0e(0xd7),auth,async(_0x5a2e7e,_0x54d2d3)=>{const _0x12bfa1=a0_0x511d0e,_0x3ce22b=await product[_0x12bfa1(0xec)]();_0x54d2d3[_0x12bfa1(0xf8)]({'data':_0x3ce22b});}),router['post']('/barcode_filter',auth,async(_0x5c3c09,_0x5ec6e6)=>{const _0x3b0ae7=a0_0x511d0e;try{const {dataProdCat:_0x3e22c0,dataProdIdentity:_0x17f331}=_0x5c3c09[_0x3b0ae7(0x11a)];var _0x303902;switch(_0x3e22c0){case'fg':switch(_0x17f331){case _0x3b0ae7(0x146):_0x303902=await product[_0x3b0ae7(0x119)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x3b0ae7(0x17b)}},{'$project':{'brand':_0x3b0ae7(0x156)}}]);break;case _0x3b0ae7(0x161):_0x303902=await product['aggregate']([{'$match':{'product_category':_0x3b0ae7(0x108)}},{'$group':{'_id':_0x3b0ae7(0xcf)}},{'$project':{'category':_0x3b0ae7(0x156)}}]);break;}break;case'rm':switch(_0x17f331){case'Brands':_0x303902=await product[_0x3b0ae7(0x119)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x3b0ae7(0x156)}}]);break;case _0x3b0ae7(0x161):_0x303902=await product[_0x3b0ae7(0x119)]([{'$match':{'product_category':_0x3b0ae7(0x10d)}},{'$group':{'_id':_0x3b0ae7(0xcf)}},{'$project':{'category':_0x3b0ae7(0x156)}}]);break;}break;}_0x5ec6e6[_0x3b0ae7(0xf8)](_0x303902);}catch(_0x587943){_0x5ec6e6['json']({'message':_0x587943[_0x3b0ae7(0x122)]});}}),router[a0_0x511d0e(0xd3)]('/print_barcode_filter/',auth,async(_0x29b4ef,_0x2edd1b)=>{const _0x2f6e37=a0_0x511d0e;try{console[_0x2f6e37(0x110)](_0x29b4ef['body']);const {prod_cat:_0x3cb6c1,identity:_0x2a63b9,valueData:_0x41f374,typeofbarcode:_0x4e54e1}=_0x29b4ef['body'];let _0x1436d4;switch(_0x3cb6c1){case'fg':if(_0x2a63b9==_0x2f6e37(0x146))_0x1436d4=await product[_0x2f6e37(0x119)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x41f374}}]);else _0x2a63b9==_0x2f6e37(0x161)&&(_0x1436d4=await product['aggregate']([{'$match':{'product_category':_0x2f6e37(0x108),'category':_0x41f374}}]));break;case'rm':if(_0x2a63b9==_0x2f6e37(0x146))_0x1436d4=await product[_0x2f6e37(0x119)]([{'$match':{'product_category':_0x2f6e37(0x10d),'brand':_0x41f374}}]);else _0x2a63b9==_0x2f6e37(0x161)&&(_0x1436d4=await product[_0x2f6e37(0x119)]([{'$match':{'product_category':_0x2f6e37(0x10d),'category':_0x41f374}}]));break;}const _0x269e68=_0x47c010=>_0x47c010*0x48,_0x2f9353={'width':0x3,'height':0x1},_0x50263e=new PDFDocument({'margin':_0x269e68(0.75),'size':[_0x269e68(_0x2f9353[_0x2f6e37(0xf6)]),_0x269e68(_0x2f9353['height'])],'bufferPages':!![]}),_0x208c30=_0x1436d4[_0x2f6e37(0x112)];for(let _0x3969c1=0x0;_0x3969c1<=_0x208c30;_0x3969c1++){if(_0x3969c1!=_0x208c30){const _0x3bdc83=_0x1436d4[_0x3969c1][_0x2f6e37(0x109)],_0x5d80c4=_0x1436d4[_0x3969c1]['primary_code'],_0x28bb52=_0x1436d4[_0x3969c1][_0x2f6e37(0xc9)],_0x51803d=_0x1436d4[_0x3969c1]['product_code'];var _0x5b3ed7;switch(_0x4e54e1){case'1':_0x5b3ed7=_0x5d80c4;break;case'2':_0x5b3ed7=_0x28bb52;break;case'3':_0x5b3ed7=_0x51803d;break;}const _0x2c85fd={'width':0xd2,'height':0x64},_0x594e6f={'width':_0x269e68(_0x2f9353['width']),'height':_0x269e68(_0x2f9353[_0x2f6e37(0x12a)])},_0x51c5a3=new Canvas();JsBarcode(_0x51c5a3,_0x5b3ed7,{'format':_0x2f6e37(0x117),'height':_0x2c85fd[_0x2f6e37(0x12a)],'displayValue':!![],'text':_0x5b3ed7});const _0x442902=_0x51c5a3[_0x2f6e37(0xfb)](),_0x199b1a=_0x594e6f['width']/_0x2c85fd[_0x2f6e37(0xf6)],_0x5268b8=_0x594e6f[_0x2f6e37(0x12a)]/_0x2c85fd[_0x2f6e37(0x12a)],_0x524339=Math[_0x2f6e37(0xef)](_0x199b1a,_0x5268b8),_0x2623a0=_0x2c85fd['width']*_0x524339,_0x34a036=_0x2c85fd['height']*_0x524339,_0x397049=(_0x594e6f[_0x2f6e37(0xf6)]-_0x2623a0)/0x2,_0x1e078a=(_0x594e6f[_0x2f6e37(0x12a)]-_0x34a036)/0x2;_0x50263e[_0x2f6e37(0xf4)](_0x442902,_0x397049,_0x1e078a,{'width':_0x2623a0,'height':_0x34a036}),_0x3969c1!=_0x208c30&&_0x50263e[_0x2f6e37(0x129)]();}}const _0x5679c9=[];_0x50263e['on'](_0x2f6e37(0xe0),_0x5679c9['push'][_0x2f6e37(0x135)](_0x5679c9)),_0x50263e['on'](_0x2f6e37(0x116),()=>{const _0x28a844=_0x2f6e37,_0x3f2e68=Buffer[_0x28a844(0x102)](_0x5679c9),_0x9b702f=_0x3f2e68[_0x28a844(0x160)](_0x28a844(0x126));_0x2edd1b[_0x28a844(0xf8)]({'pdfContent':_0x9b702f});}),_0x50263e['end']();}catch(_0x9b50c2){_0x2edd1b['json']({'message':_0x9b50c2[_0x2f6e37(0x122)]});}}),router['post'](a0_0x511d0e(0xd1),auth,async(_0x50feae,_0x5d5feb)=>{const _0x3665eb=a0_0x511d0e;try{console[_0x3665eb(0x110)](_0x50feae[_0x3665eb(0x11a)]);const {prod_cat:_0x1f0b6c,identity:_0x33c4a9,valueData:_0x27fd61}=_0x50feae[_0x3665eb(0x11a)];let _0xb7b806;switch(_0x1f0b6c){case'fg':if(_0x33c4a9=='Brands')_0xb7b806=await product[_0x3665eb(0x119)]([{'$match':{'product_category':_0x3665eb(0x108),'brand':_0x27fd61}}]);else _0x33c4a9==_0x3665eb(0x161)&&(_0xb7b806=await product[_0x3665eb(0x119)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x27fd61}}]));break;case'rm':if(_0x33c4a9==_0x3665eb(0x146))_0xb7b806=await product[_0x3665eb(0x119)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x27fd61}}]);else _0x33c4a9=='Category'&&(_0xb7b806=await product[_0x3665eb(0x119)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x27fd61}}]));break;}_0x5d5feb['json']({'data':_0xb7b806});}catch(_0x246185){_0x5d5feb[_0x3665eb(0xf8)]({'message':_0x246185[_0x3665eb(0x122)]});}}),router[a0_0x511d0e(0xd3)](a0_0x511d0e(0x12f),auth,async(_0x5a61e7,_0x407ada)=>{const _0x246791=a0_0x511d0e;try{const _0x2cc1b9=_0x5a61e7[_0x246791(0xe9)]['id'],{copies:_0x3c0ab8,typeofbarcode:_0xd92f3a}=_0x5a61e7[_0x246791(0x11a)];var _0x3db4f5=await product[_0x246791(0xf3)](_0x2cc1b9);const _0x48fe74=_0x468470=>_0x468470*0x48,_0x5d2625={'width':0x3,'height':0x1},_0x2387a2=new PDFDocument({'margin':_0x48fe74(0.75),'size':[_0x48fe74(_0x5d2625[_0x246791(0xf6)]),_0x48fe74(_0x5d2625['height'])],'bufferPages':!![]}),_0x37ae45=_0x3c0ab8,_0x37b403=_0x3db4f5['name'],_0x262c34=_0x3db4f5['primary_code'],_0xd84f85=_0x3db4f5[_0x246791(0xc9)],_0x2100bd=_0x3db4f5[_0x246791(0x171)];let _0x3ac95a;switch(_0xd92f3a){case'1':_0x3ac95a=_0x262c34;break;case'2':_0x3ac95a=_0xd84f85;break;case'3':_0x3ac95a=_0x2100bd;break;}const _0xc53ffd={'width':0xd2,'height':0x64},_0x2ff875={'width':_0x48fe74(_0x5d2625[_0x246791(0xf6)]),'height':_0x48fe74(_0x5d2625[_0x246791(0x12a)])};for(let _0x5dc54e=0x1;_0x5dc54e<=_0x37ae45;_0x5dc54e++){const _0x4fc865=new Canvas();JsBarcode(_0x4fc865,_0x3ac95a,{'format':_0x246791(0x117),'height':_0xc53ffd[_0x246791(0x12a)],'displayValue':!![],'text':_0x3ac95a});const _0x46ba1f=_0x4fc865[_0x246791(0xfb)](),_0x40096b=_0x2ff875[_0x246791(0xf6)]/_0xc53ffd[_0x246791(0xf6)],_0x494f33=_0x2ff875['height']/_0xc53ffd[_0x246791(0x12a)],_0x42a8d6=Math[_0x246791(0xef)](_0x40096b,_0x494f33),_0x1634a7=_0xc53ffd[_0x246791(0xf6)]*_0x42a8d6,_0x2f1362=_0xc53ffd[_0x246791(0x12a)]*_0x42a8d6,_0x2b90f4=(_0x2ff875[_0x246791(0xf6)]-_0x1634a7)/0x2,_0xce82e1=(_0x2ff875['height']-_0x2f1362)/0x2;_0x2387a2['image'](_0x46ba1f,_0x2b90f4,_0xce82e1,{'width':_0x1634a7,'height':_0x2f1362}),_0x5dc54e!=_0x37ae45&&_0x2387a2[_0x246791(0x129)]();}const _0x5650c3=[];_0x2387a2['on'](_0x246791(0xe0),_0x5650c3['push'][_0x246791(0x135)](_0x5650c3)),_0x2387a2['on'](_0x246791(0x116),()=>{const _0x548447=_0x246791,_0x2643c0=Buffer[_0x548447(0x102)](_0x5650c3),_0x1b0171=_0x2643c0[_0x548447(0x160)]('base64');_0x407ada[_0x548447(0xf8)]({'pdfContent':_0x1b0171});}),_0x2387a2['end']();}catch(_0x12ab6f){_0x407ada[_0x246791(0xf8)]({'message':_0x12ab6f[_0x246791(0x122)]});}}),module[a0_0x511d0e(0xdb)]=router;