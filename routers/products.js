const a0_0x2d759f=a0_0x5bd5;function a0_0x5bd5(_0x5f0e94,_0x151983){const _0xeb2523=a0_0xeb25();return a0_0x5bd5=function(_0x5bd548,_0x5d0406){_0x5bd548=_0x5bd548-0x134;let _0x59859f=_0xeb2523[_0x5bd548];return _0x59859f;},a0_0x5bd5(_0x5f0e94,_0x151983);}(function(_0x5b0f52,_0x15757c){const _0x3bd1a4=a0_0x5bd5,_0x2b0d32=_0x5b0f52();while(!![]){try{const _0x519467=-parseInt(_0x3bd1a4(0x1e9))/0x1+parseInt(_0x3bd1a4(0x15b))/0x2*(parseInt(_0x3bd1a4(0x185))/0x3)+parseInt(_0x3bd1a4(0x1c4))/0x4*(parseInt(_0x3bd1a4(0x165))/0x5)+parseInt(_0x3bd1a4(0x176))/0x6*(parseInt(_0x3bd1a4(0x13d))/0x7)+parseInt(_0x3bd1a4(0x1dc))/0x8+parseInt(_0x3bd1a4(0x17e))/0x9*(parseInt(_0x3bd1a4(0x1c3))/0xa)+-parseInt(_0x3bd1a4(0x161))/0xb*(parseInt(_0x3bd1a4(0x15e))/0xc);if(_0x519467===_0x15757c)break;else _0x2b0d32['push'](_0x2b0d32['shift']());}catch(_0x35b947){_0x2b0d32['push'](_0x2b0d32['shift']());}}}(a0_0xeb25,0x57e9e));function a0_0xeb25(){const _0xa5b354=['long','299420sLtJwp','4PXiczk','../models/all_models','brands','/products_export_migrate_file','get','xlsx','express','/brands/delete/:id','length','findById','German','master','product_stock','Alert_QTY','/products/brands','Hindi','forEach','Arabic','find','width','/view/add_products','Sheets','redirect','Portuguese\x20(BR)','1485304nugVHh','push','maxProdPerUnit','map','English','name','aggregate','base64','secondary_code','pdfkit-table','/products/units','migrate_product_fule','$product_details','101454trojZd','$category','/print_barcode','single','toBuffer','public/upload','$product_name','user','addPage','now','categories_edit','multer','params','data','max_number_per_units','then','write','post','readFile','2471FXUCeb','Enabled','columns','$product_docs','Chinese','render','stock','Prod_Cat','email','units','findByIdAndDelete','Raw\x20Materials','bind','CODE128','English\x20(US)','/categories/:id','product_code','add_product','express/lib/response','Secondary_Units','exceljs','unit\x20data\x20delete\x20successfully','/brands/:id','errors','Brands','flash','Primary_Code','brand\x20data\x20update\x20successfully','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','end','338582mVZkHj','/print_barcode_filter_search/','categ','1128dPWlzR','product_category','alertquantity','189387xgqhwP','PBrands','addWorksheet','/products/view','1897195rAbJrr','Category','/barcode/:id','status','\x20brand\x20is\x20add\x20successfully','message','jsbarcode','categories','file','Product_Name','\x20Edit\x20Successfully','language','/brands','product\x20update\x20successfully','product_docs','/units','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','7446jThKoL','success','height','\x20added\x20successfully','concat','public/Migration','\x20<>\x20','Units','171nxcmcc','\x20unit\x20is\x20add\x20successfully','Spanish','findByIdAndUpdate','barcode\x20Product\x20master','Content-Type','category','9EzNldx','Portuguese','json','primary_code','numeric','/products_import_migrate_file','body','filename','secondary_unit','/units/:id','min','/barcode_data','send','save','Content-Disposition','/barcode_filter','log','/products/categories','product_barcode','Finished\x20Goods','image','hello','../middleware/auth','attachment;\x20filename=Product_Migration_File.xlsx','toString','utils','ProductCode','prod_categ','MaxperUnits','/units/delete/:id','Arabic\x20(ae)','$_id','Products\x20master','French','barcode\x20user_id','$brand','brand','/print_barcode_filter/','maxStocks','\x20categories\x20is\x20add\x20successfully','/categories','Products\x20find_data','public/Migration/','setHeader','diskStorage','$product_details.product_name','Secondary_Code','unit','PAlQty','/select_data','sheet_to_json','../public/language/languages.json','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','products','Product_Code','Maximum_Stocks','PUnits','/view/:id','Products','originalname','findOne'];a0_0xeb25=function(){return _0xa5b354;};return a0_0xeb25();}const express=require(a0_0x2d759f(0x1ca)),res=require(a0_0x2d759f(0x14f)),app=express(),router=express['Router'](),multer=require(a0_0x2d759f(0x135)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x2d759f(0x1c5)),auth=require(a0_0x2d759f(0x19b)),users=require(a0_0x2d759f(0x1b8)),excelJS=require(a0_0x2d759f(0x151)),xlsx=require(a0_0x2d759f(0x1c9)),JsBarcode=require(a0_0x2d759f(0x16b)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x2d759f(0x1e5));router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1ad),auth,async(_0x1539d4,_0x516917)=>{const _0x800fbd=a0_0x2d759f;try{const {username:_0x396827,email:_0x5d1ace,role:_0x581d43}=_0x1539d4[_0x800fbd(0x1f0)],_0x3f3803=_0x1539d4['user'],_0x468662=await profile[_0x800fbd(0x1c1)]({'email':_0x3f3803[_0x800fbd(0x145)]}),_0x3f9772=await master_shop[_0x800fbd(0x1d6)]();console['log'](_0x800fbd(0x1cf),_0x3f9772);const _0x454fc2=await categories[_0x800fbd(0x1d6)]();if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x14b))var _0xa09658=users[_0x800fbd(0x1e0)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x1d3))var _0xa09658=users[_0x800fbd(0x1d3)];else{if(_0x3f9772[0x0]['language']==_0x800fbd(0x1ce))var _0xa09658=users[_0x800fbd(0x1ce)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x180))var _0xa09658=users[_0x800fbd(0x180)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x1a6))var _0xa09658=users[_0x800fbd(0x1a6)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x1db))var _0xa09658=users[_0x800fbd(0x186)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]=='Chinese')var _0xa09658=users[_0x800fbd(0x141)];else{if(_0x3f9772[0x0][_0x800fbd(0x170)]==_0x800fbd(0x1a3))var _0xa09658=users[_0x800fbd(0x1d5)];}}}}}}}_0x516917[_0x800fbd(0x142)]('categories',{'success':_0x1539d4[_0x800fbd(0x156)](_0x800fbd(0x177)),'errors':_0x1539d4['flash'](_0x800fbd(0x154)),'role':_0x3f3803,'profile':_0x468662,'user':_0x454fc2,'master_shop':_0x3f9772,'language':_0xa09658});}catch(_0x542fdf){console['log'](_0x542fdf);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x1ad),auth,async(_0x52528c,_0x116404)=>{const _0x475863=a0_0x2d759f;try{const {name:_0x3c8836,products:_0x530d81}=_0x52528c['body'],_0x4b8050=new categories({'name':_0x3c8836,'products':_0x530d81}),_0x5982fa=await categories['findOne']({'name':_0x3c8836});_0x5982fa?_0x52528c[_0x475863(0x156)](_0x475863(0x154),_0x3c8836+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x52528c[_0x475863(0x156)](_0x475863(0x177),_0x3c8836+_0x475863(0x1ac));const _0x442264=await _0x4b8050[_0x475863(0x192)]();_0x116404['redirect'](_0x475863(0x196));}catch(_0x117168){console['log'](_0x117168);}}),router['get'](a0_0x2d759f(0x14c),auth,async(_0x32889a,_0x1ec0ba)=>{const _0x524e87=a0_0x2d759f;try{const {username:_0x3d4aed,email:_0xf318ad,role:_0x4be825}=_0x32889a['user'],_0x2217f9=_0x32889a[_0x524e87(0x1f0)],_0x1bc78e=await profile[_0x524e87(0x1c1)]({'email':_0x2217f9[_0x524e87(0x145)]}),_0xca1890=await master_shop[_0x524e87(0x1d6)]();console[_0x524e87(0x195)](_0x524e87(0x1cf),_0xca1890);const _0x3ca6a6=_0x32889a[_0x524e87(0x136)]['id'];console[_0x524e87(0x195)](_0x3ca6a6);const _0x3ca64d=await categories[_0x524e87(0x1cd)](_0x3ca6a6);if(_0xca1890[0x0][_0x524e87(0x170)]==_0x524e87(0x14b))var _0x19459e=users[_0x524e87(0x1e0)];else{if(_0xca1890[0x0][_0x524e87(0x170)]==_0x524e87(0x1d3))var _0x19459e=users[_0x524e87(0x1d3)];else{if(_0xca1890[0x0][_0x524e87(0x170)]==_0x524e87(0x1ce))var _0x19459e=users[_0x524e87(0x1ce)];else{if(_0xca1890[0x0][_0x524e87(0x170)]=='Spanish')var _0x19459e=users[_0x524e87(0x180)];else{if(_0xca1890[0x0]['language']==_0x524e87(0x1a6))var _0x19459e=users[_0x524e87(0x1a6)];else{if(_0xca1890[0x0]['language']=='Portuguese\x20(BR)')var _0x19459e=users['Portuguese'];else{if(_0xca1890[0x0]['language']=='Chinese')var _0x19459e=users[_0x524e87(0x141)];else{if(_0xca1890[0x0][_0x524e87(0x170)]==_0x524e87(0x1a3))var _0x19459e=users['Arabic'];}}}}}}}_0x1ec0ba[_0x524e87(0x142)](_0x524e87(0x16c),{'success':_0x32889a[_0x524e87(0x156)](_0x524e87(0x177)),'errors':_0x32889a[_0x524e87(0x156)](_0x524e87(0x154)),'role':_0x2217f9,'profile':_0x1bc78e,'master_shop':_0xca1890,'user':_0x3ca64d,'language':_0x19459e});}catch(_0x4bf140){console[_0x524e87(0x195)](_0x4bf140);}}),router[a0_0x2d759f(0x13b)]('/categories/:id',auth,async(_0x53b0d2,_0x37d978)=>{const _0x48349d=a0_0x2d759f;try{const _0x42256b=_0x53b0d2['params']['id'],_0x28419e=await categories['findByIdAndUpdate'](_0x42256b,_0x53b0d2[_0x48349d(0x18b)]);_0x53b0d2['flash'](_0x48349d(0x177),''+users[_0x48349d(0x134)]),_0x37d978[_0x48349d(0x1da)](_0x48349d(0x196));}catch(_0x2b4240){console[_0x48349d(0x195)](_0x2b4240);}}),router[a0_0x2d759f(0x1c8)]('/categories/delete/:id',auth,async(_0x5daabd,_0x2c96de)=>{const _0x45646e=a0_0x2d759f;try{const _0x49001d=_0x5daabd[_0x45646e(0x136)]['id'],_0x1e8076=await categories['findByIdAndDelete'](_0x49001d);_0x5daabd[_0x45646e(0x156)]('success','categories\x20data\x20delete\x20successfully'),_0x2c96de['redirect'](_0x45646e(0x196));}catch(_0x2bb2e0){console[_0x45646e(0x195)](_0x2bb2e0);}}),router['get'](a0_0x2d759f(0x171),auth,async(_0x42f7cc,_0x1abf26)=>{const _0x479408=a0_0x2d759f;try{const {username:_0x2bdac2,email:_0x48a3a5,role:_0x3c8add}=_0x42f7cc[_0x479408(0x1f0)],_0x4a0754=_0x42f7cc[_0x479408(0x1f0)],_0x31b14d=await profile[_0x479408(0x1c1)]({'email':_0x4a0754[_0x479408(0x145)]}),_0x48d8a7=await master_shop[_0x479408(0x1d6)]();console[_0x479408(0x195)]('master',_0x48d8a7);const _0x5e5c95=await brands[_0x479408(0x1d6)]();if(_0x48d8a7[0x0][_0x479408(0x170)]=='English\x20(US)')var _0x4536d7=users[_0x479408(0x1e0)];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x1d3))var _0x4536d7=users[_0x479408(0x1d3)];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x1ce))var _0x4536d7=users[_0x479408(0x1ce)];else{if(_0x48d8a7[0x0]['language']=='Spanish')var _0x4536d7=users[_0x479408(0x180)];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x1a6))var _0x4536d7=users[_0x479408(0x1a6)];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x1db))var _0x4536d7=users[_0x479408(0x186)];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x141))var _0x4536d7=users['Chinese'];else{if(_0x48d8a7[0x0][_0x479408(0x170)]==_0x479408(0x1a3))var _0x4536d7=users[_0x479408(0x1d5)];}}}}}}}_0x1abf26[_0x479408(0x142)](_0x479408(0x1c6),{'success':_0x42f7cc[_0x479408(0x156)](_0x479408(0x177)),'errors':_0x42f7cc[_0x479408(0x156)](_0x479408(0x154)),'role':_0x4a0754,'profile':_0x31b14d,'master_shop':_0x48d8a7,'user':_0x5e5c95,'language':_0x4536d7});}catch(_0x3bef71){console[_0x479408(0x195)](_0x3bef71);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x171),auth,async(_0x14f49b,_0xaabb70)=>{const _0xaaa1ad=a0_0x2d759f;try{const {name:_0x3054c6,products:_0x3380ff}=_0x14f49b['body'],_0x1eb90f=new brands({'name':_0x3054c6,'products':_0x3380ff}),_0x4f43e8=await brands['findOne']({'name':_0x3054c6});_0x4f43e8?_0x14f49b[_0xaaa1ad(0x156)](_0xaaa1ad(0x154),_0x3054c6+_0xaaa1ad(0x159)):_0x14f49b[_0xaaa1ad(0x156)](_0xaaa1ad(0x177),_0x3054c6+_0xaaa1ad(0x169));const _0x18e77c=await _0x1eb90f['save']();_0xaabb70[_0xaaa1ad(0x1da)](_0xaaa1ad(0x1d2));}catch(_0x4183a6){console[_0xaaa1ad(0x195)](_0x4183a6);}}),router['get']('/brands/:id',auth,async(_0x43120e,_0x103563)=>{const _0x181256=a0_0x2d759f;try{const {username:_0x1a5afb,email:_0x3b197f,role:_0x3943e5}=_0x43120e[_0x181256(0x1f0)],_0x4b2e50=_0x43120e[_0x181256(0x1f0)],_0x1df52a=await profile[_0x181256(0x1c1)]({'email':_0x4b2e50['email']}),_0x4065f8=await master_shop[_0x181256(0x1d6)]();console[_0x181256(0x195)]('master',_0x4065f8);const _0x2b44ff=_0x43120e['params']['id'];console[_0x181256(0x195)](_0x2b44ff);const _0x56e00d=await brands[_0x181256(0x1cd)](_0x2b44ff);if(_0x4065f8[0x0][_0x181256(0x170)]=='English\x20(US)')var _0x1eabfa=users[_0x181256(0x1e0)];else{if(_0x4065f8[0x0][_0x181256(0x170)]==_0x181256(0x1d3))var _0x1eabfa=users[_0x181256(0x1d3)];else{if(_0x4065f8[0x0][_0x181256(0x170)]=='German')var _0x1eabfa=users[_0x181256(0x1ce)];else{if(_0x4065f8[0x0][_0x181256(0x170)]==_0x181256(0x180))var _0x1eabfa=users[_0x181256(0x180)];else{if(_0x4065f8[0x0][_0x181256(0x170)]==_0x181256(0x1a6))var _0x1eabfa=users['French'];else{if(_0x4065f8[0x0][_0x181256(0x170)]=='Portuguese\x20(BR)')var _0x1eabfa=users['Portuguese'];else{if(_0x4065f8[0x0][_0x181256(0x170)]==_0x181256(0x141))var _0x1eabfa=users['Chinese'];else{if(_0x4065f8[0x0][_0x181256(0x170)]==_0x181256(0x1a3))var _0x1eabfa=users[_0x181256(0x1d5)];}}}}}}}_0x103563[_0x181256(0x142)](_0x181256(0x1c6),{'success':_0x43120e['flash'](_0x181256(0x177)),'errors':_0x43120e['flash'](_0x181256(0x154)),'role':_0x4b2e50,'profile':_0x1df52a,'master_shop':_0x4065f8,'user':_0x56e00d,'language':_0x1eabfa});}catch(_0x5c547f){console[_0x181256(0x195)](_0x5c547f);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x153),auth,async(_0x5c0199,_0x3fe11d)=>{const _0x3dd44e=a0_0x2d759f;try{const _0x471da5=_0x5c0199[_0x3dd44e(0x136)]['id'],_0x282a6e=await brands[_0x3dd44e(0x181)](_0x471da5,_0x5c0199[_0x3dd44e(0x18b)]);_0x5c0199[_0x3dd44e(0x156)](_0x3dd44e(0x177),_0x3dd44e(0x158)),_0x3fe11d[_0x3dd44e(0x1da)]('/products/brands');}catch(_0x33446d){console['log'](_0x33446d);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1cb),auth,async(_0x44bdf2,_0x3db978)=>{const _0x580e51=a0_0x2d759f;try{const _0x65fc63=_0x44bdf2[_0x580e51(0x136)]['id'],_0x27e4ec=await brands[_0x580e51(0x147)](_0x65fc63);_0x44bdf2[_0x580e51(0x156)](_0x580e51(0x177),'brand\x20data\x20delete\x20successfully'),_0x3db978[_0x580e51(0x1da)](_0x580e51(0x1d2));}catch(_0x4c0601){console[_0x580e51(0x195)](_0x4c0601);}}),router['get'](a0_0x2d759f(0x174),auth,async(_0x225320,_0x51c3aa)=>{const _0x3befc1=a0_0x2d759f;try{const {username:_0x58e1eb,email:_0x5ef546,role:_0x34f7d3}=_0x225320['user'],_0x5eb950=_0x225320['user'],_0x3241bc=await profile[_0x3befc1(0x1c1)]({'email':_0x5eb950[_0x3befc1(0x145)]}),_0x318d6b=await master_shop[_0x3befc1(0x1d6)]();console[_0x3befc1(0x195)](_0x3befc1(0x1cf),_0x318d6b);const _0x2173e5=await units[_0x3befc1(0x1d6)]();if(_0x318d6b[0x0][_0x3befc1(0x170)]==_0x3befc1(0x14b))var _0x356de7=users[_0x3befc1(0x1e0)];else{if(_0x318d6b[0x0][_0x3befc1(0x170)]==_0x3befc1(0x1d3))var _0x356de7=users[_0x3befc1(0x1d3)];else{if(_0x318d6b[0x0][_0x3befc1(0x170)]==_0x3befc1(0x1ce))var _0x356de7=users[_0x3befc1(0x1ce)];else{if(_0x318d6b[0x0][_0x3befc1(0x170)]=='Spanish')var _0x356de7=users[_0x3befc1(0x180)];else{if(_0x318d6b[0x0]['language']==_0x3befc1(0x1a6))var _0x356de7=users[_0x3befc1(0x1a6)];else{if(_0x318d6b[0x0][_0x3befc1(0x170)]==_0x3befc1(0x1db))var _0x356de7=users[_0x3befc1(0x186)];else{if(_0x318d6b[0x0][_0x3befc1(0x170)]==_0x3befc1(0x141))var _0x356de7=users[_0x3befc1(0x141)];else{if(_0x318d6b[0x0]['language']==_0x3befc1(0x1a3))var _0x356de7=users['Arabic'];}}}}}}}_0x51c3aa[_0x3befc1(0x142)]('units',{'success':_0x225320['flash']('success'),'errors':_0x225320[_0x3befc1(0x156)]('errors'),'role':_0x5eb950,'profile':_0x3241bc,'master_shop':_0x318d6b,'user':_0x2173e5,'language':_0x356de7});}catch(_0x2dc684){console[_0x3befc1(0x195)](_0x2dc684);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x174),auth,async(_0x39b0b3,_0x261871)=>{const _0x8de57e=a0_0x2d759f;try{const {name:_0x4cdc74,secondary_unit:_0x264f7b,products:_0x1c7f8a}=_0x39b0b3[_0x8de57e(0x18b)],_0x47ca75=new units({'name':_0x4cdc74,'secondary_unit':_0x264f7b,'products':_0x1c7f8a}),_0x217d37=await units['findOne']({'name':_0x4cdc74});_0x217d37?_0x39b0b3[_0x8de57e(0x156)](_0x8de57e(0x154),_0x4cdc74+_0x8de57e(0x1b9)):_0x39b0b3['flash'](_0x8de57e(0x177),_0x4cdc74+_0x8de57e(0x17f));const _0x346bb3=await _0x47ca75['save']();_0x261871['redirect'](_0x8de57e(0x1e6));}catch(_0x3807df){console[_0x8de57e(0x195)](_0x3807df);}}),router['get'](a0_0x2d759f(0x18e),auth,async(_0x4d7c07,_0x5c575e)=>{const _0x2e35dc=a0_0x2d759f;try{const {username:_0x7b4486,email:_0x50362c,role:_0x15cba3}=_0x4d7c07[_0x2e35dc(0x1f0)],_0x3fa7a6=_0x4d7c07[_0x2e35dc(0x1f0)],_0x3ec49e=await profile[_0x2e35dc(0x1c1)]({'email':_0x3fa7a6[_0x2e35dc(0x145)]}),_0x3d2ac3=await master_shop[_0x2e35dc(0x1d6)]();console[_0x2e35dc(0x195)](_0x2e35dc(0x1cf),_0x3d2ac3);const _0x3ab4af=_0x4d7c07[_0x2e35dc(0x136)]['id'],_0x2498a0=await units[_0x2e35dc(0x1cd)](_0x3ab4af);if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x14b))var _0x153bd=users[_0x2e35dc(0x1e0)];else{if(_0x3d2ac3[0x0]['language']==_0x2e35dc(0x1d3))var _0x153bd=users[_0x2e35dc(0x1d3)];else{if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x1ce))var _0x153bd=users['German'];else{if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x180))var _0x153bd=users[_0x2e35dc(0x180)];else{if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x1a6))var _0x153bd=users[_0x2e35dc(0x1a6)];else{if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x1db))var _0x153bd=users[_0x2e35dc(0x186)];else{if(_0x3d2ac3[0x0]['language']==_0x2e35dc(0x141))var _0x153bd=users[_0x2e35dc(0x141)];else{if(_0x3d2ac3[0x0][_0x2e35dc(0x170)]==_0x2e35dc(0x1a3))var _0x153bd=users['Arabic'];}}}}}}}_0x5c575e[_0x2e35dc(0x142)](_0x2e35dc(0x146),{'success':_0x4d7c07['flash'](_0x2e35dc(0x177)),'errors':_0x4d7c07[_0x2e35dc(0x156)](_0x2e35dc(0x154)),'role':_0x3fa7a6,'profile':_0x3ec49e,'master_shop':_0x3d2ac3,'user':_0x2498a0,'language':_0x153bd});}catch(_0x385441){console[_0x2e35dc(0x195)](_0x385441);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x18e),auth,async(_0x2f8664,_0x51fd7f)=>{const _0x40ffcd=a0_0x2d759f;try{const _0x9b49e5=_0x2f8664[_0x40ffcd(0x136)]['id'],_0x1b91cf=await units[_0x40ffcd(0x181)](_0x9b49e5,_0x2f8664[_0x40ffcd(0x18b)]);_0x2f8664[_0x40ffcd(0x156)](_0x40ffcd(0x177),'unit\x20data\x20update\x20successfully'),_0x51fd7f[_0x40ffcd(0x1da)](_0x40ffcd(0x1e6));}catch(_0x7b9768){console[_0x40ffcd(0x195)](_0x7b9768);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1a2),auth,async(_0x27a89e,_0x2d518b)=>{const _0x1f787c=a0_0x2d759f;try{const _0x147fb4=_0x27a89e['params']['id'],_0x515d26=await units[_0x1f787c(0x147)](_0x147fb4);_0x27a89e[_0x1f787c(0x156)](_0x1f787c(0x177),_0x1f787c(0x152)),_0x2d518b[_0x1f787c(0x1da)](_0x1f787c(0x1e6));}catch(_0x4c16e3){console['log'](_0x4c16e3);}});const storage=multer[a0_0x2d759f(0x1b1)]({'destination':(_0x2a1edc,_0x413025,_0x5b28f1)=>{const _0x1e3dc3=a0_0x2d759f;_0x5b28f1(null,_0x1e3dc3(0x1ee));},'filename':(_0x1b6cdd,_0x9581d3,_0xacbba2)=>{const _0x4cadd6=a0_0x2d759f;_0xacbba2(null,Date[_0x4cadd6(0x1f2)]()+_0x9581d3['originalname']);}}),upload=multer({'storage':storage});router[a0_0x2d759f(0x1c8)]('/view',auth,async(_0xda2f0,_0x34afda)=>{const _0x26182a=a0_0x2d759f;try{const {username:_0x45d64f,email:_0x3c1c03,role:_0x29621e}=_0xda2f0['user'],_0x826964=_0xda2f0[_0x26182a(0x1f0)],_0x35a175=await profile['findOne']({'email':_0x826964[_0x26182a(0x145)]}),_0x5050d4={'year':'numeric','month':_0x26182a(0x1c2),'day':_0x26182a(0x189)},_0x107870=await master_shop[_0x26182a(0x1d6)]();console[_0x26182a(0x195)](_0x26182a(0x1a5),_0x107870);const _0x37e18d=await product['find']();console[_0x26182a(0x195)](_0x26182a(0x1ae),_0x37e18d);const _0x228ed8=await warehouse['aggregate']([{'$unwind':_0x26182a(0x1e8)},{'$lookup':{'from':_0x26182a(0x1ba),'localField':'product_details.product_name','foreignField':_0x26182a(0x1e1),'as':_0x26182a(0x173)}},{'$unwind':_0x26182a(0x140)},{'$project':{'product_name':_0x26182a(0x1b2),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x26182a(0x1ef),'product_stock':{'$sum':'$product_stock'}}}]);console['log']('Products\x20warehouse_data',_0x228ed8),_0x228ed8[_0x26182a(0x1d4)](_0x3f5832=>{const _0x14b6ad=_0x26182a,_0x2b4f82=_0x37e18d[_0x14b6ad(0x1df)](_0x4b7667=>{const _0x10b37e=_0x14b6ad;_0x4b7667[_0x10b37e(0x1e1)]==_0x3f5832['_id']&&(_0x4b7667[_0x10b37e(0x143)]=parseInt(_0x4b7667['stock'])+parseInt(_0x3f5832[_0x10b37e(0x1d0)]));});}),console[_0x26182a(0x195)](_0x26182a(0x1ae),_0x37e18d);if(_0x107870[0x0][_0x26182a(0x170)]=='English\x20(US)')var _0x305830=users[_0x26182a(0x1e0)];else{if(_0x107870[0x0][_0x26182a(0x170)]=='Hindi')var _0x305830=users[_0x26182a(0x1d3)];else{if(_0x107870[0x0][_0x26182a(0x170)]==_0x26182a(0x1ce))var _0x305830=users[_0x26182a(0x1ce)];else{if(_0x107870[0x0]['language']==_0x26182a(0x180))var _0x305830=users[_0x26182a(0x180)];else{if(_0x107870[0x0][_0x26182a(0x170)]==_0x26182a(0x1a6))var _0x305830=users['French'];else{if(_0x107870[0x0][_0x26182a(0x170)]==_0x26182a(0x1db))var _0x305830=users[_0x26182a(0x186)];else{if(_0x107870[0x0]['language']==_0x26182a(0x141))var _0x305830=users[_0x26182a(0x141)];else{if(_0x107870[0x0][_0x26182a(0x170)]==_0x26182a(0x1a3))var _0x305830=users[_0x26182a(0x1d5)];}}}}}}}_0x34afda[_0x26182a(0x142)](_0x26182a(0x1ba),{'success':_0xda2f0[_0x26182a(0x156)](_0x26182a(0x177)),'errors':_0xda2f0[_0x26182a(0x156)]('errors'),'alldata':_0x37e18d,'profile':_0x35a175,'master_shop':_0x107870,'role':_0x826964,'product_stock':_0x228ed8,'language':_0x305830});}catch(_0x32719d){console[_0x26182a(0x195)](_0x32719d);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1d8),auth,async(_0x18c8c0,_0x25ed5b)=>{const _0x393af7=a0_0x2d759f;try{const {username:_0x25dc6f,email:_0x146470,role:_0x555df3}=_0x18c8c0[_0x393af7(0x1f0)],_0x3c6c2b=_0x18c8c0[_0x393af7(0x1f0)],_0x108725=await profile[_0x393af7(0x1c1)]({'email':_0x3c6c2b[_0x393af7(0x145)]}),_0x3f238d=await master_shop[_0x393af7(0x1d6)]();console[_0x393af7(0x195)](_0x393af7(0x1cf),_0x3f238d);const _0x459f1c=await categories[_0x393af7(0x1d6)]({}),_0x55db49=await brands[_0x393af7(0x1d6)]({}),_0x3bfbfb=await units['find']({}),_0x807a04=await warehouse[_0x393af7(0x1d6)]({'status':_0x393af7(0x13e)});if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x14b))var _0x30541c=users[_0x393af7(0x1e0)];else{if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x1d3))var _0x30541c=users[_0x393af7(0x1d3)];else{if(_0x3f238d[0x0]['language']=='German')var _0x30541c=users[_0x393af7(0x1ce)];else{if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x180))var _0x30541c=users[_0x393af7(0x180)];else{if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x1a6))var _0x30541c=users[_0x393af7(0x1a6)];else{if(_0x3f238d[0x0]['language']==_0x393af7(0x1db))var _0x30541c=users[_0x393af7(0x186)];else{if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x141))var _0x30541c=users[_0x393af7(0x141)];else{if(_0x3f238d[0x0][_0x393af7(0x170)]==_0x393af7(0x1a3))var _0x30541c=users['Arabic'];}}}}}}}_0x25ed5b['render'](_0x393af7(0x14e),{'success':_0x18c8c0[_0x393af7(0x156)](_0x393af7(0x177)),'errors':_0x18c8c0['flash']('errors'),'role':_0x3c6c2b,'profile':_0x108725,'categories':_0x459f1c,'brands':_0x55db49,'master_shop':_0x3f238d,'units':_0x3bfbfb,'language':_0x30541c,'find_data':_0x807a04});}catch(_0x22d4fc){console[_0x393af7(0x195)](_0x22d4fc);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x1d8),auth,upload[a0_0x2d759f(0x1ec)](a0_0x2d759f(0x199)),async(_0x59e57e,_0x3aa2de)=>{const _0x5d7f0c=a0_0x2d759f;try{const {name:_0x122b95,category:_0x552cf5,brand:_0x47eadd,unit:_0x5ec908,alertquantity:_0x1d3423,stock:_0x4979d7,product_code:_0x43cb58,warehouse:_0x1d6f0d,primary_ItemCode:_0x511c97,second_ItemCode:_0xc18a2a,second_unit:_0x4492e0,maxPerUnit:_0x2d6cc2,MaxPerProduct:_0x585fa6}=_0x59e57e[_0x5d7f0c(0x18b)],_0x28428a=_0x59e57e['file']?.[_0x5d7f0c(0x18c)]||'defaultProduct.avif',_0x45d573=new product({'image':_0x28428a,'name':_0x122b95,'category':_0x552cf5,'brand':_0x47eadd,'unit':_0x5ec908,'alertquantity':_0x1d3423,'stock':_0x4979d7,'product_code':_0x43cb58,'warehouse':_0x1d6f0d,'primary_code':_0x511c97,'secondary_code':_0xc18a2a,'second_unit':_0x4492e0,'maxStocks':_0x585fa6,'maxProdPerUnit':_0x2d6cc2}),_0x50e74d=await _0x45d573[_0x5d7f0c(0x192)](),_0x180f3d=await categories[_0x5d7f0c(0x1c1)]({'name':_0x552cf5});_0x180f3d[_0x5d7f0c(0x1ba)]=parseInt(_0x180f3d[_0x5d7f0c(0x1ba)])+0x1,await _0x180f3d[_0x5d7f0c(0x192)]();const _0x3bf995=await brands[_0x5d7f0c(0x1c1)]({'name':_0x47eadd});_0x3bf995[_0x5d7f0c(0x1ba)]=parseInt(_0x3bf995[_0x5d7f0c(0x1ba)])+0x1,await _0x3bf995['save']();const _0x238825=await units[_0x5d7f0c(0x1c1)]({'name':_0x5ec908});_0x238825[_0x5d7f0c(0x1ba)]=parseInt(_0x238825['products'])+0x1,await _0x238825['save'](),_0x59e57e[_0x5d7f0c(0x156)](_0x5d7f0c(0x177),'product\x20add\x20successfully'),_0x3aa2de[_0x5d7f0c(0x1da)](_0x5d7f0c(0x164));}catch(_0x1c068f){console[_0x5d7f0c(0x195)](_0x1c068f);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1be),auth,async(_0x1c2f84,_0x1b314c)=>{const _0x1991bd=a0_0x2d759f;try{const {username:_0x5add44,email:_0x3579e1,role:_0xae42da}=_0x1c2f84['user'],_0x3a8a41=_0x1c2f84[_0x1991bd(0x1f0)],_0x2fc9c9=await profile['findOne']({'email':_0x3a8a41['email']}),_0x111450=await master_shop[_0x1991bd(0x1d6)]();console['log']('edit\x20Product\x20master',_0x111450);const _0x544866=_0x1c2f84['params']['id'],_0xf8c51f=await product[_0x1991bd(0x1cd)](_0x544866),_0x2de8fe=await categories[_0x1991bd(0x1d6)]({}),_0xa44d9d=await brands[_0x1991bd(0x1d6)]({}),_0x579a6f=await units['find']({}),_0x34cbbd=await warehouse['find']({'status':_0x1991bd(0x13e)}),_0x362f4f=await units[_0x1991bd(0x1e2)]([{'$group':{'_id':_0x1991bd(0x1a4),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x111450[0x0]['language']==_0x1991bd(0x14b))var _0x414cc8=users['English'];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x1d3))var _0x414cc8=users[_0x1991bd(0x1d3)];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x1ce))var _0x414cc8=users['German'];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x180))var _0x414cc8=users[_0x1991bd(0x180)];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x1a6))var _0x414cc8=users[_0x1991bd(0x1a6)];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x1db))var _0x414cc8=users['Portuguese'];else{if(_0x111450[0x0][_0x1991bd(0x170)]==_0x1991bd(0x141))var _0x414cc8=users[_0x1991bd(0x141)];else{if(_0x111450[0x0][_0x1991bd(0x170)]=='Arabic\x20(ae)')var _0x414cc8=users[_0x1991bd(0x1d5)];}}}}}}}_0x1b314c[_0x1991bd(0x142)]('edit_product',{'success':_0x1c2f84[_0x1991bd(0x156)](_0x1991bd(0x177)),'errors':_0x1c2f84['flash'](_0x1991bd(0x154)),'role':_0x3a8a41,'profile':_0x2fc9c9,'alldata':_0xf8c51f,'categories':_0x2de8fe,'brands':_0xa44d9d,'master_shop':_0x111450,'units':_0x579a6f,'secondunit':_0x362f4f,'find_data':_0x34cbbd,'language':_0x414cc8});}catch(_0x20fe55){console[_0x1991bd(0x195)](_0x20fe55);}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x1be),auth,upload[a0_0x2d759f(0x1ec)](a0_0x2d759f(0x199)),async(_0x24cc80,_0x54268e)=>{const _0x3de89e=a0_0x2d759f;try{console['log'](_0x3de89e(0x19a));const _0x2c1803=_0x24cc80[_0x3de89e(0x136)]['id'],_0x114500=await product[_0x3de89e(0x1cd)](_0x2c1803),{image:_0x45400d,name:_0x46745a,category:_0x19f51b,brand:_0x5b1e8c,sku:_0x27e68c,unit:_0x3c7ab2,alertquantity:_0x3983aa,product_code:_0x228eff,warehouse:_0x418491,primary_ItemCode:_0x3a0c0c,second_ItemCode:_0xf7b897,second_unit:_0x250991,maxPerUnit:_0x40d079,MaxPerProduct:_0x4c60eb,prod_catdata:_0x2f1f97}=_0x24cc80[_0x3de89e(0x18b)];_0x24cc80[_0x3de89e(0x16d)]&&(_0x114500[_0x3de89e(0x199)]=_0x24cc80['file'][_0x3de89e(0x18c)]);_0x114500[_0x3de89e(0x1e1)]=_0x46745a,_0x114500[_0x3de89e(0x184)]=_0x19f51b,_0x114500[_0x3de89e(0x1a9)]=_0x5b1e8c,_0x114500['sku']=_0x27e68c,_0x114500['unit']=_0x3c7ab2,_0x114500[_0x3de89e(0x160)]=_0x3983aa,_0x114500[_0x3de89e(0x14d)]=_0x228eff,_0x114500['warehouse']=_0x418491,_0x114500[_0x3de89e(0x188)]=_0x3a0c0c,_0x114500['secondary_code']=_0xf7b897,_0x114500[_0x3de89e(0x18d)]=_0x250991,_0x114500[_0x3de89e(0x1ab)]=_0x4c60eb,_0x114500[_0x3de89e(0x1de)]=_0x40d079,_0x114500[_0x3de89e(0x15f)]=_0x2f1f97;const _0x30620c=await _0x114500['save']();console[_0x3de89e(0x195)]('product\x20edit',_0x114500),_0x24cc80[_0x3de89e(0x156)]('success',_0x3de89e(0x172)),_0x54268e['redirect']('/products/view');}catch(_0x287f05){console['log'](_0x287f05);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x167),auth,async(_0x424af4,_0x4290a8)=>{const _0x4676fe=a0_0x2d759f;try{const {username:_0xf7112f,email:_0x4d0703,role:_0x271384}=_0x424af4[_0x4676fe(0x1f0)],_0x464f2a=_0x424af4[_0x4676fe(0x1f0)],_0x971aa8=await profile[_0x4676fe(0x1c1)]({'email':_0x464f2a[_0x4676fe(0x145)]}),_0xe75edc=await master_shop[_0x4676fe(0x1d6)]();console[_0x4676fe(0x195)](_0x4676fe(0x182),_0xe75edc);const _0x2e26e6=_0x424af4[_0x4676fe(0x136)]['id'],_0x2b7033=await product[_0x4676fe(0x1cd)](_0x2e26e6);console[_0x4676fe(0x195)](_0x4676fe(0x1a7),_0x2b7033);if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x14b))var _0x2f1f2c=users[_0x4676fe(0x1e0)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x1d3))var _0x2f1f2c=users[_0x4676fe(0x1d3)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x1ce))var _0x2f1f2c=users['German'];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]=='Spanish')var _0x2f1f2c=users[_0x4676fe(0x180)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x1a6))var _0x2f1f2c=users[_0x4676fe(0x1a6)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x1db))var _0x2f1f2c=users[_0x4676fe(0x186)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x141))var _0x2f1f2c=users[_0x4676fe(0x141)];else{if(_0xe75edc[0x0][_0x4676fe(0x170)]==_0x4676fe(0x1a3))var _0x2f1f2c=users[_0x4676fe(0x1d5)];}}}}}}}_0x4290a8[_0x4676fe(0x142)](_0x4676fe(0x197),{'success':_0x424af4[_0x4676fe(0x156)](_0x4676fe(0x177)),'errors':_0x424af4[_0x4676fe(0x156)](_0x4676fe(0x154)),'role':_0x464f2a,'profile':_0x971aa8,'alldata':_0x2b7033,'master_shop':_0xe75edc,'language':_0x2f1f2c});}catch(_0x7c0989){console[_0x4676fe(0x195)](_0x7c0989);}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1c7),auth,async(_0x2336d2,_0x7cf904)=>{const _0x15ee42=a0_0x2d759f;try{const _0x413d44=new excelJS['Workbook'](),_0x3239f6=_0x413d44[_0x15ee42(0x163)](_0x15ee42(0x1bf));return _0x3239f6[_0x15ee42(0x13f)]=[{'header':_0x15ee42(0x16e),'key':'PName','width':0xa},{'header':_0x15ee42(0x155),'key':_0x15ee42(0x162),'width':0xa},{'header':'Units','key':_0x15ee42(0x1bd),'width':0xa},{'header':_0x15ee42(0x150),'key':'PSecondaryUnits','width':0xa},{'header':_0x15ee42(0x138),'key':_0x15ee42(0x1a1),'width':0xa},{'header':_0x15ee42(0x157),'key':_0x15ee42(0x19f),'width':0xa},{'header':'Secondary_Code','key':_0x15ee42(0x19f),'width':0xa},{'header':_0x15ee42(0x1bb),'key':_0x15ee42(0x19f),'width':0xa},{'header':_0x15ee42(0x166),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x15ee42(0x1b5),'width':0xa},{'header':_0x15ee42(0x1bc),'key':_0x15ee42(0x1b5),'width':0xa},{'header':'Products_category','key':_0x15ee42(0x144),'width':0xa}],_0x7cf904[_0x15ee42(0x1b0)](_0x15ee42(0x183),_0x15ee42(0x175)),_0x7cf904[_0x15ee42(0x1b0)](_0x15ee42(0x193),_0x15ee42(0x19c)),_0x413d44[_0x15ee42(0x1c9)][_0x15ee42(0x13a)](_0x7cf904)[_0x15ee42(0x139)](()=>{_0x7cf904['status'](0xc8);});}catch(_0x5a08b1){_0x7cf904[_0x15ee42(0x168)](0x190)[_0x15ee42(0x191)](_0x5a08b1);}});const storage1=multer[a0_0x2d759f(0x1b1)]({'destination':(_0x318a12,_0x273a03,_0x53f1e3)=>{const _0x55fb90=a0_0x2d759f;_0x53f1e3(null,_0x55fb90(0x17b));},'filename':(_0x28c829,_0x190a67,_0x366605)=>{const _0x5c4600=a0_0x2d759f;_0x366605(null,Date[_0x5c4600(0x1f2)]()+_0x190a67[_0x5c4600(0x1c0)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x2d759f(0x18a),auth,uploadMigrate[a0_0x2d759f(0x1ec)](a0_0x2d759f(0x1e7)),async(_0x7b8b0e,_0x1205f1)=>{const _0x38c3a3=a0_0x2d759f,_0x4ff6b9=_0x7b8b0e[_0x38c3a3(0x16d)][_0x38c3a3(0x18c)],_0x29d2a6=await xlsx[_0x38c3a3(0x13c)](_0x38c3a3(0x1af)+_0x4ff6b9);let _0x6823e9=_0x29d2a6['SheetNames'],_0x5c430f=xlsx[_0x38c3a3(0x19e)][_0x38c3a3(0x1b7)](_0x29d2a6[_0x38c3a3(0x1d9)][_0x6823e9[0x0]]);for(const _0x3ab554 of _0x5c430f){const _0x539af2=_0x3ab554[_0x38c3a3(0x16e)],_0xda6100=_0x3ab554[_0x38c3a3(0x155)],_0x3d664e=_0x3ab554[_0x38c3a3(0x17d)],_0x3701ab=_0x3ab554[_0x38c3a3(0x150)],_0x322bff=_0x3ab554[_0x38c3a3(0x1bb)],_0x11249d=_0x3ab554[_0x38c3a3(0x166)],_0x498776=_0x3ab554[_0x38c3a3(0x1d1)],_0x47ff76=_0x3ab554['Primary_Code'],_0x255e01=_0x3ab554[_0x38c3a3(0x1b3)],_0x3c817b=_0x3ab554[_0x38c3a3(0x1bc)],_0x4c9dcd=_0x3ab554[_0x38c3a3(0x138)],_0x398e13=_0x3ab554['Products_category'];try{let _0x4a13ed=await categories['findOne']({'name':_0x11249d});if(!_0x4a13ed){const _0x4686f9=new categories({'name':_0x11249d,'products':'0'});_0x4a13ed=await _0x4686f9[_0x38c3a3(0x192)]();}let _0x173da4=await brands[_0x38c3a3(0x1c1)]({'name':_0xda6100});if(!_0x173da4){const _0x16d431=new brands({'name':_0xda6100,'products':'0'});_0x173da4=await _0x16d431['save']();}let _0x1ce867=await units['findOne']({'name':_0x3d664e,'secondary_unit':_0x3701ab});if(!_0x1ce867){const _0x4c2aa6=new units({'name':_0x3d664e,'secondary_unit':_0x3701ab,'products':'0'});_0x1ce867=await _0x4c2aa6[_0x38c3a3(0x192)]();}const _0x53de74=await product[_0x38c3a3(0x1d6)]({'name':_0x539af2,'category':_0x4a13ed[_0x38c3a3(0x1e1)],'brand':_0x173da4[_0x38c3a3(0x1e1)],'secondary_unit':_0x1ce867[_0x38c3a3(0x18d)],'product_code':_0x322bff});console[_0x38c3a3(0x195)](_0x53de74[_0x38c3a3(0x1cc)]+_0x38c3a3(0x17c)+_0x4a13ed['name']+_0x38c3a3(0x17c)+_0x173da4[_0x38c3a3(0x1e1)]+_0x38c3a3(0x17c)+_0x1ce867['secondary_unit']+_0x38c3a3(0x17c)+_0x322bff+'\x20<>\x20'+_0x539af2);if(_0x53de74['length']===0x0){const _0x5220a7=new product({'image':'defaultProduct.avif','name':_0x539af2,'category':_0x4a13ed[_0x38c3a3(0x1e1)],'brand':_0x173da4[_0x38c3a3(0x1e1)],'unit':_0x1ce867[_0x38c3a3(0x1e1)],'alertquantity':_0x498776,'product_code':_0x322bff,'secondary_unit':_0x1ce867['secondary_unit'],'primary_code':_0x47ff76,'secondary_code':_0x255e01,'maxStocks':_0x3c817b,'maxProdPerUnit':_0x4c9dcd,'product_category':_0x398e13}),_0x39fe3c=await _0x5220a7[_0x38c3a3(0x192)]();_0x4a13ed[_0x38c3a3(0x1ba)]=parseInt(_0x4a13ed[_0x38c3a3(0x1ba)])+0x1,await _0x4a13ed['save'](),_0x173da4[_0x38c3a3(0x1ba)]=parseInt(_0x173da4[_0x38c3a3(0x1ba)])+0x1,await _0x173da4[_0x38c3a3(0x192)](),_0x1ce867['products']=parseInt(_0x1ce867['products'])+0x1,await _0x1ce867[_0x38c3a3(0x192)](),_0x7b8b0e[_0x38c3a3(0x156)](_0x38c3a3(0x177),_0x539af2+_0x38c3a3(0x179));}else{console[_0x38c3a3(0x195)](_0x53de74[0x0]);const _0x309196=_0x53de74[0x0];_0x309196[_0x38c3a3(0x184)]=_0x4a13ed[_0x38c3a3(0x1e1)],_0x309196[_0x38c3a3(0x1a9)]=_0x173da4[_0x38c3a3(0x1e1)],_0x309196[_0x38c3a3(0x1b4)]=_0x1ce867[_0x38c3a3(0x1e1)],_0x309196[_0x38c3a3(0x160)]=_0x498776,_0x309196['product_code']=_0x322bff,_0x309196[_0x38c3a3(0x18d)]=_0x1ce867['secondary_unit'],_0x309196[_0x38c3a3(0x188)]=_0x47ff76,_0x309196[_0x38c3a3(0x1e4)]=_0x255e01,_0x309196['maxStocks']=_0x3c817b,_0x309196['maxProdPerUnit']=_0x4c9dcd,_0x309196['product_category']=_0x398e13;const _0x75d101=await _0x309196[_0x38c3a3(0x192)]();_0x7b8b0e['flash'](_0x38c3a3(0x177),_0x75d101[_0x38c3a3(0x1e1)]+_0x38c3a3(0x16f));}}catch(_0x538d50){_0x1205f1['status'](0x1f4)['json']({'proderror':_0x538d50['message'],'aproduct':_0x539af2});}}_0x1205f1[_0x38c3a3(0x1da)](_0x38c3a3(0x164));}),router['post'](a0_0x2d759f(0x1b6),auth,async(_0x2b30ce,_0x36f40a)=>{const _0x26d6b4=a0_0x2d759f;try{console['log'](_0x2b30ce[_0x26d6b4(0x18b)]);const {data_cateory:_0x91a037,datachoose:_0x4d8722}=_0x2b30ce[_0x26d6b4(0x18b)];var _0x50b019;if(_0x4d8722==_0x26d6b4(0x1a0))_0x50b019=await product[_0x26d6b4(0x1e2)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x4d8722==_0x26d6b4(0x1c6))_0x50b019=await product['aggregate']([{'$match':{'product_category':_0x91a037}},{'$group':{'_id':_0x26d6b4(0x1a8)}}]);else _0x4d8722==_0x26d6b4(0x15d)&&(_0x50b019=await product[_0x26d6b4(0x1e2)]([{'$match':{'product_category':_0x91a037}},{'$group':{'_id':_0x26d6b4(0x1ea)}}]));}_0x36f40a[_0x26d6b4(0x187)](_0x50b019);}catch(_0x42e616){_0x36f40a['json']({'message':_0x42e616[_0x26d6b4(0x16a)]});}}),router['post']('/filter_product',auth,async(_0x2001c1,_0x44ace3)=>{const _0x25a84d=a0_0x2d759f;try{const {data_choosing:_0x5a6af4,data_selected:_0x4faaf1}=_0x2001c1[_0x25a84d(0x18b)];var _0x4a361b;if(_0x5a6af4==_0x25a84d(0x1a0))_0x4a361b=await product[_0x25a84d(0x1e2)]([{'$match':{'product_category':_0x4faaf1}}]);else{if(_0x5a6af4==_0x25a84d(0x1c6))_0x4a361b=await product[_0x25a84d(0x1e2)]([{'$match':{'brand':_0x4faaf1}}]);else _0x5a6af4==_0x25a84d(0x15d)&&(_0x4a361b=await product['aggregate']([{'$match':{'category':_0x4faaf1}}]));}_0x44ace3[_0x25a84d(0x187)](_0x4a361b);}catch(_0x552812){_0x44ace3['json']({'message':_0x552812[_0x25a84d(0x16a)]});}}),router[a0_0x2d759f(0x1c8)](a0_0x2d759f(0x1eb),auth,async(_0x37b937,_0xcf4b67)=>{const _0x180dd8=a0_0x2d759f,_0x504fb5=_0x37b937[_0x180dd8(0x1f0)],_0x3241c5=await profile['findOne']({'email':_0x504fb5[_0x180dd8(0x145)]}),_0x202a28=await master_shop[_0x180dd8(0x1d6)](),_0x2a859d=await product[_0x180dd8(0x1d6)]();if(_0x202a28[0x0][_0x180dd8(0x170)]==_0x180dd8(0x14b))var _0x3112d2=users[_0x180dd8(0x1e0)];else{if(_0x202a28[0x0]['language']=='Hindi')var _0x3112d2=users[_0x180dd8(0x1d3)];else{if(_0x202a28[0x0]['language']=='German')var _0x3112d2=users['German'];else{if(_0x202a28[0x0][_0x180dd8(0x170)]=='Spanish')var _0x3112d2=users['Spanish'];else{if(_0x202a28[0x0][_0x180dd8(0x170)]=='French')var _0x3112d2=users['French'];else{if(_0x202a28[0x0]['language']==_0x180dd8(0x1db))var _0x3112d2=users[_0x180dd8(0x186)];else{if(_0x202a28[0x0]['language']==_0x180dd8(0x141))var _0x3112d2=users[_0x180dd8(0x141)];else{if(_0x202a28[0x0][_0x180dd8(0x170)]==_0x180dd8(0x1a3))var _0x3112d2=users[_0x180dd8(0x1d5)];}}}}}}}_0xcf4b67['render']('product_barcode_products',{'success':_0x37b937[_0x180dd8(0x156)](_0x180dd8(0x177)),'errors':_0x37b937[_0x180dd8(0x156)]('errors'),'role':_0x504fb5,'profile':_0x3241c5,'products':_0x2a859d,'master_shop':_0x202a28,'language':_0x3112d2});}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x190),auth,async(_0x5c62df,_0xe0bc0f)=>{const _0x331fb5=a0_0x2d759f,_0x5602cc=await product[_0x331fb5(0x1d6)]();_0xe0bc0f[_0x331fb5(0x187)]({'data':_0x5602cc});}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x194),auth,async(_0x47a736,_0x5bc97e)=>{const _0x66f801=a0_0x2d759f;try{const {dataProdCat:_0x2edfca,dataProdIdentity:_0x1c2d25}=_0x47a736['body'];var _0x108ee7;switch(_0x2edfca){case'fg':switch(_0x1c2d25){case'Brands':_0x108ee7=await product[_0x66f801(0x1e2)]([{'$match':{'product_category':_0x66f801(0x198)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x108ee7=await product[_0x66f801(0x1e2)]([{'$match':{'product_category':_0x66f801(0x198)}},{'$group':{'_id':_0x66f801(0x1ea)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x1c2d25){case _0x66f801(0x155):_0x108ee7=await product[_0x66f801(0x1e2)]([{'$match':{'product_category':_0x66f801(0x148)}},{'$group':{'_id':_0x66f801(0x1a8)}},{'$project':{'brand':_0x66f801(0x1a4)}}]);break;case _0x66f801(0x166):_0x108ee7=await product[_0x66f801(0x1e2)]([{'$match':{'product_category':_0x66f801(0x148)}},{'$group':{'_id':_0x66f801(0x1ea)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x5bc97e[_0x66f801(0x187)](_0x108ee7);}catch(_0x3402e7){_0x5bc97e[_0x66f801(0x187)]({'message':_0x3402e7[_0x66f801(0x16a)]});}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x1aa),auth,async(_0x587e5b,_0x20ef36)=>{const _0x31e05e=a0_0x2d759f;try{console[_0x31e05e(0x195)](_0x587e5b[_0x31e05e(0x18b)]);const {prod_cat:_0x2f373d,identity:_0x5271b0,valueData:_0x320183,typeofbarcode:_0x1409c6}=_0x587e5b['body'];let _0x1cdf61;switch(_0x2f373d){case'fg':if(_0x5271b0==_0x31e05e(0x155))_0x1cdf61=await product[_0x31e05e(0x1e2)]([{'$match':{'product_category':_0x31e05e(0x198),'brand':_0x320183}}]);else _0x5271b0=='Category'&&(_0x1cdf61=await product['aggregate']([{'$match':{'product_category':_0x31e05e(0x198),'category':_0x320183}}]));break;case'rm':if(_0x5271b0==_0x31e05e(0x155))_0x1cdf61=await product['aggregate']([{'$match':{'product_category':_0x31e05e(0x148),'brand':_0x320183}}]);else _0x5271b0==_0x31e05e(0x166)&&(_0x1cdf61=await product[_0x31e05e(0x1e2)]([{'$match':{'product_category':_0x31e05e(0x148),'category':_0x320183}}]));break;}const _0x4b57b1=_0x422c2f=>_0x422c2f*0x48,_0x43e838={'width':0x3,'height':0x1},_0x1fa2b6=new PDFDocument({'margin':_0x4b57b1(0.75),'size':[_0x4b57b1(_0x43e838[_0x31e05e(0x1d7)]),_0x4b57b1(_0x43e838[_0x31e05e(0x178)])],'bufferPages':!![]}),_0x1badb7=_0x1cdf61[_0x31e05e(0x1cc)];for(let _0xe284a6=0x0;_0xe284a6<=_0x1badb7;_0xe284a6++){if(_0xe284a6!=_0x1badb7){const _0x3324f5=_0x1cdf61[_0xe284a6][_0x31e05e(0x1e1)],_0x263b07=_0x1cdf61[_0xe284a6][_0x31e05e(0x188)],_0x53e349=_0x1cdf61[_0xe284a6][_0x31e05e(0x1e4)],_0x2e70e0=_0x1cdf61[_0xe284a6][_0x31e05e(0x14d)];var _0x57b73c;switch(_0x1409c6){case'1':_0x57b73c=_0x263b07;break;case'2':_0x57b73c=_0x53e349;break;case'3':_0x57b73c=_0x2e70e0;break;}const _0x189ae6={'width':0xd2,'height':0x64},_0x38ab1c={'width':_0x4b57b1(_0x43e838[_0x31e05e(0x1d7)]),'height':_0x4b57b1(_0x43e838[_0x31e05e(0x178)])},_0x2cd01e=new Canvas();JsBarcode(_0x2cd01e,_0x57b73c,{'format':_0x31e05e(0x14a),'height':_0x189ae6[_0x31e05e(0x178)],'displayValue':!![],'text':_0x57b73c});const _0x565c09=_0x2cd01e[_0x31e05e(0x1ed)](),_0x5677b3=_0x38ab1c[_0x31e05e(0x1d7)]/_0x189ae6['width'],_0xb953ee=_0x38ab1c[_0x31e05e(0x178)]/_0x189ae6[_0x31e05e(0x178)],_0x2b93c6=Math[_0x31e05e(0x18f)](_0x5677b3,_0xb953ee),_0x1b5e19=_0x189ae6[_0x31e05e(0x1d7)]*_0x2b93c6,_0x5ad2f3=_0x189ae6[_0x31e05e(0x178)]*_0x2b93c6,_0x430bbb=(_0x38ab1c['width']-_0x1b5e19)/0x2,_0x332fc5=(_0x38ab1c[_0x31e05e(0x178)]-_0x5ad2f3)/0x2;_0x1fa2b6[_0x31e05e(0x199)](_0x565c09,_0x430bbb,_0x332fc5,{'width':_0x1b5e19,'height':_0x5ad2f3}),_0xe284a6!=_0x1badb7&&_0x1fa2b6[_0x31e05e(0x1f1)]();}}const _0x46eeeb=[];_0x1fa2b6['on'](_0x31e05e(0x137),_0x46eeeb['push'][_0x31e05e(0x149)](_0x46eeeb)),_0x1fa2b6['on']('end',()=>{const _0x51e93f=_0x31e05e,_0x2df1b0=Buffer[_0x51e93f(0x17a)](_0x46eeeb),_0x3022e1=_0x2df1b0[_0x51e93f(0x19d)](_0x51e93f(0x1e3));_0x20ef36[_0x51e93f(0x187)]({'pdfContent':_0x3022e1});}),_0x1fa2b6[_0x31e05e(0x15a)]();}catch(_0x2bf327){_0x20ef36['json']({'message':_0x2bf327[_0x31e05e(0x16a)]});}}),router[a0_0x2d759f(0x13b)](a0_0x2d759f(0x15c),auth,async(_0x56d58a,_0x2f6eec)=>{const _0x241c78=a0_0x2d759f;try{console[_0x241c78(0x195)](_0x56d58a[_0x241c78(0x18b)]);const {prod_cat:_0x491ee4,identity:_0x34723f,valueData:_0x3a2a54}=_0x56d58a[_0x241c78(0x18b)];let _0x53beaf;switch(_0x491ee4){case'fg':if(_0x34723f==_0x241c78(0x155))_0x53beaf=await product[_0x241c78(0x1e2)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x3a2a54}}]);else _0x34723f==_0x241c78(0x166)&&(_0x53beaf=await product[_0x241c78(0x1e2)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x3a2a54}}]));break;case'rm':if(_0x34723f=='Brands')_0x53beaf=await product[_0x241c78(0x1e2)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x3a2a54}}]);else _0x34723f==_0x241c78(0x166)&&(_0x53beaf=await product['aggregate']([{'$match':{'product_category':_0x241c78(0x148),'category':_0x3a2a54}}]));break;}_0x2f6eec['json']({'data':_0x53beaf});}catch(_0x47c392){_0x2f6eec[_0x241c78(0x187)]({'message':_0x47c392['message']});}}),router[a0_0x2d759f(0x13b)]('/print_barcode_single/:id',auth,async(_0x17ebfc,_0x20bcb2)=>{const _0x1ffc9b=a0_0x2d759f;try{const _0x41f3c7=_0x17ebfc[_0x1ffc9b(0x136)]['id'],{copies:_0x3b4cc3,typeofbarcode:_0x4423c7}=_0x17ebfc[_0x1ffc9b(0x18b)];var _0x4434dc=await product['findById'](_0x41f3c7);const _0x3fd30a=_0x4063a2=>_0x4063a2*0x48,_0x1bb40e={'width':0x3,'height':0x1},_0x1bf319=new PDFDocument({'margin':_0x3fd30a(0.75),'size':[_0x3fd30a(_0x1bb40e[_0x1ffc9b(0x1d7)]),_0x3fd30a(_0x1bb40e[_0x1ffc9b(0x178)])],'bufferPages':!![]}),_0x4b4341=_0x3b4cc3,_0x5e59e1=_0x4434dc[_0x1ffc9b(0x1e1)],_0x46a0af=_0x4434dc[_0x1ffc9b(0x188)],_0x3ca77e=_0x4434dc['secondary_code'],_0x454e5c=_0x4434dc['product_code'];let _0x13e032;switch(_0x4423c7){case'1':_0x13e032=_0x46a0af;break;case'2':_0x13e032=_0x3ca77e;break;case'3':_0x13e032=_0x454e5c;break;}const _0x3460ed={'width':0xd2,'height':0x64},_0x1406d7={'width':_0x3fd30a(_0x1bb40e[_0x1ffc9b(0x1d7)]),'height':_0x3fd30a(_0x1bb40e[_0x1ffc9b(0x178)])};for(let _0x290f77=0x1;_0x290f77<=_0x4b4341;_0x290f77++){const _0x3131ff=new Canvas();JsBarcode(_0x3131ff,_0x13e032,{'format':_0x1ffc9b(0x14a),'height':_0x3460ed[_0x1ffc9b(0x178)],'displayValue':!![],'text':_0x13e032});const _0x2b3be5=_0x3131ff['toBuffer'](),_0x21cbb8=_0x1406d7[_0x1ffc9b(0x1d7)]/_0x3460ed['width'],_0x2d8653=_0x1406d7[_0x1ffc9b(0x178)]/_0x3460ed['height'],_0x3ac5bc=Math[_0x1ffc9b(0x18f)](_0x21cbb8,_0x2d8653),_0x410488=_0x3460ed[_0x1ffc9b(0x1d7)]*_0x3ac5bc,_0xad6863=_0x3460ed[_0x1ffc9b(0x178)]*_0x3ac5bc,_0x31f9d3=(_0x1406d7[_0x1ffc9b(0x1d7)]-_0x410488)/0x2,_0x4211a0=(_0x1406d7['height']-_0xad6863)/0x2;_0x1bf319[_0x1ffc9b(0x199)](_0x2b3be5,_0x31f9d3,_0x4211a0,{'width':_0x410488,'height':_0xad6863}),_0x290f77!=_0x4b4341&&_0x1bf319[_0x1ffc9b(0x1f1)]();}const _0x32ba62=[];_0x1bf319['on']('data',_0x32ba62[_0x1ffc9b(0x1dd)][_0x1ffc9b(0x149)](_0x32ba62)),_0x1bf319['on'](_0x1ffc9b(0x15a),()=>{const _0x9bb115=_0x1ffc9b,_0x453d8e=Buffer[_0x9bb115(0x17a)](_0x32ba62),_0x43476c=_0x453d8e['toString']('base64');_0x20bcb2['json']({'pdfContent':_0x43476c});}),_0x1bf319[_0x1ffc9b(0x15a)]();}catch(_0x54738b){_0x20bcb2[_0x1ffc9b(0x187)]({'message':_0x54738b[_0x1ffc9b(0x16a)]});}}),module['exports']=router;