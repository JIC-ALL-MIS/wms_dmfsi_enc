const a0_0x4a3433=a0_0x1be3;(function(_0x2bcaaa,_0x5c193d){const _0x2395b5=a0_0x1be3,_0x2ec5af=_0x2bcaaa();while(!![]){try{const _0x2f381e=parseInt(_0x2395b5(0xc6))/0x1*(parseInt(_0x2395b5(0x8f))/0x2)+-parseInt(_0x2395b5(0xe3))/0x3+parseInt(_0x2395b5(0xdd))/0x4+-parseInt(_0x2395b5(0xc1))/0x5*(-parseInt(_0x2395b5(0x11a))/0x6)+parseInt(_0x2395b5(0xb4))/0x7+-parseInt(_0x2395b5(0xa2))/0x8+parseInt(_0x2395b5(0x74))/0x9*(-parseInt(_0x2395b5(0xc3))/0xa);if(_0x2f381e===_0x5c193d)break;else _0x2ec5af['push'](_0x2ec5af['shift']());}catch(_0x23e571){_0x2ec5af['push'](_0x2ec5af['shift']());}}}(a0_0x3718,0x6cfb0));const express=require(a0_0x4a3433(0xc0)),res=require(a0_0x4a3433(0x126)),app=express(),router=express['Router'](),multer=require(a0_0x4a3433(0x121)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x4a3433(0x112)),auth=require('../middleware/auth'),users=require(a0_0x4a3433(0x9f)),excelJS=require(a0_0x4a3433(0xcc)),xlsx=require(a0_0x4a3433(0xef)),JsBarcode=require(a0_0x4a3433(0x12c)),{Canvas}=require(a0_0x4a3433(0xc9)),PDFDocument=require(a0_0x4a3433(0xc8));router[a0_0x4a3433(0x11c)](a0_0x4a3433(0xdf),auth,async(_0x560edd,_0x468c61)=>{const _0x2d0026=a0_0x4a3433;try{const {username:_0x47a14c,email:_0x391968,role:_0x21404f}=_0x560edd['user'],_0x2b7af0=_0x560edd[_0x2d0026(0x92)],_0xb0c5db=await profile['findOne']({'email':_0x2b7af0[_0x2d0026(0x117)]}),_0x2d7c7b=await master_shop['find']();console[_0x2d0026(0xbf)](_0x2d0026(0x88),_0x2d7c7b);const _0x4019b6=await categories['find']();if(_0x2d7c7b[0x0]['language']==_0x2d0026(0x97))var _0x302f19=users[_0x2d0026(0x67)];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]==_0x2d0026(0x10b))var _0x302f19=users[_0x2d0026(0x10b)];else{if(_0x2d7c7b[0x0]['language']==_0x2d0026(0x124))var _0x302f19=users[_0x2d0026(0x124)];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]==_0x2d0026(0xa0))var _0x302f19=users[_0x2d0026(0xa0)];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]==_0x2d0026(0xe4))var _0x302f19=users['French'];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]==_0x2d0026(0xe9))var _0x302f19=users[_0x2d0026(0xba)];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]==_0x2d0026(0x9d))var _0x302f19=users[_0x2d0026(0x9d)];else{if(_0x2d7c7b[0x0][_0x2d0026(0x107)]=='Arabic\x20(ae)')var _0x302f19=users[_0x2d0026(0x9e)];}}}}}}}_0x468c61[_0x2d0026(0x128)](_0x2d0026(0x6f),{'success':_0x560edd[_0x2d0026(0xd9)](_0x2d0026(0xeb)),'errors':_0x560edd[_0x2d0026(0xd9)]('errors'),'role':_0x2b7af0,'profile':_0xb0c5db,'user':_0x4019b6,'master_shop':_0x2d7c7b,'language':_0x302f19});}catch(_0xd8d0fd){console[_0x2d0026(0xbf)](_0xd8d0fd);}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xdf),auth,async(_0x435d53,_0x1f7304)=>{const _0x22ed7c=a0_0x4a3433;try{const {name:_0x6fac5b,products:_0x5db89e}=_0x435d53[_0x22ed7c(0x114)],_0x2abe53=new categories({'name':_0x6fac5b,'products':_0x5db89e}),_0x80907a=await categories['findOne']({'name':_0x6fac5b});_0x80907a?_0x435d53[_0x22ed7c(0xd9)](_0x22ed7c(0xf6),_0x6fac5b+_0x22ed7c(0xbd)):_0x435d53[_0x22ed7c(0xd9)]('success',_0x6fac5b+_0x22ed7c(0x69));const _0x318d53=await _0x2abe53[_0x22ed7c(0xbe)]();_0x1f7304[_0x22ed7c(0x12a)](_0x22ed7c(0x106));}catch(_0x4111a7){console['log'](_0x4111a7);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x75),auth,async(_0x41c3aa,_0x49f3f9)=>{const _0x1c48cf=a0_0x4a3433;try{const {username:_0x16314a,email:_0x55c848,role:_0x45f0f9}=_0x41c3aa['user'],_0x2e09a2=_0x41c3aa[_0x1c48cf(0x92)],_0x831c2=await profile[_0x1c48cf(0xd5)]({'email':_0x2e09a2[_0x1c48cf(0x117)]}),_0x46e387=await master_shop[_0x1c48cf(0x103)]();console[_0x1c48cf(0xbf)]('master',_0x46e387);const _0x4c5050=_0x41c3aa['params']['id'];console[_0x1c48cf(0xbf)](_0x4c5050);const _0x59617f=await categories[_0x1c48cf(0x83)](_0x4c5050);if(_0x46e387[0x0][_0x1c48cf(0x107)]==_0x1c48cf(0x97))var _0x2233fd=users['English'];else{if(_0x46e387[0x0]['language']=='Hindi')var _0x2233fd=users[_0x1c48cf(0x10b)];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]==_0x1c48cf(0x124))var _0x2233fd=users[_0x1c48cf(0x124)];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]==_0x1c48cf(0xa0))var _0x2233fd=users['Spanish'];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]==_0x1c48cf(0xe4))var _0x2233fd=users[_0x1c48cf(0xe4)];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]=='Portuguese\x20(BR)')var _0x2233fd=users['Portuguese'];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]==_0x1c48cf(0x9d))var _0x2233fd=users[_0x1c48cf(0x9d)];else{if(_0x46e387[0x0][_0x1c48cf(0x107)]=='Arabic\x20(ae)')var _0x2233fd=users[_0x1c48cf(0x9e)];}}}}}}}_0x49f3f9[_0x1c48cf(0x128)](_0x1c48cf(0x6f),{'success':_0x41c3aa['flash'](_0x1c48cf(0xeb)),'errors':_0x41c3aa[_0x1c48cf(0xd9)](_0x1c48cf(0xf6)),'role':_0x2e09a2,'profile':_0x831c2,'master_shop':_0x46e387,'user':_0x59617f,'language':_0x2233fd});}catch(_0x3d5513){console['log'](_0x3d5513);}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0x75),auth,async(_0xc5f622,_0x1ac1a7)=>{const _0x5cc321=a0_0x4a3433;try{const _0x5269f9=_0xc5f622[_0x5cc321(0xb9)]['id'],_0x14986c=await categories[_0x5cc321(0xf0)](_0x5269f9,_0xc5f622[_0x5cc321(0x114)]);_0xc5f622[_0x5cc321(0xd9)](_0x5cc321(0xeb),''+users[_0x5cc321(0x79)]),_0x1ac1a7[_0x5cc321(0x12a)]('/products/categories');}catch(_0x489f40){console[_0x5cc321(0xbf)](_0x489f40);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x8e),auth,async(_0x20d137,_0x2b6ff6)=>{const _0x471cc1=a0_0x4a3433;try{const _0x3486b4=_0x20d137['params']['id'],_0x2a3c29=await categories[_0x471cc1(0xe8)](_0x3486b4);_0x20d137[_0x471cc1(0xd9)](_0x471cc1(0xeb),'categories\x20data\x20delete\x20successfully'),_0x2b6ff6[_0x471cc1(0x12a)](_0x471cc1(0x106));}catch(_0x552c9b){console['log'](_0x552c9b);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0xe6),auth,async(_0x343f6e,_0xee26a0)=>{const _0x38943f=a0_0x4a3433;try{const {username:_0x5a969b,email:_0x4954d8,role:_0x4612b9}=_0x343f6e[_0x38943f(0x92)],_0x46b590=_0x343f6e[_0x38943f(0x92)],_0x40382c=await profile[_0x38943f(0xd5)]({'email':_0x46b590[_0x38943f(0x117)]}),_0x584434=await master_shop['find']();console[_0x38943f(0xbf)](_0x38943f(0x88),_0x584434);const _0x5313fe=await brands['find']();if(_0x584434[0x0][_0x38943f(0x107)]==_0x38943f(0x97))var _0x324f37=users[_0x38943f(0x67)];else{if(_0x584434[0x0][_0x38943f(0x107)]==_0x38943f(0x10b))var _0x324f37=users[_0x38943f(0x10b)];else{if(_0x584434[0x0]['language']==_0x38943f(0x124))var _0x324f37=users[_0x38943f(0x124)];else{if(_0x584434[0x0]['language']==_0x38943f(0xa0))var _0x324f37=users[_0x38943f(0xa0)];else{if(_0x584434[0x0][_0x38943f(0x107)]==_0x38943f(0xe4))var _0x324f37=users[_0x38943f(0xe4)];else{if(_0x584434[0x0][_0x38943f(0x107)]==_0x38943f(0xe9))var _0x324f37=users[_0x38943f(0xba)];else{if(_0x584434[0x0]['language']==_0x38943f(0x9d))var _0x324f37=users['Chinese'];else{if(_0x584434[0x0][_0x38943f(0x107)]=='Arabic\x20(ae)')var _0x324f37=users[_0x38943f(0x9e)];}}}}}}}_0xee26a0[_0x38943f(0x128)](_0x38943f(0xaf),{'success':_0x343f6e[_0x38943f(0xd9)](_0x38943f(0xeb)),'errors':_0x343f6e[_0x38943f(0xd9)](_0x38943f(0xf6)),'role':_0x46b590,'profile':_0x40382c,'master_shop':_0x584434,'user':_0x5313fe,'language':_0x324f37});}catch(_0x3d7697){console[_0x38943f(0xbf)](_0x3d7697);}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xe6),auth,async(_0x585e0e,_0x22aaa3)=>{const _0x49d18a=a0_0x4a3433;try{const {name:_0x2e49f6,products:_0xfdbf0c}=_0x585e0e['body'],_0x406e5d=new brands({'name':_0x2e49f6,'products':_0xfdbf0c}),_0x39b75d=await brands['findOne']({'name':_0x2e49f6});_0x39b75d?_0x585e0e[_0x49d18a(0xd9)]('errors',_0x2e49f6+_0x49d18a(0x7c)):_0x585e0e[_0x49d18a(0xd9)]('success',_0x2e49f6+'\x20brand\x20is\x20add\x20successfully');const _0x56916e=await _0x406e5d[_0x49d18a(0xbe)]();_0x22aaa3['redirect'](_0x49d18a(0xee));}catch(_0x1066e1){console[_0x49d18a(0xbf)](_0x1066e1);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x73),auth,async(_0x1c7b23,_0x18f2d7)=>{const _0x4b05a9=a0_0x4a3433;try{const {username:_0xfc64c1,email:_0x4cd134,role:_0x43d79d}=_0x1c7b23[_0x4b05a9(0x92)],_0x9d70a4=_0x1c7b23[_0x4b05a9(0x92)],_0x5afc28=await profile['findOne']({'email':_0x9d70a4[_0x4b05a9(0x117)]}),_0x2995f5=await master_shop[_0x4b05a9(0x103)]();console[_0x4b05a9(0xbf)]('master',_0x2995f5);const _0x1f0afe=_0x1c7b23[_0x4b05a9(0xb9)]['id'];console[_0x4b05a9(0xbf)](_0x1f0afe);const _0x18fd38=await brands['findById'](_0x1f0afe);if(_0x2995f5[0x0][_0x4b05a9(0x107)]=='English\x20(US)')var _0x18710f=users[_0x4b05a9(0x67)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]==_0x4b05a9(0x10b))var _0x18710f=users[_0x4b05a9(0x10b)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]=='German')var _0x18710f=users[_0x4b05a9(0x124)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]==_0x4b05a9(0xa0))var _0x18710f=users[_0x4b05a9(0xa0)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]=='French')var _0x18710f=users[_0x4b05a9(0xe4)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]==_0x4b05a9(0xe9))var _0x18710f=users[_0x4b05a9(0xba)];else{if(_0x2995f5[0x0]['language']==_0x4b05a9(0x9d))var _0x18710f=users[_0x4b05a9(0x9d)];else{if(_0x2995f5[0x0][_0x4b05a9(0x107)]==_0x4b05a9(0x127))var _0x18710f=users[_0x4b05a9(0x9e)];}}}}}}}_0x18f2d7[_0x4b05a9(0x128)](_0x4b05a9(0xaf),{'success':_0x1c7b23[_0x4b05a9(0xd9)]('success'),'errors':_0x1c7b23['flash'](_0x4b05a9(0xf6)),'role':_0x9d70a4,'profile':_0x5afc28,'master_shop':_0x2995f5,'user':_0x18fd38,'language':_0x18710f});}catch(_0x25e749){console[_0x4b05a9(0xbf)](_0x25e749);}}),router['post']('/brands/:id',auth,async(_0x264a59,_0x3fd9d9)=>{const _0x44d512=a0_0x4a3433;try{const _0xf91e77=_0x264a59[_0x44d512(0xb9)]['id'],_0x9cdb83=await brands['findByIdAndUpdate'](_0xf91e77,_0x264a59[_0x44d512(0x114)]);_0x264a59['flash'](_0x44d512(0xeb),_0x44d512(0x85)),_0x3fd9d9[_0x44d512(0x12a)](_0x44d512(0xee));}catch(_0x3229d4){console[_0x44d512(0xbf)](_0x3229d4);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x120),auth,async(_0x16674a,_0xe9182e)=>{const _0x3350b1=a0_0x4a3433;try{const _0x1d1480=_0x16674a[_0x3350b1(0xb9)]['id'],_0x100d5a=await brands[_0x3350b1(0xe8)](_0x1d1480);_0x16674a[_0x3350b1(0xd9)]('success',_0x3350b1(0x108)),_0xe9182e[_0x3350b1(0x12a)](_0x3350b1(0xee));}catch(_0x4e0e0a){console[_0x3350b1(0xbf)](_0x4e0e0a);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x99),auth,async(_0x1deb97,_0x5814d4)=>{const _0x1b63a8=a0_0x4a3433;try{const {username:_0x242701,email:_0xe11b32,role:_0x15f9cf}=_0x1deb97[_0x1b63a8(0x92)],_0x5b7946=_0x1deb97[_0x1b63a8(0x92)],_0x416419=await profile[_0x1b63a8(0xd5)]({'email':_0x5b7946[_0x1b63a8(0x117)]}),_0x44636c=await master_shop[_0x1b63a8(0x103)]();console[_0x1b63a8(0xbf)]('master',_0x44636c);const _0x36370b=await units['find']();if(_0x44636c[0x0][_0x1b63a8(0x107)]=='English\x20(US)')var _0x318e97=users[_0x1b63a8(0x67)];else{if(_0x44636c[0x0][_0x1b63a8(0x107)]==_0x1b63a8(0x10b))var _0x318e97=users[_0x1b63a8(0x10b)];else{if(_0x44636c[0x0][_0x1b63a8(0x107)]=='German')var _0x318e97=users[_0x1b63a8(0x124)];else{if(_0x44636c[0x0][_0x1b63a8(0x107)]=='Spanish')var _0x318e97=users[_0x1b63a8(0xa0)];else{if(_0x44636c[0x0][_0x1b63a8(0x107)]==_0x1b63a8(0xe4))var _0x318e97=users[_0x1b63a8(0xe4)];else{if(_0x44636c[0x0][_0x1b63a8(0x107)]==_0x1b63a8(0xe9))var _0x318e97=users['Portuguese'];else{if(_0x44636c[0x0]['language']==_0x1b63a8(0x9d))var _0x318e97=users['Chinese'];else{if(_0x44636c[0x0]['language']==_0x1b63a8(0x127))var _0x318e97=users[_0x1b63a8(0x9e)];}}}}}}}_0x5814d4['render'](_0x1b63a8(0xce),{'success':_0x1deb97['flash'](_0x1b63a8(0xeb)),'errors':_0x1deb97['flash']('errors'),'role':_0x5b7946,'profile':_0x416419,'master_shop':_0x44636c,'user':_0x36370b,'language':_0x318e97});}catch(_0x37eec5){console[_0x1b63a8(0xbf)](_0x37eec5);}}),router['post'](a0_0x4a3433(0x99),auth,async(_0x22254e,_0x2a063a)=>{const _0x5c69ea=a0_0x4a3433;try{const {name:_0x3bfccb,secondary_unit:_0x2aefe9,products:_0x21ccf5}=_0x22254e[_0x5c69ea(0x114)],_0x51c932=new units({'name':_0x3bfccb,'secondary_unit':_0x2aefe9,'products':_0x21ccf5}),_0x20778e=await units[_0x5c69ea(0xd5)]({'name':_0x3bfccb});_0x20778e?_0x22254e['flash'](_0x5c69ea(0xf6),_0x3bfccb+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x22254e[_0x5c69ea(0xd9)](_0x5c69ea(0xeb),_0x3bfccb+_0x5c69ea(0xad));const _0x5e9179=await _0x51c932[_0x5c69ea(0xbe)]();_0x2a063a['redirect'](_0x5c69ea(0xfe));}catch(_0x391a8c){console['log'](_0x391a8c);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0xdb),auth,async(_0x3f1358,_0x15dc32)=>{const _0x114066=a0_0x4a3433;try{const {username:_0x5caa2d,email:_0x50c82d,role:_0x2af7d2}=_0x3f1358[_0x114066(0x92)],_0x2ce0bf=_0x3f1358[_0x114066(0x92)],_0x1ef4f3=await profile[_0x114066(0xd5)]({'email':_0x2ce0bf[_0x114066(0x117)]}),_0x5cb8a1=await master_shop['find']();console[_0x114066(0xbf)](_0x114066(0x88),_0x5cb8a1);const _0x3e1a83=_0x3f1358[_0x114066(0xb9)]['id'],_0x36b709=await units['findById'](_0x3e1a83);if(_0x5cb8a1[0x0][_0x114066(0x107)]==_0x114066(0x97))var _0x2fbe53=users[_0x114066(0x67)];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]=='Hindi')var _0x2fbe53=users['Hindi'];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]==_0x114066(0x124))var _0x2fbe53=users[_0x114066(0x124)];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]=='Spanish')var _0x2fbe53=users[_0x114066(0xa0)];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]=='French')var _0x2fbe53=users[_0x114066(0xe4)];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]==_0x114066(0xe9))var _0x2fbe53=users['Portuguese'];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]==_0x114066(0x9d))var _0x2fbe53=users[_0x114066(0x9d)];else{if(_0x5cb8a1[0x0][_0x114066(0x107)]==_0x114066(0x127))var _0x2fbe53=users['Arabic'];}}}}}}}_0x15dc32[_0x114066(0x128)]('units',{'success':_0x3f1358['flash']('success'),'errors':_0x3f1358[_0x114066(0xd9)]('errors'),'role':_0x2ce0bf,'profile':_0x1ef4f3,'master_shop':_0x5cb8a1,'user':_0x36b709,'language':_0x2fbe53});}catch(_0x54a3ef){console[_0x114066(0xbf)](_0x54a3ef);}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xdb),auth,async(_0x1771d3,_0x2be73a)=>{const _0x2084af=a0_0x4a3433;try{const _0x535577=_0x1771d3[_0x2084af(0xb9)]['id'],_0x130ddb=await units[_0x2084af(0xf0)](_0x535577,_0x1771d3['body']);_0x1771d3[_0x2084af(0xd9)](_0x2084af(0xeb),_0x2084af(0xb0)),_0x2be73a['redirect'](_0x2084af(0xfe));}catch(_0x3e6cf8){console[_0x2084af(0xbf)](_0x3e6cf8);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x129),auth,async(_0x47530f,_0x48d2e8)=>{const _0x55618e=a0_0x4a3433;try{const _0x1e8e75=_0x47530f['params']['id'],_0x1e4b99=await units['findByIdAndDelete'](_0x1e8e75);_0x47530f['flash'](_0x55618e(0xeb),_0x55618e(0x7d)),_0x48d2e8[_0x55618e(0x12a)](_0x55618e(0xfe));}catch(_0x37fce0){console[_0x55618e(0xbf)](_0x37fce0);}});function a0_0x1be3(_0xce00cb,_0x25c633){const _0x371881=a0_0x3718();return a0_0x1be3=function(_0x1be3b7,_0x5f0a34){_0x1be3b7=_0x1be3b7-0x65;let _0x38adda=_0x371881[_0x1be3b7];return _0x38adda;},a0_0x1be3(_0xce00cb,_0x25c633);}const storage=multer[a0_0x4a3433(0xde)]({'destination':(_0x8c877c,_0x254f75,_0x243070)=>{const _0x2c9c19=a0_0x4a3433;_0x243070(null,_0x2c9c19(0x7f));},'filename':(_0x509ff5,_0x4757db,_0x2d74db)=>{const _0x29f26b=a0_0x4a3433;_0x2d74db(null,Date[_0x29f26b(0x93)]()+_0x4757db[_0x29f26b(0x8d)]);}}),upload=multer({'storage':storage});function a0_0x3718(){const _0x2dbf24=['end','flash','Enabled','/units/:id','status','3471360bKDwhV','diskStorage','/categories','$product_details.product_stock','Secondary_Units','Primary_Code','1983033EHSRgu','French','$brand','/brands','Raw\x20Materials','findByIdAndDelete','Portuguese\x20(BR)','numeric','success','$secondary_unit','Units','/products/brands','xlsx','findByIdAndUpdate','prod_categ','product_category','edit_product','unit','Products','errors','migrate_product_fule','/print_barcode_filter/','file','Products_category','addWorksheet','stock','/select_data','/products/units','MaxperUnits','barcode\x20user_id','Content-Disposition','toBuffer','find','PCat','alertquantity','/products/categories','language','brand\x20data\x20delete\x20successfully','\x20Edit\x20Successfully','map','Hindi','PAlQty','base64','ProductCode','product_barcode_products','width','/products/view','../models/all_models','maxProdPerUnit','body','Alert_QTY','$_id','email','/print_barcode_filter_search/','\x20<>\x20','114pTgbJd','Secondary_Code','get','sku','exports','$product_stock','/brands/delete/:id','multer','product_details.product_name','message','German','$product_category','express/lib/response','Arabic\x20(ae)','render','/units/delete/:id','redirect','Content-Type','jsbarcode','/barcode/:id','product_docs','setHeader','English','min','\x20categories\x20is\x20add\x20successfully','max_number_per_units','/view/:id','products','/view','json','categories','Category','public/Migration','defaultProduct.avif','/brands/:id','1069074GUhnUd','/categories/:id','bind','readFile','category','categories_edit','categ','columns','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','unit\x20data\x20delete\x20successfully','product_barcode','public/upload','secondary_unit','concat','primary_code','findById','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','brand\x20data\x20update\x20successfully','Workbook','post','master','toString','single','Finished\x20Goods','product\x20edit','originalname','/categories/delete/:id','1678858zRQuDY','Sheets','brand','user','now','write','$category','warehouse','English\x20(US)','edit\x20Product\x20master','/units','/products_import_migrate_file','addPage','$product_docs','Chinese','Arabic','../public/language/languages.json','Spanish','height','5568512qcpOmq','barcode\x20Product\x20master','hello','SheetNames','long','then','aggregate','utils','name','Prod_Cat','push','\x20unit\x20is\x20add\x20successfully','data','brands','unit\x20data\x20update\x20successfully','PUnits','length','/print_barcode_single/:id','5049331XUjwVJ','filename','/filter_product','$product_details.product_name','Product_Name','params','Portuguese','CODE128','public/Migration/','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','save','log','express','54305DtYnuI','/view/add_products','70nlePqO','maxStocks','PBrands','1RgmcEx','PSecondaryUnits','pdfkit-table','canvas','secondary_code','image','exceljs','PName','units','Products\x20warehouse_data','Brands','product_stock','send','Product_Code','Maximum_Stocks','findOne','product_code','forEach'];a0_0x3718=function(){return _0x2dbf24;};return a0_0x3718();}router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x6d),auth,async(_0x30f3cc,_0x3cc31c)=>{const _0x4cf129=a0_0x4a3433;try{const {username:_0x47fd0b,email:_0xaecf2c,role:_0x4af8d4}=_0x30f3cc[_0x4cf129(0x92)],_0x2cef94=_0x30f3cc[_0x4cf129(0x92)],_0x36a497=await profile[_0x4cf129(0xd5)]({'email':_0x2cef94[_0x4cf129(0x117)]}),_0x1aab9a={'year':_0x4cf129(0xea),'month':_0x4cf129(0xa6),'day':_0x4cf129(0xea)},_0x3b2ff9=await master_shop[_0x4cf129(0x103)]();console[_0x4cf129(0xbf)]('Products\x20master',_0x3b2ff9);const _0x11b3be=await product[_0x4cf129(0x103)]();console[_0x4cf129(0xbf)]('Products\x20find_data',_0x11b3be);const _0x415aef=await warehouse[_0x4cf129(0xa8)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x4cf129(0x6c),'localField':_0x4cf129(0x122),'foreignField':_0x4cf129(0xaa),'as':_0x4cf129(0x65)}},{'$unwind':_0x4cf129(0x9c)},{'$project':{'product_name':_0x4cf129(0xb7),'product_stock':_0x4cf129(0xe0)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x4cf129(0x11f)}}}]);console[_0x4cf129(0xbf)](_0x4cf129(0xcf),_0x415aef),_0x415aef[_0x4cf129(0xd7)](_0x57ed73=>{const _0x531a7a=_0x4cf129,_0x3ca517=_0x11b3be[_0x531a7a(0x10a)](_0x16fd8e=>{const _0x854212=_0x531a7a;_0x16fd8e[_0x854212(0xaa)]==_0x57ed73['_id']&&(_0x16fd8e[_0x854212(0xfc)]=parseInt(_0x16fd8e['stock'])+parseInt(_0x57ed73[_0x854212(0xd1)]));});}),console[_0x4cf129(0xbf)]('Products\x20find_data',_0x11b3be);if(_0x3b2ff9[0x0]['language']==_0x4cf129(0x97))var _0x1e15c8=users[_0x4cf129(0x67)];else{if(_0x3b2ff9[0x0][_0x4cf129(0x107)]==_0x4cf129(0x10b))var _0x1e15c8=users['Hindi'];else{if(_0x3b2ff9[0x0][_0x4cf129(0x107)]==_0x4cf129(0x124))var _0x1e15c8=users['German'];else{if(_0x3b2ff9[0x0]['language']==_0x4cf129(0xa0))var _0x1e15c8=users['Spanish'];else{if(_0x3b2ff9[0x0][_0x4cf129(0x107)]==_0x4cf129(0xe4))var _0x1e15c8=users[_0x4cf129(0xe4)];else{if(_0x3b2ff9[0x0][_0x4cf129(0x107)]==_0x4cf129(0xe9))var _0x1e15c8=users[_0x4cf129(0xba)];else{if(_0x3b2ff9[0x0]['language']==_0x4cf129(0x9d))var _0x1e15c8=users['Chinese'];else{if(_0x3b2ff9[0x0][_0x4cf129(0x107)]==_0x4cf129(0x127))var _0x1e15c8=users[_0x4cf129(0x9e)];}}}}}}}_0x3cc31c['render'](_0x4cf129(0x6c),{'success':_0x30f3cc[_0x4cf129(0xd9)](_0x4cf129(0xeb)),'errors':_0x30f3cc[_0x4cf129(0xd9)](_0x4cf129(0xf6)),'alldata':_0x11b3be,'profile':_0x36a497,'master_shop':_0x3b2ff9,'role':_0x2cef94,'product_stock':_0x415aef,'language':_0x1e15c8});}catch(_0x2271cb){console['log'](_0x2271cb);}}),router['get'](a0_0x4a3433(0xc2),auth,async(_0x39525a,_0x1f3222)=>{const _0xcbb4d1=a0_0x4a3433;try{const {username:_0xcd1752,email:_0x2f9cb5,role:_0x298f8e}=_0x39525a[_0xcbb4d1(0x92)],_0x48c359=_0x39525a['user'],_0x2ac79f=await profile[_0xcbb4d1(0xd5)]({'email':_0x48c359[_0xcbb4d1(0x117)]}),_0x1f6ad8=await master_shop[_0xcbb4d1(0x103)]();console[_0xcbb4d1(0xbf)]('master',_0x1f6ad8);const _0x59f987=await categories['find']({}),_0x25fa9c=await brands[_0xcbb4d1(0x103)]({}),_0x3b29ef=await units[_0xcbb4d1(0x103)]({}),_0x124e79=await warehouse[_0xcbb4d1(0x103)]({'status':_0xcbb4d1(0xda)});if(_0x1f6ad8[0x0][_0xcbb4d1(0x107)]==_0xcbb4d1(0x97))var _0x3fc6bf=users['English'];else{if(_0x1f6ad8[0x0][_0xcbb4d1(0x107)]=='Hindi')var _0x3fc6bf=users[_0xcbb4d1(0x10b)];else{if(_0x1f6ad8[0x0]['language']=='German')var _0x3fc6bf=users[_0xcbb4d1(0x124)];else{if(_0x1f6ad8[0x0]['language']==_0xcbb4d1(0xa0))var _0x3fc6bf=users[_0xcbb4d1(0xa0)];else{if(_0x1f6ad8[0x0]['language']==_0xcbb4d1(0xe4))var _0x3fc6bf=users[_0xcbb4d1(0xe4)];else{if(_0x1f6ad8[0x0][_0xcbb4d1(0x107)]=='Portuguese\x20(BR)')var _0x3fc6bf=users[_0xcbb4d1(0xba)];else{if(_0x1f6ad8[0x0][_0xcbb4d1(0x107)]==_0xcbb4d1(0x9d))var _0x3fc6bf=users['Chinese'];else{if(_0x1f6ad8[0x0]['language']==_0xcbb4d1(0x127))var _0x3fc6bf=users['Arabic'];}}}}}}}_0x1f3222['render']('add_product',{'success':_0x39525a['flash'](_0xcbb4d1(0xeb)),'errors':_0x39525a[_0xcbb4d1(0xd9)](_0xcbb4d1(0xf6)),'role':_0x48c359,'profile':_0x2ac79f,'categories':_0x59f987,'brands':_0x25fa9c,'master_shop':_0x1f6ad8,'units':_0x3b29ef,'language':_0x3fc6bf,'find_data':_0x124e79});}catch(_0x6263f5){console[_0xcbb4d1(0xbf)](_0x6263f5);}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xc2),auth,upload[a0_0x4a3433(0x8a)](a0_0x4a3433(0xcb)),async(_0x17a9c5,_0x4ad6f0)=>{const _0x230e29=a0_0x4a3433;try{const {name:_0x504e07,category:_0x2c9e43,brand:_0x278f1f,unit:_0x2bb883,alertquantity:_0x2bb37f,stock:_0x4ecfcc,product_code:_0x52f714,warehouse:_0x4bc3c9,primary_ItemCode:_0x40ed47,second_ItemCode:_0x2826a5,second_unit:_0x4e8bed,maxPerUnit:_0x12d577,MaxPerProduct:_0x447a54}=_0x17a9c5[_0x230e29(0x114)],_0x2a2212=_0x17a9c5[_0x230e29(0xf9)]?.['filename']||_0x230e29(0x72),_0x204edb=new product({'image':_0x2a2212,'name':_0x504e07,'category':_0x2c9e43,'brand':_0x278f1f,'unit':_0x2bb883,'alertquantity':_0x2bb37f,'stock':_0x4ecfcc,'product_code':_0x52f714,'warehouse':_0x4bc3c9,'primary_code':_0x40ed47,'secondary_code':_0x2826a5,'second_unit':_0x4e8bed,'maxStocks':_0x447a54,'maxProdPerUnit':_0x12d577}),_0x1e62bc=await _0x204edb[_0x230e29(0xbe)](),_0xc54ccc=await categories[_0x230e29(0xd5)]({'name':_0x2c9e43});_0xc54ccc[_0x230e29(0x6c)]=parseInt(_0xc54ccc['products'])+0x1,await _0xc54ccc[_0x230e29(0xbe)]();const _0x571d98=await brands[_0x230e29(0xd5)]({'name':_0x278f1f});_0x571d98[_0x230e29(0x6c)]=parseInt(_0x571d98['products'])+0x1,await _0x571d98[_0x230e29(0xbe)]();const _0x31aea0=await units[_0x230e29(0xd5)]({'name':_0x2bb883});_0x31aea0[_0x230e29(0x6c)]=parseInt(_0x31aea0[_0x230e29(0x6c)])+0x1,await _0x31aea0['save'](),_0x17a9c5[_0x230e29(0xd9)]('success','product\x20add\x20successfully'),_0x4ad6f0[_0x230e29(0x12a)]('/products/view');}catch(_0x335373){console[_0x230e29(0xbf)](_0x335373);}}),router[a0_0x4a3433(0x11c)](a0_0x4a3433(0x6b),auth,async(_0x508319,_0x315669)=>{const _0xeb0afb=a0_0x4a3433;try{const {username:_0x536f54,email:_0x5c1946,role:_0x466b5d}=_0x508319[_0xeb0afb(0x92)],_0x440c82=_0x508319['user'],_0x5cf447=await profile['findOne']({'email':_0x440c82[_0xeb0afb(0x117)]}),_0xb8aee5=await master_shop[_0xeb0afb(0x103)]();console['log'](_0xeb0afb(0x98),_0xb8aee5);const _0x2b2834=_0x508319[_0xeb0afb(0xb9)]['id'],_0x1d9e43=await product[_0xeb0afb(0x83)](_0x2b2834),_0x29dbed=await categories[_0xeb0afb(0x103)]({}),_0x4455e7=await brands['find']({}),_0x3c1af9=await units[_0xeb0afb(0x103)]({}),_0xc3b231=await warehouse[_0xeb0afb(0x103)]({'status':_0xeb0afb(0xda)}),_0x1e77ab=await units[_0xeb0afb(0xa8)]([{'$group':{'_id':_0xeb0afb(0x116),'secondaryunit':{'$first':_0xeb0afb(0xec)}}}]);if(_0xb8aee5[0x0][_0xeb0afb(0x107)]==_0xeb0afb(0x97))var _0x366764=users[_0xeb0afb(0x67)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]==_0xeb0afb(0x10b))var _0x366764=users[_0xeb0afb(0x10b)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]=='German')var _0x366764=users[_0xeb0afb(0x124)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]==_0xeb0afb(0xa0))var _0x366764=users[_0xeb0afb(0xa0)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]==_0xeb0afb(0xe4))var _0x366764=users[_0xeb0afb(0xe4)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]=='Portuguese\x20(BR)')var _0x366764=users[_0xeb0afb(0xba)];else{if(_0xb8aee5[0x0]['language']==_0xeb0afb(0x9d))var _0x366764=users[_0xeb0afb(0x9d)];else{if(_0xb8aee5[0x0][_0xeb0afb(0x107)]==_0xeb0afb(0x127))var _0x366764=users[_0xeb0afb(0x9e)];}}}}}}}_0x315669[_0xeb0afb(0x128)](_0xeb0afb(0xf3),{'success':_0x508319['flash'](_0xeb0afb(0xeb)),'errors':_0x508319[_0xeb0afb(0xd9)](_0xeb0afb(0xf6)),'role':_0x440c82,'profile':_0x5cf447,'alldata':_0x1d9e43,'categories':_0x29dbed,'brands':_0x4455e7,'master_shop':_0xb8aee5,'units':_0x3c1af9,'secondunit':_0x1e77ab,'find_data':_0xc3b231,'language':_0x366764});}catch(_0x4e2fb7){console[_0xeb0afb(0xbf)](_0x4e2fb7);}}),router[a0_0x4a3433(0x87)]('/view/:id',auth,upload[a0_0x4a3433(0x8a)](a0_0x4a3433(0xcb)),async(_0x20c915,_0x5732a2)=>{const _0x4f9266=a0_0x4a3433;try{console['log'](_0x4f9266(0xa4));const _0x39fab2=_0x20c915[_0x4f9266(0xb9)]['id'],_0x42c87a=await product[_0x4f9266(0x83)](_0x39fab2),{image:_0x3abe50,name:_0x148023,category:_0x4fb30f,brand:_0x7892ab,sku:_0x46be0a,unit:_0x1fc708,alertquantity:_0x55eb32,product_code:_0x16bcdd,warehouse:_0x4c3da4,primary_ItemCode:_0xd50b1b,second_ItemCode:_0x2a4e12,second_unit:_0x382e12,maxPerUnit:_0x3b6148,MaxPerProduct:_0x4ed194,prod_catdata:_0x41299a}=_0x20c915[_0x4f9266(0x114)];_0x20c915[_0x4f9266(0xf9)]&&(_0x42c87a[_0x4f9266(0xcb)]=_0x20c915['file']['filename']);_0x42c87a[_0x4f9266(0xaa)]=_0x148023,_0x42c87a[_0x4f9266(0x78)]=_0x4fb30f,_0x42c87a[_0x4f9266(0x91)]=_0x7892ab,_0x42c87a[_0x4f9266(0x11d)]=_0x46be0a,_0x42c87a[_0x4f9266(0xf4)]=_0x1fc708,_0x42c87a[_0x4f9266(0x105)]=_0x55eb32,_0x42c87a[_0x4f9266(0xd6)]=_0x16bcdd,_0x42c87a[_0x4f9266(0x96)]=_0x4c3da4,_0x42c87a[_0x4f9266(0x82)]=_0xd50b1b,_0x42c87a['secondary_code']=_0x2a4e12,_0x42c87a[_0x4f9266(0x80)]=_0x382e12,_0x42c87a['maxStocks']=_0x4ed194,_0x42c87a[_0x4f9266(0x113)]=_0x3b6148,_0x42c87a['product_category']=_0x41299a;const _0x1e14eb=await _0x42c87a[_0x4f9266(0xbe)]();console[_0x4f9266(0xbf)](_0x4f9266(0x8c),_0x42c87a),_0x20c915[_0x4f9266(0xd9)](_0x4f9266(0xeb),'product\x20update\x20successfully'),_0x5732a2[_0x4f9266(0x12a)](_0x4f9266(0x111));}catch(_0xc4418d){console[_0x4f9266(0xbf)](_0xc4418d);}}),router['get'](a0_0x4a3433(0x12d),auth,async(_0x2f7fe9,_0x22b649)=>{const _0x4d217e=a0_0x4a3433;try{const {username:_0x3304e4,email:_0x5f09f1,role:_0x5bfd1a}=_0x2f7fe9[_0x4d217e(0x92)],_0x202c18=_0x2f7fe9['user'],_0x3f08b4=await profile[_0x4d217e(0xd5)]({'email':_0x202c18[_0x4d217e(0x117)]}),_0x165d80=await master_shop['find']();console[_0x4d217e(0xbf)](_0x4d217e(0xa3),_0x165d80);const _0x52c353=_0x2f7fe9[_0x4d217e(0xb9)]['id'],_0x1912bc=await product['findById'](_0x52c353);console[_0x4d217e(0xbf)](_0x4d217e(0x100),_0x1912bc);if(_0x165d80[0x0][_0x4d217e(0x107)]==_0x4d217e(0x97))var _0x434ca8=users[_0x4d217e(0x67)];else{if(_0x165d80[0x0][_0x4d217e(0x107)]==_0x4d217e(0x10b))var _0x434ca8=users['Hindi'];else{if(_0x165d80[0x0][_0x4d217e(0x107)]==_0x4d217e(0x124))var _0x434ca8=users[_0x4d217e(0x124)];else{if(_0x165d80[0x0][_0x4d217e(0x107)]==_0x4d217e(0xa0))var _0x434ca8=users['Spanish'];else{if(_0x165d80[0x0]['language']==_0x4d217e(0xe4))var _0x434ca8=users[_0x4d217e(0xe4)];else{if(_0x165d80[0x0][_0x4d217e(0x107)]==_0x4d217e(0xe9))var _0x434ca8=users['Portuguese'];else{if(_0x165d80[0x0][_0x4d217e(0x107)]=='Chinese')var _0x434ca8=users[_0x4d217e(0x9d)];else{if(_0x165d80[0x0][_0x4d217e(0x107)]=='Arabic\x20(ae)')var _0x434ca8=users[_0x4d217e(0x9e)];}}}}}}}_0x22b649[_0x4d217e(0x128)](_0x4d217e(0x7e),{'success':_0x2f7fe9[_0x4d217e(0xd9)](_0x4d217e(0xeb)),'errors':_0x2f7fe9[_0x4d217e(0xd9)](_0x4d217e(0xf6)),'role':_0x202c18,'profile':_0x3f08b4,'alldata':_0x1912bc,'master_shop':_0x165d80,'language':_0x434ca8});}catch(_0x4b7bca){console[_0x4d217e(0xbf)](_0x4b7bca);}}),router[a0_0x4a3433(0x11c)]('/products_export_migrate_file',auth,async(_0x35728c,_0x59b265)=>{const _0x3bf83a=a0_0x4a3433;try{const _0x24ba64=new excelJS[(_0x3bf83a(0x86))](),_0x26e7ba=_0x24ba64[_0x3bf83a(0xfb)](_0x3bf83a(0xf5));return _0x26e7ba[_0x3bf83a(0x7b)]=[{'header':_0x3bf83a(0xb8),'key':_0x3bf83a(0xcd),'width':0xa},{'header':_0x3bf83a(0xd0),'key':_0x3bf83a(0xc5),'width':0xa},{'header':_0x3bf83a(0xed),'key':_0x3bf83a(0xb1),'width':0xa},{'header':'Secondary_Units','key':_0x3bf83a(0xc7),'width':0xa},{'header':_0x3bf83a(0x6a),'key':_0x3bf83a(0xff),'width':0xa},{'header':_0x3bf83a(0xe2),'key':_0x3bf83a(0x10e),'width':0xa},{'header':_0x3bf83a(0x11b),'key':_0x3bf83a(0x10e),'width':0xa},{'header':_0x3bf83a(0xd3),'key':_0x3bf83a(0x10e),'width':0xa},{'header':'Category','key':_0x3bf83a(0x104),'width':0xa},{'header':'Alert_QTY','key':_0x3bf83a(0x10c),'width':0xa},{'header':_0x3bf83a(0xd4),'key':_0x3bf83a(0x10c),'width':0xa},{'header':_0x3bf83a(0xfa),'key':_0x3bf83a(0xab),'width':0xa}],_0x59b265[_0x3bf83a(0x66)](_0x3bf83a(0x12b),_0x3bf83a(0x84)),_0x59b265[_0x3bf83a(0x66)](_0x3bf83a(0x101),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x24ba64[_0x3bf83a(0xef)][_0x3bf83a(0x94)](_0x59b265)[_0x3bf83a(0xa7)](()=>{const _0x34e502=_0x3bf83a;_0x59b265[_0x34e502(0xdc)](0xc8);});}catch(_0x398926){_0x59b265[_0x3bf83a(0xdc)](0x190)[_0x3bf83a(0xd2)](_0x398926);}});const storage1=multer[a0_0x4a3433(0xde)]({'destination':(_0x53633f,_0x102527,_0x243b93)=>{const _0x4d9a63=a0_0x4a3433;_0x243b93(null,_0x4d9a63(0x71));},'filename':(_0x17084a,_0x36e2dc,_0x5a438c)=>{const _0x467a13=a0_0x4a3433;_0x5a438c(null,Date[_0x467a13(0x93)]()+_0x36e2dc[_0x467a13(0x8d)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x4a3433(0x9a),auth,uploadMigrate[a0_0x4a3433(0x8a)](a0_0x4a3433(0xf7)),async(_0x3008eb,_0x561817)=>{const _0x29b4bb=a0_0x4a3433,_0x147106=_0x3008eb[_0x29b4bb(0xf9)][_0x29b4bb(0xb5)],_0xde0139=await xlsx[_0x29b4bb(0x77)](_0x29b4bb(0xbc)+_0x147106);let _0x5db485=_0xde0139[_0x29b4bb(0xa5)],_0x5b408e=xlsx[_0x29b4bb(0xa9)]['sheet_to_json'](_0xde0139[_0x29b4bb(0x90)][_0x5db485[0x0]]);for(const _0x42a9d of _0x5b408e){const _0x30dc3f=_0x42a9d['Product_Name'],_0x10d5c3=_0x42a9d['Brands'],_0x250175=_0x42a9d[_0x29b4bb(0xed)],_0x3565e2=_0x42a9d[_0x29b4bb(0xe1)],_0x305359=_0x42a9d[_0x29b4bb(0xd3)],_0x14e858=_0x42a9d[_0x29b4bb(0x70)],_0xa182b6=_0x42a9d[_0x29b4bb(0x115)],_0x9c097b=_0x42a9d[_0x29b4bb(0xe2)],_0x200a0c=_0x42a9d[_0x29b4bb(0x11b)],_0x636104=_0x42a9d[_0x29b4bb(0xd4)],_0x204e15=_0x42a9d[_0x29b4bb(0x6a)],_0x239978=_0x42a9d[_0x29b4bb(0xfa)];try{let _0x302349=await categories[_0x29b4bb(0xd5)]({'name':_0x14e858});if(!_0x302349){const _0x5a5b88=new categories({'name':_0x14e858,'products':'0'});_0x302349=await _0x5a5b88[_0x29b4bb(0xbe)]();}let _0xfab643=await brands[_0x29b4bb(0xd5)]({'name':_0x10d5c3});if(!_0xfab643){const _0x18aa58=new brands({'name':_0x10d5c3,'products':'0'});_0xfab643=await _0x18aa58[_0x29b4bb(0xbe)]();}let _0x4561aa=await units[_0x29b4bb(0xd5)]({'name':_0x250175,'secondary_unit':_0x3565e2});if(!_0x4561aa){const _0x1d4e90=new units({'name':_0x250175,'secondary_unit':_0x3565e2,'products':'0'});_0x4561aa=await _0x1d4e90[_0x29b4bb(0xbe)]();}const _0xdd8d7b=await product[_0x29b4bb(0x103)]({'name':_0x30dc3f,'category':_0x302349[_0x29b4bb(0xaa)],'brand':_0xfab643['name'],'secondary_unit':_0x4561aa[_0x29b4bb(0x80)],'product_code':_0x305359});console[_0x29b4bb(0xbf)](_0xdd8d7b['length']+_0x29b4bb(0x119)+_0x302349[_0x29b4bb(0xaa)]+_0x29b4bb(0x119)+_0xfab643['name']+_0x29b4bb(0x119)+_0x4561aa[_0x29b4bb(0x80)]+'\x20<>\x20'+_0x305359+_0x29b4bb(0x119)+_0x30dc3f);if(_0xdd8d7b[_0x29b4bb(0xb2)]===0x0){const _0x1460ef=new product({'image':_0x29b4bb(0x72),'name':_0x30dc3f,'category':_0x302349[_0x29b4bb(0xaa)],'brand':_0xfab643['name'],'unit':_0x4561aa[_0x29b4bb(0xaa)],'alertquantity':_0xa182b6,'product_code':_0x305359,'secondary_unit':_0x4561aa[_0x29b4bb(0x80)],'primary_code':_0x9c097b,'secondary_code':_0x200a0c,'maxStocks':_0x636104,'maxProdPerUnit':_0x204e15,'product_category':_0x239978}),_0x36c7fa=await _0x1460ef[_0x29b4bb(0xbe)]();_0x302349[_0x29b4bb(0x6c)]=parseInt(_0x302349['products'])+0x1,await _0x302349[_0x29b4bb(0xbe)](),_0xfab643[_0x29b4bb(0x6c)]=parseInt(_0xfab643[_0x29b4bb(0x6c)])+0x1,await _0xfab643['save'](),_0x4561aa['products']=parseInt(_0x4561aa[_0x29b4bb(0x6c)])+0x1,await _0x4561aa[_0x29b4bb(0xbe)](),_0x3008eb[_0x29b4bb(0xd9)](_0x29b4bb(0xeb),_0x30dc3f+'\x20added\x20successfully');}else{console[_0x29b4bb(0xbf)](_0xdd8d7b[0x0]);const _0x1d0b33=_0xdd8d7b[0x0];_0x1d0b33[_0x29b4bb(0x78)]=_0x302349[_0x29b4bb(0xaa)],_0x1d0b33[_0x29b4bb(0x91)]=_0xfab643[_0x29b4bb(0xaa)],_0x1d0b33[_0x29b4bb(0xf4)]=_0x4561aa[_0x29b4bb(0xaa)],_0x1d0b33[_0x29b4bb(0x105)]=_0xa182b6,_0x1d0b33[_0x29b4bb(0xd6)]=_0x305359,_0x1d0b33[_0x29b4bb(0x80)]=_0x4561aa[_0x29b4bb(0x80)],_0x1d0b33['primary_code']=_0x9c097b,_0x1d0b33[_0x29b4bb(0xca)]=_0x200a0c,_0x1d0b33[_0x29b4bb(0xc4)]=_0x636104,_0x1d0b33[_0x29b4bb(0x113)]=_0x204e15,_0x1d0b33[_0x29b4bb(0xf2)]=_0x239978;const _0x29b0bb=await _0x1d0b33['save']();_0x3008eb['flash'](_0x29b4bb(0xeb),_0x29b0bb[_0x29b4bb(0xaa)]+_0x29b4bb(0x109));}}catch(_0x1cf924){_0x561817['status'](0x1f4)[_0x29b4bb(0x6e)]({'proderror':_0x1cf924[_0x29b4bb(0x123)],'aproduct':_0x30dc3f});}}_0x561817['redirect']('/products/view');}),router['post'](a0_0x4a3433(0xfd),auth,async(_0x3bf819,_0x99314)=>{const _0x410cd4=a0_0x4a3433;try{console['log'](_0x3bf819[_0x410cd4(0x114)]);const {data_cateory:_0x51ddc5,datachoose:_0x105ada}=_0x3bf819[_0x410cd4(0x114)];var _0x1feff0;if(_0x105ada==_0x410cd4(0xf1))_0x1feff0=await product[_0x410cd4(0xa8)]([{'$group':{'_id':_0x410cd4(0x125)}}]);else{if(_0x105ada==_0x410cd4(0xaf))_0x1feff0=await product['aggregate']([{'$match':{'product_category':_0x51ddc5}},{'$group':{'_id':_0x410cd4(0xe5)}}]);else _0x105ada==_0x410cd4(0x7a)&&(_0x1feff0=await product[_0x410cd4(0xa8)]([{'$match':{'product_category':_0x51ddc5}},{'$group':{'_id':_0x410cd4(0x95)}}]));}_0x99314['json'](_0x1feff0);}catch(_0x494591){_0x99314[_0x410cd4(0x6e)]({'message':_0x494591[_0x410cd4(0x123)]});}}),router['post'](a0_0x4a3433(0xb6),auth,async(_0x432c17,_0x35ff2f)=>{const _0x26f561=a0_0x4a3433;try{const {data_choosing:_0x12e38f,data_selected:_0x491fe2}=_0x432c17[_0x26f561(0x114)];var _0x9d7d21;if(_0x12e38f=='prod_categ')_0x9d7d21=await product['aggregate']([{'$match':{'product_category':_0x491fe2}}]);else{if(_0x12e38f==_0x26f561(0xaf))_0x9d7d21=await product['aggregate']([{'$match':{'brand':_0x491fe2}}]);else _0x12e38f==_0x26f561(0x7a)&&(_0x9d7d21=await product['aggregate']([{'$match':{'category':_0x491fe2}}]));}_0x35ff2f['json'](_0x9d7d21);}catch(_0x42b4aa){_0x35ff2f[_0x26f561(0x6e)]({'message':_0x42b4aa[_0x26f561(0x123)]});}}),router[a0_0x4a3433(0x11c)]('/print_barcode',auth,async(_0x4337f1,_0x23ebc8)=>{const _0x21f114=a0_0x4a3433,_0x4a3fdc=_0x4337f1[_0x21f114(0x92)],_0xbca8e9=await profile[_0x21f114(0xd5)]({'email':_0x4a3fdc['email']}),_0x3f3f79=await master_shop[_0x21f114(0x103)](),_0x56177d=await product[_0x21f114(0x103)]();if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0x97))var _0x571b70=users[_0x21f114(0x67)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0x10b))var _0x571b70=users['Hindi'];else{if(_0x3f3f79[0x0]['language']=='German')var _0x571b70=users[_0x21f114(0x124)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0xa0))var _0x571b70=users[_0x21f114(0xa0)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0xe4))var _0x571b70=users[_0x21f114(0xe4)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0xe9))var _0x571b70=users[_0x21f114(0xba)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]==_0x21f114(0x9d))var _0x571b70=users[_0x21f114(0x9d)];else{if(_0x3f3f79[0x0][_0x21f114(0x107)]=='Arabic\x20(ae)')var _0x571b70=users[_0x21f114(0x9e)];}}}}}}}_0x23ebc8[_0x21f114(0x128)](_0x21f114(0x10f),{'success':_0x4337f1['flash']('success'),'errors':_0x4337f1[_0x21f114(0xd9)](_0x21f114(0xf6)),'role':_0x4a3fdc,'profile':_0xbca8e9,'products':_0x56177d,'master_shop':_0x3f3f79,'language':_0x571b70});}),router[a0_0x4a3433(0x87)]('/barcode_data',auth,async(_0x30350d,_0x380620)=>{const _0x280ec0=a0_0x4a3433,_0x106f10=await product[_0x280ec0(0x103)]();_0x380620['json']({'data':_0x106f10});}),router[a0_0x4a3433(0x87)]('/barcode_filter',auth,async(_0x3e549e,_0x40bc62)=>{const _0x3170f5=a0_0x4a3433;try{const {dataProdCat:_0x2ba5c1,dataProdIdentity:_0x416057}=_0x3e549e[_0x3170f5(0x114)];var _0x131915;switch(_0x2ba5c1){case'fg':switch(_0x416057){case'Brands':_0x131915=await product[_0x3170f5(0xa8)]([{'$match':{'product_category':_0x3170f5(0x8b)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x3170f5(0x116)}}]);break;case _0x3170f5(0x70):_0x131915=await product[_0x3170f5(0xa8)]([{'$match':{'product_category':_0x3170f5(0x8b)}},{'$group':{'_id':_0x3170f5(0x95)}},{'$project':{'category':_0x3170f5(0x116)}}]);break;}break;case'rm':switch(_0x416057){case _0x3170f5(0xd0):_0x131915=await product[_0x3170f5(0xa8)]([{'$match':{'product_category':_0x3170f5(0xe7)}},{'$group':{'_id':_0x3170f5(0xe5)}},{'$project':{'brand':'$_id'}}]);break;case _0x3170f5(0x70):_0x131915=await product[_0x3170f5(0xa8)]([{'$match':{'product_category':_0x3170f5(0xe7)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x3170f5(0x116)}}]);break;}break;}_0x40bc62[_0x3170f5(0x6e)](_0x131915);}catch(_0x20a817){_0x40bc62[_0x3170f5(0x6e)]({'message':_0x20a817['message']});}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xf8),auth,async(_0x3c2176,_0x26bcdf)=>{const _0x2bfd03=a0_0x4a3433;try{console['log'](_0x3c2176['body']);const {prod_cat:_0x32ef1b,identity:_0x414072,valueData:_0x20e1b4,typeofbarcode:_0x45b810}=_0x3c2176['body'];let _0x499cfc;switch(_0x32ef1b){case'fg':if(_0x414072==_0x2bfd03(0xd0))_0x499cfc=await product[_0x2bfd03(0xa8)]([{'$match':{'product_category':_0x2bfd03(0x8b),'brand':_0x20e1b4}}]);else _0x414072==_0x2bfd03(0x70)&&(_0x499cfc=await product[_0x2bfd03(0xa8)]([{'$match':{'product_category':_0x2bfd03(0x8b),'category':_0x20e1b4}}]));break;case'rm':if(_0x414072==_0x2bfd03(0xd0))_0x499cfc=await product[_0x2bfd03(0xa8)]([{'$match':{'product_category':_0x2bfd03(0xe7),'brand':_0x20e1b4}}]);else _0x414072==_0x2bfd03(0x70)&&(_0x499cfc=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x20e1b4}}]));break;}const _0x2648b1=_0x38e86c=>_0x38e86c*0x48,_0x162b8e={'width':0x3,'height':0x1},_0x515f4b=new PDFDocument({'margin':_0x2648b1(0.75),'size':[_0x2648b1(_0x162b8e[_0x2bfd03(0x110)]),_0x2648b1(_0x162b8e[_0x2bfd03(0xa1)])],'bufferPages':!![]}),_0x1ea728=_0x499cfc[_0x2bfd03(0xb2)];for(let _0x31cc50=0x0;_0x31cc50<=_0x1ea728;_0x31cc50++){if(_0x31cc50!=_0x1ea728){const _0x54a84a=_0x499cfc[_0x31cc50][_0x2bfd03(0xaa)],_0x453717=_0x499cfc[_0x31cc50]['primary_code'],_0x51bbfd=_0x499cfc[_0x31cc50][_0x2bfd03(0xca)],_0x43def6=_0x499cfc[_0x31cc50]['product_code'];var _0x2f4880;switch(_0x45b810){case'1':_0x2f4880=_0x453717;break;case'2':_0x2f4880=_0x51bbfd;break;case'3':_0x2f4880=_0x43def6;break;}const _0x5ceb8f={'width':0xd2,'height':0x64},_0x47a26b={'width':_0x2648b1(_0x162b8e[_0x2bfd03(0x110)]),'height':_0x2648b1(_0x162b8e[_0x2bfd03(0xa1)])},_0x350b38=new Canvas();JsBarcode(_0x350b38,_0x2f4880,{'format':_0x2bfd03(0xbb),'height':_0x5ceb8f[_0x2bfd03(0xa1)],'displayValue':!![],'text':_0x2f4880});const _0x4fe8ce=_0x350b38[_0x2bfd03(0x102)](),_0x389692=_0x47a26b[_0x2bfd03(0x110)]/_0x5ceb8f[_0x2bfd03(0x110)],_0xc94f63=_0x47a26b['height']/_0x5ceb8f['height'],_0x4cfa01=Math[_0x2bfd03(0x68)](_0x389692,_0xc94f63),_0x4c0613=_0x5ceb8f[_0x2bfd03(0x110)]*_0x4cfa01,_0x35aa35=_0x5ceb8f[_0x2bfd03(0xa1)]*_0x4cfa01,_0x34bb50=(_0x47a26b['width']-_0x4c0613)/0x2,_0x3d7dd2=(_0x47a26b[_0x2bfd03(0xa1)]-_0x35aa35)/0x2;_0x515f4b[_0x2bfd03(0xcb)](_0x4fe8ce,_0x34bb50,_0x3d7dd2,{'width':_0x4c0613,'height':_0x35aa35}),_0x31cc50!=_0x1ea728&&_0x515f4b[_0x2bfd03(0x9b)]();}}const _0x3be717=[];_0x515f4b['on'](_0x2bfd03(0xae),_0x3be717[_0x2bfd03(0xac)][_0x2bfd03(0x76)](_0x3be717)),_0x515f4b['on']('end',()=>{const _0x3b6480=_0x2bfd03,_0x15a2a0=Buffer[_0x3b6480(0x81)](_0x3be717),_0x6bd85c=_0x15a2a0[_0x3b6480(0x89)]('base64');_0x26bcdf['json']({'pdfContent':_0x6bd85c});}),_0x515f4b[_0x2bfd03(0xd8)]();}catch(_0x54940a){_0x26bcdf['json']({'message':_0x54940a['message']});}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0x118),auth,async(_0x47c9e4,_0x50c4d3)=>{const _0x334216=a0_0x4a3433;try{console[_0x334216(0xbf)](_0x47c9e4['body']);const {prod_cat:_0x550c4e,identity:_0xce0203,valueData:_0x1f3d9f}=_0x47c9e4[_0x334216(0x114)];let _0xecddc8;switch(_0x550c4e){case'fg':if(_0xce0203==_0x334216(0xd0))_0xecddc8=await product[_0x334216(0xa8)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x1f3d9f}}]);else _0xce0203==_0x334216(0x70)&&(_0xecddc8=await product[_0x334216(0xa8)]([{'$match':{'product_category':_0x334216(0x8b),'category':_0x1f3d9f}}]));break;case'rm':if(_0xce0203=='Brands')_0xecddc8=await product[_0x334216(0xa8)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x1f3d9f}}]);else _0xce0203=='Category'&&(_0xecddc8=await product[_0x334216(0xa8)]([{'$match':{'product_category':_0x334216(0xe7),'category':_0x1f3d9f}}]));break;}_0x50c4d3['json']({'data':_0xecddc8});}catch(_0x4a2ece){_0x50c4d3[_0x334216(0x6e)]({'message':_0x4a2ece[_0x334216(0x123)]});}}),router[a0_0x4a3433(0x87)](a0_0x4a3433(0xb3),auth,async(_0x487c19,_0x2e9648)=>{const _0x49b61e=a0_0x4a3433;try{const _0x2491aa=_0x487c19['params']['id'],{copies:_0x154be4,typeofbarcode:_0x41c639}=_0x487c19[_0x49b61e(0x114)];var _0x9fd3e8=await product[_0x49b61e(0x83)](_0x2491aa);const _0x7ff6af=_0x435819=>_0x435819*0x48,_0x2da002={'width':0x3,'height':0x1},_0x59603d=new PDFDocument({'margin':_0x7ff6af(0.75),'size':[_0x7ff6af(_0x2da002[_0x49b61e(0x110)]),_0x7ff6af(_0x2da002[_0x49b61e(0xa1)])],'bufferPages':!![]}),_0x273a76=_0x154be4,_0x4fee00=_0x9fd3e8[_0x49b61e(0xaa)],_0xe47435=_0x9fd3e8['primary_code'],_0x283d64=_0x9fd3e8[_0x49b61e(0xca)],_0x2e988b=_0x9fd3e8[_0x49b61e(0xd6)];let _0x5ef8a4;switch(_0x41c639){case'1':_0x5ef8a4=_0xe47435;break;case'2':_0x5ef8a4=_0x283d64;break;case'3':_0x5ef8a4=_0x2e988b;break;}const _0x5eed9d={'width':0xd2,'height':0x64},_0x2af76e={'width':_0x7ff6af(_0x2da002[_0x49b61e(0x110)]),'height':_0x7ff6af(_0x2da002[_0x49b61e(0xa1)])};for(let _0x2b9251=0x1;_0x2b9251<=_0x273a76;_0x2b9251++){const _0x2891bf=new Canvas();JsBarcode(_0x2891bf,_0x5ef8a4,{'format':_0x49b61e(0xbb),'height':_0x5eed9d[_0x49b61e(0xa1)],'displayValue':!![],'text':_0x5ef8a4});const _0x2da523=_0x2891bf[_0x49b61e(0x102)](),_0x1ec711=_0x2af76e[_0x49b61e(0x110)]/_0x5eed9d[_0x49b61e(0x110)],_0xc25c9c=_0x2af76e['height']/_0x5eed9d[_0x49b61e(0xa1)],_0x282221=Math['min'](_0x1ec711,_0xc25c9c),_0x9f6226=_0x5eed9d[_0x49b61e(0x110)]*_0x282221,_0x1d6979=_0x5eed9d[_0x49b61e(0xa1)]*_0x282221,_0x4c8032=(_0x2af76e[_0x49b61e(0x110)]-_0x9f6226)/0x2,_0x273d57=(_0x2af76e[_0x49b61e(0xa1)]-_0x1d6979)/0x2;_0x59603d[_0x49b61e(0xcb)](_0x2da523,_0x4c8032,_0x273d57,{'width':_0x9f6226,'height':_0x1d6979}),_0x2b9251!=_0x273a76&&_0x59603d[_0x49b61e(0x9b)]();}const _0x5ae563=[];_0x59603d['on'](_0x49b61e(0xae),_0x5ae563['push']['bind'](_0x5ae563)),_0x59603d['on'](_0x49b61e(0xd8),()=>{const _0xc01842=_0x49b61e,_0x14cb88=Buffer[_0xc01842(0x81)](_0x5ae563),_0x3de95a=_0x14cb88[_0xc01842(0x89)](_0xc01842(0x10d));_0x2e9648[_0xc01842(0x6e)]({'pdfContent':_0x3de95a});}),_0x59603d[_0x49b61e(0xd8)]();}catch(_0x26b0ce){_0x2e9648[_0x49b61e(0x6e)]({'message':_0x26b0ce[_0x49b61e(0x123)]});}}),module[a0_0x4a3433(0x11e)]=router;