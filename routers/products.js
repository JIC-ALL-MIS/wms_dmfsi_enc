function a0_0x3249(_0x24496b,_0x1d5fc5){const _0x3987ef=a0_0x3987();return a0_0x3249=function(_0x324911,_0x6ba9a9){_0x324911=_0x324911-0xe1;let _0x1119fd=_0x3987ef[_0x324911];return _0x1119fd;},a0_0x3249(_0x24496b,_0x1d5fc5);}const a0_0x23152f=a0_0x3249;(function(_0x2b1d21,_0x308403){const _0x4733f0=a0_0x3249,_0x24a624=_0x2b1d21();while(!![]){try{const _0x42bf9d=parseInt(_0x4733f0(0x137))/0x1+parseInt(_0x4733f0(0x144))/0x2*(parseInt(_0x4733f0(0x17d))/0x3)+-parseInt(_0x4733f0(0xe3))/0x4+-parseInt(_0x4733f0(0x18f))/0x5*(parseInt(_0x4733f0(0x174))/0x6)+parseInt(_0x4733f0(0x17a))/0x7+parseInt(_0x4733f0(0x145))/0x8*(parseInt(_0x4733f0(0x143))/0x9)+parseInt(_0x4733f0(0x156))/0xa*(-parseInt(_0x4733f0(0x100))/0xb);if(_0x42bf9d===_0x308403)break;else _0x24a624['push'](_0x24a624['shift']());}catch(_0x708f67){_0x24a624['push'](_0x24a624['shift']());}}}(a0_0x3987,0x6fbfe));const express=require(a0_0x23152f(0x13e)),res=require(a0_0x23152f(0x171)),app=express(),router=express[a0_0x23152f(0x102)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x23152f(0x192)),auth=require(a0_0x23152f(0x14c)),users=require(a0_0x23152f(0xe8)),excelJS=require(a0_0x23152f(0x181)),xlsx=require('xlsx'),JsBarcode=require(a0_0x23152f(0x148)),{Canvas}=require(a0_0x23152f(0x108)),PDFDocument=require(a0_0x23152f(0x11e));router[a0_0x23152f(0x1a2)](a0_0x23152f(0x136),auth,async(_0xd78e26,_0x192a5c)=>{const _0x11456e=a0_0x23152f;try{const {username:_0x14fe92,email:_0x46290b,role:_0x3ee168}=_0xd78e26[_0x11456e(0x175)],_0x1201a2=_0xd78e26[_0x11456e(0x175)],_0x200a1f=await profile['findOne']({'email':_0x1201a2[_0x11456e(0x13c)]}),_0x253616=await master_shop[_0x11456e(0xf2)]();console[_0x11456e(0x11a)](_0x11456e(0x15b),_0x253616);const _0x3425d3=await categories['find']();if(_0x253616[0x0][_0x11456e(0xe7)]==_0x11456e(0x124))var _0x3e222e=users['English'];else{if(_0x253616[0x0][_0x11456e(0xe7)]=='Hindi')var _0x3e222e=users[_0x11456e(0x10e)];else{if(_0x253616[0x0][_0x11456e(0xe7)]==_0x11456e(0x130))var _0x3e222e=users[_0x11456e(0x130)];else{if(_0x253616[0x0][_0x11456e(0xe7)]=='Spanish')var _0x3e222e=users['Spanish'];else{if(_0x253616[0x0][_0x11456e(0xe7)]==_0x11456e(0x104))var _0x3e222e=users[_0x11456e(0x104)];else{if(_0x253616[0x0][_0x11456e(0xe7)]==_0x11456e(0xeb))var _0x3e222e=users[_0x11456e(0x19f)];else{if(_0x253616[0x0]['language']==_0x11456e(0x19e))var _0x3e222e=users[_0x11456e(0x19e)];else{if(_0x253616[0x0][_0x11456e(0xe7)]==_0x11456e(0x131))var _0x3e222e=users[_0x11456e(0x19a)];}}}}}}}_0x192a5c[_0x11456e(0xea)](_0x11456e(0xff),{'success':_0xd78e26[_0x11456e(0x127)](_0x11456e(0xf9)),'errors':_0xd78e26['flash'](_0x11456e(0x153)),'role':_0x1201a2,'profile':_0x200a1f,'user':_0x3425d3,'master_shop':_0x253616,'language':_0x3e222e});}catch(_0x5b8bd6){console[_0x11456e(0x11a)](_0x5b8bd6);}}),router[a0_0x23152f(0x185)](a0_0x23152f(0x136),auth,async(_0x5671eb,_0x4440e5)=>{const _0x235343=a0_0x23152f;try{const {name:_0x3e1a92,products:_0x2636e5}=_0x5671eb[_0x235343(0xf0)],_0x2b53a4=new categories({'name':_0x3e1a92,'products':_0x2636e5}),_0x546b94=await categories[_0x235343(0x194)]({'name':_0x3e1a92});_0x546b94?_0x5671eb['flash'](_0x235343(0x153),_0x3e1a92+_0x235343(0x10d)):_0x5671eb['flash'](_0x235343(0xf9),_0x3e1a92+_0x235343(0x120));const _0x1299d4=await _0x2b53a4[_0x235343(0xf1)]();_0x4440e5['redirect'](_0x235343(0x161));}catch(_0x40ce42){console[_0x235343(0x11a)](_0x40ce42);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x107),auth,async(_0x2c079d,_0x3cec77)=>{const _0x2669c2=a0_0x23152f;try{const {username:_0x1d4417,email:_0x17b2f3,role:_0x3fc97b}=_0x2c079d[_0x2669c2(0x175)],_0x16e152=_0x2c079d[_0x2669c2(0x175)],_0x2b71be=await profile[_0x2669c2(0x194)]({'email':_0x16e152[_0x2669c2(0x13c)]}),_0x26960a=await master_shop[_0x2669c2(0xf2)]();console[_0x2669c2(0x11a)]('master',_0x26960a);const _0x598910=_0x2c079d[_0x2669c2(0x16e)]['id'];console[_0x2669c2(0x11a)](_0x598910);const _0x41ff9c=await categories['findById'](_0x598910);if(_0x26960a[0x0][_0x2669c2(0xe7)]=='English\x20(US)')var _0x550799=users[_0x2669c2(0x122)];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]==_0x2669c2(0x10e))var _0x550799=users[_0x2669c2(0x10e)];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]==_0x2669c2(0x130))var _0x550799=users['German'];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]==_0x2669c2(0xe5))var _0x550799=users[_0x2669c2(0xe5)];else{if(_0x26960a[0x0]['language']=='French')var _0x550799=users[_0x2669c2(0x104)];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]==_0x2669c2(0xeb))var _0x550799=users[_0x2669c2(0x19f)];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]=='Chinese')var _0x550799=users[_0x2669c2(0x19e)];else{if(_0x26960a[0x0][_0x2669c2(0xe7)]=='Arabic\x20(ae)')var _0x550799=users[_0x2669c2(0x19a)];}}}}}}}_0x3cec77[_0x2669c2(0xea)](_0x2669c2(0xff),{'success':_0x2c079d[_0x2669c2(0x127)](_0x2669c2(0xf9)),'errors':_0x2c079d[_0x2669c2(0x127)](_0x2669c2(0x153)),'role':_0x16e152,'profile':_0x2b71be,'master_shop':_0x26960a,'user':_0x41ff9c,'language':_0x550799});}catch(_0x2cd735){console[_0x2669c2(0x11a)](_0x2cd735);}}),router[a0_0x23152f(0x185)](a0_0x23152f(0x107),auth,async(_0x381f0c,_0x5cf469)=>{const _0x404460=a0_0x23152f;try{const _0xce9a43=_0x381f0c[_0x404460(0x16e)]['id'],_0x34d45a=await categories[_0x404460(0xe9)](_0xce9a43,_0x381f0c[_0x404460(0xf0)]);_0x381f0c[_0x404460(0x127)]('success',''+users[_0x404460(0x166)]),_0x5cf469['redirect'](_0x404460(0x161));}catch(_0x4db41b){console[_0x404460(0x11a)](_0x4db41b);}}),router[a0_0x23152f(0x1a2)]('/categories/delete/:id',auth,async(_0x5dd314,_0x1a4d31)=>{const _0x3d4e90=a0_0x23152f;try{const _0x57c329=_0x5dd314[_0x3d4e90(0x16e)]['id'],_0x1eebd7=await categories[_0x3d4e90(0x146)](_0x57c329);_0x5dd314[_0x3d4e90(0x127)](_0x3d4e90(0xf9),_0x3d4e90(0x199)),_0x1a4d31[_0x3d4e90(0x114)](_0x3d4e90(0x161));}catch(_0x11ac0c){console[_0x3d4e90(0x11a)](_0x11ac0c);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x16c),auth,async(_0x3e3ed5,_0x5a1431)=>{const _0x56918b=a0_0x23152f;try{const {username:_0x4794c9,email:_0x1cda4d,role:_0x56e978}=_0x3e3ed5['user'],_0x3239e8=_0x3e3ed5[_0x56918b(0x175)],_0x288c55=await profile[_0x56918b(0x194)]({'email':_0x3239e8[_0x56918b(0x13c)]}),_0x357b6e=await master_shop[_0x56918b(0xf2)]();console['log'](_0x56918b(0x15b),_0x357b6e);const _0x2cdedc=await brands[_0x56918b(0xf2)]();if(_0x357b6e[0x0]['language']==_0x56918b(0x124))var _0x46452d=users[_0x56918b(0x122)];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]=='Hindi')var _0x46452d=users['Hindi'];else{if(_0x357b6e[0x0]['language']==_0x56918b(0x130))var _0x46452d=users[_0x56918b(0x130)];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]=='Spanish')var _0x46452d=users['Spanish'];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]==_0x56918b(0x104))var _0x46452d=users[_0x56918b(0x104)];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]=='Portuguese\x20(BR)')var _0x46452d=users['Portuguese'];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]=='Chinese')var _0x46452d=users['Chinese'];else{if(_0x357b6e[0x0][_0x56918b(0xe7)]==_0x56918b(0x131))var _0x46452d=users['Arabic'];}}}}}}}_0x5a1431[_0x56918b(0xea)](_0x56918b(0x155),{'success':_0x3e3ed5[_0x56918b(0x127)]('success'),'errors':_0x3e3ed5['flash'](_0x56918b(0x153)),'role':_0x3239e8,'profile':_0x288c55,'master_shop':_0x357b6e,'user':_0x2cdedc,'language':_0x46452d});}catch(_0x57d1de){console[_0x56918b(0x11a)](_0x57d1de);}}),router[a0_0x23152f(0x185)]('/brands',auth,async(_0x34ce96,_0x2fd8ab)=>{const _0x268788=a0_0x23152f;try{const {name:_0x4f5c3e,products:_0x24f8fd}=_0x34ce96[_0x268788(0xf0)],_0x1aa041=new brands({'name':_0x4f5c3e,'products':_0x24f8fd}),_0x3afb1a=await brands[_0x268788(0x194)]({'name':_0x4f5c3e});_0x3afb1a?_0x34ce96[_0x268788(0x127)](_0x268788(0x153),_0x4f5c3e+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x34ce96[_0x268788(0x127)]('success',_0x4f5c3e+_0x268788(0x169));const _0x587433=await _0x1aa041[_0x268788(0xf1)]();_0x2fd8ab[_0x268788(0x114)](_0x268788(0x19c));}catch(_0x15d1e9){console[_0x268788(0x11a)](_0x15d1e9);}}),router['get'](a0_0x23152f(0x14a),auth,async(_0xd82916,_0x213259)=>{const _0xf272d2=a0_0x23152f;try{const {username:_0x55f3e4,email:_0x4ce941,role:_0x45a246}=_0xd82916['user'],_0x479d57=_0xd82916['user'],_0x4e077f=await profile[_0xf272d2(0x194)]({'email':_0x479d57[_0xf272d2(0x13c)]}),_0x24d648=await master_shop[_0xf272d2(0xf2)]();console[_0xf272d2(0x11a)]('master',_0x24d648);const _0x5a5816=_0xd82916[_0xf272d2(0x16e)]['id'];console[_0xf272d2(0x11a)](_0x5a5816);const _0x185e41=await brands[_0xf272d2(0x176)](_0x5a5816);if(_0x24d648[0x0][_0xf272d2(0xe7)]==_0xf272d2(0x124))var _0x17bf52=users[_0xf272d2(0x122)];else{if(_0x24d648[0x0]['language']=='Hindi')var _0x17bf52=users[_0xf272d2(0x10e)];else{if(_0x24d648[0x0][_0xf272d2(0xe7)]==_0xf272d2(0x130))var _0x17bf52=users[_0xf272d2(0x130)];else{if(_0x24d648[0x0]['language']==_0xf272d2(0xe5))var _0x17bf52=users[_0xf272d2(0xe5)];else{if(_0x24d648[0x0]['language']==_0xf272d2(0x104))var _0x17bf52=users[_0xf272d2(0x104)];else{if(_0x24d648[0x0][_0xf272d2(0xe7)]==_0xf272d2(0xeb))var _0x17bf52=users['Portuguese'];else{if(_0x24d648[0x0][_0xf272d2(0xe7)]==_0xf272d2(0x19e))var _0x17bf52=users['Chinese'];else{if(_0x24d648[0x0][_0xf272d2(0xe7)]==_0xf272d2(0x131))var _0x17bf52=users['Arabic'];}}}}}}}_0x213259['render'](_0xf272d2(0x155),{'success':_0xd82916['flash']('success'),'errors':_0xd82916[_0xf272d2(0x127)]('errors'),'role':_0x479d57,'profile':_0x4e077f,'master_shop':_0x24d648,'user':_0x185e41,'language':_0x17bf52});}catch(_0x30f2ca){console[_0xf272d2(0x11a)](_0x30f2ca);}}),router[a0_0x23152f(0x185)](a0_0x23152f(0x14a),auth,async(_0x21f57e,_0x3f34b8)=>{const _0x3973aa=a0_0x23152f;try{const _0x456862=_0x21f57e['params']['id'],_0x480454=await brands[_0x3973aa(0xe9)](_0x456862,_0x21f57e['body']);_0x21f57e[_0x3973aa(0x127)]('success','brand\x20data\x20update\x20successfully'),_0x3f34b8[_0x3973aa(0x114)](_0x3973aa(0x19c));}catch(_0x65eaa6){console['log'](_0x65eaa6);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x179),auth,async(_0x1658ac,_0x5c3785)=>{const _0x1b5f66=a0_0x23152f;try{const _0x1f04c7=_0x1658ac[_0x1b5f66(0x16e)]['id'],_0xb3c100=await brands['findByIdAndDelete'](_0x1f04c7);_0x1658ac[_0x1b5f66(0x127)](_0x1b5f66(0xf9),'brand\x20data\x20delete\x20successfully'),_0x5c3785[_0x1b5f66(0x114)](_0x1b5f66(0x19c));}catch(_0x24401a){console['log'](_0x24401a);}}),router['get']('/units',auth,async(_0x4ab92a,_0x1ee355)=>{const _0x725534=a0_0x23152f;try{const {username:_0x25f21c,email:_0x1cbc60,role:_0x171d55}=_0x4ab92a[_0x725534(0x175)],_0x375c8e=_0x4ab92a[_0x725534(0x175)],_0x6c74bc=await profile['findOne']({'email':_0x375c8e[_0x725534(0x13c)]}),_0x203f11=await master_shop[_0x725534(0xf2)]();console[_0x725534(0x11a)](_0x725534(0x15b),_0x203f11);const _0x48c610=await units['find']();if(_0x203f11[0x0]['language']==_0x725534(0x124))var _0x2bcf0d=users[_0x725534(0x122)];else{if(_0x203f11[0x0][_0x725534(0xe7)]==_0x725534(0x10e))var _0x2bcf0d=users['Hindi'];else{if(_0x203f11[0x0][_0x725534(0xe7)]==_0x725534(0x130))var _0x2bcf0d=users[_0x725534(0x130)];else{if(_0x203f11[0x0][_0x725534(0xe7)]==_0x725534(0xe5))var _0x2bcf0d=users[_0x725534(0xe5)];else{if(_0x203f11[0x0]['language']=='French')var _0x2bcf0d=users[_0x725534(0x104)];else{if(_0x203f11[0x0][_0x725534(0xe7)]=='Portuguese\x20(BR)')var _0x2bcf0d=users[_0x725534(0x19f)];else{if(_0x203f11[0x0][_0x725534(0xe7)]=='Chinese')var _0x2bcf0d=users[_0x725534(0x19e)];else{if(_0x203f11[0x0][_0x725534(0xe7)]==_0x725534(0x131))var _0x2bcf0d=users[_0x725534(0x19a)];}}}}}}}_0x1ee355[_0x725534(0xea)](_0x725534(0x164),{'success':_0x4ab92a[_0x725534(0x127)](_0x725534(0xf9)),'errors':_0x4ab92a[_0x725534(0x127)](_0x725534(0x153)),'role':_0x375c8e,'profile':_0x6c74bc,'master_shop':_0x203f11,'user':_0x48c610,'language':_0x2bcf0d});}catch(_0x6a0888){console[_0x725534(0x11a)](_0x6a0888);}}),router[a0_0x23152f(0x185)]('/units',auth,async(_0x3a39af,_0x4ba71f)=>{const _0x78f33c=a0_0x23152f;try{const {name:_0x3ccab2,secondary_unit:_0x58fb46,products:_0x521855}=_0x3a39af['body'],_0x55cab7=new units({'name':_0x3ccab2,'secondary_unit':_0x58fb46,'products':_0x521855}),_0x1dec58=await units[_0x78f33c(0x194)]({'name':_0x3ccab2});_0x1dec58?_0x3a39af[_0x78f33c(0x127)](_0x78f33c(0x153),_0x3ccab2+_0x78f33c(0x14f)):_0x3a39af[_0x78f33c(0x127)]('success',_0x3ccab2+_0x78f33c(0x121));const _0x429849=await _0x55cab7[_0x78f33c(0xf1)]();_0x4ba71f[_0x78f33c(0x114)](_0x78f33c(0x19d));}catch(_0x2a349d){console[_0x78f33c(0x11a)](_0x2a349d);}}),router['get'](a0_0x23152f(0xf4),auth,async(_0x2e6592,_0x21f657)=>{const _0x116309=a0_0x23152f;try{const {username:_0x37dfab,email:_0x52db0a,role:_0x29d453}=_0x2e6592[_0x116309(0x175)],_0xd1ce07=_0x2e6592['user'],_0x2fdf9e=await profile[_0x116309(0x194)]({'email':_0xd1ce07['email']}),_0x44448f=await master_shop[_0x116309(0xf2)]();console[_0x116309(0x11a)](_0x116309(0x15b),_0x44448f);const _0x408678=_0x2e6592[_0x116309(0x16e)]['id'],_0x335bce=await units['findById'](_0x408678);if(_0x44448f[0x0][_0x116309(0xe7)]==_0x116309(0x124))var _0x33e975=users['English'];else{if(_0x44448f[0x0][_0x116309(0xe7)]==_0x116309(0x10e))var _0x33e975=users[_0x116309(0x10e)];else{if(_0x44448f[0x0][_0x116309(0xe7)]=='German')var _0x33e975=users[_0x116309(0x130)];else{if(_0x44448f[0x0]['language']==_0x116309(0xe5))var _0x33e975=users[_0x116309(0xe5)];else{if(_0x44448f[0x0]['language']==_0x116309(0x104))var _0x33e975=users['French'];else{if(_0x44448f[0x0][_0x116309(0xe7)]==_0x116309(0xeb))var _0x33e975=users[_0x116309(0x19f)];else{if(_0x44448f[0x0][_0x116309(0xe7)]==_0x116309(0x19e))var _0x33e975=users[_0x116309(0x19e)];else{if(_0x44448f[0x0][_0x116309(0xe7)]==_0x116309(0x131))var _0x33e975=users[_0x116309(0x19a)];}}}}}}}_0x21f657[_0x116309(0xea)](_0x116309(0x164),{'success':_0x2e6592[_0x116309(0x127)](_0x116309(0xf9)),'errors':_0x2e6592[_0x116309(0x127)](_0x116309(0x153)),'role':_0xd1ce07,'profile':_0x2fdf9e,'master_shop':_0x44448f,'user':_0x335bce,'language':_0x33e975});}catch(_0x5490b8){console[_0x116309(0x11a)](_0x5490b8);}}),router['post'](a0_0x23152f(0xf4),auth,async(_0x478212,_0x1752fe)=>{const _0x44e004=a0_0x23152f;try{const _0x3a694d=_0x478212[_0x44e004(0x16e)]['id'],_0x2d876e=await units[_0x44e004(0xe9)](_0x3a694d,_0x478212[_0x44e004(0xf0)]);_0x478212['flash']('success',_0x44e004(0x18a)),_0x1752fe[_0x44e004(0x114)]('/products/units');}catch(_0xfe64b0){console[_0x44e004(0x11a)](_0xfe64b0);}}),router[a0_0x23152f(0x1a2)]('/units/delete/:id',auth,async(_0x1789e0,_0x23258b)=>{const _0x15a919=a0_0x23152f;try{const _0x4d92f5=_0x1789e0[_0x15a919(0x16e)]['id'],_0x3e74ed=await units[_0x15a919(0x146)](_0x4d92f5);_0x1789e0[_0x15a919(0x127)](_0x15a919(0xf9),_0x15a919(0x142)),_0x23258b[_0x15a919(0x114)](_0x15a919(0x19d));}catch(_0x4b7807){console[_0x15a919(0x11a)](_0x4b7807);}});const storage=multer['diskStorage']({'destination':(_0x43cb93,_0xe39b2,_0x5b0494)=>{const _0x26aed3=a0_0x23152f;_0x5b0494(null,_0x26aed3(0x197));},'filename':(_0x3b6289,_0x5a1bf1,_0x4e8ae1)=>{_0x4e8ae1(null,Date['now']()+_0x5a1bf1['originalname']);}}),upload=multer({'storage':storage});router['get'](a0_0x23152f(0x128),auth,async(_0x48a7ed,_0x41ccbe)=>{const _0x4a84f4=a0_0x23152f;try{const {username:_0x4d6478,email:_0x316d2e,role:_0x309ba7}=_0x48a7ed[_0x4a84f4(0x175)],_0xf450f2=_0x48a7ed['user'],_0x5bbf4c=await profile['findOne']({'email':_0xf450f2[_0x4a84f4(0x13c)]}),_0x58511c={'year':_0x4a84f4(0x11b),'month':_0x4a84f4(0x117),'day':_0x4a84f4(0x11b)},_0x4b0f5b=await master_shop[_0x4a84f4(0xf2)]();console['log']('Products\x20master',_0x4b0f5b);const _0x3ecd35=await product[_0x4a84f4(0xf2)]();console['log']('Products\x20find_data',_0x3ecd35);const _0x1c0cac=await warehouse[_0x4a84f4(0x106)]([{'$unwind':'$product_details'},{'$lookup':{'from':'products','localField':_0x4a84f4(0xed),'foreignField':_0x4a84f4(0xfc),'as':_0x4a84f4(0xee)}},{'$unwind':_0x4a84f4(0x16d)},{'$project':{'product_name':_0x4a84f4(0x123),'product_stock':_0x4a84f4(0xe2)}},{'$group':{'_id':_0x4a84f4(0x19b),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x4a84f4(0x11a)](_0x4a84f4(0x12b),_0x1c0cac),_0x1c0cac['forEach'](_0x2c95b6=>{const _0xe8545e=_0x4a84f4,_0x135cfc=_0x3ecd35[_0xe8545e(0x111)](_0xb4607d=>{const _0x28603d=_0xe8545e;_0xb4607d[_0x28603d(0xfc)]==_0x2c95b6[_0x28603d(0x112)]&&(_0xb4607d[_0x28603d(0x125)]=parseInt(_0xb4607d[_0x28603d(0x125)])+parseInt(_0x2c95b6[_0x28603d(0xfb)]));});}),console[_0x4a84f4(0x11a)](_0x4a84f4(0x17e),_0x3ecd35);if(_0x4b0f5b[0x0]['language']==_0x4a84f4(0x124))var _0x54a44b=users[_0x4a84f4(0x122)];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]==_0x4a84f4(0x10e))var _0x54a44b=users[_0x4a84f4(0x10e)];else{if(_0x4b0f5b[0x0]['language']==_0x4a84f4(0x130))var _0x54a44b=users[_0x4a84f4(0x130)];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]=='Spanish')var _0x54a44b=users[_0x4a84f4(0xe5)];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]=='French')var _0x54a44b=users[_0x4a84f4(0x104)];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]==_0x4a84f4(0xeb))var _0x54a44b=users['Portuguese'];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]=='Chinese')var _0x54a44b=users['Chinese'];else{if(_0x4b0f5b[0x0][_0x4a84f4(0xe7)]==_0x4a84f4(0x131))var _0x54a44b=users[_0x4a84f4(0x19a)];}}}}}}}_0x41ccbe[_0x4a84f4(0xea)](_0x4a84f4(0x11d),{'success':_0x48a7ed[_0x4a84f4(0x127)](_0x4a84f4(0xf9)),'errors':_0x48a7ed[_0x4a84f4(0x127)](_0x4a84f4(0x153)),'alldata':_0x3ecd35,'profile':_0x5bbf4c,'master_shop':_0x4b0f5b,'role':_0xf450f2,'product_stock':_0x1c0cac,'language':_0x54a44b});}catch(_0x4d8fc5){console['log'](_0x4d8fc5);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x177),auth,async(_0x428cd6,_0x196838)=>{const _0xd428d6=a0_0x23152f;try{const {username:_0xcf12a8,email:_0x2406b7,role:_0x2b7509}=_0x428cd6['user'],_0x59b2a3=_0x428cd6[_0xd428d6(0x175)],_0x60421a=await profile[_0xd428d6(0x194)]({'email':_0x59b2a3[_0xd428d6(0x13c)]}),_0x492264=await master_shop[_0xd428d6(0xf2)]();console[_0xd428d6(0x11a)](_0xd428d6(0x15b),_0x492264);const _0x41e5f3=await categories[_0xd428d6(0xf2)]({}),_0x61c74e=await brands[_0xd428d6(0xf2)]({}),_0x35825d=await units[_0xd428d6(0xf2)]({}),_0x4340e2=await warehouse[_0xd428d6(0xf2)]({'status':_0xd428d6(0x15d)});if(_0x492264[0x0]['language']==_0xd428d6(0x124))var _0x2ed10b=users['English'];else{if(_0x492264[0x0][_0xd428d6(0xe7)]==_0xd428d6(0x10e))var _0x2ed10b=users[_0xd428d6(0x10e)];else{if(_0x492264[0x0][_0xd428d6(0xe7)]==_0xd428d6(0x130))var _0x2ed10b=users[_0xd428d6(0x130)];else{if(_0x492264[0x0][_0xd428d6(0xe7)]=='Spanish')var _0x2ed10b=users[_0xd428d6(0xe5)];else{if(_0x492264[0x0][_0xd428d6(0xe7)]==_0xd428d6(0x104))var _0x2ed10b=users[_0xd428d6(0x104)];else{if(_0x492264[0x0]['language']==_0xd428d6(0xeb))var _0x2ed10b=users[_0xd428d6(0x19f)];else{if(_0x492264[0x0]['language']=='Chinese')var _0x2ed10b=users[_0xd428d6(0x19e)];else{if(_0x492264[0x0][_0xd428d6(0xe7)]==_0xd428d6(0x131))var _0x2ed10b=users[_0xd428d6(0x19a)];}}}}}}}_0x196838[_0xd428d6(0xea)](_0xd428d6(0xf6),{'success':_0x428cd6[_0xd428d6(0x127)](_0xd428d6(0xf9)),'errors':_0x428cd6['flash'](_0xd428d6(0x153)),'role':_0x59b2a3,'profile':_0x60421a,'categories':_0x41e5f3,'brands':_0x61c74e,'master_shop':_0x492264,'units':_0x35825d,'language':_0x2ed10b,'find_data':_0x4340e2});}catch(_0x37db46){console['log'](_0x37db46);}}),router[a0_0x23152f(0x185)](a0_0x23152f(0x177),auth,upload['single'](a0_0x23152f(0xfa)),async(_0x10bfb9,_0x58434c)=>{const _0x42b4fd=a0_0x23152f;try{const {name:_0x5bbfdd,category:_0x5a4beb,brand:_0x2893f7,unit:_0x2197e6,alertquantity:_0x167103,stock:_0xaef9b6,product_code:_0x2201c9,warehouse:_0x336f0e,primary_ItemCode:_0x247b0f,second_ItemCode:_0x435468,second_unit:_0x860628,maxPerUnit:_0x5ca8e2,MaxPerProduct:_0x4b17c6}=_0x10bfb9[_0x42b4fd(0xf0)],_0x4074fd=_0x10bfb9[_0x42b4fd(0x15e)]?.[_0x42b4fd(0xf7)]||_0x42b4fd(0x167),_0x9dcfa=new product({'image':_0x4074fd,'name':_0x5bbfdd,'category':_0x5a4beb,'brand':_0x2893f7,'unit':_0x2197e6,'alertquantity':_0x167103,'stock':_0xaef9b6,'product_code':_0x2201c9,'warehouse':_0x336f0e,'primary_code':_0x247b0f,'secondary_code':_0x435468,'second_unit':_0x860628,'maxStocks':_0x4b17c6,'maxProdPerUnit':_0x5ca8e2}),_0x5a201b=await _0x9dcfa[_0x42b4fd(0xf1)](),_0x4a76af=await categories[_0x42b4fd(0x194)]({'name':_0x5a4beb});_0x4a76af['products']=parseInt(_0x4a76af[_0x42b4fd(0x11d)])+0x1,await _0x4a76af['save']();const _0x263588=await brands[_0x42b4fd(0x194)]({'name':_0x2893f7});_0x263588['products']=parseInt(_0x263588[_0x42b4fd(0x11d)])+0x1,await _0x263588[_0x42b4fd(0xf1)]();const _0x536e0d=await units['findOne']({'name':_0x2197e6});_0x536e0d[_0x42b4fd(0x11d)]=parseInt(_0x536e0d[_0x42b4fd(0x11d)])+0x1,await _0x536e0d[_0x42b4fd(0xf1)](),_0x10bfb9[_0x42b4fd(0x127)]('success',_0x42b4fd(0x178)),_0x58434c[_0x42b4fd(0x114)]('/products/view');}catch(_0xb8e723){console[_0x42b4fd(0x11a)](_0xb8e723);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x134),auth,async(_0x241b9f,_0x4deec1)=>{const _0x470bc0=a0_0x23152f;try{const {username:_0x2a601a,email:_0x240bb4,role:_0x37c0d8}=_0x241b9f['user'],_0x5304ec=_0x241b9f[_0x470bc0(0x175)],_0x3425c3=await profile['findOne']({'email':_0x5304ec['email']}),_0xbfda4b=await master_shop[_0x470bc0(0xf2)]();console['log']('edit\x20Product\x20master',_0xbfda4b);const _0x3c00c3=_0x241b9f[_0x470bc0(0x16e)]['id'],_0x370256=await product['findById'](_0x3c00c3),_0x5e3a80=await categories[_0x470bc0(0xf2)]({}),_0x4ac24c=await brands[_0x470bc0(0xf2)]({}),_0x5e41a6=await units[_0x470bc0(0xf2)]({}),_0x18520c=await warehouse['find']({'status':_0x470bc0(0x15d)}),_0x1c0536=await units[_0x470bc0(0x106)]([{'$group':{'_id':_0x470bc0(0x118),'secondaryunit':{'$first':_0x470bc0(0x149)}}}]);if(_0xbfda4b[0x0][_0x470bc0(0xe7)]=='English\x20(US)')var _0x3c6f09=users[_0x470bc0(0x122)];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]=='Hindi')var _0x3c6f09=users[_0x470bc0(0x10e)];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0x130))var _0x3c6f09=users['German'];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0xe5))var _0x3c6f09=users['Spanish'];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0x104))var _0x3c6f09=users[_0x470bc0(0x104)];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0xeb))var _0x3c6f09=users['Portuguese'];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0x19e))var _0x3c6f09=users[_0x470bc0(0x19e)];else{if(_0xbfda4b[0x0][_0x470bc0(0xe7)]==_0x470bc0(0x131))var _0x3c6f09=users[_0x470bc0(0x19a)];}}}}}}}_0x4deec1[_0x470bc0(0xea)]('edit_product',{'success':_0x241b9f[_0x470bc0(0x127)]('success'),'errors':_0x241b9f[_0x470bc0(0x127)](_0x470bc0(0x153)),'role':_0x5304ec,'profile':_0x3425c3,'alldata':_0x370256,'categories':_0x5e3a80,'brands':_0x4ac24c,'master_shop':_0xbfda4b,'units':_0x5e41a6,'secondunit':_0x1c0536,'find_data':_0x18520c,'language':_0x3c6f09});}catch(_0x10ece2){console[_0x470bc0(0x11a)](_0x10ece2);}}),router['post'](a0_0x23152f(0x134),auth,upload[a0_0x23152f(0x13b)](a0_0x23152f(0xfa)),async(_0x5c7a41,_0x1a958d)=>{const _0x1d92db=a0_0x23152f;try{console[_0x1d92db(0x11a)](_0x1d92db(0x1a1));const _0x45fbf6=_0x5c7a41['params']['id'],_0x5c395c=await product['findById'](_0x45fbf6),{image:_0x5783fa,name:_0x4d80f7,category:_0x1ed1ab,brand:_0x4b463c,sku:_0x28177,unit:_0x12a6bc,alertquantity:_0x55ef3e,product_code:_0x4dd5fc,warehouse:_0x236fea,primary_ItemCode:_0x4eb815,second_ItemCode:_0x2f8cf4,second_unit:_0x41038c,maxPerUnit:_0x4758df,MaxPerProduct:_0x5e3b8f,prod_catdata:_0x277dc0}=_0x5c7a41[_0x1d92db(0xf0)];_0x5c7a41[_0x1d92db(0x15e)]&&(_0x5c395c['image']=_0x5c7a41[_0x1d92db(0x15e)][_0x1d92db(0xf7)]);_0x5c395c['name']=_0x4d80f7,_0x5c395c[_0x1d92db(0x188)]=_0x1ed1ab,_0x5c395c[_0x1d92db(0x191)]=_0x4b463c,_0x5c395c[_0x1d92db(0x184)]=_0x28177,_0x5c395c[_0x1d92db(0x138)]=_0x12a6bc,_0x5c395c['alertquantity']=_0x55ef3e,_0x5c395c[_0x1d92db(0x14e)]=_0x4dd5fc,_0x5c395c[_0x1d92db(0x151)]=_0x236fea,_0x5c395c['primary_code']=_0x4eb815,_0x5c395c[_0x1d92db(0x110)]=_0x2f8cf4,_0x5c395c['secondary_unit']=_0x41038c,_0x5c395c[_0x1d92db(0x182)]=_0x5e3b8f,_0x5c395c[_0x1d92db(0x190)]=_0x4758df,_0x5c395c[_0x1d92db(0x12f)]=_0x277dc0;const _0x410ec3=await _0x5c395c[_0x1d92db(0xf1)]();console[_0x1d92db(0x11a)]('product\x20edit',_0x5c395c),_0x5c7a41['flash'](_0x1d92db(0xf9),_0x1d92db(0x140)),_0x1a958d[_0x1d92db(0x114)](_0x1d92db(0x170));}catch(_0x341999){console[_0x1d92db(0x11a)](_0x341999);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x17c),auth,async(_0x32dc6d,_0x3b493f)=>{const _0x55feb1=a0_0x23152f;try{const {username:_0x5170d5,email:_0x9b10ad,role:_0x3428a3}=_0x32dc6d['user'],_0x53d808=_0x32dc6d[_0x55feb1(0x175)],_0x5e5234=await profile[_0x55feb1(0x194)]({'email':_0x53d808[_0x55feb1(0x13c)]}),_0x1379e8=await master_shop[_0x55feb1(0xf2)]();console['log'](_0x55feb1(0xe6),_0x1379e8);const _0x112bc3=_0x32dc6d[_0x55feb1(0x16e)]['id'],_0x1ea74c=await product['findById'](_0x112bc3);console['log'](_0x55feb1(0x10f),_0x1ea74c);if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x124))var _0x170f2b=users[_0x55feb1(0x122)];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x10e))var _0x170f2b=users[_0x55feb1(0x10e)];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x130))var _0x170f2b=users[_0x55feb1(0x130)];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0xe5))var _0x170f2b=users[_0x55feb1(0xe5)];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x104))var _0x170f2b=users['French'];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0xeb))var _0x170f2b=users[_0x55feb1(0x19f)];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x19e))var _0x170f2b=users['Chinese'];else{if(_0x1379e8[0x0][_0x55feb1(0xe7)]==_0x55feb1(0x131))var _0x170f2b=users[_0x55feb1(0x19a)];}}}}}}}_0x3b493f[_0x55feb1(0xea)]('product_barcode',{'success':_0x32dc6d['flash']('success'),'errors':_0x32dc6d['flash'](_0x55feb1(0x153)),'role':_0x53d808,'profile':_0x5e5234,'alldata':_0x1ea74c,'master_shop':_0x1379e8,'language':_0x170f2b});}catch(_0x27108c){console[_0x55feb1(0x11a)](_0x27108c);}}),router[a0_0x23152f(0x1a2)](a0_0x23152f(0x10a),auth,async(_0x3a3e8a,_0x3e67b1)=>{const _0x30ec0a=a0_0x23152f;try{const _0x504bd4=new excelJS[(_0x30ec0a(0x113))](),_0x314ee8=_0x504bd4[_0x30ec0a(0x12e)](_0x30ec0a(0x103));return _0x314ee8[_0x30ec0a(0x15a)]=[{'header':_0x30ec0a(0xe1),'key':_0x30ec0a(0x195),'width':0xa},{'header':'Brands','key':_0x30ec0a(0x132),'width':0xa},{'header':_0x30ec0a(0x15f),'key':_0x30ec0a(0x183),'width':0xa},{'header':'Secondary_Units','key':_0x30ec0a(0x105),'width':0xa},{'header':'max_number_per_units','key':_0x30ec0a(0xe4),'width':0xa},{'header':'Primary_Code','key':'ProductCode','width':0xa},{'header':'Secondary_Code','key':_0x30ec0a(0x11f),'width':0xa},{'header':_0x30ec0a(0xef),'key':'ProductCode','width':0xa},{'header':_0x30ec0a(0x18e),'key':_0x30ec0a(0x154),'width':0xa},{'header':_0x30ec0a(0x189),'key':'PAlQty','width':0xa},{'header':_0x30ec0a(0x193),'key':'PAlQty','width':0xa},{'header':_0x30ec0a(0x115),'key':_0x30ec0a(0x13f),'width':0xa}],_0x3e67b1[_0x30ec0a(0x16b)](_0x30ec0a(0x116),_0x30ec0a(0x18b)),_0x3e67b1[_0x30ec0a(0x16b)](_0x30ec0a(0x186),_0x30ec0a(0xf8)),_0x504bd4[_0x30ec0a(0x160)][_0x30ec0a(0x150)](_0x3e67b1)[_0x30ec0a(0x135)](()=>{const _0x499f12=_0x30ec0a;_0x3e67b1[_0x499f12(0x163)](0xc8);});}catch(_0x14cb3e){_0x3e67b1[_0x30ec0a(0x163)](0x190)[_0x30ec0a(0x101)](_0x14cb3e);}});const storage1=multer[a0_0x23152f(0x162)]({'destination':(_0x5aab73,_0x397d7d,_0x59f920)=>{_0x59f920(null,'public/Migration');},'filename':(_0x1f4464,_0x1daee4,_0x24a1ee)=>{const _0x4d6b43=a0_0x23152f;_0x24a1ee(null,Date['now']()+_0x1daee4[_0x4d6b43(0x139)]);}}),uploadMigrate=multer({'storage':storage1});router['post']('/products_import_migrate_file',auth,uploadMigrate[a0_0x23152f(0x13b)]('migrate_product_fule'),async(_0x54db66,_0x3f88df)=>{const _0x4b42c4=a0_0x23152f,_0x47dba7=_0x54db66['file'][_0x4b42c4(0xf7)],_0x238162=await xlsx['readFile'](_0x4b42c4(0x180)+_0x47dba7);let _0x3712ba=_0x238162[_0x4b42c4(0x173)],_0x506ba5=xlsx[_0x4b42c4(0x16f)][_0x4b42c4(0xf5)](_0x238162['Sheets'][_0x3712ba[0x0]]);for(const _0x5681be of _0x506ba5){const _0x2265fd=_0x5681be['Product_Name'],_0x32f9db=_0x5681be[_0x4b42c4(0x196)],_0x5b2452=_0x5681be['Units'],_0x30699c=_0x5681be[_0x4b42c4(0x147)],_0x20ba8a=_0x5681be[_0x4b42c4(0xef)],_0x3e35d5=_0x5681be['Category'],_0x27ae0e=_0x5681be[_0x4b42c4(0x189)],_0x4fe067=_0x5681be['Primary_Code'],_0x14acb4=_0x5681be[_0x4b42c4(0xfd)],_0x57b276=_0x5681be[_0x4b42c4(0x193)],_0x3fd3be=_0x5681be[_0x4b42c4(0x12a)],_0x5cc046=_0x5681be[_0x4b42c4(0x115)];try{let _0x82c0df=await categories[_0x4b42c4(0x194)]({'name':_0x3e35d5});if(!_0x82c0df){const _0x456bc1=new categories({'name':_0x3e35d5,'products':'0'});_0x82c0df=await _0x456bc1[_0x4b42c4(0xf1)]();}let _0x22a176=await brands['findOne']({'name':_0x32f9db});if(!_0x22a176){const _0x5df0fd=new brands({'name':_0x32f9db,'products':'0'});_0x22a176=await _0x5df0fd[_0x4b42c4(0xf1)]();}let _0x42af2e=await units['findOne']({'name':_0x5b2452,'secondary_unit':_0x30699c});if(!_0x42af2e){const _0x3fe8cb=new units({'name':_0x5b2452,'secondary_unit':_0x30699c,'products':'0'});_0x42af2e=await _0x3fe8cb[_0x4b42c4(0xf1)]();}const _0x1e3c6b=await product[_0x4b42c4(0xf2)]({'name':_0x2265fd,'category':_0x82c0df[_0x4b42c4(0xfc)],'brand':_0x22a176[_0x4b42c4(0xfc)],'secondary_unit':_0x42af2e[_0x4b42c4(0x18c)],'product_code':_0x20ba8a});console['log'](_0x1e3c6b['length']+_0x4b42c4(0x10b)+_0x82c0df['name']+_0x4b42c4(0x10b)+_0x22a176[_0x4b42c4(0xfc)]+_0x4b42c4(0x10b)+_0x42af2e[_0x4b42c4(0x18c)]+'\x20<>\x20'+_0x20ba8a+_0x4b42c4(0x10b)+_0x2265fd);if(_0x1e3c6b[_0x4b42c4(0x172)]===0x0){const _0x201de8=new product({'image':_0x4b42c4(0x167),'name':_0x2265fd,'category':_0x82c0df[_0x4b42c4(0xfc)],'brand':_0x22a176[_0x4b42c4(0xfc)],'unit':_0x42af2e[_0x4b42c4(0xfc)],'alertquantity':_0x27ae0e,'product_code':_0x20ba8a,'secondary_unit':_0x42af2e[_0x4b42c4(0x18c)],'primary_code':_0x4fe067,'secondary_code':_0x14acb4,'maxStocks':_0x57b276,'maxProdPerUnit':_0x3fd3be,'product_category':_0x5cc046}),_0x3fb338=await _0x201de8['save']();_0x82c0df['products']=parseInt(_0x82c0df[_0x4b42c4(0x11d)])+0x1,await _0x82c0df[_0x4b42c4(0xf1)](),_0x22a176[_0x4b42c4(0x11d)]=parseInt(_0x22a176['products'])+0x1,await _0x22a176[_0x4b42c4(0xf1)](),_0x42af2e['products']=parseInt(_0x42af2e[_0x4b42c4(0x11d)])+0x1,await _0x42af2e[_0x4b42c4(0xf1)](),_0x54db66[_0x4b42c4(0x127)](_0x4b42c4(0xf9),_0x2265fd+_0x4b42c4(0x17f));}else{console['log'](_0x1e3c6b[0x0]);const _0x366ed4=_0x1e3c6b[0x0];_0x366ed4[_0x4b42c4(0x188)]=_0x82c0df[_0x4b42c4(0xfc)],_0x366ed4[_0x4b42c4(0x191)]=_0x22a176[_0x4b42c4(0xfc)],_0x366ed4['unit']=_0x42af2e[_0x4b42c4(0xfc)],_0x366ed4[_0x4b42c4(0x1a0)]=_0x27ae0e,_0x366ed4[_0x4b42c4(0x14e)]=_0x20ba8a,_0x366ed4[_0x4b42c4(0x18c)]=_0x42af2e[_0x4b42c4(0x18c)],_0x366ed4['primary_code']=_0x4fe067,_0x366ed4[_0x4b42c4(0x110)]=_0x14acb4,_0x366ed4[_0x4b42c4(0x182)]=_0x57b276,_0x366ed4['maxProdPerUnit']=_0x3fd3be,_0x366ed4['product_category']=_0x5cc046;const _0x54f31b=await _0x366ed4[_0x4b42c4(0xf1)]();_0x54db66[_0x4b42c4(0x127)](_0x4b42c4(0xf9),_0x54f31b[_0x4b42c4(0xfc)]+'\x20Edit\x20Successfully');}}catch(_0x3fb3bf){_0x3f88df[_0x4b42c4(0x163)](0x1f4)[_0x4b42c4(0x157)]({'proderror':_0x3fb3bf[_0x4b42c4(0x198)],'aproduct':_0x2265fd});}}_0x3f88df[_0x4b42c4(0x114)]('/products/view');}),router['post'](a0_0x23152f(0x11c),auth,async(_0x174f74,_0x1d6477)=>{const _0x4fe4b3=a0_0x23152f;try{console[_0x4fe4b3(0x11a)](_0x174f74[_0x4fe4b3(0xf0)]);const {data_cateory:_0x3ac0c5,datachoose:_0x3b2754}=_0x174f74['body'];var _0x4b80c8;if(_0x3b2754==_0x4fe4b3(0x16a))_0x4b80c8=await product[_0x4fe4b3(0x106)]([{'$group':{'_id':_0x4fe4b3(0x14d)}}]);else{if(_0x3b2754==_0x4fe4b3(0x155))_0x4b80c8=await product[_0x4fe4b3(0x106)]([{'$match':{'product_category':_0x3ac0c5}},{'$group':{'_id':_0x4fe4b3(0xf3)}}]);else _0x3b2754==_0x4fe4b3(0x158)&&(_0x4b80c8=await product[_0x4fe4b3(0x106)]([{'$match':{'product_category':_0x3ac0c5}},{'$group':{'_id':_0x4fe4b3(0x159)}}]));}_0x1d6477[_0x4fe4b3(0x157)](_0x4b80c8);}catch(_0x2dba23){_0x1d6477['json']({'message':_0x2dba23[_0x4fe4b3(0x198)]});}}),router[a0_0x23152f(0x185)]('/filter_product',auth,async(_0x5e4066,_0x3e4461)=>{const _0x1c8712=a0_0x23152f;try{const {data_choosing:_0x5ac5c9,data_selected:_0x5eabc5}=_0x5e4066[_0x1c8712(0xf0)];var _0x5e2e71;if(_0x5ac5c9==_0x1c8712(0x16a))_0x5e2e71=await product['aggregate']([{'$match':{'product_category':_0x5eabc5}}]);else{if(_0x5ac5c9==_0x1c8712(0x155))_0x5e2e71=await product[_0x1c8712(0x106)]([{'$match':{'brand':_0x5eabc5}}]);else _0x5ac5c9==_0x1c8712(0x158)&&(_0x5e2e71=await product[_0x1c8712(0x106)]([{'$match':{'category':_0x5eabc5}}]));}_0x3e4461[_0x1c8712(0x157)](_0x5e2e71);}catch(_0x16e62d){_0x3e4461[_0x1c8712(0x157)]({'message':_0x16e62d[_0x1c8712(0x198)]});}}),router[a0_0x23152f(0x1a2)]('/print_barcode',auth,async(_0x2760fe,_0xe10d84)=>{const _0x3d06c6=a0_0x23152f,_0x3f2cd6=_0x2760fe[_0x3d06c6(0x175)],_0x1b3cd5=await profile[_0x3d06c6(0x194)]({'email':_0x3f2cd6['email']}),_0x479cc3=await master_shop[_0x3d06c6(0xf2)](),_0x3b00b7=await product[_0x3d06c6(0xf2)]();if(_0x479cc3[0x0][_0x3d06c6(0xe7)]=='English\x20(US)')var _0x46c924=users[_0x3d06c6(0x122)];else{if(_0x479cc3[0x0]['language']==_0x3d06c6(0x10e))var _0x46c924=users[_0x3d06c6(0x10e)];else{if(_0x479cc3[0x0][_0x3d06c6(0xe7)]==_0x3d06c6(0x130))var _0x46c924=users['German'];else{if(_0x479cc3[0x0][_0x3d06c6(0xe7)]=='Spanish')var _0x46c924=users[_0x3d06c6(0xe5)];else{if(_0x479cc3[0x0]['language']==_0x3d06c6(0x104))var _0x46c924=users[_0x3d06c6(0x104)];else{if(_0x479cc3[0x0][_0x3d06c6(0xe7)]=='Portuguese\x20(BR)')var _0x46c924=users[_0x3d06c6(0x19f)];else{if(_0x479cc3[0x0][_0x3d06c6(0xe7)]==_0x3d06c6(0x19e))var _0x46c924=users[_0x3d06c6(0x19e)];else{if(_0x479cc3[0x0]['language']==_0x3d06c6(0x131))var _0x46c924=users[_0x3d06c6(0x19a)];}}}}}}}_0xe10d84['render']('product_barcode_products',{'success':_0x2760fe[_0x3d06c6(0x127)](_0x3d06c6(0xf9)),'errors':_0x2760fe[_0x3d06c6(0x127)](_0x3d06c6(0x153)),'role':_0x3f2cd6,'profile':_0x1b3cd5,'products':_0x3b00b7,'master_shop':_0x479cc3,'language':_0x46c924});}),router[a0_0x23152f(0x185)](a0_0x23152f(0x13d),auth,async(_0x2945d9,_0x1d8d94)=>{const _0x546904=a0_0x23152f,_0x222d19=await product[_0x546904(0xf2)]();_0x1d8d94[_0x546904(0x157)]({'data':_0x222d19});}),router[a0_0x23152f(0x185)](a0_0x23152f(0x18d),auth,async(_0x1003ea,_0xb63fe)=>{const _0x16d2f8=a0_0x23152f;try{const {dataProdCat:_0x26235c,dataProdIdentity:_0x58ba31}=_0x1003ea[_0x16d2f8(0xf0)];var _0x5aae47;switch(_0x26235c){case'fg':switch(_0x58ba31){case _0x16d2f8(0x196):_0x5aae47=await product['aggregate']([{'$match':{'product_category':_0x16d2f8(0x17b)}},{'$group':{'_id':_0x16d2f8(0xf3)}},{'$project':{'brand':_0x16d2f8(0x118)}}]);break;case'Category':_0x5aae47=await product[_0x16d2f8(0x106)]([{'$match':{'product_category':_0x16d2f8(0x17b)}},{'$group':{'_id':_0x16d2f8(0x159)}},{'$project':{'category':_0x16d2f8(0x118)}}]);break;}break;case'rm':switch(_0x58ba31){case _0x16d2f8(0x196):_0x5aae47=await product[_0x16d2f8(0x106)]([{'$match':{'product_category':_0x16d2f8(0x10c)}},{'$group':{'_id':_0x16d2f8(0xf3)}},{'$project':{'brand':_0x16d2f8(0x118)}}]);break;case _0x16d2f8(0x18e):_0x5aae47=await product['aggregate']([{'$match':{'product_category':_0x16d2f8(0x10c)}},{'$group':{'_id':_0x16d2f8(0x159)}},{'$project':{'category':_0x16d2f8(0x118)}}]);break;}break;}_0xb63fe['json'](_0x5aae47);}catch(_0x882192){_0xb63fe['json']({'message':_0x882192['message']});}}),router[a0_0x23152f(0x185)](a0_0x23152f(0x13a),auth,async(_0x56acef,_0x14b2ed)=>{const _0x5413bd=a0_0x23152f;try{console[_0x5413bd(0x11a)](_0x56acef[_0x5413bd(0xf0)]);const {prod_cat:_0xf1d5b7,identity:_0x18fb92,valueData:_0x3f7874,typeofbarcode:_0x59fc36}=_0x56acef['body'];let _0x1a00c0;switch(_0xf1d5b7){case'fg':if(_0x18fb92=='Brands')_0x1a00c0=await product[_0x5413bd(0x106)]([{'$match':{'product_category':_0x5413bd(0x17b),'brand':_0x3f7874}}]);else _0x18fb92==_0x5413bd(0x18e)&&(_0x1a00c0=await product[_0x5413bd(0x106)]([{'$match':{'product_category':_0x5413bd(0x17b),'category':_0x3f7874}}]));break;case'rm':if(_0x18fb92==_0x5413bd(0x196))_0x1a00c0=await product[_0x5413bd(0x106)]([{'$match':{'product_category':_0x5413bd(0x10c),'brand':_0x3f7874}}]);else _0x18fb92==_0x5413bd(0x18e)&&(_0x1a00c0=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x3f7874}}]));break;}const _0x34528a=_0x299295=>_0x299295*0x48,_0x55367c={'width':0x3,'height':0x1},_0x305f56=new PDFDocument({'margin':_0x34528a(0.75),'size':[_0x34528a(_0x55367c[_0x5413bd(0x168)]),_0x34528a(_0x55367c[_0x5413bd(0x119)])],'bufferPages':!![]}),_0x580199=_0x1a00c0['length'];for(let _0x39f85d=0x0;_0x39f85d<=_0x580199;_0x39f85d++){if(_0x39f85d!=_0x580199){const _0x263e11=_0x1a00c0[_0x39f85d][_0x5413bd(0xfc)],_0x37c455=_0x1a00c0[_0x39f85d][_0x5413bd(0x133)],_0x34c7d8=_0x1a00c0[_0x39f85d][_0x5413bd(0x110)],_0xd6e6f7=_0x1a00c0[_0x39f85d][_0x5413bd(0x14e)];var _0x3a968f;switch(_0x59fc36){case'1':_0x3a968f=_0x37c455;break;case'2':_0x3a968f=_0x34c7d8;break;case'3':_0x3a968f=_0xd6e6f7;break;}const _0xdf6568={'width':0xd2,'height':0x64},_0x3957e6={'width':_0x34528a(_0x55367c[_0x5413bd(0x168)]),'height':_0x34528a(_0x55367c[_0x5413bd(0x119)])},_0x31e72d=new Canvas();JsBarcode(_0x31e72d,_0x3a968f,{'format':_0x5413bd(0x152),'height':_0xdf6568[_0x5413bd(0x119)],'displayValue':!![],'text':_0x3a968f});const _0x191046=_0x31e72d[_0x5413bd(0x109)](),_0x47f96b=_0x3957e6['width']/_0xdf6568[_0x5413bd(0x168)],_0x2dadaa=_0x3957e6[_0x5413bd(0x119)]/_0xdf6568[_0x5413bd(0x119)],_0x579d1b=Math[_0x5413bd(0x141)](_0x47f96b,_0x2dadaa),_0xc9d5e6=_0xdf6568[_0x5413bd(0x168)]*_0x579d1b,_0x5e4de3=_0xdf6568[_0x5413bd(0x119)]*_0x579d1b,_0x458fa7=(_0x3957e6['width']-_0xc9d5e6)/0x2,_0x53b0e5=(_0x3957e6[_0x5413bd(0x119)]-_0x5e4de3)/0x2;_0x305f56[_0x5413bd(0xfa)](_0x191046,_0x458fa7,_0x53b0e5,{'width':_0xc9d5e6,'height':_0x5e4de3}),_0x39f85d!=_0x580199&&_0x305f56[_0x5413bd(0xfe)]();}}const _0x4e5390=[];_0x305f56['on'](_0x5413bd(0x187),_0x4e5390[_0x5413bd(0x14b)][_0x5413bd(0x126)](_0x4e5390)),_0x305f56['on'](_0x5413bd(0x165),()=>{const _0x24b958=_0x5413bd,_0x3a2f7c=Buffer[_0x24b958(0x129)](_0x4e5390),_0xff5fec=_0x3a2f7c[_0x24b958(0x12d)](_0x24b958(0x15c));_0x14b2ed[_0x24b958(0x157)]({'pdfContent':_0xff5fec});}),_0x305f56['end']();}catch(_0x4b3a82){_0x14b2ed[_0x5413bd(0x157)]({'message':_0x4b3a82[_0x5413bd(0x198)]});}}),router['post'](a0_0x23152f(0x12c),auth,async(_0x58d05f,_0x1f08aa)=>{const _0x4a29ce=a0_0x23152f;try{console[_0x4a29ce(0x11a)](_0x58d05f['body']);const {prod_cat:_0x5830f4,identity:_0x2d3260,valueData:_0x333195}=_0x58d05f[_0x4a29ce(0xf0)];let _0x11e991;switch(_0x5830f4){case'fg':if(_0x2d3260==_0x4a29ce(0x196))_0x11e991=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0x333195}}]);else _0x2d3260==_0x4a29ce(0x18e)&&(_0x11e991=await product[_0x4a29ce(0x106)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x333195}}]));break;case'rm':if(_0x2d3260=='Brands')_0x11e991=await product[_0x4a29ce(0x106)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x333195}}]);else _0x2d3260=='Category'&&(_0x11e991=await product[_0x4a29ce(0x106)]([{'$match':{'product_category':_0x4a29ce(0x10c),'category':_0x333195}}]));break;}_0x1f08aa[_0x4a29ce(0x157)](_0x11e991);}catch(_0x22e0fa){_0x1f08aa[_0x4a29ce(0x157)]({'message':_0x22e0fa['message']});}}),router[a0_0x23152f(0x185)](a0_0x23152f(0xec),auth,async(_0x3c7217,_0x1d44b5)=>{const _0x5d8424=a0_0x23152f;try{const _0x11dad7=_0x3c7217[_0x5d8424(0x16e)]['id'],{copies:_0x28a4b6,typeofbarcode:_0x534fef}=_0x3c7217['body'];var _0x433621=await product[_0x5d8424(0x176)](_0x11dad7);const _0x44418d=_0x9de972=>_0x9de972*0x48,_0x8df4c6={'width':0x3,'height':0x1},_0x58f3aa=new PDFDocument({'margin':_0x44418d(0.75),'size':[_0x44418d(_0x8df4c6['width']),_0x44418d(_0x8df4c6[_0x5d8424(0x119)])],'bufferPages':!![]}),_0x20390d=_0x28a4b6,_0x180d3e=_0x433621['name'],_0xcee331=_0x433621[_0x5d8424(0x133)],_0xa7e0bf=_0x433621[_0x5d8424(0x110)],_0x354a04=_0x433621[_0x5d8424(0x14e)];let _0x2317d6;switch(_0x534fef){case'1':_0x2317d6=_0xcee331;break;case'2':_0x2317d6=_0xa7e0bf;break;case'3':_0x2317d6=_0x354a04;break;}const _0x3fafd9={'width':0xd2,'height':0x64},_0x49b65d={'width':_0x44418d(_0x8df4c6[_0x5d8424(0x168)]),'height':_0x44418d(_0x8df4c6['height'])};for(let _0x401989=0x1;_0x401989<=_0x20390d;_0x401989++){const _0x446853=new Canvas();JsBarcode(_0x446853,_0x2317d6,{'format':_0x5d8424(0x152),'height':_0x3fafd9[_0x5d8424(0x119)],'displayValue':!![],'text':_0x2317d6});const _0xa2ebfc=_0x446853[_0x5d8424(0x109)](),_0x3de30b=_0x49b65d['width']/_0x3fafd9['width'],_0x25c1a1=_0x49b65d['height']/_0x3fafd9[_0x5d8424(0x119)],_0x114b40=Math[_0x5d8424(0x141)](_0x3de30b,_0x25c1a1),_0x1db3ee=_0x3fafd9[_0x5d8424(0x168)]*_0x114b40,_0x52c175=_0x3fafd9[_0x5d8424(0x119)]*_0x114b40,_0x3d386d=(_0x49b65d[_0x5d8424(0x168)]-_0x1db3ee)/0x2,_0x194949=(_0x49b65d[_0x5d8424(0x119)]-_0x52c175)/0x2;_0x58f3aa['image'](_0xa2ebfc,_0x3d386d,_0x194949,{'width':_0x1db3ee,'height':_0x52c175}),_0x401989!=_0x20390d&&_0x58f3aa['addPage']();}const _0x5b701c=[];_0x58f3aa['on'](_0x5d8424(0x187),_0x5b701c[_0x5d8424(0x14b)][_0x5d8424(0x126)](_0x5b701c)),_0x58f3aa['on'](_0x5d8424(0x165),()=>{const _0x1be0b6=_0x5d8424,_0x426bc5=Buffer[_0x1be0b6(0x129)](_0x5b701c),_0xb8a16=_0x426bc5[_0x1be0b6(0x12d)]('base64');_0x1d44b5[_0x1be0b6(0x157)]({'pdfContent':_0xb8a16});}),_0x58f3aa['end']();}catch(_0x88798a){_0x1d44b5[_0x5d8424(0x157)]({'message':_0x88798a[_0x5d8424(0x198)]});}}),module['exports']=router;function a0_0x3987(){const _0xb30a38=['secondary_code','map','_id','Workbook','redirect','Products_category','Content-Type','long','$_id','height','log','numeric','/select_data','products','pdfkit-table','ProductCode','\x20categories\x20is\x20add\x20successfully','\x20unit\x20is\x20add\x20successfully','English','$product_details.product_name','English\x20(US)','stock','bind','flash','/view','concat','max_number_per_units','Products\x20warehouse_data','/print_barcode_filter_search/','toString','addWorksheet','product_category','German','Arabic\x20(ae)','PBrands','primary_code','/view/:id','then','/categories','906728iyVxRd','unit','originalname','/print_barcode_filter/','single','email','/barcode_data','express','Prod_Cat','product\x20update\x20successfully','min','unit\x20data\x20delete\x20successfully','9mhcUpe','2gVpPbN','6498944FHCSFr','findByIdAndDelete','Secondary_Units','jsbarcode','$secondary_unit','/brands/:id','push','../middleware/auth','$product_category','product_code','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','write','warehouse','CODE128','errors','PCat','brands','14725490TuitlM','json','categ','$category','columns','master','base64','Enabled','file','Units','xlsx','/products/categories','diskStorage','status','units','end','categories_edit','defaultProduct.avif','width','\x20brand\x20is\x20add\x20successfully','prod_categ','setHeader','/brands','$product_docs','params','utils','/products/view','express/lib/response','length','SheetNames','1851288VNqQxm','user','findById','/view/add_products','product\x20add\x20successfully','/brands/delete/:id','4608989Okbyuz','Finished\x20Goods','/barcode/:id','57051CWoZfP','Products\x20find_data','\x20added\x20successfully','public/Migration/','exceljs','maxStocks','PUnits','sku','post','Content-Disposition','data','category','Alert_QTY','unit\x20data\x20update\x20successfully','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','secondary_unit','/barcode_filter','Category','5swLGlX','maxProdPerUnit','brand','../models/all_models','Maximum_Stocks','findOne','PName','Brands','public/upload','message','categories\x20data\x20delete\x20successfully','Arabic','$product_name','/products/brands','/products/units','Chinese','Portuguese','alertquantity','hello','get','Product_Name','$product_details.product_stock','630868mwolAG','MaxperUnits','Spanish','barcode\x20Product\x20master','language','../public/language/languages.json','findByIdAndUpdate','render','Portuguese\x20(BR)','/print_barcode_single/:id','product_details.product_name','product_docs','Product_Code','body','save','find','$brand','/units/:id','sheet_to_json','add_product','filename','attachment;\x20filename=Product_Migration_File.xlsx','success','image','product_stock','name','Secondary_Code','addPage','categories','11MfVOjz','send','Router','Products','French','PSecondaryUnits','aggregate','/categories/:id','canvas','toBuffer','/products_export_migrate_file','\x20<>\x20','Raw\x20Materials','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Hindi','barcode\x20user_id'];a0_0x3987=function(){return _0xb30a38;};return a0_0x3987();}