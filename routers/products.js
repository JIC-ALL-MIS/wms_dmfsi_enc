const a0_0x359366=a0_0x22cb;(function(_0x72b3d1,_0x341e7a){const _0x454812=a0_0x22cb,_0x2c31a7=_0x72b3d1();while(!![]){try{const _0x562913=parseInt(_0x454812(0x18b))/0x1+-parseInt(_0x454812(0x1ed))/0x2+parseInt(_0x454812(0x186))/0x3*(parseInt(_0x454812(0x158))/0x4)+-parseInt(_0x454812(0x1ec))/0x5+-parseInt(_0x454812(0x160))/0x6+-parseInt(_0x454812(0x141))/0x7+parseInt(_0x454812(0x14e))/0x8*(parseInt(_0x454812(0x148))/0x9);if(_0x562913===_0x341e7a)break;else _0x2c31a7['push'](_0x2c31a7['shift']());}catch(_0xaf0759){_0x2c31a7['push'](_0x2c31a7['shift']());}}}(a0_0x29a2,0xbfdcf));const express=require(a0_0x359366(0x1e7)),res=require('express/lib/response'),app=express(),router=express[a0_0x359366(0x142)](),multer=require(a0_0x359366(0x1af)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x359366(0x1d5)),auth=require(a0_0x359366(0x1e3)),users=require(a0_0x359366(0x1de)),excelJS=require(a0_0x359366(0x1d9)),xlsx=require('xlsx'),JsBarcode=require(a0_0x359366(0x1d7)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x359366(0x1d0));router[a0_0x359366(0x171)](a0_0x359366(0x1e6),auth,async(_0xa5e094,_0x40e193)=>{const _0x4d27b1=a0_0x359366;try{const {username:_0x59b637,email:_0x1aa1f1,role:_0x2f600e}=_0xa5e094[_0x4d27b1(0x1e0)],_0x41ec4f=_0xa5e094[_0x4d27b1(0x1e0)],_0x16fabb=await profile[_0x4d27b1(0x178)]({'email':_0x41ec4f[_0x4d27b1(0x164)]}),_0x4aab62=await master_shop[_0x4d27b1(0x184)]();console['log']('master',_0x4aab62);const _0x4a123f=await categories['find']();if(_0x4aab62[0x0]['language']=='English\x20(US)')var _0x26be78=users[_0x4d27b1(0x1c4)];else{if(_0x4aab62[0x0][_0x4d27b1(0x1d3)]==_0x4d27b1(0x1d6))var _0x26be78=users['Hindi'];else{if(_0x4aab62[0x0][_0x4d27b1(0x1d3)]=='German')var _0x26be78=users[_0x4d27b1(0x172)];else{if(_0x4aab62[0x0]['language']==_0x4d27b1(0x1cd))var _0x26be78=users['Spanish'];else{if(_0x4aab62[0x0][_0x4d27b1(0x1d3)]=='French')var _0x26be78=users[_0x4d27b1(0x161)];else{if(_0x4aab62[0x0][_0x4d27b1(0x1d3)]=='Portuguese\x20(BR)')var _0x26be78=users['Portuguese'];else{if(_0x4aab62[0x0]['language']==_0x4d27b1(0x1e1))var _0x26be78=users[_0x4d27b1(0x1e1)];else{if(_0x4aab62[0x0][_0x4d27b1(0x1d3)]==_0x4d27b1(0x138))var _0x26be78=users[_0x4d27b1(0x1b2)];}}}}}}}_0x40e193['render'](_0x4d27b1(0x150),{'success':_0xa5e094[_0x4d27b1(0x176)](_0x4d27b1(0x130)),'errors':_0xa5e094['flash'](_0x4d27b1(0x165)),'role':_0x41ec4f,'profile':_0x16fabb,'user':_0x4a123f,'master_shop':_0x4aab62,'language':_0x26be78});}catch(_0x27052e){console[_0x4d27b1(0x175)](_0x27052e);}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x1e6),auth,async(_0xa00b0a,_0x4a139b)=>{const _0x5337a2=a0_0x359366;try{const {name:_0x399b06,products:_0x4af124}=_0xa00b0a[_0x5337a2(0x1cf)],_0x58f7c0=new categories({'name':_0x399b06,'products':_0x4af124}),_0x58ff4f=await categories[_0x5337a2(0x178)]({'name':_0x399b06});_0x58ff4f?_0xa00b0a['flash'](_0x5337a2(0x165),_0x399b06+_0x5337a2(0x193)):_0xa00b0a[_0x5337a2(0x176)](_0x5337a2(0x130),_0x399b06+_0x5337a2(0x17b));const _0x3596f9=await _0x58f7c0[_0x5337a2(0x1b4)]();_0x4a139b[_0x5337a2(0x1f0)](_0x5337a2(0x1b5));}catch(_0x13bc00){console[_0x5337a2(0x175)](_0x13bc00);}}),router[a0_0x359366(0x171)](a0_0x359366(0x1ee),auth,async(_0x1b0a74,_0x595f4e)=>{const _0x50d640=a0_0x359366;try{const {username:_0x47991c,email:_0x2a7580,role:_0x50f0f4}=_0x1b0a74['user'],_0x57b4aa=_0x1b0a74[_0x50d640(0x1e0)],_0x3f03d1=await profile['findOne']({'email':_0x57b4aa[_0x50d640(0x164)]}),_0x27f53c=await master_shop[_0x50d640(0x184)]();console['log'](_0x50d640(0x1c7),_0x27f53c);const _0x126559=_0x1b0a74['params']['id'];console[_0x50d640(0x175)](_0x126559);const _0x55ecc0=await categories[_0x50d640(0x14f)](_0x126559);if(_0x27f53c[0x0]['language']==_0x50d640(0x1bf))var _0xc3c995=users['English'];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]==_0x50d640(0x1d6))var _0xc3c995=users['Hindi'];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]==_0x50d640(0x172))var _0xc3c995=users[_0x50d640(0x172)];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]==_0x50d640(0x1cd))var _0xc3c995=users[_0x50d640(0x1cd)];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]==_0x50d640(0x161))var _0xc3c995=users[_0x50d640(0x161)];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]=='Portuguese\x20(BR)')var _0xc3c995=users[_0x50d640(0x13c)];else{if(_0x27f53c[0x0][_0x50d640(0x1d3)]==_0x50d640(0x1e1))var _0xc3c995=users['Chinese'];else{if(_0x27f53c[0x0]['language']==_0x50d640(0x138))var _0xc3c995=users['Arabic'];}}}}}}}_0x595f4e[_0x50d640(0x1c9)](_0x50d640(0x150),{'success':_0x1b0a74[_0x50d640(0x176)](_0x50d640(0x130)),'errors':_0x1b0a74['flash'](_0x50d640(0x165)),'role':_0x57b4aa,'profile':_0x3f03d1,'master_shop':_0x27f53c,'user':_0x55ecc0,'language':_0xc3c995});}catch(_0x27546e){console['log'](_0x27546e);}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x1ee),auth,async(_0x594f52,_0x3ee598)=>{const _0x38024c=a0_0x359366;try{const _0x14bb11=_0x594f52['params']['id'],_0x5c89e2=await categories[_0x38024c(0x1c8)](_0x14bb11,_0x594f52[_0x38024c(0x1cf)]);_0x594f52['flash'](_0x38024c(0x130),''+users[_0x38024c(0x14c)]),_0x3ee598['redirect']('/products/categories');}catch(_0x2872af){console['log'](_0x2872af);}}),router[a0_0x359366(0x171)]('/categories/delete/:id',auth,async(_0x11e157,_0x5ce909)=>{const _0x4e381a=a0_0x359366;try{const _0x44a751=_0x11e157[_0x4e381a(0x18f)]['id'],_0x4fb62d=await categories[_0x4e381a(0x146)](_0x44a751);_0x11e157[_0x4e381a(0x176)]('success',_0x4e381a(0x192)),_0x5ce909[_0x4e381a(0x1f0)](_0x4e381a(0x1b5));}catch(_0x370274){console['log'](_0x370274);}}),router[a0_0x359366(0x171)]('/brands',auth,async(_0x1d50b5,_0x58265b)=>{const _0x15d33b=a0_0x359366;try{const {username:_0x38c7b4,email:_0x32f91b,role:_0x50629f}=_0x1d50b5['user'],_0x4ef06c=_0x1d50b5['user'],_0x174984=await profile[_0x15d33b(0x178)]({'email':_0x4ef06c[_0x15d33b(0x164)]}),_0x28873e=await master_shop[_0x15d33b(0x184)]();console[_0x15d33b(0x175)](_0x15d33b(0x1c7),_0x28873e);const _0x280680=await brands[_0x15d33b(0x184)]();if(_0x28873e[0x0][_0x15d33b(0x1d3)]==_0x15d33b(0x1bf))var _0x2bdb6b=users[_0x15d33b(0x1c4)];else{if(_0x28873e[0x0]['language']=='Hindi')var _0x2bdb6b=users[_0x15d33b(0x1d6)];else{if(_0x28873e[0x0][_0x15d33b(0x1d3)]==_0x15d33b(0x172))var _0x2bdb6b=users[_0x15d33b(0x172)];else{if(_0x28873e[0x0][_0x15d33b(0x1d3)]==_0x15d33b(0x1cd))var _0x2bdb6b=users[_0x15d33b(0x1cd)];else{if(_0x28873e[0x0]['language']=='French')var _0x2bdb6b=users[_0x15d33b(0x161)];else{if(_0x28873e[0x0][_0x15d33b(0x1d3)]=='Portuguese\x20(BR)')var _0x2bdb6b=users[_0x15d33b(0x13c)];else{if(_0x28873e[0x0][_0x15d33b(0x1d3)]==_0x15d33b(0x1e1))var _0x2bdb6b=users[_0x15d33b(0x1e1)];else{if(_0x28873e[0x0][_0x15d33b(0x1d3)]==_0x15d33b(0x138))var _0x2bdb6b=users[_0x15d33b(0x1b2)];}}}}}}}_0x58265b['render'](_0x15d33b(0x196),{'success':_0x1d50b5[_0x15d33b(0x176)](_0x15d33b(0x130)),'errors':_0x1d50b5[_0x15d33b(0x176)](_0x15d33b(0x165)),'role':_0x4ef06c,'profile':_0x174984,'master_shop':_0x28873e,'user':_0x280680,'language':_0x2bdb6b});}catch(_0x92ff24){console[_0x15d33b(0x175)](_0x92ff24);}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x180),auth,async(_0x455d12,_0x5cbf1a)=>{const _0x1b9b14=a0_0x359366;try{const {name:_0x306634,products:_0x2bcd24}=_0x455d12[_0x1b9b14(0x1cf)],_0x343c10=new brands({'name':_0x306634,'products':_0x2bcd24}),_0x2ca31f=await brands[_0x1b9b14(0x178)]({'name':_0x306634});_0x2ca31f?_0x455d12[_0x1b9b14(0x176)]('errors',_0x306634+_0x1b9b14(0x151)):_0x455d12['flash'](_0x1b9b14(0x130),_0x306634+_0x1b9b14(0x1e4));const _0x691e8c=await _0x343c10['save']();_0x5cbf1a[_0x1b9b14(0x1f0)]('/products/brands');}catch(_0x5f0c74){console['log'](_0x5f0c74);}}),router[a0_0x359366(0x171)](a0_0x359366(0x1c6),auth,async(_0x5830ba,_0x451e88)=>{const _0x170251=a0_0x359366;try{const {username:_0xf87651,email:_0x472ce8,role:_0x3e12ad}=_0x5830ba['user'],_0x3b9456=_0x5830ba['user'],_0x32fdde=await profile[_0x170251(0x178)]({'email':_0x3b9456[_0x170251(0x164)]}),_0xeaca11=await master_shop['find']();console[_0x170251(0x175)](_0x170251(0x1c7),_0xeaca11);const _0x18cf02=_0x5830ba[_0x170251(0x18f)]['id'];console[_0x170251(0x175)](_0x18cf02);const _0x502db2=await brands[_0x170251(0x14f)](_0x18cf02);if(_0xeaca11[0x0][_0x170251(0x1d3)]==_0x170251(0x1bf))var _0x5dfe75=users[_0x170251(0x1c4)];else{if(_0xeaca11[0x0]['language']==_0x170251(0x1d6))var _0x5dfe75=users[_0x170251(0x1d6)];else{if(_0xeaca11[0x0]['language']=='German')var _0x5dfe75=users[_0x170251(0x172)];else{if(_0xeaca11[0x0][_0x170251(0x1d3)]==_0x170251(0x1cd))var _0x5dfe75=users[_0x170251(0x1cd)];else{if(_0xeaca11[0x0][_0x170251(0x1d3)]==_0x170251(0x161))var _0x5dfe75=users['French'];else{if(_0xeaca11[0x0][_0x170251(0x1d3)]==_0x170251(0x19a))var _0x5dfe75=users[_0x170251(0x13c)];else{if(_0xeaca11[0x0]['language']==_0x170251(0x1e1))var _0x5dfe75=users[_0x170251(0x1e1)];else{if(_0xeaca11[0x0]['language']==_0x170251(0x138))var _0x5dfe75=users[_0x170251(0x1b2)];}}}}}}}_0x451e88['render'](_0x170251(0x196),{'success':_0x5830ba[_0x170251(0x176)](_0x170251(0x130)),'errors':_0x5830ba[_0x170251(0x176)](_0x170251(0x165)),'role':_0x3b9456,'profile':_0x32fdde,'master_shop':_0xeaca11,'user':_0x502db2,'language':_0x5dfe75});}catch(_0x4b2cb2){console[_0x170251(0x175)](_0x4b2cb2);}}),router['post'](a0_0x359366(0x1c6),auth,async(_0x5a50bd,_0x58c936)=>{const _0x342b12=a0_0x359366;try{const _0x5052db=_0x5a50bd[_0x342b12(0x18f)]['id'],_0x2e3b7a=await brands[_0x342b12(0x1c8)](_0x5052db,_0x5a50bd[_0x342b12(0x1cf)]);_0x5a50bd[_0x342b12(0x176)](_0x342b12(0x130),_0x342b12(0x1b0)),_0x58c936[_0x342b12(0x1f0)]('/products/brands');}catch(_0x1c4353){console[_0x342b12(0x175)](_0x1c4353);}}),router[a0_0x359366(0x171)](a0_0x359366(0x1b3),auth,async(_0x12a27f,_0x59eea8)=>{const _0xbf410e=a0_0x359366;try{const _0x1b064c=_0x12a27f['params']['id'],_0x3a0d2d=await brands[_0xbf410e(0x146)](_0x1b064c);_0x12a27f[_0xbf410e(0x176)](_0xbf410e(0x130),_0xbf410e(0x134)),_0x59eea8[_0xbf410e(0x1f0)]('/products/brands');}catch(_0x5cd5f2){console[_0xbf410e(0x175)](_0x5cd5f2);}}),router[a0_0x359366(0x171)](a0_0x359366(0x153),auth,async(_0x416d8f,_0x2af889)=>{const _0x34da13=a0_0x359366;try{const {username:_0x175562,email:_0x1b56ef,role:_0x42fc20}=_0x416d8f[_0x34da13(0x1e0)],_0x43bee1=_0x416d8f[_0x34da13(0x1e0)],_0x331e29=await profile['findOne']({'email':_0x43bee1[_0x34da13(0x164)]}),_0x590851=await master_shop[_0x34da13(0x184)]();console['log'](_0x34da13(0x1c7),_0x590851);const _0x464cd7=await units['find']();if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x1bf))var _0x43bc12=users[_0x34da13(0x1c4)];else{if(_0x590851[0x0]['language']==_0x34da13(0x1d6))var _0x43bc12=users[_0x34da13(0x1d6)];else{if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x172))var _0x43bc12=users[_0x34da13(0x172)];else{if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x1cd))var _0x43bc12=users['Spanish'];else{if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x161))var _0x43bc12=users[_0x34da13(0x161)];else{if(_0x590851[0x0]['language']=='Portuguese\x20(BR)')var _0x43bc12=users[_0x34da13(0x13c)];else{if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x1e1))var _0x43bc12=users['Chinese'];else{if(_0x590851[0x0][_0x34da13(0x1d3)]==_0x34da13(0x138))var _0x43bc12=users[_0x34da13(0x1b2)];}}}}}}}_0x2af889[_0x34da13(0x1c9)](_0x34da13(0x173),{'success':_0x416d8f['flash'](_0x34da13(0x130)),'errors':_0x416d8f[_0x34da13(0x176)](_0x34da13(0x165)),'role':_0x43bee1,'profile':_0x331e29,'master_shop':_0x590851,'user':_0x464cd7,'language':_0x43bc12});}catch(_0x8a30b6){console['log'](_0x8a30b6);}}),router['post'](a0_0x359366(0x153),auth,async(_0x1b83a4,_0x594140)=>{const _0x48a33f=a0_0x359366;try{const {name:_0x3d370b,secondary_unit:_0x36a685,products:_0x2e8294}=_0x1b83a4[_0x48a33f(0x1cf)],_0x2d1b65=new units({'name':_0x3d370b,'secondary_unit':_0x36a685,'products':_0x2e8294}),_0xb0b54c=await units[_0x48a33f(0x178)]({'name':_0x3d370b});_0xb0b54c?_0x1b83a4[_0x48a33f(0x176)]('errors',_0x3d370b+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1b83a4['flash'](_0x48a33f(0x130),_0x3d370b+_0x48a33f(0x1a7));const _0x3dd11a=await _0x2d1b65[_0x48a33f(0x1b4)]();_0x594140[_0x48a33f(0x1f0)](_0x48a33f(0x1f2));}catch(_0x11e3dd){console['log'](_0x11e3dd);}}),router['get'](a0_0x359366(0x17c),auth,async(_0x146a49,_0x4d74c9)=>{const _0x580102=a0_0x359366;try{const {username:_0x133b6c,email:_0x520e7e,role:_0x453b19}=_0x146a49[_0x580102(0x1e0)],_0x230245=_0x146a49[_0x580102(0x1e0)],_0x2a1696=await profile[_0x580102(0x178)]({'email':_0x230245[_0x580102(0x164)]}),_0x48e9e9=await master_shop[_0x580102(0x184)]();console[_0x580102(0x175)](_0x580102(0x1c7),_0x48e9e9);const _0x330be7=_0x146a49[_0x580102(0x18f)]['id'],_0x5def98=await units['findById'](_0x330be7);if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x1bf))var _0x246f15=users[_0x580102(0x1c4)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x1d6))var _0x246f15=users[_0x580102(0x1d6)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x172))var _0x246f15=users['German'];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x1cd))var _0x246f15=users[_0x580102(0x1cd)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x161))var _0x246f15=users[_0x580102(0x161)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x19a))var _0x246f15=users[_0x580102(0x13c)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x1e1))var _0x246f15=users[_0x580102(0x1e1)];else{if(_0x48e9e9[0x0][_0x580102(0x1d3)]==_0x580102(0x138))var _0x246f15=users['Arabic'];}}}}}}}_0x4d74c9[_0x580102(0x1c9)]('units',{'success':_0x146a49['flash'](_0x580102(0x130)),'errors':_0x146a49[_0x580102(0x176)](_0x580102(0x165)),'role':_0x230245,'profile':_0x2a1696,'master_shop':_0x48e9e9,'user':_0x5def98,'language':_0x246f15});}catch(_0x3f3979){console['log'](_0x3f3979);}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x17c),auth,async(_0x2a5109,_0x2da7a5)=>{const _0x42b8e7=a0_0x359366;try{const _0xe03c53=_0x2a5109['params']['id'],_0x1b409c=await units[_0x42b8e7(0x1c8)](_0xe03c53,_0x2a5109[_0x42b8e7(0x1cf)]);_0x2a5109[_0x42b8e7(0x176)](_0x42b8e7(0x130),_0x42b8e7(0x136)),_0x2da7a5[_0x42b8e7(0x1f0)]('/products/units');}catch(_0x192d92){console[_0x42b8e7(0x175)](_0x192d92);}}),router[a0_0x359366(0x171)](a0_0x359366(0x198),auth,async(_0xcd5a75,_0xe62dcc)=>{const _0x3658f3=a0_0x359366;try{const _0x99aaa5=_0xcd5a75[_0x3658f3(0x18f)]['id'],_0x954be9=await units[_0x3658f3(0x146)](_0x99aaa5);_0xcd5a75[_0x3658f3(0x176)](_0x3658f3(0x130),_0x3658f3(0x1c3)),_0xe62dcc[_0x3658f3(0x1f0)](_0x3658f3(0x1f2));}catch(_0x53462d){console[_0x3658f3(0x175)](_0x53462d);}});const storage=multer[a0_0x359366(0x1ac)]({'destination':(_0x3997fd,_0x1f7b1d,_0x461e9b)=>{const _0xe1bc1d=a0_0x359366;_0x461e9b(null,_0xe1bc1d(0x12e));},'filename':(_0x3999d0,_0x52a07d,_0xb39cf9)=>{const _0x20eb5b=a0_0x359366;_0xb39cf9(null,Date[_0x20eb5b(0x1bb)]()+_0x52a07d[_0x20eb5b(0x16f)]);}}),upload=multer({'storage':storage});router[a0_0x359366(0x171)](a0_0x359366(0x1a1),auth,async(_0x278f0d,_0x425d6c)=>{const _0x354f09=a0_0x359366;try{const {username:_0x111145,email:_0x12e7f8,role:_0x15468b}=_0x278f0d[_0x354f09(0x1e0)],_0x5c6f4e=_0x278f0d[_0x354f09(0x1e0)],_0x323c66=await profile[_0x354f09(0x178)]({'email':_0x5c6f4e[_0x354f09(0x164)]}),_0x5f243e={'year':_0x354f09(0x15e),'month':_0x354f09(0x18d),'day':_0x354f09(0x15e)},_0x5225cc=await master_shop[_0x354f09(0x184)]();console[_0x354f09(0x175)](_0x354f09(0x1a6),_0x5225cc);const _0x4cb692=await product[_0x354f09(0x184)]();console[_0x354f09(0x175)](_0x354f09(0x194),_0x4cb692);const _0x4c241d=await warehouse[_0x354f09(0x1b6)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x354f09(0x157),'localField':_0x354f09(0x16b),'foreignField':'name','as':_0x354f09(0x16e)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x354f09(0x137),'product_stock':_0x354f09(0x1eb)}},{'$group':{'_id':_0x354f09(0x16a),'product_stock':{'$sum':_0x354f09(0x179)}}}]);console[_0x354f09(0x175)](_0x354f09(0x18a),_0x4c241d),_0x4c241d[_0x354f09(0x166)](_0x4b8cdd=>{const _0x31f768=_0x354f09,_0x34e3bc=_0x4cb692[_0x31f768(0x1c2)](_0x4920b1=>{const _0x4afd92=_0x31f768;_0x4920b1[_0x4afd92(0x1a0)]==_0x4b8cdd[_0x4afd92(0x155)]&&(_0x4920b1[_0x4afd92(0x1d2)]=parseInt(_0x4920b1['stock'])+parseInt(_0x4b8cdd[_0x4afd92(0x1dc)]));});}),console[_0x354f09(0x175)]('Products\x20find_data',_0x4cb692);if(_0x5225cc[0x0][_0x354f09(0x1d3)]==_0x354f09(0x1bf))var _0x24de42=users['English'];else{if(_0x5225cc[0x0][_0x354f09(0x1d3)]==_0x354f09(0x1d6))var _0x24de42=users[_0x354f09(0x1d6)];else{if(_0x5225cc[0x0]['language']==_0x354f09(0x172))var _0x24de42=users[_0x354f09(0x172)];else{if(_0x5225cc[0x0]['language']==_0x354f09(0x1cd))var _0x24de42=users[_0x354f09(0x1cd)];else{if(_0x5225cc[0x0][_0x354f09(0x1d3)]==_0x354f09(0x161))var _0x24de42=users[_0x354f09(0x161)];else{if(_0x5225cc[0x0][_0x354f09(0x1d3)]==_0x354f09(0x19a))var _0x24de42=users['Portuguese'];else{if(_0x5225cc[0x0][_0x354f09(0x1d3)]==_0x354f09(0x1e1))var _0x24de42=users[_0x354f09(0x1e1)];else{if(_0x5225cc[0x0][_0x354f09(0x1d3)]=='Arabic\x20(ae)')var _0x24de42=users[_0x354f09(0x1b2)];}}}}}}}_0x425d6c[_0x354f09(0x1c9)](_0x354f09(0x157),{'success':_0x278f0d[_0x354f09(0x176)](_0x354f09(0x130)),'errors':_0x278f0d[_0x354f09(0x176)](_0x354f09(0x165)),'alldata':_0x4cb692,'profile':_0x323c66,'master_shop':_0x5225cc,'role':_0x5c6f4e,'product_stock':_0x4c241d,'language':_0x24de42});}catch(_0x2f0712){console[_0x354f09(0x175)](_0x2f0712);}}),router[a0_0x359366(0x171)](a0_0x359366(0x1a3),auth,async(_0x43e295,_0x13b480)=>{const _0x17798d=a0_0x359366;try{const {username:_0x100451,email:_0x4f277d,role:_0x334fce}=_0x43e295[_0x17798d(0x1e0)],_0x5d0225=_0x43e295[_0x17798d(0x1e0)],_0x53b75c=await profile[_0x17798d(0x178)]({'email':_0x5d0225[_0x17798d(0x164)]}),_0x324059=await master_shop[_0x17798d(0x184)]();console['log'](_0x17798d(0x1c7),_0x324059);const _0x115e1b=await categories['find']({}),_0x43fb04=await brands[_0x17798d(0x184)]({}),_0x185841=await units[_0x17798d(0x184)]({}),_0x2573f4=await warehouse['find']({'status':_0x17798d(0x13a)});if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x1bf))var _0x528add=users['English'];else{if(_0x324059[0x0][_0x17798d(0x1d3)]=='Hindi')var _0x528add=users['Hindi'];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x172))var _0x528add=users[_0x17798d(0x172)];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x1cd))var _0x528add=users[_0x17798d(0x1cd)];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x161))var _0x528add=users[_0x17798d(0x161)];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x19a))var _0x528add=users[_0x17798d(0x13c)];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x1e1))var _0x528add=users[_0x17798d(0x1e1)];else{if(_0x324059[0x0][_0x17798d(0x1d3)]==_0x17798d(0x138))var _0x528add=users['Arabic'];}}}}}}}_0x13b480['render'](_0x17798d(0x13f),{'success':_0x43e295['flash'](_0x17798d(0x130)),'errors':_0x43e295[_0x17798d(0x176)](_0x17798d(0x165)),'role':_0x5d0225,'profile':_0x53b75c,'categories':_0x115e1b,'brands':_0x43fb04,'master_shop':_0x324059,'units':_0x185841,'language':_0x528add,'find_data':_0x2573f4});}catch(_0x20ab03){console['log'](_0x20ab03);}}),router[a0_0x359366(0x1f1)]('/view/add_products',auth,upload[a0_0x359366(0x185)]('image'),async(_0x1d8879,_0xd9bbd)=>{const _0x36cf53=a0_0x359366;try{const {name:_0x55bf77,category:_0x1573be,brand:_0x21e17a,unit:_0x3e8cb9,alertquantity:_0x39a9ee,stock:_0x359c5b,product_code:_0x2fdd71,warehouse:_0x229612,primary_ItemCode:_0x148c66,second_ItemCode:_0x310a3f,second_unit:_0x5eb1bf,maxPerUnit:_0x5647e6,MaxPerProduct:_0x4e7fbb}=_0x1d8879['body'],_0x35b1b2=_0x1d8879[_0x36cf53(0x191)]?.[_0x36cf53(0x1bc)]||_0x36cf53(0x15b),_0x39f62c=new product({'image':_0x35b1b2,'name':_0x55bf77,'category':_0x1573be,'brand':_0x21e17a,'unit':_0x3e8cb9,'alertquantity':_0x39a9ee,'stock':_0x359c5b,'product_code':_0x2fdd71,'warehouse':_0x229612,'primary_code':_0x148c66,'secondary_code':_0x310a3f,'second_unit':_0x5eb1bf,'maxStocks':_0x4e7fbb,'maxProdPerUnit':_0x5647e6}),_0x24758b=await _0x39f62c[_0x36cf53(0x1b4)](),_0x34792f=await categories[_0x36cf53(0x178)]({'name':_0x1573be});_0x34792f[_0x36cf53(0x157)]=parseInt(_0x34792f[_0x36cf53(0x157)])+0x1,await _0x34792f[_0x36cf53(0x1b4)]();const _0xb21651=await brands[_0x36cf53(0x178)]({'name':_0x21e17a});_0xb21651[_0x36cf53(0x157)]=parseInt(_0xb21651['products'])+0x1,await _0xb21651[_0x36cf53(0x1b4)]();const _0x34f320=await units[_0x36cf53(0x178)]({'name':_0x3e8cb9});_0x34f320['products']=parseInt(_0x34f320['products'])+0x1,await _0x34f320[_0x36cf53(0x1b4)](),_0x1d8879[_0x36cf53(0x176)]('success',_0x36cf53(0x163)),_0xd9bbd[_0x36cf53(0x1f0)](_0x36cf53(0x1ab));}catch(_0x2852f7){console[_0x36cf53(0x175)](_0x2852f7);}}),router[a0_0x359366(0x171)](a0_0x359366(0x1ef),auth,async(_0x2a6308,_0x775f43)=>{const _0x1d3469=a0_0x359366;try{const {username:_0x1ca7d7,email:_0x47b4bf,role:_0x23833e}=_0x2a6308['user'],_0x5f352b=_0x2a6308[_0x1d3469(0x1e0)],_0x411c73=await profile[_0x1d3469(0x178)]({'email':_0x5f352b['email']}),_0x539494=await master_shop[_0x1d3469(0x184)]();console[_0x1d3469(0x175)](_0x1d3469(0x19b),_0x539494);const _0x570c87=_0x2a6308[_0x1d3469(0x18f)]['id'],_0xb92e03=await product[_0x1d3469(0x14f)](_0x570c87),_0x18e977=await categories['find']({}),_0x95a6cb=await brands['find']({}),_0x38378d=await units[_0x1d3469(0x184)]({}),_0x195d42=await warehouse[_0x1d3469(0x184)]({'status':_0x1d3469(0x13a)}),_0x270c71=await units[_0x1d3469(0x1b6)]([{'$group':{'_id':_0x1d3469(0x182),'secondaryunit':{'$first':_0x1d3469(0x17f)}}}]);if(_0x539494[0x0]['language']=='English\x20(US)')var _0x432bfa=users['English'];else{if(_0x539494[0x0]['language']==_0x1d3469(0x1d6))var _0x432bfa=users[_0x1d3469(0x1d6)];else{if(_0x539494[0x0]['language']==_0x1d3469(0x172))var _0x432bfa=users[_0x1d3469(0x172)];else{if(_0x539494[0x0][_0x1d3469(0x1d3)]==_0x1d3469(0x1cd))var _0x432bfa=users['Spanish'];else{if(_0x539494[0x0][_0x1d3469(0x1d3)]==_0x1d3469(0x161))var _0x432bfa=users[_0x1d3469(0x161)];else{if(_0x539494[0x0]['language']==_0x1d3469(0x19a))var _0x432bfa=users[_0x1d3469(0x13c)];else{if(_0x539494[0x0][_0x1d3469(0x1d3)]=='Chinese')var _0x432bfa=users[_0x1d3469(0x1e1)];else{if(_0x539494[0x0]['language']==_0x1d3469(0x138))var _0x432bfa=users['Arabic'];}}}}}}}_0x775f43[_0x1d3469(0x1c9)](_0x1d3469(0x15c),{'success':_0x2a6308[_0x1d3469(0x176)](_0x1d3469(0x130)),'errors':_0x2a6308[_0x1d3469(0x176)](_0x1d3469(0x165)),'role':_0x5f352b,'profile':_0x411c73,'alldata':_0xb92e03,'categories':_0x18e977,'brands':_0x95a6cb,'master_shop':_0x539494,'units':_0x38378d,'secondunit':_0x270c71,'find_data':_0x195d42,'language':_0x432bfa});}catch(_0x350d5d){console[_0x1d3469(0x175)](_0x350d5d);}}),router['post'](a0_0x359366(0x1ef),auth,upload[a0_0x359366(0x185)](a0_0x359366(0x135)),async(_0x267493,_0x57de30)=>{const _0x3bcc98=a0_0x359366;try{console[_0x3bcc98(0x175)](_0x3bcc98(0x149));const _0x541f54=_0x267493[_0x3bcc98(0x18f)]['id'],_0x838c66=await product['findById'](_0x541f54),{image:_0x744a34,name:_0x2e631,category:_0x55644d,brand:_0x46600a,sku:_0x58f731,unit:_0x53a5b4,alertquantity:_0xcc7de8,product_code:_0x9a17e3,warehouse:_0x381dd9,primary_ItemCode:_0x41432f,second_ItemCode:_0x3858a1,second_unit:_0x1f45b6,maxPerUnit:_0xf6da45,MaxPerProduct:_0x804ec0,prod_catdata:_0x44472d}=_0x267493[_0x3bcc98(0x1cf)];_0x267493[_0x3bcc98(0x191)]&&(_0x838c66[_0x3bcc98(0x135)]=_0x267493[_0x3bcc98(0x191)][_0x3bcc98(0x1bc)]);_0x838c66[_0x3bcc98(0x1a0)]=_0x2e631,_0x838c66[_0x3bcc98(0x199)]=_0x55644d,_0x838c66[_0x3bcc98(0x1be)]=_0x46600a,_0x838c66[_0x3bcc98(0x1b7)]=_0x58f731,_0x838c66['unit']=_0x53a5b4,_0x838c66['alertquantity']=_0xcc7de8,_0x838c66['product_code']=_0x9a17e3,_0x838c66['warehouse']=_0x381dd9,_0x838c66[_0x3bcc98(0x1a9)]=_0x41432f,_0x838c66[_0x3bcc98(0x19c)]=_0x3858a1,_0x838c66[_0x3bcc98(0x145)]=_0x1f45b6,_0x838c66[_0x3bcc98(0x19f)]=_0x804ec0,_0x838c66[_0x3bcc98(0x1d1)]=_0xf6da45,_0x838c66[_0x3bcc98(0x1c0)]=_0x44472d;const _0x10cdc8=await _0x838c66[_0x3bcc98(0x1b4)]();console[_0x3bcc98(0x175)](_0x3bcc98(0x1df),_0x838c66),_0x267493[_0x3bcc98(0x176)]('success',_0x3bcc98(0x19d)),_0x57de30[_0x3bcc98(0x1f0)]('/products/view');}catch(_0x3c60c5){console[_0x3bcc98(0x175)](_0x3c60c5);}}),router[a0_0x359366(0x171)](a0_0x359366(0x162),auth,async(_0x5de938,_0x2c197e)=>{const _0x2bca93=a0_0x359366;try{const {username:_0x33c74a,email:_0x4de14c,role:_0x567ff2}=_0x5de938[_0x2bca93(0x1e0)],_0x11e582=_0x5de938[_0x2bca93(0x1e0)],_0x5ee49b=await profile['findOne']({'email':_0x11e582['email']}),_0x47ebeb=await master_shop[_0x2bca93(0x184)]();console[_0x2bca93(0x175)](_0x2bca93(0x12f),_0x47ebeb);const _0x4f62de=_0x5de938[_0x2bca93(0x18f)]['id'],_0x17bf36=await product['findById'](_0x4f62de);console[_0x2bca93(0x175)](_0x2bca93(0x1a8),_0x17bf36);if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]==_0x2bca93(0x1bf))var _0x228689=users['English'];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]==_0x2bca93(0x1d6))var _0x228689=users[_0x2bca93(0x1d6)];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]==_0x2bca93(0x172))var _0x228689=users[_0x2bca93(0x172)];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]=='Spanish')var _0x228689=users[_0x2bca93(0x1cd)];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]=='French')var _0x228689=users['French'];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]==_0x2bca93(0x19a))var _0x228689=users[_0x2bca93(0x13c)];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]=='Chinese')var _0x228689=users[_0x2bca93(0x1e1)];else{if(_0x47ebeb[0x0][_0x2bca93(0x1d3)]==_0x2bca93(0x138))var _0x228689=users[_0x2bca93(0x1b2)];}}}}}}}_0x2c197e['render'](_0x2bca93(0x190),{'success':_0x5de938[_0x2bca93(0x176)]('success'),'errors':_0x5de938['flash']('errors'),'role':_0x11e582,'profile':_0x5ee49b,'alldata':_0x17bf36,'master_shop':_0x47ebeb,'language':_0x228689});}catch(_0x48748f){console['log'](_0x48748f);}}),router[a0_0x359366(0x171)]('/products_export_migrate_file',auth,async(_0x4e13b1,_0x40fc22)=>{const _0x4ade58=a0_0x359366;try{const _0x454113=new excelJS['Workbook'](),_0x38d78b=_0x454113[_0x4ade58(0x174)](_0x4ade58(0x1d8));return _0x38d78b['columns']=[{'header':_0x4ade58(0x1a4),'key':'PName','width':0xa},{'header':'Brands','key':'PBrands','width':0xa},{'header':_0x4ade58(0x1cc),'key':_0x4ade58(0x147),'width':0xa},{'header':'Secondary_Units','key':_0x4ade58(0x18e),'width':0xa},{'header':_0x4ade58(0x1b1),'key':'MaxperUnits','width':0xa},{'header':_0x4ade58(0x13b),'key':'ProductCode','width':0xa},{'header':_0x4ade58(0x1da),'key':_0x4ade58(0x1ce),'width':0xa},{'header':_0x4ade58(0x170),'key':_0x4ade58(0x1ce),'width':0xa},{'header':_0x4ade58(0x1c1),'key':_0x4ade58(0x189),'width':0xa},{'header':_0x4ade58(0x183),'key':'PAlQty','width':0xa},{'header':_0x4ade58(0x132),'key':_0x4ade58(0x16d),'width':0xa},{'header':'Products_category','key':_0x4ade58(0x154),'width':0xa}],_0x40fc22[_0x4ade58(0x17a)]('Content-Type',_0x4ade58(0x197)),_0x40fc22[_0x4ade58(0x17a)]('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x454113[_0x4ade58(0x14d)][_0x4ade58(0x19e)](_0x40fc22)[_0x4ade58(0x1b9)](()=>{_0x40fc22['status'](0xc8);});}catch(_0xce43ac){_0x40fc22['status'](0x190)[_0x4ade58(0x15f)](_0xce43ac);}});function a0_0x29a2(){const _0x2cf25f=['language','/print_barcode_filter_search/','../models/all_models','Hindi','jsbarcode','Products','exceljs','Secondary_Code','height','product_stock','\x20<>\x20','../public/language/languages.json','product\x20edit','user','Chinese','Secondary_Units','../middleware/auth','\x20brand\x20is\x20add\x20successfully','width','/categories','express','/barcode_data','Brands','/print_barcode_filter/','$product_details.product_stock','6763565DmLGIF','2420988qwSPuj','/categories/:id','/view/:id','redirect','post','/products/units','base64','categ','public/upload','barcode\x20Product\x20master','success','Finished\x20Goods','Maximum_Stocks','end','brand\x20data\x20delete\x20successfully','image','unit\x20data\x20update\x20successfully','$product_details.product_name','Arabic\x20(ae)','concat','Enabled','Primary_Code','Portuguese','data','Raw\x20Materials','add_product','addPage','2894465kNbxnW','Router','alertquantity','public/Migration/','secondary_unit','findByIdAndDelete','PUnits','9DePkFt','hello','/barcode_filter','\x20Edit\x20Successfully','categories_edit','xlsx','26013992xoGHCF','findById','categories','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','CODE128','/units','Prod_Cat','_id','toBuffer','products','1464DheLgo','product_code','readFile','defaultProduct.avif','edit_product','SheetNames','numeric','send','2703834kqiVqn','French','/barcode/:id','product\x20add\x20successfully','email','errors','forEach','\x20added\x20successfully','/products_import_migrate_file','message','$product_name','product_details.product_name','/print_barcode','PAlQty','product_docs','originalname','Product_Code','get','German','units','addWorksheet','log','flash','$category','findOne','$product_stock','setHeader','\x20categories\x20is\x20add\x20successfully','/units/:id','/print_barcode_single/:id','Sheets','$secondary_unit','/brands','length','$_id','Alert_QTY','find','single','5154ifMLRb','$product_category','status','PCat','Products\x20warehouse_data','332675NtHano','/filter_product','long','PSecondaryUnits','params','product_barcode','file','categories\x20data\x20delete\x20successfully','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Products\x20find_data','Products_category','brands','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/units/delete/:id','category','Portuguese\x20(BR)','edit\x20Product\x20master','secondary_code','product\x20update\x20successfully','write','maxStocks','name','/view','json','/view/add_products','Product_Name','/select_data','Products\x20master','\x20unit\x20is\x20add\x20successfully','barcode\x20user_id','primary_code','sheet_to_json','/products/view','diskStorage','min','prod_categ','multer','brand\x20data\x20update\x20successfully','max_number_per_units','Arabic','/brands/delete/:id','save','/products/categories','aggregate','sku','public/Migration','then','toString','now','filename','bind','brand','English\x20(US)','product_category','Category','map','unit\x20data\x20delete\x20successfully','English','$brand','/brands/:id','master','findByIdAndUpdate','render','push','unit','Units','Spanish','ProductCode','body','pdfkit-table','maxProdPerUnit','stock'];a0_0x29a2=function(){return _0x2cf25f;};return a0_0x29a2();}function a0_0x22cb(_0xe2de14,_0x3ad9eb){const _0x29a2dc=a0_0x29a2();return a0_0x22cb=function(_0x22cbbe,_0x508496){_0x22cbbe=_0x22cbbe-0x12c;let _0x53ae4e=_0x29a2dc[_0x22cbbe];return _0x53ae4e;},a0_0x22cb(_0xe2de14,_0x3ad9eb);}const storage1=multer[a0_0x359366(0x1ac)]({'destination':(_0x50dca9,_0x1a5da3,_0x4f0334)=>{const _0x125b95=a0_0x359366;_0x4f0334(null,_0x125b95(0x1b8));},'filename':(_0x1ea013,_0x28454a,_0x5e8f6a)=>{const _0xb89b40=a0_0x359366;_0x5e8f6a(null,Date[_0xb89b40(0x1bb)]()+_0x28454a[_0xb89b40(0x16f)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x359366(0x1f1)](a0_0x359366(0x168),auth,uploadMigrate[a0_0x359366(0x185)]('migrate_product_fule'),async(_0x26a8ea,_0x12a5b3)=>{const _0x31c577=a0_0x359366,_0x11c7ec=_0x26a8ea[_0x31c577(0x191)][_0x31c577(0x1bc)],_0x3fa636=await xlsx[_0x31c577(0x15a)](_0x31c577(0x144)+_0x11c7ec);let _0x1bc185=_0x3fa636[_0x31c577(0x15d)],_0x1faf7b=xlsx['utils'][_0x31c577(0x1aa)](_0x3fa636[_0x31c577(0x17e)][_0x1bc185[0x0]]);for(const _0x5ed152 of _0x1faf7b){const _0x4ed4f7=_0x5ed152[_0x31c577(0x1a4)],_0x1fcdb8=_0x5ed152[_0x31c577(0x1e9)],_0x258b75=_0x5ed152[_0x31c577(0x1cc)],_0x2143b6=_0x5ed152[_0x31c577(0x1e2)],_0x2a407b=_0x5ed152[_0x31c577(0x170)],_0x741a4e=_0x5ed152[_0x31c577(0x1c1)],_0x524e6c=_0x5ed152['Alert_QTY'],_0x563d8b=_0x5ed152[_0x31c577(0x13b)],_0x46eac7=_0x5ed152[_0x31c577(0x1da)],_0x12ee7d=_0x5ed152[_0x31c577(0x132)],_0x2acf27=_0x5ed152[_0x31c577(0x1b1)],_0x16036a=_0x5ed152[_0x31c577(0x195)];try{let _0xf86939=await categories[_0x31c577(0x178)]({'name':_0x741a4e});if(!_0xf86939){const _0xa394ed=new categories({'name':_0x741a4e,'products':'0'});_0xf86939=await _0xa394ed[_0x31c577(0x1b4)]();}let _0x4786b3=await brands[_0x31c577(0x178)]({'name':_0x1fcdb8});if(!_0x4786b3){const _0x346482=new brands({'name':_0x1fcdb8,'products':'0'});_0x4786b3=await _0x346482['save']();}let _0x40d297=await units[_0x31c577(0x178)]({'name':_0x258b75,'secondary_unit':_0x2143b6});if(!_0x40d297){const _0x44006c=new units({'name':_0x258b75,'secondary_unit':_0x2143b6,'products':'0'});_0x40d297=await _0x44006c[_0x31c577(0x1b4)]();}const _0x5ff1bc=await product['find']({'name':_0x4ed4f7,'category':_0xf86939[_0x31c577(0x1a0)],'brand':_0x4786b3[_0x31c577(0x1a0)],'secondary_unit':_0x40d297['secondary_unit'],'product_code':_0x2a407b});console[_0x31c577(0x175)](_0x5ff1bc[_0x31c577(0x181)]+_0x31c577(0x1dd)+_0xf86939[_0x31c577(0x1a0)]+_0x31c577(0x1dd)+_0x4786b3[_0x31c577(0x1a0)]+_0x31c577(0x1dd)+_0x40d297['secondary_unit']+_0x31c577(0x1dd)+_0x2a407b+_0x31c577(0x1dd)+_0x4ed4f7);if(_0x5ff1bc['length']===0x0){const _0x59adb9=new product({'image':_0x31c577(0x15b),'name':_0x4ed4f7,'category':_0xf86939[_0x31c577(0x1a0)],'brand':_0x4786b3[_0x31c577(0x1a0)],'unit':_0x40d297[_0x31c577(0x1a0)],'alertquantity':_0x524e6c,'product_code':_0x2a407b,'secondary_unit':_0x40d297[_0x31c577(0x145)],'primary_code':_0x563d8b,'secondary_code':_0x46eac7,'maxStocks':_0x12ee7d,'maxProdPerUnit':_0x2acf27,'product_category':_0x16036a}),_0x43e560=await _0x59adb9[_0x31c577(0x1b4)]();_0xf86939['products']=parseInt(_0xf86939[_0x31c577(0x157)])+0x1,await _0xf86939[_0x31c577(0x1b4)](),_0x4786b3[_0x31c577(0x157)]=parseInt(_0x4786b3['products'])+0x1,await _0x4786b3[_0x31c577(0x1b4)](),_0x40d297[_0x31c577(0x157)]=parseInt(_0x40d297['products'])+0x1,await _0x40d297['save'](),_0x26a8ea['flash']('success',_0x4ed4f7+_0x31c577(0x167));}else{console[_0x31c577(0x175)](_0x5ff1bc[0x0]);const _0x401038=_0x5ff1bc[0x0];_0x401038[_0x31c577(0x199)]=_0xf86939[_0x31c577(0x1a0)],_0x401038['brand']=_0x4786b3[_0x31c577(0x1a0)],_0x401038[_0x31c577(0x1cb)]=_0x40d297[_0x31c577(0x1a0)],_0x401038[_0x31c577(0x143)]=_0x524e6c,_0x401038[_0x31c577(0x159)]=_0x2a407b,_0x401038[_0x31c577(0x145)]=_0x40d297['secondary_unit'],_0x401038[_0x31c577(0x1a9)]=_0x563d8b,_0x401038['secondary_code']=_0x46eac7,_0x401038[_0x31c577(0x19f)]=_0x12ee7d,_0x401038[_0x31c577(0x1d1)]=_0x2acf27,_0x401038['product_category']=_0x16036a;const _0x4d276a=await _0x401038[_0x31c577(0x1b4)]();_0x26a8ea[_0x31c577(0x176)](_0x31c577(0x130),_0x4d276a['name']+_0x31c577(0x14b));}}catch(_0x125c9f){_0x12a5b3[_0x31c577(0x188)](0x1f4)[_0x31c577(0x1a2)]({'proderror':_0x125c9f[_0x31c577(0x169)],'aproduct':_0x4ed4f7});}}_0x12a5b3[_0x31c577(0x1f0)](_0x31c577(0x1ab));}),router['post'](a0_0x359366(0x1a5),auth,async(_0x10140f,_0x522d28)=>{const _0x41d907=a0_0x359366;try{console['log'](_0x10140f[_0x41d907(0x1cf)]);const {data_cateory:_0x2b06b7,datachoose:_0x4ea4f9}=_0x10140f[_0x41d907(0x1cf)];var _0x4e737d;if(_0x4ea4f9=='prod_categ')_0x4e737d=await product[_0x41d907(0x1b6)]([{'$group':{'_id':_0x41d907(0x187)}}]);else{if(_0x4ea4f9==_0x41d907(0x196))_0x4e737d=await product[_0x41d907(0x1b6)]([{'$match':{'product_category':_0x2b06b7}},{'$group':{'_id':_0x41d907(0x1c5)}}]);else _0x4ea4f9==_0x41d907(0x12d)&&(_0x4e737d=await product[_0x41d907(0x1b6)]([{'$match':{'product_category':_0x2b06b7}},{'$group':{'_id':_0x41d907(0x177)}}]));}_0x522d28[_0x41d907(0x1a2)](_0x4e737d);}catch(_0x3d38b3){_0x522d28[_0x41d907(0x1a2)]({'message':_0x3d38b3[_0x41d907(0x169)]});}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x18c),auth,async(_0x5e5f46,_0x35bb78)=>{const _0x1e7472=a0_0x359366;try{const {data_choosing:_0x439f98,data_selected:_0x1f362b}=_0x5e5f46[_0x1e7472(0x1cf)];var _0x2181b5;if(_0x439f98==_0x1e7472(0x1ae))_0x2181b5=await product[_0x1e7472(0x1b6)]([{'$match':{'product_category':_0x1f362b}}]);else{if(_0x439f98==_0x1e7472(0x196))_0x2181b5=await product[_0x1e7472(0x1b6)]([{'$match':{'brand':_0x1f362b}}]);else _0x439f98==_0x1e7472(0x12d)&&(_0x2181b5=await product[_0x1e7472(0x1b6)]([{'$match':{'category':_0x1f362b}}]));}_0x35bb78[_0x1e7472(0x1a2)](_0x2181b5);}catch(_0x1797fc){_0x35bb78[_0x1e7472(0x1a2)]({'message':_0x1797fc[_0x1e7472(0x169)]});}}),router[a0_0x359366(0x171)](a0_0x359366(0x16c),auth,async(_0xab9838,_0x1b8d39)=>{const _0x1bebc4=a0_0x359366,_0x986d87=_0xab9838[_0x1bebc4(0x1e0)],_0x327af3=await profile['findOne']({'email':_0x986d87[_0x1bebc4(0x164)]}),_0x14b43a=await master_shop[_0x1bebc4(0x184)](),_0x562248=await product[_0x1bebc4(0x184)]();if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x1bf))var _0x3b6004=users['English'];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x1d6))var _0x3b6004=users[_0x1bebc4(0x1d6)];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x172))var _0x3b6004=users[_0x1bebc4(0x172)];else{if(_0x14b43a[0x0]['language']==_0x1bebc4(0x1cd))var _0x3b6004=users['Spanish'];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x161))var _0x3b6004=users[_0x1bebc4(0x161)];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x19a))var _0x3b6004=users[_0x1bebc4(0x13c)];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]=='Chinese')var _0x3b6004=users['Chinese'];else{if(_0x14b43a[0x0][_0x1bebc4(0x1d3)]==_0x1bebc4(0x138))var _0x3b6004=users[_0x1bebc4(0x1b2)];}}}}}}}_0x1b8d39[_0x1bebc4(0x1c9)]('product_barcode_products',{'success':_0xab9838[_0x1bebc4(0x176)](_0x1bebc4(0x130)),'errors':_0xab9838['flash'](_0x1bebc4(0x165)),'role':_0x986d87,'profile':_0x327af3,'products':_0x562248,'master_shop':_0x14b43a,'language':_0x3b6004});}),router[a0_0x359366(0x1f1)](a0_0x359366(0x1e8),auth,async(_0x3fe88d,_0x52ba28)=>{const _0x444b47=a0_0x359366,_0x83422c=await product[_0x444b47(0x184)]();_0x52ba28[_0x444b47(0x1a2)]({'data':_0x83422c});}),router['post'](a0_0x359366(0x14a),auth,async(_0x4b7257,_0x3a02de)=>{const _0x3c2d10=a0_0x359366;try{const {dataProdCat:_0x1096c5,dataProdIdentity:_0x18f0d0}=_0x4b7257['body'];var _0x3aaf46;switch(_0x1096c5){case'fg':switch(_0x18f0d0){case'Brands':_0x3aaf46=await product[_0x3c2d10(0x1b6)]([{'$match':{'product_category':_0x3c2d10(0x131)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x3c2d10(0x182)}}]);break;case _0x3c2d10(0x1c1):_0x3aaf46=await product[_0x3c2d10(0x1b6)]([{'$match':{'product_category':_0x3c2d10(0x131)}},{'$group':{'_id':_0x3c2d10(0x177)}},{'$project':{'category':_0x3c2d10(0x182)}}]);break;}break;case'rm':switch(_0x18f0d0){case _0x3c2d10(0x1e9):_0x3aaf46=await product[_0x3c2d10(0x1b6)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x3c2d10(0x1c5)}},{'$project':{'brand':_0x3c2d10(0x182)}}]);break;case _0x3c2d10(0x1c1):_0x3aaf46=await product['aggregate']([{'$match':{'product_category':_0x3c2d10(0x13e)}},{'$group':{'_id':_0x3c2d10(0x177)}},{'$project':{'category':_0x3c2d10(0x182)}}]);break;}break;}_0x3a02de['json'](_0x3aaf46);}catch(_0x2b14b5){_0x3a02de['json']({'message':_0x2b14b5[_0x3c2d10(0x169)]});}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x1ea),auth,async(_0x2bfe58,_0x136e2e)=>{const _0x222b97=a0_0x359366;try{console[_0x222b97(0x175)](_0x2bfe58[_0x222b97(0x1cf)]);const {prod_cat:_0x3138a8,identity:_0xc79531,valueData:_0x3805b8,typeofbarcode:_0x3badc4}=_0x2bfe58[_0x222b97(0x1cf)];let _0x465ffa;switch(_0x3138a8){case'fg':if(_0xc79531==_0x222b97(0x1e9))_0x465ffa=await product[_0x222b97(0x1b6)]([{'$match':{'product_category':_0x222b97(0x131),'brand':_0x3805b8}}]);else _0xc79531==_0x222b97(0x1c1)&&(_0x465ffa=await product[_0x222b97(0x1b6)]([{'$match':{'product_category':_0x222b97(0x131),'category':_0x3805b8}}]));break;case'rm':if(_0xc79531=='Brands')_0x465ffa=await product['aggregate']([{'$match':{'product_category':_0x222b97(0x13e),'brand':_0x3805b8}}]);else _0xc79531==_0x222b97(0x1c1)&&(_0x465ffa=await product[_0x222b97(0x1b6)]([{'$match':{'product_category':_0x222b97(0x13e),'category':_0x3805b8}}]));break;}const _0x157d96=_0x9fde89=>_0x9fde89*0x48,_0xcd6dc6={'width':0x3,'height':0x1},_0x306b24=new PDFDocument({'margin':_0x157d96(0.75),'size':[_0x157d96(_0xcd6dc6[_0x222b97(0x1e5)]),_0x157d96(_0xcd6dc6[_0x222b97(0x1db)])],'bufferPages':!![]}),_0x184312=_0x465ffa[_0x222b97(0x181)];for(let _0x3eb5db=0x0;_0x3eb5db<=_0x184312;_0x3eb5db++){if(_0x3eb5db!=_0x184312){const _0x76c90e=_0x465ffa[_0x3eb5db]['name'],_0x513b30=_0x465ffa[_0x3eb5db][_0x222b97(0x1a9)],_0x3d84db=_0x465ffa[_0x3eb5db][_0x222b97(0x19c)],_0x434a73=_0x465ffa[_0x3eb5db][_0x222b97(0x159)];var _0x41f15e;switch(_0x3badc4){case'1':_0x41f15e=_0x513b30;break;case'2':_0x41f15e=_0x3d84db;break;case'3':_0x41f15e=_0x434a73;break;}const _0x1f86fb={'width':0xd2,'height':0x64},_0x5cfa9b={'width':_0x157d96(_0xcd6dc6[_0x222b97(0x1e5)]),'height':_0x157d96(_0xcd6dc6[_0x222b97(0x1db)])},_0x53df9f=new Canvas();JsBarcode(_0x53df9f,_0x41f15e,{'format':_0x222b97(0x152),'height':_0x1f86fb[_0x222b97(0x1db)],'displayValue':!![],'text':_0x41f15e});const _0x514cc7=_0x53df9f['toBuffer'](),_0x495fc2=_0x5cfa9b['width']/_0x1f86fb['width'],_0x548692=_0x5cfa9b[_0x222b97(0x1db)]/_0x1f86fb['height'],_0x16b2cf=Math[_0x222b97(0x1ad)](_0x495fc2,_0x548692),_0xc3b7f6=_0x1f86fb[_0x222b97(0x1e5)]*_0x16b2cf,_0x3c6c5c=_0x1f86fb[_0x222b97(0x1db)]*_0x16b2cf,_0x45c5ef=(_0x5cfa9b['width']-_0xc3b7f6)/0x2,_0x53357e=(_0x5cfa9b['height']-_0x3c6c5c)/0x2;_0x306b24[_0x222b97(0x135)](_0x514cc7,_0x45c5ef,_0x53357e,{'width':_0xc3b7f6,'height':_0x3c6c5c}),_0x3eb5db!=_0x184312&&_0x306b24['addPage']();}}const _0x57975e=[];_0x306b24['on'](_0x222b97(0x13d),_0x57975e[_0x222b97(0x1ca)][_0x222b97(0x1bd)](_0x57975e)),_0x306b24['on'](_0x222b97(0x133),()=>{const _0x40031c=_0x222b97,_0x33016e=Buffer[_0x40031c(0x139)](_0x57975e),_0x3092af=_0x33016e[_0x40031c(0x1ba)]('base64');_0x136e2e['json']({'pdfContent':_0x3092af});}),_0x306b24['end']();}catch(_0x288241){_0x136e2e[_0x222b97(0x1a2)]({'message':_0x288241[_0x222b97(0x169)]});}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x1d4),auth,async(_0x3122de,_0x423285)=>{const _0x469659=a0_0x359366;try{console[_0x469659(0x175)](_0x3122de[_0x469659(0x1cf)]);const {prod_cat:_0x216ac3,identity:_0x14eece,valueData:_0x36dfde}=_0x3122de['body'];let _0x2c9b1b;switch(_0x216ac3){case'fg':if(_0x14eece==_0x469659(0x1e9))_0x2c9b1b=await product[_0x469659(0x1b6)]([{'$match':{'product_category':_0x469659(0x131),'brand':_0x36dfde}}]);else _0x14eece==_0x469659(0x1c1)&&(_0x2c9b1b=await product['aggregate']([{'$match':{'product_category':_0x469659(0x131),'category':_0x36dfde}}]));break;case'rm':if(_0x14eece==_0x469659(0x1e9))_0x2c9b1b=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x36dfde}}]);else _0x14eece==_0x469659(0x1c1)&&(_0x2c9b1b=await product[_0x469659(0x1b6)]([{'$match':{'product_category':_0x469659(0x13e),'category':_0x36dfde}}]));break;}_0x423285[_0x469659(0x1a2)]({'data':_0x2c9b1b});}catch(_0x5080fb){_0x423285[_0x469659(0x1a2)]({'message':_0x5080fb[_0x469659(0x169)]});}}),router[a0_0x359366(0x1f1)](a0_0x359366(0x17d),auth,async(_0x2bcd75,_0x268b78)=>{const _0x2c48a6=a0_0x359366;try{const _0x1ff5fe=_0x2bcd75[_0x2c48a6(0x18f)]['id'],{copies:_0xc78e65,typeofbarcode:_0x475661}=_0x2bcd75[_0x2c48a6(0x1cf)];var _0x2a4488=await product['findById'](_0x1ff5fe);const _0x49a3ed=_0x1992e9=>_0x1992e9*0x48,_0x4548d2={'width':0x3,'height':0x1},_0x244f6a=new PDFDocument({'margin':_0x49a3ed(0.75),'size':[_0x49a3ed(_0x4548d2[_0x2c48a6(0x1e5)]),_0x49a3ed(_0x4548d2[_0x2c48a6(0x1db)])],'bufferPages':!![]}),_0x113e5f=_0xc78e65,_0x5bd33e=_0x2a4488[_0x2c48a6(0x1a0)],_0x271bea=_0x2a4488['primary_code'],_0x1dcca7=_0x2a4488['secondary_code'],_0x82b550=_0x2a4488[_0x2c48a6(0x159)];let _0x17b38d;switch(_0x475661){case'1':_0x17b38d=_0x271bea;break;case'2':_0x17b38d=_0x1dcca7;break;case'3':_0x17b38d=_0x82b550;break;}const _0x59cbf7={'width':0xd2,'height':0x64},_0x27afdf={'width':_0x49a3ed(_0x4548d2['width']),'height':_0x49a3ed(_0x4548d2['height'])};for(let _0x357d51=0x1;_0x357d51<=_0x113e5f;_0x357d51++){const _0x7b40d6=new Canvas();JsBarcode(_0x7b40d6,_0x17b38d,{'format':_0x2c48a6(0x152),'height':_0x59cbf7[_0x2c48a6(0x1db)],'displayValue':!![],'text':_0x17b38d});const _0x27854b=_0x7b40d6[_0x2c48a6(0x156)](),_0x3f9a64=_0x27afdf['width']/_0x59cbf7[_0x2c48a6(0x1e5)],_0x5b6b10=_0x27afdf[_0x2c48a6(0x1db)]/_0x59cbf7[_0x2c48a6(0x1db)],_0x14bd7b=Math[_0x2c48a6(0x1ad)](_0x3f9a64,_0x5b6b10),_0xc612b6=_0x59cbf7[_0x2c48a6(0x1e5)]*_0x14bd7b,_0x289763=_0x59cbf7[_0x2c48a6(0x1db)]*_0x14bd7b,_0x21d6e1=(_0x27afdf[_0x2c48a6(0x1e5)]-_0xc612b6)/0x2,_0xfd9609=(_0x27afdf[_0x2c48a6(0x1db)]-_0x289763)/0x2;_0x244f6a[_0x2c48a6(0x135)](_0x27854b,_0x21d6e1,_0xfd9609,{'width':_0xc612b6,'height':_0x289763}),_0x357d51!=_0x113e5f&&_0x244f6a[_0x2c48a6(0x140)]();}const _0x3bba04=[];_0x244f6a['on'](_0x2c48a6(0x13d),_0x3bba04[_0x2c48a6(0x1ca)][_0x2c48a6(0x1bd)](_0x3bba04)),_0x244f6a['on']('end',()=>{const _0x22fba4=_0x2c48a6,_0x268a2e=Buffer[_0x22fba4(0x139)](_0x3bba04),_0x18a8c2=_0x268a2e[_0x22fba4(0x1ba)](_0x22fba4(0x12c));_0x268b78['json']({'pdfContent':_0x18a8c2});}),_0x244f6a[_0x2c48a6(0x133)]();}catch(_0x53c67b){_0x268b78[_0x2c48a6(0x1a2)]({'message':_0x53c67b[_0x2c48a6(0x169)]});}}),module['exports']=router;