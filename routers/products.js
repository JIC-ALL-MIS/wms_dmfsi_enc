const a0_0x41718b=a0_0x85d6;(function(_0x86cdc8,_0xc354f6){const _0x30e3cd=a0_0x85d6,_0x40f68f=_0x86cdc8();while(!![]){try{const _0x54c5c7=-parseInt(_0x30e3cd(0x1f5))/0x1+parseInt(_0x30e3cd(0x1c9))/0x2*(-parseInt(_0x30e3cd(0x19a))/0x3)+parseInt(_0x30e3cd(0x1f0))/0x4*(-parseInt(_0x30e3cd(0x187))/0x5)+parseInt(_0x30e3cd(0x152))/0x6*(parseInt(_0x30e3cd(0x202))/0x7)+-parseInt(_0x30e3cd(0x171))/0x8+-parseInt(_0x30e3cd(0x1f8))/0x9+parseInt(_0x30e3cd(0x19e))/0xa*(parseInt(_0x30e3cd(0x1e7))/0xb);if(_0x54c5c7===_0xc354f6)break;else _0x40f68f['push'](_0x40f68f['shift']());}catch(_0x3ac187){_0x40f68f['push'](_0x40f68f['shift']());}}}(a0_0xf2e1,0x1f3d8));const express=require('express'),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x41718b(0x188)),auth=require(a0_0x41718b(0x156)),users=require(a0_0x41718b(0x1d1)),excelJS=require('exceljs'),xlsx=require(a0_0x41718b(0x1ab)),JsBarcode=require(a0_0x41718b(0x186)),{Canvas}=require(a0_0x41718b(0x15f)),PDFDocument=require('pdfkit-table');function a0_0x85d6(_0x20bfde,_0x54ee08){const _0xf2e1b6=a0_0xf2e1();return a0_0x85d6=function(_0x85d621,_0x1f1157){_0x85d621=_0x85d621-0x150;let _0x72be22=_0xf2e1b6[_0x85d621];return _0x72be22;},a0_0x85d6(_0x20bfde,_0x54ee08);}router['get']('/categories',auth,async(_0x34a17b,_0x3dd235)=>{const _0xc7b9d3=a0_0x41718b;try{const {username:_0x1314ff,email:_0x3f1dbd,role:_0x3585fa}=_0x34a17b['user'],_0x20f496=_0x34a17b[_0xc7b9d3(0x161)],_0x2db3b6=await profile[_0xc7b9d3(0x15a)]({'email':_0x20f496[_0xc7b9d3(0x1e6)]}),_0x3a2259=await master_shop[_0xc7b9d3(0x1c1)]();console['log'](_0xc7b9d3(0x1b3),_0x3a2259);const _0x34cf12=await categories[_0xc7b9d3(0x1c1)]();if(_0x3a2259[0x0][_0xc7b9d3(0x1b6)]==_0xc7b9d3(0x172))var _0x1e1243=users[_0xc7b9d3(0x155)];else{if(_0x3a2259[0x0][_0xc7b9d3(0x1b6)]=='Hindi')var _0x1e1243=users[_0xc7b9d3(0x1e1)];else{if(_0x3a2259[0x0]['language']==_0xc7b9d3(0x1fb))var _0x1e1243=users[_0xc7b9d3(0x1fb)];else{if(_0x3a2259[0x0]['language']=='Spanish')var _0x1e1243=users[_0xc7b9d3(0x1d0)];else{if(_0x3a2259[0x0][_0xc7b9d3(0x1b6)]==_0xc7b9d3(0x1e4))var _0x1e1243=users[_0xc7b9d3(0x1e4)];else{if(_0x3a2259[0x0]['language']==_0xc7b9d3(0x1b7))var _0x1e1243=users[_0xc7b9d3(0x1eb)];else{if(_0x3a2259[0x0]['language']=='Chinese')var _0x1e1243=users[_0xc7b9d3(0x1f6)];else{if(_0x3a2259[0x0][_0xc7b9d3(0x1b6)]=='Arabic\x20(ae)')var _0x1e1243=users['Arabic'];}}}}}}}_0x3dd235[_0xc7b9d3(0x1fd)]('categories',{'success':_0x34a17b['flash'](_0xc7b9d3(0x17e)),'errors':_0x34a17b[_0xc7b9d3(0x1a2)](_0xc7b9d3(0x1cb)),'role':_0x20f496,'profile':_0x2db3b6,'user':_0x34cf12,'master_shop':_0x3a2259,'language':_0x1e1243});}catch(_0x4113f3){console[_0xc7b9d3(0x17c)](_0x4113f3);}}),router[a0_0x41718b(0x195)]('/categories',auth,async(_0xc9e469,_0x3a17ed)=>{const _0x204df7=a0_0x41718b;try{const {name:_0x572646,products:_0x1aae9a}=_0xc9e469['body'],_0x234bf3=new categories({'name':_0x572646,'products':_0x1aae9a}),_0x361342=await categories[_0x204df7(0x15a)]({'name':_0x572646});_0x361342?_0xc9e469[_0x204df7(0x1a2)](_0x204df7(0x1cb),_0x572646+_0x204df7(0x1ac)):_0xc9e469[_0x204df7(0x1a2)](_0x204df7(0x17e),_0x572646+'\x20categories\x20is\x20add\x20successfully');const _0x375874=await _0x234bf3[_0x204df7(0x1e8)]();_0x3a17ed[_0x204df7(0x1c8)](_0x204df7(0x17f));}catch(_0x2df109){console[_0x204df7(0x17c)](_0x2df109);}}),router['get'](a0_0x41718b(0x16d),auth,async(_0x9d7f14,_0x4ef1a8)=>{const _0x5232ff=a0_0x41718b;try{const {username:_0x347767,email:_0x336602,role:_0x443655}=_0x9d7f14[_0x5232ff(0x161)],_0x4cc54e=_0x9d7f14[_0x5232ff(0x161)],_0x45fa82=await profile[_0x5232ff(0x15a)]({'email':_0x4cc54e[_0x5232ff(0x1e6)]}),_0x1afb4d=await master_shop[_0x5232ff(0x1c1)]();console[_0x5232ff(0x17c)](_0x5232ff(0x1b3),_0x1afb4d);const _0x13dab1=_0x9d7f14['params']['id'];console[_0x5232ff(0x17c)](_0x13dab1);const _0x5d68c9=await categories[_0x5232ff(0x1da)](_0x13dab1);if(_0x1afb4d[0x0]['language']==_0x5232ff(0x172))var _0x303d6f=users[_0x5232ff(0x155)];else{if(_0x1afb4d[0x0][_0x5232ff(0x1b6)]==_0x5232ff(0x1e1))var _0x303d6f=users[_0x5232ff(0x1e1)];else{if(_0x1afb4d[0x0][_0x5232ff(0x1b6)]==_0x5232ff(0x1fb))var _0x303d6f=users[_0x5232ff(0x1fb)];else{if(_0x1afb4d[0x0]['language']==_0x5232ff(0x1d0))var _0x303d6f=users[_0x5232ff(0x1d0)];else{if(_0x1afb4d[0x0][_0x5232ff(0x1b6)]=='French')var _0x303d6f=users[_0x5232ff(0x1e4)];else{if(_0x1afb4d[0x0][_0x5232ff(0x1b6)]=='Portuguese\x20(BR)')var _0x303d6f=users[_0x5232ff(0x1eb)];else{if(_0x1afb4d[0x0][_0x5232ff(0x1b6)]==_0x5232ff(0x1f6))var _0x303d6f=users['Chinese'];else{if(_0x1afb4d[0x0]['language']==_0x5232ff(0x16c))var _0x303d6f=users['Arabic'];}}}}}}}_0x4ef1a8[_0x5232ff(0x1fd)](_0x5232ff(0x1a4),{'success':_0x9d7f14[_0x5232ff(0x1a2)](_0x5232ff(0x17e)),'errors':_0x9d7f14['flash']('errors'),'role':_0x4cc54e,'profile':_0x45fa82,'master_shop':_0x1afb4d,'user':_0x5d68c9,'language':_0x303d6f});}catch(_0x4f5a85){console['log'](_0x4f5a85);}}),router['post'](a0_0x41718b(0x16d),auth,async(_0x3549f2,_0x2a832a)=>{const _0x2e89f5=a0_0x41718b;try{const _0x5a170f=_0x3549f2['params']['id'],_0x3ffcf7=await categories['findByIdAndUpdate'](_0x5a170f,_0x3549f2[_0x2e89f5(0x1c7)]);_0x3549f2[_0x2e89f5(0x1a2)](_0x2e89f5(0x17e),''+users[_0x2e89f5(0x201)]),_0x2a832a[_0x2e89f5(0x1c8)](_0x2e89f5(0x17f));}catch(_0x17bdaf){console[_0x2e89f5(0x17c)](_0x17bdaf);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x200),auth,async(_0x5d0fec,_0x434af8)=>{const _0x7f4c55=a0_0x41718b;try{const _0xad0b0a=_0x5d0fec[_0x7f4c55(0x1c3)]['id'],_0x56496a=await categories[_0x7f4c55(0x1bf)](_0xad0b0a);_0x5d0fec[_0x7f4c55(0x1a2)](_0x7f4c55(0x17e),_0x7f4c55(0x1c4)),_0x434af8[_0x7f4c55(0x1c8)]('/products/categories');}catch(_0x159916){console['log'](_0x159916);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x1c6),auth,async(_0x4e88c2,_0x397039)=>{const _0xcd4114=a0_0x41718b;try{const {username:_0x143598,email:_0x4ecd2f,role:_0x506b9b}=_0x4e88c2['user'],_0x1ea716=_0x4e88c2['user'],_0x16a64c=await profile[_0xcd4114(0x15a)]({'email':_0x1ea716[_0xcd4114(0x1e6)]}),_0x3fddd2=await master_shop[_0xcd4114(0x1c1)]();console[_0xcd4114(0x17c)]('master',_0x3fddd2);const _0x56713b=await brands['find']();if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]=='English\x20(US)')var _0x5e2c34=users[_0xcd4114(0x155)];else{if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]==_0xcd4114(0x1e1))var _0x5e2c34=users[_0xcd4114(0x1e1)];else{if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]=='German')var _0x5e2c34=users[_0xcd4114(0x1fb)];else{if(_0x3fddd2[0x0]['language']==_0xcd4114(0x1d0))var _0x5e2c34=users[_0xcd4114(0x1d0)];else{if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]==_0xcd4114(0x1e4))var _0x5e2c34=users[_0xcd4114(0x1e4)];else{if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]=='Portuguese\x20(BR)')var _0x5e2c34=users[_0xcd4114(0x1eb)];else{if(_0x3fddd2[0x0]['language']==_0xcd4114(0x1f6))var _0x5e2c34=users[_0xcd4114(0x1f6)];else{if(_0x3fddd2[0x0][_0xcd4114(0x1b6)]==_0xcd4114(0x16c))var _0x5e2c34=users[_0xcd4114(0x1a8)];}}}}}}}_0x397039[_0xcd4114(0x1fd)](_0xcd4114(0x193),{'success':_0x4e88c2['flash'](_0xcd4114(0x17e)),'errors':_0x4e88c2[_0xcd4114(0x1a2)](_0xcd4114(0x1cb)),'role':_0x1ea716,'profile':_0x16a64c,'master_shop':_0x3fddd2,'user':_0x56713b,'language':_0x5e2c34});}catch(_0x3574e4){console[_0xcd4114(0x17c)](_0x3574e4);}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x1c6),auth,async(_0x24875f,_0x51e300)=>{const _0xfad4f9=a0_0x41718b;try{const {name:_0x456903,products:_0x2a7187}=_0x24875f[_0xfad4f9(0x1c7)],_0x3d93a6=new brands({'name':_0x456903,'products':_0x2a7187}),_0x5bbc14=await brands[_0xfad4f9(0x15a)]({'name':_0x456903});_0x5bbc14?_0x24875f[_0xfad4f9(0x1a2)](_0xfad4f9(0x1cb),_0x456903+_0xfad4f9(0x189)):_0x24875f['flash'](_0xfad4f9(0x17e),_0x456903+_0xfad4f9(0x17a));const _0x2eec4a=await _0x3d93a6['save']();_0x51e300['redirect'](_0xfad4f9(0x159));}catch(_0x1f0de2){console['log'](_0x1f0de2);}}),router['get'](a0_0x41718b(0x1f4),auth,async(_0x47674c,_0xa6261)=>{const _0x4d2fd1=a0_0x41718b;try{const {username:_0x919903,email:_0x5cb05f,role:_0x2e34a9}=_0x47674c[_0x4d2fd1(0x161)],_0x20733c=_0x47674c['user'],_0x556ef2=await profile[_0x4d2fd1(0x15a)]({'email':_0x20733c['email']}),_0x33fdd0=await master_shop['find']();console[_0x4d2fd1(0x17c)](_0x4d2fd1(0x1b3),_0x33fdd0);const _0x4238c9=_0x47674c[_0x4d2fd1(0x1c3)]['id'];console[_0x4d2fd1(0x17c)](_0x4238c9);const _0x5811cf=await brands[_0x4d2fd1(0x1da)](_0x4238c9);if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x172))var _0x2229e4=users[_0x4d2fd1(0x155)];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x1e1))var _0x2229e4=users[_0x4d2fd1(0x1e1)];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x1fb))var _0x2229e4=users[_0x4d2fd1(0x1fb)];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x1d0))var _0x2229e4=users['Spanish'];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x1e4))var _0x2229e4=users['French'];else{if(_0x33fdd0[0x0]['language']==_0x4d2fd1(0x1b7))var _0x2229e4=users[_0x4d2fd1(0x1eb)];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]=='Chinese')var _0x2229e4=users[_0x4d2fd1(0x1f6)];else{if(_0x33fdd0[0x0][_0x4d2fd1(0x1b6)]==_0x4d2fd1(0x16c))var _0x2229e4=users[_0x4d2fd1(0x1a8)];}}}}}}}_0xa6261['render'](_0x4d2fd1(0x193),{'success':_0x47674c[_0x4d2fd1(0x1a2)](_0x4d2fd1(0x17e)),'errors':_0x47674c[_0x4d2fd1(0x1a2)]('errors'),'role':_0x20733c,'profile':_0x556ef2,'master_shop':_0x33fdd0,'user':_0x5811cf,'language':_0x2229e4});}catch(_0x270fbe){console['log'](_0x270fbe);}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x1f4),auth,async(_0x3f42ed,_0x2bc6d5)=>{const _0x1a1511=a0_0x41718b;try{const _0x2833b4=_0x3f42ed[_0x1a1511(0x1c3)]['id'],_0x393d71=await brands['findByIdAndUpdate'](_0x2833b4,_0x3f42ed[_0x1a1511(0x1c7)]);_0x3f42ed[_0x1a1511(0x1a2)](_0x1a1511(0x17e),_0x1a1511(0x1ea)),_0x2bc6d5[_0x1a1511(0x1c8)](_0x1a1511(0x159));}catch(_0x2a6f2a){console[_0x1a1511(0x17c)](_0x2a6f2a);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x1ba),auth,async(_0x119a5,_0x36cd1d)=>{const _0x282a7f=a0_0x41718b;try{const _0x5b602a=_0x119a5[_0x282a7f(0x1c3)]['id'],_0x472eb2=await brands['findByIdAndDelete'](_0x5b602a);_0x119a5[_0x282a7f(0x1a2)]('success',_0x282a7f(0x1ee)),_0x36cd1d['redirect'](_0x282a7f(0x159));}catch(_0x575d5e){console[_0x282a7f(0x17c)](_0x575d5e);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x208),auth,async(_0xebd9b6,_0x376c95)=>{const _0x48f6f8=a0_0x41718b;try{const {username:_0x16cb64,email:_0x1b055e,role:_0x515fc9}=_0xebd9b6[_0x48f6f8(0x161)],_0x4db257=_0xebd9b6['user'],_0x480118=await profile['findOne']({'email':_0x4db257[_0x48f6f8(0x1e6)]}),_0x447d35=await master_shop['find']();console['log']('master',_0x447d35);const _0x4b6dc9=await units[_0x48f6f8(0x1c1)]();if(_0x447d35[0x0][_0x48f6f8(0x1b6)]==_0x48f6f8(0x172))var _0x292ebd=users[_0x48f6f8(0x155)];else{if(_0x447d35[0x0][_0x48f6f8(0x1b6)]=='Hindi')var _0x292ebd=users[_0x48f6f8(0x1e1)];else{if(_0x447d35[0x0]['language']=='German')var _0x292ebd=users[_0x48f6f8(0x1fb)];else{if(_0x447d35[0x0]['language']==_0x48f6f8(0x1d0))var _0x292ebd=users[_0x48f6f8(0x1d0)];else{if(_0x447d35[0x0]['language']==_0x48f6f8(0x1e4))var _0x292ebd=users['French'];else{if(_0x447d35[0x0][_0x48f6f8(0x1b6)]=='Portuguese\x20(BR)')var _0x292ebd=users[_0x48f6f8(0x1eb)];else{if(_0x447d35[0x0][_0x48f6f8(0x1b6)]=='Chinese')var _0x292ebd=users['Chinese'];else{if(_0x447d35[0x0][_0x48f6f8(0x1b6)]=='Arabic\x20(ae)')var _0x292ebd=users[_0x48f6f8(0x1a8)];}}}}}}}_0x376c95[_0x48f6f8(0x1fd)](_0x48f6f8(0x1be),{'success':_0xebd9b6['flash']('success'),'errors':_0xebd9b6[_0x48f6f8(0x1a2)](_0x48f6f8(0x1cb)),'role':_0x4db257,'profile':_0x480118,'master_shop':_0x447d35,'user':_0x4b6dc9,'language':_0x292ebd});}catch(_0x5d9b0b){console[_0x48f6f8(0x17c)](_0x5d9b0b);}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x208),auth,async(_0x162aff,_0x113c61)=>{const _0x2cbc5a=a0_0x41718b;try{const {name:_0x59c6ba,secondary_unit:_0x3bcab1,products:_0x3a095f}=_0x162aff[_0x2cbc5a(0x1c7)],_0x369a56=new units({'name':_0x59c6ba,'secondary_unit':_0x3bcab1,'products':_0x3a095f}),_0xab242c=await units[_0x2cbc5a(0x15a)]({'name':_0x59c6ba});_0xab242c?_0x162aff[_0x2cbc5a(0x1a2)](_0x2cbc5a(0x1cb),_0x59c6ba+_0x2cbc5a(0x17b)):_0x162aff[_0x2cbc5a(0x1a2)]('success',_0x59c6ba+_0x2cbc5a(0x158));const _0x2c6899=await _0x369a56['save']();_0x113c61['redirect']('/products/units');}catch(_0xa0fc6b){console[_0x2cbc5a(0x17c)](_0xa0fc6b);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x1d5),auth,async(_0x5bd8c4,_0x2398dd)=>{const _0x1e4af4=a0_0x41718b;try{const {username:_0x468b11,email:_0x4afb5d,role:_0xbda8b1}=_0x5bd8c4[_0x1e4af4(0x161)],_0x2a32f2=_0x5bd8c4[_0x1e4af4(0x161)],_0x849b70=await profile[_0x1e4af4(0x15a)]({'email':_0x2a32f2['email']}),_0x41b2f3=await master_shop[_0x1e4af4(0x1c1)]();console[_0x1e4af4(0x17c)]('master',_0x41b2f3);const _0x5abd9a=_0x5bd8c4[_0x1e4af4(0x1c3)]['id'],_0x358f57=await units['findById'](_0x5abd9a);if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]=='English\x20(US)')var _0x4603a7=users[_0x1e4af4(0x155)];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]==_0x1e4af4(0x1e1))var _0x4603a7=users[_0x1e4af4(0x1e1)];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]==_0x1e4af4(0x1fb))var _0x4603a7=users['German'];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]==_0x1e4af4(0x1d0))var _0x4603a7=users[_0x1e4af4(0x1d0)];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]==_0x1e4af4(0x1e4))var _0x4603a7=users[_0x1e4af4(0x1e4)];else{if(_0x41b2f3[0x0]['language']=='Portuguese\x20(BR)')var _0x4603a7=users[_0x1e4af4(0x1eb)];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]=='Chinese')var _0x4603a7=users[_0x1e4af4(0x1f6)];else{if(_0x41b2f3[0x0][_0x1e4af4(0x1b6)]==_0x1e4af4(0x16c))var _0x4603a7=users[_0x1e4af4(0x1a8)];}}}}}}}_0x2398dd['render'](_0x1e4af4(0x1be),{'success':_0x5bd8c4[_0x1e4af4(0x1a2)](_0x1e4af4(0x17e)),'errors':_0x5bd8c4[_0x1e4af4(0x1a2)](_0x1e4af4(0x1cb)),'role':_0x2a32f2,'profile':_0x849b70,'master_shop':_0x41b2f3,'user':_0x358f57,'language':_0x4603a7});}catch(_0x30f08f){console[_0x1e4af4(0x17c)](_0x30f08f);}}),router[a0_0x41718b(0x195)]('/units/:id',auth,async(_0x5358e1,_0x3cfc55)=>{const _0x4d9f1d=a0_0x41718b;try{const _0x583ca4=_0x5358e1[_0x4d9f1d(0x1c3)]['id'],_0x3b6931=await units[_0x4d9f1d(0x205)](_0x583ca4,_0x5358e1[_0x4d9f1d(0x1c7)]);_0x5358e1['flash'](_0x4d9f1d(0x17e),_0x4d9f1d(0x1bd)),_0x3cfc55[_0x4d9f1d(0x1c8)](_0x4d9f1d(0x160));}catch(_0x3f3231){console[_0x4d9f1d(0x17c)](_0x3f3231);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x16f),auth,async(_0x134e1a,_0x47bd23)=>{const _0x1da8ae=a0_0x41718b;try{const _0x12661c=_0x134e1a[_0x1da8ae(0x1c3)]['id'],_0x1f870d=await units[_0x1da8ae(0x1bf)](_0x12661c);_0x134e1a[_0x1da8ae(0x1a2)]('success',_0x1da8ae(0x16b)),_0x47bd23[_0x1da8ae(0x1c8)](_0x1da8ae(0x160));}catch(_0xa8b707){console[_0x1da8ae(0x17c)](_0xa8b707);}});function a0_0xf2e1(){const _0x3e4adc=['product\x20add\x20successfully','/units/delete/:id','numeric','391208lIuvMJ','English\x20(US)','Finished\x20Goods','PSecondaryUnits','defaultProduct.avif','product_category','PName','/barcode_data','Alert_QTY','\x20brand\x20is\x20add\x20successfully','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','log','/barcode_filter','success','/products/categories','Workbook','stock','status','Product_Name','base64','/view/:id','jsbarcode','180GYRyKh','../models/all_models','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/view','PBrands','product_stock','Prod_Cat','secondary_code','$brand','height','bind','get','brands','secondary_unit','post','concat','PCat','long','then','36VRSXmv','PUnits','file','image','3180980DOaqlD','MaxperUnits','end','min','flash','product_code','categories','brand','Brands','product_docs','Arabic','prod_categ','/print_barcode_single/:id','xlsx','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products_import_migrate_file','primary_code','max_number_per_units','Enabled','migrate_product_fule','toBuffer','master','$product_details.product_stock','$product_category','language','Portuguese\x20(BR)','sku','Products\x20find_data','/brands/delete/:id','map','maxProdPerUnit','unit\x20data\x20update\x20successfully','units','findByIdAndDelete','diskStorage','find','/barcode/:id','params','categories\x20data\x20delete\x20successfully','product\x20update\x20successfully','/brands','body','redirect','2028oqhGpG','$_id','errors','aggregate','Primary_Code','now','PAlQty','Spanish','../public/language/languages.json','/print_barcode_filter_search/','unit','$secondary_unit','/units/:id','message','/products_export_migrate_file','Product_Code','setHeader','findById','addPage','categ','\x20added\x20successfully','Products_category','product_details.product_name','$product_docs','Hindi','filename','Secondary_Units','French','single','email','11gkXpkV','save','public/upload','brand\x20data\x20update\x20successfully','Portuguese','Raw\x20Materials','public/Migration/','brand\x20data\x20delete\x20successfully','sheet_to_json','556fwStSX','attachment;\x20filename=Product_Migration_File.xlsx','push','_id','/brands/:id','175699NVnVfx','Chinese','edit_product','458478CtpzpO','\x20Edit\x20Successfully','edit\x20Product\x20master','German','toString','render','/view/add_products','/filter_product','/categories/delete/:id','categories_edit','29918Ebqjhk','category','originalname','findByIdAndUpdate','/select_data','maxStocks','/units','Category','\x20<>\x20','ProductCode','/view','addWorksheet','data','json','length','readFile','/print_barcode','barcode\x20Product\x20master','144UQdFyo','alertquantity','Sheets','English','../middleware/auth','send','\x20unit\x20is\x20add\x20successfully','/products/brands','findOne','columns','products','$category','utils','canvas','/products/units','user','width','hello','Maximum_Stocks','name','Products\x20warehouse_data','product_barcode_products','Secondary_Code','$product_details.product_name','forEach','unit\x20data\x20delete\x20successfully','Arabic\x20(ae)','/categories/:id'];a0_0xf2e1=function(){return _0x3e4adc;};return a0_0xf2e1();}const storage=multer[a0_0x41718b(0x1c0)]({'destination':(_0x2e74d3,_0x46e59e,_0x29724d)=>{const _0x4a61f4=a0_0x41718b;_0x29724d(null,_0x4a61f4(0x1e9));},'filename':(_0x508465,_0x17a735,_0x22a2bc)=>{const _0x2063c9=a0_0x41718b;_0x22a2bc(null,Date[_0x2063c9(0x1ce)]()+_0x17a735[_0x2063c9(0x204)]);}}),upload=multer({'storage':storage});router[a0_0x41718b(0x192)](a0_0x41718b(0x20c),auth,async(_0x338230,_0x3e2cfe)=>{const _0x5134d4=a0_0x41718b;try{const {username:_0x2521f4,email:_0x1044da,role:_0x28618d}=_0x338230['user'],_0x3f4b8a=_0x338230[_0x5134d4(0x161)],_0x486535=await profile[_0x5134d4(0x15a)]({'email':_0x3f4b8a[_0x5134d4(0x1e6)]}),_0x22229d={'year':_0x5134d4(0x170),'month':_0x5134d4(0x198),'day':_0x5134d4(0x170)},_0x3c1ac7=await master_shop[_0x5134d4(0x1c1)]();console[_0x5134d4(0x17c)]('Products\x20master',_0x3c1ac7);const _0x4c35a0=await product[_0x5134d4(0x1c1)]();console[_0x5134d4(0x17c)](_0x5134d4(0x1b9),_0x4c35a0);const _0x40a1e1=await warehouse[_0x5134d4(0x1cc)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x5134d4(0x15c),'localField':_0x5134d4(0x1df),'foreignField':'name','as':_0x5134d4(0x1a7)}},{'$unwind':_0x5134d4(0x1e0)},{'$project':{'product_name':_0x5134d4(0x169),'product_stock':_0x5134d4(0x1b4)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':'$product_stock'}}}]);console[_0x5134d4(0x17c)](_0x5134d4(0x166),_0x40a1e1),_0x40a1e1[_0x5134d4(0x16a)](_0x3820b3=>{const _0x23105a=_0x5134d4,_0x26ff00=_0x4c35a0[_0x23105a(0x1bb)](_0x36b642=>{const _0x42937c=_0x23105a;_0x36b642[_0x42937c(0x165)]==_0x3820b3[_0x42937c(0x1f3)]&&(_0x36b642[_0x42937c(0x181)]=parseInt(_0x36b642[_0x42937c(0x181)])+parseInt(_0x3820b3[_0x42937c(0x18c)]));});}),console[_0x5134d4(0x17c)](_0x5134d4(0x1b9),_0x4c35a0);if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]=='English\x20(US)')var _0x226d5e=users[_0x5134d4(0x155)];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]==_0x5134d4(0x1e1))var _0x226d5e=users[_0x5134d4(0x1e1)];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]=='German')var _0x226d5e=users[_0x5134d4(0x1fb)];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]==_0x5134d4(0x1d0))var _0x226d5e=users[_0x5134d4(0x1d0)];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]=='French')var _0x226d5e=users[_0x5134d4(0x1e4)];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]==_0x5134d4(0x1b7))var _0x226d5e=users['Portuguese'];else{if(_0x3c1ac7[0x0][_0x5134d4(0x1b6)]==_0x5134d4(0x1f6))var _0x226d5e=users[_0x5134d4(0x1f6)];else{if(_0x3c1ac7[0x0]['language']=='Arabic\x20(ae)')var _0x226d5e=users[_0x5134d4(0x1a8)];}}}}}}}_0x3e2cfe['render'](_0x5134d4(0x15c),{'success':_0x338230[_0x5134d4(0x1a2)]('success'),'errors':_0x338230[_0x5134d4(0x1a2)](_0x5134d4(0x1cb)),'alldata':_0x4c35a0,'profile':_0x486535,'master_shop':_0x3c1ac7,'role':_0x3f4b8a,'product_stock':_0x40a1e1,'language':_0x226d5e});}catch(_0x5102e7){console[_0x5134d4(0x17c)](_0x5102e7);}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x1fe),auth,async(_0x3c2584,_0x52fdad)=>{const _0x154f76=a0_0x41718b;try{const {username:_0x536c3f,email:_0x35911a,role:_0x623519}=_0x3c2584[_0x154f76(0x161)],_0xa559ee=_0x3c2584[_0x154f76(0x161)],_0x18f445=await profile['findOne']({'email':_0xa559ee[_0x154f76(0x1e6)]}),_0x3e6f0d=await master_shop['find']();console[_0x154f76(0x17c)](_0x154f76(0x1b3),_0x3e6f0d);const _0x597a7e=await categories[_0x154f76(0x1c1)]({}),_0x540808=await brands[_0x154f76(0x1c1)]({}),_0x58806c=await units[_0x154f76(0x1c1)]({}),_0x5d9e9b=await warehouse['find']({'status':_0x154f76(0x1b0)});if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]=='English\x20(US)')var _0x5d2ba5=users['English'];else{if(_0x3e6f0d[0x0]['language']==_0x154f76(0x1e1))var _0x5d2ba5=users['Hindi'];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]==_0x154f76(0x1fb))var _0x5d2ba5=users[_0x154f76(0x1fb)];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]==_0x154f76(0x1d0))var _0x5d2ba5=users[_0x154f76(0x1d0)];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]=='French')var _0x5d2ba5=users[_0x154f76(0x1e4)];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]==_0x154f76(0x1b7))var _0x5d2ba5=users[_0x154f76(0x1eb)];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]==_0x154f76(0x1f6))var _0x5d2ba5=users[_0x154f76(0x1f6)];else{if(_0x3e6f0d[0x0][_0x154f76(0x1b6)]==_0x154f76(0x16c))var _0x5d2ba5=users[_0x154f76(0x1a8)];}}}}}}}_0x52fdad['render']('add_product',{'success':_0x3c2584[_0x154f76(0x1a2)](_0x154f76(0x17e)),'errors':_0x3c2584['flash'](_0x154f76(0x1cb)),'role':_0xa559ee,'profile':_0x18f445,'categories':_0x597a7e,'brands':_0x540808,'master_shop':_0x3e6f0d,'units':_0x58806c,'language':_0x5d2ba5,'find_data':_0x5d9e9b});}catch(_0x33a0a0){console[_0x154f76(0x17c)](_0x33a0a0);}}),router['post'](a0_0x41718b(0x1fe),auth,upload[a0_0x41718b(0x1e5)](a0_0x41718b(0x19d)),async(_0x380736,_0x41237e)=>{const _0x4b2ea4=a0_0x41718b;try{const {name:_0x1607bc,category:_0x4ad794,brand:_0x1a923d,unit:_0x2b3968,alertquantity:_0x17a4f3,stock:_0x562c26,product_code:_0x178d74,warehouse:_0x589c8d,primary_ItemCode:_0x404a11,second_ItemCode:_0x394020,second_unit:_0x559b73,maxPerUnit:_0x51b0d6,MaxPerProduct:_0x215cc3}=_0x380736[_0x4b2ea4(0x1c7)],_0x22fb1a=_0x380736[_0x4b2ea4(0x19c)]?.[_0x4b2ea4(0x1e2)]||_0x4b2ea4(0x175),_0x1dd798=new product({'image':_0x22fb1a,'name':_0x1607bc,'category':_0x4ad794,'brand':_0x1a923d,'unit':_0x2b3968,'alertquantity':_0x17a4f3,'stock':_0x562c26,'product_code':_0x178d74,'warehouse':_0x589c8d,'primary_code':_0x404a11,'secondary_code':_0x394020,'second_unit':_0x559b73,'maxStocks':_0x215cc3,'maxProdPerUnit':_0x51b0d6}),_0x12fd2b=await _0x1dd798['save'](),_0x2251d4=await categories[_0x4b2ea4(0x15a)]({'name':_0x4ad794});_0x2251d4[_0x4b2ea4(0x15c)]=parseInt(_0x2251d4[_0x4b2ea4(0x15c)])+0x1,await _0x2251d4[_0x4b2ea4(0x1e8)]();const _0x58c426=await brands[_0x4b2ea4(0x15a)]({'name':_0x1a923d});_0x58c426[_0x4b2ea4(0x15c)]=parseInt(_0x58c426[_0x4b2ea4(0x15c)])+0x1,await _0x58c426[_0x4b2ea4(0x1e8)]();const _0x3dfdea=await units['findOne']({'name':_0x2b3968});_0x3dfdea[_0x4b2ea4(0x15c)]=parseInt(_0x3dfdea[_0x4b2ea4(0x15c)])+0x1,await _0x3dfdea['save'](),_0x380736[_0x4b2ea4(0x1a2)](_0x4b2ea4(0x17e),_0x4b2ea4(0x16e)),_0x41237e[_0x4b2ea4(0x1c8)](_0x4b2ea4(0x18a));}catch(_0x39a248){console[_0x4b2ea4(0x17c)](_0x39a248);}}),router['get'](a0_0x41718b(0x185),auth,async(_0x2f2526,_0x315c67)=>{const _0x31cc06=a0_0x41718b;try{const {username:_0x2664be,email:_0x12984c,role:_0x4736e7}=_0x2f2526['user'],_0x26fbeb=_0x2f2526['user'],_0x3e0279=await profile[_0x31cc06(0x15a)]({'email':_0x26fbeb['email']}),_0x472672=await master_shop[_0x31cc06(0x1c1)]();console[_0x31cc06(0x17c)](_0x31cc06(0x1fa),_0x472672);const _0x404f34=_0x2f2526['params']['id'],_0x4d4302=await product[_0x31cc06(0x1da)](_0x404f34),_0xe85d51=await categories[_0x31cc06(0x1c1)]({}),_0x1bae47=await brands[_0x31cc06(0x1c1)]({}),_0x4f05f2=await units[_0x31cc06(0x1c1)]({}),_0x14cc6d=await warehouse[_0x31cc06(0x1c1)]({'status':_0x31cc06(0x1b0)}),_0x4cdc9a=await units[_0x31cc06(0x1cc)]([{'$group':{'_id':_0x31cc06(0x1ca),'secondaryunit':{'$first':_0x31cc06(0x1d4)}}}]);if(_0x472672[0x0][_0x31cc06(0x1b6)]=='English\x20(US)')var _0x291496=users[_0x31cc06(0x155)];else{if(_0x472672[0x0][_0x31cc06(0x1b6)]=='Hindi')var _0x291496=users['Hindi'];else{if(_0x472672[0x0]['language']==_0x31cc06(0x1fb))var _0x291496=users[_0x31cc06(0x1fb)];else{if(_0x472672[0x0]['language']=='Spanish')var _0x291496=users[_0x31cc06(0x1d0)];else{if(_0x472672[0x0][_0x31cc06(0x1b6)]==_0x31cc06(0x1e4))var _0x291496=users[_0x31cc06(0x1e4)];else{if(_0x472672[0x0]['language']=='Portuguese\x20(BR)')var _0x291496=users['Portuguese'];else{if(_0x472672[0x0][_0x31cc06(0x1b6)]==_0x31cc06(0x1f6))var _0x291496=users[_0x31cc06(0x1f6)];else{if(_0x472672[0x0]['language']==_0x31cc06(0x16c))var _0x291496=users[_0x31cc06(0x1a8)];}}}}}}}_0x315c67[_0x31cc06(0x1fd)](_0x31cc06(0x1f7),{'success':_0x2f2526['flash'](_0x31cc06(0x17e)),'errors':_0x2f2526[_0x31cc06(0x1a2)]('errors'),'role':_0x26fbeb,'profile':_0x3e0279,'alldata':_0x4d4302,'categories':_0xe85d51,'brands':_0x1bae47,'master_shop':_0x472672,'units':_0x4f05f2,'secondunit':_0x4cdc9a,'find_data':_0x14cc6d,'language':_0x291496});}catch(_0x2a480e){console['log'](_0x2a480e);}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x185),auth,upload['single'](a0_0x41718b(0x19d)),async(_0x1d9235,_0x13199e)=>{const _0x24b30f=a0_0x41718b;try{console[_0x24b30f(0x17c)](_0x24b30f(0x163));const _0x4e547c=_0x1d9235['params']['id'],_0x5e7961=await product['findById'](_0x4e547c),{image:_0x281419,name:_0x4cd898,category:_0x1b3e94,brand:_0x3642f3,sku:_0x55125c,unit:_0x121ad,alertquantity:_0x183a8b,product_code:_0x5a1a28,warehouse:_0x4370a4,primary_ItemCode:_0x2e51a1,second_ItemCode:_0x110c3f,second_unit:_0x4c1720,maxPerUnit:_0x252079,MaxPerProduct:_0xa8e63a,prod_catdata:_0x258a6f}=_0x1d9235['body'];_0x1d9235[_0x24b30f(0x19c)]&&(_0x5e7961[_0x24b30f(0x19d)]=_0x1d9235['file'][_0x24b30f(0x1e2)]);_0x5e7961[_0x24b30f(0x165)]=_0x4cd898,_0x5e7961[_0x24b30f(0x203)]=_0x1b3e94,_0x5e7961[_0x24b30f(0x1a5)]=_0x3642f3,_0x5e7961[_0x24b30f(0x1b8)]=_0x55125c,_0x5e7961[_0x24b30f(0x1d3)]=_0x121ad,_0x5e7961[_0x24b30f(0x153)]=_0x183a8b,_0x5e7961[_0x24b30f(0x1a3)]=_0x5a1a28,_0x5e7961['warehouse']=_0x4370a4,_0x5e7961[_0x24b30f(0x1ae)]=_0x2e51a1,_0x5e7961[_0x24b30f(0x18e)]=_0x110c3f,_0x5e7961[_0x24b30f(0x194)]=_0x4c1720,_0x5e7961[_0x24b30f(0x207)]=_0xa8e63a,_0x5e7961[_0x24b30f(0x1bc)]=_0x252079,_0x5e7961[_0x24b30f(0x176)]=_0x258a6f;const _0x1f96fe=await _0x5e7961[_0x24b30f(0x1e8)]();console[_0x24b30f(0x17c)]('product\x20edit',_0x5e7961),_0x1d9235[_0x24b30f(0x1a2)](_0x24b30f(0x17e),_0x24b30f(0x1c5)),_0x13199e[_0x24b30f(0x1c8)](_0x24b30f(0x18a));}catch(_0x369435){console[_0x24b30f(0x17c)](_0x369435);}}),router['get'](a0_0x41718b(0x1c2),auth,async(_0xc6d0c4,_0x315c17)=>{const _0x261178=a0_0x41718b;try{const {username:_0x3d9079,email:_0x17b2ea,role:_0x4218ca}=_0xc6d0c4[_0x261178(0x161)],_0x9a03fd=_0xc6d0c4[_0x261178(0x161)],_0x187135=await profile['findOne']({'email':_0x9a03fd[_0x261178(0x1e6)]}),_0x56c94d=await master_shop['find']();console[_0x261178(0x17c)](_0x261178(0x151),_0x56c94d);const _0x291509=_0xc6d0c4['params']['id'],_0x9a7a8e=await product['findById'](_0x291509);console[_0x261178(0x17c)]('barcode\x20user_id',_0x9a7a8e);if(_0x56c94d[0x0][_0x261178(0x1b6)]=='English\x20(US)')var _0x2caf67=users[_0x261178(0x155)];else{if(_0x56c94d[0x0][_0x261178(0x1b6)]=='Hindi')var _0x2caf67=users[_0x261178(0x1e1)];else{if(_0x56c94d[0x0]['language']==_0x261178(0x1fb))var _0x2caf67=users[_0x261178(0x1fb)];else{if(_0x56c94d[0x0][_0x261178(0x1b6)]==_0x261178(0x1d0))var _0x2caf67=users['Spanish'];else{if(_0x56c94d[0x0][_0x261178(0x1b6)]==_0x261178(0x1e4))var _0x2caf67=users['French'];else{if(_0x56c94d[0x0]['language']==_0x261178(0x1b7))var _0x2caf67=users[_0x261178(0x1eb)];else{if(_0x56c94d[0x0][_0x261178(0x1b6)]==_0x261178(0x1f6))var _0x2caf67=users[_0x261178(0x1f6)];else{if(_0x56c94d[0x0][_0x261178(0x1b6)]=='Arabic\x20(ae)')var _0x2caf67=users[_0x261178(0x1a8)];}}}}}}}_0x315c17['render']('product_barcode',{'success':_0xc6d0c4[_0x261178(0x1a2)](_0x261178(0x17e)),'errors':_0xc6d0c4[_0x261178(0x1a2)]('errors'),'role':_0x9a03fd,'profile':_0x187135,'alldata':_0x9a7a8e,'master_shop':_0x56c94d,'language':_0x2caf67});}catch(_0x17f64f){console[_0x261178(0x17c)](_0x17f64f);}}),router['get'](a0_0x41718b(0x1d7),auth,async(_0x144f52,_0x5473e0)=>{const _0x5a8048=a0_0x41718b;try{const _0x2c2607=new excelJS[(_0x5a8048(0x180))](),_0x25240c=_0x2c2607[_0x5a8048(0x20d)]('Products');return _0x25240c[_0x5a8048(0x15b)]=[{'header':_0x5a8048(0x183),'key':_0x5a8048(0x177),'width':0xa},{'header':_0x5a8048(0x1a6),'key':_0x5a8048(0x18b),'width':0xa},{'header':'Units','key':_0x5a8048(0x19b),'width':0xa},{'header':_0x5a8048(0x1e3),'key':_0x5a8048(0x174),'width':0xa},{'header':_0x5a8048(0x1af),'key':_0x5a8048(0x19f),'width':0xa},{'header':_0x5a8048(0x1cd),'key':_0x5a8048(0x20b),'width':0xa},{'header':_0x5a8048(0x168),'key':'ProductCode','width':0xa},{'header':_0x5a8048(0x1d8),'key':_0x5a8048(0x20b),'width':0xa},{'header':_0x5a8048(0x209),'key':_0x5a8048(0x197),'width':0xa},{'header':'Alert_QTY','key':_0x5a8048(0x1cf),'width':0xa},{'header':_0x5a8048(0x164),'key':_0x5a8048(0x1cf),'width':0xa},{'header':'Products_category','key':_0x5a8048(0x18d),'width':0xa}],_0x5473e0[_0x5a8048(0x1d9)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5473e0[_0x5a8048(0x1d9)]('Content-Disposition',_0x5a8048(0x1f1)),_0x2c2607[_0x5a8048(0x1ab)]['write'](_0x5473e0)[_0x5a8048(0x199)](()=>{_0x5473e0['status'](0xc8);});}catch(_0x48952c){_0x5473e0['status'](0x190)[_0x5a8048(0x157)](_0x48952c);}});const storage1=multer[a0_0x41718b(0x1c0)]({'destination':(_0x55427d,_0x3a4cc6,_0x5ed366)=>{_0x5ed366(null,'public/Migration');},'filename':(_0x52b5c6,_0x4150b9,_0x5ad7f1)=>{const _0x4fb1e3=a0_0x41718b;_0x5ad7f1(null,Date[_0x4fb1e3(0x1ce)]()+_0x4150b9[_0x4fb1e3(0x204)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x41718b(0x195)](a0_0x41718b(0x1ad),auth,uploadMigrate['single'](a0_0x41718b(0x1b1)),async(_0x50455a,_0x3cc736)=>{const _0x49a328=a0_0x41718b,_0x458c56=_0x50455a['file'][_0x49a328(0x1e2)],_0xf6c2fd=await xlsx[_0x49a328(0x211)](_0x49a328(0x1ed)+_0x458c56);let _0x447b45=_0xf6c2fd['SheetNames'],_0x41def3=xlsx[_0x49a328(0x15e)][_0x49a328(0x1ef)](_0xf6c2fd[_0x49a328(0x154)][_0x447b45[0x0]]);for(const _0x3de353 of _0x41def3){const _0x5c2102=_0x3de353[_0x49a328(0x183)],_0x387cb1=_0x3de353[_0x49a328(0x1a6)],_0x3abbfe=_0x3de353['Units'],_0x3cf704=_0x3de353[_0x49a328(0x1e3)],_0x2ed354=_0x3de353['Product_Code'],_0x4adc9d=_0x3de353['Category'],_0x9b3789=_0x3de353[_0x49a328(0x179)],_0x19a66a=_0x3de353[_0x49a328(0x1cd)],_0x5a8195=_0x3de353['Secondary_Code'],_0x51ecc9=_0x3de353['Maximum_Stocks'],_0x41eea4=_0x3de353[_0x49a328(0x1af)],_0x231b22=_0x3de353[_0x49a328(0x1de)];try{let _0x5b8ac6=await categories[_0x49a328(0x15a)]({'name':_0x4adc9d});if(!_0x5b8ac6){const _0x1a6213=new categories({'name':_0x4adc9d,'products':'0'});_0x5b8ac6=await _0x1a6213[_0x49a328(0x1e8)]();}let _0xde41ab=await brands['findOne']({'name':_0x387cb1});if(!_0xde41ab){const _0x530682=new brands({'name':_0x387cb1,'products':'0'});_0xde41ab=await _0x530682[_0x49a328(0x1e8)]();}let _0x3def06=await units[_0x49a328(0x15a)]({'name':_0x3abbfe,'secondary_unit':_0x3cf704});if(!_0x3def06){const _0x2d724d=new units({'name':_0x3abbfe,'secondary_unit':_0x3cf704,'products':'0'});_0x3def06=await _0x2d724d[_0x49a328(0x1e8)]();}const _0x95038=await product[_0x49a328(0x1c1)]({'name':_0x5c2102,'category':_0x5b8ac6['name'],'brand':_0xde41ab[_0x49a328(0x165)],'secondary_unit':_0x3def06[_0x49a328(0x194)],'product_code':_0x2ed354});console['log'](_0x95038['length']+'\x20<>\x20'+_0x5b8ac6[_0x49a328(0x165)]+'\x20<>\x20'+_0xde41ab[_0x49a328(0x165)]+_0x49a328(0x20a)+_0x3def06[_0x49a328(0x194)]+_0x49a328(0x20a)+_0x2ed354+_0x49a328(0x20a)+_0x5c2102);if(_0x95038[_0x49a328(0x210)]===0x0){const _0x114eb4=new product({'image':_0x49a328(0x175),'name':_0x5c2102,'category':_0x5b8ac6[_0x49a328(0x165)],'brand':_0xde41ab[_0x49a328(0x165)],'unit':_0x3def06[_0x49a328(0x165)],'alertquantity':_0x9b3789,'product_code':_0x2ed354,'secondary_unit':_0x3def06[_0x49a328(0x194)],'primary_code':_0x19a66a,'secondary_code':_0x5a8195,'maxStocks':_0x51ecc9,'maxProdPerUnit':_0x41eea4,'product_category':_0x231b22}),_0x50f71d=await _0x114eb4[_0x49a328(0x1e8)]();_0x5b8ac6[_0x49a328(0x15c)]=parseInt(_0x5b8ac6[_0x49a328(0x15c)])+0x1,await _0x5b8ac6[_0x49a328(0x1e8)](),_0xde41ab['products']=parseInt(_0xde41ab['products'])+0x1,await _0xde41ab[_0x49a328(0x1e8)](),_0x3def06[_0x49a328(0x15c)]=parseInt(_0x3def06[_0x49a328(0x15c)])+0x1,await _0x3def06[_0x49a328(0x1e8)](),_0x50455a[_0x49a328(0x1a2)](_0x49a328(0x17e),_0x5c2102+_0x49a328(0x1dd));}else{console[_0x49a328(0x17c)](_0x95038[0x0]);const _0xd5e2a3=_0x95038[0x0];_0xd5e2a3[_0x49a328(0x203)]=_0x5b8ac6[_0x49a328(0x165)],_0xd5e2a3[_0x49a328(0x1a5)]=_0xde41ab[_0x49a328(0x165)],_0xd5e2a3[_0x49a328(0x1d3)]=_0x3def06[_0x49a328(0x165)],_0xd5e2a3[_0x49a328(0x153)]=_0x9b3789,_0xd5e2a3['product_code']=_0x2ed354,_0xd5e2a3['secondary_unit']=_0x3def06[_0x49a328(0x194)],_0xd5e2a3[_0x49a328(0x1ae)]=_0x19a66a,_0xd5e2a3[_0x49a328(0x18e)]=_0x5a8195,_0xd5e2a3[_0x49a328(0x207)]=_0x51ecc9,_0xd5e2a3[_0x49a328(0x1bc)]=_0x41eea4,_0xd5e2a3[_0x49a328(0x176)]=_0x231b22;const _0x55923f=await _0xd5e2a3[_0x49a328(0x1e8)]();_0x50455a['flash']('success',_0x55923f[_0x49a328(0x165)]+_0x49a328(0x1f9));}}catch(_0x56c6b3){_0x3cc736[_0x49a328(0x182)](0x1f4)['json']({'proderror':_0x56c6b3[_0x49a328(0x1d6)],'aproduct':_0x5c2102});}}_0x3cc736[_0x49a328(0x1c8)]('/products/view');}),router['post'](a0_0x41718b(0x206),auth,async(_0x1a4936,_0x4592cc)=>{const _0x9be4c0=a0_0x41718b;try{console[_0x9be4c0(0x17c)](_0x1a4936['body']);const {data_cateory:_0x3688fd,datachoose:_0x53eeeb}=_0x1a4936['body'];var _0x1b55a6;if(_0x53eeeb==_0x9be4c0(0x1a9))_0x1b55a6=await product[_0x9be4c0(0x1cc)]([{'$group':{'_id':_0x9be4c0(0x1b5)}}]);else{if(_0x53eeeb==_0x9be4c0(0x193))_0x1b55a6=await product[_0x9be4c0(0x1cc)]([{'$match':{'product_category':_0x3688fd}},{'$group':{'_id':_0x9be4c0(0x18f)}}]);else _0x53eeeb==_0x9be4c0(0x1dc)&&(_0x1b55a6=await product[_0x9be4c0(0x1cc)]([{'$match':{'product_category':_0x3688fd}},{'$group':{'_id':'$category'}}]));}_0x4592cc[_0x9be4c0(0x20f)](_0x1b55a6);}catch(_0x3a492c){_0x4592cc[_0x9be4c0(0x20f)]({'message':_0x3a492c[_0x9be4c0(0x1d6)]});}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x1ff),auth,async(_0x198d70,_0x561d03)=>{const _0x4d774d=a0_0x41718b;try{const {data_choosing:_0x33a55b,data_selected:_0x20e147}=_0x198d70[_0x4d774d(0x1c7)];var _0x190011;if(_0x33a55b==_0x4d774d(0x1a9))_0x190011=await product[_0x4d774d(0x1cc)]([{'$match':{'product_category':_0x20e147}}]);else{if(_0x33a55b=='brands')_0x190011=await product[_0x4d774d(0x1cc)]([{'$match':{'brand':_0x20e147}}]);else _0x33a55b==_0x4d774d(0x1dc)&&(_0x190011=await product[_0x4d774d(0x1cc)]([{'$match':{'category':_0x20e147}}]));}_0x561d03['json'](_0x190011);}catch(_0x49449f){_0x561d03[_0x4d774d(0x20f)]({'message':_0x49449f[_0x4d774d(0x1d6)]});}}),router[a0_0x41718b(0x192)](a0_0x41718b(0x150),auth,async(_0x8e77d1,_0x447b04)=>{const _0x4b3b13=a0_0x41718b,_0x2e89df=_0x8e77d1[_0x4b3b13(0x161)],_0x172932=await profile[_0x4b3b13(0x15a)]({'email':_0x2e89df['email']}),_0x4478d9=await master_shop[_0x4b3b13(0x1c1)](),_0x35f759=await product[_0x4b3b13(0x1c1)]();if(_0x4478d9[0x0]['language']==_0x4b3b13(0x172))var _0x241e2e=users[_0x4b3b13(0x155)];else{if(_0x4478d9[0x0][_0x4b3b13(0x1b6)]==_0x4b3b13(0x1e1))var _0x241e2e=users[_0x4b3b13(0x1e1)];else{if(_0x4478d9[0x0][_0x4b3b13(0x1b6)]==_0x4b3b13(0x1fb))var _0x241e2e=users['German'];else{if(_0x4478d9[0x0]['language']==_0x4b3b13(0x1d0))var _0x241e2e=users[_0x4b3b13(0x1d0)];else{if(_0x4478d9[0x0][_0x4b3b13(0x1b6)]=='French')var _0x241e2e=users[_0x4b3b13(0x1e4)];else{if(_0x4478d9[0x0][_0x4b3b13(0x1b6)]=='Portuguese\x20(BR)')var _0x241e2e=users[_0x4b3b13(0x1eb)];else{if(_0x4478d9[0x0]['language']==_0x4b3b13(0x1f6))var _0x241e2e=users[_0x4b3b13(0x1f6)];else{if(_0x4478d9[0x0][_0x4b3b13(0x1b6)]==_0x4b3b13(0x16c))var _0x241e2e=users['Arabic'];}}}}}}}_0x447b04['render'](_0x4b3b13(0x167),{'success':_0x8e77d1[_0x4b3b13(0x1a2)](_0x4b3b13(0x17e)),'errors':_0x8e77d1['flash'](_0x4b3b13(0x1cb)),'role':_0x2e89df,'profile':_0x172932,'products':_0x35f759,'master_shop':_0x4478d9,'language':_0x241e2e});}),router['post'](a0_0x41718b(0x178),auth,async(_0x249611,_0x2e3169)=>{const _0x479dfb=a0_0x41718b,_0x442768=await product[_0x479dfb(0x1c1)]();_0x2e3169['json']({'data':_0x442768});}),router['post'](a0_0x41718b(0x17d),auth,async(_0x2ee02a,_0x2fe300)=>{const _0xf821b9=a0_0x41718b;try{const {dataProdCat:_0xeba229,dataProdIdentity:_0x3fd4f1}=_0x2ee02a[_0xf821b9(0x1c7)];var _0x255677;switch(_0xeba229){case'fg':switch(_0x3fd4f1){case _0xf821b9(0x1a6):_0x255677=await product[_0xf821b9(0x1cc)]([{'$match':{'product_category':_0xf821b9(0x173)}},{'$group':{'_id':_0xf821b9(0x18f)}},{'$project':{'brand':_0xf821b9(0x1ca)}}]);break;case'Category':_0x255677=await product[_0xf821b9(0x1cc)]([{'$match':{'product_category':_0xf821b9(0x173)}},{'$group':{'_id':'$category'}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x3fd4f1){case _0xf821b9(0x1a6):_0x255677=await product['aggregate']([{'$match':{'product_category':_0xf821b9(0x1ec)}},{'$group':{'_id':_0xf821b9(0x18f)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x255677=await product[_0xf821b9(0x1cc)]([{'$match':{'product_category':_0xf821b9(0x1ec)}},{'$group':{'_id':_0xf821b9(0x15d)}},{'$project':{'category':_0xf821b9(0x1ca)}}]);break;}break;}_0x2fe300[_0xf821b9(0x20f)](_0x255677);}catch(_0x49fd75){_0x2fe300[_0xf821b9(0x20f)]({'message':_0x49fd75[_0xf821b9(0x1d6)]});}}),router['post']('/print_barcode_filter/',auth,async(_0x2e2242,_0x2c45cc)=>{const _0x4863f3=a0_0x41718b;try{console['log'](_0x2e2242[_0x4863f3(0x1c7)]);const {prod_cat:_0x2d1029,identity:_0x10e031,valueData:_0x343d44,typeofbarcode:_0x56512b}=_0x2e2242[_0x4863f3(0x1c7)];let _0xc28e88;switch(_0x2d1029){case'fg':if(_0x10e031=='Brands')_0xc28e88=await product[_0x4863f3(0x1cc)]([{'$match':{'product_category':_0x4863f3(0x173),'brand':_0x343d44}}]);else _0x10e031==_0x4863f3(0x209)&&(_0xc28e88=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','category':_0x343d44}}]));break;case'rm':if(_0x10e031=='Brands')_0xc28e88=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x343d44}}]);else _0x10e031==_0x4863f3(0x209)&&(_0xc28e88=await product[_0x4863f3(0x1cc)]([{'$match':{'product_category':_0x4863f3(0x1ec),'category':_0x343d44}}]));break;}const _0x4e3e2e=_0x57f56b=>_0x57f56b*0x48,_0x358127={'width':0x3,'height':0x1},_0x585df8=new PDFDocument({'margin':_0x4e3e2e(0.75),'size':[_0x4e3e2e(_0x358127[_0x4863f3(0x162)]),_0x4e3e2e(_0x358127[_0x4863f3(0x190)])],'bufferPages':!![]}),_0x344500=_0xc28e88[_0x4863f3(0x210)];for(let _0x4a19be=0x0;_0x4a19be<=_0x344500;_0x4a19be++){if(_0x4a19be!=_0x344500){const _0x546177=_0xc28e88[_0x4a19be][_0x4863f3(0x165)],_0x2a2597=_0xc28e88[_0x4a19be][_0x4863f3(0x1ae)],_0x24df3d=_0xc28e88[_0x4a19be]['secondary_code'],_0x4b523e=_0xc28e88[_0x4a19be]['product_code'];var _0x299050;switch(_0x56512b){case'1':_0x299050=_0x2a2597;break;case'2':_0x299050=_0x24df3d;break;case'3':_0x299050=_0x4b523e;break;}const _0x2f189c={'width':0xd2,'height':0x64},_0x1990aa={'width':_0x4e3e2e(_0x358127[_0x4863f3(0x162)]),'height':_0x4e3e2e(_0x358127[_0x4863f3(0x190)])},_0x51cfa7=new Canvas();JsBarcode(_0x51cfa7,_0x299050,{'format':'CODE128','height':_0x2f189c[_0x4863f3(0x190)],'displayValue':!![],'text':_0x299050});const _0x34e36b=_0x51cfa7[_0x4863f3(0x1b2)](),_0xa21ae2=_0x1990aa[_0x4863f3(0x162)]/_0x2f189c[_0x4863f3(0x162)],_0x26ac8c=_0x1990aa[_0x4863f3(0x190)]/_0x2f189c[_0x4863f3(0x190)],_0x18899b=Math[_0x4863f3(0x1a1)](_0xa21ae2,_0x26ac8c),_0xeeea19=_0x2f189c['width']*_0x18899b,_0x51fc2f=_0x2f189c[_0x4863f3(0x190)]*_0x18899b,_0x34a1ce=(_0x1990aa[_0x4863f3(0x162)]-_0xeeea19)/0x2,_0x18e8a5=(_0x1990aa[_0x4863f3(0x190)]-_0x51fc2f)/0x2;_0x585df8[_0x4863f3(0x19d)](_0x34e36b,_0x34a1ce,_0x18e8a5,{'width':_0xeeea19,'height':_0x51fc2f}),_0x4a19be!=_0x344500&&_0x585df8[_0x4863f3(0x1db)]();}}const _0x135af9=[];_0x585df8['on'](_0x4863f3(0x20e),_0x135af9[_0x4863f3(0x1f2)]['bind'](_0x135af9)),_0x585df8['on']('end',()=>{const _0x12a540=_0x4863f3,_0x3ead07=Buffer[_0x12a540(0x196)](_0x135af9),_0x44c161=_0x3ead07[_0x12a540(0x1fc)](_0x12a540(0x184));_0x2c45cc[_0x12a540(0x20f)]({'pdfContent':_0x44c161});}),_0x585df8[_0x4863f3(0x1a0)]();}catch(_0x589a38){_0x2c45cc[_0x4863f3(0x20f)]({'message':_0x589a38[_0x4863f3(0x1d6)]});}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x1d2),auth,async(_0x3c466b,_0x282bd1)=>{const _0x2e4cda=a0_0x41718b;try{console[_0x2e4cda(0x17c)](_0x3c466b[_0x2e4cda(0x1c7)]);const {prod_cat:_0x3f2c97,identity:_0x1ee8a1,valueData:_0xb8cf42}=_0x3c466b[_0x2e4cda(0x1c7)];let _0x4d3ee4;switch(_0x3f2c97){case'fg':if(_0x1ee8a1==_0x2e4cda(0x1a6))_0x4d3ee4=await product['aggregate']([{'$match':{'product_category':_0x2e4cda(0x173),'brand':_0xb8cf42}}]);else _0x1ee8a1==_0x2e4cda(0x209)&&(_0x4d3ee4=await product['aggregate']([{'$match':{'product_category':_0x2e4cda(0x173),'category':_0xb8cf42}}]));break;case'rm':if(_0x1ee8a1=='Brands')_0x4d3ee4=await product[_0x2e4cda(0x1cc)]([{'$match':{'product_category':_0x2e4cda(0x1ec),'brand':_0xb8cf42}}]);else _0x1ee8a1==_0x2e4cda(0x209)&&(_0x4d3ee4=await product[_0x2e4cda(0x1cc)]([{'$match':{'product_category':_0x2e4cda(0x1ec),'category':_0xb8cf42}}]));break;}_0x282bd1[_0x2e4cda(0x20f)]({'data':_0x4d3ee4});}catch(_0x13fe98){_0x282bd1[_0x2e4cda(0x20f)]({'message':_0x13fe98['message']});}}),router[a0_0x41718b(0x195)](a0_0x41718b(0x1aa),auth,async(_0x2307e1,_0x270298)=>{const _0x4ab195=a0_0x41718b;try{const _0x3854cd=_0x2307e1[_0x4ab195(0x1c3)]['id'],{copies:_0x4dc433,typeofbarcode:_0x57d4c3}=_0x2307e1[_0x4ab195(0x1c7)];var _0x2be6aa=await product['findById'](_0x3854cd);const _0x397944=_0x2c39b7=>_0x2c39b7*0x48,_0x443972={'width':0x3,'height':0x1},_0x285043=new PDFDocument({'margin':_0x397944(0.75),'size':[_0x397944(_0x443972[_0x4ab195(0x162)]),_0x397944(_0x443972[_0x4ab195(0x190)])],'bufferPages':!![]}),_0xb9a9cd=_0x4dc433,_0x1dd8bb=_0x2be6aa[_0x4ab195(0x165)],_0x5dcfe2=_0x2be6aa[_0x4ab195(0x1ae)],_0x733c50=_0x2be6aa[_0x4ab195(0x18e)],_0x229b38=_0x2be6aa['product_code'];let _0x2b4043;switch(_0x57d4c3){case'1':_0x2b4043=_0x5dcfe2;break;case'2':_0x2b4043=_0x733c50;break;case'3':_0x2b4043=_0x229b38;break;}const _0x415af5={'width':0xd2,'height':0x64},_0x1f5b32={'width':_0x397944(_0x443972['width']),'height':_0x397944(_0x443972['height'])};for(let _0x1f6048=0x1;_0x1f6048<=_0xb9a9cd;_0x1f6048++){const _0x2a19b6=new Canvas();JsBarcode(_0x2a19b6,_0x2b4043,{'format':'CODE128','height':_0x415af5[_0x4ab195(0x190)],'displayValue':!![],'text':_0x2b4043});const _0x30292a=_0x2a19b6[_0x4ab195(0x1b2)](),_0x154b5a=_0x1f5b32[_0x4ab195(0x162)]/_0x415af5[_0x4ab195(0x162)],_0x5cdb10=_0x1f5b32[_0x4ab195(0x190)]/_0x415af5[_0x4ab195(0x190)],_0x2d8646=Math[_0x4ab195(0x1a1)](_0x154b5a,_0x5cdb10),_0x4ea8f0=_0x415af5[_0x4ab195(0x162)]*_0x2d8646,_0x1f5a6b=_0x415af5[_0x4ab195(0x190)]*_0x2d8646,_0x4cbf55=(_0x1f5b32[_0x4ab195(0x162)]-_0x4ea8f0)/0x2,_0x3f769c=(_0x1f5b32['height']-_0x1f5a6b)/0x2;_0x285043['image'](_0x30292a,_0x4cbf55,_0x3f769c,{'width':_0x4ea8f0,'height':_0x1f5a6b}),_0x1f6048!=_0xb9a9cd&&_0x285043[_0x4ab195(0x1db)]();}const _0xdb78f8=[];_0x285043['on'](_0x4ab195(0x20e),_0xdb78f8[_0x4ab195(0x1f2)][_0x4ab195(0x191)](_0xdb78f8)),_0x285043['on'](_0x4ab195(0x1a0),()=>{const _0x398025=_0x4ab195,_0x296f92=Buffer[_0x398025(0x196)](_0xdb78f8),_0x296aeb=_0x296f92[_0x398025(0x1fc)](_0x398025(0x184));_0x270298['json']({'pdfContent':_0x296aeb});}),_0x285043[_0x4ab195(0x1a0)]();}catch(_0x292276){_0x270298[_0x4ab195(0x20f)]({'message':_0x292276[_0x4ab195(0x1d6)]});}}),module['exports']=router;