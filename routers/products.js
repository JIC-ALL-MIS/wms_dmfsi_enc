const a0_0x4b8a75=a0_0x283e;function a0_0x3259(){const _0x2efb82=['Product_Name','Products\x20master','send','exceljs','Products\x20find_data','../public/language/languages.json','/brands/:id','message','max_number_per_units','height','$product_details','Finished\x20Goods','Brands','body','/print_barcode','CODE128','PAlQty','$_id','/print_barcode_single/:id','data','/brands','user','map','get','4506072IFCIJg','English','Spanish','sku','flash','public/Migration/','\x20Edit\x20Successfully','/select_data','success','product\x20update\x20successfully','\x20<>\x20','jsbarcode','$product_category','long','/categories/delete/:id','findById','then','master','pdfkit-table','/units/delete/:id','categ','brand\x20data\x20update\x20successfully','edit_product','products','name','length','/view/add_products','$product_name','Content-Type','secondary_code','json','image','width','product_details.product_name','_id','categories','add_product','\x20categories\x20is\x20add\x20successfully','exports','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','express/lib/response','English\x20(US)','language','/print_barcode_filter_search/','/view/:id','PUnits','readFile','barcode\x20Product\x20master','/products_import_migrate_file','unit\x20data\x20update\x20successfully','233958fNTkWX','edit\x20Product\x20master','primary_code','961926UJLUHJ','Maximum_Stocks','render','filename','setHeader','status','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','single','/barcode_data','diskStorage','public/Migration','PCat','\x20unit\x20is\x20add\x20successfully','Product_Code','alertquantity','Portuguese\x20(BR)','barcode\x20user_id','German','product_code','find','warehouse','/categories','SheetNames','multer','write','/print_barcode_filter/','/categories/:id','params','concat','push','sheet_to_json','Alert_QTY','numeric','toString','/view','1003060Iqhlyq','Router','/units','maxStocks','bind','unit\x20data\x20delete\x20successfully','save','/products/units','attachment;\x20filename=Product_Migration_File.xlsx','stock','product_docs','file','units','findByIdAndUpdate','base64','addPage','product_category','maxProdPerUnit','min','/brands/delete/:id','French','$secondary_unit','Primary_Code','category','categories\x20data\x20delete\x20successfully','forEach','Secondary_Code','\x20brand\x20is\x20add\x20successfully','1416443UXgcsF','public/upload','/filter_product','findOne','MaxperUnits','Portuguese','defaultProduct.avif','$brand','toBuffer','redirect','product_barcode_products','Products\x20warehouse_data','log','\x20added\x20successfully','Units','email','secondary_unit','Workbook','/products/categories','findByIdAndDelete','unit','../middleware/auth','Secondary_Units','205797SOTdap','product_barcode','end','errors','Arabic','ProductCode','aggregate','45OrIscA','hello','Raw\x20Materials','Category','Products_category','$category','300424JhPXhU','/barcode_filter','/products/view','post','categories_edit','brands','PBrands','originalname','/products/brands','Hindi','columns','Arabic\x20(ae)','brand','xlsx','Chinese','/units/:id','utils','addWorksheet','$product_stock','../models/all_models','prod_categ','product_stock'];a0_0x3259=function(){return _0x2efb82;};return a0_0x3259();}function a0_0x283e(_0x19ad91,_0x469dbb){const _0x32592a=a0_0x3259();return a0_0x283e=function(_0x283e8a,_0x1da5d2){_0x283e8a=_0x283e8a-0x1d6;let _0x53b593=_0x32592a[_0x283e8a];return _0x53b593;},a0_0x283e(_0x19ad91,_0x469dbb);}(function(_0x13bfa3,_0x4e30d7){const _0x53c440=a0_0x283e,_0x2730f6=_0x13bfa3();while(!![]){try{const _0x16ec50=parseInt(_0x53c440(0x207))/0x1+parseInt(_0x53c440(0x214))/0x2+-parseInt(_0x53c440(0x277))/0x3+-parseInt(_0x53c440(0x29a))/0x4+-parseInt(_0x53c440(0x20e))/0x5*(parseInt(_0x53c440(0x274))/0x6)+parseInt(_0x53c440(0x1f0))/0x7+parseInt(_0x53c440(0x242))/0x8;if(_0x16ec50===_0x4e30d7)break;else _0x2730f6['push'](_0x2730f6['shift']());}catch(_0x3c5c4c){_0x2730f6['push'](_0x2730f6['shift']());}}}(a0_0x3259,0x30a69));const express=require('express'),res=require(a0_0x4b8a75(0x26a)),app=express(),router=express[a0_0x4b8a75(0x29b)](),multer=require(a0_0x4b8a75(0x28e)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x4b8a75(0x227)),auth=require(a0_0x4b8a75(0x205)),users=require(a0_0x4b8a75(0x22f)),excelJS=require(a0_0x4b8a75(0x22d)),xlsx=require(a0_0x4b8a75(0x221)),JsBarcode=require(a0_0x4b8a75(0x24d)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x4b8a75(0x254));router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x28c),auth,async(_0xccb029,_0x3c01a3)=>{const _0x88188d=a0_0x4b8a75;try{const {username:_0x1b85b4,email:_0x18a328,role:_0x3f6c78}=_0xccb029[_0x88188d(0x23f)],_0x4434be=_0xccb029[_0x88188d(0x23f)],_0x173bfb=await profile[_0x88188d(0x1f3)]({'email':_0x4434be[_0x88188d(0x1ff)]}),_0x329836=await master_shop[_0x88188d(0x28a)]();console[_0x88188d(0x1fc)](_0x88188d(0x253),_0x329836);const _0x3de9e5=await categories[_0x88188d(0x28a)]();if(_0x329836[0x0][_0x88188d(0x26c)]==_0x88188d(0x26b))var _0x5787c1=users['English'];else{if(_0x329836[0x0][_0x88188d(0x26c)]==_0x88188d(0x21d))var _0x5787c1=users['Hindi'];else{if(_0x329836[0x0][_0x88188d(0x26c)]==_0x88188d(0x288))var _0x5787c1=users[_0x88188d(0x288)];else{if(_0x329836[0x0][_0x88188d(0x26c)]=='Spanish')var _0x5787c1=users[_0x88188d(0x244)];else{if(_0x329836[0x0][_0x88188d(0x26c)]==_0x88188d(0x1e8))var _0x5787c1=users[_0x88188d(0x1e8)];else{if(_0x329836[0x0][_0x88188d(0x26c)]==_0x88188d(0x286))var _0x5787c1=users[_0x88188d(0x1f5)];else{if(_0x329836[0x0][_0x88188d(0x26c)]=='Chinese')var _0x5787c1=users[_0x88188d(0x222)];else{if(_0x329836[0x0]['language']=='Arabic\x20(ae)')var _0x5787c1=users[_0x88188d(0x20b)];}}}}}}}_0x3c01a3[_0x88188d(0x279)](_0x88188d(0x265),{'success':_0xccb029[_0x88188d(0x246)]('success'),'errors':_0xccb029['flash']('errors'),'role':_0x4434be,'profile':_0x173bfb,'user':_0x3de9e5,'master_shop':_0x329836,'language':_0x5787c1});}catch(_0x35765c){console[_0x88188d(0x1fc)](_0x35765c);}}),router[a0_0x4b8a75(0x217)]('/categories',auth,async(_0x34132f,_0x42466b)=>{const _0x509ddf=a0_0x4b8a75;try{const {name:_0x1c6837,products:_0x4be20d}=_0x34132f[_0x509ddf(0x237)],_0x194393=new categories({'name':_0x1c6837,'products':_0x4be20d}),_0x1d079d=await categories[_0x509ddf(0x1f3)]({'name':_0x1c6837});_0x1d079d?_0x34132f[_0x509ddf(0x246)](_0x509ddf(0x20a),_0x1c6837+_0x509ddf(0x27d)):_0x34132f[_0x509ddf(0x246)](_0x509ddf(0x24a),_0x1c6837+_0x509ddf(0x267));const _0x1dff34=await _0x194393[_0x509ddf(0x1da)]();_0x42466b[_0x509ddf(0x1f9)](_0x509ddf(0x202));}catch(_0x56920d){console[_0x509ddf(0x1fc)](_0x56920d);}}),router[a0_0x4b8a75(0x241)]('/categories/:id',auth,async(_0xe99662,_0x18bd8d)=>{const _0x46f29d=a0_0x4b8a75;try{const {username:_0xdb3b1f,email:_0x56b8b7,role:_0xfc1054}=_0xe99662[_0x46f29d(0x23f)],_0xe65077=_0xe99662[_0x46f29d(0x23f)],_0x43180c=await profile[_0x46f29d(0x1f3)]({'email':_0xe65077[_0x46f29d(0x1ff)]}),_0x330a19=await master_shop[_0x46f29d(0x28a)]();console[_0x46f29d(0x1fc)](_0x46f29d(0x253),_0x330a19);const _0xbadba6=_0xe99662[_0x46f29d(0x292)]['id'];console[_0x46f29d(0x1fc)](_0xbadba6);const _0x135e81=await categories[_0x46f29d(0x251)](_0xbadba6);if(_0x330a19[0x0][_0x46f29d(0x26c)]==_0x46f29d(0x26b))var _0x40a360=users[_0x46f29d(0x243)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]==_0x46f29d(0x21d))var _0x40a360=users[_0x46f29d(0x21d)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]==_0x46f29d(0x288))var _0x40a360=users[_0x46f29d(0x288)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]=='Spanish')var _0x40a360=users[_0x46f29d(0x244)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]=='French')var _0x40a360=users[_0x46f29d(0x1e8)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]==_0x46f29d(0x286))var _0x40a360=users[_0x46f29d(0x1f5)];else{if(_0x330a19[0x0][_0x46f29d(0x26c)]==_0x46f29d(0x222))var _0x40a360=users[_0x46f29d(0x222)];else{if(_0x330a19[0x0]['language']==_0x46f29d(0x21f))var _0x40a360=users[_0x46f29d(0x20b)];}}}}}}}_0x18bd8d[_0x46f29d(0x279)](_0x46f29d(0x265),{'success':_0xe99662[_0x46f29d(0x246)](_0x46f29d(0x24a)),'errors':_0xe99662[_0x46f29d(0x246)](_0x46f29d(0x20a)),'role':_0xe65077,'profile':_0x43180c,'master_shop':_0x330a19,'user':_0x135e81,'language':_0x40a360});}catch(_0x3338ca){console['log'](_0x3338ca);}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x291),auth,async(_0x388ded,_0x3bb2ad)=>{const _0x56b466=a0_0x4b8a75;try{const _0x3437b4=_0x388ded[_0x56b466(0x292)]['id'],_0x3848be=await categories[_0x56b466(0x1e1)](_0x3437b4,_0x388ded['body']);_0x388ded['flash']('success',''+users[_0x56b466(0x218)]),_0x3bb2ad[_0x56b466(0x1f9)](_0x56b466(0x202));}catch(_0x1d818f){console[_0x56b466(0x1fc)](_0x1d818f);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x250),auth,async(_0x40b53d,_0x318146)=>{const _0x18c079=a0_0x4b8a75;try{const _0xb4736b=_0x40b53d[_0x18c079(0x292)]['id'],_0x526328=await categories[_0x18c079(0x203)](_0xb4736b);_0x40b53d[_0x18c079(0x246)](_0x18c079(0x24a),_0x18c079(0x1ec)),_0x318146[_0x18c079(0x1f9)]('/products/categories');}catch(_0x2b4289){console[_0x18c079(0x1fc)](_0x2b4289);}}),router[a0_0x4b8a75(0x241)]('/brands',auth,async(_0x53c9e1,_0x50f4e3)=>{const _0x692365=a0_0x4b8a75;try{const {username:_0x819b0f,email:_0x2f36a5,role:_0x38ff9c}=_0x53c9e1[_0x692365(0x23f)],_0x40e2ef=_0x53c9e1[_0x692365(0x23f)],_0x3acb6b=await profile[_0x692365(0x1f3)]({'email':_0x40e2ef[_0x692365(0x1ff)]}),_0x210124=await master_shop[_0x692365(0x28a)]();console[_0x692365(0x1fc)](_0x692365(0x253),_0x210124);const _0x154962=await brands[_0x692365(0x28a)]();if(_0x210124[0x0][_0x692365(0x26c)]==_0x692365(0x26b))var _0x11b3b6=users[_0x692365(0x243)];else{if(_0x210124[0x0][_0x692365(0x26c)]=='Hindi')var _0x11b3b6=users[_0x692365(0x21d)];else{if(_0x210124[0x0]['language']==_0x692365(0x288))var _0x11b3b6=users['German'];else{if(_0x210124[0x0][_0x692365(0x26c)]=='Spanish')var _0x11b3b6=users[_0x692365(0x244)];else{if(_0x210124[0x0][_0x692365(0x26c)]==_0x692365(0x1e8))var _0x11b3b6=users[_0x692365(0x1e8)];else{if(_0x210124[0x0][_0x692365(0x26c)]=='Portuguese\x20(BR)')var _0x11b3b6=users[_0x692365(0x1f5)];else{if(_0x210124[0x0][_0x692365(0x26c)]==_0x692365(0x222))var _0x11b3b6=users['Chinese'];else{if(_0x210124[0x0]['language']==_0x692365(0x21f))var _0x11b3b6=users[_0x692365(0x20b)];}}}}}}}_0x50f4e3[_0x692365(0x279)](_0x692365(0x219),{'success':_0x53c9e1['flash'](_0x692365(0x24a)),'errors':_0x53c9e1['flash']('errors'),'role':_0x40e2ef,'profile':_0x3acb6b,'master_shop':_0x210124,'user':_0x154962,'language':_0x11b3b6});}catch(_0x51526a){console[_0x692365(0x1fc)](_0x51526a);}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x23e),auth,async(_0x5de3a1,_0x3b1970)=>{const _0x2d18c0=a0_0x4b8a75;try{const {name:_0x53cb45,products:_0x25aab8}=_0x5de3a1[_0x2d18c0(0x237)],_0x5ecb5b=new brands({'name':_0x53cb45,'products':_0x25aab8}),_0xa92668=await brands[_0x2d18c0(0x1f3)]({'name':_0x53cb45});_0xa92668?_0x5de3a1[_0x2d18c0(0x246)]('errors',_0x53cb45+_0x2d18c0(0x269)):_0x5de3a1[_0x2d18c0(0x246)](_0x2d18c0(0x24a),_0x53cb45+_0x2d18c0(0x1ef));const _0x5d1867=await _0x5ecb5b[_0x2d18c0(0x1da)]();_0x3b1970[_0x2d18c0(0x1f9)](_0x2d18c0(0x21c));}catch(_0x1cc864){console[_0x2d18c0(0x1fc)](_0x1cc864);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x230),auth,async(_0x52c519,_0xf907a3)=>{const _0x541638=a0_0x4b8a75;try{const {username:_0x3edebb,email:_0x22137d,role:_0x96b20f}=_0x52c519['user'],_0x5d73a2=_0x52c519['user'],_0x2cae62=await profile[_0x541638(0x1f3)]({'email':_0x5d73a2[_0x541638(0x1ff)]}),_0x4b3e97=await master_shop[_0x541638(0x28a)]();console[_0x541638(0x1fc)](_0x541638(0x253),_0x4b3e97);const _0x310255=_0x52c519[_0x541638(0x292)]['id'];console[_0x541638(0x1fc)](_0x310255);const _0x43fee4=await brands[_0x541638(0x251)](_0x310255);if(_0x4b3e97[0x0][_0x541638(0x26c)]=='English\x20(US)')var _0x110a38=users[_0x541638(0x243)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]==_0x541638(0x21d))var _0x110a38=users[_0x541638(0x21d)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]=='German')var _0x110a38=users[_0x541638(0x288)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]==_0x541638(0x244))var _0x110a38=users[_0x541638(0x244)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]==_0x541638(0x1e8))var _0x110a38=users[_0x541638(0x1e8)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]=='Portuguese\x20(BR)')var _0x110a38=users[_0x541638(0x1f5)];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]==_0x541638(0x222))var _0x110a38=users['Chinese'];else{if(_0x4b3e97[0x0][_0x541638(0x26c)]==_0x541638(0x21f))var _0x110a38=users[_0x541638(0x20b)];}}}}}}}_0xf907a3[_0x541638(0x279)](_0x541638(0x219),{'success':_0x52c519[_0x541638(0x246)](_0x541638(0x24a)),'errors':_0x52c519[_0x541638(0x246)](_0x541638(0x20a)),'role':_0x5d73a2,'profile':_0x2cae62,'master_shop':_0x4b3e97,'user':_0x43fee4,'language':_0x110a38});}catch(_0x481a89){console[_0x541638(0x1fc)](_0x481a89);}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x230),auth,async(_0x28d30d,_0x1a6b6c)=>{const _0x2c5a3a=a0_0x4b8a75;try{const _0x24ae61=_0x28d30d[_0x2c5a3a(0x292)]['id'],_0x438f35=await brands[_0x2c5a3a(0x1e1)](_0x24ae61,_0x28d30d['body']);_0x28d30d[_0x2c5a3a(0x246)](_0x2c5a3a(0x24a),_0x2c5a3a(0x257)),_0x1a6b6c[_0x2c5a3a(0x1f9)](_0x2c5a3a(0x21c));}catch(_0x5cef45){console['log'](_0x5cef45);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x1e7),auth,async(_0x581d4b,_0x20baf8)=>{const _0x36ca9f=a0_0x4b8a75;try{const _0x388683=_0x581d4b[_0x36ca9f(0x292)]['id'],_0x3dc6ea=await brands['findByIdAndDelete'](_0x388683);_0x581d4b[_0x36ca9f(0x246)]('success','brand\x20data\x20delete\x20successfully'),_0x20baf8[_0x36ca9f(0x1f9)](_0x36ca9f(0x21c));}catch(_0x2d4494){console[_0x36ca9f(0x1fc)](_0x2d4494);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x1d6),auth,async(_0x46ead7,_0x36d26c)=>{const _0x1da005=a0_0x4b8a75;try{const {username:_0x170613,email:_0x134efb,role:_0x13a6f1}=_0x46ead7['user'],_0x29b6ed=_0x46ead7[_0x1da005(0x23f)],_0x1fdb59=await profile['findOne']({'email':_0x29b6ed[_0x1da005(0x1ff)]}),_0x572677=await master_shop[_0x1da005(0x28a)]();console['log'](_0x1da005(0x253),_0x572677);const _0x15dba5=await units[_0x1da005(0x28a)]();if(_0x572677[0x0][_0x1da005(0x26c)]=='English\x20(US)')var _0x551520=users[_0x1da005(0x243)];else{if(_0x572677[0x0]['language']==_0x1da005(0x21d))var _0x551520=users[_0x1da005(0x21d)];else{if(_0x572677[0x0]['language']=='German')var _0x551520=users[_0x1da005(0x288)];else{if(_0x572677[0x0][_0x1da005(0x26c)]==_0x1da005(0x244))var _0x551520=users[_0x1da005(0x244)];else{if(_0x572677[0x0][_0x1da005(0x26c)]=='French')var _0x551520=users[_0x1da005(0x1e8)];else{if(_0x572677[0x0][_0x1da005(0x26c)]==_0x1da005(0x286))var _0x551520=users['Portuguese'];else{if(_0x572677[0x0][_0x1da005(0x26c)]==_0x1da005(0x222))var _0x551520=users['Chinese'];else{if(_0x572677[0x0][_0x1da005(0x26c)]==_0x1da005(0x21f))var _0x551520=users[_0x1da005(0x20b)];}}}}}}}_0x36d26c[_0x1da005(0x279)]('units',{'success':_0x46ead7[_0x1da005(0x246)]('success'),'errors':_0x46ead7['flash']('errors'),'role':_0x29b6ed,'profile':_0x1fdb59,'master_shop':_0x572677,'user':_0x15dba5,'language':_0x551520});}catch(_0x2814a5){console[_0x1da005(0x1fc)](_0x2814a5);}}),router['post'](a0_0x4b8a75(0x1d6),auth,async(_0xa779f4,_0x49d77d)=>{const _0x1f4d9b=a0_0x4b8a75;try{const {name:_0x52b784,secondary_unit:_0x4db72e,products:_0x2273bc}=_0xa779f4[_0x1f4d9b(0x237)],_0x4901b1=new units({'name':_0x52b784,'secondary_unit':_0x4db72e,'products':_0x2273bc}),_0x17e83a=await units[_0x1f4d9b(0x1f3)]({'name':_0x52b784});_0x17e83a?_0xa779f4[_0x1f4d9b(0x246)](_0x1f4d9b(0x20a),_0x52b784+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0xa779f4[_0x1f4d9b(0x246)](_0x1f4d9b(0x24a),_0x52b784+_0x1f4d9b(0x283));const _0x5aee22=await _0x4901b1[_0x1f4d9b(0x1da)]();_0x49d77d[_0x1f4d9b(0x1f9)](_0x1f4d9b(0x1db));}catch(_0x3d700e){console['log'](_0x3d700e);}}),router[a0_0x4b8a75(0x241)]('/units/:id',auth,async(_0x2782a6,_0x3ff2e3)=>{const _0x43acbb=a0_0x4b8a75;try{const {username:_0x86710b,email:_0x4c8aff,role:_0x342351}=_0x2782a6[_0x43acbb(0x23f)],_0x2ef0a4=_0x2782a6['user'],_0x499a71=await profile[_0x43acbb(0x1f3)]({'email':_0x2ef0a4['email']}),_0x32f201=await master_shop[_0x43acbb(0x28a)]();console[_0x43acbb(0x1fc)](_0x43acbb(0x253),_0x32f201);const _0x5edc45=_0x2782a6[_0x43acbb(0x292)]['id'],_0x274a8e=await units[_0x43acbb(0x251)](_0x5edc45);if(_0x32f201[0x0][_0x43acbb(0x26c)]=='English\x20(US)')var _0x400e02=users[_0x43acbb(0x243)];else{if(_0x32f201[0x0][_0x43acbb(0x26c)]=='Hindi')var _0x400e02=users[_0x43acbb(0x21d)];else{if(_0x32f201[0x0][_0x43acbb(0x26c)]==_0x43acbb(0x288))var _0x400e02=users[_0x43acbb(0x288)];else{if(_0x32f201[0x0]['language']==_0x43acbb(0x244))var _0x400e02=users['Spanish'];else{if(_0x32f201[0x0]['language']==_0x43acbb(0x1e8))var _0x400e02=users['French'];else{if(_0x32f201[0x0][_0x43acbb(0x26c)]=='Portuguese\x20(BR)')var _0x400e02=users[_0x43acbb(0x1f5)];else{if(_0x32f201[0x0][_0x43acbb(0x26c)]==_0x43acbb(0x222))var _0x400e02=users[_0x43acbb(0x222)];else{if(_0x32f201[0x0][_0x43acbb(0x26c)]==_0x43acbb(0x21f))var _0x400e02=users[_0x43acbb(0x20b)];}}}}}}}_0x3ff2e3[_0x43acbb(0x279)](_0x43acbb(0x1e0),{'success':_0x2782a6[_0x43acbb(0x246)](_0x43acbb(0x24a)),'errors':_0x2782a6['flash'](_0x43acbb(0x20a)),'role':_0x2ef0a4,'profile':_0x499a71,'master_shop':_0x32f201,'user':_0x274a8e,'language':_0x400e02});}catch(_0x3e3069){console[_0x43acbb(0x1fc)](_0x3e3069);}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x223),auth,async(_0x115d05,_0x44d286)=>{const _0x35bf42=a0_0x4b8a75;try{const _0x5c654b=_0x115d05[_0x35bf42(0x292)]['id'],_0x9fbb4a=await units[_0x35bf42(0x1e1)](_0x5c654b,_0x115d05[_0x35bf42(0x237)]);_0x115d05[_0x35bf42(0x246)](_0x35bf42(0x24a),_0x35bf42(0x273)),_0x44d286[_0x35bf42(0x1f9)]('/products/units');}catch(_0xedac04){console['log'](_0xedac04);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x255),auth,async(_0x2e5901,_0x2ab1dc)=>{const _0x3a579e=a0_0x4b8a75;try{const _0x561511=_0x2e5901[_0x3a579e(0x292)]['id'],_0xe55e9=await units[_0x3a579e(0x203)](_0x561511);_0x2e5901[_0x3a579e(0x246)](_0x3a579e(0x24a),_0x3a579e(0x1d9)),_0x2ab1dc[_0x3a579e(0x1f9)](_0x3a579e(0x1db));}catch(_0x47e77e){console['log'](_0x47e77e);}});const storage=multer['diskStorage']({'destination':(_0x496c0a,_0x2a5354,_0x228497)=>{const _0x43ea00=a0_0x4b8a75;_0x228497(null,_0x43ea00(0x1f1));},'filename':(_0x488db0,_0x54d480,_0x3a8cdd)=>{const _0x5707ef=a0_0x4b8a75;_0x3a8cdd(null,Date['now']()+_0x54d480[_0x5707ef(0x21b)]);}}),upload=multer({'storage':storage});router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x299),auth,async(_0x2104f4,_0x40d63d)=>{const _0x20f6a5=a0_0x4b8a75;try{const {username:_0x3af0a7,email:_0x29eb58,role:_0x26c95f}=_0x2104f4[_0x20f6a5(0x23f)],_0x4c4f2d=_0x2104f4[_0x20f6a5(0x23f)],_0x557002=await profile[_0x20f6a5(0x1f3)]({'email':_0x4c4f2d[_0x20f6a5(0x1ff)]}),_0x18445c={'year':_0x20f6a5(0x297),'month':_0x20f6a5(0x24f),'day':_0x20f6a5(0x297)},_0x436894=await master_shop['find']();console[_0x20f6a5(0x1fc)](_0x20f6a5(0x22b),_0x436894);const _0x4a754b=await product[_0x20f6a5(0x28a)]();console[_0x20f6a5(0x1fc)]('Products\x20find_data',_0x4a754b);const _0x3141fc=await warehouse[_0x20f6a5(0x20d)]([{'$unwind':_0x20f6a5(0x234)},{'$lookup':{'from':_0x20f6a5(0x259),'localField':_0x20f6a5(0x263),'foreignField':'name','as':_0x20f6a5(0x1de)}},{'$unwind':'$product_docs'},{'$project':{'product_name':'$product_details.product_name','product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x20f6a5(0x25d),'product_stock':{'$sum':_0x20f6a5(0x226)}}}]);console[_0x20f6a5(0x1fc)](_0x20f6a5(0x1fb),_0x3141fc),_0x3141fc[_0x20f6a5(0x1ed)](_0x1eed89=>{const _0x37307f=_0x20f6a5,_0x29f4cf=_0x4a754b[_0x37307f(0x240)](_0x37a367=>{const _0x28e46b=_0x37307f;_0x37a367[_0x28e46b(0x25a)]==_0x1eed89[_0x28e46b(0x264)]&&(_0x37a367['stock']=parseInt(_0x37a367[_0x28e46b(0x1dd)])+parseInt(_0x1eed89[_0x28e46b(0x229)]));});}),console['log'](_0x20f6a5(0x22e),_0x4a754b);if(_0x436894[0x0][_0x20f6a5(0x26c)]=='English\x20(US)')var _0x34d21b=users[_0x20f6a5(0x243)];else{if(_0x436894[0x0][_0x20f6a5(0x26c)]=='Hindi')var _0x34d21b=users[_0x20f6a5(0x21d)];else{if(_0x436894[0x0][_0x20f6a5(0x26c)]==_0x20f6a5(0x288))var _0x34d21b=users[_0x20f6a5(0x288)];else{if(_0x436894[0x0][_0x20f6a5(0x26c)]==_0x20f6a5(0x244))var _0x34d21b=users['Spanish'];else{if(_0x436894[0x0]['language']==_0x20f6a5(0x1e8))var _0x34d21b=users[_0x20f6a5(0x1e8)];else{if(_0x436894[0x0]['language']==_0x20f6a5(0x286))var _0x34d21b=users['Portuguese'];else{if(_0x436894[0x0]['language']==_0x20f6a5(0x222))var _0x34d21b=users[_0x20f6a5(0x222)];else{if(_0x436894[0x0][_0x20f6a5(0x26c)]==_0x20f6a5(0x21f))var _0x34d21b=users[_0x20f6a5(0x20b)];}}}}}}}_0x40d63d[_0x20f6a5(0x279)]('products',{'success':_0x2104f4['flash']('success'),'errors':_0x2104f4['flash'](_0x20f6a5(0x20a)),'alldata':_0x4a754b,'profile':_0x557002,'master_shop':_0x436894,'role':_0x4c4f2d,'product_stock':_0x3141fc,'language':_0x34d21b});}catch(_0x4b4c68){console[_0x20f6a5(0x1fc)](_0x4b4c68);}}),router['get']('/view/add_products',auth,async(_0x53adc4,_0x5e2a17)=>{const _0x29f911=a0_0x4b8a75;try{const {username:_0x5dd2bd,email:_0x163e36,role:_0x3581ec}=_0x53adc4[_0x29f911(0x23f)],_0x3f0f7c=_0x53adc4[_0x29f911(0x23f)],_0x1f66b5=await profile['findOne']({'email':_0x3f0f7c[_0x29f911(0x1ff)]}),_0x47e711=await master_shop[_0x29f911(0x28a)]();console['log'](_0x29f911(0x253),_0x47e711);const _0x5d6849=await categories['find']({}),_0x29d852=await brands[_0x29f911(0x28a)]({}),_0x33d51d=await units[_0x29f911(0x28a)]({}),_0xb24bbf=await warehouse[_0x29f911(0x28a)]({'status':'Enabled'});if(_0x47e711[0x0][_0x29f911(0x26c)]==_0x29f911(0x26b))var _0xb1ba2a=users['English'];else{if(_0x47e711[0x0][_0x29f911(0x26c)]=='Hindi')var _0xb1ba2a=users[_0x29f911(0x21d)];else{if(_0x47e711[0x0]['language']=='German')var _0xb1ba2a=users[_0x29f911(0x288)];else{if(_0x47e711[0x0][_0x29f911(0x26c)]==_0x29f911(0x244))var _0xb1ba2a=users[_0x29f911(0x244)];else{if(_0x47e711[0x0][_0x29f911(0x26c)]==_0x29f911(0x1e8))var _0xb1ba2a=users[_0x29f911(0x1e8)];else{if(_0x47e711[0x0][_0x29f911(0x26c)]=='Portuguese\x20(BR)')var _0xb1ba2a=users[_0x29f911(0x1f5)];else{if(_0x47e711[0x0][_0x29f911(0x26c)]==_0x29f911(0x222))var _0xb1ba2a=users[_0x29f911(0x222)];else{if(_0x47e711[0x0]['language']=='Arabic\x20(ae)')var _0xb1ba2a=users[_0x29f911(0x20b)];}}}}}}}_0x5e2a17[_0x29f911(0x279)](_0x29f911(0x266),{'success':_0x53adc4[_0x29f911(0x246)](_0x29f911(0x24a)),'errors':_0x53adc4['flash'](_0x29f911(0x20a)),'role':_0x3f0f7c,'profile':_0x1f66b5,'categories':_0x5d6849,'brands':_0x29d852,'master_shop':_0x47e711,'units':_0x33d51d,'language':_0xb1ba2a,'find_data':_0xb24bbf});}catch(_0x5f3e75){console['log'](_0x5f3e75);}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x25c),auth,upload[a0_0x4b8a75(0x27e)](a0_0x4b8a75(0x261)),async(_0x3fbf23,_0x4fbe74)=>{const _0x145326=a0_0x4b8a75;try{const {name:_0x14f841,category:_0x400a09,brand:_0x3003a1,unit:_0x4b386d,alertquantity:_0x556cd0,stock:_0x461be1,product_code:_0x2d6d57,warehouse:_0x4c1dbe,primary_ItemCode:_0x1067eb,second_ItemCode:_0x52999f,second_unit:_0x281575,maxPerUnit:_0x26621a,MaxPerProduct:_0x524daf}=_0x3fbf23[_0x145326(0x237)],_0x52fd46=_0x3fbf23[_0x145326(0x1df)]?.['filename']||_0x145326(0x1f6),_0x181690=new product({'image':_0x52fd46,'name':_0x14f841,'category':_0x400a09,'brand':_0x3003a1,'unit':_0x4b386d,'alertquantity':_0x556cd0,'stock':_0x461be1,'product_code':_0x2d6d57,'warehouse':_0x4c1dbe,'primary_code':_0x1067eb,'secondary_code':_0x52999f,'second_unit':_0x281575,'maxStocks':_0x524daf,'maxProdPerUnit':_0x26621a}),_0x49cb14=await _0x181690['save'](),_0x349648=await categories[_0x145326(0x1f3)]({'name':_0x400a09});_0x349648[_0x145326(0x259)]=parseInt(_0x349648[_0x145326(0x259)])+0x1,await _0x349648['save']();const _0x19f644=await brands['findOne']({'name':_0x3003a1});_0x19f644[_0x145326(0x259)]=parseInt(_0x19f644['products'])+0x1,await _0x19f644['save']();const _0xa03f91=await units['findOne']({'name':_0x4b386d});_0xa03f91['products']=parseInt(_0xa03f91[_0x145326(0x259)])+0x1,await _0xa03f91[_0x145326(0x1da)](),_0x3fbf23[_0x145326(0x246)](_0x145326(0x24a),'product\x20add\x20successfully'),_0x4fbe74[_0x145326(0x1f9)]('/products/view');}catch(_0x2435f1){console['log'](_0x2435f1);}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x26e),auth,async(_0x52cb35,_0x7f041d)=>{const _0x458cd6=a0_0x4b8a75;try{const {username:_0x9cc6b5,email:_0x3b2f81,role:_0x1e98bc}=_0x52cb35[_0x458cd6(0x23f)],_0x3b143a=_0x52cb35['user'],_0x41e3ee=await profile['findOne']({'email':_0x3b143a[_0x458cd6(0x1ff)]}),_0x4c9f2c=await master_shop[_0x458cd6(0x28a)]();console[_0x458cd6(0x1fc)](_0x458cd6(0x275),_0x4c9f2c);const _0x547df3=_0x52cb35[_0x458cd6(0x292)]['id'],_0x3a98e9=await product[_0x458cd6(0x251)](_0x547df3),_0x170b2a=await categories['find']({}),_0x283b6e=await brands['find']({}),_0x154e66=await units['find']({}),_0x57c1d1=await warehouse[_0x458cd6(0x28a)]({'status':'Enabled'}),_0x1f94e4=await units[_0x458cd6(0x20d)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x458cd6(0x1e9)}}}]);if(_0x4c9f2c[0x0]['language']==_0x458cd6(0x26b))var _0x25294b=users['English'];else{if(_0x4c9f2c[0x0][_0x458cd6(0x26c)]=='Hindi')var _0x25294b=users[_0x458cd6(0x21d)];else{if(_0x4c9f2c[0x0][_0x458cd6(0x26c)]==_0x458cd6(0x288))var _0x25294b=users[_0x458cd6(0x288)];else{if(_0x4c9f2c[0x0]['language']==_0x458cd6(0x244))var _0x25294b=users[_0x458cd6(0x244)];else{if(_0x4c9f2c[0x0][_0x458cd6(0x26c)]==_0x458cd6(0x1e8))var _0x25294b=users[_0x458cd6(0x1e8)];else{if(_0x4c9f2c[0x0][_0x458cd6(0x26c)]==_0x458cd6(0x286))var _0x25294b=users[_0x458cd6(0x1f5)];else{if(_0x4c9f2c[0x0][_0x458cd6(0x26c)]==_0x458cd6(0x222))var _0x25294b=users[_0x458cd6(0x222)];else{if(_0x4c9f2c[0x0]['language']==_0x458cd6(0x21f))var _0x25294b=users[_0x458cd6(0x20b)];}}}}}}}_0x7f041d[_0x458cd6(0x279)](_0x458cd6(0x258),{'success':_0x52cb35['flash'](_0x458cd6(0x24a)),'errors':_0x52cb35[_0x458cd6(0x246)]('errors'),'role':_0x3b143a,'profile':_0x41e3ee,'alldata':_0x3a98e9,'categories':_0x170b2a,'brands':_0x283b6e,'master_shop':_0x4c9f2c,'units':_0x154e66,'secondunit':_0x1f94e4,'find_data':_0x57c1d1,'language':_0x25294b});}catch(_0x540ea9){console[_0x458cd6(0x1fc)](_0x540ea9);}}),router['post']('/view/:id',auth,upload['single']('image'),async(_0x42c7fc,_0x236228)=>{const _0x1ee455=a0_0x4b8a75;try{console[_0x1ee455(0x1fc)](_0x1ee455(0x20f));const _0x54e15d=_0x42c7fc[_0x1ee455(0x292)]['id'],_0x1d6017=await product[_0x1ee455(0x251)](_0x54e15d),{image:_0x40a25b,name:_0x374a66,category:_0x20fc33,brand:_0x5490a6,sku:_0x342bd0,unit:_0x3779da,alertquantity:_0x5cbfea,product_code:_0x1cef2a,warehouse:_0x5b6b60,primary_ItemCode:_0x8c01bb,second_ItemCode:_0x5ec4f,second_unit:_0x32cfa5,maxPerUnit:_0x22bea2,MaxPerProduct:_0x5e1a63,prod_catdata:_0x191c6c}=_0x42c7fc['body'];_0x42c7fc[_0x1ee455(0x1df)]&&(_0x1d6017[_0x1ee455(0x261)]=_0x42c7fc[_0x1ee455(0x1df)][_0x1ee455(0x27a)]);_0x1d6017[_0x1ee455(0x25a)]=_0x374a66,_0x1d6017['category']=_0x20fc33,_0x1d6017[_0x1ee455(0x220)]=_0x5490a6,_0x1d6017[_0x1ee455(0x245)]=_0x342bd0,_0x1d6017[_0x1ee455(0x204)]=_0x3779da,_0x1d6017[_0x1ee455(0x285)]=_0x5cbfea,_0x1d6017[_0x1ee455(0x289)]=_0x1cef2a,_0x1d6017[_0x1ee455(0x28b)]=_0x5b6b60,_0x1d6017['primary_code']=_0x8c01bb,_0x1d6017[_0x1ee455(0x25f)]=_0x5ec4f,_0x1d6017[_0x1ee455(0x200)]=_0x32cfa5,_0x1d6017[_0x1ee455(0x1d7)]=_0x5e1a63,_0x1d6017['maxProdPerUnit']=_0x22bea2,_0x1d6017[_0x1ee455(0x1e4)]=_0x191c6c;const _0x7a5d6d=await _0x1d6017[_0x1ee455(0x1da)]();console['log']('product\x20edit',_0x1d6017),_0x42c7fc[_0x1ee455(0x246)](_0x1ee455(0x24a),_0x1ee455(0x24b)),_0x236228[_0x1ee455(0x1f9)]('/products/view');}catch(_0x2ff30e){console[_0x1ee455(0x1fc)](_0x2ff30e);}}),router['get']('/barcode/:id',auth,async(_0x502a59,_0x21da59)=>{const _0x38edfa=a0_0x4b8a75;try{const {username:_0x19f2d1,email:_0x38da9c,role:_0x17575b}=_0x502a59[_0x38edfa(0x23f)],_0x35a3b7=_0x502a59[_0x38edfa(0x23f)],_0x29db1e=await profile['findOne']({'email':_0x35a3b7['email']}),_0x2382ea=await master_shop[_0x38edfa(0x28a)]();console[_0x38edfa(0x1fc)](_0x38edfa(0x271),_0x2382ea);const _0x25da4e=_0x502a59[_0x38edfa(0x292)]['id'],_0x231122=await product[_0x38edfa(0x251)](_0x25da4e);console[_0x38edfa(0x1fc)](_0x38edfa(0x287),_0x231122);if(_0x2382ea[0x0][_0x38edfa(0x26c)]=='English\x20(US)')var _0x30efdb=users[_0x38edfa(0x243)];else{if(_0x2382ea[0x0]['language']=='Hindi')var _0x30efdb=users[_0x38edfa(0x21d)];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]==_0x38edfa(0x288))var _0x30efdb=users[_0x38edfa(0x288)];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]==_0x38edfa(0x244))var _0x30efdb=users['Spanish'];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]==_0x38edfa(0x1e8))var _0x30efdb=users[_0x38edfa(0x1e8)];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]==_0x38edfa(0x286))var _0x30efdb=users['Portuguese'];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]==_0x38edfa(0x222))var _0x30efdb=users[_0x38edfa(0x222)];else{if(_0x2382ea[0x0][_0x38edfa(0x26c)]=='Arabic\x20(ae)')var _0x30efdb=users[_0x38edfa(0x20b)];}}}}}}}_0x21da59[_0x38edfa(0x279)](_0x38edfa(0x208),{'success':_0x502a59['flash'](_0x38edfa(0x24a)),'errors':_0x502a59['flash'](_0x38edfa(0x20a)),'role':_0x35a3b7,'profile':_0x29db1e,'alldata':_0x231122,'master_shop':_0x2382ea,'language':_0x30efdb});}catch(_0x1007d1){console[_0x38edfa(0x1fc)](_0x1007d1);}}),router[a0_0x4b8a75(0x241)]('/products_export_migrate_file',auth,async(_0x321b1e,_0x34f583)=>{const _0x8aad74=a0_0x4b8a75;try{const _0x5f487c=new excelJS[(_0x8aad74(0x201))](),_0x28a319=_0x5f487c[_0x8aad74(0x225)]('Products');return _0x28a319[_0x8aad74(0x21e)]=[{'header':_0x8aad74(0x22a),'key':'PName','width':0xa},{'header':_0x8aad74(0x236),'key':_0x8aad74(0x21a),'width':0xa},{'header':_0x8aad74(0x1fe),'key':_0x8aad74(0x26f),'width':0xa},{'header':_0x8aad74(0x206),'key':'PSecondaryUnits','width':0xa},{'header':_0x8aad74(0x232),'key':_0x8aad74(0x1f4),'width':0xa},{'header':_0x8aad74(0x1ea),'key':_0x8aad74(0x20c),'width':0xa},{'header':_0x8aad74(0x1ee),'key':_0x8aad74(0x20c),'width':0xa},{'header':_0x8aad74(0x284),'key':'ProductCode','width':0xa},{'header':_0x8aad74(0x211),'key':_0x8aad74(0x282),'width':0xa},{'header':_0x8aad74(0x296),'key':_0x8aad74(0x23a),'width':0xa},{'header':'Maximum_Stocks','key':_0x8aad74(0x23a),'width':0xa},{'header':_0x8aad74(0x212),'key':'Prod_Cat','width':0xa}],_0x34f583[_0x8aad74(0x27b)](_0x8aad74(0x25e),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x34f583['setHeader']('Content-Disposition',_0x8aad74(0x1dc)),_0x5f487c[_0x8aad74(0x221)][_0x8aad74(0x28f)](_0x34f583)[_0x8aad74(0x252)](()=>{const _0x2cf2cd=_0x8aad74;_0x34f583[_0x2cf2cd(0x27c)](0xc8);});}catch(_0x192a67){_0x34f583[_0x8aad74(0x27c)](0x190)[_0x8aad74(0x22c)](_0x192a67);}});const storage1=multer[a0_0x4b8a75(0x280)]({'destination':(_0x39b34e,_0x3f9366,_0x335204)=>{const _0x46c9df=a0_0x4b8a75;_0x335204(null,_0x46c9df(0x281));},'filename':(_0x494404,_0x48d10e,_0x4719b4)=>{const _0x1c9adf=a0_0x4b8a75;_0x4719b4(null,Date['now']()+_0x48d10e[_0x1c9adf(0x21b)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x272),auth,uploadMigrate['single']('migrate_product_fule'),async(_0xa03746,_0x2dc556)=>{const _0x84ffda=a0_0x4b8a75,_0x3e2972=_0xa03746[_0x84ffda(0x1df)]['filename'],_0x27047b=await xlsx[_0x84ffda(0x270)](_0x84ffda(0x247)+_0x3e2972);let _0x70e028=_0x27047b[_0x84ffda(0x28d)],_0x56c827=xlsx[_0x84ffda(0x224)][_0x84ffda(0x295)](_0x27047b['Sheets'][_0x70e028[0x0]]);for(const _0x277acd of _0x56c827){const _0x17a5d4=_0x277acd[_0x84ffda(0x22a)],_0x43e4ee=_0x277acd[_0x84ffda(0x236)],_0x2ea4ff=_0x277acd['Units'],_0x19c1b3=_0x277acd[_0x84ffda(0x206)],_0x50e359=_0x277acd[_0x84ffda(0x284)],_0x52116d=_0x277acd[_0x84ffda(0x211)],_0x8eba9b=_0x277acd['Alert_QTY'],_0x15fa82=_0x277acd[_0x84ffda(0x1ea)],_0x5dfb83=_0x277acd['Secondary_Code'],_0x125944=_0x277acd[_0x84ffda(0x278)],_0x2b0299=_0x277acd[_0x84ffda(0x232)],_0x581034=_0x277acd[_0x84ffda(0x212)];try{let _0x163a55=await categories[_0x84ffda(0x1f3)]({'name':_0x52116d});if(!_0x163a55){const _0x490d4f=new categories({'name':_0x52116d,'products':'0'});_0x163a55=await _0x490d4f['save']();}let _0x48af2e=await brands[_0x84ffda(0x1f3)]({'name':_0x43e4ee});if(!_0x48af2e){const _0x4bfbd3=new brands({'name':_0x43e4ee,'products':'0'});_0x48af2e=await _0x4bfbd3[_0x84ffda(0x1da)]();}let _0x26f9b6=await units[_0x84ffda(0x1f3)]({'name':_0x2ea4ff,'secondary_unit':_0x19c1b3});if(!_0x26f9b6){const _0x497112=new units({'name':_0x2ea4ff,'secondary_unit':_0x19c1b3,'products':'0'});_0x26f9b6=await _0x497112[_0x84ffda(0x1da)]();}const _0x5921db=await product[_0x84ffda(0x28a)]({'name':_0x17a5d4,'category':_0x163a55['name'],'brand':_0x48af2e['name'],'secondary_unit':_0x26f9b6[_0x84ffda(0x200)],'product_code':_0x50e359});console[_0x84ffda(0x1fc)](_0x5921db[_0x84ffda(0x25b)]+_0x84ffda(0x24c)+_0x163a55[_0x84ffda(0x25a)]+_0x84ffda(0x24c)+_0x48af2e[_0x84ffda(0x25a)]+_0x84ffda(0x24c)+_0x26f9b6[_0x84ffda(0x200)]+_0x84ffda(0x24c)+_0x50e359+_0x84ffda(0x24c)+_0x17a5d4);if(_0x5921db[_0x84ffda(0x25b)]===0x0){const _0xc06a73=new product({'image':_0x84ffda(0x1f6),'name':_0x17a5d4,'category':_0x163a55['name'],'brand':_0x48af2e[_0x84ffda(0x25a)],'unit':_0x26f9b6[_0x84ffda(0x25a)],'alertquantity':_0x8eba9b,'product_code':_0x50e359,'secondary_unit':_0x26f9b6['secondary_unit'],'primary_code':_0x15fa82,'secondary_code':_0x5dfb83,'maxStocks':_0x125944,'maxProdPerUnit':_0x2b0299,'product_category':_0x581034}),_0x3ae03c=await _0xc06a73[_0x84ffda(0x1da)]();_0x163a55[_0x84ffda(0x259)]=parseInt(_0x163a55[_0x84ffda(0x259)])+0x1,await _0x163a55[_0x84ffda(0x1da)](),_0x48af2e[_0x84ffda(0x259)]=parseInt(_0x48af2e[_0x84ffda(0x259)])+0x1,await _0x48af2e[_0x84ffda(0x1da)](),_0x26f9b6[_0x84ffda(0x259)]=parseInt(_0x26f9b6[_0x84ffda(0x259)])+0x1,await _0x26f9b6['save'](),_0xa03746[_0x84ffda(0x246)](_0x84ffda(0x24a),_0x17a5d4+_0x84ffda(0x1fd));}else{console['log'](_0x5921db[0x0]);const _0x159961=_0x5921db[0x0];_0x159961[_0x84ffda(0x1eb)]=_0x163a55[_0x84ffda(0x25a)],_0x159961[_0x84ffda(0x220)]=_0x48af2e[_0x84ffda(0x25a)],_0x159961['unit']=_0x26f9b6[_0x84ffda(0x25a)],_0x159961[_0x84ffda(0x285)]=_0x8eba9b,_0x159961[_0x84ffda(0x289)]=_0x50e359,_0x159961['secondary_unit']=_0x26f9b6[_0x84ffda(0x200)],_0x159961[_0x84ffda(0x276)]=_0x15fa82,_0x159961[_0x84ffda(0x25f)]=_0x5dfb83,_0x159961[_0x84ffda(0x1d7)]=_0x125944,_0x159961[_0x84ffda(0x1e5)]=_0x2b0299,_0x159961[_0x84ffda(0x1e4)]=_0x581034;const _0x214b6d=await _0x159961[_0x84ffda(0x1da)]();_0xa03746[_0x84ffda(0x246)]('success',_0x214b6d[_0x84ffda(0x25a)]+_0x84ffda(0x248));}}catch(_0x3d5d03){_0x2dc556[_0x84ffda(0x27c)](0x1f4)[_0x84ffda(0x260)]({'proderror':_0x3d5d03[_0x84ffda(0x231)],'aproduct':_0x17a5d4});}}_0x2dc556[_0x84ffda(0x1f9)](_0x84ffda(0x216));}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x249),auth,async(_0x49b12a,_0x314a53)=>{const _0x5a7f60=a0_0x4b8a75;try{console[_0x5a7f60(0x1fc)](_0x49b12a['body']);const {data_cateory:_0x282938,datachoose:_0x36b1a8}=_0x49b12a[_0x5a7f60(0x237)];var _0x4ba120;if(_0x36b1a8==_0x5a7f60(0x228))_0x4ba120=await product[_0x5a7f60(0x20d)]([{'$group':{'_id':_0x5a7f60(0x24e)}}]);else{if(_0x36b1a8==_0x5a7f60(0x219))_0x4ba120=await product['aggregate']([{'$match':{'product_category':_0x282938}},{'$group':{'_id':_0x5a7f60(0x1f7)}}]);else _0x36b1a8==_0x5a7f60(0x256)&&(_0x4ba120=await product[_0x5a7f60(0x20d)]([{'$match':{'product_category':_0x282938}},{'$group':{'_id':_0x5a7f60(0x213)}}]));}_0x314a53[_0x5a7f60(0x260)](_0x4ba120);}catch(_0x103822){_0x314a53['json']({'message':_0x103822['message']});}}),router['post'](a0_0x4b8a75(0x1f2),auth,async(_0x5971dc,_0x58fc17)=>{const _0x47e36b=a0_0x4b8a75;try{const {data_choosing:_0x1c6c07,data_selected:_0x3d3cef}=_0x5971dc[_0x47e36b(0x237)];var _0x3050bb;if(_0x1c6c07==_0x47e36b(0x228))_0x3050bb=await product[_0x47e36b(0x20d)]([{'$match':{'product_category':_0x3d3cef}}]);else{if(_0x1c6c07=='brands')_0x3050bb=await product[_0x47e36b(0x20d)]([{'$match':{'brand':_0x3d3cef}}]);else _0x1c6c07==_0x47e36b(0x256)&&(_0x3050bb=await product[_0x47e36b(0x20d)]([{'$match':{'category':_0x3d3cef}}]));}_0x58fc17[_0x47e36b(0x260)](_0x3050bb);}catch(_0x40261b){_0x58fc17[_0x47e36b(0x260)]({'message':_0x40261b['message']});}}),router[a0_0x4b8a75(0x241)](a0_0x4b8a75(0x238),auth,async(_0x45568b,_0x103ef5)=>{const _0x59c058=a0_0x4b8a75,_0x16ebe5=_0x45568b[_0x59c058(0x23f)],_0x2539d0=await profile[_0x59c058(0x1f3)]({'email':_0x16ebe5[_0x59c058(0x1ff)]}),_0x2852e7=await master_shop[_0x59c058(0x28a)](),_0x214237=await product['find']();if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x26b))var _0x2aa38b=users[_0x59c058(0x243)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x21d))var _0x2aa38b=users[_0x59c058(0x21d)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x288))var _0x2aa38b=users[_0x59c058(0x288)];else{if(_0x2852e7[0x0]['language']=='Spanish')var _0x2aa38b=users[_0x59c058(0x244)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x1e8))var _0x2aa38b=users[_0x59c058(0x1e8)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]=='Portuguese\x20(BR)')var _0x2aa38b=users[_0x59c058(0x1f5)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x222))var _0x2aa38b=users[_0x59c058(0x222)];else{if(_0x2852e7[0x0][_0x59c058(0x26c)]==_0x59c058(0x21f))var _0x2aa38b=users[_0x59c058(0x20b)];}}}}}}}_0x103ef5[_0x59c058(0x279)](_0x59c058(0x1fa),{'success':_0x45568b[_0x59c058(0x246)](_0x59c058(0x24a)),'errors':_0x45568b['flash'](_0x59c058(0x20a)),'role':_0x16ebe5,'profile':_0x2539d0,'products':_0x214237,'master_shop':_0x2852e7,'language':_0x2aa38b});}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x27f),auth,async(_0x1b7dd6,_0x928a43)=>{const _0x4bf5db=a0_0x4b8a75,_0x16d1f2=await product[_0x4bf5db(0x28a)]();_0x928a43[_0x4bf5db(0x260)]({'data':_0x16d1f2});}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x215),auth,async(_0x3f0d9e,_0x24d07)=>{const _0x41a5f6=a0_0x4b8a75;try{const {dataProdCat:_0x1595a5,dataProdIdentity:_0x1d1dc8}=_0x3f0d9e[_0x41a5f6(0x237)];var _0x1ff080;switch(_0x1595a5){case'fg':switch(_0x1d1dc8){case _0x41a5f6(0x236):_0x1ff080=await product[_0x41a5f6(0x20d)]([{'$match':{'product_category':_0x41a5f6(0x235)}},{'$group':{'_id':_0x41a5f6(0x1f7)}},{'$project':{'brand':_0x41a5f6(0x23b)}}]);break;case _0x41a5f6(0x211):_0x1ff080=await product[_0x41a5f6(0x20d)]([{'$match':{'product_category':_0x41a5f6(0x235)}},{'$group':{'_id':_0x41a5f6(0x213)}},{'$project':{'category':_0x41a5f6(0x23b)}}]);break;}break;case'rm':switch(_0x1d1dc8){case _0x41a5f6(0x236):_0x1ff080=await product[_0x41a5f6(0x20d)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x41a5f6(0x1f7)}},{'$project':{'brand':'$_id'}}]);break;case _0x41a5f6(0x211):_0x1ff080=await product[_0x41a5f6(0x20d)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x41a5f6(0x213)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x24d07[_0x41a5f6(0x260)](_0x1ff080);}catch(_0x4f0574){_0x24d07['json']({'message':_0x4f0574[_0x41a5f6(0x231)]});}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x290),auth,async(_0x24a307,_0x4e32d7)=>{const _0x7e9e6a=a0_0x4b8a75;try{console[_0x7e9e6a(0x1fc)](_0x24a307['body']);const {prod_cat:_0x2e3a88,identity:_0x101310,valueData:_0x1f072a,typeofbarcode:_0x58bbc0}=_0x24a307[_0x7e9e6a(0x237)];let _0x347fc6;switch(_0x2e3a88){case'fg':if(_0x101310==_0x7e9e6a(0x236))_0x347fc6=await product[_0x7e9e6a(0x20d)]([{'$match':{'product_category':_0x7e9e6a(0x235),'brand':_0x1f072a}}]);else _0x101310==_0x7e9e6a(0x211)&&(_0x347fc6=await product[_0x7e9e6a(0x20d)]([{'$match':{'product_category':_0x7e9e6a(0x235),'category':_0x1f072a}}]));break;case'rm':if(_0x101310=='Brands')_0x347fc6=await product[_0x7e9e6a(0x20d)]([{'$match':{'product_category':_0x7e9e6a(0x210),'brand':_0x1f072a}}]);else _0x101310==_0x7e9e6a(0x211)&&(_0x347fc6=await product[_0x7e9e6a(0x20d)]([{'$match':{'product_category':_0x7e9e6a(0x210),'category':_0x1f072a}}]));break;}const _0x2af24e=_0x34e91d=>_0x34e91d*0x48,_0x51fb08={'width':0x3,'height':0x1},_0x4ea29b=new PDFDocument({'margin':_0x2af24e(0.75),'size':[_0x2af24e(_0x51fb08[_0x7e9e6a(0x262)]),_0x2af24e(_0x51fb08['height'])],'bufferPages':!![]}),_0x29155e=_0x347fc6[_0x7e9e6a(0x25b)];for(let _0x38e981=0x0;_0x38e981<=_0x29155e;_0x38e981++){if(_0x38e981!=_0x29155e){const _0xf214e7=_0x347fc6[_0x38e981][_0x7e9e6a(0x25a)],_0x314350=_0x347fc6[_0x38e981]['primary_code'],_0x387682=_0x347fc6[_0x38e981]['secondary_code'],_0x515308=_0x347fc6[_0x38e981][_0x7e9e6a(0x289)];var _0x4ad478;switch(_0x58bbc0){case'1':_0x4ad478=_0x314350;break;case'2':_0x4ad478=_0x387682;break;case'3':_0x4ad478=_0x515308;break;}const _0x4992fe={'width':0xd2,'height':0x64},_0x39f47f={'width':_0x2af24e(_0x51fb08[_0x7e9e6a(0x262)]),'height':_0x2af24e(_0x51fb08[_0x7e9e6a(0x233)])},_0x5a01f1=new Canvas();JsBarcode(_0x5a01f1,_0x4ad478,{'format':'CODE128','height':_0x4992fe[_0x7e9e6a(0x233)],'displayValue':!![],'text':_0x4ad478});const _0x4933a6=_0x5a01f1[_0x7e9e6a(0x1f8)](),_0x11d6ff=_0x39f47f[_0x7e9e6a(0x262)]/_0x4992fe[_0x7e9e6a(0x262)],_0x3a5eee=_0x39f47f[_0x7e9e6a(0x233)]/_0x4992fe[_0x7e9e6a(0x233)],_0x1f4c24=Math['min'](_0x11d6ff,_0x3a5eee),_0x44dca3=_0x4992fe['width']*_0x1f4c24,_0xc9ed74=_0x4992fe[_0x7e9e6a(0x233)]*_0x1f4c24,_0x1194a4=(_0x39f47f[_0x7e9e6a(0x262)]-_0x44dca3)/0x2,_0x417dd6=(_0x39f47f[_0x7e9e6a(0x233)]-_0xc9ed74)/0x2;_0x4ea29b[_0x7e9e6a(0x261)](_0x4933a6,_0x1194a4,_0x417dd6,{'width':_0x44dca3,'height':_0xc9ed74}),_0x38e981!=_0x29155e&&_0x4ea29b[_0x7e9e6a(0x1e3)]();}}const _0x1ae9d1=[];_0x4ea29b['on'](_0x7e9e6a(0x23d),_0x1ae9d1[_0x7e9e6a(0x294)][_0x7e9e6a(0x1d8)](_0x1ae9d1)),_0x4ea29b['on'](_0x7e9e6a(0x209),()=>{const _0x28795a=_0x7e9e6a,_0x22da85=Buffer[_0x28795a(0x293)](_0x1ae9d1),_0x11745c=_0x22da85[_0x28795a(0x298)](_0x28795a(0x1e2));_0x4e32d7[_0x28795a(0x260)]({'pdfContent':_0x11745c});}),_0x4ea29b['end']();}catch(_0x5d2d91){_0x4e32d7[_0x7e9e6a(0x260)]({'message':_0x5d2d91[_0x7e9e6a(0x231)]});}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x26d),auth,async(_0x44f6b2,_0x54d55d)=>{const _0x1108e4=a0_0x4b8a75;try{console[_0x1108e4(0x1fc)](_0x44f6b2['body']);const {prod_cat:_0x39979a,identity:_0xe872dd,valueData:_0x3c213c}=_0x44f6b2[_0x1108e4(0x237)];let _0x395a8c;switch(_0x39979a){case'fg':if(_0xe872dd=='Brands')_0x395a8c=await product[_0x1108e4(0x20d)]([{'$match':{'product_category':_0x1108e4(0x235),'brand':_0x3c213c}}]);else _0xe872dd==_0x1108e4(0x211)&&(_0x395a8c=await product['aggregate']([{'$match':{'product_category':_0x1108e4(0x235),'category':_0x3c213c}}]));break;case'rm':if(_0xe872dd==_0x1108e4(0x236))_0x395a8c=await product['aggregate']([{'$match':{'product_category':_0x1108e4(0x210),'brand':_0x3c213c}}]);else _0xe872dd=='Category'&&(_0x395a8c=await product[_0x1108e4(0x20d)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x3c213c}}]));break;}_0x54d55d[_0x1108e4(0x260)]({'data':_0x395a8c});}catch(_0x53a89c){_0x54d55d[_0x1108e4(0x260)]({'message':_0x53a89c[_0x1108e4(0x231)]});}}),router[a0_0x4b8a75(0x217)](a0_0x4b8a75(0x23c),auth,async(_0x12b9e6,_0x3e118e)=>{const _0x373c03=a0_0x4b8a75;try{const _0x31457b=_0x12b9e6[_0x373c03(0x292)]['id'],{copies:_0xa174fd,typeofbarcode:_0x4431df}=_0x12b9e6[_0x373c03(0x237)];var _0x1fb42d=await product['findById'](_0x31457b);const _0x3d8b5e=_0x5e0cf0=>_0x5e0cf0*0x48,_0x17f277={'width':0x3,'height':0x1},_0x51670c=new PDFDocument({'margin':_0x3d8b5e(0.75),'size':[_0x3d8b5e(_0x17f277[_0x373c03(0x262)]),_0x3d8b5e(_0x17f277['height'])],'bufferPages':!![]}),_0x5e9353=_0xa174fd,_0x581cc1=_0x1fb42d[_0x373c03(0x25a)],_0x30f876=_0x1fb42d[_0x373c03(0x276)],_0x3b2323=_0x1fb42d[_0x373c03(0x25f)],_0x5efeaa=_0x1fb42d[_0x373c03(0x289)];let _0x61da3d;switch(_0x4431df){case'1':_0x61da3d=_0x30f876;break;case'2':_0x61da3d=_0x3b2323;break;case'3':_0x61da3d=_0x5efeaa;break;}const _0x265d86={'width':0xd2,'height':0x64},_0x12a62f={'width':_0x3d8b5e(_0x17f277[_0x373c03(0x262)]),'height':_0x3d8b5e(_0x17f277[_0x373c03(0x233)])};for(let _0x26fadd=0x1;_0x26fadd<=_0x5e9353;_0x26fadd++){const _0x39795e=new Canvas();JsBarcode(_0x39795e,_0x61da3d,{'format':_0x373c03(0x239),'height':_0x265d86[_0x373c03(0x233)],'displayValue':!![],'text':_0x61da3d});const _0x3419da=_0x39795e['toBuffer'](),_0xb993e9=_0x12a62f['width']/_0x265d86[_0x373c03(0x262)],_0x337205=_0x12a62f[_0x373c03(0x233)]/_0x265d86[_0x373c03(0x233)],_0x5c71f7=Math[_0x373c03(0x1e6)](_0xb993e9,_0x337205),_0x4eae2c=_0x265d86[_0x373c03(0x262)]*_0x5c71f7,_0x423ee3=_0x265d86[_0x373c03(0x233)]*_0x5c71f7,_0xd1a586=(_0x12a62f[_0x373c03(0x262)]-_0x4eae2c)/0x2,_0x3a948c=(_0x12a62f['height']-_0x423ee3)/0x2;_0x51670c['image'](_0x3419da,_0xd1a586,_0x3a948c,{'width':_0x4eae2c,'height':_0x423ee3}),_0x26fadd!=_0x5e9353&&_0x51670c['addPage']();}const _0x5f2fe5=[];_0x51670c['on']('data',_0x5f2fe5[_0x373c03(0x294)][_0x373c03(0x1d8)](_0x5f2fe5)),_0x51670c['on'](_0x373c03(0x209),()=>{const _0x17df6e=_0x373c03,_0x26c3dd=Buffer[_0x17df6e(0x293)](_0x5f2fe5),_0x58b75b=_0x26c3dd[_0x17df6e(0x298)](_0x17df6e(0x1e2));_0x3e118e[_0x17df6e(0x260)]({'pdfContent':_0x58b75b});}),_0x51670c[_0x373c03(0x209)]();}catch(_0x1c1f9e){_0x3e118e['json']({'message':_0x1c1f9e[_0x373c03(0x231)]});}}),module[a0_0x4b8a75(0x268)]=router;