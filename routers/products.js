const a0_0x8c209=a0_0x4bc4;(function(_0x5236d4,_0x43dac4){const _0x5ee581=a0_0x4bc4,_0xa40ef6=_0x5236d4();while(!![]){try{const _0x1fda12=-parseInt(_0x5ee581(0x1c3))/0x1+parseInt(_0x5ee581(0x1a4))/0x2*(parseInt(_0x5ee581(0x1ef))/0x3)+-parseInt(_0x5ee581(0x1c8))/0x4*(-parseInt(_0x5ee581(0x1c9))/0x5)+-parseInt(_0x5ee581(0x18a))/0x6+-parseInt(_0x5ee581(0x1ce))/0x7*(parseInt(_0x5ee581(0x1be))/0x8)+parseInt(_0x5ee581(0x21a))/0x9+-parseInt(_0x5ee581(0x1a6))/0xa*(-parseInt(_0x5ee581(0x213))/0xb);if(_0x1fda12===_0x43dac4)break;else _0xa40ef6['push'](_0xa40ef6['shift']());}catch(_0x4d2224){_0xa40ef6['push'](_0xa40ef6['shift']());}}}(a0_0x705a,0x3086f));const express=require('express'),res=require('express/lib/response'),app=express(),router=express[a0_0x8c209(0x1ed)](),multer=require(a0_0x8c209(0x18c)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x8c209(0x1fe)),auth=require(a0_0x8c209(0x1f3)),users=require(a0_0x8c209(0x1a2)),excelJS=require(a0_0x8c209(0x191)),xlsx=require(a0_0x8c209(0x1e5)),JsBarcode=require(a0_0x8c209(0x189)),{Canvas}=require(a0_0x8c209(0x212)),PDFDocument=require('pdfkit-table');router['get'](a0_0x8c209(0x1f5),auth,async(_0x180027,_0x50fb85)=>{const _0x35172b=a0_0x8c209;try{const {username:_0x10c22a,email:_0x270594,role:_0x57abe4}=_0x180027[_0x35172b(0x1b2)],_0x370b05=_0x180027[_0x35172b(0x1b2)],_0xbb6188=await profile[_0x35172b(0x215)]({'email':_0x370b05[_0x35172b(0x1ea)]}),_0x5777f6=await master_shop[_0x35172b(0x1d5)]();console[_0x35172b(0x1f4)]('master',_0x5777f6);const _0x325d43=await categories[_0x35172b(0x1d5)]();if(_0x5777f6[0x0][_0x35172b(0x168)]==_0x35172b(0x1b8))var _0x118c55=users[_0x35172b(0x1d1)];else{if(_0x5777f6[0x0][_0x35172b(0x168)]==_0x35172b(0x1d8))var _0x118c55=users[_0x35172b(0x1d8)];else{if(_0x5777f6[0x0]['language']=='German')var _0x118c55=users[_0x35172b(0x1d3)];else{if(_0x5777f6[0x0][_0x35172b(0x168)]==_0x35172b(0x179))var _0x118c55=users[_0x35172b(0x179)];else{if(_0x5777f6[0x0]['language']==_0x35172b(0x1fb))var _0x118c55=users['French'];else{if(_0x5777f6[0x0][_0x35172b(0x168)]=='Portuguese\x20(BR)')var _0x118c55=users[_0x35172b(0x1ff)];else{if(_0x5777f6[0x0]['language']=='Chinese')var _0x118c55=users[_0x35172b(0x1e6)];else{if(_0x5777f6[0x0][_0x35172b(0x168)]==_0x35172b(0x1f6))var _0x118c55=users[_0x35172b(0x1ac)];}}}}}}}_0x50fb85['render'](_0x35172b(0x1d7),{'success':_0x180027[_0x35172b(0x1cf)](_0x35172b(0x1a7)),'errors':_0x180027['flash'](_0x35172b(0x19e)),'role':_0x370b05,'profile':_0xbb6188,'user':_0x325d43,'master_shop':_0x5777f6,'language':_0x118c55});}catch(_0x43b449){console[_0x35172b(0x1f4)](_0x43b449);}}),router['post'](a0_0x8c209(0x1f5),auth,async(_0x1c75f9,_0x30fa44)=>{const _0x361a83=a0_0x8c209;try{const {name:_0x22f99f,products:_0x3ad227}=_0x1c75f9[_0x361a83(0x1ae)],_0x28f64d=new categories({'name':_0x22f99f,'products':_0x3ad227}),_0x5f3e65=await categories[_0x361a83(0x215)]({'name':_0x22f99f});_0x5f3e65?_0x1c75f9['flash'](_0x361a83(0x19e),_0x22f99f+_0x361a83(0x16a)):_0x1c75f9['flash'](_0x361a83(0x1a7),_0x22f99f+_0x361a83(0x1c1));const _0x33f9d0=await _0x28f64d['save']();_0x30fa44[_0x361a83(0x182)]('/products/categories');}catch(_0x48c8e2){console[_0x361a83(0x1f4)](_0x48c8e2);}}),router['get']('/categories/:id',auth,async(_0x11c511,_0x30f095)=>{const _0x198218=a0_0x8c209;try{const {username:_0x5d39e5,email:_0x1cb415,role:_0x3a2637}=_0x11c511['user'],_0x36823b=_0x11c511[_0x198218(0x1b2)],_0x59fa9d=await profile[_0x198218(0x215)]({'email':_0x36823b[_0x198218(0x1ea)]}),_0x27b191=await master_shop[_0x198218(0x1d5)]();console[_0x198218(0x1f4)](_0x198218(0x1b3),_0x27b191);const _0x11d4aa=_0x11c511[_0x198218(0x1e7)]['id'];console[_0x198218(0x1f4)](_0x11d4aa);const _0x1bd6cb=await categories['findById'](_0x11d4aa);if(_0x27b191[0x0][_0x198218(0x168)]=='English\x20(US)')var _0x263c25=users[_0x198218(0x1d1)];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x1d8))var _0x263c25=users[_0x198218(0x1d8)];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x1d3))var _0x263c25=users[_0x198218(0x1d3)];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x179))var _0x263c25=users[_0x198218(0x179)];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x1fb))var _0x263c25=users[_0x198218(0x1fb)];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x19f))var _0x263c25=users['Portuguese'];else{if(_0x27b191[0x0][_0x198218(0x168)]==_0x198218(0x1e6))var _0x263c25=users[_0x198218(0x1e6)];else{if(_0x27b191[0x0]['language']==_0x198218(0x1f6))var _0x263c25=users[_0x198218(0x1ac)];}}}}}}}_0x30f095[_0x198218(0x1b4)]('categories',{'success':_0x11c511[_0x198218(0x1cf)]('success'),'errors':_0x11c511[_0x198218(0x1cf)](_0x198218(0x19e)),'role':_0x36823b,'profile':_0x59fa9d,'master_shop':_0x27b191,'user':_0x1bd6cb,'language':_0x263c25});}catch(_0x12d8fe){console['log'](_0x12d8fe);}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x217),auth,async(_0x23167d,_0x2a4d51)=>{const _0x190a9e=a0_0x8c209;try{const _0x476ae4=_0x23167d['params']['id'],_0x25c1ae=await categories[_0x190a9e(0x18e)](_0x476ae4,_0x23167d['body']);_0x23167d[_0x190a9e(0x1cf)](_0x190a9e(0x1a7),''+users[_0x190a9e(0x169)]),_0x2a4d51[_0x190a9e(0x182)](_0x190a9e(0x1ad));}catch(_0x50c65d){console[_0x190a9e(0x1f4)](_0x50c65d);}}),router['get'](a0_0x8c209(0x16d),auth,async(_0x3e1acb,_0x5be00e)=>{const _0x85fa4c=a0_0x8c209;try{const _0x441b69=_0x3e1acb['params']['id'],_0x3451b9=await categories['findByIdAndDelete'](_0x441b69);_0x3e1acb[_0x85fa4c(0x1cf)](_0x85fa4c(0x1a7),'categories\x20data\x20delete\x20successfully'),_0x5be00e[_0x85fa4c(0x182)]('/products/categories');}catch(_0x4c659d){console[_0x85fa4c(0x1f4)](_0x4c659d);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x21f),auth,async(_0xfff0c,_0x5da68)=>{const _0x1fd78b=a0_0x8c209;try{const {username:_0x10d47f,email:_0x18b5fb,role:_0x26987b}=_0xfff0c[_0x1fd78b(0x1b2)],_0x44c093=_0xfff0c[_0x1fd78b(0x1b2)],_0x5b264e=await profile[_0x1fd78b(0x215)]({'email':_0x44c093['email']}),_0x531c66=await master_shop['find']();console[_0x1fd78b(0x1f4)]('master',_0x531c66);const _0x344533=await brands[_0x1fd78b(0x1d5)]();if(_0x531c66[0x0][_0x1fd78b(0x168)]==_0x1fd78b(0x1b8))var _0x603466=users[_0x1fd78b(0x1d1)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]==_0x1fd78b(0x1d8))var _0x603466=users[_0x1fd78b(0x1d8)];else{if(_0x531c66[0x0]['language']==_0x1fd78b(0x1d3))var _0x603466=users[_0x1fd78b(0x1d3)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]=='Spanish')var _0x603466=users[_0x1fd78b(0x179)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]=='French')var _0x603466=users[_0x1fd78b(0x1fb)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]==_0x1fd78b(0x19f))var _0x603466=users[_0x1fd78b(0x1ff)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]==_0x1fd78b(0x1e6))var _0x603466=users[_0x1fd78b(0x1e6)];else{if(_0x531c66[0x0][_0x1fd78b(0x168)]==_0x1fd78b(0x1f6))var _0x603466=users[_0x1fd78b(0x1ac)];}}}}}}}_0x5da68['render'](_0x1fd78b(0x1bd),{'success':_0xfff0c[_0x1fd78b(0x1cf)](_0x1fd78b(0x1a7)),'errors':_0xfff0c[_0x1fd78b(0x1cf)](_0x1fd78b(0x19e)),'role':_0x44c093,'profile':_0x5b264e,'master_shop':_0x531c66,'user':_0x344533,'language':_0x603466});}catch(_0x3ac4da){console[_0x1fd78b(0x1f4)](_0x3ac4da);}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x21f),auth,async(_0x1651fc,_0x15285b)=>{const _0x78fe0b=a0_0x8c209;try{const {name:_0xdff64f,products:_0x251423}=_0x1651fc[_0x78fe0b(0x1ae)],_0x4fa286=new brands({'name':_0xdff64f,'products':_0x251423}),_0x38ad37=await brands[_0x78fe0b(0x215)]({'name':_0xdff64f});_0x38ad37?_0x1651fc['flash']('errors',_0xdff64f+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1651fc[_0x78fe0b(0x1cf)](_0x78fe0b(0x1a7),_0xdff64f+_0x78fe0b(0x1ec));const _0x2213ae=await _0x4fa286[_0x78fe0b(0x1c4)]();_0x15285b[_0x78fe0b(0x182)]('/products/brands');}catch(_0x3eccdf){console['log'](_0x3eccdf);}}),router[a0_0x8c209(0x203)]('/brands/:id',auth,async(_0x45cb82,_0x304b2a)=>{const _0x174e8d=a0_0x8c209;try{const {username:_0x3ae855,email:_0x2f15bf,role:_0x4b9092}=_0x45cb82[_0x174e8d(0x1b2)],_0x12e4f3=_0x45cb82[_0x174e8d(0x1b2)],_0x56c510=await profile['findOne']({'email':_0x12e4f3[_0x174e8d(0x1ea)]}),_0x59b5a3=await master_shop[_0x174e8d(0x1d5)]();console[_0x174e8d(0x1f4)]('master',_0x59b5a3);const _0xe5e6af=_0x45cb82[_0x174e8d(0x1e7)]['id'];console[_0x174e8d(0x1f4)](_0xe5e6af);const _0x5ce1a7=await brands[_0x174e8d(0x20d)](_0xe5e6af);if(_0x59b5a3[0x0][_0x174e8d(0x168)]==_0x174e8d(0x1b8))var _0x5d5bdd=users[_0x174e8d(0x1d1)];else{if(_0x59b5a3[0x0][_0x174e8d(0x168)]==_0x174e8d(0x1d8))var _0x5d5bdd=users[_0x174e8d(0x1d8)];else{if(_0x59b5a3[0x0]['language']==_0x174e8d(0x1d3))var _0x5d5bdd=users['German'];else{if(_0x59b5a3[0x0][_0x174e8d(0x168)]=='Spanish')var _0x5d5bdd=users['Spanish'];else{if(_0x59b5a3[0x0][_0x174e8d(0x168)]=='French')var _0x5d5bdd=users[_0x174e8d(0x1fb)];else{if(_0x59b5a3[0x0][_0x174e8d(0x168)]=='Portuguese\x20(BR)')var _0x5d5bdd=users[_0x174e8d(0x1ff)];else{if(_0x59b5a3[0x0][_0x174e8d(0x168)]=='Chinese')var _0x5d5bdd=users[_0x174e8d(0x1e6)];else{if(_0x59b5a3[0x0]['language']==_0x174e8d(0x1f6))var _0x5d5bdd=users[_0x174e8d(0x1ac)];}}}}}}}_0x304b2a['render']('brands',{'success':_0x45cb82[_0x174e8d(0x1cf)](_0x174e8d(0x1a7)),'errors':_0x45cb82[_0x174e8d(0x1cf)]('errors'),'role':_0x12e4f3,'profile':_0x56c510,'master_shop':_0x59b5a3,'user':_0x5ce1a7,'language':_0x5d5bdd});}catch(_0x5bd74b){console['log'](_0x5bd74b);}}),router['post'](a0_0x8c209(0x1df),auth,async(_0x2da4a3,_0x4c902f)=>{const _0x4a21d2=a0_0x8c209;try{const _0x37a785=_0x2da4a3[_0x4a21d2(0x1e7)]['id'],_0x43c5c6=await brands[_0x4a21d2(0x18e)](_0x37a785,_0x2da4a3[_0x4a21d2(0x1ae)]);_0x2da4a3[_0x4a21d2(0x1cf)](_0x4a21d2(0x1a7),'brand\x20data\x20update\x20successfully'),_0x4c902f[_0x4a21d2(0x182)](_0x4a21d2(0x1f8));}catch(_0x35a8ae){console[_0x4a21d2(0x1f4)](_0x35a8ae);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x1c6),auth,async(_0x2f1730,_0x283a59)=>{const _0x596f6b=a0_0x8c209;try{const _0x4cb952=_0x2f1730[_0x596f6b(0x1e7)]['id'],_0x608ddf=await brands['findByIdAndDelete'](_0x4cb952);_0x2f1730['flash'](_0x596f6b(0x1a7),_0x596f6b(0x164)),_0x283a59[_0x596f6b(0x182)](_0x596f6b(0x1f8));}catch(_0x1bcc11){console['log'](_0x1bcc11);}}),router['get']('/units',auth,async(_0x485e44,_0x421216)=>{const _0x26d1ba=a0_0x8c209;try{const {username:_0x882d26,email:_0x3cdea2,role:_0x1c47ce}=_0x485e44[_0x26d1ba(0x1b2)],_0x522faf=_0x485e44[_0x26d1ba(0x1b2)],_0x4f40ec=await profile[_0x26d1ba(0x215)]({'email':_0x522faf[_0x26d1ba(0x1ea)]}),_0x1a3462=await master_shop[_0x26d1ba(0x1d5)]();console['log'](_0x26d1ba(0x1b3),_0x1a3462);const _0xa040e4=await units[_0x26d1ba(0x1d5)]();if(_0x1a3462[0x0][_0x26d1ba(0x168)]=='English\x20(US)')var _0x583bb8=users[_0x26d1ba(0x1d1)];else{if(_0x1a3462[0x0]['language']==_0x26d1ba(0x1d8))var _0x583bb8=users[_0x26d1ba(0x1d8)];else{if(_0x1a3462[0x0][_0x26d1ba(0x168)]=='German')var _0x583bb8=users[_0x26d1ba(0x1d3)];else{if(_0x1a3462[0x0][_0x26d1ba(0x168)]=='Spanish')var _0x583bb8=users[_0x26d1ba(0x179)];else{if(_0x1a3462[0x0]['language']==_0x26d1ba(0x1fb))var _0x583bb8=users['French'];else{if(_0x1a3462[0x0][_0x26d1ba(0x168)]==_0x26d1ba(0x19f))var _0x583bb8=users[_0x26d1ba(0x1ff)];else{if(_0x1a3462[0x0][_0x26d1ba(0x168)]==_0x26d1ba(0x1e6))var _0x583bb8=users[_0x26d1ba(0x1e6)];else{if(_0x1a3462[0x0]['language']=='Arabic\x20(ae)')var _0x583bb8=users['Arabic'];}}}}}}}_0x421216['render'](_0x26d1ba(0x17e),{'success':_0x485e44[_0x26d1ba(0x1cf)](_0x26d1ba(0x1a7)),'errors':_0x485e44[_0x26d1ba(0x1cf)](_0x26d1ba(0x19e)),'role':_0x522faf,'profile':_0x4f40ec,'master_shop':_0x1a3462,'user':_0xa040e4,'language':_0x583bb8});}catch(_0x594fbe){console[_0x26d1ba(0x1f4)](_0x594fbe);}}),router['post']('/units',auth,async(_0x22d227,_0x1ff156)=>{const _0x5ceee1=a0_0x8c209;try{const {name:_0x3b119f,secondary_unit:_0x98713a,products:_0x4fbb73}=_0x22d227[_0x5ceee1(0x1ae)],_0x53edd8=new units({'name':_0x3b119f,'secondary_unit':_0x98713a,'products':_0x4fbb73}),_0x67751f=await units[_0x5ceee1(0x215)]({'name':_0x3b119f});_0x67751f?_0x22d227[_0x5ceee1(0x1cf)](_0x5ceee1(0x19e),_0x3b119f+_0x5ceee1(0x171)):_0x22d227[_0x5ceee1(0x1cf)]('success',_0x3b119f+'\x20unit\x20is\x20add\x20successfully');const _0x2a591a=await _0x53edd8[_0x5ceee1(0x1c4)]();_0x1ff156[_0x5ceee1(0x182)]('/products/units');}catch(_0x366fb8){console[_0x5ceee1(0x1f4)](_0x366fb8);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x20c),auth,async(_0x8ac540,_0x595aac)=>{const _0x2560ca=a0_0x8c209;try{const {username:_0x459e09,email:_0x2103b3,role:_0x2dc904}=_0x8ac540[_0x2560ca(0x1b2)],_0x84d08a=_0x8ac540[_0x2560ca(0x1b2)],_0x17d19c=await profile[_0x2560ca(0x215)]({'email':_0x84d08a[_0x2560ca(0x1ea)]}),_0x1e566e=await master_shop[_0x2560ca(0x1d5)]();console[_0x2560ca(0x1f4)](_0x2560ca(0x1b3),_0x1e566e);const _0x1fefbc=_0x8ac540['params']['id'],_0x1e9b66=await units[_0x2560ca(0x20d)](_0x1fefbc);if(_0x1e566e[0x0][_0x2560ca(0x168)]==_0x2560ca(0x1b8))var _0x5ca966=users[_0x2560ca(0x1d1)];else{if(_0x1e566e[0x0]['language']=='Hindi')var _0x5ca966=users[_0x2560ca(0x1d8)];else{if(_0x1e566e[0x0][_0x2560ca(0x168)]==_0x2560ca(0x1d3))var _0x5ca966=users['German'];else{if(_0x1e566e[0x0][_0x2560ca(0x168)]==_0x2560ca(0x179))var _0x5ca966=users[_0x2560ca(0x179)];else{if(_0x1e566e[0x0][_0x2560ca(0x168)]=='French')var _0x5ca966=users[_0x2560ca(0x1fb)];else{if(_0x1e566e[0x0][_0x2560ca(0x168)]==_0x2560ca(0x19f))var _0x5ca966=users[_0x2560ca(0x1ff)];else{if(_0x1e566e[0x0][_0x2560ca(0x168)]==_0x2560ca(0x1e6))var _0x5ca966=users[_0x2560ca(0x1e6)];else{if(_0x1e566e[0x0]['language']=='Arabic\x20(ae)')var _0x5ca966=users[_0x2560ca(0x1ac)];}}}}}}}_0x595aac[_0x2560ca(0x1b4)](_0x2560ca(0x17e),{'success':_0x8ac540[_0x2560ca(0x1cf)](_0x2560ca(0x1a7)),'errors':_0x8ac540['flash'](_0x2560ca(0x19e)),'role':_0x84d08a,'profile':_0x17d19c,'master_shop':_0x1e566e,'user':_0x1e9b66,'language':_0x5ca966});}catch(_0x222582){console[_0x2560ca(0x1f4)](_0x222582);}}),router['post'](a0_0x8c209(0x20c),auth,async(_0x588e45,_0x2fe4e8)=>{const _0x320518=a0_0x8c209;try{const _0x18b8b4=_0x588e45[_0x320518(0x1e7)]['id'],_0x353d82=await units['findByIdAndUpdate'](_0x18b8b4,_0x588e45[_0x320518(0x1ae)]);_0x588e45[_0x320518(0x1cf)](_0x320518(0x1a7),_0x320518(0x204)),_0x2fe4e8['redirect'](_0x320518(0x1f1));}catch(_0xc0c723){console[_0x320518(0x1f4)](_0xc0c723);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x1ca),auth,async(_0x56ed49,_0x51ebcd)=>{const _0x1ba7e0=a0_0x8c209;try{const _0x2e995e=_0x56ed49['params']['id'],_0x276b26=await units['findByIdAndDelete'](_0x2e995e);_0x56ed49[_0x1ba7e0(0x1cf)](_0x1ba7e0(0x1a7),_0x1ba7e0(0x20f)),_0x51ebcd[_0x1ba7e0(0x182)](_0x1ba7e0(0x1f1));}catch(_0x489246){console['log'](_0x489246);}});function a0_0x4bc4(_0x623d4e,_0x4e8536){const _0x705a4b=a0_0x705a();return a0_0x4bc4=function(_0x4bc4fa,_0x544449){_0x4bc4fa=_0x4bc4fa-0x161;let _0x340a89=_0x705a4b[_0x4bc4fa];return _0x340a89;},a0_0x4bc4(_0x623d4e,_0x4e8536);}const storage=multer['diskStorage']({'destination':(_0x295c3f,_0x4fa76a,_0x36efc5)=>{const _0x3fa70a=a0_0x8c209;_0x36efc5(null,_0x3fa70a(0x1d4));},'filename':(_0x335f7e,_0x56960d,_0x1ccb3e)=>{const _0x10ea2e=a0_0x8c209;_0x1ccb3e(null,Date[_0x10ea2e(0x209)]()+_0x56960d[_0x10ea2e(0x1da)]);}}),upload=multer({'storage':storage});function a0_0x705a(){const _0x2e26ad=['sheet_to_json','/brands/delete/:id','Content-Disposition','81876AXiInn','10wQdHjZ','/units/delete/:id','send','products','forEach','134498dqdsou','flash','Secondary_Units','English','Secondary_Code','German','public/upload','find','secondary_unit','categories','Hindi','concat','originalname','Products','product\x20edit','filename','primary_code','/brands/:id','\x20<>\x20','readFile','maxProdPerUnit','width','json','xlsx','Chinese','params','product_stock','height','email','long','\x20brand\x20is\x20add\x20successfully','Router','$product_details.product_stock','165444GSyKiG','/barcode_filter','/products/units','/barcode/:id','../middleware/auth','log','/categories','Arabic\x20(ae)','PUnits','/products/brands','maxStocks','Category','French','PName','unit','../models/all_models','Portuguese','post','PSecondaryUnits','$secondary_unit','get','unit\x20data\x20update\x20successfully','$category','migrate_product_fule','Products\x20master','secondary_code','now','MaxperUnits','$product_category','/units/:id','findById','then','unit\x20data\x20delete\x20successfully','exports','Product_Name','canvas','518474SzGEYb','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','findOne','CODE128','/categories/:id','max_number_per_units','Alert_QTY','411714Zvabvj','$_id','product_barcode_products','Prod_Cat','product_category','/brands','Brands','PBrands','/barcode_data','brand\x20data\x20delete\x20successfully','ProductCode','category','toBuffer','language','categories_edit','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','data','product_code','/categories/delete/:id','stock','Primary_Code','barcode\x20user_id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','warehouse','utils','$product_details','end','PAlQty','public/Migration','/products_import_migrate_file','Spanish','product_docs','$product_stock','brand','$product_name','units','Product_Code','aggregate','attachment;\x20filename=Product_Migration_File.xlsx','redirect','Products\x20find_data','public/Migration/','/filter_product','image','Maximum_Stocks','addPage','jsbarcode','2001954FKdLOr','name','multer','prod_categ','findByIdAndUpdate','write','Finished\x20Goods','exceljs','addWorksheet','product_barcode','min','message','numeric','_id','/products/view','$product_details.product_name','/view/:id','/select_data','Sheets','/view/add_products','errors','Portuguese\x20(BR)','hello','columns','../public/language/languages.json','bind','10ciInLJ','single','170NhrJKM','success','application/pdf','base64','add_product','/print_barcode_filter_search/','Arabic','/products/categories','body','setHeader','Products\x20warehouse_data','Raw\x20Materials','user','master','render','map','length','/print_barcode_single/:id','English\x20(US)','Products_category','file','$product_docs','status','brands','120QBoHMi','product\x20update\x20successfully','$brand','\x20categories\x20is\x20add\x20successfully','alertquantity','343066MWbpcy','save'];a0_0x705a=function(){return _0x2e26ad;};return a0_0x705a();}router[a0_0x8c209(0x203)]('/view',auth,async(_0x2229f2,_0x1bd9be)=>{const _0x4eda6e=a0_0x8c209;try{const {username:_0x2e7a64,email:_0x3c9822,role:_0x33004c}=_0x2229f2['user'],_0x364902=_0x2229f2[_0x4eda6e(0x1b2)],_0x38be59=await profile[_0x4eda6e(0x215)]({'email':_0x364902[_0x4eda6e(0x1ea)]}),_0x4a4838={'year':_0x4eda6e(0x196),'month':_0x4eda6e(0x1eb),'day':_0x4eda6e(0x196)},_0x24ea8c=await master_shop[_0x4eda6e(0x1d5)]();console['log'](_0x4eda6e(0x207),_0x24ea8c);const _0xa069f1=await product[_0x4eda6e(0x1d5)]();console[_0x4eda6e(0x1f4)](_0x4eda6e(0x183),_0xa069f1);const _0x36c7f4=await warehouse[_0x4eda6e(0x180)]([{'$unwind':_0x4eda6e(0x174)},{'$lookup':{'from':_0x4eda6e(0x1cc),'localField':'product_details.product_name','foreignField':_0x4eda6e(0x18b),'as':_0x4eda6e(0x17a)}},{'$unwind':_0x4eda6e(0x1bb)},{'$project':{'product_name':_0x4eda6e(0x199),'product_stock':_0x4eda6e(0x1ee)}},{'$group':{'_id':_0x4eda6e(0x17d),'product_stock':{'$sum':_0x4eda6e(0x17b)}}}]);console['log'](_0x4eda6e(0x1b0),_0x36c7f4),_0x36c7f4[_0x4eda6e(0x1cd)](_0x5383f2=>{const _0x2d008d=_0x4eda6e,_0xeb6556=_0xa069f1[_0x2d008d(0x1b5)](_0x48f477=>{const _0x2195ec=_0x2d008d;_0x48f477[_0x2195ec(0x18b)]==_0x5383f2[_0x2195ec(0x197)]&&(_0x48f477[_0x2195ec(0x16e)]=parseInt(_0x48f477[_0x2195ec(0x16e)])+parseInt(_0x5383f2[_0x2195ec(0x1e8)]));});}),console['log'](_0x4eda6e(0x183),_0xa069f1);if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x1b8))var _0x24f979=users['English'];else{if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x1d8))var _0x24f979=users['Hindi'];else{if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x1d3))var _0x24f979=users[_0x4eda6e(0x1d3)];else{if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x179))var _0x24f979=users[_0x4eda6e(0x179)];else{if(_0x24ea8c[0x0]['language']==_0x4eda6e(0x1fb))var _0x24f979=users['French'];else{if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x19f))var _0x24f979=users['Portuguese'];else{if(_0x24ea8c[0x0]['language']==_0x4eda6e(0x1e6))var _0x24f979=users[_0x4eda6e(0x1e6)];else{if(_0x24ea8c[0x0][_0x4eda6e(0x168)]==_0x4eda6e(0x1f6))var _0x24f979=users['Arabic'];}}}}}}}_0x1bd9be[_0x4eda6e(0x1b4)](_0x4eda6e(0x1cc),{'success':_0x2229f2[_0x4eda6e(0x1cf)](_0x4eda6e(0x1a7)),'errors':_0x2229f2[_0x4eda6e(0x1cf)]('errors'),'alldata':_0xa069f1,'profile':_0x38be59,'master_shop':_0x24ea8c,'role':_0x364902,'product_stock':_0x36c7f4,'language':_0x24f979});}catch(_0x3d34de){console['log'](_0x3d34de);}}),router['get'](a0_0x8c209(0x19d),auth,async(_0x592add,_0x4e930d)=>{const _0x45a95b=a0_0x8c209;try{const {username:_0x6b5384,email:_0x226ccb,role:_0x22555c}=_0x592add[_0x45a95b(0x1b2)],_0x109286=_0x592add['user'],_0x2e0f85=await profile[_0x45a95b(0x215)]({'email':_0x109286[_0x45a95b(0x1ea)]}),_0x802407=await master_shop[_0x45a95b(0x1d5)]();console[_0x45a95b(0x1f4)]('master',_0x802407);const _0x2f0ef8=await categories['find']({}),_0x33fb34=await brands['find']({}),_0x294d7c=await units[_0x45a95b(0x1d5)]({}),_0xf21f5b=await warehouse[_0x45a95b(0x1d5)]({'status':'Enabled'});if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x1b8))var _0x1ac63d=users['English'];else{if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x1d8))var _0x1ac63d=users[_0x45a95b(0x1d8)];else{if(_0x802407[0x0]['language']==_0x45a95b(0x1d3))var _0x1ac63d=users[_0x45a95b(0x1d3)];else{if(_0x802407[0x0]['language']=='Spanish')var _0x1ac63d=users[_0x45a95b(0x179)];else{if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x1fb))var _0x1ac63d=users[_0x45a95b(0x1fb)];else{if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x19f))var _0x1ac63d=users[_0x45a95b(0x1ff)];else{if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x1e6))var _0x1ac63d=users[_0x45a95b(0x1e6)];else{if(_0x802407[0x0][_0x45a95b(0x168)]==_0x45a95b(0x1f6))var _0x1ac63d=users[_0x45a95b(0x1ac)];}}}}}}}_0x4e930d[_0x45a95b(0x1b4)](_0x45a95b(0x1aa),{'success':_0x592add[_0x45a95b(0x1cf)](_0x45a95b(0x1a7)),'errors':_0x592add[_0x45a95b(0x1cf)](_0x45a95b(0x19e)),'role':_0x109286,'profile':_0x2e0f85,'categories':_0x2f0ef8,'brands':_0x33fb34,'master_shop':_0x802407,'units':_0x294d7c,'language':_0x1ac63d,'find_data':_0xf21f5b});}catch(_0x137e21){console[_0x45a95b(0x1f4)](_0x137e21);}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x19d),auth,upload[a0_0x8c209(0x1a5)]('image'),async(_0x224e8a,_0x3450f0)=>{const _0x3fac9f=a0_0x8c209;try{const {name:_0x366674,category:_0x53024c,brand:_0x4e4c35,unit:_0x499fe5,alertquantity:_0x46cc7f,stock:_0x49901c,product_code:_0x5ca382,warehouse:_0xf3d5f7,primary_ItemCode:_0x1b0a23,second_ItemCode:_0x5062c3,second_unit:_0x84bad5,maxPerUnit:_0x57e521,MaxPerProduct:_0x57e3d4}=_0x224e8a['body'],_0x4e9cdb=_0x224e8a[_0x3fac9f(0x1ba)]?.[_0x3fac9f(0x1dd)]||'defaultProduct.avif',_0x186068=new product({'image':_0x4e9cdb,'name':_0x366674,'category':_0x53024c,'brand':_0x4e4c35,'unit':_0x499fe5,'alertquantity':_0x46cc7f,'stock':_0x49901c,'product_code':_0x5ca382,'warehouse':_0xf3d5f7,'primary_code':_0x1b0a23,'secondary_code':_0x5062c3,'second_unit':_0x84bad5,'maxStocks':_0x57e3d4,'maxProdPerUnit':_0x57e521}),_0x56b535=await _0x186068['save'](),_0x148b77=await categories['findOne']({'name':_0x53024c});_0x148b77['products']=parseInt(_0x148b77['products'])+0x1,await _0x148b77[_0x3fac9f(0x1c4)]();const _0x1ab132=await brands['findOne']({'name':_0x4e4c35});_0x1ab132['products']=parseInt(_0x1ab132[_0x3fac9f(0x1cc)])+0x1,await _0x1ab132['save']();const _0x29e3a6=await units[_0x3fac9f(0x215)]({'name':_0x499fe5});_0x29e3a6['products']=parseInt(_0x29e3a6['products'])+0x1,await _0x29e3a6[_0x3fac9f(0x1c4)](),_0x224e8a[_0x3fac9f(0x1cf)](_0x3fac9f(0x1a7),'product\x20add\x20successfully'),_0x3450f0[_0x3fac9f(0x182)](_0x3fac9f(0x198));}catch(_0x296321){console['log'](_0x296321);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x19a),auth,async(_0x22c623,_0xa75c1)=>{const _0x74b99f=a0_0x8c209;try{const {username:_0x3d0857,email:_0x2fd28c,role:_0x5cd44c}=_0x22c623['user'],_0x17c2bb=_0x22c623['user'],_0x5e269e=await profile['findOne']({'email':_0x17c2bb[_0x74b99f(0x1ea)]}),_0x2a3dc4=await master_shop[_0x74b99f(0x1d5)]();console[_0x74b99f(0x1f4)]('edit\x20Product\x20master',_0x2a3dc4);const _0x121a54=_0x22c623[_0x74b99f(0x1e7)]['id'],_0x21f4e3=await product['findById'](_0x121a54),_0x5265b0=await categories[_0x74b99f(0x1d5)]({}),_0x5c4056=await brands[_0x74b99f(0x1d5)]({}),_0x5ce038=await units['find']({}),_0x1aaaf9=await warehouse[_0x74b99f(0x1d5)]({'status':'Enabled'}),_0x4dd613=await units[_0x74b99f(0x180)]([{'$group':{'_id':_0x74b99f(0x21b),'secondaryunit':{'$first':_0x74b99f(0x202)}}}]);if(_0x2a3dc4[0x0][_0x74b99f(0x168)]==_0x74b99f(0x1b8))var _0x388700=users[_0x74b99f(0x1d1)];else{if(_0x2a3dc4[0x0][_0x74b99f(0x168)]==_0x74b99f(0x1d8))var _0x388700=users[_0x74b99f(0x1d8)];else{if(_0x2a3dc4[0x0][_0x74b99f(0x168)]==_0x74b99f(0x1d3))var _0x388700=users['German'];else{if(_0x2a3dc4[0x0]['language']=='Spanish')var _0x388700=users[_0x74b99f(0x179)];else{if(_0x2a3dc4[0x0]['language']=='French')var _0x388700=users[_0x74b99f(0x1fb)];else{if(_0x2a3dc4[0x0][_0x74b99f(0x168)]==_0x74b99f(0x19f))var _0x388700=users[_0x74b99f(0x1ff)];else{if(_0x2a3dc4[0x0][_0x74b99f(0x168)]==_0x74b99f(0x1e6))var _0x388700=users[_0x74b99f(0x1e6)];else{if(_0x2a3dc4[0x0][_0x74b99f(0x168)]=='Arabic\x20(ae)')var _0x388700=users[_0x74b99f(0x1ac)];}}}}}}}_0xa75c1[_0x74b99f(0x1b4)]('edit_product',{'success':_0x22c623[_0x74b99f(0x1cf)]('success'),'errors':_0x22c623[_0x74b99f(0x1cf)](_0x74b99f(0x19e)),'role':_0x17c2bb,'profile':_0x5e269e,'alldata':_0x21f4e3,'categories':_0x5265b0,'brands':_0x5c4056,'master_shop':_0x2a3dc4,'units':_0x5ce038,'secondunit':_0x4dd613,'find_data':_0x1aaaf9,'language':_0x388700});}catch(_0x2664d6){console[_0x74b99f(0x1f4)](_0x2664d6);}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x19a),auth,upload[a0_0x8c209(0x1a5)](a0_0x8c209(0x186)),async(_0x6a9c73,_0xbe45de)=>{const _0x5aa6bc=a0_0x8c209;try{console[_0x5aa6bc(0x1f4)](_0x5aa6bc(0x1a0));const _0x55857c=_0x6a9c73[_0x5aa6bc(0x1e7)]['id'],_0x6358e8=await product[_0x5aa6bc(0x20d)](_0x55857c),{image:_0x58e444,name:_0x3d6b0a,category:_0x177f0b,brand:_0x24731d,sku:_0x1c0f76,unit:_0x5d778d,alertquantity:_0x9bb666,product_code:_0x1a4bd7,warehouse:_0x479fb5,primary_ItemCode:_0x34f06a,second_ItemCode:_0x5b7604,second_unit:_0x4ab997,maxPerUnit:_0x422153,MaxPerProduct:_0x426677,prod_catdata:_0x195d9d}=_0x6a9c73[_0x5aa6bc(0x1ae)];_0x6a9c73[_0x5aa6bc(0x1ba)]&&(_0x6358e8['image']=_0x6a9c73[_0x5aa6bc(0x1ba)]['filename']);_0x6358e8['name']=_0x3d6b0a,_0x6358e8['category']=_0x177f0b,_0x6358e8[_0x5aa6bc(0x17c)]=_0x24731d,_0x6358e8['sku']=_0x1c0f76,_0x6358e8[_0x5aa6bc(0x1fd)]=_0x5d778d,_0x6358e8[_0x5aa6bc(0x1c2)]=_0x9bb666,_0x6358e8[_0x5aa6bc(0x16c)]=_0x1a4bd7,_0x6358e8[_0x5aa6bc(0x172)]=_0x479fb5,_0x6358e8['primary_code']=_0x34f06a,_0x6358e8['secondary_code']=_0x5b7604,_0x6358e8[_0x5aa6bc(0x1d6)]=_0x4ab997,_0x6358e8[_0x5aa6bc(0x1f9)]=_0x426677,_0x6358e8[_0x5aa6bc(0x1e2)]=_0x422153,_0x6358e8[_0x5aa6bc(0x21e)]=_0x195d9d;const _0x976d80=await _0x6358e8[_0x5aa6bc(0x1c4)]();console[_0x5aa6bc(0x1f4)](_0x5aa6bc(0x1dc),_0x6358e8),_0x6a9c73[_0x5aa6bc(0x1cf)](_0x5aa6bc(0x1a7),_0x5aa6bc(0x1bf)),_0xbe45de[_0x5aa6bc(0x182)]('/products/view');}catch(_0x10ff04){console['log'](_0x10ff04);}}),router[a0_0x8c209(0x203)](a0_0x8c209(0x1f2),auth,async(_0x105402,_0x58ef62)=>{const _0x42f7d0=a0_0x8c209;try{const {username:_0xbc6469,email:_0x139ccd,role:_0x39dee9}=_0x105402[_0x42f7d0(0x1b2)],_0x465673=_0x105402[_0x42f7d0(0x1b2)],_0x4f9fdd=await profile[_0x42f7d0(0x215)]({'email':_0x465673[_0x42f7d0(0x1ea)]}),_0x43a06b=await master_shop[_0x42f7d0(0x1d5)]();console[_0x42f7d0(0x1f4)]('barcode\x20Product\x20master',_0x43a06b);const _0x5226af=_0x105402[_0x42f7d0(0x1e7)]['id'],_0x38fbd4=await product[_0x42f7d0(0x20d)](_0x5226af);console[_0x42f7d0(0x1f4)](_0x42f7d0(0x170),_0x38fbd4);if(_0x43a06b[0x0]['language']==_0x42f7d0(0x1b8))var _0x147728=users[_0x42f7d0(0x1d1)];else{if(_0x43a06b[0x0]['language']==_0x42f7d0(0x1d8))var _0x147728=users[_0x42f7d0(0x1d8)];else{if(_0x43a06b[0x0]['language']=='German')var _0x147728=users[_0x42f7d0(0x1d3)];else{if(_0x43a06b[0x0]['language']==_0x42f7d0(0x179))var _0x147728=users['Spanish'];else{if(_0x43a06b[0x0][_0x42f7d0(0x168)]==_0x42f7d0(0x1fb))var _0x147728=users['French'];else{if(_0x43a06b[0x0][_0x42f7d0(0x168)]=='Portuguese\x20(BR)')var _0x147728=users['Portuguese'];else{if(_0x43a06b[0x0][_0x42f7d0(0x168)]==_0x42f7d0(0x1e6))var _0x147728=users[_0x42f7d0(0x1e6)];else{if(_0x43a06b[0x0][_0x42f7d0(0x168)]==_0x42f7d0(0x1f6))var _0x147728=users[_0x42f7d0(0x1ac)];}}}}}}}_0x58ef62[_0x42f7d0(0x1b4)](_0x42f7d0(0x193),{'success':_0x105402[_0x42f7d0(0x1cf)](_0x42f7d0(0x1a7)),'errors':_0x105402[_0x42f7d0(0x1cf)](_0x42f7d0(0x19e)),'role':_0x465673,'profile':_0x4f9fdd,'alldata':_0x38fbd4,'master_shop':_0x43a06b,'language':_0x147728});}catch(_0x4f3cc5){console[_0x42f7d0(0x1f4)](_0x4f3cc5);}}),router['get']('/products_export_migrate_file',auth,async(_0xc41788,_0x50b05d)=>{const _0x27500d=a0_0x8c209;try{const _0x17e689=new excelJS['Workbook'](),_0x2b5f31=_0x17e689[_0x27500d(0x192)](_0x27500d(0x1db));return _0x2b5f31[_0x27500d(0x1a1)]=[{'header':_0x27500d(0x211),'key':_0x27500d(0x1fc),'width':0xa},{'header':'Brands','key':_0x27500d(0x162),'width':0xa},{'header':'Units','key':_0x27500d(0x1f7),'width':0xa},{'header':'Secondary_Units','key':_0x27500d(0x201),'width':0xa},{'header':'max_number_per_units','key':_0x27500d(0x20a),'width':0xa},{'header':_0x27500d(0x16f),'key':_0x27500d(0x165),'width':0xa},{'header':_0x27500d(0x1d2),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0x27500d(0x165),'width':0xa},{'header':_0x27500d(0x1fa),'key':'PCat','width':0xa},{'header':_0x27500d(0x219),'key':'PAlQty','width':0xa},{'header':_0x27500d(0x187),'key':_0x27500d(0x176),'width':0xa},{'header':_0x27500d(0x1b9),'key':_0x27500d(0x21d),'width':0xa}],_0x50b05d[_0x27500d(0x1af)]('Content-Type',_0x27500d(0x214)),_0x50b05d[_0x27500d(0x1af)](_0x27500d(0x1c7),_0x27500d(0x181)),_0x17e689[_0x27500d(0x1e5)][_0x27500d(0x18f)](_0x50b05d)[_0x27500d(0x20e)](()=>{_0x50b05d['status'](0xc8);});}catch(_0x43206d){_0x50b05d[_0x27500d(0x1bc)](0x190)[_0x27500d(0x1cb)](_0x43206d);}});const storage1=multer['diskStorage']({'destination':(_0x351189,_0xd9b3f6,_0x2f46ca)=>{const _0x367538=a0_0x8c209;_0x2f46ca(null,_0x367538(0x177));},'filename':(_0x352d0e,_0x5b7330,_0x208001)=>{const _0x1929d5=a0_0x8c209;_0x208001(null,Date[_0x1929d5(0x209)]()+_0x5b7330[_0x1929d5(0x1da)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x8c209(0x200)](a0_0x8c209(0x178),auth,uploadMigrate[a0_0x8c209(0x1a5)](a0_0x8c209(0x206)),async(_0x8138df,_0x3bc7a6)=>{const _0x1cdffe=a0_0x8c209,_0x68837a=_0x8138df[_0x1cdffe(0x1ba)]['filename'],_0x31f39c=await xlsx[_0x1cdffe(0x1e1)](_0x1cdffe(0x184)+_0x68837a);let _0x2b4f78=_0x31f39c['SheetNames'],_0x2cc509=xlsx[_0x1cdffe(0x173)][_0x1cdffe(0x1c5)](_0x31f39c[_0x1cdffe(0x19c)][_0x2b4f78[0x0]]);for(const _0x47f446 of _0x2cc509){const _0x3c4fd3=_0x47f446['Product_Name'],_0x215143=_0x47f446[_0x1cdffe(0x161)],_0x2dfa53=_0x47f446['Units'],_0x4ed591=_0x47f446[_0x1cdffe(0x1d0)],_0x2b1606=_0x47f446[_0x1cdffe(0x17f)],_0x12c38a=_0x47f446[_0x1cdffe(0x1fa)],_0x164df=_0x47f446[_0x1cdffe(0x219)],_0x1d6007=_0x47f446[_0x1cdffe(0x16f)],_0x3a6cd2=_0x47f446['Secondary_Code'],_0x3e5e88=_0x47f446['Maximum_Stocks'],_0x235345=_0x47f446[_0x1cdffe(0x218)],_0xba70f=_0x47f446[_0x1cdffe(0x1b9)];try{let _0x34de58=await categories[_0x1cdffe(0x215)]({'name':_0x12c38a});if(!_0x34de58){const _0x36699a=new categories({'name':_0x12c38a,'products':'0'});_0x34de58=await _0x36699a['save']();}let _0x5661e9=await brands[_0x1cdffe(0x215)]({'name':_0x215143});if(!_0x5661e9){const _0x2e75c0=new brands({'name':_0x215143,'products':'0'});_0x5661e9=await _0x2e75c0[_0x1cdffe(0x1c4)]();}let _0x362f72=await units[_0x1cdffe(0x215)]({'name':_0x2dfa53,'secondary_unit':_0x4ed591});if(!_0x362f72){const _0x30634b=new units({'name':_0x2dfa53,'secondary_unit':_0x4ed591,'products':'0'});_0x362f72=await _0x30634b[_0x1cdffe(0x1c4)]();}const _0x5db2dd=await product[_0x1cdffe(0x1d5)]({'name':_0x3c4fd3,'category':_0x34de58['name'],'brand':_0x5661e9['name'],'secondary_unit':_0x362f72[_0x1cdffe(0x1d6)],'product_code':_0x2b1606});console[_0x1cdffe(0x1f4)](_0x5db2dd[_0x1cdffe(0x1b6)]+_0x1cdffe(0x1e0)+_0x34de58[_0x1cdffe(0x18b)]+'\x20<>\x20'+_0x5661e9['name']+_0x1cdffe(0x1e0)+_0x362f72['secondary_unit']+_0x1cdffe(0x1e0)+_0x2b1606+_0x1cdffe(0x1e0)+_0x3c4fd3);if(_0x5db2dd[_0x1cdffe(0x1b6)]===0x0){const _0x309b47=new product({'image':'defaultProduct.avif','name':_0x3c4fd3,'category':_0x34de58['name'],'brand':_0x5661e9[_0x1cdffe(0x18b)],'unit':_0x362f72['name'],'alertquantity':_0x164df,'product_code':_0x2b1606,'secondary_unit':_0x362f72[_0x1cdffe(0x1d6)],'primary_code':_0x1d6007,'secondary_code':_0x3a6cd2,'maxStocks':_0x3e5e88,'maxProdPerUnit':_0x235345,'product_category':_0xba70f}),_0x44d0e6=await _0x309b47['save']();_0x34de58[_0x1cdffe(0x1cc)]=parseInt(_0x34de58[_0x1cdffe(0x1cc)])+0x1,await _0x34de58['save'](),_0x5661e9['products']=parseInt(_0x5661e9[_0x1cdffe(0x1cc)])+0x1,await _0x5661e9[_0x1cdffe(0x1c4)](),_0x362f72[_0x1cdffe(0x1cc)]=parseInt(_0x362f72[_0x1cdffe(0x1cc)])+0x1,await _0x362f72[_0x1cdffe(0x1c4)](),_0x8138df['flash']('success',_0x3c4fd3+'\x20added\x20successfully');}else{console[_0x1cdffe(0x1f4)](_0x5db2dd[0x0]);const _0x2507fb=_0x5db2dd[0x0];_0x2507fb[_0x1cdffe(0x166)]=_0x34de58[_0x1cdffe(0x18b)],_0x2507fb['brand']=_0x5661e9[_0x1cdffe(0x18b)],_0x2507fb[_0x1cdffe(0x1fd)]=_0x362f72[_0x1cdffe(0x18b)],_0x2507fb[_0x1cdffe(0x1c2)]=_0x164df,_0x2507fb[_0x1cdffe(0x16c)]=_0x2b1606,_0x2507fb[_0x1cdffe(0x1d6)]=_0x362f72[_0x1cdffe(0x1d6)],_0x2507fb[_0x1cdffe(0x1de)]=_0x1d6007,_0x2507fb[_0x1cdffe(0x208)]=_0x3a6cd2,_0x2507fb[_0x1cdffe(0x1f9)]=_0x3e5e88,_0x2507fb[_0x1cdffe(0x1e2)]=_0x235345,_0x2507fb[_0x1cdffe(0x21e)]=_0xba70f;const _0x41034e=await _0x2507fb[_0x1cdffe(0x1c4)]();_0x8138df[_0x1cdffe(0x1cf)](_0x1cdffe(0x1a7),_0x41034e[_0x1cdffe(0x18b)]+'\x20Edit\x20Successfully');}}catch(_0x37de98){_0x3bc7a6[_0x1cdffe(0x1bc)](0x1f4)['json']({'proderror':_0x37de98[_0x1cdffe(0x195)],'aproduct':_0x3c4fd3});}}_0x3bc7a6[_0x1cdffe(0x182)](_0x1cdffe(0x198));}),router[a0_0x8c209(0x200)](a0_0x8c209(0x19b),auth,async(_0x465ce1,_0x52baad)=>{const _0x5b739f=a0_0x8c209;try{console[_0x5b739f(0x1f4)](_0x465ce1[_0x5b739f(0x1ae)]);const {data_cateory:_0x2b8f09,datachoose:_0x294096}=_0x465ce1[_0x5b739f(0x1ae)];var _0x55ef30;if(_0x294096=='prod_categ')_0x55ef30=await product['aggregate']([{'$group':{'_id':_0x5b739f(0x20b)}}]);else{if(_0x294096==_0x5b739f(0x1bd))_0x55ef30=await product['aggregate']([{'$match':{'product_category':_0x2b8f09}},{'$group':{'_id':'$brand'}}]);else _0x294096=='categ'&&(_0x55ef30=await product[_0x5b739f(0x180)]([{'$match':{'product_category':_0x2b8f09}},{'$group':{'_id':'$category'}}]));}_0x52baad[_0x5b739f(0x1e4)](_0x55ef30);}catch(_0x153de4){_0x52baad['json']({'message':_0x153de4[_0x5b739f(0x195)]});}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x185),auth,async(_0x4b5160,_0x347c42)=>{const _0x203c61=a0_0x8c209;try{const {data_choosing:_0x96d2e9,data_selected:_0x26c00e}=_0x4b5160['body'];var _0x39b1ff;if(_0x96d2e9==_0x203c61(0x18d))_0x39b1ff=await product[_0x203c61(0x180)]([{'$match':{'product_category':_0x26c00e}}]);else{if(_0x96d2e9==_0x203c61(0x1bd))_0x39b1ff=await product[_0x203c61(0x180)]([{'$match':{'brand':_0x26c00e}}]);else _0x96d2e9=='categ'&&(_0x39b1ff=await product['aggregate']([{'$match':{'category':_0x26c00e}}]));}_0x347c42[_0x203c61(0x1e4)](_0x39b1ff);}catch(_0x517825){_0x347c42[_0x203c61(0x1e4)]({'message':_0x517825[_0x203c61(0x195)]});}}),router[a0_0x8c209(0x203)]('/print_barcode',auth,async(_0x34fb9c,_0x48e6c6)=>{const _0x3e309a=a0_0x8c209,_0x1191ec=_0x34fb9c[_0x3e309a(0x1b2)],_0x7a00e9=await profile[_0x3e309a(0x215)]({'email':_0x1191ec[_0x3e309a(0x1ea)]}),_0x52e822=await master_shop[_0x3e309a(0x1d5)](),_0x2809ea=await product[_0x3e309a(0x1d5)]();if(_0x52e822[0x0][_0x3e309a(0x168)]==_0x3e309a(0x1b8))var _0x3feae3=users[_0x3e309a(0x1d1)];else{if(_0x52e822[0x0]['language']=='Hindi')var _0x3feae3=users[_0x3e309a(0x1d8)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]=='German')var _0x3feae3=users[_0x3e309a(0x1d3)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]==_0x3e309a(0x179))var _0x3feae3=users[_0x3e309a(0x179)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]==_0x3e309a(0x1fb))var _0x3feae3=users[_0x3e309a(0x1fb)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]=='Portuguese\x20(BR)')var _0x3feae3=users[_0x3e309a(0x1ff)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]=='Chinese')var _0x3feae3=users[_0x3e309a(0x1e6)];else{if(_0x52e822[0x0][_0x3e309a(0x168)]==_0x3e309a(0x1f6))var _0x3feae3=users[_0x3e309a(0x1ac)];}}}}}}}_0x48e6c6[_0x3e309a(0x1b4)](_0x3e309a(0x21c),{'success':_0x34fb9c[_0x3e309a(0x1cf)]('success'),'errors':_0x34fb9c[_0x3e309a(0x1cf)]('errors'),'role':_0x1191ec,'profile':_0x7a00e9,'products':_0x2809ea,'master_shop':_0x52e822,'language':_0x3feae3});}),router[a0_0x8c209(0x200)](a0_0x8c209(0x163),auth,async(_0x12e51c,_0x518ff4)=>{const _0x2925a6=a0_0x8c209,_0x406a43=await product['find']();_0x518ff4[_0x2925a6(0x1e4)]({'data':_0x406a43});}),router[a0_0x8c209(0x200)](a0_0x8c209(0x1f0),auth,async(_0x14a29e,_0x1440d2)=>{const _0x6153f2=a0_0x8c209;try{const {dataProdCat:_0x2b830f,dataProdIdentity:_0x2c125d}=_0x14a29e[_0x6153f2(0x1ae)];var _0x144f9d;switch(_0x2b830f){case'fg':switch(_0x2c125d){case _0x6153f2(0x161):_0x144f9d=await product[_0x6153f2(0x180)]([{'$match':{'product_category':_0x6153f2(0x190)}},{'$group':{'_id':_0x6153f2(0x1c0)}},{'$project':{'brand':_0x6153f2(0x21b)}}]);break;case _0x6153f2(0x1fa):_0x144f9d=await product['aggregate']([{'$match':{'product_category':_0x6153f2(0x190)}},{'$group':{'_id':_0x6153f2(0x205)}},{'$project':{'category':_0x6153f2(0x21b)}}]);break;}break;case'rm':switch(_0x2c125d){case _0x6153f2(0x161):_0x144f9d=await product[_0x6153f2(0x180)]([{'$match':{'product_category':_0x6153f2(0x1b1)}},{'$group':{'_id':_0x6153f2(0x1c0)}},{'$project':{'brand':_0x6153f2(0x21b)}}]);break;case _0x6153f2(0x1fa):_0x144f9d=await product[_0x6153f2(0x180)]([{'$match':{'product_category':_0x6153f2(0x1b1)}},{'$group':{'_id':_0x6153f2(0x205)}},{'$project':{'category':_0x6153f2(0x21b)}}]);break;}break;}_0x1440d2['json'](_0x144f9d);}catch(_0x3f2cb6){_0x1440d2['json']({'message':_0x3f2cb6[_0x6153f2(0x195)]});}}),router[a0_0x8c209(0x200)]('/print_barcode_filter/',auth,async(_0x2b2722,_0x3c96cc)=>{const _0x15a2e7=a0_0x8c209;try{console[_0x15a2e7(0x1f4)](_0x2b2722[_0x15a2e7(0x1ae)]);const {prod_cat:_0x2283de,identity:_0x1f60d3,valueData:_0x34a4a2,typeofbarcode:_0x5aa8d3}=_0x2b2722[_0x15a2e7(0x1ae)];let _0xe3b0c;switch(_0x2283de){case'fg':if(_0x1f60d3=='Brands')_0xe3b0c=await product['aggregate']([{'$match':{'product_category':_0x15a2e7(0x190),'brand':_0x34a4a2}}]);else _0x1f60d3=='Category'&&(_0xe3b0c=await product['aggregate']([{'$match':{'product_category':_0x15a2e7(0x190),'category':_0x34a4a2}}]));break;case'rm':if(_0x1f60d3==_0x15a2e7(0x161))_0xe3b0c=await product[_0x15a2e7(0x180)]([{'$match':{'product_category':_0x15a2e7(0x1b1),'brand':_0x34a4a2}}]);else _0x1f60d3=='Category'&&(_0xe3b0c=await product[_0x15a2e7(0x180)]([{'$match':{'product_category':_0x15a2e7(0x1b1),'category':_0x34a4a2}}]));break;}const _0x2032a3=_0xb9c9ed=>_0xb9c9ed*0x48,_0x3ec9b5={'width':0x3,'height':0x1},_0x1b3b01=new PDFDocument({'margin':_0x2032a3(0.75),'size':[_0x2032a3(_0x3ec9b5[_0x15a2e7(0x1e3)]),_0x2032a3(_0x3ec9b5[_0x15a2e7(0x1e9)])],'bufferPages':!![]}),_0x59a436=_0xe3b0c['length'];for(let _0x564b40=0x0;_0x564b40<=_0x59a436;_0x564b40++){if(_0x564b40!=_0x59a436){const _0x559020=_0xe3b0c[_0x564b40][_0x15a2e7(0x18b)],_0x3b0916=_0xe3b0c[_0x564b40][_0x15a2e7(0x1de)],_0x3fe73b=_0xe3b0c[_0x564b40]['secondary_code'],_0x517888=_0xe3b0c[_0x564b40]['product_code'];var _0x24b91f;switch(_0x5aa8d3){case'1':_0x24b91f=_0x3b0916;break;case'2':_0x24b91f=_0x3fe73b;break;case'3':_0x24b91f=_0x517888;break;}const _0x4f9ea0={'width':0xd2,'height':0x64},_0x1153d2={'width':_0x2032a3(_0x3ec9b5[_0x15a2e7(0x1e3)]),'height':_0x2032a3(_0x3ec9b5[_0x15a2e7(0x1e9)])},_0x497b51=new Canvas();JsBarcode(_0x497b51,_0x24b91f,{'format':'CODE128','height':_0x4f9ea0[_0x15a2e7(0x1e9)],'displayValue':!![],'text':_0x24b91f});const _0x18c63a=_0x497b51[_0x15a2e7(0x167)](),_0x41199c=_0x1153d2[_0x15a2e7(0x1e3)]/_0x4f9ea0[_0x15a2e7(0x1e3)],_0x2ab3c8=_0x1153d2[_0x15a2e7(0x1e9)]/_0x4f9ea0[_0x15a2e7(0x1e9)],_0x1b0505=Math[_0x15a2e7(0x194)](_0x41199c,_0x2ab3c8),_0x10f8af=_0x4f9ea0[_0x15a2e7(0x1e3)]*_0x1b0505,_0x258acf=_0x4f9ea0[_0x15a2e7(0x1e9)]*_0x1b0505,_0x4e0e7a=(_0x1153d2[_0x15a2e7(0x1e3)]-_0x10f8af)/0x2,_0x5a5d6a=(_0x1153d2[_0x15a2e7(0x1e9)]-_0x258acf)/0x2;_0x1b3b01[_0x15a2e7(0x186)](_0x18c63a,_0x4e0e7a,_0x5a5d6a,{'width':_0x10f8af,'height':_0x258acf}),_0x564b40!=_0x59a436&&_0x1b3b01[_0x15a2e7(0x188)]();}}const _0x138558=[];_0x1b3b01['on']('data',_0x138558['push'][_0x15a2e7(0x1a3)](_0x138558)),_0x1b3b01['on']('end',()=>{const _0x439d3a=_0x15a2e7,_0xe8b7bd=Buffer['concat'](_0x138558),_0x518210=_0xe8b7bd['toString'](_0x439d3a(0x1a9));_0x3c96cc['json']({'pdfContent':_0x518210});}),_0x1b3b01[_0x15a2e7(0x175)]();}catch(_0x306060){_0x3c96cc[_0x15a2e7(0x1e4)]({'message':_0x306060[_0x15a2e7(0x195)]});}}),router['post'](a0_0x8c209(0x1ab),auth,async(_0x2d0ddc,_0x5646ee)=>{const _0x2a0ae5=a0_0x8c209;try{console[_0x2a0ae5(0x1f4)](_0x2d0ddc[_0x2a0ae5(0x1ae)]);const {prod_cat:_0x55f93e,identity:_0x21cc68,valueData:_0x2827c9}=_0x2d0ddc[_0x2a0ae5(0x1ae)];let _0x124eaf;switch(_0x55f93e){case'fg':if(_0x21cc68==_0x2a0ae5(0x161))_0x124eaf=await product[_0x2a0ae5(0x180)]([{'$match':{'product_category':_0x2a0ae5(0x190),'brand':_0x2827c9}}]);else _0x21cc68==_0x2a0ae5(0x1fa)&&(_0x124eaf=await product[_0x2a0ae5(0x180)]([{'$match':{'product_category':_0x2a0ae5(0x190),'category':_0x2827c9}}]));break;case'rm':if(_0x21cc68==_0x2a0ae5(0x161))_0x124eaf=await product[_0x2a0ae5(0x180)]([{'$match':{'product_category':_0x2a0ae5(0x1b1),'brand':_0x2827c9}}]);else _0x21cc68==_0x2a0ae5(0x1fa)&&(_0x124eaf=await product[_0x2a0ae5(0x180)]([{'$match':{'product_category':_0x2a0ae5(0x1b1),'category':_0x2827c9}}]));break;}_0x5646ee[_0x2a0ae5(0x1e4)](_0x124eaf);}catch(_0x1f2951){_0x5646ee[_0x2a0ae5(0x1e4)]({'message':_0x1f2951['message']});}}),router[a0_0x8c209(0x200)](a0_0x8c209(0x1b7),auth,async(_0x502ca0,_0x86fadc)=>{const _0x375bef=a0_0x8c209;try{const _0x4b1ea6=_0x502ca0[_0x375bef(0x1e7)]['id'],{copies:_0x48d43a,typeofbarcode:_0x462ec5}=_0x502ca0[_0x375bef(0x1ae)];var _0x4083c6=await product[_0x375bef(0x20d)](_0x4b1ea6);const _0x1bb9d4=_0x5e652b=>_0x5e652b*0x48,_0xf5a14={'width':0x3,'height':0x1},_0x421c4f=new PDFDocument({'margin':_0x1bb9d4(0.75),'size':[_0x1bb9d4(_0xf5a14[_0x375bef(0x1e3)]),_0x1bb9d4(_0xf5a14[_0x375bef(0x1e9)])],'bufferPages':!![]}),_0x5f5bda=_0x48d43a,_0x177551=_0x4083c6[_0x375bef(0x18b)],_0x1b1e3f=_0x4083c6[_0x375bef(0x1de)],_0x2b4509=_0x4083c6[_0x375bef(0x208)],_0x526a71=_0x4083c6[_0x375bef(0x16c)];let _0x5f577d;switch(_0x462ec5){case'1':_0x5f577d=_0x1b1e3f;break;case'2':_0x5f577d=_0x2b4509;break;case'3':_0x5f577d=_0x526a71;break;}const _0x10bd46={'width':0xd2,'height':0x64},_0x4a6bc8={'width':_0x1bb9d4(_0xf5a14[_0x375bef(0x1e3)]),'height':_0x1bb9d4(_0xf5a14['height'])};for(let _0x12106e=0x1;_0x12106e<=_0x5f5bda;_0x12106e++){const _0x56a569=new Canvas();JsBarcode(_0x56a569,_0x5f577d,{'format':_0x375bef(0x216),'height':_0x10bd46[_0x375bef(0x1e9)],'displayValue':!![],'text':_0x5f577d});const _0x134648=_0x56a569[_0x375bef(0x167)](),_0x404562=_0x4a6bc8[_0x375bef(0x1e3)]/_0x10bd46[_0x375bef(0x1e3)],_0x5725e3=_0x4a6bc8[_0x375bef(0x1e9)]/_0x10bd46['height'],_0x30c7c0=Math[_0x375bef(0x194)](_0x404562,_0x5725e3),_0x2bcfcf=_0x10bd46['width']*_0x30c7c0,_0x2a4b0c=_0x10bd46['height']*_0x30c7c0,_0x29f55c=(_0x4a6bc8[_0x375bef(0x1e3)]-_0x2bcfcf)/0x2,_0x3f30a6=(_0x4a6bc8[_0x375bef(0x1e9)]-_0x2a4b0c)/0x2;_0x421c4f['image'](_0x134648,_0x29f55c,_0x3f30a6,{'width':_0x2bcfcf,'height':_0x2a4b0c}),_0x12106e!=_0x5f5bda&&_0x421c4f[_0x375bef(0x188)]();}const _0x4f30c0=[];_0x421c4f['on'](_0x375bef(0x16b),_0x4f30c0['push'][_0x375bef(0x1a3)](_0x4f30c0)),_0x421c4f['on'](_0x375bef(0x175),()=>{const _0x34cdf7=_0x375bef,_0x3112d0=Buffer[_0x34cdf7(0x1d9)](_0x4f30c0),_0x2eeaee=new Blob([_0x3112d0],{'type':_0x34cdf7(0x1a8)}),_0x3672e4=URL['createObjectURL'](_0x2eeaee);_0x86fadc['json']({'pdfContent':_0x3112d0['toString'](_0x34cdf7(0x1a9))});}),_0x421c4f[_0x375bef(0x175)]();}catch(_0x5f37f7){_0x86fadc[_0x375bef(0x1e4)]({'message':_0x5f37f7[_0x375bef(0x195)]});}}),module[a0_0x8c209(0x210)]=router;