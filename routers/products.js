const a0_0x4376f6=a0_0x5b77;(function(_0x4577a7,_0x5eb929){const _0x3ce30a=a0_0x5b77,_0x3fdb53=_0x4577a7();while(!![]){try{const _0x2be5da=parseInt(_0x3ce30a(0x11a))/0x1*(parseInt(_0x3ce30a(0xa9))/0x2)+parseInt(_0x3ce30a(0x143))/0x3*(parseInt(_0x3ce30a(0x13f))/0x4)+-parseInt(_0x3ce30a(0x163))/0x5+parseInt(_0x3ce30a(0x15f))/0x6*(parseInt(_0x3ce30a(0xa5))/0x7)+-parseInt(_0x3ce30a(0x15d))/0x8+-parseInt(_0x3ce30a(0xe5))/0x9+parseInt(_0x3ce30a(0x117))/0xa;if(_0x2be5da===_0x5eb929)break;else _0x3fdb53['push'](_0x3fdb53['shift']());}catch(_0x4b7a7a){_0x3fdb53['push'](_0x3fdb53['shift']());}}}(a0_0x289d,0x5a120));function a0_0x5b77(_0x3cf447,_0x210368){const _0x289d47=a0_0x289d();return a0_0x5b77=function(_0x5b77b7,_0x5baefc){_0x5b77b7=_0x5b77b7-0xa1;let _0x526771=_0x289d47[_0x5b77b7];return _0x526771;},a0_0x5b77(_0x3cf447,_0x210368);}const express=require(a0_0x4376f6(0xf2)),res=require(a0_0x4376f6(0x11b)),app=express(),router=express[a0_0x4376f6(0xa2)](),multer=require(a0_0x4376f6(0xcd)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x4376f6(0xdd)),users=require(a0_0x4376f6(0xd8)),excelJS=require('exceljs'),xlsx=require(a0_0x4376f6(0x141)),JsBarcode=require(a0_0x4376f6(0x11f)),{Canvas}=require(a0_0x4376f6(0xf8)),PDFDocument=require(a0_0x4376f6(0x129));router[a0_0x4376f6(0x125)](a0_0x4376f6(0xfa),auth,async(_0x5f0878,_0x1969b9)=>{const _0x3cb904=a0_0x4376f6;try{const {username:_0x18f3c9,email:_0xf95f9,role:_0x16c4b4}=_0x5f0878[_0x3cb904(0x148)],_0x41fee7=_0x5f0878[_0x3cb904(0x148)],_0x5c1b3a=await profile['findOne']({'email':_0x41fee7['email']}),_0x33fdc1=await master_shop[_0x3cb904(0x10c)]();console['log']('master',_0x33fdc1);const _0x417077=await categories[_0x3cb904(0x10c)]();if(_0x33fdc1[0x0][_0x3cb904(0x149)]==_0x3cb904(0xaf))var _0x469e4d=users[_0x3cb904(0xf0)];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]=='Hindi')var _0x469e4d=users[_0x3cb904(0x101)];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]==_0x3cb904(0xa3))var _0x469e4d=users[_0x3cb904(0xa3)];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]==_0x3cb904(0x116))var _0x469e4d=users[_0x3cb904(0x116)];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]=='French')var _0x469e4d=users['French'];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]==_0x3cb904(0x135))var _0x469e4d=users['Portuguese'];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]=='Chinese')var _0x469e4d=users[_0x3cb904(0x15b)];else{if(_0x33fdc1[0x0][_0x3cb904(0x149)]==_0x3cb904(0xcb))var _0x469e4d=users['Arabic'];}}}}}}}_0x1969b9[_0x3cb904(0xef)](_0x3cb904(0x154),{'success':_0x5f0878[_0x3cb904(0x146)]('success'),'errors':_0x5f0878[_0x3cb904(0x146)](_0x3cb904(0xc3)),'role':_0x41fee7,'profile':_0x5c1b3a,'user':_0x417077,'master_shop':_0x33fdc1,'language':_0x469e4d});}catch(_0x2a0d6b){console[_0x3cb904(0x123)](_0x2a0d6b);}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xfa),auth,async(_0x518feb,_0x409fa2)=>{const _0x13df82=a0_0x4376f6;try{const {name:_0xf59f83,products:_0x49eaec}=_0x518feb[_0x13df82(0x13b)],_0xbaa542=new categories({'name':_0xf59f83,'products':_0x49eaec}),_0x155392=await categories[_0x13df82(0x161)]({'name':_0xf59f83});_0x155392?_0x518feb[_0x13df82(0x146)](_0x13df82(0xc3),_0xf59f83+_0x13df82(0x124)):_0x518feb[_0x13df82(0x146)](_0x13df82(0xc7),_0xf59f83+_0x13df82(0x13a));const _0x369381=await _0xbaa542['save']();_0x409fa2['redirect'](_0x13df82(0xd5));}catch(_0x2f6b3c){console['log'](_0x2f6b3c);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0x122),auth,async(_0x4f5a82,_0x2a66b2)=>{const _0x381314=a0_0x4376f6;try{const {username:_0x495838,email:_0x29341d,role:_0x49a67f}=_0x4f5a82['user'],_0x3b59ed=_0x4f5a82[_0x381314(0x148)],_0x5cad92=await profile[_0x381314(0x161)]({'email':_0x3b59ed[_0x381314(0xea)]}),_0x513025=await master_shop[_0x381314(0x10c)]();console[_0x381314(0x123)](_0x381314(0xf5),_0x513025);const _0x1e1800=_0x4f5a82['params']['id'];console[_0x381314(0x123)](_0x1e1800);const _0x1879c6=await categories[_0x381314(0xff)](_0x1e1800);if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0xaf))var _0x1420ba=users[_0x381314(0xf0)];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0x101))var _0x1420ba=users['Hindi'];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0xa3))var _0x1420ba=users['German'];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0x116))var _0x1420ba=users[_0x381314(0x116)];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0x142))var _0x1420ba=users['French'];else{if(_0x513025[0x0]['language']==_0x381314(0x135))var _0x1420ba=users['Portuguese'];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0x15b))var _0x1420ba=users[_0x381314(0x15b)];else{if(_0x513025[0x0][_0x381314(0x149)]==_0x381314(0xcb))var _0x1420ba=users['Arabic'];}}}}}}}_0x2a66b2[_0x381314(0xef)](_0x381314(0x154),{'success':_0x4f5a82[_0x381314(0x146)](_0x381314(0xc7)),'errors':_0x4f5a82['flash']('errors'),'role':_0x3b59ed,'profile':_0x5cad92,'master_shop':_0x513025,'user':_0x1879c6,'language':_0x1420ba});}catch(_0x8817b){console[_0x381314(0x123)](_0x8817b);}}),router['post'](a0_0x4376f6(0x122),auth,async(_0x1659f6,_0x2c6f23)=>{const _0x41879d=a0_0x4376f6;try{const _0x249c60=_0x1659f6[_0x41879d(0xcf)]['id'],_0x293e8f=await categories[_0x41879d(0xb9)](_0x249c60,_0x1659f6['body']);_0x1659f6[_0x41879d(0x146)](_0x41879d(0xc7),''+users[_0x41879d(0x140)]),_0x2c6f23[_0x41879d(0x113)](_0x41879d(0xd5));}catch(_0x1de20a){console[_0x41879d(0x123)](_0x1de20a);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0xa1),auth,async(_0x2223c7,_0x341ef1)=>{const _0x356fd7=a0_0x4376f6;try{const _0x3b37a7=_0x2223c7[_0x356fd7(0xcf)]['id'],_0x1fcadb=await categories[_0x356fd7(0xbb)](_0x3b37a7);_0x2223c7[_0x356fd7(0x146)](_0x356fd7(0xc7),_0x356fd7(0x10a)),_0x341ef1['redirect'](_0x356fd7(0xd5));}catch(_0x13b43d){console['log'](_0x13b43d);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0x11e),auth,async(_0x2c8787,_0x467280)=>{const _0x3e0058=a0_0x4376f6;try{const {username:_0x303ac3,email:_0x636e55,role:_0x20874b}=_0x2c8787[_0x3e0058(0x148)],_0x193a6a=_0x2c8787[_0x3e0058(0x148)],_0x342d5b=await profile[_0x3e0058(0x161)]({'email':_0x193a6a[_0x3e0058(0xea)]}),_0x3d4398=await master_shop['find']();console[_0x3e0058(0x123)](_0x3e0058(0xf5),_0x3d4398);const _0x2a0739=await brands[_0x3e0058(0x10c)]();if(_0x3d4398[0x0][_0x3e0058(0x149)]==_0x3e0058(0xaf))var _0x469adc=users['English'];else{if(_0x3d4398[0x0]['language']=='Hindi')var _0x469adc=users['Hindi'];else{if(_0x3d4398[0x0][_0x3e0058(0x149)]==_0x3e0058(0xa3))var _0x469adc=users[_0x3e0058(0xa3)];else{if(_0x3d4398[0x0]['language']==_0x3e0058(0x116))var _0x469adc=users[_0x3e0058(0x116)];else{if(_0x3d4398[0x0]['language']=='French')var _0x469adc=users[_0x3e0058(0x142)];else{if(_0x3d4398[0x0][_0x3e0058(0x149)]==_0x3e0058(0x135))var _0x469adc=users[_0x3e0058(0x153)];else{if(_0x3d4398[0x0][_0x3e0058(0x149)]==_0x3e0058(0x15b))var _0x469adc=users['Chinese'];else{if(_0x3d4398[0x0][_0x3e0058(0x149)]==_0x3e0058(0xcb))var _0x469adc=users[_0x3e0058(0x118)];}}}}}}}_0x467280['render'](_0x3e0058(0xe7),{'success':_0x2c8787['flash']('success'),'errors':_0x2c8787[_0x3e0058(0x146)](_0x3e0058(0xc3)),'role':_0x193a6a,'profile':_0x342d5b,'master_shop':_0x3d4398,'user':_0x2a0739,'language':_0x469adc});}catch(_0x3a83ec){console[_0x3e0058(0x123)](_0x3a83ec);}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0x11e),auth,async(_0x5c781b,_0x37cf29)=>{const _0x150cfc=a0_0x4376f6;try{const {name:_0xb64ccd,products:_0x1c340f}=_0x5c781b[_0x150cfc(0x13b)],_0x9f2862=new brands({'name':_0xb64ccd,'products':_0x1c340f}),_0x4c4ddb=await brands[_0x150cfc(0x161)]({'name':_0xb64ccd});_0x4c4ddb?_0x5c781b[_0x150cfc(0x146)](_0x150cfc(0xc3),_0xb64ccd+_0x150cfc(0x138)):_0x5c781b[_0x150cfc(0x146)](_0x150cfc(0xc7),_0xb64ccd+_0x150cfc(0xca));const _0x2dff3f=await _0x9f2862[_0x150cfc(0xfb)]();_0x37cf29[_0x150cfc(0x113)](_0x150cfc(0x104));}catch(_0x1b7275){console[_0x150cfc(0x123)](_0x1b7275);}}),router[a0_0x4376f6(0x125)]('/brands/:id',auth,async(_0x27b58b,_0x2aea46)=>{const _0x1ac805=a0_0x4376f6;try{const {username:_0x2222ae,email:_0x387592,role:_0x597f4f}=_0x27b58b[_0x1ac805(0x148)],_0x2b833b=_0x27b58b[_0x1ac805(0x148)],_0x2f72cc=await profile[_0x1ac805(0x161)]({'email':_0x2b833b['email']}),_0x1f557c=await master_shop[_0x1ac805(0x10c)]();console[_0x1ac805(0x123)](_0x1ac805(0xf5),_0x1f557c);const _0x448307=_0x27b58b['params']['id'];console[_0x1ac805(0x123)](_0x448307);const _0x118938=await brands['findById'](_0x448307);if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0xaf))var _0x5be1b8=users[_0x1ac805(0xf0)];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0x101))var _0x5be1b8=users[_0x1ac805(0x101)];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0xa3))var _0x5be1b8=users['German'];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0x116))var _0x5be1b8=users[_0x1ac805(0x116)];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0x142))var _0x5be1b8=users[_0x1ac805(0x142)];else{if(_0x1f557c[0x0]['language']==_0x1ac805(0x135))var _0x5be1b8=users[_0x1ac805(0x153)];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]=='Chinese')var _0x5be1b8=users[_0x1ac805(0x15b)];else{if(_0x1f557c[0x0][_0x1ac805(0x149)]==_0x1ac805(0xcb))var _0x5be1b8=users['Arabic'];}}}}}}}_0x2aea46[_0x1ac805(0xef)](_0x1ac805(0xe7),{'success':_0x27b58b[_0x1ac805(0x146)](_0x1ac805(0xc7)),'errors':_0x27b58b[_0x1ac805(0x146)](_0x1ac805(0xc3)),'role':_0x2b833b,'profile':_0x2f72cc,'master_shop':_0x1f557c,'user':_0x118938,'language':_0x5be1b8});}catch(_0x4bdf2a){console[_0x1ac805(0x123)](_0x4bdf2a);}}),router['post'](a0_0x4376f6(0x103),auth,async(_0x22c89d,_0x29053e)=>{const _0x290f1f=a0_0x4376f6;try{const _0x4949e2=_0x22c89d['params']['id'],_0x3b5b4d=await brands[_0x290f1f(0xb9)](_0x4949e2,_0x22c89d['body']);_0x22c89d[_0x290f1f(0x146)]('success',_0x290f1f(0xd6)),_0x29053e[_0x290f1f(0x113)](_0x290f1f(0x104));}catch(_0x2eecc4){console[_0x290f1f(0x123)](_0x2eecc4);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0xdc),auth,async(_0x5c6832,_0x262006)=>{const _0x16bd09=a0_0x4376f6;try{const _0x51dc46=_0x5c6832[_0x16bd09(0xcf)]['id'],_0x362202=await brands[_0x16bd09(0xbb)](_0x51dc46);_0x5c6832[_0x16bd09(0x146)](_0x16bd09(0xc7),'brand\x20data\x20delete\x20successfully'),_0x262006[_0x16bd09(0x113)](_0x16bd09(0x104));}catch(_0x49de5f){console['log'](_0x49de5f);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0x144),auth,async(_0x4be23e,_0x51a883)=>{const _0x4d5135=a0_0x4376f6;try{const {username:_0x4f7923,email:_0x31ba3b,role:_0x578534}=_0x4be23e['user'],_0x23c7d4=_0x4be23e[_0x4d5135(0x148)],_0x47f5c1=await profile['findOne']({'email':_0x23c7d4[_0x4d5135(0xea)]}),_0x5295b0=await master_shop[_0x4d5135(0x10c)]();console[_0x4d5135(0x123)]('master',_0x5295b0);const _0xc66761=await units['find']();if(_0x5295b0[0x0][_0x4d5135(0x149)]=='English\x20(US)')var _0x505134=users[_0x4d5135(0xf0)];else{if(_0x5295b0[0x0][_0x4d5135(0x149)]==_0x4d5135(0x101))var _0x505134=users[_0x4d5135(0x101)];else{if(_0x5295b0[0x0][_0x4d5135(0x149)]==_0x4d5135(0xa3))var _0x505134=users['German'];else{if(_0x5295b0[0x0]['language']==_0x4d5135(0x116))var _0x505134=users[_0x4d5135(0x116)];else{if(_0x5295b0[0x0]['language']==_0x4d5135(0x142))var _0x505134=users[_0x4d5135(0x142)];else{if(_0x5295b0[0x0][_0x4d5135(0x149)]==_0x4d5135(0x135))var _0x505134=users[_0x4d5135(0x153)];else{if(_0x5295b0[0x0][_0x4d5135(0x149)]==_0x4d5135(0x15b))var _0x505134=users[_0x4d5135(0x15b)];else{if(_0x5295b0[0x0][_0x4d5135(0x149)]==_0x4d5135(0xcb))var _0x505134=users[_0x4d5135(0x118)];}}}}}}}_0x51a883[_0x4d5135(0xef)]('units',{'success':_0x4be23e[_0x4d5135(0x146)](_0x4d5135(0xc7)),'errors':_0x4be23e[_0x4d5135(0x146)](_0x4d5135(0xc3)),'role':_0x23c7d4,'profile':_0x47f5c1,'master_shop':_0x5295b0,'user':_0xc66761,'language':_0x505134});}catch(_0x59f32f){console[_0x4d5135(0x123)](_0x59f32f);}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0x144),auth,async(_0x49721d,_0x22e7d2)=>{const _0x2a240a=a0_0x4376f6;try{const {name:_0x5ed412,secondary_unit:_0x455eee,products:_0x2f0661}=_0x49721d['body'],_0x1965ce=new units({'name':_0x5ed412,'secondary_unit':_0x455eee,'products':_0x2f0661}),_0x2c1379=await units[_0x2a240a(0x161)]({'name':_0x5ed412});_0x2c1379?_0x49721d[_0x2a240a(0x146)](_0x2a240a(0xc3),_0x5ed412+_0x2a240a(0xb8)):_0x49721d[_0x2a240a(0x146)](_0x2a240a(0xc7),_0x5ed412+_0x2a240a(0xa8));const _0x2396d0=await _0x1965ce['save']();_0x22e7d2[_0x2a240a(0x113)]('/products/units');}catch(_0x34f08d){console[_0x2a240a(0x123)](_0x34f08d);}}),router[a0_0x4376f6(0x125)]('/units/:id',auth,async(_0xfb2b9e,_0x53ac0f)=>{const _0x4c8a30=a0_0x4376f6;try{const {username:_0x51147c,email:_0x24e7db,role:_0x4e97b9}=_0xfb2b9e[_0x4c8a30(0x148)],_0x1d45c7=_0xfb2b9e[_0x4c8a30(0x148)],_0x28c298=await profile[_0x4c8a30(0x161)]({'email':_0x1d45c7['email']}),_0x349746=await master_shop[_0x4c8a30(0x10c)]();console['log'](_0x4c8a30(0xf5),_0x349746);const _0x263797=_0xfb2b9e['params']['id'],_0x39a004=await units[_0x4c8a30(0xff)](_0x263797);if(_0x349746[0x0][_0x4c8a30(0x149)]==_0x4c8a30(0xaf))var _0x36af5b=users['English'];else{if(_0x349746[0x0][_0x4c8a30(0x149)]=='Hindi')var _0x36af5b=users[_0x4c8a30(0x101)];else{if(_0x349746[0x0]['language']==_0x4c8a30(0xa3))var _0x36af5b=users[_0x4c8a30(0xa3)];else{if(_0x349746[0x0][_0x4c8a30(0x149)]==_0x4c8a30(0x116))var _0x36af5b=users['Spanish'];else{if(_0x349746[0x0][_0x4c8a30(0x149)]==_0x4c8a30(0x142))var _0x36af5b=users[_0x4c8a30(0x142)];else{if(_0x349746[0x0][_0x4c8a30(0x149)]=='Portuguese\x20(BR)')var _0x36af5b=users[_0x4c8a30(0x153)];else{if(_0x349746[0x0][_0x4c8a30(0x149)]==_0x4c8a30(0x15b))var _0x36af5b=users[_0x4c8a30(0x15b)];else{if(_0x349746[0x0][_0x4c8a30(0x149)]==_0x4c8a30(0xcb))var _0x36af5b=users[_0x4c8a30(0x118)];}}}}}}}_0x53ac0f['render'](_0x4c8a30(0xb0),{'success':_0xfb2b9e[_0x4c8a30(0x146)](_0x4c8a30(0xc7)),'errors':_0xfb2b9e[_0x4c8a30(0x146)](_0x4c8a30(0xc3)),'role':_0x1d45c7,'profile':_0x28c298,'master_shop':_0x349746,'user':_0x39a004,'language':_0x36af5b});}catch(_0x356d5d){console[_0x4c8a30(0x123)](_0x356d5d);}}),router['post']('/units/:id',auth,async(_0x12b44e,_0x1ea042)=>{const _0x2542cc=a0_0x4376f6;try{const _0x2f28e3=_0x12b44e[_0x2542cc(0xcf)]['id'],_0xb25e32=await units['findByIdAndUpdate'](_0x2f28e3,_0x12b44e[_0x2542cc(0x13b)]);_0x12b44e[_0x2542cc(0x146)](_0x2542cc(0xc7),_0x2542cc(0xe6)),_0x1ea042[_0x2542cc(0x113)]('/products/units');}catch(_0x516c81){console['log'](_0x516c81);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0x112),auth,async(_0x2caa1c,_0x55b043)=>{const _0x5bd1ee=a0_0x4376f6;try{const _0x19cad3=_0x2caa1c['params']['id'],_0x185ca4=await units[_0x5bd1ee(0xbb)](_0x19cad3);_0x2caa1c[_0x5bd1ee(0x146)](_0x5bd1ee(0xc7),_0x5bd1ee(0xe8)),_0x55b043[_0x5bd1ee(0x113)](_0x5bd1ee(0x11d));}catch(_0x134e00){console[_0x5bd1ee(0x123)](_0x134e00);}});const storage=multer[a0_0x4376f6(0x13c)]({'destination':(_0x1f74d1,_0x4d4c80,_0x10e3cf)=>{const _0x3ba2ee=a0_0x4376f6;_0x10e3cf(null,_0x3ba2ee(0x108));},'filename':(_0x272705,_0x547572,_0x1d8a1a)=>{const _0x3094a5=a0_0x4376f6;_0x1d8a1a(null,Date['now']()+_0x547572[_0x3094a5(0x12b)]);}}),upload=multer({'storage':storage});router[a0_0x4376f6(0x125)](a0_0x4376f6(0x114),auth,async(_0x31fc3f,_0x4b3cb9)=>{const _0x2969f8=a0_0x4376f6;try{const {username:_0x4ccd9c,email:_0x656e80,role:_0xdf7e98}=_0x31fc3f[_0x2969f8(0x148)],_0xea5876=_0x31fc3f['user'],_0x252553=await profile[_0x2969f8(0x161)]({'email':_0xea5876[_0x2969f8(0xea)]}),_0x12799a={'year':'numeric','month':_0x2969f8(0x131),'day':'numeric'},_0x268d48=await master_shop[_0x2969f8(0x10c)]();console[_0x2969f8(0x123)](_0x2969f8(0xd3),_0x268d48);const _0x3e30ad=await product[_0x2969f8(0x10c)]();console[_0x2969f8(0x123)](_0x2969f8(0x14a),_0x3e30ad);const _0x47b4d9=await warehouse[_0x2969f8(0x158)]([{'$unwind':_0x2969f8(0xeb)},{'$lookup':{'from':_0x2969f8(0xcc),'localField':_0x2969f8(0xed),'foreignField':_0x2969f8(0xe3),'as':_0x2969f8(0xd7)}},{'$unwind':_0x2969f8(0x15c)},{'$project':{'product_name':_0x2969f8(0x132),'product_stock':_0x2969f8(0x159)}},{'$group':{'_id':_0x2969f8(0x14e),'product_stock':{'$sum':_0x2969f8(0x134)}}}]);console[_0x2969f8(0x123)](_0x2969f8(0xb3),_0x47b4d9),_0x47b4d9[_0x2969f8(0xc4)](_0x1bb0ec=>{const _0x213cc8=_0x2969f8,_0x5d5407=_0x3e30ad[_0x213cc8(0x13e)](_0xccf691=>{const _0x10577a=_0x213cc8;_0xccf691[_0x10577a(0xe3)]==_0x1bb0ec['_id']&&(_0xccf691['stock']=parseInt(_0xccf691[_0x10577a(0x119)])+parseInt(_0x1bb0ec[_0x10577a(0x14f)]));});}),console[_0x2969f8(0x123)](_0x2969f8(0x14a),_0x3e30ad);if(_0x268d48[0x0][_0x2969f8(0x149)]=='English\x20(US)')var _0x24895d=users[_0x2969f8(0xf0)];else{if(_0x268d48[0x0][_0x2969f8(0x149)]==_0x2969f8(0x101))var _0x24895d=users[_0x2969f8(0x101)];else{if(_0x268d48[0x0][_0x2969f8(0x149)]==_0x2969f8(0xa3))var _0x24895d=users['German'];else{if(_0x268d48[0x0][_0x2969f8(0x149)]==_0x2969f8(0x116))var _0x24895d=users['Spanish'];else{if(_0x268d48[0x0]['language']==_0x2969f8(0x142))var _0x24895d=users[_0x2969f8(0x142)];else{if(_0x268d48[0x0][_0x2969f8(0x149)]==_0x2969f8(0x135))var _0x24895d=users['Portuguese'];else{if(_0x268d48[0x0]['language']==_0x2969f8(0x15b))var _0x24895d=users[_0x2969f8(0x15b)];else{if(_0x268d48[0x0]['language']=='Arabic\x20(ae)')var _0x24895d=users[_0x2969f8(0x118)];}}}}}}}_0x4b3cb9[_0x2969f8(0xef)](_0x2969f8(0xcc),{'success':_0x31fc3f[_0x2969f8(0x146)](_0x2969f8(0xc7)),'errors':_0x31fc3f['flash'](_0x2969f8(0xc3)),'alldata':_0x3e30ad,'profile':_0x252553,'master_shop':_0x268d48,'role':_0xea5876,'product_stock':_0x47b4d9,'language':_0x24895d});}catch(_0x5f2fd6){console[_0x2969f8(0x123)](_0x5f2fd6);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0xab),auth,async(_0x5202f,_0x560978)=>{const _0x5699e2=a0_0x4376f6;try{const {username:_0xf1bf18,email:_0xe60c07,role:_0x236f4e}=_0x5202f['user'],_0x13ed19=_0x5202f[_0x5699e2(0x148)],_0x13dc4a=await profile[_0x5699e2(0x161)]({'email':_0x13ed19[_0x5699e2(0xea)]}),_0x23e136=await master_shop['find']();console[_0x5699e2(0x123)](_0x5699e2(0xf5),_0x23e136);const _0x9e4eb0=await categories['find']({}),_0x375006=await brands['find']({}),_0x5407a0=await units[_0x5699e2(0x10c)]({}),_0x59ab8d=await warehouse[_0x5699e2(0x10c)]({'status':_0x5699e2(0xda)});if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0xaf))var _0x347207=users[_0x5699e2(0xf0)];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0x101))var _0x347207=users[_0x5699e2(0x101)];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0xa3))var _0x347207=users['German'];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0x116))var _0x347207=users[_0x5699e2(0x116)];else{if(_0x23e136[0x0]['language']=='French')var _0x347207=users[_0x5699e2(0x142)];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0x135))var _0x347207=users['Portuguese'];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0x15b))var _0x347207=users[_0x5699e2(0x15b)];else{if(_0x23e136[0x0][_0x5699e2(0x149)]==_0x5699e2(0xcb))var _0x347207=users[_0x5699e2(0x118)];}}}}}}}_0x560978[_0x5699e2(0xef)](_0x5699e2(0xd2),{'success':_0x5202f['flash'](_0x5699e2(0xc7)),'errors':_0x5202f['flash'](_0x5699e2(0xc3)),'role':_0x13ed19,'profile':_0x13dc4a,'categories':_0x9e4eb0,'brands':_0x375006,'master_shop':_0x23e136,'units':_0x5407a0,'language':_0x347207,'find_data':_0x59ab8d});}catch(_0x8fcc82){console[_0x5699e2(0x123)](_0x8fcc82);}}),router['post'](a0_0x4376f6(0xab),auth,upload[a0_0x4376f6(0xde)](a0_0x4376f6(0xe1)),async(_0x7977f1,_0x40b098)=>{const _0x3bb136=a0_0x4376f6;try{const {name:_0x1e7a70,category:_0x5bf482,brand:_0x3f4747,unit:_0x300895,alertquantity:_0x57c5ee,stock:_0x23ab80,product_code:_0x2b787f,warehouse:_0x478a4e,primary_ItemCode:_0x441165,second_ItemCode:_0x32794e,second_unit:_0x4abd9a,maxPerUnit:_0xb35735,MaxPerProduct:_0x52c908}=_0x7977f1[_0x3bb136(0x13b)],_0x273c50=_0x7977f1[_0x3bb136(0x166)]?.['filename']||_0x3bb136(0xb6),_0x2cb7ba=new product({'image':_0x273c50,'name':_0x1e7a70,'category':_0x5bf482,'brand':_0x3f4747,'unit':_0x300895,'alertquantity':_0x57c5ee,'stock':_0x23ab80,'product_code':_0x2b787f,'warehouse':_0x478a4e,'primary_code':_0x441165,'secondary_code':_0x32794e,'second_unit':_0x4abd9a,'maxStocks':_0x52c908,'maxProdPerUnit':_0xb35735}),_0x2b115f=await _0x2cb7ba[_0x3bb136(0xfb)](),_0x4c8a73=await categories[_0x3bb136(0x161)]({'name':_0x5bf482});_0x4c8a73[_0x3bb136(0xcc)]=parseInt(_0x4c8a73[_0x3bb136(0xcc)])+0x1,await _0x4c8a73['save']();const _0x24b290=await brands['findOne']({'name':_0x3f4747});_0x24b290[_0x3bb136(0xcc)]=parseInt(_0x24b290[_0x3bb136(0xcc)])+0x1,await _0x24b290[_0x3bb136(0xfb)]();const _0x11d8ec=await units['findOne']({'name':_0x300895});_0x11d8ec[_0x3bb136(0xcc)]=parseInt(_0x11d8ec[_0x3bb136(0xcc)])+0x1,await _0x11d8ec[_0x3bb136(0xfb)](),_0x7977f1['flash'](_0x3bb136(0xc7),_0x3bb136(0x100)),_0x40b098['redirect']('/products/view');}catch(_0x4ae59d){console[_0x3bb136(0x123)](_0x4ae59d);}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0xb2),auth,async(_0x34b006,_0x1f5f6a)=>{const _0x2d032c=a0_0x4376f6;try{const {username:_0x11b7a2,email:_0x5d2567,role:_0xf92828}=_0x34b006[_0x2d032c(0x148)],_0x244c2f=_0x34b006[_0x2d032c(0x148)],_0x10988e=await profile[_0x2d032c(0x161)]({'email':_0x244c2f[_0x2d032c(0xea)]}),_0x4bb909=await master_shop[_0x2d032c(0x10c)]();console['log'](_0x2d032c(0x12c),_0x4bb909);const _0xdfb87b=_0x34b006[_0x2d032c(0xcf)]['id'],_0x4aa93d=await product['findById'](_0xdfb87b),_0x1b1ea3=await categories[_0x2d032c(0x10c)]({}),_0x301b67=await brands[_0x2d032c(0x10c)]({}),_0x3e763a=await units['find']({}),_0x4cc185=await warehouse[_0x2d032c(0x10c)]({'status':_0x2d032c(0xda)}),_0x2ad07d=await units[_0x2d032c(0x158)]([{'$group':{'_id':_0x2d032c(0x15a),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x4bb909[0x0]['language']==_0x2d032c(0xaf))var _0x5c1d08=users[_0x2d032c(0xf0)];else{if(_0x4bb909[0x0][_0x2d032c(0x149)]==_0x2d032c(0x101))var _0x5c1d08=users[_0x2d032c(0x101)];else{if(_0x4bb909[0x0]['language']==_0x2d032c(0xa3))var _0x5c1d08=users[_0x2d032c(0xa3)];else{if(_0x4bb909[0x0][_0x2d032c(0x149)]==_0x2d032c(0x116))var _0x5c1d08=users['Spanish'];else{if(_0x4bb909[0x0][_0x2d032c(0x149)]==_0x2d032c(0x142))var _0x5c1d08=users[_0x2d032c(0x142)];else{if(_0x4bb909[0x0][_0x2d032c(0x149)]==_0x2d032c(0x135))var _0x5c1d08=users[_0x2d032c(0x153)];else{if(_0x4bb909[0x0]['language']=='Chinese')var _0x5c1d08=users[_0x2d032c(0x15b)];else{if(_0x4bb909[0x0][_0x2d032c(0x149)]==_0x2d032c(0xcb))var _0x5c1d08=users[_0x2d032c(0x118)];}}}}}}}_0x1f5f6a[_0x2d032c(0xef)](_0x2d032c(0xc9),{'success':_0x34b006[_0x2d032c(0x146)](_0x2d032c(0xc7)),'errors':_0x34b006[_0x2d032c(0x146)](_0x2d032c(0xc3)),'role':_0x244c2f,'profile':_0x10988e,'alldata':_0x4aa93d,'categories':_0x1b1ea3,'brands':_0x301b67,'master_shop':_0x4bb909,'units':_0x3e763a,'secondunit':_0x2ad07d,'find_data':_0x4cc185,'language':_0x5c1d08});}catch(_0x20eb5f){console[_0x2d032c(0x123)](_0x20eb5f);}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xb2),auth,upload['single']('image'),async(_0x2ed43f,_0x2fafd9)=>{const _0x507ddc=a0_0x4376f6;try{console[_0x507ddc(0x123)](_0x507ddc(0x150));const _0xd3acb=_0x2ed43f[_0x507ddc(0xcf)]['id'],_0x5a938f=await product[_0x507ddc(0xff)](_0xd3acb),{image:_0x44fdae,name:_0x697e8a,category:_0x51df17,brand:_0x473d6a,sku:_0x196099,unit:_0x241dd4,alertquantity:_0x3bbe72,product_code:_0x1de083,warehouse:_0x5ce9d1,primary_ItemCode:_0x5b19f7,second_ItemCode:_0x277fb5,second_unit:_0x23c41b,maxPerUnit:_0x24add6,MaxPerProduct:_0x35cccd,prod_catdata:_0x16dc44}=_0x2ed43f[_0x507ddc(0x13b)];_0x2ed43f[_0x507ddc(0x166)]&&(_0x5a938f[_0x507ddc(0xe1)]=_0x2ed43f[_0x507ddc(0x166)][_0x507ddc(0x106)]);_0x5a938f[_0x507ddc(0xe3)]=_0x697e8a,_0x5a938f['category']=_0x51df17,_0x5a938f[_0x507ddc(0x13d)]=_0x473d6a,_0x5a938f[_0x507ddc(0xf6)]=_0x196099,_0x5a938f[_0x507ddc(0x164)]=_0x241dd4,_0x5a938f[_0x507ddc(0xce)]=_0x3bbe72,_0x5a938f[_0x507ddc(0x162)]=_0x1de083,_0x5a938f['warehouse']=_0x5ce9d1,_0x5a938f[_0x507ddc(0xe0)]=_0x5b19f7,_0x5a938f[_0x507ddc(0xfd)]=_0x277fb5,_0x5a938f[_0x507ddc(0x14c)]=_0x23c41b,_0x5a938f[_0x507ddc(0xb4)]=_0x35cccd,_0x5a938f[_0x507ddc(0x107)]=_0x24add6,_0x5a938f[_0x507ddc(0xbd)]=_0x16dc44;const _0x147f59=await _0x5a938f[_0x507ddc(0xfb)]();console[_0x507ddc(0x123)](_0x507ddc(0xc0),_0x5a938f),_0x2ed43f[_0x507ddc(0x146)](_0x507ddc(0xc7),_0x507ddc(0x160)),_0x2fafd9[_0x507ddc(0x113)](_0x507ddc(0x167));}catch(_0x1dd712){console['log'](_0x1dd712);}}),router[a0_0x4376f6(0x125)]('/barcode/:id',auth,async(_0x332805,_0x5cdedb)=>{const _0x458e57=a0_0x4376f6;try{const {username:_0x2fd357,email:_0x259231,role:_0x28213f}=_0x332805['user'],_0x339f63=_0x332805[_0x458e57(0x148)],_0x5c1995=await profile[_0x458e57(0x161)]({'email':_0x339f63[_0x458e57(0xea)]}),_0x13b681=await master_shop[_0x458e57(0x10c)]();console['log'](_0x458e57(0xbc),_0x13b681);const _0x3686bc=_0x332805[_0x458e57(0xcf)]['id'],_0x55d80d=await product[_0x458e57(0xff)](_0x3686bc);console[_0x458e57(0x123)](_0x458e57(0x14d),_0x55d80d);if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0xaf))var _0x1f75a0=users[_0x458e57(0xf0)];else{if(_0x13b681[0x0]['language']==_0x458e57(0x101))var _0x1f75a0=users[_0x458e57(0x101)];else{if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0xa3))var _0x1f75a0=users[_0x458e57(0xa3)];else{if(_0x13b681[0x0]['language']=='Spanish')var _0x1f75a0=users[_0x458e57(0x116)];else{if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0x142))var _0x1f75a0=users[_0x458e57(0x142)];else{if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0x135))var _0x1f75a0=users[_0x458e57(0x153)];else{if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0x15b))var _0x1f75a0=users[_0x458e57(0x15b)];else{if(_0x13b681[0x0][_0x458e57(0x149)]==_0x458e57(0xcb))var _0x1f75a0=users['Arabic'];}}}}}}}_0x5cdedb[_0x458e57(0xef)](_0x458e57(0x139),{'success':_0x332805[_0x458e57(0x146)]('success'),'errors':_0x332805[_0x458e57(0x146)]('errors'),'role':_0x339f63,'profile':_0x5c1995,'alldata':_0x55d80d,'master_shop':_0x13b681,'language':_0x1f75a0});}catch(_0x3e00af){console[_0x458e57(0x123)](_0x3e00af);}}),router[a0_0x4376f6(0x125)]('/products_export_migrate_file',auth,async(_0x20d55a,_0x5c9d19)=>{const _0x3bbd9e=a0_0x4376f6;try{const _0x462691=new excelJS[(_0x3bbd9e(0x10d))](),_0x751d6c=_0x462691[_0x3bbd9e(0x128)](_0x3bbd9e(0x11c));return _0x751d6c[_0x3bbd9e(0x168)]=[{'header':_0x3bbd9e(0x120),'key':_0x3bbd9e(0x10e),'width':0xa},{'header':_0x3bbd9e(0xb7),'key':_0x3bbd9e(0x10f),'width':0xa},{'header':_0x3bbd9e(0xc1),'key':_0x3bbd9e(0x121),'width':0xa},{'header':_0x3bbd9e(0xf4),'key':_0x3bbd9e(0xbf),'width':0xa},{'header':_0x3bbd9e(0x152),'key':_0x3bbd9e(0xf3),'width':0xa},{'header':_0x3bbd9e(0xc5),'key':_0x3bbd9e(0x127),'width':0xa},{'header':_0x3bbd9e(0x147),'key':_0x3bbd9e(0x127),'width':0xa},{'header':_0x3bbd9e(0xd9),'key':_0x3bbd9e(0x127),'width':0xa},{'header':_0x3bbd9e(0x145),'key':_0x3bbd9e(0xc8),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x3bbd9e(0xbe),'key':'PAlQty','width':0xa},{'header':'Products_category','key':_0x3bbd9e(0x102),'width':0xa}],_0x5c9d19[_0x3bbd9e(0xd0)](_0x3bbd9e(0xd1),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5c9d19[_0x3bbd9e(0xd0)]('Content-Disposition',_0x3bbd9e(0xac)),_0x462691[_0x3bbd9e(0x141)]['write'](_0x5c9d19)[_0x3bbd9e(0x130)](()=>{const _0x4ec826=_0x3bbd9e;_0x5c9d19[_0x4ec826(0xf9)](0xc8);});}catch(_0x59697c){_0x5c9d19[_0x3bbd9e(0xf9)](0x190)[_0x3bbd9e(0x12f)](_0x59697c);}});const storage1=multer[a0_0x4376f6(0x13c)]({'destination':(_0x549f44,_0x57257d,_0x4724b9)=>{_0x4724b9(null,'public/Migration');},'filename':(_0x1d6684,_0x3b457c,_0x57bf4f)=>{const _0x17014c=a0_0x4376f6;_0x57bf4f(null,Date[_0x17014c(0x115)]()+_0x3b457c[_0x17014c(0x12b)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x289d(){const _0x37ec88=['ProductCode','addWorksheet','pdfkit-table','width','originalname','edit\x20Product\x20master','sheet_to_json','Sheets','send','then','long','$product_details.product_name','$brand','$product_stock','Portuguese\x20(BR)','post','base64','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_barcode','\x20categories\x20is\x20add\x20successfully','body','diskStorage','brand','map','2908JBOjSc','categories_edit','xlsx','French','1353BgnsDf','/units','Category','flash','Secondary_Code','user','language','Products\x20find_data','\x20added\x20successfully','secondary_unit','barcode\x20user_id','$product_name','product_stock','hello','Finished\x20Goods','max_number_per_units','Portuguese','categories','exports','end','readFile','aggregate','$product_details.product_stock','$_id','Chinese','$product_docs','2400376GsikLz','public/Migration/','2742dtcLLw','product\x20update\x20successfully','findOne','product_code','1395500vPyBNY','unit','toString','file','/products/view','columns','/categories/delete/:id','Router','German','min','2765oMJmuO','height','data','\x20unit\x20is\x20add\x20successfully','29234ABmUTT','/barcode_filter','/view/add_products','attachment;\x20filename=Product_Migration_File.xlsx','bind','prod_categ','English\x20(US)','units','message','/view/:id','Products\x20warehouse_data','maxStocks','/barcode_data','defaultProduct.avif','Brands','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','findByIdAndUpdate','/print_barcode','findByIdAndDelete','barcode\x20Product\x20master','product_category','Maximum_Stocks','PSecondaryUnits','product\x20edit','Units','/products_import_migrate_file','errors','forEach','Primary_Code','Alert_QTY','success','PCat','edit_product','\x20brand\x20is\x20add\x20successfully','Arabic\x20(ae)','products','multer','alertquantity','params','setHeader','Content-Type','add_product','Products\x20master','categ','/products/categories','brand\x20data\x20update\x20successfully','product_docs','../public/language/languages.json','Product_Code','Enabled','product_barcode_products','/brands/delete/:id','../middleware/auth','single','utils','primary_code','image','/print_barcode_filter/','name','$category','6596514uHZbvL','unit\x20data\x20update\x20successfully','brands','unit\x20data\x20delete\x20successfully','length','email','$product_details','CODE128','product_details.product_name','/print_barcode_filter_search/','render','English','\x20<>\x20','express','MaxperUnits','Secondary_Units','master','sku','/print_barcode_single/:id','canvas','status','/categories','save','addPage','secondary_code','concat','findById','product\x20add\x20successfully','Hindi','Prod_Cat','/brands/:id','/products/brands','push','filename','maxProdPerUnit','public/upload','migrate_product_fule','categories\x20data\x20delete\x20successfully','category','find','Workbook','PName','PBrands','\x20Edit\x20Successfully','Raw\x20Materials','/units/delete/:id','redirect','/view','now','Spanish','8656720QBeQNt','Arabic','stock','21SVKWeU','express/lib/response','Products','/products/units','/brands','jsbarcode','Product_Name','PUnits','/categories/:id','log','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','get','json'];a0_0x289d=function(){return _0x37ec88;};return a0_0x289d();}router[a0_0x4376f6(0x136)](a0_0x4376f6(0xc2),auth,uploadMigrate[a0_0x4376f6(0xde)](a0_0x4376f6(0x109)),async(_0x12ee20,_0x28123d)=>{const _0x555f95=a0_0x4376f6,_0x33646c=_0x12ee20[_0x555f95(0x166)][_0x555f95(0x106)],_0x1d9a9a=await xlsx[_0x555f95(0x157)](_0x555f95(0x15e)+_0x33646c);let _0x3e8e35=_0x1d9a9a['SheetNames'],_0x2a377c=xlsx[_0x555f95(0xdf)][_0x555f95(0x12d)](_0x1d9a9a[_0x555f95(0x12e)][_0x3e8e35[0x0]]);for(const _0x4ea2ea of _0x2a377c){const _0x162086=_0x4ea2ea[_0x555f95(0x120)],_0x2c1d18=_0x4ea2ea[_0x555f95(0xb7)],_0x4df701=_0x4ea2ea[_0x555f95(0xc1)],_0x56237b=_0x4ea2ea['Secondary_Units'],_0x536582=_0x4ea2ea[_0x555f95(0xd9)],_0xbb1c31=_0x4ea2ea[_0x555f95(0x145)],_0x2f9696=_0x4ea2ea[_0x555f95(0xc6)],_0x26838d=_0x4ea2ea[_0x555f95(0xc5)],_0x415921=_0x4ea2ea[_0x555f95(0x147)],_0x2309f0=_0x4ea2ea[_0x555f95(0xbe)],_0xff56af=_0x4ea2ea[_0x555f95(0x152)],_0x3b5dae=_0x4ea2ea['Products_category'];try{let _0x43fbe9=await categories['findOne']({'name':_0xbb1c31});if(!_0x43fbe9){const _0x29395e=new categories({'name':_0xbb1c31,'products':'0'});_0x43fbe9=await _0x29395e['save']();}let _0xfad29d=await brands[_0x555f95(0x161)]({'name':_0x2c1d18});if(!_0xfad29d){const _0x18e99b=new brands({'name':_0x2c1d18,'products':'0'});_0xfad29d=await _0x18e99b['save']();}let _0x27dc19=await units[_0x555f95(0x161)]({'name':_0x4df701,'secondary_unit':_0x56237b});if(!_0x27dc19){const _0x55527f=new units({'name':_0x4df701,'secondary_unit':_0x56237b,'products':'0'});_0x27dc19=await _0x55527f[_0x555f95(0xfb)]();}const _0x39f7d9=await product['find']({'name':_0x162086,'category':_0x43fbe9[_0x555f95(0xe3)],'brand':_0xfad29d[_0x555f95(0xe3)],'secondary_unit':_0x27dc19[_0x555f95(0x14c)],'product_code':_0x536582});console[_0x555f95(0x123)](_0x39f7d9[_0x555f95(0xe9)]+_0x555f95(0xf1)+_0x43fbe9[_0x555f95(0xe3)]+_0x555f95(0xf1)+_0xfad29d[_0x555f95(0xe3)]+_0x555f95(0xf1)+_0x27dc19[_0x555f95(0x14c)]+_0x555f95(0xf1)+_0x536582+'\x20<>\x20'+_0x162086);if(_0x39f7d9[_0x555f95(0xe9)]===0x0){const _0x38470f=new product({'image':_0x555f95(0xb6),'name':_0x162086,'category':_0x43fbe9['name'],'brand':_0xfad29d[_0x555f95(0xe3)],'unit':_0x27dc19[_0x555f95(0xe3)],'alertquantity':_0x2f9696,'product_code':_0x536582,'secondary_unit':_0x27dc19[_0x555f95(0x14c)],'primary_code':_0x26838d,'secondary_code':_0x415921,'maxStocks':_0x2309f0,'maxProdPerUnit':_0xff56af,'product_category':_0x3b5dae}),_0x71ff9d=await _0x38470f['save']();_0x43fbe9[_0x555f95(0xcc)]=parseInt(_0x43fbe9[_0x555f95(0xcc)])+0x1,await _0x43fbe9[_0x555f95(0xfb)](),_0xfad29d[_0x555f95(0xcc)]=parseInt(_0xfad29d['products'])+0x1,await _0xfad29d['save'](),_0x27dc19[_0x555f95(0xcc)]=parseInt(_0x27dc19['products'])+0x1,await _0x27dc19[_0x555f95(0xfb)](),_0x12ee20[_0x555f95(0x146)](_0x555f95(0xc7),_0x162086+_0x555f95(0x14b));}else{console[_0x555f95(0x123)](_0x39f7d9[0x0]);const _0x44b5f6=_0x39f7d9[0x0];_0x44b5f6[_0x555f95(0x10b)]=_0x43fbe9[_0x555f95(0xe3)],_0x44b5f6[_0x555f95(0x13d)]=_0xfad29d[_0x555f95(0xe3)],_0x44b5f6[_0x555f95(0x164)]=_0x27dc19[_0x555f95(0xe3)],_0x44b5f6[_0x555f95(0xce)]=_0x2f9696,_0x44b5f6[_0x555f95(0x162)]=_0x536582,_0x44b5f6[_0x555f95(0x14c)]=_0x27dc19[_0x555f95(0x14c)],_0x44b5f6[_0x555f95(0xe0)]=_0x26838d,_0x44b5f6[_0x555f95(0xfd)]=_0x415921,_0x44b5f6[_0x555f95(0xb4)]=_0x2309f0,_0x44b5f6[_0x555f95(0x107)]=_0xff56af,_0x44b5f6[_0x555f95(0xbd)]=_0x3b5dae;const _0x3818e9=await _0x44b5f6['save']();_0x12ee20[_0x555f95(0x146)](_0x555f95(0xc7),_0x3818e9[_0x555f95(0xe3)]+_0x555f95(0x110));}}catch(_0x3736f7){_0x28123d[_0x555f95(0xf9)](0x1f4)[_0x555f95(0x126)]({'proderror':_0x3736f7[_0x555f95(0xb1)],'aproduct':_0x162086});}}_0x28123d[_0x555f95(0x113)](_0x555f95(0x167));}),router[a0_0x4376f6(0x136)]('/select_data',auth,async(_0x49e1d6,_0x25c8d3)=>{const _0x4579fc=a0_0x4376f6;try{console[_0x4579fc(0x123)](_0x49e1d6[_0x4579fc(0x13b)]);const {data_cateory:_0x329aea,datachoose:_0x57d6f0}=_0x49e1d6[_0x4579fc(0x13b)];var _0x34dc17;if(_0x57d6f0==_0x4579fc(0xae))_0x34dc17=await product['aggregate']([{'$group':{'_id':'$product_category'}}]);else{if(_0x57d6f0==_0x4579fc(0xe7))_0x34dc17=await product['aggregate']([{'$match':{'product_category':_0x329aea}},{'$group':{'_id':_0x4579fc(0x133)}}]);else _0x57d6f0==_0x4579fc(0xd4)&&(_0x34dc17=await product[_0x4579fc(0x158)]([{'$match':{'product_category':_0x329aea}},{'$group':{'_id':_0x4579fc(0xe4)}}]));}_0x25c8d3[_0x4579fc(0x126)](_0x34dc17);}catch(_0xf100c6){_0x25c8d3[_0x4579fc(0x126)]({'message':_0xf100c6[_0x4579fc(0xb1)]});}}),router[a0_0x4376f6(0x136)]('/filter_product',auth,async(_0x2701ce,_0x3cd47b)=>{const _0x5eb0c7=a0_0x4376f6;try{const {data_choosing:_0x151105,data_selected:_0x4ccddd}=_0x2701ce['body'];var _0x2dbdd9;if(_0x151105==_0x5eb0c7(0xae))_0x2dbdd9=await product['aggregate']([{'$match':{'product_category':_0x4ccddd}}]);else{if(_0x151105==_0x5eb0c7(0xe7))_0x2dbdd9=await product[_0x5eb0c7(0x158)]([{'$match':{'brand':_0x4ccddd}}]);else _0x151105==_0x5eb0c7(0xd4)&&(_0x2dbdd9=await product[_0x5eb0c7(0x158)]([{'$match':{'category':_0x4ccddd}}]));}_0x3cd47b[_0x5eb0c7(0x126)](_0x2dbdd9);}catch(_0x1e4e25){_0x3cd47b[_0x5eb0c7(0x126)]({'message':_0x1e4e25[_0x5eb0c7(0xb1)]});}}),router[a0_0x4376f6(0x125)](a0_0x4376f6(0xba),auth,async(_0x517b9d,_0x35d813)=>{const _0x3210a9=a0_0x4376f6,_0xa41512=_0x517b9d[_0x3210a9(0x148)],_0x403ccf=await profile['findOne']({'email':_0xa41512[_0x3210a9(0xea)]}),_0x3657c6=await master_shop[_0x3210a9(0x10c)](),_0x4286fd=await product[_0x3210a9(0x10c)]();if(_0x3657c6[0x0][_0x3210a9(0x149)]==_0x3210a9(0xaf))var _0x5b3c05=users[_0x3210a9(0xf0)];else{if(_0x3657c6[0x0][_0x3210a9(0x149)]==_0x3210a9(0x101))var _0x5b3c05=users[_0x3210a9(0x101)];else{if(_0x3657c6[0x0][_0x3210a9(0x149)]==_0x3210a9(0xa3))var _0x5b3c05=users[_0x3210a9(0xa3)];else{if(_0x3657c6[0x0][_0x3210a9(0x149)]==_0x3210a9(0x116))var _0x5b3c05=users[_0x3210a9(0x116)];else{if(_0x3657c6[0x0]['language']=='French')var _0x5b3c05=users['French'];else{if(_0x3657c6[0x0]['language']==_0x3210a9(0x135))var _0x5b3c05=users['Portuguese'];else{if(_0x3657c6[0x0][_0x3210a9(0x149)]==_0x3210a9(0x15b))var _0x5b3c05=users['Chinese'];else{if(_0x3657c6[0x0]['language']==_0x3210a9(0xcb))var _0x5b3c05=users[_0x3210a9(0x118)];}}}}}}}_0x35d813[_0x3210a9(0xef)](_0x3210a9(0xdb),{'success':_0x517b9d['flash'](_0x3210a9(0xc7)),'errors':_0x517b9d[_0x3210a9(0x146)](_0x3210a9(0xc3)),'role':_0xa41512,'profile':_0x403ccf,'products':_0x4286fd,'master_shop':_0x3657c6,'language':_0x5b3c05});}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xb5),auth,async(_0xb32296,_0x165d4e)=>{const _0x5ab7aa=a0_0x4376f6,_0x18e1da=await product[_0x5ab7aa(0x10c)]();_0x165d4e[_0x5ab7aa(0x126)]({'data':_0x18e1da});}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xaa),auth,async(_0x5542f9,_0x1f1bfc)=>{const _0x2aedfe=a0_0x4376f6;try{const {dataProdCat:_0x31028f,dataProdIdentity:_0x257024}=_0x5542f9[_0x2aedfe(0x13b)];var _0xf86f31;switch(_0x31028f){case'fg':switch(_0x257024){case _0x2aedfe(0xb7):_0xf86f31=await product[_0x2aedfe(0x158)]([{'$match':{'product_category':_0x2aedfe(0x151)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case _0x2aedfe(0x145):_0xf86f31=await product[_0x2aedfe(0x158)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x2aedfe(0xe4)}},{'$project':{'category':_0x2aedfe(0x15a)}}]);break;}break;case'rm':switch(_0x257024){case'Brands':_0xf86f31=await product[_0x2aedfe(0x158)]([{'$match':{'product_category':_0x2aedfe(0x111)}},{'$group':{'_id':_0x2aedfe(0x133)}},{'$project':{'brand':_0x2aedfe(0x15a)}}]);break;case _0x2aedfe(0x145):_0xf86f31=await product[_0x2aedfe(0x158)]([{'$match':{'product_category':_0x2aedfe(0x111)}},{'$group':{'_id':_0x2aedfe(0xe4)}},{'$project':{'category':_0x2aedfe(0x15a)}}]);break;}break;}_0x1f1bfc[_0x2aedfe(0x126)](_0xf86f31);}catch(_0x5d3b96){_0x1f1bfc[_0x2aedfe(0x126)]({'message':_0x5d3b96['message']});}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xe2),auth,async(_0x55e24a,_0x1edc65)=>{const _0x511241=a0_0x4376f6;try{console[_0x511241(0x123)](_0x55e24a['body']);const {prod_cat:_0x27c8c5,identity:_0x351178,valueData:_0x28a331,typeofbarcode:_0x4afb15}=_0x55e24a[_0x511241(0x13b)];let _0x2f5b03;switch(_0x27c8c5){case'fg':if(_0x351178=='Brands')_0x2f5b03=await product['aggregate']([{'$match':{'product_category':_0x511241(0x151),'brand':_0x28a331}}]);else _0x351178==_0x511241(0x145)&&(_0x2f5b03=await product['aggregate']([{'$match':{'product_category':_0x511241(0x151),'category':_0x28a331}}]));break;case'rm':if(_0x351178==_0x511241(0xb7))_0x2f5b03=await product[_0x511241(0x158)]([{'$match':{'product_category':_0x511241(0x111),'brand':_0x28a331}}]);else _0x351178=='Category'&&(_0x2f5b03=await product[_0x511241(0x158)]([{'$match':{'product_category':_0x511241(0x111),'category':_0x28a331}}]));break;}const _0x12d0a7=_0xca1ea8=>_0xca1ea8*0x48,_0x4554c7={'width':0x3,'height':0x1},_0x3179f4=new PDFDocument({'margin':_0x12d0a7(0.75),'size':[_0x12d0a7(_0x4554c7[_0x511241(0x12a)]),_0x12d0a7(_0x4554c7[_0x511241(0xa6)])],'bufferPages':!![]}),_0x47dd0e=_0x2f5b03['length'];for(let _0x11b813=0x0;_0x11b813<=_0x47dd0e;_0x11b813++){if(_0x11b813!=_0x47dd0e){const _0x3f0753=_0x2f5b03[_0x11b813][_0x511241(0xe3)],_0x13f8f2=_0x2f5b03[_0x11b813][_0x511241(0xe0)],_0x48e533=_0x2f5b03[_0x11b813][_0x511241(0xfd)],_0x282a7b=_0x2f5b03[_0x11b813][_0x511241(0x162)];var _0x3395de;switch(_0x4afb15){case'1':_0x3395de=_0x13f8f2;break;case'2':_0x3395de=_0x48e533;break;case'3':_0x3395de=_0x282a7b;break;}const _0x389388={'width':0xd2,'height':0x64},_0x3fd4e9={'width':_0x12d0a7(_0x4554c7[_0x511241(0x12a)]),'height':_0x12d0a7(_0x4554c7[_0x511241(0xa6)])},_0x28d356=new Canvas();JsBarcode(_0x28d356,_0x3395de,{'format':_0x511241(0xec),'height':_0x389388['height'],'displayValue':!![],'text':_0x3395de});const _0x190053=_0x28d356['toBuffer'](),_0x10e358=_0x3fd4e9[_0x511241(0x12a)]/_0x389388[_0x511241(0x12a)],_0x55fda4=_0x3fd4e9['height']/_0x389388[_0x511241(0xa6)],_0x142c21=Math[_0x511241(0xa4)](_0x10e358,_0x55fda4),_0x9eefec=_0x389388[_0x511241(0x12a)]*_0x142c21,_0x2d0875=_0x389388[_0x511241(0xa6)]*_0x142c21,_0x37d1d3=(_0x3fd4e9['width']-_0x9eefec)/0x2,_0x30c280=(_0x3fd4e9['height']-_0x2d0875)/0x2;_0x3179f4[_0x511241(0xe1)](_0x190053,_0x37d1d3,_0x30c280,{'width':_0x9eefec,'height':_0x2d0875}),_0x11b813!=_0x47dd0e&&_0x3179f4[_0x511241(0xfc)]();}}const _0x313a3c=[];_0x3179f4['on'](_0x511241(0xa7),_0x313a3c[_0x511241(0x105)][_0x511241(0xad)](_0x313a3c)),_0x3179f4['on']('end',()=>{const _0x6c351e=_0x511241,_0x55c984=Buffer[_0x6c351e(0xfe)](_0x313a3c),_0x14a67a=_0x55c984[_0x6c351e(0x165)]('base64');_0x1edc65[_0x6c351e(0x126)]({'pdfContent':_0x14a67a});}),_0x3179f4['end']();}catch(_0x408837){_0x1edc65['json']({'message':_0x408837[_0x511241(0xb1)]});}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xee),auth,async(_0x3a2d54,_0x1e273d)=>{const _0x48a611=a0_0x4376f6;try{console['log'](_0x3a2d54[_0x48a611(0x13b)]);const {prod_cat:_0x2acfaf,identity:_0x9bfc71,valueData:_0x2972b6}=_0x3a2d54['body'];let _0x3152d6;switch(_0x2acfaf){case'fg':if(_0x9bfc71==_0x48a611(0xb7))_0x3152d6=await product[_0x48a611(0x158)]([{'$match':{'product_category':_0x48a611(0x151),'brand':_0x2972b6}}]);else _0x9bfc71=='Category'&&(_0x3152d6=await product[_0x48a611(0x158)]([{'$match':{'product_category':_0x48a611(0x151),'category':_0x2972b6}}]));break;case'rm':if(_0x9bfc71==_0x48a611(0xb7))_0x3152d6=await product['aggregate']([{'$match':{'product_category':_0x48a611(0x111),'brand':_0x2972b6}}]);else _0x9bfc71==_0x48a611(0x145)&&(_0x3152d6=await product[_0x48a611(0x158)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x2972b6}}]));break;}_0x1e273d['json']({'data':_0x3152d6});}catch(_0x522c7d){_0x1e273d[_0x48a611(0x126)]({'message':_0x522c7d[_0x48a611(0xb1)]});}}),router[a0_0x4376f6(0x136)](a0_0x4376f6(0xf7),auth,async(_0x4fc6b7,_0x4874bc)=>{const _0x56d464=a0_0x4376f6;try{const _0xbbd4d=_0x4fc6b7[_0x56d464(0xcf)]['id'],{copies:_0x25ba10,typeofbarcode:_0x2bddfa}=_0x4fc6b7[_0x56d464(0x13b)];var _0x4fa09c=await product['findById'](_0xbbd4d);const _0x1e2df5=_0x5df56c=>_0x5df56c*0x48,_0xb7d151={'width':0x3,'height':0x1},_0x285ad5=new PDFDocument({'margin':_0x1e2df5(0.75),'size':[_0x1e2df5(_0xb7d151['width']),_0x1e2df5(_0xb7d151[_0x56d464(0xa6)])],'bufferPages':!![]}),_0x176d63=_0x25ba10,_0x8c8c90=_0x4fa09c['name'],_0xba35e=_0x4fa09c[_0x56d464(0xe0)],_0x53b20f=_0x4fa09c[_0x56d464(0xfd)],_0x35bca2=_0x4fa09c[_0x56d464(0x162)];let _0x4c88fe;switch(_0x2bddfa){case'1':_0x4c88fe=_0xba35e;break;case'2':_0x4c88fe=_0x53b20f;break;case'3':_0x4c88fe=_0x35bca2;break;}const _0x1c49bf={'width':0xd2,'height':0x64},_0x331738={'width':_0x1e2df5(_0xb7d151[_0x56d464(0x12a)]),'height':_0x1e2df5(_0xb7d151[_0x56d464(0xa6)])};for(let _0x193291=0x1;_0x193291<=_0x176d63;_0x193291++){const _0x2be8dd=new Canvas();JsBarcode(_0x2be8dd,_0x4c88fe,{'format':_0x56d464(0xec),'height':_0x1c49bf[_0x56d464(0xa6)],'displayValue':!![],'text':_0x4c88fe});const _0x5b8584=_0x2be8dd['toBuffer'](),_0x172f54=_0x331738[_0x56d464(0x12a)]/_0x1c49bf[_0x56d464(0x12a)],_0x49d54d=_0x331738[_0x56d464(0xa6)]/_0x1c49bf[_0x56d464(0xa6)],_0x502536=Math[_0x56d464(0xa4)](_0x172f54,_0x49d54d),_0x484e36=_0x1c49bf[_0x56d464(0x12a)]*_0x502536,_0x32b86b=_0x1c49bf[_0x56d464(0xa6)]*_0x502536,_0x2a7d12=(_0x331738[_0x56d464(0x12a)]-_0x484e36)/0x2,_0x4282a0=(_0x331738[_0x56d464(0xa6)]-_0x32b86b)/0x2;_0x285ad5[_0x56d464(0xe1)](_0x5b8584,_0x2a7d12,_0x4282a0,{'width':_0x484e36,'height':_0x32b86b}),_0x193291!=_0x176d63&&_0x285ad5['addPage']();}const _0xe8795b=[];_0x285ad5['on'](_0x56d464(0xa7),_0xe8795b['push'][_0x56d464(0xad)](_0xe8795b)),_0x285ad5['on'](_0x56d464(0x156),()=>{const _0x130ffe=_0x56d464,_0xe20e8c=Buffer[_0x130ffe(0xfe)](_0xe8795b),_0x21cf7c=_0xe20e8c[_0x130ffe(0x165)](_0x130ffe(0x137));_0x4874bc[_0x130ffe(0x126)]({'pdfContent':_0x21cf7c});}),_0x285ad5[_0x56d464(0x156)]();}catch(_0x5735e7){_0x4874bc[_0x56d464(0x126)]({'message':_0x5735e7['message']});}}),module[a0_0x4376f6(0x155)]=router;