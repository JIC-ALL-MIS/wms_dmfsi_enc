const a0_0x5def75=a0_0x37b8;(function(_0x48bdfc,_0x491940){const _0x47551a=a0_0x37b8,_0x55b0c4=_0x48bdfc();while(!![]){try{const _0x71d585=-parseInt(_0x47551a(0x143))/0x1+parseInt(_0x47551a(0x16f))/0x2+parseInt(_0x47551a(0x117))/0x3*(parseInt(_0x47551a(0x114))/0x4)+parseInt(_0x47551a(0x132))/0x5+-parseInt(_0x47551a(0xea))/0x6*(-parseInt(_0x47551a(0x171))/0x7)+-parseInt(_0x47551a(0x167))/0x8+-parseInt(_0x47551a(0xdb))/0x9;if(_0x71d585===_0x491940)break;else _0x55b0c4['push'](_0x55b0c4['shift']());}catch(_0x4ea958){_0x55b0c4['push'](_0x55b0c4['shift']());}}}(a0_0x4663,0x7f62f));function a0_0x4663(){const _0x167f20=['brand\x20data\x20delete\x20successfully','\x20added\x20successfully','render','Workbook','../middleware/auth','barcode\x20user_id','errors','SheetNames','/categories','Finished\x20Goods','product\x20add\x20successfully','user','sku','post','Portuguese','status','max_number_per_units','German','success','canvas','product_barcode_products','diskStorage','edit_product','PAlQty','Sheets','barcode\x20Product\x20master','then','/products/view','4578152XYnNmQ','log','Secondary_Units','single','Units','params','Content-Type','PBrands','1449252iPKixq','categories\x20data\x20delete\x20successfully','5377183zlcKFs','length','product_barcode','categ','jsbarcode','units','findById','push','/view/add_products','filename','$product_docs','Product_Name','PName','Chinese','Router','name','json','data','product_details.product_name','xlsx','file','secondary_code','/products/brands','edit\x20Product\x20master','brand\x20data\x20update\x20successfully','toString','express/lib/response','findByIdAndUpdate','ProductCode','findByIdAndDelete','add_product','product_code','express','now','11194686eJYfjL','public/Migration/','\x20categories\x20is\x20add\x20successfully','save','\x20unit\x20is\x20add\x20successfully','/categories/delete/:id','category','$secondary_unit','image','/products/categories','/units/:id','products','numeric','$product_details.product_stock','aggregate','6zXNlzv','secondary_unit','English\x20(US)','Secondary_Code','pdfkit-table','PSecondaryUnits','categories','language','Content-Disposition','Maximum_Stocks','English','concat','forEach','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','public/Migration','$product_stock','\x20brand\x20is\x20add\x20successfully','prod_categ','brand','product_category','height','originalname','email','toBuffer','addPage','CODE128','maxProdPerUnit','primary_code','Brands','write','$_id','base64','addWorksheet','Arabic','Raw\x20Materials','/view/:id','maxStocks','utils','Spanish','brands','send','PUnits','4UliaTQ','Prod_Cat','sheet_to_json','3076593DMxkRo','exceljs','find','min','Category','/brands/delete/:id','$category','/print_barcode_filter_search/','\x20<>\x20','Portuguese\x20(BR)','$product_name','/products/units','product\x20edit','$product_details','/brands/:id','Product_Code','product\x20update\x20successfully','Products\x20find_data','stock','/brands','unit','exports','alertquantity','$product_details.product_name','../public/language/languages.json','Hindi','Products\x20master','1965565yLMszt','Arabic\x20(ae)','get','redirect','body','/categories/:id','product_docs','Enabled','defaultProduct.avif','width','French','bind','end','$brand','message','/units','findOne','573541MnEpLU','flash','/print_barcode_filter/','/select_data','Products_category','setHeader','categories_edit','master'];a0_0x4663=function(){return _0x167f20;};return a0_0x4663();}const express=require(a0_0x5def75(0xd9)),res=require(a0_0x5def75(0xd3)),app=express(),router=express[a0_0x5def75(0x17f)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x5def75(0x14f)),users=require(a0_0x5def75(0x12f)),excelJS=require(a0_0x5def75(0x118)),xlsx=require(a0_0x5def75(0x184)),JsBarcode=require(a0_0x5def75(0x175)),{Canvas}=require(a0_0x5def75(0x15e)),PDFDocument=require(a0_0x5def75(0xee));router[a0_0x5def75(0x134)](a0_0x5def75(0x153),auth,async(_0x4bc0f0,_0x109b5b)=>{const _0x23b895=a0_0x5def75;try{const {username:_0x357c17,email:_0x30719b,role:_0x5466f3}=_0x4bc0f0['user'],_0x38c3be=_0x4bc0f0[_0x23b895(0x156)],_0x3cc67e=await profile[_0x23b895(0x142)]({'email':_0x38c3be[_0x23b895(0x100)]}),_0x17dc7a=await master_shop[_0x23b895(0x119)]();console[_0x23b895(0x168)](_0x23b895(0x14a),_0x17dc7a);const _0x21cd6d=await categories[_0x23b895(0x119)]();if(_0x17dc7a[0x0][_0x23b895(0xf1)]==_0x23b895(0xec))var _0x3c3e6c=users[_0x23b895(0xf4)];else{if(_0x17dc7a[0x0][_0x23b895(0xf1)]==_0x23b895(0x130))var _0x3c3e6c=users[_0x23b895(0x130)];else{if(_0x17dc7a[0x0]['language']=='German')var _0x3c3e6c=users['German'];else{if(_0x17dc7a[0x0][_0x23b895(0xf1)]=='Spanish')var _0x3c3e6c=users[_0x23b895(0x110)];else{if(_0x17dc7a[0x0][_0x23b895(0xf1)]==_0x23b895(0x13c))var _0x3c3e6c=users[_0x23b895(0x13c)];else{if(_0x17dc7a[0x0][_0x23b895(0xf1)]==_0x23b895(0x120))var _0x3c3e6c=users[_0x23b895(0x159)];else{if(_0x17dc7a[0x0]['language']==_0x23b895(0x17e))var _0x3c3e6c=users[_0x23b895(0x17e)];else{if(_0x17dc7a[0x0][_0x23b895(0xf1)]==_0x23b895(0x133))var _0x3c3e6c=users[_0x23b895(0x10b)];}}}}}}}_0x109b5b[_0x23b895(0x14d)]('categories',{'success':_0x4bc0f0[_0x23b895(0x144)]('success'),'errors':_0x4bc0f0[_0x23b895(0x144)](_0x23b895(0x151)),'role':_0x38c3be,'profile':_0x3cc67e,'user':_0x21cd6d,'master_shop':_0x17dc7a,'language':_0x3c3e6c});}catch(_0x2abeb7){console['log'](_0x2abeb7);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x153),auth,async(_0x1dc82f,_0x46f231)=>{const _0x1bc58d=a0_0x5def75;try{const {name:_0x27fe15,products:_0x567c3c}=_0x1dc82f[_0x1bc58d(0x136)],_0x500122=new categories({'name':_0x27fe15,'products':_0x567c3c}),_0x28a66a=await categories[_0x1bc58d(0x142)]({'name':_0x27fe15});_0x28a66a?_0x1dc82f['flash']('errors',_0x27fe15+_0x1bc58d(0xf7)):_0x1dc82f[_0x1bc58d(0x144)](_0x1bc58d(0x15d),_0x27fe15+_0x1bc58d(0xdd));const _0x275475=await _0x500122[_0x1bc58d(0xde)]();_0x46f231[_0x1bc58d(0x135)](_0x1bc58d(0xe4));}catch(_0x12abd3){console['log'](_0x12abd3);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0x137),auth,async(_0x6897d1,_0x394ce2)=>{const _0xb0ddc3=a0_0x5def75;try{const {username:_0x3f3242,email:_0xbc082,role:_0x725a21}=_0x6897d1[_0xb0ddc3(0x156)],_0x1d2358=_0x6897d1['user'],_0x5261ed=await profile[_0xb0ddc3(0x142)]({'email':_0x1d2358[_0xb0ddc3(0x100)]}),_0x19e707=await master_shop[_0xb0ddc3(0x119)]();console[_0xb0ddc3(0x168)](_0xb0ddc3(0x14a),_0x19e707);const _0xc681eb=_0x6897d1[_0xb0ddc3(0x16c)]['id'];console[_0xb0ddc3(0x168)](_0xc681eb);const _0x5502fb=await categories['findById'](_0xc681eb);if(_0x19e707[0x0][_0xb0ddc3(0xf1)]=='English\x20(US)')var _0x30af3f=users[_0xb0ddc3(0xf4)];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x130))var _0x30af3f=users[_0xb0ddc3(0x130)];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x15c))var _0x30af3f=users[_0xb0ddc3(0x15c)];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x110))var _0x30af3f=users[_0xb0ddc3(0x110)];else{if(_0x19e707[0x0]['language']==_0xb0ddc3(0x13c))var _0x30af3f=users[_0xb0ddc3(0x13c)];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x120))var _0x30af3f=users[_0xb0ddc3(0x159)];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x17e))var _0x30af3f=users['Chinese'];else{if(_0x19e707[0x0][_0xb0ddc3(0xf1)]==_0xb0ddc3(0x133))var _0x30af3f=users[_0xb0ddc3(0x10b)];}}}}}}}_0x394ce2[_0xb0ddc3(0x14d)](_0xb0ddc3(0xf0),{'success':_0x6897d1[_0xb0ddc3(0x144)](_0xb0ddc3(0x15d)),'errors':_0x6897d1['flash']('errors'),'role':_0x1d2358,'profile':_0x5261ed,'master_shop':_0x19e707,'user':_0x5502fb,'language':_0x30af3f});}catch(_0x169acd){console[_0xb0ddc3(0x168)](_0x169acd);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x137),auth,async(_0x454b42,_0x13dde6)=>{const _0xebe503=a0_0x5def75;try{const _0x7b585f=_0x454b42['params']['id'],_0x31e307=await categories['findByIdAndUpdate'](_0x7b585f,_0x454b42['body']);_0x454b42[_0xebe503(0x144)](_0xebe503(0x15d),''+users[_0xebe503(0x149)]),_0x13dde6[_0xebe503(0x135)](_0xebe503(0xe4));}catch(_0x6e6671){console[_0xebe503(0x168)](_0x6e6671);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0xe0),auth,async(_0x19c274,_0xd9f5)=>{const _0x167350=a0_0x5def75;try{const _0x4e5352=_0x19c274[_0x167350(0x16c)]['id'],_0x413249=await categories[_0x167350(0xd6)](_0x4e5352);_0x19c274[_0x167350(0x144)]('success',_0x167350(0x170)),_0xd9f5['redirect'](_0x167350(0xe4));}catch(_0x5e01b7){console[_0x167350(0x168)](_0x5e01b7);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0x12a),auth,async(_0x3c4839,_0x5491ab)=>{const _0x13cc06=a0_0x5def75;try{const {username:_0x26b1a7,email:_0xea3adf,role:_0x12ed87}=_0x3c4839[_0x13cc06(0x156)],_0x10ff76=_0x3c4839['user'],_0x42f376=await profile[_0x13cc06(0x142)]({'email':_0x10ff76[_0x13cc06(0x100)]}),_0x324517=await master_shop[_0x13cc06(0x119)]();console[_0x13cc06(0x168)](_0x13cc06(0x14a),_0x324517);const _0x285134=await brands[_0x13cc06(0x119)]();if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0xec))var _0x55e46f=users[_0x13cc06(0xf4)];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x130))var _0x55e46f=users[_0x13cc06(0x130)];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x15c))var _0x55e46f=users[_0x13cc06(0x15c)];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x110))var _0x55e46f=users[_0x13cc06(0x110)];else{if(_0x324517[0x0]['language']==_0x13cc06(0x13c))var _0x55e46f=users['French'];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x120))var _0x55e46f=users[_0x13cc06(0x159)];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x17e))var _0x55e46f=users['Chinese'];else{if(_0x324517[0x0][_0x13cc06(0xf1)]==_0x13cc06(0x133))var _0x55e46f=users[_0x13cc06(0x10b)];}}}}}}}_0x5491ab[_0x13cc06(0x14d)](_0x13cc06(0x111),{'success':_0x3c4839[_0x13cc06(0x144)]('success'),'errors':_0x3c4839[_0x13cc06(0x144)](_0x13cc06(0x151)),'role':_0x10ff76,'profile':_0x42f376,'master_shop':_0x324517,'user':_0x285134,'language':_0x55e46f});}catch(_0x22b946){console[_0x13cc06(0x168)](_0x22b946);}}),router[a0_0x5def75(0x158)]('/brands',auth,async(_0x5225ca,_0xb3f618)=>{const _0xf97c26=a0_0x5def75;try{const {name:_0x585066,products:_0x301c46}=_0x5225ca[_0xf97c26(0x136)],_0x379b0d=new brands({'name':_0x585066,'products':_0x301c46}),_0xfb7db6=await brands['findOne']({'name':_0x585066});_0xfb7db6?_0x5225ca[_0xf97c26(0x144)](_0xf97c26(0x151),_0x585066+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x5225ca[_0xf97c26(0x144)]('success',_0x585066+_0xf97c26(0xfa));const _0x2c8c67=await _0x379b0d[_0xf97c26(0xde)]();_0xb3f618[_0xf97c26(0x135)](_0xf97c26(0x187));}catch(_0x390b12){console[_0xf97c26(0x168)](_0x390b12);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0x125),auth,async(_0x378651,_0xe01bb8)=>{const _0x4c715e=a0_0x5def75;try{const {username:_0x783cd3,email:_0x3be82d,role:_0x3acd73}=_0x378651['user'],_0x41816e=_0x378651[_0x4c715e(0x156)],_0x481fee=await profile[_0x4c715e(0x142)]({'email':_0x41816e[_0x4c715e(0x100)]}),_0x10835e=await master_shop[_0x4c715e(0x119)]();console[_0x4c715e(0x168)](_0x4c715e(0x14a),_0x10835e);const _0x47fe26=_0x378651[_0x4c715e(0x16c)]['id'];console[_0x4c715e(0x168)](_0x47fe26);const _0x31f859=await brands[_0x4c715e(0x177)](_0x47fe26);if(_0x10835e[0x0]['language']=='English\x20(US)')var _0x4b02be=users[_0x4c715e(0xf4)];else{if(_0x10835e[0x0]['language']==_0x4c715e(0x130))var _0x4b02be=users[_0x4c715e(0x130)];else{if(_0x10835e[0x0][_0x4c715e(0xf1)]==_0x4c715e(0x15c))var _0x4b02be=users[_0x4c715e(0x15c)];else{if(_0x10835e[0x0][_0x4c715e(0xf1)]==_0x4c715e(0x110))var _0x4b02be=users[_0x4c715e(0x110)];else{if(_0x10835e[0x0]['language']==_0x4c715e(0x13c))var _0x4b02be=users[_0x4c715e(0x13c)];else{if(_0x10835e[0x0][_0x4c715e(0xf1)]==_0x4c715e(0x120))var _0x4b02be=users[_0x4c715e(0x159)];else{if(_0x10835e[0x0][_0x4c715e(0xf1)]==_0x4c715e(0x17e))var _0x4b02be=users[_0x4c715e(0x17e)];else{if(_0x10835e[0x0][_0x4c715e(0xf1)]==_0x4c715e(0x133))var _0x4b02be=users[_0x4c715e(0x10b)];}}}}}}}_0xe01bb8['render'](_0x4c715e(0x111),{'success':_0x378651[_0x4c715e(0x144)](_0x4c715e(0x15d)),'errors':_0x378651[_0x4c715e(0x144)]('errors'),'role':_0x41816e,'profile':_0x481fee,'master_shop':_0x10835e,'user':_0x31f859,'language':_0x4b02be});}catch(_0x38ea3e){console[_0x4c715e(0x168)](_0x38ea3e);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x125),auth,async(_0x409ce4,_0x24d956)=>{const _0x2d9d37=a0_0x5def75;try{const _0x19deb6=_0x409ce4[_0x2d9d37(0x16c)]['id'],_0x34db39=await brands[_0x2d9d37(0xd4)](_0x19deb6,_0x409ce4[_0x2d9d37(0x136)]);_0x409ce4[_0x2d9d37(0x144)](_0x2d9d37(0x15d),_0x2d9d37(0x189)),_0x24d956[_0x2d9d37(0x135)]('/products/brands');}catch(_0x11d0e2){console[_0x2d9d37(0x168)](_0x11d0e2);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0x11c),auth,async(_0x260ded,_0x1f0ed8)=>{const _0x39b481=a0_0x5def75;try{const _0x2aa3b1=_0x260ded[_0x39b481(0x16c)]['id'],_0x3c5f0b=await brands[_0x39b481(0xd6)](_0x2aa3b1);_0x260ded['flash'](_0x39b481(0x15d),_0x39b481(0x14b)),_0x1f0ed8['redirect'](_0x39b481(0x187));}catch(_0x5bb80){console[_0x39b481(0x168)](_0x5bb80);}}),router[a0_0x5def75(0x134)]('/units',auth,async(_0x2b7fb2,_0x93d96e)=>{const _0x571780=a0_0x5def75;try{const {username:_0x2d867f,email:_0x4469d0,role:_0x1f0f3a}=_0x2b7fb2[_0x571780(0x156)],_0x1df7e9=_0x2b7fb2['user'],_0x26fe66=await profile['findOne']({'email':_0x1df7e9[_0x571780(0x100)]}),_0x11c446=await master_shop[_0x571780(0x119)]();console[_0x571780(0x168)]('master',_0x11c446);const _0x4317d5=await units[_0x571780(0x119)]();if(_0x11c446[0x0][_0x571780(0xf1)]==_0x571780(0xec))var _0x428497=users['English'];else{if(_0x11c446[0x0][_0x571780(0xf1)]==_0x571780(0x130))var _0x428497=users[_0x571780(0x130)];else{if(_0x11c446[0x0][_0x571780(0xf1)]=='German')var _0x428497=users[_0x571780(0x15c)];else{if(_0x11c446[0x0]['language']==_0x571780(0x110))var _0x428497=users[_0x571780(0x110)];else{if(_0x11c446[0x0][_0x571780(0xf1)]=='French')var _0x428497=users[_0x571780(0x13c)];else{if(_0x11c446[0x0]['language']=='Portuguese\x20(BR)')var _0x428497=users[_0x571780(0x159)];else{if(_0x11c446[0x0][_0x571780(0xf1)]==_0x571780(0x17e))var _0x428497=users['Chinese'];else{if(_0x11c446[0x0]['language']==_0x571780(0x133))var _0x428497=users[_0x571780(0x10b)];}}}}}}}_0x93d96e['render'](_0x571780(0x176),{'success':_0x2b7fb2[_0x571780(0x144)](_0x571780(0x15d)),'errors':_0x2b7fb2[_0x571780(0x144)]('errors'),'role':_0x1df7e9,'profile':_0x26fe66,'master_shop':_0x11c446,'user':_0x4317d5,'language':_0x428497});}catch(_0x38f92e){console[_0x571780(0x168)](_0x38f92e);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x141),auth,async(_0xe6827f,_0x4ca88c)=>{const _0x471d19=a0_0x5def75;try{const {name:_0x58fdad,secondary_unit:_0x170999,products:_0x11c293}=_0xe6827f[_0x471d19(0x136)],_0x3df828=new units({'name':_0x58fdad,'secondary_unit':_0x170999,'products':_0x11c293}),_0x3c8d5e=await units['findOne']({'name':_0x58fdad});_0x3c8d5e?_0xe6827f[_0x471d19(0x144)](_0x471d19(0x151),_0x58fdad+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0xe6827f[_0x471d19(0x144)](_0x471d19(0x15d),_0x58fdad+_0x471d19(0xdf));const _0x26ac75=await _0x3df828[_0x471d19(0xde)]();_0x4ca88c[_0x471d19(0x135)]('/products/units');}catch(_0x38f27f){console[_0x471d19(0x168)](_0x38f27f);}}),router[a0_0x5def75(0x134)]('/units/:id',auth,async(_0xc620c9,_0x216162)=>{const _0x1bd27b=a0_0x5def75;try{const {username:_0x5cbf3f,email:_0x48f93a,role:_0xc9dcb9}=_0xc620c9[_0x1bd27b(0x156)],_0x1ba13a=_0xc620c9['user'],_0x26e43a=await profile[_0x1bd27b(0x142)]({'email':_0x1ba13a[_0x1bd27b(0x100)]}),_0x133479=await master_shop['find']();console[_0x1bd27b(0x168)](_0x1bd27b(0x14a),_0x133479);const _0x2b0d8a=_0xc620c9[_0x1bd27b(0x16c)]['id'],_0x2f004f=await units[_0x1bd27b(0x177)](_0x2b0d8a);if(_0x133479[0x0][_0x1bd27b(0xf1)]==_0x1bd27b(0xec))var _0x3c2cb4=users[_0x1bd27b(0xf4)];else{if(_0x133479[0x0][_0x1bd27b(0xf1)]==_0x1bd27b(0x130))var _0x3c2cb4=users[_0x1bd27b(0x130)];else{if(_0x133479[0x0][_0x1bd27b(0xf1)]==_0x1bd27b(0x15c))var _0x3c2cb4=users[_0x1bd27b(0x15c)];else{if(_0x133479[0x0]['language']=='Spanish')var _0x3c2cb4=users[_0x1bd27b(0x110)];else{if(_0x133479[0x0][_0x1bd27b(0xf1)]==_0x1bd27b(0x13c))var _0x3c2cb4=users[_0x1bd27b(0x13c)];else{if(_0x133479[0x0]['language']==_0x1bd27b(0x120))var _0x3c2cb4=users[_0x1bd27b(0x159)];else{if(_0x133479[0x0][_0x1bd27b(0xf1)]==_0x1bd27b(0x17e))var _0x3c2cb4=users['Chinese'];else{if(_0x133479[0x0]['language']==_0x1bd27b(0x133))var _0x3c2cb4=users[_0x1bd27b(0x10b)];}}}}}}}_0x216162[_0x1bd27b(0x14d)](_0x1bd27b(0x176),{'success':_0xc620c9[_0x1bd27b(0x144)]('success'),'errors':_0xc620c9[_0x1bd27b(0x144)](_0x1bd27b(0x151)),'role':_0x1ba13a,'profile':_0x26e43a,'master_shop':_0x133479,'user':_0x2f004f,'language':_0x3c2cb4});}catch(_0x8f070a){console[_0x1bd27b(0x168)](_0x8f070a);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0xe5),auth,async(_0x5d095f,_0x214321)=>{const _0x28cb4d=a0_0x5def75;try{const _0x313ee6=_0x5d095f[_0x28cb4d(0x16c)]['id'],_0x164baf=await units[_0x28cb4d(0xd4)](_0x313ee6,_0x5d095f[_0x28cb4d(0x136)]);_0x5d095f[_0x28cb4d(0x144)](_0x28cb4d(0x15d),'unit\x20data\x20update\x20successfully'),_0x214321[_0x28cb4d(0x135)](_0x28cb4d(0x122));}catch(_0x299242){console[_0x28cb4d(0x168)](_0x299242);}}),router[a0_0x5def75(0x134)]('/units/delete/:id',auth,async(_0x30d413,_0x172460)=>{const _0x44a3dc=a0_0x5def75;try{const _0x47be5e=_0x30d413[_0x44a3dc(0x16c)]['id'],_0x4fe8f6=await units[_0x44a3dc(0xd6)](_0x47be5e);_0x30d413[_0x44a3dc(0x144)](_0x44a3dc(0x15d),'unit\x20data\x20delete\x20successfully'),_0x172460['redirect'](_0x44a3dc(0x122));}catch(_0x20c36a){console[_0x44a3dc(0x168)](_0x20c36a);}});function a0_0x37b8(_0x20ad68,_0x2f3614){const _0x466382=a0_0x4663();return a0_0x37b8=function(_0x37b897,_0x346e42){_0x37b897=_0x37b897-0xd2;let _0x1e886a=_0x466382[_0x37b897];return _0x1e886a;},a0_0x37b8(_0x20ad68,_0x2f3614);}const storage=multer[a0_0x5def75(0x160)]({'destination':(_0x32b327,_0x2d58eb,_0x9f9300)=>{_0x9f9300(null,'public/upload');},'filename':(_0x52dc89,_0x5f1f75,_0xf4860e)=>{const _0x18572d=a0_0x5def75;_0xf4860e(null,Date[_0x18572d(0xda)]()+_0x5f1f75[_0x18572d(0xff)]);}}),upload=multer({'storage':storage});router[a0_0x5def75(0x134)]('/view',auth,async(_0x4d099c,_0x3b17cf)=>{const _0x2cb2fc=a0_0x5def75;try{const {username:_0xd784c1,email:_0x55211c,role:_0x48ac83}=_0x4d099c[_0x2cb2fc(0x156)],_0x44f80f=_0x4d099c[_0x2cb2fc(0x156)],_0x22b205=await profile[_0x2cb2fc(0x142)]({'email':_0x44f80f['email']}),_0x54260f={'year':_0x2cb2fc(0xe7),'month':'long','day':_0x2cb2fc(0xe7)},_0x401ea7=await master_shop[_0x2cb2fc(0x119)]();console[_0x2cb2fc(0x168)](_0x2cb2fc(0x131),_0x401ea7);const _0x4b6c71=await product['find']();console[_0x2cb2fc(0x168)](_0x2cb2fc(0x128),_0x4b6c71);const _0x33e4f9=await warehouse[_0x2cb2fc(0xe9)]([{'$unwind':_0x2cb2fc(0x124)},{'$lookup':{'from':_0x2cb2fc(0xe6),'localField':_0x2cb2fc(0x183),'foreignField':_0x2cb2fc(0x180),'as':_0x2cb2fc(0x138)}},{'$unwind':_0x2cb2fc(0x17b)},{'$project':{'product_name':_0x2cb2fc(0x12e),'product_stock':_0x2cb2fc(0xe8)}},{'$group':{'_id':_0x2cb2fc(0x121),'product_stock':{'$sum':_0x2cb2fc(0xf9)}}}]);console[_0x2cb2fc(0x168)]('Products\x20warehouse_data',_0x33e4f9),_0x33e4f9[_0x2cb2fc(0xf6)](_0x4e973a=>{const _0x5c1517=_0x4b6c71['map'](_0x33d888=>{const _0xe60234=a0_0x37b8;_0x33d888[_0xe60234(0x180)]==_0x4e973a['_id']&&(_0x33d888['stock']=parseInt(_0x33d888[_0xe60234(0x129)])+parseInt(_0x4e973a['product_stock']));});}),console[_0x2cb2fc(0x168)](_0x2cb2fc(0x128),_0x4b6c71);if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0xec))var _0x37d563=users[_0x2cb2fc(0xf4)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x130))var _0x37d563=users[_0x2cb2fc(0x130)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x15c))var _0x37d563=users[_0x2cb2fc(0x15c)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]=='Spanish')var _0x37d563=users[_0x2cb2fc(0x110)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x13c))var _0x37d563=users[_0x2cb2fc(0x13c)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x120))var _0x37d563=users[_0x2cb2fc(0x159)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x17e))var _0x37d563=users[_0x2cb2fc(0x17e)];else{if(_0x401ea7[0x0][_0x2cb2fc(0xf1)]==_0x2cb2fc(0x133))var _0x37d563=users[_0x2cb2fc(0x10b)];}}}}}}}_0x3b17cf[_0x2cb2fc(0x14d)]('products',{'success':_0x4d099c['flash']('success'),'errors':_0x4d099c[_0x2cb2fc(0x144)](_0x2cb2fc(0x151)),'alldata':_0x4b6c71,'profile':_0x22b205,'master_shop':_0x401ea7,'role':_0x44f80f,'product_stock':_0x33e4f9,'language':_0x37d563});}catch(_0x24e360){console[_0x2cb2fc(0x168)](_0x24e360);}}),router['get']('/view/add_products',auth,async(_0x6ff1,_0x933af3)=>{const _0x4d8ffd=a0_0x5def75;try{const {username:_0x266166,email:_0x32dd79,role:_0x5735b9}=_0x6ff1[_0x4d8ffd(0x156)],_0xc792e8=_0x6ff1['user'],_0xee4de=await profile[_0x4d8ffd(0x142)]({'email':_0xc792e8[_0x4d8ffd(0x100)]}),_0x5c38c2=await master_shop[_0x4d8ffd(0x119)]();console[_0x4d8ffd(0x168)](_0x4d8ffd(0x14a),_0x5c38c2);const _0x427659=await categories[_0x4d8ffd(0x119)]({}),_0x2cc93e=await brands[_0x4d8ffd(0x119)]({}),_0x3a7ab3=await units['find']({}),_0xe7a89f=await warehouse[_0x4d8ffd(0x119)]({'status':'Enabled'});if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]=='English\x20(US)')var _0x3739eb=users['English'];else{if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]=='Hindi')var _0x3739eb=users['Hindi'];else{if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]==_0x4d8ffd(0x15c))var _0x3739eb=users[_0x4d8ffd(0x15c)];else{if(_0x5c38c2[0x0]['language']=='Spanish')var _0x3739eb=users[_0x4d8ffd(0x110)];else{if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]==_0x4d8ffd(0x13c))var _0x3739eb=users[_0x4d8ffd(0x13c)];else{if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]==_0x4d8ffd(0x120))var _0x3739eb=users['Portuguese'];else{if(_0x5c38c2[0x0][_0x4d8ffd(0xf1)]==_0x4d8ffd(0x17e))var _0x3739eb=users['Chinese'];else{if(_0x5c38c2[0x0]['language']=='Arabic\x20(ae)')var _0x3739eb=users[_0x4d8ffd(0x10b)];}}}}}}}_0x933af3['render'](_0x4d8ffd(0xd7),{'success':_0x6ff1[_0x4d8ffd(0x144)](_0x4d8ffd(0x15d)),'errors':_0x6ff1['flash'](_0x4d8ffd(0x151)),'role':_0xc792e8,'profile':_0xee4de,'categories':_0x427659,'brands':_0x2cc93e,'master_shop':_0x5c38c2,'units':_0x3a7ab3,'language':_0x3739eb,'find_data':_0xe7a89f});}catch(_0x23ca3c){console[_0x4d8ffd(0x168)](_0x23ca3c);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x179),auth,upload[a0_0x5def75(0x16a)](a0_0x5def75(0xe3)),async(_0x52e67e,_0x28d0e1)=>{const _0x537fc8=a0_0x5def75;try{const {name:_0xbc4999,category:_0x318bce,brand:_0x5b54bc,unit:_0x2142b8,alertquantity:_0x5a9fc4,stock:_0x398283,product_code:_0x533e92,warehouse:_0x2f3718,primary_ItemCode:_0x5cb4bb,second_ItemCode:_0x518470,second_unit:_0x54857d,maxPerUnit:_0x27ce85,MaxPerProduct:_0x2bdbcf}=_0x52e67e[_0x537fc8(0x136)],_0x58e410=_0x52e67e['file']?.[_0x537fc8(0x17a)]||_0x537fc8(0x13a),_0x20ed0b=new product({'image':_0x58e410,'name':_0xbc4999,'category':_0x318bce,'brand':_0x5b54bc,'unit':_0x2142b8,'alertquantity':_0x5a9fc4,'stock':_0x398283,'product_code':_0x533e92,'warehouse':_0x2f3718,'primary_code':_0x5cb4bb,'secondary_code':_0x518470,'second_unit':_0x54857d,'maxStocks':_0x2bdbcf,'maxProdPerUnit':_0x27ce85}),_0x14eaba=await _0x20ed0b['save'](),_0x3c8f74=await categories[_0x537fc8(0x142)]({'name':_0x318bce});_0x3c8f74['products']=parseInt(_0x3c8f74[_0x537fc8(0xe6)])+0x1,await _0x3c8f74[_0x537fc8(0xde)]();const _0x502388=await brands[_0x537fc8(0x142)]({'name':_0x5b54bc});_0x502388['products']=parseInt(_0x502388[_0x537fc8(0xe6)])+0x1,await _0x502388[_0x537fc8(0xde)]();const _0x32cc93=await units[_0x537fc8(0x142)]({'name':_0x2142b8});_0x32cc93['products']=parseInt(_0x32cc93['products'])+0x1,await _0x32cc93['save'](),_0x52e67e['flash'](_0x537fc8(0x15d),_0x537fc8(0x155)),_0x28d0e1[_0x537fc8(0x135)]('/products/view');}catch(_0x541cc8){console[_0x537fc8(0x168)](_0x541cc8);}}),router[a0_0x5def75(0x134)](a0_0x5def75(0x10d),auth,async(_0x32e8c0,_0x54ea9a)=>{const _0x589835=a0_0x5def75;try{const {username:_0x39b520,email:_0x1a615c,role:_0x1e17c2}=_0x32e8c0[_0x589835(0x156)],_0x440d53=_0x32e8c0['user'],_0x20250f=await profile[_0x589835(0x142)]({'email':_0x440d53[_0x589835(0x100)]}),_0x3cf2b2=await master_shop[_0x589835(0x119)]();console[_0x589835(0x168)](_0x589835(0x188),_0x3cf2b2);const _0x1ce665=_0x32e8c0[_0x589835(0x16c)]['id'],_0x51e8f2=await product[_0x589835(0x177)](_0x1ce665),_0x554159=await categories[_0x589835(0x119)]({}),_0xfe9524=await brands[_0x589835(0x119)]({}),_0x28a429=await units['find']({}),_0x148a08=await warehouse['find']({'status':_0x589835(0x139)}),_0x42c267=await units[_0x589835(0xe9)]([{'$group':{'_id':_0x589835(0x108),'secondaryunit':{'$first':_0x589835(0xe2)}}}]);if(_0x3cf2b2[0x0]['language']=='English\x20(US)')var _0x3ec43d=users[_0x589835(0xf4)];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]==_0x589835(0x130))var _0x3ec43d=users[_0x589835(0x130)];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]=='German')var _0x3ec43d=users['German'];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]=='Spanish')var _0x3ec43d=users[_0x589835(0x110)];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]=='French')var _0x3ec43d=users[_0x589835(0x13c)];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]=='Portuguese\x20(BR)')var _0x3ec43d=users[_0x589835(0x159)];else{if(_0x3cf2b2[0x0]['language']==_0x589835(0x17e))var _0x3ec43d=users[_0x589835(0x17e)];else{if(_0x3cf2b2[0x0][_0x589835(0xf1)]==_0x589835(0x133))var _0x3ec43d=users[_0x589835(0x10b)];}}}}}}}_0x54ea9a[_0x589835(0x14d)](_0x589835(0x161),{'success':_0x32e8c0['flash'](_0x589835(0x15d)),'errors':_0x32e8c0[_0x589835(0x144)](_0x589835(0x151)),'role':_0x440d53,'profile':_0x20250f,'alldata':_0x51e8f2,'categories':_0x554159,'brands':_0xfe9524,'master_shop':_0x3cf2b2,'units':_0x28a429,'secondunit':_0x42c267,'find_data':_0x148a08,'language':_0x3ec43d});}catch(_0xb63bea){console[_0x589835(0x168)](_0xb63bea);}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x10d),auth,upload[a0_0x5def75(0x16a)]('image'),async(_0x35bff3,_0x59826e)=>{const _0xf2c1fc=a0_0x5def75;try{console[_0xf2c1fc(0x168)]('hello');const _0x3eb756=_0x35bff3[_0xf2c1fc(0x16c)]['id'],_0x13db6b=await product[_0xf2c1fc(0x177)](_0x3eb756),{image:_0x4be9f1,name:_0xcb860e,category:_0x43f851,brand:_0x43e1c8,sku:_0x5db3ae,unit:_0x1e53ca,alertquantity:_0x80b79,product_code:_0x273bf5,warehouse:_0x15d94a,primary_ItemCode:_0x6ee5ba,second_ItemCode:_0x5a6b91,second_unit:_0x363242,maxPerUnit:_0xeac046,MaxPerProduct:_0x5bf0a7,prod_catdata:_0xd3d9b1}=_0x35bff3[_0xf2c1fc(0x136)];_0x35bff3[_0xf2c1fc(0x185)]&&(_0x13db6b[_0xf2c1fc(0xe3)]=_0x35bff3['file'][_0xf2c1fc(0x17a)]);_0x13db6b['name']=_0xcb860e,_0x13db6b[_0xf2c1fc(0xe1)]=_0x43f851,_0x13db6b[_0xf2c1fc(0xfc)]=_0x43e1c8,_0x13db6b[_0xf2c1fc(0x157)]=_0x5db3ae,_0x13db6b['unit']=_0x1e53ca,_0x13db6b[_0xf2c1fc(0x12d)]=_0x80b79,_0x13db6b[_0xf2c1fc(0xd8)]=_0x273bf5,_0x13db6b['warehouse']=_0x15d94a,_0x13db6b[_0xf2c1fc(0x105)]=_0x6ee5ba,_0x13db6b[_0xf2c1fc(0x186)]=_0x5a6b91,_0x13db6b['secondary_unit']=_0x363242,_0x13db6b[_0xf2c1fc(0x10e)]=_0x5bf0a7,_0x13db6b[_0xf2c1fc(0x104)]=_0xeac046,_0x13db6b[_0xf2c1fc(0xfd)]=_0xd3d9b1;const _0x21cba5=await _0x13db6b['save']();console[_0xf2c1fc(0x168)](_0xf2c1fc(0x123),_0x13db6b),_0x35bff3['flash']('success',_0xf2c1fc(0x127)),_0x59826e['redirect'](_0xf2c1fc(0x166));}catch(_0x585168){console[_0xf2c1fc(0x168)](_0x585168);}}),router[a0_0x5def75(0x134)]('/barcode/:id',auth,async(_0x1b2aac,_0x5a98f7)=>{const _0x1aecef=a0_0x5def75;try{const {username:_0x1f1e97,email:_0x17f2e5,role:_0x5a5dcf}=_0x1b2aac[_0x1aecef(0x156)],_0x50445d=_0x1b2aac[_0x1aecef(0x156)],_0x372603=await profile[_0x1aecef(0x142)]({'email':_0x50445d['email']}),_0x169091=await master_shop[_0x1aecef(0x119)]();console[_0x1aecef(0x168)](_0x1aecef(0x164),_0x169091);const _0x3b374e=_0x1b2aac[_0x1aecef(0x16c)]['id'],_0x43f65e=await product[_0x1aecef(0x177)](_0x3b374e);console[_0x1aecef(0x168)](_0x1aecef(0x150),_0x43f65e);if(_0x169091[0x0][_0x1aecef(0xf1)]=='English\x20(US)')var _0x3c7e55=users[_0x1aecef(0xf4)];else{if(_0x169091[0x0][_0x1aecef(0xf1)]==_0x1aecef(0x130))var _0x3c7e55=users[_0x1aecef(0x130)];else{if(_0x169091[0x0][_0x1aecef(0xf1)]==_0x1aecef(0x15c))var _0x3c7e55=users[_0x1aecef(0x15c)];else{if(_0x169091[0x0]['language']==_0x1aecef(0x110))var _0x3c7e55=users[_0x1aecef(0x110)];else{if(_0x169091[0x0][_0x1aecef(0xf1)]=='French')var _0x3c7e55=users['French'];else{if(_0x169091[0x0]['language']==_0x1aecef(0x120))var _0x3c7e55=users[_0x1aecef(0x159)];else{if(_0x169091[0x0]['language']==_0x1aecef(0x17e))var _0x3c7e55=users[_0x1aecef(0x17e)];else{if(_0x169091[0x0]['language']==_0x1aecef(0x133))var _0x3c7e55=users[_0x1aecef(0x10b)];}}}}}}}_0x5a98f7['render'](_0x1aecef(0x173),{'success':_0x1b2aac[_0x1aecef(0x144)]('success'),'errors':_0x1b2aac['flash']('errors'),'role':_0x50445d,'profile':_0x372603,'alldata':_0x43f65e,'master_shop':_0x169091,'language':_0x3c7e55});}catch(_0x4b499c){console[_0x1aecef(0x168)](_0x4b499c);}}),router['get']('/products_export_migrate_file',auth,async(_0x439417,_0x518e67)=>{const _0x1d6ad1=a0_0x5def75;try{const _0x1212ea=new excelJS[(_0x1d6ad1(0x14e))](),_0x461088=_0x1212ea[_0x1d6ad1(0x10a)]('Products');return _0x461088['columns']=[{'header':_0x1d6ad1(0x17c),'key':_0x1d6ad1(0x17d),'width':0xa},{'header':'Brands','key':_0x1d6ad1(0x16e),'width':0xa},{'header':_0x1d6ad1(0x16b),'key':_0x1d6ad1(0x113),'width':0xa},{'header':_0x1d6ad1(0x169),'key':_0x1d6ad1(0xef),'width':0xa},{'header':_0x1d6ad1(0x15b),'key':'MaxperUnits','width':0xa},{'header':'Primary_Code','key':'ProductCode','width':0xa},{'header':_0x1d6ad1(0xed),'key':_0x1d6ad1(0xd5),'width':0xa},{'header':_0x1d6ad1(0x126),'key':_0x1d6ad1(0xd5),'width':0xa},{'header':_0x1d6ad1(0x11b),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x1d6ad1(0x162),'width':0xa},{'header':_0x1d6ad1(0xf3),'key':_0x1d6ad1(0x162),'width':0xa},{'header':_0x1d6ad1(0x147),'key':_0x1d6ad1(0x115),'width':0xa}],_0x518e67[_0x1d6ad1(0x148)](_0x1d6ad1(0x16d),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x518e67[_0x1d6ad1(0x148)](_0x1d6ad1(0xf2),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x1212ea[_0x1d6ad1(0x184)][_0x1d6ad1(0x107)](_0x518e67)[_0x1d6ad1(0x165)](()=>{const _0x7ac067=_0x1d6ad1;_0x518e67[_0x7ac067(0x15a)](0xc8);});}catch(_0x37023a){_0x518e67[_0x1d6ad1(0x15a)](0x190)[_0x1d6ad1(0x112)](_0x37023a);}});const storage1=multer[a0_0x5def75(0x160)]({'destination':(_0x99e51,_0x1e8c66,_0x2a8746)=>{const _0x15b577=a0_0x5def75;_0x2a8746(null,_0x15b577(0xf8));},'filename':(_0x2a793f,_0x53fcc5,_0x4dd3ec)=>{const _0xc8f845=a0_0x5def75;_0x4dd3ec(null,Date[_0xc8f845(0xda)]()+_0x53fcc5['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post']('/products_import_migrate_file',auth,uploadMigrate[a0_0x5def75(0x16a)]('migrate_product_fule'),async(_0x3ad867,_0x14fcb8)=>{const _0x1da23b=a0_0x5def75,_0x476998=_0x3ad867['file'][_0x1da23b(0x17a)],_0x49fdf5=await xlsx['readFile'](_0x1da23b(0xdc)+_0x476998);let _0x5c6aac=_0x49fdf5[_0x1da23b(0x152)],_0x27b3a0=xlsx[_0x1da23b(0x10f)][_0x1da23b(0x116)](_0x49fdf5[_0x1da23b(0x163)][_0x5c6aac[0x0]]);for(const _0x49f4d4 of _0x27b3a0){const _0x4fa26e=_0x49f4d4[_0x1da23b(0x17c)],_0x312e09=_0x49f4d4[_0x1da23b(0x106)],_0x20320b=_0x49f4d4[_0x1da23b(0x16b)],_0x5a81e6=_0x49f4d4[_0x1da23b(0x169)],_0x215db3=_0x49f4d4[_0x1da23b(0x126)],_0x2c1c18=_0x49f4d4[_0x1da23b(0x11b)],_0x51d025=_0x49f4d4['Alert_QTY'],_0x74f3ff=_0x49f4d4['Primary_Code'],_0x2dfa6c=_0x49f4d4['Secondary_Code'],_0x59d45b=_0x49f4d4[_0x1da23b(0xf3)],_0x386459=_0x49f4d4['max_number_per_units'],_0x1410c2=_0x49f4d4[_0x1da23b(0x147)];try{let _0x162b3e=await categories[_0x1da23b(0x142)]({'name':_0x2c1c18});if(!_0x162b3e){const _0x4fc4b0=new categories({'name':_0x2c1c18,'products':'0'});_0x162b3e=await _0x4fc4b0[_0x1da23b(0xde)]();}let _0x389795=await brands[_0x1da23b(0x142)]({'name':_0x312e09});if(!_0x389795){const _0xc96c24=new brands({'name':_0x312e09,'products':'0'});_0x389795=await _0xc96c24[_0x1da23b(0xde)]();}let _0x25e774=await units[_0x1da23b(0x142)]({'name':_0x20320b,'secondary_unit':_0x5a81e6});if(!_0x25e774){const _0x1d1d95=new units({'name':_0x20320b,'secondary_unit':_0x5a81e6,'products':'0'});_0x25e774=await _0x1d1d95[_0x1da23b(0xde)]();}const _0x20bc30=await product[_0x1da23b(0x119)]({'name':_0x4fa26e,'category':_0x162b3e['name'],'brand':_0x389795[_0x1da23b(0x180)],'secondary_unit':_0x25e774['secondary_unit'],'product_code':_0x215db3});console[_0x1da23b(0x168)](_0x20bc30[_0x1da23b(0x172)]+_0x1da23b(0x11f)+_0x162b3e['name']+_0x1da23b(0x11f)+_0x389795[_0x1da23b(0x180)]+_0x1da23b(0x11f)+_0x25e774[_0x1da23b(0xeb)]+'\x20<>\x20'+_0x215db3+'\x20<>\x20'+_0x4fa26e);if(_0x20bc30['length']===0x0){const _0x1eb7fc=new product({'image':_0x1da23b(0x13a),'name':_0x4fa26e,'category':_0x162b3e['name'],'brand':_0x389795[_0x1da23b(0x180)],'unit':_0x25e774['name'],'alertquantity':_0x51d025,'product_code':_0x215db3,'secondary_unit':_0x25e774['secondary_unit'],'primary_code':_0x74f3ff,'secondary_code':_0x2dfa6c,'maxStocks':_0x59d45b,'maxProdPerUnit':_0x386459,'product_category':_0x1410c2}),_0x492b0a=await _0x1eb7fc['save']();_0x162b3e['products']=parseInt(_0x162b3e['products'])+0x1,await _0x162b3e[_0x1da23b(0xde)](),_0x389795[_0x1da23b(0xe6)]=parseInt(_0x389795[_0x1da23b(0xe6)])+0x1,await _0x389795[_0x1da23b(0xde)](),_0x25e774[_0x1da23b(0xe6)]=parseInt(_0x25e774[_0x1da23b(0xe6)])+0x1,await _0x25e774[_0x1da23b(0xde)](),_0x3ad867[_0x1da23b(0x144)](_0x1da23b(0x15d),_0x4fa26e+_0x1da23b(0x14c));}else{console[_0x1da23b(0x168)](_0x20bc30[0x0]);const _0x2d35e7=_0x20bc30[0x0];_0x2d35e7['category']=_0x162b3e['name'],_0x2d35e7[_0x1da23b(0xfc)]=_0x389795['name'],_0x2d35e7[_0x1da23b(0x12b)]=_0x25e774['name'],_0x2d35e7[_0x1da23b(0x12d)]=_0x51d025,_0x2d35e7[_0x1da23b(0xd8)]=_0x215db3,_0x2d35e7[_0x1da23b(0xeb)]=_0x25e774['secondary_unit'],_0x2d35e7['primary_code']=_0x74f3ff,_0x2d35e7[_0x1da23b(0x186)]=_0x2dfa6c,_0x2d35e7[_0x1da23b(0x10e)]=_0x59d45b,_0x2d35e7['maxProdPerUnit']=_0x386459,_0x2d35e7['product_category']=_0x1410c2;const _0x59cc60=await _0x2d35e7['save']();_0x3ad867[_0x1da23b(0x144)](_0x1da23b(0x15d),_0x59cc60['name']+'\x20Edit\x20Successfully');}}catch(_0x25e64c){_0x14fcb8[_0x1da23b(0x15a)](0x1f4)[_0x1da23b(0x181)]({'proderror':_0x25e64c[_0x1da23b(0x140)],'aproduct':_0x4fa26e});}}_0x14fcb8['redirect']('/products/view');}),router[a0_0x5def75(0x158)](a0_0x5def75(0x146),auth,async(_0x495bbd,_0x2b7eda)=>{const _0x4ebc5b=a0_0x5def75;try{console[_0x4ebc5b(0x168)](_0x495bbd[_0x4ebc5b(0x136)]);const {data_cateory:_0x3de138,datachoose:_0x1b8059}=_0x495bbd[_0x4ebc5b(0x136)];var _0x4fc4d2;if(_0x1b8059==_0x4ebc5b(0xfb))_0x4fc4d2=await product[_0x4ebc5b(0xe9)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x1b8059==_0x4ebc5b(0x111))_0x4fc4d2=await product[_0x4ebc5b(0xe9)]([{'$match':{'product_category':_0x3de138}},{'$group':{'_id':_0x4ebc5b(0x13f)}}]);else _0x1b8059==_0x4ebc5b(0x174)&&(_0x4fc4d2=await product[_0x4ebc5b(0xe9)]([{'$match':{'product_category':_0x3de138}},{'$group':{'_id':'$category'}}]));}_0x2b7eda[_0x4ebc5b(0x181)](_0x4fc4d2);}catch(_0xf88a4a){_0x2b7eda[_0x4ebc5b(0x181)]({'message':_0xf88a4a['message']});}}),router[a0_0x5def75(0x158)]('/filter_product',auth,async(_0x47d2de,_0xb25cbc)=>{const _0x5692bc=a0_0x5def75;try{const {data_choosing:_0xc4485c,data_selected:_0x36b046}=_0x47d2de['body'];var _0x1f5198;if(_0xc4485c==_0x5692bc(0xfb))_0x1f5198=await product[_0x5692bc(0xe9)]([{'$match':{'product_category':_0x36b046}}]);else{if(_0xc4485c=='brands')_0x1f5198=await product[_0x5692bc(0xe9)]([{'$match':{'brand':_0x36b046}}]);else _0xc4485c==_0x5692bc(0x174)&&(_0x1f5198=await product['aggregate']([{'$match':{'category':_0x36b046}}]));}_0xb25cbc['json'](_0x1f5198);}catch(_0x43b13f){_0xb25cbc[_0x5692bc(0x181)]({'message':_0x43b13f['message']});}}),router[a0_0x5def75(0x134)]('/print_barcode',auth,async(_0x497151,_0x48a81c)=>{const _0x11a92a=a0_0x5def75,_0x505a79=_0x497151[_0x11a92a(0x156)],_0x511709=await profile[_0x11a92a(0x142)]({'email':_0x505a79['email']}),_0x4fbaed=await master_shop[_0x11a92a(0x119)](),_0x48d73a=await product[_0x11a92a(0x119)]();if(_0x4fbaed[0x0]['language']==_0x11a92a(0xec))var _0x3b1493=users[_0x11a92a(0xf4)];else{if(_0x4fbaed[0x0][_0x11a92a(0xf1)]==_0x11a92a(0x130))var _0x3b1493=users['Hindi'];else{if(_0x4fbaed[0x0][_0x11a92a(0xf1)]==_0x11a92a(0x15c))var _0x3b1493=users[_0x11a92a(0x15c)];else{if(_0x4fbaed[0x0]['language']==_0x11a92a(0x110))var _0x3b1493=users[_0x11a92a(0x110)];else{if(_0x4fbaed[0x0][_0x11a92a(0xf1)]==_0x11a92a(0x13c))var _0x3b1493=users[_0x11a92a(0x13c)];else{if(_0x4fbaed[0x0][_0x11a92a(0xf1)]==_0x11a92a(0x120))var _0x3b1493=users[_0x11a92a(0x159)];else{if(_0x4fbaed[0x0][_0x11a92a(0xf1)]==_0x11a92a(0x17e))var _0x3b1493=users[_0x11a92a(0x17e)];else{if(_0x4fbaed[0x0]['language']==_0x11a92a(0x133))var _0x3b1493=users[_0x11a92a(0x10b)];}}}}}}}_0x48a81c[_0x11a92a(0x14d)](_0x11a92a(0x15f),{'success':_0x497151[_0x11a92a(0x144)](_0x11a92a(0x15d)),'errors':_0x497151['flash']('errors'),'role':_0x505a79,'profile':_0x511709,'products':_0x48d73a,'master_shop':_0x4fbaed,'language':_0x3b1493});}),router[a0_0x5def75(0x158)]('/barcode_data',auth,async(_0x59f0dc,_0x2905d3)=>{const _0x22b757=a0_0x5def75,_0x4731af=await product[_0x22b757(0x119)]();_0x2905d3[_0x22b757(0x181)]({'data':_0x4731af});}),router['post']('/barcode_filter',auth,async(_0x17440b,_0x4eac81)=>{const _0x2dd107=a0_0x5def75;try{const {dataProdCat:_0x2b93a6,dataProdIdentity:_0x363404}=_0x17440b[_0x2dd107(0x136)];var _0x1149ab;switch(_0x2b93a6){case'fg':switch(_0x363404){case'Brands':_0x1149ab=await product[_0x2dd107(0xe9)]([{'$match':{'product_category':_0x2dd107(0x154)}},{'$group':{'_id':_0x2dd107(0x13f)}},{'$project':{'brand':'$_id'}}]);break;case _0x2dd107(0x11b):_0x1149ab=await product['aggregate']([{'$match':{'product_category':_0x2dd107(0x154)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x2dd107(0x108)}}]);break;}break;case'rm':switch(_0x363404){case _0x2dd107(0x106):_0x1149ab=await product[_0x2dd107(0xe9)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x2dd107(0x13f)}},{'$project':{'brand':'$_id'}}]);break;case _0x2dd107(0x11b):_0x1149ab=await product[_0x2dd107(0xe9)]([{'$match':{'product_category':_0x2dd107(0x10c)}},{'$group':{'_id':_0x2dd107(0x11d)}},{'$project':{'category':_0x2dd107(0x108)}}]);break;}break;}_0x4eac81[_0x2dd107(0x181)](_0x1149ab);}catch(_0x373c16){_0x4eac81['json']({'message':_0x373c16[_0x2dd107(0x140)]});}}),router['post'](a0_0x5def75(0x145),auth,async(_0x33da45,_0x4185dc)=>{const _0x131019=a0_0x5def75;try{console[_0x131019(0x168)](_0x33da45[_0x131019(0x136)]);const {prod_cat:_0x37bb45,identity:_0x3abe81,valueData:_0x389a43,typeofbarcode:_0x10c3a8}=_0x33da45[_0x131019(0x136)];let _0x399516;switch(_0x37bb45){case'fg':if(_0x3abe81=='Brands')_0x399516=await product[_0x131019(0xe9)]([{'$match':{'product_category':_0x131019(0x154),'brand':_0x389a43}}]);else _0x3abe81==_0x131019(0x11b)&&(_0x399516=await product[_0x131019(0xe9)]([{'$match':{'product_category':_0x131019(0x154),'category':_0x389a43}}]));break;case'rm':if(_0x3abe81==_0x131019(0x106))_0x399516=await product[_0x131019(0xe9)]([{'$match':{'product_category':_0x131019(0x10c),'brand':_0x389a43}}]);else _0x3abe81==_0x131019(0x11b)&&(_0x399516=await product[_0x131019(0xe9)]([{'$match':{'product_category':_0x131019(0x10c),'category':_0x389a43}}]));break;}const _0x1bc8bd=_0x58f9bb=>_0x58f9bb*0x48,_0x4d0cd5={'width':0x3,'height':0x1},_0x3944e8=new PDFDocument({'margin':_0x1bc8bd(0.75),'size':[_0x1bc8bd(_0x4d0cd5[_0x131019(0x13b)]),_0x1bc8bd(_0x4d0cd5['height'])],'bufferPages':!![]}),_0x326b58=_0x399516[_0x131019(0x172)];for(let _0x47806e=0x0;_0x47806e<=_0x326b58;_0x47806e++){if(_0x47806e!=_0x326b58){const _0x16ba00=_0x399516[_0x47806e][_0x131019(0x180)],_0x466ae8=_0x399516[_0x47806e][_0x131019(0x105)],_0x482153=_0x399516[_0x47806e][_0x131019(0x186)],_0x5712c5=_0x399516[_0x47806e][_0x131019(0xd8)];var _0x4ea2f3;switch(_0x10c3a8){case'1':_0x4ea2f3=_0x466ae8;break;case'2':_0x4ea2f3=_0x482153;break;case'3':_0x4ea2f3=_0x5712c5;break;}const _0x92711a={'width':0xd2,'height':0x64},_0x3f7777={'width':_0x1bc8bd(_0x4d0cd5['width']),'height':_0x1bc8bd(_0x4d0cd5[_0x131019(0xfe)])},_0x5614e6=new Canvas();JsBarcode(_0x5614e6,_0x4ea2f3,{'format':_0x131019(0x103),'height':_0x92711a[_0x131019(0xfe)],'displayValue':!![],'text':_0x4ea2f3});const _0x5347d3=_0x5614e6[_0x131019(0x101)](),_0x37d9c4=_0x3f7777[_0x131019(0x13b)]/_0x92711a[_0x131019(0x13b)],_0x457966=_0x3f7777[_0x131019(0xfe)]/_0x92711a[_0x131019(0xfe)],_0x3670ab=Math[_0x131019(0x11a)](_0x37d9c4,_0x457966),_0x1c6c64=_0x92711a[_0x131019(0x13b)]*_0x3670ab,_0x3105f1=_0x92711a['height']*_0x3670ab,_0x397341=(_0x3f7777[_0x131019(0x13b)]-_0x1c6c64)/0x2,_0x3516a0=(_0x3f7777[_0x131019(0xfe)]-_0x3105f1)/0x2;_0x3944e8['image'](_0x5347d3,_0x397341,_0x3516a0,{'width':_0x1c6c64,'height':_0x3105f1}),_0x47806e!=_0x326b58&&_0x3944e8[_0x131019(0x102)]();}}const _0x749c9c=[];_0x3944e8['on'](_0x131019(0x182),_0x749c9c[_0x131019(0x178)][_0x131019(0x13d)](_0x749c9c)),_0x3944e8['on'](_0x131019(0x13e),()=>{const _0x347a3f=_0x131019,_0x28e503=Buffer[_0x347a3f(0xf5)](_0x749c9c),_0xe31c05=_0x28e503['toString'](_0x347a3f(0x109));_0x4185dc[_0x347a3f(0x181)]({'pdfContent':_0xe31c05});}),_0x3944e8['end']();}catch(_0x3832de){_0x4185dc[_0x131019(0x181)]({'message':_0x3832de[_0x131019(0x140)]});}}),router[a0_0x5def75(0x158)](a0_0x5def75(0x11e),auth,async(_0x588a0c,_0x40ff8b)=>{const _0x30526f=a0_0x5def75;try{console['log'](_0x588a0c['body']);const {prod_cat:_0x17e0d3,identity:_0x5a0c37,valueData:_0x9b2d10}=_0x588a0c['body'];let _0x565337;switch(_0x17e0d3){case'fg':if(_0x5a0c37==_0x30526f(0x106))_0x565337=await product[_0x30526f(0xe9)]([{'$match':{'product_category':_0x30526f(0x154),'brand':_0x9b2d10}}]);else _0x5a0c37==_0x30526f(0x11b)&&(_0x565337=await product[_0x30526f(0xe9)]([{'$match':{'product_category':_0x30526f(0x154),'category':_0x9b2d10}}]));break;case'rm':if(_0x5a0c37=='Brands')_0x565337=await product[_0x30526f(0xe9)]([{'$match':{'product_category':_0x30526f(0x10c),'brand':_0x9b2d10}}]);else _0x5a0c37==_0x30526f(0x11b)&&(_0x565337=await product[_0x30526f(0xe9)]([{'$match':{'product_category':_0x30526f(0x10c),'category':_0x9b2d10}}]));break;}_0x40ff8b['json']({'data':_0x565337});}catch(_0xde19f7){_0x40ff8b[_0x30526f(0x181)]({'message':_0xde19f7['message']});}}),router[a0_0x5def75(0x158)]('/print_barcode_single/:id',auth,async(_0x5c92c1,_0x59918e)=>{const _0x4bfb14=a0_0x5def75;try{const _0x78add2=_0x5c92c1['params']['id'],{copies:_0x1d65a2,typeofbarcode:_0x4d7798}=_0x5c92c1[_0x4bfb14(0x136)];var _0x2edf8c=await product['findById'](_0x78add2);const _0x21acf0=_0x36c27c=>_0x36c27c*0x48,_0x2de038={'width':0x3,'height':0x1},_0x570076=new PDFDocument({'margin':_0x21acf0(0.75),'size':[_0x21acf0(_0x2de038['width']),_0x21acf0(_0x2de038[_0x4bfb14(0xfe)])],'bufferPages':!![]}),_0x5b6952=_0x1d65a2,_0x3be3b7=_0x2edf8c['name'],_0x17b499=_0x2edf8c[_0x4bfb14(0x105)],_0x3e6371=_0x2edf8c['secondary_code'],_0x4caf8e=_0x2edf8c[_0x4bfb14(0xd8)];let _0x4fd11c;switch(_0x4d7798){case'1':_0x4fd11c=_0x17b499;break;case'2':_0x4fd11c=_0x3e6371;break;case'3':_0x4fd11c=_0x4caf8e;break;}const _0x4e4a16={'width':0xd2,'height':0x64},_0x397f50={'width':_0x21acf0(_0x2de038[_0x4bfb14(0x13b)]),'height':_0x21acf0(_0x2de038[_0x4bfb14(0xfe)])};for(let _0x512e3d=0x1;_0x512e3d<=_0x5b6952;_0x512e3d++){const _0x55865e=new Canvas();JsBarcode(_0x55865e,_0x4fd11c,{'format':_0x4bfb14(0x103),'height':_0x4e4a16[_0x4bfb14(0xfe)],'displayValue':!![],'text':_0x4fd11c});const _0x479e21=_0x55865e['toBuffer'](),_0x4c9ea1=_0x397f50[_0x4bfb14(0x13b)]/_0x4e4a16[_0x4bfb14(0x13b)],_0x3afea3=_0x397f50['height']/_0x4e4a16['height'],_0x35796c=Math[_0x4bfb14(0x11a)](_0x4c9ea1,_0x3afea3),_0x1133ec=_0x4e4a16[_0x4bfb14(0x13b)]*_0x35796c,_0x58dd15=_0x4e4a16['height']*_0x35796c,_0x230949=(_0x397f50[_0x4bfb14(0x13b)]-_0x1133ec)/0x2,_0x5032e2=(_0x397f50[_0x4bfb14(0xfe)]-_0x58dd15)/0x2;_0x570076[_0x4bfb14(0xe3)](_0x479e21,_0x230949,_0x5032e2,{'width':_0x1133ec,'height':_0x58dd15}),_0x512e3d!=_0x5b6952&&_0x570076[_0x4bfb14(0x102)]();}const _0x3ef1ba=[];_0x570076['on'](_0x4bfb14(0x182),_0x3ef1ba['push'][_0x4bfb14(0x13d)](_0x3ef1ba)),_0x570076['on'](_0x4bfb14(0x13e),()=>{const _0x5284b7=_0x4bfb14,_0x52c600=Buffer[_0x5284b7(0xf5)](_0x3ef1ba),_0x33431a=_0x52c600[_0x5284b7(0xd2)](_0x5284b7(0x109));_0x59918e['json']({'pdfContent':_0x33431a});}),_0x570076[_0x4bfb14(0x13e)]();}catch(_0x3fbf60){_0x59918e[_0x4bfb14(0x181)]({'message':_0x3fbf60[_0x4bfb14(0x140)]});}}),module[a0_0x5def75(0x12c)]=router;