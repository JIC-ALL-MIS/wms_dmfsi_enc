const a0_0x1e18d3=a0_0x2c67;(function(_0x127c3d,_0x4afe6f){const _0x4bf9b2=a0_0x2c67,_0x2fe03d=_0x127c3d();while(!![]){try{const _0x2f75fd=-parseInt(_0x4bf9b2(0x79))/0x1+-parseInt(_0x4bf9b2(0x9c))/0x2+parseInt(_0x4bf9b2(0x123))/0x3+parseInt(_0x4bf9b2(0x125))/0x4+parseInt(_0x4bf9b2(0x115))/0x5+-parseInt(_0x4bf9b2(0xc5))/0x6+parseInt(_0x4bf9b2(0x107))/0x7*(-parseInt(_0x4bf9b2(0x120))/0x8);if(_0x2f75fd===_0x4afe6f)break;else _0x2fe03d['push'](_0x2fe03d['shift']());}catch(_0x3f3caa){_0x2fe03d['push'](_0x2fe03d['shift']());}}}(a0_0x4e25,0x6b58d));const express=require('express'),res=require(a0_0x1e18d3(0x109)),app=express(),router=express[a0_0x1e18d3(0x116)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x1e18d3(0xf2)),auth=require(a0_0x1e18d3(0x105)),users=require('../public/language/languages.json'),excelJS=require(a0_0x1e18d3(0x130)),xlsx=require(a0_0x1e18d3(0x110)),JsBarcode=require(a0_0x1e18d3(0x98)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x1e18d3(0xd4));router['get'](a0_0x1e18d3(0xc0),auth,async(_0x1c718b,_0x4bf06a)=>{const _0x46cb15=a0_0x1e18d3;try{const {username:_0x23a130,email:_0x1e665c,role:_0xf735f2}=_0x1c718b['user'],_0x27c3cc=_0x1c718b['user'],_0x2484e8=await profile[_0x46cb15(0x7e)]({'email':_0x27c3cc[_0x46cb15(0x91)]}),_0x4292b5=await master_shop['find']();console[_0x46cb15(0xcf)](_0x46cb15(0x78),_0x4292b5);const _0x2e9311=await categories[_0x46cb15(0xa0)]();if(_0x4292b5[0x0]['language']==_0x46cb15(0xb6))var _0x3b0869=users[_0x46cb15(0xf3)];else{if(_0x4292b5[0x0]['language']==_0x46cb15(0xf5))var _0x3b0869=users[_0x46cb15(0xf5)];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]==_0x46cb15(0xa6))var _0x3b0869=users[_0x46cb15(0xa6)];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]==_0x46cb15(0x82))var _0x3b0869=users[_0x46cb15(0x82)];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]==_0x46cb15(0xb3))var _0x3b0869=users['French'];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]==_0x46cb15(0xeb))var _0x3b0869=users['Portuguese'];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]=='Chinese')var _0x3b0869=users[_0x46cb15(0xac)];else{if(_0x4292b5[0x0][_0x46cb15(0x83)]==_0x46cb15(0xbf))var _0x3b0869=users['Arabic'];}}}}}}}_0x4bf06a[_0x46cb15(0xb4)](_0x46cb15(0xc8),{'success':_0x1c718b[_0x46cb15(0x102)](_0x46cb15(0xb9)),'errors':_0x1c718b[_0x46cb15(0x102)](_0x46cb15(0x108)),'role':_0x27c3cc,'profile':_0x2484e8,'user':_0x2e9311,'master_shop':_0x4292b5,'language':_0x3b0869});}catch(_0xcb8839){console[_0x46cb15(0xcf)](_0xcb8839);}}),router[a0_0x1e18d3(0x90)]('/categories',auth,async(_0x1d75cb,_0x43dfd2)=>{const _0x66235a=a0_0x1e18d3;try{const {name:_0x5291b8,products:_0x52722a}=_0x1d75cb[_0x66235a(0xff)],_0x2d3a8a=new categories({'name':_0x5291b8,'products':_0x52722a}),_0x129230=await categories[_0x66235a(0x7e)]({'name':_0x5291b8});_0x129230?_0x1d75cb[_0x66235a(0x102)](_0x66235a(0x108),_0x5291b8+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1d75cb[_0x66235a(0x102)](_0x66235a(0xb9),_0x5291b8+_0x66235a(0xcb));const _0x447ce1=await _0x2d3a8a[_0x66235a(0x114)]();_0x43dfd2[_0x66235a(0x12f)](_0x66235a(0xdc));}catch(_0xb90ddb){console[_0x66235a(0xcf)](_0xb90ddb);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0x122),auth,async(_0x1c4b60,_0x3a46ff)=>{const _0x1374a0=a0_0x1e18d3;try{const {username:_0x134ee8,email:_0x406343,role:_0x5a2293}=_0x1c4b60[_0x1374a0(0x93)],_0x35d3e8=_0x1c4b60['user'],_0x55620b=await profile[_0x1374a0(0x7e)]({'email':_0x35d3e8['email']}),_0x225673=await master_shop[_0x1374a0(0xa0)]();console[_0x1374a0(0xcf)]('master',_0x225673);const _0x5deb2c=_0x1c4b60[_0x1374a0(0xea)]['id'];console[_0x1374a0(0xcf)](_0x5deb2c);const _0x23499e=await categories[_0x1374a0(0xba)](_0x5deb2c);if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xb6))var _0x1ac0e3=users[_0x1374a0(0xf3)];else{if(_0x225673[0x0][_0x1374a0(0x83)]=='Hindi')var _0x1ac0e3=users[_0x1374a0(0xf5)];else{if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xa6))var _0x1ac0e3=users[_0x1374a0(0xa6)];else{if(_0x225673[0x0][_0x1374a0(0x83)]=='Spanish')var _0x1ac0e3=users[_0x1374a0(0x82)];else{if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xb3))var _0x1ac0e3=users[_0x1374a0(0xb3)];else{if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xeb))var _0x1ac0e3=users[_0x1374a0(0xca)];else{if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xac))var _0x1ac0e3=users['Chinese'];else{if(_0x225673[0x0][_0x1374a0(0x83)]==_0x1374a0(0xbf))var _0x1ac0e3=users['Arabic'];}}}}}}}_0x3a46ff['render'](_0x1374a0(0xc8),{'success':_0x1c4b60[_0x1374a0(0x102)](_0x1374a0(0xb9)),'errors':_0x1c4b60[_0x1374a0(0x102)](_0x1374a0(0x108)),'role':_0x35d3e8,'profile':_0x55620b,'master_shop':_0x225673,'user':_0x23499e,'language':_0x1ac0e3});}catch(_0xde7c6f){console[_0x1374a0(0xcf)](_0xde7c6f);}}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0x122),auth,async(_0x4fdae5,_0x281c96)=>{const _0x5d329f=a0_0x1e18d3;try{const _0x1cfff0=_0x4fdae5[_0x5d329f(0xea)]['id'],_0x50d323=await categories[_0x5d329f(0xf4)](_0x1cfff0,_0x4fdae5['body']);_0x4fdae5[_0x5d329f(0x102)]('success',''+users[_0x5d329f(0xf1)]),_0x281c96[_0x5d329f(0x12f)](_0x5d329f(0xdc));}catch(_0x5ac26d){console['log'](_0x5ac26d);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0x97),auth,async(_0x435302,_0x2b9ae2)=>{const _0x1105b4=a0_0x1e18d3;try{const _0x53e23a=_0x435302[_0x1105b4(0xea)]['id'],_0x54d45d=await categories[_0x1105b4(0xcc)](_0x53e23a);_0x435302['flash'](_0x1105b4(0xb9),_0x1105b4(0x7a)),_0x2b9ae2[_0x1105b4(0x12f)]('/products/categories');}catch(_0x5b503a){console[_0x1105b4(0xcf)](_0x5b503a);}}),router[a0_0x1e18d3(0x7c)]('/brands',auth,async(_0x37d7a6,_0x495c24)=>{const _0x101797=a0_0x1e18d3;try{const {username:_0x402f2e,email:_0x2f8d80,role:_0x19448a}=_0x37d7a6[_0x101797(0x93)],_0x1fb4bd=_0x37d7a6[_0x101797(0x93)],_0x4289aa=await profile['findOne']({'email':_0x1fb4bd[_0x101797(0x91)]}),_0x2cce4f=await master_shop['find']();console[_0x101797(0xcf)](_0x101797(0x78),_0x2cce4f);const _0x2a67a2=await brands[_0x101797(0xa0)]();if(_0x2cce4f[0x0][_0x101797(0x83)]=='English\x20(US)')var _0x2a6f48=users[_0x101797(0xf3)];else{if(_0x2cce4f[0x0][_0x101797(0x83)]=='Hindi')var _0x2a6f48=users[_0x101797(0xf5)];else{if(_0x2cce4f[0x0][_0x101797(0x83)]==_0x101797(0xa6))var _0x2a6f48=users[_0x101797(0xa6)];else{if(_0x2cce4f[0x0]['language']==_0x101797(0x82))var _0x2a6f48=users[_0x101797(0x82)];else{if(_0x2cce4f[0x0]['language']==_0x101797(0xb3))var _0x2a6f48=users[_0x101797(0xb3)];else{if(_0x2cce4f[0x0][_0x101797(0x83)]==_0x101797(0xeb))var _0x2a6f48=users[_0x101797(0xca)];else{if(_0x2cce4f[0x0]['language']=='Chinese')var _0x2a6f48=users[_0x101797(0xac)];else{if(_0x2cce4f[0x0]['language']==_0x101797(0xbf))var _0x2a6f48=users[_0x101797(0x10e)];}}}}}}}_0x495c24['render'](_0x101797(0x100),{'success':_0x37d7a6[_0x101797(0x102)](_0x101797(0xb9)),'errors':_0x37d7a6[_0x101797(0x102)](_0x101797(0x108)),'role':_0x1fb4bd,'profile':_0x4289aa,'master_shop':_0x2cce4f,'user':_0x2a67a2,'language':_0x2a6f48});}catch(_0x53c4bb){console[_0x101797(0xcf)](_0x53c4bb);}}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0x87),auth,async(_0x4cb301,_0x53b778)=>{const _0x1e7fd3=a0_0x1e18d3;try{const {name:_0x5da07f,products:_0x3d1c4c}=_0x4cb301[_0x1e7fd3(0xff)],_0x577313=new brands({'name':_0x5da07f,'products':_0x3d1c4c}),_0x557b7b=await brands[_0x1e7fd3(0x7e)]({'name':_0x5da07f});_0x557b7b?_0x4cb301[_0x1e7fd3(0x102)](_0x1e7fd3(0x108),_0x5da07f+_0x1e7fd3(0xde)):_0x4cb301[_0x1e7fd3(0x102)](_0x1e7fd3(0xb9),_0x5da07f+_0x1e7fd3(0xda));const _0x1b815f=await _0x577313[_0x1e7fd3(0x114)]();_0x53b778[_0x1e7fd3(0x12f)](_0x1e7fd3(0xad));}catch(_0x365db9){console[_0x1e7fd3(0xcf)](_0x365db9);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0x11f),auth,async(_0x4e0a2e,_0x3a9cfd)=>{const _0x1a4349=a0_0x1e18d3;try{const {username:_0x3e9d9a,email:_0x2a147d,role:_0x50c6ae}=_0x4e0a2e['user'],_0x2b602a=_0x4e0a2e[_0x1a4349(0x93)],_0xff8402=await profile['findOne']({'email':_0x2b602a['email']}),_0x1b68ab=await master_shop[_0x1a4349(0xa0)]();console[_0x1a4349(0xcf)](_0x1a4349(0x78),_0x1b68ab);const _0x16c63d=_0x4e0a2e[_0x1a4349(0xea)]['id'];console['log'](_0x16c63d);const _0x486100=await brands[_0x1a4349(0xba)](_0x16c63d);if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0xb6))var _0x5c6eb1=users[_0x1a4349(0xf3)];else{if(_0x1b68ab[0x0]['language']==_0x1a4349(0xf5))var _0x5c6eb1=users[_0x1a4349(0xf5)];else{if(_0x1b68ab[0x0]['language']==_0x1a4349(0xa6))var _0x5c6eb1=users[_0x1a4349(0xa6)];else{if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0x82))var _0x5c6eb1=users[_0x1a4349(0x82)];else{if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0xb3))var _0x5c6eb1=users[_0x1a4349(0xb3)];else{if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0xeb))var _0x5c6eb1=users['Portuguese'];else{if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0xac))var _0x5c6eb1=users['Chinese'];else{if(_0x1b68ab[0x0][_0x1a4349(0x83)]==_0x1a4349(0xbf))var _0x5c6eb1=users[_0x1a4349(0x10e)];}}}}}}}_0x3a9cfd[_0x1a4349(0xb4)]('brands',{'success':_0x4e0a2e[_0x1a4349(0x102)](_0x1a4349(0xb9)),'errors':_0x4e0a2e[_0x1a4349(0x102)](_0x1a4349(0x108)),'role':_0x2b602a,'profile':_0xff8402,'master_shop':_0x1b68ab,'user':_0x486100,'language':_0x5c6eb1});}catch(_0x11e0d0){console['log'](_0x11e0d0);}}),router['post'](a0_0x1e18d3(0x11f),auth,async(_0x1a32b4,_0xf61d5b)=>{const _0x1e2e70=a0_0x1e18d3;try{const _0x3e7b06=_0x1a32b4[_0x1e2e70(0xea)]['id'],_0x168c3d=await brands['findByIdAndUpdate'](_0x3e7b06,_0x1a32b4[_0x1e2e70(0xff)]);_0x1a32b4[_0x1e2e70(0x102)]('success',_0x1e2e70(0xec)),_0xf61d5b['redirect'](_0x1e2e70(0xad));}catch(_0x329657){console[_0x1e2e70(0xcf)](_0x329657);}}),router[a0_0x1e18d3(0x7c)]('/brands/delete/:id',auth,async(_0x43ce7f,_0xc62d74)=>{const _0x1fc243=a0_0x1e18d3;try{const _0x295d3d=_0x43ce7f['params']['id'],_0x420cfb=await brands[_0x1fc243(0xcc)](_0x295d3d);_0x43ce7f[_0x1fc243(0x102)](_0x1fc243(0xb9),'brand\x20data\x20delete\x20successfully'),_0xc62d74[_0x1fc243(0x12f)](_0x1fc243(0xad));}catch(_0x285fc6){console[_0x1fc243(0xcf)](_0x285fc6);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0x92),auth,async(_0x11325c,_0x27e599)=>{const _0x2d4ebb=a0_0x1e18d3;try{const {username:_0x424f7a,email:_0x599d0e,role:_0x5d3ef8}=_0x11325c[_0x2d4ebb(0x93)],_0x4102bb=_0x11325c[_0x2d4ebb(0x93)],_0x2a2c92=await profile[_0x2d4ebb(0x7e)]({'email':_0x4102bb[_0x2d4ebb(0x91)]}),_0x12ca75=await master_shop[_0x2d4ebb(0xa0)]();console[_0x2d4ebb(0xcf)](_0x2d4ebb(0x78),_0x12ca75);const _0x1ebf0e=await units[_0x2d4ebb(0xa0)]();if(_0x12ca75[0x0][_0x2d4ebb(0x83)]==_0x2d4ebb(0xb6))var _0x577d6d=users[_0x2d4ebb(0xf3)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]=='Hindi')var _0x577d6d=users[_0x2d4ebb(0xf5)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]==_0x2d4ebb(0xa6))var _0x577d6d=users[_0x2d4ebb(0xa6)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]==_0x2d4ebb(0x82))var _0x577d6d=users[_0x2d4ebb(0x82)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]==_0x2d4ebb(0xb3))var _0x577d6d=users[_0x2d4ebb(0xb3)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]==_0x2d4ebb(0xeb))var _0x577d6d=users[_0x2d4ebb(0xca)];else{if(_0x12ca75[0x0]['language']=='Chinese')var _0x577d6d=users[_0x2d4ebb(0xac)];else{if(_0x12ca75[0x0][_0x2d4ebb(0x83)]=='Arabic\x20(ae)')var _0x577d6d=users[_0x2d4ebb(0x10e)];}}}}}}}_0x27e599[_0x2d4ebb(0xb4)](_0x2d4ebb(0xc3),{'success':_0x11325c[_0x2d4ebb(0x102)](_0x2d4ebb(0xb9)),'errors':_0x11325c[_0x2d4ebb(0x102)](_0x2d4ebb(0x108)),'role':_0x4102bb,'profile':_0x2a2c92,'master_shop':_0x12ca75,'user':_0x1ebf0e,'language':_0x577d6d});}catch(_0x3f7b94){console['log'](_0x3f7b94);}}),router['post']('/units',auth,async(_0x3bbe41,_0x28f1ca)=>{const _0x53dc1d=a0_0x1e18d3;try{const {name:_0x1e4551,secondary_unit:_0x473976,products:_0x42aa77}=_0x3bbe41[_0x53dc1d(0xff)],_0x1edcf0=new units({'name':_0x1e4551,'secondary_unit':_0x473976,'products':_0x42aa77}),_0x391ce6=await units[_0x53dc1d(0x7e)]({'name':_0x1e4551});_0x391ce6?_0x3bbe41[_0x53dc1d(0x102)](_0x53dc1d(0x108),_0x1e4551+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3bbe41['flash'](_0x53dc1d(0xb9),_0x1e4551+'\x20unit\x20is\x20add\x20successfully');const _0x5c6319=await _0x1edcf0['save']();_0x28f1ca[_0x53dc1d(0x12f)](_0x53dc1d(0x9f));}catch(_0x4c5c1e){console[_0x53dc1d(0xcf)](_0x4c5c1e);}}),router['get'](a0_0x1e18d3(0xef),auth,async(_0x229650,_0x260ea5)=>{const _0x4a29b9=a0_0x1e18d3;try{const {username:_0x34d553,email:_0x2848dd,role:_0x336d04}=_0x229650[_0x4a29b9(0x93)],_0x4e3cb4=_0x229650[_0x4a29b9(0x93)],_0x51a923=await profile[_0x4a29b9(0x7e)]({'email':_0x4e3cb4[_0x4a29b9(0x91)]}),_0x140fdb=await master_shop[_0x4a29b9(0xa0)]();console[_0x4a29b9(0xcf)](_0x4a29b9(0x78),_0x140fdb);const _0x4b2d9c=_0x229650[_0x4a29b9(0xea)]['id'],_0x34ed22=await units['findById'](_0x4b2d9c);if(_0x140fdb[0x0]['language']==_0x4a29b9(0xb6))var _0x2d0d95=users[_0x4a29b9(0xf3)];else{if(_0x140fdb[0x0][_0x4a29b9(0x83)]==_0x4a29b9(0xf5))var _0x2d0d95=users[_0x4a29b9(0xf5)];else{if(_0x140fdb[0x0]['language']=='German')var _0x2d0d95=users[_0x4a29b9(0xa6)];else{if(_0x140fdb[0x0]['language']==_0x4a29b9(0x82))var _0x2d0d95=users[_0x4a29b9(0x82)];else{if(_0x140fdb[0x0][_0x4a29b9(0x83)]==_0x4a29b9(0xb3))var _0x2d0d95=users[_0x4a29b9(0xb3)];else{if(_0x140fdb[0x0][_0x4a29b9(0x83)]==_0x4a29b9(0xeb))var _0x2d0d95=users['Portuguese'];else{if(_0x140fdb[0x0][_0x4a29b9(0x83)]==_0x4a29b9(0xac))var _0x2d0d95=users[_0x4a29b9(0xac)];else{if(_0x140fdb[0x0]['language']=='Arabic\x20(ae)')var _0x2d0d95=users[_0x4a29b9(0x10e)];}}}}}}}_0x260ea5[_0x4a29b9(0xb4)](_0x4a29b9(0xc3),{'success':_0x229650[_0x4a29b9(0x102)](_0x4a29b9(0xb9)),'errors':_0x229650['flash'](_0x4a29b9(0x108)),'role':_0x4e3cb4,'profile':_0x51a923,'master_shop':_0x140fdb,'user':_0x34ed22,'language':_0x2d0d95});}catch(_0x5b7243){console['log'](_0x5b7243);}}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0xef),auth,async(_0x176644,_0x51b256)=>{const _0x1a4e73=a0_0x1e18d3;try{const _0x141ea7=_0x176644[_0x1a4e73(0xea)]['id'],_0x41cdc8=await units['findByIdAndUpdate'](_0x141ea7,_0x176644[_0x1a4e73(0xff)]);_0x176644[_0x1a4e73(0x102)](_0x1a4e73(0xb9),'unit\x20data\x20update\x20successfully'),_0x51b256[_0x1a4e73(0x12f)](_0x1a4e73(0x9f));}catch(_0x316c72){console['log'](_0x316c72);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0x85),auth,async(_0x1f8b11,_0x1d39e4)=>{const _0x3ddf50=a0_0x1e18d3;try{const _0x24eb32=_0x1f8b11[_0x3ddf50(0xea)]['id'],_0x3fb846=await units[_0x3ddf50(0xcc)](_0x24eb32);_0x1f8b11[_0x3ddf50(0x102)](_0x3ddf50(0xb9),'unit\x20data\x20delete\x20successfully'),_0x1d39e4[_0x3ddf50(0x12f)](_0x3ddf50(0x9f));}catch(_0x2c45b3){console[_0x3ddf50(0xcf)](_0x2c45b3);}});const storage=multer[a0_0x1e18d3(0x9b)]({'destination':(_0x1ed1d5,_0x263209,_0x23622d)=>{const _0x531bdb=a0_0x1e18d3;_0x23622d(null,_0x531bdb(0x8b));},'filename':(_0x588d97,_0x42b7f4,_0x982bb5)=>{const _0x252503=a0_0x1e18d3;_0x982bb5(null,Date[_0x252503(0x101)]()+_0x42b7f4[_0x252503(0xb7)]);}}),upload=multer({'storage':storage});router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0xce),auth,async(_0x3fc532,_0x207db4)=>{const _0x2e6b6f=a0_0x1e18d3;try{const {username:_0x237fc3,email:_0x52d93f,role:_0x2e2879}=_0x3fc532[_0x2e6b6f(0x93)],_0x402e08=_0x3fc532[_0x2e6b6f(0x93)],_0x393761=await profile['findOne']({'email':_0x402e08[_0x2e6b6f(0x91)]}),_0x338027={'year':'numeric','month':'long','day':_0x2e6b6f(0x112)},_0x372bbf=await master_shop[_0x2e6b6f(0xa0)]();console[_0x2e6b6f(0xcf)](_0x2e6b6f(0x132),_0x372bbf);const _0x447de8=await product[_0x2e6b6f(0xa0)]();console[_0x2e6b6f(0xcf)](_0x2e6b6f(0x12c),_0x447de8);const _0x764525=await warehouse[_0x2e6b6f(0xee)]([{'$unwind':_0x2e6b6f(0xa1)},{'$lookup':{'from':_0x2e6b6f(0xfb),'localField':_0x2e6b6f(0xe3),'foreignField':_0x2e6b6f(0xb5),'as':_0x2e6b6f(0xe5)}},{'$unwind':_0x2e6b6f(0xa2)},{'$project':{'product_name':_0x2e6b6f(0x89),'product_stock':_0x2e6b6f(0x10f)}},{'$group':{'_id':_0x2e6b6f(0xc7),'product_stock':{'$sum':_0x2e6b6f(0x7f)}}}]);console[_0x2e6b6f(0xcf)](_0x2e6b6f(0x8c),_0x764525),_0x764525['forEach'](_0x5db000=>{const _0x2e5df6=_0x2e6b6f,_0x18c487=_0x447de8[_0x2e5df6(0xb2)](_0x5f084a=>{const _0x55eaa8=_0x2e5df6;_0x5f084a[_0x55eaa8(0xb5)]==_0x5db000[_0x55eaa8(0xe8)]&&(_0x5f084a[_0x55eaa8(0x128)]=parseInt(_0x5f084a['stock'])+parseInt(_0x5db000[_0x55eaa8(0x12d)]));});}),console[_0x2e6b6f(0xcf)](_0x2e6b6f(0x12c),_0x447de8);if(_0x372bbf[0x0]['language']=='English\x20(US)')var _0x1233da=users[_0x2e6b6f(0xf3)];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]=='Hindi')var _0x1233da=users['Hindi'];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]==_0x2e6b6f(0xa6))var _0x1233da=users[_0x2e6b6f(0xa6)];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]=='Spanish')var _0x1233da=users[_0x2e6b6f(0x82)];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]==_0x2e6b6f(0xb3))var _0x1233da=users['French'];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]==_0x2e6b6f(0xeb))var _0x1233da=users[_0x2e6b6f(0xca)];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]=='Chinese')var _0x1233da=users['Chinese'];else{if(_0x372bbf[0x0][_0x2e6b6f(0x83)]=='Arabic\x20(ae)')var _0x1233da=users['Arabic'];}}}}}}}_0x207db4[_0x2e6b6f(0xb4)](_0x2e6b6f(0xfb),{'success':_0x3fc532[_0x2e6b6f(0x102)](_0x2e6b6f(0xb9)),'errors':_0x3fc532['flash'](_0x2e6b6f(0x108)),'alldata':_0x447de8,'profile':_0x393761,'master_shop':_0x372bbf,'role':_0x402e08,'product_stock':_0x764525,'language':_0x1233da});}catch(_0x2f3986){console[_0x2e6b6f(0xcf)](_0x2f3986);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0xbc),auth,async(_0x5a3dd0,_0x3940e2)=>{const _0x56326c=a0_0x1e18d3;try{const {username:_0x6eff73,email:_0x2d0209,role:_0xe989a4}=_0x5a3dd0[_0x56326c(0x93)],_0x3d747e=_0x5a3dd0[_0x56326c(0x93)],_0x4bb484=await profile[_0x56326c(0x7e)]({'email':_0x3d747e[_0x56326c(0x91)]}),_0x661db2=await master_shop['find']();console['log'](_0x56326c(0x78),_0x661db2);const _0x3f4dd7=await categories[_0x56326c(0xa0)]({}),_0x1c7b8d=await brands[_0x56326c(0xa0)]({}),_0x22515e=await units[_0x56326c(0xa0)]({}),_0x2c0d0a=await warehouse[_0x56326c(0xa0)]({'status':_0x56326c(0x117)});if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xb6))var _0x3d7408=users[_0x56326c(0xf3)];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xf5))var _0x3d7408=users[_0x56326c(0xf5)];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xa6))var _0x3d7408=users[_0x56326c(0xa6)];else{if(_0x661db2[0x0][_0x56326c(0x83)]=='Spanish')var _0x3d7408=users[_0x56326c(0x82)];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xb3))var _0x3d7408=users[_0x56326c(0xb3)];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xeb))var _0x3d7408=users['Portuguese'];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xac))var _0x3d7408=users[_0x56326c(0xac)];else{if(_0x661db2[0x0][_0x56326c(0x83)]==_0x56326c(0xbf))var _0x3d7408=users['Arabic'];}}}}}}}_0x3940e2[_0x56326c(0xb4)](_0x56326c(0x81),{'success':_0x5a3dd0[_0x56326c(0x102)](_0x56326c(0xb9)),'errors':_0x5a3dd0['flash']('errors'),'role':_0x3d747e,'profile':_0x4bb484,'categories':_0x3f4dd7,'brands':_0x1c7b8d,'master_shop':_0x661db2,'units':_0x22515e,'language':_0x3d7408,'find_data':_0x2c0d0a});}catch(_0x1976b7){console[_0x56326c(0xcf)](_0x1976b7);}}),router['post']('/view/add_products',auth,upload['single'](a0_0x1e18d3(0x75)),async(_0x2bd59d,_0x4827d0)=>{const _0xe545d2=a0_0x1e18d3;try{const {name:_0x23b57a,category:_0x2fc5fc,brand:_0x264330,unit:_0x313da0,alertquantity:_0x1913d1,stock:_0x8d4ce3,product_code:_0xf52592,warehouse:_0x1943f7,primary_ItemCode:_0x170101,second_ItemCode:_0x2a9d50,second_unit:_0x578ef5,maxPerUnit:_0x63a0a9,MaxPerProduct:_0x169a21}=_0x2bd59d[_0xe545d2(0xff)],_0x49eb2c=_0x2bd59d['file']?.[_0xe545d2(0x95)]||_0xe545d2(0xc9),_0x2ac263=new product({'image':_0x49eb2c,'name':_0x23b57a,'category':_0x2fc5fc,'brand':_0x264330,'unit':_0x313da0,'alertquantity':_0x1913d1,'stock':_0x8d4ce3,'product_code':_0xf52592,'warehouse':_0x1943f7,'primary_code':_0x170101,'secondary_code':_0x2a9d50,'second_unit':_0x578ef5,'maxStocks':_0x169a21,'maxProdPerUnit':_0x63a0a9}),_0x24bb8b=await _0x2ac263[_0xe545d2(0x114)](),_0x118f48=await categories[_0xe545d2(0x7e)]({'name':_0x2fc5fc});_0x118f48['products']=parseInt(_0x118f48[_0xe545d2(0xfb)])+0x1,await _0x118f48[_0xe545d2(0x114)]();const _0x3d3705=await brands[_0xe545d2(0x7e)]({'name':_0x264330});_0x3d3705[_0xe545d2(0xfb)]=parseInt(_0x3d3705[_0xe545d2(0xfb)])+0x1,await _0x3d3705['save']();const _0xb80f6f=await units['findOne']({'name':_0x313da0});_0xb80f6f[_0xe545d2(0xfb)]=parseInt(_0xb80f6f['products'])+0x1,await _0xb80f6f[_0xe545d2(0x114)](),_0x2bd59d[_0xe545d2(0x102)](_0xe545d2(0xb9),_0xe545d2(0xd2)),_0x4827d0[_0xe545d2(0x12f)]('/products/view');}catch(_0x3628b9){console[_0xe545d2(0xcf)](_0x3628b9);}}),router['get']('/view/:id',auth,async(_0x4f2960,_0x5d7d2c)=>{const _0x4ba6ae=a0_0x1e18d3;try{const {username:_0x268835,email:_0x4495f6,role:_0x57176f}=_0x4f2960[_0x4ba6ae(0x93)],_0x14c26d=_0x4f2960['user'],_0x475dca=await profile[_0x4ba6ae(0x7e)]({'email':_0x14c26d[_0x4ba6ae(0x91)]}),_0x3b5a46=await master_shop['find']();console[_0x4ba6ae(0xcf)](_0x4ba6ae(0x104),_0x3b5a46);const _0x176d89=_0x4f2960['params']['id'],_0x81824e=await product[_0x4ba6ae(0xba)](_0x176d89),_0x3e1c6c=await categories[_0x4ba6ae(0xa0)]({}),_0x18bd4c=await brands[_0x4ba6ae(0xa0)]({}),_0x3257c0=await units[_0x4ba6ae(0xa0)]({}),_0x3ff016=await warehouse[_0x4ba6ae(0xa0)]({'status':_0x4ba6ae(0x117)}),_0x597364=await units['aggregate']([{'$group':{'_id':_0x4ba6ae(0xe7),'secondaryunit':{'$first':_0x4ba6ae(0x80)}}}]);if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]==_0x4ba6ae(0xb6))var _0x397dbd=users[_0x4ba6ae(0xf3)];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]=='Hindi')var _0x397dbd=users[_0x4ba6ae(0xf5)];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]==_0x4ba6ae(0xa6))var _0x397dbd=users['German'];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]==_0x4ba6ae(0x82))var _0x397dbd=users['Spanish'];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]==_0x4ba6ae(0xb3))var _0x397dbd=users[_0x4ba6ae(0xb3)];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]==_0x4ba6ae(0xeb))var _0x397dbd=users['Portuguese'];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]=='Chinese')var _0x397dbd=users[_0x4ba6ae(0xac)];else{if(_0x3b5a46[0x0][_0x4ba6ae(0x83)]=='Arabic\x20(ae)')var _0x397dbd=users[_0x4ba6ae(0x10e)];}}}}}}}_0x5d7d2c[_0x4ba6ae(0xb4)](_0x4ba6ae(0xf7),{'success':_0x4f2960[_0x4ba6ae(0x102)](_0x4ba6ae(0xb9)),'errors':_0x4f2960[_0x4ba6ae(0x102)](_0x4ba6ae(0x108)),'role':_0x14c26d,'profile':_0x475dca,'alldata':_0x81824e,'categories':_0x3e1c6c,'brands':_0x18bd4c,'master_shop':_0x3b5a46,'units':_0x3257c0,'secondunit':_0x597364,'find_data':_0x3ff016,'language':_0x397dbd});}catch(_0x19ec5a){console['log'](_0x19ec5a);}}),router['post'](a0_0x1e18d3(0xa5),auth,upload[a0_0x1e18d3(0x126)](a0_0x1e18d3(0x75)),async(_0x5ea48e,_0xfe2735)=>{const _0x2472cd=a0_0x1e18d3;try{console[_0x2472cd(0xcf)]('hello');const _0x17312d=_0x5ea48e[_0x2472cd(0xea)]['id'],_0x4ed45d=await product[_0x2472cd(0xba)](_0x17312d),{image:_0x3834be,name:_0x1b2a38,category:_0x4392c3,brand:_0x109560,sku:_0x5e5900,unit:_0x5e0ad3,alertquantity:_0x29352c,product_code:_0x5e6fd4,warehouse:_0x324397,primary_ItemCode:_0x32abcf,second_ItemCode:_0x119abc,second_unit:_0x37b671,maxPerUnit:_0x3c2875,MaxPerProduct:_0x3d8a2a,prod_catdata:_0xcbfeb4}=_0x5ea48e[_0x2472cd(0xff)];_0x5ea48e[_0x2472cd(0x121)]&&(_0x4ed45d[_0x2472cd(0x75)]=_0x5ea48e[_0x2472cd(0x121)][_0x2472cd(0x95)]);_0x4ed45d[_0x2472cd(0xb5)]=_0x1b2a38,_0x4ed45d['category']=_0x4392c3,_0x4ed45d[_0x2472cd(0xed)]=_0x109560,_0x4ed45d[_0x2472cd(0xb8)]=_0x5e5900,_0x4ed45d[_0x2472cd(0xcd)]=_0x5e0ad3,_0x4ed45d[_0x2472cd(0x124)]=_0x29352c,_0x4ed45d[_0x2472cd(0x8d)]=_0x5e6fd4,_0x4ed45d[_0x2472cd(0xd1)]=_0x324397,_0x4ed45d[_0x2472cd(0x10c)]=_0x32abcf,_0x4ed45d[_0x2472cd(0x12a)]=_0x119abc,_0x4ed45d[_0x2472cd(0xae)]=_0x37b671,_0x4ed45d['maxStocks']=_0x3d8a2a,_0x4ed45d['maxProdPerUnit']=_0x3c2875,_0x4ed45d[_0x2472cd(0x8a)]=_0xcbfeb4;const _0x4ac601=await _0x4ed45d[_0x2472cd(0x114)]();console[_0x2472cd(0xcf)](_0x2472cd(0x11b),_0x4ed45d),_0x5ea48e[_0x2472cd(0x102)](_0x2472cd(0xb9),_0x2472cd(0x11c)),_0xfe2735[_0x2472cd(0x12f)](_0x2472cd(0x133));}catch(_0x48cde6){console['log'](_0x48cde6);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0xbb),auth,async(_0x537735,_0x3c43a3)=>{const _0x73ce5b=a0_0x1e18d3;try{const {username:_0x17be0f,email:_0x49d048,role:_0xb8aa9b}=_0x537735[_0x73ce5b(0x93)],_0x1a09c8=_0x537735['user'],_0x369a14=await profile['findOne']({'email':_0x1a09c8[_0x73ce5b(0x91)]}),_0xec6deb=await master_shop[_0x73ce5b(0xa0)]();console[_0x73ce5b(0xcf)](_0x73ce5b(0xaf),_0xec6deb);const _0x1bc24e=_0x537735[_0x73ce5b(0xea)]['id'],_0x46e44b=await product[_0x73ce5b(0xba)](_0x1bc24e);console['log'](_0x73ce5b(0xf0),_0x46e44b);if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0xb6))var _0xd0b791=users[_0x73ce5b(0xf3)];else{if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0xf5))var _0xd0b791=users['Hindi'];else{if(_0xec6deb[0x0]['language']==_0x73ce5b(0xa6))var _0xd0b791=users['German'];else{if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0x82))var _0xd0b791=users[_0x73ce5b(0x82)];else{if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0xb3))var _0xd0b791=users['French'];else{if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0xeb))var _0xd0b791=users['Portuguese'];else{if(_0xec6deb[0x0][_0x73ce5b(0x83)]==_0x73ce5b(0xac))var _0xd0b791=users[_0x73ce5b(0xac)];else{if(_0xec6deb[0x0]['language']==_0x73ce5b(0xbf))var _0xd0b791=users['Arabic'];}}}}}}}_0x3c43a3[_0x73ce5b(0xb4)]('product_barcode',{'success':_0x537735[_0x73ce5b(0x102)](_0x73ce5b(0xb9)),'errors':_0x537735[_0x73ce5b(0x102)](_0x73ce5b(0x108)),'role':_0x1a09c8,'profile':_0x369a14,'alldata':_0x46e44b,'master_shop':_0xec6deb,'language':_0xd0b791});}catch(_0x1891a7){console[_0x73ce5b(0xcf)](_0x1891a7);}}),router[a0_0x1e18d3(0x7c)](a0_0x1e18d3(0xb0),auth,async(_0x765b3d,_0x1083d3)=>{const _0x50d5ab=a0_0x1e18d3;try{const _0x22a2e0=new excelJS['Workbook'](),_0x4cdee9=_0x22a2e0[_0x50d5ab(0x99)](_0x50d5ab(0x10d));return _0x4cdee9[_0x50d5ab(0x11d)]=[{'header':'Product_Name','key':'PName','width':0xa},{'header':_0x50d5ab(0xc2),'key':_0x50d5ab(0xe4),'width':0xa},{'header':'Units','key':_0x50d5ab(0xdf),'width':0xa},{'header':_0x50d5ab(0x131),'key':_0x50d5ab(0xfd),'width':0xa},{'header':_0x50d5ab(0xaa),'key':_0x50d5ab(0xf6),'width':0xa},{'header':_0x50d5ab(0xd0),'key':_0x50d5ab(0xa3),'width':0xa},{'header':'Secondary_Code','key':_0x50d5ab(0xa3),'width':0xa},{'header':_0x50d5ab(0xfa),'key':_0x50d5ab(0xa3),'width':0xa},{'header':_0x50d5ab(0x127),'key':_0x50d5ab(0xe6),'width':0xa},{'header':_0x50d5ab(0x9a),'key':_0x50d5ab(0xa9),'width':0xa},{'header':_0x50d5ab(0x11a),'key':_0x50d5ab(0xa9),'width':0xa},{'header':_0x50d5ab(0x7b),'key':_0x50d5ab(0x111),'width':0xa}],_0x1083d3[_0x50d5ab(0x12b)](_0x50d5ab(0xdb),_0x50d5ab(0xab)),_0x1083d3['setHeader']('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x22a2e0[_0x50d5ab(0x110)][_0x50d5ab(0xfe)](_0x1083d3)['then'](()=>{const _0xf2cf64=_0x50d5ab;_0x1083d3[_0xf2cf64(0x10b)](0xc8);});}catch(_0x1a3990){_0x1083d3[_0x50d5ab(0x10b)](0x190)['send'](_0x1a3990);}});function a0_0x4e25(){const _0x1f3da0=['product_docs','PCat','$_id','_id','base64','params','Portuguese\x20(BR)','brand\x20data\x20update\x20successfully','brand','aggregate','/units/:id','barcode\x20user_id','categories_edit','../models/all_models','English','findByIdAndUpdate','Hindi','MaxperUnits','edit_product','/print_barcode_filter_search/','category','Product_Code','products','\x20Edit\x20Successfully','PSecondaryUnits','write','body','brands','now','flash','json','edit\x20Product\x20master','../middleware/auth','CODE128','319277GngeGA','errors','express/lib/response','toString','status','primary_code','Products','Arabic','$product_details.product_stock','xlsx','Prod_Cat','numeric','$category','save','4213665ofOygs','Router','Enabled','readFile','addPage','Maximum_Stocks','product\x20edit','product\x20update\x20successfully','columns','width','/brands/:id','40XdACtr','file','/categories/:id','2184696JDuExP','alertquantity','1932xddCrn','single','Category','stock','Raw\x20Materials','secondary_code','setHeader','Products\x20find_data','product_stock','end','redirect','exceljs','Secondary_Units','Products\x20master','/products/view','image','utils','Product_Name','master','318770bTMVMx','categories\x20data\x20delete\x20successfully','Products_category','get','Secondary_Code','findOne','$product_stock','$secondary_unit','add_product','Spanish','language','toBuffer','/units/delete/:id','\x20added\x20successfully','/brands','prod_categ','$product_details.product_name','product_category','public/upload','Products\x20warehouse_data','product_code','product_barcode_products','data','post','email','/units','user','SheetNames','filename','message','/categories/delete/:id','jsbarcode','addWorksheet','Alert_QTY','diskStorage','944314SgDrip','push','exports','/products/units','find','$product_details','$product_docs','ProductCode','/print_barcode_single/:id','/view/:id','German','/filter_product','length','PAlQty','max_number_per_units','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Chinese','/products/brands','secondary_unit','barcode\x20Product\x20master','/products_export_migrate_file','bind','map','French','render','name','English\x20(US)','originalname','sku','success','findById','/barcode/:id','/view/add_products','concat','Units','Arabic\x20(ae)','/categories','Finished\x20Goods','Brands','units','$brand','676638JjUQND','public/Migration/','$product_name','categories','defaultProduct.avif','Portuguese','\x20categories\x20is\x20add\x20successfully','findByIdAndDelete','unit','/view','log','Primary_Code','warehouse','product\x20add\x20successfully','min','pdfkit-table','maxStocks','/barcode_data','Sheets','categ','maxProdPerUnit','\x20brand\x20is\x20add\x20successfully','Content-Type','/products/categories','\x20<>\x20','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','PUnits','sheet_to_json','height','public/Migration','product_details.product_name','PBrands'];a0_0x4e25=function(){return _0x1f3da0;};return a0_0x4e25();}function a0_0x2c67(_0x3e1cbd,_0x47d60a){const _0x4e254d=a0_0x4e25();return a0_0x2c67=function(_0x2c67ad,_0x5627d7){_0x2c67ad=_0x2c67ad-0x75;let _0x402a88=_0x4e254d[_0x2c67ad];return _0x402a88;},a0_0x2c67(_0x3e1cbd,_0x47d60a);}const storage1=multer['diskStorage']({'destination':(_0x10d618,_0x2d0683,_0x54af7e)=>{const _0x499309=a0_0x1e18d3;_0x54af7e(null,_0x499309(0xe2));},'filename':(_0x1adda7,_0x23d597,_0x1a8bef)=>{const _0x46e47f=a0_0x1e18d3;_0x1a8bef(null,Date[_0x46e47f(0x101)]()+_0x23d597[_0x46e47f(0xb7)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1e18d3(0x90)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x1e18d3(0x126)]('migrate_product_fule'),async(_0x1a1c45,_0x489c6f)=>{const _0x147607=a0_0x1e18d3,_0x323953=_0x1a1c45[_0x147607(0x121)][_0x147607(0x95)],_0x52b8b1=await xlsx[_0x147607(0x118)](_0x147607(0xc6)+_0x323953);let _0x1227e0=_0x52b8b1[_0x147607(0x94)],_0x5dc65d=xlsx[_0x147607(0x76)][_0x147607(0xe0)](_0x52b8b1[_0x147607(0xd7)][_0x1227e0[0x0]]);for(const _0x4c6c4f of _0x5dc65d){const _0x53822f=_0x4c6c4f[_0x147607(0x77)],_0x5cf4ba=_0x4c6c4f[_0x147607(0xc2)],_0x277333=_0x4c6c4f[_0x147607(0xbe)],_0x122845=_0x4c6c4f['Secondary_Units'],_0x21d9ee=_0x4c6c4f['Product_Code'],_0x2be6b4=_0x4c6c4f[_0x147607(0x127)],_0x3846fe=_0x4c6c4f[_0x147607(0x9a)],_0x4fe3b6=_0x4c6c4f[_0x147607(0xd0)],_0x1d7a4f=_0x4c6c4f[_0x147607(0x7d)],_0x43fa79=_0x4c6c4f[_0x147607(0x11a)],_0x55f0bd=_0x4c6c4f[_0x147607(0xaa)],_0xd5795c=_0x4c6c4f[_0x147607(0x7b)];try{let _0x461a80=await categories[_0x147607(0x7e)]({'name':_0x2be6b4});if(!_0x461a80){const _0x4b3e69=new categories({'name':_0x2be6b4,'products':'0'});_0x461a80=await _0x4b3e69[_0x147607(0x114)]();}let _0x67a1c3=await brands[_0x147607(0x7e)]({'name':_0x5cf4ba});if(!_0x67a1c3){const _0x2be3da=new brands({'name':_0x5cf4ba,'products':'0'});_0x67a1c3=await _0x2be3da[_0x147607(0x114)]();}let _0x5385f6=await units[_0x147607(0x7e)]({'name':_0x277333,'secondary_unit':_0x122845});if(!_0x5385f6){const _0x3693f4=new units({'name':_0x277333,'secondary_unit':_0x122845,'products':'0'});_0x5385f6=await _0x3693f4[_0x147607(0x114)]();}const _0x3d8536=await product[_0x147607(0xa0)]({'name':_0x53822f,'category':_0x461a80[_0x147607(0xb5)],'brand':_0x67a1c3[_0x147607(0xb5)],'secondary_unit':_0x5385f6['secondary_unit'],'product_code':_0x21d9ee});console[_0x147607(0xcf)](_0x3d8536[_0x147607(0xa8)]+_0x147607(0xdd)+_0x461a80[_0x147607(0xb5)]+'\x20<>\x20'+_0x67a1c3[_0x147607(0xb5)]+'\x20<>\x20'+_0x5385f6[_0x147607(0xae)]+'\x20<>\x20'+_0x21d9ee+_0x147607(0xdd)+_0x53822f);if(_0x3d8536['length']===0x0){const _0x5a0a19=new product({'image':_0x147607(0xc9),'name':_0x53822f,'category':_0x461a80[_0x147607(0xb5)],'brand':_0x67a1c3[_0x147607(0xb5)],'unit':_0x5385f6[_0x147607(0xb5)],'alertquantity':_0x3846fe,'product_code':_0x21d9ee,'secondary_unit':_0x5385f6[_0x147607(0xae)],'primary_code':_0x4fe3b6,'secondary_code':_0x1d7a4f,'maxStocks':_0x43fa79,'maxProdPerUnit':_0x55f0bd,'product_category':_0xd5795c}),_0x26ae05=await _0x5a0a19[_0x147607(0x114)]();_0x461a80[_0x147607(0xfb)]=parseInt(_0x461a80[_0x147607(0xfb)])+0x1,await _0x461a80[_0x147607(0x114)](),_0x67a1c3[_0x147607(0xfb)]=parseInt(_0x67a1c3[_0x147607(0xfb)])+0x1,await _0x67a1c3[_0x147607(0x114)](),_0x5385f6[_0x147607(0xfb)]=parseInt(_0x5385f6[_0x147607(0xfb)])+0x1,await _0x5385f6[_0x147607(0x114)](),_0x1a1c45[_0x147607(0x102)](_0x147607(0xb9),_0x53822f+_0x147607(0x86));}else{console[_0x147607(0xcf)](_0x3d8536[0x0]);const _0x310a75=_0x3d8536[0x0];_0x310a75[_0x147607(0xf9)]=_0x461a80['name'],_0x310a75[_0x147607(0xed)]=_0x67a1c3[_0x147607(0xb5)],_0x310a75['unit']=_0x5385f6['name'],_0x310a75[_0x147607(0x124)]=_0x3846fe,_0x310a75[_0x147607(0x8d)]=_0x21d9ee,_0x310a75[_0x147607(0xae)]=_0x5385f6[_0x147607(0xae)],_0x310a75[_0x147607(0x10c)]=_0x4fe3b6,_0x310a75[_0x147607(0x12a)]=_0x1d7a4f,_0x310a75[_0x147607(0xd5)]=_0x43fa79,_0x310a75[_0x147607(0xd9)]=_0x55f0bd,_0x310a75['product_category']=_0xd5795c;const _0x3bffb0=await _0x310a75[_0x147607(0x114)]();_0x1a1c45['flash'](_0x147607(0xb9),_0x3bffb0[_0x147607(0xb5)]+_0x147607(0xfc));}}catch(_0x4aeff2){_0x489c6f[_0x147607(0x10b)](0x1f4)[_0x147607(0x103)]({'proderror':_0x4aeff2[_0x147607(0x96)],'aproduct':_0x53822f});}}_0x489c6f[_0x147607(0x12f)](_0x147607(0x133));}),router['post']('/select_data',auth,async(_0x3863f9,_0x513fbb)=>{const _0x2856f2=a0_0x1e18d3;try{console[_0x2856f2(0xcf)](_0x3863f9['body']);const {data_cateory:_0x3f4366,datachoose:_0x278cbf}=_0x3863f9[_0x2856f2(0xff)];var _0x45548b;if(_0x278cbf==_0x2856f2(0x88))_0x45548b=await product[_0x2856f2(0xee)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x278cbf=='brands')_0x45548b=await product[_0x2856f2(0xee)]([{'$match':{'product_category':_0x3f4366}},{'$group':{'_id':_0x2856f2(0xc4)}}]);else _0x278cbf=='categ'&&(_0x45548b=await product[_0x2856f2(0xee)]([{'$match':{'product_category':_0x3f4366}},{'$group':{'_id':_0x2856f2(0x113)}}]));}_0x513fbb['json'](_0x45548b);}catch(_0x3f0ded){_0x513fbb['json']({'message':_0x3f0ded[_0x2856f2(0x96)]});}}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0xa7),auth,async(_0x23f8d9,_0x18d057)=>{const _0x499cb9=a0_0x1e18d3;try{const {data_choosing:_0x4b4dea,data_selected:_0x3c1b76}=_0x23f8d9[_0x499cb9(0xff)];var _0x2329fe;if(_0x4b4dea==_0x499cb9(0x88))_0x2329fe=await product[_0x499cb9(0xee)]([{'$match':{'product_category':_0x3c1b76}}]);else{if(_0x4b4dea=='brands')_0x2329fe=await product[_0x499cb9(0xee)]([{'$match':{'brand':_0x3c1b76}}]);else _0x4b4dea==_0x499cb9(0xd8)&&(_0x2329fe=await product[_0x499cb9(0xee)]([{'$match':{'category':_0x3c1b76}}]));}_0x18d057[_0x499cb9(0x103)](_0x2329fe);}catch(_0x1695b2){_0x18d057[_0x499cb9(0x103)]({'message':_0x1695b2[_0x499cb9(0x96)]});}}),router[a0_0x1e18d3(0x7c)]('/print_barcode',auth,async(_0x4d9feb,_0x41b023)=>{const _0x31bce9=a0_0x1e18d3,_0x3dbb58=_0x4d9feb['user'],_0x3c8499=await profile[_0x31bce9(0x7e)]({'email':_0x3dbb58[_0x31bce9(0x91)]}),_0x4a158e=await master_shop[_0x31bce9(0xa0)](),_0x5afcd2=await product[_0x31bce9(0xa0)]();if(_0x4a158e[0x0][_0x31bce9(0x83)]=='English\x20(US)')var _0x314bd2=users[_0x31bce9(0xf3)];else{if(_0x4a158e[0x0]['language']==_0x31bce9(0xf5))var _0x314bd2=users[_0x31bce9(0xf5)];else{if(_0x4a158e[0x0]['language']==_0x31bce9(0xa6))var _0x314bd2=users[_0x31bce9(0xa6)];else{if(_0x4a158e[0x0]['language']=='Spanish')var _0x314bd2=users[_0x31bce9(0x82)];else{if(_0x4a158e[0x0]['language']=='French')var _0x314bd2=users['French'];else{if(_0x4a158e[0x0][_0x31bce9(0x83)]==_0x31bce9(0xeb))var _0x314bd2=users[_0x31bce9(0xca)];else{if(_0x4a158e[0x0][_0x31bce9(0x83)]==_0x31bce9(0xac))var _0x314bd2=users['Chinese'];else{if(_0x4a158e[0x0][_0x31bce9(0x83)]=='Arabic\x20(ae)')var _0x314bd2=users[_0x31bce9(0x10e)];}}}}}}}_0x41b023[_0x31bce9(0xb4)](_0x31bce9(0x8e),{'success':_0x4d9feb[_0x31bce9(0x102)](_0x31bce9(0xb9)),'errors':_0x4d9feb[_0x31bce9(0x102)]('errors'),'role':_0x3dbb58,'profile':_0x3c8499,'products':_0x5afcd2,'master_shop':_0x4a158e,'language':_0x314bd2});}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0xd6),auth,async(_0x4040c8,_0x424437)=>{const _0x5616e1=a0_0x1e18d3,_0x1c2249=await product['find']();_0x424437[_0x5616e1(0x103)]({'data':_0x1c2249});}),router[a0_0x1e18d3(0x90)]('/barcode_filter',auth,async(_0x2b13b7,_0x450821)=>{const _0x5c764c=a0_0x1e18d3;try{const {dataProdCat:_0x53d7f7,dataProdIdentity:_0x1722f9}=_0x2b13b7[_0x5c764c(0xff)];var _0x186e3c;switch(_0x53d7f7){case'fg':switch(_0x1722f9){case'Brands':_0x186e3c=await product['aggregate']([{'$match':{'product_category':_0x5c764c(0xc1)}},{'$group':{'_id':_0x5c764c(0xc4)}},{'$project':{'brand':_0x5c764c(0xe7)}}]);break;case _0x5c764c(0x127):_0x186e3c=await product[_0x5c764c(0xee)]([{'$match':{'product_category':_0x5c764c(0xc1)}},{'$group':{'_id':_0x5c764c(0x113)}},{'$project':{'category':_0x5c764c(0xe7)}}]);break;}break;case'rm':switch(_0x1722f9){case'Brands':_0x186e3c=await product['aggregate']([{'$match':{'product_category':_0x5c764c(0x129)}},{'$group':{'_id':_0x5c764c(0xc4)}},{'$project':{'brand':_0x5c764c(0xe7)}}]);break;case _0x5c764c(0x127):_0x186e3c=await product[_0x5c764c(0xee)]([{'$match':{'product_category':_0x5c764c(0x129)}},{'$group':{'_id':_0x5c764c(0x113)}},{'$project':{'category':_0x5c764c(0xe7)}}]);break;}break;}_0x450821['json'](_0x186e3c);}catch(_0x3bd7e3){_0x450821[_0x5c764c(0x103)]({'message':_0x3bd7e3[_0x5c764c(0x96)]});}}),router[a0_0x1e18d3(0x90)]('/print_barcode_filter/',auth,async(_0x3ec13b,_0x4431ff)=>{const _0x585fa5=a0_0x1e18d3;try{console[_0x585fa5(0xcf)](_0x3ec13b['body']);const {prod_cat:_0x495ba7,identity:_0x4de0c4,valueData:_0x4f7e47,typeofbarcode:_0x14c42c}=_0x3ec13b[_0x585fa5(0xff)];let _0x3102c9;switch(_0x495ba7){case'fg':if(_0x4de0c4==_0x585fa5(0xc2))_0x3102c9=await product[_0x585fa5(0xee)]([{'$match':{'product_category':_0x585fa5(0xc1),'brand':_0x4f7e47}}]);else _0x4de0c4==_0x585fa5(0x127)&&(_0x3102c9=await product[_0x585fa5(0xee)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x4f7e47}}]));break;case'rm':if(_0x4de0c4=='Brands')_0x3102c9=await product[_0x585fa5(0xee)]([{'$match':{'product_category':_0x585fa5(0x129),'brand':_0x4f7e47}}]);else _0x4de0c4=='Category'&&(_0x3102c9=await product[_0x585fa5(0xee)]([{'$match':{'product_category':_0x585fa5(0x129),'category':_0x4f7e47}}]));break;}const _0xfe21fa=_0x5cac97=>_0x5cac97*0x48,_0x2a7577={'width':0x3,'height':0x1},_0x38200e=new PDFDocument({'margin':_0xfe21fa(0.75),'size':[_0xfe21fa(_0x2a7577['width']),_0xfe21fa(_0x2a7577[_0x585fa5(0xe1)])],'bufferPages':!![]}),_0x29b2e4=_0x3102c9[_0x585fa5(0xa8)];for(let _0x4cc2a5=0x0;_0x4cc2a5<=_0x29b2e4;_0x4cc2a5++){if(_0x4cc2a5!=_0x29b2e4){const _0x32104e=_0x3102c9[_0x4cc2a5][_0x585fa5(0xb5)],_0x14d0be=_0x3102c9[_0x4cc2a5]['primary_code'],_0xc51ec8=_0x3102c9[_0x4cc2a5][_0x585fa5(0x12a)],_0x1fa25e=_0x3102c9[_0x4cc2a5][_0x585fa5(0x8d)];var _0x2d6f3c;switch(_0x14c42c){case'1':_0x2d6f3c=_0x14d0be;break;case'2':_0x2d6f3c=_0xc51ec8;break;case'3':_0x2d6f3c=_0x1fa25e;break;}const _0x70eb2c={'width':0xd2,'height':0x64},_0x3a690f={'width':_0xfe21fa(_0x2a7577[_0x585fa5(0x11e)]),'height':_0xfe21fa(_0x2a7577[_0x585fa5(0xe1)])},_0x34ebbb=new Canvas();JsBarcode(_0x34ebbb,_0x2d6f3c,{'format':_0x585fa5(0x106),'height':_0x70eb2c['height'],'displayValue':!![],'text':_0x2d6f3c});const _0x4ef55a=_0x34ebbb[_0x585fa5(0x84)](),_0x2d4040=_0x3a690f['width']/_0x70eb2c[_0x585fa5(0x11e)],_0x2a6861=_0x3a690f[_0x585fa5(0xe1)]/_0x70eb2c['height'],_0x1a4b80=Math[_0x585fa5(0xd3)](_0x2d4040,_0x2a6861),_0x5ac5f4=_0x70eb2c['width']*_0x1a4b80,_0x43aec9=_0x70eb2c[_0x585fa5(0xe1)]*_0x1a4b80,_0xd1414f=(_0x3a690f[_0x585fa5(0x11e)]-_0x5ac5f4)/0x2,_0xf99e8e=(_0x3a690f[_0x585fa5(0xe1)]-_0x43aec9)/0x2;_0x38200e['image'](_0x4ef55a,_0xd1414f,_0xf99e8e,{'width':_0x5ac5f4,'height':_0x43aec9}),_0x4cc2a5!=_0x29b2e4&&_0x38200e[_0x585fa5(0x119)]();}}const _0x1654bc=[];_0x38200e['on'](_0x585fa5(0x8f),_0x1654bc[_0x585fa5(0x9d)][_0x585fa5(0xb1)](_0x1654bc)),_0x38200e['on'](_0x585fa5(0x12e),()=>{const _0x3206cd=_0x585fa5,_0x5a9970=Buffer[_0x3206cd(0xbd)](_0x1654bc),_0x2c81a7=_0x5a9970['toString'](_0x3206cd(0xe9));_0x4431ff[_0x3206cd(0x103)]({'pdfContent':_0x2c81a7});}),_0x38200e[_0x585fa5(0x12e)]();}catch(_0xebbcd2){_0x4431ff[_0x585fa5(0x103)]({'message':_0xebbcd2[_0x585fa5(0x96)]});}}),router['post'](a0_0x1e18d3(0xf8),auth,async(_0x26318a,_0x695e2c)=>{const _0xec400d=a0_0x1e18d3;try{console[_0xec400d(0xcf)](_0x26318a['body']);const {prod_cat:_0x571e64,identity:_0x137ac4,valueData:_0x4d4549}=_0x26318a[_0xec400d(0xff)];let _0x446d62;switch(_0x571e64){case'fg':if(_0x137ac4==_0xec400d(0xc2))_0x446d62=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0x4d4549}}]);else _0x137ac4==_0xec400d(0x127)&&(_0x446d62=await product[_0xec400d(0xee)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x4d4549}}]));break;case'rm':if(_0x137ac4==_0xec400d(0xc2))_0x446d62=await product[_0xec400d(0xee)]([{'$match':{'product_category':_0xec400d(0x129),'brand':_0x4d4549}}]);else _0x137ac4=='Category'&&(_0x446d62=await product[_0xec400d(0xee)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x4d4549}}]));break;}_0x695e2c[_0xec400d(0x103)]({'data':_0x446d62});}catch(_0x431115){_0x695e2c[_0xec400d(0x103)]({'message':_0x431115[_0xec400d(0x96)]});}}),router[a0_0x1e18d3(0x90)](a0_0x1e18d3(0xa4),auth,async(_0x59f749,_0x59156a)=>{const _0x1ea87c=a0_0x1e18d3;try{const _0x1d6ee8=_0x59f749[_0x1ea87c(0xea)]['id'],{copies:_0x329d46,typeofbarcode:_0x323497}=_0x59f749[_0x1ea87c(0xff)];var _0x541e97=await product[_0x1ea87c(0xba)](_0x1d6ee8);const _0x5aaf35=_0x3abb6=>_0x3abb6*0x48,_0x57f5ed={'width':0x3,'height':0x1},_0x4be9d7=new PDFDocument({'margin':_0x5aaf35(0.75),'size':[_0x5aaf35(_0x57f5ed[_0x1ea87c(0x11e)]),_0x5aaf35(_0x57f5ed['height'])],'bufferPages':!![]}),_0x60fc5b=_0x329d46,_0x5b14cf=_0x541e97[_0x1ea87c(0xb5)],_0x4c1b71=_0x541e97['primary_code'],_0x522a97=_0x541e97[_0x1ea87c(0x12a)],_0x57fc6d=_0x541e97[_0x1ea87c(0x8d)];let _0x24165c;switch(_0x323497){case'1':_0x24165c=_0x4c1b71;break;case'2':_0x24165c=_0x522a97;break;case'3':_0x24165c=_0x57fc6d;break;}const _0x1bdab2={'width':0xd2,'height':0x64},_0x469e5f={'width':_0x5aaf35(_0x57f5ed[_0x1ea87c(0x11e)]),'height':_0x5aaf35(_0x57f5ed['height'])};for(let _0x1a0e35=0x1;_0x1a0e35<=_0x60fc5b;_0x1a0e35++){const _0x552538=new Canvas();JsBarcode(_0x552538,_0x24165c,{'format':_0x1ea87c(0x106),'height':_0x1bdab2[_0x1ea87c(0xe1)],'displayValue':!![],'text':_0x24165c});const _0x396294=_0x552538[_0x1ea87c(0x84)](),_0x2bec4f=_0x469e5f[_0x1ea87c(0x11e)]/_0x1bdab2[_0x1ea87c(0x11e)],_0x20a885=_0x469e5f[_0x1ea87c(0xe1)]/_0x1bdab2[_0x1ea87c(0xe1)],_0x3ba7d2=Math['min'](_0x2bec4f,_0x20a885),_0x3254fb=_0x1bdab2[_0x1ea87c(0x11e)]*_0x3ba7d2,_0x274ffa=_0x1bdab2[_0x1ea87c(0xe1)]*_0x3ba7d2,_0x744063=(_0x469e5f[_0x1ea87c(0x11e)]-_0x3254fb)/0x2,_0x4e80fc=(_0x469e5f['height']-_0x274ffa)/0x2;_0x4be9d7[_0x1ea87c(0x75)](_0x396294,_0x744063,_0x4e80fc,{'width':_0x3254fb,'height':_0x274ffa}),_0x1a0e35!=_0x60fc5b&&_0x4be9d7[_0x1ea87c(0x119)]();}const _0x25ef81=[];_0x4be9d7['on'](_0x1ea87c(0x8f),_0x25ef81[_0x1ea87c(0x9d)][_0x1ea87c(0xb1)](_0x25ef81)),_0x4be9d7['on'](_0x1ea87c(0x12e),()=>{const _0x294cd6=_0x1ea87c,_0x68094e=Buffer[_0x294cd6(0xbd)](_0x25ef81),_0x3b688b=_0x68094e[_0x294cd6(0x10a)]('base64');_0x59156a[_0x294cd6(0x103)]({'pdfContent':_0x3b688b});}),_0x4be9d7[_0x1ea87c(0x12e)]();}catch(_0x6e4767){_0x59156a[_0x1ea87c(0x103)]({'message':_0x6e4767[_0x1ea87c(0x96)]});}}),module[a0_0x1e18d3(0x9e)]=router;