const a0_0x31ef99=a0_0x5585;(function(_0x2095ba,_0xd34525){const _0x4d78e4=a0_0x5585,_0x5fa4b1=_0x2095ba();while(!![]){try{const _0xf543de=-parseInt(_0x4d78e4(0xfb))/0x1*(-parseInt(_0x4d78e4(0x11f))/0x2)+parseInt(_0x4d78e4(0x116))/0x3*(-parseInt(_0x4d78e4(0xf9))/0x4)+-parseInt(_0x4d78e4(0x159))/0x5*(parseInt(_0x4d78e4(0x18f))/0x6)+parseInt(_0x4d78e4(0x14b))/0x7+parseInt(_0x4d78e4(0x196))/0x8+parseInt(_0x4d78e4(0x18b))/0x9+parseInt(_0x4d78e4(0x161))/0xa;if(_0xf543de===_0xd34525)break;else _0x5fa4b1['push'](_0x5fa4b1['shift']());}catch(_0x2ec5fe){_0x5fa4b1['push'](_0x5fa4b1['shift']());}}}(a0_0x1932,0x4b9cf));const express=require(a0_0x31ef99(0x14d)),res=require('express/lib/response'),app=express(),router=express[a0_0x31ef99(0x11a)](),multer=require(a0_0x31ef99(0x10c)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x31ef99(0x144)),excelJS=require(a0_0x31ef99(0x119)),xlsx=require(a0_0x31ef99(0x173)),JsBarcode=require(a0_0x31ef99(0xf6)),{Canvas}=require(a0_0x31ef99(0x10f)),PDFDocument=require(a0_0x31ef99(0xf0));router['get']('/categories',auth,async(_0x37a6c4,_0x2e86fd)=>{const _0xa1549=a0_0x31ef99;try{const {username:_0x3e4f21,email:_0x3d05c3,role:_0x5285a2}=_0x37a6c4[_0xa1549(0x102)],_0x2eb386=_0x37a6c4['user'],_0xe47d1b=await profile[_0xa1549(0x126)]({'email':_0x2eb386[_0xa1549(0x145)]}),_0x36ec06=await master_shop[_0xa1549(0x171)]();console[_0xa1549(0x165)](_0xa1549(0x182),_0x36ec06);const _0x53b665=await categories[_0xa1549(0x171)]();if(_0x36ec06[0x0][_0xa1549(0x194)]==_0xa1549(0x16c))var _0x372470=users[_0xa1549(0x127)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]==_0xa1549(0x15e))var _0x372470=users[_0xa1549(0x15e)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]==_0xa1549(0x153))var _0x372470=users[_0xa1549(0x153)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]=='Spanish')var _0x372470=users[_0xa1549(0x17e)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]=='French')var _0x372470=users[_0xa1549(0x128)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]=='Portuguese\x20(BR)')var _0x372470=users['Portuguese'];else{if(_0x36ec06[0x0][_0xa1549(0x194)]==_0xa1549(0x155))var _0x372470=users[_0xa1549(0x155)];else{if(_0x36ec06[0x0][_0xa1549(0x194)]==_0xa1549(0x176))var _0x372470=users['Arabic'];}}}}}}}_0x2e86fd['render'](_0xa1549(0x13b),{'success':_0x37a6c4[_0xa1549(0x143)](_0xa1549(0x16e)),'errors':_0x37a6c4[_0xa1549(0x143)](_0xa1549(0x16f)),'role':_0x2eb386,'profile':_0xe47d1b,'user':_0x53b665,'master_shop':_0x36ec06,'language':_0x372470});}catch(_0x2beee0){console[_0xa1549(0x165)](_0x2beee0);}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x117),auth,async(_0x59b3af,_0x40423e)=>{const _0x40f11c=a0_0x31ef99;try{const {name:_0x213e0e,products:_0x20bc45}=_0x59b3af[_0x40f11c(0x135)],_0x5ba724=new categories({'name':_0x213e0e,'products':_0x20bc45}),_0x57d81d=await categories['findOne']({'name':_0x213e0e});_0x57d81d?_0x59b3af[_0x40f11c(0x143)](_0x40f11c(0x16f),_0x213e0e+_0x40f11c(0x130)):_0x59b3af[_0x40f11c(0x143)](_0x40f11c(0x16e),_0x213e0e+'\x20categories\x20is\x20add\x20successfully');const _0x49ca30=await _0x5ba724[_0x40f11c(0x18e)]();_0x40423e[_0x40f11c(0x150)](_0x40f11c(0x14e));}catch(_0x327d8d){console['log'](_0x327d8d);}}),router['get'](a0_0x31ef99(0x16a),auth,async(_0x49ca8f,_0x216bf3)=>{const _0x5670f2=a0_0x31ef99;try{const {username:_0x10eb94,email:_0x51a6f2,role:_0x103492}=_0x49ca8f[_0x5670f2(0x102)],_0x42d25a=_0x49ca8f[_0x5670f2(0x102)],_0x243d3e=await profile[_0x5670f2(0x126)]({'email':_0x42d25a[_0x5670f2(0x145)]}),_0x12bc62=await master_shop[_0x5670f2(0x171)]();console[_0x5670f2(0x165)]('master',_0x12bc62);const _0x39c69f=_0x49ca8f[_0x5670f2(0x19a)]['id'];console['log'](_0x39c69f);const _0x383f15=await categories['findById'](_0x39c69f);if(_0x12bc62[0x0][_0x5670f2(0x194)]==_0x5670f2(0x16c))var _0x41da74=users['English'];else{if(_0x12bc62[0x0][_0x5670f2(0x194)]==_0x5670f2(0x15e))var _0x41da74=users['Hindi'];else{if(_0x12bc62[0x0][_0x5670f2(0x194)]==_0x5670f2(0x153))var _0x41da74=users[_0x5670f2(0x153)];else{if(_0x12bc62[0x0][_0x5670f2(0x194)]==_0x5670f2(0x17e))var _0x41da74=users[_0x5670f2(0x17e)];else{if(_0x12bc62[0x0][_0x5670f2(0x194)]==_0x5670f2(0x128))var _0x41da74=users[_0x5670f2(0x128)];else{if(_0x12bc62[0x0][_0x5670f2(0x194)]=='Portuguese\x20(BR)')var _0x41da74=users['Portuguese'];else{if(_0x12bc62[0x0]['language']==_0x5670f2(0x155))var _0x41da74=users['Chinese'];else{if(_0x12bc62[0x0]['language']=='Arabic\x20(ae)')var _0x41da74=users['Arabic'];}}}}}}}_0x216bf3[_0x5670f2(0x11c)](_0x5670f2(0x13b),{'success':_0x49ca8f[_0x5670f2(0x143)](_0x5670f2(0x16e)),'errors':_0x49ca8f[_0x5670f2(0x143)](_0x5670f2(0x16f)),'role':_0x42d25a,'profile':_0x243d3e,'master_shop':_0x12bc62,'user':_0x383f15,'language':_0x41da74});}catch(_0x503566){console[_0x5670f2(0x165)](_0x503566);}}),router[a0_0x31ef99(0x197)]('/categories/:id',auth,async(_0x5e892f,_0x1f3d91)=>{const _0x38c00b=a0_0x31ef99;try{const _0x2a7ab3=_0x5e892f[_0x38c00b(0x19a)]['id'],_0x569f1c=await categories[_0x38c00b(0x120)](_0x2a7ab3,_0x5e892f[_0x38c00b(0x135)]);_0x5e892f['flash']('success',''+users[_0x38c00b(0x19b)]),_0x1f3d91['redirect'](_0x38c00b(0x14e));}catch(_0x4883df){console[_0x38c00b(0x165)](_0x4883df);}}),router['get'](a0_0x31ef99(0xed),auth,async(_0x182af5,_0x349330)=>{const _0x18e2d0=a0_0x31ef99;try{const _0x119bac=_0x182af5[_0x18e2d0(0x19a)]['id'],_0x1bde7e=await categories['findByIdAndDelete'](_0x119bac);_0x182af5[_0x18e2d0(0x143)](_0x18e2d0(0x16e),_0x18e2d0(0x192)),_0x349330[_0x18e2d0(0x150)](_0x18e2d0(0x14e));}catch(_0x5e3835){console[_0x18e2d0(0x165)](_0x5e3835);}}),router['get'](a0_0x31ef99(0xf3),auth,async(_0x55a09c,_0x4141b0)=>{const _0x66b545=a0_0x31ef99;try{const {username:_0x21138d,email:_0x2061cb,role:_0x839cd7}=_0x55a09c[_0x66b545(0x102)],_0x208f68=_0x55a09c[_0x66b545(0x102)],_0x7c94ea=await profile[_0x66b545(0x126)]({'email':_0x208f68[_0x66b545(0x145)]}),_0x3b7383=await master_shop[_0x66b545(0x171)]();console[_0x66b545(0x165)](_0x66b545(0x182),_0x3b7383);const _0x28f7da=await brands[_0x66b545(0x171)]();if(_0x3b7383[0x0][_0x66b545(0x194)]=='English\x20(US)')var _0x519043=users['English'];else{if(_0x3b7383[0x0][_0x66b545(0x194)]==_0x66b545(0x15e))var _0x519043=users['Hindi'];else{if(_0x3b7383[0x0][_0x66b545(0x194)]==_0x66b545(0x153))var _0x519043=users[_0x66b545(0x153)];else{if(_0x3b7383[0x0]['language']=='Spanish')var _0x519043=users['Spanish'];else{if(_0x3b7383[0x0][_0x66b545(0x194)]==_0x66b545(0x128))var _0x519043=users[_0x66b545(0x128)];else{if(_0x3b7383[0x0][_0x66b545(0x194)]==_0x66b545(0x11b))var _0x519043=users['Portuguese'];else{if(_0x3b7383[0x0][_0x66b545(0x194)]=='Chinese')var _0x519043=users[_0x66b545(0x155)];else{if(_0x3b7383[0x0][_0x66b545(0x194)]==_0x66b545(0x176))var _0x519043=users[_0x66b545(0x121)];}}}}}}}_0x4141b0[_0x66b545(0x11c)](_0x66b545(0x160),{'success':_0x55a09c['flash'](_0x66b545(0x16e)),'errors':_0x55a09c[_0x66b545(0x143)](_0x66b545(0x16f)),'role':_0x208f68,'profile':_0x7c94ea,'master_shop':_0x3b7383,'user':_0x28f7da,'language':_0x519043});}catch(_0x2071aa){console['log'](_0x2071aa);}}),router[a0_0x31ef99(0x197)]('/brands',auth,async(_0x5b9fb9,_0x3b8a83)=>{const _0x12d9dc=a0_0x31ef99;try{const {name:_0x1912b3,products:_0x2a9dcb}=_0x5b9fb9['body'],_0x22a7a4=new brands({'name':_0x1912b3,'products':_0x2a9dcb}),_0x493ee0=await brands[_0x12d9dc(0x126)]({'name':_0x1912b3});_0x493ee0?_0x5b9fb9['flash'](_0x12d9dc(0x16f),_0x1912b3+_0x12d9dc(0x195)):_0x5b9fb9['flash'](_0x12d9dc(0x16e),_0x1912b3+_0x12d9dc(0x125));const _0x15fd34=await _0x22a7a4[_0x12d9dc(0x18e)]();_0x3b8a83['redirect']('/products/brands');}catch(_0x357afd){console['log'](_0x357afd);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0x139),auth,async(_0x119488,_0x49c139)=>{const _0x427325=a0_0x31ef99;try{const {username:_0x56b410,email:_0x5b53ba,role:_0x367383}=_0x119488[_0x427325(0x102)],_0x938d11=_0x119488['user'],_0x6d9970=await profile[_0x427325(0x126)]({'email':_0x938d11[_0x427325(0x145)]}),_0x3a256c=await master_shop[_0x427325(0x171)]();console['log'](_0x427325(0x182),_0x3a256c);const _0x20d9a6=_0x119488['params']['id'];console[_0x427325(0x165)](_0x20d9a6);const _0x1fe2cf=await brands['findById'](_0x20d9a6);if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x16c))var _0x41abb1=users[_0x427325(0x127)];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x15e))var _0x41abb1=users[_0x427325(0x15e)];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x153))var _0x41abb1=users[_0x427325(0x153)];else{if(_0x3a256c[0x0]['language']=='Spanish')var _0x41abb1=users[_0x427325(0x17e)];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x128))var _0x41abb1=users[_0x427325(0x128)];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x11b))var _0x41abb1=users[_0x427325(0x15f)];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x155))var _0x41abb1=users['Chinese'];else{if(_0x3a256c[0x0][_0x427325(0x194)]==_0x427325(0x176))var _0x41abb1=users[_0x427325(0x121)];}}}}}}}_0x49c139['render'](_0x427325(0x160),{'success':_0x119488[_0x427325(0x143)](_0x427325(0x16e)),'errors':_0x119488[_0x427325(0x143)](_0x427325(0x16f)),'role':_0x938d11,'profile':_0x6d9970,'master_shop':_0x3a256c,'user':_0x1fe2cf,'language':_0x41abb1});}catch(_0x32eb49){console['log'](_0x32eb49);}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x139),auth,async(_0x3341a4,_0x15209a)=>{const _0x2fa32b=a0_0x31ef99;try{const _0x5e6e70=_0x3341a4['params']['id'],_0x5c85ed=await brands[_0x2fa32b(0x120)](_0x5e6e70,_0x3341a4['body']);_0x3341a4[_0x2fa32b(0x143)](_0x2fa32b(0x16e),_0x2fa32b(0x15a)),_0x15209a[_0x2fa32b(0x150)](_0x2fa32b(0x101));}catch(_0x213c90){console[_0x2fa32b(0x165)](_0x213c90);}}),router['get'](a0_0x31ef99(0x13f),auth,async(_0xaf3f71,_0x368774)=>{const _0x12828f=a0_0x31ef99;try{const _0x1bf83=_0xaf3f71[_0x12828f(0x19a)]['id'],_0x5eac35=await brands[_0x12828f(0x11e)](_0x1bf83);_0xaf3f71['flash']('success',_0x12828f(0x10d)),_0x368774[_0x12828f(0x150)]('/products/brands');}catch(_0x40c7d1){console[_0x12828f(0x165)](_0x40c7d1);}}),router[a0_0x31ef99(0x113)]('/units',auth,async(_0x38a434,_0x5ed8cb)=>{const _0x438d01=a0_0x31ef99;try{const {username:_0x23f472,email:_0x35e83b,role:_0x19b8d1}=_0x38a434[_0x438d01(0x102)],_0x1f888e=_0x38a434[_0x438d01(0x102)],_0x3bce05=await profile[_0x438d01(0x126)]({'email':_0x1f888e[_0x438d01(0x145)]}),_0x27b5b4=await master_shop['find']();console['log'](_0x438d01(0x182),_0x27b5b4);const _0x238685=await units[_0x438d01(0x171)]();if(_0x27b5b4[0x0]['language']==_0x438d01(0x16c))var _0x589e7b=users[_0x438d01(0x127)];else{if(_0x27b5b4[0x0][_0x438d01(0x194)]==_0x438d01(0x15e))var _0x589e7b=users[_0x438d01(0x15e)];else{if(_0x27b5b4[0x0][_0x438d01(0x194)]=='German')var _0x589e7b=users[_0x438d01(0x153)];else{if(_0x27b5b4[0x0]['language']==_0x438d01(0x17e))var _0x589e7b=users[_0x438d01(0x17e)];else{if(_0x27b5b4[0x0][_0x438d01(0x194)]=='French')var _0x589e7b=users[_0x438d01(0x128)];else{if(_0x27b5b4[0x0]['language']==_0x438d01(0x11b))var _0x589e7b=users[_0x438d01(0x15f)];else{if(_0x27b5b4[0x0][_0x438d01(0x194)]=='Chinese')var _0x589e7b=users['Chinese'];else{if(_0x27b5b4[0x0]['language']=='Arabic\x20(ae)')var _0x589e7b=users[_0x438d01(0x121)];}}}}}}}_0x5ed8cb['render'](_0x438d01(0xf7),{'success':_0x38a434[_0x438d01(0x143)](_0x438d01(0x16e)),'errors':_0x38a434[_0x438d01(0x143)]('errors'),'role':_0x1f888e,'profile':_0x3bce05,'master_shop':_0x27b5b4,'user':_0x238685,'language':_0x589e7b});}catch(_0x4d5f56){console[_0x438d01(0x165)](_0x4d5f56);}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x1a6),auth,async(_0x32f19f,_0x540598)=>{const _0x2e4b86=a0_0x31ef99;try{const {name:_0x2d9261,secondary_unit:_0x3e654d,products:_0x3bb571}=_0x32f19f[_0x2e4b86(0x135)],_0x3438ac=new units({'name':_0x2d9261,'secondary_unit':_0x3e654d,'products':_0x3bb571}),_0x3f7325=await units[_0x2e4b86(0x126)]({'name':_0x2d9261});_0x3f7325?_0x32f19f[_0x2e4b86(0x143)](_0x2e4b86(0x16f),_0x2d9261+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x32f19f[_0x2e4b86(0x143)](_0x2e4b86(0x16e),_0x2d9261+'\x20unit\x20is\x20add\x20successfully');const _0x24c0d8=await _0x3438ac['save']();_0x540598[_0x2e4b86(0x150)](_0x2e4b86(0x134));}catch(_0x2623c9){console[_0x2e4b86(0x165)](_0x2623c9);}}),router[a0_0x31ef99(0x113)]('/units/:id',auth,async(_0x15a9a4,_0x4c6b46)=>{const _0x51a1c1=a0_0x31ef99;try{const {username:_0x1e918d,email:_0x20e977,role:_0x1bdf1a}=_0x15a9a4[_0x51a1c1(0x102)],_0x3eebf5=_0x15a9a4[_0x51a1c1(0x102)],_0x53098c=await profile[_0x51a1c1(0x126)]({'email':_0x3eebf5[_0x51a1c1(0x145)]}),_0x1df9e3=await master_shop['find']();console[_0x51a1c1(0x165)]('master',_0x1df9e3);const _0x1ff971=_0x15a9a4['params']['id'],_0xfce0fb=await units[_0x51a1c1(0x183)](_0x1ff971);if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x16c))var _0x9b550e=users[_0x51a1c1(0x127)];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]=='Hindi')var _0x9b550e=users[_0x51a1c1(0x15e)];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x153))var _0x9b550e=users['German'];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x17e))var _0x9b550e=users[_0x51a1c1(0x17e)];else{if(_0x1df9e3[0x0]['language']==_0x51a1c1(0x128))var _0x9b550e=users[_0x51a1c1(0x128)];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x11b))var _0x9b550e=users[_0x51a1c1(0x15f)];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x155))var _0x9b550e=users['Chinese'];else{if(_0x1df9e3[0x0][_0x51a1c1(0x194)]==_0x51a1c1(0x176))var _0x9b550e=users['Arabic'];}}}}}}}_0x4c6b46[_0x51a1c1(0x11c)]('units',{'success':_0x15a9a4[_0x51a1c1(0x143)](_0x51a1c1(0x16e)),'errors':_0x15a9a4['flash'](_0x51a1c1(0x16f)),'role':_0x3eebf5,'profile':_0x53098c,'master_shop':_0x1df9e3,'user':_0xfce0fb,'language':_0x9b550e});}catch(_0x521fc3){console[_0x51a1c1(0x165)](_0x521fc3);}}),router[a0_0x31ef99(0x197)]('/units/:id',auth,async(_0x1174ce,_0x7062ce)=>{const _0xadce0d=a0_0x31ef99;try{const _0x3c2988=_0x1174ce['params']['id'],_0x244a3c=await units[_0xadce0d(0x120)](_0x3c2988,_0x1174ce['body']);_0x1174ce[_0xadce0d(0x143)](_0xadce0d(0x16e),_0xadce0d(0x132)),_0x7062ce[_0xadce0d(0x150)](_0xadce0d(0x134));}catch(_0x495381){console['log'](_0x495381);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0x172),auth,async(_0x5524f2,_0x3239c0)=>{const _0x5d5bd0=a0_0x31ef99;try{const _0x491ddd=_0x5524f2['params']['id'],_0x4016e2=await units['findByIdAndDelete'](_0x491ddd);_0x5524f2['flash'](_0x5d5bd0(0x16e),_0x5d5bd0(0x141)),_0x3239c0[_0x5d5bd0(0x150)]('/products/units');}catch(_0x57c8cd){console[_0x5d5bd0(0x165)](_0x57c8cd);}});const storage=multer[a0_0x31ef99(0x167)]({'destination':(_0x41d176,_0x39d3ba,_0x15c266)=>{const _0x4aa496=a0_0x31ef99;_0x15c266(null,_0x4aa496(0x164));},'filename':(_0x64e399,_0x1c08c0,_0x22f02b)=>{const _0x56e782=a0_0x31ef99;_0x22f02b(null,Date[_0x56e782(0x136)]()+_0x1c08c0['originalname']);}}),upload=multer({'storage':storage});function a0_0x1932(){const _0x4ec6a1=['/select_data','master','findById','product_docs','json','PName','name','/barcode_filter','/barcode/:id','Secondary_Code','680022kUyxxd','product_details.product_name','\x20Edit\x20Successfully','save','6cSliml','edit_product','sheet_to_json','categories\x20data\x20delete\x20successfully','\x20<>\x20','language','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','2494952qjBWrQ','post','width','warehouse','params','categories_edit','end','PUnits','addPage','product_barcode_products','$product_docs','Raw\x20Materials','secondary_code','/print_barcode','/products_import_migrate_file','$product_details.product_stock','/units','numeric','columns','Primary_Code','max_number_per_units','Products\x20find_data','/print_barcode_single/:id','defaultProduct.avif','Finished\x20Goods','sku','CODE128','/categories/delete/:id','Brands','bind','pdfkit-table','barcode\x20Product\x20master','maxStocks','/brands','/print_barcode_filter/','/products_export_migrate_file','jsbarcode','units','Products\x20master','3548giYoIJ','/view/:id','5147YBIApi','edit\x20Product\x20master','min','ProductCode','/view/add_products','utils','/products/brands','user','Products\x20warehouse_data','$_id','image','$brand','aggregate','/filter_product','Category','toString','Sheets','multer','brand\x20data\x20delete\x20successfully','\x20added\x20successfully','canvas','write','product_code','Products_category','get','product\x20edit','public/Migration','201TIlssS','/categories','Secondary_Units','exceljs','Router','Portuguese\x20(BR)','render','/print_barcode_filter_search/','findByIdAndDelete','124GaTXgy','findByIdAndUpdate','Arabic','Product_Name','stock','message','\x20brand\x20is\x20add\x20successfully','findOne','English','French','$product_category','categ','setHeader','$category','product_category','public/Migration/','filename','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','PCat','unit\x20data\x20update\x20successfully','base64','/products/units','body','now','brand','unit','/brands/:id','push','categories','barcode\x20user_id','add_product','PSecondaryUnits','/brands/delete/:id','toBuffer','unit\x20data\x20delete\x20successfully','PBrands','flash','../public/language/languages.json','email','concat','product_barcode','long','alertquantity','length','923510DWsNNn','Units','express','/products/categories','send','redirect','Maximum_Stocks','PAlQty','German','category','Chinese','MaxperUnits','originalname','Product_Code','2531895IxELwU','brand\x20data\x20update\x20successfully','then','$product_details.product_name','Products','Hindi','Portuguese','brands','370480PoZoLJ','height','addWorksheet','public/upload','log','exports','diskStorage','primary_code','/products/view','/categories/:id','secondary_unit','English\x20(US)','product\x20add\x20successfully','success','errors','file','find','/units/delete/:id','xlsx','product_stock','_id','Arabic\x20(ae)','/view','readFile','Alert_QTY','data','Workbook','maxProdPerUnit','products','Spanish','single','status'];a0_0x1932=function(){return _0x4ec6a1;};return a0_0x1932();}router['get'](a0_0x31ef99(0x177),auth,async(_0x25ac4a,_0x5405c3)=>{const _0x4eed18=a0_0x31ef99;try{const {username:_0x54284d,email:_0x3dcaed,role:_0x134fa7}=_0x25ac4a[_0x4eed18(0x102)],_0x1bf304=_0x25ac4a['user'],_0xa50fc9=await profile[_0x4eed18(0x126)]({'email':_0x1bf304['email']}),_0x37d3af={'year':_0x4eed18(0x1a7),'month':_0x4eed18(0x148),'day':_0x4eed18(0x1a7)},_0x4108ca=await master_shop[_0x4eed18(0x171)]();console[_0x4eed18(0x165)](_0x4eed18(0xf8),_0x4108ca);const _0x4b1b1e=await product['find']();console[_0x4eed18(0x165)]('Products\x20find_data',_0x4b1b1e);const _0x4197ae=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$lookup':{'from':_0x4eed18(0x17d),'localField':_0x4eed18(0x18c),'foreignField':_0x4eed18(0x187),'as':_0x4eed18(0x184)}},{'$unwind':_0x4eed18(0x1a0)},{'$project':{'product_name':_0x4eed18(0x15c),'product_stock':_0x4eed18(0x1a5)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':'$product_stock'}}}]);console[_0x4eed18(0x165)](_0x4eed18(0x103),_0x4197ae),_0x4197ae['forEach'](_0x32db40=>{const _0x3cce0d=_0x4b1b1e['map'](_0x3d60eb=>{const _0x45e4b1=a0_0x5585;_0x3d60eb['name']==_0x32db40[_0x45e4b1(0x175)]&&(_0x3d60eb[_0x45e4b1(0x123)]=parseInt(_0x3d60eb[_0x45e4b1(0x123)])+parseInt(_0x32db40[_0x45e4b1(0x174)]));});}),console[_0x4eed18(0x165)](_0x4eed18(0x1ab),_0x4b1b1e);if(_0x4108ca[0x0][_0x4eed18(0x194)]==_0x4eed18(0x16c))var _0x563090=users[_0x4eed18(0x127)];else{if(_0x4108ca[0x0][_0x4eed18(0x194)]==_0x4eed18(0x15e))var _0x563090=users[_0x4eed18(0x15e)];else{if(_0x4108ca[0x0][_0x4eed18(0x194)]==_0x4eed18(0x153))var _0x563090=users[_0x4eed18(0x153)];else{if(_0x4108ca[0x0][_0x4eed18(0x194)]==_0x4eed18(0x17e))var _0x563090=users[_0x4eed18(0x17e)];else{if(_0x4108ca[0x0][_0x4eed18(0x194)]=='French')var _0x563090=users[_0x4eed18(0x128)];else{if(_0x4108ca[0x0]['language']==_0x4eed18(0x11b))var _0x563090=users[_0x4eed18(0x15f)];else{if(_0x4108ca[0x0]['language']=='Chinese')var _0x563090=users[_0x4eed18(0x155)];else{if(_0x4108ca[0x0][_0x4eed18(0x194)]==_0x4eed18(0x176))var _0x563090=users[_0x4eed18(0x121)];}}}}}}}_0x5405c3[_0x4eed18(0x11c)]('products',{'success':_0x25ac4a['flash'](_0x4eed18(0x16e)),'errors':_0x25ac4a[_0x4eed18(0x143)](_0x4eed18(0x16f)),'alldata':_0x4b1b1e,'profile':_0xa50fc9,'master_shop':_0x4108ca,'role':_0x1bf304,'product_stock':_0x4197ae,'language':_0x563090});}catch(_0x408f07){console[_0x4eed18(0x165)](_0x408f07);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0xff),auth,async(_0x340d2d,_0x75f305)=>{const _0x1a903c=a0_0x31ef99;try{const {username:_0x385386,email:_0x316991,role:_0x340f05}=_0x340d2d[_0x1a903c(0x102)],_0x23db2b=_0x340d2d[_0x1a903c(0x102)],_0x144b3=await profile['findOne']({'email':_0x23db2b[_0x1a903c(0x145)]}),_0x43cf51=await master_shop[_0x1a903c(0x171)]();console[_0x1a903c(0x165)](_0x1a903c(0x182),_0x43cf51);const _0x424151=await categories[_0x1a903c(0x171)]({}),_0x4b7c25=await brands[_0x1a903c(0x171)]({}),_0x4e4687=await units[_0x1a903c(0x171)]({}),_0x59cdae=await warehouse[_0x1a903c(0x171)]({'status':'Enabled'});if(_0x43cf51[0x0][_0x1a903c(0x194)]==_0x1a903c(0x16c))var _0x3b96a7=users['English'];else{if(_0x43cf51[0x0][_0x1a903c(0x194)]==_0x1a903c(0x15e))var _0x3b96a7=users[_0x1a903c(0x15e)];else{if(_0x43cf51[0x0][_0x1a903c(0x194)]==_0x1a903c(0x153))var _0x3b96a7=users[_0x1a903c(0x153)];else{if(_0x43cf51[0x0][_0x1a903c(0x194)]=='Spanish')var _0x3b96a7=users[_0x1a903c(0x17e)];else{if(_0x43cf51[0x0]['language']==_0x1a903c(0x128))var _0x3b96a7=users[_0x1a903c(0x128)];else{if(_0x43cf51[0x0]['language']=='Portuguese\x20(BR)')var _0x3b96a7=users[_0x1a903c(0x15f)];else{if(_0x43cf51[0x0]['language']=='Chinese')var _0x3b96a7=users[_0x1a903c(0x155)];else{if(_0x43cf51[0x0][_0x1a903c(0x194)]=='Arabic\x20(ae)')var _0x3b96a7=users['Arabic'];}}}}}}}_0x75f305[_0x1a903c(0x11c)](_0x1a903c(0x13d),{'success':_0x340d2d[_0x1a903c(0x143)]('success'),'errors':_0x340d2d[_0x1a903c(0x143)](_0x1a903c(0x16f)),'role':_0x23db2b,'profile':_0x144b3,'categories':_0x424151,'brands':_0x4b7c25,'master_shop':_0x43cf51,'units':_0x4e4687,'language':_0x3b96a7,'find_data':_0x59cdae});}catch(_0x3340f0){console[_0x1a903c(0x165)](_0x3340f0);}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0xff),auth,upload[a0_0x31ef99(0x17f)](a0_0x31ef99(0x105)),async(_0x48292b,_0x4c7cf8)=>{const _0x38b877=a0_0x31ef99;try{const {name:_0x2bf4e4,category:_0x38ebd5,brand:_0x8e0aae,unit:_0x5e685,alertquantity:_0x5312ae,stock:_0x10f503,product_code:_0x2621af,warehouse:_0x1311d3,primary_ItemCode:_0xf0415b,second_ItemCode:_0x16c5aa,second_unit:_0x4b0007,maxPerUnit:_0x4a72c1,MaxPerProduct:_0x6bda29}=_0x48292b[_0x38b877(0x135)],_0xb93ad2=_0x48292b[_0x38b877(0x170)]?.[_0x38b877(0x12f)]||_0x38b877(0x1ad),_0x14f247=new product({'image':_0xb93ad2,'name':_0x2bf4e4,'category':_0x38ebd5,'brand':_0x8e0aae,'unit':_0x5e685,'alertquantity':_0x5312ae,'stock':_0x10f503,'product_code':_0x2621af,'warehouse':_0x1311d3,'primary_code':_0xf0415b,'secondary_code':_0x16c5aa,'second_unit':_0x4b0007,'maxStocks':_0x6bda29,'maxProdPerUnit':_0x4a72c1}),_0x45e317=await _0x14f247[_0x38b877(0x18e)](),_0x4c7bff=await categories[_0x38b877(0x126)]({'name':_0x38ebd5});_0x4c7bff[_0x38b877(0x17d)]=parseInt(_0x4c7bff['products'])+0x1,await _0x4c7bff[_0x38b877(0x18e)]();const _0x688a50=await brands[_0x38b877(0x126)]({'name':_0x8e0aae});_0x688a50[_0x38b877(0x17d)]=parseInt(_0x688a50[_0x38b877(0x17d)])+0x1,await _0x688a50[_0x38b877(0x18e)]();const _0x221457=await units[_0x38b877(0x126)]({'name':_0x5e685});_0x221457[_0x38b877(0x17d)]=parseInt(_0x221457[_0x38b877(0x17d)])+0x1,await _0x221457[_0x38b877(0x18e)](),_0x48292b['flash'](_0x38b877(0x16e),_0x38b877(0x16d)),_0x4c7cf8['redirect'](_0x38b877(0x169));}catch(_0x3b6661){console[_0x38b877(0x165)](_0x3b6661);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0xfa),auth,async(_0x565ab4,_0x5f463c)=>{const _0x50e728=a0_0x31ef99;try{const {username:_0x36a48f,email:_0x44fba8,role:_0x10afe8}=_0x565ab4[_0x50e728(0x102)],_0x3fd204=_0x565ab4[_0x50e728(0x102)],_0xc8a2b4=await profile[_0x50e728(0x126)]({'email':_0x3fd204[_0x50e728(0x145)]}),_0x19cc30=await master_shop[_0x50e728(0x171)]();console[_0x50e728(0x165)](_0x50e728(0xfc),_0x19cc30);const _0x542db5=_0x565ab4[_0x50e728(0x19a)]['id'],_0x5606ce=await product[_0x50e728(0x183)](_0x542db5),_0x42b152=await categories[_0x50e728(0x171)]({}),_0x35a378=await brands['find']({}),_0x39eec8=await units[_0x50e728(0x171)]({}),_0x5f2589=await warehouse[_0x50e728(0x171)]({'status':'Enabled'}),_0x502f9d=await units[_0x50e728(0x107)]([{'$group':{'_id':_0x50e728(0x104),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x19cc30[0x0][_0x50e728(0x194)]==_0x50e728(0x16c))var _0x4a70e1=users['English'];else{if(_0x19cc30[0x0]['language']==_0x50e728(0x15e))var _0x4a70e1=users[_0x50e728(0x15e)];else{if(_0x19cc30[0x0][_0x50e728(0x194)]=='German')var _0x4a70e1=users[_0x50e728(0x153)];else{if(_0x19cc30[0x0][_0x50e728(0x194)]=='Spanish')var _0x4a70e1=users['Spanish'];else{if(_0x19cc30[0x0]['language']==_0x50e728(0x128))var _0x4a70e1=users[_0x50e728(0x128)];else{if(_0x19cc30[0x0][_0x50e728(0x194)]==_0x50e728(0x11b))var _0x4a70e1=users[_0x50e728(0x15f)];else{if(_0x19cc30[0x0][_0x50e728(0x194)]=='Chinese')var _0x4a70e1=users[_0x50e728(0x155)];else{if(_0x19cc30[0x0][_0x50e728(0x194)]==_0x50e728(0x176))var _0x4a70e1=users['Arabic'];}}}}}}}_0x5f463c['render'](_0x50e728(0x190),{'success':_0x565ab4[_0x50e728(0x143)](_0x50e728(0x16e)),'errors':_0x565ab4[_0x50e728(0x143)]('errors'),'role':_0x3fd204,'profile':_0xc8a2b4,'alldata':_0x5606ce,'categories':_0x42b152,'brands':_0x35a378,'master_shop':_0x19cc30,'units':_0x39eec8,'secondunit':_0x502f9d,'find_data':_0x5f2589,'language':_0x4a70e1});}catch(_0x458ef0){console['log'](_0x458ef0);}}),router['post'](a0_0x31ef99(0xfa),auth,upload[a0_0x31ef99(0x17f)]('image'),async(_0x173f26,_0x5d93f9)=>{const _0x259e50=a0_0x31ef99;try{console['log']('hello');const _0x1d2f4a=_0x173f26[_0x259e50(0x19a)]['id'],_0xe77d32=await product[_0x259e50(0x183)](_0x1d2f4a),{image:_0x2f1afd,name:_0x17dcec,category:_0x3a635d,brand:_0x14362b,sku:_0x5b4708,unit:_0x5b427a,alertquantity:_0x29b405,product_code:_0x2c16cf,warehouse:_0x361072,primary_ItemCode:_0x52a69c,second_ItemCode:_0x2f56d8,second_unit:_0x134384,maxPerUnit:_0x2923ce,MaxPerProduct:_0x13208b,prod_catdata:_0x287b9a}=_0x173f26['body'];_0x173f26[_0x259e50(0x170)]&&(_0xe77d32[_0x259e50(0x105)]=_0x173f26[_0x259e50(0x170)][_0x259e50(0x12f)]);_0xe77d32[_0x259e50(0x187)]=_0x17dcec,_0xe77d32['category']=_0x3a635d,_0xe77d32[_0x259e50(0x137)]=_0x14362b,_0xe77d32[_0x259e50(0xeb)]=_0x5b4708,_0xe77d32[_0x259e50(0x138)]=_0x5b427a,_0xe77d32[_0x259e50(0x149)]=_0x29b405,_0xe77d32[_0x259e50(0x111)]=_0x2c16cf,_0xe77d32[_0x259e50(0x199)]=_0x361072,_0xe77d32[_0x259e50(0x168)]=_0x52a69c,_0xe77d32[_0x259e50(0x1a2)]=_0x2f56d8,_0xe77d32[_0x259e50(0x16b)]=_0x134384,_0xe77d32[_0x259e50(0xf2)]=_0x13208b,_0xe77d32[_0x259e50(0x17c)]=_0x2923ce,_0xe77d32[_0x259e50(0x12d)]=_0x287b9a;const _0x431581=await _0xe77d32['save']();console['log'](_0x259e50(0x114),_0xe77d32),_0x173f26[_0x259e50(0x143)]('success','product\x20update\x20successfully'),_0x5d93f9[_0x259e50(0x150)](_0x259e50(0x169));}catch(_0x555936){console[_0x259e50(0x165)](_0x555936);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0x189),auth,async(_0x21d145,_0x108289)=>{const _0x41e9c9=a0_0x31ef99;try{const {username:_0x1749a9,email:_0x4a923e,role:_0x403eac}=_0x21d145[_0x41e9c9(0x102)],_0xe5a558=_0x21d145['user'],_0x9ffc1b=await profile[_0x41e9c9(0x126)]({'email':_0xe5a558[_0x41e9c9(0x145)]}),_0x1cfaa4=await master_shop[_0x41e9c9(0x171)]();console[_0x41e9c9(0x165)](_0x41e9c9(0xf1),_0x1cfaa4);const _0x21c959=_0x21d145['params']['id'],_0x39b2ff=await product[_0x41e9c9(0x183)](_0x21c959);console['log'](_0x41e9c9(0x13c),_0x39b2ff);if(_0x1cfaa4[0x0]['language']==_0x41e9c9(0x16c))var _0x592960=users['English'];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x15e))var _0x592960=users[_0x41e9c9(0x15e)];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x153))var _0x592960=users['German'];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x17e))var _0x592960=users[_0x41e9c9(0x17e)];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x128))var _0x592960=users[_0x41e9c9(0x128)];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x11b))var _0x592960=users[_0x41e9c9(0x15f)];else{if(_0x1cfaa4[0x0][_0x41e9c9(0x194)]==_0x41e9c9(0x155))var _0x592960=users[_0x41e9c9(0x155)];else{if(_0x1cfaa4[0x0]['language']==_0x41e9c9(0x176))var _0x592960=users[_0x41e9c9(0x121)];}}}}}}}_0x108289['render'](_0x41e9c9(0x147),{'success':_0x21d145['flash'](_0x41e9c9(0x16e)),'errors':_0x21d145['flash']('errors'),'role':_0xe5a558,'profile':_0x9ffc1b,'alldata':_0x39b2ff,'master_shop':_0x1cfaa4,'language':_0x592960});}catch(_0x3f1924){console[_0x41e9c9(0x165)](_0x3f1924);}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0xf5),auth,async(_0xb4b403,_0x795175)=>{const _0x544601=a0_0x31ef99;try{const _0x16e989=new excelJS[(_0x544601(0x17b))](),_0x28213b=_0x16e989[_0x544601(0x163)](_0x544601(0x15d));return _0x28213b[_0x544601(0x1a8)]=[{'header':_0x544601(0x122),'key':_0x544601(0x186),'width':0xa},{'header':_0x544601(0xee),'key':_0x544601(0x142),'width':0xa},{'header':_0x544601(0x14c),'key':_0x544601(0x19d),'width':0xa},{'header':_0x544601(0x118),'key':_0x544601(0x13e),'width':0xa},{'header':_0x544601(0x1aa),'key':_0x544601(0x156),'width':0xa},{'header':_0x544601(0x1a9),'key':'ProductCode','width':0xa},{'header':_0x544601(0x18a),'key':_0x544601(0xfe),'width':0xa},{'header':_0x544601(0x158),'key':'ProductCode','width':0xa},{'header':'Category','key':_0x544601(0x131),'width':0xa},{'header':_0x544601(0x179),'key':_0x544601(0x152),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x544601(0x112),'key':'Prod_Cat','width':0xa}],_0x795175[_0x544601(0x12b)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x795175[_0x544601(0x12b)]('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x16e989['xlsx'][_0x544601(0x110)](_0x795175)[_0x544601(0x15b)](()=>{_0x795175['status'](0xc8);});}catch(_0x4f8125){_0x795175[_0x544601(0x180)](0x190)[_0x544601(0x14f)](_0x4f8125);}});function a0_0x5585(_0x32cda7,_0x51d879){const _0x19322b=a0_0x1932();return a0_0x5585=function(_0x55852e,_0x557986){_0x55852e=_0x55852e-0xea;let _0x1acd43=_0x19322b[_0x55852e];return _0x1acd43;},a0_0x5585(_0x32cda7,_0x51d879);}const storage1=multer[a0_0x31ef99(0x167)]({'destination':(_0x496229,_0x15c44a,_0x5cd9c8)=>{const _0x56af99=a0_0x31ef99;_0x5cd9c8(null,_0x56af99(0x115));},'filename':(_0x257e47,_0x5ab3f3,_0x42249a)=>{const _0x17ba82=a0_0x31ef99;_0x42249a(null,Date[_0x17ba82(0x136)]()+_0x5ab3f3[_0x17ba82(0x157)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x31ef99(0x1a4),auth,uploadMigrate[a0_0x31ef99(0x17f)]('migrate_product_fule'),async(_0xab3815,_0x565ce6)=>{const _0x1865d0=a0_0x31ef99,_0x2a8ec4=_0xab3815['file'][_0x1865d0(0x12f)],_0x206aa=await xlsx[_0x1865d0(0x178)](_0x1865d0(0x12e)+_0x2a8ec4);let _0xb26240=_0x206aa['SheetNames'],_0x9898e3=xlsx[_0x1865d0(0x100)][_0x1865d0(0x191)](_0x206aa[_0x1865d0(0x10b)][_0xb26240[0x0]]);for(const _0x295a01 of _0x9898e3){const _0x2d5543=_0x295a01[_0x1865d0(0x122)],_0x40f1eb=_0x295a01[_0x1865d0(0xee)],_0x77db11=_0x295a01[_0x1865d0(0x14c)],_0x3e8572=_0x295a01[_0x1865d0(0x118)],_0x357899=_0x295a01[_0x1865d0(0x158)],_0x21e6d5=_0x295a01[_0x1865d0(0x109)],_0x3bd9c2=_0x295a01[_0x1865d0(0x179)],_0x35b914=_0x295a01[_0x1865d0(0x1a9)],_0xfa3a0d=_0x295a01[_0x1865d0(0x18a)],_0x4911ab=_0x295a01[_0x1865d0(0x151)],_0x111ee8=_0x295a01[_0x1865d0(0x1aa)],_0x1aa683=_0x295a01[_0x1865d0(0x112)];try{let _0xb13598=await categories[_0x1865d0(0x126)]({'name':_0x21e6d5});if(!_0xb13598){const _0x3facc0=new categories({'name':_0x21e6d5,'products':'0'});_0xb13598=await _0x3facc0['save']();}let _0x2c81e1=await brands['findOne']({'name':_0x40f1eb});if(!_0x2c81e1){const _0x51c3d2=new brands({'name':_0x40f1eb,'products':'0'});_0x2c81e1=await _0x51c3d2[_0x1865d0(0x18e)]();}let _0x61aceb=await units[_0x1865d0(0x126)]({'name':_0x77db11,'secondary_unit':_0x3e8572});if(!_0x61aceb){const _0x3176e5=new units({'name':_0x77db11,'secondary_unit':_0x3e8572,'products':'0'});_0x61aceb=await _0x3176e5[_0x1865d0(0x18e)]();}const _0x14dc5d=await product[_0x1865d0(0x171)]({'name':_0x2d5543,'category':_0xb13598[_0x1865d0(0x187)],'brand':_0x2c81e1[_0x1865d0(0x187)],'secondary_unit':_0x61aceb[_0x1865d0(0x16b)],'product_code':_0x357899});console[_0x1865d0(0x165)](_0x14dc5d['length']+_0x1865d0(0x193)+_0xb13598[_0x1865d0(0x187)]+_0x1865d0(0x193)+_0x2c81e1['name']+_0x1865d0(0x193)+_0x61aceb['secondary_unit']+_0x1865d0(0x193)+_0x357899+'\x20<>\x20'+_0x2d5543);if(_0x14dc5d[_0x1865d0(0x14a)]===0x0){const _0x42e271=new product({'image':_0x1865d0(0x1ad),'name':_0x2d5543,'category':_0xb13598[_0x1865d0(0x187)],'brand':_0x2c81e1['name'],'unit':_0x61aceb[_0x1865d0(0x187)],'alertquantity':_0x3bd9c2,'product_code':_0x357899,'secondary_unit':_0x61aceb[_0x1865d0(0x16b)],'primary_code':_0x35b914,'secondary_code':_0xfa3a0d,'maxStocks':_0x4911ab,'maxProdPerUnit':_0x111ee8,'product_category':_0x1aa683}),_0x6f5956=await _0x42e271[_0x1865d0(0x18e)]();_0xb13598['products']=parseInt(_0xb13598[_0x1865d0(0x17d)])+0x1,await _0xb13598[_0x1865d0(0x18e)](),_0x2c81e1[_0x1865d0(0x17d)]=parseInt(_0x2c81e1[_0x1865d0(0x17d)])+0x1,await _0x2c81e1[_0x1865d0(0x18e)](),_0x61aceb[_0x1865d0(0x17d)]=parseInt(_0x61aceb[_0x1865d0(0x17d)])+0x1,await _0x61aceb['save'](),_0xab3815['flash'](_0x1865d0(0x16e),_0x2d5543+_0x1865d0(0x10e));}else{console[_0x1865d0(0x165)](_0x14dc5d[0x0]);const _0x42956c=_0x14dc5d[0x0];_0x42956c[_0x1865d0(0x154)]=_0xb13598[_0x1865d0(0x187)],_0x42956c[_0x1865d0(0x137)]=_0x2c81e1['name'],_0x42956c[_0x1865d0(0x138)]=_0x61aceb[_0x1865d0(0x187)],_0x42956c['alertquantity']=_0x3bd9c2,_0x42956c[_0x1865d0(0x111)]=_0x357899,_0x42956c[_0x1865d0(0x16b)]=_0x61aceb[_0x1865d0(0x16b)],_0x42956c[_0x1865d0(0x168)]=_0x35b914,_0x42956c[_0x1865d0(0x1a2)]=_0xfa3a0d,_0x42956c[_0x1865d0(0xf2)]=_0x4911ab,_0x42956c[_0x1865d0(0x17c)]=_0x111ee8,_0x42956c['product_category']=_0x1aa683;const _0x52dbac=await _0x42956c[_0x1865d0(0x18e)]();_0xab3815[_0x1865d0(0x143)](_0x1865d0(0x16e),_0x52dbac[_0x1865d0(0x187)]+_0x1865d0(0x18d));}}catch(_0x2235c6){_0x565ce6[_0x1865d0(0x180)](0x1f4)[_0x1865d0(0x185)]({'proderror':_0x2235c6[_0x1865d0(0x124)],'aproduct':_0x2d5543});}}_0x565ce6[_0x1865d0(0x150)](_0x1865d0(0x169));}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x181),auth,async(_0x4f20c9,_0x4f2a56)=>{const _0x56a7f0=a0_0x31ef99;try{console[_0x56a7f0(0x165)](_0x4f20c9['body']);const {data_cateory:_0x258dc1,datachoose:_0x456dde}=_0x4f20c9[_0x56a7f0(0x135)];var _0x170963;if(_0x456dde=='prod_categ')_0x170963=await product[_0x56a7f0(0x107)]([{'$group':{'_id':_0x56a7f0(0x129)}}]);else{if(_0x456dde=='brands')_0x170963=await product['aggregate']([{'$match':{'product_category':_0x258dc1}},{'$group':{'_id':_0x56a7f0(0x106)}}]);else _0x456dde==_0x56a7f0(0x12a)&&(_0x170963=await product[_0x56a7f0(0x107)]([{'$match':{'product_category':_0x258dc1}},{'$group':{'_id':_0x56a7f0(0x12c)}}]));}_0x4f2a56[_0x56a7f0(0x185)](_0x170963);}catch(_0x90d4b9){_0x4f2a56[_0x56a7f0(0x185)]({'message':_0x90d4b9['message']});}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x108),auth,async(_0xe4b14b,_0xebeb71)=>{const _0x1d4ac5=a0_0x31ef99;try{const {data_choosing:_0x59f4e3,data_selected:_0x52600b}=_0xe4b14b[_0x1d4ac5(0x135)];var _0xe18171;if(_0x59f4e3=='prod_categ')_0xe18171=await product['aggregate']([{'$match':{'product_category':_0x52600b}}]);else{if(_0x59f4e3=='brands')_0xe18171=await product[_0x1d4ac5(0x107)]([{'$match':{'brand':_0x52600b}}]);else _0x59f4e3==_0x1d4ac5(0x12a)&&(_0xe18171=await product[_0x1d4ac5(0x107)]([{'$match':{'category':_0x52600b}}]));}_0xebeb71['json'](_0xe18171);}catch(_0x8c0f1b){_0xebeb71['json']({'message':_0x8c0f1b[_0x1d4ac5(0x124)]});}}),router[a0_0x31ef99(0x113)](a0_0x31ef99(0x1a3),auth,async(_0xa4bc8b,_0x593c7e)=>{const _0x36ada6=a0_0x31ef99,_0x4c1cb6=_0xa4bc8b[_0x36ada6(0x102)],_0x1e5e61=await profile[_0x36ada6(0x126)]({'email':_0x4c1cb6[_0x36ada6(0x145)]}),_0x3195a4=await master_shop[_0x36ada6(0x171)](),_0x20a882=await product['find']();if(_0x3195a4[0x0][_0x36ada6(0x194)]==_0x36ada6(0x16c))var _0xe2dbd3=users[_0x36ada6(0x127)];else{if(_0x3195a4[0x0]['language']==_0x36ada6(0x15e))var _0xe2dbd3=users[_0x36ada6(0x15e)];else{if(_0x3195a4[0x0]['language']==_0x36ada6(0x153))var _0xe2dbd3=users['German'];else{if(_0x3195a4[0x0]['language']=='Spanish')var _0xe2dbd3=users[_0x36ada6(0x17e)];else{if(_0x3195a4[0x0]['language']==_0x36ada6(0x128))var _0xe2dbd3=users[_0x36ada6(0x128)];else{if(_0x3195a4[0x0][_0x36ada6(0x194)]=='Portuguese\x20(BR)')var _0xe2dbd3=users[_0x36ada6(0x15f)];else{if(_0x3195a4[0x0]['language']==_0x36ada6(0x155))var _0xe2dbd3=users['Chinese'];else{if(_0x3195a4[0x0][_0x36ada6(0x194)]==_0x36ada6(0x176))var _0xe2dbd3=users[_0x36ada6(0x121)];}}}}}}}_0x593c7e[_0x36ada6(0x11c)](_0x36ada6(0x19f),{'success':_0xa4bc8b[_0x36ada6(0x143)](_0x36ada6(0x16e)),'errors':_0xa4bc8b[_0x36ada6(0x143)]('errors'),'role':_0x4c1cb6,'profile':_0x1e5e61,'products':_0x20a882,'master_shop':_0x3195a4,'language':_0xe2dbd3});}),router[a0_0x31ef99(0x197)]('/barcode_data',auth,async(_0x3b2435,_0x3be0ea)=>{const _0x2de729=a0_0x31ef99,_0xe5b078=await product[_0x2de729(0x171)]();_0x3be0ea['json']({'data':_0xe5b078});}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x188),auth,async(_0x4858b9,_0x278ada)=>{const _0x568189=a0_0x31ef99;try{const {dataProdCat:_0x298f74,dataProdIdentity:_0x1f81a6}=_0x4858b9[_0x568189(0x135)];var _0x2b3d55;switch(_0x298f74){case'fg':switch(_0x1f81a6){case _0x568189(0xee):_0x2b3d55=await product[_0x568189(0x107)]([{'$match':{'product_category':_0x568189(0xea)}},{'$group':{'_id':_0x568189(0x106)}},{'$project':{'brand':'$_id'}}]);break;case _0x568189(0x109):_0x2b3d55=await product[_0x568189(0x107)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x568189(0x12c)}},{'$project':{'category':_0x568189(0x104)}}]);break;}break;case'rm':switch(_0x1f81a6){case _0x568189(0xee):_0x2b3d55=await product[_0x568189(0x107)]([{'$match':{'product_category':_0x568189(0x1a1)}},{'$group':{'_id':_0x568189(0x106)}},{'$project':{'brand':_0x568189(0x104)}}]);break;case _0x568189(0x109):_0x2b3d55=await product['aggregate']([{'$match':{'product_category':_0x568189(0x1a1)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x568189(0x104)}}]);break;}break;}_0x278ada[_0x568189(0x185)](_0x2b3d55);}catch(_0x2a3b2c){_0x278ada[_0x568189(0x185)]({'message':_0x2a3b2c['message']});}}),router['post'](a0_0x31ef99(0xf4),auth,async(_0x25f018,_0x56e259)=>{const _0x412cd3=a0_0x31ef99;try{console['log'](_0x25f018[_0x412cd3(0x135)]);const {prod_cat:_0x2744da,identity:_0x184c43,valueData:_0x3a43b4,typeofbarcode:_0x16eb6d}=_0x25f018['body'];let _0x34a6a6;switch(_0x2744da){case'fg':if(_0x184c43=='Brands')_0x34a6a6=await product['aggregate']([{'$match':{'product_category':_0x412cd3(0xea),'brand':_0x3a43b4}}]);else _0x184c43=='Category'&&(_0x34a6a6=await product[_0x412cd3(0x107)]([{'$match':{'product_category':_0x412cd3(0xea),'category':_0x3a43b4}}]));break;case'rm':if(_0x184c43=='Brands')_0x34a6a6=await product[_0x412cd3(0x107)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x3a43b4}}]);else _0x184c43=='Category'&&(_0x34a6a6=await product[_0x412cd3(0x107)]([{'$match':{'product_category':_0x412cd3(0x1a1),'category':_0x3a43b4}}]));break;}const _0x21278b=_0x2aa3dd=>_0x2aa3dd*0x48,_0x44310c={'width':0x3,'height':0x1},_0x4fb3d5=new PDFDocument({'margin':_0x21278b(0.75),'size':[_0x21278b(_0x44310c[_0x412cd3(0x198)]),_0x21278b(_0x44310c[_0x412cd3(0x162)])],'bufferPages':!![]}),_0x539e81=_0x34a6a6[_0x412cd3(0x14a)];for(let _0x413cff=0x0;_0x413cff<=_0x539e81;_0x413cff++){if(_0x413cff!=_0x539e81){const _0x1e959d=_0x34a6a6[_0x413cff][_0x412cd3(0x187)],_0x225828=_0x34a6a6[_0x413cff][_0x412cd3(0x168)],_0x486d85=_0x34a6a6[_0x413cff][_0x412cd3(0x1a2)],_0x56b233=_0x34a6a6[_0x413cff]['product_code'];var _0x3b10c2;switch(_0x16eb6d){case'1':_0x3b10c2=_0x225828;break;case'2':_0x3b10c2=_0x486d85;break;case'3':_0x3b10c2=_0x56b233;break;}const _0x15aa0c={'width':0xd2,'height':0x64},_0x497bb3={'width':_0x21278b(_0x44310c[_0x412cd3(0x198)]),'height':_0x21278b(_0x44310c[_0x412cd3(0x162)])},_0x309fac=new Canvas();JsBarcode(_0x309fac,_0x3b10c2,{'format':_0x412cd3(0xec),'height':_0x15aa0c[_0x412cd3(0x162)],'displayValue':!![],'text':_0x3b10c2});const _0x12af60=_0x309fac['toBuffer'](),_0x2b2ce4=_0x497bb3[_0x412cd3(0x198)]/_0x15aa0c[_0x412cd3(0x198)],_0x2c856a=_0x497bb3[_0x412cd3(0x162)]/_0x15aa0c[_0x412cd3(0x162)],_0x3ba790=Math[_0x412cd3(0xfd)](_0x2b2ce4,_0x2c856a),_0x1375e6=_0x15aa0c['width']*_0x3ba790,_0x4f6e20=_0x15aa0c['height']*_0x3ba790,_0x9dae36=(_0x497bb3[_0x412cd3(0x198)]-_0x1375e6)/0x2,_0x10d413=(_0x497bb3[_0x412cd3(0x162)]-_0x4f6e20)/0x2;_0x4fb3d5[_0x412cd3(0x105)](_0x12af60,_0x9dae36,_0x10d413,{'width':_0x1375e6,'height':_0x4f6e20}),_0x413cff!=_0x539e81&&_0x4fb3d5[_0x412cd3(0x19e)]();}}const _0xfcc641=[];_0x4fb3d5['on'](_0x412cd3(0x17a),_0xfcc641[_0x412cd3(0x13a)][_0x412cd3(0xef)](_0xfcc641)),_0x4fb3d5['on'](_0x412cd3(0x19c),()=>{const _0x136029=_0x412cd3,_0x589fda=Buffer[_0x136029(0x146)](_0xfcc641),_0x2419ca=_0x589fda[_0x136029(0x10a)](_0x136029(0x133));_0x56e259['json']({'pdfContent':_0x2419ca});}),_0x4fb3d5[_0x412cd3(0x19c)]();}catch(_0x43474b){_0x56e259[_0x412cd3(0x185)]({'message':_0x43474b['message']});}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x11d),auth,async(_0x11b9b9,_0xacf807)=>{const _0x2f0fac=a0_0x31ef99;try{console['log'](_0x11b9b9['body']);const {prod_cat:_0xe8e50c,identity:_0x460e07,valueData:_0x555954}=_0x11b9b9[_0x2f0fac(0x135)];let _0x9d8ff5;switch(_0xe8e50c){case'fg':if(_0x460e07==_0x2f0fac(0xee))_0x9d8ff5=await product['aggregate']([{'$match':{'product_category':_0x2f0fac(0xea),'brand':_0x555954}}]);else _0x460e07==_0x2f0fac(0x109)&&(_0x9d8ff5=await product[_0x2f0fac(0x107)]([{'$match':{'product_category':_0x2f0fac(0xea),'category':_0x555954}}]));break;case'rm':if(_0x460e07==_0x2f0fac(0xee))_0x9d8ff5=await product[_0x2f0fac(0x107)]([{'$match':{'product_category':_0x2f0fac(0x1a1),'brand':_0x555954}}]);else _0x460e07==_0x2f0fac(0x109)&&(_0x9d8ff5=await product[_0x2f0fac(0x107)]([{'$match':{'product_category':_0x2f0fac(0x1a1),'category':_0x555954}}]));break;}_0xacf807[_0x2f0fac(0x185)]({'data':_0x9d8ff5});}catch(_0x3fde17){_0xacf807[_0x2f0fac(0x185)]({'message':_0x3fde17['message']});}}),router[a0_0x31ef99(0x197)](a0_0x31ef99(0x1ac),auth,async(_0x264f97,_0x23393e)=>{const _0xba8281=a0_0x31ef99;try{const _0x5882e6=_0x264f97['params']['id'],{copies:_0x300f5c,typeofbarcode:_0x3dba94}=_0x264f97[_0xba8281(0x135)];var _0x45571e=await product[_0xba8281(0x183)](_0x5882e6);const _0x599d34=_0x4293c6=>_0x4293c6*0x48,_0x30a22c={'width':0x3,'height':0x1},_0x27edfd=new PDFDocument({'margin':_0x599d34(0.75),'size':[_0x599d34(_0x30a22c[_0xba8281(0x198)]),_0x599d34(_0x30a22c['height'])],'bufferPages':!![]}),_0x252366=_0x300f5c,_0x447d2c=_0x45571e[_0xba8281(0x187)],_0x11c093=_0x45571e['primary_code'],_0x583699=_0x45571e['secondary_code'],_0x19deee=_0x45571e[_0xba8281(0x111)];let _0x23e3cd;switch(_0x3dba94){case'1':_0x23e3cd=_0x11c093;break;case'2':_0x23e3cd=_0x583699;break;case'3':_0x23e3cd=_0x19deee;break;}const _0x20d1ea={'width':0xd2,'height':0x64},_0x4c1e27={'width':_0x599d34(_0x30a22c[_0xba8281(0x198)]),'height':_0x599d34(_0x30a22c[_0xba8281(0x162)])};for(let _0x40da76=0x1;_0x40da76<=_0x252366;_0x40da76++){const _0x57a678=new Canvas();JsBarcode(_0x57a678,_0x23e3cd,{'format':_0xba8281(0xec),'height':_0x20d1ea[_0xba8281(0x162)],'displayValue':!![],'text':_0x23e3cd});const _0xfecb6=_0x57a678[_0xba8281(0x140)](),_0x90c877=_0x4c1e27[_0xba8281(0x198)]/_0x20d1ea[_0xba8281(0x198)],_0x5498e6=_0x4c1e27[_0xba8281(0x162)]/_0x20d1ea[_0xba8281(0x162)],_0x28ecd6=Math[_0xba8281(0xfd)](_0x90c877,_0x5498e6),_0x17046f=_0x20d1ea[_0xba8281(0x198)]*_0x28ecd6,_0x1334b9=_0x20d1ea['height']*_0x28ecd6,_0x5f2f15=(_0x4c1e27['width']-_0x17046f)/0x2,_0xadca81=(_0x4c1e27['height']-_0x1334b9)/0x2;_0x27edfd[_0xba8281(0x105)](_0xfecb6,_0x5f2f15,_0xadca81,{'width':_0x17046f,'height':_0x1334b9}),_0x40da76!=_0x252366&&_0x27edfd[_0xba8281(0x19e)]();}const _0x457a92=[];_0x27edfd['on'](_0xba8281(0x17a),_0x457a92['push'][_0xba8281(0xef)](_0x457a92)),_0x27edfd['on']('end',()=>{const _0x1e9b45=_0xba8281,_0x387e93=Buffer[_0x1e9b45(0x146)](_0x457a92),_0x2d7cfc=_0x387e93[_0x1e9b45(0x10a)](_0x1e9b45(0x133));_0x23393e[_0x1e9b45(0x185)]({'pdfContent':_0x2d7cfc});}),_0x27edfd['end']();}catch(_0x4ede3a){_0x23393e[_0xba8281(0x185)]({'message':_0x4ede3a['message']});}}),module[a0_0x31ef99(0x166)]=router;