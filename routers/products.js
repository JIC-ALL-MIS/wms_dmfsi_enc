const a0_0x12d238=a0_0x3290;(function(_0x3df3ae,_0x379e7a){const _0x5f386d=a0_0x3290,_0x470e31=_0x3df3ae();while(!![]){try{const _0x55a0f7=parseInt(_0x5f386d(0x10f))/0x1+-parseInt(_0x5f386d(0x134))/0x2*(-parseInt(_0x5f386d(0x89))/0x3)+-parseInt(_0x5f386d(0x119))/0x4+parseInt(_0x5f386d(0xac))/0x5*(parseInt(_0x5f386d(0x13b))/0x6)+-parseInt(_0x5f386d(0x13d))/0x7+-parseInt(_0x5f386d(0x88))/0x8*(parseInt(_0x5f386d(0xc9))/0x9)+-parseInt(_0x5f386d(0x10e))/0xa*(-parseInt(_0x5f386d(0x11f))/0xb);if(_0x55a0f7===_0x379e7a)break;else _0x470e31['push'](_0x470e31['shift']());}catch(_0x2c1534){_0x470e31['push'](_0x470e31['shift']());}}}(a0_0x3d3f,0x41f36));const express=require(a0_0x12d238(0xd5)),res=require(a0_0x12d238(0x100)),app=express(),router=express[a0_0x12d238(0x137)](),multer=require(a0_0x12d238(0x11a)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x12d238(0x108)),auth=require(a0_0x12d238(0xa3)),users=require('../public/language/languages.json'),excelJS=require(a0_0x12d238(0xb3)),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x12d238(0x12b)),PDFDocument=require(a0_0x12d238(0x8f));router[a0_0x12d238(0x9d)](a0_0x12d238(0xc4),auth,async(_0x400594,_0xb5a6db)=>{const _0x5c91a5=a0_0x12d238;try{const {username:_0x3c5064,email:_0x325ba9,role:_0x3a5033}=_0x400594[_0x5c91a5(0xd3)],_0x52f222=_0x400594['user'],_0x3f8cd0=await profile[_0x5c91a5(0xb9)]({'email':_0x52f222['email']}),_0x55df0a=await master_shop['find']();console['log']('master',_0x55df0a);const _0x2b7250=await categories['find']();if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0xb1))var _0x4cf057=users[_0x5c91a5(0x87)];else{if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0xd2))var _0x4cf057=users[_0x5c91a5(0xd2)];else{if(_0x55df0a[0x0]['language']==_0x5c91a5(0x133))var _0x4cf057=users[_0x5c91a5(0x133)];else{if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0x121))var _0x4cf057=users[_0x5c91a5(0x121)];else{if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0xe0))var _0x4cf057=users[_0x5c91a5(0xe0)];else{if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0x12d))var _0x4cf057=users[_0x5c91a5(0xe3)];else{if(_0x55df0a[0x0]['language']==_0x5c91a5(0xd1))var _0x4cf057=users[_0x5c91a5(0xd1)];else{if(_0x55df0a[0x0][_0x5c91a5(0x129)]==_0x5c91a5(0x9a))var _0x4cf057=users[_0x5c91a5(0x9e)];}}}}}}}_0xb5a6db['render'](_0x5c91a5(0x102),{'success':_0x400594[_0x5c91a5(0xae)](_0x5c91a5(0x8b)),'errors':_0x400594[_0x5c91a5(0xae)](_0x5c91a5(0xf7)),'role':_0x52f222,'profile':_0x3f8cd0,'user':_0x2b7250,'master_shop':_0x55df0a,'language':_0x4cf057});}catch(_0x3e6d3b){console[_0x5c91a5(0x107)](_0x3e6d3b);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0xc4),auth,async(_0x386004,_0x1243cc)=>{const _0x809c43=a0_0x12d238;try{const {name:_0x383940,products:_0x4bd177}=_0x386004['body'],_0x1192dc=new categories({'name':_0x383940,'products':_0x4bd177}),_0x335897=await categories[_0x809c43(0xb9)]({'name':_0x383940});_0x335897?_0x386004['flash']('errors',_0x383940+_0x809c43(0xeb)):_0x386004[_0x809c43(0xae)](_0x809c43(0x8b),_0x383940+'\x20categories\x20is\x20add\x20successfully');const _0x1e173a=await _0x1192dc[_0x809c43(0x84)]();_0x1243cc[_0x809c43(0xe2)](_0x809c43(0xfe));}catch(_0x2b29e9){console[_0x809c43(0x107)](_0x2b29e9);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0x11b),auth,async(_0x2604da,_0x3c264d)=>{const _0x5333da=a0_0x12d238;try{const {username:_0x3a7c67,email:_0x4bb9f8,role:_0x1320ae}=_0x2604da[_0x5333da(0xd3)],_0x200d97=_0x2604da[_0x5333da(0xd3)],_0x6f9ae8=await profile[_0x5333da(0xb9)]({'email':_0x200d97[_0x5333da(0x99)]}),_0x66a97e=await master_shop[_0x5333da(0xdb)]();console['log']('master',_0x66a97e);const _0x852bc4=_0x2604da[_0x5333da(0x109)]['id'];console[_0x5333da(0x107)](_0x852bc4);const _0x47258f=await categories[_0x5333da(0x9f)](_0x852bc4);if(_0x66a97e[0x0][_0x5333da(0x129)]==_0x5333da(0xb1))var _0x5463a9=users[_0x5333da(0x87)];else{if(_0x66a97e[0x0]['language']==_0x5333da(0xd2))var _0x5463a9=users['Hindi'];else{if(_0x66a97e[0x0][_0x5333da(0x129)]==_0x5333da(0x133))var _0x5463a9=users[_0x5333da(0x133)];else{if(_0x66a97e[0x0][_0x5333da(0x129)]=='Spanish')var _0x5463a9=users[_0x5333da(0x121)];else{if(_0x66a97e[0x0]['language']=='French')var _0x5463a9=users[_0x5333da(0xe0)];else{if(_0x66a97e[0x0]['language']==_0x5333da(0x12d))var _0x5463a9=users[_0x5333da(0xe3)];else{if(_0x66a97e[0x0]['language']=='Chinese')var _0x5463a9=users[_0x5333da(0xd1)];else{if(_0x66a97e[0x0][_0x5333da(0x129)]=='Arabic\x20(ae)')var _0x5463a9=users[_0x5333da(0x9e)];}}}}}}}_0x3c264d[_0x5333da(0x82)](_0x5333da(0x102),{'success':_0x2604da[_0x5333da(0xae)]('success'),'errors':_0x2604da[_0x5333da(0xae)]('errors'),'role':_0x200d97,'profile':_0x6f9ae8,'master_shop':_0x66a97e,'user':_0x47258f,'language':_0x5463a9});}catch(_0x50dced){console[_0x5333da(0x107)](_0x50dced);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x11b),auth,async(_0x45565a,_0x5025f3)=>{const _0x3b8004=a0_0x12d238;try{const _0x19319d=_0x45565a[_0x3b8004(0x109)]['id'],_0x5e07eb=await categories[_0x3b8004(0xc7)](_0x19319d,_0x45565a[_0x3b8004(0xc6)]);_0x45565a[_0x3b8004(0xae)](_0x3b8004(0x8b),''+users['categories_edit']),_0x5025f3[_0x3b8004(0xe2)](_0x3b8004(0xfe));}catch(_0x22a772){console[_0x3b8004(0x107)](_0x22a772);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0xa0),auth,async(_0x37e4ac,_0x1e964c)=>{const _0x27b68c=a0_0x12d238;try{const _0x597afe=_0x37e4ac[_0x27b68c(0x109)]['id'],_0x5e2ef4=await categories[_0x27b68c(0x10d)](_0x597afe);_0x37e4ac[_0x27b68c(0xae)](_0x27b68c(0x8b),_0x27b68c(0xa2)),_0x1e964c[_0x27b68c(0xe2)](_0x27b68c(0xfe));}catch(_0x487114){console[_0x27b68c(0x107)](_0x487114);}}),router[a0_0x12d238(0x9d)]('/brands',auth,async(_0x373688,_0x122f18)=>{const _0x3c276d=a0_0x12d238;try{const {username:_0x4d8177,email:_0x577f6a,role:_0x5f3ac3}=_0x373688['user'],_0x5f02c1=_0x373688[_0x3c276d(0xd3)],_0x5aef62=await profile[_0x3c276d(0xb9)]({'email':_0x5f02c1['email']}),_0x1b67a3=await master_shop[_0x3c276d(0xdb)]();console[_0x3c276d(0x107)](_0x3c276d(0xad),_0x1b67a3);const _0x1d44f8=await brands[_0x3c276d(0xdb)]();if(_0x1b67a3[0x0][_0x3c276d(0x129)]=='English\x20(US)')var _0x21185b=users[_0x3c276d(0x87)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]=='Hindi')var _0x21185b=users[_0x3c276d(0xd2)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]=='German')var _0x21185b=users[_0x3c276d(0x133)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]==_0x3c276d(0x121))var _0x21185b=users[_0x3c276d(0x121)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]==_0x3c276d(0xe0))var _0x21185b=users[_0x3c276d(0xe0)];else{if(_0x1b67a3[0x0]['language']==_0x3c276d(0x12d))var _0x21185b=users[_0x3c276d(0xe3)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]==_0x3c276d(0xd1))var _0x21185b=users[_0x3c276d(0xd1)];else{if(_0x1b67a3[0x0][_0x3c276d(0x129)]==_0x3c276d(0x9a))var _0x21185b=users['Arabic'];}}}}}}}_0x122f18[_0x3c276d(0x82)](_0x3c276d(0xde),{'success':_0x373688[_0x3c276d(0xae)](_0x3c276d(0x8b)),'errors':_0x373688[_0x3c276d(0xae)](_0x3c276d(0xf7)),'role':_0x5f02c1,'profile':_0x5aef62,'master_shop':_0x1b67a3,'user':_0x1d44f8,'language':_0x21185b});}catch(_0x4b7f51){console[_0x3c276d(0x107)](_0x4b7f51);}}),router['post'](a0_0x12d238(0xb6),auth,async(_0x3b1d7c,_0x3c5300)=>{const _0xd13a42=a0_0x12d238;try{const {name:_0x4dabdf,products:_0x4d918e}=_0x3b1d7c[_0xd13a42(0xc6)],_0x4e0973=new brands({'name':_0x4dabdf,'products':_0x4d918e}),_0x55ddcb=await brands[_0xd13a42(0xb9)]({'name':_0x4dabdf});_0x55ddcb?_0x3b1d7c['flash'](_0xd13a42(0xf7),_0x4dabdf+_0xd13a42(0xee)):_0x3b1d7c[_0xd13a42(0xae)](_0xd13a42(0x8b),_0x4dabdf+_0xd13a42(0xda));const _0x56feec=await _0x4e0973['save']();_0x3c5300[_0xd13a42(0xe2)](_0xd13a42(0x8a));}catch(_0x5f1a57){console[_0xd13a42(0x107)](_0x5f1a57);}}),router['get']('/brands/:id',auth,async(_0x31f360,_0x3b4cf3)=>{const _0xaccf84=a0_0x12d238;try{const {username:_0x4d35f8,email:_0x4a47bf,role:_0x4ba849}=_0x31f360[_0xaccf84(0xd3)],_0x359078=_0x31f360['user'],_0x3be3f3=await profile['findOne']({'email':_0x359078[_0xaccf84(0x99)]}),_0x303dd5=await master_shop[_0xaccf84(0xdb)]();console[_0xaccf84(0x107)](_0xaccf84(0xad),_0x303dd5);const _0x39a3ce=_0x31f360['params']['id'];console[_0xaccf84(0x107)](_0x39a3ce);const _0x473c1d=await brands[_0xaccf84(0x9f)](_0x39a3ce);if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0xb1))var _0x4d9c58=users[_0xaccf84(0x87)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0xd2))var _0x4d9c58=users[_0xaccf84(0xd2)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]=='German')var _0x4d9c58=users[_0xaccf84(0x133)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0x121))var _0x4d9c58=users[_0xaccf84(0x121)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0xe0))var _0x4d9c58=users['French'];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0x12d))var _0x4d9c58=users[_0xaccf84(0xe3)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]==_0xaccf84(0xd1))var _0x4d9c58=users[_0xaccf84(0xd1)];else{if(_0x303dd5[0x0][_0xaccf84(0x129)]=='Arabic\x20(ae)')var _0x4d9c58=users[_0xaccf84(0x9e)];}}}}}}}_0x3b4cf3[_0xaccf84(0x82)](_0xaccf84(0xde),{'success':_0x31f360['flash'](_0xaccf84(0x8b)),'errors':_0x31f360['flash'](_0xaccf84(0xf7)),'role':_0x359078,'profile':_0x3be3f3,'master_shop':_0x303dd5,'user':_0x473c1d,'language':_0x4d9c58});}catch(_0x4df949){console[_0xaccf84(0x107)](_0x4df949);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x146),auth,async(_0x2764a2,_0xd733ca)=>{const _0x48df1c=a0_0x12d238;try{const _0x3e7518=_0x2764a2[_0x48df1c(0x109)]['id'],_0x1dc684=await brands[_0x48df1c(0xc7)](_0x3e7518,_0x2764a2['body']);_0x2764a2[_0x48df1c(0xae)](_0x48df1c(0x8b),_0x48df1c(0x122)),_0xd733ca[_0x48df1c(0xe2)](_0x48df1c(0x8a));}catch(_0x36f953){console[_0x48df1c(0x107)](_0x36f953);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0xcf),auth,async(_0x37bfd8,_0xd07f1e)=>{const _0xf02e50=a0_0x12d238;try{const _0x1bcb75=_0x37bfd8[_0xf02e50(0x109)]['id'],_0x74aa1e=await brands['findByIdAndDelete'](_0x1bcb75);_0x37bfd8['flash'](_0xf02e50(0x8b),_0xf02e50(0xe9)),_0xd07f1e['redirect'](_0xf02e50(0x8a));}catch(_0x57853e){console['log'](_0x57853e);}}),router['get'](a0_0x12d238(0x10c),auth,async(_0x4750e4,_0x2a1ab5)=>{const _0x5ccb63=a0_0x12d238;try{const {username:_0x1a074d,email:_0x1d794b,role:_0x5c612a}=_0x4750e4['user'],_0x596d35=_0x4750e4[_0x5ccb63(0xd3)],_0x159074=await profile[_0x5ccb63(0xb9)]({'email':_0x596d35[_0x5ccb63(0x99)]}),_0x3e9969=await master_shop[_0x5ccb63(0xdb)]();console['log'](_0x5ccb63(0xad),_0x3e9969);const _0x2c9cd8=await units[_0x5ccb63(0xdb)]();if(_0x3e9969[0x0][_0x5ccb63(0x129)]=='English\x20(US)')var _0x43cb76=users['English'];else{if(_0x3e9969[0x0][_0x5ccb63(0x129)]==_0x5ccb63(0xd2))var _0x43cb76=users[_0x5ccb63(0xd2)];else{if(_0x3e9969[0x0][_0x5ccb63(0x129)]==_0x5ccb63(0x133))var _0x43cb76=users[_0x5ccb63(0x133)];else{if(_0x3e9969[0x0]['language']=='Spanish')var _0x43cb76=users[_0x5ccb63(0x121)];else{if(_0x3e9969[0x0]['language']=='French')var _0x43cb76=users[_0x5ccb63(0xe0)];else{if(_0x3e9969[0x0]['language']==_0x5ccb63(0x12d))var _0x43cb76=users[_0x5ccb63(0xe3)];else{if(_0x3e9969[0x0][_0x5ccb63(0x129)]=='Chinese')var _0x43cb76=users['Chinese'];else{if(_0x3e9969[0x0][_0x5ccb63(0x129)]=='Arabic\x20(ae)')var _0x43cb76=users[_0x5ccb63(0x9e)];}}}}}}}_0x2a1ab5[_0x5ccb63(0x82)](_0x5ccb63(0xaa),{'success':_0x4750e4['flash'](_0x5ccb63(0x8b)),'errors':_0x4750e4[_0x5ccb63(0xae)](_0x5ccb63(0xf7)),'role':_0x596d35,'profile':_0x159074,'master_shop':_0x3e9969,'user':_0x2c9cd8,'language':_0x43cb76});}catch(_0x3c57f1){console[_0x5ccb63(0x107)](_0x3c57f1);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x10c),auth,async(_0x214ff2,_0x4e2db4)=>{const _0x374729=a0_0x12d238;try{const {name:_0x2bcb38,secondary_unit:_0x26692c,products:_0x587001}=_0x214ff2[_0x374729(0xc6)],_0x1ad775=new units({'name':_0x2bcb38,'secondary_unit':_0x26692c,'products':_0x587001}),_0x2f6021=await units[_0x374729(0xb9)]({'name':_0x2bcb38});_0x2f6021?_0x214ff2[_0x374729(0xae)](_0x374729(0xf7),_0x2bcb38+_0x374729(0x136)):_0x214ff2[_0x374729(0xae)](_0x374729(0x8b),_0x2bcb38+'\x20unit\x20is\x20add\x20successfully');const _0x4d3c49=await _0x1ad775['save']();_0x4e2db4[_0x374729(0xe2)](_0x374729(0x94));}catch(_0x180511){console[_0x374729(0x107)](_0x180511);}}),router[a0_0x12d238(0x9d)]('/units/:id',auth,async(_0x36e196,_0x4b4221)=>{const _0x236b99=a0_0x12d238;try{const {username:_0x472699,email:_0x4645de,role:_0x46df1b}=_0x36e196['user'],_0x3e759f=_0x36e196[_0x236b99(0xd3)],_0xc84db9=await profile[_0x236b99(0xb9)]({'email':_0x3e759f['email']}),_0x4f5138=await master_shop[_0x236b99(0xdb)]();console[_0x236b99(0x107)](_0x236b99(0xad),_0x4f5138);const _0x466d4a=_0x36e196[_0x236b99(0x109)]['id'],_0x35b1e6=await units[_0x236b99(0x9f)](_0x466d4a);if(_0x4f5138[0x0]['language']==_0x236b99(0xb1))var _0xb5d2ee=users[_0x236b99(0x87)];else{if(_0x4f5138[0x0][_0x236b99(0x129)]==_0x236b99(0xd2))var _0xb5d2ee=users[_0x236b99(0xd2)];else{if(_0x4f5138[0x0]['language']==_0x236b99(0x133))var _0xb5d2ee=users[_0x236b99(0x133)];else{if(_0x4f5138[0x0]['language']=='Spanish')var _0xb5d2ee=users[_0x236b99(0x121)];else{if(_0x4f5138[0x0]['language']==_0x236b99(0xe0))var _0xb5d2ee=users[_0x236b99(0xe0)];else{if(_0x4f5138[0x0][_0x236b99(0x129)]==_0x236b99(0x12d))var _0xb5d2ee=users['Portuguese'];else{if(_0x4f5138[0x0][_0x236b99(0x129)]==_0x236b99(0xd1))var _0xb5d2ee=users['Chinese'];else{if(_0x4f5138[0x0][_0x236b99(0x129)]=='Arabic\x20(ae)')var _0xb5d2ee=users[_0x236b99(0x9e)];}}}}}}}_0x4b4221[_0x236b99(0x82)](_0x236b99(0xaa),{'success':_0x36e196[_0x236b99(0xae)](_0x236b99(0x8b)),'errors':_0x36e196[_0x236b99(0xae)](_0x236b99(0xf7)),'role':_0x3e759f,'profile':_0xc84db9,'master_shop':_0x4f5138,'user':_0x35b1e6,'language':_0xb5d2ee});}catch(_0x2fc5d4){console[_0x236b99(0x107)](_0x2fc5d4);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x112),auth,async(_0x580bd0,_0x9087ce)=>{const _0x297974=a0_0x12d238;try{const _0x4ca0dc=_0x580bd0[_0x297974(0x109)]['id'],_0x49f903=await units[_0x297974(0xc7)](_0x4ca0dc,_0x580bd0[_0x297974(0xc6)]);_0x580bd0[_0x297974(0xae)](_0x297974(0x8b),'unit\x20data\x20update\x20successfully'),_0x9087ce['redirect'](_0x297974(0x94));}catch(_0x4f5f4a){console[_0x297974(0x107)](_0x4f5f4a);}}),router['get']('/units/delete/:id',auth,async(_0x384d60,_0xfa4588)=>{const _0x14f87d=a0_0x12d238;try{const _0x1f11b4=_0x384d60[_0x14f87d(0x109)]['id'],_0x236be7=await units[_0x14f87d(0x10d)](_0x1f11b4);_0x384d60[_0x14f87d(0xae)]('success',_0x14f87d(0x11e)),_0xfa4588[_0x14f87d(0xe2)]('/products/units');}catch(_0x29e983){console[_0x14f87d(0x107)](_0x29e983);}});const storage=multer[a0_0x12d238(0x131)]({'destination':(_0x42fa02,_0x5d27a3,_0x34d5c6)=>{const _0x197751=a0_0x12d238;_0x34d5c6(null,_0x197751(0x96));},'filename':(_0x35a305,_0x3ca9b6,_0x510acc)=>{const _0x2a1f11=a0_0x12d238;_0x510acc(null,Date['now']()+_0x3ca9b6[_0x2a1f11(0x86)]);}}),upload=multer({'storage':storage});router['get'](a0_0x12d238(0xd8),auth,async(_0x19608e,_0x2a4955)=>{const _0x272bf4=a0_0x12d238;try{const {username:_0x116224,email:_0x4a689e,role:_0x7417a}=_0x19608e['user'],_0x4dfbfc=_0x19608e[_0x272bf4(0xd3)],_0xf97f2f=await profile[_0x272bf4(0xb9)]({'email':_0x4dfbfc[_0x272bf4(0x99)]}),_0x3048b9={'year':_0x272bf4(0xfa),'month':_0x272bf4(0x105),'day':'numeric'},_0x31b451=await master_shop[_0x272bf4(0xdb)]();console[_0x272bf4(0x107)]('Products\x20master',_0x31b451);const _0x3f36a9=await product['find']();console['log']('Products\x20find_data',_0x3f36a9);const _0x3c0c71=await warehouse[_0x272bf4(0xd6)]([{'$unwind':_0x272bf4(0x12e)},{'$lookup':{'from':_0x272bf4(0x8c),'localField':'product_details.product_name','foreignField':_0x272bf4(0xd9),'as':_0x272bf4(0xbc)}},{'$unwind':_0x272bf4(0xea)},{'$project':{'product_name':_0x272bf4(0xdd),'product_stock':_0x272bf4(0xf9)}},{'$group':{'_id':_0x272bf4(0xc2),'product_stock':{'$sum':_0x272bf4(0xfb)}}}]);console[_0x272bf4(0x107)](_0x272bf4(0x95),_0x3c0c71),_0x3c0c71['forEach'](_0x5c9643=>{const _0x4e9597=_0x272bf4,_0x4ce666=_0x3f36a9[_0x4e9597(0xf4)](_0x44fbb2=>{const _0x1122fa=_0x4e9597;_0x44fbb2[_0x1122fa(0xd9)]==_0x5c9643[_0x1122fa(0xb7)]&&(_0x44fbb2['stock']=parseInt(_0x44fbb2['stock'])+parseInt(_0x5c9643[_0x1122fa(0x101)]));});}),console[_0x272bf4(0x107)]('Products\x20find_data',_0x3f36a9);if(_0x31b451[0x0][_0x272bf4(0x129)]=='English\x20(US)')var _0x2dbd02=users[_0x272bf4(0x87)];else{if(_0x31b451[0x0][_0x272bf4(0x129)]==_0x272bf4(0xd2))var _0x2dbd02=users[_0x272bf4(0xd2)];else{if(_0x31b451[0x0][_0x272bf4(0x129)]==_0x272bf4(0x133))var _0x2dbd02=users[_0x272bf4(0x133)];else{if(_0x31b451[0x0][_0x272bf4(0x129)]=='Spanish')var _0x2dbd02=users[_0x272bf4(0x121)];else{if(_0x31b451[0x0][_0x272bf4(0x129)]=='French')var _0x2dbd02=users[_0x272bf4(0xe0)];else{if(_0x31b451[0x0]['language']==_0x272bf4(0x12d))var _0x2dbd02=users[_0x272bf4(0xe3)];else{if(_0x31b451[0x0][_0x272bf4(0x129)]==_0x272bf4(0xd1))var _0x2dbd02=users[_0x272bf4(0xd1)];else{if(_0x31b451[0x0]['language']==_0x272bf4(0x9a))var _0x2dbd02=users['Arabic'];}}}}}}}_0x2a4955[_0x272bf4(0x82)](_0x272bf4(0x8c),{'success':_0x19608e[_0x272bf4(0xae)](_0x272bf4(0x8b)),'errors':_0x19608e[_0x272bf4(0xae)]('errors'),'alldata':_0x3f36a9,'profile':_0xf97f2f,'master_shop':_0x31b451,'role':_0x4dfbfc,'product_stock':_0x3c0c71,'language':_0x2dbd02});}catch(_0x5df6a6){console[_0x272bf4(0x107)](_0x5df6a6);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0x135),auth,async(_0x191790,_0x2f63b0)=>{const _0x234152=a0_0x12d238;try{const {username:_0x5623b5,email:_0x535fc0,role:_0x2cf648}=_0x191790[_0x234152(0xd3)],_0x542d15=_0x191790['user'],_0x8e816c=await profile[_0x234152(0xb9)]({'email':_0x542d15[_0x234152(0x99)]}),_0xd9a39=await master_shop[_0x234152(0xdb)]();console[_0x234152(0x107)]('master',_0xd9a39);const _0x141e71=await categories[_0x234152(0xdb)]({}),_0x211607=await brands[_0x234152(0xdb)]({}),_0x45b6b0=await units[_0x234152(0xdb)]({}),_0x52e2fb=await warehouse[_0x234152(0xdb)]({'status':'Enabled'});if(_0xd9a39[0x0]['language']==_0x234152(0xb1))var _0x504ed1=users['English'];else{if(_0xd9a39[0x0][_0x234152(0x129)]==_0x234152(0xd2))var _0x504ed1=users[_0x234152(0xd2)];else{if(_0xd9a39[0x0][_0x234152(0x129)]=='German')var _0x504ed1=users[_0x234152(0x133)];else{if(_0xd9a39[0x0][_0x234152(0x129)]=='Spanish')var _0x504ed1=users['Spanish'];else{if(_0xd9a39[0x0][_0x234152(0x129)]=='French')var _0x504ed1=users[_0x234152(0xe0)];else{if(_0xd9a39[0x0][_0x234152(0x129)]=='Portuguese\x20(BR)')var _0x504ed1=users[_0x234152(0xe3)];else{if(_0xd9a39[0x0][_0x234152(0x129)]==_0x234152(0xd1))var _0x504ed1=users[_0x234152(0xd1)];else{if(_0xd9a39[0x0][_0x234152(0x129)]==_0x234152(0x9a))var _0x504ed1=users[_0x234152(0x9e)];}}}}}}}_0x2f63b0[_0x234152(0x82)]('add_product',{'success':_0x191790[_0x234152(0xae)](_0x234152(0x8b)),'errors':_0x191790[_0x234152(0xae)](_0x234152(0xf7)),'role':_0x542d15,'profile':_0x8e816c,'categories':_0x141e71,'brands':_0x211607,'master_shop':_0xd9a39,'units':_0x45b6b0,'language':_0x504ed1,'find_data':_0x52e2fb});}catch(_0x1dbd45){console[_0x234152(0x107)](_0x1dbd45);}}),router['post'](a0_0x12d238(0x135),auth,upload[a0_0x12d238(0x13f)]('image'),async(_0x23d12d,_0x8df2f2)=>{const _0x2d2b47=a0_0x12d238;try{const {name:_0x1dad55,category:_0x20ca87,brand:_0xe7fbea,unit:_0x5cda23,alertquantity:_0x345838,stock:_0x17cd19,product_code:_0x502ffc,warehouse:_0x438ce6,primary_ItemCode:_0x171fe3,second_ItemCode:_0x594074,second_unit:_0x3b495c,maxPerUnit:_0x1ec2ca,MaxPerProduct:_0x862fcf}=_0x23d12d[_0x2d2b47(0xc6)],_0x5743fb=_0x23d12d[_0x2d2b47(0x8d)]?.[_0x2d2b47(0x12f)]||_0x2d2b47(0xce),_0x1d1f2d=new product({'image':_0x5743fb,'name':_0x1dad55,'category':_0x20ca87,'brand':_0xe7fbea,'unit':_0x5cda23,'alertquantity':_0x345838,'stock':_0x17cd19,'product_code':_0x502ffc,'warehouse':_0x438ce6,'primary_code':_0x171fe3,'secondary_code':_0x594074,'second_unit':_0x3b495c,'maxStocks':_0x862fcf,'maxProdPerUnit':_0x1ec2ca}),_0x2c60b2=await _0x1d1f2d[_0x2d2b47(0x84)](),_0x16cf81=await categories[_0x2d2b47(0xb9)]({'name':_0x20ca87});_0x16cf81[_0x2d2b47(0x8c)]=parseInt(_0x16cf81[_0x2d2b47(0x8c)])+0x1,await _0x16cf81[_0x2d2b47(0x84)]();const _0x263fe3=await brands[_0x2d2b47(0xb9)]({'name':_0xe7fbea});_0x263fe3[_0x2d2b47(0x8c)]=parseInt(_0x263fe3[_0x2d2b47(0x8c)])+0x1,await _0x263fe3[_0x2d2b47(0x84)]();const _0x5a11fb=await units[_0x2d2b47(0xb9)]({'name':_0x5cda23});_0x5a11fb[_0x2d2b47(0x8c)]=parseInt(_0x5a11fb[_0x2d2b47(0x8c)])+0x1,await _0x5a11fb[_0x2d2b47(0x84)](),_0x23d12d[_0x2d2b47(0xae)](_0x2d2b47(0x8b),_0x2d2b47(0x110)),_0x8df2f2[_0x2d2b47(0xe2)](_0x2d2b47(0x9c));}catch(_0x588acf){console[_0x2d2b47(0x107)](_0x588acf);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0xb8),auth,async(_0x59ed7f,_0x36f19a)=>{const _0x2fddd4=a0_0x12d238;try{const {username:_0x2e5de2,email:_0x2f3c01,role:_0x19715e}=_0x59ed7f['user'],_0x5060d0=_0x59ed7f[_0x2fddd4(0xd3)],_0x178709=await profile[_0x2fddd4(0xb9)]({'email':_0x5060d0[_0x2fddd4(0x99)]}),_0xf34f9d=await master_shop[_0x2fddd4(0xdb)]();console[_0x2fddd4(0x107)]('edit\x20Product\x20master',_0xf34f9d);const _0x3c9f86=_0x59ed7f[_0x2fddd4(0x109)]['id'],_0x440a5e=await product['findById'](_0x3c9f86),_0x10bff4=await categories[_0x2fddd4(0xdb)]({}),_0x29842e=await brands[_0x2fddd4(0xdb)]({}),_0x56d309=await units[_0x2fddd4(0xdb)]({}),_0x13ec33=await warehouse[_0x2fddd4(0xdb)]({'status':_0x2fddd4(0xe7)}),_0x1050e3=await units[_0x2fddd4(0xd6)]([{'$group':{'_id':_0x2fddd4(0xfc),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0xb1))var _0x5f3d8c=users[_0x2fddd4(0x87)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0xd2))var _0x5f3d8c=users[_0x2fddd4(0xd2)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0x133))var _0x5f3d8c=users[_0x2fddd4(0x133)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0x121))var _0x5f3d8c=users[_0x2fddd4(0x121)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0xe0))var _0x5f3d8c=users[_0x2fddd4(0xe0)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0x12d))var _0x5f3d8c=users['Portuguese'];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0xd1))var _0x5f3d8c=users[_0x2fddd4(0xd1)];else{if(_0xf34f9d[0x0][_0x2fddd4(0x129)]==_0x2fddd4(0x9a))var _0x5f3d8c=users[_0x2fddd4(0x9e)];}}}}}}}_0x36f19a[_0x2fddd4(0x82)](_0x2fddd4(0xf2),{'success':_0x59ed7f[_0x2fddd4(0xae)](_0x2fddd4(0x8b)),'errors':_0x59ed7f[_0x2fddd4(0xae)]('errors'),'role':_0x5060d0,'profile':_0x178709,'alldata':_0x440a5e,'categories':_0x10bff4,'brands':_0x29842e,'master_shop':_0xf34f9d,'units':_0x56d309,'secondunit':_0x1050e3,'find_data':_0x13ec33,'language':_0x5f3d8c});}catch(_0x706005){console[_0x2fddd4(0x107)](_0x706005);}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0xb8),auth,upload[a0_0x12d238(0x13f)](a0_0x12d238(0x104)),async(_0x1ae328,_0x58e6e8)=>{const _0x16c4b6=a0_0x12d238;try{console['log'](_0x16c4b6(0xb5));const _0x2b490f=_0x1ae328[_0x16c4b6(0x109)]['id'],_0x191e9c=await product[_0x16c4b6(0x9f)](_0x2b490f),{image:_0x5e1a05,name:_0x11f226,category:_0x1a09ee,brand:_0x202ce3,sku:_0x448f14,unit:_0x5a3297,alertquantity:_0x8d9ff2,product_code:_0x360bf5,warehouse:_0x21f549,primary_ItemCode:_0x1eb884,second_ItemCode:_0x23aab7,second_unit:_0x3a406c,maxPerUnit:_0x229d0d,MaxPerProduct:_0x8a9a,prod_catdata:_0xb0c255}=_0x1ae328['body'];_0x1ae328['file']&&(_0x191e9c[_0x16c4b6(0x104)]=_0x1ae328[_0x16c4b6(0x8d)]['filename']);_0x191e9c[_0x16c4b6(0xd9)]=_0x11f226,_0x191e9c[_0x16c4b6(0x128)]=_0x1a09ee,_0x191e9c[_0x16c4b6(0x13e)]=_0x202ce3,_0x191e9c['sku']=_0x448f14,_0x191e9c[_0x16c4b6(0xb0)]=_0x5a3297,_0x191e9c[_0x16c4b6(0x9b)]=_0x8d9ff2,_0x191e9c[_0x16c4b6(0xa1)]=_0x360bf5,_0x191e9c[_0x16c4b6(0xaf)]=_0x21f549,_0x191e9c[_0x16c4b6(0xa8)]=_0x1eb884,_0x191e9c[_0x16c4b6(0xd4)]=_0x23aab7,_0x191e9c[_0x16c4b6(0x85)]=_0x3a406c,_0x191e9c[_0x16c4b6(0x113)]=_0x8a9a,_0x191e9c['maxProdPerUnit']=_0x229d0d,_0x191e9c[_0x16c4b6(0x123)]=_0xb0c255;const _0x1a4d31=await _0x191e9c[_0x16c4b6(0x84)]();console[_0x16c4b6(0x107)](_0x16c4b6(0xf3),_0x191e9c),_0x1ae328[_0x16c4b6(0xae)](_0x16c4b6(0x8b),_0x16c4b6(0xe4)),_0x58e6e8[_0x16c4b6(0xe2)](_0x16c4b6(0x9c));}catch(_0x72140b){console[_0x16c4b6(0x107)](_0x72140b);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0xdc),auth,async(_0x730d65,_0x3ce3fc)=>{const _0x523bd2=a0_0x12d238;try{const {username:_0xb23958,email:_0x2e1d9a,role:_0x4e12f7}=_0x730d65[_0x523bd2(0xd3)],_0x8bb002=_0x730d65[_0x523bd2(0xd3)],_0x5b40d4=await profile['findOne']({'email':_0x8bb002[_0x523bd2(0x99)]}),_0x5dc0b0=await master_shop['find']();console[_0x523bd2(0x107)]('barcode\x20Product\x20master',_0x5dc0b0);const _0x4079af=_0x730d65[_0x523bd2(0x109)]['id'],_0xb4cf6=await product[_0x523bd2(0x9f)](_0x4079af);console['log'](_0x523bd2(0x130),_0xb4cf6);if(_0x5dc0b0[0x0][_0x523bd2(0x129)]==_0x523bd2(0xb1))var _0x3d8fbe=users[_0x523bd2(0x87)];else{if(_0x5dc0b0[0x0]['language']==_0x523bd2(0xd2))var _0x3d8fbe=users[_0x523bd2(0xd2)];else{if(_0x5dc0b0[0x0][_0x523bd2(0x129)]==_0x523bd2(0x133))var _0x3d8fbe=users[_0x523bd2(0x133)];else{if(_0x5dc0b0[0x0][_0x523bd2(0x129)]=='Spanish')var _0x3d8fbe=users[_0x523bd2(0x121)];else{if(_0x5dc0b0[0x0][_0x523bd2(0x129)]=='French')var _0x3d8fbe=users[_0x523bd2(0xe0)];else{if(_0x5dc0b0[0x0]['language']==_0x523bd2(0x12d))var _0x3d8fbe=users[_0x523bd2(0xe3)];else{if(_0x5dc0b0[0x0][_0x523bd2(0x129)]==_0x523bd2(0xd1))var _0x3d8fbe=users[_0x523bd2(0xd1)];else{if(_0x5dc0b0[0x0][_0x523bd2(0x129)]==_0x523bd2(0x9a))var _0x3d8fbe=users[_0x523bd2(0x9e)];}}}}}}}_0x3ce3fc['render'](_0x523bd2(0x8e),{'success':_0x730d65[_0x523bd2(0xae)](_0x523bd2(0x8b)),'errors':_0x730d65[_0x523bd2(0xae)](_0x523bd2(0xf7)),'role':_0x8bb002,'profile':_0x5b40d4,'alldata':_0xb4cf6,'master_shop':_0x5dc0b0,'language':_0x3d8fbe});}catch(_0x3952d1){console[_0x523bd2(0x107)](_0x3952d1);}}),router[a0_0x12d238(0x9d)](a0_0x12d238(0x115),auth,async(_0xbc0316,_0x58dbf2)=>{const _0xf4fb22=a0_0x12d238;try{const _0x36ddda=new excelJS[(_0xf4fb22(0x90))](),_0x10e3ff=_0x36ddda[_0xf4fb22(0x145)](_0xf4fb22(0xed));return _0x10e3ff[_0xf4fb22(0xbd)]=[{'header':_0xf4fb22(0xa6),'key':_0xf4fb22(0xa9),'width':0xa},{'header':_0xf4fb22(0xc8),'key':_0xf4fb22(0x114),'width':0xa},{'header':'Units','key':_0xf4fb22(0xa7),'width':0xa},{'header':'Secondary_Units','key':_0xf4fb22(0x126),'width':0xa},{'header':_0xf4fb22(0xc3),'key':_0xf4fb22(0xf5),'width':0xa},{'header':'Primary_Code','key':_0xf4fb22(0xa4),'width':0xa},{'header':_0xf4fb22(0x92),'key':_0xf4fb22(0xa4),'width':0xa},{'header':_0xf4fb22(0xb4),'key':_0xf4fb22(0xa4),'width':0xa},{'header':_0xf4fb22(0xc5),'key':_0xf4fb22(0x138),'width':0xa},{'header':_0xf4fb22(0x139),'key':_0xf4fb22(0x13a),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':'Products_category','key':_0xf4fb22(0x120),'width':0xa}],_0x58dbf2[_0xf4fb22(0xd7)](_0xf4fb22(0xba),_0xf4fb22(0x103)),_0x58dbf2[_0xf4fb22(0xd7)](_0xf4fb22(0xc0),_0xf4fb22(0xb2)),_0x36ddda[_0xf4fb22(0xec)][_0xf4fb22(0x11c)](_0x58dbf2)[_0xf4fb22(0xfd)](()=>{const _0x53a281=_0xf4fb22;_0x58dbf2[_0x53a281(0x124)](0xc8);});}catch(_0xdae31){_0x58dbf2[_0xf4fb22(0x124)](0x190)['send'](_0xdae31);}});const storage1=multer[a0_0x12d238(0x131)]({'destination':(_0x5575b3,_0x348a8a,_0x45cda2)=>{const _0x4ad513=a0_0x12d238;_0x45cda2(null,_0x4ad513(0xef));},'filename':(_0x19d3b8,_0x42e3cb,_0x5cb54e)=>{const _0x2918c4=a0_0x12d238;_0x5cb54e(null,Date[_0x2918c4(0xbb)]()+_0x42e3cb[_0x2918c4(0x86)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x3290(_0x57eb23,_0x16c40f){const _0x3d3fa3=a0_0x3d3f();return a0_0x3290=function(_0x32908d,_0x4dbe17){_0x32908d=_0x32908d-0x82;let _0x39f01e=_0x3d3fa3[_0x32908d];return _0x39f01e;},a0_0x3290(_0x57eb23,_0x16c40f);}router['post'](a0_0x12d238(0x12c),auth,uploadMigrate[a0_0x12d238(0x13f)](a0_0x12d238(0xbf)),async(_0x2b9e59,_0x2963cf)=>{const _0x55c5c5=a0_0x12d238,_0x4c58bc=_0x2b9e59[_0x55c5c5(0x8d)][_0x55c5c5(0x12f)],_0x11d125=await xlsx[_0x55c5c5(0xe1)](_0x55c5c5(0x98)+_0x4c58bc);let _0x500fe5=_0x11d125['SheetNames'],_0x5736ac=xlsx['utils'][_0x55c5c5(0xbe)](_0x11d125[_0x55c5c5(0x127)][_0x500fe5[0x0]]);for(const _0x141cff of _0x5736ac){const _0x402537=_0x141cff[_0x55c5c5(0xa6)],_0x280e42=_0x141cff[_0x55c5c5(0xc8)],_0x4c5d3b=_0x141cff[_0x55c5c5(0x93)],_0x3b9f47=_0x141cff['Secondary_Units'],_0x4070ab=_0x141cff[_0x55c5c5(0xb4)],_0x381f60=_0x141cff[_0x55c5c5(0xc5)],_0x552d8e=_0x141cff[_0x55c5c5(0x139)],_0x13185a=_0x141cff[_0x55c5c5(0x106)],_0x3c7792=_0x141cff[_0x55c5c5(0x92)],_0x80ee33=_0x141cff[_0x55c5c5(0x147)],_0x135399=_0x141cff['max_number_per_units'],_0x39369b=_0x141cff[_0x55c5c5(0xd0)];try{let _0x5c7a3e=await categories[_0x55c5c5(0xb9)]({'name':_0x381f60});if(!_0x5c7a3e){const _0x256adf=new categories({'name':_0x381f60,'products':'0'});_0x5c7a3e=await _0x256adf['save']();}let _0x5a0862=await brands['findOne']({'name':_0x280e42});if(!_0x5a0862){const _0x4d871b=new brands({'name':_0x280e42,'products':'0'});_0x5a0862=await _0x4d871b[_0x55c5c5(0x84)]();}let _0xf0f1ea=await units[_0x55c5c5(0xb9)]({'name':_0x4c5d3b,'secondary_unit':_0x3b9f47});if(!_0xf0f1ea){const _0x249833=new units({'name':_0x4c5d3b,'secondary_unit':_0x3b9f47,'products':'0'});_0xf0f1ea=await _0x249833['save']();}const _0x77384c=await product['find']({'name':_0x402537,'category':_0x5c7a3e[_0x55c5c5(0xd9)],'brand':_0x5a0862[_0x55c5c5(0xd9)],'secondary_unit':_0xf0f1ea[_0x55c5c5(0x85)],'product_code':_0x4070ab});console[_0x55c5c5(0x107)](_0x77384c['length']+_0x55c5c5(0xff)+_0x5c7a3e[_0x55c5c5(0xd9)]+'\x20<>\x20'+_0x5a0862[_0x55c5c5(0xd9)]+_0x55c5c5(0xff)+_0xf0f1ea[_0x55c5c5(0x85)]+'\x20<>\x20'+_0x4070ab+'\x20<>\x20'+_0x402537);if(_0x77384c['length']===0x0){const _0x262d71=new product({'image':_0x55c5c5(0xce),'name':_0x402537,'category':_0x5c7a3e[_0x55c5c5(0xd9)],'brand':_0x5a0862['name'],'unit':_0xf0f1ea[_0x55c5c5(0xd9)],'alertquantity':_0x552d8e,'product_code':_0x4070ab,'secondary_unit':_0xf0f1ea[_0x55c5c5(0x85)],'primary_code':_0x13185a,'secondary_code':_0x3c7792,'maxStocks':_0x80ee33,'maxProdPerUnit':_0x135399,'product_category':_0x39369b}),_0x5daa44=await _0x262d71['save']();_0x5c7a3e['products']=parseInt(_0x5c7a3e[_0x55c5c5(0x8c)])+0x1,await _0x5c7a3e[_0x55c5c5(0x84)](),_0x5a0862['products']=parseInt(_0x5a0862[_0x55c5c5(0x8c)])+0x1,await _0x5a0862[_0x55c5c5(0x84)](),_0xf0f1ea[_0x55c5c5(0x8c)]=parseInt(_0xf0f1ea[_0x55c5c5(0x8c)])+0x1,await _0xf0f1ea[_0x55c5c5(0x84)](),_0x2b9e59[_0x55c5c5(0xae)](_0x55c5c5(0x8b),_0x402537+_0x55c5c5(0x83));}else{console[_0x55c5c5(0x107)](_0x77384c[0x0]);const _0x32e1f3=_0x77384c[0x0];_0x32e1f3[_0x55c5c5(0x128)]=_0x5c7a3e[_0x55c5c5(0xd9)],_0x32e1f3[_0x55c5c5(0x13e)]=_0x5a0862[_0x55c5c5(0xd9)],_0x32e1f3[_0x55c5c5(0xb0)]=_0xf0f1ea['name'],_0x32e1f3[_0x55c5c5(0x9b)]=_0x552d8e,_0x32e1f3[_0x55c5c5(0xa1)]=_0x4070ab,_0x32e1f3['secondary_unit']=_0xf0f1ea[_0x55c5c5(0x85)],_0x32e1f3[_0x55c5c5(0xa8)]=_0x13185a,_0x32e1f3[_0x55c5c5(0xd4)]=_0x3c7792,_0x32e1f3['maxStocks']=_0x80ee33,_0x32e1f3['maxProdPerUnit']=_0x135399,_0x32e1f3[_0x55c5c5(0x123)]=_0x39369b;const _0x23e89c=await _0x32e1f3['save']();_0x2b9e59[_0x55c5c5(0xae)]('success',_0x23e89c[_0x55c5c5(0xd9)]+_0x55c5c5(0x125));}}catch(_0x525ad1){_0x2963cf['status'](0x1f4)[_0x55c5c5(0xca)]({'proderror':_0x525ad1[_0x55c5c5(0x117)],'aproduct':_0x402537});}}_0x2963cf[_0x55c5c5(0xe2)](_0x55c5c5(0x9c));}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x140),auth,async(_0x874a7c,_0x3abc1d)=>{const _0xb62949=a0_0x12d238;try{console[_0xb62949(0x107)](_0x874a7c[_0xb62949(0xc6)]);const {data_cateory:_0x3dfb1c,datachoose:_0x56c1f6}=_0x874a7c[_0xb62949(0xc6)];var _0x2ad086;if(_0x56c1f6==_0xb62949(0xe5))_0x2ad086=await product[_0xb62949(0xd6)]([{'$group':{'_id':_0xb62949(0x111)}}]);else{if(_0x56c1f6==_0xb62949(0xde))_0x2ad086=await product[_0xb62949(0xd6)]([{'$match':{'product_category':_0x3dfb1c}},{'$group':{'_id':_0xb62949(0x12a)}}]);else _0x56c1f6==_0xb62949(0x91)&&(_0x2ad086=await product[_0xb62949(0xd6)]([{'$match':{'product_category':_0x3dfb1c}},{'$group':{'_id':_0xb62949(0xab)}}]));}_0x3abc1d[_0xb62949(0xca)](_0x2ad086);}catch(_0x4e159c){_0x3abc1d[_0xb62949(0xca)]({'message':_0x4e159c['message']});}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0xe6),auth,async(_0x1aee86,_0x1a24a7)=>{const _0x4f2618=a0_0x12d238;try{const {data_choosing:_0x110dda,data_selected:_0x472fd1}=_0x1aee86[_0x4f2618(0xc6)];var _0x72a53;if(_0x110dda==_0x4f2618(0xe5))_0x72a53=await product['aggregate']([{'$match':{'product_category':_0x472fd1}}]);else{if(_0x110dda==_0x4f2618(0xde))_0x72a53=await product[_0x4f2618(0xd6)]([{'$match':{'brand':_0x472fd1}}]);else _0x110dda=='categ'&&(_0x72a53=await product['aggregate']([{'$match':{'category':_0x472fd1}}]));}_0x1a24a7['json'](_0x72a53);}catch(_0x5ac456){_0x1a24a7['json']({'message':_0x5ac456[_0x4f2618(0x117)]});}}),router['get'](a0_0x12d238(0x143),auth,async(_0x2ff11a,_0x372700)=>{const _0xdf3279=a0_0x12d238,_0x3a1074=_0x2ff11a[_0xdf3279(0xd3)],_0x58279e=await profile[_0xdf3279(0xb9)]({'email':_0x3a1074[_0xdf3279(0x99)]}),_0x3436a7=await master_shop['find'](),_0x277ef4=await product[_0xdf3279(0xdb)]();if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0xb1))var _0x1f7f5e=users[_0xdf3279(0x87)];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0xd2))var _0x1f7f5e=users[_0xdf3279(0xd2)];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0x133))var _0x1f7f5e=users[_0xdf3279(0x133)];else{if(_0x3436a7[0x0]['language']==_0xdf3279(0x121))var _0x1f7f5e=users[_0xdf3279(0x121)];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0xe0))var _0x1f7f5e=users['French'];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]=='Portuguese\x20(BR)')var _0x1f7f5e=users[_0xdf3279(0xe3)];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0xd1))var _0x1f7f5e=users[_0xdf3279(0xd1)];else{if(_0x3436a7[0x0][_0xdf3279(0x129)]==_0xdf3279(0x9a))var _0x1f7f5e=users[_0xdf3279(0x9e)];}}}}}}}_0x372700['render'](_0xdf3279(0xa5),{'success':_0x2ff11a[_0xdf3279(0xae)]('success'),'errors':_0x2ff11a[_0xdf3279(0xae)](_0xdf3279(0xf7)),'role':_0x3a1074,'profile':_0x58279e,'products':_0x277ef4,'master_shop':_0x3436a7,'language':_0x1f7f5e});}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x13c),auth,async(_0x4c4f21,_0x40ceba)=>{const _0x441aaa=a0_0x12d238,_0xdf4217=await product[_0x441aaa(0xdb)]();_0x40ceba[_0x441aaa(0xca)]({'data':_0xdf4217});}),router[a0_0x12d238(0x10b)](a0_0x12d238(0xe8),auth,async(_0x4c8deb,_0x2bde39)=>{const _0x31bd1b=a0_0x12d238;try{const {dataProdCat:_0x5b74b9,dataProdIdentity:_0x514410}=_0x4c8deb[_0x31bd1b(0xc6)];var _0x470611;switch(_0x5b74b9){case'fg':switch(_0x514410){case'Brands':_0x470611=await product[_0x31bd1b(0xd6)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x31bd1b(0x12a)}},{'$project':{'brand':_0x31bd1b(0xfc)}}]);break;case _0x31bd1b(0xc5):_0x470611=await product['aggregate']([{'$match':{'product_category':_0x31bd1b(0xc1)}},{'$group':{'_id':_0x31bd1b(0xab)}},{'$project':{'category':_0x31bd1b(0xfc)}}]);break;}break;case'rm':switch(_0x514410){case _0x31bd1b(0xc8):_0x470611=await product[_0x31bd1b(0xd6)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x31bd1b(0x12a)}},{'$project':{'brand':_0x31bd1b(0xfc)}}]);break;case _0x31bd1b(0xc5):_0x470611=await product[_0x31bd1b(0xd6)]([{'$match':{'product_category':_0x31bd1b(0xf6)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x31bd1b(0xfc)}}]);break;}break;}_0x2bde39[_0x31bd1b(0xca)](_0x470611);}catch(_0x2d9595){_0x2bde39[_0x31bd1b(0xca)]({'message':_0x2d9595[_0x31bd1b(0x117)]});}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x132),auth,async(_0xfb5042,_0x2cdba8)=>{const _0x36ea14=a0_0x12d238;try{console[_0x36ea14(0x107)](_0xfb5042[_0x36ea14(0xc6)]);const {prod_cat:_0x4da5b2,identity:_0x484fed,valueData:_0x54f5d7,typeofbarcode:_0xf867e4}=_0xfb5042[_0x36ea14(0xc6)];let _0x1cc13d;switch(_0x4da5b2){case'fg':if(_0x484fed==_0x36ea14(0xc8))_0x1cc13d=await product['aggregate']([{'$match':{'product_category':_0x36ea14(0xc1),'brand':_0x54f5d7}}]);else _0x484fed==_0x36ea14(0xc5)&&(_0x1cc13d=await product[_0x36ea14(0xd6)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x54f5d7}}]));break;case'rm':if(_0x484fed==_0x36ea14(0xc8))_0x1cc13d=await product[_0x36ea14(0xd6)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x54f5d7}}]);else _0x484fed==_0x36ea14(0xc5)&&(_0x1cc13d=await product[_0x36ea14(0xd6)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x54f5d7}}]));break;}const _0x3c4670=_0x57d186=>_0x57d186*0x48,_0x2e2c86={'width':0x3,'height':0x1},_0x2515a5=new PDFDocument({'margin':_0x3c4670(0.75),'size':[_0x3c4670(_0x2e2c86[_0x36ea14(0x142)]),_0x3c4670(_0x2e2c86[_0x36ea14(0xf1)])],'bufferPages':!![]}),_0x9b17f0=_0x1cc13d['length'];for(let _0x35d253=0x0;_0x35d253<=_0x9b17f0;_0x35d253++){if(_0x35d253!=_0x9b17f0){const _0x740e76=_0x1cc13d[_0x35d253][_0x36ea14(0xd9)],_0x152c00=_0x1cc13d[_0x35d253][_0x36ea14(0xa8)],_0x3f279f=_0x1cc13d[_0x35d253][_0x36ea14(0xd4)],_0x1e49dd=_0x1cc13d[_0x35d253]['product_code'];var _0x29d558;switch(_0xf867e4){case'1':_0x29d558=_0x152c00;break;case'2':_0x29d558=_0x3f279f;break;case'3':_0x29d558=_0x1e49dd;break;}const _0x202ac0={'width':0xd2,'height':0x64},_0x3e337d={'width':_0x3c4670(_0x2e2c86['width']),'height':_0x3c4670(_0x2e2c86[_0x36ea14(0xf1)])},_0x2de654=new Canvas();JsBarcode(_0x2de654,_0x29d558,{'format':_0x36ea14(0x11d),'height':_0x202ac0[_0x36ea14(0xf1)],'displayValue':!![],'text':_0x29d558});const _0x439167=_0x2de654[_0x36ea14(0xcb)](),_0x3f3a73=_0x3e337d[_0x36ea14(0x142)]/_0x202ac0[_0x36ea14(0x142)],_0x2a4b07=_0x3e337d[_0x36ea14(0xf1)]/_0x202ac0[_0x36ea14(0xf1)],_0x34acf4=Math['min'](_0x3f3a73,_0x2a4b07),_0x1d805d=_0x202ac0[_0x36ea14(0x142)]*_0x34acf4,_0x27ee12=_0x202ac0[_0x36ea14(0xf1)]*_0x34acf4,_0x25829b=(_0x3e337d[_0x36ea14(0x142)]-_0x1d805d)/0x2,_0x1e4cc0=(_0x3e337d[_0x36ea14(0xf1)]-_0x27ee12)/0x2;_0x2515a5['image'](_0x439167,_0x25829b,_0x1e4cc0,{'width':_0x1d805d,'height':_0x27ee12}),_0x35d253!=_0x9b17f0&&_0x2515a5['addPage']();}}const _0x4ea2c9=[];_0x2515a5['on'](_0x36ea14(0xcd),_0x4ea2c9[_0x36ea14(0x141)]['bind'](_0x4ea2c9)),_0x2515a5['on'](_0x36ea14(0x118),()=>{const _0x332b28=_0x36ea14,_0x7b6f6e=Buffer[_0x332b28(0x116)](_0x4ea2c9),_0x31f45f=_0x7b6f6e[_0x332b28(0xdf)](_0x332b28(0xf0));_0x2cdba8['json']({'pdfContent':_0x31f45f});}),_0x2515a5['end']();}catch(_0x54ba19){_0x2cdba8[_0x36ea14(0xca)]({'message':_0x54ba19['message']});}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0x144),auth,async(_0x379b8b,_0x31b44b)=>{const _0x5af929=a0_0x12d238;try{console[_0x5af929(0x107)](_0x379b8b[_0x5af929(0xc6)]);const {prod_cat:_0x2f5216,identity:_0x38ce33,valueData:_0xfe2f05}=_0x379b8b['body'];let _0x27a0bd;switch(_0x2f5216){case'fg':if(_0x38ce33=='Brands')_0x27a0bd=await product[_0x5af929(0xd6)]([{'$match':{'product_category':_0x5af929(0xc1),'brand':_0xfe2f05}}]);else _0x38ce33==_0x5af929(0xc5)&&(_0x27a0bd=await product[_0x5af929(0xd6)]([{'$match':{'product_category':_0x5af929(0xc1),'category':_0xfe2f05}}]));break;case'rm':if(_0x38ce33=='Brands')_0x27a0bd=await product['aggregate']([{'$match':{'product_category':_0x5af929(0xf6),'brand':_0xfe2f05}}]);else _0x38ce33=='Category'&&(_0x27a0bd=await product[_0x5af929(0xd6)]([{'$match':{'product_category':_0x5af929(0xf6),'category':_0xfe2f05}}]));break;}_0x31b44b['json']({'data':_0x27a0bd});}catch(_0x10b7c7){_0x31b44b[_0x5af929(0xca)]({'message':_0x10b7c7[_0x5af929(0x117)]});}}),router[a0_0x12d238(0x10b)](a0_0x12d238(0xf8),auth,async(_0x5ed2c0,_0x2d0ee8)=>{const _0x4e4c78=a0_0x12d238;try{const _0x1e2b59=_0x5ed2c0['params']['id'],{copies:_0x540077,typeofbarcode:_0x3f49ec}=_0x5ed2c0['body'];var _0x4c1e79=await product[_0x4e4c78(0x9f)](_0x1e2b59);const _0x2636e0=_0x1f991b=>_0x1f991b*0x48,_0x507220={'width':0x3,'height':0x1},_0x314a06=new PDFDocument({'margin':_0x2636e0(0.75),'size':[_0x2636e0(_0x507220[_0x4e4c78(0x142)]),_0x2636e0(_0x507220[_0x4e4c78(0xf1)])],'bufferPages':!![]}),_0xd6f5a8=_0x540077,_0x3daf96=_0x4c1e79['name'],_0x4200f9=_0x4c1e79[_0x4e4c78(0xa8)],_0x8fe15a=_0x4c1e79['secondary_code'],_0x283606=_0x4c1e79[_0x4e4c78(0xa1)];let _0x3fc6c8;switch(_0x3f49ec){case'1':_0x3fc6c8=_0x4200f9;break;case'2':_0x3fc6c8=_0x8fe15a;break;case'3':_0x3fc6c8=_0x283606;break;}const _0x218d57={'width':0xd2,'height':0x64},_0x33c10b={'width':_0x2636e0(_0x507220[_0x4e4c78(0x142)]),'height':_0x2636e0(_0x507220['height'])};for(let _0x5a7d5a=0x1;_0x5a7d5a<=_0xd6f5a8;_0x5a7d5a++){const _0x2c41d1=new Canvas();JsBarcode(_0x2c41d1,_0x3fc6c8,{'format':_0x4e4c78(0x11d),'height':_0x218d57['height'],'displayValue':!![],'text':_0x3fc6c8});const _0x52e03e=_0x2c41d1[_0x4e4c78(0xcb)](),_0xb04eda=_0x33c10b[_0x4e4c78(0x142)]/_0x218d57[_0x4e4c78(0x142)],_0x5c67dc=_0x33c10b['height']/_0x218d57[_0x4e4c78(0xf1)],_0x462531=Math[_0x4e4c78(0xcc)](_0xb04eda,_0x5c67dc),_0x3f5d5b=_0x218d57[_0x4e4c78(0x142)]*_0x462531,_0x29295e=_0x218d57['height']*_0x462531,_0x369bec=(_0x33c10b[_0x4e4c78(0x142)]-_0x3f5d5b)/0x2,_0x482383=(_0x33c10b[_0x4e4c78(0xf1)]-_0x29295e)/0x2;_0x314a06[_0x4e4c78(0x104)](_0x52e03e,_0x369bec,_0x482383,{'width':_0x3f5d5b,'height':_0x29295e}),_0x5a7d5a!=_0xd6f5a8&&_0x314a06[_0x4e4c78(0x97)]();}const _0x1225af=[];_0x314a06['on'](_0x4e4c78(0xcd),_0x1225af[_0x4e4c78(0x141)]['bind'](_0x1225af)),_0x314a06['on']('end',()=>{const _0x82dce7=_0x4e4c78,_0x2d36a8=Buffer[_0x82dce7(0x116)](_0x1225af),_0x48ae22=_0x2d36a8[_0x82dce7(0xdf)](_0x82dce7(0xf0));_0x2d0ee8[_0x82dce7(0xca)]({'pdfContent':_0x48ae22});}),_0x314a06['end']();}catch(_0x97c26c){_0x2d0ee8[_0x4e4c78(0xca)]({'message':_0x97c26c[_0x4e4c78(0x117)]});}}),module[a0_0x12d238(0x10a)]=router;function a0_0x3d3f(){const _0x5d7843=['CODE128','unit\x20data\x20delete\x20successfully','2211qGGlYK','Prod_Cat','Spanish','brand\x20data\x20update\x20successfully','product_category','status','\x20Edit\x20Successfully','PSecondaryUnits','Sheets','category','language','$brand','canvas','/products_import_migrate_file','Portuguese\x20(BR)','$product_details','filename','barcode\x20user_id','diskStorage','/print_barcode_filter/','German','19022oRjkVp','/view/add_products','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Router','PCat','Alert_QTY','PAlQty','6vXNrUA','/barcode_data','129640QoJtFh','brand','single','/select_data','push','width','/print_barcode','/print_barcode_filter_search/','addWorksheet','/brands/:id','Maximum_Stocks','render','\x20added\x20successfully','save','secondary_unit','originalname','English','4168JTmxti','6XPGTQx','/products/brands','success','products','file','product_barcode','pdfkit-table','Workbook','categ','Secondary_Code','Units','/products/units','Products\x20warehouse_data','public/upload','addPage','public/Migration/','email','Arabic\x20(ae)','alertquantity','/products/view','get','Arabic','findById','/categories/delete/:id','product_code','categories\x20data\x20delete\x20successfully','../middleware/auth','ProductCode','product_barcode_products','Product_Name','PUnits','primary_code','PName','units','$category','729970RHmxLP','master','flash','warehouse','unit','English\x20(US)','attachment;\x20filename=Product_Migration_File.xlsx','exceljs','Product_Code','hello','/brands','_id','/view/:id','findOne','Content-Type','now','product_docs','columns','sheet_to_json','migrate_product_fule','Content-Disposition','Finished\x20Goods','$product_name','max_number_per_units','/categories','Category','body','findByIdAndUpdate','Brands','8937rRcUaM','json','toBuffer','min','data','defaultProduct.avif','/brands/delete/:id','Products_category','Chinese','Hindi','user','secondary_code','express','aggregate','setHeader','/view','name','\x20brand\x20is\x20add\x20successfully','find','/barcode/:id','$product_details.product_name','brands','toString','French','readFile','redirect','Portuguese','product\x20update\x20successfully','prod_categ','/filter_product','Enabled','/barcode_filter','brand\x20data\x20delete\x20successfully','$product_docs','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','xlsx','Products','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','public/Migration','base64','height','edit_product','product\x20edit','map','MaxperUnits','Raw\x20Materials','errors','/print_barcode_single/:id','$product_details.product_stock','numeric','$product_stock','$_id','then','/products/categories','\x20<>\x20','express/lib/response','product_stock','categories','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','image','long','Primary_Code','log','../models/all_models','params','exports','post','/units','findByIdAndDelete','47960jwHvKR','33971gCWXbe','product\x20add\x20successfully','$product_category','/units/:id','maxStocks','PBrands','/products_export_migrate_file','concat','message','end','1427904JxHtvL','multer','/categories/:id','write'];a0_0x3d3f=function(){return _0x5d7843;};return a0_0x3d3f();}