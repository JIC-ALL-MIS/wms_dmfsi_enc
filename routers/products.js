const a0_0x286cc0=a0_0xbda1;(function(_0x1a1d52,_0x3627e8){const _0xabf4c1=a0_0xbda1,_0x2e550d=_0x1a1d52();while(!![]){try{const _0x65704f=-parseInt(_0xabf4c1(0x1fe))/0x1+parseInt(_0xabf4c1(0x216))/0x2*(-parseInt(_0xabf4c1(0x207))/0x3)+parseInt(_0xabf4c1(0x1d5))/0x4+parseInt(_0xabf4c1(0x22e))/0x5*(parseInt(_0xabf4c1(0x23f))/0x6)+parseInt(_0xabf4c1(0x1e6))/0x7+parseInt(_0xabf4c1(0x25c))/0x8+-parseInt(_0xabf4c1(0x215))/0x9*(parseInt(_0xabf4c1(0x23d))/0xa);if(_0x65704f===_0x3627e8)break;else _0x2e550d['push'](_0x2e550d['shift']());}catch(_0x5102dd){_0x2e550d['push'](_0x2e550d['shift']());}}}(a0_0x471c,0x76d49));function a0_0x471c(){const _0x3e13c6=['SheetNames','public/Migration','setHeader','Secondary_Code','post','PName','Products_category','product\x20edit','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','width','../middleware/auth','express','/categories/:id','6165190mkBCuU','save','24OQPwEA','height','email','CODE128','PSecondaryUnits','Portuguese\x20(BR)','errors','sku','category','message','file','Products\x20warehouse_data','max_number_per_units','brand','Workbook','/brands','/view/add_products','$product_docs','PUnits','alertquantity','params','product_code','unit\x20data\x20delete\x20successfully','Products\x20master','categories_edit','secondary_unit','categories\x20data\x20delete\x20successfully','/print_barcode_filter_search/','\x20brand\x20is\x20add\x20successfully','5210528KQjGLb','/products_export_migrate_file','$brand','success','/view','/barcode_data','German','\x20added\x20successfully','$product_stock','Secondary_Units','products','\x20unit\x20is\x20add\x20successfully','unit','json','multer','log','Hindi','single','secondary_code','bind','Products','sheet_to_json','long','product\x20add\x20successfully','$product_name','Product_Name','diskStorage','then','/products_import_migrate_file','/print_barcode_single/:id','French','categ','columns','English','Brands','findById','Units','toBuffer','brands','Raw\x20Materials','flash','originalname','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','English\x20(US)','Sheets','public/Migration/','filename','Prod_Cat','barcode\x20user_id','PBrands','categories','Alert_QTY','render','addPage','Primary_Code','Content-Disposition','toString','name','Arabic\x20(ae)','product_category','1198460CUoVpz','brand\x20data\x20delete\x20successfully','PCat','language','findOne','$product_details.product_stock','Products\x20find_data','primary_code','/categories/delete/:id','min','migrate_product_fule','../public/language/languages.json','find','_id','canvas','/barcode/:id','maxStocks','873040TKZgmD','Finished\x20Goods','add_product','/products/view','public/upload','Chinese','\x20Edit\x20Successfully','edit\x20Product\x20master','get','data','attachment;\x20filename=Product_Migration_File.xlsx','jsbarcode','findByIdAndUpdate','pdfkit-table','xlsx','aggregate','barcode\x20Product\x20master','/products/categories','addWorksheet','product_docs','$_id','unit\x20data\x20update\x20successfully','units','PAlQty','202788uICLaV','warehouse','image','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Maximum_Stocks','forEach','push','numeric','user','231009MvRnuS','stock','length','/categories','Spanish','defaultProduct.avif','\x20<>\x20','product_stock','/products/brands','Arabic','Category','readFile','edit_product','hello','9YPJIXx','2tFekjY','end','/units','/products/units','/view/:id','/print_barcode_filter/','$category','status','$product_details','prod_categ','redirect','exports','master','/print_barcode','/brands/delete/:id','exceljs','/brands/:id','body','product_barcode_products','findByIdAndDelete','maxProdPerUnit','Enabled','Product_Code','/select_data','384235FvJaSL','Portuguese'];a0_0x471c=function(){return _0x3e13c6;};return a0_0x471c();}const express=require(a0_0x286cc0(0x23b)),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require(a0_0x286cc0(0x26a)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x286cc0(0x23a)),users=require(a0_0x286cc0(0x1e0)),excelJS=require(a0_0x286cc0(0x225)),xlsx=require(a0_0x286cc0(0x1f4)),JsBarcode=require(a0_0x286cc0(0x1f1)),{Canvas}=require(a0_0x286cc0(0x1e3)),PDFDocument=require(a0_0x286cc0(0x1f3));router['get'](a0_0x286cc0(0x20a),auth,async(_0x12a37d,_0x2a35d5)=>{const _0x47b74d=a0_0x286cc0;try{const {username:_0x51f9a0,email:_0x33cf21,role:_0x2b0343}=_0x12a37d['user'],_0x2d0aaf=_0x12a37d[_0x47b74d(0x206)],_0x16ab21=await profile[_0x47b74d(0x1d9)]({'email':_0x2d0aaf[_0x47b74d(0x241)]}),_0x4df3f2=await master_shop[_0x47b74d(0x1e1)]();console[_0x47b74d(0x26b)](_0x47b74d(0x222),_0x4df3f2);const _0x55a882=await categories[_0x47b74d(0x1e1)]();if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]==_0x47b74d(0x287))var _0x26844d=users['English'];else{if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]=='Hindi')var _0x26844d=users[_0x47b74d(0x26c)];else{if(_0x4df3f2[0x0]['language']==_0x47b74d(0x262))var _0x26844d=users[_0x47b74d(0x262)];else{if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]==_0x47b74d(0x20b))var _0x26844d=users['Spanish'];else{if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]==_0x47b74d(0x27a))var _0x26844d=users[_0x47b74d(0x27a)];else{if(_0x4df3f2[0x0]['language']==_0x47b74d(0x244))var _0x26844d=users[_0x47b74d(0x22f)];else{if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]=='Chinese')var _0x26844d=users[_0x47b74d(0x1eb)];else{if(_0x4df3f2[0x0][_0x47b74d(0x1d8)]==_0x47b74d(0x1d3))var _0x26844d=users['Arabic'];}}}}}}}_0x2a35d5[_0x47b74d(0x290)](_0x47b74d(0x28e),{'success':_0x12a37d[_0x47b74d(0x284)](_0x47b74d(0x25f)),'errors':_0x12a37d[_0x47b74d(0x284)](_0x47b74d(0x245)),'role':_0x2d0aaf,'profile':_0x16ab21,'user':_0x55a882,'master_shop':_0x4df3f2,'language':_0x26844d});}catch(_0x5d2043){console[_0x47b74d(0x26b)](_0x5d2043);}}),router[a0_0x286cc0(0x234)]('/categories',auth,async(_0x3f7d89,_0x514bb4)=>{const _0x33c2db=a0_0x286cc0;try{const {name:_0x20f5ff,products:_0x5acc9c}=_0x3f7d89['body'],_0x312efe=new categories({'name':_0x20f5ff,'products':_0x5acc9c}),_0x4ad502=await categories[_0x33c2db(0x1d9)]({'name':_0x20f5ff});_0x4ad502?_0x3f7d89['flash'](_0x33c2db(0x245),_0x20f5ff+_0x33c2db(0x286)):_0x3f7d89[_0x33c2db(0x284)](_0x33c2db(0x25f),_0x20f5ff+'\x20categories\x20is\x20add\x20successfully');const _0x6bf29e=await _0x312efe[_0x33c2db(0x23e)]();_0x514bb4['redirect'](_0x33c2db(0x1f7));}catch(_0x7dc122){console[_0x33c2db(0x26b)](_0x7dc122);}}),router[a0_0x286cc0(0x1ee)]('/categories/:id',auth,async(_0x2929af,_0x33a848)=>{const _0x20ac85=a0_0x286cc0;try{const {username:_0xaf6f80,email:_0x15af0a,role:_0x59d16b}=_0x2929af[_0x20ac85(0x206)],_0x32503a=_0x2929af[_0x20ac85(0x206)],_0x1178e7=await profile[_0x20ac85(0x1d9)]({'email':_0x32503a[_0x20ac85(0x241)]}),_0x50e6e6=await master_shop['find']();console[_0x20ac85(0x26b)](_0x20ac85(0x222),_0x50e6e6);const _0x3aa25a=_0x2929af['params']['id'];console[_0x20ac85(0x26b)](_0x3aa25a);const _0x520e16=await categories[_0x20ac85(0x27f)](_0x3aa25a);if(_0x50e6e6[0x0]['language']=='English\x20(US)')var _0x1a73ef=users[_0x20ac85(0x27d)];else{if(_0x50e6e6[0x0]['language']==_0x20ac85(0x26c))var _0x1a73ef=users['Hindi'];else{if(_0x50e6e6[0x0]['language']==_0x20ac85(0x262))var _0x1a73ef=users['German'];else{if(_0x50e6e6[0x0][_0x20ac85(0x1d8)]==_0x20ac85(0x20b))var _0x1a73ef=users[_0x20ac85(0x20b)];else{if(_0x50e6e6[0x0]['language']==_0x20ac85(0x27a))var _0x1a73ef=users[_0x20ac85(0x27a)];else{if(_0x50e6e6[0x0][_0x20ac85(0x1d8)]==_0x20ac85(0x244))var _0x1a73ef=users[_0x20ac85(0x22f)];else{if(_0x50e6e6[0x0][_0x20ac85(0x1d8)]==_0x20ac85(0x1eb))var _0x1a73ef=users[_0x20ac85(0x1eb)];else{if(_0x50e6e6[0x0][_0x20ac85(0x1d8)]==_0x20ac85(0x1d3))var _0x1a73ef=users[_0x20ac85(0x210)];}}}}}}}_0x33a848[_0x20ac85(0x290)]('categories',{'success':_0x2929af[_0x20ac85(0x284)](_0x20ac85(0x25f)),'errors':_0x2929af[_0x20ac85(0x284)](_0x20ac85(0x245)),'role':_0x32503a,'profile':_0x1178e7,'master_shop':_0x50e6e6,'user':_0x520e16,'language':_0x1a73ef});}catch(_0x35931f){console[_0x20ac85(0x26b)](_0x35931f);}}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x23c),auth,async(_0x5a3f3f,_0x4b99b9)=>{const _0x2c3ffb=a0_0x286cc0;try{const _0x3b6651=_0x5a3f3f[_0x2c3ffb(0x253)]['id'],_0x2bb4f9=await categories['findByIdAndUpdate'](_0x3b6651,_0x5a3f3f['body']);_0x5a3f3f[_0x2c3ffb(0x284)](_0x2c3ffb(0x25f),''+users[_0x2c3ffb(0x257)]),_0x4b99b9[_0x2c3ffb(0x220)](_0x2c3ffb(0x1f7));}catch(_0x206de9){console[_0x2c3ffb(0x26b)](_0x206de9);}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x1dd),auth,async(_0x361153,_0x469ee5)=>{const _0x4fc559=a0_0x286cc0;try{const _0x56c1e4=_0x361153[_0x4fc559(0x253)]['id'],_0x5f4947=await categories[_0x4fc559(0x229)](_0x56c1e4);_0x361153[_0x4fc559(0x284)]('success',_0x4fc559(0x259)),_0x469ee5[_0x4fc559(0x220)](_0x4fc559(0x1f7));}catch(_0x28539e){console[_0x4fc559(0x26b)](_0x28539e);}}),router['get'](a0_0x286cc0(0x24e),auth,async(_0x2e271b,_0x311b38)=>{const _0x3c2c94=a0_0x286cc0;try{const {username:_0x16a2e1,email:_0x587078,role:_0x475177}=_0x2e271b[_0x3c2c94(0x206)],_0x2b6b45=_0x2e271b[_0x3c2c94(0x206)],_0x229901=await profile[_0x3c2c94(0x1d9)]({'email':_0x2b6b45[_0x3c2c94(0x241)]}),_0x2257dd=await master_shop[_0x3c2c94(0x1e1)]();console[_0x3c2c94(0x26b)](_0x3c2c94(0x222),_0x2257dd);const _0x44ddd6=await brands[_0x3c2c94(0x1e1)]();if(_0x2257dd[0x0][_0x3c2c94(0x1d8)]==_0x3c2c94(0x287))var _0x176dc8=users['English'];else{if(_0x2257dd[0x0]['language']==_0x3c2c94(0x26c))var _0x176dc8=users[_0x3c2c94(0x26c)];else{if(_0x2257dd[0x0]['language']==_0x3c2c94(0x262))var _0x176dc8=users[_0x3c2c94(0x262)];else{if(_0x2257dd[0x0][_0x3c2c94(0x1d8)]==_0x3c2c94(0x20b))var _0x176dc8=users[_0x3c2c94(0x20b)];else{if(_0x2257dd[0x0][_0x3c2c94(0x1d8)]=='French')var _0x176dc8=users['French'];else{if(_0x2257dd[0x0][_0x3c2c94(0x1d8)]==_0x3c2c94(0x244))var _0x176dc8=users[_0x3c2c94(0x22f)];else{if(_0x2257dd[0x0]['language']=='Chinese')var _0x176dc8=users[_0x3c2c94(0x1eb)];else{if(_0x2257dd[0x0][_0x3c2c94(0x1d8)]=='Arabic\x20(ae)')var _0x176dc8=users[_0x3c2c94(0x210)];}}}}}}}_0x311b38[_0x3c2c94(0x290)]('brands',{'success':_0x2e271b[_0x3c2c94(0x284)]('success'),'errors':_0x2e271b[_0x3c2c94(0x284)](_0x3c2c94(0x245)),'role':_0x2b6b45,'profile':_0x229901,'master_shop':_0x2257dd,'user':_0x44ddd6,'language':_0x176dc8});}catch(_0x2deefa){console[_0x3c2c94(0x26b)](_0x2deefa);}}),router['post']('/brands',auth,async(_0x536299,_0x53fe14)=>{const _0x1a3d1c=a0_0x286cc0;try{const {name:_0x13299c,products:_0x5245ae}=_0x536299['body'],_0x2fcbed=new brands({'name':_0x13299c,'products':_0x5245ae}),_0x53caf3=await brands[_0x1a3d1c(0x1d9)]({'name':_0x13299c});_0x53caf3?_0x536299[_0x1a3d1c(0x284)](_0x1a3d1c(0x245),_0x13299c+_0x1a3d1c(0x238)):_0x536299[_0x1a3d1c(0x284)]('success',_0x13299c+_0x1a3d1c(0x25b));const _0x47a84e=await _0x2fcbed[_0x1a3d1c(0x23e)]();_0x53fe14[_0x1a3d1c(0x220)](_0x1a3d1c(0x20f));}catch(_0x93c0f9){console[_0x1a3d1c(0x26b)](_0x93c0f9);}}),router['get'](a0_0x286cc0(0x226),auth,async(_0x4bb508,_0xd0553e)=>{const _0x4d5907=a0_0x286cc0;try{const {username:_0x17ccd2,email:_0x4014b9,role:_0x1d1bef}=_0x4bb508[_0x4d5907(0x206)],_0x5e0460=_0x4bb508[_0x4d5907(0x206)],_0x1baee9=await profile['findOne']({'email':_0x5e0460[_0x4d5907(0x241)]}),_0x1ad82b=await master_shop['find']();console['log'](_0x4d5907(0x222),_0x1ad82b);const _0x51b44a=_0x4bb508['params']['id'];console[_0x4d5907(0x26b)](_0x51b44a);const _0x1909e0=await brands['findById'](_0x51b44a);if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]==_0x4d5907(0x287))var _0x90d67e=users[_0x4d5907(0x27d)];else{if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]==_0x4d5907(0x26c))var _0x90d67e=users[_0x4d5907(0x26c)];else{if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]=='German')var _0x90d67e=users['German'];else{if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]==_0x4d5907(0x20b))var _0x90d67e=users[_0x4d5907(0x20b)];else{if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]=='French')var _0x90d67e=users['French'];else{if(_0x1ad82b[0x0]['language']==_0x4d5907(0x244))var _0x90d67e=users[_0x4d5907(0x22f)];else{if(_0x1ad82b[0x0][_0x4d5907(0x1d8)]=='Chinese')var _0x90d67e=users[_0x4d5907(0x1eb)];else{if(_0x1ad82b[0x0]['language']==_0x4d5907(0x1d3))var _0x90d67e=users['Arabic'];}}}}}}}_0xd0553e[_0x4d5907(0x290)](_0x4d5907(0x282),{'success':_0x4bb508['flash'](_0x4d5907(0x25f)),'errors':_0x4bb508[_0x4d5907(0x284)](_0x4d5907(0x245)),'role':_0x5e0460,'profile':_0x1baee9,'master_shop':_0x1ad82b,'user':_0x1909e0,'language':_0x90d67e});}catch(_0x55a3fc){console[_0x4d5907(0x26b)](_0x55a3fc);}}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x226),auth,async(_0x4ff158,_0x546901)=>{const _0x101a7e=a0_0x286cc0;try{const _0x309b56=_0x4ff158[_0x101a7e(0x253)]['id'],_0x4d7f2e=await brands[_0x101a7e(0x1f2)](_0x309b56,_0x4ff158[_0x101a7e(0x227)]);_0x4ff158[_0x101a7e(0x284)]('success','brand\x20data\x20update\x20successfully'),_0x546901[_0x101a7e(0x220)]('/products/brands');}catch(_0xa2788f){console['log'](_0xa2788f);}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x224),auth,async(_0x2967e9,_0x501dad)=>{const _0x59d07e=a0_0x286cc0;try{const _0x5cb344=_0x2967e9['params']['id'],_0x1a8993=await brands[_0x59d07e(0x229)](_0x5cb344);_0x2967e9[_0x59d07e(0x284)](_0x59d07e(0x25f),_0x59d07e(0x1d6)),_0x501dad[_0x59d07e(0x220)](_0x59d07e(0x20f));}catch(_0x27604f){console[_0x59d07e(0x26b)](_0x27604f);}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x218),auth,async(_0x14e96e,_0x2a26a4)=>{const _0x5c8012=a0_0x286cc0;try{const {username:_0xc22b14,email:_0x1910df,role:_0x31f344}=_0x14e96e['user'],_0x38eb22=_0x14e96e['user'],_0x41e888=await profile[_0x5c8012(0x1d9)]({'email':_0x38eb22[_0x5c8012(0x241)]}),_0x3a82e9=await master_shop[_0x5c8012(0x1e1)]();console[_0x5c8012(0x26b)]('master',_0x3a82e9);const _0x172419=await units[_0x5c8012(0x1e1)]();if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]==_0x5c8012(0x287))var _0x438238=users[_0x5c8012(0x27d)];else{if(_0x3a82e9[0x0]['language']=='Hindi')var _0x438238=users[_0x5c8012(0x26c)];else{if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]==_0x5c8012(0x262))var _0x438238=users['German'];else{if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]==_0x5c8012(0x20b))var _0x438238=users[_0x5c8012(0x20b)];else{if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]==_0x5c8012(0x27a))var _0x438238=users[_0x5c8012(0x27a)];else{if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]=='Portuguese\x20(BR)')var _0x438238=users['Portuguese'];else{if(_0x3a82e9[0x0][_0x5c8012(0x1d8)]==_0x5c8012(0x1eb))var _0x438238=users[_0x5c8012(0x1eb)];else{if(_0x3a82e9[0x0]['language']=='Arabic\x20(ae)')var _0x438238=users[_0x5c8012(0x210)];}}}}}}}_0x2a26a4[_0x5c8012(0x290)](_0x5c8012(0x1fc),{'success':_0x14e96e['flash'](_0x5c8012(0x25f)),'errors':_0x14e96e[_0x5c8012(0x284)](_0x5c8012(0x245)),'role':_0x38eb22,'profile':_0x41e888,'master_shop':_0x3a82e9,'user':_0x172419,'language':_0x438238});}catch(_0x50ab19){console['log'](_0x50ab19);}}),router['post'](a0_0x286cc0(0x218),auth,async(_0x5c3e7d,_0x1314d1)=>{const _0x411fc1=a0_0x286cc0;try{const {name:_0x12a0f5,secondary_unit:_0x5cd103,products:_0x156f7e}=_0x5c3e7d[_0x411fc1(0x227)],_0x32d2a1=new units({'name':_0x12a0f5,'secondary_unit':_0x5cd103,'products':_0x156f7e}),_0x148e31=await units[_0x411fc1(0x1d9)]({'name':_0x12a0f5});_0x148e31?_0x5c3e7d[_0x411fc1(0x284)]('errors',_0x12a0f5+_0x411fc1(0x201)):_0x5c3e7d[_0x411fc1(0x284)](_0x411fc1(0x25f),_0x12a0f5+_0x411fc1(0x267));const _0x5dc33e=await _0x32d2a1[_0x411fc1(0x23e)]();_0x1314d1[_0x411fc1(0x220)]('/products/units');}catch(_0x38db37){console[_0x411fc1(0x26b)](_0x38db37);}}),router[a0_0x286cc0(0x1ee)]('/units/:id',auth,async(_0x29ba01,_0x35ba82)=>{const _0x1e96b7=a0_0x286cc0;try{const {username:_0x449744,email:_0x1432f2,role:_0x24d298}=_0x29ba01['user'],_0x541ba2=_0x29ba01[_0x1e96b7(0x206)],_0x417a88=await profile[_0x1e96b7(0x1d9)]({'email':_0x541ba2['email']}),_0xf83cb1=await master_shop[_0x1e96b7(0x1e1)]();console[_0x1e96b7(0x26b)]('master',_0xf83cb1);const _0x1e60c8=_0x29ba01[_0x1e96b7(0x253)]['id'],_0x17089f=await units[_0x1e96b7(0x27f)](_0x1e60c8);if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]==_0x1e96b7(0x287))var _0x4843b6=users[_0x1e96b7(0x27d)];else{if(_0xf83cb1[0x0]['language']==_0x1e96b7(0x26c))var _0x4843b6=users[_0x1e96b7(0x26c)];else{if(_0xf83cb1[0x0]['language']==_0x1e96b7(0x262))var _0x4843b6=users[_0x1e96b7(0x262)];else{if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]==_0x1e96b7(0x20b))var _0x4843b6=users[_0x1e96b7(0x20b)];else{if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]=='French')var _0x4843b6=users[_0x1e96b7(0x27a)];else{if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]=='Portuguese\x20(BR)')var _0x4843b6=users[_0x1e96b7(0x22f)];else{if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]=='Chinese')var _0x4843b6=users[_0x1e96b7(0x1eb)];else{if(_0xf83cb1[0x0][_0x1e96b7(0x1d8)]=='Arabic\x20(ae)')var _0x4843b6=users[_0x1e96b7(0x210)];}}}}}}}_0x35ba82['render'](_0x1e96b7(0x1fc),{'success':_0x29ba01['flash'](_0x1e96b7(0x25f)),'errors':_0x29ba01[_0x1e96b7(0x284)](_0x1e96b7(0x245)),'role':_0x541ba2,'profile':_0x417a88,'master_shop':_0xf83cb1,'user':_0x17089f,'language':_0x4843b6});}catch(_0x3372ec){console[_0x1e96b7(0x26b)](_0x3372ec);}}),router[a0_0x286cc0(0x234)]('/units/:id',auth,async(_0x5d55a1,_0x4bfd5a)=>{const _0x520f7=a0_0x286cc0;try{const _0x18d5c7=_0x5d55a1[_0x520f7(0x253)]['id'],_0x3a3f1f=await units['findByIdAndUpdate'](_0x18d5c7,_0x5d55a1['body']);_0x5d55a1[_0x520f7(0x284)](_0x520f7(0x25f),_0x520f7(0x1fb)),_0x4bfd5a[_0x520f7(0x220)](_0x520f7(0x219));}catch(_0x3d30a9){console['log'](_0x3d30a9);}}),router[a0_0x286cc0(0x1ee)]('/units/delete/:id',auth,async(_0x435c6c,_0x581538)=>{const _0x275ab7=a0_0x286cc0;try{const _0x3d005c=_0x435c6c[_0x275ab7(0x253)]['id'],_0x2389a9=await units[_0x275ab7(0x229)](_0x3d005c);_0x435c6c[_0x275ab7(0x284)]('success',_0x275ab7(0x255)),_0x581538['redirect'](_0x275ab7(0x219));}catch(_0x14efe7){console['log'](_0x14efe7);}});const storage=multer[a0_0x286cc0(0x276)]({'destination':(_0x5c9859,_0x1b97a7,_0x56f3fb)=>{const _0x2c6bd3=a0_0x286cc0;_0x56f3fb(null,_0x2c6bd3(0x1ea));},'filename':(_0xbfad9b,_0x4a4594,_0xa09b89)=>{const _0x40b02e=a0_0x286cc0;_0xa09b89(null,Date['now']()+_0x4a4594[_0x40b02e(0x285)]);}}),upload=multer({'storage':storage});function a0_0xbda1(_0x488c44,_0x325f16){const _0x471c25=a0_0x471c();return a0_0xbda1=function(_0xbda15c,_0x2681d8){_0xbda15c=_0xbda15c-0x1d0;let _0xe8bfc8=_0x471c25[_0xbda15c];return _0xe8bfc8;},a0_0xbda1(_0x488c44,_0x325f16);}router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x260),auth,async(_0x1814a8,_0x221bea)=>{const _0x36afe2=a0_0x286cc0;try{const {username:_0x5c222e,email:_0x73740f,role:_0x56d28d}=_0x1814a8['user'],_0x50bb36=_0x1814a8[_0x36afe2(0x206)],_0x918ba3=await profile[_0x36afe2(0x1d9)]({'email':_0x50bb36[_0x36afe2(0x241)]}),_0x287cd6={'year':_0x36afe2(0x205),'month':_0x36afe2(0x272),'day':_0x36afe2(0x205)},_0x5a023a=await master_shop['find']();console['log'](_0x36afe2(0x256),_0x5a023a);const _0x539563=await product[_0x36afe2(0x1e1)]();console[_0x36afe2(0x26b)](_0x36afe2(0x1db),_0x539563);const _0x4daa21=await warehouse[_0x36afe2(0x1f5)]([{'$unwind':_0x36afe2(0x21e)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':'name','as':_0x36afe2(0x1f9)}},{'$unwind':_0x36afe2(0x250)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x36afe2(0x1da)}},{'$group':{'_id':_0x36afe2(0x274),'product_stock':{'$sum':_0x36afe2(0x264)}}}]);console[_0x36afe2(0x26b)](_0x36afe2(0x24a),_0x4daa21),_0x4daa21[_0x36afe2(0x203)](_0x55469a=>{const _0x4ccb83=_0x539563['map'](_0x593933=>{const _0x3d31fb=a0_0xbda1;_0x593933[_0x3d31fb(0x1d2)]==_0x55469a[_0x3d31fb(0x1e2)]&&(_0x593933[_0x3d31fb(0x208)]=parseInt(_0x593933['stock'])+parseInt(_0x55469a[_0x3d31fb(0x20e)]));});}),console[_0x36afe2(0x26b)](_0x36afe2(0x1db),_0x539563);if(_0x5a023a[0x0]['language']==_0x36afe2(0x287))var _0x1ff2c7=users[_0x36afe2(0x27d)];else{if(_0x5a023a[0x0][_0x36afe2(0x1d8)]=='Hindi')var _0x1ff2c7=users[_0x36afe2(0x26c)];else{if(_0x5a023a[0x0][_0x36afe2(0x1d8)]==_0x36afe2(0x262))var _0x1ff2c7=users[_0x36afe2(0x262)];else{if(_0x5a023a[0x0]['language']==_0x36afe2(0x20b))var _0x1ff2c7=users[_0x36afe2(0x20b)];else{if(_0x5a023a[0x0][_0x36afe2(0x1d8)]==_0x36afe2(0x27a))var _0x1ff2c7=users['French'];else{if(_0x5a023a[0x0]['language']==_0x36afe2(0x244))var _0x1ff2c7=users[_0x36afe2(0x22f)];else{if(_0x5a023a[0x0][_0x36afe2(0x1d8)]==_0x36afe2(0x1eb))var _0x1ff2c7=users['Chinese'];else{if(_0x5a023a[0x0][_0x36afe2(0x1d8)]==_0x36afe2(0x1d3))var _0x1ff2c7=users[_0x36afe2(0x210)];}}}}}}}_0x221bea[_0x36afe2(0x290)]('products',{'success':_0x1814a8[_0x36afe2(0x284)](_0x36afe2(0x25f)),'errors':_0x1814a8[_0x36afe2(0x284)](_0x36afe2(0x245)),'alldata':_0x539563,'profile':_0x918ba3,'master_shop':_0x5a023a,'role':_0x50bb36,'product_stock':_0x4daa21,'language':_0x1ff2c7});}catch(_0x5dde18){console[_0x36afe2(0x26b)](_0x5dde18);}}),router[a0_0x286cc0(0x1ee)]('/view/add_products',auth,async(_0x39b812,_0x159adf)=>{const _0x2176ee=a0_0x286cc0;try{const {username:_0x566787,email:_0x3ac8e2,role:_0x18bd74}=_0x39b812[_0x2176ee(0x206)],_0x4fc023=_0x39b812[_0x2176ee(0x206)],_0x59001f=await profile['findOne']({'email':_0x4fc023['email']}),_0x3e789f=await master_shop[_0x2176ee(0x1e1)]();console[_0x2176ee(0x26b)](_0x2176ee(0x222),_0x3e789f);const _0xcbed0e=await categories[_0x2176ee(0x1e1)]({}),_0x2dfb5c=await brands[_0x2176ee(0x1e1)]({}),_0x22eb2a=await units['find']({}),_0x499a43=await warehouse[_0x2176ee(0x1e1)]({'status':_0x2176ee(0x22b)});if(_0x3e789f[0x0][_0x2176ee(0x1d8)]==_0x2176ee(0x287))var _0x341b31=users[_0x2176ee(0x27d)];else{if(_0x3e789f[0x0][_0x2176ee(0x1d8)]==_0x2176ee(0x26c))var _0x341b31=users['Hindi'];else{if(_0x3e789f[0x0]['language']==_0x2176ee(0x262))var _0x341b31=users[_0x2176ee(0x262)];else{if(_0x3e789f[0x0][_0x2176ee(0x1d8)]==_0x2176ee(0x20b))var _0x341b31=users[_0x2176ee(0x20b)];else{if(_0x3e789f[0x0][_0x2176ee(0x1d8)]=='French')var _0x341b31=users[_0x2176ee(0x27a)];else{if(_0x3e789f[0x0]['language']==_0x2176ee(0x244))var _0x341b31=users[_0x2176ee(0x22f)];else{if(_0x3e789f[0x0][_0x2176ee(0x1d8)]==_0x2176ee(0x1eb))var _0x341b31=users[_0x2176ee(0x1eb)];else{if(_0x3e789f[0x0]['language']==_0x2176ee(0x1d3))var _0x341b31=users[_0x2176ee(0x210)];}}}}}}}_0x159adf[_0x2176ee(0x290)](_0x2176ee(0x1e8),{'success':_0x39b812[_0x2176ee(0x284)](_0x2176ee(0x25f)),'errors':_0x39b812[_0x2176ee(0x284)](_0x2176ee(0x245)),'role':_0x4fc023,'profile':_0x59001f,'categories':_0xcbed0e,'brands':_0x2dfb5c,'master_shop':_0x3e789f,'units':_0x22eb2a,'language':_0x341b31,'find_data':_0x499a43});}catch(_0x466652){console['log'](_0x466652);}}),router['post'](a0_0x286cc0(0x24f),auth,upload[a0_0x286cc0(0x26d)](a0_0x286cc0(0x200)),async(_0x5ad05e,_0x438426)=>{const _0x1f1bf8=a0_0x286cc0;try{const {name:_0x487a99,category:_0x15ca8c,brand:_0x19293d,unit:_0x3af770,alertquantity:_0x104d88,stock:_0x3d634a,product_code:_0x349171,warehouse:_0x19a071,primary_ItemCode:_0x183cf4,second_ItemCode:_0x147344,second_unit:_0x50d864,maxPerUnit:_0x4898f3,MaxPerProduct:_0x4ac46d}=_0x5ad05e['body'],_0x1d80d7=_0x5ad05e[_0x1f1bf8(0x249)]?.[_0x1f1bf8(0x28a)]||_0x1f1bf8(0x20c),_0xbaa9f8=new product({'image':_0x1d80d7,'name':_0x487a99,'category':_0x15ca8c,'brand':_0x19293d,'unit':_0x3af770,'alertquantity':_0x104d88,'stock':_0x3d634a,'product_code':_0x349171,'warehouse':_0x19a071,'primary_code':_0x183cf4,'secondary_code':_0x147344,'second_unit':_0x50d864,'maxStocks':_0x4ac46d,'maxProdPerUnit':_0x4898f3}),_0x565ef0=await _0xbaa9f8['save'](),_0x478b7e=await categories['findOne']({'name':_0x15ca8c});_0x478b7e[_0x1f1bf8(0x266)]=parseInt(_0x478b7e['products'])+0x1,await _0x478b7e['save']();const _0x2832ef=await brands[_0x1f1bf8(0x1d9)]({'name':_0x19293d});_0x2832ef[_0x1f1bf8(0x266)]=parseInt(_0x2832ef[_0x1f1bf8(0x266)])+0x1,await _0x2832ef[_0x1f1bf8(0x23e)]();const _0x50a362=await units[_0x1f1bf8(0x1d9)]({'name':_0x3af770});_0x50a362[_0x1f1bf8(0x266)]=parseInt(_0x50a362[_0x1f1bf8(0x266)])+0x1,await _0x50a362[_0x1f1bf8(0x23e)](),_0x5ad05e[_0x1f1bf8(0x284)](_0x1f1bf8(0x25f),_0x1f1bf8(0x273)),_0x438426[_0x1f1bf8(0x220)]('/products/view');}catch(_0x288b3b){console[_0x1f1bf8(0x26b)](_0x288b3b);}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x21a),auth,async(_0x2fe1f5,_0x2db870)=>{const _0xfdf701=a0_0x286cc0;try{const {username:_0x12eedf,email:_0x23e93a,role:_0x26209e}=_0x2fe1f5['user'],_0x159686=_0x2fe1f5['user'],_0x5c2085=await profile[_0xfdf701(0x1d9)]({'email':_0x159686[_0xfdf701(0x241)]}),_0x404475=await master_shop[_0xfdf701(0x1e1)]();console[_0xfdf701(0x26b)](_0xfdf701(0x1ed),_0x404475);const _0x3a5e0f=_0x2fe1f5[_0xfdf701(0x253)]['id'],_0x38c824=await product[_0xfdf701(0x27f)](_0x3a5e0f),_0x63659d=await categories[_0xfdf701(0x1e1)]({}),_0x98132a=await brands[_0xfdf701(0x1e1)]({}),_0x42f3b1=await units[_0xfdf701(0x1e1)]({}),_0x3a4669=await warehouse[_0xfdf701(0x1e1)]({'status':_0xfdf701(0x22b)}),_0x5cd290=await units['aggregate']([{'$group':{'_id':_0xfdf701(0x1fa),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x404475[0x0][_0xfdf701(0x1d8)]=='English\x20(US)')var _0x176498=users[_0xfdf701(0x27d)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x26c))var _0x176498=users[_0xfdf701(0x26c)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x262))var _0x176498=users[_0xfdf701(0x262)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x20b))var _0x176498=users['Spanish'];else{if(_0x404475[0x0]['language']=='French')var _0x176498=users[_0xfdf701(0x27a)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x244))var _0x176498=users[_0xfdf701(0x22f)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x1eb))var _0x176498=users[_0xfdf701(0x1eb)];else{if(_0x404475[0x0][_0xfdf701(0x1d8)]==_0xfdf701(0x1d3))var _0x176498=users[_0xfdf701(0x210)];}}}}}}}_0x2db870[_0xfdf701(0x290)](_0xfdf701(0x213),{'success':_0x2fe1f5['flash']('success'),'errors':_0x2fe1f5[_0xfdf701(0x284)](_0xfdf701(0x245)),'role':_0x159686,'profile':_0x5c2085,'alldata':_0x38c824,'categories':_0x63659d,'brands':_0x98132a,'master_shop':_0x404475,'units':_0x42f3b1,'secondunit':_0x5cd290,'find_data':_0x3a4669,'language':_0x176498});}catch(_0x4263b5){console[_0xfdf701(0x26b)](_0x4263b5);}}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x21a),auth,upload[a0_0x286cc0(0x26d)]('image'),async(_0x328425,_0x14f336)=>{const _0x45980f=a0_0x286cc0;try{console[_0x45980f(0x26b)](_0x45980f(0x214));const _0x5d87d7=_0x328425[_0x45980f(0x253)]['id'],_0x50949f=await product['findById'](_0x5d87d7),{image:_0x507379,name:_0x399eb1,category:_0x455f54,brand:_0xaf6305,sku:_0x38cb65,unit:_0x6d90e0,alertquantity:_0x229c6a,product_code:_0x448790,warehouse:_0x3b4932,primary_ItemCode:_0x580179,second_ItemCode:_0x2a004b,second_unit:_0x4e7ffb,maxPerUnit:_0x283788,MaxPerProduct:_0xca5f9,prod_catdata:_0x3ce4ba}=_0x328425[_0x45980f(0x227)];_0x328425[_0x45980f(0x249)]&&(_0x50949f['image']=_0x328425['file'][_0x45980f(0x28a)]);_0x50949f['name']=_0x399eb1,_0x50949f[_0x45980f(0x247)]=_0x455f54,_0x50949f[_0x45980f(0x24c)]=_0xaf6305,_0x50949f[_0x45980f(0x246)]=_0x38cb65,_0x50949f[_0x45980f(0x268)]=_0x6d90e0,_0x50949f[_0x45980f(0x252)]=_0x229c6a,_0x50949f[_0x45980f(0x254)]=_0x448790,_0x50949f[_0x45980f(0x1ff)]=_0x3b4932,_0x50949f[_0x45980f(0x1dc)]=_0x580179,_0x50949f[_0x45980f(0x26e)]=_0x2a004b,_0x50949f[_0x45980f(0x258)]=_0x4e7ffb,_0x50949f[_0x45980f(0x1e5)]=_0xca5f9,_0x50949f['maxProdPerUnit']=_0x283788,_0x50949f[_0x45980f(0x1d4)]=_0x3ce4ba;const _0x223ae9=await _0x50949f['save']();console[_0x45980f(0x26b)](_0x45980f(0x237),_0x50949f),_0x328425[_0x45980f(0x284)]('success','product\x20update\x20successfully'),_0x14f336[_0x45980f(0x220)]('/products/view');}catch(_0x4365cd){console[_0x45980f(0x26b)](_0x4365cd);}}),router['get'](a0_0x286cc0(0x1e4),auth,async(_0x5adbab,_0x5c8018)=>{const _0x112a5a=a0_0x286cc0;try{const {username:_0x1ede3b,email:_0x37f21e,role:_0x195e9b}=_0x5adbab[_0x112a5a(0x206)],_0x142c3d=_0x5adbab[_0x112a5a(0x206)],_0x2de0bb=await profile[_0x112a5a(0x1d9)]({'email':_0x142c3d[_0x112a5a(0x241)]}),_0x258cdb=await master_shop[_0x112a5a(0x1e1)]();console[_0x112a5a(0x26b)](_0x112a5a(0x1f6),_0x258cdb);const _0x200674=_0x5adbab['params']['id'],_0x398560=await product[_0x112a5a(0x27f)](_0x200674);console[_0x112a5a(0x26b)](_0x112a5a(0x28c),_0x398560);if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x287))var _0x8ea2be=users['English'];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x26c))var _0x8ea2be=users[_0x112a5a(0x26c)];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x262))var _0x8ea2be=users[_0x112a5a(0x262)];else{if(_0x258cdb[0x0]['language']==_0x112a5a(0x20b))var _0x8ea2be=users[_0x112a5a(0x20b)];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]=='French')var _0x8ea2be=users['French'];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x244))var _0x8ea2be=users[_0x112a5a(0x22f)];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x1eb))var _0x8ea2be=users[_0x112a5a(0x1eb)];else{if(_0x258cdb[0x0][_0x112a5a(0x1d8)]==_0x112a5a(0x1d3))var _0x8ea2be=users[_0x112a5a(0x210)];}}}}}}}_0x5c8018[_0x112a5a(0x290)]('product_barcode',{'success':_0x5adbab[_0x112a5a(0x284)](_0x112a5a(0x25f)),'errors':_0x5adbab[_0x112a5a(0x284)](_0x112a5a(0x245)),'role':_0x142c3d,'profile':_0x2de0bb,'alldata':_0x398560,'master_shop':_0x258cdb,'language':_0x8ea2be});}catch(_0x418188){console[_0x112a5a(0x26b)](_0x418188);}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x25d),auth,async(_0x5d2668,_0x5aebe0)=>{const _0x5150b2=a0_0x286cc0;try{const _0x49898e=new excelJS[(_0x5150b2(0x24d))](),_0x5ca2b3=_0x49898e[_0x5150b2(0x1f8)](_0x5150b2(0x270));return _0x5ca2b3[_0x5150b2(0x27c)]=[{'header':'Product_Name','key':_0x5150b2(0x235),'width':0xa},{'header':_0x5150b2(0x27e),'key':_0x5150b2(0x28d),'width':0xa},{'header':'Units','key':_0x5150b2(0x251),'width':0xa},{'header':_0x5150b2(0x265),'key':_0x5150b2(0x243),'width':0xa},{'header':_0x5150b2(0x24b),'key':'MaxperUnits','width':0xa},{'header':_0x5150b2(0x292),'key':'ProductCode','width':0xa},{'header':_0x5150b2(0x233),'key':'ProductCode','width':0xa},{'header':_0x5150b2(0x22c),'key':'ProductCode','width':0xa},{'header':_0x5150b2(0x211),'key':_0x5150b2(0x1d7),'width':0xa},{'header':_0x5150b2(0x28f),'key':_0x5150b2(0x1fd),'width':0xa},{'header':_0x5150b2(0x202),'key':_0x5150b2(0x1fd),'width':0xa},{'header':_0x5150b2(0x236),'key':_0x5150b2(0x28b),'width':0xa}],_0x5aebe0[_0x5150b2(0x232)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5aebe0['setHeader'](_0x5150b2(0x1d0),_0x5150b2(0x1f0)),_0x49898e[_0x5150b2(0x1f4)]['write'](_0x5aebe0)[_0x5150b2(0x277)](()=>{const _0x47496c=_0x5150b2;_0x5aebe0[_0x47496c(0x21d)](0xc8);});}catch(_0x4d69b5){_0x5aebe0[_0x5150b2(0x21d)](0x190)['send'](_0x4d69b5);}});const storage1=multer['diskStorage']({'destination':(_0x50000c,_0x240b21,_0x1ab87e)=>{const _0x7c7206=a0_0x286cc0;_0x1ab87e(null,_0x7c7206(0x231));},'filename':(_0x5be2f7,_0x53c781,_0x246ea7)=>{_0x246ea7(null,Date['now']()+_0x53c781['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x286cc0(0x278),auth,uploadMigrate['single'](a0_0x286cc0(0x1df)),async(_0x104da1,_0xf1be45)=>{const _0x5db001=a0_0x286cc0,_0x2eec4b=_0x104da1['file'][_0x5db001(0x28a)],_0x255dd6=await xlsx[_0x5db001(0x212)](_0x5db001(0x289)+_0x2eec4b);let _0x53ecee=_0x255dd6[_0x5db001(0x230)],_0x215c99=xlsx['utils'][_0x5db001(0x271)](_0x255dd6[_0x5db001(0x288)][_0x53ecee[0x0]]);for(const _0x1b409f of _0x215c99){const _0x354120=_0x1b409f[_0x5db001(0x275)],_0x2ffa9e=_0x1b409f[_0x5db001(0x27e)],_0x126168=_0x1b409f[_0x5db001(0x280)],_0x1d2ebb=_0x1b409f[_0x5db001(0x265)],_0x1d0a8c=_0x1b409f[_0x5db001(0x22c)],_0x4823d1=_0x1b409f[_0x5db001(0x211)],_0x2872e9=_0x1b409f[_0x5db001(0x28f)],_0x4f1fc4=_0x1b409f['Primary_Code'],_0x57122f=_0x1b409f[_0x5db001(0x233)],_0x1e5826=_0x1b409f['Maximum_Stocks'],_0x42e352=_0x1b409f[_0x5db001(0x24b)],_0x29fa1d=_0x1b409f[_0x5db001(0x236)];try{let _0x6dc543=await categories[_0x5db001(0x1d9)]({'name':_0x4823d1});if(!_0x6dc543){const _0x47b001=new categories({'name':_0x4823d1,'products':'0'});_0x6dc543=await _0x47b001[_0x5db001(0x23e)]();}let _0x16f965=await brands[_0x5db001(0x1d9)]({'name':_0x2ffa9e});if(!_0x16f965){const _0x15bf2d=new brands({'name':_0x2ffa9e,'products':'0'});_0x16f965=await _0x15bf2d['save']();}let _0x543b68=await units[_0x5db001(0x1d9)]({'name':_0x126168,'secondary_unit':_0x1d2ebb});if(!_0x543b68){const _0x39293c=new units({'name':_0x126168,'secondary_unit':_0x1d2ebb,'products':'0'});_0x543b68=await _0x39293c[_0x5db001(0x23e)]();}const _0x447693=await product[_0x5db001(0x1e1)]({'name':_0x354120,'category':_0x6dc543[_0x5db001(0x1d2)],'brand':_0x16f965[_0x5db001(0x1d2)],'secondary_unit':_0x543b68[_0x5db001(0x258)],'product_code':_0x1d0a8c});console[_0x5db001(0x26b)](_0x447693['length']+_0x5db001(0x20d)+_0x6dc543['name']+_0x5db001(0x20d)+_0x16f965[_0x5db001(0x1d2)]+_0x5db001(0x20d)+_0x543b68[_0x5db001(0x258)]+'\x20<>\x20'+_0x1d0a8c+_0x5db001(0x20d)+_0x354120);if(_0x447693[_0x5db001(0x209)]===0x0){const _0x19b385=new product({'image':'defaultProduct.avif','name':_0x354120,'category':_0x6dc543[_0x5db001(0x1d2)],'brand':_0x16f965[_0x5db001(0x1d2)],'unit':_0x543b68[_0x5db001(0x1d2)],'alertquantity':_0x2872e9,'product_code':_0x1d0a8c,'secondary_unit':_0x543b68['secondary_unit'],'primary_code':_0x4f1fc4,'secondary_code':_0x57122f,'maxStocks':_0x1e5826,'maxProdPerUnit':_0x42e352,'product_category':_0x29fa1d}),_0x15baf7=await _0x19b385[_0x5db001(0x23e)]();_0x6dc543[_0x5db001(0x266)]=parseInt(_0x6dc543['products'])+0x1,await _0x6dc543[_0x5db001(0x23e)](),_0x16f965['products']=parseInt(_0x16f965['products'])+0x1,await _0x16f965['save'](),_0x543b68[_0x5db001(0x266)]=parseInt(_0x543b68[_0x5db001(0x266)])+0x1,await _0x543b68[_0x5db001(0x23e)](),_0x104da1[_0x5db001(0x284)](_0x5db001(0x25f),_0x354120+_0x5db001(0x263));}else{console[_0x5db001(0x26b)](_0x447693[0x0]);const _0x18d228=_0x447693[0x0];_0x18d228['category']=_0x6dc543[_0x5db001(0x1d2)],_0x18d228[_0x5db001(0x24c)]=_0x16f965[_0x5db001(0x1d2)],_0x18d228[_0x5db001(0x268)]=_0x543b68[_0x5db001(0x1d2)],_0x18d228[_0x5db001(0x252)]=_0x2872e9,_0x18d228['product_code']=_0x1d0a8c,_0x18d228[_0x5db001(0x258)]=_0x543b68['secondary_unit'],_0x18d228[_0x5db001(0x1dc)]=_0x4f1fc4,_0x18d228[_0x5db001(0x26e)]=_0x57122f,_0x18d228[_0x5db001(0x1e5)]=_0x1e5826,_0x18d228[_0x5db001(0x22a)]=_0x42e352,_0x18d228[_0x5db001(0x1d4)]=_0x29fa1d;const _0x52fc53=await _0x18d228['save']();_0x104da1['flash'](_0x5db001(0x25f),_0x52fc53[_0x5db001(0x1d2)]+_0x5db001(0x1ec));}}catch(_0xf0d795){_0xf1be45[_0x5db001(0x21d)](0x1f4)[_0x5db001(0x269)]({'proderror':_0xf0d795[_0x5db001(0x248)],'aproduct':_0x354120});}}_0xf1be45['redirect'](_0x5db001(0x1e9));}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x22d),auth,async(_0x5ce6dc,_0x41a325)=>{const _0x38b1b8=a0_0x286cc0;try{console[_0x38b1b8(0x26b)](_0x5ce6dc[_0x38b1b8(0x227)]);const {data_cateory:_0x4f5b43,datachoose:_0x1af0cd}=_0x5ce6dc['body'];var _0xff6a90;if(_0x1af0cd=='prod_categ')_0xff6a90=await product[_0x38b1b8(0x1f5)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x1af0cd=='brands')_0xff6a90=await product['aggregate']([{'$match':{'product_category':_0x4f5b43}},{'$group':{'_id':_0x38b1b8(0x25e)}}]);else _0x1af0cd==_0x38b1b8(0x27b)&&(_0xff6a90=await product[_0x38b1b8(0x1f5)]([{'$match':{'product_category':_0x4f5b43}},{'$group':{'_id':_0x38b1b8(0x21c)}}]));}_0x41a325[_0x38b1b8(0x269)](_0xff6a90);}catch(_0x4c1314){_0x41a325[_0x38b1b8(0x269)]({'message':_0x4c1314[_0x38b1b8(0x248)]});}}),router[a0_0x286cc0(0x234)]('/filter_product',auth,async(_0x2d48d8,_0x4d8531)=>{const _0x1e288c=a0_0x286cc0;try{const {data_choosing:_0x172cae,data_selected:_0x14202b}=_0x2d48d8[_0x1e288c(0x227)];var _0x2a5dcb;if(_0x172cae==_0x1e288c(0x21f))_0x2a5dcb=await product['aggregate']([{'$match':{'product_category':_0x14202b}}]);else{if(_0x172cae==_0x1e288c(0x282))_0x2a5dcb=await product[_0x1e288c(0x1f5)]([{'$match':{'brand':_0x14202b}}]);else _0x172cae==_0x1e288c(0x27b)&&(_0x2a5dcb=await product[_0x1e288c(0x1f5)]([{'$match':{'category':_0x14202b}}]));}_0x4d8531[_0x1e288c(0x269)](_0x2a5dcb);}catch(_0x57bad9){_0x4d8531[_0x1e288c(0x269)]({'message':_0x57bad9['message']});}}),router[a0_0x286cc0(0x1ee)](a0_0x286cc0(0x223),auth,async(_0x5e8dbc,_0x4318c9)=>{const _0x2cf82d=a0_0x286cc0,_0x4a10e6=_0x5e8dbc[_0x2cf82d(0x206)],_0x1c5521=await profile[_0x2cf82d(0x1d9)]({'email':_0x4a10e6[_0x2cf82d(0x241)]}),_0x5ab4d2=await master_shop[_0x2cf82d(0x1e1)](),_0x381ffe=await product[_0x2cf82d(0x1e1)]();if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x287))var _0x45c7d3=users[_0x2cf82d(0x27d)];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]=='Hindi')var _0x45c7d3=users[_0x2cf82d(0x26c)];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x262))var _0x45c7d3=users[_0x2cf82d(0x262)];else{if(_0x5ab4d2[0x0]['language']==_0x2cf82d(0x20b))var _0x45c7d3=users['Spanish'];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x27a))var _0x45c7d3=users['French'];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x244))var _0x45c7d3=users[_0x2cf82d(0x22f)];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x1eb))var _0x45c7d3=users['Chinese'];else{if(_0x5ab4d2[0x0][_0x2cf82d(0x1d8)]==_0x2cf82d(0x1d3))var _0x45c7d3=users[_0x2cf82d(0x210)];}}}}}}}_0x4318c9[_0x2cf82d(0x290)](_0x2cf82d(0x228),{'success':_0x5e8dbc[_0x2cf82d(0x284)](_0x2cf82d(0x25f)),'errors':_0x5e8dbc[_0x2cf82d(0x284)]('errors'),'role':_0x4a10e6,'profile':_0x1c5521,'products':_0x381ffe,'master_shop':_0x5ab4d2,'language':_0x45c7d3});}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x261),auth,async(_0x247e09,_0x45126e)=>{const _0x274f92=await product['find']();_0x45126e['json']({'data':_0x274f92});}),router[a0_0x286cc0(0x234)]('/barcode_filter',auth,async(_0x2991f2,_0x2e761d)=>{const _0x5123b4=a0_0x286cc0;try{const {dataProdCat:_0x1e766b,dataProdIdentity:_0x4e5801}=_0x2991f2[_0x5123b4(0x227)];var _0x40967a;switch(_0x1e766b){case'fg':switch(_0x4e5801){case _0x5123b4(0x27e):_0x40967a=await product[_0x5123b4(0x1f5)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case _0x5123b4(0x211):_0x40967a=await product[_0x5123b4(0x1f5)]([{'$match':{'product_category':_0x5123b4(0x1e7)}},{'$group':{'_id':_0x5123b4(0x21c)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x4e5801){case _0x5123b4(0x27e):_0x40967a=await product[_0x5123b4(0x1f5)]([{'$match':{'product_category':_0x5123b4(0x283)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x5123b4(0x1fa)}}]);break;case _0x5123b4(0x211):_0x40967a=await product[_0x5123b4(0x1f5)]([{'$match':{'product_category':_0x5123b4(0x283)}},{'$group':{'_id':_0x5123b4(0x21c)}},{'$project':{'category':_0x5123b4(0x1fa)}}]);break;}break;}_0x2e761d['json'](_0x40967a);}catch(_0x25987b){_0x2e761d[_0x5123b4(0x269)]({'message':_0x25987b['message']});}}),router[a0_0x286cc0(0x234)](a0_0x286cc0(0x21b),auth,async(_0x23e48c,_0x1660d8)=>{const _0x53760c=a0_0x286cc0;try{console[_0x53760c(0x26b)](_0x23e48c[_0x53760c(0x227)]);const {prod_cat:_0x3c757f,identity:_0x487ec2,valueData:_0x5d49ac,typeofbarcode:_0x1931c5}=_0x23e48c[_0x53760c(0x227)];let _0x3ce324;switch(_0x3c757f){case'fg':if(_0x487ec2=='Brands')_0x3ce324=await product[_0x53760c(0x1f5)]([{'$match':{'product_category':_0x53760c(0x1e7),'brand':_0x5d49ac}}]);else _0x487ec2==_0x53760c(0x211)&&(_0x3ce324=await product[_0x53760c(0x1f5)]([{'$match':{'product_category':_0x53760c(0x1e7),'category':_0x5d49ac}}]));break;case'rm':if(_0x487ec2=='Brands')_0x3ce324=await product[_0x53760c(0x1f5)]([{'$match':{'product_category':_0x53760c(0x283),'brand':_0x5d49ac}}]);else _0x487ec2==_0x53760c(0x211)&&(_0x3ce324=await product[_0x53760c(0x1f5)]([{'$match':{'product_category':_0x53760c(0x283),'category':_0x5d49ac}}]));break;}const _0x3fabfe=_0xdaf178=>_0xdaf178*0x48,_0x9b3de1={'width':0x3,'height':0x1},_0x31a1c4=new PDFDocument({'margin':_0x3fabfe(0.75),'size':[_0x3fabfe(_0x9b3de1['width']),_0x3fabfe(_0x9b3de1[_0x53760c(0x240)])],'bufferPages':!![]}),_0x94233=_0x3ce324['length'];for(let _0x3a79a3=0x0;_0x3a79a3<=_0x94233;_0x3a79a3++){if(_0x3a79a3!=_0x94233){const _0x29b87b=_0x3ce324[_0x3a79a3][_0x53760c(0x1d2)],_0x50b636=_0x3ce324[_0x3a79a3]['primary_code'],_0x5d11ff=_0x3ce324[_0x3a79a3][_0x53760c(0x26e)],_0x1deb32=_0x3ce324[_0x3a79a3][_0x53760c(0x254)];var _0xd37e1c;switch(_0x1931c5){case'1':_0xd37e1c=_0x50b636;break;case'2':_0xd37e1c=_0x5d11ff;break;case'3':_0xd37e1c=_0x1deb32;break;}const _0x38b6de={'width':0xd2,'height':0x64},_0x4f6c8e={'width':_0x3fabfe(_0x9b3de1[_0x53760c(0x239)]),'height':_0x3fabfe(_0x9b3de1[_0x53760c(0x240)])},_0xc2dcb0=new Canvas();JsBarcode(_0xc2dcb0,_0xd37e1c,{'format':_0x53760c(0x242),'height':_0x38b6de[_0x53760c(0x240)],'displayValue':!![],'text':_0xd37e1c});const _0x5369a2=_0xc2dcb0[_0x53760c(0x281)](),_0x7fc854=_0x4f6c8e[_0x53760c(0x239)]/_0x38b6de[_0x53760c(0x239)],_0x4bd2d8=_0x4f6c8e[_0x53760c(0x240)]/_0x38b6de['height'],_0x50d563=Math['min'](_0x7fc854,_0x4bd2d8),_0x3c2a9a=_0x38b6de[_0x53760c(0x239)]*_0x50d563,_0x1a380b=_0x38b6de['height']*_0x50d563,_0x1695a0=(_0x4f6c8e[_0x53760c(0x239)]-_0x3c2a9a)/0x2,_0x445ab3=(_0x4f6c8e[_0x53760c(0x240)]-_0x1a380b)/0x2;_0x31a1c4['image'](_0x5369a2,_0x1695a0,_0x445ab3,{'width':_0x3c2a9a,'height':_0x1a380b}),_0x3a79a3!=_0x94233&&_0x31a1c4[_0x53760c(0x291)]();}}const _0x28c380=[];_0x31a1c4['on'](_0x53760c(0x1ef),_0x28c380[_0x53760c(0x204)][_0x53760c(0x26f)](_0x28c380)),_0x31a1c4['on'](_0x53760c(0x217),()=>{const _0x703c5=_0x53760c,_0x5603c7=Buffer['concat'](_0x28c380),_0x3c625a=_0x5603c7[_0x703c5(0x1d1)]('base64');_0x1660d8[_0x703c5(0x269)]({'pdfContent':_0x3c625a});}),_0x31a1c4[_0x53760c(0x217)]();}catch(_0x1f183a){_0x1660d8[_0x53760c(0x269)]({'message':_0x1f183a['message']});}}),router['post'](a0_0x286cc0(0x25a),auth,async(_0x379325,_0x415bd6)=>{const _0x5ca5b0=a0_0x286cc0;try{console[_0x5ca5b0(0x26b)](_0x379325[_0x5ca5b0(0x227)]);const {prod_cat:_0x22bf18,identity:_0x9baf7d,valueData:_0x502dc9}=_0x379325[_0x5ca5b0(0x227)];let _0x42197a;switch(_0x22bf18){case'fg':if(_0x9baf7d==_0x5ca5b0(0x27e))_0x42197a=await product[_0x5ca5b0(0x1f5)]([{'$match':{'product_category':_0x5ca5b0(0x1e7),'brand':_0x502dc9}}]);else _0x9baf7d==_0x5ca5b0(0x211)&&(_0x42197a=await product['aggregate']([{'$match':{'product_category':_0x5ca5b0(0x1e7),'category':_0x502dc9}}]));break;case'rm':if(_0x9baf7d==_0x5ca5b0(0x27e))_0x42197a=await product[_0x5ca5b0(0x1f5)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x502dc9}}]);else _0x9baf7d=='Category'&&(_0x42197a=await product[_0x5ca5b0(0x1f5)]([{'$match':{'product_category':_0x5ca5b0(0x283),'category':_0x502dc9}}]));break;}_0x415bd6['json'](_0x42197a);}catch(_0xb96a6e){_0x415bd6[_0x5ca5b0(0x269)]({'message':_0xb96a6e[_0x5ca5b0(0x248)]});}}),router['post'](a0_0x286cc0(0x279),auth,async(_0x252deb,_0x3dcffc)=>{const _0x296e51=a0_0x286cc0;try{const _0x1aa454=_0x252deb[_0x296e51(0x253)]['id'],{copies:_0x571497,typeofbarcode:_0x3ed6fe}=_0x252deb[_0x296e51(0x227)];var _0x13a975=await product[_0x296e51(0x27f)](_0x1aa454);const _0x4beb9f=_0x25ce54=>_0x25ce54*0x48,_0x5b5b71={'width':0x3,'height':0x1},_0x1e8a8d=new PDFDocument({'margin':_0x4beb9f(0.75),'size':[_0x4beb9f(_0x5b5b71[_0x296e51(0x239)]),_0x4beb9f(_0x5b5b71[_0x296e51(0x240)])],'bufferPages':!![]}),_0x1c3f4d=_0x571497,_0x361e90=_0x13a975['name'],_0x15ff53=_0x13a975[_0x296e51(0x1dc)],_0x24e0f0=_0x13a975[_0x296e51(0x26e)],_0x383313=_0x13a975[_0x296e51(0x254)];let _0x47c790;switch(_0x3ed6fe){case'1':_0x47c790=_0x15ff53;break;case'2':_0x47c790=_0x24e0f0;break;case'3':_0x47c790=_0x383313;break;}const _0x281f55={'width':0xd2,'height':0x64},_0x190abb={'width':_0x4beb9f(_0x5b5b71[_0x296e51(0x239)]),'height':_0x4beb9f(_0x5b5b71[_0x296e51(0x240)])};for(let _0x345e08=0x1;_0x345e08<=_0x1c3f4d;_0x345e08++){const _0xf10af=new Canvas();JsBarcode(_0xf10af,_0x47c790,{'format':_0x296e51(0x242),'height':_0x281f55['height'],'displayValue':!![],'text':_0x47c790});const _0x2cf3e3=_0xf10af['toBuffer'](),_0x4919a4=_0x190abb['width']/_0x281f55[_0x296e51(0x239)],_0x4dff21=_0x190abb[_0x296e51(0x240)]/_0x281f55[_0x296e51(0x240)],_0x26f526=Math[_0x296e51(0x1de)](_0x4919a4,_0x4dff21),_0x25d922=_0x281f55[_0x296e51(0x239)]*_0x26f526,_0x591d5a=_0x281f55[_0x296e51(0x240)]*_0x26f526,_0x5e739e=(_0x190abb[_0x296e51(0x239)]-_0x25d922)/0x2,_0x5e3eed=(_0x190abb[_0x296e51(0x240)]-_0x591d5a)/0x2;_0x1e8a8d[_0x296e51(0x200)](_0x2cf3e3,_0x5e739e,_0x5e3eed,{'width':_0x25d922,'height':_0x591d5a}),_0x345e08!=_0x1c3f4d&&_0x1e8a8d['addPage']();}const _0x3f53cc=[];_0x1e8a8d['on']('data',_0x3f53cc['push']['bind'](_0x3f53cc)),_0x1e8a8d['on'](_0x296e51(0x217),()=>{const _0x3344dd=_0x296e51,_0x360268=Buffer['concat'](_0x3f53cc),_0x275dd0=_0x360268[_0x3344dd(0x1d1)]('base64');_0x3dcffc['json']({'pdfContent':_0x275dd0});}),_0x1e8a8d[_0x296e51(0x217)]();}catch(_0x4c0de8){_0x3dcffc[_0x296e51(0x269)]({'message':_0x4c0de8[_0x296e51(0x248)]});}}),module[a0_0x286cc0(0x221)]=router;