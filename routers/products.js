const a0_0x470d84=a0_0x459d;(function(_0x5be49b,_0x3a4e60){const _0x1a6b9c=a0_0x459d,_0x57d8c2=_0x5be49b();while(!![]){try{const _0x51a63a=parseInt(_0x1a6b9c(0x9f))/0x1*(-parseInt(_0x1a6b9c(0x11c))/0x2)+parseInt(_0x1a6b9c(0xdd))/0x3+parseInt(_0x1a6b9c(0x11d))/0x4*(parseInt(_0x1a6b9c(0xdb))/0x5)+parseInt(_0x1a6b9c(0xb4))/0x6*(-parseInt(_0x1a6b9c(0x109))/0x7)+-parseInt(_0x1a6b9c(0x137))/0x8+-parseInt(_0x1a6b9c(0x128))/0x9+-parseInt(_0x1a6b9c(0xa8))/0xa*(-parseInt(_0x1a6b9c(0xc3))/0xb);if(_0x51a63a===_0x3a4e60)break;else _0x57d8c2['push'](_0x57d8c2['shift']());}catch(_0x2beab2){_0x57d8c2['push'](_0x57d8c2['shift']());}}}(a0_0x66b8,0x20614));const express=require(a0_0x470d84(0x123)),res=require(a0_0x470d84(0xb1)),app=express(),router=express['Router'](),multer=require(a0_0x470d84(0x93)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x470d84(0xb9)),users=require(a0_0x470d84(0x8c)),excelJS=require('exceljs'),xlsx=require(a0_0x470d84(0xb0)),JsBarcode=require(a0_0x470d84(0x89)),{Canvas}=require(a0_0x470d84(0xd7)),PDFDocument=require(a0_0x470d84(0x87));function a0_0x459d(_0x3a6d40,_0xfb493d){const _0x66b890=a0_0x66b8();return a0_0x459d=function(_0x459d2e,_0x1cfb8d){_0x459d2e=_0x459d2e-0x86;let _0x4df7f2=_0x66b890[_0x459d2e];return _0x4df7f2;},a0_0x459d(_0x3a6d40,_0xfb493d);}router[a0_0x470d84(0x11a)](a0_0x470d84(0xda),auth,async(_0x4b489c,_0x5ddfc3)=>{const _0x23a8fe=a0_0x470d84;try{const {username:_0x3374be,email:_0x34acf9,role:_0x1ead3a}=_0x4b489c[_0x23a8fe(0xbc)],_0x26622b=_0x4b489c[_0x23a8fe(0xbc)],_0x16330e=await profile[_0x23a8fe(0x107)]({'email':_0x26622b[_0x23a8fe(0xa3)]}),_0x20e6e7=await master_shop[_0x23a8fe(0x10a)]();console[_0x23a8fe(0x113)](_0x23a8fe(0xf7),_0x20e6e7);const _0x261114=await categories[_0x23a8fe(0x10a)]();if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0xe1))var _0x1d893c=users[_0x23a8fe(0xac)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0x138))var _0x1d893c=users['Hindi'];else{if(_0x20e6e7[0x0]['language']==_0x23a8fe(0x144))var _0x1d893c=users[_0x23a8fe(0x144)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]=='Spanish')var _0x1d893c=users[_0x23a8fe(0x10e)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0x105))var _0x1d893c=users[_0x23a8fe(0x105)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0x122))var _0x1d893c=users[_0x23a8fe(0xcb)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0x132))var _0x1d893c=users[_0x23a8fe(0x132)];else{if(_0x20e6e7[0x0][_0x23a8fe(0x12d)]==_0x23a8fe(0x13e))var _0x1d893c=users[_0x23a8fe(0x133)];}}}}}}}_0x5ddfc3[_0x23a8fe(0x142)]('categories',{'success':_0x4b489c[_0x23a8fe(0xf6)]('success'),'errors':_0x4b489c['flash'](_0x23a8fe(0xf9)),'role':_0x26622b,'profile':_0x16330e,'user':_0x261114,'master_shop':_0x20e6e7,'language':_0x1d893c});}catch(_0x15da82){console[_0x23a8fe(0x113)](_0x15da82);}}),router[a0_0x470d84(0xd4)]('/categories',auth,async(_0x234704,_0x5126da)=>{const _0x175d41=a0_0x470d84;try{const {name:_0x59e53b,products:_0x485054}=_0x234704[_0x175d41(0x103)],_0x5be8eb=new categories({'name':_0x59e53b,'products':_0x485054}),_0x37d91b=await categories[_0x175d41(0x107)]({'name':_0x59e53b});_0x37d91b?_0x234704[_0x175d41(0xf6)](_0x175d41(0xf9),_0x59e53b+_0x175d41(0xf3)):_0x234704[_0x175d41(0xf6)](_0x175d41(0xaf),_0x59e53b+_0x175d41(0xab));const _0x11687a=await _0x5be8eb['save']();_0x5126da[_0x175d41(0xee)](_0x175d41(0xdc));}catch(_0x551d32){console[_0x175d41(0x113)](_0x551d32);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0xc2),auth,async(_0x1e73b0,_0x271a81)=>{const _0x4a3e28=a0_0x470d84;try{const {username:_0x472afe,email:_0x48914b,role:_0x4c8ce8}=_0x1e73b0[_0x4a3e28(0xbc)],_0x5a27a1=_0x1e73b0[_0x4a3e28(0xbc)],_0x82d761=await profile[_0x4a3e28(0x107)]({'email':_0x5a27a1[_0x4a3e28(0xa3)]}),_0x3ea45d=await master_shop[_0x4a3e28(0x10a)]();console[_0x4a3e28(0x113)](_0x4a3e28(0xf7),_0x3ea45d);const _0x3bf099=_0x1e73b0[_0x4a3e28(0xfb)]['id'];console[_0x4a3e28(0x113)](_0x3bf099);const _0x124de7=await categories[_0x4a3e28(0x98)](_0x3bf099);if(_0x3ea45d[0x0][_0x4a3e28(0x12d)]==_0x4a3e28(0xe1))var _0x4b637e=users[_0x4a3e28(0xac)];else{if(_0x3ea45d[0x0]['language']==_0x4a3e28(0x138))var _0x4b637e=users[_0x4a3e28(0x138)];else{if(_0x3ea45d[0x0][_0x4a3e28(0x12d)]==_0x4a3e28(0x144))var _0x4b637e=users[_0x4a3e28(0x144)];else{if(_0x3ea45d[0x0][_0x4a3e28(0x12d)]==_0x4a3e28(0x10e))var _0x4b637e=users['Spanish'];else{if(_0x3ea45d[0x0]['language']==_0x4a3e28(0x105))var _0x4b637e=users[_0x4a3e28(0x105)];else{if(_0x3ea45d[0x0]['language']==_0x4a3e28(0x122))var _0x4b637e=users[_0x4a3e28(0xcb)];else{if(_0x3ea45d[0x0][_0x4a3e28(0x12d)]==_0x4a3e28(0x132))var _0x4b637e=users[_0x4a3e28(0x132)];else{if(_0x3ea45d[0x0][_0x4a3e28(0x12d)]=='Arabic\x20(ae)')var _0x4b637e=users['Arabic'];}}}}}}}_0x271a81['render']('categories',{'success':_0x1e73b0[_0x4a3e28(0xf6)]('success'),'errors':_0x1e73b0[_0x4a3e28(0xf6)]('errors'),'role':_0x5a27a1,'profile':_0x82d761,'master_shop':_0x3ea45d,'user':_0x124de7,'language':_0x4b637e});}catch(_0x17f646){console['log'](_0x17f646);}}),router['post']('/categories/:id',auth,async(_0x498425,_0x1619ca)=>{const _0x5b9a63=a0_0x470d84;try{const _0x27affd=_0x498425[_0x5b9a63(0xfb)]['id'],_0x287785=await categories['findByIdAndUpdate'](_0x27affd,_0x498425[_0x5b9a63(0x103)]);_0x498425[_0x5b9a63(0xf6)]('success',''+users[_0x5b9a63(0xf5)]),_0x1619ca['redirect'](_0x5b9a63(0xdc));}catch(_0x14f7c4){console[_0x5b9a63(0x113)](_0x14f7c4);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0xcf),auth,async(_0x13878a,_0x40d1eb)=>{const _0x386475=a0_0x470d84;try{const _0x272ed8=_0x13878a['params']['id'],_0x59a37e=await categories['findByIdAndDelete'](_0x272ed8);_0x13878a[_0x386475(0xf6)](_0x386475(0xaf),_0x386475(0xae)),_0x40d1eb[_0x386475(0xee)](_0x386475(0xdc));}catch(_0x38862a){console[_0x386475(0x113)](_0x38862a);}}),router[a0_0x470d84(0x11a)]('/brands',auth,async(_0x4d7428,_0x16dad0)=>{const _0x5e6dae=a0_0x470d84;try{const {username:_0x4685b5,email:_0x346e0a,role:_0x6d93ef}=_0x4d7428[_0x5e6dae(0xbc)],_0x5b8cd2=_0x4d7428['user'],_0x508469=await profile[_0x5e6dae(0x107)]({'email':_0x5b8cd2['email']}),_0x44a978=await master_shop['find']();console['log'](_0x5e6dae(0xf7),_0x44a978);const _0x1bfca1=await brands['find']();if(_0x44a978[0x0]['language']=='English\x20(US)')var _0x183d95=users['English'];else{if(_0x44a978[0x0]['language']==_0x5e6dae(0x138))var _0x183d95=users[_0x5e6dae(0x138)];else{if(_0x44a978[0x0]['language']==_0x5e6dae(0x144))var _0x183d95=users[_0x5e6dae(0x144)];else{if(_0x44a978[0x0][_0x5e6dae(0x12d)]==_0x5e6dae(0x10e))var _0x183d95=users[_0x5e6dae(0x10e)];else{if(_0x44a978[0x0]['language']=='French')var _0x183d95=users[_0x5e6dae(0x105)];else{if(_0x44a978[0x0][_0x5e6dae(0x12d)]==_0x5e6dae(0x122))var _0x183d95=users['Portuguese'];else{if(_0x44a978[0x0][_0x5e6dae(0x12d)]==_0x5e6dae(0x132))var _0x183d95=users['Chinese'];else{if(_0x44a978[0x0][_0x5e6dae(0x12d)]=='Arabic\x20(ae)')var _0x183d95=users['Arabic'];}}}}}}}_0x16dad0[_0x5e6dae(0x142)]('brands',{'success':_0x4d7428[_0x5e6dae(0xf6)](_0x5e6dae(0xaf)),'errors':_0x4d7428[_0x5e6dae(0xf6)]('errors'),'role':_0x5b8cd2,'profile':_0x508469,'master_shop':_0x44a978,'user':_0x1bfca1,'language':_0x183d95});}catch(_0xad2557){console[_0x5e6dae(0x113)](_0xad2557);}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0xbe),auth,async(_0x1a9d3b,_0x4e3366)=>{const _0xefa68c=a0_0x470d84;try{const {name:_0x1cf8cc,products:_0x3bf310}=_0x1a9d3b['body'],_0x27884f=new brands({'name':_0x1cf8cc,'products':_0x3bf310}),_0x1ba543=await brands[_0xefa68c(0x107)]({'name':_0x1cf8cc});_0x1ba543?_0x1a9d3b[_0xefa68c(0xf6)](_0xefa68c(0xf9),_0x1cf8cc+_0xefa68c(0x8b)):_0x1a9d3b[_0xefa68c(0xf6)](_0xefa68c(0xaf),_0x1cf8cc+_0xefa68c(0xed));const _0x2101bb=await _0x27884f[_0xefa68c(0x13f)]();_0x4e3366[_0xefa68c(0xee)](_0xefa68c(0xb5));}catch(_0x2d824f){console[_0xefa68c(0x113)](_0x2d824f);}}),router[a0_0x470d84(0x11a)]('/brands/:id',auth,async(_0x47a678,_0x334cf3)=>{const _0x6f7fb0=a0_0x470d84;try{const {username:_0x26955,email:_0x113e16,role:_0x35427d}=_0x47a678[_0x6f7fb0(0xbc)],_0x253166=_0x47a678['user'],_0x575e3e=await profile[_0x6f7fb0(0x107)]({'email':_0x253166[_0x6f7fb0(0xa3)]}),_0x24b148=await master_shop[_0x6f7fb0(0x10a)]();console['log']('master',_0x24b148);const _0x55f0ea=_0x47a678[_0x6f7fb0(0xfb)]['id'];console[_0x6f7fb0(0x113)](_0x55f0ea);const _0x42766c=await brands[_0x6f7fb0(0x98)](_0x55f0ea);if(_0x24b148[0x0][_0x6f7fb0(0x12d)]=='English\x20(US)')var _0x51af9c=users[_0x6f7fb0(0xac)];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]=='Hindi')var _0x51af9c=users[_0x6f7fb0(0x138)];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]==_0x6f7fb0(0x144))var _0x51af9c=users[_0x6f7fb0(0x144)];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]==_0x6f7fb0(0x10e))var _0x51af9c=users['Spanish'];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]=='French')var _0x51af9c=users['French'];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]==_0x6f7fb0(0x122))var _0x51af9c=users['Portuguese'];else{if(_0x24b148[0x0]['language']==_0x6f7fb0(0x132))var _0x51af9c=users[_0x6f7fb0(0x132)];else{if(_0x24b148[0x0][_0x6f7fb0(0x12d)]=='Arabic\x20(ae)')var _0x51af9c=users[_0x6f7fb0(0x133)];}}}}}}}_0x334cf3['render']('brands',{'success':_0x47a678['flash']('success'),'errors':_0x47a678[_0x6f7fb0(0xf6)](_0x6f7fb0(0xf9)),'role':_0x253166,'profile':_0x575e3e,'master_shop':_0x24b148,'user':_0x42766c,'language':_0x51af9c});}catch(_0x541585){console['log'](_0x541585);}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0x130),auth,async(_0x3bfa40,_0x41cd4f)=>{const _0x1ce7ec=a0_0x470d84;try{const _0x2ebbe9=_0x3bfa40[_0x1ce7ec(0xfb)]['id'],_0x3b7dd3=await brands['findByIdAndUpdate'](_0x2ebbe9,_0x3bfa40[_0x1ce7ec(0x103)]);_0x3bfa40['flash'](_0x1ce7ec(0xaf),_0x1ce7ec(0xec)),_0x41cd4f['redirect'](_0x1ce7ec(0xb5));}catch(_0x363ea0){console[_0x1ce7ec(0x113)](_0x363ea0);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0xe6),auth,async(_0x24e164,_0x27c0fc)=>{const _0x2f1456=a0_0x470d84;try{const _0x31394f=_0x24e164[_0x2f1456(0xfb)]['id'],_0x1d99ea=await brands[_0x2f1456(0x135)](_0x31394f);_0x24e164[_0x2f1456(0xf6)](_0x2f1456(0xaf),_0x2f1456(0x117)),_0x27c0fc[_0x2f1456(0xee)](_0x2f1456(0xb5));}catch(_0x19ebc6){console[_0x2f1456(0x113)](_0x19ebc6);}}),router['get'](a0_0x470d84(0xc5),auth,async(_0xef85ec,_0x1bff4b)=>{const _0x3540ea=a0_0x470d84;try{const {username:_0x517f8d,email:_0x76653b,role:_0x1f364d}=_0xef85ec[_0x3540ea(0xbc)],_0x1c1d3c=_0xef85ec[_0x3540ea(0xbc)],_0x55abf4=await profile[_0x3540ea(0x107)]({'email':_0x1c1d3c[_0x3540ea(0xa3)]}),_0x1f066e=await master_shop[_0x3540ea(0x10a)]();console[_0x3540ea(0x113)](_0x3540ea(0xf7),_0x1f066e);const _0x39a455=await units[_0x3540ea(0x10a)]();if(_0x1f066e[0x0][_0x3540ea(0x12d)]==_0x3540ea(0xe1))var _0x449391=users[_0x3540ea(0xac)];else{if(_0x1f066e[0x0][_0x3540ea(0x12d)]==_0x3540ea(0x138))var _0x449391=users[_0x3540ea(0x138)];else{if(_0x1f066e[0x0][_0x3540ea(0x12d)]==_0x3540ea(0x144))var _0x449391=users['German'];else{if(_0x1f066e[0x0]['language']=='Spanish')var _0x449391=users['Spanish'];else{if(_0x1f066e[0x0]['language']==_0x3540ea(0x105))var _0x449391=users[_0x3540ea(0x105)];else{if(_0x1f066e[0x0][_0x3540ea(0x12d)]==_0x3540ea(0x122))var _0x449391=users[_0x3540ea(0xcb)];else{if(_0x1f066e[0x0][_0x3540ea(0x12d)]==_0x3540ea(0x132))var _0x449391=users[_0x3540ea(0x132)];else{if(_0x1f066e[0x0][_0x3540ea(0x12d)]=='Arabic\x20(ae)')var _0x449391=users[_0x3540ea(0x133)];}}}}}}}_0x1bff4b[_0x3540ea(0x142)](_0x3540ea(0xa7),{'success':_0xef85ec[_0x3540ea(0xf6)](_0x3540ea(0xaf)),'errors':_0xef85ec[_0x3540ea(0xf6)](_0x3540ea(0xf9)),'role':_0x1c1d3c,'profile':_0x55abf4,'master_shop':_0x1f066e,'user':_0x39a455,'language':_0x449391});}catch(_0x5bfc0a){console[_0x3540ea(0x113)](_0x5bfc0a);}}),router[a0_0x470d84(0xd4)]('/units',auth,async(_0x38cfcf,_0xc38cd)=>{const _0x440b9d=a0_0x470d84;try{const {name:_0x363ed7,secondary_unit:_0x1c0d20,products:_0x547a59}=_0x38cfcf[_0x440b9d(0x103)],_0x13330f=new units({'name':_0x363ed7,'secondary_unit':_0x1c0d20,'products':_0x547a59}),_0x23808e=await units[_0x440b9d(0x107)]({'name':_0x363ed7});_0x23808e?_0x38cfcf[_0x440b9d(0xf6)](_0x440b9d(0xf9),_0x363ed7+_0x440b9d(0x13c)):_0x38cfcf['flash'](_0x440b9d(0xaf),_0x363ed7+'\x20unit\x20is\x20add\x20successfully');const _0x176881=await _0x13330f[_0x440b9d(0x13f)]();_0xc38cd['redirect']('/products/units');}catch(_0x5e9047){console['log'](_0x5e9047);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0xef),auth,async(_0x1cd681,_0xacb015)=>{const _0x45d517=a0_0x470d84;try{const {username:_0x35c536,email:_0x155e08,role:_0xb50346}=_0x1cd681[_0x45d517(0xbc)],_0x3ba1d5=_0x1cd681[_0x45d517(0xbc)],_0x94a28d=await profile[_0x45d517(0x107)]({'email':_0x3ba1d5['email']}),_0xe65915=await master_shop[_0x45d517(0x10a)]();console[_0x45d517(0x113)](_0x45d517(0xf7),_0xe65915);const _0x58dca0=_0x1cd681[_0x45d517(0xfb)]['id'],_0x2f353e=await units['findById'](_0x58dca0);if(_0xe65915[0x0][_0x45d517(0x12d)]==_0x45d517(0xe1))var _0x18bb51=users[_0x45d517(0xac)];else{if(_0xe65915[0x0][_0x45d517(0x12d)]==_0x45d517(0x138))var _0x18bb51=users[_0x45d517(0x138)];else{if(_0xe65915[0x0][_0x45d517(0x12d)]=='German')var _0x18bb51=users[_0x45d517(0x144)];else{if(_0xe65915[0x0][_0x45d517(0x12d)]=='Spanish')var _0x18bb51=users[_0x45d517(0x10e)];else{if(_0xe65915[0x0]['language']=='French')var _0x18bb51=users[_0x45d517(0x105)];else{if(_0xe65915[0x0][_0x45d517(0x12d)]==_0x45d517(0x122))var _0x18bb51=users['Portuguese'];else{if(_0xe65915[0x0][_0x45d517(0x12d)]==_0x45d517(0x132))var _0x18bb51=users['Chinese'];else{if(_0xe65915[0x0][_0x45d517(0x12d)]=='Arabic\x20(ae)')var _0x18bb51=users['Arabic'];}}}}}}}_0xacb015[_0x45d517(0x142)]('units',{'success':_0x1cd681['flash'](_0x45d517(0xaf)),'errors':_0x1cd681[_0x45d517(0xf6)](_0x45d517(0xf9)),'role':_0x3ba1d5,'profile':_0x94a28d,'master_shop':_0xe65915,'user':_0x2f353e,'language':_0x18bb51});}catch(_0x2202e9){console[_0x45d517(0x113)](_0x2202e9);}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0xef),auth,async(_0x303539,_0x4f5d6f)=>{const _0x415f07=a0_0x470d84;try{const _0x45ca6a=_0x303539[_0x415f07(0xfb)]['id'],_0x5a813f=await units[_0x415f07(0xcc)](_0x45ca6a,_0x303539['body']);_0x303539[_0x415f07(0xf6)](_0x415f07(0xaf),'unit\x20data\x20update\x20successfully'),_0x4f5d6f[_0x415f07(0xee)](_0x415f07(0x9e));}catch(_0xed4a1d){console['log'](_0xed4a1d);}}),router[a0_0x470d84(0x11a)]('/units/delete/:id',auth,async(_0x56b5da,_0x58519b)=>{const _0x4e6751=a0_0x470d84;try{const _0x181d6f=_0x56b5da['params']['id'],_0x193956=await units['findByIdAndDelete'](_0x181d6f);_0x56b5da['flash']('success',_0x4e6751(0x8d)),_0x58519b[_0x4e6751(0xee)](_0x4e6751(0x9e));}catch(_0x12561a){console['log'](_0x12561a);}});const storage=multer[a0_0x470d84(0xc4)]({'destination':(_0x379a3c,_0x5ee172,_0x5afd52)=>{const _0x141fb4=a0_0x470d84;_0x5afd52(null,_0x141fb4(0xad));},'filename':(_0x5873c0,_0x55784a,_0x4064a5)=>{_0x4064a5(null,Date['now']()+_0x55784a['originalname']);}}),upload=multer({'storage':storage});function a0_0x66b8(){const _0x2d8771=['multer','$product_name','min','defaultProduct.avif','Products_category','findById','numeric','hello','MaxperUnits','PAlQty','/select_data','/products/units','1sfquSD','length','Maximum_Stocks','attachment;\x20filename=Product_Migration_File.xlsx','email','Primary_Code','toString','Sheets','units','110720SlIDUs','/view/:id','brands','\x20categories\x20is\x20add\x20successfully','English','public/upload','categories\x20data\x20delete\x20successfully','success','xlsx','express/lib/response','stock','name','12234UGQSJa','/products/brands','Brands','edit_product','maxStocks','../middleware/auth','status','send','user','/view','/brands','Products\x20warehouse_data','alertquantity','/products/view','/categories/:id','88thBgfA','diskStorage','/units','then','\x20added\x20successfully','Category','product_category','height','Portuguese','findByIdAndUpdate','message','Raw\x20Materials','/categories/delete/:id','/print_barcode_filter/','categ','data','CODE128','post','product_stock','originalname','canvas','prod_categ','Content-Type','/categories','568805OfWfhZ','/products/categories','295863IveWaZ','barcode\x20user_id','Products\x20master','now','English\x20(US)','end','ProductCode','Prod_Cat','PBrands','/brands/delete/:id','addPage','toBuffer','Units','push','/filter_product','brand\x20data\x20update\x20successfully','\x20brand\x20is\x20add\x20successfully','redirect','/units/:id','product\x20update\x20successfully','Workbook','SheetNames','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_details.product_name','categories_edit','flash','master','primary_code','errors','$product_docs','params','width','$product_stock','image','filename','Products','PUnits','Alert_QTY','body','Secondary_Units','French','Secondary_Code','findOne','unit','210akoAbo','find','$category','/barcode_data','$product_details','Spanish','Enabled','product_docs','PSecondaryUnits','Products\x20find_data','log','edit\x20Product\x20master','warehouse','json','brand\x20data\x20delete\x20successfully','secondary_code','/view/add_products','get','/print_barcode_single/:id','68462HcQbfh','8SXPeNQ','map','base64','Finished\x20Goods','\x20Edit\x20Successfully','Portuguese\x20(BR)','express','setHeader','max_number_per_units','utils','public/Migration','1290591IrIosF','secondary_unit','concat','brand','$product_details.product_name','language','product_barcode','products','/brands/:id','\x20<>\x20','Chinese','Arabic','single','findByIdAndDelete','PCat','346328VPRKlH','Hindi','$brand','file','forEach','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','maxProdPerUnit','Arabic\x20(ae)','save','$product_details.product_stock','$_id','render','bind','German','category','$product_category','add_product','pdfkit-table','product\x20edit','jsbarcode','product\x20add\x20successfully','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','../public/language/languages.json','unit\x20data\x20delete\x20successfully','Product_Name','product_code','Product_Code','migrate_product_fule','aggregate'];a0_0x66b8=function(){return _0x2d8771;};return a0_0x66b8();}router[a0_0x470d84(0x11a)](a0_0x470d84(0xbd),auth,async(_0x2bc946,_0x17de2c)=>{const _0x3fec03=a0_0x470d84;try{const {username:_0x2d27f1,email:_0x51527e,role:_0x303461}=_0x2bc946[_0x3fec03(0xbc)],_0x225b13=_0x2bc946[_0x3fec03(0xbc)],_0x12e14b=await profile[_0x3fec03(0x107)]({'email':_0x225b13[_0x3fec03(0xa3)]}),_0x1e4dff={'year':_0x3fec03(0x99),'month':'long','day':'numeric'},_0x88e965=await master_shop[_0x3fec03(0x10a)]();console[_0x3fec03(0x113)](_0x3fec03(0xdf),_0x88e965);const _0x420329=await product[_0x3fec03(0x10a)]();console[_0x3fec03(0x113)](_0x3fec03(0x112),_0x420329);const _0x53c5c4=await warehouse[_0x3fec03(0x92)]([{'$unwind':_0x3fec03(0x10d)},{'$lookup':{'from':_0x3fec03(0x12f),'localField':_0x3fec03(0xf4),'foreignField':'name','as':_0x3fec03(0x110)}},{'$unwind':_0x3fec03(0xfa)},{'$project':{'product_name':_0x3fec03(0x12c),'product_stock':_0x3fec03(0x140)}},{'$group':{'_id':_0x3fec03(0x94),'product_stock':{'$sum':_0x3fec03(0xfd)}}}]);console[_0x3fec03(0x113)](_0x3fec03(0xbf),_0x53c5c4),_0x53c5c4[_0x3fec03(0x13b)](_0x32d027=>{const _0x2df223=_0x3fec03,_0x156518=_0x420329[_0x2df223(0x11e)](_0x2f7cb4=>{const _0x51ca6e=_0x2df223;_0x2f7cb4[_0x51ca6e(0xb3)]==_0x32d027['_id']&&(_0x2f7cb4[_0x51ca6e(0xb2)]=parseInt(_0x2f7cb4['stock'])+parseInt(_0x32d027[_0x51ca6e(0xd5)]));});}),console[_0x3fec03(0x113)](_0x3fec03(0x112),_0x420329);if(_0x88e965[0x0][_0x3fec03(0x12d)]==_0x3fec03(0xe1))var _0x568ceb=users[_0x3fec03(0xac)];else{if(_0x88e965[0x0][_0x3fec03(0x12d)]=='Hindi')var _0x568ceb=users[_0x3fec03(0x138)];else{if(_0x88e965[0x0][_0x3fec03(0x12d)]==_0x3fec03(0x144))var _0x568ceb=users[_0x3fec03(0x144)];else{if(_0x88e965[0x0]['language']==_0x3fec03(0x10e))var _0x568ceb=users[_0x3fec03(0x10e)];else{if(_0x88e965[0x0]['language']==_0x3fec03(0x105))var _0x568ceb=users[_0x3fec03(0x105)];else{if(_0x88e965[0x0][_0x3fec03(0x12d)]==_0x3fec03(0x122))var _0x568ceb=users['Portuguese'];else{if(_0x88e965[0x0][_0x3fec03(0x12d)]=='Chinese')var _0x568ceb=users[_0x3fec03(0x132)];else{if(_0x88e965[0x0][_0x3fec03(0x12d)]==_0x3fec03(0x13e))var _0x568ceb=users[_0x3fec03(0x133)];}}}}}}}_0x17de2c[_0x3fec03(0x142)](_0x3fec03(0x12f),{'success':_0x2bc946[_0x3fec03(0xf6)](_0x3fec03(0xaf)),'errors':_0x2bc946[_0x3fec03(0xf6)]('errors'),'alldata':_0x420329,'profile':_0x12e14b,'master_shop':_0x88e965,'role':_0x225b13,'product_stock':_0x53c5c4,'language':_0x568ceb});}catch(_0x2aea64){console[_0x3fec03(0x113)](_0x2aea64);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0x119),auth,async(_0x4c2cbd,_0x3bec3c)=>{const _0x333dc3=a0_0x470d84;try{const {username:_0x4438da,email:_0x2806c9,role:_0x58d028}=_0x4c2cbd[_0x333dc3(0xbc)],_0x102edf=_0x4c2cbd[_0x333dc3(0xbc)],_0xca1416=await profile[_0x333dc3(0x107)]({'email':_0x102edf['email']}),_0x36b79a=await master_shop[_0x333dc3(0x10a)]();console[_0x333dc3(0x113)](_0x333dc3(0xf7),_0x36b79a);const _0x17aff6=await categories[_0x333dc3(0x10a)]({}),_0x1ca626=await brands['find']({}),_0x321877=await units[_0x333dc3(0x10a)]({}),_0x3a1d88=await warehouse[_0x333dc3(0x10a)]({'status':_0x333dc3(0x10f)});if(_0x36b79a[0x0][_0x333dc3(0x12d)]=='English\x20(US)')var _0x2a73d7=users[_0x333dc3(0xac)];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x138))var _0x2a73d7=users[_0x333dc3(0x138)];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x144))var _0x2a73d7=users[_0x333dc3(0x144)];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x10e))var _0x2a73d7=users['Spanish'];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x105))var _0x2a73d7=users[_0x333dc3(0x105)];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x122))var _0x2a73d7=users[_0x333dc3(0xcb)];else{if(_0x36b79a[0x0][_0x333dc3(0x12d)]==_0x333dc3(0x132))var _0x2a73d7=users[_0x333dc3(0x132)];else{if(_0x36b79a[0x0]['language']=='Arabic\x20(ae)')var _0x2a73d7=users[_0x333dc3(0x133)];}}}}}}}_0x3bec3c[_0x333dc3(0x142)](_0x333dc3(0x86),{'success':_0x4c2cbd[_0x333dc3(0xf6)](_0x333dc3(0xaf)),'errors':_0x4c2cbd['flash'](_0x333dc3(0xf9)),'role':_0x102edf,'profile':_0xca1416,'categories':_0x17aff6,'brands':_0x1ca626,'master_shop':_0x36b79a,'units':_0x321877,'language':_0x2a73d7,'find_data':_0x3a1d88});}catch(_0x2041e9){console['log'](_0x2041e9);}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0x119),auth,upload[a0_0x470d84(0x134)](a0_0x470d84(0xfe)),async(_0x487721,_0x1d1790)=>{const _0x117117=a0_0x470d84;try{const {name:_0x558c7d,category:_0x3f9a3c,brand:_0x5d1384,unit:_0x1518c0,alertquantity:_0x43c48b,stock:_0x5a0b82,product_code:_0x5c703b,warehouse:_0x4c0bc2,primary_ItemCode:_0x2b9bda,second_ItemCode:_0x39e972,second_unit:_0x42a814,maxPerUnit:_0xedb6d1,MaxPerProduct:_0x2ce3df}=_0x487721[_0x117117(0x103)],_0x315e91=_0x487721[_0x117117(0x13a)]?.[_0x117117(0xff)]||_0x117117(0x96),_0x25bb83=new product({'image':_0x315e91,'name':_0x558c7d,'category':_0x3f9a3c,'brand':_0x5d1384,'unit':_0x1518c0,'alertquantity':_0x43c48b,'stock':_0x5a0b82,'product_code':_0x5c703b,'warehouse':_0x4c0bc2,'primary_code':_0x2b9bda,'secondary_code':_0x39e972,'second_unit':_0x42a814,'maxStocks':_0x2ce3df,'maxProdPerUnit':_0xedb6d1}),_0x2b274b=await _0x25bb83[_0x117117(0x13f)](),_0x3fab38=await categories[_0x117117(0x107)]({'name':_0x3f9a3c});_0x3fab38[_0x117117(0x12f)]=parseInt(_0x3fab38[_0x117117(0x12f)])+0x1,await _0x3fab38[_0x117117(0x13f)]();const _0x46b0ec=await brands[_0x117117(0x107)]({'name':_0x5d1384});_0x46b0ec[_0x117117(0x12f)]=parseInt(_0x46b0ec[_0x117117(0x12f)])+0x1,await _0x46b0ec[_0x117117(0x13f)]();const _0x316be8=await units[_0x117117(0x107)]({'name':_0x1518c0});_0x316be8[_0x117117(0x12f)]=parseInt(_0x316be8[_0x117117(0x12f)])+0x1,await _0x316be8[_0x117117(0x13f)](),_0x487721[_0x117117(0xf6)](_0x117117(0xaf),_0x117117(0x8a)),_0x1d1790[_0x117117(0xee)](_0x117117(0xc1));}catch(_0x516000){console[_0x117117(0x113)](_0x516000);}}),router[a0_0x470d84(0x11a)](a0_0x470d84(0xa9),auth,async(_0x3e2d92,_0xff2ee3)=>{const _0x39cca0=a0_0x470d84;try{const {username:_0x153bdc,email:_0xa5cb91,role:_0xda00d}=_0x3e2d92[_0x39cca0(0xbc)],_0x1e30e7=_0x3e2d92['user'],_0x315d73=await profile['findOne']({'email':_0x1e30e7[_0x39cca0(0xa3)]}),_0x377f52=await master_shop[_0x39cca0(0x10a)]();console['log'](_0x39cca0(0x114),_0x377f52);const _0x3bbd02=_0x3e2d92[_0x39cca0(0xfb)]['id'],_0x344ae5=await product[_0x39cca0(0x98)](_0x3bbd02),_0x451136=await categories[_0x39cca0(0x10a)]({}),_0x2aa0a8=await brands['find']({}),_0x112a10=await units[_0x39cca0(0x10a)]({}),_0x4cac77=await warehouse[_0x39cca0(0x10a)]({'status':'Enabled'}),_0x47908a=await units[_0x39cca0(0x92)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x377f52[0x0]['language']==_0x39cca0(0xe1))var _0x4799cc=users[_0x39cca0(0xac)];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]==_0x39cca0(0x138))var _0x4799cc=users['Hindi'];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]=='German')var _0x4799cc=users[_0x39cca0(0x144)];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]==_0x39cca0(0x10e))var _0x4799cc=users[_0x39cca0(0x10e)];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]==_0x39cca0(0x105))var _0x4799cc=users[_0x39cca0(0x105)];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]==_0x39cca0(0x122))var _0x4799cc=users[_0x39cca0(0xcb)];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]=='Chinese')var _0x4799cc=users['Chinese'];else{if(_0x377f52[0x0][_0x39cca0(0x12d)]=='Arabic\x20(ae)')var _0x4799cc=users['Arabic'];}}}}}}}_0xff2ee3['render'](_0x39cca0(0xb7),{'success':_0x3e2d92[_0x39cca0(0xf6)](_0x39cca0(0xaf)),'errors':_0x3e2d92[_0x39cca0(0xf6)]('errors'),'role':_0x1e30e7,'profile':_0x315d73,'alldata':_0x344ae5,'categories':_0x451136,'brands':_0x2aa0a8,'master_shop':_0x377f52,'units':_0x112a10,'secondunit':_0x47908a,'find_data':_0x4cac77,'language':_0x4799cc});}catch(_0x5c6391){console['log'](_0x5c6391);}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0xa9),auth,upload[a0_0x470d84(0x134)]('image'),async(_0x419ceb,_0x3aaaed)=>{const _0xde0191=a0_0x470d84;try{console[_0xde0191(0x113)](_0xde0191(0x9a));const _0x331feb=_0x419ceb[_0xde0191(0xfb)]['id'],_0x25f5e5=await product[_0xde0191(0x98)](_0x331feb),{image:_0x5e6161,name:_0x234ff9,category:_0x1fcdea,brand:_0x3de560,sku:_0x569e24,unit:_0x22d551,alertquantity:_0x48edc3,product_code:_0x40dceb,warehouse:_0x1b8ebf,primary_ItemCode:_0x4afdb2,second_ItemCode:_0x5dcfff,second_unit:_0x2550c9,maxPerUnit:_0x13395e,MaxPerProduct:_0x2d09e4,prod_catdata:_0xb6414f}=_0x419ceb[_0xde0191(0x103)];_0x419ceb[_0xde0191(0x13a)]&&(_0x25f5e5[_0xde0191(0xfe)]=_0x419ceb[_0xde0191(0x13a)][_0xde0191(0xff)]);_0x25f5e5['name']=_0x234ff9,_0x25f5e5['category']=_0x1fcdea,_0x25f5e5[_0xde0191(0x12b)]=_0x3de560,_0x25f5e5['sku']=_0x569e24,_0x25f5e5['unit']=_0x22d551,_0x25f5e5[_0xde0191(0xc0)]=_0x48edc3,_0x25f5e5['product_code']=_0x40dceb,_0x25f5e5[_0xde0191(0x115)]=_0x1b8ebf,_0x25f5e5['primary_code']=_0x4afdb2,_0x25f5e5['secondary_code']=_0x5dcfff,_0x25f5e5[_0xde0191(0x129)]=_0x2550c9,_0x25f5e5[_0xde0191(0xb8)]=_0x2d09e4,_0x25f5e5[_0xde0191(0x13d)]=_0x13395e,_0x25f5e5[_0xde0191(0xc9)]=_0xb6414f;const _0x2cc94c=await _0x25f5e5[_0xde0191(0x13f)]();console[_0xde0191(0x113)](_0xde0191(0x88),_0x25f5e5),_0x419ceb[_0xde0191(0xf6)](_0xde0191(0xaf),_0xde0191(0xf0)),_0x3aaaed[_0xde0191(0xee)](_0xde0191(0xc1));}catch(_0x4d5d3e){console['log'](_0x4d5d3e);}}),router[a0_0x470d84(0x11a)]('/barcode/:id',auth,async(_0x5a3831,_0x1e71c1)=>{const _0x4b9fc2=a0_0x470d84;try{const {username:_0x30e903,email:_0x17901e,role:_0x104287}=_0x5a3831[_0x4b9fc2(0xbc)],_0x155180=_0x5a3831[_0x4b9fc2(0xbc)],_0x4cc58b=await profile[_0x4b9fc2(0x107)]({'email':_0x155180[_0x4b9fc2(0xa3)]}),_0x1e6f31=await master_shop[_0x4b9fc2(0x10a)]();console['log']('barcode\x20Product\x20master',_0x1e6f31);const _0x382bb0=_0x5a3831[_0x4b9fc2(0xfb)]['id'],_0x4d40c3=await product['findById'](_0x382bb0);console[_0x4b9fc2(0x113)](_0x4b9fc2(0xde),_0x4d40c3);if(_0x1e6f31[0x0]['language']==_0x4b9fc2(0xe1))var _0x2626bd=users[_0x4b9fc2(0xac)];else{if(_0x1e6f31[0x0][_0x4b9fc2(0x12d)]==_0x4b9fc2(0x138))var _0x2626bd=users[_0x4b9fc2(0x138)];else{if(_0x1e6f31[0x0][_0x4b9fc2(0x12d)]==_0x4b9fc2(0x144))var _0x2626bd=users[_0x4b9fc2(0x144)];else{if(_0x1e6f31[0x0]['language']==_0x4b9fc2(0x10e))var _0x2626bd=users[_0x4b9fc2(0x10e)];else{if(_0x1e6f31[0x0]['language']==_0x4b9fc2(0x105))var _0x2626bd=users[_0x4b9fc2(0x105)];else{if(_0x1e6f31[0x0]['language']==_0x4b9fc2(0x122))var _0x2626bd=users['Portuguese'];else{if(_0x1e6f31[0x0][_0x4b9fc2(0x12d)]==_0x4b9fc2(0x132))var _0x2626bd=users['Chinese'];else{if(_0x1e6f31[0x0][_0x4b9fc2(0x12d)]==_0x4b9fc2(0x13e))var _0x2626bd=users[_0x4b9fc2(0x133)];}}}}}}}_0x1e71c1[_0x4b9fc2(0x142)](_0x4b9fc2(0x12e),{'success':_0x5a3831[_0x4b9fc2(0xf6)](_0x4b9fc2(0xaf)),'errors':_0x5a3831['flash'](_0x4b9fc2(0xf9)),'role':_0x155180,'profile':_0x4cc58b,'alldata':_0x4d40c3,'master_shop':_0x1e6f31,'language':_0x2626bd});}catch(_0x6fd87a){console['log'](_0x6fd87a);}}),router['get']('/products_export_migrate_file',auth,async(_0x4db1a7,_0x5d1f93)=>{const _0x51ac4f=a0_0x470d84;try{const _0x43b426=new excelJS[(_0x51ac4f(0xf1))](),_0x334a9a=_0x43b426['addWorksheet'](_0x51ac4f(0x100));return _0x334a9a['columns']=[{'header':_0x51ac4f(0x8e),'key':'PName','width':0xa},{'header':_0x51ac4f(0xb6),'key':_0x51ac4f(0xe5),'width':0xa},{'header':'Units','key':_0x51ac4f(0x101),'width':0xa},{'header':_0x51ac4f(0x104),'key':_0x51ac4f(0x111),'width':0xa},{'header':_0x51ac4f(0x125),'key':_0x51ac4f(0x9b),'width':0xa},{'header':_0x51ac4f(0xa4),'key':_0x51ac4f(0xe3),'width':0xa},{'header':_0x51ac4f(0x106),'key':_0x51ac4f(0xe3),'width':0xa},{'header':_0x51ac4f(0x90),'key':_0x51ac4f(0xe3),'width':0xa},{'header':_0x51ac4f(0xc8),'key':_0x51ac4f(0x136),'width':0xa},{'header':_0x51ac4f(0x102),'key':_0x51ac4f(0x9c),'width':0xa},{'header':_0x51ac4f(0xa1),'key':_0x51ac4f(0x9c),'width':0xa},{'header':_0x51ac4f(0x97),'key':_0x51ac4f(0xe4),'width':0xa}],_0x5d1f93[_0x51ac4f(0x124)](_0x51ac4f(0xd9),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5d1f93['setHeader']('Content-Disposition',_0x51ac4f(0xa2)),_0x43b426[_0x51ac4f(0xb0)]['write'](_0x5d1f93)[_0x51ac4f(0xc6)](()=>{const _0x34e998=_0x51ac4f;_0x5d1f93[_0x34e998(0xba)](0xc8);});}catch(_0x2b018e){_0x5d1f93[_0x51ac4f(0xba)](0x190)[_0x51ac4f(0xbb)](_0x2b018e);}});const storage1=multer['diskStorage']({'destination':(_0xe99934,_0x5d69be,_0x57a761)=>{const _0x2f6d32=a0_0x470d84;_0x57a761(null,_0x2f6d32(0x127));},'filename':(_0x5c70d1,_0x42d4ac,_0x11f496)=>{const _0x4213b9=a0_0x470d84;_0x11f496(null,Date[_0x4213b9(0xe0)]()+_0x42d4ac[_0x4213b9(0xd6)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x470d84(0xd4)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x470d84(0x134)](a0_0x470d84(0x91)),async(_0x5e25c1,_0x20d01f)=>{const _0x4650e8=a0_0x470d84,_0x1f6850=_0x5e25c1[_0x4650e8(0x13a)][_0x4650e8(0xff)],_0x366b9c=await xlsx['readFile']('public/Migration/'+_0x1f6850);let _0x3d3e2c=_0x366b9c[_0x4650e8(0xf2)],_0xd36c99=xlsx[_0x4650e8(0x126)]['sheet_to_json'](_0x366b9c[_0x4650e8(0xa6)][_0x3d3e2c[0x0]]);for(const _0x3daa16 of _0xd36c99){const _0x4e4c6c=_0x3daa16[_0x4650e8(0x8e)],_0x31b59d=_0x3daa16[_0x4650e8(0xb6)],_0x543807=_0x3daa16[_0x4650e8(0xe9)],_0x328670=_0x3daa16[_0x4650e8(0x104)],_0x2e8072=_0x3daa16['Product_Code'],_0x443ae8=_0x3daa16[_0x4650e8(0xc8)],_0x31fb1b=_0x3daa16[_0x4650e8(0x102)],_0x1a6e66=_0x3daa16[_0x4650e8(0xa4)],_0x17e96c=_0x3daa16[_0x4650e8(0x106)],_0x2397ad=_0x3daa16[_0x4650e8(0xa1)],_0x44b722=_0x3daa16[_0x4650e8(0x125)],_0x44a2c5=_0x3daa16['Products_category'];try{let _0x38f43b=await categories[_0x4650e8(0x107)]({'name':_0x443ae8});if(!_0x38f43b){const _0x171880=new categories({'name':_0x443ae8,'products':'0'});_0x38f43b=await _0x171880[_0x4650e8(0x13f)]();}let _0x275a52=await brands[_0x4650e8(0x107)]({'name':_0x31b59d});if(!_0x275a52){const _0x36aa5b=new brands({'name':_0x31b59d,'products':'0'});_0x275a52=await _0x36aa5b[_0x4650e8(0x13f)]();}let _0x24793a=await units[_0x4650e8(0x107)]({'name':_0x543807,'secondary_unit':_0x328670});if(!_0x24793a){const _0x14eeac=new units({'name':_0x543807,'secondary_unit':_0x328670,'products':'0'});_0x24793a=await _0x14eeac[_0x4650e8(0x13f)]();}const _0x42a39b=await product[_0x4650e8(0x10a)]({'name':_0x4e4c6c,'category':_0x38f43b[_0x4650e8(0xb3)],'brand':_0x275a52[_0x4650e8(0xb3)],'secondary_unit':_0x24793a[_0x4650e8(0x129)],'product_code':_0x2e8072});console[_0x4650e8(0x113)](_0x42a39b[_0x4650e8(0xa0)]+_0x4650e8(0x131)+_0x38f43b[_0x4650e8(0xb3)]+_0x4650e8(0x131)+_0x275a52[_0x4650e8(0xb3)]+'\x20<>\x20'+_0x24793a[_0x4650e8(0x129)]+'\x20<>\x20'+_0x2e8072+'\x20<>\x20'+_0x4e4c6c);if(_0x42a39b['length']===0x0){const _0x10a32f=new product({'image':_0x4650e8(0x96),'name':_0x4e4c6c,'category':_0x38f43b[_0x4650e8(0xb3)],'brand':_0x275a52[_0x4650e8(0xb3)],'unit':_0x24793a['name'],'alertquantity':_0x31fb1b,'product_code':_0x2e8072,'secondary_unit':_0x24793a['secondary_unit'],'primary_code':_0x1a6e66,'secondary_code':_0x17e96c,'maxStocks':_0x2397ad,'maxProdPerUnit':_0x44b722,'product_category':_0x44a2c5}),_0x4c2e77=await _0x10a32f['save']();_0x38f43b[_0x4650e8(0x12f)]=parseInt(_0x38f43b['products'])+0x1,await _0x38f43b[_0x4650e8(0x13f)](),_0x275a52[_0x4650e8(0x12f)]=parseInt(_0x275a52[_0x4650e8(0x12f)])+0x1,await _0x275a52[_0x4650e8(0x13f)](),_0x24793a[_0x4650e8(0x12f)]=parseInt(_0x24793a[_0x4650e8(0x12f)])+0x1,await _0x24793a[_0x4650e8(0x13f)](),_0x5e25c1[_0x4650e8(0xf6)](_0x4650e8(0xaf),_0x4e4c6c+_0x4650e8(0xc7));}else{console[_0x4650e8(0x113)](_0x42a39b[0x0]);const _0x3d4b45=_0x42a39b[0x0];_0x3d4b45[_0x4650e8(0x145)]=_0x38f43b[_0x4650e8(0xb3)],_0x3d4b45[_0x4650e8(0x12b)]=_0x275a52[_0x4650e8(0xb3)],_0x3d4b45[_0x4650e8(0x108)]=_0x24793a['name'],_0x3d4b45['alertquantity']=_0x31fb1b,_0x3d4b45[_0x4650e8(0x8f)]=_0x2e8072,_0x3d4b45[_0x4650e8(0x129)]=_0x24793a['secondary_unit'],_0x3d4b45[_0x4650e8(0xf8)]=_0x1a6e66,_0x3d4b45[_0x4650e8(0x118)]=_0x17e96c,_0x3d4b45[_0x4650e8(0xb8)]=_0x2397ad,_0x3d4b45[_0x4650e8(0x13d)]=_0x44b722,_0x3d4b45[_0x4650e8(0xc9)]=_0x44a2c5;const _0x393c2b=await _0x3d4b45[_0x4650e8(0x13f)]();_0x5e25c1['flash'](_0x4650e8(0xaf),_0x393c2b[_0x4650e8(0xb3)]+_0x4650e8(0x121));}}catch(_0x10e744){_0x20d01f['status'](0x1f4)[_0x4650e8(0x116)]({'proderror':_0x10e744[_0x4650e8(0xcd)],'aproduct':_0x4e4c6c});}}_0x20d01f['redirect'](_0x4650e8(0xc1));}),router[a0_0x470d84(0xd4)](a0_0x470d84(0x9d),auth,async(_0x231c01,_0x51c36d)=>{const _0x533a38=a0_0x470d84;try{console[_0x533a38(0x113)](_0x231c01[_0x533a38(0x103)]);const {data_cateory:_0x58df85,datachoose:_0x48a332}=_0x231c01[_0x533a38(0x103)];var _0x2eac1c;if(_0x48a332==_0x533a38(0xd8))_0x2eac1c=await product[_0x533a38(0x92)]([{'$group':{'_id':_0x533a38(0x146)}}]);else{if(_0x48a332==_0x533a38(0xaa))_0x2eac1c=await product[_0x533a38(0x92)]([{'$match':{'product_category':_0x58df85}},{'$group':{'_id':_0x533a38(0x139)}}]);else _0x48a332==_0x533a38(0xd1)&&(_0x2eac1c=await product['aggregate']([{'$match':{'product_category':_0x58df85}},{'$group':{'_id':_0x533a38(0x10b)}}]));}_0x51c36d[_0x533a38(0x116)](_0x2eac1c);}catch(_0x5da8fb){_0x51c36d['json']({'message':_0x5da8fb[_0x533a38(0xcd)]});}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0xeb),auth,async(_0xb5c686,_0x3d5597)=>{const _0x168675=a0_0x470d84;try{const {data_choosing:_0x383ebf,data_selected:_0x3074d1}=_0xb5c686[_0x168675(0x103)];var _0x53aef9;if(_0x383ebf==_0x168675(0xd8))_0x53aef9=await product[_0x168675(0x92)]([{'$match':{'product_category':_0x3074d1}}]);else{if(_0x383ebf==_0x168675(0xaa))_0x53aef9=await product[_0x168675(0x92)]([{'$match':{'brand':_0x3074d1}}]);else _0x383ebf==_0x168675(0xd1)&&(_0x53aef9=await product[_0x168675(0x92)]([{'$match':{'category':_0x3074d1}}]));}_0x3d5597[_0x168675(0x116)](_0x53aef9);}catch(_0x170a03){_0x3d5597['json']({'message':_0x170a03['message']});}}),router[a0_0x470d84(0x11a)]('/print_barcode',auth,async(_0x5d1985,_0x509b94)=>{const _0x4468d3=a0_0x470d84,_0x21db12=_0x5d1985[_0x4468d3(0xbc)],_0x20fb45=await profile[_0x4468d3(0x107)]({'email':_0x21db12[_0x4468d3(0xa3)]}),_0x5bc25f=await master_shop[_0x4468d3(0x10a)](),_0x33e49d=await product[_0x4468d3(0x10a)]();if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0xe1))var _0x822b7=users['English'];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0x138))var _0x822b7=users[_0x4468d3(0x138)];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0x144))var _0x822b7=users[_0x4468d3(0x144)];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0x10e))var _0x822b7=users[_0x4468d3(0x10e)];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0x105))var _0x822b7=users[_0x4468d3(0x105)];else{if(_0x5bc25f[0x0]['language']==_0x4468d3(0x122))var _0x822b7=users[_0x4468d3(0xcb)];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]==_0x4468d3(0x132))var _0x822b7=users[_0x4468d3(0x132)];else{if(_0x5bc25f[0x0][_0x4468d3(0x12d)]=='Arabic\x20(ae)')var _0x822b7=users[_0x4468d3(0x133)];}}}}}}}_0x509b94[_0x4468d3(0x142)]('product_barcode_products',{'success':_0x5d1985[_0x4468d3(0xf6)](_0x4468d3(0xaf)),'errors':_0x5d1985['flash'](_0x4468d3(0xf9)),'role':_0x21db12,'profile':_0x20fb45,'products':_0x33e49d,'master_shop':_0x5bc25f,'language':_0x822b7});}),router['post'](a0_0x470d84(0x10c),auth,async(_0x2dfecf,_0xdf788d)=>{const _0x15c70d=a0_0x470d84,_0xa68f90=await product[_0x15c70d(0x10a)]();_0xdf788d[_0x15c70d(0x116)]({'data':_0xa68f90});}),router[a0_0x470d84(0xd4)]('/barcode_filter',auth,async(_0x54bd03,_0xdc57be)=>{const _0x39c7cf=a0_0x470d84;try{const {dataProdCat:_0x28fff7,dataProdIdentity:_0x259499}=_0x54bd03[_0x39c7cf(0x103)];var _0x58c720;switch(_0x28fff7){case'fg':switch(_0x259499){case _0x39c7cf(0xb6):_0x58c720=await product[_0x39c7cf(0x92)]([{'$match':{'product_category':_0x39c7cf(0x120)}},{'$group':{'_id':_0x39c7cf(0x139)}},{'$project':{'brand':_0x39c7cf(0x141)}}]);break;case _0x39c7cf(0xc8):_0x58c720=await product[_0x39c7cf(0x92)]([{'$match':{'product_category':_0x39c7cf(0x120)}},{'$group':{'_id':_0x39c7cf(0x10b)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x259499){case'Brands':_0x58c720=await product[_0x39c7cf(0x92)]([{'$match':{'product_category':_0x39c7cf(0xce)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x39c7cf(0x141)}}]);break;case _0x39c7cf(0xc8):_0x58c720=await product[_0x39c7cf(0x92)]([{'$match':{'product_category':_0x39c7cf(0xce)}},{'$group':{'_id':_0x39c7cf(0x10b)}},{'$project':{'category':_0x39c7cf(0x141)}}]);break;}break;}_0xdc57be[_0x39c7cf(0x116)](_0x58c720);}catch(_0x2d7d88){_0xdc57be[_0x39c7cf(0x116)]({'message':_0x2d7d88[_0x39c7cf(0xcd)]});}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0xd0),auth,async(_0xe5ef5f,_0x58f314)=>{const _0x195c59=a0_0x470d84;try{console[_0x195c59(0x113)](_0xe5ef5f[_0x195c59(0x103)]);const {prod_cat:_0x4a6060,identity:_0xc35300,valueData:_0x527669,typeofbarcode:_0x1f2d2f}=_0xe5ef5f[_0x195c59(0x103)];let _0x23ece3;switch(_0x4a6060){case'fg':if(_0xc35300==_0x195c59(0xb6))_0x23ece3=await product[_0x195c59(0x92)]([{'$match':{'product_category':_0x195c59(0x120),'brand':_0x527669}}]);else _0xc35300==_0x195c59(0xc8)&&(_0x23ece3=await product[_0x195c59(0x92)]([{'$match':{'product_category':_0x195c59(0x120),'category':_0x527669}}]));break;case'rm':if(_0xc35300==_0x195c59(0xb6))_0x23ece3=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x527669}}]);else _0xc35300==_0x195c59(0xc8)&&(_0x23ece3=await product['aggregate']([{'$match':{'product_category':_0x195c59(0xce),'category':_0x527669}}]));break;}const _0x75e168=_0x5b309a=>_0x5b309a*0x48,_0x239d02={'width':0x3,'height':0x1},_0xe55abe=new PDFDocument({'margin':_0x75e168(0.75),'size':[_0x75e168(_0x239d02[_0x195c59(0xfc)]),_0x75e168(_0x239d02['height'])],'bufferPages':!![]}),_0x45b001=_0x23ece3[_0x195c59(0xa0)];for(let _0x4fb64f=0x0;_0x4fb64f<=_0x45b001;_0x4fb64f++){if(_0x4fb64f!=_0x45b001){const _0x1b3c4f=_0x23ece3[_0x4fb64f][_0x195c59(0xb3)],_0x3e17ab=_0x23ece3[_0x4fb64f][_0x195c59(0xf8)],_0x5db847=_0x23ece3[_0x4fb64f][_0x195c59(0x118)],_0x3a7d8b=_0x23ece3[_0x4fb64f]['product_code'];var _0x3867f8;switch(_0x1f2d2f){case'1':_0x3867f8=_0x3e17ab;break;case'2':_0x3867f8=_0x5db847;break;case'3':_0x3867f8=_0x3a7d8b;break;}const _0x481efc={'width':0xd2,'height':0x64},_0x3accd2={'width':_0x75e168(_0x239d02[_0x195c59(0xfc)]),'height':_0x75e168(_0x239d02[_0x195c59(0xca)])},_0xc196aa=new Canvas();JsBarcode(_0xc196aa,_0x3867f8,{'format':'CODE128','height':_0x481efc[_0x195c59(0xca)],'displayValue':!![],'text':_0x3867f8});const _0x268cbb=_0xc196aa[_0x195c59(0xe8)](),_0x78d67a=_0x3accd2['width']/_0x481efc[_0x195c59(0xfc)],_0xfb680d=_0x3accd2['height']/_0x481efc['height'],_0x233c18=Math[_0x195c59(0x95)](_0x78d67a,_0xfb680d),_0x2f3faa=_0x481efc['width']*_0x233c18,_0x55bd0b=_0x481efc['height']*_0x233c18,_0x4c34bd=(_0x3accd2[_0x195c59(0xfc)]-_0x2f3faa)/0x2,_0x1730d7=(_0x3accd2['height']-_0x55bd0b)/0x2;_0xe55abe[_0x195c59(0xfe)](_0x268cbb,_0x4c34bd,_0x1730d7,{'width':_0x2f3faa,'height':_0x55bd0b}),_0x4fb64f!=_0x45b001&&_0xe55abe[_0x195c59(0xe7)]();}}const _0x3b8a9e=[];_0xe55abe['on'](_0x195c59(0xd2),_0x3b8a9e[_0x195c59(0xea)][_0x195c59(0x143)](_0x3b8a9e)),_0xe55abe['on'](_0x195c59(0xe2),()=>{const _0xa2c437=_0x195c59,_0x28c0ff=Buffer[_0xa2c437(0x12a)](_0x3b8a9e),_0x1320fa=_0x28c0ff[_0xa2c437(0xa5)](_0xa2c437(0x11f));_0x58f314[_0xa2c437(0x116)]({'pdfContent':_0x1320fa});}),_0xe55abe[_0x195c59(0xe2)]();}catch(_0x5f4fed){_0x58f314[_0x195c59(0x116)]({'message':_0x5f4fed['message']});}}),router[a0_0x470d84(0xd4)]('/print_barcode_filter_search/',auth,async(_0x536197,_0x5c1fdc)=>{const _0x4a5714=a0_0x470d84;try{console['log'](_0x536197[_0x4a5714(0x103)]);const {prod_cat:_0x5a7655,identity:_0x4a19a9,valueData:_0x30f30b}=_0x536197['body'];let _0x9f44fd;switch(_0x5a7655){case'fg':if(_0x4a19a9==_0x4a5714(0xb6))_0x9f44fd=await product[_0x4a5714(0x92)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x30f30b}}]);else _0x4a19a9=='Category'&&(_0x9f44fd=await product[_0x4a5714(0x92)]([{'$match':{'product_category':_0x4a5714(0x120),'category':_0x30f30b}}]));break;case'rm':if(_0x4a19a9=='Brands')_0x9f44fd=await product[_0x4a5714(0x92)]([{'$match':{'product_category':_0x4a5714(0xce),'brand':_0x30f30b}}]);else _0x4a19a9=='Category'&&(_0x9f44fd=await product['aggregate']([{'$match':{'product_category':_0x4a5714(0xce),'category':_0x30f30b}}]));break;}_0x5c1fdc[_0x4a5714(0x116)]({'data':_0x9f44fd});}catch(_0xa6dd9d){_0x5c1fdc['json']({'message':_0xa6dd9d[_0x4a5714(0xcd)]});}}),router[a0_0x470d84(0xd4)](a0_0x470d84(0x11b),auth,async(_0x3f91ed,_0x4b0f3a)=>{const _0x238d90=a0_0x470d84;try{const _0x1b359c=_0x3f91ed[_0x238d90(0xfb)]['id'],{copies:_0x107f97,typeofbarcode:_0x20d271}=_0x3f91ed[_0x238d90(0x103)];var _0x58329e=await product[_0x238d90(0x98)](_0x1b359c);const _0x28062d=_0x1ecc69=>_0x1ecc69*0x48,_0x3e1725={'width':0x3,'height':0x1},_0x1e5b55=new PDFDocument({'margin':_0x28062d(0.75),'size':[_0x28062d(_0x3e1725['width']),_0x28062d(_0x3e1725[_0x238d90(0xca)])],'bufferPages':!![]}),_0x1c02a3=_0x107f97,_0x4a4584=_0x58329e[_0x238d90(0xb3)],_0x3eab0e=_0x58329e['primary_code'],_0x1ca874=_0x58329e[_0x238d90(0x118)],_0x59c348=_0x58329e['product_code'];let _0x250fff;switch(_0x20d271){case'1':_0x250fff=_0x3eab0e;break;case'2':_0x250fff=_0x1ca874;break;case'3':_0x250fff=_0x59c348;break;}const _0x262ef4={'width':0xd2,'height':0x64},_0x2c3fc7={'width':_0x28062d(_0x3e1725[_0x238d90(0xfc)]),'height':_0x28062d(_0x3e1725[_0x238d90(0xca)])};for(let _0x3ce4b0=0x1;_0x3ce4b0<=_0x1c02a3;_0x3ce4b0++){const _0x1adebc=new Canvas();JsBarcode(_0x1adebc,_0x250fff,{'format':_0x238d90(0xd3),'height':_0x262ef4[_0x238d90(0xca)],'displayValue':!![],'text':_0x250fff});const _0x390eae=_0x1adebc['toBuffer'](),_0x534740=_0x2c3fc7[_0x238d90(0xfc)]/_0x262ef4[_0x238d90(0xfc)],_0x1529c3=_0x2c3fc7[_0x238d90(0xca)]/_0x262ef4[_0x238d90(0xca)],_0x155f13=Math['min'](_0x534740,_0x1529c3),_0x426409=_0x262ef4[_0x238d90(0xfc)]*_0x155f13,_0x70d4b5=_0x262ef4[_0x238d90(0xca)]*_0x155f13,_0x36fece=(_0x2c3fc7[_0x238d90(0xfc)]-_0x426409)/0x2,_0x6dfa7c=(_0x2c3fc7[_0x238d90(0xca)]-_0x70d4b5)/0x2;_0x1e5b55[_0x238d90(0xfe)](_0x390eae,_0x36fece,_0x6dfa7c,{'width':_0x426409,'height':_0x70d4b5}),_0x3ce4b0!=_0x1c02a3&&_0x1e5b55[_0x238d90(0xe7)]();}const _0x5ccce5=[];_0x1e5b55['on'](_0x238d90(0xd2),_0x5ccce5[_0x238d90(0xea)]['bind'](_0x5ccce5)),_0x1e5b55['on']('end',()=>{const _0x233fb6=_0x238d90,_0x12cb89=Buffer['concat'](_0x5ccce5),_0x37a2e7=_0x12cb89[_0x233fb6(0xa5)](_0x233fb6(0x11f));_0x4b0f3a[_0x233fb6(0x116)]({'pdfContent':_0x37a2e7});}),_0x1e5b55[_0x238d90(0xe2)]();}catch(_0x4e4ba3){_0x4b0f3a[_0x238d90(0x116)]({'message':_0x4e4ba3['message']});}}),module['exports']=router;