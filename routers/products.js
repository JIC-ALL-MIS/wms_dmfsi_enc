const a0_0x36e497=a0_0x1e1e;function a0_0xaab6(){const _0x53363b=['../middleware/auth','Product_Name','concat','German','5425oyZUqj','product_barcode','flash','secondary_unit','unit\x20data\x20delete\x20successfully','jsbarcode','category','units','find','findById','/products_export_migrate_file','/barcode/:id','body','\x20<>\x20','Maximum_Stocks','length','/products/view','categories\x20data\x20delete\x20successfully','setHeader','/products/units','French','product_barcode_products','categ','/barcode_data','PSecondaryUnits','master','findByIdAndUpdate','Products\x20master','Products_category','barcode\x20Product\x20master','PUnits','Portuguese\x20(BR)','addPage','Product_Code','then','numeric','brands','params','categories_edit','Primary_Code','\x20categories\x20is\x20add\x20successfully','canvas','user','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','$product_details.product_stock','stock','/brands/delete/:id','public/Migration','145404lDIDuM','/view/:id','$product_details','aggregate','min','primary_code','language','public/Migration/','$product_stock','12968IDdwGb','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Enabled','name','barcode\x20user_id','push','$product_details.product_name','message','image','base64','Products\x20warehouse_data','$category','file','Secondary_Units','Units','$brand','ProductCode','categories','$secondary_unit','\x20added\x20successfully','/products_import_migrate_file','findByIdAndDelete','max_number_per_units','794733vmPznj','email','English\x20(US)','Content-Disposition','/print_barcode_single/:id','warehouse','Products\x20find_data','findOne','log','/units/:id','$product_docs','/categories','15SJBwgn','unit','Finished\x20Goods','Workbook','prod_categ','brand\x20data\x20delete\x20successfully','utils','PCat','/filter_product','secondary_code','Products','$product_category','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','sheet_to_json','send','product_code','Sheets','Brands','defaultProduct.avif','product_stock','Router','render','toString','get','MaxperUnits','PBrands','end','maxStocks','/products/categories','multer','Chinese','/brands','Raw\x20Materials','product_category','2716976RXGJqw','toBuffer','single','/select_data','long','width','1353972WxkIQH','Portuguese','English','/print_barcode_filter/','post','exports','now','../models/all_models','filename','height','Arabic\x20(ae)','alertquantity','/categories/:id','redirect','bind','3cBZRNG','errors','unit\x20data\x20update\x20successfully','maxProdPerUnit','json','Arabic','Category','/units','$_id','public/upload','$product_name','28400140wvqIrC','Secondary_Code','brand','save','exceljs','938268BSwRBZ','xlsx','Alert_QTY','success','status','pdfkit-table','product\x20add\x20successfully','/products/brands','product_details.product_name','/brands/:id','product\x20update\x20successfully','Spanish','CODE128','/categories/delete/:id','diskStorage','express','/view','data','/view/add_products','Hindi','products'];a0_0xaab6=function(){return _0x53363b;};return a0_0xaab6();}(function(_0x14e66f,_0x384d8e){const _0x306ef9=a0_0x1e1e,_0x513191=_0x14e66f();while(!![]){try{const _0x4d100e=parseInt(_0x306ef9(0x212))/0x1+parseInt(_0x306ef9(0x240))/0x2*(-parseInt(_0x306ef9(0x255))/0x3)+parseInt(_0x306ef9(0x246))/0x4+parseInt(_0x306ef9(0x21e))/0x5*(-parseInt(_0x306ef9(0x1a9))/0x6)+parseInt(_0x306ef9(0x1c2))/0x7*(-parseInt(_0x306ef9(0x1fb))/0x8)+parseInt(_0x306ef9(0x1f2))/0x9+parseInt(_0x306ef9(0x1a4))/0xa;if(_0x4d100e===_0x384d8e)break;else _0x513191['push'](_0x513191['shift']());}catch(_0x5c0d9e){_0x513191['push'](_0x513191['shift']());}}}(a0_0xaab6,0xdd11b));const express=require(a0_0x36e497(0x1b8)),res=require('express/lib/response'),app=express(),router=express[a0_0x36e497(0x232)](),multer=require(a0_0x36e497(0x23b)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x36e497(0x24d)),auth=require(a0_0x36e497(0x1be)),users=require('../public/language/languages.json'),excelJS=require(a0_0x36e497(0x1a8)),xlsx=require(a0_0x36e497(0x1aa)),JsBarcode=require(a0_0x36e497(0x1c7)),{Canvas}=require(a0_0x36e497(0x1eb)),PDFDocument=require(a0_0x36e497(0x1ae));function a0_0x1e1e(_0xb62b95,_0x5ad5e7){const _0xaab6ba=a0_0xaab6();return a0_0x1e1e=function(_0x1e1e45,_0x4da0da){_0x1e1e45=_0x1e1e45-0x19c;let _0x20e5a3=_0xaab6ba[_0x1e1e45];return _0x20e5a3;},a0_0x1e1e(_0xb62b95,_0x5ad5e7);}router[a0_0x36e497(0x235)](a0_0x36e497(0x21d),auth,async(_0x46ba3d,_0x493c05)=>{const _0x25d112=a0_0x36e497;try{const {username:_0x1f27d4,email:_0xfcfca8,role:_0x27fbcb}=_0x46ba3d[_0x25d112(0x1ec)],_0x480ba6=_0x46ba3d['user'],_0x52eef4=await profile['findOne']({'email':_0x480ba6[_0x25d112(0x213)]}),_0x327e26=await master_shop[_0x25d112(0x1ca)]();console[_0x25d112(0x21a)]('master',_0x327e26);const _0x3f805f=await categories['find']();if(_0x327e26[0x0][_0x25d112(0x1f8)]=='English\x20(US)')var _0x2a187f=users[_0x25d112(0x248)];else{if(_0x327e26[0x0][_0x25d112(0x1f8)]==_0x25d112(0x1bc))var _0x2a187f=users[_0x25d112(0x1bc)];else{if(_0x327e26[0x0]['language']==_0x25d112(0x1c1))var _0x2a187f=users[_0x25d112(0x1c1)];else{if(_0x327e26[0x0][_0x25d112(0x1f8)]==_0x25d112(0x1b4))var _0x2a187f=users[_0x25d112(0x1b4)];else{if(_0x327e26[0x0]['language']==_0x25d112(0x1d6))var _0x2a187f=users['French'];else{if(_0x327e26[0x0]['language']==_0x25d112(0x1e1))var _0x2a187f=users['Portuguese'];else{if(_0x327e26[0x0][_0x25d112(0x1f8)]==_0x25d112(0x23c))var _0x2a187f=users[_0x25d112(0x23c)];else{if(_0x327e26[0x0][_0x25d112(0x1f8)]==_0x25d112(0x250))var _0x2a187f=users['Arabic'];}}}}}}}_0x493c05[_0x25d112(0x233)](_0x25d112(0x20c),{'success':_0x46ba3d[_0x25d112(0x1c4)]('success'),'errors':_0x46ba3d['flash'](_0x25d112(0x256)),'role':_0x480ba6,'profile':_0x52eef4,'user':_0x3f805f,'master_shop':_0x327e26,'language':_0x2a187f});}catch(_0x5b463a){console[_0x25d112(0x21a)](_0x5b463a);}}),router['post'](a0_0x36e497(0x21d),auth,async(_0x1475df,_0x2749f2)=>{const _0x24b538=a0_0x36e497;try{const {name:_0x2136ef,products:_0x19c5f2}=_0x1475df[_0x24b538(0x1ce)],_0x5a8f68=new categories({'name':_0x2136ef,'products':_0x19c5f2}),_0x463a58=await categories[_0x24b538(0x219)]({'name':_0x2136ef});_0x463a58?_0x1475df[_0x24b538(0x1c4)](_0x24b538(0x256),_0x2136ef+_0x24b538(0x1fc)):_0x1475df[_0x24b538(0x1c4)](_0x24b538(0x1ac),_0x2136ef+_0x24b538(0x1ea));const _0x110028=await _0x5a8f68[_0x24b538(0x1a7)]();_0x2749f2[_0x24b538(0x253)](_0x24b538(0x23a));}catch(_0x1fd214){console['log'](_0x1fd214);}}),router['get']('/categories/:id',auth,async(_0x3cc006,_0x1b7b21)=>{const _0x2bd48d=a0_0x36e497;try{const {username:_0x295bcd,email:_0x33b242,role:_0x565a42}=_0x3cc006[_0x2bd48d(0x1ec)],_0x1f2cbc=_0x3cc006[_0x2bd48d(0x1ec)],_0x121ff1=await profile[_0x2bd48d(0x219)]({'email':_0x1f2cbc[_0x2bd48d(0x213)]}),_0x55add6=await master_shop[_0x2bd48d(0x1ca)]();console[_0x2bd48d(0x21a)](_0x2bd48d(0x1db),_0x55add6);const _0x44f322=_0x3cc006[_0x2bd48d(0x1e7)]['id'];console[_0x2bd48d(0x21a)](_0x44f322);const _0x33facf=await categories[_0x2bd48d(0x1cb)](_0x44f322);if(_0x55add6[0x0][_0x2bd48d(0x1f8)]==_0x2bd48d(0x214))var _0x4d201b=users[_0x2bd48d(0x248)];else{if(_0x55add6[0x0][_0x2bd48d(0x1f8)]==_0x2bd48d(0x1bc))var _0x4d201b=users[_0x2bd48d(0x1bc)];else{if(_0x55add6[0x0]['language']==_0x2bd48d(0x1c1))var _0x4d201b=users[_0x2bd48d(0x1c1)];else{if(_0x55add6[0x0]['language']==_0x2bd48d(0x1b4))var _0x4d201b=users['Spanish'];else{if(_0x55add6[0x0]['language']==_0x2bd48d(0x1d6))var _0x4d201b=users[_0x2bd48d(0x1d6)];else{if(_0x55add6[0x0][_0x2bd48d(0x1f8)]==_0x2bd48d(0x1e1))var _0x4d201b=users[_0x2bd48d(0x247)];else{if(_0x55add6[0x0][_0x2bd48d(0x1f8)]==_0x2bd48d(0x23c))var _0x4d201b=users[_0x2bd48d(0x23c)];else{if(_0x55add6[0x0]['language']=='Arabic\x20(ae)')var _0x4d201b=users[_0x2bd48d(0x19e)];}}}}}}}_0x1b7b21[_0x2bd48d(0x233)](_0x2bd48d(0x20c),{'success':_0x3cc006[_0x2bd48d(0x1c4)]('success'),'errors':_0x3cc006['flash'](_0x2bd48d(0x256)),'role':_0x1f2cbc,'profile':_0x121ff1,'master_shop':_0x55add6,'user':_0x33facf,'language':_0x4d201b});}catch(_0x47a60e){console[_0x2bd48d(0x21a)](_0x47a60e);}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x252),auth,async(_0x296b6b,_0x16255f)=>{const _0x367cde=a0_0x36e497;try{const _0x35ea8f=_0x296b6b[_0x367cde(0x1e7)]['id'],_0x16036d=await categories[_0x367cde(0x1dc)](_0x35ea8f,_0x296b6b[_0x367cde(0x1ce)]);_0x296b6b[_0x367cde(0x1c4)](_0x367cde(0x1ac),''+users[_0x367cde(0x1e8)]),_0x16255f[_0x367cde(0x253)](_0x367cde(0x23a));}catch(_0x149f49){console[_0x367cde(0x21a)](_0x149f49);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1b6),auth,async(_0x891f27,_0x552224)=>{const _0x47b25d=a0_0x36e497;try{const _0x4925e5=_0x891f27[_0x47b25d(0x1e7)]['id'],_0x50eb00=await categories[_0x47b25d(0x210)](_0x4925e5);_0x891f27['flash']('success',_0x47b25d(0x1d3)),_0x552224[_0x47b25d(0x253)](_0x47b25d(0x23a));}catch(_0x1419b0){console[_0x47b25d(0x21a)](_0x1419b0);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x23d),auth,async(_0x19796e,_0x526b00)=>{const _0x2f294a=a0_0x36e497;try{const {username:_0x34d6c9,email:_0x3bc143,role:_0x5c489b}=_0x19796e[_0x2f294a(0x1ec)],_0x12eb13=_0x19796e['user'],_0x1fe811=await profile[_0x2f294a(0x219)]({'email':_0x12eb13[_0x2f294a(0x213)]}),_0x505f2d=await master_shop[_0x2f294a(0x1ca)]();console[_0x2f294a(0x21a)](_0x2f294a(0x1db),_0x505f2d);const _0xac3df6=await brands[_0x2f294a(0x1ca)]();if(_0x505f2d[0x0][_0x2f294a(0x1f8)]==_0x2f294a(0x214))var _0x203ce4=users['English'];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]==_0x2f294a(0x1bc))var _0x203ce4=users['Hindi'];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]=='German')var _0x203ce4=users[_0x2f294a(0x1c1)];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]==_0x2f294a(0x1b4))var _0x203ce4=users[_0x2f294a(0x1b4)];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]==_0x2f294a(0x1d6))var _0x203ce4=users[_0x2f294a(0x1d6)];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]=='Portuguese\x20(BR)')var _0x203ce4=users[_0x2f294a(0x247)];else{if(_0x505f2d[0x0][_0x2f294a(0x1f8)]==_0x2f294a(0x23c))var _0x203ce4=users[_0x2f294a(0x23c)];else{if(_0x505f2d[0x0]['language']==_0x2f294a(0x250))var _0x203ce4=users[_0x2f294a(0x19e)];}}}}}}}_0x526b00[_0x2f294a(0x233)]('brands',{'success':_0x19796e[_0x2f294a(0x1c4)](_0x2f294a(0x1ac)),'errors':_0x19796e['flash']('errors'),'role':_0x12eb13,'profile':_0x1fe811,'master_shop':_0x505f2d,'user':_0xac3df6,'language':_0x203ce4});}catch(_0x3bff57){console[_0x2f294a(0x21a)](_0x3bff57);}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x23d),auth,async(_0x1ca390,_0x1714b8)=>{const _0x47f95e=a0_0x36e497;try{const {name:_0x18c8d5,products:_0x5b1192}=_0x1ca390[_0x47f95e(0x1ce)],_0x3089ce=new brands({'name':_0x18c8d5,'products':_0x5b1192}),_0x1ae846=await brands[_0x47f95e(0x219)]({'name':_0x18c8d5});_0x1ae846?_0x1ca390[_0x47f95e(0x1c4)](_0x47f95e(0x256),_0x18c8d5+_0x47f95e(0x1ed)):_0x1ca390[_0x47f95e(0x1c4)](_0x47f95e(0x1ac),_0x18c8d5+'\x20brand\x20is\x20add\x20successfully');const _0x516a7f=await _0x3089ce[_0x47f95e(0x1a7)]();_0x1714b8[_0x47f95e(0x253)](_0x47f95e(0x1b0));}catch(_0x345591){console[_0x47f95e(0x21a)](_0x345591);}}),router[a0_0x36e497(0x235)]('/brands/:id',auth,async(_0x4be086,_0xebccc8)=>{const _0x44c3ae=a0_0x36e497;try{const {username:_0x2f41f1,email:_0xa80668,role:_0x2a36f3}=_0x4be086['user'],_0x2132f1=_0x4be086[_0x44c3ae(0x1ec)],_0x1073d9=await profile[_0x44c3ae(0x219)]({'email':_0x2132f1[_0x44c3ae(0x213)]}),_0x471a1b=await master_shop['find']();console[_0x44c3ae(0x21a)](_0x44c3ae(0x1db),_0x471a1b);const _0x37981c=_0x4be086['params']['id'];console['log'](_0x37981c);const _0x4020a0=await brands[_0x44c3ae(0x1cb)](_0x37981c);if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x214))var _0x203e25=users[_0x44c3ae(0x248)];else{if(_0x471a1b[0x0]['language']=='Hindi')var _0x203e25=users[_0x44c3ae(0x1bc)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x1c1))var _0x203e25=users[_0x44c3ae(0x1c1)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x1b4))var _0x203e25=users[_0x44c3ae(0x1b4)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x1d6))var _0x203e25=users[_0x44c3ae(0x1d6)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x1e1))var _0x203e25=users[_0x44c3ae(0x247)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]==_0x44c3ae(0x23c))var _0x203e25=users[_0x44c3ae(0x23c)];else{if(_0x471a1b[0x0][_0x44c3ae(0x1f8)]=='Arabic\x20(ae)')var _0x203e25=users[_0x44c3ae(0x19e)];}}}}}}}_0xebccc8[_0x44c3ae(0x233)]('brands',{'success':_0x4be086[_0x44c3ae(0x1c4)]('success'),'errors':_0x4be086[_0x44c3ae(0x1c4)](_0x44c3ae(0x256)),'role':_0x2132f1,'profile':_0x1073d9,'master_shop':_0x471a1b,'user':_0x4020a0,'language':_0x203e25});}catch(_0x7133f8){console[_0x44c3ae(0x21a)](_0x7133f8);}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x1b2),auth,async(_0x10bf60,_0x55d0a1)=>{const _0x167377=a0_0x36e497;try{const _0x4baa64=_0x10bf60[_0x167377(0x1e7)]['id'],_0x57186f=await brands[_0x167377(0x1dc)](_0x4baa64,_0x10bf60['body']);_0x10bf60['flash'](_0x167377(0x1ac),'brand\x20data\x20update\x20successfully'),_0x55d0a1[_0x167377(0x253)](_0x167377(0x1b0));}catch(_0xf69727){console[_0x167377(0x21a)](_0xf69727);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1f0),auth,async(_0x389509,_0x4d91d8)=>{const _0x36aa7f=a0_0x36e497;try{const _0x243e70=_0x389509[_0x36aa7f(0x1e7)]['id'],_0x588dad=await brands['findByIdAndDelete'](_0x243e70);_0x389509[_0x36aa7f(0x1c4)]('success',_0x36aa7f(0x223)),_0x4d91d8[_0x36aa7f(0x253)](_0x36aa7f(0x1b0));}catch(_0x5a8b44){console['log'](_0x5a8b44);}}),router['get'](a0_0x36e497(0x1a0),auth,async(_0x5d5707,_0xd9f00e)=>{const _0x3258f2=a0_0x36e497;try{const {username:_0x41c80d,email:_0x459563,role:_0x936a4c}=_0x5d5707[_0x3258f2(0x1ec)],_0x47f715=_0x5d5707['user'],_0x200327=await profile[_0x3258f2(0x219)]({'email':_0x47f715['email']}),_0x25aca2=await master_shop['find']();console[_0x3258f2(0x21a)]('master',_0x25aca2);const _0xd5af78=await units[_0x3258f2(0x1ca)]();if(_0x25aca2[0x0][_0x3258f2(0x1f8)]==_0x3258f2(0x214))var _0x103c05=users[_0x3258f2(0x248)];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]=='Hindi')var _0x103c05=users[_0x3258f2(0x1bc)];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]==_0x3258f2(0x1c1))var _0x103c05=users[_0x3258f2(0x1c1)];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]=='Spanish')var _0x103c05=users[_0x3258f2(0x1b4)];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]=='French')var _0x103c05=users['French'];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]==_0x3258f2(0x1e1))var _0x103c05=users['Portuguese'];else{if(_0x25aca2[0x0]['language']=='Chinese')var _0x103c05=users[_0x3258f2(0x23c)];else{if(_0x25aca2[0x0][_0x3258f2(0x1f8)]==_0x3258f2(0x250))var _0x103c05=users['Arabic'];}}}}}}}_0xd9f00e[_0x3258f2(0x233)](_0x3258f2(0x1c9),{'success':_0x5d5707['flash'](_0x3258f2(0x1ac)),'errors':_0x5d5707[_0x3258f2(0x1c4)]('errors'),'role':_0x47f715,'profile':_0x200327,'master_shop':_0x25aca2,'user':_0xd5af78,'language':_0x103c05});}catch(_0x11b49b){console[_0x3258f2(0x21a)](_0x11b49b);}}),router['post']('/units',auth,async(_0x17a9ea,_0x3ab055)=>{const _0x42b748=a0_0x36e497;try{const {name:_0x288e8e,secondary_unit:_0x1d8097,products:_0x121a60}=_0x17a9ea['body'],_0x44d29d=new units({'name':_0x288e8e,'secondary_unit':_0x1d8097,'products':_0x121a60}),_0x3f653b=await units[_0x42b748(0x219)]({'name':_0x288e8e});_0x3f653b?_0x17a9ea[_0x42b748(0x1c4)](_0x42b748(0x256),_0x288e8e+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x17a9ea[_0x42b748(0x1c4)](_0x42b748(0x1ac),_0x288e8e+'\x20unit\x20is\x20add\x20successfully');const _0x39fcfe=await _0x44d29d[_0x42b748(0x1a7)]();_0x3ab055[_0x42b748(0x253)](_0x42b748(0x1d5));}catch(_0x296fa3){console[_0x42b748(0x21a)](_0x296fa3);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x21b),auth,async(_0x3d1eaa,_0xe3cb8b)=>{const _0x422940=a0_0x36e497;try{const {username:_0x59a507,email:_0x2ffd02,role:_0x16d7c7}=_0x3d1eaa[_0x422940(0x1ec)],_0x34371a=_0x3d1eaa[_0x422940(0x1ec)],_0x573198=await profile[_0x422940(0x219)]({'email':_0x34371a['email']}),_0x32ee58=await master_shop[_0x422940(0x1ca)]();console[_0x422940(0x21a)](_0x422940(0x1db),_0x32ee58);const _0x5226c7=_0x3d1eaa['params']['id'],_0x2bb0ed=await units[_0x422940(0x1cb)](_0x5226c7);if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x214))var _0x507f64=users[_0x422940(0x248)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x1bc))var _0x507f64=users[_0x422940(0x1bc)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x1c1))var _0x507f64=users[_0x422940(0x1c1)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x1b4))var _0x507f64=users[_0x422940(0x1b4)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x1d6))var _0x507f64=users[_0x422940(0x1d6)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x1e1))var _0x507f64=users[_0x422940(0x247)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x23c))var _0x507f64=users[_0x422940(0x23c)];else{if(_0x32ee58[0x0][_0x422940(0x1f8)]==_0x422940(0x250))var _0x507f64=users[_0x422940(0x19e)];}}}}}}}_0xe3cb8b[_0x422940(0x233)](_0x422940(0x1c9),{'success':_0x3d1eaa['flash'](_0x422940(0x1ac)),'errors':_0x3d1eaa[_0x422940(0x1c4)](_0x422940(0x256)),'role':_0x34371a,'profile':_0x573198,'master_shop':_0x32ee58,'user':_0x2bb0ed,'language':_0x507f64});}catch(_0x5ace26){console[_0x422940(0x21a)](_0x5ace26);}}),router['post'](a0_0x36e497(0x21b),auth,async(_0x1df52f,_0x2b87ec)=>{const _0x2b9f5d=a0_0x36e497;try{const _0x499605=_0x1df52f[_0x2b9f5d(0x1e7)]['id'],_0x58ff38=await units['findByIdAndUpdate'](_0x499605,_0x1df52f[_0x2b9f5d(0x1ce)]);_0x1df52f[_0x2b9f5d(0x1c4)]('success',_0x2b9f5d(0x257)),_0x2b87ec['redirect'](_0x2b9f5d(0x1d5));}catch(_0x2454a4){console[_0x2b9f5d(0x21a)](_0x2454a4);}}),router[a0_0x36e497(0x235)]('/units/delete/:id',auth,async(_0x1596f6,_0x2dbde3)=>{const _0x453c64=a0_0x36e497;try{const _0x411703=_0x1596f6['params']['id'],_0x2c4234=await units[_0x453c64(0x210)](_0x411703);_0x1596f6[_0x453c64(0x1c4)](_0x453c64(0x1ac),_0x453c64(0x1c6)),_0x2dbde3[_0x453c64(0x253)]('/products/units');}catch(_0x17e066){console['log'](_0x17e066);}});const storage=multer[a0_0x36e497(0x1b7)]({'destination':(_0x4077b3,_0x5578c9,_0x213095)=>{const _0x2c947d=a0_0x36e497;_0x213095(null,_0x2c947d(0x1a2));},'filename':(_0xd29cdb,_0x3f6496,_0x8152ab)=>{_0x8152ab(null,Date['now']()+_0x3f6496['originalname']);}}),upload=multer({'storage':storage});router['get'](a0_0x36e497(0x1b9),auth,async(_0x220adf,_0x1f173a)=>{const _0x1eb214=a0_0x36e497;try{const {username:_0x5b9cb8,email:_0x22b36c,role:_0x5d1236}=_0x220adf['user'],_0x11fd19=_0x220adf['user'],_0x1e9d1a=await profile['findOne']({'email':_0x11fd19[_0x1eb214(0x213)]}),_0x500459={'year':_0x1eb214(0x1e5),'month':_0x1eb214(0x244),'day':_0x1eb214(0x1e5)},_0x11bf63=await master_shop[_0x1eb214(0x1ca)]();console['log'](_0x1eb214(0x1dd),_0x11bf63);const _0x580ffc=await product[_0x1eb214(0x1ca)]();console[_0x1eb214(0x21a)](_0x1eb214(0x218),_0x580ffc);const _0x4e4057=await warehouse[_0x1eb214(0x1f5)]([{'$unwind':_0x1eb214(0x1f4)},{'$lookup':{'from':'products','localField':_0x1eb214(0x1b1),'foreignField':_0x1eb214(0x1fe),'as':'product_docs'}},{'$unwind':_0x1eb214(0x21c)},{'$project':{'product_name':_0x1eb214(0x201),'product_stock':_0x1eb214(0x1ee)}},{'$group':{'_id':_0x1eb214(0x1a3),'product_stock':{'$sum':_0x1eb214(0x1fa)}}}]);console[_0x1eb214(0x21a)](_0x1eb214(0x205),_0x4e4057),_0x4e4057['forEach'](_0x10f6c3=>{const _0xb15df6=_0x580ffc['map'](_0x267959=>{const _0xcf3d82=a0_0x1e1e;_0x267959[_0xcf3d82(0x1fe)]==_0x10f6c3['_id']&&(_0x267959[_0xcf3d82(0x1ef)]=parseInt(_0x267959['stock'])+parseInt(_0x10f6c3[_0xcf3d82(0x231)]));});}),console[_0x1eb214(0x21a)]('Products\x20find_data',_0x580ffc);if(_0x11bf63[0x0][_0x1eb214(0x1f8)]==_0x1eb214(0x214))var _0x3f57ee=users['English'];else{if(_0x11bf63[0x0][_0x1eb214(0x1f8)]==_0x1eb214(0x1bc))var _0x3f57ee=users[_0x1eb214(0x1bc)];else{if(_0x11bf63[0x0]['language']==_0x1eb214(0x1c1))var _0x3f57ee=users['German'];else{if(_0x11bf63[0x0][_0x1eb214(0x1f8)]=='Spanish')var _0x3f57ee=users[_0x1eb214(0x1b4)];else{if(_0x11bf63[0x0]['language']==_0x1eb214(0x1d6))var _0x3f57ee=users[_0x1eb214(0x1d6)];else{if(_0x11bf63[0x0][_0x1eb214(0x1f8)]==_0x1eb214(0x1e1))var _0x3f57ee=users[_0x1eb214(0x247)];else{if(_0x11bf63[0x0][_0x1eb214(0x1f8)]==_0x1eb214(0x23c))var _0x3f57ee=users[_0x1eb214(0x23c)];else{if(_0x11bf63[0x0]['language']=='Arabic\x20(ae)')var _0x3f57ee=users[_0x1eb214(0x19e)];}}}}}}}_0x1f173a[_0x1eb214(0x233)]('products',{'success':_0x220adf[_0x1eb214(0x1c4)](_0x1eb214(0x1ac)),'errors':_0x220adf[_0x1eb214(0x1c4)]('errors'),'alldata':_0x580ffc,'profile':_0x1e9d1a,'master_shop':_0x11bf63,'role':_0x11fd19,'product_stock':_0x4e4057,'language':_0x3f57ee});}catch(_0x397a16){console[_0x1eb214(0x21a)](_0x397a16);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1bb),auth,async(_0x13cf20,_0x5c7a01)=>{const _0x1f8bf2=a0_0x36e497;try{const {username:_0xc9c062,email:_0x1762f5,role:_0x13e234}=_0x13cf20[_0x1f8bf2(0x1ec)],_0x1d0429=_0x13cf20['user'],_0x288fe7=await profile['findOne']({'email':_0x1d0429[_0x1f8bf2(0x213)]}),_0x560fa7=await master_shop[_0x1f8bf2(0x1ca)]();console['log']('master',_0x560fa7);const _0x56373c=await categories[_0x1f8bf2(0x1ca)]({}),_0x5828c7=await brands[_0x1f8bf2(0x1ca)]({}),_0x3426e8=await units[_0x1f8bf2(0x1ca)]({}),_0x2d011d=await warehouse['find']({'status':'Enabled'});if(_0x560fa7[0x0][_0x1f8bf2(0x1f8)]=='English\x20(US)')var _0x3b56ca=users[_0x1f8bf2(0x248)];else{if(_0x560fa7[0x0]['language']=='Hindi')var _0x3b56ca=users[_0x1f8bf2(0x1bc)];else{if(_0x560fa7[0x0][_0x1f8bf2(0x1f8)]==_0x1f8bf2(0x1c1))var _0x3b56ca=users['German'];else{if(_0x560fa7[0x0]['language']==_0x1f8bf2(0x1b4))var _0x3b56ca=users[_0x1f8bf2(0x1b4)];else{if(_0x560fa7[0x0][_0x1f8bf2(0x1f8)]==_0x1f8bf2(0x1d6))var _0x3b56ca=users['French'];else{if(_0x560fa7[0x0][_0x1f8bf2(0x1f8)]==_0x1f8bf2(0x1e1))var _0x3b56ca=users[_0x1f8bf2(0x247)];else{if(_0x560fa7[0x0]['language']==_0x1f8bf2(0x23c))var _0x3b56ca=users['Chinese'];else{if(_0x560fa7[0x0][_0x1f8bf2(0x1f8)]==_0x1f8bf2(0x250))var _0x3b56ca=users['Arabic'];}}}}}}}_0x5c7a01[_0x1f8bf2(0x233)]('add_product',{'success':_0x13cf20[_0x1f8bf2(0x1c4)]('success'),'errors':_0x13cf20[_0x1f8bf2(0x1c4)]('errors'),'role':_0x1d0429,'profile':_0x288fe7,'categories':_0x56373c,'brands':_0x5828c7,'master_shop':_0x560fa7,'units':_0x3426e8,'language':_0x3b56ca,'find_data':_0x2d011d});}catch(_0x215ea9){console[_0x1f8bf2(0x21a)](_0x215ea9);}}),router['post'](a0_0x36e497(0x1bb),auth,upload['single']('image'),async(_0x5e0972,_0x41216f)=>{const _0x56f623=a0_0x36e497;try{const {name:_0x360016,category:_0x1786eb,brand:_0xc8ed80,unit:_0x2425a0,alertquantity:_0x2d78d8,stock:_0x2ba703,product_code:_0x4d2a48,warehouse:_0x2cadeb,primary_ItemCode:_0x4c2376,second_ItemCode:_0x546390,second_unit:_0x4103d4,maxPerUnit:_0x16fc6a,MaxPerProduct:_0x52aba3}=_0x5e0972['body'],_0x67cb58=_0x5e0972['file']?.[_0x56f623(0x24e)]||'defaultProduct.avif',_0x580e53=new product({'image':_0x67cb58,'name':_0x360016,'category':_0x1786eb,'brand':_0xc8ed80,'unit':_0x2425a0,'alertquantity':_0x2d78d8,'stock':_0x2ba703,'product_code':_0x4d2a48,'warehouse':_0x2cadeb,'primary_code':_0x4c2376,'secondary_code':_0x546390,'second_unit':_0x4103d4,'maxStocks':_0x52aba3,'maxProdPerUnit':_0x16fc6a}),_0x2daa01=await _0x580e53['save'](),_0x63a0bd=await categories[_0x56f623(0x219)]({'name':_0x1786eb});_0x63a0bd[_0x56f623(0x1bd)]=parseInt(_0x63a0bd[_0x56f623(0x1bd)])+0x1,await _0x63a0bd[_0x56f623(0x1a7)]();const _0x53b824=await brands[_0x56f623(0x219)]({'name':_0xc8ed80});_0x53b824[_0x56f623(0x1bd)]=parseInt(_0x53b824['products'])+0x1,await _0x53b824[_0x56f623(0x1a7)]();const _0x70c626=await units[_0x56f623(0x219)]({'name':_0x2425a0});_0x70c626[_0x56f623(0x1bd)]=parseInt(_0x70c626[_0x56f623(0x1bd)])+0x1,await _0x70c626[_0x56f623(0x1a7)](),_0x5e0972['flash']('success',_0x56f623(0x1af)),_0x41216f['redirect'](_0x56f623(0x1d2));}catch(_0x28d59b){console[_0x56f623(0x21a)](_0x28d59b);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1f3),auth,async(_0x340c47,_0xb385f7)=>{const _0xf62b6=a0_0x36e497;try{const {username:_0x1215f7,email:_0x5b0825,role:_0x4ce056}=_0x340c47[_0xf62b6(0x1ec)],_0x259217=_0x340c47[_0xf62b6(0x1ec)],_0x483c17=await profile[_0xf62b6(0x219)]({'email':_0x259217['email']}),_0x5965fd=await master_shop[_0xf62b6(0x1ca)]();console[_0xf62b6(0x21a)]('edit\x20Product\x20master',_0x5965fd);const _0x29cd9f=_0x340c47['params']['id'],_0x378e9f=await product[_0xf62b6(0x1cb)](_0x29cd9f),_0x2526ac=await categories['find']({}),_0x59d40f=await brands[_0xf62b6(0x1ca)]({}),_0x1062b8=await units[_0xf62b6(0x1ca)]({}),_0x344a9d=await warehouse[_0xf62b6(0x1ca)]({'status':_0xf62b6(0x1fd)}),_0x2ebbf2=await units[_0xf62b6(0x1f5)]([{'$group':{'_id':_0xf62b6(0x1a1),'secondaryunit':{'$first':_0xf62b6(0x20d)}}}]);if(_0x5965fd[0x0][_0xf62b6(0x1f8)]==_0xf62b6(0x214))var _0x2e1676=users[_0xf62b6(0x248)];else{if(_0x5965fd[0x0][_0xf62b6(0x1f8)]==_0xf62b6(0x1bc))var _0x2e1676=users[_0xf62b6(0x1bc)];else{if(_0x5965fd[0x0][_0xf62b6(0x1f8)]=='German')var _0x2e1676=users[_0xf62b6(0x1c1)];else{if(_0x5965fd[0x0][_0xf62b6(0x1f8)]==_0xf62b6(0x1b4))var _0x2e1676=users['Spanish'];else{if(_0x5965fd[0x0]['language']==_0xf62b6(0x1d6))var _0x2e1676=users[_0xf62b6(0x1d6)];else{if(_0x5965fd[0x0][_0xf62b6(0x1f8)]==_0xf62b6(0x1e1))var _0x2e1676=users[_0xf62b6(0x247)];else{if(_0x5965fd[0x0][_0xf62b6(0x1f8)]=='Chinese')var _0x2e1676=users['Chinese'];else{if(_0x5965fd[0x0]['language']==_0xf62b6(0x250))var _0x2e1676=users[_0xf62b6(0x19e)];}}}}}}}_0xb385f7[_0xf62b6(0x233)]('edit_product',{'success':_0x340c47[_0xf62b6(0x1c4)]('success'),'errors':_0x340c47['flash'](_0xf62b6(0x256)),'role':_0x259217,'profile':_0x483c17,'alldata':_0x378e9f,'categories':_0x2526ac,'brands':_0x59d40f,'master_shop':_0x5965fd,'units':_0x1062b8,'secondunit':_0x2ebbf2,'find_data':_0x344a9d,'language':_0x2e1676});}catch(_0x3e2282){console[_0xf62b6(0x21a)](_0x3e2282);}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x1f3),auth,upload[a0_0x36e497(0x242)]('image'),async(_0x38ecba,_0x58f154)=>{const _0x2857e2=a0_0x36e497;try{console['log']('hello');const _0x51a7eb=_0x38ecba['params']['id'],_0x4082f2=await product[_0x2857e2(0x1cb)](_0x51a7eb),{image:_0x34dbc4,name:_0xd33b74,category:_0x3a4cd4,brand:_0x1e9272,sku:_0x5f56d4,unit:_0x49db12,alertquantity:_0x955843,product_code:_0x58dd22,warehouse:_0x303fb9,primary_ItemCode:_0x414586,second_ItemCode:_0x57ef51,second_unit:_0x522f12,maxPerUnit:_0x23b0ff,MaxPerProduct:_0x198a60,prod_catdata:_0x295246}=_0x38ecba[_0x2857e2(0x1ce)];_0x38ecba[_0x2857e2(0x207)]&&(_0x4082f2[_0x2857e2(0x203)]=_0x38ecba[_0x2857e2(0x207)][_0x2857e2(0x24e)]);_0x4082f2[_0x2857e2(0x1fe)]=_0xd33b74,_0x4082f2[_0x2857e2(0x1c8)]=_0x3a4cd4,_0x4082f2[_0x2857e2(0x1a6)]=_0x1e9272,_0x4082f2['sku']=_0x5f56d4,_0x4082f2['unit']=_0x49db12,_0x4082f2[_0x2857e2(0x251)]=_0x955843,_0x4082f2[_0x2857e2(0x22d)]=_0x58dd22,_0x4082f2[_0x2857e2(0x217)]=_0x303fb9,_0x4082f2['primary_code']=_0x414586,_0x4082f2[_0x2857e2(0x227)]=_0x57ef51,_0x4082f2[_0x2857e2(0x1c5)]=_0x522f12,_0x4082f2['maxStocks']=_0x198a60,_0x4082f2[_0x2857e2(0x19c)]=_0x23b0ff,_0x4082f2['product_category']=_0x295246;const _0x52a1b7=await _0x4082f2[_0x2857e2(0x1a7)]();console[_0x2857e2(0x21a)]('product\x20edit',_0x4082f2),_0x38ecba['flash']('success',_0x2857e2(0x1b3)),_0x58f154['redirect'](_0x2857e2(0x1d2));}catch(_0x3ef015){console[_0x2857e2(0x21a)](_0x3ef015);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1cd),auth,async(_0x5db0be,_0x444eb8)=>{const _0x1081e1=a0_0x36e497;try{const {username:_0x58206e,email:_0x550a19,role:_0x48d468}=_0x5db0be[_0x1081e1(0x1ec)],_0x5060dc=_0x5db0be[_0x1081e1(0x1ec)],_0x41f855=await profile[_0x1081e1(0x219)]({'email':_0x5060dc[_0x1081e1(0x213)]}),_0xa218c5=await master_shop['find']();console[_0x1081e1(0x21a)](_0x1081e1(0x1df),_0xa218c5);const _0x3c9e37=_0x5db0be[_0x1081e1(0x1e7)]['id'],_0x5ac457=await product[_0x1081e1(0x1cb)](_0x3c9e37);console[_0x1081e1(0x21a)](_0x1081e1(0x1ff),_0x5ac457);if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x214))var _0x2e76b1=users[_0x1081e1(0x248)];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x1bc))var _0x2e76b1=users['Hindi'];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x1c1))var _0x2e76b1=users[_0x1081e1(0x1c1)];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x1b4))var _0x2e76b1=users[_0x1081e1(0x1b4)];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x1d6))var _0x2e76b1=users[_0x1081e1(0x1d6)];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x1e1))var _0x2e76b1=users[_0x1081e1(0x247)];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]=='Chinese')var _0x2e76b1=users['Chinese'];else{if(_0xa218c5[0x0][_0x1081e1(0x1f8)]==_0x1081e1(0x250))var _0x2e76b1=users['Arabic'];}}}}}}}_0x444eb8[_0x1081e1(0x233)](_0x1081e1(0x1c3),{'success':_0x5db0be[_0x1081e1(0x1c4)]('success'),'errors':_0x5db0be[_0x1081e1(0x1c4)]('errors'),'role':_0x5060dc,'profile':_0x41f855,'alldata':_0x5ac457,'master_shop':_0xa218c5,'language':_0x2e76b1});}catch(_0x194bfc){console[_0x1081e1(0x21a)](_0x194bfc);}}),router[a0_0x36e497(0x235)](a0_0x36e497(0x1cc),auth,async(_0x335ea8,_0x44e9b3)=>{const _0x378d48=a0_0x36e497;try{const _0x164173=new excelJS[(_0x378d48(0x221))](),_0x5e7371=_0x164173['addWorksheet'](_0x378d48(0x228));return _0x5e7371['columns']=[{'header':'Product_Name','key':'PName','width':0xa},{'header':_0x378d48(0x22f),'key':_0x378d48(0x237),'width':0xa},{'header':_0x378d48(0x209),'key':_0x378d48(0x1e0),'width':0xa},{'header':_0x378d48(0x208),'key':_0x378d48(0x1da),'width':0xa},{'header':_0x378d48(0x211),'key':_0x378d48(0x236),'width':0xa},{'header':_0x378d48(0x1e9),'key':_0x378d48(0x20b),'width':0xa},{'header':_0x378d48(0x1a5),'key':'ProductCode','width':0xa},{'header':_0x378d48(0x1e3),'key':_0x378d48(0x20b),'width':0xa},{'header':_0x378d48(0x19f),'key':_0x378d48(0x225),'width':0xa},{'header':_0x378d48(0x1ab),'key':'PAlQty','width':0xa},{'header':_0x378d48(0x1d0),'key':'PAlQty','width':0xa},{'header':_0x378d48(0x1de),'key':'Prod_Cat','width':0xa}],_0x44e9b3[_0x378d48(0x1d4)]('Content-Type',_0x378d48(0x22a)),_0x44e9b3[_0x378d48(0x1d4)](_0x378d48(0x215),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x164173[_0x378d48(0x1aa)]['write'](_0x44e9b3)[_0x378d48(0x1e4)](()=>{const _0x4396d9=_0x378d48;_0x44e9b3[_0x4396d9(0x1ad)](0xc8);});}catch(_0x128a0f){_0x44e9b3[_0x378d48(0x1ad)](0x190)[_0x378d48(0x22c)](_0x128a0f);}});const storage1=multer[a0_0x36e497(0x1b7)]({'destination':(_0x431ef7,_0x53ce2b,_0x4da93d)=>{const _0x3ef612=a0_0x36e497;_0x4da93d(null,_0x3ef612(0x1f1));},'filename':(_0x1dda67,_0x286587,_0x4be8a9)=>{const _0x53f150=a0_0x36e497;_0x4be8a9(null,Date[_0x53f150(0x24c)]()+_0x286587['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x36e497(0x20f),auth,uploadMigrate[a0_0x36e497(0x242)]('migrate_product_fule'),async(_0x396617,_0x1b6016)=>{const _0x3e2aea=a0_0x36e497,_0x2109e1=_0x396617['file'][_0x3e2aea(0x24e)],_0x46b1a3=await xlsx['readFile'](_0x3e2aea(0x1f9)+_0x2109e1);let _0x1adb2d=_0x46b1a3['SheetNames'],_0x23beee=xlsx[_0x3e2aea(0x224)][_0x3e2aea(0x22b)](_0x46b1a3[_0x3e2aea(0x22e)][_0x1adb2d[0x0]]);for(const _0x3f255c of _0x23beee){const _0x3947f7=_0x3f255c[_0x3e2aea(0x1bf)],_0x20628f=_0x3f255c[_0x3e2aea(0x22f)],_0x9adf4f=_0x3f255c['Units'],_0x1f5474=_0x3f255c['Secondary_Units'],_0x1dd17c=_0x3f255c[_0x3e2aea(0x1e3)],_0x5be129=_0x3f255c[_0x3e2aea(0x19f)],_0x7a5b48=_0x3f255c[_0x3e2aea(0x1ab)],_0xdc3df9=_0x3f255c[_0x3e2aea(0x1e9)],_0x2d7386=_0x3f255c[_0x3e2aea(0x1a5)],_0x5db4d9=_0x3f255c['Maximum_Stocks'],_0x1d1cde=_0x3f255c['max_number_per_units'],_0xd346b2=_0x3f255c['Products_category'];try{let _0x470bf5=await categories[_0x3e2aea(0x219)]({'name':_0x5be129});if(!_0x470bf5){const _0x251196=new categories({'name':_0x5be129,'products':'0'});_0x470bf5=await _0x251196[_0x3e2aea(0x1a7)]();}let _0x1a7e45=await brands[_0x3e2aea(0x219)]({'name':_0x20628f});if(!_0x1a7e45){const _0x213962=new brands({'name':_0x20628f,'products':'0'});_0x1a7e45=await _0x213962[_0x3e2aea(0x1a7)]();}let _0x27669d=await units[_0x3e2aea(0x219)]({'name':_0x9adf4f,'secondary_unit':_0x1f5474});if(!_0x27669d){const _0x4d2c8c=new units({'name':_0x9adf4f,'secondary_unit':_0x1f5474,'products':'0'});_0x27669d=await _0x4d2c8c[_0x3e2aea(0x1a7)]();}const _0x4cb2d0=await product[_0x3e2aea(0x1ca)]({'name':_0x3947f7,'category':_0x470bf5[_0x3e2aea(0x1fe)],'brand':_0x1a7e45[_0x3e2aea(0x1fe)],'secondary_unit':_0x27669d[_0x3e2aea(0x1c5)],'product_code':_0x1dd17c});console['log'](_0x4cb2d0[_0x3e2aea(0x1d1)]+_0x3e2aea(0x1cf)+_0x470bf5[_0x3e2aea(0x1fe)]+_0x3e2aea(0x1cf)+_0x1a7e45['name']+_0x3e2aea(0x1cf)+_0x27669d['secondary_unit']+_0x3e2aea(0x1cf)+_0x1dd17c+_0x3e2aea(0x1cf)+_0x3947f7);if(_0x4cb2d0[_0x3e2aea(0x1d1)]===0x0){const _0xdff4b5=new product({'image':_0x3e2aea(0x230),'name':_0x3947f7,'category':_0x470bf5['name'],'brand':_0x1a7e45['name'],'unit':_0x27669d[_0x3e2aea(0x1fe)],'alertquantity':_0x7a5b48,'product_code':_0x1dd17c,'secondary_unit':_0x27669d['secondary_unit'],'primary_code':_0xdc3df9,'secondary_code':_0x2d7386,'maxStocks':_0x5db4d9,'maxProdPerUnit':_0x1d1cde,'product_category':_0xd346b2}),_0x4baca5=await _0xdff4b5[_0x3e2aea(0x1a7)]();_0x470bf5['products']=parseInt(_0x470bf5['products'])+0x1,await _0x470bf5['save'](),_0x1a7e45['products']=parseInt(_0x1a7e45[_0x3e2aea(0x1bd)])+0x1,await _0x1a7e45[_0x3e2aea(0x1a7)](),_0x27669d[_0x3e2aea(0x1bd)]=parseInt(_0x27669d[_0x3e2aea(0x1bd)])+0x1,await _0x27669d[_0x3e2aea(0x1a7)](),_0x396617['flash'](_0x3e2aea(0x1ac),_0x3947f7+_0x3e2aea(0x20e));}else{console[_0x3e2aea(0x21a)](_0x4cb2d0[0x0]);const _0x40f025=_0x4cb2d0[0x0];_0x40f025['category']=_0x470bf5[_0x3e2aea(0x1fe)],_0x40f025[_0x3e2aea(0x1a6)]=_0x1a7e45[_0x3e2aea(0x1fe)],_0x40f025[_0x3e2aea(0x21f)]=_0x27669d['name'],_0x40f025[_0x3e2aea(0x251)]=_0x7a5b48,_0x40f025[_0x3e2aea(0x22d)]=_0x1dd17c,_0x40f025[_0x3e2aea(0x1c5)]=_0x27669d[_0x3e2aea(0x1c5)],_0x40f025[_0x3e2aea(0x1f7)]=_0xdc3df9,_0x40f025[_0x3e2aea(0x227)]=_0x2d7386,_0x40f025[_0x3e2aea(0x239)]=_0x5db4d9,_0x40f025[_0x3e2aea(0x19c)]=_0x1d1cde,_0x40f025[_0x3e2aea(0x23f)]=_0xd346b2;const _0x2a23fe=await _0x40f025['save']();_0x396617[_0x3e2aea(0x1c4)](_0x3e2aea(0x1ac),_0x2a23fe['name']+'\x20Edit\x20Successfully');}}catch(_0x2e2884){_0x1b6016[_0x3e2aea(0x1ad)](0x1f4)[_0x3e2aea(0x19d)]({'proderror':_0x2e2884['message'],'aproduct':_0x3947f7});}}_0x1b6016[_0x3e2aea(0x253)]('/products/view');}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x243),auth,async(_0x2ffb01,_0x87cf02)=>{const _0x30ee09=a0_0x36e497;try{console[_0x30ee09(0x21a)](_0x2ffb01[_0x30ee09(0x1ce)]);const {data_cateory:_0x4ee06c,datachoose:_0x426a65}=_0x2ffb01[_0x30ee09(0x1ce)];var _0x17ac22;if(_0x426a65=='prod_categ')_0x17ac22=await product['aggregate']([{'$group':{'_id':_0x30ee09(0x229)}}]);else{if(_0x426a65==_0x30ee09(0x1e6))_0x17ac22=await product[_0x30ee09(0x1f5)]([{'$match':{'product_category':_0x4ee06c}},{'$group':{'_id':'$brand'}}]);else _0x426a65==_0x30ee09(0x1d8)&&(_0x17ac22=await product[_0x30ee09(0x1f5)]([{'$match':{'product_category':_0x4ee06c}},{'$group':{'_id':_0x30ee09(0x206)}}]));}_0x87cf02[_0x30ee09(0x19d)](_0x17ac22);}catch(_0x49bbe1){_0x87cf02['json']({'message':_0x49bbe1['message']});}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x226),auth,async(_0x4c9c89,_0x2dc315)=>{const _0x2c6026=a0_0x36e497;try{const {data_choosing:_0x4b3301,data_selected:_0x2c9ecb}=_0x4c9c89[_0x2c6026(0x1ce)];var _0x4ad033;if(_0x4b3301==_0x2c6026(0x222))_0x4ad033=await product[_0x2c6026(0x1f5)]([{'$match':{'product_category':_0x2c9ecb}}]);else{if(_0x4b3301==_0x2c6026(0x1e6))_0x4ad033=await product['aggregate']([{'$match':{'brand':_0x2c9ecb}}]);else _0x4b3301==_0x2c6026(0x1d8)&&(_0x4ad033=await product[_0x2c6026(0x1f5)]([{'$match':{'category':_0x2c9ecb}}]));}_0x2dc315[_0x2c6026(0x19d)](_0x4ad033);}catch(_0x13e128){_0x2dc315[_0x2c6026(0x19d)]({'message':_0x13e128['message']});}}),router[a0_0x36e497(0x235)]('/print_barcode',auth,async(_0x1696de,_0x1a5d5c)=>{const _0x2b35fb=a0_0x36e497,_0x2cec48=_0x1696de[_0x2b35fb(0x1ec)],_0xfe684=await profile[_0x2b35fb(0x219)]({'email':_0x2cec48['email']}),_0x17299d=await master_shop[_0x2b35fb(0x1ca)](),_0x2a048e=await product[_0x2b35fb(0x1ca)]();if(_0x17299d[0x0][_0x2b35fb(0x1f8)]=='English\x20(US)')var _0x157a9e=users[_0x2b35fb(0x248)];else{if(_0x17299d[0x0]['language']==_0x2b35fb(0x1bc))var _0x157a9e=users[_0x2b35fb(0x1bc)];else{if(_0x17299d[0x0][_0x2b35fb(0x1f8)]==_0x2b35fb(0x1c1))var _0x157a9e=users['German'];else{if(_0x17299d[0x0][_0x2b35fb(0x1f8)]==_0x2b35fb(0x1b4))var _0x157a9e=users[_0x2b35fb(0x1b4)];else{if(_0x17299d[0x0][_0x2b35fb(0x1f8)]==_0x2b35fb(0x1d6))var _0x157a9e=users[_0x2b35fb(0x1d6)];else{if(_0x17299d[0x0]['language']=='Portuguese\x20(BR)')var _0x157a9e=users[_0x2b35fb(0x247)];else{if(_0x17299d[0x0][_0x2b35fb(0x1f8)]==_0x2b35fb(0x23c))var _0x157a9e=users[_0x2b35fb(0x23c)];else{if(_0x17299d[0x0][_0x2b35fb(0x1f8)]==_0x2b35fb(0x250))var _0x157a9e=users[_0x2b35fb(0x19e)];}}}}}}}_0x1a5d5c[_0x2b35fb(0x233)](_0x2b35fb(0x1d7),{'success':_0x1696de[_0x2b35fb(0x1c4)]('success'),'errors':_0x1696de[_0x2b35fb(0x1c4)](_0x2b35fb(0x256)),'role':_0x2cec48,'profile':_0xfe684,'products':_0x2a048e,'master_shop':_0x17299d,'language':_0x157a9e});}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x1d9),auth,async(_0x4c9ac3,_0x58fcfa)=>{const _0x4a7bb8=a0_0x36e497,_0x153e26=await product[_0x4a7bb8(0x1ca)]();_0x58fcfa[_0x4a7bb8(0x19d)]({'data':_0x153e26});}),router[a0_0x36e497(0x24a)]('/barcode_filter',auth,async(_0x20181a,_0x18f4ff)=>{const _0x2b8080=a0_0x36e497;try{const {dataProdCat:_0x1529a1,dataProdIdentity:_0x268365}=_0x20181a[_0x2b8080(0x1ce)];var _0x2e74e7;switch(_0x1529a1){case'fg':switch(_0x268365){case _0x2b8080(0x22f):_0x2e74e7=await product[_0x2b8080(0x1f5)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x2b8080(0x20a)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x2e74e7=await product[_0x2b8080(0x1f5)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x2b8080(0x206)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x268365){case'Brands':_0x2e74e7=await product[_0x2b8080(0x1f5)]([{'$match':{'product_category':_0x2b8080(0x23e)}},{'$group':{'_id':_0x2b8080(0x20a)}},{'$project':{'brand':_0x2b8080(0x1a1)}}]);break;case _0x2b8080(0x19f):_0x2e74e7=await product[_0x2b8080(0x1f5)]([{'$match':{'product_category':_0x2b8080(0x23e)}},{'$group':{'_id':_0x2b8080(0x206)}},{'$project':{'category':_0x2b8080(0x1a1)}}]);break;}break;}_0x18f4ff[_0x2b8080(0x19d)](_0x2e74e7);}catch(_0x43d68e){_0x18f4ff['json']({'message':_0x43d68e['message']});}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x249),auth,async(_0x2573ba,_0x31673e)=>{const _0x196266=a0_0x36e497;try{console['log'](_0x2573ba['body']);const {prod_cat:_0x423f64,identity:_0xd5fa63,valueData:_0xd4775c,typeofbarcode:_0x3ab8bf}=_0x2573ba['body'];let _0x132e0f;switch(_0x423f64){case'fg':if(_0xd5fa63==_0x196266(0x22f))_0x132e0f=await product[_0x196266(0x1f5)]([{'$match':{'product_category':_0x196266(0x220),'brand':_0xd4775c}}]);else _0xd5fa63==_0x196266(0x19f)&&(_0x132e0f=await product[_0x196266(0x1f5)]([{'$match':{'product_category':_0x196266(0x220),'category':_0xd4775c}}]));break;case'rm':if(_0xd5fa63==_0x196266(0x22f))_0x132e0f=await product['aggregate']([{'$match':{'product_category':_0x196266(0x23e),'brand':_0xd4775c}}]);else _0xd5fa63==_0x196266(0x19f)&&(_0x132e0f=await product['aggregate']([{'$match':{'product_category':_0x196266(0x23e),'category':_0xd4775c}}]));break;}const _0x38f0de=_0x28d5a6=>_0x28d5a6*0x48,_0x589250={'width':0x3,'height':0x1},_0x129849=new PDFDocument({'margin':_0x38f0de(0.75),'size':[_0x38f0de(_0x589250['width']),_0x38f0de(_0x589250[_0x196266(0x24f)])],'bufferPages':!![]}),_0x32bd53=_0x132e0f['length'];for(let _0x221c2c=0x0;_0x221c2c<=_0x32bd53;_0x221c2c++){if(_0x221c2c!=_0x32bd53){const _0x3bbaf6=_0x132e0f[_0x221c2c][_0x196266(0x1fe)],_0x56b024=_0x132e0f[_0x221c2c][_0x196266(0x1f7)],_0x1e2cad=_0x132e0f[_0x221c2c]['secondary_code'],_0x3f923c=_0x132e0f[_0x221c2c][_0x196266(0x22d)];var _0x33cbf1;switch(_0x3ab8bf){case'1':_0x33cbf1=_0x56b024;break;case'2':_0x33cbf1=_0x1e2cad;break;case'3':_0x33cbf1=_0x3f923c;break;}const _0xe16192={'width':0xd2,'height':0x64},_0x4641ed={'width':_0x38f0de(_0x589250['width']),'height':_0x38f0de(_0x589250[_0x196266(0x24f)])},_0x1f144d=new Canvas();JsBarcode(_0x1f144d,_0x33cbf1,{'format':'CODE128','height':_0xe16192['height'],'displayValue':!![],'text':_0x33cbf1});const _0x6c9614=_0x1f144d['toBuffer'](),_0x393a0e=_0x4641ed[_0x196266(0x245)]/_0xe16192[_0x196266(0x245)],_0x48b712=_0x4641ed[_0x196266(0x24f)]/_0xe16192[_0x196266(0x24f)],_0x4ff48d=Math[_0x196266(0x1f6)](_0x393a0e,_0x48b712),_0x448985=_0xe16192['width']*_0x4ff48d,_0x38fad7=_0xe16192[_0x196266(0x24f)]*_0x4ff48d,_0x545afb=(_0x4641ed[_0x196266(0x245)]-_0x448985)/0x2,_0x3bb554=(_0x4641ed[_0x196266(0x24f)]-_0x38fad7)/0x2;_0x129849[_0x196266(0x203)](_0x6c9614,_0x545afb,_0x3bb554,{'width':_0x448985,'height':_0x38fad7}),_0x221c2c!=_0x32bd53&&_0x129849[_0x196266(0x1e2)]();}}const _0x441d98=[];_0x129849['on'](_0x196266(0x1ba),_0x441d98[_0x196266(0x200)][_0x196266(0x254)](_0x441d98)),_0x129849['on'](_0x196266(0x238),()=>{const _0x48bf4d=_0x196266,_0x399ea9=Buffer[_0x48bf4d(0x1c0)](_0x441d98),_0x8e8759=_0x399ea9[_0x48bf4d(0x234)](_0x48bf4d(0x204));_0x31673e['json']({'pdfContent':_0x8e8759});}),_0x129849[_0x196266(0x238)]();}catch(_0x2b79a7){_0x31673e[_0x196266(0x19d)]({'message':_0x2b79a7[_0x196266(0x202)]});}}),router[a0_0x36e497(0x24a)]('/print_barcode_filter_search/',auth,async(_0x2701e2,_0x37b502)=>{const _0x3de07d=a0_0x36e497;try{console[_0x3de07d(0x21a)](_0x2701e2[_0x3de07d(0x1ce)]);const {prod_cat:_0x47f022,identity:_0x125361,valueData:_0x33938a}=_0x2701e2['body'];let _0xdea7cd;switch(_0x47f022){case'fg':if(_0x125361==_0x3de07d(0x22f))_0xdea7cd=await product[_0x3de07d(0x1f5)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x33938a}}]);else _0x125361==_0x3de07d(0x19f)&&(_0xdea7cd=await product[_0x3de07d(0x1f5)]([{'$match':{'product_category':_0x3de07d(0x220),'category':_0x33938a}}]));break;case'rm':if(_0x125361==_0x3de07d(0x22f))_0xdea7cd=await product[_0x3de07d(0x1f5)]([{'$match':{'product_category':_0x3de07d(0x23e),'brand':_0x33938a}}]);else _0x125361==_0x3de07d(0x19f)&&(_0xdea7cd=await product[_0x3de07d(0x1f5)]([{'$match':{'product_category':_0x3de07d(0x23e),'category':_0x33938a}}]));break;}_0x37b502[_0x3de07d(0x19d)](_0xdea7cd);}catch(_0x1aafc9){_0x37b502['json']({'message':_0x1aafc9[_0x3de07d(0x202)]});}}),router[a0_0x36e497(0x24a)](a0_0x36e497(0x216),auth,async(_0x1d48e1,_0x700c53)=>{const _0x4442b3=a0_0x36e497;try{const _0x27cb63=_0x1d48e1[_0x4442b3(0x1e7)]['id'],{copies:_0x57484a,typeofbarcode:_0x4385dd}=_0x1d48e1[_0x4442b3(0x1ce)];var _0x36b614=await product[_0x4442b3(0x1cb)](_0x27cb63);const _0x4fbb9c=_0x103015=>_0x103015*0x48,_0x20966e={'width':0x3,'height':0x1},_0x30992d=new PDFDocument({'margin':_0x4fbb9c(0.75),'size':[_0x4fbb9c(_0x20966e['width']),_0x4fbb9c(_0x20966e[_0x4442b3(0x24f)])],'bufferPages':!![]}),_0x1a4aae=_0x57484a,_0x35213d=_0x36b614[_0x4442b3(0x1fe)],_0x1697ce=_0x36b614[_0x4442b3(0x1f7)],_0x13ca7b=_0x36b614[_0x4442b3(0x227)],_0x47d16c=_0x36b614[_0x4442b3(0x22d)];let _0x32e5e3;switch(_0x4385dd){case'1':_0x32e5e3=_0x1697ce;break;case'2':_0x32e5e3=_0x13ca7b;break;case'3':_0x32e5e3=_0x47d16c;break;}const _0x52e479={'width':0xd2,'height':0x64},_0xc96a4e={'width':_0x4fbb9c(_0x20966e['width']),'height':_0x4fbb9c(_0x20966e['height'])};for(let _0x1fa2b=0x1;_0x1fa2b<=_0x1a4aae;_0x1fa2b++){const _0x333cc3=new Canvas();JsBarcode(_0x333cc3,_0x32e5e3,{'format':_0x4442b3(0x1b5),'height':_0x52e479['height'],'displayValue':!![],'text':_0x32e5e3});const _0x152084=_0x333cc3[_0x4442b3(0x241)](),_0x2f537c=_0xc96a4e['width']/_0x52e479['width'],_0x1b652d=_0xc96a4e[_0x4442b3(0x24f)]/_0x52e479['height'],_0x1aa78d=Math[_0x4442b3(0x1f6)](_0x2f537c,_0x1b652d),_0x23ce2a=_0x52e479[_0x4442b3(0x245)]*_0x1aa78d,_0x243eaa=_0x52e479[_0x4442b3(0x24f)]*_0x1aa78d,_0x47799f=(_0xc96a4e[_0x4442b3(0x245)]-_0x23ce2a)/0x2,_0x3eddf6=(_0xc96a4e[_0x4442b3(0x24f)]-_0x243eaa)/0x2;_0x30992d[_0x4442b3(0x203)](_0x152084,_0x47799f,_0x3eddf6,{'width':_0x23ce2a,'height':_0x243eaa}),_0x1fa2b!=_0x1a4aae&&_0x30992d['addPage']();}const _0xe79b9c=[];_0x30992d['on']('data',_0xe79b9c['push'][_0x4442b3(0x254)](_0xe79b9c)),_0x30992d['on'](_0x4442b3(0x238),()=>{const _0x29c19d=_0x4442b3,_0x3ea26d=Buffer[_0x29c19d(0x1c0)](_0xe79b9c),_0x59ad29=_0x3ea26d['toString']('base64');_0x700c53[_0x29c19d(0x19d)]({'pdfContent':_0x59ad29});}),_0x30992d[_0x4442b3(0x238)]();}catch(_0x20e222){_0x700c53[_0x4442b3(0x19d)]({'message':_0x20e222['message']});}}),module[a0_0x36e497(0x24b)]=router;