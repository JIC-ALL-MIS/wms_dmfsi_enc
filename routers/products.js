const a0_0x4616bf=a0_0x4423;(function(_0x274df3,_0x27175c){const _0x4afa0b=a0_0x4423,_0x13b3dd=_0x274df3();while(!![]){try{const _0x3b6334=parseInt(_0x4afa0b(0xa0))/0x1+parseInt(_0x4afa0b(0xfe))/0x2+parseInt(_0x4afa0b(0xc1))/0x3*(parseInt(_0x4afa0b(0x14f))/0x4)+parseInt(_0x4afa0b(0xf7))/0x5*(-parseInt(_0x4afa0b(0xfa))/0x6)+parseInt(_0x4afa0b(0xd4))/0x7*(-parseInt(_0x4afa0b(0xe5))/0x8)+-parseInt(_0x4afa0b(0x137))/0x9*(parseInt(_0x4afa0b(0xbf))/0xa)+-parseInt(_0x4afa0b(0xab))/0xb*(-parseInt(_0x4afa0b(0x160))/0xc);if(_0x3b6334===_0x27175c)break;else _0x13b3dd['push'](_0x13b3dd['shift']());}catch(_0x305ae2){_0x13b3dd['push'](_0x13b3dd['shift']());}}}(a0_0x5d14,0xf3009));const express=require(a0_0x4616bf(0xcc)),res=require('express/lib/response'),app=express(),router=express[a0_0x4616bf(0x14a)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x4616bf(0x117)),auth=require(a0_0x4616bf(0x158)),users=require(a0_0x4616bf(0x9f)),excelJS=require(a0_0x4616bf(0x13c)),xlsx=require(a0_0x4616bf(0xe0)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x4616bf(0x111)),PDFDocument=require('pdfkit-table');router[a0_0x4616bf(0x121)]('/categories',auth,async(_0x4575a6,_0xcc40da)=>{const _0x5720f1=a0_0x4616bf;try{const {username:_0x2b153a,email:_0x529e22,role:_0x111e56}=_0x4575a6['user'],_0x30c0a4=_0x4575a6[_0x5720f1(0x145)],_0x501a46=await profile[_0x5720f1(0xc9)]({'email':_0x30c0a4[_0x5720f1(0xd6)]}),_0xc9f7a5=await master_shop['find']();console[_0x5720f1(0x11d)]('master',_0xc9f7a5);const _0x41fdf4=await categories[_0x5720f1(0xe8)]();if(_0xc9f7a5[0x0][_0x5720f1(0xac)]==_0x5720f1(0xbc))var _0x2429d3=users['English'];else{if(_0xc9f7a5[0x0]['language']==_0x5720f1(0x12c))var _0x2429d3=users[_0x5720f1(0x12c)];else{if(_0xc9f7a5[0x0][_0x5720f1(0xac)]==_0x5720f1(0x15a))var _0x2429d3=users[_0x5720f1(0x15a)];else{if(_0xc9f7a5[0x0][_0x5720f1(0xac)]=='Spanish')var _0x2429d3=users[_0x5720f1(0x13d)];else{if(_0xc9f7a5[0x0]['language']==_0x5720f1(0x108))var _0x2429d3=users[_0x5720f1(0x108)];else{if(_0xc9f7a5[0x0][_0x5720f1(0xac)]==_0x5720f1(0x14e))var _0x2429d3=users[_0x5720f1(0xa5)];else{if(_0xc9f7a5[0x0][_0x5720f1(0xac)]=='Chinese')var _0x2429d3=users[_0x5720f1(0x100)];else{if(_0xc9f7a5[0x0][_0x5720f1(0xac)]==_0x5720f1(0xfc))var _0x2429d3=users['Arabic'];}}}}}}}_0xcc40da[_0x5720f1(0xb1)](_0x5720f1(0x110),{'success':_0x4575a6['flash'](_0x5720f1(0x136)),'errors':_0x4575a6[_0x5720f1(0xaa)]('errors'),'role':_0x30c0a4,'profile':_0x501a46,'user':_0x41fdf4,'master_shop':_0xc9f7a5,'language':_0x2429d3});}catch(_0x142bde){console['log'](_0x142bde);}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0xf5),auth,async(_0x4b1c4d,_0x49b8f8)=>{const _0x29fb96=a0_0x4616bf;try{const {name:_0x4c139b,products:_0x20af33}=_0x4b1c4d[_0x29fb96(0x140)],_0x5b0b07=new categories({'name':_0x4c139b,'products':_0x20af33}),_0x58ea97=await categories['findOne']({'name':_0x4c139b});_0x58ea97?_0x4b1c4d[_0x29fb96(0xaa)]('errors',_0x4c139b+_0x29fb96(0xf1)):_0x4b1c4d['flash'](_0x29fb96(0x136),_0x4c139b+_0x29fb96(0x135));const _0x3e8a8f=await _0x5b0b07[_0x29fb96(0x139)]();_0x49b8f8['redirect'](_0x29fb96(0x126));}catch(_0x31f7f6){console[_0x29fb96(0x11d)](_0x31f7f6);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0xba),auth,async(_0x46e03,_0x22ec51)=>{const _0x41ee0a=a0_0x4616bf;try{const {username:_0x5ac883,email:_0x145a2a,role:_0x89d721}=_0x46e03['user'],_0x43ba7f=_0x46e03[_0x41ee0a(0x145)],_0x2345c0=await profile[_0x41ee0a(0xc9)]({'email':_0x43ba7f['email']}),_0x14f934=await master_shop[_0x41ee0a(0xe8)]();console[_0x41ee0a(0x11d)]('master',_0x14f934);const _0x525d9a=_0x46e03[_0x41ee0a(0xbe)]['id'];console[_0x41ee0a(0x11d)](_0x525d9a);const _0x3dab8a=await categories[_0x41ee0a(0xb8)](_0x525d9a);if(_0x14f934[0x0][_0x41ee0a(0xac)]=='English\x20(US)')var _0x2ed58f=users[_0x41ee0a(0xf0)];else{if(_0x14f934[0x0]['language']==_0x41ee0a(0x12c))var _0x2ed58f=users['Hindi'];else{if(_0x14f934[0x0][_0x41ee0a(0xac)]=='German')var _0x2ed58f=users['German'];else{if(_0x14f934[0x0]['language']==_0x41ee0a(0x13d))var _0x2ed58f=users[_0x41ee0a(0x13d)];else{if(_0x14f934[0x0]['language']==_0x41ee0a(0x108))var _0x2ed58f=users['French'];else{if(_0x14f934[0x0][_0x41ee0a(0xac)]==_0x41ee0a(0x14e))var _0x2ed58f=users[_0x41ee0a(0xa5)];else{if(_0x14f934[0x0]['language']==_0x41ee0a(0x100))var _0x2ed58f=users['Chinese'];else{if(_0x14f934[0x0][_0x41ee0a(0xac)]==_0x41ee0a(0xfc))var _0x2ed58f=users['Arabic'];}}}}}}}_0x22ec51['render'](_0x41ee0a(0x110),{'success':_0x46e03['flash'](_0x41ee0a(0x136)),'errors':_0x46e03[_0x41ee0a(0xaa)]('errors'),'role':_0x43ba7f,'profile':_0x2345c0,'master_shop':_0x14f934,'user':_0x3dab8a,'language':_0x2ed58f});}catch(_0x46b119){console['log'](_0x46b119);}}),router['post'](a0_0x4616bf(0xba),auth,async(_0x562b06,_0x262035)=>{const _0x22627a=a0_0x4616bf;try{const _0x395138=_0x562b06[_0x22627a(0xbe)]['id'],_0x4ad57a=await categories[_0x22627a(0xb7)](_0x395138,_0x562b06[_0x22627a(0x140)]);_0x562b06[_0x22627a(0xaa)](_0x22627a(0x136),''+users[_0x22627a(0xd1)]),_0x262035[_0x22627a(0xdb)]('/products/categories');}catch(_0x5f08c2){console[_0x22627a(0x11d)](_0x5f08c2);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x12b),auth,async(_0x5f55ad,_0x3a6601)=>{const _0x1acd99=a0_0x4616bf;try{const _0x2bd865=_0x5f55ad[_0x1acd99(0xbe)]['id'],_0x19428a=await categories[_0x1acd99(0xce)](_0x2bd865);_0x5f55ad[_0x1acd99(0xaa)](_0x1acd99(0x136),_0x1acd99(0x116)),_0x3a6601[_0x1acd99(0xdb)](_0x1acd99(0x126));}catch(_0x5b6fe2){console[_0x1acd99(0x11d)](_0x5b6fe2);}}),router['get'](a0_0x4616bf(0x105),auth,async(_0x3c561c,_0x110d73)=>{const _0x917758=a0_0x4616bf;try{const {username:_0x561579,email:_0x38ff39,role:_0x35cb71}=_0x3c561c[_0x917758(0x145)],_0x4cff55=_0x3c561c[_0x917758(0x145)],_0xbbd5e2=await profile['findOne']({'email':_0x4cff55[_0x917758(0xd6)]}),_0x5202b9=await master_shop[_0x917758(0xe8)]();console[_0x917758(0x11d)](_0x917758(0x133),_0x5202b9);const _0x250fc5=await brands['find']();if(_0x5202b9[0x0]['language']==_0x917758(0xbc))var _0x7926ff=users['English'];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x12c))var _0x7926ff=users[_0x917758(0x12c)];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x15a))var _0x7926ff=users['German'];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x13d))var _0x7926ff=users['Spanish'];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x108))var _0x7926ff=users[_0x917758(0x108)];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x14e))var _0x7926ff=users[_0x917758(0xa5)];else{if(_0x5202b9[0x0][_0x917758(0xac)]==_0x917758(0x100))var _0x7926ff=users[_0x917758(0x100)];else{if(_0x5202b9[0x0]['language']==_0x917758(0xfc))var _0x7926ff=users['Arabic'];}}}}}}}_0x110d73[_0x917758(0xb1)](_0x917758(0xd7),{'success':_0x3c561c['flash'](_0x917758(0x136)),'errors':_0x3c561c[_0x917758(0xaa)](_0x917758(0x119)),'role':_0x4cff55,'profile':_0xbbd5e2,'master_shop':_0x5202b9,'user':_0x250fc5,'language':_0x7926ff});}catch(_0x13eaa1){console[_0x917758(0x11d)](_0x13eaa1);}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x105),auth,async(_0x114b0f,_0x46563b)=>{const _0x1db87a=a0_0x4616bf;try{const {name:_0xd112f4,products:_0x578a7e}=_0x114b0f[_0x1db87a(0x140)],_0x462132=new brands({'name':_0xd112f4,'products':_0x578a7e}),_0x58cbdd=await brands[_0x1db87a(0xc9)]({'name':_0xd112f4});_0x58cbdd?_0x114b0f[_0x1db87a(0xaa)](_0x1db87a(0x119),_0xd112f4+_0x1db87a(0x120)):_0x114b0f[_0x1db87a(0xaa)](_0x1db87a(0x136),_0xd112f4+_0x1db87a(0xb0));const _0x4029ac=await _0x462132[_0x1db87a(0x139)]();_0x46563b[_0x1db87a(0xdb)](_0x1db87a(0x129));}catch(_0x4d8f2c){console['log'](_0x4d8f2c);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x12d),auth,async(_0x510361,_0x22d0ee)=>{const _0x492266=a0_0x4616bf;try{const {username:_0x358cc9,email:_0x4d6b87,role:_0x103b11}=_0x510361[_0x492266(0x145)],_0x12c6fa=_0x510361['user'],_0x4aa9a3=await profile[_0x492266(0xc9)]({'email':_0x12c6fa[_0x492266(0xd6)]}),_0x45b717=await master_shop[_0x492266(0xe8)]();console[_0x492266(0x11d)](_0x492266(0x133),_0x45b717);const _0x14d4ed=_0x510361[_0x492266(0xbe)]['id'];console[_0x492266(0x11d)](_0x14d4ed);const _0x3e8c4a=await brands[_0x492266(0xb8)](_0x14d4ed);if(_0x45b717[0x0][_0x492266(0xac)]==_0x492266(0xbc))var _0x2b493d=users[_0x492266(0xf0)];else{if(_0x45b717[0x0]['language']==_0x492266(0x12c))var _0x2b493d=users['Hindi'];else{if(_0x45b717[0x0]['language']==_0x492266(0x15a))var _0x2b493d=users[_0x492266(0x15a)];else{if(_0x45b717[0x0]['language']==_0x492266(0x13d))var _0x2b493d=users[_0x492266(0x13d)];else{if(_0x45b717[0x0][_0x492266(0xac)]==_0x492266(0x108))var _0x2b493d=users[_0x492266(0x108)];else{if(_0x45b717[0x0][_0x492266(0xac)]==_0x492266(0x14e))var _0x2b493d=users[_0x492266(0xa5)];else{if(_0x45b717[0x0][_0x492266(0xac)]=='Chinese')var _0x2b493d=users[_0x492266(0x100)];else{if(_0x45b717[0x0][_0x492266(0xac)]==_0x492266(0xfc))var _0x2b493d=users[_0x492266(0x130)];}}}}}}}_0x22d0ee['render']('brands',{'success':_0x510361[_0x492266(0xaa)](_0x492266(0x136)),'errors':_0x510361[_0x492266(0xaa)](_0x492266(0x119)),'role':_0x12c6fa,'profile':_0x4aa9a3,'master_shop':_0x45b717,'user':_0x3e8c4a,'language':_0x2b493d});}catch(_0x5282ae){console['log'](_0x5282ae);}}),router[a0_0x4616bf(0xf4)]('/brands/:id',auth,async(_0x192aa8,_0x38e5f9)=>{const _0xf8323b=a0_0x4616bf;try{const _0x57c045=_0x192aa8[_0xf8323b(0xbe)]['id'],_0x4170ae=await brands['findByIdAndUpdate'](_0x57c045,_0x192aa8[_0xf8323b(0x140)]);_0x192aa8['flash'](_0xf8323b(0x136),_0xf8323b(0xff)),_0x38e5f9[_0xf8323b(0xdb)](_0xf8323b(0x129));}catch(_0x577d82){console[_0xf8323b(0x11d)](_0x577d82);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x11f),auth,async(_0x5ef832,_0x1aba58)=>{const _0x523d5c=a0_0x4616bf;try{const _0x45f3c1=_0x5ef832[_0x523d5c(0xbe)]['id'],_0x5a59ec=await brands['findByIdAndDelete'](_0x45f3c1);_0x5ef832[_0x523d5c(0xaa)]('success',_0x523d5c(0xe2)),_0x1aba58['redirect'](_0x523d5c(0x129));}catch(_0x484824){console[_0x523d5c(0x11d)](_0x484824);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0xf3),auth,async(_0x28e6dd,_0x5b346a)=>{const _0x266387=a0_0x4616bf;try{const {username:_0x3bfe3e,email:_0x73a93b,role:_0x57d1ae}=_0x28e6dd[_0x266387(0x145)],_0x3c9f13=_0x28e6dd['user'],_0x236e88=await profile['findOne']({'email':_0x3c9f13['email']}),_0x556bd7=await master_shop[_0x266387(0xe8)]();console[_0x266387(0x11d)]('master',_0x556bd7);const _0x46b934=await units[_0x266387(0xe8)]();if(_0x556bd7[0x0][_0x266387(0xac)]==_0x266387(0xbc))var _0x3a9fb7=users[_0x266387(0xf0)];else{if(_0x556bd7[0x0][_0x266387(0xac)]==_0x266387(0x12c))var _0x3a9fb7=users[_0x266387(0x12c)];else{if(_0x556bd7[0x0]['language']==_0x266387(0x15a))var _0x3a9fb7=users[_0x266387(0x15a)];else{if(_0x556bd7[0x0]['language']==_0x266387(0x13d))var _0x3a9fb7=users[_0x266387(0x13d)];else{if(_0x556bd7[0x0]['language']==_0x266387(0x108))var _0x3a9fb7=users[_0x266387(0x108)];else{if(_0x556bd7[0x0][_0x266387(0xac)]==_0x266387(0x14e))var _0x3a9fb7=users['Portuguese'];else{if(_0x556bd7[0x0][_0x266387(0xac)]=='Chinese')var _0x3a9fb7=users['Chinese'];else{if(_0x556bd7[0x0]['language']=='Arabic\x20(ae)')var _0x3a9fb7=users[_0x266387(0x130)];}}}}}}}_0x5b346a[_0x266387(0xb1)](_0x266387(0xea),{'success':_0x28e6dd[_0x266387(0xaa)]('success'),'errors':_0x28e6dd[_0x266387(0xaa)](_0x266387(0x119)),'role':_0x3c9f13,'profile':_0x236e88,'master_shop':_0x556bd7,'user':_0x46b934,'language':_0x3a9fb7});}catch(_0x601422){console[_0x266387(0x11d)](_0x601422);}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0xf3),auth,async(_0x304697,_0x5e0e2f)=>{const _0x1b4ac2=a0_0x4616bf;try{const {name:_0x23799f,secondary_unit:_0x1a4da4,products:_0x3eaa36}=_0x304697[_0x1b4ac2(0x140)],_0xa26843=new units({'name':_0x23799f,'secondary_unit':_0x1a4da4,'products':_0x3eaa36}),_0x1b4ba2=await units[_0x1b4ac2(0xc9)]({'name':_0x23799f});_0x1b4ba2?_0x304697[_0x1b4ac2(0xaa)](_0x1b4ac2(0x119),_0x23799f+_0x1b4ac2(0x127)):_0x304697[_0x1b4ac2(0xaa)](_0x1b4ac2(0x136),_0x23799f+_0x1b4ac2(0x14b));const _0x1b9b41=await _0xa26843[_0x1b4ac2(0x139)]();_0x5e0e2f[_0x1b4ac2(0xdb)]('/products/units');}catch(_0x5c6d34){console[_0x1b4ac2(0x11d)](_0x5c6d34);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x132),auth,async(_0x47c860,_0x1db577)=>{const _0x27f952=a0_0x4616bf;try{const {username:_0x1400f9,email:_0x41ab8b,role:_0x2af3c6}=_0x47c860['user'],_0x4c9d91=_0x47c860['user'],_0x59cb6b=await profile[_0x27f952(0xc9)]({'email':_0x4c9d91[_0x27f952(0xd6)]}),_0x34e422=await master_shop[_0x27f952(0xe8)]();console[_0x27f952(0x11d)](_0x27f952(0x133),_0x34e422);const _0x3b4d96=_0x47c860[_0x27f952(0xbe)]['id'],_0x2f10d6=await units[_0x27f952(0xb8)](_0x3b4d96);if(_0x34e422[0x0][_0x27f952(0xac)]=='English\x20(US)')var _0x4592ac=users[_0x27f952(0xf0)];else{if(_0x34e422[0x0][_0x27f952(0xac)]==_0x27f952(0x12c))var _0x4592ac=users[_0x27f952(0x12c)];else{if(_0x34e422[0x0]['language']==_0x27f952(0x15a))var _0x4592ac=users[_0x27f952(0x15a)];else{if(_0x34e422[0x0]['language']=='Spanish')var _0x4592ac=users['Spanish'];else{if(_0x34e422[0x0][_0x27f952(0xac)]=='French')var _0x4592ac=users[_0x27f952(0x108)];else{if(_0x34e422[0x0]['language']==_0x27f952(0x14e))var _0x4592ac=users['Portuguese'];else{if(_0x34e422[0x0][_0x27f952(0xac)]==_0x27f952(0x100))var _0x4592ac=users[_0x27f952(0x100)];else{if(_0x34e422[0x0][_0x27f952(0xac)]=='Arabic\x20(ae)')var _0x4592ac=users[_0x27f952(0x130)];}}}}}}}_0x1db577['render'](_0x27f952(0xea),{'success':_0x47c860[_0x27f952(0xaa)]('success'),'errors':_0x47c860['flash'](_0x27f952(0x119)),'role':_0x4c9d91,'profile':_0x59cb6b,'master_shop':_0x34e422,'user':_0x2f10d6,'language':_0x4592ac});}catch(_0x1a047e){console[_0x27f952(0x11d)](_0x1a047e);}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x132),auth,async(_0x2fbd81,_0xdf9122)=>{const _0x2c601e=a0_0x4616bf;try{const _0x413632=_0x2fbd81['params']['id'],_0x57ede8=await units[_0x2c601e(0xb7)](_0x413632,_0x2fbd81[_0x2c601e(0x140)]);_0x2fbd81[_0x2c601e(0xaa)](_0x2c601e(0x136),_0x2c601e(0xec)),_0xdf9122[_0x2c601e(0xdb)]('/products/units');}catch(_0x3d1103){console[_0x2c601e(0x11d)](_0x3d1103);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x161),auth,async(_0x77fc06,_0x6c1633)=>{const _0x8c1177=a0_0x4616bf;try{const _0x1bd002=_0x77fc06[_0x8c1177(0xbe)]['id'],_0x3c425c=await units[_0x8c1177(0xce)](_0x1bd002);_0x77fc06[_0x8c1177(0xaa)](_0x8c1177(0x136),'unit\x20data\x20delete\x20successfully'),_0x6c1633[_0x8c1177(0xdb)](_0x8c1177(0x15c));}catch(_0x1d8a17){console[_0x8c1177(0x11d)](_0x1d8a17);}});const storage=multer['diskStorage']({'destination':(_0x5d317e,_0x454a34,_0xee91b6)=>{_0xee91b6(null,'public/upload');},'filename':(_0x37123b,_0x26cd79,_0xd56834)=>{const _0x3917dc=a0_0x4616bf;_0xd56834(null,Date['now']()+_0x26cd79[_0x3917dc(0x144)]);}}),upload=multer({'storage':storage});function a0_0x4423(_0x997712,_0x12c48c){const _0x5d141a=a0_0x5d14();return a0_0x4423=function(_0x44230a,_0x4877b0){_0x44230a=_0x44230a-0x9f;let _0x5a7c26=_0x5d141a[_0x44230a];return _0x5a7c26;},a0_0x4423(_0x997712,_0x12c48c);}router[a0_0x4616bf(0x121)](a0_0x4616bf(0x107),auth,async(_0x365fc8,_0x2a7b5c)=>{const _0x10722a=a0_0x4616bf;try{const {username:_0x490230,email:_0x131481,role:_0x3a9ea8}=_0x365fc8[_0x10722a(0x145)],_0xdf7e69=_0x365fc8[_0x10722a(0x145)],_0xb6b93e=await profile[_0x10722a(0xc9)]({'email':_0xdf7e69[_0x10722a(0xd6)]}),_0x9acdda={'year':_0x10722a(0x15f),'month':_0x10722a(0x14d),'day':_0x10722a(0x15f)},_0x3045a5=await master_shop[_0x10722a(0xe8)]();console[_0x10722a(0x11d)](_0x10722a(0xc0),_0x3045a5);const _0x4f7244=await product[_0x10722a(0xe8)]();console[_0x10722a(0x11d)](_0x10722a(0x113),_0x4f7244);const _0x1db5d8=await warehouse[_0x10722a(0x125)]([{'$unwind':_0x10722a(0xe4)},{'$lookup':{'from':'products','localField':_0x10722a(0x143),'foreignField':'name','as':_0x10722a(0x115)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x10722a(0x102),'product_stock':_0x10722a(0x118)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x10722a(0x123)}}}]);console['log'](_0x10722a(0x13e),_0x1db5d8),_0x1db5d8['forEach'](_0x4e5edf=>{const _0x26b7fc=_0x4f7244['map'](_0x4e10f0=>{const _0x3b334a=a0_0x4423;_0x4e10f0[_0x3b334a(0xdd)]==_0x4e5edf[_0x3b334a(0xa9)]&&(_0x4e10f0[_0x3b334a(0x11c)]=parseInt(_0x4e10f0[_0x3b334a(0x11c)])+parseInt(_0x4e5edf[_0x3b334a(0xaf)]));});}),console[_0x10722a(0x11d)](_0x10722a(0x113),_0x4f7244);if(_0x3045a5[0x0]['language']==_0x10722a(0xbc))var _0x516f7c=users['English'];else{if(_0x3045a5[0x0]['language']=='Hindi')var _0x516f7c=users[_0x10722a(0x12c)];else{if(_0x3045a5[0x0]['language']==_0x10722a(0x15a))var _0x516f7c=users[_0x10722a(0x15a)];else{if(_0x3045a5[0x0][_0x10722a(0xac)]==_0x10722a(0x13d))var _0x516f7c=users['Spanish'];else{if(_0x3045a5[0x0]['language']==_0x10722a(0x108))var _0x516f7c=users[_0x10722a(0x108)];else{if(_0x3045a5[0x0][_0x10722a(0xac)]==_0x10722a(0x14e))var _0x516f7c=users[_0x10722a(0xa5)];else{if(_0x3045a5[0x0]['language']=='Chinese')var _0x516f7c=users['Chinese'];else{if(_0x3045a5[0x0][_0x10722a(0xac)]==_0x10722a(0xfc))var _0x516f7c=users[_0x10722a(0x130)];}}}}}}}_0x2a7b5c[_0x10722a(0xb1)](_0x10722a(0x149),{'success':_0x365fc8[_0x10722a(0xaa)](_0x10722a(0x136)),'errors':_0x365fc8[_0x10722a(0xaa)](_0x10722a(0x119)),'alldata':_0x4f7244,'profile':_0xb6b93e,'master_shop':_0x3045a5,'role':_0xdf7e69,'product_stock':_0x1db5d8,'language':_0x516f7c});}catch(_0x253707){console[_0x10722a(0x11d)](_0x253707);}}),router[a0_0x4616bf(0x121)]('/view/add_products',auth,async(_0x1e028a,_0xdb287)=>{const _0x5b38e6=a0_0x4616bf;try{const {username:_0x58aee2,email:_0x5b9ca7,role:_0x5f091c}=_0x1e028a[_0x5b38e6(0x145)],_0x5566db=_0x1e028a[_0x5b38e6(0x145)],_0x4cf7fe=await profile['findOne']({'email':_0x5566db[_0x5b38e6(0xd6)]}),_0x352072=await master_shop['find']();console[_0x5b38e6(0x11d)](_0x5b38e6(0x133),_0x352072);const _0x307daa=await categories['find']({}),_0x529a88=await brands[_0x5b38e6(0xe8)]({}),_0x1dde95=await units['find']({}),_0x28e84a=await warehouse[_0x5b38e6(0xe8)]({'status':_0x5b38e6(0x151)});if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0xbc))var _0x13eba5=users['English'];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x12c))var _0x13eba5=users[_0x5b38e6(0x12c)];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x15a))var _0x13eba5=users[_0x5b38e6(0x15a)];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x13d))var _0x13eba5=users[_0x5b38e6(0x13d)];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x108))var _0x13eba5=users['French'];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x14e))var _0x13eba5=users[_0x5b38e6(0xa5)];else{if(_0x352072[0x0][_0x5b38e6(0xac)]==_0x5b38e6(0x100))var _0x13eba5=users[_0x5b38e6(0x100)];else{if(_0x352072[0x0]['language']==_0x5b38e6(0xfc))var _0x13eba5=users[_0x5b38e6(0x130)];}}}}}}}_0xdb287[_0x5b38e6(0xb1)](_0x5b38e6(0x131),{'success':_0x1e028a['flash'](_0x5b38e6(0x136)),'errors':_0x1e028a[_0x5b38e6(0xaa)](_0x5b38e6(0x119)),'role':_0x5566db,'profile':_0x4cf7fe,'categories':_0x307daa,'brands':_0x529a88,'master_shop':_0x352072,'units':_0x1dde95,'language':_0x13eba5,'find_data':_0x28e84a});}catch(_0x24a78d){console['log'](_0x24a78d);}}),router['post'](a0_0x4616bf(0xdc),auth,upload[a0_0x4616bf(0x112)](a0_0x4616bf(0x10f)),async(_0xa3c982,_0x55b278)=>{const _0x3995bb=a0_0x4616bf;try{const {name:_0x12e27c,category:_0x82df7d,brand:_0x70d1b2,unit:_0x5bb302,alertquantity:_0xc3a1e2,stock:_0x10a260,product_code:_0x1577b7,warehouse:_0x59944f,primary_ItemCode:_0x184a23,second_ItemCode:_0x15f579,second_unit:_0x30fdf9,maxPerUnit:_0x12247c,MaxPerProduct:_0x101dc9}=_0xa3c982[_0x3995bb(0x140)],_0x3d3c32=_0xa3c982[_0x3995bb(0xb2)]?.[_0x3995bb(0xa2)]||_0x3995bb(0x156),_0x522103=new product({'image':_0x3d3c32,'name':_0x12e27c,'category':_0x82df7d,'brand':_0x70d1b2,'unit':_0x5bb302,'alertquantity':_0xc3a1e2,'stock':_0x10a260,'product_code':_0x1577b7,'warehouse':_0x59944f,'primary_code':_0x184a23,'secondary_code':_0x15f579,'second_unit':_0x30fdf9,'maxStocks':_0x101dc9,'maxProdPerUnit':_0x12247c}),_0x4407f2=await _0x522103['save'](),_0xff535d=await categories[_0x3995bb(0xc9)]({'name':_0x82df7d});_0xff535d[_0x3995bb(0x149)]=parseInt(_0xff535d[_0x3995bb(0x149)])+0x1,await _0xff535d[_0x3995bb(0x139)]();const _0x22c0f6=await brands['findOne']({'name':_0x70d1b2});_0x22c0f6[_0x3995bb(0x149)]=parseInt(_0x22c0f6[_0x3995bb(0x149)])+0x1,await _0x22c0f6[_0x3995bb(0x139)]();const _0x262185=await units['findOne']({'name':_0x5bb302});_0x262185[_0x3995bb(0x149)]=parseInt(_0x262185[_0x3995bb(0x149)])+0x1,await _0x262185[_0x3995bb(0x139)](),_0xa3c982[_0x3995bb(0xaa)](_0x3995bb(0x136),_0x3995bb(0xfd)),_0x55b278[_0x3995bb(0xdb)](_0x3995bb(0x15d));}catch(_0x1965cf){console[_0x3995bb(0x11d)](_0x1965cf);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x157),auth,async(_0x20c767,_0x6dd1db)=>{const _0x402d76=a0_0x4616bf;try{const {username:_0x361f46,email:_0x32290f,role:_0x5ac37e}=_0x20c767[_0x402d76(0x145)],_0x3c41b4=_0x20c767[_0x402d76(0x145)],_0x444bfe=await profile[_0x402d76(0xc9)]({'email':_0x3c41b4[_0x402d76(0xd6)]}),_0xecbd62=await master_shop[_0x402d76(0xe8)]();console['log'](_0x402d76(0x12a),_0xecbd62);const _0x34f9fa=_0x20c767[_0x402d76(0xbe)]['id'],_0x4e90a5=await product[_0x402d76(0xb8)](_0x34f9fa),_0x5068cf=await categories['find']({}),_0x44e04e=await brands[_0x402d76(0xe8)]({}),_0x14e469=await units[_0x402d76(0xe8)]({}),_0x49b72e=await warehouse['find']({'status':'Enabled'}),_0x3735d4=await units[_0x402d76(0x125)]([{'$group':{'_id':_0x402d76(0xdf),'secondaryunit':{'$first':_0x402d76(0xa1)}}}]);if(_0xecbd62[0x0][_0x402d76(0xac)]==_0x402d76(0xbc))var _0x59bd76=users[_0x402d76(0xf0)];else{if(_0xecbd62[0x0]['language']==_0x402d76(0x12c))var _0x59bd76=users['Hindi'];else{if(_0xecbd62[0x0][_0x402d76(0xac)]==_0x402d76(0x15a))var _0x59bd76=users[_0x402d76(0x15a)];else{if(_0xecbd62[0x0][_0x402d76(0xac)]==_0x402d76(0x13d))var _0x59bd76=users[_0x402d76(0x13d)];else{if(_0xecbd62[0x0][_0x402d76(0xac)]==_0x402d76(0x108))var _0x59bd76=users[_0x402d76(0x108)];else{if(_0xecbd62[0x0][_0x402d76(0xac)]=='Portuguese\x20(BR)')var _0x59bd76=users[_0x402d76(0xa5)];else{if(_0xecbd62[0x0]['language']==_0x402d76(0x100))var _0x59bd76=users['Chinese'];else{if(_0xecbd62[0x0][_0x402d76(0xac)]==_0x402d76(0xfc))var _0x59bd76=users[_0x402d76(0x130)];}}}}}}}_0x6dd1db['render']('edit_product',{'success':_0x20c767[_0x402d76(0xaa)](_0x402d76(0x136)),'errors':_0x20c767['flash'](_0x402d76(0x119)),'role':_0x3c41b4,'profile':_0x444bfe,'alldata':_0x4e90a5,'categories':_0x5068cf,'brands':_0x44e04e,'master_shop':_0xecbd62,'units':_0x14e469,'secondunit':_0x3735d4,'find_data':_0x49b72e,'language':_0x59bd76});}catch(_0x54befc){console['log'](_0x54befc);}}),router[a0_0x4616bf(0xf4)]('/view/:id',auth,upload['single']('image'),async(_0x5dbec9,_0x5d4879)=>{const _0x5274b1=a0_0x4616bf;try{console[_0x5274b1(0x11d)]('hello');const _0x29344c=_0x5dbec9[_0x5274b1(0xbe)]['id'],_0x531209=await product[_0x5274b1(0xb8)](_0x29344c),{image:_0x2f5ce7,name:_0x52285e,category:_0x233d44,brand:_0x3d4de6,sku:_0x49d2e7,unit:_0x258d36,alertquantity:_0x5185c7,product_code:_0x592794,warehouse:_0x50c4d7,primary_ItemCode:_0x54ef8d,second_ItemCode:_0x91f820,second_unit:_0x269c22,maxPerUnit:_0x3a0c87,MaxPerProduct:_0x3c79ed,prod_catdata:_0x462345}=_0x5dbec9[_0x5274b1(0x140)];_0x5dbec9[_0x5274b1(0xb2)]&&(_0x531209['image']=_0x5dbec9[_0x5274b1(0xb2)][_0x5274b1(0xa2)]);_0x531209[_0x5274b1(0xdd)]=_0x52285e,_0x531209[_0x5274b1(0x153)]=_0x233d44,_0x531209[_0x5274b1(0x12f)]=_0x3d4de6,_0x531209['sku']=_0x49d2e7,_0x531209[_0x5274b1(0xd8)]=_0x258d36,_0x531209[_0x5274b1(0x10c)]=_0x5185c7,_0x531209[_0x5274b1(0x10a)]=_0x592794,_0x531209['warehouse']=_0x50c4d7,_0x531209[_0x5274b1(0xcb)]=_0x54ef8d,_0x531209[_0x5274b1(0xbd)]=_0x91f820,_0x531209[_0x5274b1(0x104)]=_0x269c22,_0x531209[_0x5274b1(0xc2)]=_0x3c79ed,_0x531209[_0x5274b1(0xa6)]=_0x3a0c87,_0x531209[_0x5274b1(0xf9)]=_0x462345;const _0x2b755c=await _0x531209[_0x5274b1(0x139)]();console[_0x5274b1(0x11d)]('product\x20edit',_0x531209),_0x5dbec9[_0x5274b1(0xaa)](_0x5274b1(0x136),_0x5274b1(0x142)),_0x5d4879[_0x5274b1(0xdb)]('/products/view');}catch(_0x152a96){console[_0x5274b1(0x11d)](_0x152a96);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0xd9),auth,async(_0x1080c7,_0x392833)=>{const _0xd99579=a0_0x4616bf;try{const {username:_0xbc4265,email:_0x5cc613,role:_0x41bcaa}=_0x1080c7[_0xd99579(0x145)],_0x50ee52=_0x1080c7[_0xd99579(0x145)],_0x2cc071=await profile[_0xd99579(0xc9)]({'email':_0x50ee52['email']}),_0x50331c=await master_shop[_0xd99579(0xe8)]();console[_0xd99579(0x11d)](_0xd99579(0x141),_0x50331c);const _0x43303d=_0x1080c7[_0xd99579(0xbe)]['id'],_0x693757=await product[_0xd99579(0xb8)](_0x43303d);console['log'](_0xd99579(0xc5),_0x693757);if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0xbc))var _0x2ce35b=users[_0xd99579(0xf0)];else{if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0x12c))var _0x2ce35b=users[_0xd99579(0x12c)];else{if(_0x50331c[0x0]['language']==_0xd99579(0x15a))var _0x2ce35b=users['German'];else{if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0x13d))var _0x2ce35b=users['Spanish'];else{if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0x108))var _0x2ce35b=users[_0xd99579(0x108)];else{if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0x14e))var _0x2ce35b=users[_0xd99579(0xa5)];else{if(_0x50331c[0x0][_0xd99579(0xac)]==_0xd99579(0x100))var _0x2ce35b=users[_0xd99579(0x100)];else{if(_0x50331c[0x0]['language']==_0xd99579(0xfc))var _0x2ce35b=users['Arabic'];}}}}}}}_0x392833['render']('product_barcode',{'success':_0x1080c7[_0xd99579(0xaa)](_0xd99579(0x136)),'errors':_0x1080c7[_0xd99579(0xaa)](_0xd99579(0x119)),'role':_0x50ee52,'profile':_0x2cc071,'alldata':_0x693757,'master_shop':_0x50331c,'language':_0x2ce35b});}catch(_0x197805){console['log'](_0x197805);}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x11b),auth,async(_0x421006,_0x434125)=>{const _0x5012a4=a0_0x4616bf;try{const _0x5720e7=new excelJS[(_0x5012a4(0x128))](),_0x5a61a4=_0x5720e7[_0x5012a4(0xc8)]('Products');return _0x5a61a4[_0x5012a4(0x11e)]=[{'header':_0x5012a4(0xad),'key':_0x5012a4(0x103),'width':0xa},{'header':_0x5012a4(0xa8),'key':_0x5012a4(0xb3),'width':0xa},{'header':'Units','key':_0x5012a4(0xef),'width':0xa},{'header':'Secondary_Units','key':_0x5012a4(0xa7),'width':0xa},{'header':_0x5012a4(0x10b),'key':_0x5012a4(0x155),'width':0xa},{'header':_0x5012a4(0x13a),'key':'ProductCode','width':0xa},{'header':_0x5012a4(0xfb),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0x5012a4(0xe7),'width':0xa},{'header':_0x5012a4(0xb9),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x5012a4(0x11a),'width':0xa},{'header':_0x5012a4(0xa4),'key':'PAlQty','width':0xa},{'header':_0x5012a4(0xf6),'key':_0x5012a4(0xeb),'width':0xa}],_0x434125[_0x5012a4(0x146)](_0x5012a4(0x159),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x434125['setHeader']('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x5720e7[_0x5012a4(0xe0)]['write'](_0x434125)['then'](()=>{_0x434125['status'](0xc8);});}catch(_0x3df385){_0x434125['status'](0x190)[_0x5012a4(0xf8)](_0x3df385);}});const storage1=multer[a0_0x4616bf(0xa3)]({'destination':(_0x3c2aca,_0x3a7181,_0x1e9aba)=>{const _0x2bee4a=a0_0x4616bf;_0x1e9aba(null,_0x2bee4a(0xae));},'filename':(_0x358a26,_0x117d6f,_0x424357)=>{const _0x5a1468=a0_0x4616bf;_0x424357(null,Date['now']()+_0x117d6f[_0x5a1468(0x144)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x5d14(){const _0x5aa194=['canvas','single','Products\x20find_data','height','product_docs','categories\x20data\x20delete\x20successfully','../models/all_models','$product_details.product_stock','errors','PAlQty','/products_export_migrate_file','stock','log','columns','/brands/delete/:id','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','get','/barcode_filter','$product_stock','json','aggregate','/products/categories','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Workbook','/products/brands','edit\x20Product\x20master','/categories/delete/:id','Hindi','/brands/:id','$category','brand','Arabic','add_product','/units/:id','master','base64','\x20categories\x20is\x20add\x20successfully','success','18423CXpYoF','/print_barcode','save','Primary_Code','/barcode_data','exceljs','Spanish','Products\x20warehouse_data','public/Migration/','body','barcode\x20Product\x20master','product\x20update\x20successfully','product_details.product_name','originalname','user','setHeader','min','SheetNames','products','Router','\x20unit\x20is\x20add\x20successfully','CODE128','long','Portuguese\x20(BR)','4RZYLlu','Sheets','Enabled','/print_barcode_single/:id','category','Secondary_Units','MaxperUnits','defaultProduct.avif','/view/:id','../middleware/auth','Content-Type','German','/filter_product','/products/units','/products/view','bind','numeric','4660548napigZ','/units/delete/:id','../public/language/languages.json','676054HQsWng','$secondary_unit','filename','diskStorage','Maximum_Stocks','Portuguese','maxProdPerUnit','PSecondaryUnits','Brands','_id','flash','11YqvjDM','language','Product_Name','public/Migration','product_stock','\x20brand\x20is\x20add\x20successfully','render','file','PBrands','data','width','categ','findByIdAndUpdate','findById','Category','/categories/:id','exports','English\x20(US)','secondary_code','params','5030glfZRP','Products\x20master','2067075TbEYHZ','maxStocks','/print_barcode_filter_search/','toBuffer','barcode\x20user_id','/products_import_migrate_file','$brand','addWorksheet','findOne','$product_category','primary_code','express','\x20<>\x20','findByIdAndDelete','Raw\x20Materials','message','categories_edit','migrate_product_fule','Product_Code','3594500iAjFIB','prod_categ','email','brands','unit','/barcode/:id','Units','redirect','/view/add_products','name','/print_barcode_filter/','$_id','xlsx','toString','brand\x20data\x20delete\x20successfully','readFile','$product_details','16MvcRkQ','push','ProductCode','find','Finished\x20Goods','units','Prod_Cat','unit\x20data\x20update\x20successfully','end','utils','PUnits','English','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20added\x20successfully','/units','post','/categories','Products_category','24445BwGuqw','send','product_category','36iLqhCS','Secondary_Code','Arabic\x20(ae)','product\x20add\x20successfully','2655708VQQPBK','brand\x20data\x20update\x20successfully','Chinese','length','$product_details.product_name','PName','secondary_unit','/brands','/select_data','/view','French','Alert_QTY','product_code','max_number_per_units','alertquantity','addPage','\x20Edit\x20Successfully','image','categories'];a0_0x5d14=function(){return _0x5aa194;};return a0_0x5d14();}router[a0_0x4616bf(0xf4)](a0_0x4616bf(0xc6),auth,uploadMigrate[a0_0x4616bf(0x112)](a0_0x4616bf(0xd2)),async(_0x14a498,_0x1cbc5a)=>{const _0x3649d9=a0_0x4616bf,_0x3b6d8c=_0x14a498[_0x3649d9(0xb2)]['filename'],_0x2e7354=await xlsx[_0x3649d9(0xe3)](_0x3649d9(0x13f)+_0x3b6d8c);let _0x2953a1=_0x2e7354[_0x3649d9(0x148)],_0x1e5315=xlsx[_0x3649d9(0xee)]['sheet_to_json'](_0x2e7354[_0x3649d9(0x150)][_0x2953a1[0x0]]);for(const _0x160195 of _0x1e5315){const _0x989c2e=_0x160195[_0x3649d9(0xad)],_0x591336=_0x160195[_0x3649d9(0xa8)],_0x34e324=_0x160195[_0x3649d9(0xda)],_0x4c8ea4=_0x160195[_0x3649d9(0x154)],_0x36ae60=_0x160195[_0x3649d9(0xd3)],_0x4d1aa6=_0x160195[_0x3649d9(0xb9)],_0x9ab174=_0x160195[_0x3649d9(0x109)],_0x126646=_0x160195['Primary_Code'],_0x258c92=_0x160195[_0x3649d9(0xfb)],_0x5820bb=_0x160195['Maximum_Stocks'],_0x1f0647=_0x160195[_0x3649d9(0x10b)],_0x3c487f=_0x160195['Products_category'];try{let _0x2466a=await categories[_0x3649d9(0xc9)]({'name':_0x4d1aa6});if(!_0x2466a){const _0x161647=new categories({'name':_0x4d1aa6,'products':'0'});_0x2466a=await _0x161647[_0x3649d9(0x139)]();}let _0x3f3e10=await brands[_0x3649d9(0xc9)]({'name':_0x591336});if(!_0x3f3e10){const _0x4ebd66=new brands({'name':_0x591336,'products':'0'});_0x3f3e10=await _0x4ebd66[_0x3649d9(0x139)]();}let _0x1d3ada=await units[_0x3649d9(0xc9)]({'name':_0x34e324,'secondary_unit':_0x4c8ea4});if(!_0x1d3ada){const _0x3b1868=new units({'name':_0x34e324,'secondary_unit':_0x4c8ea4,'products':'0'});_0x1d3ada=await _0x3b1868[_0x3649d9(0x139)]();}const _0x77d835=await product['find']({'name':_0x989c2e,'category':_0x2466a['name'],'brand':_0x3f3e10[_0x3649d9(0xdd)],'secondary_unit':_0x1d3ada[_0x3649d9(0x104)],'product_code':_0x36ae60});console[_0x3649d9(0x11d)](_0x77d835['length']+_0x3649d9(0xcd)+_0x2466a[_0x3649d9(0xdd)]+_0x3649d9(0xcd)+_0x3f3e10[_0x3649d9(0xdd)]+_0x3649d9(0xcd)+_0x1d3ada[_0x3649d9(0x104)]+_0x3649d9(0xcd)+_0x36ae60+_0x3649d9(0xcd)+_0x989c2e);if(_0x77d835[_0x3649d9(0x101)]===0x0){const _0xe9c7fe=new product({'image':_0x3649d9(0x156),'name':_0x989c2e,'category':_0x2466a[_0x3649d9(0xdd)],'brand':_0x3f3e10[_0x3649d9(0xdd)],'unit':_0x1d3ada[_0x3649d9(0xdd)],'alertquantity':_0x9ab174,'product_code':_0x36ae60,'secondary_unit':_0x1d3ada['secondary_unit'],'primary_code':_0x126646,'secondary_code':_0x258c92,'maxStocks':_0x5820bb,'maxProdPerUnit':_0x1f0647,'product_category':_0x3c487f}),_0x13cfce=await _0xe9c7fe['save']();_0x2466a['products']=parseInt(_0x2466a[_0x3649d9(0x149)])+0x1,await _0x2466a['save'](),_0x3f3e10['products']=parseInt(_0x3f3e10['products'])+0x1,await _0x3f3e10[_0x3649d9(0x139)](),_0x1d3ada[_0x3649d9(0x149)]=parseInt(_0x1d3ada[_0x3649d9(0x149)])+0x1,await _0x1d3ada[_0x3649d9(0x139)](),_0x14a498[_0x3649d9(0xaa)](_0x3649d9(0x136),_0x989c2e+_0x3649d9(0xf2));}else{console[_0x3649d9(0x11d)](_0x77d835[0x0]);const _0x25125f=_0x77d835[0x0];_0x25125f[_0x3649d9(0x153)]=_0x2466a[_0x3649d9(0xdd)],_0x25125f[_0x3649d9(0x12f)]=_0x3f3e10[_0x3649d9(0xdd)],_0x25125f[_0x3649d9(0xd8)]=_0x1d3ada[_0x3649d9(0xdd)],_0x25125f[_0x3649d9(0x10c)]=_0x9ab174,_0x25125f[_0x3649d9(0x10a)]=_0x36ae60,_0x25125f[_0x3649d9(0x104)]=_0x1d3ada[_0x3649d9(0x104)],_0x25125f['primary_code']=_0x126646,_0x25125f['secondary_code']=_0x258c92,_0x25125f[_0x3649d9(0xc2)]=_0x5820bb,_0x25125f['maxProdPerUnit']=_0x1f0647,_0x25125f['product_category']=_0x3c487f;const _0xfb218a=await _0x25125f[_0x3649d9(0x139)]();_0x14a498[_0x3649d9(0xaa)](_0x3649d9(0x136),_0xfb218a[_0x3649d9(0xdd)]+_0x3649d9(0x10e));}}catch(_0xf40441){_0x1cbc5a['status'](0x1f4)[_0x3649d9(0x124)]({'proderror':_0xf40441[_0x3649d9(0xd0)],'aproduct':_0x989c2e});}}_0x1cbc5a['redirect'](_0x3649d9(0x15d));}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x106),auth,async(_0x217850,_0xe6d349)=>{const _0x51ed5a=a0_0x4616bf;try{console[_0x51ed5a(0x11d)](_0x217850[_0x51ed5a(0x140)]);const {data_cateory:_0x33e910,datachoose:_0x1207b6}=_0x217850[_0x51ed5a(0x140)];var _0xf40d94;if(_0x1207b6==_0x51ed5a(0xd5))_0xf40d94=await product['aggregate']([{'$group':{'_id':_0x51ed5a(0xca)}}]);else{if(_0x1207b6==_0x51ed5a(0xd7))_0xf40d94=await product[_0x51ed5a(0x125)]([{'$match':{'product_category':_0x33e910}},{'$group':{'_id':_0x51ed5a(0xc7)}}]);else _0x1207b6==_0x51ed5a(0xb6)&&(_0xf40d94=await product[_0x51ed5a(0x125)]([{'$match':{'product_category':_0x33e910}},{'$group':{'_id':'$category'}}]));}_0xe6d349[_0x51ed5a(0x124)](_0xf40d94);}catch(_0x547e4){_0xe6d349[_0x51ed5a(0x124)]({'message':_0x547e4['message']});}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x15b),auth,async(_0x3510db,_0x315d0b)=>{const _0xe8456a=a0_0x4616bf;try{const {data_choosing:_0x2da92c,data_selected:_0x42433c}=_0x3510db[_0xe8456a(0x140)];var _0x4a277e;if(_0x2da92c=='prod_categ')_0x4a277e=await product[_0xe8456a(0x125)]([{'$match':{'product_category':_0x42433c}}]);else{if(_0x2da92c==_0xe8456a(0xd7))_0x4a277e=await product['aggregate']([{'$match':{'brand':_0x42433c}}]);else _0x2da92c==_0xe8456a(0xb6)&&(_0x4a277e=await product[_0xe8456a(0x125)]([{'$match':{'category':_0x42433c}}]));}_0x315d0b['json'](_0x4a277e);}catch(_0x397613){_0x315d0b[_0xe8456a(0x124)]({'message':_0x397613[_0xe8456a(0xd0)]});}}),router[a0_0x4616bf(0x121)](a0_0x4616bf(0x138),auth,async(_0x2a1c4e,_0x476359)=>{const _0x21b3a1=a0_0x4616bf,_0x4c368b=_0x2a1c4e['user'],_0x5208be=await profile[_0x21b3a1(0xc9)]({'email':_0x4c368b[_0x21b3a1(0xd6)]}),_0xbb1a29=await master_shop[_0x21b3a1(0xe8)](),_0x8ffde3=await product[_0x21b3a1(0xe8)]();if(_0xbb1a29[0x0][_0x21b3a1(0xac)]=='English\x20(US)')var _0x4fcaa4=users[_0x21b3a1(0xf0)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]=='Hindi')var _0x4fcaa4=users[_0x21b3a1(0x12c)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]==_0x21b3a1(0x15a))var _0x4fcaa4=users[_0x21b3a1(0x15a)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]==_0x21b3a1(0x13d))var _0x4fcaa4=users[_0x21b3a1(0x13d)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]==_0x21b3a1(0x108))var _0x4fcaa4=users[_0x21b3a1(0x108)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]==_0x21b3a1(0x14e))var _0x4fcaa4=users[_0x21b3a1(0xa5)];else{if(_0xbb1a29[0x0][_0x21b3a1(0xac)]==_0x21b3a1(0x100))var _0x4fcaa4=users[_0x21b3a1(0x100)];else{if(_0xbb1a29[0x0]['language']==_0x21b3a1(0xfc))var _0x4fcaa4=users['Arabic'];}}}}}}}_0x476359[_0x21b3a1(0xb1)]('product_barcode_products',{'success':_0x2a1c4e['flash'](_0x21b3a1(0x136)),'errors':_0x2a1c4e[_0x21b3a1(0xaa)]('errors'),'role':_0x4c368b,'profile':_0x5208be,'products':_0x8ffde3,'master_shop':_0xbb1a29,'language':_0x4fcaa4});}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x13b),auth,async(_0x1e4e1e,_0x2b8ee5)=>{const _0x370be6=a0_0x4616bf,_0x33d8ac=await product[_0x370be6(0xe8)]();_0x2b8ee5[_0x370be6(0x124)]({'data':_0x33d8ac});}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x122),auth,async(_0x281264,_0x215970)=>{const _0x4b17e3=a0_0x4616bf;try{const {dataProdCat:_0x110120,dataProdIdentity:_0x2198b2}=_0x281264[_0x4b17e3(0x140)];var _0x5677e8;switch(_0x110120){case'fg':switch(_0x2198b2){case _0x4b17e3(0xa8):_0x5677e8=await product[_0x4b17e3(0x125)]([{'$match':{'product_category':_0x4b17e3(0xe9)}},{'$group':{'_id':_0x4b17e3(0xc7)}},{'$project':{'brand':'$_id'}}]);break;case _0x4b17e3(0xb9):_0x5677e8=await product[_0x4b17e3(0x125)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x4b17e3(0x12e)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x2198b2){case _0x4b17e3(0xa8):_0x5677e8=await product[_0x4b17e3(0x125)]([{'$match':{'product_category':_0x4b17e3(0xcf)}},{'$group':{'_id':_0x4b17e3(0xc7)}},{'$project':{'brand':_0x4b17e3(0xdf)}}]);break;case'Category':_0x5677e8=await product[_0x4b17e3(0x125)]([{'$match':{'product_category':_0x4b17e3(0xcf)}},{'$group':{'_id':_0x4b17e3(0x12e)}},{'$project':{'category':_0x4b17e3(0xdf)}}]);break;}break;}_0x215970[_0x4b17e3(0x124)](_0x5677e8);}catch(_0x465eba){_0x215970[_0x4b17e3(0x124)]({'message':_0x465eba[_0x4b17e3(0xd0)]});}}),router['post'](a0_0x4616bf(0xde),auth,async(_0x1c663e,_0x55b2c8)=>{const _0x1a2805=a0_0x4616bf;try{console[_0x1a2805(0x11d)](_0x1c663e['body']);const {prod_cat:_0x22ad6b,identity:_0x361817,valueData:_0x43abfe,typeofbarcode:_0x335d69}=_0x1c663e['body'];let _0x1fc66c;switch(_0x22ad6b){case'fg':if(_0x361817==_0x1a2805(0xa8))_0x1fc66c=await product[_0x1a2805(0x125)]([{'$match':{'product_category':_0x1a2805(0xe9),'brand':_0x43abfe}}]);else _0x361817==_0x1a2805(0xb9)&&(_0x1fc66c=await product['aggregate']([{'$match':{'product_category':_0x1a2805(0xe9),'category':_0x43abfe}}]));break;case'rm':if(_0x361817==_0x1a2805(0xa8))_0x1fc66c=await product[_0x1a2805(0x125)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x43abfe}}]);else _0x361817=='Category'&&(_0x1fc66c=await product[_0x1a2805(0x125)]([{'$match':{'product_category':_0x1a2805(0xcf),'category':_0x43abfe}}]));break;}const _0x2e106f=_0x4b7246=>_0x4b7246*0x48,_0x46afa0={'width':0x3,'height':0x1},_0x529a6a=new PDFDocument({'margin':_0x2e106f(0.75),'size':[_0x2e106f(_0x46afa0[_0x1a2805(0xb5)]),_0x2e106f(_0x46afa0[_0x1a2805(0x114)])],'bufferPages':!![]}),_0x199d8f=_0x1fc66c[_0x1a2805(0x101)];for(let _0x4dba55=0x0;_0x4dba55<=_0x199d8f;_0x4dba55++){if(_0x4dba55!=_0x199d8f){const _0x45b3ab=_0x1fc66c[_0x4dba55]['name'],_0x3c295e=_0x1fc66c[_0x4dba55][_0x1a2805(0xcb)],_0x15085b=_0x1fc66c[_0x4dba55][_0x1a2805(0xbd)],_0x7b47e0=_0x1fc66c[_0x4dba55]['product_code'];var _0x1c68cb;switch(_0x335d69){case'1':_0x1c68cb=_0x3c295e;break;case'2':_0x1c68cb=_0x15085b;break;case'3':_0x1c68cb=_0x7b47e0;break;}const _0x22b087={'width':0xd2,'height':0x64},_0x52f595={'width':_0x2e106f(_0x46afa0[_0x1a2805(0xb5)]),'height':_0x2e106f(_0x46afa0[_0x1a2805(0x114)])},_0x1f12e0=new Canvas();JsBarcode(_0x1f12e0,_0x1c68cb,{'format':_0x1a2805(0x14c),'height':_0x22b087['height'],'displayValue':!![],'text':_0x1c68cb});const _0x2d4718=_0x1f12e0[_0x1a2805(0xc4)](),_0x395e5c=_0x52f595[_0x1a2805(0xb5)]/_0x22b087[_0x1a2805(0xb5)],_0x199f99=_0x52f595[_0x1a2805(0x114)]/_0x22b087[_0x1a2805(0x114)],_0x3f6591=Math[_0x1a2805(0x147)](_0x395e5c,_0x199f99),_0x18ba87=_0x22b087[_0x1a2805(0xb5)]*_0x3f6591,_0x2cbe9a=_0x22b087[_0x1a2805(0x114)]*_0x3f6591,_0x547a91=(_0x52f595[_0x1a2805(0xb5)]-_0x18ba87)/0x2,_0xdc0f06=(_0x52f595[_0x1a2805(0x114)]-_0x2cbe9a)/0x2;_0x529a6a['image'](_0x2d4718,_0x547a91,_0xdc0f06,{'width':_0x18ba87,'height':_0x2cbe9a}),_0x4dba55!=_0x199d8f&&_0x529a6a[_0x1a2805(0x10d)]();}}const _0x3b2eb5=[];_0x529a6a['on']('data',_0x3b2eb5[_0x1a2805(0xe6)][_0x1a2805(0x15e)](_0x3b2eb5)),_0x529a6a['on'](_0x1a2805(0xed),()=>{const _0x546960=_0x1a2805,_0x4769c8=Buffer['concat'](_0x3b2eb5),_0x285c47=_0x4769c8['toString'](_0x546960(0x134));_0x55b2c8[_0x546960(0x124)]({'pdfContent':_0x285c47});}),_0x529a6a[_0x1a2805(0xed)]();}catch(_0x27812e){_0x55b2c8[_0x1a2805(0x124)]({'message':_0x27812e[_0x1a2805(0xd0)]});}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0xc3),auth,async(_0x26bb93,_0x38f807)=>{const _0x2dddb0=a0_0x4616bf;try{console[_0x2dddb0(0x11d)](_0x26bb93[_0x2dddb0(0x140)]);const {prod_cat:_0x4fd616,identity:_0x9b5f5e,valueData:_0x15f0e5}=_0x26bb93[_0x2dddb0(0x140)];let _0x127631;switch(_0x4fd616){case'fg':if(_0x9b5f5e=='Brands')_0x127631=await product['aggregate']([{'$match':{'product_category':_0x2dddb0(0xe9),'brand':_0x15f0e5}}]);else _0x9b5f5e==_0x2dddb0(0xb9)&&(_0x127631=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','category':_0x15f0e5}}]));break;case'rm':if(_0x9b5f5e==_0x2dddb0(0xa8))_0x127631=await product[_0x2dddb0(0x125)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x15f0e5}}]);else _0x9b5f5e==_0x2dddb0(0xb9)&&(_0x127631=await product[_0x2dddb0(0x125)]([{'$match':{'product_category':_0x2dddb0(0xcf),'category':_0x15f0e5}}]));break;}_0x38f807[_0x2dddb0(0x124)](_0x127631);}catch(_0x4111f1){_0x38f807['json']({'message':_0x4111f1[_0x2dddb0(0xd0)]});}}),router[a0_0x4616bf(0xf4)](a0_0x4616bf(0x152),auth,async(_0x25ea77,_0x38f2ba)=>{const _0x718018=a0_0x4616bf;try{const _0x2142b0=_0x25ea77['params']['id'],{copies:_0x1db583,typeofbarcode:_0x59b148}=_0x25ea77[_0x718018(0x140)];var _0x2344c0=await product[_0x718018(0xb8)](_0x2142b0);const _0x73d41a=_0x2a660d=>_0x2a660d*0x48,_0x23cbe5={'width':0x3,'height':0x1},_0x2d3cda=new PDFDocument({'margin':_0x73d41a(0.75),'size':[_0x73d41a(_0x23cbe5[_0x718018(0xb5)]),_0x73d41a(_0x23cbe5[_0x718018(0x114)])],'bufferPages':!![]}),_0x4a1089=_0x1db583,_0x331505=_0x2344c0[_0x718018(0xdd)],_0x116e22=_0x2344c0['primary_code'],_0x4da8ae=_0x2344c0[_0x718018(0xbd)],_0x474bf5=_0x2344c0[_0x718018(0x10a)];let _0x332b0d;switch(_0x59b148){case'1':_0x332b0d=_0x116e22;break;case'2':_0x332b0d=_0x4da8ae;break;case'3':_0x332b0d=_0x474bf5;break;}const _0x4dfed6={'width':0xd2,'height':0x64},_0x1f3fa6={'width':_0x73d41a(_0x23cbe5[_0x718018(0xb5)]),'height':_0x73d41a(_0x23cbe5[_0x718018(0x114)])};for(let _0x368701=0x1;_0x368701<=_0x4a1089;_0x368701++){const _0x34b8fe=new Canvas();JsBarcode(_0x34b8fe,_0x332b0d,{'format':_0x718018(0x14c),'height':_0x4dfed6[_0x718018(0x114)],'displayValue':!![],'text':_0x332b0d});const _0xf4a405=_0x34b8fe[_0x718018(0xc4)](),_0x43bde6=_0x1f3fa6['width']/_0x4dfed6[_0x718018(0xb5)],_0x26beb9=_0x1f3fa6[_0x718018(0x114)]/_0x4dfed6[_0x718018(0x114)],_0x1e6e20=Math[_0x718018(0x147)](_0x43bde6,_0x26beb9),_0x47c86d=_0x4dfed6['width']*_0x1e6e20,_0x33bb10=_0x4dfed6[_0x718018(0x114)]*_0x1e6e20,_0x5a8f4=(_0x1f3fa6['width']-_0x47c86d)/0x2,_0x9be90=(_0x1f3fa6['height']-_0x33bb10)/0x2;_0x2d3cda[_0x718018(0x10f)](_0xf4a405,_0x5a8f4,_0x9be90,{'width':_0x47c86d,'height':_0x33bb10}),_0x368701!=_0x4a1089&&_0x2d3cda['addPage']();}const _0x3e6e67=[];_0x2d3cda['on'](_0x718018(0xb4),_0x3e6e67[_0x718018(0xe6)][_0x718018(0x15e)](_0x3e6e67)),_0x2d3cda['on']('end',()=>{const _0x5b7cd1=_0x718018,_0xa06688=Buffer['concat'](_0x3e6e67),_0x34110d=_0xa06688[_0x5b7cd1(0xe1)]('base64');_0x38f2ba[_0x5b7cd1(0x124)]({'pdfContent':_0x34110d});}),_0x2d3cda['end']();}catch(_0x427c03){_0x38f2ba[_0x718018(0x124)]({'message':_0x427c03[_0x718018(0xd0)]});}}),module[a0_0x4616bf(0xbb)]=router;