const a0_0x5a47d5=a0_0x536b;(function(_0x2308fc,_0x441717){const _0x13411a=a0_0x536b,_0x5c7417=_0x2308fc();while(!![]){try{const _0x1c9a27=-parseInt(_0x13411a(0x19f))/0x1*(-parseInt(_0x13411a(0x190))/0x2)+-parseInt(_0x13411a(0x18b))/0x3+-parseInt(_0x13411a(0x160))/0x4+parseInt(_0x13411a(0x179))/0x5*(-parseInt(_0x13411a(0x126))/0x6)+-parseInt(_0x13411a(0x1ad))/0x7+parseInt(_0x13411a(0x145))/0x8+parseInt(_0x13411a(0x1a6))/0x9*(parseInt(_0x13411a(0x137))/0xa);if(_0x1c9a27===_0x441717)break;else _0x5c7417['push'](_0x5c7417['shift']());}catch(_0x473240){_0x5c7417['push'](_0x5c7417['shift']());}}}(a0_0x72ad,0xc49cc));const express=require('express'),res=require(a0_0x5a47d5(0x148)),app=express(),router=express[a0_0x5a47d5(0x180)](),multer=require(a0_0x5a47d5(0x152)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5a47d5(0x191)),auth=require('../middleware/auth'),users=require(a0_0x5a47d5(0x1a7)),excelJS=require(a0_0x5a47d5(0x169)),xlsx=require(a0_0x5a47d5(0x1a9));router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x14d),auth,async(_0x1e38d3,_0x3b331a)=>{const _0x1cf70b=a0_0x5a47d5;try{const {username:_0x3f173d,email:_0x329381,role:_0x15387a}=_0x1e38d3['user'],_0x49b24e=_0x1e38d3[_0x1cf70b(0x18c)],_0x4cd82d=await profile[_0x1cf70b(0x1bd)]({'email':_0x49b24e[_0x1cf70b(0x127)]}),_0x4dd82c=await master_shop[_0x1cf70b(0x13d)]();console[_0x1cf70b(0x199)](_0x1cf70b(0x12e),_0x4dd82c);const _0x45626e=await categories[_0x1cf70b(0x13d)]();if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x17f))var _0x52542d=users[_0x1cf70b(0x17a)];else{if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x184))var _0x52542d=users['Hindi'];else{if(_0x4dd82c[0x0]['language']==_0x1cf70b(0x123))var _0x52542d=users[_0x1cf70b(0x123)];else{if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x168))var _0x52542d=users['Spanish'];else{if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x156))var _0x52542d=users[_0x1cf70b(0x156)];else{if(_0x4dd82c[0x0]['language']==_0x1cf70b(0x140))var _0x52542d=users[_0x1cf70b(0x135)];else{if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x1a4))var _0x52542d=users[_0x1cf70b(0x1a4)];else{if(_0x4dd82c[0x0][_0x1cf70b(0x1c1)]==_0x1cf70b(0x175))var _0x52542d=users[_0x1cf70b(0x1c3)];}}}}}}}_0x3b331a[_0x1cf70b(0x1b9)](_0x1cf70b(0x16b),{'success':_0x1e38d3['flash'](_0x1cf70b(0x158)),'errors':_0x1e38d3['flash'](_0x1cf70b(0x13e)),'role':_0x49b24e,'profile':_0x4cd82d,'user':_0x45626e,'master_shop':_0x4dd82c,'language':_0x52542d});}catch(_0x525c75){console[_0x1cf70b(0x199)](_0x525c75);}}),router['post'](a0_0x5a47d5(0x14d),auth,async(_0x3c4344,_0x4db753)=>{const _0x193d94=a0_0x5a47d5;try{const {name:_0x7dc8ff,products:_0xe4f0f3}=_0x3c4344[_0x193d94(0x173)],_0x264d8a=new categories({'name':_0x7dc8ff,'products':_0xe4f0f3}),_0x58f245=await categories[_0x193d94(0x1bd)]({'name':_0x7dc8ff});_0x58f245?_0x3c4344[_0x193d94(0x141)](_0x193d94(0x13e),_0x7dc8ff+_0x193d94(0x14c)):_0x3c4344['flash']('success',_0x7dc8ff+_0x193d94(0x14a));const _0x1c6929=await _0x264d8a['save']();_0x4db753[_0x193d94(0x1a5)](_0x193d94(0x15a));}catch(_0x543ba4){console[_0x193d94(0x199)](_0x543ba4);}}),router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x19a),auth,async(_0x496553,_0x37da89)=>{const _0x5ae318=a0_0x5a47d5;try{const {username:_0x4d2c9e,email:_0x235c95,role:_0x21fe7e}=_0x496553[_0x5ae318(0x18c)],_0x1b1e26=_0x496553[_0x5ae318(0x18c)],_0x3be341=await profile[_0x5ae318(0x1bd)]({'email':_0x1b1e26[_0x5ae318(0x127)]}),_0x357326=await master_shop['find']();console[_0x5ae318(0x199)](_0x5ae318(0x12e),_0x357326);const _0x152d1d=_0x496553[_0x5ae318(0x17b)]['id'];console[_0x5ae318(0x199)](_0x152d1d);const _0x3780c7=await categories[_0x5ae318(0x147)](_0x152d1d);if(_0x357326[0x0][_0x5ae318(0x1c1)]==_0x5ae318(0x17f))var _0x305d84=users[_0x5ae318(0x17a)];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]=='Hindi')var _0x305d84=users[_0x5ae318(0x184)];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]=='German')var _0x305d84=users['German'];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]==_0x5ae318(0x168))var _0x305d84=users[_0x5ae318(0x168)];else{if(_0x357326[0x0]['language']==_0x5ae318(0x156))var _0x305d84=users[_0x5ae318(0x156)];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]==_0x5ae318(0x140))var _0x305d84=users[_0x5ae318(0x135)];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]==_0x5ae318(0x1a4))var _0x305d84=users[_0x5ae318(0x1a4)];else{if(_0x357326[0x0][_0x5ae318(0x1c1)]==_0x5ae318(0x175))var _0x305d84=users[_0x5ae318(0x1c3)];}}}}}}}_0x37da89[_0x5ae318(0x1b9)](_0x5ae318(0x16b),{'success':_0x496553[_0x5ae318(0x141)]('success'),'errors':_0x496553[_0x5ae318(0x141)]('errors'),'role':_0x1b1e26,'profile':_0x3be341,'master_shop':_0x357326,'user':_0x3780c7,'language':_0x305d84});}catch(_0x455120){console['log'](_0x455120);}}),router['post'](a0_0x5a47d5(0x19a),auth,async(_0x37a125,_0x25d543)=>{const _0x50574f=a0_0x5a47d5;try{const _0x482261=_0x37a125['params']['id'],_0x3714ed=await categories[_0x50574f(0x1b5)](_0x482261,_0x37a125[_0x50574f(0x173)]);_0x37a125[_0x50574f(0x141)]('success',''+users['categories_edit']),_0x25d543['redirect'](_0x50574f(0x15a));}catch(_0x2e3303){console[_0x50574f(0x199)](_0x2e3303);}}),router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x13b),auth,async(_0x357129,_0x4507cb)=>{const _0x167dfb=a0_0x5a47d5;try{const _0x3123cb=_0x357129[_0x167dfb(0x17b)]['id'],_0x55673c=await categories['findByIdAndDelete'](_0x3123cb);_0x357129[_0x167dfb(0x141)](_0x167dfb(0x158),'categories\x20data\x20delete\x20successfully'),_0x4507cb[_0x167dfb(0x1a5)](_0x167dfb(0x15a));}catch(_0x4da5d4){console[_0x167dfb(0x199)](_0x4da5d4);}}),router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x12a),auth,async(_0x25d684,_0x23c90a)=>{const _0x58e215=a0_0x5a47d5;try{const {username:_0x5a56a0,email:_0x23579f,role:_0x548494}=_0x25d684['user'],_0x8d0f94=_0x25d684['user'],_0x4fd654=await profile[_0x58e215(0x1bd)]({'email':_0x8d0f94[_0x58e215(0x127)]}),_0x42db06=await master_shop['find']();console['log'](_0x58e215(0x12e),_0x42db06);const _0x991015=await brands[_0x58e215(0x13d)]();if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x17f))var _0x3615d8=users[_0x58e215(0x17a)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x184))var _0x3615d8=users[_0x58e215(0x184)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x123))var _0x3615d8=users[_0x58e215(0x123)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x168))var _0x3615d8=users[_0x58e215(0x168)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]=='French')var _0x3615d8=users[_0x58e215(0x156)];else{if(_0x42db06[0x0]['language']=='Portuguese\x20(BR)')var _0x3615d8=users[_0x58e215(0x135)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x1a4))var _0x3615d8=users[_0x58e215(0x1a4)];else{if(_0x42db06[0x0][_0x58e215(0x1c1)]==_0x58e215(0x175))var _0x3615d8=users[_0x58e215(0x1c3)];}}}}}}}_0x23c90a[_0x58e215(0x1b9)]('brands',{'success':_0x25d684[_0x58e215(0x141)](_0x58e215(0x158)),'errors':_0x25d684[_0x58e215(0x141)](_0x58e215(0x13e)),'role':_0x8d0f94,'profile':_0x4fd654,'master_shop':_0x42db06,'user':_0x991015,'language':_0x3615d8});}catch(_0xb185fe){console['log'](_0xb185fe);}}),router[a0_0x5a47d5(0x161)](a0_0x5a47d5(0x12a),auth,async(_0x29f927,_0x132350)=>{const _0x48eb6d=a0_0x5a47d5;try{const {name:_0x2b725d,products:_0x39ad73}=_0x29f927[_0x48eb6d(0x173)],_0x2c46d2=new brands({'name':_0x2b725d,'products':_0x39ad73}),_0x3fec5e=await brands['findOne']({'name':_0x2b725d});_0x3fec5e?_0x29f927[_0x48eb6d(0x141)]('errors',_0x2b725d+_0x48eb6d(0x133)):_0x29f927[_0x48eb6d(0x141)]('success',_0x2b725d+_0x48eb6d(0x15d));const _0x5b6f2b=await _0x2c46d2[_0x48eb6d(0x1b4)]();_0x132350[_0x48eb6d(0x1a5)](_0x48eb6d(0x129));}catch(_0x14687b){console['log'](_0x14687b);}}),router['get'](a0_0x5a47d5(0x177),auth,async(_0x205d16,_0x383a0f)=>{const _0x409138=a0_0x5a47d5;try{const {username:_0x213271,email:_0xa1bffa,role:_0x3de1c8}=_0x205d16[_0x409138(0x18c)],_0x494f8e=_0x205d16[_0x409138(0x18c)],_0x3d222d=await profile[_0x409138(0x1bd)]({'email':_0x494f8e[_0x409138(0x127)]}),_0x5c148a=await master_shop[_0x409138(0x13d)]();console[_0x409138(0x199)](_0x409138(0x12e),_0x5c148a);const _0x5cc88b=_0x205d16[_0x409138(0x17b)]['id'];console[_0x409138(0x199)](_0x5cc88b);const _0x2b7bfc=await brands[_0x409138(0x147)](_0x5cc88b);if(_0x5c148a[0x0]['language']==_0x409138(0x17f))var _0x1e2b3f=users['English'];else{if(_0x5c148a[0x0]['language']==_0x409138(0x184))var _0x1e2b3f=users[_0x409138(0x184)];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]==_0x409138(0x123))var _0x1e2b3f=users[_0x409138(0x123)];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]==_0x409138(0x168))var _0x1e2b3f=users[_0x409138(0x168)];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]==_0x409138(0x156))var _0x1e2b3f=users['French'];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]==_0x409138(0x140))var _0x1e2b3f=users[_0x409138(0x135)];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]=='Chinese')var _0x1e2b3f=users[_0x409138(0x1a4)];else{if(_0x5c148a[0x0][_0x409138(0x1c1)]=='Arabic\x20(ae)')var _0x1e2b3f=users[_0x409138(0x1c3)];}}}}}}}_0x383a0f['render'](_0x409138(0x185),{'success':_0x205d16['flash'](_0x409138(0x158)),'errors':_0x205d16['flash'](_0x409138(0x13e)),'role':_0x494f8e,'profile':_0x3d222d,'master_shop':_0x5c148a,'user':_0x2b7bfc,'language':_0x1e2b3f});}catch(_0x44da87){console[_0x409138(0x199)](_0x44da87);}}),router[a0_0x5a47d5(0x161)]('/brands/:id',auth,async(_0x4abf80,_0x58b2f0)=>{const _0x17fcd3=a0_0x5a47d5;try{const _0x16e5cb=_0x4abf80[_0x17fcd3(0x17b)]['id'],_0xcd7750=await brands[_0x17fcd3(0x1b5)](_0x16e5cb,_0x4abf80[_0x17fcd3(0x173)]);_0x4abf80[_0x17fcd3(0x141)](_0x17fcd3(0x158),_0x17fcd3(0x143)),_0x58b2f0[_0x17fcd3(0x1a5)](_0x17fcd3(0x129));}catch(_0x5222ad){console['log'](_0x5222ad);}}),router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x1b3),auth,async(_0x267049,_0x43311a)=>{const _0x4202b4=a0_0x5a47d5;try{const _0x17fbd0=_0x267049[_0x4202b4(0x17b)]['id'],_0x3349e5=await brands['findByIdAndDelete'](_0x17fbd0);_0x267049[_0x4202b4(0x141)](_0x4202b4(0x158),_0x4202b4(0x17d)),_0x43311a[_0x4202b4(0x1a5)](_0x4202b4(0x129));}catch(_0x325cac){console['log'](_0x325cac);}}),router[a0_0x5a47d5(0x124)]('/units',auth,async(_0x1110e0,_0x26b3fd)=>{const _0x7b8128=a0_0x5a47d5;try{const {username:_0x18c2e7,email:_0x16d133,role:_0x4c6451}=_0x1110e0['user'],_0x7fbf6c=_0x1110e0['user'],_0x5b06bf=await profile[_0x7b8128(0x1bd)]({'email':_0x7fbf6c['email']}),_0x116f26=await master_shop[_0x7b8128(0x13d)]();console[_0x7b8128(0x199)]('master',_0x116f26);const _0x53a13d=await units[_0x7b8128(0x13d)]();if(_0x116f26[0x0]['language']==_0x7b8128(0x17f))var _0x3e2aa6=users[_0x7b8128(0x17a)];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x184))var _0x3e2aa6=users[_0x7b8128(0x184)];else{if(_0x116f26[0x0]['language']==_0x7b8128(0x123))var _0x3e2aa6=users[_0x7b8128(0x123)];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x168))var _0x3e2aa6=users[_0x7b8128(0x168)];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x156))var _0x3e2aa6=users['French'];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x140))var _0x3e2aa6=users[_0x7b8128(0x135)];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x1a4))var _0x3e2aa6=users[_0x7b8128(0x1a4)];else{if(_0x116f26[0x0][_0x7b8128(0x1c1)]==_0x7b8128(0x175))var _0x3e2aa6=users['Arabic'];}}}}}}}_0x26b3fd[_0x7b8128(0x1b9)](_0x7b8128(0x164),{'success':_0x1110e0['flash'](_0x7b8128(0x158)),'errors':_0x1110e0['flash'](_0x7b8128(0x13e)),'role':_0x7fbf6c,'profile':_0x5b06bf,'master_shop':_0x116f26,'user':_0x53a13d,'language':_0x3e2aa6});}catch(_0x3ace69){console[_0x7b8128(0x199)](_0x3ace69);}}),router[a0_0x5a47d5(0x161)](a0_0x5a47d5(0x15c),auth,async(_0x525c12,_0x434c5c)=>{const _0x19f664=a0_0x5a47d5;try{const {name:_0x23b747,secondary_unit:_0x167ef8,products:_0xca675a}=_0x525c12[_0x19f664(0x173)],_0x439a1e=new units({'name':_0x23b747,'secondary_unit':_0x167ef8,'products':_0xca675a}),_0x3f9f25=await units[_0x19f664(0x1bd)]({'name':_0x23b747});_0x3f9f25?_0x525c12[_0x19f664(0x141)](_0x19f664(0x13e),_0x23b747+_0x19f664(0x14f)):_0x525c12['flash']('success',_0x23b747+_0x19f664(0x17e));const _0x32a909=await _0x439a1e[_0x19f664(0x1b4)]();_0x434c5c[_0x19f664(0x1a5)](_0x19f664(0x182));}catch(_0x450411){console['log'](_0x450411);}}),router['get']('/units/:id',auth,async(_0x2b301a,_0x558b55)=>{const _0x2c5f67=a0_0x5a47d5;try{const {username:_0x5b8d8d,email:_0x6fe2b8,role:_0xdcb5a6}=_0x2b301a['user'],_0x2fd1b8=_0x2b301a[_0x2c5f67(0x18c)],_0x523476=await profile[_0x2c5f67(0x1bd)]({'email':_0x2fd1b8[_0x2c5f67(0x127)]}),_0xe91221=await master_shop['find']();console[_0x2c5f67(0x199)](_0x2c5f67(0x12e),_0xe91221);const _0x1052d8=_0x2b301a['params']['id'],_0x3941d8=await units[_0x2c5f67(0x147)](_0x1052d8);if(_0xe91221[0x0]['language']==_0x2c5f67(0x17f))var _0x1b7f73=users[_0x2c5f67(0x17a)];else{if(_0xe91221[0x0]['language']==_0x2c5f67(0x184))var _0x1b7f73=users[_0x2c5f67(0x184)];else{if(_0xe91221[0x0][_0x2c5f67(0x1c1)]==_0x2c5f67(0x123))var _0x1b7f73=users[_0x2c5f67(0x123)];else{if(_0xe91221[0x0][_0x2c5f67(0x1c1)]==_0x2c5f67(0x168))var _0x1b7f73=users[_0x2c5f67(0x168)];else{if(_0xe91221[0x0][_0x2c5f67(0x1c1)]==_0x2c5f67(0x156))var _0x1b7f73=users[_0x2c5f67(0x156)];else{if(_0xe91221[0x0][_0x2c5f67(0x1c1)]==_0x2c5f67(0x140))var _0x1b7f73=users['Portuguese'];else{if(_0xe91221[0x0][_0x2c5f67(0x1c1)]==_0x2c5f67(0x1a4))var _0x1b7f73=users[_0x2c5f67(0x1a4)];else{if(_0xe91221[0x0]['language']==_0x2c5f67(0x175))var _0x1b7f73=users[_0x2c5f67(0x1c3)];}}}}}}}_0x558b55[_0x2c5f67(0x1b9)](_0x2c5f67(0x164),{'success':_0x2b301a[_0x2c5f67(0x141)](_0x2c5f67(0x158)),'errors':_0x2b301a['flash'](_0x2c5f67(0x13e)),'role':_0x2fd1b8,'profile':_0x523476,'master_shop':_0xe91221,'user':_0x3941d8,'language':_0x1b7f73});}catch(_0x3b8ff5){console[_0x2c5f67(0x199)](_0x3b8ff5);}}),router['post'](a0_0x5a47d5(0x162),auth,async(_0x37ccb1,_0x450873)=>{const _0x4fa185=a0_0x5a47d5;try{const _0x58ca89=_0x37ccb1[_0x4fa185(0x17b)]['id'],_0x4cd6ee=await units['findByIdAndUpdate'](_0x58ca89,_0x37ccb1[_0x4fa185(0x173)]);_0x37ccb1[_0x4fa185(0x141)](_0x4fa185(0x158),'unit\x20data\x20update\x20successfully'),_0x450873[_0x4fa185(0x1a5)](_0x4fa185(0x182));}catch(_0xc39729){console[_0x4fa185(0x199)](_0xc39729);}}),router[a0_0x5a47d5(0x124)]('/units/delete/:id',auth,async(_0x118e11,_0x261c5e)=>{const _0x5e0c8a=a0_0x5a47d5;try{const _0x1ce960=_0x118e11['params']['id'],_0x3f2019=await units[_0x5e0c8a(0x1af)](_0x1ce960);_0x118e11['flash']('success','unit\x20data\x20delete\x20successfully'),_0x261c5e['redirect'](_0x5e0c8a(0x182));}catch(_0x1d5e57){console['log'](_0x1d5e57);}});const storage=multer[a0_0x5a47d5(0x167)]({'destination':(_0x70b18c,_0xf866b2,_0x1b126d)=>{const _0x1bba42=a0_0x5a47d5;_0x1b126d(null,_0x1bba42(0x14b));},'filename':(_0x1807b0,_0x1db86e,_0xfa571)=>{const _0x5182c0=a0_0x5a47d5;_0xfa571(null,Date[_0x5182c0(0x183)]()+_0x1db86e['originalname']);}}),upload=multer({'storage':storage});function a0_0x72ad(){const _0x18eac9=['max_number_per_units','\x20categories\x20is\x20add\x20successfully','public/upload','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/categories','ProductCode','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/select_data','product_docs','multer','originalname','$product_name','Category','French','Units','success','Products\x20warehouse_data','/products/categories','Workbook','/units','\x20brand\x20is\x20add\x20successfully','categ','image','5664400NRpvsc','post','/units/:id','secondary_code','units','add_product','Alert_QTY','diskStorage','Spanish','exceljs','$brand','categories','/products/view','PUnits','product\x20edit','product_code','stock','aggregate','PAlQty','body','Enabled','Arabic\x20(ae)','\x20added\x20successfully','/brands/:id','Products_category','130zkZraZ','English','params','\x20Edit\x20Successfully','brand\x20data\x20delete\x20successfully','\x20unit\x20is\x20add\x20successfully','English\x20(US)','Router','$product_details','/products/units','now','Hindi','brands','PBrands','secondary_unit','Product_Code','/view/add_products','alertquantity','2737692jyPNUr','user','Content-Type','migrate_product_fule','product_details.product_name','16abIqGN','../models/all_models','Secondary_Units','message','$product_stock','$product_category','brand','Products\x20master','numeric','log','/categories/:id','length','status','_id','$category','94163fEoIGw','hello','exports','product_barcode','$product_docs','Chinese','redirect','24814719sEZyOJ','../public/language/languages.json','Secondary_Code','xlsx','name','attachment;\x20filename=Product_Migration_File.xlsx','/products_import_migrate_file','904337uAgVYC','single','findByIdAndDelete','PSecondaryUnits','map','PName','/brands/delete/:id','save','findByIdAndUpdate','/barcode/:id','warehouse','SheetNames','render','public/Migration','public/Migration/','Prod_Cat','findOne','maxProdPerUnit','category','maxStocks','language','columns','Arabic','addWorksheet','setHeader','product\x20add\x20successfully','primary_code','Product_Name','then','unit','/view/:id','edit\x20Product\x20master','$secondary_unit','file','products','German','get','/view','221448pleVTz','email','sku','/products/brands','/brands','json','filename','utils','master','Sheets','Products\x20find_data','product\x20update\x20successfully','$product_details.product_name','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20<>\x20','Portuguese','product_category','10uMZJFB','defaultProduct.avif','sheet_to_json','Primary_Code','/categories/delete/:id','Products','find','errors','barcode\x20user_id','Portuguese\x20(BR)','flash','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','brand\x20data\x20update\x20successfully','product_stock','5698336nXBBKI','prod_categ','findById','express/lib/response'];a0_0x72ad=function(){return _0x18eac9;};return a0_0x72ad();}function a0_0x536b(_0x18469a,_0x282562){const _0x72add8=a0_0x72ad();return a0_0x536b=function(_0x536bab,_0x487f72){_0x536bab=_0x536bab-0x122;let _0x4d4f8f=_0x72add8[_0x536bab];return _0x4d4f8f;},a0_0x536b(_0x18469a,_0x282562);}router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x125),auth,async(_0x2bf4ab,_0x2fab55)=>{const _0x161050=a0_0x5a47d5;try{const {username:_0x3273f9,email:_0x219b5f,role:_0x517d08}=_0x2bf4ab['user'],_0x4c4357=_0x2bf4ab[_0x161050(0x18c)],_0x32305d=await profile[_0x161050(0x1bd)]({'email':_0x4c4357['email']}),_0x46a3a3={'year':_0x161050(0x198),'month':'long','day':'numeric'},_0x4cd25f=await master_shop[_0x161050(0x13d)]();console[_0x161050(0x199)](_0x161050(0x197),_0x4cd25f);const _0x323d20=await product[_0x161050(0x13d)]();console[_0x161050(0x199)](_0x161050(0x130),_0x323d20);const _0x30fe0a=await warehouse['aggregate']([{'$unwind':_0x161050(0x181)},{'$lookup':{'from':_0x161050(0x122),'localField':_0x161050(0x18f),'foreignField':'name','as':_0x161050(0x151)}},{'$unwind':_0x161050(0x1a3)},{'$project':{'product_name':_0x161050(0x132),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x161050(0x154),'product_stock':{'$sum':_0x161050(0x194)}}}]);console[_0x161050(0x199)](_0x161050(0x159),_0x30fe0a),_0x30fe0a['forEach'](_0x1d12f1=>{const _0x418dd5=_0x161050,_0x4d933d=_0x323d20[_0x418dd5(0x1b1)](_0x4a3836=>{const _0x3b8dbd=_0x418dd5;_0x4a3836[_0x3b8dbd(0x1aa)]==_0x1d12f1[_0x3b8dbd(0x19d)]&&(_0x4a3836['stock']=parseInt(_0x4a3836[_0x3b8dbd(0x170)])+parseInt(_0x1d12f1[_0x3b8dbd(0x144)]));});}),console[_0x161050(0x199)](_0x161050(0x130),_0x323d20);if(_0x4cd25f[0x0][_0x161050(0x1c1)]==_0x161050(0x17f))var _0x504931=users['English'];else{if(_0x4cd25f[0x0][_0x161050(0x1c1)]==_0x161050(0x184))var _0x504931=users[_0x161050(0x184)];else{if(_0x4cd25f[0x0][_0x161050(0x1c1)]==_0x161050(0x123))var _0x504931=users['German'];else{if(_0x4cd25f[0x0][_0x161050(0x1c1)]=='Spanish')var _0x504931=users[_0x161050(0x168)];else{if(_0x4cd25f[0x0][_0x161050(0x1c1)]==_0x161050(0x156))var _0x504931=users['French'];else{if(_0x4cd25f[0x0]['language']==_0x161050(0x140))var _0x504931=users[_0x161050(0x135)];else{if(_0x4cd25f[0x0][_0x161050(0x1c1)]=='Chinese')var _0x504931=users[_0x161050(0x1a4)];else{if(_0x4cd25f[0x0]['language']==_0x161050(0x175))var _0x504931=users['Arabic'];}}}}}}}_0x2fab55[_0x161050(0x1b9)]('products',{'success':_0x2bf4ab[_0x161050(0x141)]('success'),'errors':_0x2bf4ab[_0x161050(0x141)](_0x161050(0x13e)),'alldata':_0x323d20,'profile':_0x32305d,'master_shop':_0x4cd25f,'role':_0x4c4357,'product_stock':_0x30fe0a,'language':_0x504931});}catch(_0x2ee83d){console[_0x161050(0x199)](_0x2ee83d);}}),router[a0_0x5a47d5(0x124)](a0_0x5a47d5(0x189),auth,async(_0x15a265,_0x220abf)=>{const _0x4eb6f5=a0_0x5a47d5;try{const {username:_0x578b38,email:_0x153c2a,role:_0xd424d0}=_0x15a265[_0x4eb6f5(0x18c)],_0x418e0b=_0x15a265[_0x4eb6f5(0x18c)],_0x435c5e=await profile[_0x4eb6f5(0x1bd)]({'email':_0x418e0b[_0x4eb6f5(0x127)]}),_0x58f553=await master_shop['find']();console['log'](_0x4eb6f5(0x12e),_0x58f553);const _0x3e1b1a=await categories[_0x4eb6f5(0x13d)]({}),_0x2eb750=await brands[_0x4eb6f5(0x13d)]({}),_0xb2f327=await units[_0x4eb6f5(0x13d)]({}),_0x2e8802=await warehouse[_0x4eb6f5(0x13d)]({'status':_0x4eb6f5(0x174)});if(_0x58f553[0x0]['language']==_0x4eb6f5(0x17f))var _0x54ab03=users[_0x4eb6f5(0x17a)];else{if(_0x58f553[0x0][_0x4eb6f5(0x1c1)]==_0x4eb6f5(0x184))var _0x54ab03=users[_0x4eb6f5(0x184)];else{if(_0x58f553[0x0]['language']=='German')var _0x54ab03=users[_0x4eb6f5(0x123)];else{if(_0x58f553[0x0]['language']==_0x4eb6f5(0x168))var _0x54ab03=users['Spanish'];else{if(_0x58f553[0x0][_0x4eb6f5(0x1c1)]=='French')var _0x54ab03=users[_0x4eb6f5(0x156)];else{if(_0x58f553[0x0][_0x4eb6f5(0x1c1)]==_0x4eb6f5(0x140))var _0x54ab03=users['Portuguese'];else{if(_0x58f553[0x0]['language']==_0x4eb6f5(0x1a4))var _0x54ab03=users[_0x4eb6f5(0x1a4)];else{if(_0x58f553[0x0][_0x4eb6f5(0x1c1)]=='Arabic\x20(ae)')var _0x54ab03=users[_0x4eb6f5(0x1c3)];}}}}}}}_0x220abf[_0x4eb6f5(0x1b9)](_0x4eb6f5(0x165),{'success':_0x15a265[_0x4eb6f5(0x141)](_0x4eb6f5(0x158)),'errors':_0x15a265['flash'](_0x4eb6f5(0x13e)),'role':_0x418e0b,'profile':_0x435c5e,'categories':_0x3e1b1a,'brands':_0x2eb750,'master_shop':_0x58f553,'units':_0xb2f327,'language':_0x54ab03,'find_data':_0x2e8802});}catch(_0x5bbcd9){console[_0x4eb6f5(0x199)](_0x5bbcd9);}}),router['post'](a0_0x5a47d5(0x189),auth,upload[a0_0x5a47d5(0x1ae)](a0_0x5a47d5(0x15f)),async(_0x21bad4,_0x1d73c4)=>{const _0x2f5938=a0_0x5a47d5;try{const {name:_0xab3f74,category:_0x1b750e,brand:_0x988f0a,unit:_0xb9653b,alertquantity:_0xfbfa0d,stock:_0x241b9c,product_code:_0x2d0478,warehouse:_0x295770,primary_ItemCode:_0x28c33d,second_ItemCode:_0x4d4597,second_unit:_0x2764a4,maxPerUnit:_0x34a7ee,MaxPerProduct:_0x74d0cd}=_0x21bad4[_0x2f5938(0x173)],_0x52a025=_0x21bad4['file']?.[_0x2f5938(0x12c)]||_0x2f5938(0x138),_0x271e41=new product({'image':_0x52a025,'name':_0xab3f74,'category':_0x1b750e,'brand':_0x988f0a,'unit':_0xb9653b,'alertquantity':_0xfbfa0d,'stock':_0x241b9c,'product_code':_0x2d0478,'warehouse':_0x295770,'primary_code':_0x28c33d,'secondary_code':_0x4d4597,'second_unit':_0x2764a4,'maxStocks':_0x74d0cd,'maxProdPerUnit':_0x34a7ee}),_0x1c8945=await _0x271e41[_0x2f5938(0x1b4)](),_0xcfbdc5=await categories[_0x2f5938(0x1bd)]({'name':_0x1b750e});_0xcfbdc5[_0x2f5938(0x122)]=parseInt(_0xcfbdc5[_0x2f5938(0x122)])+0x1,await _0xcfbdc5[_0x2f5938(0x1b4)]();const _0x17a8ca=await brands[_0x2f5938(0x1bd)]({'name':_0x988f0a});_0x17a8ca[_0x2f5938(0x122)]=parseInt(_0x17a8ca['products'])+0x1,await _0x17a8ca[_0x2f5938(0x1b4)]();const _0x6347e=await units[_0x2f5938(0x1bd)]({'name':_0xb9653b});_0x6347e[_0x2f5938(0x122)]=parseInt(_0x6347e[_0x2f5938(0x122)])+0x1,await _0x6347e[_0x2f5938(0x1b4)](),_0x21bad4[_0x2f5938(0x141)](_0x2f5938(0x158),_0x2f5938(0x1c6)),_0x1d73c4[_0x2f5938(0x1a5)](_0x2f5938(0x16c));}catch(_0x1d8177){console[_0x2f5938(0x199)](_0x1d8177);}}),router['get'](a0_0x5a47d5(0x1cb),auth,async(_0x3d297b,_0x43bec1)=>{const _0x3f6f7e=a0_0x5a47d5;try{const {username:_0x316573,email:_0x21e39e,role:_0x58de63}=_0x3d297b[_0x3f6f7e(0x18c)],_0x4231f0=_0x3d297b[_0x3f6f7e(0x18c)],_0x37586d=await profile['findOne']({'email':_0x4231f0[_0x3f6f7e(0x127)]}),_0xc7a521=await master_shop[_0x3f6f7e(0x13d)]();console[_0x3f6f7e(0x199)](_0x3f6f7e(0x1cc),_0xc7a521);const _0x1625d6=_0x3d297b['params']['id'],_0x185b59=await product['findById'](_0x1625d6),_0x5be5bf=await categories[_0x3f6f7e(0x13d)]({}),_0x55c7b4=await brands[_0x3f6f7e(0x13d)]({}),_0x46cbbc=await units[_0x3f6f7e(0x13d)]({}),_0x11fe00=await warehouse['find']({'status':_0x3f6f7e(0x174)}),_0x2dbd83=await units[_0x3f6f7e(0x171)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x3f6f7e(0x1cd)}}}]);if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]=='English\x20(US)')var _0x5a004c=users['English'];else{if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]=='Hindi')var _0x5a004c=users[_0x3f6f7e(0x184)];else{if(_0xc7a521[0x0]['language']==_0x3f6f7e(0x123))var _0x5a004c=users[_0x3f6f7e(0x123)];else{if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]==_0x3f6f7e(0x168))var _0x5a004c=users[_0x3f6f7e(0x168)];else{if(_0xc7a521[0x0]['language']==_0x3f6f7e(0x156))var _0x5a004c=users[_0x3f6f7e(0x156)];else{if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]=='Portuguese\x20(BR)')var _0x5a004c=users[_0x3f6f7e(0x135)];else{if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]==_0x3f6f7e(0x1a4))var _0x5a004c=users['Chinese'];else{if(_0xc7a521[0x0][_0x3f6f7e(0x1c1)]=='Arabic\x20(ae)')var _0x5a004c=users[_0x3f6f7e(0x1c3)];}}}}}}}_0x43bec1[_0x3f6f7e(0x1b9)]('edit_product',{'success':_0x3d297b[_0x3f6f7e(0x141)]('success'),'errors':_0x3d297b['flash']('errors'),'role':_0x4231f0,'profile':_0x37586d,'alldata':_0x185b59,'categories':_0x5be5bf,'brands':_0x55c7b4,'master_shop':_0xc7a521,'units':_0x46cbbc,'secondunit':_0x2dbd83,'find_data':_0x11fe00,'language':_0x5a004c});}catch(_0x40be00){console[_0x3f6f7e(0x199)](_0x40be00);}}),router[a0_0x5a47d5(0x161)](a0_0x5a47d5(0x1cb),auth,upload[a0_0x5a47d5(0x1ae)]('image'),async(_0x101653,_0x589687)=>{const _0x46fc18=a0_0x5a47d5;try{console[_0x46fc18(0x199)](_0x46fc18(0x1a0));const _0x27c497=_0x101653[_0x46fc18(0x17b)]['id'],_0x4850f6=await product[_0x46fc18(0x147)](_0x27c497),{image:_0x27a1d1,name:_0x4eaf46,category:_0x17c154,brand:_0x149fb5,sku:_0x1e1ef3,unit:_0x628741,alertquantity:_0x155303,product_code:_0x51f4b6,warehouse:_0x7b421e,primary_ItemCode:_0x3c4035,second_ItemCode:_0x24c831,second_unit:_0x57656d,maxPerUnit:_0x57d019,MaxPerProduct:_0x2af04b}=_0x101653[_0x46fc18(0x173)];_0x101653['file']&&(_0x4850f6['image']=_0x101653[_0x46fc18(0x1ce)][_0x46fc18(0x12c)]);_0x4850f6[_0x46fc18(0x1aa)]=_0x4eaf46,_0x4850f6['category']=_0x17c154,_0x4850f6['brand']=_0x149fb5,_0x4850f6[_0x46fc18(0x128)]=_0x1e1ef3,_0x4850f6[_0x46fc18(0x1ca)]=_0x628741,_0x4850f6['alertquantity']=_0x155303,_0x4850f6[_0x46fc18(0x16f)]=_0x51f4b6,_0x4850f6[_0x46fc18(0x1b7)]=_0x7b421e,_0x4850f6[_0x46fc18(0x1c7)]=_0x3c4035,_0x4850f6[_0x46fc18(0x163)]=_0x24c831,_0x4850f6[_0x46fc18(0x187)]=_0x57656d,_0x4850f6[_0x46fc18(0x1c0)]=_0x2af04b,_0x4850f6[_0x46fc18(0x1be)]=_0x57d019;const _0x5cc0fb=await _0x4850f6[_0x46fc18(0x1b4)]();console[_0x46fc18(0x199)](_0x46fc18(0x16e),_0x4850f6),_0x101653[_0x46fc18(0x141)](_0x46fc18(0x158),_0x46fc18(0x131)),_0x589687['redirect'](_0x46fc18(0x16c));}catch(_0x48bd9c){console[_0x46fc18(0x199)](_0x48bd9c);}}),router['get'](a0_0x5a47d5(0x1b6),auth,async(_0x214ba5,_0x153d44)=>{const _0x1a4f1c=a0_0x5a47d5;try{const {username:_0x52962a,email:_0x120b57,role:_0x309f6a}=_0x214ba5[_0x1a4f1c(0x18c)],_0x27d1af=_0x214ba5[_0x1a4f1c(0x18c)],_0x349189=await profile['findOne']({'email':_0x27d1af[_0x1a4f1c(0x127)]}),_0x1ef209=await master_shop[_0x1a4f1c(0x13d)]();console[_0x1a4f1c(0x199)]('barcode\x20Product\x20master',_0x1ef209);const _0x5d0f29=_0x214ba5[_0x1a4f1c(0x17b)]['id'],_0x4f7458=await product[_0x1a4f1c(0x147)](_0x5d0f29);console[_0x1a4f1c(0x199)](_0x1a4f1c(0x13f),_0x4f7458);if(_0x1ef209[0x0]['language']=='English\x20(US)')var _0x4c6a54=users[_0x1a4f1c(0x17a)];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]==_0x1a4f1c(0x184))var _0x4c6a54=users[_0x1a4f1c(0x184)];else{if(_0x1ef209[0x0]['language']==_0x1a4f1c(0x123))var _0x4c6a54=users[_0x1a4f1c(0x123)];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]==_0x1a4f1c(0x168))var _0x4c6a54=users['Spanish'];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]==_0x1a4f1c(0x156))var _0x4c6a54=users['French'];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]=='Portuguese\x20(BR)')var _0x4c6a54=users[_0x1a4f1c(0x135)];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]==_0x1a4f1c(0x1a4))var _0x4c6a54=users[_0x1a4f1c(0x1a4)];else{if(_0x1ef209[0x0][_0x1a4f1c(0x1c1)]==_0x1a4f1c(0x175))var _0x4c6a54=users[_0x1a4f1c(0x1c3)];}}}}}}}_0x153d44[_0x1a4f1c(0x1b9)](_0x1a4f1c(0x1a2),{'success':_0x214ba5[_0x1a4f1c(0x141)](_0x1a4f1c(0x158)),'errors':_0x214ba5[_0x1a4f1c(0x141)](_0x1a4f1c(0x13e)),'role':_0x27d1af,'profile':_0x349189,'alldata':_0x4f7458,'master_shop':_0x1ef209,'language':_0x4c6a54});}catch(_0x36795f){console['log'](_0x36795f);}}),router[a0_0x5a47d5(0x124)]('/products_export_migrate_file',auth,async(_0x470e31,_0x88ba5c)=>{const _0x5f4ed2=a0_0x5a47d5;try{const _0x1f3a7d=new excelJS[(_0x5f4ed2(0x15b))](),_0x22847f=_0x1f3a7d[_0x5f4ed2(0x1c4)](_0x5f4ed2(0x13c));return _0x22847f[_0x5f4ed2(0x1c2)]=[{'header':_0x5f4ed2(0x1c8),'key':_0x5f4ed2(0x1b2),'width':0xa},{'header':'Brands','key':_0x5f4ed2(0x186),'width':0xa},{'header':_0x5f4ed2(0x157),'key':_0x5f4ed2(0x16d),'width':0xa},{'header':_0x5f4ed2(0x192),'key':_0x5f4ed2(0x1b0),'width':0xa},{'header':_0x5f4ed2(0x149),'key':'MaxperUnits','width':0xa},{'header':_0x5f4ed2(0x13a),'key':'ProductCode','width':0xa},{'header':_0x5f4ed2(0x1a8),'key':'ProductCode','width':0xa},{'header':_0x5f4ed2(0x188),'key':_0x5f4ed2(0x14e),'width':0xa},{'header':_0x5f4ed2(0x155),'key':'PCat','width':0xa},{'header':_0x5f4ed2(0x166),'key':_0x5f4ed2(0x172),'width':0xa},{'header':'Maximum_Stocks','key':_0x5f4ed2(0x172),'width':0xa},{'header':_0x5f4ed2(0x178),'key':_0x5f4ed2(0x1bc),'width':0xa}],_0x88ba5c[_0x5f4ed2(0x1c5)](_0x5f4ed2(0x18d),_0x5f4ed2(0x142)),_0x88ba5c[_0x5f4ed2(0x1c5)]('Content-Disposition',_0x5f4ed2(0x1ab)),_0x1f3a7d[_0x5f4ed2(0x1a9)]['write'](_0x88ba5c)[_0x5f4ed2(0x1c9)](()=>{const _0x3e271d=_0x5f4ed2;_0x88ba5c[_0x3e271d(0x19c)](0xc8);});}catch(_0x3b16e0){_0x88ba5c[_0x5f4ed2(0x19c)](0x190)['send'](_0x3b16e0);}});const storage1=multer[a0_0x5a47d5(0x167)]({'destination':(_0xc3e525,_0x20f597,_0x41db4d)=>{const _0x10d366=a0_0x5a47d5;_0x41db4d(null,_0x10d366(0x1ba));},'filename':(_0xf0587f,_0x1bcf1c,_0x2213bb)=>{const _0x3481cc=a0_0x5a47d5;_0x2213bb(null,Date[_0x3481cc(0x183)]()+_0x1bcf1c[_0x3481cc(0x153)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x5a47d5(0x1ac),auth,uploadMigrate[a0_0x5a47d5(0x1ae)](a0_0x5a47d5(0x18e)),async(_0x4b9ba9,_0x4f1780)=>{const _0x1979d5=a0_0x5a47d5,_0x1b29fb=_0x4b9ba9['file']['filename'],_0x17185f=await xlsx['readFile'](_0x1979d5(0x1bb)+_0x1b29fb);let _0x323b2a=_0x17185f[_0x1979d5(0x1b8)],_0x400f8b=xlsx[_0x1979d5(0x12d)][_0x1979d5(0x139)](_0x17185f[_0x1979d5(0x12f)][_0x323b2a[0x0]]);for(const _0x226445 of _0x400f8b){const _0x186b82=_0x226445[_0x1979d5(0x1c8)],_0x34c37a=_0x226445['Brands'],_0x4460fe=_0x226445[_0x1979d5(0x157)],_0x5b11c5=_0x226445[_0x1979d5(0x192)],_0x42b1fa=_0x226445[_0x1979d5(0x188)],_0xade8bd=_0x226445[_0x1979d5(0x155)],_0x3d7ebc=_0x226445[_0x1979d5(0x166)],_0x3474e0=_0x226445['Primary_Code'],_0x3ac8e3=_0x226445['Secondary_Code'],_0x378311=_0x226445['Maximum_Stocks'],_0x18df42=_0x226445[_0x1979d5(0x149)],_0x100ead=_0x226445[_0x1979d5(0x178)];try{let _0x346dff=await categories[_0x1979d5(0x1bd)]({'name':_0xade8bd});if(!_0x346dff){const _0x3d14be=new categories({'name':_0xade8bd,'products':'0'});_0x346dff=await _0x3d14be[_0x1979d5(0x1b4)]();}let _0x37be3a=await brands['findOne']({'name':_0x34c37a});if(!_0x37be3a){const _0x2236f2=new brands({'name':_0x34c37a,'products':'0'});_0x37be3a=await _0x2236f2[_0x1979d5(0x1b4)]();}let _0x58f6c7=await units[_0x1979d5(0x1bd)]({'name':_0x4460fe,'secondary_unit':_0x5b11c5});if(!_0x58f6c7){const _0x27f429=new units({'name':_0x4460fe,'secondary_unit':_0x5b11c5,'products':'0'});_0x58f6c7=await _0x27f429[_0x1979d5(0x1b4)]();}const _0x4b5f61=await product['find']({'name':_0x186b82,'category':_0x346dff['name'],'brand':_0x37be3a[_0x1979d5(0x1aa)],'secondary_unit':_0x58f6c7['secondary_unit'],'product_code':_0x42b1fa});console['log'](_0x4b5f61['length']+_0x1979d5(0x134)+_0x346dff['name']+_0x1979d5(0x134)+_0x37be3a[_0x1979d5(0x1aa)]+_0x1979d5(0x134)+_0x58f6c7['secondary_unit']+'\x20<>\x20'+_0x42b1fa+_0x1979d5(0x134)+_0x186b82);if(_0x4b5f61[_0x1979d5(0x19b)]===0x0){const _0xa976bc=new product({'image':_0x1979d5(0x138),'name':_0x186b82,'category':_0x346dff['name'],'brand':_0x37be3a[_0x1979d5(0x1aa)],'unit':_0x58f6c7[_0x1979d5(0x1aa)],'alertquantity':_0x3d7ebc,'product_code':_0x42b1fa,'secondary_unit':_0x58f6c7[_0x1979d5(0x187)],'primary_code':_0x3474e0,'secondary_code':_0x3ac8e3,'maxStocks':_0x378311,'maxProdPerUnit':_0x18df42,'product_category':_0x100ead}),_0x1953fa=await _0xa976bc[_0x1979d5(0x1b4)]();_0x346dff[_0x1979d5(0x122)]=parseInt(_0x346dff[_0x1979d5(0x122)])+0x1,await _0x346dff[_0x1979d5(0x1b4)](),_0x37be3a[_0x1979d5(0x122)]=parseInt(_0x37be3a[_0x1979d5(0x122)])+0x1,await _0x37be3a[_0x1979d5(0x1b4)](),_0x58f6c7[_0x1979d5(0x122)]=parseInt(_0x58f6c7[_0x1979d5(0x122)])+0x1,await _0x58f6c7['save'](),_0x4b9ba9[_0x1979d5(0x141)](_0x1979d5(0x158),_0x186b82+_0x1979d5(0x176));}else{console[_0x1979d5(0x199)](_0x4b5f61[0x0]);const _0x16b2c3=_0x4b5f61[0x0];_0x16b2c3[_0x1979d5(0x1bf)]=_0x346dff[_0x1979d5(0x1aa)],_0x16b2c3[_0x1979d5(0x196)]=_0x37be3a[_0x1979d5(0x1aa)],_0x16b2c3[_0x1979d5(0x1ca)]=_0x58f6c7[_0x1979d5(0x1aa)],_0x16b2c3[_0x1979d5(0x18a)]=_0x3d7ebc,_0x16b2c3[_0x1979d5(0x16f)]=_0x42b1fa,_0x16b2c3[_0x1979d5(0x187)]=_0x58f6c7[_0x1979d5(0x187)],_0x16b2c3[_0x1979d5(0x1c7)]=_0x3474e0,_0x16b2c3['secondary_code']=_0x3ac8e3,_0x16b2c3[_0x1979d5(0x1c0)]=_0x378311,_0x16b2c3['maxProdPerUnit']=_0x18df42,_0x16b2c3[_0x1979d5(0x136)]=_0x100ead;const _0x1a3625=await _0x16b2c3['save']();_0x4b9ba9[_0x1979d5(0x141)]('success',_0x1a3625[_0x1979d5(0x1aa)]+_0x1979d5(0x17c));}}catch(_0x585a4f){_0x4f1780['status'](0x1f4)[_0x1979d5(0x12b)]({'proderror':_0x585a4f[_0x1979d5(0x193)],'aproduct':_0x186b82});}}_0x4f1780['redirect'](_0x1979d5(0x16c));}),router['post'](a0_0x5a47d5(0x150),auth,async(_0x24318e,_0x19a584)=>{const _0xd20f46=a0_0x5a47d5;try{const {datachoose:_0x390578}=_0x24318e[_0xd20f46(0x173)];var _0x193402;if(_0x390578==_0xd20f46(0x146))_0x193402=await product['aggregate']([{'$group':{'_id':_0xd20f46(0x195)}}]);else{if(_0x390578==_0xd20f46(0x185))_0x193402=await product[_0xd20f46(0x171)]([{'$group':{'_id':_0xd20f46(0x16a)}}]);else _0x390578==_0xd20f46(0x15e)&&(_0x193402=await product['aggregate']([{'$group':{'_id':_0xd20f46(0x19e)}}]));}console[_0xd20f46(0x199)](_0x193402),_0x19a584[_0xd20f46(0x12b)](_0x193402);}catch(_0x53e551){_0x19a584[_0xd20f46(0x12b)]({'message':_0x53e551[_0xd20f46(0x193)]});}}),router[a0_0x5a47d5(0x161)]('/filter_product',auth,async(_0x22ef77,_0x3aed65)=>{const _0x35f8c5=a0_0x5a47d5;try{const {data_choosing:_0x4e31ec,data_selected:_0x2469e2}=_0x22ef77[_0x35f8c5(0x173)];var _0x2a9748;if(_0x4e31ec==_0x35f8c5(0x146))_0x2a9748=await product[_0x35f8c5(0x171)]([{'$match':{'product_category':_0x2469e2}}]);else{if(_0x4e31ec==_0x35f8c5(0x185))_0x2a9748=await product[_0x35f8c5(0x171)]([{'$match':{'brand':_0x2469e2}}]);else _0x4e31ec==_0x35f8c5(0x15e)&&(_0x2a9748=await product['aggregate']([{'$match':{'category':_0x2469e2}}]));}_0x3aed65[_0x35f8c5(0x12b)](_0x2a9748);}catch(_0x16cc68){_0x3aed65[_0x35f8c5(0x12b)]({'message':_0x16cc68['message']});}}),module[a0_0x5a47d5(0x1a1)]=router;