const a0_0x249503=a0_0x5f18;(function(_0x8fff44,_0x276dca){const _0x494f5c=a0_0x5f18,_0x540e06=_0x8fff44();while(!![]){try{const _0x1fb5b6=-parseInt(_0x494f5c(0x1ac))/0x1+parseInt(_0x494f5c(0x15d))/0x2*(-parseInt(_0x494f5c(0x1bb))/0x3)+parseInt(_0x494f5c(0x1fb))/0x4*(parseInt(_0x494f5c(0x17e))/0x5)+parseInt(_0x494f5c(0x179))/0x6*(parseInt(_0x494f5c(0x1ea))/0x7)+parseInt(_0x494f5c(0x166))/0x8*(-parseInt(_0x494f5c(0x1a5))/0x9)+-parseInt(_0x494f5c(0x216))/0xa+-parseInt(_0x494f5c(0x17d))/0xb*(-parseInt(_0x494f5c(0x181))/0xc);if(_0x1fb5b6===_0x276dca)break;else _0x540e06['push'](_0x540e06['shift']());}catch(_0x153adc){_0x540e06['push'](_0x540e06['shift']());}}}(a0_0x4a4b,0x319dd));const express=require(a0_0x249503(0x160)),res=require(a0_0x249503(0x151)),app=express(),router=express[a0_0x249503(0x1ca)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x249503(0x182)),auth=require(a0_0x249503(0x214)),users=require(a0_0x249503(0x1d1)),excelJS=require(a0_0x249503(0x1c0)),xlsx=require(a0_0x249503(0x1c7)),JsBarcode=require(a0_0x249503(0x1ff)),{Canvas}=require(a0_0x249503(0x20d)),PDFDocument=require('pdfkit-table');router[a0_0x249503(0x1b2)](a0_0x249503(0x19d),auth,async(_0x2231f7,_0x3ab1a0)=>{const _0x107a6a=a0_0x249503;try{const {username:_0x2a51c4,email:_0x421a6d,role:_0x20513f}=_0x2231f7[_0x107a6a(0x185)],_0x143af1=_0x2231f7['user'],_0x23e88e=await profile[_0x107a6a(0x161)]({'email':_0x143af1[_0x107a6a(0x196)]}),_0x533e75=await master_shop[_0x107a6a(0x167)]();console[_0x107a6a(0x1c4)]('master',_0x533e75);const _0x2055f6=await categories[_0x107a6a(0x167)]();if(_0x533e75[0x0][_0x107a6a(0x1e3)]=='English\x20(US)')var _0x160842=users[_0x107a6a(0x173)];else{if(_0x533e75[0x0]['language']==_0x107a6a(0x1d5))var _0x160842=users['Hindi'];else{if(_0x533e75[0x0][_0x107a6a(0x1e3)]==_0x107a6a(0x163))var _0x160842=users[_0x107a6a(0x163)];else{if(_0x533e75[0x0][_0x107a6a(0x1e3)]==_0x107a6a(0x20c))var _0x160842=users[_0x107a6a(0x20c)];else{if(_0x533e75[0x0]['language']==_0x107a6a(0x195))var _0x160842=users[_0x107a6a(0x195)];else{if(_0x533e75[0x0][_0x107a6a(0x1e3)]==_0x107a6a(0x210))var _0x160842=users[_0x107a6a(0x1b6)];else{if(_0x533e75[0x0]['language']=='Chinese')var _0x160842=users['Chinese'];else{if(_0x533e75[0x0]['language']==_0x107a6a(0x1fd))var _0x160842=users[_0x107a6a(0x1de)];}}}}}}}_0x3ab1a0[_0x107a6a(0x1e9)]('categories',{'success':_0x2231f7[_0x107a6a(0x1fe)](_0x107a6a(0x205)),'errors':_0x2231f7[_0x107a6a(0x1fe)]('errors'),'role':_0x143af1,'profile':_0x23e88e,'user':_0x2055f6,'master_shop':_0x533e75,'language':_0x160842});}catch(_0x5ea7fc){console[_0x107a6a(0x1c4)](_0x5ea7fc);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x19d),auth,async(_0xa0a229,_0x2c45f0)=>{const _0x24a1b7=a0_0x249503;try{const {name:_0x4ed0d6,products:_0x567342}=_0xa0a229[_0x24a1b7(0x206)],_0x942f5d=new categories({'name':_0x4ed0d6,'products':_0x567342}),_0x15e474=await categories[_0x24a1b7(0x161)]({'name':_0x4ed0d6});_0x15e474?_0xa0a229[_0x24a1b7(0x1fe)]('errors',_0x4ed0d6+_0x24a1b7(0x1d3)):_0xa0a229[_0x24a1b7(0x1fe)](_0x24a1b7(0x205),_0x4ed0d6+_0x24a1b7(0x1e7));const _0x4f608d=await _0x942f5d[_0x24a1b7(0x1a7)]();_0x2c45f0[_0x24a1b7(0x1f1)]('/products/categories');}catch(_0x23871e){console['log'](_0x23871e);}}),router[a0_0x249503(0x1b2)](a0_0x249503(0x1b5),auth,async(_0x293bb6,_0x570cdb)=>{const _0x42ee1a=a0_0x249503;try{const {username:_0x17e4c6,email:_0x249a7f,role:_0x4528dd}=_0x293bb6['user'],_0x1d2483=_0x293bb6[_0x42ee1a(0x185)],_0x7ad5e1=await profile['findOne']({'email':_0x1d2483[_0x42ee1a(0x196)]}),_0x1789a6=await master_shop[_0x42ee1a(0x167)]();console[_0x42ee1a(0x1c4)](_0x42ee1a(0x164),_0x1789a6);const _0x20791e=_0x293bb6[_0x42ee1a(0x1c2)]['id'];console[_0x42ee1a(0x1c4)](_0x20791e);const _0x5bef55=await categories['findById'](_0x20791e);if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]=='English\x20(US)')var _0x103072=users[_0x42ee1a(0x173)];else{if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]==_0x42ee1a(0x1d5))var _0x103072=users[_0x42ee1a(0x1d5)];else{if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]=='German')var _0x103072=users[_0x42ee1a(0x163)];else{if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]==_0x42ee1a(0x20c))var _0x103072=users[_0x42ee1a(0x20c)];else{if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]=='French')var _0x103072=users[_0x42ee1a(0x195)];else{if(_0x1789a6[0x0]['language']==_0x42ee1a(0x210))var _0x103072=users['Portuguese'];else{if(_0x1789a6[0x0]['language']==_0x42ee1a(0x170))var _0x103072=users['Chinese'];else{if(_0x1789a6[0x0][_0x42ee1a(0x1e3)]==_0x42ee1a(0x1fd))var _0x103072=users[_0x42ee1a(0x1de)];}}}}}}}_0x570cdb[_0x42ee1a(0x1e9)]('categories',{'success':_0x293bb6['flash'](_0x42ee1a(0x205)),'errors':_0x293bb6[_0x42ee1a(0x1fe)](_0x42ee1a(0x1b1)),'role':_0x1d2483,'profile':_0x7ad5e1,'master_shop':_0x1789a6,'user':_0x5bef55,'language':_0x103072});}catch(_0x584260){console['log'](_0x584260);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x1b5),auth,async(_0x5439d0,_0x5f4b2f)=>{const _0x55ca48=a0_0x249503;try{const _0x1b587f=_0x5439d0[_0x55ca48(0x1c2)]['id'],_0x3f286f=await categories[_0x55ca48(0x178)](_0x1b587f,_0x5439d0[_0x55ca48(0x206)]);_0x5439d0[_0x55ca48(0x1fe)]('success',''+users[_0x55ca48(0x19e)]),_0x5f4b2f[_0x55ca48(0x1f1)](_0x55ca48(0x17b));}catch(_0x7b9a07){console[_0x55ca48(0x1c4)](_0x7b9a07);}}),router[a0_0x249503(0x1b2)]('/categories/delete/:id',auth,async(_0x35e4a4,_0x3519fa)=>{const _0x1ab310=a0_0x249503;try{const _0x433546=_0x35e4a4['params']['id'],_0xaaabb1=await categories[_0x1ab310(0x211)](_0x433546);_0x35e4a4[_0x1ab310(0x1fe)](_0x1ab310(0x205),_0x1ab310(0x15e)),_0x3519fa[_0x1ab310(0x1f1)](_0x1ab310(0x17b));}catch(_0x13ac0e){console[_0x1ab310(0x1c4)](_0x13ac0e);}}),router['get'](a0_0x249503(0x20b),auth,async(_0x47f9e3,_0x469413)=>{const _0x4e0ef0=a0_0x249503;try{const {username:_0x5a721b,email:_0x222d1d,role:_0x487e85}=_0x47f9e3[_0x4e0ef0(0x185)],_0x4ae65d=_0x47f9e3[_0x4e0ef0(0x185)],_0x3913b2=await profile[_0x4e0ef0(0x161)]({'email':_0x4ae65d[_0x4e0ef0(0x196)]}),_0x3da4e3=await master_shop[_0x4e0ef0(0x167)]();console[_0x4e0ef0(0x1c4)](_0x4e0ef0(0x164),_0x3da4e3);const _0x403ed9=await brands[_0x4e0ef0(0x167)]();if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]==_0x4e0ef0(0x1a1))var _0x2f0677=users[_0x4e0ef0(0x173)];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]==_0x4e0ef0(0x1d5))var _0x2f0677=users[_0x4e0ef0(0x1d5)];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]=='German')var _0x2f0677=users[_0x4e0ef0(0x163)];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]=='Spanish')var _0x2f0677=users['Spanish'];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]==_0x4e0ef0(0x195))var _0x2f0677=users[_0x4e0ef0(0x195)];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]==_0x4e0ef0(0x210))var _0x2f0677=users[_0x4e0ef0(0x1b6)];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]=='Chinese')var _0x2f0677=users['Chinese'];else{if(_0x3da4e3[0x0][_0x4e0ef0(0x1e3)]=='Arabic\x20(ae)')var _0x2f0677=users[_0x4e0ef0(0x1de)];}}}}}}}_0x469413[_0x4e0ef0(0x1e9)](_0x4e0ef0(0x1da),{'success':_0x47f9e3[_0x4e0ef0(0x1fe)]('success'),'errors':_0x47f9e3[_0x4e0ef0(0x1fe)](_0x4e0ef0(0x1b1)),'role':_0x4ae65d,'profile':_0x3913b2,'master_shop':_0x3da4e3,'user':_0x403ed9,'language':_0x2f0677});}catch(_0x24264a){console[_0x4e0ef0(0x1c4)](_0x24264a);}}),router[a0_0x249503(0x15c)]('/brands',auth,async(_0x4cd2ae,_0x41b547)=>{const _0x219b9b=a0_0x249503;try{const {name:_0x5f382d,products:_0x2a4029}=_0x4cd2ae[_0x219b9b(0x206)],_0x2d3c55=new brands({'name':_0x5f382d,'products':_0x2a4029}),_0x3339b4=await brands[_0x219b9b(0x161)]({'name':_0x5f382d});_0x3339b4?_0x4cd2ae['flash'](_0x219b9b(0x1b1),_0x5f382d+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4cd2ae['flash'](_0x219b9b(0x205),_0x5f382d+_0x219b9b(0x209));const _0x5a157d=await _0x2d3c55[_0x219b9b(0x1a7)]();_0x41b547[_0x219b9b(0x1f1)]('/products/brands');}catch(_0x27fa47){console['log'](_0x27fa47);}}),router['get'](a0_0x249503(0x215),auth,async(_0xd050ad,_0x2f2354)=>{const _0x184191=a0_0x249503;try{const {username:_0x3b0f4b,email:_0x204fc0,role:_0x54a1c0}=_0xd050ad[_0x184191(0x185)],_0x68d12d=_0xd050ad[_0x184191(0x185)],_0x381cc1=await profile['findOne']({'email':_0x68d12d[_0x184191(0x196)]}),_0x4199d7=await master_shop[_0x184191(0x167)]();console['log'](_0x184191(0x164),_0x4199d7);const _0x1a2bf5=_0xd050ad[_0x184191(0x1c2)]['id'];console[_0x184191(0x1c4)](_0x1a2bf5);const _0x57d5b4=await brands[_0x184191(0x19f)](_0x1a2bf5);if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x1a1))var _0x2b4eee=users[_0x184191(0x173)];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x1d5))var _0x2b4eee=users[_0x184191(0x1d5)];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x163))var _0x2b4eee=users[_0x184191(0x163)];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x20c))var _0x2b4eee=users[_0x184191(0x20c)];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]=='French')var _0x2b4eee=users['French'];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x210))var _0x2b4eee=users['Portuguese'];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x170))var _0x2b4eee=users[_0x184191(0x170)];else{if(_0x4199d7[0x0][_0x184191(0x1e3)]==_0x184191(0x1fd))var _0x2b4eee=users['Arabic'];}}}}}}}_0x2f2354[_0x184191(0x1e9)](_0x184191(0x1da),{'success':_0xd050ad[_0x184191(0x1fe)]('success'),'errors':_0xd050ad[_0x184191(0x1fe)]('errors'),'role':_0x68d12d,'profile':_0x381cc1,'master_shop':_0x4199d7,'user':_0x57d5b4,'language':_0x2b4eee});}catch(_0x4a7715){console[_0x184191(0x1c4)](_0x4a7715);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x215),auth,async(_0x13e80d,_0xc500ad)=>{const _0x4e326f=a0_0x249503;try{const _0x462f05=_0x13e80d[_0x4e326f(0x1c2)]['id'],_0x2aa360=await brands[_0x4e326f(0x178)](_0x462f05,_0x13e80d[_0x4e326f(0x206)]);_0x13e80d[_0x4e326f(0x1fe)]('success','brand\x20data\x20update\x20successfully'),_0xc500ad[_0x4e326f(0x1f1)](_0x4e326f(0x19a));}catch(_0x1a658c){console['log'](_0x1a658c);}}),router[a0_0x249503(0x1b2)](a0_0x249503(0x1e0),auth,async(_0xf22481,_0x3c01f4)=>{const _0x5ee773=a0_0x249503;try{const _0x439f72=_0xf22481[_0x5ee773(0x1c2)]['id'],_0x24f629=await brands[_0x5ee773(0x211)](_0x439f72);_0xf22481[_0x5ee773(0x1fe)](_0x5ee773(0x205),'brand\x20data\x20delete\x20successfully'),_0x3c01f4[_0x5ee773(0x1f1)]('/products/brands');}catch(_0x5cc8ca){console['log'](_0x5cc8ca);}}),router['get'](a0_0x249503(0x1cd),auth,async(_0x5e6c74,_0x32f1ff)=>{const _0x456e45=a0_0x249503;try{const {username:_0x4532bb,email:_0x54a58a,role:_0xec80a9}=_0x5e6c74[_0x456e45(0x185)],_0x292d0a=_0x5e6c74[_0x456e45(0x185)],_0x581dd4=await profile[_0x456e45(0x161)]({'email':_0x292d0a['email']}),_0x879e72=await master_shop[_0x456e45(0x167)]();console[_0x456e45(0x1c4)]('master',_0x879e72);const _0x24470f=await units[_0x456e45(0x167)]();if(_0x879e72[0x0]['language']==_0x456e45(0x1a1))var _0x40a900=users['English'];else{if(_0x879e72[0x0]['language']=='Hindi')var _0x40a900=users[_0x456e45(0x1d5)];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]=='German')var _0x40a900=users['German'];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]==_0x456e45(0x20c))var _0x40a900=users[_0x456e45(0x20c)];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]==_0x456e45(0x195))var _0x40a900=users[_0x456e45(0x195)];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]==_0x456e45(0x210))var _0x40a900=users['Portuguese'];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]==_0x456e45(0x170))var _0x40a900=users[_0x456e45(0x170)];else{if(_0x879e72[0x0][_0x456e45(0x1e3)]==_0x456e45(0x1fd))var _0x40a900=users[_0x456e45(0x1de)];}}}}}}}_0x32f1ff[_0x456e45(0x1e9)](_0x456e45(0x199),{'success':_0x5e6c74[_0x456e45(0x1fe)](_0x456e45(0x205)),'errors':_0x5e6c74[_0x456e45(0x1fe)]('errors'),'role':_0x292d0a,'profile':_0x581dd4,'master_shop':_0x879e72,'user':_0x24470f,'language':_0x40a900});}catch(_0xfede4){console[_0x456e45(0x1c4)](_0xfede4);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x1cd),auth,async(_0x8cd44b,_0x375d0b)=>{const _0x47a738=a0_0x249503;try{const {name:_0x2a9a1e,secondary_unit:_0x3ded2e,products:_0x213a79}=_0x8cd44b[_0x47a738(0x206)],_0x2510ef=new units({'name':_0x2a9a1e,'secondary_unit':_0x3ded2e,'products':_0x213a79}),_0x105925=await units[_0x47a738(0x161)]({'name':_0x2a9a1e});_0x105925?_0x8cd44b[_0x47a738(0x1fe)](_0x47a738(0x1b1),_0x2a9a1e+_0x47a738(0x1ba)):_0x8cd44b['flash'](_0x47a738(0x205),_0x2a9a1e+_0x47a738(0x1c5));const _0x4f3f94=await _0x2510ef[_0x47a738(0x1a7)]();_0x375d0b[_0x47a738(0x1f1)](_0x47a738(0x1a0));}catch(_0x442550){console['log'](_0x442550);}}),router[a0_0x249503(0x1b2)](a0_0x249503(0x200),auth,async(_0xaaef77,_0x1a61da)=>{const _0x103918=a0_0x249503;try{const {username:_0x4186fb,email:_0x424de8,role:_0xa34e32}=_0xaaef77[_0x103918(0x185)],_0x955ece=_0xaaef77['user'],_0x12403b=await profile['findOne']({'email':_0x955ece[_0x103918(0x196)]}),_0x57885a=await master_shop['find']();console[_0x103918(0x1c4)]('master',_0x57885a);const _0x43e287=_0xaaef77['params']['id'],_0x2f208f=await units['findById'](_0x43e287);if(_0x57885a[0x0][_0x103918(0x1e3)]==_0x103918(0x1a1))var _0x22353b=users[_0x103918(0x173)];else{if(_0x57885a[0x0][_0x103918(0x1e3)]==_0x103918(0x1d5))var _0x22353b=users[_0x103918(0x1d5)];else{if(_0x57885a[0x0][_0x103918(0x1e3)]==_0x103918(0x163))var _0x22353b=users['German'];else{if(_0x57885a[0x0][_0x103918(0x1e3)]==_0x103918(0x20c))var _0x22353b=users[_0x103918(0x20c)];else{if(_0x57885a[0x0]['language']==_0x103918(0x195))var _0x22353b=users[_0x103918(0x195)];else{if(_0x57885a[0x0]['language']==_0x103918(0x210))var _0x22353b=users[_0x103918(0x1b6)];else{if(_0x57885a[0x0]['language']==_0x103918(0x170))var _0x22353b=users[_0x103918(0x170)];else{if(_0x57885a[0x0][_0x103918(0x1e3)]==_0x103918(0x1fd))var _0x22353b=users[_0x103918(0x1de)];}}}}}}}_0x1a61da[_0x103918(0x1e9)](_0x103918(0x199),{'success':_0xaaef77[_0x103918(0x1fe)]('success'),'errors':_0xaaef77[_0x103918(0x1fe)](_0x103918(0x1b1)),'role':_0x955ece,'profile':_0x12403b,'master_shop':_0x57885a,'user':_0x2f208f,'language':_0x22353b});}catch(_0x447f95){console[_0x103918(0x1c4)](_0x447f95);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x200),auth,async(_0x7e0364,_0x40e6ab)=>{const _0x2648b3=a0_0x249503;try{const _0x2f4a0c=_0x7e0364[_0x2648b3(0x1c2)]['id'],_0x50ee1a=await units[_0x2648b3(0x178)](_0x2f4a0c,_0x7e0364[_0x2648b3(0x206)]);_0x7e0364[_0x2648b3(0x1fe)](_0x2648b3(0x205),_0x2648b3(0x1c3)),_0x40e6ab[_0x2648b3(0x1f1)](_0x2648b3(0x1a0));}catch(_0x1916bf){console[_0x2648b3(0x1c4)](_0x1916bf);}}),router[a0_0x249503(0x1b2)](a0_0x249503(0x17f),auth,async(_0xb8c2e,_0x2cf77e)=>{const _0x1a1a71=a0_0x249503;try{const _0x3fffb9=_0xb8c2e[_0x1a1a71(0x1c2)]['id'],_0x4f2645=await units[_0x1a1a71(0x211)](_0x3fffb9);_0xb8c2e[_0x1a1a71(0x1fe)](_0x1a1a71(0x205),'unit\x20data\x20delete\x20successfully'),_0x2cf77e['redirect'](_0x1a1a71(0x1a0));}catch(_0x2cf597){console[_0x1a1a71(0x1c4)](_0x2cf597);}});const storage=multer[a0_0x249503(0x1c9)]({'destination':(_0x43cec7,_0x6fa6ce,_0x59921c)=>{const _0x5d1d56=a0_0x249503;_0x59921c(null,_0x5d1d56(0x1bf));},'filename':(_0x517d83,_0x1188fd,_0x4517a6)=>{const _0x71a463=a0_0x249503;_0x4517a6(null,Date['now']()+_0x1188fd[_0x71a463(0x212)]);}}),upload=multer({'storage':storage});router[a0_0x249503(0x1b2)]('/view',auth,async(_0x232d8c,_0x4f86c0)=>{const _0x4132db=a0_0x249503;try{const {username:_0x1d8977,email:_0x4fcb34,role:_0x5a3628}=_0x232d8c[_0x4132db(0x185)],_0x1832fe=_0x232d8c[_0x4132db(0x185)],_0x490f21=await profile['findOne']({'email':_0x1832fe['email']}),_0x334d87={'year':_0x4132db(0x1e6),'month':_0x4132db(0x16b),'day':'numeric'},_0x2ddc70=await master_shop[_0x4132db(0x167)]();console[_0x4132db(0x1c4)](_0x4132db(0x20f),_0x2ddc70);const _0x98c31f=await product['find']();console['log'](_0x4132db(0x190),_0x98c31f);const _0x33086b=await warehouse[_0x4132db(0x1f3)]([{'$unwind':_0x4132db(0x15a)},{'$lookup':{'from':_0x4132db(0x180),'localField':'product_details.product_name','foreignField':_0x4132db(0x202),'as':_0x4132db(0x150)}},{'$unwind':_0x4132db(0x1ef)},{'$project':{'product_name':_0x4132db(0x1bc),'product_stock':_0x4132db(0x187)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x4132db(0x16f)}}}]);console[_0x4132db(0x1c4)](_0x4132db(0x1f8),_0x33086b),_0x33086b[_0x4132db(0x1ae)](_0x4228d8=>{const _0x59ae47=_0x4132db,_0x365841=_0x98c31f[_0x59ae47(0x207)](_0x3354cf=>{const _0x3e432e=_0x59ae47;_0x3354cf[_0x3e432e(0x202)]==_0x4228d8[_0x3e432e(0x1ad)]&&(_0x3354cf['stock']=parseInt(_0x3354cf[_0x3e432e(0x1cb)])+parseInt(_0x4228d8[_0x3e432e(0x18e)]));});}),console[_0x4132db(0x1c4)](_0x4132db(0x190),_0x98c31f);if(_0x2ddc70[0x0][_0x4132db(0x1e3)]==_0x4132db(0x1a1))var _0x39d202=users['English'];else{if(_0x2ddc70[0x0]['language']==_0x4132db(0x1d5))var _0x39d202=users[_0x4132db(0x1d5)];else{if(_0x2ddc70[0x0]['language']==_0x4132db(0x163))var _0x39d202=users[_0x4132db(0x163)];else{if(_0x2ddc70[0x0][_0x4132db(0x1e3)]==_0x4132db(0x20c))var _0x39d202=users[_0x4132db(0x20c)];else{if(_0x2ddc70[0x0][_0x4132db(0x1e3)]==_0x4132db(0x195))var _0x39d202=users[_0x4132db(0x195)];else{if(_0x2ddc70[0x0][_0x4132db(0x1e3)]==_0x4132db(0x210))var _0x39d202=users[_0x4132db(0x1b6)];else{if(_0x2ddc70[0x0]['language']==_0x4132db(0x170))var _0x39d202=users[_0x4132db(0x170)];else{if(_0x2ddc70[0x0][_0x4132db(0x1e3)]==_0x4132db(0x1fd))var _0x39d202=users[_0x4132db(0x1de)];}}}}}}}_0x4f86c0[_0x4132db(0x1e9)](_0x4132db(0x180),{'success':_0x232d8c[_0x4132db(0x1fe)](_0x4132db(0x205)),'errors':_0x232d8c['flash'](_0x4132db(0x1b1)),'alldata':_0x98c31f,'profile':_0x490f21,'master_shop':_0x2ddc70,'role':_0x1832fe,'product_stock':_0x33086b,'language':_0x39d202});}catch(_0x207039){console[_0x4132db(0x1c4)](_0x207039);}}),router[a0_0x249503(0x1b2)](a0_0x249503(0x1d4),auth,async(_0x5ef9b3,_0x467dd4)=>{const _0x861ab1=a0_0x249503;try{const {username:_0x42ff8c,email:_0x355956,role:_0x35c218}=_0x5ef9b3[_0x861ab1(0x185)],_0x197ce5=_0x5ef9b3[_0x861ab1(0x185)],_0x4cd24e=await profile[_0x861ab1(0x161)]({'email':_0x197ce5[_0x861ab1(0x196)]}),_0xf61700=await master_shop[_0x861ab1(0x167)]();console['log'](_0x861ab1(0x164),_0xf61700);const _0x3705b0=await categories[_0x861ab1(0x167)]({}),_0x5a2a58=await brands[_0x861ab1(0x167)]({}),_0x338605=await units[_0x861ab1(0x167)]({}),_0x19d475=await warehouse[_0x861ab1(0x167)]({'status':_0x861ab1(0x1fa)});if(_0xf61700[0x0][_0x861ab1(0x1e3)]==_0x861ab1(0x1a1))var _0x525b20=users[_0x861ab1(0x173)];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]==_0x861ab1(0x1d5))var _0x525b20=users[_0x861ab1(0x1d5)];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]==_0x861ab1(0x163))var _0x525b20=users[_0x861ab1(0x163)];else{if(_0xf61700[0x0]['language']==_0x861ab1(0x20c))var _0x525b20=users[_0x861ab1(0x20c)];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]==_0x861ab1(0x195))var _0x525b20=users['French'];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]==_0x861ab1(0x210))var _0x525b20=users[_0x861ab1(0x1b6)];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]=='Chinese')var _0x525b20=users[_0x861ab1(0x170)];else{if(_0xf61700[0x0][_0x861ab1(0x1e3)]=='Arabic\x20(ae)')var _0x525b20=users[_0x861ab1(0x1de)];}}}}}}}_0x467dd4[_0x861ab1(0x1e9)](_0x861ab1(0x18f),{'success':_0x5ef9b3[_0x861ab1(0x1fe)]('success'),'errors':_0x5ef9b3[_0x861ab1(0x1fe)](_0x861ab1(0x1b1)),'role':_0x197ce5,'profile':_0x4cd24e,'categories':_0x3705b0,'brands':_0x5a2a58,'master_shop':_0xf61700,'units':_0x338605,'language':_0x525b20,'find_data':_0x19d475});}catch(_0x4ab2d2){console[_0x861ab1(0x1c4)](_0x4ab2d2);}}),router[a0_0x249503(0x15c)](a0_0x249503(0x1d4),auth,upload[a0_0x249503(0x1b9)](a0_0x249503(0x186)),async(_0x25dcf0,_0x3a23f6)=>{const _0x28fd6d=a0_0x249503;try{const {name:_0x3674d3,category:_0x49c91a,brand:_0x453f56,unit:_0x43e76b,alertquantity:_0x23e55d,stock:_0x47bd81,product_code:_0x4d90e2,warehouse:_0x2d7882,primary_ItemCode:_0x50b8be,second_ItemCode:_0x4de5f1,second_unit:_0x207916,maxPerUnit:_0x4f2ebc,MaxPerProduct:_0x357d12}=_0x25dcf0[_0x28fd6d(0x206)],_0x1d90fa=_0x25dcf0[_0x28fd6d(0x1df)]?.[_0x28fd6d(0x1f9)]||_0x28fd6d(0x171),_0x5b105a=new product({'image':_0x1d90fa,'name':_0x3674d3,'category':_0x49c91a,'brand':_0x453f56,'unit':_0x43e76b,'alertquantity':_0x23e55d,'stock':_0x47bd81,'product_code':_0x4d90e2,'warehouse':_0x2d7882,'primary_code':_0x50b8be,'secondary_code':_0x4de5f1,'second_unit':_0x207916,'maxStocks':_0x357d12,'maxProdPerUnit':_0x4f2ebc}),_0x38f4c8=await _0x5b105a[_0x28fd6d(0x1a7)](),_0x2914a4=await categories['findOne']({'name':_0x49c91a});_0x2914a4[_0x28fd6d(0x180)]=parseInt(_0x2914a4[_0x28fd6d(0x180)])+0x1,await _0x2914a4['save']();const _0x497b8e=await brands['findOne']({'name':_0x453f56});_0x497b8e[_0x28fd6d(0x180)]=parseInt(_0x497b8e[_0x28fd6d(0x180)])+0x1,await _0x497b8e[_0x28fd6d(0x1a7)]();const _0x2bcf62=await units['findOne']({'name':_0x43e76b});_0x2bcf62[_0x28fd6d(0x180)]=parseInt(_0x2bcf62[_0x28fd6d(0x180)])+0x1,await _0x2bcf62['save'](),_0x25dcf0[_0x28fd6d(0x1fe)]('success',_0x28fd6d(0x194)),_0x3a23f6[_0x28fd6d(0x1f1)](_0x28fd6d(0x155));}catch(_0x242b64){console[_0x28fd6d(0x1c4)](_0x242b64);}}),router['get']('/view/:id',auth,async(_0x426251,_0x2baa0c)=>{const _0x27b08b=a0_0x249503;try{const {username:_0x52ba5b,email:_0x42c247,role:_0x20aef8}=_0x426251[_0x27b08b(0x185)],_0x2b39fa=_0x426251[_0x27b08b(0x185)],_0x1ee8c9=await profile['findOne']({'email':_0x2b39fa[_0x27b08b(0x196)]}),_0x347121=await master_shop['find']();console[_0x27b08b(0x1c4)](_0x27b08b(0x152),_0x347121);const _0x31144a=_0x426251[_0x27b08b(0x1c2)]['id'],_0x26a8e3=await product[_0x27b08b(0x19f)](_0x31144a),_0x3672e3=await categories['find']({}),_0x3262a7=await brands[_0x27b08b(0x167)]({}),_0x3b333c=await units['find']({}),_0xa36229=await warehouse[_0x27b08b(0x167)]({'status':_0x27b08b(0x1fa)}),_0x477ad8=await units[_0x27b08b(0x1f3)]([{'$group':{'_id':_0x27b08b(0x177),'secondaryunit':{'$first':_0x27b08b(0x184)}}}]);if(_0x347121[0x0][_0x27b08b(0x1e3)]==_0x27b08b(0x1a1))var _0x2528ca=users[_0x27b08b(0x173)];else{if(_0x347121[0x0]['language']==_0x27b08b(0x1d5))var _0x2528ca=users[_0x27b08b(0x1d5)];else{if(_0x347121[0x0]['language']==_0x27b08b(0x163))var _0x2528ca=users['German'];else{if(_0x347121[0x0][_0x27b08b(0x1e3)]=='Spanish')var _0x2528ca=users[_0x27b08b(0x20c)];else{if(_0x347121[0x0][_0x27b08b(0x1e3)]==_0x27b08b(0x195))var _0x2528ca=users['French'];else{if(_0x347121[0x0][_0x27b08b(0x1e3)]==_0x27b08b(0x210))var _0x2528ca=users['Portuguese'];else{if(_0x347121[0x0][_0x27b08b(0x1e3)]==_0x27b08b(0x170))var _0x2528ca=users[_0x27b08b(0x170)];else{if(_0x347121[0x0][_0x27b08b(0x1e3)]==_0x27b08b(0x1fd))var _0x2528ca=users[_0x27b08b(0x1de)];}}}}}}}_0x2baa0c['render'](_0x27b08b(0x1dc),{'success':_0x426251[_0x27b08b(0x1fe)](_0x27b08b(0x205)),'errors':_0x426251[_0x27b08b(0x1fe)]('errors'),'role':_0x2b39fa,'profile':_0x1ee8c9,'alldata':_0x26a8e3,'categories':_0x3672e3,'brands':_0x3262a7,'master_shop':_0x347121,'units':_0x3b333c,'secondunit':_0x477ad8,'find_data':_0xa36229,'language':_0x2528ca});}catch(_0x134716){console['log'](_0x134716);}}),router['post'](a0_0x249503(0x1a3),auth,upload[a0_0x249503(0x1b9)](a0_0x249503(0x186)),async(_0xdbe584,_0x3db7f9)=>{const _0x31df91=a0_0x249503;try{console[_0x31df91(0x1c4)](_0x31df91(0x1f0));const _0x470640=_0xdbe584[_0x31df91(0x1c2)]['id'],_0x26d159=await product[_0x31df91(0x19f)](_0x470640),{image:_0x476469,name:_0x5b1109,category:_0x37853,brand:_0x268ccf,sku:_0x750d0,unit:_0x3639ef,alertquantity:_0x567223,product_code:_0x19bb97,warehouse:_0x4d7f60,primary_ItemCode:_0x9c2b41,second_ItemCode:_0xd46770,second_unit:_0x33dde9,maxPerUnit:_0x236215,MaxPerProduct:_0x270b86,prod_catdata:_0x30f574}=_0xdbe584[_0x31df91(0x206)];_0xdbe584[_0x31df91(0x1df)]&&(_0x26d159['image']=_0xdbe584[_0x31df91(0x1df)][_0x31df91(0x1f9)]);_0x26d159[_0x31df91(0x202)]=_0x5b1109,_0x26d159[_0x31df91(0x154)]=_0x37853,_0x26d159[_0x31df91(0x1e8)]=_0x268ccf,_0x26d159[_0x31df91(0x175)]=_0x750d0,_0x26d159['unit']=_0x3639ef,_0x26d159[_0x31df91(0x172)]=_0x567223,_0x26d159[_0x31df91(0x16a)]=_0x19bb97,_0x26d159[_0x31df91(0x1e2)]=_0x4d7f60,_0x26d159[_0x31df91(0x15f)]=_0x9c2b41,_0x26d159[_0x31df91(0x1a4)]=_0xd46770,_0x26d159['secondary_unit']=_0x33dde9,_0x26d159['maxStocks']=_0x270b86,_0x26d159[_0x31df91(0x193)]=_0x236215,_0x26d159['product_category']=_0x30f574;const _0x51e149=await _0x26d159[_0x31df91(0x1a7)]();console[_0x31df91(0x1c4)](_0x31df91(0x20a),_0x26d159),_0xdbe584[_0x31df91(0x1fe)](_0x31df91(0x205),'product\x20update\x20successfully'),_0x3db7f9[_0x31df91(0x1f1)](_0x31df91(0x155));}catch(_0x42c4c9){console[_0x31df91(0x1c4)](_0x42c4c9);}}),router['get'](a0_0x249503(0x18c),auth,async(_0x29f051,_0x2a7d2c)=>{const _0x37b924=a0_0x249503;try{const {username:_0x3be900,email:_0x402312,role:_0x438aa0}=_0x29f051[_0x37b924(0x185)],_0xb225d2=_0x29f051['user'],_0x1f6550=await profile['findOne']({'email':_0xb225d2['email']}),_0x1de995=await master_shop[_0x37b924(0x167)]();console['log'](_0x37b924(0x1ed),_0x1de995);const _0x4e4e69=_0x29f051[_0x37b924(0x1c2)]['id'],_0xb6207c=await product[_0x37b924(0x19f)](_0x4e4e69);console['log'](_0x37b924(0x197),_0xb6207c);if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x1a1))var _0x5578c8=users['English'];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]=='Hindi')var _0x5578c8=users[_0x37b924(0x1d5)];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x163))var _0x5578c8=users[_0x37b924(0x163)];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x20c))var _0x5578c8=users[_0x37b924(0x20c)];else{if(_0x1de995[0x0]['language']==_0x37b924(0x195))var _0x5578c8=users[_0x37b924(0x195)];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x210))var _0x5578c8=users[_0x37b924(0x1b6)];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x170))var _0x5578c8=users['Chinese'];else{if(_0x1de995[0x0][_0x37b924(0x1e3)]==_0x37b924(0x1fd))var _0x5578c8=users[_0x37b924(0x1de)];}}}}}}}_0x2a7d2c[_0x37b924(0x1e9)](_0x37b924(0x19b),{'success':_0x29f051[_0x37b924(0x1fe)](_0x37b924(0x205)),'errors':_0x29f051[_0x37b924(0x1fe)](_0x37b924(0x1b1)),'role':_0xb225d2,'profile':_0x1f6550,'alldata':_0xb6207c,'master_shop':_0x1de995,'language':_0x5578c8});}catch(_0x4bebc2){console[_0x37b924(0x1c4)](_0x4bebc2);}}),router['get'](a0_0x249503(0x16d),auth,async(_0x5d1795,_0xe25846)=>{const _0x2b4554=a0_0x249503;try{const _0x2a765d=new excelJS[(_0x2b4554(0x1aa))](),_0x211cb1=_0x2a765d[_0x2b4554(0x1a8)](_0x2b4554(0x1d8));return _0x211cb1[_0x2b4554(0x16e)]=[{'header':_0x2b4554(0x18b),'key':_0x2b4554(0x1b7),'width':0xa},{'header':_0x2b4554(0x1bd),'key':'PBrands','width':0xa},{'header':'Units','key':_0x2b4554(0x162),'width':0xa},{'header':_0x2b4554(0x1ee),'key':_0x2b4554(0x157),'width':0xa},{'header':_0x2b4554(0x188),'key':_0x2b4554(0x1d0),'width':0xa},{'header':_0x2b4554(0x168),'key':_0x2b4554(0x1e4),'width':0xa},{'header':'Secondary_Code','key':_0x2b4554(0x1e4),'width':0xa},{'header':_0x2b4554(0x192),'key':'ProductCode','width':0xa},{'header':_0x2b4554(0x1a2),'key':_0x2b4554(0x169),'width':0xa},{'header':_0x2b4554(0x158),'key':_0x2b4554(0x17c),'width':0xa},{'header':'Maximum_Stocks','key':_0x2b4554(0x17c),'width':0xa},{'header':_0x2b4554(0x20e),'key':_0x2b4554(0x1ec),'width':0xa}],_0xe25846[_0x2b4554(0x1d9)](_0x2b4554(0x1cc),_0x2b4554(0x18d)),_0xe25846['setHeader'](_0x2b4554(0x1eb),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x2a765d[_0x2b4554(0x1c7)][_0x2b4554(0x19c)](_0xe25846)[_0x2b4554(0x1a9)](()=>{const _0x42d598=_0x2b4554;_0xe25846[_0x42d598(0x1ab)](0xc8);});}catch(_0x4e4f5b){_0xe25846['status'](0x190)[_0x2b4554(0x1cf)](_0x4e4f5b);}});function a0_0x5f18(_0x375b1a,_0x52f54f){const _0x4a4b23=a0_0x4a4b();return a0_0x5f18=function(_0x5f1874,_0x31fde3){_0x5f1874=_0x5f1874-0x150;let _0x134b54=_0x4a4b23[_0x5f1874];return _0x134b54;},a0_0x5f18(_0x375b1a,_0x52f54f);}function a0_0x4a4b(){const _0x366226=['../public/language/languages.json','/barcode_filter','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/view/add_products','Hindi','/filter_product','toString','Products','setHeader','brands','CODE128','edit_product','now','Arabic','file','/brands/delete/:id','Finished\x20Goods','warehouse','language','ProductCode','$brand','numeric','\x20categories\x20is\x20add\x20successfully','brand','render','14819BqutnT','Content-Disposition','Prod_Cat','barcode\x20Product\x20master','Secondary_Units','$product_docs','hello','redirect','data','aggregate','push','/print_barcode_filter/','exports','\x20<>\x20','Products\x20warehouse_data','filename','Enabled','214492qdmVZc','Units','Arabic\x20(ae)','flash','jsbarcode','/units/:id','Sheets','name','concat','public/Migration','success','body','map','SheetNames','\x20brand\x20is\x20add\x20successfully','product\x20edit','/brands','Spanish','canvas','Products_category','Products\x20master','Portuguese\x20(BR)','findByIdAndDelete','originalname','height','../middleware/auth','/brands/:id','1882860yXjbbR','product_docs','express/lib/response','edit\x20Product\x20master','Maximum_Stocks','category','/products/view','migrate_product_fule','PSecondaryUnits','Alert_QTY','utils','$product_details','length','post','1238yEwPfg','categories\x20data\x20delete\x20successfully','primary_code','express','findOne','PUnits','German','master','$product_category','192lpgQxg','find','Primary_Code','PCat','product_code','long','public/Migration/','/products_export_migrate_file','columns','$product_stock','Chinese','defaultProduct.avif','alertquantity','English','base64','sku','width','$_id','findByIdAndUpdate','426nwLptO','unit','/products/categories','PAlQty','4686FCYnLH','5UHORYe','/units/delete/:id','products','21288CdFKhj','../models/all_models','product_barcode_products','$secondary_unit','user','image','$product_details.product_stock','max_number_per_units','prod_categ','end','Product_Name','/barcode/:id','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','product_stock','add_product','Products\x20find_data','Raw\x20Materials','Product_Code','maxProdPerUnit','product\x20add\x20successfully','French','email','barcode\x20user_id','secondary_unit','units','/products/brands','product_barcode','write','/categories','categories_edit','findById','/products/units','English\x20(US)','Category','/view/:id','secondary_code','83781iUVcnG','bind','save','addWorksheet','then','Workbook','status','295822EbpoCi','_id','forEach','/print_barcode_single/:id','toBuffer','errors','get','addPage','categ','/categories/:id','Portuguese','PName','readFile','single','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','237zLXHre','$product_details.product_name','Brands','$category','public/upload','exceljs','min','params','unit\x20data\x20update\x20successfully','log','\x20unit\x20is\x20add\x20successfully','Secondary_Code','xlsx','message','diskStorage','Router','stock','Content-Type','/units','json','send','MaxperUnits'];a0_0x4a4b=function(){return _0x366226;};return a0_0x4a4b();}const storage1=multer[a0_0x249503(0x1c9)]({'destination':(_0x21ee7b,_0x3106ab,_0x4b6b8d)=>{const _0x5739ad=a0_0x249503;_0x4b6b8d(null,_0x5739ad(0x204));},'filename':(_0x5aebe8,_0x101cf6,_0x250608)=>{const _0x4b8786=a0_0x249503;_0x250608(null,Date[_0x4b8786(0x1dd)]()+_0x101cf6[_0x4b8786(0x212)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x249503(0x15c)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x249503(0x1b9)](a0_0x249503(0x156)),async(_0x1a9e4f,_0xa5b376)=>{const _0x143c5c=a0_0x249503,_0x36c159=_0x1a9e4f['file'][_0x143c5c(0x1f9)],_0x2721c9=await xlsx[_0x143c5c(0x1b8)](_0x143c5c(0x16c)+_0x36c159);let _0x1f651e=_0x2721c9[_0x143c5c(0x208)],_0x20f051=xlsx[_0x143c5c(0x159)]['sheet_to_json'](_0x2721c9[_0x143c5c(0x201)][_0x1f651e[0x0]]);for(const _0xc954d0 of _0x20f051){const _0x486251=_0xc954d0['Product_Name'],_0x1c36e0=_0xc954d0[_0x143c5c(0x1bd)],_0x54c430=_0xc954d0[_0x143c5c(0x1fc)],_0x324323=_0xc954d0[_0x143c5c(0x1ee)],_0x5db4ce=_0xc954d0['Product_Code'],_0x48c37a=_0xc954d0[_0x143c5c(0x1a2)],_0x487e9a=_0xc954d0[_0x143c5c(0x158)],_0x5e6173=_0xc954d0['Primary_Code'],_0x6d852d=_0xc954d0[_0x143c5c(0x1c6)],_0x3c143f=_0xc954d0[_0x143c5c(0x153)],_0x54bf98=_0xc954d0[_0x143c5c(0x188)],_0x263f2d=_0xc954d0[_0x143c5c(0x20e)];try{let _0xf26883=await categories[_0x143c5c(0x161)]({'name':_0x48c37a});if(!_0xf26883){const _0x5d4bca=new categories({'name':_0x48c37a,'products':'0'});_0xf26883=await _0x5d4bca['save']();}let _0x2788ba=await brands[_0x143c5c(0x161)]({'name':_0x1c36e0});if(!_0x2788ba){const _0x2e6360=new brands({'name':_0x1c36e0,'products':'0'});_0x2788ba=await _0x2e6360['save']();}let _0x5ca342=await units[_0x143c5c(0x161)]({'name':_0x54c430,'secondary_unit':_0x324323});if(!_0x5ca342){const _0xd5f4ca=new units({'name':_0x54c430,'secondary_unit':_0x324323,'products':'0'});_0x5ca342=await _0xd5f4ca[_0x143c5c(0x1a7)]();}const _0x3ccc4c=await product['find']({'name':_0x486251,'category':_0xf26883[_0x143c5c(0x202)],'brand':_0x2788ba['name'],'secondary_unit':_0x5ca342[_0x143c5c(0x198)],'product_code':_0x5db4ce});console[_0x143c5c(0x1c4)](_0x3ccc4c[_0x143c5c(0x15b)]+_0x143c5c(0x1f7)+_0xf26883['name']+_0x143c5c(0x1f7)+_0x2788ba[_0x143c5c(0x202)]+_0x143c5c(0x1f7)+_0x5ca342[_0x143c5c(0x198)]+_0x143c5c(0x1f7)+_0x5db4ce+'\x20<>\x20'+_0x486251);if(_0x3ccc4c[_0x143c5c(0x15b)]===0x0){const _0x388a5a=new product({'image':_0x143c5c(0x171),'name':_0x486251,'category':_0xf26883[_0x143c5c(0x202)],'brand':_0x2788ba[_0x143c5c(0x202)],'unit':_0x5ca342[_0x143c5c(0x202)],'alertquantity':_0x487e9a,'product_code':_0x5db4ce,'secondary_unit':_0x5ca342[_0x143c5c(0x198)],'primary_code':_0x5e6173,'secondary_code':_0x6d852d,'maxStocks':_0x3c143f,'maxProdPerUnit':_0x54bf98,'product_category':_0x263f2d}),_0x2d0890=await _0x388a5a['save']();_0xf26883['products']=parseInt(_0xf26883[_0x143c5c(0x180)])+0x1,await _0xf26883[_0x143c5c(0x1a7)](),_0x2788ba['products']=parseInt(_0x2788ba[_0x143c5c(0x180)])+0x1,await _0x2788ba[_0x143c5c(0x1a7)](),_0x5ca342['products']=parseInt(_0x5ca342[_0x143c5c(0x180)])+0x1,await _0x5ca342['save'](),_0x1a9e4f[_0x143c5c(0x1fe)]('success',_0x486251+'\x20added\x20successfully');}else{console[_0x143c5c(0x1c4)](_0x3ccc4c[0x0]);const _0x265500=_0x3ccc4c[0x0];_0x265500[_0x143c5c(0x154)]=_0xf26883[_0x143c5c(0x202)],_0x265500[_0x143c5c(0x1e8)]=_0x2788ba[_0x143c5c(0x202)],_0x265500[_0x143c5c(0x17a)]=_0x5ca342['name'],_0x265500[_0x143c5c(0x172)]=_0x487e9a,_0x265500[_0x143c5c(0x16a)]=_0x5db4ce,_0x265500[_0x143c5c(0x198)]=_0x5ca342[_0x143c5c(0x198)],_0x265500['primary_code']=_0x5e6173,_0x265500[_0x143c5c(0x1a4)]=_0x6d852d,_0x265500['maxStocks']=_0x3c143f,_0x265500[_0x143c5c(0x193)]=_0x54bf98,_0x265500['product_category']=_0x263f2d;const _0x3682f9=await _0x265500[_0x143c5c(0x1a7)]();_0x1a9e4f[_0x143c5c(0x1fe)](_0x143c5c(0x205),_0x3682f9[_0x143c5c(0x202)]+'\x20Edit\x20Successfully');}}catch(_0x3d8de7){_0xa5b376[_0x143c5c(0x1ab)](0x1f4)[_0x143c5c(0x1ce)]({'proderror':_0x3d8de7[_0x143c5c(0x1c8)],'aproduct':_0x486251});}}_0xa5b376[_0x143c5c(0x1f1)]('/products/view');}),router[a0_0x249503(0x15c)]('/select_data',auth,async(_0x123fa6,_0x4c2a2d)=>{const _0x2ce22e=a0_0x249503;try{console[_0x2ce22e(0x1c4)](_0x123fa6['body']);const {data_cateory:_0x3352e9,datachoose:_0x54b769}=_0x123fa6[_0x2ce22e(0x206)];var _0x229e77;if(_0x54b769==_0x2ce22e(0x189))_0x229e77=await product[_0x2ce22e(0x1f3)]([{'$group':{'_id':_0x2ce22e(0x165)}}]);else{if(_0x54b769==_0x2ce22e(0x1da))_0x229e77=await product[_0x2ce22e(0x1f3)]([{'$match':{'product_category':_0x3352e9}},{'$group':{'_id':_0x2ce22e(0x1e5)}}]);else _0x54b769=='categ'&&(_0x229e77=await product[_0x2ce22e(0x1f3)]([{'$match':{'product_category':_0x3352e9}},{'$group':{'_id':_0x2ce22e(0x1be)}}]));}_0x4c2a2d[_0x2ce22e(0x1ce)](_0x229e77);}catch(_0x20a5f1){_0x4c2a2d['json']({'message':_0x20a5f1[_0x2ce22e(0x1c8)]});}}),router[a0_0x249503(0x15c)](a0_0x249503(0x1d6),auth,async(_0x4a369f,_0x463519)=>{const _0x441e84=a0_0x249503;try{const {data_choosing:_0x47cdad,data_selected:_0x3b05ae}=_0x4a369f[_0x441e84(0x206)];var _0x2d3aa4;if(_0x47cdad==_0x441e84(0x189))_0x2d3aa4=await product[_0x441e84(0x1f3)]([{'$match':{'product_category':_0x3b05ae}}]);else{if(_0x47cdad==_0x441e84(0x1da))_0x2d3aa4=await product[_0x441e84(0x1f3)]([{'$match':{'brand':_0x3b05ae}}]);else _0x47cdad==_0x441e84(0x1b4)&&(_0x2d3aa4=await product[_0x441e84(0x1f3)]([{'$match':{'category':_0x3b05ae}}]));}_0x463519[_0x441e84(0x1ce)](_0x2d3aa4);}catch(_0x171f96){_0x463519[_0x441e84(0x1ce)]({'message':_0x171f96['message']});}}),router[a0_0x249503(0x1b2)]('/print_barcode',auth,async(_0x532537,_0x4f5440)=>{const _0x2dadca=a0_0x249503,_0x3bf1ae=_0x532537[_0x2dadca(0x185)],_0x51b776=await profile[_0x2dadca(0x161)]({'email':_0x3bf1ae[_0x2dadca(0x196)]}),_0x543598=await master_shop[_0x2dadca(0x167)](),_0x952062=await product['find']();if(_0x543598[0x0]['language']==_0x2dadca(0x1a1))var _0x415ae8=users[_0x2dadca(0x173)];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x1d5))var _0x415ae8=users[_0x2dadca(0x1d5)];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x163))var _0x415ae8=users['German'];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x20c))var _0x415ae8=users[_0x2dadca(0x20c)];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x195))var _0x415ae8=users[_0x2dadca(0x195)];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x210))var _0x415ae8=users[_0x2dadca(0x1b6)];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x170))var _0x415ae8=users['Chinese'];else{if(_0x543598[0x0][_0x2dadca(0x1e3)]==_0x2dadca(0x1fd))var _0x415ae8=users[_0x2dadca(0x1de)];}}}}}}}_0x4f5440['render'](_0x2dadca(0x183),{'success':_0x532537[_0x2dadca(0x1fe)](_0x2dadca(0x205)),'errors':_0x532537['flash'](_0x2dadca(0x1b1)),'role':_0x3bf1ae,'profile':_0x51b776,'products':_0x952062,'master_shop':_0x543598,'language':_0x415ae8});}),router[a0_0x249503(0x15c)]('/barcode_data',auth,async(_0x2d3a72,_0x1f05ea)=>{const _0x468889=a0_0x249503,_0x5c19c4=await product[_0x468889(0x167)]();_0x1f05ea[_0x468889(0x1ce)]({'data':_0x5c19c4});}),router[a0_0x249503(0x15c)](a0_0x249503(0x1d2),auth,async(_0x4a0d53,_0x3548f0)=>{const _0x29fdb2=a0_0x249503;try{const {dataProdCat:_0x2a9b6,dataProdIdentity:_0x609b4e}=_0x4a0d53['body'];var _0x22435c;switch(_0x2a9b6){case'fg':switch(_0x609b4e){case _0x29fdb2(0x1bd):_0x22435c=await product[_0x29fdb2(0x1f3)]([{'$match':{'product_category':_0x29fdb2(0x1e1)}},{'$group':{'_id':_0x29fdb2(0x1e5)}},{'$project':{'brand':'$_id'}}]);break;case _0x29fdb2(0x1a2):_0x22435c=await product[_0x29fdb2(0x1f3)]([{'$match':{'product_category':_0x29fdb2(0x1e1)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x29fdb2(0x177)}}]);break;}break;case'rm':switch(_0x609b4e){case _0x29fdb2(0x1bd):_0x22435c=await product[_0x29fdb2(0x1f3)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x29fdb2(0x1e5)}},{'$project':{'brand':_0x29fdb2(0x177)}}]);break;case'Category':_0x22435c=await product[_0x29fdb2(0x1f3)]([{'$match':{'product_category':_0x29fdb2(0x191)}},{'$group':{'_id':_0x29fdb2(0x1be)}},{'$project':{'category':_0x29fdb2(0x177)}}]);break;}break;}_0x3548f0[_0x29fdb2(0x1ce)](_0x22435c);}catch(_0x34c728){_0x3548f0[_0x29fdb2(0x1ce)]({'message':_0x34c728[_0x29fdb2(0x1c8)]});}}),router[a0_0x249503(0x15c)](a0_0x249503(0x1f5),auth,async(_0x1644de,_0x45fd06)=>{const _0x3b39fb=a0_0x249503;try{console['log'](_0x1644de[_0x3b39fb(0x206)]);const {prod_cat:_0x256686,identity:_0x1cf4c6,valueData:_0x17d7fc,typeofbarcode:_0x23d2e1}=_0x1644de['body'];let _0x3584b6;switch(_0x256686){case'fg':if(_0x1cf4c6==_0x3b39fb(0x1bd))_0x3584b6=await product[_0x3b39fb(0x1f3)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x17d7fc}}]);else _0x1cf4c6==_0x3b39fb(0x1a2)&&(_0x3584b6=await product[_0x3b39fb(0x1f3)]([{'$match':{'product_category':_0x3b39fb(0x1e1),'category':_0x17d7fc}}]));break;case'rm':if(_0x1cf4c6==_0x3b39fb(0x1bd))_0x3584b6=await product[_0x3b39fb(0x1f3)]([{'$match':{'product_category':_0x3b39fb(0x191),'brand':_0x17d7fc}}]);else _0x1cf4c6==_0x3b39fb(0x1a2)&&(_0x3584b6=await product[_0x3b39fb(0x1f3)]([{'$match':{'product_category':_0x3b39fb(0x191),'category':_0x17d7fc}}]));break;}const _0x266baf=_0x206ae7=>_0x206ae7*0x48,_0x43d062={'width':0x3,'height':0x1},_0xa68a65=new PDFDocument({'margin':_0x266baf(0.75),'size':[_0x266baf(_0x43d062[_0x3b39fb(0x176)]),_0x266baf(_0x43d062['height'])],'bufferPages':!![]}),_0x424219=_0x3584b6[_0x3b39fb(0x15b)];for(let _0xe1bc76=0x0;_0xe1bc76<=_0x424219;_0xe1bc76++){if(_0xe1bc76!=_0x424219){const _0x346f7e=_0x3584b6[_0xe1bc76][_0x3b39fb(0x202)],_0x2b34c6=_0x3584b6[_0xe1bc76][_0x3b39fb(0x15f)],_0x1043b1=_0x3584b6[_0xe1bc76]['secondary_code'],_0x21d7fa=_0x3584b6[_0xe1bc76][_0x3b39fb(0x16a)];var _0x8bacde;switch(_0x23d2e1){case'1':_0x8bacde=_0x2b34c6;break;case'2':_0x8bacde=_0x1043b1;break;case'3':_0x8bacde=_0x21d7fa;break;}const _0x201391={'width':0xd2,'height':0x64},_0x510b95={'width':_0x266baf(_0x43d062[_0x3b39fb(0x176)]),'height':_0x266baf(_0x43d062[_0x3b39fb(0x213)])},_0x5243f1=new Canvas();JsBarcode(_0x5243f1,_0x8bacde,{'format':_0x3b39fb(0x1db),'height':_0x201391['height'],'displayValue':!![],'text':_0x8bacde});const _0xa69a5c=_0x5243f1[_0x3b39fb(0x1b0)](),_0x1511ab=_0x510b95[_0x3b39fb(0x176)]/_0x201391['width'],_0x4d812f=_0x510b95[_0x3b39fb(0x213)]/_0x201391[_0x3b39fb(0x213)],_0x5db039=Math[_0x3b39fb(0x1c1)](_0x1511ab,_0x4d812f),_0x562d93=_0x201391[_0x3b39fb(0x176)]*_0x5db039,_0xc38cda=_0x201391[_0x3b39fb(0x213)]*_0x5db039,_0x9144c0=(_0x510b95[_0x3b39fb(0x176)]-_0x562d93)/0x2,_0xa3a093=(_0x510b95['height']-_0xc38cda)/0x2;_0xa68a65[_0x3b39fb(0x186)](_0xa69a5c,_0x9144c0,_0xa3a093,{'width':_0x562d93,'height':_0xc38cda}),_0xe1bc76!=_0x424219&&_0xa68a65[_0x3b39fb(0x1b3)]();}}const _0x4b484f=[];_0xa68a65['on'](_0x3b39fb(0x1f2),_0x4b484f[_0x3b39fb(0x1f4)]['bind'](_0x4b484f)),_0xa68a65['on'](_0x3b39fb(0x18a),()=>{const _0x42f8fb=_0x3b39fb,_0x518a65=Buffer[_0x42f8fb(0x203)](_0x4b484f),_0x460984=_0x518a65['toString']('base64');_0x45fd06['json']({'pdfContent':_0x460984});}),_0xa68a65['end']();}catch(_0x11a264){_0x45fd06[_0x3b39fb(0x1ce)]({'message':_0x11a264[_0x3b39fb(0x1c8)]});}}),router[a0_0x249503(0x15c)]('/print_barcode_filter_search/',auth,async(_0x5ad0c4,_0x3901ad)=>{const _0x4d6c42=a0_0x249503;try{console[_0x4d6c42(0x1c4)](_0x5ad0c4[_0x4d6c42(0x206)]);const {prod_cat:_0xfb9e5b,identity:_0xc45b48,valueData:_0x131896}=_0x5ad0c4[_0x4d6c42(0x206)];let _0x3d80a1;switch(_0xfb9e5b){case'fg':if(_0xc45b48==_0x4d6c42(0x1bd))_0x3d80a1=await product[_0x4d6c42(0x1f3)]([{'$match':{'product_category':_0x4d6c42(0x1e1),'brand':_0x131896}}]);else _0xc45b48==_0x4d6c42(0x1a2)&&(_0x3d80a1=await product[_0x4d6c42(0x1f3)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x131896}}]));break;case'rm':if(_0xc45b48==_0x4d6c42(0x1bd))_0x3d80a1=await product[_0x4d6c42(0x1f3)]([{'$match':{'product_category':_0x4d6c42(0x191),'brand':_0x131896}}]);else _0xc45b48==_0x4d6c42(0x1a2)&&(_0x3d80a1=await product['aggregate']([{'$match':{'product_category':_0x4d6c42(0x191),'category':_0x131896}}]));break;}_0x3901ad['json']({'data':_0x3d80a1});}catch(_0x25c28b){_0x3901ad['json']({'message':_0x25c28b[_0x4d6c42(0x1c8)]});}}),router['post'](a0_0x249503(0x1af),auth,async(_0x17e9df,_0x15198f)=>{const _0x5173e6=a0_0x249503;try{const _0x4d5db5=_0x17e9df['params']['id'],{copies:_0x28a045,typeofbarcode:_0x5be3c3}=_0x17e9df[_0x5173e6(0x206)];var _0x245854=await product[_0x5173e6(0x19f)](_0x4d5db5);const _0x34c5fe=_0x2806ce=>_0x2806ce*0x48,_0x3632f7={'width':0x3,'height':0x1},_0x198ca6=new PDFDocument({'margin':_0x34c5fe(0.75),'size':[_0x34c5fe(_0x3632f7[_0x5173e6(0x176)]),_0x34c5fe(_0x3632f7['height'])],'bufferPages':!![]}),_0x518bc3=_0x28a045,_0x509509=_0x245854[_0x5173e6(0x202)],_0x3d18d0=_0x245854[_0x5173e6(0x15f)],_0x39baa0=_0x245854['secondary_code'],_0x124173=_0x245854[_0x5173e6(0x16a)];let _0x92cde3;switch(_0x5be3c3){case'1':_0x92cde3=_0x3d18d0;break;case'2':_0x92cde3=_0x39baa0;break;case'3':_0x92cde3=_0x124173;break;}const _0x2448c5={'width':0xd2,'height':0x64},_0x48b007={'width':_0x34c5fe(_0x3632f7['width']),'height':_0x34c5fe(_0x3632f7[_0x5173e6(0x213)])};for(let _0x387905=0x1;_0x387905<=_0x518bc3;_0x387905++){const _0x1c94c1=new Canvas();JsBarcode(_0x1c94c1,_0x92cde3,{'format':_0x5173e6(0x1db),'height':_0x2448c5[_0x5173e6(0x213)],'displayValue':!![],'text':_0x92cde3});const _0x2b7924=_0x1c94c1[_0x5173e6(0x1b0)](),_0x4a2587=_0x48b007[_0x5173e6(0x176)]/_0x2448c5['width'],_0x337f18=_0x48b007[_0x5173e6(0x213)]/_0x2448c5['height'],_0x214654=Math[_0x5173e6(0x1c1)](_0x4a2587,_0x337f18),_0x8130af=_0x2448c5[_0x5173e6(0x176)]*_0x214654,_0x3d23a1=_0x2448c5[_0x5173e6(0x213)]*_0x214654,_0xf40958=(_0x48b007[_0x5173e6(0x176)]-_0x8130af)/0x2,_0x2a6599=(_0x48b007[_0x5173e6(0x213)]-_0x3d23a1)/0x2;_0x198ca6[_0x5173e6(0x186)](_0x2b7924,_0xf40958,_0x2a6599,{'width':_0x8130af,'height':_0x3d23a1}),_0x387905!=_0x518bc3&&_0x198ca6[_0x5173e6(0x1b3)]();}const _0x2931bc=[];_0x198ca6['on'](_0x5173e6(0x1f2),_0x2931bc[_0x5173e6(0x1f4)][_0x5173e6(0x1a6)](_0x2931bc)),_0x198ca6['on']('end',()=>{const _0x3dc1f9=_0x5173e6,_0x289129=Buffer[_0x3dc1f9(0x203)](_0x2931bc),_0x3d13f1=_0x289129[_0x3dc1f9(0x1d7)](_0x3dc1f9(0x174));_0x15198f[_0x3dc1f9(0x1ce)]({'pdfContent':_0x3d13f1});}),_0x198ca6[_0x5173e6(0x18a)]();}catch(_0x1ebef5){_0x15198f[_0x5173e6(0x1ce)]({'message':_0x1ebef5['message']});}}),module[a0_0x249503(0x1f6)]=router;