const a0_0x1605ed=a0_0x1f48;(function(_0x24494c,_0x55fa0c){const _0x4b23c8=a0_0x1f48,_0x59eedc=_0x24494c();while(!![]){try{const _0x491bb3=parseInt(_0x4b23c8(0x143))/0x1*(parseInt(_0x4b23c8(0x1be))/0x2)+parseInt(_0x4b23c8(0x1de))/0x3+-parseInt(_0x4b23c8(0x1a1))/0x4*(-parseInt(_0x4b23c8(0x18a))/0x5)+parseInt(_0x4b23c8(0x13d))/0x6*(parseInt(_0x4b23c8(0x1c4))/0x7)+parseInt(_0x4b23c8(0x1ba))/0x8*(parseInt(_0x4b23c8(0x1ae))/0x9)+parseInt(_0x4b23c8(0x154))/0xa*(parseInt(_0x4b23c8(0x1e2))/0xb)+parseInt(_0x4b23c8(0x1d1))/0xc*(-parseInt(_0x4b23c8(0x15b))/0xd);if(_0x491bb3===_0x55fa0c)break;else _0x59eedc['push'](_0x59eedc['shift']());}catch(_0x3c31cb){_0x59eedc['push'](_0x59eedc['shift']());}}}(a0_0x23b3,0x8c0f7));const express=require(a0_0x1605ed(0x191)),res=require(a0_0x1605ed(0x1a9)),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x1605ed(0x192)),auth=require(a0_0x1605ed(0x1d0)),users=require('../public/language/languages.json'),excelJS=require(a0_0x1605ed(0x149)),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x1605ed(0x165)),PDFDocument=require(a0_0x1605ed(0x161));function a0_0x23b3(){const _0x114e87=['French','Primary_Code','public/Migration','email','Brands','product_code','categories_edit','warehouse','filename','$secondary_unit','PUnits','width','/categories/delete/:id','product_docs','/select_data','$product_details','456TDNoWd','Finished\x20Goods','Hindi','public/Migration/','findByIdAndDelete','height','18WUijkN','originalname','save','\x20brand\x20is\x20add\x20successfully','brand','PBrands','exceljs','setHeader','Category','/print_barcode','aggregate','/brands/:id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','user','findOne','\x20unit\x20is\x20add\x20successfully','send','211790JUlKXf','edit\x20Product\x20master','/products/units','product_category','PCat','push','master','13irlswO','params','json','/print_barcode_filter/','now','\x20Edit\x20Successfully','pdfkit-table','map','Spanish','unit\x20data\x20delete\x20successfully','canvas','$brand','add_product','render','stock','secondary_unit','Maximum_Stocks','long','/categories','secondary_code','PAlQty','Product_Name','$product_category','ProductCode','end','/products_import_migrate_file','German','/view/:id','brands','post','/barcode/:id','file','English\x20(US)','category','single','/categories/:id','flash','then','/print_barcode_single/:id','body','barcode\x20user_id','unit\x20data\x20update\x20successfully','Secondary_Code','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','English','get','Portuguese\x20(BR)','1015YbasuU','product\x20edit','/barcode_filter','$product_name','/brands/delete/:id','$product_docs','length','express','../models/all_models','product_stock','Arabic','$product_stock','concat','hello','columns','toString','SheetNames','/products/view','_id','maxStocks','categories','alertquantity','categories\x20data\x20delete\x20successfully','76Aizvsf','base64','/filter_product','Units','name','sku','toBuffer','Alert_QTY','express/lib/response','PName','language','utils','/view','11313uNPReb','errors','units','\x20added\x20successfully','Products','Raw\x20Materials','message','/units/:id','$product_details.product_stock','\x20<>\x20','addPage','max_number_per_units','5864amekmD','defaultProduct.avif','/print_barcode_filter_search/','findByIdAndUpdate','86642tbcVHE','$_id','Arabic\x20(ae)','maxProdPerUnit','brand\x20data\x20update\x20successfully','find','23394uNZFlM','categ','Enabled','products','brand\x20data\x20delete\x20successfully','/products/brands','image','Chinese','unit','sheet_to_json','numeric','findById','../middleware/auth','38781924evnvWx','product_details.product_name','data','/units','$category','public/upload','CODE128','Secondary_Units','primary_code','bind','redirect','success','/brands','3379260kueAdN','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/categories','\x20categories\x20is\x20add\x20successfully','374rkABOl','status','/view/add_products','Portuguese','Products\x20warehouse_data','migrate_product_fule','attachment;\x20filename=Product_Migration_File.xlsx','log','Workbook'];a0_0x23b3=function(){return _0x114e87;};return a0_0x23b3();}router[a0_0x1605ed(0x188)](a0_0x1605ed(0x16d),auth,async(_0x376434,_0x242b4d)=>{const _0x522263=a0_0x1605ed;try{const {username:_0x78e43b,email:_0x59d91f,role:_0x41cf81}=_0x376434[_0x522263(0x150)],_0x2f5e5f=_0x376434[_0x522263(0x150)],_0x35aaef=await profile['findOne']({'email':_0x2f5e5f[_0x522263(0x1ee)]}),_0x1e0259=await master_shop['find']();console['log'](_0x522263(0x15a),_0x1e0259);const _0x9d3cf9=await categories['find']();if(_0x1e0259[0x0][_0x522263(0x1ab)]==_0x522263(0x17b))var _0x4f3fba=users[_0x522263(0x187)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]=='Hindi')var _0x4f3fba=users[_0x522263(0x13f)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]==_0x522263(0x175))var _0x4f3fba=users[_0x522263(0x175)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]==_0x522263(0x163))var _0x4f3fba=users[_0x522263(0x163)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]=='French')var _0x4f3fba=users[_0x522263(0x1eb)];else{if(_0x1e0259[0x0]['language']==_0x522263(0x189))var _0x4f3fba=users[_0x522263(0x1e5)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]==_0x522263(0x1cb))var _0x4f3fba=users[_0x522263(0x1cb)];else{if(_0x1e0259[0x0][_0x522263(0x1ab)]==_0x522263(0x1c0))var _0x4f3fba=users[_0x522263(0x194)];}}}}}}}_0x242b4d['render'](_0x522263(0x19e),{'success':_0x376434[_0x522263(0x17f)]('success'),'errors':_0x376434[_0x522263(0x17f)](_0x522263(0x1af)),'role':_0x2f5e5f,'profile':_0x35aaef,'user':_0x9d3cf9,'master_shop':_0x1e0259,'language':_0x4f3fba});}catch(_0x76d7f2){console['log'](_0x76d7f2);}}),router['post']('/categories',auth,async(_0x433b6a,_0x5167f1)=>{const _0x16e7a6=a0_0x1605ed;try{const {name:_0x33cc79,products:_0x450748}=_0x433b6a[_0x16e7a6(0x182)],_0x5888d6=new categories({'name':_0x33cc79,'products':_0x450748}),_0x3f4028=await categories['findOne']({'name':_0x33cc79});_0x3f4028?_0x433b6a[_0x16e7a6(0x17f)]('errors',_0x33cc79+_0x16e7a6(0x186)):_0x433b6a[_0x16e7a6(0x17f)](_0x16e7a6(0x1dc),_0x33cc79+_0x16e7a6(0x1e1));const _0x167cc8=await _0x5888d6[_0x16e7a6(0x145)]();_0x5167f1['redirect']('/products/categories');}catch(_0x20fe3e){console[_0x16e7a6(0x1e9)](_0x20fe3e);}}),router['get'](a0_0x1605ed(0x17e),auth,async(_0x3c892a,_0x4c2871)=>{const _0x5e6f04=a0_0x1605ed;try{const {username:_0x2da64b,email:_0x324127,role:_0x32ca09}=_0x3c892a['user'],_0x1106d7=_0x3c892a[_0x5e6f04(0x150)],_0x1c79ff=await profile['findOne']({'email':_0x1106d7['email']}),_0x2539c8=await master_shop['find']();console[_0x5e6f04(0x1e9)](_0x5e6f04(0x15a),_0x2539c8);const _0x1c7498=_0x3c892a['params']['id'];console['log'](_0x1c7498);const _0x1c9098=await categories['findById'](_0x1c7498);if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]==_0x5e6f04(0x17b))var _0x4ccd58=users[_0x5e6f04(0x187)];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]=='Hindi')var _0x4ccd58=users[_0x5e6f04(0x13f)];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]==_0x5e6f04(0x175))var _0x4ccd58=users['German'];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]==_0x5e6f04(0x163))var _0x4ccd58=users[_0x5e6f04(0x163)];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]==_0x5e6f04(0x1eb))var _0x4ccd58=users[_0x5e6f04(0x1eb)];else{if(_0x2539c8[0x0]['language']==_0x5e6f04(0x189))var _0x4ccd58=users[_0x5e6f04(0x1e5)];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]==_0x5e6f04(0x1cb))var _0x4ccd58=users[_0x5e6f04(0x1cb)];else{if(_0x2539c8[0x0][_0x5e6f04(0x1ab)]=='Arabic\x20(ae)')var _0x4ccd58=users[_0x5e6f04(0x194)];}}}}}}}_0x4c2871[_0x5e6f04(0x168)](_0x5e6f04(0x19e),{'success':_0x3c892a[_0x5e6f04(0x17f)](_0x5e6f04(0x1dc)),'errors':_0x3c892a[_0x5e6f04(0x17f)]('errors'),'role':_0x1106d7,'profile':_0x1c79ff,'master_shop':_0x2539c8,'user':_0x1c9098,'language':_0x4ccd58});}catch(_0xb80a8d){console[_0x5e6f04(0x1e9)](_0xb80a8d);}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x17e),auth,async(_0x118c15,_0x3af0c5)=>{const _0x275c67=a0_0x1605ed;try{const _0x49535b=_0x118c15[_0x275c67(0x15c)]['id'],_0x49a823=await categories[_0x275c67(0x1bd)](_0x49535b,_0x118c15[_0x275c67(0x182)]);_0x118c15[_0x275c67(0x17f)](_0x275c67(0x1dc),''+users[_0x275c67(0x133)]),_0x3af0c5[_0x275c67(0x1db)](_0x275c67(0x1e0));}catch(_0x3114bc){console[_0x275c67(0x1e9)](_0x3114bc);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x139),auth,async(_0x10d7ba,_0x38e2f0)=>{const _0x59fa18=a0_0x1605ed;try{const _0x59d45f=_0x10d7ba['params']['id'],_0x3a1f15=await categories[_0x59fa18(0x141)](_0x59d45f);_0x10d7ba['flash'](_0x59fa18(0x1dc),_0x59fa18(0x1a0)),_0x38e2f0[_0x59fa18(0x1db)]('/products/categories');}catch(_0x208eb8){console[_0x59fa18(0x1e9)](_0x208eb8);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x1dd),auth,async(_0x3c7d23,_0x37b080)=>{const _0x409bda=a0_0x1605ed;try{const {username:_0x3eea22,email:_0x34f21c,role:_0x58374b}=_0x3c7d23[_0x409bda(0x150)],_0x7ba61d=_0x3c7d23[_0x409bda(0x150)],_0x141fee=await profile[_0x409bda(0x151)]({'email':_0x7ba61d[_0x409bda(0x1ee)]}),_0x11216c=await master_shop[_0x409bda(0x1c3)]();console[_0x409bda(0x1e9)](_0x409bda(0x15a),_0x11216c);const _0xc8a4d9=await brands[_0x409bda(0x1c3)]();if(_0x11216c[0x0]['language']=='English\x20(US)')var _0x2445ed=users['English'];else{if(_0x11216c[0x0][_0x409bda(0x1ab)]==_0x409bda(0x13f))var _0x2445ed=users[_0x409bda(0x13f)];else{if(_0x11216c[0x0][_0x409bda(0x1ab)]==_0x409bda(0x175))var _0x2445ed=users[_0x409bda(0x175)];else{if(_0x11216c[0x0]['language']=='Spanish')var _0x2445ed=users[_0x409bda(0x163)];else{if(_0x11216c[0x0][_0x409bda(0x1ab)]=='French')var _0x2445ed=users[_0x409bda(0x1eb)];else{if(_0x11216c[0x0][_0x409bda(0x1ab)]==_0x409bda(0x189))var _0x2445ed=users[_0x409bda(0x1e5)];else{if(_0x11216c[0x0]['language']==_0x409bda(0x1cb))var _0x2445ed=users[_0x409bda(0x1cb)];else{if(_0x11216c[0x0][_0x409bda(0x1ab)]==_0x409bda(0x1c0))var _0x2445ed=users['Arabic'];}}}}}}}_0x37b080[_0x409bda(0x168)](_0x409bda(0x177),{'success':_0x3c7d23[_0x409bda(0x17f)](_0x409bda(0x1dc)),'errors':_0x3c7d23['flash'](_0x409bda(0x1af)),'role':_0x7ba61d,'profile':_0x141fee,'master_shop':_0x11216c,'user':_0xc8a4d9,'language':_0x2445ed});}catch(_0x10d210){console['log'](_0x10d210);}}),router[a0_0x1605ed(0x178)]('/brands',auth,async(_0x159bad,_0x4711e4)=>{const _0x5e7a9b=a0_0x1605ed;try{const {name:_0xecd39f,products:_0x335c85}=_0x159bad[_0x5e7a9b(0x182)],_0x42185e=new brands({'name':_0xecd39f,'products':_0x335c85}),_0x246d67=await brands[_0x5e7a9b(0x151)]({'name':_0xecd39f});_0x246d67?_0x159bad[_0x5e7a9b(0x17f)]('errors',_0xecd39f+_0x5e7a9b(0x1df)):_0x159bad['flash']('success',_0xecd39f+_0x5e7a9b(0x146));const _0x15e9fd=await _0x42185e[_0x5e7a9b(0x145)]();_0x4711e4[_0x5e7a9b(0x1db)](_0x5e7a9b(0x1c9));}catch(_0x35f2a9){console[_0x5e7a9b(0x1e9)](_0x35f2a9);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x14e),auth,async(_0x5f57dc,_0x21a43e)=>{const _0x14d254=a0_0x1605ed;try{const {username:_0x2e91e9,email:_0x31966e,role:_0x31c02a}=_0x5f57dc[_0x14d254(0x150)],_0x583e23=_0x5f57dc[_0x14d254(0x150)],_0x3cba46=await profile['findOne']({'email':_0x583e23[_0x14d254(0x1ee)]}),_0x768807=await master_shop['find']();console[_0x14d254(0x1e9)](_0x14d254(0x15a),_0x768807);const _0x83e5d8=_0x5f57dc[_0x14d254(0x15c)]['id'];console[_0x14d254(0x1e9)](_0x83e5d8);const _0x25f05e=await brands[_0x14d254(0x1cf)](_0x83e5d8);if(_0x768807[0x0][_0x14d254(0x1ab)]==_0x14d254(0x17b))var _0x1bad68=users['English'];else{if(_0x768807[0x0]['language']==_0x14d254(0x13f))var _0x1bad68=users[_0x14d254(0x13f)];else{if(_0x768807[0x0]['language']==_0x14d254(0x175))var _0x1bad68=users[_0x14d254(0x175)];else{if(_0x768807[0x0][_0x14d254(0x1ab)]=='Spanish')var _0x1bad68=users[_0x14d254(0x163)];else{if(_0x768807[0x0][_0x14d254(0x1ab)]==_0x14d254(0x1eb))var _0x1bad68=users[_0x14d254(0x1eb)];else{if(_0x768807[0x0][_0x14d254(0x1ab)]==_0x14d254(0x189))var _0x1bad68=users[_0x14d254(0x1e5)];else{if(_0x768807[0x0]['language']=='Chinese')var _0x1bad68=users[_0x14d254(0x1cb)];else{if(_0x768807[0x0][_0x14d254(0x1ab)]==_0x14d254(0x1c0))var _0x1bad68=users[_0x14d254(0x194)];}}}}}}}_0x21a43e['render']('brands',{'success':_0x5f57dc[_0x14d254(0x17f)]('success'),'errors':_0x5f57dc[_0x14d254(0x17f)](_0x14d254(0x1af)),'role':_0x583e23,'profile':_0x3cba46,'master_shop':_0x768807,'user':_0x25f05e,'language':_0x1bad68});}catch(_0x21d943){console[_0x14d254(0x1e9)](_0x21d943);}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x14e),auth,async(_0x3a4311,_0x4f2933)=>{const _0x31b762=a0_0x1605ed;try{const _0x58ea77=_0x3a4311['params']['id'],_0x2e9631=await brands[_0x31b762(0x1bd)](_0x58ea77,_0x3a4311[_0x31b762(0x182)]);_0x3a4311['flash'](_0x31b762(0x1dc),_0x31b762(0x1c2)),_0x4f2933[_0x31b762(0x1db)]('/products/brands');}catch(_0x4178c0){console[_0x31b762(0x1e9)](_0x4178c0);}}),router['get'](a0_0x1605ed(0x18e),auth,async(_0x55e888,_0x61be6b)=>{const _0x2e376d=a0_0x1605ed;try{const _0x45eb59=_0x55e888['params']['id'],_0xb522f6=await brands[_0x2e376d(0x141)](_0x45eb59);_0x55e888['flash'](_0x2e376d(0x1dc),_0x2e376d(0x1c8)),_0x61be6b[_0x2e376d(0x1db)](_0x2e376d(0x1c9));}catch(_0x289c3d){console[_0x2e376d(0x1e9)](_0x289c3d);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x1d4),auth,async(_0x1999b8,_0x4618ed)=>{const _0xd16015=a0_0x1605ed;try{const {username:_0x16d604,email:_0x278934,role:_0xdc4940}=_0x1999b8[_0xd16015(0x150)],_0x21acbe=_0x1999b8['user'],_0x1efcc1=await profile[_0xd16015(0x151)]({'email':_0x21acbe[_0xd16015(0x1ee)]}),_0x7ab03c=await master_shop['find']();console[_0xd16015(0x1e9)]('master',_0x7ab03c);const _0x14f255=await units[_0xd16015(0x1c3)]();if(_0x7ab03c[0x0][_0xd16015(0x1ab)]==_0xd16015(0x17b))var _0x3dbd7c=users[_0xd16015(0x187)];else{if(_0x7ab03c[0x0]['language']==_0xd16015(0x13f))var _0x3dbd7c=users[_0xd16015(0x13f)];else{if(_0x7ab03c[0x0][_0xd16015(0x1ab)]==_0xd16015(0x175))var _0x3dbd7c=users[_0xd16015(0x175)];else{if(_0x7ab03c[0x0][_0xd16015(0x1ab)]=='Spanish')var _0x3dbd7c=users['Spanish'];else{if(_0x7ab03c[0x0][_0xd16015(0x1ab)]==_0xd16015(0x1eb))var _0x3dbd7c=users['French'];else{if(_0x7ab03c[0x0][_0xd16015(0x1ab)]==_0xd16015(0x189))var _0x3dbd7c=users[_0xd16015(0x1e5)];else{if(_0x7ab03c[0x0]['language']==_0xd16015(0x1cb))var _0x3dbd7c=users[_0xd16015(0x1cb)];else{if(_0x7ab03c[0x0]['language']==_0xd16015(0x1c0))var _0x3dbd7c=users['Arabic'];}}}}}}}_0x4618ed[_0xd16015(0x168)](_0xd16015(0x1b0),{'success':_0x1999b8[_0xd16015(0x17f)](_0xd16015(0x1dc)),'errors':_0x1999b8[_0xd16015(0x17f)]('errors'),'role':_0x21acbe,'profile':_0x1efcc1,'master_shop':_0x7ab03c,'user':_0x14f255,'language':_0x3dbd7c});}catch(_0x41e307){console[_0xd16015(0x1e9)](_0x41e307);}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x1d4),auth,async(_0x1db68e,_0x537f78)=>{const _0x570c44=a0_0x1605ed;try{const {name:_0x3957b5,secondary_unit:_0x4b8cc4,products:_0xd5c727}=_0x1db68e['body'],_0xceaadc=new units({'name':_0x3957b5,'secondary_unit':_0x4b8cc4,'products':_0xd5c727}),_0x229e55=await units[_0x570c44(0x151)]({'name':_0x3957b5});_0x229e55?_0x1db68e['flash']('errors',_0x3957b5+_0x570c44(0x14f)):_0x1db68e[_0x570c44(0x17f)](_0x570c44(0x1dc),_0x3957b5+_0x570c44(0x152));const _0x3c499f=await _0xceaadc['save']();_0x537f78[_0x570c44(0x1db)](_0x570c44(0x156));}catch(_0x4c654b){console[_0x570c44(0x1e9)](_0x4c654b);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x1b5),auth,async(_0x494b94,_0x52df49)=>{const _0x14d221=a0_0x1605ed;try{const {username:_0x1d74fa,email:_0x4d309c,role:_0x37857a}=_0x494b94[_0x14d221(0x150)],_0x26eec7=_0x494b94[_0x14d221(0x150)],_0x2b3c46=await profile[_0x14d221(0x151)]({'email':_0x26eec7[_0x14d221(0x1ee)]}),_0x1b27c8=await master_shop[_0x14d221(0x1c3)]();console[_0x14d221(0x1e9)](_0x14d221(0x15a),_0x1b27c8);const _0x259265=_0x494b94[_0x14d221(0x15c)]['id'],_0x2de3c0=await units[_0x14d221(0x1cf)](_0x259265);if(_0x1b27c8[0x0]['language']==_0x14d221(0x17b))var _0x44b8d5=users['English'];else{if(_0x1b27c8[0x0][_0x14d221(0x1ab)]==_0x14d221(0x13f))var _0x44b8d5=users[_0x14d221(0x13f)];else{if(_0x1b27c8[0x0]['language']==_0x14d221(0x175))var _0x44b8d5=users[_0x14d221(0x175)];else{if(_0x1b27c8[0x0][_0x14d221(0x1ab)]==_0x14d221(0x163))var _0x44b8d5=users[_0x14d221(0x163)];else{if(_0x1b27c8[0x0][_0x14d221(0x1ab)]=='French')var _0x44b8d5=users[_0x14d221(0x1eb)];else{if(_0x1b27c8[0x0]['language']==_0x14d221(0x189))var _0x44b8d5=users['Portuguese'];else{if(_0x1b27c8[0x0][_0x14d221(0x1ab)]==_0x14d221(0x1cb))var _0x44b8d5=users['Chinese'];else{if(_0x1b27c8[0x0][_0x14d221(0x1ab)]==_0x14d221(0x1c0))var _0x44b8d5=users[_0x14d221(0x194)];}}}}}}}_0x52df49[_0x14d221(0x168)](_0x14d221(0x1b0),{'success':_0x494b94['flash'](_0x14d221(0x1dc)),'errors':_0x494b94[_0x14d221(0x17f)](_0x14d221(0x1af)),'role':_0x26eec7,'profile':_0x2b3c46,'master_shop':_0x1b27c8,'user':_0x2de3c0,'language':_0x44b8d5});}catch(_0x3c6e61){console[_0x14d221(0x1e9)](_0x3c6e61);}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x1b5),auth,async(_0x45ed4e,_0x1a87d7)=>{const _0x5ce20e=a0_0x1605ed;try{const _0x5938a7=_0x45ed4e[_0x5ce20e(0x15c)]['id'],_0x517eb1=await units[_0x5ce20e(0x1bd)](_0x5938a7,_0x45ed4e[_0x5ce20e(0x182)]);_0x45ed4e['flash']('success',_0x5ce20e(0x184)),_0x1a87d7[_0x5ce20e(0x1db)]('/products/units');}catch(_0x5143e6){console[_0x5ce20e(0x1e9)](_0x5143e6);}}),router[a0_0x1605ed(0x188)]('/units/delete/:id',auth,async(_0x55425b,_0x3da5a5)=>{const _0x499f08=a0_0x1605ed;try{const _0x3f00f8=_0x55425b[_0x499f08(0x15c)]['id'],_0x584e17=await units[_0x499f08(0x141)](_0x3f00f8);_0x55425b[_0x499f08(0x17f)](_0x499f08(0x1dc),_0x499f08(0x164)),_0x3da5a5['redirect']('/products/units');}catch(_0x485341){console['log'](_0x485341);}});const storage=multer['diskStorage']({'destination':(_0x2ced40,_0x2184ec,_0x41de5c)=>{const _0x5c131b=a0_0x1605ed;_0x41de5c(null,_0x5c131b(0x1d6));},'filename':(_0xbd3c5c,_0x308749,_0x5ecdf8)=>{const _0x3355f1=a0_0x1605ed;_0x5ecdf8(null,Date[_0x3355f1(0x15f)]()+_0x308749[_0x3355f1(0x144)]);}}),upload=multer({'storage':storage});router[a0_0x1605ed(0x188)](a0_0x1605ed(0x1ad),auth,async(_0x3fb2a7,_0x17815c)=>{const _0x543f63=a0_0x1605ed;try{const {username:_0x52d783,email:_0x300ad4,role:_0x1519d0}=_0x3fb2a7[_0x543f63(0x150)],_0x10e313=_0x3fb2a7[_0x543f63(0x150)],_0x445dab=await profile[_0x543f63(0x151)]({'email':_0x10e313[_0x543f63(0x1ee)]}),_0x67cff2={'year':_0x543f63(0x1ce),'month':_0x543f63(0x16c),'day':'numeric'},_0x2b70f3=await master_shop[_0x543f63(0x1c3)]();console['log']('Products\x20master',_0x2b70f3);const _0x14129f=await product[_0x543f63(0x1c3)]();console['log']('Products\x20find_data',_0x14129f);const _0x54add9=await warehouse[_0x543f63(0x14d)]([{'$unwind':_0x543f63(0x13c)},{'$lookup':{'from':_0x543f63(0x1c7),'localField':_0x543f63(0x1d2),'foreignField':'name','as':_0x543f63(0x13a)}},{'$unwind':_0x543f63(0x18f)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x543f63(0x1b6)}},{'$group':{'_id':_0x543f63(0x18d),'product_stock':{'$sum':_0x543f63(0x195)}}}]);console[_0x543f63(0x1e9)](_0x543f63(0x1e6),_0x54add9),_0x54add9['forEach'](_0x86da37=>{const _0x1b6ebe=_0x543f63,_0x5ba3f8=_0x14129f[_0x1b6ebe(0x162)](_0x4a9d1d=>{const _0x1b40a3=_0x1b6ebe;_0x4a9d1d['name']==_0x86da37[_0x1b40a3(0x19c)]&&(_0x4a9d1d['stock']=parseInt(_0x4a9d1d[_0x1b40a3(0x169)])+parseInt(_0x86da37[_0x1b40a3(0x193)]));});}),console[_0x543f63(0x1e9)]('Products\x20find_data',_0x14129f);if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x17b))var _0x327efe=users[_0x543f63(0x187)];else{if(_0x2b70f3[0x0]['language']==_0x543f63(0x13f))var _0x327efe=users[_0x543f63(0x13f)];else{if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x175))var _0x327efe=users[_0x543f63(0x175)];else{if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x163))var _0x327efe=users[_0x543f63(0x163)];else{if(_0x2b70f3[0x0]['language']==_0x543f63(0x1eb))var _0x327efe=users['French'];else{if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x189))var _0x327efe=users[_0x543f63(0x1e5)];else{if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x1cb))var _0x327efe=users[_0x543f63(0x1cb)];else{if(_0x2b70f3[0x0][_0x543f63(0x1ab)]==_0x543f63(0x1c0))var _0x327efe=users[_0x543f63(0x194)];}}}}}}}_0x17815c[_0x543f63(0x168)](_0x543f63(0x1c7),{'success':_0x3fb2a7[_0x543f63(0x17f)](_0x543f63(0x1dc)),'errors':_0x3fb2a7[_0x543f63(0x17f)]('errors'),'alldata':_0x14129f,'profile':_0x445dab,'master_shop':_0x2b70f3,'role':_0x10e313,'product_stock':_0x54add9,'language':_0x327efe});}catch(_0x4b168c){console['log'](_0x4b168c);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x1e4),auth,async(_0x25f880,_0x2b36f2)=>{const _0x35c9e5=a0_0x1605ed;try{const {username:_0x3c95ff,email:_0x4916ad,role:_0x41c9dc}=_0x25f880[_0x35c9e5(0x150)],_0x176c3d=_0x25f880[_0x35c9e5(0x150)],_0x1518af=await profile['findOne']({'email':_0x176c3d['email']}),_0x24635c=await master_shop['find']();console[_0x35c9e5(0x1e9)]('master',_0x24635c);const _0x3874aa=await categories['find']({}),_0x552784=await brands['find']({}),_0x7b7f52=await units[_0x35c9e5(0x1c3)]({}),_0x2282e2=await warehouse[_0x35c9e5(0x1c3)]({'status':_0x35c9e5(0x1c6)});if(_0x24635c[0x0][_0x35c9e5(0x1ab)]=='English\x20(US)')var _0x24a6e8=users[_0x35c9e5(0x187)];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]==_0x35c9e5(0x13f))var _0x24a6e8=users['Hindi'];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]==_0x35c9e5(0x175))var _0x24a6e8=users['German'];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]==_0x35c9e5(0x163))var _0x24a6e8=users[_0x35c9e5(0x163)];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]=='French')var _0x24a6e8=users['French'];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]==_0x35c9e5(0x189))var _0x24a6e8=users['Portuguese'];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]=='Chinese')var _0x24a6e8=users['Chinese'];else{if(_0x24635c[0x0][_0x35c9e5(0x1ab)]==_0x35c9e5(0x1c0))var _0x24a6e8=users['Arabic'];}}}}}}}_0x2b36f2[_0x35c9e5(0x168)](_0x35c9e5(0x167),{'success':_0x25f880[_0x35c9e5(0x17f)](_0x35c9e5(0x1dc)),'errors':_0x25f880[_0x35c9e5(0x17f)]('errors'),'role':_0x176c3d,'profile':_0x1518af,'categories':_0x3874aa,'brands':_0x552784,'master_shop':_0x24635c,'units':_0x7b7f52,'language':_0x24a6e8,'find_data':_0x2282e2});}catch(_0x1ac488){console['log'](_0x1ac488);}}),router[a0_0x1605ed(0x178)]('/view/add_products',auth,upload[a0_0x1605ed(0x17d)](a0_0x1605ed(0x1ca)),async(_0x77adf2,_0x6ba1cf)=>{const _0x4cb88c=a0_0x1605ed;try{const {name:_0x2478d3,category:_0x50b0ee,brand:_0x3a0b55,unit:_0x4ed78d,alertquantity:_0x34f634,stock:_0x20f64a,product_code:_0x1f0ac2,warehouse:_0xc86f7f,primary_ItemCode:_0x5e9cb7,second_ItemCode:_0x2a784c,second_unit:_0x302b6,maxPerUnit:_0xb0f0c7,MaxPerProduct:_0x252565}=_0x77adf2[_0x4cb88c(0x182)],_0x58b676=_0x77adf2['file']?.[_0x4cb88c(0x135)]||_0x4cb88c(0x1bb),_0x310ce8=new product({'image':_0x58b676,'name':_0x2478d3,'category':_0x50b0ee,'brand':_0x3a0b55,'unit':_0x4ed78d,'alertquantity':_0x34f634,'stock':_0x20f64a,'product_code':_0x1f0ac2,'warehouse':_0xc86f7f,'primary_code':_0x5e9cb7,'secondary_code':_0x2a784c,'second_unit':_0x302b6,'maxStocks':_0x252565,'maxProdPerUnit':_0xb0f0c7}),_0x120b43=await _0x310ce8[_0x4cb88c(0x145)](),_0x355d13=await categories[_0x4cb88c(0x151)]({'name':_0x50b0ee});_0x355d13[_0x4cb88c(0x1c7)]=parseInt(_0x355d13[_0x4cb88c(0x1c7)])+0x1,await _0x355d13['save']();const _0x36c65c=await brands['findOne']({'name':_0x3a0b55});_0x36c65c['products']=parseInt(_0x36c65c[_0x4cb88c(0x1c7)])+0x1,await _0x36c65c[_0x4cb88c(0x145)]();const _0x57aa37=await units[_0x4cb88c(0x151)]({'name':_0x4ed78d});_0x57aa37[_0x4cb88c(0x1c7)]=parseInt(_0x57aa37[_0x4cb88c(0x1c7)])+0x1,await _0x57aa37[_0x4cb88c(0x145)](),_0x77adf2[_0x4cb88c(0x17f)](_0x4cb88c(0x1dc),'product\x20add\x20successfully'),_0x6ba1cf[_0x4cb88c(0x1db)](_0x4cb88c(0x19b));}catch(_0x41a84a){console[_0x4cb88c(0x1e9)](_0x41a84a);}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x176),auth,async(_0x3d7aea,_0x170d27)=>{const _0x27520f=a0_0x1605ed;try{const {username:_0x4b4a13,email:_0xd61ff7,role:_0x208ccb}=_0x3d7aea['user'],_0x462b15=_0x3d7aea[_0x27520f(0x150)],_0x27d04b=await profile[_0x27520f(0x151)]({'email':_0x462b15[_0x27520f(0x1ee)]}),_0x92db98=await master_shop['find']();console[_0x27520f(0x1e9)](_0x27520f(0x155),_0x92db98);const _0x5f3ed7=_0x3d7aea[_0x27520f(0x15c)]['id'],_0x43cd97=await product[_0x27520f(0x1cf)](_0x5f3ed7),_0x273a52=await categories['find']({}),_0x56022b=await brands['find']({}),_0x1038c9=await units[_0x27520f(0x1c3)]({}),_0x4a0450=await warehouse['find']({'status':'Enabled'}),_0x1af83e=await units[_0x27520f(0x14d)]([{'$group':{'_id':_0x27520f(0x1bf),'secondaryunit':{'$first':_0x27520f(0x136)}}}]);if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x17b))var _0x156044=users[_0x27520f(0x187)];else{if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x13f))var _0x156044=users['Hindi'];else{if(_0x92db98[0x0]['language']==_0x27520f(0x175))var _0x156044=users[_0x27520f(0x175)];else{if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x163))var _0x156044=users['Spanish'];else{if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x1eb))var _0x156044=users[_0x27520f(0x1eb)];else{if(_0x92db98[0x0]['language']=='Portuguese\x20(BR)')var _0x156044=users['Portuguese'];else{if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x1cb))var _0x156044=users['Chinese'];else{if(_0x92db98[0x0][_0x27520f(0x1ab)]==_0x27520f(0x1c0))var _0x156044=users[_0x27520f(0x194)];}}}}}}}_0x170d27[_0x27520f(0x168)]('edit_product',{'success':_0x3d7aea['flash']('success'),'errors':_0x3d7aea[_0x27520f(0x17f)](_0x27520f(0x1af)),'role':_0x462b15,'profile':_0x27d04b,'alldata':_0x43cd97,'categories':_0x273a52,'brands':_0x56022b,'master_shop':_0x92db98,'units':_0x1038c9,'secondunit':_0x1af83e,'find_data':_0x4a0450,'language':_0x156044});}catch(_0x4ef630){console[_0x27520f(0x1e9)](_0x4ef630);}}),router['post'](a0_0x1605ed(0x176),auth,upload[a0_0x1605ed(0x17d)](a0_0x1605ed(0x1ca)),async(_0x169ac2,_0x8bc772)=>{const _0xc59b90=a0_0x1605ed;try{console[_0xc59b90(0x1e9)](_0xc59b90(0x197));const _0x1a9aa3=_0x169ac2[_0xc59b90(0x15c)]['id'],_0x13bf5a=await product['findById'](_0x1a9aa3),{image:_0x1b88c2,name:_0x44c3c1,category:_0x1668a8,brand:_0x27d7fb,sku:_0x4d225a,unit:_0x4bd982,alertquantity:_0x21ce27,product_code:_0x2abce4,warehouse:_0x95eb80,primary_ItemCode:_0x5aa174,second_ItemCode:_0x488b62,second_unit:_0xd68fbf,maxPerUnit:_0x52ef46,MaxPerProduct:_0x586980,prod_catdata:_0x370313}=_0x169ac2[_0xc59b90(0x182)];_0x169ac2[_0xc59b90(0x17a)]&&(_0x13bf5a[_0xc59b90(0x1ca)]=_0x169ac2[_0xc59b90(0x17a)][_0xc59b90(0x135)]);_0x13bf5a[_0xc59b90(0x1a5)]=_0x44c3c1,_0x13bf5a[_0xc59b90(0x17c)]=_0x1668a8,_0x13bf5a[_0xc59b90(0x147)]=_0x27d7fb,_0x13bf5a[_0xc59b90(0x1a6)]=_0x4d225a,_0x13bf5a['unit']=_0x4bd982,_0x13bf5a[_0xc59b90(0x19f)]=_0x21ce27,_0x13bf5a['product_code']=_0x2abce4,_0x13bf5a[_0xc59b90(0x134)]=_0x95eb80,_0x13bf5a['primary_code']=_0x5aa174,_0x13bf5a[_0xc59b90(0x16e)]=_0x488b62,_0x13bf5a[_0xc59b90(0x16a)]=_0xd68fbf,_0x13bf5a[_0xc59b90(0x19d)]=_0x586980,_0x13bf5a['maxProdPerUnit']=_0x52ef46,_0x13bf5a[_0xc59b90(0x157)]=_0x370313;const _0x2b043c=await _0x13bf5a[_0xc59b90(0x145)]();console['log'](_0xc59b90(0x18b),_0x13bf5a),_0x169ac2[_0xc59b90(0x17f)](_0xc59b90(0x1dc),'product\x20update\x20successfully'),_0x8bc772[_0xc59b90(0x1db)]('/products/view');}catch(_0x55f42f){console[_0xc59b90(0x1e9)](_0x55f42f);}}),router['get'](a0_0x1605ed(0x179),auth,async(_0x33925b,_0x1e733c)=>{const _0x37cb0d=a0_0x1605ed;try{const {username:_0x547deb,email:_0x36d58a,role:_0x35aa3a}=_0x33925b[_0x37cb0d(0x150)],_0x3c4fb6=_0x33925b[_0x37cb0d(0x150)],_0x5affd4=await profile['findOne']({'email':_0x3c4fb6[_0x37cb0d(0x1ee)]}),_0x44e100=await master_shop[_0x37cb0d(0x1c3)]();console['log']('barcode\x20Product\x20master',_0x44e100);const _0x3d43e0=_0x33925b[_0x37cb0d(0x15c)]['id'],_0x2dd540=await product['findById'](_0x3d43e0);console[_0x37cb0d(0x1e9)](_0x37cb0d(0x183),_0x2dd540);if(_0x44e100[0x0][_0x37cb0d(0x1ab)]=='English\x20(US)')var _0x592546=users[_0x37cb0d(0x187)];else{if(_0x44e100[0x0][_0x37cb0d(0x1ab)]=='Hindi')var _0x592546=users[_0x37cb0d(0x13f)];else{if(_0x44e100[0x0]['language']==_0x37cb0d(0x175))var _0x592546=users[_0x37cb0d(0x175)];else{if(_0x44e100[0x0][_0x37cb0d(0x1ab)]==_0x37cb0d(0x163))var _0x592546=users[_0x37cb0d(0x163)];else{if(_0x44e100[0x0][_0x37cb0d(0x1ab)]==_0x37cb0d(0x1eb))var _0x592546=users[_0x37cb0d(0x1eb)];else{if(_0x44e100[0x0]['language']==_0x37cb0d(0x189))var _0x592546=users[_0x37cb0d(0x1e5)];else{if(_0x44e100[0x0][_0x37cb0d(0x1ab)]==_0x37cb0d(0x1cb))var _0x592546=users[_0x37cb0d(0x1cb)];else{if(_0x44e100[0x0][_0x37cb0d(0x1ab)]==_0x37cb0d(0x1c0))var _0x592546=users[_0x37cb0d(0x194)];}}}}}}}_0x1e733c['render']('product_barcode',{'success':_0x33925b[_0x37cb0d(0x17f)](_0x37cb0d(0x1dc)),'errors':_0x33925b[_0x37cb0d(0x17f)](_0x37cb0d(0x1af)),'role':_0x3c4fb6,'profile':_0x5affd4,'alldata':_0x2dd540,'master_shop':_0x44e100,'language':_0x592546});}catch(_0x219571){console[_0x37cb0d(0x1e9)](_0x219571);}}),router[a0_0x1605ed(0x188)]('/products_export_migrate_file',auth,async(_0x251f6e,_0x5185c0)=>{const _0x54296e=a0_0x1605ed;try{const _0x28b7a0=new excelJS[(_0x54296e(0x1ea))](),_0x5f55e6=_0x28b7a0['addWorksheet'](_0x54296e(0x1b2));return _0x5f55e6[_0x54296e(0x198)]=[{'header':_0x54296e(0x170),'key':_0x54296e(0x1aa),'width':0xa},{'header':_0x54296e(0x131),'key':_0x54296e(0x148),'width':0xa},{'header':'Units','key':_0x54296e(0x137),'width':0xa},{'header':'Secondary_Units','key':'PSecondaryUnits','width':0xa},{'header':_0x54296e(0x1b9),'key':'MaxperUnits','width':0xa},{'header':_0x54296e(0x1ec),'key':_0x54296e(0x172),'width':0xa},{'header':'Secondary_Code','key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0x54296e(0x172),'width':0xa},{'header':'Category','key':_0x54296e(0x158),'width':0xa},{'header':_0x54296e(0x1a8),'key':_0x54296e(0x16f),'width':0xa},{'header':_0x54296e(0x16b),'key':_0x54296e(0x16f),'width':0xa},{'header':'Products_category','key':'Prod_Cat','width':0xa}],_0x5185c0[_0x54296e(0x14a)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5185c0[_0x54296e(0x14a)]('Content-Disposition',_0x54296e(0x1e8)),_0x28b7a0['xlsx']['write'](_0x5185c0)[_0x54296e(0x180)](()=>{_0x5185c0['status'](0xc8);});}catch(_0x28d78a){_0x5185c0[_0x54296e(0x1e3)](0x190)[_0x54296e(0x153)](_0x28d78a);}});const storage1=multer['diskStorage']({'destination':(_0x1d581c,_0x2cbfec,_0x1bf0d4)=>{const _0xf1ff10=a0_0x1605ed;_0x1bf0d4(null,_0xf1ff10(0x1ed));},'filename':(_0x2e4062,_0x52739c,_0x32782e)=>{const _0x410e1d=a0_0x1605ed;_0x32782e(null,Date[_0x410e1d(0x15f)]()+_0x52739c[_0x410e1d(0x144)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x1f48(_0x871b93,_0x34518f){const _0x23b3e2=a0_0x23b3();return a0_0x1f48=function(_0x1f4819,_0x5f8641){_0x1f4819=_0x1f4819-0x131;let _0x571542=_0x23b3e2[_0x1f4819];return _0x571542;},a0_0x1f48(_0x871b93,_0x34518f);}router[a0_0x1605ed(0x178)](a0_0x1605ed(0x174),auth,uploadMigrate[a0_0x1605ed(0x17d)](a0_0x1605ed(0x1e7)),async(_0x22b10b,_0x1ca0a4)=>{const _0x453078=a0_0x1605ed,_0x43a83a=_0x22b10b[_0x453078(0x17a)][_0x453078(0x135)],_0x2c1125=await xlsx['readFile'](_0x453078(0x140)+_0x43a83a);let _0x483c7c=_0x2c1125[_0x453078(0x19a)],_0x3a5044=xlsx[_0x453078(0x1ac)][_0x453078(0x1cd)](_0x2c1125['Sheets'][_0x483c7c[0x0]]);for(const _0x27b5c1 of _0x3a5044){const _0x2aa91b=_0x27b5c1[_0x453078(0x170)],_0xe0c6b0=_0x27b5c1[_0x453078(0x131)],_0x49cfa5=_0x27b5c1[_0x453078(0x1a4)],_0x2f61b2=_0x27b5c1[_0x453078(0x1d8)],_0x766d39=_0x27b5c1['Product_Code'],_0x59c0df=_0x27b5c1[_0x453078(0x14b)],_0x1aa4da=_0x27b5c1[_0x453078(0x1a8)],_0x1c99e1=_0x27b5c1['Primary_Code'],_0x47ec48=_0x27b5c1[_0x453078(0x185)],_0x35957f=_0x27b5c1[_0x453078(0x16b)],_0x485fa7=_0x27b5c1[_0x453078(0x1b9)],_0x2175fc=_0x27b5c1['Products_category'];try{let _0x1a522d=await categories[_0x453078(0x151)]({'name':_0x59c0df});if(!_0x1a522d){const _0x363f4f=new categories({'name':_0x59c0df,'products':'0'});_0x1a522d=await _0x363f4f['save']();}let _0x58ae6c=await brands[_0x453078(0x151)]({'name':_0xe0c6b0});if(!_0x58ae6c){const _0x53a39b=new brands({'name':_0xe0c6b0,'products':'0'});_0x58ae6c=await _0x53a39b[_0x453078(0x145)]();}let _0x56ec8c=await units[_0x453078(0x151)]({'name':_0x49cfa5,'secondary_unit':_0x2f61b2});if(!_0x56ec8c){const _0x50d43f=new units({'name':_0x49cfa5,'secondary_unit':_0x2f61b2,'products':'0'});_0x56ec8c=await _0x50d43f[_0x453078(0x145)]();}const _0x187dd9=await product[_0x453078(0x1c3)]({'name':_0x2aa91b,'category':_0x1a522d[_0x453078(0x1a5)],'brand':_0x58ae6c['name'],'secondary_unit':_0x56ec8c[_0x453078(0x16a)],'product_code':_0x766d39});console[_0x453078(0x1e9)](_0x187dd9[_0x453078(0x190)]+'\x20<>\x20'+_0x1a522d['name']+_0x453078(0x1b7)+_0x58ae6c[_0x453078(0x1a5)]+_0x453078(0x1b7)+_0x56ec8c[_0x453078(0x16a)]+_0x453078(0x1b7)+_0x766d39+_0x453078(0x1b7)+_0x2aa91b);if(_0x187dd9['length']===0x0){const _0x1e422a=new product({'image':_0x453078(0x1bb),'name':_0x2aa91b,'category':_0x1a522d['name'],'brand':_0x58ae6c[_0x453078(0x1a5)],'unit':_0x56ec8c['name'],'alertquantity':_0x1aa4da,'product_code':_0x766d39,'secondary_unit':_0x56ec8c[_0x453078(0x16a)],'primary_code':_0x1c99e1,'secondary_code':_0x47ec48,'maxStocks':_0x35957f,'maxProdPerUnit':_0x485fa7,'product_category':_0x2175fc}),_0x4b5e59=await _0x1e422a['save']();_0x1a522d[_0x453078(0x1c7)]=parseInt(_0x1a522d[_0x453078(0x1c7)])+0x1,await _0x1a522d[_0x453078(0x145)](),_0x58ae6c[_0x453078(0x1c7)]=parseInt(_0x58ae6c['products'])+0x1,await _0x58ae6c[_0x453078(0x145)](),_0x56ec8c[_0x453078(0x1c7)]=parseInt(_0x56ec8c[_0x453078(0x1c7)])+0x1,await _0x56ec8c[_0x453078(0x145)](),_0x22b10b[_0x453078(0x17f)](_0x453078(0x1dc),_0x2aa91b+_0x453078(0x1b1));}else{console[_0x453078(0x1e9)](_0x187dd9[0x0]);const _0x38eb1e=_0x187dd9[0x0];_0x38eb1e['category']=_0x1a522d[_0x453078(0x1a5)],_0x38eb1e[_0x453078(0x147)]=_0x58ae6c[_0x453078(0x1a5)],_0x38eb1e[_0x453078(0x1cc)]=_0x56ec8c[_0x453078(0x1a5)],_0x38eb1e[_0x453078(0x19f)]=_0x1aa4da,_0x38eb1e[_0x453078(0x132)]=_0x766d39,_0x38eb1e[_0x453078(0x16a)]=_0x56ec8c['secondary_unit'],_0x38eb1e[_0x453078(0x1d9)]=_0x1c99e1,_0x38eb1e[_0x453078(0x16e)]=_0x47ec48,_0x38eb1e['maxStocks']=_0x35957f,_0x38eb1e[_0x453078(0x1c1)]=_0x485fa7,_0x38eb1e[_0x453078(0x157)]=_0x2175fc;const _0x2710f7=await _0x38eb1e[_0x453078(0x145)]();_0x22b10b[_0x453078(0x17f)]('success',_0x2710f7['name']+_0x453078(0x160));}}catch(_0x5278ee){_0x1ca0a4[_0x453078(0x1e3)](0x1f4)['json']({'proderror':_0x5278ee[_0x453078(0x1b4)],'aproduct':_0x2aa91b});}}_0x1ca0a4[_0x453078(0x1db)](_0x453078(0x19b));}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x13b),auth,async(_0x4e2608,_0x3ee1cf)=>{const _0x1ccd95=a0_0x1605ed;try{console['log'](_0x4e2608[_0x1ccd95(0x182)]);const {data_cateory:_0x18cdf9,datachoose:_0x584c50}=_0x4e2608[_0x1ccd95(0x182)];var _0x16d58e;if(_0x584c50=='prod_categ')_0x16d58e=await product[_0x1ccd95(0x14d)]([{'$group':{'_id':_0x1ccd95(0x171)}}]);else{if(_0x584c50==_0x1ccd95(0x177))_0x16d58e=await product['aggregate']([{'$match':{'product_category':_0x18cdf9}},{'$group':{'_id':_0x1ccd95(0x166)}}]);else _0x584c50==_0x1ccd95(0x1c5)&&(_0x16d58e=await product['aggregate']([{'$match':{'product_category':_0x18cdf9}},{'$group':{'_id':'$category'}}]));}_0x3ee1cf[_0x1ccd95(0x15d)](_0x16d58e);}catch(_0x4720c3){_0x3ee1cf[_0x1ccd95(0x15d)]({'message':_0x4720c3[_0x1ccd95(0x1b4)]});}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x1a3),auth,async(_0x552f97,_0x15a31a)=>{const _0x44f7fd=a0_0x1605ed;try{const {data_choosing:_0x8de67b,data_selected:_0x109932}=_0x552f97[_0x44f7fd(0x182)];var _0x6ca3ee;if(_0x8de67b=='prod_categ')_0x6ca3ee=await product['aggregate']([{'$match':{'product_category':_0x109932}}]);else{if(_0x8de67b==_0x44f7fd(0x177))_0x6ca3ee=await product[_0x44f7fd(0x14d)]([{'$match':{'brand':_0x109932}}]);else _0x8de67b==_0x44f7fd(0x1c5)&&(_0x6ca3ee=await product[_0x44f7fd(0x14d)]([{'$match':{'category':_0x109932}}]));}_0x15a31a[_0x44f7fd(0x15d)](_0x6ca3ee);}catch(_0x4134d4){_0x15a31a[_0x44f7fd(0x15d)]({'message':_0x4134d4[_0x44f7fd(0x1b4)]});}}),router[a0_0x1605ed(0x188)](a0_0x1605ed(0x14c),auth,async(_0x39fcda,_0x15aec4)=>{const _0x4274ee=a0_0x1605ed,_0xb0751d=_0x39fcda[_0x4274ee(0x150)],_0x66b80d=await profile['findOne']({'email':_0xb0751d[_0x4274ee(0x1ee)]}),_0x51e04a=await master_shop['find'](),_0x2ea5f7=await product[_0x4274ee(0x1c3)]();if(_0x51e04a[0x0][_0x4274ee(0x1ab)]==_0x4274ee(0x17b))var _0x95c8d7=users[_0x4274ee(0x187)];else{if(_0x51e04a[0x0]['language']==_0x4274ee(0x13f))var _0x95c8d7=users[_0x4274ee(0x13f)];else{if(_0x51e04a[0x0]['language']==_0x4274ee(0x175))var _0x95c8d7=users[_0x4274ee(0x175)];else{if(_0x51e04a[0x0][_0x4274ee(0x1ab)]==_0x4274ee(0x163))var _0x95c8d7=users['Spanish'];else{if(_0x51e04a[0x0][_0x4274ee(0x1ab)]==_0x4274ee(0x1eb))var _0x95c8d7=users[_0x4274ee(0x1eb)];else{if(_0x51e04a[0x0][_0x4274ee(0x1ab)]=='Portuguese\x20(BR)')var _0x95c8d7=users[_0x4274ee(0x1e5)];else{if(_0x51e04a[0x0][_0x4274ee(0x1ab)]=='Chinese')var _0x95c8d7=users[_0x4274ee(0x1cb)];else{if(_0x51e04a[0x0][_0x4274ee(0x1ab)]=='Arabic\x20(ae)')var _0x95c8d7=users[_0x4274ee(0x194)];}}}}}}}_0x15aec4['render']('product_barcode_products',{'success':_0x39fcda['flash']('success'),'errors':_0x39fcda[_0x4274ee(0x17f)](_0x4274ee(0x1af)),'role':_0xb0751d,'profile':_0x66b80d,'products':_0x2ea5f7,'master_shop':_0x51e04a,'language':_0x95c8d7});}),router['post']('/barcode_data',auth,async(_0x4dee62,_0x45f4ae)=>{const _0x3807ef=a0_0x1605ed,_0x1284ae=await product['find']();_0x45f4ae[_0x3807ef(0x15d)]({'data':_0x1284ae});}),router['post'](a0_0x1605ed(0x18c),auth,async(_0x3c4418,_0x5d0f15)=>{const _0x5d1bb3=a0_0x1605ed;try{const {dataProdCat:_0x34e71e,dataProdIdentity:_0x370ed3}=_0x3c4418[_0x5d1bb3(0x182)];var _0x4f1a3d;switch(_0x34e71e){case'fg':switch(_0x370ed3){case _0x5d1bb3(0x131):_0x4f1a3d=await product[_0x5d1bb3(0x14d)]([{'$match':{'product_category':_0x5d1bb3(0x13e)}},{'$group':{'_id':_0x5d1bb3(0x166)}},{'$project':{'brand':'$_id'}}]);break;case _0x5d1bb3(0x14b):_0x4f1a3d=await product['aggregate']([{'$match':{'product_category':_0x5d1bb3(0x13e)}},{'$group':{'_id':_0x5d1bb3(0x1d5)}},{'$project':{'category':_0x5d1bb3(0x1bf)}}]);break;}break;case'rm':switch(_0x370ed3){case _0x5d1bb3(0x131):_0x4f1a3d=await product['aggregate']([{'$match':{'product_category':_0x5d1bb3(0x1b3)}},{'$group':{'_id':_0x5d1bb3(0x166)}},{'$project':{'brand':_0x5d1bb3(0x1bf)}}]);break;case _0x5d1bb3(0x14b):_0x4f1a3d=await product[_0x5d1bb3(0x14d)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x5d1bb3(0x1d5)}},{'$project':{'category':_0x5d1bb3(0x1bf)}}]);break;}break;}_0x5d0f15[_0x5d1bb3(0x15d)](_0x4f1a3d);}catch(_0x53d67b){_0x5d0f15['json']({'message':_0x53d67b[_0x5d1bb3(0x1b4)]});}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x15e),auth,async(_0x37258c,_0x2fc7de)=>{const _0x2f8536=a0_0x1605ed;try{console[_0x2f8536(0x1e9)](_0x37258c[_0x2f8536(0x182)]);const {prod_cat:_0x399df4,identity:_0x49d14d,valueData:_0x1fb61d,typeofbarcode:_0x535f10}=_0x37258c[_0x2f8536(0x182)];let _0x4e95e0;switch(_0x399df4){case'fg':if(_0x49d14d==_0x2f8536(0x131))_0x4e95e0=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0x1fb61d}}]);else _0x49d14d==_0x2f8536(0x14b)&&(_0x4e95e0=await product[_0x2f8536(0x14d)]([{'$match':{'product_category':_0x2f8536(0x13e),'category':_0x1fb61d}}]));break;case'rm':if(_0x49d14d==_0x2f8536(0x131))_0x4e95e0=await product[_0x2f8536(0x14d)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x1fb61d}}]);else _0x49d14d==_0x2f8536(0x14b)&&(_0x4e95e0=await product[_0x2f8536(0x14d)]([{'$match':{'product_category':_0x2f8536(0x1b3),'category':_0x1fb61d}}]));break;}const _0x1ca710=_0x411a7a=>_0x411a7a*0x48,_0x26592f={'width':0x3,'height':0x1},_0x2eb15c=new PDFDocument({'margin':_0x1ca710(0.75),'size':[_0x1ca710(_0x26592f[_0x2f8536(0x138)]),_0x1ca710(_0x26592f[_0x2f8536(0x142)])],'bufferPages':!![]}),_0x206909=_0x4e95e0[_0x2f8536(0x190)];for(let _0x219769=0x0;_0x219769<=_0x206909;_0x219769++){if(_0x219769!=_0x206909){const _0x1d6f65=_0x4e95e0[_0x219769][_0x2f8536(0x1a5)],_0x1137f3=_0x4e95e0[_0x219769]['primary_code'],_0x4a1313=_0x4e95e0[_0x219769][_0x2f8536(0x16e)],_0x1a6555=_0x4e95e0[_0x219769][_0x2f8536(0x132)];var _0x41f037;switch(_0x535f10){case'1':_0x41f037=_0x1137f3;break;case'2':_0x41f037=_0x4a1313;break;case'3':_0x41f037=_0x1a6555;break;}const _0x4d3136={'width':0xd2,'height':0x64},_0x868c5a={'width':_0x1ca710(_0x26592f[_0x2f8536(0x138)]),'height':_0x1ca710(_0x26592f[_0x2f8536(0x142)])},_0x42fa89=new Canvas();JsBarcode(_0x42fa89,_0x41f037,{'format':'CODE128','height':_0x4d3136[_0x2f8536(0x142)],'displayValue':!![],'text':_0x41f037});const _0x23c406=_0x42fa89[_0x2f8536(0x1a7)](),_0x1b37b4=_0x868c5a['width']/_0x4d3136[_0x2f8536(0x138)],_0x43b630=_0x868c5a[_0x2f8536(0x142)]/_0x4d3136[_0x2f8536(0x142)],_0x39a261=Math['min'](_0x1b37b4,_0x43b630),_0x469d3c=_0x4d3136[_0x2f8536(0x138)]*_0x39a261,_0x779553=_0x4d3136[_0x2f8536(0x142)]*_0x39a261,_0x56ba4b=(_0x868c5a[_0x2f8536(0x138)]-_0x469d3c)/0x2,_0x301a7b=(_0x868c5a[_0x2f8536(0x142)]-_0x779553)/0x2;_0x2eb15c[_0x2f8536(0x1ca)](_0x23c406,_0x56ba4b,_0x301a7b,{'width':_0x469d3c,'height':_0x779553}),_0x219769!=_0x206909&&_0x2eb15c[_0x2f8536(0x1b8)]();}}const _0x1af73c=[];_0x2eb15c['on']('data',_0x1af73c[_0x2f8536(0x159)][_0x2f8536(0x1da)](_0x1af73c)),_0x2eb15c['on'](_0x2f8536(0x173),()=>{const _0x4bbc68=_0x2f8536,_0x3dc9bb=Buffer[_0x4bbc68(0x196)](_0x1af73c),_0x55912c=_0x3dc9bb['toString'](_0x4bbc68(0x1a2));_0x2fc7de['json']({'pdfContent':_0x55912c});}),_0x2eb15c[_0x2f8536(0x173)]();}catch(_0x2f79a8){_0x2fc7de[_0x2f8536(0x15d)]({'message':_0x2f79a8[_0x2f8536(0x1b4)]});}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x1bc),auth,async(_0x2c35e4,_0x531e77)=>{const _0x20f020=a0_0x1605ed;try{console[_0x20f020(0x1e9)](_0x2c35e4[_0x20f020(0x182)]);const {prod_cat:_0x16fd56,identity:_0x2b7563,valueData:_0x72dae4}=_0x2c35e4[_0x20f020(0x182)];let _0x95ec7b;switch(_0x16fd56){case'fg':if(_0x2b7563=='Brands')_0x95ec7b=await product[_0x20f020(0x14d)]([{'$match':{'product_category':_0x20f020(0x13e),'brand':_0x72dae4}}]);else _0x2b7563==_0x20f020(0x14b)&&(_0x95ec7b=await product[_0x20f020(0x14d)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x72dae4}}]));break;case'rm':if(_0x2b7563=='Brands')_0x95ec7b=await product[_0x20f020(0x14d)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x72dae4}}]);else _0x2b7563==_0x20f020(0x14b)&&(_0x95ec7b=await product[_0x20f020(0x14d)]([{'$match':{'product_category':_0x20f020(0x1b3),'category':_0x72dae4}}]));break;}_0x531e77[_0x20f020(0x15d)]({'data':_0x95ec7b});}catch(_0x2acc75){_0x531e77[_0x20f020(0x15d)]({'message':_0x2acc75['message']});}}),router[a0_0x1605ed(0x178)](a0_0x1605ed(0x181),auth,async(_0x3a954e,_0x475eab)=>{const _0x4ec9b5=a0_0x1605ed;try{const _0x1368e9=_0x3a954e[_0x4ec9b5(0x15c)]['id'],{copies:_0x2c4d7e,typeofbarcode:_0x50dc3a}=_0x3a954e[_0x4ec9b5(0x182)];var _0x52773f=await product[_0x4ec9b5(0x1cf)](_0x1368e9);const _0x2bd7cc=_0x13a14c=>_0x13a14c*0x48,_0x14fa2a={'width':0x3,'height':0x1},_0x589d23=new PDFDocument({'margin':_0x2bd7cc(0.75),'size':[_0x2bd7cc(_0x14fa2a[_0x4ec9b5(0x138)]),_0x2bd7cc(_0x14fa2a['height'])],'bufferPages':!![]}),_0x2e132a=_0x2c4d7e,_0x1f48c6=_0x52773f[_0x4ec9b5(0x1a5)],_0x4aff6d=_0x52773f[_0x4ec9b5(0x1d9)],_0x40876e=_0x52773f[_0x4ec9b5(0x16e)],_0x41e764=_0x52773f['product_code'];let _0x3d8353;switch(_0x50dc3a){case'1':_0x3d8353=_0x4aff6d;break;case'2':_0x3d8353=_0x40876e;break;case'3':_0x3d8353=_0x41e764;break;}const _0x59d1b5={'width':0xd2,'height':0x64},_0xa15580={'width':_0x2bd7cc(_0x14fa2a[_0x4ec9b5(0x138)]),'height':_0x2bd7cc(_0x14fa2a[_0x4ec9b5(0x142)])};for(let _0xd01df0=0x1;_0xd01df0<=_0x2e132a;_0xd01df0++){const _0x29c6f4=new Canvas();JsBarcode(_0x29c6f4,_0x3d8353,{'format':_0x4ec9b5(0x1d7),'height':_0x59d1b5[_0x4ec9b5(0x142)],'displayValue':!![],'text':_0x3d8353});const _0x548505=_0x29c6f4[_0x4ec9b5(0x1a7)](),_0x1bf0d7=_0xa15580['width']/_0x59d1b5[_0x4ec9b5(0x138)],_0x4440d1=_0xa15580[_0x4ec9b5(0x142)]/_0x59d1b5[_0x4ec9b5(0x142)],_0x7cbdea=Math['min'](_0x1bf0d7,_0x4440d1),_0x295466=_0x59d1b5[_0x4ec9b5(0x138)]*_0x7cbdea,_0x24fceb=_0x59d1b5[_0x4ec9b5(0x142)]*_0x7cbdea,_0x1507db=(_0xa15580[_0x4ec9b5(0x138)]-_0x295466)/0x2,_0x23d94c=(_0xa15580['height']-_0x24fceb)/0x2;_0x589d23[_0x4ec9b5(0x1ca)](_0x548505,_0x1507db,_0x23d94c,{'width':_0x295466,'height':_0x24fceb}),_0xd01df0!=_0x2e132a&&_0x589d23[_0x4ec9b5(0x1b8)]();}const _0x11f132=[];_0x589d23['on'](_0x4ec9b5(0x1d3),_0x11f132['push'][_0x4ec9b5(0x1da)](_0x11f132)),_0x589d23['on'](_0x4ec9b5(0x173),()=>{const _0x3f7a75=_0x4ec9b5,_0x360f65=Buffer[_0x3f7a75(0x196)](_0x11f132),_0x33dae4=_0x360f65[_0x3f7a75(0x199)](_0x3f7a75(0x1a2));_0x475eab[_0x3f7a75(0x15d)]({'pdfContent':_0x33dae4});}),_0x589d23[_0x4ec9b5(0x173)]();}catch(_0x331358){_0x475eab[_0x4ec9b5(0x15d)]({'message':_0x331358[_0x4ec9b5(0x1b4)]});}}),module['exports']=router;