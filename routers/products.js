const a0_0x45f40e=a0_0x106a;function a0_0x106a(_0x1ffdd5,_0x2702f9){const _0x113658=a0_0x1136();return a0_0x106a=function(_0x106a95,_0x5b3fb0){_0x106a95=_0x106a95-0xeb;let _0x1c2938=_0x113658[_0x106a95];return _0x1c2938;},a0_0x106a(_0x1ffdd5,_0x2702f9);}(function(_0x82c8e8,_0x48ed30){const _0x1fa212=a0_0x106a,_0x202710=_0x82c8e8();while(!![]){try{const _0x20c03f=-parseInt(_0x1fa212(0x119))/0x1*(parseInt(_0x1fa212(0x110))/0x2)+-parseInt(_0x1fa212(0x192))/0x3+parseInt(_0x1fa212(0x14e))/0x4+parseInt(_0x1fa212(0x149))/0x5*(parseInt(_0x1fa212(0x142))/0x6)+parseInt(_0x1fa212(0x19c))/0x7*(-parseInt(_0x1fa212(0x113))/0x8)+-parseInt(_0x1fa212(0x10c))/0x9*(parseInt(_0x1fa212(0x171))/0xa)+-parseInt(_0x1fa212(0xf9))/0xb*(-parseInt(_0x1fa212(0x19b))/0xc);if(_0x20c03f===_0x48ed30)break;else _0x202710['push'](_0x202710['shift']());}catch(_0x40c8f3){_0x202710['push'](_0x202710['shift']());}}}(a0_0x1136,0x84d07));const express=require(a0_0x45f40e(0x111)),res=require('express/lib/response'),app=express(),router=express['Router'](),multer=require(a0_0x45f40e(0x19d)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x45f40e(0x126)),auth=require(a0_0x45f40e(0x17b)),users=require(a0_0x45f40e(0x14f)),excelJS=require('exceljs'),xlsx=require(a0_0x45f40e(0x11c)),JsBarcode=require(a0_0x45f40e(0xef)),{Canvas}=require(a0_0x45f40e(0x172)),PDFDocument=require(a0_0x45f40e(0x139));router[a0_0x45f40e(0x1ae)]('/categories',auth,async(_0x568e60,_0x3cb8df)=>{const _0x371dc7=a0_0x45f40e;try{const {username:_0x167717,email:_0x4a9de4,role:_0x5ee756}=_0x568e60[_0x371dc7(0x17c)],_0x12bb51=_0x568e60[_0x371dc7(0x17c)],_0x214df7=await profile[_0x371dc7(0x156)]({'email':_0x12bb51[_0x371dc7(0x16d)]}),_0x2ad6a7=await master_shop['find']();console[_0x371dc7(0x12c)](_0x371dc7(0x16e),_0x2ad6a7);const _0x5ef580=await categories[_0x371dc7(0x157)]();if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0xfb))var _0x517217=users[_0x371dc7(0x10b)];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0x13d))var _0x517217=users[_0x371dc7(0x13d)];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]=='German')var _0x517217=users['German'];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0x114))var _0x517217=users[_0x371dc7(0x114)];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0x135))var _0x517217=users[_0x371dc7(0x135)];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0x197))var _0x517217=users[_0x371dc7(0xee)];else{if(_0x2ad6a7[0x0]['language']==_0x371dc7(0x1a0))var _0x517217=users[_0x371dc7(0x1a0)];else{if(_0x2ad6a7[0x0][_0x371dc7(0x128)]==_0x371dc7(0x18e))var _0x517217=users['Arabic'];}}}}}}}_0x3cb8df[_0x371dc7(0x10a)](_0x371dc7(0x11a),{'success':_0x568e60[_0x371dc7(0x147)](_0x371dc7(0xfa)),'errors':_0x568e60['flash'](_0x371dc7(0x122)),'role':_0x12bb51,'profile':_0x214df7,'user':_0x5ef580,'master_shop':_0x2ad6a7,'language':_0x517217});}catch(_0x29713f){console[_0x371dc7(0x12c)](_0x29713f);}}),router[a0_0x45f40e(0xeb)]('/categories',auth,async(_0x108035,_0x3bba57)=>{const _0x1191fc=a0_0x45f40e;try{const {name:_0x513999,products:_0x11098f}=_0x108035[_0x1191fc(0x163)],_0xec1963=new categories({'name':_0x513999,'products':_0x11098f}),_0x52e0b1=await categories[_0x1191fc(0x156)]({'name':_0x513999});_0x52e0b1?_0x108035[_0x1191fc(0x147)](_0x1191fc(0x122),_0x513999+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x108035[_0x1191fc(0x147)](_0x1191fc(0xfa),_0x513999+'\x20categories\x20is\x20add\x20successfully');const _0x3b7065=await _0xec1963[_0x1191fc(0x102)]();_0x3bba57[_0x1191fc(0xf1)](_0x1191fc(0x173));}catch(_0x584e94){console[_0x1191fc(0x12c)](_0x584e94);}}),router['get'](a0_0x45f40e(0x16c),auth,async(_0x2f6e79,_0x215037)=>{const _0x3ed288=a0_0x45f40e;try{const {username:_0x16ef2,email:_0x479c54,role:_0x595eb1}=_0x2f6e79[_0x3ed288(0x17c)],_0x7434f9=_0x2f6e79['user'],_0x86684b=await profile[_0x3ed288(0x156)]({'email':_0x7434f9[_0x3ed288(0x16d)]}),_0x4b4e06=await master_shop['find']();console[_0x3ed288(0x12c)](_0x3ed288(0x16e),_0x4b4e06);const _0x41f231=_0x2f6e79[_0x3ed288(0x190)]['id'];console[_0x3ed288(0x12c)](_0x41f231);const _0x4b0a2a=await categories[_0x3ed288(0xff)](_0x41f231);if(_0x4b4e06[0x0][_0x3ed288(0x128)]=='English\x20(US)')var _0x1fc517=users[_0x3ed288(0x10b)];else{if(_0x4b4e06[0x0][_0x3ed288(0x128)]=='Hindi')var _0x1fc517=users['Hindi'];else{if(_0x4b4e06[0x0][_0x3ed288(0x128)]==_0x3ed288(0x195))var _0x1fc517=users[_0x3ed288(0x195)];else{if(_0x4b4e06[0x0][_0x3ed288(0x128)]==_0x3ed288(0x114))var _0x1fc517=users[_0x3ed288(0x114)];else{if(_0x4b4e06[0x0]['language']==_0x3ed288(0x135))var _0x1fc517=users[_0x3ed288(0x135)];else{if(_0x4b4e06[0x0][_0x3ed288(0x128)]==_0x3ed288(0x197))var _0x1fc517=users[_0x3ed288(0xee)];else{if(_0x4b4e06[0x0]['language']==_0x3ed288(0x1a0))var _0x1fc517=users['Chinese'];else{if(_0x4b4e06[0x0][_0x3ed288(0x128)]==_0x3ed288(0x18e))var _0x1fc517=users[_0x3ed288(0x133)];}}}}}}}_0x215037[_0x3ed288(0x10a)](_0x3ed288(0x11a),{'success':_0x2f6e79[_0x3ed288(0x147)](_0x3ed288(0xfa)),'errors':_0x2f6e79['flash'](_0x3ed288(0x122)),'role':_0x7434f9,'profile':_0x86684b,'master_shop':_0x4b4e06,'user':_0x4b0a2a,'language':_0x1fc517});}catch(_0x1917b0){console[_0x3ed288(0x12c)](_0x1917b0);}}),router[a0_0x45f40e(0xeb)]('/categories/:id',auth,async(_0x4c0347,_0x1aa4cc)=>{const _0x17efec=a0_0x45f40e;try{const _0x2613a3=_0x4c0347['params']['id'],_0x3673aa=await categories['findByIdAndUpdate'](_0x2613a3,_0x4c0347[_0x17efec(0x163)]);_0x4c0347[_0x17efec(0x147)](_0x17efec(0xfa),''+users[_0x17efec(0x13f)]),_0x1aa4cc['redirect']('/products/categories');}catch(_0x15f261){console['log'](_0x15f261);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x131),auth,async(_0x471cf9,_0x236b4a)=>{const _0x38489a=a0_0x45f40e;try{const _0x3f7709=_0x471cf9[_0x38489a(0x190)]['id'],_0x217bb6=await categories['findByIdAndDelete'](_0x3f7709);_0x471cf9[_0x38489a(0x147)](_0x38489a(0xfa),_0x38489a(0x10f)),_0x236b4a['redirect']('/products/categories');}catch(_0x138a7f){console['log'](_0x138a7f);}}),router['get'](a0_0x45f40e(0x183),auth,async(_0x2bf3d7,_0xa8d9b9)=>{const _0x556026=a0_0x45f40e;try{const {username:_0x3bd572,email:_0x1b58cc,role:_0x3766b8}=_0x2bf3d7['user'],_0x53c92b=_0x2bf3d7[_0x556026(0x17c)],_0x1a320a=await profile['findOne']({'email':_0x53c92b['email']}),_0x8bb2d4=await master_shop['find']();console[_0x556026(0x12c)](_0x556026(0x16e),_0x8bb2d4);const _0x1f7b77=await brands[_0x556026(0x157)]();if(_0x8bb2d4[0x0]['language']==_0x556026(0xfb))var _0x38b4a9=users[_0x556026(0x10b)];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]=='Hindi')var _0x38b4a9=users['Hindi'];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]=='German')var _0x38b4a9=users[_0x556026(0x195)];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]==_0x556026(0x114))var _0x38b4a9=users[_0x556026(0x114)];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]==_0x556026(0x135))var _0x38b4a9=users['French'];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]==_0x556026(0x197))var _0x38b4a9=users[_0x556026(0xee)];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]==_0x556026(0x1a0))var _0x38b4a9=users['Chinese'];else{if(_0x8bb2d4[0x0][_0x556026(0x128)]=='Arabic\x20(ae)')var _0x38b4a9=users[_0x556026(0x133)];}}}}}}}_0xa8d9b9['render'](_0x556026(0x19a),{'success':_0x2bf3d7[_0x556026(0x147)](_0x556026(0xfa)),'errors':_0x2bf3d7[_0x556026(0x147)](_0x556026(0x122)),'role':_0x53c92b,'profile':_0x1a320a,'master_shop':_0x8bb2d4,'user':_0x1f7b77,'language':_0x38b4a9});}catch(_0x298f68){console[_0x556026(0x12c)](_0x298f68);}}),router['post'](a0_0x45f40e(0x183),auth,async(_0x41ef2f,_0x4aa4ce)=>{const _0x3b540d=a0_0x45f40e;try{const {name:_0x158ecd,products:_0x335a38}=_0x41ef2f[_0x3b540d(0x163)],_0x3eb9ca=new brands({'name':_0x158ecd,'products':_0x335a38}),_0x3447d0=await brands[_0x3b540d(0x156)]({'name':_0x158ecd});_0x3447d0?_0x41ef2f[_0x3b540d(0x147)](_0x3b540d(0x122),_0x158ecd+_0x3b540d(0x101)):_0x41ef2f[_0x3b540d(0x147)]('success',_0x158ecd+_0x3b540d(0x19e));const _0x115741=await _0x3eb9ca['save']();_0x4aa4ce[_0x3b540d(0xf1)](_0x3b540d(0x12d));}catch(_0xdd5056){console[_0x3b540d(0x12c)](_0xdd5056);}}),router['get']('/brands/:id',auth,async(_0x578ef1,_0x5bd2ec)=>{const _0x34f40d=a0_0x45f40e;try{const {username:_0x14bb59,email:_0x5e0fc9,role:_0x4b6254}=_0x578ef1[_0x34f40d(0x17c)],_0x13b256=_0x578ef1[_0x34f40d(0x17c)],_0x1236e4=await profile['findOne']({'email':_0x13b256[_0x34f40d(0x16d)]}),_0x308dcd=await master_shop[_0x34f40d(0x157)]();console['log'](_0x34f40d(0x16e),_0x308dcd);const _0x326c22=_0x578ef1[_0x34f40d(0x190)]['id'];console['log'](_0x326c22);const _0x24e494=await brands[_0x34f40d(0xff)](_0x326c22);if(_0x308dcd[0x0]['language']==_0x34f40d(0xfb))var _0x1a8cb2=users[_0x34f40d(0x10b)];else{if(_0x308dcd[0x0][_0x34f40d(0x128)]==_0x34f40d(0x13d))var _0x1a8cb2=users[_0x34f40d(0x13d)];else{if(_0x308dcd[0x0]['language']==_0x34f40d(0x195))var _0x1a8cb2=users[_0x34f40d(0x195)];else{if(_0x308dcd[0x0][_0x34f40d(0x128)]==_0x34f40d(0x114))var _0x1a8cb2=users[_0x34f40d(0x114)];else{if(_0x308dcd[0x0][_0x34f40d(0x128)]==_0x34f40d(0x135))var _0x1a8cb2=users[_0x34f40d(0x135)];else{if(_0x308dcd[0x0]['language']==_0x34f40d(0x197))var _0x1a8cb2=users[_0x34f40d(0xee)];else{if(_0x308dcd[0x0][_0x34f40d(0x128)]==_0x34f40d(0x1a0))var _0x1a8cb2=users[_0x34f40d(0x1a0)];else{if(_0x308dcd[0x0][_0x34f40d(0x128)]=='Arabic\x20(ae)')var _0x1a8cb2=users[_0x34f40d(0x133)];}}}}}}}_0x5bd2ec[_0x34f40d(0x10a)](_0x34f40d(0x19a),{'success':_0x578ef1[_0x34f40d(0x147)](_0x34f40d(0xfa)),'errors':_0x578ef1[_0x34f40d(0x147)]('errors'),'role':_0x13b256,'profile':_0x1236e4,'master_shop':_0x308dcd,'user':_0x24e494,'language':_0x1a8cb2});}catch(_0x32d386){console[_0x34f40d(0x12c)](_0x32d386);}}),router['post'](a0_0x45f40e(0x146),auth,async(_0xf0f390,_0x1004da)=>{const _0x2ed1b0=a0_0x45f40e;try{const _0x15feaa=_0xf0f390[_0x2ed1b0(0x190)]['id'],_0x2bed71=await brands[_0x2ed1b0(0x13c)](_0x15feaa,_0xf0f390['body']);_0xf0f390[_0x2ed1b0(0x147)](_0x2ed1b0(0xfa),_0x2ed1b0(0x138)),_0x1004da['redirect'](_0x2ed1b0(0x12d));}catch(_0x16e977){console[_0x2ed1b0(0x12c)](_0x16e977);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x108),auth,async(_0x167d13,_0x3cb7f1)=>{const _0x3287c2=a0_0x45f40e;try{const _0x1efafe=_0x167d13[_0x3287c2(0x190)]['id'],_0x458c54=await brands[_0x3287c2(0x182)](_0x1efafe);_0x167d13[_0x3287c2(0x147)](_0x3287c2(0xfa),'brand\x20data\x20delete\x20successfully'),_0x3cb7f1['redirect'](_0x3287c2(0x12d));}catch(_0x22010b){console[_0x3287c2(0x12c)](_0x22010b);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x16a),auth,async(_0xcb57a3,_0x5d4244)=>{const _0x2af36d=a0_0x45f40e;try{const {username:_0x4e2332,email:_0x5472b6,role:_0x230ed8}=_0xcb57a3[_0x2af36d(0x17c)],_0x31ad0f=_0xcb57a3[_0x2af36d(0x17c)],_0x40aec6=await profile[_0x2af36d(0x156)]({'email':_0x31ad0f[_0x2af36d(0x16d)]}),_0x354f0f=await master_shop[_0x2af36d(0x157)]();console[_0x2af36d(0x12c)]('master',_0x354f0f);const _0x54506b=await units[_0x2af36d(0x157)]();if(_0x354f0f[0x0][_0x2af36d(0x128)]==_0x2af36d(0xfb))var _0x4a16ae=users['English'];else{if(_0x354f0f[0x0]['language']=='Hindi')var _0x4a16ae=users[_0x2af36d(0x13d)];else{if(_0x354f0f[0x0][_0x2af36d(0x128)]==_0x2af36d(0x195))var _0x4a16ae=users['German'];else{if(_0x354f0f[0x0][_0x2af36d(0x128)]=='Spanish')var _0x4a16ae=users['Spanish'];else{if(_0x354f0f[0x0]['language']==_0x2af36d(0x135))var _0x4a16ae=users['French'];else{if(_0x354f0f[0x0]['language']==_0x2af36d(0x197))var _0x4a16ae=users[_0x2af36d(0xee)];else{if(_0x354f0f[0x0][_0x2af36d(0x128)]==_0x2af36d(0x1a0))var _0x4a16ae=users[_0x2af36d(0x1a0)];else{if(_0x354f0f[0x0][_0x2af36d(0x128)]==_0x2af36d(0x18e))var _0x4a16ae=users[_0x2af36d(0x133)];}}}}}}}_0x5d4244[_0x2af36d(0x10a)](_0x2af36d(0x12f),{'success':_0xcb57a3[_0x2af36d(0x147)](_0x2af36d(0xfa)),'errors':_0xcb57a3['flash'](_0x2af36d(0x122)),'role':_0x31ad0f,'profile':_0x40aec6,'master_shop':_0x354f0f,'user':_0x54506b,'language':_0x4a16ae});}catch(_0x570171){console[_0x2af36d(0x12c)](_0x570171);}}),router['post'](a0_0x45f40e(0x16a),auth,async(_0xa8265a,_0x2acc29)=>{const _0x6bf452=a0_0x45f40e;try{const {name:_0x148635,secondary_unit:_0x55326f,products:_0x32aea2}=_0xa8265a[_0x6bf452(0x163)],_0x586ace=new units({'name':_0x148635,'secondary_unit':_0x55326f,'products':_0x32aea2}),_0x3fb72d=await units[_0x6bf452(0x156)]({'name':_0x148635});_0x3fb72d?_0xa8265a[_0x6bf452(0x147)](_0x6bf452(0x122),_0x148635+_0x6bf452(0x100)):_0xa8265a[_0x6bf452(0x147)]('success',_0x148635+'\x20unit\x20is\x20add\x20successfully');const _0x38e741=await _0x586ace['save']();_0x2acc29[_0x6bf452(0xf1)](_0x6bf452(0x120));}catch(_0x5e1a2b){console[_0x6bf452(0x12c)](_0x5e1a2b);}}),router['get']('/units/:id',auth,async(_0x43e48f,_0x4ed4cc)=>{const _0x1947ef=a0_0x45f40e;try{const {username:_0x37f6a7,email:_0x201b71,role:_0x1f3f26}=_0x43e48f[_0x1947ef(0x17c)],_0x372779=_0x43e48f[_0x1947ef(0x17c)],_0xf052bb=await profile[_0x1947ef(0x156)]({'email':_0x372779[_0x1947ef(0x16d)]}),_0x251f79=await master_shop[_0x1947ef(0x157)]();console['log'](_0x1947ef(0x16e),_0x251f79);const _0x4cc4a6=_0x43e48f[_0x1947ef(0x190)]['id'],_0x514149=await units[_0x1947ef(0xff)](_0x4cc4a6);if(_0x251f79[0x0]['language']==_0x1947ef(0xfb))var _0x2de073=users['English'];else{if(_0x251f79[0x0]['language']==_0x1947ef(0x13d))var _0x2de073=users['Hindi'];else{if(_0x251f79[0x0][_0x1947ef(0x128)]==_0x1947ef(0x195))var _0x2de073=users[_0x1947ef(0x195)];else{if(_0x251f79[0x0]['language']==_0x1947ef(0x114))var _0x2de073=users[_0x1947ef(0x114)];else{if(_0x251f79[0x0]['language']==_0x1947ef(0x135))var _0x2de073=users[_0x1947ef(0x135)];else{if(_0x251f79[0x0][_0x1947ef(0x128)]==_0x1947ef(0x197))var _0x2de073=users[_0x1947ef(0xee)];else{if(_0x251f79[0x0]['language']=='Chinese')var _0x2de073=users[_0x1947ef(0x1a0)];else{if(_0x251f79[0x0]['language']==_0x1947ef(0x18e))var _0x2de073=users[_0x1947ef(0x133)];}}}}}}}_0x4ed4cc[_0x1947ef(0x10a)](_0x1947ef(0x12f),{'success':_0x43e48f[_0x1947ef(0x147)](_0x1947ef(0xfa)),'errors':_0x43e48f[_0x1947ef(0x147)](_0x1947ef(0x122)),'role':_0x372779,'profile':_0xf052bb,'master_shop':_0x251f79,'user':_0x514149,'language':_0x2de073});}catch(_0x1d89c1){console['log'](_0x1d89c1);}}),router['post'](a0_0x45f40e(0x14a),auth,async(_0x335fdd,_0x50634c)=>{const _0xe50992=a0_0x45f40e;try{const _0x54489e=_0x335fdd[_0xe50992(0x190)]['id'],_0x308976=await units[_0xe50992(0x13c)](_0x54489e,_0x335fdd[_0xe50992(0x163)]);_0x335fdd[_0xe50992(0x147)](_0xe50992(0xfa),'unit\x20data\x20update\x20successfully'),_0x50634c[_0xe50992(0xf1)](_0xe50992(0x120));}catch(_0x43eeed){console[_0xe50992(0x12c)](_0x43eeed);}}),router[a0_0x45f40e(0x1ae)]('/units/delete/:id',auth,async(_0x274648,_0x3cdd5e)=>{const _0x24784a=a0_0x45f40e;try{const _0x4a6ae0=_0x274648['params']['id'],_0xb5ba51=await units[_0x24784a(0x182)](_0x4a6ae0);_0x274648['flash'](_0x24784a(0xfa),_0x24784a(0xfd)),_0x3cdd5e[_0x24784a(0xf1)]('/products/units');}catch(_0x43cfa7){console['log'](_0x43cfa7);}});const storage=multer[a0_0x45f40e(0x144)]({'destination':(_0x26bea6,_0x28aa34,_0x1c32a9)=>{const _0x100667=a0_0x45f40e;_0x1c32a9(null,_0x100667(0x143));},'filename':(_0x54903c,_0x5aa84e,_0x3a6592)=>{const _0x6aeff6=a0_0x45f40e;_0x3a6592(null,Date[_0x6aeff6(0x16b)]()+_0x5aa84e[_0x6aeff6(0x15d)]);}}),upload=multer({'storage':storage});router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x154),auth,async(_0x48aa7d,_0x36d9d2)=>{const _0x3e5a57=a0_0x45f40e;try{const {username:_0x40fa28,email:_0x1c700b,role:_0x2db476}=_0x48aa7d[_0x3e5a57(0x17c)],_0x162582=_0x48aa7d['user'],_0x5c6e99=await profile[_0x3e5a57(0x156)]({'email':_0x162582['email']}),_0x429585={'year':_0x3e5a57(0x189),'month':_0x3e5a57(0x18c),'day':_0x3e5a57(0x189)},_0x4a279d=await master_shop[_0x3e5a57(0x157)]();console[_0x3e5a57(0x12c)](_0x3e5a57(0x1a8),_0x4a279d);const _0x1bad20=await product[_0x3e5a57(0x157)]();console[_0x3e5a57(0x12c)]('Products\x20find_data',_0x1bad20);const _0x462326=await warehouse['aggregate']([{'$unwind':_0x3e5a57(0x186)},{'$lookup':{'from':_0x3e5a57(0xf5),'localField':_0x3e5a57(0x17a),'foreignField':_0x3e5a57(0xf8),'as':_0x3e5a57(0x1ad)}},{'$unwind':_0x3e5a57(0x1a9)},{'$project':{'product_name':_0x3e5a57(0x193),'product_stock':_0x3e5a57(0x178)}},{'$group':{'_id':_0x3e5a57(0x109),'product_stock':{'$sum':_0x3e5a57(0x1a3)}}}]);console[_0x3e5a57(0x12c)](_0x3e5a57(0x129),_0x462326),_0x462326[_0x3e5a57(0x1a7)](_0x596071=>{const _0x49ac10=_0x3e5a57,_0x54f88c=_0x1bad20[_0x49ac10(0x104)](_0x29cafd=>{const _0x3858de=_0x49ac10;_0x29cafd['name']==_0x596071['_id']&&(_0x29cafd['stock']=parseInt(_0x29cafd[_0x3858de(0x15e)])+parseInt(_0x596071[_0x3858de(0x115)]));});}),console[_0x3e5a57(0x12c)](_0x3e5a57(0x18b),_0x1bad20);if(_0x4a279d[0x0][_0x3e5a57(0x128)]=='English\x20(US)')var _0x233bee=users[_0x3e5a57(0x10b)];else{if(_0x4a279d[0x0]['language']==_0x3e5a57(0x13d))var _0x233bee=users[_0x3e5a57(0x13d)];else{if(_0x4a279d[0x0]['language']==_0x3e5a57(0x195))var _0x233bee=users[_0x3e5a57(0x195)];else{if(_0x4a279d[0x0][_0x3e5a57(0x128)]=='Spanish')var _0x233bee=users['Spanish'];else{if(_0x4a279d[0x0][_0x3e5a57(0x128)]==_0x3e5a57(0x135))var _0x233bee=users[_0x3e5a57(0x135)];else{if(_0x4a279d[0x0]['language']==_0x3e5a57(0x197))var _0x233bee=users[_0x3e5a57(0xee)];else{if(_0x4a279d[0x0][_0x3e5a57(0x128)]==_0x3e5a57(0x1a0))var _0x233bee=users[_0x3e5a57(0x1a0)];else{if(_0x4a279d[0x0][_0x3e5a57(0x128)]==_0x3e5a57(0x18e))var _0x233bee=users[_0x3e5a57(0x133)];}}}}}}}_0x36d9d2[_0x3e5a57(0x10a)](_0x3e5a57(0xf5),{'success':_0x48aa7d[_0x3e5a57(0x147)](_0x3e5a57(0xfa)),'errors':_0x48aa7d[_0x3e5a57(0x147)](_0x3e5a57(0x122)),'alldata':_0x1bad20,'profile':_0x5c6e99,'master_shop':_0x4a279d,'role':_0x162582,'product_stock':_0x462326,'language':_0x233bee});}catch(_0x16c6c7){console[_0x3e5a57(0x12c)](_0x16c6c7);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x179),auth,async(_0x3e1d68,_0x5beb2b)=>{const _0x95c88d=a0_0x45f40e;try{const {username:_0x38a3da,email:_0x2a9fad,role:_0x40ea38}=_0x3e1d68['user'],_0x5331ca=_0x3e1d68[_0x95c88d(0x17c)],_0x31b3f7=await profile[_0x95c88d(0x156)]({'email':_0x5331ca[_0x95c88d(0x16d)]}),_0x4d0d75=await master_shop[_0x95c88d(0x157)]();console[_0x95c88d(0x12c)](_0x95c88d(0x16e),_0x4d0d75);const _0x24b485=await categories['find']({}),_0x254d8e=await brands['find']({}),_0x3bccc1=await units[_0x95c88d(0x157)]({}),_0x4aa70d=await warehouse[_0x95c88d(0x157)]({'status':_0x95c88d(0x196)});if(_0x4d0d75[0x0]['language']==_0x95c88d(0xfb))var _0x50f2c2=users[_0x95c88d(0x10b)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]=='Hindi')var _0x50f2c2=users['Hindi'];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]==_0x95c88d(0x195))var _0x50f2c2=users[_0x95c88d(0x195)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]==_0x95c88d(0x114))var _0x50f2c2=users[_0x95c88d(0x114)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]==_0x95c88d(0x135))var _0x50f2c2=users[_0x95c88d(0x135)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]=='Portuguese\x20(BR)')var _0x50f2c2=users[_0x95c88d(0xee)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]==_0x95c88d(0x1a0))var _0x50f2c2=users[_0x95c88d(0x1a0)];else{if(_0x4d0d75[0x0][_0x95c88d(0x128)]=='Arabic\x20(ae)')var _0x50f2c2=users['Arabic'];}}}}}}}_0x5beb2b['render']('add_product',{'success':_0x3e1d68['flash'](_0x95c88d(0xfa)),'errors':_0x3e1d68[_0x95c88d(0x147)](_0x95c88d(0x122)),'role':_0x5331ca,'profile':_0x31b3f7,'categories':_0x24b485,'brands':_0x254d8e,'master_shop':_0x4d0d75,'units':_0x3bccc1,'language':_0x50f2c2,'find_data':_0x4aa70d});}catch(_0x5980a3){console[_0x95c88d(0x12c)](_0x5980a3);}}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x179),auth,upload[a0_0x45f40e(0x137)](a0_0x45f40e(0x14d)),async(_0x49e71d,_0x20022a)=>{const _0x11fc71=a0_0x45f40e;try{const {name:_0x1261b7,category:_0x444f69,brand:_0x4a0cca,unit:_0x157e12,alertquantity:_0x48360b,stock:_0x26de5b,product_code:_0x113439,warehouse:_0x325305,primary_ItemCode:_0x1050a1,second_ItemCode:_0x5df455,second_unit:_0x3ab65f,maxPerUnit:_0xa7a3e9,MaxPerProduct:_0x252872}=_0x49e71d[_0x11fc71(0x163)],_0x301a91=_0x49e71d[_0x11fc71(0x162)]?.[_0x11fc71(0x1ac)]||_0x11fc71(0x185),_0x486d09=new product({'image':_0x301a91,'name':_0x1261b7,'category':_0x444f69,'brand':_0x4a0cca,'unit':_0x157e12,'alertquantity':_0x48360b,'stock':_0x26de5b,'product_code':_0x113439,'warehouse':_0x325305,'primary_code':_0x1050a1,'secondary_code':_0x5df455,'second_unit':_0x3ab65f,'maxStocks':_0x252872,'maxProdPerUnit':_0xa7a3e9}),_0x194106=await _0x486d09['save'](),_0x3b7faf=await categories[_0x11fc71(0x156)]({'name':_0x444f69});_0x3b7faf[_0x11fc71(0xf5)]=parseInt(_0x3b7faf[_0x11fc71(0xf5)])+0x1,await _0x3b7faf[_0x11fc71(0x102)]();const _0x2972bf=await brands[_0x11fc71(0x156)]({'name':_0x4a0cca});_0x2972bf[_0x11fc71(0xf5)]=parseInt(_0x2972bf[_0x11fc71(0xf5)])+0x1,await _0x2972bf[_0x11fc71(0x102)]();const _0x27769a=await units[_0x11fc71(0x156)]({'name':_0x157e12});_0x27769a[_0x11fc71(0xf5)]=parseInt(_0x27769a[_0x11fc71(0xf5)])+0x1,await _0x27769a['save'](),_0x49e71d[_0x11fc71(0x147)](_0x11fc71(0xfa),'product\x20add\x20successfully'),_0x20022a[_0x11fc71(0xf1)](_0x11fc71(0x166));}catch(_0x312a55){console[_0x11fc71(0x12c)](_0x312a55);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x123),auth,async(_0x49be4a,_0x419187)=>{const _0x544d1e=a0_0x45f40e;try{const {username:_0x2826ca,email:_0x211dc0,role:_0x34a2ee}=_0x49be4a[_0x544d1e(0x17c)],_0x3e5e7a=_0x49be4a[_0x544d1e(0x17c)],_0x58f401=await profile[_0x544d1e(0x156)]({'email':_0x3e5e7a[_0x544d1e(0x16d)]}),_0x3c4ab3=await master_shop['find']();console[_0x544d1e(0x12c)](_0x544d1e(0x106),_0x3c4ab3);const _0x51b800=_0x49be4a[_0x544d1e(0x190)]['id'],_0x1aee86=await product[_0x544d1e(0xff)](_0x51b800),_0x1127b3=await categories[_0x544d1e(0x157)]({}),_0x4e452b=await brands[_0x544d1e(0x157)]({}),_0x3c07c0=await units[_0x544d1e(0x157)]({}),_0x3c4086=await warehouse[_0x544d1e(0x157)]({'status':'Enabled'}),_0x544585=await units['aggregate']([{'$group':{'_id':_0x544d1e(0xf2),'secondaryunit':{'$first':_0x544d1e(0x150)}}}]);if(_0x3c4ab3[0x0]['language']==_0x544d1e(0xfb))var _0x4af974=users['English'];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x13d))var _0x4af974=users[_0x544d1e(0x13d)];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x195))var _0x4af974=users[_0x544d1e(0x195)];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x114))var _0x4af974=users[_0x544d1e(0x114)];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]=='French')var _0x4af974=users['French'];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x197))var _0x4af974=users['Portuguese'];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x1a0))var _0x4af974=users[_0x544d1e(0x1a0)];else{if(_0x3c4ab3[0x0][_0x544d1e(0x128)]==_0x544d1e(0x18e))var _0x4af974=users[_0x544d1e(0x133)];}}}}}}}_0x419187[_0x544d1e(0x10a)](_0x544d1e(0x15b),{'success':_0x49be4a[_0x544d1e(0x147)](_0x544d1e(0xfa)),'errors':_0x49be4a['flash'](_0x544d1e(0x122)),'role':_0x3e5e7a,'profile':_0x58f401,'alldata':_0x1aee86,'categories':_0x1127b3,'brands':_0x4e452b,'master_shop':_0x3c4ab3,'units':_0x3c07c0,'secondunit':_0x544585,'find_data':_0x3c4086,'language':_0x4af974});}catch(_0x421dba){console[_0x544d1e(0x12c)](_0x421dba);}}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x123),auth,upload['single'](a0_0x45f40e(0x14d)),async(_0xda5bb7,_0x29d3b3)=>{const _0xcd9e09=a0_0x45f40e;try{console[_0xcd9e09(0x12c)](_0xcd9e09(0x15a));const _0x1aaa65=_0xda5bb7['params']['id'],_0x3ba9c7=await product['findById'](_0x1aaa65),{image:_0x246101,name:_0x4d1b9b,category:_0x38227f,brand:_0x3ced61,sku:_0x216c4d,unit:_0x14b4be,alertquantity:_0x4779d4,product_code:_0x1b097f,warehouse:_0x9e7865,primary_ItemCode:_0x181bea,second_ItemCode:_0x5e92b6,second_unit:_0x2e7526,maxPerUnit:_0x4a1775,MaxPerProduct:_0x2b08e0,prod_catdata:_0x15b4b1}=_0xda5bb7[_0xcd9e09(0x163)];_0xda5bb7[_0xcd9e09(0x162)]&&(_0x3ba9c7[_0xcd9e09(0x14d)]=_0xda5bb7[_0xcd9e09(0x162)][_0xcd9e09(0x1ac)]);_0x3ba9c7[_0xcd9e09(0xf8)]=_0x4d1b9b,_0x3ba9c7[_0xcd9e09(0x187)]=_0x38227f,_0x3ba9c7[_0xcd9e09(0x15f)]=_0x3ced61,_0x3ba9c7['sku']=_0x216c4d,_0x3ba9c7[_0xcd9e09(0x11f)]=_0x14b4be,_0x3ba9c7[_0xcd9e09(0x167)]=_0x4779d4,_0x3ba9c7[_0xcd9e09(0x127)]=_0x1b097f,_0x3ba9c7[_0xcd9e09(0x164)]=_0x9e7865,_0x3ba9c7[_0xcd9e09(0x191)]=_0x181bea,_0x3ba9c7[_0xcd9e09(0x18d)]=_0x5e92b6,_0x3ba9c7[_0xcd9e09(0x17e)]=_0x2e7526,_0x3ba9c7[_0xcd9e09(0xfc)]=_0x2b08e0,_0x3ba9c7[_0xcd9e09(0x15c)]=_0x4a1775,_0x3ba9c7[_0xcd9e09(0x116)]=_0x15b4b1;const _0x1aaeaf=await _0x3ba9c7[_0xcd9e09(0x102)]();console[_0xcd9e09(0x12c)](_0xcd9e09(0x117),_0x3ba9c7),_0xda5bb7[_0xcd9e09(0x147)]('success',_0xcd9e09(0x17d)),_0x29d3b3['redirect']('/products/view');}catch(_0x17f481){console[_0xcd9e09(0x12c)](_0x17f481);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0xed),auth,async(_0x3ce497,_0x1cfb35)=>{const _0x16d20a=a0_0x45f40e;try{const {username:_0x45a6ae,email:_0x5b712f,role:_0x93a632}=_0x3ce497[_0x16d20a(0x17c)],_0x16db72=_0x3ce497['user'],_0x21b9c8=await profile['findOne']({'email':_0x16db72[_0x16d20a(0x16d)]}),_0x38986f=await master_shop[_0x16d20a(0x157)]();console[_0x16d20a(0x12c)](_0x16d20a(0x161),_0x38986f);const _0x284084=_0x3ce497['params']['id'],_0x387ac9=await product[_0x16d20a(0xff)](_0x284084);console[_0x16d20a(0x12c)](_0x16d20a(0x112),_0x387ac9);if(_0x38986f[0x0]['language']==_0x16d20a(0xfb))var _0x18b689=users['English'];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x13d))var _0x18b689=users[_0x16d20a(0x13d)];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x195))var _0x18b689=users[_0x16d20a(0x195)];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x114))var _0x18b689=users[_0x16d20a(0x114)];else{if(_0x38986f[0x0][_0x16d20a(0x128)]=='French')var _0x18b689=users['French'];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x197))var _0x18b689=users[_0x16d20a(0xee)];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x1a0))var _0x18b689=users[_0x16d20a(0x1a0)];else{if(_0x38986f[0x0][_0x16d20a(0x128)]==_0x16d20a(0x18e))var _0x18b689=users[_0x16d20a(0x133)];}}}}}}}_0x1cfb35[_0x16d20a(0x10a)](_0x16d20a(0x13a),{'success':_0x3ce497['flash'](_0x16d20a(0xfa)),'errors':_0x3ce497[_0x16d20a(0x147)]('errors'),'role':_0x16db72,'profile':_0x21b9c8,'alldata':_0x387ac9,'master_shop':_0x38986f,'language':_0x18b689});}catch(_0x4685d7){console[_0x16d20a(0x12c)](_0x4685d7);}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x160),auth,async(_0x16ac24,_0x275f3b)=>{const _0x1061bd=a0_0x45f40e;try{const _0x491e96=new excelJS[(_0x1061bd(0x121))](),_0x1bfe33=_0x491e96[_0x1061bd(0x12e)]('Products');return _0x1bfe33['columns']=[{'header':_0x1061bd(0xec),'key':'PName','width':0xa},{'header':_0x1061bd(0x169),'key':_0x1061bd(0x11e),'width':0xa},{'header':_0x1061bd(0x13e),'key':'PUnits','width':0xa},{'header':_0x1061bd(0x10e),'key':_0x1061bd(0x12a),'width':0xa},{'header':'max_number_per_units','key':_0x1061bd(0x1a5),'width':0xa},{'header':_0x1061bd(0xf7),'key':'ProductCode','width':0xa},{'header':_0x1061bd(0x1b0),'key':_0x1061bd(0x118),'width':0xa},{'header':_0x1061bd(0x103),'key':_0x1061bd(0x118),'width':0xa},{'header':_0x1061bd(0x125),'key':_0x1061bd(0x1a4),'width':0xa},{'header':'Alert_QTY','key':_0x1061bd(0x1ab),'width':0xa},{'header':_0x1061bd(0x145),'key':'PAlQty','width':0xa},{'header':'Products_category','key':_0x1061bd(0x13b),'width':0xa}],_0x275f3b['setHeader'](_0x1061bd(0x175),_0x1061bd(0x134)),_0x275f3b[_0x1061bd(0x130)](_0x1061bd(0x1af),_0x1061bd(0x132)),_0x491e96[_0x1061bd(0x11c)][_0x1061bd(0x184)](_0x275f3b)[_0x1061bd(0x188)](()=>{const _0x494a2d=_0x1061bd;_0x275f3b[_0x494a2d(0x168)](0xc8);});}catch(_0x333617){_0x275f3b[_0x1061bd(0x168)](0x190)[_0x1061bd(0x148)](_0x333617);}});const storage1=multer['diskStorage']({'destination':(_0x25e5bf,_0x256704,_0x14932b)=>{const _0x24657e=a0_0x45f40e;_0x14932b(null,_0x24657e(0x18a));},'filename':(_0xcc76e5,_0x23beac,_0x26896e)=>{const _0xa740e5=a0_0x45f40e;_0x26896e(null,Date[_0xa740e5(0x16b)]()+_0x23beac['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x1136(){const _0x368ed7=['get','Content-Disposition','Secondary_Code','post','Product_Name','/barcode/:id','Portuguese','jsbarcode','push','redirect','$_id','concat','/print_barcode_filter/','products','/print_barcode_filter_search/','Primary_Code','name','1463rryaPy','success','English\x20(US)','maxStocks','unit\x20data\x20delete\x20successfully','Alert_QTY','findById','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','save','Product_Code','map','/select_data','edit\x20Product\x20master','/barcode_data','/brands/delete/:id','$product_name','render','English','5526WNEpyW','end','Secondary_Units','categories\x20data\x20delete\x20successfully','6wOTlhr','express','barcode\x20user_id','8VXKIlS','Spanish','product_stock','product_category','product\x20edit','ProductCode','45929dGjhDh','categories','data','xlsx','Raw\x20Materials','PBrands','unit','/products/units','Workbook','errors','/view/:id','\x20added\x20successfully','Category','../models/all_models','product_code','language','Products\x20warehouse_data','PSecondaryUnits','length','log','/products/brands','addWorksheet','units','setHeader','/categories/delete/:id','attachment;\x20filename=Product_Migration_File.xlsx','Arabic','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','French','message','single','brand\x20data\x20update\x20successfully','pdfkit-table','product_barcode','Prod_Cat','findByIdAndUpdate','Hindi','Units','categories_edit','$category','toBuffer','559242yNFaZf','public/upload','diskStorage','Maximum_Stocks','/brands/:id','flash','send','35rWklLk','/units/:id','/filter_product','json','image','2813704Wbhgva','../public/language/languages.json','$secondary_unit','$brand','base64','CODE128','/view','Sheets','findOne','find','min','$product_category','hello','edit_product','maxProdPerUnit','originalname','stock','brand','/products_export_migrate_file','barcode\x20Product\x20master','file','body','warehouse','\x20<>\x20','/products/view','alertquantity','status','Brands','/units','now','/categories/:id','email','master','/barcode_filter','max_number_per_units','5070yJRnMo','canvas','/products/categories','Finished\x20Goods','Content-Type','height','width','$product_details.product_stock','/view/add_products','product_details.product_name','../middleware/auth','user','product\x20update\x20successfully','secondary_unit','addPage','prod_categ','/products_import_migrate_file','findByIdAndDelete','/brands','write','defaultProduct.avif','$product_details','category','then','numeric','public/Migration','Products\x20find_data','long','secondary_code','Arabic\x20(ae)','sheet_to_json','params','primary_code','2947491SuvKto','$product_details.product_name','bind','German','Enabled','Portuguese\x20(BR)','/print_barcode','product_barcode_products','brands','126312mdHVjv','5461708OXwWHR','multer','\x20brand\x20is\x20add\x20successfully','utils','Chinese','public/Migration/','aggregate','$product_stock','PCat','MaxperUnits','\x20Edit\x20Successfully','forEach','Products\x20master','$product_docs','categ','PAlQty','filename','product_docs'];a0_0x1136=function(){return _0x368ed7;};return a0_0x1136();}router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x181),auth,uploadMigrate[a0_0x45f40e(0x137)]('migrate_product_fule'),async(_0x49b852,_0x4f50d4)=>{const _0x55e16f=a0_0x45f40e,_0x4a6c0d=_0x49b852[_0x55e16f(0x162)][_0x55e16f(0x1ac)],_0x2f2807=await xlsx['readFile'](_0x55e16f(0x1a1)+_0x4a6c0d);let _0x187ea6=_0x2f2807['SheetNames'],_0x12c9c4=xlsx[_0x55e16f(0x19f)][_0x55e16f(0x18f)](_0x2f2807[_0x55e16f(0x155)][_0x187ea6[0x0]]);for(const _0x489de0 of _0x12c9c4){const _0x34a45e=_0x489de0[_0x55e16f(0xec)],_0x3040ec=_0x489de0[_0x55e16f(0x169)],_0x88a17=_0x489de0[_0x55e16f(0x13e)],_0x3a1ebe=_0x489de0['Secondary_Units'],_0x235639=_0x489de0[_0x55e16f(0x103)],_0x4bd02c=_0x489de0[_0x55e16f(0x125)],_0x5523ac=_0x489de0[_0x55e16f(0xfe)],_0x25ddab=_0x489de0['Primary_Code'],_0x42799f=_0x489de0[_0x55e16f(0x1b0)],_0x5efef3=_0x489de0[_0x55e16f(0x145)],_0x336430=_0x489de0[_0x55e16f(0x170)],_0x3fc26e=_0x489de0['Products_category'];try{let _0x420a1c=await categories[_0x55e16f(0x156)]({'name':_0x4bd02c});if(!_0x420a1c){const _0x553e82=new categories({'name':_0x4bd02c,'products':'0'});_0x420a1c=await _0x553e82[_0x55e16f(0x102)]();}let _0x2a3352=await brands[_0x55e16f(0x156)]({'name':_0x3040ec});if(!_0x2a3352){const _0x51e511=new brands({'name':_0x3040ec,'products':'0'});_0x2a3352=await _0x51e511[_0x55e16f(0x102)]();}let _0x5b05ab=await units[_0x55e16f(0x156)]({'name':_0x88a17,'secondary_unit':_0x3a1ebe});if(!_0x5b05ab){const _0x11d7dc=new units({'name':_0x88a17,'secondary_unit':_0x3a1ebe,'products':'0'});_0x5b05ab=await _0x11d7dc[_0x55e16f(0x102)]();}const _0x3928bb=await product['find']({'name':_0x34a45e,'category':_0x420a1c[_0x55e16f(0xf8)],'brand':_0x2a3352['name'],'secondary_unit':_0x5b05ab[_0x55e16f(0x17e)],'product_code':_0x235639});console[_0x55e16f(0x12c)](_0x3928bb[_0x55e16f(0x12b)]+_0x55e16f(0x165)+_0x420a1c[_0x55e16f(0xf8)]+_0x55e16f(0x165)+_0x2a3352['name']+_0x55e16f(0x165)+_0x5b05ab[_0x55e16f(0x17e)]+'\x20<>\x20'+_0x235639+_0x55e16f(0x165)+_0x34a45e);if(_0x3928bb['length']===0x0){const _0x396a71=new product({'image':_0x55e16f(0x185),'name':_0x34a45e,'category':_0x420a1c[_0x55e16f(0xf8)],'brand':_0x2a3352[_0x55e16f(0xf8)],'unit':_0x5b05ab['name'],'alertquantity':_0x5523ac,'product_code':_0x235639,'secondary_unit':_0x5b05ab[_0x55e16f(0x17e)],'primary_code':_0x25ddab,'secondary_code':_0x42799f,'maxStocks':_0x5efef3,'maxProdPerUnit':_0x336430,'product_category':_0x3fc26e}),_0x484bef=await _0x396a71[_0x55e16f(0x102)]();_0x420a1c[_0x55e16f(0xf5)]=parseInt(_0x420a1c[_0x55e16f(0xf5)])+0x1,await _0x420a1c['save'](),_0x2a3352[_0x55e16f(0xf5)]=parseInt(_0x2a3352[_0x55e16f(0xf5)])+0x1,await _0x2a3352['save'](),_0x5b05ab[_0x55e16f(0xf5)]=parseInt(_0x5b05ab[_0x55e16f(0xf5)])+0x1,await _0x5b05ab[_0x55e16f(0x102)](),_0x49b852['flash'](_0x55e16f(0xfa),_0x34a45e+_0x55e16f(0x124));}else{console[_0x55e16f(0x12c)](_0x3928bb[0x0]);const _0x47a5ad=_0x3928bb[0x0];_0x47a5ad[_0x55e16f(0x187)]=_0x420a1c[_0x55e16f(0xf8)],_0x47a5ad['brand']=_0x2a3352[_0x55e16f(0xf8)],_0x47a5ad[_0x55e16f(0x11f)]=_0x5b05ab[_0x55e16f(0xf8)],_0x47a5ad[_0x55e16f(0x167)]=_0x5523ac,_0x47a5ad[_0x55e16f(0x127)]=_0x235639,_0x47a5ad[_0x55e16f(0x17e)]=_0x5b05ab[_0x55e16f(0x17e)],_0x47a5ad[_0x55e16f(0x191)]=_0x25ddab,_0x47a5ad[_0x55e16f(0x18d)]=_0x42799f,_0x47a5ad[_0x55e16f(0xfc)]=_0x5efef3,_0x47a5ad[_0x55e16f(0x15c)]=_0x336430,_0x47a5ad[_0x55e16f(0x116)]=_0x3fc26e;const _0x5cf34b=await _0x47a5ad['save']();_0x49b852[_0x55e16f(0x147)]('success',_0x5cf34b[_0x55e16f(0xf8)]+_0x55e16f(0x1a6));}}catch(_0x1e3532){_0x4f50d4['status'](0x1f4)['json']({'proderror':_0x1e3532[_0x55e16f(0x136)],'aproduct':_0x34a45e});}}_0x4f50d4[_0x55e16f(0xf1)]('/products/view');}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x105),auth,async(_0x4c456a,_0x4e393e)=>{const _0x182b55=a0_0x45f40e;try{console[_0x182b55(0x12c)](_0x4c456a[_0x182b55(0x163)]);const {data_cateory:_0x574b61,datachoose:_0x42c5cf}=_0x4c456a['body'];var _0x55bec5;if(_0x42c5cf==_0x182b55(0x180))_0x55bec5=await product[_0x182b55(0x1a2)]([{'$group':{'_id':_0x182b55(0x159)}}]);else{if(_0x42c5cf==_0x182b55(0x19a))_0x55bec5=await product['aggregate']([{'$match':{'product_category':_0x574b61}},{'$group':{'_id':'$brand'}}]);else _0x42c5cf==_0x182b55(0x1aa)&&(_0x55bec5=await product[_0x182b55(0x1a2)]([{'$match':{'product_category':_0x574b61}},{'$group':{'_id':_0x182b55(0x140)}}]));}_0x4e393e[_0x182b55(0x14c)](_0x55bec5);}catch(_0x186db7){_0x4e393e[_0x182b55(0x14c)]({'message':_0x186db7[_0x182b55(0x136)]});}}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x14b),auth,async(_0x364bcb,_0x1e74c3)=>{const _0x138cc5=a0_0x45f40e;try{const {data_choosing:_0x55ffbb,data_selected:_0x400743}=_0x364bcb[_0x138cc5(0x163)];var _0x33f668;if(_0x55ffbb=='prod_categ')_0x33f668=await product[_0x138cc5(0x1a2)]([{'$match':{'product_category':_0x400743}}]);else{if(_0x55ffbb==_0x138cc5(0x19a))_0x33f668=await product['aggregate']([{'$match':{'brand':_0x400743}}]);else _0x55ffbb=='categ'&&(_0x33f668=await product[_0x138cc5(0x1a2)]([{'$match':{'category':_0x400743}}]));}_0x1e74c3[_0x138cc5(0x14c)](_0x33f668);}catch(_0x49dcb9){_0x1e74c3[_0x138cc5(0x14c)]({'message':_0x49dcb9[_0x138cc5(0x136)]});}}),router[a0_0x45f40e(0x1ae)](a0_0x45f40e(0x198),auth,async(_0x44a740,_0x18d6c9)=>{const _0x1579d2=a0_0x45f40e,_0x49e911=_0x44a740[_0x1579d2(0x17c)],_0x24064f=await profile[_0x1579d2(0x156)]({'email':_0x49e911['email']}),_0x82ec99=await master_shop[_0x1579d2(0x157)](),_0x4d0fd6=await product[_0x1579d2(0x157)]();if(_0x82ec99[0x0][_0x1579d2(0x128)]==_0x1579d2(0xfb))var _0x2b795c=users['English'];else{if(_0x82ec99[0x0]['language']==_0x1579d2(0x13d))var _0x2b795c=users[_0x1579d2(0x13d)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]==_0x1579d2(0x195))var _0x2b795c=users[_0x1579d2(0x195)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]=='Spanish')var _0x2b795c=users[_0x1579d2(0x114)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]=='French')var _0x2b795c=users[_0x1579d2(0x135)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]==_0x1579d2(0x197))var _0x2b795c=users[_0x1579d2(0xee)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]=='Chinese')var _0x2b795c=users[_0x1579d2(0x1a0)];else{if(_0x82ec99[0x0][_0x1579d2(0x128)]==_0x1579d2(0x18e))var _0x2b795c=users['Arabic'];}}}}}}}_0x18d6c9['render'](_0x1579d2(0x199),{'success':_0x44a740[_0x1579d2(0x147)](_0x1579d2(0xfa)),'errors':_0x44a740[_0x1579d2(0x147)](_0x1579d2(0x122)),'role':_0x49e911,'profile':_0x24064f,'products':_0x4d0fd6,'master_shop':_0x82ec99,'language':_0x2b795c});}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x107),auth,async(_0x30a3bd,_0x529272)=>{const _0x55b658=a0_0x45f40e,_0x5d7229=await product['find']();_0x529272[_0x55b658(0x14c)]({'data':_0x5d7229});}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0x16f),auth,async(_0x4759ee,_0x3a4efd)=>{const _0x476fb2=a0_0x45f40e;try{const {dataProdCat:_0x1770cf,dataProdIdentity:_0x2b86a1}=_0x4759ee[_0x476fb2(0x163)];var _0x284bab;switch(_0x1770cf){case'fg':switch(_0x2b86a1){case _0x476fb2(0x169):_0x284bab=await product[_0x476fb2(0x1a2)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x476fb2(0x151)}},{'$project':{'brand':_0x476fb2(0xf2)}}]);break;case _0x476fb2(0x125):_0x284bab=await product[_0x476fb2(0x1a2)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x476fb2(0x140)}},{'$project':{'category':_0x476fb2(0xf2)}}]);break;}break;case'rm':switch(_0x2b86a1){case'Brands':_0x284bab=await product[_0x476fb2(0x1a2)]([{'$match':{'product_category':_0x476fb2(0x11d)}},{'$group':{'_id':_0x476fb2(0x151)}},{'$project':{'brand':_0x476fb2(0xf2)}}]);break;case _0x476fb2(0x125):_0x284bab=await product[_0x476fb2(0x1a2)]([{'$match':{'product_category':_0x476fb2(0x11d)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x476fb2(0xf2)}}]);break;}break;}_0x3a4efd[_0x476fb2(0x14c)](_0x284bab);}catch(_0x492db2){_0x3a4efd['json']({'message':_0x492db2[_0x476fb2(0x136)]});}}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0xf4),auth,async(_0x7c7f21,_0x3e9a16)=>{const _0xd5268=a0_0x45f40e;try{console['log'](_0x7c7f21['body']);const {prod_cat:_0x539aaf,identity:_0x2a4e91,valueData:_0x597d45,typeofbarcode:_0x1d3a35}=_0x7c7f21[_0xd5268(0x163)];let _0x5092de;switch(_0x539aaf){case'fg':if(_0x2a4e91==_0xd5268(0x169))_0x5092de=await product[_0xd5268(0x1a2)]([{'$match':{'product_category':_0xd5268(0x174),'brand':_0x597d45}}]);else _0x2a4e91==_0xd5268(0x125)&&(_0x5092de=await product[_0xd5268(0x1a2)]([{'$match':{'product_category':_0xd5268(0x174),'category':_0x597d45}}]));break;case'rm':if(_0x2a4e91=='Brands')_0x5092de=await product[_0xd5268(0x1a2)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x597d45}}]);else _0x2a4e91=='Category'&&(_0x5092de=await product[_0xd5268(0x1a2)]([{'$match':{'product_category':_0xd5268(0x11d),'category':_0x597d45}}]));break;}const _0x2a0bad=_0x35a348=>_0x35a348*0x48,_0x364453={'width':0x3,'height':0x1},_0xb03267=new PDFDocument({'margin':_0x2a0bad(0.75),'size':[_0x2a0bad(_0x364453['width']),_0x2a0bad(_0x364453[_0xd5268(0x176)])],'bufferPages':!![]}),_0x1b0c9d=_0x5092de[_0xd5268(0x12b)];for(let _0x4c49f9=0x0;_0x4c49f9<=_0x1b0c9d;_0x4c49f9++){if(_0x4c49f9!=_0x1b0c9d){const _0x178a20=_0x5092de[_0x4c49f9][_0xd5268(0xf8)],_0x420c45=_0x5092de[_0x4c49f9]['primary_code'],_0x24d906=_0x5092de[_0x4c49f9][_0xd5268(0x18d)],_0x180f4f=_0x5092de[_0x4c49f9][_0xd5268(0x127)];var _0x204c9e;switch(_0x1d3a35){case'1':_0x204c9e=_0x420c45;break;case'2':_0x204c9e=_0x24d906;break;case'3':_0x204c9e=_0x180f4f;break;}const _0x4e5bdf={'width':0xd2,'height':0x64},_0x1ddd30={'width':_0x2a0bad(_0x364453[_0xd5268(0x177)]),'height':_0x2a0bad(_0x364453[_0xd5268(0x176)])},_0x2e0026=new Canvas();JsBarcode(_0x2e0026,_0x204c9e,{'format':_0xd5268(0x153),'height':_0x4e5bdf[_0xd5268(0x176)],'displayValue':!![],'text':_0x204c9e});const _0x4d7331=_0x2e0026[_0xd5268(0x141)](),_0x174f52=_0x1ddd30[_0xd5268(0x177)]/_0x4e5bdf[_0xd5268(0x177)],_0x5be211=_0x1ddd30[_0xd5268(0x176)]/_0x4e5bdf[_0xd5268(0x176)],_0x517a54=Math[_0xd5268(0x158)](_0x174f52,_0x5be211),_0x3fd40c=_0x4e5bdf[_0xd5268(0x177)]*_0x517a54,_0x41dacd=_0x4e5bdf['height']*_0x517a54,_0x2f0426=(_0x1ddd30[_0xd5268(0x177)]-_0x3fd40c)/0x2,_0xf95ae9=(_0x1ddd30['height']-_0x41dacd)/0x2;_0xb03267[_0xd5268(0x14d)](_0x4d7331,_0x2f0426,_0xf95ae9,{'width':_0x3fd40c,'height':_0x41dacd}),_0x4c49f9!=_0x1b0c9d&&_0xb03267[_0xd5268(0x17f)]();}}const _0x59ad14=[];_0xb03267['on'](_0xd5268(0x11b),_0x59ad14[_0xd5268(0xf0)][_0xd5268(0x194)](_0x59ad14)),_0xb03267['on'](_0xd5268(0x10d),()=>{const _0x51c7ce=_0xd5268,_0xd6a10=Buffer[_0x51c7ce(0xf3)](_0x59ad14),_0x281ed3=_0xd6a10['toString'](_0x51c7ce(0x152));_0x3e9a16[_0x51c7ce(0x14c)]({'pdfContent':_0x281ed3});}),_0xb03267[_0xd5268(0x10d)]();}catch(_0x475686){_0x3e9a16[_0xd5268(0x14c)]({'message':_0x475686[_0xd5268(0x136)]});}}),router[a0_0x45f40e(0xeb)](a0_0x45f40e(0xf6),auth,async(_0x331fc3,_0xa8707c)=>{const _0x3ab696=a0_0x45f40e;try{console[_0x3ab696(0x12c)](_0x331fc3['body']);const {prod_cat:_0x371f9b,identity:_0x4a4e36,valueData:_0x1aa1f9}=_0x331fc3[_0x3ab696(0x163)];let _0x2f5e62;switch(_0x371f9b){case'fg':if(_0x4a4e36==_0x3ab696(0x169))_0x2f5e62=await product[_0x3ab696(0x1a2)]([{'$match':{'product_category':_0x3ab696(0x174),'brand':_0x1aa1f9}}]);else _0x4a4e36==_0x3ab696(0x125)&&(_0x2f5e62=await product['aggregate']([{'$match':{'product_category':_0x3ab696(0x174),'category':_0x1aa1f9}}]));break;case'rm':if(_0x4a4e36=='Brands')_0x2f5e62=await product[_0x3ab696(0x1a2)]([{'$match':{'product_category':_0x3ab696(0x11d),'brand':_0x1aa1f9}}]);else _0x4a4e36==_0x3ab696(0x125)&&(_0x2f5e62=await product[_0x3ab696(0x1a2)]([{'$match':{'product_category':_0x3ab696(0x11d),'category':_0x1aa1f9}}]));break;}_0xa8707c[_0x3ab696(0x14c)]({'data':_0x2f5e62});}catch(_0x8fd8d5){_0xa8707c[_0x3ab696(0x14c)]({'message':_0x8fd8d5[_0x3ab696(0x136)]});}}),router[a0_0x45f40e(0xeb)]('/print_barcode_single/:id',auth,async(_0x53205f,_0x3a0d6a)=>{const _0xcf9f57=a0_0x45f40e;try{const _0x10bf7e=_0x53205f[_0xcf9f57(0x190)]['id'],{copies:_0x2e8e1e,typeofbarcode:_0x54f790}=_0x53205f[_0xcf9f57(0x163)];var _0x5a2c70=await product[_0xcf9f57(0xff)](_0x10bf7e);const _0x5e52a6=_0x2032dd=>_0x2032dd*0x48,_0x5c4d3d={'width':0x3,'height':0x1},_0x2cc8ee=new PDFDocument({'margin':_0x5e52a6(0.75),'size':[_0x5e52a6(_0x5c4d3d[_0xcf9f57(0x177)]),_0x5e52a6(_0x5c4d3d[_0xcf9f57(0x176)])],'bufferPages':!![]}),_0x4a8454=_0x2e8e1e,_0x207566=_0x5a2c70['name'],_0x28773f=_0x5a2c70[_0xcf9f57(0x191)],_0x144b8f=_0x5a2c70['secondary_code'],_0x422b17=_0x5a2c70[_0xcf9f57(0x127)];let _0x10670d;switch(_0x54f790){case'1':_0x10670d=_0x28773f;break;case'2':_0x10670d=_0x144b8f;break;case'3':_0x10670d=_0x422b17;break;}const _0x4f1bad={'width':0xd2,'height':0x64},_0x5b5579={'width':_0x5e52a6(_0x5c4d3d['width']),'height':_0x5e52a6(_0x5c4d3d[_0xcf9f57(0x176)])};for(let _0x2a7d7a=0x1;_0x2a7d7a<=_0x4a8454;_0x2a7d7a++){const _0x370401=new Canvas();JsBarcode(_0x370401,_0x10670d,{'format':_0xcf9f57(0x153),'height':_0x4f1bad[_0xcf9f57(0x176)],'displayValue':!![],'text':_0x10670d});const _0x14b66d=_0x370401['toBuffer'](),_0x34184b=_0x5b5579[_0xcf9f57(0x177)]/_0x4f1bad[_0xcf9f57(0x177)],_0x3486e6=_0x5b5579[_0xcf9f57(0x176)]/_0x4f1bad[_0xcf9f57(0x176)],_0x1a10fc=Math[_0xcf9f57(0x158)](_0x34184b,_0x3486e6),_0x9547e9=_0x4f1bad[_0xcf9f57(0x177)]*_0x1a10fc,_0x4bbae6=_0x4f1bad[_0xcf9f57(0x176)]*_0x1a10fc,_0x1771ed=(_0x5b5579[_0xcf9f57(0x177)]-_0x9547e9)/0x2,_0x566a96=(_0x5b5579[_0xcf9f57(0x176)]-_0x4bbae6)/0x2;_0x2cc8ee['image'](_0x14b66d,_0x1771ed,_0x566a96,{'width':_0x9547e9,'height':_0x4bbae6}),_0x2a7d7a!=_0x4a8454&&_0x2cc8ee['addPage']();}const _0xa0accf=[];_0x2cc8ee['on'](_0xcf9f57(0x11b),_0xa0accf[_0xcf9f57(0xf0)]['bind'](_0xa0accf)),_0x2cc8ee['on'](_0xcf9f57(0x10d),()=>{const _0xc54763=_0xcf9f57,_0x230da9=Buffer[_0xc54763(0xf3)](_0xa0accf),_0x5b5b52=_0x230da9['toString'](_0xc54763(0x152));_0x3a0d6a[_0xc54763(0x14c)]({'pdfContent':_0x5b5b52});}),_0x2cc8ee[_0xcf9f57(0x10d)]();}catch(_0x451005){_0x3a0d6a['json']({'message':_0x451005['message']});}}),module['exports']=router;