const a0_0x30348a=a0_0x192e;(function(_0x486156,_0x214138){const _0x1e632f=a0_0x192e,_0x40083c=_0x486156();while(!![]){try{const _0x15f6d7=parseInt(_0x1e632f(0x19b))/0x1*(-parseInt(_0x1e632f(0x1aa))/0x2)+parseInt(_0x1e632f(0x117))/0x3+-parseInt(_0x1e632f(0x17c))/0x4+-parseInt(_0x1e632f(0x155))/0x5*(-parseInt(_0x1e632f(0x11e))/0x6)+parseInt(_0x1e632f(0x190))/0x7*(parseInt(_0x1e632f(0x147))/0x8)+parseInt(_0x1e632f(0x178))/0x9+parseInt(_0x1e632f(0x14e))/0xa*(-parseInt(_0x1e632f(0x152))/0xb);if(_0x15f6d7===_0x214138)break;else _0x40083c['push'](_0x40083c['shift']());}catch(_0x2ae22b){_0x40083c['push'](_0x40083c['shift']());}}}(a0_0x2c89,0x950ae));const express=require(a0_0x30348a(0x1ac)),res=require(a0_0x30348a(0x1b0)),app=express(),router=express[a0_0x30348a(0x187)](),multer=require(a0_0x30348a(0x1a4)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x30348a(0x173)),auth=require(a0_0x30348a(0x160)),users=require('../public/language/languages.json'),excelJS=require(a0_0x30348a(0x13d)),xlsx=require(a0_0x30348a(0x11a)),JsBarcode=require(a0_0x30348a(0x191)),{Canvas}=require(a0_0x30348a(0x118)),PDFDocument=require(a0_0x30348a(0x131));router['get'](a0_0x30348a(0x12b),auth,async(_0x52c3fe,_0x1960d6)=>{const _0x1250f5=a0_0x30348a;try{const {username:_0x339b3e,email:_0x211d91,role:_0x1fc1c5}=_0x52c3fe[_0x1250f5(0x176)],_0x52f021=_0x52c3fe[_0x1250f5(0x176)],_0x5334a7=await profile['findOne']({'email':_0x52f021[_0x1250f5(0x109)]}),_0x4a0796=await master_shop['find']();console['log'](_0x1250f5(0x197),_0x4a0796);const _0x535fad=await categories[_0x1250f5(0x13e)]();if(_0x4a0796[0x0][_0x1250f5(0x168)]==_0x1250f5(0x1a9))var _0x45cb53=users[_0x1250f5(0x18e)];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]==_0x1250f5(0x1c0))var _0x45cb53=users[_0x1250f5(0x1c0)];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]=='German')var _0x45cb53=users['German'];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]==_0x1250f5(0x1a8))var _0x45cb53=users[_0x1250f5(0x1a8)];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]=='French')var _0x45cb53=users[_0x1250f5(0x1ca)];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]==_0x1250f5(0x1ba))var _0x45cb53=users[_0x1250f5(0x1a3)];else{if(_0x4a0796[0x0][_0x1250f5(0x168)]=='Chinese')var _0x45cb53=users[_0x1250f5(0x16c)];else{if(_0x4a0796[0x0]['language']==_0x1250f5(0x121))var _0x45cb53=users[_0x1250f5(0x171)];}}}}}}}_0x1960d6[_0x1250f5(0x1b5)](_0x1250f5(0x13c),{'success':_0x52c3fe[_0x1250f5(0x120)]('success'),'errors':_0x52c3fe[_0x1250f5(0x120)](_0x1250f5(0x1ad)),'role':_0x52f021,'profile':_0x5334a7,'user':_0x535fad,'master_shop':_0x4a0796,'language':_0x45cb53});}catch(_0xb7b56c){console[_0x1250f5(0x14c)](_0xb7b56c);}}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x12b),auth,async(_0x19d9d3,_0xa03d7f)=>{const _0x17350d=a0_0x30348a;try{const {name:_0x5f5ad1,products:_0x17d19e}=_0x19d9d3[_0x17350d(0x110)],_0x2ff336=new categories({'name':_0x5f5ad1,'products':_0x17d19e}),_0x1432d8=await categories[_0x17350d(0x18c)]({'name':_0x5f5ad1});_0x1432d8?_0x19d9d3['flash']('errors',_0x5f5ad1+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x19d9d3[_0x17350d(0x120)](_0x17350d(0x15a),_0x5f5ad1+'\x20categories\x20is\x20add\x20successfully');const _0x3bdaa6=await _0x2ff336['save']();_0xa03d7f['redirect']('/products/categories');}catch(_0x39f70b){console['log'](_0x39f70b);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x150),auth,async(_0xc15390,_0x2efb08)=>{const _0xa65f04=a0_0x30348a;try{const {username:_0x1a7dc9,email:_0x59b7cf,role:_0x1f9202}=_0xc15390['user'],_0x27f9e8=_0xc15390[_0xa65f04(0x176)],_0x813c2e=await profile[_0xa65f04(0x18c)]({'email':_0x27f9e8[_0xa65f04(0x109)]}),_0x795a5a=await master_shop['find']();console[_0xa65f04(0x14c)]('master',_0x795a5a);const _0x4ca341=_0xc15390[_0xa65f04(0x1b3)]['id'];console[_0xa65f04(0x14c)](_0x4ca341);const _0x38c36b=await categories[_0xa65f04(0x156)](_0x4ca341);if(_0x795a5a[0x0]['language']==_0xa65f04(0x1a9))var _0x1395bb=users['English'];else{if(_0x795a5a[0x0][_0xa65f04(0x168)]==_0xa65f04(0x1c0))var _0x1395bb=users[_0xa65f04(0x1c0)];else{if(_0x795a5a[0x0]['language']==_0xa65f04(0x19f))var _0x1395bb=users['German'];else{if(_0x795a5a[0x0][_0xa65f04(0x168)]==_0xa65f04(0x1a8))var _0x1395bb=users[_0xa65f04(0x1a8)];else{if(_0x795a5a[0x0]['language']=='French')var _0x1395bb=users[_0xa65f04(0x1ca)];else{if(_0x795a5a[0x0][_0xa65f04(0x168)]=='Portuguese\x20(BR)')var _0x1395bb=users['Portuguese'];else{if(_0x795a5a[0x0][_0xa65f04(0x168)]==_0xa65f04(0x16c))var _0x1395bb=users[_0xa65f04(0x16c)];else{if(_0x795a5a[0x0][_0xa65f04(0x168)]=='Arabic\x20(ae)')var _0x1395bb=users['Arabic'];}}}}}}}_0x2efb08['render'](_0xa65f04(0x13c),{'success':_0xc15390[_0xa65f04(0x120)]('success'),'errors':_0xc15390[_0xa65f04(0x120)](_0xa65f04(0x1ad)),'role':_0x27f9e8,'profile':_0x813c2e,'master_shop':_0x795a5a,'user':_0x38c36b,'language':_0x1395bb});}catch(_0x1c5fa){console['log'](_0x1c5fa);}}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x150),auth,async(_0x40d3cf,_0x19df24)=>{const _0x2e5bab=a0_0x30348a;try{const _0x365c2a=_0x40d3cf[_0x2e5bab(0x1b3)]['id'],_0x23913a=await categories['findByIdAndUpdate'](_0x365c2a,_0x40d3cf[_0x2e5bab(0x110)]);_0x40d3cf[_0x2e5bab(0x120)](_0x2e5bab(0x15a),''+users[_0x2e5bab(0x1b9)]),_0x19df24[_0x2e5bab(0x19e)](_0x2e5bab(0x12f));}catch(_0x165e0c){console[_0x2e5bab(0x14c)](_0x165e0c);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x119),auth,async(_0x5aae78,_0x2493bd)=>{const _0x6e52d2=a0_0x30348a;try{const _0x4f43b1=_0x5aae78['params']['id'],_0x214fd3=await categories[_0x6e52d2(0x1d0)](_0x4f43b1);_0x5aae78[_0x6e52d2(0x120)](_0x6e52d2(0x15a),_0x6e52d2(0x1a6)),_0x2493bd['redirect'](_0x6e52d2(0x12f));}catch(_0x3181be){console[_0x6e52d2(0x14c)](_0x3181be);}}),router[a0_0x30348a(0x184)]('/brands',auth,async(_0x3b16c2,_0x3cf5e4)=>{const _0x2aebef=a0_0x30348a;try{const {username:_0x1ba36e,email:_0x350651,role:_0x50c910}=_0x3b16c2[_0x2aebef(0x176)],_0x9dd49=_0x3b16c2[_0x2aebef(0x176)],_0x1b3b73=await profile['findOne']({'email':_0x9dd49[_0x2aebef(0x109)]}),_0x469deb=await master_shop[_0x2aebef(0x13e)]();console[_0x2aebef(0x14c)](_0x2aebef(0x197),_0x469deb);const _0x48fb10=await brands[_0x2aebef(0x13e)]();if(_0x469deb[0x0][_0x2aebef(0x168)]=='English\x20(US)')var _0x2adca8=users[_0x2aebef(0x18e)];else{if(_0x469deb[0x0]['language']==_0x2aebef(0x1c0))var _0x2adca8=users['Hindi'];else{if(_0x469deb[0x0][_0x2aebef(0x168)]=='German')var _0x2adca8=users[_0x2aebef(0x19f)];else{if(_0x469deb[0x0][_0x2aebef(0x168)]==_0x2aebef(0x1a8))var _0x2adca8=users['Spanish'];else{if(_0x469deb[0x0][_0x2aebef(0x168)]==_0x2aebef(0x1ca))var _0x2adca8=users['French'];else{if(_0x469deb[0x0][_0x2aebef(0x168)]==_0x2aebef(0x1ba))var _0x2adca8=users['Portuguese'];else{if(_0x469deb[0x0][_0x2aebef(0x168)]=='Chinese')var _0x2adca8=users[_0x2aebef(0x16c)];else{if(_0x469deb[0x0]['language']=='Arabic\x20(ae)')var _0x2adca8=users[_0x2aebef(0x171)];}}}}}}}_0x3cf5e4[_0x2aebef(0x1b5)](_0x2aebef(0x10c),{'success':_0x3b16c2[_0x2aebef(0x120)](_0x2aebef(0x15a)),'errors':_0x3b16c2[_0x2aebef(0x120)](_0x2aebef(0x1ad)),'role':_0x9dd49,'profile':_0x1b3b73,'master_shop':_0x469deb,'user':_0x48fb10,'language':_0x2adca8});}catch(_0x1436ce){console[_0x2aebef(0x14c)](_0x1436ce);}}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x1c2),auth,async(_0x2efc71,_0x8a935)=>{const _0x4f9d22=a0_0x30348a;try{const {name:_0x18c445,products:_0x16e462}=_0x2efc71['body'],_0x66cf4a=new brands({'name':_0x18c445,'products':_0x16e462}),_0x1c5f7f=await brands['findOne']({'name':_0x18c445});_0x1c5f7f?_0x2efc71['flash'](_0x4f9d22(0x1ad),_0x18c445+_0x4f9d22(0x1af)):_0x2efc71[_0x4f9d22(0x120)](_0x4f9d22(0x15a),_0x18c445+_0x4f9d22(0x1b4));const _0x3039b8=await _0x66cf4a['save']();_0x8a935[_0x4f9d22(0x19e)](_0x4f9d22(0x153));}catch(_0x345da5){console[_0x4f9d22(0x14c)](_0x345da5);}}),router[a0_0x30348a(0x184)]('/brands/:id',auth,async(_0x420da5,_0x6d51c4)=>{const _0x2c1aba=a0_0x30348a;try{const {username:_0x24f35e,email:_0x47cc64,role:_0x30de2e}=_0x420da5[_0x2c1aba(0x176)],_0x594cf6=_0x420da5['user'],_0x1ff24c=await profile[_0x2c1aba(0x18c)]({'email':_0x594cf6[_0x2c1aba(0x109)]}),_0x368823=await master_shop['find']();console['log'](_0x2c1aba(0x197),_0x368823);const _0x34e5a9=_0x420da5[_0x2c1aba(0x1b3)]['id'];console[_0x2c1aba(0x14c)](_0x34e5a9);const _0x246673=await brands[_0x2c1aba(0x156)](_0x34e5a9);if(_0x368823[0x0]['language']==_0x2c1aba(0x1a9))var _0x48b994=users[_0x2c1aba(0x18e)];else{if(_0x368823[0x0][_0x2c1aba(0x168)]=='Hindi')var _0x48b994=users[_0x2c1aba(0x1c0)];else{if(_0x368823[0x0][_0x2c1aba(0x168)]==_0x2c1aba(0x19f))var _0x48b994=users[_0x2c1aba(0x19f)];else{if(_0x368823[0x0][_0x2c1aba(0x168)]==_0x2c1aba(0x1a8))var _0x48b994=users['Spanish'];else{if(_0x368823[0x0][_0x2c1aba(0x168)]=='French')var _0x48b994=users[_0x2c1aba(0x1ca)];else{if(_0x368823[0x0]['language']=='Portuguese\x20(BR)')var _0x48b994=users[_0x2c1aba(0x1a3)];else{if(_0x368823[0x0][_0x2c1aba(0x168)]==_0x2c1aba(0x16c))var _0x48b994=users[_0x2c1aba(0x16c)];else{if(_0x368823[0x0][_0x2c1aba(0x168)]=='Arabic\x20(ae)')var _0x48b994=users['Arabic'];}}}}}}}_0x6d51c4[_0x2c1aba(0x1b5)](_0x2c1aba(0x10c),{'success':_0x420da5[_0x2c1aba(0x120)](_0x2c1aba(0x15a)),'errors':_0x420da5[_0x2c1aba(0x120)](_0x2c1aba(0x1ad)),'role':_0x594cf6,'profile':_0x1ff24c,'master_shop':_0x368823,'user':_0x246673,'language':_0x48b994});}catch(_0x575721){console['log'](_0x575721);}}),router['post'](a0_0x30348a(0x17f),auth,async(_0x4de96b,_0x3f7c5d)=>{const _0x188998=a0_0x30348a;try{const _0x453491=_0x4de96b[_0x188998(0x1b3)]['id'],_0x229314=await brands[_0x188998(0x1be)](_0x453491,_0x4de96b[_0x188998(0x110)]);_0x4de96b[_0x188998(0x120)](_0x188998(0x15a),_0x188998(0x10f)),_0x3f7c5d[_0x188998(0x19e)](_0x188998(0x153));}catch(_0x47cfdb){console['log'](_0x47cfdb);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x15e),auth,async(_0x576582,_0x482b76)=>{const _0x457183=a0_0x30348a;try{const _0x42a9e3=_0x576582[_0x457183(0x1b3)]['id'],_0x5009a7=await brands[_0x457183(0x1d0)](_0x42a9e3);_0x576582[_0x457183(0x120)](_0x457183(0x15a),_0x457183(0x146)),_0x482b76[_0x457183(0x19e)](_0x457183(0x153));}catch(_0x4b3ff3){console[_0x457183(0x14c)](_0x4b3ff3);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x1b1),auth,async(_0xbb27d8,_0x382049)=>{const _0x2de369=a0_0x30348a;try{const {username:_0x3d36c0,email:_0x5c4cd4,role:_0x3716a9}=_0xbb27d8[_0x2de369(0x176)],_0x327e09=_0xbb27d8[_0x2de369(0x176)],_0x177ccf=await profile[_0x2de369(0x18c)]({'email':_0x327e09[_0x2de369(0x109)]}),_0x2cffc4=await master_shop[_0x2de369(0x13e)]();console[_0x2de369(0x14c)](_0x2de369(0x197),_0x2cffc4);const _0x16496d=await units[_0x2de369(0x13e)]();if(_0x2cffc4[0x0][_0x2de369(0x168)]==_0x2de369(0x1a9))var _0x1d2d3a=users[_0x2de369(0x18e)];else{if(_0x2cffc4[0x0][_0x2de369(0x168)]==_0x2de369(0x1c0))var _0x1d2d3a=users[_0x2de369(0x1c0)];else{if(_0x2cffc4[0x0]['language']==_0x2de369(0x19f))var _0x1d2d3a=users['German'];else{if(_0x2cffc4[0x0][_0x2de369(0x168)]==_0x2de369(0x1a8))var _0x1d2d3a=users[_0x2de369(0x1a8)];else{if(_0x2cffc4[0x0][_0x2de369(0x168)]==_0x2de369(0x1ca))var _0x1d2d3a=users[_0x2de369(0x1ca)];else{if(_0x2cffc4[0x0][_0x2de369(0x168)]==_0x2de369(0x1ba))var _0x1d2d3a=users[_0x2de369(0x1a3)];else{if(_0x2cffc4[0x0][_0x2de369(0x168)]=='Chinese')var _0x1d2d3a=users['Chinese'];else{if(_0x2cffc4[0x0]['language']==_0x2de369(0x121))var _0x1d2d3a=users[_0x2de369(0x171)];}}}}}}}_0x382049[_0x2de369(0x1b5)]('units',{'success':_0xbb27d8[_0x2de369(0x120)]('success'),'errors':_0xbb27d8['flash'](_0x2de369(0x1ad)),'role':_0x327e09,'profile':_0x177ccf,'master_shop':_0x2cffc4,'user':_0x16496d,'language':_0x1d2d3a});}catch(_0x3deee0){console[_0x2de369(0x14c)](_0x3deee0);}}),router['post'](a0_0x30348a(0x1b1),auth,async(_0x2a51e7,_0x57b5f5)=>{const _0x35c37b=a0_0x30348a;try{const {name:_0x3664b2,secondary_unit:_0xff6da1,products:_0x464e5b}=_0x2a51e7['body'],_0x358958=new units({'name':_0x3664b2,'secondary_unit':_0xff6da1,'products':_0x464e5b}),_0x2b7534=await units[_0x35c37b(0x18c)]({'name':_0x3664b2});_0x2b7534?_0x2a51e7[_0x35c37b(0x120)](_0x35c37b(0x1ad),_0x3664b2+_0x35c37b(0x18d)):_0x2a51e7[_0x35c37b(0x120)](_0x35c37b(0x15a),_0x3664b2+_0x35c37b(0x122));const _0x50903c=await _0x358958['save']();_0x57b5f5[_0x35c37b(0x19e)](_0x35c37b(0x11f));}catch(_0x541bd0){console['log'](_0x541bd0);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x185),auth,async(_0x23ec72,_0x990871)=>{const _0x305ca4=a0_0x30348a;try{const {username:_0xc800cf,email:_0x52c3ad,role:_0x68c1d9}=_0x23ec72[_0x305ca4(0x176)],_0x3d90cf=_0x23ec72[_0x305ca4(0x176)],_0x4c5479=await profile[_0x305ca4(0x18c)]({'email':_0x3d90cf[_0x305ca4(0x109)]}),_0xb835bd=await master_shop['find']();console[_0x305ca4(0x14c)](_0x305ca4(0x197),_0xb835bd);const _0x16b4ff=_0x23ec72[_0x305ca4(0x1b3)]['id'],_0x899cc3=await units['findById'](_0x16b4ff);if(_0xb835bd[0x0][_0x305ca4(0x168)]==_0x305ca4(0x1a9))var _0xe963ed=users['English'];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]==_0x305ca4(0x1c0))var _0xe963ed=users[_0x305ca4(0x1c0)];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]==_0x305ca4(0x19f))var _0xe963ed=users[_0x305ca4(0x19f)];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]==_0x305ca4(0x1a8))var _0xe963ed=users[_0x305ca4(0x1a8)];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]=='French')var _0xe963ed=users[_0x305ca4(0x1ca)];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]=='Portuguese\x20(BR)')var _0xe963ed=users['Portuguese'];else{if(_0xb835bd[0x0][_0x305ca4(0x168)]==_0x305ca4(0x16c))var _0xe963ed=users[_0x305ca4(0x16c)];else{if(_0xb835bd[0x0]['language']==_0x305ca4(0x121))var _0xe963ed=users[_0x305ca4(0x171)];}}}}}}}_0x990871[_0x305ca4(0x1b5)]('units',{'success':_0x23ec72[_0x305ca4(0x120)](_0x305ca4(0x15a)),'errors':_0x23ec72['flash'](_0x305ca4(0x1ad)),'role':_0x3d90cf,'profile':_0x4c5479,'master_shop':_0xb835bd,'user':_0x899cc3,'language':_0xe963ed});}catch(_0xec0d0a){console[_0x305ca4(0x14c)](_0xec0d0a);}}),router['post'](a0_0x30348a(0x185),auth,async(_0x1da086,_0x3a5c86)=>{const _0x5ef75d=a0_0x30348a;try{const _0x24d3ee=_0x1da086[_0x5ef75d(0x1b3)]['id'],_0x486ae2=await units[_0x5ef75d(0x1be)](_0x24d3ee,_0x1da086[_0x5ef75d(0x110)]);_0x1da086[_0x5ef75d(0x120)](_0x5ef75d(0x15a),_0x5ef75d(0x113)),_0x3a5c86[_0x5ef75d(0x19e)](_0x5ef75d(0x11f));}catch(_0x2649d1){console[_0x5ef75d(0x14c)](_0x2649d1);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x139),auth,async(_0x322a32,_0x4fb432)=>{const _0x2adb1b=a0_0x30348a;try{const _0x4620e1=_0x322a32['params']['id'],_0xbe2c34=await units['findByIdAndDelete'](_0x4620e1);_0x322a32[_0x2adb1b(0x120)](_0x2adb1b(0x15a),'unit\x20data\x20delete\x20successfully'),_0x4fb432[_0x2adb1b(0x19e)](_0x2adb1b(0x11f));}catch(_0x34866c){console[_0x2adb1b(0x14c)](_0x34866c);}});const storage=multer['diskStorage']({'destination':(_0x150d11,_0x33c15c,_0x1491be)=>{const _0x55f7cd=a0_0x30348a;_0x1491be(null,_0x55f7cd(0x163));},'filename':(_0x2c028b,_0x576397,_0x155806)=>{const _0x314667=a0_0x30348a;_0x155806(null,Date[_0x314667(0x134)]()+_0x576397[_0x314667(0x1bd)]);}}),upload=multer({'storage':storage});function a0_0x192e(_0x1ef0f3,_0x45032a){const _0x2c896e=a0_0x2c89();return a0_0x192e=function(_0x192eed,_0x2e6bc4){_0x192eed=_0x192eed-0x107;let _0xe8ded=_0x2c896e[_0x192eed];return _0xe8ded;},a0_0x192e(_0x1ef0f3,_0x45032a);}router[a0_0x30348a(0x184)]('/view',auth,async(_0x1fd7b0,_0x15421e)=>{const _0x5bf42b=a0_0x30348a;try{const {username:_0x414cbe,email:_0x28be04,role:_0x2a3a34}=_0x1fd7b0['user'],_0x1c246f=_0x1fd7b0[_0x5bf42b(0x176)],_0xd2e549=await profile[_0x5bf42b(0x18c)]({'email':_0x1c246f[_0x5bf42b(0x109)]}),_0x5a97a2={'year':_0x5bf42b(0x14a),'month':_0x5bf42b(0x108),'day':_0x5bf42b(0x14a)},_0x484f11=await master_shop['find']();console[_0x5bf42b(0x14c)]('Products\x20master',_0x484f11);const _0x39a28e=await product[_0x5bf42b(0x13e)]();console[_0x5bf42b(0x14c)](_0x5bf42b(0x15c),_0x39a28e);const _0x43c11b=await warehouse['aggregate']([{'$unwind':_0x5bf42b(0x169)},{'$lookup':{'from':_0x5bf42b(0x136),'localField':_0x5bf42b(0x140),'foreignField':_0x5bf42b(0x162),'as':_0x5bf42b(0x166)}},{'$unwind':_0x5bf42b(0x1a5)},{'$project':{'product_name':_0x5bf42b(0x132),'product_stock':_0x5bf42b(0x149)}},{'$group':{'_id':_0x5bf42b(0x195),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x5bf42b(0x14c)](_0x5bf42b(0x10b),_0x43c11b),_0x43c11b[_0x5bf42b(0x1c6)](_0x29e25f=>{const _0x25d313=_0x5bf42b,_0x49f83e=_0x39a28e[_0x25d313(0x192)](_0x3f05c2=>{const _0xb4aa4=_0x25d313;_0x3f05c2[_0xb4aa4(0x162)]==_0x29e25f['_id']&&(_0x3f05c2[_0xb4aa4(0x165)]=parseInt(_0x3f05c2['stock'])+parseInt(_0x29e25f['product_stock']));});}),console[_0x5bf42b(0x14c)]('Products\x20find_data',_0x39a28e);if(_0x484f11[0x0][_0x5bf42b(0x168)]=='English\x20(US)')var _0x5a08b2=users[_0x5bf42b(0x18e)];else{if(_0x484f11[0x0][_0x5bf42b(0x168)]==_0x5bf42b(0x1c0))var _0x5a08b2=users[_0x5bf42b(0x1c0)];else{if(_0x484f11[0x0]['language']==_0x5bf42b(0x19f))var _0x5a08b2=users[_0x5bf42b(0x19f)];else{if(_0x484f11[0x0][_0x5bf42b(0x168)]==_0x5bf42b(0x1a8))var _0x5a08b2=users[_0x5bf42b(0x1a8)];else{if(_0x484f11[0x0]['language']=='French')var _0x5a08b2=users[_0x5bf42b(0x1ca)];else{if(_0x484f11[0x0]['language']=='Portuguese\x20(BR)')var _0x5a08b2=users[_0x5bf42b(0x1a3)];else{if(_0x484f11[0x0]['language']==_0x5bf42b(0x16c))var _0x5a08b2=users[_0x5bf42b(0x16c)];else{if(_0x484f11[0x0][_0x5bf42b(0x168)]==_0x5bf42b(0x121))var _0x5a08b2=users[_0x5bf42b(0x171)];}}}}}}}_0x15421e[_0x5bf42b(0x1b5)](_0x5bf42b(0x136),{'success':_0x1fd7b0[_0x5bf42b(0x120)]('success'),'errors':_0x1fd7b0[_0x5bf42b(0x120)]('errors'),'alldata':_0x39a28e,'profile':_0xd2e549,'master_shop':_0x484f11,'role':_0x1c246f,'product_stock':_0x43c11b,'language':_0x5a08b2});}catch(_0x200441){console[_0x5bf42b(0x14c)](_0x200441);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x115),auth,async(_0x50b509,_0x1b78c5)=>{const _0x282cbe=a0_0x30348a;try{const {username:_0x9719d7,email:_0x5a2902,role:_0x5e1dec}=_0x50b509[_0x282cbe(0x176)],_0x48a9fb=_0x50b509[_0x282cbe(0x176)],_0x6baf90=await profile[_0x282cbe(0x18c)]({'email':_0x48a9fb[_0x282cbe(0x109)]}),_0x25a976=await master_shop[_0x282cbe(0x13e)]();console['log'](_0x282cbe(0x197),_0x25a976);const _0x1a080e=await categories[_0x282cbe(0x13e)]({}),_0x3582c8=await brands[_0x282cbe(0x13e)]({}),_0x487ffe=await units['find']({}),_0x4bbbbc=await warehouse['find']({'status':'Enabled'});if(_0x25a976[0x0]['language']==_0x282cbe(0x1a9))var _0x36370a=users['English'];else{if(_0x25a976[0x0][_0x282cbe(0x168)]=='Hindi')var _0x36370a=users[_0x282cbe(0x1c0)];else{if(_0x25a976[0x0][_0x282cbe(0x168)]==_0x282cbe(0x19f))var _0x36370a=users[_0x282cbe(0x19f)];else{if(_0x25a976[0x0]['language']==_0x282cbe(0x1a8))var _0x36370a=users[_0x282cbe(0x1a8)];else{if(_0x25a976[0x0][_0x282cbe(0x168)]==_0x282cbe(0x1ca))var _0x36370a=users[_0x282cbe(0x1ca)];else{if(_0x25a976[0x0][_0x282cbe(0x168)]=='Portuguese\x20(BR)')var _0x36370a=users[_0x282cbe(0x1a3)];else{if(_0x25a976[0x0][_0x282cbe(0x168)]=='Chinese')var _0x36370a=users[_0x282cbe(0x16c)];else{if(_0x25a976[0x0][_0x282cbe(0x168)]==_0x282cbe(0x121))var _0x36370a=users[_0x282cbe(0x171)];}}}}}}}_0x1b78c5['render'](_0x282cbe(0x144),{'success':_0x50b509[_0x282cbe(0x120)](_0x282cbe(0x15a)),'errors':_0x50b509[_0x282cbe(0x120)](_0x282cbe(0x1ad)),'role':_0x48a9fb,'profile':_0x6baf90,'categories':_0x1a080e,'brands':_0x3582c8,'master_shop':_0x25a976,'units':_0x487ffe,'language':_0x36370a,'find_data':_0x4bbbbc});}catch(_0x54b8c1){console['log'](_0x54b8c1);}}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x115),auth,upload['single'](a0_0x30348a(0x133)),async(_0xa7e03b,_0x2f4f98)=>{const _0x50948e=a0_0x30348a;try{const {name:_0x565d02,category:_0x2dc80c,brand:_0x32eef5,unit:_0x4b2154,alertquantity:_0x451d56,stock:_0xe3f55e,product_code:_0xb2a503,warehouse:_0x3b7e4b,primary_ItemCode:_0x1609f9,second_ItemCode:_0x3bd3d9,second_unit:_0x2bbb5b,maxPerUnit:_0x7ad958,MaxPerProduct:_0x2b2622}=_0xa7e03b[_0x50948e(0x110)],_0x4c2bce=_0xa7e03b[_0x50948e(0x126)]?.['filename']||_0x50948e(0x13b),_0x229806=new product({'image':_0x4c2bce,'name':_0x565d02,'category':_0x2dc80c,'brand':_0x32eef5,'unit':_0x4b2154,'alertquantity':_0x451d56,'stock':_0xe3f55e,'product_code':_0xb2a503,'warehouse':_0x3b7e4b,'primary_code':_0x1609f9,'secondary_code':_0x3bd3d9,'second_unit':_0x2bbb5b,'maxStocks':_0x2b2622,'maxProdPerUnit':_0x7ad958}),_0x4fc50b=await _0x229806[_0x50948e(0x1ae)](),_0x33baaa=await categories[_0x50948e(0x18c)]({'name':_0x2dc80c});_0x33baaa[_0x50948e(0x136)]=parseInt(_0x33baaa[_0x50948e(0x136)])+0x1,await _0x33baaa['save']();const _0x22d575=await brands[_0x50948e(0x18c)]({'name':_0x32eef5});_0x22d575[_0x50948e(0x136)]=parseInt(_0x22d575[_0x50948e(0x136)])+0x1,await _0x22d575[_0x50948e(0x1ae)]();const _0x4f44bc=await units['findOne']({'name':_0x4b2154});_0x4f44bc[_0x50948e(0x136)]=parseInt(_0x4f44bc[_0x50948e(0x136)])+0x1,await _0x4f44bc[_0x50948e(0x1ae)](),_0xa7e03b[_0x50948e(0x120)]('success',_0x50948e(0x180)),_0x2f4f98[_0x50948e(0x19e)](_0x50948e(0x123));}catch(_0x121b7c){console['log'](_0x121b7c);}}),router['get'](a0_0x30348a(0x11b),auth,async(_0x4048a6,_0xc60803)=>{const _0x138663=a0_0x30348a;try{const {username:_0x4a00f2,email:_0x4b41fc,role:_0x592aea}=_0x4048a6[_0x138663(0x176)],_0x1c5784=_0x4048a6[_0x138663(0x176)],_0x187eb3=await profile[_0x138663(0x18c)]({'email':_0x1c5784[_0x138663(0x109)]}),_0xcf51dd=await master_shop[_0x138663(0x13e)]();console[_0x138663(0x14c)](_0x138663(0x10a),_0xcf51dd);const _0x4f76c3=_0x4048a6['params']['id'],_0x551a30=await product['findById'](_0x4f76c3),_0x163a6e=await categories[_0x138663(0x13e)]({}),_0x7d4e68=await brands['find']({}),_0x59ef5a=await units['find']({}),_0x3cb124=await warehouse[_0x138663(0x13e)]({'status':_0x138663(0x17e)}),_0x2a75e3=await units[_0x138663(0x1a7)]([{'$group':{'_id':_0x138663(0x158),'secondaryunit':{'$first':_0x138663(0x1c3)}}}]);if(_0xcf51dd[0x0][_0x138663(0x168)]==_0x138663(0x1a9))var _0x145d4e=users['English'];else{if(_0xcf51dd[0x0][_0x138663(0x168)]=='Hindi')var _0x145d4e=users[_0x138663(0x1c0)];else{if(_0xcf51dd[0x0][_0x138663(0x168)]==_0x138663(0x19f))var _0x145d4e=users[_0x138663(0x19f)];else{if(_0xcf51dd[0x0]['language']==_0x138663(0x1a8))var _0x145d4e=users['Spanish'];else{if(_0xcf51dd[0x0][_0x138663(0x168)]==_0x138663(0x1ca))var _0x145d4e=users[_0x138663(0x1ca)];else{if(_0xcf51dd[0x0]['language']==_0x138663(0x1ba))var _0x145d4e=users[_0x138663(0x1a3)];else{if(_0xcf51dd[0x0][_0x138663(0x168)]==_0x138663(0x16c))var _0x145d4e=users[_0x138663(0x16c)];else{if(_0xcf51dd[0x0][_0x138663(0x168)]==_0x138663(0x121))var _0x145d4e=users[_0x138663(0x171)];}}}}}}}_0xc60803['render']('edit_product',{'success':_0x4048a6[_0x138663(0x120)](_0x138663(0x15a)),'errors':_0x4048a6[_0x138663(0x120)](_0x138663(0x1ad)),'role':_0x1c5784,'profile':_0x187eb3,'alldata':_0x551a30,'categories':_0x163a6e,'brands':_0x7d4e68,'master_shop':_0xcf51dd,'units':_0x59ef5a,'secondunit':_0x2a75e3,'find_data':_0x3cb124,'language':_0x145d4e});}catch(_0x44290b){console[_0x138663(0x14c)](_0x44290b);}}),router[a0_0x30348a(0x1b7)]('/view/:id',auth,upload[a0_0x30348a(0x181)]('image'),async(_0x4cd951,_0x16d7b2)=>{const _0x3ddee7=a0_0x30348a;try{console[_0x3ddee7(0x14c)](_0x3ddee7(0x1b8));const _0x31d19e=_0x4cd951[_0x3ddee7(0x1b3)]['id'],_0x13d971=await product[_0x3ddee7(0x156)](_0x31d19e),{image:_0x22bc34,name:_0x4dd3ab,category:_0x404082,brand:_0x2f2db3,sku:_0x844773,unit:_0x294e74,alertquantity:_0x1d9233,product_code:_0x415d20,warehouse:_0x2aafa9,primary_ItemCode:_0x3d92c6,second_ItemCode:_0x1404fe,second_unit:_0x1b8c52,maxPerUnit:_0x2844ed,MaxPerProduct:_0x47f6d7,prod_catdata:_0x295a58}=_0x4cd951[_0x3ddee7(0x110)];_0x4cd951[_0x3ddee7(0x126)]&&(_0x13d971[_0x3ddee7(0x133)]=_0x4cd951[_0x3ddee7(0x126)][_0x3ddee7(0x13f)]);_0x13d971[_0x3ddee7(0x162)]=_0x4dd3ab,_0x13d971[_0x3ddee7(0x194)]=_0x404082,_0x13d971['brand']=_0x2f2db3,_0x13d971[_0x3ddee7(0x12e)]=_0x844773,_0x13d971['unit']=_0x294e74,_0x13d971[_0x3ddee7(0x1c7)]=_0x1d9233,_0x13d971[_0x3ddee7(0x172)]=_0x415d20,_0x13d971['warehouse']=_0x2aafa9,_0x13d971[_0x3ddee7(0x1cc)]=_0x3d92c6,_0x13d971['secondary_code']=_0x1404fe,_0x13d971[_0x3ddee7(0x12d)]=_0x1b8c52,_0x13d971[_0x3ddee7(0x125)]=_0x47f6d7,_0x13d971[_0x3ddee7(0x19c)]=_0x2844ed,_0x13d971[_0x3ddee7(0x16b)]=_0x295a58;const _0x1d229a=await _0x13d971[_0x3ddee7(0x1ae)]();console[_0x3ddee7(0x14c)](_0x3ddee7(0x189),_0x13d971),_0x4cd951[_0x3ddee7(0x120)](_0x3ddee7(0x15a),_0x3ddee7(0x177)),_0x16d7b2[_0x3ddee7(0x19e)](_0x3ddee7(0x123));}catch(_0x3385aa){console['log'](_0x3385aa);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x1b2),auth,async(_0x34ed2f,_0x49f217)=>{const _0x1596cc=a0_0x30348a;try{const {username:_0x2288c8,email:_0x479685,role:_0x16ffc2}=_0x34ed2f[_0x1596cc(0x176)],_0x545d28=_0x34ed2f[_0x1596cc(0x176)],_0x2a38a3=await profile[_0x1596cc(0x18c)]({'email':_0x545d28['email']}),_0x16e58b=await master_shop[_0x1596cc(0x13e)]();console['log'](_0x1596cc(0x183),_0x16e58b);const _0x108982=_0x34ed2f[_0x1596cc(0x1b3)]['id'],_0x1fd37f=await product[_0x1596cc(0x156)](_0x108982);console['log'](_0x1596cc(0x198),_0x1fd37f);if(_0x16e58b[0x0][_0x1596cc(0x168)]=='English\x20(US)')var _0x2ca2ce=users[_0x1596cc(0x18e)];else{if(_0x16e58b[0x0]['language']=='Hindi')var _0x2ca2ce=users[_0x1596cc(0x1c0)];else{if(_0x16e58b[0x0]['language']==_0x1596cc(0x19f))var _0x2ca2ce=users[_0x1596cc(0x19f)];else{if(_0x16e58b[0x0][_0x1596cc(0x168)]==_0x1596cc(0x1a8))var _0x2ca2ce=users['Spanish'];else{if(_0x16e58b[0x0][_0x1596cc(0x168)]=='French')var _0x2ca2ce=users[_0x1596cc(0x1ca)];else{if(_0x16e58b[0x0][_0x1596cc(0x168)]=='Portuguese\x20(BR)')var _0x2ca2ce=users[_0x1596cc(0x1a3)];else{if(_0x16e58b[0x0][_0x1596cc(0x168)]==_0x1596cc(0x16c))var _0x2ca2ce=users[_0x1596cc(0x16c)];else{if(_0x16e58b[0x0][_0x1596cc(0x168)]==_0x1596cc(0x121))var _0x2ca2ce=users[_0x1596cc(0x171)];}}}}}}}_0x49f217['render'](_0x1596cc(0x130),{'success':_0x34ed2f[_0x1596cc(0x120)](_0x1596cc(0x15a)),'errors':_0x34ed2f[_0x1596cc(0x120)](_0x1596cc(0x1ad)),'role':_0x545d28,'profile':_0x2a38a3,'alldata':_0x1fd37f,'master_shop':_0x16e58b,'language':_0x2ca2ce});}catch(_0x43c46c){console[_0x1596cc(0x14c)](_0x43c46c);}}),router[a0_0x30348a(0x184)](a0_0x30348a(0x1a1),auth,async(_0x5a472c,_0x1ef4ff)=>{const _0xc051fb=a0_0x30348a;try{const _0x5bdc85=new excelJS[(_0xc051fb(0x1c4))](),_0x4b6c62=_0x5bdc85[_0xc051fb(0x137)]('Products');return _0x4b6c62[_0xc051fb(0x164)]=[{'header':_0xc051fb(0x161),'key':_0xc051fb(0x1c8),'width':0xa},{'header':'Brands','key':_0xc051fb(0x128),'width':0xa},{'header':_0xc051fb(0x1cb),'key':_0xc051fb(0x14f),'width':0xa},{'header':'Secondary_Units','key':_0xc051fb(0x14b),'width':0xa},{'header':_0xc051fb(0x186),'key':_0xc051fb(0x1ce),'width':0xa},{'header':_0xc051fb(0x114),'key':_0xc051fb(0x16f),'width':0xa},{'header':'Secondary_Code','key':_0xc051fb(0x16f),'width':0xa},{'header':_0xc051fb(0x1a0),'key':_0xc051fb(0x16f),'width':0xa},{'header':_0xc051fb(0x12c),'key':_0xc051fb(0x16d),'width':0xa},{'header':_0xc051fb(0x1cd),'key':'PAlQty','width':0xa},{'header':'Maximum_Stocks','key':_0xc051fb(0x17a),'width':0xa},{'header':_0xc051fb(0x116),'key':_0xc051fb(0x141),'width':0xa}],_0x1ef4ff[_0xc051fb(0x129)](_0xc051fb(0x15d),_0xc051fb(0x14d)),_0x1ef4ff[_0xc051fb(0x129)]('Content-Disposition',_0xc051fb(0x11c)),_0x5bdc85[_0xc051fb(0x11a)][_0xc051fb(0x18a)](_0x1ef4ff)[_0xc051fb(0x154)](()=>{const _0x58c14a=_0xc051fb;_0x1ef4ff[_0x58c14a(0x170)](0xc8);});}catch(_0x149673){_0x1ef4ff[_0xc051fb(0x170)](0x190)[_0xc051fb(0x1ab)](_0x149673);}});const storage1=multer[a0_0x30348a(0x13a)]({'destination':(_0x4c47e1,_0x29253d,_0x236fa5)=>{const _0x27db27=a0_0x30348a;_0x236fa5(null,_0x27db27(0x15b));},'filename':(_0x906546,_0x1c5fe7,_0x1a0bc5)=>{const _0x579cc4=a0_0x30348a;_0x1a0bc5(null,Date[_0x579cc4(0x134)]()+_0x1c5fe7[_0x579cc4(0x1bd)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x2c89(){const _0x4d11aa=['public/upload','columns','stock','product_docs','/products_import_migrate_file','language','$product_details','$brand','product_category','Chinese','PCat','Finished\x20Goods','ProductCode','status','Arabic','product_code','../models/all_models','concat','base64','user','product\x20update\x20successfully','1333062vFGCnk','exports','PAlQty','utils','2679548abemZe','Raw\x20Materials','Enabled','/brands/:id','product\x20add\x20successfully','single','Brands','barcode\x20Product\x20master','get','/units/:id','max_number_per_units','Router','toBuffer','product\x20edit','write','brand','findOne','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','English','migrate_product_fule','7dGMebN','jsbarcode','map','unit','category','$product_name','Sheets','master','barcode\x20user_id','\x20Edit\x20Successfully','height','113HnnIia','maxProdPerUnit','categ','redirect','German','Product_Code','/products_export_migrate_file','end','Portuguese','multer','$product_docs','categories\x20data\x20delete\x20successfully','aggregate','Spanish','English\x20(US)','11740qGhBOK','send','express','errors','save','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','express/lib/response','/units','/barcode/:id','params','\x20brand\x20is\x20add\x20successfully','render','CODE128','post','hello','categories_edit','Portuguese\x20(BR)','Secondary_Units','/print_barcode_filter/','originalname','findByIdAndUpdate','toString','Hindi','prod_categ','/brands','$secondary_unit','Workbook','bind','forEach','alertquantity','PName','Secondary_Code','French','Units','primary_code','Alert_QTY','MaxperUnits','sheet_to_json','findByIdAndDelete','json','long','email','edit\x20Product\x20master','Products\x20warehouse_data','brands','SheetNames','\x20added\x20successfully','brand\x20data\x20update\x20successfully','body','message','min','unit\x20data\x20update\x20successfully','Primary_Code','/view/add_products','Products_category','2118693jgsqUX','canvas','/categories/delete/:id','xlsx','/view/:id','attachment;\x20filename=Product_Migration_File.xlsx','Maximum_Stocks','5536074hXfRBB','/products/units','flash','Arabic\x20(ae)','\x20unit\x20is\x20add\x20successfully','/products/view','/filter_product','maxStocks','file','secondary_code','PBrands','setHeader','readFile','/categories','Category','secondary_unit','sku','/products/categories','product_barcode','pdfkit-table','$product_details.product_name','image','now','push','products','addWorksheet','width','/units/delete/:id','diskStorage','defaultProduct.avif','categories','exceljs','find','filename','product_details.product_name','Prod_Cat','data','/barcode_filter','add_product','length','brand\x20data\x20delete\x20successfully','8495664fEBruP','$category','$product_details.product_stock','numeric','PSecondaryUnits','log','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','30ktMAaZ','PUnits','/categories/:id','addPage','3282807AwZVpq','/products/brands','then','5LaGPQf','findById','/barcode_data','$_id','\x20<>\x20','success','public/Migration','Products\x20find_data','Content-Type','/brands/delete/:id','/print_barcode_single/:id','../middleware/auth','Product_Name','name'];a0_0x2c89=function(){return _0x4d11aa;};return a0_0x2c89();}router[a0_0x30348a(0x1b7)](a0_0x30348a(0x167),auth,uploadMigrate['single'](a0_0x30348a(0x18f)),async(_0x1b88f3,_0x225b06)=>{const _0x126e62=a0_0x30348a,_0x3edb8e=_0x1b88f3[_0x126e62(0x126)]['filename'],_0x209a23=await xlsx[_0x126e62(0x12a)]('public/Migration/'+_0x3edb8e);let _0x1b99c6=_0x209a23[_0x126e62(0x10d)],_0x1a2a65=xlsx[_0x126e62(0x17b)][_0x126e62(0x1cf)](_0x209a23[_0x126e62(0x196)][_0x1b99c6[0x0]]);for(const _0x4ae1dd of _0x1a2a65){const _0x4e4020=_0x4ae1dd[_0x126e62(0x161)],_0x4bda63=_0x4ae1dd['Brands'],_0x166dd5=_0x4ae1dd[_0x126e62(0x1cb)],_0x2b035f=_0x4ae1dd[_0x126e62(0x1bb)],_0x3c7492=_0x4ae1dd['Product_Code'],_0x112855=_0x4ae1dd['Category'],_0x4a143a=_0x4ae1dd[_0x126e62(0x1cd)],_0x1da839=_0x4ae1dd[_0x126e62(0x114)],_0x2b1815=_0x4ae1dd[_0x126e62(0x1c9)],_0x2a40b1=_0x4ae1dd[_0x126e62(0x11d)],_0x7d2326=_0x4ae1dd[_0x126e62(0x186)],_0x2bf38a=_0x4ae1dd[_0x126e62(0x116)];try{let _0x2d3d1f=await categories[_0x126e62(0x18c)]({'name':_0x112855});if(!_0x2d3d1f){const _0x2c3843=new categories({'name':_0x112855,'products':'0'});_0x2d3d1f=await _0x2c3843[_0x126e62(0x1ae)]();}let _0x2ebf55=await brands[_0x126e62(0x18c)]({'name':_0x4bda63});if(!_0x2ebf55){const _0xf4f96e=new brands({'name':_0x4bda63,'products':'0'});_0x2ebf55=await _0xf4f96e['save']();}let _0x2b4c4e=await units['findOne']({'name':_0x166dd5,'secondary_unit':_0x2b035f});if(!_0x2b4c4e){const _0x3e52ec=new units({'name':_0x166dd5,'secondary_unit':_0x2b035f,'products':'0'});_0x2b4c4e=await _0x3e52ec['save']();}const _0x25a4de=await product[_0x126e62(0x13e)]({'name':_0x4e4020,'category':_0x2d3d1f['name'],'brand':_0x2ebf55[_0x126e62(0x162)],'secondary_unit':_0x2b4c4e[_0x126e62(0x12d)],'product_code':_0x3c7492});console[_0x126e62(0x14c)](_0x25a4de[_0x126e62(0x145)]+_0x126e62(0x159)+_0x2d3d1f[_0x126e62(0x162)]+'\x20<>\x20'+_0x2ebf55[_0x126e62(0x162)]+_0x126e62(0x159)+_0x2b4c4e[_0x126e62(0x12d)]+_0x126e62(0x159)+_0x3c7492+_0x126e62(0x159)+_0x4e4020);if(_0x25a4de['length']===0x0){const _0x32d0d4=new product({'image':'defaultProduct.avif','name':_0x4e4020,'category':_0x2d3d1f[_0x126e62(0x162)],'brand':_0x2ebf55[_0x126e62(0x162)],'unit':_0x2b4c4e[_0x126e62(0x162)],'alertquantity':_0x4a143a,'product_code':_0x3c7492,'secondary_unit':_0x2b4c4e['secondary_unit'],'primary_code':_0x1da839,'secondary_code':_0x2b1815,'maxStocks':_0x2a40b1,'maxProdPerUnit':_0x7d2326,'product_category':_0x2bf38a}),_0x447fe7=await _0x32d0d4[_0x126e62(0x1ae)]();_0x2d3d1f[_0x126e62(0x136)]=parseInt(_0x2d3d1f[_0x126e62(0x136)])+0x1,await _0x2d3d1f[_0x126e62(0x1ae)](),_0x2ebf55[_0x126e62(0x136)]=parseInt(_0x2ebf55[_0x126e62(0x136)])+0x1,await _0x2ebf55[_0x126e62(0x1ae)](),_0x2b4c4e[_0x126e62(0x136)]=parseInt(_0x2b4c4e[_0x126e62(0x136)])+0x1,await _0x2b4c4e[_0x126e62(0x1ae)](),_0x1b88f3['flash']('success',_0x4e4020+_0x126e62(0x10e));}else{console[_0x126e62(0x14c)](_0x25a4de[0x0]);const _0x4e35b0=_0x25a4de[0x0];_0x4e35b0[_0x126e62(0x194)]=_0x2d3d1f['name'],_0x4e35b0[_0x126e62(0x18b)]=_0x2ebf55[_0x126e62(0x162)],_0x4e35b0[_0x126e62(0x193)]=_0x2b4c4e['name'],_0x4e35b0[_0x126e62(0x1c7)]=_0x4a143a,_0x4e35b0[_0x126e62(0x172)]=_0x3c7492,_0x4e35b0[_0x126e62(0x12d)]=_0x2b4c4e[_0x126e62(0x12d)],_0x4e35b0['primary_code']=_0x1da839,_0x4e35b0[_0x126e62(0x127)]=_0x2b1815,_0x4e35b0[_0x126e62(0x125)]=_0x2a40b1,_0x4e35b0['maxProdPerUnit']=_0x7d2326,_0x4e35b0[_0x126e62(0x16b)]=_0x2bf38a;const _0x18dad4=await _0x4e35b0[_0x126e62(0x1ae)]();_0x1b88f3[_0x126e62(0x120)](_0x126e62(0x15a),_0x18dad4[_0x126e62(0x162)]+_0x126e62(0x199));}}catch(_0x4867a5){_0x225b06[_0x126e62(0x170)](0x1f4)[_0x126e62(0x107)]({'proderror':_0x4867a5[_0x126e62(0x111)],'aproduct':_0x4e4020});}}_0x225b06[_0x126e62(0x19e)]('/products/view');}),router[a0_0x30348a(0x1b7)]('/select_data',auth,async(_0x7009af,_0x2d6cb4)=>{const _0x411306=a0_0x30348a;try{console[_0x411306(0x14c)](_0x7009af[_0x411306(0x110)]);const {data_cateory:_0x4873de,datachoose:_0x46d492}=_0x7009af[_0x411306(0x110)];var _0xcccbf2;if(_0x46d492==_0x411306(0x1c1))_0xcccbf2=await product[_0x411306(0x1a7)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x46d492=='brands')_0xcccbf2=await product['aggregate']([{'$match':{'product_category':_0x4873de}},{'$group':{'_id':_0x411306(0x16a)}}]);else _0x46d492==_0x411306(0x19d)&&(_0xcccbf2=await product['aggregate']([{'$match':{'product_category':_0x4873de}},{'$group':{'_id':_0x411306(0x148)}}]));}_0x2d6cb4[_0x411306(0x107)](_0xcccbf2);}catch(_0x996387){_0x2d6cb4[_0x411306(0x107)]({'message':_0x996387['message']});}}),router['post'](a0_0x30348a(0x124),auth,async(_0x3d3e5c,_0x5d6f86)=>{const _0x335e10=a0_0x30348a;try{const {data_choosing:_0x5e0ee6,data_selected:_0x1b3e32}=_0x3d3e5c[_0x335e10(0x110)];var _0xdc4c81;if(_0x5e0ee6==_0x335e10(0x1c1))_0xdc4c81=await product[_0x335e10(0x1a7)]([{'$match':{'product_category':_0x1b3e32}}]);else{if(_0x5e0ee6=='brands')_0xdc4c81=await product[_0x335e10(0x1a7)]([{'$match':{'brand':_0x1b3e32}}]);else _0x5e0ee6==_0x335e10(0x19d)&&(_0xdc4c81=await product[_0x335e10(0x1a7)]([{'$match':{'category':_0x1b3e32}}]));}_0x5d6f86[_0x335e10(0x107)](_0xdc4c81);}catch(_0x39d9d7){_0x5d6f86[_0x335e10(0x107)]({'message':_0x39d9d7[_0x335e10(0x111)]});}}),router[a0_0x30348a(0x184)]('/print_barcode',auth,async(_0x5415f4,_0x5e3771)=>{const _0x1855fc=a0_0x30348a,_0x42c8a0=_0x5415f4[_0x1855fc(0x176)],_0x56212a=await profile[_0x1855fc(0x18c)]({'email':_0x42c8a0[_0x1855fc(0x109)]}),_0xabf4d7=await master_shop['find'](),_0xe3b119=await product['find']();if(_0xabf4d7[0x0][_0x1855fc(0x168)]==_0x1855fc(0x1a9))var _0x5243c5=users[_0x1855fc(0x18e)];else{if(_0xabf4d7[0x0][_0x1855fc(0x168)]==_0x1855fc(0x1c0))var _0x5243c5=users[_0x1855fc(0x1c0)];else{if(_0xabf4d7[0x0][_0x1855fc(0x168)]=='German')var _0x5243c5=users[_0x1855fc(0x19f)];else{if(_0xabf4d7[0x0]['language']==_0x1855fc(0x1a8))var _0x5243c5=users['Spanish'];else{if(_0xabf4d7[0x0][_0x1855fc(0x168)]==_0x1855fc(0x1ca))var _0x5243c5=users[_0x1855fc(0x1ca)];else{if(_0xabf4d7[0x0][_0x1855fc(0x168)]==_0x1855fc(0x1ba))var _0x5243c5=users[_0x1855fc(0x1a3)];else{if(_0xabf4d7[0x0][_0x1855fc(0x168)]=='Chinese')var _0x5243c5=users['Chinese'];else{if(_0xabf4d7[0x0]['language']==_0x1855fc(0x121))var _0x5243c5=users['Arabic'];}}}}}}}_0x5e3771['render']('product_barcode_products',{'success':_0x5415f4[_0x1855fc(0x120)]('success'),'errors':_0x5415f4[_0x1855fc(0x120)]('errors'),'role':_0x42c8a0,'profile':_0x56212a,'products':_0xe3b119,'master_shop':_0xabf4d7,'language':_0x5243c5});}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x157),auth,async(_0xd5075b,_0x6dbd40)=>{const _0x1e27a3=a0_0x30348a,_0x5568d9=await product[_0x1e27a3(0x13e)]();_0x6dbd40[_0x1e27a3(0x107)]({'data':_0x5568d9});}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x143),auth,async(_0x5da408,_0x540d12)=>{const _0x61831d=a0_0x30348a;try{const {dataProdCat:_0x16b77e,dataProdIdentity:_0x5ac58d}=_0x5da408[_0x61831d(0x110)];var _0x46f0d2;switch(_0x16b77e){case'fg':switch(_0x5ac58d){case'Brands':_0x46f0d2=await product[_0x61831d(0x1a7)]([{'$match':{'product_category':_0x61831d(0x16e)}},{'$group':{'_id':_0x61831d(0x16a)}},{'$project':{'brand':_0x61831d(0x158)}}]);break;case _0x61831d(0x12c):_0x46f0d2=await product['aggregate']([{'$match':{'product_category':_0x61831d(0x16e)}},{'$group':{'_id':_0x61831d(0x148)}},{'$project':{'category':_0x61831d(0x158)}}]);break;}break;case'rm':switch(_0x5ac58d){case _0x61831d(0x182):_0x46f0d2=await product[_0x61831d(0x1a7)]([{'$match':{'product_category':_0x61831d(0x17d)}},{'$group':{'_id':_0x61831d(0x16a)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x46f0d2=await product[_0x61831d(0x1a7)]([{'$match':{'product_category':_0x61831d(0x17d)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x61831d(0x158)}}]);break;}break;}_0x540d12[_0x61831d(0x107)](_0x46f0d2);}catch(_0x2d3f68){_0x540d12['json']({'message':_0x2d3f68['message']});}}),router[a0_0x30348a(0x1b7)](a0_0x30348a(0x1bc),auth,async(_0x1a1a6f,_0x50ccb4)=>{const _0x238a8d=a0_0x30348a;try{console[_0x238a8d(0x14c)](_0x1a1a6f[_0x238a8d(0x110)]);const {prod_cat:_0x137aea,identity:_0x106e21,valueData:_0x49e431,typeofbarcode:_0xd3e41a}=_0x1a1a6f[_0x238a8d(0x110)];let _0x104b35;switch(_0x137aea){case'fg':if(_0x106e21=='Brands')_0x104b35=await product[_0x238a8d(0x1a7)]([{'$match':{'product_category':_0x238a8d(0x16e),'brand':_0x49e431}}]);else _0x106e21=='Category'&&(_0x104b35=await product[_0x238a8d(0x1a7)]([{'$match':{'product_category':_0x238a8d(0x16e),'category':_0x49e431}}]));break;case'rm':if(_0x106e21==_0x238a8d(0x182))_0x104b35=await product[_0x238a8d(0x1a7)]([{'$match':{'product_category':_0x238a8d(0x17d),'brand':_0x49e431}}]);else _0x106e21==_0x238a8d(0x12c)&&(_0x104b35=await product[_0x238a8d(0x1a7)]([{'$match':{'product_category':_0x238a8d(0x17d),'category':_0x49e431}}]));break;}const _0x1dcd0f=_0x1acee3=>_0x1acee3*0x48,_0x50e759={'width':0x3,'height':0x1},_0x5ee755=new PDFDocument({'margin':_0x1dcd0f(0.75),'size':[_0x1dcd0f(_0x50e759[_0x238a8d(0x138)]),_0x1dcd0f(_0x50e759['height'])],'bufferPages':!![]}),_0x39e7d5=_0x104b35[_0x238a8d(0x145)];for(let _0x1897cb=0x0;_0x1897cb<=_0x39e7d5;_0x1897cb++){if(_0x1897cb!=_0x39e7d5){const _0x522736=_0x104b35[_0x1897cb][_0x238a8d(0x162)],_0x52df69=_0x104b35[_0x1897cb][_0x238a8d(0x1cc)],_0x1f0c54=_0x104b35[_0x1897cb][_0x238a8d(0x127)],_0x365a1e=_0x104b35[_0x1897cb][_0x238a8d(0x172)];var _0x55d6a6;switch(_0xd3e41a){case'1':_0x55d6a6=_0x52df69;break;case'2':_0x55d6a6=_0x1f0c54;break;case'3':_0x55d6a6=_0x365a1e;break;}const _0x1ffb0b={'width':0xd2,'height':0x64},_0x16f229={'width':_0x1dcd0f(_0x50e759[_0x238a8d(0x138)]),'height':_0x1dcd0f(_0x50e759[_0x238a8d(0x19a)])},_0xf327a0=new Canvas();JsBarcode(_0xf327a0,_0x55d6a6,{'format':_0x238a8d(0x1b6),'height':_0x1ffb0b[_0x238a8d(0x19a)],'displayValue':!![],'text':_0x55d6a6});const _0x2a94bf=_0xf327a0[_0x238a8d(0x188)](),_0x5c5795=_0x16f229[_0x238a8d(0x138)]/_0x1ffb0b[_0x238a8d(0x138)],_0x34989a=_0x16f229['height']/_0x1ffb0b[_0x238a8d(0x19a)],_0x55700=Math[_0x238a8d(0x112)](_0x5c5795,_0x34989a),_0x2f1822=_0x1ffb0b[_0x238a8d(0x138)]*_0x55700,_0x5612d2=_0x1ffb0b[_0x238a8d(0x19a)]*_0x55700,_0x1a42c4=(_0x16f229['width']-_0x2f1822)/0x2,_0x237eca=(_0x16f229['height']-_0x5612d2)/0x2;_0x5ee755[_0x238a8d(0x133)](_0x2a94bf,_0x1a42c4,_0x237eca,{'width':_0x2f1822,'height':_0x5612d2}),_0x1897cb!=_0x39e7d5&&_0x5ee755[_0x238a8d(0x151)]();}}const _0x156f13=[];_0x5ee755['on'](_0x238a8d(0x142),_0x156f13['push']['bind'](_0x156f13)),_0x5ee755['on'](_0x238a8d(0x1a2),()=>{const _0x36f79e=_0x238a8d,_0x2670b1=Buffer['concat'](_0x156f13),_0x1fc8da=_0x2670b1[_0x36f79e(0x1bf)](_0x36f79e(0x175));_0x50ccb4[_0x36f79e(0x107)]({'pdfContent':_0x1fc8da});}),_0x5ee755[_0x238a8d(0x1a2)]();}catch(_0x4de1e6){_0x50ccb4['json']({'message':_0x4de1e6[_0x238a8d(0x111)]});}}),router[a0_0x30348a(0x1b7)]('/print_barcode_filter_search/',auth,async(_0x5981a5,_0x21f2a5)=>{const _0x33f6fb=a0_0x30348a;try{console[_0x33f6fb(0x14c)](_0x5981a5['body']);const {prod_cat:_0x18959d,identity:_0x1e3c36,valueData:_0x21db79}=_0x5981a5[_0x33f6fb(0x110)];let _0xdc88c0;switch(_0x18959d){case'fg':if(_0x1e3c36=='Brands')_0xdc88c0=await product['aggregate']([{'$match':{'product_category':_0x33f6fb(0x16e),'brand':_0x21db79}}]);else _0x1e3c36==_0x33f6fb(0x12c)&&(_0xdc88c0=await product['aggregate']([{'$match':{'product_category':_0x33f6fb(0x16e),'category':_0x21db79}}]));break;case'rm':if(_0x1e3c36=='Brands')_0xdc88c0=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x21db79}}]);else _0x1e3c36==_0x33f6fb(0x12c)&&(_0xdc88c0=await product[_0x33f6fb(0x1a7)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x21db79}}]));break;}_0x21f2a5[_0x33f6fb(0x107)]({'data':_0xdc88c0});}catch(_0x1068a3){_0x21f2a5['json']({'message':_0x1068a3['message']});}}),router['post'](a0_0x30348a(0x15f),auth,async(_0x147fd3,_0x3b2497)=>{const _0x420ed=a0_0x30348a;try{const _0x30f998=_0x147fd3['params']['id'],{copies:_0x27b7c3,typeofbarcode:_0xab7340}=_0x147fd3[_0x420ed(0x110)];var _0x326bac=await product[_0x420ed(0x156)](_0x30f998);const _0x5d3afd=_0x5adb5a=>_0x5adb5a*0x48,_0x3dc148={'width':0x3,'height':0x1},_0x59d0d9=new PDFDocument({'margin':_0x5d3afd(0.75),'size':[_0x5d3afd(_0x3dc148[_0x420ed(0x138)]),_0x5d3afd(_0x3dc148[_0x420ed(0x19a)])],'bufferPages':!![]}),_0x18f79b=_0x27b7c3,_0x2e09ae=_0x326bac[_0x420ed(0x162)],_0x23d8a7=_0x326bac[_0x420ed(0x1cc)],_0x512781=_0x326bac[_0x420ed(0x127)],_0x105753=_0x326bac[_0x420ed(0x172)];let _0x1eb071;switch(_0xab7340){case'1':_0x1eb071=_0x23d8a7;break;case'2':_0x1eb071=_0x512781;break;case'3':_0x1eb071=_0x105753;break;}const _0x4fa973={'width':0xd2,'height':0x64},_0x43b213={'width':_0x5d3afd(_0x3dc148['width']),'height':_0x5d3afd(_0x3dc148[_0x420ed(0x19a)])};for(let _0x5196b5=0x1;_0x5196b5<=_0x18f79b;_0x5196b5++){const _0x5d7fbf=new Canvas();JsBarcode(_0x5d7fbf,_0x1eb071,{'format':_0x420ed(0x1b6),'height':_0x4fa973[_0x420ed(0x19a)],'displayValue':!![],'text':_0x1eb071});const _0x5b0722=_0x5d7fbf[_0x420ed(0x188)](),_0x52e5c6=_0x43b213[_0x420ed(0x138)]/_0x4fa973[_0x420ed(0x138)],_0x13685c=_0x43b213['height']/_0x4fa973['height'],_0x4417e5=Math['min'](_0x52e5c6,_0x13685c),_0x47083a=_0x4fa973[_0x420ed(0x138)]*_0x4417e5,_0x599c70=_0x4fa973['height']*_0x4417e5,_0x4e46b3=(_0x43b213['width']-_0x47083a)/0x2,_0x293437=(_0x43b213[_0x420ed(0x19a)]-_0x599c70)/0x2;_0x59d0d9[_0x420ed(0x133)](_0x5b0722,_0x4e46b3,_0x293437,{'width':_0x47083a,'height':_0x599c70}),_0x5196b5!=_0x18f79b&&_0x59d0d9[_0x420ed(0x151)]();}const _0x2fb6ad=[];_0x59d0d9['on'](_0x420ed(0x142),_0x2fb6ad[_0x420ed(0x135)][_0x420ed(0x1c5)](_0x2fb6ad)),_0x59d0d9['on'](_0x420ed(0x1a2),()=>{const _0xd82b17=_0x420ed,_0x261b61=Buffer[_0xd82b17(0x174)](_0x2fb6ad),_0x453b15=_0x261b61[_0xd82b17(0x1bf)](_0xd82b17(0x175));_0x3b2497[_0xd82b17(0x107)]({'pdfContent':_0x453b15});}),_0x59d0d9[_0x420ed(0x1a2)]();}catch(_0x1e9960){_0x3b2497[_0x420ed(0x107)]({'message':_0x1e9960[_0x420ed(0x111)]});}}),module[a0_0x30348a(0x179)]=router;