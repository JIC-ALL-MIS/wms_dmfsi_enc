const a0_0xc07f94=a0_0x4051;(function(_0x827306,_0x139bdc){const _0x5836ad=a0_0x4051,_0x4cd9a8=_0x827306();while(!![]){try{const _0x3d46fc=-parseInt(_0x5836ad(0x1a3))/0x1*(parseInt(_0x5836ad(0x155))/0x2)+-parseInt(_0x5836ad(0x1a1))/0x3+parseInt(_0x5836ad(0x1c0))/0x4+-parseInt(_0x5836ad(0x121))/0x5*(parseInt(_0x5836ad(0x1ad))/0x6)+-parseInt(_0x5836ad(0x105))/0x7*(parseInt(_0x5836ad(0x15e))/0x8)+parseInt(_0x5836ad(0x111))/0x9*(-parseInt(_0x5836ad(0x1c2))/0xa)+parseInt(_0x5836ad(0x17e))/0xb*(parseInt(_0x5836ad(0x1b6))/0xc);if(_0x3d46fc===_0x139bdc)break;else _0x4cd9a8['push'](_0x4cd9a8['shift']());}catch(_0x38536c){_0x4cd9a8['push'](_0x4cd9a8['shift']());}}}(a0_0x2476,0xc1235));const express=require('express'),res=require(a0_0xc07f94(0x12e)),app=express(),router=express[a0_0xc07f94(0x1a2)](),multer=require(a0_0xc07f94(0x104)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0xc07f94(0x147)),auth=require(a0_0xc07f94(0x182)),users=require(a0_0xc07f94(0x17b)),excelJS=require(a0_0xc07f94(0x1ae)),xlsx=require(a0_0xc07f94(0x1c1)),JsBarcode=require(a0_0xc07f94(0x1b5)),{Canvas}=require('canvas'),PDFDocument=require(a0_0xc07f94(0x1ac));router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x112),auth,async(_0x14011c,_0x21d59f)=>{const _0x143416=a0_0xc07f94;try{const {username:_0x4a762a,email:_0x29f540,role:_0x5e8f76}=_0x14011c[_0x143416(0x188)],_0x4a60c5=_0x14011c['user'],_0x1fb28d=await profile[_0x143416(0x19d)]({'email':_0x4a60c5[_0x143416(0x19f)]}),_0x3da366=await master_shop[_0x143416(0x1bd)]();console[_0x143416(0x120)](_0x143416(0x18c),_0x3da366);const _0x1af2a8=await categories[_0x143416(0x1bd)]();if(_0x3da366[0x0][_0x143416(0x1ba)]==_0x143416(0x179))var _0x302ea4=users[_0x143416(0x170)];else{if(_0x3da366[0x0][_0x143416(0x1ba)]=='Hindi')var _0x302ea4=users[_0x143416(0x15a)];else{if(_0x3da366[0x0]['language']==_0x143416(0x12d))var _0x302ea4=users[_0x143416(0x12d)];else{if(_0x3da366[0x0]['language']=='Spanish')var _0x302ea4=users[_0x143416(0x1c3)];else{if(_0x3da366[0x0][_0x143416(0x1ba)]==_0x143416(0x132))var _0x302ea4=users[_0x143416(0x132)];else{if(_0x3da366[0x0]['language']==_0x143416(0x1bb))var _0x302ea4=users[_0x143416(0x108)];else{if(_0x3da366[0x0][_0x143416(0x1ba)]=='Chinese')var _0x302ea4=users[_0x143416(0x15b)];else{if(_0x3da366[0x0][_0x143416(0x1ba)]==_0x143416(0x171))var _0x302ea4=users[_0x143416(0x19a)];}}}}}}}_0x21d59f[_0x143416(0x183)](_0x143416(0x131),{'success':_0x14011c[_0x143416(0x10e)](_0x143416(0x1b2)),'errors':_0x14011c[_0x143416(0x10e)](_0x143416(0x15f)),'role':_0x4a60c5,'profile':_0x1fb28d,'user':_0x1af2a8,'master_shop':_0x3da366,'language':_0x302ea4});}catch(_0x1a46c7){console[_0x143416(0x120)](_0x1a46c7);}}),router['post']('/categories',auth,async(_0x5d8ec5,_0xf47900)=>{const _0x574102=a0_0xc07f94;try{const {name:_0x5464ee,products:_0x231ffc}=_0x5d8ec5['body'],_0x1634ab=new categories({'name':_0x5464ee,'products':_0x231ffc}),_0x218b92=await categories[_0x574102(0x19d)]({'name':_0x5464ee});_0x218b92?_0x5d8ec5['flash'](_0x574102(0x15f),_0x5464ee+_0x574102(0x145)):_0x5d8ec5[_0x574102(0x10e)](_0x574102(0x1b2),_0x5464ee+_0x574102(0x17d));const _0x1a88c3=await _0x1634ab[_0x574102(0x143)]();_0xf47900['redirect'](_0x574102(0x1b9));}catch(_0x14f130){console[_0x574102(0x120)](_0x14f130);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x172),auth,async(_0x4b9940,_0x20555c)=>{const _0x3e58c0=a0_0xc07f94;try{const {username:_0x1ce3ea,email:_0x2cf2ce,role:_0x327afd}=_0x4b9940[_0x3e58c0(0x188)],_0x1cf626=_0x4b9940[_0x3e58c0(0x188)],_0x3c3765=await profile['findOne']({'email':_0x1cf626[_0x3e58c0(0x19f)]}),_0x2dbfb8=await master_shop[_0x3e58c0(0x1bd)]();console['log'](_0x3e58c0(0x18c),_0x2dbfb8);const _0xf8617f=_0x4b9940[_0x3e58c0(0x146)]['id'];console[_0x3e58c0(0x120)](_0xf8617f);const _0x171fc1=await categories[_0x3e58c0(0x194)](_0xf8617f);if(_0x2dbfb8[0x0]['language']==_0x3e58c0(0x179))var _0x2dd9b6=users[_0x3e58c0(0x170)];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]==_0x3e58c0(0x15a))var _0x2dd9b6=users[_0x3e58c0(0x15a)];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]=='German')var _0x2dd9b6=users[_0x3e58c0(0x12d)];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]==_0x3e58c0(0x1c3))var _0x2dd9b6=users['Spanish'];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]=='French')var _0x2dd9b6=users['French'];else{if(_0x2dbfb8[0x0]['language']==_0x3e58c0(0x1bb))var _0x2dd9b6=users[_0x3e58c0(0x108)];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]=='Chinese')var _0x2dd9b6=users['Chinese'];else{if(_0x2dbfb8[0x0][_0x3e58c0(0x1ba)]==_0x3e58c0(0x171))var _0x2dd9b6=users[_0x3e58c0(0x19a)];}}}}}}}_0x20555c[_0x3e58c0(0x183)](_0x3e58c0(0x131),{'success':_0x4b9940['flash'](_0x3e58c0(0x1b2)),'errors':_0x4b9940[_0x3e58c0(0x10e)](_0x3e58c0(0x15f)),'role':_0x1cf626,'profile':_0x3c3765,'master_shop':_0x2dbfb8,'user':_0x171fc1,'language':_0x2dd9b6});}catch(_0x103537){console['log'](_0x103537);}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x172),auth,async(_0x1d5cb1,_0x3c5b1c)=>{const _0x51b429=a0_0xc07f94;try{const _0x1738a2=_0x1d5cb1['params']['id'],_0x4b4cb9=await categories['findByIdAndUpdate'](_0x1738a2,_0x1d5cb1[_0x51b429(0x193)]);_0x1d5cb1[_0x51b429(0x10e)](_0x51b429(0x1b2),''+users[_0x51b429(0x16a)]),_0x3c5b1c[_0x51b429(0x196)]('/products/categories');}catch(_0x13dc47){console[_0x51b429(0x120)](_0x13dc47);}}),router['get'](a0_0xc07f94(0x14a),auth,async(_0x46c944,_0x16cbe5)=>{const _0x1f37d9=a0_0xc07f94;try{const _0x58346f=_0x46c944['params']['id'],_0x490da1=await categories['findByIdAndDelete'](_0x58346f);_0x46c944[_0x1f37d9(0x10e)](_0x1f37d9(0x1b2),'categories\x20data\x20delete\x20successfully'),_0x16cbe5[_0x1f37d9(0x196)](_0x1f37d9(0x1b9));}catch(_0x599536){console[_0x1f37d9(0x120)](_0x599536);}}),router[a0_0xc07f94(0x1a0)]('/brands',auth,async(_0x570c87,_0x2ae6f8)=>{const _0x352799=a0_0xc07f94;try{const {username:_0x6907d,email:_0x57f841,role:_0x1085b4}=_0x570c87[_0x352799(0x188)],_0x2fb92d=_0x570c87['user'],_0x5ef7c5=await profile['findOne']({'email':_0x2fb92d[_0x352799(0x19f)]}),_0x2a46d3=await master_shop[_0x352799(0x1bd)]();console[_0x352799(0x120)](_0x352799(0x18c),_0x2a46d3);const _0x561869=await brands[_0x352799(0x1bd)]();if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x179))var _0x40b6a3=users[_0x352799(0x170)];else{if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x15a))var _0x40b6a3=users['Hindi'];else{if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x12d))var _0x40b6a3=users[_0x352799(0x12d)];else{if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x1c3))var _0x40b6a3=users['Spanish'];else{if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x132))var _0x40b6a3=users[_0x352799(0x132)];else{if(_0x2a46d3[0x0]['language']==_0x352799(0x1bb))var _0x40b6a3=users['Portuguese'];else{if(_0x2a46d3[0x0][_0x352799(0x1ba)]==_0x352799(0x15b))var _0x40b6a3=users[_0x352799(0x15b)];else{if(_0x2a46d3[0x0]['language']==_0x352799(0x171))var _0x40b6a3=users['Arabic'];}}}}}}}_0x2ae6f8[_0x352799(0x183)](_0x352799(0x192),{'success':_0x570c87['flash']('success'),'errors':_0x570c87[_0x352799(0x10e)](_0x352799(0x15f)),'role':_0x2fb92d,'profile':_0x5ef7c5,'master_shop':_0x2a46d3,'user':_0x561869,'language':_0x40b6a3});}catch(_0x457923){console[_0x352799(0x120)](_0x457923);}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x150),auth,async(_0x5ef4a3,_0x268494)=>{const _0x35c1e4=a0_0xc07f94;try{const {name:_0x209ea3,products:_0x2a1ff2}=_0x5ef4a3[_0x35c1e4(0x193)],_0x57816c=new brands({'name':_0x209ea3,'products':_0x2a1ff2}),_0x49787e=await brands[_0x35c1e4(0x19d)]({'name':_0x209ea3});_0x49787e?_0x5ef4a3['flash'](_0x35c1e4(0x15f),_0x209ea3+_0x35c1e4(0x1a8)):_0x5ef4a3[_0x35c1e4(0x10e)](_0x35c1e4(0x1b2),_0x209ea3+'\x20brand\x20is\x20add\x20successfully');const _0x2ffc3b=await _0x57816c['save']();_0x268494[_0x35c1e4(0x196)]('/products/brands');}catch(_0x34d56f){console[_0x35c1e4(0x120)](_0x34d56f);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x138),auth,async(_0x49a490,_0x189173)=>{const _0x649c8d=a0_0xc07f94;try{const {username:_0x6bd5de,email:_0x2a53dc,role:_0x29800e}=_0x49a490['user'],_0x1e5d4c=_0x49a490[_0x649c8d(0x188)],_0x49b066=await profile['findOne']({'email':_0x1e5d4c[_0x649c8d(0x19f)]}),_0x11e52a=await master_shop['find']();console[_0x649c8d(0x120)]('master',_0x11e52a);const _0x105741=_0x49a490['params']['id'];console[_0x649c8d(0x120)](_0x105741);const _0x70804a=await brands['findById'](_0x105741);if(_0x11e52a[0x0][_0x649c8d(0x1ba)]==_0x649c8d(0x179))var _0x46d4cd=users[_0x649c8d(0x170)];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]==_0x649c8d(0x15a))var _0x46d4cd=users[_0x649c8d(0x15a)];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]=='German')var _0x46d4cd=users['German'];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]==_0x649c8d(0x1c3))var _0x46d4cd=users[_0x649c8d(0x1c3)];else{if(_0x11e52a[0x0]['language']==_0x649c8d(0x132))var _0x46d4cd=users[_0x649c8d(0x132)];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]==_0x649c8d(0x1bb))var _0x46d4cd=users[_0x649c8d(0x108)];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]==_0x649c8d(0x15b))var _0x46d4cd=users[_0x649c8d(0x15b)];else{if(_0x11e52a[0x0][_0x649c8d(0x1ba)]=='Arabic\x20(ae)')var _0x46d4cd=users[_0x649c8d(0x19a)];}}}}}}}_0x189173[_0x649c8d(0x183)]('brands',{'success':_0x49a490[_0x649c8d(0x10e)](_0x649c8d(0x1b2)),'errors':_0x49a490[_0x649c8d(0x10e)]('errors'),'role':_0x1e5d4c,'profile':_0x49b066,'master_shop':_0x11e52a,'user':_0x70804a,'language':_0x46d4cd});}catch(_0x55f8b0){console['log'](_0x55f8b0);}}),router[a0_0xc07f94(0x109)]('/brands/:id',auth,async(_0x213ff5,_0x52ac50)=>{const _0x5467af=a0_0xc07f94;try{const _0x381e44=_0x213ff5[_0x5467af(0x146)]['id'],_0x5638af=await brands[_0x5467af(0x15c)](_0x381e44,_0x213ff5[_0x5467af(0x193)]);_0x213ff5[_0x5467af(0x10e)](_0x5467af(0x1b2),_0x5467af(0x16e)),_0x52ac50[_0x5467af(0x196)](_0x5467af(0x13d));}catch(_0x6eabf0){console[_0x5467af(0x120)](_0x6eabf0);}}),router['get'](a0_0xc07f94(0x165),auth,async(_0x2cf009,_0x135fee)=>{const _0x5c40a9=a0_0xc07f94;try{const _0x362ff0=_0x2cf009[_0x5c40a9(0x146)]['id'],_0x2174b0=await brands[_0x5c40a9(0x197)](_0x362ff0);_0x2cf009['flash'](_0x5c40a9(0x1b2),_0x5c40a9(0x11f)),_0x135fee[_0x5c40a9(0x196)](_0x5c40a9(0x13d));}catch(_0x1e68ed){console[_0x5c40a9(0x120)](_0x1e68ed);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x14d),auth,async(_0x3490f2,_0x17fcd5)=>{const _0x219584=a0_0xc07f94;try{const {username:_0x217d59,email:_0x559623,role:_0x46c0cc}=_0x3490f2[_0x219584(0x188)],_0x1e7afa=_0x3490f2[_0x219584(0x188)],_0x57740e=await profile[_0x219584(0x19d)]({'email':_0x1e7afa[_0x219584(0x19f)]}),_0x2f2d0f=await master_shop[_0x219584(0x1bd)]();console[_0x219584(0x120)]('master',_0x2f2d0f);const _0x190e91=await units['find']();if(_0x2f2d0f[0x0][_0x219584(0x1ba)]==_0x219584(0x179))var _0x5d3017=users['English'];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]=='Hindi')var _0x5d3017=users['Hindi'];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]=='German')var _0x5d3017=users[_0x219584(0x12d)];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]=='Spanish')var _0x5d3017=users[_0x219584(0x1c3)];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]==_0x219584(0x132))var _0x5d3017=users[_0x219584(0x132)];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]=='Portuguese\x20(BR)')var _0x5d3017=users['Portuguese'];else{if(_0x2f2d0f[0x0]['language']==_0x219584(0x15b))var _0x5d3017=users[_0x219584(0x15b)];else{if(_0x2f2d0f[0x0][_0x219584(0x1ba)]==_0x219584(0x171))var _0x5d3017=users[_0x219584(0x19a)];}}}}}}}_0x17fcd5[_0x219584(0x183)](_0x219584(0x10c),{'success':_0x3490f2[_0x219584(0x10e)](_0x219584(0x1b2)),'errors':_0x3490f2[_0x219584(0x10e)]('errors'),'role':_0x1e7afa,'profile':_0x57740e,'master_shop':_0x2f2d0f,'user':_0x190e91,'language':_0x5d3017});}catch(_0x4c5d96){console[_0x219584(0x120)](_0x4c5d96);}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x14d),auth,async(_0x49dd3b,_0x102b89)=>{const _0x2c9d68=a0_0xc07f94;try{const {name:_0x169a15,secondary_unit:_0x32cb48,products:_0x3af811}=_0x49dd3b[_0x2c9d68(0x193)],_0xfd5d15=new units({'name':_0x169a15,'secondary_unit':_0x32cb48,'products':_0x3af811}),_0x12ef14=await units[_0x2c9d68(0x19d)]({'name':_0x169a15});_0x12ef14?_0x49dd3b[_0x2c9d68(0x10e)](_0x2c9d68(0x15f),_0x169a15+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x49dd3b[_0x2c9d68(0x10e)](_0x2c9d68(0x1b2),_0x169a15+'\x20unit\x20is\x20add\x20successfully');const _0x3ffdd0=await _0xfd5d15['save']();_0x102b89[_0x2c9d68(0x196)](_0x2c9d68(0x142));}catch(_0x35e55e){console['log'](_0x35e55e);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x18e),auth,async(_0x403494,_0x3746dd)=>{const _0x373b3b=a0_0xc07f94;try{const {username:_0x279121,email:_0x11215a,role:_0x2736aa}=_0x403494['user'],_0x428bf5=_0x403494['user'],_0x2e4c13=await profile[_0x373b3b(0x19d)]({'email':_0x428bf5[_0x373b3b(0x19f)]}),_0x4a8457=await master_shop['find']();console[_0x373b3b(0x120)](_0x373b3b(0x18c),_0x4a8457);const _0x3c6262=_0x403494['params']['id'],_0x1bfe2b=await units[_0x373b3b(0x194)](_0x3c6262);if(_0x4a8457[0x0][_0x373b3b(0x1ba)]==_0x373b3b(0x179))var _0x19d29d=users['English'];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]=='Hindi')var _0x19d29d=users[_0x373b3b(0x15a)];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]=='German')var _0x19d29d=users[_0x373b3b(0x12d)];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]==_0x373b3b(0x1c3))var _0x19d29d=users['Spanish'];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]=='French')var _0x19d29d=users[_0x373b3b(0x132)];else{if(_0x4a8457[0x0]['language']=='Portuguese\x20(BR)')var _0x19d29d=users[_0x373b3b(0x108)];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]==_0x373b3b(0x15b))var _0x19d29d=users['Chinese'];else{if(_0x4a8457[0x0][_0x373b3b(0x1ba)]=='Arabic\x20(ae)')var _0x19d29d=users['Arabic'];}}}}}}}_0x3746dd[_0x373b3b(0x183)]('units',{'success':_0x403494[_0x373b3b(0x10e)](_0x373b3b(0x1b2)),'errors':_0x403494['flash']('errors'),'role':_0x428bf5,'profile':_0x2e4c13,'master_shop':_0x4a8457,'user':_0x1bfe2b,'language':_0x19d29d});}catch(_0x593302){console['log'](_0x593302);}}),router[a0_0xc07f94(0x109)]('/units/:id',auth,async(_0x3e950c,_0x3935b6)=>{const _0x2c557c=a0_0xc07f94;try{const _0x59b09c=_0x3e950c[_0x2c557c(0x146)]['id'],_0x4e2428=await units[_0x2c557c(0x15c)](_0x59b09c,_0x3e950c[_0x2c557c(0x193)]);_0x3e950c['flash'](_0x2c557c(0x1b2),_0x2c557c(0x11b)),_0x3935b6[_0x2c557c(0x196)]('/products/units');}catch(_0x3179d0){console[_0x2c557c(0x120)](_0x3179d0);}}),router['get'](a0_0xc07f94(0x176),auth,async(_0x476d6e,_0x3f736a)=>{const _0x1d3ad9=a0_0xc07f94;try{const _0x598d5b=_0x476d6e[_0x1d3ad9(0x146)]['id'],_0x3c7ef7=await units[_0x1d3ad9(0x197)](_0x598d5b);_0x476d6e[_0x1d3ad9(0x10e)](_0x1d3ad9(0x1b2),_0x1d3ad9(0x18f)),_0x3f736a['redirect'](_0x1d3ad9(0x142));}catch(_0x42997c){console[_0x1d3ad9(0x120)](_0x42997c);}});const storage=multer[a0_0xc07f94(0x1a9)]({'destination':(_0xb1867b,_0x206cd3,_0x100a43)=>{_0x100a43(null,'public/upload');},'filename':(_0x5f2dcc,_0x3f8276,_0x477bf8)=>{const _0x4b2110=a0_0xc07f94;_0x477bf8(null,Date[_0x4b2110(0x107)]()+_0x3f8276[_0x4b2110(0x12f)]);}}),upload=multer({'storage':storage});router[a0_0xc07f94(0x1a0)]('/view',auth,async(_0x58fb9a,_0x5eb982)=>{const _0x1650d9=a0_0xc07f94;try{const {username:_0x1e0021,email:_0x4b970a,role:_0x6f65aa}=_0x58fb9a[_0x1650d9(0x188)],_0x1bb197=_0x58fb9a[_0x1650d9(0x188)],_0x1c3d34=await profile[_0x1650d9(0x19d)]({'email':_0x1bb197['email']}),_0x291ee3={'year':'numeric','month':_0x1650d9(0x191),'day':_0x1650d9(0x1b0)},_0x37d20c=await master_shop['find']();console['log']('Products\x20master',_0x37d20c);const _0x324451=await product[_0x1650d9(0x1bd)]();console[_0x1650d9(0x120)](_0x1650d9(0x198),_0x324451);const _0x307d34=await warehouse[_0x1650d9(0x134)]([{'$unwind':_0x1650d9(0x11a)},{'$lookup':{'from':'products','localField':_0x1650d9(0x140),'foreignField':_0x1650d9(0x13b),'as':_0x1650d9(0xff)}},{'$unwind':_0x1650d9(0x1b7)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x1650d9(0x110)}},{'$group':{'_id':_0x1650d9(0x115),'product_stock':{'$sum':_0x1650d9(0x12b)}}}]);console[_0x1650d9(0x120)](_0x1650d9(0x14c),_0x307d34),_0x307d34[_0x1650d9(0x141)](_0x307d5d=>{const _0x1c6b1b=_0x324451['map'](_0x4e4609=>{const _0x26ce89=a0_0x4051;_0x4e4609[_0x26ce89(0x13b)]==_0x307d5d[_0x26ce89(0x1aa)]&&(_0x4e4609[_0x26ce89(0x185)]=parseInt(_0x4e4609[_0x26ce89(0x185)])+parseInt(_0x307d5d[_0x26ce89(0x199)]));});}),console[_0x1650d9(0x120)](_0x1650d9(0x198),_0x324451);if(_0x37d20c[0x0]['language']==_0x1650d9(0x179))var _0x1beb05=users[_0x1650d9(0x170)];else{if(_0x37d20c[0x0][_0x1650d9(0x1ba)]==_0x1650d9(0x15a))var _0x1beb05=users[_0x1650d9(0x15a)];else{if(_0x37d20c[0x0][_0x1650d9(0x1ba)]=='German')var _0x1beb05=users[_0x1650d9(0x12d)];else{if(_0x37d20c[0x0]['language']==_0x1650d9(0x1c3))var _0x1beb05=users[_0x1650d9(0x1c3)];else{if(_0x37d20c[0x0]['language']==_0x1650d9(0x132))var _0x1beb05=users[_0x1650d9(0x132)];else{if(_0x37d20c[0x0][_0x1650d9(0x1ba)]==_0x1650d9(0x1bb))var _0x1beb05=users['Portuguese'];else{if(_0x37d20c[0x0][_0x1650d9(0x1ba)]==_0x1650d9(0x15b))var _0x1beb05=users[_0x1650d9(0x15b)];else{if(_0x37d20c[0x0][_0x1650d9(0x1ba)]==_0x1650d9(0x171))var _0x1beb05=users['Arabic'];}}}}}}}_0x5eb982['render'](_0x1650d9(0x169),{'success':_0x58fb9a[_0x1650d9(0x10e)](_0x1650d9(0x1b2)),'errors':_0x58fb9a['flash']('errors'),'alldata':_0x324451,'profile':_0x1c3d34,'master_shop':_0x37d20c,'role':_0x1bb197,'product_stock':_0x307d34,'language':_0x1beb05});}catch(_0x1da6e7){console[_0x1650d9(0x120)](_0x1da6e7);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x177),auth,async(_0x44f2ab,_0x178575)=>{const _0x46ffc7=a0_0xc07f94;try{const {username:_0x35e91a,email:_0x361aa3,role:_0x1ddb0d}=_0x44f2ab[_0x46ffc7(0x188)],_0x9278a9=_0x44f2ab[_0x46ffc7(0x188)],_0x12ce38=await profile['findOne']({'email':_0x9278a9['email']}),_0x59d2c6=await master_shop[_0x46ffc7(0x1bd)]();console[_0x46ffc7(0x120)](_0x46ffc7(0x18c),_0x59d2c6);const _0x25a2e6=await categories[_0x46ffc7(0x1bd)]({}),_0x9fa09d=await brands[_0x46ffc7(0x1bd)]({}),_0x2e9131=await units[_0x46ffc7(0x1bd)]({}),_0x4bc2a5=await warehouse[_0x46ffc7(0x1bd)]({'status':_0x46ffc7(0x160)});if(_0x59d2c6[0x0]['language']==_0x46ffc7(0x179))var _0x1acb2b=users[_0x46ffc7(0x170)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]==_0x46ffc7(0x15a))var _0x1acb2b=users[_0x46ffc7(0x15a)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]==_0x46ffc7(0x12d))var _0x1acb2b=users[_0x46ffc7(0x12d)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]=='Spanish')var _0x1acb2b=users[_0x46ffc7(0x1c3)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]==_0x46ffc7(0x132))var _0x1acb2b=users[_0x46ffc7(0x132)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]=='Portuguese\x20(BR)')var _0x1acb2b=users[_0x46ffc7(0x108)];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]==_0x46ffc7(0x15b))var _0x1acb2b=users['Chinese'];else{if(_0x59d2c6[0x0][_0x46ffc7(0x1ba)]==_0x46ffc7(0x171))var _0x1acb2b=users['Arabic'];}}}}}}}_0x178575[_0x46ffc7(0x183)](_0x46ffc7(0xfe),{'success':_0x44f2ab[_0x46ffc7(0x10e)](_0x46ffc7(0x1b2)),'errors':_0x44f2ab[_0x46ffc7(0x10e)]('errors'),'role':_0x9278a9,'profile':_0x12ce38,'categories':_0x25a2e6,'brands':_0x9fa09d,'master_shop':_0x59d2c6,'units':_0x2e9131,'language':_0x1acb2b,'find_data':_0x4bc2a5});}catch(_0x419fd1){console['log'](_0x419fd1);}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x177),auth,upload[a0_0xc07f94(0x152)](a0_0xc07f94(0x16d)),async(_0x1e5448,_0xdfab33)=>{const _0x1011e0=a0_0xc07f94;try{const {name:_0x58bfe3,category:_0x3ce654,brand:_0x37624b,unit:_0x25021e,alertquantity:_0x2db73f,stock:_0x590bab,product_code:_0x4f98f7,warehouse:_0x12d5a3,primary_ItemCode:_0x5909f6,second_ItemCode:_0x1e1428,second_unit:_0x3fbbe2,maxPerUnit:_0x539131,MaxPerProduct:_0x1fd9ae}=_0x1e5448[_0x1011e0(0x193)],_0x24d132=_0x1e5448[_0x1011e0(0x117)]?.['filename']||_0x1011e0(0x1af),_0x11379c=new product({'image':_0x24d132,'name':_0x58bfe3,'category':_0x3ce654,'brand':_0x37624b,'unit':_0x25021e,'alertquantity':_0x2db73f,'stock':_0x590bab,'product_code':_0x4f98f7,'warehouse':_0x12d5a3,'primary_code':_0x5909f6,'secondary_code':_0x1e1428,'second_unit':_0x3fbbe2,'maxStocks':_0x1fd9ae,'maxProdPerUnit':_0x539131}),_0xfea169=await _0x11379c[_0x1011e0(0x143)](),_0x5a3163=await categories['findOne']({'name':_0x3ce654});_0x5a3163[_0x1011e0(0x169)]=parseInt(_0x5a3163[_0x1011e0(0x169)])+0x1,await _0x5a3163[_0x1011e0(0x143)]();const _0x43b238=await brands['findOne']({'name':_0x37624b});_0x43b238[_0x1011e0(0x169)]=parseInt(_0x43b238[_0x1011e0(0x169)])+0x1,await _0x43b238[_0x1011e0(0x143)]();const _0x85d27f=await units[_0x1011e0(0x19d)]({'name':_0x25021e});_0x85d27f['products']=parseInt(_0x85d27f[_0x1011e0(0x169)])+0x1,await _0x85d27f[_0x1011e0(0x143)](),_0x1e5448[_0x1011e0(0x10e)](_0x1011e0(0x1b2),_0x1011e0(0x11d)),_0xdfab33['redirect'](_0x1011e0(0x116));}catch(_0x2c0f2c){console[_0x1011e0(0x120)](_0x2c0f2c);}}),router[a0_0xc07f94(0x1a0)](a0_0xc07f94(0x162),auth,async(_0x494a8a,_0x4a1e17)=>{const _0x1c7c3f=a0_0xc07f94;try{const {username:_0x542f97,email:_0x14f9d1,role:_0x22c670}=_0x494a8a[_0x1c7c3f(0x188)],_0x2e3def=_0x494a8a[_0x1c7c3f(0x188)],_0x43298c=await profile[_0x1c7c3f(0x19d)]({'email':_0x2e3def[_0x1c7c3f(0x19f)]}),_0x2818fe=await master_shop[_0x1c7c3f(0x1bd)]();console[_0x1c7c3f(0x120)](_0x1c7c3f(0x151),_0x2818fe);const _0x15945b=_0x494a8a[_0x1c7c3f(0x146)]['id'],_0x3d1a10=await product['findById'](_0x15945b),_0x1d73c7=await categories[_0x1c7c3f(0x1bd)]({}),_0x483f4b=await brands['find']({}),_0x1a7a0d=await units[_0x1c7c3f(0x1bd)]({}),_0x2ef936=await warehouse['find']({'status':_0x1c7c3f(0x160)}),_0x1d65da=await units[_0x1c7c3f(0x134)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x1c7c3f(0x163)}}}]);if(_0x2818fe[0x0]['language']=='English\x20(US)')var _0x1aa3d4=users['English'];else{if(_0x2818fe[0x0]['language']==_0x1c7c3f(0x15a))var _0x1aa3d4=users[_0x1c7c3f(0x15a)];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]=='German')var _0x1aa3d4=users[_0x1c7c3f(0x12d)];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]==_0x1c7c3f(0x1c3))var _0x1aa3d4=users[_0x1c7c3f(0x1c3)];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]=='French')var _0x1aa3d4=users['French'];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]==_0x1c7c3f(0x1bb))var _0x1aa3d4=users[_0x1c7c3f(0x108)];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]==_0x1c7c3f(0x15b))var _0x1aa3d4=users[_0x1c7c3f(0x15b)];else{if(_0x2818fe[0x0][_0x1c7c3f(0x1ba)]==_0x1c7c3f(0x171))var _0x1aa3d4=users[_0x1c7c3f(0x19a)];}}}}}}}_0x4a1e17[_0x1c7c3f(0x183)](_0x1c7c3f(0x181),{'success':_0x494a8a[_0x1c7c3f(0x10e)](_0x1c7c3f(0x1b2)),'errors':_0x494a8a[_0x1c7c3f(0x10e)](_0x1c7c3f(0x15f)),'role':_0x2e3def,'profile':_0x43298c,'alldata':_0x3d1a10,'categories':_0x1d73c7,'brands':_0x483f4b,'master_shop':_0x2818fe,'units':_0x1a7a0d,'secondunit':_0x1d65da,'find_data':_0x2ef936,'language':_0x1aa3d4});}catch(_0x25ec58){console[_0x1c7c3f(0x120)](_0x25ec58);}}),router['post'](a0_0xc07f94(0x162),auth,upload[a0_0xc07f94(0x152)](a0_0xc07f94(0x16d)),async(_0x154e2e,_0x2f327b)=>{const _0x4a0f2e=a0_0xc07f94;try{console[_0x4a0f2e(0x120)](_0x4a0f2e(0x180));const _0x374d54=_0x154e2e['params']['id'],_0x33d848=await product['findById'](_0x374d54),{image:_0x3e832d,name:_0x3b6002,category:_0x1f6b74,brand:_0x4fd314,sku:_0x4a542e,unit:_0xf8a627,alertquantity:_0x58ba7f,product_code:_0x2df754,warehouse:_0xe9ee3a,primary_ItemCode:_0x10ab09,second_ItemCode:_0x1fc62e,second_unit:_0x546225,maxPerUnit:_0x86bd56,MaxPerProduct:_0x4a72e1,prod_catdata:_0x57b7d6}=_0x154e2e[_0x4a0f2e(0x193)];_0x154e2e[_0x4a0f2e(0x117)]&&(_0x33d848[_0x4a0f2e(0x16d)]=_0x154e2e[_0x4a0f2e(0x117)][_0x4a0f2e(0x13c)]);_0x33d848[_0x4a0f2e(0x13b)]=_0x3b6002,_0x33d848['category']=_0x1f6b74,_0x33d848[_0x4a0f2e(0xfc)]=_0x4fd314,_0x33d848['sku']=_0x4a542e,_0x33d848[_0x4a0f2e(0x102)]=_0xf8a627,_0x33d848[_0x4a0f2e(0x148)]=_0x58ba7f,_0x33d848[_0x4a0f2e(0x119)]=_0x2df754,_0x33d848[_0x4a0f2e(0x149)]=_0xe9ee3a,_0x33d848[_0x4a0f2e(0x127)]=_0x10ab09,_0x33d848['secondary_code']=_0x1fc62e,_0x33d848[_0x4a0f2e(0x10d)]=_0x546225,_0x33d848[_0x4a0f2e(0x174)]=_0x4a72e1,_0x33d848['maxProdPerUnit']=_0x86bd56,_0x33d848[_0x4a0f2e(0x128)]=_0x57b7d6;const _0x32b69e=await _0x33d848[_0x4a0f2e(0x143)]();console[_0x4a0f2e(0x120)](_0x4a0f2e(0x190),_0x33d848),_0x154e2e[_0x4a0f2e(0x10e)](_0x4a0f2e(0x1b2),_0x4a0f2e(0x184)),_0x2f327b['redirect']('/products/view');}catch(_0x5d80f4){console[_0x4a0f2e(0x120)](_0x5d80f4);}}),router['get'](a0_0xc07f94(0x14b),auth,async(_0x6af31b,_0x1515f5)=>{const _0x3fa77d=a0_0xc07f94;try{const {username:_0x20a503,email:_0x26c573,role:_0x118c7b}=_0x6af31b['user'],_0x2a6fe6=_0x6af31b[_0x3fa77d(0x188)],_0x1fac72=await profile[_0x3fa77d(0x19d)]({'email':_0x2a6fe6[_0x3fa77d(0x19f)]}),_0x403652=await master_shop[_0x3fa77d(0x1bd)]();console[_0x3fa77d(0x120)](_0x3fa77d(0x1a7),_0x403652);const _0x2a727a=_0x6af31b[_0x3fa77d(0x146)]['id'],_0x35f4b8=await product[_0x3fa77d(0x194)](_0x2a727a);console['log'](_0x3fa77d(0x18b),_0x35f4b8);if(_0x403652[0x0][_0x3fa77d(0x1ba)]==_0x3fa77d(0x179))var _0x13e4b0=users[_0x3fa77d(0x170)];else{if(_0x403652[0x0][_0x3fa77d(0x1ba)]=='Hindi')var _0x13e4b0=users[_0x3fa77d(0x15a)];else{if(_0x403652[0x0][_0x3fa77d(0x1ba)]==_0x3fa77d(0x12d))var _0x13e4b0=users[_0x3fa77d(0x12d)];else{if(_0x403652[0x0]['language']==_0x3fa77d(0x1c3))var _0x13e4b0=users[_0x3fa77d(0x1c3)];else{if(_0x403652[0x0][_0x3fa77d(0x1ba)]==_0x3fa77d(0x132))var _0x13e4b0=users['French'];else{if(_0x403652[0x0][_0x3fa77d(0x1ba)]==_0x3fa77d(0x1bb))var _0x13e4b0=users['Portuguese'];else{if(_0x403652[0x0]['language']==_0x3fa77d(0x15b))var _0x13e4b0=users[_0x3fa77d(0x15b)];else{if(_0x403652[0x0][_0x3fa77d(0x1ba)]=='Arabic\x20(ae)')var _0x13e4b0=users[_0x3fa77d(0x19a)];}}}}}}}_0x1515f5[_0x3fa77d(0x183)]('product_barcode',{'success':_0x6af31b[_0x3fa77d(0x10e)](_0x3fa77d(0x1b2)),'errors':_0x6af31b[_0x3fa77d(0x10e)](_0x3fa77d(0x15f)),'role':_0x2a6fe6,'profile':_0x1fac72,'alldata':_0x35f4b8,'master_shop':_0x403652,'language':_0x13e4b0});}catch(_0x3beae7){console[_0x3fa77d(0x120)](_0x3beae7);}}),router['get'](a0_0xc07f94(0x1ab),auth,async(_0x5ada3a,_0x40eaf9)=>{const _0x300eed=a0_0xc07f94;try{const _0x5de467=new excelJS[(_0x300eed(0x103))](),_0x450693=_0x5de467[_0x300eed(0x195)](_0x300eed(0x11e));return _0x450693[_0x300eed(0x113)]=[{'header':_0x300eed(0x17a),'key':'PName','width':0xa},{'header':_0x300eed(0x1bf),'key':_0x300eed(0x186),'width':0xa},{'header':_0x300eed(0x157),'key':_0x300eed(0x173),'width':0xa},{'header':_0x300eed(0x136),'key':_0x300eed(0x166),'width':0xa},{'header':_0x300eed(0x189),'key':_0x300eed(0x1be),'width':0xa},{'header':_0x300eed(0x13f),'key':_0x300eed(0x19b),'width':0xa},{'header':_0x300eed(0x10b),'key':_0x300eed(0x19b),'width':0xa},{'header':_0x300eed(0x100),'key':_0x300eed(0x19b),'width':0xa},{'header':'Category','key':_0x300eed(0x19c),'width':0xa},{'header':'Alert_QTY','key':_0x300eed(0x12a),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x300eed(0x1b1),'key':_0x300eed(0x124),'width':0xa}],_0x40eaf9[_0x300eed(0x126)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x40eaf9[_0x300eed(0x126)](_0x300eed(0x167),_0x300eed(0x18d)),_0x5de467['xlsx'][_0x300eed(0x17f)](_0x40eaf9)[_0x300eed(0x101)](()=>{const _0x89f538=_0x300eed;_0x40eaf9[_0x89f538(0x13e)](0xc8);});}catch(_0x474215){_0x40eaf9['status'](0x190)[_0x300eed(0x130)](_0x474215);}});const storage1=multer[a0_0xc07f94(0x1a9)]({'destination':(_0x59a1aa,_0x21c9cf,_0x191d5b)=>{_0x191d5b(null,'public/Migration');},'filename':(_0x538485,_0x31333a,_0x42778e)=>{const _0x295bae=a0_0xc07f94;_0x42778e(null,Date[_0x295bae(0x107)]()+_0x31333a[_0x295bae(0x12f)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x2476(){const _0x22f177=['flash','/print_barcode_filter/','$product_details.product_stock','3690MptsiB','/categories','columns','Category','$product_name','/products/view','file','\x20Edit\x20Successfully','product_code','$product_details','unit\x20data\x20update\x20successfully','utils','product\x20add\x20successfully','Products','brand\x20data\x20delete\x20successfully','log','929450SPYnPP','json','$brand','Prod_Cat','prod_categ','setHeader','primary_code','product_category','$_id','PAlQty','$product_stock','/products_import_migrate_file','German','express/lib/response','originalname','send','categories','French','data','aggregate','push','Secondary_Units','base64','/brands/:id','Sheets','SheetNames','name','filename','/products/brands','status','Primary_Code','product_details.product_name','forEach','/products/units','save','message','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','params','../models/all_models','alertquantity','warehouse','/categories/delete/:id','/barcode/:id','Products\x20warehouse_data','/units','Raw\x20Materials','\x20added\x20successfully','/brands','edit\x20Product\x20master','single','/print_barcode_filter_search/','\x20<>\x20','830ZjRcIP','length','Units','maxProdPerUnit','toString','Hindi','Chinese','findByIdAndUpdate','secondary_code','200gTLqnk','errors','Enabled','migrate_product_fule','/view/:id','$secondary_unit','concat','/brands/delete/:id','PSecondaryUnits','Content-Disposition','$category','products','categories_edit','categ','public/Migration/','image','brand\x20data\x20update\x20successfully','height','English','Arabic\x20(ae)','/categories/:id','PUnits','maxStocks','width','/units/delete/:id','/view/add_products','product_barcode_products','English\x20(US)','Product_Name','../public/language/languages.json','bind','\x20categories\x20is\x20add\x20successfully','75614lyydjv','write','hello','edit_product','../middleware/auth','render','product\x20update\x20successfully','stock','PBrands','end','user','max_number_per_units','min','barcode\x20user_id','master','attachment;\x20filename=Product_Migration_File.xlsx','/units/:id','unit\x20data\x20delete\x20successfully','product\x20edit','long','brands','body','findById','addWorksheet','redirect','findByIdAndDelete','Products\x20find_data','product_stock','Arabic','ProductCode','PCat','findOne','$product_category','email','get','3923901UZdTWW','Router','1754NDxxbb','Alert_QTY','readFile','addPage','barcode\x20Product\x20master','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','diskStorage','_id','/products_export_migrate_file','pdfkit-table','24ufuJOx','exceljs','defaultProduct.avif','numeric','Products_category','success','/select_data','toBuffer','jsbarcode','7692shyuQb','$product_docs','sheet_to_json','/products/categories','language','Portuguese\x20(BR)','/print_barcode_single/:id','find','MaxperUnits','Brands','5268804AmTIcY','xlsx','31530Ikktkx','Spanish','brand','/filter_product','add_product','product_docs','Product_Code','then','unit','Workbook','multer','240849hMIWAc','exports','now','Portuguese','post','Finished\x20Goods','Secondary_Code','units','secondary_unit'];a0_0x2476=function(){return _0x22f177;};return a0_0x2476();}function a0_0x4051(_0x3d3e61,_0x3c4ef3){const _0x2476ff=a0_0x2476();return a0_0x4051=function(_0x4051e0,_0x79b09f){_0x4051e0=_0x4051e0-0xfc;let _0x2e56c4=_0x2476ff[_0x4051e0];return _0x2e56c4;},a0_0x4051(_0x3d3e61,_0x3c4ef3);}router[a0_0xc07f94(0x109)](a0_0xc07f94(0x12c),auth,uploadMigrate['single'](a0_0xc07f94(0x161)),async(_0x1124b1,_0x60c83a)=>{const _0x446999=a0_0xc07f94,_0x5d99ab=_0x1124b1[_0x446999(0x117)][_0x446999(0x13c)],_0x4f04d9=await xlsx[_0x446999(0x1a5)](_0x446999(0x16c)+_0x5d99ab);let _0x1e5f3d=_0x4f04d9[_0x446999(0x13a)],_0x290403=xlsx[_0x446999(0x11c)][_0x446999(0x1b8)](_0x4f04d9[_0x446999(0x139)][_0x1e5f3d[0x0]]);for(const _0x245000 of _0x290403){const _0x554b31=_0x245000['Product_Name'],_0x5243cb=_0x245000[_0x446999(0x1bf)],_0x2b4c89=_0x245000['Units'],_0x2e352a=_0x245000[_0x446999(0x136)],_0x2b70cf=_0x245000[_0x446999(0x100)],_0x5eaba9=_0x245000[_0x446999(0x114)],_0xad0f7c=_0x245000[_0x446999(0x1a4)],_0x2547e6=_0x245000[_0x446999(0x13f)],_0x2b99fa=_0x245000[_0x446999(0x10b)],_0x3cbf11=_0x245000['Maximum_Stocks'],_0x8d14f8=_0x245000[_0x446999(0x189)],_0x21bd41=_0x245000[_0x446999(0x1b1)];try{let _0x5d5c94=await categories[_0x446999(0x19d)]({'name':_0x5eaba9});if(!_0x5d5c94){const _0x4b9176=new categories({'name':_0x5eaba9,'products':'0'});_0x5d5c94=await _0x4b9176[_0x446999(0x143)]();}let _0x2dd09f=await brands[_0x446999(0x19d)]({'name':_0x5243cb});if(!_0x2dd09f){const _0xbf7af3=new brands({'name':_0x5243cb,'products':'0'});_0x2dd09f=await _0xbf7af3[_0x446999(0x143)]();}let _0x1355e7=await units[_0x446999(0x19d)]({'name':_0x2b4c89,'secondary_unit':_0x2e352a});if(!_0x1355e7){const _0x2a3440=new units({'name':_0x2b4c89,'secondary_unit':_0x2e352a,'products':'0'});_0x1355e7=await _0x2a3440[_0x446999(0x143)]();}const _0x11add0=await product[_0x446999(0x1bd)]({'name':_0x554b31,'category':_0x5d5c94[_0x446999(0x13b)],'brand':_0x2dd09f[_0x446999(0x13b)],'secondary_unit':_0x1355e7['secondary_unit'],'product_code':_0x2b70cf});console[_0x446999(0x120)](_0x11add0[_0x446999(0x156)]+_0x446999(0x154)+_0x5d5c94[_0x446999(0x13b)]+'\x20<>\x20'+_0x2dd09f[_0x446999(0x13b)]+_0x446999(0x154)+_0x1355e7[_0x446999(0x10d)]+_0x446999(0x154)+_0x2b70cf+_0x446999(0x154)+_0x554b31);if(_0x11add0[_0x446999(0x156)]===0x0){const _0x29180d=new product({'image':_0x446999(0x1af),'name':_0x554b31,'category':_0x5d5c94[_0x446999(0x13b)],'brand':_0x2dd09f[_0x446999(0x13b)],'unit':_0x1355e7[_0x446999(0x13b)],'alertquantity':_0xad0f7c,'product_code':_0x2b70cf,'secondary_unit':_0x1355e7[_0x446999(0x10d)],'primary_code':_0x2547e6,'secondary_code':_0x2b99fa,'maxStocks':_0x3cbf11,'maxProdPerUnit':_0x8d14f8,'product_category':_0x21bd41}),_0x329b32=await _0x29180d[_0x446999(0x143)]();_0x5d5c94[_0x446999(0x169)]=parseInt(_0x5d5c94[_0x446999(0x169)])+0x1,await _0x5d5c94['save'](),_0x2dd09f[_0x446999(0x169)]=parseInt(_0x2dd09f[_0x446999(0x169)])+0x1,await _0x2dd09f[_0x446999(0x143)](),_0x1355e7[_0x446999(0x169)]=parseInt(_0x1355e7[_0x446999(0x169)])+0x1,await _0x1355e7[_0x446999(0x143)](),_0x1124b1[_0x446999(0x10e)](_0x446999(0x1b2),_0x554b31+_0x446999(0x14f));}else{console[_0x446999(0x120)](_0x11add0[0x0]);const _0xd4ceb2=_0x11add0[0x0];_0xd4ceb2['category']=_0x5d5c94[_0x446999(0x13b)],_0xd4ceb2[_0x446999(0xfc)]=_0x2dd09f[_0x446999(0x13b)],_0xd4ceb2[_0x446999(0x102)]=_0x1355e7[_0x446999(0x13b)],_0xd4ceb2[_0x446999(0x148)]=_0xad0f7c,_0xd4ceb2[_0x446999(0x119)]=_0x2b70cf,_0xd4ceb2[_0x446999(0x10d)]=_0x1355e7['secondary_unit'],_0xd4ceb2[_0x446999(0x127)]=_0x2547e6,_0xd4ceb2[_0x446999(0x15d)]=_0x2b99fa,_0xd4ceb2[_0x446999(0x174)]=_0x3cbf11,_0xd4ceb2[_0x446999(0x158)]=_0x8d14f8,_0xd4ceb2[_0x446999(0x128)]=_0x21bd41;const _0x4707ae=await _0xd4ceb2[_0x446999(0x143)]();_0x1124b1[_0x446999(0x10e)]('success',_0x4707ae[_0x446999(0x13b)]+_0x446999(0x118));}}catch(_0x160b58){_0x60c83a[_0x446999(0x13e)](0x1f4)['json']({'proderror':_0x160b58[_0x446999(0x144)],'aproduct':_0x554b31});}}_0x60c83a[_0x446999(0x196)](_0x446999(0x116));}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x1b3),auth,async(_0x2cb63d,_0x55f884)=>{const _0x2ebe34=a0_0xc07f94;try{console[_0x2ebe34(0x120)](_0x2cb63d['body']);const {data_cateory:_0x4fadf1,datachoose:_0x1e28a4}=_0x2cb63d['body'];var _0x3efc86;if(_0x1e28a4==_0x2ebe34(0x125))_0x3efc86=await product[_0x2ebe34(0x134)]([{'$group':{'_id':_0x2ebe34(0x19e)}}]);else{if(_0x1e28a4==_0x2ebe34(0x192))_0x3efc86=await product['aggregate']([{'$match':{'product_category':_0x4fadf1}},{'$group':{'_id':'$brand'}}]);else _0x1e28a4=='categ'&&(_0x3efc86=await product['aggregate']([{'$match':{'product_category':_0x4fadf1}},{'$group':{'_id':_0x2ebe34(0x168)}}]));}_0x55f884[_0x2ebe34(0x122)](_0x3efc86);}catch(_0xd5d74f){_0x55f884['json']({'message':_0xd5d74f[_0x2ebe34(0x144)]});}}),router['post'](a0_0xc07f94(0xfd),auth,async(_0x3ceae3,_0x7fbf46)=>{const _0xe13442=a0_0xc07f94;try{const {data_choosing:_0x6fb238,data_selected:_0x50085f}=_0x3ceae3[_0xe13442(0x193)];var _0x227551;if(_0x6fb238==_0xe13442(0x125))_0x227551=await product[_0xe13442(0x134)]([{'$match':{'product_category':_0x50085f}}]);else{if(_0x6fb238==_0xe13442(0x192))_0x227551=await product[_0xe13442(0x134)]([{'$match':{'brand':_0x50085f}}]);else _0x6fb238==_0xe13442(0x16b)&&(_0x227551=await product[_0xe13442(0x134)]([{'$match':{'category':_0x50085f}}]));}_0x7fbf46['json'](_0x227551);}catch(_0x2db613){_0x7fbf46[_0xe13442(0x122)]({'message':_0x2db613['message']});}}),router[a0_0xc07f94(0x1a0)]('/print_barcode',auth,async(_0x196519,_0x30a3dd)=>{const _0x5548b7=a0_0xc07f94,_0x2843d3=_0x196519[_0x5548b7(0x188)],_0x10288d=await profile['findOne']({'email':_0x2843d3[_0x5548b7(0x19f)]}),_0x3c52c9=await master_shop[_0x5548b7(0x1bd)](),_0x47f544=await product['find']();if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x179))var _0x4af2a4=users[_0x5548b7(0x170)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x15a))var _0x4af2a4=users[_0x5548b7(0x15a)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x12d))var _0x4af2a4=users['German'];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x1c3))var _0x4af2a4=users[_0x5548b7(0x1c3)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x132))var _0x4af2a4=users[_0x5548b7(0x132)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x1bb))var _0x4af2a4=users[_0x5548b7(0x108)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]==_0x5548b7(0x15b))var _0x4af2a4=users[_0x5548b7(0x15b)];else{if(_0x3c52c9[0x0][_0x5548b7(0x1ba)]=='Arabic\x20(ae)')var _0x4af2a4=users[_0x5548b7(0x19a)];}}}}}}}_0x30a3dd['render'](_0x5548b7(0x178),{'success':_0x196519['flash'](_0x5548b7(0x1b2)),'errors':_0x196519['flash'](_0x5548b7(0x15f)),'role':_0x2843d3,'profile':_0x10288d,'products':_0x47f544,'master_shop':_0x3c52c9,'language':_0x4af2a4});}),router['post']('/barcode_data',auth,async(_0x32f0a4,_0x557123)=>{const _0x49c902=a0_0xc07f94,_0xc13e46=await product[_0x49c902(0x1bd)]();_0x557123['json']({'data':_0xc13e46});}),router[a0_0xc07f94(0x109)]('/barcode_filter',auth,async(_0x4a2940,_0x560c93)=>{const _0x203e9b=a0_0xc07f94;try{const {dataProdCat:_0x4c0674,dataProdIdentity:_0x3487e6}=_0x4a2940[_0x203e9b(0x193)];var _0x4b625d;switch(_0x4c0674){case'fg':switch(_0x3487e6){case _0x203e9b(0x1bf):_0x4b625d=await product[_0x203e9b(0x134)]([{'$match':{'product_category':_0x203e9b(0x10a)}},{'$group':{'_id':_0x203e9b(0x123)}},{'$project':{'brand':_0x203e9b(0x129)}}]);break;case'Category':_0x4b625d=await product[_0x203e9b(0x134)]([{'$match':{'product_category':_0x203e9b(0x10a)}},{'$group':{'_id':_0x203e9b(0x168)}},{'$project':{'category':_0x203e9b(0x129)}}]);break;}break;case'rm':switch(_0x3487e6){case _0x203e9b(0x1bf):_0x4b625d=await product[_0x203e9b(0x134)]([{'$match':{'product_category':_0x203e9b(0x14e)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x203e9b(0x129)}}]);break;case _0x203e9b(0x114):_0x4b625d=await product['aggregate']([{'$match':{'product_category':_0x203e9b(0x14e)}},{'$group':{'_id':_0x203e9b(0x168)}},{'$project':{'category':_0x203e9b(0x129)}}]);break;}break;}_0x560c93[_0x203e9b(0x122)](_0x4b625d);}catch(_0x1bcb51){_0x560c93[_0x203e9b(0x122)]({'message':_0x1bcb51['message']});}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x10f),auth,async(_0x53c8c5,_0x4254e3)=>{const _0x4e0630=a0_0xc07f94;try{console['log'](_0x53c8c5[_0x4e0630(0x193)]);const {prod_cat:_0x5cca5f,identity:_0x1b804c,valueData:_0xb01e71,typeofbarcode:_0x300554}=_0x53c8c5[_0x4e0630(0x193)];let _0x53e67f;switch(_0x5cca5f){case'fg':if(_0x1b804c==_0x4e0630(0x1bf))_0x53e67f=await product['aggregate']([{'$match':{'product_category':_0x4e0630(0x10a),'brand':_0xb01e71}}]);else _0x1b804c=='Category'&&(_0x53e67f=await product['aggregate']([{'$match':{'product_category':_0x4e0630(0x10a),'category':_0xb01e71}}]));break;case'rm':if(_0x1b804c==_0x4e0630(0x1bf))_0x53e67f=await product[_0x4e0630(0x134)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0xb01e71}}]);else _0x1b804c==_0x4e0630(0x114)&&(_0x53e67f=await product[_0x4e0630(0x134)]([{'$match':{'product_category':_0x4e0630(0x14e),'category':_0xb01e71}}]));break;}const _0x1d35ee=_0x9c93c9=>_0x9c93c9*0x48,_0x3595d6={'width':0x3,'height':0x1},_0x37d9ac=new PDFDocument({'margin':_0x1d35ee(0.75),'size':[_0x1d35ee(_0x3595d6['width']),_0x1d35ee(_0x3595d6[_0x4e0630(0x16f)])],'bufferPages':!![]}),_0x50ef92=_0x53e67f[_0x4e0630(0x156)];for(let _0x3cae5=0x0;_0x3cae5<=_0x50ef92;_0x3cae5++){if(_0x3cae5!=_0x50ef92){const _0x3b9545=_0x53e67f[_0x3cae5][_0x4e0630(0x13b)],_0x5cc85e=_0x53e67f[_0x3cae5][_0x4e0630(0x127)],_0x5f085a=_0x53e67f[_0x3cae5][_0x4e0630(0x15d)],_0x1c90d1=_0x53e67f[_0x3cae5]['product_code'];var _0x57b426;switch(_0x300554){case'1':_0x57b426=_0x5cc85e;break;case'2':_0x57b426=_0x5f085a;break;case'3':_0x57b426=_0x1c90d1;break;}const _0x551ee5={'width':0xd2,'height':0x64},_0x5a1e73={'width':_0x1d35ee(_0x3595d6[_0x4e0630(0x175)]),'height':_0x1d35ee(_0x3595d6[_0x4e0630(0x16f)])},_0x2481ce=new Canvas();JsBarcode(_0x2481ce,_0x57b426,{'format':'CODE128','height':_0x551ee5[_0x4e0630(0x16f)],'displayValue':!![],'text':_0x57b426});const _0xa972dd=_0x2481ce[_0x4e0630(0x1b4)](),_0x4756e6=_0x5a1e73[_0x4e0630(0x175)]/_0x551ee5[_0x4e0630(0x175)],_0xa6a93c=_0x5a1e73[_0x4e0630(0x16f)]/_0x551ee5[_0x4e0630(0x16f)],_0x2df0dd=Math['min'](_0x4756e6,_0xa6a93c),_0x1a86c3=_0x551ee5[_0x4e0630(0x175)]*_0x2df0dd,_0x409747=_0x551ee5[_0x4e0630(0x16f)]*_0x2df0dd,_0x540a04=(_0x5a1e73[_0x4e0630(0x175)]-_0x1a86c3)/0x2,_0x57513a=(_0x5a1e73[_0x4e0630(0x16f)]-_0x409747)/0x2;_0x37d9ac['image'](_0xa972dd,_0x540a04,_0x57513a,{'width':_0x1a86c3,'height':_0x409747}),_0x3cae5!=_0x50ef92&&_0x37d9ac[_0x4e0630(0x1a6)]();}}const _0x4cfbe4=[];_0x37d9ac['on'](_0x4e0630(0x133),_0x4cfbe4['push'][_0x4e0630(0x17c)](_0x4cfbe4)),_0x37d9ac['on'](_0x4e0630(0x187),()=>{const _0x8fee1c=_0x4e0630,_0x4caae7=Buffer[_0x8fee1c(0x164)](_0x4cfbe4),_0x13ee40=_0x4caae7['toString']('base64');_0x4254e3[_0x8fee1c(0x122)]({'pdfContent':_0x13ee40});}),_0x37d9ac[_0x4e0630(0x187)]();}catch(_0x1b90b0){_0x4254e3[_0x4e0630(0x122)]({'message':_0x1b90b0[_0x4e0630(0x144)]});}}),router[a0_0xc07f94(0x109)](a0_0xc07f94(0x153),auth,async(_0x17bf81,_0x4ee921)=>{const _0x4a2612=a0_0xc07f94;try{console[_0x4a2612(0x120)](_0x17bf81[_0x4a2612(0x193)]);const {prod_cat:_0x284981,identity:_0x4141fd,valueData:_0x17550f}=_0x17bf81['body'];let _0x248459;switch(_0x284981){case'fg':if(_0x4141fd=='Brands')_0x248459=await product[_0x4a2612(0x134)]([{'$match':{'product_category':_0x4a2612(0x10a),'brand':_0x17550f}}]);else _0x4141fd==_0x4a2612(0x114)&&(_0x248459=await product[_0x4a2612(0x134)]([{'$match':{'product_category':_0x4a2612(0x10a),'category':_0x17550f}}]));break;case'rm':if(_0x4141fd==_0x4a2612(0x1bf))_0x248459=await product[_0x4a2612(0x134)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x17550f}}]);else _0x4141fd==_0x4a2612(0x114)&&(_0x248459=await product[_0x4a2612(0x134)]([{'$match':{'product_category':_0x4a2612(0x14e),'category':_0x17550f}}]));break;}_0x4ee921[_0x4a2612(0x122)]({'data':_0x248459});}catch(_0x4fb812){_0x4ee921[_0x4a2612(0x122)]({'message':_0x4fb812['message']});}}),router['post'](a0_0xc07f94(0x1bc),auth,async(_0x2eb1e0,_0xe9e742)=>{const _0xdf3a7b=a0_0xc07f94;try{const _0x9fbeec=_0x2eb1e0[_0xdf3a7b(0x146)]['id'],{copies:_0x443505,typeofbarcode:_0x303d00}=_0x2eb1e0[_0xdf3a7b(0x193)];var _0x1aefaf=await product[_0xdf3a7b(0x194)](_0x9fbeec);const _0x1634e0=_0x24cb3a=>_0x24cb3a*0x48,_0xc8f8e5={'width':0x3,'height':0x1},_0x4d91eb=new PDFDocument({'margin':_0x1634e0(0.75),'size':[_0x1634e0(_0xc8f8e5[_0xdf3a7b(0x175)]),_0x1634e0(_0xc8f8e5[_0xdf3a7b(0x16f)])],'bufferPages':!![]}),_0x4f1a96=_0x443505,_0xee1459=_0x1aefaf['name'],_0x47f012=_0x1aefaf['primary_code'],_0x5b2a43=_0x1aefaf[_0xdf3a7b(0x15d)],_0x4ac610=_0x1aefaf[_0xdf3a7b(0x119)];let _0x4769f7;switch(_0x303d00){case'1':_0x4769f7=_0x47f012;break;case'2':_0x4769f7=_0x5b2a43;break;case'3':_0x4769f7=_0x4ac610;break;}const _0x4f3d59={'width':0xd2,'height':0x64},_0x3d08a3={'width':_0x1634e0(_0xc8f8e5[_0xdf3a7b(0x175)]),'height':_0x1634e0(_0xc8f8e5[_0xdf3a7b(0x16f)])};for(let _0x488ff1=0x1;_0x488ff1<=_0x4f1a96;_0x488ff1++){const _0x16ce2f=new Canvas();JsBarcode(_0x16ce2f,_0x4769f7,{'format':'CODE128','height':_0x4f3d59[_0xdf3a7b(0x16f)],'displayValue':!![],'text':_0x4769f7});const _0x57dd03=_0x16ce2f[_0xdf3a7b(0x1b4)](),_0x136211=_0x3d08a3[_0xdf3a7b(0x175)]/_0x4f3d59[_0xdf3a7b(0x175)],_0x40103e=_0x3d08a3[_0xdf3a7b(0x16f)]/_0x4f3d59[_0xdf3a7b(0x16f)],_0x1c4c19=Math[_0xdf3a7b(0x18a)](_0x136211,_0x40103e),_0x42af81=_0x4f3d59['width']*_0x1c4c19,_0x41ee56=_0x4f3d59[_0xdf3a7b(0x16f)]*_0x1c4c19,_0x11f31b=(_0x3d08a3[_0xdf3a7b(0x175)]-_0x42af81)/0x2,_0x998d19=(_0x3d08a3[_0xdf3a7b(0x16f)]-_0x41ee56)/0x2;_0x4d91eb['image'](_0x57dd03,_0x11f31b,_0x998d19,{'width':_0x42af81,'height':_0x41ee56}),_0x488ff1!=_0x4f1a96&&_0x4d91eb[_0xdf3a7b(0x1a6)]();}const _0x117fdc=[];_0x4d91eb['on'](_0xdf3a7b(0x133),_0x117fdc[_0xdf3a7b(0x135)][_0xdf3a7b(0x17c)](_0x117fdc)),_0x4d91eb['on']('end',()=>{const _0x345502=_0xdf3a7b,_0x1e89fb=Buffer[_0x345502(0x164)](_0x117fdc),_0x58905d=_0x1e89fb[_0x345502(0x159)](_0x345502(0x137));_0xe9e742[_0x345502(0x122)]({'pdfContent':_0x58905d});}),_0x4d91eb[_0xdf3a7b(0x187)]();}catch(_0x4f499){_0xe9e742['json']({'message':_0x4f499['message']});}}),module[a0_0xc07f94(0x106)]=router;