const a0_0x511672=a0_0x307f;(function(_0x199c76,_0x3a8856){const _0x25e15b=a0_0x307f,_0x52616d=_0x199c76();while(!![]){try{const _0x27a054=-parseInt(_0x25e15b(0x1dc))/0x1*(parseInt(_0x25e15b(0x172))/0x2)+parseInt(_0x25e15b(0x17c))/0x3*(-parseInt(_0x25e15b(0x1d0))/0x4)+-parseInt(_0x25e15b(0x1bb))/0x5+-parseInt(_0x25e15b(0x192))/0x6*(parseInt(_0x25e15b(0x187))/0x7)+-parseInt(_0x25e15b(0x1a8))/0x8+parseInt(_0x25e15b(0x19f))/0x9*(-parseInt(_0x25e15b(0x152))/0xa)+-parseInt(_0x25e15b(0x1df))/0xb*(-parseInt(_0x25e15b(0x13c))/0xc);if(_0x27a054===_0x3a8856)break;else _0x52616d['push'](_0x52616d['shift']());}catch(_0x1d8375){_0x52616d['push'](_0x52616d['shift']());}}}(a0_0xb1fb,0x80f55));function a0_0x307f(_0x574ea0,_0x2f2784){const _0xb1fba8=a0_0xb1fb();return a0_0x307f=function(_0x307f76,_0x1c0429){_0x307f76=_0x307f76-0x123;let _0x2b808f=_0xb1fba8[_0x307f76];return _0x2b808f;},a0_0x307f(_0x574ea0,_0x2f2784);}const express=require(a0_0x511672(0x165)),res=require(a0_0x511672(0x181)),app=express(),router=express[a0_0x511672(0x14a)](),multer=require(a0_0x511672(0x148)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x511672(0x1b3)),excelJS=require(a0_0x511672(0x17d)),xlsx=require(a0_0x511672(0x15d)),JsBarcode=require(a0_0x511672(0x164)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x511672(0x140));router[a0_0x511672(0x16a)](a0_0x511672(0x154),auth,async(_0x35dba0,_0x7723c4)=>{const _0x16a084=a0_0x511672;try{const {username:_0x1335bc,email:_0x361891,role:_0x58039d}=_0x35dba0[_0x16a084(0x16f)],_0x42df64=_0x35dba0[_0x16a084(0x16f)],_0x16961a=await profile['findOne']({'email':_0x42df64[_0x16a084(0x135)]}),_0x49683d=await master_shop[_0x16a084(0x131)]();console[_0x16a084(0x130)](_0x16a084(0x1c5),_0x49683d);const _0x34360d=await categories['find']();if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x188))var _0x4067e6=users[_0x16a084(0x1c7)];else{if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x1ab))var _0x4067e6=users['Hindi'];else{if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x1a9))var _0x4067e6=users[_0x16a084(0x1a9)];else{if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x163))var _0x4067e6=users['Spanish'];else{if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x1c1))var _0x4067e6=users[_0x16a084(0x1c1)];else{if(_0x49683d[0x0][_0x16a084(0x12b)]=='Portuguese\x20(BR)')var _0x4067e6=users[_0x16a084(0x167)];else{if(_0x49683d[0x0][_0x16a084(0x12b)]==_0x16a084(0x1db))var _0x4067e6=users[_0x16a084(0x1db)];else{if(_0x49683d[0x0]['language']==_0x16a084(0x12a))var _0x4067e6=users[_0x16a084(0x136)];}}}}}}}_0x7723c4[_0x16a084(0x1bd)]('categories',{'success':_0x35dba0[_0x16a084(0x139)](_0x16a084(0x15f)),'errors':_0x35dba0['flash']('errors'),'role':_0x42df64,'profile':_0x16961a,'user':_0x34360d,'master_shop':_0x49683d,'language':_0x4067e6});}catch(_0x5856a2){console[_0x16a084(0x130)](_0x5856a2);}}),router[a0_0x511672(0x125)](a0_0x511672(0x154),auth,async(_0x9b0334,_0x2cad2f)=>{const _0x1188e4=a0_0x511672;try{const {name:_0x2a9928,products:_0x33cbf4}=_0x9b0334['body'],_0x18a8b6=new categories({'name':_0x2a9928,'products':_0x33cbf4}),_0x46c040=await categories[_0x1188e4(0x1e5)]({'name':_0x2a9928});_0x46c040?_0x9b0334[_0x1188e4(0x139)]('errors',_0x2a9928+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x9b0334['flash'](_0x1188e4(0x15f),_0x2a9928+_0x1188e4(0x1e0));const _0x1660df=await _0x18a8b6[_0x1188e4(0x124)]();_0x2cad2f[_0x1188e4(0x1a6)](_0x1188e4(0x1a7));}catch(_0x44eda0){console[_0x1188e4(0x130)](_0x44eda0);}}),router[a0_0x511672(0x16a)]('/categories/:id',auth,async(_0x1281c6,_0x2428e1)=>{const _0x2d0bdd=a0_0x511672;try{const {username:_0x59c62c,email:_0xd203b3,role:_0x4f325e}=_0x1281c6[_0x2d0bdd(0x16f)],_0x8e7c8e=_0x1281c6[_0x2d0bdd(0x16f)],_0x51baef=await profile[_0x2d0bdd(0x1e5)]({'email':_0x8e7c8e['email']}),_0x46e224=await master_shop[_0x2d0bdd(0x131)]();console[_0x2d0bdd(0x130)](_0x2d0bdd(0x1c5),_0x46e224);const _0x8ebe7a=_0x1281c6[_0x2d0bdd(0x19d)]['id'];console['log'](_0x8ebe7a);const _0x246719=await categories[_0x2d0bdd(0x14f)](_0x8ebe7a);if(_0x46e224[0x0][_0x2d0bdd(0x12b)]=='English\x20(US)')var _0x8fd01e=users[_0x2d0bdd(0x1c7)];else{if(_0x46e224[0x0]['language']==_0x2d0bdd(0x1ab))var _0x8fd01e=users[_0x2d0bdd(0x1ab)];else{if(_0x46e224[0x0][_0x2d0bdd(0x12b)]==_0x2d0bdd(0x1a9))var _0x8fd01e=users[_0x2d0bdd(0x1a9)];else{if(_0x46e224[0x0][_0x2d0bdd(0x12b)]==_0x2d0bdd(0x163))var _0x8fd01e=users[_0x2d0bdd(0x163)];else{if(_0x46e224[0x0]['language']==_0x2d0bdd(0x1c1))var _0x8fd01e=users[_0x2d0bdd(0x1c1)];else{if(_0x46e224[0x0][_0x2d0bdd(0x12b)]=='Portuguese\x20(BR)')var _0x8fd01e=users[_0x2d0bdd(0x167)];else{if(_0x46e224[0x0][_0x2d0bdd(0x12b)]=='Chinese')var _0x8fd01e=users[_0x2d0bdd(0x1db)];else{if(_0x46e224[0x0][_0x2d0bdd(0x12b)]=='Arabic\x20(ae)')var _0x8fd01e=users[_0x2d0bdd(0x136)];}}}}}}}_0x2428e1[_0x2d0bdd(0x1bd)](_0x2d0bdd(0x1d7),{'success':_0x1281c6[_0x2d0bdd(0x139)]('success'),'errors':_0x1281c6[_0x2d0bdd(0x139)]('errors'),'role':_0x8e7c8e,'profile':_0x51baef,'master_shop':_0x46e224,'user':_0x246719,'language':_0x8fd01e});}catch(_0xb97d06){console['log'](_0xb97d06);}}),router['post'](a0_0x511672(0x155),auth,async(_0x523f04,_0x250079)=>{const _0x13e522=a0_0x511672;try{const _0x3860de=_0x523f04[_0x13e522(0x19d)]['id'],_0x3de2b5=await categories['findByIdAndUpdate'](_0x3860de,_0x523f04[_0x13e522(0x18e)]);_0x523f04[_0x13e522(0x139)](_0x13e522(0x15f),''+users[_0x13e522(0x128)]),_0x250079['redirect']('/products/categories');}catch(_0x5d4ef8){console[_0x13e522(0x130)](_0x5d4ef8);}}),router['get'](a0_0x511672(0x18c),auth,async(_0x42fad6,_0x127a01)=>{const _0x154529=a0_0x511672;try{const _0x12f5cf=_0x42fad6['params']['id'],_0xccc52d=await categories['findByIdAndDelete'](_0x12f5cf);_0x42fad6[_0x154529(0x139)]('success',_0x154529(0x142)),_0x127a01[_0x154529(0x1a6)]('/products/categories');}catch(_0x5dad37){console[_0x154529(0x130)](_0x5dad37);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x184),auth,async(_0x227731,_0xffe02e)=>{const _0x35aa69=a0_0x511672;try{const {username:_0x479e09,email:_0x3c50c0,role:_0x343d3d}=_0x227731[_0x35aa69(0x16f)],_0x211d70=_0x227731[_0x35aa69(0x16f)],_0x42781a=await profile[_0x35aa69(0x1e5)]({'email':_0x211d70[_0x35aa69(0x135)]}),_0x59768d=await master_shop[_0x35aa69(0x131)]();console['log']('master',_0x59768d);const _0xa9907b=await brands[_0x35aa69(0x131)]();if(_0x59768d[0x0][_0x35aa69(0x12b)]==_0x35aa69(0x188))var _0x59aa86=users[_0x35aa69(0x1c7)];else{if(_0x59768d[0x0]['language']=='Hindi')var _0x59aa86=users['Hindi'];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]==_0x35aa69(0x1a9))var _0x59aa86=users[_0x35aa69(0x1a9)];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]==_0x35aa69(0x163))var _0x59aa86=users[_0x35aa69(0x163)];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]=='French')var _0x59aa86=users['French'];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]==_0x35aa69(0x153))var _0x59aa86=users['Portuguese'];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]==_0x35aa69(0x1db))var _0x59aa86=users['Chinese'];else{if(_0x59768d[0x0][_0x35aa69(0x12b)]=='Arabic\x20(ae)')var _0x59aa86=users[_0x35aa69(0x136)];}}}}}}}_0xffe02e[_0x35aa69(0x1bd)](_0x35aa69(0x199),{'success':_0x227731[_0x35aa69(0x139)](_0x35aa69(0x15f)),'errors':_0x227731[_0x35aa69(0x139)](_0x35aa69(0x1be)),'role':_0x211d70,'profile':_0x42781a,'master_shop':_0x59768d,'user':_0xa9907b,'language':_0x59aa86});}catch(_0x59455a){console['log'](_0x59455a);}}),router[a0_0x511672(0x125)]('/brands',auth,async(_0x23efed,_0x4be0e8)=>{const _0x326b0d=a0_0x511672;try{const {name:_0x5a634e,products:_0x3e2a85}=_0x23efed[_0x326b0d(0x18e)],_0x3d76a1=new brands({'name':_0x5a634e,'products':_0x3e2a85}),_0x3a0c18=await brands[_0x326b0d(0x1e5)]({'name':_0x5a634e});_0x3a0c18?_0x23efed['flash']('errors',_0x5a634e+_0x326b0d(0x19b)):_0x23efed[_0x326b0d(0x139)]('success',_0x5a634e+_0x326b0d(0x175));const _0x132d06=await _0x3d76a1[_0x326b0d(0x124)]();_0x4be0e8[_0x326b0d(0x1a6)](_0x326b0d(0x1e3));}catch(_0x141398){console[_0x326b0d(0x130)](_0x141398);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x197),auth,async(_0x45acf4,_0x384128)=>{const _0xb229d7=a0_0x511672;try{const {username:_0xcdc866,email:_0x25b78e,role:_0x3ce515}=_0x45acf4[_0xb229d7(0x16f)],_0x2f74cb=_0x45acf4[_0xb229d7(0x16f)],_0x4b400=await profile[_0xb229d7(0x1e5)]({'email':_0x2f74cb[_0xb229d7(0x135)]}),_0x12c0c0=await master_shop[_0xb229d7(0x131)]();console[_0xb229d7(0x130)]('master',_0x12c0c0);const _0x5dd521=_0x45acf4[_0xb229d7(0x19d)]['id'];console[_0xb229d7(0x130)](_0x5dd521);const _0x5405bc=await brands[_0xb229d7(0x14f)](_0x5dd521);if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x188))var _0x23159=users[_0xb229d7(0x1c7)];else{if(_0x12c0c0[0x0]['language']==_0xb229d7(0x1ab))var _0x23159=users['Hindi'];else{if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x1a9))var _0x23159=users[_0xb229d7(0x1a9)];else{if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x163))var _0x23159=users[_0xb229d7(0x163)];else{if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x1c1))var _0x23159=users[_0xb229d7(0x1c1)];else{if(_0x12c0c0[0x0]['language']==_0xb229d7(0x153))var _0x23159=users[_0xb229d7(0x167)];else{if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x1db))var _0x23159=users[_0xb229d7(0x1db)];else{if(_0x12c0c0[0x0][_0xb229d7(0x12b)]==_0xb229d7(0x12a))var _0x23159=users['Arabic'];}}}}}}}_0x384128['render'](_0xb229d7(0x199),{'success':_0x45acf4['flash'](_0xb229d7(0x15f)),'errors':_0x45acf4[_0xb229d7(0x139)]('errors'),'role':_0x2f74cb,'profile':_0x4b400,'master_shop':_0x12c0c0,'user':_0x5405bc,'language':_0x23159});}catch(_0x556e4d){console[_0xb229d7(0x130)](_0x556e4d);}}),router['post'](a0_0x511672(0x197),auth,async(_0x3fd70a,_0x47d310)=>{const _0x5c08c3=a0_0x511672;try{const _0x10f1f2=_0x3fd70a[_0x5c08c3(0x19d)]['id'],_0x2f6b60=await brands['findByIdAndUpdate'](_0x10f1f2,_0x3fd70a['body']);_0x3fd70a[_0x5c08c3(0x139)](_0x5c08c3(0x15f),_0x5c08c3(0x195)),_0x47d310['redirect']('/products/brands');}catch(_0x5c9fc1){console[_0x5c08c3(0x130)](_0x5c9fc1);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x19e),auth,async(_0x5f5706,_0x40dcc9)=>{const _0x2ba5a7=a0_0x511672;try{const _0x7edc50=_0x5f5706['params']['id'],_0x389f3c=await brands['findByIdAndDelete'](_0x7edc50);_0x5f5706[_0x2ba5a7(0x139)](_0x2ba5a7(0x15f),_0x2ba5a7(0x1a1)),_0x40dcc9[_0x2ba5a7(0x1a6)](_0x2ba5a7(0x1e3));}catch(_0x5ab0b3){console['log'](_0x5ab0b3);}}),router[a0_0x511672(0x16a)]('/units',auth,async(_0x355ba8,_0x5a52e1)=>{const _0x4fcdd7=a0_0x511672;try{const {username:_0x32475a,email:_0x375918,role:_0x4862bf}=_0x355ba8['user'],_0x3c803d=_0x355ba8[_0x4fcdd7(0x16f)],_0x2aa5ab=await profile[_0x4fcdd7(0x1e5)]({'email':_0x3c803d[_0x4fcdd7(0x135)]}),_0x8be698=await master_shop[_0x4fcdd7(0x131)]();console[_0x4fcdd7(0x130)]('master',_0x8be698);const _0x2cd4cd=await units['find']();if(_0x8be698[0x0][_0x4fcdd7(0x12b)]==_0x4fcdd7(0x188))var _0x1d1211=users[_0x4fcdd7(0x1c7)];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]=='Hindi')var _0x1d1211=users[_0x4fcdd7(0x1ab)];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]==_0x4fcdd7(0x1a9))var _0x1d1211=users[_0x4fcdd7(0x1a9)];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]=='Spanish')var _0x1d1211=users[_0x4fcdd7(0x163)];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]==_0x4fcdd7(0x1c1))var _0x1d1211=users['French'];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]==_0x4fcdd7(0x153))var _0x1d1211=users['Portuguese'];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]==_0x4fcdd7(0x1db))var _0x1d1211=users['Chinese'];else{if(_0x8be698[0x0][_0x4fcdd7(0x12b)]=='Arabic\x20(ae)')var _0x1d1211=users[_0x4fcdd7(0x136)];}}}}}}}_0x5a52e1[_0x4fcdd7(0x1bd)](_0x4fcdd7(0x149),{'success':_0x355ba8[_0x4fcdd7(0x139)](_0x4fcdd7(0x15f)),'errors':_0x355ba8[_0x4fcdd7(0x139)]('errors'),'role':_0x3c803d,'profile':_0x2aa5ab,'master_shop':_0x8be698,'user':_0x2cd4cd,'language':_0x1d1211});}catch(_0xc5f0c0){console[_0x4fcdd7(0x130)](_0xc5f0c0);}}),router[a0_0x511672(0x125)](a0_0x511672(0x1d8),auth,async(_0x379867,_0x25c4a3)=>{const _0x4afb31=a0_0x511672;try{const {name:_0x21eb6a,secondary_unit:_0x592776,products:_0x3a0777}=_0x379867['body'],_0x5c4090=new units({'name':_0x21eb6a,'secondary_unit':_0x592776,'products':_0x3a0777}),_0x4231e4=await units[_0x4afb31(0x1e5)]({'name':_0x21eb6a});_0x4231e4?_0x379867[_0x4afb31(0x139)](_0x4afb31(0x1be),_0x21eb6a+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x379867[_0x4afb31(0x139)](_0x4afb31(0x15f),_0x21eb6a+'\x20unit\x20is\x20add\x20successfully');const _0x5356ff=await _0x5c4090['save']();_0x25c4a3[_0x4afb31(0x1a6)](_0x4afb31(0x151));}catch(_0x2c6ee7){console['log'](_0x2c6ee7);}}),router[a0_0x511672(0x16a)]('/units/:id',auth,async(_0x2c5044,_0x47a13b)=>{const _0x3f7efc=a0_0x511672;try{const {username:_0x530087,email:_0x208962,role:_0x14f45b}=_0x2c5044[_0x3f7efc(0x16f)],_0x1be90c=_0x2c5044['user'],_0x304f6c=await profile[_0x3f7efc(0x1e5)]({'email':_0x1be90c[_0x3f7efc(0x135)]}),_0x22523c=await master_shop[_0x3f7efc(0x131)]();console[_0x3f7efc(0x130)](_0x3f7efc(0x1c5),_0x22523c);const _0x3b9f67=_0x2c5044[_0x3f7efc(0x19d)]['id'],_0x399175=await units[_0x3f7efc(0x14f)](_0x3b9f67);if(_0x22523c[0x0]['language']=='English\x20(US)')var _0x56b51d=users[_0x3f7efc(0x1c7)];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]==_0x3f7efc(0x1ab))var _0x56b51d=users[_0x3f7efc(0x1ab)];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]=='German')var _0x56b51d=users['German'];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]==_0x3f7efc(0x163))var _0x56b51d=users['Spanish'];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]=='French')var _0x56b51d=users[_0x3f7efc(0x1c1)];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]==_0x3f7efc(0x153))var _0x56b51d=users[_0x3f7efc(0x167)];else{if(_0x22523c[0x0][_0x3f7efc(0x12b)]==_0x3f7efc(0x1db))var _0x56b51d=users[_0x3f7efc(0x1db)];else{if(_0x22523c[0x0]['language']=='Arabic\x20(ae)')var _0x56b51d=users['Arabic'];}}}}}}}_0x47a13b[_0x3f7efc(0x1bd)](_0x3f7efc(0x149),{'success':_0x2c5044[_0x3f7efc(0x139)](_0x3f7efc(0x15f)),'errors':_0x2c5044[_0x3f7efc(0x139)](_0x3f7efc(0x1be)),'role':_0x1be90c,'profile':_0x304f6c,'master_shop':_0x22523c,'user':_0x399175,'language':_0x56b51d});}catch(_0x5b898a){console[_0x3f7efc(0x130)](_0x5b898a);}}),router[a0_0x511672(0x125)]('/units/:id',auth,async(_0x4f278d,_0x3c30a7)=>{const _0x4971c0=a0_0x511672;try{const _0x53a058=_0x4f278d[_0x4971c0(0x19d)]['id'],_0x5c5a4e=await units[_0x4971c0(0x13b)](_0x53a058,_0x4f278d['body']);_0x4f278d[_0x4971c0(0x139)](_0x4971c0(0x15f),_0x4971c0(0x16e)),_0x3c30a7[_0x4971c0(0x1a6)](_0x4971c0(0x151));}catch(_0x25257f){console[_0x4971c0(0x130)](_0x25257f);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x1a3),auth,async(_0x2d8b88,_0x3953b4)=>{const _0x5dabd3=a0_0x511672;try{const _0x27ade5=_0x2d8b88['params']['id'],_0x3946ea=await units[_0x5dabd3(0x15c)](_0x27ade5);_0x2d8b88[_0x5dabd3(0x139)]('success',_0x5dabd3(0x1d1)),_0x3953b4[_0x5dabd3(0x1a6)]('/products/units');}catch(_0x2768d9){console[_0x5dabd3(0x130)](_0x2768d9);}});const storage=multer[a0_0x511672(0x1c8)]({'destination':(_0x2689ae,_0x2b1b75,_0x31319a)=>{const _0x26857f=a0_0x511672;_0x31319a(null,_0x26857f(0x170));},'filename':(_0x1d7839,_0x52a24e,_0x23ec4a)=>{const _0x58a2e6=a0_0x511672;_0x23ec4a(null,Date[_0x58a2e6(0x15e)]()+_0x52a24e['originalname']);}}),upload=multer({'storage':storage});function a0_0xb1fb(){const _0x2555b1=['forEach','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product\x20add\x20successfully','params','/brands/delete/:id','627867xMjfBs','\x20added\x20successfully','brand\x20data\x20delete\x20successfully','Products_category','/units/delete/:id','product_stock','secondary_unit','redirect','/products/categories','1386792fuepya','German','/products_import_migrate_file','Hindi','Brands','$product_details.product_name','secondary_code','Secondary_Code','Sheets','Workbook','Products','../public/language/languages.json','product_barcode','stock','SheetNames','$product_details','length','Finished\x20Goods','$product_docs','4470690tEFYYW','sheet_to_json','render','errors','prod_categ','push','French','PName','$product_category','\x20<>\x20','master','_id','English','diskStorage','maxProdPerUnit','$product_stock','product_code','public/Migration','edit\x20Product\x20master','add_product','height','524236obUWNP','unit\x20data\x20delete\x20successfully','Units','CODE128','alertquantity','sku','addPage','categories','/units','Alert_QTY','PSecondaryUnits','Chinese','1gyynsm','Primary_Code','PUnits','11wdGCbo','\x20categories\x20is\x20add\x20successfully','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','primary_code','/products/brands','name','findOne','product_category','save','post','/view/add_products','image','categories_edit','PAlQty','Arabic\x20(ae)','language','originalname','message','end','ProductCode','log','find','numeric','aggregate','/view/:id','email','Arabic','/print_barcode','products','flash','map','findByIdAndUpdate','36800124TjjirV','json','product_details.product_name','categ','pdfkit-table','hello','categories\x20data\x20delete\x20successfully','$product_details.product_stock','single','MaxperUnits','\x20Edit\x20Successfully','Category','multer','units','Router','$brand','base64','defaultProduct.avif','addWorksheet','findById','Products\x20find_data','/products/units','140kvSANM','Portuguese\x20(BR)','/categories','/categories/:id','Product_Code','Prod_Cat','category','filename','attachment;\x20filename=Product_Migration_File.xlsx','send','findByIdAndDelete','xlsx','now','success','Maximum_Stocks','columns','Enabled','Spanish','jsbarcode','express','/barcode_filter','Portuguese','width','min','get','PBrands','Raw\x20Materials','PCat','unit\x20data\x20update\x20successfully','user','public/upload','file','80710mOLedT','data','unit','\x20brand\x20is\x20add\x20successfully','/products_export_migrate_file','product\x20edit','Secondary_Units','Content-Disposition','barcode\x20Product\x20master','maxStocks','6mYWWEP','exceljs','product\x20update\x20successfully','brand','/print_barcode_single/:id','express/lib/response','Product_Name','concat','/brands','$category','/products/view','1342754rqMFRG','English\x20(US)','setHeader','status','public/Migration/','/categories/delete/:id','product_docs','body','edit_product','$_id','product_barcode_products','6IZlxFI','bind','/print_barcode_filter_search/','brand\x20data\x20update\x20successfully','/barcode/:id','/brands/:id','toBuffer','brands'];a0_0xb1fb=function(){return _0x2555b1;};return a0_0xb1fb();}router['get']('/view',auth,async(_0x341562,_0x3c880c)=>{const _0xe417fb=a0_0x511672;try{const {username:_0x44e2a7,email:_0xac7923,role:_0x43dfe3}=_0x341562[_0xe417fb(0x16f)],_0x351f5f=_0x341562['user'],_0x3588b4=await profile[_0xe417fb(0x1e5)]({'email':_0x351f5f[_0xe417fb(0x135)]}),_0xc7ea7c={'year':_0xe417fb(0x132),'month':'long','day':_0xe417fb(0x132)},_0x1c7920=await master_shop['find']();console[_0xe417fb(0x130)]('Products\x20master',_0x1c7920);const _0x3e2b51=await product['find']();console['log'](_0xe417fb(0x150),_0x3e2b51);const _0xdf2117=await warehouse[_0xe417fb(0x133)]([{'$unwind':_0xe417fb(0x1b7)},{'$lookup':{'from':_0xe417fb(0x138),'localField':_0xe417fb(0x13e),'foreignField':_0xe417fb(0x1e4),'as':_0xe417fb(0x18d)}},{'$unwind':_0xe417fb(0x1ba)},{'$project':{'product_name':_0xe417fb(0x1ad),'product_stock':_0xe417fb(0x143)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0xe417fb(0x1ca)}}}]);console[_0xe417fb(0x130)]('Products\x20warehouse_data',_0xdf2117),_0xdf2117[_0xe417fb(0x19a)](_0x5097dd=>{const _0x4dcad0=_0xe417fb,_0x843f91=_0x3e2b51[_0x4dcad0(0x13a)](_0x4382e9=>{const _0x2688de=_0x4dcad0;_0x4382e9[_0x2688de(0x1e4)]==_0x5097dd[_0x2688de(0x1c6)]&&(_0x4382e9[_0x2688de(0x1b5)]=parseInt(_0x4382e9[_0x2688de(0x1b5)])+parseInt(_0x5097dd[_0x2688de(0x1a4)]));});}),console[_0xe417fb(0x130)](_0xe417fb(0x150),_0x3e2b51);if(_0x1c7920[0x0][_0xe417fb(0x12b)]=='English\x20(US)')var _0x188a98=users['English'];else{if(_0x1c7920[0x0]['language']==_0xe417fb(0x1ab))var _0x188a98=users['Hindi'];else{if(_0x1c7920[0x0][_0xe417fb(0x12b)]==_0xe417fb(0x1a9))var _0x188a98=users['German'];else{if(_0x1c7920[0x0][_0xe417fb(0x12b)]==_0xe417fb(0x163))var _0x188a98=users[_0xe417fb(0x163)];else{if(_0x1c7920[0x0][_0xe417fb(0x12b)]=='French')var _0x188a98=users[_0xe417fb(0x1c1)];else{if(_0x1c7920[0x0][_0xe417fb(0x12b)]=='Portuguese\x20(BR)')var _0x188a98=users['Portuguese'];else{if(_0x1c7920[0x0]['language']=='Chinese')var _0x188a98=users[_0xe417fb(0x1db)];else{if(_0x1c7920[0x0][_0xe417fb(0x12b)]==_0xe417fb(0x12a))var _0x188a98=users[_0xe417fb(0x136)];}}}}}}}_0x3c880c[_0xe417fb(0x1bd)]('products',{'success':_0x341562[_0xe417fb(0x139)]('success'),'errors':_0x341562[_0xe417fb(0x139)](_0xe417fb(0x1be)),'alldata':_0x3e2b51,'profile':_0x3588b4,'master_shop':_0x1c7920,'role':_0x351f5f,'product_stock':_0xdf2117,'language':_0x188a98});}catch(_0x43a645){console['log'](_0x43a645);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x126),auth,async(_0x23b33c,_0x2470d4)=>{const _0x51bd3e=a0_0x511672;try{const {username:_0x4dbd4f,email:_0x382268,role:_0x217f2b}=_0x23b33c[_0x51bd3e(0x16f)],_0xd265b2=_0x23b33c[_0x51bd3e(0x16f)],_0x27f5cc=await profile[_0x51bd3e(0x1e5)]({'email':_0xd265b2[_0x51bd3e(0x135)]}),_0xfa4ece=await master_shop['find']();console[_0x51bd3e(0x130)](_0x51bd3e(0x1c5),_0xfa4ece);const _0x23fb40=await categories[_0x51bd3e(0x131)]({}),_0x373565=await brands[_0x51bd3e(0x131)]({}),_0x201a6e=await units[_0x51bd3e(0x131)]({}),_0x8b930a=await warehouse['find']({'status':_0x51bd3e(0x162)});if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]=='English\x20(US)')var _0x6aee7a=users[_0x51bd3e(0x1c7)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x1ab))var _0x6aee7a=users[_0x51bd3e(0x1ab)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]=='German')var _0x6aee7a=users[_0x51bd3e(0x1a9)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x163))var _0x6aee7a=users[_0x51bd3e(0x163)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x1c1))var _0x6aee7a=users[_0x51bd3e(0x1c1)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x153))var _0x6aee7a=users[_0x51bd3e(0x167)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x1db))var _0x6aee7a=users[_0x51bd3e(0x1db)];else{if(_0xfa4ece[0x0][_0x51bd3e(0x12b)]==_0x51bd3e(0x12a))var _0x6aee7a=users[_0x51bd3e(0x136)];}}}}}}}_0x2470d4[_0x51bd3e(0x1bd)](_0x51bd3e(0x1ce),{'success':_0x23b33c['flash'](_0x51bd3e(0x15f)),'errors':_0x23b33c[_0x51bd3e(0x139)](_0x51bd3e(0x1be)),'role':_0xd265b2,'profile':_0x27f5cc,'categories':_0x23fb40,'brands':_0x373565,'master_shop':_0xfa4ece,'units':_0x201a6e,'language':_0x6aee7a,'find_data':_0x8b930a});}catch(_0x428a6c){console[_0x51bd3e(0x130)](_0x428a6c);}}),router[a0_0x511672(0x125)]('/view/add_products',auth,upload['single'](a0_0x511672(0x127)),async(_0x1289fc,_0x593e01)=>{const _0x27737a=a0_0x511672;try{const {name:_0x34876b,category:_0x21ce7e,brand:_0x22e217,unit:_0x37e3ab,alertquantity:_0x57fe5e,stock:_0x246a40,product_code:_0x3fc77f,warehouse:_0x2c1f84,primary_ItemCode:_0x132476,second_ItemCode:_0x4fb9db,second_unit:_0x5685be,maxPerUnit:_0x484fb1,MaxPerProduct:_0x3bdccf}=_0x1289fc[_0x27737a(0x18e)],_0x25a12e=_0x1289fc[_0x27737a(0x171)]?.[_0x27737a(0x159)]||_0x27737a(0x14d),_0x5d812d=new product({'image':_0x25a12e,'name':_0x34876b,'category':_0x21ce7e,'brand':_0x22e217,'unit':_0x37e3ab,'alertquantity':_0x57fe5e,'stock':_0x246a40,'product_code':_0x3fc77f,'warehouse':_0x2c1f84,'primary_code':_0x132476,'secondary_code':_0x4fb9db,'second_unit':_0x5685be,'maxStocks':_0x3bdccf,'maxProdPerUnit':_0x484fb1}),_0x4029b9=await _0x5d812d[_0x27737a(0x124)](),_0x446d29=await categories[_0x27737a(0x1e5)]({'name':_0x21ce7e});_0x446d29[_0x27737a(0x138)]=parseInt(_0x446d29[_0x27737a(0x138)])+0x1,await _0x446d29['save']();const _0x38cd8d=await brands[_0x27737a(0x1e5)]({'name':_0x22e217});_0x38cd8d[_0x27737a(0x138)]=parseInt(_0x38cd8d[_0x27737a(0x138)])+0x1,await _0x38cd8d[_0x27737a(0x124)]();const _0x3a448c=await units[_0x27737a(0x1e5)]({'name':_0x37e3ab});_0x3a448c['products']=parseInt(_0x3a448c[_0x27737a(0x138)])+0x1,await _0x3a448c[_0x27737a(0x124)](),_0x1289fc[_0x27737a(0x139)](_0x27737a(0x15f),_0x27737a(0x19c)),_0x593e01[_0x27737a(0x1a6)](_0x27737a(0x186));}catch(_0x17496c){console[_0x27737a(0x130)](_0x17496c);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x134),auth,async(_0x43bcd0,_0x48c34a)=>{const _0x291699=a0_0x511672;try{const {username:_0x18f74f,email:_0x57b776,role:_0x3ce692}=_0x43bcd0[_0x291699(0x16f)],_0x2fb7e1=_0x43bcd0[_0x291699(0x16f)],_0x6d780b=await profile['findOne']({'email':_0x2fb7e1['email']}),_0xe54cdd=await master_shop[_0x291699(0x131)]();console[_0x291699(0x130)](_0x291699(0x1cd),_0xe54cdd);const _0x2fbb09=_0x43bcd0[_0x291699(0x19d)]['id'],_0x1a2fff=await product[_0x291699(0x14f)](_0x2fbb09),_0x1a7b36=await categories[_0x291699(0x131)]({}),_0x66fa15=await brands[_0x291699(0x131)]({}),_0x462fbb=await units[_0x291699(0x131)]({}),_0x2c8699=await warehouse[_0x291699(0x131)]({'status':_0x291699(0x162)}),_0x345541=await units['aggregate']([{'$group':{'_id':_0x291699(0x190),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x188))var _0x2dca62=users['English'];else{if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x1ab))var _0x2dca62=users[_0x291699(0x1ab)];else{if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x1a9))var _0x2dca62=users[_0x291699(0x1a9)];else{if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x163))var _0x2dca62=users[_0x291699(0x163)];else{if(_0xe54cdd[0x0]['language']==_0x291699(0x1c1))var _0x2dca62=users[_0x291699(0x1c1)];else{if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x153))var _0x2dca62=users[_0x291699(0x167)];else{if(_0xe54cdd[0x0]['language']=='Chinese')var _0x2dca62=users['Chinese'];else{if(_0xe54cdd[0x0][_0x291699(0x12b)]==_0x291699(0x12a))var _0x2dca62=users[_0x291699(0x136)];}}}}}}}_0x48c34a[_0x291699(0x1bd)](_0x291699(0x18f),{'success':_0x43bcd0[_0x291699(0x139)](_0x291699(0x15f)),'errors':_0x43bcd0[_0x291699(0x139)](_0x291699(0x1be)),'role':_0x2fb7e1,'profile':_0x6d780b,'alldata':_0x1a2fff,'categories':_0x1a7b36,'brands':_0x66fa15,'master_shop':_0xe54cdd,'units':_0x462fbb,'secondunit':_0x345541,'find_data':_0x2c8699,'language':_0x2dca62});}catch(_0x3e8631){console[_0x291699(0x130)](_0x3e8631);}}),router[a0_0x511672(0x125)]('/view/:id',auth,upload[a0_0x511672(0x144)]('image'),async(_0x6e64e6,_0x50715a)=>{const _0x2faa1d=a0_0x511672;try{console[_0x2faa1d(0x130)](_0x2faa1d(0x141));const _0x1b462a=_0x6e64e6[_0x2faa1d(0x19d)]['id'],_0x260684=await product['findById'](_0x1b462a),{image:_0x4b22e7,name:_0x501783,category:_0x2c1847,brand:_0x10f7b6,sku:_0x32b227,unit:_0x4676cb,alertquantity:_0xb9ef3a,product_code:_0x4b7534,warehouse:_0x5690f1,primary_ItemCode:_0x4171dd,second_ItemCode:_0x1dcc05,second_unit:_0x135335,maxPerUnit:_0x363a48,MaxPerProduct:_0x5bac08,prod_catdata:_0xbf8bcf}=_0x6e64e6[_0x2faa1d(0x18e)];_0x6e64e6[_0x2faa1d(0x171)]&&(_0x260684[_0x2faa1d(0x127)]=_0x6e64e6[_0x2faa1d(0x171)][_0x2faa1d(0x159)]);_0x260684[_0x2faa1d(0x1e4)]=_0x501783,_0x260684[_0x2faa1d(0x158)]=_0x2c1847,_0x260684[_0x2faa1d(0x17f)]=_0x10f7b6,_0x260684[_0x2faa1d(0x1d5)]=_0x32b227,_0x260684[_0x2faa1d(0x174)]=_0x4676cb,_0x260684['alertquantity']=_0xb9ef3a,_0x260684[_0x2faa1d(0x1cb)]=_0x4b7534,_0x260684['warehouse']=_0x5690f1,_0x260684[_0x2faa1d(0x1e2)]=_0x4171dd,_0x260684['secondary_code']=_0x1dcc05,_0x260684[_0x2faa1d(0x1a5)]=_0x135335,_0x260684[_0x2faa1d(0x17b)]=_0x5bac08,_0x260684[_0x2faa1d(0x1c9)]=_0x363a48,_0x260684[_0x2faa1d(0x123)]=_0xbf8bcf;const _0x34698e=await _0x260684[_0x2faa1d(0x124)]();console[_0x2faa1d(0x130)](_0x2faa1d(0x177),_0x260684),_0x6e64e6[_0x2faa1d(0x139)](_0x2faa1d(0x15f),_0x2faa1d(0x17e)),_0x50715a[_0x2faa1d(0x1a6)]('/products/view');}catch(_0x1ca155){console[_0x2faa1d(0x130)](_0x1ca155);}}),router[a0_0x511672(0x16a)](a0_0x511672(0x196),auth,async(_0x98f3b3,_0x190aa6)=>{const _0x10f4c7=a0_0x511672;try{const {username:_0x3bea83,email:_0x4fa48d,role:_0x3c3479}=_0x98f3b3[_0x10f4c7(0x16f)],_0x3844ec=_0x98f3b3['user'],_0xc78643=await profile[_0x10f4c7(0x1e5)]({'email':_0x3844ec[_0x10f4c7(0x135)]}),_0x3c4ed9=await master_shop['find']();console[_0x10f4c7(0x130)](_0x10f4c7(0x17a),_0x3c4ed9);const _0x3ddbe8=_0x98f3b3['params']['id'],_0x19a75a=await product[_0x10f4c7(0x14f)](_0x3ddbe8);console['log']('barcode\x20user_id',_0x19a75a);if(_0x3c4ed9[0x0]['language']=='English\x20(US)')var _0x1dd1f0=users[_0x10f4c7(0x1c7)];else{if(_0x3c4ed9[0x0][_0x10f4c7(0x12b)]==_0x10f4c7(0x1ab))var _0x1dd1f0=users[_0x10f4c7(0x1ab)];else{if(_0x3c4ed9[0x0][_0x10f4c7(0x12b)]==_0x10f4c7(0x1a9))var _0x1dd1f0=users[_0x10f4c7(0x1a9)];else{if(_0x3c4ed9[0x0][_0x10f4c7(0x12b)]==_0x10f4c7(0x163))var _0x1dd1f0=users[_0x10f4c7(0x163)];else{if(_0x3c4ed9[0x0][_0x10f4c7(0x12b)]=='French')var _0x1dd1f0=users['French'];else{if(_0x3c4ed9[0x0]['language']=='Portuguese\x20(BR)')var _0x1dd1f0=users[_0x10f4c7(0x167)];else{if(_0x3c4ed9[0x0]['language']=='Chinese')var _0x1dd1f0=users['Chinese'];else{if(_0x3c4ed9[0x0][_0x10f4c7(0x12b)]==_0x10f4c7(0x12a))var _0x1dd1f0=users[_0x10f4c7(0x136)];}}}}}}}_0x190aa6[_0x10f4c7(0x1bd)](_0x10f4c7(0x1b4),{'success':_0x98f3b3[_0x10f4c7(0x139)](_0x10f4c7(0x15f)),'errors':_0x98f3b3[_0x10f4c7(0x139)]('errors'),'role':_0x3844ec,'profile':_0xc78643,'alldata':_0x19a75a,'master_shop':_0x3c4ed9,'language':_0x1dd1f0});}catch(_0x3ea90d){console['log'](_0x3ea90d);}}),router['get'](a0_0x511672(0x176),auth,async(_0x317bf4,_0x18f881)=>{const _0x560757=a0_0x511672;try{const _0x1d10dd=new excelJS[(_0x560757(0x1b1))](),_0x5b107e=_0x1d10dd[_0x560757(0x14e)](_0x560757(0x1b2));return _0x5b107e[_0x560757(0x161)]=[{'header':_0x560757(0x182),'key':_0x560757(0x1c2),'width':0xa},{'header':_0x560757(0x1ac),'key':_0x560757(0x16b),'width':0xa},{'header':'Units','key':_0x560757(0x1de),'width':0xa},{'header':_0x560757(0x178),'key':_0x560757(0x1da),'width':0xa},{'header':'max_number_per_units','key':_0x560757(0x145),'width':0xa},{'header':'Primary_Code','key':_0x560757(0x12f),'width':0xa},{'header':_0x560757(0x1af),'key':_0x560757(0x12f),'width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0x560757(0x147),'key':_0x560757(0x16d),'width':0xa},{'header':'Alert_QTY','key':_0x560757(0x129),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x560757(0x1a2),'key':_0x560757(0x157),'width':0xa}],_0x18f881[_0x560757(0x189)]('Content-Type',_0x560757(0x1e1)),_0x18f881[_0x560757(0x189)](_0x560757(0x179),_0x560757(0x15a)),_0x1d10dd[_0x560757(0x15d)]['write'](_0x18f881)['then'](()=>{const _0x49f143=_0x560757;_0x18f881[_0x49f143(0x18a)](0xc8);});}catch(_0x530edc){_0x18f881['status'](0x190)[_0x560757(0x15b)](_0x530edc);}});const storage1=multer[a0_0x511672(0x1c8)]({'destination':(_0x4cfaa2,_0x4443f5,_0x208142)=>{const _0x25b526=a0_0x511672;_0x208142(null,_0x25b526(0x1cc));},'filename':(_0x46bb91,_0x1478cd,_0x220bd7)=>{const _0x2a9489=a0_0x511672;_0x220bd7(null,Date[_0x2a9489(0x15e)]()+_0x1478cd[_0x2a9489(0x12c)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x511672(0x125)](a0_0x511672(0x1aa),auth,uploadMigrate[a0_0x511672(0x144)]('migrate_product_fule'),async(_0x504156,_0x1ba180)=>{const _0x5670f6=a0_0x511672,_0x277ebc=_0x504156['file']['filename'],_0x2ae463=await xlsx['readFile'](_0x5670f6(0x18b)+_0x277ebc);let _0x47ba00=_0x2ae463[_0x5670f6(0x1b6)],_0x3d3064=xlsx['utils'][_0x5670f6(0x1bc)](_0x2ae463[_0x5670f6(0x1b0)][_0x47ba00[0x0]]);for(const _0x201be6 of _0x3d3064){const _0x45f573=_0x201be6[_0x5670f6(0x182)],_0xf0697a=_0x201be6['Brands'],_0x4692ed=_0x201be6[_0x5670f6(0x1d2)],_0x13d27d=_0x201be6[_0x5670f6(0x178)],_0x49c221=_0x201be6[_0x5670f6(0x156)],_0x5714aa=_0x201be6[_0x5670f6(0x147)],_0x59ea4f=_0x201be6[_0x5670f6(0x1d9)],_0x4c87a2=_0x201be6[_0x5670f6(0x1dd)],_0x14253f=_0x201be6[_0x5670f6(0x1af)],_0x2f9999=_0x201be6[_0x5670f6(0x160)],_0x4ed63a=_0x201be6['max_number_per_units'],_0x3391cc=_0x201be6[_0x5670f6(0x1a2)];try{let _0x16880a=await categories['findOne']({'name':_0x5714aa});if(!_0x16880a){const _0x5ba82b=new categories({'name':_0x5714aa,'products':'0'});_0x16880a=await _0x5ba82b[_0x5670f6(0x124)]();}let _0x47f8a5=await brands['findOne']({'name':_0xf0697a});if(!_0x47f8a5){const _0x35affc=new brands({'name':_0xf0697a,'products':'0'});_0x47f8a5=await _0x35affc['save']();}let _0x28616b=await units[_0x5670f6(0x1e5)]({'name':_0x4692ed,'secondary_unit':_0x13d27d});if(!_0x28616b){const _0x4e6522=new units({'name':_0x4692ed,'secondary_unit':_0x13d27d,'products':'0'});_0x28616b=await _0x4e6522[_0x5670f6(0x124)]();}const _0x37888a=await product[_0x5670f6(0x131)]({'name':_0x45f573,'category':_0x16880a['name'],'brand':_0x47f8a5[_0x5670f6(0x1e4)],'secondary_unit':_0x28616b[_0x5670f6(0x1a5)],'product_code':_0x49c221});console['log'](_0x37888a['length']+'\x20<>\x20'+_0x16880a[_0x5670f6(0x1e4)]+_0x5670f6(0x1c4)+_0x47f8a5['name']+_0x5670f6(0x1c4)+_0x28616b[_0x5670f6(0x1a5)]+_0x5670f6(0x1c4)+_0x49c221+'\x20<>\x20'+_0x45f573);if(_0x37888a[_0x5670f6(0x1b8)]===0x0){const _0x21a301=new product({'image':_0x5670f6(0x14d),'name':_0x45f573,'category':_0x16880a[_0x5670f6(0x1e4)],'brand':_0x47f8a5[_0x5670f6(0x1e4)],'unit':_0x28616b[_0x5670f6(0x1e4)],'alertquantity':_0x59ea4f,'product_code':_0x49c221,'secondary_unit':_0x28616b[_0x5670f6(0x1a5)],'primary_code':_0x4c87a2,'secondary_code':_0x14253f,'maxStocks':_0x2f9999,'maxProdPerUnit':_0x4ed63a,'product_category':_0x3391cc}),_0x618a65=await _0x21a301[_0x5670f6(0x124)]();_0x16880a[_0x5670f6(0x138)]=parseInt(_0x16880a[_0x5670f6(0x138)])+0x1,await _0x16880a[_0x5670f6(0x124)](),_0x47f8a5[_0x5670f6(0x138)]=parseInt(_0x47f8a5[_0x5670f6(0x138)])+0x1,await _0x47f8a5[_0x5670f6(0x124)](),_0x28616b[_0x5670f6(0x138)]=parseInt(_0x28616b['products'])+0x1,await _0x28616b[_0x5670f6(0x124)](),_0x504156['flash'](_0x5670f6(0x15f),_0x45f573+_0x5670f6(0x1a0));}else{console[_0x5670f6(0x130)](_0x37888a[0x0]);const _0x4b86a1=_0x37888a[0x0];_0x4b86a1['category']=_0x16880a[_0x5670f6(0x1e4)],_0x4b86a1[_0x5670f6(0x17f)]=_0x47f8a5[_0x5670f6(0x1e4)],_0x4b86a1[_0x5670f6(0x174)]=_0x28616b[_0x5670f6(0x1e4)],_0x4b86a1[_0x5670f6(0x1d4)]=_0x59ea4f,_0x4b86a1['product_code']=_0x49c221,_0x4b86a1[_0x5670f6(0x1a5)]=_0x28616b['secondary_unit'],_0x4b86a1[_0x5670f6(0x1e2)]=_0x4c87a2,_0x4b86a1[_0x5670f6(0x1ae)]=_0x14253f,_0x4b86a1[_0x5670f6(0x17b)]=_0x2f9999,_0x4b86a1['maxProdPerUnit']=_0x4ed63a,_0x4b86a1[_0x5670f6(0x123)]=_0x3391cc;const _0x524a54=await _0x4b86a1[_0x5670f6(0x124)]();_0x504156['flash'](_0x5670f6(0x15f),_0x524a54[_0x5670f6(0x1e4)]+_0x5670f6(0x146));}}catch(_0x37ed08){_0x1ba180[_0x5670f6(0x18a)](0x1f4)[_0x5670f6(0x13d)]({'proderror':_0x37ed08['message'],'aproduct':_0x45f573});}}_0x1ba180['redirect'](_0x5670f6(0x186));}),router[a0_0x511672(0x125)]('/select_data',auth,async(_0x5bb732,_0x30460f)=>{const _0x1e2344=a0_0x511672;try{console[_0x1e2344(0x130)](_0x5bb732[_0x1e2344(0x18e)]);const {data_cateory:_0x5f1a54,datachoose:_0x8cc701}=_0x5bb732[_0x1e2344(0x18e)];var _0x397b25;if(_0x8cc701==_0x1e2344(0x1bf))_0x397b25=await product[_0x1e2344(0x133)]([{'$group':{'_id':_0x1e2344(0x1c3)}}]);else{if(_0x8cc701==_0x1e2344(0x199))_0x397b25=await product[_0x1e2344(0x133)]([{'$match':{'product_category':_0x5f1a54}},{'$group':{'_id':_0x1e2344(0x14b)}}]);else _0x8cc701=='categ'&&(_0x397b25=await product['aggregate']([{'$match':{'product_category':_0x5f1a54}},{'$group':{'_id':_0x1e2344(0x185)}}]));}_0x30460f['json'](_0x397b25);}catch(_0x3e2bd4){_0x30460f[_0x1e2344(0x13d)]({'message':_0x3e2bd4[_0x1e2344(0x12d)]});}}),router[a0_0x511672(0x125)]('/filter_product',auth,async(_0xedd231,_0x145cbc)=>{const _0x11b5ea=a0_0x511672;try{const {data_choosing:_0x6eeb65,data_selected:_0x3ce6e9}=_0xedd231[_0x11b5ea(0x18e)];var _0xee820;if(_0x6eeb65=='prod_categ')_0xee820=await product['aggregate']([{'$match':{'product_category':_0x3ce6e9}}]);else{if(_0x6eeb65==_0x11b5ea(0x199))_0xee820=await product[_0x11b5ea(0x133)]([{'$match':{'brand':_0x3ce6e9}}]);else _0x6eeb65==_0x11b5ea(0x13f)&&(_0xee820=await product[_0x11b5ea(0x133)]([{'$match':{'category':_0x3ce6e9}}]));}_0x145cbc[_0x11b5ea(0x13d)](_0xee820);}catch(_0x43ee5c){_0x145cbc[_0x11b5ea(0x13d)]({'message':_0x43ee5c['message']});}}),router['get'](a0_0x511672(0x137),auth,async(_0x5a8fac,_0x2d8667)=>{const _0x441b34=a0_0x511672,_0x2798d2=_0x5a8fac[_0x441b34(0x16f)],_0x5c81a3=await profile['findOne']({'email':_0x2798d2['email']}),_0x61029b=await master_shop[_0x441b34(0x131)](),_0x3d8e61=await product[_0x441b34(0x131)]();if(_0x61029b[0x0][_0x441b34(0x12b)]==_0x441b34(0x188))var _0x12d83c=users[_0x441b34(0x1c7)];else{if(_0x61029b[0x0][_0x441b34(0x12b)]=='Hindi')var _0x12d83c=users[_0x441b34(0x1ab)];else{if(_0x61029b[0x0][_0x441b34(0x12b)]==_0x441b34(0x1a9))var _0x12d83c=users[_0x441b34(0x1a9)];else{if(_0x61029b[0x0]['language']==_0x441b34(0x163))var _0x12d83c=users[_0x441b34(0x163)];else{if(_0x61029b[0x0]['language']==_0x441b34(0x1c1))var _0x12d83c=users['French'];else{if(_0x61029b[0x0]['language']==_0x441b34(0x153))var _0x12d83c=users['Portuguese'];else{if(_0x61029b[0x0][_0x441b34(0x12b)]==_0x441b34(0x1db))var _0x12d83c=users[_0x441b34(0x1db)];else{if(_0x61029b[0x0][_0x441b34(0x12b)]==_0x441b34(0x12a))var _0x12d83c=users[_0x441b34(0x136)];}}}}}}}_0x2d8667[_0x441b34(0x1bd)](_0x441b34(0x191),{'success':_0x5a8fac[_0x441b34(0x139)]('success'),'errors':_0x5a8fac[_0x441b34(0x139)](_0x441b34(0x1be)),'role':_0x2798d2,'profile':_0x5c81a3,'products':_0x3d8e61,'master_shop':_0x61029b,'language':_0x12d83c});}),router[a0_0x511672(0x125)]('/barcode_data',auth,async(_0x46786c,_0x4cffc7)=>{const _0x531aff=a0_0x511672,_0x3ab9c1=await product[_0x531aff(0x131)]();_0x4cffc7[_0x531aff(0x13d)]({'data':_0x3ab9c1});}),router[a0_0x511672(0x125)](a0_0x511672(0x166),auth,async(_0x334bdd,_0x28fb3d)=>{const _0x594144=a0_0x511672;try{const {dataProdCat:_0x5dd355,dataProdIdentity:_0x49b909}=_0x334bdd[_0x594144(0x18e)];var _0x1cac12;switch(_0x5dd355){case'fg':switch(_0x49b909){case'Brands':_0x1cac12=await product['aggregate']([{'$match':{'product_category':_0x594144(0x1b9)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x594144(0x190)}}]);break;case _0x594144(0x147):_0x1cac12=await product['aggregate']([{'$match':{'product_category':_0x594144(0x1b9)}},{'$group':{'_id':_0x594144(0x185)}},{'$project':{'category':_0x594144(0x190)}}]);break;}break;case'rm':switch(_0x49b909){case _0x594144(0x1ac):_0x1cac12=await product[_0x594144(0x133)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x594144(0x14b)}},{'$project':{'brand':_0x594144(0x190)}}]);break;case _0x594144(0x147):_0x1cac12=await product[_0x594144(0x133)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x594144(0x190)}}]);break;}break;}_0x28fb3d['json'](_0x1cac12);}catch(_0x3ff5c3){_0x28fb3d[_0x594144(0x13d)]({'message':_0x3ff5c3[_0x594144(0x12d)]});}}),router['post']('/print_barcode_filter/',auth,async(_0x2910ee,_0x2bf008)=>{const _0x3a0026=a0_0x511672;try{console[_0x3a0026(0x130)](_0x2910ee['body']);const {prod_cat:_0x22212b,identity:_0x1b3242,valueData:_0x5a69fe,typeofbarcode:_0x1e96c7}=_0x2910ee[_0x3a0026(0x18e)];let _0x5e12ac;switch(_0x22212b){case'fg':if(_0x1b3242==_0x3a0026(0x1ac))_0x5e12ac=await product[_0x3a0026(0x133)]([{'$match':{'product_category':_0x3a0026(0x1b9),'brand':_0x5a69fe}}]);else _0x1b3242=='Category'&&(_0x5e12ac=await product[_0x3a0026(0x133)]([{'$match':{'product_category':_0x3a0026(0x1b9),'category':_0x5a69fe}}]));break;case'rm':if(_0x1b3242==_0x3a0026(0x1ac))_0x5e12ac=await product[_0x3a0026(0x133)]([{'$match':{'product_category':_0x3a0026(0x16c),'brand':_0x5a69fe}}]);else _0x1b3242==_0x3a0026(0x147)&&(_0x5e12ac=await product[_0x3a0026(0x133)]([{'$match':{'product_category':_0x3a0026(0x16c),'category':_0x5a69fe}}]));break;}const _0x107502=_0x1671d4=>_0x1671d4*0x48,_0x452537={'width':0x3,'height':0x1},_0x457b0c=new PDFDocument({'margin':_0x107502(0.75),'size':[_0x107502(_0x452537[_0x3a0026(0x168)]),_0x107502(_0x452537[_0x3a0026(0x1cf)])],'bufferPages':!![]}),_0x524e67=_0x5e12ac[_0x3a0026(0x1b8)];for(let _0xaa3e59=0x0;_0xaa3e59<=_0x524e67;_0xaa3e59++){if(_0xaa3e59!=_0x524e67){const _0x156ab6=_0x5e12ac[_0xaa3e59][_0x3a0026(0x1e4)],_0x23b4a3=_0x5e12ac[_0xaa3e59]['primary_code'],_0x277a1b=_0x5e12ac[_0xaa3e59][_0x3a0026(0x1ae)],_0x2048a7=_0x5e12ac[_0xaa3e59][_0x3a0026(0x1cb)];var _0x513f63;switch(_0x1e96c7){case'1':_0x513f63=_0x23b4a3;break;case'2':_0x513f63=_0x277a1b;break;case'3':_0x513f63=_0x2048a7;break;}const _0x149a82={'width':0xd2,'height':0x64},_0x2cd672={'width':_0x107502(_0x452537[_0x3a0026(0x168)]),'height':_0x107502(_0x452537[_0x3a0026(0x1cf)])},_0x47dc42=new Canvas();JsBarcode(_0x47dc42,_0x513f63,{'format':_0x3a0026(0x1d3),'height':_0x149a82[_0x3a0026(0x1cf)],'displayValue':!![],'text':_0x513f63});const _0x460642=_0x47dc42['toBuffer'](),_0x21a0ad=_0x2cd672['width']/_0x149a82[_0x3a0026(0x168)],_0x4d1f3a=_0x2cd672[_0x3a0026(0x1cf)]/_0x149a82[_0x3a0026(0x1cf)],_0x1f8549=Math['min'](_0x21a0ad,_0x4d1f3a),_0x1b217f=_0x149a82[_0x3a0026(0x168)]*_0x1f8549,_0x554e4d=_0x149a82[_0x3a0026(0x1cf)]*_0x1f8549,_0x545d4c=(_0x2cd672[_0x3a0026(0x168)]-_0x1b217f)/0x2,_0x4c0e03=(_0x2cd672['height']-_0x554e4d)/0x2;_0x457b0c['image'](_0x460642,_0x545d4c,_0x4c0e03,{'width':_0x1b217f,'height':_0x554e4d}),_0xaa3e59!=_0x524e67&&_0x457b0c[_0x3a0026(0x1d6)]();}}const _0xd470df=[];_0x457b0c['on'](_0x3a0026(0x173),_0xd470df[_0x3a0026(0x1c0)][_0x3a0026(0x193)](_0xd470df)),_0x457b0c['on'](_0x3a0026(0x12e),()=>{const _0x57d2ce=_0x3a0026,_0x47de69=Buffer[_0x57d2ce(0x183)](_0xd470df),_0x453e1c=_0x47de69['toString']('base64');_0x2bf008[_0x57d2ce(0x13d)]({'pdfContent':_0x453e1c});}),_0x457b0c[_0x3a0026(0x12e)]();}catch(_0x197623){_0x2bf008[_0x3a0026(0x13d)]({'message':_0x197623[_0x3a0026(0x12d)]});}}),router[a0_0x511672(0x125)](a0_0x511672(0x194),auth,async(_0x34daee,_0x4274b2)=>{const _0x2996fc=a0_0x511672;try{console[_0x2996fc(0x130)](_0x34daee[_0x2996fc(0x18e)]);const {prod_cat:_0x2aa936,identity:_0x271e17,valueData:_0x2a4ab2}=_0x34daee[_0x2996fc(0x18e)];let _0x19e822;switch(_0x2aa936){case'fg':if(_0x271e17==_0x2996fc(0x1ac))_0x19e822=await product[_0x2996fc(0x133)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x2a4ab2}}]);else _0x271e17==_0x2996fc(0x147)&&(_0x19e822=await product[_0x2996fc(0x133)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x2a4ab2}}]));break;case'rm':if(_0x271e17==_0x2996fc(0x1ac))_0x19e822=await product[_0x2996fc(0x133)]([{'$match':{'product_category':_0x2996fc(0x16c),'brand':_0x2a4ab2}}]);else _0x271e17==_0x2996fc(0x147)&&(_0x19e822=await product[_0x2996fc(0x133)]([{'$match':{'product_category':_0x2996fc(0x16c),'category':_0x2a4ab2}}]));break;}_0x4274b2[_0x2996fc(0x13d)]({'data':_0x19e822});}catch(_0xc3f422){_0x4274b2[_0x2996fc(0x13d)]({'message':_0xc3f422[_0x2996fc(0x12d)]});}}),router[a0_0x511672(0x125)](a0_0x511672(0x180),auth,async(_0xfc2701,_0x553505)=>{const _0x5cef58=a0_0x511672;try{const _0x369e18=_0xfc2701[_0x5cef58(0x19d)]['id'],{copies:_0x343221,typeofbarcode:_0x582374}=_0xfc2701[_0x5cef58(0x18e)];var _0x7fd833=await product['findById'](_0x369e18);const _0x11f98f=_0x307fe6=>_0x307fe6*0x48,_0xca118f={'width':0x3,'height':0x1},_0x552bfb=new PDFDocument({'margin':_0x11f98f(0.75),'size':[_0x11f98f(_0xca118f['width']),_0x11f98f(_0xca118f[_0x5cef58(0x1cf)])],'bufferPages':!![]}),_0x4eaa18=_0x343221,_0x1f723a=_0x7fd833[_0x5cef58(0x1e4)],_0x2013cf=_0x7fd833['primary_code'],_0x192d78=_0x7fd833[_0x5cef58(0x1ae)],_0x565593=_0x7fd833[_0x5cef58(0x1cb)];let _0x40c045;switch(_0x582374){case'1':_0x40c045=_0x2013cf;break;case'2':_0x40c045=_0x192d78;break;case'3':_0x40c045=_0x565593;break;}const _0x3aca72={'width':0xd2,'height':0x64},_0x3dc43f={'width':_0x11f98f(_0xca118f[_0x5cef58(0x168)]),'height':_0x11f98f(_0xca118f[_0x5cef58(0x1cf)])};for(let _0x3999c4=0x1;_0x3999c4<=_0x4eaa18;_0x3999c4++){const _0x2faaf1=new Canvas();JsBarcode(_0x2faaf1,_0x40c045,{'format':'CODE128','height':_0x3aca72[_0x5cef58(0x1cf)],'displayValue':!![],'text':_0x40c045});const _0x59282f=_0x2faaf1[_0x5cef58(0x198)](),_0x11e073=_0x3dc43f[_0x5cef58(0x168)]/_0x3aca72[_0x5cef58(0x168)],_0x8ca1ad=_0x3dc43f[_0x5cef58(0x1cf)]/_0x3aca72[_0x5cef58(0x1cf)],_0x89abbf=Math[_0x5cef58(0x169)](_0x11e073,_0x8ca1ad),_0x1fe076=_0x3aca72[_0x5cef58(0x168)]*_0x89abbf,_0x2887be=_0x3aca72[_0x5cef58(0x1cf)]*_0x89abbf,_0x477d08=(_0x3dc43f[_0x5cef58(0x168)]-_0x1fe076)/0x2,_0x40996c=(_0x3dc43f[_0x5cef58(0x1cf)]-_0x2887be)/0x2;_0x552bfb[_0x5cef58(0x127)](_0x59282f,_0x477d08,_0x40996c,{'width':_0x1fe076,'height':_0x2887be}),_0x3999c4!=_0x4eaa18&&_0x552bfb[_0x5cef58(0x1d6)]();}const _0x361143=[];_0x552bfb['on'](_0x5cef58(0x173),_0x361143[_0x5cef58(0x1c0)][_0x5cef58(0x193)](_0x361143)),_0x552bfb['on'](_0x5cef58(0x12e),()=>{const _0x355290=_0x5cef58,_0x2d913e=Buffer[_0x355290(0x183)](_0x361143),_0x7ee8ee=_0x2d913e['toString'](_0x355290(0x14c));_0x553505[_0x355290(0x13d)]({'pdfContent':_0x7ee8ee});}),_0x552bfb[_0x5cef58(0x12e)]();}catch(_0x59f97a){_0x553505[_0x5cef58(0x13d)]({'message':_0x59f97a[_0x5cef58(0x12d)]});}}),module['exports']=router;