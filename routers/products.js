const a0_0x59344a=a0_0xc083;(function(_0x2ec832,_0x52005f){const _0x4a616b=a0_0xc083,_0x596274=_0x2ec832();while(!![]){try{const _0x530e62=-parseInt(_0x4a616b(0x199))/0x1*(parseInt(_0x4a616b(0x193))/0x2)+-parseInt(_0x4a616b(0x191))/0x3+parseInt(_0x4a616b(0x19b))/0x4*(-parseInt(_0x4a616b(0x1d8))/0x5)+-parseInt(_0x4a616b(0x1f2))/0x6+parseInt(_0x4a616b(0x1e9))/0x7*(parseInt(_0x4a616b(0x168))/0x8)+parseInt(_0x4a616b(0x1ae))/0x9+parseInt(_0x4a616b(0x1a3))/0xa*(parseInt(_0x4a616b(0x1c1))/0xb);if(_0x530e62===_0x52005f)break;else _0x596274['push'](_0x596274['shift']());}catch(_0x103b48){_0x596274['push'](_0x596274['shift']());}}}(a0_0x2614,0xbdb08));const express=require(a0_0x59344a(0x192)),res=require(a0_0x59344a(0x158)),app=express(),router=express['Router'](),multer=require(a0_0x59344a(0x208)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x59344a(0x1ba)),users=require(a0_0x59344a(0x207)),excelJS=require(a0_0x59344a(0x1a5)),xlsx=require('xlsx'),JsBarcode=require(a0_0x59344a(0x195)),{Canvas}=require(a0_0x59344a(0x20e)),PDFDocument=require(a0_0x59344a(0x17b));function a0_0xc083(_0x5605ae,_0x16d036){const _0x2614db=a0_0x2614();return a0_0xc083=function(_0xc08307,_0x1e608b){_0xc08307=_0xc08307-0x150;let _0x4433c8=_0x2614db[_0xc08307];return _0x4433c8;},a0_0xc083(_0x5605ae,_0x16d036);}router[a0_0x59344a(0x1d2)](a0_0x59344a(0x1a9),auth,async(_0x15f9cf,_0x3777d8)=>{const _0x368002=a0_0x59344a;try{const {username:_0xc8cc43,email:_0x4e6ced,role:_0xf87db3}=_0x15f9cf['user'],_0x3baa45=_0x15f9cf['user'],_0x327349=await profile['findOne']({'email':_0x3baa45[_0x368002(0x1f6)]}),_0x24bcba=await master_shop[_0x368002(0x1d7)]();console['log']('master',_0x24bcba);const _0x51b444=await categories[_0x368002(0x1d7)]();if(_0x24bcba[0x0][_0x368002(0x150)]==_0x368002(0x17a))var _0x28aa57=users['English'];else{if(_0x24bcba[0x0]['language']==_0x368002(0x183))var _0x28aa57=users['Hindi'];else{if(_0x24bcba[0x0][_0x368002(0x150)]==_0x368002(0x198))var _0x28aa57=users[_0x368002(0x198)];else{if(_0x24bcba[0x0]['language']==_0x368002(0x1ea))var _0x28aa57=users['Spanish'];else{if(_0x24bcba[0x0][_0x368002(0x150)]==_0x368002(0x1e6))var _0x28aa57=users['French'];else{if(_0x24bcba[0x0][_0x368002(0x150)]==_0x368002(0x1dc))var _0x28aa57=users[_0x368002(0x1c7)];else{if(_0x24bcba[0x0][_0x368002(0x150)]==_0x368002(0x1cf))var _0x28aa57=users[_0x368002(0x1cf)];else{if(_0x24bcba[0x0][_0x368002(0x150)]=='Arabic\x20(ae)')var _0x28aa57=users[_0x368002(0x1f7)];}}}}}}}_0x3777d8[_0x368002(0x181)]('categories',{'success':_0x15f9cf[_0x368002(0x194)](_0x368002(0x20a)),'errors':_0x15f9cf[_0x368002(0x194)](_0x368002(0x1da)),'role':_0x3baa45,'profile':_0x327349,'user':_0x51b444,'master_shop':_0x24bcba,'language':_0x28aa57});}catch(_0x31fe16){console[_0x368002(0x1ed)](_0x31fe16);}}),router[a0_0x59344a(0x210)]('/categories',auth,async(_0x3b4f5d,_0x56e7b4)=>{const _0x4979a7=a0_0x59344a;try{const {name:_0x3c4c1b,products:_0xb544c8}=_0x3b4f5d[_0x4979a7(0x157)],_0x53a20f=new categories({'name':_0x3c4c1b,'products':_0xb544c8}),_0x133def=await categories[_0x4979a7(0x1e0)]({'name':_0x3c4c1b});_0x133def?_0x3b4f5d['flash'](_0x4979a7(0x1da),_0x3c4c1b+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3b4f5d[_0x4979a7(0x194)](_0x4979a7(0x20a),_0x3c4c1b+'\x20categories\x20is\x20add\x20successfully');const _0x3399c8=await _0x53a20f['save']();_0x56e7b4[_0x4979a7(0x197)](_0x4979a7(0x1a8));}catch(_0xa506ef){console['log'](_0xa506ef);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x1bd),auth,async(_0x509cc9,_0x1c5c2b)=>{const _0x1a00cf=a0_0x59344a;try{const {username:_0x34e3fd,email:_0x7adf29,role:_0x17677d}=_0x509cc9[_0x1a00cf(0x18c)],_0xd682e2=_0x509cc9['user'],_0x2af05c=await profile[_0x1a00cf(0x1e0)]({'email':_0xd682e2['email']}),_0x32b929=await master_shop[_0x1a00cf(0x1d7)]();console[_0x1a00cf(0x1ed)](_0x1a00cf(0x180),_0x32b929);const _0x520a33=_0x509cc9[_0x1a00cf(0x1e2)]['id'];console[_0x1a00cf(0x1ed)](_0x520a33);const _0x5bd9be=await categories[_0x1a00cf(0x161)](_0x520a33);if(_0x32b929[0x0][_0x1a00cf(0x150)]==_0x1a00cf(0x17a))var _0x5ade24=users[_0x1a00cf(0x154)];else{if(_0x32b929[0x0]['language']==_0x1a00cf(0x183))var _0x5ade24=users[_0x1a00cf(0x183)];else{if(_0x32b929[0x0][_0x1a00cf(0x150)]==_0x1a00cf(0x198))var _0x5ade24=users[_0x1a00cf(0x198)];else{if(_0x32b929[0x0][_0x1a00cf(0x150)]==_0x1a00cf(0x1ea))var _0x5ade24=users[_0x1a00cf(0x1ea)];else{if(_0x32b929[0x0][_0x1a00cf(0x150)]==_0x1a00cf(0x1e6))var _0x5ade24=users[_0x1a00cf(0x1e6)];else{if(_0x32b929[0x0][_0x1a00cf(0x150)]==_0x1a00cf(0x1dc))var _0x5ade24=users[_0x1a00cf(0x1c7)];else{if(_0x32b929[0x0]['language']==_0x1a00cf(0x1cf))var _0x5ade24=users['Chinese'];else{if(_0x32b929[0x0]['language']==_0x1a00cf(0x164))var _0x5ade24=users[_0x1a00cf(0x1f7)];}}}}}}}_0x1c5c2b['render']('categories',{'success':_0x509cc9[_0x1a00cf(0x194)](_0x1a00cf(0x20a)),'errors':_0x509cc9['flash'](_0x1a00cf(0x1da)),'role':_0xd682e2,'profile':_0x2af05c,'master_shop':_0x32b929,'user':_0x5bd9be,'language':_0x5ade24});}catch(_0x3854c7){console[_0x1a00cf(0x1ed)](_0x3854c7);}}),router[a0_0x59344a(0x210)]('/categories/:id',auth,async(_0x181dd0,_0x16d5c5)=>{const _0x1c91d5=a0_0x59344a;try{const _0xdfa2db=_0x181dd0[_0x1c91d5(0x1e2)]['id'],_0x596b50=await categories[_0x1c91d5(0x15d)](_0xdfa2db,_0x181dd0['body']);_0x181dd0[_0x1c91d5(0x194)](_0x1c91d5(0x20a),''+users[_0x1c91d5(0x1ac)]),_0x16d5c5[_0x1c91d5(0x197)](_0x1c91d5(0x1a8));}catch(_0x4490e3){console[_0x1c91d5(0x1ed)](_0x4490e3);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x209),auth,async(_0x2f659b,_0x9e3d05)=>{const _0x3b4f5e=a0_0x59344a;try{const _0x21ce14=_0x2f659b[_0x3b4f5e(0x1e2)]['id'],_0x3c2cf9=await categories[_0x3b4f5e(0x169)](_0x21ce14);_0x2f659b['flash'](_0x3b4f5e(0x20a),_0x3b4f5e(0x1b9)),_0x9e3d05[_0x3b4f5e(0x197)]('/products/categories');}catch(_0x7bbd48){console[_0x3b4f5e(0x1ed)](_0x7bbd48);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x1b8),auth,async(_0x581d7e,_0x48e4d9)=>{const _0x17f03a=a0_0x59344a;try{const {username:_0x51e556,email:_0x872f38,role:_0x70d776}=_0x581d7e['user'],_0x148c10=_0x581d7e[_0x17f03a(0x18c)],_0x49f292=await profile[_0x17f03a(0x1e0)]({'email':_0x148c10['email']}),_0x57597f=await master_shop[_0x17f03a(0x1d7)]();console[_0x17f03a(0x1ed)]('master',_0x57597f);const _0xcffb8b=await brands[_0x17f03a(0x1d7)]();if(_0x57597f[0x0][_0x17f03a(0x150)]==_0x17f03a(0x17a))var _0x1e2ad4=users[_0x17f03a(0x154)];else{if(_0x57597f[0x0]['language']==_0x17f03a(0x183))var _0x1e2ad4=users[_0x17f03a(0x183)];else{if(_0x57597f[0x0][_0x17f03a(0x150)]=='German')var _0x1e2ad4=users[_0x17f03a(0x198)];else{if(_0x57597f[0x0]['language']==_0x17f03a(0x1ea))var _0x1e2ad4=users['Spanish'];else{if(_0x57597f[0x0][_0x17f03a(0x150)]==_0x17f03a(0x1e6))var _0x1e2ad4=users[_0x17f03a(0x1e6)];else{if(_0x57597f[0x0][_0x17f03a(0x150)]==_0x17f03a(0x1dc))var _0x1e2ad4=users['Portuguese'];else{if(_0x57597f[0x0][_0x17f03a(0x150)]=='Chinese')var _0x1e2ad4=users[_0x17f03a(0x1cf)];else{if(_0x57597f[0x0]['language']==_0x17f03a(0x164))var _0x1e2ad4=users[_0x17f03a(0x1f7)];}}}}}}}_0x48e4d9['render'](_0x17f03a(0x20b),{'success':_0x581d7e['flash'](_0x17f03a(0x20a)),'errors':_0x581d7e['flash'](_0x17f03a(0x1da)),'role':_0x148c10,'profile':_0x49f292,'master_shop':_0x57597f,'user':_0xcffb8b,'language':_0x1e2ad4});}catch(_0x4b5ccd){console['log'](_0x4b5ccd);}}),router[a0_0x59344a(0x210)](a0_0x59344a(0x1b8),auth,async(_0x3b45ad,_0x533ec8)=>{const _0x1680e4=a0_0x59344a;try{const {name:_0x443cb7,products:_0x47d03e}=_0x3b45ad[_0x1680e4(0x157)],_0xae6347=new brands({'name':_0x443cb7,'products':_0x47d03e}),_0x101942=await brands[_0x1680e4(0x1e0)]({'name':_0x443cb7});_0x101942?_0x3b45ad[_0x1680e4(0x194)](_0x1680e4(0x1da),_0x443cb7+_0x1680e4(0x1c2)):_0x3b45ad[_0x1680e4(0x194)](_0x1680e4(0x20a),_0x443cb7+_0x1680e4(0x1e4));const _0x4d3461=await _0xae6347[_0x1680e4(0x216)]();_0x533ec8[_0x1680e4(0x197)](_0x1680e4(0x1e8));}catch(_0x190940){console[_0x1680e4(0x1ed)](_0x190940);}}),router[a0_0x59344a(0x1d2)]('/brands/:id',auth,async(_0x2b1d1e,_0x48e31b)=>{const _0x3d2c48=a0_0x59344a;try{const {username:_0x20578f,email:_0x307719,role:_0x392948}=_0x2b1d1e['user'],_0x563a8b=_0x2b1d1e['user'],_0x4e42d3=await profile['findOne']({'email':_0x563a8b[_0x3d2c48(0x1f6)]}),_0x3b8e59=await master_shop[_0x3d2c48(0x1d7)]();console[_0x3d2c48(0x1ed)]('master',_0x3b8e59);const _0xaabd9a=_0x2b1d1e[_0x3d2c48(0x1e2)]['id'];console[_0x3d2c48(0x1ed)](_0xaabd9a);const _0x17bd8c=await brands[_0x3d2c48(0x161)](_0xaabd9a);if(_0x3b8e59[0x0]['language']==_0x3d2c48(0x17a))var _0x45b8c3=users[_0x3d2c48(0x154)];else{if(_0x3b8e59[0x0]['language']=='Hindi')var _0x45b8c3=users[_0x3d2c48(0x183)];else{if(_0x3b8e59[0x0][_0x3d2c48(0x150)]==_0x3d2c48(0x198))var _0x45b8c3=users['German'];else{if(_0x3b8e59[0x0]['language']==_0x3d2c48(0x1ea))var _0x45b8c3=users[_0x3d2c48(0x1ea)];else{if(_0x3b8e59[0x0]['language']=='French')var _0x45b8c3=users[_0x3d2c48(0x1e6)];else{if(_0x3b8e59[0x0][_0x3d2c48(0x150)]==_0x3d2c48(0x1dc))var _0x45b8c3=users[_0x3d2c48(0x1c7)];else{if(_0x3b8e59[0x0][_0x3d2c48(0x150)]==_0x3d2c48(0x1cf))var _0x45b8c3=users[_0x3d2c48(0x1cf)];else{if(_0x3b8e59[0x0][_0x3d2c48(0x150)]==_0x3d2c48(0x164))var _0x45b8c3=users[_0x3d2c48(0x1f7)];}}}}}}}_0x48e31b['render']('brands',{'success':_0x2b1d1e['flash'](_0x3d2c48(0x20a)),'errors':_0x2b1d1e['flash'](_0x3d2c48(0x1da)),'role':_0x563a8b,'profile':_0x4e42d3,'master_shop':_0x3b8e59,'user':_0x17bd8c,'language':_0x45b8c3});}catch(_0x2fb948){console['log'](_0x2fb948);}}),router[a0_0x59344a(0x210)]('/brands/:id',auth,async(_0x5a710e,_0x8dda4c)=>{const _0xf227ca=a0_0x59344a;try{const _0x193636=_0x5a710e['params']['id'],_0x5c3d45=await brands[_0xf227ca(0x15d)](_0x193636,_0x5a710e[_0xf227ca(0x157)]);_0x5a710e['flash'](_0xf227ca(0x20a),'brand\x20data\x20update\x20successfully'),_0x8dda4c['redirect'](_0xf227ca(0x1e8));}catch(_0x29d2d5){console[_0xf227ca(0x1ed)](_0x29d2d5);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x1fb),auth,async(_0x3f2261,_0x2f45f8)=>{const _0x5ac4b9=a0_0x59344a;try{const _0x37404b=_0x3f2261[_0x5ac4b9(0x1e2)]['id'],_0x3bfe14=await brands[_0x5ac4b9(0x169)](_0x37404b);_0x3f2261[_0x5ac4b9(0x194)](_0x5ac4b9(0x20a),_0x5ac4b9(0x1db)),_0x2f45f8['redirect'](_0x5ac4b9(0x1e8));}catch(_0x4b570e){console['log'](_0x4b570e);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x190),auth,async(_0x1988fd,_0x463115)=>{const _0xc1e960=a0_0x59344a;try{const {username:_0x26c3a4,email:_0x5d1bf1,role:_0x96beec}=_0x1988fd[_0xc1e960(0x18c)],_0x3f28ba=_0x1988fd[_0xc1e960(0x18c)],_0x563d65=await profile[_0xc1e960(0x1e0)]({'email':_0x3f28ba['email']}),_0x4857df=await master_shop[_0xc1e960(0x1d7)]();console[_0xc1e960(0x1ed)]('master',_0x4857df);const _0x3d1f77=await units['find']();if(_0x4857df[0x0][_0xc1e960(0x150)]==_0xc1e960(0x17a))var _0x2bf9cc=users['English'];else{if(_0x4857df[0x0][_0xc1e960(0x150)]==_0xc1e960(0x183))var _0x2bf9cc=users[_0xc1e960(0x183)];else{if(_0x4857df[0x0]['language']==_0xc1e960(0x198))var _0x2bf9cc=users['German'];else{if(_0x4857df[0x0][_0xc1e960(0x150)]==_0xc1e960(0x1ea))var _0x2bf9cc=users[_0xc1e960(0x1ea)];else{if(_0x4857df[0x0]['language']==_0xc1e960(0x1e6))var _0x2bf9cc=users[_0xc1e960(0x1e6)];else{if(_0x4857df[0x0]['language']==_0xc1e960(0x1dc))var _0x2bf9cc=users[_0xc1e960(0x1c7)];else{if(_0x4857df[0x0][_0xc1e960(0x150)]==_0xc1e960(0x1cf))var _0x2bf9cc=users['Chinese'];else{if(_0x4857df[0x0][_0xc1e960(0x150)]==_0xc1e960(0x164))var _0x2bf9cc=users[_0xc1e960(0x1f7)];}}}}}}}_0x463115['render'](_0xc1e960(0x15b),{'success':_0x1988fd[_0xc1e960(0x194)](_0xc1e960(0x20a)),'errors':_0x1988fd[_0xc1e960(0x194)](_0xc1e960(0x1da)),'role':_0x3f28ba,'profile':_0x563d65,'master_shop':_0x4857df,'user':_0x3d1f77,'language':_0x2bf9cc});}catch(_0x324af3){console[_0xc1e960(0x1ed)](_0x324af3);}}),router['post'](a0_0x59344a(0x190),auth,async(_0x34b008,_0x271b1b)=>{const _0x5b12f2=a0_0x59344a;try{const {name:_0x38c32c,secondary_unit:_0x2389e7,products:_0x143fe5}=_0x34b008['body'],_0x2eb688=new units({'name':_0x38c32c,'secondary_unit':_0x2389e7,'products':_0x143fe5}),_0x197dc7=await units['findOne']({'name':_0x38c32c});_0x197dc7?_0x34b008[_0x5b12f2(0x194)]('errors',_0x38c32c+_0x5b12f2(0x1a1)):_0x34b008[_0x5b12f2(0x194)]('success',_0x38c32c+_0x5b12f2(0x1b6));const _0x4e4517=await _0x2eb688['save']();_0x271b1b[_0x5b12f2(0x197)](_0x5b12f2(0x16c));}catch(_0x2e2f55){console['log'](_0x2e2f55);}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x1b7),auth,async(_0x5cc4d0,_0xbbde51)=>{const _0x59cc1b=a0_0x59344a;try{const {username:_0x3e77c8,email:_0x5202d3,role:_0x5e1cd2}=_0x5cc4d0['user'],_0x5f8c2b=_0x5cc4d0[_0x59cc1b(0x18c)],_0x35b7ee=await profile[_0x59cc1b(0x1e0)]({'email':_0x5f8c2b[_0x59cc1b(0x1f6)]}),_0xc8832=await master_shop['find']();console['log'](_0x59cc1b(0x180),_0xc8832);const _0x41b4b8=_0x5cc4d0[_0x59cc1b(0x1e2)]['id'],_0x38531a=await units['findById'](_0x41b4b8);if(_0xc8832[0x0]['language']=='English\x20(US)')var _0x3d6653=users[_0x59cc1b(0x154)];else{if(_0xc8832[0x0][_0x59cc1b(0x150)]==_0x59cc1b(0x183))var _0x3d6653=users[_0x59cc1b(0x183)];else{if(_0xc8832[0x0]['language']=='German')var _0x3d6653=users[_0x59cc1b(0x198)];else{if(_0xc8832[0x0]['language']==_0x59cc1b(0x1ea))var _0x3d6653=users[_0x59cc1b(0x1ea)];else{if(_0xc8832[0x0][_0x59cc1b(0x150)]==_0x59cc1b(0x1e6))var _0x3d6653=users['French'];else{if(_0xc8832[0x0][_0x59cc1b(0x150)]==_0x59cc1b(0x1dc))var _0x3d6653=users['Portuguese'];else{if(_0xc8832[0x0][_0x59cc1b(0x150)]==_0x59cc1b(0x1cf))var _0x3d6653=users[_0x59cc1b(0x1cf)];else{if(_0xc8832[0x0][_0x59cc1b(0x150)]==_0x59cc1b(0x164))var _0x3d6653=users[_0x59cc1b(0x1f7)];}}}}}}}_0xbbde51['render'](_0x59cc1b(0x15b),{'success':_0x5cc4d0[_0x59cc1b(0x194)]('success'),'errors':_0x5cc4d0[_0x59cc1b(0x194)](_0x59cc1b(0x1da)),'role':_0x5f8c2b,'profile':_0x35b7ee,'master_shop':_0xc8832,'user':_0x38531a,'language':_0x3d6653});}catch(_0x3a1a34){console[_0x59cc1b(0x1ed)](_0x3a1a34);}}),router['post'](a0_0x59344a(0x1b7),auth,async(_0x2b66da,_0x9aa135)=>{const _0x756b92=a0_0x59344a;try{const _0x15eb47=_0x2b66da[_0x756b92(0x1e2)]['id'],_0x5b1c10=await units[_0x756b92(0x15d)](_0x15eb47,_0x2b66da[_0x756b92(0x157)]);_0x2b66da[_0x756b92(0x194)]('success',_0x756b92(0x1ce)),_0x9aa135[_0x756b92(0x197)](_0x756b92(0x16c));}catch(_0xf62041){console[_0x756b92(0x1ed)](_0xf62041);}}),router['get'](a0_0x59344a(0x1d3),auth,async(_0x577c65,_0x25d430)=>{const _0x52e224=a0_0x59344a;try{const _0x518c9c=_0x577c65['params']['id'],_0x34a652=await units[_0x52e224(0x169)](_0x518c9c);_0x577c65[_0x52e224(0x194)](_0x52e224(0x20a),_0x52e224(0x196)),_0x25d430['redirect']('/products/units');}catch(_0x4128ff){console[_0x52e224(0x1ed)](_0x4128ff);}});const storage=multer[a0_0x59344a(0x1fa)]({'destination':(_0x2d849a,_0x1b8856,_0x16d6a1)=>{const _0x7c614d=a0_0x59344a;_0x16d6a1(null,_0x7c614d(0x1cc));},'filename':(_0x176349,_0x59d869,_0x342c3c)=>{const _0x1e3a84=a0_0x59344a;_0x342c3c(null,Date[_0x1e3a84(0x1f8)]()+_0x59d869['originalname']);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0x2ef7ef,_0x1af117)=>{const _0x41743c=a0_0x59344a;try{const {username:_0x4c6f8b,email:_0x3f8e02,role:_0x5b76ff}=_0x2ef7ef[_0x41743c(0x18c)],_0x398251=_0x2ef7ef[_0x41743c(0x18c)],_0x3b76fb=await profile['findOne']({'email':_0x398251[_0x41743c(0x1f6)]}),_0x1cbf2e={'year':_0x41743c(0x206),'month':_0x41743c(0x19c),'day':'numeric'},_0x39120f=await master_shop[_0x41743c(0x1d7)]();console['log'](_0x41743c(0x1a2),_0x39120f);const _0x1b12bb=await product[_0x41743c(0x1d7)]();console[_0x41743c(0x1ed)](_0x41743c(0x171),_0x1b12bb);const _0x4e75d6=await warehouse[_0x41743c(0x1b4)]([{'$unwind':_0x41743c(0x1d9)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':'name','as':_0x41743c(0x15a)}},{'$unwind':_0x41743c(0x1e1)},{'$project':{'product_name':_0x41743c(0x18b),'product_stock':_0x41743c(0x1bb)}},{'$group':{'_id':_0x41743c(0x1b3),'product_stock':{'$sum':_0x41743c(0x175)}}}]);console[_0x41743c(0x1ed)](_0x41743c(0x162),_0x4e75d6),_0x4e75d6[_0x41743c(0x1ca)](_0x198c6a=>{const _0x1b8cd3=_0x41743c,_0x269794=_0x1b12bb[_0x1b8cd3(0x1f0)](_0x1d7328=>{const _0x45ef20=_0x1b8cd3;_0x1d7328['name']==_0x198c6a['_id']&&(_0x1d7328[_0x45ef20(0x1c8)]=parseInt(_0x1d7328[_0x45ef20(0x1c8)])+parseInt(_0x198c6a[_0x45ef20(0x165)]));});}),console[_0x41743c(0x1ed)](_0x41743c(0x171),_0x1b12bb);if(_0x39120f[0x0][_0x41743c(0x150)]=='English\x20(US)')var _0x195eef=users[_0x41743c(0x154)];else{if(_0x39120f[0x0][_0x41743c(0x150)]==_0x41743c(0x183))var _0x195eef=users['Hindi'];else{if(_0x39120f[0x0]['language']==_0x41743c(0x198))var _0x195eef=users[_0x41743c(0x198)];else{if(_0x39120f[0x0]['language']==_0x41743c(0x1ea))var _0x195eef=users['Spanish'];else{if(_0x39120f[0x0][_0x41743c(0x150)]=='French')var _0x195eef=users['French'];else{if(_0x39120f[0x0]['language']==_0x41743c(0x1dc))var _0x195eef=users[_0x41743c(0x1c7)];else{if(_0x39120f[0x0][_0x41743c(0x150)]=='Chinese')var _0x195eef=users[_0x41743c(0x1cf)];else{if(_0x39120f[0x0][_0x41743c(0x150)]==_0x41743c(0x164))var _0x195eef=users[_0x41743c(0x1f7)];}}}}}}}_0x1af117[_0x41743c(0x181)](_0x41743c(0x211),{'success':_0x2ef7ef[_0x41743c(0x194)](_0x41743c(0x20a)),'errors':_0x2ef7ef[_0x41743c(0x194)](_0x41743c(0x1da)),'alldata':_0x1b12bb,'profile':_0x3b76fb,'master_shop':_0x39120f,'role':_0x398251,'product_stock':_0x4e75d6,'language':_0x195eef});}catch(_0x5a92b4){console[_0x41743c(0x1ed)](_0x5a92b4);}}),router['get'](a0_0x59344a(0x19a),auth,async(_0x12f4e0,_0x51a893)=>{const _0x5a4fb9=a0_0x59344a;try{const {username:_0x1e12b8,email:_0x3e7f13,role:_0x3df57d}=_0x12f4e0[_0x5a4fb9(0x18c)],_0x11ccc3=_0x12f4e0['user'],_0x311eda=await profile[_0x5a4fb9(0x1e0)]({'email':_0x11ccc3['email']}),_0x4bae53=await master_shop[_0x5a4fb9(0x1d7)]();console['log']('master',_0x4bae53);const _0x4e9fd8=await categories['find']({}),_0x329d2e=await brands['find']({}),_0x23c905=await units[_0x5a4fb9(0x1d7)]({}),_0x43289f=await warehouse['find']({'status':_0x5a4fb9(0x174)});if(_0x4bae53[0x0][_0x5a4fb9(0x150)]==_0x5a4fb9(0x17a))var _0x19d138=users['English'];else{if(_0x4bae53[0x0]['language']==_0x5a4fb9(0x183))var _0x19d138=users['Hindi'];else{if(_0x4bae53[0x0][_0x5a4fb9(0x150)]==_0x5a4fb9(0x198))var _0x19d138=users['German'];else{if(_0x4bae53[0x0][_0x5a4fb9(0x150)]==_0x5a4fb9(0x1ea))var _0x19d138=users[_0x5a4fb9(0x1ea)];else{if(_0x4bae53[0x0]['language']=='French')var _0x19d138=users[_0x5a4fb9(0x1e6)];else{if(_0x4bae53[0x0]['language']=='Portuguese\x20(BR)')var _0x19d138=users['Portuguese'];else{if(_0x4bae53[0x0][_0x5a4fb9(0x150)]==_0x5a4fb9(0x1cf))var _0x19d138=users[_0x5a4fb9(0x1cf)];else{if(_0x4bae53[0x0][_0x5a4fb9(0x150)]=='Arabic\x20(ae)')var _0x19d138=users[_0x5a4fb9(0x1f7)];}}}}}}}_0x51a893[_0x5a4fb9(0x181)](_0x5a4fb9(0x1d4),{'success':_0x12f4e0[_0x5a4fb9(0x194)](_0x5a4fb9(0x20a)),'errors':_0x12f4e0[_0x5a4fb9(0x194)](_0x5a4fb9(0x1da)),'role':_0x11ccc3,'profile':_0x311eda,'categories':_0x4e9fd8,'brands':_0x329d2e,'master_shop':_0x4bae53,'units':_0x23c905,'language':_0x19d138,'find_data':_0x43289f});}catch(_0x5ecc6d){console['log'](_0x5ecc6d);}}),router[a0_0x59344a(0x210)]('/view/add_products',auth,upload[a0_0x59344a(0x1d5)](a0_0x59344a(0x188)),async(_0x1e4093,_0x3535df)=>{const _0x1cf8a9=a0_0x59344a;try{const {name:_0x4e0834,category:_0x370aa5,brand:_0x23c085,unit:_0x275071,alertquantity:_0x558d52,stock:_0x4b3a2c,product_code:_0x2fbbdd,warehouse:_0x226253,primary_ItemCode:_0x1d4825,second_ItemCode:_0x16fcda,second_unit:_0x5f5764,maxPerUnit:_0x5c05ec,MaxPerProduct:_0x59a54d}=_0x1e4093[_0x1cf8a9(0x157)],_0x3cf5c6=_0x1e4093[_0x1cf8a9(0x1ec)]?.[_0x1cf8a9(0x156)]||_0x1cf8a9(0x1e5),_0x2d085e=new product({'image':_0x3cf5c6,'name':_0x4e0834,'category':_0x370aa5,'brand':_0x23c085,'unit':_0x275071,'alertquantity':_0x558d52,'stock':_0x4b3a2c,'product_code':_0x2fbbdd,'warehouse':_0x226253,'primary_code':_0x1d4825,'secondary_code':_0x16fcda,'second_unit':_0x5f5764,'maxStocks':_0x59a54d,'maxProdPerUnit':_0x5c05ec}),_0x38410c=await _0x2d085e[_0x1cf8a9(0x216)](),_0x2f79b3=await categories[_0x1cf8a9(0x1e0)]({'name':_0x370aa5});_0x2f79b3[_0x1cf8a9(0x211)]=parseInt(_0x2f79b3[_0x1cf8a9(0x211)])+0x1,await _0x2f79b3[_0x1cf8a9(0x216)]();const _0x331354=await brands['findOne']({'name':_0x23c085});_0x331354['products']=parseInt(_0x331354[_0x1cf8a9(0x211)])+0x1,await _0x331354[_0x1cf8a9(0x216)]();const _0xa0ce49=await units[_0x1cf8a9(0x1e0)]({'name':_0x275071});_0xa0ce49['products']=parseInt(_0xa0ce49[_0x1cf8a9(0x211)])+0x1,await _0xa0ce49['save'](),_0x1e4093[_0x1cf8a9(0x194)](_0x1cf8a9(0x20a),_0x1cf8a9(0x151)),_0x3535df[_0x1cf8a9(0x197)](_0x1cf8a9(0x185));}catch(_0x111afc){console[_0x1cf8a9(0x1ed)](_0x111afc);}}),router['get'](a0_0x59344a(0x19e),auth,async(_0x2322ba,_0x43b18a)=>{const _0x18c4e5=a0_0x59344a;try{const {username:_0x14f584,email:_0x57fa55,role:_0x49267c}=_0x2322ba[_0x18c4e5(0x18c)],_0x3a8753=_0x2322ba[_0x18c4e5(0x18c)],_0x190816=await profile['findOne']({'email':_0x3a8753[_0x18c4e5(0x1f6)]}),_0x4f9277=await master_shop[_0x18c4e5(0x1d7)]();console[_0x18c4e5(0x1ed)](_0x18c4e5(0x1e3),_0x4f9277);const _0x5e7e25=_0x2322ba[_0x18c4e5(0x1e2)]['id'],_0x238f1b=await product['findById'](_0x5e7e25),_0x381ee6=await categories[_0x18c4e5(0x1d7)]({}),_0x272c98=await brands[_0x18c4e5(0x1d7)]({}),_0x2d7525=await units[_0x18c4e5(0x1d7)]({}),_0x54c46e=await warehouse[_0x18c4e5(0x1d7)]({'status':_0x18c4e5(0x174)}),_0x5732d6=await units[_0x18c4e5(0x1b4)]([{'$group':{'_id':_0x18c4e5(0x1be),'secondaryunit':{'$first':_0x18c4e5(0x1a6)}}}]);if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x17a))var _0x59f58a=users[_0x18c4e5(0x154)];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x183))var _0x59f58a=users[_0x18c4e5(0x183)];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x198))var _0x59f58a=users[_0x18c4e5(0x198)];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x1ea))var _0x59f58a=users['Spanish'];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x1e6))var _0x59f58a=users[_0x18c4e5(0x1e6)];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x1dc))var _0x59f58a=users['Portuguese'];else{if(_0x4f9277[0x0]['language']==_0x18c4e5(0x1cf))var _0x59f58a=users[_0x18c4e5(0x1cf)];else{if(_0x4f9277[0x0][_0x18c4e5(0x150)]==_0x18c4e5(0x164))var _0x59f58a=users[_0x18c4e5(0x1f7)];}}}}}}}_0x43b18a[_0x18c4e5(0x181)](_0x18c4e5(0x1b1),{'success':_0x2322ba[_0x18c4e5(0x194)](_0x18c4e5(0x20a)),'errors':_0x2322ba[_0x18c4e5(0x194)](_0x18c4e5(0x1da)),'role':_0x3a8753,'profile':_0x190816,'alldata':_0x238f1b,'categories':_0x381ee6,'brands':_0x272c98,'master_shop':_0x4f9277,'units':_0x2d7525,'secondunit':_0x5732d6,'find_data':_0x54c46e,'language':_0x59f58a});}catch(_0x99c2fd){console['log'](_0x99c2fd);}}),router['post'](a0_0x59344a(0x19e),auth,upload[a0_0x59344a(0x1d5)](a0_0x59344a(0x188)),async(_0x181cdd,_0x5a3605)=>{const _0x3e8137=a0_0x59344a;try{console[_0x3e8137(0x1ed)](_0x3e8137(0x19d));const _0x39ad63=_0x181cdd[_0x3e8137(0x1e2)]['id'],_0x5aeef4=await product['findById'](_0x39ad63),{image:_0x33ce1e,name:_0x3a4688,category:_0x28c780,brand:_0x151cb4,sku:_0x246d7a,unit:_0x25922c,alertquantity:_0x255af7,product_code:_0x48c990,warehouse:_0x548d37,primary_ItemCode:_0x3fe2b4,second_ItemCode:_0x552e52,second_unit:_0x8eb1d2,maxPerUnit:_0x1c21f8,MaxPerProduct:_0x4ea184,prod_catdata:_0x45b1d1}=_0x181cdd[_0x3e8137(0x157)];_0x181cdd['file']&&(_0x5aeef4['image']=_0x181cdd[_0x3e8137(0x1ec)]['filename']);_0x5aeef4[_0x3e8137(0x1ad)]=_0x3a4688,_0x5aeef4[_0x3e8137(0x1f4)]=_0x28c780,_0x5aeef4[_0x3e8137(0x159)]=_0x151cb4,_0x5aeef4[_0x3e8137(0x17d)]=_0x246d7a,_0x5aeef4[_0x3e8137(0x1af)]=_0x25922c,_0x5aeef4['alertquantity']=_0x255af7,_0x5aeef4['product_code']=_0x48c990,_0x5aeef4['warehouse']=_0x548d37,_0x5aeef4['primary_code']=_0x3fe2b4,_0x5aeef4[_0x3e8137(0x172)]=_0x552e52,_0x5aeef4[_0x3e8137(0x1dd)]=_0x8eb1d2,_0x5aeef4[_0x3e8137(0x1b5)]=_0x4ea184,_0x5aeef4['maxProdPerUnit']=_0x1c21f8,_0x5aeef4[_0x3e8137(0x1ef)]=_0x45b1d1;const _0x5da05f=await _0x5aeef4[_0x3e8137(0x216)]();console[_0x3e8137(0x1ed)](_0x3e8137(0x1cb),_0x5aeef4),_0x181cdd['flash'](_0x3e8137(0x20a),_0x3e8137(0x1c3)),_0x5a3605[_0x3e8137(0x197)]('/products/view');}catch(_0x3bc7e7){console[_0x3e8137(0x1ed)](_0x3bc7e7);}}),router['get'](a0_0x59344a(0x163),auth,async(_0x4d64f3,_0x4d230c)=>{const _0x2796e2=a0_0x59344a;try{const {username:_0xff130f,email:_0x19384e,role:_0xccb541}=_0x4d64f3[_0x2796e2(0x18c)],_0x39ecf7=_0x4d64f3['user'],_0x1bd722=await profile[_0x2796e2(0x1e0)]({'email':_0x39ecf7[_0x2796e2(0x1f6)]}),_0x38caf6=await master_shop['find']();console['log'](_0x2796e2(0x179),_0x38caf6);const _0x5e7c79=_0x4d64f3[_0x2796e2(0x1e2)]['id'],_0x49b602=await product[_0x2796e2(0x161)](_0x5e7c79);console['log'](_0x2796e2(0x1d6),_0x49b602);if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x17a))var _0x294541=users[_0x2796e2(0x154)];else{if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x183))var _0x294541=users['Hindi'];else{if(_0x38caf6[0x0]['language']=='German')var _0x294541=users[_0x2796e2(0x198)];else{if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x1ea))var _0x294541=users[_0x2796e2(0x1ea)];else{if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x1e6))var _0x294541=users[_0x2796e2(0x1e6)];else{if(_0x38caf6[0x0]['language']==_0x2796e2(0x1dc))var _0x294541=users['Portuguese'];else{if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x1cf))var _0x294541=users['Chinese'];else{if(_0x38caf6[0x0][_0x2796e2(0x150)]==_0x2796e2(0x164))var _0x294541=users[_0x2796e2(0x1f7)];}}}}}}}_0x4d230c['render'](_0x2796e2(0x202),{'success':_0x4d64f3['flash'](_0x2796e2(0x20a)),'errors':_0x4d64f3['flash'](_0x2796e2(0x1da)),'role':_0x39ecf7,'profile':_0x1bd722,'alldata':_0x49b602,'master_shop':_0x38caf6,'language':_0x294541});}catch(_0x34576b){console[_0x2796e2(0x1ed)](_0x34576b);}}),router[a0_0x59344a(0x1d2)]('/products_export_migrate_file',auth,async(_0x24b723,_0x12b9aa)=>{const _0x225271=a0_0x59344a;try{const _0x45d2ad=new excelJS[(_0x225271(0x1eb))](),_0x4f5442=_0x45d2ad[_0x225271(0x1a0)](_0x225271(0x16a));return _0x4f5442[_0x225271(0x1fd)]=[{'header':'Product_Name','key':_0x225271(0x153),'width':0xa},{'header':_0x225271(0x1d0),'key':_0x225271(0x213),'width':0xa},{'header':_0x225271(0x201),'key':_0x225271(0x20f),'width':0xa},{'header':_0x225271(0x15e),'key':_0x225271(0x15f),'width':0xa},{'header':_0x225271(0x204),'key':_0x225271(0x1aa),'width':0xa},{'header':_0x225271(0x205),'key':_0x225271(0x1ab),'width':0xa},{'header':'Secondary_Code','key':'ProductCode','width':0xa},{'header':_0x225271(0x1c6),'key':_0x225271(0x1ab),'width':0xa},{'header':_0x225271(0x1c5),'key':_0x225271(0x1c4),'width':0xa},{'header':_0x225271(0x16d),'key':_0x225271(0x184),'width':0xa},{'header':'Maximum_Stocks','key':_0x225271(0x184),'width':0xa},{'header':_0x225271(0x1c9),'key':'Prod_Cat','width':0xa}],_0x12b9aa[_0x225271(0x155)](_0x225271(0x17c),_0x225271(0x18f)),_0x12b9aa[_0x225271(0x155)]('Content-Disposition',_0x225271(0x1bf)),_0x45d2ad['xlsx'][_0x225271(0x1c0)](_0x12b9aa)['then'](()=>{const _0x32e2ad=_0x225271;_0x12b9aa[_0x32e2ad(0x1fe)](0xc8);});}catch(_0x271f8a){_0x12b9aa['status'](0x190)[_0x225271(0x19f)](_0x271f8a);}});function a0_0x2614(){const _0x51c417=['readFile','data','save','language','product\x20add\x20successfully','migrate_product_fule','PName','English','setHeader','filename','body','express/lib/response','brand','product_docs','units','Secondary_Code','findByIdAndUpdate','Secondary_Units','PSecondaryUnits','Sheets','findById','Products\x20warehouse_data','/barcode/:id','Arabic\x20(ae)','product_stock','public/Migration/','alertquantity','8okgImC','findByIdAndDelete','Products','\x20Edit\x20Successfully','/products/units','Alert_QTY','prod_categ','min','height','Products\x20find_data','secondary_code','primary_code','Enabled','$product_stock','/products_import_migrate_file','product_barcode_products','concat','barcode\x20Product\x20master','English\x20(US)','pdfkit-table','Content-Type','sku','$brand','originalname','master','render','toBuffer','Hindi','PAlQty','/products/view','exports','json','image','length','/select_data','$product_details.product_name','user','sheet_to_json','Raw\x20Materials','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/units','1063032ugyFMc','express','86604HAjerW','flash','jsbarcode','unit\x20data\x20delete\x20successfully','redirect','German','3bNCTTA','/view/add_products','831280AYgpCV','long','hello','/view/:id','send','addWorksheet','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Products\x20master','50YdBCUc','/print_barcode_single/:id','exceljs','$secondary_unit','bind','/products/categories','/categories','MaxperUnits','ProductCode','categories_edit','name','515160OYnCZI','unit','\x20added\x20successfully','edit_product','utils','$product_name','aggregate','maxStocks','\x20unit\x20is\x20add\x20successfully','/units/:id','/brands','categories\x20data\x20delete\x20successfully','../middleware/auth','$product_details.product_stock','maxProdPerUnit','/categories/:id','$_id','attachment;\x20filename=Product_Migration_File.xlsx','write','2248939JdrPgp','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product\x20update\x20successfully','PCat','Category','Product_Code','Portuguese','stock','Products_category','forEach','product\x20edit','public/upload','width','unit\x20data\x20update\x20successfully','Chinese','Brands','Finished\x20Goods','get','/units/delete/:id','add_product','single','barcode\x20user_id','find','15bvPiLI','$product_details','errors','brand\x20data\x20delete\x20successfully','Portuguese\x20(BR)','secondary_unit','push','categ','findOne','$product_docs','params','edit\x20Product\x20master','\x20brand\x20is\x20add\x20successfully','defaultProduct.avif','French','addPage','/products/brands','10206539bwWXvh','Spanish','Workbook','file','log','\x20<>\x20','product_category','map','$category','3917304IFiTfi','/print_barcode_filter_search/','category','product_code','email','Arabic','now','/barcode_data','diskStorage','/brands/delete/:id','/filter_product','columns','status','Product_Name','CODE128','Units','product_barcode','/print_barcode','max_number_per_units','Primary_Code','numeric','../public/language/languages.json','multer','/categories/delete/:id','success','brands','end','public/Migration','canvas','PUnits','post','products','message','PBrands'];a0_0x2614=function(){return _0x51c417;};return a0_0x2614();}const storage1=multer[a0_0x59344a(0x1fa)]({'destination':(_0x18e1f9,_0x517792,_0x3e150f)=>{const _0x579816=a0_0x59344a;_0x3e150f(null,_0x579816(0x20d));},'filename':(_0x1901a7,_0x4e20fd,_0x26205d)=>{const _0x2bf690=a0_0x59344a;_0x26205d(null,Date[_0x2bf690(0x1f8)]()+_0x4e20fd[_0x2bf690(0x17f)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x59344a(0x210)](a0_0x59344a(0x176),auth,uploadMigrate[a0_0x59344a(0x1d5)](a0_0x59344a(0x152)),async(_0x4a0f7c,_0x35eba3)=>{const _0x4bd3b9=a0_0x59344a,_0x14c0c5=_0x4a0f7c['file'][_0x4bd3b9(0x156)],_0x5751ac=await xlsx[_0x4bd3b9(0x214)](_0x4bd3b9(0x166)+_0x14c0c5);let _0x2425d1=_0x5751ac['SheetNames'],_0xd4f07c=xlsx[_0x4bd3b9(0x1b2)][_0x4bd3b9(0x18d)](_0x5751ac[_0x4bd3b9(0x160)][_0x2425d1[0x0]]);for(const _0x4cd204 of _0xd4f07c){const _0x550970=_0x4cd204[_0x4bd3b9(0x1ff)],_0x45de4a=_0x4cd204[_0x4bd3b9(0x1d0)],_0x36cfa4=_0x4cd204[_0x4bd3b9(0x201)],_0x1137a8=_0x4cd204[_0x4bd3b9(0x15e)],_0x223b09=_0x4cd204[_0x4bd3b9(0x1c6)],_0x475b79=_0x4cd204[_0x4bd3b9(0x1c5)],_0x33f32a=_0x4cd204[_0x4bd3b9(0x16d)],_0x501065=_0x4cd204[_0x4bd3b9(0x205)],_0x200750=_0x4cd204[_0x4bd3b9(0x15c)],_0x5c3bad=_0x4cd204['Maximum_Stocks'],_0x25e823=_0x4cd204[_0x4bd3b9(0x204)],_0x1bbfdb=_0x4cd204[_0x4bd3b9(0x1c9)];try{let _0x365cb6=await categories[_0x4bd3b9(0x1e0)]({'name':_0x475b79});if(!_0x365cb6){const _0x5adf7f=new categories({'name':_0x475b79,'products':'0'});_0x365cb6=await _0x5adf7f[_0x4bd3b9(0x216)]();}let _0xc2573b=await brands[_0x4bd3b9(0x1e0)]({'name':_0x45de4a});if(!_0xc2573b){const _0x5f1022=new brands({'name':_0x45de4a,'products':'0'});_0xc2573b=await _0x5f1022[_0x4bd3b9(0x216)]();}let _0x55d8d0=await units['findOne']({'name':_0x36cfa4,'secondary_unit':_0x1137a8});if(!_0x55d8d0){const _0x16127a=new units({'name':_0x36cfa4,'secondary_unit':_0x1137a8,'products':'0'});_0x55d8d0=await _0x16127a[_0x4bd3b9(0x216)]();}const _0x125ef4=await product[_0x4bd3b9(0x1d7)]({'name':_0x550970,'category':_0x365cb6[_0x4bd3b9(0x1ad)],'brand':_0xc2573b[_0x4bd3b9(0x1ad)],'secondary_unit':_0x55d8d0[_0x4bd3b9(0x1dd)],'product_code':_0x223b09});console['log'](_0x125ef4[_0x4bd3b9(0x189)]+_0x4bd3b9(0x1ee)+_0x365cb6[_0x4bd3b9(0x1ad)]+'\x20<>\x20'+_0xc2573b[_0x4bd3b9(0x1ad)]+_0x4bd3b9(0x1ee)+_0x55d8d0[_0x4bd3b9(0x1dd)]+_0x4bd3b9(0x1ee)+_0x223b09+_0x4bd3b9(0x1ee)+_0x550970);if(_0x125ef4[_0x4bd3b9(0x189)]===0x0){const _0x24041e=new product({'image':'defaultProduct.avif','name':_0x550970,'category':_0x365cb6[_0x4bd3b9(0x1ad)],'brand':_0xc2573b[_0x4bd3b9(0x1ad)],'unit':_0x55d8d0[_0x4bd3b9(0x1ad)],'alertquantity':_0x33f32a,'product_code':_0x223b09,'secondary_unit':_0x55d8d0[_0x4bd3b9(0x1dd)],'primary_code':_0x501065,'secondary_code':_0x200750,'maxStocks':_0x5c3bad,'maxProdPerUnit':_0x25e823,'product_category':_0x1bbfdb}),_0x5286b1=await _0x24041e['save']();_0x365cb6['products']=parseInt(_0x365cb6[_0x4bd3b9(0x211)])+0x1,await _0x365cb6[_0x4bd3b9(0x216)](),_0xc2573b['products']=parseInt(_0xc2573b[_0x4bd3b9(0x211)])+0x1,await _0xc2573b[_0x4bd3b9(0x216)](),_0x55d8d0[_0x4bd3b9(0x211)]=parseInt(_0x55d8d0['products'])+0x1,await _0x55d8d0[_0x4bd3b9(0x216)](),_0x4a0f7c[_0x4bd3b9(0x194)]('success',_0x550970+_0x4bd3b9(0x1b0));}else{console['log'](_0x125ef4[0x0]);const _0x4b8f18=_0x125ef4[0x0];_0x4b8f18[_0x4bd3b9(0x1f4)]=_0x365cb6['name'],_0x4b8f18['brand']=_0xc2573b[_0x4bd3b9(0x1ad)],_0x4b8f18['unit']=_0x55d8d0[_0x4bd3b9(0x1ad)],_0x4b8f18[_0x4bd3b9(0x167)]=_0x33f32a,_0x4b8f18[_0x4bd3b9(0x1f5)]=_0x223b09,_0x4b8f18[_0x4bd3b9(0x1dd)]=_0x55d8d0[_0x4bd3b9(0x1dd)],_0x4b8f18['primary_code']=_0x501065,_0x4b8f18[_0x4bd3b9(0x172)]=_0x200750,_0x4b8f18[_0x4bd3b9(0x1b5)]=_0x5c3bad,_0x4b8f18[_0x4bd3b9(0x1bc)]=_0x25e823,_0x4b8f18[_0x4bd3b9(0x1ef)]=_0x1bbfdb;const _0x480283=await _0x4b8f18['save']();_0x4a0f7c[_0x4bd3b9(0x194)]('success',_0x480283[_0x4bd3b9(0x1ad)]+_0x4bd3b9(0x16b));}}catch(_0x381f98){_0x35eba3[_0x4bd3b9(0x1fe)](0x1f4)[_0x4bd3b9(0x187)]({'proderror':_0x381f98[_0x4bd3b9(0x212)],'aproduct':_0x550970});}}_0x35eba3['redirect'](_0x4bd3b9(0x185));}),router['post'](a0_0x59344a(0x18a),auth,async(_0x496478,_0x21b1a6)=>{const _0x34ea8d=a0_0x59344a;try{console['log'](_0x496478[_0x34ea8d(0x157)]);const {data_cateory:_0x33674e,datachoose:_0x4228d2}=_0x496478[_0x34ea8d(0x157)];var _0x87a52d;if(_0x4228d2==_0x34ea8d(0x16e))_0x87a52d=await product['aggregate']([{'$group':{'_id':'$product_category'}}]);else{if(_0x4228d2==_0x34ea8d(0x20b))_0x87a52d=await product[_0x34ea8d(0x1b4)]([{'$match':{'product_category':_0x33674e}},{'$group':{'_id':'$brand'}}]);else _0x4228d2==_0x34ea8d(0x1df)&&(_0x87a52d=await product[_0x34ea8d(0x1b4)]([{'$match':{'product_category':_0x33674e}},{'$group':{'_id':'$category'}}]));}_0x21b1a6[_0x34ea8d(0x187)](_0x87a52d);}catch(_0x333d88){_0x21b1a6['json']({'message':_0x333d88[_0x34ea8d(0x212)]});}}),router[a0_0x59344a(0x210)](a0_0x59344a(0x1fc),auth,async(_0x97db06,_0x4e4970)=>{const _0x5a76b2=a0_0x59344a;try{const {data_choosing:_0x4be6c1,data_selected:_0x5da29a}=_0x97db06['body'];var _0x5d2e2d;if(_0x4be6c1==_0x5a76b2(0x16e))_0x5d2e2d=await product[_0x5a76b2(0x1b4)]([{'$match':{'product_category':_0x5da29a}}]);else{if(_0x4be6c1==_0x5a76b2(0x20b))_0x5d2e2d=await product[_0x5a76b2(0x1b4)]([{'$match':{'brand':_0x5da29a}}]);else _0x4be6c1==_0x5a76b2(0x1df)&&(_0x5d2e2d=await product[_0x5a76b2(0x1b4)]([{'$match':{'category':_0x5da29a}}]));}_0x4e4970[_0x5a76b2(0x187)](_0x5d2e2d);}catch(_0x2d1e2f){_0x4e4970[_0x5a76b2(0x187)]({'message':_0x2d1e2f[_0x5a76b2(0x212)]});}}),router[a0_0x59344a(0x1d2)](a0_0x59344a(0x203),auth,async(_0x4eb3d8,_0x356a52)=>{const _0x26f065=a0_0x59344a,_0x5091ba=_0x4eb3d8[_0x26f065(0x18c)],_0x5774b6=await profile['findOne']({'email':_0x5091ba['email']}),_0x58eb21=await master_shop[_0x26f065(0x1d7)](),_0xe5d88b=await product[_0x26f065(0x1d7)]();if(_0x58eb21[0x0][_0x26f065(0x150)]==_0x26f065(0x17a))var _0x32c2dc=users[_0x26f065(0x154)];else{if(_0x58eb21[0x0][_0x26f065(0x150)]==_0x26f065(0x183))var _0x32c2dc=users[_0x26f065(0x183)];else{if(_0x58eb21[0x0][_0x26f065(0x150)]==_0x26f065(0x198))var _0x32c2dc=users['German'];else{if(_0x58eb21[0x0][_0x26f065(0x150)]=='Spanish')var _0x32c2dc=users[_0x26f065(0x1ea)];else{if(_0x58eb21[0x0]['language']==_0x26f065(0x1e6))var _0x32c2dc=users[_0x26f065(0x1e6)];else{if(_0x58eb21[0x0][_0x26f065(0x150)]==_0x26f065(0x1dc))var _0x32c2dc=users[_0x26f065(0x1c7)];else{if(_0x58eb21[0x0][_0x26f065(0x150)]==_0x26f065(0x1cf))var _0x32c2dc=users[_0x26f065(0x1cf)];else{if(_0x58eb21[0x0][_0x26f065(0x150)]=='Arabic\x20(ae)')var _0x32c2dc=users[_0x26f065(0x1f7)];}}}}}}}_0x356a52[_0x26f065(0x181)](_0x26f065(0x177),{'success':_0x4eb3d8[_0x26f065(0x194)](_0x26f065(0x20a)),'errors':_0x4eb3d8['flash'](_0x26f065(0x1da)),'role':_0x5091ba,'profile':_0x5774b6,'products':_0xe5d88b,'master_shop':_0x58eb21,'language':_0x32c2dc});}),router['post'](a0_0x59344a(0x1f9),auth,async(_0x3842cb,_0x5d82f9)=>{const _0x43dc21=a0_0x59344a,_0xf5473b=await product[_0x43dc21(0x1d7)]();_0x5d82f9[_0x43dc21(0x187)]({'data':_0xf5473b});}),router[a0_0x59344a(0x210)]('/barcode_filter',auth,async(_0xdf584f,_0x4df196)=>{const _0x1dc424=a0_0x59344a;try{const {dataProdCat:_0x5bbe6a,dataProdIdentity:_0x2614f2}=_0xdf584f[_0x1dc424(0x157)];var _0xf50ce3;switch(_0x5bbe6a){case'fg':switch(_0x2614f2){case _0x1dc424(0x1d0):_0xf50ce3=await product[_0x1dc424(0x1b4)]([{'$match':{'product_category':_0x1dc424(0x1d1)}},{'$group':{'_id':_0x1dc424(0x17e)}},{'$project':{'brand':_0x1dc424(0x1be)}}]);break;case'Category':_0xf50ce3=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x1dc424(0x1f1)}},{'$project':{'category':_0x1dc424(0x1be)}}]);break;}break;case'rm':switch(_0x2614f2){case _0x1dc424(0x1d0):_0xf50ce3=await product[_0x1dc424(0x1b4)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x1dc424(0x1be)}}]);break;case _0x1dc424(0x1c5):_0xf50ce3=await product[_0x1dc424(0x1b4)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x1dc424(0x1be)}}]);break;}break;}_0x4df196[_0x1dc424(0x187)](_0xf50ce3);}catch(_0x5d96c9){_0x4df196[_0x1dc424(0x187)]({'message':_0x5d96c9[_0x1dc424(0x212)]});}}),router[a0_0x59344a(0x210)]('/print_barcode_filter/',auth,async(_0x46a691,_0x1608d1)=>{const _0x5300e7=a0_0x59344a;try{console[_0x5300e7(0x1ed)](_0x46a691[_0x5300e7(0x157)]);const {prod_cat:_0x35e995,identity:_0x2069fa,valueData:_0x24c3e3,typeofbarcode:_0x910e3d}=_0x46a691[_0x5300e7(0x157)];let _0xe361c3;switch(_0x35e995){case'fg':if(_0x2069fa==_0x5300e7(0x1d0))_0xe361c3=await product[_0x5300e7(0x1b4)]([{'$match':{'product_category':_0x5300e7(0x1d1),'brand':_0x24c3e3}}]);else _0x2069fa==_0x5300e7(0x1c5)&&(_0xe361c3=await product[_0x5300e7(0x1b4)]([{'$match':{'product_category':_0x5300e7(0x1d1),'category':_0x24c3e3}}]));break;case'rm':if(_0x2069fa==_0x5300e7(0x1d0))_0xe361c3=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x24c3e3}}]);else _0x2069fa==_0x5300e7(0x1c5)&&(_0xe361c3=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x24c3e3}}]));break;}const _0x3b1403=_0x2759f1=>_0x2759f1*0x48,_0x67ab4e={'width':0x3,'height':0x1},_0x156dea=new PDFDocument({'margin':_0x3b1403(0.75),'size':[_0x3b1403(_0x67ab4e[_0x5300e7(0x1cd)]),_0x3b1403(_0x67ab4e[_0x5300e7(0x170)])],'bufferPages':!![]}),_0x2ca1ed=_0xe361c3[_0x5300e7(0x189)];for(let _0x1053d4=0x0;_0x1053d4<=_0x2ca1ed;_0x1053d4++){if(_0x1053d4!=_0x2ca1ed){const _0x52b727=_0xe361c3[_0x1053d4]['name'],_0xbe51b8=_0xe361c3[_0x1053d4][_0x5300e7(0x173)],_0x4426c8=_0xe361c3[_0x1053d4][_0x5300e7(0x172)],_0x4058ef=_0xe361c3[_0x1053d4][_0x5300e7(0x1f5)];var _0xf77442;switch(_0x910e3d){case'1':_0xf77442=_0xbe51b8;break;case'2':_0xf77442=_0x4426c8;break;case'3':_0xf77442=_0x4058ef;break;}const _0x36ed37={'width':0xd2,'height':0x64},_0x260770={'width':_0x3b1403(_0x67ab4e[_0x5300e7(0x1cd)]),'height':_0x3b1403(_0x67ab4e[_0x5300e7(0x170)])},_0x941b3=new Canvas();JsBarcode(_0x941b3,_0xf77442,{'format':_0x5300e7(0x200),'height':_0x36ed37[_0x5300e7(0x170)],'displayValue':!![],'text':_0xf77442});const _0xd22813=_0x941b3[_0x5300e7(0x182)](),_0x1b172f=_0x260770[_0x5300e7(0x1cd)]/_0x36ed37['width'],_0x47b1e0=_0x260770[_0x5300e7(0x170)]/_0x36ed37[_0x5300e7(0x170)],_0x9771ef=Math['min'](_0x1b172f,_0x47b1e0),_0x452241=_0x36ed37[_0x5300e7(0x1cd)]*_0x9771ef,_0x259218=_0x36ed37[_0x5300e7(0x170)]*_0x9771ef,_0x35b807=(_0x260770[_0x5300e7(0x1cd)]-_0x452241)/0x2,_0x1f1be6=(_0x260770[_0x5300e7(0x170)]-_0x259218)/0x2;_0x156dea[_0x5300e7(0x188)](_0xd22813,_0x35b807,_0x1f1be6,{'width':_0x452241,'height':_0x259218}),_0x1053d4!=_0x2ca1ed&&_0x156dea[_0x5300e7(0x1e7)]();}}const _0x38ffae=[];_0x156dea['on'](_0x5300e7(0x215),_0x38ffae['push']['bind'](_0x38ffae)),_0x156dea['on'](_0x5300e7(0x20c),()=>{const _0x5e6616=_0x5300e7,_0x5e945a=Buffer[_0x5e6616(0x178)](_0x38ffae),_0x539ab8=_0x5e945a['toString']('base64');_0x1608d1[_0x5e6616(0x187)]({'pdfContent':_0x539ab8});}),_0x156dea[_0x5300e7(0x20c)]();}catch(_0x3ceb9c){_0x1608d1[_0x5300e7(0x187)]({'message':_0x3ceb9c[_0x5300e7(0x212)]});}}),router[a0_0x59344a(0x210)](a0_0x59344a(0x1f3),auth,async(_0x4e401b,_0x1ee49b)=>{const _0x2385e9=a0_0x59344a;try{console[_0x2385e9(0x1ed)](_0x4e401b[_0x2385e9(0x157)]);const {prod_cat:_0x4bb5db,identity:_0xf09059,valueData:_0x1d5112}=_0x4e401b[_0x2385e9(0x157)];let _0x50f50b;switch(_0x4bb5db){case'fg':if(_0xf09059==_0x2385e9(0x1d0))_0x50f50b=await product['aggregate']([{'$match':{'product_category':_0x2385e9(0x1d1),'brand':_0x1d5112}}]);else _0xf09059==_0x2385e9(0x1c5)&&(_0x50f50b=await product[_0x2385e9(0x1b4)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x1d5112}}]));break;case'rm':if(_0xf09059==_0x2385e9(0x1d0))_0x50f50b=await product[_0x2385e9(0x1b4)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x1d5112}}]);else _0xf09059==_0x2385e9(0x1c5)&&(_0x50f50b=await product[_0x2385e9(0x1b4)]([{'$match':{'product_category':_0x2385e9(0x18e),'category':_0x1d5112}}]));break;}_0x1ee49b[_0x2385e9(0x187)](_0x50f50b);}catch(_0x12ff14){_0x1ee49b[_0x2385e9(0x187)]({'message':_0x12ff14[_0x2385e9(0x212)]});}}),router[a0_0x59344a(0x210)](a0_0x59344a(0x1a4),auth,async(_0x5f133d,_0xe9b9d7)=>{const _0x5e7651=a0_0x59344a;try{const _0x4f59d0=_0x5f133d[_0x5e7651(0x1e2)]['id'],{copies:_0x5521db,typeofbarcode:_0x454b6b}=_0x5f133d[_0x5e7651(0x157)];var _0xaca9bf=await product[_0x5e7651(0x161)](_0x4f59d0);const _0x2affd3=_0x3bb50b=>_0x3bb50b*0x48,_0x376aba={'width':0x3,'height':0x1},_0xc06bbc=new PDFDocument({'margin':_0x2affd3(0.75),'size':[_0x2affd3(_0x376aba[_0x5e7651(0x1cd)]),_0x2affd3(_0x376aba['height'])],'bufferPages':!![]}),_0x2b0db3=_0x5521db,_0x36f9d7=_0xaca9bf[_0x5e7651(0x1ad)],_0x885c14=_0xaca9bf[_0x5e7651(0x173)],_0x5ddc87=_0xaca9bf['secondary_code'],_0x4f3208=_0xaca9bf[_0x5e7651(0x1f5)];let _0x39ba77;switch(_0x454b6b){case'1':_0x39ba77=_0x885c14;break;case'2':_0x39ba77=_0x5ddc87;break;case'3':_0x39ba77=_0x4f3208;break;}const _0x5b6906={'width':0xd2,'height':0x64},_0x17240c={'width':_0x2affd3(_0x376aba[_0x5e7651(0x1cd)]),'height':_0x2affd3(_0x376aba[_0x5e7651(0x170)])};for(let _0x3d3395=0x1;_0x3d3395<=_0x2b0db3;_0x3d3395++){const _0x5df9df=new Canvas();JsBarcode(_0x5df9df,_0x39ba77,{'format':_0x5e7651(0x200),'height':_0x5b6906[_0x5e7651(0x170)],'displayValue':!![],'text':_0x39ba77});const _0x4f36de=_0x5df9df[_0x5e7651(0x182)](),_0x44ded5=_0x17240c[_0x5e7651(0x1cd)]/_0x5b6906[_0x5e7651(0x1cd)],_0x145208=_0x17240c[_0x5e7651(0x170)]/_0x5b6906[_0x5e7651(0x170)],_0x5509cd=Math[_0x5e7651(0x16f)](_0x44ded5,_0x145208),_0x25fff0=_0x5b6906[_0x5e7651(0x1cd)]*_0x5509cd,_0x3a3536=_0x5b6906[_0x5e7651(0x170)]*_0x5509cd,_0x8c7443=(_0x17240c[_0x5e7651(0x1cd)]-_0x25fff0)/0x2,_0x4acfad=(_0x17240c[_0x5e7651(0x170)]-_0x3a3536)/0x2;_0xc06bbc[_0x5e7651(0x188)](_0x4f36de,_0x8c7443,_0x4acfad,{'width':_0x25fff0,'height':_0x3a3536}),_0x3d3395!=_0x2b0db3&&_0xc06bbc[_0x5e7651(0x1e7)]();}const _0x4f4e1b=[];_0xc06bbc['on'](_0x5e7651(0x215),_0x4f4e1b[_0x5e7651(0x1de)][_0x5e7651(0x1a7)](_0x4f4e1b)),_0xc06bbc['on'](_0x5e7651(0x20c),()=>{const _0x5bd6e2=_0x5e7651,_0x116702=Buffer[_0x5bd6e2(0x178)](_0x4f4e1b),_0x331538=_0x116702['toString']('base64');_0xe9b9d7[_0x5bd6e2(0x187)]({'pdfContent':_0x331538});}),_0xc06bbc['end']();}catch(_0x13a596){_0xe9b9d7['json']({'message':_0x13a596['message']});}}),module[a0_0x59344a(0x186)]=router;