function a0_0x5943(){var _0x4232b5=['type','$name','back','getFullYear','render','invoice','return_qty','$product_details.primary_code','German','customers','paid_amount','$product_details.bay','master','$product_details.product_stock','new\x20new_data','body','product_code_QA','primary_code_QA','name','product_name_QA','product_stock','warehouse_name','$product_details._id','530248SoEDEm','bay','8731400VBsHjj','payment\x20successfull','QA\x20Warehouse','English','exports','types','language','subtract','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Arabic\x20(ae)','map','Return\x20Rooms','Spanish','stock','json','get','9NriwYB','floorlevel','findOne','2bwAeba','Portuguese\x20(BR)','old_data','24WPDtGo','errors','/view','1778035HwjdjS','save','Portuguese','email','182732PTlzAr','product_code','English\x20(US)','product_details','stocks_QA','$product_details','ToWarehouse','sale_qty','Arabic','post','French','bin','success','string','sales_quantity','sales_quantity_QA','$product_details.storage','old_warehouse_data','slice','stocks','../middleware/auth','Enabled','$product_details.floorlevel','flash','redirect','express','$product_details.product_name','$product_details.secondary_code','ToRoom','$product_details.product_code','secondary_code','/sales_return/view','params','status','findById','$product_details.bin','$product_details.type','191954iKXfkn','customer','date','log','return_sale','suppliers','user','1986229HlQEZt','product_name','forEach','Chinese','amount','../models/all_models','Sale\x20Return','secondary_code_QA','430278LHcziE','due_amount','purchase\x20return\x20successfully','primary_code','sales_return_invoice','sales_return_finished','getMonth','note','return_qty_QA','Hindi','message','return_sale_QA','aggregate','find'];a0_0x5943=function(){return _0x4232b5;};return a0_0x5943();}var a0_0x167233=a0_0x1f26;function a0_0x1f26(_0x33d22c,_0x18d0bd){var _0x5943be=a0_0x5943();return a0_0x1f26=function(_0x1f269a,_0x23702b){_0x1f269a=_0x1f269a-0x162;var _0x1cfc74=_0x5943be[_0x1f269a];return _0x1cfc74;},a0_0x1f26(_0x33d22c,_0x18d0bd);}(function(_0x51f9a3,_0x151a45){var _0x2a2800=a0_0x1f26,_0x4a2831=_0x51f9a3();while(!![]){try{var _0x4fa453=parseInt(_0x2a2800(0x19d))/0x1*(parseInt(_0x2a2800(0x1cc))/0x2)+-parseInt(_0x2a2800(0x1a0))/0x3*(-parseInt(_0x2a2800(0x1a7))/0x4)+parseInt(_0x2a2800(0x1a3))/0x5+-parseInt(_0x2a2800(0x163))/0x6+parseInt(_0x2a2800(0x1d3))/0x7+parseInt(_0x2a2800(0x188))/0x8*(-parseInt(_0x2a2800(0x19a))/0x9)+-parseInt(_0x2a2800(0x18a))/0xa;if(_0x4fa453===_0x151a45)break;else _0x4a2831['push'](_0x4a2831['shift']());}catch(_0x50ed42){_0x4a2831['push'](_0x4a2831['shift']());}}}(a0_0x5943,0x2d526));const express=require(a0_0x167233(0x1c0)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x167233(0x1d8)),auth=require(a0_0x167233(0x1bb)),users=require('../public/language/languages.json');router[a0_0x167233(0x199)](a0_0x167233(0x1a2),auth,async(_0x28b209,_0x40ce33)=>{var _0x13baf0=a0_0x167233;try{const {username:_0x54671a,email:_0x54e731,role:_0x495e40}=_0x28b209[_0x13baf0(0x1d2)],_0x14a77f=_0x28b209['user'],_0x24525f=await profile['findOne']({'email':_0x14a77f['email']}),_0x8153a=await master_shop[_0x13baf0(0x170)](),_0x46a453=await sales_return_finished[_0x13baf0(0x16f)]([{'$lookup':{'from':_0x13baf0(0x17a),'localField':'customer','foreignField':_0x13baf0(0x183),'as':'customer_docs'}},{'$unwind':'$customer_docs'}]);if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x1a9)){var _0xc0b4cd=users[_0x13baf0(0x18d)];console['log'](_0xc0b4cd);}else{if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x16c))var _0xc0b4cd=users['Hindi'];else{if(_0x8153a[0x0][_0x13baf0(0x190)]=='German')var _0xc0b4cd=users[_0x13baf0(0x179)];else{if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x196))var _0xc0b4cd=users[_0x13baf0(0x196)];else{if(_0x8153a[0x0][_0x13baf0(0x190)]=='French')var _0xc0b4cd=users[_0x13baf0(0x1b1)];else{if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x19e))var _0xc0b4cd=users['Portuguese'];else{if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x1d6))var _0xc0b4cd=users['Chinese'];else{if(_0x8153a[0x0][_0x13baf0(0x190)]==_0x13baf0(0x193))var _0xc0b4cd=users[_0x13baf0(0x1af)];}}}}}}}_0x40ce33[_0x13baf0(0x175)](_0x13baf0(0x168),{'success':_0x28b209['flash'](_0x13baf0(0x1b3)),'errors':_0x28b209[_0x13baf0(0x1be)]('errors'),'role':_0x14a77f,'profile':_0x24525f,'master_shop':_0x8153a,'user':_0x46a453,'language':_0xc0b4cd});}catch(_0x1ec687){console['log'](_0x1ec687);}}),router[a0_0x167233(0x199)]('/view/:id',auth,async(_0x28515e,_0x33d63f)=>{var _0x31fdb0=a0_0x167233;try{const {username:_0x4d6444,email:_0x5a8f1d,role:_0x4dcca1}=_0x28515e['user'],_0x142150=_0x28515e['user'],_0x1adf8c=await profile[_0x31fdb0(0x19c)]({'email':_0x142150['email']}),_0xb50b=await master_shop['find']();console[_0x31fdb0(0x1cf)](_0x31fdb0(0x17d),_0xb50b);const _0x10524a=_0x28515e[_0x31fdb0(0x1c7)]['id'];console['log'](_0x10524a);var _0x3fd742=[_0x31fdb0(0x195)];const _0x27e4d2=await sales_return_finished['findById'](_0x10524a),_0x18198a=await warehouse[_0x31fdb0(0x16f)]([{'$match':{'name':_0x27e4d2[_0x31fdb0(0x1ad)],'room':_0x27e4d2['ToRoom']}},{'$unwind':_0x31fdb0(0x1ac)},{'$group':{'_id':_0x31fdb0(0x187),'name':{'$first':_0x31fdb0(0x1c1)},'product_stock':{'$first':_0x31fdb0(0x17e)},'bay':{'$first':_0x31fdb0(0x17c)},'bin':{'$first':_0x31fdb0(0x1ca)},'type':{'$first':_0x31fdb0(0x1cb)},'floorlevel':{'$first':_0x31fdb0(0x1bd)},'primary_code':{'$first':_0x31fdb0(0x178)},'secondary_code':{'$first':_0x31fdb0(0x1c2)},'product_code':{'$first':_0x31fdb0(0x1c4)},'storage':{'$first':_0x31fdb0(0x1b7)},'rack':{'$first':'$product_details.rack'}}}]);console['log'](_0x18198a);const _0x516ecc=await warehouse[_0x31fdb0(0x16f)]([{'$match':{'status':_0x31fdb0(0x1bc),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x31fdb0(0x172),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x50540e=await warehouse[_0x31fdb0(0x16f)]([{'$match':{'status':_0x31fdb0(0x1bc),'name':_0x31fdb0(0x18c)}},{'$group':{'_id':_0x31fdb0(0x172),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x194f11=await product['find']({});if(_0xb50b[0x0][_0x31fdb0(0x190)]==_0x31fdb0(0x1a9)){var _0x531a8b=users['English'];console[_0x31fdb0(0x1cf)](_0x531a8b);}else{if(_0xb50b[0x0][_0x31fdb0(0x190)]==_0x31fdb0(0x16c))var _0x531a8b=users[_0x31fdb0(0x16c)];else{if(_0xb50b[0x0][_0x31fdb0(0x190)]==_0x31fdb0(0x179))var _0x531a8b=users['German'];else{if(_0xb50b[0x0][_0x31fdb0(0x190)]==_0x31fdb0(0x196))var _0x531a8b=users[_0x31fdb0(0x196)];else{if(_0xb50b[0x0]['language']=='French')var _0x531a8b=users[_0x31fdb0(0x1b1)];else{if(_0xb50b[0x0]['language']==_0x31fdb0(0x19e))var _0x531a8b=users['Portuguese'];else{if(_0xb50b[0x0][_0x31fdb0(0x190)]=='Chinese')var _0x531a8b=users[_0x31fdb0(0x1d6)];else{if(_0xb50b[0x0][_0x31fdb0(0x190)]==_0x31fdb0(0x193))var _0x531a8b=users['Arabic'];}}}}}}}_0x33d63f[_0x31fdb0(0x175)]('return_sale_edit_finished',{'success':_0x28515e['flash'](_0x31fdb0(0x1b3)),'errors':_0x28515e[_0x31fdb0(0x1be)](_0x31fdb0(0x1a1)),'role':_0x142150,'profile':_0x1adf8c,'master_shop':_0xb50b,'user':_0x27e4d2,'stock':_0x18198a,'unit':_0x194f11,'language':_0x531a8b,'warehouses':_0x516ecc,'rooms':_0x3fd742,'warehouse_QA':_0x50540e});}catch(_0x3d2ad5){console[_0x31fdb0(0x1cf)](_0x3d2ad5);}}),router[a0_0x167233(0x1b0)]('/view/:id',auth,async(_0x57d280,_0x1bb874)=>{var _0x3d30eb=a0_0x167233;if(_0x57d280[_0x3d30eb(0x180)]['for_categorize']=='QA')try{const _0x4e9627=_0x57d280['params']['id'],_0x2b2178=await sales_return['findOne']({'invoice':_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x176)]}),_0x4e699e=await warehouse[_0x3d30eb(0x19c)]({'name':_0x2b2178['ToWarehouse'],'room':_0x2b2178[_0x3d30eb(0x1c3)]}),{invoice:_0x3e861f,customer:_0x24beaf,date:_0x1b2d57,warehouse_name:_0x11ca55,product_name:_0x278e66,primary_code:_0x4db95b,secondary_code:_0x5a5770,product_code:_0x473aa1,sales_quantity:_0x1ea6e2,stocks:_0x28133d,return_qty:_0x2c29bf,note:_0xf2002b,to_warehouse_name_QA:_0x11ce6b,to_Room_name_QA:_0x2533ff}=_0x57d280[_0x3d30eb(0x180)];if(typeof product_name_QA==_0x3d30eb(0x1b4))var _0x3e95bb=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x184)]],_0xa37d88=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x182)]],_0x14ef71=[_0x57d280['body'][_0x3d30eb(0x162)]],_0x2b8da5=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x181)]],_0x11d5aa=[_0x57d280['body'][_0x3d30eb(0x1b6)]],_0x1d6982=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1ab)]],_0x559ade=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x16b)]];else var _0x3e95bb=[..._0x57d280['body']['product_name_QA']],_0xa37d88=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x182)]],_0x14ef71=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x162)]],_0x2b8da5=[..._0x57d280['body']['product_code_QA']],_0x11d5aa=[..._0x57d280['body'][_0x3d30eb(0x1b6)]],_0x1d6982=[..._0x57d280['body']['stocks_QA']],_0x559ade=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x16b)]];const _0x3ee264=_0x3e95bb[_0x3d30eb(0x194)](_0x5302f3=>{return _0x5302f3={'product_name':_0x5302f3};});_0xa37d88[_0x3d30eb(0x1d5)]((_0x2ae82c,_0x21f241)=>{var _0x321fa8=_0x3d30eb;_0x3ee264[_0x21f241][_0x321fa8(0x166)]=_0x2ae82c;}),_0x14ef71[_0x3d30eb(0x1d5)]((_0x11872e,_0x3fb4a1)=>{var _0x29c18b=_0x3d30eb;_0x3ee264[_0x3fb4a1][_0x29c18b(0x1c5)]=_0x11872e;}),_0x2b8da5['forEach']((_0x167914,_0x5104f9)=>{var _0x11fe09=_0x3d30eb;_0x3ee264[_0x5104f9][_0x11fe09(0x1a8)]=_0x167914;}),_0x11d5aa['forEach']((_0x25756b,_0x11eb93)=>{var _0x328f21=_0x3d30eb;_0x3ee264[_0x11eb93][_0x328f21(0x1ae)]=_0x25756b;}),_0x1d6982[_0x3d30eb(0x1d5)]((_0x4dbee0,_0x3fc100)=>{var _0x19c0c2=_0x3d30eb;_0x3ee264[_0x3fc100][_0x19c0c2(0x197)]=_0x4dbee0;}),_0x559ade[_0x3d30eb(0x1d5)]((_0x31ca8b,_0x4fdf54)=>{var _0x442d7e=_0x3d30eb;_0x3ee264[_0x4fdf54][_0x442d7e(0x177)]=_0x31ca8b;}),_0x2b2178[_0x3d30eb(0x16e)][_0x3d30eb(0x1d5)](_0x1e8116=>{var _0x40be72=_0x3d30eb;const _0x57bf33=_0x4e699e[_0x40be72(0x1aa)][_0x40be72(0x194)](_0x2c5f92=>{var _0x573bc4=_0x40be72;_0x2c5f92[_0x573bc4(0x1d4)]==_0x1e8116['product_name']&&(_0x2c5f92[_0x573bc4(0x185)]=parseInt(_0x2c5f92['product_stock'])+parseInt(_0x1e8116['return_qty']));});}),await _0x4e699e['save'](),_0x2b2178[_0x3d30eb(0x176)]=_0x3e861f,_0x2b2178['customer']=_0x24beaf,_0x2b2178['date']=_0x1b2d57,_0x2b2178[_0x3d30eb(0x186)]=_0x11ca55,_0x2b2178['return_sale_QA']=_0x3ee264,_0x2b2178['note']=_0xf2002b,_0x2b2178[_0x3d30eb(0x1ad)]=_0x11ce6b,_0x2b2178[_0x3d30eb(0x1c3)]=_0x2533ff;const _0x2a396f=await _0x2b2178[_0x3d30eb(0x1a4)](),_0x35d248=await c_payment_data[_0x3d30eb(0x19c)]({'invoice':_0x57d280[_0x3d30eb(0x180)]['invoice'],'reason':_0x3d30eb(0x1d9)});_0x35d248['suppliers']=_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1d1)],_0x35d248[_0x3d30eb(0x1ce)]=_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1ce)],await _0x35d248[_0x3d30eb(0x1a4)](),_0x57d280[_0x3d30eb(0x1be)](_0x3d30eb(0x1b3),_0x3d30eb(0x165)),_0x1bb874[_0x3d30eb(0x1bf)]('/sales_return_finished/view');}catch(_0x436f88){console[_0x3d30eb(0x1cf)](_0x436f88),_0x1bb874[_0x3d30eb(0x1c8)](0xc8)['json']({'message':_0x436f88[_0x3d30eb(0x16d)]});}else try{const _0x13c342=_0x57d280[_0x3d30eb(0x1c7)]['id'];console['log'](_0x13c342);const _0x349550=await sales_return[_0x3d30eb(0x19c)]({'invoice':_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x176)]});console[_0x3d30eb(0x1cf)](_0x3d30eb(0x19f),_0x349550);const _0x148afe=await warehouse[_0x3d30eb(0x19c)]({'name':_0x349550[_0x3d30eb(0x1ad)],'room':_0x349550[_0x3d30eb(0x1c3)]});console[_0x3d30eb(0x1cf)]('old_warehouse_data',_0x148afe);const {invoice:_0x256f86,customer:_0x3a8fb5,date:_0x31771d,warehouse_name:_0x273470,product_name:_0x4888f8,primary_code:_0x54e934,secondary_code:_0x58ddb7,product_code:_0x44f123,sales_quantity:_0x40b021,stocks:_0x1ffec1,return_qty:_0x324e28,note:_0x45ae76,to_warehouse_name:_0xe850f8,to_Room_name:_0x423d06}=_0x57d280['body'];console[_0x3d30eb(0x1cf)](_0x57d280[_0x3d30eb(0x180)]);if(typeof _0x4888f8=='string')var _0x3e95bb=[_0x57d280['body'][_0x3d30eb(0x1d4)]],_0xa37d88=[_0x57d280['body'][_0x3d30eb(0x166)]],_0x14ef71=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1c5)]],_0x2b8da5=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1a8)]],_0x11d5aa=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1b5)]],_0x1d6982=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1ba)]],_0x559ade=[_0x57d280['body']['return_qty']],_0x1b29fe=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x189)]],_0x595f1a=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1b2)]],_0x386ba3=[_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x18f)]],_0x3c9afe=[_0x57d280[_0x3d30eb(0x180)]['floorlevel']];else var _0x3e95bb=[..._0x57d280[_0x3d30eb(0x180)]['product_name']],_0xa37d88=[..._0x57d280[_0x3d30eb(0x180)]['primary_code']],_0x14ef71=[..._0x57d280['body']['secondary_code']],_0x2b8da5=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1a8)]],_0x11d5aa=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1b5)]],_0x1d6982=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1ba)]],_0x559ade=[..._0x57d280[_0x3d30eb(0x180)]['return_qty']],_0x1b29fe=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x189)]],_0x595f1a=[..._0x57d280[_0x3d30eb(0x180)]['bin']],_0x386ba3=[..._0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x18f)]],_0x3c9afe=[..._0x57d280['body'][_0x3d30eb(0x19b)]];const _0x4bbbba=_0x3e95bb[_0x3d30eb(0x194)](_0x19af0b=>{return _0x19af0b={'product_name':_0x19af0b};});_0xa37d88[_0x3d30eb(0x1d5)]((_0x58900a,_0x31d529)=>{var _0x20aeac=_0x3d30eb;_0x4bbbba[_0x31d529][_0x20aeac(0x166)]=_0x58900a;}),_0x14ef71[_0x3d30eb(0x1d5)]((_0x266263,_0x1fd780)=>{var _0x2a9873=_0x3d30eb;_0x4bbbba[_0x1fd780][_0x2a9873(0x1c5)]=_0x266263;}),_0x2b8da5[_0x3d30eb(0x1d5)]((_0x261f2e,_0x3c27e9)=>{_0x4bbbba[_0x3c27e9]['product_code']=_0x261f2e;}),_0x11d5aa[_0x3d30eb(0x1d5)]((_0x8b33f2,_0x1272e8)=>{var _0xfb521f=_0x3d30eb;_0x4bbbba[_0x1272e8][_0xfb521f(0x1ae)]=_0x8b33f2;}),_0x1d6982[_0x3d30eb(0x1d5)]((_0x270603,_0x4a0a81)=>{var _0x3f9bb0=_0x3d30eb;_0x4bbbba[_0x4a0a81][_0x3f9bb0(0x197)]=_0x270603;}),_0x559ade['forEach']((_0x26b8c7,_0x5c3edc)=>{var _0x1a4b75=_0x3d30eb;_0x4bbbba[_0x5c3edc][_0x1a4b75(0x177)]=_0x26b8c7;}),_0x1b29fe['forEach']((_0x12a00c,_0xee8710)=>{var _0x335c84=_0x3d30eb;_0x4bbbba[_0xee8710][_0x335c84(0x189)]=_0x12a00c;}),_0x595f1a[_0x3d30eb(0x1d5)]((_0x27ae01,_0x2d0912)=>{_0x4bbbba[_0x2d0912]['bin']=_0x27ae01;}),_0x386ba3[_0x3d30eb(0x1d5)]((_0x3bf64c,_0x35429a)=>{var _0x39c28a=_0x3d30eb;_0x4bbbba[_0x35429a][_0x39c28a(0x171)]=_0x3bf64c;}),_0x3c9afe['forEach']((_0x47b115,_0x4b80c4)=>{var _0x5766cf=_0x3d30eb;_0x4bbbba[_0x4b80c4][_0x5766cf(0x19b)]=_0x47b115;});var _0x38fdae=0x0;_0x4bbbba[_0x3d30eb(0x1d5)](_0x5904d1=>{var _0x7121a=_0x3d30eb;console[_0x7121a(0x1cf)]('foreach\x20newproduct',_0x5904d1),(parseInt(_0x5904d1[_0x7121a(0x1ae)])<parseInt(_0x5904d1[_0x7121a(0x177)])||parseInt(_0x5904d1[_0x7121a(0x197)])<parseInt(_0x5904d1[_0x7121a(0x177)])&&parseInt(_0x5904d1['sale_qty'])>parseInt(_0x5904d1[_0x7121a(0x177)])||parseInt(_0x5904d1['return_qty'])==0x0)&&_0x38fdae++;});if(_0x38fdae!=0x0)return _0x57d280[_0x3d30eb(0x1be)]('errors',_0x3d30eb(0x192)),_0x1bb874[_0x3d30eb(0x1bf)](_0x3d30eb(0x173));_0x349550[_0x3d30eb(0x1d0)][_0x3d30eb(0x1d5)](_0xaf1468=>{var _0x5675bb=_0x3d30eb;const _0x27307c=_0x148afe[_0x5675bb(0x1aa)]['map'](_0x8acf57=>{var _0x6aca35=_0x5675bb;_0x8acf57[_0x6aca35(0x1d4)]==_0xaf1468['product_name']&&_0x8acf57[_0x6aca35(0x19b)]==_0xaf1468[_0x6aca35(0x19b)]&&_0x8acf57[_0x6aca35(0x171)]==_0xaf1468[_0x6aca35(0x171)]&&_0x8acf57[_0x6aca35(0x1b2)]==_0xaf1468[_0x6aca35(0x1b2)]&&_0x8acf57['bay']==_0xaf1468[_0x6aca35(0x189)]&&(_0x8acf57[_0x6aca35(0x185)]=parseInt(_0x8acf57['product_stock'])+parseInt(_0xaf1468['return_qty']));});}),console['log'](_0x3d30eb(0x1b8),_0x148afe),await _0x148afe[_0x3d30eb(0x1a4)](),_0x349550['invoice']=_0x256f86,_0x349550[_0x3d30eb(0x1cd)]=_0x3a8fb5,_0x349550[_0x3d30eb(0x1ce)]=_0x31771d,_0x349550[_0x3d30eb(0x186)]=_0x273470,_0x349550[_0x3d30eb(0x1d0)]=_0x4bbbba,_0x349550[_0x3d30eb(0x16a)]=_0x45ae76,_0x349550['ToWarehouse']=_0xe850f8,_0x349550[_0x3d30eb(0x1c3)]=_0x423d06;const _0x256f79=await _0x349550['save']();console[_0x3d30eb(0x1cf)](_0x3d30eb(0x17f),_0x256f79);const _0x4a1c8d=await c_payment_data['findOne']({'invoice':_0x57d280[_0x3d30eb(0x180)]['invoice'],'reason':_0x3d30eb(0x1d9)});_0x4a1c8d[_0x3d30eb(0x1d1)]=_0x57d280[_0x3d30eb(0x180)][_0x3d30eb(0x1d1)],_0x4a1c8d[_0x3d30eb(0x1ce)]=_0x57d280['body']['date'],await _0x4a1c8d[_0x3d30eb(0x1a4)](),_0x57d280[_0x3d30eb(0x1be)](_0x3d30eb(0x1b3),_0x3d30eb(0x165)),_0x1bb874[_0x3d30eb(0x1bf)]('/sales_return/view');}catch(_0x3c5fbd){console[_0x3d30eb(0x1cf)](_0x3c5fbd),_0x1bb874[_0x3d30eb(0x1c8)](0xc8)[_0x3d30eb(0x198)]({'message':_0x3c5fbd['message']});}}),router[a0_0x167233(0x1b0)]('/give_payment/:id',auth,async(_0x273368,_0x247cea)=>{var _0x2d5565=a0_0x167233;try{const _0x21a53f=_0x273368[_0x2d5565(0x1c7)]['id'],{invoice:_0x51ad53,customer:_0xe37a71,payable_to_customer:_0x198d51,paid_amount:_0x40ddd7}=_0x273368['body'],_0x3f88eb=await sales_return[_0x2d5565(0x1c9)](_0x21a53f);console['log']('data',_0x3f88eb),console[_0x2d5565(0x1cf)](_0x198d51),console[_0x2d5565(0x1cf)](_0x40ddd7);var _0x27b7e8=_0x198d51-_0x40ddd7;console[_0x2d5565(0x1cf)](_0x2d5565(0x191),_0x27b7e8),_0x3f88eb[_0x2d5565(0x17b)]=parseFloat(_0x40ddd7)+parseFloat(_0x3f88eb[_0x2d5565(0x17b)]),_0x3f88eb[_0x2d5565(0x164)]=_0x27b7e8,console[_0x2d5565(0x1cf)](_0x3f88eb);const _0x1cacbf=await _0x3f88eb['save']();console[_0x2d5565(0x1cf)](0x1b207);const _0x14bbc1=await c_payment_data[_0x2d5565(0x19c)]({'invoice':_0x273368['body'][_0x2d5565(0x176)],'reason':_0x2d5565(0x1d9)});console[_0x2d5565(0x1cf)]('c_payment',_0x14bbc1),_0x14bbc1[_0x2d5565(0x1d7)]=_0x27b7e8,await _0x14bbc1[_0x2d5565(0x1a4)]();let _0x2ed6ae=new Date(),_0x1d8283=('0'+_0x2ed6ae['getDate']())[_0x2d5565(0x1b9)](-0x2),_0x31d574=('0'+(_0x2ed6ae[_0x2d5565(0x169)]()+0x1))[_0x2d5565(0x1b9)](-0x2),_0x1424b7=_0x2ed6ae[_0x2d5565(0x174)](),_0x104089=_0x1424b7+'-'+_0x31d574+'-'+_0x1d8283;const _0x28e3e8=new customer_payment({'invoice':_0x51ad53,'date':_0x1424b7+'-'+_0x31d574+'-'+_0x1d8283,'customer':_0xe37a71,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x40ddd7}),_0x39d99a=await _0x28e3e8[_0x2d5565(0x1a4)]();_0x273368[_0x2d5565(0x1be)]('success',_0x2d5565(0x18b)),_0x247cea[_0x2d5565(0x1bf)](_0x2d5565(0x1c6));}catch(_0x4395c3){console['log'](_0x4395c3);}}),router[a0_0x167233(0x199)]('/invoice/:id',auth,async(_0x65de5d,_0x5701c9)=>{var _0x1dd459=a0_0x167233;try{const {username:_0x36c89e,email:_0x4c42f2,role:_0x18225b}=_0x65de5d[_0x1dd459(0x1d2)],_0x527ee0=_0x65de5d[_0x1dd459(0x1d2)],_0xe282d5=await profile[_0x1dd459(0x19c)]({'email':_0x527ee0[_0x1dd459(0x1a6)]}),_0x28a4a6=await master_shop[_0x1dd459(0x170)]();console[_0x1dd459(0x1cf)](_0x1dd459(0x17d),_0x28a4a6);const _0x326c9d=_0x65de5d[_0x1dd459(0x1c7)]['id'],_0x6c82d7=await sales_return[_0x1dd459(0x1c9)](_0x326c9d);console[_0x1dd459(0x1cf)](_0x6c82d7);const _0x1d8a91=await customer[_0x1dd459(0x19c)]({'name':_0x6c82d7[_0x1dd459(0x1cd)]});console[_0x1dd459(0x1cf)](_0x1d8a91);if(_0x28a4a6[0x0][_0x1dd459(0x190)]==_0x1dd459(0x1a9)){var _0x2be7af=users[_0x1dd459(0x18d)];console[_0x1dd459(0x1cf)](_0x2be7af);}else{if(_0x28a4a6[0x0][_0x1dd459(0x190)]==_0x1dd459(0x16c))var _0x2be7af=users[_0x1dd459(0x16c)];else{if(_0x28a4a6[0x0][_0x1dd459(0x190)]==_0x1dd459(0x179))var _0x2be7af=users['German'];else{if(_0x28a4a6[0x0]['language']==_0x1dd459(0x196))var _0x2be7af=users[_0x1dd459(0x196)];else{if(_0x28a4a6[0x0]['language']==_0x1dd459(0x1b1))var _0x2be7af=users[_0x1dd459(0x1b1)];else{if(_0x28a4a6[0x0]['language']==_0x1dd459(0x19e))var _0x2be7af=users[_0x1dd459(0x1a5)];else{if(_0x28a4a6[0x0][_0x1dd459(0x190)]=='Chinese')var _0x2be7af=users[_0x1dd459(0x1d6)];else{if(_0x28a4a6[0x0][_0x1dd459(0x190)]==_0x1dd459(0x193))var _0x2be7af=users[_0x1dd459(0x1af)];}}}}}}}_0x5701c9[_0x1dd459(0x175)](_0x1dd459(0x167),{'success':_0x65de5d['flash']('success'),'errors':_0x65de5d[_0x1dd459(0x1be)]('errors'),'role':_0x527ee0,'profile':_0xe282d5,'master_shop':_0x28a4a6,'customers':_0x1d8a91,'sales':_0x6c82d7,'language':_0x2be7af});}catch(_0x6b50a2){console[_0x1dd459(0x1cf)](_0x6b50a2);}}),module[a0_0x167233(0x18e)]=router;