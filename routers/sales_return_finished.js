var a0_0x5b606a=a0_0x67c9;(function(_0x26f360,_0x5498a1){var _0x4e0e42=a0_0x67c9,_0x3b2c90=_0x26f360();while(!![]){try{var _0x437dda=parseInt(_0x4e0e42(0xed))/0x1*(parseInt(_0x4e0e42(0x123))/0x2)+parseInt(_0x4e0e42(0x102))/0x3+parseInt(_0x4e0e42(0x143))/0x4*(parseInt(_0x4e0e42(0xd2))/0x5)+-parseInt(_0x4e0e42(0x10d))/0x6+parseInt(_0x4e0e42(0x114))/0x7+parseInt(_0x4e0e42(0x13e))/0x8*(parseInt(_0x4e0e42(0x147))/0x9)+-parseInt(_0x4e0e42(0xe3))/0xa;if(_0x437dda===_0x5498a1)break;else _0x3b2c90['push'](_0x3b2c90['shift']());}catch(_0x24c162){_0x3b2c90['push'](_0x3b2c90['shift']());}}}(a0_0x1bef,0x1d8c4));const express=require(a0_0x5b606a(0x148)),app=express(),router=express[a0_0x5b606a(0xf5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x5b606a(0x117)),auth=require('../middleware/auth'),users=require(a0_0x5b606a(0x135));function a0_0x67c9(_0x811349,_0x4bcee9){var _0x1bef02=a0_0x1bef();return a0_0x67c9=function(_0x67c9ec,_0x58b36e){_0x67c9ec=_0x67c9ec-0xd0;var _0x3958f0=_0x1bef02[_0x67c9ec];return _0x3958f0;},a0_0x67c9(_0x811349,_0x4bcee9);}router['get'](a0_0x5b606a(0xda),auth,async(_0x5891fc,_0x5d5480)=>{var _0x217134=a0_0x5b606a;try{const {username:_0x1b44a7,email:_0x5c8da2,role:_0x1956ec}=_0x5891fc[_0x217134(0xd9)],_0x1b47ce=_0x5891fc[_0x217134(0xd9)],_0x40102c=await profile['findOne']({'email':_0x1b47ce[_0x217134(0xf6)]}),_0x59d9bb=await master_shop['find'](),_0x4737dc=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x217134(0xdf),'localField':_0x217134(0x11e),'foreignField':_0x217134(0xf8),'as':_0x217134(0x13f)}},{'$unwind':_0x217134(0x113)}]);if(_0x59d9bb[0x0][_0x217134(0x121)]==_0x217134(0x130)){var _0x5784af=users[_0x217134(0x149)];console['log'](_0x5784af);}else{if(_0x59d9bb[0x0][_0x217134(0x121)]==_0x217134(0xd7))var _0x5784af=users[_0x217134(0xd7)];else{if(_0x59d9bb[0x0][_0x217134(0x121)]=='German')var _0x5784af=users['German'];else{if(_0x59d9bb[0x0]['language']=='Spanish')var _0x5784af=users[_0x217134(0x12f)];else{if(_0x59d9bb[0x0]['language']==_0x217134(0x128))var _0x5784af=users[_0x217134(0x128)];else{if(_0x59d9bb[0x0][_0x217134(0x121)]=='Portuguese\x20(BR)')var _0x5784af=users[_0x217134(0x120)];else{if(_0x59d9bb[0x0][_0x217134(0x121)]=='Chinese')var _0x5784af=users['Chinese'];else{if(_0x59d9bb[0x0][_0x217134(0x121)]==_0x217134(0xdd))var _0x5784af=users['Arabic'];}}}}}}}_0x5d5480[_0x217134(0x111)](_0x217134(0x108),{'success':_0x5891fc[_0x217134(0x107)](_0x217134(0xdc)),'errors':_0x5891fc[_0x217134(0x107)]('errors'),'role':_0x1b47ce,'profile':_0x40102c,'master_shop':_0x59d9bb,'user':_0x4737dc,'language':_0x5784af});}catch(_0x570113){console['log'](_0x570113);}}),router[a0_0x5b606a(0x10f)](a0_0x5b606a(0xe6),auth,async(_0x3fcbb3,_0x47b4e1)=>{var _0x16e149=a0_0x5b606a;try{const {username:_0x25a19c,email:_0x13fa41,role:_0x50fcc0}=_0x3fcbb3[_0x16e149(0xd9)],_0x3cabc6=_0x3fcbb3[_0x16e149(0xd9)],_0x527711=await profile[_0x16e149(0x11b)]({'email':_0x3cabc6['email']}),_0x399a67=await master_shop[_0x16e149(0xef)]();console[_0x16e149(0x10a)](_0x16e149(0x125),_0x399a67);const _0x3eda44=_0x3fcbb3[_0x16e149(0xd4)]['id'];console['log'](_0x3eda44);var _0x581bd8=[_0x16e149(0x126)];const _0x5402d5=await sales_return_finished['findById'](_0x3eda44),_0x3da067=await warehouse[_0x16e149(0xec)]([{'$match':{'name':_0x5402d5[_0x16e149(0xfc)],'room':_0x5402d5[_0x16e149(0x12b)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x16e149(0xe8),'name':{'$first':_0x16e149(0x129)},'product_stock':{'$first':_0x16e149(0x101)},'bay':{'$first':_0x16e149(0x13d)},'bin':{'$first':_0x16e149(0x144)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x16e149(0x12a)},'primary_code':{'$first':_0x16e149(0x146)},'secondary_code':{'$first':_0x16e149(0x11f)},'product_code':{'$first':_0x16e149(0x118)},'storage':{'$first':_0x16e149(0x103)},'rack':{'$first':_0x16e149(0x140)}}}]);console[_0x16e149(0x10a)](_0x3da067);const _0x366360=await warehouse[_0x16e149(0xec)]([{'$match':{'status':_0x16e149(0xfa),'warehouse_category':_0x16e149(0xfd)}},{'$group':{'_id':_0x16e149(0x134),'name':{'$first':_0x16e149(0x134)}}},{'$sort':{'name':0x1}}]),_0x29cb11=await warehouse['aggregate']([{'$match':{'status':_0x16e149(0xfa),'name':_0x16e149(0x13c)}},{'$group':{'_id':_0x16e149(0x134),'name':{'$first':_0x16e149(0x134)}}},{'$sort':{'name':0x1}}]),_0x309ada=await product[_0x16e149(0xef)]({});if(_0x399a67[0x0]['language']==_0x16e149(0x130)){var _0x3113e0=users['English'];console[_0x16e149(0x10a)](_0x3113e0);}else{if(_0x399a67[0x0][_0x16e149(0x121)]==_0x16e149(0xd7))var _0x3113e0=users['Hindi'];else{if(_0x399a67[0x0][_0x16e149(0x121)]==_0x16e149(0xe5))var _0x3113e0=users[_0x16e149(0xe5)];else{if(_0x399a67[0x0][_0x16e149(0x121)]==_0x16e149(0x12f))var _0x3113e0=users[_0x16e149(0x12f)];else{if(_0x399a67[0x0][_0x16e149(0x121)]==_0x16e149(0x128))var _0x3113e0=users['French'];else{if(_0x399a67[0x0]['language']==_0x16e149(0x10b))var _0x3113e0=users[_0x16e149(0x120)];else{if(_0x399a67[0x0][_0x16e149(0x121)]==_0x16e149(0x124))var _0x3113e0=users[_0x16e149(0x124)];else{if(_0x399a67[0x0][_0x16e149(0x121)]=='Arabic\x20(ae)')var _0x3113e0=users[_0x16e149(0xe2)];}}}}}}}_0x47b4e1[_0x16e149(0x111)]('return_sale_edit_finished',{'success':_0x3fcbb3[_0x16e149(0x107)](_0x16e149(0xdc)),'errors':_0x3fcbb3[_0x16e149(0x107)](_0x16e149(0x11c)),'role':_0x3cabc6,'profile':_0x527711,'master_shop':_0x399a67,'user':_0x5402d5,'stock':_0x3da067,'unit':_0x309ada,'language':_0x3113e0,'warehouses':_0x366360,'rooms':_0x581bd8,'warehouse_QA':_0x29cb11});}catch(_0x4c0f9c){console['log'](_0x4c0f9c);}}),router['post'](a0_0x5b606a(0xe6),auth,async(_0x3460f6,_0x590ce2)=>{var _0x17297e=a0_0x5b606a;if(_0x3460f6[_0x17297e(0x115)][_0x17297e(0xee)]=='QA')try{const _0x2bbca4=_0x3460f6['params']['id'],_0x1c4ab1=await sales_return[_0x17297e(0x11b)]({'invoice':_0x3460f6[_0x17297e(0x115)][_0x17297e(0xe1)]}),_0x2c87ce=await warehouse['findOne']({'name':_0x1c4ab1[_0x17297e(0xfc)],'room':_0x1c4ab1['ToRoom']}),{invoice:_0x4c91df,customer:_0x652a44,date:_0x2b9713,warehouse_name:_0x9668a3,product_name:_0x154450,primary_code:_0xeb0546,secondary_code:_0x51c4ba,product_code:_0x48183e,sales_quantity:_0x33bd2c,stocks:_0x578fe9,return_qty:_0x297a09,note:_0x52b174,to_warehouse_name_QA:_0x4469bb,to_Room_name_QA:_0x224a73}=_0x3460f6[_0x17297e(0x115)];if(typeof product_name_QA==_0x17297e(0x13b))var _0x118679=[_0x3460f6[_0x17297e(0x115)]['product_name_QA']],_0x4b2a7b=[_0x3460f6[_0x17297e(0x115)]['primary_code_QA']],_0x124fcf=[_0x3460f6[_0x17297e(0x115)]['secondary_code_QA']],_0x499a41=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0x112)]],_0xac60f6=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0x11d)]],_0x532d5e=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0xd6)]],_0x1b306e=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0xd0)]];else var _0x118679=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x100)]],_0x4b2a7b=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x12c)]],_0x124fcf=[..._0x3460f6['body'][_0x17297e(0x122)]],_0x499a41=[..._0x3460f6['body'][_0x17297e(0x112)]],_0xac60f6=[..._0x3460f6[_0x17297e(0x115)]['sales_quantity_QA']],_0x532d5e=[..._0x3460f6['body']['stocks_QA']],_0x1b306e=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0xd0)]];const _0x14d73f=_0x118679[_0x17297e(0xde)](_0xcf978d=>{return _0xcf978d={'product_name':_0xcf978d};});_0x4b2a7b[_0x17297e(0x110)]((_0x19a5a0,_0x3e21ec)=>{var _0x17314b=_0x17297e;_0x14d73f[_0x3e21ec][_0x17314b(0x14d)]=_0x19a5a0;}),_0x124fcf[_0x17297e(0x110)]((_0x23844c,_0x42e0aa)=>{var _0x5f1625=_0x17297e;_0x14d73f[_0x42e0aa][_0x5f1625(0xfb)]=_0x23844c;}),_0x499a41['forEach']((_0x39d7ea,_0x32f61d)=>{var _0xfc1391=_0x17297e;_0x14d73f[_0x32f61d][_0xfc1391(0x139)]=_0x39d7ea;}),_0xac60f6['forEach']((_0x3f73b9,_0x4eeb3a)=>{_0x14d73f[_0x4eeb3a]['sale_qty']=_0x3f73b9;}),_0x532d5e[_0x17297e(0x110)]((_0x451ce2,_0x1d5f56)=>{_0x14d73f[_0x1d5f56]['stock']=_0x451ce2;}),_0x1b306e[_0x17297e(0x110)]((_0x3f1241,_0x33fb0a)=>{_0x14d73f[_0x33fb0a]['return_qty']=_0x3f1241;}),_0x1c4ab1[_0x17297e(0x11a)][_0x17297e(0x110)](_0x153c1a=>{var _0x162db1=_0x17297e;const _0x5e9c0e=_0x2c87ce[_0x162db1(0xdb)]['map'](_0x988402=>{var _0x1d5ff5=_0x162db1;_0x988402[_0x1d5ff5(0xf4)]==_0x153c1a[_0x1d5ff5(0xf4)]&&(_0x988402[_0x1d5ff5(0xf3)]=parseInt(_0x988402['product_stock'])+parseInt(_0x153c1a['return_qty']));});}),await _0x2c87ce[_0x17297e(0x141)](),_0x1c4ab1['invoice']=_0x4c91df,_0x1c4ab1[_0x17297e(0x11e)]=_0x652a44,_0x1c4ab1[_0x17297e(0x145)]=_0x2b9713,_0x1c4ab1[_0x17297e(0x14c)]=_0x9668a3,_0x1c4ab1['return_sale_QA']=_0x14d73f,_0x1c4ab1[_0x17297e(0xe9)]=_0x52b174,_0x1c4ab1[_0x17297e(0xfc)]=_0x4469bb,_0x1c4ab1[_0x17297e(0x12b)]=_0x224a73;const _0x546ba5=await _0x1c4ab1[_0x17297e(0x141)](),_0x4c2e7a=await c_payment_data[_0x17297e(0x11b)]({'invoice':_0x3460f6[_0x17297e(0x115)]['invoice'],'reason':_0x17297e(0xf7)});_0x4c2e7a[_0x17297e(0x106)]=_0x3460f6[_0x17297e(0x115)][_0x17297e(0x106)],_0x4c2e7a[_0x17297e(0x145)]=_0x3460f6[_0x17297e(0x115)]['date'],await _0x4c2e7a['save'](),_0x3460f6[_0x17297e(0x107)]('success',_0x17297e(0xe7)),_0x590ce2[_0x17297e(0xd3)](_0x17297e(0x109));}catch(_0x540846){console['log'](_0x540846),_0x590ce2[_0x17297e(0x104)](0xc8)[_0x17297e(0x119)]({'message':_0x540846[_0x17297e(0xf9)]});}else try{const _0x18b747=_0x3460f6[_0x17297e(0xd4)]['id'];console['log'](_0x18b747);const _0x867530=await sales_return[_0x17297e(0x11b)]({'invoice':_0x3460f6[_0x17297e(0x115)][_0x17297e(0xe1)]});console[_0x17297e(0x10a)](_0x17297e(0x131),_0x867530);const _0x55f910=await warehouse[_0x17297e(0x11b)]({'name':_0x867530[_0x17297e(0xfc)],'room':_0x867530[_0x17297e(0x12b)]});console[_0x17297e(0x10a)](_0x17297e(0x138),_0x55f910);const {invoice:_0x12af1a,customer:_0x3bbe3d,date:_0x49bb1a,warehouse_name:_0x52e9b8,product_name:_0x363153,primary_code:_0x3264da,secondary_code:_0xc3cdb3,product_code:_0xe70367,sales_quantity:_0x5724c8,stocks:_0x27f83e,return_qty:_0x48f548,note:_0x38dc81,to_warehouse_name:_0x34815a,to_Room_name:_0x190037}=_0x3460f6[_0x17297e(0x115)];console[_0x17297e(0x10a)](_0x3460f6[_0x17297e(0x115)]);if(typeof _0x363153=='string')var _0x118679=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0xf4)]],_0x4b2a7b=[_0x3460f6['body'][_0x17297e(0x14d)]],_0x124fcf=[_0x3460f6['body'][_0x17297e(0xfb)]],_0x499a41=[_0x3460f6[_0x17297e(0x115)]['product_code']],_0xac60f6=[_0x3460f6[_0x17297e(0x115)]['sales_quantity']],_0x532d5e=[_0x3460f6['body'][_0x17297e(0x116)]],_0x1b306e=[_0x3460f6[_0x17297e(0x115)]['return_qty']],_0x5c8017=[_0x3460f6['body'][_0x17297e(0x10c)]],_0x2ac21e=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0xf2)]],_0x4c8825=[_0x3460f6['body'][_0x17297e(0x12e)]],_0x41ed1d=[_0x3460f6[_0x17297e(0x115)][_0x17297e(0xf1)]];else var _0x118679=[..._0x3460f6['body'][_0x17297e(0xf4)]],_0x4b2a7b=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x14d)]],_0x124fcf=[..._0x3460f6[_0x17297e(0x115)]['secondary_code']],_0x499a41=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x139)]],_0xac60f6=[..._0x3460f6['body']['sales_quantity']],_0x532d5e=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x116)]],_0x1b306e=[..._0x3460f6[_0x17297e(0x115)]['return_qty']],_0x5c8017=[..._0x3460f6[_0x17297e(0x115)][_0x17297e(0x10c)]],_0x2ac21e=[..._0x3460f6['body']['bin']],_0x4c8825=[..._0x3460f6[_0x17297e(0x115)]['types']],_0x41ed1d=[..._0x3460f6['body'][_0x17297e(0xf1)]];const _0x3ac59a=_0x118679['map'](_0xdcc74d=>{return _0xdcc74d={'product_name':_0xdcc74d};});_0x4b2a7b[_0x17297e(0x110)]((_0x54fdd2,_0x219bd1)=>{var _0x9503b5=_0x17297e;_0x3ac59a[_0x219bd1][_0x9503b5(0x14d)]=_0x54fdd2;}),_0x124fcf['forEach']((_0x2eeca6,_0x554b4e)=>{_0x3ac59a[_0x554b4e]['secondary_code']=_0x2eeca6;}),_0x499a41[_0x17297e(0x110)]((_0x56ec95,_0x128477)=>{_0x3ac59a[_0x128477]['product_code']=_0x56ec95;}),_0xac60f6['forEach']((_0x307a62,_0x13a6e6)=>{_0x3ac59a[_0x13a6e6]['sale_qty']=_0x307a62;}),_0x532d5e[_0x17297e(0x110)]((_0x2b7580,_0xf6090e)=>{_0x3ac59a[_0xf6090e]['stock']=_0x2b7580;}),_0x1b306e[_0x17297e(0x110)]((_0x349b23,_0x1270d7)=>{var _0x16881d=_0x17297e;_0x3ac59a[_0x1270d7][_0x16881d(0x12d)]=_0x349b23;}),_0x5c8017[_0x17297e(0x110)]((_0x13077e,_0x6da9a6)=>{var _0x1a060a=_0x17297e;_0x3ac59a[_0x6da9a6][_0x1a060a(0x10c)]=_0x13077e;}),_0x2ac21e[_0x17297e(0x110)]((_0x327ceb,_0x400092)=>{var _0x2c7894=_0x17297e;_0x3ac59a[_0x400092][_0x2c7894(0xf2)]=_0x327ceb;}),_0x4c8825[_0x17297e(0x110)]((_0x38e363,_0x261c7e)=>{var _0x35940b=_0x17297e;_0x3ac59a[_0x261c7e][_0x35940b(0x105)]=_0x38e363;}),_0x41ed1d[_0x17297e(0x110)]((_0xe1e387,_0x15223a)=>{_0x3ac59a[_0x15223a]['floorlevel']=_0xe1e387;});var _0x46aa75=0x0;_0x3ac59a[_0x17297e(0x110)](_0x4b7877=>{var _0x51a2e5=_0x17297e;console[_0x51a2e5(0x10a)](_0x51a2e5(0xf0),_0x4b7877),(parseInt(_0x4b7877[_0x51a2e5(0xff)])<parseInt(_0x4b7877['return_qty'])||parseInt(_0x4b7877[_0x51a2e5(0xd1)])<parseInt(_0x4b7877[_0x51a2e5(0x12d)])&&parseInt(_0x4b7877[_0x51a2e5(0xff)])>parseInt(_0x4b7877[_0x51a2e5(0x12d)])||parseInt(_0x4b7877[_0x51a2e5(0x12d)])==0x0)&&_0x46aa75++;});if(_0x46aa75!=0x0)return _0x3460f6['flash'](_0x17297e(0x11c),_0x17297e(0x133)),_0x590ce2[_0x17297e(0xd3)](_0x17297e(0x132));_0x867530[_0x17297e(0x10e)][_0x17297e(0x110)](_0x2564be=>{var _0x4e1d62=_0x17297e;const _0x4c87bd=_0x55f910[_0x4e1d62(0xdb)][_0x4e1d62(0xde)](_0x10f583=>{var _0x2b7a24=_0x4e1d62;_0x10f583['product_name']==_0x2564be[_0x2b7a24(0xf4)]&&_0x10f583[_0x2b7a24(0xf1)]==_0x2564be[_0x2b7a24(0xf1)]&&_0x10f583[_0x2b7a24(0x105)]==_0x2564be[_0x2b7a24(0x105)]&&_0x10f583[_0x2b7a24(0xf2)]==_0x2564be[_0x2b7a24(0xf2)]&&_0x10f583[_0x2b7a24(0x10c)]==_0x2564be[_0x2b7a24(0x10c)]&&(_0x10f583[_0x2b7a24(0xf3)]=parseInt(_0x10f583[_0x2b7a24(0xf3)])+parseInt(_0x2564be['return_qty']));});}),console[_0x17297e(0x10a)](_0x17297e(0x138),_0x55f910),await _0x55f910[_0x17297e(0x141)](),_0x867530[_0x17297e(0xe1)]=_0x12af1a,_0x867530['customer']=_0x3bbe3d,_0x867530[_0x17297e(0x145)]=_0x49bb1a,_0x867530['warehouse_name']=_0x52e9b8,_0x867530[_0x17297e(0x10e)]=_0x3ac59a,_0x867530[_0x17297e(0xe9)]=_0x38dc81,_0x867530[_0x17297e(0xfc)]=_0x34815a,_0x867530[_0x17297e(0x12b)]=_0x190037;const _0x133ae1=await _0x867530[_0x17297e(0x141)]();console[_0x17297e(0x10a)]('new\x20new_data',_0x133ae1);const _0x5853a9=await c_payment_data[_0x17297e(0x11b)]({'invoice':_0x3460f6[_0x17297e(0x115)][_0x17297e(0xe1)],'reason':_0x17297e(0xf7)});_0x5853a9[_0x17297e(0x106)]=_0x3460f6['body']['suppliers'],_0x5853a9['date']=_0x3460f6[_0x17297e(0x115)][_0x17297e(0x145)],await _0x5853a9[_0x17297e(0x141)](),_0x3460f6[_0x17297e(0x107)](_0x17297e(0xdc),'purchase\x20return\x20successfully'),_0x590ce2[_0x17297e(0xd3)](_0x17297e(0x142));}catch(_0x3af8ee){console[_0x17297e(0x10a)](_0x3af8ee),_0x590ce2[_0x17297e(0x104)](0xc8)['json']({'message':_0x3af8ee[_0x17297e(0xf9)]});}}),router[a0_0x5b606a(0xeb)](a0_0x5b606a(0xd8),auth,async(_0x5f35c3,_0x3b6511)=>{var _0x1e4453=a0_0x5b606a;try{const _0xe7cfe6=_0x5f35c3[_0x1e4453(0xd4)]['id'],{invoice:_0x495d8a,customer:_0x1cc08a,payable_to_customer:_0x8d238f,paid_amount:_0x380506}=_0x5f35c3['body'],_0x22b20c=await sales_return[_0x1e4453(0x14a)](_0xe7cfe6);console['log'](_0x1e4453(0xe0),_0x22b20c),console['log'](_0x8d238f),console[_0x1e4453(0x10a)](_0x380506);var _0x1b998b=_0x8d238f-_0x380506;console[_0x1e4453(0x10a)](_0x1e4453(0xe4),_0x1b998b),_0x22b20c[_0x1e4453(0x136)]=parseFloat(_0x380506)+parseFloat(_0x22b20c[_0x1e4453(0x136)]),_0x22b20c['due_amount']=_0x1b998b,console[_0x1e4453(0x10a)](_0x22b20c);const _0x22a971=await _0x22b20c[_0x1e4453(0x141)]();console[_0x1e4453(0x10a)](0x1b207);const _0x216952=await c_payment_data[_0x1e4453(0x11b)]({'invoice':_0x5f35c3[_0x1e4453(0x115)][_0x1e4453(0xe1)],'reason':_0x1e4453(0xf7)});console[_0x1e4453(0x10a)](_0x1e4453(0x14b),_0x216952),_0x216952['amount']=_0x1b998b,await _0x216952[_0x1e4453(0x141)]();let _0x4c5af8=new Date(),_0x55ed47=('0'+_0x4c5af8['getDate']())[_0x1e4453(0xfe)](-0x2),_0x482ccd=('0'+(_0x4c5af8['getMonth']()+0x1))['slice'](-0x2),_0x1ad451=_0x4c5af8[_0x1e4453(0xea)](),_0x1095cb=_0x1ad451+'-'+_0x482ccd+'-'+_0x55ed47;const _0x5cbb25=new customer_payment({'invoice':_0x495d8a,'date':_0x1ad451+'-'+_0x482ccd+'-'+_0x55ed47,'customer':_0x1cc08a,'reason':_0x1e4453(0xd5),'amount':_0x380506}),_0x390a40=await _0x5cbb25[_0x1e4453(0x141)]();_0x5f35c3[_0x1e4453(0x107)]('success',_0x1e4453(0x137)),_0x3b6511[_0x1e4453(0xd3)]('/sales_return/view');}catch(_0x5055f0){console[_0x1e4453(0x10a)](_0x5055f0);}}),router['get'](a0_0x5b606a(0x127),auth,async(_0x5dd822,_0x3cb51c)=>{var _0x552786=a0_0x5b606a;try{const {username:_0x459636,email:_0x523774,role:_0xf0c60e}=_0x5dd822[_0x552786(0xd9)],_0x5becd0=_0x5dd822[_0x552786(0xd9)],_0x2b213b=await profile[_0x552786(0x11b)]({'email':_0x5becd0[_0x552786(0xf6)]}),_0x51cea9=await master_shop[_0x552786(0xef)]();console['log'](_0x552786(0x125),_0x51cea9);const _0x3e045b=_0x5dd822[_0x552786(0xd4)]['id'],_0x33e031=await sales_return['findById'](_0x3e045b);console[_0x552786(0x10a)](_0x33e031);const _0x52593c=await customer['findOne']({'name':_0x33e031[_0x552786(0x11e)]});console[_0x552786(0x10a)](_0x52593c);if(_0x51cea9[0x0][_0x552786(0x121)]==_0x552786(0x130)){var _0x1e3833=users[_0x552786(0x149)];console[_0x552786(0x10a)](_0x1e3833);}else{if(_0x51cea9[0x0]['language']==_0x552786(0xd7))var _0x1e3833=users[_0x552786(0xd7)];else{if(_0x51cea9[0x0][_0x552786(0x121)]==_0x552786(0xe5))var _0x1e3833=users['German'];else{if(_0x51cea9[0x0][_0x552786(0x121)]==_0x552786(0x12f))var _0x1e3833=users['Spanish'];else{if(_0x51cea9[0x0]['language']=='French')var _0x1e3833=users[_0x552786(0x128)];else{if(_0x51cea9[0x0]['language']==_0x552786(0x10b))var _0x1e3833=users['Portuguese'];else{if(_0x51cea9[0x0][_0x552786(0x121)]==_0x552786(0x124))var _0x1e3833=users['Chinese'];else{if(_0x51cea9[0x0][_0x552786(0x121)]==_0x552786(0xdd))var _0x1e3833=users[_0x552786(0xe2)];}}}}}}}_0x3cb51c['render']('sales_return_invoice',{'success':_0x5dd822[_0x552786(0x107)](_0x552786(0xdc)),'errors':_0x5dd822[_0x552786(0x107)](_0x552786(0x11c)),'role':_0x5becd0,'profile':_0x2b213b,'master_shop':_0x51cea9,'customers':_0x52593c,'sales':_0x33e031,'language':_0x1e3833});}catch(_0x5741ef){console[_0x552786(0x10a)](_0x5741ef);}}),module[a0_0x5b606a(0x13a)]=router;function a0_0x1bef(){var _0x4fd7e4=['warehouse_name','primary_code','return_qty_QA','stock','69385GzxBkb','redirect','params','Returned\x20Payment\x20For\x20Sale\x20Return','stocks_QA','Hindi','/give_payment/:id','user','/view','product_details','success','Arabic\x20(ae)','map','customers','data','invoice','Arabic','1673140YkdZbJ','subtract','German','/view/:id','purchase\x20return\x20successfully','$product_details._id','note','getFullYear','post','aggregate','1GdMSam','for_categorize','find','foreach\x20newproduct','floorlevel','bin','product_stock','product_name','Router','email','Sale\x20Return','name','message','Enabled','secondary_code','ToWarehouse','Finished\x20Goods','slice','sale_qty','product_name_QA','$product_details.product_stock','463083UGynSy','$product_details.storage','status','type','suppliers','flash','sales_return_finished','/sales_return_finished/view','log','Portuguese\x20(BR)','bay','789552zBmAoQ','return_sale','get','forEach','render','product_code_QA','$customer_docs','842744ooTREd','body','stocks','../models/all_models','$product_details.product_code','json','return_sale_QA','findOne','errors','sales_quantity_QA','customer','$product_details.secondary_code','Portuguese','language','secondary_code_QA','11146uRmvVN','Chinese','master','Return\x20Rooms','/invoice/:id','French','$product_details.product_name','$product_details.floorlevel','ToRoom','primary_code_QA','return_qty','types','Spanish','English\x20(US)','old_data','back','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$name','../public/language/languages.json','paid_amount','payment\x20successfull','old_warehouse_data','product_code','exports','string','QA\x20Warehouse','$product_details.bay','8ARxzHp','customer_docs','$product_details.rack','save','/sales_return/view','4yHWGHj','$product_details.bin','date','$product_details.primary_code','1131579yYGGjM','express','English','findById','c_payment'];a0_0x1bef=function(){return _0x4fd7e4;};return a0_0x1bef();}