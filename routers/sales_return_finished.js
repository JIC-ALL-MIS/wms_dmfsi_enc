var a0_0x282bbe=a0_0xd62d;function a0_0xd62d(_0x18a7c8,_0x35814d){var _0x23c336=a0_0x23c3();return a0_0xd62d=function(_0xd62dc5,_0x22ab9b){_0xd62dc5=_0xd62dc5-0x17e;var _0x269992=_0x23c336[_0xd62dc5];return _0x269992;},a0_0xd62d(_0x18a7c8,_0x35814d);}function a0_0x23c3(){var _0x469d89=['product_name','body','message','$product_details.product_stock','Return\x20Rooms','findOne','render','post','bin','product_code','save','primary_code_QA','$product_details.type','email','$product_details.product_code','new\x20new_data','Chinese','English\x20(US)','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','ToRoom','46935ygyuyW','json','purchase\x20return\x20successfully','map','language','customer','success','/sales_return/view','suppliers','type','/view/:id','808892uxAKrY','stock','Enabled','../middleware/auth','$product_details.rack','bay','params','$product_details.bay','warehouse_name','get','return_qty_QA','payment\x20successfull','118963smPrml','/sales_return_finished/view','product_code_QA','amount','foreach\x20newproduct','$product_details.primary_code','$product_details._id','return_sale','c_payment','return_qty','16OoYOKh','2252jbGxeT','product_details','date','sales_quantity_QA','errors','status','old_warehouse_data','Router','211127SkQWRa','customers','floorlevel','$product_details.floorlevel','1750131OSOreV','invoice','string','$product_details.product_name','getMonth','French','for_categorize','sales_return_invoice','master','paid_amount','3MtjfRX','../models/all_models','/invoice/:id','Spanish','Portuguese\x20(BR)','Arabic\x20(ae)','$product_details','return_sale_edit_finished','old_data','return_sale_QA','note','express','primary_code','sale_qty','sales_quantity','secondary_code_QA','Hindi','flash','English','stocks','$name','secondary_code','log','product_stock','stocks_QA','find','ToWarehouse','due_amount','German','Portuguese','aggregate','slice','customer_docs','forEach','exports','getFullYear','$product_details.storage','Sale\x20Return','Arabic','types','back','redirect','user','sales_return_finished','findById','1027086KERuxI'];a0_0x23c3=function(){return _0x469d89;};return a0_0x23c3();}(function(_0x341583,_0x3abd1c){var _0x4b2e31=a0_0xd62d,_0x10e451=_0x341583();while(!![]){try{var _0x386725=-parseInt(_0x4b2e31(0x19c))/0x1+parseInt(_0x4b2e31(0x1a7))/0x2+parseInt(_0x4b2e31(0x1bd))/0x3*(-parseInt(_0x4b2e31(0x190))/0x4)+parseInt(_0x4b2e31(0x185))/0x5+parseInt(_0x4b2e31(0x1ea))/0x6+-parseInt(_0x4b2e31(0x1af))/0x7*(-parseInt(_0x4b2e31(0x1a6))/0x8)+parseInt(_0x4b2e31(0x1b3))/0x9;if(_0x386725===_0x3abd1c)break;else _0x10e451['push'](_0x10e451['shift']());}catch(_0x286e9a){_0x10e451['push'](_0x10e451['shift']());}}}(a0_0x23c3,0x1c259));const express=require(a0_0x282bbe(0x1c8)),app=express(),router=express[a0_0x282bbe(0x1ae)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x282bbe(0x1be)),auth=require(a0_0x282bbe(0x193)),users=require('../public/language/languages.json');router[a0_0x282bbe(0x199)]('/view',auth,async(_0x4356b6,_0x4df1b1)=>{var _0x1ed4af=a0_0x282bbe;try{const {username:_0x86462f,email:_0x1b0fe7,role:_0x388aa4}=_0x4356b6[_0x1ed4af(0x1e7)],_0x104689=_0x4356b6['user'],_0x530d47=await profile[_0x1ed4af(0x1f0)]({'email':_0x104689['email']}),_0x400b1a=await master_shop[_0x1ed4af(0x1d6)](),_0x6bf6b7=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x1ed4af(0x1b0),'localField':_0x1ed4af(0x18a),'foreignField':'name','as':_0x1ed4af(0x1dd)}},{'$unwind':'$customer_docs'}]);if(_0x400b1a[0x0]['language']==_0x1ed4af(0x182)){var _0x4d39ee=users[_0x1ed4af(0x1cf)];console[_0x1ed4af(0x1d3)](_0x4d39ee);}else{if(_0x400b1a[0x0][_0x1ed4af(0x189)]==_0x1ed4af(0x1cd))var _0x4d39ee=users['Hindi'];else{if(_0x400b1a[0x0][_0x1ed4af(0x189)]==_0x1ed4af(0x1d9))var _0x4d39ee=users[_0x1ed4af(0x1d9)];else{if(_0x400b1a[0x0][_0x1ed4af(0x189)]==_0x1ed4af(0x1c0))var _0x4d39ee=users[_0x1ed4af(0x1c0)];else{if(_0x400b1a[0x0]['language']==_0x1ed4af(0x1b8))var _0x4d39ee=users[_0x1ed4af(0x1b8)];else{if(_0x400b1a[0x0]['language']=='Portuguese\x20(BR)')var _0x4d39ee=users['Portuguese'];else{if(_0x400b1a[0x0]['language']==_0x1ed4af(0x181))var _0x4d39ee=users[_0x1ed4af(0x181)];else{if(_0x400b1a[0x0][_0x1ed4af(0x189)]==_0x1ed4af(0x1c2))var _0x4d39ee=users['Arabic'];}}}}}}}_0x4df1b1[_0x1ed4af(0x1f1)](_0x1ed4af(0x1e8),{'success':_0x4356b6[_0x1ed4af(0x1ce)]('success'),'errors':_0x4356b6['flash'](_0x1ed4af(0x1ab)),'role':_0x104689,'profile':_0x530d47,'master_shop':_0x400b1a,'user':_0x6bf6b7,'language':_0x4d39ee});}catch(_0x419d42){console['log'](_0x419d42);}}),router[a0_0x282bbe(0x199)](a0_0x282bbe(0x18f),auth,async(_0xd72b,_0x2fd881)=>{var _0x463628=a0_0x282bbe;try{const {username:_0x4cc360,email:_0x2ad632,role:_0x32b7f8}=_0xd72b['user'],_0x3b7034=_0xd72b[_0x463628(0x1e7)],_0x39faf6=await profile['findOne']({'email':_0x3b7034[_0x463628(0x17e)]}),_0x1dccca=await master_shop[_0x463628(0x1d6)]();console[_0x463628(0x1d3)](_0x463628(0x1bb),_0x1dccca);const _0x4424fa=_0xd72b['params']['id'];console[_0x463628(0x1d3)](_0x4424fa);var _0xe0d64e=[_0x463628(0x1ef)];const _0x2699c1=await sales_return_finished['findById'](_0x4424fa),_0x4a60be=await warehouse['aggregate']([{'$match':{'name':_0x2699c1[_0x463628(0x1d7)],'room':_0x2699c1[_0x463628(0x184)]}},{'$unwind':_0x463628(0x1c3)},{'$group':{'_id':_0x463628(0x1a2),'name':{'$first':_0x463628(0x1b6)},'product_stock':{'$first':_0x463628(0x1ee)},'bay':{'$first':_0x463628(0x197)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x463628(0x1f7)},'floorlevel':{'$first':_0x463628(0x1b2)},'primary_code':{'$first':_0x463628(0x1a1)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x463628(0x17f)},'storage':{'$first':_0x463628(0x1e1)},'rack':{'$first':_0x463628(0x194)}}}]);console[_0x463628(0x1d3)](_0x4a60be);const _0x424da0=await warehouse[_0x463628(0x1db)]([{'$match':{'status':_0x463628(0x192),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x463628(0x1d1),'name':{'$first':_0x463628(0x1d1)}}},{'$sort':{'name':0x1}}]),_0x42bc95=await warehouse['aggregate']([{'$match':{'status':_0x463628(0x192),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x463628(0x1d1)}}},{'$sort':{'name':0x1}}]),_0x3f0ced=await product[_0x463628(0x1d6)]({});if(_0x1dccca[0x0][_0x463628(0x189)]==_0x463628(0x182)){var _0x57c716=users[_0x463628(0x1cf)];console[_0x463628(0x1d3)](_0x57c716);}else{if(_0x1dccca[0x0][_0x463628(0x189)]==_0x463628(0x1cd))var _0x57c716=users['Hindi'];else{if(_0x1dccca[0x0][_0x463628(0x189)]==_0x463628(0x1d9))var _0x57c716=users[_0x463628(0x1d9)];else{if(_0x1dccca[0x0]['language']==_0x463628(0x1c0))var _0x57c716=users[_0x463628(0x1c0)];else{if(_0x1dccca[0x0]['language']==_0x463628(0x1b8))var _0x57c716=users[_0x463628(0x1b8)];else{if(_0x1dccca[0x0][_0x463628(0x189)]=='Portuguese\x20(BR)')var _0x57c716=users[_0x463628(0x1da)];else{if(_0x1dccca[0x0][_0x463628(0x189)]==_0x463628(0x181))var _0x57c716=users[_0x463628(0x181)];else{if(_0x1dccca[0x0][_0x463628(0x189)]==_0x463628(0x1c2))var _0x57c716=users[_0x463628(0x1e3)];}}}}}}}_0x2fd881[_0x463628(0x1f1)](_0x463628(0x1c4),{'success':_0xd72b['flash'](_0x463628(0x18b)),'errors':_0xd72b[_0x463628(0x1ce)](_0x463628(0x1ab)),'role':_0x3b7034,'profile':_0x39faf6,'master_shop':_0x1dccca,'user':_0x2699c1,'stock':_0x4a60be,'unit':_0x3f0ced,'language':_0x57c716,'warehouses':_0x424da0,'rooms':_0xe0d64e,'warehouse_QA':_0x42bc95});}catch(_0x3322e6){console[_0x463628(0x1d3)](_0x3322e6);}}),router[a0_0x282bbe(0x1f2)](a0_0x282bbe(0x18f),auth,async(_0x43b5d7,_0x3e4438)=>{var _0x1d391c=a0_0x282bbe;if(_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1b9)]=='QA')try{const _0x117407=_0x43b5d7[_0x1d391c(0x196)]['id'],_0x5024c3=await sales_return[_0x1d391c(0x1f0)]({'invoice':_0x43b5d7['body'][_0x1d391c(0x1b4)]}),_0x32032f=await warehouse[_0x1d391c(0x1f0)]({'name':_0x5024c3[_0x1d391c(0x1d7)],'room':_0x5024c3[_0x1d391c(0x184)]}),{invoice:_0x499c71,customer:_0x54d1d1,date:_0x4d81d5,warehouse_name:_0x26afa4,product_name:_0x16bb34,primary_code:_0x29cfbc,secondary_code:_0x40f79e,product_code:_0x3e6ab4,sales_quantity:_0x227cdd,stocks:_0x1707c7,return_qty:_0xc31f62,note:_0x2f1d0a,to_warehouse_name_QA:_0x3e1b0d,to_Room_name_QA:_0x2dc3a1}=_0x43b5d7['body'];if(typeof product_name_QA==_0x1d391c(0x1b5))var _0x35ff49=[_0x43b5d7[_0x1d391c(0x1ec)]['product_name_QA']],_0x43040c=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1f6)]],_0x23420d=[_0x43b5d7[_0x1d391c(0x1ec)]['secondary_code_QA']],_0x36c749=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x19e)]],_0x5cbdce=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1aa)]],_0x57b410=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1d5)]],_0x3c82cb=[_0x43b5d7['body']['return_qty_QA']];else var _0x35ff49=[..._0x43b5d7[_0x1d391c(0x1ec)]['product_name_QA']],_0x43040c=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1f6)]],_0x23420d=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1cc)]],_0x36c749=[..._0x43b5d7[_0x1d391c(0x1ec)]['product_code_QA']],_0x5cbdce=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1aa)]],_0x57b410=[..._0x43b5d7['body']['stocks_QA']],_0x3c82cb=[..._0x43b5d7['body'][_0x1d391c(0x19a)]];const _0x5a15ad=_0x35ff49[_0x1d391c(0x188)](_0x5e774d=>{return _0x5e774d={'product_name':_0x5e774d};});_0x43040c['forEach']((_0x8b548e,_0x4d3826)=>{_0x5a15ad[_0x4d3826]['primary_code']=_0x8b548e;}),_0x23420d[_0x1d391c(0x1de)]((_0x338034,_0x1abed5)=>{var _0x24c1c6=_0x1d391c;_0x5a15ad[_0x1abed5][_0x24c1c6(0x1d2)]=_0x338034;}),_0x36c749['forEach']((_0x2a0985,_0x510baa)=>{_0x5a15ad[_0x510baa]['product_code']=_0x2a0985;}),_0x5cbdce['forEach']((_0x2c4cb9,_0x55872b)=>{var _0x80ee06=_0x1d391c;_0x5a15ad[_0x55872b][_0x80ee06(0x1ca)]=_0x2c4cb9;}),_0x57b410[_0x1d391c(0x1de)]((_0x1fe8b5,_0x57cca4)=>{var _0x3eb8f8=_0x1d391c;_0x5a15ad[_0x57cca4][_0x3eb8f8(0x191)]=_0x1fe8b5;}),_0x3c82cb[_0x1d391c(0x1de)]((_0x2636ea,_0x26b86b)=>{var _0x554218=_0x1d391c;_0x5a15ad[_0x26b86b][_0x554218(0x1a5)]=_0x2636ea;}),_0x5024c3[_0x1d391c(0x1c6)][_0x1d391c(0x1de)](_0x4452e0=>{var _0x120172=_0x1d391c;const _0x46d2af=_0x32032f[_0x120172(0x1a8)][_0x120172(0x188)](_0x2cfb67=>{var _0x4c3a4c=_0x120172;_0x2cfb67[_0x4c3a4c(0x1eb)]==_0x4452e0[_0x4c3a4c(0x1eb)]&&(_0x2cfb67[_0x4c3a4c(0x1d4)]=parseInt(_0x2cfb67[_0x4c3a4c(0x1d4)])+parseInt(_0x4452e0[_0x4c3a4c(0x1a5)]));});}),await _0x32032f[_0x1d391c(0x1f5)](),_0x5024c3[_0x1d391c(0x1b4)]=_0x499c71,_0x5024c3[_0x1d391c(0x18a)]=_0x54d1d1,_0x5024c3[_0x1d391c(0x1a9)]=_0x4d81d5,_0x5024c3[_0x1d391c(0x198)]=_0x26afa4,_0x5024c3[_0x1d391c(0x1c6)]=_0x5a15ad,_0x5024c3[_0x1d391c(0x1c7)]=_0x2f1d0a,_0x5024c3[_0x1d391c(0x1d7)]=_0x3e1b0d,_0x5024c3[_0x1d391c(0x184)]=_0x2dc3a1;const _0x3f59d6=await _0x5024c3[_0x1d391c(0x1f5)](),_0x331903=await c_payment_data['findOne']({'invoice':_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1b4)],'reason':_0x1d391c(0x1e2)});_0x331903[_0x1d391c(0x18d)]=_0x43b5d7['body'][_0x1d391c(0x18d)],_0x331903['date']=_0x43b5d7['body']['date'],await _0x331903[_0x1d391c(0x1f5)](),_0x43b5d7[_0x1d391c(0x1ce)](_0x1d391c(0x18b),_0x1d391c(0x187)),_0x3e4438[_0x1d391c(0x1e6)](_0x1d391c(0x19d));}catch(_0x49271e){console[_0x1d391c(0x1d3)](_0x49271e),_0x3e4438['status'](0xc8)[_0x1d391c(0x186)]({'message':_0x49271e[_0x1d391c(0x1ed)]});}else try{const _0x162305=_0x43b5d7['params']['id'];console[_0x1d391c(0x1d3)](_0x162305);const _0x43c581=await sales_return[_0x1d391c(0x1f0)]({'invoice':_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1b4)]});console[_0x1d391c(0x1d3)](_0x1d391c(0x1c5),_0x43c581);const _0x23eea3=await warehouse[_0x1d391c(0x1f0)]({'name':_0x43c581[_0x1d391c(0x1d7)],'room':_0x43c581['ToRoom']});console[_0x1d391c(0x1d3)](_0x1d391c(0x1ad),_0x23eea3);const {invoice:_0xdf08de,customer:_0x5c3d32,date:_0x4d543d,warehouse_name:_0x26f303,product_name:_0x35f79d,primary_code:_0x23b39b,secondary_code:_0x5f0df0,product_code:_0x1d5e32,sales_quantity:_0x403ec4,stocks:_0x4b9d7c,return_qty:_0x3d2b26,note:_0x5be324,to_warehouse_name:_0x4cacb3,to_Room_name:_0x2d80d2}=_0x43b5d7[_0x1d391c(0x1ec)];console[_0x1d391c(0x1d3)](_0x43b5d7[_0x1d391c(0x1ec)]);if(typeof _0x35f79d==_0x1d391c(0x1b5))var _0x35ff49=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1eb)]],_0x43040c=[_0x43b5d7[_0x1d391c(0x1ec)]['primary_code']],_0x23420d=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1d2)]],_0x36c749=[_0x43b5d7['body'][_0x1d391c(0x1f4)]],_0x5cbdce=[_0x43b5d7['body'][_0x1d391c(0x1cb)]],_0x57b410=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1d0)]],_0x3c82cb=[_0x43b5d7[_0x1d391c(0x1ec)]['return_qty']],_0xbf457b=[_0x43b5d7['body'][_0x1d391c(0x195)]],_0x5e2f5e=[_0x43b5d7[_0x1d391c(0x1ec)]['bin']],_0x454764=[_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1e4)]],_0x462dac=[_0x43b5d7['body'][_0x1d391c(0x1b1)]];else var _0x35ff49=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1eb)]],_0x43040c=[..._0x43b5d7['body'][_0x1d391c(0x1c9)]],_0x23420d=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1d2)]],_0x36c749=[..._0x43b5d7[_0x1d391c(0x1ec)]['product_code']],_0x5cbdce=[..._0x43b5d7['body'][_0x1d391c(0x1cb)]],_0x57b410=[..._0x43b5d7['body'][_0x1d391c(0x1d0)]],_0x3c82cb=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1a5)]],_0xbf457b=[..._0x43b5d7[_0x1d391c(0x1ec)]['bay']],_0x5e2f5e=[..._0x43b5d7['body'][_0x1d391c(0x1f3)]],_0x454764=[..._0x43b5d7[_0x1d391c(0x1ec)]['types']],_0x462dac=[..._0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1b1)]];const _0x385e3d=_0x35ff49['map'](_0x12b4f9=>{return _0x12b4f9={'product_name':_0x12b4f9};});_0x43040c[_0x1d391c(0x1de)]((_0x555280,_0x21d5ba)=>{var _0x388f65=_0x1d391c;_0x385e3d[_0x21d5ba][_0x388f65(0x1c9)]=_0x555280;}),_0x23420d['forEach']((_0x53a175,_0x1d2b52)=>{var _0x24f1a2=_0x1d391c;_0x385e3d[_0x1d2b52][_0x24f1a2(0x1d2)]=_0x53a175;}),_0x36c749[_0x1d391c(0x1de)]((_0x33bf30,_0x182ee1)=>{var _0x36ca10=_0x1d391c;_0x385e3d[_0x182ee1][_0x36ca10(0x1f4)]=_0x33bf30;}),_0x5cbdce[_0x1d391c(0x1de)]((_0x5346e5,_0x3600b9)=>{_0x385e3d[_0x3600b9]['sale_qty']=_0x5346e5;}),_0x57b410['forEach']((_0x319efc,_0x5b6fa5)=>{var _0x169001=_0x1d391c;_0x385e3d[_0x5b6fa5][_0x169001(0x191)]=_0x319efc;}),_0x3c82cb[_0x1d391c(0x1de)]((_0x527ae8,_0x5d64e7)=>{var _0x5d1227=_0x1d391c;_0x385e3d[_0x5d64e7][_0x5d1227(0x1a5)]=_0x527ae8;}),_0xbf457b['forEach']((_0x28f6ff,_0x463cab)=>{_0x385e3d[_0x463cab]['bay']=_0x28f6ff;}),_0x5e2f5e[_0x1d391c(0x1de)]((_0x5adf91,_0x23385d)=>{_0x385e3d[_0x23385d]['bin']=_0x5adf91;}),_0x454764[_0x1d391c(0x1de)]((_0x26cfce,_0xd4c152)=>{var _0x4dd8ed=_0x1d391c;_0x385e3d[_0xd4c152][_0x4dd8ed(0x18e)]=_0x26cfce;}),_0x462dac[_0x1d391c(0x1de)]((_0x28bce7,_0x3a94cf)=>{var _0x4ac5ea=_0x1d391c;_0x385e3d[_0x3a94cf][_0x4ac5ea(0x1b1)]=_0x28bce7;});var _0x20b4c0=0x0;_0x385e3d[_0x1d391c(0x1de)](_0x425ff6=>{var _0x2c1087=_0x1d391c;console[_0x2c1087(0x1d3)](_0x2c1087(0x1a0),_0x425ff6),(parseInt(_0x425ff6['sale_qty'])<parseInt(_0x425ff6[_0x2c1087(0x1a5)])||parseInt(_0x425ff6[_0x2c1087(0x191)])<parseInt(_0x425ff6[_0x2c1087(0x1a5)])&&parseInt(_0x425ff6[_0x2c1087(0x1ca)])>parseInt(_0x425ff6['return_qty'])||parseInt(_0x425ff6[_0x2c1087(0x1a5)])==0x0)&&_0x20b4c0++;});if(_0x20b4c0!=0x0)return _0x43b5d7[_0x1d391c(0x1ce)](_0x1d391c(0x1ab),_0x1d391c(0x183)),_0x3e4438[_0x1d391c(0x1e6)](_0x1d391c(0x1e5));_0x43c581[_0x1d391c(0x1a3)][_0x1d391c(0x1de)](_0x1c0561=>{var _0x1e5706=_0x1d391c;const _0x30a8b8=_0x23eea3['product_details'][_0x1e5706(0x188)](_0x3a2354=>{var _0x3515e5=_0x1e5706;_0x3a2354[_0x3515e5(0x1eb)]==_0x1c0561['product_name']&&_0x3a2354[_0x3515e5(0x1b1)]==_0x1c0561[_0x3515e5(0x1b1)]&&_0x3a2354['type']==_0x1c0561[_0x3515e5(0x18e)]&&_0x3a2354['bin']==_0x1c0561['bin']&&_0x3a2354[_0x3515e5(0x195)]==_0x1c0561[_0x3515e5(0x195)]&&(_0x3a2354[_0x3515e5(0x1d4)]=parseInt(_0x3a2354[_0x3515e5(0x1d4)])+parseInt(_0x1c0561[_0x3515e5(0x1a5)]));});}),console[_0x1d391c(0x1d3)](_0x1d391c(0x1ad),_0x23eea3),await _0x23eea3['save'](),_0x43c581[_0x1d391c(0x1b4)]=_0xdf08de,_0x43c581[_0x1d391c(0x18a)]=_0x5c3d32,_0x43c581[_0x1d391c(0x1a9)]=_0x4d543d,_0x43c581[_0x1d391c(0x198)]=_0x26f303,_0x43c581[_0x1d391c(0x1a3)]=_0x385e3d,_0x43c581['note']=_0x5be324,_0x43c581['ToWarehouse']=_0x4cacb3,_0x43c581[_0x1d391c(0x184)]=_0x2d80d2;const _0x1ac448=await _0x43c581[_0x1d391c(0x1f5)]();console[_0x1d391c(0x1d3)](_0x1d391c(0x180),_0x1ac448);const _0x4d1610=await c_payment_data['findOne']({'invoice':_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x1b4)],'reason':_0x1d391c(0x1e2)});_0x4d1610[_0x1d391c(0x18d)]=_0x43b5d7[_0x1d391c(0x1ec)][_0x1d391c(0x18d)],_0x4d1610[_0x1d391c(0x1a9)]=_0x43b5d7[_0x1d391c(0x1ec)]['date'],await _0x4d1610[_0x1d391c(0x1f5)](),_0x43b5d7[_0x1d391c(0x1ce)]('success',_0x1d391c(0x187)),_0x3e4438[_0x1d391c(0x1e6)](_0x1d391c(0x18c));}catch(_0x2c13a7){console[_0x1d391c(0x1d3)](_0x2c13a7),_0x3e4438[_0x1d391c(0x1ac)](0xc8)[_0x1d391c(0x186)]({'message':_0x2c13a7[_0x1d391c(0x1ed)]});}}),router[a0_0x282bbe(0x1f2)]('/give_payment/:id',auth,async(_0x3f7922,_0x755982)=>{var _0x344100=a0_0x282bbe;try{const _0x4f4dff=_0x3f7922['params']['id'],{invoice:_0x374a8e,customer:_0x5ddf6b,payable_to_customer:_0x30fa0d,paid_amount:_0x354350}=_0x3f7922[_0x344100(0x1ec)],_0x2a85a6=await sales_return['findById'](_0x4f4dff);console[_0x344100(0x1d3)]('data',_0x2a85a6),console[_0x344100(0x1d3)](_0x30fa0d),console[_0x344100(0x1d3)](_0x354350);var _0x33f02a=_0x30fa0d-_0x354350;console['log']('subtract',_0x33f02a),_0x2a85a6[_0x344100(0x1bc)]=parseFloat(_0x354350)+parseFloat(_0x2a85a6[_0x344100(0x1bc)]),_0x2a85a6[_0x344100(0x1d8)]=_0x33f02a,console['log'](_0x2a85a6);const _0x25eab5=await _0x2a85a6[_0x344100(0x1f5)]();console['log'](0x1b207);const _0x4cf6e8=await c_payment_data[_0x344100(0x1f0)]({'invoice':_0x3f7922[_0x344100(0x1ec)][_0x344100(0x1b4)],'reason':'Sale\x20Return'});console[_0x344100(0x1d3)](_0x344100(0x1a4),_0x4cf6e8),_0x4cf6e8[_0x344100(0x19f)]=_0x33f02a,await _0x4cf6e8[_0x344100(0x1f5)]();let _0x222b58=new Date(),_0x1f029d=('0'+_0x222b58['getDate']())[_0x344100(0x1dc)](-0x2),_0x7dde7e=('0'+(_0x222b58[_0x344100(0x1b7)]()+0x1))[_0x344100(0x1dc)](-0x2),_0xb83f25=_0x222b58[_0x344100(0x1e0)](),_0x11455c=_0xb83f25+'-'+_0x7dde7e+'-'+_0x1f029d;const _0x41d6f1=new customer_payment({'invoice':_0x374a8e,'date':_0xb83f25+'-'+_0x7dde7e+'-'+_0x1f029d,'customer':_0x5ddf6b,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x354350}),_0x23f068=await _0x41d6f1['save']();_0x3f7922[_0x344100(0x1ce)](_0x344100(0x18b),_0x344100(0x19b)),_0x755982[_0x344100(0x1e6)](_0x344100(0x18c));}catch(_0x54d82c){console[_0x344100(0x1d3)](_0x54d82c);}}),router[a0_0x282bbe(0x199)](a0_0x282bbe(0x1bf),auth,async(_0x261a38,_0x3590e4)=>{var _0x1cf484=a0_0x282bbe;try{const {username:_0x4a80e4,email:_0x5dbc57,role:_0x2e2154}=_0x261a38[_0x1cf484(0x1e7)],_0x291080=_0x261a38['user'],_0x135114=await profile[_0x1cf484(0x1f0)]({'email':_0x291080['email']}),_0x11a5cd=await master_shop[_0x1cf484(0x1d6)]();console['log'](_0x1cf484(0x1bb),_0x11a5cd);const _0x2e8a7e=_0x261a38[_0x1cf484(0x196)]['id'],_0x10a247=await sales_return[_0x1cf484(0x1e9)](_0x2e8a7e);console['log'](_0x10a247);const _0x4b4277=await customer[_0x1cf484(0x1f0)]({'name':_0x10a247[_0x1cf484(0x18a)]});console[_0x1cf484(0x1d3)](_0x4b4277);if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x182)){var _0x266aa9=users[_0x1cf484(0x1cf)];console[_0x1cf484(0x1d3)](_0x266aa9);}else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x1cd))var _0x266aa9=users[_0x1cf484(0x1cd)];else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x1d9))var _0x266aa9=users[_0x1cf484(0x1d9)];else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x1c0))var _0x266aa9=users[_0x1cf484(0x1c0)];else{if(_0x11a5cd[0x0]['language']==_0x1cf484(0x1b8))var _0x266aa9=users[_0x1cf484(0x1b8)];else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x1c1))var _0x266aa9=users['Portuguese'];else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]==_0x1cf484(0x181))var _0x266aa9=users[_0x1cf484(0x181)];else{if(_0x11a5cd[0x0][_0x1cf484(0x189)]=='Arabic\x20(ae)')var _0x266aa9=users[_0x1cf484(0x1e3)];}}}}}}}_0x3590e4['render'](_0x1cf484(0x1ba),{'success':_0x261a38[_0x1cf484(0x1ce)](_0x1cf484(0x18b)),'errors':_0x261a38[_0x1cf484(0x1ce)](_0x1cf484(0x1ab)),'role':_0x291080,'profile':_0x135114,'master_shop':_0x11a5cd,'customers':_0x4b4277,'sales':_0x10a247,'language':_0x266aa9});}catch(_0x2acaf1){console[_0x1cf484(0x1d3)](_0x2acaf1);}}),module[a0_0x282bbe(0x1df)]=router;