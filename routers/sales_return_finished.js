function a0_0xebbb(){var _0x725303=['find','/sales_return/view','slice','Spanish','c_payment','$customer_docs','status','../middleware/auth','Enabled','due_amount','return_sale_QA','product_code_QA','errors','Hindi','French','purchase\x20return\x20successfully','customers','getDate','Sale\x20Return','params','$product_details.product_code','save','/sales_return_finished/view','primary_code','$product_details.product_name','bay','post','stock','ToWarehouse','$product_details.bin','$product_details.product_stock','Chinese','product_stock','types','secondary_code','forEach','foreach\x20newproduct','Finished\x20Goods','log','old_warehouse_data','stocks_QA','customer_docs','date','$product_details.primary_code','../models/all_models','Portuguese\x20(BR)','return_qty_QA','sales_quantity','findById','redirect','Arabic','customer','suppliers','/view','email','return_sale','data','product_name_QA','/invoice/:id','/give_payment/:id','string','new\x20new_data','flash','note','German','user','sales_quantity_QA','json','type','primary_code_QA','English\x20(US)','sales_return_invoice','product_details','warehouse_name','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','2664557sORevj','render','2935722sfzIFI','message','secondary_code_QA','English','Return\x20Rooms','$name','subtract','sales_return_finished','327501OWfgeT','../public/language/languages.json','name','QA\x20Warehouse','product_code','back','Returned\x20Payment\x20For\x20Sale\x20Return','stocks','return_qty','floorlevel','findOne','paid_amount','success','sale_qty','bin','express','81286LPWMcT','product_name','$product_details.secondary_code','4867256cVmcCt','for_categorize','Arabic\x20(ae)','get','$product_details.rack','exports','Portuguese','master','invoice','$product_details.storage','$product_details.bay','176QMuyvV','ToRoom','6980macQaw','body','1074242RGEmrk','language','/view/:id','map','aggregate'];a0_0xebbb=function(){return _0x725303;};return a0_0xebbb();}var a0_0x232a09=a0_0x31e3;(function(_0x4608b4,_0x328d0b){var _0x48c02e=a0_0x31e3,_0x3cb38b=_0x4608b4();while(!![]){try{var _0x260d12=parseInt(_0x48c02e(0x19a))/0x1+-parseInt(_0x48c02e(0x1ac))/0x2+parseInt(_0x48c02e(0x18a))/0x3+parseInt(_0x48c02e(0x1a8))/0x4*(-parseInt(_0x48c02e(0x1aa))/0x5)+parseInt(_0x48c02e(0x182))/0x6+-parseInt(_0x48c02e(0x180))/0x7+parseInt(_0x48c02e(0x19d))/0x8;if(_0x260d12===_0x328d0b)break;else _0x3cb38b['push'](_0x3cb38b['shift']());}catch(_0x4f6fa6){_0x3cb38b['push'](_0x3cb38b['shift']());}}}(a0_0xebbb,0x4b6d7));function a0_0x31e3(_0x36b509,_0xe9031b){var _0xebbbab=a0_0xebbb();return a0_0x31e3=function(_0x31e332,_0x34d806){_0x31e332=_0x31e332-0x141;var _0x146546=_0xebbbab[_0x31e332];return _0x146546;},a0_0x31e3(_0x36b509,_0xe9031b);}const express=require(a0_0x232a09(0x199)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x232a09(0x161)),auth=require(a0_0x232a09(0x1b8)),users=require(a0_0x232a09(0x18b));router[a0_0x232a09(0x1a0)](a0_0x232a09(0x16a),auth,async(_0x1eeaaf,_0x3297d9)=>{var _0x3b22c0=a0_0x232a09;try{const {username:_0x428267,email:_0x365190,role:_0x32dc5c}=_0x1eeaaf[_0x3b22c0(0x176)],_0x106907=_0x1eeaaf[_0x3b22c0(0x176)],_0x2c5ff3=await profile['findOne']({'email':_0x106907[_0x3b22c0(0x16b)]}),_0x44bc7b=await master_shop[_0x3b22c0(0x1b1)](),_0x5ca9a6=await sales_return_finished[_0x3b22c0(0x1b0)]([{'$lookup':{'from':_0x3b22c0(0x145),'localField':_0x3b22c0(0x168),'foreignField':_0x3b22c0(0x18c),'as':_0x3b22c0(0x15e)}},{'$unwind':_0x3b22c0(0x1b6)}]);if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]==_0x3b22c0(0x17b)){var _0x4df679=users[_0x3b22c0(0x185)];console[_0x3b22c0(0x15b)](_0x4df679);}else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]==_0x3b22c0(0x142))var _0x4df679=users[_0x3b22c0(0x142)];else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]==_0x3b22c0(0x175))var _0x4df679=users[_0x3b22c0(0x175)];else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]=='Spanish')var _0x4df679=users['Spanish'];else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]=='French')var _0x4df679=users[_0x3b22c0(0x143)];else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]=='Portuguese\x20(BR)')var _0x4df679=users[_0x3b22c0(0x1a3)];else{if(_0x44bc7b[0x0][_0x3b22c0(0x1ad)]==_0x3b22c0(0x154))var _0x4df679=users['Chinese'];else{if(_0x44bc7b[0x0]['language']==_0x3b22c0(0x19f))var _0x4df679=users[_0x3b22c0(0x167)];}}}}}}}_0x3297d9[_0x3b22c0(0x181)](_0x3b22c0(0x189),{'success':_0x1eeaaf['flash'](_0x3b22c0(0x196)),'errors':_0x1eeaaf['flash'](_0x3b22c0(0x141)),'role':_0x106907,'profile':_0x2c5ff3,'master_shop':_0x44bc7b,'user':_0x5ca9a6,'language':_0x4df679});}catch(_0x308e39){console['log'](_0x308e39);}}),router[a0_0x232a09(0x1a0)](a0_0x232a09(0x1ae),auth,async(_0x25167f,_0x358be6)=>{var _0x100970=a0_0x232a09;try{const {username:_0x36d6bf,email:_0x100e03,role:_0x5d53e8}=_0x25167f[_0x100970(0x176)],_0x1b0cc4=_0x25167f[_0x100970(0x176)],_0x5c0d42=await profile['findOne']({'email':_0x1b0cc4['email']}),_0x19d293=await master_shop['find']();console[_0x100970(0x15b)](_0x100970(0x1a4),_0x19d293);const _0x1205ab=_0x25167f['params']['id'];console[_0x100970(0x15b)](_0x1205ab);var _0x491ef5=[_0x100970(0x186)];const _0x3dea99=await sales_return_finished[_0x100970(0x165)](_0x1205ab),_0x45771c=await warehouse[_0x100970(0x1b0)]([{'$match':{'name':_0x3dea99[_0x100970(0x151)],'room':_0x3dea99['ToRoom']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x100970(0x14d)},'product_stock':{'$first':_0x100970(0x153)},'bay':{'$first':_0x100970(0x1a7)},'bin':{'$first':_0x100970(0x152)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x100970(0x160)},'secondary_code':{'$first':_0x100970(0x19c)},'product_code':{'$first':_0x100970(0x149)},'storage':{'$first':_0x100970(0x1a6)},'rack':{'$first':_0x100970(0x1a1)}}}]);console[_0x100970(0x15b)](_0x45771c);const _0x23bb9e=await warehouse[_0x100970(0x1b0)]([{'$match':{'status':_0x100970(0x1b9),'warehouse_category':_0x100970(0x15a)}},{'$group':{'_id':'$name','name':{'$first':_0x100970(0x187)}}},{'$sort':{'name':0x1}}]),_0x4ef01f=await warehouse['aggregate']([{'$match':{'status':_0x100970(0x1b9),'name':_0x100970(0x18d)}},{'$group':{'_id':_0x100970(0x187),'name':{'$first':_0x100970(0x187)}}},{'$sort':{'name':0x1}}]),_0x5a5e71=await product[_0x100970(0x1b1)]({});if(_0x19d293[0x0]['language']==_0x100970(0x17b)){var _0x4370d6=users[_0x100970(0x185)];console['log'](_0x4370d6);}else{if(_0x19d293[0x0]['language']=='Hindi')var _0x4370d6=users['Hindi'];else{if(_0x19d293[0x0][_0x100970(0x1ad)]=='German')var _0x4370d6=users['German'];else{if(_0x19d293[0x0][_0x100970(0x1ad)]==_0x100970(0x1b4))var _0x4370d6=users['Spanish'];else{if(_0x19d293[0x0]['language']==_0x100970(0x143))var _0x4370d6=users[_0x100970(0x143)];else{if(_0x19d293[0x0][_0x100970(0x1ad)]==_0x100970(0x162))var _0x4370d6=users[_0x100970(0x1a3)];else{if(_0x19d293[0x0][_0x100970(0x1ad)]==_0x100970(0x154))var _0x4370d6=users[_0x100970(0x154)];else{if(_0x19d293[0x0][_0x100970(0x1ad)]==_0x100970(0x19f))var _0x4370d6=users[_0x100970(0x167)];}}}}}}}_0x358be6[_0x100970(0x181)]('return_sale_edit_finished',{'success':_0x25167f['flash']('success'),'errors':_0x25167f['flash'](_0x100970(0x141)),'role':_0x1b0cc4,'profile':_0x5c0d42,'master_shop':_0x19d293,'user':_0x3dea99,'stock':_0x45771c,'unit':_0x5a5e71,'language':_0x4370d6,'warehouses':_0x23bb9e,'rooms':_0x491ef5,'warehouse_QA':_0x4ef01f});}catch(_0x5b45a4){console[_0x100970(0x15b)](_0x5b45a4);}}),router[a0_0x232a09(0x14f)]('/view/:id',auth,async(_0x43b6d6,_0x1cd7f6)=>{var _0x2328e2=a0_0x232a09;if(_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x19e)]=='QA')try{const _0x22122d=_0x43b6d6[_0x2328e2(0x148)]['id'],_0x1cc13a=await sales_return[_0x2328e2(0x194)]({'invoice':_0x43b6d6[_0x2328e2(0x1ab)]['invoice']}),_0x4c52b8=await warehouse[_0x2328e2(0x194)]({'name':_0x1cc13a[_0x2328e2(0x151)],'room':_0x1cc13a[_0x2328e2(0x1a9)]}),{invoice:_0x34b40a,customer:_0x56c238,date:_0x5929d9,warehouse_name:_0x920b5d,product_name:_0x1ba661,primary_code:_0x223eec,secondary_code:_0x131e49,product_code:_0x48cec5,sales_quantity:_0x206136,stocks:_0x14d956,return_qty:_0x5e55b9,note:_0x548289,to_warehouse_name_QA:_0x43078a,to_Room_name_QA:_0x153524}=_0x43b6d6[_0x2328e2(0x1ab)];if(typeof product_name_QA==_0x2328e2(0x171))var _0x4b9de6=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x16e)]],_0x2e437b=[_0x43b6d6[_0x2328e2(0x1ab)]['primary_code_QA']],_0x1d53ca=[_0x43b6d6[_0x2328e2(0x1ab)]['secondary_code_QA']],_0x361126=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x1bc)]],_0x3130ad=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x177)]],_0x4dd567=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x15d)]],_0x10f3fd=[_0x43b6d6['body']['return_qty_QA']];else var _0x4b9de6=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x16e)]],_0x2e437b=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x17a)]],_0x1d53ca=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x184)]],_0x361126=[..._0x43b6d6[_0x2328e2(0x1ab)]['product_code_QA']],_0x3130ad=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x177)]],_0x4dd567=[..._0x43b6d6['body'][_0x2328e2(0x15d)]],_0x10f3fd=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x163)]];const _0x266112=_0x4b9de6['map'](_0x2ac6cf=>{return _0x2ac6cf={'product_name':_0x2ac6cf};});_0x2e437b[_0x2328e2(0x158)]((_0x17d0a9,_0x350329)=>{_0x266112[_0x350329]['primary_code']=_0x17d0a9;}),_0x1d53ca[_0x2328e2(0x158)]((_0x20b07b,_0x191295)=>{_0x266112[_0x191295]['secondary_code']=_0x20b07b;}),_0x361126['forEach']((_0x1e14fe,_0x352692)=>{var _0x2f63d1=_0x2328e2;_0x266112[_0x352692][_0x2f63d1(0x18e)]=_0x1e14fe;}),_0x3130ad[_0x2328e2(0x158)]((_0x30a03a,_0x6f3a46)=>{var _0x2d47a2=_0x2328e2;_0x266112[_0x6f3a46][_0x2d47a2(0x197)]=_0x30a03a;}),_0x4dd567[_0x2328e2(0x158)]((_0x2e5404,_0x342009)=>{var _0x11fe29=_0x2328e2;_0x266112[_0x342009][_0x11fe29(0x150)]=_0x2e5404;}),_0x10f3fd['forEach']((_0x1218ee,_0xd7eb51)=>{var _0x282977=_0x2328e2;_0x266112[_0xd7eb51][_0x282977(0x192)]=_0x1218ee;}),_0x1cc13a[_0x2328e2(0x1bb)][_0x2328e2(0x158)](_0x222101=>{const _0x486a9b=_0x4c52b8['product_details']['map'](_0x1859e5=>{var _0x445dae=a0_0x31e3;_0x1859e5[_0x445dae(0x19b)]==_0x222101[_0x445dae(0x19b)]&&(_0x1859e5[_0x445dae(0x155)]=parseInt(_0x1859e5[_0x445dae(0x155)])+parseInt(_0x222101[_0x445dae(0x192)]));});}),await _0x4c52b8['save'](),_0x1cc13a[_0x2328e2(0x1a5)]=_0x34b40a,_0x1cc13a[_0x2328e2(0x168)]=_0x56c238,_0x1cc13a[_0x2328e2(0x15f)]=_0x5929d9,_0x1cc13a[_0x2328e2(0x17e)]=_0x920b5d,_0x1cc13a[_0x2328e2(0x1bb)]=_0x266112,_0x1cc13a[_0x2328e2(0x174)]=_0x548289,_0x1cc13a[_0x2328e2(0x151)]=_0x43078a,_0x1cc13a[_0x2328e2(0x1a9)]=_0x153524;const _0x1032b5=await _0x1cc13a['save'](),_0x6507f8=await c_payment_data[_0x2328e2(0x194)]({'invoice':_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x1a5)],'reason':_0x2328e2(0x147)});_0x6507f8[_0x2328e2(0x169)]=_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x169)],_0x6507f8[_0x2328e2(0x15f)]=_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x15f)],await _0x6507f8['save'](),_0x43b6d6[_0x2328e2(0x173)]('success',_0x2328e2(0x144)),_0x1cd7f6[_0x2328e2(0x166)](_0x2328e2(0x14b));}catch(_0x17de3a){console[_0x2328e2(0x15b)](_0x17de3a),_0x1cd7f6[_0x2328e2(0x1b7)](0xc8)[_0x2328e2(0x178)]({'message':_0x17de3a[_0x2328e2(0x183)]});}else try{const _0x4023d2=_0x43b6d6[_0x2328e2(0x148)]['id'];console[_0x2328e2(0x15b)](_0x4023d2);const _0x206a77=await sales_return[_0x2328e2(0x194)]({'invoice':_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x1a5)]});console[_0x2328e2(0x15b)]('old_data',_0x206a77);const _0x77cd38=await warehouse[_0x2328e2(0x194)]({'name':_0x206a77[_0x2328e2(0x151)],'room':_0x206a77[_0x2328e2(0x1a9)]});console['log'](_0x2328e2(0x15c),_0x77cd38);const {invoice:_0x2898a1,customer:_0x109835,date:_0x35c7a8,warehouse_name:_0x30b650,product_name:_0x13309b,primary_code:_0x38999c,secondary_code:_0x31395e,product_code:_0x20a8c4,sales_quantity:_0x24e502,stocks:_0xa9ebbe,return_qty:_0x131ff0,note:_0x59d5bc,to_warehouse_name:_0x24e773,to_Room_name:_0x43ec42}=_0x43b6d6[_0x2328e2(0x1ab)];console[_0x2328e2(0x15b)](_0x43b6d6[_0x2328e2(0x1ab)]);if(typeof _0x13309b==_0x2328e2(0x171))var _0x4b9de6=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x19b)]],_0x2e437b=[_0x43b6d6[_0x2328e2(0x1ab)]['primary_code']],_0x1d53ca=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x157)]],_0x361126=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x18e)]],_0x3130ad=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x164)]],_0x4dd567=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x191)]],_0x10f3fd=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x192)]],_0x1fba38=[_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x14e)]],_0x96ef8e=[_0x43b6d6[_0x2328e2(0x1ab)]['bin']],_0x259bc1=[_0x43b6d6[_0x2328e2(0x1ab)]['types']],_0x393331=[_0x43b6d6[_0x2328e2(0x1ab)]['floorlevel']];else var _0x4b9de6=[..._0x43b6d6[_0x2328e2(0x1ab)]['product_name']],_0x2e437b=[..._0x43b6d6[_0x2328e2(0x1ab)]['primary_code']],_0x1d53ca=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x157)]],_0x361126=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x18e)]],_0x3130ad=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x164)]],_0x4dd567=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x191)]],_0x10f3fd=[..._0x43b6d6[_0x2328e2(0x1ab)]['return_qty']],_0x1fba38=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x14e)]],_0x96ef8e=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x198)]],_0x259bc1=[..._0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x156)]],_0x393331=[..._0x43b6d6[_0x2328e2(0x1ab)]['floorlevel']];const _0x3bc326=_0x4b9de6[_0x2328e2(0x1af)](_0x572894=>{return _0x572894={'product_name':_0x572894};});_0x2e437b[_0x2328e2(0x158)]((_0x2aed23,_0x2f048f)=>{var _0x368923=_0x2328e2;_0x3bc326[_0x2f048f][_0x368923(0x14c)]=_0x2aed23;}),_0x1d53ca['forEach']((_0x52f956,_0x39676c)=>{var _0xc3ec19=_0x2328e2;_0x3bc326[_0x39676c][_0xc3ec19(0x157)]=_0x52f956;}),_0x361126['forEach']((_0x3a582e,_0x1f4c6e)=>{var _0x5aa3d8=_0x2328e2;_0x3bc326[_0x1f4c6e][_0x5aa3d8(0x18e)]=_0x3a582e;}),_0x3130ad[_0x2328e2(0x158)]((_0x28019a,_0x175917)=>{var _0x19cfa2=_0x2328e2;_0x3bc326[_0x175917][_0x19cfa2(0x197)]=_0x28019a;}),_0x4dd567[_0x2328e2(0x158)]((_0x5336ce,_0x2a8442)=>{var _0x394047=_0x2328e2;_0x3bc326[_0x2a8442][_0x394047(0x150)]=_0x5336ce;}),_0x10f3fd['forEach']((_0x50bb3c,_0x4546e4)=>{var _0x1d3265=_0x2328e2;_0x3bc326[_0x4546e4][_0x1d3265(0x192)]=_0x50bb3c;}),_0x1fba38[_0x2328e2(0x158)]((_0x223028,_0x36e41f)=>{_0x3bc326[_0x36e41f]['bay']=_0x223028;}),_0x96ef8e['forEach']((_0x10ce39,_0x15e88a)=>{var _0xa530ff=_0x2328e2;_0x3bc326[_0x15e88a][_0xa530ff(0x198)]=_0x10ce39;}),_0x259bc1[_0x2328e2(0x158)]((_0x81cd07,_0x327928)=>{var _0x4e9ad9=_0x2328e2;_0x3bc326[_0x327928][_0x4e9ad9(0x179)]=_0x81cd07;}),_0x393331[_0x2328e2(0x158)]((_0x1dfa9f,_0x6e2a34)=>{_0x3bc326[_0x6e2a34]['floorlevel']=_0x1dfa9f;});var _0xe58fad=0x0;_0x3bc326[_0x2328e2(0x158)](_0x4af1b0=>{var _0x24c218=_0x2328e2;console['log'](_0x24c218(0x159),_0x4af1b0),(parseInt(_0x4af1b0[_0x24c218(0x197)])<parseInt(_0x4af1b0[_0x24c218(0x192)])||parseInt(_0x4af1b0[_0x24c218(0x150)])<parseInt(_0x4af1b0['return_qty'])&&parseInt(_0x4af1b0[_0x24c218(0x197)])>parseInt(_0x4af1b0['return_qty'])||parseInt(_0x4af1b0[_0x24c218(0x192)])==0x0)&&_0xe58fad++;});if(_0xe58fad!=0x0)return _0x43b6d6['flash'](_0x2328e2(0x141),_0x2328e2(0x17f)),_0x1cd7f6[_0x2328e2(0x166)](_0x2328e2(0x18f));_0x206a77[_0x2328e2(0x16c)]['forEach'](_0x5920ef=>{var _0x22ffc6=_0x2328e2;const _0x455f89=_0x77cd38[_0x22ffc6(0x17d)][_0x22ffc6(0x1af)](_0xe40f16=>{var _0x214915=_0x22ffc6;_0xe40f16[_0x214915(0x19b)]==_0x5920ef[_0x214915(0x19b)]&&_0xe40f16['floorlevel']==_0x5920ef[_0x214915(0x193)]&&_0xe40f16[_0x214915(0x179)]==_0x5920ef[_0x214915(0x179)]&&_0xe40f16[_0x214915(0x198)]==_0x5920ef[_0x214915(0x198)]&&_0xe40f16[_0x214915(0x14e)]==_0x5920ef[_0x214915(0x14e)]&&(_0xe40f16[_0x214915(0x155)]=parseInt(_0xe40f16[_0x214915(0x155)])+parseInt(_0x5920ef['return_qty']));});}),console[_0x2328e2(0x15b)]('old_warehouse_data',_0x77cd38),await _0x77cd38[_0x2328e2(0x14a)](),_0x206a77[_0x2328e2(0x1a5)]=_0x2898a1,_0x206a77[_0x2328e2(0x168)]=_0x109835,_0x206a77['date']=_0x35c7a8,_0x206a77['warehouse_name']=_0x30b650,_0x206a77[_0x2328e2(0x16c)]=_0x3bc326,_0x206a77[_0x2328e2(0x174)]=_0x59d5bc,_0x206a77[_0x2328e2(0x151)]=_0x24e773,_0x206a77[_0x2328e2(0x1a9)]=_0x43ec42;const _0x3a09cc=await _0x206a77['save']();console[_0x2328e2(0x15b)](_0x2328e2(0x172),_0x3a09cc);const _0x379ed4=await c_payment_data[_0x2328e2(0x194)]({'invoice':_0x43b6d6[_0x2328e2(0x1ab)]['invoice'],'reason':_0x2328e2(0x147)});_0x379ed4[_0x2328e2(0x169)]=_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x169)],_0x379ed4[_0x2328e2(0x15f)]=_0x43b6d6[_0x2328e2(0x1ab)][_0x2328e2(0x15f)],await _0x379ed4[_0x2328e2(0x14a)](),_0x43b6d6[_0x2328e2(0x173)]('success',_0x2328e2(0x144)),_0x1cd7f6[_0x2328e2(0x166)]('/sales_return/view');}catch(_0x5352a9){console[_0x2328e2(0x15b)](_0x5352a9),_0x1cd7f6[_0x2328e2(0x1b7)](0xc8)[_0x2328e2(0x178)]({'message':_0x5352a9[_0x2328e2(0x183)]});}}),router['post'](a0_0x232a09(0x170),auth,async(_0xc61b0c,_0x1cdcc7)=>{var _0x5ce8d4=a0_0x232a09;try{const _0x7f9d=_0xc61b0c[_0x5ce8d4(0x148)]['id'],{invoice:_0x32b2df,customer:_0x2613f2,payable_to_customer:_0x137cc5,paid_amount:_0x2c013b}=_0xc61b0c[_0x5ce8d4(0x1ab)],_0x470c09=await sales_return[_0x5ce8d4(0x165)](_0x7f9d);console[_0x5ce8d4(0x15b)](_0x5ce8d4(0x16d),_0x470c09),console[_0x5ce8d4(0x15b)](_0x137cc5),console[_0x5ce8d4(0x15b)](_0x2c013b);var _0x59c928=_0x137cc5-_0x2c013b;console[_0x5ce8d4(0x15b)](_0x5ce8d4(0x188),_0x59c928),_0x470c09[_0x5ce8d4(0x195)]=parseFloat(_0x2c013b)+parseFloat(_0x470c09['paid_amount']),_0x470c09[_0x5ce8d4(0x1ba)]=_0x59c928,console['log'](_0x470c09);const _0x4c9650=await _0x470c09['save']();console[_0x5ce8d4(0x15b)](0x1b207);const _0x491a4b=await c_payment_data[_0x5ce8d4(0x194)]({'invoice':_0xc61b0c['body'][_0x5ce8d4(0x1a5)],'reason':_0x5ce8d4(0x147)});console[_0x5ce8d4(0x15b)](_0x5ce8d4(0x1b5),_0x491a4b),_0x491a4b['amount']=_0x59c928,await _0x491a4b[_0x5ce8d4(0x14a)]();let _0x417590=new Date(),_0xa5a463=('0'+_0x417590[_0x5ce8d4(0x146)]())[_0x5ce8d4(0x1b3)](-0x2),_0x2cb997=('0'+(_0x417590['getMonth']()+0x1))[_0x5ce8d4(0x1b3)](-0x2),_0x36d081=_0x417590['getFullYear'](),_0x5f38d8=_0x36d081+'-'+_0x2cb997+'-'+_0xa5a463;const _0xab61eb=new customer_payment({'invoice':_0x32b2df,'date':_0x36d081+'-'+_0x2cb997+'-'+_0xa5a463,'customer':_0x2613f2,'reason':_0x5ce8d4(0x190),'amount':_0x2c013b}),_0x4110a0=await _0xab61eb[_0x5ce8d4(0x14a)]();_0xc61b0c['flash'](_0x5ce8d4(0x196),'payment\x20successfull'),_0x1cdcc7['redirect'](_0x5ce8d4(0x1b2));}catch(_0x445e4e){console[_0x5ce8d4(0x15b)](_0x445e4e);}}),router[a0_0x232a09(0x1a0)](a0_0x232a09(0x16f),auth,async(_0x4fa922,_0x53d93f)=>{var _0x1d3ac1=a0_0x232a09;try{const {username:_0x49722c,email:_0x186500,role:_0x4cc7b2}=_0x4fa922[_0x1d3ac1(0x176)],_0x3961c8=_0x4fa922['user'],_0x35fdf9=await profile[_0x1d3ac1(0x194)]({'email':_0x3961c8[_0x1d3ac1(0x16b)]}),_0x12ee48=await master_shop[_0x1d3ac1(0x1b1)]();console[_0x1d3ac1(0x15b)](_0x1d3ac1(0x1a4),_0x12ee48);const _0x42dbfb=_0x4fa922[_0x1d3ac1(0x148)]['id'],_0x22a91b=await sales_return[_0x1d3ac1(0x165)](_0x42dbfb);console[_0x1d3ac1(0x15b)](_0x22a91b);const _0x206d86=await customer[_0x1d3ac1(0x194)]({'name':_0x22a91b[_0x1d3ac1(0x168)]});console[_0x1d3ac1(0x15b)](_0x206d86);if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x17b)){var _0x313d31=users['English'];console['log'](_0x313d31);}else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x142))var _0x313d31=users[_0x1d3ac1(0x142)];else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x175))var _0x313d31=users[_0x1d3ac1(0x175)];else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x1b4))var _0x313d31=users['Spanish'];else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x143))var _0x313d31=users['French'];else{if(_0x12ee48[0x0]['language']==_0x1d3ac1(0x162))var _0x313d31=users['Portuguese'];else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x154))var _0x313d31=users[_0x1d3ac1(0x154)];else{if(_0x12ee48[0x0][_0x1d3ac1(0x1ad)]==_0x1d3ac1(0x19f))var _0x313d31=users[_0x1d3ac1(0x167)];}}}}}}}_0x53d93f[_0x1d3ac1(0x181)](_0x1d3ac1(0x17c),{'success':_0x4fa922[_0x1d3ac1(0x173)](_0x1d3ac1(0x196)),'errors':_0x4fa922[_0x1d3ac1(0x173)]('errors'),'role':_0x3961c8,'profile':_0x35fdf9,'master_shop':_0x12ee48,'customers':_0x206d86,'sales':_0x22a91b,'language':_0x313d31});}catch(_0x1d4b42){console[_0x1d3ac1(0x15b)](_0x1d4b42);}}),module[a0_0x232a09(0x1a2)]=router;