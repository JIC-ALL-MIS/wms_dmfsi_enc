var a0_0x21292b=a0_0x1eb8;function a0_0x4613(){var _0xa0c76c=['string','sales_quantity','Finished\x20Goods','message','express','$product_details.type','return_sale','product_stock','type','sales_return_finished','Portuguese','$product_details.product_stock','slice','secondary_code','$product_details.bay','919918OIpxDv','get','$product_details.rack','bay','floorlevel','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','customers','Arabic\x20(ae)','name','../models/all_models','sales_quantity_QA','756mhDful','Arabic','post','product_details','sales_return_invoice','errors','getFullYear','1793976xWdwzr','return_qty','5772327NBRHqv','json','master','exports','aggregate','product_name_QA','Router','/view','Spanish','7222260tfrgVw','Hindi','English','$product_details.product_code','types','customer','getDate','/sales_return_finished/view','note','new\x20new_data','save','ToWarehouse','French','date','due_amount','QA\x20Warehouse','German','redirect','product_name','Returned\x20Payment\x20For\x20Sale\x20Return','$product_details.floorlevel','findOne','return_qty_QA','Sale\x20Return','66240cMljOa','$customer_docs','params','English\x20(US)','subtract','47891240SwBZrk','purchase\x20return\x20successfully','data','Chinese','stocks','1152225zcUGur','/invoice/:id','primary_code_QA','ToRoom','invoice','find','/sales_return/view','log','paid_amount','bin','stocks_QA','$product_details.primary_code','email','secondary_code_QA','user','map','old_data','c_payment','findById','status','language','render','/view/:id','amount','../middleware/auth','Portuguese\x20(BR)','getMonth','stock','success','sale_qty','primary_code','old_warehouse_data','$product_details','$product_details.product_name','$product_details.secondary_code','suppliers','flash','product_code','return_sale_edit_finished','forEach','return_sale_QA','$name','body','$product_details._id'];a0_0x4613=function(){return _0xa0c76c;};return a0_0x4613();}function a0_0x1eb8(_0x37afa9,_0x206cf2){var _0x461346=a0_0x4613();return a0_0x1eb8=function(_0x1eb8f5,_0x5481ef){_0x1eb8f5=_0x1eb8f5-0x162;var _0x1a93df=_0x461346[_0x1eb8f5];return _0x1a93df;},a0_0x1eb8(_0x37afa9,_0x206cf2);}(function(_0x572d7b,_0x4e60da){var _0x286417=a0_0x1eb8,_0x2b4e72=_0x572d7b();while(!![]){try{var _0xac8a88=-parseInt(_0x286417(0x18c))/0x1+-parseInt(_0x286417(0x17a))/0x2+-parseInt(_0x286417(0x18e))/0x3+-parseInt(_0x286417(0x197))/0x4+-parseInt(_0x286417(0x1b9))/0x5+-parseInt(_0x286417(0x1af))/0x6*(-parseInt(_0x286417(0x185))/0x7)+parseInt(_0x286417(0x1b4))/0x8;if(_0xac8a88===_0x4e60da)break;else _0x2b4e72['push'](_0x2b4e72['shift']());}catch(_0x13f93b){_0x2b4e72['push'](_0x2b4e72['shift']());}}}(a0_0x4613,0xeb83f));const express=require(a0_0x21292b(0x16f)),app=express(),router=express[a0_0x21292b(0x194)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x21292b(0x183)),auth=require(a0_0x21292b(0x1d1)),users=require('../public/language/languages.json');router[a0_0x21292b(0x17b)](a0_0x21292b(0x195),auth,async(_0x5b85b2,_0x271d8c)=>{var _0x3aa099=a0_0x21292b;try{const {username:_0x234f51,email:_0x3f9c64,role:_0x200a55}=_0x5b85b2[_0x3aa099(0x1c7)],_0x38bac8=_0x5b85b2[_0x3aa099(0x1c7)],_0x10cd28=await profile[_0x3aa099(0x1ac)]({'email':_0x38bac8['email']}),_0x12b22e=await master_shop[_0x3aa099(0x1be)](),_0x466866=await sales_return_finished[_0x3aa099(0x192)]([{'$lookup':{'from':_0x3aa099(0x180),'localField':_0x3aa099(0x19c),'foreignField':_0x3aa099(0x182),'as':'customer_docs'}},{'$unwind':_0x3aa099(0x1b0)}]);if(_0x12b22e[0x0][_0x3aa099(0x1cd)]==_0x3aa099(0x1b2)){var _0x3a13f7=users['English'];console['log'](_0x3a13f7);}else{if(_0x12b22e[0x0][_0x3aa099(0x1cd)]==_0x3aa099(0x198))var _0x3a13f7=users['Hindi'];else{if(_0x12b22e[0x0][_0x3aa099(0x1cd)]==_0x3aa099(0x1a7))var _0x3a13f7=users[_0x3aa099(0x1a7)];else{if(_0x12b22e[0x0]['language']==_0x3aa099(0x196))var _0x3a13f7=users[_0x3aa099(0x196)];else{if(_0x12b22e[0x0]['language']=='French')var _0x3a13f7=users[_0x3aa099(0x1a3)];else{if(_0x12b22e[0x0][_0x3aa099(0x1cd)]=='Portuguese\x20(BR)')var _0x3a13f7=users[_0x3aa099(0x175)];else{if(_0x12b22e[0x0]['language']==_0x3aa099(0x1b7))var _0x3a13f7=users[_0x3aa099(0x1b7)];else{if(_0x12b22e[0x0][_0x3aa099(0x1cd)]=='Arabic\x20(ae)')var _0x3a13f7=users[_0x3aa099(0x186)];}}}}}}}_0x271d8c[_0x3aa099(0x1ce)](_0x3aa099(0x174),{'success':_0x5b85b2[_0x3aa099(0x163)](_0x3aa099(0x1d5)),'errors':_0x5b85b2[_0x3aa099(0x163)](_0x3aa099(0x18a)),'role':_0x38bac8,'profile':_0x10cd28,'master_shop':_0x12b22e,'user':_0x466866,'language':_0x3a13f7});}catch(_0x191f37){console['log'](_0x191f37);}}),router[a0_0x21292b(0x17b)](a0_0x21292b(0x1cf),auth,async(_0x19f842,_0x33f406)=>{var _0x201182=a0_0x21292b;try{const {username:_0x3b1b13,email:_0x57f4a6,role:_0xdf930d}=_0x19f842[_0x201182(0x1c7)],_0x37c8ae=_0x19f842[_0x201182(0x1c7)],_0x366ff2=await profile[_0x201182(0x1ac)]({'email':_0x37c8ae[_0x201182(0x1c5)]}),_0x56f4aa=await master_shop['find']();console[_0x201182(0x1c0)](_0x201182(0x190),_0x56f4aa);const _0x358645=_0x19f842[_0x201182(0x1b1)]['id'];console['log'](_0x358645);var _0x46dfec=['Return\x20Rooms'];const _0xae306f=await sales_return_finished[_0x201182(0x1cb)](_0x358645),_0x31b674=await warehouse[_0x201182(0x192)]([{'$match':{'name':_0xae306f['ToWarehouse'],'room':_0xae306f['ToRoom']}},{'$unwind':_0x201182(0x1d9)},{'$group':{'_id':_0x201182(0x16a),'name':{'$first':_0x201182(0x1da)},'product_stock':{'$first':_0x201182(0x176)},'bay':{'$first':_0x201182(0x179)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x201182(0x170)},'floorlevel':{'$first':_0x201182(0x1ab)},'primary_code':{'$first':_0x201182(0x1c4)},'secondary_code':{'$first':_0x201182(0x1db)},'product_code':{'$first':_0x201182(0x19a)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x201182(0x17c)}}}]);console[_0x201182(0x1c0)](_0x31b674);const _0x202963=await warehouse[_0x201182(0x192)]([{'$match':{'status':'Enabled','warehouse_category':_0x201182(0x16d)}},{'$group':{'_id':_0x201182(0x168),'name':{'$first':_0x201182(0x168)}}},{'$sort':{'name':0x1}}]),_0x566a80=await warehouse[_0x201182(0x192)]([{'$match':{'status':'Enabled','name':_0x201182(0x1a6)}},{'$group':{'_id':_0x201182(0x168),'name':{'$first':_0x201182(0x168)}}},{'$sort':{'name':0x1}}]),_0x9bed04=await product[_0x201182(0x1be)]({});if(_0x56f4aa[0x0]['language']==_0x201182(0x1b2)){var _0x3b7ead=users[_0x201182(0x199)];console['log'](_0x3b7ead);}else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x198))var _0x3b7ead=users[_0x201182(0x198)];else{if(_0x56f4aa[0x0]['language']==_0x201182(0x1a7))var _0x3b7ead=users[_0x201182(0x1a7)];else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x196))var _0x3b7ead=users[_0x201182(0x196)];else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x1a3))var _0x3b7ead=users[_0x201182(0x1a3)];else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x1d2))var _0x3b7ead=users[_0x201182(0x175)];else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x1b7))var _0x3b7ead=users['Chinese'];else{if(_0x56f4aa[0x0][_0x201182(0x1cd)]==_0x201182(0x181))var _0x3b7ead=users['Arabic'];}}}}}}}_0x33f406['render'](_0x201182(0x165),{'success':_0x19f842[_0x201182(0x163)]('success'),'errors':_0x19f842[_0x201182(0x163)](_0x201182(0x18a)),'role':_0x37c8ae,'profile':_0x366ff2,'master_shop':_0x56f4aa,'user':_0xae306f,'stock':_0x31b674,'unit':_0x9bed04,'language':_0x3b7ead,'warehouses':_0x202963,'rooms':_0x46dfec,'warehouse_QA':_0x566a80});}catch(_0x5f3010){console[_0x201182(0x1c0)](_0x5f3010);}}),router[a0_0x21292b(0x187)]('/view/:id',auth,async(_0x2a594e,_0x496898)=>{var _0x20935c=a0_0x21292b;if(_0x2a594e[_0x20935c(0x169)]['for_categorize']=='QA')try{const _0x27e68c=_0x2a594e['params']['id'],_0x58b545=await sales_return[_0x20935c(0x1ac)]({'invoice':_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1bd)]}),_0x3f729d=await warehouse['findOne']({'name':_0x58b545[_0x20935c(0x1a2)],'room':_0x58b545[_0x20935c(0x1bc)]}),{invoice:_0x461bbf,customer:_0x3c800c,date:_0x451276,warehouse_name:_0x5c7acb,product_name:_0x4edb92,primary_code:_0x5e496e,secondary_code:_0x31065a,product_code:_0x2e5484,sales_quantity:_0x190029,stocks:_0x1cdb34,return_qty:_0x54d6f5,note:_0x10ddda,to_warehouse_name_QA:_0x2756fc,to_Room_name_QA:_0x5bfbd2}=_0x2a594e[_0x20935c(0x169)];if(typeof product_name_QA==_0x20935c(0x16b))var _0x53e14e=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x193)]],_0x29b39c=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1bb)]],_0x1e7a3c=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1c6)]],_0x3ed207=[_0x2a594e[_0x20935c(0x169)]['product_code_QA']],_0x78d5ea=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x184)]],_0x11d026=[_0x2a594e[_0x20935c(0x169)]['stocks_QA']],_0xcb8c88=[_0x2a594e['body'][_0x20935c(0x1ad)]];else var _0x53e14e=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x193)]],_0x29b39c=[..._0x2a594e[_0x20935c(0x169)]['primary_code_QA']],_0x1e7a3c=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x1c6)]],_0x3ed207=[..._0x2a594e[_0x20935c(0x169)]['product_code_QA']],_0x78d5ea=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x184)]],_0x11d026=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x1c3)]],_0xcb8c88=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x1ad)]];const _0x572314=_0x53e14e[_0x20935c(0x1c8)](_0x4b151f=>{return _0x4b151f={'product_name':_0x4b151f};});_0x29b39c['forEach']((_0x12e079,_0x236fc7)=>{_0x572314[_0x236fc7]['primary_code']=_0x12e079;}),_0x1e7a3c[_0x20935c(0x166)]((_0x5bc3d1,_0xe240a2)=>{_0x572314[_0xe240a2]['secondary_code']=_0x5bc3d1;}),_0x3ed207[_0x20935c(0x166)]((_0x38c95e,_0x5985bb)=>{var _0xe4665f=_0x20935c;_0x572314[_0x5985bb][_0xe4665f(0x164)]=_0x38c95e;}),_0x78d5ea['forEach']((_0x226a58,_0x3118c7)=>{_0x572314[_0x3118c7]['sale_qty']=_0x226a58;}),_0x11d026[_0x20935c(0x166)]((_0x18bf90,_0x427bda)=>{var _0x48be1d=_0x20935c;_0x572314[_0x427bda][_0x48be1d(0x1d4)]=_0x18bf90;}),_0xcb8c88[_0x20935c(0x166)]((_0x16c723,_0x11b6cc)=>{var _0x224360=_0x20935c;_0x572314[_0x11b6cc][_0x224360(0x18d)]=_0x16c723;}),_0x58b545['return_sale_QA'][_0x20935c(0x166)](_0xf3dba=>{var _0x1a08b5=_0x20935c;const _0x3b9288=_0x3f729d[_0x1a08b5(0x188)][_0x1a08b5(0x1c8)](_0x3718cd=>{var _0x580706=_0x1a08b5;_0x3718cd['product_name']==_0xf3dba[_0x580706(0x1a9)]&&(_0x3718cd[_0x580706(0x172)]=parseInt(_0x3718cd[_0x580706(0x172)])+parseInt(_0xf3dba[_0x580706(0x18d)]));});}),await _0x3f729d[_0x20935c(0x1a1)](),_0x58b545[_0x20935c(0x1bd)]=_0x461bbf,_0x58b545[_0x20935c(0x19c)]=_0x3c800c,_0x58b545[_0x20935c(0x1a4)]=_0x451276,_0x58b545['warehouse_name']=_0x5c7acb,_0x58b545[_0x20935c(0x167)]=_0x572314,_0x58b545[_0x20935c(0x19f)]=_0x10ddda,_0x58b545[_0x20935c(0x1a2)]=_0x2756fc,_0x58b545[_0x20935c(0x1bc)]=_0x5bfbd2;const _0x338da3=await _0x58b545[_0x20935c(0x1a1)](),_0x30c55c=await c_payment_data[_0x20935c(0x1ac)]({'invoice':_0x2a594e['body'][_0x20935c(0x1bd)],'reason':_0x20935c(0x1ae)});_0x30c55c[_0x20935c(0x162)]=_0x2a594e[_0x20935c(0x169)][_0x20935c(0x162)],_0x30c55c['date']=_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1a4)],await _0x30c55c[_0x20935c(0x1a1)](),_0x2a594e['flash'](_0x20935c(0x1d5),_0x20935c(0x1b5)),_0x496898['redirect'](_0x20935c(0x19e));}catch(_0x4a4bc0){console['log'](_0x4a4bc0),_0x496898['status'](0xc8)[_0x20935c(0x18f)]({'message':_0x4a4bc0[_0x20935c(0x16e)]});}else try{const _0x29cc5d=_0x2a594e[_0x20935c(0x1b1)]['id'];console[_0x20935c(0x1c0)](_0x29cc5d);const _0x14b168=await sales_return[_0x20935c(0x1ac)]({'invoice':_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1bd)]});console[_0x20935c(0x1c0)](_0x20935c(0x1c9),_0x14b168);const _0x1eda03=await warehouse[_0x20935c(0x1ac)]({'name':_0x14b168['ToWarehouse'],'room':_0x14b168['ToRoom']});console[_0x20935c(0x1c0)]('old_warehouse_data',_0x1eda03);const {invoice:_0x57ef8a,customer:_0x4fe212,date:_0x2a41dc,warehouse_name:_0x3b5ae5,product_name:_0xfd7249,primary_code:_0x370cde,secondary_code:_0x4e78ba,product_code:_0x7d6a9b,sales_quantity:_0x32a6cf,stocks:_0x32443e,return_qty:_0x6c341e,note:_0x137c5a,to_warehouse_name:_0x5581b8,to_Room_name:_0x53233d}=_0x2a594e['body'];console[_0x20935c(0x1c0)](_0x2a594e[_0x20935c(0x169)]);if(typeof _0xfd7249==_0x20935c(0x16b))var _0x53e14e=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1a9)]],_0x29b39c=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1d7)]],_0x1e7a3c=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x178)]],_0x3ed207=[_0x2a594e['body']['product_code']],_0x78d5ea=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x16c)]],_0x11d026=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1b8)]],_0xcb8c88=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x18d)]],_0x1959e7=[_0x2a594e['body'][_0x20935c(0x17d)]],_0x4489a4=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1c2)]],_0x2c8533=[_0x2a594e[_0x20935c(0x169)][_0x20935c(0x19b)]],_0xe378dc=[_0x2a594e[_0x20935c(0x169)]['floorlevel']];else var _0x53e14e=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x1a9)]],_0x29b39c=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x1d7)]],_0x1e7a3c=[..._0x2a594e['body'][_0x20935c(0x178)]],_0x3ed207=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x164)]],_0x78d5ea=[..._0x2a594e[_0x20935c(0x169)]['sales_quantity']],_0x11d026=[..._0x2a594e[_0x20935c(0x169)]['stocks']],_0xcb8c88=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x18d)]],_0x1959e7=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x17d)]],_0x4489a4=[..._0x2a594e['body'][_0x20935c(0x1c2)]],_0x2c8533=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x19b)]],_0xe378dc=[..._0x2a594e[_0x20935c(0x169)][_0x20935c(0x17e)]];const _0x1d0ea3=_0x53e14e['map'](_0x7ffefd=>{return _0x7ffefd={'product_name':_0x7ffefd};});_0x29b39c[_0x20935c(0x166)]((_0x4b7b2a,_0xbd6e7c)=>{var _0x1b8706=_0x20935c;_0x1d0ea3[_0xbd6e7c][_0x1b8706(0x1d7)]=_0x4b7b2a;}),_0x1e7a3c[_0x20935c(0x166)]((_0x3cfb87,_0x4b8b69)=>{var _0x11bcba=_0x20935c;_0x1d0ea3[_0x4b8b69][_0x11bcba(0x178)]=_0x3cfb87;}),_0x3ed207[_0x20935c(0x166)]((_0x5c2be7,_0x52b55b)=>{_0x1d0ea3[_0x52b55b]['product_code']=_0x5c2be7;}),_0x78d5ea['forEach']((_0x46288d,_0xe825f8)=>{var _0x337d52=_0x20935c;_0x1d0ea3[_0xe825f8][_0x337d52(0x1d6)]=_0x46288d;}),_0x11d026[_0x20935c(0x166)]((_0x205ca6,_0x3e2795)=>{var _0x579d18=_0x20935c;_0x1d0ea3[_0x3e2795][_0x579d18(0x1d4)]=_0x205ca6;}),_0xcb8c88[_0x20935c(0x166)]((_0x2decdf,_0x5c03cd)=>{_0x1d0ea3[_0x5c03cd]['return_qty']=_0x2decdf;}),_0x1959e7[_0x20935c(0x166)]((_0x5c82e8,_0x2498c8)=>{var _0x2bc2fa=_0x20935c;_0x1d0ea3[_0x2498c8][_0x2bc2fa(0x17d)]=_0x5c82e8;}),_0x4489a4[_0x20935c(0x166)]((_0x21c70,_0x46dc30)=>{_0x1d0ea3[_0x46dc30]['bin']=_0x21c70;}),_0x2c8533[_0x20935c(0x166)]((_0x4bab11,_0x2884fc)=>{var _0x9a80ec=_0x20935c;_0x1d0ea3[_0x2884fc][_0x9a80ec(0x173)]=_0x4bab11;}),_0xe378dc[_0x20935c(0x166)]((_0x4ca02e,_0x547276)=>{var _0x4b6ee0=_0x20935c;_0x1d0ea3[_0x547276][_0x4b6ee0(0x17e)]=_0x4ca02e;});var _0x459df5=0x0;_0x1d0ea3[_0x20935c(0x166)](_0x5a0ccb=>{var _0x5a78bb=_0x20935c;console[_0x5a78bb(0x1c0)]('foreach\x20newproduct',_0x5a0ccb),(parseInt(_0x5a0ccb[_0x5a78bb(0x1d6)])<parseInt(_0x5a0ccb[_0x5a78bb(0x18d)])||parseInt(_0x5a0ccb[_0x5a78bb(0x1d4)])<parseInt(_0x5a0ccb[_0x5a78bb(0x18d)])&&parseInt(_0x5a0ccb[_0x5a78bb(0x1d6)])>parseInt(_0x5a0ccb[_0x5a78bb(0x18d)])||parseInt(_0x5a0ccb[_0x5a78bb(0x18d)])==0x0)&&_0x459df5++;});if(_0x459df5!=0x0)return _0x2a594e['flash'](_0x20935c(0x18a),_0x20935c(0x17f)),_0x496898['redirect']('back');_0x14b168[_0x20935c(0x171)][_0x20935c(0x166)](_0x5ad3c4=>{var _0x1b2f31=_0x20935c;const _0x3a506b=_0x1eda03[_0x1b2f31(0x188)][_0x1b2f31(0x1c8)](_0x37b755=>{var _0x16eb3a=_0x1b2f31;_0x37b755[_0x16eb3a(0x1a9)]==_0x5ad3c4['product_name']&&_0x37b755['floorlevel']==_0x5ad3c4['floorlevel']&&_0x37b755[_0x16eb3a(0x173)]==_0x5ad3c4[_0x16eb3a(0x173)]&&_0x37b755[_0x16eb3a(0x1c2)]==_0x5ad3c4[_0x16eb3a(0x1c2)]&&_0x37b755[_0x16eb3a(0x17d)]==_0x5ad3c4[_0x16eb3a(0x17d)]&&(_0x37b755[_0x16eb3a(0x172)]=parseInt(_0x37b755[_0x16eb3a(0x172)])+parseInt(_0x5ad3c4[_0x16eb3a(0x18d)]));});}),console[_0x20935c(0x1c0)](_0x20935c(0x1d8),_0x1eda03),await _0x1eda03[_0x20935c(0x1a1)](),_0x14b168[_0x20935c(0x1bd)]=_0x57ef8a,_0x14b168['customer']=_0x4fe212,_0x14b168[_0x20935c(0x1a4)]=_0x2a41dc,_0x14b168['warehouse_name']=_0x3b5ae5,_0x14b168[_0x20935c(0x171)]=_0x1d0ea3,_0x14b168[_0x20935c(0x19f)]=_0x137c5a,_0x14b168[_0x20935c(0x1a2)]=_0x5581b8,_0x14b168[_0x20935c(0x1bc)]=_0x53233d;const _0xedf47b=await _0x14b168[_0x20935c(0x1a1)]();console[_0x20935c(0x1c0)](_0x20935c(0x1a0),_0xedf47b);const _0x17bef1=await c_payment_data[_0x20935c(0x1ac)]({'invoice':_0x2a594e[_0x20935c(0x169)][_0x20935c(0x1bd)],'reason':_0x20935c(0x1ae)});_0x17bef1['suppliers']=_0x2a594e[_0x20935c(0x169)]['suppliers'],_0x17bef1['date']=_0x2a594e[_0x20935c(0x169)]['date'],await _0x17bef1['save'](),_0x2a594e['flash'](_0x20935c(0x1d5),_0x20935c(0x1b5)),_0x496898['redirect'](_0x20935c(0x1bf));}catch(_0x325682){console[_0x20935c(0x1c0)](_0x325682),_0x496898[_0x20935c(0x1cc)](0xc8)[_0x20935c(0x18f)]({'message':_0x325682[_0x20935c(0x16e)]});}}),router[a0_0x21292b(0x187)]('/give_payment/:id',auth,async(_0x401406,_0x50f427)=>{var _0x34233f=a0_0x21292b;try{const _0x46936f=_0x401406[_0x34233f(0x1b1)]['id'],{invoice:_0x5ef8d0,customer:_0x2e7928,payable_to_customer:_0x324dd7,paid_amount:_0x513762}=_0x401406[_0x34233f(0x169)],_0x259e19=await sales_return[_0x34233f(0x1cb)](_0x46936f);console[_0x34233f(0x1c0)](_0x34233f(0x1b6),_0x259e19),console['log'](_0x324dd7),console[_0x34233f(0x1c0)](_0x513762);var _0x45d9c2=_0x324dd7-_0x513762;console[_0x34233f(0x1c0)](_0x34233f(0x1b3),_0x45d9c2),_0x259e19[_0x34233f(0x1c1)]=parseFloat(_0x513762)+parseFloat(_0x259e19[_0x34233f(0x1c1)]),_0x259e19[_0x34233f(0x1a5)]=_0x45d9c2,console['log'](_0x259e19);const _0x4528d2=await _0x259e19['save']();console[_0x34233f(0x1c0)](0x1b207);const _0x5a2e5a=await c_payment_data[_0x34233f(0x1ac)]({'invoice':_0x401406[_0x34233f(0x169)][_0x34233f(0x1bd)],'reason':_0x34233f(0x1ae)});console[_0x34233f(0x1c0)](_0x34233f(0x1ca),_0x5a2e5a),_0x5a2e5a[_0x34233f(0x1d0)]=_0x45d9c2,await _0x5a2e5a[_0x34233f(0x1a1)]();let _0x1a400f=new Date(),_0x110001=('0'+_0x1a400f[_0x34233f(0x19d)]())[_0x34233f(0x177)](-0x2),_0x4f5b0a=('0'+(_0x1a400f[_0x34233f(0x1d3)]()+0x1))[_0x34233f(0x177)](-0x2),_0x3e1b55=_0x1a400f[_0x34233f(0x18b)](),_0x53abf3=_0x3e1b55+'-'+_0x4f5b0a+'-'+_0x110001;const _0x50f339=new customer_payment({'invoice':_0x5ef8d0,'date':_0x3e1b55+'-'+_0x4f5b0a+'-'+_0x110001,'customer':_0x2e7928,'reason':_0x34233f(0x1aa),'amount':_0x513762}),_0x10af2a=await _0x50f339[_0x34233f(0x1a1)]();_0x401406[_0x34233f(0x163)](_0x34233f(0x1d5),'payment\x20successfull'),_0x50f427[_0x34233f(0x1a8)]('/sales_return/view');}catch(_0x3aa8af){console[_0x34233f(0x1c0)](_0x3aa8af);}}),router['get'](a0_0x21292b(0x1ba),auth,async(_0x4ccdf3,_0x1fc87b)=>{var _0x1c0b35=a0_0x21292b;try{const {username:_0x558a6a,email:_0x284f61,role:_0x516c6f}=_0x4ccdf3[_0x1c0b35(0x1c7)],_0x4da5b2=_0x4ccdf3[_0x1c0b35(0x1c7)],_0x1591fd=await profile[_0x1c0b35(0x1ac)]({'email':_0x4da5b2[_0x1c0b35(0x1c5)]}),_0x11e639=await master_shop[_0x1c0b35(0x1be)]();console['log'](_0x1c0b35(0x190),_0x11e639);const _0x408057=_0x4ccdf3['params']['id'],_0x1709e9=await sales_return[_0x1c0b35(0x1cb)](_0x408057);console[_0x1c0b35(0x1c0)](_0x1709e9);const _0xd1facc=await customer[_0x1c0b35(0x1ac)]({'name':_0x1709e9['customer']});console[_0x1c0b35(0x1c0)](_0xd1facc);if(_0x11e639[0x0][_0x1c0b35(0x1cd)]==_0x1c0b35(0x1b2)){var _0x4acf69=users[_0x1c0b35(0x199)];console[_0x1c0b35(0x1c0)](_0x4acf69);}else{if(_0x11e639[0x0][_0x1c0b35(0x1cd)]==_0x1c0b35(0x198))var _0x4acf69=users['Hindi'];else{if(_0x11e639[0x0]['language']==_0x1c0b35(0x1a7))var _0x4acf69=users[_0x1c0b35(0x1a7)];else{if(_0x11e639[0x0][_0x1c0b35(0x1cd)]=='Spanish')var _0x4acf69=users[_0x1c0b35(0x196)];else{if(_0x11e639[0x0][_0x1c0b35(0x1cd)]==_0x1c0b35(0x1a3))var _0x4acf69=users['French'];else{if(_0x11e639[0x0]['language']==_0x1c0b35(0x1d2))var _0x4acf69=users['Portuguese'];else{if(_0x11e639[0x0][_0x1c0b35(0x1cd)]=='Chinese')var _0x4acf69=users[_0x1c0b35(0x1b7)];else{if(_0x11e639[0x0][_0x1c0b35(0x1cd)]==_0x1c0b35(0x181))var _0x4acf69=users[_0x1c0b35(0x186)];}}}}}}}_0x1fc87b[_0x1c0b35(0x1ce)](_0x1c0b35(0x189),{'success':_0x4ccdf3[_0x1c0b35(0x163)](_0x1c0b35(0x1d5)),'errors':_0x4ccdf3['flash']('errors'),'role':_0x4da5b2,'profile':_0x1591fd,'master_shop':_0x11e639,'customers':_0xd1facc,'sales':_0x1709e9,'language':_0x4acf69});}catch(_0x3f9bd7){console[_0x1c0b35(0x1c0)](_0x3f9bd7);}}),module[a0_0x21292b(0x191)]=router;