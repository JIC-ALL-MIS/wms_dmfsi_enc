function a0_0x2700(_0x534f31,_0x49cc8a){var _0x17c24a=a0_0x17c2();return a0_0x2700=function(_0x2700cd,_0x29e21b){_0x2700cd=_0x2700cd-0x8d;var _0x3297b3=_0x17c24a[_0x2700cd];return _0x3297b3;},a0_0x2700(_0x534f31,_0x49cc8a);}function a0_0x17c2(){var _0xb49279=['string','/give_payment/:id','status','product_stock','$product_details.bin','aggregate','foreach\x20newproduct','$product_details.product_stock','Return\x20Rooms','purchase\x20return\x20successfully','back','getDate','product_details','type','warehouse_name','Chinese','bin','flash','$product_details','1021059ecYXue','../middleware/auth','old_warehouse_data','Arabic','types','render','json','return_sale','forEach','Arabic\x20(ae)','master','$product_details._id','English\x20(US)','ToWarehouse','Portuguese\x20(BR)','body','suppliers','781920FihKbA','language','floorlevel','/view/:id','success','user','$product_details.bay','log','return_qty_QA','secondary_code','find','$product_details.floorlevel','primary_code_QA','138TNtram','/sales_return_finished/view','607uBYmJf','682800emIAgz','French','return_qty','return_sale_QA','new\x20new_data','product_code','sales_quantity','Sale\x20Return','/view','product_code_QA','paid_amount','Enabled','sales_quantity_QA','findOne','4emmhKK','Finished\x20Goods','Hindi','49RlbwDB','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.product_code','$product_details.secondary_code','ToRoom','$product_details.primary_code','customer','English','note','map','message','../public/language/languages.json','sales_return_invoice','/sales_return/view','Spanish','German','getFullYear','sale_qty','product_name_QA','payment\x20successfull','/invoice/:id','express','$name','Returned\x20Payment\x20For\x20Sale\x20Return','findById','$product_details.storage','params','13332pTrKKA','invoice','c_payment','secondary_code_QA','customer_docs','$product_details.product_name','redirect','491529ixhuhk','subtract','amount','errors','save','$customer_docs','date','Portuguese','old_data','get','stocks','stock','$product_details.type','email','product_name','bay','name','exports','$product_details.rack','data','post','1274545gMbPlx','primary_code'];a0_0x17c2=function(){return _0xb49279;};return a0_0x17c2();}var a0_0x2297ec=a0_0x2700;(function(_0x43064b,_0x1166ec){var _0x550c4b=a0_0x2700,_0x3690f6=_0x43064b();while(!![]){try{var _0x3c0c84=-parseInt(_0x550c4b(0x95))/0x1*(-parseInt(_0x550c4b(0x93))/0x2)+parseInt(_0x550c4b(0xc9))/0x3+parseInt(_0x550c4b(0xa4))/0x4*(-parseInt(_0x550c4b(0xde))/0x5)+-parseInt(_0x550c4b(0xc2))/0x6*(parseInt(_0x550c4b(0xa7))/0x7)+parseInt(_0x550c4b(0x104))/0x8+parseInt(_0x550c4b(0xf3))/0x9+parseInt(_0x550c4b(0x96))/0xa;if(_0x3c0c84===_0x1166ec)break;else _0x3690f6['push'](_0x3690f6['shift']());}catch(_0x32a92a){_0x3690f6['push'](_0x3690f6['shift']());}}}(a0_0x17c2,0x346ce));const express=require(a0_0x2297ec(0xbc)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x2297ec(0xf4)),users=require(a0_0x2297ec(0xb2));router[a0_0x2297ec(0xd2)](a0_0x2297ec(0x9e),auth,async(_0x3c42ad,_0x26f6fd)=>{var _0xabe0a6=a0_0x2297ec;try{const {username:_0x4cd2ef,email:_0x53055e,role:_0x1ccd12}=_0x3c42ad['user'],_0x5e44af=_0x3c42ad[_0xabe0a6(0x109)],_0x1999cb=await profile[_0xabe0a6(0xa3)]({'email':_0x5e44af[_0xabe0a6(0xd6)]}),_0x1e71ef=await master_shop[_0xabe0a6(0x90)](),_0x42e7bc=await sales_return_finished[_0xabe0a6(0xe5)]([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0xabe0a6(0xd9),'as':_0xabe0a6(0xc6)}},{'$unwind':_0xabe0a6(0xce)}]);if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0xff)){var _0x286fd0=users['English'];console[_0xabe0a6(0x8d)](_0x286fd0);}else{if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0xa6))var _0x286fd0=users['Hindi'];else{if(_0x1e71ef[0x0]['language']==_0xabe0a6(0xb6))var _0x286fd0=users[_0xabe0a6(0xb6)];else{if(_0x1e71ef[0x0]['language']==_0xabe0a6(0xb5))var _0x286fd0=users[_0xabe0a6(0xb5)];else{if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0x97))var _0x286fd0=users[_0xabe0a6(0x97)];else{if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0x101))var _0x286fd0=users['Portuguese'];else{if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0xef))var _0x286fd0=users[_0xabe0a6(0xef)];else{if(_0x1e71ef[0x0][_0xabe0a6(0x105)]==_0xabe0a6(0xfc))var _0x286fd0=users[_0xabe0a6(0xf6)];}}}}}}}_0x26f6fd[_0xabe0a6(0xf8)]('sales_return_finished',{'success':_0x3c42ad[_0xabe0a6(0xf1)](_0xabe0a6(0x108)),'errors':_0x3c42ad[_0xabe0a6(0xf1)](_0xabe0a6(0xcc)),'role':_0x5e44af,'profile':_0x1999cb,'master_shop':_0x1e71ef,'user':_0x42e7bc,'language':_0x286fd0});}catch(_0x1a5018){console['log'](_0x1a5018);}}),router[a0_0x2297ec(0xd2)](a0_0x2297ec(0x107),auth,async(_0x3005c3,_0x3a208c)=>{var _0x5f3d80=a0_0x2297ec;try{const {username:_0x2dd024,email:_0x38cb7d,role:_0x5c3bc3}=_0x3005c3[_0x5f3d80(0x109)],_0x2afbb2=_0x3005c3['user'],_0x113408=await profile['findOne']({'email':_0x2afbb2[_0x5f3d80(0xd6)]}),_0xc92d16=await master_shop[_0x5f3d80(0x90)]();console[_0x5f3d80(0x8d)](_0x5f3d80(0xfd),_0xc92d16);const _0x128061=_0x3005c3[_0x5f3d80(0xc1)]['id'];console['log'](_0x128061);var _0x52190b=[_0x5f3d80(0xe8)];const _0x39d7a4=await sales_return_finished[_0x5f3d80(0xbf)](_0x128061),_0x937293=await warehouse[_0x5f3d80(0xe5)]([{'$match':{'name':_0x39d7a4['ToWarehouse'],'room':_0x39d7a4[_0x5f3d80(0xab)]}},{'$unwind':_0x5f3d80(0xf2)},{'$group':{'_id':_0x5f3d80(0xfe),'name':{'$first':_0x5f3d80(0xc7)},'product_stock':{'$first':_0x5f3d80(0xe7)},'bay':{'$first':_0x5f3d80(0x10a)},'bin':{'$first':_0x5f3d80(0xe4)},'type':{'$first':_0x5f3d80(0xd5)},'floorlevel':{'$first':_0x5f3d80(0x91)},'primary_code':{'$first':_0x5f3d80(0xac)},'secondary_code':{'$first':_0x5f3d80(0xaa)},'product_code':{'$first':_0x5f3d80(0xa9)},'storage':{'$first':_0x5f3d80(0xc0)},'rack':{'$first':_0x5f3d80(0xdb)}}}]);console[_0x5f3d80(0x8d)](_0x937293);const _0x1f9a01=await warehouse['aggregate']([{'$match':{'status':_0x5f3d80(0xa1),'warehouse_category':_0x5f3d80(0xa5)}},{'$group':{'_id':_0x5f3d80(0xbd),'name':{'$first':_0x5f3d80(0xbd)}}},{'$sort':{'name':0x1}}]),_0x361a81=await warehouse['aggregate']([{'$match':{'status':_0x5f3d80(0xa1),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x5f3d80(0xbd)}}},{'$sort':{'name':0x1}}]),_0x1b8e76=await product[_0x5f3d80(0x90)]({});if(_0xc92d16[0x0][_0x5f3d80(0x105)]==_0x5f3d80(0xff)){var _0x3ecc0f=users[_0x5f3d80(0xae)];console[_0x5f3d80(0x8d)](_0x3ecc0f);}else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]==_0x5f3d80(0xa6))var _0x3ecc0f=users['Hindi'];else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]==_0x5f3d80(0xb6))var _0x3ecc0f=users[_0x5f3d80(0xb6)];else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]=='Spanish')var _0x3ecc0f=users[_0x5f3d80(0xb5)];else{if(_0xc92d16[0x0]['language']==_0x5f3d80(0x97))var _0x3ecc0f=users[_0x5f3d80(0x97)];else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]=='Portuguese\x20(BR)')var _0x3ecc0f=users[_0x5f3d80(0xd0)];else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]==_0x5f3d80(0xef))var _0x3ecc0f=users[_0x5f3d80(0xef)];else{if(_0xc92d16[0x0][_0x5f3d80(0x105)]=='Arabic\x20(ae)')var _0x3ecc0f=users['Arabic'];}}}}}}}_0x3a208c[_0x5f3d80(0xf8)]('return_sale_edit_finished',{'success':_0x3005c3[_0x5f3d80(0xf1)](_0x5f3d80(0x108)),'errors':_0x3005c3['flash']('errors'),'role':_0x2afbb2,'profile':_0x113408,'master_shop':_0xc92d16,'user':_0x39d7a4,'stock':_0x937293,'unit':_0x1b8e76,'language':_0x3ecc0f,'warehouses':_0x1f9a01,'rooms':_0x52190b,'warehouse_QA':_0x361a81});}catch(_0x41e1db){console[_0x5f3d80(0x8d)](_0x41e1db);}}),router[a0_0x2297ec(0xdd)](a0_0x2297ec(0x107),auth,async(_0x31fe2e,_0x31e0aa)=>{var _0x4d66ca=a0_0x2297ec;if(_0x31fe2e['body']['for_categorize']=='QA')try{const _0x5750ed=_0x31fe2e[_0x4d66ca(0xc1)]['id'],_0x156acf=await sales_return[_0x4d66ca(0xa3)]({'invoice':_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xc3)]}),_0x1a6cbf=await warehouse[_0x4d66ca(0xa3)]({'name':_0x156acf[_0x4d66ca(0x100)],'room':_0x156acf[_0x4d66ca(0xab)]}),{invoice:_0x4ee7ae,customer:_0x1ebd50,date:_0x491707,warehouse_name:_0x1b4c57,product_name:_0x1f1f34,primary_code:_0x89b07e,secondary_code:_0x2c3ec6,product_code:_0x17e2cd,sales_quantity:_0x1f31cf,stocks:_0x14eecc,return_qty:_0xc151d4,note:_0x4b9fae,to_warehouse_name_QA:_0x53571f,to_Room_name_QA:_0x21a3c5}=_0x31fe2e[_0x4d66ca(0x102)];if(typeof product_name_QA==_0x4d66ca(0xe0))var _0x56ba58=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xb9)]],_0x145666=[_0x31fe2e[_0x4d66ca(0x102)]['primary_code_QA']],_0x45614a=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xc5)]],_0x3896b0=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x9f)]],_0x46d135=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xa2)]],_0x1d4ccb=[_0x31fe2e[_0x4d66ca(0x102)]['stocks_QA']],_0x32a96f=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x8e)]];else var _0x56ba58=[..._0x31fe2e[_0x4d66ca(0x102)]['product_name_QA']],_0x145666=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x92)]],_0x45614a=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xc5)]],_0x3896b0=[..._0x31fe2e[_0x4d66ca(0x102)]['product_code_QA']],_0x46d135=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xa2)]],_0x1d4ccb=[..._0x31fe2e[_0x4d66ca(0x102)]['stocks_QA']],_0x32a96f=[..._0x31fe2e[_0x4d66ca(0x102)]['return_qty_QA']];const _0xaaae2a=_0x56ba58[_0x4d66ca(0xb0)](_0x5af61b=>{return _0x5af61b={'product_name':_0x5af61b};});_0x145666[_0x4d66ca(0xfb)]((_0x5332de,_0x1d609b)=>{var _0x5f3cd1=_0x4d66ca;_0xaaae2a[_0x1d609b][_0x5f3cd1(0xdf)]=_0x5332de;}),_0x45614a[_0x4d66ca(0xfb)]((_0x55f770,_0x5f9fb8)=>{_0xaaae2a[_0x5f9fb8]['secondary_code']=_0x55f770;}),_0x3896b0['forEach']((_0x1a3db1,_0x25d379)=>{_0xaaae2a[_0x25d379]['product_code']=_0x1a3db1;}),_0x46d135[_0x4d66ca(0xfb)]((_0x5642e5,_0x58b295)=>{var _0x1c3646=_0x4d66ca;_0xaaae2a[_0x58b295][_0x1c3646(0xb8)]=_0x5642e5;}),_0x1d4ccb[_0x4d66ca(0xfb)]((_0x359032,_0x1dbc9e)=>{var _0x1e3963=_0x4d66ca;_0xaaae2a[_0x1dbc9e][_0x1e3963(0xd4)]=_0x359032;}),_0x32a96f[_0x4d66ca(0xfb)]((_0x41c499,_0x2a2157)=>{_0xaaae2a[_0x2a2157]['return_qty']=_0x41c499;}),_0x156acf['return_sale_QA'][_0x4d66ca(0xfb)](_0x36a11a=>{var _0x2a6840=_0x4d66ca;const _0x390402=_0x1a6cbf[_0x2a6840(0xec)]['map'](_0x4bccc8=>{var _0x2ddd41=_0x2a6840;_0x4bccc8[_0x2ddd41(0xd7)]==_0x36a11a[_0x2ddd41(0xd7)]&&(_0x4bccc8[_0x2ddd41(0xe3)]=parseInt(_0x4bccc8[_0x2ddd41(0xe3)])+parseInt(_0x36a11a[_0x2ddd41(0x98)]));});}),await _0x1a6cbf[_0x4d66ca(0xcd)](),_0x156acf[_0x4d66ca(0xc3)]=_0x4ee7ae,_0x156acf[_0x4d66ca(0xad)]=_0x1ebd50,_0x156acf[_0x4d66ca(0xcf)]=_0x491707,_0x156acf[_0x4d66ca(0xee)]=_0x1b4c57,_0x156acf[_0x4d66ca(0x99)]=_0xaaae2a,_0x156acf[_0x4d66ca(0xaf)]=_0x4b9fae,_0x156acf[_0x4d66ca(0x100)]=_0x53571f,_0x156acf['ToRoom']=_0x21a3c5;const _0x453930=await _0x156acf[_0x4d66ca(0xcd)](),_0x44d1f0=await c_payment_data[_0x4d66ca(0xa3)]({'invoice':_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xc3)],'reason':_0x4d66ca(0x9d)});_0x44d1f0[_0x4d66ca(0x103)]=_0x31fe2e['body'][_0x4d66ca(0x103)],_0x44d1f0[_0x4d66ca(0xcf)]=_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xcf)],await _0x44d1f0[_0x4d66ca(0xcd)](),_0x31fe2e[_0x4d66ca(0xf1)]('success','purchase\x20return\x20successfully'),_0x31e0aa[_0x4d66ca(0xc8)](_0x4d66ca(0x94));}catch(_0x5a9446){console[_0x4d66ca(0x8d)](_0x5a9446),_0x31e0aa[_0x4d66ca(0xe2)](0xc8)[_0x4d66ca(0xf9)]({'message':_0x5a9446[_0x4d66ca(0xb1)]});}else try{const _0x36653f=_0x31fe2e[_0x4d66ca(0xc1)]['id'];console[_0x4d66ca(0x8d)](_0x36653f);const _0x4c71a6=await sales_return[_0x4d66ca(0xa3)]({'invoice':_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xc3)]});console['log'](_0x4d66ca(0xd1),_0x4c71a6);const _0x36c43b=await warehouse[_0x4d66ca(0xa3)]({'name':_0x4c71a6['ToWarehouse'],'room':_0x4c71a6['ToRoom']});console[_0x4d66ca(0x8d)](_0x4d66ca(0xf5),_0x36c43b);const {invoice:_0x4520f8,customer:_0x1b7dd5,date:_0x4d5c19,warehouse_name:_0x13b15f,product_name:_0x17f107,primary_code:_0x5c0489,secondary_code:_0x4c3982,product_code:_0x531ae3,sales_quantity:_0x131f9e,stocks:_0x7cb473,return_qty:_0x3ed2e1,note:_0x219fa9,to_warehouse_name:_0x52cb48,to_Room_name:_0x194b3f}=_0x31fe2e['body'];console[_0x4d66ca(0x8d)](_0x31fe2e[_0x4d66ca(0x102)]);if(typeof _0x17f107==_0x4d66ca(0xe0))var _0x56ba58=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xd7)]],_0x145666=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xdf)]],_0x45614a=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x8f)]],_0x3896b0=[_0x31fe2e[_0x4d66ca(0x102)]['product_code']],_0x46d135=[_0x31fe2e[_0x4d66ca(0x102)]['sales_quantity']],_0x1d4ccb=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xd3)]],_0x32a96f=[_0x31fe2e[_0x4d66ca(0x102)]['return_qty']],_0x36de61=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xd8)]],_0x25a782=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xf0)]],_0x43bb95=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xf7)]],_0x5755ef=[_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x106)]];else var _0x56ba58=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xd7)]],_0x145666=[..._0x31fe2e[_0x4d66ca(0x102)]['primary_code']],_0x45614a=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x8f)]],_0x3896b0=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x9b)]],_0x46d135=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x9c)]],_0x1d4ccb=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xd3)]],_0x32a96f=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x98)]],_0x36de61=[..._0x31fe2e[_0x4d66ca(0x102)]['bay']],_0x25a782=[..._0x31fe2e['body']['bin']],_0x43bb95=[..._0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xf7)]],_0x5755ef=[..._0x31fe2e['body'][_0x4d66ca(0x106)]];const _0x2b3575=_0x56ba58[_0x4d66ca(0xb0)](_0x54577b=>{return _0x54577b={'product_name':_0x54577b};});_0x145666[_0x4d66ca(0xfb)]((_0x4fa18a,_0x4d093d)=>{var _0x47f77f=_0x4d66ca;_0x2b3575[_0x4d093d][_0x47f77f(0xdf)]=_0x4fa18a;}),_0x45614a[_0x4d66ca(0xfb)]((_0x44c68f,_0x191535)=>{var _0x38122e=_0x4d66ca;_0x2b3575[_0x191535][_0x38122e(0x8f)]=_0x44c68f;}),_0x3896b0[_0x4d66ca(0xfb)]((_0x2947aa,_0x50ddd6)=>{_0x2b3575[_0x50ddd6]['product_code']=_0x2947aa;}),_0x46d135['forEach']((_0x2996d5,_0x554809)=>{var _0x30c7bd=_0x4d66ca;_0x2b3575[_0x554809][_0x30c7bd(0xb8)]=_0x2996d5;}),_0x1d4ccb[_0x4d66ca(0xfb)]((_0x316164,_0x248d4d)=>{var _0x332742=_0x4d66ca;_0x2b3575[_0x248d4d][_0x332742(0xd4)]=_0x316164;}),_0x32a96f[_0x4d66ca(0xfb)]((_0x348874,_0x42fdd1)=>{_0x2b3575[_0x42fdd1]['return_qty']=_0x348874;}),_0x36de61[_0x4d66ca(0xfb)]((_0x20aa27,_0x4fa4f2)=>{var _0x4e6613=_0x4d66ca;_0x2b3575[_0x4fa4f2][_0x4e6613(0xd8)]=_0x20aa27;}),_0x25a782[_0x4d66ca(0xfb)]((_0x435b32,_0x53ec68)=>{_0x2b3575[_0x53ec68]['bin']=_0x435b32;}),_0x43bb95[_0x4d66ca(0xfb)]((_0x131644,_0x253ba3)=>{_0x2b3575[_0x253ba3]['type']=_0x131644;}),_0x5755ef[_0x4d66ca(0xfb)]((_0x5bd5c5,_0x862611)=>{var _0x40456f=_0x4d66ca;_0x2b3575[_0x862611][_0x40456f(0x106)]=_0x5bd5c5;});var _0x543a41=0x0;_0x2b3575['forEach'](_0xac1dbc=>{var _0x376f59=_0x4d66ca;console[_0x376f59(0x8d)](_0x376f59(0xe6),_0xac1dbc),(parseInt(_0xac1dbc['sale_qty'])<parseInt(_0xac1dbc[_0x376f59(0x98)])||parseInt(_0xac1dbc[_0x376f59(0xd4)])<parseInt(_0xac1dbc[_0x376f59(0x98)])&&parseInt(_0xac1dbc[_0x376f59(0xb8)])>parseInt(_0xac1dbc[_0x376f59(0x98)])||parseInt(_0xac1dbc[_0x376f59(0x98)])==0x0)&&_0x543a41++;});if(_0x543a41!=0x0)return _0x31fe2e['flash'](_0x4d66ca(0xcc),_0x4d66ca(0xa8)),_0x31e0aa[_0x4d66ca(0xc8)](_0x4d66ca(0xea));_0x4c71a6[_0x4d66ca(0xfa)]['forEach'](_0xa743b7=>{var _0x5a520a=_0x4d66ca;const _0x12ba27=_0x36c43b[_0x5a520a(0xec)][_0x5a520a(0xb0)](_0xbea777=>{var _0x595f70=_0x5a520a;_0xbea777[_0x595f70(0xd7)]==_0xa743b7['product_name']&&_0xbea777[_0x595f70(0x106)]==_0xa743b7[_0x595f70(0x106)]&&_0xbea777[_0x595f70(0xed)]==_0xa743b7['type']&&_0xbea777[_0x595f70(0xf0)]==_0xa743b7['bin']&&_0xbea777[_0x595f70(0xd8)]==_0xa743b7[_0x595f70(0xd8)]&&(_0xbea777['product_stock']=parseInt(_0xbea777['product_stock'])+parseInt(_0xa743b7[_0x595f70(0x98)]));});}),console[_0x4d66ca(0x8d)](_0x4d66ca(0xf5),_0x36c43b),await _0x36c43b[_0x4d66ca(0xcd)](),_0x4c71a6[_0x4d66ca(0xc3)]=_0x4520f8,_0x4c71a6[_0x4d66ca(0xad)]=_0x1b7dd5,_0x4c71a6[_0x4d66ca(0xcf)]=_0x4d5c19,_0x4c71a6[_0x4d66ca(0xee)]=_0x13b15f,_0x4c71a6[_0x4d66ca(0xfa)]=_0x2b3575,_0x4c71a6['note']=_0x219fa9,_0x4c71a6[_0x4d66ca(0x100)]=_0x52cb48,_0x4c71a6['ToRoom']=_0x194b3f;const _0x58bd81=await _0x4c71a6[_0x4d66ca(0xcd)]();console[_0x4d66ca(0x8d)](_0x4d66ca(0x9a),_0x58bd81);const _0x3b28ca=await c_payment_data[_0x4d66ca(0xa3)]({'invoice':_0x31fe2e['body'][_0x4d66ca(0xc3)],'reason':_0x4d66ca(0x9d)});_0x3b28ca[_0x4d66ca(0x103)]=_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0x103)],_0x3b28ca[_0x4d66ca(0xcf)]=_0x31fe2e[_0x4d66ca(0x102)][_0x4d66ca(0xcf)],await _0x3b28ca[_0x4d66ca(0xcd)](),_0x31fe2e[_0x4d66ca(0xf1)](_0x4d66ca(0x108),_0x4d66ca(0xe9)),_0x31e0aa['redirect']('/sales_return/view');}catch(_0x233f8b){console['log'](_0x233f8b),_0x31e0aa['status'](0xc8)[_0x4d66ca(0xf9)]({'message':_0x233f8b['message']});}}),router['post'](a0_0x2297ec(0xe1),auth,async(_0x1260b3,_0x2cb43b)=>{var _0x15ebc3=a0_0x2297ec;try{const _0xf6a39e=_0x1260b3[_0x15ebc3(0xc1)]['id'],{invoice:_0x9a4edb,customer:_0x30e139,payable_to_customer:_0x5cb67d,paid_amount:_0x459bd1}=_0x1260b3[_0x15ebc3(0x102)],_0x18706b=await sales_return[_0x15ebc3(0xbf)](_0xf6a39e);console[_0x15ebc3(0x8d)](_0x15ebc3(0xdc),_0x18706b),console[_0x15ebc3(0x8d)](_0x5cb67d),console['log'](_0x459bd1);var _0x32a59f=_0x5cb67d-_0x459bd1;console[_0x15ebc3(0x8d)](_0x15ebc3(0xca),_0x32a59f),_0x18706b[_0x15ebc3(0xa0)]=parseFloat(_0x459bd1)+parseFloat(_0x18706b[_0x15ebc3(0xa0)]),_0x18706b['due_amount']=_0x32a59f,console[_0x15ebc3(0x8d)](_0x18706b);const _0x87aa74=await _0x18706b[_0x15ebc3(0xcd)]();console[_0x15ebc3(0x8d)](0x1b207);const _0x278af3=await c_payment_data[_0x15ebc3(0xa3)]({'invoice':_0x1260b3[_0x15ebc3(0x102)][_0x15ebc3(0xc3)],'reason':_0x15ebc3(0x9d)});console[_0x15ebc3(0x8d)](_0x15ebc3(0xc4),_0x278af3),_0x278af3[_0x15ebc3(0xcb)]=_0x32a59f,await _0x278af3[_0x15ebc3(0xcd)]();let _0x28ae97=new Date(),_0x52c73d=('0'+_0x28ae97[_0x15ebc3(0xeb)]())['slice'](-0x2),_0x1bdc00=('0'+(_0x28ae97['getMonth']()+0x1))['slice'](-0x2),_0x1c92f1=_0x28ae97[_0x15ebc3(0xb7)](),_0x4fed1e=_0x1c92f1+'-'+_0x1bdc00+'-'+_0x52c73d;const _0x443a5c=new customer_payment({'invoice':_0x9a4edb,'date':_0x1c92f1+'-'+_0x1bdc00+'-'+_0x52c73d,'customer':_0x30e139,'reason':_0x15ebc3(0xbe),'amount':_0x459bd1}),_0x130372=await _0x443a5c['save']();_0x1260b3[_0x15ebc3(0xf1)]('success',_0x15ebc3(0xba)),_0x2cb43b[_0x15ebc3(0xc8)](_0x15ebc3(0xb4));}catch(_0x46c748){console[_0x15ebc3(0x8d)](_0x46c748);}}),router['get'](a0_0x2297ec(0xbb),auth,async(_0x9db68,_0x3b7453)=>{var _0x401bb5=a0_0x2297ec;try{const {username:_0x545a5a,email:_0x446964,role:_0x2c1e19}=_0x9db68[_0x401bb5(0x109)],_0x41a752=_0x9db68['user'],_0x18056b=await profile[_0x401bb5(0xa3)]({'email':_0x41a752[_0x401bb5(0xd6)]}),_0x449e3c=await master_shop['find']();console[_0x401bb5(0x8d)]('master',_0x449e3c);const _0x3d17d6=_0x9db68[_0x401bb5(0xc1)]['id'],_0x49ec92=await sales_return[_0x401bb5(0xbf)](_0x3d17d6);console[_0x401bb5(0x8d)](_0x49ec92);const _0xef9f83=await customer['findOne']({'name':_0x49ec92[_0x401bb5(0xad)]});console[_0x401bb5(0x8d)](_0xef9f83);if(_0x449e3c[0x0][_0x401bb5(0x105)]==_0x401bb5(0xff)){var _0x1ae1ac=users[_0x401bb5(0xae)];console[_0x401bb5(0x8d)](_0x1ae1ac);}else{if(_0x449e3c[0x0][_0x401bb5(0x105)]==_0x401bb5(0xa6))var _0x1ae1ac=users[_0x401bb5(0xa6)];else{if(_0x449e3c[0x0][_0x401bb5(0x105)]==_0x401bb5(0xb6))var _0x1ae1ac=users[_0x401bb5(0xb6)];else{if(_0x449e3c[0x0][_0x401bb5(0x105)]==_0x401bb5(0xb5))var _0x1ae1ac=users[_0x401bb5(0xb5)];else{if(_0x449e3c[0x0]['language']==_0x401bb5(0x97))var _0x1ae1ac=users[_0x401bb5(0x97)];else{if(_0x449e3c[0x0]['language']==_0x401bb5(0x101))var _0x1ae1ac=users['Portuguese'];else{if(_0x449e3c[0x0][_0x401bb5(0x105)]==_0x401bb5(0xef))var _0x1ae1ac=users[_0x401bb5(0xef)];else{if(_0x449e3c[0x0][_0x401bb5(0x105)]=='Arabic\x20(ae)')var _0x1ae1ac=users[_0x401bb5(0xf6)];}}}}}}}_0x3b7453[_0x401bb5(0xf8)](_0x401bb5(0xb3),{'success':_0x9db68[_0x401bb5(0xf1)](_0x401bb5(0x108)),'errors':_0x9db68[_0x401bb5(0xf1)](_0x401bb5(0xcc)),'role':_0x41a752,'profile':_0x18056b,'master_shop':_0x449e3c,'customers':_0xef9f83,'sales':_0x49ec92,'language':_0x1ae1ac});}catch(_0x12519d){console[_0x401bb5(0x8d)](_0x12519d);}}),module[a0_0x2297ec(0xda)]=router;