var a0_0x320ff6=a0_0xfb72;(function(_0x3d707d,_0x3059fd){var _0x221c81=a0_0xfb72,_0x14d26f=_0x3d707d();while(!![]){try{var _0x3b1b04=-parseInt(_0x221c81(0xc1))/0x1*(-parseInt(_0x221c81(0xb6))/0x2)+parseInt(_0x221c81(0xc4))/0x3*(parseInt(_0x221c81(0xed))/0x4)+parseInt(_0x221c81(0xb0))/0x5+parseInt(_0x221c81(0xf4))/0x6+-parseInt(_0x221c81(0xb7))/0x7+parseInt(_0x221c81(0xb3))/0x8+parseInt(_0x221c81(0x9d))/0x9*(parseInt(_0x221c81(0x90))/0xa);if(_0x3b1b04===_0x3059fd)break;else _0x14d26f['push'](_0x14d26f['shift']());}catch(_0x41cd0d){_0x14d26f['push'](_0x14d26f['shift']());}}}(a0_0x24ec,0xd43d0));function a0_0x24ec(){var _0x1354b2=['2TSudoa','12098870jCYgEK','flash','Spanish','sales_quantity','warehouse_name','return_qty','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','exports','Chinese','Enabled','140474VYYqpB','../middleware/auth','map','147597LROvyg','get','product_name','ToRoom','$product_details._id','English','params','type','success','$product_details.floorlevel','status','render','name','German','for_categorize','Hindi','$name','secondary_code','product_stock','sale_qty','stocks','payment\x20successfull','$product_details.secondary_code','floorlevel','date','Arabic','getDate','types','Returned\x20Payment\x20For\x20Sale\x20Return','stocks_QA','/view/:id','/give_payment/:id','language','data','back','$product_details.type','invoice','$product_details.bay','$product_details.product_name','post','log','4dtNqYQ','return_qty_QA','primary_code','bay','French','../models/all_models','getMonth','4499844nKBnFj','bin','English\x20(US)','secondary_code_QA','express','/sales_return/view','ToWarehouse','sales_return_invoice','c_payment','/invoice/:id','Sale\x20Return','QA\x20Warehouse','product_details','purchase\x20return\x20successfully','$product_details.product_code','return_sale','suppliers','$customer_docs','Finished\x20Goods','sales_return_finished','Portuguese','findOne','product_code_QA','product_name_QA','stock','10FlzlhH','/view','new\x20new_data','foreach\x20newproduct','findById','primary_code_QA','string','sales_quantity_QA','return_sale_edit_finished','Router','redirect','Portuguese\x20(BR)','note','6649281ONBvCU','slice','message','$product_details.storage','find','product_code','due_amount','old_warehouse_data','master','paid_amount','json','aggregate','body','user','customers','errors','customer','Arabic\x20(ae)','$product_details.product_stock','4426175wmptzU','subtract','email','272376evSWBx','save','forEach'];a0_0x24ec=function(){return _0x1354b2;};return a0_0x24ec();}const express=require(a0_0x320ff6(0xf8)),app=express(),router=express[a0_0x320ff6(0x99)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x320ff6(0xf2)),auth=require(a0_0x320ff6(0xc2)),users=require('../public/language/languages.json');function a0_0xfb72(_0x3c999d,_0x500f3f){var _0x24ecee=a0_0x24ec();return a0_0xfb72=function(_0xfb72e3,_0x26d92e){_0xfb72e3=_0xfb72e3-0x7f;var _0x4ec244=_0x24ecee[_0xfb72e3];return _0x4ec244;},a0_0xfb72(_0x3c999d,_0x500f3f);}router[a0_0x320ff6(0xc5)](a0_0x320ff6(0x91),auth,async(_0x43883e,_0x18d45a)=>{var _0x2aba99=a0_0x320ff6;try{const {username:_0x5cda80,email:_0x521464,role:_0x1d4f30}=_0x43883e[_0x2aba99(0xaa)],_0x40f067=_0x43883e[_0x2aba99(0xaa)],_0x32197e=await profile[_0x2aba99(0x8c)]({'email':_0x40f067['email']}),_0x44cdba=await master_shop['find'](),_0x1b6a59=await sales_return_finished[_0x2aba99(0xa8)]([{'$lookup':{'from':_0x2aba99(0xab),'localField':_0x2aba99(0xad),'foreignField':_0x2aba99(0xd0),'as':'customer_docs'}},{'$unwind':_0x2aba99(0x88)}]);if(_0x44cdba[0x0]['language']==_0x2aba99(0xf6)){var _0x38ccd4=users[_0x2aba99(0xc9)];console[_0x2aba99(0xec)](_0x38ccd4);}else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]==_0x2aba99(0xd3))var _0x38ccd4=users['Hindi'];else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]=='German')var _0x38ccd4=users[_0x2aba99(0xd1)];else{if(_0x44cdba[0x0]['language']=='Spanish')var _0x38ccd4=users[_0x2aba99(0xb9)];else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]=='French')var _0x38ccd4=users['French'];else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]==_0x2aba99(0x9b))var _0x38ccd4=users['Portuguese'];else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]==_0x2aba99(0xbf))var _0x38ccd4=users['Chinese'];else{if(_0x44cdba[0x0][_0x2aba99(0xe4)]==_0x2aba99(0xae))var _0x38ccd4=users[_0x2aba99(0xdd)];}}}}}}}_0x18d45a[_0x2aba99(0xcf)](_0x2aba99(0x8a),{'success':_0x43883e['flash'](_0x2aba99(0xcc)),'errors':_0x43883e[_0x2aba99(0xb8)](_0x2aba99(0xac)),'role':_0x40f067,'profile':_0x32197e,'master_shop':_0x44cdba,'user':_0x1b6a59,'language':_0x38ccd4});}catch(_0x190572){console[_0x2aba99(0xec)](_0x190572);}}),router[a0_0x320ff6(0xc5)](a0_0x320ff6(0xe2),auth,async(_0x56cd4e,_0x533c9c)=>{var _0x10476c=a0_0x320ff6;try{const {username:_0x1c4475,email:_0xb5b2bc,role:_0x202286}=_0x56cd4e[_0x10476c(0xaa)],_0x251592=_0x56cd4e[_0x10476c(0xaa)],_0x3cd1fb=await profile[_0x10476c(0x8c)]({'email':_0x251592[_0x10476c(0xb2)]}),_0x4abb3c=await master_shop[_0x10476c(0xa1)]();console[_0x10476c(0xec)](_0x10476c(0xa5),_0x4abb3c);const _0x574a21=_0x56cd4e[_0x10476c(0xca)]['id'];console[_0x10476c(0xec)](_0x574a21);var _0x2478f0=['Return\x20Rooms'];const _0x1f80db=await sales_return_finished['findById'](_0x574a21),_0x434fda=await warehouse['aggregate']([{'$match':{'name':_0x1f80db[_0x10476c(0xfa)],'room':_0x1f80db['ToRoom']}},{'$unwind':'$product_details'},{'$group':{'_id':_0x10476c(0xc8),'name':{'$first':_0x10476c(0xea)},'product_stock':{'$first':_0x10476c(0xaf)},'bay':{'$first':_0x10476c(0xe9)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x10476c(0xe7)},'floorlevel':{'$first':_0x10476c(0xcd)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x10476c(0xda)},'product_code':{'$first':_0x10476c(0x85)},'storage':{'$first':_0x10476c(0xa0)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x10476c(0xec)](_0x434fda);const _0xcd4390=await warehouse[_0x10476c(0xa8)]([{'$match':{'status':_0x10476c(0xc0),'warehouse_category':_0x10476c(0x89)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x252100=await warehouse['aggregate']([{'$match':{'status':_0x10476c(0xc0),'name':_0x10476c(0x82)}},{'$group':{'_id':'$name','name':{'$first':_0x10476c(0xd4)}}},{'$sort':{'name':0x1}}]),_0x4096b1=await product[_0x10476c(0xa1)]({});if(_0x4abb3c[0x0]['language']=='English\x20(US)'){var _0x16c906=users[_0x10476c(0xc9)];console[_0x10476c(0xec)](_0x16c906);}else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]==_0x10476c(0xd3))var _0x16c906=users[_0x10476c(0xd3)];else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]==_0x10476c(0xd1))var _0x16c906=users[_0x10476c(0xd1)];else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]=='Spanish')var _0x16c906=users[_0x10476c(0xb9)];else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]==_0x10476c(0xf1))var _0x16c906=users['French'];else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]==_0x10476c(0x9b))var _0x16c906=users[_0x10476c(0x8b)];else{if(_0x4abb3c[0x0]['language']==_0x10476c(0xbf))var _0x16c906=users[_0x10476c(0xbf)];else{if(_0x4abb3c[0x0][_0x10476c(0xe4)]==_0x10476c(0xae))var _0x16c906=users[_0x10476c(0xdd)];}}}}}}}_0x533c9c[_0x10476c(0xcf)](_0x10476c(0x98),{'success':_0x56cd4e[_0x10476c(0xb8)](_0x10476c(0xcc)),'errors':_0x56cd4e[_0x10476c(0xb8)]('errors'),'role':_0x251592,'profile':_0x3cd1fb,'master_shop':_0x4abb3c,'user':_0x1f80db,'stock':_0x434fda,'unit':_0x4096b1,'language':_0x16c906,'warehouses':_0xcd4390,'rooms':_0x2478f0,'warehouse_QA':_0x252100});}catch(_0x16f1c0){console['log'](_0x16f1c0);}}),router[a0_0x320ff6(0xeb)](a0_0x320ff6(0xe2),auth,async(_0x48d9be,_0x2e0902)=>{var _0x1e9548=a0_0x320ff6;if(_0x48d9be['body'][_0x1e9548(0xd2)]=='QA')try{const _0x4a1bfb=_0x48d9be['params']['id'],_0x430db0=await sales_return[_0x1e9548(0x8c)]({'invoice':_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xe8)]}),_0x5cfb6c=await warehouse['findOne']({'name':_0x430db0[_0x1e9548(0xfa)],'room':_0x430db0[_0x1e9548(0xc7)]}),{invoice:_0x3f46f4,customer:_0x18b8c1,date:_0x39dc41,warehouse_name:_0x4c5af6,product_name:_0x1ce49e,primary_code:_0x560631,secondary_code:_0x1f1af7,product_code:_0x15dd04,sales_quantity:_0x358d7c,stocks:_0x52950e,return_qty:_0x52cf17,note:_0x2a5870,to_warehouse_name_QA:_0x1400c2,to_Room_name_QA:_0x564ebb}=_0x48d9be['body'];if(typeof product_name_QA=='string')var _0x1a2ccb=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x8e)]],_0x53f22c=[_0x48d9be[_0x1e9548(0xa9)]['primary_code_QA']],_0x54f92e=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xf7)]],_0x2978c1=[_0x48d9be['body']['product_code_QA']],_0x442a5b=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x97)]],_0x4ec4b1=[_0x48d9be['body'][_0x1e9548(0xe1)]],_0x205097=[_0x48d9be['body'][_0x1e9548(0xee)]];else var _0x1a2ccb=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x8e)]],_0x53f22c=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x95)]],_0x54f92e=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xf7)]],_0x2978c1=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x8d)]],_0x442a5b=[..._0x48d9be['body'][_0x1e9548(0x97)]],_0x4ec4b1=[..._0x48d9be[_0x1e9548(0xa9)]['stocks_QA']],_0x205097=[..._0x48d9be['body'][_0x1e9548(0xee)]];const _0x387563=_0x1a2ccb['map'](_0xce004c=>{return _0xce004c={'product_name':_0xce004c};});_0x53f22c['forEach']((_0xc338c0,_0xcff7ac)=>{var _0x429740=_0x1e9548;_0x387563[_0xcff7ac][_0x429740(0xef)]=_0xc338c0;}),_0x54f92e[_0x1e9548(0xb5)]((_0x244c55,_0x3e7649)=>{_0x387563[_0x3e7649]['secondary_code']=_0x244c55;}),_0x2978c1[_0x1e9548(0xb5)]((_0x967504,_0x3d08ef)=>{_0x387563[_0x3d08ef]['product_code']=_0x967504;}),_0x442a5b['forEach']((_0x25d494,_0x540647)=>{var _0x42fc57=_0x1e9548;_0x387563[_0x540647][_0x42fc57(0xd7)]=_0x25d494;}),_0x4ec4b1[_0x1e9548(0xb5)]((_0x15cf32,_0x49c9e6)=>{var _0x4c0b5b=_0x1e9548;_0x387563[_0x49c9e6][_0x4c0b5b(0x8f)]=_0x15cf32;}),_0x205097['forEach']((_0x612ece,_0x50be64)=>{_0x387563[_0x50be64]['return_qty']=_0x612ece;}),_0x430db0['return_sale_QA'][_0x1e9548(0xb5)](_0x2eba2a=>{var _0x50a8f2=_0x1e9548;const _0x282a12=_0x5cfb6c[_0x50a8f2(0x83)][_0x50a8f2(0xc3)](_0x366216=>{var _0x3bb229=_0x50a8f2;_0x366216['product_name']==_0x2eba2a[_0x3bb229(0xc6)]&&(_0x366216[_0x3bb229(0xd6)]=parseInt(_0x366216[_0x3bb229(0xd6)])+parseInt(_0x2eba2a[_0x3bb229(0xbc)]));});}),await _0x5cfb6c['save'](),_0x430db0[_0x1e9548(0xe8)]=_0x3f46f4,_0x430db0['customer']=_0x18b8c1,_0x430db0[_0x1e9548(0xdc)]=_0x39dc41,_0x430db0['warehouse_name']=_0x4c5af6,_0x430db0['return_sale_QA']=_0x387563,_0x430db0[_0x1e9548(0x9c)]=_0x2a5870,_0x430db0['ToWarehouse']=_0x1400c2,_0x430db0[_0x1e9548(0xc7)]=_0x564ebb;const _0x74d103=await _0x430db0['save'](),_0x512965=await c_payment_data[_0x1e9548(0x8c)]({'invoice':_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xe8)],'reason':_0x1e9548(0x81)});_0x512965[_0x1e9548(0x87)]=_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x87)],_0x512965[_0x1e9548(0xdc)]=_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xdc)],await _0x512965['save'](),_0x48d9be[_0x1e9548(0xb8)](_0x1e9548(0xcc),_0x1e9548(0x84)),_0x2e0902[_0x1e9548(0x9a)]('/sales_return_finished/view');}catch(_0x4f84ed){console[_0x1e9548(0xec)](_0x4f84ed),_0x2e0902[_0x1e9548(0xce)](0xc8)[_0x1e9548(0xa7)]({'message':_0x4f84ed[_0x1e9548(0x9f)]});}else try{const _0x6c5eee=_0x48d9be[_0x1e9548(0xca)]['id'];console[_0x1e9548(0xec)](_0x6c5eee);const _0x5c1ece=await sales_return[_0x1e9548(0x8c)]({'invoice':_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xe8)]});console[_0x1e9548(0xec)]('old_data',_0x5c1ece);const _0x41cd9f=await warehouse[_0x1e9548(0x8c)]({'name':_0x5c1ece[_0x1e9548(0xfa)],'room':_0x5c1ece[_0x1e9548(0xc7)]});console[_0x1e9548(0xec)]('old_warehouse_data',_0x41cd9f);const {invoice:_0x8b007a,customer:_0x22faa0,date:_0x23818d,warehouse_name:_0x3ba0a8,product_name:_0x1bebb1,primary_code:_0x5a2eca,secondary_code:_0x6fdae9,product_code:_0x2fa307,sales_quantity:_0x51f519,stocks:_0x6831aa,return_qty:_0x29507a,note:_0x4dba66,to_warehouse_name:_0x2dd52c,to_Room_name:_0x5b204d}=_0x48d9be[_0x1e9548(0xa9)];console[_0x1e9548(0xec)](_0x48d9be[_0x1e9548(0xa9)]);if(typeof _0x1bebb1==_0x1e9548(0x96))var _0x1a2ccb=[_0x48d9be[_0x1e9548(0xa9)]['product_name']],_0x53f22c=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xef)]],_0x54f92e=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xd5)]],_0x2978c1=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xa2)]],_0x442a5b=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xba)]],_0x4ec4b1=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xd8)]],_0x205097=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xbc)]],_0x435b2c=[_0x48d9be[_0x1e9548(0xa9)]['bay']],_0xcf6216=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xf5)]],_0x5e801a=[_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xdf)]],_0x392f47=[_0x48d9be['body'][_0x1e9548(0xdb)]];else var _0x1a2ccb=[..._0x48d9be[_0x1e9548(0xa9)]['product_name']],_0x53f22c=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xef)]],_0x54f92e=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xd5)]],_0x2978c1=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xa2)]],_0x442a5b=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xba)]],_0x4ec4b1=[..._0x48d9be['body']['stocks']],_0x205097=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xbc)]],_0x435b2c=[..._0x48d9be[_0x1e9548(0xa9)]['bay']],_0xcf6216=[..._0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xf5)]],_0x5e801a=[..._0x48d9be[_0x1e9548(0xa9)]['types']],_0x392f47=[..._0x48d9be['body'][_0x1e9548(0xdb)]];const _0x24ab79=_0x1a2ccb[_0x1e9548(0xc3)](_0x24cc63=>{return _0x24cc63={'product_name':_0x24cc63};});_0x53f22c[_0x1e9548(0xb5)]((_0x11014e,_0x134f95)=>{var _0x80ee03=_0x1e9548;_0x24ab79[_0x134f95][_0x80ee03(0xef)]=_0x11014e;}),_0x54f92e[_0x1e9548(0xb5)]((_0x1b91dc,_0x13d8b8)=>{var _0x20a4a1=_0x1e9548;_0x24ab79[_0x13d8b8][_0x20a4a1(0xd5)]=_0x1b91dc;}),_0x2978c1[_0x1e9548(0xb5)]((_0x4c0d56,_0x3f6d21)=>{var _0x178e4a=_0x1e9548;_0x24ab79[_0x3f6d21][_0x178e4a(0xa2)]=_0x4c0d56;}),_0x442a5b[_0x1e9548(0xb5)]((_0x3a4498,_0x40c126)=>{var _0x23d55=_0x1e9548;_0x24ab79[_0x40c126][_0x23d55(0xd7)]=_0x3a4498;}),_0x4ec4b1[_0x1e9548(0xb5)]((_0x45dae2,_0xfdc773)=>{var _0x2c1641=_0x1e9548;_0x24ab79[_0xfdc773][_0x2c1641(0x8f)]=_0x45dae2;}),_0x205097[_0x1e9548(0xb5)]((_0x2a4b2a,_0x3edf94)=>{var _0x2cc7c1=_0x1e9548;_0x24ab79[_0x3edf94][_0x2cc7c1(0xbc)]=_0x2a4b2a;}),_0x435b2c[_0x1e9548(0xb5)]((_0x485c79,_0x55d8ed)=>{var _0x104667=_0x1e9548;_0x24ab79[_0x55d8ed][_0x104667(0xf0)]=_0x485c79;}),_0xcf6216[_0x1e9548(0xb5)]((_0x4029b1,_0x522543)=>{var _0x183ba3=_0x1e9548;_0x24ab79[_0x522543][_0x183ba3(0xf5)]=_0x4029b1;}),_0x5e801a[_0x1e9548(0xb5)]((_0x203924,_0xaede1c)=>{var _0x13bb86=_0x1e9548;_0x24ab79[_0xaede1c][_0x13bb86(0xcb)]=_0x203924;}),_0x392f47[_0x1e9548(0xb5)]((_0x42cdcf,_0x1eefd2)=>{var _0x5eb3bf=_0x1e9548;_0x24ab79[_0x1eefd2][_0x5eb3bf(0xdb)]=_0x42cdcf;});var _0x286505=0x0;_0x24ab79[_0x1e9548(0xb5)](_0x502da2=>{var _0x384808=_0x1e9548;console[_0x384808(0xec)](_0x384808(0x93),_0x502da2),(parseInt(_0x502da2[_0x384808(0xd7)])<parseInt(_0x502da2[_0x384808(0xbc)])||parseInt(_0x502da2['stock'])<parseInt(_0x502da2[_0x384808(0xbc)])&&parseInt(_0x502da2[_0x384808(0xd7)])>parseInt(_0x502da2['return_qty'])||parseInt(_0x502da2['return_qty'])==0x0)&&_0x286505++;});if(_0x286505!=0x0)return _0x48d9be[_0x1e9548(0xb8)](_0x1e9548(0xac),_0x1e9548(0xbd)),_0x2e0902['redirect'](_0x1e9548(0xe6));_0x5c1ece[_0x1e9548(0x86)][_0x1e9548(0xb5)](_0x2ba271=>{var _0x14e2ad=_0x1e9548;const _0x3c434d=_0x41cd9f[_0x14e2ad(0x83)][_0x14e2ad(0xc3)](_0x4602cc=>{var _0x54248d=_0x14e2ad;_0x4602cc['product_name']==_0x2ba271[_0x54248d(0xc6)]&&_0x4602cc['floorlevel']==_0x2ba271[_0x54248d(0xdb)]&&_0x4602cc[_0x54248d(0xcb)]==_0x2ba271[_0x54248d(0xcb)]&&_0x4602cc[_0x54248d(0xf5)]==_0x2ba271[_0x54248d(0xf5)]&&_0x4602cc[_0x54248d(0xf0)]==_0x2ba271[_0x54248d(0xf0)]&&(_0x4602cc[_0x54248d(0xd6)]=parseInt(_0x4602cc[_0x54248d(0xd6)])+parseInt(_0x2ba271['return_qty']));});}),console['log'](_0x1e9548(0xa4),_0x41cd9f),await _0x41cd9f[_0x1e9548(0xb4)](),_0x5c1ece[_0x1e9548(0xe8)]=_0x8b007a,_0x5c1ece['customer']=_0x22faa0,_0x5c1ece[_0x1e9548(0xdc)]=_0x23818d,_0x5c1ece[_0x1e9548(0xbb)]=_0x3ba0a8,_0x5c1ece['return_sale']=_0x24ab79,_0x5c1ece['note']=_0x4dba66,_0x5c1ece[_0x1e9548(0xfa)]=_0x2dd52c,_0x5c1ece[_0x1e9548(0xc7)]=_0x5b204d;const _0x287b7b=await _0x5c1ece['save']();console[_0x1e9548(0xec)](_0x1e9548(0x92),_0x287b7b);const _0x1d0889=await c_payment_data[_0x1e9548(0x8c)]({'invoice':_0x48d9be['body'][_0x1e9548(0xe8)],'reason':'Sale\x20Return'});_0x1d0889['suppliers']=_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0x87)],_0x1d0889['date']=_0x48d9be[_0x1e9548(0xa9)][_0x1e9548(0xdc)],await _0x1d0889[_0x1e9548(0xb4)](),_0x48d9be[_0x1e9548(0xb8)](_0x1e9548(0xcc),_0x1e9548(0x84)),_0x2e0902['redirect'](_0x1e9548(0xf9));}catch(_0x1a4738){console[_0x1e9548(0xec)](_0x1a4738),_0x2e0902[_0x1e9548(0xce)](0xc8)[_0x1e9548(0xa7)]({'message':_0x1a4738[_0x1e9548(0x9f)]});}}),router[a0_0x320ff6(0xeb)](a0_0x320ff6(0xe3),auth,async(_0x2cbdca,_0x13117a)=>{var _0x2b1f6f=a0_0x320ff6;try{const _0x1d5acb=_0x2cbdca[_0x2b1f6f(0xca)]['id'],{invoice:_0x34fe33,customer:_0x13463c,payable_to_customer:_0x3b72f5,paid_amount:_0x2f35b5}=_0x2cbdca[_0x2b1f6f(0xa9)],_0x26d765=await sales_return[_0x2b1f6f(0x94)](_0x1d5acb);console['log'](_0x2b1f6f(0xe5),_0x26d765),console[_0x2b1f6f(0xec)](_0x3b72f5),console['log'](_0x2f35b5);var _0x122079=_0x3b72f5-_0x2f35b5;console[_0x2b1f6f(0xec)](_0x2b1f6f(0xb1),_0x122079),_0x26d765[_0x2b1f6f(0xa6)]=parseFloat(_0x2f35b5)+parseFloat(_0x26d765[_0x2b1f6f(0xa6)]),_0x26d765[_0x2b1f6f(0xa3)]=_0x122079,console[_0x2b1f6f(0xec)](_0x26d765);const _0x4c63a5=await _0x26d765[_0x2b1f6f(0xb4)]();console['log'](0x1b207);const _0x187bab=await c_payment_data['findOne']({'invoice':_0x2cbdca[_0x2b1f6f(0xa9)][_0x2b1f6f(0xe8)],'reason':_0x2b1f6f(0x81)});console['log'](_0x2b1f6f(0x7f),_0x187bab),_0x187bab['amount']=_0x122079,await _0x187bab[_0x2b1f6f(0xb4)]();let _0x239c9e=new Date(),_0x1d5b49=('0'+_0x239c9e[_0x2b1f6f(0xde)]())[_0x2b1f6f(0x9e)](-0x2),_0xb858c9=('0'+(_0x239c9e[_0x2b1f6f(0xf3)]()+0x1))[_0x2b1f6f(0x9e)](-0x2),_0x34221a=_0x239c9e['getFullYear'](),_0x3a06c1=_0x34221a+'-'+_0xb858c9+'-'+_0x1d5b49;const _0x820ce3=new customer_payment({'invoice':_0x34fe33,'date':_0x34221a+'-'+_0xb858c9+'-'+_0x1d5b49,'customer':_0x13463c,'reason':_0x2b1f6f(0xe0),'amount':_0x2f35b5}),_0x4a2281=await _0x820ce3['save']();_0x2cbdca['flash'](_0x2b1f6f(0xcc),_0x2b1f6f(0xd9)),_0x13117a['redirect'](_0x2b1f6f(0xf9));}catch(_0x34c082){console[_0x2b1f6f(0xec)](_0x34c082);}}),router[a0_0x320ff6(0xc5)](a0_0x320ff6(0x80),auth,async(_0xafcae6,_0xddbea7)=>{var _0x19cb7f=a0_0x320ff6;try{const {username:_0x4d5d42,email:_0x8886d7,role:_0x337736}=_0xafcae6[_0x19cb7f(0xaa)],_0x59e655=_0xafcae6[_0x19cb7f(0xaa)],_0x1db9ae=await profile['findOne']({'email':_0x59e655[_0x19cb7f(0xb2)]}),_0x497c9e=await master_shop['find']();console[_0x19cb7f(0xec)](_0x19cb7f(0xa5),_0x497c9e);const _0x3de909=_0xafcae6['params']['id'],_0x2f3536=await sales_return['findById'](_0x3de909);console[_0x19cb7f(0xec)](_0x2f3536);const _0x218603=await customer['findOne']({'name':_0x2f3536[_0x19cb7f(0xad)]});console[_0x19cb7f(0xec)](_0x218603);if(_0x497c9e[0x0]['language']==_0x19cb7f(0xf6)){var _0x4b381e=users[_0x19cb7f(0xc9)];console['log'](_0x4b381e);}else{if(_0x497c9e[0x0][_0x19cb7f(0xe4)]==_0x19cb7f(0xd3))var _0x4b381e=users[_0x19cb7f(0xd3)];else{if(_0x497c9e[0x0]['language']==_0x19cb7f(0xd1))var _0x4b381e=users[_0x19cb7f(0xd1)];else{if(_0x497c9e[0x0][_0x19cb7f(0xe4)]==_0x19cb7f(0xb9))var _0x4b381e=users[_0x19cb7f(0xb9)];else{if(_0x497c9e[0x0][_0x19cb7f(0xe4)]=='French')var _0x4b381e=users[_0x19cb7f(0xf1)];else{if(_0x497c9e[0x0][_0x19cb7f(0xe4)]==_0x19cb7f(0x9b))var _0x4b381e=users['Portuguese'];else{if(_0x497c9e[0x0][_0x19cb7f(0xe4)]==_0x19cb7f(0xbf))var _0x4b381e=users[_0x19cb7f(0xbf)];else{if(_0x497c9e[0x0]['language']==_0x19cb7f(0xae))var _0x4b381e=users[_0x19cb7f(0xdd)];}}}}}}}_0xddbea7[_0x19cb7f(0xcf)](_0x19cb7f(0xfb),{'success':_0xafcae6[_0x19cb7f(0xb8)](_0x19cb7f(0xcc)),'errors':_0xafcae6[_0x19cb7f(0xb8)](_0x19cb7f(0xac)),'role':_0x59e655,'profile':_0x1db9ae,'master_shop':_0x497c9e,'customers':_0x218603,'sales':_0x2f3536,'language':_0x4b381e});}catch(_0x306319){console[_0x19cb7f(0xec)](_0x306319);}}),module[a0_0x320ff6(0xbe)]=router;