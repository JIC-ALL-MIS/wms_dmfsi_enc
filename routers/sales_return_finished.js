var a0_0x2f4bf5=a0_0x1ef5;function a0_0x1ef5(_0x5e94c4,_0xff72d4){var _0x13db2a=a0_0x13db();return a0_0x1ef5=function(_0x1ef509,_0x951c38){_0x1ef509=_0x1ef509-0x1d9;var _0x4c772d=_0x13db2a[_0x1ef509];return _0x4c772d;},a0_0x1ef5(_0x5e94c4,_0xff72d4);}function a0_0x13db(){var _0x28d6d4=['Portuguese','log','stock','1918McBxeQ','bin','getMonth','$product_details.secondary_code','master','$product_details.product_stock','floorlevel','127079TymJkh','invoice','body','French','return_sale_QA','primary_code','success','user','redirect','return_qty_QA','ToWarehouse','old_data','amount','new\x20new_data','sales_return_invoice','post','../public/language/languages.json','Arabic','$product_details.floorlevel','name','customer','$product_details','slice','sales_quantity_QA','$product_details.bin','sales_return_finished','get','payment\x20successfull','subtract','$product_details.product_code','suppliers','customer_docs','$customer_docs','1442245FCbHIn','flash','$product_details.storage','2315520qsBbKs','forEach','2GPkdEj','stocks_QA','email','product_code_QA','English','485670NPzeAv','product_name','return_sale_edit_finished','../middleware/auth','foreach\x20newproduct','product_details','language','sale_qty','Arabic\x20(ae)','exports','aggregate','customers','$name','getDate','Spanish','Portuguese\x20(BR)','save','$product_details._id','render','$product_details.product_name','187VRxYtw','back','Return\x20Rooms','find','types','for_categorize','map','product_stock','date','Returned\x20Payment\x20For\x20Sale\x20Return','/give_payment/:id','/view/:id','Sale\x20Return','/sales_return/view','Hindi','errors','paid_amount','product_code','string','Finished\x20Goods','ToRoom','due_amount','12TAhSHZ','secondary_code','$product_details.rack','warehouse_name','message','283496XVhRiK','return_qty','4384FaNqVi','params','$product_details.type','findOne','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Enabled','bay','purchase\x20return\x20successfully','English\x20(US)','German','Chinese','$product_details.primary_code','data','primary_code_QA','type','old_warehouse_data','product_name_QA','getFullYear','findById','sales_quantity','483300qNLnSr','$product_details.bay','Router','json'];a0_0x13db=function(){return _0x28d6d4;};return a0_0x13db();}(function(_0x40eca6,_0x3336e8){var _0x328634=a0_0x1ef5,_0x3ebd32=_0x40eca6();while(!![]){try{var _0x4d361c=parseInt(_0x328634(0x255))/0x1*(-parseInt(_0x328634(0x1fd))/0x2)+-parseInt(_0x328634(0x22c))/0x3*(parseInt(_0x328634(0x231))/0x4)+-parseInt(_0x328634(0x1f8))/0x5+-parseInt(_0x328634(0x247))/0x6+parseInt(_0x328634(0x24e))/0x7*(-parseInt(_0x328634(0x233))/0x8)+parseInt(_0x328634(0x1fb))/0x9+parseInt(_0x328634(0x202))/0xa*(parseInt(_0x328634(0x216))/0xb);if(_0x4d361c===_0x3336e8)break;else _0x3ebd32['push'](_0x3ebd32['shift']());}catch(_0x1b4daa){_0x3ebd32['push'](_0x3ebd32['shift']());}}}(a0_0x13db,0x25669));const express=require('express'),app=express(),router=express[a0_0x2f4bf5(0x249)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x2f4bf5(0x205)),users=require(a0_0x2f4bf5(0x1e7));router[a0_0x2f4bf5(0x1f1)]('/view',auth,async(_0x2e728d,_0x129c72)=>{var _0x2ceeef=a0_0x2f4bf5;try{const {username:_0x21f7e9,email:_0x27cae1,role:_0xcd757e}=_0x2e728d[_0x2ceeef(0x1de)],_0x9b652a=_0x2e728d[_0x2ceeef(0x1de)],_0x1eb46b=await profile[_0x2ceeef(0x236)]({'email':_0x9b652a[_0x2ceeef(0x1ff)]}),_0x1baf4c=await master_shop[_0x2ceeef(0x219)](),_0x3d76a9=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x2ceeef(0x20d),'localField':_0x2ceeef(0x1eb),'foreignField':_0x2ceeef(0x1ea),'as':_0x2ceeef(0x1f6)}},{'$unwind':_0x2ceeef(0x1f7)}]);if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x23b)){var _0x8f1642=users[_0x2ceeef(0x201)];console[_0x2ceeef(0x24c)](_0x8f1642);}else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x224))var _0x8f1642=users[_0x2ceeef(0x224)];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x23c))var _0x8f1642=users[_0x2ceeef(0x23c)];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x210))var _0x8f1642=users[_0x2ceeef(0x210)];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x1da))var _0x8f1642=users['French'];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x211))var _0x8f1642=users[_0x2ceeef(0x24b)];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]==_0x2ceeef(0x23d))var _0x8f1642=users[_0x2ceeef(0x23d)];else{if(_0x1baf4c[0x0][_0x2ceeef(0x208)]=='Arabic\x20(ae)')var _0x8f1642=users[_0x2ceeef(0x1e8)];}}}}}}}_0x129c72[_0x2ceeef(0x214)](_0x2ceeef(0x1f0),{'success':_0x2e728d[_0x2ceeef(0x1f9)](_0x2ceeef(0x1dd)),'errors':_0x2e728d['flash'](_0x2ceeef(0x225)),'role':_0x9b652a,'profile':_0x1eb46b,'master_shop':_0x1baf4c,'user':_0x3d76a9,'language':_0x8f1642});}catch(_0x53f125){console[_0x2ceeef(0x24c)](_0x53f125);}}),router[a0_0x2f4bf5(0x1f1)](a0_0x2f4bf5(0x221),auth,async(_0x13b7d3,_0x3ea1a9)=>{var _0x338c24=a0_0x2f4bf5;try{const {username:_0xb3970f,email:_0x45f2c,role:_0x300678}=_0x13b7d3['user'],_0x4db612=_0x13b7d3[_0x338c24(0x1de)],_0x5b2f79=await profile[_0x338c24(0x236)]({'email':_0x4db612[_0x338c24(0x1ff)]}),_0x16edaf=await master_shop['find']();console[_0x338c24(0x24c)](_0x338c24(0x252),_0x16edaf);const _0x521b90=_0x13b7d3['params']['id'];console[_0x338c24(0x24c)](_0x521b90);var _0x3eb6b0=[_0x338c24(0x218)];const _0x3d0f05=await sales_return_finished['findById'](_0x521b90),_0x512776=await warehouse['aggregate']([{'$match':{'name':_0x3d0f05['ToWarehouse'],'room':_0x3d0f05['ToRoom']}},{'$unwind':_0x338c24(0x1ec)},{'$group':{'_id':_0x338c24(0x213),'name':{'$first':_0x338c24(0x215)},'product_stock':{'$first':_0x338c24(0x253)},'bay':{'$first':_0x338c24(0x248)},'bin':{'$first':_0x338c24(0x1ef)},'type':{'$first':_0x338c24(0x235)},'floorlevel':{'$first':_0x338c24(0x1e9)},'primary_code':{'$first':_0x338c24(0x23e)},'secondary_code':{'$first':_0x338c24(0x251)},'product_code':{'$first':_0x338c24(0x1f4)},'storage':{'$first':_0x338c24(0x1fa)},'rack':{'$first':_0x338c24(0x22e)}}}]);console[_0x338c24(0x24c)](_0x512776);const _0x526205=await warehouse[_0x338c24(0x20c)]([{'$match':{'status':_0x338c24(0x238),'warehouse_category':_0x338c24(0x229)}},{'$group':{'_id':_0x338c24(0x20e),'name':{'$first':_0x338c24(0x20e)}}},{'$sort':{'name':0x1}}]),_0x33c21f=await warehouse[_0x338c24(0x20c)]([{'$match':{'status':'Enabled','name':'QA\x20Warehouse'}},{'$group':{'_id':_0x338c24(0x20e),'name':{'$first':_0x338c24(0x20e)}}},{'$sort':{'name':0x1}}]),_0x157a62=await product['find']({});if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x23b)){var _0x57ccb0=users[_0x338c24(0x201)];console[_0x338c24(0x24c)](_0x57ccb0);}else{if(_0x16edaf[0x0]['language']==_0x338c24(0x224))var _0x57ccb0=users[_0x338c24(0x224)];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x23c))var _0x57ccb0=users[_0x338c24(0x23c)];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x210))var _0x57ccb0=users['Spanish'];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x1da))var _0x57ccb0=users[_0x338c24(0x1da)];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x211))var _0x57ccb0=users[_0x338c24(0x24b)];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x23d))var _0x57ccb0=users[_0x338c24(0x23d)];else{if(_0x16edaf[0x0][_0x338c24(0x208)]==_0x338c24(0x20a))var _0x57ccb0=users[_0x338c24(0x1e8)];}}}}}}}_0x3ea1a9[_0x338c24(0x214)](_0x338c24(0x204),{'success':_0x13b7d3[_0x338c24(0x1f9)](_0x338c24(0x1dd)),'errors':_0x13b7d3[_0x338c24(0x1f9)](_0x338c24(0x225)),'role':_0x4db612,'profile':_0x5b2f79,'master_shop':_0x16edaf,'user':_0x3d0f05,'stock':_0x512776,'unit':_0x157a62,'language':_0x57ccb0,'warehouses':_0x526205,'rooms':_0x3eb6b0,'warehouse_QA':_0x33c21f});}catch(_0x20b6cc){console[_0x338c24(0x24c)](_0x20b6cc);}}),router[a0_0x2f4bf5(0x1e6)](a0_0x2f4bf5(0x221),auth,async(_0x5307de,_0x58ee19)=>{var _0x1cf6ed=a0_0x2f4bf5;if(_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x21b)]=='QA')try{const _0xf8a958=_0x5307de[_0x1cf6ed(0x234)]['id'],_0x2bfa15=await sales_return['findOne']({'invoice':_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x256)]}),_0x237cd4=await warehouse[_0x1cf6ed(0x236)]({'name':_0x2bfa15[_0x1cf6ed(0x1e1)],'room':_0x2bfa15['ToRoom']}),{invoice:_0x565f03,customer:_0x1b028d,date:_0x14106b,warehouse_name:_0x1f7f3f,product_name:_0xd0ed8,primary_code:_0x2b28ab,secondary_code:_0x30b803,product_code:_0x35d2a9,sales_quantity:_0xfcadea,stocks:_0x30d1be,return_qty:_0x35bb7c,note:_0x3d8c52,to_warehouse_name_QA:_0x1158a0,to_Room_name_QA:_0x134ffe}=_0x5307de[_0x1cf6ed(0x1d9)];if(typeof product_name_QA==_0x1cf6ed(0x228))var _0x464f99=[_0x5307de['body'][_0x1cf6ed(0x243)]],_0x4b8e7d=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x240)]],_0x2b413d=[_0x5307de[_0x1cf6ed(0x1d9)]['secondary_code_QA']],_0x5c595d=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x200)]],_0x24c63f=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1ee)]],_0x476dad=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1fe)]],_0xa31ebf=[_0x5307de[_0x1cf6ed(0x1d9)]['return_qty_QA']];else var _0x464f99=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x243)]],_0x4b8e7d=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x240)]],_0x2b413d=[..._0x5307de[_0x1cf6ed(0x1d9)]['secondary_code_QA']],_0x5c595d=[..._0x5307de['body'][_0x1cf6ed(0x200)]],_0x24c63f=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1ee)]],_0x476dad=[..._0x5307de[_0x1cf6ed(0x1d9)]['stocks_QA']],_0xa31ebf=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1e0)]];const _0x307097=_0x464f99[_0x1cf6ed(0x21c)](_0x3a53d8=>{return _0x3a53d8={'product_name':_0x3a53d8};});_0x4b8e7d[_0x1cf6ed(0x1fc)]((_0x1da7c6,_0x1773ec)=>{_0x307097[_0x1773ec]['primary_code']=_0x1da7c6;}),_0x2b413d[_0x1cf6ed(0x1fc)]((_0x21ac13,_0x4a746f)=>{var _0x4d9e86=_0x1cf6ed;_0x307097[_0x4a746f][_0x4d9e86(0x22d)]=_0x21ac13;}),_0x5c595d[_0x1cf6ed(0x1fc)]((_0x3a912d,_0x2bb79b)=>{var _0x308661=_0x1cf6ed;_0x307097[_0x2bb79b][_0x308661(0x227)]=_0x3a912d;}),_0x24c63f['forEach']((_0x2e1c87,_0x1b7762)=>{var _0x3cb00a=_0x1cf6ed;_0x307097[_0x1b7762][_0x3cb00a(0x209)]=_0x2e1c87;}),_0x476dad[_0x1cf6ed(0x1fc)]((_0x15ffb7,_0x4f48b9)=>{var _0x1f2e57=_0x1cf6ed;_0x307097[_0x4f48b9][_0x1f2e57(0x24d)]=_0x15ffb7;}),_0xa31ebf[_0x1cf6ed(0x1fc)]((_0x15f020,_0xd50c1)=>{var _0x46fdd9=_0x1cf6ed;_0x307097[_0xd50c1][_0x46fdd9(0x232)]=_0x15f020;}),_0x2bfa15[_0x1cf6ed(0x1db)]['forEach'](_0x395955=>{var _0x4b6065=_0x1cf6ed;const _0x19fad9=_0x237cd4[_0x4b6065(0x207)][_0x4b6065(0x21c)](_0xab3cfa=>{var _0x186d0d=_0x4b6065;_0xab3cfa[_0x186d0d(0x203)]==_0x395955[_0x186d0d(0x203)]&&(_0xab3cfa['product_stock']=parseInt(_0xab3cfa[_0x186d0d(0x21d)])+parseInt(_0x395955[_0x186d0d(0x232)]));});}),await _0x237cd4[_0x1cf6ed(0x212)](),_0x2bfa15[_0x1cf6ed(0x256)]=_0x565f03,_0x2bfa15[_0x1cf6ed(0x1eb)]=_0x1b028d,_0x2bfa15[_0x1cf6ed(0x21e)]=_0x14106b,_0x2bfa15[_0x1cf6ed(0x22f)]=_0x1f7f3f,_0x2bfa15[_0x1cf6ed(0x1db)]=_0x307097,_0x2bfa15['note']=_0x3d8c52,_0x2bfa15[_0x1cf6ed(0x1e1)]=_0x1158a0,_0x2bfa15[_0x1cf6ed(0x22a)]=_0x134ffe;const _0x1a174c=await _0x2bfa15[_0x1cf6ed(0x212)](),_0x49b91e=await c_payment_data[_0x1cf6ed(0x236)]({'invoice':_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x256)],'reason':_0x1cf6ed(0x222)});_0x49b91e[_0x1cf6ed(0x1f5)]=_0x5307de[_0x1cf6ed(0x1d9)]['suppliers'],_0x49b91e[_0x1cf6ed(0x21e)]=_0x5307de[_0x1cf6ed(0x1d9)]['date'],await _0x49b91e['save'](),_0x5307de[_0x1cf6ed(0x1f9)]('success','purchase\x20return\x20successfully'),_0x58ee19[_0x1cf6ed(0x1df)]('/sales_return_finished/view');}catch(_0x148b02){console['log'](_0x148b02),_0x58ee19['status'](0xc8)[_0x1cf6ed(0x24a)]({'message':_0x148b02[_0x1cf6ed(0x230)]});}else try{const _0x4c337b=_0x5307de[_0x1cf6ed(0x234)]['id'];console[_0x1cf6ed(0x24c)](_0x4c337b);const _0x20b17f=await sales_return['findOne']({'invoice':_0x5307de[_0x1cf6ed(0x1d9)]['invoice']});console[_0x1cf6ed(0x24c)](_0x1cf6ed(0x1e2),_0x20b17f);const _0xef3fd1=await warehouse[_0x1cf6ed(0x236)]({'name':_0x20b17f[_0x1cf6ed(0x1e1)],'room':_0x20b17f[_0x1cf6ed(0x22a)]});console[_0x1cf6ed(0x24c)](_0x1cf6ed(0x242),_0xef3fd1);const {invoice:_0x5c93d4,customer:_0x3375b7,date:_0x316108,warehouse_name:_0x2482eb,product_name:_0x25d0f0,primary_code:_0x6dd70f,secondary_code:_0x45755a,product_code:_0x4286d3,sales_quantity:_0x2693e1,stocks:_0x243431,return_qty:_0x379652,note:_0x213026,to_warehouse_name:_0x34935c,to_Room_name:_0x27f60d}=_0x5307de['body'];console['log'](_0x5307de[_0x1cf6ed(0x1d9)]);if(typeof _0x25d0f0=='string')var _0x464f99=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x203)]],_0x4b8e7d=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1dc)]],_0x2b413d=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x22d)]],_0x5c595d=[_0x5307de[_0x1cf6ed(0x1d9)]['product_code']],_0x24c63f=[_0x5307de['body']['sales_quantity']],_0x476dad=[_0x5307de[_0x1cf6ed(0x1d9)]['stocks']],_0xa31ebf=[_0x5307de[_0x1cf6ed(0x1d9)]['return_qty']],_0x436f30=[_0x5307de['body'][_0x1cf6ed(0x239)]],_0x598798=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x24f)]],_0x4b6f34=[_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x21a)]],_0x2f7308=[_0x5307de[_0x1cf6ed(0x1d9)]['floorlevel']];else var _0x464f99=[..._0x5307de[_0x1cf6ed(0x1d9)]['product_name']],_0x4b8e7d=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x1dc)]],_0x2b413d=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x22d)]],_0x5c595d=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x227)]],_0x24c63f=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x246)]],_0x476dad=[..._0x5307de[_0x1cf6ed(0x1d9)]['stocks']],_0xa31ebf=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x232)]],_0x436f30=[..._0x5307de[_0x1cf6ed(0x1d9)]['bay']],_0x598798=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x24f)]],_0x4b6f34=[..._0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x21a)]],_0x2f7308=[..._0x5307de['body'][_0x1cf6ed(0x254)]];const _0x16143c=_0x464f99[_0x1cf6ed(0x21c)](_0x229a23=>{return _0x229a23={'product_name':_0x229a23};});_0x4b8e7d[_0x1cf6ed(0x1fc)]((_0x3e9a39,_0x31272f)=>{var _0x21ca8e=_0x1cf6ed;_0x16143c[_0x31272f][_0x21ca8e(0x1dc)]=_0x3e9a39;}),_0x2b413d[_0x1cf6ed(0x1fc)]((_0x80cf88,_0xa6172d)=>{_0x16143c[_0xa6172d]['secondary_code']=_0x80cf88;}),_0x5c595d[_0x1cf6ed(0x1fc)]((_0x4607fe,_0xfd199a)=>{_0x16143c[_0xfd199a]['product_code']=_0x4607fe;}),_0x24c63f[_0x1cf6ed(0x1fc)]((_0x4c7ab1,_0x247b3b)=>{_0x16143c[_0x247b3b]['sale_qty']=_0x4c7ab1;}),_0x476dad['forEach']((_0x49815c,_0x327793)=>{var _0x4d9907=_0x1cf6ed;_0x16143c[_0x327793][_0x4d9907(0x24d)]=_0x49815c;}),_0xa31ebf[_0x1cf6ed(0x1fc)]((_0x470414,_0x14aa9c)=>{_0x16143c[_0x14aa9c]['return_qty']=_0x470414;}),_0x436f30[_0x1cf6ed(0x1fc)]((_0x302653,_0xca5775)=>{var _0x469ecc=_0x1cf6ed;_0x16143c[_0xca5775][_0x469ecc(0x239)]=_0x302653;}),_0x598798[_0x1cf6ed(0x1fc)]((_0x6dd99f,_0x32af3f)=>{var _0x71e978=_0x1cf6ed;_0x16143c[_0x32af3f][_0x71e978(0x24f)]=_0x6dd99f;}),_0x4b6f34[_0x1cf6ed(0x1fc)]((_0x5fe19b,_0x1a43b7)=>{var _0x40ce78=_0x1cf6ed;_0x16143c[_0x1a43b7][_0x40ce78(0x241)]=_0x5fe19b;}),_0x2f7308[_0x1cf6ed(0x1fc)]((_0x11cc94,_0x33957a)=>{_0x16143c[_0x33957a]['floorlevel']=_0x11cc94;});var _0x562379=0x0;_0x16143c[_0x1cf6ed(0x1fc)](_0xe4929b=>{var _0x63862=_0x1cf6ed;console[_0x63862(0x24c)](_0x63862(0x206),_0xe4929b),(parseInt(_0xe4929b['sale_qty'])<parseInt(_0xe4929b['return_qty'])||parseInt(_0xe4929b['stock'])<parseInt(_0xe4929b[_0x63862(0x232)])&&parseInt(_0xe4929b['sale_qty'])>parseInt(_0xe4929b[_0x63862(0x232)])||parseInt(_0xe4929b[_0x63862(0x232)])==0x0)&&_0x562379++;});if(_0x562379!=0x0)return _0x5307de['flash'](_0x1cf6ed(0x225),_0x1cf6ed(0x237)),_0x58ee19[_0x1cf6ed(0x1df)](_0x1cf6ed(0x217));_0x20b17f['return_sale'][_0x1cf6ed(0x1fc)](_0x37ba4d=>{var _0x1f2c3b=_0x1cf6ed;const _0x1f76ae=_0xef3fd1['product_details'][_0x1f2c3b(0x21c)](_0x48f2a3=>{var _0x1cbba4=_0x1f2c3b;_0x48f2a3[_0x1cbba4(0x203)]==_0x37ba4d['product_name']&&_0x48f2a3[_0x1cbba4(0x254)]==_0x37ba4d['floorlevel']&&_0x48f2a3[_0x1cbba4(0x241)]==_0x37ba4d['type']&&_0x48f2a3[_0x1cbba4(0x24f)]==_0x37ba4d[_0x1cbba4(0x24f)]&&_0x48f2a3[_0x1cbba4(0x239)]==_0x37ba4d[_0x1cbba4(0x239)]&&(_0x48f2a3['product_stock']=parseInt(_0x48f2a3[_0x1cbba4(0x21d)])+parseInt(_0x37ba4d[_0x1cbba4(0x232)]));});}),console['log']('old_warehouse_data',_0xef3fd1),await _0xef3fd1[_0x1cf6ed(0x212)](),_0x20b17f[_0x1cf6ed(0x256)]=_0x5c93d4,_0x20b17f[_0x1cf6ed(0x1eb)]=_0x3375b7,_0x20b17f[_0x1cf6ed(0x21e)]=_0x316108,_0x20b17f['warehouse_name']=_0x2482eb,_0x20b17f['return_sale']=_0x16143c,_0x20b17f['note']=_0x213026,_0x20b17f[_0x1cf6ed(0x1e1)]=_0x34935c,_0x20b17f[_0x1cf6ed(0x22a)]=_0x27f60d;const _0x41a6a1=await _0x20b17f[_0x1cf6ed(0x212)]();console[_0x1cf6ed(0x24c)](_0x1cf6ed(0x1e4),_0x41a6a1);const _0x3c8d56=await c_payment_data[_0x1cf6ed(0x236)]({'invoice':_0x5307de[_0x1cf6ed(0x1d9)][_0x1cf6ed(0x256)],'reason':_0x1cf6ed(0x222)});_0x3c8d56[_0x1cf6ed(0x1f5)]=_0x5307de['body']['suppliers'],_0x3c8d56['date']=_0x5307de['body']['date'],await _0x3c8d56[_0x1cf6ed(0x212)](),_0x5307de[_0x1cf6ed(0x1f9)](_0x1cf6ed(0x1dd),_0x1cf6ed(0x23a)),_0x58ee19[_0x1cf6ed(0x1df)](_0x1cf6ed(0x223));}catch(_0xe02169){console[_0x1cf6ed(0x24c)](_0xe02169),_0x58ee19['status'](0xc8)[_0x1cf6ed(0x24a)]({'message':_0xe02169['message']});}}),router[a0_0x2f4bf5(0x1e6)](a0_0x2f4bf5(0x220),auth,async(_0x149c5d,_0x3beed3)=>{var _0x284c0e=a0_0x2f4bf5;try{const _0x686d2b=_0x149c5d[_0x284c0e(0x234)]['id'],{invoice:_0x3fb838,customer:_0xe830f4,payable_to_customer:_0x47662a,paid_amount:_0x40fd86}=_0x149c5d[_0x284c0e(0x1d9)],_0x1bfbda=await sales_return['findById'](_0x686d2b);console['log'](_0x284c0e(0x23f),_0x1bfbda),console[_0x284c0e(0x24c)](_0x47662a),console['log'](_0x40fd86);var _0x2e53eb=_0x47662a-_0x40fd86;console[_0x284c0e(0x24c)](_0x284c0e(0x1f3),_0x2e53eb),_0x1bfbda['paid_amount']=parseFloat(_0x40fd86)+parseFloat(_0x1bfbda[_0x284c0e(0x226)]),_0x1bfbda[_0x284c0e(0x22b)]=_0x2e53eb,console[_0x284c0e(0x24c)](_0x1bfbda);const _0x31e5ec=await _0x1bfbda[_0x284c0e(0x212)]();console[_0x284c0e(0x24c)](0x1b207);const _0x5068d2=await c_payment_data[_0x284c0e(0x236)]({'invoice':_0x149c5d[_0x284c0e(0x1d9)][_0x284c0e(0x256)],'reason':_0x284c0e(0x222)});console[_0x284c0e(0x24c)]('c_payment',_0x5068d2),_0x5068d2[_0x284c0e(0x1e3)]=_0x2e53eb,await _0x5068d2[_0x284c0e(0x212)]();let _0x19656a=new Date(),_0x510817=('0'+_0x19656a[_0x284c0e(0x20f)]())[_0x284c0e(0x1ed)](-0x2),_0x16e213=('0'+(_0x19656a[_0x284c0e(0x250)]()+0x1))['slice'](-0x2),_0x12f3a9=_0x19656a[_0x284c0e(0x244)](),_0x20d7d8=_0x12f3a9+'-'+_0x16e213+'-'+_0x510817;const _0x8e58e9=new customer_payment({'invoice':_0x3fb838,'date':_0x12f3a9+'-'+_0x16e213+'-'+_0x510817,'customer':_0xe830f4,'reason':_0x284c0e(0x21f),'amount':_0x40fd86}),_0x562cab=await _0x8e58e9[_0x284c0e(0x212)]();_0x149c5d[_0x284c0e(0x1f9)](_0x284c0e(0x1dd),_0x284c0e(0x1f2)),_0x3beed3[_0x284c0e(0x1df)](_0x284c0e(0x223));}catch(_0x5b448){console[_0x284c0e(0x24c)](_0x5b448);}}),router[a0_0x2f4bf5(0x1f1)]('/invoice/:id',auth,async(_0x2df242,_0x4eea72)=>{var _0x12313e=a0_0x2f4bf5;try{const {username:_0x253ba9,email:_0x3bb9af,role:_0x47b7f3}=_0x2df242['user'],_0x503d26=_0x2df242['user'],_0x5c32c3=await profile['findOne']({'email':_0x503d26[_0x12313e(0x1ff)]}),_0x260017=await master_shop[_0x12313e(0x219)]();console[_0x12313e(0x24c)](_0x12313e(0x252),_0x260017);const _0x5365a3=_0x2df242[_0x12313e(0x234)]['id'],_0x53dfe2=await sales_return[_0x12313e(0x245)](_0x5365a3);console[_0x12313e(0x24c)](_0x53dfe2);const _0x149d2d=await customer[_0x12313e(0x236)]({'name':_0x53dfe2['customer']});console[_0x12313e(0x24c)](_0x149d2d);if(_0x260017[0x0]['language']==_0x12313e(0x23b)){var _0x3ec6d5=users[_0x12313e(0x201)];console['log'](_0x3ec6d5);}else{if(_0x260017[0x0][_0x12313e(0x208)]==_0x12313e(0x224))var _0x3ec6d5=users['Hindi'];else{if(_0x260017[0x0][_0x12313e(0x208)]==_0x12313e(0x23c))var _0x3ec6d5=users['German'];else{if(_0x260017[0x0][_0x12313e(0x208)]==_0x12313e(0x210))var _0x3ec6d5=users[_0x12313e(0x210)];else{if(_0x260017[0x0]['language']==_0x12313e(0x1da))var _0x3ec6d5=users[_0x12313e(0x1da)];else{if(_0x260017[0x0][_0x12313e(0x208)]==_0x12313e(0x211))var _0x3ec6d5=users['Portuguese'];else{if(_0x260017[0x0][_0x12313e(0x208)]==_0x12313e(0x23d))var _0x3ec6d5=users[_0x12313e(0x23d)];else{if(_0x260017[0x0]['language']==_0x12313e(0x20a))var _0x3ec6d5=users[_0x12313e(0x1e8)];}}}}}}}_0x4eea72['render'](_0x12313e(0x1e5),{'success':_0x2df242[_0x12313e(0x1f9)](_0x12313e(0x1dd)),'errors':_0x2df242['flash'](_0x12313e(0x225)),'role':_0x503d26,'profile':_0x5c32c3,'master_shop':_0x260017,'customers':_0x149d2d,'sales':_0x53dfe2,'language':_0x3ec6d5});}catch(_0x3d63b1){console[_0x12313e(0x24c)](_0x3d63b1);}}),module[a0_0x2f4bf5(0x20b)]=router;