var a0_0x48208c=a0_0x6563;function a0_0x6563(_0x54be25,_0x1b7a8c){var _0x277e37=a0_0x277e();return a0_0x6563=function(_0x65637,_0x5dc2d3){_0x65637=_0x65637-0x173;var _0x39bb12=_0x277e37[_0x65637];return _0x39bb12;},a0_0x6563(_0x54be25,_0x1b7a8c);}(function(_0x499fd4,_0x41f454){var _0x15b8c2=a0_0x6563,_0x4b5f28=_0x499fd4();while(!![]){try{var _0x301ae8=-parseInt(_0x15b8c2(0x174))/0x1+-parseInt(_0x15b8c2(0x1a4))/0x2+parseInt(_0x15b8c2(0x1e2))/0x3+parseInt(_0x15b8c2(0x1e7))/0x4*(parseInt(_0x15b8c2(0x1c1))/0x5)+-parseInt(_0x15b8c2(0x1da))/0x6*(parseInt(_0x15b8c2(0x176))/0x7)+-parseInt(_0x15b8c2(0x1d8))/0x8+parseInt(_0x15b8c2(0x1eb))/0x9;if(_0x301ae8===_0x41f454)break;else _0x4b5f28['push'](_0x4b5f28['shift']());}catch(_0x293a2a){_0x4b5f28['push'](_0x4b5f28['shift']());}}}(a0_0x277e,0xc041e));const express=require(a0_0x48208c(0x1d7)),app=express(),router=express[a0_0x48208c(0x17f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x48208c(0x1a8)),auth=require(a0_0x48208c(0x1db)),users=require(a0_0x48208c(0x1b1));function a0_0x277e(){var _0x21c87f=['purchase\x20return\x20successfully','12490FaDylC','amount','back','$product_details._id','bay','due_amount','map','customer','sale_qty','German','Portuguese','Arabic','$product_details.product_name','stock','language','invoice','product_code','exports','$name','Chinese','Sale\x20Return','aggregate','express','12352584qUGiqO','return_qty','79602PTAPcV','../middleware/auth','/sales_return_finished/view','customer_docs','Portuguese\x20(BR)','suppliers','return_sale','return_sale_edit_finished','3714657OnbNNZ','name','new\x20new_data','findOne','Spanish','1896BWpyHf','$product_details.type','$product_details.storage','$product_details.primary_code','35126658VfhWIi','type','customers','Hindi','note','$product_details','1499031ksdtPN','English','742boPfss','getFullYear','flash','warehouse_name','slice','data','/give_payment/:id','old_warehouse_data','errors','Router','params','Arabic\x20(ae)','success','primary_code_QA','log','product_details','ToRoom','product_name','$product_details.floorlevel','return_qty_QA','stocks','primary_code','status','secondary_code_QA','subtract','/invoice/:id','save','redirect','$product_details.bin','json','Return\x20Rooms','body','forEach','find','/sales_return/view','c_payment','stocks_QA','product_stock','product_code_QA','floorlevel','return_sale_QA','date','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','string','secondary_code','master','2176682vQFNws','$product_details.product_code','old_data','payment\x20successfull','../models/all_models','Enabled','English\x20(US)','ToWarehouse','post','French','for_categorize','message','get','../public/language/languages.json','bin','paid_amount','product_name_QA','email','/view/:id','render','findById','sales_return_invoice','Finished\x20Goods','user','sales_quantity_QA','sales_return_finished','$product_details.rack','sales_quantity'];a0_0x277e=function(){return _0x21c87f;};return a0_0x277e();}router[a0_0x48208c(0x1b0)]('/view',auth,async(_0x3d10e7,_0x1cc033)=>{var _0x4d6ea9=a0_0x48208c;try{const {username:_0x515130,email:_0x1d5ebd,role:_0x273017}=_0x3d10e7[_0x4d6ea9(0x1bb)],_0xd2829a=_0x3d10e7['user'],_0xf73793=await profile[_0x4d6ea9(0x1e5)]({'email':_0xd2829a[_0x4d6ea9(0x1b5)]}),_0x47bbc2=await master_shop[_0x4d6ea9(0x197)](),_0x550cd2=await sales_return_finished[_0x4d6ea9(0x1d6)]([{'$lookup':{'from':_0x4d6ea9(0x1ed),'localField':_0x4d6ea9(0x1c8),'foreignField':_0x4d6ea9(0x1e3),'as':_0x4d6ea9(0x1dd)}},{'$unwind':'$customer_docs'}]);if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1aa)){var _0x291793=users['English'];console[_0x4d6ea9(0x184)](_0x291793);}else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]=='Hindi')var _0x291793=users[_0x4d6ea9(0x1ee)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1ca))var _0x291793=users[_0x4d6ea9(0x1ca)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1e6))var _0x291793=users[_0x4d6ea9(0x1e6)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1ad))var _0x291793=users[_0x4d6ea9(0x1ad)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1de))var _0x291793=users[_0x4d6ea9(0x1cb)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x1d4))var _0x291793=users[_0x4d6ea9(0x1d4)];else{if(_0x47bbc2[0x0][_0x4d6ea9(0x1cf)]==_0x4d6ea9(0x181))var _0x291793=users[_0x4d6ea9(0x1cc)];}}}}}}}_0x1cc033[_0x4d6ea9(0x1b7)](_0x4d6ea9(0x1bd),{'success':_0x3d10e7[_0x4d6ea9(0x178)]('success'),'errors':_0x3d10e7['flash'](_0x4d6ea9(0x17e)),'role':_0xd2829a,'profile':_0xf73793,'master_shop':_0x47bbc2,'user':_0x550cd2,'language':_0x291793});}catch(_0x122038){console[_0x4d6ea9(0x184)](_0x122038);}}),router[a0_0x48208c(0x1b0)](a0_0x48208c(0x1b6),auth,async(_0x16c76d,_0x59a4c5)=>{var _0xe25a18=a0_0x48208c;try{const {username:_0x2a4742,email:_0x1b062e,role:_0x49045e}=_0x16c76d['user'],_0x16a86f=_0x16c76d[_0xe25a18(0x1bb)],_0x4c80fc=await profile[_0xe25a18(0x1e5)]({'email':_0x16a86f[_0xe25a18(0x1b5)]}),_0x32a696=await master_shop['find']();console['log'](_0xe25a18(0x1a3),_0x32a696);const _0x2686ec=_0x16c76d[_0xe25a18(0x180)]['id'];console[_0xe25a18(0x184)](_0x2686ec);var _0x34d18e=[_0xe25a18(0x194)];const _0x151651=await sales_return_finished[_0xe25a18(0x1b8)](_0x2686ec),_0x56c822=await warehouse[_0xe25a18(0x1d6)]([{'$match':{'name':_0x151651[_0xe25a18(0x1ab)],'room':_0x151651[_0xe25a18(0x186)]}},{'$unwind':_0xe25a18(0x173)},{'$group':{'_id':_0xe25a18(0x1c4),'name':{'$first':_0xe25a18(0x1cd)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xe25a18(0x192)},'type':{'$first':_0xe25a18(0x1e8)},'floorlevel':{'$first':_0xe25a18(0x188)},'primary_code':{'$first':_0xe25a18(0x1ea)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xe25a18(0x1a5)},'storage':{'$first':_0xe25a18(0x1e9)},'rack':{'$first':_0xe25a18(0x1be)}}}]);console[_0xe25a18(0x184)](_0x56c822);const _0x214d6d=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0xe25a18(0x1ba)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x4d0ba5=await warehouse[_0xe25a18(0x1d6)]([{'$match':{'status':_0xe25a18(0x1a9),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0xe25a18(0x1d3),'name':{'$first':_0xe25a18(0x1d3)}}},{'$sort':{'name':0x1}}]),_0x431c86=await product['find']({});if(_0x32a696[0x0]['language']=='English\x20(US)'){var _0x3c01f0=users['English'];console[_0xe25a18(0x184)](_0x3c01f0);}else{if(_0x32a696[0x0]['language']=='Hindi')var _0x3c01f0=users['Hindi'];else{if(_0x32a696[0x0]['language']==_0xe25a18(0x1ca))var _0x3c01f0=users[_0xe25a18(0x1ca)];else{if(_0x32a696[0x0][_0xe25a18(0x1cf)]==_0xe25a18(0x1e6))var _0x3c01f0=users[_0xe25a18(0x1e6)];else{if(_0x32a696[0x0][_0xe25a18(0x1cf)]=='French')var _0x3c01f0=users[_0xe25a18(0x1ad)];else{if(_0x32a696[0x0][_0xe25a18(0x1cf)]==_0xe25a18(0x1de))var _0x3c01f0=users[_0xe25a18(0x1cb)];else{if(_0x32a696[0x0][_0xe25a18(0x1cf)]=='Chinese')var _0x3c01f0=users[_0xe25a18(0x1d4)];else{if(_0x32a696[0x0][_0xe25a18(0x1cf)]=='Arabic\x20(ae)')var _0x3c01f0=users['Arabic'];}}}}}}}_0x59a4c5[_0xe25a18(0x1b7)](_0xe25a18(0x1e1),{'success':_0x16c76d['flash'](_0xe25a18(0x182)),'errors':_0x16c76d['flash'](_0xe25a18(0x17e)),'role':_0x16a86f,'profile':_0x4c80fc,'master_shop':_0x32a696,'user':_0x151651,'stock':_0x56c822,'unit':_0x431c86,'language':_0x3c01f0,'warehouses':_0x214d6d,'rooms':_0x34d18e,'warehouse_QA':_0x4d0ba5});}catch(_0x1507fb){console[_0xe25a18(0x184)](_0x1507fb);}}),router[a0_0x48208c(0x1ac)](a0_0x48208c(0x1b6),auth,async(_0x484e24,_0xaad3f7)=>{var _0x54b853=a0_0x48208c;if(_0x484e24[_0x54b853(0x195)][_0x54b853(0x1ae)]=='QA')try{const _0x3d4d58=_0x484e24[_0x54b853(0x180)]['id'],_0x3c0426=await sales_return[_0x54b853(0x1e5)]({'invoice':_0x484e24[_0x54b853(0x195)][_0x54b853(0x1d0)]}),_0x1991a6=await warehouse[_0x54b853(0x1e5)]({'name':_0x3c0426[_0x54b853(0x1ab)],'room':_0x3c0426[_0x54b853(0x186)]}),{invoice:_0x3c191a,customer:_0x2a59e9,date:_0x2784c2,warehouse_name:_0x1f7ac9,product_name:_0x5c8c46,primary_code:_0x1edca8,secondary_code:_0x1ff7d3,product_code:_0xfd71c7,sales_quantity:_0x284379,stocks:_0x78ce6c,return_qty:_0x545654,note:_0x43b4cf,to_warehouse_name_QA:_0x639bd7,to_Room_name_QA:_0x338327}=_0x484e24[_0x54b853(0x195)];if(typeof product_name_QA==_0x54b853(0x1a1))var _0x3d77e2=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x1b4)]],_0x57a1b3=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x183)]],_0x28b389=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x18d)]],_0x1df1b8=[_0x484e24['body'][_0x54b853(0x19c)]],_0x220452=[_0x484e24['body'][_0x54b853(0x1bc)]],_0x5bc5d7=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x19a)]],_0x174e6e=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x189)]];else var _0x3d77e2=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1b4)]],_0x57a1b3=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x183)]],_0x28b389=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x18d)]],_0x1df1b8=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x19c)]],_0x220452=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1bc)]],_0x5bc5d7=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x19a)]],_0x174e6e=[..._0x484e24['body'][_0x54b853(0x189)]];const _0x1035d2=_0x3d77e2['map'](_0x2c5f57=>{return _0x2c5f57={'product_name':_0x2c5f57};});_0x57a1b3[_0x54b853(0x196)]((_0x203048,_0x53e348)=>{var _0x26c795=_0x54b853;_0x1035d2[_0x53e348][_0x26c795(0x18b)]=_0x203048;}),_0x28b389[_0x54b853(0x196)]((_0x545f39,_0x208ae0)=>{var _0x171886=_0x54b853;_0x1035d2[_0x208ae0][_0x171886(0x1a2)]=_0x545f39;}),_0x1df1b8['forEach']((_0x1c9370,_0x3c2dce)=>{var _0x8d32ef=_0x54b853;_0x1035d2[_0x3c2dce][_0x8d32ef(0x1d1)]=_0x1c9370;}),_0x220452[_0x54b853(0x196)]((_0x146514,_0x2de93d)=>{var _0x2844af=_0x54b853;_0x1035d2[_0x2de93d][_0x2844af(0x1c9)]=_0x146514;}),_0x5bc5d7[_0x54b853(0x196)]((_0x11aa19,_0x19b9c0)=>{var _0xf0c5e3=_0x54b853;_0x1035d2[_0x19b9c0][_0xf0c5e3(0x1ce)]=_0x11aa19;}),_0x174e6e[_0x54b853(0x196)]((_0x1c4dfd,_0xd9e2c0)=>{var _0x48e35b=_0x54b853;_0x1035d2[_0xd9e2c0][_0x48e35b(0x1d9)]=_0x1c4dfd;}),_0x3c0426[_0x54b853(0x19e)][_0x54b853(0x196)](_0x14b127=>{var _0x5378bf=_0x54b853;const _0x1054c3=_0x1991a6[_0x5378bf(0x185)][_0x5378bf(0x1c7)](_0x4db729=>{var _0x322d61=_0x5378bf;_0x4db729[_0x322d61(0x187)]==_0x14b127[_0x322d61(0x187)]&&(_0x4db729['product_stock']=parseInt(_0x4db729[_0x322d61(0x19b)])+parseInt(_0x14b127[_0x322d61(0x1d9)]));});}),await _0x1991a6[_0x54b853(0x190)](),_0x3c0426[_0x54b853(0x1d0)]=_0x3c191a,_0x3c0426[_0x54b853(0x1c8)]=_0x2a59e9,_0x3c0426[_0x54b853(0x19f)]=_0x2784c2,_0x3c0426[_0x54b853(0x179)]=_0x1f7ac9,_0x3c0426[_0x54b853(0x19e)]=_0x1035d2,_0x3c0426[_0x54b853(0x1ef)]=_0x43b4cf,_0x3c0426[_0x54b853(0x1ab)]=_0x639bd7,_0x3c0426[_0x54b853(0x186)]=_0x338327;const _0x202ba2=await _0x3c0426[_0x54b853(0x190)](),_0x312c6f=await c_payment_data[_0x54b853(0x1e5)]({'invoice':_0x484e24[_0x54b853(0x195)][_0x54b853(0x1d0)],'reason':_0x54b853(0x1d5)});_0x312c6f[_0x54b853(0x1df)]=_0x484e24[_0x54b853(0x195)][_0x54b853(0x1df)],_0x312c6f['date']=_0x484e24[_0x54b853(0x195)][_0x54b853(0x19f)],await _0x312c6f[_0x54b853(0x190)](),_0x484e24[_0x54b853(0x178)](_0x54b853(0x182),_0x54b853(0x1c0)),_0xaad3f7[_0x54b853(0x191)](_0x54b853(0x1dc));}catch(_0x2d3eed){console['log'](_0x2d3eed),_0xaad3f7[_0x54b853(0x18c)](0xc8)[_0x54b853(0x193)]({'message':_0x2d3eed['message']});}else try{const _0x276ebb=_0x484e24['params']['id'];console[_0x54b853(0x184)](_0x276ebb);const _0x353470=await sales_return[_0x54b853(0x1e5)]({'invoice':_0x484e24[_0x54b853(0x195)][_0x54b853(0x1d0)]});console[_0x54b853(0x184)](_0x54b853(0x1a6),_0x353470);const _0x1b720e=await warehouse[_0x54b853(0x1e5)]({'name':_0x353470[_0x54b853(0x1ab)],'room':_0x353470['ToRoom']});console[_0x54b853(0x184)](_0x54b853(0x17d),_0x1b720e);const {invoice:_0xf6674d,customer:_0x574221,date:_0x1b0cf5,warehouse_name:_0x194611,product_name:_0x4b7e1f,primary_code:_0x49531a,secondary_code:_0x17be8a,product_code:_0x3d8a30,sales_quantity:_0x16fc6b,stocks:_0x7f3a5a,return_qty:_0x1dbcc5,note:_0x10567e,to_warehouse_name:_0x1a206b,to_Room_name:_0x51e7ce}=_0x484e24[_0x54b853(0x195)];console[_0x54b853(0x184)](_0x484e24[_0x54b853(0x195)]);if(typeof _0x4b7e1f==_0x54b853(0x1a1))var _0x3d77e2=[_0x484e24['body'][_0x54b853(0x187)]],_0x57a1b3=[_0x484e24['body'][_0x54b853(0x18b)]],_0x28b389=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x1a2)]],_0x1df1b8=[_0x484e24['body'][_0x54b853(0x1d1)]],_0x220452=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x1bf)]],_0x5bc5d7=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x18a)]],_0x174e6e=[_0x484e24[_0x54b853(0x195)]['return_qty']],_0x1ce02e=[_0x484e24['body'][_0x54b853(0x1c5)]],_0x1e90d9=[_0x484e24['body'][_0x54b853(0x1b2)]],_0x35f7a9=[_0x484e24[_0x54b853(0x195)]['types']],_0xb651d9=[_0x484e24[_0x54b853(0x195)][_0x54b853(0x19d)]];else var _0x3d77e2=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x187)]],_0x57a1b3=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x18b)]],_0x28b389=[..._0x484e24['body'][_0x54b853(0x1a2)]],_0x1df1b8=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1d1)]],_0x220452=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1bf)]],_0x5bc5d7=[..._0x484e24['body'][_0x54b853(0x18a)]],_0x174e6e=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1d9)]],_0x1ce02e=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1c5)]],_0x1e90d9=[..._0x484e24[_0x54b853(0x195)][_0x54b853(0x1b2)]],_0x35f7a9=[..._0x484e24['body']['types']],_0xb651d9=[..._0x484e24['body'][_0x54b853(0x19d)]];const _0x58711b=_0x3d77e2[_0x54b853(0x1c7)](_0x4f2714=>{return _0x4f2714={'product_name':_0x4f2714};});_0x57a1b3[_0x54b853(0x196)]((_0x34034c,_0x4eec91)=>{var _0x37e7b9=_0x54b853;_0x58711b[_0x4eec91][_0x37e7b9(0x18b)]=_0x34034c;}),_0x28b389[_0x54b853(0x196)]((_0x21c974,_0x4a458a)=>{var _0x118b5e=_0x54b853;_0x58711b[_0x4a458a][_0x118b5e(0x1a2)]=_0x21c974;}),_0x1df1b8[_0x54b853(0x196)]((_0x36f9b3,_0x423f7d)=>{_0x58711b[_0x423f7d]['product_code']=_0x36f9b3;}),_0x220452[_0x54b853(0x196)]((_0x347c92,_0x55d364)=>{_0x58711b[_0x55d364]['sale_qty']=_0x347c92;}),_0x5bc5d7[_0x54b853(0x196)]((_0x1a66e3,_0x30ce2f)=>{var _0x50734f=_0x54b853;_0x58711b[_0x30ce2f][_0x50734f(0x1ce)]=_0x1a66e3;}),_0x174e6e['forEach']((_0x5adadf,_0x46f72b)=>{var _0x2c9555=_0x54b853;_0x58711b[_0x46f72b][_0x2c9555(0x1d9)]=_0x5adadf;}),_0x1ce02e[_0x54b853(0x196)]((_0x1afce9,_0x35fc09)=>{var _0x157b3b=_0x54b853;_0x58711b[_0x35fc09][_0x157b3b(0x1c5)]=_0x1afce9;}),_0x1e90d9[_0x54b853(0x196)]((_0x2d1ebc,_0x5119c1)=>{_0x58711b[_0x5119c1]['bin']=_0x2d1ebc;}),_0x35f7a9['forEach']((_0x51089a,_0x445b41)=>{var _0x83147c=_0x54b853;_0x58711b[_0x445b41][_0x83147c(0x1ec)]=_0x51089a;}),_0xb651d9[_0x54b853(0x196)]((_0x788ee6,_0x21a288)=>{var _0x5d9345=_0x54b853;_0x58711b[_0x21a288][_0x5d9345(0x19d)]=_0x788ee6;});var _0x45ce1d=0x0;_0x58711b[_0x54b853(0x196)](_0x1d4681=>{var _0x38789d=_0x54b853;console[_0x38789d(0x184)]('foreach\x20newproduct',_0x1d4681),(parseInt(_0x1d4681[_0x38789d(0x1c9)])<parseInt(_0x1d4681[_0x38789d(0x1d9)])||parseInt(_0x1d4681[_0x38789d(0x1ce)])<parseInt(_0x1d4681['return_qty'])&&parseInt(_0x1d4681[_0x38789d(0x1c9)])>parseInt(_0x1d4681[_0x38789d(0x1d9)])||parseInt(_0x1d4681['return_qty'])==0x0)&&_0x45ce1d++;});if(_0x45ce1d!=0x0)return _0x484e24['flash'](_0x54b853(0x17e),_0x54b853(0x1a0)),_0xaad3f7[_0x54b853(0x191)](_0x54b853(0x1c3));_0x353470[_0x54b853(0x1e0)][_0x54b853(0x196)](_0x1508df=>{var _0x4bb9d4=_0x54b853;const _0x26aacf=_0x1b720e['product_details'][_0x4bb9d4(0x1c7)](_0x12bb15=>{var _0x4d891c=_0x4bb9d4;_0x12bb15[_0x4d891c(0x187)]==_0x1508df[_0x4d891c(0x187)]&&_0x12bb15[_0x4d891c(0x19d)]==_0x1508df[_0x4d891c(0x19d)]&&_0x12bb15[_0x4d891c(0x1ec)]==_0x1508df[_0x4d891c(0x1ec)]&&_0x12bb15[_0x4d891c(0x1b2)]==_0x1508df['bin']&&_0x12bb15[_0x4d891c(0x1c5)]==_0x1508df['bay']&&(_0x12bb15['product_stock']=parseInt(_0x12bb15[_0x4d891c(0x19b)])+parseInt(_0x1508df[_0x4d891c(0x1d9)]));});}),console['log']('old_warehouse_data',_0x1b720e),await _0x1b720e[_0x54b853(0x190)](),_0x353470['invoice']=_0xf6674d,_0x353470[_0x54b853(0x1c8)]=_0x574221,_0x353470[_0x54b853(0x19f)]=_0x1b0cf5,_0x353470['warehouse_name']=_0x194611,_0x353470[_0x54b853(0x1e0)]=_0x58711b,_0x353470['note']=_0x10567e,_0x353470['ToWarehouse']=_0x1a206b,_0x353470['ToRoom']=_0x51e7ce;const _0x9146cb=await _0x353470[_0x54b853(0x190)]();console['log'](_0x54b853(0x1e4),_0x9146cb);const _0x19efbd=await c_payment_data[_0x54b853(0x1e5)]({'invoice':_0x484e24[_0x54b853(0x195)][_0x54b853(0x1d0)],'reason':_0x54b853(0x1d5)});_0x19efbd[_0x54b853(0x1df)]=_0x484e24[_0x54b853(0x195)][_0x54b853(0x1df)],_0x19efbd['date']=_0x484e24[_0x54b853(0x195)][_0x54b853(0x19f)],await _0x19efbd[_0x54b853(0x190)](),_0x484e24[_0x54b853(0x178)]('success',_0x54b853(0x1c0)),_0xaad3f7[_0x54b853(0x191)](_0x54b853(0x198));}catch(_0x20f159){console[_0x54b853(0x184)](_0x20f159),_0xaad3f7[_0x54b853(0x18c)](0xc8)[_0x54b853(0x193)]({'message':_0x20f159[_0x54b853(0x1af)]});}}),router['post'](a0_0x48208c(0x17c),auth,async(_0x404858,_0x3306ff)=>{var _0x1dacad=a0_0x48208c;try{const _0x532d07=_0x404858[_0x1dacad(0x180)]['id'],{invoice:_0x119e46,customer:_0x28064b,payable_to_customer:_0x35f270,paid_amount:_0x476a89}=_0x404858['body'],_0x3aac2c=await sales_return[_0x1dacad(0x1b8)](_0x532d07);console['log'](_0x1dacad(0x17b),_0x3aac2c),console[_0x1dacad(0x184)](_0x35f270),console[_0x1dacad(0x184)](_0x476a89);var _0x14d2b7=_0x35f270-_0x476a89;console['log'](_0x1dacad(0x18e),_0x14d2b7),_0x3aac2c[_0x1dacad(0x1b3)]=parseFloat(_0x476a89)+parseFloat(_0x3aac2c['paid_amount']),_0x3aac2c[_0x1dacad(0x1c6)]=_0x14d2b7,console[_0x1dacad(0x184)](_0x3aac2c);const _0x1e9501=await _0x3aac2c['save']();console['log'](0x1b207);const _0x4858a2=await c_payment_data[_0x1dacad(0x1e5)]({'invoice':_0x404858[_0x1dacad(0x195)][_0x1dacad(0x1d0)],'reason':_0x1dacad(0x1d5)});console[_0x1dacad(0x184)](_0x1dacad(0x199),_0x4858a2),_0x4858a2[_0x1dacad(0x1c2)]=_0x14d2b7,await _0x4858a2[_0x1dacad(0x190)]();let _0x3ca06a=new Date(),_0x5c5444=('0'+_0x3ca06a['getDate']())[_0x1dacad(0x17a)](-0x2),_0x597251=('0'+(_0x3ca06a['getMonth']()+0x1))[_0x1dacad(0x17a)](-0x2),_0x28cd88=_0x3ca06a[_0x1dacad(0x177)](),_0x4dca7e=_0x28cd88+'-'+_0x597251+'-'+_0x5c5444;const _0x318df0=new customer_payment({'invoice':_0x119e46,'date':_0x28cd88+'-'+_0x597251+'-'+_0x5c5444,'customer':_0x28064b,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x476a89}),_0x5330e3=await _0x318df0[_0x1dacad(0x190)]();_0x404858['flash'](_0x1dacad(0x182),_0x1dacad(0x1a7)),_0x3306ff[_0x1dacad(0x191)](_0x1dacad(0x198));}catch(_0x4773ff){console[_0x1dacad(0x184)](_0x4773ff);}}),router[a0_0x48208c(0x1b0)](a0_0x48208c(0x18f),auth,async(_0x21855f,_0x86573c)=>{var _0x4e1331=a0_0x48208c;try{const {username:_0x45c9fb,email:_0x4b2978,role:_0x5cf706}=_0x21855f['user'],_0x34dd77=_0x21855f['user'],_0x1202e1=await profile[_0x4e1331(0x1e5)]({'email':_0x34dd77[_0x4e1331(0x1b5)]}),_0x584894=await master_shop[_0x4e1331(0x197)]();console[_0x4e1331(0x184)](_0x4e1331(0x1a3),_0x584894);const _0xb5908c=_0x21855f[_0x4e1331(0x180)]['id'],_0x31691e=await sales_return[_0x4e1331(0x1b8)](_0xb5908c);console['log'](_0x31691e);const _0x16a6d7=await customer[_0x4e1331(0x1e5)]({'name':_0x31691e[_0x4e1331(0x1c8)]});console[_0x4e1331(0x184)](_0x16a6d7);if(_0x584894[0x0][_0x4e1331(0x1cf)]=='English\x20(US)'){var _0x610585=users[_0x4e1331(0x175)];console['log'](_0x610585);}else{if(_0x584894[0x0]['language']==_0x4e1331(0x1ee))var _0x610585=users[_0x4e1331(0x1ee)];else{if(_0x584894[0x0]['language']==_0x4e1331(0x1ca))var _0x610585=users[_0x4e1331(0x1ca)];else{if(_0x584894[0x0]['language']=='Spanish')var _0x610585=users[_0x4e1331(0x1e6)];else{if(_0x584894[0x0][_0x4e1331(0x1cf)]==_0x4e1331(0x1ad))var _0x610585=users[_0x4e1331(0x1ad)];else{if(_0x584894[0x0][_0x4e1331(0x1cf)]==_0x4e1331(0x1de))var _0x610585=users[_0x4e1331(0x1cb)];else{if(_0x584894[0x0][_0x4e1331(0x1cf)]==_0x4e1331(0x1d4))var _0x610585=users['Chinese'];else{if(_0x584894[0x0][_0x4e1331(0x1cf)]=='Arabic\x20(ae)')var _0x610585=users[_0x4e1331(0x1cc)];}}}}}}}_0x86573c[_0x4e1331(0x1b7)](_0x4e1331(0x1b9),{'success':_0x21855f[_0x4e1331(0x178)]('success'),'errors':_0x21855f[_0x4e1331(0x178)](_0x4e1331(0x17e)),'role':_0x34dd77,'profile':_0x1202e1,'master_shop':_0x584894,'customers':_0x16a6d7,'sales':_0x31691e,'language':_0x610585});}catch(_0x206a87){console[_0x4e1331(0x184)](_0x206a87);}}),module[a0_0x48208c(0x1d2)]=router;