function a0_0x3bee(_0x5a5aaa,_0xe6b609){var _0xeb154b=a0_0xeb15();return a0_0x3bee=function(_0x3bee78,_0x58617f){_0x3bee78=_0x3bee78-0x159;var _0x579e78=_0xeb154b[_0x3bee78];return _0x579e78;},a0_0x3bee(_0x5a5aaa,_0xe6b609);}var a0_0x403ebd=a0_0x3bee;(function(_0x153035,_0x105dc6){var _0x4fb94b=a0_0x3bee,_0x437a98=_0x153035();while(!![]){try{var _0x27c742=parseInt(_0x4fb94b(0x1a5))/0x1+-parseInt(_0x4fb94b(0x188))/0x2+-parseInt(_0x4fb94b(0x1b7))/0x3*(parseInt(_0x4fb94b(0x1a7))/0x4)+-parseInt(_0x4fb94b(0x199))/0x5+-parseInt(_0x4fb94b(0x1c5))/0x6*(-parseInt(_0x4fb94b(0x1a6))/0x7)+parseInt(_0x4fb94b(0x1c7))/0x8+parseInt(_0x4fb94b(0x174))/0x9*(parseInt(_0x4fb94b(0x1d3))/0xa);if(_0x27c742===_0x105dc6)break;else _0x437a98['push'](_0x437a98['shift']());}catch(_0x5197fc){_0x437a98['push'](_0x437a98['shift']());}}}(a0_0xeb15,0x57493));const express=require(a0_0x403ebd(0x1a9)),app=express(),router=express[a0_0x403ebd(0x19e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x403ebd(0x1ae)),auth=require(a0_0x403ebd(0x168)),users=require(a0_0x403ebd(0x160));function a0_0xeb15(){var _0x120722=['due_amount','new\x20new_data','$product_details','amount','redirect','user','Portuguese','post','log','note','save','date','1508165uYkAXj','getMonth','name','errors','aggregate','Router','ToWarehouse','German','Enabled','foreach\x20newproduct','Arabic','primary_code_QA','402125tWTXiS','876946WagVpp','1942652FJIssc','getDate','express','return_qty','Sale\x20Return','purchase\x20return\x20successfully','$name','../models/all_models','sales_return_invoice','product_code','Arabic\x20(ae)','$product_details.bay','$product_details.product_name','params','secondary_code_QA','$product_details.product_stock','3XwvJDf','$product_details.rack','customers','map','stock','for_categorize','flash','stocks','get','floorlevel','slice','back','primary_code','customer','6YJdMWH','old_data','310928OeiGlI','Chinese','message','language','paid_amount','$product_details._id','English','subtract','secondary_code','warehouse_name','bin','forEach','651590MXPBGK','return_sale_edit_finished','find','types','sales_quantity_QA','master','/view','exports','status','body','Returned\x20Payment\x20For\x20Sale\x20Return','/sales_return_finished/view','return_qty_QA','type','../public/language/languages.json','string','sales_return_finished','email','Portuguese\x20(BR)','$customer_docs','data','French','../middleware/auth','render','sales_quantity','English\x20(US)','return_sale','/sales_return/view','bay','product_details','return_sale_QA','stocks_QA','product_code_QA','Spanish','108JOFysP','/give_payment/:id','suppliers','/view/:id','$product_details.floorlevel','payment\x20successfull','sale_qty','customer_docs','json','invoice','$product_details.type','product_stock','$product_details.bin','$product_details.product_code','product_name_QA','ToRoom','findOne','Finished\x20Goods','$product_details.primary_code','findById','406716BbgJvr','success','QA\x20Warehouse','Hindi','product_name'];a0_0xeb15=function(){return _0x120722;};return a0_0xeb15();}router[a0_0x403ebd(0x1bf)](a0_0x403ebd(0x1d9),auth,async(_0xd9508b,_0x406fb5)=>{var _0x3012d1=a0_0x403ebd;try{const {username:_0x3e68fa,email:_0x52ba76,role:_0xc5303d}=_0xd9508b[_0x3012d1(0x192)],_0x1ac9d6=_0xd9508b[_0x3012d1(0x192)],_0x5ba34a=await profile['findOne']({'email':_0x1ac9d6[_0x3012d1(0x163)]}),_0x4bae51=await master_shop['find'](),_0x47b729=await sales_return_finished[_0x3012d1(0x19d)]([{'$lookup':{'from':_0x3012d1(0x1b9),'localField':_0x3012d1(0x1c4),'foreignField':_0x3012d1(0x19b),'as':_0x3012d1(0x17b)}},{'$unwind':_0x3012d1(0x165)}]);if(_0x4bae51[0x0][_0x3012d1(0x1ca)]==_0x3012d1(0x16b)){var _0x2ff024=users[_0x3012d1(0x1cd)];console[_0x3012d1(0x195)](_0x2ff024);}else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]==_0x3012d1(0x18b))var _0x2ff024=users[_0x3012d1(0x18b)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]=='German')var _0x2ff024=users[_0x3012d1(0x1a0)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]==_0x3012d1(0x173))var _0x2ff024=users[_0x3012d1(0x173)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]=='French')var _0x2ff024=users[_0x3012d1(0x167)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]==_0x3012d1(0x164))var _0x2ff024=users[_0x3012d1(0x193)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]=='Chinese')var _0x2ff024=users[_0x3012d1(0x1c8)];else{if(_0x4bae51[0x0][_0x3012d1(0x1ca)]=='Arabic\x20(ae)')var _0x2ff024=users['Arabic'];}}}}}}}_0x406fb5['render'](_0x3012d1(0x162),{'success':_0xd9508b[_0x3012d1(0x1bd)]('success'),'errors':_0xd9508b[_0x3012d1(0x1bd)](_0x3012d1(0x19c)),'role':_0x1ac9d6,'profile':_0x5ba34a,'master_shop':_0x4bae51,'user':_0x47b729,'language':_0x2ff024});}catch(_0x4bc28a){console[_0x3012d1(0x195)](_0x4bc28a);}}),router['get'](a0_0x403ebd(0x177),auth,async(_0x5d203f,_0x46dc37)=>{var _0x37e185=a0_0x403ebd;try{const {username:_0xc87b5b,email:_0x56da6a,role:_0xa5f2fc}=_0x5d203f[_0x37e185(0x192)],_0x171c88=_0x5d203f['user'],_0x4c42be=await profile[_0x37e185(0x184)]({'email':_0x171c88[_0x37e185(0x163)]}),_0x35d2b2=await master_shop['find']();console[_0x37e185(0x195)](_0x37e185(0x1d8),_0x35d2b2);const _0x56ab1a=_0x5d203f[_0x37e185(0x1b4)]['id'];console[_0x37e185(0x195)](_0x56ab1a);var _0x35b3bd=['Return\x20Rooms'];const _0x337193=await sales_return_finished[_0x37e185(0x187)](_0x56ab1a),_0x1afcc6=await warehouse['aggregate']([{'$match':{'name':_0x337193['ToWarehouse'],'room':_0x337193[_0x37e185(0x183)]}},{'$unwind':_0x37e185(0x18f)},{'$group':{'_id':_0x37e185(0x1cc),'name':{'$first':_0x37e185(0x1b3)},'product_stock':{'$first':_0x37e185(0x1b6)},'bay':{'$first':_0x37e185(0x1b2)},'bin':{'$first':_0x37e185(0x180)},'type':{'$first':_0x37e185(0x17e)},'floorlevel':{'$first':_0x37e185(0x178)},'primary_code':{'$first':_0x37e185(0x186)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x37e185(0x181)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x37e185(0x1b8)}}}]);console[_0x37e185(0x195)](_0x1afcc6);const _0x265c52=await warehouse[_0x37e185(0x19d)]([{'$match':{'status':'Enabled','warehouse_category':_0x37e185(0x185)}},{'$group':{'_id':_0x37e185(0x1ad),'name':{'$first':_0x37e185(0x1ad)}}},{'$sort':{'name':0x1}}]),_0x4311cc=await warehouse[_0x37e185(0x19d)]([{'$match':{'status':_0x37e185(0x1a1),'name':_0x37e185(0x18a)}},{'$group':{'_id':_0x37e185(0x1ad),'name':{'$first':_0x37e185(0x1ad)}}},{'$sort':{'name':0x1}}]),_0x140eb4=await product[_0x37e185(0x1d5)]({});if(_0x35d2b2[0x0][_0x37e185(0x1ca)]==_0x37e185(0x16b)){var _0x51efe1=users[_0x37e185(0x1cd)];console[_0x37e185(0x195)](_0x51efe1);}else{if(_0x35d2b2[0x0][_0x37e185(0x1ca)]==_0x37e185(0x18b))var _0x51efe1=users['Hindi'];else{if(_0x35d2b2[0x0]['language']==_0x37e185(0x1a0))var _0x51efe1=users[_0x37e185(0x1a0)];else{if(_0x35d2b2[0x0]['language']==_0x37e185(0x173))var _0x51efe1=users[_0x37e185(0x173)];else{if(_0x35d2b2[0x0][_0x37e185(0x1ca)]==_0x37e185(0x167))var _0x51efe1=users[_0x37e185(0x167)];else{if(_0x35d2b2[0x0][_0x37e185(0x1ca)]==_0x37e185(0x164))var _0x51efe1=users['Portuguese'];else{if(_0x35d2b2[0x0][_0x37e185(0x1ca)]=='Chinese')var _0x51efe1=users[_0x37e185(0x1c8)];else{if(_0x35d2b2[0x0][_0x37e185(0x1ca)]==_0x37e185(0x1b1))var _0x51efe1=users['Arabic'];}}}}}}}_0x46dc37['render'](_0x37e185(0x1d4),{'success':_0x5d203f[_0x37e185(0x1bd)](_0x37e185(0x189)),'errors':_0x5d203f['flash'](_0x37e185(0x19c)),'role':_0x171c88,'profile':_0x4c42be,'master_shop':_0x35d2b2,'user':_0x337193,'stock':_0x1afcc6,'unit':_0x140eb4,'language':_0x51efe1,'warehouses':_0x265c52,'rooms':_0x35b3bd,'warehouse_QA':_0x4311cc});}catch(_0x2e2172){console[_0x37e185(0x195)](_0x2e2172);}}),router['post'](a0_0x403ebd(0x177),auth,async(_0x513f03,_0x1b1ed1)=>{var _0x1af8aa=a0_0x403ebd;if(_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1bc)]=='QA')try{const _0x3d5a47=_0x513f03[_0x1af8aa(0x1b4)]['id'],_0xf43c55=await sales_return[_0x1af8aa(0x184)]({'invoice':_0x513f03['body'][_0x1af8aa(0x17d)]}),_0x5c07a=await warehouse[_0x1af8aa(0x184)]({'name':_0xf43c55[_0x1af8aa(0x19f)],'room':_0xf43c55[_0x1af8aa(0x183)]}),{invoice:_0x5e0bd1,customer:_0x2e5e91,date:_0x3ac800,warehouse_name:_0x4faa81,product_name:_0x107ad7,primary_code:_0x37512f,secondary_code:_0x258a04,product_code:_0x5cf879,sales_quantity:_0x1c474f,stocks:_0x3f8573,return_qty:_0x499f48,note:_0x2f566f,to_warehouse_name_QA:_0x46ea13,to_Room_name_QA:_0x29e7b5}=_0x513f03['body'];if(typeof product_name_QA==_0x1af8aa(0x161))var _0x42e0de=[_0x513f03['body'][_0x1af8aa(0x182)]],_0x36cdb1=[_0x513f03[_0x1af8aa(0x15b)]['primary_code_QA']],_0x501e2c=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1b5)]],_0x4282c0=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x172)]],_0x270f12=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1d7)]],_0x1fde22=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x171)]],_0x24523b=[_0x513f03[_0x1af8aa(0x15b)]['return_qty_QA']];else var _0x42e0de=[..._0x513f03[_0x1af8aa(0x15b)]['product_name_QA']],_0x36cdb1=[..._0x513f03['body'][_0x1af8aa(0x1a4)]],_0x501e2c=[..._0x513f03['body']['secondary_code_QA']],_0x4282c0=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x172)]],_0x270f12=[..._0x513f03[_0x1af8aa(0x15b)]['sales_quantity_QA']],_0x1fde22=[..._0x513f03[_0x1af8aa(0x15b)]['stocks_QA']],_0x24523b=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x15e)]];const _0x598f5d=_0x42e0de[_0x1af8aa(0x1ba)](_0xb25044=>{return _0xb25044={'product_name':_0xb25044};});_0x36cdb1[_0x1af8aa(0x1d2)]((_0xd3c439,_0x776fbd)=>{var _0xb0c214=_0x1af8aa;_0x598f5d[_0x776fbd][_0xb0c214(0x1c3)]=_0xd3c439;}),_0x501e2c[_0x1af8aa(0x1d2)]((_0x111065,_0x54538a)=>{_0x598f5d[_0x54538a]['secondary_code']=_0x111065;}),_0x4282c0[_0x1af8aa(0x1d2)]((_0x1062fb,_0x13a913)=>{var _0x4324e5=_0x1af8aa;_0x598f5d[_0x13a913][_0x4324e5(0x1b0)]=_0x1062fb;}),_0x270f12[_0x1af8aa(0x1d2)]((_0x171541,_0x3b2096)=>{var _0x4bf93e=_0x1af8aa;_0x598f5d[_0x3b2096][_0x4bf93e(0x17a)]=_0x171541;}),_0x1fde22[_0x1af8aa(0x1d2)]((_0x5f10c4,_0x71882f)=>{var _0x372700=_0x1af8aa;_0x598f5d[_0x71882f][_0x372700(0x1bb)]=_0x5f10c4;}),_0x24523b[_0x1af8aa(0x1d2)]((_0xe37c47,_0x4aa8f8)=>{var _0x548082=_0x1af8aa;_0x598f5d[_0x4aa8f8][_0x548082(0x1aa)]=_0xe37c47;}),_0xf43c55[_0x1af8aa(0x170)]['forEach'](_0x40643f=>{var _0x1562b3=_0x1af8aa;const _0x2842a6=_0x5c07a[_0x1562b3(0x16f)]['map'](_0x2d3ef0=>{var _0x6e36c=_0x1562b3;_0x2d3ef0[_0x6e36c(0x18c)]==_0x40643f[_0x6e36c(0x18c)]&&(_0x2d3ef0[_0x6e36c(0x17f)]=parseInt(_0x2d3ef0[_0x6e36c(0x17f)])+parseInt(_0x40643f['return_qty']));});}),await _0x5c07a['save'](),_0xf43c55[_0x1af8aa(0x17d)]=_0x5e0bd1,_0xf43c55[_0x1af8aa(0x1c4)]=_0x2e5e91,_0xf43c55[_0x1af8aa(0x198)]=_0x3ac800,_0xf43c55[_0x1af8aa(0x1d0)]=_0x4faa81,_0xf43c55[_0x1af8aa(0x170)]=_0x598f5d,_0xf43c55[_0x1af8aa(0x196)]=_0x2f566f,_0xf43c55[_0x1af8aa(0x19f)]=_0x46ea13,_0xf43c55[_0x1af8aa(0x183)]=_0x29e7b5;const _0x141c0b=await _0xf43c55[_0x1af8aa(0x197)](),_0x241c49=await c_payment_data[_0x1af8aa(0x184)]({'invoice':_0x513f03['body'][_0x1af8aa(0x17d)],'reason':_0x1af8aa(0x1ab)});_0x241c49[_0x1af8aa(0x176)]=_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x176)],_0x241c49['date']=_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x198)],await _0x241c49['save'](),_0x513f03['flash'](_0x1af8aa(0x189),_0x1af8aa(0x1ac)),_0x1b1ed1[_0x1af8aa(0x191)](_0x1af8aa(0x15d));}catch(_0x99be76){console[_0x1af8aa(0x195)](_0x99be76),_0x1b1ed1[_0x1af8aa(0x15a)](0xc8)['json']({'message':_0x99be76[_0x1af8aa(0x1c9)]});}else try{const _0x30ce39=_0x513f03['params']['id'];console[_0x1af8aa(0x195)](_0x30ce39);const _0x1ab238=await sales_return[_0x1af8aa(0x184)]({'invoice':_0x513f03[_0x1af8aa(0x15b)]['invoice']});console[_0x1af8aa(0x195)](_0x1af8aa(0x1c6),_0x1ab238);const _0x391565=await warehouse[_0x1af8aa(0x184)]({'name':_0x1ab238['ToWarehouse'],'room':_0x1ab238[_0x1af8aa(0x183)]});console[_0x1af8aa(0x195)]('old_warehouse_data',_0x391565);const {invoice:_0x3db1b0,customer:_0x1a97ec,date:_0x55f652,warehouse_name:_0x5b6766,product_name:_0x19e56c,primary_code:_0x543039,secondary_code:_0x3d9106,product_code:_0x47f22c,sales_quantity:_0x551423,stocks:_0x590f8f,return_qty:_0x544cf5,note:_0x2eb0a8,to_warehouse_name:_0x66f5bf,to_Room_name:_0x20b53c}=_0x513f03[_0x1af8aa(0x15b)];console['log'](_0x513f03[_0x1af8aa(0x15b)]);if(typeof _0x19e56c=='string')var _0x42e0de=[_0x513f03['body']['product_name']],_0x36cdb1=[_0x513f03['body']['primary_code']],_0x501e2c=[_0x513f03['body']['secondary_code']],_0x4282c0=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1b0)]],_0x270f12=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x16a)]],_0x1fde22=[_0x513f03[_0x1af8aa(0x15b)]['stocks']],_0x24523b=[_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1aa)]],_0x5e6e1d=[_0x513f03['body']['bay']],_0x487075=[_0x513f03['body'][_0x1af8aa(0x1d1)]],_0x4b5f8c=[_0x513f03['body'][_0x1af8aa(0x1d6)]],_0x19a76e=[_0x513f03['body'][_0x1af8aa(0x1c0)]];else var _0x42e0de=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x18c)]],_0x36cdb1=[..._0x513f03['body'][_0x1af8aa(0x1c3)]],_0x501e2c=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1cf)]],_0x4282c0=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1b0)]],_0x270f12=[..._0x513f03[_0x1af8aa(0x15b)]['sales_quantity']],_0x1fde22=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1be)]],_0x24523b=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1aa)]],_0x5e6e1d=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x16e)]],_0x487075=[..._0x513f03[_0x1af8aa(0x15b)]['bin']],_0x4b5f8c=[..._0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x1d6)]],_0x19a76e=[..._0x513f03[_0x1af8aa(0x15b)]['floorlevel']];const _0x56e4da=_0x42e0de[_0x1af8aa(0x1ba)](_0x1bff5d=>{return _0x1bff5d={'product_name':_0x1bff5d};});_0x36cdb1['forEach']((_0x1e2b9d,_0x2a4940)=>{var _0x14b5ef=_0x1af8aa;_0x56e4da[_0x2a4940][_0x14b5ef(0x1c3)]=_0x1e2b9d;}),_0x501e2c[_0x1af8aa(0x1d2)]((_0x224532,_0x3e2729)=>{_0x56e4da[_0x3e2729]['secondary_code']=_0x224532;}),_0x4282c0[_0x1af8aa(0x1d2)]((_0x44af0b,_0x5c57c7)=>{var _0x983c1f=_0x1af8aa;_0x56e4da[_0x5c57c7][_0x983c1f(0x1b0)]=_0x44af0b;}),_0x270f12[_0x1af8aa(0x1d2)]((_0x2e43f6,_0x200f35)=>{var _0xe7691=_0x1af8aa;_0x56e4da[_0x200f35][_0xe7691(0x17a)]=_0x2e43f6;}),_0x1fde22[_0x1af8aa(0x1d2)]((_0x46e207,_0x5408ea)=>{var _0x31a7cc=_0x1af8aa;_0x56e4da[_0x5408ea][_0x31a7cc(0x1bb)]=_0x46e207;}),_0x24523b[_0x1af8aa(0x1d2)]((_0x47ce84,_0x4e0777)=>{var _0x419109=_0x1af8aa;_0x56e4da[_0x4e0777][_0x419109(0x1aa)]=_0x47ce84;}),_0x5e6e1d['forEach']((_0x364046,_0x4c4c9f)=>{var _0x3081d8=_0x1af8aa;_0x56e4da[_0x4c4c9f][_0x3081d8(0x16e)]=_0x364046;}),_0x487075['forEach']((_0x4c3e95,_0x20db55)=>{_0x56e4da[_0x20db55]['bin']=_0x4c3e95;}),_0x4b5f8c[_0x1af8aa(0x1d2)]((_0x259284,_0x3ffef6)=>{var _0x3710bc=_0x1af8aa;_0x56e4da[_0x3ffef6][_0x3710bc(0x15f)]=_0x259284;}),_0x19a76e[_0x1af8aa(0x1d2)]((_0x10d523,_0x30d6b8)=>{var _0x5f024b=_0x1af8aa;_0x56e4da[_0x30d6b8][_0x5f024b(0x1c0)]=_0x10d523;});var _0x5626b6=0x0;_0x56e4da[_0x1af8aa(0x1d2)](_0x433103=>{var _0x2d5705=_0x1af8aa;console[_0x2d5705(0x195)](_0x2d5705(0x1a2),_0x433103),(parseInt(_0x433103[_0x2d5705(0x17a)])<parseInt(_0x433103[_0x2d5705(0x1aa)])||parseInt(_0x433103[_0x2d5705(0x1bb)])<parseInt(_0x433103[_0x2d5705(0x1aa)])&&parseInt(_0x433103[_0x2d5705(0x17a)])>parseInt(_0x433103[_0x2d5705(0x1aa)])||parseInt(_0x433103['return_qty'])==0x0)&&_0x5626b6++;});if(_0x5626b6!=0x0)return _0x513f03[_0x1af8aa(0x1bd)]('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x1b1ed1[_0x1af8aa(0x191)](_0x1af8aa(0x1c2));_0x1ab238[_0x1af8aa(0x16c)][_0x1af8aa(0x1d2)](_0x11b9b5=>{var _0x55bfda=_0x1af8aa;const _0x10cda1=_0x391565[_0x55bfda(0x16f)][_0x55bfda(0x1ba)](_0x13d5af=>{var _0x1e9010=_0x55bfda;_0x13d5af[_0x1e9010(0x18c)]==_0x11b9b5[_0x1e9010(0x18c)]&&_0x13d5af[_0x1e9010(0x1c0)]==_0x11b9b5[_0x1e9010(0x1c0)]&&_0x13d5af[_0x1e9010(0x15f)]==_0x11b9b5[_0x1e9010(0x15f)]&&_0x13d5af[_0x1e9010(0x1d1)]==_0x11b9b5['bin']&&_0x13d5af[_0x1e9010(0x16e)]==_0x11b9b5[_0x1e9010(0x16e)]&&(_0x13d5af[_0x1e9010(0x17f)]=parseInt(_0x13d5af[_0x1e9010(0x17f)])+parseInt(_0x11b9b5[_0x1e9010(0x1aa)]));});}),console[_0x1af8aa(0x195)]('old_warehouse_data',_0x391565),await _0x391565['save'](),_0x1ab238[_0x1af8aa(0x17d)]=_0x3db1b0,_0x1ab238[_0x1af8aa(0x1c4)]=_0x1a97ec,_0x1ab238['date']=_0x55f652,_0x1ab238[_0x1af8aa(0x1d0)]=_0x5b6766,_0x1ab238[_0x1af8aa(0x16c)]=_0x56e4da,_0x1ab238[_0x1af8aa(0x196)]=_0x2eb0a8,_0x1ab238[_0x1af8aa(0x19f)]=_0x66f5bf,_0x1ab238[_0x1af8aa(0x183)]=_0x20b53c;const _0x46b656=await _0x1ab238['save']();console[_0x1af8aa(0x195)](_0x1af8aa(0x18e),_0x46b656);const _0x1de33c=await c_payment_data[_0x1af8aa(0x184)]({'invoice':_0x513f03[_0x1af8aa(0x15b)][_0x1af8aa(0x17d)],'reason':_0x1af8aa(0x1ab)});_0x1de33c[_0x1af8aa(0x176)]=_0x513f03[_0x1af8aa(0x15b)]['suppliers'],_0x1de33c[_0x1af8aa(0x198)]=_0x513f03['body']['date'],await _0x1de33c[_0x1af8aa(0x197)](),_0x513f03[_0x1af8aa(0x1bd)](_0x1af8aa(0x189),_0x1af8aa(0x1ac)),_0x1b1ed1[_0x1af8aa(0x191)](_0x1af8aa(0x16d));}catch(_0xcb2070){console[_0x1af8aa(0x195)](_0xcb2070),_0x1b1ed1[_0x1af8aa(0x15a)](0xc8)[_0x1af8aa(0x17c)]({'message':_0xcb2070[_0x1af8aa(0x1c9)]});}}),router[a0_0x403ebd(0x194)](a0_0x403ebd(0x175),auth,async(_0x3c9a10,_0x2c1af2)=>{var _0x5855ff=a0_0x403ebd;try{const _0x59dddb=_0x3c9a10[_0x5855ff(0x1b4)]['id'],{invoice:_0x1ed519,customer:_0x210c4d,payable_to_customer:_0x27b6c0,paid_amount:_0x277268}=_0x3c9a10[_0x5855ff(0x15b)],_0xa3629d=await sales_return[_0x5855ff(0x187)](_0x59dddb);console[_0x5855ff(0x195)](_0x5855ff(0x166),_0xa3629d),console[_0x5855ff(0x195)](_0x27b6c0),console[_0x5855ff(0x195)](_0x277268);var _0x55c2d1=_0x27b6c0-_0x277268;console['log'](_0x5855ff(0x1ce),_0x55c2d1),_0xa3629d[_0x5855ff(0x1cb)]=parseFloat(_0x277268)+parseFloat(_0xa3629d['paid_amount']),_0xa3629d[_0x5855ff(0x18d)]=_0x55c2d1,console[_0x5855ff(0x195)](_0xa3629d);const _0xf7016f=await _0xa3629d['save']();console[_0x5855ff(0x195)](0x1b207);const _0x4cd4c1=await c_payment_data[_0x5855ff(0x184)]({'invoice':_0x3c9a10[_0x5855ff(0x15b)][_0x5855ff(0x17d)],'reason':_0x5855ff(0x1ab)});console[_0x5855ff(0x195)]('c_payment',_0x4cd4c1),_0x4cd4c1[_0x5855ff(0x190)]=_0x55c2d1,await _0x4cd4c1[_0x5855ff(0x197)]();let _0x1683d0=new Date(),_0x2ad57e=('0'+_0x1683d0[_0x5855ff(0x1a8)]())[_0x5855ff(0x1c1)](-0x2),_0x32e680=('0'+(_0x1683d0[_0x5855ff(0x19a)]()+0x1))[_0x5855ff(0x1c1)](-0x2),_0x2cc481=_0x1683d0['getFullYear'](),_0x2ed3e8=_0x2cc481+'-'+_0x32e680+'-'+_0x2ad57e;const _0x1f555d=new customer_payment({'invoice':_0x1ed519,'date':_0x2cc481+'-'+_0x32e680+'-'+_0x2ad57e,'customer':_0x210c4d,'reason':_0x5855ff(0x15c),'amount':_0x277268}),_0x15ec8e=await _0x1f555d[_0x5855ff(0x197)]();_0x3c9a10[_0x5855ff(0x1bd)](_0x5855ff(0x189),_0x5855ff(0x179)),_0x2c1af2[_0x5855ff(0x191)](_0x5855ff(0x16d));}catch(_0x9e386f){console[_0x5855ff(0x195)](_0x9e386f);}}),router['get']('/invoice/:id',auth,async(_0x9d1f2b,_0x11b657)=>{var _0x43ae3e=a0_0x403ebd;try{const {username:_0x5d3940,email:_0x171cc4,role:_0x60307d}=_0x9d1f2b['user'],_0x5ccef4=_0x9d1f2b[_0x43ae3e(0x192)],_0x4f392c=await profile[_0x43ae3e(0x184)]({'email':_0x5ccef4[_0x43ae3e(0x163)]}),_0x294ef4=await master_shop['find']();console[_0x43ae3e(0x195)](_0x43ae3e(0x1d8),_0x294ef4);const _0x41f2df=_0x9d1f2b[_0x43ae3e(0x1b4)]['id'],_0x1dd979=await sales_return['findById'](_0x41f2df);console[_0x43ae3e(0x195)](_0x1dd979);const _0x2b40be=await customer[_0x43ae3e(0x184)]({'name':_0x1dd979['customer']});console['log'](_0x2b40be);if(_0x294ef4[0x0]['language']==_0x43ae3e(0x16b)){var _0x403a64=users['English'];console[_0x43ae3e(0x195)](_0x403a64);}else{if(_0x294ef4[0x0]['language']=='Hindi')var _0x403a64=users[_0x43ae3e(0x18b)];else{if(_0x294ef4[0x0][_0x43ae3e(0x1ca)]==_0x43ae3e(0x1a0))var _0x403a64=users[_0x43ae3e(0x1a0)];else{if(_0x294ef4[0x0][_0x43ae3e(0x1ca)]==_0x43ae3e(0x173))var _0x403a64=users['Spanish'];else{if(_0x294ef4[0x0][_0x43ae3e(0x1ca)]==_0x43ae3e(0x167))var _0x403a64=users[_0x43ae3e(0x167)];else{if(_0x294ef4[0x0]['language']=='Portuguese\x20(BR)')var _0x403a64=users[_0x43ae3e(0x193)];else{if(_0x294ef4[0x0][_0x43ae3e(0x1ca)]==_0x43ae3e(0x1c8))var _0x403a64=users['Chinese'];else{if(_0x294ef4[0x0]['language']==_0x43ae3e(0x1b1))var _0x403a64=users[_0x43ae3e(0x1a3)];}}}}}}}_0x11b657[_0x43ae3e(0x169)](_0x43ae3e(0x1af),{'success':_0x9d1f2b['flash'](_0x43ae3e(0x189)),'errors':_0x9d1f2b[_0x43ae3e(0x1bd)](_0x43ae3e(0x19c)),'role':_0x5ccef4,'profile':_0x4f392c,'master_shop':_0x294ef4,'customers':_0x2b40be,'sales':_0x1dd979,'language':_0x403a64});}catch(_0x11998c){console['log'](_0x11998c);}}),module[a0_0x403ebd(0x159)]=router;