var a0_0x2fe106=a0_0x2b44;(function(_0x122968,_0x18ec73){var _0x3aef9f=a0_0x2b44,_0x44a311=_0x122968();while(!![]){try{var _0x6b0a32=-parseInt(_0x3aef9f(0x156))/0x1+-parseInt(_0x3aef9f(0x132))/0x2*(parseInt(_0x3aef9f(0x144))/0x3)+-parseInt(_0x3aef9f(0x154))/0x4+-parseInt(_0x3aef9f(0x14c))/0x5+parseInt(_0x3aef9f(0x15c))/0x6+parseInt(_0x3aef9f(0x17d))/0x7*(parseInt(_0x3aef9f(0x137))/0x8)+parseInt(_0x3aef9f(0x126))/0x9;if(_0x6b0a32===_0x18ec73)break;else _0x44a311['push'](_0x44a311['shift']());}catch(_0x306253){_0x44a311['push'](_0x44a311['shift']());}}}(a0_0x5de5,0xbba78));const express=require('express'),app=express(),router=express[a0_0x2fe106(0x167)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x2fe106(0x187)),users=require('../public/language/languages.json');function a0_0x2b44(_0x22c8a2,_0x51dcfa){var _0x5de511=a0_0x5de5();return a0_0x2b44=function(_0x2b4468,_0x3fa1e3){_0x2b4468=_0x2b4468-0x122;var _0x148272=_0x5de511[_0x2b4468];return _0x148272;},a0_0x2b44(_0x22c8a2,_0x51dcfa);}router[a0_0x2fe106(0x182)](a0_0x2fe106(0x12c),auth,async(_0x22c483,_0x2a6cdb)=>{var _0x31b14f=a0_0x2fe106;try{const {username:_0x388e93,email:_0x3188c6,role:_0x59587b}=_0x22c483[_0x31b14f(0x191)],_0x49d1dd=_0x22c483[_0x31b14f(0x191)],_0x4682fa=await profile[_0x31b14f(0x157)]({'email':_0x49d1dd[_0x31b14f(0x15e)]}),_0x10e01a=await master_shop['find'](),_0x2f3455=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x31b14f(0x18f),'localField':'customer','foreignField':_0x31b14f(0x128),'as':_0x31b14f(0x12a)}},{'$unwind':_0x31b14f(0x159)}]);if(_0x10e01a[0x0]['language']==_0x31b14f(0x141)){var _0x4def27=users['English'];console[_0x31b14f(0x148)](_0x4def27);}else{if(_0x10e01a[0x0]['language']=='Hindi')var _0x4def27=users[_0x31b14f(0x170)];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]==_0x31b14f(0x16e))var _0x4def27=users[_0x31b14f(0x16e)];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]=='Spanish')var _0x4def27=users['Spanish'];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]==_0x31b14f(0x179))var _0x4def27=users['French'];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]==_0x31b14f(0x16f))var _0x4def27=users['Portuguese'];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]==_0x31b14f(0x147))var _0x4def27=users[_0x31b14f(0x147)];else{if(_0x10e01a[0x0][_0x31b14f(0x195)]==_0x31b14f(0x131))var _0x4def27=users[_0x31b14f(0x188)];}}}}}}}_0x2a6cdb[_0x31b14f(0x13c)](_0x31b14f(0x13f),{'success':_0x22c483[_0x31b14f(0x178)](_0x31b14f(0x16a)),'errors':_0x22c483['flash'](_0x31b14f(0x13e)),'role':_0x49d1dd,'profile':_0x4682fa,'master_shop':_0x10e01a,'user':_0x2f3455,'language':_0x4def27});}catch(_0x359991){console[_0x31b14f(0x148)](_0x359991);}}),router[a0_0x2fe106(0x182)]('/view/:id',auth,async(_0x5f2621,_0x521608)=>{var _0x336465=a0_0x2fe106;try{const {username:_0x446b55,email:_0x1cb242,role:_0x23ee4d}=_0x5f2621[_0x336465(0x191)],_0xb9e203=_0x5f2621[_0x336465(0x191)],_0x537755=await profile[_0x336465(0x157)]({'email':_0xb9e203[_0x336465(0x15e)]}),_0x224e4d=await master_shop[_0x336465(0x123)]();console[_0x336465(0x148)](_0x336465(0x16b),_0x224e4d);const _0x2dd097=_0x5f2621[_0x336465(0x153)]['id'];console[_0x336465(0x148)](_0x2dd097);var _0x34737d=[_0x336465(0x13a)];const _0x168172=await sales_return_finished['findById'](_0x2dd097),_0x54112b=await warehouse[_0x336465(0x19b)]([{'$match':{'name':_0x168172[_0x336465(0x18c)],'room':_0x168172[_0x336465(0x164)]}},{'$unwind':_0x336465(0x15a)},{'$group':{'_id':_0x336465(0x17c),'name':{'$first':_0x336465(0x169)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x336465(0x194)},'bin':{'$first':_0x336465(0x15f)},'type':{'$first':_0x336465(0x177)},'floorlevel':{'$first':_0x336465(0x18b)},'primary_code':{'$first':_0x336465(0x133)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x336465(0x146)},'storage':{'$first':_0x336465(0x171)},'rack':{'$first':_0x336465(0x19a)}}}]);console['log'](_0x54112b);const _0x2b9e0f=await warehouse[_0x336465(0x19b)]([{'$match':{'status':_0x336465(0x143),'warehouse_category':_0x336465(0x166)}},{'$group':{'_id':_0x336465(0x18d),'name':{'$first':_0x336465(0x18d)}}},{'$sort':{'name':0x1}}]),_0x14b5e9=await warehouse[_0x336465(0x19b)]([{'$match':{'status':_0x336465(0x143),'name':_0x336465(0x138)}},{'$group':{'_id':_0x336465(0x18d),'name':{'$first':_0x336465(0x18d)}}},{'$sort':{'name':0x1}}]),_0x745c5f=await product['find']({});if(_0x224e4d[0x0]['language']==_0x336465(0x141)){var _0x42b773=users[_0x336465(0x140)];console[_0x336465(0x148)](_0x42b773);}else{if(_0x224e4d[0x0][_0x336465(0x195)]=='Hindi')var _0x42b773=users['Hindi'];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x16e))var _0x42b773=users['German'];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x12b))var _0x42b773=users[_0x336465(0x12b)];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x179))var _0x42b773=users[_0x336465(0x179)];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x16f))var _0x42b773=users[_0x336465(0x18a)];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x147))var _0x42b773=users[_0x336465(0x147)];else{if(_0x224e4d[0x0][_0x336465(0x195)]==_0x336465(0x131))var _0x42b773=users['Arabic'];}}}}}}}_0x521608[_0x336465(0x13c)]('return_sale_edit_finished',{'success':_0x5f2621[_0x336465(0x178)](_0x336465(0x16a)),'errors':_0x5f2621['flash'](_0x336465(0x13e)),'role':_0xb9e203,'profile':_0x537755,'master_shop':_0x224e4d,'user':_0x168172,'stock':_0x54112b,'unit':_0x745c5f,'language':_0x42b773,'warehouses':_0x2b9e0f,'rooms':_0x34737d,'warehouse_QA':_0x14b5e9});}catch(_0x3bface){console[_0x336465(0x148)](_0x3bface);}}),router[a0_0x2fe106(0x13b)](a0_0x2fe106(0x16c),auth,async(_0x505cf0,_0xe391d3)=>{var _0x28df81=a0_0x2fe106;if(_0x505cf0[_0x28df81(0x158)][_0x28df81(0x135)]=='QA')try{const _0x3ec3fa=_0x505cf0[_0x28df81(0x153)]['id'],_0x41b71f=await sales_return[_0x28df81(0x157)]({'invoice':_0x505cf0[_0x28df81(0x158)][_0x28df81(0x14e)]}),_0x30a9cb=await warehouse[_0x28df81(0x157)]({'name':_0x41b71f[_0x28df81(0x18c)],'room':_0x41b71f['ToRoom']}),{invoice:_0xa8ba24,customer:_0x454431,date:_0x301b1b,warehouse_name:_0x132185,product_name:_0x382a82,primary_code:_0x215ca1,secondary_code:_0x16ba52,product_code:_0x3e2a79,sales_quantity:_0x3eac87,stocks:_0x58454b,return_qty:_0x59d113,note:_0x2ef14f,to_warehouse_name_QA:_0x34c9a9,to_Room_name_QA:_0x3ed033}=_0x505cf0[_0x28df81(0x158)];if(typeof product_name_QA=='string')var _0x17e92f=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x136)]],_0x4799db=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x122)]],_0x357b6c=[_0x505cf0['body'][_0x28df81(0x149)]],_0x35b86e=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x129)]],_0x21740d=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x183)]],_0x2d0dea=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x17a)]],_0x55a5ab=[_0x505cf0[_0x28df81(0x158)]['return_qty_QA']];else var _0x17e92f=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x136)]],_0x4799db=[..._0x505cf0['body'][_0x28df81(0x122)]],_0x357b6c=[..._0x505cf0['body'][_0x28df81(0x149)]],_0x35b86e=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x129)]],_0x21740d=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x183)]],_0x2d0dea=[..._0x505cf0['body'][_0x28df81(0x17a)]],_0x55a5ab=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x145)]];const _0x2c70d2=_0x17e92f['map'](_0x1cec41=>{return _0x1cec41={'product_name':_0x1cec41};});_0x4799db[_0x28df81(0x180)]((_0x405cfd,_0x1520a7)=>{var _0x3f58f8=_0x28df81;_0x2c70d2[_0x1520a7][_0x3f58f8(0x12e)]=_0x405cfd;}),_0x357b6c['forEach']((_0x29cde6,_0x52a391)=>{var _0x51336d=_0x28df81;_0x2c70d2[_0x52a391][_0x51336d(0x17f)]=_0x29cde6;}),_0x35b86e[_0x28df81(0x180)]((_0x320639,_0x54c96a)=>{var _0x11d2b7=_0x28df81;_0x2c70d2[_0x54c96a][_0x11d2b7(0x18e)]=_0x320639;}),_0x21740d[_0x28df81(0x180)]((_0x20aea4,_0x11cce3)=>{var _0x41607a=_0x28df81;_0x2c70d2[_0x11cce3][_0x41607a(0x168)]=_0x20aea4;}),_0x2d0dea[_0x28df81(0x180)]((_0x275f4d,_0x44ccdb)=>{_0x2c70d2[_0x44ccdb]['stock']=_0x275f4d;}),_0x55a5ab[_0x28df81(0x180)]((_0x391e8c,_0x3c3ded)=>{var _0x5d6efa=_0x28df81;_0x2c70d2[_0x3c3ded][_0x5d6efa(0x12f)]=_0x391e8c;}),_0x41b71f[_0x28df81(0x189)]['forEach'](_0x872726=>{var _0x304f75=_0x28df81;const _0x4e60b8=_0x30a9cb[_0x304f75(0x160)]['map'](_0x13e63d=>{var _0xead983=_0x304f75;_0x13e63d['product_name']==_0x872726[_0xead983(0x125)]&&(_0x13e63d[_0xead983(0x17e)]=parseInt(_0x13e63d[_0xead983(0x17e)])+parseInt(_0x872726[_0xead983(0x12f)]));});}),await _0x30a9cb[_0x28df81(0x197)](),_0x41b71f[_0x28df81(0x14e)]=_0xa8ba24,_0x41b71f[_0x28df81(0x139)]=_0x454431,_0x41b71f['date']=_0x301b1b,_0x41b71f['warehouse_name']=_0x132185,_0x41b71f['return_sale_QA']=_0x2c70d2,_0x41b71f[_0x28df81(0x14f)]=_0x2ef14f,_0x41b71f['ToWarehouse']=_0x34c9a9,_0x41b71f[_0x28df81(0x164)]=_0x3ed033;const _0x289b25=await _0x41b71f[_0x28df81(0x197)](),_0x448da7=await c_payment_data['findOne']({'invoice':_0x505cf0['body'][_0x28df81(0x14e)],'reason':_0x28df81(0x127)});_0x448da7[_0x28df81(0x13d)]=_0x505cf0[_0x28df81(0x158)][_0x28df81(0x13d)],_0x448da7[_0x28df81(0x163)]=_0x505cf0[_0x28df81(0x158)][_0x28df81(0x163)],await _0x448da7[_0x28df81(0x197)](),_0x505cf0[_0x28df81(0x178)](_0x28df81(0x16a),_0x28df81(0x155)),_0xe391d3[_0x28df81(0x150)](_0x28df81(0x142));}catch(_0x347e30){console[_0x28df81(0x148)](_0x347e30),_0xe391d3['status'](0xc8)[_0x28df81(0x14b)]({'message':_0x347e30['message']});}else try{const _0x3818ba=_0x505cf0['params']['id'];console['log'](_0x3818ba);const _0x6a8ed4=await sales_return['findOne']({'invoice':_0x505cf0[_0x28df81(0x158)]['invoice']});console['log'](_0x28df81(0x14a),_0x6a8ed4);const _0x32171b=await warehouse[_0x28df81(0x157)]({'name':_0x6a8ed4['ToWarehouse'],'room':_0x6a8ed4[_0x28df81(0x164)]});console['log'](_0x28df81(0x134),_0x32171b);const {invoice:_0x41bccf,customer:_0x5c145c,date:_0x5c0138,warehouse_name:_0x5ae4a,product_name:_0x340179,primary_code:_0x1142e4,secondary_code:_0x5d69da,product_code:_0x1aa13b,sales_quantity:_0x4b544d,stocks:_0x1cb9cd,return_qty:_0x218f7a,note:_0x5e3099,to_warehouse_name:_0x4ced77,to_Room_name:_0x481907}=_0x505cf0[_0x28df81(0x158)];console[_0x28df81(0x148)](_0x505cf0['body']);if(typeof _0x340179==_0x28df81(0x152))var _0x17e92f=[_0x505cf0['body'][_0x28df81(0x125)]],_0x4799db=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x12e)]],_0x357b6c=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x17f)]],_0x35b86e=[_0x505cf0['body'][_0x28df81(0x18e)]],_0x21740d=[_0x505cf0['body'][_0x28df81(0x199)]],_0x2d0dea=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x165)]],_0x55a5ab=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x12f)]],_0x4d8e72=[_0x505cf0['body'][_0x28df81(0x130)]],_0x1587fc=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x15d)]],_0x5f3c20=[_0x505cf0['body'][_0x28df81(0x162)]],_0x402cb3=[_0x505cf0[_0x28df81(0x158)][_0x28df81(0x15b)]];else var _0x17e92f=[..._0x505cf0['body']['product_name']],_0x4799db=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x12e)]],_0x357b6c=[..._0x505cf0[_0x28df81(0x158)]['secondary_code']],_0x35b86e=[..._0x505cf0[_0x28df81(0x158)]['product_code']],_0x21740d=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x199)]],_0x2d0dea=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x165)]],_0x55a5ab=[..._0x505cf0['body']['return_qty']],_0x4d8e72=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x130)]],_0x1587fc=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x15d)]],_0x5f3c20=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x162)]],_0x402cb3=[..._0x505cf0[_0x28df81(0x158)][_0x28df81(0x15b)]];const _0x20f69b=_0x17e92f[_0x28df81(0x175)](_0x50bf51=>{return _0x50bf51={'product_name':_0x50bf51};});_0x4799db[_0x28df81(0x180)]((_0x3a9281,_0x391734)=>{_0x20f69b[_0x391734]['primary_code']=_0x3a9281;}),_0x357b6c['forEach']((_0x4a1b12,_0x53efd3)=>{_0x20f69b[_0x53efd3]['secondary_code']=_0x4a1b12;}),_0x35b86e[_0x28df81(0x180)]((_0x157686,_0x50b801)=>{_0x20f69b[_0x50b801]['product_code']=_0x157686;}),_0x21740d[_0x28df81(0x180)]((_0x516f40,_0x59c736)=>{var _0x12693e=_0x28df81;_0x20f69b[_0x59c736][_0x12693e(0x168)]=_0x516f40;}),_0x2d0dea[_0x28df81(0x180)]((_0x9bd7ab,_0x19b2c7)=>{_0x20f69b[_0x19b2c7]['stock']=_0x9bd7ab;}),_0x55a5ab['forEach']((_0x2adf84,_0x2778ef)=>{var _0x371091=_0x28df81;_0x20f69b[_0x2778ef][_0x371091(0x12f)]=_0x2adf84;}),_0x4d8e72[_0x28df81(0x180)]((_0x126314,_0x41ec32)=>{var _0x4537c4=_0x28df81;_0x20f69b[_0x41ec32][_0x4537c4(0x130)]=_0x126314;}),_0x1587fc['forEach']((_0x307c02,_0x595a41)=>{var _0x4886bd=_0x28df81;_0x20f69b[_0x595a41][_0x4886bd(0x15d)]=_0x307c02;}),_0x5f3c20[_0x28df81(0x180)]((_0x3efd50,_0x1f966d)=>{var _0x13e4d2=_0x28df81;_0x20f69b[_0x1f966d][_0x13e4d2(0x16d)]=_0x3efd50;}),_0x402cb3[_0x28df81(0x180)]((_0x3413f4,_0x2620de)=>{var _0x25a765=_0x28df81;_0x20f69b[_0x2620de][_0x25a765(0x15b)]=_0x3413f4;});var _0x5345f2=0x0;_0x20f69b[_0x28df81(0x180)](_0x515d52=>{var _0x3fc4e4=_0x28df81;console[_0x3fc4e4(0x148)](_0x3fc4e4(0x196),_0x515d52),(parseInt(_0x515d52['sale_qty'])<parseInt(_0x515d52[_0x3fc4e4(0x12f)])||parseInt(_0x515d52[_0x3fc4e4(0x161)])<parseInt(_0x515d52['return_qty'])&&parseInt(_0x515d52[_0x3fc4e4(0x168)])>parseInt(_0x515d52[_0x3fc4e4(0x12f)])||parseInt(_0x515d52[_0x3fc4e4(0x12f)])==0x0)&&_0x5345f2++;});if(_0x5345f2!=0x0)return _0x505cf0[_0x28df81(0x178)](_0x28df81(0x13e),_0x28df81(0x193)),_0xe391d3[_0x28df81(0x150)](_0x28df81(0x174));_0x6a8ed4[_0x28df81(0x14d)][_0x28df81(0x180)](_0x41ea8e=>{var _0xb70c9c=_0x28df81;const _0x170c77=_0x32171b[_0xb70c9c(0x160)][_0xb70c9c(0x175)](_0x551692=>{var _0x2dfc81=_0xb70c9c;_0x551692[_0x2dfc81(0x125)]==_0x41ea8e['product_name']&&_0x551692[_0x2dfc81(0x15b)]==_0x41ea8e['floorlevel']&&_0x551692[_0x2dfc81(0x16d)]==_0x41ea8e[_0x2dfc81(0x16d)]&&_0x551692[_0x2dfc81(0x15d)]==_0x41ea8e[_0x2dfc81(0x15d)]&&_0x551692['bay']==_0x41ea8e[_0x2dfc81(0x130)]&&(_0x551692[_0x2dfc81(0x17e)]=parseInt(_0x551692['product_stock'])+parseInt(_0x41ea8e[_0x2dfc81(0x12f)]));});}),console[_0x28df81(0x148)](_0x28df81(0x134),_0x32171b),await _0x32171b['save'](),_0x6a8ed4['invoice']=_0x41bccf,_0x6a8ed4[_0x28df81(0x139)]=_0x5c145c,_0x6a8ed4[_0x28df81(0x163)]=_0x5c0138,_0x6a8ed4['warehouse_name']=_0x5ae4a,_0x6a8ed4['return_sale']=_0x20f69b,_0x6a8ed4[_0x28df81(0x14f)]=_0x5e3099,_0x6a8ed4[_0x28df81(0x18c)]=_0x4ced77,_0x6a8ed4[_0x28df81(0x164)]=_0x481907;const _0x51c1df=await _0x6a8ed4['save']();console['log']('new\x20new_data',_0x51c1df);const _0x58b5c1=await c_payment_data[_0x28df81(0x157)]({'invoice':_0x505cf0[_0x28df81(0x158)][_0x28df81(0x14e)],'reason':_0x28df81(0x127)});_0x58b5c1[_0x28df81(0x13d)]=_0x505cf0[_0x28df81(0x158)]['suppliers'],_0x58b5c1[_0x28df81(0x163)]=_0x505cf0['body'][_0x28df81(0x163)],await _0x58b5c1['save'](),_0x505cf0[_0x28df81(0x178)](_0x28df81(0x16a),_0x28df81(0x155)),_0xe391d3['redirect'](_0x28df81(0x184));}catch(_0x43b95e){console[_0x28df81(0x148)](_0x43b95e),_0xe391d3['status'](0xc8)[_0x28df81(0x14b)]({'message':_0x43b95e[_0x28df81(0x124)]});}}),router[a0_0x2fe106(0x13b)](a0_0x2fe106(0x176),auth,async(_0x21deef,_0x4ddcfd)=>{var _0x242b95=a0_0x2fe106;try{const _0x4011de=_0x21deef['params']['id'],{invoice:_0x39248a,customer:_0x5150b3,payable_to_customer:_0x22f6a4,paid_amount:_0x47623b}=_0x21deef['body'],_0x17e393=await sales_return[_0x242b95(0x198)](_0x4011de);console[_0x242b95(0x148)](_0x242b95(0x185),_0x17e393),console['log'](_0x22f6a4),console[_0x242b95(0x148)](_0x47623b);var _0x25b554=_0x22f6a4-_0x47623b;console['log'](_0x242b95(0x173),_0x25b554),_0x17e393[_0x242b95(0x192)]=parseFloat(_0x47623b)+parseFloat(_0x17e393[_0x242b95(0x192)]),_0x17e393[_0x242b95(0x172)]=_0x25b554,console[_0x242b95(0x148)](_0x17e393);const _0x16358a=await _0x17e393[_0x242b95(0x197)]();console[_0x242b95(0x148)](0x1b207);const _0xdaeb2a=await c_payment_data[_0x242b95(0x157)]({'invoice':_0x21deef[_0x242b95(0x158)]['invoice'],'reason':_0x242b95(0x127)});console[_0x242b95(0x148)]('c_payment',_0xdaeb2a),_0xdaeb2a['amount']=_0x25b554,await _0xdaeb2a[_0x242b95(0x197)]();let _0x64d495=new Date(),_0x4b9eb7=('0'+_0x64d495['getDate']())[_0x242b95(0x151)](-0x2),_0x4a5306=('0'+(_0x64d495['getMonth']()+0x1))[_0x242b95(0x151)](-0x2),_0xa72192=_0x64d495[_0x242b95(0x181)](),_0x367bd=_0xa72192+'-'+_0x4a5306+'-'+_0x4b9eb7;const _0x1c8ed0=new customer_payment({'invoice':_0x39248a,'date':_0xa72192+'-'+_0x4a5306+'-'+_0x4b9eb7,'customer':_0x5150b3,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x47623b}),_0x343982=await _0x1c8ed0[_0x242b95(0x197)]();_0x21deef['flash'](_0x242b95(0x16a),_0x242b95(0x17b)),_0x4ddcfd['redirect']('/sales_return/view');}catch(_0x4f1b52){console['log'](_0x4f1b52);}}),router[a0_0x2fe106(0x182)](a0_0x2fe106(0x12d),auth,async(_0x5d573d,_0x274276)=>{var _0x4ee22e=a0_0x2fe106;try{const {username:_0x346b89,email:_0x5561a7,role:_0x51eebb}=_0x5d573d[_0x4ee22e(0x191)],_0x3d20d7=_0x5d573d['user'],_0x40dcbd=await profile['findOne']({'email':_0x3d20d7[_0x4ee22e(0x15e)]}),_0x324abf=await master_shop[_0x4ee22e(0x123)]();console[_0x4ee22e(0x148)](_0x4ee22e(0x16b),_0x324abf);const _0x4ab9b0=_0x5d573d['params']['id'],_0x4f0567=await sales_return['findById'](_0x4ab9b0);console[_0x4ee22e(0x148)](_0x4f0567);const _0xedf7c5=await customer['findOne']({'name':_0x4f0567[_0x4ee22e(0x139)]});console['log'](_0xedf7c5);if(_0x324abf[0x0][_0x4ee22e(0x195)]=='English\x20(US)'){var _0x1be975=users[_0x4ee22e(0x140)];console[_0x4ee22e(0x148)](_0x1be975);}else{if(_0x324abf[0x0][_0x4ee22e(0x195)]==_0x4ee22e(0x170))var _0x1be975=users[_0x4ee22e(0x170)];else{if(_0x324abf[0x0][_0x4ee22e(0x195)]==_0x4ee22e(0x16e))var _0x1be975=users['German'];else{if(_0x324abf[0x0]['language']==_0x4ee22e(0x12b))var _0x1be975=users[_0x4ee22e(0x12b)];else{if(_0x324abf[0x0]['language']==_0x4ee22e(0x179))var _0x1be975=users[_0x4ee22e(0x179)];else{if(_0x324abf[0x0][_0x4ee22e(0x195)]==_0x4ee22e(0x16f))var _0x1be975=users[_0x4ee22e(0x18a)];else{if(_0x324abf[0x0]['language']==_0x4ee22e(0x147))var _0x1be975=users[_0x4ee22e(0x147)];else{if(_0x324abf[0x0][_0x4ee22e(0x195)]=='Arabic\x20(ae)')var _0x1be975=users[_0x4ee22e(0x188)];}}}}}}}_0x274276[_0x4ee22e(0x13c)](_0x4ee22e(0x186),{'success':_0x5d573d[_0x4ee22e(0x178)](_0x4ee22e(0x16a)),'errors':_0x5d573d[_0x4ee22e(0x178)](_0x4ee22e(0x13e)),'role':_0x3d20d7,'profile':_0x40dcbd,'master_shop':_0x324abf,'customers':_0xedf7c5,'sales':_0x4f0567,'language':_0x1be975});}catch(_0x16121f){console[_0x4ee22e(0x148)](_0x16121f);}}),module[a0_0x2fe106(0x190)]=router;function a0_0x5de5(){var _0x27e987=['errors','sales_return_finished','English','English\x20(US)','/sales_return_finished/view','Enabled','2806962OXLvmW','return_qty_QA','$product_details.product_code','Chinese','log','secondary_code_QA','old_data','json','2456320GClfOI','return_sale','invoice','note','redirect','slice','string','params','4415224wmYlEh','purchase\x20return\x20successfully','360341gISkPl','findOne','body','$customer_docs','$product_details','floorlevel','4429746fPqamt','bin','email','$product_details.bin','product_details','stock','types','date','ToRoom','stocks','Finished\x20Goods','Router','sale_qty','$product_details.product_name','success','master','/view/:id','type','German','Portuguese\x20(BR)','Hindi','$product_details.storage','due_amount','subtract','back','map','/give_payment/:id','$product_details.type','flash','French','stocks_QA','payment\x20successfull','$product_details._id','49NIVWRA','product_stock','secondary_code','forEach','getFullYear','get','sales_quantity_QA','/sales_return/view','data','sales_return_invoice','../middleware/auth','Arabic','return_sale_QA','Portuguese','$product_details.floorlevel','ToWarehouse','$name','product_code','customers','exports','user','paid_amount','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.bay','language','foreach\x20newproduct','save','findById','sales_quantity','$product_details.rack','aggregate','primary_code_QA','find','message','product_name','22313196NijYLB','Sale\x20Return','name','product_code_QA','customer_docs','Spanish','/view','/invoice/:id','primary_code','return_qty','bay','Arabic\x20(ae)','2achwiY','$product_details.primary_code','old_warehouse_data','for_categorize','product_name_QA','505328beuFPk','QA\x20Warehouse','customer','Return\x20Rooms','post','render','suppliers'];a0_0x5de5=function(){return _0x27e987;};return a0_0x5de5();}