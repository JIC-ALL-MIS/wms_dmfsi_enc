function a0_0x9fb3(){var _0x53dc61=['263cHwowX','findById','/sales_return_finished/view','redirect','due_amount','$product_details.floorlevel','aggregate','/sales_return/view','product_details','log','date','$name','product_name','Arabic\x20(ae)','ToRoom','paid_amount','$product_details.rack','customer','$product_details.primary_code','return_qty_QA','$product_details.storage','70qrHcSL','warehouse_name','$product_details.product_code','types','map','product_code','user','product_name_QA','floorlevel','amount','4010636ULOBNN','for_categorize','/invoice/:id','master','../models/all_models','return_sale','getMonth','getFullYear','primary_code','ToWarehouse','stocks_QA','render','$product_details.bay','English\x20(US)','post','customers','forEach','purchase\x20return\x20successfully','exports','7248280IwBauW','new\x20new_data','success','note','$product_details.bin','$product_details._id','secondary_code_QA','language','/give_payment/:id','$product_details.product_name','old_warehouse_data','$product_details','email','suppliers','Spanish','primary_code_QA','sales_quantity_QA','144174YapBrp','errors','$product_details.secondary_code','$product_details.type','type','Arabic','string','English','return_sale_edit_finished','Portuguese\x20(BR)','subtract','Sale\x20Return','French','payment\x20successfull','getDate','secondary_code','stock','get','foreach\x20newproduct','sales_return_invoice','$product_details.product_stock','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Return\x20Rooms','sales_return_finished','message','body','invoice','Returned\x20Payment\x20For\x20Sale\x20Return','/view/:id','bin','564GttwDH','data','find','QA\x20Warehouse','../public/language/languages.json','24812BkHNMg','German','sales_quantity','save','product_stock','486648CfdmwH','return_sale_QA','bay','63scucqW','sale_qty','7390QJsjpx','Portuguese','return_qty','Hindi','Chinese','customer_docs','flash','findOne','status','name','params','json','express','Enabled','Finished\x20Goods','product_code_QA','$customer_docs','4019730XBVqwe','back','old_data'];a0_0x9fb3=function(){return _0x53dc61;};return a0_0x9fb3();}function a0_0x3b7d(_0x5684a3,_0x28568f){var _0x9fb345=a0_0x9fb3();return a0_0x3b7d=function(_0x3b7d46,_0x2519cf){_0x3b7d46=_0x3b7d46-0x75;var _0x119ea6=_0x9fb345[_0x3b7d46];return _0x119ea6;},a0_0x3b7d(_0x5684a3,_0x28568f);}var a0_0x261836=a0_0x3b7d;(function(_0x13df6a,_0x2d7dff){var _0x32e3b6=a0_0x3b7d,_0x4a6d20=_0x13df6a();while(!![]){try{var _0x1b8c93=-parseInt(_0x32e3b6(0xba))/0x1*(-parseInt(_0x32e3b6(0xa6))/0x2)+-parseInt(_0x32e3b6(0x97))/0x3*(parseInt(_0x32e3b6(0x9c))/0x4)+-parseInt(_0x32e3b6(0xcf))/0x5*(-parseInt(_0x32e3b6(0x79))/0x6)+parseInt(_0x32e3b6(0xd9))/0x7+parseInt(_0x32e3b6(0xa1))/0x8*(-parseInt(_0x32e3b6(0xa4))/0x9)+parseInt(_0x32e3b6(0xec))/0xa+-parseInt(_0x32e3b6(0xb7))/0xb;if(_0x1b8c93===_0x2d7dff)break;else _0x4a6d20['push'](_0x4a6d20['shift']());}catch(_0x58f772){_0x4a6d20['push'](_0x4a6d20['shift']());}}}(a0_0x9fb3,0x9e56c));const express=require(a0_0x261836(0xb2)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x261836(0xdd)),auth=require('../middleware/auth'),users=require(a0_0x261836(0x9b));router[a0_0x261836(0x8a)]('/view',auth,async(_0x1de972,_0x1f5d8e)=>{var _0x2de148=a0_0x261836;try{const {username:_0x24d698,email:_0x5d8dff,role:_0x422be2}=_0x1de972['user'],_0x4e4d6c=_0x1de972[_0x2de148(0xd5)],_0x432b4c=await profile['findOne']({'email':_0x4e4d6c[_0x2de148(0xf8)]}),_0x541318=await master_shop[_0x2de148(0x99)](),_0x421850=await sales_return_finished[_0x2de148(0xc0)]([{'$lookup':{'from':_0x2de148(0xe8),'localField':_0x2de148(0xcb),'foreignField':_0x2de148(0xaf),'as':_0x2de148(0xab)}},{'$unwind':_0x2de148(0xb6)}]);if(_0x541318[0x0][_0x2de148(0xf3)]=='English\x20(US)'){var _0x189bf1=users[_0x2de148(0x80)];console['log'](_0x189bf1);}else{if(_0x541318[0x0][_0x2de148(0xf3)]=='Hindi')var _0x189bf1=users[_0x2de148(0xa9)];else{if(_0x541318[0x0]['language']==_0x2de148(0x9d))var _0x189bf1=users[_0x2de148(0x9d)];else{if(_0x541318[0x0][_0x2de148(0xf3)]==_0x2de148(0x76))var _0x189bf1=users[_0x2de148(0x76)];else{if(_0x541318[0x0][_0x2de148(0xf3)]==_0x2de148(0x85))var _0x189bf1=users['French'];else{if(_0x541318[0x0]['language']=='Portuguese\x20(BR)')var _0x189bf1=users[_0x2de148(0xa7)];else{if(_0x541318[0x0][_0x2de148(0xf3)]==_0x2de148(0xaa))var _0x189bf1=users[_0x2de148(0xaa)];else{if(_0x541318[0x0]['language']==_0x2de148(0xc7))var _0x189bf1=users[_0x2de148(0x7e)];}}}}}}}_0x1f5d8e['render'](_0x2de148(0x90),{'success':_0x1de972['flash'](_0x2de148(0xee)),'errors':_0x1de972[_0x2de148(0xac)](_0x2de148(0x7a)),'role':_0x4e4d6c,'profile':_0x432b4c,'master_shop':_0x541318,'user':_0x421850,'language':_0x189bf1});}catch(_0x3b7425){console[_0x2de148(0xc3)](_0x3b7425);}}),router[a0_0x261836(0x8a)](a0_0x261836(0x95),auth,async(_0x5debea,_0x298f09)=>{var _0x209293=a0_0x261836;try{const {username:_0x42cb7f,email:_0x59a2b0,role:_0x3dfc69}=_0x5debea['user'],_0x21fe95=_0x5debea[_0x209293(0xd5)],_0x10f475=await profile[_0x209293(0xad)]({'email':_0x21fe95[_0x209293(0xf8)]}),_0x39beb9=await master_shop[_0x209293(0x99)]();console['log'](_0x209293(0xdc),_0x39beb9);const _0x2a25ad=_0x5debea[_0x209293(0xb0)]['id'];console[_0x209293(0xc3)](_0x2a25ad);var _0x418352=[_0x209293(0x8f)];const _0x5a83d1=await sales_return_finished[_0x209293(0xbb)](_0x2a25ad),_0x34220d=await warehouse['aggregate']([{'$match':{'name':_0x5a83d1[_0x209293(0xe2)],'room':_0x5a83d1[_0x209293(0xc8)]}},{'$unwind':_0x209293(0xf7)},{'$group':{'_id':_0x209293(0xf1),'name':{'$first':_0x209293(0xf5)},'product_stock':{'$first':_0x209293(0x8d)},'bay':{'$first':_0x209293(0xe5)},'bin':{'$first':_0x209293(0xf0)},'type':{'$first':_0x209293(0x7c)},'floorlevel':{'$first':_0x209293(0xbf)},'primary_code':{'$first':_0x209293(0xcc)},'secondary_code':{'$first':_0x209293(0x7b)},'product_code':{'$first':_0x209293(0xd1)},'storage':{'$first':_0x209293(0xce)},'rack':{'$first':_0x209293(0xca)}}}]);console['log'](_0x34220d);const _0x35ab61=await warehouse[_0x209293(0xc0)]([{'$match':{'status':_0x209293(0xb3),'warehouse_category':_0x209293(0xb4)}},{'$group':{'_id':_0x209293(0xc5),'name':{'$first':_0x209293(0xc5)}}},{'$sort':{'name':0x1}}]),_0x65c22=await warehouse['aggregate']([{'$match':{'status':_0x209293(0xb3),'name':_0x209293(0x9a)}},{'$group':{'_id':_0x209293(0xc5),'name':{'$first':_0x209293(0xc5)}}},{'$sort':{'name':0x1}}]),_0x5dcbe2=await product['find']({});if(_0x39beb9[0x0][_0x209293(0xf3)]=='English\x20(US)'){var _0x10cbf6=users[_0x209293(0x80)];console['log'](_0x10cbf6);}else{if(_0x39beb9[0x0][_0x209293(0xf3)]==_0x209293(0xa9))var _0x10cbf6=users[_0x209293(0xa9)];else{if(_0x39beb9[0x0]['language']==_0x209293(0x9d))var _0x10cbf6=users[_0x209293(0x9d)];else{if(_0x39beb9[0x0][_0x209293(0xf3)]=='Spanish')var _0x10cbf6=users[_0x209293(0x76)];else{if(_0x39beb9[0x0][_0x209293(0xf3)]==_0x209293(0x85))var _0x10cbf6=users['French'];else{if(_0x39beb9[0x0][_0x209293(0xf3)]==_0x209293(0x82))var _0x10cbf6=users[_0x209293(0xa7)];else{if(_0x39beb9[0x0][_0x209293(0xf3)]=='Chinese')var _0x10cbf6=users[_0x209293(0xaa)];else{if(_0x39beb9[0x0]['language']==_0x209293(0xc7))var _0x10cbf6=users[_0x209293(0x7e)];}}}}}}}_0x298f09[_0x209293(0xe4)](_0x209293(0x81),{'success':_0x5debea[_0x209293(0xac)](_0x209293(0xee)),'errors':_0x5debea['flash'](_0x209293(0x7a)),'role':_0x21fe95,'profile':_0x10f475,'master_shop':_0x39beb9,'user':_0x5a83d1,'stock':_0x34220d,'unit':_0x5dcbe2,'language':_0x10cbf6,'warehouses':_0x35ab61,'rooms':_0x418352,'warehouse_QA':_0x65c22});}catch(_0x1f2ea7){console[_0x209293(0xc3)](_0x1f2ea7);}}),router['post'](a0_0x261836(0x95),auth,async(_0x12aa68,_0x1013ff)=>{var _0x12c797=a0_0x261836;if(_0x12aa68[_0x12c797(0x92)][_0x12c797(0xda)]=='QA')try{const _0x42a0ad=_0x12aa68['params']['id'],_0x7ec510=await sales_return[_0x12c797(0xad)]({'invoice':_0x12aa68[_0x12c797(0x92)]['invoice']}),_0x30fa67=await warehouse[_0x12c797(0xad)]({'name':_0x7ec510['ToWarehouse'],'room':_0x7ec510[_0x12c797(0xc8)]}),{invoice:_0x1ad534,customer:_0x228eb7,date:_0x12c7a8,warehouse_name:_0x3d0245,product_name:_0x337bec,primary_code:_0xc4898a,secondary_code:_0x394881,product_code:_0x14b5e2,sales_quantity:_0x3fb6dc,stocks:_0x1d83c0,return_qty:_0x48844b,note:_0x3a710c,to_warehouse_name_QA:_0x198c44,to_Room_name_QA:_0x2b2a58}=_0x12aa68['body'];if(typeof product_name_QA==_0x12c797(0x7f))var _0x21e8e0=[_0x12aa68['body'][_0x12c797(0xd6)]],_0x35b0f5=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0x77)]],_0xbb4a21=[_0x12aa68['body'][_0x12c797(0xf2)]],_0x54c609=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xb5)]],_0x2d579e=[_0x12aa68['body'][_0x12c797(0x78)]],_0x423f69=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xe3)]],_0x1d597d=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xcd)]];else var _0x21e8e0=[..._0x12aa68['body'][_0x12c797(0xd6)]],_0x35b0f5=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0x77)]],_0xbb4a21=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xf2)]],_0x54c609=[..._0x12aa68[_0x12c797(0x92)]['product_code_QA']],_0x2d579e=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0x78)]],_0x423f69=[..._0x12aa68[_0x12c797(0x92)]['stocks_QA']],_0x1d597d=[..._0x12aa68['body']['return_qty_QA']];const _0x2003e7=_0x21e8e0['map'](_0x3b56ff=>{return _0x3b56ff={'product_name':_0x3b56ff};});_0x35b0f5[_0x12c797(0xe9)]((_0x531e00,_0x424a88)=>{_0x2003e7[_0x424a88]['primary_code']=_0x531e00;}),_0xbb4a21[_0x12c797(0xe9)]((_0x58e028,_0x31fbaa)=>{var _0x70782c=_0x12c797;_0x2003e7[_0x31fbaa][_0x70782c(0x88)]=_0x58e028;}),_0x54c609[_0x12c797(0xe9)]((_0x4ea764,_0x32db2c)=>{var _0x226287=_0x12c797;_0x2003e7[_0x32db2c][_0x226287(0xd4)]=_0x4ea764;}),_0x2d579e[_0x12c797(0xe9)]((_0x3479d9,_0x49d83a)=>{var _0xe046e3=_0x12c797;_0x2003e7[_0x49d83a][_0xe046e3(0xa5)]=_0x3479d9;}),_0x423f69[_0x12c797(0xe9)]((_0x11f5d6,_0x372030)=>{var _0x2bd6dc=_0x12c797;_0x2003e7[_0x372030][_0x2bd6dc(0x89)]=_0x11f5d6;}),_0x1d597d[_0x12c797(0xe9)]((_0x569337,_0x5cdefc)=>{var _0x11b3a4=_0x12c797;_0x2003e7[_0x5cdefc][_0x11b3a4(0xa8)]=_0x569337;}),_0x7ec510[_0x12c797(0xa2)][_0x12c797(0xe9)](_0x2e5f6e=>{var _0x33d5c1=_0x12c797;const _0x2980d3=_0x30fa67['product_details'][_0x33d5c1(0xd3)](_0x4099ae=>{var _0x4c4cab=_0x33d5c1;_0x4099ae['product_name']==_0x2e5f6e[_0x4c4cab(0xc6)]&&(_0x4099ae['product_stock']=parseInt(_0x4099ae[_0x4c4cab(0xa0)])+parseInt(_0x2e5f6e['return_qty']));});}),await _0x30fa67['save'](),_0x7ec510[_0x12c797(0x93)]=_0x1ad534,_0x7ec510['customer']=_0x228eb7,_0x7ec510['date']=_0x12c7a8,_0x7ec510[_0x12c797(0xd0)]=_0x3d0245,_0x7ec510[_0x12c797(0xa2)]=_0x2003e7,_0x7ec510['note']=_0x3a710c,_0x7ec510['ToWarehouse']=_0x198c44,_0x7ec510[_0x12c797(0xc8)]=_0x2b2a58;const _0x38e699=await _0x7ec510[_0x12c797(0x9f)](),_0x300817=await c_payment_data[_0x12c797(0xad)]({'invoice':_0x12aa68['body'][_0x12c797(0x93)],'reason':_0x12c797(0x84)});_0x300817[_0x12c797(0x75)]=_0x12aa68[_0x12c797(0x92)]['suppliers'],_0x300817['date']=_0x12aa68[_0x12c797(0x92)][_0x12c797(0xc4)],await _0x300817['save'](),_0x12aa68[_0x12c797(0xac)]('success',_0x12c797(0xea)),_0x1013ff[_0x12c797(0xbd)](_0x12c797(0xbc));}catch(_0x3aac87){console[_0x12c797(0xc3)](_0x3aac87),_0x1013ff['status'](0xc8)[_0x12c797(0xb1)]({'message':_0x3aac87[_0x12c797(0x91)]});}else try{const _0x57ff70=_0x12aa68['params']['id'];console[_0x12c797(0xc3)](_0x57ff70);const _0x5786ca=await sales_return[_0x12c797(0xad)]({'invoice':_0x12aa68['body'][_0x12c797(0x93)]});console[_0x12c797(0xc3)](_0x12c797(0xb9),_0x5786ca);const _0x274de3=await warehouse['findOne']({'name':_0x5786ca['ToWarehouse'],'room':_0x5786ca[_0x12c797(0xc8)]});console[_0x12c797(0xc3)](_0x12c797(0xf6),_0x274de3);const {invoice:_0x2cb062,customer:_0x1cc9c2,date:_0x4d6efc,warehouse_name:_0x4df94d,product_name:_0x33a3cf,primary_code:_0x8e212f,secondary_code:_0x100815,product_code:_0x46cd5b,sales_quantity:_0x4c27b7,stocks:_0x107ce3,return_qty:_0x15e842,note:_0x25e0ca,to_warehouse_name:_0x2a95e3,to_Room_name:_0x26131c}=_0x12aa68[_0x12c797(0x92)];console[_0x12c797(0xc3)](_0x12aa68[_0x12c797(0x92)]);if(typeof _0x33a3cf==_0x12c797(0x7f))var _0x21e8e0=[_0x12aa68['body'][_0x12c797(0xc6)]],_0x35b0f5=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xe1)]],_0xbb4a21=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0x88)]],_0x54c609=[_0x12aa68['body'][_0x12c797(0xd4)]],_0x2d579e=[_0x12aa68[_0x12c797(0x92)]['sales_quantity']],_0x423f69=[_0x12aa68[_0x12c797(0x92)]['stocks']],_0x1d597d=[_0x12aa68['body'][_0x12c797(0xa8)]],_0x3ec921=[_0x12aa68[_0x12c797(0x92)]['bay']],_0x46705e=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0x96)]],_0x53cfd=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xd2)]],_0x4870b8=[_0x12aa68[_0x12c797(0x92)][_0x12c797(0xd7)]];else var _0x21e8e0=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xc6)]],_0x35b0f5=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xe1)]],_0xbb4a21=[..._0x12aa68[_0x12c797(0x92)]['secondary_code']],_0x54c609=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xd4)]],_0x2d579e=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0x9e)]],_0x423f69=[..._0x12aa68[_0x12c797(0x92)]['stocks']],_0x1d597d=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xa8)]],_0x3ec921=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xa3)]],_0x46705e=[..._0x12aa68[_0x12c797(0x92)]['bin']],_0x53cfd=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xd2)]],_0x4870b8=[..._0x12aa68[_0x12c797(0x92)][_0x12c797(0xd7)]];const _0xf75010=_0x21e8e0[_0x12c797(0xd3)](_0x4be4dd=>{return _0x4be4dd={'product_name':_0x4be4dd};});_0x35b0f5[_0x12c797(0xe9)]((_0x27d59f,_0x394dee)=>{var _0x251adb=_0x12c797;_0xf75010[_0x394dee][_0x251adb(0xe1)]=_0x27d59f;}),_0xbb4a21[_0x12c797(0xe9)]((_0x1c423d,_0x5571dd)=>{_0xf75010[_0x5571dd]['secondary_code']=_0x1c423d;}),_0x54c609[_0x12c797(0xe9)]((_0x3b2203,_0x32c0b5)=>{var _0x31ac1d=_0x12c797;_0xf75010[_0x32c0b5][_0x31ac1d(0xd4)]=_0x3b2203;}),_0x2d579e[_0x12c797(0xe9)]((_0x93298,_0xc72f53)=>{var _0x12ff23=_0x12c797;_0xf75010[_0xc72f53][_0x12ff23(0xa5)]=_0x93298;}),_0x423f69[_0x12c797(0xe9)]((_0x51f970,_0x5fd51a)=>{_0xf75010[_0x5fd51a]['stock']=_0x51f970;}),_0x1d597d[_0x12c797(0xe9)]((_0x5d9eae,_0x329c37)=>{var _0x258305=_0x12c797;_0xf75010[_0x329c37][_0x258305(0xa8)]=_0x5d9eae;}),_0x3ec921[_0x12c797(0xe9)]((_0x5b579a,_0x521c25)=>{_0xf75010[_0x521c25]['bay']=_0x5b579a;}),_0x46705e[_0x12c797(0xe9)]((_0x4602cd,_0x262b88)=>{var _0x51af6f=_0x12c797;_0xf75010[_0x262b88][_0x51af6f(0x96)]=_0x4602cd;}),_0x53cfd['forEach']((_0x239fe5,_0x8b6a8)=>{var _0x2c305f=_0x12c797;_0xf75010[_0x8b6a8][_0x2c305f(0x7d)]=_0x239fe5;}),_0x4870b8[_0x12c797(0xe9)]((_0x28ddae,_0x2a1033)=>{var _0x358fb1=_0x12c797;_0xf75010[_0x2a1033][_0x358fb1(0xd7)]=_0x28ddae;});var _0x1d0080=0x0;_0xf75010['forEach'](_0x51ab1f=>{var _0x34b3bb=_0x12c797;console[_0x34b3bb(0xc3)](_0x34b3bb(0x8b),_0x51ab1f),(parseInt(_0x51ab1f[_0x34b3bb(0xa5)])<parseInt(_0x51ab1f['return_qty'])||parseInt(_0x51ab1f[_0x34b3bb(0x89)])<parseInt(_0x51ab1f[_0x34b3bb(0xa8)])&&parseInt(_0x51ab1f['sale_qty'])>parseInt(_0x51ab1f[_0x34b3bb(0xa8)])||parseInt(_0x51ab1f[_0x34b3bb(0xa8)])==0x0)&&_0x1d0080++;});if(_0x1d0080!=0x0)return _0x12aa68[_0x12c797(0xac)](_0x12c797(0x7a),_0x12c797(0x8e)),_0x1013ff[_0x12c797(0xbd)](_0x12c797(0xb8));_0x5786ca[_0x12c797(0xde)]['forEach'](_0x523125=>{var _0x2f6170=_0x12c797;const _0x4e4de9=_0x274de3[_0x2f6170(0xc2)][_0x2f6170(0xd3)](_0x224392=>{var _0x52b361=_0x2f6170;_0x224392['product_name']==_0x523125[_0x52b361(0xc6)]&&_0x224392[_0x52b361(0xd7)]==_0x523125[_0x52b361(0xd7)]&&_0x224392[_0x52b361(0x7d)]==_0x523125[_0x52b361(0x7d)]&&_0x224392[_0x52b361(0x96)]==_0x523125[_0x52b361(0x96)]&&_0x224392[_0x52b361(0xa3)]==_0x523125[_0x52b361(0xa3)]&&(_0x224392['product_stock']=parseInt(_0x224392['product_stock'])+parseInt(_0x523125[_0x52b361(0xa8)]));});}),console[_0x12c797(0xc3)](_0x12c797(0xf6),_0x274de3),await _0x274de3[_0x12c797(0x9f)](),_0x5786ca[_0x12c797(0x93)]=_0x2cb062,_0x5786ca[_0x12c797(0xcb)]=_0x1cc9c2,_0x5786ca['date']=_0x4d6efc,_0x5786ca[_0x12c797(0xd0)]=_0x4df94d,_0x5786ca[_0x12c797(0xde)]=_0xf75010,_0x5786ca[_0x12c797(0xef)]=_0x25e0ca,_0x5786ca['ToWarehouse']=_0x2a95e3,_0x5786ca[_0x12c797(0xc8)]=_0x26131c;const _0x311952=await _0x5786ca[_0x12c797(0x9f)]();console['log'](_0x12c797(0xed),_0x311952);const _0x288342=await c_payment_data[_0x12c797(0xad)]({'invoice':_0x12aa68[_0x12c797(0x92)][_0x12c797(0x93)],'reason':_0x12c797(0x84)});_0x288342[_0x12c797(0x75)]=_0x12aa68['body']['suppliers'],_0x288342[_0x12c797(0xc4)]=_0x12aa68[_0x12c797(0x92)][_0x12c797(0xc4)],await _0x288342['save'](),_0x12aa68['flash'](_0x12c797(0xee),_0x12c797(0xea)),_0x1013ff[_0x12c797(0xbd)](_0x12c797(0xc1));}catch(_0x194a85){console[_0x12c797(0xc3)](_0x194a85),_0x1013ff[_0x12c797(0xae)](0xc8)[_0x12c797(0xb1)]({'message':_0x194a85['message']});}}),router[a0_0x261836(0xe7)](a0_0x261836(0xf4),auth,async(_0x3575c4,_0x28fe95)=>{var _0x56bd3d=a0_0x261836;try{const _0x393059=_0x3575c4[_0x56bd3d(0xb0)]['id'],{invoice:_0x3b95ab,customer:_0x403a50,payable_to_customer:_0x583591,paid_amount:_0x1c7711}=_0x3575c4[_0x56bd3d(0x92)],_0x55837b=await sales_return['findById'](_0x393059);console[_0x56bd3d(0xc3)](_0x56bd3d(0x98),_0x55837b),console['log'](_0x583591),console[_0x56bd3d(0xc3)](_0x1c7711);var _0x56155d=_0x583591-_0x1c7711;console[_0x56bd3d(0xc3)](_0x56bd3d(0x83),_0x56155d),_0x55837b[_0x56bd3d(0xc9)]=parseFloat(_0x1c7711)+parseFloat(_0x55837b[_0x56bd3d(0xc9)]),_0x55837b[_0x56bd3d(0xbe)]=_0x56155d,console[_0x56bd3d(0xc3)](_0x55837b);const _0x14306e=await _0x55837b[_0x56bd3d(0x9f)]();console['log'](0x1b207);const _0x24003f=await c_payment_data[_0x56bd3d(0xad)]({'invoice':_0x3575c4[_0x56bd3d(0x92)]['invoice'],'reason':_0x56bd3d(0x84)});console['log']('c_payment',_0x24003f),_0x24003f[_0x56bd3d(0xd8)]=_0x56155d,await _0x24003f[_0x56bd3d(0x9f)]();let _0x5a8062=new Date(),_0x366095=('0'+_0x5a8062[_0x56bd3d(0x87)]())['slice'](-0x2),_0x1d9d62=('0'+(_0x5a8062[_0x56bd3d(0xdf)]()+0x1))['slice'](-0x2),_0x45d2ae=_0x5a8062[_0x56bd3d(0xe0)](),_0x355dcc=_0x45d2ae+'-'+_0x1d9d62+'-'+_0x366095;const _0x5eaf27=new customer_payment({'invoice':_0x3b95ab,'date':_0x45d2ae+'-'+_0x1d9d62+'-'+_0x366095,'customer':_0x403a50,'reason':_0x56bd3d(0x94),'amount':_0x1c7711}),_0x4fb4e1=await _0x5eaf27[_0x56bd3d(0x9f)]();_0x3575c4[_0x56bd3d(0xac)]('success',_0x56bd3d(0x86)),_0x28fe95[_0x56bd3d(0xbd)]('/sales_return/view');}catch(_0x4c9631){console[_0x56bd3d(0xc3)](_0x4c9631);}}),router[a0_0x261836(0x8a)](a0_0x261836(0xdb),auth,async(_0x3b0f9f,_0x4bff03)=>{var _0x4bc323=a0_0x261836;try{const {username:_0x376118,email:_0x3ca7cc,role:_0x386977}=_0x3b0f9f[_0x4bc323(0xd5)],_0x323e66=_0x3b0f9f[_0x4bc323(0xd5)],_0xb3cde5=await profile[_0x4bc323(0xad)]({'email':_0x323e66[_0x4bc323(0xf8)]}),_0x3ff543=await master_shop['find']();console[_0x4bc323(0xc3)](_0x4bc323(0xdc),_0x3ff543);const _0x11d916=_0x3b0f9f[_0x4bc323(0xb0)]['id'],_0xfb91a5=await sales_return[_0x4bc323(0xbb)](_0x11d916);console['log'](_0xfb91a5);const _0x338adc=await customer[_0x4bc323(0xad)]({'name':_0xfb91a5[_0x4bc323(0xcb)]});console[_0x4bc323(0xc3)](_0x338adc);if(_0x3ff543[0x0]['language']==_0x4bc323(0xe6)){var _0x48b19f=users['English'];console[_0x4bc323(0xc3)](_0x48b19f);}else{if(_0x3ff543[0x0][_0x4bc323(0xf3)]==_0x4bc323(0xa9))var _0x48b19f=users[_0x4bc323(0xa9)];else{if(_0x3ff543[0x0][_0x4bc323(0xf3)]=='German')var _0x48b19f=users[_0x4bc323(0x9d)];else{if(_0x3ff543[0x0][_0x4bc323(0xf3)]==_0x4bc323(0x76))var _0x48b19f=users['Spanish'];else{if(_0x3ff543[0x0][_0x4bc323(0xf3)]==_0x4bc323(0x85))var _0x48b19f=users[_0x4bc323(0x85)];else{if(_0x3ff543[0x0]['language']==_0x4bc323(0x82))var _0x48b19f=users[_0x4bc323(0xa7)];else{if(_0x3ff543[0x0]['language']==_0x4bc323(0xaa))var _0x48b19f=users[_0x4bc323(0xaa)];else{if(_0x3ff543[0x0]['language']==_0x4bc323(0xc7))var _0x48b19f=users['Arabic'];}}}}}}}_0x4bff03[_0x4bc323(0xe4)](_0x4bc323(0x8c),{'success':_0x3b0f9f['flash']('success'),'errors':_0x3b0f9f['flash'](_0x4bc323(0x7a)),'role':_0x323e66,'profile':_0xb3cde5,'master_shop':_0x3ff543,'customers':_0x338adc,'sales':_0xfb91a5,'language':_0x48b19f});}catch(_0x1bac3f){console['log'](_0x1bac3f);}}),module[a0_0x261836(0xeb)]=router;