function a0_0x1163(_0x1e7327,_0xf9c152){var _0x5da482=a0_0x5da4();return a0_0x1163=function(_0x116364,_0x2d6a86){_0x116364=_0x116364-0x75;var _0x2befd5=_0x5da482[_0x116364];return _0x2befd5;},a0_0x1163(_0x1e7327,_0xf9c152);}function a0_0x5da4(){var _0x1603a9=['German','product_stock','forEach','2765412GcQvzc','English','sales_quantity','getMonth','stocks','body','../middleware/auth','map','types','Finished\x20Goods','Arabic','old_warehouse_data','Returned\x20Payment\x20For\x20Sale\x20Return','findOne','for_categorize','41194450TfnIQO','Hindi','/invoice/:id','render','new\x20new_data','return_sale_QA','return_sale','$product_details.bay','paid_amount','Portuguese\x20(BR)','622344FirTPx','primary_code','$name','$product_details.floorlevel','$product_details.bin','product_code','$product_details.product_name','post','c_payment','1035754CiyVLx','5818278OpQDnU','getDate','log','json','get','success','language','5cctDoR','note','product_name','Sale\x20Return','user','Portuguese','ToWarehouse','back','product_code_QA','return_qty_QA','ToRoom','old_data','21IArwyL','suppliers','/view/:id','email','name','../models/all_models','customer','bay','Arabic\x20(ae)','372849vElpew','exports','aggregate','amount','invoice','Enabled','save','/sales_return/view','French','$product_details.product_stock','sales_return_finished','return_sale_edit_finished','errors','sales_quantity_QA','product_details','99NCeLxZ','string','slice','product_name_QA','Return\x20Rooms','message','/give_payment/:id','warehouse_name','return_qty','status','express','secondary_code','2qOldev','primary_code_QA','$product_details.type','stocks_QA','/sales_return_finished/view','type','sale_qty','due_amount','bin','params','Chinese','customer_docs','Spanish','flash','766930PpRWQJ','floorlevel','stock','redirect','English\x20(US)','findById','purchase\x20return\x20successfully','find','getFullYear','customers','date','secondary_code_QA','subtract','Router','../public/language/languages.json'];a0_0x5da4=function(){return _0x1603a9;};return a0_0x5da4();}var a0_0x26b3bd=a0_0x1163;(function(_0x4d6a3c,_0x35e874){var _0x5d3b6c=a0_0x1163,_0x3c8fe3=_0x4d6a3c();while(!![]){try{var _0x2e4177=-parseInt(_0x5d3b6c(0x98))/0x1*(parseInt(_0x5d3b6c(0xd0))/0x2)+parseInt(_0x5d3b6c(0xb5))/0x3+-parseInt(_0x5d3b6c(0x76))/0x4+-parseInt(_0x5d3b6c(0xa0))/0x5*(parseInt(_0x5d3b6c(0x99))/0x6)+-parseInt(_0x5d3b6c(0xac))/0x7*(-parseInt(_0x5d3b6c(0x8f))/0x8)+parseInt(_0x5d3b6c(0xc4))/0x9*(-parseInt(_0x5d3b6c(0xde))/0xa)+parseInt(_0x5d3b6c(0x85))/0xb;if(_0x2e4177===_0x35e874)break;else _0x3c8fe3['push'](_0x3c8fe3['shift']());}catch(_0xb0c191){_0x3c8fe3['push'](_0x3c8fe3['shift']());}}}(a0_0x5da4,0x893f9));const express=require(a0_0x26b3bd(0xce)),app=express(),router=express[a0_0x26b3bd(0xeb)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x26b3bd(0xb1)),auth=require(a0_0x26b3bd(0x7c)),users=require(a0_0x26b3bd(0xec));router[a0_0x26b3bd(0x9d)]('/view',auth,async(_0x342446,_0x59b8b8)=>{var _0x3f7933=a0_0x26b3bd;try{const {username:_0x2f0620,email:_0x36c740,role:_0x3ab679}=_0x342446[_0x3f7933(0xa4)],_0x2cdce9=_0x342446[_0x3f7933(0xa4)],_0x498630=await profile[_0x3f7933(0x83)]({'email':_0x2cdce9[_0x3f7933(0xaf)]}),_0x12609c=await master_shop[_0x3f7933(0xe5)](),_0x5e3f32=await sales_return_finished[_0x3f7933(0xb7)]([{'$lookup':{'from':_0x3f7933(0xe7),'localField':_0x3f7933(0xb2),'foreignField':_0x3f7933(0xb0),'as':_0x3f7933(0xdb)}},{'$unwind':'$customer_docs'}]);if(_0x12609c[0x0][_0x3f7933(0x9f)]==_0x3f7933(0xe2)){var _0xff4866=users['English'];console[_0x3f7933(0x9b)](_0xff4866);}else{if(_0x12609c[0x0][_0x3f7933(0x9f)]==_0x3f7933(0x86))var _0xff4866=users['Hindi'];else{if(_0x12609c[0x0][_0x3f7933(0x9f)]=='German')var _0xff4866=users[_0x3f7933(0xed)];else{if(_0x12609c[0x0]['language']=='Spanish')var _0xff4866=users['Spanish'];else{if(_0x12609c[0x0][_0x3f7933(0x9f)]=='French')var _0xff4866=users['French'];else{if(_0x12609c[0x0][_0x3f7933(0x9f)]=='Portuguese\x20(BR)')var _0xff4866=users[_0x3f7933(0xa5)];else{if(_0x12609c[0x0][_0x3f7933(0x9f)]=='Chinese')var _0xff4866=users[_0x3f7933(0xda)];else{if(_0x12609c[0x0][_0x3f7933(0x9f)]==_0x3f7933(0xb4))var _0xff4866=users[_0x3f7933(0x80)];}}}}}}}_0x59b8b8[_0x3f7933(0x88)](_0x3f7933(0xbf),{'success':_0x342446[_0x3f7933(0xdd)](_0x3f7933(0x9e)),'errors':_0x342446[_0x3f7933(0xdd)]('errors'),'role':_0x2cdce9,'profile':_0x498630,'master_shop':_0x12609c,'user':_0x5e3f32,'language':_0xff4866});}catch(_0x3f0949){console['log'](_0x3f0949);}}),router[a0_0x26b3bd(0x9d)](a0_0x26b3bd(0xae),auth,async(_0x54c117,_0x3ff0f2)=>{var _0x2926b8=a0_0x26b3bd;try{const {username:_0x5199b0,email:_0x268fb1,role:_0x392740}=_0x54c117[_0x2926b8(0xa4)],_0x26885b=_0x54c117[_0x2926b8(0xa4)],_0x519391=await profile[_0x2926b8(0x83)]({'email':_0x26885b[_0x2926b8(0xaf)]}),_0xf4b86a=await master_shop[_0x2926b8(0xe5)]();console[_0x2926b8(0x9b)]('master',_0xf4b86a);const _0x19cf47=_0x54c117[_0x2926b8(0xd9)]['id'];console[_0x2926b8(0x9b)](_0x19cf47);var _0xd703ac=[_0x2926b8(0xc8)];const _0x30ca8d=await sales_return_finished[_0x2926b8(0xe3)](_0x19cf47),_0x2918f5=await warehouse[_0x2926b8(0xb7)]([{'$match':{'name':_0x30ca8d['ToWarehouse'],'room':_0x30ca8d[_0x2926b8(0xaa)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2926b8(0x95)},'product_stock':{'$first':_0x2926b8(0xbe)},'bay':{'$first':_0x2926b8(0x8c)},'bin':{'$first':_0x2926b8(0x93)},'type':{'$first':_0x2926b8(0xd2)},'floorlevel':{'$first':_0x2926b8(0x92)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x2926b8(0x9b)](_0x2918f5);const _0x55e589=await warehouse[_0x2926b8(0xb7)]([{'$match':{'status':_0x2926b8(0xba),'warehouse_category':_0x2926b8(0x7f)}},{'$group':{'_id':_0x2926b8(0x91),'name':{'$first':_0x2926b8(0x91)}}},{'$sort':{'name':0x1}}]),_0x1da94e=await warehouse[_0x2926b8(0xb7)]([{'$match':{'status':'Enabled','name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x2926b8(0x91)}}},{'$sort':{'name':0x1}}]),_0x3be9fe=await product[_0x2926b8(0xe5)]({});if(_0xf4b86a[0x0][_0x2926b8(0x9f)]=='English\x20(US)'){var _0xbc2e59=users['English'];console[_0x2926b8(0x9b)](_0xbc2e59);}else{if(_0xf4b86a[0x0][_0x2926b8(0x9f)]==_0x2926b8(0x86))var _0xbc2e59=users[_0x2926b8(0x86)];else{if(_0xf4b86a[0x0][_0x2926b8(0x9f)]==_0x2926b8(0xed))var _0xbc2e59=users['German'];else{if(_0xf4b86a[0x0]['language']=='Spanish')var _0xbc2e59=users[_0x2926b8(0xdc)];else{if(_0xf4b86a[0x0][_0x2926b8(0x9f)]=='French')var _0xbc2e59=users[_0x2926b8(0xbd)];else{if(_0xf4b86a[0x0]['language']==_0x2926b8(0x8e))var _0xbc2e59=users['Portuguese'];else{if(_0xf4b86a[0x0][_0x2926b8(0x9f)]==_0x2926b8(0xda))var _0xbc2e59=users[_0x2926b8(0xda)];else{if(_0xf4b86a[0x0][_0x2926b8(0x9f)]==_0x2926b8(0xb4))var _0xbc2e59=users[_0x2926b8(0x80)];}}}}}}}_0x3ff0f2[_0x2926b8(0x88)](_0x2926b8(0xc0),{'success':_0x54c117[_0x2926b8(0xdd)](_0x2926b8(0x9e)),'errors':_0x54c117['flash']('errors'),'role':_0x26885b,'profile':_0x519391,'master_shop':_0xf4b86a,'user':_0x30ca8d,'stock':_0x2918f5,'unit':_0x3be9fe,'language':_0xbc2e59,'warehouses':_0x55e589,'rooms':_0xd703ac,'warehouse_QA':_0x1da94e});}catch(_0x4153d5){console[_0x2926b8(0x9b)](_0x4153d5);}}),router[a0_0x26b3bd(0x96)](a0_0x26b3bd(0xae),auth,async(_0x5a72a2,_0x296517)=>{var _0x715b28=a0_0x26b3bd;if(_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x84)]=='QA')try{const _0x127d70=_0x5a72a2[_0x715b28(0xd9)]['id'],_0x386b52=await sales_return['findOne']({'invoice':_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xb9)]}),_0x15d95c=await warehouse['findOne']({'name':_0x386b52[_0x715b28(0xa6)],'room':_0x386b52[_0x715b28(0xaa)]}),{invoice:_0x34c779,customer:_0x45996b,date:_0x44af59,warehouse_name:_0x42ce74,product_name:_0xc9b2be,primary_code:_0x4b1ea2,secondary_code:_0x5bb9b9,product_code:_0x424b5b,sales_quantity:_0x30536c,stocks:_0x505e89,return_qty:_0x1da499,note:_0xd41ad8,to_warehouse_name_QA:_0x16bf51,to_Room_name_QA:_0x500b63}=_0x5a72a2[_0x715b28(0x7b)];if(typeof product_name_QA==_0x715b28(0xc5))var _0x2b2687=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xc7)]],_0x47adbf=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xd1)]],_0x167bca=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xe9)]],_0x453a2f=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xa8)]],_0x1177cb=[_0x5a72a2[_0x715b28(0x7b)]['sales_quantity_QA']],_0x107960=[_0x5a72a2['body']['stocks_QA']],_0x1e7c38=[_0x5a72a2['body'][_0x715b28(0xa9)]];else var _0x2b2687=[..._0x5a72a2[_0x715b28(0x7b)]['product_name_QA']],_0x47adbf=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xd1)]],_0x167bca=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xe9)]],_0x453a2f=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xa8)]],_0x1177cb=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xc2)]],_0x107960=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xd3)]],_0x1e7c38=[..._0x5a72a2['body'][_0x715b28(0xa9)]];const _0x1cfd55=_0x2b2687['map'](_0x1ae0ff=>{return _0x1ae0ff={'product_name':_0x1ae0ff};});_0x47adbf[_0x715b28(0x75)]((_0x19730d,_0x5f055a)=>{var _0x376a5f=_0x715b28;_0x1cfd55[_0x5f055a][_0x376a5f(0x90)]=_0x19730d;}),_0x167bca[_0x715b28(0x75)]((_0x4c9f63,_0x51bcb8)=>{var _0x4ce70=_0x715b28;_0x1cfd55[_0x51bcb8][_0x4ce70(0xcf)]=_0x4c9f63;}),_0x453a2f[_0x715b28(0x75)]((_0x299c06,_0x4e12b0)=>{var _0x51ea56=_0x715b28;_0x1cfd55[_0x4e12b0][_0x51ea56(0x94)]=_0x299c06;}),_0x1177cb[_0x715b28(0x75)]((_0x39dd92,_0x42cb57)=>{_0x1cfd55[_0x42cb57]['sale_qty']=_0x39dd92;}),_0x107960[_0x715b28(0x75)]((_0x588320,_0x46b4fa)=>{var _0x231249=_0x715b28;_0x1cfd55[_0x46b4fa][_0x231249(0xe0)]=_0x588320;}),_0x1e7c38['forEach']((_0x107aca,_0x20fdf0)=>{_0x1cfd55[_0x20fdf0]['return_qty']=_0x107aca;}),_0x386b52['return_sale_QA'][_0x715b28(0x75)](_0x54934e=>{var _0x2c5943=_0x715b28;const _0x58be8b=_0x15d95c[_0x2c5943(0xc3)][_0x2c5943(0x7d)](_0x395532=>{var _0x390b9c=_0x2c5943;_0x395532[_0x390b9c(0xa2)]==_0x54934e[_0x390b9c(0xa2)]&&(_0x395532[_0x390b9c(0xee)]=parseInt(_0x395532[_0x390b9c(0xee)])+parseInt(_0x54934e[_0x390b9c(0xcc)]));});}),await _0x15d95c[_0x715b28(0xbb)](),_0x386b52[_0x715b28(0xb9)]=_0x34c779,_0x386b52[_0x715b28(0xb2)]=_0x45996b,_0x386b52[_0x715b28(0xe8)]=_0x44af59,_0x386b52[_0x715b28(0xcb)]=_0x42ce74,_0x386b52[_0x715b28(0x8a)]=_0x1cfd55,_0x386b52[_0x715b28(0xa1)]=_0xd41ad8,_0x386b52['ToWarehouse']=_0x16bf51,_0x386b52[_0x715b28(0xaa)]=_0x500b63;const _0x227794=await _0x386b52[_0x715b28(0xbb)](),_0x319e37=await c_payment_data[_0x715b28(0x83)]({'invoice':_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xb9)],'reason':_0x715b28(0xa3)});_0x319e37[_0x715b28(0xad)]=_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xad)],_0x319e37[_0x715b28(0xe8)]=_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xe8)],await _0x319e37[_0x715b28(0xbb)](),_0x5a72a2[_0x715b28(0xdd)](_0x715b28(0x9e),_0x715b28(0xe4)),_0x296517[_0x715b28(0xe1)](_0x715b28(0xd4));}catch(_0x477a7a){console['log'](_0x477a7a),_0x296517['status'](0xc8)[_0x715b28(0x9c)]({'message':_0x477a7a[_0x715b28(0xc9)]});}else try{const _0xfaaf3c=_0x5a72a2[_0x715b28(0xd9)]['id'];console['log'](_0xfaaf3c);const _0xe1466=await sales_return[_0x715b28(0x83)]({'invoice':_0x5a72a2['body'][_0x715b28(0xb9)]});console[_0x715b28(0x9b)](_0x715b28(0xab),_0xe1466);const _0x5e6a0c=await warehouse[_0x715b28(0x83)]({'name':_0xe1466['ToWarehouse'],'room':_0xe1466[_0x715b28(0xaa)]});console[_0x715b28(0x9b)](_0x715b28(0x81),_0x5e6a0c);const {invoice:_0x377865,customer:_0x33e0d8,date:_0x5a7f50,warehouse_name:_0x39a363,product_name:_0x36474c,primary_code:_0x5c40bd,secondary_code:_0x2e8eb0,product_code:_0x43b89e,sales_quantity:_0xb88f1b,stocks:_0x43166d,return_qty:_0x439236,note:_0x3abffc,to_warehouse_name:_0x308456,to_Room_name:_0x2eb1ff}=_0x5a72a2[_0x715b28(0x7b)];console[_0x715b28(0x9b)](_0x5a72a2[_0x715b28(0x7b)]);if(typeof _0x36474c==_0x715b28(0xc5))var _0x2b2687=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xa2)]],_0x47adbf=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x90)]],_0x167bca=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xcf)]],_0x453a2f=[_0x5a72a2['body'][_0x715b28(0x94)]],_0x1177cb=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x78)]],_0x107960=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x7a)]],_0x1e7c38=[_0x5a72a2[_0x715b28(0x7b)]['return_qty']],_0x2cba40=[_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xb3)]],_0x5dede8=[_0x5a72a2['body'][_0x715b28(0xd8)]],_0x3b74a5=[_0x5a72a2['body'][_0x715b28(0x7e)]],_0x11c30c=[_0x5a72a2[_0x715b28(0x7b)]['floorlevel']];else var _0x2b2687=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xa2)]],_0x47adbf=[..._0x5a72a2['body']['primary_code']],_0x167bca=[..._0x5a72a2['body'][_0x715b28(0xcf)]],_0x453a2f=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x94)]],_0x1177cb=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x78)]],_0x107960=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x7a)]],_0x1e7c38=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xcc)]],_0x2cba40=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xb3)]],_0x5dede8=[..._0x5a72a2['body'][_0x715b28(0xd8)]],_0x3b74a5=[..._0x5a72a2[_0x715b28(0x7b)][_0x715b28(0x7e)]],_0x11c30c=[..._0x5a72a2['body'][_0x715b28(0xdf)]];const _0x5c7a00=_0x2b2687[_0x715b28(0x7d)](_0x343f64=>{return _0x343f64={'product_name':_0x343f64};});_0x47adbf[_0x715b28(0x75)]((_0x322d1f,_0x5d9f41)=>{var _0x201af0=_0x715b28;_0x5c7a00[_0x5d9f41][_0x201af0(0x90)]=_0x322d1f;}),_0x167bca[_0x715b28(0x75)]((_0x38518c,_0x33a979)=>{var _0x4d5ea2=_0x715b28;_0x5c7a00[_0x33a979][_0x4d5ea2(0xcf)]=_0x38518c;}),_0x453a2f[_0x715b28(0x75)]((_0x38fa73,_0x4b8f76)=>{var _0x4ce908=_0x715b28;_0x5c7a00[_0x4b8f76][_0x4ce908(0x94)]=_0x38fa73;}),_0x1177cb['forEach']((_0x275a48,_0x7d77eb)=>{_0x5c7a00[_0x7d77eb]['sale_qty']=_0x275a48;}),_0x107960[_0x715b28(0x75)]((_0x3c662e,_0x58b42b)=>{var _0x2048fe=_0x715b28;_0x5c7a00[_0x58b42b][_0x2048fe(0xe0)]=_0x3c662e;}),_0x1e7c38['forEach']((_0xfc844f,_0x312866)=>{_0x5c7a00[_0x312866]['return_qty']=_0xfc844f;}),_0x2cba40['forEach']((_0x5d31cc,_0x399cdb)=>{var _0x2acab8=_0x715b28;_0x5c7a00[_0x399cdb][_0x2acab8(0xb3)]=_0x5d31cc;}),_0x5dede8[_0x715b28(0x75)]((_0x52c60d,_0x401dea)=>{var _0x30455b=_0x715b28;_0x5c7a00[_0x401dea][_0x30455b(0xd8)]=_0x52c60d;}),_0x3b74a5[_0x715b28(0x75)]((_0x3f330a,_0x501e82)=>{var _0x52fa9e=_0x715b28;_0x5c7a00[_0x501e82][_0x52fa9e(0xd5)]=_0x3f330a;}),_0x11c30c[_0x715b28(0x75)]((_0x283d95,_0x362f63)=>{var _0x5840da=_0x715b28;_0x5c7a00[_0x362f63][_0x5840da(0xdf)]=_0x283d95;});var _0xec5f65=0x0;_0x5c7a00[_0x715b28(0x75)](_0x33bb04=>{var _0x3d33b5=_0x715b28;console[_0x3d33b5(0x9b)]('foreach\x20newproduct',_0x33bb04),(parseInt(_0x33bb04[_0x3d33b5(0xd6)])<parseInt(_0x33bb04[_0x3d33b5(0xcc)])||parseInt(_0x33bb04[_0x3d33b5(0xe0)])<parseInt(_0x33bb04[_0x3d33b5(0xcc)])&&parseInt(_0x33bb04[_0x3d33b5(0xd6)])>parseInt(_0x33bb04[_0x3d33b5(0xcc)])||parseInt(_0x33bb04[_0x3d33b5(0xcc)])==0x0)&&_0xec5f65++;});if(_0xec5f65!=0x0)return _0x5a72a2[_0x715b28(0xdd)](_0x715b28(0xc1),'Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x296517['redirect'](_0x715b28(0xa7));_0xe1466[_0x715b28(0x8b)][_0x715b28(0x75)](_0x59df68=>{var _0x3d541d=_0x715b28;const _0x22ae00=_0x5e6a0c['product_details'][_0x3d541d(0x7d)](_0x3397ca=>{var _0x5d0a2d=_0x3d541d;_0x3397ca[_0x5d0a2d(0xa2)]==_0x59df68['product_name']&&_0x3397ca[_0x5d0a2d(0xdf)]==_0x59df68['floorlevel']&&_0x3397ca[_0x5d0a2d(0xd5)]==_0x59df68['type']&&_0x3397ca[_0x5d0a2d(0xd8)]==_0x59df68[_0x5d0a2d(0xd8)]&&_0x3397ca[_0x5d0a2d(0xb3)]==_0x59df68[_0x5d0a2d(0xb3)]&&(_0x3397ca['product_stock']=parseInt(_0x3397ca['product_stock'])+parseInt(_0x59df68[_0x5d0a2d(0xcc)]));});}),console[_0x715b28(0x9b)](_0x715b28(0x81),_0x5e6a0c),await _0x5e6a0c['save'](),_0xe1466[_0x715b28(0xb9)]=_0x377865,_0xe1466['customer']=_0x33e0d8,_0xe1466[_0x715b28(0xe8)]=_0x5a7f50,_0xe1466[_0x715b28(0xcb)]=_0x39a363,_0xe1466[_0x715b28(0x8b)]=_0x5c7a00,_0xe1466['note']=_0x3abffc,_0xe1466[_0x715b28(0xa6)]=_0x308456,_0xe1466[_0x715b28(0xaa)]=_0x2eb1ff;const _0x3fe003=await _0xe1466['save']();console[_0x715b28(0x9b)](_0x715b28(0x89),_0x3fe003);const _0x137ac3=await c_payment_data[_0x715b28(0x83)]({'invoice':_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xb9)],'reason':_0x715b28(0xa3)});_0x137ac3[_0x715b28(0xad)]=_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xad)],_0x137ac3[_0x715b28(0xe8)]=_0x5a72a2[_0x715b28(0x7b)][_0x715b28(0xe8)],await _0x137ac3['save'](),_0x5a72a2['flash'](_0x715b28(0x9e),_0x715b28(0xe4)),_0x296517['redirect'](_0x715b28(0xbc));}catch(_0x23aba0){console['log'](_0x23aba0),_0x296517[_0x715b28(0xcd)](0xc8)[_0x715b28(0x9c)]({'message':_0x23aba0[_0x715b28(0xc9)]});}}),router['post'](a0_0x26b3bd(0xca),auth,async(_0x15853b,_0x505658)=>{var _0xdd70b9=a0_0x26b3bd;try{const _0x4a06c5=_0x15853b[_0xdd70b9(0xd9)]['id'],{invoice:_0x115adb,customer:_0x273a65,payable_to_customer:_0x5947f1,paid_amount:_0xc63081}=_0x15853b[_0xdd70b9(0x7b)],_0x13beca=await sales_return[_0xdd70b9(0xe3)](_0x4a06c5);console['log']('data',_0x13beca),console[_0xdd70b9(0x9b)](_0x5947f1),console[_0xdd70b9(0x9b)](_0xc63081);var _0x4911cc=_0x5947f1-_0xc63081;console['log'](_0xdd70b9(0xea),_0x4911cc),_0x13beca[_0xdd70b9(0x8d)]=parseFloat(_0xc63081)+parseFloat(_0x13beca[_0xdd70b9(0x8d)]),_0x13beca[_0xdd70b9(0xd7)]=_0x4911cc,console[_0xdd70b9(0x9b)](_0x13beca);const _0x3c8972=await _0x13beca[_0xdd70b9(0xbb)]();console[_0xdd70b9(0x9b)](0x1b207);const _0x3566ab=await c_payment_data[_0xdd70b9(0x83)]({'invoice':_0x15853b[_0xdd70b9(0x7b)][_0xdd70b9(0xb9)],'reason':_0xdd70b9(0xa3)});console[_0xdd70b9(0x9b)](_0xdd70b9(0x97),_0x3566ab),_0x3566ab[_0xdd70b9(0xb8)]=_0x4911cc,await _0x3566ab[_0xdd70b9(0xbb)]();let _0x49dd6f=new Date(),_0x4a1845=('0'+_0x49dd6f[_0xdd70b9(0x9a)]())[_0xdd70b9(0xc6)](-0x2),_0x53afc8=('0'+(_0x49dd6f[_0xdd70b9(0x79)]()+0x1))[_0xdd70b9(0xc6)](-0x2),_0x3c20c6=_0x49dd6f[_0xdd70b9(0xe6)](),_0x3881be=_0x3c20c6+'-'+_0x53afc8+'-'+_0x4a1845;const _0x514e8d=new customer_payment({'invoice':_0x115adb,'date':_0x3c20c6+'-'+_0x53afc8+'-'+_0x4a1845,'customer':_0x273a65,'reason':_0xdd70b9(0x82),'amount':_0xc63081}),_0x21abbd=await _0x514e8d[_0xdd70b9(0xbb)]();_0x15853b[_0xdd70b9(0xdd)]('success','payment\x20successfull'),_0x505658['redirect'](_0xdd70b9(0xbc));}catch(_0x4c6ae0){console[_0xdd70b9(0x9b)](_0x4c6ae0);}}),router[a0_0x26b3bd(0x9d)](a0_0x26b3bd(0x87),auth,async(_0x544e36,_0x546b33)=>{var _0x32f890=a0_0x26b3bd;try{const {username:_0x496da1,email:_0x43649f,role:_0x56f149}=_0x544e36[_0x32f890(0xa4)],_0x100985=_0x544e36[_0x32f890(0xa4)],_0x49e95d=await profile[_0x32f890(0x83)]({'email':_0x100985['email']}),_0x26718e=await master_shop[_0x32f890(0xe5)]();console[_0x32f890(0x9b)]('master',_0x26718e);const _0x2a4acf=_0x544e36[_0x32f890(0xd9)]['id'],_0x465715=await sales_return['findById'](_0x2a4acf);console[_0x32f890(0x9b)](_0x465715);const _0x1c3b35=await customer[_0x32f890(0x83)]({'name':_0x465715[_0x32f890(0xb2)]});console[_0x32f890(0x9b)](_0x1c3b35);if(_0x26718e[0x0][_0x32f890(0x9f)]==_0x32f890(0xe2)){var _0x42a4b5=users[_0x32f890(0x77)];console[_0x32f890(0x9b)](_0x42a4b5);}else{if(_0x26718e[0x0][_0x32f890(0x9f)]==_0x32f890(0x86))var _0x42a4b5=users[_0x32f890(0x86)];else{if(_0x26718e[0x0][_0x32f890(0x9f)]==_0x32f890(0xed))var _0x42a4b5=users['German'];else{if(_0x26718e[0x0][_0x32f890(0x9f)]=='Spanish')var _0x42a4b5=users['Spanish'];else{if(_0x26718e[0x0][_0x32f890(0x9f)]==_0x32f890(0xbd))var _0x42a4b5=users[_0x32f890(0xbd)];else{if(_0x26718e[0x0][_0x32f890(0x9f)]==_0x32f890(0x8e))var _0x42a4b5=users['Portuguese'];else{if(_0x26718e[0x0]['language']=='Chinese')var _0x42a4b5=users[_0x32f890(0xda)];else{if(_0x26718e[0x0][_0x32f890(0x9f)]=='Arabic\x20(ae)')var _0x42a4b5=users['Arabic'];}}}}}}}_0x546b33[_0x32f890(0x88)]('sales_return_invoice',{'success':_0x544e36['flash']('success'),'errors':_0x544e36[_0x32f890(0xdd)](_0x32f890(0xc1)),'role':_0x100985,'profile':_0x49e95d,'master_shop':_0x26718e,'customers':_0x1c3b35,'sales':_0x465715,'language':_0x42a4b5});}catch(_0x3f9f12){console['log'](_0x3f9f12);}}),module[a0_0x26b3bd(0xb6)]=router;