function a0_0x35fa(){var _0x4bd2a3=['save','body','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','type','post','customer','/sales_return_finished/view','$product_details.floorlevel','product_name','1776257XrATMy','product_code','bay','params','return_qty','paid_amount','product_name_QA','secondary_code','invoice','forEach','../public/language/languages.json','Portuguese','findById','$customer_docs','getFullYear','back','Hindi','stocks','slice','QA\x20Warehouse','old_data','stock','amount','findOne','ToWarehouse','sales_quantity','success','types','$product_details._id','name','Portuguese\x20(BR)','data','return_sale_QA','Enabled','due_amount','errors','$name','$product_details.secondary_code','flash','master','English\x20(US)','$product_details.bin','626750Nvbqxt','customer_docs','product_details','warehouse_name','log','English','map','4730050XzemnA','6WfWBrR','ToRoom','Arabic','Return\x20Rooms','../middleware/auth','$product_details.rack','/sales_return/view','message','old_warehouse_data','date','sales_quantity_QA','/view','c_payment','Spanish','German','return_qty_QA','Chinese','bin','user','1111862BFHNQk','redirect','/invoice/:id','status','purchase\x20return\x20successfully','sale_qty','new\x20new_data','return_sale','return_sale_edit_finished','9417609SPBxDx','Sale\x20Return','sales_return_finished','6058056khwnlx','foreach\x20newproduct','note','string','$product_details.storage','Returned\x20Payment\x20For\x20Sale\x20Return','$product_details.product_stock','payment\x20successfull','floorlevel','$product_details.product_code','867172RSCtUt','product_code_QA','Arabic\x20(ae)','json','primary_code_QA','Finished\x20Goods','stocks_QA','product_stock','suppliers','2BXLPJP','../models/all_models','$product_details.product_name','find','aggregate','secondary_code_QA','getDate','primary_code','French','/view/:id','language','email','render','exports','6jUkgaE','get'];a0_0x35fa=function(){return _0x4bd2a3;};return a0_0x35fa();}function a0_0xdee3(_0x16314f,_0x223801){var _0x35faec=a0_0x35fa();return a0_0xdee3=function(_0xdee3c3,_0x22e5ea){_0xdee3c3=_0xdee3c3-0x1c9;var _0xe8bd69=_0x35faec[_0xdee3c3];return _0xe8bd69;},a0_0xdee3(_0x16314f,_0x223801);}var a0_0x1854ec=a0_0xdee3;(function(_0xad431d,_0x1480e9){var _0x49d5a8=a0_0xdee3,_0x310259=_0xad431d();while(!![]){try{var _0x2e1b35=-parseInt(_0x49d5a8(0x233))/0x1*(-parseInt(_0x49d5a8(0x1d5))/0x2)+-parseInt(_0x49d5a8(0x220))/0x3*(-parseInt(_0x49d5a8(0x1cc))/0x4)+-parseInt(_0x49d5a8(0x21f))/0x5+parseInt(_0x49d5a8(0x1e3))/0x6*(-parseInt(_0x49d5a8(0x1ee))/0x7)+-parseInt(_0x49d5a8(0x23f))/0x8+parseInt(_0x49d5a8(0x23c))/0x9+-parseInt(_0x49d5a8(0x218))/0xa;if(_0x2e1b35===_0x1480e9)break;else _0x310259['push'](_0x310259['shift']());}catch(_0x4d2ccd){_0x310259['push'](_0x310259['shift']());}}}(a0_0x35fa,0x8bafc));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x1854ec(0x1d6)),auth=require(a0_0x1854ec(0x224)),users=require(a0_0x1854ec(0x1f8));router['get'](a0_0x1854ec(0x22b),auth,async(_0x117070,_0x483f94)=>{var _0x58aebb=a0_0x1854ec;try{const {username:_0x4857b9,email:_0x48d0b9,role:_0x11b6ad}=_0x117070['user'],_0x4ae28d=_0x117070['user'],_0x312858=await profile[_0x58aebb(0x205)]({'email':_0x4ae28d[_0x58aebb(0x1e0)]}),_0x2dfc8e=await master_shop['find'](),_0x2b3a87=await sales_return_finished[_0x58aebb(0x1d9)]([{'$lookup':{'from':'customers','localField':_0x58aebb(0x1ea),'foreignField':_0x58aebb(0x20b),'as':_0x58aebb(0x219)}},{'$unwind':_0x58aebb(0x1fb)}]);if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]==_0x58aebb(0x216)){var _0x2c27f5=users['English'];console[_0x58aebb(0x21c)](_0x2c27f5);}else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]=='Hindi')var _0x2c27f5=users[_0x58aebb(0x1fe)];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]==_0x58aebb(0x22e))var _0x2c27f5=users['German'];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]==_0x58aebb(0x22d))var _0x2c27f5=users[_0x58aebb(0x22d)];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]==_0x58aebb(0x1dd))var _0x2c27f5=users[_0x58aebb(0x1dd)];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]=='Portuguese\x20(BR)')var _0x2c27f5=users[_0x58aebb(0x1f9)];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]=='Chinese')var _0x2c27f5=users['Chinese'];else{if(_0x2dfc8e[0x0][_0x58aebb(0x1df)]==_0x58aebb(0x1ce))var _0x2c27f5=users[_0x58aebb(0x222)];}}}}}}}_0x483f94[_0x58aebb(0x1e1)](_0x58aebb(0x23e),{'success':_0x117070[_0x58aebb(0x214)](_0x58aebb(0x208)),'errors':_0x117070[_0x58aebb(0x214)](_0x58aebb(0x211)),'role':_0x4ae28d,'profile':_0x312858,'master_shop':_0x2dfc8e,'user':_0x2b3a87,'language':_0x2c27f5});}catch(_0x2d7123){console[_0x58aebb(0x21c)](_0x2d7123);}}),router[a0_0x1854ec(0x1e4)](a0_0x1854ec(0x1de),auth,async(_0x18605c,_0xeae296)=>{var _0x29a552=a0_0x1854ec;try{const {username:_0x4ac250,email:_0x660c1e,role:_0x294a35}=_0x18605c['user'],_0x1fbe73=_0x18605c['user'],_0x335db2=await profile[_0x29a552(0x205)]({'email':_0x1fbe73[_0x29a552(0x1e0)]}),_0x2ba7b4=await master_shop[_0x29a552(0x1d8)]();console[_0x29a552(0x21c)]('master',_0x2ba7b4);const _0x28175b=_0x18605c['params']['id'];console[_0x29a552(0x21c)](_0x28175b);var _0x5649ac=[_0x29a552(0x223)];const _0x40abfe=await sales_return_finished[_0x29a552(0x1fa)](_0x28175b),_0x14285c=await warehouse[_0x29a552(0x1d9)]([{'$match':{'name':_0x40abfe[_0x29a552(0x206)],'room':_0x40abfe[_0x29a552(0x221)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x29a552(0x20a),'name':{'$first':_0x29a552(0x1d7)},'product_stock':{'$first':_0x29a552(0x245)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x29a552(0x217)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x29a552(0x1ec)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x29a552(0x213)},'product_code':{'$first':_0x29a552(0x1cb)},'storage':{'$first':_0x29a552(0x243)},'rack':{'$first':_0x29a552(0x225)}}}]);console[_0x29a552(0x21c)](_0x14285c);const _0x281dc1=await warehouse[_0x29a552(0x1d9)]([{'$match':{'status':_0x29a552(0x20f),'warehouse_category':_0x29a552(0x1d1)}},{'$group':{'_id':_0x29a552(0x212),'name':{'$first':_0x29a552(0x212)}}},{'$sort':{'name':0x1}}]),_0x44a427=await warehouse[_0x29a552(0x1d9)]([{'$match':{'status':'Enabled','name':_0x29a552(0x201)}},{'$group':{'_id':_0x29a552(0x212),'name':{'$first':_0x29a552(0x212)}}},{'$sort':{'name':0x1}}]),_0x35de71=await product[_0x29a552(0x1d8)]({});if(_0x2ba7b4[0x0][_0x29a552(0x1df)]=='English\x20(US)'){var _0x17cb1a=users[_0x29a552(0x21d)];console[_0x29a552(0x21c)](_0x17cb1a);}else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]==_0x29a552(0x1fe))var _0x17cb1a=users[_0x29a552(0x1fe)];else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]==_0x29a552(0x22e))var _0x17cb1a=users[_0x29a552(0x22e)];else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]==_0x29a552(0x22d))var _0x17cb1a=users[_0x29a552(0x22d)];else{if(_0x2ba7b4[0x0]['language']=='French')var _0x17cb1a=users['French'];else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]==_0x29a552(0x20c))var _0x17cb1a=users['Portuguese'];else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]=='Chinese')var _0x17cb1a=users[_0x29a552(0x230)];else{if(_0x2ba7b4[0x0][_0x29a552(0x1df)]=='Arabic\x20(ae)')var _0x17cb1a=users['Arabic'];}}}}}}}_0xeae296['render'](_0x29a552(0x23b),{'success':_0x18605c['flash'](_0x29a552(0x208)),'errors':_0x18605c[_0x29a552(0x214)](_0x29a552(0x211)),'role':_0x1fbe73,'profile':_0x335db2,'master_shop':_0x2ba7b4,'user':_0x40abfe,'stock':_0x14285c,'unit':_0x35de71,'language':_0x17cb1a,'warehouses':_0x281dc1,'rooms':_0x5649ac,'warehouse_QA':_0x44a427});}catch(_0x341e99){console[_0x29a552(0x21c)](_0x341e99);}}),router[a0_0x1854ec(0x1e9)](a0_0x1854ec(0x1de),auth,async(_0x2dbdea,_0x4209be)=>{var _0x545242=a0_0x1854ec;if(_0x2dbdea[_0x545242(0x1e6)]['for_categorize']=='QA')try{const _0x55e7d4=_0x2dbdea[_0x545242(0x1f1)]['id'],_0xf8e45c=await sales_return[_0x545242(0x205)]({'invoice':_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f6)]}),_0x4e3e65=await warehouse[_0x545242(0x205)]({'name':_0xf8e45c[_0x545242(0x206)],'room':_0xf8e45c[_0x545242(0x221)]}),{invoice:_0x4765dd,customer:_0x5080e1,date:_0x30c2ac,warehouse_name:_0x118f47,product_name:_0x352d98,primary_code:_0x254d4d,secondary_code:_0x18e1c5,product_code:_0x1db477,sales_quantity:_0x39ba0d,stocks:_0x34470c,return_qty:_0x1847ee,note:_0x1b7330,to_warehouse_name_QA:_0x2d6c8e,to_Room_name_QA:_0x416e19}=_0x2dbdea[_0x545242(0x1e6)];if(typeof product_name_QA==_0x545242(0x242))var _0x136dfc=[_0x2dbdea[_0x545242(0x1e6)]['product_name_QA']],_0x28934c=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1d0)]],_0x2433bc=[_0x2dbdea[_0x545242(0x1e6)]['secondary_code_QA']],_0x133277=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1cd)]],_0x5ef055=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x22a)]],_0x5f4301=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1d2)]],_0x1f65a3=[_0x2dbdea['body']['return_qty_QA']];else var _0x136dfc=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f4)]],_0x28934c=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1d0)]],_0x2433bc=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1da)]],_0x133277=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1cd)]],_0x5ef055=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x22a)]],_0x5f4301=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1d2)]],_0x1f65a3=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x22f)]];const _0x193b5a=_0x136dfc[_0x545242(0x21e)](_0x476d9b=>{return _0x476d9b={'product_name':_0x476d9b};});_0x28934c[_0x545242(0x1f7)]((_0x55baaa,_0x2bcf88)=>{var _0x22251e=_0x545242;_0x193b5a[_0x2bcf88][_0x22251e(0x1dc)]=_0x55baaa;}),_0x2433bc[_0x545242(0x1f7)]((_0x14b0a9,_0x243883)=>{var _0x18b2e0=_0x545242;_0x193b5a[_0x243883][_0x18b2e0(0x1f5)]=_0x14b0a9;}),_0x133277[_0x545242(0x1f7)]((_0x3a6009,_0x57ba50)=>{var _0x36ca89=_0x545242;_0x193b5a[_0x57ba50][_0x36ca89(0x1ef)]=_0x3a6009;}),_0x5ef055[_0x545242(0x1f7)]((_0x313ed5,_0x278540)=>{var _0x3b4b8d=_0x545242;_0x193b5a[_0x278540][_0x3b4b8d(0x238)]=_0x313ed5;}),_0x5f4301[_0x545242(0x1f7)]((_0x554872,_0x445d04)=>{_0x193b5a[_0x445d04]['stock']=_0x554872;}),_0x1f65a3[_0x545242(0x1f7)]((_0x1826d4,_0x2abc11)=>{_0x193b5a[_0x2abc11]['return_qty']=_0x1826d4;}),_0xf8e45c[_0x545242(0x20e)][_0x545242(0x1f7)](_0x304bf7=>{var _0x5562bd=_0x545242;const _0x95ba7d=_0x4e3e65['product_details'][_0x5562bd(0x21e)](_0x2b4b93=>{var _0xd37903=_0x5562bd;_0x2b4b93[_0xd37903(0x1ed)]==_0x304bf7[_0xd37903(0x1ed)]&&(_0x2b4b93[_0xd37903(0x1d3)]=parseInt(_0x2b4b93[_0xd37903(0x1d3)])+parseInt(_0x304bf7[_0xd37903(0x1f2)]));});}),await _0x4e3e65['save'](),_0xf8e45c[_0x545242(0x1f6)]=_0x4765dd,_0xf8e45c[_0x545242(0x1ea)]=_0x5080e1,_0xf8e45c[_0x545242(0x229)]=_0x30c2ac,_0xf8e45c[_0x545242(0x21b)]=_0x118f47,_0xf8e45c[_0x545242(0x20e)]=_0x193b5a,_0xf8e45c['note']=_0x1b7330,_0xf8e45c[_0x545242(0x206)]=_0x2d6c8e,_0xf8e45c[_0x545242(0x221)]=_0x416e19;const _0x4f3905=await _0xf8e45c[_0x545242(0x1e5)](),_0x4658d9=await c_payment_data[_0x545242(0x205)]({'invoice':_0x2dbdea[_0x545242(0x1e6)]['invoice'],'reason':_0x545242(0x23d)});_0x4658d9[_0x545242(0x1d4)]=_0x2dbdea[_0x545242(0x1e6)]['suppliers'],_0x4658d9[_0x545242(0x229)]=_0x2dbdea['body'][_0x545242(0x229)],await _0x4658d9[_0x545242(0x1e5)](),_0x2dbdea[_0x545242(0x214)](_0x545242(0x208),_0x545242(0x237)),_0x4209be[_0x545242(0x234)](_0x545242(0x1eb));}catch(_0x384953){console[_0x545242(0x21c)](_0x384953),_0x4209be[_0x545242(0x236)](0xc8)[_0x545242(0x1cf)]({'message':_0x384953[_0x545242(0x227)]});}else try{const _0x595c2d=_0x2dbdea[_0x545242(0x1f1)]['id'];console[_0x545242(0x21c)](_0x595c2d);const _0x54fd1a=await sales_return[_0x545242(0x205)]({'invoice':_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f6)]});console[_0x545242(0x21c)](_0x545242(0x202),_0x54fd1a);const _0x3e09a4=await warehouse[_0x545242(0x205)]({'name':_0x54fd1a[_0x545242(0x206)],'room':_0x54fd1a[_0x545242(0x221)]});console[_0x545242(0x21c)](_0x545242(0x228),_0x3e09a4);const {invoice:_0x3c4747,customer:_0x2537c0,date:_0x343e5e,warehouse_name:_0x14967b,product_name:_0x506415,primary_code:_0x2b070e,secondary_code:_0x32f9d4,product_code:_0x1e6f28,sales_quantity:_0x26ba91,stocks:_0x44ab9d,return_qty:_0xf21e5c,note:_0x460f1d,to_warehouse_name:_0x3fc47e,to_Room_name:_0x38e4dc}=_0x2dbdea['body'];console[_0x545242(0x21c)](_0x2dbdea['body']);if(typeof _0x506415==_0x545242(0x242))var _0x136dfc=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1ed)]],_0x28934c=[_0x2dbdea['body']['primary_code']],_0x2433bc=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f5)]],_0x133277=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1ef)]],_0x5ef055=[_0x2dbdea[_0x545242(0x1e6)]['sales_quantity']],_0x5f4301=[_0x2dbdea['body'][_0x545242(0x1ff)]],_0x1f65a3=[_0x2dbdea['body'][_0x545242(0x1f2)]],_0x5ac032=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f0)]],_0x5c9398=[_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x231)]],_0x35a2e6=[_0x2dbdea['body']['types']],_0x415cda=[_0x2dbdea[_0x545242(0x1e6)]['floorlevel']];else var _0x136dfc=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1ed)]],_0x28934c=[..._0x2dbdea[_0x545242(0x1e6)]['primary_code']],_0x2433bc=[..._0x2dbdea[_0x545242(0x1e6)]['secondary_code']],_0x133277=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1ef)]],_0x5ef055=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x207)]],_0x5f4301=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1ff)]],_0x1f65a3=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1f2)]],_0x5ac032=[..._0x2dbdea[_0x545242(0x1e6)]['bay']],_0x5c9398=[..._0x2dbdea[_0x545242(0x1e6)]['bin']],_0x35a2e6=[..._0x2dbdea[_0x545242(0x1e6)][_0x545242(0x209)]],_0x415cda=[..._0x2dbdea[_0x545242(0x1e6)]['floorlevel']];const _0x479caf=_0x136dfc[_0x545242(0x21e)](_0x319c16=>{return _0x319c16={'product_name':_0x319c16};});_0x28934c['forEach']((_0x37f827,_0x3220c5)=>{_0x479caf[_0x3220c5]['primary_code']=_0x37f827;}),_0x2433bc[_0x545242(0x1f7)]((_0x235059,_0x3a455c)=>{var _0x1cf599=_0x545242;_0x479caf[_0x3a455c][_0x1cf599(0x1f5)]=_0x235059;}),_0x133277['forEach']((_0x589761,_0x3efdba)=>{var _0xbf655c=_0x545242;_0x479caf[_0x3efdba][_0xbf655c(0x1ef)]=_0x589761;}),_0x5ef055[_0x545242(0x1f7)]((_0x1bd68c,_0x141874)=>{var _0x431141=_0x545242;_0x479caf[_0x141874][_0x431141(0x238)]=_0x1bd68c;}),_0x5f4301['forEach']((_0x2fa5f5,_0x291e9b)=>{var _0x2b195d=_0x545242;_0x479caf[_0x291e9b][_0x2b195d(0x203)]=_0x2fa5f5;}),_0x1f65a3['forEach']((_0x4188b2,_0x2112e5)=>{var _0x4ffe09=_0x545242;_0x479caf[_0x2112e5][_0x4ffe09(0x1f2)]=_0x4188b2;}),_0x5ac032[_0x545242(0x1f7)]((_0x3495ae,_0x189b15)=>{_0x479caf[_0x189b15]['bay']=_0x3495ae;}),_0x5c9398[_0x545242(0x1f7)]((_0x2b1e8a,_0x6587b4)=>{var _0x4e4019=_0x545242;_0x479caf[_0x6587b4][_0x4e4019(0x231)]=_0x2b1e8a;}),_0x35a2e6['forEach']((_0x3d4c96,_0x596ec4)=>{var _0x885471=_0x545242;_0x479caf[_0x596ec4][_0x885471(0x1e8)]=_0x3d4c96;}),_0x415cda[_0x545242(0x1f7)]((_0x5bd1c2,_0x5d8456)=>{var _0x309899=_0x545242;_0x479caf[_0x5d8456][_0x309899(0x1ca)]=_0x5bd1c2;});var _0x4e1851=0x0;_0x479caf['forEach'](_0x52b162=>{var _0x422ced=_0x545242;console[_0x422ced(0x21c)](_0x422ced(0x240),_0x52b162),(parseInt(_0x52b162[_0x422ced(0x238)])<parseInt(_0x52b162[_0x422ced(0x1f2)])||parseInt(_0x52b162[_0x422ced(0x203)])<parseInt(_0x52b162[_0x422ced(0x1f2)])&&parseInt(_0x52b162[_0x422ced(0x238)])>parseInt(_0x52b162[_0x422ced(0x1f2)])||parseInt(_0x52b162[_0x422ced(0x1f2)])==0x0)&&_0x4e1851++;});if(_0x4e1851!=0x0)return _0x2dbdea[_0x545242(0x214)](_0x545242(0x211),_0x545242(0x1e7)),_0x4209be[_0x545242(0x234)](_0x545242(0x1fd));_0x54fd1a[_0x545242(0x23a)][_0x545242(0x1f7)](_0x28c815=>{var _0x24d75e=_0x545242;const _0x2058cb=_0x3e09a4[_0x24d75e(0x21a)][_0x24d75e(0x21e)](_0x2d4270=>{var _0x18329a=_0x24d75e;_0x2d4270[_0x18329a(0x1ed)]==_0x28c815[_0x18329a(0x1ed)]&&_0x2d4270['floorlevel']==_0x28c815[_0x18329a(0x1ca)]&&_0x2d4270[_0x18329a(0x1e8)]==_0x28c815['type']&&_0x2d4270[_0x18329a(0x231)]==_0x28c815[_0x18329a(0x231)]&&_0x2d4270[_0x18329a(0x1f0)]==_0x28c815['bay']&&(_0x2d4270[_0x18329a(0x1d3)]=parseInt(_0x2d4270[_0x18329a(0x1d3)])+parseInt(_0x28c815['return_qty']));});}),console[_0x545242(0x21c)](_0x545242(0x228),_0x3e09a4),await _0x3e09a4[_0x545242(0x1e5)](),_0x54fd1a['invoice']=_0x3c4747,_0x54fd1a[_0x545242(0x1ea)]=_0x2537c0,_0x54fd1a[_0x545242(0x229)]=_0x343e5e,_0x54fd1a[_0x545242(0x21b)]=_0x14967b,_0x54fd1a[_0x545242(0x23a)]=_0x479caf,_0x54fd1a[_0x545242(0x241)]=_0x460f1d,_0x54fd1a[_0x545242(0x206)]=_0x3fc47e,_0x54fd1a[_0x545242(0x221)]=_0x38e4dc;const _0x456929=await _0x54fd1a[_0x545242(0x1e5)]();console[_0x545242(0x21c)](_0x545242(0x239),_0x456929);const _0x1f65ca=await c_payment_data[_0x545242(0x205)]({'invoice':_0x2dbdea['body'][_0x545242(0x1f6)],'reason':_0x545242(0x23d)});_0x1f65ca[_0x545242(0x1d4)]=_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x1d4)],_0x1f65ca[_0x545242(0x229)]=_0x2dbdea[_0x545242(0x1e6)][_0x545242(0x229)],await _0x1f65ca['save'](),_0x2dbdea['flash'](_0x545242(0x208),_0x545242(0x237)),_0x4209be['redirect'](_0x545242(0x226));}catch(_0x1e0d12){console[_0x545242(0x21c)](_0x1e0d12),_0x4209be['status'](0xc8)[_0x545242(0x1cf)]({'message':_0x1e0d12[_0x545242(0x227)]});}}),router[a0_0x1854ec(0x1e9)]('/give_payment/:id',auth,async(_0x550bfe,_0x33067f)=>{var _0x6cc979=a0_0x1854ec;try{const _0x13bb71=_0x550bfe[_0x6cc979(0x1f1)]['id'],{invoice:_0x26721c,customer:_0x649500,payable_to_customer:_0x10508f,paid_amount:_0x43ecd7}=_0x550bfe[_0x6cc979(0x1e6)],_0x40e1df=await sales_return[_0x6cc979(0x1fa)](_0x13bb71);console['log'](_0x6cc979(0x20d),_0x40e1df),console[_0x6cc979(0x21c)](_0x10508f),console[_0x6cc979(0x21c)](_0x43ecd7);var _0x175267=_0x10508f-_0x43ecd7;console['log']('subtract',_0x175267),_0x40e1df[_0x6cc979(0x1f3)]=parseFloat(_0x43ecd7)+parseFloat(_0x40e1df[_0x6cc979(0x1f3)]),_0x40e1df[_0x6cc979(0x210)]=_0x175267,console['log'](_0x40e1df);const _0x473f4a=await _0x40e1df[_0x6cc979(0x1e5)]();console[_0x6cc979(0x21c)](0x1b207);const _0x4c9975=await c_payment_data['findOne']({'invoice':_0x550bfe[_0x6cc979(0x1e6)][_0x6cc979(0x1f6)],'reason':'Sale\x20Return'});console[_0x6cc979(0x21c)](_0x6cc979(0x22c),_0x4c9975),_0x4c9975[_0x6cc979(0x204)]=_0x175267,await _0x4c9975['save']();let _0x4549da=new Date(),_0x37b5d9=('0'+_0x4549da[_0x6cc979(0x1db)]())[_0x6cc979(0x200)](-0x2),_0x2bca8a=('0'+(_0x4549da['getMonth']()+0x1))['slice'](-0x2),_0x392086=_0x4549da[_0x6cc979(0x1fc)](),_0x50d5f9=_0x392086+'-'+_0x2bca8a+'-'+_0x37b5d9;const _0x1d87dd=new customer_payment({'invoice':_0x26721c,'date':_0x392086+'-'+_0x2bca8a+'-'+_0x37b5d9,'customer':_0x649500,'reason':_0x6cc979(0x244),'amount':_0x43ecd7}),_0x4d740f=await _0x1d87dd[_0x6cc979(0x1e5)]();_0x550bfe[_0x6cc979(0x214)](_0x6cc979(0x208),_0x6cc979(0x1c9)),_0x33067f['redirect']('/sales_return/view');}catch(_0x4502dc){console[_0x6cc979(0x21c)](_0x4502dc);}}),router[a0_0x1854ec(0x1e4)](a0_0x1854ec(0x235),auth,async(_0x469718,_0x58d885)=>{var _0x1e078b=a0_0x1854ec;try{const {username:_0x139adf,email:_0x2979ae,role:_0x8f24c7}=_0x469718[_0x1e078b(0x232)],_0x1aedf0=_0x469718['user'],_0x41fe96=await profile[_0x1e078b(0x205)]({'email':_0x1aedf0[_0x1e078b(0x1e0)]}),_0x1dd0ce=await master_shop['find']();console[_0x1e078b(0x21c)](_0x1e078b(0x215),_0x1dd0ce);const _0x56f428=_0x469718[_0x1e078b(0x1f1)]['id'],_0x3b2aaa=await sales_return['findById'](_0x56f428);console['log'](_0x3b2aaa);const _0x9fe932=await customer[_0x1e078b(0x205)]({'name':_0x3b2aaa[_0x1e078b(0x1ea)]});console[_0x1e078b(0x21c)](_0x9fe932);if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]=='English\x20(US)'){var _0x1cbcbb=users['English'];console[_0x1e078b(0x21c)](_0x1cbcbb);}else{if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]=='Hindi')var _0x1cbcbb=users[_0x1e078b(0x1fe)];else{if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]==_0x1e078b(0x22e))var _0x1cbcbb=users[_0x1e078b(0x22e)];else{if(_0x1dd0ce[0x0]['language']==_0x1e078b(0x22d))var _0x1cbcbb=users[_0x1e078b(0x22d)];else{if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]==_0x1e078b(0x1dd))var _0x1cbcbb=users[_0x1e078b(0x1dd)];else{if(_0x1dd0ce[0x0]['language']==_0x1e078b(0x20c))var _0x1cbcbb=users[_0x1e078b(0x1f9)];else{if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]==_0x1e078b(0x230))var _0x1cbcbb=users[_0x1e078b(0x230)];else{if(_0x1dd0ce[0x0][_0x1e078b(0x1df)]==_0x1e078b(0x1ce))var _0x1cbcbb=users['Arabic'];}}}}}}}_0x58d885['render']('sales_return_invoice',{'success':_0x469718['flash']('success'),'errors':_0x469718[_0x1e078b(0x214)](_0x1e078b(0x211)),'role':_0x1aedf0,'profile':_0x41fe96,'master_shop':_0x1dd0ce,'customers':_0x9fe932,'sales':_0x3b2aaa,'language':_0x1cbcbb});}catch(_0x3c519b){console[_0x1e078b(0x21c)](_0x3c519b);}}),module[a0_0x1854ec(0x1e2)]=router;