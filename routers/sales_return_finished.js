function a0_0xc48b(_0x37a4e2,_0x1f62ab){var _0x17fe43=a0_0x17fe();return a0_0xc48b=function(_0xc48bde,_0x2890d2){_0xc48bde=_0xc48bde-0x10b;var _0x1b5e26=_0x17fe43[_0xc48bde];return _0x1b5e26;},a0_0xc48b(_0x37a4e2,_0x1f62ab);}function a0_0x17fe(){var _0x16efb1=['$product_details.product_code','stocks_QA','product_name_QA','secondary_code_QA','ToWarehouse','$product_details._id','due_amount','stock','$product_details.floorlevel','exports','English','forEach','find','return_sale','sale_qty','11FifrOu','body','redirect','user','/give_payment/:id','stocks','Chinese','11922jsoqHd','/view','bin','Spanish','product_details','return_sale_QA','product_code','map','findOne','2223603elyLea','types','Arabic\x20(ae)','type','message','87346ROkPTs','return_sale_edit_finished','German','purchase\x20return\x20successfully','render','Portuguese\x20(BR)','get','secondary_code','/invoice/:id','save','errors','primary_code_QA','success','for_categorize','French','bay','sales_return_finished','master','customer_docs','express','$product_details.primary_code','ToRoom','post','/view/:id','sales_quantity_QA','3756312SAddBF','return_qty_QA','Returned\x20Payment\x20For\x20Sale\x20Return','getDate','subtract','return_qty','English\x20(US)','product_name','customer','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','invoice','44uqyspu','$product_details.product_name','../models/all_models','suppliers','aggregate','getFullYear','Hindi','primary_code','note','$product_details','Arabic','../public/language/languages.json','email','log','$name','$customer_docs','language','1IzhBcr','Enabled','$product_details.type','10145964WfGxZj','payment\x20successfull','Portuguese','Sale\x20Return','$product_details.bay','/sales_return/view','string','back','Finished\x20Goods','warehouse_name','floorlevel','old_data','1039092erVmzP','flash','data','status','new\x20new_data','date','sales_quantity','205745bMCGHn','sales_return_invoice','Router','name','getMonth','findById','12ixeYjR','slice','QA\x20Warehouse','params','$product_details.secondary_code','product_stock','paid_amount','10TZgmne'];a0_0x17fe=function(){return _0x16efb1;};return a0_0x17fe();}var a0_0x7e8d00=a0_0xc48b;(function(_0x5d0577,_0x573d11){var _0x3b6c76=a0_0xc48b,_0x33001e=_0x5d0577();while(!![]){try{var _0x3206a7=-parseInt(_0x3b6c76(0x165))/0x1*(-parseInt(_0x3b6c76(0x174))/0x2)+-parseInt(_0x3b6c76(0x122))/0x3*(-parseInt(_0x3b6c76(0x154))/0x4)+-parseInt(_0x3b6c76(0x17b))/0x5*(parseInt(_0x3b6c76(0x181))/0x6)+-parseInt(_0x3b6c76(0x130))/0x7+parseInt(_0x3b6c76(0x149))/0x8+parseInt(_0x3b6c76(0x12b))/0x9*(parseInt(_0x3b6c76(0x10b))/0xa)+parseInt(_0x3b6c76(0x11b))/0xb*(-parseInt(_0x3b6c76(0x168))/0xc);if(_0x3206a7===_0x573d11)break;else _0x33001e['push'](_0x33001e['shift']());}catch(_0x402961){_0x33001e['push'](_0x33001e['shift']());}}}(a0_0x17fe,0x52e89));const express=require(a0_0x7e8d00(0x143)),app=express(),router=express[a0_0x7e8d00(0x17d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x7e8d00(0x156)),auth=require('../middleware/auth'),users=require(a0_0x7e8d00(0x15f));router['get'](a0_0x7e8d00(0x123),auth,async(_0x20e666,_0x505332)=>{var _0x378e4a=a0_0x7e8d00;try{const {username:_0xe24ebc,email:_0x23fcc0,role:_0x3b04dd}=_0x20e666[_0x378e4a(0x11e)],_0x2367ad=_0x20e666[_0x378e4a(0x11e)],_0x475b5e=await profile[_0x378e4a(0x12a)]({'email':_0x2367ad['email']}),_0x2de7e6=await master_shop[_0x378e4a(0x118)](),_0x107247=await sales_return_finished[_0x378e4a(0x158)]([{'$lookup':{'from':'customers','localField':_0x378e4a(0x151),'foreignField':_0x378e4a(0x17e),'as':_0x378e4a(0x142)}},{'$unwind':_0x378e4a(0x163)}]);if(_0x2de7e6[0x0][_0x378e4a(0x164)]==_0x378e4a(0x14f)){var _0xa3621f=users[_0x378e4a(0x116)];console[_0x378e4a(0x161)](_0xa3621f);}else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]=='Hindi')var _0xa3621f=users[_0x378e4a(0x15a)];else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]==_0x378e4a(0x132))var _0xa3621f=users['German'];else{if(_0x2de7e6[0x0]['language']==_0x378e4a(0x125))var _0xa3621f=users[_0x378e4a(0x125)];else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]==_0x378e4a(0x13e))var _0xa3621f=users[_0x378e4a(0x13e)];else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]==_0x378e4a(0x135))var _0xa3621f=users[_0x378e4a(0x16a)];else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]=='Chinese')var _0xa3621f=users[_0x378e4a(0x121)];else{if(_0x2de7e6[0x0][_0x378e4a(0x164)]==_0x378e4a(0x12d))var _0xa3621f=users[_0x378e4a(0x15e)];}}}}}}}_0x505332[_0x378e4a(0x134)](_0x378e4a(0x140),{'success':_0x20e666['flash']('success'),'errors':_0x20e666[_0x378e4a(0x175)](_0x378e4a(0x13a)),'role':_0x2367ad,'profile':_0x475b5e,'master_shop':_0x2de7e6,'user':_0x107247,'language':_0xa3621f});}catch(_0x4738b3){console['log'](_0x4738b3);}}),router['get']('/view/:id',auth,async(_0x1d0313,_0x515928)=>{var _0x20d26a=a0_0x7e8d00;try{const {username:_0xc70780,email:_0x34bda5,role:_0x33b2c7}=_0x1d0313[_0x20d26a(0x11e)],_0x5bcc6b=_0x1d0313[_0x20d26a(0x11e)],_0x10560f=await profile[_0x20d26a(0x12a)]({'email':_0x5bcc6b[_0x20d26a(0x160)]}),_0x18704e=await master_shop[_0x20d26a(0x118)]();console[_0x20d26a(0x161)](_0x20d26a(0x141),_0x18704e);const _0x5a469f=_0x1d0313['params']['id'];console[_0x20d26a(0x161)](_0x5a469f);var _0x4dd339=['Return\x20Rooms'];const _0xdd193=await sales_return_finished[_0x20d26a(0x180)](_0x5a469f),_0x336829=await warehouse[_0x20d26a(0x158)]([{'$match':{'name':_0xdd193[_0x20d26a(0x110)],'room':_0xdd193[_0x20d26a(0x145)]}},{'$unwind':_0x20d26a(0x15d)},{'$group':{'_id':_0x20d26a(0x111),'name':{'$first':_0x20d26a(0x155)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x20d26a(0x16c)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x20d26a(0x167)},'floorlevel':{'$first':_0x20d26a(0x114)},'primary_code':{'$first':_0x20d26a(0x144)},'secondary_code':{'$first':_0x20d26a(0x185)},'product_code':{'$first':_0x20d26a(0x10c)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x20d26a(0x161)](_0x336829);const _0x250490=await warehouse[_0x20d26a(0x158)]([{'$match':{'status':_0x20d26a(0x166),'warehouse_category':_0x20d26a(0x170)}},{'$group':{'_id':_0x20d26a(0x162),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x5778a7=await warehouse[_0x20d26a(0x158)]([{'$match':{'status':_0x20d26a(0x166),'name':_0x20d26a(0x183)}},{'$group':{'_id':'$name','name':{'$first':_0x20d26a(0x162)}}},{'$sort':{'name':0x1}}]),_0x4313a4=await product[_0x20d26a(0x118)]({});if(_0x18704e[0x0][_0x20d26a(0x164)]==_0x20d26a(0x14f)){var _0x2221c2=users[_0x20d26a(0x116)];console['log'](_0x2221c2);}else{if(_0x18704e[0x0][_0x20d26a(0x164)]==_0x20d26a(0x15a))var _0x2221c2=users[_0x20d26a(0x15a)];else{if(_0x18704e[0x0][_0x20d26a(0x164)]==_0x20d26a(0x132))var _0x2221c2=users['German'];else{if(_0x18704e[0x0]['language']=='Spanish')var _0x2221c2=users[_0x20d26a(0x125)];else{if(_0x18704e[0x0][_0x20d26a(0x164)]=='French')var _0x2221c2=users[_0x20d26a(0x13e)];else{if(_0x18704e[0x0][_0x20d26a(0x164)]=='Portuguese\x20(BR)')var _0x2221c2=users['Portuguese'];else{if(_0x18704e[0x0][_0x20d26a(0x164)]=='Chinese')var _0x2221c2=users[_0x20d26a(0x121)];else{if(_0x18704e[0x0][_0x20d26a(0x164)]=='Arabic\x20(ae)')var _0x2221c2=users[_0x20d26a(0x15e)];}}}}}}}_0x515928['render'](_0x20d26a(0x131),{'success':_0x1d0313[_0x20d26a(0x175)]('success'),'errors':_0x1d0313[_0x20d26a(0x175)](_0x20d26a(0x13a)),'role':_0x5bcc6b,'profile':_0x10560f,'master_shop':_0x18704e,'user':_0xdd193,'stock':_0x336829,'unit':_0x4313a4,'language':_0x2221c2,'warehouses':_0x250490,'rooms':_0x4dd339,'warehouse_QA':_0x5778a7});}catch(_0xfd4de5){console[_0x20d26a(0x161)](_0xfd4de5);}}),router[a0_0x7e8d00(0x146)](a0_0x7e8d00(0x147),auth,async(_0x364a11,_0x3db82c)=>{var _0x32f84d=a0_0x7e8d00;if(_0x364a11['body'][_0x32f84d(0x13d)]=='QA')try{const _0x2d022e=_0x364a11[_0x32f84d(0x184)]['id'],_0x2cb3f0=await sales_return[_0x32f84d(0x12a)]({'invoice':_0x364a11['body'][_0x32f84d(0x153)]}),_0x1700c4=await warehouse[_0x32f84d(0x12a)]({'name':_0x2cb3f0['ToWarehouse'],'room':_0x2cb3f0[_0x32f84d(0x145)]}),{invoice:_0x1ccb48,customer:_0x25d6f5,date:_0x4d4fe5,warehouse_name:_0x72d95c,product_name:_0x3eb0dc,primary_code:_0x298559,secondary_code:_0x4c382e,product_code:_0x47300c,sales_quantity:_0x2a5b69,stocks:_0x283db1,return_qty:_0x3d1ed3,note:_0x492594,to_warehouse_name_QA:_0x3cfab0,to_Room_name_QA:_0x230a3e}=_0x364a11[_0x32f84d(0x11c)];if(typeof product_name_QA==_0x32f84d(0x16e))var _0x17d34f=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x10e)]],_0x268072=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x13b)]],_0x1629d9=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x10f)]],_0x1bd38e=[_0x364a11[_0x32f84d(0x11c)]['product_code_QA']],_0x300840=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x148)]],_0x4d0410=[_0x364a11['body'][_0x32f84d(0x10d)]],_0x259261=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x14a)]];else var _0x17d34f=[..._0x364a11['body']['product_name_QA']],_0x268072=[..._0x364a11['body'][_0x32f84d(0x13b)]],_0x1629d9=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x10f)]],_0x1bd38e=[..._0x364a11['body']['product_code_QA']],_0x300840=[..._0x364a11[_0x32f84d(0x11c)]['sales_quantity_QA']],_0x4d0410=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x10d)]],_0x259261=[..._0x364a11[_0x32f84d(0x11c)]['return_qty_QA']];const _0x32e8d3=_0x17d34f[_0x32f84d(0x129)](_0x3c2127=>{return _0x3c2127={'product_name':_0x3c2127};});_0x268072[_0x32f84d(0x117)]((_0x2a54d6,_0x473714)=>{var _0x3776e0=_0x32f84d;_0x32e8d3[_0x473714][_0x3776e0(0x15b)]=_0x2a54d6;}),_0x1629d9['forEach']((_0x5612b6,_0xf6b483)=>{var _0x3222ab=_0x32f84d;_0x32e8d3[_0xf6b483][_0x3222ab(0x137)]=_0x5612b6;}),_0x1bd38e[_0x32f84d(0x117)]((_0x10c37d,_0x232b41)=>{var _0x2feb5b=_0x32f84d;_0x32e8d3[_0x232b41][_0x2feb5b(0x128)]=_0x10c37d;}),_0x300840[_0x32f84d(0x117)]((_0x310515,_0x4521e3)=>{_0x32e8d3[_0x4521e3]['sale_qty']=_0x310515;}),_0x4d0410[_0x32f84d(0x117)]((_0x43731f,_0x260b65)=>{var _0x57cc7b=_0x32f84d;_0x32e8d3[_0x260b65][_0x57cc7b(0x113)]=_0x43731f;}),_0x259261[_0x32f84d(0x117)]((_0x31e53e,_0x51e4bf)=>{var _0x425eb5=_0x32f84d;_0x32e8d3[_0x51e4bf][_0x425eb5(0x14e)]=_0x31e53e;}),_0x2cb3f0['return_sale_QA'][_0x32f84d(0x117)](_0xee53df=>{var _0x51693f=_0x32f84d;const _0x52c8b1=_0x1700c4[_0x51693f(0x126)]['map'](_0x281e73=>{var _0x13e78e=_0x51693f;_0x281e73[_0x13e78e(0x150)]==_0xee53df[_0x13e78e(0x150)]&&(_0x281e73[_0x13e78e(0x186)]=parseInt(_0x281e73[_0x13e78e(0x186)])+parseInt(_0xee53df[_0x13e78e(0x14e)]));});}),await _0x1700c4[_0x32f84d(0x139)](),_0x2cb3f0[_0x32f84d(0x153)]=_0x1ccb48,_0x2cb3f0['customer']=_0x25d6f5,_0x2cb3f0[_0x32f84d(0x179)]=_0x4d4fe5,_0x2cb3f0[_0x32f84d(0x171)]=_0x72d95c,_0x2cb3f0[_0x32f84d(0x127)]=_0x32e8d3,_0x2cb3f0[_0x32f84d(0x15c)]=_0x492594,_0x2cb3f0[_0x32f84d(0x110)]=_0x3cfab0,_0x2cb3f0['ToRoom']=_0x230a3e;const _0x14b322=await _0x2cb3f0[_0x32f84d(0x139)](),_0x42916d=await c_payment_data['findOne']({'invoice':_0x364a11['body'][_0x32f84d(0x153)],'reason':_0x32f84d(0x16b)});_0x42916d['suppliers']=_0x364a11[_0x32f84d(0x11c)]['suppliers'],_0x42916d[_0x32f84d(0x179)]=_0x364a11[_0x32f84d(0x11c)]['date'],await _0x42916d['save'](),_0x364a11[_0x32f84d(0x175)](_0x32f84d(0x13c),_0x32f84d(0x133)),_0x3db82c[_0x32f84d(0x11d)]('/sales_return_finished/view');}catch(_0x20bbc2){console[_0x32f84d(0x161)](_0x20bbc2),_0x3db82c[_0x32f84d(0x177)](0xc8)['json']({'message':_0x20bbc2['message']});}else try{const _0x41ea11=_0x364a11[_0x32f84d(0x184)]['id'];console[_0x32f84d(0x161)](_0x41ea11);const _0x45143f=await sales_return[_0x32f84d(0x12a)]({'invoice':_0x364a11['body'][_0x32f84d(0x153)]});console[_0x32f84d(0x161)](_0x32f84d(0x173),_0x45143f);const _0x399f6e=await warehouse['findOne']({'name':_0x45143f[_0x32f84d(0x110)],'room':_0x45143f[_0x32f84d(0x145)]});console[_0x32f84d(0x161)]('old_warehouse_data',_0x399f6e);const {invoice:_0x17d2a6,customer:_0x2490e0,date:_0x178b01,warehouse_name:_0x3cf7ee,product_name:_0x339739,primary_code:_0x4f199a,secondary_code:_0x26292b,product_code:_0x16c8e1,sales_quantity:_0x3e6330,stocks:_0x3b8be1,return_qty:_0x4f6b7c,note:_0x518ff4,to_warehouse_name:_0x4b2515,to_Room_name:_0x449051}=_0x364a11['body'];console[_0x32f84d(0x161)](_0x364a11[_0x32f84d(0x11c)]);if(typeof _0x339739==_0x32f84d(0x16e))var _0x17d34f=[_0x364a11[_0x32f84d(0x11c)]['product_name']],_0x268072=[_0x364a11['body'][_0x32f84d(0x15b)]],_0x1629d9=[_0x364a11['body']['secondary_code']],_0x1bd38e=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x128)]],_0x300840=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x17a)]],_0x4d0410=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x120)]],_0x259261=[_0x364a11['body']['return_qty']],_0x3d4ca1=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x13f)]],_0x14a740=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x124)]],_0x2f9d0e=[_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x12c)]],_0x42bfd3=[_0x364a11[_0x32f84d(0x11c)]['floorlevel']];else var _0x17d34f=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x150)]],_0x268072=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x15b)]],_0x1629d9=[..._0x364a11[_0x32f84d(0x11c)]['secondary_code']],_0x1bd38e=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x128)]],_0x300840=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x17a)]],_0x4d0410=[..._0x364a11['body']['stocks']],_0x259261=[..._0x364a11['body']['return_qty']],_0x3d4ca1=[..._0x364a11['body'][_0x32f84d(0x13f)]],_0x14a740=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x124)]],_0x2f9d0e=[..._0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x12c)]],_0x42bfd3=[..._0x364a11['body'][_0x32f84d(0x172)]];const _0x51afee=_0x17d34f[_0x32f84d(0x129)](_0x19b5fa=>{return _0x19b5fa={'product_name':_0x19b5fa};});_0x268072['forEach']((_0x31d497,_0x3a228f)=>{var _0x5f464d=_0x32f84d;_0x51afee[_0x3a228f][_0x5f464d(0x15b)]=_0x31d497;}),_0x1629d9[_0x32f84d(0x117)]((_0x5b36cd,_0x76a88f)=>{_0x51afee[_0x76a88f]['secondary_code']=_0x5b36cd;}),_0x1bd38e[_0x32f84d(0x117)]((_0x201762,_0x31949d)=>{var _0xca2aa7=_0x32f84d;_0x51afee[_0x31949d][_0xca2aa7(0x128)]=_0x201762;}),_0x300840[_0x32f84d(0x117)]((_0x5d4b06,_0x5563c6)=>{_0x51afee[_0x5563c6]['sale_qty']=_0x5d4b06;}),_0x4d0410[_0x32f84d(0x117)]((_0x59869d,_0x20f60e)=>{var _0xf59ae9=_0x32f84d;_0x51afee[_0x20f60e][_0xf59ae9(0x113)]=_0x59869d;}),_0x259261['forEach']((_0x38f993,_0x4e8048)=>{var _0x53c4d9=_0x32f84d;_0x51afee[_0x4e8048][_0x53c4d9(0x14e)]=_0x38f993;}),_0x3d4ca1[_0x32f84d(0x117)]((_0x2a674c,_0x5e0485)=>{var _0x20f4bb=_0x32f84d;_0x51afee[_0x5e0485][_0x20f4bb(0x13f)]=_0x2a674c;}),_0x14a740[_0x32f84d(0x117)]((_0x506ee8,_0x1deec8)=>{_0x51afee[_0x1deec8]['bin']=_0x506ee8;}),_0x2f9d0e[_0x32f84d(0x117)]((_0x3c2998,_0x47007e)=>{var _0x27fc56=_0x32f84d;_0x51afee[_0x47007e][_0x27fc56(0x12e)]=_0x3c2998;}),_0x42bfd3[_0x32f84d(0x117)]((_0x44ba9f,_0x4f991a)=>{_0x51afee[_0x4f991a]['floorlevel']=_0x44ba9f;});var _0x2c2459=0x0;_0x51afee[_0x32f84d(0x117)](_0x57a7f0=>{var _0x559f74=_0x32f84d;console['log']('foreach\x20newproduct',_0x57a7f0),(parseInt(_0x57a7f0[_0x559f74(0x11a)])<parseInt(_0x57a7f0[_0x559f74(0x14e)])||parseInt(_0x57a7f0['stock'])<parseInt(_0x57a7f0['return_qty'])&&parseInt(_0x57a7f0[_0x559f74(0x11a)])>parseInt(_0x57a7f0[_0x559f74(0x14e)])||parseInt(_0x57a7f0[_0x559f74(0x14e)])==0x0)&&_0x2c2459++;});if(_0x2c2459!=0x0)return _0x364a11['flash'](_0x32f84d(0x13a),_0x32f84d(0x152)),_0x3db82c[_0x32f84d(0x11d)](_0x32f84d(0x16f));_0x45143f[_0x32f84d(0x119)][_0x32f84d(0x117)](_0x1aac6b=>{var _0x56dd25=_0x32f84d;const _0x361e09=_0x399f6e[_0x56dd25(0x126)][_0x56dd25(0x129)](_0x5ea3ee=>{var _0x4c4009=_0x56dd25;_0x5ea3ee[_0x4c4009(0x150)]==_0x1aac6b['product_name']&&_0x5ea3ee[_0x4c4009(0x172)]==_0x1aac6b[_0x4c4009(0x172)]&&_0x5ea3ee[_0x4c4009(0x12e)]==_0x1aac6b[_0x4c4009(0x12e)]&&_0x5ea3ee[_0x4c4009(0x124)]==_0x1aac6b['bin']&&_0x5ea3ee['bay']==_0x1aac6b['bay']&&(_0x5ea3ee['product_stock']=parseInt(_0x5ea3ee['product_stock'])+parseInt(_0x1aac6b[_0x4c4009(0x14e)]));});}),console[_0x32f84d(0x161)]('old_warehouse_data',_0x399f6e),await _0x399f6e[_0x32f84d(0x139)](),_0x45143f[_0x32f84d(0x153)]=_0x17d2a6,_0x45143f[_0x32f84d(0x151)]=_0x2490e0,_0x45143f[_0x32f84d(0x179)]=_0x178b01,_0x45143f[_0x32f84d(0x171)]=_0x3cf7ee,_0x45143f[_0x32f84d(0x119)]=_0x51afee,_0x45143f[_0x32f84d(0x15c)]=_0x518ff4,_0x45143f['ToWarehouse']=_0x4b2515,_0x45143f['ToRoom']=_0x449051;const _0x27b8f2=await _0x45143f[_0x32f84d(0x139)]();console[_0x32f84d(0x161)](_0x32f84d(0x178),_0x27b8f2);const _0x4375e3=await c_payment_data[_0x32f84d(0x12a)]({'invoice':_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x153)],'reason':'Sale\x20Return'});_0x4375e3[_0x32f84d(0x157)]=_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x157)],_0x4375e3[_0x32f84d(0x179)]=_0x364a11[_0x32f84d(0x11c)][_0x32f84d(0x179)],await _0x4375e3[_0x32f84d(0x139)](),_0x364a11[_0x32f84d(0x175)](_0x32f84d(0x13c),_0x32f84d(0x133)),_0x3db82c[_0x32f84d(0x11d)](_0x32f84d(0x16d));}catch(_0x5bfbd5){console[_0x32f84d(0x161)](_0x5bfbd5),_0x3db82c[_0x32f84d(0x177)](0xc8)['json']({'message':_0x5bfbd5[_0x32f84d(0x12f)]});}}),router[a0_0x7e8d00(0x146)](a0_0x7e8d00(0x11f),auth,async(_0x2b7873,_0x400273)=>{var _0x33ad1b=a0_0x7e8d00;try{const _0x516542=_0x2b7873[_0x33ad1b(0x184)]['id'],{invoice:_0x4f7a2c,customer:_0x20caf6,payable_to_customer:_0x5824e6,paid_amount:_0x8fd9fe}=_0x2b7873['body'],_0x154596=await sales_return['findById'](_0x516542);console[_0x33ad1b(0x161)](_0x33ad1b(0x176),_0x154596),console['log'](_0x5824e6),console[_0x33ad1b(0x161)](_0x8fd9fe);var _0x3f8bf4=_0x5824e6-_0x8fd9fe;console[_0x33ad1b(0x161)](_0x33ad1b(0x14d),_0x3f8bf4),_0x154596['paid_amount']=parseFloat(_0x8fd9fe)+parseFloat(_0x154596[_0x33ad1b(0x187)]),_0x154596[_0x33ad1b(0x112)]=_0x3f8bf4,console[_0x33ad1b(0x161)](_0x154596);const _0x23e905=await _0x154596[_0x33ad1b(0x139)]();console[_0x33ad1b(0x161)](0x1b207);const _0x1c6158=await c_payment_data['findOne']({'invoice':_0x2b7873['body'][_0x33ad1b(0x153)],'reason':_0x33ad1b(0x16b)});console[_0x33ad1b(0x161)]('c_payment',_0x1c6158),_0x1c6158['amount']=_0x3f8bf4,await _0x1c6158['save']();let _0x330141=new Date(),_0x4a01ab=('0'+_0x330141[_0x33ad1b(0x14c)]())['slice'](-0x2),_0x320543=('0'+(_0x330141[_0x33ad1b(0x17f)]()+0x1))[_0x33ad1b(0x182)](-0x2),_0x58bafe=_0x330141[_0x33ad1b(0x159)](),_0x22756c=_0x58bafe+'-'+_0x320543+'-'+_0x4a01ab;const _0x4cf1a8=new customer_payment({'invoice':_0x4f7a2c,'date':_0x58bafe+'-'+_0x320543+'-'+_0x4a01ab,'customer':_0x20caf6,'reason':_0x33ad1b(0x14b),'amount':_0x8fd9fe}),_0x424b71=await _0x4cf1a8[_0x33ad1b(0x139)]();_0x2b7873[_0x33ad1b(0x175)](_0x33ad1b(0x13c),_0x33ad1b(0x169)),_0x400273[_0x33ad1b(0x11d)](_0x33ad1b(0x16d));}catch(_0x4934e8){console[_0x33ad1b(0x161)](_0x4934e8);}}),router[a0_0x7e8d00(0x136)](a0_0x7e8d00(0x138),auth,async(_0x4f9243,_0x33f09b)=>{var _0x9dd309=a0_0x7e8d00;try{const {username:_0x106230,email:_0x1dcf1a,role:_0x1dea2f}=_0x4f9243[_0x9dd309(0x11e)],_0x23aaac=_0x4f9243[_0x9dd309(0x11e)],_0x5673e7=await profile[_0x9dd309(0x12a)]({'email':_0x23aaac[_0x9dd309(0x160)]}),_0x29f9c1=await master_shop[_0x9dd309(0x118)]();console[_0x9dd309(0x161)](_0x9dd309(0x141),_0x29f9c1);const _0xaa36fe=_0x4f9243[_0x9dd309(0x184)]['id'],_0x16a5c3=await sales_return[_0x9dd309(0x180)](_0xaa36fe);console['log'](_0x16a5c3);const _0xdba87c=await customer[_0x9dd309(0x12a)]({'name':_0x16a5c3[_0x9dd309(0x151)]});console[_0x9dd309(0x161)](_0xdba87c);if(_0x29f9c1[0x0]['language']==_0x9dd309(0x14f)){var _0x3a318d=users[_0x9dd309(0x116)];console[_0x9dd309(0x161)](_0x3a318d);}else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]=='Hindi')var _0x3a318d=users[_0x9dd309(0x15a)];else{if(_0x29f9c1[0x0]['language']==_0x9dd309(0x132))var _0x3a318d=users[_0x9dd309(0x132)];else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]==_0x9dd309(0x125))var _0x3a318d=users[_0x9dd309(0x125)];else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]==_0x9dd309(0x13e))var _0x3a318d=users['French'];else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]==_0x9dd309(0x135))var _0x3a318d=users[_0x9dd309(0x16a)];else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]==_0x9dd309(0x121))var _0x3a318d=users['Chinese'];else{if(_0x29f9c1[0x0][_0x9dd309(0x164)]==_0x9dd309(0x12d))var _0x3a318d=users['Arabic'];}}}}}}}_0x33f09b[_0x9dd309(0x134)](_0x9dd309(0x17c),{'success':_0x4f9243[_0x9dd309(0x175)](_0x9dd309(0x13c)),'errors':_0x4f9243[_0x9dd309(0x175)](_0x9dd309(0x13a)),'role':_0x23aaac,'profile':_0x5673e7,'master_shop':_0x29f9c1,'customers':_0xdba87c,'sales':_0x16a5c3,'language':_0x3a318d});}catch(_0x1b999b){console[_0x9dd309(0x161)](_0x1b999b);}}),module[a0_0x7e8d00(0x115)]=router;