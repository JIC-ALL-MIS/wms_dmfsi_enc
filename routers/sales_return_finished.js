var a0_0x4fa4a0=a0_0x1b08;(function(_0x2cb217,_0x2474c9){var _0xc06dc=a0_0x1b08,_0x4ecde6=_0x2cb217();while(!![]){try{var _0x546275=parseInt(_0xc06dc(0x1ec))/0x1+parseInt(_0xc06dc(0x208))/0x2+parseInt(_0xc06dc(0x232))/0x3+-parseInt(_0xc06dc(0x1dd))/0x4+-parseInt(_0xc06dc(0x221))/0x5+-parseInt(_0xc06dc(0x1c0))/0x6*(-parseInt(_0xc06dc(0x1c8))/0x7)+-parseInt(_0xc06dc(0x228))/0x8;if(_0x546275===_0x2474c9)break;else _0x4ecde6['push'](_0x4ecde6['shift']());}catch(_0x1c4c0c){_0x4ecde6['push'](_0x4ecde6['shift']());}}}(a0_0x58c8,0x6e07b));const express=require(a0_0x4fa4a0(0x1f9)),app=express(),router=express[a0_0x4fa4a0(0x1c2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x4fa4a0(0x1d2)),auth=require(a0_0x4fa4a0(0x1c1)),users=require(a0_0x4fa4a0(0x1fe));function a0_0x58c8(){var _0x1854bb=['product_details','product_code','7raeWVU','secondary_code','success','return_qty','sales_return_finished','Hindi','English\x20(US)','post','old_data','paid_amount','../models/all_models','findOne','amount','primary_code','language','map','aggregate','exports','return_qty_QA','master','message','1996248aGsPrY','sale_qty','Arabic\x20(ae)','sales_return_invoice','Chinese','get','/view/:id','redirect','body','user','German','types','/invoice/:id','primary_code_QA','flash','698549LXXVYN','render','getDate','$product_details','$product_details.storage','Finished\x20Goods','back','forEach','$product_details.bay','$customer_docs','params','Portuguese','Sale\x20Return','express','slice','Enabled','product_code_QA','$product_details.type','../public/language/languages.json','$product_details.floorlevel','getFullYear','return_sale','$product_details.rack','note','new\x20new_data','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','findById','c_payment','762860RopFNP','warehouse_name','$name','stocks_QA','name','type','$product_details.secondary_code','json','return_sale_QA','bay','floorlevel','email','suppliers','Arabic','product_name','payment\x20successfull','$product_details.product_code','due_amount','save','product_name_QA','sales_quantity_QA','/give_payment/:id','stock','Return\x20Rooms','English','1758875gmXsWf','ToRoom','old_warehouse_data','errors','return_sale_edit_finished','$product_details._id','sales_quantity','4979832LDzlPV','$product_details.product_name','foreach\x20newproduct','secondary_code_QA','Spanish','date','log','bin','French','status','1913286ypDooi','find','$product_details.primary_code','purchase\x20return\x20successfully','string','product_stock','invoice','/sales_return_finished/view','Returned\x20Payment\x20For\x20Sale\x20Return','subtract','1237548hNQZhb','../middleware/auth','Router','ToWarehouse','stocks','customer'];a0_0x58c8=function(){return _0x1854bb;};return a0_0x58c8();}function a0_0x1b08(_0x37a8df,_0x2a1fcf){var _0x58c8e2=a0_0x58c8();return a0_0x1b08=function(_0x1b0867,_0x1a5328){_0x1b0867=_0x1b0867-0x1bb;var _0x17a64f=_0x58c8e2[_0x1b0867];return _0x17a64f;},a0_0x1b08(_0x37a8df,_0x2a1fcf);}router['get']('/view',auth,async(_0x1b40f6,_0xecab27)=>{var _0x517a01=a0_0x4fa4a0;try{const {username:_0x140724,email:_0x3e7096,role:_0x4c73b7}=_0x1b40f6[_0x517a01(0x1e6)],_0x5bc2b0=_0x1b40f6[_0x517a01(0x1e6)],_0x9fb9b1=await profile[_0x517a01(0x1d3)]({'email':_0x5bc2b0[_0x517a01(0x213)]}),_0x507d7c=await master_shop[_0x517a01(0x233)](),_0x5b60c0=await sales_return_finished[_0x517a01(0x1d8)]([{'$lookup':{'from':'customers','localField':_0x517a01(0x1c5),'foreignField':_0x517a01(0x20c),'as':'customer_docs'}},{'$unwind':_0x517a01(0x1f5)}]);if(_0x507d7c[0x0][_0x517a01(0x1d6)]=='English\x20(US)'){var _0x467a2c=users[_0x517a01(0x220)];console[_0x517a01(0x22e)](_0x467a2c);}else{if(_0x507d7c[0x0][_0x517a01(0x1d6)]==_0x517a01(0x1cd))var _0x467a2c=users[_0x517a01(0x1cd)];else{if(_0x507d7c[0x0][_0x517a01(0x1d6)]=='German')var _0x467a2c=users['German'];else{if(_0x507d7c[0x0][_0x517a01(0x1d6)]==_0x517a01(0x22c))var _0x467a2c=users[_0x517a01(0x22c)];else{if(_0x507d7c[0x0]['language']==_0x517a01(0x230))var _0x467a2c=users[_0x517a01(0x230)];else{if(_0x507d7c[0x0][_0x517a01(0x1d6)]=='Portuguese\x20(BR)')var _0x467a2c=users[_0x517a01(0x1f7)];else{if(_0x507d7c[0x0]['language']==_0x517a01(0x1e1))var _0x467a2c=users[_0x517a01(0x1e1)];else{if(_0x507d7c[0x0]['language']==_0x517a01(0x1df))var _0x467a2c=users[_0x517a01(0x215)];}}}}}}}_0xecab27[_0x517a01(0x1ed)](_0x517a01(0x1cc),{'success':_0x1b40f6[_0x517a01(0x1eb)]('success'),'errors':_0x1b40f6[_0x517a01(0x1eb)]('errors'),'role':_0x5bc2b0,'profile':_0x9fb9b1,'master_shop':_0x507d7c,'user':_0x5b60c0,'language':_0x467a2c});}catch(_0x1c5520){console[_0x517a01(0x22e)](_0x1c5520);}}),router[a0_0x4fa4a0(0x1e2)](a0_0x4fa4a0(0x1e3),auth,async(_0x16b431,_0xf9ec40)=>{var _0x36125b=a0_0x4fa4a0;try{const {username:_0x47f9ca,email:_0x21fd24,role:_0x3669e1}=_0x16b431['user'],_0x1397c7=_0x16b431[_0x36125b(0x1e6)],_0x589925=await profile[_0x36125b(0x1d3)]({'email':_0x1397c7[_0x36125b(0x213)]}),_0x5118e9=await master_shop[_0x36125b(0x233)]();console[_0x36125b(0x22e)](_0x36125b(0x1db),_0x5118e9);const _0x231140=_0x16b431[_0x36125b(0x1f6)]['id'];console[_0x36125b(0x22e)](_0x231140);var _0x4a82e8=[_0x36125b(0x21f)];const _0x107d18=await sales_return_finished['findById'](_0x231140),_0x1b299d=await warehouse[_0x36125b(0x1d8)]([{'$match':{'name':_0x107d18['ToWarehouse'],'room':_0x107d18[_0x36125b(0x222)]}},{'$unwind':_0x36125b(0x1ef)},{'$group':{'_id':_0x36125b(0x226),'name':{'$first':_0x36125b(0x229)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x36125b(0x1f4)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x36125b(0x1fd)},'floorlevel':{'$first':_0x36125b(0x1ff)},'primary_code':{'$first':_0x36125b(0x234)},'secondary_code':{'$first':_0x36125b(0x20e)},'product_code':{'$first':_0x36125b(0x218)},'storage':{'$first':_0x36125b(0x1f0)},'rack':{'$first':_0x36125b(0x202)}}}]);console[_0x36125b(0x22e)](_0x1b299d);const _0x1d7d9f=await warehouse[_0x36125b(0x1d8)]([{'$match':{'status':_0x36125b(0x1fb),'warehouse_category':_0x36125b(0x1f1)}},{'$group':{'_id':_0x36125b(0x20a),'name':{'$first':_0x36125b(0x20a)}}},{'$sort':{'name':0x1}}]),_0x322372=await warehouse['aggregate']([{'$match':{'status':_0x36125b(0x1fb),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x36125b(0x20a),'name':{'$first':_0x36125b(0x20a)}}},{'$sort':{'name':0x1}}]),_0x3ebd88=await product[_0x36125b(0x233)]({});if(_0x5118e9[0x0][_0x36125b(0x1d6)]=='English\x20(US)'){var _0x474aca=users[_0x36125b(0x220)];console['log'](_0x474aca);}else{if(_0x5118e9[0x0]['language']==_0x36125b(0x1cd))var _0x474aca=users[_0x36125b(0x1cd)];else{if(_0x5118e9[0x0][_0x36125b(0x1d6)]==_0x36125b(0x1e7))var _0x474aca=users[_0x36125b(0x1e7)];else{if(_0x5118e9[0x0][_0x36125b(0x1d6)]=='Spanish')var _0x474aca=users[_0x36125b(0x22c)];else{if(_0x5118e9[0x0]['language']==_0x36125b(0x230))var _0x474aca=users[_0x36125b(0x230)];else{if(_0x5118e9[0x0][_0x36125b(0x1d6)]=='Portuguese\x20(BR)')var _0x474aca=users[_0x36125b(0x1f7)];else{if(_0x5118e9[0x0][_0x36125b(0x1d6)]==_0x36125b(0x1e1))var _0x474aca=users['Chinese'];else{if(_0x5118e9[0x0][_0x36125b(0x1d6)]==_0x36125b(0x1df))var _0x474aca=users['Arabic'];}}}}}}}_0xf9ec40[_0x36125b(0x1ed)](_0x36125b(0x225),{'success':_0x16b431['flash'](_0x36125b(0x1ca)),'errors':_0x16b431[_0x36125b(0x1eb)](_0x36125b(0x224)),'role':_0x1397c7,'profile':_0x589925,'master_shop':_0x5118e9,'user':_0x107d18,'stock':_0x1b299d,'unit':_0x3ebd88,'language':_0x474aca,'warehouses':_0x1d7d9f,'rooms':_0x4a82e8,'warehouse_QA':_0x322372});}catch(_0x107a4e){console[_0x36125b(0x22e)](_0x107a4e);}}),router[a0_0x4fa4a0(0x1cf)](a0_0x4fa4a0(0x1e3),auth,async(_0x29e8df,_0x4d6de2)=>{var _0x12bb7a=a0_0x4fa4a0;if(_0x29e8df[_0x12bb7a(0x1e5)]['for_categorize']=='QA')try{const _0x2cbb32=_0x29e8df['params']['id'],_0x2e3155=await sales_return[_0x12bb7a(0x1d3)]({'invoice':_0x29e8df[_0x12bb7a(0x1e5)]['invoice']}),_0x5aef4c=await warehouse[_0x12bb7a(0x1d3)]({'name':_0x2e3155[_0x12bb7a(0x1c3)],'room':_0x2e3155[_0x12bb7a(0x222)]}),{invoice:_0x543a91,customer:_0x4d6d2c,date:_0x3bc731,warehouse_name:_0x65838f,product_name:_0x3f9190,primary_code:_0x3f6eff,secondary_code:_0x28051e,product_code:_0x17007d,sales_quantity:_0x4e875a,stocks:_0x4bbb28,return_qty:_0x5c8830,note:_0x17f75e,to_warehouse_name_QA:_0x3b23cc,to_Room_name_QA:_0x36595d}=_0x29e8df[_0x12bb7a(0x1e5)];if(typeof product_name_QA==_0x12bb7a(0x236))var _0x3f0c16=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x21b)]],_0xfd9d7e=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1ea)]],_0x56e47f=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x22b)]],_0x1e3c60=[_0x29e8df['body']['product_code_QA']],_0x4ba216=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x21c)]],_0x24e4aa=[_0x29e8df['body'][_0x12bb7a(0x20b)]],_0x22a58d=[_0x29e8df['body'][_0x12bb7a(0x1da)]];else var _0x3f0c16=[..._0x29e8df['body'][_0x12bb7a(0x21b)]],_0xfd9d7e=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1ea)]],_0x56e47f=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x22b)]],_0x1e3c60=[..._0x29e8df['body'][_0x12bb7a(0x1fc)]],_0x4ba216=[..._0x29e8df['body'][_0x12bb7a(0x21c)]],_0x24e4aa=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x20b)]],_0x22a58d=[..._0x29e8df['body'][_0x12bb7a(0x1da)]];const _0x9594d7=_0x3f0c16[_0x12bb7a(0x1d7)](_0x502641=>{return _0x502641={'product_name':_0x502641};});_0xfd9d7e[_0x12bb7a(0x1f3)]((_0x4c9ea7,_0x13c3cf)=>{var _0x4f526e=_0x12bb7a;_0x9594d7[_0x13c3cf][_0x4f526e(0x1d5)]=_0x4c9ea7;}),_0x56e47f[_0x12bb7a(0x1f3)]((_0xb09fe4,_0x25d013)=>{_0x9594d7[_0x25d013]['secondary_code']=_0xb09fe4;}),_0x1e3c60[_0x12bb7a(0x1f3)]((_0x7e8a7c,_0xfacc33)=>{var _0x5f4afe=_0x12bb7a;_0x9594d7[_0xfacc33][_0x5f4afe(0x1c7)]=_0x7e8a7c;}),_0x4ba216[_0x12bb7a(0x1f3)]((_0x584c48,_0x3dd148)=>{var _0x34581b=_0x12bb7a;_0x9594d7[_0x3dd148][_0x34581b(0x1de)]=_0x584c48;}),_0x24e4aa[_0x12bb7a(0x1f3)]((_0x5acb57,_0x38cede)=>{var _0x58afb9=_0x12bb7a;_0x9594d7[_0x38cede][_0x58afb9(0x21e)]=_0x5acb57;}),_0x22a58d['forEach']((_0x1780c2,_0x5712fe)=>{var _0x882f2a=_0x12bb7a;_0x9594d7[_0x5712fe][_0x882f2a(0x1cb)]=_0x1780c2;}),_0x2e3155[_0x12bb7a(0x210)][_0x12bb7a(0x1f3)](_0x50acf2=>{var _0x229714=_0x12bb7a;const _0x18c8b3=_0x5aef4c[_0x229714(0x1c6)][_0x229714(0x1d7)](_0x47fcad=>{var _0x5698d2=_0x229714;_0x47fcad[_0x5698d2(0x216)]==_0x50acf2[_0x5698d2(0x216)]&&(_0x47fcad[_0x5698d2(0x1bb)]=parseInt(_0x47fcad[_0x5698d2(0x1bb)])+parseInt(_0x50acf2[_0x5698d2(0x1cb)]));});}),await _0x5aef4c[_0x12bb7a(0x21a)](),_0x2e3155[_0x12bb7a(0x1bc)]=_0x543a91,_0x2e3155['customer']=_0x4d6d2c,_0x2e3155[_0x12bb7a(0x22d)]=_0x3bc731,_0x2e3155[_0x12bb7a(0x209)]=_0x65838f,_0x2e3155[_0x12bb7a(0x210)]=_0x9594d7,_0x2e3155[_0x12bb7a(0x203)]=_0x17f75e,_0x2e3155[_0x12bb7a(0x1c3)]=_0x3b23cc,_0x2e3155[_0x12bb7a(0x222)]=_0x36595d;const _0x351090=await _0x2e3155[_0x12bb7a(0x21a)](),_0x537bbe=await c_payment_data[_0x12bb7a(0x1d3)]({'invoice':_0x29e8df[_0x12bb7a(0x1e5)]['invoice'],'reason':_0x12bb7a(0x1f8)});_0x537bbe[_0x12bb7a(0x214)]=_0x29e8df['body']['suppliers'],_0x537bbe[_0x12bb7a(0x22d)]=_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x22d)],await _0x537bbe['save'](),_0x29e8df[_0x12bb7a(0x1eb)](_0x12bb7a(0x1ca),_0x12bb7a(0x235)),_0x4d6de2[_0x12bb7a(0x1e4)](_0x12bb7a(0x1bd));}catch(_0x8ab99c){console[_0x12bb7a(0x22e)](_0x8ab99c),_0x4d6de2[_0x12bb7a(0x231)](0xc8)['json']({'message':_0x8ab99c[_0x12bb7a(0x1dc)]});}else try{const _0x3d0175=_0x29e8df['params']['id'];console[_0x12bb7a(0x22e)](_0x3d0175);const _0x68c48a=await sales_return['findOne']({'invoice':_0x29e8df[_0x12bb7a(0x1e5)]['invoice']});console['log'](_0x12bb7a(0x1d0),_0x68c48a);const _0x4d0032=await warehouse[_0x12bb7a(0x1d3)]({'name':_0x68c48a[_0x12bb7a(0x1c3)],'room':_0x68c48a[_0x12bb7a(0x222)]});console[_0x12bb7a(0x22e)]('old_warehouse_data',_0x4d0032);const {invoice:_0x3ca1e1,customer:_0x4dfbc5,date:_0xb2dff0,warehouse_name:_0x36603f,product_name:_0x211147,primary_code:_0x3f2408,secondary_code:_0x114f61,product_code:_0x3b8937,sales_quantity:_0x1715d5,stocks:_0x1e0b29,return_qty:_0x330c6,note:_0x4a38fb,to_warehouse_name:_0x1e9393,to_Room_name:_0x4cfaf8}=_0x29e8df[_0x12bb7a(0x1e5)];console[_0x12bb7a(0x22e)](_0x29e8df[_0x12bb7a(0x1e5)]);if(typeof _0x211147==_0x12bb7a(0x236))var _0x3f0c16=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x216)]],_0xfd9d7e=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1d5)]],_0x56e47f=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1c9)]],_0x1e3c60=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1c7)]],_0x4ba216=[_0x29e8df['body'][_0x12bb7a(0x227)]],_0x24e4aa=[_0x29e8df['body']['stocks']],_0x22a58d=[_0x29e8df[_0x12bb7a(0x1e5)]['return_qty']],_0x28bb9c=[_0x29e8df[_0x12bb7a(0x1e5)]['bay']],_0x53adf5=[_0x29e8df['body'][_0x12bb7a(0x22f)]],_0x229022=[_0x29e8df['body'][_0x12bb7a(0x1e8)]],_0x5dcf44=[_0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x212)]];else var _0x3f0c16=[..._0x29e8df['body']['product_name']],_0xfd9d7e=[..._0x29e8df[_0x12bb7a(0x1e5)]['primary_code']],_0x56e47f=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1c9)]],_0x1e3c60=[..._0x29e8df[_0x12bb7a(0x1e5)]['product_code']],_0x4ba216=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x227)]],_0x24e4aa=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1c4)]],_0x22a58d=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1cb)]],_0x28bb9c=[..._0x29e8df[_0x12bb7a(0x1e5)]['bay']],_0x53adf5=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x22f)]],_0x229022=[..._0x29e8df[_0x12bb7a(0x1e5)][_0x12bb7a(0x1e8)]],_0x5dcf44=[..._0x29e8df[_0x12bb7a(0x1e5)]['floorlevel']];const _0x20e018=_0x3f0c16[_0x12bb7a(0x1d7)](_0x7e398d=>{return _0x7e398d={'product_name':_0x7e398d};});_0xfd9d7e[_0x12bb7a(0x1f3)]((_0x27ec96,_0x383472)=>{var _0x568f68=_0x12bb7a;_0x20e018[_0x383472][_0x568f68(0x1d5)]=_0x27ec96;}),_0x56e47f['forEach']((_0xaf533f,_0x564f83)=>{var _0x3b1b0b=_0x12bb7a;_0x20e018[_0x564f83][_0x3b1b0b(0x1c9)]=_0xaf533f;}),_0x1e3c60[_0x12bb7a(0x1f3)]((_0x91ede5,_0x48fffe)=>{var _0x4c2393=_0x12bb7a;_0x20e018[_0x48fffe][_0x4c2393(0x1c7)]=_0x91ede5;}),_0x4ba216[_0x12bb7a(0x1f3)]((_0x4dc6d5,_0x1dfca4)=>{var _0x305c5d=_0x12bb7a;_0x20e018[_0x1dfca4][_0x305c5d(0x1de)]=_0x4dc6d5;}),_0x24e4aa[_0x12bb7a(0x1f3)]((_0x50b29f,_0x78d5e8)=>{var _0x334d45=_0x12bb7a;_0x20e018[_0x78d5e8][_0x334d45(0x21e)]=_0x50b29f;}),_0x22a58d[_0x12bb7a(0x1f3)]((_0xa2fff7,_0x4cdaf8)=>{_0x20e018[_0x4cdaf8]['return_qty']=_0xa2fff7;}),_0x28bb9c[_0x12bb7a(0x1f3)]((_0xb044fd,_0x42101a)=>{var _0x2ad816=_0x12bb7a;_0x20e018[_0x42101a][_0x2ad816(0x211)]=_0xb044fd;}),_0x53adf5[_0x12bb7a(0x1f3)]((_0x3d441d,_0x2b06bd)=>{var _0x29e29e=_0x12bb7a;_0x20e018[_0x2b06bd][_0x29e29e(0x22f)]=_0x3d441d;}),_0x229022[_0x12bb7a(0x1f3)]((_0x437716,_0x4109e6)=>{_0x20e018[_0x4109e6]['type']=_0x437716;}),_0x5dcf44[_0x12bb7a(0x1f3)]((_0x4db838,_0x69eaa)=>{var _0x18502b=_0x12bb7a;_0x20e018[_0x69eaa][_0x18502b(0x212)]=_0x4db838;});var _0x292c1c=0x0;_0x20e018[_0x12bb7a(0x1f3)](_0x4822b5=>{var _0x47ac36=_0x12bb7a;console[_0x47ac36(0x22e)](_0x47ac36(0x22a),_0x4822b5),(parseInt(_0x4822b5[_0x47ac36(0x1de)])<parseInt(_0x4822b5[_0x47ac36(0x1cb)])||parseInt(_0x4822b5[_0x47ac36(0x21e)])<parseInt(_0x4822b5['return_qty'])&&parseInt(_0x4822b5[_0x47ac36(0x1de)])>parseInt(_0x4822b5[_0x47ac36(0x1cb)])||parseInt(_0x4822b5[_0x47ac36(0x1cb)])==0x0)&&_0x292c1c++;});if(_0x292c1c!=0x0)return _0x29e8df[_0x12bb7a(0x1eb)](_0x12bb7a(0x224),_0x12bb7a(0x205)),_0x4d6de2[_0x12bb7a(0x1e4)](_0x12bb7a(0x1f2));_0x68c48a[_0x12bb7a(0x201)]['forEach'](_0x3695d1=>{var _0x4f30d4=_0x12bb7a;const _0x396b87=_0x4d0032[_0x4f30d4(0x1c6)][_0x4f30d4(0x1d7)](_0x563cc9=>{var _0x2e0172=_0x4f30d4;_0x563cc9['product_name']==_0x3695d1[_0x2e0172(0x216)]&&_0x563cc9[_0x2e0172(0x212)]==_0x3695d1[_0x2e0172(0x212)]&&_0x563cc9[_0x2e0172(0x20d)]==_0x3695d1['type']&&_0x563cc9[_0x2e0172(0x22f)]==_0x3695d1[_0x2e0172(0x22f)]&&_0x563cc9[_0x2e0172(0x211)]==_0x3695d1[_0x2e0172(0x211)]&&(_0x563cc9[_0x2e0172(0x1bb)]=parseInt(_0x563cc9[_0x2e0172(0x1bb)])+parseInt(_0x3695d1[_0x2e0172(0x1cb)]));});}),console[_0x12bb7a(0x22e)](_0x12bb7a(0x223),_0x4d0032),await _0x4d0032[_0x12bb7a(0x21a)](),_0x68c48a[_0x12bb7a(0x1bc)]=_0x3ca1e1,_0x68c48a['customer']=_0x4dfbc5,_0x68c48a[_0x12bb7a(0x22d)]=_0xb2dff0,_0x68c48a['warehouse_name']=_0x36603f,_0x68c48a[_0x12bb7a(0x201)]=_0x20e018,_0x68c48a[_0x12bb7a(0x203)]=_0x4a38fb,_0x68c48a[_0x12bb7a(0x1c3)]=_0x1e9393,_0x68c48a[_0x12bb7a(0x222)]=_0x4cfaf8;const _0x23d438=await _0x68c48a[_0x12bb7a(0x21a)]();console[_0x12bb7a(0x22e)](_0x12bb7a(0x204),_0x23d438);const _0x244b5d=await c_payment_data[_0x12bb7a(0x1d3)]({'invoice':_0x29e8df['body']['invoice'],'reason':_0x12bb7a(0x1f8)});_0x244b5d['suppliers']=_0x29e8df['body'][_0x12bb7a(0x214)],_0x244b5d[_0x12bb7a(0x22d)]=_0x29e8df[_0x12bb7a(0x1e5)]['date'],await _0x244b5d[_0x12bb7a(0x21a)](),_0x29e8df[_0x12bb7a(0x1eb)]('success','purchase\x20return\x20successfully'),_0x4d6de2[_0x12bb7a(0x1e4)]('/sales_return/view');}catch(_0xbc24e5){console[_0x12bb7a(0x22e)](_0xbc24e5),_0x4d6de2['status'](0xc8)[_0x12bb7a(0x20f)]({'message':_0xbc24e5['message']});}}),router['post'](a0_0x4fa4a0(0x21d),auth,async(_0x2ded62,_0x4a6573)=>{var _0x3604cc=a0_0x4fa4a0;try{const _0x24b3aa=_0x2ded62[_0x3604cc(0x1f6)]['id'],{invoice:_0x359388,customer:_0x278343,payable_to_customer:_0x226cda,paid_amount:_0x477fc4}=_0x2ded62[_0x3604cc(0x1e5)],_0x4fff38=await sales_return[_0x3604cc(0x206)](_0x24b3aa);console[_0x3604cc(0x22e)]('data',_0x4fff38),console[_0x3604cc(0x22e)](_0x226cda),console['log'](_0x477fc4);var _0x1ab3a2=_0x226cda-_0x477fc4;console['log'](_0x3604cc(0x1bf),_0x1ab3a2),_0x4fff38['paid_amount']=parseFloat(_0x477fc4)+parseFloat(_0x4fff38[_0x3604cc(0x1d1)]),_0x4fff38[_0x3604cc(0x219)]=_0x1ab3a2,console[_0x3604cc(0x22e)](_0x4fff38);const _0x101eee=await _0x4fff38[_0x3604cc(0x21a)]();console['log'](0x1b207);const _0x24b2ab=await c_payment_data[_0x3604cc(0x1d3)]({'invoice':_0x2ded62['body'][_0x3604cc(0x1bc)],'reason':_0x3604cc(0x1f8)});console['log'](_0x3604cc(0x207),_0x24b2ab),_0x24b2ab[_0x3604cc(0x1d4)]=_0x1ab3a2,await _0x24b2ab[_0x3604cc(0x21a)]();let _0x1a86bf=new Date(),_0x5a1dd6=('0'+_0x1a86bf[_0x3604cc(0x1ee)]())['slice'](-0x2),_0xfba4a=('0'+(_0x1a86bf['getMonth']()+0x1))[_0x3604cc(0x1fa)](-0x2),_0x19100a=_0x1a86bf[_0x3604cc(0x200)](),_0x16c74a=_0x19100a+'-'+_0xfba4a+'-'+_0x5a1dd6;const _0x336d57=new customer_payment({'invoice':_0x359388,'date':_0x19100a+'-'+_0xfba4a+'-'+_0x5a1dd6,'customer':_0x278343,'reason':_0x3604cc(0x1be),'amount':_0x477fc4}),_0x4a5ee3=await _0x336d57[_0x3604cc(0x21a)]();_0x2ded62[_0x3604cc(0x1eb)](_0x3604cc(0x1ca),_0x3604cc(0x217)),_0x4a6573[_0x3604cc(0x1e4)]('/sales_return/view');}catch(_0x437160){console['log'](_0x437160);}}),router[a0_0x4fa4a0(0x1e2)](a0_0x4fa4a0(0x1e9),auth,async(_0x171fa2,_0x365a68)=>{var _0x33b574=a0_0x4fa4a0;try{const {username:_0x2b95c5,email:_0x499b24,role:_0x5b171a}=_0x171fa2[_0x33b574(0x1e6)],_0x5eabaf=_0x171fa2[_0x33b574(0x1e6)],_0x2b626e=await profile[_0x33b574(0x1d3)]({'email':_0x5eabaf[_0x33b574(0x213)]}),_0x474e13=await master_shop[_0x33b574(0x233)]();console['log'](_0x33b574(0x1db),_0x474e13);const _0x32fafe=_0x171fa2[_0x33b574(0x1f6)]['id'],_0x306206=await sales_return[_0x33b574(0x206)](_0x32fafe);console['log'](_0x306206);const _0x122dce=await customer[_0x33b574(0x1d3)]({'name':_0x306206['customer']});console[_0x33b574(0x22e)](_0x122dce);if(_0x474e13[0x0][_0x33b574(0x1d6)]==_0x33b574(0x1ce)){var _0x394e9c=users[_0x33b574(0x220)];console['log'](_0x394e9c);}else{if(_0x474e13[0x0][_0x33b574(0x1d6)]=='Hindi')var _0x394e9c=users[_0x33b574(0x1cd)];else{if(_0x474e13[0x0]['language']==_0x33b574(0x1e7))var _0x394e9c=users['German'];else{if(_0x474e13[0x0][_0x33b574(0x1d6)]==_0x33b574(0x22c))var _0x394e9c=users[_0x33b574(0x22c)];else{if(_0x474e13[0x0]['language']=='French')var _0x394e9c=users[_0x33b574(0x230)];else{if(_0x474e13[0x0]['language']=='Portuguese\x20(BR)')var _0x394e9c=users[_0x33b574(0x1f7)];else{if(_0x474e13[0x0][_0x33b574(0x1d6)]==_0x33b574(0x1e1))var _0x394e9c=users[_0x33b574(0x1e1)];else{if(_0x474e13[0x0][_0x33b574(0x1d6)]==_0x33b574(0x1df))var _0x394e9c=users[_0x33b574(0x215)];}}}}}}}_0x365a68[_0x33b574(0x1ed)](_0x33b574(0x1e0),{'success':_0x171fa2['flash'](_0x33b574(0x1ca)),'errors':_0x171fa2[_0x33b574(0x1eb)](_0x33b574(0x224)),'role':_0x5eabaf,'profile':_0x2b626e,'master_shop':_0x474e13,'customers':_0x122dce,'sales':_0x306206,'language':_0x394e9c});}catch(_0x3189bf){console[_0x33b574(0x22e)](_0x3189bf);}}),module[a0_0x4fa4a0(0x1d9)]=router;