function a0_0x17b4(){var _0x3c1000=['body','new\x20new_data','note','errors','foreach\x20newproduct','params','back','save','sales_return_finished','json','ToWarehouse','161642ToHTsg','customers','$product_details','Chinese','findById','getFullYear','French','type','product_name_QA','warehouse_name','getMonth','sales_return_invoice','German','user','return_sale_QA','stocks_QA','Arabic','27lMaHMN','$product_details.product_name','/sales_return/view','for_categorize','c_payment','Return\x20Rooms','Sale\x20Return','6313915kMZcsX','5341724NgAAOC','amount','/give_payment/:id','secondary_code','invoice','Returned\x20Payment\x20For\x20Sale\x20Return','secondary_code_QA','product_name','11799560dcKYmN','42014AEeOWS','customer','Finished\x20Goods','exports','message','types','due_amount','master','../models/all_models','purchase\x20return\x20successfully','$customer_docs','date','return_qty_QA','paid_amount','product_details','Enabled','name','$product_details.product_stock','Portuguese\x20(BR)','492wNdPQB','Arabic\x20(ae)','express','English\x20(US)','product_code','../middleware/auth','old_warehouse_data','sales_quantity','primary_code_QA','log','English','language','Spanish','render','sale_qty','product_code_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','data','$product_details._id','bay','subtract','1039680EBQFjg','Hindi','string','aggregate','primary_code','bin','findOne','stock','$product_details.secondary_code','slice','return_qty','/invoice/:id','redirect','$product_details.bay','old_data','return_sale_edit_finished','status','get','success','stocks','product_stock','$product_details.storage','suppliers','/view/:id','../public/language/languages.json','$product_details.bin','$name','$product_details.primary_code','flash','find','ToRoom','2242833uBXBdL','Portuguese','map','floorlevel','forEach','return_sale','$product_details.product_code'];a0_0x17b4=function(){return _0x3c1000;};return a0_0x17b4();}function a0_0x64f9(_0x5c6535,_0x5aa9e5){var _0x17b4c7=a0_0x17b4();return a0_0x64f9=function(_0x64f91c,_0x1706bd){_0x64f91c=_0x64f91c-0xfd;var _0x13abef=_0x17b4c7[_0x64f91c];return _0x13abef;},a0_0x64f9(_0x5c6535,_0x5aa9e5);}var a0_0x3eb032=a0_0x64f9;(function(_0x5020c4,_0x27db4c){var _0x3e25af=a0_0x64f9,_0x33ae87=_0x5020c4();while(!![]){try{var _0x13158a=-parseInt(_0x3e25af(0x14e))/0x1+parseInt(_0x3e25af(0x11d))/0x2+-parseInt(_0x3e25af(0x13c))/0x3+-parseInt(_0x3e25af(0x167))/0x4+-parseInt(_0x3e25af(0x166))/0x5+-parseInt(_0x3e25af(0x108))/0x6*(parseInt(_0x3e25af(0x170))/0x7)+parseInt(_0x3e25af(0x16f))/0x8*(parseInt(_0x3e25af(0x15f))/0x9);if(_0x13158a===_0x27db4c)break;else _0x33ae87['push'](_0x33ae87['shift']());}catch(_0x51b0b0){_0x33ae87['push'](_0x33ae87['shift']());}}}(a0_0x17b4,0xe6b94));const express=require(a0_0x3eb032(0x10a)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x3eb032(0xfd)),auth=require(a0_0x3eb032(0x10d)),users=require(a0_0x3eb032(0x135));router[a0_0x3eb032(0x12e)]('/view',auth,async(_0x5cf5c9,_0x47fbf2)=>{var _0x5e61be=a0_0x3eb032;try{const {username:_0xa28251,email:_0x538e3a,role:_0x2d5094}=_0x5cf5c9[_0x5e61be(0x15b)],_0x5d3e64=_0x5cf5c9[_0x5e61be(0x15b)],_0x52f728=await profile[_0x5e61be(0x123)]({'email':_0x5d3e64['email']}),_0xe0a935=await master_shop[_0x5e61be(0x13a)](),_0x42faa4=await sales_return_finished[_0x5e61be(0x120)]([{'$lookup':{'from':_0x5e61be(0x14f),'localField':_0x5e61be(0x171),'foreignField':_0x5e61be(0x105),'as':'customer_docs'}},{'$unwind':_0x5e61be(0xff)}]);if(_0xe0a935[0x0][_0x5e61be(0x113)]==_0x5e61be(0x10b)){var _0x14a658=users[_0x5e61be(0x112)];console[_0x5e61be(0x111)](_0x14a658);}else{if(_0xe0a935[0x0][_0x5e61be(0x113)]==_0x5e61be(0x11e))var _0x14a658=users[_0x5e61be(0x11e)];else{if(_0xe0a935[0x0][_0x5e61be(0x113)]=='German')var _0x14a658=users[_0x5e61be(0x15a)];else{if(_0xe0a935[0x0][_0x5e61be(0x113)]=='Spanish')var _0x14a658=users['Spanish'];else{if(_0xe0a935[0x0]['language']==_0x5e61be(0x154))var _0x14a658=users['French'];else{if(_0xe0a935[0x0]['language']==_0x5e61be(0x107))var _0x14a658=users[_0x5e61be(0x13d)];else{if(_0xe0a935[0x0]['language']=='Chinese')var _0x14a658=users[_0x5e61be(0x151)];else{if(_0xe0a935[0x0]['language']==_0x5e61be(0x109))var _0x14a658=users[_0x5e61be(0x15e)];}}}}}}}_0x47fbf2['render'](_0x5e61be(0x14b),{'success':_0x5cf5c9['flash']('success'),'errors':_0x5cf5c9['flash'](_0x5e61be(0x146)),'role':_0x5d3e64,'profile':_0x52f728,'master_shop':_0xe0a935,'user':_0x42faa4,'language':_0x14a658});}catch(_0x12816e){console['log'](_0x12816e);}}),router[a0_0x3eb032(0x12e)](a0_0x3eb032(0x134),auth,async(_0x3af8db,_0x36d2f6)=>{var _0x10004d=a0_0x3eb032;try{const {username:_0x4007a4,email:_0x5c988b,role:_0x1a8438}=_0x3af8db['user'],_0x45e0e1=_0x3af8db['user'],_0x2b9c01=await profile[_0x10004d(0x123)]({'email':_0x45e0e1['email']}),_0x395c89=await master_shop['find']();console['log'](_0x10004d(0x177),_0x395c89);const _0x1831a8=_0x3af8db[_0x10004d(0x148)]['id'];console[_0x10004d(0x111)](_0x1831a8);var _0x562245=[_0x10004d(0x164)];const _0x12f145=await sales_return_finished['findById'](_0x1831a8),_0x26a5a4=await warehouse[_0x10004d(0x120)]([{'$match':{'name':_0x12f145[_0x10004d(0x14d)],'room':_0x12f145[_0x10004d(0x13b)]}},{'$unwind':_0x10004d(0x150)},{'$group':{'_id':_0x10004d(0x11a),'name':{'$first':_0x10004d(0x160)},'product_stock':{'$first':_0x10004d(0x106)},'bay':{'$first':_0x10004d(0x12a)},'bin':{'$first':_0x10004d(0x136)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x10004d(0x138)},'secondary_code':{'$first':_0x10004d(0x125)},'product_code':{'$first':_0x10004d(0x142)},'storage':{'$first':_0x10004d(0x132)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x10004d(0x111)](_0x26a5a4);const _0x1272ca=await warehouse[_0x10004d(0x120)]([{'$match':{'status':_0x10004d(0x104),'warehouse_category':_0x10004d(0x172)}},{'$group':{'_id':_0x10004d(0x137),'name':{'$first':_0x10004d(0x137)}}},{'$sort':{'name':0x1}}]),_0x2611b0=await warehouse[_0x10004d(0x120)]([{'$match':{'status':'Enabled','name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x10004d(0x137)}}},{'$sort':{'name':0x1}}]),_0x51ddde=await product['find']({});if(_0x395c89[0x0][_0x10004d(0x113)]==_0x10004d(0x10b)){var _0x125e37=users[_0x10004d(0x112)];console[_0x10004d(0x111)](_0x125e37);}else{if(_0x395c89[0x0]['language']==_0x10004d(0x11e))var _0x125e37=users[_0x10004d(0x11e)];else{if(_0x395c89[0x0][_0x10004d(0x113)]==_0x10004d(0x15a))var _0x125e37=users[_0x10004d(0x15a)];else{if(_0x395c89[0x0][_0x10004d(0x113)]=='Spanish')var _0x125e37=users[_0x10004d(0x114)];else{if(_0x395c89[0x0]['language']==_0x10004d(0x154))var _0x125e37=users['French'];else{if(_0x395c89[0x0][_0x10004d(0x113)]==_0x10004d(0x107))var _0x125e37=users['Portuguese'];else{if(_0x395c89[0x0][_0x10004d(0x113)]==_0x10004d(0x151))var _0x125e37=users['Chinese'];else{if(_0x395c89[0x0][_0x10004d(0x113)]=='Arabic\x20(ae)')var _0x125e37=users[_0x10004d(0x15e)];}}}}}}}_0x36d2f6['render'](_0x10004d(0x12c),{'success':_0x3af8db[_0x10004d(0x139)](_0x10004d(0x12f)),'errors':_0x3af8db[_0x10004d(0x139)](_0x10004d(0x146)),'role':_0x45e0e1,'profile':_0x2b9c01,'master_shop':_0x395c89,'user':_0x12f145,'stock':_0x26a5a4,'unit':_0x51ddde,'language':_0x125e37,'warehouses':_0x1272ca,'rooms':_0x562245,'warehouse_QA':_0x2611b0});}catch(_0x3b0112){console[_0x10004d(0x111)](_0x3b0112);}}),router['post'](a0_0x3eb032(0x134),auth,async(_0x248b3c,_0x552ca8)=>{var _0x201673=a0_0x3eb032;if(_0x248b3c[_0x201673(0x143)][_0x201673(0x162)]=='QA')try{const _0xbca001=_0x248b3c[_0x201673(0x148)]['id'],_0x5d8c6b=await sales_return['findOne']({'invoice':_0x248b3c[_0x201673(0x143)]['invoice']}),_0x60f174=await warehouse[_0x201673(0x123)]({'name':_0x5d8c6b[_0x201673(0x14d)],'room':_0x5d8c6b[_0x201673(0x13b)]}),{invoice:_0x1cc752,customer:_0x26d381,date:_0x1b1a77,warehouse_name:_0x2b3dc1,product_name:_0x1e9ee8,primary_code:_0x3ecd4c,secondary_code:_0x1cf60c,product_code:_0x1dea71,sales_quantity:_0x553b2b,stocks:_0x4aa6c6,return_qty:_0x148c75,note:_0x35a037,to_warehouse_name_QA:_0x587108,to_Room_name_QA:_0x1eaf79}=_0x248b3c['body'];if(typeof product_name_QA==_0x201673(0x11f))var _0x463e9b=[_0x248b3c[_0x201673(0x143)][_0x201673(0x156)]],_0x1bd4bb=[_0x248b3c[_0x201673(0x143)][_0x201673(0x110)]],_0x3b6dbc=[_0x248b3c[_0x201673(0x143)]['secondary_code_QA']],_0x5ed7f3=[_0x248b3c[_0x201673(0x143)][_0x201673(0x117)]],_0x51b444=[_0x248b3c[_0x201673(0x143)]['sales_quantity_QA']],_0x5a895a=[_0x248b3c['body'][_0x201673(0x15d)]],_0x45f232=[_0x248b3c['body'][_0x201673(0x101)]];else var _0x463e9b=[..._0x248b3c['body'][_0x201673(0x156)]],_0x1bd4bb=[..._0x248b3c[_0x201673(0x143)][_0x201673(0x110)]],_0x3b6dbc=[..._0x248b3c['body'][_0x201673(0x16d)]],_0x5ed7f3=[..._0x248b3c[_0x201673(0x143)][_0x201673(0x117)]],_0x51b444=[..._0x248b3c[_0x201673(0x143)]['sales_quantity_QA']],_0x5a895a=[..._0x248b3c['body'][_0x201673(0x15d)]],_0x45f232=[..._0x248b3c['body'][_0x201673(0x101)]];const _0x4eb3da=_0x463e9b[_0x201673(0x13e)](_0x14d65c=>{return _0x14d65c={'product_name':_0x14d65c};});_0x1bd4bb[_0x201673(0x140)]((_0x536c2f,_0x2951af)=>{var _0x89fc8c=_0x201673;_0x4eb3da[_0x2951af][_0x89fc8c(0x121)]=_0x536c2f;}),_0x3b6dbc[_0x201673(0x140)]((_0xe2ebee,_0x478c7d)=>{var _0x4aa9ea=_0x201673;_0x4eb3da[_0x478c7d][_0x4aa9ea(0x16a)]=_0xe2ebee;}),_0x5ed7f3[_0x201673(0x140)]((_0x1e91a8,_0x56ff74)=>{_0x4eb3da[_0x56ff74]['product_code']=_0x1e91a8;}),_0x51b444[_0x201673(0x140)]((_0x605bd0,_0x262a68)=>{var _0x5b6040=_0x201673;_0x4eb3da[_0x262a68][_0x5b6040(0x116)]=_0x605bd0;}),_0x5a895a[_0x201673(0x140)]((_0x55ce47,_0x41e617)=>{var _0x22904b=_0x201673;_0x4eb3da[_0x41e617][_0x22904b(0x124)]=_0x55ce47;}),_0x45f232['forEach']((_0x322e56,_0xde58dd)=>{var _0x5c7f89=_0x201673;_0x4eb3da[_0xde58dd][_0x5c7f89(0x127)]=_0x322e56;}),_0x5d8c6b[_0x201673(0x15c)][_0x201673(0x140)](_0x12b54b=>{const _0x5e311f=_0x60f174['product_details']['map'](_0x727020=>{var _0x4fe4c6=a0_0x64f9;_0x727020[_0x4fe4c6(0x16e)]==_0x12b54b[_0x4fe4c6(0x16e)]&&(_0x727020[_0x4fe4c6(0x131)]=parseInt(_0x727020[_0x4fe4c6(0x131)])+parseInt(_0x12b54b[_0x4fe4c6(0x127)]));});}),await _0x60f174[_0x201673(0x14a)](),_0x5d8c6b[_0x201673(0x16b)]=_0x1cc752,_0x5d8c6b['customer']=_0x26d381,_0x5d8c6b[_0x201673(0x100)]=_0x1b1a77,_0x5d8c6b[_0x201673(0x157)]=_0x2b3dc1,_0x5d8c6b[_0x201673(0x15c)]=_0x4eb3da,_0x5d8c6b[_0x201673(0x145)]=_0x35a037,_0x5d8c6b[_0x201673(0x14d)]=_0x587108,_0x5d8c6b[_0x201673(0x13b)]=_0x1eaf79;const _0x4d7cc7=await _0x5d8c6b[_0x201673(0x14a)](),_0x2cb1af=await c_payment_data[_0x201673(0x123)]({'invoice':_0x248b3c[_0x201673(0x143)][_0x201673(0x16b)],'reason':_0x201673(0x165)});_0x2cb1af[_0x201673(0x133)]=_0x248b3c[_0x201673(0x143)][_0x201673(0x133)],_0x2cb1af[_0x201673(0x100)]=_0x248b3c[_0x201673(0x143)]['date'],await _0x2cb1af[_0x201673(0x14a)](),_0x248b3c[_0x201673(0x139)](_0x201673(0x12f),_0x201673(0xfe)),_0x552ca8[_0x201673(0x129)]('/sales_return_finished/view');}catch(_0x2f3dc7){console[_0x201673(0x111)](_0x2f3dc7),_0x552ca8[_0x201673(0x12d)](0xc8)['json']({'message':_0x2f3dc7['message']});}else try{const _0x251dd2=_0x248b3c['params']['id'];console[_0x201673(0x111)](_0x251dd2);const _0x17a74f=await sales_return[_0x201673(0x123)]({'invoice':_0x248b3c['body'][_0x201673(0x16b)]});console[_0x201673(0x111)](_0x201673(0x12b),_0x17a74f);const _0x19bb1f=await warehouse['findOne']({'name':_0x17a74f['ToWarehouse'],'room':_0x17a74f[_0x201673(0x13b)]});console[_0x201673(0x111)](_0x201673(0x10e),_0x19bb1f);const {invoice:_0x5e7a54,customer:_0xd4bc16,date:_0x27fb88,warehouse_name:_0x127c14,product_name:_0x483a8f,primary_code:_0x420cb3,secondary_code:_0x16e019,product_code:_0x3bf0c5,sales_quantity:_0x482c17,stocks:_0x8f786e,return_qty:_0x3f5515,note:_0x24b29b,to_warehouse_name:_0x3cfb70,to_Room_name:_0x498665}=_0x248b3c['body'];console['log'](_0x248b3c[_0x201673(0x143)]);if(typeof _0x483a8f==_0x201673(0x11f))var _0x463e9b=[_0x248b3c[_0x201673(0x143)][_0x201673(0x16e)]],_0x1bd4bb=[_0x248b3c[_0x201673(0x143)][_0x201673(0x121)]],_0x3b6dbc=[_0x248b3c[_0x201673(0x143)][_0x201673(0x16a)]],_0x5ed7f3=[_0x248b3c[_0x201673(0x143)]['product_code']],_0x51b444=[_0x248b3c['body'][_0x201673(0x10f)]],_0x5a895a=[_0x248b3c[_0x201673(0x143)]['stocks']],_0x45f232=[_0x248b3c[_0x201673(0x143)]['return_qty']],_0x3eae4e=[_0x248b3c['body'][_0x201673(0x11b)]],_0x1d58a5=[_0x248b3c[_0x201673(0x143)][_0x201673(0x122)]],_0x313239=[_0x248b3c['body'][_0x201673(0x175)]],_0x5ce865=[_0x248b3c[_0x201673(0x143)][_0x201673(0x13f)]];else var _0x463e9b=[..._0x248b3c[_0x201673(0x143)][_0x201673(0x16e)]],_0x1bd4bb=[..._0x248b3c['body'][_0x201673(0x121)]],_0x3b6dbc=[..._0x248b3c[_0x201673(0x143)]['secondary_code']],_0x5ed7f3=[..._0x248b3c[_0x201673(0x143)][_0x201673(0x10c)]],_0x51b444=[..._0x248b3c['body'][_0x201673(0x10f)]],_0x5a895a=[..._0x248b3c['body'][_0x201673(0x130)]],_0x45f232=[..._0x248b3c[_0x201673(0x143)]['return_qty']],_0x3eae4e=[..._0x248b3c[_0x201673(0x143)]['bay']],_0x1d58a5=[..._0x248b3c['body']['bin']],_0x313239=[..._0x248b3c[_0x201673(0x143)][_0x201673(0x175)]],_0x5ce865=[..._0x248b3c['body'][_0x201673(0x13f)]];const _0x2cb314=_0x463e9b[_0x201673(0x13e)](_0x1893c6=>{return _0x1893c6={'product_name':_0x1893c6};});_0x1bd4bb[_0x201673(0x140)]((_0xf8b581,_0x32676e)=>{var _0x2ca045=_0x201673;_0x2cb314[_0x32676e][_0x2ca045(0x121)]=_0xf8b581;}),_0x3b6dbc['forEach']((_0x340703,_0x2f03f0)=>{_0x2cb314[_0x2f03f0]['secondary_code']=_0x340703;}),_0x5ed7f3[_0x201673(0x140)]((_0x178bec,_0x39b146)=>{var _0x5da148=_0x201673;_0x2cb314[_0x39b146][_0x5da148(0x10c)]=_0x178bec;}),_0x51b444[_0x201673(0x140)]((_0x48fa8c,_0x58be9e)=>{_0x2cb314[_0x58be9e]['sale_qty']=_0x48fa8c;}),_0x5a895a[_0x201673(0x140)]((_0x31ff0d,_0x37f0d2)=>{var _0x28d7f9=_0x201673;_0x2cb314[_0x37f0d2][_0x28d7f9(0x124)]=_0x31ff0d;}),_0x45f232[_0x201673(0x140)]((_0x29f5c2,_0x4be68c)=>{var _0x13d705=_0x201673;_0x2cb314[_0x4be68c][_0x13d705(0x127)]=_0x29f5c2;}),_0x3eae4e[_0x201673(0x140)]((_0x5a89fc,_0x4159a8)=>{var _0x56c14e=_0x201673;_0x2cb314[_0x4159a8][_0x56c14e(0x11b)]=_0x5a89fc;}),_0x1d58a5[_0x201673(0x140)]((_0x4019bf,_0x9c3416)=>{var _0x271710=_0x201673;_0x2cb314[_0x9c3416][_0x271710(0x122)]=_0x4019bf;}),_0x313239[_0x201673(0x140)]((_0x3aa751,_0x1d99fd)=>{var _0x49935a=_0x201673;_0x2cb314[_0x1d99fd][_0x49935a(0x155)]=_0x3aa751;}),_0x5ce865[_0x201673(0x140)]((_0x5a6e8d,_0x3b8e0f)=>{var _0x344ca3=_0x201673;_0x2cb314[_0x3b8e0f][_0x344ca3(0x13f)]=_0x5a6e8d;});var _0x20acfa=0x0;_0x2cb314[_0x201673(0x140)](_0x3f2606=>{var _0x3d4a61=_0x201673;console[_0x3d4a61(0x111)](_0x3d4a61(0x147),_0x3f2606),(parseInt(_0x3f2606[_0x3d4a61(0x116)])<parseInt(_0x3f2606['return_qty'])||parseInt(_0x3f2606[_0x3d4a61(0x124)])<parseInt(_0x3f2606[_0x3d4a61(0x127)])&&parseInt(_0x3f2606[_0x3d4a61(0x116)])>parseInt(_0x3f2606[_0x3d4a61(0x127)])||parseInt(_0x3f2606['return_qty'])==0x0)&&_0x20acfa++;});if(_0x20acfa!=0x0)return _0x248b3c[_0x201673(0x139)]('errors',_0x201673(0x118)),_0x552ca8[_0x201673(0x129)](_0x201673(0x149));_0x17a74f['return_sale'][_0x201673(0x140)](_0x3a7e82=>{var _0x5688b5=_0x201673;const _0x5a8813=_0x19bb1f[_0x5688b5(0x103)]['map'](_0x297c17=>{var _0x57002f=_0x5688b5;_0x297c17['product_name']==_0x3a7e82['product_name']&&_0x297c17[_0x57002f(0x13f)]==_0x3a7e82[_0x57002f(0x13f)]&&_0x297c17[_0x57002f(0x155)]==_0x3a7e82['type']&&_0x297c17['bin']==_0x3a7e82[_0x57002f(0x122)]&&_0x297c17[_0x57002f(0x11b)]==_0x3a7e82[_0x57002f(0x11b)]&&(_0x297c17[_0x57002f(0x131)]=parseInt(_0x297c17[_0x57002f(0x131)])+parseInt(_0x3a7e82['return_qty']));});}),console[_0x201673(0x111)](_0x201673(0x10e),_0x19bb1f),await _0x19bb1f[_0x201673(0x14a)](),_0x17a74f[_0x201673(0x16b)]=_0x5e7a54,_0x17a74f[_0x201673(0x171)]=_0xd4bc16,_0x17a74f[_0x201673(0x100)]=_0x27fb88,_0x17a74f[_0x201673(0x157)]=_0x127c14,_0x17a74f[_0x201673(0x141)]=_0x2cb314,_0x17a74f[_0x201673(0x145)]=_0x24b29b,_0x17a74f['ToWarehouse']=_0x3cfb70,_0x17a74f['ToRoom']=_0x498665;const _0x38043d=await _0x17a74f['save']();console[_0x201673(0x111)](_0x201673(0x144),_0x38043d);const _0x5a49bb=await c_payment_data[_0x201673(0x123)]({'invoice':_0x248b3c['body'][_0x201673(0x16b)],'reason':_0x201673(0x165)});_0x5a49bb['suppliers']=_0x248b3c[_0x201673(0x143)][_0x201673(0x133)],_0x5a49bb['date']=_0x248b3c[_0x201673(0x143)][_0x201673(0x100)],await _0x5a49bb[_0x201673(0x14a)](),_0x248b3c['flash'](_0x201673(0x12f),'purchase\x20return\x20successfully'),_0x552ca8[_0x201673(0x129)](_0x201673(0x161));}catch(_0x5c102a){console[_0x201673(0x111)](_0x5c102a),_0x552ca8['status'](0xc8)[_0x201673(0x14c)]({'message':_0x5c102a[_0x201673(0x174)]});}}),router['post'](a0_0x3eb032(0x169),auth,async(_0x5aa221,_0x1752ed)=>{var _0xf510c7=a0_0x3eb032;try{const _0x5ed3d5=_0x5aa221[_0xf510c7(0x148)]['id'],{invoice:_0xb29c44,customer:_0x2b2cfd,payable_to_customer:_0x134ec9,paid_amount:_0x5bb98a}=_0x5aa221[_0xf510c7(0x143)],_0x244bec=await sales_return[_0xf510c7(0x152)](_0x5ed3d5);console[_0xf510c7(0x111)](_0xf510c7(0x119),_0x244bec),console[_0xf510c7(0x111)](_0x134ec9),console[_0xf510c7(0x111)](_0x5bb98a);var _0x91e140=_0x134ec9-_0x5bb98a;console[_0xf510c7(0x111)](_0xf510c7(0x11c),_0x91e140),_0x244bec[_0xf510c7(0x102)]=parseFloat(_0x5bb98a)+parseFloat(_0x244bec[_0xf510c7(0x102)]),_0x244bec[_0xf510c7(0x176)]=_0x91e140,console[_0xf510c7(0x111)](_0x244bec);const _0x518343=await _0x244bec['save']();console[_0xf510c7(0x111)](0x1b207);const _0x4af8d2=await c_payment_data[_0xf510c7(0x123)]({'invoice':_0x5aa221[_0xf510c7(0x143)]['invoice'],'reason':_0xf510c7(0x165)});console['log'](_0xf510c7(0x163),_0x4af8d2),_0x4af8d2[_0xf510c7(0x168)]=_0x91e140,await _0x4af8d2[_0xf510c7(0x14a)]();let _0x18f6c5=new Date(),_0x54d32e=('0'+_0x18f6c5['getDate']())[_0xf510c7(0x126)](-0x2),_0xed4ff4=('0'+(_0x18f6c5[_0xf510c7(0x158)]()+0x1))[_0xf510c7(0x126)](-0x2),_0x13cfc6=_0x18f6c5[_0xf510c7(0x153)](),_0x444ea8=_0x13cfc6+'-'+_0xed4ff4+'-'+_0x54d32e;const _0x39ac14=new customer_payment({'invoice':_0xb29c44,'date':_0x13cfc6+'-'+_0xed4ff4+'-'+_0x54d32e,'customer':_0x2b2cfd,'reason':_0xf510c7(0x16c),'amount':_0x5bb98a}),_0x20502a=await _0x39ac14[_0xf510c7(0x14a)]();_0x5aa221[_0xf510c7(0x139)](_0xf510c7(0x12f),'payment\x20successfull'),_0x1752ed[_0xf510c7(0x129)](_0xf510c7(0x161));}catch(_0x38da3d){console[_0xf510c7(0x111)](_0x38da3d);}}),router[a0_0x3eb032(0x12e)](a0_0x3eb032(0x128),auth,async(_0x3ed462,_0x2e97dc)=>{var _0x26226f=a0_0x3eb032;try{const {username:_0x5d2797,email:_0x3dabbd,role:_0xe19663}=_0x3ed462[_0x26226f(0x15b)],_0x2edb59=_0x3ed462[_0x26226f(0x15b)],_0x2ba171=await profile[_0x26226f(0x123)]({'email':_0x2edb59['email']}),_0x151786=await master_shop[_0x26226f(0x13a)]();console[_0x26226f(0x111)]('master',_0x151786);const _0x27a221=_0x3ed462[_0x26226f(0x148)]['id'],_0x33d5fe=await sales_return['findById'](_0x27a221);console[_0x26226f(0x111)](_0x33d5fe);const _0x3705ad=await customer[_0x26226f(0x123)]({'name':_0x33d5fe[_0x26226f(0x171)]});console['log'](_0x3705ad);if(_0x151786[0x0][_0x26226f(0x113)]==_0x26226f(0x10b)){var _0x184fb7=users[_0x26226f(0x112)];console[_0x26226f(0x111)](_0x184fb7);}else{if(_0x151786[0x0][_0x26226f(0x113)]==_0x26226f(0x11e))var _0x184fb7=users[_0x26226f(0x11e)];else{if(_0x151786[0x0][_0x26226f(0x113)]==_0x26226f(0x15a))var _0x184fb7=users[_0x26226f(0x15a)];else{if(_0x151786[0x0][_0x26226f(0x113)]=='Spanish')var _0x184fb7=users['Spanish'];else{if(_0x151786[0x0][_0x26226f(0x113)]=='French')var _0x184fb7=users[_0x26226f(0x154)];else{if(_0x151786[0x0][_0x26226f(0x113)]=='Portuguese\x20(BR)')var _0x184fb7=users[_0x26226f(0x13d)];else{if(_0x151786[0x0][_0x26226f(0x113)]==_0x26226f(0x151))var _0x184fb7=users[_0x26226f(0x151)];else{if(_0x151786[0x0][_0x26226f(0x113)]==_0x26226f(0x109))var _0x184fb7=users[_0x26226f(0x15e)];}}}}}}}_0x2e97dc[_0x26226f(0x115)](_0x26226f(0x159),{'success':_0x3ed462['flash'](_0x26226f(0x12f)),'errors':_0x3ed462[_0x26226f(0x139)](_0x26226f(0x146)),'role':_0x2edb59,'profile':_0x2ba171,'master_shop':_0x151786,'customers':_0x3705ad,'sales':_0x33d5fe,'language':_0x184fb7});}catch(_0x28bc15){console[_0x26226f(0x111)](_0x28bc15);}}),module[a0_0x3eb032(0x173)]=router;