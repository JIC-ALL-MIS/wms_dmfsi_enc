var a0_0x47a04c=a0_0x5b3a;(function(_0x17bb4e,_0x787b9e){var _0x2baf1c=a0_0x5b3a,_0x5a39a1=_0x17bb4e();while(!![]){try{var _0x4671fb=-parseInt(_0x2baf1c(0x212))/0x1*(-parseInt(_0x2baf1c(0x1de))/0x2)+parseInt(_0x2baf1c(0x220))/0x3*(-parseInt(_0x2baf1c(0x1e9))/0x4)+-parseInt(_0x2baf1c(0x1f6))/0x5*(parseInt(_0x2baf1c(0x219))/0x6)+parseInt(_0x2baf1c(0x208))/0x7*(-parseInt(_0x2baf1c(0x1e4))/0x8)+-parseInt(_0x2baf1c(0x1ed))/0x9*(parseInt(_0x2baf1c(0x20b))/0xa)+parseInt(_0x2baf1c(0x1ec))/0xb*(-parseInt(_0x2baf1c(0x1f7))/0xc)+-parseInt(_0x2baf1c(0x247))/0xd*(-parseInt(_0x2baf1c(0x253))/0xe);if(_0x4671fb===_0x787b9e)break;else _0x5a39a1['push'](_0x5a39a1['shift']());}catch(_0x14467d){_0x5a39a1['push'](_0x5a39a1['shift']());}}}(a0_0x2947,0xb8e39));function a0_0x5b3a(_0x23d80c,_0x5c15af){var _0x294773=a0_0x2947();return a0_0x5b3a=function(_0x5b3a9d,_0x46cd28){_0x5b3a9d=_0x5b3a9d-0x1d6;var _0x1cc736=_0x294773[_0x5b3a9d];return _0x1cc736;},a0_0x5b3a(_0x23d80c,_0x5c15af);}const express=require(a0_0x47a04c(0x1dd)),app=express(),router=express[a0_0x47a04c(0x1fe)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x47a04c(0x22f)),auth=require(a0_0x47a04c(0x23e)),users=require(a0_0x47a04c(0x238));router[a0_0x47a04c(0x1e5)]('/view',auth,async(_0x35f7cc,_0x5c01bc)=>{var _0x19213e=a0_0x47a04c;try{const {username:_0x1c3636,email:_0x27b1f8,role:_0x588898}=_0x35f7cc[_0x19213e(0x215)],_0x4c2f87=_0x35f7cc['user'],_0x57775a=await profile[_0x19213e(0x1da)]({'email':_0x4c2f87['email']}),_0x37bfa1=await master_shop[_0x19213e(0x201)](),_0x4ad0a7=await sales_return_finished[_0x19213e(0x229)]([{'$lookup':{'from':_0x19213e(0x1fb),'localField':'customer','foreignField':_0x19213e(0x242),'as':_0x19213e(0x20e)}},{'$unwind':_0x19213e(0x24c)}]);if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x210)){var _0x4f1530=users[_0x19213e(0x25a)];console[_0x19213e(0x258)](_0x4f1530);}else{if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x1fc))var _0x4f1530=users[_0x19213e(0x1fc)];else{if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x21d))var _0x4f1530=users['German'];else{if(_0x37bfa1[0x0]['language']=='Spanish')var _0x4f1530=users[_0x19213e(0x230)];else{if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x259))var _0x4f1530=users[_0x19213e(0x259)];else{if(_0x37bfa1[0x0]['language']==_0x19213e(0x1ef))var _0x4f1530=users[_0x19213e(0x22a)];else{if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x227))var _0x4f1530=users[_0x19213e(0x227)];else{if(_0x37bfa1[0x0][_0x19213e(0x237)]==_0x19213e(0x249))var _0x4f1530=users[_0x19213e(0x228)];}}}}}}}_0x5c01bc[_0x19213e(0x22e)](_0x19213e(0x257),{'success':_0x35f7cc[_0x19213e(0x250)]('success'),'errors':_0x35f7cc['flash']('errors'),'role':_0x4c2f87,'profile':_0x57775a,'master_shop':_0x37bfa1,'user':_0x4ad0a7,'language':_0x4f1530});}catch(_0x5715e5){console[_0x19213e(0x258)](_0x5715e5);}}),router[a0_0x47a04c(0x1e5)](a0_0x47a04c(0x24a),auth,async(_0x26bc6b,_0x2dbdff)=>{var _0xfb9d24=a0_0x47a04c;try{const {username:_0x17ab35,email:_0x2784af,role:_0x99dfc1}=_0x26bc6b[_0xfb9d24(0x215)],_0x11eb11=_0x26bc6b[_0xfb9d24(0x215)],_0x2ef558=await profile[_0xfb9d24(0x1da)]({'email':_0x11eb11[_0xfb9d24(0x254)]}),_0x5d616a=await master_shop[_0xfb9d24(0x201)]();console['log'](_0xfb9d24(0x202),_0x5d616a);const _0xbd3617=_0x26bc6b['params']['id'];console['log'](_0xbd3617);var _0x528b1b=[_0xfb9d24(0x1ee)];const _0x8d20e5=await sales_return_finished['findById'](_0xbd3617),_0x36cfb6=await warehouse[_0xfb9d24(0x229)]([{'$match':{'name':_0x8d20e5[_0xfb9d24(0x200)],'room':_0x8d20e5[_0xfb9d24(0x234)]}},{'$unwind':_0xfb9d24(0x1f4)},{'$group':{'_id':_0xfb9d24(0x240),'name':{'$first':_0xfb9d24(0x21b)},'product_stock':{'$first':_0xfb9d24(0x255)},'bay':{'$first':_0xfb9d24(0x1d8)},'bin':{'$first':_0xfb9d24(0x23b)},'type':{'$first':_0xfb9d24(0x204)},'floorlevel':{'$first':_0xfb9d24(0x231)},'primary_code':{'$first':_0xfb9d24(0x209)},'secondary_code':{'$first':_0xfb9d24(0x20d)},'product_code':{'$first':_0xfb9d24(0x1fd)},'storage':{'$first':_0xfb9d24(0x1f8)},'rack':{'$first':_0xfb9d24(0x21f)}}}]);console[_0xfb9d24(0x258)](_0x36cfb6);const _0x45cfea=await warehouse[_0xfb9d24(0x229)]([{'$match':{'status':_0xfb9d24(0x20a),'warehouse_category':_0xfb9d24(0x1e2)}},{'$group':{'_id':_0xfb9d24(0x233),'name':{'$first':_0xfb9d24(0x233)}}},{'$sort':{'name':0x1}}]),_0x2fcdc9=await warehouse['aggregate']([{'$match':{'status':_0xfb9d24(0x20a),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0xfb9d24(0x233),'name':{'$first':_0xfb9d24(0x233)}}},{'$sort':{'name':0x1}}]),_0x6e9f49=await product['find']({});if(_0x5d616a[0x0]['language']==_0xfb9d24(0x210)){var _0xd5232d=users[_0xfb9d24(0x25a)];console['log'](_0xd5232d);}else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]=='Hindi')var _0xd5232d=users['Hindi'];else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]=='German')var _0xd5232d=users['German'];else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]==_0xfb9d24(0x230))var _0xd5232d=users[_0xfb9d24(0x230)];else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]=='French')var _0xd5232d=users['French'];else{if(_0x5d616a[0x0]['language']==_0xfb9d24(0x1ef))var _0xd5232d=users['Portuguese'];else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]==_0xfb9d24(0x227))var _0xd5232d=users[_0xfb9d24(0x227)];else{if(_0x5d616a[0x0][_0xfb9d24(0x237)]==_0xfb9d24(0x249))var _0xd5232d=users[_0xfb9d24(0x228)];}}}}}}}_0x2dbdff[_0xfb9d24(0x22e)]('return_sale_edit_finished',{'success':_0x26bc6b[_0xfb9d24(0x250)](_0xfb9d24(0x1f5)),'errors':_0x26bc6b[_0xfb9d24(0x250)](_0xfb9d24(0x226)),'role':_0x11eb11,'profile':_0x2ef558,'master_shop':_0x5d616a,'user':_0x8d20e5,'stock':_0x36cfb6,'unit':_0x6e9f49,'language':_0xd5232d,'warehouses':_0x45cfea,'rooms':_0x528b1b,'warehouse_QA':_0x2fcdc9});}catch(_0x15a6ad){console[_0xfb9d24(0x258)](_0x15a6ad);}}),router[a0_0x47a04c(0x24b)](a0_0x47a04c(0x24a),auth,async(_0x1b2d91,_0x9bda21)=>{var _0x14c65d=a0_0x47a04c;if(_0x1b2d91['body'][_0x14c65d(0x1e8)]=='QA')try{const _0x111e7a=_0x1b2d91[_0x14c65d(0x241)]['id'],_0x13df2a=await sales_return[_0x14c65d(0x1da)]({'invoice':_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x225)]}),_0x165525=await warehouse[_0x14c65d(0x1da)]({'name':_0x13df2a[_0x14c65d(0x200)],'room':_0x13df2a['ToRoom']}),{invoice:_0x354281,customer:_0x373d95,date:_0x361063,warehouse_name:_0x9b28f5,product_name:_0x1a07e1,primary_code:_0x51ae33,secondary_code:_0x3a42ae,product_code:_0x1d86f8,sales_quantity:_0x55fe03,stocks:_0x1f0fe5,return_qty:_0x5cb40f,note:_0x49324c,to_warehouse_name_QA:_0x1409d2,to_Room_name_QA:_0x48776}=_0x1b2d91['body'];if(typeof product_name_QA==_0x14c65d(0x236))var _0x3d262c=[_0x1b2d91[_0x14c65d(0x216)]['product_name_QA']],_0x2ef1a6=[_0x1b2d91['body'][_0x14c65d(0x223)]],_0x5c3b17=[_0x1b2d91[_0x14c65d(0x216)]['secondary_code_QA']],_0xb9a21f=[_0x1b2d91['body'][_0x14c65d(0x1e7)]],_0x25fde3=[_0x1b2d91[_0x14c65d(0x216)]['sales_quantity_QA']],_0x135c35=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x22c)]],_0x1b8a7c=[_0x1b2d91[_0x14c65d(0x216)]['return_qty_QA']];else var _0x3d262c=[..._0x1b2d91['body'][_0x14c65d(0x244)]],_0x2ef1a6=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x223)]],_0x5c3b17=[..._0x1b2d91['body'][_0x14c65d(0x1d9)]],_0xb9a21f=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1e7)]],_0x25fde3=[..._0x1b2d91['body'][_0x14c65d(0x239)]],_0x135c35=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x22c)]],_0x1b8a7c=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1fa)]];const _0x33ae28=_0x3d262c[_0x14c65d(0x24e)](_0x4b397a=>{return _0x4b397a={'product_name':_0x4b397a};});_0x2ef1a6[_0x14c65d(0x213)]((_0x59ac68,_0x59ab03)=>{var _0x43bb8a=_0x14c65d;_0x33ae28[_0x59ab03][_0x43bb8a(0x1e3)]=_0x59ac68;}),_0x5c3b17[_0x14c65d(0x213)]((_0x2c6e2b,_0x3ea3c8)=>{var _0x7287c5=_0x14c65d;_0x33ae28[_0x3ea3c8][_0x7287c5(0x248)]=_0x2c6e2b;}),_0xb9a21f[_0x14c65d(0x213)]((_0x5d9909,_0xcb82b2)=>{var _0x18dd71=_0x14c65d;_0x33ae28[_0xcb82b2][_0x18dd71(0x222)]=_0x5d9909;}),_0x25fde3[_0x14c65d(0x213)]((_0x54211f,_0x172357)=>{var _0x3a65d4=_0x14c65d;_0x33ae28[_0x172357][_0x3a65d4(0x217)]=_0x54211f;}),_0x135c35[_0x14c65d(0x213)]((_0xb925fa,_0x146625)=>{var _0x44d100=_0x14c65d;_0x33ae28[_0x146625][_0x44d100(0x214)]=_0xb925fa;}),_0x1b8a7c[_0x14c65d(0x213)]((_0x1a3e9d,_0x3a8310)=>{var _0x43a6c7=_0x14c65d;_0x33ae28[_0x3a8310][_0x43a6c7(0x246)]=_0x1a3e9d;}),_0x13df2a[_0x14c65d(0x1e6)][_0x14c65d(0x213)](_0x53d6fa=>{var _0x240683=_0x14c65d;const _0x7f5352=_0x165525[_0x240683(0x24d)][_0x240683(0x24e)](_0x4abb06=>{var _0x4c0888=_0x240683;_0x4abb06['product_name']==_0x53d6fa[_0x4c0888(0x24f)]&&(_0x4abb06['product_stock']=parseInt(_0x4abb06[_0x4c0888(0x21a)])+parseInt(_0x53d6fa['return_qty']));});}),await _0x165525['save'](),_0x13df2a[_0x14c65d(0x225)]=_0x354281,_0x13df2a[_0x14c65d(0x252)]=_0x373d95,_0x13df2a[_0x14c65d(0x211)]=_0x361063,_0x13df2a[_0x14c65d(0x20c)]=_0x9b28f5,_0x13df2a[_0x14c65d(0x1e6)]=_0x33ae28,_0x13df2a[_0x14c65d(0x232)]=_0x49324c,_0x13df2a[_0x14c65d(0x200)]=_0x1409d2,_0x13df2a[_0x14c65d(0x234)]=_0x48776;const _0x22c3db=await _0x13df2a[_0x14c65d(0x1f3)](),_0x1c8ba7=await c_payment_data[_0x14c65d(0x1da)]({'invoice':_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x225)],'reason':'Sale\x20Return'});_0x1c8ba7['suppliers']=_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1d6)],_0x1c8ba7['date']=_0x1b2d91[_0x14c65d(0x216)]['date'],await _0x1c8ba7[_0x14c65d(0x1f3)](),_0x1b2d91[_0x14c65d(0x250)]('success',_0x14c65d(0x21e)),_0x9bda21['redirect'](_0x14c65d(0x23d));}catch(_0x3e5adb){console['log'](_0x3e5adb),_0x9bda21[_0x14c65d(0x256)](0xc8)[_0x14c65d(0x23c)]({'message':_0x3e5adb[_0x14c65d(0x20f)]});}else try{const _0x3a99e6=_0x1b2d91[_0x14c65d(0x241)]['id'];console['log'](_0x3a99e6);const _0x15acaf=await sales_return[_0x14c65d(0x1da)]({'invoice':_0x1b2d91['body']['invoice']});console['log'](_0x14c65d(0x25b),_0x15acaf);const _0x210c28=await warehouse[_0x14c65d(0x1da)]({'name':_0x15acaf['ToWarehouse'],'room':_0x15acaf['ToRoom']});console[_0x14c65d(0x258)](_0x14c65d(0x1dc),_0x210c28);const {invoice:_0x498462,customer:_0x39bc1b,date:_0x2596ff,warehouse_name:_0x21a08d,product_name:_0x337ad2,primary_code:_0x462d8e,secondary_code:_0x2b9b43,product_code:_0x97326d,sales_quantity:_0x252d9f,stocks:_0x362d5c,return_qty:_0x53c6a0,note:_0x5f14f7,to_warehouse_name:_0x4a9af5,to_Room_name:_0x15cb19}=_0x1b2d91[_0x14c65d(0x216)];console['log'](_0x1b2d91['body']);if(typeof _0x337ad2==_0x14c65d(0x236))var _0x3d262c=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x24f)]],_0x2ef1a6=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1e3)]],_0x5c3b17=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x248)]],_0xb9a21f=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x222)]],_0x25fde3=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x243)]],_0x135c35=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x21c)]],_0x1b8a7c=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x246)]],_0x42601f=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x23f)]],_0x1b06a9=[_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1ea)]],_0x5b5c1b=[_0x1b2d91['body'][_0x14c65d(0x22b)]],_0x399267=[_0x1b2d91[_0x14c65d(0x216)]['floorlevel']];else var _0x3d262c=[..._0x1b2d91[_0x14c65d(0x216)]['product_name']],_0x2ef1a6=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1e3)]],_0x5c3b17=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x248)]],_0xb9a21f=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x222)]],_0x25fde3=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x243)]],_0x135c35=[..._0x1b2d91[_0x14c65d(0x216)]['stocks']],_0x1b8a7c=[..._0x1b2d91['body'][_0x14c65d(0x246)]],_0x42601f=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x23f)]],_0x1b06a9=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1ea)]],_0x5b5c1b=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x22b)]],_0x399267=[..._0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x1e1)]];const _0x3709ab=_0x3d262c[_0x14c65d(0x24e)](_0x26e743=>{return _0x26e743={'product_name':_0x26e743};});_0x2ef1a6[_0x14c65d(0x213)]((_0x57e90e,_0x1037d1)=>{_0x3709ab[_0x1037d1]['primary_code']=_0x57e90e;}),_0x5c3b17[_0x14c65d(0x213)]((_0x5ef6ab,_0x1b7f68)=>{var _0x2d9c83=_0x14c65d;_0x3709ab[_0x1b7f68][_0x2d9c83(0x248)]=_0x5ef6ab;}),_0xb9a21f[_0x14c65d(0x213)]((_0x1d8c2d,_0x3d6967)=>{var _0x3c1f7c=_0x14c65d;_0x3709ab[_0x3d6967][_0x3c1f7c(0x222)]=_0x1d8c2d;}),_0x25fde3[_0x14c65d(0x213)]((_0x5ae36d,_0x1b4a82)=>{var _0x484ad7=_0x14c65d;_0x3709ab[_0x1b4a82][_0x484ad7(0x217)]=_0x5ae36d;}),_0x135c35[_0x14c65d(0x213)]((_0x2f831d,_0x3e52a6)=>{var _0x1a0771=_0x14c65d;_0x3709ab[_0x3e52a6][_0x1a0771(0x214)]=_0x2f831d;}),_0x1b8a7c[_0x14c65d(0x213)]((_0x20fb3a,_0x502785)=>{var _0x582f5e=_0x14c65d;_0x3709ab[_0x502785][_0x582f5e(0x246)]=_0x20fb3a;}),_0x42601f['forEach']((_0x384ba0,_0x328c05)=>{var _0x386a00=_0x14c65d;_0x3709ab[_0x328c05][_0x386a00(0x23f)]=_0x384ba0;}),_0x1b06a9[_0x14c65d(0x213)]((_0x4dac47,_0x139696)=>{var _0x38992c=_0x14c65d;_0x3709ab[_0x139696][_0x38992c(0x1ea)]=_0x4dac47;}),_0x5b5c1b[_0x14c65d(0x213)]((_0x59926f,_0x370a47)=>{var _0x179c55=_0x14c65d;_0x3709ab[_0x370a47][_0x179c55(0x1df)]=_0x59926f;}),_0x399267[_0x14c65d(0x213)]((_0x4a155e,_0x4acef9)=>{var _0x5c5f0f=_0x14c65d;_0x3709ab[_0x4acef9][_0x5c5f0f(0x1e1)]=_0x4a155e;});var _0x4c6ea7=0x0;_0x3709ab['forEach'](_0x511383=>{var _0x278846=_0x14c65d;console[_0x278846(0x258)](_0x278846(0x206),_0x511383),(parseInt(_0x511383[_0x278846(0x217)])<parseInt(_0x511383[_0x278846(0x246)])||parseInt(_0x511383[_0x278846(0x214)])<parseInt(_0x511383[_0x278846(0x246)])&&parseInt(_0x511383[_0x278846(0x217)])>parseInt(_0x511383[_0x278846(0x246)])||parseInt(_0x511383['return_qty'])==0x0)&&_0x4c6ea7++;});if(_0x4c6ea7!=0x0)return _0x1b2d91['flash'](_0x14c65d(0x226),_0x14c65d(0x1f1)),_0x9bda21[_0x14c65d(0x205)](_0x14c65d(0x251));_0x15acaf[_0x14c65d(0x221)][_0x14c65d(0x213)](_0x56644d=>{const _0x2f1a96=_0x210c28['product_details']['map'](_0x13f4f6=>{var _0x2794d5=a0_0x5b3a;_0x13f4f6[_0x2794d5(0x24f)]==_0x56644d['product_name']&&_0x13f4f6[_0x2794d5(0x1e1)]==_0x56644d[_0x2794d5(0x1e1)]&&_0x13f4f6[_0x2794d5(0x1df)]==_0x56644d[_0x2794d5(0x1df)]&&_0x13f4f6[_0x2794d5(0x1ea)]==_0x56644d[_0x2794d5(0x1ea)]&&_0x13f4f6[_0x2794d5(0x23f)]==_0x56644d['bay']&&(_0x13f4f6[_0x2794d5(0x21a)]=parseInt(_0x13f4f6[_0x2794d5(0x21a)])+parseInt(_0x56644d[_0x2794d5(0x246)]));});}),console['log'](_0x14c65d(0x1dc),_0x210c28),await _0x210c28[_0x14c65d(0x1f3)](),_0x15acaf[_0x14c65d(0x225)]=_0x498462,_0x15acaf[_0x14c65d(0x252)]=_0x39bc1b,_0x15acaf['date']=_0x2596ff,_0x15acaf[_0x14c65d(0x20c)]=_0x21a08d,_0x15acaf[_0x14c65d(0x221)]=_0x3709ab,_0x15acaf[_0x14c65d(0x232)]=_0x5f14f7,_0x15acaf[_0x14c65d(0x200)]=_0x4a9af5,_0x15acaf['ToRoom']=_0x15cb19;const _0x279fa1=await _0x15acaf['save']();console[_0x14c65d(0x258)]('new\x20new_data',_0x279fa1);const _0x5c5490=await c_payment_data[_0x14c65d(0x1da)]({'invoice':_0x1b2d91[_0x14c65d(0x216)][_0x14c65d(0x225)],'reason':'Sale\x20Return'});_0x5c5490[_0x14c65d(0x1d6)]=_0x1b2d91[_0x14c65d(0x216)]['suppliers'],_0x5c5490[_0x14c65d(0x211)]=_0x1b2d91['body'][_0x14c65d(0x211)],await _0x5c5490[_0x14c65d(0x1f3)](),_0x1b2d91[_0x14c65d(0x250)](_0x14c65d(0x1f5),_0x14c65d(0x21e)),_0x9bda21[_0x14c65d(0x205)]('/sales_return/view');}catch(_0x6e8335){console[_0x14c65d(0x258)](_0x6e8335),_0x9bda21[_0x14c65d(0x256)](0xc8)['json']({'message':_0x6e8335[_0x14c65d(0x20f)]});}}),router[a0_0x47a04c(0x24b)]('/give_payment/:id',auth,async(_0x1a8744,_0x3f0f24)=>{var _0x4372de=a0_0x47a04c;try{const _0xc75f0c=_0x1a8744[_0x4372de(0x241)]['id'],{invoice:_0x4c805e,customer:_0x11986f,payable_to_customer:_0x3803a3,paid_amount:_0x5b6707}=_0x1a8744['body'],_0x2a02db=await sales_return[_0x4372de(0x23a)](_0xc75f0c);console[_0x4372de(0x258)](_0x4372de(0x1ff),_0x2a02db),console[_0x4372de(0x258)](_0x3803a3),console['log'](_0x5b6707);var _0x1f41e7=_0x3803a3-_0x5b6707;console[_0x4372de(0x258)]('subtract',_0x1f41e7),_0x2a02db[_0x4372de(0x1f2)]=parseFloat(_0x5b6707)+parseFloat(_0x2a02db['paid_amount']),_0x2a02db[_0x4372de(0x1f0)]=_0x1f41e7,console[_0x4372de(0x258)](_0x2a02db);const _0x2ea064=await _0x2a02db[_0x4372de(0x1f3)]();console[_0x4372de(0x258)](0x1b207);const _0x42288a=await c_payment_data[_0x4372de(0x1da)]({'invoice':_0x1a8744['body']['invoice'],'reason':_0x4372de(0x1db)});console[_0x4372de(0x258)](_0x4372de(0x1e0),_0x42288a),_0x42288a[_0x4372de(0x1eb)]=_0x1f41e7,await _0x42288a[_0x4372de(0x1f3)]();let _0x5cc554=new Date(),_0x541e23=('0'+_0x5cc554['getDate']())[_0x4372de(0x245)](-0x2),_0x2ba2b6=('0'+(_0x5cc554[_0x4372de(0x207)]()+0x1))['slice'](-0x2),_0xe792f5=_0x5cc554[_0x4372de(0x203)](),_0x22ea21=_0xe792f5+'-'+_0x2ba2b6+'-'+_0x541e23;const _0xd90dd5=new customer_payment({'invoice':_0x4c805e,'date':_0xe792f5+'-'+_0x2ba2b6+'-'+_0x541e23,'customer':_0x11986f,'reason':_0x4372de(0x235),'amount':_0x5b6707}),_0x27ff1d=await _0xd90dd5['save']();_0x1a8744[_0x4372de(0x250)](_0x4372de(0x1f5),_0x4372de(0x1f9)),_0x3f0f24[_0x4372de(0x205)](_0x4372de(0x1d7));}catch(_0x2bb8e0){console['log'](_0x2bb8e0);}}),router[a0_0x47a04c(0x1e5)](a0_0x47a04c(0x22d),auth,async(_0x408b85,_0x2b1784)=>{var _0x541a73=a0_0x47a04c;try{const {username:_0x136dc6,email:_0x3c8594,role:_0x27126a}=_0x408b85[_0x541a73(0x215)],_0x125c24=_0x408b85[_0x541a73(0x215)],_0x4078fa=await profile[_0x541a73(0x1da)]({'email':_0x125c24[_0x541a73(0x254)]}),_0x25c68e=await master_shop[_0x541a73(0x201)]();console[_0x541a73(0x258)](_0x541a73(0x202),_0x25c68e);const _0x40f967=_0x408b85[_0x541a73(0x241)]['id'],_0x6f01e7=await sales_return[_0x541a73(0x23a)](_0x40f967);console['log'](_0x6f01e7);const _0x3f41e3=await customer[_0x541a73(0x1da)]({'name':_0x6f01e7[_0x541a73(0x252)]});console[_0x541a73(0x258)](_0x3f41e3);if(_0x25c68e[0x0][_0x541a73(0x237)]==_0x541a73(0x210)){var _0xa28062=users[_0x541a73(0x25a)];console[_0x541a73(0x258)](_0xa28062);}else{if(_0x25c68e[0x0]['language']==_0x541a73(0x1fc))var _0xa28062=users['Hindi'];else{if(_0x25c68e[0x0][_0x541a73(0x237)]=='German')var _0xa28062=users[_0x541a73(0x21d)];else{if(_0x25c68e[0x0][_0x541a73(0x237)]==_0x541a73(0x230))var _0xa28062=users['Spanish'];else{if(_0x25c68e[0x0]['language']==_0x541a73(0x259))var _0xa28062=users[_0x541a73(0x259)];else{if(_0x25c68e[0x0][_0x541a73(0x237)]=='Portuguese\x20(BR)')var _0xa28062=users[_0x541a73(0x22a)];else{if(_0x25c68e[0x0][_0x541a73(0x237)]==_0x541a73(0x227))var _0xa28062=users['Chinese'];else{if(_0x25c68e[0x0][_0x541a73(0x237)]==_0x541a73(0x249))var _0xa28062=users[_0x541a73(0x228)];}}}}}}}_0x2b1784[_0x541a73(0x22e)](_0x541a73(0x224),{'success':_0x408b85[_0x541a73(0x250)](_0x541a73(0x1f5)),'errors':_0x408b85[_0x541a73(0x250)]('errors'),'role':_0x125c24,'profile':_0x4078fa,'master_shop':_0x25c68e,'customers':_0x3f41e3,'sales':_0x6f01e7,'language':_0xa28062});}catch(_0xa39f09){console[_0x541a73(0x258)](_0xa39f09);}}),module[a0_0x47a04c(0x218)]=router;function a0_0x2947(){var _0x59efce=['stocks_QA','/invoice/:id','render','../models/all_models','Spanish','$product_details.floorlevel','note','$name','ToRoom','Returned\x20Payment\x20For\x20Sale\x20Return','string','language','../public/language/languages.json','sales_quantity_QA','findById','$product_details.bin','json','/sales_return_finished/view','../middleware/auth','bay','$product_details._id','params','name','sales_quantity','product_name_QA','slice','return_qty','68984604ysBqRY','secondary_code','Arabic\x20(ae)','/view/:id','post','$customer_docs','product_details','map','product_name','flash','back','customer','14MjJZqG','email','$product_details.product_stock','status','sales_return_finished','log','French','English','old_data','suppliers','/sales_return/view','$product_details.bay','secondary_code_QA','findOne','Sale\x20Return','old_warehouse_data','express','156HXiTVM','type','c_payment','floorlevel','Finished\x20Goods','primary_code','184zUMnWF','get','return_sale_QA','product_code_QA','for_categorize','17048PIMpHx','bin','amount','143SzTaHi','18FXqmwP','Return\x20Rooms','Portuguese\x20(BR)','due_amount','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','paid_amount','save','$product_details','success','7835lNDEWu','304056NcGzov','$product_details.storage','payment\x20successfull','return_qty_QA','customers','Hindi','$product_details.product_code','Router','data','ToWarehouse','find','master','getFullYear','$product_details.type','redirect','foreach\x20newproduct','getMonth','210532YoAfMg','$product_details.primary_code','Enabled','6813610xhlYIZ','warehouse_name','$product_details.secondary_code','customer_docs','message','English\x20(US)','date','2377tlQkbQ','forEach','stock','user','body','sale_qty','exports','4350KPYLKP','product_stock','$product_details.product_name','stocks','German','purchase\x20return\x20successfully','$product_details.rack','855zOAWGd','return_sale','product_code','primary_code_QA','sales_return_invoice','invoice','errors','Chinese','Arabic','aggregate','Portuguese','types'];a0_0x2947=function(){return _0x59efce;};return a0_0x2947();}