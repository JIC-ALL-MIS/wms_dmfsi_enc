function a0_0x56c5(_0x557005,_0x2a352d){var _0x429729=a0_0x4297();return a0_0x56c5=function(_0x56c56c,_0x127b7d){_0x56c56c=_0x56c56c-0x123;var _0x430310=_0x429729[_0x56c56c];return _0x430310;},a0_0x56c5(_0x557005,_0x2a352d);}var a0_0x180c88=a0_0x56c5;(function(_0x2bea54,_0x385222){var _0x4b1a58=a0_0x56c5,_0x1fe0d9=_0x2bea54();while(!![]){try{var _0x2b9ca9=parseInt(_0x4b1a58(0x148))/0x1*(-parseInt(_0x4b1a58(0x196))/0x2)+parseInt(_0x4b1a58(0x131))/0x3*(parseInt(_0x4b1a58(0x156))/0x4)+-parseInt(_0x4b1a58(0x18a))/0x5+parseInt(_0x4b1a58(0x164))/0x6*(parseInt(_0x4b1a58(0x19a))/0x7)+-parseInt(_0x4b1a58(0x192))/0x8+-parseInt(_0x4b1a58(0x167))/0x9*(-parseInt(_0x4b1a58(0x127))/0xa)+parseInt(_0x4b1a58(0x14f))/0xb*(parseInt(_0x4b1a58(0x184))/0xc);if(_0x2b9ca9===_0x385222)break;else _0x1fe0d9['push'](_0x1fe0d9['shift']());}catch(_0xad3b06){_0x1fe0d9['push'](_0x1fe0d9['shift']());}}}(a0_0x4297,0x3be7a));const express=require(a0_0x180c88(0x14b)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x180c88(0x175)),auth=require(a0_0x180c88(0x188)),users=require(a0_0x180c88(0x13c));router[a0_0x180c88(0x126)](a0_0x180c88(0x17d),auth,async(_0x1eff5b,_0x2cc07e)=>{var _0x1b3851=a0_0x180c88;try{const {username:_0x23b6d9,email:_0x416a2f,role:_0x177cc9}=_0x1eff5b[_0x1b3851(0x16e)],_0x1b5f16=_0x1eff5b[_0x1b3851(0x16e)],_0x2182e6=await profile[_0x1b3851(0x12d)]({'email':_0x1b5f16['email']}),_0x3803c6=await master_shop[_0x1b3851(0x17c)](),_0x4c4807=await sales_return_finished[_0x1b3851(0x155)]([{'$lookup':{'from':_0x1b3851(0x128),'localField':_0x1b3851(0x183),'foreignField':'name','as':_0x1b3851(0x140)}},{'$unwind':_0x1b3851(0x194)}]);if(_0x3803c6[0x0]['language']==_0x1b3851(0x160)){var _0x11849b=users['English'];console[_0x1b3851(0x16f)](_0x11849b);}else{if(_0x3803c6[0x0][_0x1b3851(0x198)]=='Hindi')var _0x11849b=users['Hindi'];else{if(_0x3803c6[0x0][_0x1b3851(0x198)]==_0x1b3851(0x14d))var _0x11849b=users[_0x1b3851(0x14d)];else{if(_0x3803c6[0x0]['language']==_0x1b3851(0x18e))var _0x11849b=users['Spanish'];else{if(_0x3803c6[0x0]['language']==_0x1b3851(0x16b))var _0x11849b=users[_0x1b3851(0x16b)];else{if(_0x3803c6[0x0][_0x1b3851(0x198)]==_0x1b3851(0x13b))var _0x11849b=users[_0x1b3851(0x170)];else{if(_0x3803c6[0x0][_0x1b3851(0x198)]=='Chinese')var _0x11849b=users[_0x1b3851(0x12b)];else{if(_0x3803c6[0x0]['language']==_0x1b3851(0x186))var _0x11849b=users[_0x1b3851(0x13a)];}}}}}}}_0x2cc07e[_0x1b3851(0x149)](_0x1b3851(0x136),{'success':_0x1eff5b[_0x1b3851(0x143)]('success'),'errors':_0x1eff5b[_0x1b3851(0x143)](_0x1b3851(0x187)),'role':_0x1b5f16,'profile':_0x2182e6,'master_shop':_0x3803c6,'user':_0x4c4807,'language':_0x11849b});}catch(_0x22c63d){console[_0x1b3851(0x16f)](_0x22c63d);}}),router['get']('/view/:id',auth,async(_0x428c25,_0x1066d4)=>{var _0x19064c=a0_0x180c88;try{const {username:_0x57e735,email:_0x29e7c7,role:_0xa45216}=_0x428c25['user'],_0x3f6e2e=_0x428c25['user'],_0x100ae1=await profile['findOne']({'email':_0x3f6e2e[_0x19064c(0x18f)]}),_0x1a621c=await master_shop['find']();console[_0x19064c(0x16f)]('master',_0x1a621c);const _0x94ef7=_0x428c25['params']['id'];console[_0x19064c(0x16f)](_0x94ef7);var _0x521433=[_0x19064c(0x159)];const _0x31535c=await sales_return_finished[_0x19064c(0x135)](_0x94ef7),_0x430259=await warehouse[_0x19064c(0x155)]([{'$match':{'name':_0x31535c[_0x19064c(0x137)],'room':_0x31535c[_0x19064c(0x12c)]}},{'$unwind':_0x19064c(0x145)},{'$group':{'_id':_0x19064c(0x176),'name':{'$first':_0x19064c(0x178)},'product_stock':{'$first':_0x19064c(0x171)},'bay':{'$first':_0x19064c(0x172)},'bin':{'$first':_0x19064c(0x158)},'type':{'$first':_0x19064c(0x16a)},'floorlevel':{'$first':_0x19064c(0x169)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x19064c(0x16f)](_0x430259);const _0x509bbc=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x19064c(0x168),'name':{'$first':_0x19064c(0x168)}}},{'$sort':{'name':0x1}}]),_0x430feb=await warehouse[_0x19064c(0x155)]([{'$match':{'status':_0x19064c(0x174),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x4adc31=await product[_0x19064c(0x17c)]({});if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x160)){var _0x20cd20=users['English'];console[_0x19064c(0x16f)](_0x20cd20);}else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x179))var _0x20cd20=users['Hindi'];else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x14d))var _0x20cd20=users[_0x19064c(0x14d)];else{if(_0x1a621c[0x0]['language']==_0x19064c(0x18e))var _0x20cd20=users[_0x19064c(0x18e)];else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x16b))var _0x20cd20=users['French'];else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x13b))var _0x20cd20=users['Portuguese'];else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x12b))var _0x20cd20=users[_0x19064c(0x12b)];else{if(_0x1a621c[0x0][_0x19064c(0x198)]==_0x19064c(0x186))var _0x20cd20=users[_0x19064c(0x13a)];}}}}}}}_0x1066d4[_0x19064c(0x149)](_0x19064c(0x132),{'success':_0x428c25['flash'](_0x19064c(0x199)),'errors':_0x428c25['flash'](_0x19064c(0x187)),'role':_0x3f6e2e,'profile':_0x100ae1,'master_shop':_0x1a621c,'user':_0x31535c,'stock':_0x430259,'unit':_0x4adc31,'language':_0x20cd20,'warehouses':_0x509bbc,'rooms':_0x521433,'warehouse_QA':_0x430feb});}catch(_0x14f816){console[_0x19064c(0x16f)](_0x14f816);}}),router[a0_0x180c88(0x15a)]('/view/:id',auth,async(_0x24fa93,_0x35b891)=>{var _0x491c8c=a0_0x180c88;if(_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x15e)]=='QA')try{const _0x74d1a0=_0x24fa93[_0x491c8c(0x17f)]['id'],_0x422793=await sales_return[_0x491c8c(0x12d)]({'invoice':_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x180)]}),_0x20f948=await warehouse[_0x491c8c(0x12d)]({'name':_0x422793[_0x491c8c(0x137)],'room':_0x422793[_0x491c8c(0x12c)]}),{invoice:_0x202928,customer:_0x305a3e,date:_0x280da8,warehouse_name:_0x12d5be,product_name:_0x3ca86e,primary_code:_0x1289a2,secondary_code:_0x5c537c,product_code:_0x9f203e,sales_quantity:_0x44900e,stocks:_0x1b40a2,return_qty:_0x122039,note:_0x293f54,to_warehouse_name_QA:_0x564e4b,to_Room_name_QA:_0x36bdd2}=_0x24fa93['body'];if(typeof product_name_QA==_0x491c8c(0x197))var _0x3a4ec3=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x147)]],_0xcf0f71=[_0x24fa93[_0x491c8c(0x12e)]['primary_code_QA']],_0x219da5=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x15f)]],_0x1a5aab=[_0x24fa93['body']['product_code_QA']],_0x32e07c=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x14a)]],_0x435116=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x182)]],_0x4061b7=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x154)]];else var _0x3a4ec3=[..._0x24fa93['body'][_0x491c8c(0x147)]],_0xcf0f71=[..._0x24fa93[_0x491c8c(0x12e)]['primary_code_QA']],_0x219da5=[..._0x24fa93[_0x491c8c(0x12e)]['secondary_code_QA']],_0x1a5aab=[..._0x24fa93['body'][_0x491c8c(0x191)]],_0x32e07c=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x14a)]],_0x435116=[..._0x24fa93['body'][_0x491c8c(0x182)]],_0x4061b7=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x154)]];const _0x2213c5=_0x3a4ec3[_0x491c8c(0x153)](_0x5cd4c4=>{return _0x5cd4c4={'product_name':_0x5cd4c4};});_0xcf0f71['forEach']((_0x27071a,_0x3e3a9b)=>{var _0xfb8bb9=_0x491c8c;_0x2213c5[_0x3e3a9b][_0xfb8bb9(0x193)]=_0x27071a;}),_0x219da5['forEach']((_0x45bc64,_0x2536a3)=>{_0x2213c5[_0x2536a3]['secondary_code']=_0x45bc64;}),_0x1a5aab[_0x491c8c(0x173)]((_0x21cc13,_0xddde06)=>{_0x2213c5[_0xddde06]['product_code']=_0x21cc13;}),_0x32e07c['forEach']((_0x2f7504,_0xdf1885)=>{var _0x2a8a15=_0x491c8c;_0x2213c5[_0xdf1885][_0x2a8a15(0x17e)]=_0x2f7504;}),_0x435116['forEach']((_0x263e8a,_0x2a21c1)=>{var _0x560e38=_0x491c8c;_0x2213c5[_0x2a21c1][_0x560e38(0x133)]=_0x263e8a;}),_0x4061b7[_0x491c8c(0x173)]((_0x40acec,_0x4a1bbe)=>{var _0x489977=_0x491c8c;_0x2213c5[_0x4a1bbe][_0x489977(0x165)]=_0x40acec;}),_0x422793['return_sale_QA'][_0x491c8c(0x173)](_0x3c4040=>{var _0x1292b3=_0x491c8c;const _0x32d1cd=_0x20f948[_0x1292b3(0x150)]['map'](_0xd0b7cf=>{var _0x382502=_0x1292b3;_0xd0b7cf[_0x382502(0x18b)]==_0x3c4040['product_name']&&(_0xd0b7cf['product_stock']=parseInt(_0xd0b7cf[_0x382502(0x151)])+parseInt(_0x3c4040[_0x382502(0x165)]));});}),await _0x20f948[_0x491c8c(0x12f)](),_0x422793[_0x491c8c(0x180)]=_0x202928,_0x422793[_0x491c8c(0x183)]=_0x305a3e,_0x422793[_0x491c8c(0x146)]=_0x280da8,_0x422793[_0x491c8c(0x15d)]=_0x12d5be,_0x422793[_0x491c8c(0x13e)]=_0x2213c5,_0x422793[_0x491c8c(0x18d)]=_0x293f54,_0x422793[_0x491c8c(0x137)]=_0x564e4b,_0x422793[_0x491c8c(0x12c)]=_0x36bdd2;const _0x176342=await _0x422793[_0x491c8c(0x12f)](),_0x23c0e6=await c_payment_data['findOne']({'invoice':_0x24fa93[_0x491c8c(0x12e)]['invoice'],'reason':'Sale\x20Return'});_0x23c0e6[_0x491c8c(0x163)]=_0x24fa93['body'][_0x491c8c(0x163)],_0x23c0e6[_0x491c8c(0x146)]=_0x24fa93[_0x491c8c(0x12e)]['date'],await _0x23c0e6[_0x491c8c(0x12f)](),_0x24fa93[_0x491c8c(0x143)](_0x491c8c(0x199),_0x491c8c(0x125)),_0x35b891['redirect'](_0x491c8c(0x124));}catch(_0x33e94d){console['log'](_0x33e94d),_0x35b891[_0x491c8c(0x16d)](0xc8)[_0x491c8c(0x12a)]({'message':_0x33e94d[_0x491c8c(0x161)]});}else try{const _0x5c0848=_0x24fa93['params']['id'];console[_0x491c8c(0x16f)](_0x5c0848);const _0x1c0449=await sales_return['findOne']({'invoice':_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x180)]});console[_0x491c8c(0x16f)](_0x491c8c(0x18c),_0x1c0449);const _0x2cfc75=await warehouse[_0x491c8c(0x12d)]({'name':_0x1c0449['ToWarehouse'],'room':_0x1c0449['ToRoom']});console[_0x491c8c(0x16f)](_0x491c8c(0x142),_0x2cfc75);const {invoice:_0x2aa1d1,customer:_0x5b6167,date:_0xe8bece,warehouse_name:_0x4ac862,product_name:_0x4cf919,primary_code:_0x3cbd15,secondary_code:_0x216cc3,product_code:_0xec3ce1,sales_quantity:_0x1baca1,stocks:_0x14a422,return_qty:_0x43fe0e,note:_0x1b6da6,to_warehouse_name:_0x4d00a9,to_Room_name:_0x1c243a}=_0x24fa93[_0x491c8c(0x12e)];console[_0x491c8c(0x16f)](_0x24fa93[_0x491c8c(0x12e)]);if(typeof _0x4cf919==_0x491c8c(0x197))var _0x3a4ec3=[_0x24fa93['body'][_0x491c8c(0x18b)]],_0xcf0f71=[_0x24fa93['body']['primary_code']],_0x219da5=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x129)]],_0x1a5aab=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x152)]],_0x32e07c=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x17a)]],_0x435116=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x166)]],_0x4061b7=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x165)]],_0x276b4a=[_0x24fa93[_0x491c8c(0x12e)]['bay']],_0x4163ba=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x139)]],_0x133e48=[_0x24fa93['body'][_0x491c8c(0x185)]],_0x3bb59a=[_0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x190)]];else var _0x3a4ec3=[..._0x24fa93['body'][_0x491c8c(0x18b)]],_0xcf0f71=[..._0x24fa93[_0x491c8c(0x12e)]['primary_code']],_0x219da5=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x129)]],_0x1a5aab=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x152)]],_0x32e07c=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x17a)]],_0x435116=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x166)]],_0x4061b7=[..._0x24fa93[_0x491c8c(0x12e)]['return_qty']],_0x276b4a=[..._0x24fa93[_0x491c8c(0x12e)]['bay']],_0x4163ba=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x139)]],_0x133e48=[..._0x24fa93[_0x491c8c(0x12e)][_0x491c8c(0x185)]],_0x3bb59a=[..._0x24fa93[_0x491c8c(0x12e)]['floorlevel']];const _0x24457d=_0x3a4ec3[_0x491c8c(0x153)](_0x3c3414=>{return _0x3c3414={'product_name':_0x3c3414};});_0xcf0f71['forEach']((_0x3c8f2f,_0x5f212a)=>{var _0x522002=_0x491c8c;_0x24457d[_0x5f212a][_0x522002(0x193)]=_0x3c8f2f;}),_0x219da5['forEach']((_0x21c3b7,_0x3861eb)=>{var _0x4856db=_0x491c8c;_0x24457d[_0x3861eb][_0x4856db(0x129)]=_0x21c3b7;}),_0x1a5aab['forEach']((_0x4bd1ef,_0x5c6ead)=>{var _0x3dc192=_0x491c8c;_0x24457d[_0x5c6ead][_0x3dc192(0x152)]=_0x4bd1ef;}),_0x32e07c[_0x491c8c(0x173)]((_0x25ded9,_0x89260b)=>{var _0x4dc521=_0x491c8c;_0x24457d[_0x89260b][_0x4dc521(0x17e)]=_0x25ded9;}),_0x435116[_0x491c8c(0x173)]((_0x4cb65e,_0x43c4f2)=>{var _0xd58b7e=_0x491c8c;_0x24457d[_0x43c4f2][_0xd58b7e(0x133)]=_0x4cb65e;}),_0x4061b7['forEach']((_0xc9075c,_0x1dedf4)=>{var _0x494a28=_0x491c8c;_0x24457d[_0x1dedf4][_0x494a28(0x165)]=_0xc9075c;}),_0x276b4a[_0x491c8c(0x173)]((_0x47eb9e,_0x5ee91e)=>{var _0x1deff1=_0x491c8c;_0x24457d[_0x5ee91e][_0x1deff1(0x189)]=_0x47eb9e;}),_0x4163ba['forEach']((_0x5ea307,_0x5835a5)=>{var _0x4041dc=_0x491c8c;_0x24457d[_0x5835a5][_0x4041dc(0x139)]=_0x5ea307;}),_0x133e48[_0x491c8c(0x173)]((_0x1ae4c5,_0x437c8c)=>{var _0x25862f=_0x491c8c;_0x24457d[_0x437c8c][_0x25862f(0x195)]=_0x1ae4c5;}),_0x3bb59a[_0x491c8c(0x173)]((_0x2eb946,_0x48e8ad)=>{var _0x3d7266=_0x491c8c;_0x24457d[_0x48e8ad][_0x3d7266(0x190)]=_0x2eb946;});var _0x1edd05=0x0;_0x24457d[_0x491c8c(0x173)](_0x21fdfc=>{var _0x37fc66=_0x491c8c;console[_0x37fc66(0x16f)]('foreach\x20newproduct',_0x21fdfc),(parseInt(_0x21fdfc[_0x37fc66(0x17e)])<parseInt(_0x21fdfc[_0x37fc66(0x165)])||parseInt(_0x21fdfc['stock'])<parseInt(_0x21fdfc[_0x37fc66(0x165)])&&parseInt(_0x21fdfc[_0x37fc66(0x17e)])>parseInt(_0x21fdfc['return_qty'])||parseInt(_0x21fdfc[_0x37fc66(0x165)])==0x0)&&_0x1edd05++;});if(_0x1edd05!=0x0)return _0x24fa93['flash'](_0x491c8c(0x187),_0x491c8c(0x130)),_0x35b891[_0x491c8c(0x13d)](_0x491c8c(0x14c));_0x1c0449[_0x491c8c(0x134)][_0x491c8c(0x173)](_0x53e7b1=>{var _0x48ac31=_0x491c8c;const _0x50118c=_0x2cfc75[_0x48ac31(0x150)][_0x48ac31(0x153)](_0x26c693=>{var _0x56191d=_0x48ac31;_0x26c693['product_name']==_0x53e7b1[_0x56191d(0x18b)]&&_0x26c693['floorlevel']==_0x53e7b1['floorlevel']&&_0x26c693[_0x56191d(0x195)]==_0x53e7b1[_0x56191d(0x195)]&&_0x26c693[_0x56191d(0x139)]==_0x53e7b1[_0x56191d(0x139)]&&_0x26c693[_0x56191d(0x189)]==_0x53e7b1['bay']&&(_0x26c693[_0x56191d(0x151)]=parseInt(_0x26c693['product_stock'])+parseInt(_0x53e7b1['return_qty']));});}),console[_0x491c8c(0x16f)]('old_warehouse_data',_0x2cfc75),await _0x2cfc75[_0x491c8c(0x12f)](),_0x1c0449[_0x491c8c(0x180)]=_0x2aa1d1,_0x1c0449[_0x491c8c(0x183)]=_0x5b6167,_0x1c0449[_0x491c8c(0x146)]=_0xe8bece,_0x1c0449[_0x491c8c(0x15d)]=_0x4ac862,_0x1c0449[_0x491c8c(0x134)]=_0x24457d,_0x1c0449[_0x491c8c(0x18d)]=_0x1b6da6,_0x1c0449['ToWarehouse']=_0x4d00a9,_0x1c0449['ToRoom']=_0x1c243a;const _0x5a2a38=await _0x1c0449[_0x491c8c(0x12f)]();console[_0x491c8c(0x16f)]('new\x20new_data',_0x5a2a38);const _0x433b3e=await c_payment_data[_0x491c8c(0x12d)]({'invoice':_0x24fa93['body'][_0x491c8c(0x180)],'reason':_0x491c8c(0x14e)});_0x433b3e['suppliers']=_0x24fa93['body'][_0x491c8c(0x163)],_0x433b3e['date']=_0x24fa93[_0x491c8c(0x12e)]['date'],await _0x433b3e[_0x491c8c(0x12f)](),_0x24fa93['flash'](_0x491c8c(0x199),_0x491c8c(0x125)),_0x35b891[_0x491c8c(0x13d)](_0x491c8c(0x15b));}catch(_0x42ece7){console[_0x491c8c(0x16f)](_0x42ece7),_0x35b891[_0x491c8c(0x16d)](0xc8)[_0x491c8c(0x12a)]({'message':_0x42ece7[_0x491c8c(0x161)]});}}),router[a0_0x180c88(0x15a)](a0_0x180c88(0x15c),auth,async(_0x596b42,_0x4252c6)=>{var _0x1254d9=a0_0x180c88;try{const _0x5c8924=_0x596b42[_0x1254d9(0x17f)]['id'],{invoice:_0xcf13f7,customer:_0x57b0cd,payable_to_customer:_0x3ae09f,paid_amount:_0x574aff}=_0x596b42[_0x1254d9(0x12e)],_0xe1a292=await sales_return[_0x1254d9(0x135)](_0x5c8924);console[_0x1254d9(0x16f)](_0x1254d9(0x16c),_0xe1a292),console[_0x1254d9(0x16f)](_0x3ae09f),console[_0x1254d9(0x16f)](_0x574aff);var _0x15cadc=_0x3ae09f-_0x574aff;console[_0x1254d9(0x16f)](_0x1254d9(0x17b),_0x15cadc),_0xe1a292[_0x1254d9(0x177)]=parseFloat(_0x574aff)+parseFloat(_0xe1a292[_0x1254d9(0x177)]),_0xe1a292['due_amount']=_0x15cadc,console[_0x1254d9(0x16f)](_0xe1a292);const _0x3c20c8=await _0xe1a292[_0x1254d9(0x12f)]();console[_0x1254d9(0x16f)](0x1b207);const _0x173b2b=await c_payment_data['findOne']({'invoice':_0x596b42[_0x1254d9(0x12e)][_0x1254d9(0x180)],'reason':'Sale\x20Return'});console[_0x1254d9(0x16f)](_0x1254d9(0x157),_0x173b2b),_0x173b2b['amount']=_0x15cadc,await _0x173b2b[_0x1254d9(0x12f)]();let _0x42afa1=new Date(),_0xe12d12=('0'+_0x42afa1['getDate']())[_0x1254d9(0x144)](-0x2),_0x4b891c=('0'+(_0x42afa1[_0x1254d9(0x181)]()+0x1))[_0x1254d9(0x144)](-0x2),_0x406660=_0x42afa1[_0x1254d9(0x13f)](),_0x1474ab=_0x406660+'-'+_0x4b891c+'-'+_0xe12d12;const _0x2795de=new customer_payment({'invoice':_0xcf13f7,'date':_0x406660+'-'+_0x4b891c+'-'+_0xe12d12,'customer':_0x57b0cd,'reason':_0x1254d9(0x138),'amount':_0x574aff}),_0x4738b9=await _0x2795de[_0x1254d9(0x12f)]();_0x596b42[_0x1254d9(0x143)]('success',_0x1254d9(0x162)),_0x4252c6[_0x1254d9(0x13d)](_0x1254d9(0x15b));}catch(_0x11b92f){console[_0x1254d9(0x16f)](_0x11b92f);}}),router[a0_0x180c88(0x126)](a0_0x180c88(0x141),auth,async(_0x593184,_0x3003e7)=>{var _0x5b6068=a0_0x180c88;try{const {username:_0x411695,email:_0x5d6b06,role:_0x21b8ca}=_0x593184[_0x5b6068(0x16e)],_0x31f8ca=_0x593184[_0x5b6068(0x16e)],_0x2692c7=await profile[_0x5b6068(0x12d)]({'email':_0x31f8ca[_0x5b6068(0x18f)]}),_0x6a80ae=await master_shop[_0x5b6068(0x17c)]();console[_0x5b6068(0x16f)]('master',_0x6a80ae);const _0x1945ab=_0x593184[_0x5b6068(0x17f)]['id'],_0x476ae7=await sales_return[_0x5b6068(0x135)](_0x1945ab);console[_0x5b6068(0x16f)](_0x476ae7);const _0x5955d2=await customer[_0x5b6068(0x12d)]({'name':_0x476ae7[_0x5b6068(0x183)]});console[_0x5b6068(0x16f)](_0x5955d2);if(_0x6a80ae[0x0][_0x5b6068(0x198)]==_0x5b6068(0x160)){var _0x29fb63=users['English'];console['log'](_0x29fb63);}else{if(_0x6a80ae[0x0][_0x5b6068(0x198)]==_0x5b6068(0x179))var _0x29fb63=users['Hindi'];else{if(_0x6a80ae[0x0]['language']==_0x5b6068(0x14d))var _0x29fb63=users[_0x5b6068(0x14d)];else{if(_0x6a80ae[0x0][_0x5b6068(0x198)]=='Spanish')var _0x29fb63=users[_0x5b6068(0x18e)];else{if(_0x6a80ae[0x0][_0x5b6068(0x198)]==_0x5b6068(0x16b))var _0x29fb63=users[_0x5b6068(0x16b)];else{if(_0x6a80ae[0x0][_0x5b6068(0x198)]==_0x5b6068(0x13b))var _0x29fb63=users[_0x5b6068(0x170)];else{if(_0x6a80ae[0x0]['language']=='Chinese')var _0x29fb63=users['Chinese'];else{if(_0x6a80ae[0x0]['language']=='Arabic\x20(ae)')var _0x29fb63=users[_0x5b6068(0x13a)];}}}}}}}_0x3003e7[_0x5b6068(0x149)]('sales_return_invoice',{'success':_0x593184[_0x5b6068(0x143)](_0x5b6068(0x199)),'errors':_0x593184[_0x5b6068(0x143)](_0x5b6068(0x187)),'role':_0x31f8ca,'profile':_0x2692c7,'master_shop':_0x6a80ae,'customers':_0x5955d2,'sales':_0x476ae7,'language':_0x29fb63});}catch(_0x2a99b2){console[_0x5b6068(0x16f)](_0x2a99b2);}}),module[a0_0x180c88(0x123)]=router;function a0_0x4297(){var _0x29c174=['product_name_QA','120385atOGxH','render','sales_quantity_QA','express','back','German','Sale\x20Return','335599gURSiX','product_details','product_stock','product_code','map','return_qty_QA','aggregate','4hUyeHK','c_payment','$product_details.bin','Return\x20Rooms','post','/sales_return/view','/give_payment/:id','warehouse_name','for_categorize','secondary_code_QA','English\x20(US)','message','payment\x20successfull','suppliers','6774eGvdxI','return_qty','stocks','81qREkDC','$name','$product_details.floorlevel','$product_details.type','French','data','status','user','log','Portuguese','$product_details.product_stock','$product_details.bay','forEach','Enabled','../models/all_models','$product_details._id','paid_amount','$product_details.product_name','Hindi','sales_quantity','subtract','find','/view','sale_qty','params','invoice','getMonth','stocks_QA','customer','60ddKStJ','types','Arabic\x20(ae)','errors','../middleware/auth','bay','1809130rwwGJG','product_name','old_data','note','Spanish','email','floorlevel','product_code_QA','3519656TstKOP','primary_code','$customer_docs','type','2fqFVHJ','string','language','success','3038WICxzE','exports','/sales_return_finished/view','purchase\x20return\x20successfully','get','445320MjsEBs','customers','secondary_code','json','Chinese','ToRoom','findOne','body','save','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','372657zpNwFb','return_sale_edit_finished','stock','return_sale','findById','sales_return_finished','ToWarehouse','Returned\x20Payment\x20For\x20Sale\x20Return','bin','Arabic','Portuguese\x20(BR)','../public/language/languages.json','redirect','return_sale_QA','getFullYear','customer_docs','/invoice/:id','old_warehouse_data','flash','slice','$product_details','date'];a0_0x4297=function(){return _0x29c174;};return a0_0x4297();}