var a0_0x5c3639=a0_0x3563;(function(_0x495f67,_0x29d402){var _0x1cb8f4=a0_0x3563,_0x180d18=_0x495f67();while(!![]){try{var _0x4dc08c=parseInt(_0x1cb8f4(0xc5))/0x1+parseInt(_0x1cb8f4(0xed))/0x2*(parseInt(_0x1cb8f4(0xb2))/0x3)+-parseInt(_0x1cb8f4(0xbd))/0x4*(parseInt(_0x1cb8f4(0xa2))/0x5)+parseInt(_0x1cb8f4(0x9d))/0x6+parseInt(_0x1cb8f4(0xdb))/0x7+parseInt(_0x1cb8f4(0xa7))/0x8*(-parseInt(_0x1cb8f4(0xea))/0x9)+-parseInt(_0x1cb8f4(0x95))/0xa;if(_0x4dc08c===_0x29d402)break;else _0x180d18['push'](_0x180d18['shift']());}catch(_0x5e4455){_0x180d18['push'](_0x180d18['shift']());}}}(a0_0x59ab,0xb5af4));function a0_0x59ab(){var _0x2ee15c=['payment\x20successfull','/invoice/:id','English','save','aggregate','3472644KJKWPI','email','errors','bin','due_amount','master','return_sale','return_sale_edit_finished','Sale\x20Return','$product_details.primary_code','language','post','product_stock','find','forEach','8628075RdkSWC','render','Spanish','6HaLFbI','getFullYear','English\x20(US)','back','return_qty_QA','sales_quantity','c_payment','return_sale_QA','sale_qty','json','purchase\x20return\x20successfully','body','slice','product_name_QA','sales_quantity_QA','French','$customer_docs','redirect','Enabled','secondary_code','$product_details.bin','../public/language/languages.json','$product_details.type','log','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','findOne','ToWarehouse','note','sales_return_finished','success','date','getDate','product_name','primary_code','flash','for_categorize','invoice','product_code','10033830DJHhKL','$product_details.product_code','product_code_QA','primary_code_QA','map','getMonth','Portuguese\x20(BR)','name','6374958baPchD','/give_payment/:id','data','Finished\x20Goods','customer_docs','25PHqxWA','paid_amount','/sales_return/view','../models/all_models','$name','8VWnEiZ','subtract','stocks_QA','express','product_details','params','secondary_code_QA','sales_return_invoice','string','../middleware/auth','Chinese','1277832LchuVy','Hindi','new\x20new_data','$product_details.product_stock','bay','$product_details._id','$product_details.secondary_code','amount','status','QA\x20Warehouse','type','375348BJTjsH','Return\x20Rooms','foreach\x20newproduct','types','get','floorlevel','/view','/sales_return_finished/view','339006IIvyti','return_qty','customer','Arabic\x20(ae)','Portuguese','$product_details.bay','suppliers','stock','German','stocks','ToRoom','warehouse_name','/view/:id','user','Returned\x20Payment\x20For\x20Sale\x20Return','Arabic','Router'];a0_0x59ab=function(){return _0x2ee15c;};return a0_0x59ab();}function a0_0x3563(_0x43f70,_0x44b37f){var _0x59abf7=a0_0x59ab();return a0_0x3563=function(_0x3563bc,_0x328dc0){_0x3563bc=_0x3563bc-0x7d;var _0x3e5d65=_0x59abf7[_0x3563bc];return _0x3e5d65;},a0_0x3563(_0x43f70,_0x44b37f);}const express=require(a0_0x5c3639(0xaa)),app=express(),router=express[a0_0x5c3639(0xd5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x5c3639(0xa5)),auth=require(a0_0x5c3639(0xb0)),users=require(a0_0x5c3639(0x84));router[a0_0x5c3639(0xc1)](a0_0x5c3639(0xc3),auth,async(_0x1d1a26,_0x853e79)=>{var _0x115031=a0_0x5c3639;try{const {username:_0x3c2f6f,email:_0x46ce6e,role:_0xa78382}=_0x1d1a26[_0x115031(0xd2)],_0x1db89a=_0x1d1a26[_0x115031(0xd2)],_0x404998=await profile[_0x115031(0x88)]({'email':_0x1db89a[_0x115031(0xdc)]}),_0x199912=await master_shop[_0x115031(0xe8)](),_0x4872cd=await sales_return_finished['aggregate']([{'$lookup':{'from':'customers','localField':_0x115031(0xc7),'foreignField':_0x115031(0x9c),'as':_0x115031(0xa1)}},{'$unwind':_0x115031(0x7f)}]);if(_0x199912[0x0]['language']==_0x115031(0xef)){var _0x51ca38=users[_0x115031(0xd8)];console['log'](_0x51ca38);}else{if(_0x199912[0x0][_0x115031(0xe5)]=='Hindi')var _0x51ca38=users[_0x115031(0xb3)];else{if(_0x199912[0x0][_0x115031(0xe5)]==_0x115031(0xcd))var _0x51ca38=users[_0x115031(0xcd)];else{if(_0x199912[0x0][_0x115031(0xe5)]==_0x115031(0xec))var _0x51ca38=users[_0x115031(0xec)];else{if(_0x199912[0x0]['language']==_0x115031(0x7e))var _0x51ca38=users['French'];else{if(_0x199912[0x0][_0x115031(0xe5)]=='Portuguese\x20(BR)')var _0x51ca38=users[_0x115031(0xc9)];else{if(_0x199912[0x0]['language']=='Chinese')var _0x51ca38=users[_0x115031(0xb1)];else{if(_0x199912[0x0][_0x115031(0xe5)]==_0x115031(0xc8))var _0x51ca38=users[_0x115031(0xd4)];}}}}}}}_0x853e79['render'](_0x115031(0x8b),{'success':_0x1d1a26[_0x115031(0x91)](_0x115031(0x8c)),'errors':_0x1d1a26[_0x115031(0x91)](_0x115031(0xdd)),'role':_0x1db89a,'profile':_0x404998,'master_shop':_0x199912,'user':_0x4872cd,'language':_0x51ca38});}catch(_0x309211){console['log'](_0x309211);}}),router[a0_0x5c3639(0xc1)](a0_0x5c3639(0xd1),auth,async(_0x3d380f,_0x261ca5)=>{var _0x1b48da=a0_0x5c3639;try{const {username:_0x76d8af,email:_0x28f735,role:_0x4f9857}=_0x3d380f[_0x1b48da(0xd2)],_0x21ecea=_0x3d380f['user'],_0x32a584=await profile[_0x1b48da(0x88)]({'email':_0x21ecea['email']}),_0x4d816f=await master_shop[_0x1b48da(0xe8)]();console[_0x1b48da(0x86)](_0x1b48da(0xe0),_0x4d816f);const _0x3ad81c=_0x3d380f['params']['id'];console[_0x1b48da(0x86)](_0x3ad81c);var _0x4d1b0f=[_0x1b48da(0xbe)];const _0x109de1=await sales_return_finished['findById'](_0x3ad81c),_0x37c090=await warehouse[_0x1b48da(0xda)]([{'$match':{'name':_0x109de1['ToWarehouse'],'room':_0x109de1[_0x1b48da(0xcf)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x1b48da(0xb7),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1b48da(0xb5)},'bay':{'$first':_0x1b48da(0xca)},'bin':{'$first':_0x1b48da(0x83)},'type':{'$first':_0x1b48da(0x85)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x1b48da(0xe4)},'secondary_code':{'$first':_0x1b48da(0xb8)},'product_code':{'$first':_0x1b48da(0x96)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x1b48da(0x86)](_0x37c090);const _0x2dc912=await warehouse[_0x1b48da(0xda)]([{'$match':{'status':_0x1b48da(0x81),'warehouse_category':_0x1b48da(0xa0)}},{'$group':{'_id':_0x1b48da(0xa6),'name':{'$first':_0x1b48da(0xa6)}}},{'$sort':{'name':0x1}}]),_0x5d27aa=await warehouse[_0x1b48da(0xda)]([{'$match':{'status':_0x1b48da(0x81),'name':_0x1b48da(0xbb)}},{'$group':{'_id':_0x1b48da(0xa6),'name':{'$first':_0x1b48da(0xa6)}}},{'$sort':{'name':0x1}}]),_0x228cf1=await product[_0x1b48da(0xe8)]({});if(_0x4d816f[0x0][_0x1b48da(0xe5)]==_0x1b48da(0xef)){var _0x411f49=users['English'];console['log'](_0x411f49);}else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]=='Hindi')var _0x411f49=users[_0x1b48da(0xb3)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]==_0x1b48da(0xcd))var _0x411f49=users[_0x1b48da(0xcd)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]=='Spanish')var _0x411f49=users[_0x1b48da(0xec)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]==_0x1b48da(0x7e))var _0x411f49=users[_0x1b48da(0x7e)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]=='Portuguese\x20(BR)')var _0x411f49=users[_0x1b48da(0xc9)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]==_0x1b48da(0xb1))var _0x411f49=users[_0x1b48da(0xb1)];else{if(_0x4d816f[0x0][_0x1b48da(0xe5)]==_0x1b48da(0xc8))var _0x411f49=users[_0x1b48da(0xd4)];}}}}}}}_0x261ca5[_0x1b48da(0xeb)](_0x1b48da(0xe2),{'success':_0x3d380f['flash'](_0x1b48da(0x8c)),'errors':_0x3d380f[_0x1b48da(0x91)](_0x1b48da(0xdd)),'role':_0x21ecea,'profile':_0x32a584,'master_shop':_0x4d816f,'user':_0x109de1,'stock':_0x37c090,'unit':_0x228cf1,'language':_0x411f49,'warehouses':_0x2dc912,'rooms':_0x4d1b0f,'warehouse_QA':_0x5d27aa});}catch(_0x18fcb3){console[_0x1b48da(0x86)](_0x18fcb3);}}),router[a0_0x5c3639(0xe6)](a0_0x5c3639(0xd1),auth,async(_0x3b58ea,_0x2c426a)=>{var _0x38260d=a0_0x5c3639;if(_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x92)]=='QA')try{const _0xbacf83=_0x3b58ea[_0x38260d(0xac)]['id'],_0x5269ab=await sales_return[_0x38260d(0x88)]({'invoice':_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x93)]}),_0x3c5156=await warehouse[_0x38260d(0x88)]({'name':_0x5269ab[_0x38260d(0x89)],'room':_0x5269ab[_0x38260d(0xcf)]}),{invoice:_0x1e554f,customer:_0x498f3b,date:_0x5c8624,warehouse_name:_0x364234,product_name:_0x455dde,primary_code:_0x80e11d,secondary_code:_0xab9134,product_code:_0x484571,sales_quantity:_0x1a4670,stocks:_0x16ba9b,return_qty:_0x3ca145,note:_0x3f9e72,to_warehouse_name_QA:_0x33e1a6,to_Room_name_QA:_0x4b7178}=_0x3b58ea[_0x38260d(0xf8)];if(typeof product_name_QA==_0x38260d(0xaf))var _0x221b09=[_0x3b58ea[_0x38260d(0xf8)]['product_name_QA']],_0x3225d5=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x98)]],_0x4e9744=[_0x3b58ea[_0x38260d(0xf8)]['secondary_code_QA']],_0x5392ab=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x97)]],_0x98c54e=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x7d)]],_0x1e36f9=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xa9)]],_0xad9f65=[_0x3b58ea['body'][_0x38260d(0xf1)]];else var _0x221b09=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xfa)]],_0x3225d5=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x98)]],_0x4e9744=[..._0x3b58ea['body'][_0x38260d(0xad)]],_0x5392ab=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x97)]],_0x98c54e=[..._0x3b58ea[_0x38260d(0xf8)]['sales_quantity_QA']],_0x1e36f9=[..._0x3b58ea[_0x38260d(0xf8)]['stocks_QA']],_0xad9f65=[..._0x3b58ea[_0x38260d(0xf8)]['return_qty_QA']];const _0xdedab5=_0x221b09['map'](_0x2e369a=>{return _0x2e369a={'product_name':_0x2e369a};});_0x3225d5[_0x38260d(0xe9)]((_0x5ccfc3,_0x1dd2f8)=>{var _0x4c24ba=_0x38260d;_0xdedab5[_0x1dd2f8][_0x4c24ba(0x90)]=_0x5ccfc3;}),_0x4e9744[_0x38260d(0xe9)]((_0x1f4c64,_0x229ea4)=>{var _0x48b85=_0x38260d;_0xdedab5[_0x229ea4][_0x48b85(0x82)]=_0x1f4c64;}),_0x5392ab[_0x38260d(0xe9)]((_0x3f1d41,_0x14f9f5)=>{var _0x556a6c=_0x38260d;_0xdedab5[_0x14f9f5][_0x556a6c(0x94)]=_0x3f1d41;}),_0x98c54e[_0x38260d(0xe9)]((_0x48d66c,_0x56fee2)=>{var _0x53d6c9=_0x38260d;_0xdedab5[_0x56fee2][_0x53d6c9(0xf5)]=_0x48d66c;}),_0x1e36f9[_0x38260d(0xe9)]((_0x47843b,_0x75ad8a)=>{var _0x16fa08=_0x38260d;_0xdedab5[_0x75ad8a][_0x16fa08(0xcc)]=_0x47843b;}),_0xad9f65[_0x38260d(0xe9)]((_0x5e2553,_0x223b85)=>{_0xdedab5[_0x223b85]['return_qty']=_0x5e2553;}),_0x5269ab['return_sale_QA']['forEach'](_0x3214e2=>{var _0x497f67=_0x38260d;const _0x2db2f0=_0x3c5156[_0x497f67(0xab)][_0x497f67(0x99)](_0x1647cb=>{var _0x37a27c=_0x497f67;_0x1647cb['product_name']==_0x3214e2['product_name']&&(_0x1647cb['product_stock']=parseInt(_0x1647cb[_0x37a27c(0xe7)])+parseInt(_0x3214e2['return_qty']));});}),await _0x3c5156[_0x38260d(0xd9)](),_0x5269ab[_0x38260d(0x93)]=_0x1e554f,_0x5269ab[_0x38260d(0xc7)]=_0x498f3b,_0x5269ab[_0x38260d(0x8d)]=_0x5c8624,_0x5269ab[_0x38260d(0xd0)]=_0x364234,_0x5269ab[_0x38260d(0xf4)]=_0xdedab5,_0x5269ab['note']=_0x3f9e72,_0x5269ab[_0x38260d(0x89)]=_0x33e1a6,_0x5269ab['ToRoom']=_0x4b7178;const _0x13a691=await _0x5269ab[_0x38260d(0xd9)](),_0x510522=await c_payment_data[_0x38260d(0x88)]({'invoice':_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x93)],'reason':'Sale\x20Return'});_0x510522[_0x38260d(0xcb)]=_0x3b58ea['body']['suppliers'],_0x510522[_0x38260d(0x8d)]=_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x8d)],await _0x510522[_0x38260d(0xd9)](),_0x3b58ea['flash'](_0x38260d(0x8c),_0x38260d(0xf7)),_0x2c426a[_0x38260d(0x80)](_0x38260d(0xc4));}catch(_0x42f0b1){console[_0x38260d(0x86)](_0x42f0b1),_0x2c426a[_0x38260d(0xba)](0xc8)[_0x38260d(0xf6)]({'message':_0x42f0b1['message']});}else try{const _0x9c163b=_0x3b58ea[_0x38260d(0xac)]['id'];console['log'](_0x9c163b);const _0x1646d1=await sales_return[_0x38260d(0x88)]({'invoice':_0x3b58ea['body'][_0x38260d(0x93)]});console[_0x38260d(0x86)]('old_data',_0x1646d1);const _0x4c26b3=await warehouse[_0x38260d(0x88)]({'name':_0x1646d1['ToWarehouse'],'room':_0x1646d1[_0x38260d(0xcf)]});console[_0x38260d(0x86)]('old_warehouse_data',_0x4c26b3);const {invoice:_0x4c70c7,customer:_0x104ed9,date:_0x2f1faf,warehouse_name:_0x12bc76,product_name:_0x415d35,primary_code:_0x5b4ef6,secondary_code:_0x2b9b9d,product_code:_0x18bbfc,sales_quantity:_0xcd0834,stocks:_0x262762,return_qty:_0x2cc133,note:_0x294ccc,to_warehouse_name:_0x539901,to_Room_name:_0x854765}=_0x3b58ea[_0x38260d(0xf8)];console[_0x38260d(0x86)](_0x3b58ea[_0x38260d(0xf8)]);if(typeof _0x415d35==_0x38260d(0xaf))var _0x221b09=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x8f)]],_0x3225d5=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x90)]],_0x4e9744=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x82)]],_0x5392ab=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x94)]],_0x98c54e=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xf2)]],_0x1e36f9=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xce)]],_0xad9f65=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xc6)]],_0x134768=[_0x3b58ea[_0x38260d(0xf8)]['bay']],_0x163284=[_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xde)]],_0x5955c1=[_0x3b58ea[_0x38260d(0xf8)]['types']],_0x53605a=[_0x3b58ea['body'][_0x38260d(0xc2)]];else var _0x221b09=[..._0x3b58ea['body'][_0x38260d(0x8f)]],_0x3225d5=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x90)]],_0x4e9744=[..._0x3b58ea[_0x38260d(0xf8)]['secondary_code']],_0x5392ab=[..._0x3b58ea[_0x38260d(0xf8)]['product_code']],_0x98c54e=[..._0x3b58ea['body'][_0x38260d(0xf2)]],_0x1e36f9=[..._0x3b58ea['body'][_0x38260d(0xce)]],_0xad9f65=[..._0x3b58ea['body']['return_qty']],_0x134768=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xb6)]],_0x163284=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xde)]],_0x5955c1=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xc0)]],_0x53605a=[..._0x3b58ea[_0x38260d(0xf8)][_0x38260d(0xc2)]];const _0x1a1b2e=_0x221b09[_0x38260d(0x99)](_0x2aa962=>{return _0x2aa962={'product_name':_0x2aa962};});_0x3225d5['forEach']((_0x584790,_0x435a3c)=>{var _0x523aa7=_0x38260d;_0x1a1b2e[_0x435a3c][_0x523aa7(0x90)]=_0x584790;}),_0x4e9744[_0x38260d(0xe9)]((_0x2feb84,_0x225b7f)=>{var _0x4db54d=_0x38260d;_0x1a1b2e[_0x225b7f][_0x4db54d(0x82)]=_0x2feb84;}),_0x5392ab[_0x38260d(0xe9)]((_0x3398b2,_0x28821e)=>{_0x1a1b2e[_0x28821e]['product_code']=_0x3398b2;}),_0x98c54e[_0x38260d(0xe9)]((_0x393668,_0x40d042)=>{var _0xbeaa6=_0x38260d;_0x1a1b2e[_0x40d042][_0xbeaa6(0xf5)]=_0x393668;}),_0x1e36f9[_0x38260d(0xe9)]((_0x471816,_0x1810d4)=>{_0x1a1b2e[_0x1810d4]['stock']=_0x471816;}),_0xad9f65[_0x38260d(0xe9)]((_0x1695ce,_0x3f1271)=>{var _0x34161b=_0x38260d;_0x1a1b2e[_0x3f1271][_0x34161b(0xc6)]=_0x1695ce;}),_0x134768[_0x38260d(0xe9)]((_0x20fb6b,_0x2cc233)=>{var _0x75141=_0x38260d;_0x1a1b2e[_0x2cc233][_0x75141(0xb6)]=_0x20fb6b;}),_0x163284[_0x38260d(0xe9)]((_0x402d5b,_0x138c05)=>{_0x1a1b2e[_0x138c05]['bin']=_0x402d5b;}),_0x5955c1['forEach']((_0x172521,_0x47efed)=>{var _0x15574b=_0x38260d;_0x1a1b2e[_0x47efed][_0x15574b(0xbc)]=_0x172521;}),_0x53605a['forEach']((_0xcf2e5,_0x17f55b)=>{_0x1a1b2e[_0x17f55b]['floorlevel']=_0xcf2e5;});var _0x13c2b1=0x0;_0x1a1b2e[_0x38260d(0xe9)](_0x1ea014=>{var _0x58581d=_0x38260d;console[_0x58581d(0x86)](_0x58581d(0xbf),_0x1ea014),(parseInt(_0x1ea014[_0x58581d(0xf5)])<parseInt(_0x1ea014[_0x58581d(0xc6)])||parseInt(_0x1ea014[_0x58581d(0xcc)])<parseInt(_0x1ea014[_0x58581d(0xc6)])&&parseInt(_0x1ea014[_0x58581d(0xf5)])>parseInt(_0x1ea014[_0x58581d(0xc6)])||parseInt(_0x1ea014[_0x58581d(0xc6)])==0x0)&&_0x13c2b1++;});if(_0x13c2b1!=0x0)return _0x3b58ea['flash']('errors',_0x38260d(0x87)),_0x2c426a[_0x38260d(0x80)](_0x38260d(0xf0));_0x1646d1[_0x38260d(0xe1)][_0x38260d(0xe9)](_0x40968a=>{var _0x40d927=_0x38260d;const _0x2da8fa=_0x4c26b3[_0x40d927(0xab)]['map'](_0x3ace5f=>{var _0x2380f0=_0x40d927;_0x3ace5f[_0x2380f0(0x8f)]==_0x40968a[_0x2380f0(0x8f)]&&_0x3ace5f[_0x2380f0(0xc2)]==_0x40968a[_0x2380f0(0xc2)]&&_0x3ace5f[_0x2380f0(0xbc)]==_0x40968a[_0x2380f0(0xbc)]&&_0x3ace5f[_0x2380f0(0xde)]==_0x40968a['bin']&&_0x3ace5f[_0x2380f0(0xb6)]==_0x40968a[_0x2380f0(0xb6)]&&(_0x3ace5f['product_stock']=parseInt(_0x3ace5f[_0x2380f0(0xe7)])+parseInt(_0x40968a[_0x2380f0(0xc6)]));});}),console[_0x38260d(0x86)]('old_warehouse_data',_0x4c26b3),await _0x4c26b3[_0x38260d(0xd9)](),_0x1646d1[_0x38260d(0x93)]=_0x4c70c7,_0x1646d1[_0x38260d(0xc7)]=_0x104ed9,_0x1646d1[_0x38260d(0x8d)]=_0x2f1faf,_0x1646d1[_0x38260d(0xd0)]=_0x12bc76,_0x1646d1[_0x38260d(0xe1)]=_0x1a1b2e,_0x1646d1[_0x38260d(0x8a)]=_0x294ccc,_0x1646d1['ToWarehouse']=_0x539901,_0x1646d1[_0x38260d(0xcf)]=_0x854765;const _0x1c20ad=await _0x1646d1[_0x38260d(0xd9)]();console['log'](_0x38260d(0xb4),_0x1c20ad);const _0x2e6f2b=await c_payment_data['findOne']({'invoice':_0x3b58ea[_0x38260d(0xf8)][_0x38260d(0x93)],'reason':'Sale\x20Return'});_0x2e6f2b['suppliers']=_0x3b58ea['body']['suppliers'],_0x2e6f2b[_0x38260d(0x8d)]=_0x3b58ea['body'][_0x38260d(0x8d)],await _0x2e6f2b[_0x38260d(0xd9)](),_0x3b58ea[_0x38260d(0x91)](_0x38260d(0x8c),_0x38260d(0xf7)),_0x2c426a[_0x38260d(0x80)]('/sales_return/view');}catch(_0x1c124e){console[_0x38260d(0x86)](_0x1c124e),_0x2c426a[_0x38260d(0xba)](0xc8)[_0x38260d(0xf6)]({'message':_0x1c124e['message']});}}),router[a0_0x5c3639(0xe6)](a0_0x5c3639(0x9e),auth,async(_0x48a1cb,_0x367232)=>{var _0xed58f3=a0_0x5c3639;try{const _0x54aa44=_0x48a1cb[_0xed58f3(0xac)]['id'],{invoice:_0x1d34c7,customer:_0x4b8ea8,payable_to_customer:_0x457ccb,paid_amount:_0x355d16}=_0x48a1cb[_0xed58f3(0xf8)],_0x5c06d2=await sales_return['findById'](_0x54aa44);console[_0xed58f3(0x86)](_0xed58f3(0x9f),_0x5c06d2),console[_0xed58f3(0x86)](_0x457ccb),console[_0xed58f3(0x86)](_0x355d16);var _0x2ea82e=_0x457ccb-_0x355d16;console['log'](_0xed58f3(0xa8),_0x2ea82e),_0x5c06d2[_0xed58f3(0xa3)]=parseFloat(_0x355d16)+parseFloat(_0x5c06d2['paid_amount']),_0x5c06d2[_0xed58f3(0xdf)]=_0x2ea82e,console[_0xed58f3(0x86)](_0x5c06d2);const _0x519267=await _0x5c06d2['save']();console[_0xed58f3(0x86)](0x1b207);const _0x996436=await c_payment_data[_0xed58f3(0x88)]({'invoice':_0x48a1cb[_0xed58f3(0xf8)][_0xed58f3(0x93)],'reason':_0xed58f3(0xe3)});console['log'](_0xed58f3(0xf3),_0x996436),_0x996436[_0xed58f3(0xb9)]=_0x2ea82e,await _0x996436['save']();let _0x3f55d6=new Date(),_0x1bc1a5=('0'+_0x3f55d6[_0xed58f3(0x8e)]())[_0xed58f3(0xf9)](-0x2),_0x34a672=('0'+(_0x3f55d6[_0xed58f3(0x9a)]()+0x1))[_0xed58f3(0xf9)](-0x2),_0x3b6fad=_0x3f55d6[_0xed58f3(0xee)](),_0x37a1d0=_0x3b6fad+'-'+_0x34a672+'-'+_0x1bc1a5;const _0x2fbf8d=new customer_payment({'invoice':_0x1d34c7,'date':_0x3b6fad+'-'+_0x34a672+'-'+_0x1bc1a5,'customer':_0x4b8ea8,'reason':_0xed58f3(0xd3),'amount':_0x355d16}),_0x544f86=await _0x2fbf8d[_0xed58f3(0xd9)]();_0x48a1cb[_0xed58f3(0x91)](_0xed58f3(0x8c),_0xed58f3(0xd6)),_0x367232[_0xed58f3(0x80)](_0xed58f3(0xa4));}catch(_0xe74e52){console[_0xed58f3(0x86)](_0xe74e52);}}),router[a0_0x5c3639(0xc1)](a0_0x5c3639(0xd7),auth,async(_0x1172ab,_0x1e3be8)=>{var _0x438db9=a0_0x5c3639;try{const {username:_0x1bf8d1,email:_0x35eaf1,role:_0x314be5}=_0x1172ab[_0x438db9(0xd2)],_0x2f23ca=_0x1172ab['user'],_0x205988=await profile[_0x438db9(0x88)]({'email':_0x2f23ca['email']}),_0x18eb8d=await master_shop['find']();console[_0x438db9(0x86)](_0x438db9(0xe0),_0x18eb8d);const _0x341b65=_0x1172ab[_0x438db9(0xac)]['id'],_0xd08a0b=await sales_return['findById'](_0x341b65);console[_0x438db9(0x86)](_0xd08a0b);const _0x32812b=await customer['findOne']({'name':_0xd08a0b[_0x438db9(0xc7)]});console[_0x438db9(0x86)](_0x32812b);if(_0x18eb8d[0x0]['language']==_0x438db9(0xef)){var _0x4630b0=users['English'];console[_0x438db9(0x86)](_0x4630b0);}else{if(_0x18eb8d[0x0]['language']=='Hindi')var _0x4630b0=users[_0x438db9(0xb3)];else{if(_0x18eb8d[0x0][_0x438db9(0xe5)]=='German')var _0x4630b0=users['German'];else{if(_0x18eb8d[0x0][_0x438db9(0xe5)]=='Spanish')var _0x4630b0=users[_0x438db9(0xec)];else{if(_0x18eb8d[0x0][_0x438db9(0xe5)]==_0x438db9(0x7e))var _0x4630b0=users[_0x438db9(0x7e)];else{if(_0x18eb8d[0x0]['language']==_0x438db9(0x9b))var _0x4630b0=users[_0x438db9(0xc9)];else{if(_0x18eb8d[0x0][_0x438db9(0xe5)]==_0x438db9(0xb1))var _0x4630b0=users[_0x438db9(0xb1)];else{if(_0x18eb8d[0x0][_0x438db9(0xe5)]=='Arabic\x20(ae)')var _0x4630b0=users[_0x438db9(0xd4)];}}}}}}}_0x1e3be8[_0x438db9(0xeb)](_0x438db9(0xae),{'success':_0x1172ab['flash'](_0x438db9(0x8c)),'errors':_0x1172ab['flash'](_0x438db9(0xdd)),'role':_0x2f23ca,'profile':_0x205988,'master_shop':_0x18eb8d,'customers':_0x32812b,'sales':_0xd08a0b,'language':_0x4630b0});}catch(_0x19a70a){console[_0x438db9(0x86)](_0x19a70a);}}),module['exports']=router;