function a0_0x2869(){var _0x58368a=['product_code_QA','Arabic','product_code','bin','map','getFullYear','for_categorize','log','Return\x20Rooms','84RiiECn','stocks_QA','date','$name','$product_details.secondary_code','8FUqcFD','secondary_code_QA','return_sale_edit_finished','Returned\x20Payment\x20For\x20Sale\x20Return','string','amount','c_payment','$product_details._id','due_amount','63665hbUoAa','message','/give_payment/:id','aggregate','forEach','Hindi','$product_details.type','Arabic\x20(ae)','get','stock','findById','language','email','product_details','267705HTFTPH','body','175553qMPayE','foreach\x20newproduct','express','English\x20(US)','718NwTDtK','1346RhOAzr','../models/all_models','user','Enabled','type','Finished\x20Goods','German','Chinese','master','paid_amount','json','sales_quantity','654669dwQRrp','find','/sales_return/view','render','getDate','secondary_code','$product_details.product_stock','983872XhCbec','primary_code','success','name','$product_details.floorlevel','flash','sale_qty','ToRoom','return_qty','/view/:id','params','errors','data','payment\x20successfull','/invoice/:id','product_stock','../public/language/languages.json','ToWarehouse','product_name_QA','Portuguese','French','slice','Portuguese\x20(BR)','findOne','customer','English','old_data','$customer_docs','customers','customer_docs','getMonth','primary_code_QA','post','11GAizmi','status','bay','9889090loHWOA','sales_return_finished','new\x20new_data','return_qty_QA','QA\x20Warehouse','$product_details.bay','return_sale_QA','redirect','../middleware/auth','suppliers','invoice','warehouse_name','$product_details.product_code','/sales_return_finished/view','return_sale','subtract','floorlevel','Sale\x20Return','product_name','note','stocks','sales_quantity_QA','save','back','Router','Spanish','$product_details.rack'];a0_0x2869=function(){return _0x58368a;};return a0_0x2869();}var a0_0x54a3c4=a0_0x2445;function a0_0x2445(_0x351309,_0x3b5b8b){var _0x28697e=a0_0x2869();return a0_0x2445=function(_0x244525,_0x2421ac){_0x244525=_0x244525-0x185;var _0x37ff4a=_0x28697e[_0x244525];return _0x37ff4a;},a0_0x2445(_0x351309,_0x3b5b8b);}(function(_0x467bf5,_0x58b2b0){var _0x3fb4e2=a0_0x2445,_0x542061=_0x467bf5();while(!![]){try{var _0x2c3356=parseInt(_0x3fb4e2(0x1e8))/0x1*(-parseInt(_0x3fb4e2(0x1e7))/0x2)+parseInt(_0x3fb4e2(0x1f4))/0x3+parseInt(_0x3fb4e2(0x1ca))/0x4*(-parseInt(_0x3fb4e2(0x1d3))/0x5)+parseInt(_0x3fb4e2(0x1c5))/0x6*(-parseInt(_0x3fb4e2(0x1e3))/0x7)+-parseInt(_0x3fb4e2(0x1fb))/0x8+parseInt(_0x3fb4e2(0x1e1))/0x9+parseInt(_0x3fb4e2(0x1a1))/0xa*(parseInt(_0x3fb4e2(0x19e))/0xb);if(_0x2c3356===_0x58b2b0)break;else _0x542061['push'](_0x542061['shift']());}catch(_0x354d85){_0x542061['push'](_0x542061['shift']());}}}(a0_0x2869,0x3e09b));const express=require(a0_0x54a3c4(0x1e5)),app=express(),router=express[a0_0x54a3c4(0x1b9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x54a3c4(0x1e9)),auth=require(a0_0x54a3c4(0x1a9)),users=require(a0_0x54a3c4(0x18d));router['get']('/view',auth,async(_0x1526c4,_0x427702)=>{var _0x1ac857=a0_0x54a3c4;try{const {username:_0x2c4173,email:_0x141705,role:_0x5daae3}=_0x1526c4[_0x1ac857(0x1ea)],_0x43f78e=_0x1526c4[_0x1ac857(0x1ea)],_0x438fac=await profile[_0x1ac857(0x194)]({'email':_0x43f78e[_0x1ac857(0x1df)]}),_0x3465b3=await master_shop[_0x1ac857(0x1f5)](),_0x4df5b6=await sales_return_finished[_0x1ac857(0x1d6)]([{'$lookup':{'from':_0x1ac857(0x199),'localField':_0x1ac857(0x195),'foreignField':_0x1ac857(0x1fe),'as':_0x1ac857(0x19a)}},{'$unwind':_0x1ac857(0x198)}]);if(_0x3465b3[0x0][_0x1ac857(0x1de)]==_0x1ac857(0x1e6)){var _0x3eb119=users[_0x1ac857(0x196)];console[_0x1ac857(0x1c3)](_0x3eb119);}else{if(_0x3465b3[0x0]['language']==_0x1ac857(0x1d8))var _0x3eb119=users[_0x1ac857(0x1d8)];else{if(_0x3465b3[0x0][_0x1ac857(0x1de)]==_0x1ac857(0x1ee))var _0x3eb119=users[_0x1ac857(0x1ee)];else{if(_0x3465b3[0x0][_0x1ac857(0x1de)]==_0x1ac857(0x1ba))var _0x3eb119=users[_0x1ac857(0x1ba)];else{if(_0x3465b3[0x0][_0x1ac857(0x1de)]=='French')var _0x3eb119=users[_0x1ac857(0x191)];else{if(_0x3465b3[0x0]['language']==_0x1ac857(0x193))var _0x3eb119=users[_0x1ac857(0x190)];else{if(_0x3465b3[0x0][_0x1ac857(0x1de)]==_0x1ac857(0x1ef))var _0x3eb119=users[_0x1ac857(0x1ef)];else{if(_0x3465b3[0x0][_0x1ac857(0x1de)]==_0x1ac857(0x1da))var _0x3eb119=users[_0x1ac857(0x1bd)];}}}}}}}_0x427702[_0x1ac857(0x1f7)](_0x1ac857(0x1a2),{'success':_0x1526c4[_0x1ac857(0x200)](_0x1ac857(0x1fd)),'errors':_0x1526c4[_0x1ac857(0x200)](_0x1ac857(0x188)),'role':_0x43f78e,'profile':_0x438fac,'master_shop':_0x3465b3,'user':_0x4df5b6,'language':_0x3eb119});}catch(_0x36ba4a){console[_0x1ac857(0x1c3)](_0x36ba4a);}}),router[a0_0x54a3c4(0x1db)](a0_0x54a3c4(0x186),auth,async(_0x30db6c,_0x41d1b2)=>{var _0x5ba0c9=a0_0x54a3c4;try{const {username:_0x188035,email:_0x5c4ce7,role:_0x1b8afc}=_0x30db6c[_0x5ba0c9(0x1ea)],_0x149520=_0x30db6c['user'],_0x200f1f=await profile['findOne']({'email':_0x149520[_0x5ba0c9(0x1df)]}),_0xbf0103=await master_shop['find']();console[_0x5ba0c9(0x1c3)](_0x5ba0c9(0x1f0),_0xbf0103);const _0x32841a=_0x30db6c[_0x5ba0c9(0x187)]['id'];console[_0x5ba0c9(0x1c3)](_0x32841a);var _0x94b4d5=[_0x5ba0c9(0x1c4)];const _0x2983f8=await sales_return_finished[_0x5ba0c9(0x1dd)](_0x32841a),_0x300c02=await warehouse[_0x5ba0c9(0x1d6)]([{'$match':{'name':_0x2983f8['ToWarehouse'],'room':_0x2983f8[_0x5ba0c9(0x202)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x5ba0c9(0x1d1),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x5ba0c9(0x1fa)},'bay':{'$first':_0x5ba0c9(0x1a6)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x5ba0c9(0x1d9)},'floorlevel':{'$first':_0x5ba0c9(0x1ff)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5ba0c9(0x1c9)},'product_code':{'$first':_0x5ba0c9(0x1ad)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5ba0c9(0x1bb)}}}]);console[_0x5ba0c9(0x1c3)](_0x300c02);const _0x5644fa=await warehouse[_0x5ba0c9(0x1d6)]([{'$match':{'status':_0x5ba0c9(0x1eb),'warehouse_category':_0x5ba0c9(0x1ed)}},{'$group':{'_id':_0x5ba0c9(0x1c8),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x5e8a06=await warehouse[_0x5ba0c9(0x1d6)]([{'$match':{'status':'Enabled','name':_0x5ba0c9(0x1a5)}},{'$group':{'_id':_0x5ba0c9(0x1c8),'name':{'$first':_0x5ba0c9(0x1c8)}}},{'$sort':{'name':0x1}}]),_0xa8cf1c=await product['find']({});if(_0xbf0103[0x0]['language']==_0x5ba0c9(0x1e6)){var _0x1d5b1d=users[_0x5ba0c9(0x196)];console[_0x5ba0c9(0x1c3)](_0x1d5b1d);}else{if(_0xbf0103[0x0][_0x5ba0c9(0x1de)]==_0x5ba0c9(0x1d8))var _0x1d5b1d=users[_0x5ba0c9(0x1d8)];else{if(_0xbf0103[0x0]['language']=='German')var _0x1d5b1d=users[_0x5ba0c9(0x1ee)];else{if(_0xbf0103[0x0][_0x5ba0c9(0x1de)]==_0x5ba0c9(0x1ba))var _0x1d5b1d=users[_0x5ba0c9(0x1ba)];else{if(_0xbf0103[0x0]['language']==_0x5ba0c9(0x191))var _0x1d5b1d=users[_0x5ba0c9(0x191)];else{if(_0xbf0103[0x0][_0x5ba0c9(0x1de)]==_0x5ba0c9(0x193))var _0x1d5b1d=users['Portuguese'];else{if(_0xbf0103[0x0][_0x5ba0c9(0x1de)]=='Chinese')var _0x1d5b1d=users['Chinese'];else{if(_0xbf0103[0x0][_0x5ba0c9(0x1de)]=='Arabic\x20(ae)')var _0x1d5b1d=users[_0x5ba0c9(0x1bd)];}}}}}}}_0x41d1b2['render'](_0x5ba0c9(0x1cc),{'success':_0x30db6c[_0x5ba0c9(0x200)]('success'),'errors':_0x30db6c[_0x5ba0c9(0x200)]('errors'),'role':_0x149520,'profile':_0x200f1f,'master_shop':_0xbf0103,'user':_0x2983f8,'stock':_0x300c02,'unit':_0xa8cf1c,'language':_0x1d5b1d,'warehouses':_0x5644fa,'rooms':_0x94b4d5,'warehouse_QA':_0x5e8a06});}catch(_0x22c293){console[_0x5ba0c9(0x1c3)](_0x22c293);}}),router[a0_0x54a3c4(0x19d)]('/view/:id',auth,async(_0x53b13c,_0x54a6dc)=>{var _0x2f1d55=a0_0x54a3c4;if(_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1c2)]=='QA')try{const _0x5c2339=_0x53b13c['params']['id'],_0x11f93e=await sales_return['findOne']({'invoice':_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1ab)]}),_0x2e75ab=await warehouse[_0x2f1d55(0x194)]({'name':_0x11f93e[_0x2f1d55(0x18e)],'room':_0x11f93e['ToRoom']}),{invoice:_0xa02b68,customer:_0x85d7fe,date:_0xd2f859,warehouse_name:_0x35e87e,product_name:_0x252e19,primary_code:_0x18c6fc,secondary_code:_0x34826d,product_code:_0x36fb26,sales_quantity:_0x379b27,stocks:_0x35dda7,return_qty:_0x47ac3e,note:_0x3d28c0,to_warehouse_name_QA:_0x3e87d9,to_Room_name_QA:_0x3fcd88}=_0x53b13c[_0x2f1d55(0x1e2)];if(typeof product_name_QA==_0x2f1d55(0x1ce))var _0x4b9e02=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x18f)]],_0x5673cf=[_0x53b13c[_0x2f1d55(0x1e2)]['primary_code_QA']],_0x479a56=[_0x53b13c['body']['secondary_code_QA']],_0x3d3637=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1bc)]],_0x554c21=[_0x53b13c['body'][_0x2f1d55(0x1b6)]],_0x7d6782=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1c6)]],_0x117292=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1a4)]];else var _0x4b9e02=[..._0x53b13c['body']['product_name_QA']],_0x5673cf=[..._0x53b13c['body'][_0x2f1d55(0x19c)]],_0x479a56=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1cb)]],_0x3d3637=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1bc)]],_0x554c21=[..._0x53b13c['body']['sales_quantity_QA']],_0x7d6782=[..._0x53b13c['body'][_0x2f1d55(0x1c6)]],_0x117292=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1a4)]];const _0x195423=_0x4b9e02[_0x2f1d55(0x1c0)](_0x37f648=>{return _0x37f648={'product_name':_0x37f648};});_0x5673cf['forEach']((_0x44b234,_0x1805fa)=>{var _0x5f3054=_0x2f1d55;_0x195423[_0x1805fa][_0x5f3054(0x1fc)]=_0x44b234;}),_0x479a56[_0x2f1d55(0x1d7)]((_0x50c420,_0x4e02da)=>{var _0x21e7cc=_0x2f1d55;_0x195423[_0x4e02da][_0x21e7cc(0x1f9)]=_0x50c420;}),_0x3d3637[_0x2f1d55(0x1d7)]((_0x30098f,_0x1173fe)=>{var _0xc9f445=_0x2f1d55;_0x195423[_0x1173fe][_0xc9f445(0x1be)]=_0x30098f;}),_0x554c21[_0x2f1d55(0x1d7)]((_0x32ba1d,_0x4ac2c9)=>{var _0x2e4154=_0x2f1d55;_0x195423[_0x4ac2c9][_0x2e4154(0x201)]=_0x32ba1d;}),_0x7d6782['forEach']((_0x8be92b,_0x1b277f)=>{var _0x1ec020=_0x2f1d55;_0x195423[_0x1b277f][_0x1ec020(0x1dc)]=_0x8be92b;}),_0x117292['forEach']((_0x366ff5,_0x35056e)=>{var _0x11fc7e=_0x2f1d55;_0x195423[_0x35056e][_0x11fc7e(0x185)]=_0x366ff5;}),_0x11f93e['return_sale_QA'][_0x2f1d55(0x1d7)](_0x2e6b0f=>{var _0x556e03=_0x2f1d55;const _0x5dab9c=_0x2e75ab[_0x556e03(0x1e0)]['map'](_0x114459=>{var _0x58fa6d=_0x556e03;_0x114459[_0x58fa6d(0x1b3)]==_0x2e6b0f[_0x58fa6d(0x1b3)]&&(_0x114459[_0x58fa6d(0x18c)]=parseInt(_0x114459[_0x58fa6d(0x18c)])+parseInt(_0x2e6b0f[_0x58fa6d(0x185)]));});}),await _0x2e75ab['save'](),_0x11f93e['invoice']=_0xa02b68,_0x11f93e[_0x2f1d55(0x195)]=_0x85d7fe,_0x11f93e[_0x2f1d55(0x1c7)]=_0xd2f859,_0x11f93e['warehouse_name']=_0x35e87e,_0x11f93e[_0x2f1d55(0x1a7)]=_0x195423,_0x11f93e[_0x2f1d55(0x1b4)]=_0x3d28c0,_0x11f93e[_0x2f1d55(0x18e)]=_0x3e87d9,_0x11f93e[_0x2f1d55(0x202)]=_0x3fcd88;const _0xfaa6c1=await _0x11f93e['save'](),_0x25053f=await c_payment_data[_0x2f1d55(0x194)]({'invoice':_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1ab)],'reason':_0x2f1d55(0x1b2)});_0x25053f['suppliers']=_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1aa)],_0x25053f[_0x2f1d55(0x1c7)]=_0x53b13c[_0x2f1d55(0x1e2)]['date'],await _0x25053f['save'](),_0x53b13c[_0x2f1d55(0x200)](_0x2f1d55(0x1fd),'purchase\x20return\x20successfully'),_0x54a6dc['redirect'](_0x2f1d55(0x1ae));}catch(_0x125c89){console[_0x2f1d55(0x1c3)](_0x125c89),_0x54a6dc[_0x2f1d55(0x19f)](0xc8)[_0x2f1d55(0x1f2)]({'message':_0x125c89[_0x2f1d55(0x1d4)]});}else try{const _0x330341=_0x53b13c[_0x2f1d55(0x187)]['id'];console[_0x2f1d55(0x1c3)](_0x330341);const _0x22a1a9=await sales_return[_0x2f1d55(0x194)]({'invoice':_0x53b13c['body']['invoice']});console[_0x2f1d55(0x1c3)](_0x2f1d55(0x197),_0x22a1a9);const _0xf8dfd5=await warehouse[_0x2f1d55(0x194)]({'name':_0x22a1a9[_0x2f1d55(0x18e)],'room':_0x22a1a9[_0x2f1d55(0x202)]});console[_0x2f1d55(0x1c3)]('old_warehouse_data',_0xf8dfd5);const {invoice:_0x38fd60,customer:_0x240e89,date:_0x2d5da8,warehouse_name:_0x68c30c,product_name:_0x3cad9d,primary_code:_0x25ebc4,secondary_code:_0x4fb229,product_code:_0x317c5c,sales_quantity:_0x386947,stocks:_0x34dafc,return_qty:_0x251104,note:_0x51b6cd,to_warehouse_name:_0x18ec3e,to_Room_name:_0x5aeb78}=_0x53b13c[_0x2f1d55(0x1e2)];console[_0x2f1d55(0x1c3)](_0x53b13c[_0x2f1d55(0x1e2)]);if(typeof _0x3cad9d=='string')var _0x4b9e02=[_0x53b13c['body'][_0x2f1d55(0x1b3)]],_0x5673cf=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1fc)]],_0x479a56=[_0x53b13c[_0x2f1d55(0x1e2)]['secondary_code']],_0x3d3637=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1be)]],_0x554c21=[_0x53b13c[_0x2f1d55(0x1e2)]['sales_quantity']],_0x7d6782=[_0x53b13c[_0x2f1d55(0x1e2)]['stocks']],_0x117292=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x185)]],_0x2602ac=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1a0)]],_0x4f09e7=[_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1bf)]],_0x3301ef=[_0x53b13c['body']['types']],_0x2d6359=[_0x53b13c['body'][_0x2f1d55(0x1b1)]];else var _0x4b9e02=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1b3)]],_0x5673cf=[..._0x53b13c['body'][_0x2f1d55(0x1fc)]],_0x479a56=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1f9)]],_0x3d3637=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1be)]],_0x554c21=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1f3)]],_0x7d6782=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1b5)]],_0x117292=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x185)]],_0x2602ac=[..._0x53b13c['body'][_0x2f1d55(0x1a0)]],_0x4f09e7=[..._0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1bf)]],_0x3301ef=[..._0x53b13c[_0x2f1d55(0x1e2)]['types']],_0x2d6359=[..._0x53b13c['body']['floorlevel']];const _0x1fd571=_0x4b9e02[_0x2f1d55(0x1c0)](_0x2fafec=>{return _0x2fafec={'product_name':_0x2fafec};});_0x5673cf['forEach']((_0x5b188b,_0x2255cf)=>{var _0x550d3f=_0x2f1d55;_0x1fd571[_0x2255cf][_0x550d3f(0x1fc)]=_0x5b188b;}),_0x479a56[_0x2f1d55(0x1d7)]((_0x440146,_0x1cfff3)=>{var _0xd73f4b=_0x2f1d55;_0x1fd571[_0x1cfff3][_0xd73f4b(0x1f9)]=_0x440146;}),_0x3d3637[_0x2f1d55(0x1d7)]((_0x548b8c,_0x48b3ab)=>{var _0x33f178=_0x2f1d55;_0x1fd571[_0x48b3ab][_0x33f178(0x1be)]=_0x548b8c;}),_0x554c21[_0x2f1d55(0x1d7)]((_0x29abc4,_0x4dd58b)=>{var _0x1ecf5a=_0x2f1d55;_0x1fd571[_0x4dd58b][_0x1ecf5a(0x201)]=_0x29abc4;}),_0x7d6782[_0x2f1d55(0x1d7)]((_0x18acf0,_0x4ea051)=>{var _0x14b5a3=_0x2f1d55;_0x1fd571[_0x4ea051][_0x14b5a3(0x1dc)]=_0x18acf0;}),_0x117292[_0x2f1d55(0x1d7)]((_0x5801e3,_0x1ef7da)=>{var _0x34bbb2=_0x2f1d55;_0x1fd571[_0x1ef7da][_0x34bbb2(0x185)]=_0x5801e3;}),_0x2602ac[_0x2f1d55(0x1d7)]((_0x121aa5,_0x538213)=>{_0x1fd571[_0x538213]['bay']=_0x121aa5;}),_0x4f09e7[_0x2f1d55(0x1d7)]((_0x4289fb,_0x12c078)=>{var _0x1d60e8=_0x2f1d55;_0x1fd571[_0x12c078][_0x1d60e8(0x1bf)]=_0x4289fb;}),_0x3301ef[_0x2f1d55(0x1d7)]((_0x4fdf9c,_0x576c5b)=>{_0x1fd571[_0x576c5b]['type']=_0x4fdf9c;}),_0x2d6359[_0x2f1d55(0x1d7)]((_0x5fc38d,_0x1bc903)=>{var _0x30853b=_0x2f1d55;_0x1fd571[_0x1bc903][_0x30853b(0x1b1)]=_0x5fc38d;});var _0x76cc81=0x0;_0x1fd571['forEach'](_0x5d45bb=>{var _0x5a133a=_0x2f1d55;console[_0x5a133a(0x1c3)](_0x5a133a(0x1e4),_0x5d45bb),(parseInt(_0x5d45bb[_0x5a133a(0x201)])<parseInt(_0x5d45bb[_0x5a133a(0x185)])||parseInt(_0x5d45bb[_0x5a133a(0x1dc)])<parseInt(_0x5d45bb['return_qty'])&&parseInt(_0x5d45bb[_0x5a133a(0x201)])>parseInt(_0x5d45bb[_0x5a133a(0x185)])||parseInt(_0x5d45bb['return_qty'])==0x0)&&_0x76cc81++;});if(_0x76cc81!=0x0)return _0x53b13c['flash']('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x54a6dc['redirect'](_0x2f1d55(0x1b8));_0x22a1a9[_0x2f1d55(0x1af)][_0x2f1d55(0x1d7)](_0xf5d962=>{var _0x3560a3=_0x2f1d55;const _0x1cc24f=_0xf8dfd5[_0x3560a3(0x1e0)][_0x3560a3(0x1c0)](_0x52faaf=>{var _0x39bd79=_0x3560a3;_0x52faaf[_0x39bd79(0x1b3)]==_0xf5d962[_0x39bd79(0x1b3)]&&_0x52faaf[_0x39bd79(0x1b1)]==_0xf5d962[_0x39bd79(0x1b1)]&&_0x52faaf[_0x39bd79(0x1ec)]==_0xf5d962[_0x39bd79(0x1ec)]&&_0x52faaf[_0x39bd79(0x1bf)]==_0xf5d962[_0x39bd79(0x1bf)]&&_0x52faaf['bay']==_0xf5d962['bay']&&(_0x52faaf[_0x39bd79(0x18c)]=parseInt(_0x52faaf['product_stock'])+parseInt(_0xf5d962[_0x39bd79(0x185)]));});}),console['log']('old_warehouse_data',_0xf8dfd5),await _0xf8dfd5[_0x2f1d55(0x1b7)](),_0x22a1a9[_0x2f1d55(0x1ab)]=_0x38fd60,_0x22a1a9[_0x2f1d55(0x195)]=_0x240e89,_0x22a1a9[_0x2f1d55(0x1c7)]=_0x2d5da8,_0x22a1a9[_0x2f1d55(0x1ac)]=_0x68c30c,_0x22a1a9['return_sale']=_0x1fd571,_0x22a1a9['note']=_0x51b6cd,_0x22a1a9['ToWarehouse']=_0x18ec3e,_0x22a1a9[_0x2f1d55(0x202)]=_0x5aeb78;const _0x320c4e=await _0x22a1a9[_0x2f1d55(0x1b7)]();console[_0x2f1d55(0x1c3)](_0x2f1d55(0x1a3),_0x320c4e);const _0x3f111d=await c_payment_data['findOne']({'invoice':_0x53b13c[_0x2f1d55(0x1e2)]['invoice'],'reason':_0x2f1d55(0x1b2)});_0x3f111d[_0x2f1d55(0x1aa)]=_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1aa)],_0x3f111d[_0x2f1d55(0x1c7)]=_0x53b13c[_0x2f1d55(0x1e2)][_0x2f1d55(0x1c7)],await _0x3f111d[_0x2f1d55(0x1b7)](),_0x53b13c['flash']('success','purchase\x20return\x20successfully'),_0x54a6dc[_0x2f1d55(0x1a8)](_0x2f1d55(0x1f6));}catch(_0x25b773){console[_0x2f1d55(0x1c3)](_0x25b773),_0x54a6dc[_0x2f1d55(0x19f)](0xc8)[_0x2f1d55(0x1f2)]({'message':_0x25b773[_0x2f1d55(0x1d4)]});}}),router['post'](a0_0x54a3c4(0x1d5),auth,async(_0x518159,_0x2ad166)=>{var _0x496fc4=a0_0x54a3c4;try{const _0x525bc0=_0x518159[_0x496fc4(0x187)]['id'],{invoice:_0x39bbde,customer:_0x1f28d1,payable_to_customer:_0x277922,paid_amount:_0x41c0bf}=_0x518159['body'],_0x529d49=await sales_return[_0x496fc4(0x1dd)](_0x525bc0);console['log'](_0x496fc4(0x189),_0x529d49),console['log'](_0x277922),console['log'](_0x41c0bf);var _0x328860=_0x277922-_0x41c0bf;console['log'](_0x496fc4(0x1b0),_0x328860),_0x529d49['paid_amount']=parseFloat(_0x41c0bf)+parseFloat(_0x529d49[_0x496fc4(0x1f1)]),_0x529d49[_0x496fc4(0x1d2)]=_0x328860,console[_0x496fc4(0x1c3)](_0x529d49);const _0x2d8ffa=await _0x529d49['save']();console[_0x496fc4(0x1c3)](0x1b207);const _0x3d4893=await c_payment_data[_0x496fc4(0x194)]({'invoice':_0x518159[_0x496fc4(0x1e2)]['invoice'],'reason':_0x496fc4(0x1b2)});console[_0x496fc4(0x1c3)](_0x496fc4(0x1d0),_0x3d4893),_0x3d4893[_0x496fc4(0x1cf)]=_0x328860,await _0x3d4893[_0x496fc4(0x1b7)]();let _0x12a3b8=new Date(),_0x4f4000=('0'+_0x12a3b8[_0x496fc4(0x1f8)]())[_0x496fc4(0x192)](-0x2),_0x20f0c0=('0'+(_0x12a3b8[_0x496fc4(0x19b)]()+0x1))['slice'](-0x2),_0x148728=_0x12a3b8[_0x496fc4(0x1c1)](),_0x17d8e1=_0x148728+'-'+_0x20f0c0+'-'+_0x4f4000;const _0x266738=new customer_payment({'invoice':_0x39bbde,'date':_0x148728+'-'+_0x20f0c0+'-'+_0x4f4000,'customer':_0x1f28d1,'reason':_0x496fc4(0x1cd),'amount':_0x41c0bf}),_0x1c7c8c=await _0x266738['save']();_0x518159[_0x496fc4(0x200)](_0x496fc4(0x1fd),_0x496fc4(0x18a)),_0x2ad166[_0x496fc4(0x1a8)](_0x496fc4(0x1f6));}catch(_0x22e807){console[_0x496fc4(0x1c3)](_0x22e807);}}),router[a0_0x54a3c4(0x1db)](a0_0x54a3c4(0x18b),auth,async(_0x292441,_0x10c5cd)=>{var _0x195c0e=a0_0x54a3c4;try{const {username:_0x5e608f,email:_0x28c511,role:_0x55f3fc}=_0x292441[_0x195c0e(0x1ea)],_0x111b79=_0x292441[_0x195c0e(0x1ea)],_0x474efb=await profile[_0x195c0e(0x194)]({'email':_0x111b79[_0x195c0e(0x1df)]}),_0x4f9713=await master_shop['find']();console['log'](_0x195c0e(0x1f0),_0x4f9713);const _0x625a1d=_0x292441[_0x195c0e(0x187)]['id'],_0x2452b5=await sales_return[_0x195c0e(0x1dd)](_0x625a1d);console['log'](_0x2452b5);const _0x102638=await customer[_0x195c0e(0x194)]({'name':_0x2452b5[_0x195c0e(0x195)]});console[_0x195c0e(0x1c3)](_0x102638);if(_0x4f9713[0x0][_0x195c0e(0x1de)]==_0x195c0e(0x1e6)){var _0x20f004=users['English'];console[_0x195c0e(0x1c3)](_0x20f004);}else{if(_0x4f9713[0x0][_0x195c0e(0x1de)]==_0x195c0e(0x1d8))var _0x20f004=users['Hindi'];else{if(_0x4f9713[0x0][_0x195c0e(0x1de)]==_0x195c0e(0x1ee))var _0x20f004=users['German'];else{if(_0x4f9713[0x0]['language']==_0x195c0e(0x1ba))var _0x20f004=users[_0x195c0e(0x1ba)];else{if(_0x4f9713[0x0][_0x195c0e(0x1de)]==_0x195c0e(0x191))var _0x20f004=users[_0x195c0e(0x191)];else{if(_0x4f9713[0x0][_0x195c0e(0x1de)]=='Portuguese\x20(BR)')var _0x20f004=users[_0x195c0e(0x190)];else{if(_0x4f9713[0x0]['language']==_0x195c0e(0x1ef))var _0x20f004=users['Chinese'];else{if(_0x4f9713[0x0][_0x195c0e(0x1de)]==_0x195c0e(0x1da))var _0x20f004=users['Arabic'];}}}}}}}_0x10c5cd['render']('sales_return_invoice',{'success':_0x292441[_0x195c0e(0x200)](_0x195c0e(0x1fd)),'errors':_0x292441[_0x195c0e(0x200)](_0x195c0e(0x188)),'role':_0x111b79,'profile':_0x474efb,'master_shop':_0x4f9713,'customers':_0x102638,'sales':_0x2452b5,'language':_0x20f004});}catch(_0x5d2c48){console['log'](_0x5d2c48);}}),module['exports']=router;