var a0_0x2e96e1=a0_0x340b;(function(_0x338225,_0xe91442){var _0x158ff2=a0_0x340b,_0x15ab75=_0x338225();while(!![]){try{var _0x349f87=parseInt(_0x158ff2(0xa2))/0x1*(-parseInt(_0x158ff2(0x85))/0x2)+parseInt(_0x158ff2(0xe6))/0x3*(parseInt(_0x158ff2(0x7c))/0x4)+parseInt(_0x158ff2(0xa7))/0x5+-parseInt(_0x158ff2(0x99))/0x6+parseInt(_0x158ff2(0xaa))/0x7*(-parseInt(_0x158ff2(0xc9))/0x8)+parseInt(_0x158ff2(0xb0))/0x9+-parseInt(_0x158ff2(0x7d))/0xa;if(_0x349f87===_0xe91442)break;else _0x15ab75['push'](_0x15ab75['shift']());}catch(_0x15534a){_0x15ab75['push'](_0x15ab75['shift']());}}}(a0_0x439e,0xc6017));function a0_0x439e(){var _0x37d298=['payment\x20successfull','getDate','Sale\x20Return','8MdAmqd','$customer_docs','$name','$product_details.rack','log','body','/sales_return_finished/view','find','$product_details.type','product_details','message','Arabic','aggregate','getMonth','/view/:id','primary_code_QA','master','English','return_sale_QA','return_sale_edit_finished','return_sale','purchase\x20return\x20successfully','success','express','type','sales_quantity','Portuguese\x20(BR)','types','exports','3dmPGmo','/view','/invoice/:id','errors','params','German','$product_details.product_stock','sales_return_invoice','secondary_code','for_categorize','Finished\x20Goods','$product_details.primary_code','back','sales_return_finished','invoice','return_qty','sale_qty','product_code','floorlevel','Portuguese','status','$product_details.bay','$product_details.bin','4802388foXJiG','6065080PZSZkQ','note','Router','flash','stock','customers','amount','slice','218EByMIx','user','get','ToWarehouse','customer_docs','Chinese','due_amount','/give_payment/:id','new\x20new_data','findOne','Enabled','product_code_QA','Arabic\x20(ae)','c_payment','old_data','customer','Returned\x20Payment\x20For\x20Sale\x20Return','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','../public/language/languages.json','stocks','1387662uNMxqw','language','ToRoom','save','sales_quantity_QA','$product_details','../middleware/auth','Return\x20Rooms','suppliers','6166pIPSfR','Hindi','render','foreach\x20newproduct','Spanish','6514920RbkJoN','bay','French','3845646vZZzuG','/sales_return/view','../models/all_models','date','redirect','paid_amount','3300363AyqTVs','return_qty_QA','forEach','post','product_name','findById','secondary_code_QA','$product_details._id','email','old_warehouse_data','$product_details.product_code','map','primary_code','data','stocks_QA','bin','product_stock','getFullYear','string','json','warehouse_name','English\x20(US)'];a0_0x439e=function(){return _0x37d298;};return a0_0x439e();}const express=require(a0_0x2e96e1(0xe0)),app=express(),router=express[a0_0x2e96e1(0x7f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x2e96e1(0xac)),auth=require(a0_0x2e96e1(0x9f)),users=require(a0_0x2e96e1(0x97));function a0_0x340b(_0x33f992,_0x35006a){var _0x439e75=a0_0x439e();return a0_0x340b=function(_0x340bfe,_0x28a26d){_0x340bfe=_0x340bfe-0x77;var _0x2c22d9=_0x439e75[_0x340bfe];return _0x2c22d9;},a0_0x340b(_0x33f992,_0x35006a);}router[a0_0x2e96e1(0x87)](a0_0x2e96e1(0xe7),auth,async(_0x5d6d86,_0x57ab6a)=>{var _0x3f0b44=a0_0x2e96e1;try{const {username:_0x52f2a4,email:_0x1a86fa,role:_0x1c324d}=_0x5d6d86['user'],_0x453418=_0x5d6d86[_0x3f0b44(0x86)],_0x427606=await profile['findOne']({'email':_0x453418[_0x3f0b44(0xb8)]}),_0x1220ac=await master_shop[_0x3f0b44(0xd0)](),_0x4bf485=await sales_return_finished[_0x3f0b44(0xd5)]([{'$lookup':{'from':_0x3f0b44(0x82),'localField':_0x3f0b44(0x94),'foreignField':'name','as':_0x3f0b44(0x89)}},{'$unwind':_0x3f0b44(0xca)}]);if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0xc5)){var _0xd45e9e=users[_0x3f0b44(0xda)];console[_0x3f0b44(0xcd)](_0xd45e9e);}else{if(_0x1220ac[0x0]['language']==_0x3f0b44(0xa3))var _0xd45e9e=users[_0x3f0b44(0xa3)];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0xeb))var _0xd45e9e=users[_0x3f0b44(0xeb)];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0xa6))var _0xd45e9e=users[_0x3f0b44(0xa6)];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0xa9))var _0xd45e9e=users['French'];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0xe3))var _0xd45e9e=users[_0x3f0b44(0x78)];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0x8a))var _0xd45e9e=users[_0x3f0b44(0x8a)];else{if(_0x1220ac[0x0][_0x3f0b44(0x9a)]==_0x3f0b44(0x91))var _0xd45e9e=users[_0x3f0b44(0xd4)];}}}}}}}_0x57ab6a[_0x3f0b44(0xa4)](_0x3f0b44(0xf3),{'success':_0x5d6d86[_0x3f0b44(0x80)](_0x3f0b44(0xdf)),'errors':_0x5d6d86[_0x3f0b44(0x80)](_0x3f0b44(0xe9)),'role':_0x453418,'profile':_0x427606,'master_shop':_0x1220ac,'user':_0x4bf485,'language':_0xd45e9e});}catch(_0x27c7c1){console[_0x3f0b44(0xcd)](_0x27c7c1);}}),router[a0_0x2e96e1(0x87)](a0_0x2e96e1(0xd7),auth,async(_0x5bad2,_0x3d1f15)=>{var _0x345264=a0_0x2e96e1;try{const {username:_0x3522bd,email:_0x47d536,role:_0x262278}=_0x5bad2[_0x345264(0x86)],_0xd4c6ea=_0x5bad2['user'],_0x2378f1=await profile[_0x345264(0x8e)]({'email':_0xd4c6ea[_0x345264(0xb8)]}),_0x128506=await master_shop[_0x345264(0xd0)]();console['log'](_0x345264(0xd9),_0x128506);const _0x15277b=_0x5bad2[_0x345264(0xea)]['id'];console[_0x345264(0xcd)](_0x15277b);var _0x4a4c83=[_0x345264(0xa0)];const _0xdba08c=await sales_return_finished[_0x345264(0xb5)](_0x15277b),_0x23e3a8=await warehouse[_0x345264(0xd5)]([{'$match':{'name':_0xdba08c[_0x345264(0x88)],'room':_0xdba08c['ToRoom']}},{'$unwind':_0x345264(0x9e)},{'$group':{'_id':_0x345264(0xb7),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x345264(0xec)},'bay':{'$first':_0x345264(0x7a)},'bin':{'$first':_0x345264(0x7b)},'type':{'$first':_0x345264(0xd1)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x345264(0xf1)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x345264(0xba)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x345264(0xcc)}}}]);console[_0x345264(0xcd)](_0x23e3a8);const _0x376bed=await warehouse[_0x345264(0xd5)]([{'$match':{'status':_0x345264(0x8f),'warehouse_category':_0x345264(0xf0)}},{'$group':{'_id':'$name','name':{'$first':_0x345264(0xcb)}}},{'$sort':{'name':0x1}}]),_0x52671d=await warehouse[_0x345264(0xd5)]([{'$match':{'status':_0x345264(0x8f),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x345264(0xcb),'name':{'$first':_0x345264(0xcb)}}},{'$sort':{'name':0x1}}]),_0x15d6c9=await product[_0x345264(0xd0)]({});if(_0x128506[0x0]['language']==_0x345264(0xc5)){var _0x1e5e71=users[_0x345264(0xda)];console[_0x345264(0xcd)](_0x1e5e71);}else{if(_0x128506[0x0][_0x345264(0x9a)]=='Hindi')var _0x1e5e71=users['Hindi'];else{if(_0x128506[0x0][_0x345264(0x9a)]=='German')var _0x1e5e71=users[_0x345264(0xeb)];else{if(_0x128506[0x0][_0x345264(0x9a)]==_0x345264(0xa6))var _0x1e5e71=users['Spanish'];else{if(_0x128506[0x0][_0x345264(0x9a)]==_0x345264(0xa9))var _0x1e5e71=users['French'];else{if(_0x128506[0x0][_0x345264(0x9a)]==_0x345264(0xe3))var _0x1e5e71=users[_0x345264(0x78)];else{if(_0x128506[0x0][_0x345264(0x9a)]==_0x345264(0x8a))var _0x1e5e71=users[_0x345264(0x8a)];else{if(_0x128506[0x0][_0x345264(0x9a)]==_0x345264(0x91))var _0x1e5e71=users[_0x345264(0xd4)];}}}}}}}_0x3d1f15[_0x345264(0xa4)](_0x345264(0xdc),{'success':_0x5bad2[_0x345264(0x80)](_0x345264(0xdf)),'errors':_0x5bad2[_0x345264(0x80)](_0x345264(0xe9)),'role':_0xd4c6ea,'profile':_0x2378f1,'master_shop':_0x128506,'user':_0xdba08c,'stock':_0x23e3a8,'unit':_0x15d6c9,'language':_0x1e5e71,'warehouses':_0x376bed,'rooms':_0x4a4c83,'warehouse_QA':_0x52671d});}catch(_0x4c8ca8){console[_0x345264(0xcd)](_0x4c8ca8);}}),router[a0_0x2e96e1(0xb3)](a0_0x2e96e1(0xd7),auth,async(_0x1a8023,_0x36751a)=>{var _0x4c6f33=a0_0x2e96e1;if(_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xef)]=='QA')try{const _0x27b3eb=_0x1a8023[_0x4c6f33(0xea)]['id'],_0x15ea87=await sales_return[_0x4c6f33(0x8e)]({'invoice':_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xf4)]}),_0x577e68=await warehouse[_0x4c6f33(0x8e)]({'name':_0x15ea87[_0x4c6f33(0x88)],'room':_0x15ea87[_0x4c6f33(0x9b)]}),{invoice:_0x576f76,customer:_0x5465d4,date:_0x173032,warehouse_name:_0x2f3a21,product_name:_0x4009b5,primary_code:_0x403e92,secondary_code:_0x479db3,product_code:_0x4cca30,sales_quantity:_0x372fa4,stocks:_0x246dcd,return_qty:_0x573f92,note:_0x50c5db,to_warehouse_name_QA:_0x2afbff,to_Room_name_QA:_0xbf993d}=_0x1a8023['body'];if(typeof product_name_QA==_0x4c6f33(0xc2))var _0x127edf=[_0x1a8023[_0x4c6f33(0xce)]['product_name_QA']],_0x3bddda=[_0x1a8023['body'][_0x4c6f33(0xd8)]],_0x2f15e8=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xb6)]],_0x13e7e3=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0x90)]],_0x52e9e2=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0x9d)]],_0x57c8a6=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xbe)]],_0x3e7136=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xb1)]];else var _0x127edf=[..._0x1a8023[_0x4c6f33(0xce)]['product_name_QA']],_0x3bddda=[..._0x1a8023['body'][_0x4c6f33(0xd8)]],_0x2f15e8=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xb6)]],_0x13e7e3=[..._0x1a8023['body'][_0x4c6f33(0x90)]],_0x52e9e2=[..._0x1a8023['body']['sales_quantity_QA']],_0x57c8a6=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xbe)]],_0x3e7136=[..._0x1a8023[_0x4c6f33(0xce)]['return_qty_QA']];const _0x16ef8c=_0x127edf[_0x4c6f33(0xbb)](_0x3a906b=>{return _0x3a906b={'product_name':_0x3a906b};});_0x3bddda[_0x4c6f33(0xb2)]((_0x2282ca,_0x26de7d)=>{_0x16ef8c[_0x26de7d]['primary_code']=_0x2282ca;}),_0x2f15e8['forEach']((_0x14fe29,_0x3b011e)=>{var _0x4ff23f=_0x4c6f33;_0x16ef8c[_0x3b011e][_0x4ff23f(0xee)]=_0x14fe29;}),_0x13e7e3[_0x4c6f33(0xb2)]((_0x33fae1,_0x2e91a3)=>{var _0x18ae4c=_0x4c6f33;_0x16ef8c[_0x2e91a3][_0x18ae4c(0xf7)]=_0x33fae1;}),_0x52e9e2['forEach']((_0x3ae5ca,_0x53c76f)=>{_0x16ef8c[_0x53c76f]['sale_qty']=_0x3ae5ca;}),_0x57c8a6[_0x4c6f33(0xb2)]((_0xc51e04,_0x3d70c2)=>{_0x16ef8c[_0x3d70c2]['stock']=_0xc51e04;}),_0x3e7136[_0x4c6f33(0xb2)]((_0x238b54,_0x58c702)=>{var _0x16856=_0x4c6f33;_0x16ef8c[_0x58c702][_0x16856(0xf5)]=_0x238b54;}),_0x15ea87[_0x4c6f33(0xdb)][_0x4c6f33(0xb2)](_0x4f07fb=>{var _0x46e985=_0x4c6f33;const _0x305150=_0x577e68[_0x46e985(0xd2)][_0x46e985(0xbb)](_0x2b61bd=>{var _0x430a7f=_0x46e985;_0x2b61bd[_0x430a7f(0xb4)]==_0x4f07fb['product_name']&&(_0x2b61bd[_0x430a7f(0xc0)]=parseInt(_0x2b61bd[_0x430a7f(0xc0)])+parseInt(_0x4f07fb[_0x430a7f(0xf5)]));});}),await _0x577e68[_0x4c6f33(0x9c)](),_0x15ea87[_0x4c6f33(0xf4)]=_0x576f76,_0x15ea87[_0x4c6f33(0x94)]=_0x5465d4,_0x15ea87['date']=_0x173032,_0x15ea87[_0x4c6f33(0xc4)]=_0x2f3a21,_0x15ea87[_0x4c6f33(0xdb)]=_0x16ef8c,_0x15ea87['note']=_0x50c5db,_0x15ea87['ToWarehouse']=_0x2afbff,_0x15ea87[_0x4c6f33(0x9b)]=_0xbf993d;const _0x3fff46=await _0x15ea87[_0x4c6f33(0x9c)](),_0x49ecd2=await c_payment_data[_0x4c6f33(0x8e)]({'invoice':_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xf4)],'reason':_0x4c6f33(0xc8)});_0x49ecd2[_0x4c6f33(0xa1)]=_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xa1)],_0x49ecd2[_0x4c6f33(0xad)]=_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xad)],await _0x49ecd2[_0x4c6f33(0x9c)](),_0x1a8023[_0x4c6f33(0x80)](_0x4c6f33(0xdf),_0x4c6f33(0xde)),_0x36751a[_0x4c6f33(0xae)](_0x4c6f33(0xcf));}catch(_0x16832b){console[_0x4c6f33(0xcd)](_0x16832b),_0x36751a['status'](0xc8)[_0x4c6f33(0xc3)]({'message':_0x16832b[_0x4c6f33(0xd3)]});}else try{const _0x4113c5=_0x1a8023['params']['id'];console[_0x4c6f33(0xcd)](_0x4113c5);const _0x55aa3a=await sales_return[_0x4c6f33(0x8e)]({'invoice':_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xf4)]});console[_0x4c6f33(0xcd)](_0x4c6f33(0x93),_0x55aa3a);const _0x31af23=await warehouse['findOne']({'name':_0x55aa3a[_0x4c6f33(0x88)],'room':_0x55aa3a[_0x4c6f33(0x9b)]});console[_0x4c6f33(0xcd)](_0x4c6f33(0xb9),_0x31af23);const {invoice:_0x5b340f,customer:_0x1b226d,date:_0x47f83c,warehouse_name:_0x474dfe,product_name:_0x53ea9c,primary_code:_0x272a93,secondary_code:_0x25f046,product_code:_0x137203,sales_quantity:_0x5e5157,stocks:_0x5d2ffb,return_qty:_0x11eb84,note:_0x46f00f,to_warehouse_name:_0x874121,to_Room_name:_0x390a7c}=_0x1a8023['body'];console['log'](_0x1a8023[_0x4c6f33(0xce)]);if(typeof _0x53ea9c=='string')var _0x127edf=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xb4)]],_0x3bddda=[_0x1a8023['body'][_0x4c6f33(0xbc)]],_0x2f15e8=[_0x1a8023['body'][_0x4c6f33(0xee)]],_0x13e7e3=[_0x1a8023[_0x4c6f33(0xce)]['product_code']],_0x52e9e2=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xe2)]],_0x57c8a6=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0x98)]],_0x3e7136=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xf5)]],_0x1372e5=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xa8)]],_0x545dff=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xbf)]],_0xb9692c=[_0x1a8023[_0x4c6f33(0xce)]['types']],_0x128e1f=[_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0x77)]];else var _0x127edf=[..._0x1a8023['body'][_0x4c6f33(0xb4)]],_0x3bddda=[..._0x1a8023['body']['primary_code']],_0x2f15e8=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xee)]],_0x13e7e3=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xf7)]],_0x52e9e2=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xe2)]],_0x57c8a6=[..._0x1a8023['body'][_0x4c6f33(0x98)]],_0x3e7136=[..._0x1a8023[_0x4c6f33(0xce)]['return_qty']],_0x1372e5=[..._0x1a8023['body']['bay']],_0x545dff=[..._0x1a8023['body'][_0x4c6f33(0xbf)]],_0xb9692c=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xe4)]],_0x128e1f=[..._0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0x77)]];const _0x578420=_0x127edf['map'](_0x4e4a41=>{return _0x4e4a41={'product_name':_0x4e4a41};});_0x3bddda['forEach']((_0x4337d4,_0x38b249)=>{var _0x97229f=_0x4c6f33;_0x578420[_0x38b249][_0x97229f(0xbc)]=_0x4337d4;}),_0x2f15e8[_0x4c6f33(0xb2)]((_0x2e6045,_0x1640fa)=>{var _0x8cecca=_0x4c6f33;_0x578420[_0x1640fa][_0x8cecca(0xee)]=_0x2e6045;}),_0x13e7e3[_0x4c6f33(0xb2)]((_0x38f3d3,_0x3c95fd)=>{var _0x58fe86=_0x4c6f33;_0x578420[_0x3c95fd][_0x58fe86(0xf7)]=_0x38f3d3;}),_0x52e9e2['forEach']((_0x16402c,_0x46cef7)=>{var _0xac6836=_0x4c6f33;_0x578420[_0x46cef7][_0xac6836(0xf6)]=_0x16402c;}),_0x57c8a6[_0x4c6f33(0xb2)]((_0x571795,_0x368e4c)=>{var _0x2eb427=_0x4c6f33;_0x578420[_0x368e4c][_0x2eb427(0x81)]=_0x571795;}),_0x3e7136[_0x4c6f33(0xb2)]((_0x239128,_0x2cebf4)=>{_0x578420[_0x2cebf4]['return_qty']=_0x239128;}),_0x1372e5['forEach']((_0x30beae,_0x2460a6)=>{var _0x1fd923=_0x4c6f33;_0x578420[_0x2460a6][_0x1fd923(0xa8)]=_0x30beae;}),_0x545dff['forEach']((_0x5392fb,_0x40e58a)=>{_0x578420[_0x40e58a]['bin']=_0x5392fb;}),_0xb9692c[_0x4c6f33(0xb2)]((_0x3dd3ba,_0x44a09b)=>{var _0x588147=_0x4c6f33;_0x578420[_0x44a09b][_0x588147(0xe1)]=_0x3dd3ba;}),_0x128e1f[_0x4c6f33(0xb2)]((_0x436623,_0xa41ab3)=>{_0x578420[_0xa41ab3]['floorlevel']=_0x436623;});var _0x3b5e42=0x0;_0x578420[_0x4c6f33(0xb2)](_0x4b0aff=>{var _0x31bf84=_0x4c6f33;console[_0x31bf84(0xcd)](_0x31bf84(0xa5),_0x4b0aff),(parseInt(_0x4b0aff[_0x31bf84(0xf6)])<parseInt(_0x4b0aff['return_qty'])||parseInt(_0x4b0aff[_0x31bf84(0x81)])<parseInt(_0x4b0aff['return_qty'])&&parseInt(_0x4b0aff[_0x31bf84(0xf6)])>parseInt(_0x4b0aff[_0x31bf84(0xf5)])||parseInt(_0x4b0aff[_0x31bf84(0xf5)])==0x0)&&_0x3b5e42++;});if(_0x3b5e42!=0x0)return _0x1a8023[_0x4c6f33(0x80)]('errors',_0x4c6f33(0x96)),_0x36751a[_0x4c6f33(0xae)](_0x4c6f33(0xf2));_0x55aa3a[_0x4c6f33(0xdd)]['forEach'](_0x3d6c6f=>{var _0x1271b7=_0x4c6f33;const _0x352cb0=_0x31af23[_0x1271b7(0xd2)]['map'](_0x88c1de=>{var _0x551fdd=_0x1271b7;_0x88c1de[_0x551fdd(0xb4)]==_0x3d6c6f[_0x551fdd(0xb4)]&&_0x88c1de[_0x551fdd(0x77)]==_0x3d6c6f[_0x551fdd(0x77)]&&_0x88c1de[_0x551fdd(0xe1)]==_0x3d6c6f[_0x551fdd(0xe1)]&&_0x88c1de[_0x551fdd(0xbf)]==_0x3d6c6f[_0x551fdd(0xbf)]&&_0x88c1de[_0x551fdd(0xa8)]==_0x3d6c6f['bay']&&(_0x88c1de[_0x551fdd(0xc0)]=parseInt(_0x88c1de[_0x551fdd(0xc0)])+parseInt(_0x3d6c6f[_0x551fdd(0xf5)]));});}),console[_0x4c6f33(0xcd)](_0x4c6f33(0xb9),_0x31af23),await _0x31af23[_0x4c6f33(0x9c)](),_0x55aa3a[_0x4c6f33(0xf4)]=_0x5b340f,_0x55aa3a[_0x4c6f33(0x94)]=_0x1b226d,_0x55aa3a['date']=_0x47f83c,_0x55aa3a[_0x4c6f33(0xc4)]=_0x474dfe,_0x55aa3a[_0x4c6f33(0xdd)]=_0x578420,_0x55aa3a[_0x4c6f33(0x7e)]=_0x46f00f,_0x55aa3a[_0x4c6f33(0x88)]=_0x874121,_0x55aa3a[_0x4c6f33(0x9b)]=_0x390a7c;const _0x38c005=await _0x55aa3a[_0x4c6f33(0x9c)]();console[_0x4c6f33(0xcd)](_0x4c6f33(0x8d),_0x38c005);const _0x2692ac=await c_payment_data[_0x4c6f33(0x8e)]({'invoice':_0x1a8023[_0x4c6f33(0xce)]['invoice'],'reason':_0x4c6f33(0xc8)});_0x2692ac['suppliers']=_0x1a8023[_0x4c6f33(0xce)][_0x4c6f33(0xa1)],_0x2692ac[_0x4c6f33(0xad)]=_0x1a8023['body'][_0x4c6f33(0xad)],await _0x2692ac[_0x4c6f33(0x9c)](),_0x1a8023[_0x4c6f33(0x80)]('success',_0x4c6f33(0xde)),_0x36751a[_0x4c6f33(0xae)](_0x4c6f33(0xab));}catch(_0x599427){console[_0x4c6f33(0xcd)](_0x599427),_0x36751a[_0x4c6f33(0x79)](0xc8)[_0x4c6f33(0xc3)]({'message':_0x599427[_0x4c6f33(0xd3)]});}}),router[a0_0x2e96e1(0xb3)](a0_0x2e96e1(0x8c),auth,async(_0x1088b6,_0x1c017a)=>{var _0xaa33f0=a0_0x2e96e1;try{const _0x5dcd0a=_0x1088b6['params']['id'],{invoice:_0x9b18d0,customer:_0x224e50,payable_to_customer:_0x4a9411,paid_amount:_0x2e74b1}=_0x1088b6[_0xaa33f0(0xce)],_0x15827d=await sales_return[_0xaa33f0(0xb5)](_0x5dcd0a);console[_0xaa33f0(0xcd)](_0xaa33f0(0xbd),_0x15827d),console[_0xaa33f0(0xcd)](_0x4a9411),console[_0xaa33f0(0xcd)](_0x2e74b1);var _0x41593a=_0x4a9411-_0x2e74b1;console[_0xaa33f0(0xcd)]('subtract',_0x41593a),_0x15827d[_0xaa33f0(0xaf)]=parseFloat(_0x2e74b1)+parseFloat(_0x15827d[_0xaa33f0(0xaf)]),_0x15827d[_0xaa33f0(0x8b)]=_0x41593a,console[_0xaa33f0(0xcd)](_0x15827d);const _0x158c87=await _0x15827d['save']();console[_0xaa33f0(0xcd)](0x1b207);const _0x2dd90f=await c_payment_data[_0xaa33f0(0x8e)]({'invoice':_0x1088b6[_0xaa33f0(0xce)][_0xaa33f0(0xf4)],'reason':_0xaa33f0(0xc8)});console[_0xaa33f0(0xcd)](_0xaa33f0(0x92),_0x2dd90f),_0x2dd90f[_0xaa33f0(0x83)]=_0x41593a,await _0x2dd90f['save']();let _0x36efbb=new Date(),_0x569956=('0'+_0x36efbb[_0xaa33f0(0xc7)]())[_0xaa33f0(0x84)](-0x2),_0x2511a5=('0'+(_0x36efbb[_0xaa33f0(0xd6)]()+0x1))['slice'](-0x2),_0x5f7d81=_0x36efbb[_0xaa33f0(0xc1)](),_0x58c2a2=_0x5f7d81+'-'+_0x2511a5+'-'+_0x569956;const _0x54a9da=new customer_payment({'invoice':_0x9b18d0,'date':_0x5f7d81+'-'+_0x2511a5+'-'+_0x569956,'customer':_0x224e50,'reason':_0xaa33f0(0x95),'amount':_0x2e74b1}),_0x1c61d6=await _0x54a9da[_0xaa33f0(0x9c)]();_0x1088b6[_0xaa33f0(0x80)](_0xaa33f0(0xdf),_0xaa33f0(0xc6)),_0x1c017a[_0xaa33f0(0xae)](_0xaa33f0(0xab));}catch(_0x3949bd){console[_0xaa33f0(0xcd)](_0x3949bd);}}),router[a0_0x2e96e1(0x87)](a0_0x2e96e1(0xe8),auth,async(_0x293fa9,_0x2811dc)=>{var _0x3a8dd3=a0_0x2e96e1;try{const {username:_0x27211a,email:_0x31f50f,role:_0x54f965}=_0x293fa9['user'],_0x4fde67=_0x293fa9[_0x3a8dd3(0x86)],_0x39b2b7=await profile[_0x3a8dd3(0x8e)]({'email':_0x4fde67[_0x3a8dd3(0xb8)]}),_0x1cb559=await master_shop[_0x3a8dd3(0xd0)]();console[_0x3a8dd3(0xcd)]('master',_0x1cb559);const _0x4b1ab2=_0x293fa9['params']['id'],_0x4443ef=await sales_return[_0x3a8dd3(0xb5)](_0x4b1ab2);console[_0x3a8dd3(0xcd)](_0x4443ef);const _0x223ef4=await customer[_0x3a8dd3(0x8e)]({'name':_0x4443ef[_0x3a8dd3(0x94)]});console[_0x3a8dd3(0xcd)](_0x223ef4);if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]=='English\x20(US)'){var _0xeab452=users[_0x3a8dd3(0xda)];console[_0x3a8dd3(0xcd)](_0xeab452);}else{if(_0x1cb559[0x0]['language']==_0x3a8dd3(0xa3))var _0xeab452=users[_0x3a8dd3(0xa3)];else{if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]==_0x3a8dd3(0xeb))var _0xeab452=users['German'];else{if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]=='Spanish')var _0xeab452=users['Spanish'];else{if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]=='French')var _0xeab452=users[_0x3a8dd3(0xa9)];else{if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]==_0x3a8dd3(0xe3))var _0xeab452=users[_0x3a8dd3(0x78)];else{if(_0x1cb559[0x0][_0x3a8dd3(0x9a)]==_0x3a8dd3(0x8a))var _0xeab452=users[_0x3a8dd3(0x8a)];else{if(_0x1cb559[0x0]['language']==_0x3a8dd3(0x91))var _0xeab452=users['Arabic'];}}}}}}}_0x2811dc[_0x3a8dd3(0xa4)](_0x3a8dd3(0xed),{'success':_0x293fa9['flash']('success'),'errors':_0x293fa9[_0x3a8dd3(0x80)](_0x3a8dd3(0xe9)),'role':_0x4fde67,'profile':_0x39b2b7,'master_shop':_0x1cb559,'customers':_0x223ef4,'sales':_0x4443ef,'language':_0xeab452});}catch(_0x335926){console[_0x3a8dd3(0xcd)](_0x335926);}}),module[a0_0x2e96e1(0xe5)]=router;