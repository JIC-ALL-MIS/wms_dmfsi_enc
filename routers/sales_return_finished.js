var a0_0x2040bf=a0_0xb171;function a0_0xb171(_0x389da0,_0x50ef5c){var _0x4ad6b7=a0_0x4ad6();return a0_0xb171=function(_0xb1717c,_0x4917c4){_0xb1717c=_0xb1717c-0xed;var _0x5a12ff=_0x4ad6b7[_0xb1717c];return _0x5a12ff;},a0_0xb171(_0x389da0,_0x50ef5c);}(function(_0x1055c2,_0x1bebc2){var _0xd6f121=a0_0xb171,_0x1d82b1=_0x1055c2();while(!![]){try{var _0x4e97c8=parseInt(_0xd6f121(0x136))/0x1+parseInt(_0xd6f121(0x154))/0x2*(-parseInt(_0xd6f121(0x166))/0x3)+-parseInt(_0xd6f121(0x155))/0x4*(-parseInt(_0xd6f121(0x14e))/0x5)+parseInt(_0xd6f121(0x112))/0x6*(parseInt(_0xd6f121(0x14b))/0x7)+parseInt(_0xd6f121(0xff))/0x8+-parseInt(_0xd6f121(0x125))/0x9+-parseInt(_0xd6f121(0x131))/0xa;if(_0x4e97c8===_0x1bebc2)break;else _0x1d82b1['push'](_0x1d82b1['shift']());}catch(_0x4f6dbe){_0x1d82b1['push'](_0x1d82b1['shift']());}}}(a0_0x4ad6,0x30297));const express=require(a0_0x2040bf(0x12b)),app=express(),router=express[a0_0x2040bf(0xf3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x2040bf(0x107)),auth=require(a0_0x2040bf(0x126)),users=require('../public/language/languages.json');function a0_0x4ad6(){var _0x51550b=['Portuguese','/invoice/:id','75iUvPWT','status','primary_code_QA','/sales_return/view','$product_details._id','language','note','find','Finished\x20Goods','product_code','$product_details.rack','Router','email','get','$product_details.primary_code','params','secondary_code_QA','ToRoom','$name','product_details','map','getDate','secondary_code','2260912LQXjBL','product_name_QA','Spanish','findById','post','string','$product_details','primary_code','../models/all_models','master','stocks_QA','getMonth','$product_details.product_stock','English','save','data','$customer_docs','Hindi','purchase\x20return\x20successfully','22056DWWriM','message','Arabic\x20(ae)','getFullYear','body','English\x20(US)','user','payment\x20successfull','bay','slice','return_sale','$product_details.bin','flash','return_sale_QA','floorlevel','/give_payment/:id','json','$product_details.secondary_code','suppliers','664848VqXKpX','../middleware/auth','type','German','foreach\x20newproduct','old_warehouse_data','express','date','redirect','errors','Enabled','stocks','1649150sXFXDS','Chinese','customers','product_name','success','372381aNRiPO','due_amount','old_data','stock','Arabic','ToWarehouse','product_stock','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.product_code','render','subtract','return_qty','back','findOne','/view/:id','customer','warehouse_name','paid_amount','name','aggregate','sale_qty','168KgwxlW','Sale\x20Return','bin','845AmnnGX','$product_details.type','sales_quantity','Returned\x20Payment\x20For\x20Sale\x20Return','return_qty_QA','Portuguese\x20(BR)','31414oHAHnv','2024GNZPlS','log','types','$product_details.storage','/sales_return_finished/view','invoice','forEach','c_payment','return_sale_edit_finished','amount','$product_details.product_name','Return\x20Rooms','French','product_code_QA','customer_docs'];a0_0x4ad6=function(){return _0x51550b;};return a0_0x4ad6();}router[a0_0x2040bf(0xf5)]('/view',auth,async(_0x1a9ffa,_0x570a8d)=>{var _0x3f492f=a0_0x2040bf;try{const {username:_0x2c41b2,email:_0x2c7e80,role:_0x40ab44}=_0x1a9ffa[_0x3f492f(0x118)],_0x4830fb=_0x1a9ffa[_0x3f492f(0x118)],_0x25c0c9=await profile[_0x3f492f(0x143)]({'email':_0x4830fb[_0x3f492f(0xf4)]}),_0x1961ba=await master_shop[_0x3f492f(0xef)](),_0x5389e6=await sales_return_finished[_0x3f492f(0x149)]([{'$lookup':{'from':_0x3f492f(0x133),'localField':_0x3f492f(0x145),'foreignField':_0x3f492f(0x148),'as':_0x3f492f(0x163)}},{'$unwind':_0x3f492f(0x10f)}]);if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x117)){var _0x2948d3=users['English'];console[_0x3f492f(0x156)](_0x2948d3);}else{if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x110))var _0x2948d3=users[_0x3f492f(0x110)];else{if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x128))var _0x2948d3=users[_0x3f492f(0x128)];else{if(_0x1961ba[0x0]['language']==_0x3f492f(0x101))var _0x2948d3=users[_0x3f492f(0x101)];else{if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x161))var _0x2948d3=users['French'];else{if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x153))var _0x2948d3=users[_0x3f492f(0x164)];else{if(_0x1961ba[0x0][_0x3f492f(0xed)]=='Chinese')var _0x2948d3=users[_0x3f492f(0x132)];else{if(_0x1961ba[0x0][_0x3f492f(0xed)]==_0x3f492f(0x114))var _0x2948d3=users[_0x3f492f(0x13a)];}}}}}}}_0x570a8d[_0x3f492f(0x13f)]('sales_return_finished',{'success':_0x1a9ffa[_0x3f492f(0x11e)](_0x3f492f(0x135)),'errors':_0x1a9ffa[_0x3f492f(0x11e)]('errors'),'role':_0x4830fb,'profile':_0x25c0c9,'master_shop':_0x1961ba,'user':_0x5389e6,'language':_0x2948d3});}catch(_0x3e0035){console[_0x3f492f(0x156)](_0x3e0035);}}),router[a0_0x2040bf(0xf5)](a0_0x2040bf(0x144),auth,async(_0x31513c,_0x574e28)=>{var _0x501936=a0_0x2040bf;try{const {username:_0x5f06e4,email:_0x3b6f1f,role:_0x35bc90}=_0x31513c[_0x501936(0x118)],_0x1b86e2=_0x31513c[_0x501936(0x118)],_0x326dc3=await profile[_0x501936(0x143)]({'email':_0x1b86e2['email']}),_0x16a5b4=await master_shop[_0x501936(0xef)]();console[_0x501936(0x156)](_0x501936(0x108),_0x16a5b4);const _0xf28a07=_0x31513c[_0x501936(0xf7)]['id'];console[_0x501936(0x156)](_0xf28a07);var _0x21f1e5=[_0x501936(0x160)];const _0xfe1bed=await sales_return_finished[_0x501936(0x102)](_0xf28a07),_0x2d1862=await warehouse[_0x501936(0x149)]([{'$match':{'name':_0xfe1bed['ToWarehouse'],'room':_0xfe1bed[_0x501936(0xf9)]}},{'$unwind':_0x501936(0x105)},{'$group':{'_id':_0x501936(0x16a),'name':{'$first':_0x501936(0x15f)},'product_stock':{'$first':_0x501936(0x10b)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x501936(0x11d)},'type':{'$first':_0x501936(0x14f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x501936(0xf6)},'secondary_code':{'$first':_0x501936(0x123)},'product_code':{'$first':_0x501936(0x13e)},'storage':{'$first':_0x501936(0x158)},'rack':{'$first':_0x501936(0xf2)}}}]);console['log'](_0x2d1862);const _0x189082=await warehouse[_0x501936(0x149)]([{'$match':{'status':_0x501936(0x12f),'warehouse_category':_0x501936(0xf0)}},{'$group':{'_id':'$name','name':{'$first':_0x501936(0xfa)}}},{'$sort':{'name':0x1}}]),_0x1795f3=await warehouse[_0x501936(0x149)]([{'$match':{'status':_0x501936(0x12f),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x501936(0xfa),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0xb5ce73=await product[_0x501936(0xef)]({});if(_0x16a5b4[0x0]['language']==_0x501936(0x117)){var _0x3b9c8e=users[_0x501936(0x10c)];console[_0x501936(0x156)](_0x3b9c8e);}else{if(_0x16a5b4[0x0][_0x501936(0xed)]==_0x501936(0x110))var _0x3b9c8e=users[_0x501936(0x110)];else{if(_0x16a5b4[0x0]['language']==_0x501936(0x128))var _0x3b9c8e=users[_0x501936(0x128)];else{if(_0x16a5b4[0x0][_0x501936(0xed)]=='Spanish')var _0x3b9c8e=users['Spanish'];else{if(_0x16a5b4[0x0][_0x501936(0xed)]==_0x501936(0x161))var _0x3b9c8e=users[_0x501936(0x161)];else{if(_0x16a5b4[0x0][_0x501936(0xed)]==_0x501936(0x153))var _0x3b9c8e=users[_0x501936(0x164)];else{if(_0x16a5b4[0x0][_0x501936(0xed)]==_0x501936(0x132))var _0x3b9c8e=users[_0x501936(0x132)];else{if(_0x16a5b4[0x0][_0x501936(0xed)]==_0x501936(0x114))var _0x3b9c8e=users['Arabic'];}}}}}}}_0x574e28[_0x501936(0x13f)](_0x501936(0x15d),{'success':_0x31513c[_0x501936(0x11e)](_0x501936(0x135)),'errors':_0x31513c[_0x501936(0x11e)](_0x501936(0x12e)),'role':_0x1b86e2,'profile':_0x326dc3,'master_shop':_0x16a5b4,'user':_0xfe1bed,'stock':_0x2d1862,'unit':_0xb5ce73,'language':_0x3b9c8e,'warehouses':_0x189082,'rooms':_0x21f1e5,'warehouse_QA':_0x1795f3});}catch(_0x2e7109){console[_0x501936(0x156)](_0x2e7109);}}),router[a0_0x2040bf(0x103)](a0_0x2040bf(0x144),auth,async(_0xd0dcd3,_0x189a9b)=>{var _0x2e032c=a0_0x2040bf;if(_0xd0dcd3[_0x2e032c(0x116)]['for_categorize']=='QA')try{const _0x4c0774=_0xd0dcd3[_0x2e032c(0xf7)]['id'],_0x2889d6=await sales_return[_0x2e032c(0x143)]({'invoice':_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x15a)]}),_0x7ad59f=await warehouse[_0x2e032c(0x143)]({'name':_0x2889d6[_0x2e032c(0x13b)],'room':_0x2889d6[_0x2e032c(0xf9)]}),{invoice:_0x3654e8,customer:_0x536a39,date:_0x17c1e4,warehouse_name:_0x105c17,product_name:_0x3e5cd7,primary_code:_0x4f5507,secondary_code:_0x2a7f3d,product_code:_0x6856a,sales_quantity:_0x4120cb,stocks:_0xf14cd4,return_qty:_0x369b16,note:_0x5a015d,to_warehouse_name_QA:_0x1c32ce,to_Room_name_QA:_0x1d2f8d}=_0xd0dcd3['body'];if(typeof product_name_QA==_0x2e032c(0x104))var _0x25eff5=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x100)]],_0x822430=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x168)]],_0x13a457=[_0xd0dcd3['body'][_0x2e032c(0xf8)]],_0x369884=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x162)]],_0x2f3639=[_0xd0dcd3['body']['sales_quantity_QA']],_0x6a2df4=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x109)]],_0x1622c3=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x152)]];else var _0x25eff5=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x100)]],_0x822430=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x168)]],_0x13a457=[..._0xd0dcd3[_0x2e032c(0x116)]['secondary_code_QA']],_0x369884=[..._0xd0dcd3[_0x2e032c(0x116)]['product_code_QA']],_0x2f3639=[..._0xd0dcd3['body']['sales_quantity_QA']],_0x6a2df4=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x109)]],_0x1622c3=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x152)]];const _0x40f485=_0x25eff5[_0x2e032c(0xfc)](_0x215c70=>{return _0x215c70={'product_name':_0x215c70};});_0x822430[_0x2e032c(0x15b)]((_0x520d98,_0x48c2b5)=>{var _0x5c59a2=_0x2e032c;_0x40f485[_0x48c2b5][_0x5c59a2(0x106)]=_0x520d98;}),_0x13a457[_0x2e032c(0x15b)]((_0x563d16,_0x4cce9f)=>{var _0x44070d=_0x2e032c;_0x40f485[_0x4cce9f][_0x44070d(0xfe)]=_0x563d16;}),_0x369884[_0x2e032c(0x15b)]((_0x15a050,_0x2a72ec)=>{var _0x250dab=_0x2e032c;_0x40f485[_0x2a72ec][_0x250dab(0xf1)]=_0x15a050;}),_0x2f3639['forEach']((_0x2154ab,_0xc3a2fd)=>{var _0x24a0bc=_0x2e032c;_0x40f485[_0xc3a2fd][_0x24a0bc(0x14a)]=_0x2154ab;}),_0x6a2df4[_0x2e032c(0x15b)]((_0x4aa955,_0x48e9fb)=>{var _0x29d4f9=_0x2e032c;_0x40f485[_0x48e9fb][_0x29d4f9(0x139)]=_0x4aa955;}),_0x1622c3['forEach']((_0x29fd94,_0x52c0ab)=>{_0x40f485[_0x52c0ab]['return_qty']=_0x29fd94;}),_0x2889d6[_0x2e032c(0x11f)]['forEach'](_0x192201=>{var _0xd9f78d=_0x2e032c;const _0x1718f8=_0x7ad59f[_0xd9f78d(0xfb)][_0xd9f78d(0xfc)](_0x47f802=>{var _0x5bbbc3=_0xd9f78d;_0x47f802[_0x5bbbc3(0x134)]==_0x192201['product_name']&&(_0x47f802[_0x5bbbc3(0x13c)]=parseInt(_0x47f802[_0x5bbbc3(0x13c)])+parseInt(_0x192201['return_qty']));});}),await _0x7ad59f[_0x2e032c(0x10d)](),_0x2889d6[_0x2e032c(0x15a)]=_0x3654e8,_0x2889d6[_0x2e032c(0x145)]=_0x536a39,_0x2889d6['date']=_0x17c1e4,_0x2889d6[_0x2e032c(0x146)]=_0x105c17,_0x2889d6[_0x2e032c(0x11f)]=_0x40f485,_0x2889d6[_0x2e032c(0xee)]=_0x5a015d,_0x2889d6[_0x2e032c(0x13b)]=_0x1c32ce,_0x2889d6[_0x2e032c(0xf9)]=_0x1d2f8d;const _0x42dd38=await _0x2889d6[_0x2e032c(0x10d)](),_0x4d86ef=await c_payment_data[_0x2e032c(0x143)]({'invoice':_0xd0dcd3['body'][_0x2e032c(0x15a)],'reason':_0x2e032c(0x14c)});_0x4d86ef[_0x2e032c(0x124)]=_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x124)],_0x4d86ef[_0x2e032c(0x12c)]=_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x12c)],await _0x4d86ef[_0x2e032c(0x10d)](),_0xd0dcd3['flash'](_0x2e032c(0x135),_0x2e032c(0x111)),_0x189a9b[_0x2e032c(0x12d)](_0x2e032c(0x159));}catch(_0x2f0da6){console[_0x2e032c(0x156)](_0x2f0da6),_0x189a9b[_0x2e032c(0x167)](0xc8)[_0x2e032c(0x122)]({'message':_0x2f0da6['message']});}else try{const _0x1dfb0a=_0xd0dcd3[_0x2e032c(0xf7)]['id'];console[_0x2e032c(0x156)](_0x1dfb0a);const _0x5d66e1=await sales_return['findOne']({'invoice':_0xd0dcd3['body'][_0x2e032c(0x15a)]});console[_0x2e032c(0x156)](_0x2e032c(0x138),_0x5d66e1);const _0xab8dd5=await warehouse[_0x2e032c(0x143)]({'name':_0x5d66e1['ToWarehouse'],'room':_0x5d66e1[_0x2e032c(0xf9)]});console[_0x2e032c(0x156)](_0x2e032c(0x12a),_0xab8dd5);const {invoice:_0x23087d,customer:_0x1e6ccb,date:_0x2ba30b,warehouse_name:_0x4febaf,product_name:_0xad29e1,primary_code:_0x56cd45,secondary_code:_0x2520ab,product_code:_0x20b5dc,sales_quantity:_0x57154d,stocks:_0x763fa6,return_qty:_0x1ff6ed,note:_0x47b232,to_warehouse_name:_0x2aace0,to_Room_name:_0xc45850}=_0xd0dcd3['body'];console[_0x2e032c(0x156)](_0xd0dcd3[_0x2e032c(0x116)]);if(typeof _0xad29e1=='string')var _0x25eff5=[_0xd0dcd3[_0x2e032c(0x116)]['product_name']],_0x822430=[_0xd0dcd3['body']['primary_code']],_0x13a457=[_0xd0dcd3[_0x2e032c(0x116)]['secondary_code']],_0x369884=[_0xd0dcd3[_0x2e032c(0x116)]['product_code']],_0x2f3639=[_0xd0dcd3['body'][_0x2e032c(0x150)]],_0x6a2df4=[_0xd0dcd3['body'][_0x2e032c(0x130)]],_0x1622c3=[_0xd0dcd3['body'][_0x2e032c(0x141)]],_0x3be9bd=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x11a)]],_0x1e1718=[_0xd0dcd3['body'][_0x2e032c(0x14d)]],_0x12c898=[_0xd0dcd3[_0x2e032c(0x116)]['types']],_0x25c737=[_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x120)]];else var _0x25eff5=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x134)]],_0x822430=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x106)]],_0x13a457=[..._0xd0dcd3['body'][_0x2e032c(0xfe)]],_0x369884=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0xf1)]],_0x2f3639=[..._0xd0dcd3['body'][_0x2e032c(0x150)]],_0x6a2df4=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x130)]],_0x1622c3=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x141)]],_0x3be9bd=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x11a)]],_0x1e1718=[..._0xd0dcd3['body'][_0x2e032c(0x14d)]],_0x12c898=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x157)]],_0x25c737=[..._0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x120)]];const _0x13314b=_0x25eff5[_0x2e032c(0xfc)](_0x5e2c59=>{return _0x5e2c59={'product_name':_0x5e2c59};});_0x822430[_0x2e032c(0x15b)]((_0x442d0d,_0x3438be)=>{var _0x54436d=_0x2e032c;_0x13314b[_0x3438be][_0x54436d(0x106)]=_0x442d0d;}),_0x13a457[_0x2e032c(0x15b)]((_0x29d91b,_0x2cca41)=>{_0x13314b[_0x2cca41]['secondary_code']=_0x29d91b;}),_0x369884[_0x2e032c(0x15b)]((_0x225073,_0x402d79)=>{var _0x4746c5=_0x2e032c;_0x13314b[_0x402d79][_0x4746c5(0xf1)]=_0x225073;}),_0x2f3639[_0x2e032c(0x15b)]((_0x2b7ed5,_0x32952e)=>{var _0x336169=_0x2e032c;_0x13314b[_0x32952e][_0x336169(0x14a)]=_0x2b7ed5;}),_0x6a2df4[_0x2e032c(0x15b)]((_0x3138e8,_0x5b1997)=>{var _0x22efba=_0x2e032c;_0x13314b[_0x5b1997][_0x22efba(0x139)]=_0x3138e8;}),_0x1622c3[_0x2e032c(0x15b)]((_0x2bacd5,_0x1c7d56)=>{var _0x1c0f4a=_0x2e032c;_0x13314b[_0x1c7d56][_0x1c0f4a(0x141)]=_0x2bacd5;}),_0x3be9bd[_0x2e032c(0x15b)]((_0x4f4d8c,_0xa1164)=>{var _0x33ae4b=_0x2e032c;_0x13314b[_0xa1164][_0x33ae4b(0x11a)]=_0x4f4d8c;}),_0x1e1718[_0x2e032c(0x15b)]((_0x3f94ba,_0x7d15c)=>{var _0x150fae=_0x2e032c;_0x13314b[_0x7d15c][_0x150fae(0x14d)]=_0x3f94ba;}),_0x12c898[_0x2e032c(0x15b)]((_0x2feb3a,_0x5bd7bb)=>{var _0x275e92=_0x2e032c;_0x13314b[_0x5bd7bb][_0x275e92(0x127)]=_0x2feb3a;}),_0x25c737[_0x2e032c(0x15b)]((_0x286f81,_0x5edb90)=>{_0x13314b[_0x5edb90]['floorlevel']=_0x286f81;});var _0x8b10a3=0x0;_0x13314b[_0x2e032c(0x15b)](_0x2655a3=>{var _0x2481ea=_0x2e032c;console[_0x2481ea(0x156)](_0x2481ea(0x129),_0x2655a3),(parseInt(_0x2655a3[_0x2481ea(0x14a)])<parseInt(_0x2655a3[_0x2481ea(0x141)])||parseInt(_0x2655a3[_0x2481ea(0x139)])<parseInt(_0x2655a3[_0x2481ea(0x141)])&&parseInt(_0x2655a3['sale_qty'])>parseInt(_0x2655a3[_0x2481ea(0x141)])||parseInt(_0x2655a3[_0x2481ea(0x141)])==0x0)&&_0x8b10a3++;});if(_0x8b10a3!=0x0)return _0xd0dcd3[_0x2e032c(0x11e)]('errors',_0x2e032c(0x13d)),_0x189a9b[_0x2e032c(0x12d)](_0x2e032c(0x142));_0x5d66e1['return_sale'][_0x2e032c(0x15b)](_0x2a2c92=>{var _0x44e752=_0x2e032c;const _0x3a3040=_0xab8dd5[_0x44e752(0xfb)][_0x44e752(0xfc)](_0x2875a0=>{var _0x565bc9=_0x44e752;_0x2875a0[_0x565bc9(0x134)]==_0x2a2c92[_0x565bc9(0x134)]&&_0x2875a0[_0x565bc9(0x120)]==_0x2a2c92[_0x565bc9(0x120)]&&_0x2875a0[_0x565bc9(0x127)]==_0x2a2c92[_0x565bc9(0x127)]&&_0x2875a0['bin']==_0x2a2c92[_0x565bc9(0x14d)]&&_0x2875a0['bay']==_0x2a2c92['bay']&&(_0x2875a0['product_stock']=parseInt(_0x2875a0[_0x565bc9(0x13c)])+parseInt(_0x2a2c92[_0x565bc9(0x141)]));});}),console[_0x2e032c(0x156)](_0x2e032c(0x12a),_0xab8dd5),await _0xab8dd5[_0x2e032c(0x10d)](),_0x5d66e1[_0x2e032c(0x15a)]=_0x23087d,_0x5d66e1[_0x2e032c(0x145)]=_0x1e6ccb,_0x5d66e1['date']=_0x2ba30b,_0x5d66e1['warehouse_name']=_0x4febaf,_0x5d66e1[_0x2e032c(0x11c)]=_0x13314b,_0x5d66e1[_0x2e032c(0xee)]=_0x47b232,_0x5d66e1['ToWarehouse']=_0x2aace0,_0x5d66e1['ToRoom']=_0xc45850;const _0x175d05=await _0x5d66e1['save']();console[_0x2e032c(0x156)]('new\x20new_data',_0x175d05);const _0x24f4f2=await c_payment_data[_0x2e032c(0x143)]({'invoice':_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x15a)],'reason':_0x2e032c(0x14c)});_0x24f4f2[_0x2e032c(0x124)]=_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x124)],_0x24f4f2[_0x2e032c(0x12c)]=_0xd0dcd3[_0x2e032c(0x116)][_0x2e032c(0x12c)],await _0x24f4f2[_0x2e032c(0x10d)](),_0xd0dcd3['flash'](_0x2e032c(0x135),_0x2e032c(0x111)),_0x189a9b[_0x2e032c(0x12d)](_0x2e032c(0x169));}catch(_0x39fd80){console['log'](_0x39fd80),_0x189a9b[_0x2e032c(0x167)](0xc8)[_0x2e032c(0x122)]({'message':_0x39fd80[_0x2e032c(0x113)]});}}),router[a0_0x2040bf(0x103)](a0_0x2040bf(0x121),auth,async(_0x385115,_0x3e2700)=>{var _0x1a1182=a0_0x2040bf;try{const _0x58d86e=_0x385115[_0x1a1182(0xf7)]['id'],{invoice:_0xaf288c,customer:_0x13e15c,payable_to_customer:_0x42d403,paid_amount:_0x1ae6ed}=_0x385115['body'],_0x22dc18=await sales_return[_0x1a1182(0x102)](_0x58d86e);console[_0x1a1182(0x156)](_0x1a1182(0x10e),_0x22dc18),console[_0x1a1182(0x156)](_0x42d403),console[_0x1a1182(0x156)](_0x1ae6ed);var _0x430a5e=_0x42d403-_0x1ae6ed;console['log'](_0x1a1182(0x140),_0x430a5e),_0x22dc18[_0x1a1182(0x147)]=parseFloat(_0x1ae6ed)+parseFloat(_0x22dc18[_0x1a1182(0x147)]),_0x22dc18[_0x1a1182(0x137)]=_0x430a5e,console['log'](_0x22dc18);const _0x294ede=await _0x22dc18['save']();console[_0x1a1182(0x156)](0x1b207);const _0x1209f2=await c_payment_data[_0x1a1182(0x143)]({'invoice':_0x385115['body'][_0x1a1182(0x15a)],'reason':_0x1a1182(0x14c)});console[_0x1a1182(0x156)](_0x1a1182(0x15c),_0x1209f2),_0x1209f2[_0x1a1182(0x15e)]=_0x430a5e,await _0x1209f2[_0x1a1182(0x10d)]();let _0x17d7b5=new Date(),_0x3eb253=('0'+_0x17d7b5[_0x1a1182(0xfd)]())[_0x1a1182(0x11b)](-0x2),_0x22515f=('0'+(_0x17d7b5[_0x1a1182(0x10a)]()+0x1))[_0x1a1182(0x11b)](-0x2),_0x15f92e=_0x17d7b5[_0x1a1182(0x115)](),_0xd79935=_0x15f92e+'-'+_0x22515f+'-'+_0x3eb253;const _0x3215ce=new customer_payment({'invoice':_0xaf288c,'date':_0x15f92e+'-'+_0x22515f+'-'+_0x3eb253,'customer':_0x13e15c,'reason':_0x1a1182(0x151),'amount':_0x1ae6ed}),_0x17d548=await _0x3215ce[_0x1a1182(0x10d)]();_0x385115['flash'](_0x1a1182(0x135),_0x1a1182(0x119)),_0x3e2700[_0x1a1182(0x12d)](_0x1a1182(0x169));}catch(_0x214600){console[_0x1a1182(0x156)](_0x214600);}}),router[a0_0x2040bf(0xf5)](a0_0x2040bf(0x165),auth,async(_0x1740ec,_0x3739f7)=>{var _0x5f553e=a0_0x2040bf;try{const {username:_0x428057,email:_0x60da4c,role:_0x2cd721}=_0x1740ec[_0x5f553e(0x118)],_0x2a8952=_0x1740ec[_0x5f553e(0x118)],_0x509cd5=await profile[_0x5f553e(0x143)]({'email':_0x2a8952[_0x5f553e(0xf4)]}),_0x239ad3=await master_shop[_0x5f553e(0xef)]();console['log'](_0x5f553e(0x108),_0x239ad3);const _0x235bd8=_0x1740ec[_0x5f553e(0xf7)]['id'],_0x333fb5=await sales_return[_0x5f553e(0x102)](_0x235bd8);console[_0x5f553e(0x156)](_0x333fb5);const _0x60f114=await customer[_0x5f553e(0x143)]({'name':_0x333fb5[_0x5f553e(0x145)]});console[_0x5f553e(0x156)](_0x60f114);if(_0x239ad3[0x0][_0x5f553e(0xed)]==_0x5f553e(0x117)){var _0x5249a0=users[_0x5f553e(0x10c)];console[_0x5f553e(0x156)](_0x5249a0);}else{if(_0x239ad3[0x0][_0x5f553e(0xed)]==_0x5f553e(0x110))var _0x5249a0=users[_0x5f553e(0x110)];else{if(_0x239ad3[0x0]['language']==_0x5f553e(0x128))var _0x5249a0=users[_0x5f553e(0x128)];else{if(_0x239ad3[0x0][_0x5f553e(0xed)]==_0x5f553e(0x101))var _0x5249a0=users[_0x5f553e(0x101)];else{if(_0x239ad3[0x0]['language']==_0x5f553e(0x161))var _0x5249a0=users['French'];else{if(_0x239ad3[0x0]['language']==_0x5f553e(0x153))var _0x5249a0=users['Portuguese'];else{if(_0x239ad3[0x0]['language']=='Chinese')var _0x5249a0=users['Chinese'];else{if(_0x239ad3[0x0][_0x5f553e(0xed)]==_0x5f553e(0x114))var _0x5249a0=users[_0x5f553e(0x13a)];}}}}}}}_0x3739f7[_0x5f553e(0x13f)]('sales_return_invoice',{'success':_0x1740ec[_0x5f553e(0x11e)](_0x5f553e(0x135)),'errors':_0x1740ec[_0x5f553e(0x11e)](_0x5f553e(0x12e)),'role':_0x2a8952,'profile':_0x509cd5,'master_shop':_0x239ad3,'customers':_0x60f114,'sales':_0x333fb5,'language':_0x5249a0});}catch(_0x5d5720){console[_0x5f553e(0x156)](_0x5d5720);}}),module['exports']=router;