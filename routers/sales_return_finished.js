function a0_0x48eb(){var _0xcf8dc=['/view','bin','redirect','due_amount','status','paid_amount','2kfQeOl','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','primary_code_QA','1586808wCjTWQ','$product_details.type','English\x20(US)','post','body','German','c_payment','message','return_sale','string','for_categorize','customers','params','2611sSCefh','$name','$product_details.primary_code','floorlevel','findById','return_sale_QA','product_name_QA','ToRoom','amount','Arabic\x20(ae)','note','sales_quantity_QA','aggregate','$product_details.bay','Hindi','product_code_QA','Spanish','forEach','customer_docs','save','invoice','bay','stocks_QA','success','$product_details','Enabled','return_sale_edit_finished','language','116474JjcIEE','product_name','secondary_code','English','email','slice','name','getMonth','old_warehouse_data','/sales_return/view','user','foreach\x20newproduct','secondary_code_QA','Finished\x20Goods','ToWarehouse','find','purchase\x20return\x20successfully','primary_code','$product_details.rack','../public/language/languages.json','stock','1014200KfvzNq','errors','63hlQezp','../middleware/auth','Returned\x20Payment\x20For\x20Sale\x20Return','subtract','/sales_return_finished/view','$product_details.product_stock','1122084XkgXtf','/invoice/:id','data','getDate','payment\x20successfull','Portuguese\x20(BR)','new\x20new_data','$product_details.storage','getFullYear','master','5648nachUe','findOne','sales_return_invoice','French','log','$product_details.product_code','product_stock','stocks','product_details','$customer_docs','map','render','back','date','exports','suppliers','return_qty','return_qty_QA','type','types','$product_details.secondary_code','Sale\x20Return','json','warehouse_name','Arabic','Chinese','sales_quantity','sale_qty','Router','1100256Ocxvdq','1657380KtGBsL','Portuguese','get','product_code','customer','$product_details._id','flash'];a0_0x48eb=function(){return _0xcf8dc;};return a0_0x48eb();}var a0_0x4e6bf8=a0_0x5b60;(function(_0x1a5b4b,_0xe58570){var _0x2e7206=a0_0x5b60,_0x12d905=_0x1a5b4b();while(!![]){try{var _0x3b6ce4=-parseInt(_0x2e7206(0xc9))/0x1*(parseInt(_0x2e7206(0x11b))/0x2)+-parseInt(_0x2e7206(0xe6))/0x3+-parseInt(_0x2e7206(0x10d))/0x4+-parseInt(_0x2e7206(0xde))/0x5+-parseInt(_0x2e7206(0x11e))/0x6+-parseInt(_0x2e7206(0x12b))/0x7*(-parseInt(_0x2e7206(0xf0))/0x8)+parseInt(_0x2e7206(0xe0))/0x9*(parseInt(_0x2e7206(0x10e))/0xa);if(_0x3b6ce4===_0xe58570)break;else _0x12d905['push'](_0x12d905['shift']());}catch(_0x194243){_0x12d905['push'](_0x12d905['shift']());}}}(a0_0x48eb,0x2e8a6));const express=require('express'),app=express(),router=express[a0_0x4e6bf8(0x10c)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x4e6bf8(0xe1)),users=require(a0_0x4e6bf8(0xdc));function a0_0x5b60(_0x57f15b,_0x246ca7){var _0x48ebbb=a0_0x48eb();return a0_0x5b60=function(_0x5b60ee,_0x198d9d){_0x5b60ee=_0x5b60ee-0xbf;var _0x4d7f41=_0x48ebbb[_0x5b60ee];return _0x4d7f41;},a0_0x5b60(_0x57f15b,_0x246ca7);}router[a0_0x4e6bf8(0x110)](a0_0x4e6bf8(0x115),auth,async(_0x2659cd,_0x54c80a)=>{var _0xcdc5a8=a0_0x4e6bf8;try{const {username:_0x2a26c3,email:_0x1814aa,role:_0x6f0075}=_0x2659cd[_0xcdc5a8(0xd3)],_0x553f17=_0x2659cd[_0xcdc5a8(0xd3)],_0x2a6234=await profile[_0xcdc5a8(0xf1)]({'email':_0x553f17['email']}),_0x1e8a78=await master_shop[_0xcdc5a8(0xd8)](),_0x33b02e=await sales_return_finished[_0xcdc5a8(0x137)]([{'$lookup':{'from':_0xcdc5a8(0x129),'localField':'customer','foreignField':_0xcdc5a8(0xcf),'as':_0xcdc5a8(0xbf)}},{'$unwind':_0xcdc5a8(0xf9)}]);if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]=='English\x20(US)'){var _0x18b491=users['English'];console['log'](_0x18b491);}else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]==_0xcdc5a8(0x139))var _0x18b491=users[_0xcdc5a8(0x139)];else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]==_0xcdc5a8(0x123))var _0x18b491=users[_0xcdc5a8(0x123)];else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]=='Spanish')var _0x18b491=users[_0xcdc5a8(0x13b)];else{if(_0x1e8a78[0x0]['language']=='French')var _0x18b491=users[_0xcdc5a8(0xf3)];else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]==_0xcdc5a8(0xeb))var _0x18b491=users[_0xcdc5a8(0x10f)];else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]==_0xcdc5a8(0x109))var _0x18b491=users[_0xcdc5a8(0x109)];else{if(_0x1e8a78[0x0][_0xcdc5a8(0xc8)]==_0xcdc5a8(0x134))var _0x18b491=users[_0xcdc5a8(0x108)];}}}}}}}_0x54c80a[_0xcdc5a8(0xfb)]('sales_return_finished',{'success':_0x2659cd[_0xcdc5a8(0x114)]('success'),'errors':_0x2659cd[_0xcdc5a8(0x114)](_0xcdc5a8(0xdf)),'role':_0x553f17,'profile':_0x2a6234,'master_shop':_0x1e8a78,'user':_0x33b02e,'language':_0x18b491});}catch(_0x5ac288){console['log'](_0x5ac288);}}),router[a0_0x4e6bf8(0x110)]('/view/:id',auth,async(_0xfcf33f,_0x39c429)=>{var _0xdd321a=a0_0x4e6bf8;try{const {username:_0x1369f2,email:_0x2fd33b,role:_0x266fa4}=_0xfcf33f['user'],_0x2392e8=_0xfcf33f[_0xdd321a(0xd3)],_0x588314=await profile[_0xdd321a(0xf1)]({'email':_0x2392e8['email']}),_0x43c4f9=await master_shop[_0xdd321a(0xd8)]();console['log'](_0xdd321a(0xef),_0x43c4f9);const _0x49253b=_0xfcf33f[_0xdd321a(0x12a)]['id'];console[_0xdd321a(0xf4)](_0x49253b);var _0x1c9c08=['Return\x20Rooms'];const _0x3a35cf=await sales_return_finished[_0xdd321a(0x12f)](_0x49253b),_0x2b8313=await warehouse[_0xdd321a(0x137)]([{'$match':{'name':_0x3a35cf[_0xdd321a(0xd7)],'room':_0x3a35cf[_0xdd321a(0x132)]}},{'$unwind':_0xdd321a(0xc5)},{'$group':{'_id':_0xdd321a(0x113),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0xdd321a(0xe5)},'bay':{'$first':_0xdd321a(0x138)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0xdd321a(0x11f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0xdd321a(0x12d)},'secondary_code':{'$first':_0xdd321a(0x104)},'product_code':{'$first':_0xdd321a(0xf5)},'storage':{'$first':_0xdd321a(0xed)},'rack':{'$first':_0xdd321a(0xdb)}}}]);console[_0xdd321a(0xf4)](_0x2b8313);const _0x3be816=await warehouse[_0xdd321a(0x137)]([{'$match':{'status':'Enabled','warehouse_category':_0xdd321a(0xd6)}},{'$group':{'_id':_0xdd321a(0x12c),'name':{'$first':_0xdd321a(0x12c)}}},{'$sort':{'name':0x1}}]),_0x4112e5=await warehouse['aggregate']([{'$match':{'status':_0xdd321a(0xc6),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0xdd321a(0x12c)}}},{'$sort':{'name':0x1}}]),_0x3f7375=await product[_0xdd321a(0xd8)]({});if(_0x43c4f9[0x0][_0xdd321a(0xc8)]=='English\x20(US)'){var _0x42258e=users['English'];console[_0xdd321a(0xf4)](_0x42258e);}else{if(_0x43c4f9[0x0][_0xdd321a(0xc8)]==_0xdd321a(0x139))var _0x42258e=users[_0xdd321a(0x139)];else{if(_0x43c4f9[0x0]['language']==_0xdd321a(0x123))var _0x42258e=users[_0xdd321a(0x123)];else{if(_0x43c4f9[0x0]['language']=='Spanish')var _0x42258e=users[_0xdd321a(0x13b)];else{if(_0x43c4f9[0x0][_0xdd321a(0xc8)]==_0xdd321a(0xf3))var _0x42258e=users[_0xdd321a(0xf3)];else{if(_0x43c4f9[0x0][_0xdd321a(0xc8)]==_0xdd321a(0xeb))var _0x42258e=users[_0xdd321a(0x10f)];else{if(_0x43c4f9[0x0]['language']==_0xdd321a(0x109))var _0x42258e=users['Chinese'];else{if(_0x43c4f9[0x0][_0xdd321a(0xc8)]=='Arabic\x20(ae)')var _0x42258e=users[_0xdd321a(0x108)];}}}}}}}_0x39c429[_0xdd321a(0xfb)](_0xdd321a(0xc7),{'success':_0xfcf33f[_0xdd321a(0x114)](_0xdd321a(0xc4)),'errors':_0xfcf33f[_0xdd321a(0x114)](_0xdd321a(0xdf)),'role':_0x2392e8,'profile':_0x588314,'master_shop':_0x43c4f9,'user':_0x3a35cf,'stock':_0x2b8313,'unit':_0x3f7375,'language':_0x42258e,'warehouses':_0x3be816,'rooms':_0x1c9c08,'warehouse_QA':_0x4112e5});}catch(_0x584d32){console[_0xdd321a(0xf4)](_0x584d32);}}),router[a0_0x4e6bf8(0x121)]('/view/:id',auth,async(_0x3536fb,_0x522400)=>{var _0xe2554d=a0_0x4e6bf8;if(_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x128)]=='QA')try{const _0x312278=_0x3536fb['params']['id'],_0x2ba67f=await sales_return[_0xe2554d(0xf1)]({'invoice':_0x3536fb['body'][_0xe2554d(0xc1)]}),_0x11fdf3=await warehouse['findOne']({'name':_0x2ba67f[_0xe2554d(0xd7)],'room':_0x2ba67f[_0xe2554d(0x132)]}),{invoice:_0x5b8aff,customer:_0x1681b9,date:_0x158f9d,warehouse_name:_0x1bf97a,product_name:_0x398aa1,primary_code:_0x50f40d,secondary_code:_0x4c84c1,product_code:_0x25065e,sales_quantity:_0xcbfb16,stocks:_0x41a8dc,return_qty:_0x403785,note:_0x3e9b4b,to_warehouse_name_QA:_0x1d2eab,to_Room_name_QA:_0x22e43f}=_0x3536fb[_0xe2554d(0x122)];if(typeof product_name_QA==_0xe2554d(0x127))var _0x321b36=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x131)]],_0x4f8182=[_0x3536fb['body'][_0xe2554d(0x11d)]],_0x2ec657=[_0x3536fb['body']['secondary_code_QA']],_0x207300=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x13a)]],_0x3d8998=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x136)]],_0x30cf20=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xc3)]],_0x2d3e19=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x101)]];else var _0x321b36=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x131)]],_0x4f8182=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x11d)]],_0x2ec657=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xd5)]],_0x207300=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x13a)]],_0x3d8998=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x136)]],_0x30cf20=[..._0x3536fb['body'][_0xe2554d(0xc3)]],_0x2d3e19=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x101)]];const _0x3db109=_0x321b36['map'](_0x44b252=>{return _0x44b252={'product_name':_0x44b252};});_0x4f8182['forEach']((_0x376b00,_0x2079e3)=>{var _0x386d84=_0xe2554d;_0x3db109[_0x2079e3][_0x386d84(0xda)]=_0x376b00;}),_0x2ec657[_0xe2554d(0x13c)]((_0x520d8b,_0x5db311)=>{var _0x4dd077=_0xe2554d;_0x3db109[_0x5db311][_0x4dd077(0xcb)]=_0x520d8b;}),_0x207300['forEach']((_0x988041,_0x3d082e)=>{var _0x26d343=_0xe2554d;_0x3db109[_0x3d082e][_0x26d343(0x111)]=_0x988041;}),_0x3d8998['forEach']((_0x59e5b1,_0x46432c)=>{var _0x27c966=_0xe2554d;_0x3db109[_0x46432c][_0x27c966(0x10b)]=_0x59e5b1;}),_0x30cf20[_0xe2554d(0x13c)]((_0x28ac76,_0x5c77dc)=>{var _0x4087a4=_0xe2554d;_0x3db109[_0x5c77dc][_0x4087a4(0xdd)]=_0x28ac76;}),_0x2d3e19[_0xe2554d(0x13c)]((_0x1f3c6e,_0x1eea88)=>{var _0x45d2b5=_0xe2554d;_0x3db109[_0x1eea88][_0x45d2b5(0x100)]=_0x1f3c6e;}),_0x2ba67f['return_sale_QA'][_0xe2554d(0x13c)](_0x4a856b=>{var _0x389c23=_0xe2554d;const _0xc04da5=_0x11fdf3[_0x389c23(0xf8)]['map'](_0xb34844=>{var _0x32d687=_0x389c23;_0xb34844[_0x32d687(0xca)]==_0x4a856b['product_name']&&(_0xb34844[_0x32d687(0xf6)]=parseInt(_0xb34844['product_stock'])+parseInt(_0x4a856b[_0x32d687(0x100)]));});}),await _0x11fdf3[_0xe2554d(0xc0)](),_0x2ba67f['invoice']=_0x5b8aff,_0x2ba67f['customer']=_0x1681b9,_0x2ba67f[_0xe2554d(0xfd)]=_0x158f9d,_0x2ba67f[_0xe2554d(0x107)]=_0x1bf97a,_0x2ba67f[_0xe2554d(0x130)]=_0x3db109,_0x2ba67f[_0xe2554d(0x135)]=_0x3e9b4b,_0x2ba67f[_0xe2554d(0xd7)]=_0x1d2eab,_0x2ba67f[_0xe2554d(0x132)]=_0x22e43f;const _0x5a92aa=await _0x2ba67f[_0xe2554d(0xc0)](),_0x256369=await c_payment_data[_0xe2554d(0xf1)]({'invoice':_0x3536fb['body'][_0xe2554d(0xc1)],'reason':_0xe2554d(0x105)});_0x256369[_0xe2554d(0xff)]=_0x3536fb[_0xe2554d(0x122)]['suppliers'],_0x256369[_0xe2554d(0xfd)]=_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xfd)],await _0x256369[_0xe2554d(0xc0)](),_0x3536fb[_0xe2554d(0x114)](_0xe2554d(0xc4),_0xe2554d(0xd9)),_0x522400[_0xe2554d(0x117)](_0xe2554d(0xe4));}catch(_0x2e0f73){console[_0xe2554d(0xf4)](_0x2e0f73),_0x522400[_0xe2554d(0x119)](0xc8)[_0xe2554d(0x106)]({'message':_0x2e0f73[_0xe2554d(0x125)]});}else try{const _0x311271=_0x3536fb[_0xe2554d(0x12a)]['id'];console['log'](_0x311271);const _0x1e5788=await sales_return[_0xe2554d(0xf1)]({'invoice':_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xc1)]});console[_0xe2554d(0xf4)]('old_data',_0x1e5788);const _0x2ade7f=await warehouse[_0xe2554d(0xf1)]({'name':_0x1e5788[_0xe2554d(0xd7)],'room':_0x1e5788['ToRoom']});console['log']('old_warehouse_data',_0x2ade7f);const {invoice:_0x59e9cf,customer:_0x34c7ad,date:_0x12f63c,warehouse_name:_0xe1ab87,product_name:_0x540417,primary_code:_0x4b5d0f,secondary_code:_0x35e60,product_code:_0x3b0782,sales_quantity:_0x3ee662,stocks:_0x5ec718,return_qty:_0x37185a,note:_0x165fae,to_warehouse_name:_0x59e24c,to_Room_name:_0x16d856}=_0x3536fb[_0xe2554d(0x122)];console[_0xe2554d(0xf4)](_0x3536fb['body']);if(typeof _0x540417==_0xe2554d(0x127))var _0x321b36=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xca)]],_0x4f8182=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xda)]],_0x2ec657=[_0x3536fb[_0xe2554d(0x122)]['secondary_code']],_0x207300=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x111)]],_0x3d8998=[_0x3536fb['body']['sales_quantity']],_0x30cf20=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xf7)]],_0x2d3e19=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x100)]],_0x2326d8=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xc2)]],_0x20c7fe=[_0x3536fb['body']['bin']],_0x401cdc=[_0x3536fb[_0xe2554d(0x122)]['types']],_0x3b0164=[_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x12e)]];else var _0x321b36=[..._0x3536fb['body']['product_name']],_0x4f8182=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xda)]],_0x2ec657=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xcb)]],_0x207300=[..._0x3536fb['body'][_0xe2554d(0x111)]],_0x3d8998=[..._0x3536fb['body'][_0xe2554d(0x10a)]],_0x30cf20=[..._0x3536fb[_0xe2554d(0x122)]['stocks']],_0x2d3e19=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x100)]],_0x2326d8=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xc2)]],_0x20c7fe=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x116)]],_0x401cdc=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x103)]],_0x3b0164=[..._0x3536fb[_0xe2554d(0x122)][_0xe2554d(0x12e)]];const _0x18ce0c=_0x321b36['map'](_0x5d3b2d=>{return _0x5d3b2d={'product_name':_0x5d3b2d};});_0x4f8182['forEach']((_0x1fe559,_0x31bbba)=>{var _0x55707e=_0xe2554d;_0x18ce0c[_0x31bbba][_0x55707e(0xda)]=_0x1fe559;}),_0x2ec657[_0xe2554d(0x13c)]((_0x38762b,_0x34c114)=>{var _0x4b678e=_0xe2554d;_0x18ce0c[_0x34c114][_0x4b678e(0xcb)]=_0x38762b;}),_0x207300[_0xe2554d(0x13c)]((_0x5a4fdb,_0x28c9e3)=>{var _0x5a345b=_0xe2554d;_0x18ce0c[_0x28c9e3][_0x5a345b(0x111)]=_0x5a4fdb;}),_0x3d8998['forEach']((_0x573b19,_0x4898e6)=>{var _0x89f050=_0xe2554d;_0x18ce0c[_0x4898e6][_0x89f050(0x10b)]=_0x573b19;}),_0x30cf20[_0xe2554d(0x13c)]((_0x58162c,_0x1e7545)=>{var _0x59e6a4=_0xe2554d;_0x18ce0c[_0x1e7545][_0x59e6a4(0xdd)]=_0x58162c;}),_0x2d3e19[_0xe2554d(0x13c)]((_0x4f9fd4,_0x41c610)=>{var _0x2790bf=_0xe2554d;_0x18ce0c[_0x41c610][_0x2790bf(0x100)]=_0x4f9fd4;}),_0x2326d8[_0xe2554d(0x13c)]((_0x5d0c0f,_0x42ac94)=>{var _0x31ae31=_0xe2554d;_0x18ce0c[_0x42ac94][_0x31ae31(0xc2)]=_0x5d0c0f;}),_0x20c7fe[_0xe2554d(0x13c)]((_0x2434b0,_0x410bd7)=>{var _0x11565f=_0xe2554d;_0x18ce0c[_0x410bd7][_0x11565f(0x116)]=_0x2434b0;}),_0x401cdc[_0xe2554d(0x13c)]((_0x383cac,_0x56ef86)=>{var _0x5d82b4=_0xe2554d;_0x18ce0c[_0x56ef86][_0x5d82b4(0x102)]=_0x383cac;}),_0x3b0164[_0xe2554d(0x13c)]((_0x3b9273,_0x5f392c)=>{var _0x2bcef3=_0xe2554d;_0x18ce0c[_0x5f392c][_0x2bcef3(0x12e)]=_0x3b9273;});var _0xadddc=0x0;_0x18ce0c[_0xe2554d(0x13c)](_0x17f4b4=>{var _0x53faf4=_0xe2554d;console[_0x53faf4(0xf4)](_0x53faf4(0xd4),_0x17f4b4),(parseInt(_0x17f4b4[_0x53faf4(0x10b)])<parseInt(_0x17f4b4[_0x53faf4(0x100)])||parseInt(_0x17f4b4[_0x53faf4(0xdd)])<parseInt(_0x17f4b4[_0x53faf4(0x100)])&&parseInt(_0x17f4b4[_0x53faf4(0x10b)])>parseInt(_0x17f4b4[_0x53faf4(0x100)])||parseInt(_0x17f4b4['return_qty'])==0x0)&&_0xadddc++;});if(_0xadddc!=0x0)return _0x3536fb[_0xe2554d(0x114)](_0xe2554d(0xdf),_0xe2554d(0x11c)),_0x522400['redirect'](_0xe2554d(0xfc));_0x1e5788[_0xe2554d(0x126)][_0xe2554d(0x13c)](_0x205b8a=>{var _0x1c4ccd=_0xe2554d;const _0x606695=_0x2ade7f[_0x1c4ccd(0xf8)][_0x1c4ccd(0xfa)](_0x27cb14=>{var _0x4faafe=_0x1c4ccd;_0x27cb14[_0x4faafe(0xca)]==_0x205b8a[_0x4faafe(0xca)]&&_0x27cb14['floorlevel']==_0x205b8a['floorlevel']&&_0x27cb14[_0x4faafe(0x102)]==_0x205b8a[_0x4faafe(0x102)]&&_0x27cb14['bin']==_0x205b8a['bin']&&_0x27cb14[_0x4faafe(0xc2)]==_0x205b8a['bay']&&(_0x27cb14['product_stock']=parseInt(_0x27cb14[_0x4faafe(0xf6)])+parseInt(_0x205b8a[_0x4faafe(0x100)]));});}),console[_0xe2554d(0xf4)](_0xe2554d(0xd1),_0x2ade7f),await _0x2ade7f['save'](),_0x1e5788['invoice']=_0x59e9cf,_0x1e5788[_0xe2554d(0x112)]=_0x34c7ad,_0x1e5788[_0xe2554d(0xfd)]=_0x12f63c,_0x1e5788[_0xe2554d(0x107)]=_0xe1ab87,_0x1e5788[_0xe2554d(0x126)]=_0x18ce0c,_0x1e5788[_0xe2554d(0x135)]=_0x165fae,_0x1e5788[_0xe2554d(0xd7)]=_0x59e24c,_0x1e5788[_0xe2554d(0x132)]=_0x16d856;const _0x21c7e6=await _0x1e5788[_0xe2554d(0xc0)]();console[_0xe2554d(0xf4)](_0xe2554d(0xec),_0x21c7e6);const _0x42858a=await c_payment_data['findOne']({'invoice':_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xc1)],'reason':'Sale\x20Return'});_0x42858a[_0xe2554d(0xff)]=_0x3536fb[_0xe2554d(0x122)][_0xe2554d(0xff)],_0x42858a['date']=_0x3536fb['body']['date'],await _0x42858a[_0xe2554d(0xc0)](),_0x3536fb[_0xe2554d(0x114)](_0xe2554d(0xc4),_0xe2554d(0xd9)),_0x522400[_0xe2554d(0x117)](_0xe2554d(0xd2));}catch(_0x5c1b60){console[_0xe2554d(0xf4)](_0x5c1b60),_0x522400['status'](0xc8)[_0xe2554d(0x106)]({'message':_0x5c1b60[_0xe2554d(0x125)]});}}),router[a0_0x4e6bf8(0x121)]('/give_payment/:id',auth,async(_0x2f7088,_0x4344ed)=>{var _0x458ce2=a0_0x4e6bf8;try{const _0x4e4588=_0x2f7088[_0x458ce2(0x12a)]['id'],{invoice:_0x321560,customer:_0x235f2d,payable_to_customer:_0x3b31aa,paid_amount:_0x5d5f2c}=_0x2f7088[_0x458ce2(0x122)],_0x5f0aaa=await sales_return[_0x458ce2(0x12f)](_0x4e4588);console[_0x458ce2(0xf4)](_0x458ce2(0xe8),_0x5f0aaa),console[_0x458ce2(0xf4)](_0x3b31aa),console[_0x458ce2(0xf4)](_0x5d5f2c);var _0x11f008=_0x3b31aa-_0x5d5f2c;console[_0x458ce2(0xf4)](_0x458ce2(0xe3),_0x11f008),_0x5f0aaa[_0x458ce2(0x11a)]=parseFloat(_0x5d5f2c)+parseFloat(_0x5f0aaa[_0x458ce2(0x11a)]),_0x5f0aaa[_0x458ce2(0x118)]=_0x11f008,console['log'](_0x5f0aaa);const _0x1835b9=await _0x5f0aaa['save']();console[_0x458ce2(0xf4)](0x1b207);const _0xea2e7c=await c_payment_data['findOne']({'invoice':_0x2f7088['body'][_0x458ce2(0xc1)],'reason':_0x458ce2(0x105)});console[_0x458ce2(0xf4)](_0x458ce2(0x124),_0xea2e7c),_0xea2e7c[_0x458ce2(0x133)]=_0x11f008,await _0xea2e7c[_0x458ce2(0xc0)]();let _0x4b4255=new Date(),_0x16f551=('0'+_0x4b4255[_0x458ce2(0xe9)]())[_0x458ce2(0xce)](-0x2),_0x5663e9=('0'+(_0x4b4255[_0x458ce2(0xd0)]()+0x1))[_0x458ce2(0xce)](-0x2),_0x3941a9=_0x4b4255[_0x458ce2(0xee)](),_0x30ce2c=_0x3941a9+'-'+_0x5663e9+'-'+_0x16f551;const _0xf90034=new customer_payment({'invoice':_0x321560,'date':_0x3941a9+'-'+_0x5663e9+'-'+_0x16f551,'customer':_0x235f2d,'reason':_0x458ce2(0xe2),'amount':_0x5d5f2c}),_0x588602=await _0xf90034['save']();_0x2f7088[_0x458ce2(0x114)](_0x458ce2(0xc4),_0x458ce2(0xea)),_0x4344ed['redirect'](_0x458ce2(0xd2));}catch(_0x997a82){console[_0x458ce2(0xf4)](_0x997a82);}}),router[a0_0x4e6bf8(0x110)](a0_0x4e6bf8(0xe7),auth,async(_0x2f6b8b,_0x2543bf)=>{var _0x4bfc34=a0_0x4e6bf8;try{const {username:_0x238544,email:_0x4d7fde,role:_0x4a1eb7}=_0x2f6b8b['user'],_0x3c5f1a=_0x2f6b8b[_0x4bfc34(0xd3)],_0x40a641=await profile[_0x4bfc34(0xf1)]({'email':_0x3c5f1a[_0x4bfc34(0xcd)]}),_0xadc334=await master_shop[_0x4bfc34(0xd8)]();console[_0x4bfc34(0xf4)](_0x4bfc34(0xef),_0xadc334);const _0x3d2ff1=_0x2f6b8b[_0x4bfc34(0x12a)]['id'],_0x1059e9=await sales_return[_0x4bfc34(0x12f)](_0x3d2ff1);console['log'](_0x1059e9);const _0x5d5146=await customer[_0x4bfc34(0xf1)]({'name':_0x1059e9['customer']});console[_0x4bfc34(0xf4)](_0x5d5146);if(_0xadc334[0x0]['language']==_0x4bfc34(0x120)){var _0x4000a6=users[_0x4bfc34(0xcc)];console[_0x4bfc34(0xf4)](_0x4000a6);}else{if(_0xadc334[0x0][_0x4bfc34(0xc8)]=='Hindi')var _0x4000a6=users['Hindi'];else{if(_0xadc334[0x0][_0x4bfc34(0xc8)]==_0x4bfc34(0x123))var _0x4000a6=users[_0x4bfc34(0x123)];else{if(_0xadc334[0x0][_0x4bfc34(0xc8)]=='Spanish')var _0x4000a6=users['Spanish'];else{if(_0xadc334[0x0]['language']==_0x4bfc34(0xf3))var _0x4000a6=users[_0x4bfc34(0xf3)];else{if(_0xadc334[0x0][_0x4bfc34(0xc8)]==_0x4bfc34(0xeb))var _0x4000a6=users[_0x4bfc34(0x10f)];else{if(_0xadc334[0x0]['language']==_0x4bfc34(0x109))var _0x4000a6=users[_0x4bfc34(0x109)];else{if(_0xadc334[0x0][_0x4bfc34(0xc8)]==_0x4bfc34(0x134))var _0x4000a6=users[_0x4bfc34(0x108)];}}}}}}}_0x2543bf[_0x4bfc34(0xfb)](_0x4bfc34(0xf2),{'success':_0x2f6b8b[_0x4bfc34(0x114)](_0x4bfc34(0xc4)),'errors':_0x2f6b8b[_0x4bfc34(0x114)](_0x4bfc34(0xdf)),'role':_0x3c5f1a,'profile':_0x40a641,'master_shop':_0xadc334,'customers':_0x5d5146,'sales':_0x1059e9,'language':_0x4000a6});}catch(_0x488af9){console[_0x4bfc34(0xf4)](_0x488af9);}}),module[a0_0x4e6bf8(0xfe)]=router;