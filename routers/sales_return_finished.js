var a0_0x404c45=a0_0xa692;(function(_0x1bfcd3,_0x58376e){var _0x361f5f=a0_0xa692,_0x12dc5d=_0x1bfcd3();while(!![]){try{var _0x25cd26=parseInt(_0x361f5f(0xee))/0x1*(-parseInt(_0x361f5f(0xfa))/0x2)+parseInt(_0x361f5f(0xf6))/0x3*(-parseInt(_0x361f5f(0xc3))/0x4)+-parseInt(_0x361f5f(0xd8))/0x5*(parseInt(_0x361f5f(0x104))/0x6)+-parseInt(_0x361f5f(0x9b))/0x7*(parseInt(_0x361f5f(0xc4))/0x8)+-parseInt(_0x361f5f(0xe8))/0x9*(-parseInt(_0x361f5f(0xb0))/0xa)+parseInt(_0x361f5f(0xbc))/0xb+parseInt(_0x361f5f(0xbf))/0xc;if(_0x25cd26===_0x58376e)break;else _0x12dc5d['push'](_0x12dc5d['shift']());}catch(_0x3aca53){_0x12dc5d['push'](_0x12dc5d['shift']());}}}(a0_0x3b78,0x639d5));const express=require(a0_0x404c45(0xc6)),app=express(),router=express[a0_0x404c45(0xb4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x404c45(0xd4)),auth=require('../middleware/auth'),users=require('../public/language/languages.json');router['get'](a0_0x404c45(0x9a),auth,async(_0x22ba69,_0x3560d1)=>{var _0x275c1b=a0_0x404c45;try{const {username:_0xb9f3aa,email:_0x3af220,role:_0xa6e3e0}=_0x22ba69[_0x275c1b(0xdf)],_0x2036f4=_0x22ba69[_0x275c1b(0xdf)],_0x4cd85d=await profile[_0x275c1b(0x106)]({'email':_0x2036f4[_0x275c1b(0x105)]}),_0xe558d7=await master_shop['find'](),_0x5a09f6=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x275c1b(0xec),'localField':_0x275c1b(0x9d),'foreignField':'name','as':'customer_docs'}},{'$unwind':_0x275c1b(0x102)}]);if(_0xe558d7[0x0]['language']==_0x275c1b(0x10b)){var _0x37d1e4=users[_0x275c1b(0xa8)];console[_0x275c1b(0xfd)](_0x37d1e4);}else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]==_0x275c1b(0xaa))var _0x37d1e4=users[_0x275c1b(0xaa)];else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]=='German')var _0x37d1e4=users['German'];else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]==_0x275c1b(0xf2))var _0x37d1e4=users[_0x275c1b(0xf2)];else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]=='French')var _0x37d1e4=users[_0x275c1b(0xeb)];else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]==_0x275c1b(0x109))var _0x37d1e4=users[_0x275c1b(0xfe)];else{if(_0xe558d7[0x0][_0x275c1b(0xf9)]==_0x275c1b(0xfb))var _0x37d1e4=users[_0x275c1b(0xfb)];else{if(_0xe558d7[0x0]['language']==_0x275c1b(0xb5))var _0x37d1e4=users[_0x275c1b(0xcf)];}}}}}}}_0x3560d1[_0x275c1b(0xb1)]('sales_return_finished',{'success':_0x22ba69['flash'](_0x275c1b(0xe1)),'errors':_0x22ba69['flash'](_0x275c1b(0xd9)),'role':_0x2036f4,'profile':_0x4cd85d,'master_shop':_0xe558d7,'user':_0x5a09f6,'language':_0x37d1e4});}catch(_0x4951e1){console[_0x275c1b(0xfd)](_0x4951e1);}}),router[a0_0x404c45(0x100)](a0_0x404c45(0xa4),auth,async(_0x14fdc6,_0x41b937)=>{var _0x47cd87=a0_0x404c45;try{const {username:_0x421b0d,email:_0x4cc6f3,role:_0x34f264}=_0x14fdc6[_0x47cd87(0xdf)],_0x3c44b7=_0x14fdc6['user'],_0x85e185=await profile[_0x47cd87(0x106)]({'email':_0x3c44b7[_0x47cd87(0x105)]}),_0x35741e=await master_shop[_0x47cd87(0x10e)]();console['log'](_0x47cd87(0xf3),_0x35741e);const _0x334c1e=_0x14fdc6[_0x47cd87(0xb7)]['id'];console[_0x47cd87(0xfd)](_0x334c1e);var _0x21d994=['Return\x20Rooms'];const _0x7b5d2=await sales_return_finished[_0x47cd87(0xe0)](_0x334c1e),_0x50a57c=await warehouse[_0x47cd87(0xf5)]([{'$match':{'name':_0x7b5d2[_0x47cd87(0xcd)],'room':_0x7b5d2[_0x47cd87(0xa9)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x47cd87(0xd1),'name':{'$first':_0x47cd87(0xa5)},'product_stock':{'$first':_0x47cd87(0xdd)},'bay':{'$first':_0x47cd87(0xa1)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x47cd87(0xc8)},'floorlevel':{'$first':_0x47cd87(0xff)},'primary_code':{'$first':_0x47cd87(0x10f)},'secondary_code':{'$first':_0x47cd87(0xc1)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x47cd87(0xfc)},'rack':{'$first':_0x47cd87(0xa6)}}}]);console[_0x47cd87(0xfd)](_0x50a57c);const _0x3feef1=await warehouse[_0x47cd87(0xf5)]([{'$match':{'status':_0x47cd87(0x98),'warehouse_category':_0x47cd87(0xf4)}},{'$group':{'_id':_0x47cd87(0x10a),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x667f79=await warehouse[_0x47cd87(0xf5)]([{'$match':{'status':'Enabled','name':'QA\x20Warehouse'}},{'$group':{'_id':_0x47cd87(0x10a),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x3d6fb8=await product[_0x47cd87(0x10e)]({});if(_0x35741e[0x0][_0x47cd87(0xf9)]=='English\x20(US)'){var _0xdbcd99=users[_0x47cd87(0xa8)];console[_0x47cd87(0xfd)](_0xdbcd99);}else{if(_0x35741e[0x0][_0x47cd87(0xf9)]==_0x47cd87(0xaa))var _0xdbcd99=users[_0x47cd87(0xaa)];else{if(_0x35741e[0x0][_0x47cd87(0xf9)]==_0x47cd87(0xae))var _0xdbcd99=users[_0x47cd87(0xae)];else{if(_0x35741e[0x0]['language']==_0x47cd87(0xf2))var _0xdbcd99=users['Spanish'];else{if(_0x35741e[0x0][_0x47cd87(0xf9)]==_0x47cd87(0xeb))var _0xdbcd99=users['French'];else{if(_0x35741e[0x0][_0x47cd87(0xf9)]==_0x47cd87(0x109))var _0xdbcd99=users[_0x47cd87(0xfe)];else{if(_0x35741e[0x0]['language']=='Chinese')var _0xdbcd99=users[_0x47cd87(0xfb)];else{if(_0x35741e[0x0][_0x47cd87(0xf9)]==_0x47cd87(0xb5))var _0xdbcd99=users['Arabic'];}}}}}}}_0x41b937[_0x47cd87(0xb1)]('return_sale_edit_finished',{'success':_0x14fdc6[_0x47cd87(0xf1)](_0x47cd87(0xe1)),'errors':_0x14fdc6[_0x47cd87(0xf1)](_0x47cd87(0xd9)),'role':_0x3c44b7,'profile':_0x85e185,'master_shop':_0x35741e,'user':_0x7b5d2,'stock':_0x50a57c,'unit':_0x3d6fb8,'language':_0xdbcd99,'warehouses':_0x3feef1,'rooms':_0x21d994,'warehouse_QA':_0x667f79});}catch(_0x32479a){console['log'](_0x32479a);}}),router[a0_0x404c45(0xd5)]('/view/:id',auth,async(_0xb64795,_0x5ad1a5)=>{var _0x39639a=a0_0x404c45;if(_0xb64795[_0x39639a(0xaf)][_0x39639a(0xbb)]=='QA')try{const _0x32b29a=_0xb64795[_0x39639a(0xb7)]['id'],_0x74046d=await sales_return[_0x39639a(0x106)]({'invoice':_0xb64795[_0x39639a(0xaf)][_0x39639a(0xac)]}),_0x47c62a=await warehouse[_0x39639a(0x106)]({'name':_0x74046d[_0x39639a(0xcd)],'room':_0x74046d[_0x39639a(0xa9)]}),{invoice:_0x532750,customer:_0x1a03b3,date:_0x3d6b90,warehouse_name:_0x282590,product_name:_0x2f3c1d,primary_code:_0xbca48a,secondary_code:_0x59a456,product_code:_0x5bca4b,sales_quantity:_0xb2cf82,stocks:_0x88d4c2,return_qty:_0x2be59a,note:_0x17269a,to_warehouse_name_QA:_0x36fe35,to_Room_name_QA:_0x1865b1}=_0xb64795[_0x39639a(0xaf)];if(typeof product_name_QA==_0x39639a(0xcb))var _0x4a9c58=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0x9e)]],_0x2e94f0=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xdc)]],_0x432e88=[_0xb64795[_0x39639a(0xaf)]['secondary_code_QA']],_0x2039fb=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0x9f)]],_0x55e877=[_0xb64795[_0x39639a(0xaf)]['sales_quantity_QA']],_0x335a14=[_0xb64795[_0x39639a(0xaf)]['stocks_QA']],_0x33b6f0=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xf7)]];else var _0x4a9c58=[..._0xb64795['body']['product_name_QA']],_0x2e94f0=[..._0xb64795['body']['primary_code_QA']],_0x432e88=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xb6)]],_0x2039fb=[..._0xb64795['body'][_0x39639a(0x9f)]],_0x55e877=[..._0xb64795['body']['sales_quantity_QA']],_0x335a14=[..._0xb64795['body'][_0x39639a(0xca)]],_0x33b6f0=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xf7)]];const _0xa9151c=_0x4a9c58[_0x39639a(0xab)](_0x39726b=>{return _0x39726b={'product_name':_0x39726b};});_0x2e94f0[_0x39639a(0xa2)]((_0xb2059e,_0x5ed4f6)=>{var _0x4f3796=_0x39639a;_0xa9151c[_0x5ed4f6][_0x4f3796(0xd7)]=_0xb2059e;}),_0x432e88[_0x39639a(0xa2)]((_0x477890,_0x55b97b)=>{_0xa9151c[_0x55b97b]['secondary_code']=_0x477890;}),_0x2039fb[_0x39639a(0xa2)]((_0x2ab0bd,_0xaeb483)=>{var _0x56335e=_0x39639a;_0xa9151c[_0xaeb483][_0x56335e(0x10d)]=_0x2ab0bd;}),_0x55e877[_0x39639a(0xa2)]((_0x2b8c71,_0x5e60c5)=>{_0xa9151c[_0x5e60c5]['sale_qty']=_0x2b8c71;}),_0x335a14[_0x39639a(0xa2)]((_0x44c336,_0x3d18c)=>{var _0x21cb0b=_0x39639a;_0xa9151c[_0x3d18c][_0x21cb0b(0xe6)]=_0x44c336;}),_0x33b6f0['forEach']((_0x26ffa3,_0x1efb68)=>{var _0x503ea2=_0x39639a;_0xa9151c[_0x1efb68][_0x503ea2(0xba)]=_0x26ffa3;}),_0x74046d[_0x39639a(0x10c)][_0x39639a(0xa2)](_0x2ad105=>{var _0x32e6ee=_0x39639a;const _0x2f805c=_0x47c62a[_0x32e6ee(0xa0)]['map'](_0x22882b=>{var _0x3819d3=_0x32e6ee;_0x22882b[_0x3819d3(0xf0)]==_0x2ad105[_0x3819d3(0xf0)]&&(_0x22882b[_0x3819d3(0xb9)]=parseInt(_0x22882b['product_stock'])+parseInt(_0x2ad105['return_qty']));});}),await _0x47c62a[_0x39639a(0x9c)](),_0x74046d[_0x39639a(0xac)]=_0x532750,_0x74046d[_0x39639a(0x9d)]=_0x1a03b3,_0x74046d['date']=_0x3d6b90,_0x74046d['warehouse_name']=_0x282590,_0x74046d[_0x39639a(0x10c)]=_0xa9151c,_0x74046d[_0x39639a(0xe9)]=_0x17269a,_0x74046d[_0x39639a(0xcd)]=_0x36fe35,_0x74046d[_0x39639a(0xa9)]=_0x1865b1;const _0x55fc33=await _0x74046d[_0x39639a(0x9c)](),_0x299687=await c_payment_data[_0x39639a(0x106)]({'invoice':_0xb64795[_0x39639a(0xaf)]['invoice'],'reason':_0x39639a(0xef)});_0x299687[_0x39639a(0xe4)]=_0xb64795['body'][_0x39639a(0xe4)],_0x299687[_0x39639a(0xe7)]=_0xb64795['body']['date'],await _0x299687[_0x39639a(0x9c)](),_0xb64795['flash'](_0x39639a(0xe1),_0x39639a(0xe3)),_0x5ad1a5[_0x39639a(0x97)](_0x39639a(0x107));}catch(_0x40ab16){console[_0x39639a(0xfd)](_0x40ab16),_0x5ad1a5[_0x39639a(0x99)](0xc8)[_0x39639a(0x96)]({'message':_0x40ab16[_0x39639a(0xe5)]});}else try{const _0x23bf33=_0xb64795[_0x39639a(0xb7)]['id'];console[_0x39639a(0xfd)](_0x23bf33);const _0x24d4fe=await sales_return[_0x39639a(0x106)]({'invoice':_0xb64795['body']['invoice']});console['log'](_0x39639a(0xb8),_0x24d4fe);const _0x2f96a5=await warehouse['findOne']({'name':_0x24d4fe[_0x39639a(0xcd)],'room':_0x24d4fe[_0x39639a(0xa9)]});console['log']('old_warehouse_data',_0x2f96a5);const {invoice:_0x34297d,customer:_0x466bad,date:_0x1d353a,warehouse_name:_0x350eb7,product_name:_0x123bdf,primary_code:_0x34278e,secondary_code:_0xd7c904,product_code:_0x2effe6,sales_quantity:_0x2616f2,stocks:_0x57d61f,return_qty:_0x1ba775,note:_0x42c130,to_warehouse_name:_0x503f4e,to_Room_name:_0x319eba}=_0xb64795[_0x39639a(0xaf)];console[_0x39639a(0xfd)](_0xb64795[_0x39639a(0xaf)]);if(typeof _0x123bdf==_0x39639a(0xcb))var _0x4a9c58=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xf0)]],_0x2e94f0=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xd7)]],_0x432e88=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xc5)]],_0x2039fb=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0x10d)]],_0x55e877=[_0xb64795['body'][_0x39639a(0x101)]],_0x335a14=[_0xb64795['body'][_0x39639a(0xb2)]],_0x33b6f0=[_0xb64795['body'][_0x39639a(0xba)]],_0x5f1284=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xe2)]],_0x3f2859=[_0xb64795['body'][_0x39639a(0xc7)]],_0x5ebb13=[_0xb64795['body'][_0x39639a(0xda)]],_0x47f194=[_0xb64795[_0x39639a(0xaf)][_0x39639a(0xad)]];else var _0x4a9c58=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xf0)]],_0x2e94f0=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xd7)]],_0x432e88=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xc5)]],_0x2039fb=[..._0xb64795['body'][_0x39639a(0x10d)]],_0x55e877=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0x101)]],_0x335a14=[..._0xb64795['body'][_0x39639a(0xb2)]],_0x33b6f0=[..._0xb64795[_0x39639a(0xaf)]['return_qty']],_0x5f1284=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xe2)]],_0x3f2859=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xc7)]],_0x5ebb13=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xda)]],_0x47f194=[..._0xb64795[_0x39639a(0xaf)][_0x39639a(0xad)]];const _0x243637=_0x4a9c58[_0x39639a(0xab)](_0xcb61c8=>{return _0xcb61c8={'product_name':_0xcb61c8};});_0x2e94f0[_0x39639a(0xa2)]((_0x2233bc,_0x27b656)=>{_0x243637[_0x27b656]['primary_code']=_0x2233bc;}),_0x432e88['forEach']((_0x1ae52d,_0x237ba0)=>{var _0xd658a1=_0x39639a;_0x243637[_0x237ba0][_0xd658a1(0xc5)]=_0x1ae52d;}),_0x2039fb['forEach']((_0x1fdc2b,_0x30714f)=>{var _0x42fef1=_0x39639a;_0x243637[_0x30714f][_0x42fef1(0x10d)]=_0x1fdc2b;}),_0x55e877[_0x39639a(0xa2)]((_0x44b5ba,_0x185d51)=>{_0x243637[_0x185d51]['sale_qty']=_0x44b5ba;}),_0x335a14[_0x39639a(0xa2)]((_0x4b3bd5,_0x12b286)=>{var _0x1c5c17=_0x39639a;_0x243637[_0x12b286][_0x1c5c17(0xe6)]=_0x4b3bd5;}),_0x33b6f0['forEach']((_0x104f56,_0xb244b2)=>{var _0x5413f9=_0x39639a;_0x243637[_0xb244b2][_0x5413f9(0xba)]=_0x104f56;}),_0x5f1284[_0x39639a(0xa2)]((_0x153997,_0x212a92)=>{var _0x17c220=_0x39639a;_0x243637[_0x212a92][_0x17c220(0xe2)]=_0x153997;}),_0x3f2859['forEach']((_0x7db9cf,_0x1799aa)=>{var _0x44ae6d=_0x39639a;_0x243637[_0x1799aa][_0x44ae6d(0xc7)]=_0x7db9cf;}),_0x5ebb13[_0x39639a(0xa2)]((_0x866c0c,_0x1351fb)=>{var _0x55c4ec=_0x39639a;_0x243637[_0x1351fb][_0x55c4ec(0xce)]=_0x866c0c;}),_0x47f194[_0x39639a(0xa2)]((_0x5eb74d,_0x3cd333)=>{var _0x15aaca=_0x39639a;_0x243637[_0x3cd333][_0x15aaca(0xad)]=_0x5eb74d;});var _0x42d760=0x0;_0x243637['forEach'](_0x4cf92e=>{var _0x6c09d6=_0x39639a;console['log'](_0x6c09d6(0xcc),_0x4cf92e),(parseInt(_0x4cf92e[_0x6c09d6(0xb3)])<parseInt(_0x4cf92e[_0x6c09d6(0xba)])||parseInt(_0x4cf92e['stock'])<parseInt(_0x4cf92e[_0x6c09d6(0xba)])&&parseInt(_0x4cf92e[_0x6c09d6(0xb3)])>parseInt(_0x4cf92e[_0x6c09d6(0xba)])||parseInt(_0x4cf92e[_0x6c09d6(0xba)])==0x0)&&_0x42d760++;});if(_0x42d760!=0x0)return _0xb64795[_0x39639a(0xf1)](_0x39639a(0xd9),_0x39639a(0xbe)),_0x5ad1a5[_0x39639a(0x97)](_0x39639a(0x108));_0x24d4fe['return_sale'][_0x39639a(0xa2)](_0x4fd8ac=>{var _0x3dd1f5=_0x39639a;const _0x2c9c7f=_0x2f96a5[_0x3dd1f5(0xa0)][_0x3dd1f5(0xab)](_0x2a6750=>{var _0xc646aa=_0x3dd1f5;_0x2a6750[_0xc646aa(0xf0)]==_0x4fd8ac[_0xc646aa(0xf0)]&&_0x2a6750[_0xc646aa(0xad)]==_0x4fd8ac[_0xc646aa(0xad)]&&_0x2a6750[_0xc646aa(0xce)]==_0x4fd8ac['type']&&_0x2a6750[_0xc646aa(0xc7)]==_0x4fd8ac[_0xc646aa(0xc7)]&&_0x2a6750[_0xc646aa(0xe2)]==_0x4fd8ac[_0xc646aa(0xe2)]&&(_0x2a6750['product_stock']=parseInt(_0x2a6750['product_stock'])+parseInt(_0x4fd8ac['return_qty']));});}),console[_0x39639a(0xfd)](_0x39639a(0xa3),_0x2f96a5),await _0x2f96a5[_0x39639a(0x9c)](),_0x24d4fe['invoice']=_0x34297d,_0x24d4fe[_0x39639a(0x9d)]=_0x466bad,_0x24d4fe[_0x39639a(0xe7)]=_0x1d353a,_0x24d4fe[_0x39639a(0xed)]=_0x350eb7,_0x24d4fe[_0x39639a(0xd0)]=_0x243637,_0x24d4fe[_0x39639a(0xe9)]=_0x42c130,_0x24d4fe[_0x39639a(0xcd)]=_0x503f4e,_0x24d4fe[_0x39639a(0xa9)]=_0x319eba;const _0x442989=await _0x24d4fe[_0x39639a(0x9c)]();console[_0x39639a(0xfd)]('new\x20new_data',_0x442989);const _0x45e119=await c_payment_data['findOne']({'invoice':_0xb64795[_0x39639a(0xaf)][_0x39639a(0xac)],'reason':_0x39639a(0xef)});_0x45e119[_0x39639a(0xe4)]=_0xb64795[_0x39639a(0xaf)][_0x39639a(0xe4)],_0x45e119[_0x39639a(0xe7)]=_0xb64795[_0x39639a(0xaf)]['date'],await _0x45e119[_0x39639a(0x9c)](),_0xb64795[_0x39639a(0xf1)](_0x39639a(0xe1),_0x39639a(0xe3)),_0x5ad1a5[_0x39639a(0x97)](_0x39639a(0xa7));}catch(_0x5a84a8){console[_0x39639a(0xfd)](_0x5a84a8),_0x5ad1a5['status'](0xc8)[_0x39639a(0x96)]({'message':_0x5a84a8[_0x39639a(0xe5)]});}}),router[a0_0x404c45(0xd5)](a0_0x404c45(0xc2),auth,async(_0x5b773a,_0x2628ca)=>{var _0x24d7ed=a0_0x404c45;try{const _0x447c49=_0x5b773a[_0x24d7ed(0xb7)]['id'],{invoice:_0xc5add5,customer:_0x4829af,payable_to_customer:_0xc45827,paid_amount:_0xd0a3a1}=_0x5b773a[_0x24d7ed(0xaf)],_0x432da9=await sales_return['findById'](_0x447c49);console[_0x24d7ed(0xfd)]('data',_0x432da9),console['log'](_0xc45827),console[_0x24d7ed(0xfd)](_0xd0a3a1);var _0x508dce=_0xc45827-_0xd0a3a1;console[_0x24d7ed(0xfd)](_0x24d7ed(0xd6),_0x508dce),_0x432da9[_0x24d7ed(0xd3)]=parseFloat(_0xd0a3a1)+parseFloat(_0x432da9['paid_amount']),_0x432da9[_0x24d7ed(0xc9)]=_0x508dce,console['log'](_0x432da9);const _0x1dcfce=await _0x432da9[_0x24d7ed(0x9c)]();console['log'](0x1b207);const _0x27bf20=await c_payment_data[_0x24d7ed(0x106)]({'invoice':_0x5b773a[_0x24d7ed(0xaf)]['invoice'],'reason':_0x24d7ed(0xef)});console['log']('c_payment',_0x27bf20),_0x27bf20[_0x24d7ed(0xde)]=_0x508dce,await _0x27bf20['save']();let _0x57632e=new Date(),_0x42c05b=('0'+_0x57632e['getDate']())[_0x24d7ed(0xf8)](-0x2),_0x2b5ffa=('0'+(_0x57632e[_0x24d7ed(0xd2)]()+0x1))['slice'](-0x2),_0x46d915=_0x57632e[_0x24d7ed(0xdb)](),_0x1c45d4=_0x46d915+'-'+_0x2b5ffa+'-'+_0x42c05b;const _0x335dc3=new customer_payment({'invoice':_0xc5add5,'date':_0x46d915+'-'+_0x2b5ffa+'-'+_0x42c05b,'customer':_0x4829af,'reason':_0x24d7ed(0xea),'amount':_0xd0a3a1}),_0x5e0c9b=await _0x335dc3[_0x24d7ed(0x9c)]();_0x5b773a[_0x24d7ed(0xf1)](_0x24d7ed(0xe1),_0x24d7ed(0x103)),_0x2628ca[_0x24d7ed(0x97)](_0x24d7ed(0xa7));}catch(_0x5691aa){console[_0x24d7ed(0xfd)](_0x5691aa);}}),router['get'](a0_0x404c45(0xbd),auth,async(_0x364909,_0x2ecdb4)=>{var _0x458be1=a0_0x404c45;try{const {username:_0x381aa4,email:_0x6ed3d6,role:_0x5b434d}=_0x364909[_0x458be1(0xdf)],_0x320657=_0x364909['user'],_0x10fab3=await profile[_0x458be1(0x106)]({'email':_0x320657[_0x458be1(0x105)]}),_0x5b57c0=await master_shop['find']();console[_0x458be1(0xfd)](_0x458be1(0xf3),_0x5b57c0);const _0x458eb9=_0x364909[_0x458be1(0xb7)]['id'],_0xc67ece=await sales_return['findById'](_0x458eb9);console[_0x458be1(0xfd)](_0xc67ece);const _0x15974c=await customer['findOne']({'name':_0xc67ece[_0x458be1(0x9d)]});console[_0x458be1(0xfd)](_0x15974c);if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0x10b)){var _0x29f43=users['English'];console[_0x458be1(0xfd)](_0x29f43);}else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xaa))var _0x29f43=users['Hindi'];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xae))var _0x29f43=users[_0x458be1(0xae)];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xf2))var _0x29f43=users[_0x458be1(0xf2)];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xeb))var _0x29f43=users[_0x458be1(0xeb)];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0x109))var _0x29f43=users[_0x458be1(0xfe)];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xfb))var _0x29f43=users[_0x458be1(0xfb)];else{if(_0x5b57c0[0x0][_0x458be1(0xf9)]==_0x458be1(0xb5))var _0x29f43=users['Arabic'];}}}}}}}_0x2ecdb4[_0x458be1(0xb1)](_0x458be1(0xc0),{'success':_0x364909[_0x458be1(0xf1)](_0x458be1(0xe1)),'errors':_0x364909['flash'](_0x458be1(0xd9)),'role':_0x320657,'profile':_0x10fab3,'master_shop':_0x5b57c0,'customers':_0x15974c,'sales':_0xc67ece,'language':_0x29f43});}catch(_0x43940d){console['log'](_0x43940d);}}),module['exports']=router;function a0_0xa692(_0x3f6e6a,_0x22a917){var _0x3b7834=a0_0x3b78();return a0_0xa692=function(_0xa692a9,_0x590774){_0xa692a9=_0xa692a9-0x96;var _0x529ddd=_0x3b7834[_0xa692a9];return _0x529ddd;},a0_0xa692(_0x3f6e6a,_0x22a917);}function a0_0x3b78(){var _0x29142b=['bay','purchase\x20return\x20successfully','suppliers','message','stock','date','171WGBvHJ','note','Returned\x20Payment\x20For\x20Sale\x20Return','French','customers','warehouse_name','24946oOJjcl','Sale\x20Return','product_name','flash','Spanish','master','Finished\x20Goods','aggregate','69txOOmv','return_qty_QA','slice','language','14jQJfYd','Chinese','$product_details.storage','log','Portuguese','$product_details.floorlevel','get','sales_quantity','$customer_docs','payment\x20successfull','6RhiwRV','email','findOne','/sales_return_finished/view','back','Portuguese\x20(BR)','$name','English\x20(US)','return_sale_QA','product_code','find','$product_details.primary_code','json','redirect','Enabled','status','/view','5523OCQIDY','save','customer','product_name_QA','product_code_QA','product_details','$product_details.bay','forEach','old_warehouse_data','/view/:id','$product_details.product_name','$product_details.rack','/sales_return/view','English','ToRoom','Hindi','map','invoice','floorlevel','German','body','225620qbHINP','render','stocks','sale_qty','Router','Arabic\x20(ae)','secondary_code_QA','params','old_data','product_stock','return_qty','for_categorize','7754648tYUmRX','/invoice/:id','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','8167908tikitZ','sales_return_invoice','$product_details.secondary_code','/give_payment/:id','128012GepkPz','1032GWaufr','secondary_code','express','bin','$product_details.type','due_amount','stocks_QA','string','foreach\x20newproduct','ToWarehouse','type','Arabic','return_sale','$product_details._id','getMonth','paid_amount','../models/all_models','post','subtract','primary_code','1969060JSAnVf','errors','types','getFullYear','primary_code_QA','$product_details.product_stock','amount','user','findById','success'];a0_0x3b78=function(){return _0x29142b;};return a0_0x3b78();}