function a0_0x2913(_0x3c5d51,_0x2e5c0d){var _0x2d21ad=a0_0x2d21();return a0_0x2913=function(_0x29139e,_0x2411dc){_0x29139e=_0x29139e-0x144;var _0x86479f=_0x2d21ad[_0x29139e];return _0x86479f;},a0_0x2913(_0x3c5d51,_0x2e5c0d);}var a0_0x2218a8=a0_0x2913;(function(_0x2a6bac,_0x1787db){var _0x4a7cfc=a0_0x2913,_0x4f7788=_0x2a6bac();while(!![]){try{var _0xd94838=-parseInt(_0x4a7cfc(0x199))/0x1+-parseInt(_0x4a7cfc(0x16a))/0x2*(parseInt(_0x4a7cfc(0x174))/0x3)+-parseInt(_0x4a7cfc(0x168))/0x4+parseInt(_0x4a7cfc(0x196))/0x5*(-parseInt(_0x4a7cfc(0x17c))/0x6)+parseInt(_0x4a7cfc(0x1c0))/0x7*(-parseInt(_0x4a7cfc(0x19b))/0x8)+parseInt(_0x4a7cfc(0x14a))/0x9+-parseInt(_0x4a7cfc(0x16e))/0xa*(-parseInt(_0x4a7cfc(0x1ba))/0xb);if(_0xd94838===_0x1787db)break;else _0x4f7788['push'](_0x4f7788['shift']());}catch(_0x54afd9){_0x4f7788['push'](_0x4f7788['shift']());}}}(a0_0x2d21,0xe4bd3));const express=require(a0_0x2218a8(0x19a)),app=express(),router=express[a0_0x2218a8(0x188)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x2218a8(0x16f)),auth=require('../middleware/auth'),users=require(a0_0x2218a8(0x154));function a0_0x2d21(){var _0x56fd0a=['redirect','product_code','stock','data','11juhbIb','stocks','secondary_code','errors','secondary_code_QA','status','48643GZDSqA','return_qty_QA','ToRoom','/invoice/:id','/view','/sales_return/view','return_qty','message','12964896MXqdVJ','$product_details.bay','return_sale_QA','forEach','post','sales_quantity','language','c_payment','German','find','../public/language/languages.json','Portuguese\x20(BR)','Hindi','/view/:id','ToWarehouse','params','aggregate','return_sale','save','return_sale_edit_finished','primary_code','sales_return_invoice','$product_details.bin','Arabic','foreach\x20newproduct','paid_amount','bay','note','stocks_QA','Arabic\x20(ae)','7127536dbJoOr','log','2FEjbAw','name','product_name_QA','master','38638330DsxGfL','../models/all_models','old_warehouse_data','warehouse_name','findById','user','1671882jqFfcW','body','$product_details.product_code','findOne','slice','floorlevel','getDate','map','6qrPyJk','Enabled','$product_details.floorlevel','sale_qty','$customer_docs','French','types','string','new\x20new_data','$product_details.secondary_code','product_code_QA','purchase\x20return\x20successfully','Router','/sales_return_finished/view','success','back','customer','$product_details.type','Portuguese','$product_details.primary_code','amount','$name','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','date','$product_details.rack','getFullYear','8000290UZInrJ','$product_details.product_name','sales_return_finished','414328zNbySG','express','16XKgpDV','old_data','suppliers','$product_details.storage','email','QA\x20Warehouse','customers','product_details','English','product_name','/give_payment/:id','Sale\x20Return','Chinese','render','json','due_amount','type','for_categorize','English\x20(US)','bin','product_stock','Spanish','invoice','primary_code_QA','Finished\x20Goods','flash','get'];a0_0x2d21=function(){return _0x56fd0a;};return a0_0x2d21();}router[a0_0x2218a8(0x1b5)](a0_0x2218a8(0x146),auth,async(_0x4e3fdb,_0x451bc3)=>{var _0x55385c=a0_0x2218a8;try{const {username:_0x3520ca,email:_0xf6dbb3,role:_0x2aecb4}=_0x4e3fdb[_0x55385c(0x173)],_0x12a054=_0x4e3fdb[_0x55385c(0x173)],_0x2682f0=await profile[_0x55385c(0x177)]({'email':_0x12a054[_0x55385c(0x19f)]}),_0x2fc511=await master_shop[_0x55385c(0x153)](),_0x375dfa=await sales_return_finished[_0x55385c(0x15a)]([{'$lookup':{'from':_0x55385c(0x1a1),'localField':_0x55385c(0x18c),'foreignField':_0x55385c(0x16b),'as':'customer_docs'}},{'$unwind':_0x55385c(0x180)}]);if(_0x2fc511[0x0][_0x55385c(0x150)]=='English\x20(US)'){var _0x32e5d2=users[_0x55385c(0x1a3)];console[_0x55385c(0x169)](_0x32e5d2);}else{if(_0x2fc511[0x0]['language']==_0x55385c(0x156))var _0x32e5d2=users['Hindi'];else{if(_0x2fc511[0x0][_0x55385c(0x150)]==_0x55385c(0x152))var _0x32e5d2=users['German'];else{if(_0x2fc511[0x0]['language']==_0x55385c(0x1b0))var _0x32e5d2=users[_0x55385c(0x1b0)];else{if(_0x2fc511[0x0][_0x55385c(0x150)]==_0x55385c(0x181))var _0x32e5d2=users[_0x55385c(0x181)];else{if(_0x2fc511[0x0][_0x55385c(0x150)]=='Portuguese\x20(BR)')var _0x32e5d2=users[_0x55385c(0x18e)];else{if(_0x2fc511[0x0][_0x55385c(0x150)]==_0x55385c(0x1a7))var _0x32e5d2=users['Chinese'];else{if(_0x2fc511[0x0][_0x55385c(0x150)]==_0x55385c(0x167))var _0x32e5d2=users['Arabic'];}}}}}}}_0x451bc3[_0x55385c(0x1a8)](_0x55385c(0x198),{'success':_0x4e3fdb[_0x55385c(0x1b4)](_0x55385c(0x18a)),'errors':_0x4e3fdb['flash']('errors'),'role':_0x12a054,'profile':_0x2682f0,'master_shop':_0x2fc511,'user':_0x375dfa,'language':_0x32e5d2});}catch(_0x12a6e7){console[_0x55385c(0x169)](_0x12a6e7);}}),router[a0_0x2218a8(0x1b5)]('/view/:id',auth,async(_0x122aa4,_0x54cd46)=>{var _0x5f139a=a0_0x2218a8;try{const {username:_0x55de8a,email:_0x1380d5,role:_0x55d04b}=_0x122aa4[_0x5f139a(0x173)],_0x57eb48=_0x122aa4[_0x5f139a(0x173)],_0x276540=await profile[_0x5f139a(0x177)]({'email':_0x57eb48[_0x5f139a(0x19f)]}),_0x4b7161=await master_shop[_0x5f139a(0x153)]();console[_0x5f139a(0x169)](_0x5f139a(0x16d),_0x4b7161);const _0x34f4f6=_0x122aa4['params']['id'];console[_0x5f139a(0x169)](_0x34f4f6);var _0x44d65b=['Return\x20Rooms'];const _0x5a10cc=await sales_return_finished[_0x5f139a(0x172)](_0x34f4f6),_0x3311c3=await warehouse['aggregate']([{'$match':{'name':_0x5a10cc[_0x5f139a(0x158)],'room':_0x5a10cc[_0x5f139a(0x144)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5f139a(0x197)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x5f139a(0x14b)},'bin':{'$first':_0x5f139a(0x160)},'type':{'$first':_0x5f139a(0x18d)},'floorlevel':{'$first':_0x5f139a(0x17e)},'primary_code':{'$first':_0x5f139a(0x18f)},'secondary_code':{'$first':_0x5f139a(0x185)},'product_code':{'$first':_0x5f139a(0x176)},'storage':{'$first':_0x5f139a(0x19e)},'rack':{'$first':_0x5f139a(0x194)}}}]);console[_0x5f139a(0x169)](_0x3311c3);const _0x243ee7=await warehouse[_0x5f139a(0x15a)]([{'$match':{'status':_0x5f139a(0x17d),'warehouse_category':_0x5f139a(0x1b3)}},{'$group':{'_id':'$name','name':{'$first':_0x5f139a(0x191)}}},{'$sort':{'name':0x1}}]),_0x1532d8=await warehouse[_0x5f139a(0x15a)]([{'$match':{'status':_0x5f139a(0x17d),'name':_0x5f139a(0x1a0)}},{'$group':{'_id':_0x5f139a(0x191),'name':{'$first':_0x5f139a(0x191)}}},{'$sort':{'name':0x1}}]),_0x3972ca=await product['find']({});if(_0x4b7161[0x0]['language']==_0x5f139a(0x1ad)){var _0x1ac8b1=users[_0x5f139a(0x1a3)];console[_0x5f139a(0x169)](_0x1ac8b1);}else{if(_0x4b7161[0x0][_0x5f139a(0x150)]==_0x5f139a(0x156))var _0x1ac8b1=users[_0x5f139a(0x156)];else{if(_0x4b7161[0x0]['language']=='German')var _0x1ac8b1=users[_0x5f139a(0x152)];else{if(_0x4b7161[0x0][_0x5f139a(0x150)]=='Spanish')var _0x1ac8b1=users['Spanish'];else{if(_0x4b7161[0x0][_0x5f139a(0x150)]==_0x5f139a(0x181))var _0x1ac8b1=users['French'];else{if(_0x4b7161[0x0][_0x5f139a(0x150)]==_0x5f139a(0x155))var _0x1ac8b1=users[_0x5f139a(0x18e)];else{if(_0x4b7161[0x0][_0x5f139a(0x150)]==_0x5f139a(0x1a7))var _0x1ac8b1=users[_0x5f139a(0x1a7)];else{if(_0x4b7161[0x0][_0x5f139a(0x150)]=='Arabic\x20(ae)')var _0x1ac8b1=users[_0x5f139a(0x161)];}}}}}}}_0x54cd46[_0x5f139a(0x1a8)](_0x5f139a(0x15d),{'success':_0x122aa4[_0x5f139a(0x1b4)](_0x5f139a(0x18a)),'errors':_0x122aa4[_0x5f139a(0x1b4)](_0x5f139a(0x1bd)),'role':_0x57eb48,'profile':_0x276540,'master_shop':_0x4b7161,'user':_0x5a10cc,'stock':_0x3311c3,'unit':_0x3972ca,'language':_0x1ac8b1,'warehouses':_0x243ee7,'rooms':_0x44d65b,'warehouse_QA':_0x1532d8});}catch(_0x4a3e92){console[_0x5f139a(0x169)](_0x4a3e92);}}),router[a0_0x2218a8(0x14e)](a0_0x2218a8(0x157),auth,async(_0xa217c1,_0x194a38)=>{var _0x5ecfea=a0_0x2218a8;if(_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1ac)]=='QA')try{const _0x509102=_0xa217c1[_0x5ecfea(0x159)]['id'],_0x5a18dd=await sales_return[_0x5ecfea(0x177)]({'invoice':_0xa217c1['body'][_0x5ecfea(0x1b1)]}),_0x55a3ab=await warehouse[_0x5ecfea(0x177)]({'name':_0x5a18dd[_0x5ecfea(0x158)],'room':_0x5a18dd['ToRoom']}),{invoice:_0x1c0e25,customer:_0x446b4e,date:_0x352dd7,warehouse_name:_0x2a642f,product_name:_0x28ee2e,primary_code:_0x4310b3,secondary_code:_0xfa5a82,product_code:_0x1c43ba,sales_quantity:_0x3eb650,stocks:_0x57bf4e,return_qty:_0x432df0,note:_0x35a8c5,to_warehouse_name_QA:_0x527d99,to_Room_name_QA:_0x4f9792}=_0xa217c1[_0x5ecfea(0x175)];if(typeof product_name_QA==_0x5ecfea(0x183))var _0x226dfa=[_0xa217c1[_0x5ecfea(0x175)]['product_name_QA']],_0x14d761=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1b2)]],_0x1fc73b=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1be)]],_0x5aee1f=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x186)]],_0x178e0a=[_0xa217c1['body']['sales_quantity_QA']],_0x2a323a=[_0xa217c1['body'][_0x5ecfea(0x166)]],_0x10b88e=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1c1)]];else var _0x226dfa=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x16c)]],_0x14d761=[..._0xa217c1[_0x5ecfea(0x175)]['primary_code_QA']],_0x1fc73b=[..._0xa217c1[_0x5ecfea(0x175)]['secondary_code_QA']],_0x5aee1f=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x186)]],_0x178e0a=[..._0xa217c1[_0x5ecfea(0x175)]['sales_quantity_QA']],_0x2a323a=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x166)]],_0x10b88e=[..._0xa217c1['body']['return_qty_QA']];const _0x4a156e=_0x226dfa[_0x5ecfea(0x17b)](_0x3476da=>{return _0x3476da={'product_name':_0x3476da};});_0x14d761[_0x5ecfea(0x14d)]((_0xa27797,_0x57314d)=>{var _0x1f6f96=_0x5ecfea;_0x4a156e[_0x57314d][_0x1f6f96(0x15e)]=_0xa27797;}),_0x1fc73b[_0x5ecfea(0x14d)]((_0x4fbbab,_0x20876d)=>{var _0x580aa2=_0x5ecfea;_0x4a156e[_0x20876d][_0x580aa2(0x1bc)]=_0x4fbbab;}),_0x5aee1f[_0x5ecfea(0x14d)]((_0x989226,_0x3d10ca)=>{var _0x7bb74f=_0x5ecfea;_0x4a156e[_0x3d10ca][_0x7bb74f(0x1b7)]=_0x989226;}),_0x178e0a[_0x5ecfea(0x14d)]((_0x535c02,_0x105dc4)=>{var _0x8a90ba=_0x5ecfea;_0x4a156e[_0x105dc4][_0x8a90ba(0x17f)]=_0x535c02;}),_0x2a323a[_0x5ecfea(0x14d)]((_0x5c5588,_0x49c912)=>{var _0x41ec57=_0x5ecfea;_0x4a156e[_0x49c912][_0x41ec57(0x1b8)]=_0x5c5588;}),_0x10b88e[_0x5ecfea(0x14d)]((_0x51d54d,_0x4ab1a5)=>{var _0x1bbe95=_0x5ecfea;_0x4a156e[_0x4ab1a5][_0x1bbe95(0x148)]=_0x51d54d;}),_0x5a18dd[_0x5ecfea(0x14c)][_0x5ecfea(0x14d)](_0x4cc12c=>{const _0x16d97a=_0x55a3ab['product_details']['map'](_0x4f1e29=>{var _0xba7bb5=a0_0x2913;_0x4f1e29[_0xba7bb5(0x1a4)]==_0x4cc12c['product_name']&&(_0x4f1e29[_0xba7bb5(0x1af)]=parseInt(_0x4f1e29[_0xba7bb5(0x1af)])+parseInt(_0x4cc12c[_0xba7bb5(0x148)]));});}),await _0x55a3ab[_0x5ecfea(0x15c)](),_0x5a18dd['invoice']=_0x1c0e25,_0x5a18dd[_0x5ecfea(0x18c)]=_0x446b4e,_0x5a18dd[_0x5ecfea(0x193)]=_0x352dd7,_0x5a18dd[_0x5ecfea(0x171)]=_0x2a642f,_0x5a18dd[_0x5ecfea(0x14c)]=_0x4a156e,_0x5a18dd[_0x5ecfea(0x165)]=_0x35a8c5,_0x5a18dd['ToWarehouse']=_0x527d99,_0x5a18dd[_0x5ecfea(0x144)]=_0x4f9792;const _0x36a0b7=await _0x5a18dd[_0x5ecfea(0x15c)](),_0x3ad9b2=await c_payment_data[_0x5ecfea(0x177)]({'invoice':_0xa217c1['body'][_0x5ecfea(0x1b1)],'reason':_0x5ecfea(0x1a6)});_0x3ad9b2['suppliers']=_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x19d)],_0x3ad9b2[_0x5ecfea(0x193)]=_0xa217c1[_0x5ecfea(0x175)]['date'],await _0x3ad9b2['save'](),_0xa217c1[_0x5ecfea(0x1b4)](_0x5ecfea(0x18a),_0x5ecfea(0x187)),_0x194a38[_0x5ecfea(0x1b6)](_0x5ecfea(0x189));}catch(_0x5a1e23){console[_0x5ecfea(0x169)](_0x5a1e23),_0x194a38[_0x5ecfea(0x1bf)](0xc8)[_0x5ecfea(0x1a9)]({'message':_0x5a1e23[_0x5ecfea(0x149)]});}else try{const _0x443c76=_0xa217c1[_0x5ecfea(0x159)]['id'];console[_0x5ecfea(0x169)](_0x443c76);const _0x3b60ca=await sales_return[_0x5ecfea(0x177)]({'invoice':_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1b1)]});console[_0x5ecfea(0x169)](_0x5ecfea(0x19c),_0x3b60ca);const _0x18a5e5=await warehouse['findOne']({'name':_0x3b60ca['ToWarehouse'],'room':_0x3b60ca[_0x5ecfea(0x144)]});console[_0x5ecfea(0x169)](_0x5ecfea(0x170),_0x18a5e5);const {invoice:_0x3fb3b4,customer:_0x184159,date:_0x150a2d,warehouse_name:_0x2bfbff,product_name:_0x3200fb,primary_code:_0x2060b1,secondary_code:_0x54e2f4,product_code:_0x4337c6,sales_quantity:_0x418cc7,stocks:_0x4e20a5,return_qty:_0x568178,note:_0x35dae5,to_warehouse_name:_0x5725ca,to_Room_name:_0x1409bc}=_0xa217c1['body'];console[_0x5ecfea(0x169)](_0xa217c1['body']);if(typeof _0x3200fb==_0x5ecfea(0x183))var _0x226dfa=[_0xa217c1['body'][_0x5ecfea(0x1a4)]],_0x14d761=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x15e)]],_0x1fc73b=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1bc)]],_0x5aee1f=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1b7)]],_0x178e0a=[_0xa217c1['body']['sales_quantity']],_0x2a323a=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1bb)]],_0x10b88e=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x148)]],_0x5dd181=[_0xa217c1[_0x5ecfea(0x175)]['bay']],_0x6e7882=[_0xa217c1[_0x5ecfea(0x175)]['bin']],_0x4841bd=[_0xa217c1['body']['types']],_0x5178e5=[_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x179)]];else var _0x226dfa=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1a4)]],_0x14d761=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x15e)]],_0x1fc73b=[..._0xa217c1[_0x5ecfea(0x175)]['secondary_code']],_0x5aee1f=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1b7)]],_0x178e0a=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x14f)]],_0x2a323a=[..._0xa217c1['body'][_0x5ecfea(0x1bb)]],_0x10b88e=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x148)]],_0x5dd181=[..._0xa217c1[_0x5ecfea(0x175)]['bay']],_0x6e7882=[..._0xa217c1['body'][_0x5ecfea(0x1ae)]],_0x4841bd=[..._0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x182)]],_0x5178e5=[..._0xa217c1[_0x5ecfea(0x175)]['floorlevel']];const _0x5ca35c=_0x226dfa[_0x5ecfea(0x17b)](_0x218457=>{return _0x218457={'product_name':_0x218457};});_0x14d761[_0x5ecfea(0x14d)]((_0x165518,_0x316f09)=>{_0x5ca35c[_0x316f09]['primary_code']=_0x165518;}),_0x1fc73b[_0x5ecfea(0x14d)]((_0x57bff7,_0x4dec07)=>{var _0x1d15a6=_0x5ecfea;_0x5ca35c[_0x4dec07][_0x1d15a6(0x1bc)]=_0x57bff7;}),_0x5aee1f['forEach']((_0x3f9b42,_0x2dfee6)=>{_0x5ca35c[_0x2dfee6]['product_code']=_0x3f9b42;}),_0x178e0a[_0x5ecfea(0x14d)]((_0x858435,_0x329ad8)=>{var _0x278da8=_0x5ecfea;_0x5ca35c[_0x329ad8][_0x278da8(0x17f)]=_0x858435;}),_0x2a323a[_0x5ecfea(0x14d)]((_0x41c2eb,_0x339b55)=>{var _0x2b1f6a=_0x5ecfea;_0x5ca35c[_0x339b55][_0x2b1f6a(0x1b8)]=_0x41c2eb;}),_0x10b88e[_0x5ecfea(0x14d)]((_0x303e38,_0x1d7e78)=>{var _0x1a70b8=_0x5ecfea;_0x5ca35c[_0x1d7e78][_0x1a70b8(0x148)]=_0x303e38;}),_0x5dd181[_0x5ecfea(0x14d)]((_0x48ed56,_0x3321fe)=>{var _0x90ec8d=_0x5ecfea;_0x5ca35c[_0x3321fe][_0x90ec8d(0x164)]=_0x48ed56;}),_0x6e7882[_0x5ecfea(0x14d)]((_0x292ad2,_0x21e958)=>{var _0x545a19=_0x5ecfea;_0x5ca35c[_0x21e958][_0x545a19(0x1ae)]=_0x292ad2;}),_0x4841bd[_0x5ecfea(0x14d)]((_0x2cf0fe,_0xe42a80)=>{var _0x308628=_0x5ecfea;_0x5ca35c[_0xe42a80][_0x308628(0x1ab)]=_0x2cf0fe;}),_0x5178e5[_0x5ecfea(0x14d)]((_0x4a1f47,_0x2dfe96)=>{var _0x3c3d85=_0x5ecfea;_0x5ca35c[_0x2dfe96][_0x3c3d85(0x179)]=_0x4a1f47;});var _0x33ee4b=0x0;_0x5ca35c[_0x5ecfea(0x14d)](_0x3b39d2=>{var _0x126f63=_0x5ecfea;console['log'](_0x126f63(0x162),_0x3b39d2),(parseInt(_0x3b39d2[_0x126f63(0x17f)])<parseInt(_0x3b39d2[_0x126f63(0x148)])||parseInt(_0x3b39d2[_0x126f63(0x1b8)])<parseInt(_0x3b39d2[_0x126f63(0x148)])&&parseInt(_0x3b39d2[_0x126f63(0x17f)])>parseInt(_0x3b39d2[_0x126f63(0x148)])||parseInt(_0x3b39d2[_0x126f63(0x148)])==0x0)&&_0x33ee4b++;});if(_0x33ee4b!=0x0)return _0xa217c1['flash'](_0x5ecfea(0x1bd),_0x5ecfea(0x192)),_0x194a38['redirect'](_0x5ecfea(0x18b));_0x3b60ca[_0x5ecfea(0x15b)][_0x5ecfea(0x14d)](_0xb0efa3=>{var _0xf2edd=_0x5ecfea;const _0x3c7018=_0x18a5e5[_0xf2edd(0x1a2)][_0xf2edd(0x17b)](_0x4fcd71=>{var _0x2bd853=_0xf2edd;_0x4fcd71[_0x2bd853(0x1a4)]==_0xb0efa3[_0x2bd853(0x1a4)]&&_0x4fcd71[_0x2bd853(0x179)]==_0xb0efa3['floorlevel']&&_0x4fcd71[_0x2bd853(0x1ab)]==_0xb0efa3[_0x2bd853(0x1ab)]&&_0x4fcd71[_0x2bd853(0x1ae)]==_0xb0efa3['bin']&&_0x4fcd71[_0x2bd853(0x164)]==_0xb0efa3[_0x2bd853(0x164)]&&(_0x4fcd71['product_stock']=parseInt(_0x4fcd71[_0x2bd853(0x1af)])+parseInt(_0xb0efa3[_0x2bd853(0x148)]));});}),console[_0x5ecfea(0x169)]('old_warehouse_data',_0x18a5e5),await _0x18a5e5['save'](),_0x3b60ca[_0x5ecfea(0x1b1)]=_0x3fb3b4,_0x3b60ca[_0x5ecfea(0x18c)]=_0x184159,_0x3b60ca[_0x5ecfea(0x193)]=_0x150a2d,_0x3b60ca[_0x5ecfea(0x171)]=_0x2bfbff,_0x3b60ca[_0x5ecfea(0x15b)]=_0x5ca35c,_0x3b60ca['note']=_0x35dae5,_0x3b60ca[_0x5ecfea(0x158)]=_0x5725ca,_0x3b60ca[_0x5ecfea(0x144)]=_0x1409bc;const _0x440df6=await _0x3b60ca[_0x5ecfea(0x15c)]();console[_0x5ecfea(0x169)](_0x5ecfea(0x184),_0x440df6);const _0x356115=await c_payment_data[_0x5ecfea(0x177)]({'invoice':_0xa217c1[_0x5ecfea(0x175)][_0x5ecfea(0x1b1)],'reason':_0x5ecfea(0x1a6)});_0x356115[_0x5ecfea(0x19d)]=_0xa217c1['body'][_0x5ecfea(0x19d)],_0x356115['date']=_0xa217c1['body'][_0x5ecfea(0x193)],await _0x356115[_0x5ecfea(0x15c)](),_0xa217c1['flash'](_0x5ecfea(0x18a),_0x5ecfea(0x187)),_0x194a38[_0x5ecfea(0x1b6)]('/sales_return/view');}catch(_0x5cad65){console['log'](_0x5cad65),_0x194a38[_0x5ecfea(0x1bf)](0xc8)[_0x5ecfea(0x1a9)]({'message':_0x5cad65[_0x5ecfea(0x149)]});}}),router[a0_0x2218a8(0x14e)](a0_0x2218a8(0x1a5),auth,async(_0x1d9b65,_0x43b4a7)=>{var _0x403618=a0_0x2218a8;try{const _0x3ca6e7=_0x1d9b65[_0x403618(0x159)]['id'],{invoice:_0x47b3b9,customer:_0x54006b,payable_to_customer:_0x1f7a1d,paid_amount:_0x14e97}=_0x1d9b65['body'],_0x53194a=await sales_return['findById'](_0x3ca6e7);console['log'](_0x403618(0x1b9),_0x53194a),console[_0x403618(0x169)](_0x1f7a1d),console[_0x403618(0x169)](_0x14e97);var _0x192417=_0x1f7a1d-_0x14e97;console[_0x403618(0x169)]('subtract',_0x192417),_0x53194a[_0x403618(0x163)]=parseFloat(_0x14e97)+parseFloat(_0x53194a[_0x403618(0x163)]),_0x53194a[_0x403618(0x1aa)]=_0x192417,console['log'](_0x53194a);const _0x27f603=await _0x53194a[_0x403618(0x15c)]();console[_0x403618(0x169)](0x1b207);const _0x54ea14=await c_payment_data[_0x403618(0x177)]({'invoice':_0x1d9b65[_0x403618(0x175)][_0x403618(0x1b1)],'reason':_0x403618(0x1a6)});console[_0x403618(0x169)](_0x403618(0x151),_0x54ea14),_0x54ea14[_0x403618(0x190)]=_0x192417,await _0x54ea14[_0x403618(0x15c)]();let _0xb41000=new Date(),_0x4fc9a2=('0'+_0xb41000[_0x403618(0x17a)]())['slice'](-0x2),_0x5a6f4f=('0'+(_0xb41000['getMonth']()+0x1))[_0x403618(0x178)](-0x2),_0x152be9=_0xb41000[_0x403618(0x195)](),_0x4d526f=_0x152be9+'-'+_0x5a6f4f+'-'+_0x4fc9a2;const _0x4ce9e5=new customer_payment({'invoice':_0x47b3b9,'date':_0x152be9+'-'+_0x5a6f4f+'-'+_0x4fc9a2,'customer':_0x54006b,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x14e97}),_0x4d6a88=await _0x4ce9e5[_0x403618(0x15c)]();_0x1d9b65[_0x403618(0x1b4)]('success','payment\x20successfull'),_0x43b4a7[_0x403618(0x1b6)](_0x403618(0x147));}catch(_0x565874){console['log'](_0x565874);}}),router[a0_0x2218a8(0x1b5)](a0_0x2218a8(0x145),auth,async(_0x4ef1c2,_0x404a19)=>{var _0x16fa1a=a0_0x2218a8;try{const {username:_0xf3ed65,email:_0x1e1421,role:_0x5f4238}=_0x4ef1c2[_0x16fa1a(0x173)],_0x3a7d42=_0x4ef1c2['user'],_0x5ea696=await profile[_0x16fa1a(0x177)]({'email':_0x3a7d42['email']}),_0x455fab=await master_shop[_0x16fa1a(0x153)]();console[_0x16fa1a(0x169)](_0x16fa1a(0x16d),_0x455fab);const _0x1bd674=_0x4ef1c2['params']['id'],_0x2b044e=await sales_return[_0x16fa1a(0x172)](_0x1bd674);console['log'](_0x2b044e);const _0x51be66=await customer[_0x16fa1a(0x177)]({'name':_0x2b044e[_0x16fa1a(0x18c)]});console[_0x16fa1a(0x169)](_0x51be66);if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x1ad)){var _0x1854e4=users[_0x16fa1a(0x1a3)];console[_0x16fa1a(0x169)](_0x1854e4);}else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x156))var _0x1854e4=users[_0x16fa1a(0x156)];else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x152))var _0x1854e4=users[_0x16fa1a(0x152)];else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x1b0))var _0x1854e4=users[_0x16fa1a(0x1b0)];else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x181))var _0x1854e4=users[_0x16fa1a(0x181)];else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x155))var _0x1854e4=users[_0x16fa1a(0x18e)];else{if(_0x455fab[0x0]['language']==_0x16fa1a(0x1a7))var _0x1854e4=users[_0x16fa1a(0x1a7)];else{if(_0x455fab[0x0][_0x16fa1a(0x150)]==_0x16fa1a(0x167))var _0x1854e4=users[_0x16fa1a(0x161)];}}}}}}}_0x404a19[_0x16fa1a(0x1a8)](_0x16fa1a(0x15f),{'success':_0x4ef1c2[_0x16fa1a(0x1b4)](_0x16fa1a(0x18a)),'errors':_0x4ef1c2['flash'](_0x16fa1a(0x1bd)),'role':_0x3a7d42,'profile':_0x5ea696,'master_shop':_0x455fab,'customers':_0x51be66,'sales':_0x2b044e,'language':_0x1854e4});}catch(_0x21c6f3){console[_0x16fa1a(0x169)](_0x21c6f3);}}),module['exports']=router;