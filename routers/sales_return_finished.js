function a0_0x5d34(){var _0x19038d=['type','Finished\x20Goods','product_code_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','old_data','warehouse_name','user','c_payment','master','product_name_QA','save','secondary_code_QA','$product_details.bin','return_sale_edit_finished','exports','get','findOne','/view','return_qty_QA','types','status','$product_details._id','foreach\x20newproduct','Enabled','sales_quantity','paid_amount','149365bqnmZm','../middleware/auth','Spanish','return_sale_QA','customers','1013760LMtVyM','ToWarehouse','$product_details.storage','$product_details.bay','due_amount','Hindi','bin','purchase\x20return\x20successfully','flash','Returned\x20Payment\x20For\x20Sale\x20Return','Arabic\x20(ae)','Router','email','stock','slice','Sale\x20Return','/sales_return/view','QA\x20Warehouse','sale_qty','$product_details','return_qty','message','find','product_stock','data','render','/give_payment/:id','params','findById','/sales_return_finished/view','stocks','name','Portuguese','product_code','payment\x20successfull','German','language','bay','json','$product_details.rack','customer','body','../public/language/languages.json','map','errors','/view/:id','9XJemrg','product_name','invoice','primary_code','log','4502435sucrWN','../models/all_models','return_sale','ToRoom','52MOmQue','string','Portuguese\x20(BR)','11771424keZXcb','1fMBtuD','post','$customer_docs','$product_details.secondary_code','/invoice/:id','Arabic','new\x20new_data','$product_details.product_stock','secondary_code','English\x20(US)','1650375gFInig','amount','Chinese','$product_details.product_name','aggregate','42604TsfcyA','12ASmTwt','floorlevel','forEach','customer_docs','primary_code_QA','$product_details.type','French','suppliers','product_details','redirect','2282870xiHfDo','stocks_QA','back','note','express','$name','sales_quantity_QA','date','success','old_warehouse_data','English'];a0_0x5d34=function(){return _0x19038d;};return a0_0x5d34();}function a0_0x18e6(_0x275b42,_0x5e2be1){var _0x5d34cf=a0_0x5d34();return a0_0x18e6=function(_0x18e6da,_0x2a91fd){_0x18e6da=_0x18e6da-0x94;var _0x59a96d=_0x5d34cf[_0x18e6da];return _0x59a96d;},a0_0x18e6(_0x275b42,_0x5e2be1);}var a0_0x180ce5=a0_0x18e6;(function(_0x93dc1a,_0x10644a){var _0x5b1b13=a0_0x18e6,_0xd3259a=_0x93dc1a();while(!![]){try{var _0x2423a9=-parseInt(_0x5b1b13(0xb9))/0x1*(parseInt(_0x5b1b13(0xc8))/0x2)+parseInt(_0x5b1b13(0xc3))/0x3+parseInt(_0x5b1b13(0xb5))/0x4*(parseInt(_0x5b1b13(0xf8))/0x5)+-parseInt(_0x5b1b13(0xc9))/0x6*(parseInt(_0x5b1b13(0xb1))/0x7)+parseInt(_0x5b1b13(0xb8))/0x8+parseInt(_0x5b1b13(0xac))/0x9*(-parseInt(_0x5b1b13(0xd3))/0xa)+-parseInt(_0x5b1b13(0xfd))/0xb;if(_0x2423a9===_0x10644a)break;else _0xd3259a['push'](_0xd3259a['shift']());}catch(_0x145e95){_0xd3259a['push'](_0xd3259a['shift']());}}}(a0_0x5d34,0xbedaf));const express=require(a0_0x180ce5(0xd7)),app=express(),router=express[a0_0x180ce5(0x108)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x180ce5(0xb2)),auth=require(a0_0x180ce5(0xf9)),users=require(a0_0x180ce5(0xa8));router['get'](a0_0x180ce5(0xef),auth,async(_0x21e300,_0x253372)=>{var _0x3c337a=a0_0x180ce5;try{const {username:_0x392013,email:_0x23d5f4,role:_0x544876}=_0x21e300[_0x3c337a(0xe4)],_0x496c46=_0x21e300[_0x3c337a(0xe4)],_0x2770c7=await profile[_0x3c337a(0xee)]({'email':_0x496c46[_0x3c337a(0x109)]}),_0x37f721=await master_shop['find'](),_0x295aa2=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x3c337a(0xfc),'localField':'customer','foreignField':_0x3c337a(0x9d),'as':_0x3c337a(0xcc)}},{'$unwind':_0x3c337a(0xbb)}]);if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0xc2)){var _0x3073c4=users['English'];console['log'](_0x3073c4);}else{if(_0x37f721[0x0]['language']=='Hindi')var _0x3073c4=users[_0x3c337a(0x102)];else{if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0xa1))var _0x3073c4=users[_0x3c337a(0xa1)];else{if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0xfa))var _0x3073c4=users['Spanish'];else{if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0xcf))var _0x3073c4=users[_0x3c337a(0xcf)];else{if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0xb7))var _0x3073c4=users[_0x3c337a(0x9e)];else{if(_0x37f721[0x0]['language']==_0x3c337a(0xc5))var _0x3073c4=users[_0x3c337a(0xc5)];else{if(_0x37f721[0x0][_0x3c337a(0xa2)]==_0x3c337a(0x107))var _0x3073c4=users[_0x3c337a(0xbe)];}}}}}}}_0x253372[_0x3c337a(0x97)]('sales_return_finished',{'success':_0x21e300[_0x3c337a(0x105)]('success'),'errors':_0x21e300['flash'](_0x3c337a(0xaa)),'role':_0x496c46,'profile':_0x2770c7,'master_shop':_0x37f721,'user':_0x295aa2,'language':_0x3073c4});}catch(_0x2172d2){console[_0x3c337a(0xb0)](_0x2172d2);}}),router[a0_0x180ce5(0xed)](a0_0x180ce5(0xab),auth,async(_0xce68b6,_0xc22024)=>{var _0x122b2d=a0_0x180ce5;try{const {username:_0x543086,email:_0x4111ba,role:_0x82f6bd}=_0xce68b6[_0x122b2d(0xe4)],_0x2e2c01=_0xce68b6[_0x122b2d(0xe4)],_0x3bdbc2=await profile['findOne']({'email':_0x2e2c01['email']}),_0x1720d9=await master_shop['find']();console[_0x122b2d(0xb0)](_0x122b2d(0xe6),_0x1720d9);const _0x47d01a=_0xce68b6[_0x122b2d(0x99)]['id'];console[_0x122b2d(0xb0)](_0x47d01a);var _0x284538=['Return\x20Rooms'];const _0x82230b=await sales_return_finished[_0x122b2d(0x9a)](_0x47d01a),_0xc18d4=await warehouse[_0x122b2d(0xc7)]([{'$match':{'name':_0x82230b[_0x122b2d(0xfe)],'room':_0x82230b[_0x122b2d(0xb4)]}},{'$unwind':_0x122b2d(0x110)},{'$group':{'_id':_0x122b2d(0xf3),'name':{'$first':_0x122b2d(0xc6)},'product_stock':{'$first':_0x122b2d(0xc0)},'bay':{'$first':_0x122b2d(0x100)},'bin':{'$first':_0x122b2d(0xea)},'type':{'$first':_0x122b2d(0xce)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x122b2d(0xbc)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x122b2d(0xff)},'rack':{'$first':_0x122b2d(0xa5)}}}]);console[_0x122b2d(0xb0)](_0xc18d4);const _0x4cfab9=await warehouse[_0x122b2d(0xc7)]([{'$match':{'status':_0x122b2d(0xf5),'warehouse_category':_0x122b2d(0xdf)}},{'$group':{'_id':_0x122b2d(0xd8),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x18b16c=await warehouse[_0x122b2d(0xc7)]([{'$match':{'status':'Enabled','name':_0x122b2d(0x10e)}},{'$group':{'_id':_0x122b2d(0xd8),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x4203cf=await product[_0x122b2d(0x94)]({});if(_0x1720d9[0x0][_0x122b2d(0xa2)]==_0x122b2d(0xc2)){var _0x2930dd=users[_0x122b2d(0xdd)];console[_0x122b2d(0xb0)](_0x2930dd);}else{if(_0x1720d9[0x0]['language']==_0x122b2d(0x102))var _0x2930dd=users[_0x122b2d(0x102)];else{if(_0x1720d9[0x0]['language']==_0x122b2d(0xa1))var _0x2930dd=users['German'];else{if(_0x1720d9[0x0][_0x122b2d(0xa2)]=='Spanish')var _0x2930dd=users[_0x122b2d(0xfa)];else{if(_0x1720d9[0x0][_0x122b2d(0xa2)]=='French')var _0x2930dd=users['French'];else{if(_0x1720d9[0x0]['language']==_0x122b2d(0xb7))var _0x2930dd=users['Portuguese'];else{if(_0x1720d9[0x0][_0x122b2d(0xa2)]=='Chinese')var _0x2930dd=users[_0x122b2d(0xc5)];else{if(_0x1720d9[0x0][_0x122b2d(0xa2)]==_0x122b2d(0x107))var _0x2930dd=users[_0x122b2d(0xbe)];}}}}}}}_0xc22024[_0x122b2d(0x97)](_0x122b2d(0xeb),{'success':_0xce68b6[_0x122b2d(0x105)](_0x122b2d(0xdb)),'errors':_0xce68b6[_0x122b2d(0x105)](_0x122b2d(0xaa)),'role':_0x2e2c01,'profile':_0x3bdbc2,'master_shop':_0x1720d9,'user':_0x82230b,'stock':_0xc18d4,'unit':_0x4203cf,'language':_0x2930dd,'warehouses':_0x4cfab9,'rooms':_0x284538,'warehouse_QA':_0x18b16c});}catch(_0x3f52db){console[_0x122b2d(0xb0)](_0x3f52db);}}),router[a0_0x180ce5(0xba)](a0_0x180ce5(0xab),auth,async(_0x100778,_0x40292b)=>{var _0x578969=a0_0x180ce5;if(_0x100778[_0x578969(0xa7)]['for_categorize']=='QA')try{const _0x29e7f7=_0x100778[_0x578969(0x99)]['id'],_0x469a2f=await sales_return[_0x578969(0xee)]({'invoice':_0x100778[_0x578969(0xa7)][_0x578969(0xae)]}),_0x3f55d4=await warehouse[_0x578969(0xee)]({'name':_0x469a2f[_0x578969(0xfe)],'room':_0x469a2f[_0x578969(0xb4)]}),{invoice:_0xe3a4f8,customer:_0x2a95af,date:_0x5014cf,warehouse_name:_0xfbe33d,product_name:_0x25fb88,primary_code:_0x23e679,secondary_code:_0x3c754d,product_code:_0x2aa6da,sales_quantity:_0x2f055a,stocks:_0x35412a,return_qty:_0x1a6834,note:_0x29158a,to_warehouse_name_QA:_0xce83ad,to_Room_name_QA:_0x190718}=_0x100778[_0x578969(0xa7)];if(typeof product_name_QA=='string')var _0x3c36da=[_0x100778[_0x578969(0xa7)][_0x578969(0xe7)]],_0x456e06=[_0x100778['body'][_0x578969(0xcd)]],_0x4eb070=[_0x100778[_0x578969(0xa7)]['secondary_code_QA']],_0x423c9f=[_0x100778['body'][_0x578969(0xe0)]],_0x17e581=[_0x100778[_0x578969(0xa7)][_0x578969(0xd9)]],_0x2b7700=[_0x100778['body'][_0x578969(0xd4)]],_0x5314fc=[_0x100778[_0x578969(0xa7)][_0x578969(0xf0)]];else var _0x3c36da=[..._0x100778[_0x578969(0xa7)][_0x578969(0xe7)]],_0x456e06=[..._0x100778[_0x578969(0xa7)][_0x578969(0xcd)]],_0x4eb070=[..._0x100778[_0x578969(0xa7)][_0x578969(0xe9)]],_0x423c9f=[..._0x100778['body'][_0x578969(0xe0)]],_0x17e581=[..._0x100778[_0x578969(0xa7)][_0x578969(0xd9)]],_0x2b7700=[..._0x100778[_0x578969(0xa7)]['stocks_QA']],_0x5314fc=[..._0x100778[_0x578969(0xa7)][_0x578969(0xf0)]];const _0x44dc74=_0x3c36da[_0x578969(0xa9)](_0x483bef=>{return _0x483bef={'product_name':_0x483bef};});_0x456e06['forEach']((_0x57d7f7,_0x418048)=>{var _0x2f82ec=_0x578969;_0x44dc74[_0x418048][_0x2f82ec(0xaf)]=_0x57d7f7;}),_0x4eb070[_0x578969(0xcb)]((_0x12e63a,_0x1c440e)=>{var _0x40ee92=_0x578969;_0x44dc74[_0x1c440e][_0x40ee92(0xc1)]=_0x12e63a;}),_0x423c9f['forEach']((_0x414e01,_0x3304c4)=>{var _0x4a27fa=_0x578969;_0x44dc74[_0x3304c4][_0x4a27fa(0x9f)]=_0x414e01;}),_0x17e581[_0x578969(0xcb)]((_0x1d2e1d,_0x370365)=>{var _0x2dbe33=_0x578969;_0x44dc74[_0x370365][_0x2dbe33(0x10f)]=_0x1d2e1d;}),_0x2b7700[_0x578969(0xcb)]((_0x5c8c27,_0x4bf058)=>{var _0x8237e5=_0x578969;_0x44dc74[_0x4bf058][_0x8237e5(0x10a)]=_0x5c8c27;}),_0x5314fc[_0x578969(0xcb)]((_0x5d6be2,_0x57ed67)=>{var _0x3e7327=_0x578969;_0x44dc74[_0x57ed67][_0x3e7327(0x111)]=_0x5d6be2;}),_0x469a2f[_0x578969(0xfb)]['forEach'](_0x243ba5=>{var _0x52ccf5=_0x578969;const _0x3f0a37=_0x3f55d4[_0x52ccf5(0xd1)]['map'](_0x552daa=>{var _0x459fb4=_0x52ccf5;_0x552daa[_0x459fb4(0xad)]==_0x243ba5['product_name']&&(_0x552daa[_0x459fb4(0x95)]=parseInt(_0x552daa[_0x459fb4(0x95)])+parseInt(_0x243ba5[_0x459fb4(0x111)]));});}),await _0x3f55d4[_0x578969(0xe8)](),_0x469a2f[_0x578969(0xae)]=_0xe3a4f8,_0x469a2f[_0x578969(0xa6)]=_0x2a95af,_0x469a2f[_0x578969(0xda)]=_0x5014cf,_0x469a2f[_0x578969(0xe3)]=_0xfbe33d,_0x469a2f[_0x578969(0xfb)]=_0x44dc74,_0x469a2f[_0x578969(0xd6)]=_0x29158a,_0x469a2f['ToWarehouse']=_0xce83ad,_0x469a2f['ToRoom']=_0x190718;const _0x34439a=await _0x469a2f['save'](),_0x3ac54a=await c_payment_data[_0x578969(0xee)]({'invoice':_0x100778[_0x578969(0xa7)]['invoice'],'reason':'Sale\x20Return'});_0x3ac54a[_0x578969(0xd0)]=_0x100778[_0x578969(0xa7)][_0x578969(0xd0)],_0x3ac54a['date']=_0x100778['body']['date'],await _0x3ac54a[_0x578969(0xe8)](),_0x100778[_0x578969(0x105)]('success',_0x578969(0x104)),_0x40292b[_0x578969(0xd2)](_0x578969(0x9b));}catch(_0x114730){console[_0x578969(0xb0)](_0x114730),_0x40292b['status'](0xc8)[_0x578969(0xa4)]({'message':_0x114730[_0x578969(0x112)]});}else try{const _0x2c78fc=_0x100778[_0x578969(0x99)]['id'];console[_0x578969(0xb0)](_0x2c78fc);const _0xdbaf35=await sales_return['findOne']({'invoice':_0x100778[_0x578969(0xa7)][_0x578969(0xae)]});console[_0x578969(0xb0)](_0x578969(0xe2),_0xdbaf35);const _0x5889a3=await warehouse[_0x578969(0xee)]({'name':_0xdbaf35[_0x578969(0xfe)],'room':_0xdbaf35[_0x578969(0xb4)]});console[_0x578969(0xb0)](_0x578969(0xdc),_0x5889a3);const {invoice:_0x23f05e,customer:_0x5c8084,date:_0x1e36ee,warehouse_name:_0x2ecf82,product_name:_0x3241a1,primary_code:_0x2fe430,secondary_code:_0x156514,product_code:_0x1d4357,sales_quantity:_0x4bf412,stocks:_0x44823a,return_qty:_0x3a6de4,note:_0xeba678,to_warehouse_name:_0xc21307,to_Room_name:_0x48d596}=_0x100778[_0x578969(0xa7)];console[_0x578969(0xb0)](_0x100778['body']);if(typeof _0x3241a1==_0x578969(0xb6))var _0x3c36da=[_0x100778[_0x578969(0xa7)][_0x578969(0xad)]],_0x456e06=[_0x100778[_0x578969(0xa7)]['primary_code']],_0x4eb070=[_0x100778[_0x578969(0xa7)][_0x578969(0xc1)]],_0x423c9f=[_0x100778[_0x578969(0xa7)][_0x578969(0x9f)]],_0x17e581=[_0x100778[_0x578969(0xa7)][_0x578969(0xf6)]],_0x2b7700=[_0x100778[_0x578969(0xa7)][_0x578969(0x9c)]],_0x5314fc=[_0x100778[_0x578969(0xa7)][_0x578969(0x111)]],_0x1db60e=[_0x100778[_0x578969(0xa7)]['bay']],_0xef17e2=[_0x100778[_0x578969(0xa7)][_0x578969(0x103)]],_0x4b28d2=[_0x100778[_0x578969(0xa7)]['types']],_0x591207=[_0x100778[_0x578969(0xa7)]['floorlevel']];else var _0x3c36da=[..._0x100778[_0x578969(0xa7)][_0x578969(0xad)]],_0x456e06=[..._0x100778[_0x578969(0xa7)][_0x578969(0xaf)]],_0x4eb070=[..._0x100778[_0x578969(0xa7)][_0x578969(0xc1)]],_0x423c9f=[..._0x100778[_0x578969(0xa7)][_0x578969(0x9f)]],_0x17e581=[..._0x100778[_0x578969(0xa7)][_0x578969(0xf6)]],_0x2b7700=[..._0x100778[_0x578969(0xa7)][_0x578969(0x9c)]],_0x5314fc=[..._0x100778[_0x578969(0xa7)][_0x578969(0x111)]],_0x1db60e=[..._0x100778[_0x578969(0xa7)][_0x578969(0xa3)]],_0xef17e2=[..._0x100778['body']['bin']],_0x4b28d2=[..._0x100778[_0x578969(0xa7)][_0x578969(0xf1)]],_0x591207=[..._0x100778['body'][_0x578969(0xca)]];const _0x342ea6=_0x3c36da[_0x578969(0xa9)](_0x2430c6=>{return _0x2430c6={'product_name':_0x2430c6};});_0x456e06[_0x578969(0xcb)]((_0x4d97f4,_0x7fba6f)=>{_0x342ea6[_0x7fba6f]['primary_code']=_0x4d97f4;}),_0x4eb070[_0x578969(0xcb)]((_0x574c94,_0x3c4d73)=>{_0x342ea6[_0x3c4d73]['secondary_code']=_0x574c94;}),_0x423c9f[_0x578969(0xcb)]((_0x5ba310,_0x24963e)=>{var _0x3224ec=_0x578969;_0x342ea6[_0x24963e][_0x3224ec(0x9f)]=_0x5ba310;}),_0x17e581[_0x578969(0xcb)]((_0x51b512,_0x440ff3)=>{_0x342ea6[_0x440ff3]['sale_qty']=_0x51b512;}),_0x2b7700[_0x578969(0xcb)]((_0x868397,_0x23a26e)=>{_0x342ea6[_0x23a26e]['stock']=_0x868397;}),_0x5314fc[_0x578969(0xcb)]((_0x1d9eb0,_0x4411ea)=>{var _0x33cd00=_0x578969;_0x342ea6[_0x4411ea][_0x33cd00(0x111)]=_0x1d9eb0;}),_0x1db60e[_0x578969(0xcb)]((_0x24da1e,_0x5b0bc6)=>{var _0x403ff8=_0x578969;_0x342ea6[_0x5b0bc6][_0x403ff8(0xa3)]=_0x24da1e;}),_0xef17e2[_0x578969(0xcb)]((_0x28cbee,_0x3f851d)=>{var _0x26451f=_0x578969;_0x342ea6[_0x3f851d][_0x26451f(0x103)]=_0x28cbee;}),_0x4b28d2[_0x578969(0xcb)]((_0x923948,_0x3d96f4)=>{var _0x1b9f11=_0x578969;_0x342ea6[_0x3d96f4][_0x1b9f11(0xde)]=_0x923948;}),_0x591207[_0x578969(0xcb)]((_0x5f1412,_0x46806e)=>{_0x342ea6[_0x46806e]['floorlevel']=_0x5f1412;});var _0x13d6b5=0x0;_0x342ea6[_0x578969(0xcb)](_0x460dc3=>{var _0x377c1a=_0x578969;console[_0x377c1a(0xb0)](_0x377c1a(0xf4),_0x460dc3),(parseInt(_0x460dc3[_0x377c1a(0x10f)])<parseInt(_0x460dc3[_0x377c1a(0x111)])||parseInt(_0x460dc3[_0x377c1a(0x10a)])<parseInt(_0x460dc3[_0x377c1a(0x111)])&&parseInt(_0x460dc3[_0x377c1a(0x10f)])>parseInt(_0x460dc3['return_qty'])||parseInt(_0x460dc3[_0x377c1a(0x111)])==0x0)&&_0x13d6b5++;});if(_0x13d6b5!=0x0)return _0x100778[_0x578969(0x105)](_0x578969(0xaa),_0x578969(0xe1)),_0x40292b[_0x578969(0xd2)](_0x578969(0xd5));_0xdbaf35['return_sale'][_0x578969(0xcb)](_0x4593b3=>{var _0x5182f6=_0x578969;const _0x5aec20=_0x5889a3[_0x5182f6(0xd1)][_0x5182f6(0xa9)](_0x23461b=>{var _0x285d1c=_0x5182f6;_0x23461b[_0x285d1c(0xad)]==_0x4593b3[_0x285d1c(0xad)]&&_0x23461b[_0x285d1c(0xca)]==_0x4593b3[_0x285d1c(0xca)]&&_0x23461b[_0x285d1c(0xde)]==_0x4593b3['type']&&_0x23461b['bin']==_0x4593b3[_0x285d1c(0x103)]&&_0x23461b[_0x285d1c(0xa3)]==_0x4593b3['bay']&&(_0x23461b['product_stock']=parseInt(_0x23461b[_0x285d1c(0x95)])+parseInt(_0x4593b3[_0x285d1c(0x111)]));});}),console[_0x578969(0xb0)](_0x578969(0xdc),_0x5889a3),await _0x5889a3[_0x578969(0xe8)](),_0xdbaf35[_0x578969(0xae)]=_0x23f05e,_0xdbaf35[_0x578969(0xa6)]=_0x5c8084,_0xdbaf35[_0x578969(0xda)]=_0x1e36ee,_0xdbaf35[_0x578969(0xe3)]=_0x2ecf82,_0xdbaf35[_0x578969(0xb3)]=_0x342ea6,_0xdbaf35['note']=_0xeba678,_0xdbaf35[_0x578969(0xfe)]=_0xc21307,_0xdbaf35['ToRoom']=_0x48d596;const _0x3d777c=await _0xdbaf35[_0x578969(0xe8)]();console[_0x578969(0xb0)](_0x578969(0xbf),_0x3d777c);const _0x345096=await c_payment_data['findOne']({'invoice':_0x100778[_0x578969(0xa7)][_0x578969(0xae)],'reason':_0x578969(0x10c)});_0x345096[_0x578969(0xd0)]=_0x100778[_0x578969(0xa7)][_0x578969(0xd0)],_0x345096[_0x578969(0xda)]=_0x100778[_0x578969(0xa7)][_0x578969(0xda)],await _0x345096['save'](),_0x100778[_0x578969(0x105)]('success','purchase\x20return\x20successfully'),_0x40292b[_0x578969(0xd2)](_0x578969(0x10d));}catch(_0x173023){console[_0x578969(0xb0)](_0x173023),_0x40292b[_0x578969(0xf2)](0xc8)[_0x578969(0xa4)]({'message':_0x173023[_0x578969(0x112)]});}}),router[a0_0x180ce5(0xba)](a0_0x180ce5(0x98),auth,async(_0x2ff957,_0x5f5d71)=>{var _0x4a80f7=a0_0x180ce5;try{const _0x77f5ef=_0x2ff957[_0x4a80f7(0x99)]['id'],{invoice:_0x2d9a70,customer:_0x206590,payable_to_customer:_0x10a742,paid_amount:_0x19e019}=_0x2ff957[_0x4a80f7(0xa7)],_0x53fe96=await sales_return[_0x4a80f7(0x9a)](_0x77f5ef);console[_0x4a80f7(0xb0)](_0x4a80f7(0x96),_0x53fe96),console[_0x4a80f7(0xb0)](_0x10a742),console['log'](_0x19e019);var _0x1aa75e=_0x10a742-_0x19e019;console[_0x4a80f7(0xb0)]('subtract',_0x1aa75e),_0x53fe96[_0x4a80f7(0xf7)]=parseFloat(_0x19e019)+parseFloat(_0x53fe96[_0x4a80f7(0xf7)]),_0x53fe96[_0x4a80f7(0x101)]=_0x1aa75e,console['log'](_0x53fe96);const _0x3b6ba2=await _0x53fe96['save']();console[_0x4a80f7(0xb0)](0x1b207);const _0x503bb3=await c_payment_data['findOne']({'invoice':_0x2ff957['body'][_0x4a80f7(0xae)],'reason':'Sale\x20Return'});console[_0x4a80f7(0xb0)](_0x4a80f7(0xe5),_0x503bb3),_0x503bb3[_0x4a80f7(0xc4)]=_0x1aa75e,await _0x503bb3[_0x4a80f7(0xe8)]();let _0x1c7670=new Date(),_0x49a5b0=('0'+_0x1c7670['getDate']())[_0x4a80f7(0x10b)](-0x2),_0x1da2bb=('0'+(_0x1c7670['getMonth']()+0x1))['slice'](-0x2),_0x25a456=_0x1c7670['getFullYear'](),_0x18591f=_0x25a456+'-'+_0x1da2bb+'-'+_0x49a5b0;const _0x501e5e=new customer_payment({'invoice':_0x2d9a70,'date':_0x25a456+'-'+_0x1da2bb+'-'+_0x49a5b0,'customer':_0x206590,'reason':_0x4a80f7(0x106),'amount':_0x19e019}),_0x1907aa=await _0x501e5e[_0x4a80f7(0xe8)]();_0x2ff957[_0x4a80f7(0x105)](_0x4a80f7(0xdb),_0x4a80f7(0xa0)),_0x5f5d71[_0x4a80f7(0xd2)](_0x4a80f7(0x10d));}catch(_0x4a477c){console[_0x4a80f7(0xb0)](_0x4a477c);}}),router[a0_0x180ce5(0xed)](a0_0x180ce5(0xbd),auth,async(_0x441ada,_0x5286c3)=>{var _0x5b4bdd=a0_0x180ce5;try{const {username:_0x1db156,email:_0x55d729,role:_0x3da36b}=_0x441ada[_0x5b4bdd(0xe4)],_0x325453=_0x441ada['user'],_0x1abd8b=await profile[_0x5b4bdd(0xee)]({'email':_0x325453['email']}),_0x492ce0=await master_shop[_0x5b4bdd(0x94)]();console['log'](_0x5b4bdd(0xe6),_0x492ce0);const _0x973954=_0x441ada[_0x5b4bdd(0x99)]['id'],_0x17430f=await sales_return[_0x5b4bdd(0x9a)](_0x973954);console[_0x5b4bdd(0xb0)](_0x17430f);const _0x417007=await customer['findOne']({'name':_0x17430f[_0x5b4bdd(0xa6)]});console[_0x5b4bdd(0xb0)](_0x417007);if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xc2)){var _0x45c81e=users[_0x5b4bdd(0xdd)];console[_0x5b4bdd(0xb0)](_0x45c81e);}else{if(_0x492ce0[0x0]['language']==_0x5b4bdd(0x102))var _0x45c81e=users[_0x5b4bdd(0x102)];else{if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xa1))var _0x45c81e=users['German'];else{if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xfa))var _0x45c81e=users[_0x5b4bdd(0xfa)];else{if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xcf))var _0x45c81e=users[_0x5b4bdd(0xcf)];else{if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xb7))var _0x45c81e=users['Portuguese'];else{if(_0x492ce0[0x0][_0x5b4bdd(0xa2)]==_0x5b4bdd(0xc5))var _0x45c81e=users['Chinese'];else{if(_0x492ce0[0x0]['language']=='Arabic\x20(ae)')var _0x45c81e=users[_0x5b4bdd(0xbe)];}}}}}}}_0x5286c3['render']('sales_return_invoice',{'success':_0x441ada[_0x5b4bdd(0x105)](_0x5b4bdd(0xdb)),'errors':_0x441ada[_0x5b4bdd(0x105)](_0x5b4bdd(0xaa)),'role':_0x325453,'profile':_0x1abd8b,'master_shop':_0x492ce0,'customers':_0x417007,'sales':_0x17430f,'language':_0x45c81e});}catch(_0x56bd95){console[_0x5b4bdd(0xb0)](_0x56bd95);}}),module[a0_0x180ce5(0xec)]=router;