var a0_0x135f7a=a0_0x3299;function a0_0x3299(_0x3a4cbe,_0xf9687d){var _0x13d475=a0_0x13d4();return a0_0x3299=function(_0x329941,_0x10f425){_0x329941=_0x329941-0x1e8;var _0x39a28f=_0x13d475[_0x329941];return _0x39a28f;},a0_0x3299(_0x3a4cbe,_0xf9687d);}function a0_0x13d4(){var _0x2c8fa0=['stock','old_data','return_qty_QA','date','name','findById','Router','errors','846688mHNppV','body','master','$product_details.product_code','save','English\x20(US)','/invoice/:id','subtract','secondary_code','German','Return\x20Rooms','c_payment','for_categorize','express','5700805UgRjJs','$customer_docs','secondary_code_QA','render','customers','old_warehouse_data','due_amount','types','amount','map','find','customer_docs','exports','invoice','findOne','log','stocks_QA','1695388YgcYhq','warehouse_name','suppliers','success','../middleware/auth','getFullYear','primary_code','return_qty','stocks','bin','get','2852124eUTdVA','slice','redirect','English','new\x20new_data','Finished\x20Goods','aggregate','Arabic','note','paid_amount','Spanish','json','purchase\x20return\x20successfully','return_sale_QA','Enabled','$product_details.floorlevel','$product_details.rack','ToRoom','sales_quantity','return_sale_edit_finished','$product_details.product_stock','Chinese','user','../models/all_models','getMonth','return_sale','params','99PFLszg','/sales_return/view','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details._id','forEach','977790XmczIW','status','$product_details.secondary_code','Portuguese\x20(BR)','type','post','customer','product_name_QA','email','French','language','Arabic\x20(ae)','7XPQckT','sales_quantity_QA','$product_details.product_name','5387412oXmSyB','sale_qty','Sale\x20Return','payment\x20successfull','product_stock','message','back','ToWarehouse','product_details','Portuguese','QA\x20Warehouse','/sales_return_finished/view','bay','product_code_QA','$product_details.primary_code','106696WFQchp','floorlevel','$name','Hindi','/view/:id','flash','product_name','product_code','getDate'];a0_0x13d4=function(){return _0x2c8fa0;};return a0_0x13d4();}(function(_0x344156,_0x150ca6){var _0x1b2c54=a0_0x3299,_0x3d01a0=_0x344156();while(!![]){try{var _0x36751e=parseInt(_0x1b2c54(0x258))/0x1+parseInt(_0x1b2c54(0x20f))/0x2+parseInt(_0x1b2c54(0x21a))/0x3+-parseInt(_0x1b2c54(0x249))/0x4+parseInt(_0x1b2c54(0x1fe))/0x5+-parseInt(_0x1b2c54(0x23a))/0x6*(-parseInt(_0x1b2c54(0x246))/0x7)+parseInt(_0x1b2c54(0x1f0))/0x8*(-parseInt(_0x1b2c54(0x235))/0x9);if(_0x36751e===_0x150ca6)break;else _0x3d01a0['push'](_0x3d01a0['shift']());}catch(_0x5df6db){_0x3d01a0['push'](_0x3d01a0['shift']());}}}(a0_0x13d4,0xaa357));const express=require(a0_0x135f7a(0x1fd)),app=express(),router=express[a0_0x135f7a(0x1ee)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x135f7a(0x231)),auth=require(a0_0x135f7a(0x213)),users=require('../public/language/languages.json');router[a0_0x135f7a(0x219)]('/view',auth,async(_0x4e2201,_0x24ff5f)=>{var _0x984258=a0_0x135f7a;try{const {username:_0x1f7b10,email:_0x305543,role:_0x1bdbe7}=_0x4e2201[_0x984258(0x230)],_0x5743ce=_0x4e2201[_0x984258(0x230)],_0x181496=await profile[_0x984258(0x20c)]({'email':_0x5743ce[_0x984258(0x242)]}),_0x3b8d6e=await master_shop[_0x984258(0x208)](),_0x28dd8f=await sales_return_finished[_0x984258(0x220)]([{'$lookup':{'from':_0x984258(0x202),'localField':'customer','foreignField':_0x984258(0x1ec),'as':_0x984258(0x209)}},{'$unwind':_0x984258(0x1ff)}]);if(_0x3b8d6e[0x0][_0x984258(0x244)]=='English\x20(US)'){var _0x139ef5=users[_0x984258(0x21d)];console[_0x984258(0x20d)](_0x139ef5);}else{if(_0x3b8d6e[0x0][_0x984258(0x244)]==_0x984258(0x25b))var _0x139ef5=users[_0x984258(0x25b)];else{if(_0x3b8d6e[0x0]['language']==_0x984258(0x1f9))var _0x139ef5=users['German'];else{if(_0x3b8d6e[0x0]['language']==_0x984258(0x224))var _0x139ef5=users['Spanish'];else{if(_0x3b8d6e[0x0]['language']==_0x984258(0x243))var _0x139ef5=users[_0x984258(0x243)];else{if(_0x3b8d6e[0x0]['language']==_0x984258(0x23d))var _0x139ef5=users[_0x984258(0x252)];else{if(_0x3b8d6e[0x0][_0x984258(0x244)]==_0x984258(0x22f))var _0x139ef5=users['Chinese'];else{if(_0x3b8d6e[0x0][_0x984258(0x244)]=='Arabic\x20(ae)')var _0x139ef5=users[_0x984258(0x221)];}}}}}}}_0x24ff5f['render']('sales_return_finished',{'success':_0x4e2201[_0x984258(0x25d)](_0x984258(0x212)),'errors':_0x4e2201[_0x984258(0x25d)](_0x984258(0x1ef)),'role':_0x5743ce,'profile':_0x181496,'master_shop':_0x3b8d6e,'user':_0x28dd8f,'language':_0x139ef5});}catch(_0x552e90){console['log'](_0x552e90);}}),router[a0_0x135f7a(0x219)]('/view/:id',auth,async(_0x22ec92,_0x33065c)=>{var _0x59a46d=a0_0x135f7a;try{const {username:_0x1502f1,email:_0x93996b,role:_0x578bf6}=_0x22ec92['user'],_0xede2fd=_0x22ec92[_0x59a46d(0x230)],_0x121924=await profile[_0x59a46d(0x20c)]({'email':_0xede2fd['email']}),_0x57e853=await master_shop[_0x59a46d(0x208)]();console[_0x59a46d(0x20d)](_0x59a46d(0x1f2),_0x57e853);const _0x212186=_0x22ec92[_0x59a46d(0x234)]['id'];console[_0x59a46d(0x20d)](_0x212186);var _0x5424ef=[_0x59a46d(0x1fa)];const _0x104e27=await sales_return_finished[_0x59a46d(0x1ed)](_0x212186),_0x2f3c2e=await warehouse[_0x59a46d(0x220)]([{'$match':{'name':_0x104e27['ToWarehouse'],'room':_0x104e27[_0x59a46d(0x22b)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x59a46d(0x238),'name':{'$first':_0x59a46d(0x248)},'product_stock':{'$first':_0x59a46d(0x22e)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x59a46d(0x229)},'primary_code':{'$first':_0x59a46d(0x257)},'secondary_code':{'$first':_0x59a46d(0x23c)},'product_code':{'$first':_0x59a46d(0x1f3)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x59a46d(0x22a)}}}]);console[_0x59a46d(0x20d)](_0x2f3c2e);const _0x449318=await warehouse[_0x59a46d(0x220)]([{'$match':{'status':_0x59a46d(0x228),'warehouse_category':_0x59a46d(0x21f)}},{'$group':{'_id':_0x59a46d(0x25a),'name':{'$first':_0x59a46d(0x25a)}}},{'$sort':{'name':0x1}}]),_0x2e1016=await warehouse[_0x59a46d(0x220)]([{'$match':{'status':_0x59a46d(0x228),'name':_0x59a46d(0x253)}},{'$group':{'_id':_0x59a46d(0x25a),'name':{'$first':_0x59a46d(0x25a)}}},{'$sort':{'name':0x1}}]),_0x4ae152=await product[_0x59a46d(0x208)]({});if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x1f5)){var _0x537a8d=users['English'];console['log'](_0x537a8d);}else{if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x25b))var _0x537a8d=users[_0x59a46d(0x25b)];else{if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x1f9))var _0x537a8d=users[_0x59a46d(0x1f9)];else{if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x224))var _0x537a8d=users[_0x59a46d(0x224)];else{if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x243))var _0x537a8d=users[_0x59a46d(0x243)];else{if(_0x57e853[0x0][_0x59a46d(0x244)]=='Portuguese\x20(BR)')var _0x537a8d=users[_0x59a46d(0x252)];else{if(_0x57e853[0x0]['language']==_0x59a46d(0x22f))var _0x537a8d=users[_0x59a46d(0x22f)];else{if(_0x57e853[0x0][_0x59a46d(0x244)]==_0x59a46d(0x245))var _0x537a8d=users[_0x59a46d(0x221)];}}}}}}}_0x33065c[_0x59a46d(0x201)](_0x59a46d(0x22d),{'success':_0x22ec92[_0x59a46d(0x25d)]('success'),'errors':_0x22ec92['flash'](_0x59a46d(0x1ef)),'role':_0xede2fd,'profile':_0x121924,'master_shop':_0x57e853,'user':_0x104e27,'stock':_0x2f3c2e,'unit':_0x4ae152,'language':_0x537a8d,'warehouses':_0x449318,'rooms':_0x5424ef,'warehouse_QA':_0x2e1016});}catch(_0x19d15d){console['log'](_0x19d15d);}}),router[a0_0x135f7a(0x23f)](a0_0x135f7a(0x25c),auth,async(_0x17b8cb,_0x5c9442)=>{var _0x2f77d7=a0_0x135f7a;if(_0x17b8cb['body'][_0x2f77d7(0x1fc)]=='QA')try{const _0x4229be=_0x17b8cb[_0x2f77d7(0x234)]['id'],_0x23a0cf=await sales_return[_0x2f77d7(0x20c)]({'invoice':_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x20b)]}),_0x203661=await warehouse['findOne']({'name':_0x23a0cf['ToWarehouse'],'room':_0x23a0cf['ToRoom']}),{invoice:_0x54003d,customer:_0x493375,date:_0x3ae328,warehouse_name:_0x226676,product_name:_0x2bd066,primary_code:_0x46989e,secondary_code:_0x202c2e,product_code:_0x21debd,sales_quantity:_0x88f3f6,stocks:_0x56808c,return_qty:_0x2f10ae,note:_0x57b6df,to_warehouse_name_QA:_0x80a5ce,to_Room_name_QA:_0x42e13e}=_0x17b8cb[_0x2f77d7(0x1f1)];if(typeof product_name_QA=='string')var _0x1df46e=[_0x17b8cb['body']['product_name_QA']],_0x17698d=[_0x17b8cb[_0x2f77d7(0x1f1)]['primary_code_QA']],_0x2f2f2e=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x200)]],_0x5053eb=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x256)]],_0x4a590e=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x247)]],_0x175541=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x20e)]],_0x4147bc=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x1ea)]];else var _0x1df46e=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x241)]],_0x17698d=[..._0x17b8cb[_0x2f77d7(0x1f1)]['primary_code_QA']],_0x2f2f2e=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x200)]],_0x5053eb=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x256)]],_0x4a590e=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x247)]],_0x175541=[..._0x17b8cb['body'][_0x2f77d7(0x20e)]],_0x4147bc=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x1ea)]];const _0x63a432=_0x1df46e['map'](_0x517f28=>{return _0x517f28={'product_name':_0x517f28};});_0x17698d[_0x2f77d7(0x239)]((_0x2c69b5,_0x1eaecb)=>{var _0x2fb529=_0x2f77d7;_0x63a432[_0x1eaecb][_0x2fb529(0x215)]=_0x2c69b5;}),_0x2f2f2e[_0x2f77d7(0x239)]((_0xc7d164,_0x25dccd)=>{var _0xc15766=_0x2f77d7;_0x63a432[_0x25dccd][_0xc15766(0x1f8)]=_0xc7d164;}),_0x5053eb[_0x2f77d7(0x239)]((_0x1569c5,_0x54bc2f)=>{_0x63a432[_0x54bc2f]['product_code']=_0x1569c5;}),_0x4a590e[_0x2f77d7(0x239)]((_0x1c8690,_0x59d6fb)=>{_0x63a432[_0x59d6fb]['sale_qty']=_0x1c8690;}),_0x175541['forEach']((_0x3b9209,_0xe436db)=>{var _0x1303f2=_0x2f77d7;_0x63a432[_0xe436db][_0x1303f2(0x1e8)]=_0x3b9209;}),_0x4147bc[_0x2f77d7(0x239)]((_0x20b528,_0x20ab86)=>{var _0x4a432d=_0x2f77d7;_0x63a432[_0x20ab86][_0x4a432d(0x216)]=_0x20b528;}),_0x23a0cf[_0x2f77d7(0x227)]['forEach'](_0x4f9d6b=>{var _0x363ec2=_0x2f77d7;const _0x51f885=_0x203661['product_details'][_0x363ec2(0x207)](_0x34dfa1=>{var _0x1bbdb4=_0x363ec2;_0x34dfa1[_0x1bbdb4(0x25e)]==_0x4f9d6b['product_name']&&(_0x34dfa1['product_stock']=parseInt(_0x34dfa1[_0x1bbdb4(0x24d)])+parseInt(_0x4f9d6b[_0x1bbdb4(0x216)]));});}),await _0x203661['save'](),_0x23a0cf['invoice']=_0x54003d,_0x23a0cf['customer']=_0x493375,_0x23a0cf[_0x2f77d7(0x1eb)]=_0x3ae328,_0x23a0cf[_0x2f77d7(0x210)]=_0x226676,_0x23a0cf[_0x2f77d7(0x227)]=_0x63a432,_0x23a0cf[_0x2f77d7(0x222)]=_0x57b6df,_0x23a0cf[_0x2f77d7(0x250)]=_0x80a5ce,_0x23a0cf[_0x2f77d7(0x22b)]=_0x42e13e;const _0x2e00a0=await _0x23a0cf[_0x2f77d7(0x1f4)](),_0x288ae2=await c_payment_data[_0x2f77d7(0x20c)]({'invoice':_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x20b)],'reason':_0x2f77d7(0x24b)});_0x288ae2[_0x2f77d7(0x211)]=_0x17b8cb[_0x2f77d7(0x1f1)]['suppliers'],_0x288ae2[_0x2f77d7(0x1eb)]=_0x17b8cb[_0x2f77d7(0x1f1)]['date'],await _0x288ae2[_0x2f77d7(0x1f4)](),_0x17b8cb[_0x2f77d7(0x25d)]('success',_0x2f77d7(0x226)),_0x5c9442[_0x2f77d7(0x21c)](_0x2f77d7(0x254));}catch(_0x1e45e3){console[_0x2f77d7(0x20d)](_0x1e45e3),_0x5c9442[_0x2f77d7(0x23b)](0xc8)[_0x2f77d7(0x225)]({'message':_0x1e45e3['message']});}else try{const _0xac8454=_0x17b8cb[_0x2f77d7(0x234)]['id'];console[_0x2f77d7(0x20d)](_0xac8454);const _0xd0507c=await sales_return[_0x2f77d7(0x20c)]({'invoice':_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x20b)]});console['log'](_0x2f77d7(0x1e9),_0xd0507c);const _0xa6de75=await warehouse[_0x2f77d7(0x20c)]({'name':_0xd0507c['ToWarehouse'],'room':_0xd0507c[_0x2f77d7(0x22b)]});console[_0x2f77d7(0x20d)]('old_warehouse_data',_0xa6de75);const {invoice:_0x243849,customer:_0x25aa81,date:_0x357d50,warehouse_name:_0x347700,product_name:_0x5899b9,primary_code:_0x513e62,secondary_code:_0x129e43,product_code:_0xb868f4,sales_quantity:_0x2eb3d9,stocks:_0x401143,return_qty:_0x431d67,note:_0x431f8d,to_warehouse_name:_0x2aacc7,to_Room_name:_0x4996e1}=_0x17b8cb['body'];console[_0x2f77d7(0x20d)](_0x17b8cb[_0x2f77d7(0x1f1)]);if(typeof _0x5899b9=='string')var _0x1df46e=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x25e)]],_0x17698d=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x215)]],_0x2f2f2e=[_0x17b8cb[_0x2f77d7(0x1f1)]['secondary_code']],_0x5053eb=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x25f)]],_0x4a590e=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x22c)]],_0x175541=[_0x17b8cb['body'][_0x2f77d7(0x217)]],_0x4147bc=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x216)]],_0x2e9618=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x255)]],_0xcf1180=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x218)]],_0x49e648=[_0x17b8cb[_0x2f77d7(0x1f1)]['types']],_0x53f75b=[_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x259)]];else var _0x1df46e=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x25e)]],_0x17698d=[..._0x17b8cb['body']['primary_code']],_0x2f2f2e=[..._0x17b8cb['body'][_0x2f77d7(0x1f8)]],_0x5053eb=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x25f)]],_0x4a590e=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x22c)]],_0x175541=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x217)]],_0x4147bc=[..._0x17b8cb['body'][_0x2f77d7(0x216)]],_0x2e9618=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x255)]],_0xcf1180=[..._0x17b8cb['body']['bin']],_0x49e648=[..._0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x205)]],_0x53f75b=[..._0x17b8cb['body'][_0x2f77d7(0x259)]];const _0x3589d8=_0x1df46e['map'](_0x3850cc=>{return _0x3850cc={'product_name':_0x3850cc};});_0x17698d[_0x2f77d7(0x239)]((_0x3f331f,_0xb0a29a)=>{var _0x437c17=_0x2f77d7;_0x3589d8[_0xb0a29a][_0x437c17(0x215)]=_0x3f331f;}),_0x2f2f2e[_0x2f77d7(0x239)]((_0x12b470,_0x410b9b)=>{var _0x508116=_0x2f77d7;_0x3589d8[_0x410b9b][_0x508116(0x1f8)]=_0x12b470;}),_0x5053eb[_0x2f77d7(0x239)]((_0x3ea146,_0x42d739)=>{var _0x4ffda8=_0x2f77d7;_0x3589d8[_0x42d739][_0x4ffda8(0x25f)]=_0x3ea146;}),_0x4a590e[_0x2f77d7(0x239)]((_0x3a1683,_0x5aee26)=>{var _0x5f1c0a=_0x2f77d7;_0x3589d8[_0x5aee26][_0x5f1c0a(0x24a)]=_0x3a1683;}),_0x175541['forEach']((_0x335cee,_0x3fc7a6)=>{var _0x458560=_0x2f77d7;_0x3589d8[_0x3fc7a6][_0x458560(0x1e8)]=_0x335cee;}),_0x4147bc[_0x2f77d7(0x239)]((_0x55076c,_0x2ec503)=>{var _0x1bb439=_0x2f77d7;_0x3589d8[_0x2ec503][_0x1bb439(0x216)]=_0x55076c;}),_0x2e9618[_0x2f77d7(0x239)]((_0x48a0d4,_0x50b963)=>{_0x3589d8[_0x50b963]['bay']=_0x48a0d4;}),_0xcf1180[_0x2f77d7(0x239)]((_0x1263ae,_0x3ce0f2)=>{var _0x5523d0=_0x2f77d7;_0x3589d8[_0x3ce0f2][_0x5523d0(0x218)]=_0x1263ae;}),_0x49e648[_0x2f77d7(0x239)]((_0x11616d,_0x5dbbf0)=>{var _0x31ad5b=_0x2f77d7;_0x3589d8[_0x5dbbf0][_0x31ad5b(0x23e)]=_0x11616d;}),_0x53f75b[_0x2f77d7(0x239)]((_0x2d7149,_0x47dc4c)=>{var _0x22aaca=_0x2f77d7;_0x3589d8[_0x47dc4c][_0x22aaca(0x259)]=_0x2d7149;});var _0x439892=0x0;_0x3589d8[_0x2f77d7(0x239)](_0xb0ac71=>{var _0x3a774b=_0x2f77d7;console[_0x3a774b(0x20d)]('foreach\x20newproduct',_0xb0ac71),(parseInt(_0xb0ac71[_0x3a774b(0x24a)])<parseInt(_0xb0ac71[_0x3a774b(0x216)])||parseInt(_0xb0ac71[_0x3a774b(0x1e8)])<parseInt(_0xb0ac71['return_qty'])&&parseInt(_0xb0ac71['sale_qty'])>parseInt(_0xb0ac71[_0x3a774b(0x216)])||parseInt(_0xb0ac71['return_qty'])==0x0)&&_0x439892++;});if(_0x439892!=0x0)return _0x17b8cb[_0x2f77d7(0x25d)]('errors',_0x2f77d7(0x237)),_0x5c9442[_0x2f77d7(0x21c)](_0x2f77d7(0x24f));_0xd0507c[_0x2f77d7(0x233)][_0x2f77d7(0x239)](_0x59b2a6=>{var _0x378e15=_0x2f77d7;const _0x4a6a5f=_0xa6de75[_0x378e15(0x251)][_0x378e15(0x207)](_0x46064a=>{var _0x17a91c=_0x378e15;_0x46064a['product_name']==_0x59b2a6[_0x17a91c(0x25e)]&&_0x46064a[_0x17a91c(0x259)]==_0x59b2a6[_0x17a91c(0x259)]&&_0x46064a[_0x17a91c(0x23e)]==_0x59b2a6['type']&&_0x46064a['bin']==_0x59b2a6[_0x17a91c(0x218)]&&_0x46064a[_0x17a91c(0x255)]==_0x59b2a6[_0x17a91c(0x255)]&&(_0x46064a[_0x17a91c(0x24d)]=parseInt(_0x46064a[_0x17a91c(0x24d)])+parseInt(_0x59b2a6[_0x17a91c(0x216)]));});}),console['log'](_0x2f77d7(0x203),_0xa6de75),await _0xa6de75[_0x2f77d7(0x1f4)](),_0xd0507c[_0x2f77d7(0x20b)]=_0x243849,_0xd0507c[_0x2f77d7(0x240)]=_0x25aa81,_0xd0507c['date']=_0x357d50,_0xd0507c[_0x2f77d7(0x210)]=_0x347700,_0xd0507c[_0x2f77d7(0x233)]=_0x3589d8,_0xd0507c[_0x2f77d7(0x222)]=_0x431f8d,_0xd0507c['ToWarehouse']=_0x2aacc7,_0xd0507c[_0x2f77d7(0x22b)]=_0x4996e1;const _0x39b6fc=await _0xd0507c['save']();console[_0x2f77d7(0x20d)](_0x2f77d7(0x21e),_0x39b6fc);const _0x9cfe1f=await c_payment_data[_0x2f77d7(0x20c)]({'invoice':_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x20b)],'reason':_0x2f77d7(0x24b)});_0x9cfe1f[_0x2f77d7(0x211)]=_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x211)],_0x9cfe1f[_0x2f77d7(0x1eb)]=_0x17b8cb[_0x2f77d7(0x1f1)][_0x2f77d7(0x1eb)],await _0x9cfe1f[_0x2f77d7(0x1f4)](),_0x17b8cb[_0x2f77d7(0x25d)](_0x2f77d7(0x212),_0x2f77d7(0x226)),_0x5c9442[_0x2f77d7(0x21c)]('/sales_return/view');}catch(_0xe5e5fa){console[_0x2f77d7(0x20d)](_0xe5e5fa),_0x5c9442[_0x2f77d7(0x23b)](0xc8)['json']({'message':_0xe5e5fa[_0x2f77d7(0x24e)]});}}),router[a0_0x135f7a(0x23f)]('/give_payment/:id',auth,async(_0x42bc27,_0x239cd5)=>{var _0x47fc91=a0_0x135f7a;try{const _0x33716f=_0x42bc27[_0x47fc91(0x234)]['id'],{invoice:_0x3097b8,customer:_0x2d1f96,payable_to_customer:_0xba1d0f,paid_amount:_0x43b6b9}=_0x42bc27['body'],_0x485bf1=await sales_return[_0x47fc91(0x1ed)](_0x33716f);console['log']('data',_0x485bf1),console[_0x47fc91(0x20d)](_0xba1d0f),console['log'](_0x43b6b9);var _0x5ac61a=_0xba1d0f-_0x43b6b9;console[_0x47fc91(0x20d)](_0x47fc91(0x1f7),_0x5ac61a),_0x485bf1[_0x47fc91(0x223)]=parseFloat(_0x43b6b9)+parseFloat(_0x485bf1[_0x47fc91(0x223)]),_0x485bf1[_0x47fc91(0x204)]=_0x5ac61a,console[_0x47fc91(0x20d)](_0x485bf1);const _0x1f0fa1=await _0x485bf1[_0x47fc91(0x1f4)]();console[_0x47fc91(0x20d)](0x1b207);const _0x34bc24=await c_payment_data[_0x47fc91(0x20c)]({'invoice':_0x42bc27[_0x47fc91(0x1f1)][_0x47fc91(0x20b)],'reason':_0x47fc91(0x24b)});console[_0x47fc91(0x20d)](_0x47fc91(0x1fb),_0x34bc24),_0x34bc24[_0x47fc91(0x206)]=_0x5ac61a,await _0x34bc24[_0x47fc91(0x1f4)]();let _0x3e1cdb=new Date(),_0x49dedc=('0'+_0x3e1cdb[_0x47fc91(0x260)]())[_0x47fc91(0x21b)](-0x2),_0x17bf7d=('0'+(_0x3e1cdb[_0x47fc91(0x232)]()+0x1))[_0x47fc91(0x21b)](-0x2),_0x1fa7f1=_0x3e1cdb[_0x47fc91(0x214)](),_0x387536=_0x1fa7f1+'-'+_0x17bf7d+'-'+_0x49dedc;const _0x40d961=new customer_payment({'invoice':_0x3097b8,'date':_0x1fa7f1+'-'+_0x17bf7d+'-'+_0x49dedc,'customer':_0x2d1f96,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x43b6b9}),_0x596394=await _0x40d961[_0x47fc91(0x1f4)]();_0x42bc27['flash'](_0x47fc91(0x212),_0x47fc91(0x24c)),_0x239cd5[_0x47fc91(0x21c)](_0x47fc91(0x236));}catch(_0x3728d2){console['log'](_0x3728d2);}}),router['get'](a0_0x135f7a(0x1f6),auth,async(_0x7421c3,_0x2b2dde)=>{var _0x11b89b=a0_0x135f7a;try{const {username:_0x3fd29b,email:_0x431616,role:_0x36fe28}=_0x7421c3[_0x11b89b(0x230)],_0x3dfaa7=_0x7421c3[_0x11b89b(0x230)],_0x33a6ca=await profile[_0x11b89b(0x20c)]({'email':_0x3dfaa7['email']}),_0x740662=await master_shop[_0x11b89b(0x208)]();console['log'](_0x11b89b(0x1f2),_0x740662);const _0x1a97fe=_0x7421c3[_0x11b89b(0x234)]['id'],_0x3cf14d=await sales_return[_0x11b89b(0x1ed)](_0x1a97fe);console['log'](_0x3cf14d);const _0x36059e=await customer[_0x11b89b(0x20c)]({'name':_0x3cf14d['customer']});console[_0x11b89b(0x20d)](_0x36059e);if(_0x740662[0x0]['language']=='English\x20(US)'){var _0x1da341=users[_0x11b89b(0x21d)];console[_0x11b89b(0x20d)](_0x1da341);}else{if(_0x740662[0x0][_0x11b89b(0x244)]==_0x11b89b(0x25b))var _0x1da341=users[_0x11b89b(0x25b)];else{if(_0x740662[0x0][_0x11b89b(0x244)]=='German')var _0x1da341=users[_0x11b89b(0x1f9)];else{if(_0x740662[0x0]['language']==_0x11b89b(0x224))var _0x1da341=users[_0x11b89b(0x224)];else{if(_0x740662[0x0][_0x11b89b(0x244)]==_0x11b89b(0x243))var _0x1da341=users[_0x11b89b(0x243)];else{if(_0x740662[0x0][_0x11b89b(0x244)]==_0x11b89b(0x23d))var _0x1da341=users[_0x11b89b(0x252)];else{if(_0x740662[0x0][_0x11b89b(0x244)]==_0x11b89b(0x22f))var _0x1da341=users[_0x11b89b(0x22f)];else{if(_0x740662[0x0]['language']==_0x11b89b(0x245))var _0x1da341=users[_0x11b89b(0x221)];}}}}}}}_0x2b2dde[_0x11b89b(0x201)]('sales_return_invoice',{'success':_0x7421c3[_0x11b89b(0x25d)]('success'),'errors':_0x7421c3[_0x11b89b(0x25d)](_0x11b89b(0x1ef)),'role':_0x3dfaa7,'profile':_0x33a6ca,'master_shop':_0x740662,'customers':_0x36059e,'sales':_0x3cf14d,'language':_0x1da341});}catch(_0x51951a){console[_0x11b89b(0x20d)](_0x51951a);}}),module[a0_0x135f7a(0x20a)]=router;