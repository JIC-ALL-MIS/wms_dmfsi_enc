var a0_0x1407fd=a0_0x5b36;function a0_0x5b36(_0x1a0649,_0x3e743e){var _0x1552d6=a0_0x1552();return a0_0x5b36=function(_0x5b36ea,_0x21b398){_0x5b36ea=_0x5b36ea-0xd8;var _0x41c9c1=_0x1552d6[_0x5b36ea];return _0x41c9c1;},a0_0x5b36(_0x1a0649,_0x3e743e);}(function(_0xaa1da4,_0x349acd){var _0x4dd693=a0_0x5b36,_0x56dbde=_0xaa1da4();while(!![]){try{var _0x3d3910=parseInt(_0x4dd693(0x143))/0x1+-parseInt(_0x4dd693(0xda))/0x2+-parseInt(_0x4dd693(0x10a))/0x3+parseInt(_0x4dd693(0xef))/0x4*(-parseInt(_0x4dd693(0xf4))/0x5)+parseInt(_0x4dd693(0x136))/0x6*(-parseInt(_0x4dd693(0x102))/0x7)+-parseInt(_0x4dd693(0xe7))/0x8+parseInt(_0x4dd693(0x109))/0x9;if(_0x3d3910===_0x349acd)break;else _0x56dbde['push'](_0x56dbde['shift']());}catch(_0x5bc501){_0x56dbde['push'](_0x56dbde['shift']());}}}(a0_0x1552,0x3f666));const express=require('express'),app=express(),router=express[a0_0x1407fd(0x115)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x1407fd(0x10c)),users=require(a0_0x1407fd(0x122));router[a0_0x1407fd(0x10b)](a0_0x1407fd(0x12a),auth,async(_0xd3ea2c,_0x5e0282)=>{var _0x4f8e5a=a0_0x1407fd;try{const {username:_0x2ee783,email:_0x327137,role:_0x158b67}=_0xd3ea2c[_0x4f8e5a(0xe1)],_0x3a0338=_0xd3ea2c['user'],_0x45903a=await profile[_0x4f8e5a(0x129)]({'email':_0x3a0338[_0x4f8e5a(0x112)]}),_0x4867f8=await master_shop['find'](),_0x3ea110=await sales_return_finished[_0x4f8e5a(0x110)]([{'$lookup':{'from':_0x4f8e5a(0x13b),'localField':_0x4f8e5a(0x14e),'foreignField':_0x4f8e5a(0x113),'as':_0x4f8e5a(0xf9)}},{'$unwind':_0x4f8e5a(0xdc)}]);if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]=='English\x20(US)'){var _0x580616=users[_0x4f8e5a(0x108)];console[_0x4f8e5a(0xd8)](_0x580616);}else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]==_0x4f8e5a(0x14a))var _0x580616=users[_0x4f8e5a(0x14a)];else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]==_0x4f8e5a(0xd9))var _0x580616=users['German'];else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]==_0x4f8e5a(0x144))var _0x580616=users[_0x4f8e5a(0x144)];else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]==_0x4f8e5a(0x149))var _0x580616=users[_0x4f8e5a(0x149)];else{if(_0x4867f8[0x0]['language']=='Portuguese\x20(BR)')var _0x580616=users[_0x4f8e5a(0x12e)];else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]=='Chinese')var _0x580616=users[_0x4f8e5a(0xe9)];else{if(_0x4867f8[0x0][_0x4f8e5a(0xfb)]==_0x4f8e5a(0x141))var _0x580616=users[_0x4f8e5a(0xf3)];}}}}}}}_0x5e0282[_0x4f8e5a(0xea)]('sales_return_finished',{'success':_0xd3ea2c[_0x4f8e5a(0x11f)](_0x4f8e5a(0x107)),'errors':_0xd3ea2c[_0x4f8e5a(0x11f)](_0x4f8e5a(0xdb)),'role':_0x3a0338,'profile':_0x45903a,'master_shop':_0x4867f8,'user':_0x3ea110,'language':_0x580616});}catch(_0x1572f4){console[_0x4f8e5a(0xd8)](_0x1572f4);}}),router[a0_0x1407fd(0x10b)](a0_0x1407fd(0x12b),auth,async(_0x2782d3,_0x4ae4fd)=>{var _0x41798e=a0_0x1407fd;try{const {username:_0x4b4b16,email:_0x1d7f68,role:_0x295e33}=_0x2782d3['user'],_0x1be2e4=_0x2782d3[_0x41798e(0xe1)],_0x4e8c6c=await profile[_0x41798e(0x129)]({'email':_0x1be2e4[_0x41798e(0x112)]}),_0x50c388=await master_shop['find']();console[_0x41798e(0xd8)](_0x41798e(0x11c),_0x50c388);const _0x27ed1f=_0x2782d3[_0x41798e(0x14d)]['id'];console[_0x41798e(0xd8)](_0x27ed1f);var _0x36b19c=[_0x41798e(0x137)];const _0xbbf7cf=await sales_return_finished['findById'](_0x27ed1f),_0x1615da=await warehouse[_0x41798e(0x110)]([{'$match':{'name':_0xbbf7cf[_0x41798e(0xee)],'room':_0xbbf7cf[_0x41798e(0x135)]}},{'$unwind':_0x41798e(0xf8)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x41798e(0x148)},'product_stock':{'$first':_0x41798e(0x123)},'bay':{'$first':_0x41798e(0x103)},'bin':{'$first':_0x41798e(0xfa)},'type':{'$first':_0x41798e(0x13a)},'floorlevel':{'$first':_0x41798e(0x11d)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x41798e(0x134)},'product_code':{'$first':_0x41798e(0x120)},'storage':{'$first':_0x41798e(0x121)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x41798e(0xd8)](_0x1615da);const _0x1e57e7=await warehouse[_0x41798e(0x110)]([{'$match':{'status':_0x41798e(0x10f),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x41798e(0x12c),'name':{'$first':_0x41798e(0x12c)}}},{'$sort':{'name':0x1}}]),_0x4f3514=await warehouse[_0x41798e(0x110)]([{'$match':{'status':_0x41798e(0x10f),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x41798e(0x12c)}}},{'$sort':{'name':0x1}}]),_0x27b3d7=await product[_0x41798e(0x139)]({});if(_0x50c388[0x0][_0x41798e(0xfb)]==_0x41798e(0x13d)){var _0xd91a6a=users['English'];console[_0x41798e(0xd8)](_0xd91a6a);}else{if(_0x50c388[0x0]['language']=='Hindi')var _0xd91a6a=users[_0x41798e(0x14a)];else{if(_0x50c388[0x0]['language']=='German')var _0xd91a6a=users[_0x41798e(0xd9)];else{if(_0x50c388[0x0][_0x41798e(0xfb)]==_0x41798e(0x144))var _0xd91a6a=users['Spanish'];else{if(_0x50c388[0x0][_0x41798e(0xfb)]==_0x41798e(0x149))var _0xd91a6a=users[_0x41798e(0x149)];else{if(_0x50c388[0x0]['language']==_0x41798e(0x138))var _0xd91a6a=users[_0x41798e(0x12e)];else{if(_0x50c388[0x0][_0x41798e(0xfb)]==_0x41798e(0xe9))var _0xd91a6a=users[_0x41798e(0xe9)];else{if(_0x50c388[0x0][_0x41798e(0xfb)]==_0x41798e(0x141))var _0xd91a6a=users[_0x41798e(0xf3)];}}}}}}}_0x4ae4fd[_0x41798e(0xea)](_0x41798e(0xf0),{'success':_0x2782d3['flash'](_0x41798e(0x107)),'errors':_0x2782d3['flash'](_0x41798e(0xdb)),'role':_0x1be2e4,'profile':_0x4e8c6c,'master_shop':_0x50c388,'user':_0xbbf7cf,'stock':_0x1615da,'unit':_0x27b3d7,'language':_0xd91a6a,'warehouses':_0x1e57e7,'rooms':_0x36b19c,'warehouse_QA':_0x4f3514});}catch(_0x1d7af8){console[_0x41798e(0xd8)](_0x1d7af8);}}),router[a0_0x1407fd(0x130)](a0_0x1407fd(0x12b),auth,async(_0x417bff,_0x101a5d)=>{var _0x290567=a0_0x1407fd;if(_0x417bff[_0x290567(0x119)][_0x290567(0x132)]=='QA')try{const _0x517280=_0x417bff[_0x290567(0x14d)]['id'],_0x1cad88=await sales_return[_0x290567(0x129)]({'invoice':_0x417bff['body'][_0x290567(0xe8)]}),_0xb33ff3=await warehouse[_0x290567(0x129)]({'name':_0x1cad88['ToWarehouse'],'room':_0x1cad88['ToRoom']}),{invoice:_0x2ddef9,customer:_0xccb9b5,date:_0x430156,warehouse_name:_0x2d12b4,product_name:_0x14b392,primary_code:_0x4fb7de,secondary_code:_0x2cfe89,product_code:_0x43b4b0,sales_quantity:_0x2fb5cd,stocks:_0x456d0d,return_qty:_0x2192fe,note:_0x1ab9d8,to_warehouse_name_QA:_0x287f5f,to_Room_name_QA:_0x1433cf}=_0x417bff[_0x290567(0x119)];if(typeof product_name_QA==_0x290567(0x126))var _0x5db717=[_0x417bff[_0x290567(0x119)][_0x290567(0x128)]],_0x17bec1=[_0x417bff[_0x290567(0x119)][_0x290567(0x131)]],_0x281b9a=[_0x417bff[_0x290567(0x119)][_0x290567(0xf1)]],_0x27bfd7=[_0x417bff[_0x290567(0x119)]['product_code_QA']],_0x212da6=[_0x417bff[_0x290567(0x119)][_0x290567(0x114)]],_0x4560ea=[_0x417bff[_0x290567(0x119)][_0x290567(0x142)]],_0x564f24=[_0x417bff[_0x290567(0x119)][_0x290567(0x145)]];else var _0x5db717=[..._0x417bff[_0x290567(0x119)]['product_name_QA']],_0x17bec1=[..._0x417bff[_0x290567(0x119)][_0x290567(0x131)]],_0x281b9a=[..._0x417bff[_0x290567(0x119)]['secondary_code_QA']],_0x27bfd7=[..._0x417bff[_0x290567(0x119)][_0x290567(0x11a)]],_0x212da6=[..._0x417bff[_0x290567(0x119)][_0x290567(0x114)]],_0x4560ea=[..._0x417bff[_0x290567(0x119)][_0x290567(0x142)]],_0x564f24=[..._0x417bff['body']['return_qty_QA']];const _0x234bb2=_0x5db717[_0x290567(0xe0)](_0x393b98=>{return _0x393b98={'product_name':_0x393b98};});_0x17bec1[_0x290567(0x125)]((_0x2143aa,_0x4ea6fe)=>{var _0x5945bb=_0x290567;_0x234bb2[_0x4ea6fe][_0x5945bb(0xde)]=_0x2143aa;}),_0x281b9a['forEach']((_0x350371,_0x5ab237)=>{var _0x786d8f=_0x290567;_0x234bb2[_0x5ab237][_0x786d8f(0x117)]=_0x350371;}),_0x27bfd7[_0x290567(0x125)]((_0x5c1f3c,_0x10b0fc)=>{var _0x4b3c39=_0x290567;_0x234bb2[_0x10b0fc][_0x4b3c39(0x14b)]=_0x5c1f3c;}),_0x212da6[_0x290567(0x125)]((_0x263d22,_0x36816f)=>{var _0x1b8b16=_0x290567;_0x234bb2[_0x36816f][_0x1b8b16(0x13f)]=_0x263d22;}),_0x4560ea['forEach']((_0x369af4,_0x5b56db)=>{_0x234bb2[_0x5b56db]['stock']=_0x369af4;}),_0x564f24[_0x290567(0x125)]((_0x2e51e3,_0x3d9429)=>{var _0x3f2cf1=_0x290567;_0x234bb2[_0x3d9429][_0x3f2cf1(0xff)]=_0x2e51e3;}),_0x1cad88[_0x290567(0x100)][_0x290567(0x125)](_0x23db4a=>{var _0xba65df=_0x290567;const _0x30f948=_0xb33ff3[_0xba65df(0xe5)]['map'](_0x5ab00a=>{var _0x4353e0=_0xba65df;_0x5ab00a['product_name']==_0x23db4a['product_name']&&(_0x5ab00a['product_stock']=parseInt(_0x5ab00a[_0x4353e0(0x106)])+parseInt(_0x23db4a['return_qty']));});}),await _0xb33ff3[_0x290567(0x133)](),_0x1cad88[_0x290567(0xe8)]=_0x2ddef9,_0x1cad88[_0x290567(0x14e)]=_0xccb9b5,_0x1cad88[_0x290567(0x11e)]=_0x430156,_0x1cad88['warehouse_name']=_0x2d12b4,_0x1cad88['return_sale_QA']=_0x234bb2,_0x1cad88[_0x290567(0x140)]=_0x1ab9d8,_0x1cad88[_0x290567(0xee)]=_0x287f5f,_0x1cad88['ToRoom']=_0x1433cf;const _0x32020a=await _0x1cad88['save'](),_0x295bc0=await c_payment_data[_0x290567(0x129)]({'invoice':_0x417bff[_0x290567(0x119)][_0x290567(0xe8)],'reason':_0x290567(0xfe)});_0x295bc0[_0x290567(0xdd)]=_0x417bff[_0x290567(0x119)]['suppliers'],_0x295bc0['date']=_0x417bff[_0x290567(0x119)]['date'],await _0x295bc0[_0x290567(0x133)](),_0x417bff[_0x290567(0x11f)](_0x290567(0x107),_0x290567(0xf5)),_0x101a5d[_0x290567(0x116)]('/sales_return_finished/view');}catch(_0x11ba0f){console[_0x290567(0xd8)](_0x11ba0f),_0x101a5d[_0x290567(0xf6)](0xc8)[_0x290567(0x13e)]({'message':_0x11ba0f[_0x290567(0xdf)]});}else try{const _0x26dfe8=_0x417bff[_0x290567(0x14d)]['id'];console['log'](_0x26dfe8);const _0x5e5143=await sales_return[_0x290567(0x129)]({'invoice':_0x417bff[_0x290567(0x119)][_0x290567(0xe8)]});console[_0x290567(0xd8)]('old_data',_0x5e5143);const _0x2988dd=await warehouse['findOne']({'name':_0x5e5143[_0x290567(0xee)],'room':_0x5e5143[_0x290567(0x135)]});console['log']('old_warehouse_data',_0x2988dd);const {invoice:_0xc4b7af,customer:_0x2b2e24,date:_0x124f64,warehouse_name:_0x4f38ce,product_name:_0x58871c,primary_code:_0x3e2d7f,secondary_code:_0x571407,product_code:_0x34f2b8,sales_quantity:_0x340a93,stocks:_0xf9a06f,return_qty:_0x13eeeb,note:_0x253e6f,to_warehouse_name:_0xf16481,to_Room_name:_0x4ab37b}=_0x417bff[_0x290567(0x119)];console[_0x290567(0xd8)](_0x417bff[_0x290567(0x119)]);if(typeof _0x58871c==_0x290567(0x126))var _0x5db717=[_0x417bff['body'][_0x290567(0x124)]],_0x17bec1=[_0x417bff[_0x290567(0x119)][_0x290567(0xde)]],_0x281b9a=[_0x417bff[_0x290567(0x119)][_0x290567(0x117)]],_0x27bfd7=[_0x417bff[_0x290567(0x119)][_0x290567(0x14b)]],_0x212da6=[_0x417bff[_0x290567(0x119)][_0x290567(0x111)]],_0x4560ea=[_0x417bff[_0x290567(0x119)]['stocks']],_0x564f24=[_0x417bff[_0x290567(0x119)][_0x290567(0xff)]],_0x27f6b8=[_0x417bff['body']['bay']],_0x30451c=[_0x417bff[_0x290567(0x119)][_0x290567(0x104)]],_0x49c663=[_0x417bff[_0x290567(0x119)][_0x290567(0x127)]],_0x5b50ab=[_0x417bff['body']['floorlevel']];else var _0x5db717=[..._0x417bff['body'][_0x290567(0x124)]],_0x17bec1=[..._0x417bff[_0x290567(0x119)][_0x290567(0xde)]],_0x281b9a=[..._0x417bff[_0x290567(0x119)][_0x290567(0x117)]],_0x27bfd7=[..._0x417bff[_0x290567(0x119)][_0x290567(0x14b)]],_0x212da6=[..._0x417bff[_0x290567(0x119)]['sales_quantity']],_0x4560ea=[..._0x417bff[_0x290567(0x119)][_0x290567(0x12f)]],_0x564f24=[..._0x417bff[_0x290567(0x119)][_0x290567(0xff)]],_0x27f6b8=[..._0x417bff[_0x290567(0x119)][_0x290567(0x12d)]],_0x30451c=[..._0x417bff[_0x290567(0x119)]['bin']],_0x49c663=[..._0x417bff[_0x290567(0x119)]['types']],_0x5b50ab=[..._0x417bff[_0x290567(0x119)][_0x290567(0x146)]];const _0x26d052=_0x5db717['map'](_0x506777=>{return _0x506777={'product_name':_0x506777};});_0x17bec1['forEach']((_0x25fa4f,_0x1bea75)=>{_0x26d052[_0x1bea75]['primary_code']=_0x25fa4f;}),_0x281b9a[_0x290567(0x125)]((_0x2f773f,_0x235bf5)=>{_0x26d052[_0x235bf5]['secondary_code']=_0x2f773f;}),_0x27bfd7[_0x290567(0x125)]((_0x207142,_0xaeabac)=>{var _0x10abcd=_0x290567;_0x26d052[_0xaeabac][_0x10abcd(0x14b)]=_0x207142;}),_0x212da6['forEach']((_0x4b7df6,_0xe0153a)=>{var _0x12347c=_0x290567;_0x26d052[_0xe0153a][_0x12347c(0x13f)]=_0x4b7df6;}),_0x4560ea[_0x290567(0x125)]((_0x2f87e9,_0x245c4d)=>{var _0x39bd36=_0x290567;_0x26d052[_0x245c4d][_0x39bd36(0xe3)]=_0x2f87e9;}),_0x564f24[_0x290567(0x125)]((_0x1ddb6b,_0x352d21)=>{var _0x4af345=_0x290567;_0x26d052[_0x352d21][_0x4af345(0xff)]=_0x1ddb6b;}),_0x27f6b8[_0x290567(0x125)]((_0x83c4e5,_0x3618b2)=>{var _0x58e45f=_0x290567;_0x26d052[_0x3618b2][_0x58e45f(0x12d)]=_0x83c4e5;}),_0x30451c[_0x290567(0x125)]((_0x2c6ddf,_0x246d86)=>{var _0xec7a79=_0x290567;_0x26d052[_0x246d86][_0xec7a79(0x104)]=_0x2c6ddf;}),_0x49c663[_0x290567(0x125)]((_0x59ad68,_0x2b2244)=>{_0x26d052[_0x2b2244]['type']=_0x59ad68;}),_0x5b50ab[_0x290567(0x125)]((_0x284b8c,_0x56f581)=>{var _0x304fec=_0x290567;_0x26d052[_0x56f581][_0x304fec(0x146)]=_0x284b8c;});var _0x314b7d=0x0;_0x26d052[_0x290567(0x125)](_0xfc32c7=>{var _0xe9f339=_0x290567;console[_0xe9f339(0xd8)](_0xe9f339(0xfd),_0xfc32c7),(parseInt(_0xfc32c7['sale_qty'])<parseInt(_0xfc32c7[_0xe9f339(0xff)])||parseInt(_0xfc32c7[_0xe9f339(0xe3)])<parseInt(_0xfc32c7['return_qty'])&&parseInt(_0xfc32c7[_0xe9f339(0x13f)])>parseInt(_0xfc32c7[_0xe9f339(0xff)])||parseInt(_0xfc32c7[_0xe9f339(0xff)])==0x0)&&_0x314b7d++;});if(_0x314b7d!=0x0)return _0x417bff[_0x290567(0x11f)](_0x290567(0xdb),'Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x101a5d[_0x290567(0x116)](_0x290567(0x13c));_0x5e5143['return_sale']['forEach'](_0x52db98=>{const _0x4bf0d3=_0x2988dd['product_details']['map'](_0x58b4b1=>{var _0xcb0413=a0_0x5b36;_0x58b4b1['product_name']==_0x52db98[_0xcb0413(0x124)]&&_0x58b4b1[_0xcb0413(0x146)]==_0x52db98[_0xcb0413(0x146)]&&_0x58b4b1[_0xcb0413(0xec)]==_0x52db98[_0xcb0413(0xec)]&&_0x58b4b1[_0xcb0413(0x104)]==_0x52db98[_0xcb0413(0x104)]&&_0x58b4b1['bay']==_0x52db98[_0xcb0413(0x12d)]&&(_0x58b4b1['product_stock']=parseInt(_0x58b4b1[_0xcb0413(0x106)])+parseInt(_0x52db98[_0xcb0413(0xff)]));});}),console[_0x290567(0xd8)](_0x290567(0x10e),_0x2988dd),await _0x2988dd[_0x290567(0x133)](),_0x5e5143[_0x290567(0xe8)]=_0xc4b7af,_0x5e5143['customer']=_0x2b2e24,_0x5e5143[_0x290567(0x11e)]=_0x124f64,_0x5e5143['warehouse_name']=_0x4f38ce,_0x5e5143[_0x290567(0x105)]=_0x26d052,_0x5e5143[_0x290567(0x140)]=_0x253e6f,_0x5e5143[_0x290567(0xee)]=_0xf16481,_0x5e5143[_0x290567(0x135)]=_0x4ab37b;const _0x59f266=await _0x5e5143['save']();console[_0x290567(0xd8)](_0x290567(0x14c),_0x59f266);const _0x3dcc82=await c_payment_data[_0x290567(0x129)]({'invoice':_0x417bff[_0x290567(0x119)]['invoice'],'reason':'Sale\x20Return'});_0x3dcc82[_0x290567(0xdd)]=_0x417bff['body']['suppliers'],_0x3dcc82[_0x290567(0x11e)]=_0x417bff[_0x290567(0x119)][_0x290567(0x11e)],await _0x3dcc82[_0x290567(0x133)](),_0x417bff[_0x290567(0x11f)](_0x290567(0x107),_0x290567(0xf5)),_0x101a5d[_0x290567(0x116)]('/sales_return/view');}catch(_0x372c25){console[_0x290567(0xd8)](_0x372c25),_0x101a5d[_0x290567(0xf6)](0xc8)[_0x290567(0x13e)]({'message':_0x372c25['message']});}}),router[a0_0x1407fd(0x130)](a0_0x1407fd(0x10d),auth,async(_0x5ec244,_0x15fc73)=>{var _0x2e823a=a0_0x1407fd;try{const _0xdd860d=_0x5ec244['params']['id'],{invoice:_0x46bd23,customer:_0x29fc4e,payable_to_customer:_0x38b5f3,paid_amount:_0x35af9b}=_0x5ec244[_0x2e823a(0x119)],_0x3949ca=await sales_return[_0x2e823a(0xe4)](_0xdd860d);console[_0x2e823a(0xd8)]('data',_0x3949ca),console[_0x2e823a(0xd8)](_0x38b5f3),console[_0x2e823a(0xd8)](_0x35af9b);var _0x27bc1e=_0x38b5f3-_0x35af9b;console['log'](_0x2e823a(0x101),_0x27bc1e),_0x3949ca[_0x2e823a(0x147)]=parseFloat(_0x35af9b)+parseFloat(_0x3949ca[_0x2e823a(0x147)]),_0x3949ca[_0x2e823a(0xed)]=_0x27bc1e,console[_0x2e823a(0xd8)](_0x3949ca);const _0xd07609=await _0x3949ca['save']();console['log'](0x1b207);const _0x1b6949=await c_payment_data[_0x2e823a(0x129)]({'invoice':_0x5ec244[_0x2e823a(0x119)][_0x2e823a(0xe8)],'reason':'Sale\x20Return'});console['log']('c_payment',_0x1b6949),_0x1b6949[_0x2e823a(0x118)]=_0x27bc1e,await _0x1b6949[_0x2e823a(0x133)]();let _0x205acf=new Date(),_0xb9722f=('0'+_0x205acf[_0x2e823a(0xe6)]())[_0x2e823a(0xf7)](-0x2),_0x580922=('0'+(_0x205acf['getMonth']()+0x1))['slice'](-0x2),_0x11ee28=_0x205acf[_0x2e823a(0xe2)](),_0x56f99a=_0x11ee28+'-'+_0x580922+'-'+_0xb9722f;const _0x53185b=new customer_payment({'invoice':_0x46bd23,'date':_0x11ee28+'-'+_0x580922+'-'+_0xb9722f,'customer':_0x29fc4e,'reason':_0x2e823a(0x11b),'amount':_0x35af9b}),_0x3a90da=await _0x53185b[_0x2e823a(0x133)]();_0x5ec244[_0x2e823a(0x11f)]('success',_0x2e823a(0xfc)),_0x15fc73[_0x2e823a(0x116)]('/sales_return/view');}catch(_0x3d21f0){console['log'](_0x3d21f0);}}),router[a0_0x1407fd(0x10b)]('/invoice/:id',auth,async(_0x4150a2,_0x2083a6)=>{var _0x4f408f=a0_0x1407fd;try{const {username:_0xd0589b,email:_0x44d9bd,role:_0x566855}=_0x4150a2[_0x4f408f(0xe1)],_0x4e3078=_0x4150a2[_0x4f408f(0xe1)],_0x46c929=await profile[_0x4f408f(0x129)]({'email':_0x4e3078[_0x4f408f(0x112)]}),_0xf6ed73=await master_shop['find']();console[_0x4f408f(0xd8)](_0x4f408f(0x11c),_0xf6ed73);const _0x1c4e75=_0x4150a2[_0x4f408f(0x14d)]['id'],_0x5463c2=await sales_return[_0x4f408f(0xe4)](_0x1c4e75);console[_0x4f408f(0xd8)](_0x5463c2);const _0x3e9c65=await customer[_0x4f408f(0x129)]({'name':_0x5463c2['customer']});console[_0x4f408f(0xd8)](_0x3e9c65);if(_0xf6ed73[0x0]['language']=='English\x20(US)'){var _0x4aa55d=users['English'];console[_0x4f408f(0xd8)](_0x4aa55d);}else{if(_0xf6ed73[0x0][_0x4f408f(0xfb)]=='Hindi')var _0x4aa55d=users[_0x4f408f(0x14a)];else{if(_0xf6ed73[0x0]['language']==_0x4f408f(0xd9))var _0x4aa55d=users[_0x4f408f(0xd9)];else{if(_0xf6ed73[0x0][_0x4f408f(0xfb)]==_0x4f408f(0x144))var _0x4aa55d=users[_0x4f408f(0x144)];else{if(_0xf6ed73[0x0][_0x4f408f(0xfb)]==_0x4f408f(0x149))var _0x4aa55d=users[_0x4f408f(0x149)];else{if(_0xf6ed73[0x0][_0x4f408f(0xfb)]=='Portuguese\x20(BR)')var _0x4aa55d=users['Portuguese'];else{if(_0xf6ed73[0x0][_0x4f408f(0xfb)]==_0x4f408f(0xe9))var _0x4aa55d=users['Chinese'];else{if(_0xf6ed73[0x0]['language']==_0x4f408f(0x141))var _0x4aa55d=users[_0x4f408f(0xf3)];}}}}}}}_0x2083a6[_0x4f408f(0xea)](_0x4f408f(0xf2),{'success':_0x4150a2[_0x4f408f(0x11f)]('success'),'errors':_0x4150a2[_0x4f408f(0x11f)](_0x4f408f(0xdb)),'role':_0x4e3078,'profile':_0x46c929,'master_shop':_0xf6ed73,'customers':_0x3e9c65,'sales':_0x5463c2,'language':_0x4aa55d});}catch(_0x218394){console[_0x4f408f(0xd8)](_0x218394);}}),module[a0_0x1407fd(0xeb)]=router;function a0_0x1552(){var _0x5c02ff=['findById','product_details','getDate','3337896vZWWlG','invoice','Chinese','render','exports','type','due_amount','ToWarehouse','11996EBLzOF','return_sale_edit_finished','secondary_code_QA','sales_return_invoice','Arabic','165FoOiLx','purchase\x20return\x20successfully','status','slice','$product_details','customer_docs','$product_details.bin','language','payment\x20successfull','foreach\x20newproduct','Sale\x20Return','return_qty','return_sale_QA','subtract','147mnIWcX','$product_details.bay','bin','return_sale','product_stock','success','English','7299333RzByYR','28467rWQvlJ','get','../middleware/auth','/give_payment/:id','old_warehouse_data','Enabled','aggregate','sales_quantity','email','name','sales_quantity_QA','Router','redirect','secondary_code','amount','body','product_code_QA','Returned\x20Payment\x20For\x20Sale\x20Return','master','$product_details.floorlevel','date','flash','$product_details.product_code','$product_details.storage','../public/language/languages.json','$product_details.product_stock','product_name','forEach','string','types','product_name_QA','findOne','/view','/view/:id','$name','bay','Portuguese','stocks','post','primary_code_QA','for_categorize','save','$product_details.secondary_code','ToRoom','73962iUETEr','Return\x20Rooms','Portuguese\x20(BR)','find','$product_details.type','customers','back','English\x20(US)','json','sale_qty','note','Arabic\x20(ae)','stocks_QA','460366ibFDQp','Spanish','return_qty_QA','floorlevel','paid_amount','$product_details.product_name','French','Hindi','product_code','new\x20new_data','params','customer','log','German','454314JwIfnF','errors','$customer_docs','suppliers','primary_code','message','map','user','getFullYear','stock'];a0_0x1552=function(){return _0x5c02ff;};return a0_0x1552();}