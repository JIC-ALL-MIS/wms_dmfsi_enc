function a0_0x23b5(_0xced2d8,_0x42f74b){var _0xaaed46=a0_0xaaed();return a0_0x23b5=function(_0x23b59d,_0x581ca4){_0x23b59d=_0x23b59d-0x8b;var _0x12e014=_0xaaed46[_0x23b59d];return _0x12e014;},a0_0x23b5(_0xced2d8,_0x42f74b);}var a0_0x2f9b99=a0_0x23b5;(function(_0x38e09c,_0x2e9010){var _0x3e47cf=a0_0x23b5,_0x2221e6=_0x38e09c();while(!![]){try{var _0x33cf08=parseInt(_0x3e47cf(0xbc))/0x1+-parseInt(_0x3e47cf(0xff))/0x2+parseInt(_0x3e47cf(0xd6))/0x3*(-parseInt(_0x3e47cf(0x104))/0x4)+parseInt(_0x3e47cf(0xe8))/0x5*(-parseInt(_0x3e47cf(0xad))/0x6)+parseInt(_0x3e47cf(0xc6))/0x7*(parseInt(_0x3e47cf(0x95))/0x8)+parseInt(_0x3e47cf(0x97))/0x9+parseInt(_0x3e47cf(0xa8))/0xa;if(_0x33cf08===_0x2e9010)break;else _0x2221e6['push'](_0x2221e6['shift']());}catch(_0x5b6d54){_0x2221e6['push'](_0x2221e6['shift']());}}}(a0_0xaaed,0x78cbd));function a0_0xaaed(){var _0x8ffcd4=['back','string','master','email','product_name_QA','../public/language/languages.json','secondary_code','/invoice/:id','due_amount','express','save','$product_details','10QKfnaQ','/sales_return_finished/view','Arabic','old_warehouse_data','stocks_QA','purchase\x20return\x20successfully','primary_code_QA','product_name','findById','message','forEach','new\x20new_data','warehouse_name','stock','English','product_code_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Sale\x20Return','status','return_qty_QA','c_payment','sales_quantity','Finished\x20Goods','758352Febdse','Portuguese\x20(BR)','$product_details.product_stock','product_stock','errors','218712sqeTIQ','customer_docs','ToWarehouse','Spanish','Hindi','payment\x20successfull','Arabic\x20(ae)','subtract','type','sales_return_finished','secondary_code_QA','getFullYear','name','invoice','16iVVPYi','return_sale_QA','6987942lvANVO','$product_details._id','customer','$product_details.product_code','aggregate','get','/view','user','Enabled','../models/all_models','$product_details.secondary_code','Portuguese','English\x20(US)','amount','find','French','$product_details.type','959300vmBnNZ','$product_details.bay','for_categorize','redirect','body','737466FCfKjb','language','../middleware/auth','paid_amount','suppliers','sales_quantity_QA','note','old_data','render','German','/sales_return/view','primary_code','post','foreach\x20newproduct','bay','271671yaHNqp','return_qty','$product_details.rack','log','types','$product_details.storage','/give_payment/:id','findOne','slice','date','1637447xkOPie','$customer_docs','getDate','Return\x20Rooms','floorlevel','$name','return_sale','sale_qty','product_code','flash','data','/view/:id','success','bin','map','Chinese','27yrHZkh','ToRoom','Returned\x20Payment\x20For\x20Sale\x20Return','params','$product_details.bin','sales_return_invoice'];a0_0xaaed=function(){return _0x8ffcd4;};return a0_0xaaed();}const express=require(a0_0x2f9b99(0xe5)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x2f9b99(0xa0)),auth=require(a0_0x2f9b99(0xaf)),users=require(a0_0x2f9b99(0xe1));router[a0_0x2f9b99(0x9c)](a0_0x2f9b99(0x9d),auth,async(_0x9cc79,_0x3fcbc6)=>{var _0x4e2650=a0_0x2f9b99;try{const {username:_0x2f375e,email:_0x4c9e59,role:_0x263bd0}=_0x9cc79[_0x4e2650(0x9e)],_0x10afe1=_0x9cc79[_0x4e2650(0x9e)],_0x515580=await profile[_0x4e2650(0xc3)]({'email':_0x10afe1[_0x4e2650(0xdf)]}),_0x1a7e23=await master_shop[_0x4e2650(0xa5)](),_0x2ad20c=await sales_return_finished[_0x4e2650(0x9b)]([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0x4e2650(0x93),'as':_0x4e2650(0x105)}},{'$unwind':_0x4e2650(0xc7)}]);if(_0x1a7e23[0x0]['language']=='English\x20(US)'){var _0x19d3dc=users[_0x4e2650(0xf6)];console[_0x4e2650(0xbf)](_0x19d3dc);}else{if(_0x1a7e23[0x0]['language']=='Hindi')var _0x19d3dc=users[_0x4e2650(0x8b)];else{if(_0x1a7e23[0x0][_0x4e2650(0xae)]==_0x4e2650(0xb6))var _0x19d3dc=users[_0x4e2650(0xb6)];else{if(_0x1a7e23[0x0][_0x4e2650(0xae)]==_0x4e2650(0x107))var _0x19d3dc=users['Spanish'];else{if(_0x1a7e23[0x0]['language']==_0x4e2650(0xa6))var _0x19d3dc=users[_0x4e2650(0xa6)];else{if(_0x1a7e23[0x0][_0x4e2650(0xae)]==_0x4e2650(0x100))var _0x19d3dc=users['Portuguese'];else{if(_0x1a7e23[0x0][_0x4e2650(0xae)]=='Chinese')var _0x19d3dc=users[_0x4e2650(0xd5)];else{if(_0x1a7e23[0x0][_0x4e2650(0xae)]=='Arabic\x20(ae)')var _0x19d3dc=users[_0x4e2650(0xea)];}}}}}}}_0x3fcbc6[_0x4e2650(0xb5)](_0x4e2650(0x90),{'success':_0x9cc79[_0x4e2650(0xcf)](_0x4e2650(0xd2)),'errors':_0x9cc79[_0x4e2650(0xcf)]('errors'),'role':_0x10afe1,'profile':_0x515580,'master_shop':_0x1a7e23,'user':_0x2ad20c,'language':_0x19d3dc});}catch(_0xebddd0){console[_0x4e2650(0xbf)](_0xebddd0);}}),router[a0_0x2f9b99(0x9c)](a0_0x2f9b99(0xd1),auth,async(_0x1d357b,_0x529fe4)=>{var _0x5498b8=a0_0x2f9b99;try{const {username:_0x91ba8e,email:_0x1a94da,role:_0x15a029}=_0x1d357b[_0x5498b8(0x9e)],_0x5db0c3=_0x1d357b[_0x5498b8(0x9e)],_0x5b661d=await profile['findOne']({'email':_0x5db0c3[_0x5498b8(0xdf)]}),_0xe93098=await master_shop['find']();console[_0x5498b8(0xbf)]('master',_0xe93098);const _0x2f4398=_0x1d357b[_0x5498b8(0xd9)]['id'];console[_0x5498b8(0xbf)](_0x2f4398);var _0x2e21c5=[_0x5498b8(0xc9)];const _0x91ca9d=await sales_return_finished[_0x5498b8(0xf0)](_0x2f4398),_0x43c11e=await warehouse[_0x5498b8(0x9b)]([{'$match':{'name':_0x91ca9d[_0x5498b8(0x106)],'room':_0x91ca9d[_0x5498b8(0xd7)]}},{'$unwind':_0x5498b8(0xe7)},{'$group':{'_id':_0x5498b8(0x98),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x5498b8(0x101)},'bay':{'$first':_0x5498b8(0xa9)},'bin':{'$first':_0x5498b8(0xda)},'type':{'$first':_0x5498b8(0xa7)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5498b8(0xa1)},'product_code':{'$first':_0x5498b8(0x9a)},'storage':{'$first':_0x5498b8(0xc1)},'rack':{'$first':_0x5498b8(0xbe)}}}]);console[_0x5498b8(0xbf)](_0x43c11e);const _0x50b7e2=await warehouse['aggregate']([{'$match':{'status':_0x5498b8(0x9f),'warehouse_category':_0x5498b8(0xfe)}},{'$group':{'_id':_0x5498b8(0xcb),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x51803b=await warehouse['aggregate']([{'$match':{'status':_0x5498b8(0x9f),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x5498b8(0xcb),'name':{'$first':_0x5498b8(0xcb)}}},{'$sort':{'name':0x1}}]),_0x469cb3=await product[_0x5498b8(0xa5)]({});if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0xa3)){var _0x102499=users[_0x5498b8(0xf6)];console[_0x5498b8(0xbf)](_0x102499);}else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0x8b))var _0x102499=users[_0x5498b8(0x8b)];else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0xb6))var _0x102499=users[_0x5498b8(0xb6)];else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0x107))var _0x102499=users[_0x5498b8(0x107)];else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0xa6))var _0x102499=users[_0x5498b8(0xa6)];else{if(_0xe93098[0x0]['language']==_0x5498b8(0x100))var _0x102499=users[_0x5498b8(0xa2)];else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0xd5))var _0x102499=users[_0x5498b8(0xd5)];else{if(_0xe93098[0x0][_0x5498b8(0xae)]==_0x5498b8(0x8d))var _0x102499=users[_0x5498b8(0xea)];}}}}}}}_0x529fe4[_0x5498b8(0xb5)]('return_sale_edit_finished',{'success':_0x1d357b[_0x5498b8(0xcf)](_0x5498b8(0xd2)),'errors':_0x1d357b[_0x5498b8(0xcf)](_0x5498b8(0x103)),'role':_0x5db0c3,'profile':_0x5b661d,'master_shop':_0xe93098,'user':_0x91ca9d,'stock':_0x43c11e,'unit':_0x469cb3,'language':_0x102499,'warehouses':_0x50b7e2,'rooms':_0x2e21c5,'warehouse_QA':_0x51803b});}catch(_0x455db5){console[_0x5498b8(0xbf)](_0x455db5);}}),router[a0_0x2f9b99(0xb9)]('/view/:id',auth,async(_0x121bda,_0xd0eca4)=>{var _0x36c67c=a0_0x2f9b99;if(_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xaa)]=='QA')try{const _0x3ce9c1=_0x121bda[_0x36c67c(0xd9)]['id'],_0x47b3d4=await sales_return[_0x36c67c(0xc3)]({'invoice':_0x121bda[_0x36c67c(0xac)]['invoice']}),_0x5b60f7=await warehouse[_0x36c67c(0xc3)]({'name':_0x47b3d4[_0x36c67c(0x106)],'room':_0x47b3d4[_0x36c67c(0xd7)]}),{invoice:_0x1cf2c7,customer:_0x5b0afc,date:_0x502c11,warehouse_name:_0x181390,product_name:_0x243e55,primary_code:_0x126d51,secondary_code:_0x3c68bd,product_code:_0x413fd6,sales_quantity:_0x35aace,stocks:_0x588cc8,return_qty:_0x13fe3c,note:_0x3d4f34,to_warehouse_name_QA:_0x180e7a,to_Room_name_QA:_0x22e57a}=_0x121bda[_0x36c67c(0xac)];if(typeof product_name_QA==_0x36c67c(0xdd))var _0x292995=[_0x121bda['body'][_0x36c67c(0xe0)]],_0x11568e=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xee)]],_0x41b58c=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0x91)]],_0x45b2bb=[_0x121bda[_0x36c67c(0xac)]['product_code_QA']],_0x2cdd3d=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xb2)]],_0x29a363=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xec)]],_0x59a8c8=[_0x121bda['body'][_0x36c67c(0xfb)]];else var _0x292995=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xe0)]],_0x11568e=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xee)]],_0x41b58c=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0x91)]],_0x45b2bb=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xf7)]],_0x2cdd3d=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xb2)]],_0x29a363=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xec)]],_0x59a8c8=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xfb)]];const _0xcb2449=_0x292995[_0x36c67c(0xd4)](_0xa30915=>{return _0xa30915={'product_name':_0xa30915};});_0x11568e[_0x36c67c(0xf2)]((_0x198ca9,_0x52f41b)=>{_0xcb2449[_0x52f41b]['primary_code']=_0x198ca9;}),_0x41b58c[_0x36c67c(0xf2)]((_0x18689a,_0x50be57)=>{var _0xcb5b42=_0x36c67c;_0xcb2449[_0x50be57][_0xcb5b42(0xe2)]=_0x18689a;}),_0x45b2bb['forEach']((_0x1aecf4,_0x2c7a0d)=>{var _0x1ec61e=_0x36c67c;_0xcb2449[_0x2c7a0d][_0x1ec61e(0xce)]=_0x1aecf4;}),_0x2cdd3d['forEach']((_0xfcb1ad,_0x406267)=>{var _0x3f4a04=_0x36c67c;_0xcb2449[_0x406267][_0x3f4a04(0xcd)]=_0xfcb1ad;}),_0x29a363[_0x36c67c(0xf2)]((_0x27a7af,_0x504622)=>{var _0x4bc1b0=_0x36c67c;_0xcb2449[_0x504622][_0x4bc1b0(0xf5)]=_0x27a7af;}),_0x59a8c8[_0x36c67c(0xf2)]((_0x51000e,_0x2a4587)=>{var _0xc790c0=_0x36c67c;_0xcb2449[_0x2a4587][_0xc790c0(0xbd)]=_0x51000e;}),_0x47b3d4['return_sale_QA'][_0x36c67c(0xf2)](_0x2c01ca=>{var _0x181d0b=_0x36c67c;const _0x132ec7=_0x5b60f7['product_details'][_0x181d0b(0xd4)](_0x5ffa32=>{var _0x5702d9=_0x181d0b;_0x5ffa32[_0x5702d9(0xef)]==_0x2c01ca[_0x5702d9(0xef)]&&(_0x5ffa32[_0x5702d9(0x102)]=parseInt(_0x5ffa32[_0x5702d9(0x102)])+parseInt(_0x2c01ca[_0x5702d9(0xbd)]));});}),await _0x5b60f7['save'](),_0x47b3d4[_0x36c67c(0x94)]=_0x1cf2c7,_0x47b3d4[_0x36c67c(0x99)]=_0x5b0afc,_0x47b3d4[_0x36c67c(0xc5)]=_0x502c11,_0x47b3d4[_0x36c67c(0xf4)]=_0x181390,_0x47b3d4[_0x36c67c(0x96)]=_0xcb2449,_0x47b3d4[_0x36c67c(0xb3)]=_0x3d4f34,_0x47b3d4['ToWarehouse']=_0x180e7a,_0x47b3d4[_0x36c67c(0xd7)]=_0x22e57a;const _0x394cc8=await _0x47b3d4[_0x36c67c(0xe6)](),_0x5f2fe6=await c_payment_data[_0x36c67c(0xc3)]({'invoice':_0x121bda[_0x36c67c(0xac)]['invoice'],'reason':_0x36c67c(0xf9)});_0x5f2fe6[_0x36c67c(0xb1)]=_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xb1)],_0x5f2fe6[_0x36c67c(0xc5)]=_0x121bda[_0x36c67c(0xac)]['date'],await _0x5f2fe6[_0x36c67c(0xe6)](),_0x121bda[_0x36c67c(0xcf)](_0x36c67c(0xd2),_0x36c67c(0xed)),_0xd0eca4['redirect'](_0x36c67c(0xe9));}catch(_0x2d5b3d){console[_0x36c67c(0xbf)](_0x2d5b3d),_0xd0eca4['status'](0xc8)['json']({'message':_0x2d5b3d[_0x36c67c(0xf1)]});}else try{const _0x1cb4fb=_0x121bda[_0x36c67c(0xd9)]['id'];console[_0x36c67c(0xbf)](_0x1cb4fb);const _0xec1727=await sales_return[_0x36c67c(0xc3)]({'invoice':_0x121bda[_0x36c67c(0xac)]['invoice']});console[_0x36c67c(0xbf)](_0x36c67c(0xb4),_0xec1727);const _0x277b92=await warehouse[_0x36c67c(0xc3)]({'name':_0xec1727[_0x36c67c(0x106)],'room':_0xec1727[_0x36c67c(0xd7)]});console['log'](_0x36c67c(0xeb),_0x277b92);const {invoice:_0x13bdd8,customer:_0x56579a,date:_0x591c85,warehouse_name:_0x49ef7f,product_name:_0xe9ddea,primary_code:_0x381dbe,secondary_code:_0x3863a9,product_code:_0x644fb4,sales_quantity:_0xde00c7,stocks:_0x505389,return_qty:_0x3d323f,note:_0x24d559,to_warehouse_name:_0x1e1317,to_Room_name:_0x1ceb7d}=_0x121bda['body'];console[_0x36c67c(0xbf)](_0x121bda['body']);if(typeof _0xe9ddea==_0x36c67c(0xdd))var _0x292995=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xef)]],_0x11568e=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xb8)]],_0x41b58c=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xe2)]],_0x45b2bb=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xce)]],_0x2cdd3d=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xfd)]],_0x29a363=[_0x121bda[_0x36c67c(0xac)]['stocks']],_0x59a8c8=[_0x121bda['body'][_0x36c67c(0xbd)]],_0x48adac=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xbb)]],_0x5d3e3f=[_0x121bda[_0x36c67c(0xac)]['bin']],_0x2cf8b3=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xc0)]],_0x1b11a3=[_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xca)]];else var _0x292995=[..._0x121bda['body'][_0x36c67c(0xef)]],_0x11568e=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xb8)]],_0x41b58c=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xe2)]],_0x45b2bb=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xce)]],_0x2cdd3d=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xfd)]],_0x29a363=[..._0x121bda[_0x36c67c(0xac)]['stocks']],_0x59a8c8=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xbd)]],_0x48adac=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xbb)]],_0x5d3e3f=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xd3)]],_0x2cf8b3=[..._0x121bda[_0x36c67c(0xac)][_0x36c67c(0xc0)]],_0x1b11a3=[..._0x121bda['body']['floorlevel']];const _0x147e47=_0x292995[_0x36c67c(0xd4)](_0x3b6691=>{return _0x3b6691={'product_name':_0x3b6691};});_0x11568e[_0x36c67c(0xf2)]((_0x335ada,_0x205244)=>{var _0x98cc14=_0x36c67c;_0x147e47[_0x205244][_0x98cc14(0xb8)]=_0x335ada;}),_0x41b58c[_0x36c67c(0xf2)]((_0x584cd7,_0x528242)=>{_0x147e47[_0x528242]['secondary_code']=_0x584cd7;}),_0x45b2bb['forEach']((_0x109085,_0x5eddc2)=>{_0x147e47[_0x5eddc2]['product_code']=_0x109085;}),_0x2cdd3d[_0x36c67c(0xf2)]((_0x224e14,_0xd1b37a)=>{_0x147e47[_0xd1b37a]['sale_qty']=_0x224e14;}),_0x29a363[_0x36c67c(0xf2)]((_0x56820d,_0x2f2763)=>{var _0x3378b9=_0x36c67c;_0x147e47[_0x2f2763][_0x3378b9(0xf5)]=_0x56820d;}),_0x59a8c8[_0x36c67c(0xf2)]((_0x4fdac3,_0x108dd4)=>{_0x147e47[_0x108dd4]['return_qty']=_0x4fdac3;}),_0x48adac[_0x36c67c(0xf2)]((_0x7a7a8e,_0x2dc34d)=>{_0x147e47[_0x2dc34d]['bay']=_0x7a7a8e;}),_0x5d3e3f['forEach']((_0x28a3e8,_0x2ac6a8)=>{var _0x531506=_0x36c67c;_0x147e47[_0x2ac6a8][_0x531506(0xd3)]=_0x28a3e8;}),_0x2cf8b3[_0x36c67c(0xf2)]((_0x59daf6,_0x697bc7)=>{_0x147e47[_0x697bc7]['type']=_0x59daf6;}),_0x1b11a3['forEach']((_0x55b35c,_0x51a447)=>{var _0x9a81df=_0x36c67c;_0x147e47[_0x51a447][_0x9a81df(0xca)]=_0x55b35c;});var _0x36c15d=0x0;_0x147e47[_0x36c67c(0xf2)](_0x227742=>{var _0x372485=_0x36c67c;console['log'](_0x372485(0xba),_0x227742),(parseInt(_0x227742['sale_qty'])<parseInt(_0x227742[_0x372485(0xbd)])||parseInt(_0x227742[_0x372485(0xf5)])<parseInt(_0x227742[_0x372485(0xbd)])&&parseInt(_0x227742[_0x372485(0xcd)])>parseInt(_0x227742['return_qty'])||parseInt(_0x227742[_0x372485(0xbd)])==0x0)&&_0x36c15d++;});if(_0x36c15d!=0x0)return _0x121bda[_0x36c67c(0xcf)](_0x36c67c(0x103),_0x36c67c(0xf8)),_0xd0eca4['redirect'](_0x36c67c(0xdc));_0xec1727[_0x36c67c(0xcc)][_0x36c67c(0xf2)](_0x196d5e=>{const _0x2f09d6=_0x277b92['product_details']['map'](_0x3c8941=>{var _0x2830f8=a0_0x23b5;_0x3c8941[_0x2830f8(0xef)]==_0x196d5e[_0x2830f8(0xef)]&&_0x3c8941[_0x2830f8(0xca)]==_0x196d5e[_0x2830f8(0xca)]&&_0x3c8941[_0x2830f8(0x8f)]==_0x196d5e[_0x2830f8(0x8f)]&&_0x3c8941[_0x2830f8(0xd3)]==_0x196d5e['bin']&&_0x3c8941['bay']==_0x196d5e[_0x2830f8(0xbb)]&&(_0x3c8941[_0x2830f8(0x102)]=parseInt(_0x3c8941[_0x2830f8(0x102)])+parseInt(_0x196d5e[_0x2830f8(0xbd)]));});}),console[_0x36c67c(0xbf)](_0x36c67c(0xeb),_0x277b92),await _0x277b92[_0x36c67c(0xe6)](),_0xec1727[_0x36c67c(0x94)]=_0x13bdd8,_0xec1727[_0x36c67c(0x99)]=_0x56579a,_0xec1727[_0x36c67c(0xc5)]=_0x591c85,_0xec1727['warehouse_name']=_0x49ef7f,_0xec1727['return_sale']=_0x147e47,_0xec1727[_0x36c67c(0xb3)]=_0x24d559,_0xec1727['ToWarehouse']=_0x1e1317,_0xec1727[_0x36c67c(0xd7)]=_0x1ceb7d;const _0x289735=await _0xec1727['save']();console[_0x36c67c(0xbf)](_0x36c67c(0xf3),_0x289735);const _0x2db139=await c_payment_data[_0x36c67c(0xc3)]({'invoice':_0x121bda[_0x36c67c(0xac)][_0x36c67c(0x94)],'reason':_0x36c67c(0xf9)});_0x2db139[_0x36c67c(0xb1)]=_0x121bda[_0x36c67c(0xac)]['suppliers'],_0x2db139[_0x36c67c(0xc5)]=_0x121bda[_0x36c67c(0xac)][_0x36c67c(0xc5)],await _0x2db139['save'](),_0x121bda[_0x36c67c(0xcf)](_0x36c67c(0xd2),'purchase\x20return\x20successfully'),_0xd0eca4[_0x36c67c(0xab)]('/sales_return/view');}catch(_0x3ded91){console['log'](_0x3ded91),_0xd0eca4[_0x36c67c(0xfa)](0xc8)['json']({'message':_0x3ded91[_0x36c67c(0xf1)]});}}),router['post'](a0_0x2f9b99(0xc2),auth,async(_0x1678bc,_0x519904)=>{var _0x49a402=a0_0x2f9b99;try{const _0x194458=_0x1678bc[_0x49a402(0xd9)]['id'],{invoice:_0x2f2cc4,customer:_0x507d14,payable_to_customer:_0x2c4c51,paid_amount:_0x2c15c5}=_0x1678bc[_0x49a402(0xac)],_0x1ba362=await sales_return['findById'](_0x194458);console[_0x49a402(0xbf)](_0x49a402(0xd0),_0x1ba362),console[_0x49a402(0xbf)](_0x2c4c51),console['log'](_0x2c15c5);var _0x4e167c=_0x2c4c51-_0x2c15c5;console[_0x49a402(0xbf)](_0x49a402(0x8e),_0x4e167c),_0x1ba362[_0x49a402(0xb0)]=parseFloat(_0x2c15c5)+parseFloat(_0x1ba362[_0x49a402(0xb0)]),_0x1ba362[_0x49a402(0xe4)]=_0x4e167c,console[_0x49a402(0xbf)](_0x1ba362);const _0x2e4630=await _0x1ba362[_0x49a402(0xe6)]();console[_0x49a402(0xbf)](0x1b207);const _0xe971ab=await c_payment_data[_0x49a402(0xc3)]({'invoice':_0x1678bc[_0x49a402(0xac)]['invoice'],'reason':_0x49a402(0xf9)});console['log'](_0x49a402(0xfc),_0xe971ab),_0xe971ab[_0x49a402(0xa4)]=_0x4e167c,await _0xe971ab['save']();let _0xf4daa2=new Date(),_0x48f2ec=('0'+_0xf4daa2[_0x49a402(0xc8)]())['slice'](-0x2),_0x21e7a2=('0'+(_0xf4daa2['getMonth']()+0x1))[_0x49a402(0xc4)](-0x2),_0x38c08e=_0xf4daa2[_0x49a402(0x92)](),_0x18d106=_0x38c08e+'-'+_0x21e7a2+'-'+_0x48f2ec;const _0x37f6da=new customer_payment({'invoice':_0x2f2cc4,'date':_0x38c08e+'-'+_0x21e7a2+'-'+_0x48f2ec,'customer':_0x507d14,'reason':_0x49a402(0xd8),'amount':_0x2c15c5}),_0x20b13c=await _0x37f6da['save']();_0x1678bc[_0x49a402(0xcf)](_0x49a402(0xd2),_0x49a402(0x8c)),_0x519904[_0x49a402(0xab)](_0x49a402(0xb7));}catch(_0x4c6e61){console[_0x49a402(0xbf)](_0x4c6e61);}}),router[a0_0x2f9b99(0x9c)](a0_0x2f9b99(0xe3),auth,async(_0x5c038d,_0xa0a0d8)=>{var _0x552816=a0_0x2f9b99;try{const {username:_0x439aff,email:_0x543045,role:_0x330c95}=_0x5c038d[_0x552816(0x9e)],_0x28c41b=_0x5c038d[_0x552816(0x9e)],_0x39e3e2=await profile['findOne']({'email':_0x28c41b[_0x552816(0xdf)]}),_0x142ea4=await master_shop[_0x552816(0xa5)]();console[_0x552816(0xbf)](_0x552816(0xde),_0x142ea4);const _0x22c19c=_0x5c038d[_0x552816(0xd9)]['id'],_0x12a6dc=await sales_return[_0x552816(0xf0)](_0x22c19c);console[_0x552816(0xbf)](_0x12a6dc);const _0x3c14f6=await customer[_0x552816(0xc3)]({'name':_0x12a6dc[_0x552816(0x99)]});console[_0x552816(0xbf)](_0x3c14f6);if(_0x142ea4[0x0]['language']==_0x552816(0xa3)){var _0x541b77=users['English'];console['log'](_0x541b77);}else{if(_0x142ea4[0x0]['language']==_0x552816(0x8b))var _0x541b77=users['Hindi'];else{if(_0x142ea4[0x0]['language']==_0x552816(0xb6))var _0x541b77=users[_0x552816(0xb6)];else{if(_0x142ea4[0x0][_0x552816(0xae)]=='Spanish')var _0x541b77=users[_0x552816(0x107)];else{if(_0x142ea4[0x0]['language']==_0x552816(0xa6))var _0x541b77=users[_0x552816(0xa6)];else{if(_0x142ea4[0x0][_0x552816(0xae)]==_0x552816(0x100))var _0x541b77=users[_0x552816(0xa2)];else{if(_0x142ea4[0x0][_0x552816(0xae)]==_0x552816(0xd5))var _0x541b77=users[_0x552816(0xd5)];else{if(_0x142ea4[0x0][_0x552816(0xae)]=='Arabic\x20(ae)')var _0x541b77=users[_0x552816(0xea)];}}}}}}}_0xa0a0d8[_0x552816(0xb5)](_0x552816(0xdb),{'success':_0x5c038d[_0x552816(0xcf)](_0x552816(0xd2)),'errors':_0x5c038d['flash'](_0x552816(0x103)),'role':_0x28c41b,'profile':_0x39e3e2,'master_shop':_0x142ea4,'customers':_0x3c14f6,'sales':_0x12a6dc,'language':_0x541b77});}catch(_0x4322d2){console[_0x552816(0xbf)](_0x4322d2);}}),module['exports']=router;