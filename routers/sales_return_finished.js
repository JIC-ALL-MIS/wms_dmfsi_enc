function a0_0x25f2(){var _0x1dcf01=['../middleware/auth','date','getFullYear','/view','map','$product_details.bay','paid_amount','Finished\x20Goods','body','post','English','forEach','63812MjzgNV','old_warehouse_data','/invoice/:id','errors','customers','/sales_return/view','$product_details.secondary_code','suppliers','sales_quantity_QA','find','params','Arabic\x20(ae)','388920kwsaxM','master','$product_details.product_stock','$product_details','Spanish','warehouse_name','sales_quantity','due_amount','German','json','/give_payment/:id','Return\x20Rooms','stocks_QA','Enabled','string','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','product_stock','findOne','email','return_qty_QA','product_name','../public/language/languages.json','bin','Router','30cYlyYr','stocks','product_code','secondary_code','ToWarehouse','save','112581hDZDbe','secondary_code_QA','4Pviltp','primary_code','return_sale_QA','$product_details.product_name','$product_details.primary_code','product_name_QA','flash','subtract','invoice','message','types','render','redirect','$product_details.type','getDate','bay','230877ZWtZFO','aggregate','112bNbbEn','primary_code_QA','language','$product_details.storage','return_sale_edit_finished','Chinese','Portuguese','status','user','/sales_return_finished/view','c_payment','2026101fBPTrO','stock','return_qty','$name','French','English\x20(US)','sale_qty','/view/:id','$product_details.bin','$product_details.product_code','product_details','note','foreach\x20newproduct','$product_details.rack','sales_return_invoice','563706kOkrMN','slice','findById','ToRoom','for_categorize','customer','get','Portuguese\x20(BR)','floorlevel','46207cYDLPt','log','55HKluGD','product_code_QA','back','amount','type','success','return_sale','Hindi','../models/all_models','Arabic','Sale\x20Return','new\x20new_data','purchase\x20return\x20successfully','getMonth','QA\x20Warehouse'];a0_0x25f2=function(){return _0x1dcf01;};return a0_0x25f2();}function a0_0x4c8b(_0x575a82,_0x5ceb48){var _0x25f2e0=a0_0x25f2();return a0_0x4c8b=function(_0x4c8bcd,_0x2325b3){_0x4c8bcd=_0x4c8bcd-0x181;var _0x41c537=_0x25f2e0[_0x4c8bcd];return _0x41c537;},a0_0x4c8b(_0x575a82,_0x5ceb48);}var a0_0x34eea1=a0_0x4c8b;(function(_0xd24825,_0x1b9f07){var _0x2e595f=a0_0x4c8b,_0x13a61b=_0xd24825();while(!![]){try{var _0x4733ef=parseInt(_0x2e595f(0x1a6))/0x1*(-parseInt(_0x2e595f(0x1a8))/0x2)+-parseInt(_0x2e595f(0x1d4))/0x3+-parseInt(_0x2e595f(0x1fa))/0x4*(-parseInt(_0x2e595f(0x1df))/0x5)+-parseInt(_0x2e595f(0x188))/0x6+-parseInt(_0x2e595f(0x1dd))/0x7*(parseInt(_0x2e595f(0x1ba))/0x8)+-parseInt(_0x2e595f(0x1b8))/0x9+-parseInt(_0x2e595f(0x1a0))/0xa*(-parseInt(_0x2e595f(0x1c5))/0xb);if(_0x4733ef===_0x1b9f07)break;else _0x13a61b['push'](_0x13a61b['shift']());}catch(_0x30783a){_0x13a61b['push'](_0x13a61b['shift']());}}}(a0_0x25f2,0x20409));const express=require('express'),app=express(),router=express[a0_0x34eea1(0x19f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x34eea1(0x1e7)),auth=require(a0_0x34eea1(0x1ee)),users=require(a0_0x34eea1(0x19d));router[a0_0x34eea1(0x1da)](a0_0x34eea1(0x1f1),auth,async(_0x2fba1c,_0x1b047c)=>{var _0xdbea28=a0_0x34eea1;try{const {username:_0x2abe1e,email:_0x1f7cc6,role:_0x42cc8f}=_0x2fba1c[_0xdbea28(0x1c2)],_0x4c6f22=_0x2fba1c['user'],_0x5f0dff=await profile[_0xdbea28(0x199)]({'email':_0x4c6f22[_0xdbea28(0x19a)]}),_0x12bbde=await master_shop[_0xdbea28(0x185)](),_0x4e9d5e=await sales_return_finished[_0xdbea28(0x1b9)]([{'$lookup':{'from':_0xdbea28(0x1fe),'localField':_0xdbea28(0x1d9),'foreignField':'name','as':'customer_docs'}},{'$unwind':'$customer_docs'}]);if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x1ca)){var _0x19e097=users['English'];console[_0xdbea28(0x1de)](_0x19e097);}else{if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x1e6))var _0x19e097=users[_0xdbea28(0x1e6)];else{if(_0x12bbde[0x0]['language']=='German')var _0x19e097=users[_0xdbea28(0x190)];else{if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x18c))var _0x19e097=users['Spanish'];else{if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x1c9))var _0x19e097=users['French'];else{if(_0x12bbde[0x0]['language']==_0xdbea28(0x1db))var _0x19e097=users[_0xdbea28(0x1c0)];else{if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x1bf))var _0x19e097=users[_0xdbea28(0x1bf)];else{if(_0x12bbde[0x0][_0xdbea28(0x1bc)]==_0xdbea28(0x187))var _0x19e097=users[_0xdbea28(0x1e8)];}}}}}}}_0x1b047c[_0xdbea28(0x1b3)]('sales_return_finished',{'success':_0x2fba1c[_0xdbea28(0x1ae)](_0xdbea28(0x1e4)),'errors':_0x2fba1c[_0xdbea28(0x1ae)](_0xdbea28(0x1fd)),'role':_0x4c6f22,'profile':_0x5f0dff,'master_shop':_0x12bbde,'user':_0x4e9d5e,'language':_0x19e097});}catch(_0x1368b6){console['log'](_0x1368b6);}}),router[a0_0x34eea1(0x1da)](a0_0x34eea1(0x1cc),auth,async(_0x2de951,_0x2dcb72)=>{var _0x37acbd=a0_0x34eea1;try{const {username:_0x190c01,email:_0x52852c,role:_0x545f3f}=_0x2de951[_0x37acbd(0x1c2)],_0x1bdbda=_0x2de951[_0x37acbd(0x1c2)],_0x569d12=await profile[_0x37acbd(0x199)]({'email':_0x1bdbda[_0x37acbd(0x19a)]}),_0x265657=await master_shop['find']();console[_0x37acbd(0x1de)](_0x37acbd(0x189),_0x265657);const _0x501f76=_0x2de951[_0x37acbd(0x186)]['id'];console[_0x37acbd(0x1de)](_0x501f76);var _0x113674=[_0x37acbd(0x193)];const _0x3afe06=await sales_return_finished[_0x37acbd(0x1d6)](_0x501f76),_0x232578=await warehouse['aggregate']([{'$match':{'name':_0x3afe06[_0x37acbd(0x1a4)],'room':_0x3afe06[_0x37acbd(0x1d7)]}},{'$unwind':_0x37acbd(0x18b)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x37acbd(0x1ab)},'product_stock':{'$first':_0x37acbd(0x18a)},'bay':{'$first':_0x37acbd(0x1f3)},'bin':{'$first':_0x37acbd(0x1cd)},'type':{'$first':_0x37acbd(0x1b5)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x37acbd(0x1ac)},'secondary_code':{'$first':_0x37acbd(0x182)},'product_code':{'$first':_0x37acbd(0x1ce)},'storage':{'$first':_0x37acbd(0x1bd)},'rack':{'$first':_0x37acbd(0x1d2)}}}]);console[_0x37acbd(0x1de)](_0x232578);const _0x2edc60=await warehouse[_0x37acbd(0x1b9)]([{'$match':{'status':'Enabled','warehouse_category':_0x37acbd(0x1f5)}},{'$group':{'_id':'$name','name':{'$first':_0x37acbd(0x1c8)}}},{'$sort':{'name':0x1}}]),_0x5abdb4=await warehouse[_0x37acbd(0x1b9)]([{'$match':{'status':_0x37acbd(0x195),'name':_0x37acbd(0x1ed)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x2c7933=await product[_0x37acbd(0x185)]({});if(_0x265657[0x0][_0x37acbd(0x1bc)]==_0x37acbd(0x1ca)){var _0x1ad4a2=users[_0x37acbd(0x1f8)];console[_0x37acbd(0x1de)](_0x1ad4a2);}else{if(_0x265657[0x0]['language']==_0x37acbd(0x1e6))var _0x1ad4a2=users[_0x37acbd(0x1e6)];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]==_0x37acbd(0x190))var _0x1ad4a2=users['German'];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]==_0x37acbd(0x18c))var _0x1ad4a2=users[_0x37acbd(0x18c)];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]==_0x37acbd(0x1c9))var _0x1ad4a2=users[_0x37acbd(0x1c9)];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]=='Portuguese\x20(BR)')var _0x1ad4a2=users[_0x37acbd(0x1c0)];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]=='Chinese')var _0x1ad4a2=users[_0x37acbd(0x1bf)];else{if(_0x265657[0x0][_0x37acbd(0x1bc)]==_0x37acbd(0x187))var _0x1ad4a2=users[_0x37acbd(0x1e8)];}}}}}}}_0x2dcb72['render'](_0x37acbd(0x1be),{'success':_0x2de951[_0x37acbd(0x1ae)](_0x37acbd(0x1e4)),'errors':_0x2de951[_0x37acbd(0x1ae)](_0x37acbd(0x1fd)),'role':_0x1bdbda,'profile':_0x569d12,'master_shop':_0x265657,'user':_0x3afe06,'stock':_0x232578,'unit':_0x2c7933,'language':_0x1ad4a2,'warehouses':_0x2edc60,'rooms':_0x113674,'warehouse_QA':_0x5abdb4});}catch(_0x221e68){console[_0x37acbd(0x1de)](_0x221e68);}}),router[a0_0x34eea1(0x1f7)](a0_0x34eea1(0x1cc),auth,async(_0x48644d,_0x4f2db9)=>{var _0x377e58=a0_0x34eea1;if(_0x48644d['body'][_0x377e58(0x1d8)]=='QA')try{const _0x122779=_0x48644d['params']['id'],_0x1844c2=await sales_return[_0x377e58(0x199)]({'invoice':_0x48644d['body'][_0x377e58(0x1b0)]}),_0xd10562=await warehouse[_0x377e58(0x199)]({'name':_0x1844c2[_0x377e58(0x1a4)],'room':_0x1844c2[_0x377e58(0x1d7)]}),{invoice:_0x587900,customer:_0x5a1db6,date:_0xb4c903,warehouse_name:_0x4a4ced,product_name:_0x1b74b6,primary_code:_0x51d832,secondary_code:_0x75b355,product_code:_0x1f85a7,sales_quantity:_0xa25f9,stocks:_0x52e3cc,return_qty:_0x400e9e,note:_0x4cead3,to_warehouse_name_QA:_0xec2c10,to_Room_name_QA:_0x3903e1}=_0x48644d[_0x377e58(0x1f6)];if(typeof product_name_QA=='string')var _0x2727c9=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1ad)]],_0x53e9bc=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1bb)]],_0x2f7fc3=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1a7)]],_0x30b8b3=[_0x48644d[_0x377e58(0x1f6)]['product_code_QA']],_0x5cec4a=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x184)]],_0x13bc0b=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x194)]],_0x341e5c=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19b)]];else var _0x2727c9=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1ad)]],_0x53e9bc=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1bb)]],_0x2f7fc3=[..._0x48644d['body'][_0x377e58(0x1a7)]],_0x30b8b3=[..._0x48644d['body'][_0x377e58(0x1e0)]],_0x5cec4a=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x184)]],_0x13bc0b=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x194)]],_0x341e5c=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19b)]];const _0x4ed343=_0x2727c9['map'](_0x4f0221=>{return _0x4f0221={'product_name':_0x4f0221};});_0x53e9bc[_0x377e58(0x1f9)]((_0x4923e5,_0x853fbf)=>{var _0x5cae94=_0x377e58;_0x4ed343[_0x853fbf][_0x5cae94(0x1a9)]=_0x4923e5;}),_0x2f7fc3['forEach']((_0x536222,_0x52e203)=>{var _0x535788=_0x377e58;_0x4ed343[_0x52e203][_0x535788(0x1a3)]=_0x536222;}),_0x30b8b3[_0x377e58(0x1f9)]((_0x48e916,_0x1bf1d2)=>{var _0x359268=_0x377e58;_0x4ed343[_0x1bf1d2][_0x359268(0x1a2)]=_0x48e916;}),_0x5cec4a['forEach']((_0x41935b,_0x491edf)=>{var _0x532946=_0x377e58;_0x4ed343[_0x491edf][_0x532946(0x1cb)]=_0x41935b;}),_0x13bc0b[_0x377e58(0x1f9)]((_0x3890a7,_0x552612)=>{_0x4ed343[_0x552612]['stock']=_0x3890a7;}),_0x341e5c[_0x377e58(0x1f9)]((_0x392ad3,_0x1cd3e8)=>{var _0x47d41b=_0x377e58;_0x4ed343[_0x1cd3e8][_0x47d41b(0x1c7)]=_0x392ad3;}),_0x1844c2['return_sale_QA'][_0x377e58(0x1f9)](_0x414745=>{var _0x2a2a39=_0x377e58;const _0x2f0afd=_0xd10562[_0x2a2a39(0x1cf)][_0x2a2a39(0x1f2)](_0x52c550=>{var _0x1bf2d6=_0x2a2a39;_0x52c550[_0x1bf2d6(0x19c)]==_0x414745[_0x1bf2d6(0x19c)]&&(_0x52c550[_0x1bf2d6(0x198)]=parseInt(_0x52c550['product_stock'])+parseInt(_0x414745['return_qty']));});}),await _0xd10562['save'](),_0x1844c2[_0x377e58(0x1b0)]=_0x587900,_0x1844c2[_0x377e58(0x1d9)]=_0x5a1db6,_0x1844c2[_0x377e58(0x1ef)]=_0xb4c903,_0x1844c2['warehouse_name']=_0x4a4ced,_0x1844c2[_0x377e58(0x1aa)]=_0x4ed343,_0x1844c2[_0x377e58(0x1d0)]=_0x4cead3,_0x1844c2[_0x377e58(0x1a4)]=_0xec2c10,_0x1844c2[_0x377e58(0x1d7)]=_0x3903e1;const _0x526429=await _0x1844c2['save'](),_0x2f54cd=await c_payment_data[_0x377e58(0x199)]({'invoice':_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1b0)],'reason':_0x377e58(0x1e9)});_0x2f54cd[_0x377e58(0x183)]=_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x183)],_0x2f54cd['date']=_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1ef)],await _0x2f54cd['save'](),_0x48644d['flash']('success',_0x377e58(0x1eb)),_0x4f2db9['redirect'](_0x377e58(0x1c3));}catch(_0x428229){console[_0x377e58(0x1de)](_0x428229),_0x4f2db9[_0x377e58(0x1c1)](0xc8)['json']({'message':_0x428229[_0x377e58(0x1b1)]});}else try{const _0x2cc9d9=_0x48644d[_0x377e58(0x186)]['id'];console[_0x377e58(0x1de)](_0x2cc9d9);const _0x551da4=await sales_return[_0x377e58(0x199)]({'invoice':_0x48644d[_0x377e58(0x1f6)]['invoice']});console[_0x377e58(0x1de)]('old_data',_0x551da4);const _0x3e1570=await warehouse[_0x377e58(0x199)]({'name':_0x551da4['ToWarehouse'],'room':_0x551da4[_0x377e58(0x1d7)]});console[_0x377e58(0x1de)](_0x377e58(0x1fb),_0x3e1570);const {invoice:_0x2f0076,customer:_0x52ca22,date:_0x835dd2,warehouse_name:_0x36a2e9,product_name:_0x232e2c,primary_code:_0x4d9ffa,secondary_code:_0x1d6ec8,product_code:_0x34fda3,sales_quantity:_0x21a242,stocks:_0x30f1f9,return_qty:_0x281909,note:_0x36ffd7,to_warehouse_name:_0x2d92d2,to_Room_name:_0x5532f6}=_0x48644d['body'];console['log'](_0x48644d[_0x377e58(0x1f6)]);if(typeof _0x232e2c==_0x377e58(0x196))var _0x2727c9=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19c)]],_0x53e9bc=[_0x48644d['body']['primary_code']],_0x2f7fc3=[_0x48644d['body']['secondary_code']],_0x30b8b3=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1a2)]],_0x5cec4a=[_0x48644d['body'][_0x377e58(0x18e)]],_0x13bc0b=[_0x48644d[_0x377e58(0x1f6)]['stocks']],_0x341e5c=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1c7)]],_0x3d141f=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1b7)]],_0xa60f74=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19e)]],_0x53b5c1=[_0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1b2)]],_0x40d4fa=[_0x48644d['body'][_0x377e58(0x1dc)]];else var _0x2727c9=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19c)]],_0x53e9bc=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1a9)]],_0x2f7fc3=[..._0x48644d[_0x377e58(0x1f6)]['secondary_code']],_0x30b8b3=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1a2)]],_0x5cec4a=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x18e)]],_0x13bc0b=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1a1)]],_0x341e5c=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1c7)]],_0x3d141f=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1b7)]],_0xa60f74=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x19e)]],_0x53b5c1=[..._0x48644d['body']['types']],_0x40d4fa=[..._0x48644d[_0x377e58(0x1f6)][_0x377e58(0x1dc)]];const _0x1b06b3=_0x2727c9[_0x377e58(0x1f2)](_0x93dd92=>{return _0x93dd92={'product_name':_0x93dd92};});_0x53e9bc[_0x377e58(0x1f9)]((_0x285500,_0x4c07b7)=>{var _0x2a5b08=_0x377e58;_0x1b06b3[_0x4c07b7][_0x2a5b08(0x1a9)]=_0x285500;}),_0x2f7fc3[_0x377e58(0x1f9)]((_0x1b795a,_0x5b8faf)=>{var _0x5aaf0f=_0x377e58;_0x1b06b3[_0x5b8faf][_0x5aaf0f(0x1a3)]=_0x1b795a;}),_0x30b8b3[_0x377e58(0x1f9)]((_0x1b88c5,_0x4f6986)=>{_0x1b06b3[_0x4f6986]['product_code']=_0x1b88c5;}),_0x5cec4a[_0x377e58(0x1f9)]((_0x4a2181,_0x178e5a)=>{var _0x529c5b=_0x377e58;_0x1b06b3[_0x178e5a][_0x529c5b(0x1cb)]=_0x4a2181;}),_0x13bc0b[_0x377e58(0x1f9)]((_0x14ddfa,_0x2f3fa0)=>{var _0x525bb6=_0x377e58;_0x1b06b3[_0x2f3fa0][_0x525bb6(0x1c6)]=_0x14ddfa;}),_0x341e5c[_0x377e58(0x1f9)]((_0x4565ba,_0x56f9d0)=>{var _0xa1696=_0x377e58;_0x1b06b3[_0x56f9d0][_0xa1696(0x1c7)]=_0x4565ba;}),_0x3d141f[_0x377e58(0x1f9)]((_0x2f4469,_0x15f4b8)=>{var _0x1feb8b=_0x377e58;_0x1b06b3[_0x15f4b8][_0x1feb8b(0x1b7)]=_0x2f4469;}),_0xa60f74[_0x377e58(0x1f9)]((_0xb5249b,_0x138717)=>{var _0x546a35=_0x377e58;_0x1b06b3[_0x138717][_0x546a35(0x19e)]=_0xb5249b;}),_0x53b5c1[_0x377e58(0x1f9)]((_0x25ae4e,_0x109730)=>{_0x1b06b3[_0x109730]['type']=_0x25ae4e;}),_0x40d4fa[_0x377e58(0x1f9)]((_0x3fb677,_0x256f65)=>{_0x1b06b3[_0x256f65]['floorlevel']=_0x3fb677;});var _0x91bf55=0x0;_0x1b06b3['forEach'](_0xa1def8=>{var _0x5643cc=_0x377e58;console[_0x5643cc(0x1de)](_0x5643cc(0x1d1),_0xa1def8),(parseInt(_0xa1def8[_0x5643cc(0x1cb)])<parseInt(_0xa1def8[_0x5643cc(0x1c7)])||parseInt(_0xa1def8[_0x5643cc(0x1c6)])<parseInt(_0xa1def8[_0x5643cc(0x1c7)])&&parseInt(_0xa1def8[_0x5643cc(0x1cb)])>parseInt(_0xa1def8[_0x5643cc(0x1c7)])||parseInt(_0xa1def8[_0x5643cc(0x1c7)])==0x0)&&_0x91bf55++;});if(_0x91bf55!=0x0)return _0x48644d[_0x377e58(0x1ae)](_0x377e58(0x1fd),_0x377e58(0x197)),_0x4f2db9[_0x377e58(0x1b4)](_0x377e58(0x1e1));_0x551da4[_0x377e58(0x1e5)][_0x377e58(0x1f9)](_0x85d771=>{var _0x5f006e=_0x377e58;const _0x22e6a9=_0x3e1570[_0x5f006e(0x1cf)][_0x5f006e(0x1f2)](_0x2a1e5a=>{var _0x1f12c4=_0x5f006e;_0x2a1e5a[_0x1f12c4(0x19c)]==_0x85d771[_0x1f12c4(0x19c)]&&_0x2a1e5a[_0x1f12c4(0x1dc)]==_0x85d771[_0x1f12c4(0x1dc)]&&_0x2a1e5a[_0x1f12c4(0x1e3)]==_0x85d771['type']&&_0x2a1e5a[_0x1f12c4(0x19e)]==_0x85d771[_0x1f12c4(0x19e)]&&_0x2a1e5a[_0x1f12c4(0x1b7)]==_0x85d771['bay']&&(_0x2a1e5a['product_stock']=parseInt(_0x2a1e5a[_0x1f12c4(0x198)])+parseInt(_0x85d771[_0x1f12c4(0x1c7)]));});}),console['log'](_0x377e58(0x1fb),_0x3e1570),await _0x3e1570[_0x377e58(0x1a5)](),_0x551da4['invoice']=_0x2f0076,_0x551da4[_0x377e58(0x1d9)]=_0x52ca22,_0x551da4[_0x377e58(0x1ef)]=_0x835dd2,_0x551da4[_0x377e58(0x18d)]=_0x36a2e9,_0x551da4[_0x377e58(0x1e5)]=_0x1b06b3,_0x551da4[_0x377e58(0x1d0)]=_0x36ffd7,_0x551da4[_0x377e58(0x1a4)]=_0x2d92d2,_0x551da4[_0x377e58(0x1d7)]=_0x5532f6;const _0x105a3c=await _0x551da4[_0x377e58(0x1a5)]();console['log'](_0x377e58(0x1ea),_0x105a3c);const _0x103687=await c_payment_data[_0x377e58(0x199)]({'invoice':_0x48644d[_0x377e58(0x1f6)]['invoice'],'reason':_0x377e58(0x1e9)});_0x103687[_0x377e58(0x183)]=_0x48644d['body'][_0x377e58(0x183)],_0x103687[_0x377e58(0x1ef)]=_0x48644d[_0x377e58(0x1f6)]['date'],await _0x103687[_0x377e58(0x1a5)](),_0x48644d[_0x377e58(0x1ae)](_0x377e58(0x1e4),'purchase\x20return\x20successfully'),_0x4f2db9[_0x377e58(0x1b4)](_0x377e58(0x181));}catch(_0x1e34ae){console[_0x377e58(0x1de)](_0x1e34ae),_0x4f2db9[_0x377e58(0x1c1)](0xc8)[_0x377e58(0x191)]({'message':_0x1e34ae[_0x377e58(0x1b1)]});}}),router[a0_0x34eea1(0x1f7)](a0_0x34eea1(0x192),auth,async(_0x4ff35b,_0x111f42)=>{var _0x4923a9=a0_0x34eea1;try{const _0x2dbb54=_0x4ff35b[_0x4923a9(0x186)]['id'],{invoice:_0x26688b,customer:_0x29503d,payable_to_customer:_0x29b1a0,paid_amount:_0x51b8ba}=_0x4ff35b[_0x4923a9(0x1f6)],_0x32ff0f=await sales_return[_0x4923a9(0x1d6)](_0x2dbb54);console['log']('data',_0x32ff0f),console[_0x4923a9(0x1de)](_0x29b1a0),console['log'](_0x51b8ba);var _0x1dcc37=_0x29b1a0-_0x51b8ba;console[_0x4923a9(0x1de)](_0x4923a9(0x1af),_0x1dcc37),_0x32ff0f[_0x4923a9(0x1f4)]=parseFloat(_0x51b8ba)+parseFloat(_0x32ff0f[_0x4923a9(0x1f4)]),_0x32ff0f[_0x4923a9(0x18f)]=_0x1dcc37,console['log'](_0x32ff0f);const _0x3e118d=await _0x32ff0f['save']();console[_0x4923a9(0x1de)](0x1b207);const _0x51ec38=await c_payment_data[_0x4923a9(0x199)]({'invoice':_0x4ff35b[_0x4923a9(0x1f6)][_0x4923a9(0x1b0)],'reason':_0x4923a9(0x1e9)});console[_0x4923a9(0x1de)](_0x4923a9(0x1c4),_0x51ec38),_0x51ec38[_0x4923a9(0x1e2)]=_0x1dcc37,await _0x51ec38[_0x4923a9(0x1a5)]();let _0x28b3ca=new Date(),_0x46f835=('0'+_0x28b3ca[_0x4923a9(0x1b6)]())['slice'](-0x2),_0x21ac5=('0'+(_0x28b3ca[_0x4923a9(0x1ec)]()+0x1))[_0x4923a9(0x1d5)](-0x2),_0x508b73=_0x28b3ca[_0x4923a9(0x1f0)](),_0x44597e=_0x508b73+'-'+_0x21ac5+'-'+_0x46f835;const _0x1c23af=new customer_payment({'invoice':_0x26688b,'date':_0x508b73+'-'+_0x21ac5+'-'+_0x46f835,'customer':_0x29503d,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x51b8ba}),_0x4a99a6=await _0x1c23af[_0x4923a9(0x1a5)]();_0x4ff35b[_0x4923a9(0x1ae)](_0x4923a9(0x1e4),'payment\x20successfull'),_0x111f42['redirect']('/sales_return/view');}catch(_0x13149b){console[_0x4923a9(0x1de)](_0x13149b);}}),router[a0_0x34eea1(0x1da)](a0_0x34eea1(0x1fc),auth,async(_0x51e415,_0x51409e)=>{var _0x30c232=a0_0x34eea1;try{const {username:_0x565298,email:_0x2eebb5,role:_0x50e100}=_0x51e415[_0x30c232(0x1c2)],_0x2b1b5a=_0x51e415[_0x30c232(0x1c2)],_0x1c88d6=await profile[_0x30c232(0x199)]({'email':_0x2b1b5a[_0x30c232(0x19a)]}),_0x2c83bb=await master_shop[_0x30c232(0x185)]();console[_0x30c232(0x1de)](_0x30c232(0x189),_0x2c83bb);const _0x137507=_0x51e415[_0x30c232(0x186)]['id'],_0x5d34d2=await sales_return[_0x30c232(0x1d6)](_0x137507);console['log'](_0x5d34d2);const _0xb5e47=await customer['findOne']({'name':_0x5d34d2[_0x30c232(0x1d9)]});console[_0x30c232(0x1de)](_0xb5e47);if(_0x2c83bb[0x0][_0x30c232(0x1bc)]==_0x30c232(0x1ca)){var _0x28ee8d=users['English'];console[_0x30c232(0x1de)](_0x28ee8d);}else{if(_0x2c83bb[0x0][_0x30c232(0x1bc)]==_0x30c232(0x1e6))var _0x28ee8d=users['Hindi'];else{if(_0x2c83bb[0x0][_0x30c232(0x1bc)]==_0x30c232(0x190))var _0x28ee8d=users[_0x30c232(0x190)];else{if(_0x2c83bb[0x0][_0x30c232(0x1bc)]=='Spanish')var _0x28ee8d=users[_0x30c232(0x18c)];else{if(_0x2c83bb[0x0][_0x30c232(0x1bc)]==_0x30c232(0x1c9))var _0x28ee8d=users[_0x30c232(0x1c9)];else{if(_0x2c83bb[0x0]['language']=='Portuguese\x20(BR)')var _0x28ee8d=users[_0x30c232(0x1c0)];else{if(_0x2c83bb[0x0]['language']==_0x30c232(0x1bf))var _0x28ee8d=users['Chinese'];else{if(_0x2c83bb[0x0][_0x30c232(0x1bc)]=='Arabic\x20(ae)')var _0x28ee8d=users['Arabic'];}}}}}}}_0x51409e[_0x30c232(0x1b3)](_0x30c232(0x1d3),{'success':_0x51e415['flash'](_0x30c232(0x1e4)),'errors':_0x51e415[_0x30c232(0x1ae)](_0x30c232(0x1fd)),'role':_0x2b1b5a,'profile':_0x1c88d6,'master_shop':_0x2c83bb,'customers':_0xb5e47,'sales':_0x5d34d2,'language':_0x28ee8d});}catch(_0x949ecb){console[_0x30c232(0x1de)](_0x949ecb);}}),module['exports']=router;