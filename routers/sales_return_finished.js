function a0_0x42a6(_0x4b39b9,_0x537a0a){var _0x3acf45=a0_0x3acf();return a0_0x42a6=function(_0x42a6d2,_0x329eb1){_0x42a6d2=_0x42a6d2-0x141;var _0xb2f55=_0x3acf45[_0x42a6d2];return _0xb2f55;},a0_0x42a6(_0x4b39b9,_0x537a0a);}var a0_0xd7a3cd=a0_0x42a6;(function(_0x19fa52,_0x37527b){var _0x4ba5c4=a0_0x42a6,_0x1ccd1c=_0x19fa52();while(!![]){try{var _0x18c5c3=parseInt(_0x4ba5c4(0x18a))/0x1+parseInt(_0x4ba5c4(0x14d))/0x2+-parseInt(_0x4ba5c4(0x191))/0x3+-parseInt(_0x4ba5c4(0x161))/0x4+-parseInt(_0x4ba5c4(0x164))/0x5+-parseInt(_0x4ba5c4(0x18b))/0x6+parseInt(_0x4ba5c4(0x17a))/0x7;if(_0x18c5c3===_0x37527b)break;else _0x1ccd1c['push'](_0x1ccd1c['shift']());}catch(_0x1e0d98){_0x1ccd1c['push'](_0x1ccd1c['shift']());}}}(a0_0x3acf,0x3987d));function a0_0x3acf(){var _0x28c4eb=['$product_details.bay','slice','Portuguese\x20(BR)','aggregate','json','Spanish','German','email','body','new\x20new_data','paid_amount','$product_details.storage','floorlevel','getFullYear','../middleware/auth','subtract','invoice','primary_code_QA','return_qty','/sales_return/view','ToWarehouse','forEach','Arabic','getMonth','c_payment','name','Hindi','primary_code','279506uuSTVI','foreach\x20newproduct','log','/view','English\x20(US)','product_name','string','user','Arabic\x20(ae)','product_code','/view/:id','return_sale_QA','customer','errors','ToRoom','date','product_details','types','sale_qty','payment\x20successfull','231404rPncje','express','return_qty_QA','1606930ijgsCD','$product_details.secondary_code','bay','product_stock','$product_details.primary_code','$name','$product_details.product_code','$product_details.floorlevel','QA\x20Warehouse','render','data','customer_docs','return_sale_edit_finished','purchase\x20return\x20successfully','for_categorize','message','old_warehouse_data','language','Chinese','sales_quantity','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','sales_return_invoice','3172596ohmCag','warehouse_name','params','../models/all_models','status','stock','amount','success','stocks_QA','secondary_code_QA','findOne','findById','$product_details.product_stock','French','note','flash','370587QWtdUs','100536ihxlzz','/invoice/:id','English','secondary_code','master','Finished\x20Goods','995790OYwRBb','sales_return_finished','$product_details','redirect','Portuguese','$product_details.rack','Returned\x20Payment\x20For\x20Sale\x20Return','Router','getDate','find','old_data','return_sale','due_amount','suppliers','map','product_code_QA','save','bin','get','type','stocks','Sale\x20Return'];a0_0x3acf=function(){return _0x28c4eb;};return a0_0x3acf();}const express=require(a0_0xd7a3cd(0x162)),app=express(),router=express[a0_0xd7a3cd(0x198)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0xd7a3cd(0x17d)),auth=require(a0_0xd7a3cd(0x1b5)),users=require('../public/language/languages.json');router[a0_0xd7a3cd(0x1a3)](a0_0xd7a3cd(0x150),auth,async(_0x4101f3,_0x1c332c)=>{var _0x4104fa=a0_0xd7a3cd;try{const {username:_0x3f2596,email:_0x2e263e,role:_0x56655a}=_0x4101f3[_0x4104fa(0x154)],_0x39ec66=_0x4101f3[_0x4104fa(0x154)],_0xbf1f18=await profile[_0x4104fa(0x184)]({'email':_0x39ec66[_0x4104fa(0x1ae)]}),_0x5ed64d=await master_shop[_0x4104fa(0x19a)](),_0xc6e710=await sales_return_finished[_0x4104fa(0x1aa)]([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0x4104fa(0x14a),'as':_0x4104fa(0x16f)}},{'$unwind':'$customer_docs'}]);if(_0x5ed64d[0x0][_0x4104fa(0x175)]==_0x4104fa(0x151)){var _0x21008e=users[_0x4104fa(0x18d)];console[_0x4104fa(0x14f)](_0x21008e);}else{if(_0x5ed64d[0x0]['language']==_0x4104fa(0x14b))var _0x21008e=users[_0x4104fa(0x14b)];else{if(_0x5ed64d[0x0][_0x4104fa(0x175)]=='German')var _0x21008e=users['German'];else{if(_0x5ed64d[0x0][_0x4104fa(0x175)]=='Spanish')var _0x21008e=users['Spanish'];else{if(_0x5ed64d[0x0][_0x4104fa(0x175)]==_0x4104fa(0x187))var _0x21008e=users[_0x4104fa(0x187)];else{if(_0x5ed64d[0x0][_0x4104fa(0x175)]==_0x4104fa(0x1a9))var _0x21008e=users[_0x4104fa(0x195)];else{if(_0x5ed64d[0x0][_0x4104fa(0x175)]==_0x4104fa(0x176))var _0x21008e=users['Chinese'];else{if(_0x5ed64d[0x0]['language']==_0x4104fa(0x155))var _0x21008e=users[_0x4104fa(0x147)];}}}}}}}_0x1c332c[_0x4104fa(0x16d)](_0x4104fa(0x192),{'success':_0x4101f3[_0x4104fa(0x189)](_0x4104fa(0x181)),'errors':_0x4101f3[_0x4104fa(0x189)](_0x4104fa(0x15a)),'role':_0x39ec66,'profile':_0xbf1f18,'master_shop':_0x5ed64d,'user':_0xc6e710,'language':_0x21008e});}catch(_0x3e20bd){console[_0x4104fa(0x14f)](_0x3e20bd);}}),router[a0_0xd7a3cd(0x1a3)](a0_0xd7a3cd(0x157),auth,async(_0x5b1f11,_0x534107)=>{var _0x19273b=a0_0xd7a3cd;try{const {username:_0x17f253,email:_0x929981,role:_0x391de5}=_0x5b1f11['user'],_0x5dca81=_0x5b1f11[_0x19273b(0x154)],_0x29b521=await profile[_0x19273b(0x184)]({'email':_0x5dca81[_0x19273b(0x1ae)]}),_0x4f6449=await master_shop[_0x19273b(0x19a)]();console[_0x19273b(0x14f)](_0x19273b(0x18f),_0x4f6449);const _0xc5d7fb=_0x5b1f11['params']['id'];console[_0x19273b(0x14f)](_0xc5d7fb);var _0x551ece=['Return\x20Rooms'];const _0x8326af=await sales_return_finished['findById'](_0xc5d7fb),_0x2c8196=await warehouse[_0x19273b(0x1aa)]([{'$match':{'name':_0x8326af['ToWarehouse'],'room':_0x8326af[_0x19273b(0x15b)]}},{'$unwind':_0x19273b(0x193)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x19273b(0x186)},'bay':{'$first':_0x19273b(0x1a7)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x19273b(0x16b)},'primary_code':{'$first':_0x19273b(0x168)},'secondary_code':{'$first':_0x19273b(0x165)},'product_code':{'$first':_0x19273b(0x16a)},'storage':{'$first':_0x19273b(0x1b2)},'rack':{'$first':_0x19273b(0x196)}}}]);console[_0x19273b(0x14f)](_0x2c8196);const _0x4aa776=await warehouse[_0x19273b(0x1aa)]([{'$match':{'status':'Enabled','warehouse_category':_0x19273b(0x190)}},{'$group':{'_id':_0x19273b(0x169),'name':{'$first':_0x19273b(0x169)}}},{'$sort':{'name':0x1}}]),_0x25e606=await warehouse[_0x19273b(0x1aa)]([{'$match':{'status':'Enabled','name':_0x19273b(0x16c)}},{'$group':{'_id':'$name','name':{'$first':_0x19273b(0x169)}}},{'$sort':{'name':0x1}}]),_0x16b24b=await product[_0x19273b(0x19a)]({});if(_0x4f6449[0x0]['language']==_0x19273b(0x151)){var _0x4deede=users['English'];console[_0x19273b(0x14f)](_0x4deede);}else{if(_0x4f6449[0x0]['language']==_0x19273b(0x14b))var _0x4deede=users[_0x19273b(0x14b)];else{if(_0x4f6449[0x0][_0x19273b(0x175)]==_0x19273b(0x1ad))var _0x4deede=users['German'];else{if(_0x4f6449[0x0][_0x19273b(0x175)]==_0x19273b(0x1ac))var _0x4deede=users[_0x19273b(0x1ac)];else{if(_0x4f6449[0x0]['language']==_0x19273b(0x187))var _0x4deede=users[_0x19273b(0x187)];else{if(_0x4f6449[0x0][_0x19273b(0x175)]==_0x19273b(0x1a9))var _0x4deede=users[_0x19273b(0x195)];else{if(_0x4f6449[0x0]['language']==_0x19273b(0x176))var _0x4deede=users['Chinese'];else{if(_0x4f6449[0x0][_0x19273b(0x175)]==_0x19273b(0x155))var _0x4deede=users[_0x19273b(0x147)];}}}}}}}_0x534107['render'](_0x19273b(0x170),{'success':_0x5b1f11[_0x19273b(0x189)]('success'),'errors':_0x5b1f11[_0x19273b(0x189)](_0x19273b(0x15a)),'role':_0x5dca81,'profile':_0x29b521,'master_shop':_0x4f6449,'user':_0x8326af,'stock':_0x2c8196,'unit':_0x16b24b,'language':_0x4deede,'warehouses':_0x4aa776,'rooms':_0x551ece,'warehouse_QA':_0x25e606});}catch(_0x188d71){console['log'](_0x188d71);}}),router['post'](a0_0xd7a3cd(0x157),auth,async(_0x22a2c6,_0x2fac4f)=>{var _0x344e7c=a0_0xd7a3cd;if(_0x22a2c6['body'][_0x344e7c(0x172)]=='QA')try{const _0x38da35=_0x22a2c6[_0x344e7c(0x17c)]['id'],_0x42244e=await sales_return[_0x344e7c(0x184)]({'invoice':_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x141)]}),_0x4472a4=await warehouse[_0x344e7c(0x184)]({'name':_0x42244e['ToWarehouse'],'room':_0x42244e[_0x344e7c(0x15b)]}),{invoice:_0x215f38,customer:_0x35bb0e,date:_0x40c3e7,warehouse_name:_0x10d740,product_name:_0x1c33e3,primary_code:_0x47be9f,secondary_code:_0x24bd8b,product_code:_0x10be48,sales_quantity:_0xa23339,stocks:_0x18cb87,return_qty:_0xeb2fc0,note:_0x5a3ba3,to_warehouse_name_QA:_0x3dc098,to_Room_name_QA:_0x3fe06f}=_0x22a2c6[_0x344e7c(0x1af)];if(typeof product_name_QA=='string')var _0x297a72=[_0x22a2c6[_0x344e7c(0x1af)]['product_name_QA']],_0xb7598f=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x142)]],_0x293508=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x183)]],_0x3a8369=[_0x22a2c6[_0x344e7c(0x1af)]['product_code_QA']],_0x55cee3=[_0x22a2c6[_0x344e7c(0x1af)]['sales_quantity_QA']],_0x1d4a30=[_0x22a2c6['body']['stocks_QA']],_0x11c5b1=[_0x22a2c6['body']['return_qty_QA']];else var _0x297a72=[..._0x22a2c6[_0x344e7c(0x1af)]['product_name_QA']],_0xb7598f=[..._0x22a2c6[_0x344e7c(0x1af)]['primary_code_QA']],_0x293508=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x183)]],_0x3a8369=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x1a0)]],_0x55cee3=[..._0x22a2c6['body']['sales_quantity_QA']],_0x1d4a30=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x182)]],_0x11c5b1=[..._0x22a2c6['body'][_0x344e7c(0x163)]];const _0x1c8de5=_0x297a72[_0x344e7c(0x19f)](_0x204ad8=>{return _0x204ad8={'product_name':_0x204ad8};});_0xb7598f[_0x344e7c(0x146)]((_0x1c7de5,_0x5bf9e8)=>{_0x1c8de5[_0x5bf9e8]['primary_code']=_0x1c7de5;}),_0x293508[_0x344e7c(0x146)]((_0x16fc2c,_0x131849)=>{var _0x223738=_0x344e7c;_0x1c8de5[_0x131849][_0x223738(0x18e)]=_0x16fc2c;}),_0x3a8369[_0x344e7c(0x146)]((_0x42b667,_0x58b6cd)=>{var _0x4691be=_0x344e7c;_0x1c8de5[_0x58b6cd][_0x4691be(0x156)]=_0x42b667;}),_0x55cee3[_0x344e7c(0x146)]((_0x58242e,_0x5df4bf)=>{var _0x461df4=_0x344e7c;_0x1c8de5[_0x5df4bf][_0x461df4(0x15f)]=_0x58242e;}),_0x1d4a30['forEach']((_0xe27d23,_0x78aacf)=>{_0x1c8de5[_0x78aacf]['stock']=_0xe27d23;}),_0x11c5b1['forEach']((_0xf31355,_0x18bf2e)=>{var _0x293600=_0x344e7c;_0x1c8de5[_0x18bf2e][_0x293600(0x143)]=_0xf31355;}),_0x42244e[_0x344e7c(0x158)][_0x344e7c(0x146)](_0x199ca6=>{var _0x51b3e6=_0x344e7c;const _0x4fb8e1=_0x4472a4[_0x51b3e6(0x15d)][_0x51b3e6(0x19f)](_0x559dec=>{var _0x1459b0=_0x51b3e6;_0x559dec[_0x1459b0(0x152)]==_0x199ca6['product_name']&&(_0x559dec['product_stock']=parseInt(_0x559dec['product_stock'])+parseInt(_0x199ca6[_0x1459b0(0x143)]));});}),await _0x4472a4[_0x344e7c(0x1a1)](),_0x42244e[_0x344e7c(0x141)]=_0x215f38,_0x42244e['customer']=_0x35bb0e,_0x42244e[_0x344e7c(0x15c)]=_0x40c3e7,_0x42244e[_0x344e7c(0x17b)]=_0x10d740,_0x42244e[_0x344e7c(0x158)]=_0x1c8de5,_0x42244e[_0x344e7c(0x188)]=_0x5a3ba3,_0x42244e[_0x344e7c(0x145)]=_0x3dc098,_0x42244e[_0x344e7c(0x15b)]=_0x3fe06f;const _0x333240=await _0x42244e[_0x344e7c(0x1a1)](),_0x67ee1e=await c_payment_data[_0x344e7c(0x184)]({'invoice':_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x141)],'reason':_0x344e7c(0x1a6)});_0x67ee1e[_0x344e7c(0x19e)]=_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x19e)],_0x67ee1e[_0x344e7c(0x15c)]=_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x15c)],await _0x67ee1e[_0x344e7c(0x1a1)](),_0x22a2c6[_0x344e7c(0x189)](_0x344e7c(0x181),_0x344e7c(0x171)),_0x2fac4f[_0x344e7c(0x194)]('/sales_return_finished/view');}catch(_0x3fe8ed){console['log'](_0x3fe8ed),_0x2fac4f[_0x344e7c(0x17e)](0xc8)[_0x344e7c(0x1ab)]({'message':_0x3fe8ed[_0x344e7c(0x173)]});}else try{const _0x1a6222=_0x22a2c6[_0x344e7c(0x17c)]['id'];console[_0x344e7c(0x14f)](_0x1a6222);const _0x3fc51d=await sales_return[_0x344e7c(0x184)]({'invoice':_0x22a2c6['body'][_0x344e7c(0x141)]});console['log'](_0x344e7c(0x19b),_0x3fc51d);const _0x165c98=await warehouse[_0x344e7c(0x184)]({'name':_0x3fc51d[_0x344e7c(0x145)],'room':_0x3fc51d[_0x344e7c(0x15b)]});console[_0x344e7c(0x14f)]('old_warehouse_data',_0x165c98);const {invoice:_0x131580,customer:_0x3a2f35,date:_0x4050e9,warehouse_name:_0x2001d2,product_name:_0x75ffc9,primary_code:_0x230fd1,secondary_code:_0x448e6e,product_code:_0x395873,sales_quantity:_0x2cad3b,stocks:_0x2ef9c2,return_qty:_0x39178c,note:_0x1fb28a,to_warehouse_name:_0x2c9075,to_Room_name:_0x4be475}=_0x22a2c6[_0x344e7c(0x1af)];console[_0x344e7c(0x14f)](_0x22a2c6[_0x344e7c(0x1af)]);if(typeof _0x75ffc9==_0x344e7c(0x153))var _0x297a72=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x152)]],_0xb7598f=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x14c)]],_0x293508=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x18e)]],_0x3a8369=[_0x22a2c6['body'][_0x344e7c(0x156)]],_0x55cee3=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x177)]],_0x1d4a30=[_0x22a2c6['body']['stocks']],_0x11c5b1=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x143)]],_0x5da4ee=[_0x22a2c6[_0x344e7c(0x1af)]['bay']],_0x4360aa=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x1a2)]],_0x5c82cb=[_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x15e)]],_0xf19eae=[_0x22a2c6[_0x344e7c(0x1af)]['floorlevel']];else var _0x297a72=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x152)]],_0xb7598f=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x14c)]],_0x293508=[..._0x22a2c6['body'][_0x344e7c(0x18e)]],_0x3a8369=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x156)]],_0x55cee3=[..._0x22a2c6['body'][_0x344e7c(0x177)]],_0x1d4a30=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x1a5)]],_0x11c5b1=[..._0x22a2c6[_0x344e7c(0x1af)]['return_qty']],_0x5da4ee=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x166)]],_0x4360aa=[..._0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x1a2)]],_0x5c82cb=[..._0x22a2c6[_0x344e7c(0x1af)]['types']],_0xf19eae=[..._0x22a2c6[_0x344e7c(0x1af)]['floorlevel']];const _0x127a83=_0x297a72[_0x344e7c(0x19f)](_0x197134=>{return _0x197134={'product_name':_0x197134};});_0xb7598f[_0x344e7c(0x146)]((_0x2e57ba,_0x48e7d6)=>{var _0x56d63d=_0x344e7c;_0x127a83[_0x48e7d6][_0x56d63d(0x14c)]=_0x2e57ba;}),_0x293508[_0x344e7c(0x146)]((_0x14abcd,_0x494e9f)=>{var _0x1f3411=_0x344e7c;_0x127a83[_0x494e9f][_0x1f3411(0x18e)]=_0x14abcd;}),_0x3a8369[_0x344e7c(0x146)]((_0x3cc54f,_0x40be9b)=>{_0x127a83[_0x40be9b]['product_code']=_0x3cc54f;}),_0x55cee3[_0x344e7c(0x146)]((_0x96f3be,_0x152b2a)=>{var _0x4c9287=_0x344e7c;_0x127a83[_0x152b2a][_0x4c9287(0x15f)]=_0x96f3be;}),_0x1d4a30[_0x344e7c(0x146)]((_0x3f79b2,_0x404f39)=>{var _0x3cccb6=_0x344e7c;_0x127a83[_0x404f39][_0x3cccb6(0x17f)]=_0x3f79b2;}),_0x11c5b1[_0x344e7c(0x146)]((_0x1970cb,_0x3d61c8)=>{var _0x4e80cd=_0x344e7c;_0x127a83[_0x3d61c8][_0x4e80cd(0x143)]=_0x1970cb;}),_0x5da4ee['forEach']((_0x36364b,_0x363b04)=>{var _0x333dbc=_0x344e7c;_0x127a83[_0x363b04][_0x333dbc(0x166)]=_0x36364b;}),_0x4360aa[_0x344e7c(0x146)]((_0x41f870,_0xa89c74)=>{var _0x5d1de5=_0x344e7c;_0x127a83[_0xa89c74][_0x5d1de5(0x1a2)]=_0x41f870;}),_0x5c82cb['forEach']((_0x520ead,_0xddaf2c)=>{_0x127a83[_0xddaf2c]['type']=_0x520ead;}),_0xf19eae[_0x344e7c(0x146)]((_0x7e3ccc,_0x3ecec6)=>{var _0x3eb82d=_0x344e7c;_0x127a83[_0x3ecec6][_0x3eb82d(0x1b3)]=_0x7e3ccc;});var _0x489166=0x0;_0x127a83['forEach'](_0x553b4b=>{var _0x389db4=_0x344e7c;console[_0x389db4(0x14f)](_0x389db4(0x14e),_0x553b4b),(parseInt(_0x553b4b['sale_qty'])<parseInt(_0x553b4b[_0x389db4(0x143)])||parseInt(_0x553b4b[_0x389db4(0x17f)])<parseInt(_0x553b4b[_0x389db4(0x143)])&&parseInt(_0x553b4b[_0x389db4(0x15f)])>parseInt(_0x553b4b[_0x389db4(0x143)])||parseInt(_0x553b4b[_0x389db4(0x143)])==0x0)&&_0x489166++;});if(_0x489166!=0x0)return _0x22a2c6[_0x344e7c(0x189)](_0x344e7c(0x15a),_0x344e7c(0x178)),_0x2fac4f[_0x344e7c(0x194)]('back');_0x3fc51d[_0x344e7c(0x19c)][_0x344e7c(0x146)](_0x5aa1e4=>{var _0x604981=_0x344e7c;const _0x4ddf55=_0x165c98['product_details'][_0x604981(0x19f)](_0x29bf77=>{var _0xc855fd=_0x604981;_0x29bf77[_0xc855fd(0x152)]==_0x5aa1e4[_0xc855fd(0x152)]&&_0x29bf77['floorlevel']==_0x5aa1e4['floorlevel']&&_0x29bf77[_0xc855fd(0x1a4)]==_0x5aa1e4[_0xc855fd(0x1a4)]&&_0x29bf77[_0xc855fd(0x1a2)]==_0x5aa1e4['bin']&&_0x29bf77['bay']==_0x5aa1e4['bay']&&(_0x29bf77[_0xc855fd(0x167)]=parseInt(_0x29bf77['product_stock'])+parseInt(_0x5aa1e4[_0xc855fd(0x143)]));});}),console[_0x344e7c(0x14f)](_0x344e7c(0x174),_0x165c98),await _0x165c98[_0x344e7c(0x1a1)](),_0x3fc51d[_0x344e7c(0x141)]=_0x131580,_0x3fc51d[_0x344e7c(0x159)]=_0x3a2f35,_0x3fc51d[_0x344e7c(0x15c)]=_0x4050e9,_0x3fc51d[_0x344e7c(0x17b)]=_0x2001d2,_0x3fc51d[_0x344e7c(0x19c)]=_0x127a83,_0x3fc51d[_0x344e7c(0x188)]=_0x1fb28a,_0x3fc51d[_0x344e7c(0x145)]=_0x2c9075,_0x3fc51d[_0x344e7c(0x15b)]=_0x4be475;const _0x12f79a=await _0x3fc51d[_0x344e7c(0x1a1)]();console['log'](_0x344e7c(0x1b0),_0x12f79a);const _0x207a40=await c_payment_data[_0x344e7c(0x184)]({'invoice':_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x141)],'reason':_0x344e7c(0x1a6)});_0x207a40[_0x344e7c(0x19e)]=_0x22a2c6['body'][_0x344e7c(0x19e)],_0x207a40[_0x344e7c(0x15c)]=_0x22a2c6[_0x344e7c(0x1af)][_0x344e7c(0x15c)],await _0x207a40[_0x344e7c(0x1a1)](),_0x22a2c6[_0x344e7c(0x189)](_0x344e7c(0x181),_0x344e7c(0x171)),_0x2fac4f[_0x344e7c(0x194)](_0x344e7c(0x144));}catch(_0x50a943){console[_0x344e7c(0x14f)](_0x50a943),_0x2fac4f[_0x344e7c(0x17e)](0xc8)[_0x344e7c(0x1ab)]({'message':_0x50a943[_0x344e7c(0x173)]});}}),router['post']('/give_payment/:id',auth,async(_0x26cb9e,_0x35102f)=>{var _0x3e57ce=a0_0xd7a3cd;try{const _0x481f9a=_0x26cb9e[_0x3e57ce(0x17c)]['id'],{invoice:_0xc1a22c,customer:_0x488634,payable_to_customer:_0x2ef7a4,paid_amount:_0xdc7a5c}=_0x26cb9e['body'],_0x3635b0=await sales_return[_0x3e57ce(0x185)](_0x481f9a);console[_0x3e57ce(0x14f)](_0x3e57ce(0x16e),_0x3635b0),console[_0x3e57ce(0x14f)](_0x2ef7a4),console[_0x3e57ce(0x14f)](_0xdc7a5c);var _0x5ed2b5=_0x2ef7a4-_0xdc7a5c;console[_0x3e57ce(0x14f)](_0x3e57ce(0x1b6),_0x5ed2b5),_0x3635b0['paid_amount']=parseFloat(_0xdc7a5c)+parseFloat(_0x3635b0[_0x3e57ce(0x1b1)]),_0x3635b0[_0x3e57ce(0x19d)]=_0x5ed2b5,console[_0x3e57ce(0x14f)](_0x3635b0);const _0x1ab6dd=await _0x3635b0[_0x3e57ce(0x1a1)]();console['log'](0x1b207);const _0x5cc8f=await c_payment_data[_0x3e57ce(0x184)]({'invoice':_0x26cb9e[_0x3e57ce(0x1af)][_0x3e57ce(0x141)],'reason':_0x3e57ce(0x1a6)});console['log'](_0x3e57ce(0x149),_0x5cc8f),_0x5cc8f[_0x3e57ce(0x180)]=_0x5ed2b5,await _0x5cc8f[_0x3e57ce(0x1a1)]();let _0x132b4d=new Date(),_0x19f71d=('0'+_0x132b4d[_0x3e57ce(0x199)]())[_0x3e57ce(0x1a8)](-0x2),_0x868668=('0'+(_0x132b4d[_0x3e57ce(0x148)]()+0x1))[_0x3e57ce(0x1a8)](-0x2),_0xf31a86=_0x132b4d[_0x3e57ce(0x1b4)](),_0x19620d=_0xf31a86+'-'+_0x868668+'-'+_0x19f71d;const _0xcec49b=new customer_payment({'invoice':_0xc1a22c,'date':_0xf31a86+'-'+_0x868668+'-'+_0x19f71d,'customer':_0x488634,'reason':_0x3e57ce(0x197),'amount':_0xdc7a5c}),_0x13fe03=await _0xcec49b['save']();_0x26cb9e[_0x3e57ce(0x189)](_0x3e57ce(0x181),_0x3e57ce(0x160)),_0x35102f[_0x3e57ce(0x194)](_0x3e57ce(0x144));}catch(_0xcb87dd){console[_0x3e57ce(0x14f)](_0xcb87dd);}}),router[a0_0xd7a3cd(0x1a3)](a0_0xd7a3cd(0x18c),auth,async(_0x2ae7ff,_0x61a96d)=>{var _0x25e37e=a0_0xd7a3cd;try{const {username:_0xb4aa8d,email:_0x545158,role:_0x3aabe6}=_0x2ae7ff[_0x25e37e(0x154)],_0x3946df=_0x2ae7ff[_0x25e37e(0x154)],_0x1bf448=await profile[_0x25e37e(0x184)]({'email':_0x3946df[_0x25e37e(0x1ae)]}),_0x4a88ba=await master_shop['find']();console[_0x25e37e(0x14f)](_0x25e37e(0x18f),_0x4a88ba);const _0x201b38=_0x2ae7ff[_0x25e37e(0x17c)]['id'],_0x3b5eb7=await sales_return[_0x25e37e(0x185)](_0x201b38);console[_0x25e37e(0x14f)](_0x3b5eb7);const _0x29567f=await customer['findOne']({'name':_0x3b5eb7[_0x25e37e(0x159)]});console[_0x25e37e(0x14f)](_0x29567f);if(_0x4a88ba[0x0][_0x25e37e(0x175)]==_0x25e37e(0x151)){var _0x6432af=users[_0x25e37e(0x18d)];console[_0x25e37e(0x14f)](_0x6432af);}else{if(_0x4a88ba[0x0][_0x25e37e(0x175)]=='Hindi')var _0x6432af=users[_0x25e37e(0x14b)];else{if(_0x4a88ba[0x0][_0x25e37e(0x175)]=='German')var _0x6432af=users['German'];else{if(_0x4a88ba[0x0]['language']==_0x25e37e(0x1ac))var _0x6432af=users['Spanish'];else{if(_0x4a88ba[0x0][_0x25e37e(0x175)]==_0x25e37e(0x187))var _0x6432af=users['French'];else{if(_0x4a88ba[0x0]['language']==_0x25e37e(0x1a9))var _0x6432af=users[_0x25e37e(0x195)];else{if(_0x4a88ba[0x0][_0x25e37e(0x175)]==_0x25e37e(0x176))var _0x6432af=users[_0x25e37e(0x176)];else{if(_0x4a88ba[0x0][_0x25e37e(0x175)]==_0x25e37e(0x155))var _0x6432af=users[_0x25e37e(0x147)];}}}}}}}_0x61a96d[_0x25e37e(0x16d)](_0x25e37e(0x179),{'success':_0x2ae7ff['flash'](_0x25e37e(0x181)),'errors':_0x2ae7ff[_0x25e37e(0x189)](_0x25e37e(0x15a)),'role':_0x3946df,'profile':_0x1bf448,'master_shop':_0x4a88ba,'customers':_0x29567f,'sales':_0x3b5eb7,'language':_0x6432af});}catch(_0x2d9f69){console['log'](_0x2d9f69);}}),module['exports']=router;