var a0_0x46ca17=a0_0x43b9;function a0_0x39b0(){var _0x2d731d=['/sales_return/view','stocks_QA','json','$product_details.secondary_code','invoice','4203175LJChcj','57TINUvr','Arabic','return_qty','for_categorize','customer_docs','warehouse_name','params','return_qty_QA','errors','slice','Return\x20Rooms','return_sale','render','floorlevel','find','Router','suppliers','bay','Returned\x20Payment\x20For\x20Sale\x20Return','Portuguese','customer','user','sale_qty','string','forEach','sales_return_invoice','Chinese','stock','sales_quantity_QA','findById','/give_payment/:id','$product_details','flash','ToRoom','$product_details.product_code','body','1987188TrZKrg','bin','$product_details.rack','sales_return_finished','French','$product_details.primary_code','476280bWotpF','German','product_code_QA','/view/:id','37634PRwDoH','$product_details.product_name','new\x20new_data','ToWarehouse','Hindi','types','Arabic\x20(ae)','product_name_QA','date','English\x20(US)','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','success','product_name','296wNBvVm','$product_details._id','/sales_return_finished/view','old_data','redirect','Enabled','$product_details.bay','secondary_code','getDate','$product_details.storage','QA\x20Warehouse','Spanish','../middleware/auth','getMonth','log','get','payment\x20successfull','save','6DdJmXq','$product_details.bin','Finished\x20Goods','sales_quantity','$customer_docs','product_code','map','/view','Portuguese\x20(BR)','/invoice/:id','getFullYear','product_details','product_stock','c_payment','message','primary_code_QA','foreach\x20newproduct','4326120HSxWPP','language','status','subtract','purchase\x20return\x20successfully','return_sale_QA','Sale\x20Return','$product_details.floorlevel','$product_details.type','English','107712PKWehL','master','stocks','type','note','findOne','back','$name','3006FXtpgg','email','aggregate','name','$product_details.product_stock','data','secondary_code_QA','primary_code','exports','post'];a0_0x39b0=function(){return _0x2d731d;};return a0_0x39b0();}function a0_0x43b9(_0x4d5640,_0x47af4f){var _0x39b089=a0_0x39b0();return a0_0x43b9=function(_0x43b914,_0x32cf4b){_0x43b914=_0x43b914-0x19a;var _0x526693=_0x39b089[_0x43b914];return _0x526693;},a0_0x43b9(_0x4d5640,_0x47af4f);}(function(_0x3d882f,_0x118622){var _0xe6201e=a0_0x43b9,_0x558e9b=_0x3d882f();while(!![]){try{var _0x5b979f=parseInt(_0xe6201e(0x1ff))/0x1+-parseInt(_0xe6201e(0x1c5))/0x2*(parseInt(_0xe6201e(0x217))/0x3)+-parseInt(_0xe6201e(0x1bb))/0x4+-parseInt(_0xe6201e(0x216))/0x5*(-parseInt(_0xe6201e(0x1e4))/0x6)+parseInt(_0xe6201e(0x1c1))/0x7+-parseInt(_0xe6201e(0x1d2))/0x8*(parseInt(_0xe6201e(0x207))/0x9)+parseInt(_0xe6201e(0x1f5))/0xa;if(_0x5b979f===_0x118622)break;else _0x558e9b['push'](_0x558e9b['shift']());}catch(_0x2a026e){_0x558e9b['push'](_0x558e9b['shift']());}}}(a0_0x39b0,0x8e2b1));const express=require('express'),app=express(),router=express[a0_0x46ca17(0x1a6)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x46ca17(0x1de)),users=require('../public/language/languages.json');router['get'](a0_0x46ca17(0x1eb),auth,async(_0x2269b9,_0x184a61)=>{var _0x5789b4=a0_0x46ca17;try{const {username:_0x553aa0,email:_0x3b3901,role:_0x55f896}=_0x2269b9[_0x5789b4(0x1ac)],_0x4dcd0c=_0x2269b9['user'],_0x484951=await profile[_0x5789b4(0x204)]({'email':_0x4dcd0c[_0x5789b4(0x208)]}),_0x39b833=await master_shop[_0x5789b4(0x1a5)](),_0x2a52cb=await sales_return_finished[_0x5789b4(0x209)]([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0x5789b4(0x20a),'as':_0x5789b4(0x19b)}},{'$unwind':_0x5789b4(0x1e8)}]);if(_0x39b833[0x0][_0x5789b4(0x1f6)]==_0x5789b4(0x1ce)){var _0x57c75a=users['English'];console['log'](_0x57c75a);}else{if(_0x39b833[0x0][_0x5789b4(0x1f6)]=='Hindi')var _0x57c75a=users[_0x5789b4(0x1c9)];else{if(_0x39b833[0x0]['language']==_0x5789b4(0x1c2))var _0x57c75a=users['German'];else{if(_0x39b833[0x0]['language']==_0x5789b4(0x1dd))var _0x57c75a=users[_0x5789b4(0x1dd)];else{if(_0x39b833[0x0][_0x5789b4(0x1f6)]==_0x5789b4(0x1bf))var _0x57c75a=users[_0x5789b4(0x1bf)];else{if(_0x39b833[0x0]['language']==_0x5789b4(0x1ec))var _0x57c75a=users[_0x5789b4(0x1aa)];else{if(_0x39b833[0x0][_0x5789b4(0x1f6)]==_0x5789b4(0x1b1))var _0x57c75a=users[_0x5789b4(0x1b1)];else{if(_0x39b833[0x0][_0x5789b4(0x1f6)]==_0x5789b4(0x1cb))var _0x57c75a=users[_0x5789b4(0x218)];}}}}}}}_0x184a61[_0x5789b4(0x1a3)](_0x5789b4(0x1be),{'success':_0x2269b9[_0x5789b4(0x1b7)](_0x5789b4(0x1d0)),'errors':_0x2269b9[_0x5789b4(0x1b7)](_0x5789b4(0x19f)),'role':_0x4dcd0c,'profile':_0x484951,'master_shop':_0x39b833,'user':_0x2a52cb,'language':_0x57c75a});}catch(_0x490c7e){console[_0x5789b4(0x1e0)](_0x490c7e);}}),router[a0_0x46ca17(0x1e1)](a0_0x46ca17(0x1c4),auth,async(_0xc30793,_0x2bd4b5)=>{var _0x4feee9=a0_0x46ca17;try{const {username:_0x5f5dfa,email:_0x35aed6,role:_0x18d3d7}=_0xc30793[_0x4feee9(0x1ac)],_0x31801d=_0xc30793[_0x4feee9(0x1ac)],_0x59a877=await profile[_0x4feee9(0x204)]({'email':_0x31801d['email']}),_0x567ad6=await master_shop[_0x4feee9(0x1a5)]();console['log'](_0x4feee9(0x200),_0x567ad6);const _0x485019=_0xc30793['params']['id'];console[_0x4feee9(0x1e0)](_0x485019);var _0x4e75b8=[_0x4feee9(0x1a1)];const _0x103a02=await sales_return_finished['findById'](_0x485019),_0x4007e0=await warehouse[_0x4feee9(0x209)]([{'$match':{'name':_0x103a02[_0x4feee9(0x1c8)],'room':_0x103a02[_0x4feee9(0x1b8)]}},{'$unwind':_0x4feee9(0x1b6)},{'$group':{'_id':_0x4feee9(0x1d3),'name':{'$first':_0x4feee9(0x1c6)},'product_stock':{'$first':_0x4feee9(0x20b)},'bay':{'$first':_0x4feee9(0x1d8)},'bin':{'$first':_0x4feee9(0x1e5)},'type':{'$first':_0x4feee9(0x1fd)},'floorlevel':{'$first':_0x4feee9(0x1fc)},'primary_code':{'$first':_0x4feee9(0x1c0)},'secondary_code':{'$first':_0x4feee9(0x214)},'product_code':{'$first':_0x4feee9(0x1b9)},'storage':{'$first':_0x4feee9(0x1db)},'rack':{'$first':_0x4feee9(0x1bd)}}}]);console[_0x4feee9(0x1e0)](_0x4007e0);const _0x1c068e=await warehouse['aggregate']([{'$match':{'status':_0x4feee9(0x1d7),'warehouse_category':_0x4feee9(0x1e6)}},{'$group':{'_id':'$name','name':{'$first':_0x4feee9(0x206)}}},{'$sort':{'name':0x1}}]),_0x33b71b=await warehouse[_0x4feee9(0x209)]([{'$match':{'status':_0x4feee9(0x1d7),'name':_0x4feee9(0x1dc)}},{'$group':{'_id':_0x4feee9(0x206),'name':{'$first':_0x4feee9(0x206)}}},{'$sort':{'name':0x1}}]),_0x487aa5=await product[_0x4feee9(0x1a5)]({});if(_0x567ad6[0x0]['language']==_0x4feee9(0x1ce)){var _0x4c7bfe=users['English'];console['log'](_0x4c7bfe);}else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]=='Hindi')var _0x4c7bfe=users[_0x4feee9(0x1c9)];else{if(_0x567ad6[0x0]['language']==_0x4feee9(0x1c2))var _0x4c7bfe=users[_0x4feee9(0x1c2)];else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]==_0x4feee9(0x1dd))var _0x4c7bfe=users[_0x4feee9(0x1dd)];else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]==_0x4feee9(0x1bf))var _0x4c7bfe=users[_0x4feee9(0x1bf)];else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]==_0x4feee9(0x1ec))var _0x4c7bfe=users[_0x4feee9(0x1aa)];else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]==_0x4feee9(0x1b1))var _0x4c7bfe=users[_0x4feee9(0x1b1)];else{if(_0x567ad6[0x0][_0x4feee9(0x1f6)]==_0x4feee9(0x1cb))var _0x4c7bfe=users[_0x4feee9(0x218)];}}}}}}}_0x2bd4b5[_0x4feee9(0x1a3)]('return_sale_edit_finished',{'success':_0xc30793[_0x4feee9(0x1b7)](_0x4feee9(0x1d0)),'errors':_0xc30793[_0x4feee9(0x1b7)](_0x4feee9(0x19f)),'role':_0x31801d,'profile':_0x59a877,'master_shop':_0x567ad6,'user':_0x103a02,'stock':_0x4007e0,'unit':_0x487aa5,'language':_0x4c7bfe,'warehouses':_0x1c068e,'rooms':_0x4e75b8,'warehouse_QA':_0x33b71b});}catch(_0x59a635){console[_0x4feee9(0x1e0)](_0x59a635);}}),router[a0_0x46ca17(0x210)](a0_0x46ca17(0x1c4),auth,async(_0x5a7d2a,_0x51585f)=>{var _0x4f2ec5=a0_0x46ca17;if(_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x19a)]=='QA')try{const _0x3861d2=_0x5a7d2a[_0x4f2ec5(0x19d)]['id'],_0x289f94=await sales_return[_0x4f2ec5(0x204)]({'invoice':_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x215)]}),_0x5f1167=await warehouse[_0x4f2ec5(0x204)]({'name':_0x289f94[_0x4f2ec5(0x1c8)],'room':_0x289f94['ToRoom']}),{invoice:_0xc159d8,customer:_0x486f5a,date:_0x334500,warehouse_name:_0x217050,product_name:_0x1331ee,primary_code:_0x527f13,secondary_code:_0xa8898f,product_code:_0x1db5c9,sales_quantity:_0x42761d,stocks:_0x34d24a,return_qty:_0x36ad67,note:_0x301dce,to_warehouse_name_QA:_0x22fb32,to_Room_name_QA:_0x28df14}=_0x5a7d2a[_0x4f2ec5(0x1ba)];if(typeof product_name_QA==_0x4f2ec5(0x1ae))var _0x56289a=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1cc)]],_0x541d86=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1f3)]],_0x335302=[_0x5a7d2a[_0x4f2ec5(0x1ba)]['secondary_code_QA']],_0xcca139=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1c3)]],_0x50124b=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1b3)]],_0x4bc3c7=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x212)]],_0x48d2c0=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x19e)]];else var _0x56289a=[..._0x5a7d2a['body']['product_name_QA']],_0x541d86=[..._0x5a7d2a[_0x4f2ec5(0x1ba)]['primary_code_QA']],_0x335302=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x20d)]],_0xcca139=[..._0x5a7d2a['body'][_0x4f2ec5(0x1c3)]],_0x50124b=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1b3)]],_0x4bc3c7=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x212)]],_0x48d2c0=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x19e)]];const _0x490ce6=_0x56289a[_0x4f2ec5(0x1ea)](_0x5a5cd5=>{return _0x5a5cd5={'product_name':_0x5a5cd5};});_0x541d86[_0x4f2ec5(0x1af)]((_0xda26fd,_0x25a835)=>{var _0x327147=_0x4f2ec5;_0x490ce6[_0x25a835][_0x327147(0x20e)]=_0xda26fd;}),_0x335302[_0x4f2ec5(0x1af)]((_0x330685,_0x321648)=>{var _0x213dba=_0x4f2ec5;_0x490ce6[_0x321648][_0x213dba(0x1d9)]=_0x330685;}),_0xcca139['forEach']((_0x5c0fe1,_0x1d3cb1)=>{var _0x580685=_0x4f2ec5;_0x490ce6[_0x1d3cb1][_0x580685(0x1e9)]=_0x5c0fe1;}),_0x50124b[_0x4f2ec5(0x1af)]((_0x6319cb,_0x43aafa)=>{var _0x149b02=_0x4f2ec5;_0x490ce6[_0x43aafa][_0x149b02(0x1ad)]=_0x6319cb;}),_0x4bc3c7[_0x4f2ec5(0x1af)]((_0x3700cf,_0x56fd8c)=>{var _0x294d48=_0x4f2ec5;_0x490ce6[_0x56fd8c][_0x294d48(0x1b2)]=_0x3700cf;}),_0x48d2c0[_0x4f2ec5(0x1af)]((_0x2382fe,_0x34ad62)=>{var _0x3b2d80=_0x4f2ec5;_0x490ce6[_0x34ad62][_0x3b2d80(0x219)]=_0x2382fe;}),_0x289f94['return_sale_QA'][_0x4f2ec5(0x1af)](_0x17a149=>{var _0x5565c6=_0x4f2ec5;const _0x28b703=_0x5f1167[_0x5565c6(0x1ef)][_0x5565c6(0x1ea)](_0xffe1dc=>{var _0x2bf737=_0x5565c6;_0xffe1dc[_0x2bf737(0x1d1)]==_0x17a149['product_name']&&(_0xffe1dc[_0x2bf737(0x1f0)]=parseInt(_0xffe1dc[_0x2bf737(0x1f0)])+parseInt(_0x17a149[_0x2bf737(0x219)]));});}),await _0x5f1167[_0x4f2ec5(0x1e3)](),_0x289f94['invoice']=_0xc159d8,_0x289f94[_0x4f2ec5(0x1ab)]=_0x486f5a,_0x289f94['date']=_0x334500,_0x289f94[_0x4f2ec5(0x19c)]=_0x217050,_0x289f94[_0x4f2ec5(0x1fa)]=_0x490ce6,_0x289f94[_0x4f2ec5(0x203)]=_0x301dce,_0x289f94[_0x4f2ec5(0x1c8)]=_0x22fb32,_0x289f94[_0x4f2ec5(0x1b8)]=_0x28df14;const _0x376caa=await _0x289f94[_0x4f2ec5(0x1e3)](),_0x38c75d=await c_payment_data[_0x4f2ec5(0x204)]({'invoice':_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x215)],'reason':_0x4f2ec5(0x1fb)});_0x38c75d[_0x4f2ec5(0x1a7)]=_0x5a7d2a['body']['suppliers'],_0x38c75d[_0x4f2ec5(0x1cd)]=_0x5a7d2a[_0x4f2ec5(0x1ba)]['date'],await _0x38c75d[_0x4f2ec5(0x1e3)](),_0x5a7d2a[_0x4f2ec5(0x1b7)]('success',_0x4f2ec5(0x1f9)),_0x51585f[_0x4f2ec5(0x1d6)](_0x4f2ec5(0x1d4));}catch(_0x1c0909){console['log'](_0x1c0909),_0x51585f[_0x4f2ec5(0x1f7)](0xc8)[_0x4f2ec5(0x213)]({'message':_0x1c0909[_0x4f2ec5(0x1f2)]});}else try{const _0x568706=_0x5a7d2a[_0x4f2ec5(0x19d)]['id'];console[_0x4f2ec5(0x1e0)](_0x568706);const _0x41a985=await sales_return[_0x4f2ec5(0x204)]({'invoice':_0x5a7d2a[_0x4f2ec5(0x1ba)]['invoice']});console[_0x4f2ec5(0x1e0)](_0x4f2ec5(0x1d5),_0x41a985);const _0xed31a8=await warehouse[_0x4f2ec5(0x204)]({'name':_0x41a985['ToWarehouse'],'room':_0x41a985['ToRoom']});console[_0x4f2ec5(0x1e0)]('old_warehouse_data',_0xed31a8);const {invoice:_0x195a3e,customer:_0x38fe22,date:_0x13f8d8,warehouse_name:_0x951b6e,product_name:_0x40ca0f,primary_code:_0x27aa74,secondary_code:_0x5af4e5,product_code:_0x15a0f1,sales_quantity:_0x1bcbff,stocks:_0x372606,return_qty:_0x76a7b1,note:_0xa5dff4,to_warehouse_name:_0x4fab68,to_Room_name:_0x4f9da5}=_0x5a7d2a[_0x4f2ec5(0x1ba)];console[_0x4f2ec5(0x1e0)](_0x5a7d2a[_0x4f2ec5(0x1ba)]);if(typeof _0x40ca0f==_0x4f2ec5(0x1ae))var _0x56289a=[_0x5a7d2a['body']['product_name']],_0x541d86=[_0x5a7d2a[_0x4f2ec5(0x1ba)]['primary_code']],_0x335302=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1d9)]],_0xcca139=[_0x5a7d2a['body']['product_code']],_0x50124b=[_0x5a7d2a[_0x4f2ec5(0x1ba)]['sales_quantity']],_0x4bc3c7=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x201)]],_0x48d2c0=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x219)]],_0x481f52=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1a8)]],_0x1698f0=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1bc)]],_0x289519=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1ca)]],_0x3585c2=[_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1a4)]];else var _0x56289a=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1d1)]],_0x541d86=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x20e)]],_0x335302=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1d9)]],_0xcca139=[..._0x5a7d2a[_0x4f2ec5(0x1ba)]['product_code']],_0x50124b=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1e7)]],_0x4bc3c7=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x201)]],_0x48d2c0=[..._0x5a7d2a['body'][_0x4f2ec5(0x219)]],_0x481f52=[..._0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1a8)]],_0x1698f0=[..._0x5a7d2a['body'][_0x4f2ec5(0x1bc)]],_0x289519=[..._0x5a7d2a[_0x4f2ec5(0x1ba)]['types']],_0x3585c2=[..._0x5a7d2a[_0x4f2ec5(0x1ba)]['floorlevel']];const _0x3b45a0=_0x56289a['map'](_0x3489d0=>{return _0x3489d0={'product_name':_0x3489d0};});_0x541d86[_0x4f2ec5(0x1af)]((_0x1a8876,_0x86d4d5)=>{var _0x2a35ea=_0x4f2ec5;_0x3b45a0[_0x86d4d5][_0x2a35ea(0x20e)]=_0x1a8876;}),_0x335302[_0x4f2ec5(0x1af)]((_0x2053b6,_0x71ded6)=>{var _0x770e1f=_0x4f2ec5;_0x3b45a0[_0x71ded6][_0x770e1f(0x1d9)]=_0x2053b6;}),_0xcca139[_0x4f2ec5(0x1af)]((_0x5e609d,_0x43151a)=>{var _0x1f3526=_0x4f2ec5;_0x3b45a0[_0x43151a][_0x1f3526(0x1e9)]=_0x5e609d;}),_0x50124b['forEach']((_0x55b30d,_0x49d357)=>{var _0x3b123d=_0x4f2ec5;_0x3b45a0[_0x49d357][_0x3b123d(0x1ad)]=_0x55b30d;}),_0x4bc3c7[_0x4f2ec5(0x1af)]((_0x1ddbfa,_0x19f3b5)=>{var _0x916dea=_0x4f2ec5;_0x3b45a0[_0x19f3b5][_0x916dea(0x1b2)]=_0x1ddbfa;}),_0x48d2c0['forEach']((_0x24b50e,_0x467bd9)=>{var _0x22c838=_0x4f2ec5;_0x3b45a0[_0x467bd9][_0x22c838(0x219)]=_0x24b50e;}),_0x481f52[_0x4f2ec5(0x1af)]((_0x13c85b,_0x3b0102)=>{var _0x47a9f5=_0x4f2ec5;_0x3b45a0[_0x3b0102][_0x47a9f5(0x1a8)]=_0x13c85b;}),_0x1698f0[_0x4f2ec5(0x1af)]((_0x29ecb5,_0xa3a38a)=>{var _0x38598e=_0x4f2ec5;_0x3b45a0[_0xa3a38a][_0x38598e(0x1bc)]=_0x29ecb5;}),_0x289519[_0x4f2ec5(0x1af)]((_0x568ab9,_0x5811c0)=>{_0x3b45a0[_0x5811c0]['type']=_0x568ab9;}),_0x3585c2['forEach']((_0xace5ac,_0x3cd5a8)=>{_0x3b45a0[_0x3cd5a8]['floorlevel']=_0xace5ac;});var _0x4d62c0=0x0;_0x3b45a0[_0x4f2ec5(0x1af)](_0x123bca=>{var _0x161e84=_0x4f2ec5;console[_0x161e84(0x1e0)](_0x161e84(0x1f4),_0x123bca),(parseInt(_0x123bca[_0x161e84(0x1ad)])<parseInt(_0x123bca[_0x161e84(0x219)])||parseInt(_0x123bca[_0x161e84(0x1b2)])<parseInt(_0x123bca[_0x161e84(0x219)])&&parseInt(_0x123bca[_0x161e84(0x1ad)])>parseInt(_0x123bca['return_qty'])||parseInt(_0x123bca[_0x161e84(0x219)])==0x0)&&_0x4d62c0++;});if(_0x4d62c0!=0x0)return _0x5a7d2a['flash'](_0x4f2ec5(0x19f),_0x4f2ec5(0x1cf)),_0x51585f[_0x4f2ec5(0x1d6)](_0x4f2ec5(0x205));_0x41a985[_0x4f2ec5(0x1a2)][_0x4f2ec5(0x1af)](_0x134760=>{var _0x14dc06=_0x4f2ec5;const _0x124109=_0xed31a8[_0x14dc06(0x1ef)][_0x14dc06(0x1ea)](_0x363e44=>{var _0x1db6b1=_0x14dc06;_0x363e44[_0x1db6b1(0x1d1)]==_0x134760[_0x1db6b1(0x1d1)]&&_0x363e44[_0x1db6b1(0x1a4)]==_0x134760['floorlevel']&&_0x363e44['type']==_0x134760[_0x1db6b1(0x202)]&&_0x363e44[_0x1db6b1(0x1bc)]==_0x134760[_0x1db6b1(0x1bc)]&&_0x363e44[_0x1db6b1(0x1a8)]==_0x134760[_0x1db6b1(0x1a8)]&&(_0x363e44[_0x1db6b1(0x1f0)]=parseInt(_0x363e44[_0x1db6b1(0x1f0)])+parseInt(_0x134760[_0x1db6b1(0x219)]));});}),console[_0x4f2ec5(0x1e0)]('old_warehouse_data',_0xed31a8),await _0xed31a8[_0x4f2ec5(0x1e3)](),_0x41a985[_0x4f2ec5(0x215)]=_0x195a3e,_0x41a985[_0x4f2ec5(0x1ab)]=_0x38fe22,_0x41a985['date']=_0x13f8d8,_0x41a985['warehouse_name']=_0x951b6e,_0x41a985[_0x4f2ec5(0x1a2)]=_0x3b45a0,_0x41a985['note']=_0xa5dff4,_0x41a985[_0x4f2ec5(0x1c8)]=_0x4fab68,_0x41a985[_0x4f2ec5(0x1b8)]=_0x4f9da5;const _0x2530ce=await _0x41a985[_0x4f2ec5(0x1e3)]();console[_0x4f2ec5(0x1e0)](_0x4f2ec5(0x1c7),_0x2530ce);const _0x30919a=await c_payment_data[_0x4f2ec5(0x204)]({'invoice':_0x5a7d2a[_0x4f2ec5(0x1ba)]['invoice'],'reason':_0x4f2ec5(0x1fb)});_0x30919a['suppliers']=_0x5a7d2a[_0x4f2ec5(0x1ba)][_0x4f2ec5(0x1a7)],_0x30919a['date']=_0x5a7d2a[_0x4f2ec5(0x1ba)]['date'],await _0x30919a[_0x4f2ec5(0x1e3)](),_0x5a7d2a[_0x4f2ec5(0x1b7)](_0x4f2ec5(0x1d0),_0x4f2ec5(0x1f9)),_0x51585f[_0x4f2ec5(0x1d6)](_0x4f2ec5(0x211));}catch(_0x277217){console['log'](_0x277217),_0x51585f[_0x4f2ec5(0x1f7)](0xc8)[_0x4f2ec5(0x213)]({'message':_0x277217['message']});}}),router[a0_0x46ca17(0x210)](a0_0x46ca17(0x1b5),auth,async(_0x3b23ee,_0x358957)=>{var _0x44c386=a0_0x46ca17;try{const _0x1a8f7f=_0x3b23ee['params']['id'],{invoice:_0x567333,customer:_0x28345f,payable_to_customer:_0x911370,paid_amount:_0x46e0a1}=_0x3b23ee['body'],_0x477bda=await sales_return['findById'](_0x1a8f7f);console[_0x44c386(0x1e0)](_0x44c386(0x20c),_0x477bda),console[_0x44c386(0x1e0)](_0x911370),console[_0x44c386(0x1e0)](_0x46e0a1);var _0x3c7c4b=_0x911370-_0x46e0a1;console[_0x44c386(0x1e0)](_0x44c386(0x1f8),_0x3c7c4b),_0x477bda['paid_amount']=parseFloat(_0x46e0a1)+parseFloat(_0x477bda['paid_amount']),_0x477bda['due_amount']=_0x3c7c4b,console[_0x44c386(0x1e0)](_0x477bda);const _0x5a762b=await _0x477bda[_0x44c386(0x1e3)]();console['log'](0x1b207);const _0x4a8b21=await c_payment_data[_0x44c386(0x204)]({'invoice':_0x3b23ee['body'][_0x44c386(0x215)],'reason':'Sale\x20Return'});console[_0x44c386(0x1e0)](_0x44c386(0x1f1),_0x4a8b21),_0x4a8b21['amount']=_0x3c7c4b,await _0x4a8b21[_0x44c386(0x1e3)]();let _0x3c85cd=new Date(),_0x4baa4e=('0'+_0x3c85cd[_0x44c386(0x1da)]())[_0x44c386(0x1a0)](-0x2),_0x4d88d9=('0'+(_0x3c85cd[_0x44c386(0x1df)]()+0x1))[_0x44c386(0x1a0)](-0x2),_0x5c6dab=_0x3c85cd[_0x44c386(0x1ee)](),_0x1e5712=_0x5c6dab+'-'+_0x4d88d9+'-'+_0x4baa4e;const _0x176149=new customer_payment({'invoice':_0x567333,'date':_0x5c6dab+'-'+_0x4d88d9+'-'+_0x4baa4e,'customer':_0x28345f,'reason':_0x44c386(0x1a9),'amount':_0x46e0a1}),_0x5f3051=await _0x176149[_0x44c386(0x1e3)]();_0x3b23ee['flash'](_0x44c386(0x1d0),_0x44c386(0x1e2)),_0x358957[_0x44c386(0x1d6)]('/sales_return/view');}catch(_0x4feff4){console[_0x44c386(0x1e0)](_0x4feff4);}}),router[a0_0x46ca17(0x1e1)](a0_0x46ca17(0x1ed),auth,async(_0x1e5644,_0x4940da)=>{var _0xe0e58c=a0_0x46ca17;try{const {username:_0x3a498e,email:_0x1688bf,role:_0x4fb155}=_0x1e5644[_0xe0e58c(0x1ac)],_0x2e5ee4=_0x1e5644[_0xe0e58c(0x1ac)],_0x5e9285=await profile[_0xe0e58c(0x204)]({'email':_0x2e5ee4[_0xe0e58c(0x208)]}),_0x144e32=await master_shop['find']();console[_0xe0e58c(0x1e0)](_0xe0e58c(0x200),_0x144e32);const _0x5cff3b=_0x1e5644[_0xe0e58c(0x19d)]['id'],_0x50ee75=await sales_return[_0xe0e58c(0x1b4)](_0x5cff3b);console[_0xe0e58c(0x1e0)](_0x50ee75);const _0xd7c67b=await customer['findOne']({'name':_0x50ee75[_0xe0e58c(0x1ab)]});console['log'](_0xd7c67b);if(_0x144e32[0x0][_0xe0e58c(0x1f6)]=='English\x20(US)'){var _0x291502=users[_0xe0e58c(0x1fe)];console[_0xe0e58c(0x1e0)](_0x291502);}else{if(_0x144e32[0x0][_0xe0e58c(0x1f6)]=='Hindi')var _0x291502=users[_0xe0e58c(0x1c9)];else{if(_0x144e32[0x0][_0xe0e58c(0x1f6)]==_0xe0e58c(0x1c2))var _0x291502=users[_0xe0e58c(0x1c2)];else{if(_0x144e32[0x0][_0xe0e58c(0x1f6)]==_0xe0e58c(0x1dd))var _0x291502=users['Spanish'];else{if(_0x144e32[0x0]['language']=='French')var _0x291502=users[_0xe0e58c(0x1bf)];else{if(_0x144e32[0x0]['language']=='Portuguese\x20(BR)')var _0x291502=users[_0xe0e58c(0x1aa)];else{if(_0x144e32[0x0][_0xe0e58c(0x1f6)]==_0xe0e58c(0x1b1))var _0x291502=users['Chinese'];else{if(_0x144e32[0x0][_0xe0e58c(0x1f6)]=='Arabic\x20(ae)')var _0x291502=users[_0xe0e58c(0x218)];}}}}}}}_0x4940da['render'](_0xe0e58c(0x1b0),{'success':_0x1e5644[_0xe0e58c(0x1b7)](_0xe0e58c(0x1d0)),'errors':_0x1e5644[_0xe0e58c(0x1b7)](_0xe0e58c(0x19f)),'role':_0x2e5ee4,'profile':_0x5e9285,'master_shop':_0x144e32,'customers':_0xd7c67b,'sales':_0x50ee75,'language':_0x291502});}catch(_0x3d1a42){console[_0xe0e58c(0x1e0)](_0x3d1a42);}}),module[a0_0x46ca17(0x20f)]=router;