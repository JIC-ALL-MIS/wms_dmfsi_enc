var a0_0x18667b=a0_0x1755;function a0_0x3ae5(){var _0x32d8ff=['Arabic','user','Hindi','aggregate','json','getDate','getMonth','map','sales_return_invoice','warehouse_name','return_sale_edit_finished','body','$product_details.bay','../middleware/auth','getFullYear','status','return_qty_QA','type','/sales_return_finished/view','new\x20new_data','string','product_code_QA','express','../models/all_models','/invoice/:id','Finished\x20Goods','findById','/view/:id','$customer_docs','QA\x20Warehouse','sales_quantity','bin','Return\x20Rooms','5668185ZcfYyR','sale_qty','return_sale_QA','$product_details.primary_code','19867710DgtaBJ','product_details','$name','return_qty','types','master','product_name_QA','Sale\x20Return','flash','11473WsjxhI','subtract','c_payment','redirect','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','paid_amount','$product_details.bin','2172aOOIbA','product_code','2879816xKGmWA','Arabic\x20(ae)','forEach','email','ToWarehouse','/sales_return/view','findOne','10233954xDFPog','Chinese','Portuguese\x20(BR)','Portuguese','product_stock','sales_quantity_QA','name','ToRoom','/give_payment/:id','return_sale','$product_details.product_name','1602rIVBYq','note','save','Enabled','product_name','secondary_code_QA','render','purchase\x20return\x20successfully','$product_details.rack','primary_code','secondary_code','bay','get','customer','/view','find','old_warehouse_data','$product_details.storage','French','German','amount','$product_details.secondary_code','floorlevel','$product_details.product_code','message','739qMydCs','stocks','380883iGtGjO','foreach\x20newproduct','$product_details.type','Spanish','Router','data','stocks_QA','20JZJRIf','post','suppliers','invoice','language','errors','success','English\x20(US)','for_categorize','sales_return_finished','English','slice','customers','date','log','stock'];a0_0x3ae5=function(){return _0x32d8ff;};return a0_0x3ae5();}function a0_0x1755(_0x4c8c38,_0x142478){var _0x3ae5ec=a0_0x3ae5();return a0_0x1755=function(_0x1755f6,_0x7cc5b2){_0x1755f6=_0x1755f6-0x1c3;var _0x337e2f=_0x3ae5ec[_0x1755f6];return _0x337e2f;},a0_0x1755(_0x4c8c38,_0x142478);}(function(_0x5c4f3b,_0x45feaf){var _0x31d3ab=a0_0x1755,_0x324f1f=_0x5c4f3b();while(!![]){try{var _0x2c02fa=parseInt(_0x31d3ab(0x21e))/0x1*(-parseInt(_0x31d3ab(0x205))/0x2)+-parseInt(_0x31d3ab(0x220))/0x3*(-parseInt(_0x31d3ab(0x227))/0x4)+-parseInt(_0x31d3ab(0x1dd))/0x5+-parseInt(_0x31d3ab(0x1f1))/0x6*(-parseInt(_0x31d3ab(0x1ea))/0x7)+parseInt(_0x31d3ab(0x1f3))/0x8+-parseInt(_0x31d3ab(0x1fa))/0x9+parseInt(_0x31d3ab(0x1e1))/0xa;if(_0x2c02fa===_0x45feaf)break;else _0x324f1f['push'](_0x324f1f['shift']());}catch(_0x4abc6a){_0x324f1f['push'](_0x324f1f['shift']());}}}(a0_0x3ae5,0xaddfd));const express=require(a0_0x18667b(0x1d2)),app=express(),router=express[a0_0x18667b(0x224)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x18667b(0x1d3)),auth=require(a0_0x18667b(0x1c9)),users=require('../public/language/languages.json');router[a0_0x18667b(0x211)](a0_0x18667b(0x213),auth,async(_0x41a4f2,_0x127a73)=>{var _0x194e88=a0_0x18667b;try{const {username:_0x39ce6c,email:_0x44014a,role:_0x504049}=_0x41a4f2[_0x194e88(0x238)],_0x456692=_0x41a4f2[_0x194e88(0x238)],_0x195263=await profile[_0x194e88(0x1f9)]({'email':_0x456692[_0x194e88(0x1f6)]}),_0x6aa966=await master_shop['find'](),_0xc5a7d9=await sales_return_finished[_0x194e88(0x23a)]([{'$lookup':{'from':_0x194e88(0x233),'localField':'customer','foreignField':_0x194e88(0x200),'as':'customer_docs'}},{'$unwind':_0x194e88(0x1d8)}]);if(_0x6aa966[0x0][_0x194e88(0x22b)]==_0x194e88(0x22e)){var _0x393a8f=users[_0x194e88(0x231)];console[_0x194e88(0x235)](_0x393a8f);}else{if(_0x6aa966[0x0][_0x194e88(0x22b)]==_0x194e88(0x239))var _0x393a8f=users[_0x194e88(0x239)];else{if(_0x6aa966[0x0]['language']=='German')var _0x393a8f=users[_0x194e88(0x218)];else{if(_0x6aa966[0x0]['language']==_0x194e88(0x223))var _0x393a8f=users['Spanish'];else{if(_0x6aa966[0x0][_0x194e88(0x22b)]==_0x194e88(0x217))var _0x393a8f=users[_0x194e88(0x217)];else{if(_0x6aa966[0x0][_0x194e88(0x22b)]==_0x194e88(0x1fc))var _0x393a8f=users[_0x194e88(0x1fd)];else{if(_0x6aa966[0x0][_0x194e88(0x22b)]==_0x194e88(0x1fb))var _0x393a8f=users[_0x194e88(0x1fb)];else{if(_0x6aa966[0x0]['language']=='Arabic\x20(ae)')var _0x393a8f=users[_0x194e88(0x237)];}}}}}}}_0x127a73[_0x194e88(0x20b)](_0x194e88(0x230),{'success':_0x41a4f2['flash'](_0x194e88(0x22d)),'errors':_0x41a4f2['flash'](_0x194e88(0x22c)),'role':_0x456692,'profile':_0x195263,'master_shop':_0x6aa966,'user':_0xc5a7d9,'language':_0x393a8f});}catch(_0x3d359b){console[_0x194e88(0x235)](_0x3d359b);}}),router[a0_0x18667b(0x211)]('/view/:id',auth,async(_0x138453,_0x2665ab)=>{var _0x23f60a=a0_0x18667b;try{const {username:_0x1aabe6,email:_0x406fd4,role:_0x1c2714}=_0x138453[_0x23f60a(0x238)],_0x49e30e=_0x138453['user'],_0x9010ec=await profile[_0x23f60a(0x1f9)]({'email':_0x49e30e[_0x23f60a(0x1f6)]}),_0x1f8964=await master_shop[_0x23f60a(0x214)]();console['log'](_0x23f60a(0x1e6),_0x1f8964);const _0x16877e=_0x138453['params']['id'];console[_0x23f60a(0x235)](_0x16877e);var _0x42e484=[_0x23f60a(0x1dc)];const _0x492126=await sales_return_finished[_0x23f60a(0x1d6)](_0x16877e),_0xafd079=await warehouse[_0x23f60a(0x23a)]([{'$match':{'name':_0x492126[_0x23f60a(0x1f7)],'room':_0x492126[_0x23f60a(0x201)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x23f60a(0x204)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x23f60a(0x1c8)},'bin':{'$first':_0x23f60a(0x1f0)},'type':{'$first':_0x23f60a(0x222)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x23f60a(0x1e0)},'secondary_code':{'$first':_0x23f60a(0x21a)},'product_code':{'$first':_0x23f60a(0x21c)},'storage':{'$first':_0x23f60a(0x216)},'rack':{'$first':_0x23f60a(0x20d)}}}]);console[_0x23f60a(0x235)](_0xafd079);const _0x56cd5d=await warehouse[_0x23f60a(0x23a)]([{'$match':{'status':_0x23f60a(0x208),'warehouse_category':_0x23f60a(0x1d5)}},{'$group':{'_id':_0x23f60a(0x1e3),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x135b89=await warehouse[_0x23f60a(0x23a)]([{'$match':{'status':_0x23f60a(0x208),'name':_0x23f60a(0x1d9)}},{'$group':{'_id':_0x23f60a(0x1e3),'name':{'$first':_0x23f60a(0x1e3)}}},{'$sort':{'name':0x1}}]),_0x288117=await product['find']({});if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x22e)){var _0x452d5f=users[_0x23f60a(0x231)];console['log'](_0x452d5f);}else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x239))var _0x452d5f=users[_0x23f60a(0x239)];else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x218))var _0x452d5f=users['German'];else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x223))var _0x452d5f=users[_0x23f60a(0x223)];else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x217))var _0x452d5f=users[_0x23f60a(0x217)];else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]=='Portuguese\x20(BR)')var _0x452d5f=users[_0x23f60a(0x1fd)];else{if(_0x1f8964[0x0][_0x23f60a(0x22b)]==_0x23f60a(0x1fb))var _0x452d5f=users[_0x23f60a(0x1fb)];else{if(_0x1f8964[0x0]['language']==_0x23f60a(0x1f4))var _0x452d5f=users['Arabic'];}}}}}}}_0x2665ab['render'](_0x23f60a(0x1c6),{'success':_0x138453[_0x23f60a(0x1e9)](_0x23f60a(0x22d)),'errors':_0x138453[_0x23f60a(0x1e9)](_0x23f60a(0x22c)),'role':_0x49e30e,'profile':_0x9010ec,'master_shop':_0x1f8964,'user':_0x492126,'stock':_0xafd079,'unit':_0x288117,'language':_0x452d5f,'warehouses':_0x56cd5d,'rooms':_0x42e484,'warehouse_QA':_0x135b89});}catch(_0x4f19ec){console[_0x23f60a(0x235)](_0x4f19ec);}}),router['post'](a0_0x18667b(0x1d7),auth,async(_0x1d7575,_0x236db0)=>{var _0x5d92a9=a0_0x18667b;if(_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x22f)]=='QA')try{const _0x2c9cec=_0x1d7575['params']['id'],_0x25ceb2=await sales_return['findOne']({'invoice':_0x1d7575['body'][_0x5d92a9(0x22a)]}),_0x4f5d16=await warehouse[_0x5d92a9(0x1f9)]({'name':_0x25ceb2[_0x5d92a9(0x1f7)],'room':_0x25ceb2[_0x5d92a9(0x201)]}),{invoice:_0x47fede,customer:_0x4cfa88,date:_0x57c819,warehouse_name:_0x21184b,product_name:_0x376834,primary_code:_0x16baba,secondary_code:_0x1e9d9d,product_code:_0x4424a9,sales_quantity:_0x2f2518,stocks:_0x544068,return_qty:_0x732e5f,note:_0x5370fa,to_warehouse_name_QA:_0x375893,to_Room_name_QA:_0x1dc710}=_0x1d7575[_0x5d92a9(0x1c7)];if(typeof product_name_QA==_0x5d92a9(0x1d0))var _0x7882bd=[_0x1d7575['body'][_0x5d92a9(0x1e7)]],_0x279795=[_0x1d7575[_0x5d92a9(0x1c7)]['primary_code_QA']],_0x532586=[_0x1d7575['body']['secondary_code_QA']],_0x408fb6=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1d1)]],_0x474ebb=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1ff)]],_0x3d28c0=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x226)]],_0x57ec97=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1cc)]];else var _0x7882bd=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1e7)]],_0x279795=[..._0x1d7575[_0x5d92a9(0x1c7)]['primary_code_QA']],_0x532586=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x20a)]],_0x408fb6=[..._0x1d7575['body']['product_code_QA']],_0x474ebb=[..._0x1d7575['body'][_0x5d92a9(0x1ff)]],_0x3d28c0=[..._0x1d7575['body'][_0x5d92a9(0x226)]],_0x57ec97=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1cc)]];const _0x3a90a7=_0x7882bd[_0x5d92a9(0x1c3)](_0xf046f1=>{return _0xf046f1={'product_name':_0xf046f1};});_0x279795['forEach']((_0x4b34f1,_0x2c2d16)=>{_0x3a90a7[_0x2c2d16]['primary_code']=_0x4b34f1;}),_0x532586['forEach']((_0x50d956,_0x4a5587)=>{var _0x3d0e50=_0x5d92a9;_0x3a90a7[_0x4a5587][_0x3d0e50(0x20f)]=_0x50d956;}),_0x408fb6[_0x5d92a9(0x1f5)]((_0x2e019b,_0x149ac3)=>{_0x3a90a7[_0x149ac3]['product_code']=_0x2e019b;}),_0x474ebb[_0x5d92a9(0x1f5)]((_0x521fa7,_0x4051d6)=>{var _0x7c8aba=_0x5d92a9;_0x3a90a7[_0x4051d6][_0x7c8aba(0x1de)]=_0x521fa7;}),_0x3d28c0[_0x5d92a9(0x1f5)]((_0x4cb474,_0x1d0b06)=>{var _0x5d00a7=_0x5d92a9;_0x3a90a7[_0x1d0b06][_0x5d00a7(0x236)]=_0x4cb474;}),_0x57ec97[_0x5d92a9(0x1f5)]((_0x872fed,_0x3a7e7c)=>{var _0x35ba24=_0x5d92a9;_0x3a90a7[_0x3a7e7c][_0x35ba24(0x1e4)]=_0x872fed;}),_0x25ceb2[_0x5d92a9(0x1df)][_0x5d92a9(0x1f5)](_0x18efd8=>{var _0x33d9c7=_0x5d92a9;const _0x61d7f5=_0x4f5d16[_0x33d9c7(0x1e2)]['map'](_0x4a9a45=>{var _0xf10dc0=_0x33d9c7;_0x4a9a45[_0xf10dc0(0x209)]==_0x18efd8[_0xf10dc0(0x209)]&&(_0x4a9a45[_0xf10dc0(0x1fe)]=parseInt(_0x4a9a45[_0xf10dc0(0x1fe)])+parseInt(_0x18efd8[_0xf10dc0(0x1e4)]));});}),await _0x4f5d16[_0x5d92a9(0x207)](),_0x25ceb2[_0x5d92a9(0x22a)]=_0x47fede,_0x25ceb2[_0x5d92a9(0x212)]=_0x4cfa88,_0x25ceb2['date']=_0x57c819,_0x25ceb2[_0x5d92a9(0x1c5)]=_0x21184b,_0x25ceb2[_0x5d92a9(0x1df)]=_0x3a90a7,_0x25ceb2[_0x5d92a9(0x206)]=_0x5370fa,_0x25ceb2[_0x5d92a9(0x1f7)]=_0x375893,_0x25ceb2[_0x5d92a9(0x201)]=_0x1dc710;const _0x429d1c=await _0x25ceb2['save'](),_0x1f3fe3=await c_payment_data[_0x5d92a9(0x1f9)]({'invoice':_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x22a)],'reason':_0x5d92a9(0x1e8)});_0x1f3fe3[_0x5d92a9(0x229)]=_0x1d7575[_0x5d92a9(0x1c7)]['suppliers'],_0x1f3fe3['date']=_0x1d7575[_0x5d92a9(0x1c7)]['date'],await _0x1f3fe3[_0x5d92a9(0x207)](),_0x1d7575['flash'](_0x5d92a9(0x22d),_0x5d92a9(0x20c)),_0x236db0[_0x5d92a9(0x1ed)](_0x5d92a9(0x1ce));}catch(_0x1214ab){console['log'](_0x1214ab),_0x236db0[_0x5d92a9(0x1cb)](0xc8)[_0x5d92a9(0x23b)]({'message':_0x1214ab[_0x5d92a9(0x21d)]});}else try{const _0x42e666=_0x1d7575['params']['id'];console[_0x5d92a9(0x235)](_0x42e666);const _0xbf8ff2=await sales_return[_0x5d92a9(0x1f9)]({'invoice':_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x22a)]});console[_0x5d92a9(0x235)]('old_data',_0xbf8ff2);const _0x39bc77=await warehouse['findOne']({'name':_0xbf8ff2[_0x5d92a9(0x1f7)],'room':_0xbf8ff2[_0x5d92a9(0x201)]});console[_0x5d92a9(0x235)](_0x5d92a9(0x215),_0x39bc77);const {invoice:_0x51d83f,customer:_0x5e4ff3,date:_0x19f8ba,warehouse_name:_0x2d70a7,product_name:_0x2acd0b,primary_code:_0x34b7b2,secondary_code:_0x4cdcdc,product_code:_0x5d883d,sales_quantity:_0xdd602b,stocks:_0x33aa03,return_qty:_0x79cb5,note:_0x38103f,to_warehouse_name:_0x1d57a6,to_Room_name:_0x45fe45}=_0x1d7575[_0x5d92a9(0x1c7)];console[_0x5d92a9(0x235)](_0x1d7575[_0x5d92a9(0x1c7)]);if(typeof _0x2acd0b==_0x5d92a9(0x1d0))var _0x7882bd=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x209)]],_0x279795=[_0x1d7575['body']['primary_code']],_0x532586=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x20f)]],_0x408fb6=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1f2)]],_0x474ebb=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1da)]],_0x3d28c0=[_0x1d7575['body']['stocks']],_0x57ec97=[_0x1d7575[_0x5d92a9(0x1c7)]['return_qty']],_0x15c226=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x210)]],_0x2c4c91=[_0x1d7575['body'][_0x5d92a9(0x1db)]],_0x3f7d02=[_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1e5)]],_0x33e226=[_0x1d7575[_0x5d92a9(0x1c7)]['floorlevel']];else var _0x7882bd=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x209)]],_0x279795=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x20e)]],_0x532586=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x20f)]],_0x408fb6=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1f2)]],_0x474ebb=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1da)]],_0x3d28c0=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x21f)]],_0x57ec97=[..._0x1d7575['body'][_0x5d92a9(0x1e4)]],_0x15c226=[..._0x1d7575[_0x5d92a9(0x1c7)]['bay']],_0x2c4c91=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1db)]],_0x3f7d02=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x1e5)]],_0x33e226=[..._0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x21b)]];const _0x28e967=_0x7882bd[_0x5d92a9(0x1c3)](_0x3ae94e=>{return _0x3ae94e={'product_name':_0x3ae94e};});_0x279795[_0x5d92a9(0x1f5)]((_0x5e91cf,_0x4e6e6a)=>{var _0x5c0b45=_0x5d92a9;_0x28e967[_0x4e6e6a][_0x5c0b45(0x20e)]=_0x5e91cf;}),_0x532586['forEach']((_0x34e4aa,_0x3f6cad)=>{_0x28e967[_0x3f6cad]['secondary_code']=_0x34e4aa;}),_0x408fb6['forEach']((_0x4b9f8b,_0x43b1e2)=>{var _0xe956f4=_0x5d92a9;_0x28e967[_0x43b1e2][_0xe956f4(0x1f2)]=_0x4b9f8b;}),_0x474ebb[_0x5d92a9(0x1f5)]((_0x18716e,_0x1b1a49)=>{var _0x21736f=_0x5d92a9;_0x28e967[_0x1b1a49][_0x21736f(0x1de)]=_0x18716e;}),_0x3d28c0[_0x5d92a9(0x1f5)]((_0x1a9376,_0x17eb2a)=>{var _0x4732b9=_0x5d92a9;_0x28e967[_0x17eb2a][_0x4732b9(0x236)]=_0x1a9376;}),_0x57ec97['forEach']((_0x89c4c4,_0x3db56e)=>{var _0x2d7d5d=_0x5d92a9;_0x28e967[_0x3db56e][_0x2d7d5d(0x1e4)]=_0x89c4c4;}),_0x15c226['forEach']((_0x4805a7,_0x10097a)=>{var _0x363036=_0x5d92a9;_0x28e967[_0x10097a][_0x363036(0x210)]=_0x4805a7;}),_0x2c4c91[_0x5d92a9(0x1f5)]((_0x3cd65c,_0x3f1bc9)=>{_0x28e967[_0x3f1bc9]['bin']=_0x3cd65c;}),_0x3f7d02[_0x5d92a9(0x1f5)]((_0x45eef5,_0xa59f4d)=>{var _0x3e71b4=_0x5d92a9;_0x28e967[_0xa59f4d][_0x3e71b4(0x1cd)]=_0x45eef5;}),_0x33e226[_0x5d92a9(0x1f5)]((_0x5c8105,_0x59fc3e)=>{_0x28e967[_0x59fc3e]['floorlevel']=_0x5c8105;});var _0x6dfaa6=0x0;_0x28e967[_0x5d92a9(0x1f5)](_0x294914=>{var _0x17c668=_0x5d92a9;console[_0x17c668(0x235)](_0x17c668(0x221),_0x294914),(parseInt(_0x294914['sale_qty'])<parseInt(_0x294914[_0x17c668(0x1e4)])||parseInt(_0x294914['stock'])<parseInt(_0x294914['return_qty'])&&parseInt(_0x294914[_0x17c668(0x1de)])>parseInt(_0x294914[_0x17c668(0x1e4)])||parseInt(_0x294914[_0x17c668(0x1e4)])==0x0)&&_0x6dfaa6++;});if(_0x6dfaa6!=0x0)return _0x1d7575[_0x5d92a9(0x1e9)](_0x5d92a9(0x22c),_0x5d92a9(0x1ee)),_0x236db0[_0x5d92a9(0x1ed)]('back');_0xbf8ff2[_0x5d92a9(0x203)]['forEach'](_0x59e659=>{var _0x99116f=_0x5d92a9;const _0x257fa6=_0x39bc77[_0x99116f(0x1e2)]['map'](_0x3751b1=>{var _0x8500c8=_0x99116f;_0x3751b1['product_name']==_0x59e659[_0x8500c8(0x209)]&&_0x3751b1[_0x8500c8(0x21b)]==_0x59e659[_0x8500c8(0x21b)]&&_0x3751b1[_0x8500c8(0x1cd)]==_0x59e659['type']&&_0x3751b1[_0x8500c8(0x1db)]==_0x59e659[_0x8500c8(0x1db)]&&_0x3751b1['bay']==_0x59e659['bay']&&(_0x3751b1[_0x8500c8(0x1fe)]=parseInt(_0x3751b1[_0x8500c8(0x1fe)])+parseInt(_0x59e659['return_qty']));});}),console[_0x5d92a9(0x235)](_0x5d92a9(0x215),_0x39bc77),await _0x39bc77[_0x5d92a9(0x207)](),_0xbf8ff2['invoice']=_0x51d83f,_0xbf8ff2[_0x5d92a9(0x212)]=_0x5e4ff3,_0xbf8ff2[_0x5d92a9(0x234)]=_0x19f8ba,_0xbf8ff2[_0x5d92a9(0x1c5)]=_0x2d70a7,_0xbf8ff2[_0x5d92a9(0x203)]=_0x28e967,_0xbf8ff2['note']=_0x38103f,_0xbf8ff2[_0x5d92a9(0x1f7)]=_0x1d57a6,_0xbf8ff2[_0x5d92a9(0x201)]=_0x45fe45;const _0x15c62e=await _0xbf8ff2[_0x5d92a9(0x207)]();console[_0x5d92a9(0x235)](_0x5d92a9(0x1cf),_0x15c62e);const _0x2a3e4a=await c_payment_data[_0x5d92a9(0x1f9)]({'invoice':_0x1d7575['body']['invoice'],'reason':_0x5d92a9(0x1e8)});_0x2a3e4a[_0x5d92a9(0x229)]=_0x1d7575[_0x5d92a9(0x1c7)]['suppliers'],_0x2a3e4a[_0x5d92a9(0x234)]=_0x1d7575[_0x5d92a9(0x1c7)][_0x5d92a9(0x234)],await _0x2a3e4a['save'](),_0x1d7575[_0x5d92a9(0x1e9)](_0x5d92a9(0x22d),_0x5d92a9(0x20c)),_0x236db0[_0x5d92a9(0x1ed)]('/sales_return/view');}catch(_0x49eb57){console[_0x5d92a9(0x235)](_0x49eb57),_0x236db0[_0x5d92a9(0x1cb)](0xc8)[_0x5d92a9(0x23b)]({'message':_0x49eb57[_0x5d92a9(0x21d)]});}}),router[a0_0x18667b(0x228)](a0_0x18667b(0x202),auth,async(_0x56451d,_0x321f59)=>{var _0x5b8b03=a0_0x18667b;try{const _0x33c476=_0x56451d['params']['id'],{invoice:_0x571910,customer:_0x39ef8e,payable_to_customer:_0x42e197,paid_amount:_0xbe25ce}=_0x56451d[_0x5b8b03(0x1c7)],_0x106a11=await sales_return[_0x5b8b03(0x1d6)](_0x33c476);console[_0x5b8b03(0x235)](_0x5b8b03(0x225),_0x106a11),console[_0x5b8b03(0x235)](_0x42e197),console[_0x5b8b03(0x235)](_0xbe25ce);var _0x48ccc6=_0x42e197-_0xbe25ce;console['log'](_0x5b8b03(0x1eb),_0x48ccc6),_0x106a11[_0x5b8b03(0x1ef)]=parseFloat(_0xbe25ce)+parseFloat(_0x106a11[_0x5b8b03(0x1ef)]),_0x106a11['due_amount']=_0x48ccc6,console[_0x5b8b03(0x235)](_0x106a11);const _0x2041e4=await _0x106a11[_0x5b8b03(0x207)]();console[_0x5b8b03(0x235)](0x1b207);const _0x37003a=await c_payment_data['findOne']({'invoice':_0x56451d[_0x5b8b03(0x1c7)][_0x5b8b03(0x22a)],'reason':'Sale\x20Return'});console[_0x5b8b03(0x235)](_0x5b8b03(0x1ec),_0x37003a),_0x37003a[_0x5b8b03(0x219)]=_0x48ccc6,await _0x37003a[_0x5b8b03(0x207)]();let _0x553652=new Date(),_0x515e70=('0'+_0x553652[_0x5b8b03(0x23c)]())['slice'](-0x2),_0x93252=('0'+(_0x553652[_0x5b8b03(0x23d)]()+0x1))[_0x5b8b03(0x232)](-0x2),_0x5206ce=_0x553652[_0x5b8b03(0x1ca)](),_0x396c74=_0x5206ce+'-'+_0x93252+'-'+_0x515e70;const _0x51572e=new customer_payment({'invoice':_0x571910,'date':_0x5206ce+'-'+_0x93252+'-'+_0x515e70,'customer':_0x39ef8e,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0xbe25ce}),_0xd20e05=await _0x51572e[_0x5b8b03(0x207)]();_0x56451d[_0x5b8b03(0x1e9)](_0x5b8b03(0x22d),'payment\x20successfull'),_0x321f59[_0x5b8b03(0x1ed)](_0x5b8b03(0x1f8));}catch(_0x4eb587){console[_0x5b8b03(0x235)](_0x4eb587);}}),router['get'](a0_0x18667b(0x1d4),auth,async(_0x5ade99,_0x1731a1)=>{var _0x9a87de=a0_0x18667b;try{const {username:_0x328101,email:_0x43dbb7,role:_0x511bd0}=_0x5ade99[_0x9a87de(0x238)],_0x3aa740=_0x5ade99[_0x9a87de(0x238)],_0x2d0449=await profile[_0x9a87de(0x1f9)]({'email':_0x3aa740[_0x9a87de(0x1f6)]}),_0x3e80bd=await master_shop[_0x9a87de(0x214)]();console['log'](_0x9a87de(0x1e6),_0x3e80bd);const _0x39863e=_0x5ade99['params']['id'],_0x242583=await sales_return['findById'](_0x39863e);console[_0x9a87de(0x235)](_0x242583);const _0x15c7ff=await customer[_0x9a87de(0x1f9)]({'name':_0x242583[_0x9a87de(0x212)]});console[_0x9a87de(0x235)](_0x15c7ff);if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x22e)){var _0x3ad0c5=users[_0x9a87de(0x231)];console[_0x9a87de(0x235)](_0x3ad0c5);}else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x239))var _0x3ad0c5=users[_0x9a87de(0x239)];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]=='German')var _0x3ad0c5=users[_0x9a87de(0x218)];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x223))var _0x3ad0c5=users[_0x9a87de(0x223)];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x217))var _0x3ad0c5=users[_0x9a87de(0x217)];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x1fc))var _0x3ad0c5=users[_0x9a87de(0x1fd)];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]=='Chinese')var _0x3ad0c5=users['Chinese'];else{if(_0x3e80bd[0x0][_0x9a87de(0x22b)]==_0x9a87de(0x1f4))var _0x3ad0c5=users[_0x9a87de(0x237)];}}}}}}}_0x1731a1['render'](_0x9a87de(0x1c4),{'success':_0x5ade99[_0x9a87de(0x1e9)](_0x9a87de(0x22d)),'errors':_0x5ade99[_0x9a87de(0x1e9)](_0x9a87de(0x22c)),'role':_0x3aa740,'profile':_0x2d0449,'master_shop':_0x3e80bd,'customers':_0x15c7ff,'sales':_0x242583,'language':_0x3ad0c5});}catch(_0x47f516){console[_0x9a87de(0x235)](_0x47f516);}}),module['exports']=router;