var a0_0x116727=a0_0x5309;(function(_0x42fc68,_0xcf7fd3){var _0x5d6cc6=a0_0x5309,_0x3ac89a=_0x42fc68();while(!![]){try{var _0x3f9ba8=-parseInt(_0x5d6cc6(0xab))/0x1+parseInt(_0x5d6cc6(0xae))/0x2+parseInt(_0x5d6cc6(0x8b))/0x3*(-parseInt(_0x5d6cc6(0xd5))/0x4)+parseInt(_0x5d6cc6(0xce))/0x5*(-parseInt(_0x5d6cc6(0xc4))/0x6)+parseInt(_0x5d6cc6(0xa9))/0x7+parseInt(_0x5d6cc6(0x8d))/0x8*(parseInt(_0x5d6cc6(0xf1))/0x9)+parseInt(_0x5d6cc6(0xbd))/0xa;if(_0x3f9ba8===_0xcf7fd3)break;else _0x3ac89a['push'](_0x3ac89a['shift']());}catch(_0x1a434c){_0x3ac89a['push'](_0x3ac89a['shift']());}}}(a0_0x51a1,0x3a04a));function a0_0x51a1(){var _0x55977e=['bay','return_qty_QA','German','Finished\x20Goods','map','getMonth','amount','customers','floorlevel','Sale\x20Return','email','back','status','ToWarehouse','21yazBZY','purchase\x20return\x20successfully','519080iwfXqR','product_code','express','log','stocks','product_stock','sales_quantity','../public/language/languages.json','stock','$product_details.product_name','sales_quantity_QA','product_details','findById','success','language','stocks_QA','warehouse_name','params','Enabled','English','$name','payment\x20successfull','$product_details.bin','getFullYear','body','bin','ToRoom','$customer_docs','653758NYiieJ','Router','444159cORmEs','foreach\x20newproduct','customer_docs','87914lKIAcB','/give_payment/:id','Portuguese\x20(BR)','Hindi','master','find','$product_details.secondary_code','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Chinese','data','customer','paid_amount','aggregate','$product_details.product_stock','$product_details._id','5442980iMPHmG','suppliers','flash','$product_details.type','product_name','$product_details','redirect','14262IBskuH','primary_code_QA','note','return_qty','Return\x20Rooms','$product_details.floorlevel','json','Spanish','post','user','610REeHRe','sales_return_finished','get','secondary_code','French','render','/sales_return/view','19588hTEppw','types','product_code_QA','../middleware/auth','product_name_QA','$product_details.primary_code','/sales_return_finished/view','exports','forEach','invoice','sale_qty','findOne','due_amount','errors','Portuguese','QA\x20Warehouse','getDate','old_warehouse_data','old_data','Returned\x20Payment\x20For\x20Sale\x20Return','secondary_code_QA','slice','return_sale','name','save','Arabic\x20(ae)','date','English\x20(US)','45lUSqPT','message','$product_details.product_code','type','sales_return_invoice','Arabic','/view','primary_code','string'];a0_0x51a1=function(){return _0x55977e;};return a0_0x51a1();}const express=require(a0_0x116727(0x8f)),app=express(),router=express[a0_0x116727(0xaa)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x116727(0xd8)),users=require(a0_0x116727(0x94));function a0_0x5309(_0x91ae0a,_0x590e67){var _0x51a16d=a0_0x51a1();return a0_0x5309=function(_0x530984,_0x133479){_0x530984=_0x530984-0x7b;var _0xd4a0d5=_0x51a16d[_0x530984];return _0xd4a0d5;},a0_0x5309(_0x91ae0a,_0x590e67);}router[a0_0x116727(0xd0)](a0_0x116727(0xf7),auth,async(_0x5446c6,_0x37283c)=>{var _0x57e143=a0_0x116727;try{const {username:_0x487270,email:_0x4f29a2,role:_0x4a2654}=_0x5446c6['user'],_0x589454=_0x5446c6['user'],_0x1a23fb=await profile[_0x57e143(0xe0)]({'email':_0x589454['email']}),_0x54d356=await master_shop[_0x57e143(0xb3)](),_0x256ccc=await sales_return_finished[_0x57e143(0xba)]([{'$lookup':{'from':_0x57e143(0x84),'localField':_0x57e143(0xb8),'foreignField':_0x57e143(0xec),'as':_0x57e143(0xad)}},{'$unwind':_0x57e143(0xa8)}]);if(_0x54d356[0x0]['language']==_0x57e143(0xf0)){var _0x2026c5=users['English'];console['log'](_0x2026c5);}else{if(_0x54d356[0x0][_0x57e143(0x9b)]==_0x57e143(0xb1))var _0x2026c5=users[_0x57e143(0xb1)];else{if(_0x54d356[0x0][_0x57e143(0x9b)]==_0x57e143(0x7f))var _0x2026c5=users[_0x57e143(0x7f)];else{if(_0x54d356[0x0]['language']==_0x57e143(0xcb))var _0x2026c5=users['Spanish'];else{if(_0x54d356[0x0][_0x57e143(0x9b)]==_0x57e143(0xd2))var _0x2026c5=users[_0x57e143(0xd2)];else{if(_0x54d356[0x0][_0x57e143(0x9b)]==_0x57e143(0xb0))var _0x2026c5=users[_0x57e143(0xe3)];else{if(_0x54d356[0x0][_0x57e143(0x9b)]=='Chinese')var _0x2026c5=users[_0x57e143(0xb6)];else{if(_0x54d356[0x0][_0x57e143(0x9b)]=='Arabic\x20(ae)')var _0x2026c5=users['Arabic'];}}}}}}}_0x37283c[_0x57e143(0xd3)](_0x57e143(0xcf),{'success':_0x5446c6[_0x57e143(0xbf)](_0x57e143(0x9a)),'errors':_0x5446c6[_0x57e143(0xbf)]('errors'),'role':_0x589454,'profile':_0x1a23fb,'master_shop':_0x54d356,'user':_0x256ccc,'language':_0x2026c5});}catch(_0x345dff){console['log'](_0x345dff);}}),router[a0_0x116727(0xd0)]('/view/:id',auth,async(_0x5ef7a6,_0x1c2a14)=>{var _0x43493d=a0_0x116727;try{const {username:_0x4be0cb,email:_0x2cda9f,role:_0x60c529}=_0x5ef7a6['user'],_0x10e823=_0x5ef7a6['user'],_0x3cda16=await profile[_0x43493d(0xe0)]({'email':_0x10e823[_0x43493d(0x87)]}),_0x47f3c2=await master_shop[_0x43493d(0xb3)]();console[_0x43493d(0x90)](_0x43493d(0xb2),_0x47f3c2);const _0x5579be=_0x5ef7a6[_0x43493d(0x9e)]['id'];console[_0x43493d(0x90)](_0x5579be);var _0x1fd322=[_0x43493d(0xc8)];const _0x3f4810=await sales_return_finished[_0x43493d(0x99)](_0x5579be),_0xca7284=await warehouse[_0x43493d(0xba)]([{'$match':{'name':_0x3f4810['ToWarehouse'],'room':_0x3f4810[_0x43493d(0xa7)]}},{'$unwind':_0x43493d(0xc2)},{'$group':{'_id':_0x43493d(0xbc),'name':{'$first':_0x43493d(0x96)},'product_stock':{'$first':_0x43493d(0xbb)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x43493d(0xa3)},'type':{'$first':_0x43493d(0xc0)},'floorlevel':{'$first':_0x43493d(0xc9)},'primary_code':{'$first':_0x43493d(0xda)},'secondary_code':{'$first':_0x43493d(0xb4)},'product_code':{'$first':_0x43493d(0xf3)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x43493d(0x90)](_0xca7284);const _0x3ddff2=await warehouse[_0x43493d(0xba)]([{'$match':{'status':_0x43493d(0x9f),'warehouse_category':_0x43493d(0x80)}},{'$group':{'_id':_0x43493d(0xa1),'name':{'$first':_0x43493d(0xa1)}}},{'$sort':{'name':0x1}}]),_0x44bd05=await warehouse[_0x43493d(0xba)]([{'$match':{'status':_0x43493d(0x9f),'name':_0x43493d(0xe4)}},{'$group':{'_id':'$name','name':{'$first':_0x43493d(0xa1)}}},{'$sort':{'name':0x1}}]),_0x49eaad=await product[_0x43493d(0xb3)]({});if(_0x47f3c2[0x0]['language']=='English\x20(US)'){var _0x3b79c3=users[_0x43493d(0xa0)];console[_0x43493d(0x90)](_0x3b79c3);}else{if(_0x47f3c2[0x0]['language']==_0x43493d(0xb1))var _0x3b79c3=users[_0x43493d(0xb1)];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]=='German')var _0x3b79c3=users[_0x43493d(0x7f)];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]==_0x43493d(0xcb))var _0x3b79c3=users[_0x43493d(0xcb)];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]==_0x43493d(0xd2))var _0x3b79c3=users[_0x43493d(0xd2)];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]==_0x43493d(0xb0))var _0x3b79c3=users[_0x43493d(0xe3)];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]==_0x43493d(0xb6))var _0x3b79c3=users['Chinese'];else{if(_0x47f3c2[0x0][_0x43493d(0x9b)]==_0x43493d(0xee))var _0x3b79c3=users[_0x43493d(0xf6)];}}}}}}}_0x1c2a14[_0x43493d(0xd3)]('return_sale_edit_finished',{'success':_0x5ef7a6[_0x43493d(0xbf)](_0x43493d(0x9a)),'errors':_0x5ef7a6[_0x43493d(0xbf)](_0x43493d(0xe2)),'role':_0x10e823,'profile':_0x3cda16,'master_shop':_0x47f3c2,'user':_0x3f4810,'stock':_0xca7284,'unit':_0x49eaad,'language':_0x3b79c3,'warehouses':_0x3ddff2,'rooms':_0x1fd322,'warehouse_QA':_0x44bd05});}catch(_0x39e417){console['log'](_0x39e417);}}),router[a0_0x116727(0xcc)]('/view/:id',auth,async(_0x5f118e,_0x292798)=>{var _0x1e8eb2=a0_0x116727;if(_0x5f118e[_0x1e8eb2(0xa5)]['for_categorize']=='QA')try{const _0x3ac0ca=_0x5f118e['params']['id'],_0x4e44b0=await sales_return[_0x1e8eb2(0xe0)]({'invoice':_0x5f118e['body'][_0x1e8eb2(0xde)]}),_0x2efabc=await warehouse[_0x1e8eb2(0xe0)]({'name':_0x4e44b0[_0x1e8eb2(0x8a)],'room':_0x4e44b0['ToRoom']}),{invoice:_0x28c72f,customer:_0x49b313,date:_0xf8e6be,warehouse_name:_0x5840e0,product_name:_0x46362f,primary_code:_0x46394b,secondary_code:_0x4b5b8e,product_code:_0x4fdcff,sales_quantity:_0x4e3d04,stocks:_0x16e3bf,return_qty:_0x24082a,note:_0x44bbe9,to_warehouse_name_QA:_0xe9372b,to_Room_name_QA:_0x1ad97e}=_0x5f118e['body'];if(typeof product_name_QA==_0x1e8eb2(0x7c))var _0x3a8e5a=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xd9)]],_0x352de8=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xc5)]],_0x558ec6=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xe9)]],_0x13b138=[_0x5f118e['body'][_0x1e8eb2(0xd7)]],_0x3076c9=[_0x5f118e['body'][_0x1e8eb2(0x97)]],_0x8bb932=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x9c)]],_0x564c93=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x7e)]];else var _0x3a8e5a=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xd9)]],_0x352de8=[..._0x5f118e[_0x1e8eb2(0xa5)]['primary_code_QA']],_0x558ec6=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xe9)]],_0x13b138=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xd7)]],_0x3076c9=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x97)]],_0x8bb932=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x9c)]],_0x564c93=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x7e)]];const _0x360b15=_0x3a8e5a['map'](_0x575b6e=>{return _0x575b6e={'product_name':_0x575b6e};});_0x352de8[_0x1e8eb2(0xdd)]((_0x4be339,_0x2d2c02)=>{var _0x3268b5=_0x1e8eb2;_0x360b15[_0x2d2c02][_0x3268b5(0x7b)]=_0x4be339;}),_0x558ec6['forEach']((_0x544220,_0x1c5ac8)=>{var _0xfa568e=_0x1e8eb2;_0x360b15[_0x1c5ac8][_0xfa568e(0xd1)]=_0x544220;}),_0x13b138['forEach']((_0x509d39,_0x392fe4)=>{_0x360b15[_0x392fe4]['product_code']=_0x509d39;}),_0x3076c9[_0x1e8eb2(0xdd)]((_0xfe6ce1,_0x38413d)=>{var _0x1129a1=_0x1e8eb2;_0x360b15[_0x38413d][_0x1129a1(0xdf)]=_0xfe6ce1;}),_0x8bb932[_0x1e8eb2(0xdd)]((_0x12717a,_0x39b5f8)=>{var _0x4461ff=_0x1e8eb2;_0x360b15[_0x39b5f8][_0x4461ff(0x95)]=_0x12717a;}),_0x564c93[_0x1e8eb2(0xdd)]((_0x3d7308,_0xa3359d)=>{var _0x1423c3=_0x1e8eb2;_0x360b15[_0xa3359d][_0x1423c3(0xc7)]=_0x3d7308;}),_0x4e44b0['return_sale_QA']['forEach'](_0x308348=>{var _0x2b4f90=_0x1e8eb2;const _0x47c300=_0x2efabc[_0x2b4f90(0x98)][_0x2b4f90(0x81)](_0x4e5aae=>{var _0x205839=_0x2b4f90;_0x4e5aae[_0x205839(0xc1)]==_0x308348['product_name']&&(_0x4e5aae[_0x205839(0x92)]=parseInt(_0x4e5aae[_0x205839(0x92)])+parseInt(_0x308348[_0x205839(0xc7)]));});}),await _0x2efabc[_0x1e8eb2(0xed)](),_0x4e44b0['invoice']=_0x28c72f,_0x4e44b0[_0x1e8eb2(0xb8)]=_0x49b313,_0x4e44b0['date']=_0xf8e6be,_0x4e44b0[_0x1e8eb2(0x9d)]=_0x5840e0,_0x4e44b0['return_sale_QA']=_0x360b15,_0x4e44b0[_0x1e8eb2(0xc6)]=_0x44bbe9,_0x4e44b0[_0x1e8eb2(0x8a)]=_0xe9372b,_0x4e44b0[_0x1e8eb2(0xa7)]=_0x1ad97e;const _0x56bfc3=await _0x4e44b0[_0x1e8eb2(0xed)](),_0x91bb23=await c_payment_data[_0x1e8eb2(0xe0)]({'invoice':_0x5f118e['body'][_0x1e8eb2(0xde)],'reason':_0x1e8eb2(0x86)});_0x91bb23[_0x1e8eb2(0xbe)]=_0x5f118e['body'][_0x1e8eb2(0xbe)],_0x91bb23['date']=_0x5f118e['body'][_0x1e8eb2(0xef)],await _0x91bb23[_0x1e8eb2(0xed)](),_0x5f118e[_0x1e8eb2(0xbf)](_0x1e8eb2(0x9a),_0x1e8eb2(0x8c)),_0x292798[_0x1e8eb2(0xc3)](_0x1e8eb2(0xdb));}catch(_0x1e537f){console['log'](_0x1e537f),_0x292798['status'](0xc8)[_0x1e8eb2(0xca)]({'message':_0x1e537f[_0x1e8eb2(0xf2)]});}else try{const _0x25460b=_0x5f118e[_0x1e8eb2(0x9e)]['id'];console[_0x1e8eb2(0x90)](_0x25460b);const _0x1eaee1=await sales_return['findOne']({'invoice':_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xde)]});console[_0x1e8eb2(0x90)](_0x1e8eb2(0xe7),_0x1eaee1);const _0x2b7aa4=await warehouse[_0x1e8eb2(0xe0)]({'name':_0x1eaee1[_0x1e8eb2(0x8a)],'room':_0x1eaee1[_0x1e8eb2(0xa7)]});console['log'](_0x1e8eb2(0xe6),_0x2b7aa4);const {invoice:_0xb32275,customer:_0x307ea7,date:_0x140012,warehouse_name:_0xa2cb4,product_name:_0x23db3a,primary_code:_0x4be644,secondary_code:_0x5012a5,product_code:_0x1d7b33,sales_quantity:_0xada569,stocks:_0x535e80,return_qty:_0x194971,note:_0x5e1805,to_warehouse_name:_0x4c6e7d,to_Room_name:_0x433a1e}=_0x5f118e[_0x1e8eb2(0xa5)];console['log'](_0x5f118e[_0x1e8eb2(0xa5)]);if(typeof _0x23db3a==_0x1e8eb2(0x7c))var _0x3a8e5a=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xc1)]],_0x352de8=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x7b)]],_0x558ec6=[_0x5f118e[_0x1e8eb2(0xa5)]['secondary_code']],_0x13b138=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x8e)]],_0x3076c9=[_0x5f118e['body'][_0x1e8eb2(0x93)]],_0x8bb932=[_0x5f118e['body']['stocks']],_0x564c93=[_0x5f118e['body']['return_qty']],_0x1a0330=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x7d)]],_0x19c4d3=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xa6)]],_0x5985ad=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xd6)]],_0x4c458a=[_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x85)]];else var _0x3a8e5a=[..._0x5f118e['body'][_0x1e8eb2(0xc1)]],_0x352de8=[..._0x5f118e[_0x1e8eb2(0xa5)]['primary_code']],_0x558ec6=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xd1)]],_0x13b138=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x8e)]],_0x3076c9=[..._0x5f118e[_0x1e8eb2(0xa5)]['sales_quantity']],_0x8bb932=[..._0x5f118e['body'][_0x1e8eb2(0x91)]],_0x564c93=[..._0x5f118e['body'][_0x1e8eb2(0xc7)]],_0x1a0330=[..._0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0x7d)]],_0x19c4d3=[..._0x5f118e['body'][_0x1e8eb2(0xa6)]],_0x5985ad=[..._0x5f118e[_0x1e8eb2(0xa5)]['types']],_0x4c458a=[..._0x5f118e[_0x1e8eb2(0xa5)]['floorlevel']];const _0x14a2d9=_0x3a8e5a['map'](_0x45962d=>{return _0x45962d={'product_name':_0x45962d};});_0x352de8[_0x1e8eb2(0xdd)]((_0x2e5475,_0x58eb74)=>{var _0x347607=_0x1e8eb2;_0x14a2d9[_0x58eb74][_0x347607(0x7b)]=_0x2e5475;}),_0x558ec6[_0x1e8eb2(0xdd)]((_0x8c089f,_0x5b8d1c)=>{var _0x3f7063=_0x1e8eb2;_0x14a2d9[_0x5b8d1c][_0x3f7063(0xd1)]=_0x8c089f;}),_0x13b138[_0x1e8eb2(0xdd)]((_0x50320a,_0xd5cdfd)=>{var _0x428d30=_0x1e8eb2;_0x14a2d9[_0xd5cdfd][_0x428d30(0x8e)]=_0x50320a;}),_0x3076c9[_0x1e8eb2(0xdd)]((_0x3058c8,_0x1b19dc)=>{var _0x22351e=_0x1e8eb2;_0x14a2d9[_0x1b19dc][_0x22351e(0xdf)]=_0x3058c8;}),_0x8bb932['forEach']((_0x56c9ed,_0x2ed622)=>{var _0x3a0885=_0x1e8eb2;_0x14a2d9[_0x2ed622][_0x3a0885(0x95)]=_0x56c9ed;}),_0x564c93[_0x1e8eb2(0xdd)]((_0xcfb3e5,_0x53f32b)=>{var _0x2a9c1a=_0x1e8eb2;_0x14a2d9[_0x53f32b][_0x2a9c1a(0xc7)]=_0xcfb3e5;}),_0x1a0330[_0x1e8eb2(0xdd)]((_0xd40cc1,_0x83880b)=>{var _0x14b0fc=_0x1e8eb2;_0x14a2d9[_0x83880b][_0x14b0fc(0x7d)]=_0xd40cc1;}),_0x19c4d3[_0x1e8eb2(0xdd)]((_0x214d7b,_0xab1e91)=>{var _0x77bc93=_0x1e8eb2;_0x14a2d9[_0xab1e91][_0x77bc93(0xa6)]=_0x214d7b;}),_0x5985ad['forEach']((_0x358220,_0x563b8b)=>{var _0x2bf146=_0x1e8eb2;_0x14a2d9[_0x563b8b][_0x2bf146(0xf4)]=_0x358220;}),_0x4c458a[_0x1e8eb2(0xdd)]((_0x222cab,_0x37ae28)=>{var _0x24a74e=_0x1e8eb2;_0x14a2d9[_0x37ae28][_0x24a74e(0x85)]=_0x222cab;});var _0x500a96=0x0;_0x14a2d9[_0x1e8eb2(0xdd)](_0x5ad069=>{var _0x77fc14=_0x1e8eb2;console['log'](_0x77fc14(0xac),_0x5ad069),(parseInt(_0x5ad069[_0x77fc14(0xdf)])<parseInt(_0x5ad069[_0x77fc14(0xc7)])||parseInt(_0x5ad069['stock'])<parseInt(_0x5ad069[_0x77fc14(0xc7)])&&parseInt(_0x5ad069[_0x77fc14(0xdf)])>parseInt(_0x5ad069[_0x77fc14(0xc7)])||parseInt(_0x5ad069[_0x77fc14(0xc7)])==0x0)&&_0x500a96++;});if(_0x500a96!=0x0)return _0x5f118e[_0x1e8eb2(0xbf)](_0x1e8eb2(0xe2),_0x1e8eb2(0xb5)),_0x292798[_0x1e8eb2(0xc3)](_0x1e8eb2(0x88));_0x1eaee1['return_sale']['forEach'](_0x51f107=>{var _0x2880ba=_0x1e8eb2;const _0x8871a5=_0x2b7aa4[_0x2880ba(0x98)][_0x2880ba(0x81)](_0x189e74=>{var _0x31adbc=_0x2880ba;_0x189e74[_0x31adbc(0xc1)]==_0x51f107[_0x31adbc(0xc1)]&&_0x189e74[_0x31adbc(0x85)]==_0x51f107['floorlevel']&&_0x189e74['type']==_0x51f107[_0x31adbc(0xf4)]&&_0x189e74[_0x31adbc(0xa6)]==_0x51f107['bin']&&_0x189e74[_0x31adbc(0x7d)]==_0x51f107[_0x31adbc(0x7d)]&&(_0x189e74[_0x31adbc(0x92)]=parseInt(_0x189e74['product_stock'])+parseInt(_0x51f107['return_qty']));});}),console[_0x1e8eb2(0x90)](_0x1e8eb2(0xe6),_0x2b7aa4),await _0x2b7aa4['save'](),_0x1eaee1[_0x1e8eb2(0xde)]=_0xb32275,_0x1eaee1['customer']=_0x307ea7,_0x1eaee1[_0x1e8eb2(0xef)]=_0x140012,_0x1eaee1['warehouse_name']=_0xa2cb4,_0x1eaee1[_0x1e8eb2(0xeb)]=_0x14a2d9,_0x1eaee1[_0x1e8eb2(0xc6)]=_0x5e1805,_0x1eaee1[_0x1e8eb2(0x8a)]=_0x4c6e7d,_0x1eaee1[_0x1e8eb2(0xa7)]=_0x433a1e;const _0x5b9000=await _0x1eaee1[_0x1e8eb2(0xed)]();console['log']('new\x20new_data',_0x5b9000);const _0x5284df=await c_payment_data[_0x1e8eb2(0xe0)]({'invoice':_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xde)],'reason':_0x1e8eb2(0x86)});_0x5284df[_0x1e8eb2(0xbe)]=_0x5f118e[_0x1e8eb2(0xa5)]['suppliers'],_0x5284df[_0x1e8eb2(0xef)]=_0x5f118e[_0x1e8eb2(0xa5)][_0x1e8eb2(0xef)],await _0x5284df['save'](),_0x5f118e['flash']('success','purchase\x20return\x20successfully'),_0x292798[_0x1e8eb2(0xc3)](_0x1e8eb2(0xd4));}catch(_0x1fbceb){console[_0x1e8eb2(0x90)](_0x1fbceb),_0x292798[_0x1e8eb2(0x89)](0xc8)['json']({'message':_0x1fbceb[_0x1e8eb2(0xf2)]});}}),router['post'](a0_0x116727(0xaf),auth,async(_0x2a3005,_0x6fdbb)=>{var _0x28ebad=a0_0x116727;try{const _0x4f767c=_0x2a3005[_0x28ebad(0x9e)]['id'],{invoice:_0x3e069b,customer:_0x33dd03,payable_to_customer:_0x53f126,paid_amount:_0x201863}=_0x2a3005['body'],_0x30676f=await sales_return[_0x28ebad(0x99)](_0x4f767c);console[_0x28ebad(0x90)](_0x28ebad(0xb7),_0x30676f),console[_0x28ebad(0x90)](_0x53f126),console[_0x28ebad(0x90)](_0x201863);var _0x4e1471=_0x53f126-_0x201863;console['log']('subtract',_0x4e1471),_0x30676f[_0x28ebad(0xb9)]=parseFloat(_0x201863)+parseFloat(_0x30676f['paid_amount']),_0x30676f[_0x28ebad(0xe1)]=_0x4e1471,console[_0x28ebad(0x90)](_0x30676f);const _0x1c8185=await _0x30676f[_0x28ebad(0xed)]();console[_0x28ebad(0x90)](0x1b207);const _0x361b54=await c_payment_data[_0x28ebad(0xe0)]({'invoice':_0x2a3005[_0x28ebad(0xa5)]['invoice'],'reason':_0x28ebad(0x86)});console[_0x28ebad(0x90)]('c_payment',_0x361b54),_0x361b54[_0x28ebad(0x83)]=_0x4e1471,await _0x361b54[_0x28ebad(0xed)]();let _0x1f4d3f=new Date(),_0x17a2cf=('0'+_0x1f4d3f[_0x28ebad(0xe5)]())['slice'](-0x2),_0x50a7fa=('0'+(_0x1f4d3f[_0x28ebad(0x82)]()+0x1))[_0x28ebad(0xea)](-0x2),_0x36ccdd=_0x1f4d3f[_0x28ebad(0xa4)](),_0x4d6381=_0x36ccdd+'-'+_0x50a7fa+'-'+_0x17a2cf;const _0x4831b3=new customer_payment({'invoice':_0x3e069b,'date':_0x36ccdd+'-'+_0x50a7fa+'-'+_0x17a2cf,'customer':_0x33dd03,'reason':_0x28ebad(0xe8),'amount':_0x201863}),_0x26958c=await _0x4831b3[_0x28ebad(0xed)]();_0x2a3005[_0x28ebad(0xbf)](_0x28ebad(0x9a),_0x28ebad(0xa2)),_0x6fdbb[_0x28ebad(0xc3)]('/sales_return/view');}catch(_0x1e8bd9){console[_0x28ebad(0x90)](_0x1e8bd9);}}),router[a0_0x116727(0xd0)]('/invoice/:id',auth,async(_0x54e446,_0x1dde4c)=>{var _0x314656=a0_0x116727;try{const {username:_0x4f3c66,email:_0x2ab03e,role:_0xbfc83a}=_0x54e446[_0x314656(0xcd)],_0x44e54e=_0x54e446[_0x314656(0xcd)],_0x2a7441=await profile[_0x314656(0xe0)]({'email':_0x44e54e['email']}),_0x91929=await master_shop['find']();console[_0x314656(0x90)]('master',_0x91929);const _0x3b450e=_0x54e446[_0x314656(0x9e)]['id'],_0x1e855d=await sales_return[_0x314656(0x99)](_0x3b450e);console[_0x314656(0x90)](_0x1e855d);const _0x314268=await customer[_0x314656(0xe0)]({'name':_0x1e855d['customer']});console[_0x314656(0x90)](_0x314268);if(_0x91929[0x0][_0x314656(0x9b)]=='English\x20(US)'){var _0x3e74b3=users[_0x314656(0xa0)];console[_0x314656(0x90)](_0x3e74b3);}else{if(_0x91929[0x0][_0x314656(0x9b)]==_0x314656(0xb1))var _0x3e74b3=users[_0x314656(0xb1)];else{if(_0x91929[0x0][_0x314656(0x9b)]==_0x314656(0x7f))var _0x3e74b3=users['German'];else{if(_0x91929[0x0][_0x314656(0x9b)]==_0x314656(0xcb))var _0x3e74b3=users[_0x314656(0xcb)];else{if(_0x91929[0x0]['language']=='French')var _0x3e74b3=users['French'];else{if(_0x91929[0x0][_0x314656(0x9b)]==_0x314656(0xb0))var _0x3e74b3=users[_0x314656(0xe3)];else{if(_0x91929[0x0]['language']==_0x314656(0xb6))var _0x3e74b3=users[_0x314656(0xb6)];else{if(_0x91929[0x0][_0x314656(0x9b)]==_0x314656(0xee))var _0x3e74b3=users[_0x314656(0xf6)];}}}}}}}_0x1dde4c['render'](_0x314656(0xf5),{'success':_0x54e446[_0x314656(0xbf)](_0x314656(0x9a)),'errors':_0x54e446[_0x314656(0xbf)](_0x314656(0xe2)),'role':_0x44e54e,'profile':_0x2a7441,'master_shop':_0x91929,'customers':_0x314268,'sales':_0x1e855d,'language':_0x3e74b3});}catch(_0x60161a){console[_0x314656(0x90)](_0x60161a);}}),module[a0_0x116727(0xdc)]=router;