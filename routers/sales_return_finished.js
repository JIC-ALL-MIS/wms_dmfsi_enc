function a0_0x1c97(){var _0x161b73=['express','floorlevel','map','product_code','stocks','note','return_sale_QA','slice','Return\x20Rooms','Portuguese\x20(BR)','/sales_return_finished/view','sales_quantity','master','$product_details.storage','Hindi','new\x20new_data','Arabic\x20(ae)','Router','$product_details.bin','Spanish','secondary_code_QA','customers','../models/all_models','72255MbteYc','328450IRxpsY','save','types','Chinese','$product_details.product_code','data','errors','5305902LJRISZ','29790tSwlJz','c_payment','return_sale','findOne','/view/:id','Finished\x20Goods','warehouse_name','json','flash','stock','$name','6tlHmti','product_name_QA','product_code_QA','bay','payment\x20successfull','Returned\x20Payment\x20For\x20Sale\x20Return','../public/language/languages.json','log','11657536drVAZd','ToWarehouse','ToRoom','$product_details.secondary_code','return_qty','stocks_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','2090585cSgQBP','German','secondary_code','language','back','for_categorize','due_amount','post','sales_quantity_QA','customer','type','960rybDnL','48BgVXIK','subtract','$product_details.product_name','Portuguese','status','params','string','invoice','getDate','Enabled','product_details','/invoice/:id','$customer_docs','render','message','old_data','find','French','2457448bXImFW','/view','user','return_qty_QA','English','success','paid_amount','English\x20(US)','exports','sales_return_finished','amount','product_stock','findById','name','aggregate','email','1xGPYsi','date','bin','forEach','suppliers','Sale\x20Return','primary_code','customer_docs','redirect','getMonth','$product_details','$product_details._id','Arabic','$product_details.rack','get','24sVUDkB','return_sale_edit_finished','/give_payment/:id','body','../middleware/auth','product_name','QA\x20Warehouse','purchase\x20return\x20successfully','foreach\x20newproduct'];a0_0x1c97=function(){return _0x161b73;};return a0_0x1c97();}function a0_0x13f2(_0x143d6b,_0x575715){var _0x1c973e=a0_0x1c97();return a0_0x13f2=function(_0x13f23e,_0x3cd7f5){_0x13f23e=_0x13f23e-0x11c;var _0x44f278=_0x1c973e[_0x13f23e];return _0x44f278;},a0_0x13f2(_0x143d6b,_0x575715);}var a0_0x48cfe8=a0_0x13f2;(function(_0x429f76,_0x292e67){var _0x392129=a0_0x13f2,_0x22bd29=_0x429f76();while(!![]){try{var _0xc29beb=parseInt(_0x392129(0x12c))/0x1*(-parseInt(_0x392129(0x15c))/0x2)+parseInt(_0x392129(0x15b))/0x3*(-parseInt(_0x392129(0x18a))/0x4)+-parseInt(_0x392129(0x17e))/0x5+-parseInt(_0x392129(0x16f))/0x6*(parseInt(_0x392129(0x163))/0x7)+-parseInt(_0x392129(0x11c))/0x8+parseInt(_0x392129(0x164))/0x9*(parseInt(_0x392129(0x189))/0xa)+parseInt(_0x392129(0x177))/0xb*(parseInt(_0x392129(0x13b))/0xc);if(_0xc29beb===_0x292e67)break;else _0x22bd29['push'](_0x22bd29['shift']());}catch(_0x16fddb){_0x22bd29['push'](_0x22bd29['shift']());}}}(a0_0x1c97,0x7a42f));const express=require(a0_0x48cfe8(0x144)),app=express(),router=express[a0_0x48cfe8(0x155)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x48cfe8(0x15a)),auth=require(a0_0x48cfe8(0x13f)),users=require(a0_0x48cfe8(0x175));router[a0_0x48cfe8(0x13a)](a0_0x48cfe8(0x11d),auth,async(_0x4510d3,_0x366108)=>{var _0x2fd178=a0_0x48cfe8;try{const {username:_0x178771,email:_0x528999,role:_0x456134}=_0x4510d3[_0x2fd178(0x11e)],_0x2599d1=_0x4510d3[_0x2fd178(0x11e)],_0x5dbd2b=await profile[_0x2fd178(0x167)]({'email':_0x2599d1['email']}),_0x419bd0=await master_shop[_0x2fd178(0x19a)](),_0xb69e37=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x2fd178(0x159),'localField':_0x2fd178(0x187),'foreignField':_0x2fd178(0x129),'as':_0x2fd178(0x133)}},{'$unwind':_0x2fd178(0x196)}]);if(_0x419bd0[0x0]['language']=='English\x20(US)'){var _0xd41b16=users[_0x2fd178(0x120)];console[_0x2fd178(0x176)](_0xd41b16);}else{if(_0x419bd0[0x0]['language']=='Hindi')var _0xd41b16=users['Hindi'];else{if(_0x419bd0[0x0]['language']==_0x2fd178(0x17f))var _0xd41b16=users[_0x2fd178(0x17f)];else{if(_0x419bd0[0x0][_0x2fd178(0x181)]=='Spanish')var _0xd41b16=users[_0x2fd178(0x157)];else{if(_0x419bd0[0x0][_0x2fd178(0x181)]==_0x2fd178(0x19b))var _0xd41b16=users[_0x2fd178(0x19b)];else{if(_0x419bd0[0x0][_0x2fd178(0x181)]=='Portuguese\x20(BR)')var _0xd41b16=users['Portuguese'];else{if(_0x419bd0[0x0][_0x2fd178(0x181)]==_0x2fd178(0x15f))var _0xd41b16=users[_0x2fd178(0x15f)];else{if(_0x419bd0[0x0][_0x2fd178(0x181)]==_0x2fd178(0x154))var _0xd41b16=users['Arabic'];}}}}}}}_0x366108['render'](_0x2fd178(0x125),{'success':_0x4510d3[_0x2fd178(0x16c)](_0x2fd178(0x121)),'errors':_0x4510d3[_0x2fd178(0x16c)](_0x2fd178(0x162)),'role':_0x2599d1,'profile':_0x5dbd2b,'master_shop':_0x419bd0,'user':_0xb69e37,'language':_0xd41b16});}catch(_0x382868){console[_0x2fd178(0x176)](_0x382868);}}),router[a0_0x48cfe8(0x13a)](a0_0x48cfe8(0x168),auth,async(_0x758ef0,_0x44203f)=>{var _0x208deb=a0_0x48cfe8;try{const {username:_0x283884,email:_0x3735b6,role:_0x27cac2}=_0x758ef0[_0x208deb(0x11e)],_0x33cf65=_0x758ef0['user'],_0x2f47a=await profile[_0x208deb(0x167)]({'email':_0x33cf65[_0x208deb(0x12b)]}),_0x19ab0b=await master_shop[_0x208deb(0x19a)]();console['log']('master',_0x19ab0b);const _0x591988=_0x758ef0[_0x208deb(0x18f)]['id'];console['log'](_0x591988);var _0x5b7a10=[_0x208deb(0x14c)];const _0x41c051=await sales_return_finished[_0x208deb(0x128)](_0x591988),_0x54f7bd=await warehouse[_0x208deb(0x12a)]([{'$match':{'name':_0x41c051[_0x208deb(0x178)],'room':_0x41c051[_0x208deb(0x179)]}},{'$unwind':_0x208deb(0x136)},{'$group':{'_id':_0x208deb(0x137),'name':{'$first':_0x208deb(0x18c)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x208deb(0x156)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x208deb(0x17a)},'product_code':{'$first':_0x208deb(0x160)},'storage':{'$first':_0x208deb(0x151)},'rack':{'$first':_0x208deb(0x139)}}}]);console[_0x208deb(0x176)](_0x54f7bd);const _0x4d999b=await warehouse[_0x208deb(0x12a)]([{'$match':{'status':'Enabled','warehouse_category':_0x208deb(0x169)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x1eae96=await warehouse[_0x208deb(0x12a)]([{'$match':{'status':_0x208deb(0x193),'name':_0x208deb(0x141)}},{'$group':{'_id':_0x208deb(0x16e),'name':{'$first':_0x208deb(0x16e)}}},{'$sort':{'name':0x1}}]),_0x3ff450=await product[_0x208deb(0x19a)]({});if(_0x19ab0b[0x0][_0x208deb(0x181)]==_0x208deb(0x123)){var _0x524461=users['English'];console[_0x208deb(0x176)](_0x524461);}else{if(_0x19ab0b[0x0][_0x208deb(0x181)]==_0x208deb(0x152))var _0x524461=users[_0x208deb(0x152)];else{if(_0x19ab0b[0x0]['language']=='German')var _0x524461=users[_0x208deb(0x17f)];else{if(_0x19ab0b[0x0][_0x208deb(0x181)]==_0x208deb(0x157))var _0x524461=users[_0x208deb(0x157)];else{if(_0x19ab0b[0x0]['language']==_0x208deb(0x19b))var _0x524461=users[_0x208deb(0x19b)];else{if(_0x19ab0b[0x0][_0x208deb(0x181)]==_0x208deb(0x14d))var _0x524461=users['Portuguese'];else{if(_0x19ab0b[0x0][_0x208deb(0x181)]=='Chinese')var _0x524461=users[_0x208deb(0x15f)];else{if(_0x19ab0b[0x0][_0x208deb(0x181)]==_0x208deb(0x154))var _0x524461=users[_0x208deb(0x138)];}}}}}}}_0x44203f[_0x208deb(0x197)](_0x208deb(0x13c),{'success':_0x758ef0[_0x208deb(0x16c)]('success'),'errors':_0x758ef0[_0x208deb(0x16c)](_0x208deb(0x162)),'role':_0x33cf65,'profile':_0x2f47a,'master_shop':_0x19ab0b,'user':_0x41c051,'stock':_0x54f7bd,'unit':_0x3ff450,'language':_0x524461,'warehouses':_0x4d999b,'rooms':_0x5b7a10,'warehouse_QA':_0x1eae96});}catch(_0x47a5a7){console['log'](_0x47a5a7);}}),router[a0_0x48cfe8(0x185)](a0_0x48cfe8(0x168),auth,async(_0x508c11,_0xd1cbee)=>{var _0x4ed5c9=a0_0x48cfe8;if(_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x183)]=='QA')try{const _0xf4b327=_0x508c11[_0x4ed5c9(0x18f)]['id'],_0x2caaa8=await sales_return[_0x4ed5c9(0x167)]({'invoice':_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x191)]}),_0x2b9110=await warehouse[_0x4ed5c9(0x167)]({'name':_0x2caaa8[_0x4ed5c9(0x178)],'room':_0x2caaa8['ToRoom']}),{invoice:_0x9b8664,customer:_0x1c9484,date:_0x1a4055,warehouse_name:_0x49283d,product_name:_0x1368e0,primary_code:_0x5318e8,secondary_code:_0x5c32a6,product_code:_0x196b1d,sales_quantity:_0x1b2c3c,stocks:_0x2dd959,return_qty:_0x404ee9,note:_0x4b1bf4,to_warehouse_name_QA:_0x58672b,to_Room_name_QA:_0x4f1d06}=_0x508c11[_0x4ed5c9(0x13e)];if(typeof product_name_QA==_0x4ed5c9(0x190))var _0x6c02ad=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x170)]],_0x208329=[_0x508c11['body']['primary_code_QA']],_0x29fd53=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x158)]],_0x34cd89=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x171)]],_0x1a6845=[_0x508c11[_0x4ed5c9(0x13e)]['sales_quantity_QA']],_0x1bbed9=[_0x508c11['body'][_0x4ed5c9(0x17c)]],_0x3b2264=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x11f)]];else var _0x6c02ad=[..._0x508c11['body'][_0x4ed5c9(0x170)]],_0x208329=[..._0x508c11[_0x4ed5c9(0x13e)]['primary_code_QA']],_0x29fd53=[..._0x508c11[_0x4ed5c9(0x13e)]['secondary_code_QA']],_0x34cd89=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x171)]],_0x1a6845=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x186)]],_0x1bbed9=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x17c)]],_0x3b2264=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x11f)]];const _0x22eaec=_0x6c02ad['map'](_0x5655e8=>{return _0x5655e8={'product_name':_0x5655e8};});_0x208329[_0x4ed5c9(0x12f)]((_0x23d998,_0x129395)=>{var _0x4215ec=_0x4ed5c9;_0x22eaec[_0x129395][_0x4215ec(0x132)]=_0x23d998;}),_0x29fd53[_0x4ed5c9(0x12f)]((_0x5b245c,_0x13de2e)=>{var _0x43669d=_0x4ed5c9;_0x22eaec[_0x13de2e][_0x43669d(0x180)]=_0x5b245c;}),_0x34cd89[_0x4ed5c9(0x12f)]((_0x1d8cf8,_0x43d1dd)=>{var _0x2f6f24=_0x4ed5c9;_0x22eaec[_0x43d1dd][_0x2f6f24(0x147)]=_0x1d8cf8;}),_0x1a6845[_0x4ed5c9(0x12f)]((_0x40b350,_0x190b7f)=>{_0x22eaec[_0x190b7f]['sale_qty']=_0x40b350;}),_0x1bbed9[_0x4ed5c9(0x12f)]((_0x4e66ca,_0x2e8c91)=>{var _0x3b7f32=_0x4ed5c9;_0x22eaec[_0x2e8c91][_0x3b7f32(0x16d)]=_0x4e66ca;}),_0x3b2264[_0x4ed5c9(0x12f)]((_0x1079ac,_0x58908e)=>{_0x22eaec[_0x58908e]['return_qty']=_0x1079ac;}),_0x2caaa8['return_sale_QA'][_0x4ed5c9(0x12f)](_0x15f5e1=>{const _0x2f223e=_0x2b9110['product_details']['map'](_0x2a0ef2=>{var _0x16c9e5=a0_0x13f2;_0x2a0ef2['product_name']==_0x15f5e1['product_name']&&(_0x2a0ef2['product_stock']=parseInt(_0x2a0ef2['product_stock'])+parseInt(_0x15f5e1[_0x16c9e5(0x17b)]));});}),await _0x2b9110[_0x4ed5c9(0x15d)](),_0x2caaa8[_0x4ed5c9(0x191)]=_0x9b8664,_0x2caaa8[_0x4ed5c9(0x187)]=_0x1c9484,_0x2caaa8['date']=_0x1a4055,_0x2caaa8[_0x4ed5c9(0x16a)]=_0x49283d,_0x2caaa8[_0x4ed5c9(0x14a)]=_0x22eaec,_0x2caaa8[_0x4ed5c9(0x149)]=_0x4b1bf4,_0x2caaa8[_0x4ed5c9(0x178)]=_0x58672b,_0x2caaa8[_0x4ed5c9(0x179)]=_0x4f1d06;const _0x32208b=await _0x2caaa8['save'](),_0x5ae06b=await c_payment_data[_0x4ed5c9(0x167)]({'invoice':_0x508c11['body']['invoice'],'reason':_0x4ed5c9(0x131)});_0x5ae06b[_0x4ed5c9(0x130)]=_0x508c11['body'][_0x4ed5c9(0x130)],_0x5ae06b[_0x4ed5c9(0x12d)]=_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x12d)],await _0x5ae06b['save'](),_0x508c11[_0x4ed5c9(0x16c)](_0x4ed5c9(0x121),_0x4ed5c9(0x142)),_0xd1cbee[_0x4ed5c9(0x134)](_0x4ed5c9(0x14e));}catch(_0x27b454){console['log'](_0x27b454),_0xd1cbee[_0x4ed5c9(0x18e)](0xc8)[_0x4ed5c9(0x16b)]({'message':_0x27b454[_0x4ed5c9(0x198)]});}else try{const _0x1b5a00=_0x508c11[_0x4ed5c9(0x18f)]['id'];console[_0x4ed5c9(0x176)](_0x1b5a00);const _0x2bd889=await sales_return[_0x4ed5c9(0x167)]({'invoice':_0x508c11['body'][_0x4ed5c9(0x191)]});console[_0x4ed5c9(0x176)](_0x4ed5c9(0x199),_0x2bd889);const _0x319a66=await warehouse['findOne']({'name':_0x2bd889[_0x4ed5c9(0x178)],'room':_0x2bd889[_0x4ed5c9(0x179)]});console[_0x4ed5c9(0x176)]('old_warehouse_data',_0x319a66);const {invoice:_0x5eb091,customer:_0xff21a3,date:_0x5a8221,warehouse_name:_0x45087e,product_name:_0x35f437,primary_code:_0x42de62,secondary_code:_0x502b8e,product_code:_0x38d97d,sales_quantity:_0x34de6c,stocks:_0x409c33,return_qty:_0x30117d,note:_0x45d461,to_warehouse_name:_0x30b88b,to_Room_name:_0x561efc}=_0x508c11[_0x4ed5c9(0x13e)];console['log'](_0x508c11[_0x4ed5c9(0x13e)]);if(typeof _0x35f437==_0x4ed5c9(0x190))var _0x6c02ad=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x140)]],_0x208329=[_0x508c11[_0x4ed5c9(0x13e)]['primary_code']],_0x29fd53=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x180)]],_0x34cd89=[_0x508c11['body'][_0x4ed5c9(0x147)]],_0x1a6845=[_0x508c11['body'][_0x4ed5c9(0x14f)]],_0x1bbed9=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x148)]],_0x3b2264=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x17b)]],_0x169c52=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x172)]],_0x874c95=[_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x12e)]],_0x39f9d3=[_0x508c11[_0x4ed5c9(0x13e)]['types']],_0x47db4a=[_0x508c11['body'][_0x4ed5c9(0x145)]];else var _0x6c02ad=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x140)]],_0x208329=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x132)]],_0x29fd53=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x180)]],_0x34cd89=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x147)]],_0x1a6845=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x14f)]],_0x1bbed9=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x148)]],_0x3b2264=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x17b)]],_0x169c52=[..._0x508c11[_0x4ed5c9(0x13e)]['bay']],_0x874c95=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x12e)]],_0x39f9d3=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x15e)]],_0x47db4a=[..._0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x145)]];const _0x15f55c=_0x6c02ad['map'](_0x3ea60b=>{return _0x3ea60b={'product_name':_0x3ea60b};});_0x208329['forEach']((_0x143668,_0xc64912)=>{var _0x22a256=_0x4ed5c9;_0x15f55c[_0xc64912][_0x22a256(0x132)]=_0x143668;}),_0x29fd53[_0x4ed5c9(0x12f)]((_0x58a044,_0x1bcea2)=>{var _0x4b562f=_0x4ed5c9;_0x15f55c[_0x1bcea2][_0x4b562f(0x180)]=_0x58a044;}),_0x34cd89['forEach']((_0x217da4,_0x48e6bd)=>{var _0x186efa=_0x4ed5c9;_0x15f55c[_0x48e6bd][_0x186efa(0x147)]=_0x217da4;}),_0x1a6845[_0x4ed5c9(0x12f)]((_0x2153e7,_0x31b526)=>{_0x15f55c[_0x31b526]['sale_qty']=_0x2153e7;}),_0x1bbed9[_0x4ed5c9(0x12f)]((_0x1516a4,_0x256a4b)=>{var _0xc78d5e=_0x4ed5c9;_0x15f55c[_0x256a4b][_0xc78d5e(0x16d)]=_0x1516a4;}),_0x3b2264[_0x4ed5c9(0x12f)]((_0x36a09f,_0x378b90)=>{_0x15f55c[_0x378b90]['return_qty']=_0x36a09f;}),_0x169c52[_0x4ed5c9(0x12f)]((_0x3bd09d,_0x3f6a10)=>{var _0x183e7f=_0x4ed5c9;_0x15f55c[_0x3f6a10][_0x183e7f(0x172)]=_0x3bd09d;}),_0x874c95[_0x4ed5c9(0x12f)]((_0x532e11,_0x5e7323)=>{var _0xc13a05=_0x4ed5c9;_0x15f55c[_0x5e7323][_0xc13a05(0x12e)]=_0x532e11;}),_0x39f9d3[_0x4ed5c9(0x12f)]((_0x59d85e,_0xa6578e)=>{var _0x55b8ef=_0x4ed5c9;_0x15f55c[_0xa6578e][_0x55b8ef(0x188)]=_0x59d85e;}),_0x47db4a['forEach']((_0x59c905,_0x8e5abb)=>{var _0x71f5fc=_0x4ed5c9;_0x15f55c[_0x8e5abb][_0x71f5fc(0x145)]=_0x59c905;});var _0x3799a1=0x0;_0x15f55c[_0x4ed5c9(0x12f)](_0x55c0a9=>{var _0x1b4378=_0x4ed5c9;console['log'](_0x1b4378(0x143),_0x55c0a9),(parseInt(_0x55c0a9['sale_qty'])<parseInt(_0x55c0a9['return_qty'])||parseInt(_0x55c0a9['stock'])<parseInt(_0x55c0a9['return_qty'])&&parseInt(_0x55c0a9['sale_qty'])>parseInt(_0x55c0a9[_0x1b4378(0x17b)])||parseInt(_0x55c0a9[_0x1b4378(0x17b)])==0x0)&&_0x3799a1++;});if(_0x3799a1!=0x0)return _0x508c11['flash']('errors',_0x4ed5c9(0x17d)),_0xd1cbee[_0x4ed5c9(0x134)](_0x4ed5c9(0x182));_0x2bd889['return_sale'][_0x4ed5c9(0x12f)](_0x4180de=>{var _0xf06d4=_0x4ed5c9;const _0x5ca084=_0x319a66[_0xf06d4(0x194)][_0xf06d4(0x146)](_0x1c0841=>{var _0x56ac2b=_0xf06d4;_0x1c0841[_0x56ac2b(0x140)]==_0x4180de['product_name']&&_0x1c0841['floorlevel']==_0x4180de['floorlevel']&&_0x1c0841[_0x56ac2b(0x188)]==_0x4180de[_0x56ac2b(0x188)]&&_0x1c0841[_0x56ac2b(0x12e)]==_0x4180de[_0x56ac2b(0x12e)]&&_0x1c0841[_0x56ac2b(0x172)]==_0x4180de['bay']&&(_0x1c0841[_0x56ac2b(0x127)]=parseInt(_0x1c0841[_0x56ac2b(0x127)])+parseInt(_0x4180de[_0x56ac2b(0x17b)]));});}),console['log']('old_warehouse_data',_0x319a66),await _0x319a66[_0x4ed5c9(0x15d)](),_0x2bd889[_0x4ed5c9(0x191)]=_0x5eb091,_0x2bd889[_0x4ed5c9(0x187)]=_0xff21a3,_0x2bd889['date']=_0x5a8221,_0x2bd889['warehouse_name']=_0x45087e,_0x2bd889[_0x4ed5c9(0x166)]=_0x15f55c,_0x2bd889[_0x4ed5c9(0x149)]=_0x45d461,_0x2bd889[_0x4ed5c9(0x178)]=_0x30b88b,_0x2bd889['ToRoom']=_0x561efc;const _0xabbbf2=await _0x2bd889[_0x4ed5c9(0x15d)]();console['log'](_0x4ed5c9(0x153),_0xabbbf2);const _0x19f65f=await c_payment_data[_0x4ed5c9(0x167)]({'invoice':_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x191)],'reason':_0x4ed5c9(0x131)});_0x19f65f[_0x4ed5c9(0x130)]=_0x508c11['body']['suppliers'],_0x19f65f[_0x4ed5c9(0x12d)]=_0x508c11[_0x4ed5c9(0x13e)][_0x4ed5c9(0x12d)],await _0x19f65f[_0x4ed5c9(0x15d)](),_0x508c11[_0x4ed5c9(0x16c)](_0x4ed5c9(0x121),'purchase\x20return\x20successfully'),_0xd1cbee['redirect']('/sales_return/view');}catch(_0x26ce6e){console[_0x4ed5c9(0x176)](_0x26ce6e),_0xd1cbee[_0x4ed5c9(0x18e)](0xc8)['json']({'message':_0x26ce6e[_0x4ed5c9(0x198)]});}}),router[a0_0x48cfe8(0x185)](a0_0x48cfe8(0x13d),auth,async(_0x309e0e,_0x4843fc)=>{var _0x34674f=a0_0x48cfe8;try{const _0x3d00ea=_0x309e0e[_0x34674f(0x18f)]['id'],{invoice:_0x3fdfcf,customer:_0x559b30,payable_to_customer:_0x9be920,paid_amount:_0x2d09ec}=_0x309e0e[_0x34674f(0x13e)],_0x537c5f=await sales_return[_0x34674f(0x128)](_0x3d00ea);console[_0x34674f(0x176)](_0x34674f(0x161),_0x537c5f),console[_0x34674f(0x176)](_0x9be920),console['log'](_0x2d09ec);var _0x214f8e=_0x9be920-_0x2d09ec;console[_0x34674f(0x176)](_0x34674f(0x18b),_0x214f8e),_0x537c5f[_0x34674f(0x122)]=parseFloat(_0x2d09ec)+parseFloat(_0x537c5f[_0x34674f(0x122)]),_0x537c5f[_0x34674f(0x184)]=_0x214f8e,console[_0x34674f(0x176)](_0x537c5f);const _0x32d9ee=await _0x537c5f[_0x34674f(0x15d)]();console['log'](0x1b207);const _0x21c365=await c_payment_data[_0x34674f(0x167)]({'invoice':_0x309e0e[_0x34674f(0x13e)]['invoice'],'reason':'Sale\x20Return'});console[_0x34674f(0x176)](_0x34674f(0x165),_0x21c365),_0x21c365[_0x34674f(0x126)]=_0x214f8e,await _0x21c365[_0x34674f(0x15d)]();let _0xb82bb0=new Date(),_0x543464=('0'+_0xb82bb0[_0x34674f(0x192)]())['slice'](-0x2),_0x21e41e=('0'+(_0xb82bb0[_0x34674f(0x135)]()+0x1))[_0x34674f(0x14b)](-0x2),_0xc6b9f7=_0xb82bb0['getFullYear'](),_0x7dfddb=_0xc6b9f7+'-'+_0x21e41e+'-'+_0x543464;const _0x1221d0=new customer_payment({'invoice':_0x3fdfcf,'date':_0xc6b9f7+'-'+_0x21e41e+'-'+_0x543464,'customer':_0x559b30,'reason':_0x34674f(0x174),'amount':_0x2d09ec}),_0x398760=await _0x1221d0[_0x34674f(0x15d)]();_0x309e0e['flash']('success',_0x34674f(0x173)),_0x4843fc[_0x34674f(0x134)]('/sales_return/view');}catch(_0x3365b4){console[_0x34674f(0x176)](_0x3365b4);}}),router['get'](a0_0x48cfe8(0x195),auth,async(_0x2ef4c4,_0x2ab250)=>{var _0x380106=a0_0x48cfe8;try{const {username:_0x517a42,email:_0x1fdbed,role:_0x153b67}=_0x2ef4c4[_0x380106(0x11e)],_0x512bda=_0x2ef4c4['user'],_0x1d4e66=await profile[_0x380106(0x167)]({'email':_0x512bda[_0x380106(0x12b)]}),_0xb8ed2f=await master_shop[_0x380106(0x19a)]();console[_0x380106(0x176)](_0x380106(0x150),_0xb8ed2f);const _0x1409c1=_0x2ef4c4[_0x380106(0x18f)]['id'],_0x292408=await sales_return[_0x380106(0x128)](_0x1409c1);console[_0x380106(0x176)](_0x292408);const _0x8780c3=await customer[_0x380106(0x167)]({'name':_0x292408[_0x380106(0x187)]});console['log'](_0x8780c3);if(_0xb8ed2f[0x0][_0x380106(0x181)]=='English\x20(US)'){var _0x1167b5=users[_0x380106(0x120)];console[_0x380106(0x176)](_0x1167b5);}else{if(_0xb8ed2f[0x0]['language']==_0x380106(0x152))var _0x1167b5=users[_0x380106(0x152)];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]==_0x380106(0x17f))var _0x1167b5=users[_0x380106(0x17f)];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]==_0x380106(0x157))var _0x1167b5=users[_0x380106(0x157)];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]==_0x380106(0x19b))var _0x1167b5=users['French'];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]=='Portuguese\x20(BR)')var _0x1167b5=users[_0x380106(0x18d)];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]==_0x380106(0x15f))var _0x1167b5=users[_0x380106(0x15f)];else{if(_0xb8ed2f[0x0][_0x380106(0x181)]==_0x380106(0x154))var _0x1167b5=users['Arabic'];}}}}}}}_0x2ab250['render']('sales_return_invoice',{'success':_0x2ef4c4[_0x380106(0x16c)](_0x380106(0x121)),'errors':_0x2ef4c4['flash'](_0x380106(0x162)),'role':_0x512bda,'profile':_0x1d4e66,'master_shop':_0xb8ed2f,'customers':_0x8780c3,'sales':_0x292408,'language':_0x1167b5});}catch(_0x5bef4d){console[_0x380106(0x176)](_0x5bef4d);}}),module[a0_0x48cfe8(0x124)]=router;