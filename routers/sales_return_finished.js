function a0_0x39ef(_0x30aa81,_0x468cf0){var _0x58f26e=a0_0x58f2();return a0_0x39ef=function(_0x39efe7,_0x1e6773){_0x39efe7=_0x39efe7-0xb3;var _0x4963e8=_0x58f26e[_0x39efe7];return _0x4963e8;},a0_0x39ef(_0x30aa81,_0x468cf0);}var a0_0x36e83f=a0_0x39ef;function a0_0x58f2(){var _0x122301=['/invoice/:id','product_name','product_details','slice','express','$product_details.bin','getDate','4XfihIn','ToRoom','forEach','new\x20new_data','name','/sales_return/view','note','Enabled','invoice','Return\x20Rooms','Sale\x20Return','5689725UuEoLo','find','822jdVMVL','redirect','user','return_sale_QA','params','Portuguese','sales_return_finished','return_qty','$product_details.storage','success','purchase\x20return\x20successfully','product_name_QA','save','getFullYear','email','json','types','c_payment','$product_details','findOne','product_code_QA','date','QA\x20Warehouse','product_stock','English\x20(US)','stocks_QA','31khPGmj','return_sale','122109uloJnB','Router','English','51328cLThZe','string','../models/all_models','stocks','secondary_code_QA','$product_details.product_stock','Arabic\x20(ae)','bin','suppliers','$product_details.product_name','paid_amount','/give_payment/:id','Hindi','primary_code','$product_details.secondary_code','Portuguese\x20(BR)','sales_return_invoice','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','due_amount','/sales_return_finished/view','11qBtFPi','render','German','$product_details.primary_code','post','findById','back','amount','flash','$product_details.bay','ToWarehouse','secondary_code','type','Spanish','product_code','old_data','floorlevel','data','aggregate','stock','French','1747080CZZEjg','get','return_qty_QA','body','$name','bay','$product_details.rack','return_sale_edit_finished','$product_details.type','Chinese','3245535ViyIDi','getMonth','foreach\x20newproduct','message','language','payment\x20successfull','status','primary_code_QA','old_warehouse_data','errors','master','82306koDJEM','../public/language/languages.json','33530290KEgTns','map','exports','customer','sale_qty','for_categorize','subtract','log','Arabic','sales_quantity_QA'];a0_0x58f2=function(){return _0x122301;};return a0_0x58f2();}(function(_0x2a2291,_0x3591b4){var _0x45e7e0=a0_0x39ef,_0x5902eb=_0x2a2291();while(!![]){try{var _0x3cbfe0=-parseInt(_0x45e7e0(0xe2))/0x1*(-parseInt(_0x45e7e0(0xe7))/0x2)+parseInt(_0x45e7e0(0xe4))/0x3+-parseInt(_0x45e7e0(0xbb))/0x4*(parseInt(_0x45e7e0(0xc6))/0x5)+-parseInt(_0x45e7e0(0xc8))/0x6*(parseInt(_0x45e7e0(0x125))/0x7)+-parseInt(_0x45e7e0(0x110))/0x8+-parseInt(_0x45e7e0(0x11a))/0x9+parseInt(_0x45e7e0(0x127))/0xa*(parseInt(_0x45e7e0(0xfb))/0xb);if(_0x3cbfe0===_0x3591b4)break;else _0x5902eb['push'](_0x5902eb['shift']());}catch(_0x3f42ca){_0x5902eb['push'](_0x5902eb['shift']());}}}(a0_0x58f2,0xd2555));const express=require(a0_0x36e83f(0xb8)),app=express(),router=express[a0_0x36e83f(0xe5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x36e83f(0xe9)),auth=require('../middleware/auth'),users=require(a0_0x36e83f(0x126));router[a0_0x36e83f(0x111)]('/view',auth,async(_0x5f4900,_0x296872)=>{var _0x2bda08=a0_0x36e83f;try{const {username:_0x48e27c,email:_0x52f5cc,role:_0xf01c66}=_0x5f4900[_0x2bda08(0xca)],_0x41bd16=_0x5f4900['user'],_0x337215=await profile[_0x2bda08(0xdb)]({'email':_0x41bd16[_0x2bda08(0xd6)]}),_0x480f1a=await master_shop[_0x2bda08(0xc7)](),_0x1146e4=await sales_return_finished[_0x2bda08(0x10d)]([{'$lookup':{'from':'customers','localField':_0x2bda08(0x12a),'foreignField':_0x2bda08(0xbf),'as':'customer_docs'}},{'$unwind':'$customer_docs'}]);if(_0x480f1a[0x0]['language']==_0x2bda08(0xe0)){var _0x4c2bc4=users[_0x2bda08(0xe6)];console[_0x2bda08(0x12e)](_0x4c2bc4);}else{if(_0x480f1a[0x0][_0x2bda08(0x11e)]=='Hindi')var _0x4c2bc4=users['Hindi'];else{if(_0x480f1a[0x0]['language']==_0x2bda08(0xfd))var _0x4c2bc4=users['German'];else{if(_0x480f1a[0x0][_0x2bda08(0x11e)]==_0x2bda08(0x108))var _0x4c2bc4=users[_0x2bda08(0x108)];else{if(_0x480f1a[0x0][_0x2bda08(0x11e)]=='French')var _0x4c2bc4=users[_0x2bda08(0x10f)];else{if(_0x480f1a[0x0][_0x2bda08(0x11e)]==_0x2bda08(0xf6))var _0x4c2bc4=users[_0x2bda08(0xcd)];else{if(_0x480f1a[0x0][_0x2bda08(0x11e)]=='Chinese')var _0x4c2bc4=users[_0x2bda08(0x119)];else{if(_0x480f1a[0x0]['language']==_0x2bda08(0xed))var _0x4c2bc4=users[_0x2bda08(0x12f)];}}}}}}}_0x296872[_0x2bda08(0xfc)](_0x2bda08(0xce),{'success':_0x5f4900[_0x2bda08(0x103)](_0x2bda08(0xd1)),'errors':_0x5f4900[_0x2bda08(0x103)](_0x2bda08(0x123)),'role':_0x41bd16,'profile':_0x337215,'master_shop':_0x480f1a,'user':_0x1146e4,'language':_0x4c2bc4});}catch(_0x2303f9){console[_0x2bda08(0x12e)](_0x2303f9);}}),router[a0_0x36e83f(0x111)]('/view/:id',auth,async(_0x7b4576,_0x358fbd)=>{var _0x3555cf=a0_0x36e83f;try{const {username:_0xf2692e,email:_0x1e124a,role:_0x5a12fe}=_0x7b4576[_0x3555cf(0xca)],_0x31e0ef=_0x7b4576[_0x3555cf(0xca)],_0x66c6a7=await profile['findOne']({'email':_0x31e0ef[_0x3555cf(0xd6)]}),_0x4b73be=await master_shop['find']();console['log']('master',_0x4b73be);const _0x43ec0f=_0x7b4576[_0x3555cf(0xcc)]['id'];console[_0x3555cf(0x12e)](_0x43ec0f);var _0x4539ff=[_0x3555cf(0xc4)];const _0x2409f4=await sales_return_finished[_0x3555cf(0x100)](_0x43ec0f),_0x51d364=await warehouse['aggregate']([{'$match':{'name':_0x2409f4[_0x3555cf(0x105)],'room':_0x2409f4['ToRoom']}},{'$unwind':_0x3555cf(0xda)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3555cf(0xf0)},'product_stock':{'$first':_0x3555cf(0xec)},'bay':{'$first':_0x3555cf(0x104)},'bin':{'$first':_0x3555cf(0xb9)},'type':{'$first':_0x3555cf(0x118)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x3555cf(0xfe)},'secondary_code':{'$first':_0x3555cf(0xf5)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x3555cf(0xd0)},'rack':{'$first':_0x3555cf(0x116)}}}]);console[_0x3555cf(0x12e)](_0x51d364);const _0x46f620=await warehouse['aggregate']([{'$match':{'status':_0x3555cf(0xc2),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x3555cf(0x114),'name':{'$first':_0x3555cf(0x114)}}},{'$sort':{'name':0x1}}]),_0x36fb75=await warehouse[_0x3555cf(0x10d)]([{'$match':{'status':'Enabled','name':_0x3555cf(0xde)}},{'$group':{'_id':_0x3555cf(0x114),'name':{'$first':_0x3555cf(0x114)}}},{'$sort':{'name':0x1}}]),_0x1096b4=await product[_0x3555cf(0xc7)]({});if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0xe0)){var _0x279ca2=users[_0x3555cf(0xe6)];console[_0x3555cf(0x12e)](_0x279ca2);}else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0xf3))var _0x279ca2=users[_0x3555cf(0xf3)];else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0xfd))var _0x279ca2=users[_0x3555cf(0xfd)];else{if(_0x4b73be[0x0]['language']==_0x3555cf(0x108))var _0x279ca2=users[_0x3555cf(0x108)];else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0x10f))var _0x279ca2=users[_0x3555cf(0x10f)];else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0xf6))var _0x279ca2=users[_0x3555cf(0xcd)];else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]==_0x3555cf(0x119))var _0x279ca2=users[_0x3555cf(0x119)];else{if(_0x4b73be[0x0][_0x3555cf(0x11e)]=='Arabic\x20(ae)')var _0x279ca2=users[_0x3555cf(0x12f)];}}}}}}}_0x358fbd[_0x3555cf(0xfc)](_0x3555cf(0x117),{'success':_0x7b4576[_0x3555cf(0x103)](_0x3555cf(0xd1)),'errors':_0x7b4576[_0x3555cf(0x103)](_0x3555cf(0x123)),'role':_0x31e0ef,'profile':_0x66c6a7,'master_shop':_0x4b73be,'user':_0x2409f4,'stock':_0x51d364,'unit':_0x1096b4,'language':_0x279ca2,'warehouses':_0x46f620,'rooms':_0x4539ff,'warehouse_QA':_0x36fb75});}catch(_0x3f8dec){console['log'](_0x3f8dec);}}),router[a0_0x36e83f(0xff)]('/view/:id',auth,async(_0x119b07,_0x1960cc)=>{var _0x39d5cb=a0_0x36e83f;if(_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x12c)]=='QA')try{const _0x5cb350=_0x119b07['params']['id'],_0x17f68d=await sales_return['findOne']({'invoice':_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xc3)]}),_0x731fcf=await warehouse[_0x39d5cb(0xdb)]({'name':_0x17f68d['ToWarehouse'],'room':_0x17f68d[_0x39d5cb(0xbc)]}),{invoice:_0x222f55,customer:_0x319de7,date:_0x399fd8,warehouse_name:_0x7b2433,product_name:_0x29ce66,primary_code:_0x16048b,secondary_code:_0x3dd596,product_code:_0x3bac49,sales_quantity:_0x1d4798,stocks:_0x555198,return_qty:_0xf39ad5,note:_0x274b71,to_warehouse_name_QA:_0x23afe1,to_Room_name_QA:_0x171d23}=_0x119b07[_0x39d5cb(0x113)];if(typeof product_name_QA==_0x39d5cb(0xe8))var _0x520d78=[_0x119b07['body'][_0x39d5cb(0xd3)]],_0x208373=[_0x119b07['body'][_0x39d5cb(0x121)]],_0x39a45a=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xeb)]],_0x36618b=[_0x119b07[_0x39d5cb(0x113)]['product_code_QA']],_0x15300c=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xb3)]],_0x48d489=[_0x119b07['body'][_0x39d5cb(0xe1)]],_0x15123f=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x112)]];else var _0x520d78=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xd3)]],_0x208373=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x121)]],_0x39a45a=[..._0x119b07[_0x39d5cb(0x113)]['secondary_code_QA']],_0x36618b=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xdc)]],_0x15300c=[..._0x119b07[_0x39d5cb(0x113)]['sales_quantity_QA']],_0x48d489=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xe1)]],_0x15123f=[..._0x119b07[_0x39d5cb(0x113)]['return_qty_QA']];const _0x3f69c7=_0x520d78['map'](_0x1bb8b0=>{return _0x1bb8b0={'product_name':_0x1bb8b0};});_0x208373['forEach']((_0x232266,_0x1f84e4)=>{_0x3f69c7[_0x1f84e4]['primary_code']=_0x232266;}),_0x39a45a[_0x39d5cb(0xbd)]((_0x311141,_0x14014b)=>{var _0x24e867=_0x39d5cb;_0x3f69c7[_0x14014b][_0x24e867(0x106)]=_0x311141;}),_0x36618b[_0x39d5cb(0xbd)]((_0x31fb9e,_0x42c37f)=>{var _0x282345=_0x39d5cb;_0x3f69c7[_0x42c37f][_0x282345(0x109)]=_0x31fb9e;}),_0x15300c[_0x39d5cb(0xbd)]((_0x2da151,_0x971b34)=>{var _0x507ff=_0x39d5cb;_0x3f69c7[_0x971b34][_0x507ff(0x12b)]=_0x2da151;}),_0x48d489[_0x39d5cb(0xbd)]((_0x5c9228,_0x4e95ae)=>{var _0x11e7e8=_0x39d5cb;_0x3f69c7[_0x4e95ae][_0x11e7e8(0x10e)]=_0x5c9228;}),_0x15123f[_0x39d5cb(0xbd)]((_0x1b63fd,_0x363dc3)=>{_0x3f69c7[_0x363dc3]['return_qty']=_0x1b63fd;}),_0x17f68d[_0x39d5cb(0xcb)]['forEach'](_0x3ba0ab=>{var _0x315bfa=_0x39d5cb;const _0x22a515=_0x731fcf[_0x315bfa(0xb6)][_0x315bfa(0x128)](_0x3f6e5d=>{var _0x1a8aad=_0x315bfa;_0x3f6e5d[_0x1a8aad(0xb5)]==_0x3ba0ab[_0x1a8aad(0xb5)]&&(_0x3f6e5d['product_stock']=parseInt(_0x3f6e5d['product_stock'])+parseInt(_0x3ba0ab[_0x1a8aad(0xcf)]));});}),await _0x731fcf['save'](),_0x17f68d[_0x39d5cb(0xc3)]=_0x222f55,_0x17f68d[_0x39d5cb(0x12a)]=_0x319de7,_0x17f68d[_0x39d5cb(0xdd)]=_0x399fd8,_0x17f68d['warehouse_name']=_0x7b2433,_0x17f68d[_0x39d5cb(0xcb)]=_0x3f69c7,_0x17f68d['note']=_0x274b71,_0x17f68d['ToWarehouse']=_0x23afe1,_0x17f68d[_0x39d5cb(0xbc)]=_0x171d23;const _0x5dc7f7=await _0x17f68d[_0x39d5cb(0xd4)](),_0x14a2c6=await c_payment_data[_0x39d5cb(0xdb)]({'invoice':_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xc3)],'reason':'Sale\x20Return'});_0x14a2c6[_0x39d5cb(0xef)]=_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xef)],_0x14a2c6[_0x39d5cb(0xdd)]=_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xdd)],await _0x14a2c6['save'](),_0x119b07[_0x39d5cb(0x103)]('success',_0x39d5cb(0xd2)),_0x1960cc[_0x39d5cb(0xc9)](_0x39d5cb(0xfa));}catch(_0x3c262e){console[_0x39d5cb(0x12e)](_0x3c262e),_0x1960cc[_0x39d5cb(0x120)](0xc8)[_0x39d5cb(0xd7)]({'message':_0x3c262e['message']});}else try{const _0x5110ad=_0x119b07[_0x39d5cb(0xcc)]['id'];console[_0x39d5cb(0x12e)](_0x5110ad);const _0x40f404=await sales_return[_0x39d5cb(0xdb)]({'invoice':_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xc3)]});console[_0x39d5cb(0x12e)](_0x39d5cb(0x10a),_0x40f404);const _0xc6bc1=await warehouse[_0x39d5cb(0xdb)]({'name':_0x40f404[_0x39d5cb(0x105)],'room':_0x40f404['ToRoom']});console['log'](_0x39d5cb(0x122),_0xc6bc1);const {invoice:_0x1a9e9d,customer:_0xcef8d6,date:_0x30b7b2,warehouse_name:_0x131c9a,product_name:_0xe4d0cd,primary_code:_0xc209e7,secondary_code:_0x3d773a,product_code:_0xf184af,sales_quantity:_0x1557fb,stocks:_0x2e3a99,return_qty:_0x25f21a,note:_0x1b8d52,to_warehouse_name:_0x21801,to_Room_name:_0x56e735}=_0x119b07[_0x39d5cb(0x113)];console[_0x39d5cb(0x12e)](_0x119b07[_0x39d5cb(0x113)]);if(typeof _0xe4d0cd==_0x39d5cb(0xe8))var _0x520d78=[_0x119b07[_0x39d5cb(0x113)]['product_name']],_0x208373=[_0x119b07['body']['primary_code']],_0x39a45a=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x106)]],_0x36618b=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x109)]],_0x15300c=[_0x119b07[_0x39d5cb(0x113)]['sales_quantity']],_0x48d489=[_0x119b07['body'][_0x39d5cb(0xea)]],_0x15123f=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xcf)]],_0x1e7b29=[_0x119b07['body'][_0x39d5cb(0x115)]],_0xda241=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xee)]],_0x22541d=[_0x119b07['body'][_0x39d5cb(0xd8)]],_0x345821=[_0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x10b)]];else var _0x520d78=[..._0x119b07['body'][_0x39d5cb(0xb5)]],_0x208373=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xf4)]],_0x39a45a=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x106)]],_0x36618b=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x109)]],_0x15300c=[..._0x119b07[_0x39d5cb(0x113)]['sales_quantity']],_0x48d489=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xea)]],_0x15123f=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0xcf)]],_0x1e7b29=[..._0x119b07[_0x39d5cb(0x113)][_0x39d5cb(0x115)]],_0xda241=[..._0x119b07[_0x39d5cb(0x113)]['bin']],_0x22541d=[..._0x119b07['body'][_0x39d5cb(0xd8)]],_0x345821=[..._0x119b07['body'][_0x39d5cb(0x10b)]];const _0x3cfd69=_0x520d78[_0x39d5cb(0x128)](_0x474b8c=>{return _0x474b8c={'product_name':_0x474b8c};});_0x208373[_0x39d5cb(0xbd)]((_0x194b3c,_0x44dd43)=>{_0x3cfd69[_0x44dd43]['primary_code']=_0x194b3c;}),_0x39a45a[_0x39d5cb(0xbd)]((_0x5c24f6,_0x414f8a)=>{var _0x348912=_0x39d5cb;_0x3cfd69[_0x414f8a][_0x348912(0x106)]=_0x5c24f6;}),_0x36618b[_0x39d5cb(0xbd)]((_0x2fc737,_0x24f7e7)=>{var _0x56df27=_0x39d5cb;_0x3cfd69[_0x24f7e7][_0x56df27(0x109)]=_0x2fc737;}),_0x15300c[_0x39d5cb(0xbd)]((_0x37215c,_0x36b7e9)=>{_0x3cfd69[_0x36b7e9]['sale_qty']=_0x37215c;}),_0x48d489[_0x39d5cb(0xbd)]((_0x1000f6,_0x5268c2)=>{var _0x2007db=_0x39d5cb;_0x3cfd69[_0x5268c2][_0x2007db(0x10e)]=_0x1000f6;}),_0x15123f[_0x39d5cb(0xbd)]((_0x39865e,_0x4dc418)=>{var _0x14e6ab=_0x39d5cb;_0x3cfd69[_0x4dc418][_0x14e6ab(0xcf)]=_0x39865e;}),_0x1e7b29['forEach']((_0x5471a1,_0x343023)=>{var _0x28d527=_0x39d5cb;_0x3cfd69[_0x343023][_0x28d527(0x115)]=_0x5471a1;}),_0xda241[_0x39d5cb(0xbd)]((_0x2f1517,_0x530ac5)=>{var _0x3a60fb=_0x39d5cb;_0x3cfd69[_0x530ac5][_0x3a60fb(0xee)]=_0x2f1517;}),_0x22541d[_0x39d5cb(0xbd)]((_0x596db6,_0x325bea)=>{_0x3cfd69[_0x325bea]['type']=_0x596db6;}),_0x345821[_0x39d5cb(0xbd)]((_0x2c77a1,_0x1ff2cd)=>{var _0x277bad=_0x39d5cb;_0x3cfd69[_0x1ff2cd][_0x277bad(0x10b)]=_0x2c77a1;});var _0x131545=0x0;_0x3cfd69[_0x39d5cb(0xbd)](_0x3415bd=>{var _0x26bd0c=_0x39d5cb;console[_0x26bd0c(0x12e)](_0x26bd0c(0x11c),_0x3415bd),(parseInt(_0x3415bd[_0x26bd0c(0x12b)])<parseInt(_0x3415bd[_0x26bd0c(0xcf)])||parseInt(_0x3415bd['stock'])<parseInt(_0x3415bd[_0x26bd0c(0xcf)])&&parseInt(_0x3415bd[_0x26bd0c(0x12b)])>parseInt(_0x3415bd['return_qty'])||parseInt(_0x3415bd[_0x26bd0c(0xcf)])==0x0)&&_0x131545++;});if(_0x131545!=0x0)return _0x119b07['flash'](_0x39d5cb(0x123),_0x39d5cb(0xf8)),_0x1960cc[_0x39d5cb(0xc9)](_0x39d5cb(0x101));_0x40f404['return_sale'][_0x39d5cb(0xbd)](_0xb6810c=>{var _0x440e10=_0x39d5cb;const _0x574a2f=_0xc6bc1[_0x440e10(0xb6)][_0x440e10(0x128)](_0x11b8fe=>{var _0x51cac8=_0x440e10;_0x11b8fe[_0x51cac8(0xb5)]==_0xb6810c['product_name']&&_0x11b8fe[_0x51cac8(0x10b)]==_0xb6810c['floorlevel']&&_0x11b8fe['type']==_0xb6810c[_0x51cac8(0x107)]&&_0x11b8fe[_0x51cac8(0xee)]==_0xb6810c[_0x51cac8(0xee)]&&_0x11b8fe[_0x51cac8(0x115)]==_0xb6810c['bay']&&(_0x11b8fe[_0x51cac8(0xdf)]=parseInt(_0x11b8fe[_0x51cac8(0xdf)])+parseInt(_0xb6810c[_0x51cac8(0xcf)]));});}),console[_0x39d5cb(0x12e)](_0x39d5cb(0x122),_0xc6bc1),await _0xc6bc1[_0x39d5cb(0xd4)](),_0x40f404[_0x39d5cb(0xc3)]=_0x1a9e9d,_0x40f404['customer']=_0xcef8d6,_0x40f404['date']=_0x30b7b2,_0x40f404['warehouse_name']=_0x131c9a,_0x40f404[_0x39d5cb(0xe3)]=_0x3cfd69,_0x40f404[_0x39d5cb(0xc1)]=_0x1b8d52,_0x40f404[_0x39d5cb(0x105)]=_0x21801,_0x40f404[_0x39d5cb(0xbc)]=_0x56e735;const _0x2afbe8=await _0x40f404[_0x39d5cb(0xd4)]();console[_0x39d5cb(0x12e)](_0x39d5cb(0xbe),_0x2afbe8);const _0x35fb99=await c_payment_data[_0x39d5cb(0xdb)]({'invoice':_0x119b07['body']['invoice'],'reason':_0x39d5cb(0xc5)});_0x35fb99[_0x39d5cb(0xef)]=_0x119b07['body'][_0x39d5cb(0xef)],_0x35fb99[_0x39d5cb(0xdd)]=_0x119b07[_0x39d5cb(0x113)]['date'],await _0x35fb99[_0x39d5cb(0xd4)](),_0x119b07['flash'](_0x39d5cb(0xd1),'purchase\x20return\x20successfully'),_0x1960cc['redirect'](_0x39d5cb(0xc0));}catch(_0x1ac96e){console[_0x39d5cb(0x12e)](_0x1ac96e),_0x1960cc[_0x39d5cb(0x120)](0xc8)[_0x39d5cb(0xd7)]({'message':_0x1ac96e[_0x39d5cb(0x11d)]});}}),router['post'](a0_0x36e83f(0xf2),auth,async(_0x47f698,_0x2bb1e3)=>{var _0x19d623=a0_0x36e83f;try{const _0x5d4b2b=_0x47f698[_0x19d623(0xcc)]['id'],{invoice:_0x1cd927,customer:_0x54797f,payable_to_customer:_0x54ab68,paid_amount:_0xf83502}=_0x47f698['body'],_0x22dd82=await sales_return[_0x19d623(0x100)](_0x5d4b2b);console[_0x19d623(0x12e)](_0x19d623(0x10c),_0x22dd82),console[_0x19d623(0x12e)](_0x54ab68),console['log'](_0xf83502);var _0x263e35=_0x54ab68-_0xf83502;console[_0x19d623(0x12e)](_0x19d623(0x12d),_0x263e35),_0x22dd82[_0x19d623(0xf1)]=parseFloat(_0xf83502)+parseFloat(_0x22dd82[_0x19d623(0xf1)]),_0x22dd82[_0x19d623(0xf9)]=_0x263e35,console[_0x19d623(0x12e)](_0x22dd82);const _0x2cb7cf=await _0x22dd82[_0x19d623(0xd4)]();console[_0x19d623(0x12e)](0x1b207);const _0x310642=await c_payment_data['findOne']({'invoice':_0x47f698[_0x19d623(0x113)][_0x19d623(0xc3)],'reason':'Sale\x20Return'});console['log'](_0x19d623(0xd9),_0x310642),_0x310642[_0x19d623(0x102)]=_0x263e35,await _0x310642[_0x19d623(0xd4)]();let _0x41ccb5=new Date(),_0x45bd41=('0'+_0x41ccb5[_0x19d623(0xba)]())[_0x19d623(0xb7)](-0x2),_0x30ed34=('0'+(_0x41ccb5[_0x19d623(0x11b)]()+0x1))[_0x19d623(0xb7)](-0x2),_0x34e3dc=_0x41ccb5[_0x19d623(0xd5)](),_0xaf462=_0x34e3dc+'-'+_0x30ed34+'-'+_0x45bd41;const _0x54fc41=new customer_payment({'invoice':_0x1cd927,'date':_0x34e3dc+'-'+_0x30ed34+'-'+_0x45bd41,'customer':_0x54797f,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0xf83502}),_0x53e83a=await _0x54fc41[_0x19d623(0xd4)]();_0x47f698[_0x19d623(0x103)](_0x19d623(0xd1),_0x19d623(0x11f)),_0x2bb1e3[_0x19d623(0xc9)](_0x19d623(0xc0));}catch(_0x275060){console[_0x19d623(0x12e)](_0x275060);}}),router[a0_0x36e83f(0x111)](a0_0x36e83f(0xb4),auth,async(_0x1cd3b5,_0x292964)=>{var _0x593594=a0_0x36e83f;try{const {username:_0x5b8b34,email:_0x528e1f,role:_0x1a73f3}=_0x1cd3b5[_0x593594(0xca)],_0x3fecd5=_0x1cd3b5[_0x593594(0xca)],_0xa5a30=await profile[_0x593594(0xdb)]({'email':_0x3fecd5[_0x593594(0xd6)]}),_0x4e93e8=await master_shop[_0x593594(0xc7)]();console[_0x593594(0x12e)](_0x593594(0x124),_0x4e93e8);const _0x1b50cf=_0x1cd3b5['params']['id'],_0x31f8f4=await sales_return[_0x593594(0x100)](_0x1b50cf);console['log'](_0x31f8f4);const _0x104b50=await customer[_0x593594(0xdb)]({'name':_0x31f8f4[_0x593594(0x12a)]});console[_0x593594(0x12e)](_0x104b50);if(_0x4e93e8[0x0]['language']==_0x593594(0xe0)){var _0x32e569=users[_0x593594(0xe6)];console['log'](_0x32e569);}else{if(_0x4e93e8[0x0][_0x593594(0x11e)]==_0x593594(0xf3))var _0x32e569=users['Hindi'];else{if(_0x4e93e8[0x0][_0x593594(0x11e)]==_0x593594(0xfd))var _0x32e569=users[_0x593594(0xfd)];else{if(_0x4e93e8[0x0]['language']==_0x593594(0x108))var _0x32e569=users[_0x593594(0x108)];else{if(_0x4e93e8[0x0]['language']=='French')var _0x32e569=users[_0x593594(0x10f)];else{if(_0x4e93e8[0x0][_0x593594(0x11e)]==_0x593594(0xf6))var _0x32e569=users[_0x593594(0xcd)];else{if(_0x4e93e8[0x0][_0x593594(0x11e)]==_0x593594(0x119))var _0x32e569=users['Chinese'];else{if(_0x4e93e8[0x0][_0x593594(0x11e)]==_0x593594(0xed))var _0x32e569=users['Arabic'];}}}}}}}_0x292964[_0x593594(0xfc)](_0x593594(0xf7),{'success':_0x1cd3b5[_0x593594(0x103)]('success'),'errors':_0x1cd3b5['flash'](_0x593594(0x123)),'role':_0x3fecd5,'profile':_0xa5a30,'master_shop':_0x4e93e8,'customers':_0x104b50,'sales':_0x31f8f4,'language':_0x32e569});}catch(_0x1a47b4){console[_0x593594(0x12e)](_0x1a47b4);}}),module[a0_0x36e83f(0x129)]=router;