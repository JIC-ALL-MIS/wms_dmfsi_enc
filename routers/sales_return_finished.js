function a0_0x16fc(_0x355035,_0x440b57){var _0x2b8d0b=a0_0x2b8d();return a0_0x16fc=function(_0x16fc0a,_0x24d366){_0x16fc0a=_0x16fc0a-0x163;var _0x2f4225=_0x2b8d0b[_0x16fc0a];return _0x2f4225;},a0_0x16fc(_0x355035,_0x440b57);}var a0_0x41901c=a0_0x16fc;function a0_0x2b8d(){var _0x24671b=['redirect','$product_details.secondary_code','log','/invoice/:id','2593932uIQneH','$product_details.product_name','floorlevel','payment\x20successfull','2265juJQmY','sales_return_finished','sales_quantity','1278696egBcGN','for_categorize','product_details','$product_details.primary_code','data','map','product_code','$product_details.product_stock','success','invoice','German','$product_details.rack','English\x20(US)','language','ToRoom','5RORFIa','find','/give_payment/:id','warehouse_name','$customer_docs','QA\x20Warehouse','type','status','product_name','sales_quantity_QA','$product_details.type','stocks_QA','secondary_code','body','date','bay','$product_details.storage','primary_code','/sales_return_finished/view','$name','7tOSMUR','Router','customer','back','name','Chinese','save','../models/all_models','slice','4005198qhzKYU','c_payment','product_stock','purchase\x20return\x20successfully','bin','subtract','Arabic\x20(ae)','due_amount','231056FdAXuk','primary_code_QA','/sales_return/view','Return\x20Rooms','secondary_code_QA','Sale\x20Return','$product_details.bin','master','Spanish','French','flash','customer_docs','stocks','English','product_code_QA','post','return_qty','errors','foreach\x20newproduct','express','findOne','email','Finished\x20Goods','string','message','findById','return_sale','../public/language/languages.json','suppliers','note','Portuguese\x20(BR)','new\x20new_data','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Hindi','paid_amount','get','return_qty_QA','Portuguese','Arabic','getFullYear','ToWarehouse','aggregate','$product_details.floorlevel','214978uEYxII','json','sale_qty','Returned\x20Payment\x20For\x20Sale\x20Return','$product_details','params','$product_details.bay','690KeXCXJ','forEach','10QJqKPD','return_sale_edit_finished','sales_return_invoice','return_sale_QA','getDate','stock','/view/:id','1566702jqojDs','render','user','Enabled','exports','old_warehouse_data','product_name_QA'];a0_0x2b8d=function(){return _0x24671b;};return a0_0x2b8d();}(function(_0x22164a,_0x5e0876){var _0x47741d=a0_0x16fc,_0x4d4f00=_0x22164a();while(!![]){try{var _0x457896=parseInt(_0x47741d(0x1cf))/0x1+-parseInt(_0x47741d(0x1d6))/0x2*(parseInt(_0x47741d(0x16d))/0x3)+parseInt(_0x47741d(0x170))/0x4*(parseInt(_0x47741d(0x17f))/0x5)+-parseInt(_0x47741d(0x1df))/0x6+-parseInt(_0x47741d(0x193))/0x7*(-parseInt(_0x47741d(0x1a4))/0x8)+parseInt(_0x47741d(0x19c))/0x9*(parseInt(_0x47741d(0x1d8))/0xa)+-parseInt(_0x47741d(0x169))/0xb;if(_0x457896===_0x5e0876)break;else _0x4d4f00['push'](_0x4d4f00['shift']());}catch(_0x40b755){_0x4d4f00['push'](_0x4d4f00['shift']());}}}(a0_0x2b8d,0x3d510));const express=require(a0_0x41901c(0x1b7)),app=express(),router=express[a0_0x41901c(0x194)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x41901c(0x19a)),auth=require('../middleware/auth'),users=require(a0_0x41901c(0x1bf));router[a0_0x41901c(0x1c7)]('/view',auth,async(_0x277eef,_0xa312d4)=>{var _0x4eb98e=a0_0x41901c;try{const {username:_0x5ad02d,email:_0x3324a0,role:_0x376f94}=_0x277eef[_0x4eb98e(0x1e1)],_0x5914d5=_0x277eef[_0x4eb98e(0x1e1)],_0x47b121=await profile[_0x4eb98e(0x1b8)]({'email':_0x5914d5[_0x4eb98e(0x1b9)]}),_0x417848=await master_shop[_0x4eb98e(0x180)](),_0x20868e=await sales_return_finished[_0x4eb98e(0x1cd)]([{'$lookup':{'from':'customers','localField':_0x4eb98e(0x195),'foreignField':_0x4eb98e(0x197),'as':_0x4eb98e(0x1af)}},{'$unwind':_0x4eb98e(0x183)}]);if(_0x417848[0x0][_0x4eb98e(0x17d)]==_0x4eb98e(0x17c)){var _0x11a1ce=users[_0x4eb98e(0x1b1)];console[_0x4eb98e(0x167)](_0x11a1ce);}else{if(_0x417848[0x0]['language']==_0x4eb98e(0x1c5))var _0x11a1ce=users[_0x4eb98e(0x1c5)];else{if(_0x417848[0x0]['language']==_0x4eb98e(0x17a))var _0x11a1ce=users['German'];else{if(_0x417848[0x0][_0x4eb98e(0x17d)]==_0x4eb98e(0x1ac))var _0x11a1ce=users[_0x4eb98e(0x1ac)];else{if(_0x417848[0x0][_0x4eb98e(0x17d)]==_0x4eb98e(0x1ad))var _0x11a1ce=users[_0x4eb98e(0x1ad)];else{if(_0x417848[0x0]['language']==_0x4eb98e(0x1c2))var _0x11a1ce=users[_0x4eb98e(0x1c9)];else{if(_0x417848[0x0]['language']=='Chinese')var _0x11a1ce=users[_0x4eb98e(0x198)];else{if(_0x417848[0x0][_0x4eb98e(0x17d)]==_0x4eb98e(0x1a2))var _0x11a1ce=users[_0x4eb98e(0x1ca)];}}}}}}}_0xa312d4[_0x4eb98e(0x1e0)](_0x4eb98e(0x16e),{'success':_0x277eef[_0x4eb98e(0x1ae)](_0x4eb98e(0x178)),'errors':_0x277eef[_0x4eb98e(0x1ae)]('errors'),'role':_0x5914d5,'profile':_0x47b121,'master_shop':_0x417848,'user':_0x20868e,'language':_0x11a1ce});}catch(_0x639ceb){console[_0x4eb98e(0x167)](_0x639ceb);}}),router['get'](a0_0x41901c(0x1de),auth,async(_0x57daa8,_0x5a525f)=>{var _0x1a4c0e=a0_0x41901c;try{const {username:_0x347d5a,email:_0x19fdf5,role:_0x333fc7}=_0x57daa8[_0x1a4c0e(0x1e1)],_0x5a3cd5=_0x57daa8[_0x1a4c0e(0x1e1)],_0xfa2aa0=await profile[_0x1a4c0e(0x1b8)]({'email':_0x5a3cd5[_0x1a4c0e(0x1b9)]}),_0x40af53=await master_shop['find']();console[_0x1a4c0e(0x167)](_0x1a4c0e(0x1ab),_0x40af53);const _0x199b7f=_0x57daa8[_0x1a4c0e(0x1d4)]['id'];console[_0x1a4c0e(0x167)](_0x199b7f);var _0x4cd5d9=[_0x1a4c0e(0x1a7)];const _0xbbd3e6=await sales_return_finished[_0x1a4c0e(0x1bd)](_0x199b7f),_0x4e62bb=await warehouse[_0x1a4c0e(0x1cd)]([{'$match':{'name':_0xbbd3e6[_0x1a4c0e(0x1cc)],'room':_0xbbd3e6[_0x1a4c0e(0x17e)]}},{'$unwind':_0x1a4c0e(0x1d3)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1a4c0e(0x16a)},'product_stock':{'$first':_0x1a4c0e(0x177)},'bay':{'$first':_0x1a4c0e(0x1d5)},'bin':{'$first':_0x1a4c0e(0x1aa)},'type':{'$first':_0x1a4c0e(0x189)},'floorlevel':{'$first':_0x1a4c0e(0x1ce)},'primary_code':{'$first':_0x1a4c0e(0x173)},'secondary_code':{'$first':_0x1a4c0e(0x166)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x1a4c0e(0x18f)},'rack':{'$first':_0x1a4c0e(0x17b)}}}]);console['log'](_0x4e62bb);const _0x495302=await warehouse[_0x1a4c0e(0x1cd)]([{'$match':{'status':_0x1a4c0e(0x1e2),'warehouse_category':_0x1a4c0e(0x1ba)}},{'$group':{'_id':_0x1a4c0e(0x192),'name':{'$first':_0x1a4c0e(0x192)}}},{'$sort':{'name':0x1}}]),_0x34ffaf=await warehouse[_0x1a4c0e(0x1cd)]([{'$match':{'status':'Enabled','name':_0x1a4c0e(0x184)}},{'$group':{'_id':_0x1a4c0e(0x192),'name':{'$first':_0x1a4c0e(0x192)}}},{'$sort':{'name':0x1}}]),_0x3e69c6=await product['find']({});if(_0x40af53[0x0][_0x1a4c0e(0x17d)]=='English\x20(US)'){var _0x10155b=users['English'];console[_0x1a4c0e(0x167)](_0x10155b);}else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x1c5))var _0x10155b=users[_0x1a4c0e(0x1c5)];else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x17a))var _0x10155b=users[_0x1a4c0e(0x17a)];else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x1ac))var _0x10155b=users[_0x1a4c0e(0x1ac)];else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x1ad))var _0x10155b=users[_0x1a4c0e(0x1ad)];else{if(_0x40af53[0x0]['language']==_0x1a4c0e(0x1c2))var _0x10155b=users[_0x1a4c0e(0x1c9)];else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x198))var _0x10155b=users[_0x1a4c0e(0x198)];else{if(_0x40af53[0x0][_0x1a4c0e(0x17d)]==_0x1a4c0e(0x1a2))var _0x10155b=users['Arabic'];}}}}}}}_0x5a525f[_0x1a4c0e(0x1e0)](_0x1a4c0e(0x1d9),{'success':_0x57daa8['flash'](_0x1a4c0e(0x178)),'errors':_0x57daa8[_0x1a4c0e(0x1ae)](_0x1a4c0e(0x1b5)),'role':_0x5a3cd5,'profile':_0xfa2aa0,'master_shop':_0x40af53,'user':_0xbbd3e6,'stock':_0x4e62bb,'unit':_0x3e69c6,'language':_0x10155b,'warehouses':_0x495302,'rooms':_0x4cd5d9,'warehouse_QA':_0x34ffaf});}catch(_0xfa8e0f){console[_0x1a4c0e(0x167)](_0xfa8e0f);}}),router[a0_0x41901c(0x1b3)]('/view/:id',auth,async(_0x14b0be,_0x506b29)=>{var _0x1ca1bf=a0_0x41901c;if(_0x14b0be['body'][_0x1ca1bf(0x171)]=='QA')try{const _0x316e5c=_0x14b0be['params']['id'],_0x47555e=await sales_return['findOne']({'invoice':_0x14b0be['body']['invoice']}),_0x335f4f=await warehouse[_0x1ca1bf(0x1b8)]({'name':_0x47555e[_0x1ca1bf(0x1cc)],'room':_0x47555e['ToRoom']}),{invoice:_0x19434b,customer:_0x543bbe,date:_0xe81a96,warehouse_name:_0x462732,product_name:_0x24920f,primary_code:_0x601876,secondary_code:_0x3cb873,product_code:_0x556c61,sales_quantity:_0x36c741,stocks:_0x34f974,return_qty:_0x320ab2,note:_0x593137,to_warehouse_name_QA:_0x61a18,to_Room_name_QA:_0x4e59d7}=_0x14b0be[_0x1ca1bf(0x18c)];if(typeof product_name_QA==_0x1ca1bf(0x1bb))var _0x3f4b9d=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x164)]],_0x46396b=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1a5)]],_0x4cd242=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1a8)]],_0x11b96e=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1b2)]],_0x43f9d7=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x188)]],_0x513434=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x18a)]],_0x4b849e=[_0x14b0be['body'][_0x1ca1bf(0x1c8)]];else var _0x3f4b9d=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x164)]],_0x46396b=[..._0x14b0be['body'][_0x1ca1bf(0x1a5)]],_0x4cd242=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1a8)]],_0x11b96e=[..._0x14b0be[_0x1ca1bf(0x18c)]['product_code_QA']],_0x43f9d7=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x188)]],_0x513434=[..._0x14b0be[_0x1ca1bf(0x18c)]['stocks_QA']],_0x4b849e=[..._0x14b0be[_0x1ca1bf(0x18c)]['return_qty_QA']];const _0x634bea=_0x3f4b9d[_0x1ca1bf(0x175)](_0x396df6=>{return _0x396df6={'product_name':_0x396df6};});_0x46396b[_0x1ca1bf(0x1d7)]((_0x4b186c,_0x46e17d)=>{var _0x568af4=_0x1ca1bf;_0x634bea[_0x46e17d][_0x568af4(0x190)]=_0x4b186c;}),_0x4cd242[_0x1ca1bf(0x1d7)]((_0x2d92ef,_0x364f47)=>{var _0x3498e8=_0x1ca1bf;_0x634bea[_0x364f47][_0x3498e8(0x18b)]=_0x2d92ef;}),_0x11b96e[_0x1ca1bf(0x1d7)]((_0x6c280d,_0x2d651e)=>{var _0x24aa90=_0x1ca1bf;_0x634bea[_0x2d651e][_0x24aa90(0x176)]=_0x6c280d;}),_0x43f9d7[_0x1ca1bf(0x1d7)]((_0x242480,_0xb96729)=>{var _0x1f34fc=_0x1ca1bf;_0x634bea[_0xb96729][_0x1f34fc(0x1d1)]=_0x242480;}),_0x513434[_0x1ca1bf(0x1d7)]((_0x230344,_0x1f5a31)=>{_0x634bea[_0x1f5a31]['stock']=_0x230344;}),_0x4b849e[_0x1ca1bf(0x1d7)]((_0x50fc4d,_0x32014c)=>{_0x634bea[_0x32014c]['return_qty']=_0x50fc4d;}),_0x47555e[_0x1ca1bf(0x1db)][_0x1ca1bf(0x1d7)](_0x405a79=>{var _0x2cd610=_0x1ca1bf;const _0x2484c2=_0x335f4f[_0x2cd610(0x172)][_0x2cd610(0x175)](_0x2729d4=>{var _0x39d2a7=_0x2cd610;_0x2729d4[_0x39d2a7(0x187)]==_0x405a79[_0x39d2a7(0x187)]&&(_0x2729d4[_0x39d2a7(0x19e)]=parseInt(_0x2729d4['product_stock'])+parseInt(_0x405a79[_0x39d2a7(0x1b4)]));});}),await _0x335f4f['save'](),_0x47555e['invoice']=_0x19434b,_0x47555e[_0x1ca1bf(0x195)]=_0x543bbe,_0x47555e[_0x1ca1bf(0x18d)]=_0xe81a96,_0x47555e[_0x1ca1bf(0x182)]=_0x462732,_0x47555e[_0x1ca1bf(0x1db)]=_0x634bea,_0x47555e[_0x1ca1bf(0x1c1)]=_0x593137,_0x47555e[_0x1ca1bf(0x1cc)]=_0x61a18,_0x47555e[_0x1ca1bf(0x17e)]=_0x4e59d7;const _0x32a74e=await _0x47555e[_0x1ca1bf(0x199)](),_0x1339b1=await c_payment_data[_0x1ca1bf(0x1b8)]({'invoice':_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x179)],'reason':'Sale\x20Return'});_0x1339b1[_0x1ca1bf(0x1c0)]=_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1c0)],_0x1339b1[_0x1ca1bf(0x18d)]=_0x14b0be['body'][_0x1ca1bf(0x18d)],await _0x1339b1['save'](),_0x14b0be[_0x1ca1bf(0x1ae)]('success',_0x1ca1bf(0x19f)),_0x506b29[_0x1ca1bf(0x165)](_0x1ca1bf(0x191));}catch(_0x2dc67f){console[_0x1ca1bf(0x167)](_0x2dc67f),_0x506b29[_0x1ca1bf(0x186)](0xc8)['json']({'message':_0x2dc67f['message']});}else try{const _0xb4a920=_0x14b0be['params']['id'];console[_0x1ca1bf(0x167)](_0xb4a920);const _0x5a339f=await sales_return['findOne']({'invoice':_0x14b0be[_0x1ca1bf(0x18c)]['invoice']});console[_0x1ca1bf(0x167)]('old_data',_0x5a339f);const _0x4167a2=await warehouse[_0x1ca1bf(0x1b8)]({'name':_0x5a339f[_0x1ca1bf(0x1cc)],'room':_0x5a339f[_0x1ca1bf(0x17e)]});console[_0x1ca1bf(0x167)](_0x1ca1bf(0x163),_0x4167a2);const {invoice:_0x211213,customer:_0x3e9f83,date:_0x175fb4,warehouse_name:_0x29c444,product_name:_0x8120e5,primary_code:_0x3cc224,secondary_code:_0x1fdfe8,product_code:_0xac6633,sales_quantity:_0x5c694c,stocks:_0x505b55,return_qty:_0x1adbe9,note:_0x3a4a8d,to_warehouse_name:_0x244e7d,to_Room_name:_0x187a8d}=_0x14b0be[_0x1ca1bf(0x18c)];console[_0x1ca1bf(0x167)](_0x14b0be[_0x1ca1bf(0x18c)]);if(typeof _0x8120e5==_0x1ca1bf(0x1bb))var _0x3f4b9d=[_0x14b0be[_0x1ca1bf(0x18c)]['product_name']],_0x46396b=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x190)]],_0x4cd242=[_0x14b0be['body'][_0x1ca1bf(0x18b)]],_0x11b96e=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x176)]],_0x43f9d7=[_0x14b0be['body'][_0x1ca1bf(0x16f)]],_0x513434=[_0x14b0be[_0x1ca1bf(0x18c)]['stocks']],_0x4b849e=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1b4)]],_0x3bef02=[_0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x18e)]],_0xbeb796=[_0x14b0be['body'][_0x1ca1bf(0x1a0)]],_0x1dc892=[_0x14b0be[_0x1ca1bf(0x18c)]['types']],_0x4305a4=[_0x14b0be[_0x1ca1bf(0x18c)]['floorlevel']];else var _0x3f4b9d=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x187)]],_0x46396b=[..._0x14b0be[_0x1ca1bf(0x18c)]['primary_code']],_0x4cd242=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x18b)]],_0x11b96e=[..._0x14b0be['body'][_0x1ca1bf(0x176)]],_0x43f9d7=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x16f)]],_0x513434=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1b0)]],_0x4b849e=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1b4)]],_0x3bef02=[..._0x14b0be['body']['bay']],_0xbeb796=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x1a0)]],_0x1dc892=[..._0x14b0be['body']['types']],_0x4305a4=[..._0x14b0be[_0x1ca1bf(0x18c)][_0x1ca1bf(0x16b)]];const _0x4bd32d=_0x3f4b9d[_0x1ca1bf(0x175)](_0xfbe277=>{return _0xfbe277={'product_name':_0xfbe277};});_0x46396b[_0x1ca1bf(0x1d7)]((_0x4d5b32,_0x45f044)=>{_0x4bd32d[_0x45f044]['primary_code']=_0x4d5b32;}),_0x4cd242[_0x1ca1bf(0x1d7)]((_0x3db9b1,_0x23d84d)=>{var _0x4cd932=_0x1ca1bf;_0x4bd32d[_0x23d84d][_0x4cd932(0x18b)]=_0x3db9b1;}),_0x11b96e[_0x1ca1bf(0x1d7)]((_0x357a59,_0x52eeb9)=>{_0x4bd32d[_0x52eeb9]['product_code']=_0x357a59;}),_0x43f9d7['forEach']((_0x361cdf,_0x3e1780)=>{_0x4bd32d[_0x3e1780]['sale_qty']=_0x361cdf;}),_0x513434[_0x1ca1bf(0x1d7)]((_0xbaa0ec,_0x44d03e)=>{_0x4bd32d[_0x44d03e]['stock']=_0xbaa0ec;}),_0x4b849e[_0x1ca1bf(0x1d7)]((_0x34a994,_0x490364)=>{var _0x38ab5e=_0x1ca1bf;_0x4bd32d[_0x490364][_0x38ab5e(0x1b4)]=_0x34a994;}),_0x3bef02[_0x1ca1bf(0x1d7)]((_0x24ddd7,_0x5ed05b)=>{var _0x3b5de9=_0x1ca1bf;_0x4bd32d[_0x5ed05b][_0x3b5de9(0x18e)]=_0x24ddd7;}),_0xbeb796[_0x1ca1bf(0x1d7)]((_0x42b299,_0x384acc)=>{var _0x51ad07=_0x1ca1bf;_0x4bd32d[_0x384acc][_0x51ad07(0x1a0)]=_0x42b299;}),_0x1dc892[_0x1ca1bf(0x1d7)]((_0x5e18e8,_0x5cefa1)=>{var _0x22eb32=_0x1ca1bf;_0x4bd32d[_0x5cefa1][_0x22eb32(0x185)]=_0x5e18e8;}),_0x4305a4[_0x1ca1bf(0x1d7)]((_0x1e823e,_0x453e81)=>{_0x4bd32d[_0x453e81]['floorlevel']=_0x1e823e;});var _0x2dbb90=0x0;_0x4bd32d['forEach'](_0x4888cf=>{var _0x4e8c70=_0x1ca1bf;console['log'](_0x4e8c70(0x1b6),_0x4888cf),(parseInt(_0x4888cf[_0x4e8c70(0x1d1)])<parseInt(_0x4888cf['return_qty'])||parseInt(_0x4888cf[_0x4e8c70(0x1dd)])<parseInt(_0x4888cf['return_qty'])&&parseInt(_0x4888cf[_0x4e8c70(0x1d1)])>parseInt(_0x4888cf[_0x4e8c70(0x1b4)])||parseInt(_0x4888cf['return_qty'])==0x0)&&_0x2dbb90++;});if(_0x2dbb90!=0x0)return _0x14b0be[_0x1ca1bf(0x1ae)]('errors',_0x1ca1bf(0x1c4)),_0x506b29['redirect'](_0x1ca1bf(0x196));_0x5a339f['return_sale']['forEach'](_0x1ef74b=>{var _0x5c8980=_0x1ca1bf;const _0x2ed19a=_0x4167a2[_0x5c8980(0x172)][_0x5c8980(0x175)](_0x527c0e=>{var _0x13a688=_0x5c8980;_0x527c0e[_0x13a688(0x187)]==_0x1ef74b[_0x13a688(0x187)]&&_0x527c0e[_0x13a688(0x16b)]==_0x1ef74b[_0x13a688(0x16b)]&&_0x527c0e[_0x13a688(0x185)]==_0x1ef74b['type']&&_0x527c0e[_0x13a688(0x1a0)]==_0x1ef74b['bin']&&_0x527c0e[_0x13a688(0x18e)]==_0x1ef74b[_0x13a688(0x18e)]&&(_0x527c0e[_0x13a688(0x19e)]=parseInt(_0x527c0e[_0x13a688(0x19e)])+parseInt(_0x1ef74b[_0x13a688(0x1b4)]));});}),console[_0x1ca1bf(0x167)](_0x1ca1bf(0x163),_0x4167a2),await _0x4167a2[_0x1ca1bf(0x199)](),_0x5a339f[_0x1ca1bf(0x179)]=_0x211213,_0x5a339f[_0x1ca1bf(0x195)]=_0x3e9f83,_0x5a339f['date']=_0x175fb4,_0x5a339f[_0x1ca1bf(0x182)]=_0x29c444,_0x5a339f[_0x1ca1bf(0x1be)]=_0x4bd32d,_0x5a339f[_0x1ca1bf(0x1c1)]=_0x3a4a8d,_0x5a339f[_0x1ca1bf(0x1cc)]=_0x244e7d,_0x5a339f[_0x1ca1bf(0x17e)]=_0x187a8d;const _0x595f3d=await _0x5a339f[_0x1ca1bf(0x199)]();console['log'](_0x1ca1bf(0x1c3),_0x595f3d);const _0x291006=await c_payment_data[_0x1ca1bf(0x1b8)]({'invoice':_0x14b0be[_0x1ca1bf(0x18c)]['invoice'],'reason':_0x1ca1bf(0x1a9)});_0x291006['suppliers']=_0x14b0be['body']['suppliers'],_0x291006['date']=_0x14b0be['body'][_0x1ca1bf(0x18d)],await _0x291006[_0x1ca1bf(0x199)](),_0x14b0be['flash']('success',_0x1ca1bf(0x19f)),_0x506b29[_0x1ca1bf(0x165)](_0x1ca1bf(0x1a6));}catch(_0x16dde8){console[_0x1ca1bf(0x167)](_0x16dde8),_0x506b29['status'](0xc8)[_0x1ca1bf(0x1d0)]({'message':_0x16dde8[_0x1ca1bf(0x1bc)]});}}),router[a0_0x41901c(0x1b3)](a0_0x41901c(0x181),auth,async(_0x3233a0,_0x239a12)=>{var _0x40864d=a0_0x41901c;try{const _0x437427=_0x3233a0[_0x40864d(0x1d4)]['id'],{invoice:_0x6e74a5,customer:_0x4d1991,payable_to_customer:_0x6bee46,paid_amount:_0x137bbb}=_0x3233a0[_0x40864d(0x18c)],_0x124602=await sales_return[_0x40864d(0x1bd)](_0x437427);console[_0x40864d(0x167)](_0x40864d(0x174),_0x124602),console[_0x40864d(0x167)](_0x6bee46),console[_0x40864d(0x167)](_0x137bbb);var _0x7b1fab=_0x6bee46-_0x137bbb;console[_0x40864d(0x167)](_0x40864d(0x1a1),_0x7b1fab),_0x124602['paid_amount']=parseFloat(_0x137bbb)+parseFloat(_0x124602[_0x40864d(0x1c6)]),_0x124602[_0x40864d(0x1a3)]=_0x7b1fab,console['log'](_0x124602);const _0x2671e2=await _0x124602[_0x40864d(0x199)]();console[_0x40864d(0x167)](0x1b207);const _0x5bc7a5=await c_payment_data['findOne']({'invoice':_0x3233a0[_0x40864d(0x18c)][_0x40864d(0x179)],'reason':_0x40864d(0x1a9)});console['log'](_0x40864d(0x19d),_0x5bc7a5),_0x5bc7a5['amount']=_0x7b1fab,await _0x5bc7a5['save']();let _0x9fdcd0=new Date(),_0x171f36=('0'+_0x9fdcd0[_0x40864d(0x1dc)]())['slice'](-0x2),_0x46b85d=('0'+(_0x9fdcd0['getMonth']()+0x1))[_0x40864d(0x19b)](-0x2),_0x1b8f43=_0x9fdcd0[_0x40864d(0x1cb)](),_0x17bf05=_0x1b8f43+'-'+_0x46b85d+'-'+_0x171f36;const _0x469a44=new customer_payment({'invoice':_0x6e74a5,'date':_0x1b8f43+'-'+_0x46b85d+'-'+_0x171f36,'customer':_0x4d1991,'reason':_0x40864d(0x1d2),'amount':_0x137bbb}),_0x1539fd=await _0x469a44[_0x40864d(0x199)]();_0x3233a0[_0x40864d(0x1ae)](_0x40864d(0x178),_0x40864d(0x16c)),_0x239a12[_0x40864d(0x165)]('/sales_return/view');}catch(_0xa8bc6a){console[_0x40864d(0x167)](_0xa8bc6a);}}),router['get'](a0_0x41901c(0x168),auth,async(_0x360319,_0x489915)=>{var _0x1a364f=a0_0x41901c;try{const {username:_0xf77bd0,email:_0x4edb08,role:_0x1f9437}=_0x360319[_0x1a364f(0x1e1)],_0x36dccc=_0x360319[_0x1a364f(0x1e1)],_0x2cfefa=await profile['findOne']({'email':_0x36dccc[_0x1a364f(0x1b9)]}),_0x273580=await master_shop[_0x1a364f(0x180)]();console[_0x1a364f(0x167)]('master',_0x273580);const _0x4bbec4=_0x360319[_0x1a364f(0x1d4)]['id'],_0x59ce08=await sales_return[_0x1a364f(0x1bd)](_0x4bbec4);console['log'](_0x59ce08);const _0x104dc4=await customer[_0x1a364f(0x1b8)]({'name':_0x59ce08['customer']});console[_0x1a364f(0x167)](_0x104dc4);if(_0x273580[0x0][_0x1a364f(0x17d)]==_0x1a364f(0x17c)){var _0x1a7ee0=users[_0x1a364f(0x1b1)];console[_0x1a364f(0x167)](_0x1a7ee0);}else{if(_0x273580[0x0]['language']==_0x1a364f(0x1c5))var _0x1a7ee0=users[_0x1a364f(0x1c5)];else{if(_0x273580[0x0]['language']==_0x1a364f(0x17a))var _0x1a7ee0=users[_0x1a364f(0x17a)];else{if(_0x273580[0x0]['language']==_0x1a364f(0x1ac))var _0x1a7ee0=users[_0x1a364f(0x1ac)];else{if(_0x273580[0x0][_0x1a364f(0x17d)]==_0x1a364f(0x1ad))var _0x1a7ee0=users[_0x1a364f(0x1ad)];else{if(_0x273580[0x0]['language']=='Portuguese\x20(BR)')var _0x1a7ee0=users[_0x1a364f(0x1c9)];else{if(_0x273580[0x0][_0x1a364f(0x17d)]=='Chinese')var _0x1a7ee0=users[_0x1a364f(0x198)];else{if(_0x273580[0x0][_0x1a364f(0x17d)]=='Arabic\x20(ae)')var _0x1a7ee0=users[_0x1a364f(0x1ca)];}}}}}}}_0x489915['render'](_0x1a364f(0x1da),{'success':_0x360319[_0x1a364f(0x1ae)]('success'),'errors':_0x360319['flash'](_0x1a364f(0x1b5)),'role':_0x36dccc,'profile':_0x2cfefa,'master_shop':_0x273580,'customers':_0x104dc4,'sales':_0x59ce08,'language':_0x1a7ee0});}catch(_0x1f772d){console[_0x1a364f(0x167)](_0x1f772d);}}),module[a0_0x41901c(0x1e3)]=router;