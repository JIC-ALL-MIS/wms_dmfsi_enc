var a0_0x500af8=a0_0x51ca;(function(_0x284a3f,_0x3f3aba){var _0x2365a7=a0_0x51ca,_0x4eb388=_0x284a3f();while(!![]){try{var _0x7821a3=-parseInt(_0x2365a7(0x19f))/0x1*(parseInt(_0x2365a7(0x17f))/0x2)+-parseInt(_0x2365a7(0x1a7))/0x3+parseInt(_0x2365a7(0x157))/0x4+parseInt(_0x2365a7(0x19c))/0x5+-parseInt(_0x2365a7(0x161))/0x6*(parseInt(_0x2365a7(0x152))/0x7)+-parseInt(_0x2365a7(0x198))/0x8*(parseInt(_0x2365a7(0x195))/0x9)+-parseInt(_0x2365a7(0x1a9))/0xa*(-parseInt(_0x2365a7(0x145))/0xb);if(_0x7821a3===_0x3f3aba)break;else _0x4eb388['push'](_0x4eb388['shift']());}catch(_0x24bb22){_0x4eb388['push'](_0x4eb388['shift']());}}}(a0_0x58b4,0x87551));const express=require(a0_0x500af8(0x13f)),app=express(),router=express[a0_0x500af8(0x184)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x500af8(0x14a)),users=require(a0_0x500af8(0x16b));function a0_0x58b4(){var _0x2dc1fd=['/view','6bntwuV','Hindi','German','type','data','bin','errors','find','customer','old_warehouse_data','../public/language/languages.json','Portuguese','Sale\x20Return','return_sale_QA','email','$product_details.rack','slice','$customer_docs','old_data','$name','success','paid_amount','$product_details.floorlevel','warehouse_name','new\x20new_data','$product_details','map','Chinese','suppliers','findById','698252hLFKHi','product_code','$product_details.bay','return_sale','language','Router','product_name','amount','params','$product_details.product_name','secondary_code','log','types','$product_details.type','$product_details.product_code','sales_return_finished','note','status','foreach\x20newproduct','user','secondary_code_QA','sales_quantity_QA','171SVmnpN','for_categorize','QA\x20Warehouse','343400zFNDZT','Returned\x20Payment\x20For\x20Sale\x20Return','return_qty_QA','get','1570705GoWJhC','subtract','stock','1FsuIzI','getMonth','Finished\x20Goods','sale_qty','floorlevel','product_name_QA','findOne','/invoice/:id','994533gIqdPz','customer_docs','13213460lQTeEK','forEach','sales_quantity','return_sale_edit_finished','purchase\x20return\x20successfully','master','bay','product_code_QA','invoice','json','name','date','product_stock','French','product_details','Portuguese\x20(BR)','stocks','stocks_QA','body','primary_code_QA','express','aggregate','string','redirect','sales_return_invoice','English','11rZmyon','primary_code','/sales_return/view','due_amount','getFullYear','../middleware/auth','ToWarehouse','ToRoom','$product_details.primary_code','Arabic','exports','$product_details._id','customers','3318959HeeyxB','save','/view/:id','getDate','Spanish','3556732lufMRv','flash','render','Enabled','return_qty','English\x20(US)','Arabic\x20(ae)','$product_details.storage','/give_payment/:id'];a0_0x58b4=function(){return _0x2dc1fd;};return a0_0x58b4();}function a0_0x51ca(_0x59ac45,_0x4bd5a8){var _0x58b492=a0_0x58b4();return a0_0x51ca=function(_0x51ca77,_0x1da877){_0x51ca77=_0x51ca77-0x12e;var _0x32b280=_0x58b492[_0x51ca77];return _0x32b280;},a0_0x51ca(_0x59ac45,_0x4bd5a8);}router[a0_0x500af8(0x19b)](a0_0x500af8(0x160),auth,async(_0x4fe77e,_0x4f3cdc)=>{var _0x41176b=a0_0x500af8;try{const {username:_0x1be182,email:_0x4102e5,role:_0x1d77e3}=_0x4fe77e[_0x41176b(0x192)],_0x37772f=_0x4fe77e[_0x41176b(0x192)],_0x4b73bd=await profile['findOne']({'email':_0x37772f[_0x41176b(0x16f)]}),_0x35b621=await master_shop[_0x41176b(0x168)](),_0xa08473=await sales_return_finished[_0x41176b(0x140)]([{'$lookup':{'from':_0x41176b(0x151),'localField':_0x41176b(0x169),'foreignField':_0x41176b(0x135),'as':_0x41176b(0x1a8)}},{'$unwind':_0x41176b(0x172)}]);if(_0x35b621[0x0][_0x41176b(0x183)]=='English\x20(US)'){var _0x2935b7=users[_0x41176b(0x144)];console[_0x41176b(0x18a)](_0x2935b7);}else{if(_0x35b621[0x0][_0x41176b(0x183)]=='Hindi')var _0x2935b7=users[_0x41176b(0x162)];else{if(_0x35b621[0x0][_0x41176b(0x183)]==_0x41176b(0x163))var _0x2935b7=users[_0x41176b(0x163)];else{if(_0x35b621[0x0][_0x41176b(0x183)]==_0x41176b(0x156))var _0x2935b7=users[_0x41176b(0x156)];else{if(_0x35b621[0x0][_0x41176b(0x183)]=='French')var _0x2935b7=users[_0x41176b(0x138)];else{if(_0x35b621[0x0]['language']==_0x41176b(0x13a))var _0x2935b7=users[_0x41176b(0x16c)];else{if(_0x35b621[0x0][_0x41176b(0x183)]==_0x41176b(0x17c))var _0x2935b7=users[_0x41176b(0x17c)];else{if(_0x35b621[0x0][_0x41176b(0x183)]==_0x41176b(0x15d))var _0x2935b7=users[_0x41176b(0x14e)];}}}}}}}_0x4f3cdc[_0x41176b(0x159)](_0x41176b(0x18e),{'success':_0x4fe77e[_0x41176b(0x158)]('success'),'errors':_0x4fe77e[_0x41176b(0x158)]('errors'),'role':_0x37772f,'profile':_0x4b73bd,'master_shop':_0x35b621,'user':_0xa08473,'language':_0x2935b7});}catch(_0x3a100a){console[_0x41176b(0x18a)](_0x3a100a);}}),router[a0_0x500af8(0x19b)](a0_0x500af8(0x154),auth,async(_0x26ccb3,_0x59b146)=>{var _0x1bbd20=a0_0x500af8;try{const {username:_0x464631,email:_0x1d9ca9,role:_0x7428a7}=_0x26ccb3['user'],_0x1f9c3b=_0x26ccb3[_0x1bbd20(0x192)],_0x5de6c9=await profile['findOne']({'email':_0x1f9c3b[_0x1bbd20(0x16f)]}),_0xa1c618=await master_shop[_0x1bbd20(0x168)]();console[_0x1bbd20(0x18a)](_0x1bbd20(0x130),_0xa1c618);const _0x286052=_0x26ccb3['params']['id'];console['log'](_0x286052);var _0x93db78=['Return\x20Rooms'];const _0x2b039e=await sales_return_finished['findById'](_0x286052),_0x5029d4=await warehouse[_0x1bbd20(0x140)]([{'$match':{'name':_0x2b039e[_0x1bbd20(0x14b)],'room':_0x2b039e['ToRoom']}},{'$unwind':_0x1bbd20(0x17a)},{'$group':{'_id':_0x1bbd20(0x150),'name':{'$first':_0x1bbd20(0x188)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x1bbd20(0x181)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x1bbd20(0x18c)},'floorlevel':{'$first':_0x1bbd20(0x177)},'primary_code':{'$first':_0x1bbd20(0x14d)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x1bbd20(0x18d)},'storage':{'$first':_0x1bbd20(0x15e)},'rack':{'$first':_0x1bbd20(0x170)}}}]);console[_0x1bbd20(0x18a)](_0x5029d4);const _0x25c801=await warehouse[_0x1bbd20(0x140)]([{'$match':{'status':_0x1bbd20(0x15a),'warehouse_category':_0x1bbd20(0x1a1)}},{'$group':{'_id':_0x1bbd20(0x174),'name':{'$first':_0x1bbd20(0x174)}}},{'$sort':{'name':0x1}}]),_0x299ca7=await warehouse[_0x1bbd20(0x140)]([{'$match':{'status':_0x1bbd20(0x15a),'name':_0x1bbd20(0x197)}},{'$group':{'_id':_0x1bbd20(0x174),'name':{'$first':_0x1bbd20(0x174)}}},{'$sort':{'name':0x1}}]),_0x2e6d6c=await product[_0x1bbd20(0x168)]({});if(_0xa1c618[0x0]['language']==_0x1bbd20(0x15c)){var _0x4bc3b5=users[_0x1bbd20(0x144)];console[_0x1bbd20(0x18a)](_0x4bc3b5);}else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]==_0x1bbd20(0x162))var _0x4bc3b5=users['Hindi'];else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]==_0x1bbd20(0x163))var _0x4bc3b5=users['German'];else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]==_0x1bbd20(0x156))var _0x4bc3b5=users[_0x1bbd20(0x156)];else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]=='French')var _0x4bc3b5=users[_0x1bbd20(0x138)];else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]=='Portuguese\x20(BR)')var _0x4bc3b5=users[_0x1bbd20(0x16c)];else{if(_0xa1c618[0x0]['language']==_0x1bbd20(0x17c))var _0x4bc3b5=users['Chinese'];else{if(_0xa1c618[0x0][_0x1bbd20(0x183)]==_0x1bbd20(0x15d))var _0x4bc3b5=users[_0x1bbd20(0x14e)];}}}}}}}_0x59b146['render'](_0x1bbd20(0x12e),{'success':_0x26ccb3[_0x1bbd20(0x158)](_0x1bbd20(0x175)),'errors':_0x26ccb3[_0x1bbd20(0x158)]('errors'),'role':_0x1f9c3b,'profile':_0x5de6c9,'master_shop':_0xa1c618,'user':_0x2b039e,'stock':_0x5029d4,'unit':_0x2e6d6c,'language':_0x4bc3b5,'warehouses':_0x25c801,'rooms':_0x93db78,'warehouse_QA':_0x299ca7});}catch(_0x2ef8c5){console[_0x1bbd20(0x18a)](_0x2ef8c5);}}),router['post'](a0_0x500af8(0x154),auth,async(_0x492315,_0x3f9d31)=>{var _0x156f5e=a0_0x500af8;if(_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x196)]=='QA')try{const _0x358de0=_0x492315[_0x156f5e(0x187)]['id'],_0x14c976=await sales_return['findOne']({'invoice':_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x133)]}),_0x43e573=await warehouse[_0x156f5e(0x1a5)]({'name':_0x14c976[_0x156f5e(0x14b)],'room':_0x14c976[_0x156f5e(0x14c)]}),{invoice:_0x3a7927,customer:_0x1c6ef3,date:_0x434c27,warehouse_name:_0x462d04,product_name:_0x433b98,primary_code:_0xaf712b,secondary_code:_0x226f34,product_code:_0x43c68c,sales_quantity:_0x474381,stocks:_0x5dd2dd,return_qty:_0x4279fa,note:_0x2d6152,to_warehouse_name_QA:_0x1cbbc1,to_Room_name_QA:_0x12d4be}=_0x492315[_0x156f5e(0x13d)];if(typeof product_name_QA==_0x156f5e(0x141))var _0x5a950f=[_0x492315['body'][_0x156f5e(0x1a4)]],_0x481428=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x13e)]],_0x40ae6e=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x193)]],_0x4555bc=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x132)]],_0x23bc4a=[_0x492315['body'][_0x156f5e(0x194)]],_0x2c0d14=[_0x492315[_0x156f5e(0x13d)]['stocks_QA']],_0x2ad5b7=[_0x492315['body'][_0x156f5e(0x19a)]];else var _0x5a950f=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x1a4)]],_0x481428=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x13e)]],_0x40ae6e=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x193)]],_0x4555bc=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x132)]],_0x23bc4a=[..._0x492315['body'][_0x156f5e(0x194)]],_0x2c0d14=[..._0x492315['body'][_0x156f5e(0x13c)]],_0x2ad5b7=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x19a)]];const _0x4230e5=_0x5a950f['map'](_0x9eb58b=>{return _0x9eb58b={'product_name':_0x9eb58b};});_0x481428[_0x156f5e(0x1aa)]((_0x248dc6,_0x1743af)=>{var _0xf33064=_0x156f5e;_0x4230e5[_0x1743af][_0xf33064(0x146)]=_0x248dc6;}),_0x40ae6e['forEach']((_0x252f98,_0xcd90d)=>{var _0x398b57=_0x156f5e;_0x4230e5[_0xcd90d][_0x398b57(0x189)]=_0x252f98;}),_0x4555bc['forEach']((_0x598e8b,_0x2ef477)=>{var _0x26d4e9=_0x156f5e;_0x4230e5[_0x2ef477][_0x26d4e9(0x180)]=_0x598e8b;}),_0x23bc4a[_0x156f5e(0x1aa)]((_0x3fb144,_0x46b711)=>{var _0x246c03=_0x156f5e;_0x4230e5[_0x46b711][_0x246c03(0x1a2)]=_0x3fb144;}),_0x2c0d14[_0x156f5e(0x1aa)]((_0x3b09b,_0x2d5cb1)=>{var _0x362100=_0x156f5e;_0x4230e5[_0x2d5cb1][_0x362100(0x19e)]=_0x3b09b;}),_0x2ad5b7['forEach']((_0x1a6e91,_0x511254)=>{_0x4230e5[_0x511254]['return_qty']=_0x1a6e91;}),_0x14c976[_0x156f5e(0x16e)][_0x156f5e(0x1aa)](_0x2ec0fd=>{var _0x4c79d9=_0x156f5e;const _0x59aa65=_0x43e573[_0x4c79d9(0x139)]['map'](_0x5450f1=>{var _0x3ded72=_0x4c79d9;_0x5450f1[_0x3ded72(0x185)]==_0x2ec0fd[_0x3ded72(0x185)]&&(_0x5450f1[_0x3ded72(0x137)]=parseInt(_0x5450f1['product_stock'])+parseInt(_0x2ec0fd['return_qty']));});}),await _0x43e573[_0x156f5e(0x153)](),_0x14c976[_0x156f5e(0x133)]=_0x3a7927,_0x14c976['customer']=_0x1c6ef3,_0x14c976[_0x156f5e(0x136)]=_0x434c27,_0x14c976[_0x156f5e(0x178)]=_0x462d04,_0x14c976[_0x156f5e(0x16e)]=_0x4230e5,_0x14c976[_0x156f5e(0x18f)]=_0x2d6152,_0x14c976[_0x156f5e(0x14b)]=_0x1cbbc1,_0x14c976[_0x156f5e(0x14c)]=_0x12d4be;const _0x2c6390=await _0x14c976[_0x156f5e(0x153)](),_0x21fc94=await c_payment_data['findOne']({'invoice':_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x133)],'reason':_0x156f5e(0x16d)});_0x21fc94[_0x156f5e(0x17d)]=_0x492315[_0x156f5e(0x13d)]['suppliers'],_0x21fc94['date']=_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x136)],await _0x21fc94[_0x156f5e(0x153)](),_0x492315['flash'](_0x156f5e(0x175),_0x156f5e(0x12f)),_0x3f9d31[_0x156f5e(0x142)]('/sales_return_finished/view');}catch(_0x21a88d){console[_0x156f5e(0x18a)](_0x21a88d),_0x3f9d31[_0x156f5e(0x190)](0xc8)[_0x156f5e(0x134)]({'message':_0x21a88d['message']});}else try{const _0x440e91=_0x492315[_0x156f5e(0x187)]['id'];console[_0x156f5e(0x18a)](_0x440e91);const _0x8bb236=await sales_return[_0x156f5e(0x1a5)]({'invoice':_0x492315['body'][_0x156f5e(0x133)]});console['log'](_0x156f5e(0x173),_0x8bb236);const _0x219ff9=await warehouse[_0x156f5e(0x1a5)]({'name':_0x8bb236[_0x156f5e(0x14b)],'room':_0x8bb236[_0x156f5e(0x14c)]});console[_0x156f5e(0x18a)](_0x156f5e(0x16a),_0x219ff9);const {invoice:_0x3ae089,customer:_0x5d10d5,date:_0x19fd9a,warehouse_name:_0x5953c5,product_name:_0x5b0762,primary_code:_0xd1befc,secondary_code:_0x5277a7,product_code:_0x594f7f,sales_quantity:_0x48d837,stocks:_0x2ea78e,return_qty:_0x39cc49,note:_0x2788a6,to_warehouse_name:_0x1ac31b,to_Room_name:_0x1b848a}=_0x492315[_0x156f5e(0x13d)];console[_0x156f5e(0x18a)](_0x492315[_0x156f5e(0x13d)]);if(typeof _0x5b0762==_0x156f5e(0x141))var _0x5a950f=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x185)]],_0x481428=[_0x492315['body'][_0x156f5e(0x146)]],_0x40ae6e=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x189)]],_0x4555bc=[_0x492315['body'][_0x156f5e(0x180)]],_0x23bc4a=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x1ab)]],_0x2c0d14=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x13b)]],_0x2ad5b7=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x15b)]],_0x1de70b=[_0x492315[_0x156f5e(0x13d)]['bay']],_0x209ed7=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x166)]],_0x2b0239=[_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x18b)]],_0x5602cf=[_0x492315['body'][_0x156f5e(0x1a3)]];else var _0x5a950f=[..._0x492315['body'][_0x156f5e(0x185)]],_0x481428=[..._0x492315[_0x156f5e(0x13d)]['primary_code']],_0x40ae6e=[..._0x492315['body']['secondary_code']],_0x4555bc=[..._0x492315['body'][_0x156f5e(0x180)]],_0x23bc4a=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x1ab)]],_0x2c0d14=[..._0x492315['body'][_0x156f5e(0x13b)]],_0x2ad5b7=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x15b)]],_0x1de70b=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x131)]],_0x209ed7=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x166)]],_0x2b0239=[..._0x492315['body'][_0x156f5e(0x18b)]],_0x5602cf=[..._0x492315[_0x156f5e(0x13d)][_0x156f5e(0x1a3)]];const _0x481cd0=_0x5a950f[_0x156f5e(0x17b)](_0x55528c=>{return _0x55528c={'product_name':_0x55528c};});_0x481428[_0x156f5e(0x1aa)]((_0x48451d,_0x1cad93)=>{var _0xb69abd=_0x156f5e;_0x481cd0[_0x1cad93][_0xb69abd(0x146)]=_0x48451d;}),_0x40ae6e[_0x156f5e(0x1aa)]((_0x3f1af9,_0x1e7403)=>{var _0x6d5d75=_0x156f5e;_0x481cd0[_0x1e7403][_0x6d5d75(0x189)]=_0x3f1af9;}),_0x4555bc[_0x156f5e(0x1aa)]((_0x19d7f1,_0xaffa9a)=>{var _0xe8072f=_0x156f5e;_0x481cd0[_0xaffa9a][_0xe8072f(0x180)]=_0x19d7f1;}),_0x23bc4a['forEach']((_0x4cb9c9,_0x336faa)=>{var _0x18ab37=_0x156f5e;_0x481cd0[_0x336faa][_0x18ab37(0x1a2)]=_0x4cb9c9;}),_0x2c0d14[_0x156f5e(0x1aa)]((_0x229db6,_0x2a88ba)=>{var _0x47d99d=_0x156f5e;_0x481cd0[_0x2a88ba][_0x47d99d(0x19e)]=_0x229db6;}),_0x2ad5b7[_0x156f5e(0x1aa)]((_0x460033,_0x4725d6)=>{_0x481cd0[_0x4725d6]['return_qty']=_0x460033;}),_0x1de70b['forEach']((_0x82dacf,_0x4925e8)=>{_0x481cd0[_0x4925e8]['bay']=_0x82dacf;}),_0x209ed7[_0x156f5e(0x1aa)]((_0x19d940,_0x4ba825)=>{_0x481cd0[_0x4ba825]['bin']=_0x19d940;}),_0x2b0239[_0x156f5e(0x1aa)]((_0x2397b3,_0x1d7eae)=>{_0x481cd0[_0x1d7eae]['type']=_0x2397b3;}),_0x5602cf['forEach']((_0x1725b2,_0x334491)=>{var _0x596b6c=_0x156f5e;_0x481cd0[_0x334491][_0x596b6c(0x1a3)]=_0x1725b2;});var _0x110f72=0x0;_0x481cd0[_0x156f5e(0x1aa)](_0x4aa756=>{var _0x28ff37=_0x156f5e;console[_0x28ff37(0x18a)](_0x28ff37(0x191),_0x4aa756),(parseInt(_0x4aa756[_0x28ff37(0x1a2)])<parseInt(_0x4aa756[_0x28ff37(0x15b)])||parseInt(_0x4aa756[_0x28ff37(0x19e)])<parseInt(_0x4aa756[_0x28ff37(0x15b)])&&parseInt(_0x4aa756[_0x28ff37(0x1a2)])>parseInt(_0x4aa756[_0x28ff37(0x15b)])||parseInt(_0x4aa756[_0x28ff37(0x15b)])==0x0)&&_0x110f72++;});if(_0x110f72!=0x0)return _0x492315[_0x156f5e(0x158)]('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x3f9d31[_0x156f5e(0x142)]('back');_0x8bb236[_0x156f5e(0x182)][_0x156f5e(0x1aa)](_0x4783b6=>{var _0x51fac6=_0x156f5e;const _0x354cce=_0x219ff9['product_details'][_0x51fac6(0x17b)](_0x3786e5=>{var _0x49ed94=_0x51fac6;_0x3786e5[_0x49ed94(0x185)]==_0x4783b6[_0x49ed94(0x185)]&&_0x3786e5[_0x49ed94(0x1a3)]==_0x4783b6[_0x49ed94(0x1a3)]&&_0x3786e5[_0x49ed94(0x164)]==_0x4783b6[_0x49ed94(0x164)]&&_0x3786e5[_0x49ed94(0x166)]==_0x4783b6[_0x49ed94(0x166)]&&_0x3786e5[_0x49ed94(0x131)]==_0x4783b6[_0x49ed94(0x131)]&&(_0x3786e5['product_stock']=parseInt(_0x3786e5[_0x49ed94(0x137)])+parseInt(_0x4783b6[_0x49ed94(0x15b)]));});}),console[_0x156f5e(0x18a)](_0x156f5e(0x16a),_0x219ff9),await _0x219ff9[_0x156f5e(0x153)](),_0x8bb236[_0x156f5e(0x133)]=_0x3ae089,_0x8bb236['customer']=_0x5d10d5,_0x8bb236[_0x156f5e(0x136)]=_0x19fd9a,_0x8bb236[_0x156f5e(0x178)]=_0x5953c5,_0x8bb236[_0x156f5e(0x182)]=_0x481cd0,_0x8bb236['note']=_0x2788a6,_0x8bb236[_0x156f5e(0x14b)]=_0x1ac31b,_0x8bb236[_0x156f5e(0x14c)]=_0x1b848a;const _0x4f8431=await _0x8bb236[_0x156f5e(0x153)]();console[_0x156f5e(0x18a)](_0x156f5e(0x179),_0x4f8431);const _0x2bbf7b=await c_payment_data['findOne']({'invoice':_0x492315[_0x156f5e(0x13d)]['invoice'],'reason':_0x156f5e(0x16d)});_0x2bbf7b['suppliers']=_0x492315['body']['suppliers'],_0x2bbf7b['date']=_0x492315[_0x156f5e(0x13d)][_0x156f5e(0x136)],await _0x2bbf7b[_0x156f5e(0x153)](),_0x492315['flash'](_0x156f5e(0x175),_0x156f5e(0x12f)),_0x3f9d31['redirect'](_0x156f5e(0x147));}catch(_0x20b92f){console['log'](_0x20b92f),_0x3f9d31['status'](0xc8)['json']({'message':_0x20b92f['message']});}}),router['post'](a0_0x500af8(0x15f),auth,async(_0x48db2b,_0x468d08)=>{var _0x41dd3d=a0_0x500af8;try{const _0x474fc6=_0x48db2b[_0x41dd3d(0x187)]['id'],{invoice:_0x1df25c,customer:_0x2b9b99,payable_to_customer:_0x46a519,paid_amount:_0x5eda0a}=_0x48db2b[_0x41dd3d(0x13d)],_0x3a1fd3=await sales_return[_0x41dd3d(0x17e)](_0x474fc6);console[_0x41dd3d(0x18a)](_0x41dd3d(0x165),_0x3a1fd3),console[_0x41dd3d(0x18a)](_0x46a519),console[_0x41dd3d(0x18a)](_0x5eda0a);var _0x41e0cd=_0x46a519-_0x5eda0a;console[_0x41dd3d(0x18a)](_0x41dd3d(0x19d),_0x41e0cd),_0x3a1fd3[_0x41dd3d(0x176)]=parseFloat(_0x5eda0a)+parseFloat(_0x3a1fd3[_0x41dd3d(0x176)]),_0x3a1fd3[_0x41dd3d(0x148)]=_0x41e0cd,console['log'](_0x3a1fd3);const _0xdde10d=await _0x3a1fd3['save']();console[_0x41dd3d(0x18a)](0x1b207);const _0x291331=await c_payment_data[_0x41dd3d(0x1a5)]({'invoice':_0x48db2b['body'][_0x41dd3d(0x133)],'reason':_0x41dd3d(0x16d)});console[_0x41dd3d(0x18a)]('c_payment',_0x291331),_0x291331[_0x41dd3d(0x186)]=_0x41e0cd,await _0x291331[_0x41dd3d(0x153)]();let _0x285e7d=new Date(),_0x184f52=('0'+_0x285e7d[_0x41dd3d(0x155)]())[_0x41dd3d(0x171)](-0x2),_0x34d685=('0'+(_0x285e7d[_0x41dd3d(0x1a0)]()+0x1))['slice'](-0x2),_0x4f7bc7=_0x285e7d[_0x41dd3d(0x149)](),_0x40669b=_0x4f7bc7+'-'+_0x34d685+'-'+_0x184f52;const _0x2a36b8=new customer_payment({'invoice':_0x1df25c,'date':_0x4f7bc7+'-'+_0x34d685+'-'+_0x184f52,'customer':_0x2b9b99,'reason':_0x41dd3d(0x199),'amount':_0x5eda0a}),_0x29f4ca=await _0x2a36b8[_0x41dd3d(0x153)]();_0x48db2b[_0x41dd3d(0x158)](_0x41dd3d(0x175),'payment\x20successfull'),_0x468d08[_0x41dd3d(0x142)](_0x41dd3d(0x147));}catch(_0x30c2ae){console[_0x41dd3d(0x18a)](_0x30c2ae);}}),router[a0_0x500af8(0x19b)](a0_0x500af8(0x1a6),auth,async(_0x35435c,_0x4af2d6)=>{var _0x3068d0=a0_0x500af8;try{const {username:_0x469fe6,email:_0x667f97,role:_0x309bee}=_0x35435c[_0x3068d0(0x192)],_0x471f96=_0x35435c[_0x3068d0(0x192)],_0x476dbe=await profile['findOne']({'email':_0x471f96['email']}),_0x2d0da2=await master_shop[_0x3068d0(0x168)]();console[_0x3068d0(0x18a)](_0x3068d0(0x130),_0x2d0da2);const _0x50de47=_0x35435c[_0x3068d0(0x187)]['id'],_0x1c5d5c=await sales_return[_0x3068d0(0x17e)](_0x50de47);console[_0x3068d0(0x18a)](_0x1c5d5c);const _0x4c6495=await customer[_0x3068d0(0x1a5)]({'name':_0x1c5d5c[_0x3068d0(0x169)]});console[_0x3068d0(0x18a)](_0x4c6495);if(_0x2d0da2[0x0]['language']==_0x3068d0(0x15c)){var _0x108a38=users['English'];console[_0x3068d0(0x18a)](_0x108a38);}else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]=='Hindi')var _0x108a38=users[_0x3068d0(0x162)];else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]==_0x3068d0(0x163))var _0x108a38=users[_0x3068d0(0x163)];else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]==_0x3068d0(0x156))var _0x108a38=users['Spanish'];else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]==_0x3068d0(0x138))var _0x108a38=users[_0x3068d0(0x138)];else{if(_0x2d0da2[0x0]['language']==_0x3068d0(0x13a))var _0x108a38=users[_0x3068d0(0x16c)];else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]==_0x3068d0(0x17c))var _0x108a38=users['Chinese'];else{if(_0x2d0da2[0x0][_0x3068d0(0x183)]==_0x3068d0(0x15d))var _0x108a38=users[_0x3068d0(0x14e)];}}}}}}}_0x4af2d6['render'](_0x3068d0(0x143),{'success':_0x35435c[_0x3068d0(0x158)]('success'),'errors':_0x35435c['flash'](_0x3068d0(0x167)),'role':_0x471f96,'profile':_0x476dbe,'master_shop':_0x2d0da2,'customers':_0x4c6495,'sales':_0x1c5d5c,'language':_0x108a38});}catch(_0x17b162){console['log'](_0x17b162);}}),module[a0_0x500af8(0x14f)]=router;