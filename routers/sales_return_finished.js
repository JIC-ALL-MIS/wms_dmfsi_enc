function a0_0x267f(_0x59821a,_0x4fddf1){var _0x2472c7=a0_0x2472();return a0_0x267f=function(_0x267f22,_0x14dfbb){_0x267f22=_0x267f22-0x186;var _0xed366c=_0x2472c7[_0x267f22];return _0xed366c;},a0_0x267f(_0x59821a,_0x4fddf1);}var a0_0x240942=a0_0x267f;(function(_0x1301a2,_0x305d27){var _0x37a3f=a0_0x267f,_0xe17ba4=_0x1301a2();while(!![]){try{var _0x1bc435=-parseInt(_0x37a3f(0x194))/0x1*(parseInt(_0x37a3f(0x1ff))/0x2)+-parseInt(_0x37a3f(0x1c2))/0x3+-parseInt(_0x37a3f(0x1f0))/0x4+-parseInt(_0x37a3f(0x1f6))/0x5+-parseInt(_0x37a3f(0x1a0))/0x6*(-parseInt(_0x37a3f(0x1e1))/0x7)+parseInt(_0x37a3f(0x1fd))/0x8*(parseInt(_0x37a3f(0x193))/0x9)+parseInt(_0x37a3f(0x1ce))/0xa*(parseInt(_0x37a3f(0x1e3))/0xb);if(_0x1bc435===_0x305d27)break;else _0xe17ba4['push'](_0xe17ba4['shift']());}catch(_0x4dc772){_0xe17ba4['push'](_0xe17ba4['shift']());}}}(a0_0x2472,0x87b6a));const express=require(a0_0x240942(0x1f4)),app=express(),router=express[a0_0x240942(0x1e0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x240942(0x200)),auth=require(a0_0x240942(0x1f7)),users=require(a0_0x240942(0x1f3));function a0_0x2472(){var _0x5286a0=['invoice','for_categorize','product_name_QA','bin','save','1220bHvWfc','purchase\x20return\x20successfully','status','return_qty_QA','params','Return\x20Rooms','warehouse_name','type','post','primary_code_QA','Finished\x20Goods','stocks_QA','suppliers','German','$product_details','c_payment','log','redirect','Router','4151PITcHJ','sales_return_invoice','87868cPUFCU','$product_details.product_name','product_code','product_details','subtract','product_code_QA','bay','language','success','/view/:id','$product_details.product_code','sales_quantity_QA','back','504452SPKYlp','Portuguese\x20(BR)','Portuguese','../public/language/languages.json','express','getDate','1950995NwzNIC','../middleware/auth','$product_details.bin','getMonth','sale_qty','Hindi','name','88568AzrAuX','foreach\x20newproduct','40616fxnPQs','../models/all_models','map','forEach','$name','English','Enabled','findById','secondary_code','$product_details.rack','primary_code','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','customer_docs','floorlevel','return_sale_edit_finished','aggregate','Returned\x20Payment\x20For\x20Sale\x20Return','/give_payment/:id','flash','414lEtRvT','6nCLbQo','/invoice/:id','date','product_stock','stock','string','findOne','errors','getFullYear','get','payment\x20successfull','render','6234AESUyg','$product_details.storage','Arabic','Sale\x20Return','French','old_data','email','message','Chinese','secondary_code_QA','return_qty','find','customers','$product_details.type','return_sale','/view','$product_details.secondary_code','/sales_return/view','$product_details._id','data','Spanish','ToRoom','stocks','ToWarehouse','sales_quantity','old_warehouse_data','json','due_amount','$product_details.floorlevel','user','Arabic\x20(ae)','body','types','paid_amount','2717661AHEiZF','note','master','product_name','slice','customer','return_sale_QA'];a0_0x2472=function(){return _0x5286a0;};return a0_0x2472();}router[a0_0x240942(0x19d)](a0_0x240942(0x1af),auth,async(_0x85823e,_0x44dfe0)=>{var _0x34b006=a0_0x240942;try{const {username:_0x56c72f,email:_0x4ce288,role:_0x599cb0}=_0x85823e['user'],_0x12f555=_0x85823e[_0x34b006(0x1bd)],_0xdaaba1=await profile['findOne']({'email':_0x12f555[_0x34b006(0x1a6)]}),_0x2d8ccb=await master_shop[_0x34b006(0x1ab)](),_0x58c752=await sales_return_finished[_0x34b006(0x18f)]([{'$lookup':{'from':_0x34b006(0x1ac),'localField':_0x34b006(0x1c7),'foreignField':_0x34b006(0x1fc),'as':_0x34b006(0x18c)}},{'$unwind':'$customer_docs'}]);if(_0x2d8ccb[0x0]['language']=='English\x20(US)'){var _0x349aa5=users['English'];console['log'](_0x349aa5);}else{if(_0x2d8ccb[0x0]['language']==_0x34b006(0x1fb))var _0x349aa5=users[_0x34b006(0x1fb)];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]=='German')var _0x349aa5=users['German'];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]==_0x34b006(0x1b4))var _0x349aa5=users[_0x34b006(0x1b4)];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]=='French')var _0x349aa5=users['French'];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]==_0x34b006(0x1f1))var _0x349aa5=users[_0x34b006(0x1f2)];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]=='Chinese')var _0x349aa5=users[_0x34b006(0x1a8)];else{if(_0x2d8ccb[0x0][_0x34b006(0x1ea)]==_0x34b006(0x1be))var _0x349aa5=users[_0x34b006(0x1a2)];}}}}}}}_0x44dfe0[_0x34b006(0x19f)]('sales_return_finished',{'success':_0x85823e[_0x34b006(0x192)](_0x34b006(0x1eb)),'errors':_0x85823e[_0x34b006(0x192)](_0x34b006(0x19b)),'role':_0x12f555,'profile':_0xdaaba1,'master_shop':_0x2d8ccb,'user':_0x58c752,'language':_0x349aa5});}catch(_0x2e4585){console['log'](_0x2e4585);}}),router[a0_0x240942(0x19d)](a0_0x240942(0x1ec),auth,async(_0x1ff1f4,_0x259879)=>{var _0xc9f410=a0_0x240942;try{const {username:_0x2a9406,email:_0x55a795,role:_0x592ee3}=_0x1ff1f4[_0xc9f410(0x1bd)],_0x536cdb=_0x1ff1f4[_0xc9f410(0x1bd)],_0x5b3bb6=await profile[_0xc9f410(0x19a)]({'email':_0x536cdb['email']}),_0x577744=await master_shop['find']();console[_0xc9f410(0x1de)](_0xc9f410(0x1c4),_0x577744);const _0x1e41ca=_0x1ff1f4[_0xc9f410(0x1d2)]['id'];console[_0xc9f410(0x1de)](_0x1e41ca);var _0x46e830=[_0xc9f410(0x1d3)];const _0xade43=await sales_return_finished[_0xc9f410(0x187)](_0x1e41ca),_0x5b9f5c=await warehouse['aggregate']([{'$match':{'name':_0xade43[_0xc9f410(0x1b7)],'room':_0xade43[_0xc9f410(0x1b5)]}},{'$unwind':_0xc9f410(0x1dc)},{'$group':{'_id':_0xc9f410(0x1b2),'name':{'$first':_0xc9f410(0x1e4)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xc9f410(0x1f8)},'type':{'$first':_0xc9f410(0x1ad)},'floorlevel':{'$first':_0xc9f410(0x1bc)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0xc9f410(0x1b0)},'product_code':{'$first':_0xc9f410(0x1ed)},'storage':{'$first':_0xc9f410(0x1a1)},'rack':{'$first':_0xc9f410(0x189)}}}]);console[_0xc9f410(0x1de)](_0x5b9f5c);const _0x16957c=await warehouse[_0xc9f410(0x18f)]([{'$match':{'status':_0xc9f410(0x186),'warehouse_category':_0xc9f410(0x1d8)}},{'$group':{'_id':_0xc9f410(0x203),'name':{'$first':_0xc9f410(0x203)}}},{'$sort':{'name':0x1}}]),_0x238e29=await warehouse[_0xc9f410(0x18f)]([{'$match':{'status':_0xc9f410(0x186),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0xc9f410(0x203),'name':{'$first':_0xc9f410(0x203)}}},{'$sort':{'name':0x1}}]),_0x257661=await product[_0xc9f410(0x1ab)]({});if(_0x577744[0x0][_0xc9f410(0x1ea)]=='English\x20(US)'){var _0x23d34c=users[_0xc9f410(0x204)];console[_0xc9f410(0x1de)](_0x23d34c);}else{if(_0x577744[0x0][_0xc9f410(0x1ea)]==_0xc9f410(0x1fb))var _0x23d34c=users[_0xc9f410(0x1fb)];else{if(_0x577744[0x0][_0xc9f410(0x1ea)]=='German')var _0x23d34c=users[_0xc9f410(0x1db)];else{if(_0x577744[0x0][_0xc9f410(0x1ea)]=='Spanish')var _0x23d34c=users[_0xc9f410(0x1b4)];else{if(_0x577744[0x0]['language']=='French')var _0x23d34c=users['French'];else{if(_0x577744[0x0][_0xc9f410(0x1ea)]=='Portuguese\x20(BR)')var _0x23d34c=users[_0xc9f410(0x1f2)];else{if(_0x577744[0x0][_0xc9f410(0x1ea)]==_0xc9f410(0x1a8))var _0x23d34c=users[_0xc9f410(0x1a8)];else{if(_0x577744[0x0][_0xc9f410(0x1ea)]=='Arabic\x20(ae)')var _0x23d34c=users[_0xc9f410(0x1a2)];}}}}}}}_0x259879[_0xc9f410(0x19f)](_0xc9f410(0x18e),{'success':_0x1ff1f4[_0xc9f410(0x192)](_0xc9f410(0x1eb)),'errors':_0x1ff1f4[_0xc9f410(0x192)]('errors'),'role':_0x536cdb,'profile':_0x5b3bb6,'master_shop':_0x577744,'user':_0xade43,'stock':_0x5b9f5c,'unit':_0x257661,'language':_0x23d34c,'warehouses':_0x16957c,'rooms':_0x46e830,'warehouse_QA':_0x238e29});}catch(_0x341ee2){console[_0xc9f410(0x1de)](_0x341ee2);}}),router[a0_0x240942(0x1d6)](a0_0x240942(0x1ec),auth,async(_0x8092bb,_0x3340d3)=>{var _0x432723=a0_0x240942;if(_0x8092bb['body'][_0x432723(0x1ca)]=='QA')try{const _0x1d4546=_0x8092bb[_0x432723(0x1d2)]['id'],_0x344119=await sales_return[_0x432723(0x19a)]({'invoice':_0x8092bb[_0x432723(0x1bf)]['invoice']}),_0x2a6759=await warehouse[_0x432723(0x19a)]({'name':_0x344119[_0x432723(0x1b7)],'room':_0x344119['ToRoom']}),{invoice:_0x3e40c7,customer:_0x56a582,date:_0x1bc63c,warehouse_name:_0x431324,product_name:_0x17ead7,primary_code:_0x2cfa92,secondary_code:_0x2e2af2,product_code:_0x3edeed,sales_quantity:_0x25e159,stocks:_0x559b86,return_qty:_0x74eef2,note:_0x3cbcf3,to_warehouse_name_QA:_0x2a63b0,to_Room_name_QA:_0x13c376}=_0x8092bb[_0x432723(0x1bf)];if(typeof product_name_QA==_0x432723(0x199))var _0x1ee9e1=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1cb)]],_0x5587e6=[_0x8092bb[_0x432723(0x1bf)]['primary_code_QA']],_0x273e03=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1a9)]],_0x4faef3=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1e8)]],_0x472628=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1ee)]],_0x3e8506=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1d9)]],_0x3dfcd7=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1d1)]];else var _0x1ee9e1=[..._0x8092bb['body'][_0x432723(0x1cb)]],_0x5587e6=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1d7)]],_0x273e03=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1a9)]],_0x4faef3=[..._0x8092bb['body'][_0x432723(0x1e8)]],_0x472628=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1ee)]],_0x3e8506=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1d9)]],_0x3dfcd7=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1d1)]];const _0x5e8d0c=_0x1ee9e1[_0x432723(0x201)](_0x48b2e0=>{return _0x48b2e0={'product_name':_0x48b2e0};});_0x5587e6[_0x432723(0x202)]((_0x874acd,_0x126a87)=>{_0x5e8d0c[_0x126a87]['primary_code']=_0x874acd;}),_0x273e03['forEach']((_0x4c4199,_0x3cba43)=>{var _0xac19a6=_0x432723;_0x5e8d0c[_0x3cba43][_0xac19a6(0x188)]=_0x4c4199;}),_0x4faef3[_0x432723(0x202)]((_0x5ca43e,_0x35113a)=>{_0x5e8d0c[_0x35113a]['product_code']=_0x5ca43e;}),_0x472628[_0x432723(0x202)]((_0x34efeb,_0x3e0092)=>{var _0xacb63a=_0x432723;_0x5e8d0c[_0x3e0092][_0xacb63a(0x1fa)]=_0x34efeb;}),_0x3e8506[_0x432723(0x202)]((_0x5b3acd,_0x368e6e)=>{var _0xaca716=_0x432723;_0x5e8d0c[_0x368e6e][_0xaca716(0x198)]=_0x5b3acd;}),_0x3dfcd7[_0x432723(0x202)]((_0x1061a9,_0x2f7b60)=>{var _0x3f9c14=_0x432723;_0x5e8d0c[_0x2f7b60][_0x3f9c14(0x1aa)]=_0x1061a9;}),_0x344119[_0x432723(0x1c8)][_0x432723(0x202)](_0x3b57f3=>{var _0x38a318=_0x432723;const _0x222025=_0x2a6759[_0x38a318(0x1e6)][_0x38a318(0x201)](_0x72dde8=>{var _0x3a103c=_0x38a318;_0x72dde8[_0x3a103c(0x1c5)]==_0x3b57f3[_0x3a103c(0x1c5)]&&(_0x72dde8[_0x3a103c(0x197)]=parseInt(_0x72dde8[_0x3a103c(0x197)])+parseInt(_0x3b57f3[_0x3a103c(0x1aa)]));});}),await _0x2a6759['save'](),_0x344119[_0x432723(0x1c9)]=_0x3e40c7,_0x344119[_0x432723(0x1c7)]=_0x56a582,_0x344119[_0x432723(0x196)]=_0x1bc63c,_0x344119[_0x432723(0x1d4)]=_0x431324,_0x344119[_0x432723(0x1c8)]=_0x5e8d0c,_0x344119[_0x432723(0x1c3)]=_0x3cbcf3,_0x344119[_0x432723(0x1b7)]=_0x2a63b0,_0x344119[_0x432723(0x1b5)]=_0x13c376;const _0x1ef53a=await _0x344119[_0x432723(0x1cd)](),_0x473752=await c_payment_data['findOne']({'invoice':_0x8092bb['body'][_0x432723(0x1c9)],'reason':'Sale\x20Return'});_0x473752[_0x432723(0x1da)]=_0x8092bb[_0x432723(0x1bf)]['suppliers'],_0x473752['date']=_0x8092bb[_0x432723(0x1bf)][_0x432723(0x196)],await _0x473752[_0x432723(0x1cd)](),_0x8092bb[_0x432723(0x192)]('success',_0x432723(0x1cf)),_0x3340d3[_0x432723(0x1df)]('/sales_return_finished/view');}catch(_0x4407a9){console['log'](_0x4407a9),_0x3340d3[_0x432723(0x1d0)](0xc8)[_0x432723(0x1ba)]({'message':_0x4407a9[_0x432723(0x1a7)]});}else try{const _0x2eacb6=_0x8092bb['params']['id'];console[_0x432723(0x1de)](_0x2eacb6);const _0xa67709=await sales_return[_0x432723(0x19a)]({'invoice':_0x8092bb['body'][_0x432723(0x1c9)]});console[_0x432723(0x1de)](_0x432723(0x1a5),_0xa67709);const _0x4e64b3=await warehouse[_0x432723(0x19a)]({'name':_0xa67709[_0x432723(0x1b7)],'room':_0xa67709[_0x432723(0x1b5)]});console[_0x432723(0x1de)](_0x432723(0x1b9),_0x4e64b3);const {invoice:_0x445d3e,customer:_0x1924c1,date:_0x50cc9e,warehouse_name:_0x13e549,product_name:_0x171535,primary_code:_0x5452fb,secondary_code:_0xb125a7,product_code:_0x455893,sales_quantity:_0x29c171,stocks:_0x1b74d0,return_qty:_0x1370b3,note:_0x2d47d1,to_warehouse_name:_0x16c354,to_Room_name:_0x3e529e}=_0x8092bb[_0x432723(0x1bf)];console[_0x432723(0x1de)](_0x8092bb[_0x432723(0x1bf)]);if(typeof _0x171535==_0x432723(0x199))var _0x1ee9e1=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1c5)]],_0x5587e6=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x18a)]],_0x273e03=[_0x8092bb[_0x432723(0x1bf)]['secondary_code']],_0x4faef3=[_0x8092bb['body']['product_code']],_0x472628=[_0x8092bb[_0x432723(0x1bf)]['sales_quantity']],_0x3e8506=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1b6)]],_0x3dfcd7=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1aa)]],_0x389059=[_0x8092bb['body'][_0x432723(0x1e9)]],_0x169993=[_0x8092bb[_0x432723(0x1bf)]['bin']],_0x48b5b9=[_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1c0)]],_0x1bf923=[_0x8092bb['body'][_0x432723(0x18d)]];else var _0x1ee9e1=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1c5)]],_0x5587e6=[..._0x8092bb[_0x432723(0x1bf)]['primary_code']],_0x273e03=[..._0x8092bb['body'][_0x432723(0x188)]],_0x4faef3=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1e5)]],_0x472628=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1b8)]],_0x3e8506=[..._0x8092bb['body'][_0x432723(0x1b6)]],_0x3dfcd7=[..._0x8092bb['body']['return_qty']],_0x389059=[..._0x8092bb[_0x432723(0x1bf)]['bay']],_0x169993=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x1cc)]],_0x48b5b9=[..._0x8092bb['body']['types']],_0x1bf923=[..._0x8092bb[_0x432723(0x1bf)][_0x432723(0x18d)]];const _0x43207f=_0x1ee9e1[_0x432723(0x201)](_0x1c5310=>{return _0x1c5310={'product_name':_0x1c5310};});_0x5587e6['forEach']((_0x1e3b6b,_0x2590af)=>{var _0x38c3c3=_0x432723;_0x43207f[_0x2590af][_0x38c3c3(0x18a)]=_0x1e3b6b;}),_0x273e03[_0x432723(0x202)]((_0x54b2bc,_0x59a77f)=>{var _0x5d8d5c=_0x432723;_0x43207f[_0x59a77f][_0x5d8d5c(0x188)]=_0x54b2bc;}),_0x4faef3[_0x432723(0x202)]((_0x235217,_0x3cf0ee)=>{var _0x5d2a7a=_0x432723;_0x43207f[_0x3cf0ee][_0x5d2a7a(0x1e5)]=_0x235217;}),_0x472628[_0x432723(0x202)]((_0x52874d,_0xf7f9e1)=>{_0x43207f[_0xf7f9e1]['sale_qty']=_0x52874d;}),_0x3e8506[_0x432723(0x202)]((_0x79d568,_0x346284)=>{var _0x341e25=_0x432723;_0x43207f[_0x346284][_0x341e25(0x198)]=_0x79d568;}),_0x3dfcd7[_0x432723(0x202)]((_0x265f77,_0x3c3242)=>{var _0x3d02f6=_0x432723;_0x43207f[_0x3c3242][_0x3d02f6(0x1aa)]=_0x265f77;}),_0x389059[_0x432723(0x202)]((_0x23858c,_0x2212ec)=>{var _0x65d07f=_0x432723;_0x43207f[_0x2212ec][_0x65d07f(0x1e9)]=_0x23858c;}),_0x169993['forEach']((_0x2488e5,_0x5c00ec)=>{var _0x101246=_0x432723;_0x43207f[_0x5c00ec][_0x101246(0x1cc)]=_0x2488e5;}),_0x48b5b9[_0x432723(0x202)]((_0x343c86,_0x181399)=>{_0x43207f[_0x181399]['type']=_0x343c86;}),_0x1bf923[_0x432723(0x202)]((_0x20864f,_0x1349b8)=>{var _0x4c1d95=_0x432723;_0x43207f[_0x1349b8][_0x4c1d95(0x18d)]=_0x20864f;});var _0xa13ebe=0x0;_0x43207f[_0x432723(0x202)](_0xfbf2d8=>{var _0x326b71=_0x432723;console[_0x326b71(0x1de)](_0x326b71(0x1fe),_0xfbf2d8),(parseInt(_0xfbf2d8[_0x326b71(0x1fa)])<parseInt(_0xfbf2d8['return_qty'])||parseInt(_0xfbf2d8[_0x326b71(0x198)])<parseInt(_0xfbf2d8[_0x326b71(0x1aa)])&&parseInt(_0xfbf2d8[_0x326b71(0x1fa)])>parseInt(_0xfbf2d8[_0x326b71(0x1aa)])||parseInt(_0xfbf2d8[_0x326b71(0x1aa)])==0x0)&&_0xa13ebe++;});if(_0xa13ebe!=0x0)return _0x8092bb[_0x432723(0x192)](_0x432723(0x19b),_0x432723(0x18b)),_0x3340d3[_0x432723(0x1df)](_0x432723(0x1ef));_0xa67709[_0x432723(0x1ae)][_0x432723(0x202)](_0x36e486=>{var _0x369350=_0x432723;const _0x42dd99=_0x4e64b3[_0x369350(0x1e6)][_0x369350(0x201)](_0x48d2e7=>{var _0x34bcb7=_0x369350;_0x48d2e7[_0x34bcb7(0x1c5)]==_0x36e486[_0x34bcb7(0x1c5)]&&_0x48d2e7['floorlevel']==_0x36e486[_0x34bcb7(0x18d)]&&_0x48d2e7[_0x34bcb7(0x1d5)]==_0x36e486[_0x34bcb7(0x1d5)]&&_0x48d2e7[_0x34bcb7(0x1cc)]==_0x36e486['bin']&&_0x48d2e7['bay']==_0x36e486['bay']&&(_0x48d2e7['product_stock']=parseInt(_0x48d2e7[_0x34bcb7(0x197)])+parseInt(_0x36e486['return_qty']));});}),console['log'](_0x432723(0x1b9),_0x4e64b3),await _0x4e64b3[_0x432723(0x1cd)](),_0xa67709['invoice']=_0x445d3e,_0xa67709[_0x432723(0x1c7)]=_0x1924c1,_0xa67709[_0x432723(0x196)]=_0x50cc9e,_0xa67709[_0x432723(0x1d4)]=_0x13e549,_0xa67709['return_sale']=_0x43207f,_0xa67709[_0x432723(0x1c3)]=_0x2d47d1,_0xa67709[_0x432723(0x1b7)]=_0x16c354,_0xa67709['ToRoom']=_0x3e529e;const _0x2f7a9c=await _0xa67709[_0x432723(0x1cd)]();console[_0x432723(0x1de)]('new\x20new_data',_0x2f7a9c);const _0x1dbbe0=await c_payment_data[_0x432723(0x19a)]({'invoice':_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1c9)],'reason':_0x432723(0x1a3)});_0x1dbbe0['suppliers']=_0x8092bb[_0x432723(0x1bf)][_0x432723(0x1da)],_0x1dbbe0[_0x432723(0x196)]=_0x8092bb['body'][_0x432723(0x196)],await _0x1dbbe0[_0x432723(0x1cd)](),_0x8092bb['flash']('success',_0x432723(0x1cf)),_0x3340d3[_0x432723(0x1df)]('/sales_return/view');}catch(_0x24c555){console[_0x432723(0x1de)](_0x24c555),_0x3340d3['status'](0xc8)[_0x432723(0x1ba)]({'message':_0x24c555[_0x432723(0x1a7)]});}}),router[a0_0x240942(0x1d6)](a0_0x240942(0x191),auth,async(_0xdaa7d2,_0x5b997f)=>{var _0x1ac9d8=a0_0x240942;try{const _0x21305d=_0xdaa7d2[_0x1ac9d8(0x1d2)]['id'],{invoice:_0x56bb86,customer:_0x570b51,payable_to_customer:_0x23e8fc,paid_amount:_0x3837d3}=_0xdaa7d2[_0x1ac9d8(0x1bf)],_0x4ef267=await sales_return[_0x1ac9d8(0x187)](_0x21305d);console[_0x1ac9d8(0x1de)](_0x1ac9d8(0x1b3),_0x4ef267),console[_0x1ac9d8(0x1de)](_0x23e8fc),console[_0x1ac9d8(0x1de)](_0x3837d3);var _0x5aa7a1=_0x23e8fc-_0x3837d3;console['log'](_0x1ac9d8(0x1e7),_0x5aa7a1),_0x4ef267[_0x1ac9d8(0x1c1)]=parseFloat(_0x3837d3)+parseFloat(_0x4ef267[_0x1ac9d8(0x1c1)]),_0x4ef267[_0x1ac9d8(0x1bb)]=_0x5aa7a1,console[_0x1ac9d8(0x1de)](_0x4ef267);const _0x9a8b78=await _0x4ef267['save']();console[_0x1ac9d8(0x1de)](0x1b207);const _0x2527c9=await c_payment_data[_0x1ac9d8(0x19a)]({'invoice':_0xdaa7d2[_0x1ac9d8(0x1bf)][_0x1ac9d8(0x1c9)],'reason':'Sale\x20Return'});console[_0x1ac9d8(0x1de)](_0x1ac9d8(0x1dd),_0x2527c9),_0x2527c9['amount']=_0x5aa7a1,await _0x2527c9[_0x1ac9d8(0x1cd)]();let _0x131f64=new Date(),_0x375523=('0'+_0x131f64[_0x1ac9d8(0x1f5)]())[_0x1ac9d8(0x1c6)](-0x2),_0x2ef25d=('0'+(_0x131f64[_0x1ac9d8(0x1f9)]()+0x1))[_0x1ac9d8(0x1c6)](-0x2),_0x4265a4=_0x131f64[_0x1ac9d8(0x19c)](),_0x13318b=_0x4265a4+'-'+_0x2ef25d+'-'+_0x375523;const _0x2eee03=new customer_payment({'invoice':_0x56bb86,'date':_0x4265a4+'-'+_0x2ef25d+'-'+_0x375523,'customer':_0x570b51,'reason':_0x1ac9d8(0x190),'amount':_0x3837d3}),_0x2431da=await _0x2eee03[_0x1ac9d8(0x1cd)]();_0xdaa7d2[_0x1ac9d8(0x192)](_0x1ac9d8(0x1eb),_0x1ac9d8(0x19e)),_0x5b997f[_0x1ac9d8(0x1df)](_0x1ac9d8(0x1b1));}catch(_0x3550d5){console[_0x1ac9d8(0x1de)](_0x3550d5);}}),router[a0_0x240942(0x19d)](a0_0x240942(0x195),auth,async(_0x5d81e3,_0x26684e)=>{var _0x4c6dea=a0_0x240942;try{const {username:_0x2da46e,email:_0x287fd9,role:_0x415680}=_0x5d81e3[_0x4c6dea(0x1bd)],_0x444159=_0x5d81e3['user'],_0x243eca=await profile[_0x4c6dea(0x19a)]({'email':_0x444159['email']}),_0x11ee77=await master_shop[_0x4c6dea(0x1ab)]();console['log'](_0x4c6dea(0x1c4),_0x11ee77);const _0x5d4d13=_0x5d81e3[_0x4c6dea(0x1d2)]['id'],_0x44e217=await sales_return['findById'](_0x5d4d13);console['log'](_0x44e217);const _0x467516=await customer[_0x4c6dea(0x19a)]({'name':_0x44e217[_0x4c6dea(0x1c7)]});console['log'](_0x467516);if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]=='English\x20(US)'){var _0x1c7c90=users[_0x4c6dea(0x204)];console['log'](_0x1c7c90);}else{if(_0x11ee77[0x0]['language']==_0x4c6dea(0x1fb))var _0x1c7c90=users[_0x4c6dea(0x1fb)];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]==_0x4c6dea(0x1db))var _0x1c7c90=users[_0x4c6dea(0x1db)];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]==_0x4c6dea(0x1b4))var _0x1c7c90=users[_0x4c6dea(0x1b4)];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]==_0x4c6dea(0x1a4))var _0x1c7c90=users[_0x4c6dea(0x1a4)];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]==_0x4c6dea(0x1f1))var _0x1c7c90=users['Portuguese'];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]==_0x4c6dea(0x1a8))var _0x1c7c90=users[_0x4c6dea(0x1a8)];else{if(_0x11ee77[0x0][_0x4c6dea(0x1ea)]=='Arabic\x20(ae)')var _0x1c7c90=users[_0x4c6dea(0x1a2)];}}}}}}}_0x26684e[_0x4c6dea(0x19f)](_0x4c6dea(0x1e2),{'success':_0x5d81e3[_0x4c6dea(0x192)](_0x4c6dea(0x1eb)),'errors':_0x5d81e3[_0x4c6dea(0x192)]('errors'),'role':_0x444159,'profile':_0x243eca,'master_shop':_0x11ee77,'customers':_0x467516,'sales':_0x44e217,'language':_0x1c7c90});}catch(_0x5a5fa5){console[_0x4c6dea(0x1de)](_0x5a5fa5);}}),module['exports']=router;