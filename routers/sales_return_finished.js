function a0_0x13a6(){var _0x48c777=['Router','../models/all_models','5919396NFyPuM','$customer_docs','string','ToWarehouse','map','$product_details.storage','Chinese','getMonth','type','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Spanish','primary_code_QA','English','getFullYear','amount','Sale\x20Return','customer_docs','sales_return_invoice','655736LxuRwv','save','success','3020QxHBlm','Finished\x20Goods','get','secondary_code','$product_details.bin','log','sales_quantity','secondary_code_QA','8yVglsh','customers','note','sales_return_finished','Arabic\x20(ae)','Hindi','product_name_QA','email','70279mRhxHA','/view/:id','return_sale_QA','$product_details.floorlevel','product_code_QA','1657726RpLZaX','purchase\x20return\x20successfully','product_stock','$product_details.type','/give_payment/:id','floorlevel','$name','params','$product_details','status','flash','slice','$product_details.product_name','subtract','for_categorize','message','return_qty_QA','return_sale','1836185CyGSZL','417096ShPjSn','language','suppliers','sale_qty','json','redirect','render','/view','6sdUiUE','forEach','return_sale_edit_finished','../public/language/languages.json','payment\x20successfull','name','body','types','old_warehouse_data','stocks','getDate','find','exports','/sales_return/view','foreach\x20newproduct','French','due_amount','Portuguese','$product_details.primary_code','/invoice/:id','warehouse_name','return_qty','bin','paid_amount','stock','primary_code','invoice','date','back','ToRoom','product_code','stocks_QA','aggregate','product_name','findOne','post','German','$product_details.product_stock','18uijseC','Enabled','bay','customer','$product_details.product_code','product_details','errors','English\x20(US)','old_data','/sales_return_finished/view','QA\x20Warehouse','user','1356228bmoGQt','Portuguese\x20(BR)','findById','Arabic','Returned\x20Payment\x20For\x20Sale\x20Return','master','c_payment','$product_details.rack','sales_quantity_QA'];a0_0x13a6=function(){return _0x48c777;};return a0_0x13a6();}var a0_0x3a98c5=a0_0x2407;(function(_0x38e77c,_0x169233){var _0x5a138a=a0_0x2407,_0x333801=_0x38e77c();while(!![]){try{var _0x2328e4=-parseInt(_0x5a138a(0x133))/0x1+parseInt(_0x5a138a(0x120))/0x2+-parseInt(_0x5a138a(0x16d))/0x3+parseInt(_0x5a138a(0x113))/0x4*(-parseInt(_0x5a138a(0x132))/0x5)+parseInt(_0x5a138a(0x13b))/0x6*(-parseInt(_0x5a138a(0xf6))/0x7)+-parseInt(_0x5a138a(0x108))/0x8*(-parseInt(_0x5a138a(0x161))/0x9)+-parseInt(_0x5a138a(0x10b))/0xa*(-parseInt(_0x5a138a(0x11b))/0xb);if(_0x2328e4===_0x169233)break;else _0x333801['push'](_0x333801['shift']());}catch(_0x1021e){_0x333801['push'](_0x333801['shift']());}}}(a0_0x13a6,0x737a9));const express=require('express'),app=express(),router=express[a0_0x3a98c5(0xf4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x3a98c5(0xf5)),auth=require('../middleware/auth'),users=require(a0_0x3a98c5(0x13e));function a0_0x2407(_0x16eb43,_0xc6cfeb){var _0x13a610=a0_0x13a6();return a0_0x2407=function(_0x2407de,_0xa93121){_0x2407de=_0x2407de-0xf4;var _0x4f4172=_0x13a610[_0x2407de];return _0x4f4172;},a0_0x2407(_0x16eb43,_0xc6cfeb);}router[a0_0x3a98c5(0x10d)](a0_0x3a98c5(0x13a),auth,async(_0x4a73db,_0x362916)=>{var _0xc1bc3c=a0_0x3a98c5;try{const {username:_0x45e88e,email:_0x280859,role:_0x1d0c3a}=_0x4a73db[_0xc1bc3c(0x16c)],_0x4b16a0=_0x4a73db['user'],_0x4fbbf7=await profile['findOne']({'email':_0x4b16a0[_0xc1bc3c(0x11a)]}),_0x1c2582=await master_shop[_0xc1bc3c(0x146)](),_0x183db0=await sales_return_finished[_0xc1bc3c(0x15b)]([{'$lookup':{'from':_0xc1bc3c(0x114),'localField':'customer','foreignField':_0xc1bc3c(0x140),'as':_0xc1bc3c(0x106)}},{'$unwind':_0xc1bc3c(0xf7)}]);if(_0x1c2582[0x0]['language']==_0xc1bc3c(0x168)){var _0x5d7873=users[_0xc1bc3c(0x102)];console[_0xc1bc3c(0x110)](_0x5d7873);}else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]==_0xc1bc3c(0x118))var _0x5d7873=users[_0xc1bc3c(0x118)];else{if(_0x1c2582[0x0]['language']==_0xc1bc3c(0x15f))var _0x5d7873=users['German'];else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]==_0xc1bc3c(0x100))var _0x5d7873=users[_0xc1bc3c(0x100)];else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]==_0xc1bc3c(0x14a))var _0x5d7873=users[_0xc1bc3c(0x14a)];else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]==_0xc1bc3c(0x16e))var _0x5d7873=users['Portuguese'];else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]==_0xc1bc3c(0xfc))var _0x5d7873=users[_0xc1bc3c(0xfc)];else{if(_0x1c2582[0x0][_0xc1bc3c(0x134)]=='Arabic\x20(ae)')var _0x5d7873=users[_0xc1bc3c(0x170)];}}}}}}}_0x362916[_0xc1bc3c(0x139)](_0xc1bc3c(0x116),{'success':_0x4a73db[_0xc1bc3c(0x12a)](_0xc1bc3c(0x10a)),'errors':_0x4a73db['flash']('errors'),'role':_0x4b16a0,'profile':_0x4fbbf7,'master_shop':_0x1c2582,'user':_0x183db0,'language':_0x5d7873});}catch(_0x72e6b3){console[_0xc1bc3c(0x110)](_0x72e6b3);}}),router[a0_0x3a98c5(0x10d)](a0_0x3a98c5(0x11c),auth,async(_0x305924,_0x1cd85e)=>{var _0x3cde5c=a0_0x3a98c5;try{const {username:_0x2bbd73,email:_0x354f09,role:_0x175b0b}=_0x305924['user'],_0x4fe46d=_0x305924[_0x3cde5c(0x16c)],_0x4ac59e=await profile[_0x3cde5c(0x15d)]({'email':_0x4fe46d['email']}),_0x81b3bd=await master_shop[_0x3cde5c(0x146)]();console[_0x3cde5c(0x110)](_0x3cde5c(0x172),_0x81b3bd);const _0x18b247=_0x305924[_0x3cde5c(0x127)]['id'];console['log'](_0x18b247);var _0x4e78f6=['Return\x20Rooms'];const _0x10784b=await sales_return_finished[_0x3cde5c(0x16f)](_0x18b247),_0x430f20=await warehouse[_0x3cde5c(0x15b)]([{'$match':{'name':_0x10784b['ToWarehouse'],'room':_0x10784b[_0x3cde5c(0x158)]}},{'$unwind':_0x3cde5c(0x128)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3cde5c(0x12c)},'product_stock':{'$first':_0x3cde5c(0x160)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x3cde5c(0x10f)},'type':{'$first':_0x3cde5c(0x123)},'floorlevel':{'$first':_0x3cde5c(0x11e)},'primary_code':{'$first':_0x3cde5c(0x14d)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3cde5c(0x165)},'storage':{'$first':_0x3cde5c(0xfb)},'rack':{'$first':_0x3cde5c(0x174)}}}]);console['log'](_0x430f20);const _0x1c96d6=await warehouse['aggregate']([{'$match':{'status':_0x3cde5c(0x162),'warehouse_category':_0x3cde5c(0x10c)}},{'$group':{'_id':_0x3cde5c(0x126),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x2c69ef=await warehouse[_0x3cde5c(0x15b)]([{'$match':{'status':_0x3cde5c(0x162),'name':_0x3cde5c(0x16b)}},{'$group':{'_id':'$name','name':{'$first':_0x3cde5c(0x126)}}},{'$sort':{'name':0x1}}]),_0x776dc0=await product[_0x3cde5c(0x146)]({});if(_0x81b3bd[0x0]['language']=='English\x20(US)'){var _0x43d43d=users[_0x3cde5c(0x102)];console['log'](_0x43d43d);}else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]=='Hindi')var _0x43d43d=users[_0x3cde5c(0x118)];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]==_0x3cde5c(0x15f))var _0x43d43d=users[_0x3cde5c(0x15f)];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]=='Spanish')var _0x43d43d=users[_0x3cde5c(0x100)];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]==_0x3cde5c(0x14a))var _0x43d43d=users[_0x3cde5c(0x14a)];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]==_0x3cde5c(0x16e))var _0x43d43d=users['Portuguese'];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]==_0x3cde5c(0xfc))var _0x43d43d=users[_0x3cde5c(0xfc)];else{if(_0x81b3bd[0x0][_0x3cde5c(0x134)]==_0x3cde5c(0x117))var _0x43d43d=users[_0x3cde5c(0x170)];}}}}}}}_0x1cd85e['render'](_0x3cde5c(0x13d),{'success':_0x305924['flash']('success'),'errors':_0x305924[_0x3cde5c(0x12a)](_0x3cde5c(0x167)),'role':_0x4fe46d,'profile':_0x4ac59e,'master_shop':_0x81b3bd,'user':_0x10784b,'stock':_0x430f20,'unit':_0x776dc0,'language':_0x43d43d,'warehouses':_0x1c96d6,'rooms':_0x4e78f6,'warehouse_QA':_0x2c69ef});}catch(_0x162b86){console['log'](_0x162b86);}}),router['post'](a0_0x3a98c5(0x11c),auth,async(_0x64ed3c,_0x46127c)=>{var _0x547984=a0_0x3a98c5;if(_0x64ed3c[_0x547984(0x141)][_0x547984(0x12e)]=='QA')try{const _0x56e4b8=_0x64ed3c['params']['id'],_0x5ae9e0=await sales_return[_0x547984(0x15d)]({'invoice':_0x64ed3c[_0x547984(0x141)]['invoice']}),_0x5306e9=await warehouse['findOne']({'name':_0x5ae9e0[_0x547984(0xf9)],'room':_0x5ae9e0['ToRoom']}),{invoice:_0x9e6b49,customer:_0x3315ac,date:_0x544bb1,warehouse_name:_0x56508e,product_name:_0x2d572f,primary_code:_0x587476,secondary_code:_0x231b71,product_code:_0x2c208a,sales_quantity:_0x3d5404,stocks:_0x287d9d,return_qty:_0x43593f,note:_0x99cfc5,to_warehouse_name_QA:_0x2f9580,to_Room_name_QA:_0xa8ef77}=_0x64ed3c[_0x547984(0x141)];if(typeof product_name_QA==_0x547984(0xf8))var _0x27fbd5=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x119)]],_0x3a2185=[_0x64ed3c[_0x547984(0x141)]['primary_code_QA']],_0x51bbb4=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x112)]],_0x41c011=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x11f)]],_0x6d6d43=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x175)]],_0x1599dd=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x15a)]],_0x3b312e=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x130)]];else var _0x27fbd5=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x119)]],_0x3a2185=[..._0x64ed3c['body'][_0x547984(0x101)]],_0x51bbb4=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x112)]],_0x41c011=[..._0x64ed3c['body'][_0x547984(0x11f)]],_0x6d6d43=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x175)]],_0x1599dd=[..._0x64ed3c[_0x547984(0x141)]['stocks_QA']],_0x3b312e=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x130)]];const _0x1bd3a4=_0x27fbd5[_0x547984(0xfa)](_0x4dd139=>{return _0x4dd139={'product_name':_0x4dd139};});_0x3a2185[_0x547984(0x13c)]((_0x5af5d5,_0x2579b2)=>{var _0x503df4=_0x547984;_0x1bd3a4[_0x2579b2][_0x503df4(0x154)]=_0x5af5d5;}),_0x51bbb4['forEach']((_0x577cf0,_0x551c8e)=>{_0x1bd3a4[_0x551c8e]['secondary_code']=_0x577cf0;}),_0x41c011[_0x547984(0x13c)]((_0x29338d,_0x308c6e)=>{var _0x183673=_0x547984;_0x1bd3a4[_0x308c6e][_0x183673(0x159)]=_0x29338d;}),_0x6d6d43[_0x547984(0x13c)]((_0x578581,_0x2426fd)=>{_0x1bd3a4[_0x2426fd]['sale_qty']=_0x578581;}),_0x1599dd['forEach']((_0x2beb36,_0x4e1bdd)=>{var _0xe5eb62=_0x547984;_0x1bd3a4[_0x4e1bdd][_0xe5eb62(0x153)]=_0x2beb36;}),_0x3b312e[_0x547984(0x13c)]((_0x55d060,_0x3485df)=>{var _0x52c169=_0x547984;_0x1bd3a4[_0x3485df][_0x52c169(0x150)]=_0x55d060;}),_0x5ae9e0[_0x547984(0x11d)][_0x547984(0x13c)](_0x56751a=>{var _0x476c0e=_0x547984;const _0x3917f6=_0x5306e9[_0x476c0e(0x166)]['map'](_0x2a3341=>{var _0x417bc3=_0x476c0e;_0x2a3341[_0x417bc3(0x15c)]==_0x56751a['product_name']&&(_0x2a3341['product_stock']=parseInt(_0x2a3341['product_stock'])+parseInt(_0x56751a[_0x417bc3(0x150)]));});}),await _0x5306e9[_0x547984(0x109)](),_0x5ae9e0[_0x547984(0x155)]=_0x9e6b49,_0x5ae9e0[_0x547984(0x164)]=_0x3315ac,_0x5ae9e0[_0x547984(0x156)]=_0x544bb1,_0x5ae9e0[_0x547984(0x14f)]=_0x56508e,_0x5ae9e0['return_sale_QA']=_0x1bd3a4,_0x5ae9e0[_0x547984(0x115)]=_0x99cfc5,_0x5ae9e0[_0x547984(0xf9)]=_0x2f9580,_0x5ae9e0[_0x547984(0x158)]=_0xa8ef77;const _0x3ffb7f=await _0x5ae9e0[_0x547984(0x109)](),_0x28800a=await c_payment_data[_0x547984(0x15d)]({'invoice':_0x64ed3c[_0x547984(0x141)]['invoice'],'reason':_0x547984(0x105)});_0x28800a[_0x547984(0x135)]=_0x64ed3c['body']['suppliers'],_0x28800a[_0x547984(0x156)]=_0x64ed3c[_0x547984(0x141)][_0x547984(0x156)],await _0x28800a['save'](),_0x64ed3c[_0x547984(0x12a)](_0x547984(0x10a),_0x547984(0x121)),_0x46127c[_0x547984(0x138)](_0x547984(0x16a));}catch(_0x500016){console[_0x547984(0x110)](_0x500016),_0x46127c[_0x547984(0x129)](0xc8)[_0x547984(0x137)]({'message':_0x500016[_0x547984(0x12f)]});}else try{const _0x1a965b=_0x64ed3c['params']['id'];console[_0x547984(0x110)](_0x1a965b);const _0x545477=await sales_return['findOne']({'invoice':_0x64ed3c[_0x547984(0x141)]['invoice']});console[_0x547984(0x110)](_0x547984(0x169),_0x545477);const _0x5c3c17=await warehouse[_0x547984(0x15d)]({'name':_0x545477[_0x547984(0xf9)],'room':_0x545477[_0x547984(0x158)]});console[_0x547984(0x110)](_0x547984(0x143),_0x5c3c17);const {invoice:_0x24dcdd,customer:_0xc306f0,date:_0x232101,warehouse_name:_0xa2e5d0,product_name:_0x3f71d2,primary_code:_0x1c9839,secondary_code:_0x4ca990,product_code:_0x33bc2b,sales_quantity:_0x27beec,stocks:_0x228518,return_qty:_0x3bb3e6,note:_0x40f06d,to_warehouse_name:_0x411889,to_Room_name:_0x171152}=_0x64ed3c[_0x547984(0x141)];console[_0x547984(0x110)](_0x64ed3c[_0x547984(0x141)]);if(typeof _0x3f71d2==_0x547984(0xf8))var _0x27fbd5=[_0x64ed3c[_0x547984(0x141)]['product_name']],_0x3a2185=[_0x64ed3c['body'][_0x547984(0x154)]],_0x51bbb4=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x10e)]],_0x41c011=[_0x64ed3c['body'][_0x547984(0x159)]],_0x6d6d43=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x111)]],_0x1599dd=[_0x64ed3c['body'][_0x547984(0x144)]],_0x3b312e=[_0x64ed3c['body'][_0x547984(0x150)]],_0x3168bd=[_0x64ed3c[_0x547984(0x141)][_0x547984(0x163)]],_0x98d222=[_0x64ed3c[_0x547984(0x141)]['bin']],_0x2c5a0c=[_0x64ed3c['body'][_0x547984(0x142)]],_0x3f454d=[_0x64ed3c['body'][_0x547984(0x125)]];else var _0x27fbd5=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x15c)]],_0x3a2185=[..._0x64ed3c[_0x547984(0x141)]['primary_code']],_0x51bbb4=[..._0x64ed3c[_0x547984(0x141)]['secondary_code']],_0x41c011=[..._0x64ed3c['body'][_0x547984(0x159)]],_0x6d6d43=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x111)]],_0x1599dd=[..._0x64ed3c[_0x547984(0x141)]['stocks']],_0x3b312e=[..._0x64ed3c['body'][_0x547984(0x150)]],_0x3168bd=[..._0x64ed3c[_0x547984(0x141)]['bay']],_0x98d222=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x151)]],_0x2c5a0c=[..._0x64ed3c[_0x547984(0x141)][_0x547984(0x142)]],_0x3f454d=[..._0x64ed3c[_0x547984(0x141)]['floorlevel']];const _0x4ba026=_0x27fbd5['map'](_0x36cb75=>{return _0x36cb75={'product_name':_0x36cb75};});_0x3a2185['forEach']((_0x219b0c,_0x588c00)=>{var _0x2e03f0=_0x547984;_0x4ba026[_0x588c00][_0x2e03f0(0x154)]=_0x219b0c;}),_0x51bbb4[_0x547984(0x13c)]((_0x5b56c2,_0x5d68f6)=>{var _0x4c8b96=_0x547984;_0x4ba026[_0x5d68f6][_0x4c8b96(0x10e)]=_0x5b56c2;}),_0x41c011[_0x547984(0x13c)]((_0x1405d5,_0x575841)=>{var _0xe7556f=_0x547984;_0x4ba026[_0x575841][_0xe7556f(0x159)]=_0x1405d5;}),_0x6d6d43[_0x547984(0x13c)]((_0x2c2de2,_0x41795d)=>{var _0x5726c5=_0x547984;_0x4ba026[_0x41795d][_0x5726c5(0x136)]=_0x2c2de2;}),_0x1599dd[_0x547984(0x13c)]((_0xf2a46a,_0x34f4ea)=>{var _0x43db77=_0x547984;_0x4ba026[_0x34f4ea][_0x43db77(0x153)]=_0xf2a46a;}),_0x3b312e['forEach']((_0x2936da,_0x2cab91)=>{var _0x154198=_0x547984;_0x4ba026[_0x2cab91][_0x154198(0x150)]=_0x2936da;}),_0x3168bd[_0x547984(0x13c)]((_0x4b299b,_0x4758b6)=>{var _0x49a169=_0x547984;_0x4ba026[_0x4758b6][_0x49a169(0x163)]=_0x4b299b;}),_0x98d222['forEach']((_0x457575,_0x179c89)=>{var _0x57fbb7=_0x547984;_0x4ba026[_0x179c89][_0x57fbb7(0x151)]=_0x457575;}),_0x2c5a0c[_0x547984(0x13c)]((_0x52da6d,_0x5b859f)=>{_0x4ba026[_0x5b859f]['type']=_0x52da6d;}),_0x3f454d[_0x547984(0x13c)]((_0x9f687e,_0x45021d)=>{var _0x465e41=_0x547984;_0x4ba026[_0x45021d][_0x465e41(0x125)]=_0x9f687e;});var _0x537008=0x0;_0x4ba026[_0x547984(0x13c)](_0x2950a5=>{var _0x59dc09=_0x547984;console['log'](_0x59dc09(0x149),_0x2950a5),(parseInt(_0x2950a5['sale_qty'])<parseInt(_0x2950a5[_0x59dc09(0x150)])||parseInt(_0x2950a5['stock'])<parseInt(_0x2950a5[_0x59dc09(0x150)])&&parseInt(_0x2950a5[_0x59dc09(0x136)])>parseInt(_0x2950a5[_0x59dc09(0x150)])||parseInt(_0x2950a5[_0x59dc09(0x150)])==0x0)&&_0x537008++;});if(_0x537008!=0x0)return _0x64ed3c[_0x547984(0x12a)](_0x547984(0x167),_0x547984(0xff)),_0x46127c['redirect'](_0x547984(0x157));_0x545477[_0x547984(0x131)][_0x547984(0x13c)](_0x528c78=>{var _0x22fdf7=_0x547984;const _0x53d6a6=_0x5c3c17[_0x22fdf7(0x166)][_0x22fdf7(0xfa)](_0xbd3e5f=>{var _0x4a2f63=_0x22fdf7;_0xbd3e5f[_0x4a2f63(0x15c)]==_0x528c78[_0x4a2f63(0x15c)]&&_0xbd3e5f[_0x4a2f63(0x125)]==_0x528c78[_0x4a2f63(0x125)]&&_0xbd3e5f[_0x4a2f63(0xfe)]==_0x528c78[_0x4a2f63(0xfe)]&&_0xbd3e5f[_0x4a2f63(0x151)]==_0x528c78[_0x4a2f63(0x151)]&&_0xbd3e5f[_0x4a2f63(0x163)]==_0x528c78[_0x4a2f63(0x163)]&&(_0xbd3e5f[_0x4a2f63(0x122)]=parseInt(_0xbd3e5f['product_stock'])+parseInt(_0x528c78[_0x4a2f63(0x150)]));});}),console['log'](_0x547984(0x143),_0x5c3c17),await _0x5c3c17['save'](),_0x545477[_0x547984(0x155)]=_0x24dcdd,_0x545477[_0x547984(0x164)]=_0xc306f0,_0x545477[_0x547984(0x156)]=_0x232101,_0x545477['warehouse_name']=_0xa2e5d0,_0x545477['return_sale']=_0x4ba026,_0x545477[_0x547984(0x115)]=_0x40f06d,_0x545477['ToWarehouse']=_0x411889,_0x545477[_0x547984(0x158)]=_0x171152;const _0x2eb81f=await _0x545477[_0x547984(0x109)]();console[_0x547984(0x110)]('new\x20new_data',_0x2eb81f);const _0x2b996e=await c_payment_data[_0x547984(0x15d)]({'invoice':_0x64ed3c[_0x547984(0x141)]['invoice'],'reason':'Sale\x20Return'});_0x2b996e[_0x547984(0x135)]=_0x64ed3c[_0x547984(0x141)][_0x547984(0x135)],_0x2b996e[_0x547984(0x156)]=_0x64ed3c[_0x547984(0x141)]['date'],await _0x2b996e[_0x547984(0x109)](),_0x64ed3c[_0x547984(0x12a)](_0x547984(0x10a),_0x547984(0x121)),_0x46127c[_0x547984(0x138)](_0x547984(0x148));}catch(_0x4c7fe2){console['log'](_0x4c7fe2),_0x46127c[_0x547984(0x129)](0xc8)[_0x547984(0x137)]({'message':_0x4c7fe2[_0x547984(0x12f)]});}}),router[a0_0x3a98c5(0x15e)](a0_0x3a98c5(0x124),auth,async(_0x4c97a6,_0x7890fb)=>{var _0x418685=a0_0x3a98c5;try{const _0x22ac87=_0x4c97a6[_0x418685(0x127)]['id'],{invoice:_0x484a4e,customer:_0x4f17d7,payable_to_customer:_0xdebd7d,paid_amount:_0xe52d9a}=_0x4c97a6[_0x418685(0x141)],_0x48deec=await sales_return[_0x418685(0x16f)](_0x22ac87);console['log']('data',_0x48deec),console[_0x418685(0x110)](_0xdebd7d),console['log'](_0xe52d9a);var _0x5957b7=_0xdebd7d-_0xe52d9a;console[_0x418685(0x110)](_0x418685(0x12d),_0x5957b7),_0x48deec['paid_amount']=parseFloat(_0xe52d9a)+parseFloat(_0x48deec[_0x418685(0x152)]),_0x48deec[_0x418685(0x14b)]=_0x5957b7,console['log'](_0x48deec);const _0x59f239=await _0x48deec[_0x418685(0x109)]();console[_0x418685(0x110)](0x1b207);const _0x188a5b=await c_payment_data[_0x418685(0x15d)]({'invoice':_0x4c97a6[_0x418685(0x141)][_0x418685(0x155)],'reason':'Sale\x20Return'});console[_0x418685(0x110)](_0x418685(0x173),_0x188a5b),_0x188a5b[_0x418685(0x104)]=_0x5957b7,await _0x188a5b[_0x418685(0x109)]();let _0x2d9aeb=new Date(),_0x1e8bb5=('0'+_0x2d9aeb[_0x418685(0x145)]())[_0x418685(0x12b)](-0x2),_0x5e3d94=('0'+(_0x2d9aeb[_0x418685(0xfd)]()+0x1))['slice'](-0x2),_0x4aa48e=_0x2d9aeb[_0x418685(0x103)](),_0x4ccbcb=_0x4aa48e+'-'+_0x5e3d94+'-'+_0x1e8bb5;const _0x407e04=new customer_payment({'invoice':_0x484a4e,'date':_0x4aa48e+'-'+_0x5e3d94+'-'+_0x1e8bb5,'customer':_0x4f17d7,'reason':_0x418685(0x171),'amount':_0xe52d9a}),_0x3731f0=await _0x407e04[_0x418685(0x109)]();_0x4c97a6[_0x418685(0x12a)](_0x418685(0x10a),_0x418685(0x13f)),_0x7890fb[_0x418685(0x138)]('/sales_return/view');}catch(_0x5ce1ff){console[_0x418685(0x110)](_0x5ce1ff);}}),router[a0_0x3a98c5(0x10d)](a0_0x3a98c5(0x14e),auth,async(_0x2c851f,_0x2df9db)=>{var _0x479531=a0_0x3a98c5;try{const {username:_0x53a0c8,email:_0x145228,role:_0x2bc3fe}=_0x2c851f[_0x479531(0x16c)],_0x8f6599=_0x2c851f['user'],_0x30b997=await profile[_0x479531(0x15d)]({'email':_0x8f6599[_0x479531(0x11a)]}),_0x2e9939=await master_shop[_0x479531(0x146)]();console[_0x479531(0x110)]('master',_0x2e9939);const _0x1c6936=_0x2c851f[_0x479531(0x127)]['id'],_0xab3465=await sales_return['findById'](_0x1c6936);console[_0x479531(0x110)](_0xab3465);const _0x5a68a9=await customer['findOne']({'name':_0xab3465[_0x479531(0x164)]});console[_0x479531(0x110)](_0x5a68a9);if(_0x2e9939[0x0][_0x479531(0x134)]=='English\x20(US)'){var _0x400320=users[_0x479531(0x102)];console[_0x479531(0x110)](_0x400320);}else{if(_0x2e9939[0x0][_0x479531(0x134)]==_0x479531(0x118))var _0x400320=users['Hindi'];else{if(_0x2e9939[0x0][_0x479531(0x134)]==_0x479531(0x15f))var _0x400320=users[_0x479531(0x15f)];else{if(_0x2e9939[0x0][_0x479531(0x134)]==_0x479531(0x100))var _0x400320=users['Spanish'];else{if(_0x2e9939[0x0]['language']==_0x479531(0x14a))var _0x400320=users[_0x479531(0x14a)];else{if(_0x2e9939[0x0][_0x479531(0x134)]==_0x479531(0x16e))var _0x400320=users[_0x479531(0x14c)];else{if(_0x2e9939[0x0][_0x479531(0x134)]==_0x479531(0xfc))var _0x400320=users[_0x479531(0xfc)];else{if(_0x2e9939[0x0]['language']==_0x479531(0x117))var _0x400320=users[_0x479531(0x170)];}}}}}}}_0x2df9db[_0x479531(0x139)](_0x479531(0x107),{'success':_0x2c851f['flash']('success'),'errors':_0x2c851f[_0x479531(0x12a)](_0x479531(0x167)),'role':_0x8f6599,'profile':_0x30b997,'master_shop':_0x2e9939,'customers':_0x5a68a9,'sales':_0xab3465,'language':_0x400320});}catch(_0x11539b){console[_0x479531(0x110)](_0x11539b);}}),module[a0_0x3a98c5(0x147)]=router;