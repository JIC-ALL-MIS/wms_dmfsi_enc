var a0_0x131ad4=a0_0x2781;function a0_0x2781(_0x3c0182,_0xf51146){var _0x5c9bdf=a0_0x5c9b();return a0_0x2781=function(_0x27810e,_0x16be0a){_0x27810e=_0x27810e-0x19a;var _0x39778b=_0x5c9bdf[_0x27810e];return _0x39778b;},a0_0x2781(_0x3c0182,_0xf51146);}(function(_0x21d699,_0x1f1f53){var _0x40a9f3=a0_0x2781,_0xabb67d=_0x21d699();while(!![]){try{var _0x26dd9c=parseInt(_0x40a9f3(0x1f4))/0x1*(parseInt(_0x40a9f3(0x1e9))/0x2)+parseInt(_0x40a9f3(0x1e6))/0x3+parseInt(_0x40a9f3(0x1ea))/0x4*(-parseInt(_0x40a9f3(0x212))/0x5)+parseInt(_0x40a9f3(0x1d6))/0x6*(parseInt(_0x40a9f3(0x1ed))/0x7)+parseInt(_0x40a9f3(0x20d))/0x8*(-parseInt(_0x40a9f3(0x1de))/0x9)+-parseInt(_0x40a9f3(0x1c3))/0xa+-parseInt(_0x40a9f3(0x1f5))/0xb*(-parseInt(_0x40a9f3(0x1f9))/0xc);if(_0x26dd9c===_0x1f1f53)break;else _0xabb67d['push'](_0xabb67d['shift']());}catch(_0x2e0411){_0xabb67d['push'](_0xabb67d['shift']());}}}(a0_0x5c9b,0x42b9b));function a0_0x5c9b(){var _0x1347f6=['$product_details.product_stock','payment\x20successfull','exports','52362eesNjY','body','due_amount','Arabic','save','Enabled','secondary_code_QA','ToWarehouse','837KxColp','../models/all_models','Hindi','ToRoom','flash','Spanish','customer_docs','$product_details.product_name','699915sTCXuN','customers','params','2366PQJbxt','84cuKigp','$product_details.bin','status','14aBWmRN','render','English\x20(US)','for_categorize','$product_details.secondary_code','invoice','/give_payment/:id','139OAfnqn','33OrIrCP','product_stock','suppliers','success','2946492iyvEhv','foreach\x20newproduct','/invoice/:id','sales_quantity','forEach','$product_details','product_name_QA','return_sale','Portuguese','../public/language/languages.json','errors','c_payment','product_code_QA','date','primary_code','amount','$product_details.product_code','French','master','stocks','17048lGkwVH','type','QA\x20Warehouse','Portuguese\x20(BR)','aggregate','120740XrcMnZ','return_sale_edit_finished','findOne','warehouse_name','map','$product_details.type','return_qty','bin','getDate','$product_details._id','stock','slice','old_warehouse_data','post','customer','Sale\x20Return','redirect','user','language','types','json','find','log','product_code','sales_quantity_QA','German','bay','return_qty_QA','/view/:id','new\x20new_data','$name','/view','message','note','product_name','secondary_code','findById','sales_return_invoice','sales_return_finished','floorlevel','/sales_return/view','$product_details.primary_code','paid_amount','express','purchase\x20return\x20successfully','get','email','back','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','1732210LXuNOn','return_sale_QA','string','English','primary_code_QA','product_details','$product_details.floorlevel','Chinese','getFullYear','name','Arabic\x20(ae)','$product_details.bay','old_data','$product_details.rack','sale_qty','stocks_QA'];a0_0x5c9b=function(){return _0x1347f6;};return a0_0x5c9b();}const express=require(a0_0x131ad4(0x1bd)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x131ad4(0x1df)),auth=require('../middleware/auth'),users=require(a0_0x131ad4(0x202));router[a0_0x131ad4(0x1bf)](a0_0x131ad4(0x1b1),auth,async(_0x44a393,_0x586a60)=>{var _0x23bbf9=a0_0x131ad4;try{const {username:_0x5c8e7f,email:_0x4309a6,role:_0x304c62}=_0x44a393[_0x23bbf9(0x1a3)],_0x1faa27=_0x44a393[_0x23bbf9(0x1a3)],_0xe58874=await profile[_0x23bbf9(0x214)]({'email':_0x1faa27[_0x23bbf9(0x1c0)]}),_0x360f7a=await master_shop[_0x23bbf9(0x1a7)](),_0x2d4df1=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x23bbf9(0x1e7),'localField':_0x23bbf9(0x1a0),'foreignField':_0x23bbf9(0x1cc),'as':_0x23bbf9(0x1e4)}},{'$unwind':'$customer_docs'}]);if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]==_0x23bbf9(0x1ef)){var _0x18f5e8=users[_0x23bbf9(0x1c6)];console[_0x23bbf9(0x1a8)](_0x18f5e8);}else{if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]=='Hindi')var _0x18f5e8=users['Hindi'];else{if(_0x360f7a[0x0]['language']=='German')var _0x18f5e8=users['German'];else{if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]==_0x23bbf9(0x1e3))var _0x18f5e8=users[_0x23bbf9(0x1e3)];else{if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]==_0x23bbf9(0x20a))var _0x18f5e8=users[_0x23bbf9(0x20a)];else{if(_0x360f7a[0x0]['language']==_0x23bbf9(0x210))var _0x18f5e8=users[_0x23bbf9(0x201)];else{if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]==_0x23bbf9(0x1ca))var _0x18f5e8=users['Chinese'];else{if(_0x360f7a[0x0][_0x23bbf9(0x1a4)]==_0x23bbf9(0x1cd))var _0x18f5e8=users[_0x23bbf9(0x1d9)];}}}}}}}_0x586a60['render'](_0x23bbf9(0x1b8),{'success':_0x44a393[_0x23bbf9(0x1e2)]('success'),'errors':_0x44a393['flash']('errors'),'role':_0x1faa27,'profile':_0xe58874,'master_shop':_0x360f7a,'user':_0x2d4df1,'language':_0x18f5e8});}catch(_0x2ad3aa){console['log'](_0x2ad3aa);}}),router[a0_0x131ad4(0x1bf)](a0_0x131ad4(0x1ae),auth,async(_0x36bf62,_0x54f2d0)=>{var _0xc570c1=a0_0x131ad4;try{const {username:_0xb902a2,email:_0xedf755,role:_0x5860fb}=_0x36bf62['user'],_0x112a90=_0x36bf62[_0xc570c1(0x1a3)],_0x22d168=await profile[_0xc570c1(0x214)]({'email':_0x112a90['email']}),_0x273f72=await master_shop[_0xc570c1(0x1a7)]();console[_0xc570c1(0x1a8)](_0xc570c1(0x20b),_0x273f72);const _0x12e5f3=_0x36bf62[_0xc570c1(0x1e8)]['id'];console[_0xc570c1(0x1a8)](_0x12e5f3);var _0x261df4=['Return\x20Rooms'];const _0x35719b=await sales_return_finished[_0xc570c1(0x1b6)](_0x12e5f3),_0x3e4892=await warehouse[_0xc570c1(0x211)]([{'$match':{'name':_0x35719b[_0xc570c1(0x1dd)],'room':_0x35719b[_0xc570c1(0x1e1)]}},{'$unwind':_0xc570c1(0x1fe)},{'$group':{'_id':_0xc570c1(0x19b),'name':{'$first':_0xc570c1(0x1e5)},'product_stock':{'$first':_0xc570c1(0x1d3)},'bay':{'$first':_0xc570c1(0x1ce)},'bin':{'$first':_0xc570c1(0x1eb)},'type':{'$first':_0xc570c1(0x217)},'floorlevel':{'$first':_0xc570c1(0x1c9)},'primary_code':{'$first':_0xc570c1(0x1bb)},'secondary_code':{'$first':_0xc570c1(0x1f1)},'product_code':{'$first':_0xc570c1(0x209)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0xc570c1(0x1d0)}}}]);console[_0xc570c1(0x1a8)](_0x3e4892);const _0x5297e1=await warehouse['aggregate']([{'$match':{'status':_0xc570c1(0x1db),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0xc570c1(0x1b0),'name':{'$first':_0xc570c1(0x1b0)}}},{'$sort':{'name':0x1}}]),_0x30a73a=await warehouse[_0xc570c1(0x211)]([{'$match':{'status':_0xc570c1(0x1db),'name':_0xc570c1(0x20f)}},{'$group':{'_id':_0xc570c1(0x1b0),'name':{'$first':_0xc570c1(0x1b0)}}},{'$sort':{'name':0x1}}]),_0x5a3ebf=await product[_0xc570c1(0x1a7)]({});if(_0x273f72[0x0][_0xc570c1(0x1a4)]=='English\x20(US)'){var _0x3b66b2=users[_0xc570c1(0x1c6)];console[_0xc570c1(0x1a8)](_0x3b66b2);}else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]==_0xc570c1(0x1e0))var _0x3b66b2=users[_0xc570c1(0x1e0)];else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]==_0xc570c1(0x1ab))var _0x3b66b2=users['German'];else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]==_0xc570c1(0x1e3))var _0x3b66b2=users[_0xc570c1(0x1e3)];else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]=='French')var _0x3b66b2=users[_0xc570c1(0x20a)];else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]==_0xc570c1(0x210))var _0x3b66b2=users['Portuguese'];else{if(_0x273f72[0x0][_0xc570c1(0x1a4)]==_0xc570c1(0x1ca))var _0x3b66b2=users['Chinese'];else{if(_0x273f72[0x0]['language']=='Arabic\x20(ae)')var _0x3b66b2=users[_0xc570c1(0x1d9)];}}}}}}}_0x54f2d0[_0xc570c1(0x1ee)](_0xc570c1(0x213),{'success':_0x36bf62[_0xc570c1(0x1e2)](_0xc570c1(0x1f8)),'errors':_0x36bf62[_0xc570c1(0x1e2)]('errors'),'role':_0x112a90,'profile':_0x22d168,'master_shop':_0x273f72,'user':_0x35719b,'stock':_0x3e4892,'unit':_0x5a3ebf,'language':_0x3b66b2,'warehouses':_0x5297e1,'rooms':_0x261df4,'warehouse_QA':_0x30a73a});}catch(_0x512161){console[_0xc570c1(0x1a8)](_0x512161);}}),router['post'](a0_0x131ad4(0x1ae),auth,async(_0x2d43c2,_0x50c810)=>{var _0xbed871=a0_0x131ad4;if(_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1f0)]=='QA')try{const _0x2d8b1e=_0x2d43c2[_0xbed871(0x1e8)]['id'],_0x4d5d97=await sales_return[_0xbed871(0x214)]({'invoice':_0x2d43c2[_0xbed871(0x1d7)]['invoice']}),_0x2fb8e5=await warehouse[_0xbed871(0x214)]({'name':_0x4d5d97['ToWarehouse'],'room':_0x4d5d97[_0xbed871(0x1e1)]}),{invoice:_0x52b9d6,customer:_0x6e4f2d,date:_0x541b3d,warehouse_name:_0x10edaf,product_name:_0x545da1,primary_code:_0x108149,secondary_code:_0x4e4cc8,product_code:_0x33c8b4,sales_quantity:_0x17d34c,stocks:_0x2f926d,return_qty:_0x4fd103,note:_0x5b4e37,to_warehouse_name_QA:_0x4cf5a4,to_Room_name_QA:_0x3370b5}=_0x2d43c2[_0xbed871(0x1d7)];if(typeof product_name_QA==_0xbed871(0x1c5))var _0x222e7c=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1ff)]],_0x2e0958=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1c7)]],_0x19b6b1=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1dc)]],_0x4c7486=[_0x2d43c2['body'][_0xbed871(0x205)]],_0x395506=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1aa)]],_0x4b9a5d=[_0x2d43c2['body']['stocks_QA']],_0xc48bb7=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1ad)]];else var _0x222e7c=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1ff)]],_0x2e0958=[..._0x2d43c2['body'][_0xbed871(0x1c7)]],_0x19b6b1=[..._0x2d43c2[_0xbed871(0x1d7)]['secondary_code_QA']],_0x4c7486=[..._0x2d43c2['body']['product_code_QA']],_0x395506=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1aa)]],_0x4b9a5d=[..._0x2d43c2['body'][_0xbed871(0x1d2)]],_0xc48bb7=[..._0x2d43c2['body'][_0xbed871(0x1ad)]];const _0x218020=_0x222e7c['map'](_0x34697e=>{return _0x34697e={'product_name':_0x34697e};});_0x2e0958[_0xbed871(0x1fd)]((_0x5db554,_0xbcb139)=>{var _0x1549a3=_0xbed871;_0x218020[_0xbcb139][_0x1549a3(0x207)]=_0x5db554;}),_0x19b6b1[_0xbed871(0x1fd)]((_0x27da4c,_0x352514)=>{var _0x53c4bf=_0xbed871;_0x218020[_0x352514][_0x53c4bf(0x1b5)]=_0x27da4c;}),_0x4c7486[_0xbed871(0x1fd)]((_0x3c74ed,_0x4ff6e0)=>{var _0x62c618=_0xbed871;_0x218020[_0x4ff6e0][_0x62c618(0x1a9)]=_0x3c74ed;}),_0x395506[_0xbed871(0x1fd)]((_0x2802ec,_0x13f89d)=>{_0x218020[_0x13f89d]['sale_qty']=_0x2802ec;}),_0x4b9a5d[_0xbed871(0x1fd)]((_0x2a98b3,_0x45ec58)=>{var _0x8e3073=_0xbed871;_0x218020[_0x45ec58][_0x8e3073(0x19c)]=_0x2a98b3;}),_0xc48bb7[_0xbed871(0x1fd)]((_0x48e305,_0x35d343)=>{_0x218020[_0x35d343]['return_qty']=_0x48e305;}),_0x4d5d97[_0xbed871(0x1c4)][_0xbed871(0x1fd)](_0x4feb9d=>{var _0x2376a1=_0xbed871;const _0xe90a3f=_0x2fb8e5[_0x2376a1(0x1c8)][_0x2376a1(0x216)](_0x10a544=>{var _0x338e68=_0x2376a1;_0x10a544[_0x338e68(0x1b4)]==_0x4feb9d[_0x338e68(0x1b4)]&&(_0x10a544[_0x338e68(0x1f6)]=parseInt(_0x10a544[_0x338e68(0x1f6)])+parseInt(_0x4feb9d[_0x338e68(0x218)]));});}),await _0x2fb8e5[_0xbed871(0x1da)](),_0x4d5d97[_0xbed871(0x1f2)]=_0x52b9d6,_0x4d5d97[_0xbed871(0x1a0)]=_0x6e4f2d,_0x4d5d97['date']=_0x541b3d,_0x4d5d97['warehouse_name']=_0x10edaf,_0x4d5d97[_0xbed871(0x1c4)]=_0x218020,_0x4d5d97[_0xbed871(0x1b3)]=_0x5b4e37,_0x4d5d97['ToWarehouse']=_0x4cf5a4,_0x4d5d97[_0xbed871(0x1e1)]=_0x3370b5;const _0x4c8a7e=await _0x4d5d97[_0xbed871(0x1da)](),_0x2887fd=await c_payment_data[_0xbed871(0x214)]({'invoice':_0x2d43c2['body'][_0xbed871(0x1f2)],'reason':'Sale\x20Return'});_0x2887fd['suppliers']=_0x2d43c2['body']['suppliers'],_0x2887fd[_0xbed871(0x206)]=_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x206)],await _0x2887fd[_0xbed871(0x1da)](),_0x2d43c2[_0xbed871(0x1e2)](_0xbed871(0x1f8),_0xbed871(0x1be)),_0x50c810['redirect']('/sales_return_finished/view');}catch(_0x218325){console['log'](_0x218325),_0x50c810['status'](0xc8)[_0xbed871(0x1a6)]({'message':_0x218325[_0xbed871(0x1b2)]});}else try{const _0x4c1e0b=_0x2d43c2[_0xbed871(0x1e8)]['id'];console[_0xbed871(0x1a8)](_0x4c1e0b);const _0x5ef530=await sales_return['findOne']({'invoice':_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1f2)]});console[_0xbed871(0x1a8)](_0xbed871(0x1cf),_0x5ef530);const _0x2b7e0d=await warehouse['findOne']({'name':_0x5ef530[_0xbed871(0x1dd)],'room':_0x5ef530[_0xbed871(0x1e1)]});console[_0xbed871(0x1a8)](_0xbed871(0x19e),_0x2b7e0d);const {invoice:_0x104e8a,customer:_0xd50660,date:_0xc68461,warehouse_name:_0x34d271,product_name:_0x1a5189,primary_code:_0x2ef131,secondary_code:_0xd709a7,product_code:_0x15b098,sales_quantity:_0x493e90,stocks:_0x54c68c,return_qty:_0x4e7ea9,note:_0x12bdb3,to_warehouse_name:_0x509230,to_Room_name:_0x9dd7e2}=_0x2d43c2['body'];console[_0xbed871(0x1a8)](_0x2d43c2[_0xbed871(0x1d7)]);if(typeof _0x1a5189==_0xbed871(0x1c5))var _0x222e7c=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1b4)]],_0x2e0958=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x207)]],_0x19b6b1=[_0x2d43c2['body'][_0xbed871(0x1b5)]],_0x4c7486=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1a9)]],_0x395506=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1fc)]],_0x4b9a5d=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x20c)]],_0xc48bb7=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x218)]],_0x556df1=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1ac)]],_0xefe493=[_0x2d43c2['body'][_0xbed871(0x219)]],_0x16c904=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1a5)]],_0x3284a2=[_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1b9)]];else var _0x222e7c=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1b4)]],_0x2e0958=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x207)]],_0x19b6b1=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1b5)]],_0x4c7486=[..._0x2d43c2[_0xbed871(0x1d7)]['product_code']],_0x395506=[..._0x2d43c2['body']['sales_quantity']],_0x4b9a5d=[..._0x2d43c2['body'][_0xbed871(0x20c)]],_0xc48bb7=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x218)]],_0x556df1=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1ac)]],_0xefe493=[..._0x2d43c2[_0xbed871(0x1d7)]['bin']],_0x16c904=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1a5)]],_0x3284a2=[..._0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x1b9)]];const _0x2e3922=_0x222e7c[_0xbed871(0x216)](_0x1b068a=>{return _0x1b068a={'product_name':_0x1b068a};});_0x2e0958[_0xbed871(0x1fd)]((_0x291b55,_0x2de355)=>{var _0x39decb=_0xbed871;_0x2e3922[_0x2de355][_0x39decb(0x207)]=_0x291b55;}),_0x19b6b1[_0xbed871(0x1fd)]((_0x3b2f88,_0x55aea0)=>{_0x2e3922[_0x55aea0]['secondary_code']=_0x3b2f88;}),_0x4c7486['forEach']((_0x576402,_0x29208f)=>{_0x2e3922[_0x29208f]['product_code']=_0x576402;}),_0x395506[_0xbed871(0x1fd)]((_0x14eb6e,_0x2669ba)=>{var _0x3ec775=_0xbed871;_0x2e3922[_0x2669ba][_0x3ec775(0x1d1)]=_0x14eb6e;}),_0x4b9a5d[_0xbed871(0x1fd)]((_0x16744f,_0xb0ec02)=>{_0x2e3922[_0xb0ec02]['stock']=_0x16744f;}),_0xc48bb7[_0xbed871(0x1fd)]((_0x508fd8,_0x433c1b)=>{var _0x29823e=_0xbed871;_0x2e3922[_0x433c1b][_0x29823e(0x218)]=_0x508fd8;}),_0x556df1[_0xbed871(0x1fd)]((_0x18632f,_0x26dedd)=>{var _0x2d0d51=_0xbed871;_0x2e3922[_0x26dedd][_0x2d0d51(0x1ac)]=_0x18632f;}),_0xefe493[_0xbed871(0x1fd)]((_0x25098c,_0x4d7caf)=>{var _0x389e61=_0xbed871;_0x2e3922[_0x4d7caf][_0x389e61(0x219)]=_0x25098c;}),_0x16c904[_0xbed871(0x1fd)]((_0x185441,_0x5bc2f6)=>{var _0x1e3268=_0xbed871;_0x2e3922[_0x5bc2f6][_0x1e3268(0x20e)]=_0x185441;}),_0x3284a2[_0xbed871(0x1fd)]((_0x4f8e87,_0x2baf42)=>{var _0x5e8b9d=_0xbed871;_0x2e3922[_0x2baf42][_0x5e8b9d(0x1b9)]=_0x4f8e87;});var _0x5d1739=0x0;_0x2e3922[_0xbed871(0x1fd)](_0xa8d608=>{var _0x400e65=_0xbed871;console[_0x400e65(0x1a8)](_0x400e65(0x1fa),_0xa8d608),(parseInt(_0xa8d608[_0x400e65(0x1d1)])<parseInt(_0xa8d608[_0x400e65(0x218)])||parseInt(_0xa8d608['stock'])<parseInt(_0xa8d608[_0x400e65(0x218)])&&parseInt(_0xa8d608[_0x400e65(0x1d1)])>parseInt(_0xa8d608[_0x400e65(0x218)])||parseInt(_0xa8d608[_0x400e65(0x218)])==0x0)&&_0x5d1739++;});if(_0x5d1739!=0x0)return _0x2d43c2[_0xbed871(0x1e2)](_0xbed871(0x203),_0xbed871(0x1c2)),_0x50c810[_0xbed871(0x1a2)](_0xbed871(0x1c1));_0x5ef530[_0xbed871(0x200)]['forEach'](_0x5d8626=>{var _0xd9bfd0=_0xbed871;const _0x5c36c0=_0x2b7e0d[_0xd9bfd0(0x1c8)]['map'](_0x280d2a=>{var _0x12df62=_0xd9bfd0;_0x280d2a[_0x12df62(0x1b4)]==_0x5d8626[_0x12df62(0x1b4)]&&_0x280d2a[_0x12df62(0x1b9)]==_0x5d8626[_0x12df62(0x1b9)]&&_0x280d2a[_0x12df62(0x20e)]==_0x5d8626[_0x12df62(0x20e)]&&_0x280d2a[_0x12df62(0x219)]==_0x5d8626[_0x12df62(0x219)]&&_0x280d2a[_0x12df62(0x1ac)]==_0x5d8626[_0x12df62(0x1ac)]&&(_0x280d2a['product_stock']=parseInt(_0x280d2a['product_stock'])+parseInt(_0x5d8626[_0x12df62(0x218)]));});}),console[_0xbed871(0x1a8)](_0xbed871(0x19e),_0x2b7e0d),await _0x2b7e0d[_0xbed871(0x1da)](),_0x5ef530[_0xbed871(0x1f2)]=_0x104e8a,_0x5ef530['customer']=_0xd50660,_0x5ef530['date']=_0xc68461,_0x5ef530[_0xbed871(0x215)]=_0x34d271,_0x5ef530[_0xbed871(0x200)]=_0x2e3922,_0x5ef530[_0xbed871(0x1b3)]=_0x12bdb3,_0x5ef530[_0xbed871(0x1dd)]=_0x509230,_0x5ef530['ToRoom']=_0x9dd7e2;const _0x138b99=await _0x5ef530['save']();console[_0xbed871(0x1a8)](_0xbed871(0x1af),_0x138b99);const _0x4a9282=await c_payment_data[_0xbed871(0x214)]({'invoice':_0x2d43c2['body'][_0xbed871(0x1f2)],'reason':_0xbed871(0x1a1)});_0x4a9282['suppliers']=_0x2d43c2['body'][_0xbed871(0x1f7)],_0x4a9282['date']=_0x2d43c2[_0xbed871(0x1d7)][_0xbed871(0x206)],await _0x4a9282[_0xbed871(0x1da)](),_0x2d43c2[_0xbed871(0x1e2)](_0xbed871(0x1f8),'purchase\x20return\x20successfully'),_0x50c810[_0xbed871(0x1a2)](_0xbed871(0x1ba));}catch(_0x4159dc){console[_0xbed871(0x1a8)](_0x4159dc),_0x50c810[_0xbed871(0x1ec)](0xc8)[_0xbed871(0x1a6)]({'message':_0x4159dc[_0xbed871(0x1b2)]});}}),router[a0_0x131ad4(0x19f)](a0_0x131ad4(0x1f3),auth,async(_0x4659cc,_0x19d675)=>{var _0xa73dba=a0_0x131ad4;try{const _0x391130=_0x4659cc[_0xa73dba(0x1e8)]['id'],{invoice:_0x168bce,customer:_0x3b17ac,payable_to_customer:_0x4d83de,paid_amount:_0x1b16b9}=_0x4659cc[_0xa73dba(0x1d7)],_0x34d10f=await sales_return['findById'](_0x391130);console[_0xa73dba(0x1a8)]('data',_0x34d10f),console[_0xa73dba(0x1a8)](_0x4d83de),console[_0xa73dba(0x1a8)](_0x1b16b9);var _0x2b81bc=_0x4d83de-_0x1b16b9;console[_0xa73dba(0x1a8)]('subtract',_0x2b81bc),_0x34d10f[_0xa73dba(0x1bc)]=parseFloat(_0x1b16b9)+parseFloat(_0x34d10f[_0xa73dba(0x1bc)]),_0x34d10f[_0xa73dba(0x1d8)]=_0x2b81bc,console[_0xa73dba(0x1a8)](_0x34d10f);const _0x3668e1=await _0x34d10f[_0xa73dba(0x1da)]();console[_0xa73dba(0x1a8)](0x1b207);const _0x4591d5=await c_payment_data[_0xa73dba(0x214)]({'invoice':_0x4659cc['body']['invoice'],'reason':_0xa73dba(0x1a1)});console[_0xa73dba(0x1a8)](_0xa73dba(0x204),_0x4591d5),_0x4591d5[_0xa73dba(0x208)]=_0x2b81bc,await _0x4591d5[_0xa73dba(0x1da)]();let _0x9ca3b1=new Date(),_0x1921d6=('0'+_0x9ca3b1[_0xa73dba(0x19a)]())[_0xa73dba(0x19d)](-0x2),_0x39b05a=('0'+(_0x9ca3b1['getMonth']()+0x1))[_0xa73dba(0x19d)](-0x2),_0x3286f0=_0x9ca3b1[_0xa73dba(0x1cb)](),_0xd5ee9=_0x3286f0+'-'+_0x39b05a+'-'+_0x1921d6;const _0x5eae10=new customer_payment({'invoice':_0x168bce,'date':_0x3286f0+'-'+_0x39b05a+'-'+_0x1921d6,'customer':_0x3b17ac,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x1b16b9}),_0x259dbe=await _0x5eae10[_0xa73dba(0x1da)]();_0x4659cc['flash'](_0xa73dba(0x1f8),_0xa73dba(0x1d4)),_0x19d675['redirect'](_0xa73dba(0x1ba));}catch(_0x63a5f1){console[_0xa73dba(0x1a8)](_0x63a5f1);}}),router[a0_0x131ad4(0x1bf)](a0_0x131ad4(0x1fb),auth,async(_0x4a4139,_0x375943)=>{var _0x1815f9=a0_0x131ad4;try{const {username:_0xa0cbaa,email:_0x5b9801,role:_0x770367}=_0x4a4139['user'],_0x3811a4=_0x4a4139[_0x1815f9(0x1a3)],_0x4bb850=await profile[_0x1815f9(0x214)]({'email':_0x3811a4[_0x1815f9(0x1c0)]}),_0x18b33e=await master_shop[_0x1815f9(0x1a7)]();console['log'](_0x1815f9(0x20b),_0x18b33e);const _0xb04f93=_0x4a4139['params']['id'],_0x5d7bc3=await sales_return[_0x1815f9(0x1b6)](_0xb04f93);console['log'](_0x5d7bc3);const _0x1906dc=await customer[_0x1815f9(0x214)]({'name':_0x5d7bc3[_0x1815f9(0x1a0)]});console[_0x1815f9(0x1a8)](_0x1906dc);if(_0x18b33e[0x0]['language']=='English\x20(US)'){var _0x1fb6f4=users[_0x1815f9(0x1c6)];console[_0x1815f9(0x1a8)](_0x1fb6f4);}else{if(_0x18b33e[0x0]['language']==_0x1815f9(0x1e0))var _0x1fb6f4=users[_0x1815f9(0x1e0)];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x1ab))var _0x1fb6f4=users[_0x1815f9(0x1ab)];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x1e3))var _0x1fb6f4=users['Spanish'];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x20a))var _0x1fb6f4=users[_0x1815f9(0x20a)];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x210))var _0x1fb6f4=users['Portuguese'];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x1ca))var _0x1fb6f4=users[_0x1815f9(0x1ca)];else{if(_0x18b33e[0x0][_0x1815f9(0x1a4)]==_0x1815f9(0x1cd))var _0x1fb6f4=users[_0x1815f9(0x1d9)];}}}}}}}_0x375943[_0x1815f9(0x1ee)](_0x1815f9(0x1b7),{'success':_0x4a4139[_0x1815f9(0x1e2)](_0x1815f9(0x1f8)),'errors':_0x4a4139[_0x1815f9(0x1e2)](_0x1815f9(0x203)),'role':_0x3811a4,'profile':_0x4bb850,'master_shop':_0x18b33e,'customers':_0x1906dc,'sales':_0x5d7bc3,'language':_0x1fb6f4});}catch(_0x59c8c0){console[_0x1815f9(0x1a8)](_0x59c8c0);}}),module[a0_0x131ad4(0x1d5)]=router;