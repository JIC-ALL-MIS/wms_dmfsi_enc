function a0_0x1873(_0x4963f2,_0x29bb06){var _0x26613d=a0_0x2661();return a0_0x1873=function(_0x1873fd,_0x18a7e6){_0x1873fd=_0x1873fd-0x13a;var _0x2bff83=_0x26613d[_0x1873fd];return _0x2bff83;},a0_0x1873(_0x4963f2,_0x29bb06);}var a0_0x34507a=a0_0x1873;function a0_0x2661(){var _0x365985=['language','product_code','$product_details.rack','Enabled','invoice','17388kXISCs','Return\x20Rooms','body','old_data','66jpXxQJ','225142FTfGau','customer_docs','c_payment','$product_details.product_name','success','stock','$customer_docs','flash','types','Chinese','sale_qty','post','bay','sales_quantity','findOne','$product_details.type','Portuguese\x20(BR)','status','string','$product_details.floorlevel','secondary_code','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','getMonth','bin','2515OXxSkA','/sales_return/view','French','paid_amount','exports','sales_return_finished','due_amount','subtract','getFullYear','/invoice/:id','$product_details.product_code','Hindi','$product_details.storage','customers','primary_code_QA','foreach\x20newproduct','173456yXnhCI','user','1036818Ypwehx','warehouse_name','map','customer','English','errors','sales_quantity_QA','amount','Arabic\x20(ae)','$product_details.bay','params','date','German','secondary_code_QA','product_code_QA','log','11418tJiBdf','$product_details.bin','for_categorize','return_sale_QA','get','primary_code','redirect','product_stock','stocks','findById','forEach','product_details','purchase\x20return\x20successfully','English\x20(US)','product_name','getDate','render','/view','Portuguese','return_sale','email','/give_payment/:id','Finished\x20Goods','return_qty','846910DknGlJ','stocks_QA','212pPAcKK','old_warehouse_data','find','ToWarehouse','119KSILdm','note','Sale\x20Return','114693uvNHEF','/view/:id','type','Router','json','ToRoom','Arabic','$product_details','floorlevel','Spanish','master','data','return_qty_QA','message','aggregate','$name','suppliers','save','return_sale_edit_finished','QA\x20Warehouse','slice','../public/language/languages.json','back','/sales_return_finished/view'];a0_0x2661=function(){return _0x365985;};return a0_0x2661();}(function(_0x40c55e,_0x434514){var _0x2a628d=a0_0x1873,_0x2ce3ee=_0x40c55e();while(!![]){try{var _0x33efc3=parseInt(_0x2a628d(0x1aa))/0x1+parseInt(_0x2a628d(0x14f))/0x2+parseInt(_0x2a628d(0x14a))/0x3*(parseInt(_0x2a628d(0x1a3))/0x4)+parseInt(_0x2a628d(0x167))/0x5*(-parseInt(_0x2a628d(0x189))/0x6)+parseInt(_0x2a628d(0x1a7))/0x7*(parseInt(_0x2a628d(0x177))/0x8)+parseInt(_0x2a628d(0x179))/0x9+parseInt(_0x2a628d(0x1a1))/0xa*(parseInt(_0x2a628d(0x14e))/0xb);if(_0x33efc3===_0x434514)break;else _0x2ce3ee['push'](_0x2ce3ee['shift']());}catch(_0x19c844){_0x2ce3ee['push'](_0x2ce3ee['shift']());}}}(a0_0x2661,0x8af61));const express=require('express'),app=express(),router=express[a0_0x34507a(0x1ad)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x34507a(0x142));router[a0_0x34507a(0x18d)](a0_0x34507a(0x19a),auth,async(_0x46e26b,_0x53b875)=>{var _0x3f47d5=a0_0x34507a;try{const {username:_0x1816e2,email:_0x40f27f,role:_0x2d14de}=_0x46e26b[_0x3f47d5(0x178)],_0x48d307=_0x46e26b[_0x3f47d5(0x178)],_0x391f4f=await profile[_0x3f47d5(0x15d)]({'email':_0x48d307[_0x3f47d5(0x19d)]}),_0x1dc1b7=await master_shop[_0x3f47d5(0x1a5)](),_0x3dfc59=await sales_return_finished[_0x3f47d5(0x13b)]([{'$lookup':{'from':_0x3f47d5(0x174),'localField':_0x3f47d5(0x17c),'foreignField':'name','as':_0x3f47d5(0x150)}},{'$unwind':_0x3f47d5(0x155)}]);if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]==_0x3f47d5(0x196)){var _0xdc7def=users[_0x3f47d5(0x17d)];console[_0x3f47d5(0x188)](_0xdc7def);}else{if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]==_0x3f47d5(0x172))var _0xdc7def=users[_0x3f47d5(0x172)];else{if(_0x1dc1b7[0x0]['language']==_0x3f47d5(0x185))var _0xdc7def=users[_0x3f47d5(0x185)];else{if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]==_0x3f47d5(0x1b3))var _0xdc7def=users['Spanish'];else{if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]=='French')var _0xdc7def=users[_0x3f47d5(0x169)];else{if(_0x1dc1b7[0x0]['language']==_0x3f47d5(0x15f))var _0xdc7def=users[_0x3f47d5(0x19b)];else{if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]=='Chinese')var _0xdc7def=users[_0x3f47d5(0x158)];else{if(_0x1dc1b7[0x0][_0x3f47d5(0x145)]==_0x3f47d5(0x181))var _0xdc7def=users[_0x3f47d5(0x1b0)];}}}}}}}_0x53b875[_0x3f47d5(0x199)](_0x3f47d5(0x16c),{'success':_0x46e26b[_0x3f47d5(0x156)](_0x3f47d5(0x153)),'errors':_0x46e26b[_0x3f47d5(0x156)]('errors'),'role':_0x48d307,'profile':_0x391f4f,'master_shop':_0x1dc1b7,'user':_0x3dfc59,'language':_0xdc7def});}catch(_0x2b8569){console['log'](_0x2b8569);}}),router[a0_0x34507a(0x18d)](a0_0x34507a(0x1ab),auth,async(_0x975b1a,_0x1b2ba1)=>{var _0x5bed0a=a0_0x34507a;try{const {username:_0x5b1d54,email:_0x1f88ba,role:_0x430684}=_0x975b1a[_0x5bed0a(0x178)],_0x1ec40=_0x975b1a['user'],_0x2a601d=await profile[_0x5bed0a(0x15d)]({'email':_0x1ec40[_0x5bed0a(0x19d)]}),_0x1e19c4=await master_shop[_0x5bed0a(0x1a5)]();console['log']('master',_0x1e19c4);const _0x2ac6fe=_0x975b1a[_0x5bed0a(0x183)]['id'];console['log'](_0x2ac6fe);var _0x20be20=[_0x5bed0a(0x14b)];const _0x551775=await sales_return_finished[_0x5bed0a(0x192)](_0x2ac6fe),_0x5a93a5=await warehouse[_0x5bed0a(0x13b)]([{'$match':{'name':_0x551775[_0x5bed0a(0x1a6)],'room':_0x551775[_0x5bed0a(0x1af)]}},{'$unwind':_0x5bed0a(0x1b1)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5bed0a(0x152)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x5bed0a(0x182)},'bin':{'$first':_0x5bed0a(0x18a)},'type':{'$first':_0x5bed0a(0x15e)},'floorlevel':{'$first':_0x5bed0a(0x162)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5bed0a(0x171)},'storage':{'$first':_0x5bed0a(0x173)},'rack':{'$first':_0x5bed0a(0x147)}}}]);console[_0x5bed0a(0x188)](_0x5a93a5);const _0x443a77=await warehouse[_0x5bed0a(0x13b)]([{'$match':{'status':_0x5bed0a(0x148),'warehouse_category':_0x5bed0a(0x19f)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x349894=await warehouse[_0x5bed0a(0x13b)]([{'$match':{'status':_0x5bed0a(0x148),'name':_0x5bed0a(0x140)}},{'$group':{'_id':_0x5bed0a(0x13c),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x3904ee=await product['find']({});if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x196)){var _0x5db144=users[_0x5bed0a(0x17d)];console[_0x5bed0a(0x188)](_0x5db144);}else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x172))var _0x5db144=users[_0x5bed0a(0x172)];else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x185))var _0x5db144=users[_0x5bed0a(0x185)];else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x1b3))var _0x5db144=users[_0x5bed0a(0x1b3)];else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x169))var _0x5db144=users[_0x5bed0a(0x169)];else{if(_0x1e19c4[0x0]['language']=='Portuguese\x20(BR)')var _0x5db144=users[_0x5bed0a(0x19b)];else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x158))var _0x5db144=users[_0x5bed0a(0x158)];else{if(_0x1e19c4[0x0][_0x5bed0a(0x145)]==_0x5bed0a(0x181))var _0x5db144=users[_0x5bed0a(0x1b0)];}}}}}}}_0x1b2ba1[_0x5bed0a(0x199)](_0x5bed0a(0x13f),{'success':_0x975b1a['flash']('success'),'errors':_0x975b1a['flash'](_0x5bed0a(0x17e)),'role':_0x1ec40,'profile':_0x2a601d,'master_shop':_0x1e19c4,'user':_0x551775,'stock':_0x5a93a5,'unit':_0x3904ee,'language':_0x5db144,'warehouses':_0x443a77,'rooms':_0x20be20,'warehouse_QA':_0x349894});}catch(_0x2f6ee6){console[_0x5bed0a(0x188)](_0x2f6ee6);}}),router[a0_0x34507a(0x15a)](a0_0x34507a(0x1ab),auth,async(_0x38cc3c,_0x409094)=>{var _0x515ea8=a0_0x34507a;if(_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x18b)]=='QA')try{const _0x5b0417=_0x38cc3c[_0x515ea8(0x183)]['id'],_0x170f39=await sales_return['findOne']({'invoice':_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x149)]}),_0x285782=await warehouse[_0x515ea8(0x15d)]({'name':_0x170f39[_0x515ea8(0x1a6)],'room':_0x170f39[_0x515ea8(0x1af)]}),{invoice:_0x3171ea,customer:_0x3837ee,date:_0x465bc1,warehouse_name:_0x201995,product_name:_0x546e5f,primary_code:_0x442a58,secondary_code:_0x40e843,product_code:_0x16cd8b,sales_quantity:_0x21fb0b,stocks:_0x353dfc,return_qty:_0xee0d04,note:_0x489d7f,to_warehouse_name_QA:_0x3da1e4,to_Room_name_QA:_0x2cc7b8}=_0x38cc3c[_0x515ea8(0x14c)];if(typeof product_name_QA==_0x515ea8(0x161))var _0x3c9842=[_0x38cc3c[_0x515ea8(0x14c)]['product_name_QA']],_0x13f9fd=[_0x38cc3c['body'][_0x515ea8(0x175)]],_0x369476=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x186)]],_0x1580a1=[_0x38cc3c['body']['product_code_QA']],_0x55674d=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x17f)]],_0x39291e=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x1a2)]],_0x8a1ed2=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x1b6)]];else var _0x3c9842=[..._0x38cc3c[_0x515ea8(0x14c)]['product_name_QA']],_0x13f9fd=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x175)]],_0x369476=[..._0x38cc3c['body'][_0x515ea8(0x186)]],_0x1580a1=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x187)]],_0x55674d=[..._0x38cc3c['body']['sales_quantity_QA']],_0x39291e=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x1a2)]],_0x8a1ed2=[..._0x38cc3c['body'][_0x515ea8(0x1b6)]];const _0x54d2e0=_0x3c9842[_0x515ea8(0x17b)](_0x481878=>{return _0x481878={'product_name':_0x481878};});_0x13f9fd[_0x515ea8(0x193)]((_0x2931d3,_0x538f9e)=>{var _0x22110a=_0x515ea8;_0x54d2e0[_0x538f9e][_0x22110a(0x18e)]=_0x2931d3;}),_0x369476[_0x515ea8(0x193)]((_0x5e1367,_0x4d4977)=>{var _0x1e8e07=_0x515ea8;_0x54d2e0[_0x4d4977][_0x1e8e07(0x163)]=_0x5e1367;}),_0x1580a1[_0x515ea8(0x193)]((_0x3c8808,_0x2277b3)=>{_0x54d2e0[_0x2277b3]['product_code']=_0x3c8808;}),_0x55674d[_0x515ea8(0x193)]((_0x3437e5,_0x22d4a3)=>{_0x54d2e0[_0x22d4a3]['sale_qty']=_0x3437e5;}),_0x39291e[_0x515ea8(0x193)]((_0x40f003,_0x33db7d)=>{_0x54d2e0[_0x33db7d]['stock']=_0x40f003;}),_0x8a1ed2[_0x515ea8(0x193)]((_0x5ca631,_0x93a78)=>{var _0x3237c1=_0x515ea8;_0x54d2e0[_0x93a78][_0x3237c1(0x1a0)]=_0x5ca631;}),_0x170f39[_0x515ea8(0x18c)]['forEach'](_0x5c9159=>{var _0x4fdde1=_0x515ea8;const _0x3af345=_0x285782[_0x4fdde1(0x194)]['map'](_0x169b27=>{var _0x3395bf=_0x4fdde1;_0x169b27[_0x3395bf(0x197)]==_0x5c9159[_0x3395bf(0x197)]&&(_0x169b27[_0x3395bf(0x190)]=parseInt(_0x169b27[_0x3395bf(0x190)])+parseInt(_0x5c9159[_0x3395bf(0x1a0)]));});}),await _0x285782[_0x515ea8(0x13e)](),_0x170f39[_0x515ea8(0x149)]=_0x3171ea,_0x170f39[_0x515ea8(0x17c)]=_0x3837ee,_0x170f39[_0x515ea8(0x184)]=_0x465bc1,_0x170f39[_0x515ea8(0x17a)]=_0x201995,_0x170f39[_0x515ea8(0x18c)]=_0x54d2e0,_0x170f39['note']=_0x489d7f,_0x170f39[_0x515ea8(0x1a6)]=_0x3da1e4,_0x170f39['ToRoom']=_0x2cc7b8;const _0x1911d2=await _0x170f39['save'](),_0x484bd3=await c_payment_data['findOne']({'invoice':_0x38cc3c[_0x515ea8(0x14c)]['invoice'],'reason':_0x515ea8(0x1a9)});_0x484bd3[_0x515ea8(0x13d)]=_0x38cc3c[_0x515ea8(0x14c)]['suppliers'],_0x484bd3[_0x515ea8(0x184)]=_0x38cc3c['body'][_0x515ea8(0x184)],await _0x484bd3[_0x515ea8(0x13e)](),_0x38cc3c[_0x515ea8(0x156)](_0x515ea8(0x153),_0x515ea8(0x195)),_0x409094['redirect'](_0x515ea8(0x144));}catch(_0x3321cd){console[_0x515ea8(0x188)](_0x3321cd),_0x409094[_0x515ea8(0x160)](0xc8)[_0x515ea8(0x1ae)]({'message':_0x3321cd['message']});}else try{const _0x5565d9=_0x38cc3c[_0x515ea8(0x183)]['id'];console[_0x515ea8(0x188)](_0x5565d9);const _0x3ecb78=await sales_return[_0x515ea8(0x15d)]({'invoice':_0x38cc3c['body'][_0x515ea8(0x149)]});console[_0x515ea8(0x188)](_0x515ea8(0x14d),_0x3ecb78);const _0x4d2dc5=await warehouse[_0x515ea8(0x15d)]({'name':_0x3ecb78[_0x515ea8(0x1a6)],'room':_0x3ecb78[_0x515ea8(0x1af)]});console['log'](_0x515ea8(0x1a4),_0x4d2dc5);const {invoice:_0xa81925,customer:_0x434783,date:_0x586fba,warehouse_name:_0x2c782e,product_name:_0x3d5898,primary_code:_0x46007b,secondary_code:_0x4bb06f,product_code:_0x441f8d,sales_quantity:_0x5d7dc6,stocks:_0x3f1478,return_qty:_0x30a642,note:_0x167bcc,to_warehouse_name:_0x3fa56b,to_Room_name:_0x2c67f0}=_0x38cc3c[_0x515ea8(0x14c)];console[_0x515ea8(0x188)](_0x38cc3c[_0x515ea8(0x14c)]);if(typeof _0x3d5898==_0x515ea8(0x161))var _0x3c9842=[_0x38cc3c['body'][_0x515ea8(0x197)]],_0x13f9fd=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x18e)]],_0x369476=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x163)]],_0x1580a1=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x146)]],_0x55674d=[_0x38cc3c['body'][_0x515ea8(0x15c)]],_0x39291e=[_0x38cc3c['body']['stocks']],_0x8a1ed2=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x1a0)]],_0x31252b=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x15b)]],_0x597444=[_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x166)]],_0x37f319=[_0x38cc3c['body'][_0x515ea8(0x157)]],_0x78c71b=[_0x38cc3c['body'][_0x515ea8(0x1b2)]];else var _0x3c9842=[..._0x38cc3c['body'][_0x515ea8(0x197)]],_0x13f9fd=[..._0x38cc3c['body'][_0x515ea8(0x18e)]],_0x369476=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x163)]],_0x1580a1=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x146)]],_0x55674d=[..._0x38cc3c[_0x515ea8(0x14c)]['sales_quantity']],_0x39291e=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x191)]],_0x8a1ed2=[..._0x38cc3c['body']['return_qty']],_0x31252b=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x15b)]],_0x597444=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x166)]],_0x37f319=[..._0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x157)]],_0x78c71b=[..._0x38cc3c['body'][_0x515ea8(0x1b2)]];const _0x3114da=_0x3c9842[_0x515ea8(0x17b)](_0x1f48eb=>{return _0x1f48eb={'product_name':_0x1f48eb};});_0x13f9fd['forEach']((_0x5d61d3,_0x4e695d)=>{var _0xf55984=_0x515ea8;_0x3114da[_0x4e695d][_0xf55984(0x18e)]=_0x5d61d3;}),_0x369476[_0x515ea8(0x193)]((_0x3ac92c,_0x1ddfc5)=>{var _0x42a766=_0x515ea8;_0x3114da[_0x1ddfc5][_0x42a766(0x163)]=_0x3ac92c;}),_0x1580a1[_0x515ea8(0x193)]((_0x1b6f14,_0x48c85b)=>{_0x3114da[_0x48c85b]['product_code']=_0x1b6f14;}),_0x55674d[_0x515ea8(0x193)]((_0x4f1a4a,_0x3ad0a6)=>{_0x3114da[_0x3ad0a6]['sale_qty']=_0x4f1a4a;}),_0x39291e[_0x515ea8(0x193)]((_0x509483,_0x570567)=>{_0x3114da[_0x570567]['stock']=_0x509483;}),_0x8a1ed2['forEach']((_0xfb0792,_0x322bb3)=>{var _0x52e88e=_0x515ea8;_0x3114da[_0x322bb3][_0x52e88e(0x1a0)]=_0xfb0792;}),_0x31252b['forEach']((_0x233374,_0xbccf8b)=>{_0x3114da[_0xbccf8b]['bay']=_0x233374;}),_0x597444[_0x515ea8(0x193)]((_0x42ad54,_0x39a19d)=>{var _0x79d3d1=_0x515ea8;_0x3114da[_0x39a19d][_0x79d3d1(0x166)]=_0x42ad54;}),_0x37f319[_0x515ea8(0x193)]((_0x2ef148,_0x8c422a)=>{var _0x40644a=_0x515ea8;_0x3114da[_0x8c422a][_0x40644a(0x1ac)]=_0x2ef148;}),_0x78c71b[_0x515ea8(0x193)]((_0x1f09eb,_0x3afeb5)=>{var _0x236a69=_0x515ea8;_0x3114da[_0x3afeb5][_0x236a69(0x1b2)]=_0x1f09eb;});var _0x4957b8=0x0;_0x3114da['forEach'](_0x4bdf9b=>{var _0x70448c=_0x515ea8;console[_0x70448c(0x188)](_0x70448c(0x176),_0x4bdf9b),(parseInt(_0x4bdf9b[_0x70448c(0x159)])<parseInt(_0x4bdf9b[_0x70448c(0x1a0)])||parseInt(_0x4bdf9b[_0x70448c(0x154)])<parseInt(_0x4bdf9b[_0x70448c(0x1a0)])&&parseInt(_0x4bdf9b[_0x70448c(0x159)])>parseInt(_0x4bdf9b[_0x70448c(0x1a0)])||parseInt(_0x4bdf9b[_0x70448c(0x1a0)])==0x0)&&_0x4957b8++;});if(_0x4957b8!=0x0)return _0x38cc3c[_0x515ea8(0x156)](_0x515ea8(0x17e),_0x515ea8(0x164)),_0x409094[_0x515ea8(0x18f)](_0x515ea8(0x143));_0x3ecb78[_0x515ea8(0x19c)][_0x515ea8(0x193)](_0xcc8f0b=>{var _0x3464bb=_0x515ea8;const _0x263cfb=_0x4d2dc5[_0x3464bb(0x194)][_0x3464bb(0x17b)](_0x3d8cd7=>{var _0x4cb266=_0x3464bb;_0x3d8cd7['product_name']==_0xcc8f0b[_0x4cb266(0x197)]&&_0x3d8cd7['floorlevel']==_0xcc8f0b[_0x4cb266(0x1b2)]&&_0x3d8cd7[_0x4cb266(0x1ac)]==_0xcc8f0b['type']&&_0x3d8cd7[_0x4cb266(0x166)]==_0xcc8f0b[_0x4cb266(0x166)]&&_0x3d8cd7[_0x4cb266(0x15b)]==_0xcc8f0b[_0x4cb266(0x15b)]&&(_0x3d8cd7[_0x4cb266(0x190)]=parseInt(_0x3d8cd7[_0x4cb266(0x190)])+parseInt(_0xcc8f0b[_0x4cb266(0x1a0)]));});}),console[_0x515ea8(0x188)](_0x515ea8(0x1a4),_0x4d2dc5),await _0x4d2dc5[_0x515ea8(0x13e)](),_0x3ecb78[_0x515ea8(0x149)]=_0xa81925,_0x3ecb78[_0x515ea8(0x17c)]=_0x434783,_0x3ecb78[_0x515ea8(0x184)]=_0x586fba,_0x3ecb78[_0x515ea8(0x17a)]=_0x2c782e,_0x3ecb78[_0x515ea8(0x19c)]=_0x3114da,_0x3ecb78[_0x515ea8(0x1a8)]=_0x167bcc,_0x3ecb78[_0x515ea8(0x1a6)]=_0x3fa56b,_0x3ecb78[_0x515ea8(0x1af)]=_0x2c67f0;const _0x1ca05f=await _0x3ecb78[_0x515ea8(0x13e)]();console[_0x515ea8(0x188)]('new\x20new_data',_0x1ca05f);const _0x2edbee=await c_payment_data[_0x515ea8(0x15d)]({'invoice':_0x38cc3c[_0x515ea8(0x14c)]['invoice'],'reason':_0x515ea8(0x1a9)});_0x2edbee[_0x515ea8(0x13d)]=_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x13d)],_0x2edbee[_0x515ea8(0x184)]=_0x38cc3c[_0x515ea8(0x14c)][_0x515ea8(0x184)],await _0x2edbee[_0x515ea8(0x13e)](),_0x38cc3c[_0x515ea8(0x156)](_0x515ea8(0x153),_0x515ea8(0x195)),_0x409094[_0x515ea8(0x18f)](_0x515ea8(0x168));}catch(_0x5a1804){console[_0x515ea8(0x188)](_0x5a1804),_0x409094['status'](0xc8)['json']({'message':_0x5a1804[_0x515ea8(0x13a)]});}}),router['post'](a0_0x34507a(0x19e),auth,async(_0x245fd3,_0x1d3303)=>{var _0x3c1f64=a0_0x34507a;try{const _0x494754=_0x245fd3[_0x3c1f64(0x183)]['id'],{invoice:_0x153457,customer:_0x1a5532,payable_to_customer:_0x48a763,paid_amount:_0x24cc4d}=_0x245fd3[_0x3c1f64(0x14c)],_0x5b3511=await sales_return['findById'](_0x494754);console[_0x3c1f64(0x188)](_0x3c1f64(0x1b5),_0x5b3511),console[_0x3c1f64(0x188)](_0x48a763),console[_0x3c1f64(0x188)](_0x24cc4d);var _0x5277be=_0x48a763-_0x24cc4d;console['log'](_0x3c1f64(0x16e),_0x5277be),_0x5b3511[_0x3c1f64(0x16a)]=parseFloat(_0x24cc4d)+parseFloat(_0x5b3511['paid_amount']),_0x5b3511[_0x3c1f64(0x16d)]=_0x5277be,console['log'](_0x5b3511);const _0x201702=await _0x5b3511[_0x3c1f64(0x13e)]();console['log'](0x1b207);const _0x5a9df5=await c_payment_data[_0x3c1f64(0x15d)]({'invoice':_0x245fd3[_0x3c1f64(0x14c)]['invoice'],'reason':_0x3c1f64(0x1a9)});console['log'](_0x3c1f64(0x151),_0x5a9df5),_0x5a9df5[_0x3c1f64(0x180)]=_0x5277be,await _0x5a9df5[_0x3c1f64(0x13e)]();let _0x1b55ed=new Date(),_0x5eec3b=('0'+_0x1b55ed[_0x3c1f64(0x198)]())['slice'](-0x2),_0x49c0f4=('0'+(_0x1b55ed[_0x3c1f64(0x165)]()+0x1))[_0x3c1f64(0x141)](-0x2),_0x5d0b79=_0x1b55ed[_0x3c1f64(0x16f)](),_0x196f44=_0x5d0b79+'-'+_0x49c0f4+'-'+_0x5eec3b;const _0x1f16d4=new customer_payment({'invoice':_0x153457,'date':_0x5d0b79+'-'+_0x49c0f4+'-'+_0x5eec3b,'customer':_0x1a5532,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x24cc4d}),_0xfd1897=await _0x1f16d4['save']();_0x245fd3['flash'](_0x3c1f64(0x153),'payment\x20successfull'),_0x1d3303[_0x3c1f64(0x18f)](_0x3c1f64(0x168));}catch(_0x5d45a8){console['log'](_0x5d45a8);}}),router['get'](a0_0x34507a(0x170),auth,async(_0x23917e,_0x16fe5f)=>{var _0x47fa90=a0_0x34507a;try{const {username:_0x4cbd50,email:_0x3f8dcb,role:_0x3f2095}=_0x23917e['user'],_0x391bc7=_0x23917e[_0x47fa90(0x178)],_0x160c23=await profile['findOne']({'email':_0x391bc7[_0x47fa90(0x19d)]}),_0x38b442=await master_shop['find']();console[_0x47fa90(0x188)](_0x47fa90(0x1b4),_0x38b442);const _0x1cfc27=_0x23917e[_0x47fa90(0x183)]['id'],_0x1c24b6=await sales_return[_0x47fa90(0x192)](_0x1cfc27);console[_0x47fa90(0x188)](_0x1c24b6);const _0x2a7a28=await customer[_0x47fa90(0x15d)]({'name':_0x1c24b6[_0x47fa90(0x17c)]});console[_0x47fa90(0x188)](_0x2a7a28);if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x196)){var _0x3433aa=users[_0x47fa90(0x17d)];console['log'](_0x3433aa);}else{if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x172))var _0x3433aa=users['Hindi'];else{if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x185))var _0x3433aa=users['German'];else{if(_0x38b442[0x0]['language']==_0x47fa90(0x1b3))var _0x3433aa=users['Spanish'];else{if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x169))var _0x3433aa=users[_0x47fa90(0x169)];else{if(_0x38b442[0x0][_0x47fa90(0x145)]=='Portuguese\x20(BR)')var _0x3433aa=users['Portuguese'];else{if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x158))var _0x3433aa=users[_0x47fa90(0x158)];else{if(_0x38b442[0x0][_0x47fa90(0x145)]==_0x47fa90(0x181))var _0x3433aa=users[_0x47fa90(0x1b0)];}}}}}}}_0x16fe5f[_0x47fa90(0x199)]('sales_return_invoice',{'success':_0x23917e[_0x47fa90(0x156)](_0x47fa90(0x153)),'errors':_0x23917e[_0x47fa90(0x156)](_0x47fa90(0x17e)),'role':_0x391bc7,'profile':_0x160c23,'master_shop':_0x38b442,'customers':_0x2a7a28,'sales':_0x1c24b6,'language':_0x3433aa});}catch(_0x5a24e5){console[_0x47fa90(0x188)](_0x5a24e5);}}),module[a0_0x34507a(0x16b)]=router;