function a0_0x5072(){var _0x53b0bc=['map','findOne','back','user','master','invoice','sale_qty','$customer_docs','type','warehouse_name','return_sale_QA','secondary_code','return_qty_QA','Finished\x20Goods','find','paid_amount','forEach','/sales_return_finished/view','status','1076wLuGUv','customers','706KmeOBI','$product_details.type','product_name_QA','sales_quantity','sales_return_invoice','json','old_data','note','message','data','string','104464fDwIiG','amount','/view/:id','../models/all_models','params','Hindi','flash','French','bay','Portuguese\x20(BR)','1399344mblmCI','$product_details.secondary_code','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','c_payment','express','$product_details.product_stock','language','product_stock','payment\x20successfull','$product_details._id','for_categorize','save','suppliers','Arabic','customer_docs','Returned\x20Payment\x20For\x20Sale\x20Return','QA\x20Warehouse','sales_return_finished','types','redirect','stocks','English\x20(US)','15XXWiWf','success','product_code_QA','name','getDate','product_code','primary_code_QA','log','12yOykNf','sales_quantity_QA','slice','stock','2620lgsBQx','../middleware/auth','purchase\x20return\x20successfully','4520919zIbAfV','ToWarehouse','Portuguese','Sale\x20Return','due_amount','return_sale','/give_payment/:id','bin','4152TlzVFs','$product_details.bay','/sales_return/view','stocks_QA','return_qty','Enabled','$product_details.product_name','aggregate','post','date','findById','Spanish','get','Chinese','$product_details.rack','errors','11hRmifE','5306NZeWfS','Arabic\x20(ae)','ToRoom','Return\x20Rooms','render','German','floorlevel','product_details','customer','secondary_code_QA','old_warehouse_data','email','English','$name','return_sale_edit_finished','product_name','$product_details.bin','body','$product_details.storage','primary_code','652450UGycbd','19125vYLLkx'];a0_0x5072=function(){return _0x53b0bc;};return a0_0x5072();}var a0_0x25e7ad=a0_0x2262;(function(_0x87c249,_0x35f953){var _0x131112=a0_0x2262,_0xb8a16d=_0x87c249();while(!![]){try{var _0x17625d=-parseInt(_0x131112(0x149))/0x1*(-parseInt(_0x131112(0x14b))/0x2)+parseInt(_0x131112(0xf8))/0x3*(-parseInt(_0x131112(0x156))/0x4)+parseInt(_0x131112(0x134))/0x5*(-parseInt(_0x131112(0x100))/0x6)+-parseInt(_0x131112(0x120))/0x7*(-parseInt(_0x131112(0x10f))/0x8)+-parseInt(_0x131112(0x135))/0x9*(parseInt(_0x131112(0x104))/0xa)+parseInt(_0x131112(0x11f))/0xb*(parseInt(_0x131112(0x160))/0xc)+parseInt(_0x131112(0x107))/0xd;if(_0x17625d===_0x35f953)break;else _0xb8a16d['push'](_0xb8a16d['shift']());}catch(_0x3edd8a){_0xb8a16d['push'](_0xb8a16d['shift']());}}}(a0_0x5072,0x46a0f));const express=require(a0_0x25e7ad(0x164)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x25e7ad(0x159)),auth=require(a0_0x25e7ad(0x105)),users=require('../public/language/languages.json');function a0_0x2262(_0x1d2413,_0x33521d){var _0x507265=a0_0x5072();return a0_0x2262=function(_0x22625a,_0x243ac1){_0x22625a=_0x22625a-0xe7;var _0x445e5a=_0x507265[_0x22625a];return _0x445e5a;},a0_0x2262(_0x1d2413,_0x33521d);}router[a0_0x25e7ad(0x11b)]('/view',auth,async(_0x2183bc,_0x3f14b8)=>{var _0x346f96=a0_0x25e7ad;try{const {username:_0x457e8a,email:_0x4ce808,role:_0x45a205}=_0x2183bc[_0x346f96(0x139)],_0x2efe7a=_0x2183bc[_0x346f96(0x139)],_0x5f53f8=await profile[_0x346f96(0x137)]({'email':_0x2efe7a[_0x346f96(0x12b)]}),_0x35ad64=await master_shop[_0x346f96(0x144)](),_0x1ded89=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x346f96(0x14a),'localField':_0x346f96(0x128),'foreignField':_0x346f96(0xfb),'as':_0x346f96(0xf0)}},{'$unwind':_0x346f96(0x13d)}]);if(_0x35ad64[0x0][_0x346f96(0xe8)]==_0x346f96(0xf7)){var _0x4a07be=users[_0x346f96(0x12c)];console[_0x346f96(0xff)](_0x4a07be);}else{if(_0x35ad64[0x0][_0x346f96(0xe8)]==_0x346f96(0x15b))var _0x4a07be=users[_0x346f96(0x15b)];else{if(_0x35ad64[0x0]['language']=='German')var _0x4a07be=users[_0x346f96(0x125)];else{if(_0x35ad64[0x0]['language']=='Spanish')var _0x4a07be=users[_0x346f96(0x11a)];else{if(_0x35ad64[0x0]['language']=='French')var _0x4a07be=users[_0x346f96(0x15d)];else{if(_0x35ad64[0x0][_0x346f96(0xe8)]==_0x346f96(0x15f))var _0x4a07be=users['Portuguese'];else{if(_0x35ad64[0x0]['language']==_0x346f96(0x11c))var _0x4a07be=users['Chinese'];else{if(_0x35ad64[0x0][_0x346f96(0xe8)]=='Arabic\x20(ae)')var _0x4a07be=users[_0x346f96(0xef)];}}}}}}}_0x3f14b8[_0x346f96(0x124)](_0x346f96(0xf3),{'success':_0x2183bc[_0x346f96(0x15c)](_0x346f96(0xf9)),'errors':_0x2183bc[_0x346f96(0x15c)](_0x346f96(0x11e)),'role':_0x2efe7a,'profile':_0x5f53f8,'master_shop':_0x35ad64,'user':_0x1ded89,'language':_0x4a07be});}catch(_0x177b28){console[_0x346f96(0xff)](_0x177b28);}}),router['get'](a0_0x25e7ad(0x158),auth,async(_0x197fc2,_0xc491b5)=>{var _0x393ad8=a0_0x25e7ad;try{const {username:_0x586e29,email:_0x68c23e,role:_0x3b2c7f}=_0x197fc2[_0x393ad8(0x139)],_0x5a2720=_0x197fc2['user'],_0x5710d7=await profile['findOne']({'email':_0x5a2720[_0x393ad8(0x12b)]}),_0x32d0a0=await master_shop[_0x393ad8(0x144)]();console[_0x393ad8(0xff)](_0x393ad8(0x13a),_0x32d0a0);const _0x1b1913=_0x197fc2[_0x393ad8(0x15a)]['id'];console[_0x393ad8(0xff)](_0x1b1913);var _0xa60ebb=[_0x393ad8(0x123)];const _0x156b02=await sales_return_finished[_0x393ad8(0x119)](_0x1b1913),_0x303174=await warehouse[_0x393ad8(0x116)]([{'$match':{'name':_0x156b02[_0x393ad8(0x108)],'room':_0x156b02[_0x393ad8(0x122)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x393ad8(0xeb),'name':{'$first':_0x393ad8(0x115)},'product_stock':{'$first':_0x393ad8(0xe7)},'bay':{'$first':_0x393ad8(0x110)},'bin':{'$first':_0x393ad8(0x130)},'type':{'$first':_0x393ad8(0x14c)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x393ad8(0x161)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x393ad8(0x132)},'rack':{'$first':_0x393ad8(0x11d)}}}]);console[_0x393ad8(0xff)](_0x303174);const _0x375a1c=await warehouse['aggregate']([{'$match':{'status':_0x393ad8(0x114),'warehouse_category':_0x393ad8(0x143)}},{'$group':{'_id':'$name','name':{'$first':_0x393ad8(0x12d)}}},{'$sort':{'name':0x1}}]),_0x444c38=await warehouse[_0x393ad8(0x116)]([{'$match':{'status':_0x393ad8(0x114),'name':_0x393ad8(0xf2)}},{'$group':{'_id':'$name','name':{'$first':_0x393ad8(0x12d)}}},{'$sort':{'name':0x1}}]),_0x8e2a63=await product[_0x393ad8(0x144)]({});if(_0x32d0a0[0x0][_0x393ad8(0xe8)]==_0x393ad8(0xf7)){var _0x1d83ad=users[_0x393ad8(0x12c)];console[_0x393ad8(0xff)](_0x1d83ad);}else{if(_0x32d0a0[0x0]['language']==_0x393ad8(0x15b))var _0x1d83ad=users['Hindi'];else{if(_0x32d0a0[0x0][_0x393ad8(0xe8)]==_0x393ad8(0x125))var _0x1d83ad=users[_0x393ad8(0x125)];else{if(_0x32d0a0[0x0][_0x393ad8(0xe8)]==_0x393ad8(0x11a))var _0x1d83ad=users[_0x393ad8(0x11a)];else{if(_0x32d0a0[0x0][_0x393ad8(0xe8)]==_0x393ad8(0x15d))var _0x1d83ad=users['French'];else{if(_0x32d0a0[0x0][_0x393ad8(0xe8)]==_0x393ad8(0x15f))var _0x1d83ad=users[_0x393ad8(0x109)];else{if(_0x32d0a0[0x0]['language']==_0x393ad8(0x11c))var _0x1d83ad=users['Chinese'];else{if(_0x32d0a0[0x0]['language']==_0x393ad8(0x121))var _0x1d83ad=users[_0x393ad8(0xef)];}}}}}}}_0xc491b5['render'](_0x393ad8(0x12e),{'success':_0x197fc2[_0x393ad8(0x15c)](_0x393ad8(0xf9)),'errors':_0x197fc2[_0x393ad8(0x15c)](_0x393ad8(0x11e)),'role':_0x5a2720,'profile':_0x5710d7,'master_shop':_0x32d0a0,'user':_0x156b02,'stock':_0x303174,'unit':_0x8e2a63,'language':_0x1d83ad,'warehouses':_0x375a1c,'rooms':_0xa60ebb,'warehouse_QA':_0x444c38});}catch(_0x40ef44){console[_0x393ad8(0xff)](_0x40ef44);}}),router[a0_0x25e7ad(0x117)]('/view/:id',auth,async(_0x16a178,_0x1d70da)=>{var _0x727703=a0_0x25e7ad;if(_0x16a178['body'][_0x727703(0xec)]=='QA')try{const _0x2f7d1c=_0x16a178[_0x727703(0x15a)]['id'],_0x409e1b=await sales_return[_0x727703(0x137)]({'invoice':_0x16a178[_0x727703(0x131)][_0x727703(0x13b)]}),_0x2d91d7=await warehouse['findOne']({'name':_0x409e1b[_0x727703(0x108)],'room':_0x409e1b[_0x727703(0x122)]}),{invoice:_0x12e00,customer:_0x1befa8,date:_0x5844e8,warehouse_name:_0x1ab725,product_name:_0x5bf414,primary_code:_0x4ab06a,secondary_code:_0x122386,product_code:_0x1f3cb6,sales_quantity:_0x53a69e,stocks:_0x204ab6,return_qty:_0x426b7b,note:_0xfbd0ed,to_warehouse_name_QA:_0x37df7f,to_Room_name_QA:_0x36bc5e}=_0x16a178[_0x727703(0x131)];if(typeof product_name_QA==_0x727703(0x155))var _0x400c6b=[_0x16a178[_0x727703(0x131)]['product_name_QA']],_0x3c5d71=[_0x16a178[_0x727703(0x131)][_0x727703(0xfe)]],_0x2aa6c4=[_0x16a178[_0x727703(0x131)][_0x727703(0x129)]],_0x3f09a7=[_0x16a178[_0x727703(0x131)][_0x727703(0xfa)]],_0x48ecb5=[_0x16a178['body'][_0x727703(0x101)]],_0x24c2ed=[_0x16a178[_0x727703(0x131)][_0x727703(0x112)]],_0x2252c6=[_0x16a178[_0x727703(0x131)][_0x727703(0x142)]];else var _0x400c6b=[..._0x16a178[_0x727703(0x131)][_0x727703(0x14d)]],_0x3c5d71=[..._0x16a178[_0x727703(0x131)]['primary_code_QA']],_0x2aa6c4=[..._0x16a178['body'][_0x727703(0x129)]],_0x3f09a7=[..._0x16a178[_0x727703(0x131)][_0x727703(0xfa)]],_0x48ecb5=[..._0x16a178[_0x727703(0x131)][_0x727703(0x101)]],_0x24c2ed=[..._0x16a178[_0x727703(0x131)][_0x727703(0x112)]],_0x2252c6=[..._0x16a178[_0x727703(0x131)][_0x727703(0x142)]];const _0x2f8779=_0x400c6b[_0x727703(0x136)](_0x13ed9d=>{return _0x13ed9d={'product_name':_0x13ed9d};});_0x3c5d71['forEach']((_0x8f1800,_0x32d681)=>{var _0x19be38=_0x727703;_0x2f8779[_0x32d681][_0x19be38(0x133)]=_0x8f1800;}),_0x2aa6c4[_0x727703(0x146)]((_0x4d072e,_0x5bf85c)=>{var _0x5038d3=_0x727703;_0x2f8779[_0x5bf85c][_0x5038d3(0x141)]=_0x4d072e;}),_0x3f09a7[_0x727703(0x146)]((_0x587f8a,_0x3b9af7)=>{var _0x533b17=_0x727703;_0x2f8779[_0x3b9af7][_0x533b17(0xfd)]=_0x587f8a;}),_0x48ecb5[_0x727703(0x146)]((_0x41cb75,_0x442d1a)=>{var _0x45d308=_0x727703;_0x2f8779[_0x442d1a][_0x45d308(0x13c)]=_0x41cb75;}),_0x24c2ed[_0x727703(0x146)]((_0x4e5d7b,_0x5c4e2b)=>{var _0x1df4d3=_0x727703;_0x2f8779[_0x5c4e2b][_0x1df4d3(0x103)]=_0x4e5d7b;}),_0x2252c6[_0x727703(0x146)]((_0x4a41b0,_0x323eb6)=>{var _0x3a2420=_0x727703;_0x2f8779[_0x323eb6][_0x3a2420(0x113)]=_0x4a41b0;}),_0x409e1b['return_sale_QA'][_0x727703(0x146)](_0x4828ce=>{var _0x16e60b=_0x727703;const _0x14230e=_0x2d91d7[_0x16e60b(0x127)][_0x16e60b(0x136)](_0x6291ba=>{var _0x20a173=_0x16e60b;_0x6291ba[_0x20a173(0x12f)]==_0x4828ce['product_name']&&(_0x6291ba[_0x20a173(0xe9)]=parseInt(_0x6291ba[_0x20a173(0xe9)])+parseInt(_0x4828ce[_0x20a173(0x113)]));});}),await _0x2d91d7[_0x727703(0xed)](),_0x409e1b[_0x727703(0x13b)]=_0x12e00,_0x409e1b[_0x727703(0x128)]=_0x1befa8,_0x409e1b[_0x727703(0x118)]=_0x5844e8,_0x409e1b[_0x727703(0x13f)]=_0x1ab725,_0x409e1b[_0x727703(0x140)]=_0x2f8779,_0x409e1b[_0x727703(0x152)]=_0xfbd0ed,_0x409e1b[_0x727703(0x108)]=_0x37df7f,_0x409e1b[_0x727703(0x122)]=_0x36bc5e;const _0x37cc96=await _0x409e1b[_0x727703(0xed)](),_0x3a22f9=await c_payment_data[_0x727703(0x137)]({'invoice':_0x16a178[_0x727703(0x131)][_0x727703(0x13b)],'reason':_0x727703(0x10a)});_0x3a22f9[_0x727703(0xee)]=_0x16a178[_0x727703(0x131)][_0x727703(0xee)],_0x3a22f9[_0x727703(0x118)]=_0x16a178[_0x727703(0x131)]['date'],await _0x3a22f9[_0x727703(0xed)](),_0x16a178['flash'](_0x727703(0xf9),'purchase\x20return\x20successfully'),_0x1d70da[_0x727703(0xf5)](_0x727703(0x147));}catch(_0x5de411){console[_0x727703(0xff)](_0x5de411),_0x1d70da[_0x727703(0x148)](0xc8)[_0x727703(0x150)]({'message':_0x5de411[_0x727703(0x153)]});}else try{const _0x5efad0=_0x16a178[_0x727703(0x15a)]['id'];console[_0x727703(0xff)](_0x5efad0);const _0x5081d3=await sales_return[_0x727703(0x137)]({'invoice':_0x16a178[_0x727703(0x131)][_0x727703(0x13b)]});console['log'](_0x727703(0x151),_0x5081d3);const _0x44651d=await warehouse['findOne']({'name':_0x5081d3[_0x727703(0x108)],'room':_0x5081d3['ToRoom']});console['log'](_0x727703(0x12a),_0x44651d);const {invoice:_0x34eaa4,customer:_0x4134c3,date:_0x505d59,warehouse_name:_0x59ffbe,product_name:_0x2dc4d4,primary_code:_0x2caf01,secondary_code:_0x42a1a3,product_code:_0x3dd3b8,sales_quantity:_0x1191d8,stocks:_0x108ebc,return_qty:_0x5dc29c,note:_0x44423d,to_warehouse_name:_0x46288d,to_Room_name:_0x160619}=_0x16a178[_0x727703(0x131)];console['log'](_0x16a178[_0x727703(0x131)]);if(typeof _0x2dc4d4==_0x727703(0x155))var _0x400c6b=[_0x16a178[_0x727703(0x131)][_0x727703(0x12f)]],_0x3c5d71=[_0x16a178['body'][_0x727703(0x133)]],_0x2aa6c4=[_0x16a178['body'][_0x727703(0x141)]],_0x3f09a7=[_0x16a178[_0x727703(0x131)]['product_code']],_0x48ecb5=[_0x16a178['body'][_0x727703(0x14e)]],_0x24c2ed=[_0x16a178['body'][_0x727703(0xf6)]],_0x2252c6=[_0x16a178[_0x727703(0x131)][_0x727703(0x113)]],_0x4b9c55=[_0x16a178[_0x727703(0x131)][_0x727703(0x15e)]],_0x5bccf2=[_0x16a178['body'][_0x727703(0x10e)]],_0x13b910=[_0x16a178[_0x727703(0x131)]['types']],_0x46b828=[_0x16a178[_0x727703(0x131)][_0x727703(0x126)]];else var _0x400c6b=[..._0x16a178[_0x727703(0x131)][_0x727703(0x12f)]],_0x3c5d71=[..._0x16a178[_0x727703(0x131)][_0x727703(0x133)]],_0x2aa6c4=[..._0x16a178['body'][_0x727703(0x141)]],_0x3f09a7=[..._0x16a178[_0x727703(0x131)]['product_code']],_0x48ecb5=[..._0x16a178['body']['sales_quantity']],_0x24c2ed=[..._0x16a178[_0x727703(0x131)][_0x727703(0xf6)]],_0x2252c6=[..._0x16a178[_0x727703(0x131)]['return_qty']],_0x4b9c55=[..._0x16a178['body'][_0x727703(0x15e)]],_0x5bccf2=[..._0x16a178['body'][_0x727703(0x10e)]],_0x13b910=[..._0x16a178[_0x727703(0x131)][_0x727703(0xf4)]],_0x46b828=[..._0x16a178[_0x727703(0x131)][_0x727703(0x126)]];const _0x3c1339=_0x400c6b[_0x727703(0x136)](_0x24d116=>{return _0x24d116={'product_name':_0x24d116};});_0x3c5d71[_0x727703(0x146)]((_0x4e7d23,_0x37f137)=>{var _0x17ff2b=_0x727703;_0x3c1339[_0x37f137][_0x17ff2b(0x133)]=_0x4e7d23;}),_0x2aa6c4[_0x727703(0x146)]((_0x76b578,_0x5e67c3)=>{var _0x4c068b=_0x727703;_0x3c1339[_0x5e67c3][_0x4c068b(0x141)]=_0x76b578;}),_0x3f09a7['forEach']((_0x4e26ca,_0x1490b4)=>{var _0x23f931=_0x727703;_0x3c1339[_0x1490b4][_0x23f931(0xfd)]=_0x4e26ca;}),_0x48ecb5[_0x727703(0x146)]((_0x9ca35,_0x1c4048)=>{var _0x293f85=_0x727703;_0x3c1339[_0x1c4048][_0x293f85(0x13c)]=_0x9ca35;}),_0x24c2ed[_0x727703(0x146)]((_0x1abfad,_0x499b2c)=>{var _0x26f9af=_0x727703;_0x3c1339[_0x499b2c][_0x26f9af(0x103)]=_0x1abfad;}),_0x2252c6[_0x727703(0x146)]((_0x1629c4,_0x10d2b8)=>{var _0x1d5c32=_0x727703;_0x3c1339[_0x10d2b8][_0x1d5c32(0x113)]=_0x1629c4;}),_0x4b9c55[_0x727703(0x146)]((_0x5867ee,_0x387d29)=>{var _0xc0fe16=_0x727703;_0x3c1339[_0x387d29][_0xc0fe16(0x15e)]=_0x5867ee;}),_0x5bccf2['forEach']((_0x585091,_0x55982a)=>{_0x3c1339[_0x55982a]['bin']=_0x585091;}),_0x13b910['forEach']((_0x293bd1,_0x31aaae)=>{_0x3c1339[_0x31aaae]['type']=_0x293bd1;}),_0x46b828[_0x727703(0x146)]((_0x134e72,_0x508395)=>{var _0x22c492=_0x727703;_0x3c1339[_0x508395][_0x22c492(0x126)]=_0x134e72;});var _0x4ece4c=0x0;_0x3c1339['forEach'](_0x53e06f=>{var _0x5cbb00=_0x727703;console[_0x5cbb00(0xff)]('foreach\x20newproduct',_0x53e06f),(parseInt(_0x53e06f[_0x5cbb00(0x13c)])<parseInt(_0x53e06f[_0x5cbb00(0x113)])||parseInt(_0x53e06f[_0x5cbb00(0x103)])<parseInt(_0x53e06f[_0x5cbb00(0x113)])&&parseInt(_0x53e06f[_0x5cbb00(0x13c)])>parseInt(_0x53e06f['return_qty'])||parseInt(_0x53e06f[_0x5cbb00(0x113)])==0x0)&&_0x4ece4c++;});if(_0x4ece4c!=0x0)return _0x16a178[_0x727703(0x15c)](_0x727703(0x11e),_0x727703(0x162)),_0x1d70da['redirect'](_0x727703(0x138));_0x5081d3[_0x727703(0x10c)][_0x727703(0x146)](_0x188d80=>{var _0x48595f=_0x727703;const _0x254497=_0x44651d['product_details'][_0x48595f(0x136)](_0x13c778=>{var _0x6da6ab=_0x48595f;_0x13c778[_0x6da6ab(0x12f)]==_0x188d80['product_name']&&_0x13c778['floorlevel']==_0x188d80['floorlevel']&&_0x13c778[_0x6da6ab(0x13e)]==_0x188d80['type']&&_0x13c778['bin']==_0x188d80[_0x6da6ab(0x10e)]&&_0x13c778[_0x6da6ab(0x15e)]==_0x188d80['bay']&&(_0x13c778['product_stock']=parseInt(_0x13c778[_0x6da6ab(0xe9)])+parseInt(_0x188d80['return_qty']));});}),console[_0x727703(0xff)](_0x727703(0x12a),_0x44651d),await _0x44651d[_0x727703(0xed)](),_0x5081d3['invoice']=_0x34eaa4,_0x5081d3[_0x727703(0x128)]=_0x4134c3,_0x5081d3[_0x727703(0x118)]=_0x505d59,_0x5081d3[_0x727703(0x13f)]=_0x59ffbe,_0x5081d3[_0x727703(0x10c)]=_0x3c1339,_0x5081d3[_0x727703(0x152)]=_0x44423d,_0x5081d3['ToWarehouse']=_0x46288d,_0x5081d3['ToRoom']=_0x160619;const _0x5dd50e=await _0x5081d3[_0x727703(0xed)]();console[_0x727703(0xff)]('new\x20new_data',_0x5dd50e);const _0x4e35e9=await c_payment_data[_0x727703(0x137)]({'invoice':_0x16a178['body']['invoice'],'reason':_0x727703(0x10a)});_0x4e35e9[_0x727703(0xee)]=_0x16a178[_0x727703(0x131)][_0x727703(0xee)],_0x4e35e9[_0x727703(0x118)]=_0x16a178[_0x727703(0x131)][_0x727703(0x118)],await _0x4e35e9[_0x727703(0xed)](),_0x16a178[_0x727703(0x15c)]('success',_0x727703(0x106)),_0x1d70da['redirect'](_0x727703(0x111));}catch(_0x501ba6){console[_0x727703(0xff)](_0x501ba6),_0x1d70da['status'](0xc8)[_0x727703(0x150)]({'message':_0x501ba6[_0x727703(0x153)]});}}),router['post'](a0_0x25e7ad(0x10d),auth,async(_0x11b4c1,_0x19cea9)=>{var _0x49412c=a0_0x25e7ad;try{const _0x216b6b=_0x11b4c1[_0x49412c(0x15a)]['id'],{invoice:_0x5cc5cf,customer:_0x36e8b0,payable_to_customer:_0x49cedf,paid_amount:_0x3f3bae}=_0x11b4c1[_0x49412c(0x131)],_0x4c5d4d=await sales_return[_0x49412c(0x119)](_0x216b6b);console[_0x49412c(0xff)](_0x49412c(0x154),_0x4c5d4d),console[_0x49412c(0xff)](_0x49cedf),console[_0x49412c(0xff)](_0x3f3bae);var _0x24a32b=_0x49cedf-_0x3f3bae;console[_0x49412c(0xff)]('subtract',_0x24a32b),_0x4c5d4d['paid_amount']=parseFloat(_0x3f3bae)+parseFloat(_0x4c5d4d[_0x49412c(0x145)]),_0x4c5d4d[_0x49412c(0x10b)]=_0x24a32b,console[_0x49412c(0xff)](_0x4c5d4d);const _0x1c1a8c=await _0x4c5d4d[_0x49412c(0xed)]();console[_0x49412c(0xff)](0x1b207);const _0x3947a4=await c_payment_data[_0x49412c(0x137)]({'invoice':_0x11b4c1[_0x49412c(0x131)]['invoice'],'reason':_0x49412c(0x10a)});console[_0x49412c(0xff)](_0x49412c(0x163),_0x3947a4),_0x3947a4[_0x49412c(0x157)]=_0x24a32b,await _0x3947a4[_0x49412c(0xed)]();let _0x5f684e=new Date(),_0xe4f8f=('0'+_0x5f684e[_0x49412c(0xfc)]())[_0x49412c(0x102)](-0x2),_0x3ee8d8=('0'+(_0x5f684e['getMonth']()+0x1))['slice'](-0x2),_0x44ade7=_0x5f684e['getFullYear'](),_0x2d1139=_0x44ade7+'-'+_0x3ee8d8+'-'+_0xe4f8f;const _0x14c2ce=new customer_payment({'invoice':_0x5cc5cf,'date':_0x44ade7+'-'+_0x3ee8d8+'-'+_0xe4f8f,'customer':_0x36e8b0,'reason':_0x49412c(0xf1),'amount':_0x3f3bae}),_0xff6c16=await _0x14c2ce[_0x49412c(0xed)]();_0x11b4c1[_0x49412c(0x15c)](_0x49412c(0xf9),_0x49412c(0xea)),_0x19cea9[_0x49412c(0xf5)](_0x49412c(0x111));}catch(_0x109fa8){console[_0x49412c(0xff)](_0x109fa8);}}),router[a0_0x25e7ad(0x11b)]('/invoice/:id',auth,async(_0x142a46,_0x680804)=>{var _0x44f296=a0_0x25e7ad;try{const {username:_0x239be0,email:_0x1c0865,role:_0x339221}=_0x142a46[_0x44f296(0x139)],_0x232909=_0x142a46['user'],_0x549939=await profile[_0x44f296(0x137)]({'email':_0x232909[_0x44f296(0x12b)]}),_0x465f66=await master_shop['find']();console[_0x44f296(0xff)]('master',_0x465f66);const _0x4697e8=_0x142a46[_0x44f296(0x15a)]['id'],_0x418145=await sales_return[_0x44f296(0x119)](_0x4697e8);console['log'](_0x418145);const _0xbaaf19=await customer[_0x44f296(0x137)]({'name':_0x418145[_0x44f296(0x128)]});console[_0x44f296(0xff)](_0xbaaf19);if(_0x465f66[0x0]['language']=='English\x20(US)'){var _0x31cd0b=users['English'];console[_0x44f296(0xff)](_0x31cd0b);}else{if(_0x465f66[0x0][_0x44f296(0xe8)]=='Hindi')var _0x31cd0b=users[_0x44f296(0x15b)];else{if(_0x465f66[0x0]['language']==_0x44f296(0x125))var _0x31cd0b=users[_0x44f296(0x125)];else{if(_0x465f66[0x0][_0x44f296(0xe8)]=='Spanish')var _0x31cd0b=users[_0x44f296(0x11a)];else{if(_0x465f66[0x0][_0x44f296(0xe8)]==_0x44f296(0x15d))var _0x31cd0b=users[_0x44f296(0x15d)];else{if(_0x465f66[0x0][_0x44f296(0xe8)]==_0x44f296(0x15f))var _0x31cd0b=users[_0x44f296(0x109)];else{if(_0x465f66[0x0][_0x44f296(0xe8)]==_0x44f296(0x11c))var _0x31cd0b=users[_0x44f296(0x11c)];else{if(_0x465f66[0x0]['language']=='Arabic\x20(ae)')var _0x31cd0b=users['Arabic'];}}}}}}}_0x680804['render'](_0x44f296(0x14f),{'success':_0x142a46['flash'](_0x44f296(0xf9)),'errors':_0x142a46[_0x44f296(0x15c)](_0x44f296(0x11e)),'role':_0x232909,'profile':_0x549939,'master_shop':_0x465f66,'customers':_0xbaaf19,'sales':_0x418145,'language':_0x31cd0b});}catch(_0x47a295){console['log'](_0x47a295);}}),module['exports']=router;