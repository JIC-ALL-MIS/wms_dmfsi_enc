var a0_0x14b2b4=a0_0x277a;(function(_0x29b4dc,_0x630dab){var _0x334ada=a0_0x277a,_0x42204a=_0x29b4dc();while(!![]){try{var _0x3a2135=parseInt(_0x334ada(0x10c))/0x1+-parseInt(_0x334ada(0x118))/0x2+parseInt(_0x334ada(0x102))/0x3+parseInt(_0x334ada(0x10e))/0x4*(-parseInt(_0x334ada(0x128))/0x5)+-parseInt(_0x334ada(0x138))/0x6*(parseInt(_0x334ada(0x106))/0x7)+-parseInt(_0x334ada(0x13d))/0x8+parseInt(_0x334ada(0x103))/0x9;if(_0x3a2135===_0x630dab)break;else _0x42204a['push'](_0x42204a['shift']());}catch(_0x2cd1db){_0x42204a['push'](_0x42204a['shift']());}}}(a0_0x5b23,0xd1b8e));function a0_0x277a(_0x5602be,_0x4ff9ac){var _0x5b23c3=a0_0x5b23();return a0_0x277a=function(_0x277a3b,_0x4d133f){_0x277a3b=_0x277a3b-0xf4;var _0x909523=_0x5b23c3[_0x277a3b];return _0x909523;},a0_0x277a(_0x5602be,_0x4ff9ac);}const express=require(a0_0x14b2b4(0x134)),app=express(),router=express[a0_0x14b2b4(0x139)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x14b2b4(0x15c)),users=require('../public/language/languages.json');router[a0_0x14b2b4(0x10d)]('/view',auth,async(_0x2131b7,_0x10e52f)=>{var _0xb07c97=a0_0x14b2b4;try{const {username:_0x5c99a6,email:_0xbeef9a,role:_0x416c88}=_0x2131b7[_0xb07c97(0x11f)],_0xdd917a=_0x2131b7[_0xb07c97(0x11f)],_0x10a719=await profile[_0xb07c97(0x151)]({'email':_0xdd917a[_0xb07c97(0x16c)]}),_0x184bd0=await master_shop[_0xb07c97(0x135)](),_0x543011=await sales_return_finished[_0xb07c97(0x159)]([{'$lookup':{'from':_0xb07c97(0x11e),'localField':_0xb07c97(0xf4),'foreignField':_0xb07c97(0x12b),'as':_0xb07c97(0x11c)}},{'$unwind':_0xb07c97(0x10f)}]);if(_0x184bd0[0x0]['language']==_0xb07c97(0x126)){var _0x15bc48=users[_0xb07c97(0x127)];console[_0xb07c97(0x12e)](_0x15bc48);}else{if(_0x184bd0[0x0][_0xb07c97(0x122)]=='Hindi')var _0x15bc48=users[_0xb07c97(0x157)];else{if(_0x184bd0[0x0]['language']==_0xb07c97(0x16b))var _0x15bc48=users[_0xb07c97(0x16b)];else{if(_0x184bd0[0x0][_0xb07c97(0x122)]==_0xb07c97(0x140))var _0x15bc48=users[_0xb07c97(0x140)];else{if(_0x184bd0[0x0]['language']=='French')var _0x15bc48=users[_0xb07c97(0x11b)];else{if(_0x184bd0[0x0][_0xb07c97(0x122)]==_0xb07c97(0x13e))var _0x15bc48=users[_0xb07c97(0xf9)];else{if(_0x184bd0[0x0][_0xb07c97(0x122)]=='Chinese')var _0x15bc48=users[_0xb07c97(0x15a)];else{if(_0x184bd0[0x0][_0xb07c97(0x122)]=='Arabic\x20(ae)')var _0x15bc48=users[_0xb07c97(0x15e)];}}}}}}}_0x10e52f[_0xb07c97(0xfd)](_0xb07c97(0x149),{'success':_0x2131b7[_0xb07c97(0x10a)](_0xb07c97(0x10b)),'errors':_0x2131b7[_0xb07c97(0x10a)](_0xb07c97(0x132)),'role':_0xdd917a,'profile':_0x10a719,'master_shop':_0x184bd0,'user':_0x543011,'language':_0x15bc48});}catch(_0x68c90e){console[_0xb07c97(0x12e)](_0x68c90e);}}),router['get']('/view/:id',auth,async(_0x409da3,_0x182b5e)=>{var _0x318762=a0_0x14b2b4;try{const {username:_0x12db6c,email:_0x276d56,role:_0x1d5afc}=_0x409da3[_0x318762(0x11f)],_0x3ef57c=_0x409da3[_0x318762(0x11f)],_0x4b48c0=await profile[_0x318762(0x151)]({'email':_0x3ef57c[_0x318762(0x16c)]}),_0x1a782d=await master_shop[_0x318762(0x135)]();console[_0x318762(0x12e)](_0x318762(0x167),_0x1a782d);const _0x5c2a29=_0x409da3['params']['id'];console[_0x318762(0x12e)](_0x5c2a29);var _0x17c232=[_0x318762(0x14b)];const _0xc9122e=await sales_return_finished['findById'](_0x5c2a29),_0x4a6379=await warehouse[_0x318762(0x159)]([{'$match':{'name':_0xc9122e[_0x318762(0x169)],'room':_0xc9122e[_0x318762(0x136)]}},{'$unwind':_0x318762(0x125)},{'$group':{'_id':_0x318762(0x14a),'name':{'$first':_0x318762(0x165)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x318762(0xfc)},'bin':{'$first':_0x318762(0x123)},'type':{'$first':_0x318762(0x141)},'floorlevel':{'$first':_0x318762(0xfb)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x318762(0x15b)},'product_code':{'$first':_0x318762(0x14f)},'storage':{'$first':_0x318762(0x12a)},'rack':{'$first':_0x318762(0x14d)}}}]);console['log'](_0x4a6379);const _0x39480a=await warehouse[_0x318762(0x159)]([{'$match':{'status':'Enabled','warehouse_category':_0x318762(0x13b)}},{'$group':{'_id':_0x318762(0x156),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x598940=await warehouse[_0x318762(0x159)]([{'$match':{'status':_0x318762(0x13f),'name':'QA\x20Warehouse'}},{'$group':{'_id':'$name','name':{'$first':_0x318762(0x156)}}},{'$sort':{'name':0x1}}]),_0x3e36bb=await product[_0x318762(0x135)]({});if(_0x1a782d[0x0]['language']==_0x318762(0x126)){var _0x3e1784=users[_0x318762(0x127)];console[_0x318762(0x12e)](_0x3e1784);}else{if(_0x1a782d[0x0][_0x318762(0x122)]==_0x318762(0x157))var _0x3e1784=users[_0x318762(0x157)];else{if(_0x1a782d[0x0][_0x318762(0x122)]==_0x318762(0x16b))var _0x3e1784=users[_0x318762(0x16b)];else{if(_0x1a782d[0x0]['language']==_0x318762(0x140))var _0x3e1784=users[_0x318762(0x140)];else{if(_0x1a782d[0x0][_0x318762(0x122)]==_0x318762(0x11b))var _0x3e1784=users[_0x318762(0x11b)];else{if(_0x1a782d[0x0]['language']==_0x318762(0x13e))var _0x3e1784=users[_0x318762(0xf9)];else{if(_0x1a782d[0x0][_0x318762(0x122)]==_0x318762(0x15a))var _0x3e1784=users[_0x318762(0x15a)];else{if(_0x1a782d[0x0][_0x318762(0x122)]=='Arabic\x20(ae)')var _0x3e1784=users['Arabic'];}}}}}}}_0x182b5e[_0x318762(0xfd)]('return_sale_edit_finished',{'success':_0x409da3['flash'](_0x318762(0x10b)),'errors':_0x409da3[_0x318762(0x10a)](_0x318762(0x132)),'role':_0x3ef57c,'profile':_0x4b48c0,'master_shop':_0x1a782d,'user':_0xc9122e,'stock':_0x4a6379,'unit':_0x3e36bb,'language':_0x3e1784,'warehouses':_0x39480a,'rooms':_0x17c232,'warehouse_QA':_0x598940});}catch(_0x33025b){console[_0x318762(0x12e)](_0x33025b);}}),router[a0_0x14b2b4(0x12d)](a0_0x14b2b4(0x162),auth,async(_0x2e3392,_0x15da52)=>{var _0x62567b=a0_0x14b2b4;if(_0x2e3392[_0x62567b(0x105)]['for_categorize']=='QA')try{const _0x5b9ee0=_0x2e3392[_0x62567b(0x144)]['id'],_0xd4e769=await sales_return[_0x62567b(0x151)]({'invoice':_0x2e3392[_0x62567b(0x105)][_0x62567b(0x110)]}),_0x1525f7=await warehouse[_0x62567b(0x151)]({'name':_0xd4e769[_0x62567b(0x169)],'room':_0xd4e769[_0x62567b(0x136)]}),{invoice:_0x3aaaf0,customer:_0x57f36f,date:_0x25ff0e,warehouse_name:_0x4dd429,product_name:_0x58f224,primary_code:_0x31255c,secondary_code:_0x6dce32,product_code:_0x44371f,sales_quantity:_0x4b34a6,stocks:_0x4054fa,return_qty:_0x3c3b78,note:_0xbf5096,to_warehouse_name_QA:_0x479a87,to_Room_name_QA:_0x53731a}=_0x2e3392[_0x62567b(0x105)];if(typeof product_name_QA==_0x62567b(0x104))var _0x7a5227=[_0x2e3392['body'][_0x62567b(0x100)]],_0x356523=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x11d)]],_0x7f037=[_0x2e3392['body'][_0x62567b(0x166)]],_0xb38b1b=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x168)]],_0x8ffd71=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x121)]],_0x47cdad=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x131)]],_0x28c6a9=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x120)]];else var _0x7a5227=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x100)]],_0x356523=[..._0x2e3392['body'][_0x62567b(0x11d)]],_0x7f037=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x166)]],_0xb38b1b=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x168)]],_0x8ffd71=[..._0x2e3392[_0x62567b(0x105)]['sales_quantity_QA']],_0x47cdad=[..._0x2e3392['body'][_0x62567b(0x131)]],_0x28c6a9=[..._0x2e3392['body'][_0x62567b(0x120)]];const _0x21198c=_0x7a5227[_0x62567b(0x112)](_0x58ec5c=>{return _0x58ec5c={'product_name':_0x58ec5c};});_0x356523[_0x62567b(0x145)]((_0x1140a8,_0x36c241)=>{var _0x2f209b=_0x62567b;_0x21198c[_0x36c241][_0x2f209b(0xf8)]=_0x1140a8;}),_0x7f037[_0x62567b(0x145)]((_0xbbc0d4,_0x5bedea)=>{var _0x3c78f4=_0x62567b;_0x21198c[_0x5bedea][_0x3c78f4(0x116)]=_0xbbc0d4;}),_0xb38b1b[_0x62567b(0x145)]((_0x4cd799,_0x139cbe)=>{var _0x1edeed=_0x62567b;_0x21198c[_0x139cbe][_0x1edeed(0x16a)]=_0x4cd799;}),_0x8ffd71['forEach']((_0x9cc581,_0x21b187)=>{var _0x3a134d=_0x62567b;_0x21198c[_0x21b187][_0x3a134d(0x15d)]=_0x9cc581;}),_0x47cdad[_0x62567b(0x145)]((_0x32af0a,_0x22f6d5)=>{var _0x4f6998=_0x62567b;_0x21198c[_0x22f6d5][_0x4f6998(0x101)]=_0x32af0a;}),_0x28c6a9[_0x62567b(0x145)]((_0x50f7ed,_0x39925e)=>{var _0x1a9439=_0x62567b;_0x21198c[_0x39925e][_0x1a9439(0xff)]=_0x50f7ed;}),_0xd4e769[_0x62567b(0x146)][_0x62567b(0x145)](_0x5aef75=>{var _0x420b3d=_0x62567b;const _0x296dc3=_0x1525f7['product_details'][_0x420b3d(0x112)](_0x2fab7e=>{var _0x2acb8d=_0x420b3d;_0x2fab7e['product_name']==_0x5aef75[_0x2acb8d(0x114)]&&(_0x2fab7e[_0x2acb8d(0x142)]=parseInt(_0x2fab7e[_0x2acb8d(0x142)])+parseInt(_0x5aef75[_0x2acb8d(0xff)]));});}),await _0x1525f7['save'](),_0xd4e769[_0x62567b(0x110)]=_0x3aaaf0,_0xd4e769['customer']=_0x57f36f,_0xd4e769['date']=_0x25ff0e,_0xd4e769[_0x62567b(0x13c)]=_0x4dd429,_0xd4e769[_0x62567b(0x146)]=_0x21198c,_0xd4e769[_0x62567b(0xf6)]=_0xbf5096,_0xd4e769['ToWarehouse']=_0x479a87,_0xd4e769[_0x62567b(0x136)]=_0x53731a;const _0x1d289e=await _0xd4e769['save'](),_0x2bfdda=await c_payment_data[_0x62567b(0x151)]({'invoice':_0x2e3392[_0x62567b(0x105)][_0x62567b(0x110)],'reason':_0x62567b(0x148)});_0x2bfdda[_0x62567b(0x160)]=_0x2e3392['body'][_0x62567b(0x160)],_0x2bfdda[_0x62567b(0x147)]=_0x2e3392[_0x62567b(0x105)][_0x62567b(0x147)],await _0x2bfdda[_0x62567b(0xfa)](),_0x2e3392[_0x62567b(0x10a)](_0x62567b(0x10b),'purchase\x20return\x20successfully'),_0x15da52[_0x62567b(0x133)]('/sales_return_finished/view');}catch(_0x2842d1){console[_0x62567b(0x12e)](_0x2842d1),_0x15da52['status'](0xc8)['json']({'message':_0x2842d1[_0x62567b(0x124)]});}else try{const _0x37c3db=_0x2e3392[_0x62567b(0x144)]['id'];console[_0x62567b(0x12e)](_0x37c3db);const _0xf4f1bd=await sales_return[_0x62567b(0x151)]({'invoice':_0x2e3392['body']['invoice']});console[_0x62567b(0x12e)](_0x62567b(0x115),_0xf4f1bd);const _0x17238f=await warehouse['findOne']({'name':_0xf4f1bd[_0x62567b(0x169)],'room':_0xf4f1bd[_0x62567b(0x136)]});console[_0x62567b(0x12e)](_0x62567b(0x14c),_0x17238f);const {invoice:_0x324885,customer:_0x2d09a8,date:_0x360934,warehouse_name:_0x5caa00,product_name:_0x4fff4a,primary_code:_0x3e99b7,secondary_code:_0x2f9c9f,product_code:_0x758349,sales_quantity:_0x2d7dc4,stocks:_0x2838cc,return_qty:_0x3bd14c,note:_0x255296,to_warehouse_name:_0x196754,to_Room_name:_0x3d1028}=_0x2e3392['body'];console[_0x62567b(0x12e)](_0x2e3392['body']);if(typeof _0x4fff4a==_0x62567b(0x104))var _0x7a5227=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x114)]],_0x356523=[_0x2e3392[_0x62567b(0x105)]['primary_code']],_0x7f037=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x116)]],_0xb38b1b=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x16a)]],_0x8ffd71=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x117)]],_0x47cdad=[_0x2e3392[_0x62567b(0x105)]['stocks']],_0x28c6a9=[_0x2e3392['body']['return_qty']],_0x20f135=[_0x2e3392[_0x62567b(0x105)]['bay']],_0x5d1799=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x153)]],_0x5729e0=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x108)]],_0x58b728=[_0x2e3392[_0x62567b(0x105)][_0x62567b(0x154)]];else var _0x7a5227=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x114)]],_0x356523=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0xf8)]],_0x7f037=[..._0x2e3392[_0x62567b(0x105)]['secondary_code']],_0xb38b1b=[..._0x2e3392[_0x62567b(0x105)]['product_code']],_0x8ffd71=[..._0x2e3392[_0x62567b(0x105)]['sales_quantity']],_0x47cdad=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x109)]],_0x28c6a9=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0xff)]],_0x20f135=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x137)]],_0x5d1799=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x153)]],_0x5729e0=[..._0x2e3392[_0x62567b(0x105)][_0x62567b(0x108)]],_0x58b728=[..._0x2e3392['body'][_0x62567b(0x154)]];const _0x5ba620=_0x7a5227['map'](_0x1d9c7f=>{return _0x1d9c7f={'product_name':_0x1d9c7f};});_0x356523['forEach']((_0x1d8d90,_0x1d6369)=>{var _0xc65d3e=_0x62567b;_0x5ba620[_0x1d6369][_0xc65d3e(0xf8)]=_0x1d8d90;}),_0x7f037['forEach']((_0x184d71,_0xc7e913)=>{var _0x340388=_0x62567b;_0x5ba620[_0xc7e913][_0x340388(0x116)]=_0x184d71;}),_0xb38b1b['forEach']((_0x221427,_0x2b7ce2)=>{var _0x5c7093=_0x62567b;_0x5ba620[_0x2b7ce2][_0x5c7093(0x16a)]=_0x221427;}),_0x8ffd71[_0x62567b(0x145)]((_0x22213b,_0x1e9367)=>{_0x5ba620[_0x1e9367]['sale_qty']=_0x22213b;}),_0x47cdad[_0x62567b(0x145)]((_0x5f708a,_0x4496c9)=>{var _0x401fe7=_0x62567b;_0x5ba620[_0x4496c9][_0x401fe7(0x101)]=_0x5f708a;}),_0x28c6a9[_0x62567b(0x145)]((_0x9dd21f,_0x442aaf)=>{var _0x3ce716=_0x62567b;_0x5ba620[_0x442aaf][_0x3ce716(0xff)]=_0x9dd21f;}),_0x20f135[_0x62567b(0x145)]((_0x3c6e4e,_0x204c1a)=>{var _0x5e7292=_0x62567b;_0x5ba620[_0x204c1a][_0x5e7292(0x137)]=_0x3c6e4e;}),_0x5d1799['forEach']((_0x3acea2,_0x147dad)=>{var _0x2cd5c8=_0x62567b;_0x5ba620[_0x147dad][_0x2cd5c8(0x153)]=_0x3acea2;}),_0x5729e0['forEach']((_0x535b56,_0xf3950e)=>{var _0xaffd54=_0x62567b;_0x5ba620[_0xf3950e][_0xaffd54(0x15f)]=_0x535b56;}),_0x58b728[_0x62567b(0x145)]((_0x1e95b9,_0x3bcf3c)=>{_0x5ba620[_0x3bcf3c]['floorlevel']=_0x1e95b9;});var _0xffd068=0x0;_0x5ba620[_0x62567b(0x145)](_0x14d3bc=>{var _0x366577=_0x62567b;console[_0x366577(0x12e)](_0x366577(0x164),_0x14d3bc),(parseInt(_0x14d3bc[_0x366577(0x15d)])<parseInt(_0x14d3bc[_0x366577(0xff)])||parseInt(_0x14d3bc[_0x366577(0x101)])<parseInt(_0x14d3bc[_0x366577(0xff)])&&parseInt(_0x14d3bc[_0x366577(0x15d)])>parseInt(_0x14d3bc[_0x366577(0xff)])||parseInt(_0x14d3bc[_0x366577(0xff)])==0x0)&&_0xffd068++;});if(_0xffd068!=0x0)return _0x2e3392[_0x62567b(0x10a)](_0x62567b(0x132),'Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x15da52[_0x62567b(0x133)](_0x62567b(0x12c));_0xf4f1bd[_0x62567b(0x129)][_0x62567b(0x145)](_0x41e392=>{var _0x994892=_0x62567b;const _0x1840bf=_0x17238f['product_details'][_0x994892(0x112)](_0x4d5eb9=>{var _0x18b0a7=_0x994892;_0x4d5eb9['product_name']==_0x41e392[_0x18b0a7(0x114)]&&_0x4d5eb9[_0x18b0a7(0x154)]==_0x41e392[_0x18b0a7(0x154)]&&_0x4d5eb9[_0x18b0a7(0x15f)]==_0x41e392[_0x18b0a7(0x15f)]&&_0x4d5eb9['bin']==_0x41e392['bin']&&_0x4d5eb9[_0x18b0a7(0x137)]==_0x41e392[_0x18b0a7(0x137)]&&(_0x4d5eb9[_0x18b0a7(0x142)]=parseInt(_0x4d5eb9[_0x18b0a7(0x142)])+parseInt(_0x41e392['return_qty']));});}),console[_0x62567b(0x12e)](_0x62567b(0x14c),_0x17238f),await _0x17238f[_0x62567b(0xfa)](),_0xf4f1bd['invoice']=_0x324885,_0xf4f1bd['customer']=_0x2d09a8,_0xf4f1bd[_0x62567b(0x147)]=_0x360934,_0xf4f1bd['warehouse_name']=_0x5caa00,_0xf4f1bd[_0x62567b(0x129)]=_0x5ba620,_0xf4f1bd['note']=_0x255296,_0xf4f1bd['ToWarehouse']=_0x196754,_0xf4f1bd[_0x62567b(0x136)]=_0x3d1028;const _0x10f728=await _0xf4f1bd[_0x62567b(0xfa)]();console[_0x62567b(0x12e)]('new\x20new_data',_0x10f728);const _0x172a34=await c_payment_data[_0x62567b(0x151)]({'invoice':_0x2e3392[_0x62567b(0x105)][_0x62567b(0x110)],'reason':_0x62567b(0x148)});_0x172a34['suppliers']=_0x2e3392['body'][_0x62567b(0x160)],_0x172a34[_0x62567b(0x147)]=_0x2e3392[_0x62567b(0x105)]['date'],await _0x172a34[_0x62567b(0xfa)](),_0x2e3392['flash']('success',_0x62567b(0x14e)),_0x15da52['redirect'](_0x62567b(0x111));}catch(_0x2a6ecb){console[_0x62567b(0x12e)](_0x2a6ecb),_0x15da52[_0x62567b(0xfe)](0xc8)[_0x62567b(0x143)]({'message':_0x2a6ecb[_0x62567b(0x124)]});}}),router[a0_0x14b2b4(0x12d)](a0_0x14b2b4(0x119),auth,async(_0x4ff6e8,_0x52af11)=>{var _0x3fd293=a0_0x14b2b4;try{const _0x5bde4c=_0x4ff6e8['params']['id'],{invoice:_0x33b202,customer:_0x105a4c,payable_to_customer:_0x302adf,paid_amount:_0x10b10d}=_0x4ff6e8[_0x3fd293(0x105)],_0x2d6553=await sales_return[_0x3fd293(0x113)](_0x5bde4c);console[_0x3fd293(0x12e)](_0x3fd293(0x155),_0x2d6553),console[_0x3fd293(0x12e)](_0x302adf),console['log'](_0x10b10d);var _0x1195b7=_0x302adf-_0x10b10d;console[_0x3fd293(0x12e)](_0x3fd293(0x161),_0x1195b7),_0x2d6553[_0x3fd293(0xf7)]=parseFloat(_0x10b10d)+parseFloat(_0x2d6553[_0x3fd293(0xf7)]),_0x2d6553['due_amount']=_0x1195b7,console[_0x3fd293(0x12e)](_0x2d6553);const _0x3c4c05=await _0x2d6553[_0x3fd293(0xfa)]();console[_0x3fd293(0x12e)](0x1b207);const _0x2ef962=await c_payment_data[_0x3fd293(0x151)]({'invoice':_0x4ff6e8[_0x3fd293(0x105)]['invoice'],'reason':_0x3fd293(0x148)});console['log'](_0x3fd293(0xf5),_0x2ef962),_0x2ef962[_0x3fd293(0x158)]=_0x1195b7,await _0x2ef962[_0x3fd293(0xfa)]();let _0x2a8bdd=new Date(),_0x1a4a5f=('0'+_0x2a8bdd[_0x3fd293(0x11a)]())[_0x3fd293(0x152)](-0x2),_0x25541f=('0'+(_0x2a8bdd[_0x3fd293(0x163)]()+0x1))[_0x3fd293(0x152)](-0x2),_0xf16c11=_0x2a8bdd[_0x3fd293(0x12f)](),_0xc5374b=_0xf16c11+'-'+_0x25541f+'-'+_0x1a4a5f;const _0x274cda=new customer_payment({'invoice':_0x33b202,'date':_0xf16c11+'-'+_0x25541f+'-'+_0x1a4a5f,'customer':_0x105a4c,'reason':_0x3fd293(0x130),'amount':_0x10b10d}),_0x3ce84e=await _0x274cda[_0x3fd293(0xfa)]();_0x4ff6e8[_0x3fd293(0x10a)](_0x3fd293(0x10b),_0x3fd293(0x150)),_0x52af11['redirect'](_0x3fd293(0x111));}catch(_0x30d221){console[_0x3fd293(0x12e)](_0x30d221);}}),router[a0_0x14b2b4(0x10d)](a0_0x14b2b4(0x13a),auth,async(_0x22c94e,_0x2ae23c)=>{var _0x489b64=a0_0x14b2b4;try{const {username:_0x24d9e1,email:_0x55e1c9,role:_0xb6f4ce}=_0x22c94e[_0x489b64(0x11f)],_0x4c66a4=_0x22c94e[_0x489b64(0x11f)],_0x13eb5c=await profile[_0x489b64(0x151)]({'email':_0x4c66a4['email']}),_0x4b5270=await master_shop[_0x489b64(0x135)]();console[_0x489b64(0x12e)](_0x489b64(0x167),_0x4b5270);const _0x2a1895=_0x22c94e['params']['id'],_0x49865f=await sales_return['findById'](_0x2a1895);console[_0x489b64(0x12e)](_0x49865f);const _0x44318f=await customer[_0x489b64(0x151)]({'name':_0x49865f['customer']});console[_0x489b64(0x12e)](_0x44318f);if(_0x4b5270[0x0][_0x489b64(0x122)]==_0x489b64(0x126)){var _0x20e6de=users[_0x489b64(0x127)];console[_0x489b64(0x12e)](_0x20e6de);}else{if(_0x4b5270[0x0][_0x489b64(0x122)]=='Hindi')var _0x20e6de=users[_0x489b64(0x157)];else{if(_0x4b5270[0x0]['language']==_0x489b64(0x16b))var _0x20e6de=users[_0x489b64(0x16b)];else{if(_0x4b5270[0x0][_0x489b64(0x122)]==_0x489b64(0x140))var _0x20e6de=users[_0x489b64(0x140)];else{if(_0x4b5270[0x0][_0x489b64(0x122)]==_0x489b64(0x11b))var _0x20e6de=users[_0x489b64(0x11b)];else{if(_0x4b5270[0x0][_0x489b64(0x122)]==_0x489b64(0x13e))var _0x20e6de=users['Portuguese'];else{if(_0x4b5270[0x0]['language']==_0x489b64(0x15a))var _0x20e6de=users[_0x489b64(0x15a)];else{if(_0x4b5270[0x0][_0x489b64(0x122)]==_0x489b64(0x16d))var _0x20e6de=users[_0x489b64(0x15e)];}}}}}}}_0x2ae23c[_0x489b64(0xfd)]('sales_return_invoice',{'success':_0x22c94e['flash'](_0x489b64(0x10b)),'errors':_0x22c94e[_0x489b64(0x10a)](_0x489b64(0x132)),'role':_0x4c66a4,'profile':_0x13eb5c,'master_shop':_0x4b5270,'customers':_0x44318f,'sales':_0x49865f,'language':_0x20e6de});}catch(_0x570ba0){console[_0x489b64(0x12e)](_0x570ba0);}}),module[a0_0x14b2b4(0x107)]=router;function a0_0x5b23(){var _0x5bb957=['findOne','slice','bin','floorlevel','data','$name','Hindi','amount','aggregate','Chinese','$product_details.secondary_code','../middleware/auth','sale_qty','Arabic','type','suppliers','subtract','/view/:id','getMonth','foreach\x20newproduct','$product_details.product_name','secondary_code_QA','master','product_code_QA','ToWarehouse','product_code','German','email','Arabic\x20(ae)','customer','c_payment','note','paid_amount','primary_code','Portuguese','save','$product_details.floorlevel','$product_details.bay','render','status','return_qty','product_name_QA','stock','2743854dUjiHF','30728322ONPVMe','string','body','14OgZokQ','exports','types','stocks','flash','success','1176736ByiUPF','get','5800112MiKJnV','$customer_docs','invoice','/sales_return/view','map','findById','product_name','old_data','secondary_code','sales_quantity','3118850qnlFHl','/give_payment/:id','getDate','French','customer_docs','primary_code_QA','customers','user','return_qty_QA','sales_quantity_QA','language','$product_details.bin','message','$product_details','English\x20(US)','English','5XUlhkT','return_sale','$product_details.storage','name','back','post','log','getFullYear','Returned\x20Payment\x20For\x20Sale\x20Return','stocks_QA','errors','redirect','express','find','ToRoom','bay','2281704zkKkeO','Router','/invoice/:id','Finished\x20Goods','warehouse_name','7012552CcfMgq','Portuguese\x20(BR)','Enabled','Spanish','$product_details.type','product_stock','json','params','forEach','return_sale_QA','date','Sale\x20Return','sales_return_finished','$product_details._id','Return\x20Rooms','old_warehouse_data','$product_details.rack','purchase\x20return\x20successfully','$product_details.product_code','payment\x20successfull'];a0_0x5b23=function(){return _0x5bb957;};return a0_0x5b23();}