const a0_0x3a334d=a0_0x5ea6;(function(_0x573f47,_0x3f1595){const _0x4a3a83=a0_0x5ea6,_0x488f00=_0x573f47();while(!![]){try{const _0x423223=-parseInt(_0x4a3a83(0x17b))/0x1*(parseInt(_0x4a3a83(0x18d))/0x2)+-parseInt(_0x4a3a83(0x1a0))/0x3*(parseInt(_0x4a3a83(0x180))/0x4)+parseInt(_0x4a3a83(0x19f))/0x5+parseInt(_0x4a3a83(0x19a))/0x6*(-parseInt(_0x4a3a83(0x17f))/0x7)+-parseInt(_0x4a3a83(0x196))/0x8+parseInt(_0x4a3a83(0x19c))/0x9+parseInt(_0x4a3a83(0x165))/0xa*(parseInt(_0x4a3a83(0x1a9))/0xb);if(_0x423223===_0x3f1595)break;else _0x488f00['push'](_0x488f00['shift']());}catch(_0x3b97ca){_0x488f00['push'](_0x488f00['shift']());}}}(a0_0x3b75,0xd16fd));const express=require(a0_0x3a334d(0x18a)),app=express(),router=express[a0_0x3a334d(0x1af)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x3a334d(0x181)),auth=require(a0_0x3a334d(0x1ae));function a0_0x3b75(){const _0x26f6e8=['German','Return\x20Goods','$product_details.production_date','37hAwDhO','English','All','$product_details.product_code','7QnzEfh','1952344cYfUZO','../models/all_models','$expiry_date','$product_details.expiry_date','/Rooms_data','log','aggregate','English\x20(US)','$_id.bin','pack','express','Arabic','Finished\x20Goods','15204IGJYAb','render','status','role','toLocaleString','/MapData','warehousemap_incoming','find','$product_details.type','9780800YVBcDd','$$product.product_quantity','body','Chinese','9730848gbScjJ','staff','10502928HLheFy','$_id.floorlevel','$production_date','5095460PhEkTQ','9AJwsTt','get','$product_details.product_stock','$count','user','/Rooms_data3','QA\x20Warehouse','/MapData2','findOne','11BIOfAU','email','en-US','$product_details.bin','Arabic\x20(ae)','../middleware/auth','Router','Spanish','warehouse','$product_details','$_id.type','../public/language/languages.json','success','$name','32617090rIhmCz','message','Enabled','$_id.bay','$_id','raw','/view','Hindi','language','json','$room','French','post','Raw\x20Materials','/Rooms_data2','flash','timezone','Rack\x20A','exports'];a0_0x3b75=function(){return _0x26f6e8;};return a0_0x3b75();}var timezones=require('timezones-list');const users=require(a0_0x3a334d(0x1b4));function a0_0x5ea6(_0x176d6f,_0x2242d8){const _0x3b752a=a0_0x3b75();return a0_0x5ea6=function(_0x5ea621,_0xe01a81){_0x5ea621=_0x5ea621-0x165;let _0x4199aa=_0x3b752a[_0x5ea621];return _0x4199aa;},a0_0x5ea6(_0x176d6f,_0x2242d8);}router[a0_0x3a334d(0x1a1)](a0_0x3a334d(0x16b),auth,async(_0x434b1f,_0x1959ac)=>{const _0x391d16=a0_0x3a334d;try{const {username:_0x5c3c71,email:_0x2f651b,role:_0x1ff0ee}=_0x434b1f[_0x391d16(0x1a4)],_0x1f7f36=_0x434b1f['user'],_0x28601d=await profile[_0x391d16(0x1a8)]({'email':_0x1f7f36['email']}),_0x19e0b8=await master_shop[_0x391d16(0x194)]();console[_0x391d16(0x185)]('master',_0x19e0b8);let _0x1907ef;if(_0x1f7f36[_0x391d16(0x190)]==_0x391d16(0x19b)){const _0x47b89d=await staff['findOne']({'email':_0x1f7f36[_0x391d16(0x1aa)]});_0x1907ef=await warehouse[_0x391d16(0x186)]([{'$match':{'status':_0x391d16(0x167),'name':_0x47b89d[_0x391d16(0x1b1)]}},{'$group':{'_id':_0x391d16(0x1b6),'name':{'$first':'$name'}}}]);}else _0x1907ef=await warehouse[_0x391d16(0x186)]([{'$match':{'status':_0x391d16(0x167)}},{'$group':{'_id':_0x391d16(0x1b6),'name':{'$first':_0x391d16(0x1b6)}}}]);const _0xf745c9=new Date()[_0x391d16(0x191)](_0x391d16(0x1ab),{'timeZone':_0x19e0b8[0x0][_0x391d16(0x175)]});console[_0x391d16(0x185)]('timezone',_0xf745c9);if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x187)){var _0x18c696=users[_0x391d16(0x17c)];console['log'](_0x18c696);}else{if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x16c))var _0x18c696=users[_0x391d16(0x16c)];else{if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x178))var _0x18c696=users[_0x391d16(0x178)];else{if(_0x19e0b8[0x0]['language']==_0x391d16(0x1b0))var _0x18c696=users[_0x391d16(0x1b0)];else{if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x170))var _0x18c696=users['French'];else{if(_0x19e0b8[0x0]['language']=='Portuguese\x20(BR)')var _0x18c696=users['Portuguese'];else{if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x199))var _0x18c696=users['Chinese'];else{if(_0x19e0b8[0x0][_0x391d16(0x16d)]==_0x391d16(0x1ad))var _0x18c696=users[_0x391d16(0x18b)];}}}}}}}_0x1959ac[_0x391d16(0x18e)](_0x391d16(0x193),{'success':_0x434b1f['flash'](_0x391d16(0x1b5)),'errors':_0x434b1f[_0x391d16(0x174)]('errors'),'role':_0x1f7f36,'profile':_0x28601d,'master_shop':_0x19e0b8,'timezones':timezones,'language':_0x18c696,'warehouse':_0x1907ef});}catch(_0x52c84c){console['log'](_0x52c84c),_0x1959ac[_0x391d16(0x18f)](0xc8)[_0x391d16(0x16e)]({'message':_0x52c84c['message']});}}),router['post'](a0_0x3a334d(0x192),async(_0x23b76d,_0x285609)=>{const _0x478b39=a0_0x3a334d,{warehouseNew:_0x825a79,rooms:_0x462b39,Type:_0x39bda8}=_0x23b76d['body'],_0x4ce840=await warehouse[_0x478b39(0x186)]([{'$unwind':_0x478b39(0x1b2)},{'$match':{'name':_0x825a79,'room':_0x462b39,'product_details.type':_0x39bda8}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x478b39(0x1ac),'type':_0x478b39(0x195),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x478b39(0x1a2),'product_code':_0x478b39(0x17e)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x478b39(0x1a2),0x0]},'then':_0x478b39(0x1a2),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x478b39(0x168),'bin':_0x478b39(0x188),'type':_0x478b39(0x1b3),'floorlevel':_0x478b39(0x19d),'products':{'$filter':{'input':'$products','as':'product','cond':{'$gt':[_0x478b39(0x197),0x0]}}},'totalQuantity':0x1}}]);_0x285609['json'](_0x4ce840);}),router[a0_0x3a334d(0x171)](a0_0x3a334d(0x1a7),async(_0xd713df,_0x1f7726)=>{const _0x3a1d53=a0_0x3a334d,{warehouseNew:_0x2312b3,rooms:_0x4326d9,room_cat:_0x32f45a}=_0xd713df['body'];let _0x589912;if(_0x32f45a==_0x3a1d53(0x17d))_0x589912=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x2312b3}},{'$group':{'_id':{'bay':'$product_details.bay','product':'$product_details.product_name','expiry':'$product_details.expiry_date'},'count':{'$sum':_0x3a1d53(0x1a2)},'production_date':{'$first':_0x3a1d53(0x17a)},'expiry_date':{'$first':_0x3a1d53(0x183)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x3a1d53(0x17e)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':'$_id.product','quantity':_0x3a1d53(0x1a3),'production_date':_0x3a1d53(0x19e),'expiry_date':_0x3a1d53(0x182),'batch_code':'$batch_code','product_code':'$product_code'}},'totalQuantity':{'$sum':_0x3a1d53(0x1a3)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x3a1d53(0x169),'products':0x1,'totalQuantity':0x1}}]),console[_0x3a1d53(0x185)](_0x32f45a);else{}_0x1f7726['json'](_0x589912);}),router['post'](a0_0x3a334d(0x184),async(_0xbf8a61,_0x52b7aa)=>{const _0x59e559=a0_0x3a334d;try{const {warehouse_name:_0xb58052,A:_0x20176e,B:_0x4dee87}=_0xbf8a61[_0x59e559(0x198)];var _0x5e98d8='';_0x20176e==_0x59e559(0x16a)?_0x4dee87==_0x59e559(0x189)?_0x5e98d8=[{'$match':{'name':_0xb58052,'status':_0x59e559(0x167),'room':_0x59e559(0x176)}},{'$group':{'_id':_0x59e559(0x169),'room_name':{'$first':_0x59e559(0x16f)}}},{'$sort':{'room_name':0x1}}]:_0x5e98d8=[{'$match':{'name':_0xb58052,'status':'Enabled'}},{'$group':{'_id':_0x59e559(0x169),'room_name':{'$first':_0x59e559(0x16f)}}},{'$sort':{'room_name':0x1}}]:_0x5e98d8=[{'$match':{'name':_0xb58052,'status':_0x59e559(0x167)}},{'$group':{'_id':_0x59e559(0x169),'room_name':{'$first':_0x59e559(0x16f)}}},{'$sort':{'room_name':0x1}}];const _0x32d981=await warehouse['aggregate'](_0x5e98d8);_0x52b7aa[_0x59e559(0x18f)](0xc8)[_0x59e559(0x16e)](_0x32d981);}catch(_0x176dd9){_0x52b7aa[_0x59e559(0x18f)](0x190)[_0x59e559(0x16e)]({'errorMessage':_0x176dd9[_0x59e559(0x166)]});}}),router['post'](a0_0x3a334d(0x173),async(_0x18e10a,_0x438776)=>{const _0x2a0500=a0_0x3a334d;try{const {warehouse_name:_0x29895a,cat:_0x563425,valNew:_0x261366}=_0x18e10a['body'];var _0x1946f0='',_0x491c70='';if(_0x563425==_0x2a0500(0x172))_0x1946f0=_0x2a0500(0x179),_0x261366==_0x2a0500(0x189)?_0x491c70=[{'$match':{'status':_0x2a0500(0x167),'warehouse_category':_0x563425,'name':{'$ne':_0x1946f0},'name':'DRY\x20STORAGE'}},{'$group':{'_id':'$name','room_name':{'$first':_0x2a0500(0x1b6)}}},{'$sort':{'room_name':0x1}}]:_0x491c70=[{'$match':{'status':'Enabled','warehouse_category':_0x563425,'name':{'$ne':_0x1946f0}}},{'$group':{'_id':_0x2a0500(0x1b6),'room_name':{'$first':_0x2a0500(0x1b6)}}},{'$sort':{'room_name':0x1}}];else _0x563425==_0x2a0500(0x18c)?(_0x1946f0=_0x2a0500(0x1a6),_0x491c70=[{'$match':{'status':_0x2a0500(0x167),'warehouse_category':_0x563425,'name':{'$ne':_0x1946f0}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x491c70=[{'$match':{'status':_0x2a0500(0x167)}},{'$group':{'_id':_0x2a0500(0x1b6),'room_name':{'$first':_0x2a0500(0x1b6)}}},{'$sort':{'room_name':0x1}}];const _0x1e0d94=await warehouse['aggregate'](_0x491c70);_0x438776[_0x2a0500(0x18f)](0xc8)[_0x2a0500(0x16e)](_0x1e0d94);}catch(_0x5cf859){_0x438776['status'](0x190)[_0x2a0500(0x16e)]({'errorMessage':_0x5cf859[_0x2a0500(0x166)]}),console[_0x2a0500(0x185)](_0x5cf859);}}),router[a0_0x3a334d(0x171)](a0_0x3a334d(0x1a5),async(_0x29a430,_0x25609e)=>{const _0x2dd57a=a0_0x3a334d;try{const {warehouse_name:_0x155ceb,cat:_0xd8da6b}=_0x29a430[_0x2dd57a(0x198)],_0x44675d=await warehouse['aggregate']([{'$match':{'status':_0x2dd57a(0x167),'warehouse_category':_0xd8da6b,'name':_0x155ceb}},{'$group':{'_id':_0x2dd57a(0x16f),'room_name':{'$first':_0x2dd57a(0x16f)}}},{'$sort':{'room_name':0x1}}]);_0x25609e[_0x2dd57a(0x18f)](0xc8)['json'](_0x44675d);}catch(_0x5c7a2e){_0x25609e[_0x2dd57a(0x18f)](0x190)['json']({'errorMessage':_0x5c7a2e[_0x2dd57a(0x166)]});}}),module[a0_0x3a334d(0x177)]=router;