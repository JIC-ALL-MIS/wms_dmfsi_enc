const a0_0x2bc422=a0_0x3ce7;function a0_0x3ce7(_0x15e854,_0x6a0868){const _0x1da50f=a0_0x1da5();return a0_0x3ce7=function(_0x3ce7f2,_0x3b1b08){_0x3ce7f2=_0x3ce7f2-0xdc;let _0x5e78d3=_0x1da50f[_0x3ce7f2];return _0x5e78d3;},a0_0x3ce7(_0x15e854,_0x6a0868);}(function(_0x12a34f,_0x4ee434){const _0x474d10=a0_0x3ce7,_0x1761eb=_0x12a34f();while(!![]){try{const _0x21a5c0=-parseInt(_0x474d10(0xea))/0x1+parseInt(_0x474d10(0xeb))/0x2*(-parseInt(_0x474d10(0x11e))/0x3)+-parseInt(_0x474d10(0x12b))/0x4+-parseInt(_0x474d10(0xe2))/0x5*(parseInt(_0x474d10(0xf1))/0x6)+-parseInt(_0x474d10(0x110))/0x7*(-parseInt(_0x474d10(0x108))/0x8)+parseInt(_0x474d10(0xf4))/0x9*(parseInt(_0x474d10(0xee))/0xa)+parseInt(_0x474d10(0xed))/0xb;if(_0x21a5c0===_0x4ee434)break;else _0x1761eb['push'](_0x1761eb['shift']());}catch(_0x54f901){_0x1761eb['push'](_0x1761eb['shift']());}}}(a0_0x1da5,0x32dbe));const express=require(a0_0x2bc422(0xdf)),app=express(),router=express[a0_0x2bc422(0xde)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2bc422(0xe8)),auth=require(a0_0x2bc422(0x11c));var timezones=require(a0_0x2bc422(0x128));function a0_0x1da5(){const _0x3f1610=['exports','Raw\x20Materials','2031025VIXDcb','/MapData2','message','$product_details.product_name','Portuguese','user','../models/all_models','$$product.product_quantity','95972ACxiLT','523976UbQrcs','$_id.type','9444941WrHaeP','14710moYliH','QA\x20Warehouse','role','6xOKwHh','All','$_id.bin','774FugUvf','$batch_code','body','/view','$product_code','Chinese','$count','/MapData','English','$_id.bay','find','../public/language/languages.json','json','$_id.floorlevel','$room','timezone','warehouse','Rack\x20A','status','$product_details.type','77208pmPTsU','get','flash','German','DRY\x20STORAGE','master','Hindi','$production_date','77HDCRsk','$product_details.floorlevel','/Rooms_data3','pack','$_id.product','Arabic','log','success','language','findOne','French','$product_details.bay','../middleware/auth','$name','3ZdsQpQ','warehousemap_incoming','post','$_id','product','/Rooms_data','$products','$product_details','toLocaleString','Portuguese\x20(BR)','timezones-list','$product_details.product_stock','$expiry_date','475260YhUMKc','email','$product_details.production_date','aggregate','$product_details.product_code','Enabled','Router','express'];a0_0x1da5=function(){return _0x3f1610;};return a0_0x1da5();}const users=require(a0_0x2bc422(0xff));router[a0_0x2bc422(0x109)](a0_0x2bc422(0xf7),auth,async(_0x82419b,_0x4aa45b)=>{const _0x10134a=a0_0x2bc422;try{const {username:_0x37a48f,email:_0x146e20,role:_0x4a409f}=_0x82419b[_0x10134a(0xe7)],_0x19035e=_0x82419b[_0x10134a(0xe7)],_0x4151df=await profile[_0x10134a(0x119)]({'email':_0x19035e[_0x10134a(0x12c)]}),_0x1a5295=await master_shop[_0x10134a(0xfe)]();console[_0x10134a(0x116)](_0x10134a(0x10d),_0x1a5295);let _0xd35c7e;if(_0x19035e[_0x10134a(0xf0)]=='staff'){const _0x2a461d=await staff[_0x10134a(0x119)]({'email':_0x19035e['email']});_0xd35c7e=await warehouse['aggregate']([{'$match':{'status':_0x10134a(0xdd),'name':_0x2a461d[_0x10134a(0x104)]}},{'$group':{'_id':_0x10134a(0x11d),'name':{'$first':_0x10134a(0x11d)}}}]);}else _0xd35c7e=await warehouse['aggregate']([{'$match':{'status':_0x10134a(0xdd)}},{'$group':{'_id':'$name','name':{'$first':_0x10134a(0x11d)}}}]);const _0x5ab98b=new Date()[_0x10134a(0x126)]('en-US',{'timeZone':_0x1a5295[0x0][_0x10134a(0x103)]});console['log'](_0x10134a(0x103),_0x5ab98b);if(_0x1a5295[0x0][_0x10134a(0x118)]=='English\x20(US)'){var _0x4c93e4=users[_0x10134a(0xfc)];console['log'](_0x4c93e4);}else{if(_0x1a5295[0x0][_0x10134a(0x118)]==_0x10134a(0x10e))var _0x4c93e4=users['Hindi'];else{if(_0x1a5295[0x0][_0x10134a(0x118)]==_0x10134a(0x10b))var _0x4c93e4=users[_0x10134a(0x10b)];else{if(_0x1a5295[0x0]['language']=='Spanish')var _0x4c93e4=users['Spanish'];else{if(_0x1a5295[0x0][_0x10134a(0x118)]==_0x10134a(0x11a))var _0x4c93e4=users['French'];else{if(_0x1a5295[0x0][_0x10134a(0x118)]==_0x10134a(0x127))var _0x4c93e4=users[_0x10134a(0xe6)];else{if(_0x1a5295[0x0][_0x10134a(0x118)]==_0x10134a(0xf9))var _0x4c93e4=users[_0x10134a(0xf9)];else{if(_0x1a5295[0x0][_0x10134a(0x118)]=='Arabic\x20(ae)')var _0x4c93e4=users[_0x10134a(0x115)];}}}}}}}_0x4aa45b['render'](_0x10134a(0x11f),{'success':_0x82419b[_0x10134a(0x10a)](_0x10134a(0x117)),'errors':_0x82419b[_0x10134a(0x10a)]('errors'),'role':_0x19035e,'profile':_0x4151df,'master_shop':_0x1a5295,'timezones':timezones,'language':_0x4c93e4,'warehouse':_0xd35c7e});}catch(_0x10da17){console[_0x10134a(0x116)](_0x10da17),_0x4aa45b[_0x10134a(0x106)](0xc8)[_0x10134a(0x100)]({'message':_0x10da17['message']});}}),router['post'](a0_0x2bc422(0xfb),async(_0x5593ba,_0x462c14)=>{const _0x3b1435=a0_0x2bc422,{warehouseNew:_0x331f97,rooms:_0x14e994,Type:_0x11d2fa}=_0x5593ba[_0x3b1435(0xf6)],_0x31bf75=await warehouse[_0x3b1435(0x12e)]([{'$unwind':_0x3b1435(0x125)},{'$match':{'name':_0x331f97,'room':_0x14e994,'product_details.type':_0x11d2fa}},{'$group':{'_id':{'bay':_0x3b1435(0x11b),'bin':'$product_details.bin','type':_0x3b1435(0x107),'floorlevel':_0x3b1435(0x111)},'products':{'$push':{'product_name':_0x3b1435(0xe5),'product_quantity':_0x3b1435(0x129),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x3b1435(0x129),0x0]},'then':_0x3b1435(0x129),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x3b1435(0xfd),'bin':_0x3b1435(0xf3),'type':_0x3b1435(0xec),'floorlevel':_0x3b1435(0x101),'products':{'$filter':{'input':_0x3b1435(0x124),'as':_0x3b1435(0x122),'cond':{'$gt':[_0x3b1435(0xe9),0x0]}}},'totalQuantity':0x1}}]);_0x462c14[_0x3b1435(0x100)](_0x31bf75);}),router[a0_0x2bc422(0x120)](a0_0x2bc422(0xe3),async(_0x103fc2,_0x4353ea)=>{const _0x57afde=a0_0x2bc422,{warehouseNew:_0x2956b5,rooms:_0x88b2e8,room_cat:_0x1504b7}=_0x103fc2['body'];let _0x55eaa1;if(_0x1504b7==_0x57afde(0xf2))_0x55eaa1=await warehouse[_0x57afde(0x12e)]([{'$unwind':_0x57afde(0x125)},{'$match':{'name':_0x2956b5}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x57afde(0xe5),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x57afde(0x129)},'production_date':{'$first':_0x57afde(0x12d)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x57afde(0xdc)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x57afde(0x114),'quantity':_0x57afde(0xfa),'production_date':_0x57afde(0x10f),'expiry_date':_0x57afde(0x12a),'batch_code':_0x57afde(0xf5),'product_code':_0x57afde(0xf8)}},'totalQuantity':{'$sum':_0x57afde(0xfa)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x57afde(0x121),'products':0x1,'totalQuantity':0x1}}]),console[_0x57afde(0x116)](_0x1504b7);else{}_0x4353ea[_0x57afde(0x100)](_0x55eaa1);}),router['post'](a0_0x2bc422(0x123),async(_0x160d0e,_0x11db62)=>{const _0x11d01e=a0_0x2bc422;try{const {warehouse_name:_0x415070,A:_0x34c4f6,B:_0x1b1b52}=_0x160d0e[_0x11d01e(0xf6)];var _0x586bda='';_0x34c4f6=='raw'?_0x1b1b52==_0x11d01e(0x113)?_0x586bda=[{'$match':{'name':_0x415070,'status':_0x11d01e(0xdd),'room':_0x11d01e(0x105)}},{'$group':{'_id':_0x11d01e(0x121),'room_name':{'$first':_0x11d01e(0x102)}}},{'$sort':{'room_name':0x1}}]:_0x586bda=[{'$match':{'name':_0x415070,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x11d01e(0x102)}}},{'$sort':{'room_name':0x1}}]:_0x586bda=[{'$match':{'name':_0x415070,'status':_0x11d01e(0xdd)}},{'$group':{'_id':_0x11d01e(0x121),'room_name':{'$first':_0x11d01e(0x102)}}},{'$sort':{'room_name':0x1}}];const _0x4b4ca5=await warehouse[_0x11d01e(0x12e)](_0x586bda);_0x11db62['status'](0xc8)[_0x11d01e(0x100)](_0x4b4ca5);}catch(_0x568153){_0x11db62[_0x11d01e(0x106)](0x190)[_0x11d01e(0x100)]({'errorMessage':_0x568153['message']});}}),router[a0_0x2bc422(0x120)]('/Rooms_data2',async(_0x40ac2e,_0x470801)=>{const _0x4fc8f8=a0_0x2bc422;try{const {warehouse_name:_0x4172c0,cat:_0x391261,valNew:_0x4d2aa1}=_0x40ac2e['body'];var _0xc24450='',_0x1f104c='';if(_0x391261==_0x4fc8f8(0xe1))_0xc24450='Return\x20Goods',_0x4d2aa1==_0x4fc8f8(0x113)?_0x1f104c=[{'$match':{'status':'Enabled','warehouse_category':_0x391261,'name':{'$ne':_0xc24450},'name':_0x4fc8f8(0x10c)}},{'$group':{'_id':_0x4fc8f8(0x11d),'room_name':{'$first':_0x4fc8f8(0x11d)}}},{'$sort':{'room_name':0x1}}]:_0x1f104c=[{'$match':{'status':_0x4fc8f8(0xdd),'warehouse_category':_0x391261,'name':{'$ne':_0xc24450}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x391261=='Finished\x20Goods'?(_0xc24450=_0x4fc8f8(0xef),_0x1f104c=[{'$match':{'status':'Enabled','warehouse_category':_0x391261,'name':{'$ne':_0xc24450}}},{'$group':{'_id':_0x4fc8f8(0x11d),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x1f104c=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x4fc8f8(0x11d),'room_name':{'$first':_0x4fc8f8(0x11d)}}},{'$sort':{'room_name':0x1}}];const _0x1bf364=await warehouse[_0x4fc8f8(0x12e)](_0x1f104c);_0x470801[_0x4fc8f8(0x106)](0xc8)['json'](_0x1bf364);}catch(_0x2c8728){_0x470801[_0x4fc8f8(0x106)](0x190)[_0x4fc8f8(0x100)]({'errorMessage':_0x2c8728[_0x4fc8f8(0xe4)]}),console[_0x4fc8f8(0x116)](_0x2c8728);}}),router[a0_0x2bc422(0x120)](a0_0x2bc422(0x112),async(_0x11ebf3,_0x3c76a1)=>{const _0x3942c5=a0_0x2bc422;try{const {warehouse_name:_0x502417,cat:_0x3bc730}=_0x11ebf3[_0x3942c5(0xf6)],_0xd3c830=await warehouse['aggregate']([{'$match':{'status':_0x3942c5(0xdd),'warehouse_category':_0x3bc730,'name':_0x502417}},{'$group':{'_id':'$room','room_name':{'$first':_0x3942c5(0x102)}}},{'$sort':{'room_name':0x1}}]);_0x3c76a1[_0x3942c5(0x106)](0xc8)[_0x3942c5(0x100)](_0xd3c830);}catch(_0x198b48){_0x3c76a1['status'](0x190)[_0x3942c5(0x100)]({'errorMessage':_0x198b48[_0x3942c5(0xe4)]});}}),module[a0_0x2bc422(0xe0)]=router;