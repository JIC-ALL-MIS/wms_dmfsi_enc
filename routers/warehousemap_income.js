function a0_0x6697(){const _0x578d68=['1397OLgdrV','Raw\x20Materials','$count','warehouse','$$product.product_quantity','$product_details.bin','/Rooms_data','message','/Rooms_data2','$product_details.product_stock','Chinese','170pfQlnq','/view','7906743boEQJd','body','$product_details.bay','$product_details.production_date','email','$product_details.product_code','4253480IPkwBr','user','log','Spanish','Portuguese','$expiry_date','100356tJpsTU','Router','$product_details.expiry_date','toLocaleString','$product_details.product_name','/MapData','/Rooms_data3','get','$batch_code','Return\x20Goods','$_id.bin','role','timezone','12OErgJr','raw','Hindi','master','pack','$room','json','Rack\x20A','German','4493tVQghK','express','$production_date','../public/language/languages.json','success','language','$name','406QXayDm','warehousemap_incoming','335SJxVWS','$products','$_id','6472lyVxkV','flash','../models/all_models','status','$product_details.batch_code','$_id.product','errors','43230gxqLbL','All','English','Portuguese\x20(BR)','timezones-list','$_id.bay','$_id.type','Finished\x20Goods','Enabled','find','DRY\x20STORAGE','aggregate','$product_code','$product_details.floorlevel','Arabic\x20(ae)','974595TZtsMF','post'];a0_0x6697=function(){return _0x578d68;};return a0_0x6697();}function a0_0x37b5(_0x460558,_0x7fb344){const _0x669705=a0_0x6697();return a0_0x37b5=function(_0x37b5d5,_0x59147a){_0x37b5d5=_0x37b5d5-0x12e;let _0x423f55=_0x669705[_0x37b5d5];return _0x423f55;},a0_0x37b5(_0x460558,_0x7fb344);}const a0_0x57bbfc=a0_0x37b5;(function(_0x1984a5,_0x51b154){const _0x1d2ca3=a0_0x37b5,_0x48db2e=_0x1984a5();while(!![]){try{const _0x259f9b=-parseInt(_0x1d2ca3(0x12e))/0x1*(-parseInt(_0x1d2ca3(0x15d))/0x2)+parseInt(_0x1d2ca3(0x150))/0x3*(-parseInt(_0x1d2ca3(0x178))/0x4)+-parseInt(_0x1d2ca3(0x137))/0x5*(-parseInt(_0x1d2ca3(0x141))/0x6)+parseInt(_0x1d2ca3(0x135))/0x7*(parseInt(_0x1d2ca3(0x13a))/0x8)+-parseInt(_0x1d2ca3(0x15f))/0x9+parseInt(_0x1d2ca3(0x165))/0xa+parseInt(_0x1d2ca3(0x152))/0xb*(parseInt(_0x1d2ca3(0x16b))/0xc);if(_0x259f9b===_0x51b154)break;else _0x48db2e['push'](_0x48db2e['shift']());}catch(_0xd8e63c){_0x48db2e['push'](_0x48db2e['shift']());}}}(a0_0x6697,0x85461));const express=require(a0_0x57bbfc(0x12f)),app=express(),router=express[a0_0x57bbfc(0x16c)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x57bbfc(0x13c)),auth=require('../middleware/auth');var timezones=require(a0_0x57bbfc(0x145));const users=require(a0_0x57bbfc(0x131));router[a0_0x57bbfc(0x172)](a0_0x57bbfc(0x15e),auth,async(_0x5ea988,_0x4f2026)=>{const _0x355eb2=a0_0x57bbfc;try{const {username:_0x70f8b6,email:_0x45f994,role:_0x3e72f2}=_0x5ea988[_0x355eb2(0x166)],_0x529513=_0x5ea988[_0x355eb2(0x166)],_0x13db20=await profile['findOne']({'email':_0x529513[_0x355eb2(0x163)]}),_0x21d8d6=await master_shop[_0x355eb2(0x14a)]();console[_0x355eb2(0x167)](_0x355eb2(0x17b),_0x21d8d6);let _0x52f489;if(_0x529513[_0x355eb2(0x176)]=='staff'){const _0x298b71=await staff['findOne']({'email':_0x529513[_0x355eb2(0x163)]});_0x52f489=await warehouse[_0x355eb2(0x14c)]([{'$match':{'status':_0x355eb2(0x149),'name':_0x298b71[_0x355eb2(0x155)]}},{'$group':{'_id':_0x355eb2(0x134),'name':{'$first':_0x355eb2(0x134)}}}]);}else _0x52f489=await warehouse[_0x355eb2(0x14c)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0x355eb2(0x134)}}}]);const _0x131a3f=new Date()[_0x355eb2(0x16e)]('en-US',{'timeZone':_0x21d8d6[0x0]['timezone']});console['log'](_0x355eb2(0x177),_0x131a3f);if(_0x21d8d6[0x0][_0x355eb2(0x133)]=='English\x20(US)'){var _0x2bba21=users[_0x355eb2(0x143)];console[_0x355eb2(0x167)](_0x2bba21);}else{if(_0x21d8d6[0x0]['language']==_0x355eb2(0x17a))var _0x2bba21=users['Hindi'];else{if(_0x21d8d6[0x0][_0x355eb2(0x133)]==_0x355eb2(0x180))var _0x2bba21=users[_0x355eb2(0x180)];else{if(_0x21d8d6[0x0][_0x355eb2(0x133)]==_0x355eb2(0x168))var _0x2bba21=users['Spanish'];else{if(_0x21d8d6[0x0][_0x355eb2(0x133)]=='French')var _0x2bba21=users['French'];else{if(_0x21d8d6[0x0][_0x355eb2(0x133)]==_0x355eb2(0x144))var _0x2bba21=users[_0x355eb2(0x169)];else{if(_0x21d8d6[0x0]['language']==_0x355eb2(0x15c))var _0x2bba21=users[_0x355eb2(0x15c)];else{if(_0x21d8d6[0x0]['language']==_0x355eb2(0x14f))var _0x2bba21=users['Arabic'];}}}}}}}_0x4f2026['render'](_0x355eb2(0x136),{'success':_0x5ea988['flash'](_0x355eb2(0x132)),'errors':_0x5ea988[_0x355eb2(0x13b)](_0x355eb2(0x140)),'role':_0x529513,'profile':_0x13db20,'master_shop':_0x21d8d6,'timezones':timezones,'language':_0x2bba21,'warehouse':_0x52f489});}catch(_0x3a7306){console[_0x355eb2(0x167)](_0x3a7306),_0x4f2026['status'](0xc8)[_0x355eb2(0x17e)]({'message':_0x3a7306[_0x355eb2(0x159)]});}}),router[a0_0x57bbfc(0x151)](a0_0x57bbfc(0x170),async(_0x351473,_0x8450f5)=>{const _0x181602=a0_0x57bbfc,{warehouseNew:_0x112d5c,rooms:_0x20652a,Type:_0x420ac9}=_0x351473[_0x181602(0x160)],_0x32f7ac=await warehouse[_0x181602(0x14c)]([{'$unwind':'$product_details'},{'$match':{'name':_0x112d5c,'room':_0x20652a,'product_details.type':_0x420ac9}},{'$group':{'_id':{'bay':_0x181602(0x161),'bin':_0x181602(0x157),'type':'$product_details.type','floorlevel':_0x181602(0x14e)},'products':{'$push':{'product_name':_0x181602(0x16f),'product_quantity':_0x181602(0x15b),'product_code':_0x181602(0x164)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x181602(0x15b),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x181602(0x146),'bin':_0x181602(0x175),'type':_0x181602(0x147),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x181602(0x138),'as':'product','cond':{'$gt':[_0x181602(0x156),0x0]}}},'totalQuantity':0x1}}]);_0x8450f5['json'](_0x32f7ac);}),router[a0_0x57bbfc(0x151)]('/MapData2',async(_0x480205,_0x42e156)=>{const _0x37ed78=a0_0x57bbfc,{warehouseNew:_0x3d739d,rooms:_0x4b7756,room_cat:_0x2cd494}=_0x480205[_0x37ed78(0x160)];let _0x8ca35a;if(_0x2cd494==_0x37ed78(0x142))_0x8ca35a=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x3d739d}},{'$group':{'_id':{'bay':_0x37ed78(0x161),'product':_0x37ed78(0x16f),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x37ed78(0x15b)},'production_date':{'$first':_0x37ed78(0x162)},'expiry_date':{'$first':_0x37ed78(0x16d)},'batch_code':{'$first':_0x37ed78(0x13e)},'product_code':{'$first':_0x37ed78(0x164)}}},{'$group':{'_id':_0x37ed78(0x146),'products':{'$push':{'product':_0x37ed78(0x13f),'quantity':_0x37ed78(0x154),'production_date':_0x37ed78(0x130),'expiry_date':_0x37ed78(0x16a),'batch_code':_0x37ed78(0x173),'product_code':_0x37ed78(0x14d)}},'totalQuantity':{'$sum':_0x37ed78(0x154)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x2cd494);else{}_0x42e156[_0x37ed78(0x17e)](_0x8ca35a);}),router[a0_0x57bbfc(0x151)](a0_0x57bbfc(0x158),async(_0x16d5fb,_0xb29938)=>{const _0x4687c8=a0_0x57bbfc;try{const {warehouse_name:_0x140dbd,A:_0x3a0c85,B:_0x1cf015}=_0x16d5fb[_0x4687c8(0x160)];var _0x8a274='';_0x3a0c85==_0x4687c8(0x179)?_0x1cf015==_0x4687c8(0x17c)?_0x8a274=[{'$match':{'name':_0x140dbd,'status':_0x4687c8(0x149),'room':_0x4687c8(0x17f)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4687c8(0x17d)}}},{'$sort':{'room_name':0x1}}]:_0x8a274=[{'$match':{'name':_0x140dbd,'status':_0x4687c8(0x149)}},{'$group':{'_id':_0x4687c8(0x139),'room_name':{'$first':_0x4687c8(0x17d)}}},{'$sort':{'room_name':0x1}}]:_0x8a274=[{'$match':{'name':_0x140dbd,'status':_0x4687c8(0x149)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4687c8(0x17d)}}},{'$sort':{'room_name':0x1}}];const _0x4488e1=await warehouse[_0x4687c8(0x14c)](_0x8a274);_0xb29938[_0x4687c8(0x13d)](0xc8)[_0x4687c8(0x17e)](_0x4488e1);}catch(_0x52cb2d){_0xb29938[_0x4687c8(0x13d)](0x190)[_0x4687c8(0x17e)]({'errorMessage':_0x52cb2d['message']});}}),router['post'](a0_0x57bbfc(0x15a),async(_0x557665,_0x2ac0b6)=>{const _0x23d0bb=a0_0x57bbfc;try{const {warehouse_name:_0x58825d,cat:_0x5c0ce2,valNew:_0x244a7b}=_0x557665[_0x23d0bb(0x160)];var _0x278714='',_0x20bcc9='';if(_0x5c0ce2==_0x23d0bb(0x153))_0x278714=_0x23d0bb(0x174),_0x244a7b==_0x23d0bb(0x17c)?_0x20bcc9=[{'$match':{'status':_0x23d0bb(0x149),'warehouse_category':_0x5c0ce2,'name':{'$ne':_0x278714},'name':_0x23d0bb(0x14b)}},{'$group':{'_id':_0x23d0bb(0x134),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x20bcc9=[{'$match':{'status':_0x23d0bb(0x149),'warehouse_category':_0x5c0ce2,'name':{'$ne':_0x278714}}},{'$group':{'_id':_0x23d0bb(0x134),'room_name':{'$first':_0x23d0bb(0x134)}}},{'$sort':{'room_name':0x1}}];else _0x5c0ce2==_0x23d0bb(0x148)?(_0x278714='QA\x20Warehouse',_0x20bcc9=[{'$match':{'status':_0x23d0bb(0x149),'warehouse_category':_0x5c0ce2,'name':{'$ne':_0x278714}}},{'$group':{'_id':_0x23d0bb(0x134),'room_name':{'$first':_0x23d0bb(0x134)}}},{'$sort':{'room_name':0x1}}]):_0x20bcc9=[{'$match':{'status':_0x23d0bb(0x149)}},{'$group':{'_id':_0x23d0bb(0x134),'room_name':{'$first':_0x23d0bb(0x134)}}},{'$sort':{'room_name':0x1}}];const _0x13b9f5=await warehouse[_0x23d0bb(0x14c)](_0x20bcc9);_0x2ac0b6['status'](0xc8)['json'](_0x13b9f5);}catch(_0x4b249c){_0x2ac0b6['status'](0x190)['json']({'errorMessage':_0x4b249c[_0x23d0bb(0x159)]}),console[_0x23d0bb(0x167)](_0x4b249c);}}),router[a0_0x57bbfc(0x151)](a0_0x57bbfc(0x171),async(_0x2f58e1,_0x3364f8)=>{const _0x326fbe=a0_0x57bbfc;try{const {warehouse_name:_0x577cf4,cat:_0x31f187}=_0x2f58e1[_0x326fbe(0x160)],_0x1818e1=await warehouse[_0x326fbe(0x14c)]([{'$match':{'status':_0x326fbe(0x149),'warehouse_category':_0x31f187,'name':_0x577cf4}},{'$group':{'_id':_0x326fbe(0x17d),'room_name':{'$first':_0x326fbe(0x17d)}}},{'$sort':{'room_name':0x1}}]);_0x3364f8[_0x326fbe(0x13d)](0xc8)[_0x326fbe(0x17e)](_0x1818e1);}catch(_0x2b4417){_0x3364f8[_0x326fbe(0x13d)](0x190)[_0x326fbe(0x17e)]({'errorMessage':_0x2b4417['message']});}}),module['exports']=router;