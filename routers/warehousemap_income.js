function a0_0x1ecd(_0x1ad1d9,_0x20a281){const _0x13befa=a0_0x13be();return a0_0x1ecd=function(_0x1ecd7e,_0x2b4d42){_0x1ecd7e=_0x1ecd7e-0x1d1;let _0x3ce7c2=_0x13befa[_0x1ecd7e];return _0x3ce7c2;},a0_0x1ecd(_0x1ad1d9,_0x20a281);}const a0_0x573af8=a0_0x1ecd;(function(_0x22f23c,_0x1d16f4){const _0x33c6b0=a0_0x1ecd,_0x418af1=_0x22f23c();while(!![]){try{const _0x395e40=-parseInt(_0x33c6b0(0x1ff))/0x1+-parseInt(_0x33c6b0(0x218))/0x2+parseInt(_0x33c6b0(0x1fa))/0x3+-parseInt(_0x33c6b0(0x1d9))/0x4+-parseInt(_0x33c6b0(0x1e1))/0x5*(-parseInt(_0x33c6b0(0x20b))/0x6)+parseInt(_0x33c6b0(0x201))/0x7+-parseInt(_0x33c6b0(0x1ef))/0x8*(-parseInt(_0x33c6b0(0x1ea))/0x9);if(_0x395e40===_0x1d16f4)break;else _0x418af1['push'](_0x418af1['shift']());}catch(_0x3d3d46){_0x418af1['push'](_0x418af1['shift']());}}}(a0_0x13be,0x50084));const express=require(a0_0x573af8(0x1f1)),app=express(),router=express[a0_0x573af8(0x1e3)](),multer=require(a0_0x573af8(0x1f3)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x573af8(0x217)),auth=require(a0_0x573af8(0x1ee));function a0_0x13be(){const _0x20e5f4=['18cReSin','$product_details.floorlevel','flash','$count','../middleware/auth','3657656DUpZVg','German','express','DRY\x20STORAGE','multer','Finished\x20Goods','errors','find','$product_details','post','$room','161784fGSFoQ','$product_details.expiry_date','Raw\x20Materials','findOne','$batch_code','269394Eaavjy','$product_code','1752625RAKZny','$_id','../public/language/languages.json','$_id.bin','$product_details.product_code','body','raw','product','$_id.floorlevel','$product_details.product_stock','2453358otUIzu','timezone','message','$product_details.bin','$name','en-US','get','$expiry_date','English','Rack\x20A','render','$production_date','../models/all_models','999706QiOmxe','user','/Rooms_data3','staff','/view','language','$_id.bay','toLocaleString','QA\x20Warehouse','$$product.product_quantity','$_id.product','role','aggregate','Portuguese\x20(BR)','All','log','/MapData2','Chinese','$product_details.type','Spanish','json','email','$product_details.bay','$products','2122204qjvuxE','/Rooms_data2','status','/Rooms_data','timezones-list','Arabic','pack','French','5dIYtaV','success','Router','$product_details.product_name','warehouse','Hindi','Return\x20Goods','$product_details.production_date','Enabled'];a0_0x13be=function(){return _0x20e5f4;};return a0_0x13be();}var timezones=require(a0_0x573af8(0x1dd));const users=require(a0_0x573af8(0x203));router[a0_0x573af8(0x211)](a0_0x573af8(0x21c),auth,async(_0x305b02,_0x42d32d)=>{const _0x45721d=a0_0x573af8;try{const {username:_0x5bdd59,email:_0x48e37f,role:_0x4078fc}=_0x305b02[_0x45721d(0x219)],_0x494814=_0x305b02[_0x45721d(0x219)],_0x5f58df=await profile[_0x45721d(0x1fd)]({'email':_0x494814[_0x45721d(0x1d6)]}),_0x4b9afd=await master_shop[_0x45721d(0x1f6)]();console[_0x45721d(0x227)]('master',_0x4b9afd);let _0x23e3f2;if(_0x494814[_0x45721d(0x223)]==_0x45721d(0x21b)){const _0x4e0e39=await staff['findOne']({'email':_0x494814[_0x45721d(0x1d6)]});_0x23e3f2=await warehouse[_0x45721d(0x224)]([{'$match':{'status':_0x45721d(0x1e9),'name':_0x4e0e39[_0x45721d(0x1e5)]}},{'$group':{'_id':'$name','name':{'$first':_0x45721d(0x20f)}}}]);}else _0x23e3f2=await warehouse['aggregate']([{'$match':{'status':_0x45721d(0x1e9)}},{'$group':{'_id':'$name','name':{'$first':_0x45721d(0x20f)}}}]);const _0x1d8d68=new Date()[_0x45721d(0x21f)](_0x45721d(0x210),{'timeZone':_0x4b9afd[0x0][_0x45721d(0x20c)]});console[_0x45721d(0x227)](_0x45721d(0x20c),_0x1d8d68);if(_0x4b9afd[0x0][_0x45721d(0x21d)]=='English\x20(US)'){var _0x4bfcd8=users[_0x45721d(0x213)];console['log'](_0x4bfcd8);}else{if(_0x4b9afd[0x0][_0x45721d(0x21d)]=='Hindi')var _0x4bfcd8=users[_0x45721d(0x1e6)];else{if(_0x4b9afd[0x0]['language']==_0x45721d(0x1f0))var _0x4bfcd8=users[_0x45721d(0x1f0)];else{if(_0x4b9afd[0x0]['language']==_0x45721d(0x1d4))var _0x4bfcd8=users['Spanish'];else{if(_0x4b9afd[0x0]['language']=='French')var _0x4bfcd8=users[_0x45721d(0x1e0)];else{if(_0x4b9afd[0x0][_0x45721d(0x21d)]==_0x45721d(0x225))var _0x4bfcd8=users['Portuguese'];else{if(_0x4b9afd[0x0][_0x45721d(0x21d)]==_0x45721d(0x1d2))var _0x4bfcd8=users[_0x45721d(0x1d2)];else{if(_0x4b9afd[0x0][_0x45721d(0x21d)]=='Arabic\x20(ae)')var _0x4bfcd8=users[_0x45721d(0x1de)];}}}}}}}_0x42d32d[_0x45721d(0x215)]('warehousemap_incoming',{'success':_0x305b02['flash'](_0x45721d(0x1e2)),'errors':_0x305b02[_0x45721d(0x1ec)](_0x45721d(0x1f5)),'role':_0x494814,'profile':_0x5f58df,'master_shop':_0x4b9afd,'timezones':timezones,'language':_0x4bfcd8,'warehouse':_0x23e3f2});}catch(_0x1da412){console[_0x45721d(0x227)](_0x1da412),_0x42d32d['status'](0xc8)[_0x45721d(0x1d5)]({'message':_0x1da412[_0x45721d(0x20d)]});}}),router['post']('/MapData',async(_0x14acc7,_0x304ae2)=>{const _0x515e4d=a0_0x573af8,{warehouseNew:_0x26ce7d,rooms:_0x51a183,Type:_0x5af777}=_0x14acc7['body'],_0x1d3746=await warehouse['aggregate']([{'$unwind':_0x515e4d(0x1f7)},{'$match':{'name':_0x26ce7d,'room':_0x51a183,'product_details.type':_0x5af777}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x515e4d(0x20e),'type':_0x515e4d(0x1d3),'floorlevel':_0x515e4d(0x1eb)},'products':{'$push':{'product_name':_0x515e4d(0x1e4),'product_quantity':_0x515e4d(0x20a),'product_code':_0x515e4d(0x205)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x515e4d(0x20a),0x0]},'then':_0x515e4d(0x20a),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x515e4d(0x21e),'bin':_0x515e4d(0x204),'type':'$_id.type','floorlevel':_0x515e4d(0x209),'products':{'$filter':{'input':_0x515e4d(0x1d8),'as':_0x515e4d(0x208),'cond':{'$gt':[_0x515e4d(0x221),0x0]}}},'totalQuantity':0x1}}]);_0x304ae2['json'](_0x1d3746);}),router['post'](a0_0x573af8(0x1d1),async(_0x3c4b17,_0x3766cf)=>{const _0x92e87c=a0_0x573af8,{warehouseNew:_0x17d2cb,rooms:_0x215ae5,room_cat:_0x1980bd}=_0x3c4b17[_0x92e87c(0x206)];let _0x1f39de;if(_0x1980bd==_0x92e87c(0x226))_0x1f39de=await warehouse[_0x92e87c(0x224)]([{'$unwind':_0x92e87c(0x1f7)},{'$match':{'name':_0x17d2cb}},{'$group':{'_id':{'bay':_0x92e87c(0x1d7),'product':_0x92e87c(0x1e4),'expiry':_0x92e87c(0x1fb)},'count':{'$sum':_0x92e87c(0x20a)},'production_date':{'$first':_0x92e87c(0x1e8)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x92e87c(0x205)}}},{'$group':{'_id':_0x92e87c(0x21e),'products':{'$push':{'product':_0x92e87c(0x222),'quantity':_0x92e87c(0x1ed),'production_date':_0x92e87c(0x216),'expiry_date':_0x92e87c(0x212),'batch_code':_0x92e87c(0x1fe),'product_code':_0x92e87c(0x200)}},'totalQuantity':{'$sum':_0x92e87c(0x1ed)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x1980bd);else{}_0x3766cf[_0x92e87c(0x1d5)](_0x1f39de);}),router[a0_0x573af8(0x1f8)](a0_0x573af8(0x1dc),async(_0x2597d5,_0x2eb274)=>{const _0x568f5d=a0_0x573af8;try{const {warehouse_name:_0x2ad244,A:_0x462363,B:_0x501585}=_0x2597d5[_0x568f5d(0x206)];var _0x1f6a01='';_0x462363==_0x568f5d(0x207)?_0x501585==_0x568f5d(0x1df)?_0x1f6a01=[{'$match':{'name':_0x2ad244,'status':_0x568f5d(0x1e9),'room':_0x568f5d(0x214)}},{'$group':{'_id':_0x568f5d(0x202),'room_name':{'$first':_0x568f5d(0x1f9)}}},{'$sort':{'room_name':0x1}}]:_0x1f6a01=[{'$match':{'name':_0x2ad244,'status':_0x568f5d(0x1e9)}},{'$group':{'_id':_0x568f5d(0x202),'room_name':{'$first':_0x568f5d(0x1f9)}}},{'$sort':{'room_name':0x1}}]:_0x1f6a01=[{'$match':{'name':_0x2ad244,'status':_0x568f5d(0x1e9)}},{'$group':{'_id':_0x568f5d(0x202),'room_name':{'$first':_0x568f5d(0x1f9)}}},{'$sort':{'room_name':0x1}}];const _0x2b5e37=await warehouse['aggregate'](_0x1f6a01);_0x2eb274[_0x568f5d(0x1db)](0xc8)[_0x568f5d(0x1d5)](_0x2b5e37);}catch(_0x548d81){_0x2eb274[_0x568f5d(0x1db)](0x190)[_0x568f5d(0x1d5)]({'errorMessage':_0x548d81['message']});}}),router[a0_0x573af8(0x1f8)](a0_0x573af8(0x1da),async(_0x495574,_0x2f5b78)=>{const _0x42b832=a0_0x573af8;try{const {warehouse_name:_0x28bebf,cat:_0x5eaaf2,valNew:_0x49674b}=_0x495574[_0x42b832(0x206)];var _0x5560c1='',_0x40d72d='';if(_0x5eaaf2==_0x42b832(0x1fc))_0x5560c1=_0x42b832(0x1e7),_0x49674b=='pack'?_0x40d72d=[{'$match':{'status':_0x42b832(0x1e9),'warehouse_category':_0x5eaaf2,'name':{'$ne':_0x5560c1},'name':_0x42b832(0x1f2)}},{'$group':{'_id':'$name','room_name':{'$first':_0x42b832(0x20f)}}},{'$sort':{'room_name':0x1}}]:_0x40d72d=[{'$match':{'status':_0x42b832(0x1e9),'warehouse_category':_0x5eaaf2,'name':{'$ne':_0x5560c1}}},{'$group':{'_id':_0x42b832(0x20f),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x5eaaf2==_0x42b832(0x1f4)?(_0x5560c1=_0x42b832(0x220),_0x40d72d=[{'$match':{'status':_0x42b832(0x1e9),'warehouse_category':_0x5eaaf2,'name':{'$ne':_0x5560c1}}},{'$group':{'_id':_0x42b832(0x20f),'room_name':{'$first':_0x42b832(0x20f)}}},{'$sort':{'room_name':0x1}}]):_0x40d72d=[{'$match':{'status':_0x42b832(0x1e9)}},{'$group':{'_id':_0x42b832(0x20f),'room_name':{'$first':_0x42b832(0x20f)}}},{'$sort':{'room_name':0x1}}];const _0x946c96=await warehouse[_0x42b832(0x224)](_0x40d72d);_0x2f5b78[_0x42b832(0x1db)](0xc8)[_0x42b832(0x1d5)](_0x946c96);}catch(_0x145a8e){_0x2f5b78['status'](0x190)[_0x42b832(0x1d5)]({'errorMessage':_0x145a8e[_0x42b832(0x20d)]}),console['log'](_0x145a8e);}}),router[a0_0x573af8(0x1f8)](a0_0x573af8(0x21a),async(_0x8ec646,_0x584346)=>{const _0x210101=a0_0x573af8;try{const {warehouse_name:_0x57d0d1,cat:_0x470b63}=_0x8ec646[_0x210101(0x206)],_0x25b5fa=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x470b63,'name':_0x57d0d1}},{'$group':{'_id':_0x210101(0x1f9),'room_name':{'$first':_0x210101(0x1f9)}}},{'$sort':{'room_name':0x1}}]);_0x584346[_0x210101(0x1db)](0xc8)[_0x210101(0x1d5)](_0x25b5fa);}catch(_0x3d64a9){_0x584346['status'](0x190)[_0x210101(0x1d5)]({'errorMessage':_0x3d64a9[_0x210101(0x20d)]});}}),module['exports']=router;