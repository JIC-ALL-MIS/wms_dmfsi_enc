const a0_0x570ca9=a0_0x161c;(function(_0x55ffc7,_0x3d70bb){const _0x575426=a0_0x161c,_0xf11191=_0x55ffc7();while(!![]){try{const _0x4bb28e=parseInt(_0x575426(0x12d))/0x1+parseInt(_0x575426(0x129))/0x2*(parseInt(_0x575426(0x122))/0x3)+-parseInt(_0x575426(0x106))/0x4*(-parseInt(_0x575426(0x116))/0x5)+parseInt(_0x575426(0x113))/0x6*(-parseInt(_0x575426(0x109))/0x7)+-parseInt(_0x575426(0x154))/0x8*(-parseInt(_0x575426(0x121))/0x9)+-parseInt(_0x575426(0x135))/0xa*(parseInt(_0x575426(0x134))/0xb)+-parseInt(_0x575426(0x11c))/0xc*(parseInt(_0x575426(0x107))/0xd);if(_0x4bb28e===_0x3d70bb)break;else _0xf11191['push'](_0xf11191['shift']());}catch(_0x295895){_0xf11191['push'](_0xf11191['shift']());}}}(a0_0x4e08,0x66096));function a0_0x4e08(){const _0x48f875=['Finished\x20Goods','200aZyCmG','$_id.type','body','../middleware/auth','role','/Rooms_data','$room','English\x20(US)','$product_code','findOne','2349992IIpqij','664859oJTaqd','flash','9821pkWUqo','$products','$product_details.bay','en-US','$_id.bay','Spanish','email','get','English','/MapData','1074HpmDAa','post','Hindi','5PogVYz','multer','success','message','log','Raw\x20Materials','228xnBrlv','$product_details','toLocaleString','language','Arabic\x20(ae)','75708AhrRag','3207SgnfeF','$count','$product_details.expiry_date','$production_date','Chinese','../public/language/languages.json','$_id.floorlevel','878bqwVau','German','timezone','$product_details.bin','779894iSUJPU','$_id.product','$product_details.batch_code','json','timezones-list','$product_details.floorlevel','status','451CAaarg','99070PYTbSK','staff','French','render','$$product.product_quantity','$product_details.product_stock','aggregate','All','$product_details.product_code','$name','$product_details.production_date','warehouse','/view','master','user','$_id','pack','../models/all_models','Enabled','Portuguese','$_id.bin','$product_details.product_name','warehousemap_incoming','$expiry_date','Arabic','raw','/MapData2','/Rooms_data2','/Rooms_data3','DRY\x20STORAGE'];a0_0x4e08=function(){return _0x48f875;};return a0_0x4e08();}const express=require('express'),app=express(),router=express['Router'](),multer=require(a0_0x570ca9(0x117)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x570ca9(0x146)),auth=require(a0_0x570ca9(0x157));function a0_0x161c(_0x534d5b,_0x3b97f6){const _0x4e0814=a0_0x4e08();return a0_0x161c=function(_0x161c2d,_0x333192){_0x161c2d=_0x161c2d-0x100;let _0x4bbb4f=_0x4e0814[_0x161c2d];return _0x4bbb4f;},a0_0x161c(_0x534d5b,_0x3b97f6);}var timezones=require(a0_0x570ca9(0x131));const users=require(a0_0x570ca9(0x127));router[a0_0x570ca9(0x110)](a0_0x570ca9(0x141),auth,async(_0x3edd8c,_0x23a673)=>{const _0x3670f8=a0_0x570ca9;try{const {username:_0x2b69c6,email:_0x595227,role:_0x1c2881}=_0x3edd8c['user'],_0x296138=_0x3edd8c[_0x3670f8(0x143)],_0x3b08a3=await profile[_0x3670f8(0x105)]({'email':_0x296138[_0x3670f8(0x10f)]}),_0x48a24e=await master_shop['find']();console['log'](_0x3670f8(0x142),_0x48a24e);let _0x2ba862;if(_0x296138[_0x3670f8(0x100)]==_0x3670f8(0x136)){const _0x4810ba=await staff['findOne']({'email':_0x296138['email']});_0x2ba862=await warehouse[_0x3670f8(0x13b)]([{'$match':{'status':_0x3670f8(0x147),'name':_0x4810ba[_0x3670f8(0x140)]}},{'$group':{'_id':'$name','name':{'$first':_0x3670f8(0x13e)}}}]);}else _0x2ba862=await warehouse[_0x3670f8(0x13b)]([{'$match':{'status':_0x3670f8(0x147)}},{'$group':{'_id':_0x3670f8(0x13e),'name':{'$first':'$name'}}}]);const _0x126207=new Date()[_0x3670f8(0x11e)](_0x3670f8(0x10c),{'timeZone':_0x48a24e[0x0][_0x3670f8(0x12b)]});console[_0x3670f8(0x11a)](_0x3670f8(0x12b),_0x126207);if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x103)){var _0x1a706e=users[_0x3670f8(0x111)];console[_0x3670f8(0x11a)](_0x1a706e);}else{if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x115))var _0x1a706e=users[_0x3670f8(0x115)];else{if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x12a))var _0x1a706e=users[_0x3670f8(0x12a)];else{if(_0x48a24e[0x0]['language']=='Spanish')var _0x1a706e=users[_0x3670f8(0x10e)];else{if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x137))var _0x1a706e=users[_0x3670f8(0x137)];else{if(_0x48a24e[0x0]['language']=='Portuguese\x20(BR)')var _0x1a706e=users[_0x3670f8(0x148)];else{if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x126))var _0x1a706e=users[_0x3670f8(0x126)];else{if(_0x48a24e[0x0][_0x3670f8(0x11f)]==_0x3670f8(0x120))var _0x1a706e=users[_0x3670f8(0x14d)];}}}}}}}_0x23a673[_0x3670f8(0x138)](_0x3670f8(0x14b),{'success':_0x3edd8c[_0x3670f8(0x108)](_0x3670f8(0x118)),'errors':_0x3edd8c['flash']('errors'),'role':_0x296138,'profile':_0x3b08a3,'master_shop':_0x48a24e,'timezones':timezones,'language':_0x1a706e,'warehouse':_0x2ba862});}catch(_0x159a9d){console['log'](_0x159a9d),_0x23a673[_0x3670f8(0x133)](0xc8)['json']({'message':_0x159a9d[_0x3670f8(0x119)]});}}),router['post'](a0_0x570ca9(0x112),async(_0x2c3f61,_0x56657)=>{const _0x28258d=a0_0x570ca9,{warehouseNew:_0x1e2814,rooms:_0x14a211,Type:_0x5f0e2e}=_0x2c3f61[_0x28258d(0x156)],_0x43683e=await warehouse['aggregate']([{'$unwind':_0x28258d(0x11d)},{'$match':{'name':_0x1e2814,'room':_0x14a211,'product_details.type':_0x5f0e2e}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x28258d(0x12c),'type':'$product_details.type','floorlevel':_0x28258d(0x132)},'products':{'$push':{'product_name':_0x28258d(0x14a),'product_quantity':_0x28258d(0x13a),'product_code':_0x28258d(0x13d)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x28258d(0x13a),0x0]},'then':_0x28258d(0x13a),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x28258d(0x10d),'bin':_0x28258d(0x149),'type':_0x28258d(0x155),'floorlevel':_0x28258d(0x128),'products':{'$filter':{'input':_0x28258d(0x10a),'as':'product','cond':{'$gt':[_0x28258d(0x139),0x0]}}},'totalQuantity':0x1}}]);_0x56657[_0x28258d(0x130)](_0x43683e);}),router[a0_0x570ca9(0x114)](a0_0x570ca9(0x14f),async(_0x337222,_0x44043b)=>{const _0x56b197=a0_0x570ca9,{warehouseNew:_0x4664d1,rooms:_0x2cdda5,room_cat:_0x1a1249}=_0x337222[_0x56b197(0x156)];let _0x19b5a1;if(_0x1a1249==_0x56b197(0x13c))_0x19b5a1=await warehouse[_0x56b197(0x13b)]([{'$unwind':_0x56b197(0x11d)},{'$match':{'name':_0x4664d1}},{'$group':{'_id':{'bay':_0x56b197(0x10b),'product':_0x56b197(0x14a),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x56b197(0x13a)},'production_date':{'$first':_0x56b197(0x13f)},'expiry_date':{'$first':_0x56b197(0x124)},'batch_code':{'$first':_0x56b197(0x12f)},'product_code':{'$first':_0x56b197(0x13d)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x56b197(0x12e),'quantity':_0x56b197(0x123),'production_date':_0x56b197(0x125),'expiry_date':_0x56b197(0x14c),'batch_code':'$batch_code','product_code':_0x56b197(0x104)}},'totalQuantity':{'$sum':_0x56b197(0x123)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x56b197(0x11a)](_0x1a1249);else{}_0x44043b['json'](_0x19b5a1);}),router[a0_0x570ca9(0x114)](a0_0x570ca9(0x101),async(_0x289961,_0x1c3bd5)=>{const _0x3f911a=a0_0x570ca9;try{const {warehouse_name:_0x5b0e13,A:_0x22eba7,B:_0x562040}=_0x289961[_0x3f911a(0x156)];var _0x124529='';_0x22eba7==_0x3f911a(0x14e)?_0x562040=='pack'?_0x124529=[{'$match':{'name':_0x5b0e13,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x124529=[{'$match':{'name':_0x5b0e13,'status':_0x3f911a(0x147)}},{'$group':{'_id':_0x3f911a(0x144),'room_name':{'$first':_0x3f911a(0x102)}}},{'$sort':{'room_name':0x1}}]:_0x124529=[{'$match':{'name':_0x5b0e13,'status':_0x3f911a(0x147)}},{'$group':{'_id':_0x3f911a(0x144),'room_name':{'$first':_0x3f911a(0x102)}}},{'$sort':{'room_name':0x1}}];const _0x26ce10=await warehouse[_0x3f911a(0x13b)](_0x124529);_0x1c3bd5['status'](0xc8)['json'](_0x26ce10);}catch(_0x41dc15){_0x1c3bd5[_0x3f911a(0x133)](0x190)[_0x3f911a(0x130)]({'errorMessage':_0x41dc15[_0x3f911a(0x119)]});}}),router[a0_0x570ca9(0x114)](a0_0x570ca9(0x150),async(_0x1e6fda,_0x49cea1)=>{const _0x5c1d64=a0_0x570ca9;try{const {warehouse_name:_0x39a0e5,cat:_0x148d7b,valNew:_0x4915fa}=_0x1e6fda[_0x5c1d64(0x156)];var _0x9802ac='',_0x39ce4e='';if(_0x148d7b==_0x5c1d64(0x11b))_0x9802ac='Return\x20Goods',_0x4915fa==_0x5c1d64(0x145)?_0x39ce4e=[{'$match':{'status':_0x5c1d64(0x147),'warehouse_category':_0x148d7b,'name':{'$ne':_0x9802ac},'name':_0x5c1d64(0x152)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x39ce4e=[{'$match':{'status':'Enabled','warehouse_category':_0x148d7b,'name':{'$ne':_0x9802ac}}},{'$group':{'_id':_0x5c1d64(0x13e),'room_name':{'$first':_0x5c1d64(0x13e)}}},{'$sort':{'room_name':0x1}}];else _0x148d7b==_0x5c1d64(0x153)?(_0x9802ac='QA\x20Warehouse',_0x39ce4e=[{'$match':{'status':_0x5c1d64(0x147),'warehouse_category':_0x148d7b,'name':{'$ne':_0x9802ac}}},{'$group':{'_id':_0x5c1d64(0x13e),'room_name':{'$first':_0x5c1d64(0x13e)}}},{'$sort':{'room_name':0x1}}]):_0x39ce4e=[{'$match':{'status':_0x5c1d64(0x147)}},{'$group':{'_id':_0x5c1d64(0x13e),'room_name':{'$first':_0x5c1d64(0x13e)}}},{'$sort':{'room_name':0x1}}];const _0x51d495=await warehouse[_0x5c1d64(0x13b)](_0x39ce4e);_0x49cea1[_0x5c1d64(0x133)](0xc8)[_0x5c1d64(0x130)](_0x51d495);}catch(_0x286f7b){_0x49cea1[_0x5c1d64(0x133)](0x190)[_0x5c1d64(0x130)]({'errorMessage':_0x286f7b[_0x5c1d64(0x119)]}),console[_0x5c1d64(0x11a)](_0x286f7b);}}),router[a0_0x570ca9(0x114)](a0_0x570ca9(0x151),async(_0x595e6c,_0x44254d)=>{const _0x312224=a0_0x570ca9;try{const {warehouse_name:_0xc60f75,cat:_0x5b2c69}=_0x595e6c[_0x312224(0x156)],_0x32dcad=await warehouse[_0x312224(0x13b)]([{'$match':{'status':'Enabled','warehouse_category':_0x5b2c69,'name':_0xc60f75}},{'$group':{'_id':'$room','room_name':{'$first':_0x312224(0x102)}}},{'$sort':{'room_name':0x1}}]);_0x44254d['status'](0xc8)[_0x312224(0x130)](_0x32dcad);}catch(_0x29e666){_0x44254d['status'](0x190)['json']({'errorMessage':_0x29e666[_0x312224(0x119)]});}}),module['exports']=router;