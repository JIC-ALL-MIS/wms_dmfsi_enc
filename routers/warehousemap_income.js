const a0_0x6a28f7=a0_0x18c3;(function(_0x2339b9,_0x53e561){const _0x536245=a0_0x18c3,_0x53dcc1=_0x2339b9();while(!![]){try{const _0x9e6cc2=parseInt(_0x536245(0x13e))/0x1+-parseInt(_0x536245(0x156))/0x2+-parseInt(_0x536245(0x184))/0x3*(parseInt(_0x536245(0x148))/0x4)+parseInt(_0x536245(0x155))/0x5*(parseInt(_0x536245(0x153))/0x6)+-parseInt(_0x536245(0x169))/0x7+-parseInt(_0x536245(0x146))/0x8*(parseInt(_0x536245(0x147))/0x9)+-parseInt(_0x536245(0x17b))/0xa*(-parseInt(_0x536245(0x188))/0xb);if(_0x9e6cc2===_0x53e561)break;else _0x53dcc1['push'](_0x53dcc1['shift']());}catch(_0x50b176){_0x53dcc1['push'](_0x53dcc1['shift']());}}}(a0_0x24b9,0x54b06));const express=require(a0_0x6a28f7(0x175)),app=express(),router=express[a0_0x6a28f7(0x143)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x6a28f7(0x152)),auth=require('../middleware/auth');function a0_0x24b9(){const _0x447328=['/Rooms_data2','raw','pack','user','timezones-list','en-US','status','$_id.type','$product_details.product_name','$product_code','/MapData','master','$name','Arabic','$product_details.batch_code','/MapData2','868112VlONbk','$product_details.product_code','Spanish','Enabled','$products','$_id','German','language','$product_details.bay','find','success','$product_details','express','email','aggregate','$product_details.production_date','staff','$count','4384280fJqPJe','$_id.product','json','All','$product_details.product_stock','QA\x20Warehouse','post','$$product.product_quantity','/Rooms_data','442722xrjtEM','Portuguese','toLocaleString','/Rooms_data3','11IlkbCM','Portuguese\x20(BR)','$_id.bin','body','warehousemap_incoming','DRY\x20STORAGE','Return\x20Goods','$expiry_date','375529iWIRca','flash','warehouse','Chinese','$batch_code','Router','$room','product','55848ZIlWQc','558tKhmAK','8dEHDea','timezone','findOne','Hindi','$_id.bay','$product_details.bin','log','$product_details.expiry_date','message','exports','../models/all_models','144RTDyaQ','French','88640pFelMx','81114HwmOzB','/view','$_id.floorlevel'];a0_0x24b9=function(){return _0x447328;};return a0_0x24b9();}var timezones=require(a0_0x6a28f7(0x15d));function a0_0x18c3(_0x48fa3b,_0x1589cb){const _0x24b91b=a0_0x24b9();return a0_0x18c3=function(_0x18c336,_0x27694a){_0x18c336=_0x18c336-0x13a;let _0x48ce8f=_0x24b91b[_0x18c336];return _0x48ce8f;},a0_0x18c3(_0x48fa3b,_0x1589cb);}const users=require('../public/language/languages.json');router['get'](a0_0x6a28f7(0x157),auth,async(_0x1086b5,_0x38e4c4)=>{const _0x399243=a0_0x6a28f7;try{const {username:_0x1dd27e,email:_0x419271,role:_0x145a82}=_0x1086b5[_0x399243(0x15c)],_0x4bb18d=_0x1086b5[_0x399243(0x15c)],_0x11c10b=await profile[_0x399243(0x14a)]({'email':_0x4bb18d[_0x399243(0x176)]}),_0xc89fb4=await master_shop[_0x399243(0x172)]();console[_0x399243(0x14e)](_0x399243(0x164),_0xc89fb4);let _0x13c96c;if(_0x4bb18d['role']==_0x399243(0x179)){const _0x28ee13=await staff[_0x399243(0x14a)]({'email':_0x4bb18d['email']});_0x13c96c=await warehouse[_0x399243(0x177)]([{'$match':{'status':_0x399243(0x16c),'name':_0x28ee13[_0x399243(0x140)]}},{'$group':{'_id':_0x399243(0x165),'name':{'$first':'$name'}}}]);}else _0x13c96c=await warehouse[_0x399243(0x177)]([{'$match':{'status':_0x399243(0x16c)}},{'$group':{'_id':_0x399243(0x165),'name':{'$first':_0x399243(0x165)}}}]);const _0x4a2db4=new Date()[_0x399243(0x186)](_0x399243(0x15e),{'timeZone':_0xc89fb4[0x0][_0x399243(0x149)]});console[_0x399243(0x14e)](_0x399243(0x149),_0x4a2db4);if(_0xc89fb4[0x0][_0x399243(0x170)]=='English\x20(US)'){var _0x4fb0f1=users['English'];console[_0x399243(0x14e)](_0x4fb0f1);}else{if(_0xc89fb4[0x0]['language']=='Hindi')var _0x4fb0f1=users[_0x399243(0x14b)];else{if(_0xc89fb4[0x0][_0x399243(0x170)]==_0x399243(0x16f))var _0x4fb0f1=users[_0x399243(0x16f)];else{if(_0xc89fb4[0x0][_0x399243(0x170)]==_0x399243(0x16b))var _0x4fb0f1=users[_0x399243(0x16b)];else{if(_0xc89fb4[0x0]['language']==_0x399243(0x154))var _0x4fb0f1=users[_0x399243(0x154)];else{if(_0xc89fb4[0x0][_0x399243(0x170)]==_0x399243(0x189))var _0x4fb0f1=users[_0x399243(0x185)];else{if(_0xc89fb4[0x0][_0x399243(0x170)]==_0x399243(0x141))var _0x4fb0f1=users[_0x399243(0x141)];else{if(_0xc89fb4[0x0][_0x399243(0x170)]=='Arabic\x20(ae)')var _0x4fb0f1=users[_0x399243(0x166)];}}}}}}}_0x38e4c4['render'](_0x399243(0x13a),{'success':_0x1086b5[_0x399243(0x13f)](_0x399243(0x173)),'errors':_0x1086b5[_0x399243(0x13f)]('errors'),'role':_0x4bb18d,'profile':_0x11c10b,'master_shop':_0xc89fb4,'timezones':timezones,'language':_0x4fb0f1,'warehouse':_0x13c96c});}catch(_0x58dc58){console[_0x399243(0x14e)](_0x58dc58),_0x38e4c4[_0x399243(0x15f)](0xc8)[_0x399243(0x17d)]({'message':_0x58dc58[_0x399243(0x150)]});}}),router[a0_0x6a28f7(0x181)](a0_0x6a28f7(0x163),async(_0x16f326,_0x45e585)=>{const _0x261e19=a0_0x6a28f7,{warehouseNew:_0x5d65d6,rooms:_0x34c58b,Type:_0x53338c}=_0x16f326[_0x261e19(0x18b)],_0x4b73a2=await warehouse['aggregate']([{'$unwind':_0x261e19(0x174)},{'$match':{'name':_0x5d65d6,'room':_0x34c58b,'product_details.type':_0x53338c}},{'$group':{'_id':{'bay':_0x261e19(0x171),'bin':_0x261e19(0x14d),'type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x261e19(0x17f),'product_code':_0x261e19(0x16a)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x261e19(0x17f),0x0]},'then':_0x261e19(0x17f),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x261e19(0x14c),'bin':_0x261e19(0x18a),'type':_0x261e19(0x160),'floorlevel':_0x261e19(0x158),'products':{'$filter':{'input':_0x261e19(0x16d),'as':_0x261e19(0x145),'cond':{'$gt':[_0x261e19(0x182),0x0]}}},'totalQuantity':0x1}}]);_0x45e585[_0x261e19(0x17d)](_0x4b73a2);}),router['post'](a0_0x6a28f7(0x168),async(_0x261c7c,_0x16d4fb)=>{const _0x46316c=a0_0x6a28f7,{warehouseNew:_0x4f1491,rooms:_0x325784,room_cat:_0x3dd8ab}=_0x261c7c[_0x46316c(0x18b)];let _0x3fddd3;if(_0x3dd8ab==_0x46316c(0x17e))_0x3fddd3=await warehouse['aggregate']([{'$unwind':_0x46316c(0x174)},{'$match':{'name':_0x4f1491}},{'$group':{'_id':{'bay':_0x46316c(0x171),'product':_0x46316c(0x161),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x46316c(0x17f)},'production_date':{'$first':_0x46316c(0x178)},'expiry_date':{'$first':_0x46316c(0x14f)},'batch_code':{'$first':_0x46316c(0x167)},'product_code':{'$first':_0x46316c(0x16a)}}},{'$group':{'_id':_0x46316c(0x14c),'products':{'$push':{'product':_0x46316c(0x17c),'quantity':_0x46316c(0x17a),'production_date':'$production_date','expiry_date':_0x46316c(0x13d),'batch_code':_0x46316c(0x142),'product_code':_0x46316c(0x162)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x46316c(0x14e)](_0x3dd8ab);else{}_0x16d4fb['json'](_0x3fddd3);}),router[a0_0x6a28f7(0x181)](a0_0x6a28f7(0x183),async(_0x424c0a,_0x566472)=>{const _0x44ebb0=a0_0x6a28f7;try{const {warehouse_name:_0x3740a7,A:_0x2bca37,B:_0x44682d}=_0x424c0a[_0x44ebb0(0x18b)];var _0x1e78b='';_0x2bca37==_0x44ebb0(0x15a)?_0x44682d==_0x44ebb0(0x15b)?_0x1e78b=[{'$match':{'name':_0x3740a7,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':_0x44ebb0(0x16e),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x1e78b=[{'$match':{'name':_0x3740a7,'status':_0x44ebb0(0x16c)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x44ebb0(0x144)}}},{'$sort':{'room_name':0x1}}]:_0x1e78b=[{'$match':{'name':_0x3740a7,'status':_0x44ebb0(0x16c)}},{'$group':{'_id':_0x44ebb0(0x16e),'room_name':{'$first':_0x44ebb0(0x144)}}},{'$sort':{'room_name':0x1}}];const _0x41f611=await warehouse[_0x44ebb0(0x177)](_0x1e78b);_0x566472[_0x44ebb0(0x15f)](0xc8)[_0x44ebb0(0x17d)](_0x41f611);}catch(_0x4ea8bd){_0x566472[_0x44ebb0(0x15f)](0x190)[_0x44ebb0(0x17d)]({'errorMessage':_0x4ea8bd[_0x44ebb0(0x150)]});}}),router[a0_0x6a28f7(0x181)](a0_0x6a28f7(0x159),async(_0x37493e,_0xa6ad3e)=>{const _0xa1bdb1=a0_0x6a28f7;try{const {warehouse_name:_0x3ac15f,cat:_0x2c94d0,valNew:_0x3b0e96}=_0x37493e[_0xa1bdb1(0x18b)];var _0x1631be='',_0x3270b8='';if(_0x2c94d0=='Raw\x20Materials')_0x1631be=_0xa1bdb1(0x13c),_0x3b0e96=='pack'?_0x3270b8=[{'$match':{'status':_0xa1bdb1(0x16c),'warehouse_category':_0x2c94d0,'name':{'$ne':_0x1631be},'name':_0xa1bdb1(0x13b)}},{'$group':{'_id':_0xa1bdb1(0x165),'room_name':{'$first':_0xa1bdb1(0x165)}}},{'$sort':{'room_name':0x1}}]:_0x3270b8=[{'$match':{'status':_0xa1bdb1(0x16c),'warehouse_category':_0x2c94d0,'name':{'$ne':_0x1631be}}},{'$group':{'_id':'$name','room_name':{'$first':_0xa1bdb1(0x165)}}},{'$sort':{'room_name':0x1}}];else _0x2c94d0=='Finished\x20Goods'?(_0x1631be=_0xa1bdb1(0x180),_0x3270b8=[{'$match':{'status':_0xa1bdb1(0x16c),'warehouse_category':_0x2c94d0,'name':{'$ne':_0x1631be}}},{'$group':{'_id':_0xa1bdb1(0x165),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x3270b8=[{'$match':{'status':_0xa1bdb1(0x16c)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x58cab9=await warehouse[_0xa1bdb1(0x177)](_0x3270b8);_0xa6ad3e['status'](0xc8)[_0xa1bdb1(0x17d)](_0x58cab9);}catch(_0x1c19a7){_0xa6ad3e[_0xa1bdb1(0x15f)](0x190)['json']({'errorMessage':_0x1c19a7[_0xa1bdb1(0x150)]}),console[_0xa1bdb1(0x14e)](_0x1c19a7);}}),router[a0_0x6a28f7(0x181)](a0_0x6a28f7(0x187),async(_0x1e488a,_0x5afe96)=>{const _0x1b0eaf=a0_0x6a28f7;try{const {warehouse_name:_0x382cd6,cat:_0x266a7d}=_0x1e488a[_0x1b0eaf(0x18b)],_0x311186=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x266a7d,'name':_0x382cd6}},{'$group':{'_id':_0x1b0eaf(0x144),'room_name':{'$first':_0x1b0eaf(0x144)}}},{'$sort':{'room_name':0x1}}]);_0x5afe96['status'](0xc8)[_0x1b0eaf(0x17d)](_0x311186);}catch(_0x1f1a1d){_0x5afe96[_0x1b0eaf(0x15f)](0x190)[_0x1b0eaf(0x17d)]({'errorMessage':_0x1f1a1d[_0x1b0eaf(0x150)]});}}),module[a0_0x6a28f7(0x151)]=router;