const a0_0x498d98=a0_0x2c90;(function(_0x3ca0c7,_0x389a56){const _0x14d2f6=a0_0x2c90,_0x49b49d=_0x3ca0c7();while(!![]){try{const _0x3f99c6=-parseInt(_0x14d2f6(0x20f))/0x1*(parseInt(_0x14d2f6(0x22a))/0x2)+parseInt(_0x14d2f6(0x229))/0x3+parseInt(_0x14d2f6(0x213))/0x4*(parseInt(_0x14d2f6(0x23a))/0x5)+-parseInt(_0x14d2f6(0x202))/0x6*(-parseInt(_0x14d2f6(0x1fb))/0x7)+-parseInt(_0x14d2f6(0x22c))/0x8*(-parseInt(_0x14d2f6(0x22e))/0x9)+-parseInt(_0x14d2f6(0x228))/0xa*(parseInt(_0x14d2f6(0x1f7))/0xb)+-parseInt(_0x14d2f6(0x21d))/0xc*(parseInt(_0x14d2f6(0x21b))/0xd);if(_0x3f99c6===_0x389a56)break;else _0x49b49d['push'](_0x49b49d['shift']());}catch(_0x595e4e){_0x49b49d['push'](_0x49b49d['shift']());}}}(a0_0xeca2,0x99864));const express=require(a0_0x498d98(0x230)),app=express(),router=express[a0_0x498d98(0x205)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x498d98(0x1f5)),auth=require(a0_0x498d98(0x207));function a0_0x2c90(_0xab5f68,_0x4660b0){const _0xeca2c=a0_0xeca2();return a0_0x2c90=function(_0x2c9064,_0xc670b){_0x2c9064=_0x2c9064-0x1ed;let _0x228967=_0xeca2c[_0x2c9064];return _0x228967;},a0_0x2c90(_0xab5f68,_0x4660b0);}function a0_0xeca2(){const _0x26cde6=['All','7aCxWRX','message','Portuguese\x20(BR)','toLocaleString','/view','../public/language/languages.json','Chinese','2289246vjyJlE','$product_details.floorlevel','language','Router','timezone','../middleware/auth','aggregate','Enabled','/Rooms_data3','/MapData','QA\x20Warehouse','$product_details.bin','email','229jUXZIz','$products','Spanish','Arabic','2120RUkjrI','German','Rack\x20A','$product_details','render','status','$product_details.product_name','/Rooms_data','117YpgAZf','$product_code','1243296SqDeXE','timezones-list','product','French','$batch_code','$_id.type','$$product.product_quantity','English','$product_details.product_code','Finished\x20Goods','Return\x20Goods','51770gqpCfT','2895585cKhVXw','1662HsgNOJ','flash','5864uigXNl','Arabic\x20(ae)','1602DCBytg','$room','express','$_id.bin','$_id.floorlevel','staff','exports','pack','$_id.product','/Rooms_data2','$name','English\x20(US)','4005YBfAES','post','body','$_id','user','$_id.bay','$count','$product_details.type','get','$product_details.product_stock','Portuguese','$production_date','findOne','$product_details.expiry_date','../models/all_models','json','319PKECvj','DRY\x20STORAGE','$product_details.batch_code'];a0_0xeca2=function(){return _0x26cde6;};return a0_0xeca2();}var timezones=require(a0_0x498d98(0x21e));const users=require(a0_0x498d98(0x200));router[a0_0x498d98(0x1ef)](a0_0x498d98(0x1ff),auth,async(_0x5eaf3b,_0x597e92)=>{const _0x29849b=a0_0x498d98;try{const {username:_0x5794bb,email:_0x3a2fc6,role:_0x23c3c4}=_0x5eaf3b[_0x29849b(0x23e)],_0x26703e=_0x5eaf3b[_0x29849b(0x23e)],_0x47886c=await profile['findOne']({'email':_0x26703e[_0x29849b(0x20e)]}),_0x477ef5=await master_shop['find']();console['log']('master',_0x477ef5);let _0x373996;if(_0x26703e['role']==_0x29849b(0x233)){const _0x2fb9b7=await staff[_0x29849b(0x1f3)]({'email':_0x26703e[_0x29849b(0x20e)]});_0x373996=await warehouse[_0x29849b(0x208)]([{'$match':{'status':_0x29849b(0x209),'name':_0x2fb9b7['warehouse']}},{'$group':{'_id':_0x29849b(0x238),'name':{'$first':_0x29849b(0x238)}}}]);}else _0x373996=await warehouse['aggregate']([{'$match':{'status':_0x29849b(0x209)}},{'$group':{'_id':_0x29849b(0x238),'name':{'$first':'$name'}}}]);const _0x45cdc7=new Date()[_0x29849b(0x1fe)]('en-US',{'timeZone':_0x477ef5[0x0][_0x29849b(0x206)]});console['log'](_0x29849b(0x206),_0x45cdc7);if(_0x477ef5[0x0][_0x29849b(0x204)]==_0x29849b(0x239)){var _0x2aa5b6=users[_0x29849b(0x224)];console['log'](_0x2aa5b6);}else{if(_0x477ef5[0x0]['language']=='Hindi')var _0x2aa5b6=users['Hindi'];else{if(_0x477ef5[0x0][_0x29849b(0x204)]==_0x29849b(0x214))var _0x2aa5b6=users[_0x29849b(0x214)];else{if(_0x477ef5[0x0][_0x29849b(0x204)]=='Spanish')var _0x2aa5b6=users[_0x29849b(0x211)];else{if(_0x477ef5[0x0]['language']=='French')var _0x2aa5b6=users[_0x29849b(0x220)];else{if(_0x477ef5[0x0][_0x29849b(0x204)]==_0x29849b(0x1fd))var _0x2aa5b6=users[_0x29849b(0x1f1)];else{if(_0x477ef5[0x0]['language']==_0x29849b(0x201))var _0x2aa5b6=users[_0x29849b(0x201)];else{if(_0x477ef5[0x0][_0x29849b(0x204)]==_0x29849b(0x22d))var _0x2aa5b6=users[_0x29849b(0x212)];}}}}}}}_0x597e92[_0x29849b(0x217)]('warehousemap_incoming',{'success':_0x5eaf3b[_0x29849b(0x22b)]('success'),'errors':_0x5eaf3b[_0x29849b(0x22b)]('errors'),'role':_0x26703e,'profile':_0x47886c,'master_shop':_0x477ef5,'timezones':timezones,'language':_0x2aa5b6,'warehouse':_0x373996});}catch(_0x48a367){console['log'](_0x48a367),_0x597e92[_0x29849b(0x218)](0xc8)[_0x29849b(0x1f6)]({'message':_0x48a367[_0x29849b(0x1fc)]});}}),router[a0_0x498d98(0x23b)](a0_0x498d98(0x20b),async(_0x2bbf48,_0x11a334)=>{const _0x548e70=a0_0x498d98,{warehouseNew:_0x4740c,rooms:_0x299e88,Type:_0x308f3b}=_0x2bbf48['body'],_0x3f4dde=await warehouse[_0x548e70(0x208)]([{'$unwind':_0x548e70(0x216)},{'$match':{'name':_0x4740c,'room':_0x299e88,'product_details.type':_0x308f3b}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x548e70(0x20d),'type':_0x548e70(0x1ee),'floorlevel':_0x548e70(0x203)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x548e70(0x1f0),'product_code':_0x548e70(0x225)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x548e70(0x1f0),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x548e70(0x23f),'bin':_0x548e70(0x231),'type':_0x548e70(0x222),'floorlevel':_0x548e70(0x232),'products':{'$filter':{'input':_0x548e70(0x210),'as':_0x548e70(0x21f),'cond':{'$gt':[_0x548e70(0x223),0x0]}}},'totalQuantity':0x1}}]);_0x11a334[_0x548e70(0x1f6)](_0x3f4dde);}),router[a0_0x498d98(0x23b)]('/MapData2',async(_0x5cc7c4,_0x272ee9)=>{const _0x20ac81=a0_0x498d98,{warehouseNew:_0x1c55aa,rooms:_0x4f597a,room_cat:_0x28ed05}=_0x5cc7c4[_0x20ac81(0x23c)];let _0x20b8f0;if(_0x28ed05==_0x20ac81(0x1fa))_0x20b8f0=await warehouse[_0x20ac81(0x208)]([{'$unwind':_0x20ac81(0x216)},{'$match':{'name':_0x1c55aa}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x20ac81(0x219),'expiry':_0x20ac81(0x1f4)},'count':{'$sum':_0x20ac81(0x1f0)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x20ac81(0x1f4)},'batch_code':{'$first':_0x20ac81(0x1f9)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x20ac81(0x23f),'products':{'$push':{'product':_0x20ac81(0x236),'quantity':_0x20ac81(0x1ed),'production_date':_0x20ac81(0x1f2),'expiry_date':'$expiry_date','batch_code':_0x20ac81(0x221),'product_code':_0x20ac81(0x21c)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x20ac81(0x23d),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x28ed05);else{}_0x272ee9[_0x20ac81(0x1f6)](_0x20b8f0);}),router[a0_0x498d98(0x23b)](a0_0x498d98(0x21a),async(_0x4e0e0c,_0x5a9020)=>{const _0x380652=a0_0x498d98;try{const {warehouse_name:_0x42f27e,A:_0x57c159,B:_0x423f83}=_0x4e0e0c[_0x380652(0x23c)];var _0x5ced9a='';_0x57c159=='raw'?_0x423f83==_0x380652(0x235)?_0x5ced9a=[{'$match':{'name':_0x42f27e,'status':_0x380652(0x209),'room':_0x380652(0x215)}},{'$group':{'_id':_0x380652(0x23d),'room_name':{'$first':_0x380652(0x22f)}}},{'$sort':{'room_name':0x1}}]:_0x5ced9a=[{'$match':{'name':_0x42f27e,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x380652(0x22f)}}},{'$sort':{'room_name':0x1}}]:_0x5ced9a=[{'$match':{'name':_0x42f27e,'status':_0x380652(0x209)}},{'$group':{'_id':_0x380652(0x23d),'room_name':{'$first':_0x380652(0x22f)}}},{'$sort':{'room_name':0x1}}];const _0x52ab68=await warehouse[_0x380652(0x208)](_0x5ced9a);_0x5a9020[_0x380652(0x218)](0xc8)[_0x380652(0x1f6)](_0x52ab68);}catch(_0x1db61b){_0x5a9020[_0x380652(0x218)](0x190)[_0x380652(0x1f6)]({'errorMessage':_0x1db61b[_0x380652(0x1fc)]});}}),router[a0_0x498d98(0x23b)](a0_0x498d98(0x237),async(_0x4f5630,_0x317ce4)=>{const _0x28c794=a0_0x498d98;try{const {warehouse_name:_0x21cf53,cat:_0x46d105,valNew:_0x4be9e8}=_0x4f5630[_0x28c794(0x23c)];var _0x513dec='',_0x1ea729='';if(_0x46d105=='Raw\x20Materials')_0x513dec=_0x28c794(0x227),_0x4be9e8==_0x28c794(0x235)?_0x1ea729=[{'$match':{'status':_0x28c794(0x209),'warehouse_category':_0x46d105,'name':{'$ne':_0x513dec},'name':_0x28c794(0x1f8)}},{'$group':{'_id':_0x28c794(0x238),'room_name':{'$first':_0x28c794(0x238)}}},{'$sort':{'room_name':0x1}}]:_0x1ea729=[{'$match':{'status':_0x28c794(0x209),'warehouse_category':_0x46d105,'name':{'$ne':_0x513dec}}},{'$group':{'_id':'$name','room_name':{'$first':_0x28c794(0x238)}}},{'$sort':{'room_name':0x1}}];else _0x46d105==_0x28c794(0x226)?(_0x513dec=_0x28c794(0x20c),_0x1ea729=[{'$match':{'status':'Enabled','warehouse_category':_0x46d105,'name':{'$ne':_0x513dec}}},{'$group':{'_id':'$name','room_name':{'$first':_0x28c794(0x238)}}},{'$sort':{'room_name':0x1}}]):_0x1ea729=[{'$match':{'status':_0x28c794(0x209)}},{'$group':{'_id':_0x28c794(0x238),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x374ff8=await warehouse[_0x28c794(0x208)](_0x1ea729);_0x317ce4[_0x28c794(0x218)](0xc8)['json'](_0x374ff8);}catch(_0x192516){_0x317ce4[_0x28c794(0x218)](0x190)[_0x28c794(0x1f6)]({'errorMessage':_0x192516[_0x28c794(0x1fc)]}),console['log'](_0x192516);}}),router[a0_0x498d98(0x23b)](a0_0x498d98(0x20a),async(_0x3030b0,_0x5411bc)=>{const _0xf134d8=a0_0x498d98;try{const {warehouse_name:_0x4b22fe,cat:_0x852946}=_0x3030b0[_0xf134d8(0x23c)],_0x1d2576=await warehouse[_0xf134d8(0x208)]([{'$match':{'status':_0xf134d8(0x209),'warehouse_category':_0x852946,'name':_0x4b22fe}},{'$group':{'_id':'$room','room_name':{'$first':_0xf134d8(0x22f)}}},{'$sort':{'room_name':0x1}}]);_0x5411bc[_0xf134d8(0x218)](0xc8)[_0xf134d8(0x1f6)](_0x1d2576);}catch(_0x47f4d4){_0x5411bc[_0xf134d8(0x218)](0x190)['json']({'errorMessage':_0x47f4d4['message']});}}),module[a0_0x498d98(0x234)]=router;