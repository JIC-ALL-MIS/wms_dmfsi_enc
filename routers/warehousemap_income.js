const a0_0x801773=a0_0x24db;(function(_0x1ef9e5,_0x15ebee){const _0x48c96e=a0_0x24db,_0x4343ae=_0x1ef9e5();while(!![]){try{const _0x29b025=parseInt(_0x48c96e(0x18d))/0x1*(parseInt(_0x48c96e(0x19d))/0x2)+parseInt(_0x48c96e(0x170))/0x3*(parseInt(_0x48c96e(0x15b))/0x4)+-parseInt(_0x48c96e(0x1a2))/0x5*(parseInt(_0x48c96e(0x176))/0x6)+-parseInt(_0x48c96e(0x167))/0x7+-parseInt(_0x48c96e(0x16e))/0x8+parseInt(_0x48c96e(0x192))/0x9*(parseInt(_0x48c96e(0x169))/0xa)+parseInt(_0x48c96e(0x189))/0xb;if(_0x29b025===_0x15ebee)break;else _0x4343ae['push'](_0x4343ae['shift']());}catch(_0x555380){_0x4343ae['push'](_0x4343ae['shift']());}}}(a0_0x26d3,0x48aaa));function a0_0x24db(_0x5ec65b,_0x5be6b4){const _0x26d36b=a0_0x26d3();return a0_0x24db=function(_0x24db36,_0x201f01){_0x24db36=_0x24db36-0x150;let _0x198c56=_0x26d36b[_0x24db36];return _0x198c56;},a0_0x24db(_0x5ec65b,_0x5be6b4);}const express=require('express'),app=express(),router=express[a0_0x801773(0x1a3)](),multer=require(a0_0x801773(0x163)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require(a0_0x801773(0x191));var timezones=require(a0_0x801773(0x16c));const users=require('../public/language/languages.json');function a0_0x26d3(){const _0x22698d=['log','body','status','$product_details.bin','post','$product_details.product_code','$_id.bay','/MapData','$_id.type','12YfjKcn','language','/Rooms_data','/view','message','52945GzJapT','Router','user','French','errors','toLocaleString','$product_details.expiry_date','en-US','$product_details.product_name','Chinese','$room','German','json','Hindi','266028jppvwj','$batch_code','$_id.floorlevel','Raw\x20Materials','$_id','$product_code','English\x20(US)','render','multer','$product_details.floorlevel','Return\x20Goods','$_id.bin','3931739HfGJxX','All','514510UKyvtX','timezone','warehousemap_incoming','timezones-list','staff','1882232BkIezI','get','6mNulFZ','warehouse','$_id.product','/MapData2','Enabled','$$product.product_quantity','330vWjDQP','exports','$product_details','$product_details.product_stock','findOne','$product_details.production_date','Spanish','$product_details.bay','raw','find','aggregate','DRY\x20STORAGE','success','$name','pack','product','flash','$product_details.batch_code','email','13788467TJdTCJ','English','role','$production_date','14113PCWQEm','/Rooms_data2','$expiry_date','$count','../middleware/auth','36ABvZAU','Arabic\x20(ae)'];a0_0x26d3=function(){return _0x22698d;};return a0_0x26d3();}router[a0_0x801773(0x16f)](a0_0x801773(0x1a0),auth,async(_0x12ab49,_0x71f5ce)=>{const _0x2ec73e=a0_0x801773;try{const {username:_0x5a5c1,email:_0x55ddf5,role:_0x9209d7}=_0x12ab49[_0x2ec73e(0x1a4)],_0x1bf07a=_0x12ab49[_0x2ec73e(0x1a4)],_0x29cda0=await profile[_0x2ec73e(0x17a)]({'email':_0x1bf07a['email']}),_0x4e5e98=await master_shop[_0x2ec73e(0x17f)]();console[_0x2ec73e(0x194)]('master',_0x4e5e98);let _0xa07c47;if(_0x1bf07a[_0x2ec73e(0x18b)]==_0x2ec73e(0x16d)){const _0xbddafb=await staff[_0x2ec73e(0x17a)]({'email':_0x1bf07a[_0x2ec73e(0x188)]});_0xa07c47=await warehouse[_0x2ec73e(0x180)]([{'$match':{'status':_0x2ec73e(0x174),'name':_0xbddafb[_0x2ec73e(0x171)]}},{'$group':{'_id':_0x2ec73e(0x183),'name':{'$first':_0x2ec73e(0x183)}}}]);}else _0xa07c47=await warehouse[_0x2ec73e(0x180)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x2ec73e(0x183),'name':{'$first':_0x2ec73e(0x183)}}}]);const _0xf94ae3=new Date()[_0x2ec73e(0x152)](_0x2ec73e(0x154),{'timeZone':_0x4e5e98[0x0][_0x2ec73e(0x16a)]});console[_0x2ec73e(0x194)](_0x2ec73e(0x16a),_0xf94ae3);if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]==_0x2ec73e(0x161)){var _0x1fdb66=users[_0x2ec73e(0x18a)];console['log'](_0x1fdb66);}else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]==_0x2ec73e(0x15a))var _0x1fdb66=users['Hindi'];else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]==_0x2ec73e(0x158))var _0x1fdb66=users[_0x2ec73e(0x158)];else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]=='Spanish')var _0x1fdb66=users[_0x2ec73e(0x17c)];else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]==_0x2ec73e(0x150))var _0x1fdb66=users['French'];else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]=='Portuguese\x20(BR)')var _0x1fdb66=users['Portuguese'];else{if(_0x4e5e98[0x0]['language']==_0x2ec73e(0x156))var _0x1fdb66=users['Chinese'];else{if(_0x4e5e98[0x0][_0x2ec73e(0x19e)]==_0x2ec73e(0x193))var _0x1fdb66=users['Arabic'];}}}}}}}_0x71f5ce[_0x2ec73e(0x162)](_0x2ec73e(0x16b),{'success':_0x12ab49[_0x2ec73e(0x186)](_0x2ec73e(0x182)),'errors':_0x12ab49[_0x2ec73e(0x186)](_0x2ec73e(0x151)),'role':_0x1bf07a,'profile':_0x29cda0,'master_shop':_0x4e5e98,'timezones':timezones,'language':_0x1fdb66,'warehouse':_0xa07c47});}catch(_0xf7fc82){console['log'](_0xf7fc82),_0x71f5ce['status'](0xc8)[_0x2ec73e(0x159)]({'message':_0xf7fc82[_0x2ec73e(0x1a1)]});}}),router[a0_0x801773(0x198)](a0_0x801773(0x19b),async(_0x28e952,_0x47a560)=>{const _0x42fb92=a0_0x801773,{warehouseNew:_0x4f6895,rooms:_0x621549,Type:_0x4881d9}=_0x28e952['body'],_0x1c47f9=await warehouse[_0x42fb92(0x180)]([{'$unwind':_0x42fb92(0x178)},{'$match':{'name':_0x4f6895,'room':_0x621549,'product_details.type':_0x4881d9}},{'$group':{'_id':{'bay':_0x42fb92(0x17d),'bin':_0x42fb92(0x197),'type':'$product_details.type','floorlevel':_0x42fb92(0x164)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':'$product_details.product_stock','product_code':_0x42fb92(0x199)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x42fb92(0x179),0x0]},'then':_0x42fb92(0x179),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x42fb92(0x19a),'bin':_0x42fb92(0x166),'type':_0x42fb92(0x19c),'floorlevel':_0x42fb92(0x15d),'products':{'$filter':{'input':'$products','as':_0x42fb92(0x185),'cond':{'$gt':[_0x42fb92(0x175),0x0]}}},'totalQuantity':0x1}}]);_0x47a560[_0x42fb92(0x159)](_0x1c47f9);}),router['post'](a0_0x801773(0x173),async(_0x507db3,_0x22cd98)=>{const _0x397f37=a0_0x801773,{warehouseNew:_0x4b0b38,rooms:_0x575e74,room_cat:_0x2b593e}=_0x507db3[_0x397f37(0x195)];let _0x48dbff;if(_0x2b593e==_0x397f37(0x168))_0x48dbff=await warehouse[_0x397f37(0x180)]([{'$unwind':_0x397f37(0x178)},{'$match':{'name':_0x4b0b38}},{'$group':{'_id':{'bay':_0x397f37(0x17d),'product':_0x397f37(0x155),'expiry':_0x397f37(0x153)},'count':{'$sum':_0x397f37(0x179)},'production_date':{'$first':_0x397f37(0x17b)},'expiry_date':{'$first':_0x397f37(0x153)},'batch_code':{'$first':_0x397f37(0x187)},'product_code':{'$first':_0x397f37(0x199)}}},{'$group':{'_id':_0x397f37(0x19a),'products':{'$push':{'product':_0x397f37(0x172),'quantity':_0x397f37(0x190),'production_date':_0x397f37(0x18c),'expiry_date':_0x397f37(0x18f),'batch_code':_0x397f37(0x15c),'product_code':_0x397f37(0x160)}},'totalQuantity':{'$sum':_0x397f37(0x190)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x397f37(0x15f),'products':0x1,'totalQuantity':0x1}}]),console[_0x397f37(0x194)](_0x2b593e);else{}_0x22cd98[_0x397f37(0x159)](_0x48dbff);}),router['post'](a0_0x801773(0x19f),async(_0x36212,_0x518639)=>{const _0x4fe784=a0_0x801773;try{const {warehouse_name:_0x494a8b,A:_0x29eb8d,B:_0x285bfd}=_0x36212[_0x4fe784(0x195)];var _0x456bab='';_0x29eb8d==_0x4fe784(0x17e)?_0x285bfd==_0x4fe784(0x184)?_0x456bab=[{'$match':{'name':_0x494a8b,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4fe784(0x157)}}},{'$sort':{'room_name':0x1}}]:_0x456bab=[{'$match':{'name':_0x494a8b,'status':'Enabled'}},{'$group':{'_id':_0x4fe784(0x15f),'room_name':{'$first':_0x4fe784(0x157)}}},{'$sort':{'room_name':0x1}}]:_0x456bab=[{'$match':{'name':_0x494a8b,'status':_0x4fe784(0x174)}},{'$group':{'_id':_0x4fe784(0x15f),'room_name':{'$first':_0x4fe784(0x157)}}},{'$sort':{'room_name':0x1}}];const _0x3e0a2a=await warehouse[_0x4fe784(0x180)](_0x456bab);_0x518639[_0x4fe784(0x196)](0xc8)[_0x4fe784(0x159)](_0x3e0a2a);}catch(_0x1ed69c){_0x518639[_0x4fe784(0x196)](0x190)[_0x4fe784(0x159)]({'errorMessage':_0x1ed69c[_0x4fe784(0x1a1)]});}}),router['post'](a0_0x801773(0x18e),async(_0x3461a8,_0x384bca)=>{const _0x15e324=a0_0x801773;try{const {warehouse_name:_0x588ca6,cat:_0x5d4dab,valNew:_0x566ce7}=_0x3461a8[_0x15e324(0x195)];var _0x21a1c7='',_0xe8531e='';if(_0x5d4dab==_0x15e324(0x15e))_0x21a1c7=_0x15e324(0x165),_0x566ce7==_0x15e324(0x184)?_0xe8531e=[{'$match':{'status':_0x15e324(0x174),'warehouse_category':_0x5d4dab,'name':{'$ne':_0x21a1c7},'name':_0x15e324(0x181)}},{'$group':{'_id':_0x15e324(0x183),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0xe8531e=[{'$match':{'status':_0x15e324(0x174),'warehouse_category':_0x5d4dab,'name':{'$ne':_0x21a1c7}}},{'$group':{'_id':_0x15e324(0x183),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x5d4dab=='Finished\x20Goods'?(_0x21a1c7='QA\x20Warehouse',_0xe8531e=[{'$match':{'status':_0x15e324(0x174),'warehouse_category':_0x5d4dab,'name':{'$ne':_0x21a1c7}}},{'$group':{'_id':_0x15e324(0x183),'room_name':{'$first':_0x15e324(0x183)}}},{'$sort':{'room_name':0x1}}]):_0xe8531e=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x15e324(0x183),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x6f3a53=await warehouse['aggregate'](_0xe8531e);_0x384bca[_0x15e324(0x196)](0xc8)[_0x15e324(0x159)](_0x6f3a53);}catch(_0x4a0055){_0x384bca[_0x15e324(0x196)](0x190)[_0x15e324(0x159)]({'errorMessage':_0x4a0055[_0x15e324(0x1a1)]}),console['log'](_0x4a0055);}}),router[a0_0x801773(0x198)]('/Rooms_data3',async(_0x2a1c57,_0x5887ab)=>{const _0x201d05=a0_0x801773;try{const {warehouse_name:_0x4ba973,cat:_0x28c25d}=_0x2a1c57['body'],_0x3ef58b=await warehouse['aggregate']([{'$match':{'status':_0x201d05(0x174),'warehouse_category':_0x28c25d,'name':_0x4ba973}},{'$group':{'_id':'$room','room_name':{'$first':_0x201d05(0x157)}}},{'$sort':{'room_name':0x1}}]);_0x5887ab[_0x201d05(0x196)](0xc8)[_0x201d05(0x159)](_0x3ef58b);}catch(_0x56c2bc){_0x5887ab[_0x201d05(0x196)](0x190)[_0x201d05(0x159)]({'errorMessage':_0x56c2bc[_0x201d05(0x1a1)]});}}),module[a0_0x801773(0x177)]=router;