const a0_0x4e6438=a0_0x294d;(function(_0x32025a,_0x724f32){const _0x253c88=a0_0x294d,_0x4cb9ca=_0x32025a();while(!![]){try{const _0x5b5814=parseInt(_0x253c88(0x1ae))/0x1*(parseInt(_0x253c88(0x1c5))/0x2)+-parseInt(_0x253c88(0x1ce))/0x3*(parseInt(_0x253c88(0x1c1))/0x4)+-parseInt(_0x253c88(0x1af))/0x5*(parseInt(_0x253c88(0x19f))/0x6)+-parseInt(_0x253c88(0x198))/0x7*(parseInt(_0x253c88(0x1c0))/0x8)+-parseInt(_0x253c88(0x1a2))/0x9*(-parseInt(_0x253c88(0x183))/0xa)+parseInt(_0x253c88(0x188))/0xb+parseInt(_0x253c88(0x1a0))/0xc;if(_0x5b5814===_0x724f32)break;else _0x4cb9ca['push'](_0x4cb9ca['shift']());}catch(_0x31b310){_0x4cb9ca['push'](_0x4cb9ca['shift']());}}}(a0_0x2afc,0xa2e44));const express=require('express'),app=express(),router=express[a0_0x4e6438(0x1a7)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x4e6438(0x1a5)),auth=require(a0_0x4e6438(0x1b9));function a0_0x2afc(){const _0x5bde79=['$_id.product','Raw\x20Materials','$_id.floorlevel','success','Spanish','language','87WGWgxO','DRY\x20STORAGE','Finished\x20Goods','French','get','$product_details.bay','email','pack','warehousemap_incoming','exports','1446980EINluU','$count','$_id.bin','findOne','$_id.type','9600646gBJwJp','Arabic','message','$production_date','flash','Return\x20Goods','timezones-list','errors','$product_details','$name','$product_details.product_code','status','product','json','$batch_code','Rack\x20A','2597xRDUHn','$_id.bay','$product_details.batch_code','Hindi','$room','body','Portuguese','4693254JbfNsK','118512BfOGsw','en-US','81eyHmuW','master','/Rooms_data3','../models/all_models','German','Router','/MapData','/Rooms_data2','English\x20(US)','log','user','Enabled','29301eIcatz','5ETMEED','toLocaleString','$product_details.product_name','$product_details.type','QA\x20Warehouse','$_id','$product_details.expiry_date','Portuguese\x20(BR)','aggregate','find','../middleware/auth','raw','timezone','$product_details.product_stock','$product_details.bin','Chinese','render','3448CkOQFX','140020MDCrrG','All','/view','$expiry_date','30hbuJQH','/Rooms_data','post'];a0_0x2afc=function(){return _0x5bde79;};return a0_0x2afc();}var timezones=require(a0_0x4e6438(0x18e));const users=require('../public/language/languages.json');function a0_0x294d(_0x4d3559,_0x26ad62){const _0x2afc9f=a0_0x2afc();return a0_0x294d=function(_0x294d0d,_0x443a84){_0x294d0d=_0x294d0d-0x180;let _0x26855e=_0x2afc9f[_0x294d0d];return _0x26855e;},a0_0x294d(_0x4d3559,_0x26ad62);}router[a0_0x4e6438(0x1d2)](a0_0x4e6438(0x1c3),auth,async(_0x3d4ebb,_0x5410a2)=>{const _0x5d0bca=a0_0x4e6438;try{const {username:_0x7fd66d,email:_0x4b7ac9,role:_0x43e7bd}=_0x3d4ebb[_0x5d0bca(0x1ac)],_0x42e096=_0x3d4ebb[_0x5d0bca(0x1ac)],_0x3a5419=await profile[_0x5d0bca(0x186)]({'email':_0x42e096[_0x5d0bca(0x1d4)]}),_0x6c8e23=await master_shop[_0x5d0bca(0x1b8)]();console[_0x5d0bca(0x1ab)](_0x5d0bca(0x1a3),_0x6c8e23);let _0x377f82;if(_0x42e096['role']=='staff'){const _0x267656=await staff[_0x5d0bca(0x186)]({'email':_0x42e096['email']});_0x377f82=await warehouse[_0x5d0bca(0x1b7)]([{'$match':{'status':'Enabled','name':_0x267656['warehouse']}},{'$group':{'_id':'$name','name':{'$first':_0x5d0bca(0x191)}}}]);}else _0x377f82=await warehouse[_0x5d0bca(0x1b7)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x5d0bca(0x191),'name':{'$first':'$name'}}}]);const _0x1feab5=new Date()[_0x5d0bca(0x1b0)](_0x5d0bca(0x1a1),{'timeZone':_0x6c8e23[0x0][_0x5d0bca(0x1bb)]});console[_0x5d0bca(0x1ab)]('timezone',_0x1feab5);if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x1aa)){var _0xd542ee=users['English'];console[_0x5d0bca(0x1ab)](_0xd542ee);}else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x19b))var _0xd542ee=users[_0x5d0bca(0x19b)];else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x1a6))var _0xd542ee=users[_0x5d0bca(0x1a6)];else{if(_0x6c8e23[0x0]['language']==_0x5d0bca(0x1cc))var _0xd542ee=users[_0x5d0bca(0x1cc)];else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x1d1))var _0xd542ee=users[_0x5d0bca(0x1d1)];else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x1b6))var _0xd542ee=users[_0x5d0bca(0x19e)];else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]==_0x5d0bca(0x1be))var _0xd542ee=users[_0x5d0bca(0x1be)];else{if(_0x6c8e23[0x0][_0x5d0bca(0x1cd)]=='Arabic\x20(ae)')var _0xd542ee=users[_0x5d0bca(0x189)];}}}}}}}_0x5410a2[_0x5d0bca(0x1bf)](_0x5d0bca(0x181),{'success':_0x3d4ebb[_0x5d0bca(0x18c)](_0x5d0bca(0x1cb)),'errors':_0x3d4ebb[_0x5d0bca(0x18c)](_0x5d0bca(0x18f)),'role':_0x42e096,'profile':_0x3a5419,'master_shop':_0x6c8e23,'timezones':timezones,'language':_0xd542ee,'warehouse':_0x377f82});}catch(_0x20cea5){console[_0x5d0bca(0x1ab)](_0x20cea5),_0x5410a2[_0x5d0bca(0x193)](0xc8)[_0x5d0bca(0x195)]({'message':_0x20cea5['message']});}}),router[a0_0x4e6438(0x1c7)](a0_0x4e6438(0x1a8),async(_0x30b6b1,_0x2cb5ea)=>{const _0x4853a3=a0_0x4e6438,{warehouseNew:_0x26348f,rooms:_0x550b1b,Type:_0x6fd2b4}=_0x30b6b1['body'],_0x334378=await warehouse[_0x4853a3(0x1b7)]([{'$unwind':_0x4853a3(0x190)},{'$match':{'name':_0x26348f,'room':_0x550b1b,'product_details.type':_0x6fd2b4}},{'$group':{'_id':{'bay':_0x4853a3(0x1d3),'bin':_0x4853a3(0x1bd),'type':_0x4853a3(0x1b2),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x4853a3(0x1b1),'product_quantity':'$product_details.product_stock','product_code':_0x4853a3(0x192)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4853a3(0x1bc),0x0]},'then':_0x4853a3(0x1bc),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x4853a3(0x185),'type':_0x4853a3(0x187),'floorlevel':_0x4853a3(0x1ca),'products':{'$filter':{'input':'$products','as':_0x4853a3(0x194),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x2cb5ea[_0x4853a3(0x195)](_0x334378);}),router[a0_0x4e6438(0x1c7)]('/MapData2',async(_0x5224df,_0x1eab1f)=>{const _0x584c9c=a0_0x4e6438,{warehouseNew:_0xe6dd0f,rooms:_0x3b673c,room_cat:_0x10eb96}=_0x5224df[_0x584c9c(0x19d)];let _0x2266a9;if(_0x10eb96==_0x584c9c(0x1c2))_0x2266a9=await warehouse[_0x584c9c(0x1b7)]([{'$unwind':'$product_details'},{'$match':{'name':_0xe6dd0f}},{'$group':{'_id':{'bay':_0x584c9c(0x1d3),'product':'$product_details.product_name','expiry':_0x584c9c(0x1b5)},'count':{'$sum':_0x584c9c(0x1bc)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x584c9c(0x1b5)},'batch_code':{'$first':_0x584c9c(0x19a)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x584c9c(0x199),'products':{'$push':{'product':_0x584c9c(0x1c8),'quantity':_0x584c9c(0x184),'production_date':_0x584c9c(0x18b),'expiry_date':_0x584c9c(0x1c4),'batch_code':_0x584c9c(0x196),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x584c9c(0x184)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x584c9c(0x1b4),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x10eb96);else{}_0x1eab1f['json'](_0x2266a9);}),router[a0_0x4e6438(0x1c7)](a0_0x4e6438(0x1c6),async(_0x5af167,_0x361cc8)=>{const _0xd1baf=a0_0x4e6438;try{const {warehouse_name:_0x96e70f,A:_0x46eb85,B:_0x249bd1}=_0x5af167['body'];var _0x49fd9a='';_0x46eb85==_0xd1baf(0x1ba)?_0x249bd1==_0xd1baf(0x180)?_0x49fd9a=[{'$match':{'name':_0x96e70f,'status':_0xd1baf(0x1ad),'room':_0xd1baf(0x197)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x49fd9a=[{'$match':{'name':_0x96e70f,'status':_0xd1baf(0x1ad)}},{'$group':{'_id':_0xd1baf(0x1b4),'room_name':{'$first':_0xd1baf(0x19c)}}},{'$sort':{'room_name':0x1}}]:_0x49fd9a=[{'$match':{'name':_0x96e70f,'status':_0xd1baf(0x1ad)}},{'$group':{'_id':_0xd1baf(0x1b4),'room_name':{'$first':_0xd1baf(0x19c)}}},{'$sort':{'room_name':0x1}}];const _0x462d17=await warehouse[_0xd1baf(0x1b7)](_0x49fd9a);_0x361cc8['status'](0xc8)['json'](_0x462d17);}catch(_0xbac725){_0x361cc8[_0xd1baf(0x193)](0x190)[_0xd1baf(0x195)]({'errorMessage':_0xbac725[_0xd1baf(0x18a)]});}}),router[a0_0x4e6438(0x1c7)](a0_0x4e6438(0x1a9),async(_0x419aec,_0x2514e1)=>{const _0x58c501=a0_0x4e6438;try{const {warehouse_name:_0x363b0b,cat:_0x5d206f,valNew:_0x138242}=_0x419aec[_0x58c501(0x19d)];var _0x80906e='',_0x49c814='';if(_0x5d206f==_0x58c501(0x1c9))_0x80906e=_0x58c501(0x18d),_0x138242=='pack'?_0x49c814=[{'$match':{'status':_0x58c501(0x1ad),'warehouse_category':_0x5d206f,'name':{'$ne':_0x80906e},'name':_0x58c501(0x1cf)}},{'$group':{'_id':'$name','room_name':{'$first':_0x58c501(0x191)}}},{'$sort':{'room_name':0x1}}]:_0x49c814=[{'$match':{'status':'Enabled','warehouse_category':_0x5d206f,'name':{'$ne':_0x80906e}}},{'$group':{'_id':_0x58c501(0x191),'room_name':{'$first':_0x58c501(0x191)}}},{'$sort':{'room_name':0x1}}];else _0x5d206f==_0x58c501(0x1d0)?(_0x80906e=_0x58c501(0x1b3),_0x49c814=[{'$match':{'status':_0x58c501(0x1ad),'warehouse_category':_0x5d206f,'name':{'$ne':_0x80906e}}},{'$group':{'_id':_0x58c501(0x191),'room_name':{'$first':_0x58c501(0x191)}}},{'$sort':{'room_name':0x1}}]):_0x49c814=[{'$match':{'status':_0x58c501(0x1ad)}},{'$group':{'_id':_0x58c501(0x191),'room_name':{'$first':_0x58c501(0x191)}}},{'$sort':{'room_name':0x1}}];const _0x9a365=await warehouse[_0x58c501(0x1b7)](_0x49c814);_0x2514e1[_0x58c501(0x193)](0xc8)[_0x58c501(0x195)](_0x9a365);}catch(_0xe707cb){_0x2514e1['status'](0x190)[_0x58c501(0x195)]({'errorMessage':_0xe707cb[_0x58c501(0x18a)]}),console[_0x58c501(0x1ab)](_0xe707cb);}}),router[a0_0x4e6438(0x1c7)](a0_0x4e6438(0x1a4),async(_0x3bb624,_0x130754)=>{const _0x4bc53b=a0_0x4e6438;try{const {warehouse_name:_0x5c8bc8,cat:_0x53fea0}=_0x3bb624[_0x4bc53b(0x19d)],_0x44fd18=await warehouse[_0x4bc53b(0x1b7)]([{'$match':{'status':_0x4bc53b(0x1ad),'warehouse_category':_0x53fea0,'name':_0x5c8bc8}},{'$group':{'_id':_0x4bc53b(0x19c),'room_name':{'$first':_0x4bc53b(0x19c)}}},{'$sort':{'room_name':0x1}}]);_0x130754[_0x4bc53b(0x193)](0xc8)[_0x4bc53b(0x195)](_0x44fd18);}catch(_0x189ba5){_0x130754[_0x4bc53b(0x193)](0x190)['json']({'errorMessage':_0x189ba5[_0x4bc53b(0x18a)]});}}),module[a0_0x4e6438(0x182)]=router;