const a0_0x2e16a8=a0_0x3de5;function a0_0x3de5(_0x5a4f90,_0x56e758){const _0x42d832=a0_0x42d8();return a0_0x3de5=function(_0x3de5d8,_0x3c3b8a){_0x3de5d8=_0x3de5d8-0x102;let _0x1b4976=_0x42d832[_0x3de5d8];return _0x1b4976;},a0_0x3de5(_0x5a4f90,_0x56e758);}(function(_0x5f4f5d,_0x39f787){const _0x3a2e88=a0_0x3de5,_0x1e3c3d=_0x5f4f5d();while(!![]){try{const _0x1ca217=parseInt(_0x3a2e88(0x11b))/0x1+parseInt(_0x3a2e88(0x135))/0x2+parseInt(_0x3a2e88(0x12e))/0x3+-parseInt(_0x3a2e88(0x14a))/0x4+parseInt(_0x3a2e88(0x11d))/0x5+-parseInt(_0x3a2e88(0x132))/0x6*(parseInt(_0x3a2e88(0x14d))/0x7)+-parseInt(_0x3a2e88(0x115))/0x8;if(_0x1ca217===_0x39f787)break;else _0x1e3c3d['push'](_0x1e3c3d['shift']());}catch(_0x2e9fd7){_0x1e3c3d['push'](_0x1e3c3d['shift']());}}}(a0_0x42d8,0x7c524));function a0_0x42d8(){const _0x2edcfa=['body','All','2017662oIEhwh','warehouse','get','Hindi','$product_details.batch_code','staff','exports','/view','QA\x20Warehouse','raw','Chinese','$_id','message','Enabled','timezone','$batch_code','Portuguese','$product_details.production_date','role','$product_code','json','2483820CTzNij','$$product.product_quantity','$count','7ZQiFVl','errors','$_id.bay','aggregate','status','English','log','/Rooms_data3','warehousemap_incoming','post','$products','$expiry_date','$product_details.product_code','pack','English\x20(US)','$product_details.product_name','Arabic','/Rooms_data','$product_details.bay','French','14297432cXFGJS','$product_details.floorlevel','multer','../models/all_models','$product_details.expiry_date','../middleware/auth','833383tubsRK','$product_details','4038805xtMLeF','$name','$production_date','Arabic\x20(ae)','success','$room','findOne','$_id.product','master','German','language','Router','find','user','$product_details.type','express','Return\x20Goods','851832MBrYRy','DRY\x20STORAGE','$product_details.product_stock','Spanish','99390yvYIst'];a0_0x42d8=function(){return _0x2edcfa;};return a0_0x42d8();}const express=require(a0_0x2e16a8(0x12c)),app=express(),router=express[a0_0x2e16a8(0x128)](),multer=require(a0_0x2e16a8(0x117)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2e16a8(0x118)),auth=require(a0_0x2e16a8(0x11a));var timezones=require('timezones-list');const users=require('../public/language/languages.json');router[a0_0x2e16a8(0x137)](a0_0x2e16a8(0x13c),auth,async(_0x1ab9a9,_0x2cab8c)=>{const _0x24068e=a0_0x2e16a8;try{const {username:_0x237fc8,email:_0x38ebab,role:_0x453d6e}=_0x1ab9a9[_0x24068e(0x12a)],_0x20ded5=_0x1ab9a9['user'],_0x321702=await profile[_0x24068e(0x123)]({'email':_0x20ded5['email']}),_0x4c6ce9=await master_shop[_0x24068e(0x129)]();console['log'](_0x24068e(0x125),_0x4c6ce9);let _0x4c3f30;if(_0x20ded5[_0x24068e(0x147)]==_0x24068e(0x13a)){const _0x29732c=await staff['findOne']({'email':_0x20ded5['email']});_0x4c3f30=await warehouse[_0x24068e(0x104)]([{'$match':{'status':_0x24068e(0x142),'name':_0x29732c[_0x24068e(0x136)]}},{'$group':{'_id':_0x24068e(0x11e),'name':{'$first':'$name'}}}]);}else _0x4c3f30=await warehouse['aggregate']([{'$match':{'status':_0x24068e(0x142)}},{'$group':{'_id':_0x24068e(0x11e),'name':{'$first':_0x24068e(0x11e)}}}]);const _0x621d19=new Date()['toLocaleString']('en-US',{'timeZone':_0x4c6ce9[0x0][_0x24068e(0x143)]});console[_0x24068e(0x107)](_0x24068e(0x143),_0x621d19);if(_0x4c6ce9[0x0]['language']==_0x24068e(0x10f)){var _0x16a152=users[_0x24068e(0x106)];console[_0x24068e(0x107)](_0x16a152);}else{if(_0x4c6ce9[0x0][_0x24068e(0x127)]==_0x24068e(0x138))var _0x16a152=users[_0x24068e(0x138)];else{if(_0x4c6ce9[0x0]['language']==_0x24068e(0x126))var _0x16a152=users[_0x24068e(0x126)];else{if(_0x4c6ce9[0x0][_0x24068e(0x127)]==_0x24068e(0x131))var _0x16a152=users[_0x24068e(0x131)];else{if(_0x4c6ce9[0x0]['language']==_0x24068e(0x114))var _0x16a152=users[_0x24068e(0x114)];else{if(_0x4c6ce9[0x0][_0x24068e(0x127)]=='Portuguese\x20(BR)')var _0x16a152=users[_0x24068e(0x145)];else{if(_0x4c6ce9[0x0][_0x24068e(0x127)]==_0x24068e(0x13f))var _0x16a152=users['Chinese'];else{if(_0x4c6ce9[0x0][_0x24068e(0x127)]==_0x24068e(0x120))var _0x16a152=users[_0x24068e(0x111)];}}}}}}}_0x2cab8c['render'](_0x24068e(0x109),{'success':_0x1ab9a9['flash'](_0x24068e(0x121)),'errors':_0x1ab9a9['flash'](_0x24068e(0x102)),'role':_0x20ded5,'profile':_0x321702,'master_shop':_0x4c6ce9,'timezones':timezones,'language':_0x16a152,'warehouse':_0x4c3f30});}catch(_0x48ea09){console[_0x24068e(0x107)](_0x48ea09),_0x2cab8c['status'](0xc8)['json']({'message':_0x48ea09[_0x24068e(0x141)]});}}),router[a0_0x2e16a8(0x10a)]('/MapData',async(_0x1ef9f2,_0x5d1cc6)=>{const _0x20b02d=a0_0x2e16a8,{warehouseNew:_0x20c66e,rooms:_0x484998,Type:_0x42de82}=_0x1ef9f2[_0x20b02d(0x133)],_0x26099c=await warehouse['aggregate']([{'$unwind':_0x20b02d(0x11c)},{'$match':{'name':_0x20c66e,'room':_0x484998,'product_details.type':_0x42de82}},{'$group':{'_id':{'bay':_0x20b02d(0x113),'bin':'$product_details.bin','type':_0x20b02d(0x12b),'floorlevel':_0x20b02d(0x116)},'products':{'$push':{'product_name':_0x20b02d(0x110),'product_quantity':_0x20b02d(0x130),'product_code':_0x20b02d(0x10d)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x20b02d(0x130),0x0]},'then':_0x20b02d(0x130),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x20b02d(0x103),'bin':'$_id.bin','type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x20b02d(0x10b),'as':'product','cond':{'$gt':[_0x20b02d(0x14b),0x0]}}},'totalQuantity':0x1}}]);_0x5d1cc6[_0x20b02d(0x149)](_0x26099c);}),router[a0_0x2e16a8(0x10a)]('/MapData2',async(_0x47e792,_0x5a143c)=>{const _0x1720a3=a0_0x2e16a8,{warehouseNew:_0x355a46,rooms:_0x24f4f3,room_cat:_0x34f8d5}=_0x47e792['body'];let _0x6f0c04;if(_0x34f8d5==_0x1720a3(0x134))_0x6f0c04=await warehouse['aggregate']([{'$unwind':_0x1720a3(0x11c)},{'$match':{'name':_0x355a46}},{'$group':{'_id':{'bay':'$product_details.bay','product':'$product_details.product_name','expiry':_0x1720a3(0x119)},'count':{'$sum':_0x1720a3(0x130)},'production_date':{'$first':_0x1720a3(0x146)},'expiry_date':{'$first':_0x1720a3(0x119)},'batch_code':{'$first':_0x1720a3(0x139)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x1720a3(0x124),'quantity':_0x1720a3(0x14c),'production_date':_0x1720a3(0x11f),'expiry_date':_0x1720a3(0x10c),'batch_code':_0x1720a3(0x144),'product_code':_0x1720a3(0x148)}},'totalQuantity':{'$sum':_0x1720a3(0x14c)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x34f8d5);else{}_0x5a143c['json'](_0x6f0c04);}),router[a0_0x2e16a8(0x10a)](a0_0x2e16a8(0x112),async(_0x11f84b,_0x190cb7)=>{const _0x195066=a0_0x2e16a8;try{const {warehouse_name:_0x37d83b,A:_0x526c43,B:_0x46a70b}=_0x11f84b['body'];var _0x7d853b='';_0x526c43==_0x195066(0x13e)?_0x46a70b==_0x195066(0x10e)?_0x7d853b=[{'$match':{'name':_0x37d83b,'status':_0x195066(0x142),'room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x195066(0x122)}}},{'$sort':{'room_name':0x1}}]:_0x7d853b=[{'$match':{'name':_0x37d83b,'status':_0x195066(0x142)}},{'$group':{'_id':_0x195066(0x140),'room_name':{'$first':_0x195066(0x122)}}},{'$sort':{'room_name':0x1}}]:_0x7d853b=[{'$match':{'name':_0x37d83b,'status':_0x195066(0x142)}},{'$group':{'_id':_0x195066(0x140),'room_name':{'$first':_0x195066(0x122)}}},{'$sort':{'room_name':0x1}}];const _0x14171a=await warehouse[_0x195066(0x104)](_0x7d853b);_0x190cb7[_0x195066(0x105)](0xc8)[_0x195066(0x149)](_0x14171a);}catch(_0x26718f){_0x190cb7[_0x195066(0x105)](0x190)['json']({'errorMessage':_0x26718f[_0x195066(0x141)]});}}),router[a0_0x2e16a8(0x10a)]('/Rooms_data2',async(_0x2d9a25,_0x5a7841)=>{const _0x3abe6d=a0_0x2e16a8;try{const {warehouse_name:_0x78eaf2,cat:_0x4e721a,valNew:_0x4171ff}=_0x2d9a25[_0x3abe6d(0x133)];var _0x252b31='',_0x43815f='';if(_0x4e721a=='Raw\x20Materials')_0x252b31=_0x3abe6d(0x12d),_0x4171ff==_0x3abe6d(0x10e)?_0x43815f=[{'$match':{'status':_0x3abe6d(0x142),'warehouse_category':_0x4e721a,'name':{'$ne':_0x252b31},'name':_0x3abe6d(0x12f)}},{'$group':{'_id':_0x3abe6d(0x11e),'room_name':{'$first':_0x3abe6d(0x11e)}}},{'$sort':{'room_name':0x1}}]:_0x43815f=[{'$match':{'status':_0x3abe6d(0x142),'warehouse_category':_0x4e721a,'name':{'$ne':_0x252b31}}},{'$group':{'_id':_0x3abe6d(0x11e),'room_name':{'$first':_0x3abe6d(0x11e)}}},{'$sort':{'room_name':0x1}}];else _0x4e721a=='Finished\x20Goods'?(_0x252b31=_0x3abe6d(0x13d),_0x43815f=[{'$match':{'status':'Enabled','warehouse_category':_0x4e721a,'name':{'$ne':_0x252b31}}},{'$group':{'_id':_0x3abe6d(0x11e),'room_name':{'$first':_0x3abe6d(0x11e)}}},{'$sort':{'room_name':0x1}}]):_0x43815f=[{'$match':{'status':_0x3abe6d(0x142)}},{'$group':{'_id':_0x3abe6d(0x11e),'room_name':{'$first':_0x3abe6d(0x11e)}}},{'$sort':{'room_name':0x1}}];const _0x395991=await warehouse['aggregate'](_0x43815f);_0x5a7841[_0x3abe6d(0x105)](0xc8)['json'](_0x395991);}catch(_0x3771e5){_0x5a7841[_0x3abe6d(0x105)](0x190)[_0x3abe6d(0x149)]({'errorMessage':_0x3771e5['message']}),console[_0x3abe6d(0x107)](_0x3771e5);}}),router[a0_0x2e16a8(0x10a)](a0_0x2e16a8(0x108),async(_0x1a9d6c,_0x5ce561)=>{const _0x37cfd8=a0_0x2e16a8;try{const {warehouse_name:_0xacf977,cat:_0x291897}=_0x1a9d6c[_0x37cfd8(0x133)],_0x7367cf=await warehouse['aggregate']([{'$match':{'status':_0x37cfd8(0x142),'warehouse_category':_0x291897,'name':_0xacf977}},{'$group':{'_id':'$room','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x5ce561[_0x37cfd8(0x105)](0xc8)[_0x37cfd8(0x149)](_0x7367cf);}catch(_0x47699e){_0x5ce561[_0x37cfd8(0x105)](0x190)[_0x37cfd8(0x149)]({'errorMessage':_0x47699e[_0x37cfd8(0x141)]});}}),module[a0_0x2e16a8(0x13b)]=router;