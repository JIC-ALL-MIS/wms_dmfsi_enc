const a0_0x1bc171=a0_0x2e53;function a0_0x2e53(_0x3572bb,_0x1354cd){const _0x5b8768=a0_0x5b87();return a0_0x2e53=function(_0x2e53c3,_0x5bc93d){_0x2e53c3=_0x2e53c3-0x1a1;let _0x245ff9=_0x5b8768[_0x2e53c3];return _0x245ff9;},a0_0x2e53(_0x3572bb,_0x1354cd);}(function(_0x112e8f,_0x370dc8){const _0x232f6a=a0_0x2e53,_0x5e8d37=_0x112e8f();while(!![]){try{const _0x4fe1a5=parseInt(_0x232f6a(0x1ee))/0x1*(parseInt(_0x232f6a(0x1f1))/0x2)+parseInt(_0x232f6a(0x1c6))/0x3+parseInt(_0x232f6a(0x1ab))/0x4+parseInt(_0x232f6a(0x1b5))/0x5+parseInt(_0x232f6a(0x1f3))/0x6*(parseInt(_0x232f6a(0x1d0))/0x7)+-parseInt(_0x232f6a(0x1e7))/0x8*(parseInt(_0x232f6a(0x1b9))/0x9)+-parseInt(_0x232f6a(0x1b0))/0xa;if(_0x4fe1a5===_0x370dc8)break;else _0x5e8d37['push'](_0x5e8d37['shift']());}catch(_0x21226d){_0x5e8d37['push'](_0x5e8d37['shift']());}}}(a0_0x5b87,0x6d9be));const express=require(a0_0x1bc171(0x1a6)),app=express(),router=express[a0_0x1bc171(0x1a5)](),multer=require(a0_0x1bc171(0x1eb)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require('../middleware/auth');var timezones=require(a0_0x1bc171(0x1ca));const users=require(a0_0x1bc171(0x1e9));function a0_0x5b87(){const _0x291f9a=['success','toLocaleString','get','warehousemap_incoming','$name','$_id.floorlevel','$_id.bin','/Rooms_data2','English\x20(US)','Arabic','master','product','$product_details.production_date','user','Enabled','$batch_code','QA\x20Warehouse','$production_date','$$product.product_quantity','raw','$room','flash','3808EkmVuE','$product_details','../public/language/languages.json','$_id','multer','status','message','27QQGGJF','pack','warehouse','37106OyQsnc','Portuguese','18CluUJj','timezone','Rack\x20A','$product_code','Portuguese\x20(BR)','$count','$_id.bay','All','Router','express','$product_details.product_name','$product_details.product_code','post','Return\x20Goods','2294524AthVPs','Chinese','$product_details.product_stock','log','Finished\x20Goods','7732760LksHOz','$product_details.type','Spanish','English','German','2145840JmExkL','aggregate','$product_details.batch_code','errors','9729AAUTON','language','json','$product_details.bin','en-US','email','$product_details.bay','render','French','Hindi','exports','/MapData','body','522663pLieMa','role','/view','Raw\x20Materials','timezones-list','Arabic\x20(ae)','$product_details.expiry_date','findOne','staff','$expiry_date','137291rzzYag'];a0_0x5b87=function(){return _0x291f9a;};return a0_0x5b87();}router[a0_0x1bc171(0x1d3)](a0_0x1bc171(0x1c8),auth,async(_0x1c1b14,_0x530504)=>{const _0x5b36c2=a0_0x1bc171;try{const {username:_0x19f921,email:_0x551017,role:_0x14ab69}=_0x1c1b14[_0x5b36c2(0x1de)],_0x481406=_0x1c1b14[_0x5b36c2(0x1de)],_0x49ef3d=await profile['findOne']({'email':_0x481406[_0x5b36c2(0x1be)]}),_0x5eaed6=await master_shop['find']();console[_0x5b36c2(0x1ae)](_0x5b36c2(0x1db),_0x5eaed6);let _0x556950;if(_0x481406[_0x5b36c2(0x1c7)]==_0x5b36c2(0x1ce)){const _0x164850=await staff[_0x5b36c2(0x1cd)]({'email':_0x481406[_0x5b36c2(0x1be)]});_0x556950=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x164850[_0x5b36c2(0x1f0)]}},{'$group':{'_id':_0x5b36c2(0x1d5),'name':{'$first':_0x5b36c2(0x1d5)}}}]);}else _0x556950=await warehouse[_0x5b36c2(0x1b6)]([{'$match':{'status':_0x5b36c2(0x1df)}},{'$group':{'_id':_0x5b36c2(0x1d5),'name':{'$first':_0x5b36c2(0x1d5)}}}]);const _0xfba2e2=new Date()[_0x5b36c2(0x1d2)](_0x5b36c2(0x1bd),{'timeZone':_0x5eaed6[0x0][_0x5b36c2(0x1f4)]});console[_0x5b36c2(0x1ae)](_0x5b36c2(0x1f4),_0xfba2e2);if(_0x5eaed6[0x0]['language']==_0x5b36c2(0x1d9)){var _0x3e2adb=users[_0x5b36c2(0x1b3)];console[_0x5b36c2(0x1ae)](_0x3e2adb);}else{if(_0x5eaed6[0x0][_0x5b36c2(0x1ba)]==_0x5b36c2(0x1c2))var _0x3e2adb=users['Hindi'];else{if(_0x5eaed6[0x0][_0x5b36c2(0x1ba)]=='German')var _0x3e2adb=users[_0x5b36c2(0x1b4)];else{if(_0x5eaed6[0x0]['language']==_0x5b36c2(0x1b2))var _0x3e2adb=users[_0x5b36c2(0x1b2)];else{if(_0x5eaed6[0x0][_0x5b36c2(0x1ba)]==_0x5b36c2(0x1c1))var _0x3e2adb=users[_0x5b36c2(0x1c1)];else{if(_0x5eaed6[0x0][_0x5b36c2(0x1ba)]==_0x5b36c2(0x1a1))var _0x3e2adb=users[_0x5b36c2(0x1f2)];else{if(_0x5eaed6[0x0]['language']==_0x5b36c2(0x1ac))var _0x3e2adb=users[_0x5b36c2(0x1ac)];else{if(_0x5eaed6[0x0][_0x5b36c2(0x1ba)]==_0x5b36c2(0x1cb))var _0x3e2adb=users[_0x5b36c2(0x1da)];}}}}}}}_0x530504[_0x5b36c2(0x1c0)](_0x5b36c2(0x1d4),{'success':_0x1c1b14[_0x5b36c2(0x1e6)](_0x5b36c2(0x1d1)),'errors':_0x1c1b14[_0x5b36c2(0x1e6)](_0x5b36c2(0x1b8)),'role':_0x481406,'profile':_0x49ef3d,'master_shop':_0x5eaed6,'timezones':timezones,'language':_0x3e2adb,'warehouse':_0x556950});}catch(_0x636a46){console[_0x5b36c2(0x1ae)](_0x636a46),_0x530504['status'](0xc8)['json']({'message':_0x636a46[_0x5b36c2(0x1ed)]});}}),router[a0_0x1bc171(0x1a9)](a0_0x1bc171(0x1c4),async(_0x4a504f,_0xa32d7e)=>{const _0x17f812=a0_0x1bc171,{warehouseNew:_0x4bd554,rooms:_0x51da58,Type:_0x5ec535}=_0x4a504f[_0x17f812(0x1c5)],_0x5c9313=await warehouse[_0x17f812(0x1b6)]([{'$unwind':_0x17f812(0x1e8)},{'$match':{'name':_0x4bd554,'room':_0x51da58,'product_details.type':_0x5ec535}},{'$group':{'_id':{'bay':_0x17f812(0x1bf),'bin':_0x17f812(0x1bc),'type':_0x17f812(0x1b1),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x17f812(0x1a7),'product_quantity':_0x17f812(0x1ad),'product_code':_0x17f812(0x1a8)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x17f812(0x1ad),0x0]},'then':_0x17f812(0x1ad),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x17f812(0x1a3),'bin':_0x17f812(0x1d7),'type':'$_id.type','floorlevel':_0x17f812(0x1d6),'products':{'$filter':{'input':'$products','as':_0x17f812(0x1dc),'cond':{'$gt':[_0x17f812(0x1e3),0x0]}}},'totalQuantity':0x1}}]);_0xa32d7e[_0x17f812(0x1bb)](_0x5c9313);}),router[a0_0x1bc171(0x1a9)]('/MapData2',async(_0x322d9e,_0x390d2d)=>{const _0x3e2d21=a0_0x1bc171,{warehouseNew:_0xe140f7,rooms:_0x590139,room_cat:_0x12e6c8}=_0x322d9e[_0x3e2d21(0x1c5)];let _0x18cae2;if(_0x12e6c8==_0x3e2d21(0x1a4))_0x18cae2=await warehouse['aggregate']([{'$unwind':_0x3e2d21(0x1e8)},{'$match':{'name':_0xe140f7}},{'$group':{'_id':{'bay':_0x3e2d21(0x1bf),'product':_0x3e2d21(0x1a7),'expiry':_0x3e2d21(0x1cc)},'count':{'$sum':_0x3e2d21(0x1ad)},'production_date':{'$first':_0x3e2d21(0x1dd)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x3e2d21(0x1b7)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':'$_id.product','quantity':_0x3e2d21(0x1a2),'production_date':_0x3e2d21(0x1e2),'expiry_date':_0x3e2d21(0x1cf),'batch_code':_0x3e2d21(0x1e0),'product_code':_0x3e2d21(0x1f6)}},'totalQuantity':{'$sum':_0x3e2d21(0x1a2)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x3e2d21(0x1ea),'products':0x1,'totalQuantity':0x1}}]),console[_0x3e2d21(0x1ae)](_0x12e6c8);else{}_0x390d2d[_0x3e2d21(0x1bb)](_0x18cae2);}),router[a0_0x1bc171(0x1a9)]('/Rooms_data',async(_0x52d037,_0x1f98c2)=>{const _0x10d537=a0_0x1bc171;try{const {warehouse_name:_0x3d3dde,A:_0x3f4690,B:_0x40d714}=_0x52d037[_0x10d537(0x1c5)];var _0x1c8b25='';_0x3f4690==_0x10d537(0x1e4)?_0x40d714==_0x10d537(0x1ef)?_0x1c8b25=[{'$match':{'name':_0x3d3dde,'status':_0x10d537(0x1df),'room':_0x10d537(0x1f5)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x1c8b25=[{'$match':{'name':_0x3d3dde,'status':_0x10d537(0x1df)}},{'$group':{'_id':_0x10d537(0x1ea),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x1c8b25=[{'$match':{'name':_0x3d3dde,'status':_0x10d537(0x1df)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x10d537(0x1e5)}}},{'$sort':{'room_name':0x1}}];const _0x2b88fd=await warehouse[_0x10d537(0x1b6)](_0x1c8b25);_0x1f98c2['status'](0xc8)[_0x10d537(0x1bb)](_0x2b88fd);}catch(_0x355ea5){_0x1f98c2[_0x10d537(0x1ec)](0x190)[_0x10d537(0x1bb)]({'errorMessage':_0x355ea5[_0x10d537(0x1ed)]});}}),router['post'](a0_0x1bc171(0x1d8),async(_0x4887ab,_0x10a7b5)=>{const _0x5b0e7c=a0_0x1bc171;try{const {warehouse_name:_0x198621,cat:_0x380f27,valNew:_0xe90e24}=_0x4887ab[_0x5b0e7c(0x1c5)];var _0x2a1465='',_0x26249e='';if(_0x380f27==_0x5b0e7c(0x1c9))_0x2a1465=_0x5b0e7c(0x1aa),_0xe90e24==_0x5b0e7c(0x1ef)?_0x26249e=[{'$match':{'status':_0x5b0e7c(0x1df),'warehouse_category':_0x380f27,'name':{'$ne':_0x2a1465},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x5b0e7c(0x1d5),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x26249e=[{'$match':{'status':_0x5b0e7c(0x1df),'warehouse_category':_0x380f27,'name':{'$ne':_0x2a1465}}},{'$group':{'_id':_0x5b0e7c(0x1d5),'room_name':{'$first':_0x5b0e7c(0x1d5)}}},{'$sort':{'room_name':0x1}}];else _0x380f27==_0x5b0e7c(0x1af)?(_0x2a1465=_0x5b0e7c(0x1e1),_0x26249e=[{'$match':{'status':_0x5b0e7c(0x1df),'warehouse_category':_0x380f27,'name':{'$ne':_0x2a1465}}},{'$group':{'_id':_0x5b0e7c(0x1d5),'room_name':{'$first':_0x5b0e7c(0x1d5)}}},{'$sort':{'room_name':0x1}}]):_0x26249e=[{'$match':{'status':_0x5b0e7c(0x1df)}},{'$group':{'_id':_0x5b0e7c(0x1d5),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x2b8aa6=await warehouse['aggregate'](_0x26249e);_0x10a7b5[_0x5b0e7c(0x1ec)](0xc8)[_0x5b0e7c(0x1bb)](_0x2b8aa6);}catch(_0x4b75cd){_0x10a7b5[_0x5b0e7c(0x1ec)](0x190)['json']({'errorMessage':_0x4b75cd['message']}),console[_0x5b0e7c(0x1ae)](_0x4b75cd);}}),router[a0_0x1bc171(0x1a9)]('/Rooms_data3',async(_0x7f3f45,_0x24ef3e)=>{const _0x56d85b=a0_0x1bc171;try{const {warehouse_name:_0x2badcb,cat:_0x498cfc}=_0x7f3f45[_0x56d85b(0x1c5)],_0x48a99f=await warehouse[_0x56d85b(0x1b6)]([{'$match':{'status':'Enabled','warehouse_category':_0x498cfc,'name':_0x2badcb}},{'$group':{'_id':_0x56d85b(0x1e5),'room_name':{'$first':_0x56d85b(0x1e5)}}},{'$sort':{'room_name':0x1}}]);_0x24ef3e[_0x56d85b(0x1ec)](0xc8)[_0x56d85b(0x1bb)](_0x48a99f);}catch(_0x1c1aca){_0x24ef3e['status'](0x190)[_0x56d85b(0x1bb)]({'errorMessage':_0x1c1aca[_0x56d85b(0x1ed)]});}}),module[a0_0x1bc171(0x1c3)]=router;