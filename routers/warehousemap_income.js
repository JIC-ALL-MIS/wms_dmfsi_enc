const a0_0x360938=a0_0x244a;(function(_0x253bc7,_0x2d564b){const _0x4115a7=a0_0x244a,_0x4703be=_0x253bc7();while(!![]){try{const _0x17840e=-parseInt(_0x4115a7(0xcc))/0x1+-parseInt(_0x4115a7(0xf8))/0x2*(-parseInt(_0x4115a7(0xdf))/0x3)+parseInt(_0x4115a7(0xc6))/0x4*(parseInt(_0x4115a7(0xd0))/0x5)+parseInt(_0x4115a7(0xe2))/0x6+-parseInt(_0x4115a7(0xa7))/0x7+-parseInt(_0x4115a7(0xc0))/0x8*(parseInt(_0x4115a7(0xde))/0x9)+parseInt(_0x4115a7(0xd8))/0xa;if(_0x17840e===_0x2d564b)break;else _0x4703be['push'](_0x4703be['shift']());}catch(_0x2b6474){_0x4703be['push'](_0x4703be['shift']());}}}(a0_0x3943,0x34fdb));const express=require(a0_0x360938(0xb9)),app=express(),router=express[a0_0x360938(0xbb)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x360938(0xe9)),auth=require(a0_0x360938(0xd5));var timezones=require(a0_0x360938(0xb2));function a0_0x244a(_0xfe299d,_0x288cf8){const _0x3943d6=a0_0x3943();return a0_0x244a=function(_0x244a02,_0x12eaa9){_0x244a02=_0x244a02-0xa6;let _0x42b339=_0x3943d6[_0x244a02];return _0x42b339;},a0_0x244a(_0xfe299d,_0x288cf8);}const users=require('../public/language/languages.json');function a0_0x3943(){const _0x1360a3=['280110AlQCAb','/view','English','findOne','24195PDImQC','email','$expiry_date','/MapData2','$product_details','../middleware/auth','staff','Spanish','3586430LTHjaT','$product_details.production_date','product','Hindi','$room','$product_details.product_stock','3558231HOablM','9kSxcSQ','DRY\x20STORAGE','/Rooms_data','1948434lZNZRM','render','$product_details.bin','English\x20(US)','toLocaleString','raw','$product_code','../models/all_models','$production_date','$_id.product','log','$_id.type','warehousemap_incoming','pack','$name','Finished\x20Goods','$count','Enabled','Return\x20Goods','body','timezone','QA\x20Warehouse','139744MGLpWS','language','$product_details.expiry_date','errors','find','/MapData','2679313SwVXrH','German','$_id.bay','post','$_id.bin','Raw\x20Materials','en-US','master','$products','$product_details.product_name','$product_details.floorlevel','timezones-list','All','$$product.product_quantity','$_id.floorlevel','message','$_id','Arabic','express','exports','Router','status','$product_details.type','get','warehouse','8uIWktn','$product_details.product_code','json','role','Chinese','Portuguese\x20(BR)','316bZQFzG','$product_details.bay','aggregate','flash','Arabic\x20(ae)','French'];a0_0x3943=function(){return _0x1360a3;};return a0_0x3943();}router[a0_0x360938(0xbe)](a0_0x360938(0xcd),auth,async(_0x26e7ba,_0x185d1a)=>{const _0x4ae7d4=a0_0x360938;try{const {username:_0x2d24d7,email:_0x33d491,role:_0x37f610}=_0x26e7ba['user'],_0x506a3f=_0x26e7ba['user'],_0x4f3622=await profile['findOne']({'email':_0x506a3f['email']}),_0x34ef83=await master_shop[_0x4ae7d4(0xfc)]();console[_0x4ae7d4(0xec)](_0x4ae7d4(0xae),_0x34ef83);let _0x393967;if(_0x506a3f[_0x4ae7d4(0xc3)]==_0x4ae7d4(0xd6)){const _0x46382f=await staff[_0x4ae7d4(0xcf)]({'email':_0x506a3f[_0x4ae7d4(0xd1)]});_0x393967=await warehouse['aggregate']([{'$match':{'status':_0x4ae7d4(0xf3),'name':_0x46382f[_0x4ae7d4(0xbf)]}},{'$group':{'_id':'$name','name':{'$first':_0x4ae7d4(0xf0)}}}]);}else _0x393967=await warehouse[_0x4ae7d4(0xc8)]([{'$match':{'status':_0x4ae7d4(0xf3)}},{'$group':{'_id':_0x4ae7d4(0xf0),'name':{'$first':_0x4ae7d4(0xf0)}}}]);const _0x3c16bf=new Date()[_0x4ae7d4(0xe6)](_0x4ae7d4(0xad),{'timeZone':_0x34ef83[0x0][_0x4ae7d4(0xf6)]});console['log']('timezone',_0x3c16bf);if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]==_0x4ae7d4(0xe5)){var _0x4739f6=users[_0x4ae7d4(0xce)];console['log'](_0x4739f6);}else{if(_0x34ef83[0x0]['language']==_0x4ae7d4(0xdb))var _0x4739f6=users[_0x4ae7d4(0xdb)];else{if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]=='German')var _0x4739f6=users[_0x4ae7d4(0xa8)];else{if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]=='Spanish')var _0x4739f6=users[_0x4ae7d4(0xd7)];else{if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]==_0x4ae7d4(0xcb))var _0x4739f6=users[_0x4ae7d4(0xcb)];else{if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]==_0x4ae7d4(0xc5))var _0x4739f6=users['Portuguese'];else{if(_0x34ef83[0x0]['language']=='Chinese')var _0x4739f6=users[_0x4ae7d4(0xc4)];else{if(_0x34ef83[0x0][_0x4ae7d4(0xf9)]==_0x4ae7d4(0xca))var _0x4739f6=users[_0x4ae7d4(0xb8)];}}}}}}}_0x185d1a[_0x4ae7d4(0xe3)](_0x4ae7d4(0xee),{'success':_0x26e7ba[_0x4ae7d4(0xc9)]('success'),'errors':_0x26e7ba[_0x4ae7d4(0xc9)](_0x4ae7d4(0xfb)),'role':_0x506a3f,'profile':_0x4f3622,'master_shop':_0x34ef83,'timezones':timezones,'language':_0x4739f6,'warehouse':_0x393967});}catch(_0x5b9c1f){console[_0x4ae7d4(0xec)](_0x5b9c1f),_0x185d1a[_0x4ae7d4(0xbc)](0xc8)[_0x4ae7d4(0xc2)]({'message':_0x5b9c1f[_0x4ae7d4(0xb6)]});}}),router['post'](a0_0x360938(0xa6),async(_0x5e4738,_0x2f9d46)=>{const _0xf76b1a=a0_0x360938,{warehouseNew:_0x14191,rooms:_0x4657e0,Type:_0x15ad98}=_0x5e4738[_0xf76b1a(0xf5)],_0x58490d=await warehouse['aggregate']([{'$unwind':_0xf76b1a(0xd4)},{'$match':{'name':_0x14191,'room':_0x4657e0,'product_details.type':_0x15ad98}},{'$group':{'_id':{'bay':_0xf76b1a(0xc7),'bin':_0xf76b1a(0xe4),'type':_0xf76b1a(0xbd),'floorlevel':_0xf76b1a(0xb1)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0xf76b1a(0xdd),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0xf76b1a(0xdd),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0xf76b1a(0xa9),'bin':_0xf76b1a(0xab),'type':_0xf76b1a(0xed),'floorlevel':_0xf76b1a(0xb5),'products':{'$filter':{'input':_0xf76b1a(0xaf),'as':_0xf76b1a(0xda),'cond':{'$gt':[_0xf76b1a(0xb4),0x0]}}},'totalQuantity':0x1}}]);_0x2f9d46[_0xf76b1a(0xc2)](_0x58490d);}),router[a0_0x360938(0xaa)](a0_0x360938(0xd3),async(_0x156752,_0x4bafa2)=>{const _0x51c9b9=a0_0x360938,{warehouseNew:_0x46e8e8,rooms:_0x3c5355,room_cat:_0x8d27c3}=_0x156752[_0x51c9b9(0xf5)];let _0x1bd42;if(_0x8d27c3==_0x51c9b9(0xb3))_0x1bd42=await warehouse[_0x51c9b9(0xc8)]([{'$unwind':_0x51c9b9(0xd4)},{'$match':{'name':_0x46e8e8}},{'$group':{'_id':{'bay':_0x51c9b9(0xc7),'product':_0x51c9b9(0xb0),'expiry':_0x51c9b9(0xfa)},'count':{'$sum':_0x51c9b9(0xdd)},'production_date':{'$first':_0x51c9b9(0xd9)},'expiry_date':{'$first':_0x51c9b9(0xfa)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x51c9b9(0xc1)}}},{'$group':{'_id':_0x51c9b9(0xa9),'products':{'$push':{'product':_0x51c9b9(0xeb),'quantity':_0x51c9b9(0xf2),'production_date':_0x51c9b9(0xea),'expiry_date':_0x51c9b9(0xd2),'batch_code':'$batch_code','product_code':_0x51c9b9(0xe8)}},'totalQuantity':{'$sum':_0x51c9b9(0xf2)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x51c9b9(0xb7),'products':0x1,'totalQuantity':0x1}}]),console[_0x51c9b9(0xec)](_0x8d27c3);else{}_0x4bafa2[_0x51c9b9(0xc2)](_0x1bd42);}),router[a0_0x360938(0xaa)](a0_0x360938(0xe1),async(_0x530e5f,_0x203d81)=>{const _0x3cc794=a0_0x360938;try{const {warehouse_name:_0x4860fd,A:_0x1fff48,B:_0x140686}=_0x530e5f[_0x3cc794(0xf5)];var _0x1213b1='';_0x1fff48==_0x3cc794(0xe7)?_0x140686==_0x3cc794(0xef)?_0x1213b1=[{'$match':{'name':_0x4860fd,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x1213b1=[{'$match':{'name':_0x4860fd,'status':_0x3cc794(0xf3)}},{'$group':{'_id':_0x3cc794(0xb7),'room_name':{'$first':_0x3cc794(0xdc)}}},{'$sort':{'room_name':0x1}}]:_0x1213b1=[{'$match':{'name':_0x4860fd,'status':'Enabled'}},{'$group':{'_id':_0x3cc794(0xb7),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x4b7f8e=await warehouse[_0x3cc794(0xc8)](_0x1213b1);_0x203d81[_0x3cc794(0xbc)](0xc8)[_0x3cc794(0xc2)](_0x4b7f8e);}catch(_0x4cd161){_0x203d81[_0x3cc794(0xbc)](0x190)[_0x3cc794(0xc2)]({'errorMessage':_0x4cd161[_0x3cc794(0xb6)]});}}),router[a0_0x360938(0xaa)]('/Rooms_data2',async(_0x27c150,_0x445f0a)=>{const _0xffddfe=a0_0x360938;try{const {warehouse_name:_0x1317b7,cat:_0x37a6ae,valNew:_0x3d01ed}=_0x27c150[_0xffddfe(0xf5)];var _0x56559a='',_0x42de3f='';if(_0x37a6ae==_0xffddfe(0xac))_0x56559a=_0xffddfe(0xf4),_0x3d01ed=='pack'?_0x42de3f=[{'$match':{'status':_0xffddfe(0xf3),'warehouse_category':_0x37a6ae,'name':{'$ne':_0x56559a},'name':_0xffddfe(0xe0)}},{'$group':{'_id':_0xffddfe(0xf0),'room_name':{'$first':_0xffddfe(0xf0)}}},{'$sort':{'room_name':0x1}}]:_0x42de3f=[{'$match':{'status':_0xffddfe(0xf3),'warehouse_category':_0x37a6ae,'name':{'$ne':_0x56559a}}},{'$group':{'_id':_0xffddfe(0xf0),'room_name':{'$first':_0xffddfe(0xf0)}}},{'$sort':{'room_name':0x1}}];else _0x37a6ae==_0xffddfe(0xf1)?(_0x56559a=_0xffddfe(0xf7),_0x42de3f=[{'$match':{'status':'Enabled','warehouse_category':_0x37a6ae,'name':{'$ne':_0x56559a}}},{'$group':{'_id':_0xffddfe(0xf0),'room_name':{'$first':_0xffddfe(0xf0)}}},{'$sort':{'room_name':0x1}}]):_0x42de3f=[{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x258f35=await warehouse['aggregate'](_0x42de3f);_0x445f0a['status'](0xc8)[_0xffddfe(0xc2)](_0x258f35);}catch(_0x2edd3f){_0x445f0a[_0xffddfe(0xbc)](0x190)[_0xffddfe(0xc2)]({'errorMessage':_0x2edd3f[_0xffddfe(0xb6)]}),console[_0xffddfe(0xec)](_0x2edd3f);}}),router[a0_0x360938(0xaa)]('/Rooms_data3',async(_0x37fcaf,_0x4a4847)=>{const _0x52b040=a0_0x360938;try{const {warehouse_name:_0x458152,cat:_0x119bb5}=_0x37fcaf[_0x52b040(0xf5)],_0x579a7f=await warehouse[_0x52b040(0xc8)]([{'$match':{'status':'Enabled','warehouse_category':_0x119bb5,'name':_0x458152}},{'$group':{'_id':'$room','room_name':{'$first':_0x52b040(0xdc)}}},{'$sort':{'room_name':0x1}}]);_0x4a4847['status'](0xc8)['json'](_0x579a7f);}catch(_0x33bbd9){_0x4a4847[_0x52b040(0xbc)](0x190)['json']({'errorMessage':_0x33bbd9['message']});}}),module[a0_0x360938(0xba)]=router;