const a0_0x602108=a0_0x2038;function a0_0x2aae(){const _0x39ae3f=['Portuguese','English\x20(US)','Chinese','1482928vhgytJ','flash','Router','1816588cgpQLK','Enabled','$room','$product_details.bay','Return\x20Goods','json','3CMlWca','pack','Spanish','$product_details.batch_code','$product_details.expiry_date','staff','$name','6JQLiCC','get','product','928442RBwmBk','../models/all_models','render','German','$_id.product','$$product.product_quantity','$products','master','aggregate','role','$batch_code','$production_date','$product_details.product_name','DRY\x20STORAGE','Portuguese\x20(BR)','Finished\x20Goods','/MapData2','timezone','message','language','/Rooms_data','$expiry_date','express','$_id.bay','$_id','/Rooms_data3','359355qPsELN','QA\x20Warehouse','598820OaKHWA','$product_code','2477559ryrXBB','../public/language/languages.json','en-US','findOne','$_id.bin','exports','body','status','Arabic\x20(ae)','$_id.floorlevel','Arabic','$product_details.type','$product_details.product_stock','$product_details.product_code','user','4901022FFfirS','post','email','../middleware/auth','find','log','Raw\x20Materials','$product_details.bin','raw','French','$count'];a0_0x2aae=function(){return _0x39ae3f;};return a0_0x2aae();}(function(_0x1d10fe,_0x1d4d5f){const _0x4bd765=a0_0x2038,_0x13aaef=_0x1d10fe();while(!![]){try{const _0x234df4=-parseInt(_0x4bd765(0x1a4))/0x1+parseInt(_0x4bd765(0x1d8))/0x2+-parseInt(_0x4bd765(0x1ce))/0x3*(-parseInt(_0x4bd765(0x1c8))/0x4)+parseInt(_0x4bd765(0x1a6))/0x5+-parseInt(_0x4bd765(0x1d5))/0x6*(-parseInt(_0x4bd765(0x1a8))/0x7)+-parseInt(_0x4bd765(0x1c5))/0x8+-parseInt(_0x4bd765(0x1b7))/0x9;if(_0x234df4===_0x1d4d5f)break;else _0x13aaef['push'](_0x13aaef['shift']());}catch(_0xab9e35){_0x13aaef['push'](_0x13aaef['shift']());}}}(a0_0x2aae,0x49ec6));const express=require(a0_0x602108(0x1a0)),app=express(),router=express[a0_0x602108(0x1c7)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x602108(0x1d9)),auth=require(a0_0x602108(0x1ba));var timezones=require('timezones-list');function a0_0x2038(_0x36ac74,_0x29566f){const _0x2aaeba=a0_0x2aae();return a0_0x2038=function(_0x203830,_0x51b512){_0x203830=_0x203830-0x198;let _0x57f4de=_0x2aaeba[_0x203830];return _0x57f4de;},a0_0x2038(_0x36ac74,_0x29566f);}const users=require(a0_0x602108(0x1a9));router[a0_0x602108(0x1d6)]('/view',auth,async(_0x5dc6f2,_0x50d367)=>{const _0x5ebdec=a0_0x602108;try{const {username:_0xf72f93,email:_0x29b89e,role:_0x5139f6}=_0x5dc6f2[_0x5ebdec(0x1b6)],_0x55e1fe=_0x5dc6f2['user'],_0x46db7e=await profile[_0x5ebdec(0x1ab)]({'email':_0x55e1fe[_0x5ebdec(0x1b9)]}),_0x2f9f75=await master_shop[_0x5ebdec(0x1bb)]();console['log'](_0x5ebdec(0x1df),_0x2f9f75);let _0x4553a1;if(_0x55e1fe[_0x5ebdec(0x1e1)]==_0x5ebdec(0x1d3)){const _0x5ccb99=await staff['findOne']({'email':_0x55e1fe[_0x5ebdec(0x1b9)]});_0x4553a1=await warehouse['aggregate']([{'$match':{'status':_0x5ebdec(0x1c9),'name':_0x5ccb99['warehouse']}},{'$group':{'_id':_0x5ebdec(0x1d4),'name':{'$first':_0x5ebdec(0x1d4)}}}]);}else _0x4553a1=await warehouse[_0x5ebdec(0x1e0)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x5ebdec(0x1d4),'name':{'$first':_0x5ebdec(0x1d4)}}}]);const _0x1e19cb=new Date()['toLocaleString'](_0x5ebdec(0x1aa),{'timeZone':_0x2f9f75[0x0][_0x5ebdec(0x19b)]});console[_0x5ebdec(0x1bc)]('timezone',_0x1e19cb);if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x1c3)){var _0x41e5d3=users['English'];console[_0x5ebdec(0x1bc)](_0x41e5d3);}else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]=='Hindi')var _0x41e5d3=users['Hindi'];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x1db))var _0x41e5d3=users[_0x5ebdec(0x1db)];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x1d0))var _0x41e5d3=users['Spanish'];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x1c0))var _0x41e5d3=users[_0x5ebdec(0x1c0)];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x198))var _0x41e5d3=users[_0x5ebdec(0x1c2)];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]=='Chinese')var _0x41e5d3=users[_0x5ebdec(0x1c4)];else{if(_0x2f9f75[0x0][_0x5ebdec(0x19d)]==_0x5ebdec(0x1b0))var _0x41e5d3=users[_0x5ebdec(0x1b2)];}}}}}}}_0x50d367[_0x5ebdec(0x1da)]('warehousemap_incoming',{'success':_0x5dc6f2[_0x5ebdec(0x1c6)]('success'),'errors':_0x5dc6f2[_0x5ebdec(0x1c6)]('errors'),'role':_0x55e1fe,'profile':_0x46db7e,'master_shop':_0x2f9f75,'timezones':timezones,'language':_0x41e5d3,'warehouse':_0x4553a1});}catch(_0x4b8dd5){console[_0x5ebdec(0x1bc)](_0x4b8dd5),_0x50d367[_0x5ebdec(0x1af)](0xc8)[_0x5ebdec(0x1cd)]({'message':_0x4b8dd5['message']});}}),router[a0_0x602108(0x1b8)]('/MapData',async(_0x4d8eda,_0x23e467)=>{const _0x487eb6=a0_0x602108,{warehouseNew:_0x51dd8f,rooms:_0x1085fc,Type:_0x18cd77}=_0x4d8eda['body'],_0x35e5d2=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x51dd8f,'room':_0x1085fc,'product_details.type':_0x18cd77}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x487eb6(0x1be),'type':_0x487eb6(0x1b3),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x487eb6(0x1e4),'product_quantity':_0x487eb6(0x1b4),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x487eb6(0x1b4),0x0]},'then':_0x487eb6(0x1b4),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x487eb6(0x1a1),'bin':_0x487eb6(0x1ac),'type':'$_id.type','floorlevel':_0x487eb6(0x1b1),'products':{'$filter':{'input':_0x487eb6(0x1de),'as':_0x487eb6(0x1d7),'cond':{'$gt':[_0x487eb6(0x1dd),0x0]}}},'totalQuantity':0x1}}]);_0x23e467[_0x487eb6(0x1cd)](_0x35e5d2);}),router['post'](a0_0x602108(0x19a),async(_0x25880c,_0x1089f1)=>{const _0x22b35e=a0_0x602108,{warehouseNew:_0xb0d72d,rooms:_0x24c3b4,room_cat:_0x134235}=_0x25880c[_0x22b35e(0x1ae)];let _0x497d13;if(_0x134235=='All')_0x497d13=await warehouse[_0x22b35e(0x1e0)]([{'$unwind':'$product_details'},{'$match':{'name':_0xb0d72d}},{'$group':{'_id':{'bay':_0x22b35e(0x1cb),'product':_0x22b35e(0x1e4),'expiry':_0x22b35e(0x1d2)},'count':{'$sum':_0x22b35e(0x1b4)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x22b35e(0x1d2)},'batch_code':{'$first':_0x22b35e(0x1d1)},'product_code':{'$first':_0x22b35e(0x1b5)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x22b35e(0x1dc),'quantity':_0x22b35e(0x1c1),'production_date':_0x22b35e(0x1e3),'expiry_date':_0x22b35e(0x19f),'batch_code':_0x22b35e(0x1e2),'product_code':_0x22b35e(0x1a7)}},'totalQuantity':{'$sum':_0x22b35e(0x1c1)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x22b35e(0x1a2),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x134235);else{}_0x1089f1[_0x22b35e(0x1cd)](_0x497d13);}),router[a0_0x602108(0x1b8)](a0_0x602108(0x19e),async(_0x34f989,_0x3d131f)=>{const _0xdaadd4=a0_0x602108;try{const {warehouse_name:_0x296b85,A:_0x226cea,B:_0x56cc11}=_0x34f989['body'];var _0x40d126='';_0x226cea==_0xdaadd4(0x1bf)?_0x56cc11==_0xdaadd4(0x1cf)?_0x40d126=[{'$match':{'name':_0x296b85,'status':_0xdaadd4(0x1c9),'room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':_0xdaadd4(0x1ca)}}},{'$sort':{'room_name':0x1}}]:_0x40d126=[{'$match':{'name':_0x296b85,'status':_0xdaadd4(0x1c9)}},{'$group':{'_id':'$_id','room_name':{'$first':_0xdaadd4(0x1ca)}}},{'$sort':{'room_name':0x1}}]:_0x40d126=[{'$match':{'name':_0x296b85,'status':_0xdaadd4(0x1c9)}},{'$group':{'_id':'$_id','room_name':{'$first':_0xdaadd4(0x1ca)}}},{'$sort':{'room_name':0x1}}];const _0x9b183f=await warehouse[_0xdaadd4(0x1e0)](_0x40d126);_0x3d131f[_0xdaadd4(0x1af)](0xc8)[_0xdaadd4(0x1cd)](_0x9b183f);}catch(_0x3ad8f0){_0x3d131f[_0xdaadd4(0x1af)](0x190)[_0xdaadd4(0x1cd)]({'errorMessage':_0x3ad8f0[_0xdaadd4(0x19c)]});}}),router[a0_0x602108(0x1b8)]('/Rooms_data2',async(_0x2a5db2,_0x1f07b1)=>{const _0x1410d5=a0_0x602108;try{const {warehouse_name:_0x471a39,cat:_0x22890b,valNew:_0x4245ed}=_0x2a5db2[_0x1410d5(0x1ae)];var _0x527253='',_0x19d87e='';if(_0x22890b==_0x1410d5(0x1bd))_0x527253=_0x1410d5(0x1cc),_0x4245ed==_0x1410d5(0x1cf)?_0x19d87e=[{'$match':{'status':_0x1410d5(0x1c9),'warehouse_category':_0x22890b,'name':{'$ne':_0x527253},'name':_0x1410d5(0x1e5)}},{'$group':{'_id':_0x1410d5(0x1d4),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x19d87e=[{'$match':{'status':_0x1410d5(0x1c9),'warehouse_category':_0x22890b,'name':{'$ne':_0x527253}}},{'$group':{'_id':_0x1410d5(0x1d4),'room_name':{'$first':_0x1410d5(0x1d4)}}},{'$sort':{'room_name':0x1}}];else _0x22890b==_0x1410d5(0x199)?(_0x527253=_0x1410d5(0x1a5),_0x19d87e=[{'$match':{'status':_0x1410d5(0x1c9),'warehouse_category':_0x22890b,'name':{'$ne':_0x527253}}},{'$group':{'_id':_0x1410d5(0x1d4),'room_name':{'$first':_0x1410d5(0x1d4)}}},{'$sort':{'room_name':0x1}}]):_0x19d87e=[{'$match':{'status':_0x1410d5(0x1c9)}},{'$group':{'_id':_0x1410d5(0x1d4),'room_name':{'$first':_0x1410d5(0x1d4)}}},{'$sort':{'room_name':0x1}}];const _0x1836a4=await warehouse[_0x1410d5(0x1e0)](_0x19d87e);_0x1f07b1[_0x1410d5(0x1af)](0xc8)[_0x1410d5(0x1cd)](_0x1836a4);}catch(_0x1bfb6b){_0x1f07b1[_0x1410d5(0x1af)](0x190)[_0x1410d5(0x1cd)]({'errorMessage':_0x1bfb6b[_0x1410d5(0x19c)]}),console[_0x1410d5(0x1bc)](_0x1bfb6b);}}),router[a0_0x602108(0x1b8)](a0_0x602108(0x1a3),async(_0x56d594,_0x52e0c5)=>{const _0x40e368=a0_0x602108;try{const {warehouse_name:_0x26c49c,cat:_0x4b95c3}=_0x56d594['body'],_0x2c68d1=await warehouse[_0x40e368(0x1e0)]([{'$match':{'status':'Enabled','warehouse_category':_0x4b95c3,'name':_0x26c49c}},{'$group':{'_id':_0x40e368(0x1ca),'room_name':{'$first':_0x40e368(0x1ca)}}},{'$sort':{'room_name':0x1}}]);_0x52e0c5[_0x40e368(0x1af)](0xc8)['json'](_0x2c68d1);}catch(_0x39013d){_0x52e0c5[_0x40e368(0x1af)](0x190)['json']({'errorMessage':_0x39013d[_0x40e368(0x19c)]});}}),module[a0_0x602108(0x1ad)]=router;