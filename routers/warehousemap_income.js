function a0_0x539c(_0xbe280d,_0x1198d8){const _0x401771=a0_0x4017();return a0_0x539c=function(_0x539cdf,_0x2c3bac){_0x539cdf=_0x539cdf-0x89;let _0xb12066=_0x401771[_0x539cdf];return _0xb12066;},a0_0x539c(_0xbe280d,_0x1198d8);}const a0_0x4b7ae1=a0_0x539c;(function(_0x17834d,_0x1eff8e){const _0x2809ba=a0_0x539c,_0x20e4d5=_0x17834d();while(!![]){try{const _0x20858f=-parseInt(_0x2809ba(0xd0))/0x1*(parseInt(_0x2809ba(0xa2))/0x2)+parseInt(_0x2809ba(0xa6))/0x3*(-parseInt(_0x2809ba(0xb8))/0x4)+parseInt(_0x2809ba(0xae))/0x5+parseInt(_0x2809ba(0xb3))/0x6+-parseInt(_0x2809ba(0x95))/0x7+-parseInt(_0x2809ba(0x8b))/0x8*(parseInt(_0x2809ba(0xb1))/0x9)+parseInt(_0x2809ba(0x99))/0xa;if(_0x20858f===_0x1eff8e)break;else _0x20e4d5['push'](_0x20e4d5['shift']());}catch(_0x5ca2ba){_0x20e4d5['push'](_0x20e4d5['shift']());}}}(a0_0x4017,0x59ba1));const express=require('express'),app=express(),router=express[a0_0x4b7ae1(0xb9)](),multer=require(a0_0x4b7ae1(0xcb)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require('../middleware/auth');var timezones=require('timezones-list');function a0_0x4017(){const _0x3b9a5f=['51680pauWsy','$$product.product_quantity','warehouse','$product_code','findOne','toLocaleString','Spanish','$product_details.expiry_date','Portuguese\x20(BR)','English\x20(US)','581035FVvwlX','language','flash','Arabic','10042720gqdXwq','Return\x20Goods','get','Finished\x20Goods','aggregate','role','$products','Hindi','$room','700518dgSwxG','German','$_id.floorlevel','French','2043HsDgat','body','Chinese','pack','$product_details.production_date','/Rooms_data2','$_id.bay','$_id.bin','1191995VgnMag','$count','$_id.product','252KpEJbG','status','3563244gsLKHX','$product_details.product_code','$product_details.type','log','All','2964BNXESh','Router','product','en-US','$batch_code','/MapData','Raw\x20Materials','success','$_id.type','staff','message','post','timezone','json','../public/language/languages.json','$product_details.bay','DRY\x20STORAGE','/view','English','multer','user','email','$product_details.product_name','/Rooms_data','2lyZJAa','$expiry_date','$product_details.product_stock','$product_details','Enabled','$name','$product_details.bin','$product_details.floorlevel','exports','$_id','/Rooms_data3','Rack\x20A','$product_details.batch_code','warehousemap_incoming'];a0_0x4017=function(){return _0x3b9a5f;};return a0_0x4017();}const users=require(a0_0x4b7ae1(0xc6));router[a0_0x4b7ae1(0x9b)](a0_0x4b7ae1(0xc9),auth,async(_0x370389,_0x20896e)=>{const _0x3a7162=a0_0x4b7ae1;try{const {username:_0x356c9b,email:_0x4050ea,role:_0x4fccd8}=_0x370389[_0x3a7162(0xcc)],_0x2756bd=_0x370389[_0x3a7162(0xcc)],_0x4c276d=await profile[_0x3a7162(0x8f)]({'email':_0x2756bd[_0x3a7162(0xcd)]}),_0x49b831=await master_shop['find']();console[_0x3a7162(0xb6)]('master',_0x49b831);let _0x57d280;if(_0x2756bd[_0x3a7162(0x9e)]==_0x3a7162(0xc1)){const _0x136419=await staff[_0x3a7162(0x8f)]({'email':_0x2756bd[_0x3a7162(0xcd)]});_0x57d280=await warehouse['aggregate']([{'$match':{'status':_0x3a7162(0xd4),'name':_0x136419[_0x3a7162(0x8d)]}},{'$group':{'_id':_0x3a7162(0xd5),'name':{'$first':_0x3a7162(0xd5)}}}]);}else _0x57d280=await warehouse[_0x3a7162(0x9d)]([{'$match':{'status':_0x3a7162(0xd4)}},{'$group':{'_id':_0x3a7162(0xd5),'name':{'$first':'$name'}}}]);const _0x1cdac4=new Date()[_0x3a7162(0x90)](_0x3a7162(0xbb),{'timeZone':_0x49b831[0x0][_0x3a7162(0xc4)]});console[_0x3a7162(0xb6)](_0x3a7162(0xc4),_0x1cdac4);if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0x94)){var _0x12455a=users[_0x3a7162(0xca)];console[_0x3a7162(0xb6)](_0x12455a);}else{if(_0x49b831[0x0][_0x3a7162(0x96)]=='Hindi')var _0x12455a=users[_0x3a7162(0xa0)];else{if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0xa3))var _0x12455a=users[_0x3a7162(0xa3)];else{if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0x91))var _0x12455a=users[_0x3a7162(0x91)];else{if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0xa5))var _0x12455a=users['French'];else{if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0x93))var _0x12455a=users['Portuguese'];else{if(_0x49b831[0x0][_0x3a7162(0x96)]==_0x3a7162(0xa8))var _0x12455a=users['Chinese'];else{if(_0x49b831[0x0][_0x3a7162(0x96)]=='Arabic\x20(ae)')var _0x12455a=users[_0x3a7162(0x98)];}}}}}}}_0x20896e['render'](_0x3a7162(0x8a),{'success':_0x370389[_0x3a7162(0x97)](_0x3a7162(0xbf)),'errors':_0x370389[_0x3a7162(0x97)]('errors'),'role':_0x2756bd,'profile':_0x4c276d,'master_shop':_0x49b831,'timezones':timezones,'language':_0x12455a,'warehouse':_0x57d280});}catch(_0x372f4e){console[_0x3a7162(0xb6)](_0x372f4e),_0x20896e['status'](0xc8)[_0x3a7162(0xc5)]({'message':_0x372f4e['message']});}}),router[a0_0x4b7ae1(0xc3)](a0_0x4b7ae1(0xbd),async(_0xf1eb42,_0x4a4e43)=>{const _0x5d12db=a0_0x4b7ae1,{warehouseNew:_0x5c8c4b,rooms:_0x64a4d3,Type:_0x48826a}=_0xf1eb42['body'],_0x1ded12=await warehouse[_0x5d12db(0x9d)]([{'$unwind':_0x5d12db(0xd3)},{'$match':{'name':_0x5c8c4b,'room':_0x64a4d3,'product_details.type':_0x48826a}},{'$group':{'_id':{'bay':_0x5d12db(0xc7),'bin':_0x5d12db(0xd6),'type':_0x5d12db(0xb5),'floorlevel':_0x5d12db(0xd7)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x5d12db(0xd2),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x5d12db(0xd2),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5d12db(0xac),'bin':_0x5d12db(0xad),'type':_0x5d12db(0xc0),'floorlevel':_0x5d12db(0xa4),'products':{'$filter':{'input':_0x5d12db(0x9f),'as':_0x5d12db(0xba),'cond':{'$gt':[_0x5d12db(0x8c),0x0]}}},'totalQuantity':0x1}}]);_0x4a4e43['json'](_0x1ded12);}),router[a0_0x4b7ae1(0xc3)]('/MapData2',async(_0x2dcb0c,_0x393129)=>{const _0x3060b7=a0_0x4b7ae1,{warehouseNew:_0x1c07b6,rooms:_0x1bbe6f,room_cat:_0x273b3b}=_0x2dcb0c[_0x3060b7(0xa7)];let _0x420352;if(_0x273b3b==_0x3060b7(0xb7))_0x420352=await warehouse[_0x3060b7(0x9d)]([{'$unwind':_0x3060b7(0xd3)},{'$match':{'name':_0x1c07b6}},{'$group':{'_id':{'bay':_0x3060b7(0xc7),'product':_0x3060b7(0xce),'expiry':_0x3060b7(0x92)},'count':{'$sum':_0x3060b7(0xd2)},'production_date':{'$first':_0x3060b7(0xaa)},'expiry_date':{'$first':_0x3060b7(0x92)},'batch_code':{'$first':_0x3060b7(0x89)},'product_code':{'$first':_0x3060b7(0xb4)}}},{'$group':{'_id':_0x3060b7(0xac),'products':{'$push':{'product':_0x3060b7(0xb0),'quantity':_0x3060b7(0xaf),'production_date':'$production_date','expiry_date':_0x3060b7(0xd1),'batch_code':_0x3060b7(0xbc),'product_code':_0x3060b7(0x8e)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x3060b7(0xb6)](_0x273b3b);else{}_0x393129[_0x3060b7(0xc5)](_0x420352);}),router[a0_0x4b7ae1(0xc3)](a0_0x4b7ae1(0xcf),async(_0x3ea9a0,_0x1a7341)=>{const _0x41dd45=a0_0x4b7ae1;try{const {warehouse_name:_0x18d50f,A:_0x9c8fde,B:_0x298514}=_0x3ea9a0[_0x41dd45(0xa7)];var _0x2fddd5='';_0x9c8fde=='raw'?_0x298514==_0x41dd45(0xa9)?_0x2fddd5=[{'$match':{'name':_0x18d50f,'status':_0x41dd45(0xd4),'room':_0x41dd45(0xdb)}},{'$group':{'_id':_0x41dd45(0xd9),'room_name':{'$first':_0x41dd45(0xa1)}}},{'$sort':{'room_name':0x1}}]:_0x2fddd5=[{'$match':{'name':_0x18d50f,'status':'Enabled'}},{'$group':{'_id':_0x41dd45(0xd9),'room_name':{'$first':_0x41dd45(0xa1)}}},{'$sort':{'room_name':0x1}}]:_0x2fddd5=[{'$match':{'name':_0x18d50f,'status':_0x41dd45(0xd4)}},{'$group':{'_id':_0x41dd45(0xd9),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x3fb157=await warehouse['aggregate'](_0x2fddd5);_0x1a7341['status'](0xc8)[_0x41dd45(0xc5)](_0x3fb157);}catch(_0x4c1a1c){_0x1a7341[_0x41dd45(0xb2)](0x190)['json']({'errorMessage':_0x4c1a1c[_0x41dd45(0xc2)]});}}),router[a0_0x4b7ae1(0xc3)](a0_0x4b7ae1(0xab),async(_0x1d44d7,_0x2de157)=>{const _0x18643f=a0_0x4b7ae1;try{const {warehouse_name:_0x53e5fa,cat:_0x3e72fa,valNew:_0xb132ec}=_0x1d44d7[_0x18643f(0xa7)];var _0x567a5d='',_0x3cd1ae='';if(_0x3e72fa==_0x18643f(0xbe))_0x567a5d=_0x18643f(0x9a),_0xb132ec==_0x18643f(0xa9)?_0x3cd1ae=[{'$match':{'status':_0x18643f(0xd4),'warehouse_category':_0x3e72fa,'name':{'$ne':_0x567a5d},'name':_0x18643f(0xc8)}},{'$group':{'_id':_0x18643f(0xd5),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x3cd1ae=[{'$match':{'status':_0x18643f(0xd4),'warehouse_category':_0x3e72fa,'name':{'$ne':_0x567a5d}}},{'$group':{'_id':_0x18643f(0xd5),'room_name':{'$first':_0x18643f(0xd5)}}},{'$sort':{'room_name':0x1}}];else _0x3e72fa==_0x18643f(0x9c)?(_0x567a5d='QA\x20Warehouse',_0x3cd1ae=[{'$match':{'status':_0x18643f(0xd4),'warehouse_category':_0x3e72fa,'name':{'$ne':_0x567a5d}}},{'$group':{'_id':_0x18643f(0xd5),'room_name':{'$first':_0x18643f(0xd5)}}},{'$sort':{'room_name':0x1}}]):_0x3cd1ae=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x18643f(0xd5),'room_name':{'$first':_0x18643f(0xd5)}}},{'$sort':{'room_name':0x1}}];const _0x58f2f6=await warehouse[_0x18643f(0x9d)](_0x3cd1ae);_0x2de157[_0x18643f(0xb2)](0xc8)[_0x18643f(0xc5)](_0x58f2f6);}catch(_0x234396){_0x2de157[_0x18643f(0xb2)](0x190)[_0x18643f(0xc5)]({'errorMessage':_0x234396['message']}),console[_0x18643f(0xb6)](_0x234396);}}),router['post'](a0_0x4b7ae1(0xda),async(_0x37da67,_0x481b02)=>{const _0x5d04a9=a0_0x4b7ae1;try{const {warehouse_name:_0x5cbdad,cat:_0x4e16ff}=_0x37da67[_0x5d04a9(0xa7)],_0x5abc13=await warehouse[_0x5d04a9(0x9d)]([{'$match':{'status':_0x5d04a9(0xd4),'warehouse_category':_0x4e16ff,'name':_0x5cbdad}},{'$group':{'_id':_0x5d04a9(0xa1),'room_name':{'$first':_0x5d04a9(0xa1)}}},{'$sort':{'room_name':0x1}}]);_0x481b02['status'](0xc8)[_0x5d04a9(0xc5)](_0x5abc13);}catch(_0x4bf08f){_0x481b02[_0x5d04a9(0xb2)](0x190)[_0x5d04a9(0xc5)]({'errorMessage':_0x4bf08f[_0x5d04a9(0xc2)]});}}),module[a0_0x4b7ae1(0xd8)]=router;