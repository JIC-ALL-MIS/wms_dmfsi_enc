function a0_0x2887(){const _0x2c77af=['Return\x20Goods','$products','$product_details.type','190932YplZnF','$_id.type','$batch_code','Router','French','4HJSbhB','$product_details.production_date','Chinese','multer','English\x20(US)','Arabic\x20(ae)','success','$product_details.bay','render','6ptpiHp','All','get','Finished\x20Goods','Rack\x20A','language','timezone','8vpUUtD','Arabic','50CvnUsH','396auamOI','email','$expiry_date','body','$product_details.bin','product','exports','656328rnkSda','$product_details.expiry_date','../models/all_models','Spanish','49100VDUxto','log','../middleware/auth','warehousemap_incoming','find','json','Portuguese\x20(BR)','Portuguese','$_id.floorlevel','730443WCddaD','795634oNPfBF','post','pack','message','timezones-list','staff','/MapData2','aggregate','$room','$_id.bin','40080Xqlhfu','status','findOne','flash','../public/language/languages.json','$$product.product_quantity','$_id.bay','$product_details.batch_code','/Rooms_data','Hindi','en-US','DRY\x20STORAGE','$count','$product_details.product_code','$product_code','Enabled','$_id','role','$product_details.product_stock','user','German','Raw\x20Materials','$name','$product_details','raw','131409xybWls'];a0_0x2887=function(){return _0x2c77af;};return a0_0x2887();}const a0_0x1bfe12=a0_0xd55f;(function(_0x1d9d7b,_0xe359a2){const _0x192140=a0_0xd55f,_0x371410=_0x1d9d7b();while(!![]){try{const _0x351ffc=parseInt(_0x192140(0xc5))/0x1+parseInt(_0x192140(0xe4))/0x2+parseInt(_0x192140(0xf1))/0x3*(-parseInt(_0x192140(0xca))/0x4)+parseInt(_0x192140(0xe8))/0x5*(-parseInt(_0x192140(0xd3))/0x6)+parseInt(_0x192140(0xf2))/0x7*(-parseInt(_0x192140(0xda))/0x8)+-parseInt(_0x192140(0xc1))/0x9*(parseInt(_0x192140(0xdc))/0xa)+-parseInt(_0x192140(0xdd))/0xb*(-parseInt(_0x192140(0xfc))/0xc);if(_0x351ffc===_0xe359a2)break;else _0x371410['push'](_0x371410['shift']());}catch(_0x417c15){_0x371410['push'](_0x371410['shift']());}}}(a0_0x2887,0x30ac8));const express=require('express'),app=express(),router=express[a0_0x1bfe12(0xc8)](),multer=require(a0_0x1bfe12(0xcd)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x1bfe12(0xe6)),auth=require(a0_0x1bfe12(0xea));function a0_0xd55f(_0xb4dc27,_0x28690e){const _0x2887ef=a0_0x2887();return a0_0xd55f=function(_0xd55f0d,_0x65d526){_0xd55f0d=_0xd55f0d-0xb7;let _0x5d0c9a=_0x2887ef[_0xd55f0d];return _0x5d0c9a;},a0_0xd55f(_0xb4dc27,_0x28690e);}var timezones=require(a0_0x1bfe12(0xf6));const users=require(a0_0x1bfe12(0x100));router[a0_0x1bfe12(0xd5)]('/view',auth,async(_0x43e0db,_0x2a2c12)=>{const _0x21fe0d=a0_0x1bfe12;try{const {username:_0x5d25ba,email:_0x5e3e23,role:_0x25d21d}=_0x43e0db[_0x21fe0d(0xbb)],_0x37e7b3=_0x43e0db['user'],_0x26bdc5=await profile[_0x21fe0d(0xfe)]({'email':_0x37e7b3[_0x21fe0d(0xde)]}),_0x270914=await master_shop[_0x21fe0d(0xec)]();console['log']('master',_0x270914);let _0x2eeadc;if(_0x37e7b3[_0x21fe0d(0xb9)]==_0x21fe0d(0xf7)){const _0x22ef3e=await staff[_0x21fe0d(0xfe)]({'email':_0x37e7b3[_0x21fe0d(0xde)]});_0x2eeadc=await warehouse[_0x21fe0d(0xf9)]([{'$match':{'status':'Enabled','name':_0x22ef3e['warehouse']}},{'$group':{'_id':'$name','name':{'$first':_0x21fe0d(0xbe)}}}]);}else _0x2eeadc=await warehouse[_0x21fe0d(0xf9)]([{'$match':{'status':_0x21fe0d(0xb7)}},{'$group':{'_id':_0x21fe0d(0xbe),'name':{'$first':_0x21fe0d(0xbe)}}}]);const _0x51f2a6=new Date()['toLocaleString'](_0x21fe0d(0x106),{'timeZone':_0x270914[0x0][_0x21fe0d(0xd9)]});console[_0x21fe0d(0xe9)](_0x21fe0d(0xd9),_0x51f2a6);if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xce)){var _0x5f0564=users['English'];console[_0x21fe0d(0xe9)](_0x5f0564);}else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0x105))var _0x5f0564=users[_0x21fe0d(0x105)];else{if(_0x270914[0x0]['language']==_0x21fe0d(0xbc))var _0x5f0564=users[_0x21fe0d(0xbc)];else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xe7))var _0x5f0564=users[_0x21fe0d(0xe7)];else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xc9))var _0x5f0564=users['French'];else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xee))var _0x5f0564=users[_0x21fe0d(0xef)];else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xcc))var _0x5f0564=users[_0x21fe0d(0xcc)];else{if(_0x270914[0x0][_0x21fe0d(0xd8)]==_0x21fe0d(0xcf))var _0x5f0564=users[_0x21fe0d(0xdb)];}}}}}}}_0x2a2c12[_0x21fe0d(0xd2)](_0x21fe0d(0xeb),{'success':_0x43e0db[_0x21fe0d(0xff)](_0x21fe0d(0xd0)),'errors':_0x43e0db[_0x21fe0d(0xff)]('errors'),'role':_0x37e7b3,'profile':_0x26bdc5,'master_shop':_0x270914,'timezones':timezones,'language':_0x5f0564,'warehouse':_0x2eeadc});}catch(_0x2a2240){console[_0x21fe0d(0xe9)](_0x2a2240),_0x2a2c12[_0x21fe0d(0xfd)](0xc8)[_0x21fe0d(0xed)]({'message':_0x2a2240['message']});}}),router[a0_0x1bfe12(0xf3)]('/MapData',async(_0x340c77,_0x3605c9)=>{const _0x49fa11=a0_0x1bfe12,{warehouseNew:_0x56e7e4,rooms:_0x501c72,Type:_0x351427}=_0x340c77['body'],_0x32df8f=await warehouse['aggregate']([{'$unwind':_0x49fa11(0xbf)},{'$match':{'name':_0x56e7e4,'room':_0x501c72,'product_details.type':_0x351427}},{'$group':{'_id':{'bay':_0x49fa11(0xd1),'bin':_0x49fa11(0xe1),'type':_0x49fa11(0xc4),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x49fa11(0xba),'product_code':_0x49fa11(0x109)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x49fa11(0xba),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x49fa11(0x102),'bin':_0x49fa11(0xfb),'type':_0x49fa11(0xc6),'floorlevel':_0x49fa11(0xf0),'products':{'$filter':{'input':_0x49fa11(0xc3),'as':_0x49fa11(0xe2),'cond':{'$gt':[_0x49fa11(0x101),0x0]}}},'totalQuantity':0x1}}]);_0x3605c9['json'](_0x32df8f);}),router[a0_0x1bfe12(0xf3)](a0_0x1bfe12(0xf8),async(_0x5ac6f6,_0xcea04f)=>{const _0x1f753f=a0_0x1bfe12,{warehouseNew:_0x111350,rooms:_0x188515,room_cat:_0x2ebebe}=_0x5ac6f6[_0x1f753f(0xe0)];let _0x5d1076;if(_0x2ebebe==_0x1f753f(0xd4))_0x5d1076=await warehouse[_0x1f753f(0xf9)]([{'$unwind':_0x1f753f(0xbf)},{'$match':{'name':_0x111350}},{'$group':{'_id':{'bay':_0x1f753f(0xd1),'product':'$product_details.product_name','expiry':_0x1f753f(0xe5)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':_0x1f753f(0xcb)},'expiry_date':{'$first':_0x1f753f(0xe5)},'batch_code':{'$first':_0x1f753f(0x103)},'product_code':{'$first':_0x1f753f(0x109)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':'$_id.product','quantity':_0x1f753f(0x108),'production_date':'$production_date','expiry_date':_0x1f753f(0xdf),'batch_code':_0x1f753f(0xc7),'product_code':_0x1f753f(0x10a)}},'totalQuantity':{'$sum':_0x1f753f(0x108)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x1f753f(0xb8),'products':0x1,'totalQuantity':0x1}}]),console[_0x1f753f(0xe9)](_0x2ebebe);else{}_0xcea04f['json'](_0x5d1076);}),router['post'](a0_0x1bfe12(0x104),async(_0x231eb3,_0x4c1457)=>{const _0x2440e6=a0_0x1bfe12;try{const {warehouse_name:_0x459b00,A:_0x57d40e,B:_0x34eac6}=_0x231eb3['body'];var _0x47420f='';_0x57d40e==_0x2440e6(0xc0)?_0x34eac6=='pack'?_0x47420f=[{'$match':{'name':_0x459b00,'status':_0x2440e6(0xb7),'room':_0x2440e6(0xd7)}},{'$group':{'_id':_0x2440e6(0xb8),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x47420f=[{'$match':{'name':_0x459b00,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x2440e6(0xfa)}}},{'$sort':{'room_name':0x1}}]:_0x47420f=[{'$match':{'name':_0x459b00,'status':_0x2440e6(0xb7)}},{'$group':{'_id':_0x2440e6(0xb8),'room_name':{'$first':_0x2440e6(0xfa)}}},{'$sort':{'room_name':0x1}}];const _0x1008fd=await warehouse[_0x2440e6(0xf9)](_0x47420f);_0x4c1457[_0x2440e6(0xfd)](0xc8)[_0x2440e6(0xed)](_0x1008fd);}catch(_0x22f671){_0x4c1457[_0x2440e6(0xfd)](0x190)[_0x2440e6(0xed)]({'errorMessage':_0x22f671[_0x2440e6(0xf5)]});}}),router[a0_0x1bfe12(0xf3)]('/Rooms_data2',async(_0x198cba,_0x4f7970)=>{const _0x239558=a0_0x1bfe12;try{const {warehouse_name:_0x35137e,cat:_0x4238d4,valNew:_0xac1d8a}=_0x198cba[_0x239558(0xe0)];var _0x31f4b0='',_0x4d6a6e='';if(_0x4238d4==_0x239558(0xbd))_0x31f4b0=_0x239558(0xc2),_0xac1d8a==_0x239558(0xf4)?_0x4d6a6e=[{'$match':{'status':_0x239558(0xb7),'warehouse_category':_0x4238d4,'name':{'$ne':_0x31f4b0},'name':_0x239558(0x107)}},{'$group':{'_id':_0x239558(0xbe),'room_name':{'$first':_0x239558(0xbe)}}},{'$sort':{'room_name':0x1}}]:_0x4d6a6e=[{'$match':{'status':'Enabled','warehouse_category':_0x4238d4,'name':{'$ne':_0x31f4b0}}},{'$group':{'_id':'$name','room_name':{'$first':_0x239558(0xbe)}}},{'$sort':{'room_name':0x1}}];else _0x4238d4==_0x239558(0xd6)?(_0x31f4b0='QA\x20Warehouse',_0x4d6a6e=[{'$match':{'status':'Enabled','warehouse_category':_0x4238d4,'name':{'$ne':_0x31f4b0}}},{'$group':{'_id':'$name','room_name':{'$first':_0x239558(0xbe)}}},{'$sort':{'room_name':0x1}}]):_0x4d6a6e=[{'$match':{'status':_0x239558(0xb7)}},{'$group':{'_id':_0x239558(0xbe),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x470cdd=await warehouse[_0x239558(0xf9)](_0x4d6a6e);_0x4f7970[_0x239558(0xfd)](0xc8)[_0x239558(0xed)](_0x470cdd);}catch(_0x553292){_0x4f7970['status'](0x190)[_0x239558(0xed)]({'errorMessage':_0x553292[_0x239558(0xf5)]}),console[_0x239558(0xe9)](_0x553292);}}),router[a0_0x1bfe12(0xf3)]('/Rooms_data3',async(_0x513fe1,_0x4eef9b)=>{const _0x1ec9f0=a0_0x1bfe12;try{const {warehouse_name:_0x283aa5,cat:_0xd6b0ca}=_0x513fe1[_0x1ec9f0(0xe0)],_0x3d9602=await warehouse[_0x1ec9f0(0xf9)]([{'$match':{'status':_0x1ec9f0(0xb7),'warehouse_category':_0xd6b0ca,'name':_0x283aa5}},{'$group':{'_id':'$room','room_name':{'$first':_0x1ec9f0(0xfa)}}},{'$sort':{'room_name':0x1}}]);_0x4eef9b[_0x1ec9f0(0xfd)](0xc8)['json'](_0x3d9602);}catch(_0x35de7c){_0x4eef9b[_0x1ec9f0(0xfd)](0x190)[_0x1ec9f0(0xed)]({'errorMessage':_0x35de7c[_0x1ec9f0(0xf5)]});}}),module[a0_0x1bfe12(0xe3)]=router;