const a0_0x49a2ad=a0_0x483d;(function(_0x2fb4bc,_0x335632){const _0x3dd421=a0_0x483d,_0x3bd67f=_0x2fb4bc();while(!![]){try{const _0x3ff7bb=parseInt(_0x3dd421(0x10c))/0x1*(parseInt(_0x3dd421(0x113))/0x2)+-parseInt(_0x3dd421(0x110))/0x3+parseInt(_0x3dd421(0x109))/0x4*(parseInt(_0x3dd421(0xfa))/0x5)+-parseInt(_0x3dd421(0x129))/0x6*(parseInt(_0x3dd421(0xff))/0x7)+parseInt(_0x3dd421(0x130))/0x8+-parseInt(_0x3dd421(0x119))/0x9+parseInt(_0x3dd421(0x12c))/0xa;if(_0x3ff7bb===_0x335632)break;else _0x3bd67f['push'](_0x3bd67f['shift']());}catch(_0x35d85d){_0x3bd67f['push'](_0x3bd67f['shift']());}}}(a0_0x3cd1,0x70fb9));const express=require(a0_0x49a2ad(0x10d)),app=express(),router=express[a0_0x49a2ad(0x12f)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x49a2ad(0x114)),auth=require(a0_0x49a2ad(0xe5));var timezones=require(a0_0x49a2ad(0x11e));function a0_0x3cd1(){const _0x4d5806=['$product_details.floorlevel','12NRXoah','json','$_id.floorlevel','1095200uldHfg','$room','role','Router','5842496MKTYxr','flash','$product_code','$product_details.type','../middleware/auth','warehousemap_incoming','$product_details','body','Hindi','DRY\x20STORAGE','English\x20(US)','$product_details.product_stock','$_id.product','errors','German','log','render','$production_date','find','warehouse','/MapData','exports','$_id.bay','message','English','5TdQMTL','Portuguese\x20(BR)','aggregate','Arabic','email','2353169dPFQRq','get','$expiry_date','$count','timezone','master','Rack\x20A','Enabled','French','$$product.product_quantity','2901436PGgErf','$product_details.expiry_date','status','45792GaMHUu','express','pack','findOne','1430952ejAGQR','raw','$product_details.product_code','18fcilyW','../models/all_models','user','Raw\x20Materials','All','QA\x20Warehouse','3287016lEmTZR','Chinese','$batch_code','$_id.type','Spanish','timezones-list','$_id','post','Arabic\x20(ae)','success','$name','language','Return\x20Goods','/Rooms_data3','staff'];a0_0x3cd1=function(){return _0x4d5806;};return a0_0x3cd1();}function a0_0x483d(_0x1cfc18,_0x5eea6){const _0x3cd1a6=a0_0x3cd1();return a0_0x483d=function(_0x483d6e,_0x86e3d2){_0x483d6e=_0x483d6e-0xe5;let _0x1b6787=_0x3cd1a6[_0x483d6e];return _0x1b6787;},a0_0x483d(_0x1cfc18,_0x5eea6);}const users=require('../public/language/languages.json');router[a0_0x49a2ad(0x100)]('/view',auth,async(_0x265563,_0x2a303a)=>{const _0x261f18=a0_0x49a2ad;try{const {username:_0x4f3bef,email:_0x1dc6b7,role:_0x45988a}=_0x265563[_0x261f18(0x115)],_0x858c31=_0x265563[_0x261f18(0x115)],_0x8021d5=await profile[_0x261f18(0x10f)]({'email':_0x858c31[_0x261f18(0xfe)]}),_0x50d477=await master_shop[_0x261f18(0xf3)]();console[_0x261f18(0xf0)](_0x261f18(0x104),_0x50d477);let _0x212d62;if(_0x858c31[_0x261f18(0x12e)]==_0x261f18(0x127)){const _0x47efa8=await staff[_0x261f18(0x10f)]({'email':_0x858c31[_0x261f18(0xfe)]});_0x212d62=await warehouse[_0x261f18(0xfc)]([{'$match':{'status':_0x261f18(0x106),'name':_0x47efa8[_0x261f18(0xf4)]}},{'$group':{'_id':_0x261f18(0x123),'name':{'$first':_0x261f18(0x123)}}}]);}else _0x212d62=await warehouse[_0x261f18(0xfc)]([{'$match':{'status':_0x261f18(0x106)}},{'$group':{'_id':_0x261f18(0x123),'name':{'$first':_0x261f18(0x123)}}}]);const _0x19021f=new Date()['toLocaleString']('en-US',{'timeZone':_0x50d477[0x0][_0x261f18(0x103)]});console[_0x261f18(0xf0)](_0x261f18(0x103),_0x19021f);if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0xeb)){var _0x35d33c=users[_0x261f18(0xf9)];console['log'](_0x35d33c);}else{if(_0x50d477[0x0][_0x261f18(0x124)]=='Hindi')var _0x35d33c=users[_0x261f18(0xe9)];else{if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0xef))var _0x35d33c=users[_0x261f18(0xef)];else{if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0x11d))var _0x35d33c=users[_0x261f18(0x11d)];else{if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0x107))var _0x35d33c=users[_0x261f18(0x107)];else{if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0xfb))var _0x35d33c=users['Portuguese'];else{if(_0x50d477[0x0][_0x261f18(0x124)]=='Chinese')var _0x35d33c=users[_0x261f18(0x11a)];else{if(_0x50d477[0x0][_0x261f18(0x124)]==_0x261f18(0x121))var _0x35d33c=users[_0x261f18(0xfd)];}}}}}}}_0x2a303a[_0x261f18(0xf1)](_0x261f18(0xe6),{'success':_0x265563[_0x261f18(0x131)](_0x261f18(0x122)),'errors':_0x265563[_0x261f18(0x131)](_0x261f18(0xee)),'role':_0x858c31,'profile':_0x8021d5,'master_shop':_0x50d477,'timezones':timezones,'language':_0x35d33c,'warehouse':_0x212d62});}catch(_0x114b3b){console['log'](_0x114b3b),_0x2a303a['status'](0xc8)['json']({'message':_0x114b3b['message']});}}),router['post'](a0_0x49a2ad(0xf5),async(_0x31797e,_0x2749fb)=>{const _0x38de58=a0_0x49a2ad,{warehouseNew:_0x33b412,rooms:_0x3f6898,Type:_0x1969d2}=_0x31797e['body'],_0x19c6c3=await warehouse['aggregate']([{'$unwind':_0x38de58(0xe7)},{'$match':{'name':_0x33b412,'room':_0x3f6898,'product_details.type':_0x1969d2}},{'$group':{'_id':{'bay':'$product_details.bay','bin':'$product_details.bin','type':_0x38de58(0x133),'floorlevel':_0x38de58(0x128)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x38de58(0xec),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x38de58(0xec),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x38de58(0xf7),'bin':'$_id.bin','type':_0x38de58(0x11c),'floorlevel':_0x38de58(0x12b),'products':{'$filter':{'input':'$products','as':'product','cond':{'$gt':[_0x38de58(0x108),0x0]}}},'totalQuantity':0x1}}]);_0x2749fb[_0x38de58(0x12a)](_0x19c6c3);}),router[a0_0x49a2ad(0x120)]('/MapData2',async(_0x4838ac,_0x402765)=>{const _0x35228c=a0_0x49a2ad,{warehouseNew:_0x53b38d,rooms:_0x342cd8,room_cat:_0x3168c7}=_0x4838ac['body'];let _0xa3f581;if(_0x3168c7==_0x35228c(0x117))_0xa3f581=await warehouse[_0x35228c(0xfc)]([{'$unwind':_0x35228c(0xe7)},{'$match':{'name':_0x53b38d}},{'$group':{'_id':{'bay':'$product_details.bay','product':'$product_details.product_name','expiry':_0x35228c(0x10a)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x35228c(0x10a)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x35228c(0x112)}}},{'$group':{'_id':_0x35228c(0xf7),'products':{'$push':{'product':_0x35228c(0xed),'quantity':_0x35228c(0x102),'production_date':_0x35228c(0xf2),'expiry_date':_0x35228c(0x101),'batch_code':_0x35228c(0x11b),'product_code':_0x35228c(0x132)}},'totalQuantity':{'$sum':_0x35228c(0x102)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x35228c(0xf0)](_0x3168c7);else{}_0x402765[_0x35228c(0x12a)](_0xa3f581);}),router['post']('/Rooms_data',async(_0x111f25,_0x496a36)=>{const _0xfb8628=a0_0x49a2ad;try{const {warehouse_name:_0x410dd6,A:_0x51b7cb,B:_0x2d98a6}=_0x111f25[_0xfb8628(0xe8)];var _0x6e8395='';_0x51b7cb==_0xfb8628(0x111)?_0x2d98a6==_0xfb8628(0x10e)?_0x6e8395=[{'$match':{'name':_0x410dd6,'status':_0xfb8628(0x106),'room':_0xfb8628(0x105)}},{'$group':{'_id':_0xfb8628(0x11f),'room_name':{'$first':_0xfb8628(0x12d)}}},{'$sort':{'room_name':0x1}}]:_0x6e8395=[{'$match':{'name':_0x410dd6,'status':_0xfb8628(0x106)}},{'$group':{'_id':_0xfb8628(0x11f),'room_name':{'$first':_0xfb8628(0x12d)}}},{'$sort':{'room_name':0x1}}]:_0x6e8395=[{'$match':{'name':_0x410dd6,'status':_0xfb8628(0x106)}},{'$group':{'_id':_0xfb8628(0x11f),'room_name':{'$first':_0xfb8628(0x12d)}}},{'$sort':{'room_name':0x1}}];const _0x4cc712=await warehouse['aggregate'](_0x6e8395);_0x496a36['status'](0xc8)[_0xfb8628(0x12a)](_0x4cc712);}catch(_0x480f4b){_0x496a36[_0xfb8628(0x10b)](0x190)[_0xfb8628(0x12a)]({'errorMessage':_0x480f4b[_0xfb8628(0xf8)]});}}),router['post']('/Rooms_data2',async(_0xdf5de2,_0x2e2c18)=>{const _0x5d04d3=a0_0x49a2ad;try{const {warehouse_name:_0x47723e,cat:_0x345d19,valNew:_0x34ba59}=_0xdf5de2[_0x5d04d3(0xe8)];var _0x2ee74a='',_0x373439='';if(_0x345d19==_0x5d04d3(0x116))_0x2ee74a=_0x5d04d3(0x125),_0x34ba59=='pack'?_0x373439=[{'$match':{'status':'Enabled','warehouse_category':_0x345d19,'name':{'$ne':_0x2ee74a},'name':_0x5d04d3(0xea)}},{'$group':{'_id':_0x5d04d3(0x123),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x373439=[{'$match':{'status':_0x5d04d3(0x106),'warehouse_category':_0x345d19,'name':{'$ne':_0x2ee74a}}},{'$group':{'_id':_0x5d04d3(0x123),'room_name':{'$first':_0x5d04d3(0x123)}}},{'$sort':{'room_name':0x1}}];else _0x345d19=='Finished\x20Goods'?(_0x2ee74a=_0x5d04d3(0x118),_0x373439=[{'$match':{'status':_0x5d04d3(0x106),'warehouse_category':_0x345d19,'name':{'$ne':_0x2ee74a}}},{'$group':{'_id':_0x5d04d3(0x123),'room_name':{'$first':_0x5d04d3(0x123)}}},{'$sort':{'room_name':0x1}}]):_0x373439=[{'$match':{'status':_0x5d04d3(0x106)}},{'$group':{'_id':_0x5d04d3(0x123),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x27011b=await warehouse['aggregate'](_0x373439);_0x2e2c18[_0x5d04d3(0x10b)](0xc8)['json'](_0x27011b);}catch(_0x308374){_0x2e2c18['status'](0x190)[_0x5d04d3(0x12a)]({'errorMessage':_0x308374[_0x5d04d3(0xf8)]}),console[_0x5d04d3(0xf0)](_0x308374);}}),router[a0_0x49a2ad(0x120)](a0_0x49a2ad(0x126),async(_0x4e103c,_0x9e097d)=>{const _0x520585=a0_0x49a2ad;try{const {warehouse_name:_0x3ec140,cat:_0x5d9e52}=_0x4e103c[_0x520585(0xe8)],_0x176338=await warehouse[_0x520585(0xfc)]([{'$match':{'status':_0x520585(0x106),'warehouse_category':_0x5d9e52,'name':_0x3ec140}},{'$group':{'_id':_0x520585(0x12d),'room_name':{'$first':_0x520585(0x12d)}}},{'$sort':{'room_name':0x1}}]);_0x9e097d['status'](0xc8)['json'](_0x176338);}catch(_0xe66c43){_0x9e097d['status'](0x190)[_0x520585(0x12a)]({'errorMessage':_0xe66c43[_0x520585(0xf8)]});}}),module[a0_0x49a2ad(0xf6)]=router;