const a0_0x2026a3=a0_0x3f0c;(function(_0x5bd8c2,_0x4efb64){const _0x4b3287=a0_0x3f0c,_0x4aeb61=_0x5bd8c2();while(!![]){try{const _0x4a45d2=-parseInt(_0x4b3287(0x198))/0x1*(parseInt(_0x4b3287(0x194))/0x2)+-parseInt(_0x4b3287(0x1a8))/0x3*(-parseInt(_0x4b3287(0x1c4))/0x4)+-parseInt(_0x4b3287(0x1ab))/0x5+-parseInt(_0x4b3287(0x190))/0x6*(-parseInt(_0x4b3287(0x1ae))/0x7)+-parseInt(_0x4b3287(0x1a2))/0x8*(-parseInt(_0x4b3287(0x1b0))/0x9)+-parseInt(_0x4b3287(0x191))/0xa+parseInt(_0x4b3287(0x193))/0xb*(parseInt(_0x4b3287(0x192))/0xc);if(_0x4a45d2===_0x4efb64)break;else _0x4aeb61['push'](_0x4aeb61['shift']());}catch(_0x3ac2df){_0x4aeb61['push'](_0x4aeb61['shift']());}}}(a0_0x3332,0x723e9));const express=require(a0_0x2026a3(0x1c9)),app=express(),router=express[a0_0x2026a3(0x1a3)](),multer=require(a0_0x2026a3(0x1bc)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2026a3(0x1b4)),auth=require(a0_0x2026a3(0x1cb));function a0_0x3f0c(_0x487026,_0x4dcba0){const _0x333294=a0_0x3332();return a0_0x3f0c=function(_0x3f0c84,_0x1b9d6d){_0x3f0c84=_0x3f0c84-0x18e;let _0x1df5f7=_0x333294[_0x3f0c84];return _0x1df5f7;},a0_0x3f0c(_0x487026,_0x4dcba0);}function a0_0x3332(){const _0x55ee84=['2xmDBwx','$product_details.product_stock','$product_details.product_name','English','92723ZAEfGp','$count','en-US','timezones-list','$name','Portuguese\x20(BR)','Return\x20Goods','Chinese','Arabic\x20(ae)','body','2056KdOueP','Router','$_id.bin','$product_details','exports','DRY\x20STORAGE','1866174maDfvq','$_id.floorlevel','Rack\x20A','952860Clyfts','French','$_id.product','487060GeRZSM','German','9441TNWjBt','json','$product_details.batch_code','aggregate','../models/all_models','pack','render','/MapData','$product_code','user','timezone','Enabled','multer','product','/Rooms_data3','flash','$product_details.product_code','$room','QA\x20Warehouse','/Rooms_data','4iGnGQN','$_id.type','Raw\x20Materials','post','log','express','staff','../middleware/auth','Spanish','Arabic','Hindi','status','$product_details.expiry_date','Finished\x20Goods','findOne','$production_date','errors','/MapData2','language','All','$products','$product_details.bay','$_id','toLocaleString','email','role','message','warehousemap_incoming','12dYNHbh','6770800iCwcXK','207396eawSFI','253QmKcaM'];a0_0x3332=function(){return _0x55ee84;};return a0_0x3332();}var timezones=require(a0_0x2026a3(0x19b));const users=require('../public/language/languages.json');router['get']('/view',auth,async(_0x3da6b5,_0x3103d1)=>{const _0x5b066d=a0_0x2026a3;try{const {username:_0x214c7a,email:_0x504e44,role:_0x1a454f}=_0x3da6b5[_0x5b066d(0x1b9)],_0x4bfc9b=_0x3da6b5[_0x5b066d(0x1b9)],_0x21dc6c=await profile[_0x5b066d(0x1d2)]({'email':_0x4bfc9b[_0x5b066d(0x1dc)]}),_0x39de51=await master_shop['find']();console['log']('master',_0x39de51);let _0x4d7f8f;if(_0x4bfc9b[_0x5b066d(0x1dd)]==_0x5b066d(0x1ca)){const _0x3fc6c8=await staff[_0x5b066d(0x1d2)]({'email':_0x4bfc9b[_0x5b066d(0x1dc)]});_0x4d7f8f=await warehouse[_0x5b066d(0x1b3)]([{'$match':{'status':'Enabled','name':_0x3fc6c8['warehouse']}},{'$group':{'_id':_0x5b066d(0x19c),'name':{'$first':'$name'}}}]);}else _0x4d7f8f=await warehouse[_0x5b066d(0x1b3)]([{'$match':{'status':_0x5b066d(0x1bb)}},{'$group':{'_id':_0x5b066d(0x19c),'name':{'$first':_0x5b066d(0x19c)}}}]);const _0x17a587=new Date()[_0x5b066d(0x1db)](_0x5b066d(0x19a),{'timeZone':_0x39de51[0x0][_0x5b066d(0x1ba)]});console[_0x5b066d(0x1c8)]('timezone',_0x17a587);if(_0x39de51[0x0]['language']=='English\x20(US)'){var _0x35c73d=users[_0x5b066d(0x197)];console['log'](_0x35c73d);}else{if(_0x39de51[0x0]['language']==_0x5b066d(0x1ce))var _0x35c73d=users[_0x5b066d(0x1ce)];else{if(_0x39de51[0x0][_0x5b066d(0x1d6)]==_0x5b066d(0x1af))var _0x35c73d=users[_0x5b066d(0x1af)];else{if(_0x39de51[0x0][_0x5b066d(0x1d6)]==_0x5b066d(0x1cc))var _0x35c73d=users['Spanish'];else{if(_0x39de51[0x0][_0x5b066d(0x1d6)]=='French')var _0x35c73d=users[_0x5b066d(0x1ac)];else{if(_0x39de51[0x0][_0x5b066d(0x1d6)]==_0x5b066d(0x19d))var _0x35c73d=users['Portuguese'];else{if(_0x39de51[0x0][_0x5b066d(0x1d6)]==_0x5b066d(0x19f))var _0x35c73d=users['Chinese'];else{if(_0x39de51[0x0]['language']==_0x5b066d(0x1a0))var _0x35c73d=users[_0x5b066d(0x1cd)];}}}}}}}_0x3103d1[_0x5b066d(0x1b6)](_0x5b066d(0x18f),{'success':_0x3da6b5['flash']('success'),'errors':_0x3da6b5[_0x5b066d(0x1bf)](_0x5b066d(0x1d4)),'role':_0x4bfc9b,'profile':_0x21dc6c,'master_shop':_0x39de51,'timezones':timezones,'language':_0x35c73d,'warehouse':_0x4d7f8f});}catch(_0x40abec){console[_0x5b066d(0x1c8)](_0x40abec),_0x3103d1['status'](0xc8)[_0x5b066d(0x1b1)]({'message':_0x40abec['message']});}}),router[a0_0x2026a3(0x1c7)](a0_0x2026a3(0x1b7),async(_0x17f6bd,_0x2f452b)=>{const _0x555b49=a0_0x2026a3,{warehouseNew:_0x21672f,rooms:_0x6eadf,Type:_0x5b6457}=_0x17f6bd['body'],_0x4a4047=await warehouse[_0x555b49(0x1b3)]([{'$unwind':_0x555b49(0x1a5)},{'$match':{'name':_0x21672f,'room':_0x6eadf,'product_details.type':_0x5b6457}},{'$group':{'_id':{'bay':_0x555b49(0x1d9),'bin':'$product_details.bin','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x555b49(0x196),'product_quantity':_0x555b49(0x195),'product_code':_0x555b49(0x1c0)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x555b49(0x195),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x555b49(0x1a4),'type':_0x555b49(0x1c5),'floorlevel':_0x555b49(0x1a9),'products':{'$filter':{'input':_0x555b49(0x1d8),'as':_0x555b49(0x1bd),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x2f452b[_0x555b49(0x1b1)](_0x4a4047);}),router[a0_0x2026a3(0x1c7)](a0_0x2026a3(0x1d5),async(_0x316f30,_0x27ecdf)=>{const _0x121b43=a0_0x2026a3,{warehouseNew:_0x44ee4a,rooms:_0x49e387,room_cat:_0xc79c2e}=_0x316f30[_0x121b43(0x1a1)];let _0x366fc9;if(_0xc79c2e==_0x121b43(0x1d7))_0x366fc9=await warehouse['aggregate']([{'$unwind':_0x121b43(0x1a5)},{'$match':{'name':_0x44ee4a}},{'$group':{'_id':{'bay':_0x121b43(0x1d9),'product':_0x121b43(0x196),'expiry':_0x121b43(0x1d0)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x121b43(0x1d0)},'batch_code':{'$first':_0x121b43(0x1b2)},'product_code':{'$first':_0x121b43(0x1c0)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x121b43(0x1ad),'quantity':_0x121b43(0x199),'production_date':_0x121b43(0x1d3),'expiry_date':'$expiry_date','batch_code':'$batch_code','product_code':_0x121b43(0x1b8)}},'totalQuantity':{'$sum':_0x121b43(0x199)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x121b43(0x1da),'products':0x1,'totalQuantity':0x1}}]),console[_0x121b43(0x1c8)](_0xc79c2e);else{}_0x27ecdf[_0x121b43(0x1b1)](_0x366fc9);}),router[a0_0x2026a3(0x1c7)](a0_0x2026a3(0x1c3),async(_0x14ae43,_0x573acb)=>{const _0x2cc78b=a0_0x2026a3;try{const {warehouse_name:_0xf7651e,A:_0x4de12f,B:_0x52dbc2}=_0x14ae43[_0x2cc78b(0x1a1)];var _0x441f1c='';_0x4de12f=='raw'?_0x52dbc2==_0x2cc78b(0x1b5)?_0x441f1c=[{'$match':{'name':_0xf7651e,'status':_0x2cc78b(0x1bb),'room':_0x2cc78b(0x1aa)}},{'$group':{'_id':_0x2cc78b(0x1da),'room_name':{'$first':_0x2cc78b(0x1c1)}}},{'$sort':{'room_name':0x1}}]:_0x441f1c=[{'$match':{'name':_0xf7651e,'status':_0x2cc78b(0x1bb)}},{'$group':{'_id':_0x2cc78b(0x1da),'room_name':{'$first':_0x2cc78b(0x1c1)}}},{'$sort':{'room_name':0x1}}]:_0x441f1c=[{'$match':{'name':_0xf7651e,'status':_0x2cc78b(0x1bb)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x2cc78b(0x1c1)}}},{'$sort':{'room_name':0x1}}];const _0x237e90=await warehouse[_0x2cc78b(0x1b3)](_0x441f1c);_0x573acb[_0x2cc78b(0x1cf)](0xc8)[_0x2cc78b(0x1b1)](_0x237e90);}catch(_0x36240e){_0x573acb[_0x2cc78b(0x1cf)](0x190)[_0x2cc78b(0x1b1)]({'errorMessage':_0x36240e[_0x2cc78b(0x18e)]});}}),router[a0_0x2026a3(0x1c7)]('/Rooms_data2',async(_0x577787,_0x5aad23)=>{const _0x10a557=a0_0x2026a3;try{const {warehouse_name:_0x5a041b,cat:_0x1bab8a,valNew:_0x38f164}=_0x577787[_0x10a557(0x1a1)];var _0xe97911='',_0x5b2c7c='';if(_0x1bab8a==_0x10a557(0x1c6))_0xe97911=_0x10a557(0x19e),_0x38f164=='pack'?_0x5b2c7c=[{'$match':{'status':_0x10a557(0x1bb),'warehouse_category':_0x1bab8a,'name':{'$ne':_0xe97911},'name':_0x10a557(0x1a7)}},{'$group':{'_id':'$name','room_name':{'$first':_0x10a557(0x19c)}}},{'$sort':{'room_name':0x1}}]:_0x5b2c7c=[{'$match':{'status':_0x10a557(0x1bb),'warehouse_category':_0x1bab8a,'name':{'$ne':_0xe97911}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x1bab8a==_0x10a557(0x1d1)?(_0xe97911=_0x10a557(0x1c2),_0x5b2c7c=[{'$match':{'status':'Enabled','warehouse_category':_0x1bab8a,'name':{'$ne':_0xe97911}}},{'$group':{'_id':_0x10a557(0x19c),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x5b2c7c=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x10a557(0x19c),'room_name':{'$first':_0x10a557(0x19c)}}},{'$sort':{'room_name':0x1}}];const _0x34de7f=await warehouse[_0x10a557(0x1b3)](_0x5b2c7c);_0x5aad23[_0x10a557(0x1cf)](0xc8)['json'](_0x34de7f);}catch(_0x350bbf){_0x5aad23[_0x10a557(0x1cf)](0x190)[_0x10a557(0x1b1)]({'errorMessage':_0x350bbf[_0x10a557(0x18e)]}),console['log'](_0x350bbf);}}),router['post'](a0_0x2026a3(0x1be),async(_0x29151f,_0xff5ac)=>{const _0x291807=a0_0x2026a3;try{const {warehouse_name:_0x4f7ef6,cat:_0x37bc11}=_0x29151f[_0x291807(0x1a1)],_0x2073f3=await warehouse['aggregate']([{'$match':{'status':_0x291807(0x1bb),'warehouse_category':_0x37bc11,'name':_0x4f7ef6}},{'$group':{'_id':_0x291807(0x1c1),'room_name':{'$first':_0x291807(0x1c1)}}},{'$sort':{'room_name':0x1}}]);_0xff5ac[_0x291807(0x1cf)](0xc8)['json'](_0x2073f3);}catch(_0x1de53){_0xff5ac['status'](0x190)[_0x291807(0x1b1)]({'errorMessage':_0x1de53['message']});}}),module[a0_0x2026a3(0x1a6)]=router;