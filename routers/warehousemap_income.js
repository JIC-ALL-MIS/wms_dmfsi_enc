const a0_0x51900e=a0_0x5699;(function(_0x4210f6,_0x42911d){const _0x511a08=a0_0x5699,_0x5ba3c8=_0x4210f6();while(!![]){try{const _0x434262=-parseInt(_0x511a08(0xdd))/0x1+parseInt(_0x511a08(0x111))/0x2*(-parseInt(_0x511a08(0xf1))/0x3)+parseInt(_0x511a08(0xfb))/0x4+parseInt(_0x511a08(0x109))/0x5+parseInt(_0x511a08(0xd7))/0x6*(parseInt(_0x511a08(0xf9))/0x7)+parseInt(_0x511a08(0x123))/0x8+-parseInt(_0x511a08(0x10f))/0x9;if(_0x434262===_0x42911d)break;else _0x5ba3c8['push'](_0x5ba3c8['shift']());}catch(_0x52e832){_0x5ba3c8['push'](_0x5ba3c8['shift']());}}}(a0_0x536f,0x24d7c));const express=require(a0_0x51900e(0x125)),app=express(),router=express[a0_0x51900e(0x122)](),multer=require(a0_0x51900e(0xf7)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x51900e(0x118)),auth=require(a0_0x51900e(0x121));function a0_0x536f(){const _0x4fe12f=['post','Raw\x20Materials','body','warehousemap_incoming','/view','json','$_id.bay','$product_details.product_name','toLocaleString','$product_details.production_date','Rack\x20A','$$product.product_quantity','939190ctOsnL','$product_details.floorlevel','$product_details.expiry_date','en-US','exports','$_id','1030950juVjaB','render','29886wATHcA','master','flash','status','$product_details','Spanish','English','../models/all_models','$room','timezones-list','staff','Hindi','aggregate','Portuguese\x20(BR)','/Rooms_data3','Chinese','../middleware/auth','Router','530448pzDoJM','message','express','Portuguese','Enabled','timezone','$_id.product','6UaCgJC','QA\x20Warehouse','findOne','German','success','raw','281798ELKghY','$_id.bin','$count','language','$batch_code','$product_details.product_stock','$product_details.batch_code','All','$_id.type','French','$product_code','$product_details.product_code','$_id.floorlevel','$product_details.bay','/Rooms_data','email','$product_details.type','get','pack','user','15sGwnOD','Finished\x20Goods','Arabic\x20(ae)','../public/language/languages.json','warehouse','errors','multer','log','983563lHPncy','/MapData2','909272sUqQCU','$name'];a0_0x536f=function(){return _0x4fe12f;};return a0_0x536f();}var timezones=require(a0_0x51900e(0x11a));const users=require(a0_0x51900e(0xf4));function a0_0x5699(_0x253c93,_0x1d2c3c){const _0x536fe0=a0_0x536f();return a0_0x5699=function(_0x56992f,_0x3efefc){_0x56992f=_0x56992f-0xd3;let _0x5cd992=_0x536fe0[_0x56992f];return _0x5cd992;},a0_0x5699(_0x253c93,_0x1d2c3c);}router[a0_0x51900e(0xee)](a0_0x51900e(0x101),auth,async(_0x1a5f12,_0x2a24d8)=>{const _0x58105d=a0_0x51900e;try{const {username:_0x74ec33,email:_0x47430b,role:_0x2e042f}=_0x1a5f12[_0x58105d(0xf0)],_0x4bc626=_0x1a5f12['user'],_0x794ca7=await profile[_0x58105d(0xd9)]({'email':_0x4bc626[_0x58105d(0xec)]}),_0x4d00db=await master_shop['find']();console[_0x58105d(0xf8)](_0x58105d(0x112),_0x4d00db);let _0x27149c;if(_0x4bc626['role']==_0x58105d(0x11b)){const _0x3c32f8=await staff[_0x58105d(0xd9)]({'email':_0x4bc626[_0x58105d(0xec)]});_0x27149c=await warehouse['aggregate']([{'$match':{'status':_0x58105d(0xd4),'name':_0x3c32f8[_0x58105d(0xf5)]}},{'$group':{'_id':_0x58105d(0xfc),'name':{'$first':_0x58105d(0xfc)}}}]);}else _0x27149c=await warehouse[_0x58105d(0x11d)]([{'$match':{'status':_0x58105d(0xd4)}},{'$group':{'_id':_0x58105d(0xfc),'name':{'$first':_0x58105d(0xfc)}}}]);const _0xbe277f=new Date()[_0x58105d(0x105)](_0x58105d(0x10c),{'timeZone':_0x4d00db[0x0][_0x58105d(0xd5)]});console['log'](_0x58105d(0xd5),_0xbe277f);if(_0x4d00db[0x0]['language']=='English\x20(US)'){var _0x55c776=users[_0x58105d(0x117)];console[_0x58105d(0xf8)](_0x55c776);}else{if(_0x4d00db[0x0]['language']==_0x58105d(0x11c))var _0x55c776=users[_0x58105d(0x11c)];else{if(_0x4d00db[0x0][_0x58105d(0xe0)]==_0x58105d(0xda))var _0x55c776=users[_0x58105d(0xda)];else{if(_0x4d00db[0x0][_0x58105d(0xe0)]==_0x58105d(0x116))var _0x55c776=users['Spanish'];else{if(_0x4d00db[0x0][_0x58105d(0xe0)]==_0x58105d(0xe6))var _0x55c776=users[_0x58105d(0xe6)];else{if(_0x4d00db[0x0]['language']==_0x58105d(0x11e))var _0x55c776=users[_0x58105d(0xd3)];else{if(_0x4d00db[0x0][_0x58105d(0xe0)]==_0x58105d(0x120))var _0x55c776=users[_0x58105d(0x120)];else{if(_0x4d00db[0x0][_0x58105d(0xe0)]==_0x58105d(0xf3))var _0x55c776=users['Arabic'];}}}}}}}_0x2a24d8[_0x58105d(0x110)](_0x58105d(0x100),{'success':_0x1a5f12[_0x58105d(0x113)](_0x58105d(0xdb)),'errors':_0x1a5f12[_0x58105d(0x113)](_0x58105d(0xf6)),'role':_0x4bc626,'profile':_0x794ca7,'master_shop':_0x4d00db,'timezones':timezones,'language':_0x55c776,'warehouse':_0x27149c});}catch(_0x4b035f){console[_0x58105d(0xf8)](_0x4b035f),_0x2a24d8[_0x58105d(0x114)](0xc8)[_0x58105d(0x102)]({'message':_0x4b035f[_0x58105d(0x124)]});}}),router[a0_0x51900e(0xfd)]('/MapData',async(_0x83acd,_0x982d8a)=>{const _0x5025d9=a0_0x51900e,{warehouseNew:_0x4112dd,rooms:_0x331bd8,Type:_0x40f9e9}=_0x83acd['body'],_0x2a26cb=await warehouse[_0x5025d9(0x11d)]([{'$unwind':'$product_details'},{'$match':{'name':_0x4112dd,'room':_0x331bd8,'product_details.type':_0x40f9e9}},{'$group':{'_id':{'bay':_0x5025d9(0xea),'bin':'$product_details.bin','type':_0x5025d9(0xed),'floorlevel':_0x5025d9(0x10a)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x5025d9(0xe2),'product_code':_0x5025d9(0xe8)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5025d9(0xe2),0x0]},'then':_0x5025d9(0xe2),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5025d9(0x103),'bin':_0x5025d9(0xde),'type':_0x5025d9(0xe5),'floorlevel':_0x5025d9(0xe9),'products':{'$filter':{'input':'$products','as':'product','cond':{'$gt':[_0x5025d9(0x108),0x0]}}},'totalQuantity':0x1}}]);_0x982d8a['json'](_0x2a26cb);}),router['post'](a0_0x51900e(0xfa),async(_0x1189b3,_0x1e5de2)=>{const _0x3e09d5=a0_0x51900e,{warehouseNew:_0x1bc765,rooms:_0x29c48f,room_cat:_0x3d5f3c}=_0x1189b3[_0x3e09d5(0xff)];let _0x3f3d77;if(_0x3d5f3c==_0x3e09d5(0xe4))_0x3f3d77=await warehouse[_0x3e09d5(0x11d)]([{'$unwind':_0x3e09d5(0x115)},{'$match':{'name':_0x1bc765}},{'$group':{'_id':{'bay':_0x3e09d5(0xea),'product':_0x3e09d5(0x104),'expiry':_0x3e09d5(0x10b)},'count':{'$sum':_0x3e09d5(0xe2)},'production_date':{'$first':_0x3e09d5(0x106)},'expiry_date':{'$first':_0x3e09d5(0x10b)},'batch_code':{'$first':_0x3e09d5(0xe3)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x3e09d5(0xd6),'quantity':'$count','production_date':'$production_date','expiry_date':'$expiry_date','batch_code':_0x3e09d5(0xe1),'product_code':_0x3e09d5(0xe7)}},'totalQuantity':{'$sum':_0x3e09d5(0xdf)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x3e09d5(0x10e),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x3d5f3c);else{}_0x1e5de2[_0x3e09d5(0x102)](_0x3f3d77);}),router[a0_0x51900e(0xfd)](a0_0x51900e(0xeb),async(_0x13cb81,_0x181d66)=>{const _0x4c53c2=a0_0x51900e;try{const {warehouse_name:_0x429f80,A:_0x50a0a7,B:_0x224ebe}=_0x13cb81[_0x4c53c2(0xff)];var _0x5a7dc9='';_0x50a0a7==_0x4c53c2(0xdc)?_0x224ebe==_0x4c53c2(0xef)?_0x5a7dc9=[{'$match':{'name':_0x429f80,'status':_0x4c53c2(0xd4),'room':_0x4c53c2(0x107)}},{'$group':{'_id':_0x4c53c2(0x10e),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x5a7dc9=[{'$match':{'name':_0x429f80,'status':'Enabled'}},{'$group':{'_id':_0x4c53c2(0x10e),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x5a7dc9=[{'$match':{'name':_0x429f80,'status':_0x4c53c2(0xd4)}},{'$group':{'_id':_0x4c53c2(0x10e),'room_name':{'$first':_0x4c53c2(0x119)}}},{'$sort':{'room_name':0x1}}];const _0xdfe61e=await warehouse['aggregate'](_0x5a7dc9);_0x181d66[_0x4c53c2(0x114)](0xc8)['json'](_0xdfe61e);}catch(_0x4fc321){_0x181d66[_0x4c53c2(0x114)](0x190)[_0x4c53c2(0x102)]({'errorMessage':_0x4fc321[_0x4c53c2(0x124)]});}}),router[a0_0x51900e(0xfd)]('/Rooms_data2',async(_0x49c309,_0x321309)=>{const _0x48d01c=a0_0x51900e;try{const {warehouse_name:_0x578e71,cat:_0x1aad87,valNew:_0x1ba772}=_0x49c309['body'];var _0x294606='',_0x39d108='';if(_0x1aad87==_0x48d01c(0xfe))_0x294606='Return\x20Goods',_0x1ba772=='pack'?_0x39d108=[{'$match':{'status':_0x48d01c(0xd4),'warehouse_category':_0x1aad87,'name':{'$ne':_0x294606},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x48d01c(0xfc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x39d108=[{'$match':{'status':'Enabled','warehouse_category':_0x1aad87,'name':{'$ne':_0x294606}}},{'$group':{'_id':_0x48d01c(0xfc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x1aad87==_0x48d01c(0xf2)?(_0x294606=_0x48d01c(0xd8),_0x39d108=[{'$match':{'status':_0x48d01c(0xd4),'warehouse_category':_0x1aad87,'name':{'$ne':_0x294606}}},{'$group':{'_id':_0x48d01c(0xfc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x39d108=[{'$match':{'status':_0x48d01c(0xd4)}},{'$group':{'_id':_0x48d01c(0xfc),'room_name':{'$first':_0x48d01c(0xfc)}}},{'$sort':{'room_name':0x1}}];const _0x36dd90=await warehouse[_0x48d01c(0x11d)](_0x39d108);_0x321309[_0x48d01c(0x114)](0xc8)['json'](_0x36dd90);}catch(_0x37c212){_0x321309[_0x48d01c(0x114)](0x190)[_0x48d01c(0x102)]({'errorMessage':_0x37c212[_0x48d01c(0x124)]}),console[_0x48d01c(0xf8)](_0x37c212);}}),router['post'](a0_0x51900e(0x11f),async(_0x3875f8,_0xc5d79b)=>{const _0x28e382=a0_0x51900e;try{const {warehouse_name:_0x21b6e7,cat:_0x1d210c}=_0x3875f8['body'],_0x2d1420=await warehouse[_0x28e382(0x11d)]([{'$match':{'status':_0x28e382(0xd4),'warehouse_category':_0x1d210c,'name':_0x21b6e7}},{'$group':{'_id':_0x28e382(0x119),'room_name':{'$first':_0x28e382(0x119)}}},{'$sort':{'room_name':0x1}}]);_0xc5d79b[_0x28e382(0x114)](0xc8)['json'](_0x2d1420);}catch(_0x10b58f){_0xc5d79b['status'](0x190)[_0x28e382(0x102)]({'errorMessage':_0x10b58f[_0x28e382(0x124)]});}}),module[a0_0x51900e(0x10d)]=router;