function a0_0x2c20(_0x59ec22,_0x2b5056){const _0x313a27=a0_0x313a();return a0_0x2c20=function(_0x2c20ad,_0x372533){_0x2c20ad=_0x2c20ad-0x1a6;let _0x10334f=_0x313a27[_0x2c20ad];return _0x10334f;},a0_0x2c20(_0x59ec22,_0x2b5056);}const a0_0x4b05ed=a0_0x2c20;(function(_0x441422,_0xfb6c95){const _0x3b232f=a0_0x2c20,_0x3a5241=_0x441422();while(!![]){try{const _0x16ab9c=-parseInt(_0x3b232f(0x1ef))/0x1*(parseInt(_0x3b232f(0x1cd))/0x2)+parseInt(_0x3b232f(0x1b3))/0x3*(parseInt(_0x3b232f(0x1ee))/0x4)+parseInt(_0x3b232f(0x1ac))/0x5*(parseInt(_0x3b232f(0x1f2))/0x6)+-parseInt(_0x3b232f(0x1c0))/0x7*(parseInt(_0x3b232f(0x1f4))/0x8)+-parseInt(_0x3b232f(0x1c3))/0x9*(parseInt(_0x3b232f(0x1af))/0xa)+parseInt(_0x3b232f(0x1d8))/0xb+-parseInt(_0x3b232f(0x1da))/0xc*(-parseInt(_0x3b232f(0x1f0))/0xd);if(_0x16ab9c===_0xfb6c95)break;else _0x3a5241['push'](_0x3a5241['shift']());}catch(_0x53dd21){_0x3a5241['push'](_0x3a5241['shift']());}}}(a0_0x313a,0xf065a));function a0_0x313a(){const _0x2c2058=['flash','/Rooms_data2','$expiry_date','2360BQTJkn','1lMZpjc','13oDBnCK','../models/all_models','12qMHJEe','Enabled','176xCbDTw','warehousemap_incoming','$product_details_spmx.unit_spmx','../middleware/auth','language','$$product.product_quantity','$product_details_spmx.extenders_spmx','$product_details','status','errors','$_id','$product_details.batch_code','$name','/MapData2','pack','$_id.product','../public/language/languages.json','$product_code','message','1732365fAfISh','$product_details.product_code','$product_details_spmx.category_spmx','1160NfAvDX','aggregate','$product_details.product_name','body','522yYPzlO','$products','findOne','English\x20(US)','$product_details_spmx.curing_spmx','warehouse','$product_details.bay','$product_details.production_date','render','timezone','$product_details_spmx','$product_details_spmx.brand_spmx','role','427028IorOkQ','timezones-list','/MapData','89325QodRep','find','Portuguese','$product_details_spmx.spicemix_spmx','Router','user','json','$_id.type','SPMX','English','2161526GEWRQV','/Rooms_data3','$room','$product_details.type','Arabic\x20(ae)','product','Hindi','All','Rack\x20A','log','Arabic','11421938SIDQrm','exports','32698236kFcRLZ','express','$product_details.expiry_date','$_id.bay','post','$product_details_spmx.extenders_spmx_qty','Raw\x20Materials','get','multer','German','$product_details.floorlevel','$product_details.product_stock','Chinese','Spanish','email','$count','QA\x20Warehouse'];a0_0x313a=function(){return _0x2c2058;};return a0_0x313a();}const express=require(a0_0x4b05ed(0x1db)),app=express(),router=express[a0_0x4b05ed(0x1c7)](),multer=require(a0_0x4b05ed(0x1e2)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x4b05ed(0x1f1)),auth=require(a0_0x4b05ed(0x1f7));var timezones=require(a0_0x4b05ed(0x1c1));const users=require(a0_0x4b05ed(0x1a9));router[a0_0x4b05ed(0x1e1)]('/view',auth,async(_0x2572de,_0x450c0f)=>{const _0x5d7973=a0_0x4b05ed;try{const {username:_0x4ac0a3,email:_0x4cbdf4,role:_0xde36ca}=_0x2572de[_0x5d7973(0x1c8)],_0x20452e=_0x2572de['user'],_0x1845dc=await profile['findOne']({'email':_0x20452e['email']}),_0x11d8a9=await master_shop[_0x5d7973(0x1c4)]();let _0x1ec7c6;if(_0x20452e[_0x5d7973(0x1bf)]=='staff'){const _0x5a6d88=await staff[_0x5d7973(0x1b5)]({'email':_0x20452e[_0x5d7973(0x1e8)]});_0x1ec7c6=await warehouse[_0x5d7973(0x1b0)]([{'$match':{'status':_0x5d7973(0x1f3),'name':_0x5a6d88[_0x5d7973(0x1b8)]}},{'$group':{'_id':_0x5d7973(0x200),'name':{'$first':_0x5d7973(0x200)}}}]);}else _0x1ec7c6=await warehouse[_0x5d7973(0x1b0)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x5d7973(0x200),'name':{'$first':_0x5d7973(0x200)}}}]);const _0x5184fa=new Date()['toLocaleString']('en-US',{'timeZone':_0x11d8a9[0x0][_0x5d7973(0x1bc)]});if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]==_0x5d7973(0x1b6))var _0x21beda=users[_0x5d7973(0x1cc)];else{if(_0x11d8a9[0x0]['language']=='Hindi')var _0x21beda=users[_0x5d7973(0x1d3)];else{if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]==_0x5d7973(0x1e3))var _0x21beda=users['German'];else{if(_0x11d8a9[0x0]['language']==_0x5d7973(0x1e7))var _0x21beda=users[_0x5d7973(0x1e7)];else{if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]=='French')var _0x21beda=users['French'];else{if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]=='Portuguese\x20(BR)')var _0x21beda=users[_0x5d7973(0x1c5)];else{if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]==_0x5d7973(0x1e6))var _0x21beda=users['Chinese'];else{if(_0x11d8a9[0x0][_0x5d7973(0x1f8)]==_0x5d7973(0x1d1))var _0x21beda=users[_0x5d7973(0x1d7)];}}}}}}}_0x450c0f[_0x5d7973(0x1bb)](_0x5d7973(0x1f5),{'success':_0x2572de[_0x5d7973(0x1eb)]('success'),'errors':_0x2572de[_0x5d7973(0x1eb)](_0x5d7973(0x1fd)),'role':_0x20452e,'profile':_0x1845dc,'master_shop':_0x11d8a9,'timezones':timezones,'language':_0x21beda,'warehouse':_0x1ec7c6});}catch(_0x2081c5){console['log'](_0x2081c5),_0x450c0f[_0x5d7973(0x1fc)](0xc8)[_0x5d7973(0x1c9)]({'message':_0x2081c5[_0x5d7973(0x1ab)]});}}),router[a0_0x4b05ed(0x1de)](a0_0x4b05ed(0x1c2),async(_0x143a2d,_0x3c9c04)=>{const _0xf20e17=a0_0x4b05ed,{warehouseNew:_0x584f49,rooms:_0x23eacb,Type:_0x2e388a}=_0x143a2d[_0xf20e17(0x1b2)],_0x5b9f17=await warehouse['aggregate']([{'$unwind':_0xf20e17(0x1fb)},{'$match':{'name':_0x584f49,'room':_0x23eacb,'product_details.type':_0x2e388a}},{'$group':{'_id':{'bay':_0xf20e17(0x1b9),'bin':'$product_details.bin','type':_0xf20e17(0x1d0),'floorlevel':_0xf20e17(0x1e4)},'products':{'$push':{'product_name':_0xf20e17(0x1b1),'product_quantity':_0xf20e17(0x1e5),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0xf20e17(0x1e5),0x0]},'then':_0xf20e17(0x1e5),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0xf20e17(0x1dd),'bin':'$_id.bin','type':_0xf20e17(0x1ca),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0xf20e17(0x1b4),'as':_0xf20e17(0x1d2),'cond':{'$gt':[_0xf20e17(0x1f9),0x0]}}},'totalQuantity':0x1}}]);_0x3c9c04[_0xf20e17(0x1c9)](_0x5b9f17);}),router['post'](a0_0x4b05ed(0x1a6),async(_0x329c39,_0x4ccdc5)=>{const _0x953737=a0_0x4b05ed,{warehouseNew:_0x14749c,rooms:_0x167a50,room_cat:_0x574547,process_cat:_0x2f3ba6}=_0x329c39[_0x953737(0x1b2)];let _0x1efbb0;if(_0x574547==_0x953737(0x1d4))_0x2f3ba6==_0x953737(0x1cb)?_0x1efbb0=await warehouse[_0x953737(0x1b0)]([{'$unwind':_0x953737(0x1bd)},{'$match':{'name':_0x14749c}},{'$group':{'_id':'$product_details_spmx.product_code','spicemix_spmx':{'$first':_0x953737(0x1c6)},'extenders_spmx':{'$first':_0x953737(0x1fa)},'curing_spmx':{'$first':_0x953737(0x1b7)},'spicemix_spmx_qty':{'$sum':'$product_details_spmx.spicemix_spmx_qty'},'extenders_spmx_qty':{'$sum':_0x953737(0x1df)},'curing_spmx_qty':{'$sum':'$product_details_spmx.curing_spmx_qty'},'unit_spmx':{'$first':_0x953737(0x1f6)},'brand_spmx':{'$first':_0x953737(0x1be)},'category_spmx':{'$first':_0x953737(0x1ae)}}}]):_0x1efbb0=await warehouse['aggregate']([{'$unwind':_0x953737(0x1fb)},{'$match':{'name':_0x14749c,'product_details.product_stock':{'$gt':0x0}}},{'$group':{'_id':{'bay':_0x953737(0x1b9),'product':_0x953737(0x1b1),'expiry':_0x953737(0x1dc)},'count':{'$sum':_0x953737(0x1e5)},'production_date':{'$first':_0x953737(0x1ba)},'expiry_date':{'$first':_0x953737(0x1dc)},'batch_code':{'$first':_0x953737(0x1ff)},'product_code':{'$first':_0x953737(0x1ad)}}},{'$group':{'_id':_0x953737(0x1dd),'products':{'$push':{'product':_0x953737(0x1a8),'quantity':_0x953737(0x1e9),'production_date':'$production_date','expiry_date':_0x953737(0x1ed),'batch_code':'$batch_code','product_code':_0x953737(0x1aa)}},'totalQuantity':{'$sum':_0x953737(0x1e9)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x953737(0x1fe),'products':0x1,'totalQuantity':0x1}}]),console[_0x953737(0x1d6)](_0x574547);else{}console[_0x953737(0x1d6)](_0x1efbb0),_0x4ccdc5[_0x953737(0x1c9)](_0x1efbb0);}),router[a0_0x4b05ed(0x1de)]('/Rooms_data',async(_0x3c25af,_0x2d82f5)=>{const _0x3b02bb=a0_0x4b05ed;try{const {warehouse_name:_0x4858d8,A:_0x1c698d,B:_0x2fca30}=_0x3c25af['body'];var _0x1fe948='';_0x1c698d=='raw'?_0x2fca30==_0x3b02bb(0x1a7)?_0x1fe948=[{'$match':{'name':_0x4858d8,'status':_0x3b02bb(0x1f3),'room':_0x3b02bb(0x1d5)}},{'$group':{'_id':_0x3b02bb(0x1fe),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x1fe948=[{'$match':{'name':_0x4858d8,'status':'Enabled'}},{'$group':{'_id':_0x3b02bb(0x1fe),'room_name':{'$first':_0x3b02bb(0x1cf)}}},{'$sort':{'room_name':0x1}}]:_0x1fe948=[{'$match':{'name':_0x4858d8,'status':'Enabled'}},{'$group':{'_id':_0x3b02bb(0x1fe),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x5d76d9=await warehouse[_0x3b02bb(0x1b0)](_0x1fe948);_0x2d82f5['status'](0xc8)[_0x3b02bb(0x1c9)](_0x5d76d9);}catch(_0x3fb8ba){_0x2d82f5['status'](0x190)[_0x3b02bb(0x1c9)]({'errorMessage':_0x3fb8ba[_0x3b02bb(0x1ab)]});}}),router[a0_0x4b05ed(0x1de)](a0_0x4b05ed(0x1ec),async(_0x17fab7,_0x224530)=>{const _0x5b21d9=a0_0x4b05ed;try{const {warehouse_name:_0x25dbb5,cat:_0x345673,valNew:_0x260311}=_0x17fab7[_0x5b21d9(0x1b2)];console[_0x5b21d9(0x1d6)](_0x17fab7[_0x5b21d9(0x1b2)]);var _0x218a67='',_0x8ac904='';if(_0x345673==_0x5b21d9(0x1e0))_0x218a67='Return\x20Goods',_0x260311==_0x5b21d9(0x1a7)?_0x8ac904=[{'$match':{'status':_0x5b21d9(0x1f3),'warehouse_category':_0x345673,'name':{'$ne':_0x218a67},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x5b21d9(0x200),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x8ac904=[{'$match':{'status':_0x5b21d9(0x1f3),'warehouse_category':_0x345673,'name':{'$ne':_0x218a67}}},{'$group':{'_id':'$name','room_name':{'$first':_0x5b21d9(0x200)}}},{'$sort':{'room_name':0x1}}];else{if(_0x345673=='Finished\x20Goods')_0x218a67=_0x5b21d9(0x1ea),_0x8ac904=[{'$match':{'status':_0x5b21d9(0x1f3),'warehouse_category':_0x345673,'name':{'$ne':_0x218a67}}},{'$group':{'_id':_0x5b21d9(0x200),'room_name':{'$first':_0x5b21d9(0x200)}}},{'$sort':{'room_name':0x1}}];else _0x345673==_0x5b21d9(0x1cb)?_0x8ac904=[{'$match':{'status':'Enabled','warehouse_category':_0x345673,'name':{'$ne':_0x218a67}}},{'$group':{'_id':_0x5b21d9(0x200),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x8ac904=[{'$match':{'status':_0x5b21d9(0x1f3)}},{'$group':{'_id':_0x5b21d9(0x200),'room_name':{'$first':_0x5b21d9(0x200)}}},{'$sort':{'room_name':0x1}}];}const _0x3796c4=await warehouse['aggregate'](_0x8ac904);_0x224530[_0x5b21d9(0x1fc)](0xc8)[_0x5b21d9(0x1c9)](_0x3796c4);}catch(_0xa0f4b5){_0x224530[_0x5b21d9(0x1fc)](0x190)[_0x5b21d9(0x1c9)]({'errorMessage':_0xa0f4b5['message']}),console['log'](_0xa0f4b5);}}),router[a0_0x4b05ed(0x1de)](a0_0x4b05ed(0x1ce),async(_0x478e76,_0x119a58)=>{const _0xc79e7c=a0_0x4b05ed;try{const {warehouse_name:_0x2e4aab,cat:_0x1d858a}=_0x478e76[_0xc79e7c(0x1b2)],_0x229bdc=await warehouse['aggregate']([{'$match':{'status':_0xc79e7c(0x1f3),'warehouse_category':_0x1d858a,'name':_0x2e4aab}},{'$group':{'_id':_0xc79e7c(0x1cf),'room_name':{'$first':_0xc79e7c(0x1cf)}}},{'$sort':{'room_name':0x1}}]);_0x119a58[_0xc79e7c(0x1fc)](0xc8)['json'](_0x229bdc);}catch(_0x57eaa3){_0x119a58[_0xc79e7c(0x1fc)](0x190)[_0xc79e7c(0x1c9)]({'errorMessage':_0x57eaa3[_0xc79e7c(0x1ab)]});}}),module[a0_0x4b05ed(0x1d9)]=router;