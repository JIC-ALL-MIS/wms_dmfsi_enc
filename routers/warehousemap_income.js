const a0_0x2c5f32=a0_0xbab5;function a0_0xbab5(_0x330faf,_0x39f7c7){const _0x370f4d=a0_0x370f();return a0_0xbab5=function(_0xbab585,_0x5e9d53){_0xbab585=_0xbab585-0x98;let _0x30de41=_0x370f4d[_0xbab585];return _0x30de41;},a0_0xbab5(_0x330faf,_0x39f7c7);}(function(_0x3f6651,_0x373809){const _0x33d630=a0_0xbab5,_0x3eef4f=_0x3f6651();while(!![]){try{const _0x338e35=parseInt(_0x33d630(0xd9))/0x1+-parseInt(_0x33d630(0xac))/0x2+parseInt(_0x33d630(0x9d))/0x3+-parseInt(_0x33d630(0xd6))/0x4*(parseInt(_0x33d630(0x9e))/0x5)+parseInt(_0x33d630(0xd2))/0x6*(parseInt(_0x33d630(0xce))/0x7)+parseInt(_0x33d630(0xc6))/0x8*(-parseInt(_0x33d630(0x9c))/0x9)+-parseInt(_0x33d630(0xbe))/0xa*(-parseInt(_0x33d630(0xcb))/0xb);if(_0x338e35===_0x373809)break;else _0x3eef4f['push'](_0x3eef4f['shift']());}catch(_0x3a8d27){_0x3eef4f['push'](_0x3eef4f['shift']());}}}(a0_0x370f,0x3a2db));const express=require(a0_0x2c5f32(0xbc)),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2c5f32(0xc2)),auth=require(a0_0x2c5f32(0xb9));var timezones=require(a0_0x2c5f32(0xe2));const users=require(a0_0x2c5f32(0xd4));function a0_0x370f(){const _0x5895ce=['$_id.type','timezones-list','$product_details.type','Finished\x20Goods','Chinese','$expiry_date','language','$product_details.product_name','$product_code','json','flash','timezone','837zpBUEn','938850XddKUQ','190xlvRLm','$product_details.product_code','get','$room','$name','$$product.product_quantity','$_id','$product_details.bin','en-US','/MapData','/MapData2','log','DRY\x20STORAGE','$product_details.bay','832598cTrjrv','post','master','$product_details','find','German','Arabic\x20(ae)','body','exports','/Rooms_data2','Portuguese\x20(BR)','Enabled','$count','../middleware/auth','email','aggregate','express','Rack\x20A','855410CnTPxn','message','user','findOne','../models/all_models','status','$_id.bay','raw','34064rEybZk','Hindi','Raw\x20Materials','QA\x20Warehouse','render','55RkFJLq','Arabic','French','36491DfxPYl','$product_details.batch_code','product','$product_details.expiry_date','402RVmwbl','$product_details.production_date','../public/language/languages.json','warehousemap_incoming','33080TJSNbI','$_id.floorlevel','Spanish','274926oFOucD','$product_details.product_stock','Return\x20Goods','$_id.product','$product_details.floorlevel','English\x20(US)','role','English'];a0_0x370f=function(){return _0x5895ce;};return a0_0x370f();}router[a0_0x2c5f32(0xa0)]('/view',auth,async(_0xc06f6e,_0x3f8e3f)=>{const _0x5ead52=a0_0x2c5f32;try{const {username:_0x2b4d76,email:_0x1d6d83,role:_0x2ce535}=_0xc06f6e[_0x5ead52(0xc0)],_0x4cf490=_0xc06f6e[_0x5ead52(0xc0)],_0x4efca4=await profile['findOne']({'email':_0x4cf490[_0x5ead52(0xba)]}),_0x3dd77b=await master_shop[_0x5ead52(0xb0)]();console[_0x5ead52(0xa9)](_0x5ead52(0xae),_0x3dd77b);let _0x1af778;if(_0x4cf490[_0x5ead52(0xdf)]=='staff'){const _0x5788f3=await staff[_0x5ead52(0xc1)]({'email':_0x4cf490[_0x5ead52(0xba)]});_0x1af778=await warehouse[_0x5ead52(0xbb)]([{'$match':{'status':_0x5ead52(0xb7),'name':_0x5788f3['warehouse']}},{'$group':{'_id':_0x5ead52(0xa2),'name':{'$first':_0x5ead52(0xa2)}}}]);}else _0x1af778=await warehouse[_0x5ead52(0xbb)]([{'$match':{'status':_0x5ead52(0xb7)}},{'$group':{'_id':_0x5ead52(0xa2),'name':{'$first':_0x5ead52(0xa2)}}}]);const _0x39a3ba=new Date()['toLocaleString'](_0x5ead52(0xa6),{'timeZone':_0x3dd77b[0x0]['timezone']});console['log'](_0x5ead52(0x9b),_0x39a3ba);if(_0x3dd77b[0x0]['language']==_0x5ead52(0xde)){var _0x20c411=users[_0x5ead52(0xe0)];console[_0x5ead52(0xa9)](_0x20c411);}else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]==_0x5ead52(0xc7))var _0x20c411=users[_0x5ead52(0xc7)];else{if(_0x3dd77b[0x0]['language']==_0x5ead52(0xb1))var _0x20c411=users[_0x5ead52(0xb1)];else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]=='Spanish')var _0x20c411=users[_0x5ead52(0xd8)];else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]==_0x5ead52(0xcd))var _0x20c411=users[_0x5ead52(0xcd)];else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]==_0x5ead52(0xb6))var _0x20c411=users['Portuguese'];else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]==_0x5ead52(0xe5))var _0x20c411=users['Chinese'];else{if(_0x3dd77b[0x0][_0x5ead52(0xe7)]==_0x5ead52(0xb2))var _0x20c411=users[_0x5ead52(0xcc)];}}}}}}}_0x3f8e3f[_0x5ead52(0xca)](_0x5ead52(0xd5),{'success':_0xc06f6e[_0x5ead52(0x9a)]('success'),'errors':_0xc06f6e[_0x5ead52(0x9a)]('errors'),'role':_0x4cf490,'profile':_0x4efca4,'master_shop':_0x3dd77b,'timezones':timezones,'language':_0x20c411,'warehouse':_0x1af778});}catch(_0x1bd85b){console[_0x5ead52(0xa9)](_0x1bd85b),_0x3f8e3f[_0x5ead52(0xc3)](0xc8)[_0x5ead52(0x99)]({'message':_0x1bd85b[_0x5ead52(0xbf)]});}}),router['post'](a0_0x2c5f32(0xa7),async(_0x6307db,_0x15031c)=>{const _0x2d769f=a0_0x2c5f32,{warehouseNew:_0xd7208,rooms:_0x114c9d,Type:_0x2125cf}=_0x6307db['body'],_0x4fe5eb=await warehouse[_0x2d769f(0xbb)]([{'$unwind':_0x2d769f(0xaf)},{'$match':{'name':_0xd7208,'room':_0x114c9d,'product_details.type':_0x2125cf}},{'$group':{'_id':{'bay':_0x2d769f(0xab),'bin':_0x2d769f(0xa5),'type':_0x2d769f(0xe3),'floorlevel':_0x2d769f(0xdd)},'products':{'$push':{'product_name':_0x2d769f(0xe8),'product_quantity':_0x2d769f(0xda),'product_code':_0x2d769f(0x9f)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2d769f(0xda),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x2d769f(0xc4),'bin':'$_id.bin','type':_0x2d769f(0xe1),'floorlevel':_0x2d769f(0xd7),'products':{'$filter':{'input':'$products','as':_0x2d769f(0xd0),'cond':{'$gt':[_0x2d769f(0xa3),0x0]}}},'totalQuantity':0x1}}]);_0x15031c[_0x2d769f(0x99)](_0x4fe5eb);}),router['post'](a0_0x2c5f32(0xa8),async(_0x288949,_0x432650)=>{const _0x55c0be=a0_0x2c5f32,{warehouseNew:_0x299216,rooms:_0x291cd5,room_cat:_0x1708e7}=_0x288949[_0x55c0be(0xb3)];let _0x8d2275;if(_0x1708e7=='All')_0x8d2275=await warehouse[_0x55c0be(0xbb)]([{'$unwind':_0x55c0be(0xaf)},{'$match':{'name':_0x299216}},{'$group':{'_id':{'bay':_0x55c0be(0xab),'product':_0x55c0be(0xe8),'expiry':'$product_details.expiry_date'},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':_0x55c0be(0xd3)},'expiry_date':{'$first':_0x55c0be(0xd1)},'batch_code':{'$first':_0x55c0be(0xcf)},'product_code':{'$first':_0x55c0be(0x9f)}}},{'$group':{'_id':_0x55c0be(0xc4),'products':{'$push':{'product':_0x55c0be(0xdc),'quantity':_0x55c0be(0xb8),'production_date':'$production_date','expiry_date':_0x55c0be(0xe6),'batch_code':'$batch_code','product_code':_0x55c0be(0x98)}},'totalQuantity':{'$sum':_0x55c0be(0xb8)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x55c0be(0xa4),'products':0x1,'totalQuantity':0x1}}]),console[_0x55c0be(0xa9)](_0x1708e7);else{}_0x432650[_0x55c0be(0x99)](_0x8d2275);}),router[a0_0x2c5f32(0xad)]('/Rooms_data',async(_0xf1d3c7,_0x12d654)=>{const _0x4a6119=a0_0x2c5f32;try{const {warehouse_name:_0x591533,A:_0x357014,B:_0x3c1340}=_0xf1d3c7[_0x4a6119(0xb3)];var _0xc004e='';_0x357014==_0x4a6119(0xc5)?_0x3c1340=='pack'?_0xc004e=[{'$match':{'name':_0x591533,'status':_0x4a6119(0xb7),'room':_0x4a6119(0xbd)}},{'$group':{'_id':_0x4a6119(0xa4),'room_name':{'$first':_0x4a6119(0xa1)}}},{'$sort':{'room_name':0x1}}]:_0xc004e=[{'$match':{'name':_0x591533,'status':_0x4a6119(0xb7)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4a6119(0xa1)}}},{'$sort':{'room_name':0x1}}]:_0xc004e=[{'$match':{'name':_0x591533,'status':_0x4a6119(0xb7)}},{'$group':{'_id':_0x4a6119(0xa4),'room_name':{'$first':_0x4a6119(0xa1)}}},{'$sort':{'room_name':0x1}}];const _0x5181f6=await warehouse[_0x4a6119(0xbb)](_0xc004e);_0x12d654[_0x4a6119(0xc3)](0xc8)[_0x4a6119(0x99)](_0x5181f6);}catch(_0x51f57f){_0x12d654[_0x4a6119(0xc3)](0x190)[_0x4a6119(0x99)]({'errorMessage':_0x51f57f[_0x4a6119(0xbf)]});}}),router[a0_0x2c5f32(0xad)](a0_0x2c5f32(0xb5),async(_0x494cc5,_0x3fcebc)=>{const _0x3a5752=a0_0x2c5f32;try{const {warehouse_name:_0x3c16ae,cat:_0x434f8d,valNew:_0x5e5cbd}=_0x494cc5[_0x3a5752(0xb3)];var _0x319c21='',_0x1eb140='';if(_0x434f8d==_0x3a5752(0xc8))_0x319c21=_0x3a5752(0xdb),_0x5e5cbd=='pack'?_0x1eb140=[{'$match':{'status':_0x3a5752(0xb7),'warehouse_category':_0x434f8d,'name':{'$ne':_0x319c21},'name':_0x3a5752(0xaa)}},{'$group':{'_id':'$name','room_name':{'$first':_0x3a5752(0xa2)}}},{'$sort':{'room_name':0x1}}]:_0x1eb140=[{'$match':{'status':'Enabled','warehouse_category':_0x434f8d,'name':{'$ne':_0x319c21}}},{'$group':{'_id':_0x3a5752(0xa2),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x434f8d==_0x3a5752(0xe4)?(_0x319c21=_0x3a5752(0xc9),_0x1eb140=[{'$match':{'status':'Enabled','warehouse_category':_0x434f8d,'name':{'$ne':_0x319c21}}},{'$group':{'_id':_0x3a5752(0xa2),'room_name':{'$first':_0x3a5752(0xa2)}}},{'$sort':{'room_name':0x1}}]):_0x1eb140=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x3a5752(0xa2),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x2d9680=await warehouse[_0x3a5752(0xbb)](_0x1eb140);_0x3fcebc[_0x3a5752(0xc3)](0xc8)['json'](_0x2d9680);}catch(_0x4504dc){_0x3fcebc[_0x3a5752(0xc3)](0x190)[_0x3a5752(0x99)]({'errorMessage':_0x4504dc[_0x3a5752(0xbf)]}),console[_0x3a5752(0xa9)](_0x4504dc);}}),router[a0_0x2c5f32(0xad)]('/Rooms_data3',async(_0x4c3f46,_0x59c72a)=>{const _0x396cba=a0_0x2c5f32;try{const {warehouse_name:_0x28f1de,cat:_0x489178}=_0x4c3f46['body'],_0x222e28=await warehouse[_0x396cba(0xbb)]([{'$match':{'status':'Enabled','warehouse_category':_0x489178,'name':_0x28f1de}},{'$group':{'_id':_0x396cba(0xa1),'room_name':{'$first':_0x396cba(0xa1)}}},{'$sort':{'room_name':0x1}}]);_0x59c72a[_0x396cba(0xc3)](0xc8)[_0x396cba(0x99)](_0x222e28);}catch(_0xced422){_0x59c72a[_0x396cba(0xc3)](0x190)[_0x396cba(0x99)]({'errorMessage':_0xced422[_0x396cba(0xbf)]});}}),module[a0_0x2c5f32(0xb4)]=router;