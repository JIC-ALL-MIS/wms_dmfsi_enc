function a0_0x1c97(){const _0xc98aea=['log','$product_details.expiry_date','7090155vYVtYm','status','Enabled','timezone','Spanish','Finished\x20Goods','../public/language/languages.json','$name','/view','DRY\x20STORAGE','get','$product_details.bay','English','../middleware/auth','5369664CPIQJj','$_id.bay','multer','$product_details.type','/Rooms_data3','/MapData2','$_id.product','Hindi','$product_details.bin','warehouse','$batch_code','express','$_id.bin','$room','find','Arabic','15759656yHvxHI','All','message','$product_details.product_stock','Chinese','/MapData','$product_details.batch_code','$count','json','$products','body','Router','language','$$product.product_quantity','$_id','en-US','$expiry_date','Return\x20Goods','flash','pack','$product_details.product_name','user','Rack\x20A','French','warehousemap_incoming','7906804RQCktq','$product_details.product_code','$_id.type','master','role','QA\x20Warehouse','2318190UlChAf','errors','7wItnGS','$production_date','3799656SdnIWE','findOne','745820hItcbS','aggregate','Raw\x20Materials','render','Portuguese\x20(BR)','Portuguese','/Rooms_data2','German','post','$product_details','staff','$product_code'];a0_0x1c97=function(){return _0xc98aea;};return a0_0x1c97();}function a0_0x15e2(_0x532e73,_0x40e39b){const _0x1c97b7=a0_0x1c97();return a0_0x15e2=function(_0x15e277,_0x4614e9){_0x15e277=_0x15e277-0xe2;let _0x500351=_0x1c97b7[_0x15e277];return _0x500351;},a0_0x15e2(_0x532e73,_0x40e39b);}const a0_0x1cbfb0=a0_0x15e2;(function(_0x100d92,_0x4b82b2){const _0x349d2a=a0_0x15e2,_0x2ddc0f=_0x100d92();while(!![]){try{const _0xd1d6f=-parseInt(_0x349d2a(0xf4))/0x1+-parseInt(_0x349d2a(0xee))/0x2+parseInt(_0x349d2a(0xf2))/0x3+parseInt(_0x349d2a(0xe8))/0x4+-parseInt(_0x349d2a(0x102))/0x5+-parseInt(_0x349d2a(0x110))/0x6*(parseInt(_0x349d2a(0xf0))/0x7)+parseInt(_0x349d2a(0x120))/0x8;if(_0xd1d6f===_0x4b82b2)break;else _0x2ddc0f['push'](_0x2ddc0f['shift']());}catch(_0xd84a65){_0x2ddc0f['push'](_0x2ddc0f['shift']());}}}(a0_0x1c97,0xf2ff8));const express=require(a0_0x1cbfb0(0x11b)),app=express(),router=express[a0_0x1cbfb0(0x12b)](),multer=require(a0_0x1cbfb0(0x112)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require(a0_0x1cbfb0(0x10f));var timezones=require('timezones-list');const users=require(a0_0x1cbfb0(0x108));router[a0_0x1cbfb0(0x10c)](a0_0x1cbfb0(0x10a),auth,async(_0xababd,_0x27245a)=>{const _0x42549c=a0_0x1cbfb0;try{const {username:_0x4ec1ab,email:_0x1b25a5,role:_0x267de0}=_0xababd[_0x42549c(0xe4)],_0x4e3a92=_0xababd['user'],_0x40e389=await profile[_0x42549c(0xf3)]({'email':_0x4e3a92['email']}),_0x10feff=await master_shop[_0x42549c(0x11e)]();console['log'](_0x42549c(0xeb),_0x10feff);let _0xe3ceb5;if(_0x4e3a92[_0x42549c(0xec)]==_0x42549c(0xfe)){const _0x43b547=await staff[_0x42549c(0xf3)]({'email':_0x4e3a92['email']});_0xe3ceb5=await warehouse[_0x42549c(0xf5)]([{'$match':{'status':_0x42549c(0x104),'name':_0x43b547[_0x42549c(0x119)]}},{'$group':{'_id':'$name','name':{'$first':_0x42549c(0x109)}}}]);}else _0xe3ceb5=await warehouse[_0x42549c(0xf5)]([{'$match':{'status':_0x42549c(0x104)}},{'$group':{'_id':'$name','name':{'$first':_0x42549c(0x109)}}}]);const _0x3b1368=new Date()['toLocaleString'](_0x42549c(0x12f),{'timeZone':_0x10feff[0x0][_0x42549c(0x105)]});console[_0x42549c(0x100)](_0x42549c(0x105),_0x3b1368);if(_0x10feff[0x0][_0x42549c(0x12c)]=='English\x20(US)'){var _0x31221e=users[_0x42549c(0x10e)];console['log'](_0x31221e);}else{if(_0x10feff[0x0][_0x42549c(0x12c)]==_0x42549c(0x117))var _0x31221e=users[_0x42549c(0x117)];else{if(_0x10feff[0x0][_0x42549c(0x12c)]==_0x42549c(0xfb))var _0x31221e=users[_0x42549c(0xfb)];else{if(_0x10feff[0x0][_0x42549c(0x12c)]==_0x42549c(0x106))var _0x31221e=users['Spanish'];else{if(_0x10feff[0x0]['language']==_0x42549c(0xe6))var _0x31221e=users['French'];else{if(_0x10feff[0x0]['language']==_0x42549c(0xf8))var _0x31221e=users[_0x42549c(0xf9)];else{if(_0x10feff[0x0]['language']=='Chinese')var _0x31221e=users[_0x42549c(0x124)];else{if(_0x10feff[0x0]['language']=='Arabic\x20(ae)')var _0x31221e=users[_0x42549c(0x11f)];}}}}}}}_0x27245a[_0x42549c(0xf7)](_0x42549c(0xe7),{'success':_0xababd[_0x42549c(0x132)]('success'),'errors':_0xababd[_0x42549c(0x132)](_0x42549c(0xef)),'role':_0x4e3a92,'profile':_0x40e389,'master_shop':_0x10feff,'timezones':timezones,'language':_0x31221e,'warehouse':_0xe3ceb5});}catch(_0x563bf3){console[_0x42549c(0x100)](_0x563bf3),_0x27245a[_0x42549c(0x103)](0xc8)[_0x42549c(0x128)]({'message':_0x563bf3[_0x42549c(0x122)]});}}),router[a0_0x1cbfb0(0xfc)](a0_0x1cbfb0(0x125),async(_0x425046,_0x4ef750)=>{const _0x129bf6=a0_0x1cbfb0,{warehouseNew:_0x5c6d68,rooms:_0x11ec6b,Type:_0x1de4ce}=_0x425046[_0x129bf6(0x12a)],_0x3bb7e0=await warehouse[_0x129bf6(0xf5)]([{'$unwind':'$product_details'},{'$match':{'name':_0x5c6d68,'room':_0x11ec6b,'product_details.type':_0x1de4ce}},{'$group':{'_id':{'bay':_0x129bf6(0x10d),'bin':_0x129bf6(0x118),'type':_0x129bf6(0x113),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x129bf6(0xe3),'product_quantity':_0x129bf6(0x123),'product_code':_0x129bf6(0xe9)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x129bf6(0x123),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x129bf6(0x111),'bin':_0x129bf6(0x11c),'type':_0x129bf6(0xea),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x129bf6(0x129),'as':'product','cond':{'$gt':[_0x129bf6(0x12d),0x0]}}},'totalQuantity':0x1}}]);_0x4ef750[_0x129bf6(0x128)](_0x3bb7e0);}),router[a0_0x1cbfb0(0xfc)](a0_0x1cbfb0(0x115),async(_0x68db17,_0x23ec8f)=>{const _0x54f4ea=a0_0x1cbfb0,{warehouseNew:_0x379c2f,rooms:_0x1d540a,room_cat:_0x37517a}=_0x68db17['body'];let _0x3c10f7;if(_0x37517a==_0x54f4ea(0x121))_0x3c10f7=await warehouse[_0x54f4ea(0xf5)]([{'$unwind':_0x54f4ea(0xfd)},{'$match':{'name':_0x379c2f}},{'$group':{'_id':{'bay':_0x54f4ea(0x10d),'product':'$product_details.product_name','expiry':_0x54f4ea(0x101)},'count':{'$sum':_0x54f4ea(0x123)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x54f4ea(0x101)},'batch_code':{'$first':_0x54f4ea(0x126)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x54f4ea(0x111),'products':{'$push':{'product':_0x54f4ea(0x116),'quantity':_0x54f4ea(0x127),'production_date':_0x54f4ea(0xf1),'expiry_date':_0x54f4ea(0x130),'batch_code':_0x54f4ea(0x11a),'product_code':_0x54f4ea(0xff)}},'totalQuantity':{'$sum':_0x54f4ea(0x127)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x54f4ea(0x12e),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x37517a);else{}_0x23ec8f[_0x54f4ea(0x128)](_0x3c10f7);}),router[a0_0x1cbfb0(0xfc)]('/Rooms_data',async(_0x3cc2e8,_0xcaa00c)=>{const _0x177aad=a0_0x1cbfb0;try{const {warehouse_name:_0x1c376c,A:_0x4371c6,B:_0x10fc06}=_0x3cc2e8[_0x177aad(0x12a)];var _0x33a07d='';_0x4371c6=='raw'?_0x10fc06==_0x177aad(0xe2)?_0x33a07d=[{'$match':{'name':_0x1c376c,'status':_0x177aad(0x104),'room':_0x177aad(0xe5)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x177aad(0x11d)}}},{'$sort':{'room_name':0x1}}]:_0x33a07d=[{'$match':{'name':_0x1c376c,'status':'Enabled'}},{'$group':{'_id':_0x177aad(0x12e),'room_name':{'$first':_0x177aad(0x11d)}}},{'$sort':{'room_name':0x1}}]:_0x33a07d=[{'$match':{'name':_0x1c376c,'status':'Enabled'}},{'$group':{'_id':_0x177aad(0x12e),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0xa0d312=await warehouse[_0x177aad(0xf5)](_0x33a07d);_0xcaa00c['status'](0xc8)[_0x177aad(0x128)](_0xa0d312);}catch(_0x52cb49){_0xcaa00c[_0x177aad(0x103)](0x190)['json']({'errorMessage':_0x52cb49[_0x177aad(0x122)]});}}),router[a0_0x1cbfb0(0xfc)](a0_0x1cbfb0(0xfa),async(_0x3dc5da,_0x5791e2)=>{const _0x14aa58=a0_0x1cbfb0;try{const {warehouse_name:_0x216fcb,cat:_0x5cf898,valNew:_0x511668}=_0x3dc5da['body'];var _0x3a7bf2='',_0x18e80e='';if(_0x5cf898==_0x14aa58(0xf6))_0x3a7bf2=_0x14aa58(0x131),_0x511668==_0x14aa58(0xe2)?_0x18e80e=[{'$match':{'status':_0x14aa58(0x104),'warehouse_category':_0x5cf898,'name':{'$ne':_0x3a7bf2},'name':_0x14aa58(0x10b)}},{'$group':{'_id':'$name','room_name':{'$first':_0x14aa58(0x109)}}},{'$sort':{'room_name':0x1}}]:_0x18e80e=[{'$match':{'status':'Enabled','warehouse_category':_0x5cf898,'name':{'$ne':_0x3a7bf2}}},{'$group':{'_id':_0x14aa58(0x109),'room_name':{'$first':_0x14aa58(0x109)}}},{'$sort':{'room_name':0x1}}];else _0x5cf898==_0x14aa58(0x107)?(_0x3a7bf2=_0x14aa58(0xed),_0x18e80e=[{'$match':{'status':_0x14aa58(0x104),'warehouse_category':_0x5cf898,'name':{'$ne':_0x3a7bf2}}},{'$group':{'_id':_0x14aa58(0x109),'room_name':{'$first':_0x14aa58(0x109)}}},{'$sort':{'room_name':0x1}}]):_0x18e80e=[{'$match':{'status':_0x14aa58(0x104)}},{'$group':{'_id':'$name','room_name':{'$first':_0x14aa58(0x109)}}},{'$sort':{'room_name':0x1}}];const _0x321830=await warehouse['aggregate'](_0x18e80e);_0x5791e2[_0x14aa58(0x103)](0xc8)['json'](_0x321830);}catch(_0x30db45){_0x5791e2[_0x14aa58(0x103)](0x190)[_0x14aa58(0x128)]({'errorMessage':_0x30db45[_0x14aa58(0x122)]}),console[_0x14aa58(0x100)](_0x30db45);}}),router['post'](a0_0x1cbfb0(0x114),async(_0x2e4f42,_0x28c324)=>{const _0xa00e2c=a0_0x1cbfb0;try{const {warehouse_name:_0xd60cc4,cat:_0xbbb0c}=_0x2e4f42[_0xa00e2c(0x12a)],_0x54ea47=await warehouse[_0xa00e2c(0xf5)]([{'$match':{'status':_0xa00e2c(0x104),'warehouse_category':_0xbbb0c,'name':_0xd60cc4}},{'$group':{'_id':_0xa00e2c(0x11d),'room_name':{'$first':_0xa00e2c(0x11d)}}},{'$sort':{'room_name':0x1}}]);_0x28c324[_0xa00e2c(0x103)](0xc8)[_0xa00e2c(0x128)](_0x54ea47);}catch(_0x7ef225){_0x28c324[_0xa00e2c(0x103)](0x190)[_0xa00e2c(0x128)]({'errorMessage':_0x7ef225[_0xa00e2c(0x122)]});}}),module['exports']=router;