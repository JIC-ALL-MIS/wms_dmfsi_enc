const a0_0x5dd5a9=a0_0x27de;function a0_0xcd58(){const _0x4fb680=['language','$expiry_date','$product_details.product_stock','$_id.product','$_id.floorlevel','warehousemap_incoming','Hindi','get','German','$product_details.product_name','$_id.bay','/MapData2','json','$product_details','role','warehouse','15717897MornBH','All','staff','render','3290782wQrRjk','find','success','en-US','Rack\x20A','$batch_code','$product_details.batch_code','pack','13111FUwUUk','Spanish','$_id.bin','1361938yQodZR','Chinese','timezone','3054sPVVxf','../models/all_models','$product_code','../public/language/languages.json','$product_details.product_code','French','QA\x20Warehouse','timezones-list','$product_details.bay','Finished\x20Goods','$product_details.type','30zARenY','message','Router','$product_details.production_date','email','aggregate','errors','master','$room','10rQKGpn','user','flash','/Rooms_data3','/view','$products','post','findOne','5405352miEgOZ','$product_details.floorlevel','Return\x20Goods','product','1921149bEEzSg','/MapData','English','Enabled','Arabic\x20(ae)','1887996wfmlbs','$product_details.expiry_date','English\x20(US)','express','body','Raw\x20Materials','multer','log','DRY\x20STORAGE','Portuguese','$_id.type','$name','/Rooms_data2','status','$_id'];a0_0xcd58=function(){return _0x4fb680;};return a0_0xcd58();}(function(_0x2c2f1d,_0x507678){const _0x4400c6=a0_0x27de,_0x548738=_0x2c2f1d();while(!![]){try{const _0x5dfc31=-parseInt(_0x4400c6(0x117))/0x1+-parseInt(_0x4400c6(0x10c))/0x2+-parseInt(_0x4400c6(0xe4))/0x3+-parseInt(_0x4400c6(0xe9))/0x4*(-parseInt(_0x4400c6(0x12e))/0x5)+parseInt(_0x4400c6(0x11a))/0x6*(-parseInt(_0x4400c6(0x114))/0x7)+-parseInt(_0x4400c6(0x136))/0x8+parseInt(_0x4400c6(0x108))/0x9*(parseInt(_0x4400c6(0x125))/0xa);if(_0x5dfc31===_0x507678)break;else _0x548738['push'](_0x548738['shift']());}catch(_0x52ffe2){_0x548738['push'](_0x548738['shift']());}}}(a0_0xcd58,0xdd53f));const express=require(a0_0x5dd5a9(0xec)),app=express(),router=express[a0_0x5dd5a9(0x127)](),multer=require(a0_0x5dd5a9(0xef)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x5dd5a9(0x11b)),auth=require('../middleware/auth');var timezones=require(a0_0x5dd5a9(0x121));function a0_0x27de(_0x50b89c,_0x1c495c){const _0xcd5839=a0_0xcd58();return a0_0x27de=function(_0x27de92,_0x5ba17c){_0x27de92=_0x27de92-0xe3;let _0x3698b0=_0xcd5839[_0x27de92];return _0x3698b0;},a0_0x27de(_0x50b89c,_0x1c495c);}const users=require(a0_0x5dd5a9(0x11d));router[a0_0x5dd5a9(0xff)](a0_0x5dd5a9(0x132),auth,async(_0x8a68d3,_0x126d25)=>{const _0x3dba41=a0_0x5dd5a9;try{const {username:_0x137c36,email:_0x1103b0,role:_0x583bb4}=_0x8a68d3['user'],_0x16a0c4=_0x8a68d3[_0x3dba41(0x12f)],_0x167e8c=await profile[_0x3dba41(0x135)]({'email':_0x16a0c4[_0x3dba41(0x129)]}),_0x27a206=await master_shop[_0x3dba41(0x10d)]();console['log'](_0x3dba41(0x12c),_0x27a206);let _0x3b18e0;if(_0x16a0c4[_0x3dba41(0x106)]==_0x3dba41(0x10a)){const _0x15e15a=await staff[_0x3dba41(0x135)]({'email':_0x16a0c4[_0x3dba41(0x129)]});_0x3b18e0=await warehouse[_0x3dba41(0x12a)]([{'$match':{'status':_0x3dba41(0xe7),'name':_0x15e15a[_0x3dba41(0x107)]}},{'$group':{'_id':_0x3dba41(0xf4),'name':{'$first':_0x3dba41(0xf4)}}}]);}else _0x3b18e0=await warehouse[_0x3dba41(0x12a)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x3dba41(0xf4),'name':{'$first':_0x3dba41(0xf4)}}}]);const _0x5df9e4=new Date()['toLocaleString'](_0x3dba41(0x10f),{'timeZone':_0x27a206[0x0]['timezone']});console[_0x3dba41(0xf0)](_0x3dba41(0x119),_0x5df9e4);if(_0x27a206[0x0]['language']==_0x3dba41(0xeb)){var _0x3e5d6b=users[_0x3dba41(0xe6)];console[_0x3dba41(0xf0)](_0x3e5d6b);}else{if(_0x27a206[0x0][_0x3dba41(0xf8)]==_0x3dba41(0xfe))var _0x3e5d6b=users[_0x3dba41(0xfe)];else{if(_0x27a206[0x0][_0x3dba41(0xf8)]=='German')var _0x3e5d6b=users[_0x3dba41(0x100)];else{if(_0x27a206[0x0][_0x3dba41(0xf8)]==_0x3dba41(0x115))var _0x3e5d6b=users['Spanish'];else{if(_0x27a206[0x0][_0x3dba41(0xf8)]==_0x3dba41(0x11f))var _0x3e5d6b=users[_0x3dba41(0x11f)];else{if(_0x27a206[0x0][_0x3dba41(0xf8)]=='Portuguese\x20(BR)')var _0x3e5d6b=users[_0x3dba41(0xf2)];else{if(_0x27a206[0x0][_0x3dba41(0xf8)]==_0x3dba41(0x118))var _0x3e5d6b=users[_0x3dba41(0x118)];else{if(_0x27a206[0x0]['language']==_0x3dba41(0xe8))var _0x3e5d6b=users['Arabic'];}}}}}}}_0x126d25[_0x3dba41(0x10b)](_0x3dba41(0xfd),{'success':_0x8a68d3['flash'](_0x3dba41(0x10e)),'errors':_0x8a68d3[_0x3dba41(0x130)](_0x3dba41(0x12b)),'role':_0x16a0c4,'profile':_0x167e8c,'master_shop':_0x27a206,'timezones':timezones,'language':_0x3e5d6b,'warehouse':_0x3b18e0});}catch(_0xe26b18){console[_0x3dba41(0xf0)](_0xe26b18),_0x126d25[_0x3dba41(0xf6)](0xc8)['json']({'message':_0xe26b18[_0x3dba41(0x126)]});}}),router[a0_0x5dd5a9(0x134)](a0_0x5dd5a9(0xe5),async(_0x2f8d46,_0x3a0c26)=>{const _0x32068d=a0_0x5dd5a9,{warehouseNew:_0x58989e,rooms:_0x558f96,Type:_0x237f21}=_0x2f8d46['body'],_0x5c8486=await warehouse[_0x32068d(0x12a)]([{'$unwind':'$product_details'},{'$match':{'name':_0x58989e,'room':_0x558f96,'product_details.type':_0x237f21}},{'$group':{'_id':{'bay':'$product_details.bay','bin':'$product_details.bin','type':_0x32068d(0x124),'floorlevel':_0x32068d(0x137)},'products':{'$push':{'product_name':_0x32068d(0x101),'product_quantity':'$product_details.product_stock','product_code':_0x32068d(0x11e)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x32068d(0xfa),0x0]},'then':_0x32068d(0xfa),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x32068d(0x102),'bin':_0x32068d(0x116),'type':_0x32068d(0xf3),'floorlevel':_0x32068d(0xfc),'products':{'$filter':{'input':_0x32068d(0x133),'as':_0x32068d(0xe3),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x3a0c26['json'](_0x5c8486);}),router[a0_0x5dd5a9(0x134)](a0_0x5dd5a9(0x103),async(_0x3abcf9,_0x52dbca)=>{const _0x128b0e=a0_0x5dd5a9,{warehouseNew:_0x598f7c,rooms:_0xa20d34,room_cat:_0x4c8668}=_0x3abcf9['body'];let _0x114f0a;if(_0x4c8668==_0x128b0e(0x109))_0x114f0a=await warehouse[_0x128b0e(0x12a)]([{'$unwind':_0x128b0e(0x105)},{'$match':{'name':_0x598f7c}},{'$group':{'_id':{'bay':_0x128b0e(0x122),'product':_0x128b0e(0x101),'expiry':_0x128b0e(0xea)},'count':{'$sum':_0x128b0e(0xfa)},'production_date':{'$first':_0x128b0e(0x128)},'expiry_date':{'$first':_0x128b0e(0xea)},'batch_code':{'$first':_0x128b0e(0x112)},'product_code':{'$first':_0x128b0e(0x11e)}}},{'$group':{'_id':_0x128b0e(0x102),'products':{'$push':{'product':_0x128b0e(0xfb),'quantity':'$count','production_date':'$production_date','expiry_date':_0x128b0e(0xf9),'batch_code':_0x128b0e(0x111),'product_code':_0x128b0e(0x11c)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x128b0e(0xf7),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x4c8668);else{}_0x52dbca[_0x128b0e(0x104)](_0x114f0a);}),router[a0_0x5dd5a9(0x134)]('/Rooms_data',async(_0x3b4643,_0x32b54d)=>{const _0x1b33ff=a0_0x5dd5a9;try{const {warehouse_name:_0xaabb1,A:_0xafd75,B:_0x18ea36}=_0x3b4643[_0x1b33ff(0xed)];var _0x2ca9fc='';_0xafd75=='raw'?_0x18ea36==_0x1b33ff(0x113)?_0x2ca9fc=[{'$match':{'name':_0xaabb1,'status':'Enabled','room':_0x1b33ff(0x110)}},{'$group':{'_id':_0x1b33ff(0xf7),'room_name':{'$first':_0x1b33ff(0x12d)}}},{'$sort':{'room_name':0x1}}]:_0x2ca9fc=[{'$match':{'name':_0xaabb1,'status':_0x1b33ff(0xe7)}},{'$group':{'_id':_0x1b33ff(0xf7),'room_name':{'$first':_0x1b33ff(0x12d)}}},{'$sort':{'room_name':0x1}}]:_0x2ca9fc=[{'$match':{'name':_0xaabb1,'status':_0x1b33ff(0xe7)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x1b33ff(0x12d)}}},{'$sort':{'room_name':0x1}}];const _0x168441=await warehouse['aggregate'](_0x2ca9fc);_0x32b54d[_0x1b33ff(0xf6)](0xc8)[_0x1b33ff(0x104)](_0x168441);}catch(_0x303575){_0x32b54d[_0x1b33ff(0xf6)](0x190)['json']({'errorMessage':_0x303575['message']});}}),router[a0_0x5dd5a9(0x134)](a0_0x5dd5a9(0xf5),async(_0x2eca02,_0x2163d9)=>{const _0x1d625a=a0_0x5dd5a9;try{const {warehouse_name:_0x3cb7b8,cat:_0x2cc9b9,valNew:_0x4c0b50}=_0x2eca02[_0x1d625a(0xed)];var _0x3fe63a='',_0x1fdc58='';if(_0x2cc9b9==_0x1d625a(0xee))_0x3fe63a=_0x1d625a(0x138),_0x4c0b50==_0x1d625a(0x113)?_0x1fdc58=[{'$match':{'status':_0x1d625a(0xe7),'warehouse_category':_0x2cc9b9,'name':{'$ne':_0x3fe63a},'name':_0x1d625a(0xf1)}},{'$group':{'_id':'$name','room_name':{'$first':_0x1d625a(0xf4)}}},{'$sort':{'room_name':0x1}}]:_0x1fdc58=[{'$match':{'status':_0x1d625a(0xe7),'warehouse_category':_0x2cc9b9,'name':{'$ne':_0x3fe63a}}},{'$group':{'_id':_0x1d625a(0xf4),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x2cc9b9==_0x1d625a(0x123)?(_0x3fe63a=_0x1d625a(0x120),_0x1fdc58=[{'$match':{'status':_0x1d625a(0xe7),'warehouse_category':_0x2cc9b9,'name':{'$ne':_0x3fe63a}}},{'$group':{'_id':_0x1d625a(0xf4),'room_name':{'$first':_0x1d625a(0xf4)}}},{'$sort':{'room_name':0x1}}]):_0x1fdc58=[{'$match':{'status':_0x1d625a(0xe7)}},{'$group':{'_id':'$name','room_name':{'$first':_0x1d625a(0xf4)}}},{'$sort':{'room_name':0x1}}];const _0x3b6a12=await warehouse[_0x1d625a(0x12a)](_0x1fdc58);_0x2163d9['status'](0xc8)[_0x1d625a(0x104)](_0x3b6a12);}catch(_0x5dac11){_0x2163d9[_0x1d625a(0xf6)](0x190)['json']({'errorMessage':_0x5dac11[_0x1d625a(0x126)]}),console[_0x1d625a(0xf0)](_0x5dac11);}}),router[a0_0x5dd5a9(0x134)](a0_0x5dd5a9(0x131),async(_0x4335b8,_0x419458)=>{const _0x44bd54=a0_0x5dd5a9;try{const {warehouse_name:_0xea9cf6,cat:_0x291304}=_0x4335b8['body'],_0xae1aad=await warehouse[_0x44bd54(0x12a)]([{'$match':{'status':_0x44bd54(0xe7),'warehouse_category':_0x291304,'name':_0xea9cf6}},{'$group':{'_id':_0x44bd54(0x12d),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x419458['status'](0xc8)[_0x44bd54(0x104)](_0xae1aad);}catch(_0x3a2885){_0x419458[_0x44bd54(0xf6)](0x190)[_0x44bd54(0x104)]({'errorMessage':_0x3a2885['message']});}}),module['exports']=router;