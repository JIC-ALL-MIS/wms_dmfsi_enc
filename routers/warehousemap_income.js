const a0_0x46afd2=a0_0x391a;(function(_0x3e53e0,_0x366314){const _0x511dbf=a0_0x391a,_0x1ce1a1=_0x3e53e0();while(!![]){try{const _0x599f6a=-parseInt(_0x511dbf(0x10e))/0x1*(parseInt(_0x511dbf(0xe3))/0x2)+parseInt(_0x511dbf(0xed))/0x3*(-parseInt(_0x511dbf(0x12f))/0x4)+parseInt(_0x511dbf(0x115))/0x5+-parseInt(_0x511dbf(0x116))/0x6*(parseInt(_0x511dbf(0xfc))/0x7)+parseInt(_0x511dbf(0x12e))/0x8+-parseInt(_0x511dbf(0xf4))/0x9*(parseInt(_0x511dbf(0x12d))/0xa)+parseInt(_0x511dbf(0xf0))/0xb;if(_0x599f6a===_0x366314)break;else _0x1ce1a1['push'](_0x1ce1a1['shift']());}catch(_0x35a066){_0x1ce1a1['push'](_0x1ce1a1['shift']());}}}(a0_0x2524,0xf1570));function a0_0x2524(){const _0x1130d0=['../models/all_models','../middleware/auth','$product_details.product_name','body','45gmCGrz','German','DRY\x20STORAGE','9079059ZGHeOD','$products','warehouse','language','2619lgylIF','en-US','$production_date','Enabled','json','Portuguese','$_id.product','$product_details.bay','7TfdMhs','master','multer','$name','timezone','post','role','Return\x20Goods','/Rooms_data2','$batch_code','pack','$product_details.product_code','$product_details.floorlevel','English\x20(US)','$product_details.production_date','Portuguese\x20(BR)','$product_details.bin','flash','253UWFqFQ','express','user','Hindi','email','timezones-list','product','7668115eCaasO','11487858fVefak','Router','aggregate','success','$room','$product_code','log','Arabic\x20(ae)','/Rooms_data3','status','render','/MapData','../public/language/languages.json','$product_details.batch_code','$product_details.expiry_date','$_id','Arabic','get','message','Chinese','errors','findOne','$product_details.product_stock','4910EVmqHT','10103248zbwbpy','97764sTSwzX','Finished\x20Goods','$expiry_date','/MapData2','French','$count','$_id.bay','$product_details.type','1654XiNDdN','find','$product_details','/view','QA\x20Warehouse','Spanish'];a0_0x2524=function(){return _0x1130d0;};return a0_0x2524();}const express=require(a0_0x46afd2(0x10f)),app=express(),router=express[a0_0x46afd2(0x117)](),multer=require(a0_0x46afd2(0xfe)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x46afd2(0xe9)),auth=require(a0_0x46afd2(0xea));var timezones=require(a0_0x46afd2(0x113));const users=require(a0_0x46afd2(0x122));function a0_0x391a(_0x4062f2,_0x33f4b1){const _0x25249=a0_0x2524();return a0_0x391a=function(_0x391a1b,_0x4ffb71){_0x391a1b=_0x391a1b-0xdf;let _0x502c9b=_0x25249[_0x391a1b];return _0x502c9b;},a0_0x391a(_0x4062f2,_0x33f4b1);}router[a0_0x46afd2(0x127)](a0_0x46afd2(0xe6),auth,async(_0x480a1a,_0x43ec3a)=>{const _0xf6f4ae=a0_0x46afd2;try{const {username:_0x6c4e1d,email:_0x5ca5b1,role:_0x474de3}=_0x480a1a[_0xf6f4ae(0x110)],_0x2ebb33=_0x480a1a[_0xf6f4ae(0x110)],_0x358c2e=await profile[_0xf6f4ae(0x12b)]({'email':_0x2ebb33['email']}),_0x18ca8c=await master_shop[_0xf6f4ae(0xe4)]();console['log'](_0xf6f4ae(0xfd),_0x18ca8c);let _0x1f5006;if(_0x2ebb33[_0xf6f4ae(0x102)]=='staff'){const _0x14b81a=await staff[_0xf6f4ae(0x12b)]({'email':_0x2ebb33[_0xf6f4ae(0x112)]});_0x1f5006=await warehouse[_0xf6f4ae(0x118)]([{'$match':{'status':_0xf6f4ae(0xf7),'name':_0x14b81a[_0xf6f4ae(0xf2)]}},{'$group':{'_id':_0xf6f4ae(0xff),'name':{'$first':_0xf6f4ae(0xff)}}}]);}else _0x1f5006=await warehouse['aggregate']([{'$match':{'status':_0xf6f4ae(0xf7)}},{'$group':{'_id':_0xf6f4ae(0xff),'name':{'$first':_0xf6f4ae(0xff)}}}]);const _0x23d94e=new Date()['toLocaleString'](_0xf6f4ae(0xf5),{'timeZone':_0x18ca8c[0x0][_0xf6f4ae(0x100)]});console['log'](_0xf6f4ae(0x100),_0x23d94e);if(_0x18ca8c[0x0][_0xf6f4ae(0xf3)]==_0xf6f4ae(0x109)){var _0xa82047=users['English'];console['log'](_0xa82047);}else{if(_0x18ca8c[0x0]['language']==_0xf6f4ae(0x111))var _0xa82047=users[_0xf6f4ae(0x111)];else{if(_0x18ca8c[0x0]['language']==_0xf6f4ae(0xee))var _0xa82047=users[_0xf6f4ae(0xee)];else{if(_0x18ca8c[0x0][_0xf6f4ae(0xf3)]==_0xf6f4ae(0xe8))var _0xa82047=users[_0xf6f4ae(0xe8)];else{if(_0x18ca8c[0x0][_0xf6f4ae(0xf3)]==_0xf6f4ae(0xdf))var _0xa82047=users['French'];else{if(_0x18ca8c[0x0][_0xf6f4ae(0xf3)]==_0xf6f4ae(0x10b))var _0xa82047=users[_0xf6f4ae(0xf9)];else{if(_0x18ca8c[0x0]['language']==_0xf6f4ae(0x129))var _0xa82047=users[_0xf6f4ae(0x129)];else{if(_0x18ca8c[0x0][_0xf6f4ae(0xf3)]==_0xf6f4ae(0x11d))var _0xa82047=users[_0xf6f4ae(0x126)];}}}}}}}_0x43ec3a[_0xf6f4ae(0x120)]('warehousemap_incoming',{'success':_0x480a1a[_0xf6f4ae(0x10d)](_0xf6f4ae(0x119)),'errors':_0x480a1a[_0xf6f4ae(0x10d)](_0xf6f4ae(0x12a)),'role':_0x2ebb33,'profile':_0x358c2e,'master_shop':_0x18ca8c,'timezones':timezones,'language':_0xa82047,'warehouse':_0x1f5006});}catch(_0x4e0814){console['log'](_0x4e0814),_0x43ec3a[_0xf6f4ae(0x11f)](0xc8)['json']({'message':_0x4e0814['message']});}}),router[a0_0x46afd2(0x101)](a0_0x46afd2(0x121),async(_0x2bebfd,_0x224d88)=>{const _0x587b16=a0_0x46afd2,{warehouseNew:_0x3d1b66,rooms:_0x3b6cc1,Type:_0x222c00}=_0x2bebfd['body'],_0x1ce11b=await warehouse[_0x587b16(0x118)]([{'$unwind':_0x587b16(0xe5)},{'$match':{'name':_0x3d1b66,'room':_0x3b6cc1,'product_details.type':_0x222c00}},{'$group':{'_id':{'bay':_0x587b16(0xfb),'bin':_0x587b16(0x10c),'type':_0x587b16(0xe2),'floorlevel':_0x587b16(0x108)},'products':{'$push':{'product_name':_0x587b16(0xeb),'product_quantity':_0x587b16(0x12c),'product_code':_0x587b16(0x107)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x587b16(0x12c),0x0]},'then':_0x587b16(0x12c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x587b16(0xe1),'bin':'$_id.bin','type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x587b16(0xf1),'as':_0x587b16(0x114),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x224d88[_0x587b16(0xf8)](_0x1ce11b);}),router[a0_0x46afd2(0x101)](a0_0x46afd2(0x132),async(_0x1b71b3,_0x23e125)=>{const _0x55c607=a0_0x46afd2,{warehouseNew:_0x5d5b4d,rooms:_0x13e6d9,room_cat:_0x4d7110}=_0x1b71b3['body'];let _0x15f206;if(_0x4d7110=='All')_0x15f206=await warehouse[_0x55c607(0x118)]([{'$unwind':_0x55c607(0xe5)},{'$match':{'name':_0x5d5b4d}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x55c607(0xeb),'expiry':_0x55c607(0x124)},'count':{'$sum':_0x55c607(0x12c)},'production_date':{'$first':_0x55c607(0x10a)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x55c607(0x123)},'product_code':{'$first':_0x55c607(0x107)}}},{'$group':{'_id':_0x55c607(0xe1),'products':{'$push':{'product':_0x55c607(0xfa),'quantity':_0x55c607(0xe0),'production_date':_0x55c607(0xf6),'expiry_date':_0x55c607(0x131),'batch_code':_0x55c607(0x105),'product_code':_0x55c607(0x11b)}},'totalQuantity':{'$sum':_0x55c607(0xe0)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x55c607(0x125),'products':0x1,'totalQuantity':0x1}}]),console[_0x55c607(0x11c)](_0x4d7110);else{}_0x23e125['json'](_0x15f206);}),router[a0_0x46afd2(0x101)]('/Rooms_data',async(_0x2001f7,_0x207dac)=>{const _0x12efa5=a0_0x46afd2;try{const {warehouse_name:_0x4bad3c,A:_0xa158b,B:_0x501b65}=_0x2001f7[_0x12efa5(0xec)];var _0x4a2f10='';_0xa158b=='raw'?_0x501b65==_0x12efa5(0x106)?_0x4a2f10=[{'$match':{'name':_0x4bad3c,'status':_0x12efa5(0xf7),'room':'Rack\x20A'}},{'$group':{'_id':_0x12efa5(0x125),'room_name':{'$first':_0x12efa5(0x11a)}}},{'$sort':{'room_name':0x1}}]:_0x4a2f10=[{'$match':{'name':_0x4bad3c,'status':_0x12efa5(0xf7)}},{'$group':{'_id':_0x12efa5(0x125),'room_name':{'$first':_0x12efa5(0x11a)}}},{'$sort':{'room_name':0x1}}]:_0x4a2f10=[{'$match':{'name':_0x4bad3c,'status':_0x12efa5(0xf7)}},{'$group':{'_id':_0x12efa5(0x125),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x3bbf81=await warehouse[_0x12efa5(0x118)](_0x4a2f10);_0x207dac[_0x12efa5(0x11f)](0xc8)[_0x12efa5(0xf8)](_0x3bbf81);}catch(_0x50a785){_0x207dac['status'](0x190)['json']({'errorMessage':_0x50a785[_0x12efa5(0x128)]});}}),router[a0_0x46afd2(0x101)](a0_0x46afd2(0x104),async(_0x5e2bdf,_0x57520c)=>{const _0x633375=a0_0x46afd2;try{const {warehouse_name:_0x1397fb,cat:_0x49764e,valNew:_0x2e10b8}=_0x5e2bdf[_0x633375(0xec)];var _0x560a4f='',_0xad34cc='';if(_0x49764e=='Raw\x20Materials')_0x560a4f=_0x633375(0x103),_0x2e10b8==_0x633375(0x106)?_0xad34cc=[{'$match':{'status':_0x633375(0xf7),'warehouse_category':_0x49764e,'name':{'$ne':_0x560a4f},'name':_0x633375(0xef)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0xad34cc=[{'$match':{'status':_0x633375(0xf7),'warehouse_category':_0x49764e,'name':{'$ne':_0x560a4f}}},{'$group':{'_id':_0x633375(0xff),'room_name':{'$first':_0x633375(0xff)}}},{'$sort':{'room_name':0x1}}];else _0x49764e==_0x633375(0x130)?(_0x560a4f=_0x633375(0xe7),_0xad34cc=[{'$match':{'status':_0x633375(0xf7),'warehouse_category':_0x49764e,'name':{'$ne':_0x560a4f}}},{'$group':{'_id':_0x633375(0xff),'room_name':{'$first':_0x633375(0xff)}}},{'$sort':{'room_name':0x1}}]):_0xad34cc=[{'$match':{'status':_0x633375(0xf7)}},{'$group':{'_id':_0x633375(0xff),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x50920a=await warehouse['aggregate'](_0xad34cc);_0x57520c[_0x633375(0x11f)](0xc8)[_0x633375(0xf8)](_0x50920a);}catch(_0x34c926){_0x57520c[_0x633375(0x11f)](0x190)[_0x633375(0xf8)]({'errorMessage':_0x34c926['message']}),console[_0x633375(0x11c)](_0x34c926);}}),router[a0_0x46afd2(0x101)](a0_0x46afd2(0x11e),async(_0x3a90c4,_0x5d06a1)=>{const _0x250d94=a0_0x46afd2;try{const {warehouse_name:_0xe7cf3b,cat:_0x1b9058}=_0x3a90c4[_0x250d94(0xec)],_0x57dce7=await warehouse[_0x250d94(0x118)]([{'$match':{'status':_0x250d94(0xf7),'warehouse_category':_0x1b9058,'name':_0xe7cf3b}},{'$group':{'_id':_0x250d94(0x11a),'room_name':{'$first':_0x250d94(0x11a)}}},{'$sort':{'room_name':0x1}}]);_0x5d06a1[_0x250d94(0x11f)](0xc8)['json'](_0x57dce7);}catch(_0x3a0813){_0x5d06a1['status'](0x190)[_0x250d94(0xf8)]({'errorMessage':_0x3a0813['message']});}}),module['exports']=router;