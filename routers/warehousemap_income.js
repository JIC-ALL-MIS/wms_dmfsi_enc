function a0_0x5696(_0x515c36,_0x1e9add){const _0x3ab6e7=a0_0x3ab6();return a0_0x5696=function(_0x56965b,_0x171fde){_0x56965b=_0x56965b-0xf0;let _0x170610=_0x3ab6e7[_0x56965b];return _0x170610;},a0_0x5696(_0x515c36,_0x1e9add);}const a0_0x403699=a0_0x5696;function a0_0x3ab6(){const _0x2d506f=['$production_date','/Rooms_data3','$product_details.production_date','multer','6265900pZqxMf','warehousemap_incoming','Rack\x20A','$product_details','$count','$batch_code','warehouse','57560uEjOsl','$name','../middleware/auth','staff','errors','email','DRY\x20STORAGE','success','$_id','260TwuMYa','$product_details.product_code','3627520CvBUNV','Portuguese','json','/MapData2','4504175WcBiMt','find','Enabled','post','Arabic','Hindi','flash','All','$product_details.batch_code','Portuguese\x20(BR)','$product_details.bay','$products','$product_details.type','status','$product_details.floorlevel','$product_details.bin','$_id.bay','$_id.floorlevel','/Rooms_data2','$product_details.expiry_date','$product_details.product_name','Chinese','product','QA\x20Warehouse','2647uzrvor','timezone','$_id.type','1952853JJJTzU','German','/view','Raw\x20Materials','raw','$_id.bin','body','timezones-list','aggregate','Finished\x20Goods','Return\x20Goods','$room','2681sOCJeC','$product_code','693UvjWvv','en-US','user','message','$expiry_date','$_id.product','$product_details.product_stock','English','toLocaleString','log','French','55GfiFOq','Spanish','get','6042eUtzmQ','findOne','exports','English\x20(US)','language','/Rooms_data'];a0_0x3ab6=function(){return _0x2d506f;};return a0_0x3ab6();}(function(_0x27139f,_0xa66275){const _0xbf660a=a0_0x5696,_0x4e2f1c=_0x27139f();while(!![]){try{const _0x900504=parseInt(_0xbf660a(0x133))/0x1*(-parseInt(_0xbf660a(0x115))/0x2)+-parseInt(_0xbf660a(0x136))/0x3+-parseInt(_0xbf660a(0x117))/0x4+-parseInt(_0xbf660a(0x11b))/0x5+parseInt(_0xbf660a(0xfb))/0x6*(-parseInt(_0xbf660a(0x142))/0x7)+parseInt(_0xbf660a(0x10c))/0x8*(parseInt(_0xbf660a(0x144))/0x9)+parseInt(_0xbf660a(0x105))/0xa*(parseInt(_0xbf660a(0xf8))/0xb);if(_0x900504===_0xa66275)break;else _0x4e2f1c['push'](_0x4e2f1c['shift']());}catch(_0x1200e6){_0x4e2f1c['push'](_0x4e2f1c['shift']());}}}(a0_0x3ab6,0x79b4c));const express=require('express'),app=express(),router=express['Router'](),multer=require(a0_0x403699(0x104)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require(a0_0x403699(0x10e));var timezones=require(a0_0x403699(0x13d));const users=require('../public/language/languages.json');router[a0_0x403699(0xfa)](a0_0x403699(0x138),auth,async(_0x562630,_0x1729dc)=>{const _0x1304fc=a0_0x403699;try{const {username:_0x2fe2df,email:_0x2bb309,role:_0x4c10e4}=_0x562630[_0x1304fc(0x146)],_0x2047be=_0x562630[_0x1304fc(0x146)],_0x2c6e9f=await profile[_0x1304fc(0xfc)]({'email':_0x2047be['email']}),_0x3b78a6=await master_shop[_0x1304fc(0x11c)]();console[_0x1304fc(0xf6)]('master',_0x3b78a6);let _0xeb1370;if(_0x2047be['role']==_0x1304fc(0x10f)){const _0x4b7ce7=await staff[_0x1304fc(0xfc)]({'email':_0x2047be[_0x1304fc(0x111)]});_0xeb1370=await warehouse[_0x1304fc(0x13e)]([{'$match':{'status':'Enabled','name':_0x4b7ce7[_0x1304fc(0x10b)]}},{'$group':{'_id':'$name','name':{'$first':_0x1304fc(0x10d)}}}]);}else _0xeb1370=await warehouse[_0x1304fc(0x13e)]([{'$match':{'status':_0x1304fc(0x11d)}},{'$group':{'_id':_0x1304fc(0x10d),'name':{'$first':_0x1304fc(0x10d)}}}]);const _0x1dcafc=new Date()[_0x1304fc(0xf5)](_0x1304fc(0x145),{'timeZone':_0x3b78a6[0x0]['timezone']});console['log'](_0x1304fc(0x134),_0x1dcafc);if(_0x3b78a6[0x0][_0x1304fc(0xff)]==_0x1304fc(0xfe)){var _0x5839a7=users[_0x1304fc(0xf4)];console[_0x1304fc(0xf6)](_0x5839a7);}else{if(_0x3b78a6[0x0]['language']=='Hindi')var _0x5839a7=users[_0x1304fc(0x120)];else{if(_0x3b78a6[0x0][_0x1304fc(0xff)]==_0x1304fc(0x137))var _0x5839a7=users[_0x1304fc(0x137)];else{if(_0x3b78a6[0x0][_0x1304fc(0xff)]==_0x1304fc(0xf9))var _0x5839a7=users[_0x1304fc(0xf9)];else{if(_0x3b78a6[0x0][_0x1304fc(0xff)]==_0x1304fc(0xf7))var _0x5839a7=users[_0x1304fc(0xf7)];else{if(_0x3b78a6[0x0][_0x1304fc(0xff)]==_0x1304fc(0x124))var _0x5839a7=users[_0x1304fc(0x118)];else{if(_0x3b78a6[0x0]['language']==_0x1304fc(0x130))var _0x5839a7=users[_0x1304fc(0x130)];else{if(_0x3b78a6[0x0][_0x1304fc(0xff)]=='Arabic\x20(ae)')var _0x5839a7=users[_0x1304fc(0x11f)];}}}}}}}_0x1729dc['render'](_0x1304fc(0x106),{'success':_0x562630[_0x1304fc(0x121)](_0x1304fc(0x113)),'errors':_0x562630['flash'](_0x1304fc(0x110)),'role':_0x2047be,'profile':_0x2c6e9f,'master_shop':_0x3b78a6,'timezones':timezones,'language':_0x5839a7,'warehouse':_0xeb1370});}catch(_0x50b972){console[_0x1304fc(0xf6)](_0x50b972),_0x1729dc[_0x1304fc(0x128)](0xc8)[_0x1304fc(0x119)]({'message':_0x50b972[_0x1304fc(0xf0)]});}}),router[a0_0x403699(0x11e)]('/MapData',async(_0x40a91f,_0x5e01f6)=>{const _0x55417a=a0_0x403699,{warehouseNew:_0x223c7f,rooms:_0xdc97d9,Type:_0x3c94bb}=_0x40a91f[_0x55417a(0x13c)],_0x3c703e=await warehouse[_0x55417a(0x13e)]([{'$unwind':_0x55417a(0x108)},{'$match':{'name':_0x223c7f,'room':_0xdc97d9,'product_details.type':_0x3c94bb}},{'$group':{'_id':{'bay':_0x55417a(0x125),'bin':_0x55417a(0x12a),'type':_0x55417a(0x127),'floorlevel':_0x55417a(0x129)},'products':{'$push':{'product_name':_0x55417a(0x12f),'product_quantity':_0x55417a(0xf3),'product_code':_0x55417a(0x116)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x55417a(0xf3),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x55417a(0x12b),'bin':_0x55417a(0x13b),'type':_0x55417a(0x135),'floorlevel':_0x55417a(0x12c),'products':{'$filter':{'input':_0x55417a(0x126),'as':_0x55417a(0x131),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x5e01f6[_0x55417a(0x119)](_0x3c703e);}),router[a0_0x403699(0x11e)](a0_0x403699(0x11a),async(_0x1293a7,_0x3025b8)=>{const _0x5d0dda=a0_0x403699,{warehouseNew:_0x3c161d,rooms:_0x6e0a19,room_cat:_0x52b890}=_0x1293a7[_0x5d0dda(0x13c)];let _0x317716;if(_0x52b890==_0x5d0dda(0x122))_0x317716=await warehouse[_0x5d0dda(0x13e)]([{'$unwind':'$product_details'},{'$match':{'name':_0x3c161d}},{'$group':{'_id':{'bay':_0x5d0dda(0x125),'product':_0x5d0dda(0x12f),'expiry':_0x5d0dda(0x12e)},'count':{'$sum':_0x5d0dda(0xf3)},'production_date':{'$first':_0x5d0dda(0x103)},'expiry_date':{'$first':_0x5d0dda(0x12e)},'batch_code':{'$first':_0x5d0dda(0x123)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x5d0dda(0x12b),'products':{'$push':{'product':_0x5d0dda(0xf2),'quantity':_0x5d0dda(0x109),'production_date':_0x5d0dda(0x101),'expiry_date':_0x5d0dda(0xf1),'batch_code':_0x5d0dda(0x10a),'product_code':_0x5d0dda(0x143)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x5d0dda(0x114),'products':0x1,'totalQuantity':0x1}}]),console[_0x5d0dda(0xf6)](_0x52b890);else{}_0x3025b8['json'](_0x317716);}),router['post'](a0_0x403699(0x100),async(_0x4e6af3,_0x1d7749)=>{const _0x54f61f=a0_0x403699;try{const {warehouse_name:_0x4502e4,A:_0x5407ce,B:_0x326712}=_0x4e6af3[_0x54f61f(0x13c)];var _0xc1a9cb='';_0x5407ce==_0x54f61f(0x13a)?_0x326712=='pack'?_0xc1a9cb=[{'$match':{'name':_0x4502e4,'status':_0x54f61f(0x11d),'room':_0x54f61f(0x107)}},{'$group':{'_id':_0x54f61f(0x114),'room_name':{'$first':_0x54f61f(0x141)}}},{'$sort':{'room_name':0x1}}]:_0xc1a9cb=[{'$match':{'name':_0x4502e4,'status':'Enabled'}},{'$group':{'_id':_0x54f61f(0x114),'room_name':{'$first':_0x54f61f(0x141)}}},{'$sort':{'room_name':0x1}}]:_0xc1a9cb=[{'$match':{'name':_0x4502e4,'status':_0x54f61f(0x11d)}},{'$group':{'_id':_0x54f61f(0x114),'room_name':{'$first':_0x54f61f(0x141)}}},{'$sort':{'room_name':0x1}}];const _0x1339bf=await warehouse['aggregate'](_0xc1a9cb);_0x1d7749[_0x54f61f(0x128)](0xc8)[_0x54f61f(0x119)](_0x1339bf);}catch(_0x2d8005){_0x1d7749[_0x54f61f(0x128)](0x190)[_0x54f61f(0x119)]({'errorMessage':_0x2d8005[_0x54f61f(0xf0)]});}}),router['post'](a0_0x403699(0x12d),async(_0x4f189b,_0x41d59e)=>{const _0x4a3ebd=a0_0x403699;try{const {warehouse_name:_0x189c9c,cat:_0x34fa09,valNew:_0x55ef82}=_0x4f189b[_0x4a3ebd(0x13c)];var _0x434a17='',_0x373647='';if(_0x34fa09==_0x4a3ebd(0x139))_0x434a17=_0x4a3ebd(0x140),_0x55ef82=='pack'?_0x373647=[{'$match':{'status':_0x4a3ebd(0x11d),'warehouse_category':_0x34fa09,'name':{'$ne':_0x434a17},'name':_0x4a3ebd(0x112)}},{'$group':{'_id':_0x4a3ebd(0x10d),'room_name':{'$first':_0x4a3ebd(0x10d)}}},{'$sort':{'room_name':0x1}}]:_0x373647=[{'$match':{'status':_0x4a3ebd(0x11d),'warehouse_category':_0x34fa09,'name':{'$ne':_0x434a17}}},{'$group':{'_id':_0x4a3ebd(0x10d),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x34fa09==_0x4a3ebd(0x13f)?(_0x434a17=_0x4a3ebd(0x132),_0x373647=[{'$match':{'status':_0x4a3ebd(0x11d),'warehouse_category':_0x34fa09,'name':{'$ne':_0x434a17}}},{'$group':{'_id':_0x4a3ebd(0x10d),'room_name':{'$first':_0x4a3ebd(0x10d)}}},{'$sort':{'room_name':0x1}}]):_0x373647=[{'$match':{'status':_0x4a3ebd(0x11d)}},{'$group':{'_id':_0x4a3ebd(0x10d),'room_name':{'$first':_0x4a3ebd(0x10d)}}},{'$sort':{'room_name':0x1}}];const _0x1300ee=await warehouse[_0x4a3ebd(0x13e)](_0x373647);_0x41d59e[_0x4a3ebd(0x128)](0xc8)[_0x4a3ebd(0x119)](_0x1300ee);}catch(_0x1b2b4c){_0x41d59e['status'](0x190)[_0x4a3ebd(0x119)]({'errorMessage':_0x1b2b4c[_0x4a3ebd(0xf0)]}),console[_0x4a3ebd(0xf6)](_0x1b2b4c);}}),router[a0_0x403699(0x11e)](a0_0x403699(0x102),async(_0x2d1fc5,_0x44ccf1)=>{const _0x269daf=a0_0x403699;try{const {warehouse_name:_0x180951,cat:_0x2b00c2}=_0x2d1fc5[_0x269daf(0x13c)],_0x5ed3d7=await warehouse[_0x269daf(0x13e)]([{'$match':{'status':_0x269daf(0x11d),'warehouse_category':_0x2b00c2,'name':_0x180951}},{'$group':{'_id':_0x269daf(0x141),'room_name':{'$first':_0x269daf(0x141)}}},{'$sort':{'room_name':0x1}}]);_0x44ccf1[_0x269daf(0x128)](0xc8)[_0x269daf(0x119)](_0x5ed3d7);}catch(_0x173e67){_0x44ccf1[_0x269daf(0x128)](0x190)[_0x269daf(0x119)]({'errorMessage':_0x173e67[_0x269daf(0xf0)]});}}),module[a0_0x403699(0xfd)]=router;