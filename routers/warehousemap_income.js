const a0_0x11a546=a0_0x5b80;(function(_0x2040a3,_0x3aa4d5){const _0x426770=a0_0x5b80,_0x1f16e4=_0x2040a3();while(!![]){try{const _0x1c09ce=-parseInt(_0x426770(0x1f2))/0x1*(-parseInt(_0x426770(0x1de))/0x2)+-parseInt(_0x426770(0x1f8))/0x3+parseInt(_0x426770(0x212))/0x4*(-parseInt(_0x426770(0x1e4))/0x5)+-parseInt(_0x426770(0x21b))/0x6+parseInt(_0x426770(0x1fe))/0x7+-parseInt(_0x426770(0x20d))/0x8+-parseInt(_0x426770(0x215))/0x9*(-parseInt(_0x426770(0x214))/0xa);if(_0x1c09ce===_0x3aa4d5)break;else _0x1f16e4['push'](_0x1f16e4['shift']());}catch(_0x5cd7a6){_0x1f16e4['push'](_0x1f16e4['shift']());}}}(a0_0x5a9b,0xe29b1));const express=require(a0_0x11a546(0x20b)),app=express(),router=express['Router'](),multer=require(a0_0x11a546(0x1f4)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x11a546(0x211)),auth=require(a0_0x11a546(0x1ee));function a0_0x5b80(_0x6c079a,_0x31d6e8){const _0x5a9b75=a0_0x5a9b();return a0_0x5b80=function(_0x5b80f5,_0x49b781){_0x5b80f5=_0x5b80f5-0x1d7;let _0x2af4cd=_0x5a9b75[_0x5b80f5];return _0x2af4cd;},a0_0x5b80(_0x6c079a,_0x31d6e8);}function a0_0x5a9b(){const _0x31d7fb=['Rack\x20A','$product_details.product_name','$_id','body','Spanish','$product_details','master','../middleware/auth','language','$product_details.bin','$room','5IjHPRT','post','multer','success','email','exports','4419654PFFaVH','warehousemap_incoming','/MapData2','$product_details.type','Raw\x20Materials','../public/language/languages.json','4573569dnPYbJ','warehouse','/Rooms_data','/view','$_id.type','All','role','$product_details.expiry_date','product','Arabic','French','Portuguese\x20(BR)','Enabled','express','message','9810640PkbzRn','$expiry_date','raw','$_id.product','../models/all_models','4cjWucj','aggregate','138070isYiFJ','3006VRXKZU','/Rooms_data2','staff','Arabic\x20(ae)','pack','findOne','4741734heqpIW','$product_details.floorlevel','user','toLocaleString','$product_details.bay','$product_details.product_stock','en-US','Portuguese','timezone','Chinese','DRY\x20STORAGE','get','Return\x20Goods','/MapData','$production_date','$name','$count','$product_details.product_code','$_id.bay','$_id.bin','find','status','German','89312UBtElP','timezones-list','json','flash','$_id.floorlevel','render','5350855BOhPbv','log','English'];a0_0x5a9b=function(){return _0x31d7fb;};return a0_0x5a9b();}var timezones=require(a0_0x11a546(0x1df));const users=require(a0_0x11a546(0x1fd));router[a0_0x11a546(0x226)](a0_0x11a546(0x201),auth,async(_0x2f0efe,_0xf3c3da)=>{const _0xf11d5d=a0_0x11a546;try{const {username:_0x3c18f7,email:_0x1dcb54,role:_0x588b6b}=_0x2f0efe['user'],_0xc66464=_0x2f0efe[_0xf11d5d(0x21d)],_0x4c4273=await profile['findOne']({'email':_0xc66464[_0xf11d5d(0x1f6)]}),_0x1c62c1=await master_shop[_0xf11d5d(0x1db)]();console[_0xf11d5d(0x1e5)](_0xf11d5d(0x1ed),_0x1c62c1);let _0x568fd5;if(_0xc66464[_0xf11d5d(0x204)]==_0xf11d5d(0x217)){const _0x1245b9=await staff[_0xf11d5d(0x21a)]({'email':_0xc66464[_0xf11d5d(0x1f6)]});_0x568fd5=await warehouse[_0xf11d5d(0x213)]([{'$match':{'status':_0xf11d5d(0x20a),'name':_0x1245b9[_0xf11d5d(0x1ff)]}},{'$group':{'_id':_0xf11d5d(0x22a),'name':{'$first':_0xf11d5d(0x22a)}}}]);}else _0x568fd5=await warehouse['aggregate']([{'$match':{'status':_0xf11d5d(0x20a)}},{'$group':{'_id':'$name','name':{'$first':_0xf11d5d(0x22a)}}}]);const _0x541eab=new Date()[_0xf11d5d(0x21e)](_0xf11d5d(0x221),{'timeZone':_0x1c62c1[0x0][_0xf11d5d(0x223)]});console['log'](_0xf11d5d(0x223),_0x541eab);if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]=='English\x20(US)'){var _0x1c214d=users[_0xf11d5d(0x1e6)];console[_0xf11d5d(0x1e5)](_0x1c214d);}else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]=='Hindi')var _0x1c214d=users['Hindi'];else{if(_0x1c62c1[0x0]['language']==_0xf11d5d(0x1dd))var _0x1c214d=users['German'];else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]==_0xf11d5d(0x1eb))var _0x1c214d=users['Spanish'];else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]==_0xf11d5d(0x208))var _0x1c214d=users['French'];else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]==_0xf11d5d(0x209))var _0x1c214d=users[_0xf11d5d(0x222)];else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]=='Chinese')var _0x1c214d=users[_0xf11d5d(0x224)];else{if(_0x1c62c1[0x0][_0xf11d5d(0x1ef)]==_0xf11d5d(0x218))var _0x1c214d=users[_0xf11d5d(0x207)];}}}}}}}_0xf3c3da[_0xf11d5d(0x1e3)](_0xf11d5d(0x1f9),{'success':_0x2f0efe['flash'](_0xf11d5d(0x1f5)),'errors':_0x2f0efe[_0xf11d5d(0x1e1)]('errors'),'role':_0xc66464,'profile':_0x4c4273,'master_shop':_0x1c62c1,'timezones':timezones,'language':_0x1c214d,'warehouse':_0x568fd5});}catch(_0x305f29){console['log'](_0x305f29),_0xf3c3da[_0xf11d5d(0x1dc)](0xc8)[_0xf11d5d(0x1e0)]({'message':_0x305f29[_0xf11d5d(0x20c)]});}}),router[a0_0x11a546(0x1f3)](a0_0x11a546(0x228),async(_0x393a9b,_0x30b361)=>{const _0x2e5943=a0_0x11a546,{warehouseNew:_0x5cc7fc,rooms:_0x4cfbbc,Type:_0x16d8d6}=_0x393a9b['body'],_0x85aa06=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x5cc7fc,'room':_0x4cfbbc,'product_details.type':_0x16d8d6}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x2e5943(0x1f0),'type':_0x2e5943(0x1fb),'floorlevel':_0x2e5943(0x21c)},'products':{'$push':{'product_name':_0x2e5943(0x1e8),'product_quantity':_0x2e5943(0x220),'product_code':_0x2e5943(0x1d8)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2e5943(0x220),0x0]},'then':_0x2e5943(0x220),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x2e5943(0x1d9),'bin':_0x2e5943(0x1da),'type':_0x2e5943(0x202),'floorlevel':_0x2e5943(0x1e2),'products':{'$filter':{'input':'$products','as':_0x2e5943(0x206),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x30b361[_0x2e5943(0x1e0)](_0x85aa06);}),router[a0_0x11a546(0x1f3)](a0_0x11a546(0x1fa),async(_0x19bfa4,_0x248c22)=>{const _0x2e3fc3=a0_0x11a546,{warehouseNew:_0x484653,rooms:_0x2b570d,room_cat:_0x251f9f}=_0x19bfa4[_0x2e3fc3(0x1ea)];let _0x24a75f;if(_0x251f9f==_0x2e3fc3(0x203))_0x24a75f=await warehouse[_0x2e3fc3(0x213)]([{'$unwind':_0x2e3fc3(0x1ec)},{'$match':{'name':_0x484653}},{'$group':{'_id':{'bay':_0x2e3fc3(0x21f),'product':_0x2e3fc3(0x1e8),'expiry':_0x2e3fc3(0x205)},'count':{'$sum':_0x2e3fc3(0x220)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x2e3fc3(0x205)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x2e3fc3(0x1d8)}}},{'$group':{'_id':_0x2e3fc3(0x1d9),'products':{'$push':{'product':_0x2e3fc3(0x210),'quantity':'$count','production_date':_0x2e3fc3(0x229),'expiry_date':_0x2e3fc3(0x20e),'batch_code':'$batch_code','product_code':'$product_code'}},'totalQuantity':{'$sum':_0x2e3fc3(0x1d7)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x2e3fc3(0x1e9),'products':0x1,'totalQuantity':0x1}}]),console[_0x2e3fc3(0x1e5)](_0x251f9f);else{}_0x248c22[_0x2e3fc3(0x1e0)](_0x24a75f);}),router['post'](a0_0x11a546(0x200),async(_0x3aaa66,_0x68d1c4)=>{const _0x4660a1=a0_0x11a546;try{const {warehouse_name:_0xe8d25e,A:_0x2094ec,B:_0x25a52d}=_0x3aaa66[_0x4660a1(0x1ea)];var _0x33b17f='';_0x2094ec==_0x4660a1(0x20f)?_0x25a52d==_0x4660a1(0x219)?_0x33b17f=[{'$match':{'name':_0xe8d25e,'status':_0x4660a1(0x20a),'room':_0x4660a1(0x1e7)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4660a1(0x1f1)}}},{'$sort':{'room_name':0x1}}]:_0x33b17f=[{'$match':{'name':_0xe8d25e,'status':_0x4660a1(0x20a)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4660a1(0x1f1)}}},{'$sort':{'room_name':0x1}}]:_0x33b17f=[{'$match':{'name':_0xe8d25e,'status':_0x4660a1(0x20a)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4660a1(0x1f1)}}},{'$sort':{'room_name':0x1}}];const _0x47b0ca=await warehouse[_0x4660a1(0x213)](_0x33b17f);_0x68d1c4['status'](0xc8)[_0x4660a1(0x1e0)](_0x47b0ca);}catch(_0x24edd0){_0x68d1c4[_0x4660a1(0x1dc)](0x190)['json']({'errorMessage':_0x24edd0[_0x4660a1(0x20c)]});}}),router['post'](a0_0x11a546(0x216),async(_0x496f9a,_0x919f97)=>{const _0x8878cb=a0_0x11a546;try{const {warehouse_name:_0x81730a,cat:_0x8e2e87,valNew:_0x1cda54}=_0x496f9a[_0x8878cb(0x1ea)];var _0x2b671d='',_0x392bd3='';if(_0x8e2e87==_0x8878cb(0x1fc))_0x2b671d=_0x8878cb(0x227),_0x1cda54=='pack'?_0x392bd3=[{'$match':{'status':'Enabled','warehouse_category':_0x8e2e87,'name':{'$ne':_0x2b671d},'name':_0x8878cb(0x225)}},{'$group':{'_id':_0x8878cb(0x22a),'room_name':{'$first':_0x8878cb(0x22a)}}},{'$sort':{'room_name':0x1}}]:_0x392bd3=[{'$match':{'status':'Enabled','warehouse_category':_0x8e2e87,'name':{'$ne':_0x2b671d}}},{'$group':{'_id':_0x8878cb(0x22a),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x8e2e87=='Finished\x20Goods'?(_0x2b671d='QA\x20Warehouse',_0x392bd3=[{'$match':{'status':_0x8878cb(0x20a),'warehouse_category':_0x8e2e87,'name':{'$ne':_0x2b671d}}},{'$group':{'_id':_0x8878cb(0x22a),'room_name':{'$first':_0x8878cb(0x22a)}}},{'$sort':{'room_name':0x1}}]):_0x392bd3=[{'$match':{'status':_0x8878cb(0x20a)}},{'$group':{'_id':_0x8878cb(0x22a),'room_name':{'$first':_0x8878cb(0x22a)}}},{'$sort':{'room_name':0x1}}];const _0x4e18b1=await warehouse['aggregate'](_0x392bd3);_0x919f97[_0x8878cb(0x1dc)](0xc8)[_0x8878cb(0x1e0)](_0x4e18b1);}catch(_0x4d0506){_0x919f97[_0x8878cb(0x1dc)](0x190)[_0x8878cb(0x1e0)]({'errorMessage':_0x4d0506[_0x8878cb(0x20c)]}),console[_0x8878cb(0x1e5)](_0x4d0506);}}),router[a0_0x11a546(0x1f3)]('/Rooms_data3',async(_0x4ec8f0,_0x49e2a7)=>{const _0x56bed6=a0_0x11a546;try{const {warehouse_name:_0x167bfe,cat:_0x474e33}=_0x4ec8f0[_0x56bed6(0x1ea)],_0x414078=await warehouse[_0x56bed6(0x213)]([{'$match':{'status':_0x56bed6(0x20a),'warehouse_category':_0x474e33,'name':_0x167bfe}},{'$group':{'_id':_0x56bed6(0x1f1),'room_name':{'$first':_0x56bed6(0x1f1)}}},{'$sort':{'room_name':0x1}}]);_0x49e2a7[_0x56bed6(0x1dc)](0xc8)[_0x56bed6(0x1e0)](_0x414078);}catch(_0x5635db){_0x49e2a7['status'](0x190)[_0x56bed6(0x1e0)]({'errorMessage':_0x5635db[_0x56bed6(0x20c)]});}}),module[a0_0x11a546(0x1f7)]=router;