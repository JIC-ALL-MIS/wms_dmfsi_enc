const a0_0x42cc19=a0_0x3ac8;(function(_0x54b8d1,_0x3965f6){const _0x39c22e=a0_0x3ac8,_0x1cecb2=_0x54b8d1();while(!![]){try{const _0x513e6d=-parseInt(_0x39c22e(0x11b))/0x1+parseInt(_0x39c22e(0x105))/0x2+parseInt(_0x39c22e(0x109))/0x3*(parseInt(_0x39c22e(0x10b))/0x4)+-parseInt(_0x39c22e(0xe0))/0x5*(-parseInt(_0x39c22e(0x126))/0x6)+-parseInt(_0x39c22e(0x10d))/0x7*(-parseInt(_0x39c22e(0x11f))/0x8)+-parseInt(_0x39c22e(0x11c))/0x9*(-parseInt(_0x39c22e(0x104))/0xa)+-parseInt(_0x39c22e(0xfb))/0xb*(parseInt(_0x39c22e(0x10a))/0xc);if(_0x513e6d===_0x3965f6)break;else _0x1cecb2['push'](_0x1cecb2['shift']());}catch(_0x340def){_0x1cecb2['push'](_0x1cecb2['shift']());}}}(a0_0x5f2f,0xe22a8));const express=require(a0_0x42cc19(0x117)),app=express(),router=express[a0_0x42cc19(0xe3)](),multer=require(a0_0x42cc19(0xfa)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x42cc19(0xdc)),auth=require('../middleware/auth');var timezones=require(a0_0x42cc19(0xfd));const users=require(a0_0x42cc19(0xec));function a0_0x3ac8(_0x48b394,_0x2f6e7e){const _0x5f2f82=a0_0x5f2f();return a0_0x3ac8=function(_0x3ac864,_0x1efbf6){_0x3ac864=_0x3ac864-0xd5;let _0x48cf40=_0x5f2f82[_0x3ac864];return _0x48cf40;},a0_0x3ac8(_0x48b394,_0x2f6e7e);}function a0_0x5f2f(){const _0x3692bb=['body','Arabic','Return\x20Goods','../models/all_models','language','pack','Enabled','42220QSGEzz','json','English','Router','German','email','$_id','message','exports','warehousemap_incoming','$product_details.product_name','$_id.product','../public/language/languages.json','status','Arabic\x20(ae)','$product_details.expiry_date','get','$count','toLocaleString','$_id.bin','flash','staff','$product_details.product_code','raw','QA\x20Warehouse','timezone','multer','66LXmMtS','$expiry_date','timezones-list','Rack\x20A','$product_details.product_stock','Spanish','$room','errors','$batch_code','10xBiuYr','2884072psmJWp','$product_details.bay','$product_details.floorlevel','Finished\x20Goods','412170GmEcnI','12720876deRYtx','44yrOPTZ','find','623kSlkDK','product','Portuguese','$_id.floorlevel','$$product.product_quantity','findOne','aggregate','Raw\x20Materials','/Rooms_data2','warehouse','express','log','user','$_id.bay','54265MDenkf','10914012QlwbAW','$name','Chinese','157128JSlSyR','Portuguese\x20(BR)','$product_details','post','render','success','$product_details.type','1014ojygpg','French','en-US','$products','$production_date'];a0_0x5f2f=function(){return _0x3692bb;};return a0_0x5f2f();}router[a0_0x42cc19(0xf0)]('/view',auth,async(_0x1584e4,_0x5304b7)=>{const _0x14fa56=a0_0x42cc19;try{const {username:_0x254e32,email:_0x493a48,role:_0x1845a6}=_0x1584e4[_0x14fa56(0x119)],_0x3248ce=_0x1584e4['user'],_0x4712ee=await profile['findOne']({'email':_0x3248ce[_0x14fa56(0xe5)]}),_0x49833d=await master_shop[_0x14fa56(0x10c)]();console[_0x14fa56(0x118)]('master',_0x49833d);let _0xc3e623;if(_0x3248ce['role']==_0x14fa56(0xf5)){const _0x224f12=await staff[_0x14fa56(0x112)]({'email':_0x3248ce[_0x14fa56(0xe5)]});_0xc3e623=await warehouse[_0x14fa56(0x113)]([{'$match':{'status':_0x14fa56(0xdf),'name':_0x224f12[_0x14fa56(0x116)]}},{'$group':{'_id':_0x14fa56(0x11d),'name':{'$first':_0x14fa56(0x11d)}}}]);}else _0xc3e623=await warehouse['aggregate']([{'$match':{'status':_0x14fa56(0xdf)}},{'$group':{'_id':_0x14fa56(0x11d),'name':{'$first':'$name'}}}]);const _0x871fa0=new Date()[_0x14fa56(0xf2)](_0x14fa56(0xd6),{'timeZone':_0x49833d[0x0][_0x14fa56(0xf9)]});console[_0x14fa56(0x118)]('timezone',_0x871fa0);if(_0x49833d[0x0][_0x14fa56(0xdd)]=='English\x20(US)'){var _0x50a885=users[_0x14fa56(0xe2)];console['log'](_0x50a885);}else{if(_0x49833d[0x0]['language']=='Hindi')var _0x50a885=users['Hindi'];else{if(_0x49833d[0x0][_0x14fa56(0xdd)]==_0x14fa56(0xe4))var _0x50a885=users[_0x14fa56(0xe4)];else{if(_0x49833d[0x0][_0x14fa56(0xdd)]==_0x14fa56(0x100))var _0x50a885=users[_0x14fa56(0x100)];else{if(_0x49833d[0x0][_0x14fa56(0xdd)]==_0x14fa56(0xd5))var _0x50a885=users[_0x14fa56(0xd5)];else{if(_0x49833d[0x0][_0x14fa56(0xdd)]==_0x14fa56(0x120))var _0x50a885=users[_0x14fa56(0x10f)];else{if(_0x49833d[0x0]['language']=='Chinese')var _0x50a885=users[_0x14fa56(0x11e)];else{if(_0x49833d[0x0][_0x14fa56(0xdd)]==_0x14fa56(0xee))var _0x50a885=users[_0x14fa56(0xda)];}}}}}}}_0x5304b7[_0x14fa56(0x123)](_0x14fa56(0xe9),{'success':_0x1584e4[_0x14fa56(0xf4)](_0x14fa56(0x124)),'errors':_0x1584e4[_0x14fa56(0xf4)](_0x14fa56(0x102)),'role':_0x3248ce,'profile':_0x4712ee,'master_shop':_0x49833d,'timezones':timezones,'language':_0x50a885,'warehouse':_0xc3e623});}catch(_0x33a932){console['log'](_0x33a932),_0x5304b7[_0x14fa56(0xed)](0xc8)[_0x14fa56(0xe1)]({'message':_0x33a932[_0x14fa56(0xe7)]});}}),router[a0_0x42cc19(0x122)]('/MapData',async(_0x1ec0d6,_0x2df95a)=>{const _0x5b8846=a0_0x42cc19,{warehouseNew:_0x21d45e,rooms:_0x1b457b,Type:_0x45e193}=_0x1ec0d6[_0x5b8846(0xd9)],_0x1bc859=await warehouse['aggregate']([{'$unwind':_0x5b8846(0x121)},{'$match':{'name':_0x21d45e,'room':_0x1b457b,'product_details.type':_0x45e193}},{'$group':{'_id':{'bay':_0x5b8846(0x106),'bin':'$product_details.bin','type':_0x5b8846(0x125),'floorlevel':_0x5b8846(0x107)},'products':{'$push':{'product_name':_0x5b8846(0xea),'product_quantity':_0x5b8846(0xff),'product_code':_0x5b8846(0xf6)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5b8846(0xff),0x0]},'then':_0x5b8846(0xff),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5b8846(0x11a),'bin':_0x5b8846(0xf3),'type':'$_id.type','floorlevel':_0x5b8846(0x110),'products':{'$filter':{'input':_0x5b8846(0xd7),'as':_0x5b8846(0x10e),'cond':{'$gt':[_0x5b8846(0x111),0x0]}}},'totalQuantity':0x1}}]);_0x2df95a[_0x5b8846(0xe1)](_0x1bc859);}),router[a0_0x42cc19(0x122)]('/MapData2',async(_0x361c33,_0x1df9da)=>{const _0x36c0de=a0_0x42cc19,{warehouseNew:_0x179212,rooms:_0x51ab06,room_cat:_0x33f0e2}=_0x361c33['body'];let _0x5827a2;if(_0x33f0e2=='All')_0x5827a2=await warehouse[_0x36c0de(0x113)]([{'$unwind':_0x36c0de(0x121)},{'$match':{'name':_0x179212}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x36c0de(0xea),'expiry':_0x36c0de(0xef)},'count':{'$sum':_0x36c0de(0xff)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x36c0de(0xf6)}}},{'$group':{'_id':_0x36c0de(0x11a),'products':{'$push':{'product':_0x36c0de(0xeb),'quantity':_0x36c0de(0xf1),'production_date':_0x36c0de(0xd8),'expiry_date':_0x36c0de(0xfc),'batch_code':_0x36c0de(0x103),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x36c0de(0xf1)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x36c0de(0xe6),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x33f0e2);else{}_0x1df9da[_0x36c0de(0xe1)](_0x5827a2);}),router[a0_0x42cc19(0x122)]('/Rooms_data',async(_0x51ca53,_0x16d8f4)=>{const _0x3c26dc=a0_0x42cc19;try{const {warehouse_name:_0x3dd2ba,A:_0x56f04d,B:_0x53c241}=_0x51ca53[_0x3c26dc(0xd9)];var _0x27640e='';_0x56f04d==_0x3c26dc(0xf7)?_0x53c241==_0x3c26dc(0xde)?_0x27640e=[{'$match':{'name':_0x3dd2ba,'status':'Enabled','room':_0x3c26dc(0xfe)}},{'$group':{'_id':_0x3c26dc(0xe6),'room_name':{'$first':_0x3c26dc(0x101)}}},{'$sort':{'room_name':0x1}}]:_0x27640e=[{'$match':{'name':_0x3dd2ba,'status':_0x3c26dc(0xdf)}},{'$group':{'_id':_0x3c26dc(0xe6),'room_name':{'$first':_0x3c26dc(0x101)}}},{'$sort':{'room_name':0x1}}]:_0x27640e=[{'$match':{'name':_0x3dd2ba,'status':_0x3c26dc(0xdf)}},{'$group':{'_id':_0x3c26dc(0xe6),'room_name':{'$first':_0x3c26dc(0x101)}}},{'$sort':{'room_name':0x1}}];const _0x4c6760=await warehouse[_0x3c26dc(0x113)](_0x27640e);_0x16d8f4[_0x3c26dc(0xed)](0xc8)['json'](_0x4c6760);}catch(_0x4da3f8){_0x16d8f4[_0x3c26dc(0xed)](0x190)[_0x3c26dc(0xe1)]({'errorMessage':_0x4da3f8[_0x3c26dc(0xe7)]});}}),router[a0_0x42cc19(0x122)](a0_0x42cc19(0x115),async(_0x59175a,_0x3c9f05)=>{const _0xe86dce=a0_0x42cc19;try{const {warehouse_name:_0x168d23,cat:_0x2c1888,valNew:_0x4ca979}=_0x59175a[_0xe86dce(0xd9)];var _0x103a25='',_0x4187b9='';if(_0x2c1888==_0xe86dce(0x114))_0x103a25=_0xe86dce(0xdb),_0x4ca979==_0xe86dce(0xde)?_0x4187b9=[{'$match':{'status':_0xe86dce(0xdf),'warehouse_category':_0x2c1888,'name':{'$ne':_0x103a25},'name':'DRY\x20STORAGE'}},{'$group':{'_id':'$name','room_name':{'$first':_0xe86dce(0x11d)}}},{'$sort':{'room_name':0x1}}]:_0x4187b9=[{'$match':{'status':_0xe86dce(0xdf),'warehouse_category':_0x2c1888,'name':{'$ne':_0x103a25}}},{'$group':{'_id':_0xe86dce(0x11d),'room_name':{'$first':_0xe86dce(0x11d)}}},{'$sort':{'room_name':0x1}}];else _0x2c1888==_0xe86dce(0x108)?(_0x103a25=_0xe86dce(0xf8),_0x4187b9=[{'$match':{'status':_0xe86dce(0xdf),'warehouse_category':_0x2c1888,'name':{'$ne':_0x103a25}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x4187b9=[{'$match':{'status':_0xe86dce(0xdf)}},{'$group':{'_id':_0xe86dce(0x11d),'room_name':{'$first':_0xe86dce(0x11d)}}},{'$sort':{'room_name':0x1}}];const _0x259f07=await warehouse[_0xe86dce(0x113)](_0x4187b9);_0x3c9f05[_0xe86dce(0xed)](0xc8)['json'](_0x259f07);}catch(_0x1e96f0){_0x3c9f05[_0xe86dce(0xed)](0x190)['json']({'errorMessage':_0x1e96f0[_0xe86dce(0xe7)]}),console['log'](_0x1e96f0);}}),router[a0_0x42cc19(0x122)]('/Rooms_data3',async(_0x226651,_0x225b51)=>{const _0x53b7b1=a0_0x42cc19;try{const {warehouse_name:_0x4bfe8a,cat:_0xe9983d}=_0x226651['body'],_0x42020c=await warehouse[_0x53b7b1(0x113)]([{'$match':{'status':_0x53b7b1(0xdf),'warehouse_category':_0xe9983d,'name':_0x4bfe8a}},{'$group':{'_id':_0x53b7b1(0x101),'room_name':{'$first':_0x53b7b1(0x101)}}},{'$sort':{'room_name':0x1}}]);_0x225b51[_0x53b7b1(0xed)](0xc8)[_0x53b7b1(0xe1)](_0x42020c);}catch(_0x35f006){_0x225b51[_0x53b7b1(0xed)](0x190)['json']({'errorMessage':_0x35f006[_0x53b7b1(0xe7)]});}}),module[a0_0x42cc19(0xe8)]=router;