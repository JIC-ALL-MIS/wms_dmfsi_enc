const a0_0x5074c6=a0_0x137a;(function(_0x547952,_0x289448){const _0x3fd3ca=a0_0x137a,_0x2a163e=_0x547952();while(!![]){try{const _0xc860b7=-parseInt(_0x3fd3ca(0x87))/0x1*(parseInt(_0x3fd3ca(0xcc))/0x2)+parseInt(_0x3fd3ca(0xc4))/0x3*(-parseInt(_0x3fd3ca(0x9b))/0x4)+-parseInt(_0x3fd3ca(0xb4))/0x5+-parseInt(_0x3fd3ca(0x8d))/0x6*(-parseInt(_0x3fd3ca(0xaf))/0x7)+-parseInt(_0x3fd3ca(0x89))/0x8*(parseInt(_0x3fd3ca(0xaa))/0x9)+parseInt(_0x3fd3ca(0x8b))/0xa+parseInt(_0x3fd3ca(0xa8))/0xb*(parseInt(_0x3fd3ca(0x8a))/0xc);if(_0xc860b7===_0x289448)break;else _0x2a163e['push'](_0x2a163e['shift']());}catch(_0x432a18){_0x2a163e['push'](_0x2a163e['shift']());}}}(a0_0x3f7f,0xe50c5));const express=require(a0_0x5074c6(0x85)),app=express(),router=express['Router'](),multer=require(a0_0x5074c6(0xc5)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x5074c6(0xbb)),auth=require(a0_0x5074c6(0xca));var timezones=require('timezones-list');function a0_0x137a(_0xe65efd,_0x2e31d5){const _0x3f7fdc=a0_0x3f7f();return a0_0x137a=function(_0x137a72,_0x344187){_0x137a72=_0x137a72-0x82;let _0x59894d=_0x3f7fdc[_0x137a72];return _0x59894d;},a0_0x137a(_0xe65efd,_0x2e31d5);}const users=require('../public/language/languages.json');function a0_0x3f7f(){const _0x84de6b=['log','$product_details.product_name','$_id.bin','$name','message','toLocaleString','post','$product_details.product_code','staff','39229553EdhJuP','find','9fIMegd','$product_details.bay','Enabled','master','success','981379SVrkOv','product','$batch_code','Arabic\x20(ae)','raw','2767755nURPwq','$product_details.expiry_date','$products','json','user','aggregate','warehousemap_incoming','../models/all_models','$_id.floorlevel','French','Portuguese','Hindi','All','$count','body','$product_details','3MplpLZ','multer','warehouse','$expiry_date','Chinese','$_id.bay','../middleware/auth','language','16NRNDdt','$_id','Spanish','/MapData','German','errors','Raw\x20Materials','Return\x20Goods','express','QA\x20Warehouse','209122KpQLwe','findOne','6842968gnVpTE','12FaKSeE','17698480tKkdRk','timezone','6ALUvCD','English','English\x20(US)','status','Rack\x20A','$product_details.product_stock','get','pack','$room','flash','Portuguese\x20(BR)','email','$_id.type','/MapData2','5825156JBwOrg','/Rooms_data2','$product_details.batch_code','/Rooms_data3'];a0_0x3f7f=function(){return _0x84de6b;};return a0_0x3f7f();}router[a0_0x5074c6(0x93)]('/view',auth,async(_0x19b53b,_0x31c5f6)=>{const _0x40975f=a0_0x5074c6;try{const {username:_0x2e65f4,email:_0x56bf5d,role:_0x1ec67a}=_0x19b53b[_0x40975f(0xb8)],_0x48d139=_0x19b53b[_0x40975f(0xb8)],_0x3eecf9=await profile[_0x40975f(0x88)]({'email':_0x48d139[_0x40975f(0x98)]}),_0x30a8c6=await master_shop[_0x40975f(0xa9)]();console['log'](_0x40975f(0xad),_0x30a8c6);let _0x552a2b;if(_0x48d139['role']==_0x40975f(0xa7)){const _0xb65c8d=await staff[_0x40975f(0x88)]({'email':_0x48d139[_0x40975f(0x98)]});_0x552a2b=await warehouse[_0x40975f(0xb9)]([{'$match':{'status':_0x40975f(0xac),'name':_0xb65c8d[_0x40975f(0xc6)]}},{'$group':{'_id':_0x40975f(0xa2),'name':{'$first':'$name'}}}]);}else _0x552a2b=await warehouse[_0x40975f(0xb9)]([{'$match':{'status':_0x40975f(0xac)}},{'$group':{'_id':_0x40975f(0xa2),'name':{'$first':_0x40975f(0xa2)}}}]);const _0x4bb5b7=new Date()[_0x40975f(0xa4)]('en-US',{'timeZone':_0x30a8c6[0x0][_0x40975f(0x8c)]});console[_0x40975f(0x9f)](_0x40975f(0x8c),_0x4bb5b7);if(_0x30a8c6[0x0][_0x40975f(0xcb)]==_0x40975f(0x8f)){var _0x3e14b0=users[_0x40975f(0x8e)];console['log'](_0x3e14b0);}else{if(_0x30a8c6[0x0]['language']==_0x40975f(0xbf))var _0x3e14b0=users[_0x40975f(0xbf)];else{if(_0x30a8c6[0x0]['language']==_0x40975f(0xd0))var _0x3e14b0=users['German'];else{if(_0x30a8c6[0x0][_0x40975f(0xcb)]==_0x40975f(0xce))var _0x3e14b0=users[_0x40975f(0xce)];else{if(_0x30a8c6[0x0][_0x40975f(0xcb)]==_0x40975f(0xbd))var _0x3e14b0=users[_0x40975f(0xbd)];else{if(_0x30a8c6[0x0]['language']==_0x40975f(0x97))var _0x3e14b0=users[_0x40975f(0xbe)];else{if(_0x30a8c6[0x0][_0x40975f(0xcb)]==_0x40975f(0xc8))var _0x3e14b0=users[_0x40975f(0xc8)];else{if(_0x30a8c6[0x0][_0x40975f(0xcb)]==_0x40975f(0xb2))var _0x3e14b0=users['Arabic'];}}}}}}}_0x31c5f6['render'](_0x40975f(0xba),{'success':_0x19b53b['flash'](_0x40975f(0xae)),'errors':_0x19b53b[_0x40975f(0x96)](_0x40975f(0x82)),'role':_0x48d139,'profile':_0x3eecf9,'master_shop':_0x30a8c6,'timezones':timezones,'language':_0x3e14b0,'warehouse':_0x552a2b});}catch(_0xa73419){console[_0x40975f(0x9f)](_0xa73419),_0x31c5f6[_0x40975f(0x90)](0xc8)[_0x40975f(0xb7)]({'message':_0xa73419[_0x40975f(0xa3)]});}}),router['post'](a0_0x5074c6(0xcf),async(_0x5f4198,_0x2dee41)=>{const _0x343c0b=a0_0x5074c6,{warehouseNew:_0x5abb94,rooms:_0xd910de,Type:_0x57d613}=_0x5f4198[_0x343c0b(0xc2)],_0x4f4d6e=await warehouse[_0x343c0b(0xb9)]([{'$unwind':_0x343c0b(0xc3)},{'$match':{'name':_0x5abb94,'room':_0xd910de,'product_details.type':_0x57d613}},{'$group':{'_id':{'bay':_0x343c0b(0xab),'bin':'$product_details.bin','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x343c0b(0xa0),'product_quantity':'$product_details.product_stock','product_code':_0x343c0b(0xa6)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x343c0b(0x92),0x0]},'then':_0x343c0b(0x92),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x343c0b(0xc9),'bin':_0x343c0b(0xa1),'type':_0x343c0b(0x99),'floorlevel':_0x343c0b(0xbc),'products':{'$filter':{'input':_0x343c0b(0xb6),'as':_0x343c0b(0xb0),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x2dee41[_0x343c0b(0xb7)](_0x4f4d6e);}),router[a0_0x5074c6(0xa5)](a0_0x5074c6(0x9a),async(_0x48390d,_0x549eb2)=>{const _0x28c144=a0_0x5074c6,{warehouseNew:_0x2ca84e,rooms:_0x80aab7,room_cat:_0x1f16c5}=_0x48390d[_0x28c144(0xc2)];let _0xbe6ebc;if(_0x1f16c5==_0x28c144(0xc0))_0xbe6ebc=await warehouse[_0x28c144(0xb9)]([{'$unwind':_0x28c144(0xc3)},{'$match':{'name':_0x2ca84e}},{'$group':{'_id':{'bay':_0x28c144(0xab),'product':_0x28c144(0xa0),'expiry':_0x28c144(0xb5)},'count':{'$sum':_0x28c144(0x92)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x28c144(0xb5)},'batch_code':{'$first':_0x28c144(0x9d)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x28c144(0xc9),'products':{'$push':{'product':'$_id.product','quantity':_0x28c144(0xc1),'production_date':'$production_date','expiry_date':_0x28c144(0xc7),'batch_code':_0x28c144(0xb1),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x28c144(0xc1)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x28c144(0xcd),'products':0x1,'totalQuantity':0x1}}]),console[_0x28c144(0x9f)](_0x1f16c5);else{}_0x549eb2[_0x28c144(0xb7)](_0xbe6ebc);}),router[a0_0x5074c6(0xa5)]('/Rooms_data',async(_0x4f2120,_0x1385f5)=>{const _0x57f4ea=a0_0x5074c6;try{const {warehouse_name:_0xc8da4e,A:_0x47a4cd,B:_0xeb5e92}=_0x4f2120[_0x57f4ea(0xc2)];var _0x516b97='';_0x47a4cd==_0x57f4ea(0xb3)?_0xeb5e92==_0x57f4ea(0x94)?_0x516b97=[{'$match':{'name':_0xc8da4e,'status':'Enabled','room':_0x57f4ea(0x91)}},{'$group':{'_id':_0x57f4ea(0xcd),'room_name':{'$first':_0x57f4ea(0x95)}}},{'$sort':{'room_name':0x1}}]:_0x516b97=[{'$match':{'name':_0xc8da4e,'status':_0x57f4ea(0xac)}},{'$group':{'_id':_0x57f4ea(0xcd),'room_name':{'$first':_0x57f4ea(0x95)}}},{'$sort':{'room_name':0x1}}]:_0x516b97=[{'$match':{'name':_0xc8da4e,'status':_0x57f4ea(0xac)}},{'$group':{'_id':_0x57f4ea(0xcd),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x1a99ff=await warehouse[_0x57f4ea(0xb9)](_0x516b97);_0x1385f5[_0x57f4ea(0x90)](0xc8)[_0x57f4ea(0xb7)](_0x1a99ff);}catch(_0x1cad5a){_0x1385f5[_0x57f4ea(0x90)](0x190)[_0x57f4ea(0xb7)]({'errorMessage':_0x1cad5a[_0x57f4ea(0xa3)]});}}),router[a0_0x5074c6(0xa5)](a0_0x5074c6(0x9c),async(_0x4044e7,_0x110dac)=>{const _0x5d8d8c=a0_0x5074c6;try{const {warehouse_name:_0x1baf6d,cat:_0x38fbaa,valNew:_0x311a8a}=_0x4044e7[_0x5d8d8c(0xc2)];var _0x510109='',_0x3a51b7='';if(_0x38fbaa==_0x5d8d8c(0x83))_0x510109=_0x5d8d8c(0x84),_0x311a8a=='pack'?_0x3a51b7=[{'$match':{'status':'Enabled','warehouse_category':_0x38fbaa,'name':{'$ne':_0x510109},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x5d8d8c(0xa2),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x3a51b7=[{'$match':{'status':_0x5d8d8c(0xac),'warehouse_category':_0x38fbaa,'name':{'$ne':_0x510109}}},{'$group':{'_id':_0x5d8d8c(0xa2),'room_name':{'$first':_0x5d8d8c(0xa2)}}},{'$sort':{'room_name':0x1}}];else _0x38fbaa=='Finished\x20Goods'?(_0x510109=_0x5d8d8c(0x86),_0x3a51b7=[{'$match':{'status':_0x5d8d8c(0xac),'warehouse_category':_0x38fbaa,'name':{'$ne':_0x510109}}},{'$group':{'_id':_0x5d8d8c(0xa2),'room_name':{'$first':_0x5d8d8c(0xa2)}}},{'$sort':{'room_name':0x1}}]):_0x3a51b7=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x5d8d8c(0xa2),'room_name':{'$first':_0x5d8d8c(0xa2)}}},{'$sort':{'room_name':0x1}}];const _0x58bb72=await warehouse[_0x5d8d8c(0xb9)](_0x3a51b7);_0x110dac['status'](0xc8)[_0x5d8d8c(0xb7)](_0x58bb72);}catch(_0x33e060){_0x110dac[_0x5d8d8c(0x90)](0x190)['json']({'errorMessage':_0x33e060[_0x5d8d8c(0xa3)]}),console['log'](_0x33e060);}}),router[a0_0x5074c6(0xa5)](a0_0x5074c6(0x9e),async(_0x211e07,_0x233e85)=>{const _0xa664a1=a0_0x5074c6;try{const {warehouse_name:_0x275f76,cat:_0x560377}=_0x211e07[_0xa664a1(0xc2)],_0x49227c=await warehouse[_0xa664a1(0xb9)]([{'$match':{'status':_0xa664a1(0xac),'warehouse_category':_0x560377,'name':_0x275f76}},{'$group':{'_id':_0xa664a1(0x95),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x233e85[_0xa664a1(0x90)](0xc8)[_0xa664a1(0xb7)](_0x49227c);}catch(_0x3d5c90){_0x233e85[_0xa664a1(0x90)](0x190)['json']({'errorMessage':_0x3d5c90[_0xa664a1(0xa3)]});}}),module['exports']=router;