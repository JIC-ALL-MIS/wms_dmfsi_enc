const a0_0xa8a091=a0_0x544e;(function(_0x5c4723,_0x42be2a){const _0x34a66a=a0_0x544e,_0xbd4730=_0x5c4723();while(!![]){try{const _0x3fb0a5=-parseInt(_0x34a66a(0xaf))/0x1*(-parseInt(_0x34a66a(0x84))/0x2)+parseInt(_0x34a66a(0xa8))/0x3+-parseInt(_0x34a66a(0x98))/0x4*(-parseInt(_0x34a66a(0x85))/0x5)+parseInt(_0x34a66a(0x99))/0x6*(parseInt(_0x34a66a(0x91))/0x7)+-parseInt(_0x34a66a(0xbc))/0x8*(parseInt(_0x34a66a(0xa1))/0x9)+-parseInt(_0x34a66a(0x80))/0xa*(-parseInt(_0x34a66a(0x88))/0xb)+-parseInt(_0x34a66a(0x96))/0xc*(parseInt(_0x34a66a(0x8d))/0xd);if(_0x3fb0a5===_0x42be2a)break;else _0xbd4730['push'](_0xbd4730['shift']());}catch(_0x5ab372){_0xbd4730['push'](_0xbd4730['shift']());}}}(a0_0x1f80,0x41a77));const express=require(a0_0xa8a091(0xa3)),app=express(),router=express[a0_0xa8a091(0xbe)](),multer=require(a0_0xa8a091(0x97)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0xa8a091(0x92)),auth=require(a0_0xa8a091(0xa4));function a0_0x1f80(){const _0x2d3fc6=['../models/all_models','$product_details','en-US','Spanish','138312jSBOIZ','multer','1482012tAlulG','2388AKAtBF','QA\x20Warehouse','$room','$_id.floorlevel','All','$_id','errors','/Rooms_data','27gSxErt','DRY\x20STORAGE','express','../middleware/auth','timezone','$batch_code','raw','733590TFWgju','flash','English\x20(US)','$product_details.product_code','Arabic\x20(ae)','$production_date','Enabled','416939BJGBEm','warehouse','success','findOne','$name','Portuguese','Chinese','$product_details.batch_code','log','body','find','aggregate','json','895928lREGss','staff','Router','German','$_id.type','$count','$product_details.bay','$product_details.product_stock','Rack\x20A','message','Hindi','product','Raw\x20Materials','post','$product_details.product_name','$product_details.production_date','status','$product_code','../public/language/languages.json','email','20Cqpwle','$product_details.expiry_date','user','Return\x20Goods','2IvHcyT','5LVdonZ','$_id.bin','$products','133980HIZwCr','French','Arabic','pack','/Rooms_data3','559hGUEOd','master','language','$_id.product','777iMPgwx'];a0_0x1f80=function(){return _0x2d3fc6;};return a0_0x1f80();}var timezones=require('timezones-list');function a0_0x544e(_0x5ac6a8,_0x5c2cae){const _0x1f802f=a0_0x1f80();return a0_0x544e=function(_0x544eaf,_0x3521d0){_0x544eaf=_0x544eaf-0x71;let _0x2f8bb6=_0x1f802f[_0x544eaf];return _0x2f8bb6;},a0_0x544e(_0x5ac6a8,_0x5c2cae);}const users=require(a0_0xa8a091(0x7e));router['get']('/view',auth,async(_0x282f5a,_0x392ee5)=>{const _0x56150d=a0_0xa8a091;try{const {username:_0x38c7f3,email:_0x5bff7a,role:_0x470af6}=_0x282f5a[_0x56150d(0x82)],_0x472186=_0x282f5a[_0x56150d(0x82)],_0x215e3a=await profile[_0x56150d(0xb2)]({'email':_0x472186['email']}),_0x50f5fc=await master_shop[_0x56150d(0xb9)]();console[_0x56150d(0xb7)](_0x56150d(0x8e),_0x50f5fc);let _0x2a869e;if(_0x472186['role']==_0x56150d(0xbd)){const _0x4afe43=await staff[_0x56150d(0xb2)]({'email':_0x472186[_0x56150d(0x7f)]});_0x2a869e=await warehouse[_0x56150d(0xba)]([{'$match':{'status':_0x56150d(0xae),'name':_0x4afe43[_0x56150d(0xb0)]}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x2a869e=await warehouse['aggregate']([{'$match':{'status':_0x56150d(0xae)}},{'$group':{'_id':_0x56150d(0xb3),'name':{'$first':_0x56150d(0xb3)}}}]);const _0xd55067=new Date()['toLocaleString'](_0x56150d(0x94),{'timeZone':_0x50f5fc[0x0]['timezone']});console[_0x56150d(0xb7)](_0x56150d(0xa5),_0xd55067);if(_0x50f5fc[0x0]['language']==_0x56150d(0xaa)){var _0x4c74bf=users['English'];console[_0x56150d(0xb7)](_0x4c74bf);}else{if(_0x50f5fc[0x0]['language']==_0x56150d(0x76))var _0x4c74bf=users[_0x56150d(0x76)];else{if(_0x50f5fc[0x0][_0x56150d(0x8f)]==_0x56150d(0xbf))var _0x4c74bf=users['German'];else{if(_0x50f5fc[0x0][_0x56150d(0x8f)]==_0x56150d(0x95))var _0x4c74bf=users['Spanish'];else{if(_0x50f5fc[0x0][_0x56150d(0x8f)]=='French')var _0x4c74bf=users[_0x56150d(0x89)];else{if(_0x50f5fc[0x0][_0x56150d(0x8f)]=='Portuguese\x20(BR)')var _0x4c74bf=users[_0x56150d(0xb4)];else{if(_0x50f5fc[0x0][_0x56150d(0x8f)]==_0x56150d(0xb5))var _0x4c74bf=users[_0x56150d(0xb5)];else{if(_0x50f5fc[0x0]['language']==_0x56150d(0xac))var _0x4c74bf=users[_0x56150d(0x8a)];}}}}}}}_0x392ee5['render']('warehousemap_incoming',{'success':_0x282f5a['flash'](_0x56150d(0xb1)),'errors':_0x282f5a[_0x56150d(0xa9)](_0x56150d(0x9f)),'role':_0x472186,'profile':_0x215e3a,'master_shop':_0x50f5fc,'timezones':timezones,'language':_0x4c74bf,'warehouse':_0x2a869e});}catch(_0x4e03bc){console[_0x56150d(0xb7)](_0x4e03bc),_0x392ee5[_0x56150d(0x7c)](0xc8)[_0x56150d(0xbb)]({'message':_0x4e03bc[_0x56150d(0x75)]});}}),router['post']('/MapData',async(_0x30112e,_0x34e052)=>{const _0x56ee4a=a0_0xa8a091,{warehouseNew:_0x4e74a5,rooms:_0x11d0c6,Type:_0x3b116f}=_0x30112e['body'],_0x12b9f2=await warehouse[_0x56ee4a(0xba)]([{'$unwind':_0x56ee4a(0x93)},{'$match':{'name':_0x4e74a5,'room':_0x11d0c6,'product_details.type':_0x3b116f}},{'$group':{'_id':{'bay':_0x56ee4a(0x72),'bin':'$product_details.bin','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x56ee4a(0x73),'product_code':_0x56ee4a(0xab)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x56ee4a(0x73),0x0]},'then':_0x56ee4a(0x73),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x56ee4a(0x86),'type':_0x56ee4a(0xc0),'floorlevel':_0x56ee4a(0x9c),'products':{'$filter':{'input':_0x56ee4a(0x87),'as':_0x56ee4a(0x77),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x34e052[_0x56ee4a(0xbb)](_0x12b9f2);}),router[a0_0xa8a091(0x79)]('/MapData2',async(_0x131887,_0xf85de7)=>{const _0x3f6760=a0_0xa8a091,{warehouseNew:_0x4b3acc,rooms:_0x23b7c6,room_cat:_0x455325}=_0x131887[_0x3f6760(0xb8)];let _0xca9f32;if(_0x455325==_0x3f6760(0x9d))_0xca9f32=await warehouse['aggregate']([{'$unwind':_0x3f6760(0x93)},{'$match':{'name':_0x4b3acc}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x3f6760(0x7a),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x3f6760(0x73)},'production_date':{'$first':_0x3f6760(0x7b)},'expiry_date':{'$first':_0x3f6760(0x81)},'batch_code':{'$first':_0x3f6760(0xb6)},'product_code':{'$first':_0x3f6760(0xab)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x3f6760(0x90),'quantity':_0x3f6760(0x71),'production_date':_0x3f6760(0xad),'expiry_date':'$expiry_date','batch_code':_0x3f6760(0xa6),'product_code':_0x3f6760(0x7d)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x3f6760(0x9e),'products':0x1,'totalQuantity':0x1}}]),console[_0x3f6760(0xb7)](_0x455325);else{}_0xf85de7[_0x3f6760(0xbb)](_0xca9f32);}),router[a0_0xa8a091(0x79)](a0_0xa8a091(0xa0),async(_0x349d82,_0x1ee959)=>{const _0x17f8b9=a0_0xa8a091;try{const {warehouse_name:_0xa7a1ea,A:_0x1ef446,B:_0x409be3}=_0x349d82[_0x17f8b9(0xb8)];var _0x4d9582='';_0x1ef446==_0x17f8b9(0xa7)?_0x409be3==_0x17f8b9(0x8b)?_0x4d9582=[{'$match':{'name':_0xa7a1ea,'status':_0x17f8b9(0xae),'room':_0x17f8b9(0x74)}},{'$group':{'_id':_0x17f8b9(0x9e),'room_name':{'$first':_0x17f8b9(0x9b)}}},{'$sort':{'room_name':0x1}}]:_0x4d9582=[{'$match':{'name':_0xa7a1ea,'status':_0x17f8b9(0xae)}},{'$group':{'_id':_0x17f8b9(0x9e),'room_name':{'$first':_0x17f8b9(0x9b)}}},{'$sort':{'room_name':0x1}}]:_0x4d9582=[{'$match':{'name':_0xa7a1ea,'status':_0x17f8b9(0xae)}},{'$group':{'_id':_0x17f8b9(0x9e),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x48ab8f=await warehouse[_0x17f8b9(0xba)](_0x4d9582);_0x1ee959[_0x17f8b9(0x7c)](0xc8)['json'](_0x48ab8f);}catch(_0x9981ea){_0x1ee959['status'](0x190)['json']({'errorMessage':_0x9981ea['message']});}}),router[a0_0xa8a091(0x79)]('/Rooms_data2',async(_0x1e439f,_0xb1e44a)=>{const _0x31623b=a0_0xa8a091;try{const {warehouse_name:_0x49f241,cat:_0x52e35f,valNew:_0x25b254}=_0x1e439f['body'];var _0x213a61='',_0x9a187d='';if(_0x52e35f==_0x31623b(0x78))_0x213a61=_0x31623b(0x83),_0x25b254==_0x31623b(0x8b)?_0x9a187d=[{'$match':{'status':_0x31623b(0xae),'warehouse_category':_0x52e35f,'name':{'$ne':_0x213a61},'name':_0x31623b(0xa2)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x9a187d=[{'$match':{'status':'Enabled','warehouse_category':_0x52e35f,'name':{'$ne':_0x213a61}}},{'$group':{'_id':_0x31623b(0xb3),'room_name':{'$first':_0x31623b(0xb3)}}},{'$sort':{'room_name':0x1}}];else _0x52e35f=='Finished\x20Goods'?(_0x213a61=_0x31623b(0x9a),_0x9a187d=[{'$match':{'status':_0x31623b(0xae),'warehouse_category':_0x52e35f,'name':{'$ne':_0x213a61}}},{'$group':{'_id':_0x31623b(0xb3),'room_name':{'$first':_0x31623b(0xb3)}}},{'$sort':{'room_name':0x1}}]):_0x9a187d=[{'$match':{'status':_0x31623b(0xae)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x34722d=await warehouse['aggregate'](_0x9a187d);_0xb1e44a[_0x31623b(0x7c)](0xc8)[_0x31623b(0xbb)](_0x34722d);}catch(_0x3fc702){_0xb1e44a['status'](0x190)[_0x31623b(0xbb)]({'errorMessage':_0x3fc702[_0x31623b(0x75)]}),console['log'](_0x3fc702);}}),router['post'](a0_0xa8a091(0x8c),async(_0x3ccf9c,_0x16c79e)=>{const _0x3ac88e=a0_0xa8a091;try{const {warehouse_name:_0x79df95,cat:_0x2954b9}=_0x3ccf9c[_0x3ac88e(0xb8)],_0x3fabdc=await warehouse[_0x3ac88e(0xba)]([{'$match':{'status':_0x3ac88e(0xae),'warehouse_category':_0x2954b9,'name':_0x79df95}},{'$group':{'_id':_0x3ac88e(0x9b),'room_name':{'$first':_0x3ac88e(0x9b)}}},{'$sort':{'room_name':0x1}}]);_0x16c79e['status'](0xc8)[_0x3ac88e(0xbb)](_0x3fabdc);}catch(_0x57b9b2){_0x16c79e[_0x3ac88e(0x7c)](0x190)['json']({'errorMessage':_0x57b9b2[_0x3ac88e(0x75)]});}}),module['exports']=router;