const a0_0x4968a1=a0_0x3ccb;(function(_0x543ca6,_0x55a024){const _0x3b38d3=a0_0x3ccb,_0x5c906b=_0x543ca6();while(!![]){try{const _0x50f074=-parseInt(_0x3b38d3(0x1c1))/0x1+parseInt(_0x3b38d3(0x1e4))/0x2+-parseInt(_0x3b38d3(0x1f9))/0x3*(-parseInt(_0x3b38d3(0x1ec))/0x4)+-parseInt(_0x3b38d3(0x200))/0x5*(parseInt(_0x3b38d3(0x209))/0x6)+parseInt(_0x3b38d3(0x203))/0x7+parseInt(_0x3b38d3(0x1bf))/0x8+-parseInt(_0x3b38d3(0x1c2))/0x9*(parseInt(_0x3b38d3(0x1cf))/0xa);if(_0x50f074===_0x55a024)break;else _0x5c906b['push'](_0x5c906b['shift']());}catch(_0x15f063){_0x5c906b['push'](_0x5c906b['shift']());}}}(a0_0x5b9a,0x1ebe7));function a0_0x5b9a(){const _0x564446=['$production_date','message','Arabic','40EbPtHC','QA\x20Warehouse','/MapData2','French','DRY\x20STORAGE','$product_details.product_name','Chinese','success','Portuguese\x20(BR)','$product_details.expiry_date','json','English\x20(US)','$$product.product_quantity','body','$product_details.batch_code','staff','Hindi','get','pack','$product_details.production_date','$product_code','91166ILSVEp','warehouse','Raw\x20Materials','German','$count','express','../public/language/languages.json','flash','275208ErAlCT','$product_details.product_code','master','/Rooms_data3','$_id.product','language','timezones-list','$expiry_date','Rack\x20A','Return\x20Goods','$_id.type','exports','$room','3nQmrRa','findOne','raw','$name','$_id.bay','$product_details.product_stock','errors','49495QhlyXf','/Rooms_data','$products','1686160QfUnHB','/Rooms_data2','status','$product_details.bay','English','aggregate','66ojYtva','$product_details.floorlevel','$product_details','product','Portuguese','user','post','find','$product_details.bin','multer','Enabled','/view','1751240MQurIn','en-US','24010ZstKAQ','709524ONYpOy','timezone','Finished\x20Goods','$_id','$batch_code','warehousemap_incoming','email','log','../models/all_models','Spanish'];a0_0x5b9a=function(){return _0x564446;};return a0_0x5b9a();}function a0_0x3ccb(_0x3103e6,_0x1bbe6f){const _0x5b9a08=a0_0x5b9a();return a0_0x3ccb=function(_0x3ccb74,_0x5e9303){_0x3ccb74=_0x3ccb74-0x1bd;let _0x13d75e=_0x5b9a08[_0x3ccb74];return _0x13d75e;},a0_0x3ccb(_0x3103e6,_0x1bbe6f);}const express=require(a0_0x4968a1(0x1e9)),app=express(),router=express['Router'](),multer=require(a0_0x4968a1(0x212)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x4968a1(0x1ca)),auth=require('../middleware/auth');var timezones=require(a0_0x4968a1(0x1f2));const users=require(a0_0x4968a1(0x1ea));router[a0_0x4968a1(0x1e0)](a0_0x4968a1(0x1be),auth,async(_0xc882f,_0x210a30)=>{const _0x54b8f3=a0_0x4968a1;try{const {username:_0x343a37,email:_0x59514c,role:_0x2d8910}=_0xc882f[_0x54b8f3(0x20e)],_0x1dbe21=_0xc882f[_0x54b8f3(0x20e)],_0x196b10=await profile[_0x54b8f3(0x1fa)]({'email':_0x1dbe21[_0x54b8f3(0x1c8)]}),_0x2999f7=await master_shop[_0x54b8f3(0x210)]();console[_0x54b8f3(0x1c9)](_0x54b8f3(0x1ee),_0x2999f7);let _0x4f16bb;if(_0x1dbe21['role']==_0x54b8f3(0x1de)){const _0xd1b6d0=await staff[_0x54b8f3(0x1fa)]({'email':_0x1dbe21[_0x54b8f3(0x1c8)]});_0x4f16bb=await warehouse[_0x54b8f3(0x208)]([{'$match':{'status':'Enabled','name':_0xd1b6d0[_0x54b8f3(0x1e5)]}},{'$group':{'_id':_0x54b8f3(0x1fc),'name':{'$first':_0x54b8f3(0x1fc)}}}]);}else _0x4f16bb=await warehouse[_0x54b8f3(0x208)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x54b8f3(0x1fc),'name':{'$first':_0x54b8f3(0x1fc)}}}]);const _0x42e344=new Date()['toLocaleString'](_0x54b8f3(0x1c0),{'timeZone':_0x2999f7[0x0][_0x54b8f3(0x1c3)]});console['log'](_0x54b8f3(0x1c3),_0x42e344);if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1da)){var _0x3e7154=users[_0x54b8f3(0x207)];console[_0x54b8f3(0x1c9)](_0x3e7154);}else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1df))var _0x3e7154=users[_0x54b8f3(0x1df)];else{if(_0x2999f7[0x0]['language']==_0x54b8f3(0x1e7))var _0x3e7154=users[_0x54b8f3(0x1e7)];else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1cb))var _0x3e7154=users[_0x54b8f3(0x1cb)];else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1d2))var _0x3e7154=users[_0x54b8f3(0x1d2)];else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1d7))var _0x3e7154=users[_0x54b8f3(0x20d)];else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]==_0x54b8f3(0x1d5))var _0x3e7154=users[_0x54b8f3(0x1d5)];else{if(_0x2999f7[0x0][_0x54b8f3(0x1f1)]=='Arabic\x20(ae)')var _0x3e7154=users[_0x54b8f3(0x1ce)];}}}}}}}_0x210a30['render'](_0x54b8f3(0x1c7),{'success':_0xc882f[_0x54b8f3(0x1eb)](_0x54b8f3(0x1d6)),'errors':_0xc882f[_0x54b8f3(0x1eb)](_0x54b8f3(0x1ff)),'role':_0x1dbe21,'profile':_0x196b10,'master_shop':_0x2999f7,'timezones':timezones,'language':_0x3e7154,'warehouse':_0x4f16bb});}catch(_0xea8c83){console[_0x54b8f3(0x1c9)](_0xea8c83),_0x210a30['status'](0xc8)['json']({'message':_0xea8c83[_0x54b8f3(0x1cd)]});}}),router[a0_0x4968a1(0x20f)]('/MapData',async(_0x344e7c,_0x55cfa3)=>{const _0x143c09=a0_0x4968a1,{warehouseNew:_0x384414,rooms:_0x39ad57,Type:_0x2c39be}=_0x344e7c[_0x143c09(0x1dc)],_0x4b3adc=await warehouse[_0x143c09(0x208)]([{'$unwind':'$product_details'},{'$match':{'name':_0x384414,'room':_0x39ad57,'product_details.type':_0x2c39be}},{'$group':{'_id':{'bay':_0x143c09(0x206),'bin':_0x143c09(0x211),'type':'$product_details.type','floorlevel':_0x143c09(0x20a)},'products':{'$push':{'product_name':_0x143c09(0x1d4),'product_quantity':_0x143c09(0x1fe),'product_code':_0x143c09(0x1ed)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x143c09(0x1fe),0x0]},'then':_0x143c09(0x1fe),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':'$_id.bin','type':_0x143c09(0x1f6),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x143c09(0x202),'as':_0x143c09(0x20c),'cond':{'$gt':[_0x143c09(0x1db),0x0]}}},'totalQuantity':0x1}}]);_0x55cfa3[_0x143c09(0x1d9)](_0x4b3adc);}),router['post'](a0_0x4968a1(0x1d1),async(_0x38b572,_0x237499)=>{const _0x4a9254=a0_0x4968a1,{warehouseNew:_0x576942,rooms:_0x32495e,room_cat:_0x58bb50}=_0x38b572[_0x4a9254(0x1dc)];let _0x7bbcd6;if(_0x58bb50=='All')_0x7bbcd6=await warehouse[_0x4a9254(0x208)]([{'$unwind':_0x4a9254(0x20b)},{'$match':{'name':_0x576942}},{'$group':{'_id':{'bay':_0x4a9254(0x206),'product':_0x4a9254(0x1d4),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x4a9254(0x1fe)},'production_date':{'$first':_0x4a9254(0x1e2)},'expiry_date':{'$first':_0x4a9254(0x1d8)},'batch_code':{'$first':_0x4a9254(0x1dd)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x4a9254(0x1fd),'products':{'$push':{'product':_0x4a9254(0x1f0),'quantity':_0x4a9254(0x1e8),'production_date':_0x4a9254(0x1cc),'expiry_date':_0x4a9254(0x1f3),'batch_code':_0x4a9254(0x1c6),'product_code':_0x4a9254(0x1e3)}},'totalQuantity':{'$sum':_0x4a9254(0x1e8)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x4a9254(0x1c9)](_0x58bb50);else{}_0x237499[_0x4a9254(0x1d9)](_0x7bbcd6);}),router[a0_0x4968a1(0x20f)](a0_0x4968a1(0x201),async(_0xe272f9,_0x15a058)=>{const _0x2a157d=a0_0x4968a1;try{const {warehouse_name:_0x4950ab,A:_0x28b737,B:_0x1b617b}=_0xe272f9[_0x2a157d(0x1dc)];var _0x42f485='';_0x28b737==_0x2a157d(0x1fb)?_0x1b617b=='pack'?_0x42f485=[{'$match':{'name':_0x4950ab,'status':_0x2a157d(0x1bd),'room':_0x2a157d(0x1f4)}},{'$group':{'_id':_0x2a157d(0x1c5),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x42f485=[{'$match':{'name':_0x4950ab,'status':_0x2a157d(0x1bd)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x2a157d(0x1f8)}}},{'$sort':{'room_name':0x1}}]:_0x42f485=[{'$match':{'name':_0x4950ab,'status':_0x2a157d(0x1bd)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x403c98=await warehouse[_0x2a157d(0x208)](_0x42f485);_0x15a058['status'](0xc8)[_0x2a157d(0x1d9)](_0x403c98);}catch(_0x2667d2){_0x15a058['status'](0x190)['json']({'errorMessage':_0x2667d2[_0x2a157d(0x1cd)]});}}),router['post'](a0_0x4968a1(0x204),async(_0x470e27,_0x4b4e2e)=>{const _0x3672b6=a0_0x4968a1;try{const {warehouse_name:_0x5a34d6,cat:_0x1ec934,valNew:_0x5798d9}=_0x470e27[_0x3672b6(0x1dc)];var _0x5a9040='',_0x1b272d='';if(_0x1ec934==_0x3672b6(0x1e6))_0x5a9040=_0x3672b6(0x1f5),_0x5798d9==_0x3672b6(0x1e1)?_0x1b272d=[{'$match':{'status':'Enabled','warehouse_category':_0x1ec934,'name':{'$ne':_0x5a9040},'name':_0x3672b6(0x1d3)}},{'$group':{'_id':_0x3672b6(0x1fc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x1b272d=[{'$match':{'status':_0x3672b6(0x1bd),'warehouse_category':_0x1ec934,'name':{'$ne':_0x5a9040}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x1ec934==_0x3672b6(0x1c4)?(_0x5a9040=_0x3672b6(0x1d0),_0x1b272d=[{'$match':{'status':_0x3672b6(0x1bd),'warehouse_category':_0x1ec934,'name':{'$ne':_0x5a9040}}},{'$group':{'_id':_0x3672b6(0x1fc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x1b272d=[{'$match':{'status':_0x3672b6(0x1bd)}},{'$group':{'_id':_0x3672b6(0x1fc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x4dc532=await warehouse['aggregate'](_0x1b272d);_0x4b4e2e[_0x3672b6(0x205)](0xc8)[_0x3672b6(0x1d9)](_0x4dc532);}catch(_0x19d2ee){_0x4b4e2e['status'](0x190)['json']({'errorMessage':_0x19d2ee[_0x3672b6(0x1cd)]}),console['log'](_0x19d2ee);}}),router['post'](a0_0x4968a1(0x1ef),async(_0x51cfb4,_0x1b36bd)=>{const _0x5cb042=a0_0x4968a1;try{const {warehouse_name:_0x50f1a5,cat:_0x144637}=_0x51cfb4[_0x5cb042(0x1dc)],_0x374824=await warehouse[_0x5cb042(0x208)]([{'$match':{'status':_0x5cb042(0x1bd),'warehouse_category':_0x144637,'name':_0x50f1a5}},{'$group':{'_id':_0x5cb042(0x1f8),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x1b36bd['status'](0xc8)[_0x5cb042(0x1d9)](_0x374824);}catch(_0x3fb2f3){_0x1b36bd[_0x5cb042(0x205)](0x190)[_0x5cb042(0x1d9)]({'errorMessage':_0x3fb2f3[_0x5cb042(0x1cd)]});}}),module[a0_0x4968a1(0x1f7)]=router;