const a0_0x36dbf4=a0_0x4222;(function(_0x2fb6ce,_0x324447){const _0x5b818f=a0_0x4222,_0x7e3ccd=_0x2fb6ce();while(!![]){try{const _0x222b03=-parseInt(_0x5b818f(0x1dd))/0x1*(parseInt(_0x5b818f(0x1f8))/0x2)+parseInt(_0x5b818f(0x1d9))/0x3*(-parseInt(_0x5b818f(0x1e8))/0x4)+parseInt(_0x5b818f(0x213))/0x5*(-parseInt(_0x5b818f(0x20b))/0x6)+-parseInt(_0x5b818f(0x1e5))/0x7+parseInt(_0x5b818f(0x214))/0x8*(-parseInt(_0x5b818f(0x1ec))/0x9)+-parseInt(_0x5b818f(0x201))/0xa+parseInt(_0x5b818f(0x1f9))/0xb*(parseInt(_0x5b818f(0x209))/0xc);if(_0x222b03===_0x324447)break;else _0x7e3ccd['push'](_0x7e3ccd['shift']());}catch(_0x4224cf){_0x7e3ccd['push'](_0x7e3ccd['shift']());}}}(a0_0x3e80,0xe740e));const express=require(a0_0x36dbf4(0x211)),app=express(),router=express[a0_0x36dbf4(0x1f4)](),multer=require(a0_0x36dbf4(0x208)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x36dbf4(0x203)),auth=require('../middleware/auth');var timezones=require(a0_0x36dbf4(0x1cb));const users=require('../public/language/languages.json');function a0_0x4222(_0x5c0287,_0x43e083){const _0x3e8046=a0_0x3e80();return a0_0x4222=function(_0x42225e,_0x2efd9a){_0x42225e=_0x42225e-0x1ca;let _0x462246=_0x3e8046[_0x42225e];return _0x462246;},a0_0x4222(_0x5c0287,_0x43e083);}router['get']('/view',auth,async(_0x43439b,_0x1526cb)=>{const _0x27793a=a0_0x36dbf4;try{const {username:_0x52d078,email:_0xb3fefa,role:_0x5b3797}=_0x43439b[_0x27793a(0x1eb)],_0x14fe58=_0x43439b[_0x27793a(0x1eb)],_0x17a71a=await profile['findOne']({'email':_0x14fe58[_0x27793a(0x20e)]}),_0x34e8da=await master_shop['find']();console['log'](_0x27793a(0x1e9),_0x34e8da);let _0x1f838d;if(_0x14fe58['role']==_0x27793a(0x1f3)){const _0x2703e6=await staff[_0x27793a(0x1fb)]({'email':_0x14fe58[_0x27793a(0x20e)]});_0x1f838d=await warehouse[_0x27793a(0x204)]([{'$match':{'status':_0x27793a(0x1df),'name':_0x2703e6['warehouse']}},{'$group':{'_id':_0x27793a(0x1e6),'name':{'$first':_0x27793a(0x1e6)}}}]);}else _0x1f838d=await warehouse[_0x27793a(0x204)]([{'$match':{'status':_0x27793a(0x1df)}},{'$group':{'_id':_0x27793a(0x1e6),'name':{'$first':_0x27793a(0x1e6)}}}]);const _0x45777b=new Date()[_0x27793a(0x205)]('en-US',{'timeZone':_0x34e8da[0x0][_0x27793a(0x1cd)]});console[_0x27793a(0x1ca)](_0x27793a(0x1cd),_0x45777b);if(_0x34e8da[0x0]['language']=='English\x20(US)'){var _0x2e7afe=users['English'];console[_0x27793a(0x1ca)](_0x2e7afe);}else{if(_0x34e8da[0x0][_0x27793a(0x1fd)]=='Hindi')var _0x2e7afe=users[_0x27793a(0x1f7)];else{if(_0x34e8da[0x0][_0x27793a(0x1fd)]==_0x27793a(0x1d2))var _0x2e7afe=users[_0x27793a(0x1d2)];else{if(_0x34e8da[0x0][_0x27793a(0x1fd)]==_0x27793a(0x1da))var _0x2e7afe=users[_0x27793a(0x1da)];else{if(_0x34e8da[0x0]['language']=='French')var _0x2e7afe=users[_0x27793a(0x1d7)];else{if(_0x34e8da[0x0][_0x27793a(0x1fd)]=='Portuguese\x20(BR)')var _0x2e7afe=users[_0x27793a(0x1ea)];else{if(_0x34e8da[0x0][_0x27793a(0x1fd)]==_0x27793a(0x1fe))var _0x2e7afe=users[_0x27793a(0x1fe)];else{if(_0x34e8da[0x0]['language']==_0x27793a(0x1d4))var _0x2e7afe=users[_0x27793a(0x1d8)];}}}}}}}_0x1526cb['render'](_0x27793a(0x1ef),{'success':_0x43439b[_0x27793a(0x1e4)](_0x27793a(0x1d3)),'errors':_0x43439b[_0x27793a(0x1e4)](_0x27793a(0x1d6)),'role':_0x14fe58,'profile':_0x17a71a,'master_shop':_0x34e8da,'timezones':timezones,'language':_0x2e7afe,'warehouse':_0x1f838d});}catch(_0x2d6220){console[_0x27793a(0x1ca)](_0x2d6220),_0x1526cb[_0x27793a(0x217)](0xc8)[_0x27793a(0x1fc)]({'message':_0x2d6220['message']});}}),router['post']('/MapData',async(_0x8c043,_0x9699cb)=>{const _0x47cead=a0_0x36dbf4,{warehouseNew:_0x254335,rooms:_0xbaed6a,Type:_0x22a39e}=_0x8c043[_0x47cead(0x210)],_0xd75ce9=await warehouse[_0x47cead(0x204)]([{'$unwind':_0x47cead(0x1db)},{'$match':{'name':_0x254335,'room':_0xbaed6a,'product_details.type':_0x22a39e}},{'$group':{'_id':{'bay':_0x47cead(0x1e0),'bin':_0x47cead(0x20f),'type':_0x47cead(0x20c),'floorlevel':_0x47cead(0x1de)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x47cead(0x1cc),'product_code':_0x47cead(0x1ee)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x47cead(0x1cc),0x0]},'then':_0x47cead(0x1cc),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x47cead(0x1d5),'bin':_0x47cead(0x1f2),'type':_0x47cead(0x1d0),'floorlevel':_0x47cead(0x1ce),'products':{'$filter':{'input':_0x47cead(0x20a),'as':_0x47cead(0x215),'cond':{'$gt':[_0x47cead(0x207),0x0]}}},'totalQuantity':0x1}}]);_0x9699cb[_0x47cead(0x1fc)](_0xd75ce9);}),router[a0_0x36dbf4(0x20d)](a0_0x36dbf4(0x216),async(_0x3d2198,_0x44dde8)=>{const _0x383674=a0_0x36dbf4,{warehouseNew:_0x2d4a4d,rooms:_0x3a4993,room_cat:_0x7fcc4}=_0x3d2198['body'];let _0x5c9027;if(_0x7fcc4==_0x383674(0x1e2))_0x5c9027=await warehouse[_0x383674(0x204)]([{'$unwind':'$product_details'},{'$match':{'name':_0x2d4a4d}},{'$group':{'_id':{'bay':_0x383674(0x1e0),'product':_0x383674(0x1ff),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x383674(0x1cc)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x383674(0x200)},'product_code':{'$first':_0x383674(0x1ee)}}},{'$group':{'_id':_0x383674(0x1d5),'products':{'$push':{'product':'$_id.product','quantity':_0x383674(0x1ed),'production_date':'$production_date','expiry_date':'$expiry_date','batch_code':'$batch_code','product_code':_0x383674(0x202)}},'totalQuantity':{'$sum':_0x383674(0x1ed)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x383674(0x212),'products':0x1,'totalQuantity':0x1}}]),console[_0x383674(0x1ca)](_0x7fcc4);else{}_0x44dde8[_0x383674(0x1fc)](_0x5c9027);}),router[a0_0x36dbf4(0x20d)](a0_0x36dbf4(0x1f0),async(_0x14fb2f,_0x529bdd)=>{const _0x142f4f=a0_0x36dbf4;try{const {warehouse_name:_0x404182,A:_0x36c9ca,B:_0x17fdaf}=_0x14fb2f['body'];var _0x3b82a5='';_0x36c9ca=='raw'?_0x17fdaf==_0x142f4f(0x1fa)?_0x3b82a5=[{'$match':{'name':_0x404182,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':_0x142f4f(0x212),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x3b82a5=[{'$match':{'name':_0x404182,'status':_0x142f4f(0x1df)}},{'$group':{'_id':_0x142f4f(0x212),'room_name':{'$first':_0x142f4f(0x1e3)}}},{'$sort':{'room_name':0x1}}]:_0x3b82a5=[{'$match':{'name':_0x404182,'status':'Enabled'}},{'$group':{'_id':_0x142f4f(0x212),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0xdead06=await warehouse['aggregate'](_0x3b82a5);_0x529bdd[_0x142f4f(0x217)](0xc8)[_0x142f4f(0x1fc)](_0xdead06);}catch(_0x4b53f1){_0x529bdd['status'](0x190)[_0x142f4f(0x1fc)]({'errorMessage':_0x4b53f1[_0x142f4f(0x1dc)]});}}),router['post'](a0_0x36dbf4(0x1f1),async(_0x5734af,_0xa7580b)=>{const _0x5cb4cd=a0_0x36dbf4;try{const {warehouse_name:_0x573620,cat:_0x4d2945,valNew:_0x526e10}=_0x5734af[_0x5cb4cd(0x210)];var _0x239893='',_0x4ae562='';if(_0x4d2945==_0x5cb4cd(0x1f5))_0x239893=_0x5cb4cd(0x1d1),_0x526e10==_0x5cb4cd(0x1fa)?_0x4ae562=[{'$match':{'status':_0x5cb4cd(0x1df),'warehouse_category':_0x4d2945,'name':{'$ne':_0x239893},'name':_0x5cb4cd(0x1e1)}},{'$group':{'_id':'$name','room_name':{'$first':_0x5cb4cd(0x1e6)}}},{'$sort':{'room_name':0x1}}]:_0x4ae562=[{'$match':{'status':_0x5cb4cd(0x1df),'warehouse_category':_0x4d2945,'name':{'$ne':_0x239893}}},{'$group':{'_id':_0x5cb4cd(0x1e6),'room_name':{'$first':_0x5cb4cd(0x1e6)}}},{'$sort':{'room_name':0x1}}];else _0x4d2945==_0x5cb4cd(0x1f6)?(_0x239893=_0x5cb4cd(0x1e7),_0x4ae562=[{'$match':{'status':_0x5cb4cd(0x1df),'warehouse_category':_0x4d2945,'name':{'$ne':_0x239893}}},{'$group':{'_id':_0x5cb4cd(0x1e6),'room_name':{'$first':_0x5cb4cd(0x1e6)}}},{'$sort':{'room_name':0x1}}]):_0x4ae562=[{'$match':{'status':_0x5cb4cd(0x1df)}},{'$group':{'_id':'$name','room_name':{'$first':_0x5cb4cd(0x1e6)}}},{'$sort':{'room_name':0x1}}];const _0x121a88=await warehouse[_0x5cb4cd(0x204)](_0x4ae562);_0xa7580b['status'](0xc8)[_0x5cb4cd(0x1fc)](_0x121a88);}catch(_0x46ac04){_0xa7580b[_0x5cb4cd(0x217)](0x190)[_0x5cb4cd(0x1fc)]({'errorMessage':_0x46ac04[_0x5cb4cd(0x1dc)]}),console['log'](_0x46ac04);}}),router[a0_0x36dbf4(0x20d)](a0_0x36dbf4(0x206),async(_0x476ebc,_0x405780)=>{const _0x41b749=a0_0x36dbf4;try{const {warehouse_name:_0x26013d,cat:_0x113b66}=_0x476ebc[_0x41b749(0x210)],_0x4a9975=await warehouse[_0x41b749(0x204)]([{'$match':{'status':_0x41b749(0x1df),'warehouse_category':_0x113b66,'name':_0x26013d}},{'$group':{'_id':_0x41b749(0x1e3),'room_name':{'$first':_0x41b749(0x1e3)}}},{'$sort':{'room_name':0x1}}]);_0x405780[_0x41b749(0x217)](0xc8)[_0x41b749(0x1fc)](_0x4a9975);}catch(_0x3820d3){_0x405780[_0x41b749(0x217)](0x190)[_0x41b749(0x1fc)]({'errorMessage':_0x3820d3['message']});}}),module[a0_0x36dbf4(0x1cf)]=router;function a0_0x3e80(){const _0x2588d5=['/Rooms_data3','$$product.product_quantity','multer','28190472OxZWsz','$products','7010106PXiRaD','$product_details.type','post','email','$product_details.bin','body','express','$_id','5ocQwFx','2070128FAeFju','product','/MapData2','status','log','timezones-list','$product_details.product_stock','timezone','$_id.floorlevel','exports','$_id.type','Return\x20Goods','German','success','Arabic\x20(ae)','$_id.bay','errors','French','Arabic','84102Fviicv','Spanish','$product_details','message','566879JgVMvS','$product_details.floorlevel','Enabled','$product_details.bay','DRY\x20STORAGE','All','$room','flash','12321820iCKLXQ','$name','QA\x20Warehouse','268MGPjKM','master','Portuguese','user','18LUJkgM','$count','$product_details.product_code','warehousemap_incoming','/Rooms_data','/Rooms_data2','$_id.bin','staff','Router','Raw\x20Materials','Finished\x20Goods','Hindi','6PIaSRk','44ZewaLb','pack','findOne','json','language','Chinese','$product_details.product_name','$product_details.batch_code','14245520xfFGvt','$product_code','../models/all_models','aggregate','toLocaleString'];a0_0x3e80=function(){return _0x2588d5;};return a0_0x3e80();}