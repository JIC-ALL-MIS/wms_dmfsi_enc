function a0_0x3328(){const _0x5a1ec1=['/MapData2','Arabic','2046000BdqStg','express','$room','Router','QA\x20Warehouse','Raw\x20Materials','178096NubmAY','22080DroyaD','../middleware/auth','$count','DRY\x20STORAGE','raw','/Rooms_data2','timezones-list','French','Chinese','../public/language/languages.json','user','timezone','9AwSyRa','$_id.bay','warehouse','$product_details.type','log','29860kAzZOk','English\x20(US)','Spanish','pack','email','English','Enabled','language','findOne','$product_details.bin','$product_details.batch_code','body','errors','$product_details.product_stock','multer','$_id.floorlevel','$_id','find','626120oOjlrr','flash','German','Hindi','$product_details.bay','/Rooms_data','Rack\x20A','Portuguese\x20(BR)','$_id.type','2JBShzK','$product_details.product_name','/MapData','$$product.product_quantity','Arabic\x20(ae)','message','master','aggregate','$product_details.expiry_date','112yBmDGM','$product_details.product_code','post','$_id.product','json','374648YODita','exports','success','status','product','$name','109194OPnKJf','warehousemap_incoming'];a0_0x3328=function(){return _0x5a1ec1;};return a0_0x3328();}const a0_0x52d83d=a0_0x3983;(function(_0x3ac011,_0x255920){const _0x1630e7=a0_0x3983,_0x14f63e=_0x3ac011();while(!![]){try{const _0x2035ee=parseInt(_0x1630e7(0x1a9))/0x1+-parseInt(_0x1630e7(0x18b))/0x2*(-parseInt(_0x1630e7(0x19f))/0x3)+-parseInt(_0x1630e7(0x1bb))/0x4+parseInt(_0x1630e7(0x182))/0x5+-parseInt(_0x1630e7(0x1aa))/0x6*(parseInt(_0x1630e7(0x194))/0x7)+parseInt(_0x1630e7(0x199))/0x8*(parseInt(_0x1630e7(0x1b6))/0x9)+-parseInt(_0x1630e7(0x1a3))/0xa;if(_0x2035ee===_0x255920)break;else _0x14f63e['push'](_0x14f63e['shift']());}catch(_0x53657c){_0x14f63e['push'](_0x14f63e['shift']());}}}(a0_0x3328,0x1c394));const express=require(a0_0x52d83d(0x1a4)),app=express(),router=express[a0_0x52d83d(0x1a6)](),multer=require(a0_0x52d83d(0x17e)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require(a0_0x52d83d(0x1ab));function a0_0x3983(_0x570a14,_0x4da5ae){const _0x3328cb=a0_0x3328();return a0_0x3983=function(_0x398317,_0x4c673f){_0x398317=_0x398317-0x175;let _0x174cee=_0x3328cb[_0x398317];return _0x174cee;},a0_0x3983(_0x570a14,_0x4da5ae);}var timezones=require(a0_0x52d83d(0x1b0));const users=require(a0_0x52d83d(0x1b3));router['get']('/view',auth,async(_0x2d72de,_0xa016)=>{const _0x3e3f1f=a0_0x52d83d;try{const {username:_0x81c9,email:_0x21b148,role:_0x2c09d8}=_0x2d72de[_0x3e3f1f(0x1b4)],_0x27bc15=_0x2d72de['user'],_0x2442a5=await profile[_0x3e3f1f(0x178)]({'email':_0x27bc15[_0x3e3f1f(0x1bf)]}),_0x51c2a1=await master_shop[_0x3e3f1f(0x181)]();console[_0x3e3f1f(0x1ba)](_0x3e3f1f(0x191),_0x51c2a1);let _0x535c37;if(_0x27bc15['role']=='staff'){const _0x593c23=await staff['findOne']({'email':_0x27bc15['email']});_0x535c37=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x593c23[_0x3e3f1f(0x1b8)]}},{'$group':{'_id':_0x3e3f1f(0x19e),'name':{'$first':_0x3e3f1f(0x19e)}}}]);}else _0x535c37=await warehouse[_0x3e3f1f(0x192)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x3e3f1f(0x19e),'name':{'$first':'$name'}}}]);const _0x3d1c17=new Date()['toLocaleString']('en-US',{'timeZone':_0x51c2a1[0x0][_0x3e3f1f(0x1b5)]});console[_0x3e3f1f(0x1ba)](_0x3e3f1f(0x1b5),_0x3d1c17);if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x1bc)){var _0xea0d7c=users[_0x3e3f1f(0x175)];console[_0x3e3f1f(0x1ba)](_0xea0d7c);}else{if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x185))var _0xea0d7c=users[_0x3e3f1f(0x185)];else{if(_0x51c2a1[0x0]['language']==_0x3e3f1f(0x184))var _0xea0d7c=users['German'];else{if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x1bd))var _0xea0d7c=users['Spanish'];else{if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x1b1))var _0xea0d7c=users['French'];else{if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x189))var _0xea0d7c=users['Portuguese'];else{if(_0x51c2a1[0x0]['language']==_0x3e3f1f(0x1b2))var _0xea0d7c=users['Chinese'];else{if(_0x51c2a1[0x0][_0x3e3f1f(0x177)]==_0x3e3f1f(0x18f))var _0xea0d7c=users[_0x3e3f1f(0x1a2)];}}}}}}}_0xa016['render'](_0x3e3f1f(0x1a0),{'success':_0x2d72de['flash'](_0x3e3f1f(0x19b)),'errors':_0x2d72de[_0x3e3f1f(0x183)](_0x3e3f1f(0x17c)),'role':_0x27bc15,'profile':_0x2442a5,'master_shop':_0x51c2a1,'timezones':timezones,'language':_0xea0d7c,'warehouse':_0x535c37});}catch(_0x2c3854){console['log'](_0x2c3854),_0xa016[_0x3e3f1f(0x19c)](0xc8)[_0x3e3f1f(0x198)]({'message':_0x2c3854[_0x3e3f1f(0x190)]});}}),router['post'](a0_0x52d83d(0x18d),async(_0x3f0acb,_0xdb67e)=>{const _0x382efc=a0_0x52d83d,{warehouseNew:_0x48a2a9,rooms:_0x15e62e,Type:_0x570451}=_0x3f0acb[_0x382efc(0x17b)],_0x5a60bb=await warehouse[_0x382efc(0x192)]([{'$unwind':'$product_details'},{'$match':{'name':_0x48a2a9,'room':_0x15e62e,'product_details.type':_0x570451}},{'$group':{'_id':{'bay':_0x382efc(0x186),'bin':_0x382efc(0x179),'type':_0x382efc(0x1b9),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x382efc(0x17d),'product_code':_0x382efc(0x195)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x382efc(0x17d),0x0]},'then':_0x382efc(0x17d),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x382efc(0x1b7),'bin':'$_id.bin','type':_0x382efc(0x18a),'floorlevel':_0x382efc(0x17f),'products':{'$filter':{'input':'$products','as':_0x382efc(0x19d),'cond':{'$gt':[_0x382efc(0x18e),0x0]}}},'totalQuantity':0x1}}]);_0xdb67e[_0x382efc(0x198)](_0x5a60bb);}),router[a0_0x52d83d(0x196)](a0_0x52d83d(0x1a1),async(_0x562bb2,_0x159679)=>{const _0x4dfe03=a0_0x52d83d,{warehouseNew:_0x6fd128,rooms:_0x168fc4,room_cat:_0x3dd4a2}=_0x562bb2[_0x4dfe03(0x17b)];let _0x4a94dd;if(_0x3dd4a2=='All')_0x4a94dd=await warehouse[_0x4dfe03(0x192)]([{'$unwind':'$product_details'},{'$match':{'name':_0x6fd128}},{'$group':{'_id':{'bay':_0x4dfe03(0x186),'product':_0x4dfe03(0x18c),'expiry':_0x4dfe03(0x193)},'count':{'$sum':_0x4dfe03(0x17d)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x4dfe03(0x193)},'batch_code':{'$first':_0x4dfe03(0x17a)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x4dfe03(0x1b7),'products':{'$push':{'product':_0x4dfe03(0x197),'quantity':_0x4dfe03(0x1ac),'production_date':'$production_date','expiry_date':'$expiry_date','batch_code':'$batch_code','product_code':'$product_code'}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x4dfe03(0x180),'products':0x1,'totalQuantity':0x1}}]),console[_0x4dfe03(0x1ba)](_0x3dd4a2);else{}_0x159679[_0x4dfe03(0x198)](_0x4a94dd);}),router[a0_0x52d83d(0x196)](a0_0x52d83d(0x187),async(_0x146595,_0x2f44c6)=>{const _0xba8378=a0_0x52d83d;try{const {warehouse_name:_0x105118,A:_0x3b4d14,B:_0x2221ce}=_0x146595[_0xba8378(0x17b)];var _0x4b14b2='';_0x3b4d14==_0xba8378(0x1ae)?_0x2221ce==_0xba8378(0x1be)?_0x4b14b2=[{'$match':{'name':_0x105118,'status':_0xba8378(0x176),'room':_0xba8378(0x188)}},{'$group':{'_id':_0xba8378(0x180),'room_name':{'$first':_0xba8378(0x1a5)}}},{'$sort':{'room_name':0x1}}]:_0x4b14b2=[{'$match':{'name':_0x105118,'status':'Enabled'}},{'$group':{'_id':_0xba8378(0x180),'room_name':{'$first':_0xba8378(0x1a5)}}},{'$sort':{'room_name':0x1}}]:_0x4b14b2=[{'$match':{'name':_0x105118,'status':'Enabled'}},{'$group':{'_id':_0xba8378(0x180),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x59bcbf=await warehouse['aggregate'](_0x4b14b2);_0x2f44c6[_0xba8378(0x19c)](0xc8)[_0xba8378(0x198)](_0x59bcbf);}catch(_0x10f35f){_0x2f44c6['status'](0x190)[_0xba8378(0x198)]({'errorMessage':_0x10f35f['message']});}}),router[a0_0x52d83d(0x196)](a0_0x52d83d(0x1af),async(_0x11b851,_0x371275)=>{const _0x2ca834=a0_0x52d83d;try{const {warehouse_name:_0x118e24,cat:_0x22db73,valNew:_0x3e64cc}=_0x11b851['body'];var _0x51c15d='',_0x1171e6='';if(_0x22db73==_0x2ca834(0x1a8))_0x51c15d='Return\x20Goods',_0x3e64cc=='pack'?_0x1171e6=[{'$match':{'status':_0x2ca834(0x176),'warehouse_category':_0x22db73,'name':{'$ne':_0x51c15d},'name':_0x2ca834(0x1ad)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x1171e6=[{'$match':{'status':_0x2ca834(0x176),'warehouse_category':_0x22db73,'name':{'$ne':_0x51c15d}}},{'$group':{'_id':'$name','room_name':{'$first':_0x2ca834(0x19e)}}},{'$sort':{'room_name':0x1}}];else _0x22db73=='Finished\x20Goods'?(_0x51c15d=_0x2ca834(0x1a7),_0x1171e6=[{'$match':{'status':_0x2ca834(0x176),'warehouse_category':_0x22db73,'name':{'$ne':_0x51c15d}}},{'$group':{'_id':_0x2ca834(0x19e),'room_name':{'$first':_0x2ca834(0x19e)}}},{'$sort':{'room_name':0x1}}]):_0x1171e6=[{'$match':{'status':_0x2ca834(0x176)}},{'$group':{'_id':_0x2ca834(0x19e),'room_name':{'$first':_0x2ca834(0x19e)}}},{'$sort':{'room_name':0x1}}];const _0x4f8dbb=await warehouse[_0x2ca834(0x192)](_0x1171e6);_0x371275[_0x2ca834(0x19c)](0xc8)[_0x2ca834(0x198)](_0x4f8dbb);}catch(_0x2188e1){_0x371275[_0x2ca834(0x19c)](0x190)['json']({'errorMessage':_0x2188e1['message']}),console[_0x2ca834(0x1ba)](_0x2188e1);}}),router[a0_0x52d83d(0x196)]('/Rooms_data3',async(_0x5369e0,_0x22be54)=>{const _0x4063ec=a0_0x52d83d;try{const {warehouse_name:_0x2463ca,cat:_0x376ad2}=_0x5369e0[_0x4063ec(0x17b)],_0x7d024=await warehouse[_0x4063ec(0x192)]([{'$match':{'status':'Enabled','warehouse_category':_0x376ad2,'name':_0x2463ca}},{'$group':{'_id':_0x4063ec(0x1a5),'room_name':{'$first':_0x4063ec(0x1a5)}}},{'$sort':{'room_name':0x1}}]);_0x22be54['status'](0xc8)[_0x4063ec(0x198)](_0x7d024);}catch(_0x57f2f5){_0x22be54[_0x4063ec(0x19c)](0x190)['json']({'errorMessage':_0x57f2f5[_0x4063ec(0x190)]});}}),module[a0_0x52d83d(0x19a)]=router;