const a0_0x56617d=a0_0x1a90;function a0_0x1a90(_0x5e85bf,_0x26f177){const _0x474fc7=a0_0x474f();return a0_0x1a90=function(_0x1a907c,_0x1e1480){_0x1a907c=_0x1a907c-0x1ad;let _0x49508f=_0x474fc7[_0x1a907c];return _0x49508f;},a0_0x1a90(_0x5e85bf,_0x26f177);}function a0_0x474f(){const _0xa704bc=['DRY\x20STORAGE','multer','pack','$count','$product_details.floorlevel','Raw\x20Materials','message','$name','$_id.bay','/MapData2','../public/language/languages.json','English\x20(US)','raw','QA\x20Warehouse','en-US','French','$product_details.bay','success','Portuguese','aggregate','German','json','$product_details.product_name','$product_code','$_id.floorlevel','Spanish','role','/view','Rack\x20A','language','English','toLocaleString','$product_details.batch_code','Finished\x20Goods','../middleware/auth','email','status','$expiry_date','render','find','23657940YXVeMX','/Rooms_data2','express','product','Arabic\x20(ae)','Enabled','3376764pLapUy','$product_details.product_code','5954976CSLzoJ','$product_details.product_stock','timezone','$_id.bin','8964046wpfiBI','$_id.type','$batch_code','/MapData','Portuguese\x20(BR)','user','1226504NALNsg','$room','$product_details.type','warehousemap_incoming','$product_details.expiry_date','/Rooms_data3','$$product.product_quantity','$_id.product','body','All','log','Chinese','../models/all_models','$_id','15jjOSGK','3lEMEpF','warehouse','findOne','$product_details','post','staff','138316KGCPnQ','240593JGuDJA','Router'];a0_0x474f=function(){return _0xa704bc;};return a0_0x474f();}(function(_0x338ead,_0x10e375){const _0x3089de=a0_0x1a90,_0x1a3158=_0x338ead();while(!![]){try{const _0x5a7dea=parseInt(_0x3089de(0x1b1))/0x1+-parseInt(_0x3089de(0x1ed))/0x2*(-parseInt(_0x3089de(0x1fc))/0x3)+-parseInt(_0x3089de(0x1b0))/0x4*(parseInt(_0x3089de(0x1fb))/0x5)+-parseInt(_0x3089de(0x1e1))/0x6+-parseInt(_0x3089de(0x1e7))/0x7+-parseInt(_0x3089de(0x1e3))/0x8+parseInt(_0x3089de(0x1db))/0x9;if(_0x5a7dea===_0x10e375)break;else _0x1a3158['push'](_0x1a3158['shift']());}catch(_0x16cfda){_0x1a3158['push'](_0x1a3158['shift']());}}}(a0_0x474f,0xc11f0));const express=require(a0_0x56617d(0x1dd)),app=express(),router=express[a0_0x56617d(0x1b2)](),multer=require(a0_0x56617d(0x1b4)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x56617d(0x1f9)),auth=require(a0_0x56617d(0x1d5));var timezones=require('timezones-list');const users=require(a0_0x56617d(0x1bd));router['get'](a0_0x56617d(0x1ce),auth,async(_0x35ef6c,_0x3af8cd)=>{const _0x401880=a0_0x56617d;try{const {username:_0x31ab7e,email:_0x87d5eb,role:_0x276db5}=_0x35ef6c[_0x401880(0x1ec)],_0x1902e4=_0x35ef6c[_0x401880(0x1ec)],_0x2fa376=await profile[_0x401880(0x1fe)]({'email':_0x1902e4[_0x401880(0x1d6)]}),_0x1efdff=await master_shop[_0x401880(0x1da)]();console[_0x401880(0x1f7)]('master',_0x1efdff);let _0x3a3f26;if(_0x1902e4[_0x401880(0x1cd)]==_0x401880(0x1af)){const _0x1e0357=await staff[_0x401880(0x1fe)]({'email':_0x1902e4[_0x401880(0x1d6)]});_0x3a3f26=await warehouse['aggregate']([{'$match':{'status':_0x401880(0x1e0),'name':_0x1e0357[_0x401880(0x1fd)]}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x3a3f26=await warehouse['aggregate']([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0x401880(0x1ba)}}}]);const _0x44ea03=new Date()[_0x401880(0x1d2)](_0x401880(0x1c1),{'timeZone':_0x1efdff[0x0][_0x401880(0x1e5)]});console['log'](_0x401880(0x1e5),_0x44ea03);if(_0x1efdff[0x0][_0x401880(0x1d0)]==_0x401880(0x1be)){var _0x8aa9a9=users[_0x401880(0x1d1)];console[_0x401880(0x1f7)](_0x8aa9a9);}else{if(_0x1efdff[0x0][_0x401880(0x1d0)]=='Hindi')var _0x8aa9a9=users['Hindi'];else{if(_0x1efdff[0x0]['language']==_0x401880(0x1c7))var _0x8aa9a9=users[_0x401880(0x1c7)];else{if(_0x1efdff[0x0][_0x401880(0x1d0)]==_0x401880(0x1cc))var _0x8aa9a9=users[_0x401880(0x1cc)];else{if(_0x1efdff[0x0][_0x401880(0x1d0)]==_0x401880(0x1c2))var _0x8aa9a9=users[_0x401880(0x1c2)];else{if(_0x1efdff[0x0]['language']==_0x401880(0x1eb))var _0x8aa9a9=users[_0x401880(0x1c5)];else{if(_0x1efdff[0x0][_0x401880(0x1d0)]=='Chinese')var _0x8aa9a9=users[_0x401880(0x1f8)];else{if(_0x1efdff[0x0]['language']==_0x401880(0x1df))var _0x8aa9a9=users['Arabic'];}}}}}}}_0x3af8cd[_0x401880(0x1d9)](_0x401880(0x1f0),{'success':_0x35ef6c['flash'](_0x401880(0x1c4)),'errors':_0x35ef6c['flash']('errors'),'role':_0x1902e4,'profile':_0x2fa376,'master_shop':_0x1efdff,'timezones':timezones,'language':_0x8aa9a9,'warehouse':_0x3a3f26});}catch(_0x124a15){console['log'](_0x124a15),_0x3af8cd[_0x401880(0x1d7)](0xc8)[_0x401880(0x1c8)]({'message':_0x124a15[_0x401880(0x1b9)]});}}),router['post'](a0_0x56617d(0x1ea),async(_0x34ae1a,_0x242e86)=>{const _0x1ab9b7=a0_0x56617d,{warehouseNew:_0x378918,rooms:_0x3d4cd9,Type:_0x401182}=_0x34ae1a[_0x1ab9b7(0x1f5)],_0x3a6598=await warehouse[_0x1ab9b7(0x1c6)]([{'$unwind':'$product_details'},{'$match':{'name':_0x378918,'room':_0x3d4cd9,'product_details.type':_0x401182}},{'$group':{'_id':{'bay':_0x1ab9b7(0x1c3),'bin':'$product_details.bin','type':_0x1ab9b7(0x1ef),'floorlevel':_0x1ab9b7(0x1b7)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x1ab9b7(0x1e4),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x1ab9b7(0x1e4),0x0]},'then':_0x1ab9b7(0x1e4),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x1ab9b7(0x1bb),'bin':_0x1ab9b7(0x1e6),'type':_0x1ab9b7(0x1e8),'floorlevel':_0x1ab9b7(0x1cb),'products':{'$filter':{'input':'$products','as':_0x1ab9b7(0x1de),'cond':{'$gt':[_0x1ab9b7(0x1f3),0x0]}}},'totalQuantity':0x1}}]);_0x242e86[_0x1ab9b7(0x1c8)](_0x3a6598);}),router[a0_0x56617d(0x1ae)](a0_0x56617d(0x1bc),async(_0x2145a7,_0x4d2d5c)=>{const _0x474919=a0_0x56617d,{warehouseNew:_0x228278,rooms:_0x3b4dc8,room_cat:_0x3cdb38}=_0x2145a7['body'];let _0x2eadce;if(_0x3cdb38==_0x474919(0x1f6))_0x2eadce=await warehouse['aggregate']([{'$unwind':_0x474919(0x1ad)},{'$match':{'name':_0x228278}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x474919(0x1c9),'expiry':_0x474919(0x1f1)},'count':{'$sum':_0x474919(0x1e4)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x474919(0x1f1)},'batch_code':{'$first':_0x474919(0x1d3)},'product_code':{'$first':_0x474919(0x1e2)}}},{'$group':{'_id':_0x474919(0x1bb),'products':{'$push':{'product':_0x474919(0x1f4),'quantity':_0x474919(0x1b6),'production_date':'$production_date','expiry_date':_0x474919(0x1d8),'batch_code':_0x474919(0x1e9),'product_code':_0x474919(0x1ca)}},'totalQuantity':{'$sum':_0x474919(0x1b6)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x474919(0x1fa),'products':0x1,'totalQuantity':0x1}}]),console[_0x474919(0x1f7)](_0x3cdb38);else{}_0x4d2d5c[_0x474919(0x1c8)](_0x2eadce);}),router[a0_0x56617d(0x1ae)]('/Rooms_data',async(_0x200f88,_0x1292a7)=>{const _0x418282=a0_0x56617d;try{const {warehouse_name:_0x2fc3b3,A:_0x1db143,B:_0x4ac1b8}=_0x200f88[_0x418282(0x1f5)];var _0x57b125='';_0x1db143==_0x418282(0x1bf)?_0x4ac1b8==_0x418282(0x1b5)?_0x57b125=[{'$match':{'name':_0x2fc3b3,'status':'Enabled','room':_0x418282(0x1cf)}},{'$group':{'_id':_0x418282(0x1fa),'room_name':{'$first':_0x418282(0x1ee)}}},{'$sort':{'room_name':0x1}}]:_0x57b125=[{'$match':{'name':_0x2fc3b3,'status':_0x418282(0x1e0)}},{'$group':{'_id':_0x418282(0x1fa),'room_name':{'$first':_0x418282(0x1ee)}}},{'$sort':{'room_name':0x1}}]:_0x57b125=[{'$match':{'name':_0x2fc3b3,'status':_0x418282(0x1e0)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x418282(0x1ee)}}},{'$sort':{'room_name':0x1}}];const _0x5b274e=await warehouse[_0x418282(0x1c6)](_0x57b125);_0x1292a7[_0x418282(0x1d7)](0xc8)[_0x418282(0x1c8)](_0x5b274e);}catch(_0x19ff3d){_0x1292a7[_0x418282(0x1d7)](0x190)[_0x418282(0x1c8)]({'errorMessage':_0x19ff3d[_0x418282(0x1b9)]});}}),router[a0_0x56617d(0x1ae)](a0_0x56617d(0x1dc),async(_0x62422d,_0x28de68)=>{const _0x42e3b3=a0_0x56617d;try{const {warehouse_name:_0x308e2c,cat:_0x3967fb,valNew:_0x5e9612}=_0x62422d[_0x42e3b3(0x1f5)];var _0x12fea0='',_0x31f541='';if(_0x3967fb==_0x42e3b3(0x1b8))_0x12fea0='Return\x20Goods',_0x5e9612==_0x42e3b3(0x1b5)?_0x31f541=[{'$match':{'status':'Enabled','warehouse_category':_0x3967fb,'name':{'$ne':_0x12fea0},'name':_0x42e3b3(0x1b3)}},{'$group':{'_id':_0x42e3b3(0x1ba),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x31f541=[{'$match':{'status':_0x42e3b3(0x1e0),'warehouse_category':_0x3967fb,'name':{'$ne':_0x12fea0}}},{'$group':{'_id':_0x42e3b3(0x1ba),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x3967fb==_0x42e3b3(0x1d4)?(_0x12fea0=_0x42e3b3(0x1c0),_0x31f541=[{'$match':{'status':'Enabled','warehouse_category':_0x3967fb,'name':{'$ne':_0x12fea0}}},{'$group':{'_id':'$name','room_name':{'$first':_0x42e3b3(0x1ba)}}},{'$sort':{'room_name':0x1}}]):_0x31f541=[{'$match':{'status':_0x42e3b3(0x1e0)}},{'$group':{'_id':_0x42e3b3(0x1ba),'room_name':{'$first':_0x42e3b3(0x1ba)}}},{'$sort':{'room_name':0x1}}];const _0x3d279f=await warehouse[_0x42e3b3(0x1c6)](_0x31f541);_0x28de68['status'](0xc8)[_0x42e3b3(0x1c8)](_0x3d279f);}catch(_0x402e7f){_0x28de68[_0x42e3b3(0x1d7)](0x190)[_0x42e3b3(0x1c8)]({'errorMessage':_0x402e7f[_0x42e3b3(0x1b9)]}),console['log'](_0x402e7f);}}),router['post'](a0_0x56617d(0x1f2),async(_0x4c8643,_0x4a5577)=>{const _0x5b3cbb=a0_0x56617d;try{const {warehouse_name:_0x3f888a,cat:_0x19448f}=_0x4c8643[_0x5b3cbb(0x1f5)],_0x52a200=await warehouse[_0x5b3cbb(0x1c6)]([{'$match':{'status':'Enabled','warehouse_category':_0x19448f,'name':_0x3f888a}},{'$group':{'_id':_0x5b3cbb(0x1ee),'room_name':{'$first':_0x5b3cbb(0x1ee)}}},{'$sort':{'room_name':0x1}}]);_0x4a5577[_0x5b3cbb(0x1d7)](0xc8)[_0x5b3cbb(0x1c8)](_0x52a200);}catch(_0x29dc4f){_0x4a5577[_0x5b3cbb(0x1d7)](0x190)[_0x5b3cbb(0x1c8)]({'errorMessage':_0x29dc4f[_0x5b3cbb(0x1b9)]});}}),module['exports']=router;