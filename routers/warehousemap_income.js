const a0_0x47a948=a0_0x29fa;(function(_0x4cb095,_0x4bac51){const _0x2326b9=a0_0x29fa,_0x3138b2=_0x4cb095();while(!![]){try{const _0x22902f=-parseInt(_0x2326b9(0xe2))/0x1+parseInt(_0x2326b9(0xe9))/0x2*(parseInt(_0x2326b9(0xf3))/0x3)+-parseInt(_0x2326b9(0x104))/0x4+parseInt(_0x2326b9(0xdb))/0x5*(-parseInt(_0x2326b9(0xe4))/0x6)+-parseInt(_0x2326b9(0xc0))/0x7+-parseInt(_0x2326b9(0xd3))/0x8*(parseInt(_0x2326b9(0xdc))/0x9)+-parseInt(_0x2326b9(0xbb))/0xa*(-parseInt(_0x2326b9(0xd7))/0xb);if(_0x22902f===_0x4bac51)break;else _0x3138b2['push'](_0x3138b2['shift']());}catch(_0x5c4e54){_0x3138b2['push'](_0x3138b2['shift']());}}}(a0_0x3f55,0x59a24));const express=require(a0_0x47a948(0xe5)),app=express(),router=express['Router'](),multer=require(a0_0x47a948(0xda)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x47a948(0xd9)),auth=require(a0_0x47a948(0xba));var timezones=require(a0_0x47a948(0xce));const users=require(a0_0x47a948(0xf7));function a0_0x29fa(_0x2dae99,_0x9168b6){const _0x3f55fe=a0_0x3f55();return a0_0x29fa=function(_0x29fa82,_0x1567b1){_0x29fa82=_0x29fa82-0xb4;let _0x453b24=_0x3f55fe[_0x29fa82];return _0x453b24;},a0_0x29fa(_0x2dae99,_0x9168b6);}function a0_0x3f55(){const _0x263caa=['$product_details.bay','$product_details.product_code','email','timezones-list','/Rooms_data','json','get','Chinese','160IdHggF','/MapData2','user','success','44gmKmis','All','../models/all_models','multer','1409335eNxpKn','269019eSzeby','aggregate','$_id.bin','$name','$room','pack','413774iyWBxz','/view','6oIAeNC','express','Rack\x20A','English','find','189646CweJeV','log','$product_details.batch_code','$product_code','Portuguese\x20(BR)','status','/MapData','$product_details.product_stock','post','German','3JMpHIk','Finished\x20Goods','en-US','$product_details.floorlevel','../public/language/languages.json','errors','Arabic\x20(ae)','Spanish','$_id.product','$count','warehouse','Arabic','French','raw','role','language','$products','1357476AwjyHc','Portuguese','flash','$product_details','$product_details.expiry_date','/Rooms_data3','$_id','$product_details.product_name','../middleware/auth','4915150gvvctb','message','Return\x20Goods','staff','Enabled','426391mnLDbw','render','$production_date','product','QA\x20Warehouse','/Rooms_data2','body','English\x20(US)','Raw\x20Materials','findOne','Hindi'];a0_0x3f55=function(){return _0x263caa;};return a0_0x3f55();}router[a0_0x47a948(0xd1)](a0_0x47a948(0xe3),auth,async(_0x577b19,_0x502a6c)=>{const _0x17e0a1=a0_0x47a948;try{const {username:_0x28a16f,email:_0x30ff3c,role:_0x17a652}=_0x577b19[_0x17e0a1(0xd5)],_0x3d7457=_0x577b19['user'],_0x3c4757=await profile[_0x17e0a1(0xc9)]({'email':_0x3d7457[_0x17e0a1(0xcd)]}),_0x37f918=await master_shop[_0x17e0a1(0xe8)]();console['log']('master',_0x37f918);let _0x20250e;if(_0x3d7457[_0x17e0a1(0x101)]==_0x17e0a1(0xbe)){const _0x46393d=await staff[_0x17e0a1(0xc9)]({'email':_0x3d7457[_0x17e0a1(0xcd)]});_0x20250e=await warehouse['aggregate']([{'$match':{'status':_0x17e0a1(0xbf),'name':_0x46393d[_0x17e0a1(0xfd)]}},{'$group':{'_id':'$name','name':{'$first':_0x17e0a1(0xdf)}}}]);}else _0x20250e=await warehouse[_0x17e0a1(0xdd)]([{'$match':{'status':_0x17e0a1(0xbf)}},{'$group':{'_id':_0x17e0a1(0xdf),'name':{'$first':_0x17e0a1(0xdf)}}}]);const _0x38dbc9=new Date()['toLocaleString'](_0x17e0a1(0xf5),{'timeZone':_0x37f918[0x0]['timezone']});console[_0x17e0a1(0xea)]('timezone',_0x38dbc9);if(_0x37f918[0x0]['language']==_0x17e0a1(0xc7)){var _0x542ece=users[_0x17e0a1(0xe7)];console['log'](_0x542ece);}else{if(_0x37f918[0x0]['language']==_0x17e0a1(0xca))var _0x542ece=users[_0x17e0a1(0xca)];else{if(_0x37f918[0x0][_0x17e0a1(0x102)]==_0x17e0a1(0xf2))var _0x542ece=users[_0x17e0a1(0xf2)];else{if(_0x37f918[0x0][_0x17e0a1(0x102)]=='Spanish')var _0x542ece=users[_0x17e0a1(0xfa)];else{if(_0x37f918[0x0][_0x17e0a1(0x102)]==_0x17e0a1(0xff))var _0x542ece=users['French'];else{if(_0x37f918[0x0][_0x17e0a1(0x102)]==_0x17e0a1(0xed))var _0x542ece=users[_0x17e0a1(0x105)];else{if(_0x37f918[0x0]['language']==_0x17e0a1(0xd2))var _0x542ece=users[_0x17e0a1(0xd2)];else{if(_0x37f918[0x0][_0x17e0a1(0x102)]==_0x17e0a1(0xf9))var _0x542ece=users[_0x17e0a1(0xfe)];}}}}}}}_0x502a6c[_0x17e0a1(0xc1)]('warehousemap_incoming',{'success':_0x577b19['flash'](_0x17e0a1(0xd6)),'errors':_0x577b19[_0x17e0a1(0xb4)](_0x17e0a1(0xf8)),'role':_0x3d7457,'profile':_0x3c4757,'master_shop':_0x37f918,'timezones':timezones,'language':_0x542ece,'warehouse':_0x20250e});}catch(_0x1d3fd5){console[_0x17e0a1(0xea)](_0x1d3fd5),_0x502a6c[_0x17e0a1(0xee)](0xc8)[_0x17e0a1(0xd0)]({'message':_0x1d3fd5[_0x17e0a1(0xbc)]});}}),router[a0_0x47a948(0xf1)](a0_0x47a948(0xef),async(_0xbf43c4,_0x6615e2)=>{const _0x3861b4=a0_0x47a948,{warehouseNew:_0x1dd4da,rooms:_0x2e1b82,Type:_0x101567}=_0xbf43c4[_0x3861b4(0xc6)],_0x5b90ab=await warehouse['aggregate']([{'$unwind':_0x3861b4(0xb5)},{'$match':{'name':_0x1dd4da,'room':_0x2e1b82,'product_details.type':_0x101567}},{'$group':{'_id':{'bay':_0x3861b4(0xcb),'bin':'$product_details.bin','type':'$product_details.type','floorlevel':_0x3861b4(0xf6)},'products':{'$push':{'product_name':_0x3861b4(0xb9),'product_quantity':_0x3861b4(0xf0),'product_code':_0x3861b4(0xcc)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x3861b4(0xf0),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x3861b4(0xde),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x3861b4(0x103),'as':_0x3861b4(0xc3),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x6615e2[_0x3861b4(0xd0)](_0x5b90ab);}),router[a0_0x47a948(0xf1)](a0_0x47a948(0xd4),async(_0x1a385a,_0x44b178)=>{const _0x520e3f=a0_0x47a948,{warehouseNew:_0x55d6a4,rooms:_0x1fec19,room_cat:_0x2d2f73}=_0x1a385a[_0x520e3f(0xc6)];let _0x406898;if(_0x2d2f73==_0x520e3f(0xd8))_0x406898=await warehouse['aggregate']([{'$unwind':_0x520e3f(0xb5)},{'$match':{'name':_0x55d6a4}},{'$group':{'_id':{'bay':_0x520e3f(0xcb),'product':'$product_details.product_name','expiry':_0x520e3f(0xb6)},'count':{'$sum':_0x520e3f(0xf0)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x520e3f(0xb6)},'batch_code':{'$first':_0x520e3f(0xeb)},'product_code':{'$first':_0x520e3f(0xcc)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x520e3f(0xfb),'quantity':_0x520e3f(0xfc),'production_date':_0x520e3f(0xc2),'expiry_date':'$expiry_date','batch_code':'$batch_code','product_code':_0x520e3f(0xec)}},'totalQuantity':{'$sum':_0x520e3f(0xfc)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x520e3f(0xb8),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x2d2f73);else{}_0x44b178['json'](_0x406898);}),router[a0_0x47a948(0xf1)](a0_0x47a948(0xcf),async(_0x18970e,_0x1f5551)=>{const _0x4ebdca=a0_0x47a948;try{const {warehouse_name:_0x3bb233,A:_0x5c9ac9,B:_0x5df88e}=_0x18970e[_0x4ebdca(0xc6)];var _0x10f330='';_0x5c9ac9==_0x4ebdca(0x100)?_0x5df88e==_0x4ebdca(0xe1)?_0x10f330=[{'$match':{'name':_0x3bb233,'status':_0x4ebdca(0xbf),'room':_0x4ebdca(0xe6)}},{'$group':{'_id':_0x4ebdca(0xb8),'room_name':{'$first':_0x4ebdca(0xe0)}}},{'$sort':{'room_name':0x1}}]:_0x10f330=[{'$match':{'name':_0x3bb233,'status':'Enabled'}},{'$group':{'_id':_0x4ebdca(0xb8),'room_name':{'$first':_0x4ebdca(0xe0)}}},{'$sort':{'room_name':0x1}}]:_0x10f330=[{'$match':{'name':_0x3bb233,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4ebdca(0xe0)}}},{'$sort':{'room_name':0x1}}];const _0x33977a=await warehouse[_0x4ebdca(0xdd)](_0x10f330);_0x1f5551[_0x4ebdca(0xee)](0xc8)[_0x4ebdca(0xd0)](_0x33977a);}catch(_0x1511b9){_0x1f5551[_0x4ebdca(0xee)](0x190)[_0x4ebdca(0xd0)]({'errorMessage':_0x1511b9[_0x4ebdca(0xbc)]});}}),router[a0_0x47a948(0xf1)](a0_0x47a948(0xc5),async(_0x42c953,_0x4b766b)=>{const _0x5ede88=a0_0x47a948;try{const {warehouse_name:_0x3e23b2,cat:_0xba2c9e,valNew:_0x29cb4f}=_0x42c953['body'];var _0x22b82e='',_0x1e91ec='';if(_0xba2c9e==_0x5ede88(0xc8))_0x22b82e=_0x5ede88(0xbd),_0x29cb4f==_0x5ede88(0xe1)?_0x1e91ec=[{'$match':{'status':'Enabled','warehouse_category':_0xba2c9e,'name':{'$ne':_0x22b82e},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x5ede88(0xdf),'room_name':{'$first':_0x5ede88(0xdf)}}},{'$sort':{'room_name':0x1}}]:_0x1e91ec=[{'$match':{'status':'Enabled','warehouse_category':_0xba2c9e,'name':{'$ne':_0x22b82e}}},{'$group':{'_id':'$name','room_name':{'$first':_0x5ede88(0xdf)}}},{'$sort':{'room_name':0x1}}];else _0xba2c9e==_0x5ede88(0xf4)?(_0x22b82e=_0x5ede88(0xc4),_0x1e91ec=[{'$match':{'status':_0x5ede88(0xbf),'warehouse_category':_0xba2c9e,'name':{'$ne':_0x22b82e}}},{'$group':{'_id':_0x5ede88(0xdf),'room_name':{'$first':_0x5ede88(0xdf)}}},{'$sort':{'room_name':0x1}}]):_0x1e91ec=[{'$match':{'status':_0x5ede88(0xbf)}},{'$group':{'_id':_0x5ede88(0xdf),'room_name':{'$first':_0x5ede88(0xdf)}}},{'$sort':{'room_name':0x1}}];const _0x4523bc=await warehouse[_0x5ede88(0xdd)](_0x1e91ec);_0x4b766b[_0x5ede88(0xee)](0xc8)['json'](_0x4523bc);}catch(_0x54cbcf){_0x4b766b[_0x5ede88(0xee)](0x190)['json']({'errorMessage':_0x54cbcf[_0x5ede88(0xbc)]}),console[_0x5ede88(0xea)](_0x54cbcf);}}),router[a0_0x47a948(0xf1)](a0_0x47a948(0xb7),async(_0x46210c,_0x51462a)=>{const _0x6ddcf4=a0_0x47a948;try{const {warehouse_name:_0x112ddc,cat:_0x1b4bb2}=_0x46210c[_0x6ddcf4(0xc6)],_0x81bb1b=await warehouse[_0x6ddcf4(0xdd)]([{'$match':{'status':'Enabled','warehouse_category':_0x1b4bb2,'name':_0x112ddc}},{'$group':{'_id':_0x6ddcf4(0xe0),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x51462a[_0x6ddcf4(0xee)](0xc8)[_0x6ddcf4(0xd0)](_0x81bb1b);}catch(_0x1bf201){_0x51462a[_0x6ddcf4(0xee)](0x190)['json']({'errorMessage':_0x1bf201[_0x6ddcf4(0xbc)]});}}),module['exports']=router;