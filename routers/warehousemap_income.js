function a0_0x1689(_0x50195c,_0xb9700e){const _0x179f50=a0_0x179f();return a0_0x1689=function(_0x168969,_0xa407da){_0x168969=_0x168969-0x15e;let _0x5637a4=_0x179f50[_0x168969];return _0x5637a4;},a0_0x1689(_0x50195c,_0xb9700e);}const a0_0x22902b=a0_0x1689;(function(_0x56dd58,_0x19c560){const _0x4460e4=a0_0x1689,_0x33fb0b=_0x56dd58();while(!![]){try{const _0x1608ff=-parseInt(_0x4460e4(0x16f))/0x1*(parseInt(_0x4460e4(0x19c))/0x2)+-parseInt(_0x4460e4(0x19a))/0x3*(parseInt(_0x4460e4(0x169))/0x4)+-parseInt(_0x4460e4(0x17d))/0x5*(-parseInt(_0x4460e4(0x1ac))/0x6)+parseInt(_0x4460e4(0x17f))/0x7*(-parseInt(_0x4460e4(0x180))/0x8)+parseInt(_0x4460e4(0x18b))/0x9+-parseInt(_0x4460e4(0x177))/0xa*(parseInt(_0x4460e4(0x17c))/0xb)+-parseInt(_0x4460e4(0x1ab))/0xc*(-parseInt(_0x4460e4(0x170))/0xd);if(_0x1608ff===_0x19c560)break;else _0x33fb0b['push'](_0x33fb0b['shift']());}catch(_0x303800){_0x33fb0b['push'](_0x33fb0b['shift']());}}}(a0_0x179f,0xc546b));const express=require(a0_0x22902b(0x1a7)),app=express(),router=express[a0_0x22902b(0x19b)](),multer=require(a0_0x22902b(0x187)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x22902b(0x1a4)),auth=require(a0_0x22902b(0x18c));var timezones=require(a0_0x22902b(0x17a));function a0_0x179f(){const _0x29bb71=['/Rooms_data2','message','master','$product_details.expiry_date','Rack\x20A','640UFZBgu','status','json','timezones-list','/Rooms_data3','142637WGomNZ','370JVZsyA','raw','7EtKbhz','1872424UgIbXP','/MapData2','$product_details.product_code','Arabic\x20(ae)','/view','language','$product_details.bay','multer','$batch_code','Spanish','aggregate','4323528ddvzfX','../middleware/auth','user','exports','$product_details.type','toLocaleString','$expiry_date','English\x20(US)','body','$production_date','German','Hindi','warehousemap_incoming','$product_details.bin','$$product.product_quantity','189969NoNnoa','Router','131624SYzeTJ','$product_details.product_stock','$product_details.floorlevel','English','Raw\x20Materials','$_id.bay','$count','post','../models/all_models','Enabled','$_id','express','$name','findOne','$product_details.batch_code','3324klcyuU','39936IKMtWf','../public/language/languages.json','log','get','DRY\x20STORAGE','$_id.bin','$_id.floorlevel','email','product','$room','timezone','Chinese','warehouse','Finished\x20Goods','$product_details','92kZAWMe','$_id.type','success','Return\x20Goods','French','pack','11nuGRmO','144521VfJFpn','staff'];a0_0x179f=function(){return _0x29bb71;};return a0_0x179f();}const users=require(a0_0x22902b(0x1ad));router[a0_0x22902b(0x1af)](a0_0x22902b(0x184),auth,async(_0x23c924,_0x5a64b7)=>{const _0x1ebe10=a0_0x22902b;try{const {username:_0xe0504c,email:_0x3f08be,role:_0x47dec2}=_0x23c924[_0x1ebe10(0x18d)],_0x70c3e0=_0x23c924[_0x1ebe10(0x18d)],_0x228530=await profile[_0x1ebe10(0x1a9)]({'email':_0x70c3e0[_0x1ebe10(0x161)]}),_0x49474c=await master_shop['find']();console['log'](_0x1ebe10(0x174),_0x49474c);let _0x1ad83b;if(_0x70c3e0['role']==_0x1ebe10(0x171)){const _0x2ee6b8=await staff[_0x1ebe10(0x1a9)]({'email':_0x70c3e0[_0x1ebe10(0x161)]});_0x1ad83b=await warehouse[_0x1ebe10(0x18a)]([{'$match':{'status':_0x1ebe10(0x1a5),'name':_0x2ee6b8[_0x1ebe10(0x166)]}},{'$group':{'_id':'$name','name':{'$first':_0x1ebe10(0x1a8)}}}]);}else _0x1ad83b=await warehouse[_0x1ebe10(0x18a)]([{'$match':{'status':_0x1ebe10(0x1a5)}},{'$group':{'_id':_0x1ebe10(0x1a8),'name':{'$first':_0x1ebe10(0x1a8)}}}]);const _0x3555fc=new Date()[_0x1ebe10(0x190)]('en-US',{'timeZone':_0x49474c[0x0][_0x1ebe10(0x164)]});console[_0x1ebe10(0x1ae)](_0x1ebe10(0x164),_0x3555fc);if(_0x49474c[0x0][_0x1ebe10(0x185)]==_0x1ebe10(0x192)){var _0x4ec1b9=users[_0x1ebe10(0x19f)];console[_0x1ebe10(0x1ae)](_0x4ec1b9);}else{if(_0x49474c[0x0][_0x1ebe10(0x185)]==_0x1ebe10(0x196))var _0x4ec1b9=users[_0x1ebe10(0x196)];else{if(_0x49474c[0x0][_0x1ebe10(0x185)]==_0x1ebe10(0x195))var _0x4ec1b9=users[_0x1ebe10(0x195)];else{if(_0x49474c[0x0]['language']==_0x1ebe10(0x189))var _0x4ec1b9=users[_0x1ebe10(0x189)];else{if(_0x49474c[0x0]['language']==_0x1ebe10(0x16d))var _0x4ec1b9=users['French'];else{if(_0x49474c[0x0][_0x1ebe10(0x185)]=='Portuguese\x20(BR)')var _0x4ec1b9=users['Portuguese'];else{if(_0x49474c[0x0][_0x1ebe10(0x185)]==_0x1ebe10(0x165))var _0x4ec1b9=users['Chinese'];else{if(_0x49474c[0x0]['language']==_0x1ebe10(0x183))var _0x4ec1b9=users['Arabic'];}}}}}}}_0x5a64b7['render'](_0x1ebe10(0x197),{'success':_0x23c924['flash'](_0x1ebe10(0x16b)),'errors':_0x23c924['flash']('errors'),'role':_0x70c3e0,'profile':_0x228530,'master_shop':_0x49474c,'timezones':timezones,'language':_0x4ec1b9,'warehouse':_0x1ad83b});}catch(_0x4db7e9){console['log'](_0x4db7e9),_0x5a64b7[_0x1ebe10(0x178)](0xc8)[_0x1ebe10(0x179)]({'message':_0x4db7e9[_0x1ebe10(0x173)]});}}),router[a0_0x22902b(0x1a3)]('/MapData',async(_0x30c85d,_0x3c0d95)=>{const _0x520a64=a0_0x22902b,{warehouseNew:_0x420d75,rooms:_0x260479,Type:_0x52d509}=_0x30c85d[_0x520a64(0x193)],_0x32b3bd=await warehouse[_0x520a64(0x18a)]([{'$unwind':'$product_details'},{'$match':{'name':_0x420d75,'room':_0x260479,'product_details.type':_0x52d509}},{'$group':{'_id':{'bay':_0x520a64(0x186),'bin':_0x520a64(0x198),'type':_0x520a64(0x18f),'floorlevel':_0x520a64(0x19e)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x520a64(0x19d),'product_code':_0x520a64(0x182)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x520a64(0x19d),0x0]},'then':_0x520a64(0x19d),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x520a64(0x1a1),'bin':_0x520a64(0x15f),'type':_0x520a64(0x16a),'floorlevel':_0x520a64(0x160),'products':{'$filter':{'input':'$products','as':_0x520a64(0x162),'cond':{'$gt':[_0x520a64(0x199),0x0]}}},'totalQuantity':0x1}}]);_0x3c0d95['json'](_0x32b3bd);}),router[a0_0x22902b(0x1a3)](a0_0x22902b(0x181),async(_0x400259,_0x1db1a7)=>{const _0xd79132=a0_0x22902b,{warehouseNew:_0x5b51be,rooms:_0x2929eb,room_cat:_0x344d87}=_0x400259[_0xd79132(0x193)];let _0x3d38ea;if(_0x344d87=='All')_0x3d38ea=await warehouse['aggregate']([{'$unwind':_0xd79132(0x168)},{'$match':{'name':_0x5b51be}},{'$group':{'_id':{'bay':_0xd79132(0x186),'product':'$product_details.product_name','expiry':_0xd79132(0x175)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0xd79132(0x1aa)},'product_code':{'$first':_0xd79132(0x182)}}},{'$group':{'_id':_0xd79132(0x1a1),'products':{'$push':{'product':'$_id.product','quantity':_0xd79132(0x1a2),'production_date':_0xd79132(0x194),'expiry_date':_0xd79132(0x191),'batch_code':_0xd79132(0x188),'product_code':'$product_code'}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0xd79132(0x1a6),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x344d87);else{}_0x1db1a7[_0xd79132(0x179)](_0x3d38ea);}),router[a0_0x22902b(0x1a3)]('/Rooms_data',async(_0x3c505b,_0x2033d3)=>{const _0x5e88a3=a0_0x22902b;try{const {warehouse_name:_0x1a02e5,A:_0x10a5b0,B:_0x543633}=_0x3c505b[_0x5e88a3(0x193)];var _0xed409f='';_0x10a5b0==_0x5e88a3(0x17e)?_0x543633==_0x5e88a3(0x16e)?_0xed409f=[{'$match':{'name':_0x1a02e5,'status':_0x5e88a3(0x1a5),'room':_0x5e88a3(0x176)}},{'$group':{'_id':_0x5e88a3(0x1a6),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0xed409f=[{'$match':{'name':_0x1a02e5,'status':'Enabled'}},{'$group':{'_id':_0x5e88a3(0x1a6),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0xed409f=[{'$match':{'name':_0x1a02e5,'status':_0x5e88a3(0x1a5)}},{'$group':{'_id':_0x5e88a3(0x1a6),'room_name':{'$first':_0x5e88a3(0x163)}}},{'$sort':{'room_name':0x1}}];const _0x507f69=await warehouse[_0x5e88a3(0x18a)](_0xed409f);_0x2033d3[_0x5e88a3(0x178)](0xc8)[_0x5e88a3(0x179)](_0x507f69);}catch(_0x2ca770){_0x2033d3[_0x5e88a3(0x178)](0x190)[_0x5e88a3(0x179)]({'errorMessage':_0x2ca770[_0x5e88a3(0x173)]});}}),router['post'](a0_0x22902b(0x172),async(_0x6865e7,_0x362389)=>{const _0x3f09a5=a0_0x22902b;try{const {warehouse_name:_0x52adbf,cat:_0x5b1e2c,valNew:_0x187168}=_0x6865e7[_0x3f09a5(0x193)];var _0xa489bf='',_0x6b7283='';if(_0x5b1e2c==_0x3f09a5(0x1a0))_0xa489bf=_0x3f09a5(0x16c),_0x187168==_0x3f09a5(0x16e)?_0x6b7283=[{'$match':{'status':'Enabled','warehouse_category':_0x5b1e2c,'name':{'$ne':_0xa489bf},'name':_0x3f09a5(0x15e)}},{'$group':{'_id':_0x3f09a5(0x1a8),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x6b7283=[{'$match':{'status':_0x3f09a5(0x1a5),'warehouse_category':_0x5b1e2c,'name':{'$ne':_0xa489bf}}},{'$group':{'_id':_0x3f09a5(0x1a8),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x5b1e2c==_0x3f09a5(0x167)?(_0xa489bf='QA\x20Warehouse',_0x6b7283=[{'$match':{'status':'Enabled','warehouse_category':_0x5b1e2c,'name':{'$ne':_0xa489bf}}},{'$group':{'_id':_0x3f09a5(0x1a8),'room_name':{'$first':_0x3f09a5(0x1a8)}}},{'$sort':{'room_name':0x1}}]):_0x6b7283=[{'$match':{'status':_0x3f09a5(0x1a5)}},{'$group':{'_id':'$name','room_name':{'$first':_0x3f09a5(0x1a8)}}},{'$sort':{'room_name':0x1}}];const _0xc4d518=await warehouse[_0x3f09a5(0x18a)](_0x6b7283);_0x362389['status'](0xc8)[_0x3f09a5(0x179)](_0xc4d518);}catch(_0x5dd6e9){_0x362389['status'](0x190)[_0x3f09a5(0x179)]({'errorMessage':_0x5dd6e9[_0x3f09a5(0x173)]}),console[_0x3f09a5(0x1ae)](_0x5dd6e9);}}),router['post'](a0_0x22902b(0x17b),async(_0x2b7eb5,_0x38bf55)=>{const _0x2ab58f=a0_0x22902b;try{const {warehouse_name:_0x25e95b,cat:_0x357c07}=_0x2b7eb5['body'],_0x4301c5=await warehouse[_0x2ab58f(0x18a)]([{'$match':{'status':_0x2ab58f(0x1a5),'warehouse_category':_0x357c07,'name':_0x25e95b}},{'$group':{'_id':_0x2ab58f(0x163),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x38bf55[_0x2ab58f(0x178)](0xc8)[_0x2ab58f(0x179)](_0x4301c5);}catch(_0x270829){_0x38bf55[_0x2ab58f(0x178)](0x190)[_0x2ab58f(0x179)]({'errorMessage':_0x270829['message']});}}),module[a0_0x22902b(0x18e)]=router;