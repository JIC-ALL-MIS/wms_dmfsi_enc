function a0_0x52ed(){const _0x444440=['get','1313433Duyfel','1080341VkquQA','Enabled','user','toLocaleString','/Rooms_data','message','70IvUVlj','body','express','3420JINHhP','2678300PUieYe','French','../middleware/auth','en-US','$_id.floorlevel','Portuguese','/Rooms_data2','warehouse','$product_details.expiry_date','json','$_id.product','$product_details.product_name','timezone','/MapData','All','pack','$_id.bay','master','Raw\x20Materials','flash','Hindi','$name','German','$_id','429672rtznCf','product','$product_details.type','10OdkPBt','$product_code','../models/all_models','$product_details.batch_code','errors','Arabic\x20(ae)','$room','$batch_code','render','findOne','raw','email','Arabic','$product_details','$product_details.product_code','post','../public/language/languages.json','28388327NGipsh','2XVqtRe','Spanish','$$product.product_quantity','success','staff','Chinese','aggregate','multer','8613895qSYtvE','status','language','$product_details.product_stock','$product_details.bay','$products','12928Usfbni','$product_details.floorlevel','$expiry_date','find','/view','DRY\x20STORAGE','/MapData2','Portuguese\x20(BR)','English','log','$count'];a0_0x52ed=function(){return _0x444440;};return a0_0x52ed();}const a0_0x4cf2fa=a0_0x4f43;(function(_0xeb23f9,_0x33bbd8){const _0x1a9f60=a0_0x4f43,_0xbabf0=_0xeb23f9();while(!![]){try{const _0x462b47=-parseInt(_0x1a9f60(0xb0))/0x1*(parseInt(_0x1a9f60(0x95))/0x2)+parseInt(_0x1a9f60(0xaf))/0x3+-parseInt(_0x1a9f60(0xba))/0x4+-parseInt(_0x1a9f60(0x9d))/0x5+parseInt(_0x1a9f60(0xd2))/0x6*(parseInt(_0x1a9f60(0xb6))/0x7)+-parseInt(_0x1a9f60(0xa3))/0x8*(-parseInt(_0x1a9f60(0xb9))/0x9)+parseInt(_0x1a9f60(0x83))/0xa*(parseInt(_0x1a9f60(0x94))/0xb);if(_0x462b47===_0x33bbd8)break;else _0xbabf0['push'](_0xbabf0['shift']());}catch(_0x1b5409){_0xbabf0['push'](_0xbabf0['shift']());}}}(a0_0x52ed,0xd5e29));const express=require(a0_0x4cf2fa(0xb8)),app=express(),router=express['Router'](),multer=require(a0_0x4cf2fa(0x9c)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x4cf2fa(0x85)),auth=require(a0_0x4cf2fa(0xbc));function a0_0x4f43(_0x1581ca,_0x41c402){const _0x52ed78=a0_0x52ed();return a0_0x4f43=function(_0x4f43ac,_0x34c62a){_0x4f43ac=_0x4f43ac-0x82;let _0x524eb2=_0x52ed78[_0x4f43ac];return _0x524eb2;},a0_0x4f43(_0x1581ca,_0x41c402);}var timezones=require('timezones-list');const users=require(a0_0x4cf2fa(0x93));router[a0_0x4cf2fa(0xae)](a0_0x4cf2fa(0xa7),auth,async(_0x3e8b71,_0x58c431)=>{const _0x4f1926=a0_0x4cf2fa;try{const {username:_0x37a41e,email:_0x31b9f4,role:_0x2668da}=_0x3e8b71[_0x4f1926(0xb2)],_0x4c2288=_0x3e8b71[_0x4f1926(0xb2)],_0xbd4e49=await profile['findOne']({'email':_0x4c2288[_0x4f1926(0x8e)]}),_0x4f8e52=await master_shop[_0x4f1926(0xa6)]();console[_0x4f1926(0xac)](_0x4f1926(0xcb),_0x4f8e52);let _0x2d79d2;if(_0x4c2288['role']==_0x4f1926(0x99)){const _0x147f0a=await staff[_0x4f1926(0x8c)]({'email':_0x4c2288[_0x4f1926(0x8e)]});_0x2d79d2=await warehouse[_0x4f1926(0x9b)]([{'$match':{'status':_0x4f1926(0xb1),'name':_0x147f0a[_0x4f1926(0xc1)]}},{'$group':{'_id':_0x4f1926(0xcf),'name':{'$first':_0x4f1926(0xcf)}}}]);}else _0x2d79d2=await warehouse[_0x4f1926(0x9b)]([{'$match':{'status':_0x4f1926(0xb1)}},{'$group':{'_id':_0x4f1926(0xcf),'name':{'$first':_0x4f1926(0xcf)}}}]);const _0x11cee2=new Date()[_0x4f1926(0xb3)](_0x4f1926(0xbd),{'timeZone':_0x4f8e52[0x0][_0x4f1926(0xc6)]});console[_0x4f1926(0xac)](_0x4f1926(0xc6),_0x11cee2);if(_0x4f8e52[0x0][_0x4f1926(0x9f)]=='English\x20(US)'){var _0x2e0a8f=users[_0x4f1926(0xab)];console[_0x4f1926(0xac)](_0x2e0a8f);}else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0xce))var _0x2e0a8f=users[_0x4f1926(0xce)];else{if(_0x4f8e52[0x0]['language']==_0x4f1926(0xd0))var _0x2e0a8f=users[_0x4f1926(0xd0)];else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0x96))var _0x2e0a8f=users[_0x4f1926(0x96)];else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0xbb))var _0x2e0a8f=users[_0x4f1926(0xbb)];else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0xaa))var _0x2e0a8f=users[_0x4f1926(0xbf)];else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0x9a))var _0x2e0a8f=users[_0x4f1926(0x9a)];else{if(_0x4f8e52[0x0][_0x4f1926(0x9f)]==_0x4f1926(0x88))var _0x2e0a8f=users[_0x4f1926(0x8f)];}}}}}}}_0x58c431[_0x4f1926(0x8b)]('warehousemap_incoming',{'success':_0x3e8b71['flash'](_0x4f1926(0x98)),'errors':_0x3e8b71[_0x4f1926(0xcd)](_0x4f1926(0x87)),'role':_0x4c2288,'profile':_0xbd4e49,'master_shop':_0x4f8e52,'timezones':timezones,'language':_0x2e0a8f,'warehouse':_0x2d79d2});}catch(_0x375f90){console['log'](_0x375f90),_0x58c431['status'](0xc8)[_0x4f1926(0xc3)]({'message':_0x375f90['message']});}}),router['post'](a0_0x4cf2fa(0xc7),async(_0x17cd6f,_0x145ec6)=>{const _0x374e8e=a0_0x4cf2fa,{warehouseNew:_0x1985cf,rooms:_0x3cdc37,Type:_0x4f91bb}=_0x17cd6f[_0x374e8e(0xb7)],_0x295377=await warehouse[_0x374e8e(0x9b)]([{'$unwind':_0x374e8e(0x90)},{'$match':{'name':_0x1985cf,'room':_0x3cdc37,'product_details.type':_0x4f91bb}},{'$group':{'_id':{'bay':_0x374e8e(0xa1),'bin':'$product_details.bin','type':_0x374e8e(0x82),'floorlevel':_0x374e8e(0xa4)},'products':{'$push':{'product_name':_0x374e8e(0xc5),'product_quantity':_0x374e8e(0xa0),'product_code':_0x374e8e(0x91)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x374e8e(0xa0),0x0]},'then':_0x374e8e(0xa0),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x374e8e(0xca),'bin':'$_id.bin','type':'$_id.type','floorlevel':_0x374e8e(0xbe),'products':{'$filter':{'input':_0x374e8e(0xa2),'as':_0x374e8e(0xd3),'cond':{'$gt':[_0x374e8e(0x97),0x0]}}},'totalQuantity':0x1}}]);_0x145ec6[_0x374e8e(0xc3)](_0x295377);}),router[a0_0x4cf2fa(0x92)](a0_0x4cf2fa(0xa9),async(_0x1efdb9,_0xd963b6)=>{const _0x1b873a=a0_0x4cf2fa,{warehouseNew:_0x5f086c,rooms:_0xd98444,room_cat:_0x5cbaae}=_0x1efdb9['body'];let _0x3a6f68;if(_0x5cbaae==_0x1b873a(0xc8))_0x3a6f68=await warehouse[_0x1b873a(0x9b)]([{'$unwind':_0x1b873a(0x90)},{'$match':{'name':_0x5f086c}},{'$group':{'_id':{'bay':_0x1b873a(0xa1),'product':_0x1b873a(0xc5),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x1b873a(0xa0)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x1b873a(0xc2)},'batch_code':{'$first':_0x1b873a(0x86)},'product_code':{'$first':_0x1b873a(0x91)}}},{'$group':{'_id':_0x1b873a(0xca),'products':{'$push':{'product':_0x1b873a(0xc4),'quantity':_0x1b873a(0xad),'production_date':'$production_date','expiry_date':_0x1b873a(0xa5),'batch_code':_0x1b873a(0x8a),'product_code':_0x1b873a(0x84)}},'totalQuantity':{'$sum':_0x1b873a(0xad)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x1b873a(0xac)](_0x5cbaae);else{}_0xd963b6[_0x1b873a(0xc3)](_0x3a6f68);}),router[a0_0x4cf2fa(0x92)](a0_0x4cf2fa(0xb4),async(_0x1cfc1f,_0x3bd930)=>{const _0x2a0106=a0_0x4cf2fa;try{const {warehouse_name:_0x3ea21b,A:_0x1d77ac,B:_0x1568d6}=_0x1cfc1f[_0x2a0106(0xb7)];var _0x55953a='';_0x1d77ac==_0x2a0106(0x8d)?_0x1568d6==_0x2a0106(0xc9)?_0x55953a=[{'$match':{'name':_0x3ea21b,'status':_0x2a0106(0xb1),'room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x2a0106(0x89)}}},{'$sort':{'room_name':0x1}}]:_0x55953a=[{'$match':{'name':_0x3ea21b,'status':_0x2a0106(0xb1)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x55953a=[{'$match':{'name':_0x3ea21b,'status':_0x2a0106(0xb1)}},{'$group':{'_id':_0x2a0106(0xd1),'room_name':{'$first':_0x2a0106(0x89)}}},{'$sort':{'room_name':0x1}}];const _0x332a99=await warehouse[_0x2a0106(0x9b)](_0x55953a);_0x3bd930[_0x2a0106(0x9e)](0xc8)[_0x2a0106(0xc3)](_0x332a99);}catch(_0xd012f7){_0x3bd930[_0x2a0106(0x9e)](0x190)['json']({'errorMessage':_0xd012f7['message']});}}),router[a0_0x4cf2fa(0x92)](a0_0x4cf2fa(0xc0),async(_0x33118e,_0x152ae2)=>{const _0x51aebd=a0_0x4cf2fa;try{const {warehouse_name:_0x202cc7,cat:_0x44f5d9,valNew:_0x242fde}=_0x33118e[_0x51aebd(0xb7)];var _0x43ff1e='',_0x557e97='';if(_0x44f5d9==_0x51aebd(0xcc))_0x43ff1e='Return\x20Goods',_0x242fde==_0x51aebd(0xc9)?_0x557e97=[{'$match':{'status':_0x51aebd(0xb1),'warehouse_category':_0x44f5d9,'name':{'$ne':_0x43ff1e},'name':_0x51aebd(0xa8)}},{'$group':{'_id':'$name','room_name':{'$first':_0x51aebd(0xcf)}}},{'$sort':{'room_name':0x1}}]:_0x557e97=[{'$match':{'status':_0x51aebd(0xb1),'warehouse_category':_0x44f5d9,'name':{'$ne':_0x43ff1e}}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x44f5d9=='Finished\x20Goods'?(_0x43ff1e='QA\x20Warehouse',_0x557e97=[{'$match':{'status':_0x51aebd(0xb1),'warehouse_category':_0x44f5d9,'name':{'$ne':_0x43ff1e}}},{'$group':{'_id':_0x51aebd(0xcf),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x557e97=[{'$match':{'status':_0x51aebd(0xb1)}},{'$group':{'_id':_0x51aebd(0xcf),'room_name':{'$first':_0x51aebd(0xcf)}}},{'$sort':{'room_name':0x1}}];const _0x2d3259=await warehouse[_0x51aebd(0x9b)](_0x557e97);_0x152ae2[_0x51aebd(0x9e)](0xc8)[_0x51aebd(0xc3)](_0x2d3259);}catch(_0x5c4e79){_0x152ae2['status'](0x190)[_0x51aebd(0xc3)]({'errorMessage':_0x5c4e79[_0x51aebd(0xb5)]}),console[_0x51aebd(0xac)](_0x5c4e79);}}),router[a0_0x4cf2fa(0x92)]('/Rooms_data3',async(_0x2c436e,_0x3a8de1)=>{const _0x2f55bc=a0_0x4cf2fa;try{const {warehouse_name:_0x18e8ef,cat:_0x11c83c}=_0x2c436e[_0x2f55bc(0xb7)],_0x4dd0f6=await warehouse[_0x2f55bc(0x9b)]([{'$match':{'status':'Enabled','warehouse_category':_0x11c83c,'name':_0x18e8ef}},{'$group':{'_id':'$room','room_name':{'$first':_0x2f55bc(0x89)}}},{'$sort':{'room_name':0x1}}]);_0x3a8de1[_0x2f55bc(0x9e)](0xc8)[_0x2f55bc(0xc3)](_0x4dd0f6);}catch(_0x11309c){_0x3a8de1['status'](0x190)['json']({'errorMessage':_0x11309c[_0x2f55bc(0xb5)]});}}),module['exports']=router;