const a0_0x1f39ff=a0_0x4618;function a0_0x2130(){const _0x7ade54=['Return\x20Goods','$name','$product_details.type','$batch_code','German','23006630NgHDFz','staff','Finished\x20Goods','$product_details.product_name','$production_date','pack','$product_details.bay','message','raw','flash','$room','$product_details.bin','Raw\x20Materials','$_id','Enabled','$product_details.expiry_date','$product_details.product_stock','$product_details.product_code','status','multer','language','render','$expiry_date','express','Arabic','Portuguese\x20(BR)','English\x20(US)','Rack\x20A','$product_details.floorlevel','$product_code','get','/Rooms_data3','timezone','$_id.floorlevel','Router','email','French','/MapData2','$product_details.batch_code','$product_details','errors','role','aggregate','exports','master','$_id.product','$$product.product_quantity','$_id.type','DRY\x20STORAGE','Spanish','4739592TphAsj','findOne','find','success','2OWvAJB','warehousemap_incoming','$products','/view','$product_details.production_date','All','body','65064cGJhYJ','log','/Rooms_data','English','$count','$_id.bay','440vLcImT','post','2812372HCCcWk','Hindi','toLocaleString','/MapData','json','timezones-list','2109888Kwizda','3xjnHed','1004370ktQlLi','Chinese','4195534kegCjM'];a0_0x2130=function(){return _0x7ade54;};return a0_0x2130();}function a0_0x4618(_0xf65230,_0x4d8312){const _0x213094=a0_0x2130();return a0_0x4618=function(_0x46182d,_0x5e8a6d){_0x46182d=_0x46182d-0x179;let _0x329169=_0x213094[_0x46182d];return _0x329169;},a0_0x4618(_0xf65230,_0x4d8312);}(function(_0x1ed2f4,_0xe094c6){const _0x484758=a0_0x4618,_0x47f055=_0x1ed2f4();while(!![]){try{const _0x4f86b1=parseInt(_0x484758(0x1a9))/0x1*(-parseInt(_0x484758(0x1c0))/0x2)+-parseInt(_0x484758(0x1bf))/0x3*(-parseInt(_0x484758(0x1b8))/0x4)+parseInt(_0x484758(0x1b6))/0x5*(-parseInt(_0x484758(0x1b0))/0x6)+-parseInt(_0x484758(0x1c2))/0x7+parseInt(_0x484758(0x1a5))/0x8+-parseInt(_0x484758(0x1be))/0x9+parseInt(_0x484758(0x1c8))/0xa;if(_0x4f86b1===_0xe094c6)break;else _0x47f055['push'](_0x47f055['shift']());}catch(_0x349519){_0x47f055['push'](_0x47f055['shift']());}}}(a0_0x2130,0xc43b9));const express=require(a0_0x1f39ff(0x18a)),app=express(),router=express[a0_0x1f39ff(0x195)](),multer=require(a0_0x1f39ff(0x186)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require('../models/all_models'),auth=require('../middleware/auth');var timezones=require(a0_0x1f39ff(0x1bd));const users=require('../public/language/languages.json');router[a0_0x1f39ff(0x191)](a0_0x1f39ff(0x1ac),auth,async(_0x4c5c64,_0x522fe8)=>{const _0x532e79=a0_0x1f39ff;try{const {username:_0x1a017c,email:_0x48bf9f,role:_0x53b212}=_0x4c5c64['user'],_0x5363a3=_0x4c5c64['user'],_0x231bd4=await profile[_0x532e79(0x1a6)]({'email':_0x5363a3[_0x532e79(0x196)]}),_0x5af44c=await master_shop[_0x532e79(0x1a7)]();console['log'](_0x532e79(0x19f),_0x5af44c);let _0x57777d;if(_0x5363a3[_0x532e79(0x19c)]==_0x532e79(0x1c9)){const _0xe84a46=await staff[_0x532e79(0x1a6)]({'email':_0x5363a3[_0x532e79(0x196)]});_0x57777d=await warehouse[_0x532e79(0x19d)]([{'$match':{'status':_0x532e79(0x181),'name':_0xe84a46['warehouse']}},{'$group':{'_id':_0x532e79(0x1c4),'name':{'$first':_0x532e79(0x1c4)}}}]);}else _0x57777d=await warehouse['aggregate']([{'$match':{'status':_0x532e79(0x181)}},{'$group':{'_id':'$name','name':{'$first':_0x532e79(0x1c4)}}}]);const _0x56a80b=new Date()[_0x532e79(0x1ba)]('en-US',{'timeZone':_0x5af44c[0x0]['timezone']});console[_0x532e79(0x1b1)](_0x532e79(0x193),_0x56a80b);if(_0x5af44c[0x0][_0x532e79(0x187)]==_0x532e79(0x18d)){var _0x12fc2a=users[_0x532e79(0x1b3)];console[_0x532e79(0x1b1)](_0x12fc2a);}else{if(_0x5af44c[0x0][_0x532e79(0x187)]==_0x532e79(0x1b9))var _0x12fc2a=users[_0x532e79(0x1b9)];else{if(_0x5af44c[0x0][_0x532e79(0x187)]=='German')var _0x12fc2a=users[_0x532e79(0x1c7)];else{if(_0x5af44c[0x0][_0x532e79(0x187)]==_0x532e79(0x1a4))var _0x12fc2a=users['Spanish'];else{if(_0x5af44c[0x0][_0x532e79(0x187)]==_0x532e79(0x197))var _0x12fc2a=users[_0x532e79(0x197)];else{if(_0x5af44c[0x0]['language']==_0x532e79(0x18c))var _0x12fc2a=users['Portuguese'];else{if(_0x5af44c[0x0]['language']=='Chinese')var _0x12fc2a=users[_0x532e79(0x1c1)];else{if(_0x5af44c[0x0][_0x532e79(0x187)]=='Arabic\x20(ae)')var _0x12fc2a=users[_0x532e79(0x18b)];}}}}}}}_0x522fe8[_0x532e79(0x188)](_0x532e79(0x1aa),{'success':_0x4c5c64['flash'](_0x532e79(0x1a8)),'errors':_0x4c5c64[_0x532e79(0x17c)](_0x532e79(0x19b)),'role':_0x5363a3,'profile':_0x231bd4,'master_shop':_0x5af44c,'timezones':timezones,'language':_0x12fc2a,'warehouse':_0x57777d});}catch(_0x2e48f8){console[_0x532e79(0x1b1)](_0x2e48f8),_0x522fe8[_0x532e79(0x185)](0xc8)['json']({'message':_0x2e48f8['message']});}}),router[a0_0x1f39ff(0x1b7)](a0_0x1f39ff(0x1bb),async(_0xf1b519,_0x502d42)=>{const _0x3dfd05=a0_0x1f39ff,{warehouseNew:_0x3ded1d,rooms:_0x1db548,Type:_0x2d4a50}=_0xf1b519[_0x3dfd05(0x1af)],_0x5a8828=await warehouse[_0x3dfd05(0x19d)]([{'$unwind':'$product_details'},{'$match':{'name':_0x3ded1d,'room':_0x1db548,'product_details.type':_0x2d4a50}},{'$group':{'_id':{'bay':_0x3dfd05(0x179),'bin':_0x3dfd05(0x17e),'type':_0x3dfd05(0x1c5),'floorlevel':_0x3dfd05(0x18f)},'products':{'$push':{'product_name':_0x3dfd05(0x1cb),'product_quantity':_0x3dfd05(0x183),'product_code':_0x3dfd05(0x184)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x3dfd05(0x183),0x0]},'then':_0x3dfd05(0x183),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x3dfd05(0x1b5),'bin':'$_id.bin','type':_0x3dfd05(0x1a2),'floorlevel':_0x3dfd05(0x194),'products':{'$filter':{'input':_0x3dfd05(0x1ab),'as':'product','cond':{'$gt':[_0x3dfd05(0x1a1),0x0]}}},'totalQuantity':0x1}}]);_0x502d42[_0x3dfd05(0x1bc)](_0x5a8828);}),router[a0_0x1f39ff(0x1b7)](a0_0x1f39ff(0x198),async(_0x32ecb0,_0x4bd879)=>{const _0x4980a4=a0_0x1f39ff,{warehouseNew:_0x43a90b,rooms:_0x1dbc43,room_cat:_0x5dd7f6}=_0x32ecb0[_0x4980a4(0x1af)];let _0xc18ebc;if(_0x5dd7f6==_0x4980a4(0x1ae))_0xc18ebc=await warehouse[_0x4980a4(0x19d)]([{'$unwind':_0x4980a4(0x19a)},{'$match':{'name':_0x43a90b}},{'$group':{'_id':{'bay':_0x4980a4(0x179),'product':_0x4980a4(0x1cb),'expiry':_0x4980a4(0x182)},'count':{'$sum':_0x4980a4(0x183)},'production_date':{'$first':_0x4980a4(0x1ad)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x4980a4(0x199)},'product_code':{'$first':_0x4980a4(0x184)}}},{'$group':{'_id':_0x4980a4(0x1b5),'products':{'$push':{'product':_0x4980a4(0x1a0),'quantity':_0x4980a4(0x1b4),'production_date':_0x4980a4(0x1cc),'expiry_date':_0x4980a4(0x189),'batch_code':_0x4980a4(0x1c6),'product_code':_0x4980a4(0x190)}},'totalQuantity':{'$sum':_0x4980a4(0x1b4)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x4980a4(0x180),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x5dd7f6);else{}_0x4bd879[_0x4980a4(0x1bc)](_0xc18ebc);}),router[a0_0x1f39ff(0x1b7)](a0_0x1f39ff(0x1b2),async(_0x145ed3,_0x3808d6)=>{const _0xd214ed=a0_0x1f39ff;try{const {warehouse_name:_0x5705a4,A:_0xf3c2dd,B:_0xe77529}=_0x145ed3[_0xd214ed(0x1af)];var _0x1c0315='';_0xf3c2dd==_0xd214ed(0x17b)?_0xe77529==_0xd214ed(0x1cd)?_0x1c0315=[{'$match':{'name':_0x5705a4,'status':_0xd214ed(0x181),'room':_0xd214ed(0x18e)}},{'$group':{'_id':_0xd214ed(0x180),'room_name':{'$first':_0xd214ed(0x17d)}}},{'$sort':{'room_name':0x1}}]:_0x1c0315=[{'$match':{'name':_0x5705a4,'status':_0xd214ed(0x181)}},{'$group':{'_id':_0xd214ed(0x180),'room_name':{'$first':_0xd214ed(0x17d)}}},{'$sort':{'room_name':0x1}}]:_0x1c0315=[{'$match':{'name':_0x5705a4,'status':_0xd214ed(0x181)}},{'$group':{'_id':'$_id','room_name':{'$first':_0xd214ed(0x17d)}}},{'$sort':{'room_name':0x1}}];const _0x42e612=await warehouse[_0xd214ed(0x19d)](_0x1c0315);_0x3808d6[_0xd214ed(0x185)](0xc8)['json'](_0x42e612);}catch(_0x2e2d7f){_0x3808d6[_0xd214ed(0x185)](0x190)[_0xd214ed(0x1bc)]({'errorMessage':_0x2e2d7f['message']});}}),router[a0_0x1f39ff(0x1b7)]('/Rooms_data2',async(_0x507971,_0x1aa715)=>{const _0x1cacbc=a0_0x1f39ff;try{const {warehouse_name:_0x1c6efa,cat:_0x3c0af0,valNew:_0x65861b}=_0x507971[_0x1cacbc(0x1af)];var _0x5950e6='',_0x35d13f='';if(_0x3c0af0==_0x1cacbc(0x17f))_0x5950e6=_0x1cacbc(0x1c3),_0x65861b=='pack'?_0x35d13f=[{'$match':{'status':'Enabled','warehouse_category':_0x3c0af0,'name':{'$ne':_0x5950e6},'name':_0x1cacbc(0x1a3)}},{'$group':{'_id':'$name','room_name':{'$first':_0x1cacbc(0x1c4)}}},{'$sort':{'room_name':0x1}}]:_0x35d13f=[{'$match':{'status':_0x1cacbc(0x181),'warehouse_category':_0x3c0af0,'name':{'$ne':_0x5950e6}}},{'$group':{'_id':_0x1cacbc(0x1c4),'room_name':{'$first':_0x1cacbc(0x1c4)}}},{'$sort':{'room_name':0x1}}];else _0x3c0af0==_0x1cacbc(0x1ca)?(_0x5950e6='QA\x20Warehouse',_0x35d13f=[{'$match':{'status':'Enabled','warehouse_category':_0x3c0af0,'name':{'$ne':_0x5950e6}}},{'$group':{'_id':_0x1cacbc(0x1c4),'room_name':{'$first':_0x1cacbc(0x1c4)}}},{'$sort':{'room_name':0x1}}]):_0x35d13f=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x1cacbc(0x1c4),'room_name':{'$first':_0x1cacbc(0x1c4)}}},{'$sort':{'room_name':0x1}}];const _0x435854=await warehouse[_0x1cacbc(0x19d)](_0x35d13f);_0x1aa715[_0x1cacbc(0x185)](0xc8)[_0x1cacbc(0x1bc)](_0x435854);}catch(_0x184379){_0x1aa715['status'](0x190)[_0x1cacbc(0x1bc)]({'errorMessage':_0x184379[_0x1cacbc(0x17a)]}),console[_0x1cacbc(0x1b1)](_0x184379);}}),router[a0_0x1f39ff(0x1b7)](a0_0x1f39ff(0x192),async(_0x3825de,_0x3ba41d)=>{const _0x5a02f4=a0_0x1f39ff;try{const {warehouse_name:_0x2ccf87,cat:_0x4a38fb}=_0x3825de[_0x5a02f4(0x1af)],_0x6cd481=await warehouse[_0x5a02f4(0x19d)]([{'$match':{'status':_0x5a02f4(0x181),'warehouse_category':_0x4a38fb,'name':_0x2ccf87}},{'$group':{'_id':_0x5a02f4(0x17d),'room_name':{'$first':_0x5a02f4(0x17d)}}},{'$sort':{'room_name':0x1}}]);_0x3ba41d[_0x5a02f4(0x185)](0xc8)[_0x5a02f4(0x1bc)](_0x6cd481);}catch(_0x13a6d5){_0x3ba41d[_0x5a02f4(0x185)](0x190)[_0x5a02f4(0x1bc)]({'errorMessage':_0x13a6d5[_0x5a02f4(0x17a)]});}}),module[a0_0x1f39ff(0x19e)]=router;