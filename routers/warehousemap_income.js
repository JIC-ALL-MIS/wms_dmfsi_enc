const a0_0x2168d2=a0_0x3279;(function(_0x13c358,_0x453fa2){const _0x400f21=a0_0x3279,_0x404127=_0x13c358();while(!![]){try{const _0x5e6cf5=-parseInt(_0x400f21(0x1e5))/0x1*(parseInt(_0x400f21(0x1eb))/0x2)+parseInt(_0x400f21(0x1e2))/0x3*(-parseInt(_0x400f21(0x1b6))/0x4)+parseInt(_0x400f21(0x1ce))/0x5*(-parseInt(_0x400f21(0x1d4))/0x6)+parseInt(_0x400f21(0x1c0))/0x7*(parseInt(_0x400f21(0x208))/0x8)+-parseInt(_0x400f21(0x1bd))/0x9*(-parseInt(_0x400f21(0x1ec))/0xa)+parseInt(_0x400f21(0x1d7))/0xb*(parseInt(_0x400f21(0x1bf))/0xc)+-parseInt(_0x400f21(0x203))/0xd*(parseInt(_0x400f21(0x1e9))/0xe);if(_0x5e6cf5===_0x453fa2)break;else _0x404127['push'](_0x404127['shift']());}catch(_0x2933a8){_0x404127['push'](_0x404127['shift']());}}}(a0_0xad7e,0xafdd9));const express=require(a0_0x2168d2(0x206)),app=express(),router=express[a0_0x2168d2(0x1b7)](),multer=require(a0_0x2168d2(0x1fa)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2168d2(0x1bc)),auth=require('../middleware/auth');var timezones=require(a0_0x2168d2(0x1ef));function a0_0x3279(_0x2cae3f,_0x257fc9){const _0xad7e00=a0_0xad7e();return a0_0x3279=function(_0x327907,_0x1f72f1){_0x327907=_0x327907-0x1af;let _0x54c00b=_0xad7e00[_0x327907];return _0x54c00b;},a0_0x3279(_0x2cae3f,_0x257fc9);}function a0_0xad7e(){const _0x1c0b85=['$products','151850nRwYkb','DRY\x20STORAGE','master','$batch_code','success','$product_details.type','228RyvsbW','$product_details.product_stock','body','883751zekJRw','Arabic\x20(ae)','/MapData','aggregate','English','../public/language/languages.json','get','status','QA\x20Warehouse','$product_details.product_name','raw','177TnqOao','warehousemap_incoming','/Rooms_data3','62OJqCuQ','user','$product_details.floorlevel','find','14nYqbVd','en-US','13556bKobnq','10610LzcqfZ','Arabic','$name','timezones-list','Chinese','pack','language','findOne','$product_details.production_date','$product_code','log','render','$product_details.product_code','$product_details','multer','role','message','Portuguese','$product_details.bin','French','$_id.bay','product','post','8559148eCPfqz','Finished\x20Goods','$$product.product_quantity','express','/Rooms_data','88huncNE','English\x20(US)','staff','$_id.bin','/Rooms_data2','$product_details.expiry_date','Return\x20Goods','$_id','$expiry_date','/view','21092NdWhOq','Router','flash','json','Raw\x20Materials','Spanish','../models/all_models','8217jjUxvz','German','204ZLbSyN','591598opwdle','$product_details.bay','All','$room','errors','Hindi','$product_details.batch_code','exports','Portuguese\x20(BR)','email','timezone','Enabled','/MapData2'];a0_0xad7e=function(){return _0x1c0b85;};return a0_0xad7e();}const users=require(a0_0x2168d2(0x1dc));router[a0_0x2168d2(0x1dd)](a0_0x2168d2(0x1b5),auth,async(_0xaba63,_0x15d233)=>{const _0x3446f8=a0_0x2168d2;try{const {username:_0x2f39b5,email:_0x385cf9,role:_0x14d7ac}=_0xaba63[_0x3446f8(0x1e6)],_0xefc971=_0xaba63[_0x3446f8(0x1e6)],_0x5acfb4=await profile[_0x3446f8(0x1f3)]({'email':_0xefc971[_0x3446f8(0x1c9)]}),_0x10824a=await master_shop[_0x3446f8(0x1e8)]();console[_0x3446f8(0x1f6)](_0x3446f8(0x1d0),_0x10824a);let _0x20b096;if(_0xefc971[_0x3446f8(0x1fb)]==_0x3446f8(0x20a)){const _0x3a99b3=await staff[_0x3446f8(0x1f3)]({'email':_0xefc971[_0x3446f8(0x1c9)]});_0x20b096=await warehouse[_0x3446f8(0x1da)]([{'$match':{'status':_0x3446f8(0x1cb),'name':_0x3a99b3['warehouse']}},{'$group':{'_id':_0x3446f8(0x1ee),'name':{'$first':_0x3446f8(0x1ee)}}}]);}else _0x20b096=await warehouse[_0x3446f8(0x1da)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x3446f8(0x1ee),'name':{'$first':_0x3446f8(0x1ee)}}}]);const _0x1ff601=new Date()['toLocaleString'](_0x3446f8(0x1ea),{'timeZone':_0x10824a[0x0][_0x3446f8(0x1ca)]});console[_0x3446f8(0x1f6)](_0x3446f8(0x1ca),_0x1ff601);if(_0x10824a[0x0][_0x3446f8(0x1f2)]==_0x3446f8(0x209)){var _0x15dbce=users[_0x3446f8(0x1db)];console[_0x3446f8(0x1f6)](_0x15dbce);}else{if(_0x10824a[0x0][_0x3446f8(0x1f2)]==_0x3446f8(0x1c5))var _0x15dbce=users[_0x3446f8(0x1c5)];else{if(_0x10824a[0x0]['language']==_0x3446f8(0x1be))var _0x15dbce=users[_0x3446f8(0x1be)];else{if(_0x10824a[0x0][_0x3446f8(0x1f2)]==_0x3446f8(0x1bb))var _0x15dbce=users[_0x3446f8(0x1bb)];else{if(_0x10824a[0x0]['language']==_0x3446f8(0x1ff))var _0x15dbce=users[_0x3446f8(0x1ff)];else{if(_0x10824a[0x0]['language']==_0x3446f8(0x1c8))var _0x15dbce=users[_0x3446f8(0x1fd)];else{if(_0x10824a[0x0][_0x3446f8(0x1f2)]=='Chinese')var _0x15dbce=users[_0x3446f8(0x1f0)];else{if(_0x10824a[0x0][_0x3446f8(0x1f2)]==_0x3446f8(0x1d8))var _0x15dbce=users[_0x3446f8(0x1ed)];}}}}}}}_0x15d233[_0x3446f8(0x1f7)](_0x3446f8(0x1e3),{'success':_0xaba63[_0x3446f8(0x1b8)](_0x3446f8(0x1d2)),'errors':_0xaba63[_0x3446f8(0x1b8)](_0x3446f8(0x1c4)),'role':_0xefc971,'profile':_0x5acfb4,'master_shop':_0x10824a,'timezones':timezones,'language':_0x15dbce,'warehouse':_0x20b096});}catch(_0x2625ca){console[_0x3446f8(0x1f6)](_0x2625ca),_0x15d233['status'](0xc8)['json']({'message':_0x2625ca[_0x3446f8(0x1fc)]});}}),router['post'](a0_0x2168d2(0x1d9),async(_0x22e10a,_0x49a74d)=>{const _0x8c16a1=a0_0x2168d2,{warehouseNew:_0x43e939,rooms:_0x40896a,Type:_0x643bde}=_0x22e10a['body'],_0x13a046=await warehouse['aggregate']([{'$unwind':_0x8c16a1(0x1f9)},{'$match':{'name':_0x43e939,'room':_0x40896a,'product_details.type':_0x643bde}},{'$group':{'_id':{'bay':_0x8c16a1(0x1c1),'bin':_0x8c16a1(0x1fe),'type':_0x8c16a1(0x1d3),'floorlevel':_0x8c16a1(0x1e7)},'products':{'$push':{'product_name':_0x8c16a1(0x1e0),'product_quantity':_0x8c16a1(0x1d5),'product_code':_0x8c16a1(0x1f8)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x8c16a1(0x1d5),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x8c16a1(0x200),'bin':_0x8c16a1(0x1af),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x8c16a1(0x1cd),'as':_0x8c16a1(0x201),'cond':{'$gt':[_0x8c16a1(0x205),0x0]}}},'totalQuantity':0x1}}]);_0x49a74d[_0x8c16a1(0x1b9)](_0x13a046);}),router[a0_0x2168d2(0x202)](a0_0x2168d2(0x1cc),async(_0x40aaf1,_0x302244)=>{const _0x46396a=a0_0x2168d2,{warehouseNew:_0x1d8935,rooms:_0x32aee9,room_cat:_0x49621a}=_0x40aaf1['body'];let _0x4db797;if(_0x49621a==_0x46396a(0x1c2))_0x4db797=await warehouse[_0x46396a(0x1da)]([{'$unwind':'$product_details'},{'$match':{'name':_0x1d8935}},{'$group':{'_id':{'bay':_0x46396a(0x1c1),'product':'$product_details.product_name','expiry':_0x46396a(0x1b1)},'count':{'$sum':_0x46396a(0x1d5)},'production_date':{'$first':_0x46396a(0x1f4)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x46396a(0x1c6)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':'$_id.product','quantity':'$count','production_date':'$production_date','expiry_date':_0x46396a(0x1b4),'batch_code':_0x46396a(0x1d1),'product_code':_0x46396a(0x1f5)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x46396a(0x1b3),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x49621a);else{}_0x302244[_0x46396a(0x1b9)](_0x4db797);}),router[a0_0x2168d2(0x202)](a0_0x2168d2(0x207),async(_0x1c4d2c,_0x4eff7f)=>{const _0x4c9ac3=a0_0x2168d2;try{const {warehouse_name:_0x3a7f72,A:_0x39e279,B:_0x1f3f52}=_0x1c4d2c[_0x4c9ac3(0x1d6)];var _0x34abcc='';_0x39e279==_0x4c9ac3(0x1e1)?_0x1f3f52=='pack'?_0x34abcc=[{'$match':{'name':_0x3a7f72,'status':_0x4c9ac3(0x1cb),'room':'Rack\x20A'}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x34abcc=[{'$match':{'name':_0x3a7f72,'status':_0x4c9ac3(0x1cb)}},{'$group':{'_id':_0x4c9ac3(0x1b3),'room_name':{'$first':_0x4c9ac3(0x1c3)}}},{'$sort':{'room_name':0x1}}]:_0x34abcc=[{'$match':{'name':_0x3a7f72,'status':'Enabled'}},{'$group':{'_id':_0x4c9ac3(0x1b3),'room_name':{'$first':_0x4c9ac3(0x1c3)}}},{'$sort':{'room_name':0x1}}];const _0xb938c2=await warehouse[_0x4c9ac3(0x1da)](_0x34abcc);_0x4eff7f['status'](0xc8)[_0x4c9ac3(0x1b9)](_0xb938c2);}catch(_0x2ad47b){_0x4eff7f[_0x4c9ac3(0x1de)](0x190)[_0x4c9ac3(0x1b9)]({'errorMessage':_0x2ad47b['message']});}}),router[a0_0x2168d2(0x202)](a0_0x2168d2(0x1b0),async(_0x45464c,_0x400606)=>{const _0x6adf88=a0_0x2168d2;try{const {warehouse_name:_0x2ef0a2,cat:_0x412161,valNew:_0xe274f0}=_0x45464c[_0x6adf88(0x1d6)];var _0x2ca6ef='',_0x195b3e='';if(_0x412161==_0x6adf88(0x1ba))_0x2ca6ef=_0x6adf88(0x1b2),_0xe274f0==_0x6adf88(0x1f1)?_0x195b3e=[{'$match':{'status':_0x6adf88(0x1cb),'warehouse_category':_0x412161,'name':{'$ne':_0x2ca6ef},'name':_0x6adf88(0x1cf)}},{'$group':{'_id':'$name','room_name':{'$first':_0x6adf88(0x1ee)}}},{'$sort':{'room_name':0x1}}]:_0x195b3e=[{'$match':{'status':'Enabled','warehouse_category':_0x412161,'name':{'$ne':_0x2ca6ef}}},{'$group':{'_id':_0x6adf88(0x1ee),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];else _0x412161==_0x6adf88(0x204)?(_0x2ca6ef=_0x6adf88(0x1df),_0x195b3e=[{'$match':{'status':_0x6adf88(0x1cb),'warehouse_category':_0x412161,'name':{'$ne':_0x2ca6ef}}},{'$group':{'_id':_0x6adf88(0x1ee),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x195b3e=[{'$match':{'status':_0x6adf88(0x1cb)}},{'$group':{'_id':_0x6adf88(0x1ee),'room_name':{'$first':_0x6adf88(0x1ee)}}},{'$sort':{'room_name':0x1}}];const _0x43e790=await warehouse[_0x6adf88(0x1da)](_0x195b3e);_0x400606['status'](0xc8)[_0x6adf88(0x1b9)](_0x43e790);}catch(_0x10380c){_0x400606[_0x6adf88(0x1de)](0x190)['json']({'errorMessage':_0x10380c['message']}),console[_0x6adf88(0x1f6)](_0x10380c);}}),router['post'](a0_0x2168d2(0x1e4),async(_0x1855c7,_0x51c473)=>{const _0x44f048=a0_0x2168d2;try{const {warehouse_name:_0x46c262,cat:_0x3a9e70}=_0x1855c7['body'],_0x47d075=await warehouse[_0x44f048(0x1da)]([{'$match':{'status':'Enabled','warehouse_category':_0x3a9e70,'name':_0x46c262}},{'$group':{'_id':_0x44f048(0x1c3),'room_name':{'$first':_0x44f048(0x1c3)}}},{'$sort':{'room_name':0x1}}]);_0x51c473[_0x44f048(0x1de)](0xc8)[_0x44f048(0x1b9)](_0x47d075);}catch(_0x168172){_0x51c473[_0x44f048(0x1de)](0x190)[_0x44f048(0x1b9)]({'errorMessage':_0x168172[_0x44f048(0x1fc)]});}}),module[a0_0x2168d2(0x1c7)]=router;