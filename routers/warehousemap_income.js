const a0_0x1aadf1=a0_0x106b;(function(_0x54e724,_0x4fda63){const _0x43eeb6=a0_0x106b,_0x40fdad=_0x54e724();while(!![]){try{const _0x4f07f9=-parseInt(_0x43eeb6(0x119))/0x1*(-parseInt(_0x43eeb6(0x111))/0x2)+-parseInt(_0x43eeb6(0x101))/0x3+parseInt(_0x43eeb6(0xff))/0x4*(-parseInt(_0x43eeb6(0x12c))/0x5)+parseInt(_0x43eeb6(0xe4))/0x6*(-parseInt(_0x43eeb6(0xf0))/0x7)+-parseInt(_0x43eeb6(0xe7))/0x8+-parseInt(_0x43eeb6(0x11b))/0x9+-parseInt(_0x43eeb6(0xf2))/0xa*(-parseInt(_0x43eeb6(0x115))/0xb);if(_0x4f07f9===_0x4fda63)break;else _0x40fdad['push'](_0x40fdad['shift']());}catch(_0x2932b0){_0x40fdad['push'](_0x40fdad['shift']());}}}(a0_0x4bf5,0xae894));const express=require(a0_0x1aadf1(0xee)),app=express(),router=express[a0_0x1aadf1(0xf9)](),multer=require(a0_0x1aadf1(0x12b)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x1aadf1(0x127)),auth=require(a0_0x1aadf1(0x125));function a0_0x106b(_0x4e9ffe,_0x6117bd){const _0x4bf556=a0_0x4bf5();return a0_0x106b=function(_0x106bb0,_0x5afd69){_0x106bb0=_0x106bb0-0xdd;let _0x4bc44b=_0x4bf556[_0x106bb0];return _0x4bc44b;},a0_0x106b(_0x4e9ffe,_0x6117bd);}var timezones=require(a0_0x1aadf1(0xf3));function a0_0x4bf5(){const _0x41f270=['multer','5615YfuyVw','$production_date','log','$product_details.batch_code','Enabled','$product_details.type','$product_details.bay','$product_details','Chinese','user','findOne','Spanish','20478hvVdMa','$product_details.production_date','$product_details.product_stock','10327912MpUYAE','Arabic\x20(ae)','QA\x20Warehouse','/Rooms_data3','$count','$$product.product_quantity','$product_details.bin','express','pack','2317mrhGOX','/MapData','20uXrndq','timezones-list','$room','Portuguese','English\x20(US)','$product_details.expiry_date','aggregate','Router','flash','post','$expiry_date','en-US','$product_details.product_name','2020lNVHpo','$product_details.floorlevel','2231715HtSejN','Finished\x20Goods','$name','timezone','Arabic','$products','/Rooms_data','warehousemap_incoming','find','English','German','Return\x20Goods','toLocaleString','render','raw','/MapData2','2JSvgBZ','json','Portuguese\x20(BR)','/Rooms_data2','23722677cVIypc','Raw\x20Materials','role','product','602846iFWxJL','Hindi','4225032YianxI','/view','success','email','$_id.floorlevel','status','body','get','language','$_id','../middleware/auth','$product_details.product_code','../models/all_models','DRY\x20STORAGE','French','message'];a0_0x4bf5=function(){return _0x41f270;};return a0_0x4bf5();}const users=require('../public/language/languages.json');router[a0_0x1aadf1(0x122)](a0_0x1aadf1(0x11c),auth,async(_0x4e3f74,_0x90cd71)=>{const _0x438cb9=a0_0x1aadf1;try{const {username:_0x42407a,email:_0x44c1a0,role:_0x543088}=_0x4e3f74['user'],_0x5d5f81=_0x4e3f74[_0x438cb9(0xe1)],_0xa43209=await profile[_0x438cb9(0xe2)]({'email':_0x5d5f81[_0x438cb9(0x11e)]}),_0xdd808b=await master_shop[_0x438cb9(0x109)]();console[_0x438cb9(0x12e)]('master',_0xdd808b);let _0x401d5a;if(_0x5d5f81[_0x438cb9(0x117)]=='staff'){const _0x59f627=await staff[_0x438cb9(0xe2)]({'email':_0x5d5f81[_0x438cb9(0x11e)]});_0x401d5a=await warehouse[_0x438cb9(0xf8)]([{'$match':{'status':_0x438cb9(0x130),'name':_0x59f627['warehouse']}},{'$group':{'_id':_0x438cb9(0x103),'name':{'$first':_0x438cb9(0x103)}}}]);}else _0x401d5a=await warehouse[_0x438cb9(0xf8)]([{'$match':{'status':_0x438cb9(0x130)}},{'$group':{'_id':_0x438cb9(0x103),'name':{'$first':_0x438cb9(0x103)}}}]);const _0x131437=new Date()[_0x438cb9(0x10d)](_0x438cb9(0xfd),{'timeZone':_0xdd808b[0x0][_0x438cb9(0x104)]});console[_0x438cb9(0x12e)]('timezone',_0x131437);if(_0xdd808b[0x0][_0x438cb9(0x123)]==_0x438cb9(0xf6)){var _0x3b142f=users[_0x438cb9(0x10a)];console[_0x438cb9(0x12e)](_0x3b142f);}else{if(_0xdd808b[0x0][_0x438cb9(0x123)]==_0x438cb9(0x11a))var _0x3b142f=users[_0x438cb9(0x11a)];else{if(_0xdd808b[0x0][_0x438cb9(0x123)]==_0x438cb9(0x10b))var _0x3b142f=users[_0x438cb9(0x10b)];else{if(_0xdd808b[0x0][_0x438cb9(0x123)]=='Spanish')var _0x3b142f=users[_0x438cb9(0xe3)];else{if(_0xdd808b[0x0][_0x438cb9(0x123)]=='French')var _0x3b142f=users[_0x438cb9(0x129)];else{if(_0xdd808b[0x0][_0x438cb9(0x123)]==_0x438cb9(0x113))var _0x3b142f=users[_0x438cb9(0xf5)];else{if(_0xdd808b[0x0][_0x438cb9(0x123)]==_0x438cb9(0xe0))var _0x3b142f=users[_0x438cb9(0xe0)];else{if(_0xdd808b[0x0]['language']==_0x438cb9(0xe8))var _0x3b142f=users[_0x438cb9(0x105)];}}}}}}}_0x90cd71[_0x438cb9(0x10e)](_0x438cb9(0x108),{'success':_0x4e3f74[_0x438cb9(0xfa)](_0x438cb9(0x11d)),'errors':_0x4e3f74[_0x438cb9(0xfa)]('errors'),'role':_0x5d5f81,'profile':_0xa43209,'master_shop':_0xdd808b,'timezones':timezones,'language':_0x3b142f,'warehouse':_0x401d5a});}catch(_0x2680a8){console[_0x438cb9(0x12e)](_0x2680a8),_0x90cd71[_0x438cb9(0x120)](0xc8)[_0x438cb9(0x112)]({'message':_0x2680a8[_0x438cb9(0x12a)]});}}),router[a0_0x1aadf1(0xfb)](a0_0x1aadf1(0xf1),async(_0x454e86,_0x5c18cd)=>{const _0x2bcb6f=a0_0x1aadf1,{warehouseNew:_0x5484ac,rooms:_0x34f221,Type:_0x360aab}=_0x454e86[_0x2bcb6f(0x121)],_0x1d56cb=await warehouse[_0x2bcb6f(0xf8)]([{'$unwind':_0x2bcb6f(0xdf)},{'$match':{'name':_0x5484ac,'room':_0x34f221,'product_details.type':_0x360aab}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x2bcb6f(0xed),'type':_0x2bcb6f(0xdd),'floorlevel':_0x2bcb6f(0x100)},'products':{'$push':{'product_name':_0x2bcb6f(0xfe),'product_quantity':_0x2bcb6f(0xe6),'product_code':_0x2bcb6f(0x126)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2bcb6f(0xe6),0x0]},'then':_0x2bcb6f(0xe6),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':'$_id.bin','type':'$_id.type','floorlevel':_0x2bcb6f(0x11f),'products':{'$filter':{'input':_0x2bcb6f(0x106),'as':_0x2bcb6f(0x118),'cond':{'$gt':[_0x2bcb6f(0xec),0x0]}}},'totalQuantity':0x1}}]);_0x5c18cd[_0x2bcb6f(0x112)](_0x1d56cb);}),router[a0_0x1aadf1(0xfb)](a0_0x1aadf1(0x110),async(_0xc09f73,_0x2dd4b1)=>{const _0x275466=a0_0x1aadf1,{warehouseNew:_0x413a64,rooms:_0x4f2f82,room_cat:_0x1027d7}=_0xc09f73[_0x275466(0x121)];let _0x2e4c63;if(_0x1027d7=='All')_0x2e4c63=await warehouse[_0x275466(0xf8)]([{'$unwind':_0x275466(0xdf)},{'$match':{'name':_0x413a64}},{'$group':{'_id':{'bay':_0x275466(0xde),'product':_0x275466(0xfe),'expiry':'$product_details.expiry_date'},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':_0x275466(0xe5)},'expiry_date':{'$first':_0x275466(0xf7)},'batch_code':{'$first':_0x275466(0x12f)},'product_code':{'$first':_0x275466(0x126)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':'$_id.product','quantity':_0x275466(0xeb),'production_date':_0x275466(0x12d),'expiry_date':_0x275466(0xfc),'batch_code':'$batch_code','product_code':'$product_code'}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x275466(0x124),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x1027d7);else{}_0x2dd4b1[_0x275466(0x112)](_0x2e4c63);}),router[a0_0x1aadf1(0xfb)](a0_0x1aadf1(0x107),async(_0x5b599c,_0x1407d5)=>{const _0x13bbfe=a0_0x1aadf1;try{const {warehouse_name:_0x2d91ae,A:_0x156acc,B:_0x3dafaa}=_0x5b599c[_0x13bbfe(0x121)];var _0x108fd2='';_0x156acc==_0x13bbfe(0x10f)?_0x3dafaa=='pack'?_0x108fd2=[{'$match':{'name':_0x2d91ae,'status':'Enabled','room':'Rack\x20A'}},{'$group':{'_id':_0x13bbfe(0x124),'room_name':{'$first':_0x13bbfe(0xf4)}}},{'$sort':{'room_name':0x1}}]:_0x108fd2=[{'$match':{'name':_0x2d91ae,'status':_0x13bbfe(0x130)}},{'$group':{'_id':_0x13bbfe(0x124),'room_name':{'$first':_0x13bbfe(0xf4)}}},{'$sort':{'room_name':0x1}}]:_0x108fd2=[{'$match':{'name':_0x2d91ae,'status':_0x13bbfe(0x130)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x13bbfe(0xf4)}}},{'$sort':{'room_name':0x1}}];const _0x21d28d=await warehouse[_0x13bbfe(0xf8)](_0x108fd2);_0x1407d5[_0x13bbfe(0x120)](0xc8)[_0x13bbfe(0x112)](_0x21d28d);}catch(_0x4bd067){_0x1407d5[_0x13bbfe(0x120)](0x190)['json']({'errorMessage':_0x4bd067[_0x13bbfe(0x12a)]});}}),router[a0_0x1aadf1(0xfb)](a0_0x1aadf1(0x114),async(_0x958259,_0x5e987b)=>{const _0x4be0b2=a0_0x1aadf1;try{const {warehouse_name:_0x274df9,cat:_0x1291ea,valNew:_0x1c391e}=_0x958259[_0x4be0b2(0x121)];var _0x5618d4='',_0x52b8a2='';if(_0x1291ea==_0x4be0b2(0x116))_0x5618d4=_0x4be0b2(0x10c),_0x1c391e==_0x4be0b2(0xef)?_0x52b8a2=[{'$match':{'status':_0x4be0b2(0x130),'warehouse_category':_0x1291ea,'name':{'$ne':_0x5618d4},'name':_0x4be0b2(0x128)}},{'$group':{'_id':'$name','room_name':{'$first':_0x4be0b2(0x103)}}},{'$sort':{'room_name':0x1}}]:_0x52b8a2=[{'$match':{'status':_0x4be0b2(0x130),'warehouse_category':_0x1291ea,'name':{'$ne':_0x5618d4}}},{'$group':{'_id':_0x4be0b2(0x103),'room_name':{'$first':_0x4be0b2(0x103)}}},{'$sort':{'room_name':0x1}}];else _0x1291ea==_0x4be0b2(0x102)?(_0x5618d4=_0x4be0b2(0xe9),_0x52b8a2=[{'$match':{'status':_0x4be0b2(0x130),'warehouse_category':_0x1291ea,'name':{'$ne':_0x5618d4}}},{'$group':{'_id':_0x4be0b2(0x103),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x52b8a2=[{'$match':{'status':_0x4be0b2(0x130)}},{'$group':{'_id':_0x4be0b2(0x103),'room_name':{'$first':_0x4be0b2(0x103)}}},{'$sort':{'room_name':0x1}}];const _0x2915ea=await warehouse[_0x4be0b2(0xf8)](_0x52b8a2);_0x5e987b[_0x4be0b2(0x120)](0xc8)[_0x4be0b2(0x112)](_0x2915ea);}catch(_0x5cd89d){_0x5e987b['status'](0x190)['json']({'errorMessage':_0x5cd89d['message']}),console[_0x4be0b2(0x12e)](_0x5cd89d);}}),router[a0_0x1aadf1(0xfb)](a0_0x1aadf1(0xea),async(_0x1e6cd6,_0x215eef)=>{const _0x2763d5=a0_0x1aadf1;try{const {warehouse_name:_0x4cd48c,cat:_0x8a9e16}=_0x1e6cd6[_0x2763d5(0x121)],_0x706a7e=await warehouse[_0x2763d5(0xf8)]([{'$match':{'status':_0x2763d5(0x130),'warehouse_category':_0x8a9e16,'name':_0x4cd48c}},{'$group':{'_id':_0x2763d5(0xf4),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x215eef[_0x2763d5(0x120)](0xc8)[_0x2763d5(0x112)](_0x706a7e);}catch(_0x5b0491){_0x215eef[_0x2763d5(0x120)](0x190)['json']({'errorMessage':_0x5b0491[_0x2763d5(0x12a)]});}}),module['exports']=router;