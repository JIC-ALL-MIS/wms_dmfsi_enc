const a0_0x2530aa=a0_0x299c;(function(_0xfe0715,_0x4c8606){const _0x116802=a0_0x299c,_0x82c9fc=_0xfe0715();while(!![]){try{const _0x3aced8=parseInt(_0x116802(0xc6))/0x1*(parseInt(_0x116802(0xd6))/0x2)+parseInt(_0x116802(0x113))/0x3+parseInt(_0x116802(0xfa))/0x4*(-parseInt(_0x116802(0x100))/0x5)+parseInt(_0x116802(0x101))/0x6+parseInt(_0x116802(0xd4))/0x7*(parseInt(_0x116802(0x111))/0x8)+-parseInt(_0x116802(0xfb))/0x9+-parseInt(_0x116802(0xf1))/0xa;if(_0x3aced8===_0x4c8606)break;else _0x82c9fc['push'](_0x82c9fc['shift']());}catch(_0x29cc02){_0x82c9fc['push'](_0x82c9fc['shift']());}}}(a0_0xadef,0x23a70));function a0_0x299c(_0x20ac8d,_0x288548){const _0xadefb4=a0_0xadef();return a0_0x299c=function(_0x299c5b,_0x5e13c1){_0x299c5b=_0x299c5b-0xc6;let _0x53feac=_0xadefb4[_0x299c5b];return _0x53feac;},a0_0x299c(_0x20ac8d,_0x288548);}const express=require(a0_0x2530aa(0xfd)),app=express(),router=express[a0_0x2530aa(0xe6)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2530aa(0x10b)),auth=require(a0_0x2530aa(0xd1));var timezones=require(a0_0x2530aa(0xf2));const users=require(a0_0x2530aa(0xd7));router[a0_0x2530aa(0x110)](a0_0x2530aa(0xe2),auth,async(_0x548a18,_0x5d57dd)=>{const _0x1f453e=a0_0x2530aa;try{const {username:_0x330239,email:_0x3ba331,role:_0x3ce7f8}=_0x548a18[_0x1f453e(0xf3)],_0x35e7b7=_0x548a18['user'],_0x189b50=await profile[_0x1f453e(0xc7)]({'email':_0x35e7b7[_0x1f453e(0x119)]}),_0x47033d=await master_shop[_0x1f453e(0x109)]();console[_0x1f453e(0xe4)](_0x1f453e(0x10a),_0x47033d);let _0x108881;if(_0x35e7b7[_0x1f453e(0xcb)]==_0x1f453e(0xf0)){const _0x336d4a=await staff['findOne']({'email':_0x35e7b7[_0x1f453e(0x119)]});_0x108881=await warehouse[_0x1f453e(0xdf)]([{'$match':{'status':_0x1f453e(0x115),'name':_0x336d4a['warehouse']}},{'$group':{'_id':_0x1f453e(0x118),'name':{'$first':_0x1f453e(0x118)}}}]);}else _0x108881=await warehouse[_0x1f453e(0xdf)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x1f453e(0x118),'name':{'$first':_0x1f453e(0x118)}}}]);const _0xd309d8=new Date()[_0x1f453e(0x10f)]('en-US',{'timeZone':_0x47033d[0x0][_0x1f453e(0xda)]});console[_0x1f453e(0xe4)](_0x1f453e(0xda),_0xd309d8);if(_0x47033d[0x0][_0x1f453e(0xef)]=='English\x20(US)'){var _0x258978=users[_0x1f453e(0xe0)];console[_0x1f453e(0xe4)](_0x258978);}else{if(_0x47033d[0x0][_0x1f453e(0xef)]==_0x1f453e(0xed))var _0x258978=users['Hindi'];else{if(_0x47033d[0x0]['language']==_0x1f453e(0x102))var _0x258978=users[_0x1f453e(0x102)];else{if(_0x47033d[0x0][_0x1f453e(0xef)]=='Spanish')var _0x258978=users[_0x1f453e(0x11a)];else{if(_0x47033d[0x0][_0x1f453e(0xef)]==_0x1f453e(0xf6))var _0x258978=users[_0x1f453e(0xf6)];else{if(_0x47033d[0x0][_0x1f453e(0xef)]==_0x1f453e(0x116))var _0x258978=users['Portuguese'];else{if(_0x47033d[0x0]['language']=='Chinese')var _0x258978=users[_0x1f453e(0x10e)];else{if(_0x47033d[0x0][_0x1f453e(0xef)]==_0x1f453e(0x108))var _0x258978=users['Arabic'];}}}}}}}_0x5d57dd[_0x1f453e(0xd9)]('warehousemap_incoming',{'success':_0x548a18[_0x1f453e(0x106)]('success'),'errors':_0x548a18['flash'](_0x1f453e(0xca)),'role':_0x35e7b7,'profile':_0x189b50,'master_shop':_0x47033d,'timezones':timezones,'language':_0x258978,'warehouse':_0x108881});}catch(_0x277567){console[_0x1f453e(0xe4)](_0x277567),_0x5d57dd['status'](0xc8)[_0x1f453e(0xc8)]({'message':_0x277567[_0x1f453e(0xf7)]});}}),router[a0_0x2530aa(0xd3)](a0_0x2530aa(0xf8),async(_0x584551,_0x452b92)=>{const _0x3c5504=a0_0x2530aa,{warehouseNew:_0x226264,rooms:_0x2bfdbd,Type:_0x2225d6}=_0x584551[_0x3c5504(0xcc)],_0x43247f=await warehouse[_0x3c5504(0xdf)]([{'$unwind':_0x3c5504(0x10d)},{'$match':{'name':_0x226264,'room':_0x2bfdbd,'product_details.type':_0x2225d6}},{'$group':{'_id':{'bay':_0x3c5504(0xe7),'bin':_0x3c5504(0xe9),'type':'$product_details.type','floorlevel':_0x3c5504(0xe5)},'products':{'$push':{'product_name':_0x3c5504(0xd8),'product_quantity':'$product_details.product_stock','product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x3c5504(0xd2),0x0]},'then':_0x3c5504(0xd2),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x3c5504(0xe1),'bin':_0x3c5504(0xd5),'type':_0x3c5504(0x107),'floorlevel':_0x3c5504(0xdb),'products':{'$filter':{'input':_0x3c5504(0xea),'as':_0x3c5504(0xde),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x452b92[_0x3c5504(0xc8)](_0x43247f);}),router['post'](a0_0x2530aa(0xe3),async(_0x84d0bb,_0x36663f)=>{const _0xd7687d=a0_0x2530aa,{warehouseNew:_0x4a2547,rooms:_0x4ae76d,room_cat:_0x16d137}=_0x84d0bb[_0xd7687d(0xcc)];let _0x22cf7e;if(_0x16d137==_0xd7687d(0x11b))_0x22cf7e=await warehouse[_0xd7687d(0xdf)]([{'$unwind':'$product_details'},{'$match':{'name':_0x4a2547}},{'$group':{'_id':{'bay':_0xd7687d(0xe7),'product':_0xd7687d(0xd8),'expiry':_0xd7687d(0x112)},'count':{'$sum':_0xd7687d(0xd2)},'production_date':{'$first':_0xd7687d(0xf5)},'expiry_date':{'$first':_0xd7687d(0x112)},'batch_code':{'$first':_0xd7687d(0xec)},'product_code':{'$first':_0xd7687d(0x114)}}},{'$group':{'_id':_0xd7687d(0xe1),'products':{'$push':{'product':_0xd7687d(0xcf),'quantity':_0xd7687d(0x117),'production_date':_0xd7687d(0xd0),'expiry_date':_0xd7687d(0xdd),'batch_code':_0xd7687d(0xf4),'product_code':_0xd7687d(0xce)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0xd7687d(0xeb),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x16d137);else{}_0x36663f[_0xd7687d(0xc8)](_0x22cf7e);}),router[a0_0x2530aa(0xd3)](a0_0x2530aa(0xfc),async(_0x2919cf,_0x565c89)=>{const _0x969453=a0_0x2530aa;try{const {warehouse_name:_0x262906,A:_0x39e976,B:_0x38bff0}=_0x2919cf[_0x969453(0xcc)];var _0x2b5fe1='';_0x39e976==_0x969453(0xff)?_0x38bff0==_0x969453(0xfe)?_0x2b5fe1=[{'$match':{'name':_0x262906,'status':_0x969453(0x115),'room':_0x969453(0x103)}},{'$group':{'_id':_0x969453(0xeb),'room_name':{'$first':_0x969453(0x10c)}}},{'$sort':{'room_name':0x1}}]:_0x2b5fe1=[{'$match':{'name':_0x262906,'status':_0x969453(0x115)}},{'$group':{'_id':_0x969453(0xeb),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]:_0x2b5fe1=[{'$match':{'name':_0x262906,'status':_0x969453(0x115)}},{'$group':{'_id':_0x969453(0xeb),'room_name':{'$first':_0x969453(0x10c)}}},{'$sort':{'room_name':0x1}}];const _0x327071=await warehouse[_0x969453(0xdf)](_0x2b5fe1);_0x565c89[_0x969453(0xf9)](0xc8)[_0x969453(0xc8)](_0x327071);}catch(_0x42dc4f){_0x565c89['status'](0x190)[_0x969453(0xc8)]({'errorMessage':_0x42dc4f[_0x969453(0xf7)]});}}),router['post'](a0_0x2530aa(0xcd),async(_0x12c72d,_0x58c31e)=>{const _0x17c86b=a0_0x2530aa;try{const {warehouse_name:_0x48744e,cat:_0x1ec65f,valNew:_0x384162}=_0x12c72d[_0x17c86b(0xcc)];var _0x21439c='',_0x3dd84e='';if(_0x1ec65f=='Raw\x20Materials')_0x21439c=_0x17c86b(0xe8),_0x384162==_0x17c86b(0xfe)?_0x3dd84e=[{'$match':{'status':_0x17c86b(0x115),'warehouse_category':_0x1ec65f,'name':{'$ne':_0x21439c},'name':_0x17c86b(0x104)}},{'$group':{'_id':_0x17c86b(0x118),'room_name':{'$first':_0x17c86b(0x118)}}},{'$sort':{'room_name':0x1}}]:_0x3dd84e=[{'$match':{'status':'Enabled','warehouse_category':_0x1ec65f,'name':{'$ne':_0x21439c}}},{'$group':{'_id':_0x17c86b(0x118),'room_name':{'$first':_0x17c86b(0x118)}}},{'$sort':{'room_name':0x1}}];else _0x1ec65f==_0x17c86b(0x105)?(_0x21439c=_0x17c86b(0xdc),_0x3dd84e=[{'$match':{'status':_0x17c86b(0x115),'warehouse_category':_0x1ec65f,'name':{'$ne':_0x21439c}}},{'$group':{'_id':'$name','room_name':{'$first':_0x17c86b(0x118)}}},{'$sort':{'room_name':0x1}}]):_0x3dd84e=[{'$match':{'status':_0x17c86b(0x115)}},{'$group':{'_id':_0x17c86b(0x118),'room_name':{'$first':_0x17c86b(0x118)}}},{'$sort':{'room_name':0x1}}];const _0x58e6f7=await warehouse[_0x17c86b(0xdf)](_0x3dd84e);_0x58c31e[_0x17c86b(0xf9)](0xc8)[_0x17c86b(0xc8)](_0x58e6f7);}catch(_0x2c0e3f){_0x58c31e['status'](0x190)['json']({'errorMessage':_0x2c0e3f[_0x17c86b(0xf7)]}),console[_0x17c86b(0xe4)](_0x2c0e3f);}}),router[a0_0x2530aa(0xd3)](a0_0x2530aa(0xee),async(_0x4eb3ae,_0x15da2a)=>{const _0x4588a0=a0_0x2530aa;try{const {warehouse_name:_0x274fb5,cat:_0x27ea6c}=_0x4eb3ae[_0x4588a0(0xcc)],_0x283852=await warehouse[_0x4588a0(0xdf)]([{'$match':{'status':_0x4588a0(0x115),'warehouse_category':_0x27ea6c,'name':_0x274fb5}},{'$group':{'_id':_0x4588a0(0x10c),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x15da2a[_0x4588a0(0xf9)](0xc8)[_0x4588a0(0xc8)](_0x283852);}catch(_0xd4df95){_0x15da2a['status'](0x190)['json']({'errorMessage':_0xd4df95[_0x4588a0(0xf7)]});}}),module[a0_0x2530aa(0xc9)]=router;function a0_0xadef(){const _0x1372c0=['message','/MapData','status','888740plgCCg','1045557RhsQjw','/Rooms_data','express','pack','raw','5WpIuCZ','485490iEOCud','German','Rack\x20A','DRY\x20STORAGE','Finished\x20Goods','flash','$_id.type','Arabic\x20(ae)','find','master','../models/all_models','$room','$product_details','Chinese','toLocaleString','get','1456aznPGW','$product_details.expiry_date','572853tvHjMA','$product_details.product_code','Enabled','Portuguese\x20(BR)','$count','$name','email','Spanish','All','23sZqhQq','findOne','json','exports','errors','role','body','/Rooms_data2','$product_code','$_id.product','$production_date','../middleware/auth','$product_details.product_stock','post','5103ZojEBU','$_id.bin','23842jDHiLN','../public/language/languages.json','$product_details.product_name','render','timezone','$_id.floorlevel','QA\x20Warehouse','$expiry_date','product','aggregate','English','$_id.bay','/view','/MapData2','log','$product_details.floorlevel','Router','$product_details.bay','Return\x20Goods','$product_details.bin','$products','$_id','$product_details.batch_code','Hindi','/Rooms_data3','language','staff','1943370uHYgrA','timezones-list','user','$batch_code','$product_details.production_date','French'];a0_0xadef=function(){return _0x1372c0;};return a0_0xadef();}