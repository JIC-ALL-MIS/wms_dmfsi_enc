const a0_0x15a114=a0_0x33b3;(function(_0x3f1618,_0x3512a0){const _0x341c12=a0_0x33b3,_0x3ee0b4=_0x3f1618();while(!![]){try{const _0x3c4a6a=parseInt(_0x341c12(0x201))/0x1+-parseInt(_0x341c12(0x1ff))/0x2*(parseInt(_0x341c12(0x205))/0x3)+-parseInt(_0x341c12(0x215))/0x4*(parseInt(_0x341c12(0x1e1))/0x5)+parseInt(_0x341c12(0x1f0))/0x6+-parseInt(_0x341c12(0x20f))/0x7*(parseInt(_0x341c12(0x1ed))/0x8)+parseInt(_0x341c12(0x1f6))/0x9*(parseInt(_0x341c12(0x1f7))/0xa)+-parseInt(_0x341c12(0x1e2))/0xb;if(_0x3c4a6a===_0x3512a0)break;else _0x3ee0b4['push'](_0x3ee0b4['shift']());}catch(_0x2c7ae6){_0x3ee0b4['push'](_0x3ee0b4['shift']());}}}(a0_0x1ded,0x7fb74));function a0_0x33b3(_0x384959,_0x238b99){const _0x1ded17=a0_0x1ded();return a0_0x33b3=function(_0x33b302,_0x42266f){_0x33b302=_0x33b302-0x1df;let _0x3e5f8b=_0x1ded17[_0x33b302];return _0x3e5f8b;},a0_0x33b3(_0x384959,_0x238b99);}const express=require(a0_0x15a114(0x1e4)),app=express(),router=express[a0_0x15a114(0x1f4)](),bcrypt=require(a0_0x15a114(0x211)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require(a0_0x15a114(0x20e));router[a0_0x15a114(0x209)](a0_0x15a114(0x1f1),async(_0x32e22d,_0xeb9a07)=>{const _0x4fdce6=a0_0x15a114,_0x161dfd=await master_shop[_0x4fdce6(0x214)]();_0xeb9a07[_0x4fdce6(0x1e8)](_0x4fdce6(0x1ea),{'success':_0x32e22d[_0x4fdce6(0x1f9)](_0x4fdce6(0x20a)),'errors':_0x32e22d[_0x4fdce6(0x1f9)](_0x4fdce6(0x219)),'master_shop':_0x161dfd});});function a0_0x1ded(){const _0x29e3b0=['False','log','errors','port','Error\x20Occurs','findOne','</h5>','error',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','/code/','Logo.png','email','code','image','save','createTransport','logo','<strong>\x20Regards\x20</strong>','/forgotPassword/code','11485AjKPxv','3011492jXvYkl','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','express','post','<p>Hello\x20','<div>','render','sendMail','email_reset','</div>','redirect','5216iGNGmV','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','Password\x20Successfuly\x20Reset\x20-\x20','3139794ndpYur','/view','password','/upload/','Router','floor','52362svIjzs','940AaorYe','</b></h1></p>','flash','True','length','site_title','</head><body>','random','26nRVHoH','<h5>','916608LVbiKX','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','host','isUsed','18663IDTXvz','<hr\x20class=\x22my-3\x22>','hash','/../public','get','success','</body></html>','body','<html><head><title></title>','nodemailer','10871Bpgaya','Email\x20sent\x20successfully','bcryptjs','/forgotPassword/view','exports','find','168ommxfT','/forgotPassword/code/'];a0_0x1ded=function(){return _0x29e3b0;};return a0_0x1ded();}function generateRandomAlphanumericString(_0x3151e7=0x6){const _0x18e1d1=a0_0x15a114,_0xab9aac='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x459643='';for(let _0x28714f=0x0;_0x28714f<_0x3151e7;_0x28714f++){const _0xf6d619=Math[_0x18e1d1(0x1f5)](Math[_0x18e1d1(0x1fe)]()*_0xab9aac[_0x18e1d1(0x1fb)]);_0x459643+=_0xab9aac[_0xf6d619];}return _0x459643;}router['post'](a0_0x15a114(0x1f1),async(_0x4a8c60,_0x571002)=>{const _0x15d526=a0_0x15a114,{email:_0x45fbd0}=_0x4a8c60['body'],_0x3d4e69=await sing_up[_0x15d526(0x21c)]({'email':_0x45fbd0});var _0x237e95=generateRandomAlphanumericString();const _0xf034ba=await bcrypt[_0x15d526(0x207)](_0x237e95,0xa);if(_0x3d4e69){_0x3d4e69[_0x15d526(0x223)]=_0x237e95,_0x3d4e69[_0x15d526(0x204)]=_0x15d526(0x217);const _0x4f0676=_0x3d4e69[_0x15d526(0x225)](),_0x41e986=await master_shop[_0x15d526(0x214)](),_0x5c997b=await email_settings[_0x15d526(0x21c)]();let _0x644b43=nodemailer[_0x15d526(0x226)]({'host':_0x5c997b[_0x15d526(0x203)],'port':Number(_0x5c997b[_0x15d526(0x21a)]),'secure':![],'auth':{'user':_0x5c997b[_0x15d526(0x222)],'pass':_0x5c997b['password']}}),_0x58be93={'from':_0x5c997b[_0x15d526(0x222)],'to':_0x3d4e69[_0x15d526(0x222)],'subject':'Password\x20Reset\x20-\x20'+_0x41e986[0x0]['site_title'],'attachments':[{'filename':_0x15d526(0x221),'path':__dirname+_0x15d526(0x208)+_0x15d526(0x1f3)+_0x41e986[0x0][_0x15d526(0x224)],'cid':_0x15d526(0x227)}],'html':'<!DOCTYPE\x20html>'+_0x15d526(0x20d)+_0x15d526(0x1fd)+_0x15d526(0x1e7)+_0x15d526(0x202)+_0x15d526(0x1e7)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x15d526(0x1eb)+_0x15d526(0x1eb)+_0x15d526(0x1e7)+_0x15d526(0x1e3)+_0x237e95+_0x15d526(0x1f8)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x15d526(0x1e7)+'<strong>\x20Regards\x20</strong>'+_0x15d526(0x200)+_0x41e986[0x0][_0x15d526(0x1fc)]+_0x15d526(0x21d)+_0x15d526(0x1eb)+_0x15d526(0x1eb)+_0x15d526(0x20b)};_0x644b43['sendMail'](_0x58be93,function(_0x35ba23,_0x4e044a){const _0x1a207b=_0x15d526;_0x35ba23?(console['log'](_0x35ba23),console[_0x1a207b(0x218)](_0x1a207b(0x21b))):console['log'](_0x1a207b(0x210));}),_0x571002['redirect'](_0x15d526(0x216));}else _0x4a8c60['flash']('error',_0x15d526(0x1ee)),_0x571002[_0x15d526(0x1ec)](_0x15d526(0x212));}),router[a0_0x15a114(0x209)](a0_0x15a114(0x220),async(_0x4cb00d,_0x3d5cf1)=>{const _0x4a508=a0_0x15a114,_0x61c9c0=await master_shop[_0x4a508(0x214)]();_0x3d5cf1[_0x4a508(0x1e8)]('email_code',{'success':_0x4cb00d[_0x4a508(0x1f9)](_0x4a508(0x20a)),'errors':_0x4cb00d[_0x4a508(0x1f9)](_0x4a508(0x219)),'master_shop':_0x61c9c0});}),router[a0_0x15a114(0x1e5)]('/code/',async(_0x16cd3e,_0x313eac)=>{const _0x46a70c=a0_0x15a114,{code:_0x3a06a}=_0x16cd3e['body'],_0x194947=await sing_up[_0x46a70c(0x214)]({'code':_0x3a06a});console[_0x46a70c(0x218)](_0x194947['length']),_0x313eac['json'](_0x194947);}),router[a0_0x15a114(0x1e5)]('/code_password/',async(_0x180c40,_0x14bc82)=>{const _0x4aa0e7=a0_0x15a114,{codex:_0x424010,password:_0x588c29,cpassword:_0x2d7b65,email:_0x40aa44}=_0x180c40[_0x4aa0e7(0x20c)],_0x1559a8=await sing_up[_0x4aa0e7(0x21c)]({'code':_0x424010,'email':_0x40aa44,'isUsed':'False'}),_0x7e5c4b=await bcrypt[_0x4aa0e7(0x207)](_0x588c29,0xa);if(_0x1559a8){_0x1559a8[_0x4aa0e7(0x1f2)]=_0x7e5c4b,_0x1559a8[_0x4aa0e7(0x204)]=_0x4aa0e7(0x1fa);const _0x2f2ceb=_0x1559a8['save'](),_0x2230cb=await master_shop[_0x4aa0e7(0x214)](),_0x37acf8=await email_settings[_0x4aa0e7(0x21c)]();let _0x5efc6e=nodemailer[_0x4aa0e7(0x226)]({'host':_0x37acf8['host'],'port':Number(_0x37acf8['port']),'secure':![],'auth':{'user':_0x37acf8[_0x4aa0e7(0x222)],'pass':_0x37acf8[_0x4aa0e7(0x1f2)]}}),_0x268717={'from':_0x37acf8[_0x4aa0e7(0x222)],'to':_0x1559a8[_0x4aa0e7(0x222)],'subject':_0x4aa0e7(0x1ef)+_0x2230cb[0x0][_0x4aa0e7(0x1fc)],'attachments':[{'filename':_0x4aa0e7(0x221),'path':__dirname+_0x4aa0e7(0x208)+'/upload/'+_0x2230cb[0x0][_0x4aa0e7(0x224)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x4aa0e7(0x20d)+'</head><body>'+_0x4aa0e7(0x1e7)+_0x4aa0e7(0x202)+_0x4aa0e7(0x1e7)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x4aa0e7(0x1eb)+_0x4aa0e7(0x1eb)+'<div>'+_0x4aa0e7(0x1e6)+_0x1559a8['name']+_0x4aa0e7(0x21f)+'</div>'+_0x4aa0e7(0x206)+_0x4aa0e7(0x1e7)+_0x4aa0e7(0x1df)+_0x4aa0e7(0x200)+_0x2230cb[0x0][_0x4aa0e7(0x1fc)]+'</h5>'+_0x4aa0e7(0x1eb)+'</div>'+'</body></html>'};_0x5efc6e[_0x4aa0e7(0x1e9)](_0x268717,function(_0x304463,_0x19747b){const _0xd3c256=_0x4aa0e7;_0x304463?(console[_0xd3c256(0x218)](_0x304463),console[_0xd3c256(0x218)](_0xd3c256(0x21b))):console[_0xd3c256(0x218)](_0xd3c256(0x210));}),_0x14bc82['redirect']('/login/');}else _0x180c40[_0x4aa0e7(0x1f9)](_0x4aa0e7(0x21e),_0x4aa0e7(0x1ee)),_0x14bc82[_0x4aa0e7(0x1ec)](_0x4aa0e7(0x1e0));}),module[a0_0x15a114(0x213)]=router;