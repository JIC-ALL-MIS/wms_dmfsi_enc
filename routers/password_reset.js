const a0_0x5159b4=a0_0x124b;(function(_0xa2dc0b,_0x1f8168){const _0x3b8951=a0_0x124b,_0x4ca9ba=_0xa2dc0b();while(!![]){try{const _0x2646d9=parseInt(_0x3b8951(0x14a))/0x1*(-parseInt(_0x3b8951(0x173))/0x2)+parseInt(_0x3b8951(0x169))/0x3+parseInt(_0x3b8951(0x17b))/0x4*(-parseInt(_0x3b8951(0x16a))/0x5)+-parseInt(_0x3b8951(0x177))/0x6*(parseInt(_0x3b8951(0x14c))/0x7)+parseInt(_0x3b8951(0x156))/0x8*(-parseInt(_0x3b8951(0x17e))/0x9)+parseInt(_0x3b8951(0x15b))/0xa*(-parseInt(_0x3b8951(0x142))/0xb)+parseInt(_0x3b8951(0x140))/0xc;if(_0x2646d9===_0x1f8168)break;else _0x4ca9ba['push'](_0x4ca9ba['shift']());}catch(_0x3ab1ee){_0x4ca9ba['push'](_0x4ca9ba['shift']());}}}(a0_0x1e53,0xdccd4));function a0_0x1e53(){const _0x3d9cdd=['body','length','/code_password/','site_title','/forgotPassword/code/','<div>','/forgotPassword/view','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','/view','45199548ypNZgg','bcryptjs','4850472yNiorK','password','Router','Error\x20Occurs','errors','save','sendMail','email_code','212644jpxkzg','../middleware/auth','7vTMwSS','Logo.png','email','post','error','flash','</div>','code','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','find','9651416hwlMxp',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','log','</body></html>','/../public','10PBPpec','/login/','/code/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','logo','<p>Hello\x20','nodemailer','../models/all_models','Email\x20sent\x20successfully','host','image','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','redirect','</b></h1></p>','2723301thZKWy','1010bQGZmI','<html><head><title></title>','name','floor','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','False','<strong>\x20Regards\x20</strong>','</h5>','</head><body>','10ndFmGg','findOne','success','<h5>','5201322PUETMp','True','createTransport','email_reset','3812IDlsJk','port','Password\x20Successfuly\x20Reset\x20-\x20','9iwnPJC','<!DOCTYPE\x20html>','isUsed'];a0_0x1e53=function(){return _0x3d9cdd;};return a0_0x1e53();}const express=require('express'),app=express(),router=express[a0_0x5159b4(0x144)](),bcrypt=require(a0_0x5159b4(0x141)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x5159b4(0x162)),auth=require(a0_0x5159b4(0x14b)),nodemailer=require(a0_0x5159b4(0x161));router['get'](a0_0x5159b4(0x13f),async(_0x427f5e,_0x4d7b36)=>{const _0x409eea=a0_0x5159b4,_0x37b0c7=await master_shop[_0x409eea(0x155)]();_0x4d7b36['render'](_0x409eea(0x17a),{'success':_0x427f5e['flash']('success'),'errors':_0x427f5e[_0x409eea(0x151)](_0x409eea(0x146)),'master_shop':_0x37b0c7});});function generateRandomAlphanumericString(_0x43e9f3=0x6){const _0x325d80=a0_0x5159b4,_0x2cbadd=_0x325d80(0x16e);let _0x166647='';for(let _0x4afc9a=0x0;_0x4afc9a<_0x43e9f3;_0x4afc9a++){const _0x5f0b4a=Math[_0x325d80(0x16d)](Math['random']()*_0x2cbadd[_0x325d80(0x138)]);_0x166647+=_0x2cbadd[_0x5f0b4a];}return _0x166647;}function a0_0x124b(_0x43bff7,_0x5b9397){const _0x1e537d=a0_0x1e53();return a0_0x124b=function(_0x124bbf,_0x1b112e){_0x124bbf=_0x124bbf-0x135;let _0x54aa08=_0x1e537d[_0x124bbf];return _0x54aa08;},a0_0x124b(_0x43bff7,_0x5b9397);}router[a0_0x5159b4(0x14f)](a0_0x5159b4(0x13f),async(_0x499360,_0x167f0a)=>{const _0x51fc98=a0_0x5159b4,{email:_0x561d1a}=_0x499360['body'],_0x12cd43=await sing_up[_0x51fc98(0x174)]({'email':_0x561d1a});var _0x78da65=generateRandomAlphanumericString();const _0x4ab614=await bcrypt['hash'](_0x78da65,0xa);if(_0x12cd43){_0x12cd43[_0x51fc98(0x153)]=_0x78da65,_0x12cd43[_0x51fc98(0x136)]=_0x51fc98(0x16f);const _0x57fd4a=_0x12cd43[_0x51fc98(0x147)](),_0xf0857a=await master_shop[_0x51fc98(0x155)](),_0x52c4dc=await email_settings[_0x51fc98(0x174)]();let _0x520596=nodemailer['createTransport']({'host':_0x52c4dc['host'],'port':Number(_0x52c4dc[_0x51fc98(0x17c)]),'secure':![],'auth':{'user':_0x52c4dc['email'],'pass':_0x52c4dc[_0x51fc98(0x143)]}}),_0x416392={'from':_0x52c4dc[_0x51fc98(0x14e)],'to':_0x12cd43['email'],'subject':'Password\x20Reset\x20-\x20'+_0xf0857a[0x0][_0x51fc98(0x13a)],'attachments':[{'filename':_0x51fc98(0x14d),'path':__dirname+_0x51fc98(0x15a)+'/upload/'+_0xf0857a[0x0][_0x51fc98(0x165)],'cid':_0x51fc98(0x15f)}],'html':_0x51fc98(0x135)+_0x51fc98(0x16b)+_0x51fc98(0x172)+_0x51fc98(0x13c)+_0x51fc98(0x15e)+_0x51fc98(0x13c)+_0x51fc98(0x166)+_0x51fc98(0x152)+'</div>'+'<div>'+_0x51fc98(0x13e)+_0x78da65+_0x51fc98(0x168)+_0x51fc98(0x152)+'<hr\x20class=\x22my-3\x22>'+'<div>'+_0x51fc98(0x170)+_0x51fc98(0x176)+_0xf0857a[0x0][_0x51fc98(0x13a)]+_0x51fc98(0x171)+'</div>'+_0x51fc98(0x152)+'</body></html>'};_0x520596[_0x51fc98(0x148)](_0x416392,function(_0x34e3bf,_0x3bb8d1){const _0x109a1e=_0x51fc98;_0x34e3bf?(console[_0x109a1e(0x158)](_0x34e3bf),console[_0x109a1e(0x158)](_0x109a1e(0x145))):console[_0x109a1e(0x158)](_0x109a1e(0x163));}),_0x167f0a['redirect'](_0x51fc98(0x13b));}else _0x499360[_0x51fc98(0x151)](_0x51fc98(0x150),_0x51fc98(0x154)),_0x167f0a[_0x51fc98(0x167)](_0x51fc98(0x13d));}),router['get']('/code/',async(_0x23fdcd,_0x1ecf9a)=>{const _0x530beb=a0_0x5159b4,_0x235955=await master_shop['find']();_0x1ecf9a['render'](_0x530beb(0x149),{'success':_0x23fdcd[_0x530beb(0x151)](_0x530beb(0x175)),'errors':_0x23fdcd[_0x530beb(0x151)](_0x530beb(0x146)),'master_shop':_0x235955});}),router[a0_0x5159b4(0x14f)](a0_0x5159b4(0x15d),async(_0x213d6e,_0x131a8c)=>{const _0x5100bd=a0_0x5159b4,{code:_0x16e60d}=_0x213d6e[_0x5100bd(0x137)],_0x3bd3e3=await sing_up[_0x5100bd(0x155)]({'code':_0x16e60d});console[_0x5100bd(0x158)](_0x3bd3e3[_0x5100bd(0x138)]),_0x131a8c['json'](_0x3bd3e3);}),router['post'](a0_0x5159b4(0x139),async(_0x1412af,_0x9dbb84)=>{const _0x3c2560=a0_0x5159b4,{codex:_0x164bf1,password:_0x2ad986,cpassword:_0x4c934b,email:_0x5cdf89}=_0x1412af[_0x3c2560(0x137)],_0x11d447=await sing_up[_0x3c2560(0x174)]({'code':_0x164bf1,'email':_0x5cdf89,'isUsed':_0x3c2560(0x16f)}),_0x3a2827=await bcrypt['hash'](_0x2ad986,0xa);if(_0x11d447){_0x11d447[_0x3c2560(0x143)]=_0x3a2827,_0x11d447[_0x3c2560(0x136)]=_0x3c2560(0x178);const _0x4998c3=_0x11d447['save'](),_0x38b34e=await master_shop[_0x3c2560(0x155)](),_0x5c3da0=await email_settings[_0x3c2560(0x174)]();let _0x5dd00f=nodemailer[_0x3c2560(0x179)]({'host':_0x5c3da0[_0x3c2560(0x164)],'port':Number(_0x5c3da0[_0x3c2560(0x17c)]),'secure':![],'auth':{'user':_0x5c3da0[_0x3c2560(0x14e)],'pass':_0x5c3da0[_0x3c2560(0x143)]}}),_0xe3833f={'from':_0x5c3da0['email'],'to':_0x11d447[_0x3c2560(0x14e)],'subject':_0x3c2560(0x17d)+_0x38b34e[0x0][_0x3c2560(0x13a)],'attachments':[{'filename':_0x3c2560(0x14d),'path':__dirname+_0x3c2560(0x15a)+'/upload/'+_0x38b34e[0x0][_0x3c2560(0x165)],'cid':_0x3c2560(0x15f)}],'html':_0x3c2560(0x135)+'<html><head><title></title>'+_0x3c2560(0x172)+_0x3c2560(0x13c)+_0x3c2560(0x15e)+_0x3c2560(0x13c)+_0x3c2560(0x166)+'</div>'+'</div>'+_0x3c2560(0x13c)+_0x3c2560(0x160)+_0x11d447[_0x3c2560(0x16c)]+_0x3c2560(0x157)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x3c2560(0x13c)+'<strong>\x20Regards\x20</strong>'+_0x3c2560(0x176)+_0x38b34e[0x0]['site_title']+'</h5>'+_0x3c2560(0x152)+_0x3c2560(0x152)+_0x3c2560(0x159)};_0x5dd00f[_0x3c2560(0x148)](_0xe3833f,function(_0x29b15b,_0x491efe){const _0x14c56c=_0x3c2560;_0x29b15b?(console[_0x14c56c(0x158)](_0x29b15b),console[_0x14c56c(0x158)](_0x14c56c(0x145))):console[_0x14c56c(0x158)](_0x14c56c(0x163));}),_0x9dbb84[_0x3c2560(0x167)](_0x3c2560(0x15c));}else _0x1412af[_0x3c2560(0x151)](_0x3c2560(0x150),_0x3c2560(0x154)),_0x9dbb84[_0x3c2560(0x167)]('/forgotPassword/code');}),module['exports']=router;