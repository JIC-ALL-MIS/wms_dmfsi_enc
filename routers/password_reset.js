const a0_0x1764ab=a0_0x4b5c;(function(_0x7b2bf3,_0x559b91){const _0x21be44=a0_0x4b5c,_0x2dade8=_0x7b2bf3();while(!![]){try{const _0x103afd=-parseInt(_0x21be44(0x13c))/0x1+-parseInt(_0x21be44(0x157))/0x2*(-parseInt(_0x21be44(0x16a))/0x3)+parseInt(_0x21be44(0x149))/0x4+-parseInt(_0x21be44(0x138))/0x5+-parseInt(_0x21be44(0x159))/0x6*(parseInt(_0x21be44(0x14c))/0x7)+parseInt(_0x21be44(0x16d))/0x8*(-parseInt(_0x21be44(0x16c))/0x9)+parseInt(_0x21be44(0x155))/0xa;if(_0x103afd===_0x559b91)break;else _0x2dade8['push'](_0x2dade8['shift']());}catch(_0x4c832c){_0x2dade8['push'](_0x2dade8['shift']());}}}(a0_0x51e1,0x2df8c));function a0_0x4b5c(_0x3e57a2,_0x2791b3){const _0x51e1fe=a0_0x51e1();return a0_0x4b5c=function(_0x4b5cc4,_0x1f31ac){_0x4b5cc4=_0x4b5cc4-0x12a;let _0x1f5b84=_0x51e1fe[_0x4b5cc4];return _0x1f5b84;},a0_0x4b5c(_0x3e57a2,_0x2791b3);}const express=require('express'),app=express(),router=express[a0_0x1764ab(0x130)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x1764ab(0x13e)),auth=require(a0_0x1764ab(0x161)),nodemailer=require('nodemailer');router['get']('/view',async(_0x41bfc2,_0x527f86)=>{const _0x24100f=a0_0x1764ab,_0x34f2cc=await master_shop[_0x24100f(0x151)]();_0x527f86[_0x24100f(0x137)]('email_reset',{'success':_0x41bfc2['flash'](_0x24100f(0x146)),'errors':_0x41bfc2[_0x24100f(0x12a)](_0x24100f(0x153)),'master_shop':_0x34f2cc});});function generateRandomAlphanumericString(_0x8c4f4a=0x6){const _0x275340=a0_0x1764ab,_0x473fbc=_0x275340(0x16e);let _0x47b2f2='';for(let _0x335582=0x0;_0x335582<_0x8c4f4a;_0x335582++){const _0x17cfc7=Math[_0x275340(0x15e)](Math[_0x275340(0x167)]()*_0x473fbc[_0x275340(0x12c)]);_0x47b2f2+=_0x473fbc[_0x17cfc7];}return _0x47b2f2;}router[a0_0x1764ab(0x13b)](a0_0x1764ab(0x12e),async(_0x5deb46,_0x2533ee)=>{const _0x57069e=a0_0x1764ab,{email:_0x3ee3df}=_0x5deb46[_0x57069e(0x140)],_0x156d2=await sing_up[_0x57069e(0x14e)]({'email':_0x3ee3df});var _0x56538d=generateRandomAlphanumericString();const _0xbf86e6=await bcrypt['hash'](_0x56538d,0xa);if(_0x156d2){_0x156d2[_0x57069e(0x171)]=_0x56538d,_0x156d2[_0x57069e(0x168)]='False';const _0x43396e=_0x156d2[_0x57069e(0x12f)](),_0x467f8b=await master_shop['find'](),_0x3c24d8=await email_settings[_0x57069e(0x14e)]();let _0x4ec93f=nodemailer[_0x57069e(0x163)]({'host':_0x3c24d8[_0x57069e(0x142)],'port':Number(_0x3c24d8['port']),'secure':![],'auth':{'user':_0x3c24d8[_0x57069e(0x145)],'pass':_0x3c24d8[_0x57069e(0x147)]}}),_0x4cc2b1={'from':_0x3c24d8['email'],'to':_0x156d2['email'],'subject':_0x57069e(0x14d)+_0x467f8b[0x0][_0x57069e(0x135)],'attachments':[{'filename':_0x57069e(0x14a),'path':__dirname+_0x57069e(0x15f)+_0x57069e(0x166)+_0x467f8b[0x0][_0x57069e(0x164)],'cid':_0x57069e(0x160)}],'html':_0x57069e(0x162)+_0x57069e(0x132)+_0x57069e(0x131)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x57069e(0x150)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x57069e(0x141)+_0x57069e(0x141)+_0x57069e(0x150)+_0x57069e(0x133)+_0x56538d+_0x57069e(0x12d)+_0x57069e(0x141)+_0x57069e(0x13a)+'<div>'+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x467f8b[0x0]['site_title']+_0x57069e(0x15b)+_0x57069e(0x141)+_0x57069e(0x141)+_0x57069e(0x15d)};_0x4ec93f['sendMail'](_0x4cc2b1,function(_0x1338ae,_0x31dead){const _0x2ab144=_0x57069e;_0x1338ae?(console[_0x2ab144(0x134)](_0x1338ae),console['log'](_0x2ab144(0x14f))):console[_0x2ab144(0x134)]('Email\x20sent\x20successfully');}),_0x2533ee['redirect'](_0x57069e(0x12b));}else _0x5deb46[_0x57069e(0x12a)](_0x57069e(0x169),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x2533ee[_0x57069e(0x139)](_0x57069e(0x152));}),router['get'](a0_0x1764ab(0x13f),async(_0x131c90,_0x127ec3)=>{const _0x284ad0=a0_0x1764ab,_0x2ae727=await master_shop['find']();_0x127ec3[_0x284ad0(0x137)](_0x284ad0(0x143),{'success':_0x131c90[_0x284ad0(0x12a)](_0x284ad0(0x146)),'errors':_0x131c90['flash'](_0x284ad0(0x153)),'master_shop':_0x2ae727});}),router[a0_0x1764ab(0x13b)](a0_0x1764ab(0x13f),async(_0x23a2cb,_0x25e450)=>{const _0x530866=a0_0x1764ab,{code:_0x4d1e54}=_0x23a2cb['body'],_0x17b2b0=await sing_up['find']({'code':_0x4d1e54});console[_0x530866(0x134)](_0x17b2b0[_0x530866(0x12c)]),_0x25e450[_0x530866(0x16f)](_0x17b2b0);}),router[a0_0x1764ab(0x13b)](a0_0x1764ab(0x15a),async(_0x5d2b9d,_0x33b02b)=>{const _0x58b195=a0_0x1764ab,{codex:_0x169ceb,password:_0x3c0a57,cpassword:_0x3bdc57,email:_0x78a078}=_0x5d2b9d[_0x58b195(0x140)],_0x5e48b4=await sing_up[_0x58b195(0x14e)]({'code':_0x169ceb,'email':_0x78a078,'isUsed':'False'}),_0x1549ec=await bcrypt['hash'](_0x3c0a57,0xa);if(_0x5e48b4){_0x5e48b4[_0x58b195(0x147)]=_0x1549ec,_0x5e48b4[_0x58b195(0x168)]=_0x58b195(0x136);const _0x28d905=_0x5e48b4[_0x58b195(0x12f)](),_0x23fc1c=await master_shop[_0x58b195(0x151)](),_0x4bcdb6=await email_settings['findOne']();let _0x4176db=nodemailer[_0x58b195(0x163)]({'host':_0x4bcdb6[_0x58b195(0x142)],'port':Number(_0x4bcdb6[_0x58b195(0x156)]),'secure':![],'auth':{'user':_0x4bcdb6[_0x58b195(0x145)],'pass':_0x4bcdb6[_0x58b195(0x147)]}}),_0x147047={'from':_0x4bcdb6['email'],'to':_0x5e48b4[_0x58b195(0x145)],'subject':_0x58b195(0x158)+_0x23fc1c[0x0][_0x58b195(0x135)],'attachments':[{'filename':_0x58b195(0x14a),'path':__dirname+_0x58b195(0x15f)+_0x58b195(0x166)+_0x23fc1c[0x0]['image'],'cid':'logo'}],'html':_0x58b195(0x162)+_0x58b195(0x132)+_0x58b195(0x131)+_0x58b195(0x150)+_0x58b195(0x14b)+'<div>'+_0x58b195(0x13d)+_0x58b195(0x141)+'</div>'+'<div>'+_0x58b195(0x16b)+_0x5e48b4[_0x58b195(0x154)]+_0x58b195(0x170)+_0x58b195(0x141)+'<hr\x20class=\x22my-3\x22>'+'<div>'+_0x58b195(0x15c)+_0x58b195(0x165)+_0x23fc1c[0x0][_0x58b195(0x135)]+_0x58b195(0x15b)+_0x58b195(0x141)+_0x58b195(0x141)+_0x58b195(0x15d)};_0x4176db['sendMail'](_0x147047,function(_0x435364,_0x26b7eb){const _0x2b6e6c=_0x58b195;_0x435364?(console['log'](_0x435364),console[_0x2b6e6c(0x134)](_0x2b6e6c(0x14f))):console[_0x2b6e6c(0x134)]('Email\x20sent\x20successfully');}),_0x33b02b['redirect'](_0x58b195(0x148));}else _0x5d2b9d[_0x58b195(0x12a)](_0x58b195(0x169),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x33b02b[_0x58b195(0x139)]('/forgotPassword/code');}),module[a0_0x1764ab(0x144)]=router;function a0_0x51e1(){const _0x532af8=['<!DOCTYPE\x20html>','createTransport','image','<h5>','/upload/','random','isUsed','error','3WRTcYU','<p>Hello\x20','2275821WmOoWQ','8NPWKxC','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','json',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','code','flash','/forgotPassword/code/','length','</b></h1></p>','/view','save','Router','</head><body>','<html><head><title></title>','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','log','site_title','True','render','600055eisSva','redirect','<hr\x20class=\x22my-3\x22>','post','281629qRLlVN','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','../models/all_models','/code/','body','</div>','host','email_code','exports','email','success','password','/login/','1338052tqbyXH','Logo.png','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','119273PxfWfy','Password\x20Reset\x20-\x20','findOne','Error\x20Occurs','<div>','find','/forgotPassword/view','errors','name','5731160PhfXPy','port','245218BmFxNh','Password\x20Successfuly\x20Reset\x20-\x20','66FCQqIw','/code_password/','</h5>','<strong>\x20Regards\x20</strong>','</body></html>','floor','/../public','logo','../middleware/auth'];a0_0x51e1=function(){return _0x532af8;};return a0_0x51e1();}