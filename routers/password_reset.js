const a0_0x4e35cd=a0_0x453b;function a0_0x453b(_0x3dfe38,_0x355ddc){const _0x3369d8=a0_0x3369();return a0_0x453b=function(_0x453b02,_0x49f990){_0x453b02=_0x453b02-0x17a;let _0x376c3c=_0x3369d8[_0x453b02];return _0x376c3c;},a0_0x453b(_0x3dfe38,_0x355ddc);}(function(_0x4b5a0d,_0x19fca2){const _0x2218f2=a0_0x453b,_0x4961bf=_0x4b5a0d();while(!![]){try{const _0x19bd52=-parseInt(_0x2218f2(0x1a6))/0x1*(parseInt(_0x2218f2(0x187))/0x2)+parseInt(_0x2218f2(0x1be))/0x3*(parseInt(_0x2218f2(0x18d))/0x4)+parseInt(_0x2218f2(0x1b9))/0x5+-parseInt(_0x2218f2(0x1b5))/0x6+parseInt(_0x2218f2(0x17a))/0x7+-parseInt(_0x2218f2(0x18a))/0x8+-parseInt(_0x2218f2(0x190))/0x9*(-parseInt(_0x2218f2(0x1ab))/0xa);if(_0x19bd52===_0x19fca2)break;else _0x4961bf['push'](_0x4961bf['shift']());}catch(_0x308ac6){_0x4961bf['push'](_0x4961bf['shift']());}}}(a0_0x3369,0x3ee5c));function a0_0x3369(){const _0x5ea3de=['ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','<hr\x20class=\x22my-3\x22>','name','body','<h5>','email','get','</head><body>','<html><head><title></title>','find','</b></h1></p>','hash','code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','14203mKEvJb','Email\x20sent\x20successfully','<!DOCTYPE\x20html>','Password\x20Reset\x20-\x20','site_title','230350HImJoV','</div>','errors','password','/forgotPassword/code','findOne','redirect','../middleware/auth','/../public','</h5>','509736McwwNE','bcryptjs','image','False','130925EhTKOR','render','sendMail','email_code','flash','39HTyCZs','logo','<strong>\x20Regards\x20</strong>','email_reset','Logo.png','142576zhaMWg','express','/forgotPassword/code/','Error\x20Occurs','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','/upload/','length','<div>','</body></html>','nodemailer','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','/view','Password\x20Successfuly\x20Reset\x20-\x20','10OnVNdj','post','random','2558128rHcxwM','createTransport','isUsed','90836kPvWUE','save','/code/','153GkSThk','/login/','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<p>Hello\x20','floor','success','host','log'];a0_0x3369=function(){return _0x5ea3de;};return a0_0x3369();}const express=require(a0_0x4e35cd(0x17b)),app=express(),router=express['Router'](),bcrypt=require(a0_0x4e35cd(0x1b6)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x4e35cd(0x1b2)),nodemailer=require(a0_0x4e35cd(0x183));router['get'](a0_0x4e35cd(0x185),async(_0x322967,_0x9e4bc4)=>{const _0x719fa4=a0_0x4e35cd,_0x341e5b=await master_shop[_0x719fa4(0x1a1)]();_0x9e4bc4[_0x719fa4(0x1ba)](_0x719fa4(0x1c1),{'success':_0x322967[_0x719fa4(0x1bd)]('success'),'errors':_0x322967[_0x719fa4(0x1bd)](_0x719fa4(0x1ad)),'master_shop':_0x341e5b});});function generateRandomAlphanumericString(_0x234145=0x6){const _0x30e56f=a0_0x4e35cd,_0xc9a686=_0x30e56f(0x198);let _0x50a876='';for(let _0x1d9e04=0x0;_0x1d9e04<_0x234145;_0x1d9e04++){const _0x394313=Math[_0x30e56f(0x194)](Math[_0x30e56f(0x189)]()*_0xc9a686['length']);_0x50a876+=_0xc9a686[_0x394313];}return _0x50a876;}router[a0_0x4e35cd(0x188)]('/view',async(_0x5c3ab0,_0x55a7c2)=>{const _0x597cf9=a0_0x4e35cd,{email:_0x180fd7}=_0x5c3ab0[_0x597cf9(0x19b)],_0x1a73cd=await sing_up[_0x597cf9(0x1b0)]({'email':_0x180fd7});var _0x758a5b=generateRandomAlphanumericString();const _0x2e9a74=await bcrypt['hash'](_0x758a5b,0xa);if(_0x1a73cd){_0x1a73cd[_0x597cf9(0x1a4)]=_0x758a5b,_0x1a73cd['isUsed']=_0x597cf9(0x1b8);const _0xbebd71=_0x1a73cd[_0x597cf9(0x18e)](),_0x557d21=await master_shop['find'](),_0x51ce1e=await email_settings[_0x597cf9(0x1b0)]();let _0x245e16=nodemailer[_0x597cf9(0x18b)]({'host':_0x51ce1e[_0x597cf9(0x196)],'port':Number(_0x51ce1e['port']),'secure':![],'auth':{'user':_0x51ce1e[_0x597cf9(0x19d)],'pass':_0x51ce1e[_0x597cf9(0x1ae)]}}),_0x86ca80={'from':_0x51ce1e[_0x597cf9(0x19d)],'to':_0x1a73cd[_0x597cf9(0x19d)],'subject':_0x597cf9(0x1a9)+_0x557d21[0x0][_0x597cf9(0x1aa)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x597cf9(0x17f)+_0x557d21[0x0][_0x597cf9(0x1b7)],'cid':_0x597cf9(0x1bf)}],'html':_0x597cf9(0x1a8)+_0x597cf9(0x1a0)+_0x597cf9(0x19f)+'<div>'+_0x597cf9(0x1a5)+_0x597cf9(0x181)+_0x597cf9(0x192)+_0x597cf9(0x1ac)+'</div>'+_0x597cf9(0x181)+_0x597cf9(0x17e)+_0x758a5b+_0x597cf9(0x1a2)+_0x597cf9(0x1ac)+'<hr\x20class=\x22my-3\x22>'+_0x597cf9(0x181)+_0x597cf9(0x1c0)+_0x597cf9(0x19c)+_0x557d21[0x0][_0x597cf9(0x1aa)]+_0x597cf9(0x1b4)+_0x597cf9(0x1ac)+_0x597cf9(0x1ac)+_0x597cf9(0x182)};_0x245e16[_0x597cf9(0x1bb)](_0x86ca80,function(_0x59ebb2,_0x331328){const _0x471b5e=_0x597cf9;_0x59ebb2?(console[_0x471b5e(0x197)](_0x59ebb2),console[_0x471b5e(0x197)]('Error\x20Occurs')):console[_0x471b5e(0x197)](_0x471b5e(0x1a7));}),_0x55a7c2[_0x597cf9(0x1b1)](_0x597cf9(0x17c));}else _0x5c3ab0[_0x597cf9(0x1bd)]('error',_0x597cf9(0x184)),_0x55a7c2[_0x597cf9(0x1b1)]('/forgotPassword/view');}),router[a0_0x4e35cd(0x19e)](a0_0x4e35cd(0x18f),async(_0x1970b8,_0x368cd1)=>{const _0x2cfad4=a0_0x4e35cd,_0x253d69=await master_shop[_0x2cfad4(0x1a1)]();_0x368cd1['render'](_0x2cfad4(0x1bc),{'success':_0x1970b8['flash'](_0x2cfad4(0x195)),'errors':_0x1970b8[_0x2cfad4(0x1bd)](_0x2cfad4(0x1ad)),'master_shop':_0x253d69});}),router[a0_0x4e35cd(0x188)](a0_0x4e35cd(0x18f),async(_0x1cacee,_0x2842b1)=>{const _0x3ffad4=a0_0x4e35cd,{code:_0x29d6f6}=_0x1cacee['body'],_0x2c8290=await sing_up[_0x3ffad4(0x1a1)]({'code':_0x29d6f6});console['log'](_0x2c8290[_0x3ffad4(0x180)]),_0x2842b1['json'](_0x2c8290);}),router[a0_0x4e35cd(0x188)]('/code_password/',async(_0x24794f,_0x54d9d7)=>{const _0x103e71=a0_0x4e35cd,{codex:_0x120377,password:_0x5179e6,cpassword:_0x9396c5,email:_0x1dbdfb}=_0x24794f[_0x103e71(0x19b)],_0xf7199e=await sing_up[_0x103e71(0x1b0)]({'code':_0x120377,'email':_0x1dbdfb,'isUsed':_0x103e71(0x1b8)}),_0x4ae203=await bcrypt[_0x103e71(0x1a3)](_0x5179e6,0xa);if(_0xf7199e){_0xf7199e[_0x103e71(0x1ae)]=_0x4ae203,_0xf7199e[_0x103e71(0x18c)]='True';const _0x284ff1=_0xf7199e[_0x103e71(0x18e)](),_0x2b3d14=await master_shop[_0x103e71(0x1a1)](),_0x3fdd46=await email_settings[_0x103e71(0x1b0)]();let _0x209262=nodemailer[_0x103e71(0x18b)]({'host':_0x3fdd46[_0x103e71(0x196)],'port':Number(_0x3fdd46['port']),'secure':![],'auth':{'user':_0x3fdd46[_0x103e71(0x19d)],'pass':_0x3fdd46['password']}}),_0x59def8={'from':_0x3fdd46['email'],'to':_0xf7199e[_0x103e71(0x19d)],'subject':_0x103e71(0x186)+_0x2b3d14[0x0][_0x103e71(0x1aa)],'attachments':[{'filename':_0x103e71(0x1c2),'path':__dirname+_0x103e71(0x1b3)+_0x103e71(0x17f)+_0x2b3d14[0x0]['image'],'cid':'logo'}],'html':_0x103e71(0x1a8)+_0x103e71(0x1a0)+_0x103e71(0x19f)+_0x103e71(0x181)+_0x103e71(0x1a5)+_0x103e71(0x181)+_0x103e71(0x192)+_0x103e71(0x1ac)+_0x103e71(0x1ac)+_0x103e71(0x181)+_0x103e71(0x193)+_0xf7199e[_0x103e71(0x19a)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+'</div>'+_0x103e71(0x199)+_0x103e71(0x181)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x2b3d14[0x0][_0x103e71(0x1aa)]+_0x103e71(0x1b4)+_0x103e71(0x1ac)+_0x103e71(0x1ac)+'</body></html>'};_0x209262[_0x103e71(0x1bb)](_0x59def8,function(_0x2afe06,_0x57be76){const _0x4a5250=_0x103e71;_0x2afe06?(console[_0x4a5250(0x197)](_0x2afe06),console['log'](_0x4a5250(0x17d))):console[_0x4a5250(0x197)](_0x4a5250(0x1a7));}),_0x54d9d7[_0x103e71(0x1b1)](_0x103e71(0x191));}else _0x24794f[_0x103e71(0x1bd)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x54d9d7[_0x103e71(0x1b1)](_0x103e71(0x1af));}),module['exports']=router;