const a0_0x1a21bf=a0_0x461a;(function(_0x24e514,_0x391462){const _0x319120=a0_0x461a,_0x4ef7a4=_0x24e514();while(!![]){try{const _0x3dd69f=-parseInt(_0x319120(0xfd))/0x1+parseInt(_0x319120(0xff))/0x2*(parseInt(_0x319120(0x11d))/0x3)+parseInt(_0x319120(0xfb))/0x4*(parseInt(_0x319120(0xf7))/0x5)+parseInt(_0x319120(0x11a))/0x6*(-parseInt(_0x319120(0x120))/0x7)+-parseInt(_0x319120(0x114))/0x8*(parseInt(_0x319120(0x121))/0x9)+parseInt(_0x319120(0x109))/0xa*(-parseInt(_0x319120(0xf6))/0xb)+parseInt(_0x319120(0x101))/0xc;if(_0x3dd69f===_0x391462)break;else _0x4ef7a4['push'](_0x4ef7a4['shift']());}catch(_0x2207e2){_0x4ef7a4['push'](_0x4ef7a4['shift']());}}}(a0_0x5070,0xbc961));function a0_0x5070(){const _0x32a747=['459voiTAb','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','floor','random','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','/upload/','image','True','False','site_title','<!DOCTYPE\x20html>','sendMail','Error\x20Occurs','</b></h1></p>','name','<div>','code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Logo.png','host','email_code','/code/','</div>','<h5>','Password\x20Successfuly\x20Reset\x20-\x20','/forgotPassword/code/','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','email','Password\x20Reset\x20-\x20','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','</body></html>','log','get','express','1047585QLQGog','125smRcLL','json','isUsed','find','224436nSwgNH','bcryptjs','1096738NnLbZy','errors','846556FuvDSx','<hr\x20class=\x22my-3\x22>','15329640JkrPJZ','success','Email\x20sent\x20successfully','port','redirect','/code_password/','</head><body>','Router','20RrYGGa','/forgotPassword/code','body','/login/','../middleware/auth','render','nodemailer','/../public','../models/all_models','<p>Hello\x20','save','59736xzAlMt','flash','password','post','findOne','error','3977994dDPlvT','logo','</h5>','3aIwGcK','/view','<strong>\x20Regards\x20</strong>','7wlvxpr'];a0_0x5070=function(){return _0x32a747;};return a0_0x5070();}const express=require(a0_0x1a21bf(0xf5)),app=express(),router=express[a0_0x1a21bf(0x108)](),bcrypt=require(a0_0x1a21bf(0xfc)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x1a21bf(0x111)),auth=require(a0_0x1a21bf(0x10d)),nodemailer=require(a0_0x1a21bf(0x10f));router[a0_0x1a21bf(0xf4)](a0_0x1a21bf(0x11e),async(_0x3f164a,_0x1b1cc4)=>{const _0x514230=a0_0x1a21bf,_0x4d6a3c=await master_shop['find']();_0x1b1cc4['render']('email_reset',{'success':_0x3f164a[_0x514230(0x115)](_0x514230(0x102)),'errors':_0x3f164a[_0x514230(0x115)](_0x514230(0xfe)),'master_shop':_0x4d6a3c});});function a0_0x461a(_0x45156c,_0x171777){const _0x507099=a0_0x5070();return a0_0x461a=function(_0x461a49,_0x338716){_0x461a49=_0x461a49-0xee;let _0x45d63b=_0x507099[_0x461a49];return _0x45d63b;},a0_0x461a(_0x45156c,_0x171777);}function generateRandomAlphanumericString(_0x590458=0x6){const _0x3818d2=a0_0x1a21bf,_0x545f78=_0x3818d2(0xee);let _0x4557e2='';for(let _0xbbc47f=0x0;_0xbbc47f<_0x590458;_0xbbc47f++){const _0x14cef9=Math[_0x3818d2(0x123)](Math[_0x3818d2(0x124)]()*_0x545f78['length']);_0x4557e2+=_0x545f78[_0x14cef9];}return _0x4557e2;}router[a0_0x1a21bf(0x117)](a0_0x1a21bf(0x11e),async(_0x1fcd33,_0x2ee32e)=>{const _0x53e70f=a0_0x1a21bf,{email:_0x220ef5}=_0x1fcd33[_0x53e70f(0x10b)],_0x5c9187=await sing_up[_0x53e70f(0x118)]({'email':_0x220ef5});var _0x516632=generateRandomAlphanumericString();const _0xbc9bac=await bcrypt['hash'](_0x516632,0xa);if(_0x5c9187){_0x5c9187[_0x53e70f(0x131)]=_0x516632,_0x5c9187[_0x53e70f(0xf9)]='False';const _0x41dfa1=_0x5c9187['save'](),_0x15632b=await master_shop[_0x53e70f(0xfa)](),_0x215998=await email_settings[_0x53e70f(0x118)]();let _0x3380db=nodemailer['createTransport']({'host':_0x215998[_0x53e70f(0x134)],'port':Number(_0x215998[_0x53e70f(0x104)]),'secure':![],'auth':{'user':_0x215998['email'],'pass':_0x215998[_0x53e70f(0x116)]}}),_0x1f786c={'from':_0x215998[_0x53e70f(0xef)],'to':_0x5c9187[_0x53e70f(0xef)],'subject':_0x53e70f(0xf0)+_0x15632b[0x0][_0x53e70f(0x12a)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x53e70f(0x126)+_0x15632b[0x0][_0x53e70f(0x127)],'cid':'logo'}],'html':_0x53e70f(0x12b)+'<html><head><title></title>'+_0x53e70f(0x107)+'<div>'+_0x53e70f(0x132)+_0x53e70f(0x130)+_0x53e70f(0xf1)+_0x53e70f(0x137)+_0x53e70f(0x137)+_0x53e70f(0x130)+_0x53e70f(0x125)+_0x516632+_0x53e70f(0x12e)+_0x53e70f(0x137)+_0x53e70f(0x100)+'<div>'+_0x53e70f(0x11f)+_0x53e70f(0x138)+_0x15632b[0x0][_0x53e70f(0x12a)]+_0x53e70f(0x11c)+_0x53e70f(0x137)+'</div>'+'</body></html>'};_0x3380db[_0x53e70f(0x12c)](_0x1f786c,function(_0x9aa8a6,_0x44b172){const _0x5b2900=_0x53e70f;_0x9aa8a6?(console[_0x5b2900(0xf3)](_0x9aa8a6),console['log'](_0x5b2900(0x12d))):console[_0x5b2900(0xf3)](_0x5b2900(0x103));}),_0x2ee32e['redirect'](_0x53e70f(0x13a));}else _0x1fcd33['flash'](_0x53e70f(0x119),_0x53e70f(0x122)),_0x2ee32e[_0x53e70f(0x105)]('/forgotPassword/view');}),router[a0_0x1a21bf(0xf4)](a0_0x1a21bf(0x136),async(_0x36c678,_0x1d4651)=>{const _0x55b4d8=a0_0x1a21bf,_0x1ba965=await master_shop[_0x55b4d8(0xfa)]();_0x1d4651[_0x55b4d8(0x10e)](_0x55b4d8(0x135),{'success':_0x36c678['flash'](_0x55b4d8(0x102)),'errors':_0x36c678[_0x55b4d8(0x115)](_0x55b4d8(0xfe)),'master_shop':_0x1ba965});}),router['post'](a0_0x1a21bf(0x136),async(_0x34ec15,_0x53495b)=>{const _0x4b04dd=a0_0x1a21bf,{code:_0x1761b9}=_0x34ec15[_0x4b04dd(0x10b)],_0x5aba5c=await sing_up[_0x4b04dd(0xfa)]({'code':_0x1761b9});console[_0x4b04dd(0xf3)](_0x5aba5c['length']),_0x53495b[_0x4b04dd(0xf8)](_0x5aba5c);}),router[a0_0x1a21bf(0x117)](a0_0x1a21bf(0x106),async(_0x371f03,_0x470fde)=>{const _0x63be9a=a0_0x1a21bf,{codex:_0xe55882,password:_0x5e7cda,cpassword:_0x1fe4d5,email:_0x1f21b8}=_0x371f03['body'],_0x21bc67=await sing_up[_0x63be9a(0x118)]({'code':_0xe55882,'email':_0x1f21b8,'isUsed':_0x63be9a(0x129)}),_0x4561c7=await bcrypt['hash'](_0x5e7cda,0xa);if(_0x21bc67){_0x21bc67[_0x63be9a(0x116)]=_0x4561c7,_0x21bc67[_0x63be9a(0xf9)]=_0x63be9a(0x128);const _0x575f2e=_0x21bc67[_0x63be9a(0x113)](),_0x3e768d=await master_shop[_0x63be9a(0xfa)](),_0x32e48f=await email_settings[_0x63be9a(0x118)]();let _0x4b424e=nodemailer['createTransport']({'host':_0x32e48f[_0x63be9a(0x134)],'port':Number(_0x32e48f[_0x63be9a(0x104)]),'secure':![],'auth':{'user':_0x32e48f[_0x63be9a(0xef)],'pass':_0x32e48f[_0x63be9a(0x116)]}}),_0x58a848={'from':_0x32e48f[_0x63be9a(0xef)],'to':_0x21bc67[_0x63be9a(0xef)],'subject':_0x63be9a(0x139)+_0x3e768d[0x0]['site_title'],'attachments':[{'filename':_0x63be9a(0x133),'path':__dirname+_0x63be9a(0x110)+_0x63be9a(0x126)+_0x3e768d[0x0][_0x63be9a(0x127)],'cid':_0x63be9a(0x11b)}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+_0x63be9a(0x107)+_0x63be9a(0x130)+_0x63be9a(0x132)+'<div>'+_0x63be9a(0xf1)+'</div>'+_0x63be9a(0x137)+_0x63be9a(0x130)+_0x63be9a(0x112)+_0x21bc67[_0x63be9a(0x12f)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x63be9a(0x137)+_0x63be9a(0x100)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x63be9a(0x138)+_0x3e768d[0x0][_0x63be9a(0x12a)]+'</h5>'+_0x63be9a(0x137)+_0x63be9a(0x137)+_0x63be9a(0xf2)};_0x4b424e['sendMail'](_0x58a848,function(_0x380e85,_0x2bc69b){const _0x301ef4=_0x63be9a;_0x380e85?(console['log'](_0x380e85),console[_0x301ef4(0xf3)](_0x301ef4(0x12d))):console['log'](_0x301ef4(0x103));}),_0x470fde['redirect'](_0x63be9a(0x10c));}else _0x371f03['flash'](_0x63be9a(0x119),_0x63be9a(0x122)),_0x470fde[_0x63be9a(0x105)](_0x63be9a(0x10a));}),module['exports']=router;