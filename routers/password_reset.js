const a0_0x4bdcaf=a0_0x1fe7;(function(_0x2f412b,_0x4d7612){const _0x55c4bb=a0_0x1fe7,_0x333740=_0x2f412b();while(!![]){try{const _0x56bed9=-parseInt(_0x55c4bb(0x16a))/0x1*(-parseInt(_0x55c4bb(0x196))/0x2)+parseInt(_0x55c4bb(0x171))/0x3+-parseInt(_0x55c4bb(0x192))/0x4+parseInt(_0x55c4bb(0x18d))/0x5+-parseInt(_0x55c4bb(0x172))/0x6*(-parseInt(_0x55c4bb(0x162))/0x7)+-parseInt(_0x55c4bb(0x179))/0x8+parseInt(_0x55c4bb(0x170))/0x9*(parseInt(_0x55c4bb(0x19e))/0xa);if(_0x56bed9===_0x4d7612)break;else _0x333740['push'](_0x333740['shift']());}catch(_0x148bb3){_0x333740['push'](_0x333740['shift']());}}}(a0_0x2cd3,0x6e2c1));function a0_0x2cd3(){const _0x7a33e1=['1581813LZxSjl','175350QUoCGI','6MYbmsJ','/view','code','/../public','<html><head><title></title>','sendMail','<!DOCTYPE\x20html>','1668104YxYdTt','success','log','<h5>','floor','<strong>\x20Regards\x20</strong>','json','hash','port','save','</h5>','<p>Hello\x20','/code_password/','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','</b></h1></p>','email_reset','logo','password','Logo.png','bcryptjs','291805opvPsq','random','True','/forgotPassword/code/','/upload/','2697160XXgYgz','../models/all_models','find','False','6QhwwlS','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','post','image','../middleware/auth','Password\x20Successfuly\x20Reset\x20-\x20','email','render','30GmyPOM','site_title','findOne','Password\x20Reset\x20-\x20','</body></html>','errors','error','redirect',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','email_code','/code/','<hr\x20class=\x22my-3\x22>','body','name','4124155MlBDFh','</head><body>','createTransport','host','nodemailer','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','flash','length','33607tJrkJc','get','express','<div>','exports','</div>'];a0_0x2cd3=function(){return _0x7a33e1;};return a0_0x2cd3();}const express=require(a0_0x4bdcaf(0x16c)),app=express(),router=express['Router'](),bcrypt=require(a0_0x4bdcaf(0x18c)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x4bdcaf(0x193)),auth=require(a0_0x4bdcaf(0x19a)),nodemailer=require(a0_0x4bdcaf(0x166));router[a0_0x4bdcaf(0x16b)](a0_0x4bdcaf(0x173),async(_0x7538e3,_0x529578)=>{const _0x2b7dcd=a0_0x4bdcaf,_0x9a6306=await master_shop[_0x2b7dcd(0x194)]();_0x529578['render'](_0x2b7dcd(0x188),{'success':_0x7538e3[_0x2b7dcd(0x168)](_0x2b7dcd(0x17a)),'errors':_0x7538e3[_0x2b7dcd(0x168)]('errors'),'master_shop':_0x9a6306});});function a0_0x1fe7(_0x180d9c,_0x1e1851){const _0x2cd3e1=a0_0x2cd3();return a0_0x1fe7=function(_0x1fe7f0,_0x831416){_0x1fe7f0=_0x1fe7f0-0x15f;let _0x2ed3a5=_0x2cd3e1[_0x1fe7f0];return _0x2ed3a5;},a0_0x1fe7(_0x180d9c,_0x1e1851);}function generateRandomAlphanumericString(_0x3c4809=0x6){const _0x3d5594=a0_0x4bdcaf,_0x26ded1='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x334540='';for(let _0x1852fd=0x0;_0x1852fd<_0x3c4809;_0x1852fd++){const _0x504e51=Math[_0x3d5594(0x17d)](Math[_0x3d5594(0x18e)]()*_0x26ded1['length']);_0x334540+=_0x26ded1[_0x504e51];}return _0x334540;}router[a0_0x4bdcaf(0x198)](a0_0x4bdcaf(0x173),async(_0x276ede,_0x1a26a9)=>{const _0x360175=a0_0x4bdcaf,{email:_0x3ca790}=_0x276ede['body'],_0xdff6b8=await sing_up['findOne']({'email':_0x3ca790});var _0x1cd24f=generateRandomAlphanumericString();const _0x3e6264=await bcrypt[_0x360175(0x180)](_0x1cd24f,0xa);if(_0xdff6b8){_0xdff6b8[_0x360175(0x174)]=_0x1cd24f,_0xdff6b8['isUsed']='False';const _0x1000bf=_0xdff6b8[_0x360175(0x182)](),_0x2c7dda=await master_shop[_0x360175(0x194)](),_0xf9ecf2=await email_settings[_0x360175(0x1a0)]();let _0x114eb3=nodemailer[_0x360175(0x164)]({'host':_0xf9ecf2[_0x360175(0x165)],'port':Number(_0xf9ecf2[_0x360175(0x181)]),'secure':![],'auth':{'user':_0xf9ecf2[_0x360175(0x19c)],'pass':_0xf9ecf2[_0x360175(0x18a)]}}),_0x5995bf={'from':_0xf9ecf2[_0x360175(0x19c)],'to':_0xdff6b8[_0x360175(0x19c)],'subject':_0x360175(0x1a1)+_0x2c7dda[0x0][_0x360175(0x19f)],'attachments':[{'filename':_0x360175(0x18b),'path':__dirname+_0x360175(0x175)+_0x360175(0x191)+_0x2c7dda[0x0][_0x360175(0x199)],'cid':'logo'}],'html':_0x360175(0x178)+'<html><head><title></title>'+_0x360175(0x163)+_0x360175(0x16d)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x360175(0x16d)+_0x360175(0x197)+_0x360175(0x16f)+'</div>'+_0x360175(0x16d)+_0x360175(0x186)+_0x1cd24f+_0x360175(0x187)+_0x360175(0x16f)+'<hr\x20class=\x22my-3\x22>'+'<div>'+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x2c7dda[0x0]['site_title']+_0x360175(0x183)+_0x360175(0x16f)+_0x360175(0x16f)+_0x360175(0x1a2)};_0x114eb3[_0x360175(0x177)](_0x5995bf,function(_0x401342,_0x561fa7){const _0x131461=_0x360175;_0x401342?(console['log'](_0x401342),console[_0x131461(0x17b)]('Error\x20Occurs')):console[_0x131461(0x17b)]('Email\x20sent\x20successfully');}),_0x1a26a9[_0x360175(0x1a5)](_0x360175(0x190));}else _0x276ede['flash'](_0x360175(0x1a4),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x1a26a9['redirect']('/forgotPassword/view');}),router[a0_0x4bdcaf(0x16b)](a0_0x4bdcaf(0x1a8),async(_0x3ebc57,_0x3e4b29)=>{const _0xef995e=a0_0x4bdcaf,_0x31d0d6=await master_shop[_0xef995e(0x194)]();_0x3e4b29[_0xef995e(0x19d)](_0xef995e(0x1a7),{'success':_0x3ebc57['flash']('success'),'errors':_0x3ebc57[_0xef995e(0x168)](_0xef995e(0x1a3)),'master_shop':_0x31d0d6});}),router[a0_0x4bdcaf(0x198)](a0_0x4bdcaf(0x1a8),async(_0x442b6b,_0x5ae7a0)=>{const _0x5e08b7=a0_0x4bdcaf,{code:_0xac0702}=_0x442b6b[_0x5e08b7(0x160)],_0x1f71c7=await sing_up[_0x5e08b7(0x194)]({'code':_0xac0702});console[_0x5e08b7(0x17b)](_0x1f71c7[_0x5e08b7(0x169)]),_0x5ae7a0[_0x5e08b7(0x17f)](_0x1f71c7);}),router[a0_0x4bdcaf(0x198)](a0_0x4bdcaf(0x185),async(_0x9ad4de,_0x3c33dd)=>{const _0x40f069=a0_0x4bdcaf,{codex:_0x32b9bf,password:_0x28cb6d,cpassword:_0x34cab6,email:_0x5ee62e}=_0x9ad4de[_0x40f069(0x160)],_0xfefd3b=await sing_up[_0x40f069(0x1a0)]({'code':_0x32b9bf,'email':_0x5ee62e,'isUsed':_0x40f069(0x195)}),_0x2c97ce=await bcrypt[_0x40f069(0x180)](_0x28cb6d,0xa);if(_0xfefd3b){_0xfefd3b['password']=_0x2c97ce,_0xfefd3b['isUsed']=_0x40f069(0x18f);const _0xe3fb59=_0xfefd3b[_0x40f069(0x182)](),_0x1bf302=await master_shop[_0x40f069(0x194)](),_0x548da0=await email_settings['findOne']();let _0x2d39e9=nodemailer['createTransport']({'host':_0x548da0[_0x40f069(0x165)],'port':Number(_0x548da0[_0x40f069(0x181)]),'secure':![],'auth':{'user':_0x548da0[_0x40f069(0x19c)],'pass':_0x548da0[_0x40f069(0x18a)]}}),_0x2c3fc6={'from':_0x548da0[_0x40f069(0x19c)],'to':_0xfefd3b[_0x40f069(0x19c)],'subject':_0x40f069(0x19b)+_0x1bf302[0x0]['site_title'],'attachments':[{'filename':_0x40f069(0x18b),'path':__dirname+_0x40f069(0x175)+'/upload/'+_0x1bf302[0x0][_0x40f069(0x199)],'cid':_0x40f069(0x189)}],'html':'<!DOCTYPE\x20html>'+_0x40f069(0x176)+_0x40f069(0x163)+_0x40f069(0x16d)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x40f069(0x16d)+_0x40f069(0x197)+_0x40f069(0x16f)+'</div>'+_0x40f069(0x16d)+_0x40f069(0x184)+_0xfefd3b[_0x40f069(0x161)]+_0x40f069(0x1a6)+_0x40f069(0x16f)+_0x40f069(0x15f)+_0x40f069(0x16d)+_0x40f069(0x17e)+_0x40f069(0x17c)+_0x1bf302[0x0][_0x40f069(0x19f)]+_0x40f069(0x183)+_0x40f069(0x16f)+'</div>'+_0x40f069(0x1a2)};_0x2d39e9[_0x40f069(0x177)](_0x2c3fc6,function(_0x196307,_0x3c1961){const _0x523b53=_0x40f069;_0x196307?(console[_0x523b53(0x17b)](_0x196307),console[_0x523b53(0x17b)]('Error\x20Occurs')):console[_0x523b53(0x17b)]('Email\x20sent\x20successfully');}),_0x3c33dd[_0x40f069(0x1a5)]('/login/');}else _0x9ad4de['flash'](_0x40f069(0x1a4),_0x40f069(0x167)),_0x3c33dd[_0x40f069(0x1a5)]('/forgotPassword/code');}),module[a0_0x4bdcaf(0x16e)]=router;