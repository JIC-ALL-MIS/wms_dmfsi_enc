const a0_0x592a40=a0_0x4bd9;function a0_0x4bd9(_0x199b21,_0x210325){const _0x22ce88=a0_0x22ce();return a0_0x4bd9=function(_0x4bd9fc,_0x115c39){_0x4bd9fc=_0x4bd9fc-0x149;let _0x8fb765=_0x22ce88[_0x4bd9fc];return _0x8fb765;},a0_0x4bd9(_0x199b21,_0x210325);}(function(_0xddb57d,_0x5c46b2){const _0x325e94=a0_0x4bd9,_0x497387=_0xddb57d();while(!![]){try{const _0x1bf7cd=parseInt(_0x325e94(0x14d))/0x1*(-parseInt(_0x325e94(0x163))/0x2)+-parseInt(_0x325e94(0x157))/0x3*(parseInt(_0x325e94(0x162))/0x4)+-parseInt(_0x325e94(0x179))/0x5*(-parseInt(_0x325e94(0x187))/0x6)+-parseInt(_0x325e94(0x17e))/0x7+-parseInt(_0x325e94(0x176))/0x8*(-parseInt(_0x325e94(0x168))/0x9)+-parseInt(_0x325e94(0x16f))/0xa+parseInt(_0x325e94(0x182))/0xb;if(_0x1bf7cd===_0x5c46b2)break;else _0x497387['push'](_0x497387['shift']());}catch(_0x117993){_0x497387['push'](_0x497387['shift']());}}}(a0_0x22ce,0xcc624));function a0_0x22ce(){const _0x7e3cbe=['code','find',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','exports','<p>Hello\x20','3uEitBh','<html><head><title></title>','<!DOCTYPE\x20html>','Logo.png','../models/all_models','<h5>','Password\x20Reset\x20-\x20','flash','hash','email_code','image','6481352xAcoXi','2062ktWMmc','redirect','port','/view','errors','5977602cQqRgV','json','email_reset','body','get','Password\x20Successfuly\x20Reset\x20-\x20','isUsed','12747090lfVdkk','</h5>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','log','Error\x20Occurs','/../public','</head><body>','8qQnXRL','name','post','5sXOiaP','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','render','floor','<div>','9830247GDUjzm','success','host','<hr\x20class=\x22my-3\x22>','45759868tymGah','createTransport','</body></html>','sendMail','logo','4169154poTmZa','length','/forgotPassword/code/','</b></h1></p>','</div>','password','error','bcryptjs','/code/','save','site_title','findOne','/code_password/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','371uBLByN','Email\x20sent\x20successfully','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','email','nodemailer'];a0_0x22ce=function(){return _0x7e3cbe;};return a0_0x22ce();}const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x592a40(0x18e)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x592a40(0x15b)),auth=require('../middleware/auth'),nodemailer=require(a0_0x592a40(0x151));router['get']('/view',async(_0x179ca8,_0x135213)=>{const _0x1c08f6=a0_0x592a40,_0x18b3b8=await master_shop[_0x1c08f6(0x153)]();_0x135213[_0x1c08f6(0x17b)](_0x1c08f6(0x16a),{'success':_0x179ca8[_0x1c08f6(0x15e)](_0x1c08f6(0x17f)),'errors':_0x179ca8[_0x1c08f6(0x15e)](_0x1c08f6(0x167)),'master_shop':_0x18b3b8});});function generateRandomAlphanumericString(_0x9568b9=0x6){const _0x4686a5=a0_0x592a40,_0x1afecc='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x5d7ce7='';for(let _0x1185aa=0x0;_0x1185aa<_0x9568b9;_0x1185aa++){const _0x11488a=Math[_0x4686a5(0x17c)](Math['random']()*_0x1afecc[_0x4686a5(0x188)]);_0x5d7ce7+=_0x1afecc[_0x11488a];}return _0x5d7ce7;}router[a0_0x592a40(0x178)](a0_0x592a40(0x166),async(_0x2cc732,_0x349b02)=>{const _0x3b0fd0=a0_0x592a40,{email:_0x4cb07c}=_0x2cc732[_0x3b0fd0(0x16b)],_0x540155=await sing_up['findOne']({'email':_0x4cb07c});var _0x1a825c=generateRandomAlphanumericString();const _0x5cacf3=await bcrypt[_0x3b0fd0(0x15f)](_0x1a825c,0xa);if(_0x540155){_0x540155[_0x3b0fd0(0x152)]=_0x1a825c,_0x540155[_0x3b0fd0(0x16e)]='False';const _0x16e8ed=_0x540155['save'](),_0x454a26=await master_shop['find'](),_0x4eb94e=await email_settings[_0x3b0fd0(0x14a)]();let _0x264bbe=nodemailer['createTransport']({'host':_0x4eb94e[_0x3b0fd0(0x180)],'port':Number(_0x4eb94e[_0x3b0fd0(0x165)]),'secure':![],'auth':{'user':_0x4eb94e[_0x3b0fd0(0x150)],'pass':_0x4eb94e[_0x3b0fd0(0x18c)]}}),_0x5a6fa6={'from':_0x4eb94e['email'],'to':_0x540155['email'],'subject':_0x3b0fd0(0x15d)+_0x454a26[0x0][_0x3b0fd0(0x149)],'attachments':[{'filename':_0x3b0fd0(0x15a),'path':__dirname+_0x3b0fd0(0x174)+'/upload/'+_0x454a26[0x0][_0x3b0fd0(0x161)],'cid':'logo'}],'html':_0x3b0fd0(0x159)+_0x3b0fd0(0x158)+_0x3b0fd0(0x175)+_0x3b0fd0(0x17d)+_0x3b0fd0(0x14c)+_0x3b0fd0(0x17d)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x3b0fd0(0x18b)+_0x3b0fd0(0x18b)+_0x3b0fd0(0x17d)+_0x3b0fd0(0x14f)+_0x1a825c+_0x3b0fd0(0x18a)+_0x3b0fd0(0x18b)+_0x3b0fd0(0x181)+_0x3b0fd0(0x17d)+'<strong>\x20Regards\x20</strong>'+_0x3b0fd0(0x15c)+_0x454a26[0x0][_0x3b0fd0(0x149)]+_0x3b0fd0(0x170)+_0x3b0fd0(0x18b)+'</div>'+_0x3b0fd0(0x184)};_0x264bbe[_0x3b0fd0(0x185)](_0x5a6fa6,function(_0x120c81,_0x1e4ff5){const _0x24999c=_0x3b0fd0;_0x120c81?(console['log'](_0x120c81),console[_0x24999c(0x172)](_0x24999c(0x173))):console[_0x24999c(0x172)](_0x24999c(0x14e));}),_0x349b02[_0x3b0fd0(0x164)](_0x3b0fd0(0x189));}else _0x2cc732[_0x3b0fd0(0x15e)](_0x3b0fd0(0x18d),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x349b02[_0x3b0fd0(0x164)]('/forgotPassword/view');}),router[a0_0x592a40(0x16c)](a0_0x592a40(0x18f),async(_0x416495,_0x50b6ae)=>{const _0x2fdc10=a0_0x592a40,_0x3cda9a=await master_shop['find']();_0x50b6ae[_0x2fdc10(0x17b)](_0x2fdc10(0x160),{'success':_0x416495[_0x2fdc10(0x15e)]('success'),'errors':_0x416495['flash'](_0x2fdc10(0x167)),'master_shop':_0x3cda9a});}),router[a0_0x592a40(0x178)](a0_0x592a40(0x18f),async(_0x507a92,_0x4a1daa)=>{const _0x5ab9b8=a0_0x592a40,{code:_0x1f8465}=_0x507a92[_0x5ab9b8(0x16b)],_0x492a98=await sing_up['find']({'code':_0x1f8465});console['log'](_0x492a98['length']),_0x4a1daa[_0x5ab9b8(0x169)](_0x492a98);}),router[a0_0x592a40(0x178)](a0_0x592a40(0x14b),async(_0x3ef9d6,_0x465c16)=>{const _0x5bdb38=a0_0x592a40,{codex:_0x302fc3,password:_0x83f67c,cpassword:_0x571228,email:_0xc9d75}=_0x3ef9d6[_0x5bdb38(0x16b)],_0x3718a8=await sing_up[_0x5bdb38(0x14a)]({'code':_0x302fc3,'email':_0xc9d75,'isUsed':'False'}),_0x29f65a=await bcrypt[_0x5bdb38(0x15f)](_0x83f67c,0xa);if(_0x3718a8){_0x3718a8[_0x5bdb38(0x18c)]=_0x29f65a,_0x3718a8[_0x5bdb38(0x16e)]='True';const _0x18135a=_0x3718a8[_0x5bdb38(0x190)](),_0x180585=await master_shop[_0x5bdb38(0x153)](),_0x5e8f66=await email_settings[_0x5bdb38(0x14a)]();let _0x45cbda=nodemailer[_0x5bdb38(0x183)]({'host':_0x5e8f66[_0x5bdb38(0x180)],'port':Number(_0x5e8f66[_0x5bdb38(0x165)]),'secure':![],'auth':{'user':_0x5e8f66[_0x5bdb38(0x150)],'pass':_0x5e8f66['password']}}),_0x161cfc={'from':_0x5e8f66[_0x5bdb38(0x150)],'to':_0x3718a8[_0x5bdb38(0x150)],'subject':_0x5bdb38(0x16d)+_0x180585[0x0][_0x5bdb38(0x149)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+'/upload/'+_0x180585[0x0][_0x5bdb38(0x161)],'cid':_0x5bdb38(0x186)}],'html':_0x5bdb38(0x159)+_0x5bdb38(0x158)+'</head><body>'+_0x5bdb38(0x17d)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x5bdb38(0x17d)+_0x5bdb38(0x171)+_0x5bdb38(0x18b)+'</div>'+'<div>'+_0x5bdb38(0x156)+_0x3718a8[_0x5bdb38(0x177)]+_0x5bdb38(0x154)+_0x5bdb38(0x18b)+_0x5bdb38(0x181)+_0x5bdb38(0x17d)+'<strong>\x20Regards\x20</strong>'+_0x5bdb38(0x15c)+_0x180585[0x0][_0x5bdb38(0x149)]+_0x5bdb38(0x170)+'</div>'+'</div>'+'</body></html>'};_0x45cbda[_0x5bdb38(0x185)](_0x161cfc,function(_0x16a473,_0x4a49ae){const _0x524f4c=_0x5bdb38;_0x16a473?(console['log'](_0x16a473),console[_0x524f4c(0x172)]('Error\x20Occurs')):console[_0x524f4c(0x172)](_0x524f4c(0x14e));}),_0x465c16[_0x5bdb38(0x164)]('/login/');}else _0x3ef9d6[_0x5bdb38(0x15e)](_0x5bdb38(0x18d),_0x5bdb38(0x17a)),_0x465c16['redirect']('/forgotPassword/code');}),module[a0_0x592a40(0x155)]=router;