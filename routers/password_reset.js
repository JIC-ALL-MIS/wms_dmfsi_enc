const a0_0x644dad=a0_0x247d;(function(_0x53b0d0,_0x43ea8e){const _0x579f1d=a0_0x247d,_0x18ca13=_0x53b0d0();while(!![]){try{const _0x1984a4=-parseInt(_0x579f1d(0x134))/0x1+-parseInt(_0x579f1d(0x14f))/0x2+parseInt(_0x579f1d(0x146))/0x3+-parseInt(_0x579f1d(0x167))/0x4*(-parseInt(_0x579f1d(0x138))/0x5)+parseInt(_0x579f1d(0x171))/0x6+parseInt(_0x579f1d(0x150))/0x7+-parseInt(_0x579f1d(0x15d))/0x8;if(_0x1984a4===_0x43ea8e)break;else _0x18ca13['push'](_0x18ca13['shift']());}catch(_0x32de6a){_0x18ca13['push'](_0x18ca13['shift']());}}}(a0_0x465f,0x617fd));function a0_0x247d(_0x2939c3,_0x38ac9b){const _0x465fdd=a0_0x465f();return a0_0x247d=function(_0x247d7c,_0x37b1e8){_0x247d7c=_0x247d7c-0x134;let _0xd0c193=_0x465fdd[_0x247d7c];return _0xd0c193;},a0_0x247d(_0x2939c3,_0x38ac9b);}const express=require('express'),app=express(),router=express[a0_0x644dad(0x15e)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x644dad(0x16c)),auth=require(a0_0x644dad(0x170)),nodemailer=require(a0_0x644dad(0x139));router['get'](a0_0x644dad(0x179),async(_0x21546b,_0xafef51)=>{const _0x35e6b8=a0_0x644dad,_0x37219a=await master_shop[_0x35e6b8(0x178)]();_0xafef51[_0x35e6b8(0x16f)](_0x35e6b8(0x173),{'success':_0x21546b[_0x35e6b8(0x151)](_0x35e6b8(0x16e)),'errors':_0x21546b['flash'](_0x35e6b8(0x143)),'master_shop':_0x37219a});});function generateRandomAlphanumericString(_0x5a921e=0x6){const _0xd75a1a=a0_0x644dad,_0x498961=_0xd75a1a(0x137);let _0x250c89='';for(let _0x50f147=0x0;_0x50f147<_0x5a921e;_0x50f147++){const _0xfee5a1=Math[_0xd75a1a(0x13b)](Math[_0xd75a1a(0x14d)]()*_0x498961['length']);_0x250c89+=_0x498961[_0xfee5a1];}return _0x250c89;}router[a0_0x644dad(0x15a)](a0_0x644dad(0x179),async(_0x234892,_0x122995)=>{const _0x160f83=a0_0x644dad,{email:_0x5815e8}=_0x234892[_0x160f83(0x13f)],_0x284999=await sing_up[_0x160f83(0x165)]({'email':_0x5815e8});var _0x2d84f2=generateRandomAlphanumericString();const _0x4e0921=await bcrypt['hash'](_0x2d84f2,0xa);if(_0x284999){_0x284999[_0x160f83(0x13d)]=_0x2d84f2,_0x284999[_0x160f83(0x175)]=_0x160f83(0x145);const _0x4ae29a=_0x284999[_0x160f83(0x157)](),_0x386444=await master_shop[_0x160f83(0x178)](),_0xcd6f03=await email_settings[_0x160f83(0x165)]();let _0x2d9a77=nodemailer[_0x160f83(0x13e)]({'host':_0xcd6f03['host'],'port':Number(_0xcd6f03[_0x160f83(0x177)]),'secure':![],'auth':{'user':_0xcd6f03[_0x160f83(0x14b)],'pass':_0xcd6f03['password']}}),_0xe5ebe={'from':_0xcd6f03[_0x160f83(0x14b)],'to':_0x284999[_0x160f83(0x14b)],'subject':_0x160f83(0x158)+_0x386444[0x0][_0x160f83(0x159)],'attachments':[{'filename':_0x160f83(0x16a),'path':__dirname+_0x160f83(0x164)+_0x160f83(0x147)+_0x386444[0x0][_0x160f83(0x169)],'cid':_0x160f83(0x154)}],'html':_0x160f83(0x14a)+'<html><head><title></title>'+'</head><body>'+_0x160f83(0x13c)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x160f83(0x13c)+_0x160f83(0x153)+_0x160f83(0x140)+_0x160f83(0x140)+_0x160f83(0x13c)+_0x160f83(0x161)+_0x2d84f2+_0x160f83(0x152)+_0x160f83(0x140)+'<hr\x20class=\x22my-3\x22>'+'<div>'+_0x160f83(0x15c)+_0x160f83(0x155)+_0x386444[0x0][_0x160f83(0x159)]+'</h5>'+_0x160f83(0x140)+_0x160f83(0x140)+_0x160f83(0x174)};_0x2d9a77[_0x160f83(0x176)](_0xe5ebe,function(_0x1e941f,_0x56b61d){const _0x1f3e03=_0x160f83;_0x1e941f?(console[_0x1f3e03(0x15f)](_0x1e941f),console['log'](_0x1f3e03(0x141))):console['log'](_0x1f3e03(0x16b));}),_0x122995['redirect']('/forgotPassword/code/');}else _0x234892[_0x160f83(0x151)](_0x160f83(0x172),_0x160f83(0x160)),_0x122995[_0x160f83(0x166)]('/forgotPassword/view');}),router[a0_0x644dad(0x14e)]('/code/',async(_0xfe43c8,_0x25cea3)=>{const _0x54321e=a0_0x644dad,_0x165bf6=await master_shop[_0x54321e(0x178)]();_0x25cea3['render']('email_code',{'success':_0xfe43c8['flash'](_0x54321e(0x16e)),'errors':_0xfe43c8[_0x54321e(0x151)](_0x54321e(0x143)),'master_shop':_0x165bf6});}),router[a0_0x644dad(0x15a)](a0_0x644dad(0x135),async(_0x207b45,_0x678952)=>{const _0x32b59a=a0_0x644dad,{code:_0x231e6f}=_0x207b45['body'],_0x34f21d=await sing_up[_0x32b59a(0x178)]({'code':_0x231e6f});console[_0x32b59a(0x15f)](_0x34f21d[_0x32b59a(0x13a)]),_0x678952['json'](_0x34f21d);}),router['post']('/code_password/',async(_0x51d527,_0x446642)=>{const _0x539f0f=a0_0x644dad,{codex:_0x552c5b,password:_0x53610b,cpassword:_0xd28031,email:_0x9e0d6a}=_0x51d527[_0x539f0f(0x13f)],_0x31b40b=await sing_up[_0x539f0f(0x165)]({'code':_0x552c5b,'email':_0x9e0d6a,'isUsed':'False'}),_0x4b446e=await bcrypt[_0x539f0f(0x16d)](_0x53610b,0xa);if(_0x31b40b){_0x31b40b['password']=_0x4b446e,_0x31b40b['isUsed']=_0x539f0f(0x14c);const _0x371ed7=_0x31b40b[_0x539f0f(0x157)](),_0x81cdea=await master_shop[_0x539f0f(0x178)](),_0x67f8fe=await email_settings[_0x539f0f(0x165)]();let _0x40a4e7=nodemailer[_0x539f0f(0x13e)]({'host':_0x67f8fe[_0x539f0f(0x136)],'port':Number(_0x67f8fe['port']),'secure':![],'auth':{'user':_0x67f8fe[_0x539f0f(0x14b)],'pass':_0x67f8fe['password']}}),_0x2161d2={'from':_0x67f8fe[_0x539f0f(0x14b)],'to':_0x31b40b[_0x539f0f(0x14b)],'subject':_0x539f0f(0x163)+_0x81cdea[0x0][_0x539f0f(0x159)],'attachments':[{'filename':_0x539f0f(0x16a),'path':__dirname+'/../public'+_0x539f0f(0x147)+_0x81cdea[0x0][_0x539f0f(0x169)],'cid':_0x539f0f(0x154)}],'html':'<!DOCTYPE\x20html>'+_0x539f0f(0x144)+_0x539f0f(0x142)+_0x539f0f(0x13c)+_0x539f0f(0x15b)+_0x539f0f(0x13c)+_0x539f0f(0x153)+'</div>'+_0x539f0f(0x140)+_0x539f0f(0x13c)+'<p>Hello\x20'+_0x31b40b[_0x539f0f(0x162)]+_0x539f0f(0x168)+_0x539f0f(0x140)+_0x539f0f(0x148)+_0x539f0f(0x13c)+'<strong>\x20Regards\x20</strong>'+_0x539f0f(0x155)+_0x81cdea[0x0][_0x539f0f(0x159)]+_0x539f0f(0x156)+_0x539f0f(0x140)+_0x539f0f(0x140)+'</body></html>'};_0x40a4e7[_0x539f0f(0x176)](_0x2161d2,function(_0x1d31ec,_0x589e35){const _0x5cb37e=_0x539f0f;_0x1d31ec?(console[_0x5cb37e(0x15f)](_0x1d31ec),console[_0x5cb37e(0x15f)](_0x5cb37e(0x141))):console[_0x5cb37e(0x15f)](_0x5cb37e(0x16b));}),_0x446642[_0x539f0f(0x166)]('/login/');}else _0x51d527[_0x539f0f(0x151)](_0x539f0f(0x172),_0x539f0f(0x160)),_0x446642[_0x539f0f(0x166)]('/forgotPassword/code');}),module[a0_0x644dad(0x149)]=router;function a0_0x465f(){const _0x21c787=['nodemailer','length','floor','<div>','code','createTransport','body','</div>','Error\x20Occurs','</head><body>','errors','<html><head><title></title>','False','2061117qPJElC','/upload/','<hr\x20class=\x22my-3\x22>','exports','<!DOCTYPE\x20html>','email','True','random','get','737726bTvNYF','1096179dZtLqk','flash','</b></h1></p>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','logo','<h5>','</h5>','save','Password\x20Reset\x20-\x20','site_title','post','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<strong>\x20Regards\x20</strong>','5206992qbryRA','Router','log','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','name','Password\x20Successfuly\x20Reset\x20-\x20','/../public','findOne','redirect','4ZQDpeb',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','image','Logo.png','Email\x20sent\x20successfully','../models/all_models','hash','success','render','../middleware/auth','3747366igIbJT','error','email_reset','</body></html>','isUsed','sendMail','port','find','/view','433066SEKWvE','/code/','host','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','1919815MnjiZd'];a0_0x465f=function(){return _0x21c787;};return a0_0x465f();}