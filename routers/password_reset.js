const a0_0x173c10=a0_0x52de;function a0_0x2099(){const _0x43a192=['floor','20TnGvBI','redirect','length','error',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','name','post','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','</head><body>','port','success','../models/all_models','image','8225814AoOzWt','65920XkHSgW','/login/','flash','createTransport','<html><head><title></title>','nodemailer','isUsed','</div>','body','logo','40165150jHSUFo','host','True','<!DOCTYPE\x20html>','hash','errors','/forgotPassword/code','/forgotPassword/view','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','email','7316856uhIvju','password','render','/forgotPassword/code/','</h5>','random','save','/upload/','Router','False','/code/','email_reset','<p>Hello\x20','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','Error\x20Occurs','Logo.png','Email\x20sent\x20successfully','code','site_title','1228632oaAvjJ','1255196ZebZGi','224kuryoB','2YyTcFj','json','find','2431059obvLKm','<hr\x20class=\x22my-3\x22>','<div>','bcryptjs','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','findOne','Password\x20Reset\x20-\x20','exports','log','sendMail','<h5>','/../public','/view','../middleware/auth','</body></html>','<strong>\x20Regards\x20</strong>'];a0_0x2099=function(){return _0x43a192;};return a0_0x2099();}(function(_0x4a7f64,_0x3feabf){const _0x5aa3f9=a0_0x52de,_0x1dada1=_0x4a7f64();while(!![]){try{const _0x342d25=-parseInt(_0x5aa3f9(0x1fe))/0x1+parseInt(_0x5aa3f9(0x201))/0x2*(-parseInt(_0x5aa3f9(0x204))/0x3)+parseInt(_0x5aa3f9(0x1ff))/0x4*(parseInt(_0x5aa3f9(0x1c9))/0x5)+-parseInt(_0x5aa3f9(0x1d6))/0x6+parseInt(_0x5aa3f9(0x200))/0x7*(-parseInt(_0x5aa3f9(0x1d7))/0x8)+-parseInt(_0x5aa3f9(0x1eb))/0x9+parseInt(_0x5aa3f9(0x1e1))/0xa;if(_0x342d25===_0x3feabf)break;else _0x1dada1['push'](_0x1dada1['shift']());}catch(_0x10a7b7){_0x1dada1['push'](_0x1dada1['shift']());}}}(a0_0x2099,0xbfac5));const express=require('express'),app=express(),router=express[a0_0x173c10(0x1f3)](),bcrypt=require(a0_0x173c10(0x207)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x173c10(0x1d4)),auth=require(a0_0x173c10(0x1c5)),nodemailer=require(a0_0x173c10(0x1dc));router['get'](a0_0x173c10(0x1c4),async(_0x268870,_0x420163)=>{const _0x24a58d=a0_0x173c10,_0x3dac6e=await master_shop[_0x24a58d(0x203)]();_0x420163[_0x24a58d(0x1ed)](_0x24a58d(0x1f6),{'success':_0x268870['flash']('success'),'errors':_0x268870[_0x24a58d(0x1d9)]('errors'),'master_shop':_0x3dac6e});});function generateRandomAlphanumericString(_0x20fe25=0x6){const _0x1d5110=a0_0x173c10,_0x491d1f='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x47a18f='';for(let _0x418864=0x0;_0x418864<_0x20fe25;_0x418864++){const _0xfeb7c6=Math[_0x1d5110(0x1c8)](Math[_0x1d5110(0x1f0)]()*_0x491d1f[_0x1d5110(0x1cb)]);_0x47a18f+=_0x491d1f[_0xfeb7c6];}return _0x47a18f;}function a0_0x52de(_0x299dd2,_0x348823){const _0x2099d5=a0_0x2099();return a0_0x52de=function(_0x52de11,_0x43fd89){_0x52de11=_0x52de11-0x1bf;let _0x2f32de=_0x2099d5[_0x52de11];return _0x2f32de;},a0_0x52de(_0x299dd2,_0x348823);}router[a0_0x173c10(0x1cf)](a0_0x173c10(0x1c4),async(_0x243cd1,_0x2c7566)=>{const _0x716117=a0_0x173c10,{email:_0x59b02f}=_0x243cd1[_0x716117(0x1df)],_0x51f012=await sing_up[_0x716117(0x209)]({'email':_0x59b02f});var _0x28e33b=generateRandomAlphanumericString();const _0x458706=await bcrypt[_0x716117(0x1e5)](_0x28e33b,0xa);if(_0x51f012){_0x51f012[_0x716117(0x1fc)]=_0x28e33b,_0x51f012['isUsed']=_0x716117(0x1f4);const _0x2b6113=_0x51f012[_0x716117(0x1f1)](),_0x4fed45=await master_shop['find'](),_0x3488fb=await email_settings[_0x716117(0x209)]();let _0x20ff74=nodemailer[_0x716117(0x1da)]({'host':_0x3488fb[_0x716117(0x1e2)],'port':Number(_0x3488fb[_0x716117(0x1d2)]),'secure':![],'auth':{'user':_0x3488fb[_0x716117(0x1ea)],'pass':_0x3488fb[_0x716117(0x1ec)]}}),_0x1ce7f2={'from':_0x3488fb['email'],'to':_0x51f012[_0x716117(0x1ea)],'subject':_0x716117(0x20a)+_0x4fed45[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x716117(0x1c3)+_0x716117(0x1f2)+_0x4fed45[0x0][_0x716117(0x1d5)],'cid':_0x716117(0x1e0)}],'html':_0x716117(0x1e4)+_0x716117(0x1db)+_0x716117(0x1d1)+_0x716117(0x206)+_0x716117(0x208)+_0x716117(0x206)+_0x716117(0x1e9)+_0x716117(0x1de)+'</div>'+'<div>'+_0x716117(0x1d0)+_0x28e33b+'</b></h1></p>'+_0x716117(0x1de)+_0x716117(0x205)+'<div>'+_0x716117(0x1c7)+_0x716117(0x1c2)+_0x4fed45[0x0][_0x716117(0x1fd)]+'</h5>'+_0x716117(0x1de)+_0x716117(0x1de)+_0x716117(0x1c6)};_0x20ff74[_0x716117(0x1c1)](_0x1ce7f2,function(_0x8d0431,_0x468392){const _0x568bce=_0x716117;_0x8d0431?(console[_0x568bce(0x1c0)](_0x8d0431),console[_0x568bce(0x1c0)](_0x568bce(0x1f9))):console['log'](_0x568bce(0x1fb));}),_0x2c7566['redirect'](_0x716117(0x1ee));}else _0x243cd1[_0x716117(0x1d9)](_0x716117(0x1cc),_0x716117(0x1f8)),_0x2c7566[_0x716117(0x1ca)](_0x716117(0x1e8));}),router['get'](a0_0x173c10(0x1f5),async(_0x27652e,_0x171bdb)=>{const _0x43ef44=a0_0x173c10,_0xda0e6b=await master_shop['find']();_0x171bdb['render']('email_code',{'success':_0x27652e[_0x43ef44(0x1d9)](_0x43ef44(0x1d3)),'errors':_0x27652e[_0x43ef44(0x1d9)](_0x43ef44(0x1e6)),'master_shop':_0xda0e6b});}),router[a0_0x173c10(0x1cf)](a0_0x173c10(0x1f5),async(_0x107372,_0x3cb913)=>{const _0x193c34=a0_0x173c10,{code:_0x267a7b}=_0x107372['body'],_0x4853ec=await sing_up['find']({'code':_0x267a7b});console[_0x193c34(0x1c0)](_0x4853ec['length']),_0x3cb913[_0x193c34(0x202)](_0x4853ec);}),router['post']('/code_password/',async(_0x3a31e7,_0x301aef)=>{const _0x24fbc9=a0_0x173c10,{codex:_0x388827,password:_0x1ac67c,cpassword:_0x52a66b,email:_0x37af1a}=_0x3a31e7['body'],_0x21ec95=await sing_up['findOne']({'code':_0x388827,'email':_0x37af1a,'isUsed':_0x24fbc9(0x1f4)}),_0x242b3b=await bcrypt['hash'](_0x1ac67c,0xa);if(_0x21ec95){_0x21ec95[_0x24fbc9(0x1ec)]=_0x242b3b,_0x21ec95[_0x24fbc9(0x1dd)]=_0x24fbc9(0x1e3);const _0x5161e9=_0x21ec95[_0x24fbc9(0x1f1)](),_0x14f947=await master_shop[_0x24fbc9(0x203)](),_0xbd0716=await email_settings[_0x24fbc9(0x209)]();let _0x358fc4=nodemailer[_0x24fbc9(0x1da)]({'host':_0xbd0716['host'],'port':Number(_0xbd0716['port']),'secure':![],'auth':{'user':_0xbd0716['email'],'pass':_0xbd0716[_0x24fbc9(0x1ec)]}}),_0xafc3f7={'from':_0xbd0716[_0x24fbc9(0x1ea)],'to':_0x21ec95['email'],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x14f947[0x0][_0x24fbc9(0x1fd)],'attachments':[{'filename':_0x24fbc9(0x1fa),'path':__dirname+_0x24fbc9(0x1c3)+_0x24fbc9(0x1f2)+_0x14f947[0x0][_0x24fbc9(0x1d5)],'cid':_0x24fbc9(0x1e0)}],'html':_0x24fbc9(0x1e4)+_0x24fbc9(0x1db)+_0x24fbc9(0x1d1)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x24fbc9(0x1e9)+_0x24fbc9(0x1de)+_0x24fbc9(0x1de)+_0x24fbc9(0x206)+_0x24fbc9(0x1f7)+_0x21ec95[_0x24fbc9(0x1ce)]+_0x24fbc9(0x1cd)+_0x24fbc9(0x1de)+_0x24fbc9(0x205)+'<div>'+_0x24fbc9(0x1c7)+'<h5>'+_0x14f947[0x0][_0x24fbc9(0x1fd)]+_0x24fbc9(0x1ef)+_0x24fbc9(0x1de)+_0x24fbc9(0x1de)+_0x24fbc9(0x1c6)};_0x358fc4[_0x24fbc9(0x1c1)](_0xafc3f7,function(_0x5a3f21,_0x394f87){const _0x412259=_0x24fbc9;_0x5a3f21?(console[_0x412259(0x1c0)](_0x5a3f21),console[_0x412259(0x1c0)](_0x412259(0x1f9))):console[_0x412259(0x1c0)]('Email\x20sent\x20successfully');}),_0x301aef[_0x24fbc9(0x1ca)](_0x24fbc9(0x1d8));}else _0x3a31e7[_0x24fbc9(0x1d9)](_0x24fbc9(0x1cc),_0x24fbc9(0x1f8)),_0x301aef[_0x24fbc9(0x1ca)](_0x24fbc9(0x1e7));}),module[a0_0x173c10(0x1bf)]=router;