const a0_0x464411=a0_0x595b;(function(_0xafa909,_0x164eba){const _0x3434d5=a0_0x595b,_0x3f3003=_0xafa909();while(!![]){try{const _0x2b39ba=parseInt(_0x3434d5(0x13c))/0x1*(-parseInt(_0x3434d5(0x10c))/0x2)+parseInt(_0x3434d5(0x12e))/0x3*(parseInt(_0x3434d5(0x110))/0x4)+-parseInt(_0x3434d5(0x11f))/0x5*(parseInt(_0x3434d5(0x154))/0x6)+parseInt(_0x3434d5(0x132))/0x7+parseInt(_0x3434d5(0x123))/0x8*(-parseInt(_0x3434d5(0x120))/0x9)+-parseInt(_0x3434d5(0x14b))/0xa*(-parseInt(_0x3434d5(0x144))/0xb)+parseInt(_0x3434d5(0x127))/0xc;if(_0x2b39ba===_0x164eba)break;else _0x3f3003['push'](_0x3f3003['shift']());}catch(_0xde1854){_0x3f3003['push'](_0x3f3003['shift']());}}}(a0_0x196c,0x292f1));const express=require(a0_0x464411(0x139)),app=express(),router=express[a0_0x464411(0x13d)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x464411(0x118)),auth=require(a0_0x464411(0x145)),nodemailer=require(a0_0x464411(0x14e));function a0_0x595b(_0x3a852a,_0x49b28c){const _0x196c0f=a0_0x196c();return a0_0x595b=function(_0x595bc1,_0x23064c){_0x595bc1=_0x595bc1-0x106;let _0x57b196=_0x196c0f[_0x595bc1];return _0x57b196;},a0_0x595b(_0x3a852a,_0x49b28c);}router[a0_0x464411(0x134)](a0_0x464411(0x11c),async(_0xde4052,_0x2d8473)=>{const _0x18e624=a0_0x464411,_0x4ea631=await master_shop[_0x18e624(0x117)]();_0x2d8473[_0x18e624(0x13a)](_0x18e624(0x10d),{'success':_0xde4052[_0x18e624(0x12c)](_0x18e624(0x11a)),'errors':_0xde4052[_0x18e624(0x12c)](_0x18e624(0x147)),'master_shop':_0x4ea631});});function generateRandomAlphanumericString(_0x290010=0x6){const _0x402ba3=a0_0x464411,_0x3c905c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0xc8f7ab='';for(let _0x41b113=0x0;_0x41b113<_0x290010;_0x41b113++){const _0x32a026=Math['floor'](Math[_0x402ba3(0x12d)]()*_0x3c905c['length']);_0xc8f7ab+=_0x3c905c[_0x32a026];}return _0xc8f7ab;}function a0_0x196c(){const _0x5c6704=['port','/code_password/','2BRMJQM','email_reset','log','save','18604pEnJuF','</head><body>','</div>','<h5>','post','createTransport','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','find','../models/all_models','findOne','success','<!DOCTYPE\x20html>','/view','code','Email\x20sent\x20successfully','10hYEcQQ','524178PQGUAc','/../public','Logo.png','16NMWNOa','sendMail','False','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','2611608EvabyE','</body></html>','length','body','/upload/','flash','random','147wQNxhx','image','Password\x20Successfuly\x20Reset\x20-\x20','/code/','227892FerFWw','</h5>','get','error','isUsed','<div>','/forgotPassword/view','express','render','<hr\x20class=\x22my-3\x22>','243597QCiGxQ','Router','/forgotPassword/code','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','redirect','Error\x20Occurs','/forgotPassword/code/','True','11PiXbjN','../middleware/auth','email','errors','</b></h1></p>','/login/','logo','2163770zAargi','json','name','nodemailer','exports',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','site_title','password','<p>Hello\x20','497088irSSCE','<strong>\x20Regards\x20</strong>','hash','host','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'];a0_0x196c=function(){return _0x5c6704;};return a0_0x196c();}router[a0_0x464411(0x114)]('/view',async(_0x7ae26e,_0x351348)=>{const _0x91677f=a0_0x464411,{email:_0x3c2e5f}=_0x7ae26e[_0x91677f(0x12a)],_0x29de45=await sing_up['findOne']({'email':_0x3c2e5f});var _0x4d1e4c=generateRandomAlphanumericString();const _0x4d1194=await bcrypt[_0x91677f(0x107)](_0x4d1e4c,0xa);if(_0x29de45){_0x29de45[_0x91677f(0x11d)]=_0x4d1e4c,_0x29de45['isUsed']=_0x91677f(0x125);const _0x32c344=_0x29de45[_0x91677f(0x10f)](),_0x3e127b=await master_shop['find'](),_0x49b5df=await email_settings[_0x91677f(0x119)]();let _0x104e34=nodemailer[_0x91677f(0x115)]({'host':_0x49b5df[_0x91677f(0x108)],'port':Number(_0x49b5df[_0x91677f(0x10a)]),'secure':![],'auth':{'user':_0x49b5df[_0x91677f(0x146)],'pass':_0x49b5df[_0x91677f(0x152)]}}),_0x3f17b9={'from':_0x49b5df[_0x91677f(0x146)],'to':_0x29de45[_0x91677f(0x146)],'subject':'Password\x20Reset\x20-\x20'+_0x3e127b[0x0][_0x91677f(0x151)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x91677f(0x121)+_0x91677f(0x12b)+_0x3e127b[0x0]['image'],'cid':_0x91677f(0x14a)}],'html':_0x91677f(0x11b)+'<html><head><title></title>'+'</head><body>'+_0x91677f(0x137)+_0x91677f(0x109)+_0x91677f(0x137)+_0x91677f(0x126)+'</div>'+_0x91677f(0x112)+_0x91677f(0x137)+_0x91677f(0x13f)+_0x4d1e4c+_0x91677f(0x148)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x91677f(0x137)+_0x91677f(0x106)+_0x91677f(0x113)+_0x3e127b[0x0]['site_title']+_0x91677f(0x133)+'</div>'+_0x91677f(0x112)+_0x91677f(0x128)};_0x104e34[_0x91677f(0x124)](_0x3f17b9,function(_0x4e3211,_0x4beede){const _0x4b25c5=_0x91677f;_0x4e3211?(console['log'](_0x4e3211),console[_0x4b25c5(0x10e)](_0x4b25c5(0x141))):console['log'](_0x4b25c5(0x11e));}),_0x351348[_0x91677f(0x140)](_0x91677f(0x142));}else _0x7ae26e[_0x91677f(0x12c)](_0x91677f(0x135),_0x91677f(0x116)),_0x351348[_0x91677f(0x140)](_0x91677f(0x138));}),router['get'](a0_0x464411(0x131),async(_0x421020,_0x4bcb23)=>{const _0x298bd1=a0_0x464411,_0x2bac4e=await master_shop['find']();_0x4bcb23['render']('email_code',{'success':_0x421020[_0x298bd1(0x12c)]('success'),'errors':_0x421020['flash'](_0x298bd1(0x147)),'master_shop':_0x2bac4e});}),router[a0_0x464411(0x114)](a0_0x464411(0x131),async(_0x23da27,_0x263499)=>{const _0x31e33a=a0_0x464411,{code:_0x4c4f78}=_0x23da27['body'],_0x46d750=await sing_up[_0x31e33a(0x117)]({'code':_0x4c4f78});console[_0x31e33a(0x10e)](_0x46d750[_0x31e33a(0x129)]),_0x263499[_0x31e33a(0x14c)](_0x46d750);}),router['post'](a0_0x464411(0x10b),async(_0x418338,_0x37bd5a)=>{const _0x1c72b5=a0_0x464411,{codex:_0x1b4110,password:_0x1f7744,cpassword:_0x428dd7,email:_0x432cad}=_0x418338[_0x1c72b5(0x12a)],_0x573062=await sing_up[_0x1c72b5(0x119)]({'code':_0x1b4110,'email':_0x432cad,'isUsed':'False'}),_0x381b20=await bcrypt[_0x1c72b5(0x107)](_0x1f7744,0xa);if(_0x573062){_0x573062[_0x1c72b5(0x152)]=_0x381b20,_0x573062[_0x1c72b5(0x136)]=_0x1c72b5(0x143);const _0x216a03=_0x573062[_0x1c72b5(0x10f)](),_0x3a10a3=await master_shop['find'](),_0x4a9313=await email_settings['findOne']();let _0x1e2ece=nodemailer[_0x1c72b5(0x115)]({'host':_0x4a9313[_0x1c72b5(0x108)],'port':Number(_0x4a9313[_0x1c72b5(0x10a)]),'secure':![],'auth':{'user':_0x4a9313[_0x1c72b5(0x146)],'pass':_0x4a9313[_0x1c72b5(0x152)]}}),_0x19ddfb={'from':_0x4a9313['email'],'to':_0x573062[_0x1c72b5(0x146)],'subject':_0x1c72b5(0x130)+_0x3a10a3[0x0][_0x1c72b5(0x151)],'attachments':[{'filename':_0x1c72b5(0x122),'path':__dirname+_0x1c72b5(0x121)+_0x1c72b5(0x12b)+_0x3a10a3[0x0][_0x1c72b5(0x12f)],'cid':_0x1c72b5(0x14a)}],'html':_0x1c72b5(0x11b)+'<html><head><title></title>'+_0x1c72b5(0x111)+_0x1c72b5(0x137)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x1c72b5(0x137)+_0x1c72b5(0x126)+_0x1c72b5(0x112)+_0x1c72b5(0x112)+_0x1c72b5(0x137)+_0x1c72b5(0x153)+_0x573062[_0x1c72b5(0x14d)]+_0x1c72b5(0x150)+_0x1c72b5(0x112)+_0x1c72b5(0x13b)+_0x1c72b5(0x137)+_0x1c72b5(0x106)+_0x1c72b5(0x113)+_0x3a10a3[0x0]['site_title']+_0x1c72b5(0x133)+_0x1c72b5(0x112)+_0x1c72b5(0x112)+_0x1c72b5(0x128)};_0x1e2ece[_0x1c72b5(0x124)](_0x19ddfb,function(_0x2eae18,_0x1d8ac2){const _0x4cfec2=_0x1c72b5;_0x2eae18?(console['log'](_0x2eae18),console[_0x4cfec2(0x10e)](_0x4cfec2(0x141))):console['log']('Email\x20sent\x20successfully');}),_0x37bd5a[_0x1c72b5(0x140)](_0x1c72b5(0x149));}else _0x418338[_0x1c72b5(0x12c)](_0x1c72b5(0x135),_0x1c72b5(0x116)),_0x37bd5a[_0x1c72b5(0x140)](_0x1c72b5(0x13e));}),module[a0_0x464411(0x14f)]=router;