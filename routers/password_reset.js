const a0_0x4888fb=a0_0x291a;(function(_0x1c5137,_0x510720){const _0x5f0478=a0_0x291a,_0x162b7c=_0x1c5137();while(!![]){try{const _0x140eb3=-parseInt(_0x5f0478(0x167))/0x1+parseInt(_0x5f0478(0x152))/0x2*(-parseInt(_0x5f0478(0x154))/0x3)+-parseInt(_0x5f0478(0x137))/0x4*(-parseInt(_0x5f0478(0x16e))/0x5)+parseInt(_0x5f0478(0x156))/0x6+-parseInt(_0x5f0478(0x15a))/0x7*(-parseInt(_0x5f0478(0x145))/0x8)+parseInt(_0x5f0478(0x15b))/0x9+-parseInt(_0x5f0478(0x160))/0xa;if(_0x140eb3===_0x510720)break;else _0x162b7c['push'](_0x162b7c['shift']());}catch(_0x3027b8){_0x162b7c['push'](_0x162b7c['shift']());}}}(a0_0x5b2a,0x529e1));const express=require(a0_0x4888fb(0x150)),app=express(),router=express[a0_0x4888fb(0x148)](),bcrypt=require(a0_0x4888fb(0x174)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x4888fb(0x166)),auth=require('../middleware/auth'),nodemailer=require(a0_0x4888fb(0x172));router[a0_0x4888fb(0x140)]('/view',async(_0x283f81,_0x132c57)=>{const _0x23ae1c=a0_0x4888fb,_0x1f09d4=await master_shop['find']();_0x132c57[_0x23ae1c(0x14b)](_0x23ae1c(0x142),{'success':_0x283f81['flash'](_0x23ae1c(0x15d)),'errors':_0x283f81[_0x23ae1c(0x17b)](_0x23ae1c(0x131)),'master_shop':_0x1f09d4});});function generateRandomAlphanumericString(_0x3f92f1=0x6){const _0x7f03f2=a0_0x4888fb,_0x41d9c2=_0x7f03f2(0x157);let _0xbd93a7='';for(let _0x2ff666=0x0;_0x2ff666<_0x3f92f1;_0x2ff666++){const _0x19e887=Math[_0x7f03f2(0x16c)](Math[_0x7f03f2(0x135)]()*_0x41d9c2[_0x7f03f2(0x130)]);_0xbd93a7+=_0x41d9c2[_0x19e887];}return _0xbd93a7;}function a0_0x291a(_0x440c09,_0x2e049b){const _0x5b2aca=a0_0x5b2a();return a0_0x291a=function(_0x291a01,_0x236c85){_0x291a01=_0x291a01-0x12f;let _0x13ac67=_0x5b2aca[_0x291a01];return _0x13ac67;},a0_0x291a(_0x440c09,_0x2e049b);}router[a0_0x4888fb(0x173)](a0_0x4888fb(0x146),async(_0x596594,_0x3d7f77)=>{const _0x1a59ce=a0_0x4888fb,{email:_0x4c717f}=_0x596594[_0x1a59ce(0x136)],_0x593810=await sing_up['findOne']({'email':_0x4c717f});var _0x507bec=generateRandomAlphanumericString();const _0x53c372=await bcrypt[_0x1a59ce(0x12f)](_0x507bec,0xa);if(_0x593810){_0x593810['code']=_0x507bec,_0x593810[_0x1a59ce(0x15f)]='False';const _0x2c141f=_0x593810[_0x1a59ce(0x139)](),_0x3de9b6=await master_shop[_0x1a59ce(0x144)](),_0x1964f2=await email_settings[_0x1a59ce(0x175)]();let _0x159e45=nodemailer[_0x1a59ce(0x171)]({'host':_0x1964f2[_0x1a59ce(0x16f)],'port':Number(_0x1964f2['port']),'secure':![],'auth':{'user':_0x1964f2['email'],'pass':_0x1964f2[_0x1a59ce(0x13c)]}}),_0x4c19cb={'from':_0x1964f2[_0x1a59ce(0x158)],'to':_0x593810[_0x1a59ce(0x158)],'subject':_0x1a59ce(0x161)+_0x3de9b6[0x0]['site_title'],'attachments':[{'filename':_0x1a59ce(0x168),'path':__dirname+_0x1a59ce(0x14e)+'/upload/'+_0x3de9b6[0x0][_0x1a59ce(0x13f)],'cid':_0x1a59ce(0x14a)}],'html':_0x1a59ce(0x14c)+_0x1a59ce(0x14d)+_0x1a59ce(0x177)+'<div>'+_0x1a59ce(0x134)+_0x1a59ce(0x169)+_0x1a59ce(0x155)+_0x1a59ce(0x133)+_0x1a59ce(0x133)+_0x1a59ce(0x169)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x507bec+_0x1a59ce(0x176)+'</div>'+_0x1a59ce(0x163)+_0x1a59ce(0x169)+_0x1a59ce(0x16b)+_0x1a59ce(0x15c)+_0x3de9b6[0x0][_0x1a59ce(0x165)]+_0x1a59ce(0x147)+'</div>'+_0x1a59ce(0x133)+_0x1a59ce(0x13e)};_0x159e45[_0x1a59ce(0x13b)](_0x4c19cb,function(_0x55a7ba,_0x375a88){const _0x1474af=_0x1a59ce;_0x55a7ba?(console[_0x1474af(0x16d)](_0x55a7ba),console[_0x1474af(0x16d)](_0x1474af(0x13d))):console['log']('Email\x20sent\x20successfully');}),_0x3d7f77[_0x1a59ce(0x164)](_0x1a59ce(0x15e));}else _0x596594['flash']('error',_0x1a59ce(0x178)),_0x3d7f77[_0x1a59ce(0x164)](_0x1a59ce(0x153));}),router[a0_0x4888fb(0x140)](a0_0x4888fb(0x141),async(_0x283c68,_0x5c2316)=>{const _0x42cd9e=a0_0x4888fb,_0x3bcccb=await master_shop[_0x42cd9e(0x144)]();_0x5c2316['render'](_0x42cd9e(0x13a),{'success':_0x283c68[_0x42cd9e(0x17b)]('success'),'errors':_0x283c68['flash']('errors'),'master_shop':_0x3bcccb});}),router[a0_0x4888fb(0x173)]('/code/',async(_0x65947b,_0x36ac92)=>{const _0x5b18f8=a0_0x4888fb,{code:_0x3334a6}=_0x65947b[_0x5b18f8(0x136)],_0x21de32=await sing_up[_0x5b18f8(0x144)]({'code':_0x3334a6});console[_0x5b18f8(0x16d)](_0x21de32[_0x5b18f8(0x130)]),_0x36ac92[_0x5b18f8(0x132)](_0x21de32);}),router[a0_0x4888fb(0x173)](a0_0x4888fb(0x151),async(_0x3b79d2,_0x55d607)=>{const _0x4a425a=a0_0x4888fb,{codex:_0x5222db,password:_0x5ab073,cpassword:_0x36e63d,email:_0x129f61}=_0x3b79d2[_0x4a425a(0x136)],_0xe685fe=await sing_up['findOne']({'code':_0x5222db,'email':_0x129f61,'isUsed':_0x4a425a(0x143)}),_0x92b163=await bcrypt[_0x4a425a(0x12f)](_0x5ab073,0xa);if(_0xe685fe){_0xe685fe[_0x4a425a(0x13c)]=_0x92b163,_0xe685fe[_0x4a425a(0x15f)]=_0x4a425a(0x138);const _0x9f03a3=_0xe685fe[_0x4a425a(0x139)](),_0x15203f=await master_shop['find'](),_0x1e36d5=await email_settings['findOne']();let _0x5b23f1=nodemailer[_0x4a425a(0x171)]({'host':_0x1e36d5[_0x4a425a(0x16f)],'port':Number(_0x1e36d5[_0x4a425a(0x162)]),'secure':![],'auth':{'user':_0x1e36d5[_0x4a425a(0x158)],'pass':_0x1e36d5[_0x4a425a(0x13c)]}}),_0x246fa0={'from':_0x1e36d5[_0x4a425a(0x158)],'to':_0xe685fe[_0x4a425a(0x158)],'subject':_0x4a425a(0x149)+_0x15203f[0x0][_0x4a425a(0x165)],'attachments':[{'filename':_0x4a425a(0x168),'path':__dirname+'/../public'+'/upload/'+_0x15203f[0x0][_0x4a425a(0x13f)],'cid':'logo'}],'html':_0x4a425a(0x14c)+'<html><head><title></title>'+_0x4a425a(0x177)+'<div>'+_0x4a425a(0x134)+_0x4a425a(0x169)+_0x4a425a(0x155)+_0x4a425a(0x133)+_0x4a425a(0x133)+_0x4a425a(0x169)+_0x4a425a(0x159)+_0xe685fe[_0x4a425a(0x17a)]+_0x4a425a(0x16a)+_0x4a425a(0x133)+_0x4a425a(0x163)+'<div>'+_0x4a425a(0x16b)+_0x4a425a(0x15c)+_0x15203f[0x0][_0x4a425a(0x165)]+_0x4a425a(0x147)+_0x4a425a(0x133)+_0x4a425a(0x133)+_0x4a425a(0x13e)};_0x5b23f1[_0x4a425a(0x13b)](_0x246fa0,function(_0x3e1322,_0x2cfc49){const _0x38efc9=_0x4a425a;_0x3e1322?(console[_0x38efc9(0x16d)](_0x3e1322),console['log'](_0x38efc9(0x13d))):console[_0x38efc9(0x16d)](_0x38efc9(0x170));}),_0x55d607['redirect'](_0x4a425a(0x179));}else _0x3b79d2[_0x4a425a(0x17b)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x55d607[_0x4a425a(0x164)](_0x4a425a(0x14f));}),module['exports']=router;function a0_0x5b2a(){const _0x2c7941=['nodemailer','post','bcryptjs','findOne','</b></h1></p>','</head><body>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','/login/','name','flash','hash','length','errors','json','</div>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','random','body','1804ANKZvg','True','save','email_code','sendMail','password','Error\x20Occurs','</body></html>','image','get','/code/','email_reset','False','find','5024AciXrz','/view','</h5>','Router','Password\x20Successfuly\x20Reset\x20-\x20','logo','render','<!DOCTYPE\x20html>','<html><head><title></title>','/../public','/forgotPassword/code','express','/code_password/','2mHfszR','/forgotPassword/view','589137CJIgds','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','3412686uVKNQv','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','email','<p>Hello\x20','2653Zkccmw','1935585WUeTir','<h5>','success','/forgotPassword/code/','isUsed','3353940CVImKS','Password\x20Reset\x20-\x20','port','<hr\x20class=\x22my-3\x22>','redirect','site_title','../models/all_models','392067eRwUfz','Logo.png','<div>',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','<strong>\x20Regards\x20</strong>','floor','log','2665mkjOfu','host','Email\x20sent\x20successfully','createTransport'];a0_0x5b2a=function(){return _0x2c7941;};return a0_0x5b2a();}