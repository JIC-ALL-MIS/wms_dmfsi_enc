function a0_0x7bd5(){const _0x505826=['isUsed','../middleware/auth','random','Logo.png','createTransport','</b></h1></p>','flash','Email\x20sent\x20successfully','/upload/','redirect','password','findOne','296076jFeFRn','length','</h5>','errors','host','</head><body>','246411gYdAho','error','exports','7992AqfbTq','floor','find','633180OvQpMP','Router','3259823xQJOtc','body','json','save','get','<!DOCTYPE\x20html>','13281yPpTWx','port','Error\x20Occurs','False','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','code','True','<hr\x20class=\x22my-3\x22>','/login/','render','<h5>','<div>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','nodemailer','email','image','log','/view','3753BMCFfi','name','success','post','20aBQtWt','/forgotPassword/view','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','/code/','email_code','site_title','</body></html>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','100HfzubT','hash','<strong>\x20Regards\x20</strong>','6209170lfsYTj','10tsHPrU','/../public','<html><head><title></title>','sendMail','</div>'];a0_0x7bd5=function(){return _0x505826;};return a0_0x7bd5();}function a0_0x3616(_0x1fb78c,_0x5a9dc3){const _0x7bd52e=a0_0x7bd5();return a0_0x3616=function(_0x361626,_0x16f2c4){_0x361626=_0x361626-0x104;let _0x1fb7ea=_0x7bd52e[_0x361626];return _0x1fb7ea;},a0_0x3616(_0x1fb78c,_0x5a9dc3);}const a0_0x4800b5=a0_0x3616;(function(_0x25c70e,_0x41d08a){const _0x459f29=a0_0x3616,_0x47383d=_0x25c70e();while(!![]){try{const _0x36e5c0=parseInt(_0x459f29(0x118))/0x1+parseInt(_0x459f29(0x112))/0x2+-parseInt(_0x459f29(0x126))/0x3*(parseInt(_0x459f29(0x144))/0x4)+parseInt(_0x459f29(0x148))/0x5*(parseInt(_0x459f29(0x11e))/0x6)+parseInt(_0x459f29(0x120))/0x7+parseInt(_0x459f29(0x11b))/0x8*(parseInt(_0x459f29(0x138))/0x9)+-parseInt(_0x459f29(0x13c))/0xa*(parseInt(_0x459f29(0x147))/0xb);if(_0x36e5c0===_0x41d08a)break;else _0x47383d['push'](_0x47383d['shift']());}catch(_0x55313f){_0x47383d['push'](_0x47383d['shift']());}}}(a0_0x7bd5,0x3c966));const express=require('express'),app=express(),router=express[a0_0x4800b5(0x11f)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x4800b5(0x107)),nodemailer=require(a0_0x4800b5(0x133));router[a0_0x4800b5(0x124)]('/view',async(_0xfc628f,_0x5df70d)=>{const _0x48735b=a0_0x4800b5,_0xd462a6=await master_shop['find']();_0x5df70d['render']('email_reset',{'success':_0xfc628f['flash'](_0x48735b(0x13a)),'errors':_0xfc628f['flash'](_0x48735b(0x115)),'master_shop':_0xd462a6});});function generateRandomAlphanumericString(_0x384ffe=0x6){const _0x2af736=a0_0x4800b5,_0x31548c=_0x2af736(0x13e);let _0x1ceef6='';for(let _0x239444=0x0;_0x239444<_0x384ffe;_0x239444++){const _0x2b2d4f=Math[_0x2af736(0x11c)](Math[_0x2af736(0x108)]()*_0x31548c[_0x2af736(0x113)]);_0x1ceef6+=_0x31548c[_0x2b2d4f];}return _0x1ceef6;}router[a0_0x4800b5(0x13b)](a0_0x4800b5(0x137),async(_0x19534d,_0x22a02d)=>{const _0x7d26ff=a0_0x4800b5,{email:_0x17cefa}=_0x19534d[_0x7d26ff(0x121)],_0x198164=await sing_up[_0x7d26ff(0x111)]({'email':_0x17cefa});var _0xe23a18=generateRandomAlphanumericString();const _0x3b7b1a=await bcrypt[_0x7d26ff(0x145)](_0xe23a18,0xa);if(_0x198164){_0x198164[_0x7d26ff(0x12b)]=_0xe23a18,_0x198164[_0x7d26ff(0x106)]='False';const _0x654624=_0x198164[_0x7d26ff(0x123)](),_0x6d2a92=await master_shop[_0x7d26ff(0x11d)](),_0x16d68d=await email_settings[_0x7d26ff(0x111)]();let _0x4a9a4f=nodemailer['createTransport']({'host':_0x16d68d[_0x7d26ff(0x116)],'port':Number(_0x16d68d[_0x7d26ff(0x127)]),'secure':![],'auth':{'user':_0x16d68d[_0x7d26ff(0x134)],'pass':_0x16d68d[_0x7d26ff(0x110)]}}),_0x15d652={'from':_0x16d68d[_0x7d26ff(0x134)],'to':_0x198164[_0x7d26ff(0x134)],'subject':'Password\x20Reset\x20-\x20'+_0x6d2a92[0x0][_0x7d26ff(0x141)],'attachments':[{'filename':_0x7d26ff(0x109),'path':__dirname+_0x7d26ff(0x149)+'/upload/'+_0x6d2a92[0x0]['image'],'cid':'logo'}],'html':_0x7d26ff(0x125)+_0x7d26ff(0x14a)+_0x7d26ff(0x117)+_0x7d26ff(0x131)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x7d26ff(0x105)+_0x7d26ff(0x131)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0xe23a18+_0x7d26ff(0x10b)+'</div>'+_0x7d26ff(0x12d)+_0x7d26ff(0x131)+'<strong>\x20Regards\x20</strong>'+_0x7d26ff(0x130)+_0x6d2a92[0x0]['site_title']+'</h5>'+_0x7d26ff(0x105)+_0x7d26ff(0x105)+_0x7d26ff(0x142)};_0x4a9a4f[_0x7d26ff(0x104)](_0x15d652,function(_0x364742,_0x3f918f){const _0x37e699=_0x7d26ff;_0x364742?(console[_0x37e699(0x136)](_0x364742),console[_0x37e699(0x136)](_0x37e699(0x128))):console[_0x37e699(0x136)](_0x37e699(0x10d));}),_0x22a02d[_0x7d26ff(0x10f)]('/forgotPassword/code/');}else _0x19534d[_0x7d26ff(0x10c)]('error',_0x7d26ff(0x143)),_0x22a02d[_0x7d26ff(0x10f)](_0x7d26ff(0x13d));}),router['get'](a0_0x4800b5(0x13f),async(_0x164321,_0x99985a)=>{const _0x5185de=a0_0x4800b5,_0xcb9160=await master_shop['find']();_0x99985a[_0x5185de(0x12f)](_0x5185de(0x140),{'success':_0x164321[_0x5185de(0x10c)](_0x5185de(0x13a)),'errors':_0x164321[_0x5185de(0x10c)](_0x5185de(0x115)),'master_shop':_0xcb9160});}),router[a0_0x4800b5(0x13b)](a0_0x4800b5(0x13f),async(_0x1760fa,_0x5f1881)=>{const _0x260ea5=a0_0x4800b5,{code:_0x1b8fa5}=_0x1760fa[_0x260ea5(0x121)],_0x37f428=await sing_up[_0x260ea5(0x11d)]({'code':_0x1b8fa5});console[_0x260ea5(0x136)](_0x37f428[_0x260ea5(0x113)]),_0x5f1881[_0x260ea5(0x122)](_0x37f428);}),router['post']('/code_password/',async(_0x4a77e2,_0xb598e6)=>{const _0x5a4fce=a0_0x4800b5,{codex:_0x3c0cff,password:_0x5a8bf3,cpassword:_0x22b1f1,email:_0x13c371}=_0x4a77e2[_0x5a4fce(0x121)],_0x2caf27=await sing_up[_0x5a4fce(0x111)]({'code':_0x3c0cff,'email':_0x13c371,'isUsed':_0x5a4fce(0x129)}),_0x98674b=await bcrypt['hash'](_0x5a8bf3,0xa);if(_0x2caf27){_0x2caf27['password']=_0x98674b,_0x2caf27[_0x5a4fce(0x106)]=_0x5a4fce(0x12c);const _0x21e638=_0x2caf27['save'](),_0x309aaa=await master_shop[_0x5a4fce(0x11d)](),_0xe05edd=await email_settings['findOne']();let _0x254841=nodemailer[_0x5a4fce(0x10a)]({'host':_0xe05edd[_0x5a4fce(0x116)],'port':Number(_0xe05edd[_0x5a4fce(0x127)]),'secure':![],'auth':{'user':_0xe05edd[_0x5a4fce(0x134)],'pass':_0xe05edd[_0x5a4fce(0x110)]}}),_0x2a9d6d={'from':_0xe05edd['email'],'to':_0x2caf27['email'],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x309aaa[0x0][_0x5a4fce(0x141)],'attachments':[{'filename':_0x5a4fce(0x109),'path':__dirname+_0x5a4fce(0x149)+_0x5a4fce(0x10e)+_0x309aaa[0x0][_0x5a4fce(0x135)],'cid':'logo'}],'html':_0x5a4fce(0x125)+_0x5a4fce(0x14a)+'</head><body>'+_0x5a4fce(0x131)+_0x5a4fce(0x12a)+_0x5a4fce(0x131)+_0x5a4fce(0x132)+_0x5a4fce(0x105)+_0x5a4fce(0x105)+_0x5a4fce(0x131)+'<p>Hello\x20'+_0x2caf27[_0x5a4fce(0x139)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x5a4fce(0x105)+_0x5a4fce(0x12d)+'<div>'+_0x5a4fce(0x146)+'<h5>'+_0x309aaa[0x0][_0x5a4fce(0x141)]+_0x5a4fce(0x114)+_0x5a4fce(0x105)+_0x5a4fce(0x105)+_0x5a4fce(0x142)};_0x254841['sendMail'](_0x2a9d6d,function(_0x40a074,_0x23ad08){const _0x4c5030=_0x5a4fce;_0x40a074?(console[_0x4c5030(0x136)](_0x40a074),console[_0x4c5030(0x136)](_0x4c5030(0x128))):console[_0x4c5030(0x136)](_0x4c5030(0x10d));}),_0xb598e6['redirect'](_0x5a4fce(0x12e));}else _0x4a77e2[_0x5a4fce(0x10c)](_0x5a4fce(0x119),_0x5a4fce(0x143)),_0xb598e6[_0x5a4fce(0x10f)]('/forgotPassword/code');}),module[a0_0x4800b5(0x11a)]=router;