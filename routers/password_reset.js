const a0_0x4f237e=a0_0x1b3e;function a0_0x1b3e(_0x2287bf,_0xa62be5){const _0x5291fd=a0_0x5291();return a0_0x1b3e=function(_0x1b3ea4,_0x23c4df){_0x1b3ea4=_0x1b3ea4-0x1a2;let _0x128692=_0x5291fd[_0x1b3ea4];return _0x128692;},a0_0x1b3e(_0x2287bf,_0xa62be5);}(function(_0x3d728b,_0x4b6e4c){const _0x4e955f=a0_0x1b3e,_0x40ed1a=_0x3d728b();while(!![]){try{const _0x58326d=-parseInt(_0x4e955f(0x1ad))/0x1*(-parseInt(_0x4e955f(0x1d1))/0x2)+-parseInt(_0x4e955f(0x1cd))/0x3*(parseInt(_0x4e955f(0x1ce))/0x4)+-parseInt(_0x4e955f(0x1b6))/0x5*(-parseInt(_0x4e955f(0x1ec))/0x6)+-parseInt(_0x4e955f(0x1e0))/0x7+parseInt(_0x4e955f(0x1bc))/0x8*(parseInt(_0x4e955f(0x1df))/0x9)+-parseInt(_0x4e955f(0x1c0))/0xa+-parseInt(_0x4e955f(0x1c2))/0xb;if(_0x58326d===_0x4b6e4c)break;else _0x40ed1a['push'](_0x40ed1a['shift']());}catch(_0x28fe4d){_0x40ed1a['push'](_0x40ed1a['shift']());}}}(a0_0x5291,0xb84ad));const express=require(a0_0x4f237e(0x1ae)),app=express(),router=express[a0_0x4f237e(0x1bb)](),bcrypt=require(a0_0x4f237e(0x1e5)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x4f237e(0x1dc)),auth=require(a0_0x4f237e(0x1e1)),nodemailer=require('nodemailer');function a0_0x5291(){const _0x599646=['<h5>','Email\x20sent\x20successfully','/upload/','/code_password/','json','image','password','582819ewcfyp','20bSsewi','name','</body></html>','31396XcliQp','redirect','Password\x20Successfuly\x20Reset\x20-\x20','flash','/../public','</b></h1></p>','site_title','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','</div>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','email_reset','../models/all_models','<div>','host','12521142DpDqZs','3042529tFvaXU','../middleware/auth','<!DOCTYPE\x20html>','True','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','bcryptjs','Error\x20Occurs','createTransport','log','</head><body>','<html><head><title></title>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','702mtMuue','save','body',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','False','isUsed','success','email','findOne','port','post','logo','<hr\x20class=\x22my-3\x22>','54OUsnoz','express','</h5>','<strong>\x20Regards\x20</strong>','find','render','<p>Hello\x20','exports','get','38375bgAMEY','error','random','/code/','hash','Router','8sHNgZX','/view','/forgotPassword/code/','Logo.png','1957720EqslCj','Password\x20Reset\x20-\x20','8582860lCrJxA','/login/','sendMail','errors'];a0_0x5291=function(){return _0x599646;};return a0_0x5291();}router[a0_0x4f237e(0x1b5)](a0_0x4f237e(0x1bd),async(_0x3df901,_0x1fed6c)=>{const _0x18a4e6=a0_0x4f237e,_0xea631f=await master_shop[_0x18a4e6(0x1b1)]();_0x1fed6c[_0x18a4e6(0x1b2)](_0x18a4e6(0x1db),{'success':_0x3df901[_0x18a4e6(0x1d4)]('success'),'errors':_0x3df901[_0x18a4e6(0x1d4)](_0x18a4e6(0x1c5)),'master_shop':_0xea631f});});function generateRandomAlphanumericString(_0x5e2a62=0x6){const _0x53ce3d=a0_0x4f237e,_0x598e73=_0x53ce3d(0x1da);let _0x31dde7='';for(let _0x44824a=0x0;_0x44824a<_0x5e2a62;_0x44824a++){const _0x468fa9=Math['floor'](Math[_0x53ce3d(0x1b8)]()*_0x598e73['length']);_0x31dde7+=_0x598e73[_0x468fa9];}return _0x31dde7;}router[a0_0x4f237e(0x1aa)](a0_0x4f237e(0x1bd),async(_0x257062,_0x258e15)=>{const _0x3c9c4a=a0_0x4f237e,{email:_0x2d12d7}=_0x257062['body'],_0x379e50=await sing_up[_0x3c9c4a(0x1a8)]({'email':_0x2d12d7});var _0x352d4f=generateRandomAlphanumericString();const _0x4ff1e5=await bcrypt[_0x3c9c4a(0x1ba)](_0x352d4f,0xa);if(_0x379e50){_0x379e50['code']=_0x352d4f,_0x379e50[_0x3c9c4a(0x1a5)]=_0x3c9c4a(0x1a4);const _0x3a1f42=_0x379e50[_0x3c9c4a(0x1ed)](),_0x472d72=await master_shop[_0x3c9c4a(0x1b1)](),_0x4d95d8=await email_settings[_0x3c9c4a(0x1a8)]();let _0x39f517=nodemailer['createTransport']({'host':_0x4d95d8[_0x3c9c4a(0x1de)],'port':Number(_0x4d95d8[_0x3c9c4a(0x1a9)]),'secure':![],'auth':{'user':_0x4d95d8['email'],'pass':_0x4d95d8[_0x3c9c4a(0x1cc)]}}),_0x37f4cd={'from':_0x4d95d8[_0x3c9c4a(0x1a7)],'to':_0x379e50[_0x3c9c4a(0x1a7)],'subject':_0x3c9c4a(0x1c1)+_0x472d72[0x0][_0x3c9c4a(0x1d7)],'attachments':[{'filename':_0x3c9c4a(0x1bf),'path':__dirname+'/../public'+_0x3c9c4a(0x1c8)+_0x472d72[0x0][_0x3c9c4a(0x1cb)],'cid':_0x3c9c4a(0x1ab)}],'html':'<!DOCTYPE\x20html>'+_0x3c9c4a(0x1ea)+_0x3c9c4a(0x1e9)+_0x3c9c4a(0x1dd)+_0x3c9c4a(0x1eb)+_0x3c9c4a(0x1dd)+_0x3c9c4a(0x1d8)+_0x3c9c4a(0x1d9)+_0x3c9c4a(0x1d9)+_0x3c9c4a(0x1dd)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x352d4f+_0x3c9c4a(0x1d6)+_0x3c9c4a(0x1d9)+_0x3c9c4a(0x1ac)+_0x3c9c4a(0x1dd)+_0x3c9c4a(0x1b0)+_0x3c9c4a(0x1c6)+_0x472d72[0x0][_0x3c9c4a(0x1d7)]+_0x3c9c4a(0x1af)+_0x3c9c4a(0x1d9)+_0x3c9c4a(0x1d9)+_0x3c9c4a(0x1d0)};_0x39f517[_0x3c9c4a(0x1c4)](_0x37f4cd,function(_0x484fce,_0x3dde15){const _0x499a10=_0x3c9c4a;_0x484fce?(console[_0x499a10(0x1e8)](_0x484fce),console['log'](_0x499a10(0x1e6))):console[_0x499a10(0x1e8)](_0x499a10(0x1c7));}),_0x258e15[_0x3c9c4a(0x1d2)](_0x3c9c4a(0x1be));}else _0x257062[_0x3c9c4a(0x1d4)](_0x3c9c4a(0x1b7),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x258e15['redirect']('/forgotPassword/view');}),router[a0_0x4f237e(0x1b5)]('/code/',async(_0x5140dd,_0x5d7a6d)=>{const _0xab3f34=a0_0x4f237e,_0x207470=await master_shop[_0xab3f34(0x1b1)]();_0x5d7a6d[_0xab3f34(0x1b2)]('email_code',{'success':_0x5140dd['flash'](_0xab3f34(0x1a6)),'errors':_0x5140dd[_0xab3f34(0x1d4)](_0xab3f34(0x1c5)),'master_shop':_0x207470});}),router['post'](a0_0x4f237e(0x1b9),async(_0x27d015,_0x840bb6)=>{const _0x318d29=a0_0x4f237e,{code:_0x41d51f}=_0x27d015[_0x318d29(0x1a2)],_0x26a03b=await sing_up[_0x318d29(0x1b1)]({'code':_0x41d51f});console[_0x318d29(0x1e8)](_0x26a03b['length']),_0x840bb6[_0x318d29(0x1ca)](_0x26a03b);}),router[a0_0x4f237e(0x1aa)](a0_0x4f237e(0x1c9),async(_0x21a7bc,_0xe6dee)=>{const _0x4d6698=a0_0x4f237e,{codex:_0x3eb17a,password:_0x13ef7d,cpassword:_0x226c24,email:_0x46685a}=_0x21a7bc[_0x4d6698(0x1a2)],_0x5b579d=await sing_up[_0x4d6698(0x1a8)]({'code':_0x3eb17a,'email':_0x46685a,'isUsed':'False'}),_0x26ebfd=await bcrypt['hash'](_0x13ef7d,0xa);if(_0x5b579d){_0x5b579d[_0x4d6698(0x1cc)]=_0x26ebfd,_0x5b579d[_0x4d6698(0x1a5)]=_0x4d6698(0x1e3);const _0xc2e937=_0x5b579d['save'](),_0x2625ad=await master_shop[_0x4d6698(0x1b1)](),_0x57ae5d=await email_settings[_0x4d6698(0x1a8)]();let _0x461889=nodemailer[_0x4d6698(0x1e7)]({'host':_0x57ae5d[_0x4d6698(0x1de)],'port':Number(_0x57ae5d[_0x4d6698(0x1a9)]),'secure':![],'auth':{'user':_0x57ae5d[_0x4d6698(0x1a7)],'pass':_0x57ae5d[_0x4d6698(0x1cc)]}}),_0xa954c3={'from':_0x57ae5d[_0x4d6698(0x1a7)],'to':_0x5b579d[_0x4d6698(0x1a7)],'subject':_0x4d6698(0x1d3)+_0x2625ad[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x4d6698(0x1d5)+_0x4d6698(0x1c8)+_0x2625ad[0x0][_0x4d6698(0x1cb)],'cid':_0x4d6698(0x1ab)}],'html':_0x4d6698(0x1e2)+'<html><head><title></title>'+'</head><body>'+'<div>'+_0x4d6698(0x1eb)+_0x4d6698(0x1dd)+_0x4d6698(0x1d8)+_0x4d6698(0x1d9)+_0x4d6698(0x1d9)+_0x4d6698(0x1dd)+_0x4d6698(0x1b3)+_0x5b579d[_0x4d6698(0x1cf)]+_0x4d6698(0x1a3)+'</div>'+_0x4d6698(0x1ac)+_0x4d6698(0x1dd)+_0x4d6698(0x1b0)+'<h5>'+_0x2625ad[0x0][_0x4d6698(0x1d7)]+_0x4d6698(0x1af)+_0x4d6698(0x1d9)+_0x4d6698(0x1d9)+_0x4d6698(0x1d0)};_0x461889[_0x4d6698(0x1c4)](_0xa954c3,function(_0x26615b,_0x3bfa89){const _0xf51edf=_0x4d6698;_0x26615b?(console['log'](_0x26615b),console[_0xf51edf(0x1e8)](_0xf51edf(0x1e6))):console[_0xf51edf(0x1e8)](_0xf51edf(0x1c7));}),_0xe6dee[_0x4d6698(0x1d2)](_0x4d6698(0x1c3));}else _0x21a7bc[_0x4d6698(0x1d4)](_0x4d6698(0x1b7),_0x4d6698(0x1e4)),_0xe6dee[_0x4d6698(0x1d2)]('/forgotPassword/code');}),module[a0_0x4f237e(0x1b4)]=router;