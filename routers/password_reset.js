const a0_0x590d31=a0_0x1838;(function(_0x187389,_0x2cff14){const _0x267f96=a0_0x1838,_0xd1c43a=_0x187389();while(!![]){try{const _0x2728ce=parseInt(_0x267f96(0xb3))/0x1*(parseInt(_0x267f96(0xbd))/0x2)+parseInt(_0x267f96(0x96))/0x3+-parseInt(_0x267f96(0xb1))/0x4+-parseInt(_0x267f96(0xba))/0x5+parseInt(_0x267f96(0xbe))/0x6+parseInt(_0x267f96(0xa9))/0x7+parseInt(_0x267f96(0xd1))/0x8*(parseInt(_0x267f96(0xbc))/0x9);if(_0x2728ce===_0x2cff14)break;else _0xd1c43a['push'](_0xd1c43a['shift']());}catch(_0x111216){_0xd1c43a['push'](_0xd1c43a['shift']());}}}(a0_0x3125,0x5f12b));const express=require(a0_0x590d31(0x99)),app=express(),router=express[a0_0x590d31(0xa3)](),bcrypt=require(a0_0x590d31(0x97)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x590d31(0xc8)),auth=require(a0_0x590d31(0xce)),nodemailer=require(a0_0x590d31(0x9c));router[a0_0x590d31(0xd3)]('/view',async(_0x15dcfd,_0x9560f4)=>{const _0x1b1247=a0_0x590d31,_0x55e443=await master_shop[_0x1b1247(0xcf)]();_0x9560f4[_0x1b1247(0xc1)](_0x1b1247(0xd2),{'success':_0x15dcfd['flash'](_0x1b1247(0xa1)),'errors':_0x15dcfd[_0x1b1247(0xb7)](_0x1b1247(0xaa)),'master_shop':_0x55e443});});function a0_0x1838(_0x23b93a,_0x508c4f){const _0x312545=a0_0x3125();return a0_0x1838=function(_0x1838d8,_0xf91334){_0x1838d8=_0x1838d8-0x92;let _0x40cf4e=_0x312545[_0x1838d8];return _0x40cf4e;},a0_0x1838(_0x23b93a,_0x508c4f);}function a0_0x3125(){const _0x1a02a5=['createTransport','Error\x20Occurs','flash','save','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','3620155jaSrHs','</head><body>','18lAdWvH','352866lPlFcF','1213680SMNtdi','<html><head><title></title>','/code_password/','render','/../public','password','email','/code/','Password\x20Successfuly\x20Reset\x20-\x20','port','../models/all_models','</body></html>','<!DOCTYPE\x20html>','site_title','length','host','../middleware/auth','find','json','208504yDOYJp','email_reset','get','redirect','/view','floor','<div>','findOne','random','logo','1931544mnAltQ','bcryptjs','<hr\x20class=\x22my-3\x22>','express','/upload/','error','nodemailer','Email\x20sent\x20successfully','Password\x20Reset\x20-\x20','image','<strong>\x20Regards\x20</strong>','success','</div>','Router','body','isUsed','code','False','/forgotPassword/code','248164bFZWaa','errors','sendMail','email_code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','True','log','2103952EyPmxP','post','4fYqILa','hash'];a0_0x3125=function(){return _0x1a02a5;};return a0_0x3125();}function generateRandomAlphanumericString(_0x4dff8b=0x6){const _0x1ef4ed=a0_0x590d31,_0xa5f1c1=_0x1ef4ed(0xae);let _0x29e446='';for(let _0x2935a3=0x0;_0x2935a3<_0x4dff8b;_0x2935a3++){const _0x467252=Math[_0x1ef4ed(0xd6)](Math[_0x1ef4ed(0x94)]()*_0xa5f1c1[_0x1ef4ed(0xcc)]);_0x29e446+=_0xa5f1c1[_0x467252];}return _0x29e446;}router[a0_0x590d31(0xb2)](a0_0x590d31(0xd5),async(_0x5cfabf,_0x1ad4b8)=>{const _0x14541f=a0_0x590d31,{email:_0x9af52f}=_0x5cfabf[_0x14541f(0xa4)],_0x4b38d0=await sing_up[_0x14541f(0x93)]({'email':_0x9af52f});var _0x1f2203=generateRandomAlphanumericString();const _0x41496e=await bcrypt['hash'](_0x1f2203,0xa);if(_0x4b38d0){_0x4b38d0[_0x14541f(0xa6)]=_0x1f2203,_0x4b38d0['isUsed']=_0x14541f(0xa7);const _0x4ddcd6=_0x4b38d0['save'](),_0x324986=await master_shop[_0x14541f(0xcf)](),_0x127149=await email_settings[_0x14541f(0x93)]();let _0x3b535d=nodemailer[_0x14541f(0xb5)]({'host':_0x127149[_0x14541f(0xcd)],'port':Number(_0x127149[_0x14541f(0xc7)]),'secure':![],'auth':{'user':_0x127149[_0x14541f(0xc4)],'pass':_0x127149[_0x14541f(0xc3)]}}),_0x4fa163={'from':_0x127149[_0x14541f(0xc4)],'to':_0x4b38d0['email'],'subject':_0x14541f(0x9e)+_0x324986[0x0][_0x14541f(0xcb)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+'/upload/'+_0x324986[0x0][_0x14541f(0x9f)],'cid':_0x14541f(0x95)}],'html':_0x14541f(0xca)+_0x14541f(0xbf)+_0x14541f(0xbb)+_0x14541f(0x92)+_0x14541f(0xad)+_0x14541f(0x92)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x14541f(0xa2)+_0x14541f(0xa2)+_0x14541f(0x92)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x1f2203+'</b></h1></p>'+_0x14541f(0xa2)+_0x14541f(0x98)+_0x14541f(0x92)+_0x14541f(0xa0)+'<h5>'+_0x324986[0x0]['site_title']+'</h5>'+_0x14541f(0xa2)+_0x14541f(0xa2)+_0x14541f(0xc9)};_0x3b535d[_0x14541f(0xab)](_0x4fa163,function(_0x478207,_0x2b85bb){const _0xe791d3=_0x14541f;_0x478207?(console[_0xe791d3(0xb0)](_0x478207),console[_0xe791d3(0xb0)](_0xe791d3(0xb6))):console[_0xe791d3(0xb0)](_0xe791d3(0x9d));}),_0x1ad4b8[_0x14541f(0xd4)]('/forgotPassword/code/');}else _0x5cfabf[_0x14541f(0xb7)](_0x14541f(0x9b),_0x14541f(0xb9)),_0x1ad4b8['redirect']('/forgotPassword/view');}),router['get'](a0_0x590d31(0xc5),async(_0x134fcc,_0x4bd4d6)=>{const _0x192243=a0_0x590d31,_0x3d6c5a=await master_shop['find']();_0x4bd4d6[_0x192243(0xc1)](_0x192243(0xac),{'success':_0x134fcc['flash'](_0x192243(0xa1)),'errors':_0x134fcc[_0x192243(0xb7)](_0x192243(0xaa)),'master_shop':_0x3d6c5a});}),router['post'](a0_0x590d31(0xc5),async(_0x201707,_0x32bd2e)=>{const _0x1922d4=a0_0x590d31,{code:_0x4c6c91}=_0x201707['body'],_0x3dff9f=await sing_up[_0x1922d4(0xcf)]({'code':_0x4c6c91});console[_0x1922d4(0xb0)](_0x3dff9f['length']),_0x32bd2e[_0x1922d4(0xd0)](_0x3dff9f);}),router['post'](a0_0x590d31(0xc0),async(_0x3cf6f0,_0x57b6d0)=>{const _0x3fd106=a0_0x590d31,{codex:_0x5191bd,password:_0xf5edb1,cpassword:_0x5d2ae3,email:_0x5b3335}=_0x3cf6f0[_0x3fd106(0xa4)],_0x2c8adc=await sing_up[_0x3fd106(0x93)]({'code':_0x5191bd,'email':_0x5b3335,'isUsed':'False'}),_0x935613=await bcrypt[_0x3fd106(0xb4)](_0xf5edb1,0xa);if(_0x2c8adc){_0x2c8adc[_0x3fd106(0xc3)]=_0x935613,_0x2c8adc[_0x3fd106(0xa5)]=_0x3fd106(0xaf);const _0x275dfa=_0x2c8adc[_0x3fd106(0xb8)](),_0x3de745=await master_shop[_0x3fd106(0xcf)](),_0x39831f=await email_settings[_0x3fd106(0x93)]();let _0x54844f=nodemailer[_0x3fd106(0xb5)]({'host':_0x39831f[_0x3fd106(0xcd)],'port':Number(_0x39831f[_0x3fd106(0xc7)]),'secure':![],'auth':{'user':_0x39831f[_0x3fd106(0xc4)],'pass':_0x39831f['password']}}),_0x303741={'from':_0x39831f['email'],'to':_0x2c8adc[_0x3fd106(0xc4)],'subject':_0x3fd106(0xc6)+_0x3de745[0x0][_0x3fd106(0xcb)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x3fd106(0xc2)+_0x3fd106(0x9a)+_0x3de745[0x0][_0x3fd106(0x9f)],'cid':_0x3fd106(0x95)}],'html':'<!DOCTYPE\x20html>'+_0x3fd106(0xbf)+'</head><body>'+_0x3fd106(0x92)+_0x3fd106(0xad)+_0x3fd106(0x92)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x3fd106(0xa2)+_0x3fd106(0x92)+'<p>Hello\x20'+_0x2c8adc['name']+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x3fd106(0xa2)+_0x3fd106(0x98)+_0x3fd106(0x92)+_0x3fd106(0xa0)+'<h5>'+_0x3de745[0x0][_0x3fd106(0xcb)]+'</h5>'+_0x3fd106(0xa2)+'</div>'+'</body></html>'};_0x54844f['sendMail'](_0x303741,function(_0x51e466,_0xd94fd6){const _0xb1d94c=_0x3fd106;_0x51e466?(console['log'](_0x51e466),console[_0xb1d94c(0xb0)]('Error\x20Occurs')):console['log'](_0xb1d94c(0x9d));}),_0x57b6d0[_0x3fd106(0xd4)]('/login/');}else _0x3cf6f0[_0x3fd106(0xb7)](_0x3fd106(0x9b),_0x3fd106(0xb9)),_0x57b6d0[_0x3fd106(0xd4)](_0x3fd106(0xa8));}),module['exports']=router;