const a0_0x47b3c0=a0_0xb35e;function a0_0x402f(){const _0x4a536f=['<hr\x20class=\x22my-3\x22>','<h5>','</body></html>','sendMail','name','Logo.png','isUsed','host','8bhpdRN','6jsLlFm','<strong>\x20Regards\x20</strong>','</head><body>','/forgotPassword/code/','/upload/','../models/all_models','site_title','Email\x20sent\x20successfully','post','/login/','/code_password/','303750HFkvaA','Password\x20Successfuly\x20Reset\x20-\x20','</div>','code','/code/','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','False','3512382hKvgJA','True','flash','get','1033711lEuobr','save','render','image','/view','3216254nXWfoj','password','nodemailer','findOne','1124639gPilge','729YIAPYw','Error\x20Occurs','port','length','json',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','email_code','<div>','/forgotPassword/view','<p>Hello\x20','createTransport','log','redirect','body','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<html><head><title></title>','2706096wzEAXQ','hash','7060850RhPmwW','bcryptjs','../middleware/auth','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','errors','</h5>','logo','find','/../public','success','exports','floor','<!DOCTYPE\x20html>','/forgotPassword/code','email'];a0_0x402f=function(){return _0x4a536f;};return a0_0x402f();}function a0_0xb35e(_0xb68de3,_0x5570b7){const _0x402f96=a0_0x402f();return a0_0xb35e=function(_0xb35eef,_0x5c91cf){_0xb35eef=_0xb35eef-0x1c6;let _0xcdb83d=_0x402f96[_0xb35eef];return _0xcdb83d;},a0_0xb35e(_0xb68de3,_0x5570b7);}(function(_0x1bdc3c,_0x3f3e4c){const _0x57836e=a0_0xb35e,_0x1e215d=_0x1bdc3c();while(!![]){try{const _0x4b0998=parseInt(_0x57836e(0x1cd))/0x1+-parseInt(_0x57836e(0x1c9))/0x2+parseInt(_0x57836e(0x20b))/0x3+-parseInt(_0x57836e(0x1de))/0x4+parseInt(_0x57836e(0x1e0))/0x5*(-parseInt(_0x57836e(0x1f8))/0x6)+-parseInt(_0x57836e(0x20f))/0x7*(parseInt(_0x57836e(0x1f7))/0x8)+parseInt(_0x57836e(0x1ce))/0x9*(parseInt(_0x57836e(0x203))/0xa);if(_0x4b0998===_0x3f3e4c)break;else _0x1e215d['push'](_0x1e215d['shift']());}catch(_0x2938e7){_0x1e215d['push'](_0x1e215d['shift']());}}}(a0_0x402f,0xde7d2));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x47b3c0(0x1e1)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x47b3c0(0x1fd)),auth=require(a0_0x47b3c0(0x1e2)),nodemailer=require(a0_0x47b3c0(0x1cb));router[a0_0x47b3c0(0x20e)](a0_0x47b3c0(0x1c8),async(_0x544b64,_0x278453)=>{const _0x134964=a0_0x47b3c0,_0x574f45=await master_shop[_0x134964(0x1e7)]();_0x278453[_0x134964(0x1c6)]('email_reset',{'success':_0x544b64['flash'](_0x134964(0x1e9)),'errors':_0x544b64[_0x134964(0x20d)]('errors'),'master_shop':_0x574f45});});function generateRandomAlphanumericString(_0x5d01fb=0x6){const _0x4c37c7=a0_0x47b3c0,_0x122c89=_0x4c37c7(0x1e3);let _0x12df30='';for(let _0x1a3077=0x0;_0x1a3077<_0x5d01fb;_0x1a3077++){const _0x350142=Math[_0x4c37c7(0x1eb)](Math['random']()*_0x122c89[_0x4c37c7(0x1d1)]);_0x12df30+=_0x122c89[_0x350142];}return _0x12df30;}router[a0_0x47b3c0(0x200)]('/view',async(_0x2c50b6,_0x4f1091)=>{const _0x3b336b=a0_0x47b3c0,{email:_0x55b921}=_0x2c50b6[_0x3b336b(0x1db)],_0x1aca60=await sing_up['findOne']({'email':_0x55b921});var _0x37bdf7=generateRandomAlphanumericString();const _0x4f8d5d=await bcrypt['hash'](_0x37bdf7,0xa);if(_0x1aca60){_0x1aca60[_0x3b336b(0x206)]=_0x37bdf7,_0x1aca60[_0x3b336b(0x1f5)]=_0x3b336b(0x20a);const _0x36ff45=_0x1aca60[_0x3b336b(0x210)](),_0x337f6c=await master_shop[_0x3b336b(0x1e7)](),_0x4acc47=await email_settings[_0x3b336b(0x1cc)]();let _0x5daee3=nodemailer[_0x3b336b(0x1d8)]({'host':_0x4acc47[_0x3b336b(0x1f6)],'port':Number(_0x4acc47[_0x3b336b(0x1d0)]),'secure':![],'auth':{'user':_0x4acc47['email'],'pass':_0x4acc47[_0x3b336b(0x1ca)]}}),_0xdb1977={'from':_0x4acc47[_0x3b336b(0x1ee)],'to':_0x1aca60['email'],'subject':'Password\x20Reset\x20-\x20'+_0x337f6c[0x0][_0x3b336b(0x1fe)],'attachments':[{'filename':_0x3b336b(0x1f4),'path':__dirname+_0x3b336b(0x1e8)+'/upload/'+_0x337f6c[0x0][_0x3b336b(0x1c7)],'cid':_0x3b336b(0x1e6)}],'html':_0x3b336b(0x1ec)+_0x3b336b(0x1dd)+_0x3b336b(0x1fa)+_0x3b336b(0x1d5)+_0x3b336b(0x209)+_0x3b336b(0x1d5)+_0x3b336b(0x1dc)+'</div>'+_0x3b336b(0x205)+_0x3b336b(0x1d5)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x37bdf7+'</b></h1></p>'+_0x3b336b(0x205)+'<hr\x20class=\x22my-3\x22>'+_0x3b336b(0x1d5)+_0x3b336b(0x1f9)+'<h5>'+_0x337f6c[0x0][_0x3b336b(0x1fe)]+_0x3b336b(0x1e5)+_0x3b336b(0x205)+_0x3b336b(0x205)+_0x3b336b(0x1f1)};_0x5daee3[_0x3b336b(0x1f2)](_0xdb1977,function(_0x4a715b,_0x45627c){const _0x5328b9=_0x3b336b;_0x4a715b?(console[_0x5328b9(0x1d9)](_0x4a715b),console['log'](_0x5328b9(0x1cf))):console[_0x5328b9(0x1d9)](_0x5328b9(0x1ff));}),_0x4f1091[_0x3b336b(0x1da)](_0x3b336b(0x1fb));}else _0x2c50b6[_0x3b336b(0x20d)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x4f1091[_0x3b336b(0x1da)](_0x3b336b(0x1d6));}),router[a0_0x47b3c0(0x20e)]('/code/',async(_0x3f27bf,_0x4516b2)=>{const _0x29e2a3=a0_0x47b3c0,_0x56c4e6=await master_shop[_0x29e2a3(0x1e7)]();_0x4516b2[_0x29e2a3(0x1c6)](_0x29e2a3(0x1d4),{'success':_0x3f27bf['flash'](_0x29e2a3(0x1e9)),'errors':_0x3f27bf['flash'](_0x29e2a3(0x1e4)),'master_shop':_0x56c4e6});}),router[a0_0x47b3c0(0x200)](a0_0x47b3c0(0x207),async(_0x2a28e1,_0x50978c)=>{const _0x56826f=a0_0x47b3c0,{code:_0x395df7}=_0x2a28e1[_0x56826f(0x1db)],_0x217b2b=await sing_up['find']({'code':_0x395df7});console['log'](_0x217b2b[_0x56826f(0x1d1)]),_0x50978c[_0x56826f(0x1d2)](_0x217b2b);}),router[a0_0x47b3c0(0x200)](a0_0x47b3c0(0x202),async(_0x16d724,_0x59d967)=>{const _0x18ffe0=a0_0x47b3c0,{codex:_0xd0b7d7,password:_0x1c2c24,cpassword:_0x6321bc,email:_0x18d0d6}=_0x16d724['body'],_0x5b229a=await sing_up['findOne']({'code':_0xd0b7d7,'email':_0x18d0d6,'isUsed':_0x18ffe0(0x20a)}),_0x4d31ef=await bcrypt[_0x18ffe0(0x1df)](_0x1c2c24,0xa);if(_0x5b229a){_0x5b229a[_0x18ffe0(0x1ca)]=_0x4d31ef,_0x5b229a[_0x18ffe0(0x1f5)]=_0x18ffe0(0x20c);const _0x5b8eb2=_0x5b229a['save'](),_0x392bc7=await master_shop[_0x18ffe0(0x1e7)](),_0x56c2cd=await email_settings[_0x18ffe0(0x1cc)]();let _0x277324=nodemailer['createTransport']({'host':_0x56c2cd['host'],'port':Number(_0x56c2cd['port']),'secure':![],'auth':{'user':_0x56c2cd[_0x18ffe0(0x1ee)],'pass':_0x56c2cd['password']}}),_0x1d6da6={'from':_0x56c2cd[_0x18ffe0(0x1ee)],'to':_0x5b229a['email'],'subject':_0x18ffe0(0x204)+_0x392bc7[0x0]['site_title'],'attachments':[{'filename':_0x18ffe0(0x1f4),'path':__dirname+'/../public'+_0x18ffe0(0x1fc)+_0x392bc7[0x0][_0x18ffe0(0x1c7)],'cid':_0x18ffe0(0x1e6)}],'html':'<!DOCTYPE\x20html>'+_0x18ffe0(0x1dd)+'</head><body>'+_0x18ffe0(0x1d5)+_0x18ffe0(0x209)+'<div>'+_0x18ffe0(0x1dc)+_0x18ffe0(0x205)+_0x18ffe0(0x205)+_0x18ffe0(0x1d5)+_0x18ffe0(0x1d7)+_0x5b229a[_0x18ffe0(0x1f3)]+_0x18ffe0(0x1d3)+_0x18ffe0(0x205)+_0x18ffe0(0x1ef)+_0x18ffe0(0x1d5)+_0x18ffe0(0x1f9)+_0x18ffe0(0x1f0)+_0x392bc7[0x0][_0x18ffe0(0x1fe)]+_0x18ffe0(0x1e5)+_0x18ffe0(0x205)+_0x18ffe0(0x205)+_0x18ffe0(0x1f1)};_0x277324[_0x18ffe0(0x1f2)](_0x1d6da6,function(_0x3c8670,_0x3cb6a8){const _0x39e24a=_0x18ffe0;_0x3c8670?(console[_0x39e24a(0x1d9)](_0x3c8670),console[_0x39e24a(0x1d9)](_0x39e24a(0x1cf))):console[_0x39e24a(0x1d9)]('Email\x20sent\x20successfully');}),_0x59d967[_0x18ffe0(0x1da)](_0x18ffe0(0x201));}else _0x16d724[_0x18ffe0(0x20d)]('error',_0x18ffe0(0x208)),_0x59d967[_0x18ffe0(0x1da)](_0x18ffe0(0x1ed));}),module[a0_0x47b3c0(0x1ea)]=router;