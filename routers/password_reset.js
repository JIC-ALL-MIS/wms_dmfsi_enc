const a0_0x3bb6c6=a0_0x3edd;(function(_0x3e5886,_0x25a4be){const _0x235e85=a0_0x3edd,_0x4d952f=_0x3e5886();while(!![]){try{const _0x2e308b=-parseInt(_0x235e85(0xa3))/0x1*(-parseInt(_0x235e85(0x95))/0x2)+parseInt(_0x235e85(0xb3))/0x3+-parseInt(_0x235e85(0x9c))/0x4*(-parseInt(_0x235e85(0x83))/0x5)+parseInt(_0x235e85(0xa9))/0x6+-parseInt(_0x235e85(0x6e))/0x7+parseInt(_0x235e85(0x92))/0x8*(parseInt(_0x235e85(0x7d))/0x9)+-parseInt(_0x235e85(0x91))/0xa;if(_0x2e308b===_0x25a4be)break;else _0x4d952f['push'](_0x4d952f['shift']());}catch(_0x5bcb4b){_0x4d952f['push'](_0x4d952f['shift']());}}}(a0_0x163d,0xdc519));const express=require(a0_0x3bb6c6(0xaa)),app=express(),router=express[a0_0x3bb6c6(0x74)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x3bb6c6(0x85)),auth=require(a0_0x3bb6c6(0x97)),nodemailer=require('nodemailer');router[a0_0x3bb6c6(0x81)]('/view',async(_0x984f6d,_0x4304c5)=>{const _0x5dc36b=a0_0x3bb6c6,_0x28261b=await master_shop[_0x5dc36b(0xa1)]();_0x4304c5['render'](_0x5dc36b(0x72),{'success':_0x984f6d['flash'](_0x5dc36b(0x7c)),'errors':_0x984f6d[_0x5dc36b(0x7a)]('errors'),'master_shop':_0x28261b});});function generateRandomAlphanumericString(_0x89ac13=0x6){const _0x52e110=a0_0x3bb6c6,_0x1ed241=_0x52e110(0x75);let _0x9f9ab0='';for(let _0x143e39=0x0;_0x143e39<_0x89ac13;_0x143e39++){const _0x529ef2=Math[_0x52e110(0x6d)](Math['random']()*_0x1ed241['length']);_0x9f9ab0+=_0x1ed241[_0x529ef2];}return _0x9f9ab0;}function a0_0x163d(){const _0x4dba5e=['email_reset','email_code','Router','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','isUsed','image','<!DOCTYPE\x20html>','True','flash','False','success','12770964Cyjpov','password','length','/view','get','</div>','5ZKnoCe','log','../models/all_models','json','code','/forgotPassword/code/','<strong>\x20Regards\x20</strong>','error','port','<p>Hello\x20','/../public','</head><body>','<h5>','redirect','24110680kzKbNL','8yRGRCL','Email\x20sent\x20successfully','logo','367418jYTmwv','sendMail','../middleware/auth','host','Logo.png','</h5>','post','5339444ZNoMCJ','hash','email','findOne','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','find','/code/','2UMBtAi','createTransport','body','</b></h1></p>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','Error\x20Occurs','7922520OvJWpB','express','save','/forgotPassword/code','</body></html>','exports','/code_password/','Password\x20Reset\x20-\x20','site_title','/forgotPassword/view','1548504OuHNmI','<div>','/upload/','<html><head><title></title>','floor','11510590AKjmBY','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','render','<hr\x20class=\x22my-3\x22>'];a0_0x163d=function(){return _0x4dba5e;};return a0_0x163d();}function a0_0x3edd(_0x325a56,_0x4666fb){const _0x163d7d=a0_0x163d();return a0_0x3edd=function(_0x3edd9a,_0x40bb79){_0x3edd9a=_0x3edd9a-0x6a;let _0x5b5fd4=_0x163d7d[_0x3edd9a];return _0x5b5fd4;},a0_0x3edd(_0x325a56,_0x4666fb);}router[a0_0x3bb6c6(0x9b)](a0_0x3bb6c6(0x80),async(_0x177eec,_0x1fbcdd)=>{const _0x52d552=a0_0x3bb6c6,{email:_0x1c4c7f}=_0x177eec[_0x52d552(0xa5)],_0x6d57a7=await sing_up[_0x52d552(0x9f)]({'email':_0x1c4c7f});var _0x4bd250=generateRandomAlphanumericString();const _0x5646d1=await bcrypt['hash'](_0x4bd250,0xa);if(_0x6d57a7){_0x6d57a7[_0x52d552(0x87)]=_0x4bd250,_0x6d57a7['isUsed']=_0x52d552(0x7b);const _0xa74707=_0x6d57a7[_0x52d552(0xab)](),_0x32a3c7=await master_shop['find'](),_0x1819d8=await email_settings[_0x52d552(0x9f)]();let _0x16d634=nodemailer[_0x52d552(0xa4)]({'host':_0x1819d8[_0x52d552(0x98)],'port':Number(_0x1819d8['port']),'secure':![],'auth':{'user':_0x1819d8['email'],'pass':_0x1819d8['password']}}),_0x2e9d51={'from':_0x1819d8[_0x52d552(0x9e)],'to':_0x6d57a7[_0x52d552(0x9e)],'subject':_0x52d552(0xb0)+_0x32a3c7[0x0]['site_title'],'attachments':[{'filename':_0x52d552(0x99),'path':__dirname+_0x52d552(0x8d)+_0x52d552(0x6b)+_0x32a3c7[0x0][_0x52d552(0x77)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x52d552(0x6c)+_0x52d552(0x8e)+_0x52d552(0x6a)+_0x52d552(0xa0)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x52d552(0x82)+_0x52d552(0x6a)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x4bd250+_0x52d552(0xa6)+_0x52d552(0x82)+_0x52d552(0x71)+_0x52d552(0x6a)+_0x52d552(0x89)+'<h5>'+_0x32a3c7[0x0][_0x52d552(0xb1)]+_0x52d552(0x9a)+_0x52d552(0x82)+'</div>'+_0x52d552(0xad)};_0x16d634[_0x52d552(0x96)](_0x2e9d51,function(_0x4f19d1,_0x4f0267){const _0x1ade84=_0x52d552;_0x4f19d1?(console['log'](_0x4f19d1),console[_0x1ade84(0x84)](_0x1ade84(0xa8))):console[_0x1ade84(0x84)]('Email\x20sent\x20successfully');}),_0x1fbcdd[_0x52d552(0x90)](_0x52d552(0x88));}else _0x177eec['flash'](_0x52d552(0x8a),_0x52d552(0xa7)),_0x1fbcdd[_0x52d552(0x90)](_0x52d552(0xb2));}),router[a0_0x3bb6c6(0x81)](a0_0x3bb6c6(0xa2),async(_0x4c7250,_0x1d80a5)=>{const _0x3544f6=a0_0x3bb6c6,_0x9abefb=await master_shop[_0x3544f6(0xa1)]();_0x1d80a5[_0x3544f6(0x70)](_0x3544f6(0x73),{'success':_0x4c7250['flash'](_0x3544f6(0x7c)),'errors':_0x4c7250[_0x3544f6(0x7a)]('errors'),'master_shop':_0x9abefb});}),router[a0_0x3bb6c6(0x9b)](a0_0x3bb6c6(0xa2),async(_0x4e971c,_0x496c98)=>{const _0x1629bb=a0_0x3bb6c6,{code:_0x112c5a}=_0x4e971c[_0x1629bb(0xa5)],_0x3accdf=await sing_up[_0x1629bb(0xa1)]({'code':_0x112c5a});console['log'](_0x3accdf[_0x1629bb(0x7f)]),_0x496c98[_0x1629bb(0x86)](_0x3accdf);}),router[a0_0x3bb6c6(0x9b)](a0_0x3bb6c6(0xaf),async(_0x2e845d,_0x42b751)=>{const _0x2c1207=a0_0x3bb6c6,{codex:_0x25f97d,password:_0x3d37a0,cpassword:_0x1d5b58,email:_0x2d9de0}=_0x2e845d[_0x2c1207(0xa5)],_0x18cba9=await sing_up['findOne']({'code':_0x25f97d,'email':_0x2d9de0,'isUsed':_0x2c1207(0x7b)}),_0x3592e2=await bcrypt[_0x2c1207(0x9d)](_0x3d37a0,0xa);if(_0x18cba9){_0x18cba9['password']=_0x3592e2,_0x18cba9[_0x2c1207(0x76)]=_0x2c1207(0x79);const _0x465884=_0x18cba9[_0x2c1207(0xab)](),_0x214505=await master_shop[_0x2c1207(0xa1)](),_0x46878f=await email_settings[_0x2c1207(0x9f)]();let _0x5d5ccb=nodemailer['createTransport']({'host':_0x46878f[_0x2c1207(0x98)],'port':Number(_0x46878f[_0x2c1207(0x8b)]),'secure':![],'auth':{'user':_0x46878f['email'],'pass':_0x46878f[_0x2c1207(0x7e)]}}),_0x5c8ae2={'from':_0x46878f[_0x2c1207(0x9e)],'to':_0x18cba9['email'],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x214505[0x0][_0x2c1207(0xb1)],'attachments':[{'filename':_0x2c1207(0x99),'path':__dirname+_0x2c1207(0x8d)+_0x2c1207(0x6b)+_0x214505[0x0][_0x2c1207(0x77)],'cid':_0x2c1207(0x94)}],'html':_0x2c1207(0x78)+_0x2c1207(0x6c)+_0x2c1207(0x8e)+_0x2c1207(0x6a)+_0x2c1207(0xa0)+_0x2c1207(0x6a)+_0x2c1207(0x6f)+'</div>'+_0x2c1207(0x82)+_0x2c1207(0x6a)+_0x2c1207(0x8c)+_0x18cba9['name']+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+'</div>'+_0x2c1207(0x71)+'<div>'+_0x2c1207(0x89)+_0x2c1207(0x8f)+_0x214505[0x0][_0x2c1207(0xb1)]+'</h5>'+_0x2c1207(0x82)+'</div>'+_0x2c1207(0xad)};_0x5d5ccb[_0x2c1207(0x96)](_0x5c8ae2,function(_0x200e1e,_0x3c3f2d){const _0x5828c6=_0x2c1207;_0x200e1e?(console['log'](_0x200e1e),console[_0x5828c6(0x84)](_0x5828c6(0xa8))):console['log'](_0x5828c6(0x93));}),_0x42b751[_0x2c1207(0x90)]('/login/');}else _0x2e845d[_0x2c1207(0x7a)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x42b751[_0x2c1207(0x90)](_0x2c1207(0xac));}),module[a0_0x3bb6c6(0xae)]=router;