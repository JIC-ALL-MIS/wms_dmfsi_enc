const a0_0x5a21e5=a0_0x1f9c;(function(_0x344b62,_0x3d6b73){const _0x5e43d5=a0_0x1f9c,_0x876863=_0x344b62();while(!![]){try{const _0x610afb=-parseInt(_0x5e43d5(0xed))/0x1+parseInt(_0x5e43d5(0xe9))/0x2+parseInt(_0x5e43d5(0xf4))/0x3*(parseInt(_0x5e43d5(0xf2))/0x4)+-parseInt(_0x5e43d5(0x11e))/0x5*(parseInt(_0x5e43d5(0xf0))/0x6)+-parseInt(_0x5e43d5(0xfa))/0x7+-parseInt(_0x5e43d5(0x118))/0x8+-parseInt(_0x5e43d5(0xe3))/0x9*(-parseInt(_0x5e43d5(0x100))/0xa);if(_0x610afb===_0x3d6b73)break;else _0x876863['push'](_0x876863['shift']());}catch(_0x594302){_0x876863['push'](_0x876863['shift']());}}}(a0_0x2a52,0xe67cf));const express=require(a0_0x5a21e5(0x113)),app=express(),router=express[a0_0x5a21e5(0xe8)](),bcrypt=require(a0_0x5a21e5(0xe5)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x5a21e5(0x105)),auth=require(a0_0x5a21e5(0xe4)),nodemailer=require('nodemailer');function a0_0x1f9c(_0x1694c0,_0x59d8f4){const _0x2a52ff=a0_0x2a52();return a0_0x1f9c=function(_0x1f9c04,_0x1be9ec){_0x1f9c04=_0x1f9c04-0xe2;let _0x48fe72=_0x2a52ff[_0x1f9c04];return _0x48fe72;},a0_0x1f9c(_0x1694c0,_0x59d8f4);}router[a0_0x5a21e5(0x102)](a0_0x5a21e5(0xeb),async(_0x56b36d,_0x47ff3f)=>{const _0x58b7cd=a0_0x5a21e5,_0x424dc0=await master_shop[_0x58b7cd(0xf8)]();_0x47ff3f[_0x58b7cd(0xec)](_0x58b7cd(0x11a),{'success':_0x56b36d[_0x58b7cd(0xf7)](_0x58b7cd(0x108)),'errors':_0x56b36d[_0x58b7cd(0xf7)]('errors'),'master_shop':_0x424dc0});});function generateRandomAlphanumericString(_0x566473=0x6){const _0x19a4ce=a0_0x5a21e5,_0xc32c=_0x19a4ce(0xfe);let _0x344bc7='';for(let _0xcdbcc5=0x0;_0xcdbcc5<_0x566473;_0xcdbcc5++){const _0x594b2b=Math[_0x19a4ce(0xff)](Math[_0x19a4ce(0x10e)]()*_0xc32c['length']);_0x344bc7+=_0xc32c[_0x594b2b];}return _0x344bc7;}function a0_0x2a52(){const _0x1318ae=['findOne','email','flash','find','createTransport','11388741dBSuCC','port','length','/upload/','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','floor','1810cvAune','Password\x20Reset\x20-\x20','get','errors','password','../models/all_models','Error\x20Occurs','/../public','success','log','Email\x20sent\x20successfully','body','site_title','Logo.png','random','hash','isUsed','</b></h1></p>','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','express','<p>Hello\x20','image','/code_password/','/code/','5252144xuvevA','name','email_reset','False','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<div>','5NogHPW','redirect','</div>','post','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','json','sendMail','/forgotPassword/code','<html><head><title></title>','Password\x20Successfuly\x20Reset\x20-\x20','<hr\x20class=\x22my-3\x22>','</head><body>','</body></html>','<strong>\x20Regards\x20</strong>','239589Bsujko','../middleware/auth','bcryptjs','error','<!DOCTYPE\x20html>','Router','532764BxhGUH','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/view','render','916578okupZQ','host','/forgotPassword/code/','10236192QBfyUR','logo','145788LflhYT','email_code','63RCrwmd'];a0_0x2a52=function(){return _0x1318ae;};return a0_0x2a52();}router['post'](a0_0x5a21e5(0xeb),async(_0x59cb3c,_0x15dce0)=>{const _0x5c83c4=a0_0x5a21e5,{email:_0x4aa9ec}=_0x59cb3c[_0x5c83c4(0x10b)],_0x439bc7=await sing_up[_0x5c83c4(0xf5)]({'email':_0x4aa9ec});var _0x61167=generateRandomAlphanumericString();const _0x44ec84=await bcrypt[_0x5c83c4(0x10f)](_0x61167,0xa);if(_0x439bc7){_0x439bc7['code']=_0x61167,_0x439bc7[_0x5c83c4(0x110)]='False';const _0x3aa19d=_0x439bc7['save'](),_0x552f06=await master_shop[_0x5c83c4(0xf8)](),_0x50dda6=await email_settings[_0x5c83c4(0xf5)]();let _0x35eab1=nodemailer[_0x5c83c4(0xf9)]({'host':_0x50dda6[_0x5c83c4(0xee)],'port':Number(_0x50dda6[_0x5c83c4(0xfb)]),'secure':![],'auth':{'user':_0x50dda6['email'],'pass':_0x50dda6[_0x5c83c4(0x104)]}}),_0x5969dd={'from':_0x50dda6[_0x5c83c4(0xf6)],'to':_0x439bc7[_0x5c83c4(0xf6)],'subject':_0x5c83c4(0x101)+_0x552f06[0x0][_0x5c83c4(0x10c)],'attachments':[{'filename':_0x5c83c4(0x10d),'path':__dirname+_0x5c83c4(0x107)+_0x5c83c4(0xfd)+_0x552f06[0x0][_0x5c83c4(0x115)],'cid':_0x5c83c4(0xf1)}],'html':_0x5c83c4(0xe7)+_0x5c83c4(0x126)+_0x5c83c4(0x129)+_0x5c83c4(0x11d)+_0x5c83c4(0x122)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x5c83c4(0x120)+_0x5c83c4(0x120)+_0x5c83c4(0x11d)+_0x5c83c4(0x112)+_0x61167+_0x5c83c4(0x111)+_0x5c83c4(0x120)+_0x5c83c4(0x128)+'<div>'+_0x5c83c4(0xe2)+'<h5>'+_0x552f06[0x0][_0x5c83c4(0x10c)]+'</h5>'+_0x5c83c4(0x120)+_0x5c83c4(0x120)+'</body></html>'};_0x35eab1[_0x5c83c4(0x124)](_0x5969dd,function(_0x1078c5,_0x16d8d7){const _0x207699=_0x5c83c4;_0x1078c5?(console[_0x207699(0x109)](_0x1078c5),console['log'](_0x207699(0x106))):console[_0x207699(0x109)]('Email\x20sent\x20successfully');}),_0x15dce0['redirect'](_0x5c83c4(0xef));}else _0x59cb3c[_0x5c83c4(0xf7)](_0x5c83c4(0xe6),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x15dce0[_0x5c83c4(0x11f)]('/forgotPassword/view');}),router[a0_0x5a21e5(0x102)](a0_0x5a21e5(0x117),async(_0x1f1947,_0x424a38)=>{const _0x3cd2dc=a0_0x5a21e5,_0x48de80=await master_shop[_0x3cd2dc(0xf8)]();_0x424a38['render'](_0x3cd2dc(0xf3),{'success':_0x1f1947[_0x3cd2dc(0xf7)](_0x3cd2dc(0x108)),'errors':_0x1f1947[_0x3cd2dc(0xf7)](_0x3cd2dc(0x103)),'master_shop':_0x48de80});}),router['post'](a0_0x5a21e5(0x117),async(_0x484cae,_0x4862d5)=>{const _0x2cbf81=a0_0x5a21e5,{code:_0x1d1f51}=_0x484cae[_0x2cbf81(0x10b)],_0xa70770=await sing_up[_0x2cbf81(0xf8)]({'code':_0x1d1f51});console[_0x2cbf81(0x109)](_0xa70770[_0x2cbf81(0xfc)]),_0x4862d5[_0x2cbf81(0x123)](_0xa70770);}),router[a0_0x5a21e5(0x121)](a0_0x5a21e5(0x116),async(_0x1c1cff,_0x3fa23e)=>{const _0x3392b7=a0_0x5a21e5,{codex:_0x18397a,password:_0x3abafb,cpassword:_0x4e790c,email:_0x4ff699}=_0x1c1cff[_0x3392b7(0x10b)],_0x70663b=await sing_up[_0x3392b7(0xf5)]({'code':_0x18397a,'email':_0x4ff699,'isUsed':_0x3392b7(0x11b)}),_0x470aea=await bcrypt['hash'](_0x3abafb,0xa);if(_0x70663b){_0x70663b[_0x3392b7(0x104)]=_0x470aea,_0x70663b[_0x3392b7(0x110)]='True';const _0x3e08e6=_0x70663b['save'](),_0x2ed5d6=await master_shop[_0x3392b7(0xf8)](),_0x1b237f=await email_settings[_0x3392b7(0xf5)]();let _0x404963=nodemailer['createTransport']({'host':_0x1b237f[_0x3392b7(0xee)],'port':Number(_0x1b237f[_0x3392b7(0xfb)]),'secure':![],'auth':{'user':_0x1b237f['email'],'pass':_0x1b237f[_0x3392b7(0x104)]}}),_0x3baab7={'from':_0x1b237f[_0x3392b7(0xf6)],'to':_0x70663b[_0x3392b7(0xf6)],'subject':_0x3392b7(0x127)+_0x2ed5d6[0x0][_0x3392b7(0x10c)],'attachments':[{'filename':_0x3392b7(0x10d),'path':__dirname+_0x3392b7(0x107)+_0x3392b7(0xfd)+_0x2ed5d6[0x0][_0x3392b7(0x115)],'cid':_0x3392b7(0xf1)}],'html':'<!DOCTYPE\x20html>'+_0x3392b7(0x126)+_0x3392b7(0x129)+'<div>'+_0x3392b7(0x122)+'<div>'+_0x3392b7(0xea)+_0x3392b7(0x120)+'</div>'+_0x3392b7(0x11d)+_0x3392b7(0x114)+_0x70663b[_0x3392b7(0x119)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x3392b7(0x120)+_0x3392b7(0x128)+_0x3392b7(0x11d)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x2ed5d6[0x0][_0x3392b7(0x10c)]+'</h5>'+'</div>'+'</div>'+_0x3392b7(0x12a)};_0x404963[_0x3392b7(0x124)](_0x3baab7,function(_0x3128ab,_0x2fa7ef){const _0x2dd86f=_0x3392b7;_0x3128ab?(console['log'](_0x3128ab),console[_0x2dd86f(0x109)](_0x2dd86f(0x106))):console[_0x2dd86f(0x109)](_0x2dd86f(0x10a));}),_0x3fa23e[_0x3392b7(0x11f)]('/login/');}else _0x1c1cff[_0x3392b7(0xf7)](_0x3392b7(0xe6),_0x3392b7(0x11c)),_0x3fa23e[_0x3392b7(0x11f)](_0x3392b7(0x125));}),module['exports']=router;