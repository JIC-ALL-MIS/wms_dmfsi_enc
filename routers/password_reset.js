const a0_0x140b9e=a0_0x34a1;function a0_0x34a1(_0x1d83c6,_0x436500){const _0x4d420a=a0_0x4d42();return a0_0x34a1=function(_0x34a128,_0x44baf6){_0x34a128=_0x34a128-0x186;let _0x247da9=_0x4d420a[_0x34a128];return _0x247da9;},a0_0x34a1(_0x1d83c6,_0x436500);}(function(_0x4f59e0,_0x1df3bd){const _0x135e5c=a0_0x34a1,_0x358116=_0x4f59e0();while(!![]){try{const _0x4a5e76=parseInt(_0x135e5c(0x1ae))/0x1+-parseInt(_0x135e5c(0x1be))/0x2+parseInt(_0x135e5c(0x1c5))/0x3*(parseInt(_0x135e5c(0x1b8))/0x4)+-parseInt(_0x135e5c(0x189))/0x5*(-parseInt(_0x135e5c(0x1b5))/0x6)+parseInt(_0x135e5c(0x1d2))/0x7*(-parseInt(_0x135e5c(0x1c4))/0x8)+-parseInt(_0x135e5c(0x1bd))/0x9*(parseInt(_0x135e5c(0x1a4))/0xa)+parseInt(_0x135e5c(0x1a2))/0xb;if(_0x4a5e76===_0x1df3bd)break;else _0x358116['push'](_0x358116['shift']());}catch(_0x388bc2){_0x358116['push'](_0x358116['shift']());}}}(a0_0x4d42,0x51b2e));function a0_0x4d42(){const _0x5b79d0=['express','/code/','find','get','random','</h5>','14442373joLqBu','render','1756150nuUxfc','hash','sendMail','</body></html>','/forgotPassword/code','Router','/login/','<p>Hello\x20','<strong>\x20Regards\x20</strong>','<!DOCTYPE\x20html>','104769zVFyyZ','name','findOne','Password\x20Successfuly\x20Reset\x20-\x20','/upload/','/view','floor','424338mcKGLF','bcryptjs','post','3972FIUyMg','code','/forgotPassword/view','isUsed','<h5>','27ocfbcG','1321826ZHVkxQ','<html><head><title></title>','site_title','../models/all_models','False','password','8QjmEdg','513ensCKn','logo','host','email','Error\x20Occurs','True','</head><body>','email_code','exports','Logo.png','<hr\x20class=\x22my-3\x22>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','</div>','3426199OeTzEJ','createTransport','/../public',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','redirect','30luQiNN','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','success','Password\x20Reset\x20-\x20','Email\x20sent\x20successfully','<div>','save','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','email_reset','log','flash','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','body','</b></h1></p>','errors','/forgotPassword/code/','error','length','port'];a0_0x4d42=function(){return _0x5b79d0;};return a0_0x4d42();}const express=require(a0_0x140b9e(0x19c)),app=express(),router=express[a0_0x140b9e(0x1a9)](),bcrypt=require(a0_0x140b9e(0x1b6)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x140b9e(0x1c1)),auth=require('../middleware/auth'),nodemailer=require('nodemailer');router[a0_0x140b9e(0x19f)](a0_0x140b9e(0x1b3),async(_0xf3e068,_0x378328)=>{const _0x4ab80e=a0_0x140b9e,_0x5f26af=await master_shop[_0x4ab80e(0x19e)]();_0x378328[_0x4ab80e(0x1a3)](_0x4ab80e(0x191),{'success':_0xf3e068[_0x4ab80e(0x193)](_0x4ab80e(0x18b)),'errors':_0xf3e068['flash'](_0x4ab80e(0x197)),'master_shop':_0x5f26af});});function generateRandomAlphanumericString(_0x2c925f=0x6){const _0x5644e7=a0_0x140b9e,_0x57617f=_0x5644e7(0x190);let _0x1af864='';for(let _0x263905=0x0;_0x263905<_0x2c925f;_0x263905++){const _0x3bef5f=Math[_0x5644e7(0x1b4)](Math[_0x5644e7(0x1a0)]()*_0x57617f[_0x5644e7(0x19a)]);_0x1af864+=_0x57617f[_0x3bef5f];}return _0x1af864;}router['post'](a0_0x140b9e(0x1b3),async(_0x20f06d,_0xbdff28)=>{const _0x36a461=a0_0x140b9e,{email:_0x17c087}=_0x20f06d['body'],_0xa6ad83=await sing_up[_0x36a461(0x1b0)]({'email':_0x17c087});var _0x4ebb8a=generateRandomAlphanumericString();const _0x2126ef=await bcrypt[_0x36a461(0x1a5)](_0x4ebb8a,0xa);if(_0xa6ad83){_0xa6ad83[_0x36a461(0x1b9)]=_0x4ebb8a,_0xa6ad83[_0x36a461(0x1bb)]=_0x36a461(0x1c2);const _0x531cfe=_0xa6ad83[_0x36a461(0x18f)](),_0x55a70d=await master_shop[_0x36a461(0x19e)](),_0x486023=await email_settings[_0x36a461(0x1b0)]();let _0x321d7d=nodemailer[_0x36a461(0x1d3)]({'host':_0x486023[_0x36a461(0x1c7)],'port':Number(_0x486023[_0x36a461(0x19b)]),'secure':![],'auth':{'user':_0x486023[_0x36a461(0x1c8)],'pass':_0x486023[_0x36a461(0x1c3)]}}),_0x515e20={'from':_0x486023['email'],'to':_0xa6ad83[_0x36a461(0x1c8)],'subject':_0x36a461(0x18c)+_0x55a70d[0x0][_0x36a461(0x1c0)],'attachments':[{'filename':_0x36a461(0x1ce),'path':__dirname+_0x36a461(0x186)+_0x36a461(0x1b2)+_0x55a70d[0x0]['image'],'cid':_0x36a461(0x1c6)}],'html':_0x36a461(0x1ad)+_0x36a461(0x1bf)+_0x36a461(0x1cb)+'<div>'+_0x36a461(0x18a)+_0x36a461(0x18e)+_0x36a461(0x1d0)+'</div>'+_0x36a461(0x1d1)+_0x36a461(0x18e)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x4ebb8a+_0x36a461(0x196)+_0x36a461(0x1d1)+_0x36a461(0x1cf)+_0x36a461(0x18e)+'<strong>\x20Regards\x20</strong>'+_0x36a461(0x1bc)+_0x55a70d[0x0]['site_title']+_0x36a461(0x1a1)+_0x36a461(0x1d1)+_0x36a461(0x1d1)+_0x36a461(0x1a7)};_0x321d7d['sendMail'](_0x515e20,function(_0x196377,_0x3af0c3){const _0x46073f=_0x36a461;_0x196377?(console[_0x46073f(0x192)](_0x196377),console['log']('Error\x20Occurs')):console['log']('Email\x20sent\x20successfully');}),_0xbdff28['redirect'](_0x36a461(0x198));}else _0x20f06d[_0x36a461(0x193)](_0x36a461(0x199),_0x36a461(0x194)),_0xbdff28[_0x36a461(0x188)](_0x36a461(0x1ba));}),router['get'](a0_0x140b9e(0x19d),async(_0x54fd94,_0x7e2742)=>{const _0x1a9d2c=a0_0x140b9e,_0x294fc5=await master_shop[_0x1a9d2c(0x19e)]();_0x7e2742[_0x1a9d2c(0x1a3)](_0x1a9d2c(0x1cc),{'success':_0x54fd94[_0x1a9d2c(0x193)](_0x1a9d2c(0x18b)),'errors':_0x54fd94[_0x1a9d2c(0x193)](_0x1a9d2c(0x197)),'master_shop':_0x294fc5});}),router[a0_0x140b9e(0x1b7)]('/code/',async(_0x48c0d4,_0x314c51)=>{const _0x4966ea=a0_0x140b9e,{code:_0x58a793}=_0x48c0d4['body'],_0xe1e901=await sing_up[_0x4966ea(0x19e)]({'code':_0x58a793});console['log'](_0xe1e901[_0x4966ea(0x19a)]),_0x314c51['json'](_0xe1e901);}),router[a0_0x140b9e(0x1b7)]('/code_password/',async(_0x349046,_0x1beb33)=>{const _0x35bf65=a0_0x140b9e,{codex:_0x5ba1e7,password:_0x25968d,cpassword:_0x1049c1,email:_0x30ced4}=_0x349046[_0x35bf65(0x195)],_0x165f80=await sing_up[_0x35bf65(0x1b0)]({'code':_0x5ba1e7,'email':_0x30ced4,'isUsed':_0x35bf65(0x1c2)}),_0x3747d2=await bcrypt[_0x35bf65(0x1a5)](_0x25968d,0xa);if(_0x165f80){_0x165f80[_0x35bf65(0x1c3)]=_0x3747d2,_0x165f80[_0x35bf65(0x1bb)]=_0x35bf65(0x1ca);const _0x35cafb=_0x165f80[_0x35bf65(0x18f)](),_0x36c745=await master_shop[_0x35bf65(0x19e)](),_0x25abb6=await email_settings['findOne']();let _0x42aa4c=nodemailer[_0x35bf65(0x1d3)]({'host':_0x25abb6[_0x35bf65(0x1c7)],'port':Number(_0x25abb6['port']),'secure':![],'auth':{'user':_0x25abb6[_0x35bf65(0x1c8)],'pass':_0x25abb6[_0x35bf65(0x1c3)]}}),_0x3faaff={'from':_0x25abb6[_0x35bf65(0x1c8)],'to':_0x165f80[_0x35bf65(0x1c8)],'subject':_0x35bf65(0x1b1)+_0x36c745[0x0][_0x35bf65(0x1c0)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x35bf65(0x186)+'/upload/'+_0x36c745[0x0]['image'],'cid':'logo'}],'html':_0x35bf65(0x1ad)+_0x35bf65(0x1bf)+_0x35bf65(0x1cb)+'<div>'+_0x35bf65(0x18a)+'<div>'+_0x35bf65(0x1d0)+_0x35bf65(0x1d1)+_0x35bf65(0x1d1)+_0x35bf65(0x18e)+_0x35bf65(0x1ab)+_0x165f80[_0x35bf65(0x1af)]+_0x35bf65(0x187)+'</div>'+_0x35bf65(0x1cf)+_0x35bf65(0x18e)+_0x35bf65(0x1ac)+_0x35bf65(0x1bc)+_0x36c745[0x0][_0x35bf65(0x1c0)]+_0x35bf65(0x1a1)+_0x35bf65(0x1d1)+_0x35bf65(0x1d1)+_0x35bf65(0x1a7)};_0x42aa4c[_0x35bf65(0x1a6)](_0x3faaff,function(_0x2d8de8,_0x7828b7){const _0x5138ef=_0x35bf65;_0x2d8de8?(console['log'](_0x2d8de8),console[_0x5138ef(0x192)](_0x5138ef(0x1c9))):console[_0x5138ef(0x192)](_0x5138ef(0x18d));}),_0x1beb33[_0x35bf65(0x188)](_0x35bf65(0x1aa));}else _0x349046[_0x35bf65(0x193)](_0x35bf65(0x199),_0x35bf65(0x194)),_0x1beb33[_0x35bf65(0x188)](_0x35bf65(0x1a8));}),module[a0_0x140b9e(0x1cd)]=router;