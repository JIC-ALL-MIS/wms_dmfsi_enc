const a0_0x33df0e=a0_0x41d2;(function(_0x39ab41,_0x51d62b){const _0x3a54a9=a0_0x41d2,_0x38fe92=_0x39ab41();while(!![]){try{const _0x46e40d=-parseInt(_0x3a54a9(0xc0))/0x1*(parseInt(_0x3a54a9(0xb7))/0x2)+-parseInt(_0x3a54a9(0xbc))/0x3+-parseInt(_0x3a54a9(0xe0))/0x4*(-parseInt(_0x3a54a9(0xe9))/0x5)+-parseInt(_0x3a54a9(0xc3))/0x6*(-parseInt(_0x3a54a9(0xcc))/0x7)+parseInt(_0x3a54a9(0xd1))/0x8+parseInt(_0x3a54a9(0xce))/0x9+parseInt(_0x3a54a9(0xbb))/0xa*(-parseInt(_0x3a54a9(0xad))/0xb);if(_0x46e40d===_0x51d62b)break;else _0x38fe92['push'](_0x38fe92['shift']());}catch(_0xe451c8){_0x38fe92['push'](_0x38fe92['shift']());}}}(a0_0x47f7,0xaa432));function a0_0x41d2(_0x16446f,_0x3312e2){const _0x47f728=a0_0x47f7();return a0_0x41d2=function(_0x41d2be,_0x46cb5b){_0x41d2be=_0x41d2be-0xaa;let _0x435b90=_0x47f728[_0x41d2be];return _0x435b90;},a0_0x41d2(_0x16446f,_0x3312e2);}function a0_0x47f7(){const _0xff93f9=['floor','325374XXBfRd','flash','/forgotPassword/code','save','20BoLjgu','1494666gLkOLr','redirect','/../public','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','1TknfmS','sendMail','</head><body>','312cMfMcB','<h5>','</h5>','site_title','random','error','exports','Password\x20Reset\x20-\x20','express','119763wNGUgz','get','6255819jnEGVN','Password\x20Successfuly\x20Reset\x20-\x20','errors','4602512lvsBTc','Error\x20Occurs','createTransport','/view','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','code','<!DOCTYPE\x20html>','log','logo','<strong>\x20Regards\x20</strong>','image','../middleware/auth','False','password','body','4824DJrHeF','nodemailer','port','email_reset','json','post','hash',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','bcryptjs','665njUMTi','<html><head><title></title>','<div>','render','isUsed','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','findOne','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','<p>Hello\x20','/code/','<hr\x20class=\x22my-3\x22>','email','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','</b></h1></p>','5291924LpcLDk','Email\x20sent\x20successfully','True','/login/','find','/code_password/','success','length','</div>'];a0_0x47f7=function(){return _0xff93f9;};return a0_0x47f7();}const express=require(a0_0x33df0e(0xcb)),app=express(),router=express['Router'](),bcrypt=require(a0_0x33df0e(0xe8)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x33df0e(0xdc)),nodemailer=require(a0_0x33df0e(0xe1));router['get'](a0_0x33df0e(0xd4),async(_0x5d267b,_0x123cf8)=>{const _0x11fbb2=a0_0x33df0e,_0x37fb73=await master_shop['find']();_0x123cf8[_0x11fbb2(0xec)](_0x11fbb2(0xe3),{'success':_0x5d267b[_0x11fbb2(0xb8)](_0x11fbb2(0xb3)),'errors':_0x5d267b[_0x11fbb2(0xb8)](_0x11fbb2(0xd0)),'master_shop':_0x37fb73});});function generateRandomAlphanumericString(_0x4ac561=0x6){const _0x53b04c=a0_0x33df0e,_0xd117d6=_0x53b04c(0xee);let _0x460daf='';for(let _0x37bdb7=0x0;_0x37bdb7<_0x4ac561;_0x37bdb7++){const _0x58d7af=Math[_0x53b04c(0xb6)](Math[_0x53b04c(0xc7)]()*_0xd117d6[_0x53b04c(0xb4)]);_0x460daf+=_0xd117d6[_0x58d7af];}return _0x460daf;}router[a0_0x33df0e(0xe5)](a0_0x33df0e(0xd4),async(_0x2ec68b,_0x1b2ee0)=>{const _0x29e0f8=a0_0x33df0e,{email:_0x47f783}=_0x2ec68b[_0x29e0f8(0xdf)],_0x653412=await sing_up[_0x29e0f8(0xef)]({'email':_0x47f783});var _0xa79341=generateRandomAlphanumericString();const _0x4f33d7=await bcrypt[_0x29e0f8(0xe6)](_0xa79341,0xa);if(_0x653412){_0x653412[_0x29e0f8(0xd6)]=_0xa79341,_0x653412[_0x29e0f8(0xed)]=_0x29e0f8(0xdd);const _0xe288bc=_0x653412[_0x29e0f8(0xba)](),_0x6b8c23=await master_shop[_0x29e0f8(0xb1)](),_0x124d23=await email_settings[_0x29e0f8(0xef)]();let _0x881661=nodemailer[_0x29e0f8(0xd3)]({'host':_0x124d23['host'],'port':Number(_0x124d23[_0x29e0f8(0xe2)]),'secure':![],'auth':{'user':_0x124d23[_0x29e0f8(0xaa)],'pass':_0x124d23[_0x29e0f8(0xde)]}}),_0x4e191f={'from':_0x124d23[_0x29e0f8(0xaa)],'to':_0x653412[_0x29e0f8(0xaa)],'subject':_0x29e0f8(0xca)+_0x6b8c23[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x29e0f8(0xbe)+'/upload/'+_0x6b8c23[0x0][_0x29e0f8(0xdb)],'cid':_0x29e0f8(0xd9)}],'html':_0x29e0f8(0xd7)+_0x29e0f8(0xea)+_0x29e0f8(0xc2)+'<div>'+_0x29e0f8(0xd5)+_0x29e0f8(0xeb)+_0x29e0f8(0xab)+_0x29e0f8(0xb5)+'</div>'+_0x29e0f8(0xeb)+_0x29e0f8(0xf0)+_0xa79341+_0x29e0f8(0xac)+_0x29e0f8(0xb5)+_0x29e0f8(0xf3)+_0x29e0f8(0xeb)+'<strong>\x20Regards\x20</strong>'+_0x29e0f8(0xc4)+_0x6b8c23[0x0][_0x29e0f8(0xc6)]+_0x29e0f8(0xc5)+_0x29e0f8(0xb5)+_0x29e0f8(0xb5)+'</body></html>'};_0x881661['sendMail'](_0x4e191f,function(_0x97ffe9,_0x5781cb){const _0x114189=_0x29e0f8;_0x97ffe9?(console[_0x114189(0xd8)](_0x97ffe9),console[_0x114189(0xd8)](_0x114189(0xd2))):console[_0x114189(0xd8)]('Email\x20sent\x20successfully');}),_0x1b2ee0[_0x29e0f8(0xbd)]('/forgotPassword/code/');}else _0x2ec68b[_0x29e0f8(0xb8)](_0x29e0f8(0xc8),_0x29e0f8(0xbf)),_0x1b2ee0[_0x29e0f8(0xbd)]('/forgotPassword/view');}),router[a0_0x33df0e(0xcd)](a0_0x33df0e(0xf2),async(_0x420d14,_0x28023f)=>{const _0x152f29=a0_0x33df0e,_0x4be5c0=await master_shop[_0x152f29(0xb1)]();_0x28023f[_0x152f29(0xec)]('email_code',{'success':_0x420d14[_0x152f29(0xb8)](_0x152f29(0xb3)),'errors':_0x420d14[_0x152f29(0xb8)]('errors'),'master_shop':_0x4be5c0});}),router[a0_0x33df0e(0xe5)](a0_0x33df0e(0xf2),async(_0x2de8a1,_0x3b8837)=>{const _0x414e9c=a0_0x33df0e,{code:_0x32b24a}=_0x2de8a1[_0x414e9c(0xdf)],_0x3c4d3d=await sing_up[_0x414e9c(0xb1)]({'code':_0x32b24a});console[_0x414e9c(0xd8)](_0x3c4d3d[_0x414e9c(0xb4)]),_0x3b8837[_0x414e9c(0xe4)](_0x3c4d3d);}),router[a0_0x33df0e(0xe5)](a0_0x33df0e(0xb2),async(_0x37610b,_0x5e6c7e)=>{const _0x12e478=a0_0x33df0e,{codex:_0x2101e0,password:_0x8caab1,cpassword:_0xf461c7,email:_0x2108a1}=_0x37610b['body'],_0x30d953=await sing_up['findOne']({'code':_0x2101e0,'email':_0x2108a1,'isUsed':_0x12e478(0xdd)}),_0x4a2b9c=await bcrypt['hash'](_0x8caab1,0xa);if(_0x30d953){_0x30d953[_0x12e478(0xde)]=_0x4a2b9c,_0x30d953['isUsed']=_0x12e478(0xaf);const _0xe95944=_0x30d953[_0x12e478(0xba)](),_0x194f0a=await master_shop[_0x12e478(0xb1)](),_0x300cc6=await email_settings[_0x12e478(0xef)]();let _0x5f4f35=nodemailer[_0x12e478(0xd3)]({'host':_0x300cc6['host'],'port':Number(_0x300cc6[_0x12e478(0xe2)]),'secure':![],'auth':{'user':_0x300cc6[_0x12e478(0xaa)],'pass':_0x300cc6[_0x12e478(0xde)]}}),_0x4635cf={'from':_0x300cc6[_0x12e478(0xaa)],'to':_0x30d953[_0x12e478(0xaa)],'subject':_0x12e478(0xcf)+_0x194f0a[0x0][_0x12e478(0xc6)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+'/upload/'+_0x194f0a[0x0][_0x12e478(0xdb)],'cid':_0x12e478(0xd9)}],'html':_0x12e478(0xd7)+'<html><head><title></title>'+_0x12e478(0xc2)+_0x12e478(0xeb)+_0x12e478(0xd5)+_0x12e478(0xeb)+_0x12e478(0xab)+'</div>'+_0x12e478(0xb5)+'<div>'+_0x12e478(0xf1)+_0x30d953['name']+_0x12e478(0xe7)+_0x12e478(0xb5)+_0x12e478(0xf3)+'<div>'+_0x12e478(0xda)+_0x12e478(0xc4)+_0x194f0a[0x0][_0x12e478(0xc6)]+_0x12e478(0xc5)+_0x12e478(0xb5)+_0x12e478(0xb5)+'</body></html>'};_0x5f4f35[_0x12e478(0xc1)](_0x4635cf,function(_0x4c7cf1,_0x2d335c){const _0x59ebee=_0x12e478;_0x4c7cf1?(console['log'](_0x4c7cf1),console[_0x59ebee(0xd8)](_0x59ebee(0xd2))):console['log'](_0x59ebee(0xae));}),_0x5e6c7e[_0x12e478(0xbd)](_0x12e478(0xb0));}else _0x37610b[_0x12e478(0xb8)](_0x12e478(0xc8),_0x12e478(0xbf)),_0x5e6c7e[_0x12e478(0xbd)](_0x12e478(0xb9));}),module[a0_0x33df0e(0xc9)]=router;