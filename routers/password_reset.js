const a0_0x23fbe7=a0_0x9bc7;(function(_0x2e8597,_0xabee7c){const _0x33580e=a0_0x9bc7,_0x2921b9=_0x2e8597();while(!![]){try{const _0x4e9cdb=-parseInt(_0x33580e(0xc2))/0x1*(parseInt(_0x33580e(0xe2))/0x2)+-parseInt(_0x33580e(0xf3))/0x3+parseInt(_0x33580e(0xb7))/0x4*(parseInt(_0x33580e(0xf0))/0x5)+parseInt(_0x33580e(0xc3))/0x6*(-parseInt(_0x33580e(0xe5))/0x7)+-parseInt(_0x33580e(0xaa))/0x8+parseInt(_0x33580e(0xec))/0x9*(-parseInt(_0x33580e(0xc9))/0xa)+-parseInt(_0x33580e(0xee))/0xb*(-parseInt(_0x33580e(0xe0))/0xc);if(_0x4e9cdb===_0xabee7c)break;else _0x2921b9['push'](_0x2921b9['shift']());}catch(_0x12708f){_0x2921b9['push'](_0x2921b9['shift']());}}}(a0_0x43c1,0x6c5f3));const express=require(a0_0x23fbe7(0xb1)),app=express(),router=express['Router'](),bcrypt=require(a0_0x23fbe7(0xb6)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x23fbe7(0xaf)),auth=require(a0_0x23fbe7(0xc0)),nodemailer=require('nodemailer');router[a0_0x23fbe7(0xd1)]('/view',async(_0x10b964,_0x152ed2)=>{const _0xcfa47c=a0_0x23fbe7,_0x54196c=await master_shop[_0xcfa47c(0xcf)]();_0x152ed2[_0xcfa47c(0xb3)](_0xcfa47c(0xd0),{'success':_0x10b964[_0xcfa47c(0xab)](_0xcfa47c(0xeb)),'errors':_0x10b964['flash'](_0xcfa47c(0xea)),'master_shop':_0x54196c});});function a0_0x43c1(){const _0x5abde9=['Logo.png','</div>','save','name','floor','image','password','isUsed','hash','email','logo','port','48dgFLvH','</body></html>','127474SIPoye','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','<p>Hello\x20','1144094rYbrzk','<h5>','True','length','/../public','errors','success','2770884ysRRfv','Email\x20sent\x20successfully','5149243ZQIXmP','host','15245vtuYqp','<!DOCTYPE\x20html>','<strong>\x20Regards\x20</strong>','1643634gwgKHm','3921080uvPmsh','flash','/forgotPassword/code','site_title','/forgotPassword/view','../models/all_models','</b></h1></p>','express','createTransport','render','body','redirect','bcryptjs','404cRCPgG','</head><body>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','email_code','Error\x20Occurs','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','<html><head><title></title>','random','/login/','../middleware/auth','/code/','1ZuCNYf','12oXouPT','log','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','findOne','error','</h5>','10BtqHqN','/upload/','json','exports','<hr\x20class=\x22my-3\x22>','post','find','email_reset','get','<div>','Password\x20Successfuly\x20Reset\x20-\x20'];a0_0x43c1=function(){return _0x5abde9;};return a0_0x43c1();}function generateRandomAlphanumericString(_0x448e71=0x6){const _0x44dad3=a0_0x23fbe7,_0x1fed22=_0x44dad3(0xe3);let _0x3df59b='';for(let _0x1afdc9=0x0;_0x1afdc9<_0x448e71;_0x1afdc9++){const _0x167d3b=Math[_0x44dad3(0xd8)](Math[_0x44dad3(0xbe)]()*_0x1fed22[_0x44dad3(0xe8)]);_0x3df59b+=_0x1fed22[_0x167d3b];}return _0x3df59b;}function a0_0x9bc7(_0x51ca56,_0x493373){const _0x43c1e5=a0_0x43c1();return a0_0x9bc7=function(_0x9bc7b5,_0x2cf768){_0x9bc7b5=_0x9bc7b5-0xaa;let _0x51f555=_0x43c1e5[_0x9bc7b5];return _0x51f555;},a0_0x9bc7(_0x51ca56,_0x493373);}router[a0_0x23fbe7(0xce)]('/view',async(_0x41f992,_0xcfce3)=>{const _0x1a5bde=a0_0x23fbe7,{email:_0x2e3b5f}=_0x41f992[_0x1a5bde(0xb4)],_0x3e2e0b=await sing_up[_0x1a5bde(0xc6)]({'email':_0x2e3b5f});var _0x5920fd=generateRandomAlphanumericString();const _0x15e472=await bcrypt[_0x1a5bde(0xdc)](_0x5920fd,0xa);if(_0x3e2e0b){_0x3e2e0b['code']=_0x5920fd,_0x3e2e0b[_0x1a5bde(0xdb)]='False';const _0x31b00c=_0x3e2e0b[_0x1a5bde(0xd6)](),_0x433591=await master_shop[_0x1a5bde(0xcf)](),_0x7a0ddf=await email_settings[_0x1a5bde(0xc6)]();let _0x42f3c0=nodemailer[_0x1a5bde(0xb2)]({'host':_0x7a0ddf['host'],'port':Number(_0x7a0ddf['port']),'secure':![],'auth':{'user':_0x7a0ddf[_0x1a5bde(0xdd)],'pass':_0x7a0ddf[_0x1a5bde(0xda)]}}),_0x44eb80={'from':_0x7a0ddf[_0x1a5bde(0xdd)],'to':_0x3e2e0b[_0x1a5bde(0xdd)],'subject':'Password\x20Reset\x20-\x20'+_0x433591[0x0]['site_title'],'attachments':[{'filename':_0x1a5bde(0xd4),'path':__dirname+_0x1a5bde(0xe9)+_0x1a5bde(0xca)+_0x433591[0x0]['image'],'cid':_0x1a5bde(0xde)}],'html':_0x1a5bde(0xf1)+_0x1a5bde(0xbd)+_0x1a5bde(0xb8)+_0x1a5bde(0xd2)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x1a5bde(0xd2)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+'</div>'+'<div>'+_0x1a5bde(0xbc)+_0x5920fd+_0x1a5bde(0xb0)+_0x1a5bde(0xd5)+_0x1a5bde(0xcd)+_0x1a5bde(0xd2)+'<strong>\x20Regards\x20</strong>'+_0x1a5bde(0xe6)+_0x433591[0x0][_0x1a5bde(0xad)]+_0x1a5bde(0xc8)+_0x1a5bde(0xd5)+_0x1a5bde(0xd5)+_0x1a5bde(0xe1)};_0x42f3c0['sendMail'](_0x44eb80,function(_0x21e31e,_0x4ca6e6){const _0x29086f=_0x1a5bde;_0x21e31e?(console['log'](_0x21e31e),console[_0x29086f(0xc4)](_0x29086f(0xbb))):console[_0x29086f(0xc4)](_0x29086f(0xed));}),_0xcfce3[_0x1a5bde(0xb5)]('/forgotPassword/code/');}else _0x41f992[_0x1a5bde(0xab)](_0x1a5bde(0xc7),_0x1a5bde(0xc5)),_0xcfce3[_0x1a5bde(0xb5)](_0x1a5bde(0xae));}),router[a0_0x23fbe7(0xd1)](a0_0x23fbe7(0xc1),async(_0x265e63,_0x39c9ae)=>{const _0x84b587=a0_0x23fbe7,_0x38a18f=await master_shop['find']();_0x39c9ae[_0x84b587(0xb3)](_0x84b587(0xba),{'success':_0x265e63['flash'](_0x84b587(0xeb)),'errors':_0x265e63[_0x84b587(0xab)]('errors'),'master_shop':_0x38a18f});}),router[a0_0x23fbe7(0xce)](a0_0x23fbe7(0xc1),async(_0x300769,_0x5c54b1)=>{const _0x38bee7=a0_0x23fbe7,{code:_0x1f41c3}=_0x300769[_0x38bee7(0xb4)],_0x1cafd0=await sing_up['find']({'code':_0x1f41c3});console[_0x38bee7(0xc4)](_0x1cafd0[_0x38bee7(0xe8)]),_0x5c54b1[_0x38bee7(0xcb)](_0x1cafd0);}),router['post']('/code_password/',async(_0xe731a5,_0x36dc5d)=>{const _0x5f52eb=a0_0x23fbe7,{codex:_0x2fdf4a,password:_0x4a95d0,cpassword:_0x4f003e,email:_0x122637}=_0xe731a5['body'],_0x448b8b=await sing_up[_0x5f52eb(0xc6)]({'code':_0x2fdf4a,'email':_0x122637,'isUsed':'False'}),_0x1d9c8c=await bcrypt['hash'](_0x4a95d0,0xa);if(_0x448b8b){_0x448b8b[_0x5f52eb(0xda)]=_0x1d9c8c,_0x448b8b[_0x5f52eb(0xdb)]=_0x5f52eb(0xe7);const _0x4e9c2e=_0x448b8b[_0x5f52eb(0xd6)](),_0x7b30f9=await master_shop[_0x5f52eb(0xcf)](),_0x2e5c61=await email_settings['findOne']();let _0xf1cb0f=nodemailer[_0x5f52eb(0xb2)]({'host':_0x2e5c61[_0x5f52eb(0xef)],'port':Number(_0x2e5c61[_0x5f52eb(0xdf)]),'secure':![],'auth':{'user':_0x2e5c61['email'],'pass':_0x2e5c61['password']}}),_0x145150={'from':_0x2e5c61[_0x5f52eb(0xdd)],'to':_0x448b8b[_0x5f52eb(0xdd)],'subject':_0x5f52eb(0xd3)+_0x7b30f9[0x0][_0x5f52eb(0xad)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x5f52eb(0xe9)+_0x5f52eb(0xca)+_0x7b30f9[0x0][_0x5f52eb(0xd9)],'cid':_0x5f52eb(0xde)}],'html':_0x5f52eb(0xf1)+_0x5f52eb(0xbd)+_0x5f52eb(0xb8)+_0x5f52eb(0xd2)+_0x5f52eb(0xb9)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x5f52eb(0xd5)+_0x5f52eb(0xd5)+_0x5f52eb(0xd2)+_0x5f52eb(0xe4)+_0x448b8b[_0x5f52eb(0xd7)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x5f52eb(0xd5)+_0x5f52eb(0xcd)+_0x5f52eb(0xd2)+_0x5f52eb(0xf2)+_0x5f52eb(0xe6)+_0x7b30f9[0x0][_0x5f52eb(0xad)]+_0x5f52eb(0xc8)+'</div>'+_0x5f52eb(0xd5)+_0x5f52eb(0xe1)};_0xf1cb0f['sendMail'](_0x145150,function(_0x37dd49,_0x49d8d4){const _0x439021=_0x5f52eb;_0x37dd49?(console[_0x439021(0xc4)](_0x37dd49),console['log'](_0x439021(0xbb))):console[_0x439021(0xc4)]('Email\x20sent\x20successfully');}),_0x36dc5d['redirect'](_0x5f52eb(0xbf));}else _0xe731a5[_0x5f52eb(0xab)]('error',_0x5f52eb(0xc5)),_0x36dc5d[_0x5f52eb(0xb5)](_0x5f52eb(0xac));}),module[a0_0x23fbe7(0xcc)]=router;