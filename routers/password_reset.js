const a0_0x56290f=a0_0x43bb;(function(_0x5b5569,_0x45d5df){const _0x442181=a0_0x43bb,_0x44c5e0=_0x5b5569();while(!![]){try{const _0x14a6ec=-parseInt(_0x442181(0x9f))/0x1+parseInt(_0x442181(0xcf))/0x2+parseInt(_0x442181(0xa0))/0x3*(parseInt(_0x442181(0xaf))/0x4)+parseInt(_0x442181(0xa9))/0x5*(-parseInt(_0x442181(0xb9))/0x6)+parseInt(_0x442181(0xc3))/0x7+parseInt(_0x442181(0xd7))/0x8*(parseInt(_0x442181(0xdc))/0x9)+-parseInt(_0x442181(0xd9))/0xa*(parseInt(_0x442181(0xd8))/0xb);if(_0x14a6ec===_0x45d5df)break;else _0x44c5e0['push'](_0x44c5e0['shift']());}catch(_0x2a08b5){_0x44c5e0['push'](_0x44c5e0['shift']());}}}(a0_0x481b,0x5ae7e));const express=require(a0_0x56290f(0xd1)),app=express(),router=express[a0_0x56290f(0xe5)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x56290f(0xad)),nodemailer=require(a0_0x56290f(0xa8));router['get'](a0_0x56290f(0xa1),async(_0x54d9a2,_0x23ef5a)=>{const _0x420bc9=a0_0x56290f,_0x207e32=await master_shop[_0x420bc9(0xbb)]();_0x23ef5a['render']('email_reset',{'success':_0x54d9a2[_0x420bc9(0xdd)](_0x420bc9(0xd5)),'errors':_0x54d9a2[_0x420bc9(0xdd)](_0x420bc9(0xe4)),'master_shop':_0x207e32});});function generateRandomAlphanumericString(_0x1cd861=0x6){const _0x3b2424=a0_0x56290f,_0x815c16='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x13a83e='';for(let _0x31daa7=0x0;_0x31daa7<_0x1cd861;_0x31daa7++){const _0x27c5ee=Math[_0x3b2424(0xab)](Math[_0x3b2424(0xc5)]()*_0x815c16['length']);_0x13a83e+=_0x815c16[_0x27c5ee];}return _0x13a83e;}function a0_0x481b(){const _0x5b9b26=['</body></html>','<div>','email','redirect','/../public','<hr\x20class=\x22my-3\x22>','20764OLXzVL','post','express','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','</head><body>','createTransport','success','body','8BJUQmc','2050521qFVARf','50CcwVPF','length','<strong>\x20Regards\x20</strong>','2079090xVjzkl','flash','port','</h5>','get','/upload/','error','</div>','errors','Router','/code/','False','176184HGdAMi','28941YUvfWf','/view','host','password','log','exports','Email\x20sent\x20successfully','<h5>','nodemailer','76305ZisbrI','site_title','floor','True','../middleware/auth','Error\x20Occurs','256IIiGmb','code','render','Logo.png','email_code','name','logo','/forgotPassword/code','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','/login/','6Jpvfeg','<html><head><title></title>','find','sendMail','/code_password/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','image','<p>Hello\x20','4459350DztGkI','isUsed','random','</b></h1></p>','<!DOCTYPE\x20html>','findOne'];a0_0x481b=function(){return _0x5b9b26;};return a0_0x481b();}function a0_0x43bb(_0x45cfc7,_0x2560e9){const _0x481b47=a0_0x481b();return a0_0x43bb=function(_0x43bb84,_0x2b34b8){_0x43bb84=_0x43bb84-0x9d;let _0x1d62b1=_0x481b47[_0x43bb84];return _0x1d62b1;},a0_0x43bb(_0x45cfc7,_0x2560e9);}router['post'](a0_0x56290f(0xa1),async(_0xdc1aa0,_0x2d7480)=>{const _0x18159c=a0_0x56290f,{email:_0xfe283e}=_0xdc1aa0['body'],_0x510f7b=await sing_up[_0x18159c(0xc8)]({'email':_0xfe283e});var _0x4cc452=generateRandomAlphanumericString();const _0x224194=await bcrypt['hash'](_0x4cc452,0xa);if(_0x510f7b){_0x510f7b[_0x18159c(0xb0)]=_0x4cc452,_0x510f7b[_0x18159c(0xc4)]=_0x18159c(0x9e);const _0x3854b7=_0x510f7b['save'](),_0x2a5c49=await master_shop[_0x18159c(0xbb)](),_0x161a21=await email_settings[_0x18159c(0xc8)]();let _0x30f003=nodemailer[_0x18159c(0xd4)]({'host':_0x161a21[_0x18159c(0xa2)],'port':Number(_0x161a21[_0x18159c(0xde)]),'secure':![],'auth':{'user':_0x161a21[_0x18159c(0xcb)],'pass':_0x161a21[_0x18159c(0xa3)]}}),_0x846723={'from':_0x161a21[_0x18159c(0xcb)],'to':_0x510f7b[_0x18159c(0xcb)],'subject':'Password\x20Reset\x20-\x20'+_0x2a5c49[0x0][_0x18159c(0xaa)],'attachments':[{'filename':_0x18159c(0xb2),'path':__dirname+'/../public'+'/upload/'+_0x2a5c49[0x0][_0x18159c(0xc1)],'cid':_0x18159c(0xb5)}],'html':_0x18159c(0xc7)+_0x18159c(0xba)+_0x18159c(0xd3)+_0x18159c(0xca)+_0x18159c(0xbe)+_0x18159c(0xca)+_0x18159c(0xc0)+_0x18159c(0xe3)+'</div>'+_0x18159c(0xca)+_0x18159c(0xd2)+_0x4cc452+_0x18159c(0xc6)+_0x18159c(0xe3)+'<hr\x20class=\x22my-3\x22>'+_0x18159c(0xca)+_0x18159c(0xdb)+'<h5>'+_0x2a5c49[0x0][_0x18159c(0xaa)]+_0x18159c(0xdf)+_0x18159c(0xe3)+_0x18159c(0xe3)+'</body></html>'};_0x30f003[_0x18159c(0xbc)](_0x846723,function(_0x4ba9ae,_0x141cb4){const _0x2577be=_0x18159c;_0x4ba9ae?(console['log'](_0x4ba9ae),console['log'](_0x2577be(0xae))):console['log'](_0x2577be(0xa6));}),_0x2d7480[_0x18159c(0xcc)]('/forgotPassword/code/');}else _0xdc1aa0[_0x18159c(0xdd)]('error',_0x18159c(0xb7)),_0x2d7480[_0x18159c(0xcc)]('/forgotPassword/view');}),router[a0_0x56290f(0xe0)](a0_0x56290f(0x9d),async(_0x4fb4fb,_0x2f6891)=>{const _0x5bafe3=a0_0x56290f,_0x20c4b3=await master_shop[_0x5bafe3(0xbb)]();_0x2f6891[_0x5bafe3(0xb1)](_0x5bafe3(0xb3),{'success':_0x4fb4fb[_0x5bafe3(0xdd)](_0x5bafe3(0xd5)),'errors':_0x4fb4fb[_0x5bafe3(0xdd)](_0x5bafe3(0xe4)),'master_shop':_0x20c4b3});}),router[a0_0x56290f(0xd0)](a0_0x56290f(0x9d),async(_0x285122,_0x1452be)=>{const _0x57e69e=a0_0x56290f,{code:_0x3e0303}=_0x285122['body'],_0x52fcdc=await sing_up[_0x57e69e(0xbb)]({'code':_0x3e0303});console[_0x57e69e(0xa4)](_0x52fcdc[_0x57e69e(0xda)]),_0x1452be['json'](_0x52fcdc);}),router[a0_0x56290f(0xd0)](a0_0x56290f(0xbd),async(_0x3d72a8,_0x22b5b3)=>{const _0x39ed4d=a0_0x56290f,{codex:_0x56c2e0,password:_0x43fe18,cpassword:_0x14d11e,email:_0x74fd14}=_0x3d72a8[_0x39ed4d(0xd6)],_0x5e232d=await sing_up[_0x39ed4d(0xc8)]({'code':_0x56c2e0,'email':_0x74fd14,'isUsed':_0x39ed4d(0x9e)}),_0x3333b2=await bcrypt['hash'](_0x43fe18,0xa);if(_0x5e232d){_0x5e232d['password']=_0x3333b2,_0x5e232d[_0x39ed4d(0xc4)]=_0x39ed4d(0xac);const _0x3bb409=_0x5e232d['save'](),_0x299031=await master_shop[_0x39ed4d(0xbb)](),_0xd22509=await email_settings[_0x39ed4d(0xc8)]();let _0x374e16=nodemailer[_0x39ed4d(0xd4)]({'host':_0xd22509[_0x39ed4d(0xa2)],'port':Number(_0xd22509['port']),'secure':![],'auth':{'user':_0xd22509[_0x39ed4d(0xcb)],'pass':_0xd22509[_0x39ed4d(0xa3)]}}),_0x277be3={'from':_0xd22509['email'],'to':_0x5e232d['email'],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x299031[0x0][_0x39ed4d(0xaa)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x39ed4d(0xcd)+_0x39ed4d(0xe1)+_0x299031[0x0][_0x39ed4d(0xc1)],'cid':_0x39ed4d(0xb5)}],'html':_0x39ed4d(0xc7)+_0x39ed4d(0xba)+_0x39ed4d(0xd3)+_0x39ed4d(0xca)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x39ed4d(0xca)+_0x39ed4d(0xc0)+'</div>'+'</div>'+'<div>'+_0x39ed4d(0xc2)+_0x5e232d[_0x39ed4d(0xb4)]+_0x39ed4d(0xbf)+_0x39ed4d(0xe3)+_0x39ed4d(0xce)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x39ed4d(0xa7)+_0x299031[0x0]['site_title']+'</h5>'+_0x39ed4d(0xe3)+_0x39ed4d(0xe3)+_0x39ed4d(0xc9)};_0x374e16[_0x39ed4d(0xbc)](_0x277be3,function(_0x19ff1d,_0x43b242){const _0x17efdb=_0x39ed4d;_0x19ff1d?(console['log'](_0x19ff1d),console['log'](_0x17efdb(0xae))):console[_0x17efdb(0xa4)](_0x17efdb(0xa6));}),_0x22b5b3[_0x39ed4d(0xcc)](_0x39ed4d(0xb8));}else _0x3d72a8[_0x39ed4d(0xdd)](_0x39ed4d(0xe2),_0x39ed4d(0xb7)),_0x22b5b3['redirect'](_0x39ed4d(0xb6));}),module[a0_0x56290f(0xa5)]=router;