const a0_0x3bc921=a0_0xc171;(function(_0x4247c7,_0x44c7c0){const _0x2d7852=a0_0xc171,_0x194171=_0x4247c7();while(!![]){try{const _0x158c08=-parseInt(_0x2d7852(0xd9))/0x1+parseInt(_0x2d7852(0xbe))/0x2+-parseInt(_0x2d7852(0xc7))/0x3*(-parseInt(_0x2d7852(0xf2))/0x4)+parseInt(_0x2d7852(0xe9))/0x5+-parseInt(_0x2d7852(0xf7))/0x6+-parseInt(_0x2d7852(0xbb))/0x7+-parseInt(_0x2d7852(0xb7))/0x8*(-parseInt(_0x2d7852(0xb1))/0x9);if(_0x158c08===_0x44c7c0)break;else _0x194171['push'](_0x194171['shift']());}catch(_0x1b771b){_0x194171['push'](_0x194171['shift']());}}}(a0_0x5054,0x908d8));const express=require(a0_0x3bc921(0xd8)),app=express(),router=express[a0_0x3bc921(0xeb)](),bcrypt=require(a0_0x3bc921(0xc3)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x3bc921(0xb5)),auth=require(a0_0x3bc921(0xb9)),nodemailer=require(a0_0x3bc921(0xc4));router[a0_0x3bc921(0xfa)](a0_0x3bc921(0xdd),async(_0x348980,_0x2f0094)=>{const _0x4d662b=a0_0x3bc921,_0x3619eb=await master_shop[_0x4d662b(0xd0)]();_0x2f0094[_0x4d662b(0xc5)](_0x4d662b(0xfd),{'success':_0x348980[_0x4d662b(0xc6)](_0x4d662b(0xe1)),'errors':_0x348980[_0x4d662b(0xc6)](_0x4d662b(0xd6)),'master_shop':_0x3619eb});});function generateRandomAlphanumericString(_0x23df01=0x6){const _0x506e54=a0_0x3bc921,_0x11c578=_0x506e54(0xb4);let _0x2da83e='';for(let _0x3ca4cf=0x0;_0x3ca4cf<_0x23df01;_0x3ca4cf++){const _0x4633d8=Math['floor'](Math[_0x506e54(0xde)]()*_0x11c578[_0x506e54(0xce)]);_0x2da83e+=_0x11c578[_0x4633d8];}return _0x2da83e;}function a0_0xc171(_0x4842f5,_0x5303cf){const _0x505427=a0_0x5054();return a0_0xc171=function(_0xc171ea,_0x1b58d8){_0xc171ea=_0xc171ea-0xb1;let _0x2e3b73=_0x505427[_0xc171ea];return _0x2e3b73;},a0_0xc171(_0x4842f5,_0x5303cf);}router[a0_0x3bc921(0xb6)](a0_0x3bc921(0xdd),async(_0x5251e4,_0x5de312)=>{const _0x4ae25c=a0_0x3bc921,{email:_0x5c860b}=_0x5251e4[_0x4ae25c(0xcc)],_0x50d607=await sing_up[_0x4ae25c(0xe5)]({'email':_0x5c860b});var _0x4d363d=generateRandomAlphanumericString();const _0x30db8a=await bcrypt[_0x4ae25c(0xbd)](_0x4d363d,0xa);if(_0x50d607){_0x50d607[_0x4ae25c(0xff)]=_0x4d363d,_0x50d607['isUsed']=_0x4ae25c(0xc9);const _0x8fc3af=_0x50d607['save'](),_0x19e13f=await master_shop[_0x4ae25c(0xd0)](),_0x4fc030=await email_settings[_0x4ae25c(0xe5)]();let _0x342441=nodemailer['createTransport']({'host':_0x4fc030['host'],'port':Number(_0x4fc030[_0x4ae25c(0xf5)]),'secure':![],'auth':{'user':_0x4fc030['email'],'pass':_0x4fc030['password']}}),_0x3f26b8={'from':_0x4fc030[_0x4ae25c(0xe4)],'to':_0x50d607[_0x4ae25c(0xe4)],'subject':_0x4ae25c(0xdc)+_0x19e13f[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x4ae25c(0xd2)+_0x4ae25c(0xfe)+_0x19e13f[0x0][_0x4ae25c(0xe2)],'cid':_0x4ae25c(0xbf)}],'html':_0x4ae25c(0xcf)+_0x4ae25c(0xdb)+'</head><body>'+_0x4ae25c(0xe7)+_0x4ae25c(0xb8)+_0x4ae25c(0xe7)+_0x4ae25c(0xe0)+_0x4ae25c(0xed)+_0x4ae25c(0xed)+_0x4ae25c(0xe7)+_0x4ae25c(0xd7)+_0x4d363d+_0x4ae25c(0xdf)+_0x4ae25c(0xed)+_0x4ae25c(0xbc)+_0x4ae25c(0xe7)+_0x4ae25c(0xea)+_0x4ae25c(0xda)+_0x19e13f[0x0][_0x4ae25c(0xf4)]+'</h5>'+_0x4ae25c(0xed)+_0x4ae25c(0xed)+_0x4ae25c(0xf3)};_0x342441[_0x4ae25c(0xd4)](_0x3f26b8,function(_0x65d650,_0x4f9e7d){const _0x40868c=_0x4ae25c;_0x65d650?(console[_0x40868c(0xee)](_0x65d650),console[_0x40868c(0xee)](_0x40868c(0xef))):console[_0x40868c(0xee)](_0x40868c(0xfc));}),_0x5de312[_0x4ae25c(0xe3)]('/forgotPassword/code/');}else _0x5251e4[_0x4ae25c(0xc6)](_0x4ae25c(0xcb),_0x4ae25c(0xe6)),_0x5de312['redirect'](_0x4ae25c(0xba));}),router[a0_0x3bc921(0xfa)](a0_0x3bc921(0xc2),async(_0x2dfada,_0x1c7f50)=>{const _0x2fff8f=a0_0x3bc921,_0x354294=await master_shop[_0x2fff8f(0xd0)]();_0x1c7f50['render'](_0x2fff8f(0xc1),{'success':_0x2dfada[_0x2fff8f(0xc6)](_0x2fff8f(0xe1)),'errors':_0x2dfada[_0x2fff8f(0xc6)](_0x2fff8f(0xd6)),'master_shop':_0x354294});}),router[a0_0x3bc921(0xb6)](a0_0x3bc921(0xc2),async(_0x26f9e2,_0x1c7caf)=>{const _0x344401=a0_0x3bc921,{code:_0x3a2a86}=_0x26f9e2[_0x344401(0xcc)],_0x4b8bef=await sing_up['find']({'code':_0x3a2a86});console[_0x344401(0xee)](_0x4b8bef['length']),_0x1c7caf[_0x344401(0xb2)](_0x4b8bef);}),router['post'](a0_0x3bc921(0xd1),async(_0x4d1c9a,_0x160fdc)=>{const _0x7193b4=a0_0x3bc921,{codex:_0x56dc2e,password:_0x519ec6,cpassword:_0x18a2e5,email:_0x5c1134}=_0x4d1c9a[_0x7193b4(0xcc)],_0x5d0c8b=await sing_up[_0x7193b4(0xe5)]({'code':_0x56dc2e,'email':_0x5c1134,'isUsed':_0x7193b4(0xc9)}),_0x282570=await bcrypt[_0x7193b4(0xbd)](_0x519ec6,0xa);if(_0x5d0c8b){_0x5d0c8b[_0x7193b4(0xfb)]=_0x282570,_0x5d0c8b[_0x7193b4(0xf9)]=_0x7193b4(0xc8);const _0x45054d=_0x5d0c8b[_0x7193b4(0xe8)](),_0x22d6b7=await master_shop['find'](),_0x564f36=await email_settings['findOne']();let _0x4b08cc=nodemailer[_0x7193b4(0xf6)]({'host':_0x564f36[_0x7193b4(0xb3)],'port':Number(_0x564f36['port']),'secure':![],'auth':{'user':_0x564f36[_0x7193b4(0xe4)],'pass':_0x564f36[_0x7193b4(0xfb)]}}),_0x40552c={'from':_0x564f36['email'],'to':_0x5d0c8b[_0x7193b4(0xe4)],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x22d6b7[0x0][_0x7193b4(0xf4)],'attachments':[{'filename':_0x7193b4(0xcd),'path':__dirname+_0x7193b4(0xd2)+_0x7193b4(0xfe)+_0x22d6b7[0x0]['image'],'cid':_0x7193b4(0xbf)}],'html':_0x7193b4(0xcf)+_0x7193b4(0xdb)+_0x7193b4(0xf1)+_0x7193b4(0xe7)+_0x7193b4(0xb8)+_0x7193b4(0xe7)+_0x7193b4(0xe0)+_0x7193b4(0xed)+_0x7193b4(0xed)+_0x7193b4(0xe7)+_0x7193b4(0xec)+_0x5d0c8b[_0x7193b4(0xf0)]+_0x7193b4(0xca)+_0x7193b4(0xed)+'<hr\x20class=\x22my-3\x22>'+_0x7193b4(0xe7)+_0x7193b4(0xea)+'<h5>'+_0x22d6b7[0x0]['site_title']+_0x7193b4(0xc0)+_0x7193b4(0xed)+_0x7193b4(0xed)+_0x7193b4(0xf3)};_0x4b08cc['sendMail'](_0x40552c,function(_0x2a9dab,_0x21e36b){const _0x35348c=_0x7193b4;_0x2a9dab?(console[_0x35348c(0xee)](_0x2a9dab),console[_0x35348c(0xee)](_0x35348c(0xef))):console[_0x35348c(0xee)](_0x35348c(0xfc));}),_0x160fdc[_0x7193b4(0xe3)](_0x7193b4(0xf8));}else _0x4d1c9a['flash'](_0x7193b4(0xcb),_0x7193b4(0xe6)),_0x160fdc[_0x7193b4(0xe3)](_0x7193b4(0xd5));}),module[a0_0x3bc921(0xd3)]=router;function a0_0x5054(){const _0x4a1da1=['True','False',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','error','body','Logo.png','length','<!DOCTYPE\x20html>','find','/code_password/','/../public','exports','sendMail','/forgotPassword/code','errors','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','express','511330liyQQp','<h5>','<html><head><title></title>','Password\x20Reset\x20-\x20','/view','random','</b></h1></p>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','success','image','redirect','email','findOne','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<div>','save','4208235hHjnio','<strong>\x20Regards\x20</strong>','Router','<p>Hello\x20','</div>','log','Error\x20Occurs','name','</head><body>','36928Ertzls','</body></html>','site_title','port','createTransport','6587970oVOJkj','/login/','isUsed','get','password','Email\x20sent\x20successfully','email_reset','/upload/','code','144630BZJVbE','json','host','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','../models/all_models','post','8XBWnnJ','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','../middleware/auth','/forgotPassword/view','3489696pxulEq','<hr\x20class=\x22my-3\x22>','hash','1339520hLFogZ','logo','</h5>','email_code','/code/','bcryptjs','nodemailer','render','flash','381kiiHZe'];a0_0x5054=function(){return _0x4a1da1;};return a0_0x5054();}