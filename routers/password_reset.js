const a0_0x2e3615=a0_0x444b;function a0_0xde94(){const _0x220e1b=['get','sendMail','flash','error','</h5>','<div>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','host','293662HFAniS','../models/all_models','isUsed','../middleware/auth','hash','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<html><head><title></title>','redirect','body','render','</div>','floor','/upload/','/forgotPassword/code','port','site_title','False','32897040pXBynW','findOne','email_reset','7945536FKPsRc','length','/code_password/','image','/forgotPassword/code/','email','find','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<!DOCTYPE\x20html>','11375931qIODCd','Password\x20Reset\x20-\x20','<hr\x20class=\x22my-3\x22>','<h5>','post','logo','Email\x20sent\x20successfully',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','6921710jUDHKr','1475436dUgmBr','<strong>\x20Regards\x20</strong>','/view','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Error\x20Occurs','password','log','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','email_code','</head><body>','exports','/../public','json','/login/','4SKJmcP','/forgotPassword/view','1085380iFSrwv','bcryptjs','createTransport','/code/','</body></html>','Logo.png','save','</b></h1></p>','success'];a0_0xde94=function(){return _0x220e1b;};return a0_0xde94();}(function(_0x3e9b28,_0xcf8767){const _0x551181=a0_0x444b,_0x1423e4=_0x3e9b28();while(!![]){try{const _0x5c48f3=-parseInt(_0x551181(0xdb))/0x1+-parseInt(_0x551181(0xc8))/0x2*(parseInt(_0x551181(0x101))/0x3)+-parseInt(_0x551181(0xca))/0x4+-parseInt(_0x551181(0x100))/0x5+parseInt(_0x551181(0xef))/0x6+-parseInt(_0x551181(0xf8))/0x7+parseInt(_0x551181(0xec))/0x8;if(_0x5c48f3===_0xcf8767)break;else _0x1423e4['push'](_0x1423e4['shift']());}catch(_0x5ebc7c){_0x1423e4['push'](_0x1423e4['shift']());}}}(a0_0xde94,0xd66c8));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x2e3615(0xcb)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x2e3615(0xdc)),auth=require(a0_0x2e3615(0xde)),nodemailer=require('nodemailer');function a0_0x444b(_0x146405,_0x3da291){const _0xde94dc=a0_0xde94();return a0_0x444b=function(_0x444b45,_0x189634){_0x444b45=_0x444b45-0xbd;let _0x343516=_0xde94dc[_0x444b45];return _0x343516;},a0_0x444b(_0x146405,_0x3da291);}router[a0_0x2e3615(0xd3)](a0_0x2e3615(0x103),async(_0x3e5dbe,_0x2f48b9)=>{const _0xb1e72e=a0_0x2e3615,_0xf78a4=await master_shop[_0xb1e72e(0xf5)]();_0x2f48b9[_0xb1e72e(0xe4)](_0xb1e72e(0xee),{'success':_0x3e5dbe[_0xb1e72e(0xd5)]('success'),'errors':_0x3e5dbe[_0xb1e72e(0xd5)]('errors'),'master_shop':_0xf78a4});});function generateRandomAlphanumericString(_0x151b51=0x6){const _0x2af26f=a0_0x2e3615,_0x2c2e15=_0x2af26f(0xd9);let _0x28946f='';for(let _0x4051ac=0x0;_0x4051ac<_0x151b51;_0x4051ac++){const _0x17ac05=Math[_0x2af26f(0xe6)](Math['random']()*_0x2c2e15[_0x2af26f(0xf0)]);_0x28946f+=_0x2c2e15[_0x17ac05];}return _0x28946f;}router[a0_0x2e3615(0xfc)]('/view',async(_0x4a16f6,_0x64ca2e)=>{const _0x130d0b=a0_0x2e3615,{email:_0x556c23}=_0x4a16f6[_0x130d0b(0xe3)],_0xd90f9d=await sing_up[_0x130d0b(0xed)]({'email':_0x556c23});var _0x1f3224=generateRandomAlphanumericString();const _0x59a5a5=await bcrypt[_0x130d0b(0xdf)](_0x1f3224,0xa);if(_0xd90f9d){_0xd90f9d['code']=_0x1f3224,_0xd90f9d['isUsed']='False';const _0x1fc126=_0xd90f9d[_0x130d0b(0xd0)](),_0x1899de=await master_shop[_0x130d0b(0xf5)](),_0x436269=await email_settings['findOne']();let _0x4bafc4=nodemailer[_0x130d0b(0xcc)]({'host':_0x436269[_0x130d0b(0xda)],'port':Number(_0x436269[_0x130d0b(0xe9)]),'secure':![],'auth':{'user':_0x436269[_0x130d0b(0xf4)],'pass':_0x436269[_0x130d0b(0xbf)]}}),_0x47148a={'from':_0x436269[_0x130d0b(0xf4)],'to':_0xd90f9d['email'],'subject':_0x130d0b(0xf9)+_0x1899de[0x0][_0x130d0b(0xea)],'attachments':[{'filename':_0x130d0b(0xcf),'path':__dirname+_0x130d0b(0xc5)+'/upload/'+_0x1899de[0x0][_0x130d0b(0xf2)],'cid':_0x130d0b(0xfd)}],'html':_0x130d0b(0xf7)+_0x130d0b(0xe1)+'</head><body>'+_0x130d0b(0xd8)+_0x130d0b(0xbd)+_0x130d0b(0xd8)+_0x130d0b(0xf6)+'</div>'+_0x130d0b(0xe5)+_0x130d0b(0xd8)+_0x130d0b(0xc1)+_0x1f3224+_0x130d0b(0xd1)+_0x130d0b(0xe5)+_0x130d0b(0xfa)+_0x130d0b(0xd8)+_0x130d0b(0x102)+_0x130d0b(0xfb)+_0x1899de[0x0]['site_title']+_0x130d0b(0xd7)+_0x130d0b(0xe5)+_0x130d0b(0xe5)+'</body></html>'};_0x4bafc4[_0x130d0b(0xd4)](_0x47148a,function(_0x262882,_0x59a5b0){const _0x2e36e4=_0x130d0b;_0x262882?(console[_0x2e36e4(0xc0)](_0x262882),console[_0x2e36e4(0xc0)](_0x2e36e4(0xbe))):console['log'](_0x2e36e4(0xfe));}),_0x64ca2e[_0x130d0b(0xe2)](_0x130d0b(0xf3));}else _0x4a16f6['flash'](_0x130d0b(0xd6),_0x130d0b(0xe0)),_0x64ca2e[_0x130d0b(0xe2)](_0x130d0b(0xc9));}),router[a0_0x2e3615(0xd3)](a0_0x2e3615(0xcd),async(_0x1b2507,_0xdf1f6f)=>{const _0x5c6cac=a0_0x2e3615,_0x1e1ad6=await master_shop[_0x5c6cac(0xf5)]();_0xdf1f6f[_0x5c6cac(0xe4)](_0x5c6cac(0xc2),{'success':_0x1b2507['flash'](_0x5c6cac(0xd2)),'errors':_0x1b2507[_0x5c6cac(0xd5)]('errors'),'master_shop':_0x1e1ad6});}),router[a0_0x2e3615(0xfc)]('/code/',async(_0x404956,_0x218fc8)=>{const _0xe33ab0=a0_0x2e3615,{code:_0x18e139}=_0x404956[_0xe33ab0(0xe3)],_0x5d6013=await sing_up[_0xe33ab0(0xf5)]({'code':_0x18e139});console['log'](_0x5d6013[_0xe33ab0(0xf0)]),_0x218fc8[_0xe33ab0(0xc6)](_0x5d6013);}),router[a0_0x2e3615(0xfc)](a0_0x2e3615(0xf1),async(_0x246c3a,_0x14a766)=>{const _0x1725ce=a0_0x2e3615,{codex:_0x225d3d,password:_0x475fe5,cpassword:_0xa73742,email:_0x2efe70}=_0x246c3a[_0x1725ce(0xe3)],_0x4d0024=await sing_up[_0x1725ce(0xed)]({'code':_0x225d3d,'email':_0x2efe70,'isUsed':_0x1725ce(0xeb)}),_0x4877b8=await bcrypt[_0x1725ce(0xdf)](_0x475fe5,0xa);if(_0x4d0024){_0x4d0024[_0x1725ce(0xbf)]=_0x4877b8,_0x4d0024[_0x1725ce(0xdd)]='True';const _0x22d4c0=_0x4d0024[_0x1725ce(0xd0)](),_0x141b59=await master_shop[_0x1725ce(0xf5)](),_0x1e179f=await email_settings[_0x1725ce(0xed)]();let _0xe1e7c9=nodemailer[_0x1725ce(0xcc)]({'host':_0x1e179f['host'],'port':Number(_0x1e179f[_0x1725ce(0xe9)]),'secure':![],'auth':{'user':_0x1e179f[_0x1725ce(0xf4)],'pass':_0x1e179f['password']}}),_0x3e7836={'from':_0x1e179f[_0x1725ce(0xf4)],'to':_0x4d0024[_0x1725ce(0xf4)],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x141b59[0x0][_0x1725ce(0xea)],'attachments':[{'filename':_0x1725ce(0xcf),'path':__dirname+_0x1725ce(0xc5)+_0x1725ce(0xe7)+_0x141b59[0x0][_0x1725ce(0xf2)],'cid':_0x1725ce(0xfd)}],'html':_0x1725ce(0xf7)+_0x1725ce(0xe1)+_0x1725ce(0xc3)+_0x1725ce(0xd8)+_0x1725ce(0xbd)+_0x1725ce(0xd8)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x1725ce(0xe5)+_0x1725ce(0xe5)+_0x1725ce(0xd8)+'<p>Hello\x20'+_0x4d0024['name']+_0x1725ce(0xff)+_0x1725ce(0xe5)+'<hr\x20class=\x22my-3\x22>'+_0x1725ce(0xd8)+_0x1725ce(0x102)+_0x1725ce(0xfb)+_0x141b59[0x0]['site_title']+_0x1725ce(0xd7)+_0x1725ce(0xe5)+_0x1725ce(0xe5)+_0x1725ce(0xce)};_0xe1e7c9[_0x1725ce(0xd4)](_0x3e7836,function(_0x14e363,_0xe01808){const _0x286f45=_0x1725ce;_0x14e363?(console[_0x286f45(0xc0)](_0x14e363),console[_0x286f45(0xc0)](_0x286f45(0xbe))):console[_0x286f45(0xc0)](_0x286f45(0xfe));}),_0x14a766[_0x1725ce(0xe2)](_0x1725ce(0xc7));}else _0x246c3a[_0x1725ce(0xd5)](_0x1725ce(0xd6),_0x1725ce(0xe0)),_0x14a766[_0x1725ce(0xe2)](_0x1725ce(0xe8));}),module[a0_0x2e3615(0xc4)]=router;