const a0_0x276fbd=a0_0x4434;function a0_0xb167(){const _0x12490b=['<strong>\x20Regards\x20</strong>','5455728CvzNfl','/../public','get','isUsed','json','1061958fZDkJf','password','body','errors','logo','91251tsvCNN','/upload/','createTransport','../models/all_models','<html><head><title></title>','<!DOCTYPE\x20html>','<h5>','email_reset','host','post',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','log','error','<p>Hello\x20','port','Email\x20sent\x20successfully','25168570tuKpUw','site_title','/view','floor','Logo.png','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','Error\x20Occurs','code','</body></html>','8tijDmH','839210RStwMB','../middleware/auth','exports','8350930aZagap','</div>','</head><body>','success','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','random','length','</h5>','email_code','email','6vGkrsK','flash','findOne','redirect','Password\x20Reset\x20-\x20','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<div>','</b></h1></p>','nodemailer','False','hash','image','/code/','<hr\x20class=\x22my-3\x22>','Password\x20Successfuly\x20Reset\x20-\x20','4WdjAFy','find','5998329TdnbyZ','/forgotPassword/view','save'];a0_0xb167=function(){return _0x12490b;};return a0_0xb167();}(function(_0xf6941a,_0x677463){const _0x1e9f56=a0_0x4434,_0x406243=_0xf6941a();while(!![]){try{const _0x3bbf59=-parseInt(_0x1e9f56(0xbc))/0x1+-parseInt(_0x1e9f56(0xb1))/0x2*(-parseInt(_0x1e9f56(0xc1))/0x3)+parseInt(_0x1e9f56(0xb7))/0x4+parseInt(_0x1e9f56(0x95))/0x5*(-parseInt(_0x1e9f56(0xa2))/0x6)+-parseInt(_0x1e9f56(0x98))/0x7*(parseInt(_0x1e9f56(0x94))/0x8)+-parseInt(_0x1e9f56(0xb3))/0x9+parseInt(_0x1e9f56(0xd1))/0xa;if(_0x3bbf59===_0x677463)break;else _0x406243['push'](_0x406243['shift']());}catch(_0x5e8b1b){_0x406243['push'](_0x406243['shift']());}}}(a0_0xb167,0xd0180));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x276fbd(0xc4)),auth=require(a0_0x276fbd(0x96)),nodemailer=require(a0_0x276fbd(0xaa));router['get'](a0_0x276fbd(0xd3),async(_0x373e06,_0x275d70)=>{const _0x21721a=a0_0x276fbd,_0x54a4cd=await master_shop[_0x21721a(0xb2)]();_0x275d70['render'](_0x21721a(0xc8),{'success':_0x373e06[_0x21721a(0xa3)](_0x21721a(0x9b)),'errors':_0x373e06[_0x21721a(0xa3)](_0x21721a(0xbf)),'master_shop':_0x54a4cd});});function a0_0x4434(_0x1bed07,_0x10fca8){const _0xb16782=a0_0xb167();return a0_0x4434=function(_0x4434cf,_0x1ce2af){_0x4434cf=_0x4434cf-0x93;let _0x5bcac1=_0xb16782[_0x4434cf];return _0x5bcac1;},a0_0x4434(_0x1bed07,_0x10fca8);}function generateRandomAlphanumericString(_0x465629=0x6){const _0x26dd17=a0_0x276fbd,_0x43986e=_0x26dd17(0x9c);let _0x43e0b5='';for(let _0x38d991=0x0;_0x38d991<_0x465629;_0x38d991++){const _0x50cfe3=Math[_0x26dd17(0xd4)](Math[_0x26dd17(0x9d)]()*_0x43986e[_0x26dd17(0x9e)]);_0x43e0b5+=_0x43986e[_0x50cfe3];}return _0x43e0b5;}router['post'](a0_0x276fbd(0xd3),async(_0x4eaa49,_0x1f6cca)=>{const _0xbced2a=a0_0x276fbd,{email:_0x2ec905}=_0x4eaa49[_0xbced2a(0xbe)],_0x123746=await sing_up[_0xbced2a(0xa4)]({'email':_0x2ec905});var _0x1a2591=generateRandomAlphanumericString();const _0x59d4e8=await bcrypt[_0xbced2a(0xac)](_0x1a2591,0xa);if(_0x123746){_0x123746[_0xbced2a(0xd8)]=_0x1a2591,_0x123746[_0xbced2a(0xba)]=_0xbced2a(0xab);const _0x4221be=_0x123746['save'](),_0x770fb1=await master_shop[_0xbced2a(0xb2)](),_0x4bc49b=await email_settings[_0xbced2a(0xa4)]();let _0x276c23=nodemailer[_0xbced2a(0xc3)]({'host':_0x4bc49b[_0xbced2a(0xc9)],'port':Number(_0x4bc49b[_0xbced2a(0xcf)]),'secure':![],'auth':{'user':_0x4bc49b[_0xbced2a(0xa1)],'pass':_0x4bc49b[_0xbced2a(0xbd)]}}),_0x2c079b={'from':_0x4bc49b[_0xbced2a(0xa1)],'to':_0x123746[_0xbced2a(0xa1)],'subject':_0xbced2a(0xa6)+_0x770fb1[0x0]['site_title'],'attachments':[{'filename':_0xbced2a(0xd5),'path':__dirname+_0xbced2a(0xb8)+_0xbced2a(0xc2)+_0x770fb1[0x0][_0xbced2a(0xad)],'cid':_0xbced2a(0xc0)}],'html':'<!DOCTYPE\x20html>'+_0xbced2a(0xc5)+_0xbced2a(0x9a)+_0xbced2a(0xa8)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0xbced2a(0xa8)+_0xbced2a(0xa7)+_0xbced2a(0x99)+'</div>'+_0xbced2a(0xa8)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x1a2591+_0xbced2a(0xa9)+_0xbced2a(0x99)+_0xbced2a(0xaf)+_0xbced2a(0xa8)+_0xbced2a(0xb6)+_0xbced2a(0xc7)+_0x770fb1[0x0]['site_title']+_0xbced2a(0x9f)+_0xbced2a(0x99)+_0xbced2a(0x99)+'</body></html>'};_0x276c23['sendMail'](_0x2c079b,function(_0x43e4e4,_0x38bbb5){const _0x24dcb1=_0xbced2a;_0x43e4e4?(console['log'](_0x43e4e4),console[_0x24dcb1(0xcc)](_0x24dcb1(0xd7))):console[_0x24dcb1(0xcc)](_0x24dcb1(0xd0));}),_0x1f6cca[_0xbced2a(0xa5)]('/forgotPassword/code/');}else _0x4eaa49[_0xbced2a(0xa3)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x1f6cca[_0xbced2a(0xa5)](_0xbced2a(0xb4));}),router[a0_0x276fbd(0xb9)](a0_0x276fbd(0xae),async(_0x20292a,_0x4592cf)=>{const _0x3ce8ac=a0_0x276fbd,_0x133263=await master_shop[_0x3ce8ac(0xb2)]();_0x4592cf['render'](_0x3ce8ac(0xa0),{'success':_0x20292a[_0x3ce8ac(0xa3)]('success'),'errors':_0x20292a[_0x3ce8ac(0xa3)]('errors'),'master_shop':_0x133263});}),router[a0_0x276fbd(0xca)](a0_0x276fbd(0xae),async(_0x464137,_0x3ccbc0)=>{const _0x520d06=a0_0x276fbd,{code:_0x47c2cd}=_0x464137[_0x520d06(0xbe)],_0x1dffcd=await sing_up[_0x520d06(0xb2)]({'code':_0x47c2cd});console[_0x520d06(0xcc)](_0x1dffcd[_0x520d06(0x9e)]),_0x3ccbc0[_0x520d06(0xbb)](_0x1dffcd);}),router[a0_0x276fbd(0xca)]('/code_password/',async(_0x2f96f2,_0x4b7a37)=>{const _0x198886=a0_0x276fbd,{codex:_0x403276,password:_0x2f5e14,cpassword:_0x57ffa4,email:_0x1e2903}=_0x2f96f2['body'],_0x4b00e7=await sing_up[_0x198886(0xa4)]({'code':_0x403276,'email':_0x1e2903,'isUsed':_0x198886(0xab)}),_0x2df3b7=await bcrypt[_0x198886(0xac)](_0x2f5e14,0xa);if(_0x4b00e7){_0x4b00e7['password']=_0x2df3b7,_0x4b00e7[_0x198886(0xba)]='True';const _0x15011b=_0x4b00e7[_0x198886(0xb5)](),_0x35f88c=await master_shop[_0x198886(0xb2)](),_0x4375fb=await email_settings[_0x198886(0xa4)]();let _0x1010a6=nodemailer[_0x198886(0xc3)]({'host':_0x4375fb['host'],'port':Number(_0x4375fb[_0x198886(0xcf)]),'secure':![],'auth':{'user':_0x4375fb[_0x198886(0xa1)],'pass':_0x4375fb[_0x198886(0xbd)]}}),_0x3bd6db={'from':_0x4375fb[_0x198886(0xa1)],'to':_0x4b00e7['email'],'subject':_0x198886(0xb0)+_0x35f88c[0x0][_0x198886(0xd2)],'attachments':[{'filename':_0x198886(0xd5),'path':__dirname+'/../public'+_0x198886(0xc2)+_0x35f88c[0x0][_0x198886(0xad)],'cid':_0x198886(0xc0)}],'html':_0x198886(0xc6)+_0x198886(0xc5)+'</head><body>'+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x198886(0xa8)+_0x198886(0xa7)+_0x198886(0x99)+'</div>'+'<div>'+_0x198886(0xce)+_0x4b00e7['name']+_0x198886(0xcb)+'</div>'+_0x198886(0xaf)+_0x198886(0xa8)+_0x198886(0xb6)+_0x198886(0xc7)+_0x35f88c[0x0][_0x198886(0xd2)]+_0x198886(0x9f)+_0x198886(0x99)+'</div>'+_0x198886(0x93)};_0x1010a6['sendMail'](_0x3bd6db,function(_0x2a12e6,_0x5e7e69){const _0x2f9590=_0x198886;_0x2a12e6?(console['log'](_0x2a12e6),console[_0x2f9590(0xcc)](_0x2f9590(0xd7))):console['log'](_0x2f9590(0xd0));}),_0x4b7a37['redirect']('/login/');}else _0x2f96f2[_0x198886(0xa3)](_0x198886(0xcd),_0x198886(0xd6)),_0x4b7a37[_0x198886(0xa5)]('/forgotPassword/code');}),module[a0_0x276fbd(0x97)]=router;