const a0_0x5956b3=a0_0x31e4;(function(_0x5c1deb,_0x182aeb){const _0x16478b=a0_0x31e4,_0x1403cf=_0x5c1deb();while(!![]){try{const _0x41b93f=-parseInt(_0x16478b(0x213))/0x1*(-parseInt(_0x16478b(0x233))/0x2)+-parseInt(_0x16478b(0x219))/0x3*(-parseInt(_0x16478b(0x226))/0x4)+parseInt(_0x16478b(0x216))/0x5*(-parseInt(_0x16478b(0x234))/0x6)+parseInt(_0x16478b(0x22d))/0x7*(-parseInt(_0x16478b(0x1ff))/0x8)+-parseInt(_0x16478b(0x228))/0x9*(-parseInt(_0x16478b(0x1f0))/0xa)+parseInt(_0x16478b(0x20b))/0xb+-parseInt(_0x16478b(0x205))/0xc*(parseInt(_0x16478b(0x1f8))/0xd);if(_0x41b93f===_0x182aeb)break;else _0x1403cf['push'](_0x1403cf['shift']());}catch(_0x30cbde){_0x1403cf['push'](_0x1403cf['shift']());}}}(a0_0x2725,0x57ce5));const express=require(a0_0x5956b3(0x1f6)),app=express(),router=express[a0_0x5956b3(0x204)](),bcrypt=require(a0_0x5956b3(0x21f)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x5956b3(0x1f7)),auth=require('../middleware/auth'),nodemailer=require(a0_0x5956b3(0x21e));router[a0_0x5956b3(0x207)]('/view',async(_0x4cdd57,_0x412d8b)=>{const _0x19094b=a0_0x5956b3,_0x4b119c=await master_shop['find']();_0x412d8b[_0x19094b(0x217)](_0x19094b(0x22b),{'success':_0x4cdd57[_0x19094b(0x230)](_0x19094b(0x1ee)),'errors':_0x4cdd57[_0x19094b(0x230)](_0x19094b(0x225)),'master_shop':_0x4b119c});});function a0_0x2725(){const _0x22d592=['/upload/','</b></h1></p>','nodemailer','bcryptjs','logo','/../public','name','image','<div>','errors','4412rRbZYx','random','9YttGpc','body','/view','email_reset','<hr\x20class=\x22my-3\x22>','21kGyqaD','post','site_title','flash','floor','email','250792uswEXw','6FKNvkw','save','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','</div>','<strong>\x20Regards\x20</strong>','success','<p>Hello\x20','3721810sHLAyn','error','redirect','sendMail','</h5>','password','express','../models/all_models','91bDdWAX','/code/','</head><body>',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','find','port','Password\x20Reset\x20-\x20','1339184SaePrv','Error\x20Occurs','length','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','Router','294168HhFYhr','/forgotPassword/view','get','findOne','code','Email\x20sent\x20successfully','4385568ylSZFg','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Logo.png','createTransport','<!DOCTYPE\x20html>','host','isUsed','</body></html>','2prYstS','<h5>','log','3057055MMBFWN','render','hash','1695zNiAUV','True','/code_password/'];a0_0x2725=function(){return _0x22d592;};return a0_0x2725();}function generateRandomAlphanumericString(_0x3a5583=0x6){const _0x3525da=a0_0x5956b3,_0x2f8520=_0x3525da(0x236);let _0x221534='';for(let _0x20840d=0x0;_0x20840d<_0x3a5583;_0x20840d++){const _0x20d259=Math[_0x3525da(0x231)](Math[_0x3525da(0x227)]()*_0x2f8520[_0x3525da(0x201)]);_0x221534+=_0x2f8520[_0x20d259];}return _0x221534;}function a0_0x31e4(_0x48f505,_0x4ad238){const _0x2725ca=a0_0x2725();return a0_0x31e4=function(_0x31e40f,_0x4459f4){_0x31e40f=_0x31e40f-0x1eb;let _0xfa147a=_0x2725ca[_0x31e40f];return _0xfa147a;},a0_0x31e4(_0x48f505,_0x4ad238);}router[a0_0x5956b3(0x22e)](a0_0x5956b3(0x22a),async(_0x2e9854,_0x322b92)=>{const _0x585746=a0_0x5956b3,{email:_0xa043c8}=_0x2e9854['body'],_0x1e0d40=await sing_up[_0x585746(0x208)]({'email':_0xa043c8});var _0x43887a=generateRandomAlphanumericString();const _0x51d3b8=await bcrypt[_0x585746(0x218)](_0x43887a,0xa);if(_0x1e0d40){_0x1e0d40[_0x585746(0x209)]=_0x43887a,_0x1e0d40[_0x585746(0x211)]='False';const _0x392215=_0x1e0d40['save'](),_0x96d5a2=await master_shop[_0x585746(0x1fc)](),_0x5a166d=await email_settings[_0x585746(0x208)]();let _0x2744ca=nodemailer[_0x585746(0x20e)]({'host':_0x5a166d['host'],'port':Number(_0x5a166d[_0x585746(0x1fd)]),'secure':![],'auth':{'user':_0x5a166d['email'],'pass':_0x5a166d['password']}}),_0x10c83a={'from':_0x5a166d[_0x585746(0x232)],'to':_0x1e0d40[_0x585746(0x232)],'subject':_0x585746(0x1fe)+_0x96d5a2[0x0][_0x585746(0x22f)],'attachments':[{'filename':_0x585746(0x20d),'path':__dirname+_0x585746(0x221)+_0x585746(0x21c)+_0x96d5a2[0x0][_0x585746(0x223)],'cid':'logo'}],'html':_0x585746(0x20f)+'<html><head><title></title>'+_0x585746(0x1fa)+_0x585746(0x224)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x585746(0x224)+_0x585746(0x20c)+_0x585746(0x1ec)+_0x585746(0x1ec)+'<div>'+_0x585746(0x202)+_0x43887a+_0x585746(0x21d)+_0x585746(0x1ec)+_0x585746(0x22c)+'<div>'+_0x585746(0x1ed)+_0x585746(0x214)+_0x96d5a2[0x0]['site_title']+'</h5>'+_0x585746(0x1ec)+_0x585746(0x1ec)+_0x585746(0x212)};_0x2744ca[_0x585746(0x1f3)](_0x10c83a,function(_0x47e1f4,_0x32b827){const _0x4a46ab=_0x585746;_0x47e1f4?(console[_0x4a46ab(0x215)](_0x47e1f4),console[_0x4a46ab(0x215)](_0x4a46ab(0x200))):console[_0x4a46ab(0x215)]('Email\x20sent\x20successfully');}),_0x322b92[_0x585746(0x1f2)]('/forgotPassword/code/');}else _0x2e9854[_0x585746(0x230)](_0x585746(0x1f1),_0x585746(0x203)),_0x322b92['redirect'](_0x585746(0x206));}),router[a0_0x5956b3(0x207)](a0_0x5956b3(0x1f9),async(_0x50c71f,_0xad7def)=>{const _0x34b6c2=a0_0x5956b3,_0x478979=await master_shop[_0x34b6c2(0x1fc)]();_0xad7def[_0x34b6c2(0x217)]('email_code',{'success':_0x50c71f[_0x34b6c2(0x230)](_0x34b6c2(0x1ee)),'errors':_0x50c71f[_0x34b6c2(0x230)]('errors'),'master_shop':_0x478979});}),router[a0_0x5956b3(0x22e)](a0_0x5956b3(0x1f9),async(_0x232ca6,_0x4d8cfa)=>{const _0x1bda71=a0_0x5956b3,{code:_0x5a13f9}=_0x232ca6['body'],_0x1e4205=await sing_up[_0x1bda71(0x1fc)]({'code':_0x5a13f9});console[_0x1bda71(0x215)](_0x1e4205['length']),_0x4d8cfa['json'](_0x1e4205);}),router[a0_0x5956b3(0x22e)](a0_0x5956b3(0x21b),async(_0x148a2a,_0x439dc8)=>{const _0x26d9f6=a0_0x5956b3,{codex:_0x95d23,password:_0x370be0,cpassword:_0x328eef,email:_0x25f20e}=_0x148a2a[_0x26d9f6(0x229)],_0x2d6f37=await sing_up[_0x26d9f6(0x208)]({'code':_0x95d23,'email':_0x25f20e,'isUsed':'False'}),_0x3fafc9=await bcrypt[_0x26d9f6(0x218)](_0x370be0,0xa);if(_0x2d6f37){_0x2d6f37[_0x26d9f6(0x1f5)]=_0x3fafc9,_0x2d6f37[_0x26d9f6(0x211)]=_0x26d9f6(0x21a);const _0x22d30a=_0x2d6f37[_0x26d9f6(0x235)](),_0x37ed1a=await master_shop[_0x26d9f6(0x1fc)](),_0x284c05=await email_settings[_0x26d9f6(0x208)]();let _0x5ea90c=nodemailer[_0x26d9f6(0x20e)]({'host':_0x284c05[_0x26d9f6(0x210)],'port':Number(_0x284c05[_0x26d9f6(0x1fd)]),'secure':![],'auth':{'user':_0x284c05['email'],'pass':_0x284c05['password']}}),_0x4d68b2={'from':_0x284c05[_0x26d9f6(0x232)],'to':_0x2d6f37[_0x26d9f6(0x232)],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x37ed1a[0x0]['site_title'],'attachments':[{'filename':_0x26d9f6(0x20d),'path':__dirname+_0x26d9f6(0x221)+_0x26d9f6(0x21c)+_0x37ed1a[0x0][_0x26d9f6(0x223)],'cid':_0x26d9f6(0x220)}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+_0x26d9f6(0x1fa)+'<div>'+_0x26d9f6(0x1eb)+_0x26d9f6(0x224)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x26d9f6(0x1ec)+'<div>'+_0x26d9f6(0x1ef)+_0x2d6f37[_0x26d9f6(0x222)]+_0x26d9f6(0x1fb)+_0x26d9f6(0x1ec)+_0x26d9f6(0x22c)+_0x26d9f6(0x224)+_0x26d9f6(0x1ed)+_0x26d9f6(0x214)+_0x37ed1a[0x0][_0x26d9f6(0x22f)]+_0x26d9f6(0x1f4)+_0x26d9f6(0x1ec)+_0x26d9f6(0x1ec)+_0x26d9f6(0x212)};_0x5ea90c['sendMail'](_0x4d68b2,function(_0x59a148,_0x2d6215){const _0x42a0a3=_0x26d9f6;_0x59a148?(console['log'](_0x59a148),console[_0x42a0a3(0x215)](_0x42a0a3(0x200))):console[_0x42a0a3(0x215)](_0x42a0a3(0x20a));}),_0x439dc8[_0x26d9f6(0x1f2)]('/login/');}else _0x148a2a['flash'](_0x26d9f6(0x1f1),_0x26d9f6(0x203)),_0x439dc8[_0x26d9f6(0x1f2)]('/forgotPassword/code');}),module['exports']=router;