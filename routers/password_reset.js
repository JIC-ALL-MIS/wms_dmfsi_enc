const a0_0x4a962a=a0_0x24ff;function a0_0x543d(){const _0x163de4=['flash','password','../models/all_models','4401860BcIIit','</head><body>','<hr\x20class=\x22my-3\x22>','name','success','<h5>','json','Error\x20Occurs','<!DOCTYPE\x20html>','540568xELMue','<html><head><title></title>','host','</div>','/upload/','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Logo.png','12XLSRNe','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','floor','/view','sendMail','14MYEQLN','hash','bcryptjs','post','</h5>','body','email','find','length','log','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','</body></html>',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','isUsed','2250YCYrzk','<strong>\x20Regards\x20</strong>','/forgotPassword/code/','code','redirect','2578434FZmrsL','20736nSotmn','</b></h1></p>','25360lhWeUC','error','<p>Hello\x20','Password\x20Reset\x20-\x20','email_reset','port','Email\x20sent\x20successfully','save','get','site_title','/code/','random','1044627tVyQmv','/../public','email_code','nodemailer','findOne','errors','<div>','496CLXSUJ','/login/','Password\x20Successfuly\x20Reset\x20-\x20','logo','createTransport','/forgotPassword/code','../middleware/auth','Router','image','False','render'];a0_0x543d=function(){return _0x163de4;};return a0_0x543d();}(function(_0x3279cf,_0x282aaf){const _0x2fbf56=a0_0x24ff,_0x109267=_0x3279cf();while(!![]){try{const _0x3a4caa=-parseInt(_0x2fbf56(0x11b))/0x1*(-parseInt(_0x2fbf56(0xec))/0x2)+-parseInt(_0x2fbf56(0x114))/0x3+parseInt(_0x2fbf56(0xe5))/0x4+parseInt(_0x2fbf56(0x129))/0x5+-parseInt(_0x2fbf56(0x105))/0x6*(parseInt(_0x2fbf56(0xf1))/0x7)+parseInt(_0x2fbf56(0x106))/0x8+-parseInt(_0x2fbf56(0x100))/0x9*(-parseInt(_0x2fbf56(0x108))/0xa);if(_0x3a4caa===_0x282aaf)break;else _0x109267['push'](_0x109267['shift']());}catch(_0x15606f){_0x109267['push'](_0x109267['shift']());}}}(a0_0x543d,0x6d3a3));const express=require('express'),app=express(),router=express[a0_0x4a962a(0x122)](),bcrypt=require(a0_0x4a962a(0xf3)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x4a962a(0x128)),auth=require(a0_0x4a962a(0x121)),nodemailer=require(a0_0x4a962a(0x117));router[a0_0x4a962a(0x110)](a0_0x4a962a(0xef),async(_0x382563,_0x3fa1bb)=>{const _0x2d01bf=a0_0x4a962a,_0x1ca075=await master_shop[_0x2d01bf(0xf8)]();_0x3fa1bb[_0x2d01bf(0x125)](_0x2d01bf(0x10c),{'success':_0x382563[_0x2d01bf(0x126)](_0x2d01bf(0x12d)),'errors':_0x382563[_0x2d01bf(0x126)](_0x2d01bf(0x119)),'master_shop':_0x1ca075});});function a0_0x24ff(_0x186519,_0x24a2f1){const _0x543d78=a0_0x543d();return a0_0x24ff=function(_0x24ffe0,_0x797db3){_0x24ffe0=_0x24ffe0-0xe2;let _0x3be469=_0x543d78[_0x24ffe0];return _0x3be469;},a0_0x24ff(_0x186519,_0x24a2f1);}function generateRandomAlphanumericString(_0x47873a=0x6){const _0x373a56=a0_0x4a962a,_0x20b095='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x528b1c='';for(let _0xc49a5a=0x0;_0xc49a5a<_0x47873a;_0xc49a5a++){const _0x73793d=Math[_0x373a56(0xee)](Math[_0x373a56(0x113)]()*_0x20b095[_0x373a56(0xf9)]);_0x528b1c+=_0x20b095[_0x73793d];}return _0x528b1c;}router[a0_0x4a962a(0xf4)](a0_0x4a962a(0xef),async(_0x2b3739,_0x50b68a)=>{const _0x3ccd79=a0_0x4a962a,{email:_0x146ca0}=_0x2b3739[_0x3ccd79(0xf6)],_0x20db3b=await sing_up[_0x3ccd79(0x118)]({'email':_0x146ca0});var _0x348f3a=generateRandomAlphanumericString();const _0x25edcd=await bcrypt[_0x3ccd79(0xf2)](_0x348f3a,0xa);if(_0x20db3b){_0x20db3b[_0x3ccd79(0x103)]=_0x348f3a,_0x20db3b[_0x3ccd79(0xff)]=_0x3ccd79(0x124);const _0x5e0ee5=_0x20db3b[_0x3ccd79(0x10f)](),_0x2fdab3=await master_shop[_0x3ccd79(0xf8)](),_0x3508ed=await email_settings[_0x3ccd79(0x118)]();let _0x5e8c48=nodemailer[_0x3ccd79(0x11f)]({'host':_0x3508ed[_0x3ccd79(0xe7)],'port':Number(_0x3508ed[_0x3ccd79(0x10d)]),'secure':![],'auth':{'user':_0x3508ed[_0x3ccd79(0xf7)],'pass':_0x3508ed['password']}}),_0x3df07d={'from':_0x3508ed[_0x3ccd79(0xf7)],'to':_0x20db3b[_0x3ccd79(0xf7)],'subject':_0x3ccd79(0x10b)+_0x2fdab3[0x0][_0x3ccd79(0x111)],'attachments':[{'filename':_0x3ccd79(0xeb),'path':__dirname+_0x3ccd79(0x115)+_0x3ccd79(0xe9)+_0x2fdab3[0x0][_0x3ccd79(0x123)],'cid':_0x3ccd79(0x11e)}],'html':_0x3ccd79(0xe4)+_0x3ccd79(0xe6)+_0x3ccd79(0x12a)+_0x3ccd79(0x11a)+_0x3ccd79(0xed)+'<div>'+_0x3ccd79(0xea)+_0x3ccd79(0xe8)+_0x3ccd79(0xe8)+_0x3ccd79(0x11a)+_0x3ccd79(0xfb)+_0x348f3a+_0x3ccd79(0x107)+_0x3ccd79(0xe8)+_0x3ccd79(0x12b)+_0x3ccd79(0x11a)+_0x3ccd79(0x101)+_0x3ccd79(0x12e)+_0x2fdab3[0x0][_0x3ccd79(0x111)]+_0x3ccd79(0xf5)+_0x3ccd79(0xe8)+_0x3ccd79(0xe8)+_0x3ccd79(0xfc)};_0x5e8c48[_0x3ccd79(0xf0)](_0x3df07d,function(_0x522696,_0x155aec){const _0x35d713=_0x3ccd79;_0x522696?(console[_0x35d713(0xfa)](_0x522696),console[_0x35d713(0xfa)](_0x35d713(0xe3))):console[_0x35d713(0xfa)]('Email\x20sent\x20successfully');}),_0x50b68a['redirect'](_0x3ccd79(0x102));}else _0x2b3739[_0x3ccd79(0x126)](_0x3ccd79(0x109),_0x3ccd79(0xfe)),_0x50b68a[_0x3ccd79(0x104)]('/forgotPassword/view');}),router['get']('/code/',async(_0x235b29,_0x36a572)=>{const _0x3fa8e8=a0_0x4a962a,_0x38c905=await master_shop['find']();_0x36a572['render'](_0x3fa8e8(0x116),{'success':_0x235b29[_0x3fa8e8(0x126)](_0x3fa8e8(0x12d)),'errors':_0x235b29['flash'](_0x3fa8e8(0x119)),'master_shop':_0x38c905});}),router[a0_0x4a962a(0xf4)](a0_0x4a962a(0x112),async(_0x42d6db,_0x4bd450)=>{const _0x82dd0=a0_0x4a962a,{code:_0x40c366}=_0x42d6db[_0x82dd0(0xf6)],_0x5279fd=await sing_up[_0x82dd0(0xf8)]({'code':_0x40c366});console[_0x82dd0(0xfa)](_0x5279fd[_0x82dd0(0xf9)]),_0x4bd450[_0x82dd0(0xe2)](_0x5279fd);}),router[a0_0x4a962a(0xf4)]('/code_password/',async(_0x3d1f81,_0x3fbb94)=>{const _0x116477=a0_0x4a962a,{codex:_0x14720b,password:_0x30e79d,cpassword:_0x413647,email:_0x3c19ca}=_0x3d1f81[_0x116477(0xf6)],_0x7566d2=await sing_up[_0x116477(0x118)]({'code':_0x14720b,'email':_0x3c19ca,'isUsed':_0x116477(0x124)}),_0x401eb3=await bcrypt[_0x116477(0xf2)](_0x30e79d,0xa);if(_0x7566d2){_0x7566d2['password']=_0x401eb3,_0x7566d2[_0x116477(0xff)]='True';const _0x679b15=_0x7566d2[_0x116477(0x10f)](),_0x46c903=await master_shop[_0x116477(0xf8)](),_0x18e2b1=await email_settings[_0x116477(0x118)]();let _0x5737ae=nodemailer['createTransport']({'host':_0x18e2b1[_0x116477(0xe7)],'port':Number(_0x18e2b1[_0x116477(0x10d)]),'secure':![],'auth':{'user':_0x18e2b1['email'],'pass':_0x18e2b1[_0x116477(0x127)]}}),_0x124369={'from':_0x18e2b1[_0x116477(0xf7)],'to':_0x7566d2[_0x116477(0xf7)],'subject':_0x116477(0x11d)+_0x46c903[0x0][_0x116477(0x111)],'attachments':[{'filename':_0x116477(0xeb),'path':__dirname+_0x116477(0x115)+_0x116477(0xe9)+_0x46c903[0x0]['image'],'cid':_0x116477(0x11e)}],'html':_0x116477(0xe4)+'<html><head><title></title>'+_0x116477(0x12a)+_0x116477(0x11a)+_0x116477(0xed)+'<div>'+_0x116477(0xea)+'</div>'+_0x116477(0xe8)+'<div>'+_0x116477(0x10a)+_0x7566d2[_0x116477(0x12c)]+_0x116477(0xfd)+_0x116477(0xe8)+_0x116477(0x12b)+_0x116477(0x11a)+_0x116477(0x101)+_0x116477(0x12e)+_0x46c903[0x0][_0x116477(0x111)]+_0x116477(0xf5)+_0x116477(0xe8)+_0x116477(0xe8)+_0x116477(0xfc)};_0x5737ae[_0x116477(0xf0)](_0x124369,function(_0x21364b,_0xfa8b38){const _0x5b8bd1=_0x116477;_0x21364b?(console[_0x5b8bd1(0xfa)](_0x21364b),console[_0x5b8bd1(0xfa)](_0x5b8bd1(0xe3))):console[_0x5b8bd1(0xfa)](_0x5b8bd1(0x10e));}),_0x3fbb94[_0x116477(0x104)](_0x116477(0x11c));}else _0x3d1f81['flash']('error',_0x116477(0xfe)),_0x3fbb94['redirect'](_0x116477(0x120));}),module['exports']=router;