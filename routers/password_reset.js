const a0_0x5477e0=a0_0x556e;(function(_0x200b76,_0x159a8c){const _0x4cad74=a0_0x556e,_0x98c2f=_0x200b76();while(!![]){try{const _0x52a2c8=parseInt(_0x4cad74(0x1ec))/0x1+-parseInt(_0x4cad74(0x203))/0x2+parseInt(_0x4cad74(0x1e5))/0x3+parseInt(_0x4cad74(0x1d9))/0x4+parseInt(_0x4cad74(0x1f9))/0x5+parseInt(_0x4cad74(0x1cf))/0x6*(parseInt(_0x4cad74(0x1f1))/0x7)+parseInt(_0x4cad74(0x1ce))/0x8*(-parseInt(_0x4cad74(0x1c0))/0x9);if(_0x52a2c8===_0x159a8c)break;else _0x98c2f['push'](_0x98c2f['shift']());}catch(_0x56402a){_0x98c2f['push'](_0x98c2f['shift']());}}}(a0_0x3bc2,0x4b353));const express=require(a0_0x5477e0(0x1f4)),app=express(),router=express['Router'](),bcrypt=require(a0_0x5477e0(0x1ef)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x5477e0(0x1dd)),auth=require(a0_0x5477e0(0x1c3)),nodemailer=require('nodemailer');function a0_0x556e(_0x3a1069,_0x5e55e9){const _0x3bc24e=a0_0x3bc2();return a0_0x556e=function(_0x556ef0,_0x29e03d){_0x556ef0=_0x556ef0-0x1bf;let _0x2c26a4=_0x3bc24e[_0x556ef0];return _0x2c26a4;},a0_0x556e(_0x3a1069,_0x5e55e9);}router[a0_0x5477e0(0x1f6)]('/view',async(_0x23d3bf,_0x37073a)=>{const _0x2de848=a0_0x5477e0,_0x428ab6=await master_shop[_0x2de848(0x1fc)]();_0x37073a[_0x2de848(0x1d5)](_0x2de848(0x1ee),{'success':_0x23d3bf[_0x2de848(0x1ca)](_0x2de848(0x1cb)),'errors':_0x23d3bf[_0x2de848(0x1ca)]('errors'),'master_shop':_0x428ab6});});function a0_0x3bc2(){const _0x2fd878=['True','post','flash','success','/view','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','4687664MtLdbg','96762ldyvAb','<html><head><title></title>','False','</b></h1></p>','port','save','render','<strong>\x20Regards\x20</strong>','</body></html>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','217296CfdIPU','json','site_title','email_code','../models/all_models','</h5>','name','<hr\x20class=\x22my-3\x22>','length','<h5>','Error\x20Occurs','findOne','889164dtSUZH','<div>','hash','</head><body>','password','error','image','105110IxBWKQ','Email\x20sent\x20successfully','email_reset','bcryptjs','sendMail','259VIOgcU','isUsed','Password\x20Reset\x20-\x20','express','log','get',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','/../public','303605xDfxeU','code','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','find','/code/','</div>','/login/','host','/forgotPassword/code','email','438466CQEVyo','/upload/','9HePfgr','body','createTransport','../middleware/auth','Password\x20Successfuly\x20Reset\x20-\x20','redirect','Logo.png','/forgotPassword/code/'];a0_0x3bc2=function(){return _0x2fd878;};return a0_0x3bc2();}function generateRandomAlphanumericString(_0x22b39e=0x6){const _0x2ea86e=a0_0x5477e0,_0xcb762='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x469169='';for(let _0x9ce348=0x0;_0x9ce348<_0x22b39e;_0x9ce348++){const _0xf43f31=Math['floor'](Math['random']()*_0xcb762[_0x2ea86e(0x1e1)]);_0x469169+=_0xcb762[_0xf43f31];}return _0x469169;}router[a0_0x5477e0(0x1c9)](a0_0x5477e0(0x1cc),async(_0x42e207,_0x3b6ec9)=>{const _0x29e5ae=a0_0x5477e0,{email:_0x29cf81}=_0x42e207['body'],_0x5abfa6=await sing_up[_0x29e5ae(0x1e4)]({'email':_0x29cf81});var _0xa95bc4=generateRandomAlphanumericString();const _0x5af378=await bcrypt['hash'](_0xa95bc4,0xa);if(_0x5abfa6){_0x5abfa6[_0x29e5ae(0x1fa)]=_0xa95bc4,_0x5abfa6[_0x29e5ae(0x1f2)]=_0x29e5ae(0x1d1);const _0x399ffc=_0x5abfa6[_0x29e5ae(0x1d4)](),_0x3d712d=await master_shop[_0x29e5ae(0x1fc)](),_0x2badcf=await email_settings[_0x29e5ae(0x1e4)]();let _0x57ae33=nodemailer[_0x29e5ae(0x1c2)]({'host':_0x2badcf[_0x29e5ae(0x200)],'port':Number(_0x2badcf[_0x29e5ae(0x1d3)]),'secure':![],'auth':{'user':_0x2badcf['email'],'pass':_0x2badcf[_0x29e5ae(0x1e9)]}}),_0x5a0ca1={'from':_0x2badcf[_0x29e5ae(0x202)],'to':_0x5abfa6[_0x29e5ae(0x202)],'subject':_0x29e5ae(0x1f3)+_0x3d712d[0x0][_0x29e5ae(0x1db)],'attachments':[{'filename':_0x29e5ae(0x1c6),'path':__dirname+_0x29e5ae(0x1f8)+_0x29e5ae(0x1bf)+_0x3d712d[0x0][_0x29e5ae(0x1eb)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x29e5ae(0x1d0)+'</head><body>'+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x29e5ae(0x1e6)+_0x29e5ae(0x1cd)+_0x29e5ae(0x1fe)+'</div>'+_0x29e5ae(0x1e6)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0xa95bc4+_0x29e5ae(0x1d2)+_0x29e5ae(0x1fe)+'<hr\x20class=\x22my-3\x22>'+_0x29e5ae(0x1e6)+_0x29e5ae(0x1d6)+_0x29e5ae(0x1e2)+_0x3d712d[0x0][_0x29e5ae(0x1db)]+_0x29e5ae(0x1de)+_0x29e5ae(0x1fe)+_0x29e5ae(0x1fe)+_0x29e5ae(0x1d7)};_0x57ae33[_0x29e5ae(0x1f0)](_0x5a0ca1,function(_0x5e8676,_0x1f2e45){const _0x544b72=_0x29e5ae;_0x5e8676?(console[_0x544b72(0x1f5)](_0x5e8676),console[_0x544b72(0x1f5)](_0x544b72(0x1e3))):console[_0x544b72(0x1f5)]('Email\x20sent\x20successfully');}),_0x3b6ec9['redirect'](_0x29e5ae(0x1c7));}else _0x42e207[_0x29e5ae(0x1ca)](_0x29e5ae(0x1ea),_0x29e5ae(0x1fb)),_0x3b6ec9[_0x29e5ae(0x1c5)]('/forgotPassword/view');}),router[a0_0x5477e0(0x1f6)](a0_0x5477e0(0x1fd),async(_0x23feae,_0x5f264c)=>{const _0x56eb9d=a0_0x5477e0,_0x490eee=await master_shop[_0x56eb9d(0x1fc)]();_0x5f264c[_0x56eb9d(0x1d5)](_0x56eb9d(0x1dc),{'success':_0x23feae[_0x56eb9d(0x1ca)](_0x56eb9d(0x1cb)),'errors':_0x23feae[_0x56eb9d(0x1ca)]('errors'),'master_shop':_0x490eee});}),router[a0_0x5477e0(0x1c9)](a0_0x5477e0(0x1fd),async(_0x44a99d,_0x379480)=>{const _0x1f82bf=a0_0x5477e0,{code:_0x4b8016}=_0x44a99d[_0x1f82bf(0x1c1)],_0x2374f7=await sing_up[_0x1f82bf(0x1fc)]({'code':_0x4b8016});console['log'](_0x2374f7[_0x1f82bf(0x1e1)]),_0x379480[_0x1f82bf(0x1da)](_0x2374f7);}),router['post']('/code_password/',async(_0x2a5dbe,_0x319d0b)=>{const _0x18d8b2=a0_0x5477e0,{codex:_0x58c554,password:_0xb5a0c7,cpassword:_0x30322f,email:_0x491058}=_0x2a5dbe[_0x18d8b2(0x1c1)],_0x4a268d=await sing_up['findOne']({'code':_0x58c554,'email':_0x491058,'isUsed':'False'}),_0x561871=await bcrypt[_0x18d8b2(0x1e7)](_0xb5a0c7,0xa);if(_0x4a268d){_0x4a268d[_0x18d8b2(0x1e9)]=_0x561871,_0x4a268d[_0x18d8b2(0x1f2)]=_0x18d8b2(0x1c8);const _0x407699=_0x4a268d['save'](),_0x2ea0c3=await master_shop[_0x18d8b2(0x1fc)](),_0x171839=await email_settings[_0x18d8b2(0x1e4)]();let _0x5b7ffd=nodemailer['createTransport']({'host':_0x171839['host'],'port':Number(_0x171839['port']),'secure':![],'auth':{'user':_0x171839['email'],'pass':_0x171839['password']}}),_0x4c2074={'from':_0x171839[_0x18d8b2(0x202)],'to':_0x4a268d[_0x18d8b2(0x202)],'subject':_0x18d8b2(0x1c4)+_0x2ea0c3[0x0]['site_title'],'attachments':[{'filename':_0x18d8b2(0x1c6),'path':__dirname+'/../public'+_0x18d8b2(0x1bf)+_0x2ea0c3[0x0][_0x18d8b2(0x1eb)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x18d8b2(0x1d0)+_0x18d8b2(0x1e8)+_0x18d8b2(0x1e6)+_0x18d8b2(0x1d8)+_0x18d8b2(0x1e6)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x18d8b2(0x1fe)+'</div>'+_0x18d8b2(0x1e6)+'<p>Hello\x20'+_0x4a268d[_0x18d8b2(0x1df)]+_0x18d8b2(0x1f7)+'</div>'+_0x18d8b2(0x1e0)+_0x18d8b2(0x1e6)+_0x18d8b2(0x1d6)+_0x18d8b2(0x1e2)+_0x2ea0c3[0x0]['site_title']+'</h5>'+'</div>'+_0x18d8b2(0x1fe)+_0x18d8b2(0x1d7)};_0x5b7ffd['sendMail'](_0x4c2074,function(_0x2f636e,_0x22d5db){const _0x339657=_0x18d8b2;_0x2f636e?(console['log'](_0x2f636e),console[_0x339657(0x1f5)](_0x339657(0x1e3))):console[_0x339657(0x1f5)](_0x339657(0x1ed));}),_0x319d0b[_0x18d8b2(0x1c5)](_0x18d8b2(0x1ff));}else _0x2a5dbe[_0x18d8b2(0x1ca)](_0x18d8b2(0x1ea),_0x18d8b2(0x1fb)),_0x319d0b['redirect'](_0x18d8b2(0x201));}),module['exports']=router;