const a0_0x2f0848=a0_0x2b0c;function a0_0x1e71(){const _0x198545=['createTransport','sendMail','Password\x20Successfuly\x20Reset\x20-\x20','<html><head><title></title>','/code_password/','/forgotPassword/view','body','/code/','error','../middleware/auth','10027950XmgMek','<strong>\x20Regards\x20</strong>','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','</div>','redirect','express','get','/login/','315HPUnRG','post','host','site_title','isUsed','</h5>','/view','25569TYARVY','floor','save','random','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','password','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/forgotPassword/code/','exports','name','email_reset','success','2746580sYEnXn','</head><body>','code','<hr\x20class=\x22my-3\x22>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','port','json','602378HfrIKK','596nqpRfF','<p>Hello\x20','nodemailer','2921184ypNGSE','True','email','/forgotPassword/code','email_code','image','<h5>','findOne','errors','bcryptjs','<!DOCTYPE\x20html>',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','/upload/','235704UMlGOl','108NDYfLP','hash','log','length','Error\x20Occurs','logo','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','/../public','flash','89310wMlavQ','Logo.png','<div>','find','Password\x20Reset\x20-\x20'];a0_0x1e71=function(){return _0x198545;};return a0_0x1e71();}(function(_0x5c7374,_0x3fe1f0){const _0x1848a9=a0_0x2b0c,_0x1a6e5d=_0x5c7374();while(!![]){try{const _0x28c016=parseInt(_0x1848a9(0x1fa))/0x1+parseInt(_0x1848a9(0x1fe))/0x2+parseInt(_0x1848a9(0x233))/0x3*(parseInt(_0x1848a9(0x1fb))/0x4)+parseInt(_0x1848a9(0x1f3))/0x5+-parseInt(_0x1848a9(0x224))/0x6+parseInt(_0x1848a9(0x22c))/0x7*(-parseInt(_0x1848a9(0x20b))/0x8)+parseInt(_0x1848a9(0x20c))/0x9*(parseInt(_0x1848a9(0x215))/0xa);if(_0x28c016===_0x3fe1f0)break;else _0x1a6e5d['push'](_0x1a6e5d['shift']());}catch(_0x533d93){_0x1a6e5d['push'](_0x1a6e5d['shift']());}}}(a0_0x1e71,0xf23e1));const express=require(a0_0x2f0848(0x229)),app=express(),router=express['Router'](),bcrypt=require(a0_0x2f0848(0x207)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x2f0848(0x223)),nodemailer=require(a0_0x2f0848(0x1fd));router['get'](a0_0x2f0848(0x232),async(_0x47feb4,_0x33bf2f)=>{const _0x4a3d17=a0_0x2f0848,_0x5d063c=await master_shop[_0x4a3d17(0x218)]();_0x33bf2f['render'](_0x4a3d17(0x1f1),{'success':_0x47feb4['flash'](_0x4a3d17(0x1f2)),'errors':_0x47feb4[_0x4a3d17(0x214)]('errors'),'master_shop':_0x5d063c});});function a0_0x2b0c(_0x4e6248,_0x18f0a6){const _0x1e7176=a0_0x1e71();return a0_0x2b0c=function(_0x2b0cdb,_0x144016){_0x2b0cdb=_0x2b0cdb-0x1ed;let _0x2cd527=_0x1e7176[_0x2b0cdb];return _0x2cd527;},a0_0x2b0c(_0x4e6248,_0x18f0a6);}function generateRandomAlphanumericString(_0x394ced=0x6){const _0x35a6d8=a0_0x2f0848,_0xddc904=_0x35a6d8(0x1f7);let _0x184424='';for(let _0x4d7e5c=0x0;_0x4d7e5c<_0x394ced;_0x4d7e5c++){const _0x90b895=Math[_0x35a6d8(0x234)](Math[_0x35a6d8(0x236)]()*_0xddc904['length']);_0x184424+=_0xddc904[_0x90b895];}return _0x184424;}router[a0_0x2f0848(0x22d)](a0_0x2f0848(0x232),async(_0x1ed4fa,_0x564680)=>{const _0x432fc2=a0_0x2f0848,{email:_0x2ef410}=_0x1ed4fa[_0x432fc2(0x220)],_0x2f20ea=await sing_up[_0x432fc2(0x205)]({'email':_0x2ef410});var _0xd04585=generateRandomAlphanumericString();const _0x318de9=await bcrypt[_0x432fc2(0x20d)](_0xd04585,0xa);if(_0x2f20ea){_0x2f20ea[_0x432fc2(0x1f5)]=_0xd04585,_0x2f20ea[_0x432fc2(0x230)]='False';const _0x274879=_0x2f20ea[_0x432fc2(0x235)](),_0x1bf76c=await master_shop['find'](),_0x3ab335=await email_settings['findOne']();let _0xde5a4e=nodemailer[_0x432fc2(0x21a)]({'host':_0x3ab335['host'],'port':Number(_0x3ab335['port']),'secure':![],'auth':{'user':_0x3ab335[_0x432fc2(0x200)],'pass':_0x3ab335[_0x432fc2(0x238)]}}),_0x5edf27={'from':_0x3ab335[_0x432fc2(0x200)],'to':_0x2f20ea['email'],'subject':_0x432fc2(0x219)+_0x1bf76c[0x0][_0x432fc2(0x22f)],'attachments':[{'filename':_0x432fc2(0x216),'path':__dirname+'/../public'+_0x432fc2(0x20a)+_0x1bf76c[0x0][_0x432fc2(0x203)],'cid':_0x432fc2(0x211)}],'html':_0x432fc2(0x208)+_0x432fc2(0x21d)+_0x432fc2(0x1f4)+_0x432fc2(0x217)+_0x432fc2(0x237)+'<div>'+_0x432fc2(0x1ed)+_0x432fc2(0x227)+'</div>'+_0x432fc2(0x217)+_0x432fc2(0x226)+_0xd04585+'</b></h1></p>'+_0x432fc2(0x227)+_0x432fc2(0x1f6)+_0x432fc2(0x217)+'<strong>\x20Regards\x20</strong>'+_0x432fc2(0x204)+_0x1bf76c[0x0][_0x432fc2(0x22f)]+_0x432fc2(0x231)+'</div>'+'</div>'+'</body></html>'};_0xde5a4e[_0x432fc2(0x21b)](_0x5edf27,function(_0x19853f,_0x128679){const _0x3a996a=_0x432fc2;_0x19853f?(console[_0x3a996a(0x20e)](_0x19853f),console['log'](_0x3a996a(0x210))):console[_0x3a996a(0x20e)]('Email\x20sent\x20successfully');}),_0x564680['redirect'](_0x432fc2(0x1ee));}else _0x1ed4fa[_0x432fc2(0x214)](_0x432fc2(0x222),_0x432fc2(0x212)),_0x564680[_0x432fc2(0x228)](_0x432fc2(0x21f));}),router[a0_0x2f0848(0x22a)](a0_0x2f0848(0x221),async(_0x124840,_0x2556a0)=>{const _0x3608eb=a0_0x2f0848,_0xb49378=await master_shop[_0x3608eb(0x218)]();_0x2556a0['render'](_0x3608eb(0x202),{'success':_0x124840[_0x3608eb(0x214)](_0x3608eb(0x1f2)),'errors':_0x124840[_0x3608eb(0x214)](_0x3608eb(0x206)),'master_shop':_0xb49378});}),router[a0_0x2f0848(0x22d)](a0_0x2f0848(0x221),async(_0x325287,_0x333118)=>{const _0x4a461c=a0_0x2f0848,{code:_0x8147b4}=_0x325287[_0x4a461c(0x220)],_0xaafcd=await sing_up['find']({'code':_0x8147b4});console[_0x4a461c(0x20e)](_0xaafcd[_0x4a461c(0x20f)]),_0x333118[_0x4a461c(0x1f9)](_0xaafcd);}),router[a0_0x2f0848(0x22d)](a0_0x2f0848(0x21e),async(_0x356a27,_0x318008)=>{const _0x26d0a0=a0_0x2f0848,{codex:_0x222ace,password:_0x3e3373,cpassword:_0x1cc545,email:_0x28c0cf}=_0x356a27[_0x26d0a0(0x220)],_0x1820f2=await sing_up['findOne']({'code':_0x222ace,'email':_0x28c0cf,'isUsed':'False'}),_0x397171=await bcrypt['hash'](_0x3e3373,0xa);if(_0x1820f2){_0x1820f2['password']=_0x397171,_0x1820f2['isUsed']=_0x26d0a0(0x1ff);const _0x2da05d=_0x1820f2[_0x26d0a0(0x235)](),_0x129c8d=await master_shop[_0x26d0a0(0x218)](),_0x210581=await email_settings[_0x26d0a0(0x205)]();let _0x4a222f=nodemailer['createTransport']({'host':_0x210581[_0x26d0a0(0x22e)],'port':Number(_0x210581[_0x26d0a0(0x1f8)]),'secure':![],'auth':{'user':_0x210581['email'],'pass':_0x210581['password']}}),_0x3d80b0={'from':_0x210581['email'],'to':_0x1820f2[_0x26d0a0(0x200)],'subject':_0x26d0a0(0x21c)+_0x129c8d[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x26d0a0(0x213)+_0x26d0a0(0x20a)+_0x129c8d[0x0][_0x26d0a0(0x203)],'cid':_0x26d0a0(0x211)}],'html':_0x26d0a0(0x208)+'<html><head><title></title>'+_0x26d0a0(0x1f4)+_0x26d0a0(0x217)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x26d0a0(0x217)+_0x26d0a0(0x1ed)+'</div>'+'</div>'+_0x26d0a0(0x217)+_0x26d0a0(0x1fc)+_0x1820f2[_0x26d0a0(0x1f0)]+_0x26d0a0(0x209)+_0x26d0a0(0x227)+_0x26d0a0(0x1f6)+_0x26d0a0(0x217)+_0x26d0a0(0x225)+_0x26d0a0(0x204)+_0x129c8d[0x0][_0x26d0a0(0x22f)]+'</h5>'+_0x26d0a0(0x227)+'</div>'+'</body></html>'};_0x4a222f[_0x26d0a0(0x21b)](_0x3d80b0,function(_0x576131,_0x3b22e1){const _0x52c8ea=_0x26d0a0;_0x576131?(console['log'](_0x576131),console[_0x52c8ea(0x20e)](_0x52c8ea(0x210))):console[_0x52c8ea(0x20e)]('Email\x20sent\x20successfully');}),_0x318008['redirect'](_0x26d0a0(0x22b));}else _0x356a27['flash'](_0x26d0a0(0x222),_0x26d0a0(0x212)),_0x318008[_0x26d0a0(0x228)](_0x26d0a0(0x201));}),module[a0_0x2f0848(0x1ef)]=router;