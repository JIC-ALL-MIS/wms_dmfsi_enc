const a0_0x27cd0f=a0_0x5795;(function(_0x56c215,_0x3cb1df){const _0x272823=a0_0x5795,_0x417dd6=_0x56c215();while(!![]){try{const _0xe14f40=parseInt(_0x272823(0xd5))/0x1+-parseInt(_0x272823(0xdb))/0x2+-parseInt(_0x272823(0xd8))/0x3+-parseInt(_0x272823(0xba))/0x4*(parseInt(_0x272823(0xe0))/0x5)+-parseInt(_0x272823(0xb0))/0x6+parseInt(_0x272823(0xd4))/0x7+parseInt(_0x272823(0xd1))/0x8;if(_0xe14f40===_0x3cb1df)break;else _0x417dd6['push'](_0x417dd6['shift']());}catch(_0x329274){_0x417dd6['push'](_0x417dd6['shift']());}}}(a0_0x4f2a,0xe6469));const express=require(a0_0x27cd0f(0xdd)),app=express(),router=express['Router'](),bcrypt=require(a0_0x27cd0f(0xb1)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x27cd0f(0xf0)),auth=require(a0_0x27cd0f(0xbe)),nodemailer=require('nodemailer');function a0_0x4f2a(){const _0x1b2e5b=['errors','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','/forgotPassword/view','success','False','image','../models/all_models','</div>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','json','isUsed','/login/','site_title','redirect','</body></html>','9525624ArYdYO','bcryptjs','get','<hr\x20class=\x22my-3\x22>','/upload/','hash','createTransport','Logo.png','/forgotPassword/code','name','4mpsYtS','<div>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Error\x20Occurs','../middleware/auth','log','/forgotPassword/code/','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','findOne','password','<strong>\x20Regards\x20</strong>','email_reset','post','email','/../public','body','<!DOCTYPE\x20html>','/code/',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','/code_password/','logo','find','Email\x20sent\x20successfully','26542440QMoppV','error','render','11759482WLogmC','1732800cxGniq','port','</b></h1></p>','4130499mNYlcn','</h5>','/view','3359008gxsmLK','host','express','floor','Password\x20Reset\x20-\x20','5716905ZFFntx','True','<h5>','sendMail','</head><body>','flash','<html><head><title></title>','length','save','exports'];a0_0x4f2a=function(){return _0x1b2e5b;};return a0_0x4f2a();}function a0_0x5795(_0x349de0,_0x5924e4){const _0x4f2a30=a0_0x4f2a();return a0_0x5795=function(_0x579524,_0x1aa8f9){_0x579524=_0x579524-0xae;let _0xfa3d70=_0x4f2a30[_0x579524];return _0xfa3d70;},a0_0x5795(_0x349de0,_0x5924e4);}router[a0_0x27cd0f(0xb2)](a0_0x27cd0f(0xda),async(_0x5aab0f,_0x5c3423)=>{const _0x74e7d0=a0_0x27cd0f,_0x37cea9=await master_shop[_0x74e7d0(0xcf)]();_0x5c3423['render'](_0x74e7d0(0xc5),{'success':_0x5aab0f[_0x74e7d0(0xe5)]('success'),'errors':_0x5aab0f[_0x74e7d0(0xe5)](_0x74e7d0(0xea)),'master_shop':_0x37cea9});});function generateRandomAlphanumericString(_0x3ca7c6=0x6){const _0x5152ef=a0_0x27cd0f,_0x1696f8='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x265132='';for(let _0x3980fb=0x0;_0x3980fb<_0x3ca7c6;_0x3980fb++){const _0x5d13d6=Math[_0x5152ef(0xde)](Math['random']()*_0x1696f8[_0x5152ef(0xe7)]);_0x265132+=_0x1696f8[_0x5d13d6];}return _0x265132;}router['post']('/view',async(_0x535ee4,_0x535be0)=>{const _0x3b835d=a0_0x27cd0f,{email:_0x3d27b2}=_0x535ee4[_0x3b835d(0xc9)],_0x524dca=await sing_up[_0x3b835d(0xc2)]({'email':_0x3d27b2});var _0x5a9aa5=generateRandomAlphanumericString();const _0x5be2d5=await bcrypt[_0x3b835d(0xb5)](_0x5a9aa5,0xa);if(_0x524dca){_0x524dca['code']=_0x5a9aa5,_0x524dca[_0x3b835d(0xf4)]=_0x3b835d(0xee);const _0xa0fadc=_0x524dca[_0x3b835d(0xe8)](),_0x16d3fe=await master_shop[_0x3b835d(0xcf)](),_0x4ceeca=await email_settings[_0x3b835d(0xc2)]();let _0x1ec5d0=nodemailer[_0x3b835d(0xb6)]({'host':_0x4ceeca[_0x3b835d(0xdc)],'port':Number(_0x4ceeca['port']),'secure':![],'auth':{'user':_0x4ceeca[_0x3b835d(0xc7)],'pass':_0x4ceeca[_0x3b835d(0xc3)]}}),_0x12b84d={'from':_0x4ceeca['email'],'to':_0x524dca[_0x3b835d(0xc7)],'subject':_0x3b835d(0xdf)+_0x16d3fe[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x3b835d(0xb4)+_0x16d3fe[0x0][_0x3b835d(0xef)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x3b835d(0xe6)+_0x3b835d(0xe4)+_0x3b835d(0xbb)+_0x3b835d(0xbc)+_0x3b835d(0xbb)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x3b835d(0xf1)+_0x3b835d(0xf1)+_0x3b835d(0xbb)+_0x3b835d(0xeb)+_0x5a9aa5+_0x3b835d(0xd7)+_0x3b835d(0xf1)+_0x3b835d(0xb3)+_0x3b835d(0xbb)+'<strong>\x20Regards\x20</strong>'+_0x3b835d(0xe2)+_0x16d3fe[0x0]['site_title']+_0x3b835d(0xd9)+_0x3b835d(0xf1)+_0x3b835d(0xf1)+_0x3b835d(0xaf)};_0x1ec5d0['sendMail'](_0x12b84d,function(_0x31dd06,_0x255260){const _0x1f17dc=_0x3b835d;_0x31dd06?(console[_0x1f17dc(0xbf)](_0x31dd06),console['log'](_0x1f17dc(0xbd))):console[_0x1f17dc(0xbf)](_0x1f17dc(0xd0));}),_0x535be0['redirect'](_0x3b835d(0xc0));}else _0x535ee4['flash'](_0x3b835d(0xd2),_0x3b835d(0xc1)),_0x535be0[_0x3b835d(0xae)](_0x3b835d(0xec));}),router[a0_0x27cd0f(0xb2)](a0_0x27cd0f(0xcb),async(_0xa1e085,_0x542dc5)=>{const _0x213afe=a0_0x27cd0f,_0x2c50e1=await master_shop[_0x213afe(0xcf)]();_0x542dc5[_0x213afe(0xd3)]('email_code',{'success':_0xa1e085[_0x213afe(0xe5)](_0x213afe(0xed)),'errors':_0xa1e085[_0x213afe(0xe5)](_0x213afe(0xea)),'master_shop':_0x2c50e1});}),router[a0_0x27cd0f(0xc6)](a0_0x27cd0f(0xcb),async(_0x2d416c,_0x16fd30)=>{const _0x2b47cb=a0_0x27cd0f,{code:_0x35689b}=_0x2d416c[_0x2b47cb(0xc9)],_0x527d2f=await sing_up[_0x2b47cb(0xcf)]({'code':_0x35689b});console[_0x2b47cb(0xbf)](_0x527d2f[_0x2b47cb(0xe7)]),_0x16fd30[_0x2b47cb(0xf3)](_0x527d2f);}),router[a0_0x27cd0f(0xc6)](a0_0x27cd0f(0xcd),async(_0x2a8b12,_0x211f18)=>{const _0x2b60cb=a0_0x27cd0f,{codex:_0x8bb0db,password:_0x4666f9,cpassword:_0xa4f566,email:_0x4f6967}=_0x2a8b12['body'],_0xa50841=await sing_up[_0x2b60cb(0xc2)]({'code':_0x8bb0db,'email':_0x4f6967,'isUsed':_0x2b60cb(0xee)}),_0x9253f8=await bcrypt[_0x2b60cb(0xb5)](_0x4666f9,0xa);if(_0xa50841){_0xa50841['password']=_0x9253f8,_0xa50841[_0x2b60cb(0xf4)]=_0x2b60cb(0xe1);const _0x2d8bf8=_0xa50841['save'](),_0x321be7=await master_shop['find'](),_0x3281ca=await email_settings['findOne']();let _0x3ca5f9=nodemailer[_0x2b60cb(0xb6)]({'host':_0x3281ca[_0x2b60cb(0xdc)],'port':Number(_0x3281ca[_0x2b60cb(0xd6)]),'secure':![],'auth':{'user':_0x3281ca['email'],'pass':_0x3281ca[_0x2b60cb(0xc3)]}}),_0x4bb208={'from':_0x3281ca[_0x2b60cb(0xc7)],'to':_0xa50841[_0x2b60cb(0xc7)],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x321be7[0x0][_0x2b60cb(0xf6)],'attachments':[{'filename':_0x2b60cb(0xb7),'path':__dirname+_0x2b60cb(0xc8)+'/upload/'+_0x321be7[0x0][_0x2b60cb(0xef)],'cid':_0x2b60cb(0xce)}],'html':_0x2b60cb(0xca)+_0x2b60cb(0xe6)+_0x2b60cb(0xe4)+_0x2b60cb(0xbb)+_0x2b60cb(0xbc)+'<div>'+_0x2b60cb(0xf2)+_0x2b60cb(0xf1)+'</div>'+_0x2b60cb(0xbb)+'<p>Hello\x20'+_0xa50841[_0x2b60cb(0xb9)]+_0x2b60cb(0xcc)+'</div>'+_0x2b60cb(0xb3)+'<div>'+_0x2b60cb(0xc4)+_0x2b60cb(0xe2)+_0x321be7[0x0][_0x2b60cb(0xf6)]+_0x2b60cb(0xd9)+_0x2b60cb(0xf1)+_0x2b60cb(0xf1)+_0x2b60cb(0xaf)};_0x3ca5f9[_0x2b60cb(0xe3)](_0x4bb208,function(_0x5816d6,_0x3d820c){const _0x503d0d=_0x2b60cb;_0x5816d6?(console[_0x503d0d(0xbf)](_0x5816d6),console['log']('Error\x20Occurs')):console[_0x503d0d(0xbf)](_0x503d0d(0xd0));}),_0x211f18[_0x2b60cb(0xae)](_0x2b60cb(0xf5));}else _0x2a8b12[_0x2b60cb(0xe5)](_0x2b60cb(0xd2),_0x2b60cb(0xc1)),_0x211f18[_0x2b60cb(0xae)](_0x2b60cb(0xb8));}),module[a0_0x27cd0f(0xe9)]=router;