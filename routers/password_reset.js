const a0_0x6f3c20=a0_0x118e;(function(_0x148115,_0x48e8d9){const _0x175ef7=a0_0x118e,_0x4588ed=_0x148115();while(!![]){try{const _0x3b4bed=-parseInt(_0x175ef7(0x14e))/0x1+parseInt(_0x175ef7(0x144))/0x2+parseInt(_0x175ef7(0x161))/0x3+-parseInt(_0x175ef7(0x16c))/0x4+-parseInt(_0x175ef7(0x172))/0x5*(parseInt(_0x175ef7(0x131))/0x6)+-parseInt(_0x175ef7(0x176))/0x7+parseInt(_0x175ef7(0x14a))/0x8;if(_0x3b4bed===_0x48e8d9)break;else _0x4588ed['push'](_0x4588ed['shift']());}catch(_0x1ffb7e){_0x4588ed['push'](_0x4588ed['shift']());}}}(a0_0x4662,0x2f065));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x6f3c20(0x13c)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x6f3c20(0x16b)),auth=require('../middleware/auth'),nodemailer=require(a0_0x6f3c20(0x15e));function a0_0x4662(){const _0x3f5623=['log','False','floor','/forgotPassword/view','password','bcryptjs','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','</head><body>','post','/../public','<p>Hello\x20','/forgotPassword/code','sendMail','184BJGuYW','code','save','</div>','image','email_reset','2945848FptzxS','/view','/code_password/','site_title','117573DzmqlF','Error\x20Occurs','Password\x20Successfuly\x20Reset\x20-\x20','port','render','Email\x20sent\x20successfully','Password\x20Reset\x20-\x20','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<h5>','</body></html>','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','body','flash',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','Logo.png','email_code','nodemailer','redirect','/login/','1024716tMVoMV','createTransport','findOne','success','host','True','name','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','email','<div>','../models/all_models','95348erhbnS','random','/code/','</h5>','errors','exports','1556215fPDcTd','error','isUsed','/upload/','452403rgkVbP','get','</b></h1></p>','<hr\x20class=\x22my-3\x22>','<strong>\x20Regards\x20</strong>','6AflCrC','<html><head><title></title>','hash','logo','length','find'];a0_0x4662=function(){return _0x3f5623;};return a0_0x4662();}router[a0_0x6f3c20(0x177)]('/view',async(_0x5c6863,_0x7f1717)=>{const _0x3ea2f0=a0_0x6f3c20,_0x4427c4=await master_shop[_0x3ea2f0(0x136)]();_0x7f1717['render'](_0x3ea2f0(0x149),{'success':_0x5c6863[_0x3ea2f0(0x15a)]('success'),'errors':_0x5c6863[_0x3ea2f0(0x15a)](_0x3ea2f0(0x170)),'master_shop':_0x4427c4});});function generateRandomAlphanumericString(_0x4f0b7=0x6){const _0x1c93d7=a0_0x6f3c20,_0x4f8d0c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x498756='';for(let _0x424ac9=0x0;_0x424ac9<_0x4f0b7;_0x424ac9++){const _0x3380e6=Math[_0x1c93d7(0x139)](Math[_0x1c93d7(0x16d)]()*_0x4f8d0c[_0x1c93d7(0x135)]);_0x498756+=_0x4f8d0c[_0x3380e6];}return _0x498756;}function a0_0x118e(_0x4b9088,_0x2e0273){const _0x46621f=a0_0x4662();return a0_0x118e=function(_0x118e09,_0x14e879){_0x118e09=_0x118e09-0x130;let _0x1c86b8=_0x46621f[_0x118e09];return _0x1c86b8;},a0_0x118e(_0x4b9088,_0x2e0273);}router[a0_0x6f3c20(0x13f)](a0_0x6f3c20(0x14b),async(_0x24a718,_0x312b53)=>{const _0x193e40=a0_0x6f3c20,{email:_0x47eac4}=_0x24a718[_0x193e40(0x159)],_0x5cbca6=await sing_up['findOne']({'email':_0x47eac4});var _0x13e3d9=generateRandomAlphanumericString();const _0x175654=await bcrypt[_0x193e40(0x133)](_0x13e3d9,0xa);if(_0x5cbca6){_0x5cbca6[_0x193e40(0x145)]=_0x13e3d9,_0x5cbca6['isUsed']=_0x193e40(0x138);const _0x3efdce=_0x5cbca6[_0x193e40(0x146)](),_0x2e5547=await master_shop[_0x193e40(0x136)](),_0x91a7b3=await email_settings[_0x193e40(0x163)]();let _0x4def1d=nodemailer[_0x193e40(0x162)]({'host':_0x91a7b3['host'],'port':Number(_0x91a7b3[_0x193e40(0x151)]),'secure':![],'auth':{'user':_0x91a7b3[_0x193e40(0x169)],'pass':_0x91a7b3[_0x193e40(0x13b)]}}),_0xf6b886={'from':_0x91a7b3[_0x193e40(0x169)],'to':_0x5cbca6[_0x193e40(0x169)],'subject':_0x193e40(0x154)+_0x2e5547[0x0][_0x193e40(0x14d)],'attachments':[{'filename':_0x193e40(0x15c),'path':__dirname+_0x193e40(0x140)+_0x193e40(0x175)+_0x2e5547[0x0]['image'],'cid':_0x193e40(0x134)}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+'</head><body>'+_0x193e40(0x16a)+_0x193e40(0x155)+_0x193e40(0x16a)+_0x193e40(0x168)+_0x193e40(0x147)+_0x193e40(0x147)+_0x193e40(0x16a)+_0x193e40(0x158)+_0x13e3d9+_0x193e40(0x178)+_0x193e40(0x147)+_0x193e40(0x179)+_0x193e40(0x16a)+_0x193e40(0x130)+_0x193e40(0x156)+_0x2e5547[0x0][_0x193e40(0x14d)]+_0x193e40(0x16f)+_0x193e40(0x147)+_0x193e40(0x147)+_0x193e40(0x157)};_0x4def1d[_0x193e40(0x143)](_0xf6b886,function(_0x436b24,_0x63b26b){const _0x6f4534=_0x193e40;_0x436b24?(console[_0x6f4534(0x137)](_0x436b24),console[_0x6f4534(0x137)]('Error\x20Occurs')):console[_0x6f4534(0x137)](_0x6f4534(0x153));}),_0x312b53[_0x193e40(0x15f)]('/forgotPassword/code/');}else _0x24a718[_0x193e40(0x15a)](_0x193e40(0x173),_0x193e40(0x13d)),_0x312b53[_0x193e40(0x15f)](_0x193e40(0x13a));}),router[a0_0x6f3c20(0x177)]('/code/',async(_0x4cefc8,_0x287ef1)=>{const _0x3e1b16=a0_0x6f3c20,_0x5b745d=await master_shop[_0x3e1b16(0x136)]();_0x287ef1[_0x3e1b16(0x152)](_0x3e1b16(0x15d),{'success':_0x4cefc8[_0x3e1b16(0x15a)](_0x3e1b16(0x164)),'errors':_0x4cefc8[_0x3e1b16(0x15a)](_0x3e1b16(0x170)),'master_shop':_0x5b745d});}),router[a0_0x6f3c20(0x13f)](a0_0x6f3c20(0x16e),async(_0x9bed82,_0x37f70d)=>{const _0x4fd38c=a0_0x6f3c20,{code:_0x1494ee}=_0x9bed82[_0x4fd38c(0x159)],_0xb67292=await sing_up[_0x4fd38c(0x136)]({'code':_0x1494ee});console[_0x4fd38c(0x137)](_0xb67292[_0x4fd38c(0x135)]),_0x37f70d['json'](_0xb67292);}),router[a0_0x6f3c20(0x13f)](a0_0x6f3c20(0x14c),async(_0x39aca3,_0x2d468b)=>{const _0x4096d3=a0_0x6f3c20,{codex:_0x140467,password:_0xb7340e,cpassword:_0x1de958,email:_0xa78c4b}=_0x39aca3[_0x4096d3(0x159)],_0x4b56f4=await sing_up[_0x4096d3(0x163)]({'code':_0x140467,'email':_0xa78c4b,'isUsed':_0x4096d3(0x138)}),_0x1b20c8=await bcrypt['hash'](_0xb7340e,0xa);if(_0x4b56f4){_0x4b56f4[_0x4096d3(0x13b)]=_0x1b20c8,_0x4b56f4[_0x4096d3(0x174)]=_0x4096d3(0x166);const _0x3c62be=_0x4b56f4[_0x4096d3(0x146)](),_0x78afec=await master_shop[_0x4096d3(0x136)](),_0x211878=await email_settings['findOne']();let _0xdb560=nodemailer[_0x4096d3(0x162)]({'host':_0x211878[_0x4096d3(0x165)],'port':Number(_0x211878['port']),'secure':![],'auth':{'user':_0x211878[_0x4096d3(0x169)],'pass':_0x211878[_0x4096d3(0x13b)]}}),_0x356f33={'from':_0x211878[_0x4096d3(0x169)],'to':_0x4b56f4[_0x4096d3(0x169)],'subject':_0x4096d3(0x150)+_0x78afec[0x0][_0x4096d3(0x14d)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x4096d3(0x175)+_0x78afec[0x0][_0x4096d3(0x148)],'cid':_0x4096d3(0x134)}],'html':'<!DOCTYPE\x20html>'+_0x4096d3(0x132)+_0x4096d3(0x13e)+_0x4096d3(0x16a)+_0x4096d3(0x155)+_0x4096d3(0x16a)+_0x4096d3(0x168)+_0x4096d3(0x147)+_0x4096d3(0x147)+_0x4096d3(0x16a)+_0x4096d3(0x141)+_0x4b56f4[_0x4096d3(0x167)]+_0x4096d3(0x15b)+_0x4096d3(0x147)+'<hr\x20class=\x22my-3\x22>'+_0x4096d3(0x16a)+_0x4096d3(0x130)+_0x4096d3(0x156)+_0x78afec[0x0][_0x4096d3(0x14d)]+_0x4096d3(0x16f)+_0x4096d3(0x147)+_0x4096d3(0x147)+'</body></html>'};_0xdb560[_0x4096d3(0x143)](_0x356f33,function(_0x2a3616,_0x59a2c){const _0x36dbf2=_0x4096d3;_0x2a3616?(console[_0x36dbf2(0x137)](_0x2a3616),console[_0x36dbf2(0x137)](_0x36dbf2(0x14f))):console[_0x36dbf2(0x137)](_0x36dbf2(0x153));}),_0x2d468b[_0x4096d3(0x15f)](_0x4096d3(0x160));}else _0x39aca3[_0x4096d3(0x15a)](_0x4096d3(0x173),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x2d468b[_0x4096d3(0x15f)](_0x4096d3(0x142));}),module[a0_0x6f3c20(0x171)]=router;