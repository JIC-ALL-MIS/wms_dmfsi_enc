const a0_0x155ef5=a0_0x190a;(function(_0x52c826,_0x3d7ae2){const _0x7e01dc=a0_0x190a,_0x398401=_0x52c826();while(!![]){try{const _0x4a7f27=parseInt(_0x7e01dc(0xcf))/0x1+parseInt(_0x7e01dc(0xd1))/0x2*(parseInt(_0x7e01dc(0xc1))/0x3)+parseInt(_0x7e01dc(0xbd))/0x4*(-parseInt(_0x7e01dc(0xc0))/0x5)+parseInt(_0x7e01dc(0xbc))/0x6*(parseInt(_0x7e01dc(0xe0))/0x7)+-parseInt(_0x7e01dc(0xe4))/0x8+parseInt(_0x7e01dc(0xda))/0x9+-parseInt(_0x7e01dc(0xf9))/0xa*(parseInt(_0x7e01dc(0x104))/0xb);if(_0x4a7f27===_0x3d7ae2)break;else _0x398401['push'](_0x398401['shift']());}catch(_0x5c4570){_0x398401['push'](_0x398401['shift']());}}}(a0_0x5a97,0xc935e));function a0_0x5a97(){const _0x419032=['express','11dVYKQr','host','996vVxRyc','536kKfgfB','get','</head><body>','24695gqGVin','9vgtkui','random','json','sendMail','/upload/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/../public','<strong>\x20Regards\x20</strong>','/view','flash','<html><head><title></title>','<p>Hello\x20','log','find','1437600UGmPNQ','site_title','491256SbSOFJ','<div>','hash','<hr\x20class=\x22my-3\x22>','save','body','Email\x20sent\x20successfully','True','findOne','12348360UFdDwI','bcryptjs','Password\x20Successfuly\x20Reset\x20-\x20','</div>','error','email_reset','33656pJOvbB','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','<h5>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','2592168HbLxfK','isUsed','email','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','False','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','../models/all_models','Logo.png','port','redirect','post','</h5>','errors','nodemailer','Router','name','<!DOCTYPE\x20html>','success','Password\x20Reset\x20-\x20','/forgotPassword/code','email_code','25346470FuZiKw','length','/code/','Error\x20Occurs','exports','</b></h1></p>','floor','/forgotPassword/code/','</body></html>','render'];a0_0x5a97=function(){return _0x419032;};return a0_0x5a97();}function a0_0x190a(_0x53c318,_0x50951c){const _0x5a9745=a0_0x5a97();return a0_0x190a=function(_0x190a2c,_0x4599fc){_0x190a2c=_0x190a2c-0xbc;let _0x20bee2=_0x5a9745[_0x190a2c];return _0x20bee2;},a0_0x190a(_0x53c318,_0x50951c);}const express=require(a0_0x155ef5(0x103)),app=express(),router=express[a0_0x155ef5(0xf2)](),bcrypt=require(a0_0x155ef5(0xdb)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x155ef5(0xea)),auth=require('../middleware/auth'),nodemailer=require(a0_0x155ef5(0xf1));router['get'](a0_0x155ef5(0xc9),async(_0x24bbbf,_0x216398)=>{const _0x442806=a0_0x155ef5,_0x2f1e01=await master_shop['find']();_0x216398[_0x442806(0x102)](_0x442806(0xdf),{'success':_0x24bbbf[_0x442806(0xca)](_0x442806(0xf5)),'errors':_0x24bbbf['flash'](_0x442806(0xf0)),'master_shop':_0x2f1e01});});function generateRandomAlphanumericString(_0x3b3436=0x6){const _0x18e583=a0_0x155ef5,_0x2197a3=_0x18e583(0xe7);let _0x3ae38b='';for(let _0x50797b=0x0;_0x50797b<_0x3b3436;_0x50797b++){const _0x1e9530=Math[_0x18e583(0xff)](Math[_0x18e583(0xc2)]()*_0x2197a3[_0x18e583(0xfa)]);_0x3ae38b+=_0x2197a3[_0x1e9530];}return _0x3ae38b;}router[a0_0x155ef5(0xee)](a0_0x155ef5(0xc9),async(_0xad4a94,_0x17f51b)=>{const _0x380641=a0_0x155ef5,{email:_0x580f9e}=_0xad4a94[_0x380641(0xd6)],_0x129c2b=await sing_up[_0x380641(0xd9)]({'email':_0x580f9e});var _0x4f9edd=generateRandomAlphanumericString();const _0x55c524=await bcrypt[_0x380641(0xd3)](_0x4f9edd,0xa);if(_0x129c2b){_0x129c2b['code']=_0x4f9edd,_0x129c2b[_0x380641(0xe5)]=_0x380641(0xe8);const _0x44ed27=_0x129c2b[_0x380641(0xd5)](),_0xc6bdff=await master_shop[_0x380641(0xce)](),_0x32e56e=await email_settings[_0x380641(0xd9)]();let _0x2704a3=nodemailer['createTransport']({'host':_0x32e56e[_0x380641(0x105)],'port':Number(_0x32e56e[_0x380641(0xec)]),'secure':![],'auth':{'user':_0x32e56e[_0x380641(0xe6)],'pass':_0x32e56e['password']}}),_0x2cc57d={'from':_0x32e56e['email'],'to':_0x129c2b[_0x380641(0xe6)],'subject':_0x380641(0xf6)+_0xc6bdff[0x0]['site_title'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x380641(0xc7)+'/upload/'+_0xc6bdff[0x0]['image'],'cid':'logo'}],'html':_0x380641(0xf4)+_0x380641(0xcb)+'</head><body>'+_0x380641(0xd2)+_0x380641(0xc6)+_0x380641(0xd2)+_0x380641(0xe9)+_0x380641(0xdd)+_0x380641(0xdd)+'<div>'+_0x380641(0xe1)+_0x4f9edd+_0x380641(0xfe)+_0x380641(0xdd)+_0x380641(0xd4)+_0x380641(0xd2)+_0x380641(0xc8)+_0x380641(0xe2)+_0xc6bdff[0x0]['site_title']+_0x380641(0xef)+_0x380641(0xdd)+'</div>'+_0x380641(0x101)};_0x2704a3[_0x380641(0xc4)](_0x2cc57d,function(_0x58af2e,_0x2c7ed9){const _0x3a9414=_0x380641;_0x58af2e?(console[_0x3a9414(0xcd)](_0x58af2e),console[_0x3a9414(0xcd)](_0x3a9414(0xfc))):console[_0x3a9414(0xcd)](_0x3a9414(0xd7));}),_0x17f51b[_0x380641(0xed)](_0x380641(0x100));}else _0xad4a94[_0x380641(0xca)]('error',_0x380641(0xe3)),_0x17f51b[_0x380641(0xed)]('/forgotPassword/view');}),router[a0_0x155ef5(0xbe)](a0_0x155ef5(0xfb),async(_0x5307c2,_0x855d68)=>{const _0x1f0a09=a0_0x155ef5,_0x116858=await master_shop[_0x1f0a09(0xce)]();_0x855d68[_0x1f0a09(0x102)](_0x1f0a09(0xf8),{'success':_0x5307c2[_0x1f0a09(0xca)](_0x1f0a09(0xf5)),'errors':_0x5307c2[_0x1f0a09(0xca)]('errors'),'master_shop':_0x116858});}),router[a0_0x155ef5(0xee)](a0_0x155ef5(0xfb),async(_0x42908e,_0x4e4b3e)=>{const _0x254bf1=a0_0x155ef5,{code:_0x3cd6ce}=_0x42908e[_0x254bf1(0xd6)],_0x541c1e=await sing_up[_0x254bf1(0xce)]({'code':_0x3cd6ce});console['log'](_0x541c1e['length']),_0x4e4b3e[_0x254bf1(0xc3)](_0x541c1e);}),router[a0_0x155ef5(0xee)]('/code_password/',async(_0x456872,_0x409743)=>{const _0x43b32f=a0_0x155ef5,{codex:_0x165b92,password:_0x313066,cpassword:_0x4a94d7,email:_0x43189a}=_0x456872[_0x43b32f(0xd6)],_0x3ad929=await sing_up[_0x43b32f(0xd9)]({'code':_0x165b92,'email':_0x43189a,'isUsed':_0x43b32f(0xe8)}),_0xfb1b8c=await bcrypt[_0x43b32f(0xd3)](_0x313066,0xa);if(_0x3ad929){_0x3ad929['password']=_0xfb1b8c,_0x3ad929['isUsed']=_0x43b32f(0xd8);const _0xbfb138=_0x3ad929[_0x43b32f(0xd5)](),_0x6e9721=await master_shop[_0x43b32f(0xce)](),_0x326cef=await email_settings[_0x43b32f(0xd9)]();let _0x4fd968=nodemailer['createTransport']({'host':_0x326cef['host'],'port':Number(_0x326cef[_0x43b32f(0xec)]),'secure':![],'auth':{'user':_0x326cef[_0x43b32f(0xe6)],'pass':_0x326cef['password']}}),_0x536fc8={'from':_0x326cef[_0x43b32f(0xe6)],'to':_0x3ad929[_0x43b32f(0xe6)],'subject':_0x43b32f(0xdc)+_0x6e9721[0x0][_0x43b32f(0xd0)],'attachments':[{'filename':_0x43b32f(0xeb),'path':__dirname+'/../public'+_0x43b32f(0xc5)+_0x6e9721[0x0]['image'],'cid':'logo'}],'html':_0x43b32f(0xf4)+_0x43b32f(0xcb)+_0x43b32f(0xbf)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x43b32f(0xd2)+_0x43b32f(0xe9)+'</div>'+_0x43b32f(0xdd)+_0x43b32f(0xd2)+_0x43b32f(0xcc)+_0x3ad929[_0x43b32f(0xf3)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x43b32f(0xd2)+_0x43b32f(0xc8)+_0x43b32f(0xe2)+_0x6e9721[0x0][_0x43b32f(0xd0)]+_0x43b32f(0xef)+_0x43b32f(0xdd)+'</div>'+_0x43b32f(0x101)};_0x4fd968[_0x43b32f(0xc4)](_0x536fc8,function(_0x1235d1,_0x158068){const _0x2b4dd8=_0x43b32f;_0x1235d1?(console[_0x2b4dd8(0xcd)](_0x1235d1),console[_0x2b4dd8(0xcd)](_0x2b4dd8(0xfc))):console[_0x2b4dd8(0xcd)]('Email\x20sent\x20successfully');}),_0x409743[_0x43b32f(0xed)]('/login/');}else _0x456872[_0x43b32f(0xca)](_0x43b32f(0xde),_0x43b32f(0xe3)),_0x409743[_0x43b32f(0xed)](_0x43b32f(0xf7));}),module[a0_0x155ef5(0xfd)]=router;