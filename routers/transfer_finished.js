function a0_0x5518(){var _0x408613=['</td>','params','random','back','to_room_name','/view','$product.from_room_name','Enabled','sendMail','edit_transfer_finished','<!DOCTYPE\x20html>','toString','Error\x20Occurs','Spanish','<h5>','forEach','to_invoice','</div>','getFullYear','/view/add_transfer','to_floorlevel','<html><head><title></title>','/CheckingWarehouse','FGSEmail','86246IIfNjQ','/transfer_finished/preview/','post','4291408LKVCvq','<span\x20style=\x22float:\x20right;\x22>','An\x20error\x20occurred.','$product_details.production_date','language','/barcode_scanner3','product_name','MaxStocks_data','Portuguese','QA\x20Warehouse','filter','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','_id','body','findOne','string','$product_details.maxPerUnit','English','TRFF-','$room','True','Transfer\x20Edit\x20Successfully','error','$date','getDate','maxPerUnit','from_room_name','An\x20error\x20occurred\x20while\x20saving\x20data.','3234852gKCWmH','map','status','$product_details.storage','English\x20(US)','<div>','\x20</h2>','image','date','MaxStocks_data2','\x20Order\x20Number\x20:\x20','bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','Transfer\x20Mail','$product_details.secondary_unit','invoice','site_title','then','$name','product_details','$product_details.type','role','$product_details.product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','slice','$product_details.pallet','json','</thead>','all','Transfer\x20Finalize\x20Successfully','Ambient','product_code','$product_details.maxProducts','Arabic','621156NnZTws','$product_details','from_bay','German','redirect','port','save','aggregate','$product_details.unit','product_date','Finished\x20Goods','/preview/:id','to_warehouse','padStart','/transfer_finished/view','nodemailer','$product_details.expiry_date','split','</tbody>','</tr>','French','render','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Arabic\x20(ae)','maxProducts','prod_name','1030818FTuacR','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','3621611ShqWaJ','</body></html>','Email\x20sent\x20successfully','$invoice','FROZEN\x20GOODS','$product_details.primary_code','$product_details._id','find','$product_details.level','Rack\x201','from_warehouse','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','from_room','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/view/:id','<table\x20style=\x22width:\x20100%\x20!important;\x22>','errors','from_prod_level','$product_details.bin','email','concat','$product_details.floorlevel','user','</head><body>','to_prod_level','../middleware/auth','Rack\x202','transfer_finished','product','secondary_unit','$product_details.bay','createTransport','flash','$product_details.product_code','updateOne','from_invoice','DRY\x20GOODS','$product_details.invoice','<h5\x20style=\x22text-align:\x20left;\x22>','batch_code','success','6dHfYVQ','$product_details.isle','$product_details.secondary_code','from_quantity','Enclosed','finalize','ToRoomAssigned','from_prod_qty','primary_code','to_prod_qty','to_quantity','/../public','RoomAssigned','prod_cat','add_transfer_finished','to_room','Router','</span>','log','staff','<h2>\x20','get','length','edit_transfer_finished_view','password','$to_warehouse','10MpBiyy','to_bay','secondary_code','product_stock','product_code3','/barcode_scanner','$product_details.rack','To_invoice','Chinese','catch','expiry_date','production_date','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','warehouse','push','$from_warehouse','Portuguese\x20(BR)','Hindi','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','5JpWyPX','$finalize','/transfer/view','<hr\x20class=\x22my-3\x22>','1604175xhygUG','$product','$product_details.product_stock','/upload/','floor','findById','unit','message','New_Qty_Converted','host','express','</table>'];a0_0x5518=function(){return _0x408613;};return a0_0x5518();}var a0_0x10f1d1=a0_0x51b3;(function(_0x2b1780,_0x20efc0){var _0x32d22e=a0_0x51b3,_0x589689=_0x2b1780();while(!![]){try{var _0x3542d2=parseInt(_0x32d22e(0xa5))/0x1+-parseInt(_0x32d22e(0x102))/0x2+parseInt(_0x32d22e(0x81))/0x3+parseInt(_0x32d22e(0xe7))/0x4*(-parseInt(_0x32d22e(0x7d))/0x5)+parseInt(_0x32d22e(0x12d))/0x6*(parseInt(_0x32d22e(0x104))/0x7)+-parseInt(_0x32d22e(0xa8))/0x8+-parseInt(_0x32d22e(0xc5))/0x9*(-parseInt(_0x32d22e(0x147))/0xa);if(_0x3542d2===_0x20efc0)break;else _0x589689['push'](_0x589689['shift']());}catch(_0xe5d22c){_0x589689['push'](_0x589689['shift']());}}}(a0_0x5518,0x46f58));const express=require(a0_0x10f1d1(0x8b)),app=express(),router=express[a0_0x10f1d1(0x13d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x10f1d1(0x11d)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x10f1d1(0xf6));router['get'](a0_0x10f1d1(0x92),auth,async(_0x3f5c57,_0x15a6cc)=>{var _0x51b63f=a0_0x10f1d1;try{const {username:_0x40d24e,email:_0x1bdecf,role:_0x563ceb}=_0x3f5c57['user'],_0x5225b6=_0x3f5c57[_0x51b63f(0x11a)],_0x3aa464=await profile[_0x51b63f(0xb7)]({'email':_0x5225b6[_0x51b63f(0x117)]}),_0x3aad8b=await master_shop['find']();let _0x34b5ca;if(_0x5225b6[_0x51b63f(0xda)]==_0x51b63f(0x140)){const _0x112b4d=await staff['findOne']({'email':_0x5225b6[_0x51b63f(0x117)]});_0x34b5ca=await transfers_finished[_0x51b63f(0x10b)]({'from_warehouse':_0x112b4d[_0x51b63f(0x154)]});}else _0x34b5ca=await transfers_finished['aggregate']([{'$unwind':_0x51b63f(0x82)},{'$group':{'_id':'$_id','invoice':{'$first':_0x51b63f(0x107)},'date':{'$first':_0x51b63f(0xc0)},'from_warehouse':{'$first':_0x51b63f(0x156)},'to_warehouse':{'$first':_0x51b63f(0x146)},'from_room_name':{'$addToSet':_0x51b63f(0x93)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x51b63f(0x7e)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x3aad8b[0x0]['language']==_0x51b63f(0xc9))var _0x467261=users['English'];else{if(_0x3aad8b[0x0]['language']==_0x51b63f(0x7b))var _0x467261=users[_0x51b63f(0x7b)];else{if(_0x3aad8b[0x0][_0x51b63f(0xac)]==_0x51b63f(0xea))var _0x467261=users['German'];else{if(_0x3aad8b[0x0][_0x51b63f(0xac)]==_0x51b63f(0x9a))var _0x467261=users[_0x51b63f(0x9a)];else{if(_0x3aad8b[0x0][_0x51b63f(0xac)]==_0x51b63f(0xfb))var _0x467261=users[_0x51b63f(0xfb)];else{if(_0x3aad8b[0x0]['language']==_0x51b63f(0x7a))var _0x467261=users[_0x51b63f(0xb0)];else{if(_0x3aad8b[0x0][_0x51b63f(0xac)]==_0x51b63f(0x14f))var _0x467261=users[_0x51b63f(0x14f)];else{if(_0x3aad8b[0x0][_0x51b63f(0xac)]==_0x51b63f(0xff))var _0x467261=users[_0x51b63f(0xe6)];}}}}}}}_0x15a6cc['render'](_0x51b63f(0x11f),{'success':_0x3f5c57['flash'](_0x51b63f(0x12c)),'errors':_0x3f5c57[_0x51b63f(0x124)]('errors'),'role':_0x5225b6,'profile':_0x3aa464,'master_shop':_0x3aad8b,'transfer':_0x34b5ca,'language':_0x467261});}catch(_0x6facd){console['log'](_0x6facd);}});async function getRandom8DigitNumber(){var _0x2848c9=a0_0x10f1d1;const _0x54969f=0x989680,_0x5f0aac=0x5f5e0ff,_0x62097d=Math[_0x2848c9(0x85)](Math[_0x2848c9(0x8f)]()*(_0x5f0aac-_0x54969f+0x1))+_0x54969f;var _0x1d063a;const _0x5c795d=await transfers_finished[_0x2848c9(0xb7)]({'invoice':'TRFF-'+_0x62097d});return _0x5c795d&&_0x5c795d[_0x2848c9(0x143)]>0x0?_0x1d063a=_0x2848c9(0xbb)+_0x62097d:_0x1d063a=_0x2848c9(0xbb)+_0x62097d,_0x1d063a;}router['get'](a0_0x10f1d1(0xa0),auth,async(_0x1a1a8b,_0x5bd26f)=>{var _0x28cbfb=a0_0x10f1d1;try{const {username:_0x1de3f8,email:_0x42ac0a,role:_0x5f45bd}=_0x1a1a8b[_0x28cbfb(0x11a)],_0x3f18e0=_0x1a1a8b[_0x28cbfb(0x11a)],_0x5a95a8=await profile['findOne']({'email':_0x3f18e0[_0x28cbfb(0x117)]}),_0x49ad38=await master_shop[_0x28cbfb(0x10b)]();let _0x8885cc;if(_0x3f18e0[_0x28cbfb(0xda)]=='staff'){const _0x4d4789=await staff['findOne']({'email':_0x3f18e0[_0x28cbfb(0x117)]});_0x8885cc=await warehouse[_0x28cbfb(0xee)]([{'$match':{'status':_0x28cbfb(0x94),'name':_0x4d4789[_0x28cbfb(0x154)],'warehouse_category':_0x28cbfb(0xf1),'name':{'$ne':_0x28cbfb(0xb1)}}},{'$group':{'_id':'$name','name':{'$first':_0x28cbfb(0xd7)}}}]);}else _0x8885cc=await warehouse[_0x28cbfb(0xee)]([{'$match':{'status':'Enabled','warehouse_category':_0x28cbfb(0xf1),'name':{'$ne':_0x28cbfb(0xb1)}}},{'$group':{'_id':'$name','name':{'$first':_0x28cbfb(0xd7)}}}]);const _0xd7ff7c=await transfers_finished[_0x28cbfb(0x10b)]({}),_0x3c3639=_0xd7ff7c[_0x28cbfb(0x143)]+0x1,_0xc947cb=_0x28cbfb(0xbb)+_0x3c3639[_0x28cbfb(0x98)]()[_0x28cbfb(0xf4)](0x5,'0');if(_0x49ad38[0x0]['language']==_0x28cbfb(0xc9))var _0x172a5f=users[_0x28cbfb(0xba)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0x7b))var _0x172a5f=users['Hindi'];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0xea))var _0x172a5f=users[_0x28cbfb(0xea)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0x9a))var _0x172a5f=users[_0x28cbfb(0x9a)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0xfb))var _0x172a5f=users[_0x28cbfb(0xfb)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0x7a))var _0x172a5f=users[_0x28cbfb(0xb0)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0x14f))var _0x172a5f=users[_0x28cbfb(0x14f)];else{if(_0x49ad38[0x0][_0x28cbfb(0xac)]==_0x28cbfb(0xff))var _0x172a5f=users[_0x28cbfb(0xe6)];}}}}}}}const _0x21c621=getRandom8DigitNumber();_0x21c621[_0x28cbfb(0xd6)](_0x1af8e3=>{var _0x6b80f1=_0x28cbfb;_0x5bd26f[_0x6b80f1(0xfc)](_0x6b80f1(0x13b),{'success':_0x1a1a8b[_0x6b80f1(0x124)](_0x6b80f1(0x12c)),'errors':_0x1a1a8b[_0x6b80f1(0x124)](_0x6b80f1(0x114)),'role':_0x3f18e0,'profile':_0x5a95a8,'master_shop':_0x49ad38,'warehouse':_0x8885cc,'language':_0x172a5f,'invoice':_0x1af8e3});})['catch'](_0x37ae39=>{var _0x5f0ac2=_0x28cbfb;_0x1a1a8b['flash'](_0x5f0ac2(0x114),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x5bd26f['redirect'](_0x5f0ac2(0x7f));});}catch(_0xc81570){console['log'](_0xc81570);}}),router[a0_0x10f1d1(0xa7)](a0_0x10f1d1(0xa0),auth,async(_0x135220,_0x36517a)=>{var _0x31a69a=a0_0x10f1d1;try{const {date:_0x3b7a23,from_warehouse:_0x220c5b,FromRoom_name:_0x358251,to_warehouse:_0x259e1e,ToRoom_name:_0x22a0fd,prod_name:_0x4a4037,from_prod_qty:_0x5e8b08,from_prod_level:_0x21ea1e,from_prod_isle:_0x9fb1c1,from_prod_pallet:_0x5e5bca,to_prod_qty:_0x51c3f2,to_prod_level:_0x4dcca1,to_prod_isle:_0x4f8d7e,to_prod_pallet:_0x244fe5,primary_code:_0x311258,secondary_code:_0x461ace,product_code3:_0x5be0d2,note:_0x2fd9ba,MaxStocks_data2:_0x14c9b9,invoice:_0x4e42cb,expiry_date:_0x3cbc46}=_0x135220[_0x31a69a(0xb6)];if(typeof _0x4a4037==_0x31a69a(0xb8))var _0x3eae56=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x101)]],_0x7bde11=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x134)]],_0x5f439c=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x115)]],_0x3c3ff6=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x89)]],_0x36f56a=[_0x135220[_0x31a69a(0xb6)]['to_prod_level']],_0x5efe98=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x135)]],_0x325cbd=[_0x135220[_0x31a69a(0xb6)]['secondary_code']],_0x592c77=[_0x135220['body'][_0x31a69a(0x14b)]],_0x1e12d9=[_0x135220['body'][_0x31a69a(0xce)]],_0x163604=[_0x135220[_0x31a69a(0xb6)]['primary_unit']],_0x23f2cb=[_0x135220[_0x31a69a(0xb6)]['secondary_unit']],_0xb7cc6f=[_0x135220['body'][_0x31a69a(0x12b)]],_0x34b459=[_0x135220['body'][_0x31a69a(0x151)]],_0x5598f5=[_0x135220['body'][_0x31a69a(0xf0)]],_0x49a2a2=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0xaf)]],_0x33e07a=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0xc2)]],_0x36c3e1=[_0x135220['body']['prod_cat']],_0x661960=[_0x135220['body'][_0x31a69a(0x139)]],_0x49b6ec=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x133)]],_0x23d4fd=[_0x135220[_0x31a69a(0xb6)][_0x31a69a(0x127)]],_0xca945e=[_0x135220['body']['to_invoice']];else var _0x3eae56=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x101)]],_0x7bde11=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x134)]],_0x5f439c=[..._0x135220['body'][_0x31a69a(0x115)]],_0x3c3ff6=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x89)]],_0x36f56a=[..._0x135220['body']['to_prod_level']],_0x5efe98=[..._0x135220['body'][_0x31a69a(0x135)]],_0x325cbd=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x149)]],_0x592c77=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x14b)]],_0x1e12d9=[..._0x135220['body'][_0x31a69a(0xce)]],_0x163604=[..._0x135220[_0x31a69a(0xb6)]['primary_unit']],_0x23f2cb=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x121)]],_0xb7cc6f=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x12b)]],_0x34b459=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x151)]],_0x5598f5=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0xf0)]],_0x49a2a2=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0xaf)]],_0x33e07a=[..._0x135220['body']['maxPerUnit']],_0x36c3e1=[..._0x135220[_0x31a69a(0xb6)]['prod_cat']],_0x661960=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x139)]],_0x49b6ec=[..._0x135220[_0x31a69a(0xb6)]['ToRoomAssigned']],_0x23d4fd=[..._0x135220[_0x31a69a(0xb6)]['from_invoice']],_0xca945e=[..._0x135220[_0x31a69a(0xb6)][_0x31a69a(0x9d)]];const _0x6efe70=_0x3eae56[_0x31a69a(0xc6)](_0x5cda13=>{return _0x5cda13={'product_name':_0x5cda13};});_0x7bde11['forEach']((_0x10337a,_0x24d81e)=>{var _0x308a0b=_0x31a69a;_0x6efe70[_0x24d81e][_0x308a0b(0x130)]=_0x10337a;}),_0x5f439c['forEach']((_0x4eb430,_0x326e43)=>{var _0x44eea2=_0x31a69a;_0x6efe70[_0x326e43][_0x44eea2(0xe9)]=_0x4eb430;}),_0x23d4fd[_0x31a69a(0x9c)]((_0x2e4808,_0x48f486)=>{var _0x2296c9=_0x31a69a;_0x6efe70[_0x48f486][_0x2296c9(0x127)]=_0x2e4808;}),_0xca945e[_0x31a69a(0x9c)]((_0x4ee2bc,_0x154e76)=>{var _0x39d20b=_0x31a69a;_0x6efe70[_0x154e76][_0x39d20b(0x14e)]=_0x4ee2bc;}),_0x3c3ff6['forEach']((_0x598d45,_0x1b746a)=>{var _0x241dae=_0x31a69a;_0x6efe70[_0x1b746a][_0x241dae(0x137)]=_0x598d45;}),_0x36f56a[_0x31a69a(0x9c)]((_0x2789fc,_0x4fcc9c)=>{_0x6efe70[_0x4fcc9c]['to_bay']=_0x2789fc;}),_0x5efe98[_0x31a69a(0x9c)]((_0x58cadb,_0x197d57)=>{var _0x3361b6=_0x31a69a;_0x6efe70[_0x197d57][_0x3361b6(0x135)]=_0x58cadb;}),_0x325cbd[_0x31a69a(0x9c)]((_0x377441,_0x31a40f)=>{var _0x184b5b=_0x31a69a;_0x6efe70[_0x31a40f][_0x184b5b(0x149)]=_0x377441;}),_0x592c77[_0x31a69a(0x9c)]((_0x3db427,_0x203c43)=>{var _0x1222e6=_0x31a69a;_0x6efe70[_0x203c43][_0x1222e6(0xe4)]=_0x3db427;}),_0x1e12d9[_0x31a69a(0x9c)]((_0x52b6d3,_0x449849)=>{_0x6efe70[_0x449849]['maxProducts']=_0x52b6d3;}),_0x163604['forEach']((_0x16ddce,_0x3e129b)=>{var _0x51358a=_0x31a69a;_0x6efe70[_0x3e129b][_0x51358a(0x87)]=_0x16ddce;}),_0x23f2cb[_0x31a69a(0x9c)]((_0x137411,_0x14675e)=>{var _0x47e58c=_0x31a69a;_0x6efe70[_0x14675e][_0x47e58c(0x121)]=_0x137411;}),_0xb7cc6f[_0x31a69a(0x9c)]((_0x2c9efc,_0x160778)=>{var _0x329d1f=_0x31a69a;_0x6efe70[_0x160778][_0x329d1f(0x12b)]=_0x2c9efc;}),_0x34b459[_0x31a69a(0x9c)]((_0x218796,_0x2536fe)=>{_0x6efe70[_0x2536fe]['expiry_date']=_0x218796;}),_0x5598f5[_0x31a69a(0x9c)]((_0x188827,_0x4044ef)=>{_0x6efe70[_0x4044ef]['production_date']=_0x188827;}),_0x49a2a2[_0x31a69a(0x9c)]((_0x17d317,_0x22bf06)=>{var _0x5ae46f=_0x31a69a;_0x6efe70[_0x22bf06][_0x5ae46f(0x100)]=_0x17d317;}),_0x33e07a[_0x31a69a(0x9c)]((_0x254051,_0x271eaf)=>{var _0x4cd74c=_0x31a69a;_0x6efe70[_0x271eaf][_0x4cd74c(0xc2)]=_0x254051;}),_0x36c3e1['forEach']((_0x113dc2,_0xc0cbd0)=>{var _0x24f88e=_0x31a69a;_0x6efe70[_0xc0cbd0][_0x24f88e(0x13a)]=_0x113dc2;}),_0x661960[_0x31a69a(0x9c)]((_0x77dbcf,_0x34932c)=>{var _0x82ffa=_0x31a69a;_0x6efe70[_0x34932c][_0x82ffa(0xc3)]=_0x77dbcf;}),_0x49b6ec[_0x31a69a(0x9c)]((_0x13fdf2,_0x4ffed0)=>{var _0x3b9824=_0x31a69a;_0x6efe70[_0x4ffed0][_0x3b9824(0x91)]=_0x13fdf2;});const _0x747d4b=_0x6efe70[_0x31a69a(0xb2)](_0x36e2f1=>_0x36e2f1[_0x31a69a(0x137)]!=='0'&&_0x36e2f1[_0x31a69a(0x137)]!==''||_0x36e2f1[_0x31a69a(0xa1)]!=='0'&&_0x36e2f1[_0x31a69a(0xa1)]!=='');var _0x427c8c=0x0;_0x747d4b[_0x31a69a(0x9c)](_0xfc8357=>{var _0xd0ef05=_0x31a69a;parseInt(_0xfc8357[_0xd0ef05(0x130)])<parseInt(_0xfc8357[_0xd0ef05(0x137)])&&_0x427c8c++;});if(_0x427c8c!=0x0)return _0x135220[_0x31a69a(0x124)](_0x31a69a(0x114),_0x31a69a(0xb3)),_0x36517a['redirect'](_0x31a69a(0x90));const _0x6deef0=new transfers_finished({'date':_0x3b7a23,'from_warehouse':_0x220c5b,'to_warehouse':_0x259e1e,'product':_0x747d4b,'note':_0x2fd9ba,'invoice':_0x4e42cb}),_0x163c98=await _0x6deef0['save']();_0x135220[_0x31a69a(0x124)](_0x31a69a(0x12c),'Product\x20Transfer\x20successfully'),_0x36517a[_0x31a69a(0xeb)](_0x31a69a(0xa6)+_0x163c98[_0x31a69a(0xb5)]);}catch(_0x2bddd1){console[_0x31a69a(0x13f)](_0x2bddd1),_0x36517a[_0x31a69a(0xc7)](0xc8)[_0x31a69a(0xdf)]({'errorMessage':_0x2bddd1[_0x31a69a(0x88)]});}}),router[a0_0x10f1d1(0x142)](a0_0x10f1d1(0xf2),auth,async(_0x5df35f,_0x493c1d)=>{var _0x20b10d=a0_0x10f1d1;try{const {username:_0x2cdc52,email:_0x1b3987,role:_0x131965}=_0x5df35f[_0x20b10d(0x11a)],_0x2c4975=_0x5df35f[_0x20b10d(0x11a)],_0x3ec2ea=await profile['findOne']({'email':_0x2c4975[_0x20b10d(0x117)]}),_0xec46e4=await master_shop[_0x20b10d(0x10b)](),_0xecffc=await transfers_finished['findById'](_0x5df35f[_0x20b10d(0x8e)]['id']);let _0x33b781;if(_0x2c4975[_0x20b10d(0xda)]==_0x20b10d(0x140)){const _0x30b434=await staff[_0x20b10d(0xb7)]({'email':_0x2c4975[_0x20b10d(0x117)]});_0x33b781=await warehouse[_0x20b10d(0x10b)]({'status':_0x20b10d(0x94),'name':_0x30b434[_0x20b10d(0x154)],'warehouse_category':'Finished\x20Goods'});}else _0x33b781=await warehouse[_0x20b10d(0x10b)]({'status':'Enabled','warehouse_category':'Finished\x20Goods'});const _0x3865c5=await warehouse['aggregate']([{'$match':{'name':_0xecffc['from_warehouse'],'warehouse_category':'Finished\x20Goods'}},{'$unwind':_0x20b10d(0xe8)},{'$group':{'_id':_0x20b10d(0x10a),'name':{'$first':_0x20b10d(0xdb)},'product_stock':{'$first':_0x20b10d(0x83)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x20b10d(0x116)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x20b10d(0x119)},'primary_code':{'$first':_0x20b10d(0x109)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x20b10d(0x125)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x20b10d(0x14d)},'expiry_date':{'$first':_0x20b10d(0xf7)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x20b10d(0xbc)},'warehoue_name':{'$first':'$name'}}}]),_0x15cac5=await product['find']({});if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0xc9)){var _0x406ea7=users[_0x20b10d(0xba)];console[_0x20b10d(0x13f)](_0x406ea7);}else{if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0x7b))var _0x406ea7=users[_0x20b10d(0x7b)];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0xea))var _0x406ea7=users['German'];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]=='Spanish')var _0x406ea7=users[_0x20b10d(0x9a)];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0xfb))var _0x406ea7=users[_0x20b10d(0xfb)];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0x7a))var _0x406ea7=users[_0x20b10d(0xb0)];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]=='Chinese')var _0x406ea7=users[_0x20b10d(0x14f)];else{if(_0xec46e4[0x0][_0x20b10d(0xac)]==_0x20b10d(0xff))var _0x406ea7=users['Arabic'];}}}}}}}_0x493c1d[_0x20b10d(0xfc)](_0x20b10d(0x144),{'success':_0x5df35f[_0x20b10d(0x124)](_0x20b10d(0x12c)),'errors':_0x5df35f[_0x20b10d(0x124)](_0x20b10d(0x114)),'role':_0x2c4975,'profile':_0x3ec2ea,'master_shop':_0xec46e4,'warehouse':_0x33b781,'transfer':_0xecffc,'stock':_0x3865c5,'unit':_0x15cac5,'language':_0x406ea7});}catch(_0x3d08fe){console['log'](_0x3d08fe);}}),router[a0_0x10f1d1(0xa7)](a0_0x10f1d1(0xf2),auth,async(_0x45c50d,_0x5d3beb)=>{var _0xf36310=a0_0x10f1d1;try{const {invoice:_0x35bf3f,from_warehouse:_0x524836,FromRoom_name:_0x758f83,to_warehouse:_0x1eb91a,ToRoom_name:_0x525550}=_0x45c50d[_0xf36310(0xb6)],_0x1ff7d6=await transfers_finished[_0xf36310(0x86)](_0x45c50d[_0xf36310(0x8e)]['id']),_0x131c6a=_0x1ff7d6[_0xf36310(0x120)]['map'](async _0x21628b=>{var _0x140f4b=_0xf36310;if(_0x21628b[_0x140f4b(0x137)]>0x0){var _0x58da0d=await warehouse[_0x140f4b(0xb7)]({'name':_0x524836,'room':_0x21628b[_0x140f4b(0xc3)],'warehouse_category':'Finished\x20Goods'});const _0x3546e4=_0x58da0d[_0x140f4b(0xd8)][_0x140f4b(0xc6)](_0x24e15d=>{var _0xea78b4=_0x140f4b;_0x24e15d[_0xea78b4(0xae)]==_0x21628b['product_name']&&_0x24e15d['bay']==_0x21628b[_0xea78b4(0xe9)]&&_0x24e15d[_0xea78b4(0x151)]==_0x21628b[_0xea78b4(0x151)]&&_0x24e15d[_0xea78b4(0x152)]==_0x21628b['production_date']&&_0x24e15d[_0xea78b4(0x12b)]==_0x21628b[_0xea78b4(0x12b)]&&_0x24e15d[_0xea78b4(0xd4)]==_0x21628b[_0xea78b4(0x127)]&&(_0x24e15d['product_stock']=_0x24e15d['product_stock']-_0x21628b[_0xea78b4(0x137)]);});}return _0x58da0d;});Promise['all'](_0x131c6a)[_0xf36310(0xd6)](async _0x2e3d9f=>{var _0x7608b7=_0xf36310;try{for(const _0x4bb9ea of _0x2e3d9f){await _0x4bb9ea[_0x7608b7(0xed)]();}const _0x3714d0=_0x1ff7d6[_0x7608b7(0x120)][_0x7608b7(0xc6)](async _0x2a8f57=>{var _0x1464eb=_0x7608b7,_0x19aad2=await warehouse[_0x1464eb(0xb7)]({'name':_0x1eb91a,'room':_0x2a8f57[_0x1464eb(0x91)]});if(_0x2a8f57[_0x1464eb(0x137)]>0x0){var _0xa7732a=0x0;const _0x1d2187=_0x19aad2[_0x1464eb(0xd8)]['map'](_0x209a1b=>{var _0x108cfb=_0x1464eb;_0x209a1b[_0x108cfb(0xae)]==_0x2a8f57[_0x108cfb(0xae)]&&_0x209a1b['bay']==_0x2a8f57[_0x108cfb(0x148)]&&_0x209a1b[_0x108cfb(0x151)]==_0x2a8f57[_0x108cfb(0x151)]&&_0x209a1b['production_date']==_0x2a8f57[_0x108cfb(0x152)]&&_0x209a1b[_0x108cfb(0x12b)]==_0x2a8f57['batch_code']&&_0x209a1b[_0x108cfb(0xd4)]==_0x2a8f57[_0x108cfb(0x14e)]&&(_0x209a1b[_0x108cfb(0x14a)]=_0x209a1b['product_stock']+_0x2a8f57[_0x108cfb(0x137)],_0xa7732a++);});_0xa7732a=='0'&&(_0x19aad2[_0x1464eb(0xd8)]=_0x19aad2[_0x1464eb(0xd8)][_0x1464eb(0x118)]({'product_name':_0x2a8f57[_0x1464eb(0xae)],'product_stock':_0x2a8f57[_0x1464eb(0x137)],'bay':_0x2a8f57[_0x1464eb(0x148)],'product_code':_0x2a8f57['product_code'],'primary_code':_0x2a8f57['primary_code'],'secondary_code':_0x2a8f57[_0x1464eb(0x149)],'expiry_date':_0x2a8f57['expiry_date'],'production_date':_0x2a8f57[_0x1464eb(0x152)],'maxProducts':_0x2a8f57[_0x1464eb(0x100)],'batch_code':_0x2a8f57[_0x1464eb(0x12b)],'secondary_unit':_0x2a8f57['secondary_unit'],'unit':_0x2a8f57[_0x1464eb(0x87)],'maxProducts':_0x2a8f57[_0x1464eb(0x100)],'maxPerUnit':_0x2a8f57['maxPerUnit'],'invoice':_0x2a8f57[_0x1464eb(0x14e)]}));}return _0x19aad2;});Promise[_0x7608b7(0xe1)](_0x3714d0)[_0x7608b7(0xd6)](async _0x5ee082=>{var _0x2ee921=_0x7608b7;try{for(const _0x29b415 of _0x5ee082){await warehouse[_0x2ee921(0x126)]({'_id':_0x29b415[_0x2ee921(0xb5)]},{'$addToSet':{'product_details':{'$each':_0x29b415['product_details']}}});}_0x1ff7d6[_0x2ee921(0x132)]=_0x2ee921(0xbd);const _0x3d20a0=await _0x1ff7d6[_0x2ee921(0xed)](),_0x45503c=await master_shop[_0x2ee921(0x10b)](),_0x51b864=await email_settings[_0x2ee921(0xb7)](),_0x30e913=await supervisor_settings['find']();var _0x48354c=_0x1ff7d6['product'],_0x130a7d='',_0x27ae7f;for(_0x27ae7f in _0x48354c){var _0x374670='FG';_0x1ff7d6[_0x2ee921(0xf3)]=='DRY\x20GOODS'&&(_0x374670='DG'),_0x130a7d+='<tr>'+_0x2ee921(0x111)+_0x48354c[_0x27ae7f][_0x2ee921(0xae)]+_0x2ee921(0x8d)+_0x2ee921(0x111)+_0x48354c[_0x27ae7f][_0x2ee921(0xe4)]+_0x2ee921(0x8d)+_0x2ee921(0x111)+_0x48354c[_0x27ae7f][_0x2ee921(0x137)]+_0x2ee921(0x8d)+_0x2ee921(0x111)+_0x48354c[_0x27ae7f][_0x2ee921(0x87)]+_0x2ee921(0x8d)+_0x2ee921(0x111)+_0x48354c[_0x27ae7f][_0x2ee921(0x121)]+_0x2ee921(0x8d)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1ff7d6[_0x2ee921(0xf3)]+_0x2ee921(0x8d)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x48354c[_0x27ae7f][_0x2ee921(0x91)]+'</td>'+_0x2ee921(0x111)+_0x374670+_0x48354c[_0x27ae7f][_0x2ee921(0x148)]+_0x2ee921(0x8d)+_0x2ee921(0xfa);}let _0x30a4b0=nodemailer[_0x2ee921(0x123)]({'host':_0x51b864[_0x2ee921(0x8a)],'port':Number(_0x51b864[_0x2ee921(0xec)]),'secure':![],'auth':{'user':_0x51b864[_0x2ee921(0x117)],'pass':_0x51b864[_0x2ee921(0x145)]}}),_0x10172f={'from':_0x51b864['email'],'to':_0x30e913[0x0][_0x2ee921(0xa4)],'subject':_0x2ee921(0xd2),'attachments':[{'filename':'Logo.png','path':__dirname+_0x2ee921(0x138)+_0x2ee921(0x84)+_0x45503c[0x0][_0x2ee921(0xcc)],'cid':'logo'}],'html':_0x2ee921(0x97)+_0x2ee921(0xa2)+_0x2ee921(0x11b)+_0x2ee921(0xca)+_0x2ee921(0xb4)+_0x2ee921(0xca)+_0x2ee921(0x153)+_0x2ee921(0x9e)+_0x2ee921(0xca)+_0x2ee921(0x141)+_0x45503c[0x0][_0x2ee921(0xd5)]+_0x2ee921(0xcb)+_0x2ee921(0x9e)+_0x2ee921(0x9e)+_0x2ee921(0x80)+_0x2ee921(0xca)+_0x2ee921(0x12a)+_0x2ee921(0xcf)+_0x1ff7d6[_0x2ee921(0xd4)]+'\x20'+_0x2ee921(0xa9)+'\x20Order\x20Date\x20:\x20'+_0x1ff7d6['date']+'\x20'+_0x2ee921(0x13e)+'</h5>'+_0x2ee921(0x9e)+_0x2ee921(0x113)+_0x2ee921(0x10f)+'<tr>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x2ee921(0xfe)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x2ee921(0xfd)+_0x2ee921(0x103)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x2ee921(0xdc)+_0x2ee921(0xd1)+_0x2ee921(0xfa)+_0x2ee921(0xe0)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x130a7d+'\x20'+_0x2ee921(0xf9)+_0x2ee921(0x8c)+_0x2ee921(0xca)+'<strong>\x20Regards\x20</strong>'+_0x2ee921(0x9b)+_0x45503c[0x0][_0x2ee921(0xd5)]+'</h5>'+_0x2ee921(0x9e)+_0x2ee921(0x9e)+_0x2ee921(0x105)};_0x30a4b0[_0x2ee921(0x95)](_0x10172f,function(_0xe9a8d1,_0x59562d){var _0x172560=_0x2ee921;_0xe9a8d1?(console[_0x172560(0x13f)](_0xe9a8d1),console['log'](_0x172560(0x99))):console[_0x172560(0x13f)](_0x172560(0x106));}),_0x45c50d[_0x2ee921(0x124)](_0x2ee921(0x12c),_0x2ee921(0xe2)),_0x5d3beb[_0x2ee921(0xeb)]('/picking_list/PDF_transfer/'+_0x3d20a0[_0x2ee921(0xb5)]);}catch(_0x3f64a8){console[_0x2ee921(0xbf)](_0x3f64a8),_0x5d3beb[_0x2ee921(0xc7)](0x1f4)[_0x2ee921(0xdf)]({'error':_0x2ee921(0x7c)});}})['catch'](_0x25de98=>{var _0x549abd=_0x7608b7;console[_0x549abd(0xbf)](_0x25de98),_0x5d3beb[_0x549abd(0xc7)](0x1f4)[_0x549abd(0xdf)]({'error':_0x549abd(0xaa)});});}catch(_0x4480b1){console[_0x7608b7(0xbf)](_0x4480b1),_0x5d3beb[_0x7608b7(0xc7)](0x1f4)[_0x7608b7(0xdf)]({'error':_0x7608b7(0xc4)});}})[_0xf36310(0x150)](_0x1ccae2=>{var _0x46f6f5=_0xf36310;console[_0x46f6f5(0xbf)](_0x1ccae2),_0x5d3beb[_0x46f6f5(0xc7)](0x1f4)['json']({'error':_0x46f6f5(0xaa)});});}catch(_0x2b0436){_0x5d3beb[_0xf36310(0xdf)]({'message':_0x2b0436[_0xf36310(0x88)]});}});function a0_0x51b3(_0x206d20,_0x504cca){var _0x5518c8=a0_0x5518();return a0_0x51b3=function(_0x51b3ed,_0xe5a11a){_0x51b3ed=_0x51b3ed-0x7a;var _0xb7ddf4=_0x5518c8[_0x51b3ed];return _0xb7ddf4;},a0_0x51b3(_0x206d20,_0x504cca);}function BayBinSelected(_0x4061c2,_0x22c121){var _0x5380b7=a0_0x10f1d1,_0x39e4c4=[];let _0x1c4daa=[];var _0x3d0bc0=[];if(_0x4061c2==_0x5380b7(0x128)){switch(_0x22c121){case _0x5380b7(0x10d):_0x39e4c4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x5380b7(0x11e):_0x39e4c4=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x3d0bc0=['DG'];}else{if(_0x4061c2==_0x5380b7(0x108)){switch(_0x22c121){case'Rack\x201':_0x39e4c4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case'Rack\x202':_0x39e4c4=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x3d0bc0=['FG'];}}return{'levels':_0x39e4c4,'identify':_0x3d0bc0};}router['get'](a0_0x10f1d1(0x112),auth,async(_0x2f613f,_0x5eafee)=>{var _0x5325a2=a0_0x10f1d1;try{const {username:_0x523f9d,email:_0x2e7fdb,role:_0x5bc45f}=_0x2f613f[_0x5325a2(0x11a)],_0x374cbf=_0x2f613f[_0x5325a2(0x11a)],_0x47ab81=await profile['findOne']({'email':_0x374cbf[_0x5325a2(0x117)]}),_0x2bf818=await master_shop[_0x5325a2(0x10b)](),_0x148c8e=await transfers_finished[_0x5325a2(0x86)](_0x2f613f['params']['id']);let _0x47f0b9=new Date(_0x148c8e['expiry_date']),_0x5c6c9e=('0'+_0x47f0b9[_0x5325a2(0xc1)]())['slice'](-0x2),_0x282f65=('0'+(_0x47f0b9['getMonth']()+0x1))[_0x5325a2(0xdd)](-0x2),_0x1bdb7f=_0x47f0b9[_0x5325a2(0x9f)](),_0x4a44cb=_0x1bdb7f+'-'+_0x282f65+'-'+_0x5c6c9e,_0x2c4936;if(_0x374cbf[_0x5325a2(0xda)]==_0x5325a2(0x140)){const _0x2ca5bc=await staff[_0x5325a2(0xb7)]({'email':_0x374cbf[_0x5325a2(0x117)]});_0x2c4936=await warehouse[_0x5325a2(0x10b)]({'status':_0x5325a2(0x94),'name':_0x2ca5bc[_0x5325a2(0x154)],'warehouse_category':_0x5325a2(0xf1)});}else _0x2c4936=await warehouse[_0x5325a2(0x10b)]({'status':'Enabled','warehouse_category':_0x5325a2(0xf1)});const _0x3fcbfd=await warehouse[_0x5325a2(0xee)]([{'$match':{'name':_0x148c8e[_0x5325a2(0x10e)],'room':_0x148c8e[_0x5325a2(0x110)]}},{'$unwind':_0x5325a2(0xe8)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5325a2(0xdb)},'product_stock':{'$first':_0x5325a2(0x83)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x5325a2(0x116)},'type':{'$first':_0x5325a2(0xd9)},'floorlevel':{'$first':_0x5325a2(0x119)},'primary_code':{'$first':_0x5325a2(0x109)},'secondary_code':{'$first':_0x5325a2(0x12f)},'product_code':{'$first':_0x5325a2(0x125)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);var _0x51afa7=[0x1,0x2,0x3,0x4],_0x2825ff=['A','B','C','D','E','F','G','H','I','J'],_0x47dbf2=[_0x5325a2(0xe3),_0x5325a2(0x131)];const _0x738e2b=await product[_0x5325a2(0x10b)]({}),_0x4ada51=BayBinSelected(_0x148c8e[_0x5325a2(0xf3)],_0x148c8e[_0x5325a2(0x13c)]);if(_0x2bf818[0x0]['language']==_0x5325a2(0xc9)){var _0x5c4102=users[_0x5325a2(0xba)];console['log'](_0x5c4102);}else{if(_0x2bf818[0x0][_0x5325a2(0xac)]=='Hindi')var _0x5c4102=users[_0x5325a2(0x7b)];else{if(_0x2bf818[0x0][_0x5325a2(0xac)]=='German')var _0x5c4102=users[_0x5325a2(0xea)];else{if(_0x2bf818[0x0]['language']=='Spanish')var _0x5c4102=users[_0x5325a2(0x9a)];else{if(_0x2bf818[0x0][_0x5325a2(0xac)]==_0x5325a2(0xfb))var _0x5c4102=users[_0x5325a2(0xfb)];else{if(_0x2bf818[0x0][_0x5325a2(0xac)]=='Portuguese\x20(BR)')var _0x5c4102=users['Portuguese'];else{if(_0x2bf818[0x0]['language']==_0x5325a2(0x14f))var _0x5c4102=users[_0x5325a2(0x14f)];else{if(_0x2bf818[0x0][_0x5325a2(0xac)]=='Arabic\x20(ae)')var _0x5c4102=users['Arabic'];}}}}}}}_0x5eafee[_0x5325a2(0xfc)](_0x5325a2(0x96),{'success':_0x2f613f[_0x5325a2(0x124)](_0x5325a2(0x12c)),'errors':_0x2f613f[_0x5325a2(0x124)](_0x5325a2(0x114)),'role':_0x374cbf,'profile':_0x47ab81,'master_shop':_0x2bf818,'warehouse':_0x2c4936,'transfer':_0x148c8e,'stock':_0x3fcbfd,'unit':_0x738e2b,'language':_0x5c4102,'levels':_0x51afa7,'Isle':_0x2825ff,'rooms_data':_0x47dbf2,'ed_fullDate':_0x4a44cb,'dataSelected':_0x4ada51});}catch(_0x4776c5){console[_0x5325a2(0x13f)](_0x4776c5);}}),router[a0_0x10f1d1(0xa7)]('/view/:id',auth,async(_0x43d9a1,_0x2c3e21)=>{var _0x44e437=a0_0x10f1d1;try{const _0x2e1c33=_0x43d9a1[_0x44e437(0x8e)]['id'];console['log'](_0x43d9a1['body']);const _0x3aff61=await transfers_finished[_0x44e437(0x86)](_0x2e1c33);console[_0x44e437(0x13f)]('transfer_data',_0x3aff61);const {date:_0x46c77d,from_warehouse:_0x5294f3,FromRoom_name:_0x35c5bf,to_warehouse:_0x259ad0,ToRoom_name:_0x393d9e,prod_name:_0x27a32d,from_prod_qty:_0x5be969,from_prod_level:_0x36427f,from_prod_isle:_0x4bb355,from_prod_pallet:_0x15d487,to_prod_qty:_0x36d699,to_prod_level:_0xabf9b6,to_prod_isle:_0x1a0637,to_prod_pallet:_0x455e95,primary_code:_0x2cc3b5,secondary_code:_0x40e4d9,product_code3:_0x1fdd8d,note:_0x19bf05,invoice:_0x296c85,expiry_date:_0x44260a}=_0x43d9a1[_0x44e437(0xb6)];if(typeof _0x27a32d==_0x44e437(0xb8))var _0x237dd5=[_0x43d9a1['body'][_0x44e437(0x101)]],_0xe9cb8=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x134)]],_0x13de25=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x115)]],_0x206e2f=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x136)]],_0x43fe4c=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x11c)]],_0x498202=[_0x43d9a1['body'][_0x44e437(0x135)]],_0x377fb7=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x149)]],_0x60056a=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x14b)]],_0x3eaa93=[_0x43d9a1['body']['MaxStocks_data2']],_0x30797a=[_0x43d9a1['body'][_0x44e437(0x87)]],_0x5bd0e5=[_0x43d9a1[_0x44e437(0xb6)]['secondary_unit']],_0x2eedc3=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x12b)]],_0x574d95=[_0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x151)]];else var _0x237dd5=[..._0x43d9a1['body'][_0x44e437(0x101)]],_0xe9cb8=[..._0x43d9a1['body'][_0x44e437(0x134)]],_0x13de25=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x115)]],_0x206e2f=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x136)]],_0x43fe4c=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x11c)]],_0x498202=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x135)]],_0x377fb7=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x149)]],_0x60056a=[..._0x43d9a1['body'][_0x44e437(0x14b)]],_0x3eaa93=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0xce)]],_0x30797a=[..._0x43d9a1['body'][_0x44e437(0x87)]],_0x5bd0e5=[..._0x43d9a1[_0x44e437(0xb6)]['secondary_unit']],_0x2eedc3=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x12b)]],_0x574d95=[..._0x43d9a1[_0x44e437(0xb6)][_0x44e437(0x151)]];const _0x523deb=_0x237dd5[_0x44e437(0xc6)](_0x1971e3=>{return _0x1971e3={'product_name':_0x1971e3};});_0xe9cb8[_0x44e437(0x9c)]((_0xea453e,_0x1dd9ce)=>{var _0x916f21=_0x44e437;_0x523deb[_0x1dd9ce][_0x916f21(0x130)]=_0xea453e;}),_0x13de25[_0x44e437(0x9c)]((_0x5ec926,_0x2d4714)=>{_0x523deb[_0x2d4714]['from_bay']=_0x5ec926;}),_0x206e2f[_0x44e437(0x9c)]((_0x44605f,_0x2c375d)=>{_0x523deb[_0x2c375d]['to_quantity']=_0x44605f;}),_0x43fe4c['forEach']((_0xcc631d,_0xb7e3d2)=>{var _0x56f924=_0x44e437;_0x523deb[_0xb7e3d2][_0x56f924(0x148)]=_0xcc631d;}),_0x498202[_0x44e437(0x9c)]((_0x4226a4,_0xa550be)=>{var _0x3f183e=_0x44e437;_0x523deb[_0xa550be][_0x3f183e(0x135)]=_0x4226a4;}),_0x377fb7[_0x44e437(0x9c)]((_0x48576e,_0xcda0e8)=>{var _0x4a463b=_0x44e437;_0x523deb[_0xcda0e8][_0x4a463b(0x149)]=_0x48576e;}),_0x60056a['forEach']((_0x4f7f1c,_0x37236e)=>{var _0x5b20bd=_0x44e437;_0x523deb[_0x37236e][_0x5b20bd(0xe4)]=_0x4f7f1c;}),_0x3eaa93[_0x44e437(0x9c)]((_0xba0246,_0xd88106)=>{var _0x15e512=_0x44e437;_0x523deb[_0xd88106][_0x15e512(0x100)]=_0xba0246;}),_0x30797a[_0x44e437(0x9c)]((_0x1661cd,_0x1f3448)=>{var _0x1e2ed1=_0x44e437;_0x523deb[_0x1f3448][_0x1e2ed1(0x87)]=_0x1661cd;}),_0x5bd0e5[_0x44e437(0x9c)]((_0x2f5529,_0x4d9c4f)=>{_0x523deb[_0x4d9c4f]['secondary_unit']=_0x2f5529;}),_0x2eedc3['forEach']((_0xaa9439,_0x263b95)=>{var _0x18b79d=_0x44e437;_0x523deb[_0x263b95][_0x18b79d(0x12b)]=_0xaa9439;}),_0x574d95[_0x44e437(0x9c)]((_0x56fb1a,_0x5bcb43)=>{_0x523deb[_0x5bcb43]['expiry_date']=_0x56fb1a;});const _0x31154f=_0x523deb[_0x44e437(0xb2)](_0x5884eb=>_0x5884eb[_0x44e437(0x137)]!=='0'&&_0x5884eb[_0x44e437(0x137)]!==''||_0x5884eb[_0x44e437(0xa1)]!=='0'&&_0x5884eb[_0x44e437(0xa1)]!=='');var _0x363f72=0x0;_0x31154f[_0x44e437(0x9c)](_0x30d4e3=>{parseInt(_0x30d4e3['from_quantity'])<parseInt(_0x30d4e3['to_quantity'])&&_0x363f72++;});if(_0x363f72!=0x0)return _0x43d9a1[_0x44e437(0x124)](_0x44e437(0x114),_0x44e437(0xb3)),_0x2c3e21[_0x44e437(0xeb)](_0x44e437(0x90));const _0x1fc1ac=await warehouse[_0x44e437(0xb7)]({'name':_0x3aff61[_0x44e437(0x10e)],'room':_0x3aff61[_0x44e437(0x110)]});_0x3aff61[_0x44e437(0x120)][_0x44e437(0x9c)](_0x161d67=>{var _0x189fa6=_0x44e437;if(_0x161d67[_0x189fa6(0x137)]>0x0){const _0x516922=_0x1fc1ac[_0x189fa6(0xd8)]['map'](_0x4b11d8=>{var _0x13ed85=_0x189fa6;_0x4b11d8[_0x13ed85(0xae)]==_0x161d67[_0x13ed85(0xae)]&&_0x4b11d8[_0x13ed85(0xd0)]==_0x161d67[_0x13ed85(0xe9)]&&(_0x4b11d8[_0x13ed85(0x14a)]=parseInt(_0x4b11d8['product_stock'])+parseInt(_0x161d67['to_quantity']));});}}),await _0x1fc1ac[_0x44e437(0xed)]();const _0x20cf61=await warehouse[_0x44e437(0xb7)]({'name':_0x3aff61[_0x44e437(0xf3)],'room':_0x3aff61[_0x44e437(0x13c)]});_0x3aff61['product']['forEach'](_0x90bb28=>{var _0x322184=_0x44e437;if(_0x90bb28[_0x322184(0x137)]>0x0){const _0x34fcb1=_0x20cf61[_0x322184(0xd8)][_0x322184(0xc6)](_0x2cb098=>{var _0x3d34b2=_0x322184;_0x2cb098[_0x3d34b2(0xae)]==_0x90bb28['product_name']&&_0x2cb098[_0x3d34b2(0xd0)]==_0x90bb28['to_bay']&&(_0x2cb098[_0x3d34b2(0x14a)]=parseInt(_0x2cb098['product_stock'])-parseInt(_0x90bb28[_0x3d34b2(0x137)]));});}}),await _0x20cf61[_0x44e437(0xed)](),_0x3aff61[_0x44e437(0xcd)]=_0x46c77d,_0x3aff61[_0x44e437(0x10e)]=_0x5294f3,_0x3aff61[_0x44e437(0xf3)]=_0x259ad0,_0x3aff61[_0x44e437(0x120)]=_0x31154f,_0x3aff61['note']=_0x19bf05,_0x3aff61[_0x44e437(0xd4)]=_0x296c85;const _0x2a34c9=await _0x3aff61[_0x44e437(0xed)](),_0x54a33f=await warehouse[_0x44e437(0xb7)]({'name':_0x5294f3,'room':_0x35c5bf});_0x2a34c9[_0x44e437(0x120)][_0x44e437(0x9c)](_0x530627=>{var _0x5b1d2d=_0x44e437;if(_0x530627[_0x5b1d2d(0x137)]>0x0){const _0x1c4146=_0x54a33f[_0x5b1d2d(0xd8)][_0x5b1d2d(0xc6)](_0x117210=>{var _0x4f873e=_0x5b1d2d;_0x117210[_0x4f873e(0xae)]==_0x530627[_0x4f873e(0xae)]&&_0x117210[_0x4f873e(0xd0)]==_0x530627['from_bay']&&(_0x117210['product_stock']=parseInt(_0x117210[_0x4f873e(0x14a)])-parseInt(_0x530627[_0x4f873e(0x137)]));});}}),await _0x54a33f['save']();const _0x15cc8d=await warehouse['findOne']({'name':_0x259ad0,'room':_0x393d9e});_0x2a34c9[_0x44e437(0x120)][_0x44e437(0x9c)](_0x224d74=>{var _0x542407=_0x44e437;if(_0x224d74[_0x542407(0x137)]>0x0){var _0x1290c7=0x0;const _0x178c74=_0x15cc8d[_0x542407(0xd8)][_0x542407(0xc6)](_0x13b4e5=>{var _0x8f602=_0x542407;_0x13b4e5[_0x8f602(0xae)]==_0x224d74[_0x8f602(0xae)]&&_0x13b4e5[_0x8f602(0xd0)]==_0x224d74['to_bay']&&(_0x13b4e5['product_stock']=parseInt(_0x13b4e5['product_stock'])+parseInt(_0x224d74[_0x8f602(0x137)]),_0x1290c7++);});_0x1290c7=='0'&&(_0x15cc8d['product_details']=_0x15cc8d['product_details']['concat']({'product_name':_0x224d74['product_name'],'product_stock':_0x224d74[_0x542407(0x137)],'bay':_0x224d74['to_bay'],'product_code':_0x224d74[_0x542407(0xe4)],'primary_code':_0x224d74[_0x542407(0x135)],'secondary_code':_0x224d74['secondary_code'],'maxProducts':_0x224d74[_0x542407(0x100)]}));}}),await _0x15cc8d[_0x44e437(0xed)](),_0x43d9a1[_0x44e437(0x124)](_0x44e437(0x12c),_0x44e437(0xbe)),_0x2c3e21[_0x44e437(0xeb)](_0x44e437(0xf5));}catch(_0x1a68c7){console[_0x44e437(0x13f)](_0x1a68c7);}}),router['post'](a0_0x10f1d1(0x14c),async(_0x51d049,_0x39b162)=>{var _0x1f1a3d=a0_0x10f1d1;const {FromWareHouse:_0x59db7a,FromRoom:_0x21bcce,ToWarehouse:_0x1bca91,ToRoom:_0x56aeb6,primary_code:_0x4a3a94,Roomslist:_0x4b860a}=_0x51d049[_0x1f1a3d(0xb6)],_0x5c08e6=_0x4b860a[_0x1f1a3d(0xf8)](','),_0x705153=[];async function _0x5eabc6(_0x288295){var _0x35be3c=_0x1f1a3d;const _0x5a0cc5=await warehouse[_0x35be3c(0xee)]([{'$match':{'name':_0x59db7a,'room':_0x288295}},{'$unwind':_0x35be3c(0xe8)},{'$match':{'product_details.primary_code':_0x4a3a94}},{'$group':{'_id':_0x35be3c(0x10a),'name':{'$first':_0x35be3c(0xdb)},'instock':{'$first':_0x35be3c(0x83)},'primary_code':{'$first':_0x35be3c(0x109)},'secondary_code':{'$first':_0x35be3c(0x12f)},'product_code':{'$first':_0x35be3c(0x125)},'level':{'$first':'$product_details.bay'},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x35be3c(0x119)},'unit':{'$first':_0x35be3c(0xef)},'secondary_unit':{'$first':_0x35be3c(0xd3)},'storage':{'$first':_0x35be3c(0xc8)},'rack':{'$first':_0x35be3c(0x14d)},'expiry_date':{'$first':_0x35be3c(0xf7)},'production_date':{'$first':_0x35be3c(0xab)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x35be3c(0xb9)},'roomNamed':{'$first':_0x35be3c(0xbc)},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x35be3c(0x129)}}}]),_0xd8e663=await warehouse[_0x35be3c(0xee)]([{'$match':{'name':_0x59db7a,'room':_0x288295}},{'$unwind':_0x35be3c(0xe8)},{'$match':{'product_details.secondary_code':_0x4a3a94}},{'$group':{'_id':_0x35be3c(0x10a),'name':{'$first':_0x35be3c(0xdb)},'instock':{'$first':_0x35be3c(0x83)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x35be3c(0x12f)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x35be3c(0x122)},'isle':{'$first':_0x35be3c(0x116)},'type':{'$first':_0x35be3c(0xd9)},'pallet':{'$first':_0x35be3c(0x119)},'unit':{'$first':_0x35be3c(0xef)},'secondary_unit':{'$first':_0x35be3c(0xd3)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x35be3c(0xf7)},'production_date':{'$first':_0x35be3c(0xab)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x35be3c(0xb9)},'roomNamed':{'$first':_0x35be3c(0xbc)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x35be3c(0x129)}}}]);if(_0x5a0cc5[_0x35be3c(0x143)]>0x0)_0x705153[_0x35be3c(0x155)](_0x5a0cc5);else _0xd8e663[_0x35be3c(0x143)]>0x0&&_0x705153[_0x35be3c(0x155)](_0xd8e663);}const _0x45094f=_0x5c08e6[_0x1f1a3d(0xc6)](_0x39a9f4=>_0x5eabc6(_0x39a9f4));await Promise[_0x1f1a3d(0xe1)](_0x45094f),_0x39b162['json'](_0x705153);}),router[a0_0x10f1d1(0xa7)]('/barcode_scanner2',async(_0x16b04d,_0x31fabd)=>{var _0x1c72b0=a0_0x10f1d1;try{const {FromWareHouse:_0x5cfaa8,FromRoom:_0x580fa0,ToWarehouse:_0x1ed4fb,ToRoom:_0x7dec0b,secondary_code:_0x3bfa41}=_0x16b04d[_0x1c72b0(0xb6)],_0x43a3d7=await warehouse[_0x1c72b0(0xee)]([{'$match':{'name':_0x5cfaa8}},{'$unwind':_0x1c72b0(0xe8)},{'$match':{'product_details.secondary_code':_0x3bfa41}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1c72b0(0xdb)},'primary_code':{'$first':_0x1c72b0(0x109)},'secondary_code':{'$first':_0x1c72b0(0x12f)},'product_code':{'$first':_0x1c72b0(0x125)},'instock':{'$first':_0x1c72b0(0x83)},'warehouse':{'$first':'$name'},'level':{'$first':_0x1c72b0(0x10c)},'isle':{'$first':_0x1c72b0(0x12e)},'pallet':{'$first':_0x1c72b0(0xde)},'maxProducts':{'$first':_0x1c72b0(0xe5)},'unit':{'$first':_0x1c72b0(0xef)},'expiry_date':{'$first':_0x1c72b0(0xf7)},'production_date':{'$first':_0x1c72b0(0xab)}}}]);_0x31fabd[_0x1c72b0(0xc7)](0xc8)[_0x1c72b0(0xdf)](_0x43a3d7);}catch(_0x4a36b4){_0x31fabd['status'](0x194)['json']({'message':_0x4a36b4[_0x1c72b0(0x88)]});}}),router['post'](a0_0x10f1d1(0xad),async(_0x121983,_0x3a5021)=>{var _0x59e447=a0_0x10f1d1;try{const {FromWareHouse:_0x375062,FromRoom:_0x2eb8d6,ToWarehouse:_0x5740a6,ToRoom:_0x1286f1,product_code:_0x5d90f6}=_0x121983[_0x59e447(0xb6)],_0x43a61c=await warehouse[_0x59e447(0xee)]([{'$match':{'name':_0x375062}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x5d90f6}},{'$group':{'_id':_0x59e447(0x10a),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x59e447(0x12f)},'product_code':{'$first':_0x59e447(0x125)},'instock':{'$first':_0x59e447(0x83)},'warehouse':{'$first':_0x59e447(0xd7)},'level':{'$first':_0x59e447(0x10c)},'isle':{'$first':_0x59e447(0x12e)},'pallet':{'$first':_0x59e447(0xde)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x59e447(0xef)}}}]);_0x3a5021[_0x59e447(0xc7)](0xc8)[_0x59e447(0xdf)](_0x43a61c);}catch(_0x44b1b1){_0x3a5021['status'](0x194)[_0x59e447(0xdf)]({'message':_0x44b1b1[_0x59e447(0x88)]});}}),router[a0_0x10f1d1(0xa7)](a0_0x10f1d1(0xa3),async(_0x491da2,_0x35c31d)=>{var _0x4b163f=a0_0x10f1d1;const {productCode:_0xc9a0d4,bay:_0x57fb5b,warehouses:_0x42e2c3,room:_0x30e783}=_0x491da2[_0x4b163f(0xb6)];console[_0x4b163f(0x13f)](_0x491da2[_0x4b163f(0xb6)]);try{const _0x2c5ae2=await warehouse[_0x4b163f(0xee)]([{'$match':{'name':_0x42e2c3,'room':_0x30e783}},{'$unwind':'$product_details'},{'$match':{'product_details.bay':parseInt(_0x57fb5b)}},{'$group':{'_id':_0x4b163f(0x10a),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x4b163f(0x83)},'bay':{'$first':_0x4b163f(0x122)},'maxProducts':{'$first':_0x4b163f(0xe5)}}}]);_0x35c31d['status'](0xc8)[_0x4b163f(0xdf)](_0x2c5ae2);}catch(_0x32d335){_0x35c31d[_0x4b163f(0xc7)](0x194)[_0x4b163f(0xdf)]({'message':_0x32d335[_0x4b163f(0x88)]});}}),module['exports']=router;