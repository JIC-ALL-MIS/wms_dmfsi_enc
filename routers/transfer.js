function a0_0x7e5a(_0x45ffa4,_0x403780){var _0x157be8=a0_0x157b();return a0_0x7e5a=function(_0x7e5a82,_0x217a49){_0x7e5a82=_0x7e5a82-0x1aa;var _0x30e7ac=_0x157be8[_0x7e5a82];return _0x30e7ac;},a0_0x7e5a(_0x45ffa4,_0x403780);}var a0_0x3cbf87=a0_0x7e5a;(function(_0xe0348b,_0x36477c){var _0x189d8d=a0_0x7e5a,_0x33ceba=_0xe0348b();while(!![]){try{var _0x2cd7fc=-parseInt(_0x189d8d(0x200))/0x1+-parseInt(_0x189d8d(0x1de))/0x2+-parseInt(_0x189d8d(0x24c))/0x3*(-parseInt(_0x189d8d(0x286))/0x4)+parseInt(_0x189d8d(0x284))/0x5*(-parseInt(_0x189d8d(0x1ae))/0x6)+parseInt(_0x189d8d(0x279))/0x7+-parseInt(_0x189d8d(0x1dd))/0x8*(parseInt(_0x189d8d(0x1d7))/0x9)+parseInt(_0x189d8d(0x262))/0xa;if(_0x2cd7fc===_0x36477c)break;else _0x33ceba['push'](_0x33ceba['shift']());}catch(_0x55abab){_0x33ceba['push'](_0x33ceba['shift']());}}}(a0_0x157b,0xadeea));const express=require(a0_0x3cbf87(0x1aa)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x3cbf87(0x294)),auth=require('../middleware/auth'),users=require(a0_0x3cbf87(0x24d)),nodemailer=require(a0_0x3cbf87(0x295));router[a0_0x3cbf87(0x27c)]('/view',auth,async(_0x38cd1d,_0x52e92b)=>{var _0x47a5eb=a0_0x3cbf87;try{const {username:_0x4ecb71,email:_0x322abd,role:_0x25c6a2}=_0x38cd1d[_0x47a5eb(0x21f)],_0x403080=_0x38cd1d['user'],_0x2bff1a=await profile['findOne']({'email':_0x403080[_0x47a5eb(0x1e8)]}),_0x3e9383=await master_shop[_0x47a5eb(0x29b)]();console[_0x47a5eb(0x260)]('master',_0x3e9383);let _0x373850;if(_0x403080[_0x47a5eb(0x22c)]==_0x47a5eb(0x208)){const _0x2ae09c=await staff[_0x47a5eb(0x20c)]({'email':_0x403080['email']});_0x373850=await transfers[_0x47a5eb(0x29b)]({'from_warehouse':_0x2ae09c[_0x47a5eb(0x278)]});}else _0x373850=await transfers[_0x47a5eb(0x204)]([{'$unwind':_0x47a5eb(0x1be)},{'$group':{'_id':'$_id','invoice':{'$first':_0x47a5eb(0x29e)},'date':{'$first':_0x47a5eb(0x292)},'from_warehouse':{'$first':_0x47a5eb(0x1c6)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x47a5eb(0x21d)},'to_room_name':{'$addToSet':_0x47a5eb(0x287)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x47a5eb(0x218)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x3e9383[0x0][_0x47a5eb(0x23d)]=='English\x20(US)'){var _0x97638a=users[_0x47a5eb(0x26c)];console[_0x47a5eb(0x260)](_0x97638a);}else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]=='Hindi')var _0x97638a=users[_0x47a5eb(0x252)];else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]==_0x47a5eb(0x1f6))var _0x97638a=users[_0x47a5eb(0x1f6)];else{if(_0x3e9383[0x0]['language']==_0x47a5eb(0x1d0))var _0x97638a=users[_0x47a5eb(0x1d0)];else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]==_0x47a5eb(0x296))var _0x97638a=users['French'];else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]==_0x47a5eb(0x236))var _0x97638a=users[_0x47a5eb(0x1f5)];else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]=='Chinese')var _0x97638a=users[_0x47a5eb(0x283)];else{if(_0x3e9383[0x0][_0x47a5eb(0x23d)]==_0x47a5eb(0x229))var _0x97638a=users[_0x47a5eb(0x257)];}}}}}}}_0x52e92b[_0x47a5eb(0x20b)]('transfer',{'success':_0x38cd1d[_0x47a5eb(0x232)](_0x47a5eb(0x1c8)),'errors':_0x38cd1d[_0x47a5eb(0x232)](_0x47a5eb(0x25a)),'role':_0x403080,'profile':_0x2bff1a,'master_shop':_0x3e9383,'transfer':_0x373850,'language':_0x97638a});}catch(_0x5e4fb5){console[_0x47a5eb(0x260)](_0x5e4fb5);}});async function getRandom8DigitNumber(){var _0x4781d7=a0_0x3cbf87;const _0xf1bdaf=0x989680,_0x48a7c4=0x5f5e0ff,_0x4370e0=Math['floor'](Math[_0x4781d7(0x1da)]()*(_0x48a7c4-_0xf1bdaf+0x1))+_0xf1bdaf;var _0x35ae60;const _0x5cd8e2=await transfers[_0x4781d7(0x20c)]({'invoice':_0x4781d7(0x25b)+_0x4370e0});return _0x5cd8e2&&_0x5cd8e2['length']>0x0?_0x35ae60='TRF-'+_0x4370e0:_0x35ae60='TRF-'+_0x4370e0,_0x35ae60;}router[a0_0x3cbf87(0x27c)](a0_0x3cbf87(0x1c3),auth,async(_0x465e7c,_0x212be3)=>{var _0x205943=a0_0x3cbf87;try{const {username:_0x5e90ea,email:_0x5ccf7c,role:_0x211677}=_0x465e7c[_0x205943(0x21f)],_0x1fb137=_0x465e7c['user'],_0x3ce541=await profile[_0x205943(0x20c)]({'email':_0x1fb137['email']}),_0x1171c4=await master_shop['find']();console[_0x205943(0x260)]('master',_0x1171c4);let _0x532b5f;if(_0x1fb137[_0x205943(0x22c)]==_0x205943(0x208)){const _0x3f0466=await staff['findOne']({'email':_0x1fb137['email']});_0x532b5f=await warehouse[_0x205943(0x204)]([{'$match':{'status':'Enabled','name':_0x3f0466[_0x205943(0x278)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x205943(0x223),'name':{'$first':_0x205943(0x223)}}}]);}else _0x532b5f=await warehouse[_0x205943(0x204)]([{'$match':{'status':_0x205943(0x21a),'warehouse_category':_0x205943(0x1d9)}},{'$group':{'_id':_0x205943(0x223),'name':{'$first':_0x205943(0x223)}}}]);var _0x295817=[_0x205943(0x1ff),_0x205943(0x1b5),_0x205943(0x22a)];const _0x3ab581=await transfers[_0x205943(0x29b)]({}),_0x1faf70=_0x3ab581[_0x205943(0x240)]+0x1,_0x15c640='TRF-'+_0x1faf70[_0x205943(0x1ca)]()[_0x205943(0x248)](0x5,'0');if(_0x1171c4[0x0][_0x205943(0x23d)]=='English\x20(US)'){var _0x9ea856=users[_0x205943(0x26c)];console[_0x205943(0x260)](_0x9ea856);}else{if(_0x1171c4[0x0][_0x205943(0x23d)]==_0x205943(0x252))var _0x9ea856=users[_0x205943(0x252)];else{if(_0x1171c4[0x0][_0x205943(0x23d)]==_0x205943(0x1f6))var _0x9ea856=users[_0x205943(0x1f6)];else{if(_0x1171c4[0x0][_0x205943(0x23d)]=='Spanish')var _0x9ea856=users[_0x205943(0x1d0)];else{if(_0x1171c4[0x0][_0x205943(0x23d)]==_0x205943(0x296))var _0x9ea856=users[_0x205943(0x296)];else{if(_0x1171c4[0x0][_0x205943(0x23d)]==_0x205943(0x236))var _0x9ea856=users['Portuguese'];else{if(_0x1171c4[0x0][_0x205943(0x23d)]=='Chinese')var _0x9ea856=users[_0x205943(0x283)];else{if(_0x1171c4[0x0][_0x205943(0x23d)]==_0x205943(0x229))var _0x9ea856=users[_0x205943(0x257)];}}}}}}}const _0x367f76=getRandom8DigitNumber();_0x367f76[_0x205943(0x297)](_0x4927e3=>{var _0x52f7a1=_0x205943;_0x212be3[_0x52f7a1(0x20b)](_0x52f7a1(0x29d),{'success':_0x465e7c[_0x52f7a1(0x232)](_0x52f7a1(0x1c8)),'errors':_0x465e7c['flash'](_0x52f7a1(0x25a)),'role':_0x1fb137,'profile':_0x3ce541,'master_shop':_0x1171c4,'warehouse':_0x532b5f,'language':_0x9ea856,'rooms_data':_0x295817,'invoice':_0x4927e3});})[_0x205943(0x203)](_0x20f19c=>{var _0x26d8af=_0x205943;_0x465e7c[_0x26d8af(0x232)](_0x26d8af(0x25a),_0x26d8af(0x1b8)),_0x212be3['redirect'](_0x26d8af(0x1fc));});}catch(_0x51aaba){console[_0x205943(0x260)](_0x51aaba);}}),router[a0_0x3cbf87(0x1c0)]('/view/add_transfer',auth,async(_0xa8f17f,_0x14c9ee)=>{var _0x14ff8d=a0_0x3cbf87;try{console[_0x14ff8d(0x260)](_0xa8f17f[_0x14ff8d(0x253)]);const {date:_0x2ed2dd,from_warehouse:_0x10ebaf,FromRoom_name:_0x93bcf2,to_warehouse:_0x3040e3,ToRoom_name:_0x1357b7,prod_name:_0xb88911,from_prod_qty:_0x3bbf36,from_prod_level:_0x10b401,from_prod_isle:_0x388b4f,from_prod_pallet:_0x83c4b8,to_prod_qty:_0x227eda,to_prod_level:_0x455a2b,to_prod_isle:_0x19d7ae,to_prod_pallet:_0x122837,primary_code:_0x4a46fc,secondary_code:_0x136b6,product_code3:_0x1b3253,note:_0x31f060,MaxStocks_data2:_0x1c2e12,invoice:_0x51c282,expiry_date:_0x24aad6}=_0xa8f17f['body'];if(typeof _0xb88911==_0x14ff8d(0x259))var _0x565e5b=[_0xa8f17f['body'][_0x14ff8d(0x211)]],_0x1772f3=[_0xa8f17f[_0x14ff8d(0x253)]['from_prod_qty']],_0x4ac524=[_0xa8f17f[_0x14ff8d(0x253)]['from_prod_level']],_0xaa263b=[_0xa8f17f['body']['New_Qty_Converted']],_0x556289=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x201)]],_0x523d23=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x1e7)]],_0x1fe8cc=[_0xa8f17f['body'][_0x14ff8d(0x27a)]],_0x526179=[_0xa8f17f[_0x14ff8d(0x253)]['product_code3']],_0x3bea53=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x26b)]],_0x219c70=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x1fd)]],_0x15979f=[_0xa8f17f[_0x14ff8d(0x253)]['secondary_unit']],_0x1421be=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x254)]],_0x4ff33c=[_0xa8f17f['body'][_0x14ff8d(0x21e)]],_0x4d5a70=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x265)]],_0x463cf9=[_0xa8f17f['body'][_0x14ff8d(0x1b0)]],_0x2ded10=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x29f)]],_0x14f3f4=[_0xa8f17f[_0x14ff8d(0x253)]['RoomAssigned']],_0x524cef=[_0xa8f17f['body']['ToRoomAssigned']],_0x573e2e=[_0xa8f17f[_0x14ff8d(0x253)]['from_invoice']],_0x4681b5=[_0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x210)]],_0x3833b7=[_0xa8f17f[_0x14ff8d(0x253)]['id_transaction']];else var _0x565e5b=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x211)]],_0x1772f3=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x216)]],_0x4ac524=[..._0xa8f17f['body']['from_prod_level']],_0xaa263b=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x28b)]],_0x556289=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x201)]],_0x523d23=[..._0xa8f17f[_0x14ff8d(0x253)]['primary_code']],_0x1fe8cc=[..._0xa8f17f['body'][_0x14ff8d(0x27a)]],_0x526179=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x1c9)]],_0x3bea53=[..._0xa8f17f['body'][_0x14ff8d(0x26b)]],_0x219c70=[..._0xa8f17f['body'][_0x14ff8d(0x1fd)]],_0x15979f=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x226)]],_0x1421be=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x254)]],_0x4ff33c=[..._0xa8f17f[_0x14ff8d(0x253)]['expiry_date']],_0x4d5a70=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x265)]],_0x463cf9=[..._0xa8f17f[_0x14ff8d(0x253)]['production_date']],_0x2ded10=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x29f)]],_0x14f3f4=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x1b2)]],_0x524cef=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x243)]],_0x573e2e=[..._0xa8f17f['body'][_0x14ff8d(0x281)]],_0x4681b5=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x210)]],_0x3833b7=[..._0xa8f17f[_0x14ff8d(0x253)][_0x14ff8d(0x21b)]];const _0x31ec9e=_0x565e5b['map'](_0x276693=>{return _0x276693={'product_name':_0x276693};});_0x1772f3[_0x14ff8d(0x1d3)]((_0x4aad20,_0x1d9209)=>{var _0x279dbb=_0x14ff8d;_0x31ec9e[_0x1d9209][_0x279dbb(0x289)]=_0x4aad20;}),_0x573e2e[_0x14ff8d(0x1d3)]((_0x2a4c34,_0x3f0955)=>{var _0x208408=_0x14ff8d;_0x31ec9e[_0x3f0955][_0x208408(0x281)]=_0x2a4c34;}),_0x4681b5[_0x14ff8d(0x1d3)]((_0x1df92d,_0x58c09f)=>{var _0x570a6b=_0x14ff8d;_0x31ec9e[_0x58c09f][_0x570a6b(0x1bc)]=_0x1df92d;}),_0x3833b7[_0x14ff8d(0x1d3)]((_0x30c483,_0xc45ec5)=>{var _0x318a3d=_0x14ff8d;_0x31ec9e[_0xc45ec5][_0x318a3d(0x1bf)]=_0x30c483;}),_0x4ac524[_0x14ff8d(0x1d3)]((_0x1d35aa,_0x16682e)=>{var _0x472518=_0x14ff8d;_0x14f3f4[_0x472518(0x1d3)]((_0x23ecbd,_0x4b6c11)=>{var _0x535a54=_0x472518;if(_0x23ecbd==_0x535a54(0x1d2)&&_0x16682e==_0x4b6c11){var _0x2fb4a7=_0x1d35aa[_0x535a54(0x290)](0x3);_0x31ec9e[_0x16682e][_0x535a54(0x1fa)]=_0x1d35aa[0x0],_0x31ec9e[_0x16682e][_0x535a54(0x270)]=_0x1d35aa[0x1],_0x31ec9e[_0x16682e][_0x535a54(0x291)]=0x0,_0x31ec9e[_0x16682e][_0x535a54(0x23f)]=0x0,_0x31ec9e[_0x16682e][_0x535a54(0x234)]='Floor',_0x31ec9e[_0x16682e]['from_floorlevel']=_0x2fb4a7;}else{if(_0x23ecbd==_0x535a54(0x1f4)&&_0x16682e==_0x4b6c11){var _0x2fb4a7=_0x1d35aa[_0x535a54(0x290)](0x3);_0x31ec9e[_0x16682e]['from_storage']=_0x1d35aa[0x0],_0x31ec9e[_0x16682e]['from_rack']=_0x1d35aa[0x1],_0x31ec9e[_0x16682e][_0x535a54(0x291)]=0x0,_0x31ec9e[_0x16682e][_0x535a54(0x23f)]=0x0,_0x31ec9e[_0x16682e]['from_types']=_0x535a54(0x1eb),_0x31ec9e[_0x16682e][_0x535a54(0x1cc)]=_0x1d35aa[0x5];}else{if(_0x16682e==_0x4b6c11){if(_0x1d35aa[0x0]=='A'&&_0x1d35aa[0x1]=='L'&&_0x1d35aa[0x2]=='L')console[_0x535a54(0x260)](_0x23ecbd+_0x535a54(0x275)+_0x16682e+'\x20<>\x20'+_0x4b6c11+_0x535a54(0x275)+_0x1d35aa+_0x535a54(0x27b)),_0x31ec9e[_0x16682e]['from_storage']=_0x1d35aa[0x0],_0x31ec9e[_0x16682e]['from_rack']=_0x1d35aa[0x1],_0x31ec9e[_0x16682e][_0x535a54(0x291)]=0x0,_0x31ec9e[_0x16682e][_0x535a54(0x23f)]=0x0,_0x31ec9e[_0x16682e]['from_types']=_0x535a54(0x1eb),_0x31ec9e[_0x16682e][_0x535a54(0x1cc)]=_0x1d35aa[0x3];else{var _0x3e38d8;if(_0x1d35aa[0x4]=='L')_0x3e38d8='Level';else _0x1d35aa[0x4]=='F'&&(_0x3e38d8=_0x535a54(0x1eb));_0x31ec9e[_0x16682e][_0x535a54(0x1fa)]=_0x1d35aa[0x0],_0x31ec9e[_0x16682e][_0x535a54(0x270)]=_0x1d35aa[0x1],_0x31ec9e[_0x16682e]['from_bay']=_0x1d35aa[0x2],_0x31ec9e[_0x16682e][_0x535a54(0x23f)]=_0x1d35aa[0x3],_0x31ec9e[_0x16682e][_0x535a54(0x234)]=_0x3e38d8,_0x31ec9e[_0x16682e]['from_floorlevel']=_0x1d35aa[0x5];}}}}});}),_0xaa263b[_0x14ff8d(0x1d3)]((_0x466eb2,_0x1d54eb)=>{var _0x1246e6=_0x14ff8d;_0x31ec9e[_0x1d54eb][_0x1246e6(0x1c7)]=_0x466eb2;}),_0x556289[_0x14ff8d(0x1d3)]((_0x29e955,_0x3c54ca)=>{var _0x21908c=_0x14ff8d;_0x524cef[_0x21908c(0x1d3)]((_0x5d6bc6,_0x3ec356)=>{var _0x2e5323=_0x21908c;if(_0x5d6bc6==_0x2e5323(0x1d2)&&_0x3c54ca==_0x3ec356){var _0x45f071=_0x29e955[_0x2e5323(0x290)](0x3);_0x31ec9e[_0x3c54ca][_0x2e5323(0x215)]=_0x29e955[0x0],_0x31ec9e[_0x3c54ca]['rack']=_0x29e955[0x1],_0x31ec9e[_0x3c54ca][_0x2e5323(0x224)]=0x0,_0x31ec9e[_0x3c54ca][_0x2e5323(0x261)]=0x0,_0x31ec9e[_0x3c54ca][_0x2e5323(0x26d)]=_0x2e5323(0x1eb),_0x31ec9e[_0x3c54ca]['to_floorlevel']=_0x45f071;}else{if(_0x5d6bc6=='Shelves'&&_0x3c54ca==_0x3ec356){var _0x45f071=_0x29e955[_0x2e5323(0x290)](0x3);_0x31ec9e[_0x3c54ca][_0x2e5323(0x215)]=_0x29e955[0x0],_0x31ec9e[_0x3c54ca][_0x2e5323(0x276)]=_0x29e955[0x1],_0x31ec9e[_0x3c54ca]['to_bay']=0x0,_0x31ec9e[_0x3c54ca]['to_bin']=0x0,_0x31ec9e[_0x3c54ca][_0x2e5323(0x26d)]='Floor',_0x31ec9e[_0x3c54ca][_0x2e5323(0x1ab)]=_0x29e955[0x5];}else{if(_0x3c54ca==_0x3ec356){if(_0x29e955[0x0]=='A'&&_0x29e955[0x1]=='L'&&_0x29e955[0x2]=='L')console[_0x2e5323(0x260)](_0x5d6bc6+_0x2e5323(0x275)+_0x3c54ca+'\x20<>\x20'+_0x3ec356+_0x2e5323(0x275)+_0x29e955+_0x2e5323(0x27b)),_0x31ec9e[_0x3c54ca][_0x2e5323(0x215)]=_0x29e955[0x0],_0x31ec9e[_0x3c54ca][_0x2e5323(0x276)]=_0x29e955[0x1],_0x31ec9e[_0x3c54ca][_0x2e5323(0x224)]=0x0,_0x31ec9e[_0x3c54ca][_0x2e5323(0x261)]=0x0,_0x31ec9e[_0x3c54ca]['to_types']='Floor',_0x31ec9e[_0x3c54ca]['to_floorlevel']=_0x29e955[0x3];else{var _0x534738;if(_0x29e955[0x4]=='L')_0x534738=_0x2e5323(0x217);else _0x29e955[0x4]=='F'&&(_0x534738=_0x2e5323(0x1eb));_0x31ec9e[_0x3c54ca][_0x2e5323(0x215)]=_0x29e955[0x0],_0x31ec9e[_0x3c54ca][_0x2e5323(0x276)]=_0x29e955[0x1],_0x31ec9e[_0x3c54ca][_0x2e5323(0x224)]=_0x29e955[0x2],_0x31ec9e[_0x3c54ca][_0x2e5323(0x261)]=_0x29e955[0x3],_0x31ec9e[_0x3c54ca][_0x2e5323(0x26d)]=_0x534738,_0x31ec9e[_0x3c54ca][_0x2e5323(0x1ab)]=_0x29e955[0x5];}}}}});}),_0x523d23['forEach']((_0x419959,_0x10c456)=>{var _0x518c22=_0x14ff8d;_0x31ec9e[_0x10c456][_0x518c22(0x1e7)]=_0x419959;}),_0x1fe8cc['forEach']((_0x32d4fb,_0x52c2d9)=>{var _0x2c37e1=_0x14ff8d;_0x31ec9e[_0x52c2d9][_0x2c37e1(0x27a)]=_0x32d4fb;}),_0x526179['forEach']((_0x38cec6,_0x21ce55)=>{_0x31ec9e[_0x21ce55]['product_code']=_0x38cec6;}),_0x3bea53[_0x14ff8d(0x1d3)]((_0x5d7ab5,_0x2a4f5f)=>{var _0x38c87e=_0x14ff8d;_0x31ec9e[_0x2a4f5f][_0x38c87e(0x256)]=_0x5d7ab5;}),_0x219c70[_0x14ff8d(0x1d3)]((_0x515592,_0x364f04)=>{var _0x25f6fa=_0x14ff8d;_0x31ec9e[_0x364f04][_0x25f6fa(0x250)]=_0x515592;}),_0x15979f[_0x14ff8d(0x1d3)]((_0x270864,_0x22447e)=>{var _0x3a41b7=_0x14ff8d;_0x31ec9e[_0x22447e][_0x3a41b7(0x226)]=_0x270864;}),_0x1421be[_0x14ff8d(0x1d3)]((_0x3dc087,_0x3ede11)=>{var _0x42f526=_0x14ff8d;_0x31ec9e[_0x3ede11][_0x42f526(0x254)]=_0x3dc087;}),_0x4ff33c[_0x14ff8d(0x1d3)]((_0x2e760a,_0x41af15)=>{var _0x3adeff=_0x14ff8d;_0x31ec9e[_0x41af15][_0x3adeff(0x21e)]=_0x2e760a;}),_0x4d5a70[_0x14ff8d(0x1d3)]((_0x2506eb,_0x1d4efa)=>{var _0x3f16b7=_0x14ff8d;_0x31ec9e[_0x1d4efa][_0x3f16b7(0x219)]=_0x2506eb;}),_0x463cf9[_0x14ff8d(0x1d3)]((_0x56dc20,_0x499bb9)=>{var _0x64fd3a=_0x14ff8d;_0x31ec9e[_0x499bb9][_0x64fd3a(0x1b0)]=_0x56dc20;}),_0x2ded10[_0x14ff8d(0x1d3)]((_0x379010,_0x28d774)=>{var _0x2a55da=_0x14ff8d;_0x31ec9e[_0x28d774][_0x2a55da(0x29f)]=_0x379010;}),_0x14f3f4[_0x14ff8d(0x1d3)]((_0x1bf7bc,_0x23e489)=>{var _0x4199a1=_0x14ff8d;_0x31ec9e[_0x23e489][_0x4199a1(0x1f3)]=_0x1bf7bc;}),_0x524cef[_0x14ff8d(0x1d3)]((_0x158cfe,_0x97e438)=>{var _0x98879=_0x14ff8d;_0x31ec9e[_0x97e438][_0x98879(0x1e2)]=_0x158cfe;});const _0x192c03=_0x31ec9e[_0x14ff8d(0x1e0)](_0x764c30=>_0x764c30[_0x14ff8d(0x1c7)]!=='0'&&_0x764c30[_0x14ff8d(0x1c7)]!==''||_0x764c30[_0x14ff8d(0x1ab)]!=='0'&&_0x764c30[_0x14ff8d(0x1ab)]!==''),_0x15197f=new transfers({'date':_0x2ed2dd,'from_warehouse':_0x10ebaf,'to_warehouse':_0x3040e3,'product':_0x192c03,'note':_0x31f060,'invoice':_0x51c282}),_0xffe0f5=await _0x15197f['save']();_0xa8f17f['flash'](_0x14ff8d(0x1c8),_0x14ff8d(0x1e9)),_0x14c9ee['redirect'](_0x14ff8d(0x1ce)+_0xffe0f5[_0x14ff8d(0x1e3)]);}catch(_0x256972){console[_0x14ff8d(0x260)](_0x256972),_0x14c9ee[_0x14ff8d(0x272)](0xc8)['json']({'errorMessage':_0x256972['message']});}}),router['get'](a0_0x3cbf87(0x22d),auth,async(_0x2d7412,_0x301199)=>{var _0x3ed56f=a0_0x3cbf87;try{const {username:_0x478444,email:_0x5ae2d0,role:_0x1d194b}=_0x2d7412[_0x3ed56f(0x21f)],_0x1db07e=_0x2d7412[_0x3ed56f(0x21f)],_0x2424f6=await profile[_0x3ed56f(0x20c)]({'email':_0x1db07e[_0x3ed56f(0x1e8)]}),_0x4b5a7f=await master_shop['find']();console[_0x3ed56f(0x260)](_0x3ed56f(0x27d),_0x4b5a7f);const _0x2c10e0=await transfers['findById'](_0x2d7412[_0x3ed56f(0x1d4)]['id']);let _0x37f559=new Date(_0x2c10e0[_0x3ed56f(0x21e)]),_0x162128=('0'+_0x37f559['getDate']())[_0x3ed56f(0x290)](-0x2),_0x2223ac=('0'+(_0x37f559[_0x3ed56f(0x209)]()+0x1))['slice'](-0x2),_0x1fef53=_0x37f559['getFullYear'](),_0x210df3=_0x1fef53+'-'+_0x2223ac+'-'+_0x162128,_0x1d72d1;if(_0x1db07e['role']==_0x3ed56f(0x208)){const _0x3351ac=await staff[_0x3ed56f(0x20c)]({'email':_0x1db07e[_0x3ed56f(0x1e8)]});_0x1d72d1=await warehouse[_0x3ed56f(0x29b)]({'status':_0x3ed56f(0x21a),'name':_0x3351ac['warehouse'],'warehouse_category':_0x3ed56f(0x1d9)});}else _0x1d72d1=await warehouse[_0x3ed56f(0x29b)]({'status':'Enabled','warehouse_category':_0x3ed56f(0x1d9)});const _0x2fdcca=await warehouse[_0x3ed56f(0x204)]([{'$match':{'name':_0x2c10e0[_0x3ed56f(0x25e)]}},{'$unwind':_0x3ed56f(0x1d1)},{'$group':{'_id':_0x3ed56f(0x22e),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3ed56f(0x1cd)},'bay':{'$first':_0x3ed56f(0x1bd)},'bin':{'$first':_0x3ed56f(0x23c)},'type':{'$first':_0x3ed56f(0x20d)},'floorlevel':{'$first':_0x3ed56f(0x238)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3ed56f(0x1df)},'product_code':{'$first':_0x3ed56f(0x242)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3ed56f(0x1b1)},'expiry_date':{'$first':_0x3ed56f(0x29c)},'production_date':{'$first':_0x3ed56f(0x20f)},'room':{'$first':'$room'}}}]);if(_0x4b5a7f[0x0]['language']==_0x3ed56f(0x293)){var _0x40f681=users['English'];console['log'](_0x40f681);}else{if(_0x4b5a7f[0x0]['language']=='Hindi')var _0x40f681=users[_0x3ed56f(0x252)];else{if(_0x4b5a7f[0x0]['language']==_0x3ed56f(0x1f6))var _0x40f681=users[_0x3ed56f(0x1f6)];else{if(_0x4b5a7f[0x0][_0x3ed56f(0x23d)]=='Spanish')var _0x40f681=users[_0x3ed56f(0x1d0)];else{if(_0x4b5a7f[0x0][_0x3ed56f(0x23d)]==_0x3ed56f(0x296))var _0x40f681=users[_0x3ed56f(0x296)];else{if(_0x4b5a7f[0x0][_0x3ed56f(0x23d)]==_0x3ed56f(0x236))var _0x40f681=users['Portuguese'];else{if(_0x4b5a7f[0x0][_0x3ed56f(0x23d)]==_0x3ed56f(0x283))var _0x40f681=users[_0x3ed56f(0x283)];else{if(_0x4b5a7f[0x0][_0x3ed56f(0x23d)]==_0x3ed56f(0x229))var _0x40f681=users[_0x3ed56f(0x257)];}}}}}}}_0x301199[_0x3ed56f(0x20b)]('edit_transfer_view',{'success':_0x2d7412[_0x3ed56f(0x232)](_0x3ed56f(0x1c8)),'errors':_0x2d7412[_0x3ed56f(0x232)](_0x3ed56f(0x25a)),'role':_0x1db07e,'profile':_0x2424f6,'master_shop':_0x4b5a7f,'warehouse':_0x1d72d1,'transfer':_0x2c10e0,'stock':_0x2fdcca,'language':_0x40f681});}catch(_0x4c0165){console[_0x3ed56f(0x260)](_0x4c0165);}}),router[a0_0x3cbf87(0x1c0)](a0_0x3cbf87(0x22d),auth,async(_0x45a9da,_0x42e602)=>{var _0x48cda7=a0_0x3cbf87;try{const _0x270551=_0x45a9da[_0x48cda7(0x1d4)]['id'],{from_warehouse:_0x33985a,FromRoom_name:_0x6bf126,to_warehouse:_0x3b72e6,ToRoom_name:_0x3c04c0}=_0x45a9da[_0x48cda7(0x253)],_0x1824d2=await transfers[_0x48cda7(0x23a)]({'_id':_0x270551}),_0x3fdeb2=_0x1824d2['product'][_0x48cda7(0x24f)](async _0x3ea1bb=>{var _0x5534fd=_0x48cda7;if(_0x3ea1bb[_0x5534fd(0x1c7)]>0x0){var _0x2d154e=await warehouse[_0x5534fd(0x20c)]({'name':_0x1824d2[_0x5534fd(0x25e)],'room':_0x3ea1bb[_0x5534fd(0x1f3)],'warehouse_category':_0x5534fd(0x1d9)});const _0x523926=_0x2d154e['product_details'][_0x5534fd(0x24f)](_0x416007=>{var _0x586504=_0x5534fd;_0x416007[_0x586504(0x1ec)]==_0x3ea1bb[_0x586504(0x1ec)]&&_0x416007['floorlevel']==_0x3ea1bb['from_floorlevel']&&_0x416007[_0x586504(0x264)]==_0x3ea1bb['from_types']&&_0x416007[_0x586504(0x1f8)]==_0x3ea1bb[_0x586504(0x23f)]&&_0x416007[_0x586504(0x1f0)]==_0x3ea1bb['from_bay']&&_0x416007['rack']==_0x3ea1bb[_0x586504(0x270)]&&_0x416007[_0x586504(0x215)]==_0x3ea1bb[_0x586504(0x1fa)]&&_0x416007[_0x586504(0x21e)]==_0x3ea1bb['expiry_date']&&_0x416007[_0x586504(0x254)]==_0x3ea1bb[_0x586504(0x254)]&&_0x416007[_0x586504(0x1b0)]==_0x3ea1bb[_0x586504(0x1b0)]&&_0x416007['invoice']==_0x3ea1bb[_0x586504(0x281)]&&_0x416007['_id']==_0x3ea1bb['id_transaction_id']&&(_0x416007[_0x586504(0x298)]=_0x416007['product_stock']-_0x3ea1bb['to_quantity']);});}return _0x2d154e;});Promise['all'](_0x3fdeb2)[_0x48cda7(0x297)](async _0x1f735f=>{var _0x15a916=_0x48cda7;try{for(const _0x415ded of _0x1f735f){await _0x415ded['save']();}try{const _0x376d5e=_0x1824d2[_0x15a916(0x244)]['map'](async _0x6b7016=>{var _0x4db5fd=_0x15a916;if(_0x6b7016[_0x4db5fd(0x1c7)]>0x0){var _0x2a9c50=await warehouse['findOne']({'name':_0x1824d2[_0x4db5fd(0x214)],'room':_0x6b7016[_0x4db5fd(0x1e2)],'warehouse_category':'Raw\x20Materials'}),_0x35c771=0x0;const _0x14603f=_0x2a9c50['product_details'][_0x4db5fd(0x24f)](_0x4d6032=>{var _0x2f5e0c=_0x4db5fd;_0x4d6032[_0x2f5e0c(0x1ec)]==_0x6b7016[_0x2f5e0c(0x1ec)]&&_0x4d6032[_0x2f5e0c(0x1d6)]==_0x6b7016['to_floorlevel']&&_0x4d6032[_0x2f5e0c(0x264)]==_0x6b7016['to_types']&&_0x4d6032['bin']==_0x6b7016[_0x2f5e0c(0x261)]&&_0x4d6032[_0x2f5e0c(0x1f0)]==_0x6b7016[_0x2f5e0c(0x224)]&&_0x4d6032[_0x2f5e0c(0x276)]==_0x6b7016[_0x2f5e0c(0x276)]&&_0x4d6032[_0x2f5e0c(0x215)]==_0x6b7016[_0x2f5e0c(0x215)]&&_0x4d6032[_0x2f5e0c(0x21e)]==_0x6b7016['expiry_date']&&_0x4d6032[_0x2f5e0c(0x254)]==_0x6b7016[_0x2f5e0c(0x254)]&&_0x4d6032[_0x2f5e0c(0x1b0)]==_0x6b7016['production_date']&&_0x4d6032[_0x2f5e0c(0x274)]==_0x6b7016[_0x2f5e0c(0x1bc)]&&(_0x4d6032[_0x2f5e0c(0x298)]=_0x4d6032[_0x2f5e0c(0x298)]+_0x6b7016['to_quantity'],_0x35c771++);});_0x35c771=='0'&&(_0x2a9c50['product_details']=_0x2a9c50[_0x4db5fd(0x269)][_0x4db5fd(0x231)]({'product_name':_0x6b7016[_0x4db5fd(0x1ec)],'product_stock':_0x6b7016[_0x4db5fd(0x1c7)],'bay':_0x6b7016[_0x4db5fd(0x224)],'bin':_0x6b7016[_0x4db5fd(0x261)],'type':_0x6b7016['to_types'],'floorlevel':_0x6b7016['to_floorlevel'],'storage':_0x6b7016[_0x4db5fd(0x215)],'rack':_0x6b7016[_0x4db5fd(0x276)],'product_code':_0x6b7016[_0x4db5fd(0x1ed)],'primary_code':_0x6b7016[_0x4db5fd(0x1e7)],'secondary_code':_0x6b7016[_0x4db5fd(0x27a)],'maxProducts':_0x6b7016[_0x4db5fd(0x256)],'storage':_0x6b7016['storage'],'rack':_0x6b7016['rack'],'expiry_date':_0x6b7016['expiry_date'],'maxPerUnit':_0x6b7016['maxperunit'],'batch_code':_0x6b7016[_0x4db5fd(0x254)],'production_date':_0x6b7016['production_date']}));}return _0x2a9c50;});Promise[_0x15a916(0x273)](_0x376d5e)[_0x15a916(0x297)](async _0x3cfcbf=>{var _0x4160c1=_0x15a916;try{for(const _0x47db94 of _0x3cfcbf){await warehouse['updateOne']({'_id':_0x47db94['_id']},{'$addToSet':{'product_details':{'$each':_0x47db94[_0x4160c1(0x269)]}}});}_0x1824d2[_0x4160c1(0x1e1)]=_0x4160c1(0x1cb);const _0x47ea9d=await _0x1824d2[_0x4160c1(0x24e)](),_0x20f12f=await master_shop['find'](),_0x2f2f40=await email_settings['findOne'](),_0x3b5ac6=await supervisor_settings[_0x4160c1(0x29b)]();var _0x316021=_0x1824d2[_0x4160c1(0x244)],_0x59d839='',_0x17b34a;for(_0x17b34a in _0x316021){_0x59d839+='<tr>'+_0x4160c1(0x288)+_0x316021[_0x17b34a][_0x4160c1(0x1ec)]+_0x4160c1(0x20e)+_0x4160c1(0x288)+_0x316021[_0x17b34a][_0x4160c1(0x1ed)]+_0x4160c1(0x20e)+_0x4160c1(0x288)+_0x316021[_0x17b34a][_0x4160c1(0x1c7)]+_0x4160c1(0x20e)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x316021[_0x17b34a][_0x4160c1(0x250)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x316021[_0x17b34a][_0x4160c1(0x226)]+_0x4160c1(0x20e)+_0x4160c1(0x288)+_0x1824d2[_0x4160c1(0x214)]+_0x4160c1(0x20e)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x316021[_0x17b34a]['to_room_name']+_0x4160c1(0x20e)+_0x4160c1(0x288)+_0x316021[_0x17b34a][_0x4160c1(0x215)]+_0x316021[_0x17b34a][_0x4160c1(0x276)]+_0x316021[_0x17b34a][_0x4160c1(0x224)]+_0x316021[_0x17b34a][_0x4160c1(0x261)]+_0x316021[_0x17b34a][_0x4160c1(0x26d)][0x0]+_0x316021[_0x17b34a]['to_floorlevel']+_0x4160c1(0x20e),_0x4160c1(0x237);}let _0x38f8d9=nodemailer[_0x4160c1(0x280)]({'host':_0x2f2f40[_0x4160c1(0x24a)],'port':Number(_0x2f2f40[_0x4160c1(0x21c)]),'secure':![],'auth':{'user':_0x2f2f40['email'],'pass':_0x2f2f40[_0x4160c1(0x282)]}}),_0x3addd5={'from':_0x2f2f40['email'],'to':_0x3b5ac6[0x0][_0x4160c1(0x239)],'subject':'Transfer\x20Mail','attachments':[{'filename':_0x4160c1(0x28f),'path':__dirname+_0x4160c1(0x1e6)+'/upload/'+_0x20f12f[0x0]['image'],'cid':'logo'}],'html':_0x4160c1(0x1f9)+_0x4160c1(0x1b4)+'</head><body>'+_0x4160c1(0x24b)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x4160c1(0x24b)+_0x4160c1(0x1e4)+_0x4160c1(0x235)+_0x4160c1(0x24b)+'<h2>\x20'+_0x20f12f[0x0][_0x4160c1(0x22b)]+_0x4160c1(0x1f2)+_0x4160c1(0x235)+_0x4160c1(0x235)+_0x4160c1(0x1ad)+_0x4160c1(0x24b)+_0x4160c1(0x1d8)+_0x4160c1(0x23b)+_0x1824d2['invoice']+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x4160c1(0x1f7)+_0x1824d2['date']+'\x20'+_0x4160c1(0x25d)+_0x4160c1(0x225)+_0x4160c1(0x235)+_0x4160c1(0x1c2)+_0x4160c1(0x1c4)+'<tr>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x4160c1(0x1fe)+_0x4160c1(0x1db)+_0x4160c1(0x228)+_0x4160c1(0x249)+_0x4160c1(0x1ba)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x4160c1(0x233)+_0x4160c1(0x237)+_0x4160c1(0x23e)+_0x4160c1(0x1c5)+'\x20'+_0x59d839+'\x20'+_0x4160c1(0x1f1)+_0x4160c1(0x26a)+_0x4160c1(0x24b)+_0x4160c1(0x1c1)+_0x4160c1(0x1ee)+_0x20f12f[0x0][_0x4160c1(0x22b)]+_0x4160c1(0x225)+_0x4160c1(0x235)+'</div>'+_0x4160c1(0x27f)};_0x38f8d9[_0x4160c1(0x29a)](_0x3addd5,function(_0x79132f,_0xa68a65){var _0xfc998b=_0x4160c1;_0x79132f?(console[_0xfc998b(0x260)](_0x79132f),console[_0xfc998b(0x260)]('Error\x20Occurs')):console['log'](_0xfc998b(0x1ea));}),_0x45a9da[_0x4160c1(0x232)](_0x4160c1(0x1c8),_0x4160c1(0x227)),_0x42e602[_0x4160c1(0x28a)](_0x4160c1(0x205)+_0x47ea9d[_0x4160c1(0x1e3)]);}catch(_0x525c2f){console[_0x4160c1(0x1ef)](_0x525c2f),_0x42e602['status'](0x1f4)[_0x4160c1(0x1b7)]({'Perror':_0x4160c1(0x222),'message':_0x525c2f[_0x4160c1(0x299)]});}})[_0x15a916(0x203)](_0x37d46e=>{var _0x580d1e=_0x15a916;console[_0x580d1e(0x1ef)](_0x37d46e),_0x42e602[_0x580d1e(0x272)](0x1f4)['json']({'Perror':'An\x20error\x20occurred.'});});}catch(_0x45f73e){_0x42e602[_0x15a916(0x1b7)](_0x45f73e);}}catch(_0x2684c8){console[_0x15a916(0x1ef)](_0x2684c8),_0x42e602[_0x15a916(0x272)](0x1f4)['json']({'Merror':_0x15a916(0x222),'Message':_0x2684c8[_0x15a916(0x299)]});}})['catch'](_0x47e55a=>{var _0x41b619=_0x48cda7;console[_0x41b619(0x1ef)](_0x47e55a),_0x42e602[_0x41b619(0x272)](0x1f4)[_0x41b619(0x1b7)]({'Merror':_0x41b619(0x247)});});}catch(_0x5aea85){console[_0x48cda7(0x260)](_0x5aea85);}});function BayBinSelected(_0x4ef82d,_0x436308){var _0x353526=a0_0x3cbf87,_0xba7b2a=[],_0x46e0b8=[],_0x934d87=[],_0x2a533c=[],_0x1f87a0=[],_0x1fe95c=[];let _0x3e46c0=[];if(_0x4ef82d==_0x353526(0x1ac))switch(_0x436308){case _0x353526(0x25f):_0xba7b2a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x46e0b8=[0x1,0x2],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x217),_0x353526(0x1eb)],_0x1f87a0=['D'],_0x1fe95c=['A'];break;case _0x353526(0x251):_0xba7b2a=[0x6,0x5,0x4,0x3,0x2,0x1],_0x46e0b8=[0x1,0x2],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=['Level',_0x353526(0x1eb)],_0x1f87a0=['D'],_0x1fe95c=['B'];break;case'Shelves':_0xba7b2a=[0x0],_0x46e0b8=[0x0],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x1eb)],_0x1f87a0=['D'],_0x1fe95c=['S'];break;case _0x353526(0x1d2):_0xba7b2a=[0x0],_0x46e0b8=[0x0],_0x2a533c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x934d87=[_0x353526(0x1eb)],_0x1f87a0=['D'],_0x1fe95c=['R'];break;}else{if(_0x4ef82d==_0x353526(0x245))switch(_0x436308){case _0x353526(0x25f):_0xba7b2a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x46e0b8=['B','F'],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x217),_0x353526(0x1eb)],_0x1f87a0=['C'],_0x1fe95c=['A'];break;case _0x353526(0x251):_0xba7b2a=[0x5,0x4,0x3,0x2,0x1],_0x46e0b8=['F','B','S'],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x217),_0x353526(0x1eb)],_0x1f87a0=['C'],_0x1fe95c=['B'];break;case _0x353526(0x1fb):_0xba7b2a=[0x1,0x2,0x3,0x4,0x5],_0x46e0b8=['B','F','S'],_0x2a533c=[0x5,0x4,0x3,0x2,0x1],_0x934d87=[_0x353526(0x217),'Floor'],_0x1f87a0=['C'],_0x1fe95c=['C'];break;case _0x353526(0x1bb):_0xba7b2a=[0x5,0x4,0x3,0x2,0x1],_0x46e0b8=['F','B','S'],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x217),_0x353526(0x1eb)],_0x1f87a0=['C'],_0x1fe95c=['D'];break;case _0x353526(0x258):_0xba7b2a=[0x4,0x3,0x2,0x1],_0x46e0b8=[0x1,0x2],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=['Level',_0x353526(0x1eb)],_0x1f87a0=['C'],_0x1fe95c=['E'];break;case _0x353526(0x28c):_0xba7b2a=[0x1,0x2,0x3],_0x46e0b8=[0x1,0x2],_0x2a533c=[0x1,0x2,0x3,0x4,0x5],_0x934d87=[_0x353526(0x217)],_0x1f87a0=['C'],_0x1fe95c=['F'];break;}}return{'levels':_0xba7b2a,'Isle':_0x46e0b8,'rack':_0x2a533c,'type':_0x934d87,'storage':_0x1f87a0,'rak':_0x1fe95c};}router['get'](a0_0x3cbf87(0x263),auth,async(_0x36a18c,_0x495f45)=>{var _0x5ba89a=a0_0x3cbf87;try{const {username:_0x3cfc4d,email:_0x1b8c3e,role:_0x337b04}=_0x36a18c[_0x5ba89a(0x21f)],_0x5b73cf=_0x36a18c['user'],_0x5e3f66=await profile[_0x5ba89a(0x20c)]({'email':_0x5b73cf[_0x5ba89a(0x1e8)]}),_0x2f7138=await master_shop[_0x5ba89a(0x29b)](),_0x1960d4=await transfers[_0x5ba89a(0x23a)](_0x36a18c[_0x5ba89a(0x1d4)]['id']);let _0x5f2e22;if(_0x5b73cf[_0x5ba89a(0x22c)]=='staff'){const _0x1fc3dc=await staff[_0x5ba89a(0x20c)]({'email':_0x5b73cf[_0x5ba89a(0x1e8)]});_0x5f2e22=await warehouse[_0x5ba89a(0x204)]([{'$match':{'status':_0x5ba89a(0x21a),'name':_0x1fc3dc['warehouse'],'warehouse_category':_0x5ba89a(0x1d9)}},{'$group':{'_id':_0x5ba89a(0x223),'name':{'$first':_0x5ba89a(0x223)}}}]);}else _0x5f2e22=await warehouse[_0x5ba89a(0x204)]([{'$match':{'status':'Enabled','warehouse_category':_0x5ba89a(0x1d9)}},{'$group':{'_id':_0x5ba89a(0x223),'name':{'$first':'$name'}}}]);const _0x20c76f=await warehouse[_0x5ba89a(0x204)]([{'$match':{'name':_0x1960d4[_0x5ba89a(0x25e)],'warehouse_category':'Raw\x20Materials'}},{'$unwind':_0x5ba89a(0x1d1)},{'$group':{'_id':_0x5ba89a(0x22e),'name':{'$first':_0x5ba89a(0x1af)},'product_stock':{'$first':_0x5ba89a(0x1cd)},'bay':{'$first':_0x5ba89a(0x1bd)},'bin':{'$first':_0x5ba89a(0x23c)},'type':{'$first':_0x5ba89a(0x20d)},'floorlevel':{'$first':_0x5ba89a(0x238)},'primary_code':{'$first':_0x5ba89a(0x212)},'secondary_code':{'$first':_0x5ba89a(0x1df)},'product_code':{'$first':_0x5ba89a(0x242)},'storage':{'$first':_0x5ba89a(0x267)},'rack':{'$first':_0x5ba89a(0x1b1)},'expiry_date':{'$first':_0x5ba89a(0x29c)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x5ba89a(0x277)}}}]),_0x1e98b1=await product[_0x5ba89a(0x29b)]({}),_0x394f11=BayBinSelected(_0x1960d4['to_warehouse'],_0x1960d4[_0x5ba89a(0x20a)]);if(_0x2f7138[0x0]['language']==_0x5ba89a(0x293)){var _0x29aaba=users[_0x5ba89a(0x26c)];console[_0x5ba89a(0x260)](_0x29aaba);}else{if(_0x2f7138[0x0][_0x5ba89a(0x23d)]==_0x5ba89a(0x252))var _0x29aaba=users['Hindi'];else{if(_0x2f7138[0x0][_0x5ba89a(0x23d)]==_0x5ba89a(0x1f6))var _0x29aaba=users[_0x5ba89a(0x1f6)];else{if(_0x2f7138[0x0]['language']==_0x5ba89a(0x1d0))var _0x29aaba=users[_0x5ba89a(0x1d0)];else{if(_0x2f7138[0x0][_0x5ba89a(0x23d)]=='French')var _0x29aaba=users['French'];else{if(_0x2f7138[0x0]['language']==_0x5ba89a(0x236))var _0x29aaba=users[_0x5ba89a(0x1f5)];else{if(_0x2f7138[0x0][_0x5ba89a(0x23d)]==_0x5ba89a(0x283))var _0x29aaba=users['Chinese'];else{if(_0x2f7138[0x0][_0x5ba89a(0x23d)]=='Arabic\x20(ae)')var _0x29aaba=users[_0x5ba89a(0x257)];}}}}}}}_0x495f45[_0x5ba89a(0x20b)](_0x5ba89a(0x202),{'success':_0x36a18c[_0x5ba89a(0x232)](_0x5ba89a(0x1c8)),'errors':_0x36a18c[_0x5ba89a(0x232)](_0x5ba89a(0x25a)),'role':_0x5b73cf,'profile':_0x5e3f66,'master_shop':_0x2f7138,'warehouse':_0x5f2e22,'transfer':_0x1960d4,'stock':_0x20c76f,'unit':_0x1e98b1,'language':_0x29aaba});}catch(_0x2045a4){console[_0x5ba89a(0x260)](_0x2045a4);}}),router[a0_0x3cbf87(0x1c0)]('/view/:id',auth,async(_0x29adc7,_0x43a3dd)=>{var _0x113dcc=a0_0x3cbf87;try{const _0x58ca32=_0x29adc7[_0x113dcc(0x1d4)]['id'],_0x2b4d73=await transfers[_0x113dcc(0x23a)](_0x58ca32);_0x43a3dd['json'](_0x29adc7[_0x113dcc(0x253)]);return;const {date:_0x4475fd,from_warehouse:_0x39e1e7,FromRoom_name:_0x657677,to_warehouse:_0x163ad1,ToRoom_name:_0x5604a6,prod_name:_0x58cb45,from_prod_qty:_0x370695,from_prod_level:_0x6c1ba4,from_prod_isle:_0x1bf181,from_prod_pallet:_0x58c402,to_prod_qty:_0x30e023,to_prod_level:_0x23cf8d,to_prod_isle:_0x1d6549,to_prod_pallet:_0x1b1ae3,primary_code:_0x564f34,secondary_code:_0x212910,product_code3:_0x32cc71,note:_0x1ea4fc,invoice:_0x350e96,expiry_date:_0x46ba92}=_0x29adc7[_0x113dcc(0x253)];if(typeof _0x58cb45==_0x113dcc(0x259))var _0x1f629e=[_0x29adc7['body'][_0x113dcc(0x211)]],_0x3afb3a=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x216)]],_0x5c6a27=[_0x29adc7[_0x113dcc(0x253)]['from_prod_level']],_0x4c2975=[_0x29adc7[_0x113dcc(0x253)]['from_prod_isle']],_0x82a12b=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1e5)]],_0x35d026=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x234)]],_0x214bae=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x213)]],_0x4a2107=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x201)]],_0x2a0b80=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x268)]],_0x1ea7f0=[_0x29adc7['body']['to_prod_pallet']],_0x81c19b=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x26d)]],_0x2e4d9f=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x215)]],_0x3fb8be=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x22f)]],_0xb48dab=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1e7)]],_0x416dfd=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x27a)]],_0xd53587=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1c9)]],_0x1de0ca=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x26b)]],_0x3fe09d=[_0x29adc7[_0x113dcc(0x253)]['unit']],_0x59fbae=[_0x29adc7['body']['secondary_unit']],_0x3e3517=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x254)]],_0x190485=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x21e)]],_0x48be35=[_0x29adc7[_0x113dcc(0x253)]['from_storage']],_0x3e0482=[_0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x255)]];else var _0x1f629e=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x211)]],_0x2e4d9f=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x215)]],_0x3fb8be=[..._0x29adc7['body'][_0x113dcc(0x22f)]],_0x35d026=[..._0x29adc7['body'][_0x113dcc(0x234)]],_0x81c19b=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x26d)]],_0x3afb3a=[..._0x29adc7['body'][_0x113dcc(0x216)]],_0x5c6a27=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x230)]],_0x4c2975=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x26e)]],_0x82a12b=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1e5)]],_0x214bae=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x213)]],_0x4a2107=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x201)]],_0x2a0b80=[..._0x29adc7['body'][_0x113dcc(0x268)]],_0x1ea7f0=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x28e)]],_0xb48dab=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1e7)]],_0x416dfd=[..._0x29adc7['body'][_0x113dcc(0x27a)]],_0xd53587=[..._0x29adc7['body'][_0x113dcc(0x1c9)]],_0x1de0ca=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x26b)]],_0x3fe09d=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x250)]],_0x59fbae=[..._0x29adc7[_0x113dcc(0x253)]['secondary_unit']],_0x3e3517=[..._0x29adc7['body']['batch_code']],_0x190485=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x21e)]],_0x48be35=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x1fa)]],_0x3e0482=[..._0x29adc7[_0x113dcc(0x253)][_0x113dcc(0x255)]];const _0x5cda3e=_0x1f629e[_0x113dcc(0x24f)](_0x2f3c1a=>{return _0x2f3c1a={'product_name':_0x2f3c1a};});_0x3afb3a[_0x113dcc(0x1d3)]((_0x4f3374,_0x2be26f)=>{var _0x483ae2=_0x113dcc;_0x5cda3e[_0x2be26f][_0x483ae2(0x289)]=_0x4f3374;}),_0x5c6a27[_0x113dcc(0x1d3)]((_0x2370e8,_0x32dacf)=>{var _0x96e6ad=_0x113dcc;_0x5cda3e[_0x32dacf][_0x96e6ad(0x291)]=_0x2370e8;}),_0x4c2975[_0x113dcc(0x1d3)]((_0x102b90,_0x5262a2)=>{_0x5cda3e[_0x5262a2]['from_bin']=_0x102b90;}),_0x82a12b['forEach']((_0x26358f,_0x8c7de0)=>{var _0x3dedbd=_0x113dcc;_0x5cda3e[_0x8c7de0][_0x3dedbd(0x1cc)]=_0x26358f;}),_0x214bae['forEach']((_0x3d35e2,_0xc7dfc6)=>{var _0x1b0ec2=_0x113dcc;_0x5cda3e[_0xc7dfc6][_0x1b0ec2(0x1c7)]=_0x3d35e2;}),_0x4a2107['forEach']((_0x3a76c2,_0xa47b1)=>{var _0x5b471f=_0x113dcc;_0x5cda3e[_0xa47b1][_0x5b471f(0x224)]=_0x3a76c2;}),_0x2a0b80[_0x113dcc(0x1d3)]((_0x3341b7,_0x49da94)=>{var _0x2fbee0=_0x113dcc;_0x5cda3e[_0x49da94][_0x2fbee0(0x261)]=_0x3341b7;}),_0x1ea7f0['forEach']((_0x17076d,_0x9c8cf6)=>{var _0x2d01b0=_0x113dcc;_0x5cda3e[_0x9c8cf6][_0x2d01b0(0x1ab)]=_0x17076d;}),_0xb48dab[_0x113dcc(0x1d3)]((_0x4b5770,_0xe6cd22)=>{var _0x21d3bf=_0x113dcc;_0x5cda3e[_0xe6cd22][_0x21d3bf(0x1e7)]=_0x4b5770;}),_0x416dfd['forEach']((_0x4c08e7,_0x5c9447)=>{var _0x569433=_0x113dcc;_0x5cda3e[_0x5c9447][_0x569433(0x27a)]=_0x4c08e7;}),_0xd53587['forEach']((_0x222533,_0x56c2ab)=>{var _0x229d96=_0x113dcc;_0x5cda3e[_0x56c2ab][_0x229d96(0x1ed)]=_0x222533;}),_0x1de0ca[_0x113dcc(0x1d3)]((_0x1fd76e,_0x4648e4)=>{var _0x452fcd=_0x113dcc;_0x5cda3e[_0x4648e4][_0x452fcd(0x256)]=_0x1fd76e;}),_0x3fe09d[_0x113dcc(0x1d3)]((_0x40ac10,_0x656f6b)=>{_0x5cda3e[_0x656f6b]['unit']=_0x40ac10;}),_0x59fbae['forEach']((_0x4c7bad,_0x4c953b)=>{var _0x21c5ed=_0x113dcc;_0x5cda3e[_0x4c953b][_0x21c5ed(0x226)]=_0x4c7bad;}),_0x3e3517['forEach']((_0x5f4f72,_0x5ca124)=>{var _0x3ec9c3=_0x113dcc;_0x5cda3e[_0x5ca124][_0x3ec9c3(0x254)]=_0x5f4f72;}),_0x190485[_0x113dcc(0x1d3)]((_0x21ad31,_0x217541)=>{var _0x3d047c=_0x113dcc;_0x5cda3e[_0x217541][_0x3d047c(0x21e)]=_0x21ad31;}),_0x2e4d9f[_0x113dcc(0x1d3)]((_0x5644ec,_0x3a7a12)=>{var _0x103533=_0x113dcc;_0x5cda3e[_0x3a7a12][_0x103533(0x215)]=_0x5644ec;}),_0x3fb8be[_0x113dcc(0x1d3)]((_0x3268c3,_0x1e67b7)=>{var _0xefa64a=_0x113dcc;_0x5cda3e[_0x1e67b7][_0xefa64a(0x276)]=_0x3268c3;}),_0x35d026['forEach']((_0xb5f257,_0x4ec929)=>{var _0x5ebe74=_0x113dcc;_0x5cda3e[_0x4ec929][_0x5ebe74(0x234)]=_0xb5f257;}),_0x81c19b[_0x113dcc(0x1d3)]((_0x1b28f9,_0x5456a9)=>{var _0x1c6273=_0x113dcc;_0x5cda3e[_0x5456a9][_0x1c6273(0x26d)]=_0x1b28f9;}),_0x48be35[_0x113dcc(0x1d3)]((_0x126db4,_0x5eb29e)=>{_0x5cda3e[_0x5eb29e]['from_storage']=_0x126db4;}),_0x3e0482[_0x113dcc(0x1d3)]((_0x4e4108,_0x46f896)=>{var _0x5a9454=_0x113dcc;_0x5cda3e[_0x46f896][_0x5a9454(0x270)]=_0x4e4108;});const _0x3701ab=_0x5cda3e[_0x113dcc(0x1e0)](_0x416197=>_0x416197['to_quantity']!=='0'&&_0x416197[_0x113dcc(0x1c7)]!==''||_0x416197[_0x113dcc(0x1ab)]!=='0'&&_0x416197['to_floorlevel']!=='');var _0x3bb390=0x0;_0x3701ab[_0x113dcc(0x1d3)](_0x3780db=>{var _0xead7e7=_0x113dcc;parseInt(_0x3780db[_0xead7e7(0x289)])<parseInt(_0x3780db[_0xead7e7(0x1c7)])&&_0x3bb390++;});if(_0x3bb390!=0x0)return _0x29adc7['flash']('errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x43a3dd['redirect'](_0x113dcc(0x26f));const _0x1cdbab=await warehouse[_0x113dcc(0x20c)]({'name':_0x2b4d73[_0x113dcc(0x25e)],'room':_0x2b4d73[_0x113dcc(0x220)]});_0x2b4d73[_0x113dcc(0x244)][_0x113dcc(0x1d3)](_0x24992c=>{var _0x5c48b5=_0x113dcc;if(_0x24992c[_0x5c48b5(0x1c7)]>0x0){const _0x1a5d49=_0x1cdbab[_0x5c48b5(0x269)][_0x5c48b5(0x24f)](_0x470eaa=>{var _0x1e3c04=_0x5c48b5;_0x470eaa[_0x1e3c04(0x1ec)]==_0x24992c['product_name']&&_0x470eaa[_0x1e3c04(0x1d6)]==_0x24992c[_0x1e3c04(0x1cc)]&&_0x470eaa[_0x1e3c04(0x264)]==_0x24992c[_0x1e3c04(0x234)]&&_0x470eaa['bin']==_0x24992c[_0x1e3c04(0x23f)]&&_0x470eaa[_0x1e3c04(0x1f0)]==_0x24992c[_0x1e3c04(0x291)]&&_0x470eaa[_0x1e3c04(0x276)]==_0x24992c['from_rack']&&_0x470eaa[_0x1e3c04(0x215)]==_0x24992c[_0x1e3c04(0x1fa)]&&(_0x470eaa['product_stock']=parseInt(_0x470eaa['product_stock'])+parseInt(_0x24992c[_0x1e3c04(0x1c7)]));});}}),await _0x1cdbab[_0x113dcc(0x24e)]();const _0x3ba89d=await warehouse[_0x113dcc(0x20c)]({'name':_0x2b4d73['to_warehouse'],'room':_0x2b4d73[_0x113dcc(0x20a)]});_0x2b4d73[_0x113dcc(0x244)][_0x113dcc(0x1d3)](_0x2a8cd5=>{var _0x4eff12=_0x113dcc;if(_0x2a8cd5[_0x4eff12(0x1c7)]>0x0){const _0xae9a71=_0x3ba89d[_0x4eff12(0x269)][_0x4eff12(0x24f)](_0x2c8550=>{var _0x1bc427=_0x4eff12;_0x2c8550['product_name']==_0x2a8cd5['product_name']&&_0x2c8550[_0x1bc427(0x1d6)]==_0x2a8cd5[_0x1bc427(0x1ab)]&&_0x2c8550[_0x1bc427(0x264)]==_0x2a8cd5['to_types']&&_0x2c8550[_0x1bc427(0x1f8)]==_0x2a8cd5[_0x1bc427(0x261)]&&_0x2c8550[_0x1bc427(0x1f0)]==_0x2a8cd5[_0x1bc427(0x224)]&&_0x2c8550[_0x1bc427(0x276)]==_0x2a8cd5['rack']&&_0x2c8550[_0x1bc427(0x215)]==_0x2a8cd5['storage']&&(_0x2c8550[_0x1bc427(0x298)]=parseInt(_0x2c8550[_0x1bc427(0x298)])-parseInt(_0x2a8cd5[_0x1bc427(0x1c7)]));});}}),await _0x3ba89d[_0x113dcc(0x24e)](),_0x2b4d73[_0x113dcc(0x221)]=_0x4475fd,_0x2b4d73[_0x113dcc(0x25e)]=_0x39e1e7,_0x2b4d73['to_warehouse']=_0x163ad1,_0x2b4d73['product']=_0x3701ab,_0x2b4d73[_0x113dcc(0x241)]=_0x1ea4fc,_0x2b4d73[_0x113dcc(0x274)]=_0x350e96;const _0x532087=await _0x2b4d73[_0x113dcc(0x24e)]();console[_0x113dcc(0x260)](_0x532087);const _0x5321f1=await warehouse['findOne']({'name':_0x39e1e7,'room':_0x657677});_0x532087[_0x113dcc(0x244)]['forEach'](_0x44344a=>{var _0x28a817=_0x113dcc;if(_0x44344a[_0x28a817(0x1c7)]>0x0){const _0x3799ef=_0x5321f1[_0x28a817(0x269)][_0x28a817(0x24f)](_0x5e5c66=>{var _0x27ee1f=_0x28a817;_0x5e5c66[_0x27ee1f(0x1ec)]==_0x44344a[_0x27ee1f(0x1ec)]&&_0x5e5c66[_0x27ee1f(0x1d6)]==_0x44344a[_0x27ee1f(0x1cc)]&&_0x5e5c66['type']==_0x44344a[_0x27ee1f(0x234)]&&_0x5e5c66['bin']==_0x44344a[_0x27ee1f(0x23f)]&&_0x5e5c66[_0x27ee1f(0x1f0)]==_0x44344a[_0x27ee1f(0x291)]&&_0x5e5c66[_0x27ee1f(0x276)]==_0x44344a['from_rack']&&_0x5e5c66[_0x27ee1f(0x215)]==_0x44344a[_0x27ee1f(0x1fa)]&&(_0x5e5c66['product_stock']=parseInt(_0x5e5c66[_0x27ee1f(0x298)])-parseInt(_0x44344a[_0x27ee1f(0x1c7)]));});}}),await _0x5321f1[_0x113dcc(0x24e)]();const _0x182684=await warehouse['findOne']({'name':_0x163ad1,'room':_0x5604a6});_0x532087['product'][_0x113dcc(0x1d3)](_0x46b039=>{var _0x2f0fd3=_0x113dcc;if(_0x46b039[_0x2f0fd3(0x1c7)]>0x0){var _0x1e1257=0x0;const _0x43c672=_0x182684[_0x2f0fd3(0x269)][_0x2f0fd3(0x24f)](_0xa49874=>{var _0x58ac53=_0x2f0fd3;_0xa49874['product_name']==_0x46b039[_0x58ac53(0x1ec)]&&_0xa49874[_0x58ac53(0x1d6)]==_0x46b039[_0x58ac53(0x1ab)]&&_0xa49874[_0x58ac53(0x264)]==_0x46b039['to_types']&&_0xa49874[_0x58ac53(0x1f8)]==_0x46b039[_0x58ac53(0x261)]&&_0xa49874[_0x58ac53(0x1f0)]==_0x46b039[_0x58ac53(0x224)]&&_0xa49874[_0x58ac53(0x276)]==_0x46b039['rack']&&_0xa49874['storage']==_0x46b039['storage']&&(_0xa49874[_0x58ac53(0x298)]=parseInt(_0xa49874[_0x58ac53(0x298)])+parseInt(_0x46b039[_0x58ac53(0x1c7)]),_0x1e1257++);});_0x1e1257=='0'&&(_0x182684[_0x2f0fd3(0x269)]=_0x182684['product_details'][_0x2f0fd3(0x231)]({'product_name':_0x46b039[_0x2f0fd3(0x1ec)],'product_stock':_0x46b039[_0x2f0fd3(0x1c7)],'bay':_0x46b039['to_bay'],'bin':_0x46b039['to_bin'],'type':_0x46b039[_0x2f0fd3(0x26d)],'floorlevel':_0x46b039['to_floorlevel'],'storage':_0x46b039[_0x2f0fd3(0x215)],'rack':_0x46b039[_0x2f0fd3(0x276)],'product_code':_0x46b039[_0x2f0fd3(0x1ed)],'primary_code':_0x46b039[_0x2f0fd3(0x1e7)],'secondary_code':_0x46b039['secondary_code'],'maxProducts':_0x46b039[_0x2f0fd3(0x256)],'storage':_0x46b039[_0x2f0fd3(0x215)],'rack':_0x46b039['rack']}));}}),await _0x182684[_0x113dcc(0x24e)](),_0x29adc7['flash']('success',_0x113dcc(0x207)),_0x43a3dd['redirect']('/transfer/view');}catch(_0x2d4bc7){console[_0x113dcc(0x260)](_0x2d4bc7);}}),router[a0_0x3cbf87(0x1c0)](a0_0x3cbf87(0x28d),async(_0x416e64,_0x189e3b)=>{var _0x6d854f=a0_0x3cbf87;const {FromWareHouse:_0x5d302c,FromRoom:_0x3115f8,ToWarehouse:_0x5c6897,ToRoom:_0x30c11a,primary_code:_0xb01eb6,Roomslist:_0x397e8d}=_0x416e64['body'],_0x3503a4=_0x397e8d[_0x6d854f(0x246)](','),_0x47a643=[];async function _0x375bbd(_0x48e7b3){var _0x27c43d=_0x6d854f;const _0x4e4616=await warehouse[_0x27c43d(0x204)]([{'$match':{'name':_0x5d302c,'room':_0x48e7b3}},{'$unwind':_0x27c43d(0x1d1)},{'$match':{'product_details.primary_code':_0xb01eb6}},{'$group':{'_id':_0x27c43d(0x22e),'name':{'$first':_0x27c43d(0x1af)},'instock':{'$first':_0x27c43d(0x1cd)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x27c43d(0x1df)},'product_code':{'$first':_0x27c43d(0x242)},'level':{'$first':_0x27c43d(0x1bd)},'isle':{'$first':_0x27c43d(0x23c)},'type':{'$first':_0x27c43d(0x20d)},'pallet':{'$first':_0x27c43d(0x238)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x27c43d(0x266)},'storage':{'$first':_0x27c43d(0x267)},'rack':{'$first':_0x27c43d(0x1b1)},'expiry_date':{'$first':_0x27c43d(0x29c)},'production_date':{'$first':_0x27c43d(0x20f)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x27c43d(0x277)},'maxProducts':{'$first':_0x27c43d(0x27e)},'invoice_product':{'$first':_0x27c43d(0x1dc)}}}]),_0x2e50d6=await warehouse[_0x27c43d(0x204)]([{'$match':{'name':_0x5d302c,'room':_0x48e7b3}},{'$unwind':_0x27c43d(0x1d1)},{'$match':{'product_details.secondary_code':_0xb01eb6}},{'$group':{'_id':_0x27c43d(0x22e),'name':{'$first':_0x27c43d(0x1af)},'instock':{'$first':_0x27c43d(0x1cd)},'primary_code':{'$first':_0x27c43d(0x212)},'secondary_code':{'$first':_0x27c43d(0x1df)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x27c43d(0x23c)},'type':{'$first':_0x27c43d(0x20d)},'pallet':{'$first':_0x27c43d(0x238)},'unit':{'$first':_0x27c43d(0x271)},'secondary_unit':{'$first':_0x27c43d(0x266)},'storage':{'$first':_0x27c43d(0x267)},'rack':{'$first':_0x27c43d(0x1b1)},'expiry_date':{'$first':_0x27c43d(0x29c)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x27c43d(0x1b9)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x27c43d(0x27e)},'invoice_product':{'$first':_0x27c43d(0x1dc)}}}]);if(_0x4e4616[_0x27c43d(0x240)]>0x0)_0x47a643['push'](_0x4e4616);else _0x2e50d6[_0x27c43d(0x240)]>0x0&&_0x47a643[_0x27c43d(0x1cf)](_0x2e50d6);}const _0x50dbe9=_0x3503a4['map'](_0x35c7cb=>_0x375bbd(_0x35c7cb));await Promise['all'](_0x50dbe9),_0x189e3b[_0x6d854f(0x1b7)](_0x47a643);}),router[a0_0x3cbf87(0x1c0)]('/barcode_scanner2',async(_0x4c02ce,_0x100680)=>{var _0x2a44fa=a0_0x3cbf87;try{const {FromWareHouse:_0x480b1f,FromRoom:_0x4dfad3,ToWarehouse:_0x1b1f49,ToRoom:_0x1e683b,secondary_code:_0x40060a}=_0x4c02ce[_0x2a44fa(0x253)],_0x54ce11=await warehouse[_0x2a44fa(0x204)]([{'$match':{'name':_0x480b1f}},{'$unwind':_0x2a44fa(0x1d1)},{'$match':{'product_details.secondary_code':_0x40060a}},{'$group':{'_id':_0x2a44fa(0x22e),'name':{'$first':_0x2a44fa(0x1af)},'primary_code':{'$first':_0x2a44fa(0x212)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2a44fa(0x242)},'instock':{'$first':_0x2a44fa(0x1cd)},'warehouse':{'$first':_0x2a44fa(0x223)},'level':{'$first':_0x2a44fa(0x1d5)},'isle':{'$first':_0x2a44fa(0x25c)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x2a44fa(0x271)}}}]);_0x100680[_0x2a44fa(0x272)](0xc8)['json'](_0x54ce11);}catch(_0x503e2a){_0x100680[_0x2a44fa(0x272)](0x194)['json']({'message':_0x503e2a[_0x2a44fa(0x299)]});}}),router[a0_0x3cbf87(0x1c0)](a0_0x3cbf87(0x1b6),async(_0xe05011,_0x40013c)=>{var _0x2c3fd2=a0_0x3cbf87;try{const {FromWareHouse:_0x1517e5,FromRoom:_0x330f73,ToWarehouse:_0x4542ab,ToRoom:_0x47004c,product_code:_0x253d0b}=_0xe05011[_0x2c3fd2(0x253)],_0x38c0b3=await warehouse['aggregate']([{'$match':{'name':_0x1517e5}},{'$unwind':_0x2c3fd2(0x1d1)},{'$match':{'product_details.product_code':_0x253d0b}},{'$group':{'_id':_0x2c3fd2(0x22e),'name':{'$first':_0x2c3fd2(0x1af)},'primary_code':{'$first':_0x2c3fd2(0x212)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2c3fd2(0x242)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x2c3fd2(0x223)},'level':{'$first':_0x2c3fd2(0x1d5)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x2c3fd2(0x206)},'maxProducts':{'$first':_0x2c3fd2(0x27e)},'unit':{'$first':_0x2c3fd2(0x271)}}}]);_0x40013c[_0x2c3fd2(0x272)](0xc8)[_0x2c3fd2(0x1b7)](_0x38c0b3);}catch(_0x1a8b68){_0x40013c['status'](0x194)['json']({'message':_0x1a8b68[_0x2c3fd2(0x299)]});}}),router[a0_0x3cbf87(0x1c0)](a0_0x3cbf87(0x1b3),async(_0x595a4c,_0x4adea4)=>{var _0x4762fd=a0_0x3cbf87;const {level:_0x4d392a,isle:_0x5ea25d,pallet:_0x26a567,warehouses:_0x44c652,room:_0x2700aa}=_0x595a4c[_0x4762fd(0x253)];try{const _0x1323a1=await warehouse[_0x4762fd(0x204)]([{'$match':{'name':_0x44c652,'room':_0x2700aa}},{'$unwind':_0x4762fd(0x1d1)},{'$match':{'product_details.level':parseInt(_0x4d392a),'product_details.isle':_0x5ea25d,'product_details.pallet':parseInt(_0x26a567)}},{'$group':{'_id':_0x4762fd(0x22e),'name':{'$first':_0x4762fd(0x1af)},'product_stock':{'$first':_0x4762fd(0x1cd)},'level':{'$first':_0x4762fd(0x1d5)},'isle':{'$first':_0x4762fd(0x25c)},'pallet':{'$first':_0x4762fd(0x206)},'maxProducts':{'$first':_0x4762fd(0x27e)}}}]);_0x4adea4[_0x4762fd(0x272)](0xc8)[_0x4762fd(0x1b7)](_0x1323a1);}catch(_0x3e7619){_0x4adea4[_0x4762fd(0x272)](0x194)[_0x4762fd(0x1b7)]({'message':_0x3e7619[_0x4762fd(0x299)]});}}),module[a0_0x3cbf87(0x285)]=router;function a0_0x157b(){var _0x512997=['to_bay','</h5>','secondary_unit','Transfer\x20Finalize\x20Successfully','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Arabic\x20(ae)','Return\x20Rooms','site_title','role','/preview/:id','$product_details._id','rak','from_prod_level','concat','flash','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','from_types','</div>','Portuguese\x20(BR)','</tr>','$product_details.floorlevel','RMSEmail','findById','\x20Order\x20Number\x20:\x20','$product_details.bin','language','</thead>','from_bin','length','note','$product_details.product_code','ToRoomAssigned','product','COLD\x20STORAGE','split','An\x20error\x20occurred.','padStart','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','host','<div>','649380wzZrZL','../public/language/languages.json','save','map','unit','Rack\x20B','Hindi','body','batch_code','from_rak','maxProducts','Arabic','Rack\x20E','string','errors','TRF-','$product_details.isle','</span>','from_warehouse','Rack\x20A','log','to_bin','15872200gAXCsq','/view/:id','type','max_per_unit','$product_details.secondary_unit','$product_details.storage','to_prod_isle','product_details','</table>','MaxStocks_data2','English','to_types','from_prod_isle','back','from_rack','$product_details.unit','status','all','invoice','\x20<>\x20','rack','$room','warehouse','9892848gsGItL','secondary_code','here','get','master','$product_details.maxProducts','</body></html>','createTransport','from_invoice','password','Chinese','2535HxKZDm','exports','16IvXBGd','$product.to_room_name','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','from_quantity','redirect','New_Qty_Converted','Rack\x20F','/barcode_scanner','to_prod_pallet','Logo.png','slice','from_bay','$date','English\x20(US)','../models/all_models','nodemailer','French','then','product_stock','message','sendMail','find','$product_details.expiry_date','add_transfer','$invoice','prod_cat','express','to_floorlevel','DRY\x20STORAGE','<hr\x20class=\x22my-3\x22>','1044HcrGAp','$product_details.product_name','production_date','$product_details.rack','RoomAssigned','/CheckingWarehouse','<html><head><title></title>','Enclosed','/barcode_scanner3','json','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$product_details.maxPerUnit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','Rack\x20D','To_invoice','$product_details.bay','$product','id_transaction_id','post','<strong>\x20Regards\x20</strong>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','/view/add_transfer','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<tbody\x20style=\x22text-align:\x20center;\x22>','$from_warehouse','to_quantity','success','product_code3','toString','True','from_floorlevel','$product_details.product_stock','/transfer/preview/','push','Spanish','$product_details','Receiving\x20Area','forEach','params','$product_details.level','floorlevel','132417hCnrJR','<h5\x20style=\x22text-align:\x20left;\x22>','Raw\x20Materials','random','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','$product_details.invoice','680FfasBo','2351712JYfxxW','$product_details.secondary_code','filter','finalize','to_room_name','_id','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','from_prod_pallet','/../public','primary_code','email','Product\x20Transfer\x20successfully','Email\x20sent\x20successfully','Floor','product_name','product_code','<h5>','error','bay','</tbody>','\x20</h2>','from_room_name','Shelves','Portuguese','German','\x20Order\x20Date\x20:\x20','bin','<!DOCTYPE\x20html>','from_storage','Rack\x20C','/transfer/view','primary_unit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Ambient','639219CLgXhc','to_prod_level','edit_transfer','catch','aggregate','/picking_list/PDF_transfer_rm/','$product_details.pallet','Transfer\x20Edit\x20Successfully','staff','getMonth','to_room','render','findOne','$product_details.type','</td>','$product_details.production_date','to_invoice','prod_name','$product_details.primary_code','to_prod_qty','to_warehouse','storage','from_prod_qty','Level','$isAllowEdit','maxperunit','Enabled','id_transaction','port','$product.from_room_name','expiry_date','user','from_room','date','An\x20error\x20occurred\x20while\x20saving\x20data.','$name'];a0_0x157b=function(){return _0x512997;};return a0_0x157b();}