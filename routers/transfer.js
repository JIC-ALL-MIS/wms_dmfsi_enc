function a0_0x5d5c(_0x3dc8d0,_0x407395){var _0x15909b=a0_0x1590();return a0_0x5d5c=function(_0x5d5cc6,_0xa26e96){_0x5d5cc6=_0x5d5cc6-0x8c;var _0x45797b=_0x15909b[_0x5d5cc6];return _0x45797b;},a0_0x5d5c(_0x3dc8d0,_0x407395);}var a0_0x3e0d42=a0_0x5d5c;(function(_0x2c7aa6,_0x46cb94){var _0xf82e2d=a0_0x5d5c,_0x31a002=_0x2c7aa6();while(!![]){try{var _0x32da6f=parseInt(_0xf82e2d(0xbb))/0x1*(-parseInt(_0xf82e2d(0xd1))/0x2)+parseInt(_0xf82e2d(0x14c))/0x3*(-parseInt(_0xf82e2d(0xdb))/0x4)+parseInt(_0xf82e2d(0xaf))/0x5*(parseInt(_0xf82e2d(0x141))/0x6)+parseInt(_0xf82e2d(0xe8))/0x7+parseInt(_0xf82e2d(0x9d))/0x8*(parseInt(_0xf82e2d(0x12c))/0x9)+-parseInt(_0xf82e2d(0xb9))/0xa+parseInt(_0xf82e2d(0xd6))/0xb*(parseInt(_0xf82e2d(0xb3))/0xc);if(_0x32da6f===_0x46cb94)break;else _0x31a002['push'](_0x31a002['shift']());}catch(_0x3981e1){_0x31a002['push'](_0x31a002['shift']());}}}(a0_0x1590,0x7a655));const express=require(a0_0x3e0d42(0xf3)),app=express(),router=express[a0_0x3e0d42(0xcb)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x3e0d42(0x150)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x3e0d42(0xa1));router[a0_0x3e0d42(0x180)](a0_0x3e0d42(0xf6),auth,async(_0x3ed5fc,_0x3db85a)=>{var _0x43821c=a0_0x3e0d42;try{const {username:_0x4f0d5c,email:_0x52b6f8,role:_0x411d19}=_0x3ed5fc[_0x43821c(0x14e)],_0x135e6e=_0x3ed5fc[_0x43821c(0x14e)],_0x4d54ff=await profile[_0x43821c(0xba)]({'email':_0x135e6e[_0x43821c(0xed)]}),_0x41f5b9=await master_shop['find']();console[_0x43821c(0xcd)](_0x43821c(0x102),_0x41f5b9);let _0x550a80;if(_0x135e6e[_0x43821c(0xfa)]==_0x43821c(0x97)){const _0x19a83a=await staff[_0x43821c(0xba)]({'email':_0x135e6e['email']});_0x550a80=await transfers[_0x43821c(0x125)]({'from_warehouse':_0x19a83a[_0x43821c(0x105)]});}else _0x550a80=await transfers[_0x43821c(0x91)]([{'$unwind':_0x43821c(0x143)},{'$group':{'_id':_0x43821c(0x11f),'invoice':{'$first':_0x43821c(0x129)},'date':{'$first':_0x43821c(0x119)},'from_warehouse':{'$first':_0x43821c(0x132)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x43821c(0xf2)},'to_room_name':{'$addToSet':_0x43821c(0x176)},'finalize':{'$first':_0x43821c(0xa9)},'isAllowEdit':{'$first':_0x43821c(0x178)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x41f5b9[0x0]['language']=='English\x20(US)'){var _0x2b61b2=users['English'];console[_0x43821c(0xcd)](_0x2b61b2);}else{if(_0x41f5b9[0x0][_0x43821c(0x179)]==_0x43821c(0xc1))var _0x2b61b2=users[_0x43821c(0xc1)];else{if(_0x41f5b9[0x0][_0x43821c(0x179)]==_0x43821c(0xe4))var _0x2b61b2=users[_0x43821c(0xe4)];else{if(_0x41f5b9[0x0]['language']==_0x43821c(0x158))var _0x2b61b2=users[_0x43821c(0x158)];else{if(_0x41f5b9[0x0][_0x43821c(0x179)]==_0x43821c(0x14b))var _0x2b61b2=users[_0x43821c(0x14b)];else{if(_0x41f5b9[0x0][_0x43821c(0x179)]==_0x43821c(0x12b))var _0x2b61b2=users[_0x43821c(0x163)];else{if(_0x41f5b9[0x0][_0x43821c(0x179)]=='Chinese')var _0x2b61b2=users[_0x43821c(0x11c)];else{if(_0x41f5b9[0x0][_0x43821c(0x179)]==_0x43821c(0x146))var _0x2b61b2=users[_0x43821c(0x16f)];}}}}}}}_0x3db85a[_0x43821c(0x138)](_0x43821c(0x175),{'success':_0x3ed5fc['flash'](_0x43821c(0xdc)),'errors':_0x3ed5fc['flash'](_0x43821c(0xa7)),'role':_0x135e6e,'profile':_0x4d54ff,'master_shop':_0x41f5b9,'transfer':_0x550a80,'language':_0x2b61b2});}catch(_0x35bd02){console[_0x43821c(0xcd)](_0x35bd02);}});async function getRandom8DigitNumber(){var _0x3beb97=a0_0x3e0d42;const _0x2ba1ae=0x989680,_0x3945ca=0x5f5e0ff,_0x593b13=Math[_0x3beb97(0x16d)](Math[_0x3beb97(0x147)]()*(_0x3945ca-_0x2ba1ae+0x1))+_0x2ba1ae;var _0x498029;const _0x5e5094=await transfers[_0x3beb97(0xba)]({'invoice':'TRF-'+_0x593b13});return _0x5e5094&&_0x5e5094[_0x3beb97(0xf7)]>0x0?_0x498029=_0x3beb97(0x172)+_0x593b13:_0x498029=_0x3beb97(0x172)+_0x593b13,_0x498029;}router[a0_0x3e0d42(0x180)](a0_0x3e0d42(0x135),auth,async(_0x1cbc63,_0x2cb1e2)=>{var _0x4a825f=a0_0x3e0d42;try{const {username:_0x313a91,email:_0x2eba1a,role:_0x5c991f}=_0x1cbc63['user'],_0x619d01=_0x1cbc63['user'],_0x53ef07=await profile['findOne']({'email':_0x619d01[_0x4a825f(0xed)]}),_0xab9c09=await master_shop[_0x4a825f(0x125)]();console[_0x4a825f(0xcd)](_0x4a825f(0x102),_0xab9c09);let _0x48c734;if(_0x619d01[_0x4a825f(0xfa)]==_0x4a825f(0x97)){const _0x39a287=await staff[_0x4a825f(0xba)]({'email':_0x619d01[_0x4a825f(0xed)]});_0x48c734=await warehouse[_0x4a825f(0x91)]([{'$match':{'status':_0x4a825f(0x15f),'name':_0x39a287[_0x4a825f(0x105)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x4a825f(0xbe),'name':{'$first':_0x4a825f(0xbe)}}}]);}else _0x48c734=await warehouse[_0x4a825f(0x91)]([{'$match':{'status':_0x4a825f(0x15f),'warehouse_category':_0x4a825f(0x99)}},{'$group':{'_id':_0x4a825f(0xbe),'name':{'$first':_0x4a825f(0xbe)}}}]);var _0x5de202=[_0x4a825f(0x10b),_0x4a825f(0xde),_0x4a825f(0x14f)];const _0x4ed6ab=await transfers[_0x4a825f(0x125)]({}),_0x2b96ef=_0x4ed6ab[_0x4a825f(0xf7)]+0x1,_0x30158d=_0x4a825f(0x172)+_0x2b96ef[_0x4a825f(0x10f)]()['padStart'](0x5,'0');if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0xb6)){var _0xdf41c6=users[_0x4a825f(0x15a)];console[_0x4a825f(0xcd)](_0xdf41c6);}else{if(_0xab9c09[0x0][_0x4a825f(0x179)]=='Hindi')var _0xdf41c6=users[_0x4a825f(0xc1)];else{if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0xe4))var _0xdf41c6=users[_0x4a825f(0xe4)];else{if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0x158))var _0xdf41c6=users[_0x4a825f(0x158)];else{if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0x14b))var _0xdf41c6=users[_0x4a825f(0x14b)];else{if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0x12b))var _0xdf41c6=users['Portuguese'];else{if(_0xab9c09[0x0]['language']==_0x4a825f(0x11c))var _0xdf41c6=users[_0x4a825f(0x11c)];else{if(_0xab9c09[0x0][_0x4a825f(0x179)]==_0x4a825f(0x146))var _0xdf41c6=users[_0x4a825f(0x16f)];}}}}}}}const _0x1ec524=getRandom8DigitNumber();_0x1ec524[_0x4a825f(0x94)](_0x38bcb7=>{var _0x2a693c=_0x4a825f;_0x2cb1e2[_0x2a693c(0x138)](_0x2a693c(0x104),{'success':_0x1cbc63[_0x2a693c(0x9b)]('success'),'errors':_0x1cbc63[_0x2a693c(0x9b)]('errors'),'role':_0x619d01,'profile':_0x53ef07,'master_shop':_0xab9c09,'warehouse':_0x48c734,'language':_0xdf41c6,'rooms_data':_0x5de202,'invoice':_0x38bcb7});})[_0x4a825f(0x12f)](_0x559a19=>{var _0x4b2298=_0x4a825f;_0x1cbc63[_0x4b2298(0x9b)]('errors',_0x4b2298(0xf8)),_0x2cb1e2['redirect'](_0x4b2298(0x174));});}catch(_0x311939){console[_0x4a825f(0xcd)](_0x311939);}}),router[a0_0x3e0d42(0xa4)](a0_0x3e0d42(0x135),auth,async(_0x21bf4e,_0x13dd58)=>{var _0x5287af=a0_0x3e0d42;try{console[_0x5287af(0xcd)](_0x21bf4e[_0x5287af(0x113)]);const {date:_0x3dbd0c,from_warehouse:_0x36d15a,FromRoom_name:_0x788186,to_warehouse:_0x40d470,ToRoom_name:_0x4c115d,prod_name:_0x3f768f,from_prod_qty:_0x48b9d7,from_prod_level:_0x37f5c4,from_prod_isle:_0x3c4d8d,from_prod_pallet:_0x212c11,to_prod_qty:_0x5ad557,to_prod_level:_0xf98ae0,to_prod_isle:_0x22a2f3,to_prod_pallet:_0xb825e4,primary_code:_0x497b7c,secondary_code:_0x323628,product_code3:_0x1251f6,note:_0x1366f6,MaxStocks_data2:_0x3bd40a,invoice:_0x2a3d4d,expiry_date:_0x442efc}=_0x21bf4e[_0x5287af(0x113)];if(typeof _0x3f768f==_0x5287af(0x13f))var _0x428db8=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x103)]],_0x4b6f68=[_0x21bf4e['body'][_0x5287af(0x114)]],_0x23b13f=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x115)]],_0xd32a5f=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0xd0)]],_0x234393=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x154)]],_0x20260f=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x161)]],_0x222e21=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x160)]],_0x343bc4=[_0x21bf4e['body']['product_code3']],_0xe6bf61=[_0x21bf4e['body']['MaxStocks_data2']],_0x377132=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0xab)]],_0x3134d1=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x13b)]],_0x2e4cac=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0xb7)]],_0x78b615=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x112)]],_0x4fe0b9=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0xe0)]],_0x3f35a7=[_0x21bf4e['body']['production_date']],_0x2b2655=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x165)]],_0x21af95=[_0x21bf4e[_0x5287af(0x113)]['RoomAssigned']],_0x2d087a=[_0x21bf4e[_0x5287af(0x113)][_0x5287af(0x120)]],_0x3769c5=[_0x21bf4e[_0x5287af(0x113)]['from_invoice']],_0x50838d=[_0x21bf4e['body'][_0x5287af(0x166)]];else var _0x428db8=[..._0x21bf4e[_0x5287af(0x113)]['prod_name']],_0x4b6f68=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x114)]],_0x23b13f=[..._0x21bf4e['body'][_0x5287af(0x115)]],_0xd32a5f=[..._0x21bf4e[_0x5287af(0x113)]['New_Qty_Converted']],_0x234393=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x154)]],_0x20260f=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x161)]],_0x222e21=[..._0x21bf4e['body'][_0x5287af(0x160)]],_0x343bc4=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x10c)]],_0xe6bf61=[..._0x21bf4e['body'][_0x5287af(0xf1)]],_0x377132=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0xab)]],_0x3134d1=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x13b)]],_0x2e4cac=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0xb7)]],_0x78b615=[..._0x21bf4e[_0x5287af(0x113)]['expiry_date']],_0x4fe0b9=[..._0x21bf4e['body'][_0x5287af(0xe0)]],_0x3f35a7=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0xcf)]],_0x2b2655=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x165)]],_0x21af95=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0xff)]],_0x2d087a=[..._0x21bf4e['body']['ToRoomAssigned']],_0x3769c5=[..._0x21bf4e[_0x5287af(0x113)]['from_invoice']],_0x50838d=[..._0x21bf4e[_0x5287af(0x113)][_0x5287af(0x166)]];const _0x5048eb=_0x428db8[_0x5287af(0x9e)](_0x1fdb73=>{return _0x1fdb73={'product_name':_0x1fdb73};});_0x4b6f68[_0x5287af(0x98)]((_0x44738f,_0x1056ed)=>{var _0x57ea20=_0x5287af;_0x5048eb[_0x1056ed][_0x57ea20(0x12a)]=_0x44738f;}),_0x3769c5[_0x5287af(0x98)]((_0x1885d7,_0x6c5238)=>{var _0x3cd5bf=_0x5287af;_0x5048eb[_0x6c5238][_0x3cd5bf(0x8c)]=_0x1885d7;}),_0x50838d['forEach']((_0x175de1,_0x256ac9)=>{var _0x1be150=_0x5287af;_0x5048eb[_0x256ac9][_0x1be150(0x137)]=_0x175de1;}),_0x23b13f[_0x5287af(0x98)]((_0xb28f7d,_0x2ac714)=>{var _0x55d4c9=_0x5287af;_0x21af95[_0x55d4c9(0x98)]((_0xd65206,_0x4a44b2)=>{var _0x292671=_0x55d4c9;if(_0xd65206==_0x292671(0xdf)&&_0x2ac714==_0x4a44b2){var _0x4fe600=_0xb28f7d[_0x292671(0x157)](0x3);_0x5048eb[_0x2ac714][_0x292671(0xbc)]=_0xb28f7d[0x0],_0x5048eb[_0x2ac714][_0x292671(0xd7)]=_0xb28f7d[0x1],_0x5048eb[_0x2ac714][_0x292671(0xdd)]=0x0,_0x5048eb[_0x2ac714]['from_bin']=0x0,_0x5048eb[_0x2ac714][_0x292671(0xd3)]=_0x292671(0xb4),_0x5048eb[_0x2ac714][_0x292671(0xeb)]=_0x4fe600;}else{if(_0xd65206==_0x292671(0x14a)&&_0x2ac714==_0x4a44b2){var _0x4fe600=_0xb28f7d['slice'](0x3);_0x5048eb[_0x2ac714][_0x292671(0xbc)]=_0xb28f7d[0x0],_0x5048eb[_0x2ac714][_0x292671(0xd7)]=_0xb28f7d[0x1],_0x5048eb[_0x2ac714][_0x292671(0xdd)]=0x0,_0x5048eb[_0x2ac714][_0x292671(0x9c)]=0x0,_0x5048eb[_0x2ac714][_0x292671(0xd3)]=_0x292671(0xb4),_0x5048eb[_0x2ac714][_0x292671(0xeb)]=_0xb28f7d[0x5];}else{if(_0x2ac714==_0x4a44b2){var _0x51e143;if(_0xb28f7d[0x4]=='L')_0x51e143=_0x292671(0x10e);else _0xb28f7d[0x4]=='F'&&(_0x51e143=_0x292671(0xb4));_0x5048eb[_0x2ac714][_0x292671(0xbc)]=_0xb28f7d[0x0],_0x5048eb[_0x2ac714][_0x292671(0xd7)]=_0xb28f7d[0x1],_0x5048eb[_0x2ac714][_0x292671(0xdd)]=_0xb28f7d[0x2],_0x5048eb[_0x2ac714][_0x292671(0x9c)]=_0xb28f7d[0x3],_0x5048eb[_0x2ac714][_0x292671(0xd3)]=_0x51e143,_0x5048eb[_0x2ac714][_0x292671(0xeb)]=_0xb28f7d[0x5];}}}});}),_0xd32a5f[_0x5287af(0x98)]((_0x2482c5,_0x5593d4)=>{var _0x2786c3=_0x5287af;_0x5048eb[_0x5593d4][_0x2786c3(0x9f)]=_0x2482c5;}),_0x234393[_0x5287af(0x98)]((_0x108f94,_0xe3b8f2)=>{var _0x14eb99=_0x5287af;_0x2d087a[_0x14eb99(0x98)]((_0x45a47b,_0x13e2b4)=>{var _0x3eea87=_0x14eb99;if(_0x45a47b==_0x3eea87(0xdf)&&_0xe3b8f2==_0x13e2b4){var _0x12e312=_0x108f94[_0x3eea87(0x157)](0x3);_0x5048eb[_0xe3b8f2][_0x3eea87(0x10a)]=_0x108f94[0x0],_0x5048eb[_0xe3b8f2][_0x3eea87(0x106)]=_0x108f94[0x1],_0x5048eb[_0xe3b8f2][_0x3eea87(0x8e)]=0x0,_0x5048eb[_0xe3b8f2][_0x3eea87(0x123)]=0x0,_0x5048eb[_0xe3b8f2]['to_types']='Floor',_0x5048eb[_0xe3b8f2]['to_floorlevel']=_0x12e312;}else{if(_0x45a47b=='Shelves'&&_0xe3b8f2==_0x13e2b4){var _0x12e312=_0x108f94['slice'](0x3);_0x5048eb[_0xe3b8f2]['storage']=_0x108f94[0x0],_0x5048eb[_0xe3b8f2]['rack']=_0x108f94[0x1],_0x5048eb[_0xe3b8f2][_0x3eea87(0x8e)]=0x0,_0x5048eb[_0xe3b8f2][_0x3eea87(0x123)]=0x0,_0x5048eb[_0xe3b8f2][_0x3eea87(0x126)]=_0x3eea87(0xb4),_0x5048eb[_0xe3b8f2][_0x3eea87(0xb5)]=_0x108f94[0x5];}else{if(_0xe3b8f2==_0x13e2b4){var _0x1ceac7;if(_0x108f94[0x4]=='L')_0x1ceac7='Level';else _0x108f94[0x4]=='F'&&(_0x1ceac7=_0x3eea87(0xb4));_0x5048eb[_0xe3b8f2][_0x3eea87(0x10a)]=_0x108f94[0x0],_0x5048eb[_0xe3b8f2][_0x3eea87(0x106)]=_0x108f94[0x1],_0x5048eb[_0xe3b8f2][_0x3eea87(0x8e)]=_0x108f94[0x2],_0x5048eb[_0xe3b8f2][_0x3eea87(0x123)]=_0x108f94[0x3],_0x5048eb[_0xe3b8f2]['to_types']=_0x1ceac7,_0x5048eb[_0xe3b8f2]['to_floorlevel']=_0x108f94[0x5];}}}});}),_0x20260f['forEach']((_0xa709a3,_0x200b28)=>{var _0x3707b7=_0x5287af;_0x5048eb[_0x200b28][_0x3707b7(0x161)]=_0xa709a3;}),_0x222e21[_0x5287af(0x98)]((_0xeef621,_0x5c177e)=>{var _0x467299=_0x5287af;_0x5048eb[_0x5c177e][_0x467299(0x160)]=_0xeef621;}),_0x343bc4[_0x5287af(0x98)]((_0x59179a,_0x101d0a)=>{_0x5048eb[_0x101d0a]['product_code']=_0x59179a;}),_0xe6bf61[_0x5287af(0x98)]((_0x1d500f,_0x6355bd)=>{_0x5048eb[_0x6355bd]['maxProducts']=_0x1d500f;}),_0x377132[_0x5287af(0x98)]((_0x587325,_0x2767c7)=>{_0x5048eb[_0x2767c7]['unit']=_0x587325;}),_0x3134d1[_0x5287af(0x98)]((_0x1c8784,_0x2c4700)=>{_0x5048eb[_0x2c4700]['secondary_unit']=_0x1c8784;}),_0x2e4cac['forEach']((_0x1f7c63,_0x49df50)=>{var _0x4d5874=_0x5287af;_0x5048eb[_0x49df50][_0x4d5874(0xb7)]=_0x1f7c63;}),_0x78b615[_0x5287af(0x98)]((_0x1a2361,_0x188764)=>{_0x5048eb[_0x188764]['expiry_date']=_0x1a2361;}),_0x4fe0b9[_0x5287af(0x98)]((_0x99312e,_0x1ee71f)=>{var _0x1fcac0=_0x5287af;_0x5048eb[_0x1ee71f][_0x1fcac0(0x130)]=_0x99312e;}),_0x3f35a7['forEach']((_0x52d9f9,_0x3eabab)=>{_0x5048eb[_0x3eabab]['production_date']=_0x52d9f9;}),_0x2b2655[_0x5287af(0x98)]((_0x3cb4c9,_0x4b1189)=>{var _0x5e5638=_0x5287af;_0x5048eb[_0x4b1189][_0x5e5638(0x165)]=_0x3cb4c9;}),_0x21af95['forEach']((_0x2a11b8,_0x12077a)=>{var _0x22905f=_0x5287af;_0x5048eb[_0x12077a][_0x22905f(0xad)]=_0x2a11b8;}),_0x2d087a['forEach']((_0xc9e8c8,_0x1745f0)=>{var _0x10dec5=_0x5287af;_0x5048eb[_0x1745f0][_0x10dec5(0x155)]=_0xc9e8c8;});const _0x183ce8=_0x5048eb[_0x5287af(0x15d)](_0x1ba115=>_0x1ba115[_0x5287af(0x9f)]!=='0'&&_0x1ba115[_0x5287af(0x9f)]!==''||_0x1ba115[_0x5287af(0xb5)]!=='0'&&_0x1ba115[_0x5287af(0xb5)]!==''),_0x5ef5eb=new transfers({'date':_0x3dbd0c,'from_warehouse':_0x36d15a,'to_warehouse':_0x40d470,'product':_0x183ce8,'note':_0x1366f6,'invoice':_0x2a3d4d}),_0x5018c7=await _0x5ef5eb[_0x5287af(0xec)]();_0x21bf4e[_0x5287af(0x9b)](_0x5287af(0xdc),'Product\x20Transfer\x20successfully'),_0x13dd58[_0x5287af(0x17b)](_0x5287af(0xd4)+_0x5018c7[_0x5287af(0xd8)]);}catch(_0x15d750){console[_0x5287af(0xcd)](_0x15d750),_0x13dd58[_0x5287af(0x101)](0xc8)[_0x5287af(0x162)]({'errorMessage':_0x15d750[_0x5287af(0x122)]});}}),router[a0_0x3e0d42(0x180)](a0_0x3e0d42(0x144),auth,async(_0xfc5ffc,_0x3f56ec)=>{var _0x51fc0a=a0_0x3e0d42;try{const {username:_0x27d35d,email:_0x1fb022,role:_0x5ab678}=_0xfc5ffc['user'],_0x2d2ebf=_0xfc5ffc[_0x51fc0a(0x14e)],_0x140783=await profile[_0x51fc0a(0xba)]({'email':_0x2d2ebf['email']}),_0x1fa2d4=await master_shop[_0x51fc0a(0x125)]();console['log'](_0x51fc0a(0x102),_0x1fa2d4);const _0x5d99ba=await transfers[_0x51fc0a(0x95)](_0xfc5ffc[_0x51fc0a(0x8f)]['id']);let _0x38d1cd=new Date(_0x5d99ba[_0x51fc0a(0x112)]),_0x2f9ff5=('0'+_0x38d1cd[_0x51fc0a(0xb0)]())[_0x51fc0a(0x157)](-0x2),_0x47c38b=('0'+(_0x38d1cd[_0x51fc0a(0xc9)]()+0x1))[_0x51fc0a(0x157)](-0x2),_0x13f6ff=_0x38d1cd['getFullYear'](),_0x15d735=_0x13f6ff+'-'+_0x47c38b+'-'+_0x2f9ff5,_0x51ebc3;if(_0x2d2ebf[_0x51fc0a(0xfa)]==_0x51fc0a(0x97)){const _0xb97d40=await staff[_0x51fc0a(0xba)]({'email':_0x2d2ebf[_0x51fc0a(0xed)]});_0x51ebc3=await warehouse[_0x51fc0a(0x125)]({'status':_0x51fc0a(0x15f),'name':_0xb97d40[_0x51fc0a(0x105)],'warehouse_category':'Raw\x20Materials'});}else _0x51ebc3=await warehouse[_0x51fc0a(0x125)]({'status':'Enabled','warehouse_category':_0x51fc0a(0x99)});const _0xc1b393=await warehouse[_0x51fc0a(0x91)]([{'$match':{'name':_0x5d99ba[_0x51fc0a(0x92)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x51fc0a(0x156),'name':{'$first':_0x51fc0a(0x131)},'product_stock':{'$first':_0x51fc0a(0xac)},'bay':{'$first':_0x51fc0a(0x145)},'bin':{'$first':_0x51fc0a(0xa3)},'type':{'$first':_0x51fc0a(0xfe)},'floorlevel':{'$first':_0x51fc0a(0x167)},'primary_code':{'$first':_0x51fc0a(0xca)},'secondary_code':{'$first':_0x51fc0a(0xef)},'product_code':{'$first':_0x51fc0a(0x15e)},'storage':{'$first':_0x51fc0a(0x148)},'rack':{'$first':_0x51fc0a(0x11a)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x51fc0a(0x17e)}}}]);if(_0x1fa2d4[0x0][_0x51fc0a(0x179)]=='English\x20(US)'){var _0x44964f=users['English'];console[_0x51fc0a(0xcd)](_0x44964f);}else{if(_0x1fa2d4[0x0]['language']==_0x51fc0a(0xc1))var _0x44964f=users[_0x51fc0a(0xc1)];else{if(_0x1fa2d4[0x0][_0x51fc0a(0x179)]==_0x51fc0a(0xe4))var _0x44964f=users['German'];else{if(_0x1fa2d4[0x0][_0x51fc0a(0x179)]=='Spanish')var _0x44964f=users[_0x51fc0a(0x158)];else{if(_0x1fa2d4[0x0]['language']==_0x51fc0a(0x14b))var _0x44964f=users['French'];else{if(_0x1fa2d4[0x0]['language']=='Portuguese\x20(BR)')var _0x44964f=users['Portuguese'];else{if(_0x1fa2d4[0x0][_0x51fc0a(0x179)]=='Chinese')var _0x44964f=users[_0x51fc0a(0x11c)];else{if(_0x1fa2d4[0x0][_0x51fc0a(0x179)]==_0x51fc0a(0x146))var _0x44964f=users[_0x51fc0a(0x16f)];}}}}}}}_0x3f56ec[_0x51fc0a(0x138)](_0x51fc0a(0xb8),{'success':_0xfc5ffc[_0x51fc0a(0x9b)](_0x51fc0a(0xdc)),'errors':_0xfc5ffc[_0x51fc0a(0x9b)]('errors'),'role':_0x2d2ebf,'profile':_0x140783,'master_shop':_0x1fa2d4,'warehouse':_0x51ebc3,'transfer':_0x5d99ba,'stock':_0xc1b393,'language':_0x44964f});}catch(_0x19e55f){console['log'](_0x19e55f);}}),router[a0_0x3e0d42(0xa4)](a0_0x3e0d42(0x144),auth,async(_0x393bf5,_0x50232a)=>{var _0x19ecb6=a0_0x3e0d42;try{const _0x394799=_0x393bf5[_0x19ecb6(0x8f)]['id'],{from_warehouse:_0x270177,FromRoom_name:_0x1c37d2,to_warehouse:_0x2ca024,ToRoom_name:_0x57eb05}=_0x393bf5['body'],_0x262f08=await transfers[_0x19ecb6(0x95)]({'_id':_0x394799}),_0xdad899=_0x262f08[_0x19ecb6(0x170)]['map'](async _0x322897=>{var _0x365284=_0x19ecb6;if(_0x322897[_0x365284(0x9f)]>0x0){var _0x386659=await warehouse[_0x365284(0xba)]({'name':_0x262f08[_0x365284(0x92)],'room':_0x322897[_0x365284(0xad)],'warehouse_category':_0x365284(0x99)});const _0x39ceb7=_0x386659[_0x365284(0xf4)]['map'](_0x1371be=>{var _0x28a0dd=_0x365284;_0x1371be[_0x28a0dd(0xbd)]==_0x322897[_0x28a0dd(0xbd)]&&_0x1371be['floorlevel']==_0x322897[_0x28a0dd(0xeb)]&&_0x1371be[_0x28a0dd(0xea)]==_0x322897[_0x28a0dd(0xd3)]&&_0x1371be[_0x28a0dd(0x109)]==_0x322897[_0x28a0dd(0x9c)]&&_0x1371be[_0x28a0dd(0xe2)]==_0x322897[_0x28a0dd(0xdd)]&&_0x1371be[_0x28a0dd(0x106)]==_0x322897[_0x28a0dd(0xd7)]&&_0x1371be[_0x28a0dd(0x10a)]==_0x322897[_0x28a0dd(0xbc)]&&_0x1371be[_0x28a0dd(0x112)]==_0x322897['expiry_date']&&_0x1371be[_0x28a0dd(0xb7)]==_0x322897['batch_code']&&_0x1371be['production_date']==_0x322897[_0x28a0dd(0xcf)]&&_0x1371be[_0x28a0dd(0x11e)]==_0x322897[_0x28a0dd(0x8c)]&&(_0x1371be[_0x28a0dd(0xf0)]=_0x1371be[_0x28a0dd(0xf0)]-_0x322897[_0x28a0dd(0x9f)]);});}return _0x386659;});Promise['all'](_0xdad899)[_0x19ecb6(0x94)](async _0x28f719=>{var _0x2188f4=_0x19ecb6;try{for(const _0x34d56e of _0x28f719){await _0x34d56e[_0x2188f4(0xec)]();}try{const _0x475c8b=_0x262f08[_0x2188f4(0x170)][_0x2188f4(0x9e)](async _0x55a04a=>{var _0x423dfb=_0x2188f4;if(_0x55a04a[_0x423dfb(0x9f)]>0x0){var _0x3fcbfb=await warehouse[_0x423dfb(0xba)]({'name':_0x262f08[_0x423dfb(0x127)],'room':_0x55a04a['to_room_name'],'warehouse_category':_0x423dfb(0x99)}),_0xba33c3=0x0;const _0x28312e=_0x3fcbfb[_0x423dfb(0xf4)][_0x423dfb(0x9e)](_0x124ba7=>{var _0x4caf85=_0x423dfb;_0x124ba7[_0x4caf85(0xbd)]==_0x55a04a[_0x4caf85(0xbd)]&&_0x124ba7[_0x4caf85(0xfc)]==_0x55a04a[_0x4caf85(0xb5)]&&_0x124ba7[_0x4caf85(0xea)]==_0x55a04a[_0x4caf85(0x126)]&&_0x124ba7[_0x4caf85(0x109)]==_0x55a04a['to_bin']&&_0x124ba7[_0x4caf85(0xe2)]==_0x55a04a[_0x4caf85(0x8e)]&&_0x124ba7['rack']==_0x55a04a[_0x4caf85(0x106)]&&_0x124ba7['storage']==_0x55a04a[_0x4caf85(0x10a)]&&_0x124ba7['expiry_date']==_0x55a04a[_0x4caf85(0x112)]&&_0x124ba7[_0x4caf85(0xb7)]==_0x55a04a[_0x4caf85(0xb7)]&&_0x124ba7['production_date']==_0x55a04a[_0x4caf85(0xcf)]&&_0x124ba7[_0x4caf85(0x11e)]==_0x55a04a['To_invoice']&&(_0x124ba7[_0x4caf85(0xf0)]=_0x124ba7[_0x4caf85(0xf0)]+_0x55a04a[_0x4caf85(0x9f)],_0xba33c3++);});_0xba33c3=='0'&&(_0x3fcbfb['product_details']=_0x3fcbfb[_0x423dfb(0xf4)]['concat']({'product_name':_0x55a04a[_0x423dfb(0xbd)],'product_stock':_0x55a04a[_0x423dfb(0x9f)],'bay':_0x55a04a[_0x423dfb(0x8e)],'bin':_0x55a04a['to_bin'],'type':_0x55a04a['to_types'],'floorlevel':_0x55a04a[_0x423dfb(0xb5)],'storage':_0x55a04a[_0x423dfb(0x10a)],'rack':_0x55a04a[_0x423dfb(0x106)],'product_code':_0x55a04a[_0x423dfb(0x16b)],'primary_code':_0x55a04a['primary_code'],'secondary_code':_0x55a04a[_0x423dfb(0x160)],'maxProducts':_0x55a04a[_0x423dfb(0xaa)],'storage':_0x55a04a[_0x423dfb(0x10a)],'rack':_0x55a04a[_0x423dfb(0x106)],'expiry_date':_0x55a04a[_0x423dfb(0x112)],'maxPerUnit':_0x55a04a[_0x423dfb(0x130)],'batch_code':_0x55a04a[_0x423dfb(0xb7)],'production_date':_0x55a04a['production_date']}));}return _0x3fcbfb;});Promise[_0x2188f4(0x96)](_0x475c8b)[_0x2188f4(0x94)](async _0x44f2fe=>{var _0x3edcf6=_0x2188f4;try{for(const _0x18c116 of _0x44f2fe){await warehouse[_0x3edcf6(0x117)]({'_id':_0x18c116[_0x3edcf6(0xd8)]},{'$addToSet':{'product_details':{'$each':_0x18c116[_0x3edcf6(0xf4)]}}});}_0x262f08[_0x3edcf6(0xbf)]='True';const _0x59adaf=await _0x262f08[_0x3edcf6(0xec)](),_0x846899=await master_shop['find'](),_0x25025d=await email_settings[_0x3edcf6(0xba)](),_0xf31444=await supervisor_settings[_0x3edcf6(0x125)]();var _0x20cdd6=_0x262f08[_0x3edcf6(0x170)],_0x38719b='',_0x433e37;for(_0x433e37 in _0x20cdd6){_0x38719b+=_0x3edcf6(0xf5)+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37][_0x3edcf6(0xbd)]+_0x3edcf6(0x164)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x20cdd6[_0x433e37][_0x3edcf6(0x16b)]+_0x3edcf6(0x164)+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37]['to_quantity']+'</td>'+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37][_0x3edcf6(0xb1)]+_0x3edcf6(0x164)+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37][_0x3edcf6(0x13b)]+'</td>'+_0x3edcf6(0x17a)+_0x262f08[_0x3edcf6(0x127)]+_0x3edcf6(0x164)+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37][_0x3edcf6(0x155)]+'</td>'+_0x3edcf6(0x17a)+_0x20cdd6[_0x433e37][_0x3edcf6(0x10a)]+_0x20cdd6[_0x433e37][_0x3edcf6(0x106)]+_0x20cdd6[_0x433e37][_0x3edcf6(0x8e)]+_0x20cdd6[_0x433e37][_0x3edcf6(0x123)]+_0x20cdd6[_0x433e37][_0x3edcf6(0x126)][0x0]+_0x20cdd6[_0x433e37][_0x3edcf6(0xb5)]+_0x3edcf6(0x164),_0x3edcf6(0x124);}let _0x136c26=nodemailer[_0x3edcf6(0xb2)]({'host':_0x25025d[_0x3edcf6(0x10d)],'port':Number(_0x25025d[_0x3edcf6(0xe5)]),'secure':![],'auth':{'user':_0x25025d[_0x3edcf6(0xed)],'pass':_0x25025d[_0x3edcf6(0xe9)]}}),_0x1cac5b={'from':_0x25025d['email'],'to':_0xf31444[0x0]['RMSEmail'],'subject':_0x3edcf6(0x140),'attachments':[{'filename':_0x3edcf6(0x169),'path':__dirname+'/../public'+'/upload/'+_0x846899[0x0][_0x3edcf6(0x14d)],'cid':_0x3edcf6(0x15c)}],'html':'<!DOCTYPE\x20html>'+_0x3edcf6(0xce)+_0x3edcf6(0xe1)+_0x3edcf6(0x152)+_0x3edcf6(0xc0)+_0x3edcf6(0x152)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x3edcf6(0xc2)+_0x3edcf6(0x152)+_0x3edcf6(0xfb)+_0x846899[0x0][_0x3edcf6(0x128)]+_0x3edcf6(0x173)+_0x3edcf6(0xc2)+_0x3edcf6(0xc2)+_0x3edcf6(0xf9)+_0x3edcf6(0x152)+_0x3edcf6(0x177)+_0x3edcf6(0xc4)+_0x262f08[_0x3edcf6(0x11e)]+'\x20'+_0x3edcf6(0x116)+_0x3edcf6(0xa0)+_0x262f08['date']+'\x20'+_0x3edcf6(0x136)+'</h5>'+_0x3edcf6(0xc2)+_0x3edcf6(0x13c)+_0x3edcf6(0x107)+_0x3edcf6(0xf5)+_0x3edcf6(0x16e)+_0x3edcf6(0xfd)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x3edcf6(0xc5)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x3edcf6(0x16c)+_0x3edcf6(0x13d)+_0x3edcf6(0x100)+_0x3edcf6(0x124)+'</thead>'+_0x3edcf6(0x134)+'\x20'+_0x38719b+'\x20'+_0x3edcf6(0xa2)+_0x3edcf6(0xcc)+_0x3edcf6(0x152)+_0x3edcf6(0x93)+_0x3edcf6(0x110)+_0x846899[0x0][_0x3edcf6(0x128)]+'</h5>'+_0x3edcf6(0xc2)+_0x3edcf6(0xc2)+_0x3edcf6(0xa6)};_0x136c26[_0x3edcf6(0xe3)](_0x1cac5b,function(_0x113cc1,_0x56aec9){var _0x49aab3=_0x3edcf6;_0x113cc1?(console[_0x49aab3(0xcd)](_0x113cc1),console[_0x49aab3(0xcd)](_0x49aab3(0xc7))):console[_0x49aab3(0xcd)]('Email\x20sent\x20successfully');}),_0x393bf5[_0x3edcf6(0x9b)](_0x3edcf6(0xdc),_0x3edcf6(0x118)),_0x50232a[_0x3edcf6(0x17b)](_0x3edcf6(0x133)+_0x59adaf[_0x3edcf6(0xd8)]);}catch(_0x5b9840){console[_0x3edcf6(0x8d)](_0x5b9840),_0x50232a[_0x3edcf6(0x101)](0x1f4)[_0x3edcf6(0x162)]({'Perror':_0x3edcf6(0x108),'message':_0x5b9840[_0x3edcf6(0x122)]});}})[_0x2188f4(0x12f)](_0x12fa6c=>{var _0x336ba2=_0x2188f4;console[_0x336ba2(0x8d)](_0x12fa6c),_0x50232a[_0x336ba2(0x101)](0x1f4)[_0x336ba2(0x162)]({'Perror':'An\x20error\x20occurred.'});});}catch(_0x3b1d36){_0x50232a[_0x2188f4(0x162)](_0x3b1d36);}}catch(_0x5ec0bc){console['error'](_0x5ec0bc),_0x50232a[_0x2188f4(0x101)](0x1f4)['json']({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x5ec0bc[_0x2188f4(0x122)]});}})['catch'](_0x1744db=>{var _0x3a6714=_0x19ecb6;console[_0x3a6714(0x8d)](_0x1744db),_0x50232a['status'](0x1f4)[_0x3a6714(0x162)]({'Merror':_0x3a6714(0x168)});});}catch(_0x4d15f4){console[_0x19ecb6(0xcd)](_0x4d15f4);}});function BayBinSelected(_0x709af5,_0x3fa061){var _0x5ebf9e=a0_0x3e0d42,_0x55fc07=[],_0x5dfa6f=[],_0x414e5e=[],_0x43a4d4=[],_0x1e7b66=[],_0xb911cb=[];let _0x242eb5=[];if(_0x709af5==_0x5ebf9e(0x17d))switch(_0x3fa061){case _0x5ebf9e(0xae):_0x55fc07=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x5dfa6f=[0x1,0x2],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),_0x5ebf9e(0xb4)],_0x1e7b66=['D'],_0xb911cb=['A'];break;case _0x5ebf9e(0xc3):_0x55fc07=[0x6,0x5,0x4,0x3,0x2,0x1],_0x5dfa6f=[0x1,0x2],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),_0x5ebf9e(0xb4)],_0x1e7b66=['D'],_0xb911cb=['B'];break;case _0x5ebf9e(0x14a):_0x55fc07=[0x0],_0x5dfa6f=[0x0],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0xb4)],_0x1e7b66=['D'],_0xb911cb=['S'];break;case'Receiving\x20Area':_0x55fc07=[0x0],_0x5dfa6f=[0x0],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x414e5e=[_0x5ebf9e(0xb4)],_0x1e7b66=['D'],_0xb911cb=['R'];break;}else{if(_0x709af5==_0x5ebf9e(0xa5))switch(_0x3fa061){case'Rack\x20A':_0x55fc07=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x5dfa6f=['B','F'],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),_0x5ebf9e(0xb4)],_0x1e7b66=['C'],_0xb911cb=['A'];break;case'Rack\x20B':_0x55fc07=[0x5,0x4,0x3,0x2,0x1],_0x5dfa6f=['F','B','S'],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),'Floor'],_0x1e7b66=['C'],_0xb911cb=['B'];break;case _0x5ebf9e(0xe6):_0x55fc07=[0x1,0x2,0x3,0x4,0x5],_0x5dfa6f=['B','F','S'],_0x43a4d4=[0x5,0x4,0x3,0x2,0x1],_0x414e5e=[_0x5ebf9e(0x10e),'Floor'],_0x1e7b66=['C'],_0xb911cb=['C'];break;case _0x5ebf9e(0xda):_0x55fc07=[0x5,0x4,0x3,0x2,0x1],_0x5dfa6f=['F','B','S'],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),_0x5ebf9e(0xb4)],_0x1e7b66=['C'],_0xb911cb=['D'];break;case _0x5ebf9e(0x13a):_0x55fc07=[0x4,0x3,0x2,0x1],_0x5dfa6f=[0x1,0x2],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=[_0x5ebf9e(0x10e),_0x5ebf9e(0xb4)],_0x1e7b66=['C'],_0xb911cb=['E'];break;case'Rack\x20F':_0x55fc07=[0x1,0x2,0x3],_0x5dfa6f=[0x1,0x2],_0x43a4d4=[0x1,0x2,0x3,0x4,0x5],_0x414e5e=['Level'],_0x1e7b66=['C'],_0xb911cb=['F'];break;}}return{'levels':_0x55fc07,'Isle':_0x5dfa6f,'rack':_0x43a4d4,'type':_0x414e5e,'storage':_0x1e7b66,'rak':_0xb911cb};}router[a0_0x3e0d42(0x180)](a0_0x3e0d42(0x111),auth,async(_0x208a58,_0x2cbe58)=>{var _0x21ab20=a0_0x3e0d42;try{const {username:_0x2832b0,email:_0x4ce88d,role:_0x3005a4}=_0x208a58['user'],_0xd1f281=_0x208a58[_0x21ab20(0x14e)],_0x4ad7e0=await profile['findOne']({'email':_0xd1f281[_0x21ab20(0xed)]}),_0xb098d=await master_shop[_0x21ab20(0x125)](),_0x271075=await transfers[_0x21ab20(0x95)](_0x208a58[_0x21ab20(0x8f)]['id']);let _0x488e16;if(_0xd1f281[_0x21ab20(0xfa)]==_0x21ab20(0x97)){const _0x2e4117=await staff['findOne']({'email':_0xd1f281[_0x21ab20(0xed)]});_0x488e16=await warehouse[_0x21ab20(0x91)]([{'$match':{'status':_0x21ab20(0x15f),'name':_0x2e4117[_0x21ab20(0x105)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x21ab20(0xbe),'name':{'$first':_0x21ab20(0xbe)}}}]);}else _0x488e16=await warehouse[_0x21ab20(0x91)]([{'$match':{'status':_0x21ab20(0x15f),'warehouse_category':_0x21ab20(0x99)}},{'$group':{'_id':_0x21ab20(0xbe),'name':{'$first':_0x21ab20(0xbe)}}}]);const _0xc4da5=await warehouse[_0x21ab20(0x91)]([{'$match':{'name':_0x271075[_0x21ab20(0x92)],'warehouse_category':'Raw\x20Materials'}},{'$unwind':_0x21ab20(0x159)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x21ab20(0xac)},'bay':{'$first':_0x21ab20(0x145)},'bin':{'$first':_0x21ab20(0xa3)},'type':{'$first':_0x21ab20(0xfe)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x21ab20(0xca)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x21ab20(0x15e)},'storage':{'$first':_0x21ab20(0x148)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x21ab20(0xa8)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':'$room'}}}]),_0x5f0fa5=await product['find']({}),_0x2ec4e0=BayBinSelected(_0x271075[_0x21ab20(0x127)],_0x271075[_0x21ab20(0xee)]);if(_0xb098d[0x0]['language']==_0x21ab20(0xb6)){var _0x359e37=users[_0x21ab20(0x15a)];console[_0x21ab20(0xcd)](_0x359e37);}else{if(_0xb098d[0x0][_0x21ab20(0x179)]==_0x21ab20(0xc1))var _0x359e37=users[_0x21ab20(0xc1)];else{if(_0xb098d[0x0]['language']==_0x21ab20(0xe4))var _0x359e37=users['German'];else{if(_0xb098d[0x0]['language']==_0x21ab20(0x158))var _0x359e37=users[_0x21ab20(0x158)];else{if(_0xb098d[0x0]['language']==_0x21ab20(0x14b))var _0x359e37=users[_0x21ab20(0x14b)];else{if(_0xb098d[0x0][_0x21ab20(0x179)]==_0x21ab20(0x12b))var _0x359e37=users[_0x21ab20(0x163)];else{if(_0xb098d[0x0][_0x21ab20(0x179)]==_0x21ab20(0x11c))var _0x359e37=users[_0x21ab20(0x11c)];else{if(_0xb098d[0x0][_0x21ab20(0x179)]==_0x21ab20(0x146))var _0x359e37=users[_0x21ab20(0x16f)];}}}}}}}_0x2cbe58[_0x21ab20(0x138)](_0x21ab20(0x15b),{'success':_0x208a58[_0x21ab20(0x9b)](_0x21ab20(0xdc)),'errors':_0x208a58[_0x21ab20(0x9b)](_0x21ab20(0xa7)),'role':_0xd1f281,'profile':_0x4ad7e0,'master_shop':_0xb098d,'warehouse':_0x488e16,'transfer':_0x271075,'stock':_0xc4da5,'unit':_0x5f0fa5,'language':_0x359e37});}catch(_0xd1cb9f){console[_0x21ab20(0xcd)](_0xd1cb9f);}}),router[a0_0x3e0d42(0xa4)]('/view/:id',auth,async(_0x13d575,_0x1b879c)=>{var _0x252c41=a0_0x3e0d42;try{const _0x46b13b=_0x13d575[_0x252c41(0x8f)]['id'],_0x541027=await transfers[_0x252c41(0x95)](_0x46b13b);_0x1b879c['json'](_0x13d575[_0x252c41(0x113)]);return;const {date:_0x2ece65,from_warehouse:_0x604902,FromRoom_name:_0x1fabb6,to_warehouse:_0xbeec0c,ToRoom_name:_0x176da4,prod_name:_0x15b1cf,from_prod_qty:_0x351618,from_prod_level:_0x121134,from_prod_isle:_0x44364e,from_prod_pallet:_0x3a6e25,to_prod_qty:_0x71a295,to_prod_level:_0x2f3b0d,to_prod_isle:_0x34722d,to_prod_pallet:_0x399aca,primary_code:_0xa8f5e,secondary_code:_0x44e809,product_code3:_0x1735ce,note:_0x18a302,invoice:_0x429783,expiry_date:_0x146ef8}=_0x13d575['body'];if(typeof _0x15b1cf==_0x252c41(0x13f))var _0x3410c9=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x103)]],_0x3a8c19=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x114)]],_0x1820bd=[_0x13d575['body'][_0x252c41(0x115)]],_0x348fb5=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x153)]],_0x268255=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x142)]],_0x4fcc96=[_0x13d575[_0x252c41(0x113)][_0x252c41(0xd3)]],_0x459658=[_0x13d575[_0x252c41(0x113)][_0x252c41(0xd5)]],_0x3be09e=[_0x13d575[_0x252c41(0x113)]['to_prod_level']],_0xcec807=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x12d)]],_0x12008d=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x11b)]],_0x4737c8=[_0x13d575['body'][_0x252c41(0x126)]],_0x4cd262=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x10a)]],_0x581729=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x151)]],_0x5dce78=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x161)]],_0x4cbd63=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x160)]],_0x120e25=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x10c)]],_0x3dc113=[_0x13d575[_0x252c41(0x113)]['MaxStocks_data2']],_0x3d7d6a=[_0x13d575[_0x252c41(0x113)]['unit']],_0x2cf8e4=[_0x13d575[_0x252c41(0x113)][_0x252c41(0x13b)]],_0x44bca7=[_0x13d575['body']['batch_code']],_0x4bb2d0=[_0x13d575[_0x252c41(0x113)]['expiry_date']],_0x57f491=[_0x13d575[_0x252c41(0x113)][_0x252c41(0xbc)]],_0x373892=[_0x13d575['body'][_0x252c41(0x16a)]];else var _0x3410c9=[..._0x13d575[_0x252c41(0x113)]['prod_name']],_0x4cd262=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x10a)]],_0x581729=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x151)]],_0x4fcc96=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0xd3)]],_0x4737c8=[..._0x13d575['body'][_0x252c41(0x126)]],_0x3a8c19=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x114)]],_0x1820bd=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x115)]],_0x348fb5=[..._0x13d575['body']['from_prod_isle']],_0x268255=[..._0x13d575['body']['from_prod_pallet']],_0x459658=[..._0x13d575['body'][_0x252c41(0xd5)]],_0x3be09e=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x154)]],_0xcec807=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x12d)]],_0x12008d=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x11b)]],_0x5dce78=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x161)]],_0x4cbd63=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x160)]],_0x120e25=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x10c)]],_0x3dc113=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0xf1)]],_0x3d7d6a=[..._0x13d575['body'][_0x252c41(0xb1)]],_0x2cf8e4=[..._0x13d575['body'][_0x252c41(0x13b)]],_0x44bca7=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0xb7)]],_0x4bb2d0=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0x112)]],_0x57f491=[..._0x13d575[_0x252c41(0x113)][_0x252c41(0xbc)]],_0x373892=[..._0x13d575['body'][_0x252c41(0x16a)]];const _0x2c3bbe=_0x3410c9[_0x252c41(0x9e)](_0x37d7d4=>{return _0x37d7d4={'product_name':_0x37d7d4};});_0x3a8c19[_0x252c41(0x98)]((_0x24c536,_0x17a866)=>{var _0x2cdf34=_0x252c41;_0x2c3bbe[_0x17a866][_0x2cdf34(0x12a)]=_0x24c536;}),_0x1820bd[_0x252c41(0x98)]((_0x5ec77d,_0x263cc5)=>{var _0x13d40b=_0x252c41;_0x2c3bbe[_0x263cc5][_0x13d40b(0xdd)]=_0x5ec77d;}),_0x348fb5['forEach']((_0x176aa3,_0x41ad00)=>{_0x2c3bbe[_0x41ad00]['from_bin']=_0x176aa3;}),_0x268255[_0x252c41(0x98)]((_0x591390,_0x4478f8)=>{_0x2c3bbe[_0x4478f8]['from_floorlevel']=_0x591390;}),_0x459658[_0x252c41(0x98)]((_0x5b184a,_0x2a4da5)=>{var _0x4ace8f=_0x252c41;_0x2c3bbe[_0x2a4da5][_0x4ace8f(0x9f)]=_0x5b184a;}),_0x3be09e[_0x252c41(0x98)]((_0xdd7b20,_0x49a933)=>{var _0x4965ea=_0x252c41;_0x2c3bbe[_0x49a933][_0x4965ea(0x8e)]=_0xdd7b20;}),_0xcec807[_0x252c41(0x98)]((_0x2fd23e,_0x4da0f4)=>{var _0x14d05e=_0x252c41;_0x2c3bbe[_0x4da0f4][_0x14d05e(0x123)]=_0x2fd23e;}),_0x12008d['forEach']((_0x1479db,_0x3229b2)=>{_0x2c3bbe[_0x3229b2]['to_floorlevel']=_0x1479db;}),_0x5dce78['forEach']((_0xffd164,_0x4dfd91)=>{var _0x4223da=_0x252c41;_0x2c3bbe[_0x4dfd91][_0x4223da(0x161)]=_0xffd164;}),_0x4cbd63['forEach']((_0x2d465c,_0x4468bb)=>{_0x2c3bbe[_0x4468bb]['secondary_code']=_0x2d465c;}),_0x120e25[_0x252c41(0x98)]((_0x3734f0,_0x4e5896)=>{var _0xf1b088=_0x252c41;_0x2c3bbe[_0x4e5896][_0xf1b088(0x16b)]=_0x3734f0;}),_0x3dc113[_0x252c41(0x98)]((_0x80dd2f,_0x3a009a)=>{var _0x39cb09=_0x252c41;_0x2c3bbe[_0x3a009a][_0x39cb09(0xaa)]=_0x80dd2f;}),_0x3d7d6a[_0x252c41(0x98)]((_0x407fa7,_0x2a6215)=>{var _0x934cbf=_0x252c41;_0x2c3bbe[_0x2a6215][_0x934cbf(0xb1)]=_0x407fa7;}),_0x2cf8e4['forEach']((_0x4e8909,_0x362c39)=>{_0x2c3bbe[_0x362c39]['secondary_unit']=_0x4e8909;}),_0x44bca7[_0x252c41(0x98)]((_0x274989,_0xd775eb)=>{var _0x2be2c7=_0x252c41;_0x2c3bbe[_0xd775eb][_0x2be2c7(0xb7)]=_0x274989;}),_0x4bb2d0['forEach']((_0x51a605,_0x4d38ec)=>{_0x2c3bbe[_0x4d38ec]['expiry_date']=_0x51a605;}),_0x4cd262[_0x252c41(0x98)]((_0x1f0ae4,_0x51ca9f)=>{var _0x217305=_0x252c41;_0x2c3bbe[_0x51ca9f][_0x217305(0x10a)]=_0x1f0ae4;}),_0x581729[_0x252c41(0x98)]((_0x17135a,_0x236e1a)=>{_0x2c3bbe[_0x236e1a]['rack']=_0x17135a;}),_0x4fcc96[_0x252c41(0x98)]((_0xc13eb5,_0x10c6bb)=>{var _0x3d50a9=_0x252c41;_0x2c3bbe[_0x10c6bb][_0x3d50a9(0xd3)]=_0xc13eb5;}),_0x4737c8[_0x252c41(0x98)]((_0x181f99,_0x596092)=>{var _0x4f0f25=_0x252c41;_0x2c3bbe[_0x596092][_0x4f0f25(0x126)]=_0x181f99;}),_0x57f491['forEach']((_0x11d9c3,_0xef8602)=>{var _0x15a355=_0x252c41;_0x2c3bbe[_0xef8602][_0x15a355(0xbc)]=_0x11d9c3;}),_0x373892[_0x252c41(0x98)]((_0x4480eb,_0x227fe9)=>{_0x2c3bbe[_0x227fe9]['from_rack']=_0x4480eb;});const _0x914900=_0x2c3bbe[_0x252c41(0x15d)](_0x523ecf=>_0x523ecf[_0x252c41(0x9f)]!=='0'&&_0x523ecf['to_quantity']!==''||_0x523ecf['to_floorlevel']!=='0'&&_0x523ecf['to_floorlevel']!=='');var _0x36bc7b=0x0;_0x914900['forEach'](_0x2097cb=>{var _0x3558c2=_0x252c41;parseInt(_0x2097cb[_0x3558c2(0x12a)])<parseInt(_0x2097cb[_0x3558c2(0x9f)])&&_0x36bc7b++;});if(_0x36bc7b!=0x0)return _0x13d575[_0x252c41(0x9b)]('errors',_0x252c41(0x121)),_0x1b879c[_0x252c41(0x17b)](_0x252c41(0x17f));const _0x3f96c9=await warehouse[_0x252c41(0xba)]({'name':_0x541027[_0x252c41(0x92)],'room':_0x541027[_0x252c41(0xe7)]});_0x541027[_0x252c41(0x170)][_0x252c41(0x98)](_0x299ad4=>{var _0x3bc561=_0x252c41;if(_0x299ad4[_0x3bc561(0x9f)]>0x0){const _0x29c1c2=_0x3f96c9[_0x3bc561(0xf4)][_0x3bc561(0x9e)](_0x58b484=>{var _0x418b6d=_0x3bc561;_0x58b484[_0x418b6d(0xbd)]==_0x299ad4[_0x418b6d(0xbd)]&&_0x58b484[_0x418b6d(0xfc)]==_0x299ad4['from_floorlevel']&&_0x58b484[_0x418b6d(0xea)]==_0x299ad4[_0x418b6d(0xd3)]&&_0x58b484[_0x418b6d(0x109)]==_0x299ad4['from_bin']&&_0x58b484['bay']==_0x299ad4['from_bay']&&_0x58b484[_0x418b6d(0x106)]==_0x299ad4[_0x418b6d(0xd7)]&&_0x58b484[_0x418b6d(0x10a)]==_0x299ad4[_0x418b6d(0xbc)]&&(_0x58b484[_0x418b6d(0xf0)]=parseInt(_0x58b484[_0x418b6d(0xf0)])+parseInt(_0x299ad4[_0x418b6d(0x9f)]));});}}),await _0x3f96c9['save']();const _0x3e6e81=await warehouse[_0x252c41(0xba)]({'name':_0x541027[_0x252c41(0x127)],'room':_0x541027[_0x252c41(0xee)]});_0x541027[_0x252c41(0x170)][_0x252c41(0x98)](_0x166e29=>{var _0xbb128d=_0x252c41;if(_0x166e29[_0xbb128d(0x9f)]>0x0){const _0x518a44=_0x3e6e81[_0xbb128d(0xf4)][_0xbb128d(0x9e)](_0x1ee116=>{var _0x53aa4d=_0xbb128d;_0x1ee116[_0x53aa4d(0xbd)]==_0x166e29['product_name']&&_0x1ee116[_0x53aa4d(0xfc)]==_0x166e29[_0x53aa4d(0xb5)]&&_0x1ee116[_0x53aa4d(0xea)]==_0x166e29['to_types']&&_0x1ee116[_0x53aa4d(0x109)]==_0x166e29[_0x53aa4d(0x123)]&&_0x1ee116['bay']==_0x166e29[_0x53aa4d(0x8e)]&&_0x1ee116[_0x53aa4d(0x106)]==_0x166e29[_0x53aa4d(0x106)]&&_0x1ee116[_0x53aa4d(0x10a)]==_0x166e29['storage']&&(_0x1ee116['product_stock']=parseInt(_0x1ee116[_0x53aa4d(0xf0)])-parseInt(_0x166e29[_0x53aa4d(0x9f)]));});}}),await _0x3e6e81[_0x252c41(0xec)](),_0x541027['date']=_0x2ece65,_0x541027['from_warehouse']=_0x604902,_0x541027[_0x252c41(0x127)]=_0xbeec0c,_0x541027[_0x252c41(0x170)]=_0x914900,_0x541027[_0x252c41(0x11d)]=_0x18a302,_0x541027['invoice']=_0x429783;const _0xa194ca=await _0x541027[_0x252c41(0xec)]();console['log'](_0xa194ca);const _0xb94c0d=await warehouse[_0x252c41(0xba)]({'name':_0x604902,'room':_0x1fabb6});_0xa194ca[_0x252c41(0x170)][_0x252c41(0x98)](_0x563aaf=>{if(_0x563aaf['to_quantity']>0x0){const _0x57b48d=_0xb94c0d['product_details']['map'](_0x341c29=>{var _0x40f778=a0_0x5d5c;_0x341c29['product_name']==_0x563aaf[_0x40f778(0xbd)]&&_0x341c29[_0x40f778(0xfc)]==_0x563aaf['from_floorlevel']&&_0x341c29[_0x40f778(0xea)]==_0x563aaf[_0x40f778(0xd3)]&&_0x341c29[_0x40f778(0x109)]==_0x563aaf[_0x40f778(0x9c)]&&_0x341c29['bay']==_0x563aaf['from_bay']&&_0x341c29['rack']==_0x563aaf[_0x40f778(0xd7)]&&_0x341c29[_0x40f778(0x10a)]==_0x563aaf[_0x40f778(0xbc)]&&(_0x341c29[_0x40f778(0xf0)]=parseInt(_0x341c29[_0x40f778(0xf0)])-parseInt(_0x563aaf[_0x40f778(0x9f)]));});}}),await _0xb94c0d[_0x252c41(0xec)]();const _0x49b938=await warehouse[_0x252c41(0xba)]({'name':_0xbeec0c,'room':_0x176da4});_0xa194ca[_0x252c41(0x170)][_0x252c41(0x98)](_0x197b3c=>{var _0x133dcc=_0x252c41;if(_0x197b3c['to_quantity']>0x0){var _0x2546c2=0x0;const _0x5f3d6b=_0x49b938['product_details'][_0x133dcc(0x9e)](_0x5b194b=>{var _0xa28680=_0x133dcc;_0x5b194b[_0xa28680(0xbd)]==_0x197b3c['product_name']&&_0x5b194b[_0xa28680(0xfc)]==_0x197b3c[_0xa28680(0xb5)]&&_0x5b194b[_0xa28680(0xea)]==_0x197b3c[_0xa28680(0x126)]&&_0x5b194b[_0xa28680(0x109)]==_0x197b3c[_0xa28680(0x123)]&&_0x5b194b[_0xa28680(0xe2)]==_0x197b3c[_0xa28680(0x8e)]&&_0x5b194b['rack']==_0x197b3c['rack']&&_0x5b194b[_0xa28680(0x10a)]==_0x197b3c[_0xa28680(0x10a)]&&(_0x5b194b[_0xa28680(0xf0)]=parseInt(_0x5b194b[_0xa28680(0xf0)])+parseInt(_0x197b3c[_0xa28680(0x9f)]),_0x2546c2++);});_0x2546c2=='0'&&(_0x49b938[_0x133dcc(0xf4)]=_0x49b938[_0x133dcc(0xf4)]['concat']({'product_name':_0x197b3c['product_name'],'product_stock':_0x197b3c['to_quantity'],'bay':_0x197b3c[_0x133dcc(0x8e)],'bin':_0x197b3c[_0x133dcc(0x123)],'type':_0x197b3c[_0x133dcc(0x126)],'floorlevel':_0x197b3c[_0x133dcc(0xb5)],'storage':_0x197b3c[_0x133dcc(0x10a)],'rack':_0x197b3c[_0x133dcc(0x106)],'product_code':_0x197b3c[_0x133dcc(0x16b)],'primary_code':_0x197b3c[_0x133dcc(0x161)],'secondary_code':_0x197b3c[_0x133dcc(0x160)],'maxProducts':_0x197b3c[_0x133dcc(0xaa)],'storage':_0x197b3c['storage'],'rack':_0x197b3c[_0x133dcc(0x106)]}));}}),await _0x49b938[_0x252c41(0xec)](),_0x13d575[_0x252c41(0x9b)]('success','Transfer\x20Edit\x20Successfully'),_0x1b879c[_0x252c41(0x17b)](_0x252c41(0x174));}catch(_0x5e1ad9){console[_0x252c41(0xcd)](_0x5e1ad9);}}),router[a0_0x3e0d42(0xa4)](a0_0x3e0d42(0x90),async(_0x4798b9,_0x26e8b2)=>{var _0x669768=a0_0x3e0d42;const {FromWareHouse:_0x2217a2,FromRoom:_0x1ffbbc,ToWarehouse:_0x509ae2,ToRoom:_0x1f3e60,primary_code:_0x46d077,Roomslist:_0x238a4d}=_0x4798b9['body'],_0x63de61=_0x238a4d[_0x669768(0x9a)](','),_0x102251=[];async function _0x39cf06(_0x14f7af){var _0x5af3c9=_0x669768;const _0x14f086=await warehouse[_0x5af3c9(0x91)]([{'$match':{'name':_0x2217a2,'room':_0x14f7af}},{'$unwind':_0x5af3c9(0x159)},{'$match':{'product_details.primary_code':_0x46d077}},{'$group':{'_id':_0x5af3c9(0x156),'name':{'$first':_0x5af3c9(0x131)},'instock':{'$first':_0x5af3c9(0xac)},'primary_code':{'$first':_0x5af3c9(0xca)},'secondary_code':{'$first':_0x5af3c9(0xef)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x5af3c9(0x145)},'isle':{'$first':_0x5af3c9(0xa3)},'type':{'$first':_0x5af3c9(0xfe)},'pallet':{'$first':_0x5af3c9(0x167)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x5af3c9(0xc8)},'storage':{'$first':_0x5af3c9(0x148)},'rack':{'$first':_0x5af3c9(0x11a)},'expiry_date':{'$first':_0x5af3c9(0xa8)},'production_date':{'$first':_0x5af3c9(0xd2)},'batch_code':{'$first':_0x5af3c9(0x139)},'maxPerUnit':{'$first':_0x5af3c9(0x171)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x5af3c9(0x17e)},'maxProducts':{'$first':_0x5af3c9(0x17c)}}}]),_0x444e83=await warehouse[_0x5af3c9(0x91)]([{'$match':{'name':_0x2217a2,'room':_0x14f7af}},{'$unwind':_0x5af3c9(0x159)},{'$match':{'product_details.secondary_code':_0x46d077}},{'$group':{'_id':_0x5af3c9(0x156),'name':{'$first':_0x5af3c9(0x131)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5af3c9(0xef)},'product_code':{'$first':_0x5af3c9(0x15e)},'level':{'$first':_0x5af3c9(0x145)},'isle':{'$first':_0x5af3c9(0xa3)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x5af3c9(0xd9)},'secondary_unit':{'$first':_0x5af3c9(0xc8)},'storage':{'$first':_0x5af3c9(0x148)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x5af3c9(0x17e)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);if(_0x14f086[_0x5af3c9(0xf7)]>0x0)_0x102251[_0x5af3c9(0x149)](_0x14f086);else _0x444e83[_0x5af3c9(0xf7)]>0x0&&_0x102251['push'](_0x444e83);}const _0xfb2410=_0x63de61[_0x669768(0x9e)](_0x3ce584=>_0x39cf06(_0x3ce584));await Promise[_0x669768(0x96)](_0xfb2410),_0x26e8b2[_0x669768(0x162)](_0x102251);}),router[a0_0x3e0d42(0xa4)]('/barcode_scanner2',async(_0x579b61,_0x386277)=>{var _0x31ae88=a0_0x3e0d42;try{const {FromWareHouse:_0x54e04c,FromRoom:_0x458fa4,ToWarehouse:_0x48cd89,ToRoom:_0x53e3db,secondary_code:_0x1e5ccd}=_0x579b61[_0x31ae88(0x113)],_0x477352=await warehouse[_0x31ae88(0x91)]([{'$match':{'name':_0x54e04c}},{'$unwind':_0x31ae88(0x159)},{'$match':{'product_details.secondary_code':_0x1e5ccd}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x31ae88(0x131)},'primary_code':{'$first':_0x31ae88(0xca)},'secondary_code':{'$first':_0x31ae88(0xef)},'product_code':{'$first':_0x31ae88(0x15e)},'instock':{'$first':_0x31ae88(0xac)},'warehouse':{'$first':_0x31ae88(0xbe)},'level':{'$first':_0x31ae88(0xc6)},'isle':{'$first':_0x31ae88(0x12e)},'pallet':{'$first':_0x31ae88(0x13e)},'maxProducts':{'$first':_0x31ae88(0x17c)},'unit':{'$first':_0x31ae88(0xd9)}}}]);_0x386277[_0x31ae88(0x101)](0xc8)[_0x31ae88(0x162)](_0x477352);}catch(_0xbcab21){_0x386277[_0x31ae88(0x101)](0x194)[_0x31ae88(0x162)]({'message':_0xbcab21[_0x31ae88(0x122)]});}}),router['post']('/barcode_scanner3',async(_0x18f4b1,_0x251460)=>{var _0x45dc9f=a0_0x3e0d42;try{const {FromWareHouse:_0x438609,FromRoom:_0x30b02b,ToWarehouse:_0x846d85,ToRoom:_0x35ec9d,product_code:_0x3080b2}=_0x18f4b1[_0x45dc9f(0x113)],_0x1ea943=await warehouse['aggregate']([{'$match':{'name':_0x438609}},{'$unwind':_0x45dc9f(0x159)},{'$match':{'product_details.product_code':_0x3080b2}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x45dc9f(0x131)},'primary_code':{'$first':_0x45dc9f(0xca)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x45dc9f(0x15e)},'instock':{'$first':_0x45dc9f(0xac)},'warehouse':{'$first':_0x45dc9f(0xbe)},'level':{'$first':_0x45dc9f(0xc6)},'isle':{'$first':_0x45dc9f(0x12e)},'pallet':{'$first':_0x45dc9f(0x13e)},'maxProducts':{'$first':_0x45dc9f(0x17c)},'unit':{'$first':_0x45dc9f(0xd9)}}}]);_0x251460['status'](0xc8)['json'](_0x1ea943);}catch(_0x11970a){_0x251460['status'](0x194)['json']({'message':_0x11970a[_0x45dc9f(0x122)]});}}),router[a0_0x3e0d42(0xa4)]('/CheckingWarehouse',async(_0x36262a,_0x3d048c)=>{var _0x46cca2=a0_0x3e0d42;const {level:_0x56a733,isle:_0x1ea3d8,pallet:_0x15d38e,warehouses:_0x28da22,room:_0x2a5060}=_0x36262a[_0x46cca2(0x113)];try{const _0x13ab8e=await warehouse[_0x46cca2(0x91)]([{'$match':{'name':_0x28da22,'room':_0x2a5060}},{'$unwind':_0x46cca2(0x159)},{'$match':{'product_details.level':parseInt(_0x56a733),'product_details.isle':_0x1ea3d8,'product_details.pallet':parseInt(_0x15d38e)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x46cca2(0x131)},'product_stock':{'$first':'$product_details.product_stock'},'level':{'$first':_0x46cca2(0xc6)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x46cca2(0x13e)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x3d048c['status'](0xc8)[_0x46cca2(0x162)](_0x13ab8e);}catch(_0x42e6be){_0x3d048c['status'](0x194)['json']({'message':_0x42e6be['message']});}}),module['exports']=router;function a0_0x1590(){var _0x2d4e33=['Portuguese\x20(BR)','6137973AYXYCa','to_prod_isle','$product_details.isle','catch','maxperunit','$product_details.product_name','$from_warehouse','/picking_list/PDF_transfer_rm/','<tbody\x20style=\x22text-align:\x20center;\x22>','/view/add_transfer','</span>','To_invoice','render','$product_details.batch_code','Rack\x20E','secondary_unit','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.pallet','string','Transfer\x20Mail','60jOjdlZ','from_prod_pallet','$product','/preview/:id','$product_details.bay','Arabic\x20(ae)','random','$product_details.storage','push','Shelves','French','414228vFNtAu','image','user','Return\x20Rooms','../middleware/auth','rak','<div>','from_prod_isle','to_prod_level','to_room_name','$product_details._id','slice','Spanish','$product_details','English','edit_transfer','logo','filter','$product_details.product_code','Enabled','secondary_code','primary_code','json','Portuguese','</td>','prod_cat','to_invoice','$product_details.floorlevel','An\x20error\x20occurred.','Logo.png','from_rak','product_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','floor','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','Arabic','product','$product_details.maxPerUnit','TRF-','\x20</h2>','/transfer/view','transfer','$product.to_room_name','<h5\x20style=\x22text-align:\x20left;\x22>','$isAllowEdit','language','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','redirect','$product_details.maxProducts','DRY\x20STORAGE','$room','back','get','from_invoice','error','to_bay','params','/barcode_scanner','aggregate','from_warehouse','<strong>\x20Regards\x20</strong>','then','findById','all','staff','forEach','Raw\x20Materials','split','flash','from_bin','8doXaEi','map','to_quantity','\x20Order\x20Date\x20:\x20','nodemailer','</tbody>','$product_details.bin','post','COLD\x20STORAGE','</body></html>','errors','$product_details.expiry_date','$finalize','maxProducts','primary_unit','$product_details.product_stock','from_room_name','Rack\x20A','282715HZthhF','getDate','unit','createTransport','2364nPIsOH','Floor','to_floorlevel','English\x20(US)','batch_code','edit_transfer_view','9800770ncIKKf','findOne','100357sBSFHc','from_storage','product_name','$name','finalize','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Hindi','</div>','Rack\x20B','\x20Order\x20Number\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$product_details.level','Error\x20Occurs','$product_details.secondary_unit','getMonth','$product_details.primary_code','Router','</table>','log','<html><head><title></title>','production_date','New_Qty_Converted','12Zgbvwd','$product_details.production_date','from_types','/transfer/preview/','to_prod_qty','52129TxsfdK','from_rack','_id','$product_details.unit','Rack\x20D','4UkOvqI','success','from_bay','Enclosed','Receiving\x20Area','max_per_unit','</head><body>','bay','sendMail','German','port','Rack\x20C','from_room','284326bFisxE','password','type','from_floorlevel','save','email','to_room','$product_details.secondary_code','product_stock','MaxStocks_data2','$product.from_room_name','express','product_details','<tr>','/view','length','There\x27s\x20a\x20error\x20in\x20this\x20transaction','<hr\x20class=\x22my-3\x22>','role','<h2>\x20','floorlevel','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$product_details.type','RoomAssigned','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','status','master','prod_name','add_transfer','warehouse','rack','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','An\x20error\x20occurred\x20while\x20saving\x20data.','bin','storage','Ambient','product_code3','host','Level','toString','<h5>','/view/:id','expiry_date','body','from_prod_qty','from_prod_level','<span\x20style=\x22float:\x20right;\x22>','updateOne','Transfer\x20Finalize\x20Successfully','$date','$product_details.rack','to_prod_pallet','Chinese','note','invoice','$_id','ToRoomAssigned','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','message','to_bin','</tr>','find','to_types','to_warehouse','site_title','$invoice','from_quantity'];a0_0x1590=function(){return _0x2d4e33;};return a0_0x1590();}