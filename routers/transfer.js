function a0_0x2558(_0x1d2767,_0x4dd207){var _0x587c60=a0_0x587c();return a0_0x2558=function(_0x2558e3,_0x34828e){_0x2558e3=_0x2558e3-0x1b7;var _0x15b916=_0x587c60[_0x2558e3];return _0x15b916;},a0_0x2558(_0x1d2767,_0x4dd207);}var a0_0x535fc7=a0_0x2558;(function(_0xaadff0,_0x44a2e6){var _0xb7cad7=a0_0x2558,_0x50c4eb=_0xaadff0();while(!![]){try{var _0x1eee34=-parseInt(_0xb7cad7(0x1d6))/0x1+-parseInt(_0xb7cad7(0x1d9))/0x2*(-parseInt(_0xb7cad7(0x1ea))/0x3)+-parseInt(_0xb7cad7(0x1ce))/0x4+-parseInt(_0xb7cad7(0x255))/0x5+parseInt(_0xb7cad7(0x29a))/0x6+parseInt(_0xb7cad7(0x27e))/0x7+parseInt(_0xb7cad7(0x29b))/0x8*(parseInt(_0xb7cad7(0x1d2))/0x9);if(_0x1eee34===_0x44a2e6)break;else _0x50c4eb['push'](_0x50c4eb['shift']());}catch(_0x4ce2ec){_0x50c4eb['push'](_0x50c4eb['shift']());}}}(a0_0x587c,0xb753a));function a0_0x587c(){var _0xe1c35=['French','../models/all_models','$product.from_room_name','from_types','ToRoomAssigned','Rack\x20E','get','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','213xXwVQx','/view/:id','$product_details.production_date','to_floorlevel','_id','product_code3','prod_cat','/transfer/view','errors','to_bin','render','$product_details.unit','DRY\x20STORAGE','</head><body>','prod_name','production_date','from_prod_qty','from_prod_pallet','$product_details.product_stock','email','RoomAssigned','Arabic','concat','transfer','English','to_bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','Product\x20Transfer\x20successfully','Raw\x20Materials','to_quantity','storage','master','floor','/transfer/preview/','product','$isAllowEdit','Rack\x20A','$product_details.type','$product_details.batch_code','slice','type','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','port','Email\x20sent\x20successfully','</div>','body','unit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</body></html>','Hindi','status','To_invoice','secondary_code','$product_details.pallet','/view/add_transfer','\x20Order\x20Number\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','rack','random','floorlevel','Rack\x20F','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','user','<div>','findOne','sendMail','to_types','from_rak','Portuguese\x20(BR)','save','English\x20(US)','all','from_bin','logo','/preview/:id','json','updateOne','flash','bay','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','maxProducts','from_quantity','$product','error','split','edit_transfer_view','</h5>','$product_details.storage','$_id','$product_details.bay','product_name','\x20Order\x20Date\x20:\x20','$product_details.bin','redirect','</td>','$product_details.floorlevel','</tr>','Arabic\x20(ae)','from_floorlevel','invoice','Logo.png','/../public','<span\x20style=\x22float:\x20right;\x22>','<!DOCTYPE\x20html>','date','find','</table>','6660980MWeRpN','site_title','/upload/','max_per_unit','finalize','MaxStocks_data2','Spanish','map','from_room_name','$product_details.maxPerUnit','from_prod_level','then','$product_details.product_code','Level','batch_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','$product_details.expiry_date','$product_details','product_stock','Router','<strong>\x20Regards\x20</strong>','expiry_date','filter','Rack\x20D','primary_code','TRF-','to_prod_pallet','log','product_details','bin','$product_details.secondary_code','$product_details.secondary_unit','message','Enabled','push','$product_details.rack','German','catch','There\x27s\x20a\x20error\x20in\x20this\x20transaction','host','edit_transfer','2582055VSfGAA','<tr>','$product_details.maxProducts','Enclosed','from_warehouse','warehouse','Transfer\x20Edit\x20Successfully','getMonth','getFullYear','Return\x20Rooms','success','$product_details.level','/barcode_scanner3','$product_details.isle','Floor','Receiving\x20Area','from_rack','from_storage','/CheckingWarehouse','forEach','string','RMSEmail','findById','to_room_name','Shelves','<hr\x20class=\x22my-3\x22>','post','</tbody>','8016282DWdamZ','16wZIdoV','rak','Error\x20Occurs','to_invoice','role','padStart','../middleware/auth','$room','getDate','Rack\x20C','</span>','params','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','to_room','</thead>','staff','secondary_unit','$finalize','<tbody\x20style=\x22text-align:\x20center;\x22>','back','password','An\x20error\x20occurred.','aggregate','Portuguese','exports','/barcode_scanner2','language','$product.to_room_name','$name','note','to_prod_isle','Ambient','maxperunit','from_invoice','New_Qty_Converted','Chinese','product_code','851800JTSMzu','to_prod_level','$invoice','An\x20error\x20occurred\x20while\x20saving\x20data.','4580325HfyhYZ','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','from_bay','$product_details._id','1034541nqimaK','Rack\x20B','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','17122xPXssy','$product_details.product_name','length','$to_warehouse','to_warehouse','$product_details.primary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','createTransport','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'];a0_0x587c=function(){return _0xe1c35;};return a0_0x587c();}const express=require('express'),app=express(),router=express[a0_0x535fc7(0x268)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x535fc7(0x1e3)),auth=require(a0_0x535fc7(0x2a1)),users=require('../public/language/languages.json'),nodemailer=require('nodemailer');router[a0_0x535fc7(0x1e8)]('/view',auth,async(_0x4cfe9b,_0x34b5f2)=>{var _0x473a2b=a0_0x535fc7;try{const {username:_0x285093,email:_0x3cea95,role:_0x39a579}=_0x4cfe9b[_0x473a2b(0x228)],_0x4c2526=_0x4cfe9b['user'],_0x3b6860=await profile[_0x473a2b(0x22a)]({'email':_0x4c2526['email']}),_0x5353ab=await master_shop[_0x473a2b(0x253)]();console['log'](_0x473a2b(0x209),_0x5353ab);let _0x29998f;if(_0x4c2526[_0x473a2b(0x29f)]==_0x473a2b(0x1b8)){const _0x32525d=await staff[_0x473a2b(0x22a)]({'email':_0x4c2526[_0x473a2b(0x1fd)]});_0x29998f=await transfers[_0x473a2b(0x253)]({'from_warehouse':_0x32525d[_0x473a2b(0x283)]});}else _0x29998f=await transfers[_0x473a2b(0x1bf)]([{'$unwind':_0x473a2b(0x23c)},{'$group':{'_id':_0x473a2b(0x242),'invoice':{'$first':_0x473a2b(0x1d0)},'date':{'$first':'$date'},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x473a2b(0x1dc)},'from_room_name':{'$addToSet':_0x473a2b(0x1e4)},'to_room_name':{'$addToSet':_0x473a2b(0x1c4)},'finalize':{'$first':_0x473a2b(0x1ba)},'isAllowEdit':{'$first':_0x473a2b(0x20d)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x230)){var _0x2f97b4=users['English'];console[_0x473a2b(0x270)](_0x2f97b4);}else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x21b))var _0x2f97b4=users[_0x473a2b(0x21b)];else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]=='German')var _0x2f97b4=users[_0x473a2b(0x279)];else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x25b))var _0x2f97b4=users[_0x473a2b(0x25b)];else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x1e2))var _0x2f97b4=users[_0x473a2b(0x1e2)];else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x22e))var _0x2f97b4=users[_0x473a2b(0x1c0)];else{if(_0x5353ab[0x0]['language']==_0x473a2b(0x1cc))var _0x2f97b4=users['Chinese'];else{if(_0x5353ab[0x0][_0x473a2b(0x1c3)]==_0x473a2b(0x24b))var _0x2f97b4=users[_0x473a2b(0x1ff)];}}}}}}}_0x34b5f2[_0x473a2b(0x1f4)](_0x473a2b(0x201),{'success':_0x4cfe9b[_0x473a2b(0x237)](_0x473a2b(0x288)),'errors':_0x4cfe9b['flash'](_0x473a2b(0x1f2)),'role':_0x4c2526,'profile':_0x3b6860,'master_shop':_0x5353ab,'transfer':_0x29998f,'language':_0x2f97b4});}catch(_0x471956){console['log'](_0x471956);}});async function getRandom8DigitNumber(){var _0x352695=a0_0x535fc7;const _0x3bf9e6=0x989680,_0x4d9557=0x5f5e0ff,_0x3f4dd9=Math[_0x352695(0x20a)](Math[_0x352695(0x224)]()*(_0x4d9557-_0x3bf9e6+0x1))+_0x3bf9e6;var _0x3f3692;const _0x55a4fa=await transfers[_0x352695(0x22a)]({'invoice':_0x352695(0x26e)+_0x3f4dd9});return _0x55a4fa&&_0x55a4fa[_0x352695(0x1db)]>0x0?_0x3f3692=_0x352695(0x26e)+_0x3f4dd9:_0x3f3692=_0x352695(0x26e)+_0x3f4dd9,_0x3f3692;}router[a0_0x535fc7(0x1e8)](a0_0x535fc7(0x220),auth,async(_0x5af3d2,_0x462aab)=>{var _0x38c105=a0_0x535fc7;try{const {username:_0x1ebc2a,email:_0x20b863,role:_0xb0ea67}=_0x5af3d2[_0x38c105(0x228)],_0x1ffd52=_0x5af3d2[_0x38c105(0x228)],_0x236e71=await profile[_0x38c105(0x22a)]({'email':_0x1ffd52['email']}),_0xc2651a=await master_shop[_0x38c105(0x253)]();console[_0x38c105(0x270)](_0x38c105(0x209),_0xc2651a);let _0x38fec8;if(_0x1ffd52['role']==_0x38c105(0x1b8)){const _0x673ed4=await staff[_0x38c105(0x22a)]({'email':_0x1ffd52[_0x38c105(0x1fd)]});_0x38fec8=await warehouse['aggregate']([{'$match':{'status':_0x38c105(0x276),'name':_0x673ed4[_0x38c105(0x283)],'warehouse_category':_0x38c105(0x206)}},{'$group':{'_id':_0x38c105(0x1c5),'name':{'$first':_0x38c105(0x1c5)}}}]);}else _0x38fec8=await warehouse[_0x38c105(0x1bf)]([{'$match':{'status':_0x38c105(0x276),'warehouse_category':_0x38c105(0x206)}},{'$group':{'_id':'$name','name':{'$first':_0x38c105(0x1c5)}}}]);var _0x1bb984=[_0x38c105(0x1c8),_0x38c105(0x281),_0x38c105(0x287)];const _0x350460=await transfers[_0x38c105(0x253)]({}),_0x5167e3=_0x350460[_0x38c105(0x1db)]+0x1,_0x19afe6=_0x38c105(0x26e)+_0x5167e3['toString']()[_0x38c105(0x2a0)](0x5,'0');if(_0xc2651a[0x0]['language']==_0x38c105(0x230)){var _0x390f14=users[_0x38c105(0x202)];console[_0x38c105(0x270)](_0x390f14);}else{if(_0xc2651a[0x0][_0x38c105(0x1c3)]==_0x38c105(0x21b))var _0x390f14=users[_0x38c105(0x21b)];else{if(_0xc2651a[0x0][_0x38c105(0x1c3)]=='German')var _0x390f14=users['German'];else{if(_0xc2651a[0x0][_0x38c105(0x1c3)]==_0x38c105(0x25b))var _0x390f14=users[_0x38c105(0x25b)];else{if(_0xc2651a[0x0]['language']==_0x38c105(0x1e2))var _0x390f14=users[_0x38c105(0x1e2)];else{if(_0xc2651a[0x0]['language']==_0x38c105(0x22e))var _0x390f14=users[_0x38c105(0x1c0)];else{if(_0xc2651a[0x0][_0x38c105(0x1c3)]=='Chinese')var _0x390f14=users[_0x38c105(0x1cc)];else{if(_0xc2651a[0x0][_0x38c105(0x1c3)]=='Arabic\x20(ae)')var _0x390f14=users['Arabic'];}}}}}}}const _0x4f0626=getRandom8DigitNumber();_0x4f0626['then'](_0x1d6c10=>{var _0xe872ff=_0x38c105;_0x462aab[_0xe872ff(0x1f4)]('add_transfer',{'success':_0x5af3d2[_0xe872ff(0x237)]('success'),'errors':_0x5af3d2[_0xe872ff(0x237)]('errors'),'role':_0x1ffd52,'profile':_0x236e71,'master_shop':_0xc2651a,'warehouse':_0x38fec8,'language':_0x390f14,'rooms_data':_0x1bb984,'invoice':_0x1d6c10});})[_0x38c105(0x27a)](_0x24a43c=>{var _0x81cd60=_0x38c105;_0x5af3d2[_0x81cd60(0x237)](_0x81cd60(0x1f2),_0x81cd60(0x27b)),_0x462aab[_0x81cd60(0x247)](_0x81cd60(0x1f1));});}catch(_0x5a339c){console['log'](_0x5a339c);}}),router[a0_0x535fc7(0x298)](a0_0x535fc7(0x220),auth,async(_0x16cfd4,_0xd39455)=>{var _0x5a9fed=a0_0x535fc7;try{console['log'](_0x16cfd4[_0x5a9fed(0x217)]);const {date:_0x124ba5,from_warehouse:_0x5d7489,FromRoom_name:_0x5e652d,to_warehouse:_0x1b2a5b,ToRoom_name:_0x476fe8,prod_name:_0xa0f28a,from_prod_qty:_0x4b1fe7,from_prod_level:_0x10ed86,from_prod_isle:_0x2bde85,from_prod_pallet:_0x359343,to_prod_qty:_0xb6ac49,to_prod_level:_0x27d3af,to_prod_isle:_0xedda8b,to_prod_pallet:_0x4386b7,primary_code:_0x521ffc,secondary_code:_0x5e1b84,product_code3:_0x18c644,note:_0x28c7c8,MaxStocks_data2:_0x525f21,invoice:_0x312000,expiry_date:_0x5a9149}=_0x16cfd4[_0x5a9fed(0x217)];if(typeof _0xa0f28a==_0x5a9fed(0x292))var _0x398858=[_0x16cfd4['body']['prod_name']],_0x34c1f2=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1fa)]],_0x1d30b5=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x25f)]],_0x462b53=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1cb)]],_0x521b2a=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1cf)]],_0x36d3c8=[_0x16cfd4[_0x5a9fed(0x217)]['primary_code']],_0x18ab7d=[_0x16cfd4[_0x5a9fed(0x217)]['secondary_code']],_0x58f644=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1ef)]],_0x13db61=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x25a)]],_0x16a37c=[_0x16cfd4['body']['primary_unit']],_0x58866e=[_0x16cfd4['body']['secondary_unit']],_0x373376=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x263)]],_0x364a34=[_0x16cfd4[_0x5a9fed(0x217)]['expiry_date']],_0x214afa=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x258)]],_0x1d699b=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1f9)]],_0xeb6384=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1f0)]],_0x1d2f82=[_0x16cfd4[_0x5a9fed(0x217)]['RoomAssigned']],_0x22011b=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1e6)]],_0x59a095=[_0x16cfd4['body'][_0x5a9fed(0x1ca)]],_0x181c9e=[_0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x29e)]];else var _0x398858=[..._0x16cfd4['body'][_0x5a9fed(0x1f8)]],_0x34c1f2=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1fa)]],_0x1d30b5=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x25f)]],_0x462b53=[..._0x16cfd4['body']['New_Qty_Converted']],_0x521b2a=[..._0x16cfd4['body']['to_prod_level']],_0x36d3c8=[..._0x16cfd4[_0x5a9fed(0x217)]['primary_code']],_0x18ab7d=[..._0x16cfd4['body'][_0x5a9fed(0x21e)]],_0x58f644=[..._0x16cfd4['body'][_0x5a9fed(0x1ef)]],_0x13db61=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x25a)]],_0x16a37c=[..._0x16cfd4[_0x5a9fed(0x217)]['primary_unit']],_0x58866e=[..._0x16cfd4['body'][_0x5a9fed(0x1b9)]],_0x373376=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x263)]],_0x364a34=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x26a)]],_0x214afa=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x258)]],_0x1d699b=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1f9)]],_0xeb6384=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1f0)]],_0x1d2f82=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1fe)]],_0x22011b=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1e6)]],_0x59a095=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x1ca)]],_0x181c9e=[..._0x16cfd4[_0x5a9fed(0x217)][_0x5a9fed(0x29e)]];const _0x354753=_0x398858[_0x5a9fed(0x25c)](_0x35d671=>{return _0x35d671={'product_name':_0x35d671};});_0x34c1f2[_0x5a9fed(0x291)]((_0x4c17a2,_0x2995e1)=>{var _0x2258d3=_0x5a9fed;_0x354753[_0x2995e1][_0x2258d3(0x23b)]=_0x4c17a2;}),_0x59a095[_0x5a9fed(0x291)]((_0x2265ad,_0x2802e0)=>{var _0x5c1516=_0x5a9fed;_0x354753[_0x2802e0][_0x5c1516(0x1ca)]=_0x2265ad;}),_0x181c9e[_0x5a9fed(0x291)]((_0x2ad7de,_0x485532)=>{_0x354753[_0x485532]['To_invoice']=_0x2ad7de;}),_0x1d30b5[_0x5a9fed(0x291)]((_0x1ee54e,_0x96d3f1)=>{_0x1d2f82['forEach']((_0x4f805f,_0x1dab07)=>{var _0x4026ef=a0_0x2558;if(_0x4f805f==_0x4026ef(0x28d)&&_0x96d3f1==_0x1dab07){var _0x2db5a0=_0x1ee54e[_0x4026ef(0x211)](0x3);_0x354753[_0x96d3f1][_0x4026ef(0x28f)]=_0x1ee54e[0x0],_0x354753[_0x96d3f1][_0x4026ef(0x28e)]=_0x1ee54e[0x1],_0x354753[_0x96d3f1][_0x4026ef(0x1d4)]=0x0,_0x354753[_0x96d3f1][_0x4026ef(0x232)]=0x0,_0x354753[_0x96d3f1]['from_types']=_0x4026ef(0x28c),_0x354753[_0x96d3f1][_0x4026ef(0x24c)]=_0x2db5a0;}else{if(_0x4f805f==_0x4026ef(0x296)&&_0x96d3f1==_0x1dab07){var _0x2db5a0=_0x1ee54e['slice'](0x3);_0x354753[_0x96d3f1][_0x4026ef(0x28f)]=_0x1ee54e[0x0],_0x354753[_0x96d3f1][_0x4026ef(0x28e)]=_0x1ee54e[0x1],_0x354753[_0x96d3f1][_0x4026ef(0x1d4)]=0x0,_0x354753[_0x96d3f1]['from_bin']=0x0,_0x354753[_0x96d3f1][_0x4026ef(0x1e5)]=_0x4026ef(0x28c),_0x354753[_0x96d3f1][_0x4026ef(0x24c)]=_0x1ee54e[0x5];}else{if(_0x96d3f1==_0x1dab07){var _0x44c7e9;if(_0x1ee54e[0x4]=='L')_0x44c7e9=_0x4026ef(0x262);else _0x1ee54e[0x4]=='F'&&(_0x44c7e9=_0x4026ef(0x28c));_0x354753[_0x96d3f1]['from_storage']=_0x1ee54e[0x0],_0x354753[_0x96d3f1][_0x4026ef(0x28e)]=_0x1ee54e[0x1],_0x354753[_0x96d3f1][_0x4026ef(0x1d4)]=_0x1ee54e[0x2],_0x354753[_0x96d3f1][_0x4026ef(0x232)]=_0x1ee54e[0x3],_0x354753[_0x96d3f1][_0x4026ef(0x1e5)]=_0x44c7e9,_0x354753[_0x96d3f1][_0x4026ef(0x24c)]=_0x1ee54e[0x5];}}}});}),_0x462b53['forEach']((_0x2df2e7,_0x5f52da)=>{var _0x160e9a=_0x5a9fed;_0x354753[_0x5f52da][_0x160e9a(0x207)]=_0x2df2e7;}),_0x521b2a[_0x5a9fed(0x291)]((_0x421dc0,_0x32215c)=>{_0x22011b['forEach']((_0x141f80,_0x2af251)=>{var _0x292437=a0_0x2558;if(_0x141f80==_0x292437(0x28d)&&_0x32215c==_0x2af251){var _0x414519=_0x421dc0[_0x292437(0x211)](0x3);_0x354753[_0x32215c]['storage']=_0x421dc0[0x0],_0x354753[_0x32215c][_0x292437(0x223)]=_0x421dc0[0x1],_0x354753[_0x32215c][_0x292437(0x203)]=0x0,_0x354753[_0x32215c][_0x292437(0x1f3)]=0x0,_0x354753[_0x32215c]['to_types']=_0x292437(0x28c),_0x354753[_0x32215c][_0x292437(0x1ed)]=_0x414519;}else{if(_0x141f80==_0x292437(0x296)&&_0x32215c==_0x2af251){var _0x414519=_0x421dc0[_0x292437(0x211)](0x3);_0x354753[_0x32215c]['storage']=_0x421dc0[0x0],_0x354753[_0x32215c][_0x292437(0x223)]=_0x421dc0[0x1],_0x354753[_0x32215c][_0x292437(0x203)]=0x0,_0x354753[_0x32215c][_0x292437(0x1f3)]=0x0,_0x354753[_0x32215c]['to_types']=_0x292437(0x28c),_0x354753[_0x32215c][_0x292437(0x1ed)]=_0x421dc0[0x5];}else{if(_0x32215c==_0x2af251){var _0x3395ba;if(_0x421dc0[0x4]=='L')_0x3395ba=_0x292437(0x262);else _0x421dc0[0x4]=='F'&&(_0x3395ba='Floor');_0x354753[_0x32215c][_0x292437(0x208)]=_0x421dc0[0x0],_0x354753[_0x32215c][_0x292437(0x223)]=_0x421dc0[0x1],_0x354753[_0x32215c][_0x292437(0x203)]=_0x421dc0[0x2],_0x354753[_0x32215c][_0x292437(0x1f3)]=_0x421dc0[0x3],_0x354753[_0x32215c][_0x292437(0x22c)]=_0x3395ba,_0x354753[_0x32215c]['to_floorlevel']=_0x421dc0[0x5];}}}});}),_0x36d3c8[_0x5a9fed(0x291)]((_0x490941,_0x332ffb)=>{var _0x1fdc30=_0x5a9fed;_0x354753[_0x332ffb][_0x1fdc30(0x26d)]=_0x490941;}),_0x18ab7d[_0x5a9fed(0x291)]((_0x1f5431,_0x99fcc2)=>{var _0xe66d84=_0x5a9fed;_0x354753[_0x99fcc2][_0xe66d84(0x21e)]=_0x1f5431;}),_0x58f644[_0x5a9fed(0x291)]((_0xa3dc7f,_0x5530b9)=>{var _0x1ff3ae=_0x5a9fed;_0x354753[_0x5530b9][_0x1ff3ae(0x1cd)]=_0xa3dc7f;}),_0x13db61[_0x5a9fed(0x291)]((_0x4aa8a9,_0x5244b1)=>{var _0x1b3bd9=_0x5a9fed;_0x354753[_0x5244b1][_0x1b3bd9(0x23a)]=_0x4aa8a9;}),_0x16a37c[_0x5a9fed(0x291)]((_0x52aaec,_0x1768d8)=>{var _0x26b223=_0x5a9fed;_0x354753[_0x1768d8][_0x26b223(0x218)]=_0x52aaec;}),_0x58866e[_0x5a9fed(0x291)]((_0x2028b6,_0x2b59ee)=>{var _0x1381e8=_0x5a9fed;_0x354753[_0x2b59ee][_0x1381e8(0x1b9)]=_0x2028b6;}),_0x373376[_0x5a9fed(0x291)]((_0x44b5a1,_0x544b4f)=>{var _0x289c61=_0x5a9fed;_0x354753[_0x544b4f][_0x289c61(0x263)]=_0x44b5a1;}),_0x364a34['forEach']((_0x5de0f2,_0x5e0ade)=>{var _0x766906=_0x5a9fed;_0x354753[_0x5e0ade][_0x766906(0x26a)]=_0x5de0f2;}),_0x214afa[_0x5a9fed(0x291)]((_0xd4173c,_0x36f738)=>{var _0x1b8810=_0x5a9fed;_0x354753[_0x36f738][_0x1b8810(0x1c9)]=_0xd4173c;}),_0x1d699b[_0x5a9fed(0x291)]((_0x4061b8,_0x4fbaef)=>{var _0x16853e=_0x5a9fed;_0x354753[_0x4fbaef][_0x16853e(0x1f9)]=_0x4061b8;}),_0xeb6384[_0x5a9fed(0x291)]((_0x33ddc0,_0x45eba1)=>{var _0x393bd2=_0x5a9fed;_0x354753[_0x45eba1][_0x393bd2(0x1f0)]=_0x33ddc0;}),_0x1d2f82[_0x5a9fed(0x291)]((_0x18d322,_0x38f3e0)=>{var _0x54e7ca=_0x5a9fed;_0x354753[_0x38f3e0][_0x54e7ca(0x25d)]=_0x18d322;}),_0x22011b[_0x5a9fed(0x291)]((_0x5d5cc2,_0x3ae018)=>{var _0x203e2a=_0x5a9fed;_0x354753[_0x3ae018][_0x203e2a(0x295)]=_0x5d5cc2;});const _0x265f82=_0x354753[_0x5a9fed(0x26b)](_0x104ca3=>_0x104ca3[_0x5a9fed(0x207)]!=='0'&&_0x104ca3[_0x5a9fed(0x207)]!==''||_0x104ca3[_0x5a9fed(0x1ed)]!=='0'&&_0x104ca3['to_floorlevel']!==''),_0x59bd5c=new transfers({'date':_0x124ba5,'from_warehouse':_0x5d7489,'to_warehouse':_0x1b2a5b,'product':_0x265f82,'note':_0x28c7c8,'invoice':_0x312000}),_0x363757=await _0x59bd5c[_0x5a9fed(0x22f)]();_0x16cfd4[_0x5a9fed(0x237)](_0x5a9fed(0x288),_0x5a9fed(0x205)),_0xd39455[_0x5a9fed(0x247)](_0x5a9fed(0x20b)+_0x363757[_0x5a9fed(0x1ee)]);}catch(_0x5820ea){console[_0x5a9fed(0x270)](_0x5820ea),_0xd39455['status'](0xc8)[_0x5a9fed(0x235)]({'errorMessage':_0x5820ea['message']});}}),router[a0_0x535fc7(0x1e8)](a0_0x535fc7(0x234),auth,async(_0x1d9226,_0x24d606)=>{var _0x31033a=a0_0x535fc7;try{const {username:_0x59c02d,email:_0x1c8742,role:_0x358172}=_0x1d9226[_0x31033a(0x228)],_0x4c2122=_0x1d9226['user'],_0xdc83cb=await profile[_0x31033a(0x22a)]({'email':_0x4c2122[_0x31033a(0x1fd)]}),_0x13e2dc=await master_shop['find']();console[_0x31033a(0x270)](_0x31033a(0x209),_0x13e2dc);const _0x19b1bf=await transfers['findById'](_0x1d9226[_0x31033a(0x2a6)]['id']);let _0x20dcee=new Date(_0x19b1bf['expiry_date']),_0x569dc7=('0'+_0x20dcee[_0x31033a(0x2a3)]())['slice'](-0x2),_0x1eb473=('0'+(_0x20dcee[_0x31033a(0x285)]()+0x1))[_0x31033a(0x211)](-0x2),_0x476505=_0x20dcee[_0x31033a(0x286)](),_0x5ac9b5=_0x476505+'-'+_0x1eb473+'-'+_0x569dc7,_0x5ac02c;if(_0x4c2122[_0x31033a(0x29f)]=='staff'){const _0x501e67=await staff['findOne']({'email':_0x4c2122[_0x31033a(0x1fd)]});_0x5ac02c=await warehouse[_0x31033a(0x253)]({'status':_0x31033a(0x276),'name':_0x501e67['warehouse'],'warehouse_category':_0x31033a(0x206)});}else _0x5ac02c=await warehouse[_0x31033a(0x253)]({'status':_0x31033a(0x276),'warehouse_category':'Raw\x20Materials'});const _0x51fa83=await warehouse['aggregate']([{'$match':{'name':_0x19b1bf['from_warehouse']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x31033a(0x1fc)},'bay':{'$first':_0x31033a(0x243)},'bin':{'$first':_0x31033a(0x246)},'type':{'$first':_0x31033a(0x20f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x31033a(0x1de)},'secondary_code':{'$first':_0x31033a(0x273)},'product_code':{'$first':_0x31033a(0x261)},'storage':{'$first':_0x31033a(0x241)},'rack':{'$first':_0x31033a(0x278)},'expiry_date':{'$first':_0x31033a(0x265)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x31033a(0x2a2)}}}]);if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x230)){var _0x44dfb1=users[_0x31033a(0x202)];console[_0x31033a(0x270)](_0x44dfb1);}else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x21b))var _0x44dfb1=users[_0x31033a(0x21b)];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x279))var _0x44dfb1=users[_0x31033a(0x279)];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x25b))var _0x44dfb1=users[_0x31033a(0x25b)];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x1e2))var _0x44dfb1=users['French'];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x22e))var _0x44dfb1=users[_0x31033a(0x1c0)];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x1cc))var _0x44dfb1=users[_0x31033a(0x1cc)];else{if(_0x13e2dc[0x0][_0x31033a(0x1c3)]==_0x31033a(0x24b))var _0x44dfb1=users[_0x31033a(0x1ff)];}}}}}}}_0x24d606[_0x31033a(0x1f4)](_0x31033a(0x23f),{'success':_0x1d9226[_0x31033a(0x237)](_0x31033a(0x288)),'errors':_0x1d9226[_0x31033a(0x237)](_0x31033a(0x1f2)),'role':_0x4c2122,'profile':_0xdc83cb,'master_shop':_0x13e2dc,'warehouse':_0x5ac02c,'transfer':_0x19b1bf,'stock':_0x51fa83,'language':_0x44dfb1});}catch(_0x4b214f){console[_0x31033a(0x270)](_0x4b214f);}}),router[a0_0x535fc7(0x298)](a0_0x535fc7(0x234),auth,async(_0x71a095,_0xd1fb47)=>{var _0x2ce7f9=a0_0x535fc7;try{const _0x30b6c6=_0x71a095[_0x2ce7f9(0x2a6)]['id'],{from_warehouse:_0x35fcbd,FromRoom_name:_0x53e8b3,to_warehouse:_0x36d0ca,ToRoom_name:_0x1b5208}=_0x71a095[_0x2ce7f9(0x217)],_0x3f393a=await transfers[_0x2ce7f9(0x294)]({'_id':_0x30b6c6}),_0x521f59=_0x3f393a[_0x2ce7f9(0x20c)]['map'](async _0x2cd189=>{var _0x2c1b6e=_0x2ce7f9;if(_0x2cd189[_0x2c1b6e(0x207)]>0x0){var _0x43b2a9=await warehouse['findOne']({'name':_0x3f393a[_0x2c1b6e(0x282)],'room':_0x2cd189[_0x2c1b6e(0x25d)],'warehouse_category':'Raw\x20Materials'});const _0x41dfb8=_0x43b2a9[_0x2c1b6e(0x271)][_0x2c1b6e(0x25c)](_0x5236ec=>{var _0x7c29f1=_0x2c1b6e;_0x5236ec[_0x7c29f1(0x244)]==_0x2cd189['product_name']&&_0x5236ec['floorlevel']==_0x2cd189[_0x7c29f1(0x24c)]&&_0x5236ec['type']==_0x2cd189[_0x7c29f1(0x1e5)]&&_0x5236ec[_0x7c29f1(0x272)]==_0x2cd189[_0x7c29f1(0x232)]&&_0x5236ec[_0x7c29f1(0x238)]==_0x2cd189[_0x7c29f1(0x1d4)]&&_0x5236ec[_0x7c29f1(0x223)]==_0x2cd189[_0x7c29f1(0x28e)]&&_0x5236ec[_0x7c29f1(0x208)]==_0x2cd189[_0x7c29f1(0x28f)]&&_0x5236ec[_0x7c29f1(0x26a)]==_0x2cd189[_0x7c29f1(0x26a)]&&_0x5236ec[_0x7c29f1(0x263)]==_0x2cd189[_0x7c29f1(0x263)]&&_0x5236ec[_0x7c29f1(0x1f9)]==_0x2cd189[_0x7c29f1(0x1f9)]&&_0x5236ec[_0x7c29f1(0x24d)]==_0x2cd189[_0x7c29f1(0x1ca)]&&(_0x5236ec[_0x7c29f1(0x267)]=_0x5236ec[_0x7c29f1(0x267)]-_0x2cd189['to_quantity']);});}return _0x43b2a9;});Promise[_0x2ce7f9(0x231)](_0x521f59)[_0x2ce7f9(0x260)](async _0x529cac=>{var _0x114644=_0x2ce7f9;try{for(const _0x5611a8 of _0x529cac){await _0x5611a8[_0x114644(0x22f)]();}try{const _0x28123a=_0x3f393a['product']['map'](async _0x20c98b=>{var _0x485dd8=_0x114644;if(_0x20c98b['to_quantity']>0x0){var _0x4b3e83=await warehouse['findOne']({'name':_0x3f393a[_0x485dd8(0x1dd)],'room':_0x20c98b['to_room_name'],'warehouse_category':_0x485dd8(0x206)}),_0x3727f3=0x0;const _0x235555=_0x4b3e83[_0x485dd8(0x271)][_0x485dd8(0x25c)](_0x5f4b29=>{var _0x379709=_0x485dd8;_0x5f4b29['product_name']==_0x20c98b[_0x379709(0x244)]&&_0x5f4b29['floorlevel']==_0x20c98b['to_floorlevel']&&_0x5f4b29[_0x379709(0x212)]==_0x20c98b['to_types']&&_0x5f4b29[_0x379709(0x272)]==_0x20c98b[_0x379709(0x1f3)]&&_0x5f4b29[_0x379709(0x238)]==_0x20c98b['to_bay']&&_0x5f4b29['rack']==_0x20c98b[_0x379709(0x223)]&&_0x5f4b29[_0x379709(0x208)]==_0x20c98b['storage']&&_0x5f4b29[_0x379709(0x26a)]==_0x20c98b[_0x379709(0x26a)]&&_0x5f4b29[_0x379709(0x263)]==_0x20c98b[_0x379709(0x263)]&&_0x5f4b29[_0x379709(0x1f9)]==_0x20c98b[_0x379709(0x1f9)]&&_0x5f4b29['invoice']==_0x20c98b[_0x379709(0x21d)]&&(_0x5f4b29[_0x379709(0x267)]=_0x5f4b29[_0x379709(0x267)]+_0x20c98b['to_quantity'],_0x3727f3++);});_0x3727f3=='0'&&(_0x4b3e83[_0x485dd8(0x271)]=_0x4b3e83[_0x485dd8(0x271)][_0x485dd8(0x200)]({'product_name':_0x20c98b[_0x485dd8(0x244)],'product_stock':_0x20c98b[_0x485dd8(0x207)],'bay':_0x20c98b[_0x485dd8(0x203)],'bin':_0x20c98b[_0x485dd8(0x1f3)],'type':_0x20c98b[_0x485dd8(0x22c)],'floorlevel':_0x20c98b[_0x485dd8(0x1ed)],'storage':_0x20c98b[_0x485dd8(0x208)],'rack':_0x20c98b[_0x485dd8(0x223)],'product_code':_0x20c98b[_0x485dd8(0x1cd)],'primary_code':_0x20c98b[_0x485dd8(0x26d)],'secondary_code':_0x20c98b[_0x485dd8(0x21e)],'maxProducts':_0x20c98b[_0x485dd8(0x23a)],'storage':_0x20c98b[_0x485dd8(0x208)],'rack':_0x20c98b[_0x485dd8(0x223)],'expiry_date':_0x20c98b[_0x485dd8(0x26a)],'maxPerUnit':_0x20c98b[_0x485dd8(0x1c9)],'batch_code':_0x20c98b[_0x485dd8(0x263)],'production_date':_0x20c98b[_0x485dd8(0x1f9)]}));}return _0x4b3e83;});Promise['all'](_0x28123a)[_0x114644(0x260)](async _0x40beb9=>{var _0x41bd09=_0x114644;try{for(const _0x53b08c of _0x40beb9){await warehouse[_0x41bd09(0x236)]({'_id':_0x53b08c[_0x41bd09(0x1ee)]},{'$addToSet':{'product_details':{'$each':_0x53b08c[_0x41bd09(0x271)]}}});}_0x3f393a[_0x41bd09(0x259)]='True';const _0x69b16a=await _0x3f393a[_0x41bd09(0x22f)](),_0x2e7ba9=await master_shop[_0x41bd09(0x253)](),_0x559f16=await email_settings['findOne'](),_0x54db61=await supervisor_settings[_0x41bd09(0x253)]();var _0x5e2d20=_0x3f393a[_0x41bd09(0x20c)],_0x29e872='',_0x583459;for(_0x583459 in _0x5e2d20){_0x29e872+='<tr>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5e2d20[_0x583459][_0x41bd09(0x244)]+'</td>'+_0x41bd09(0x1d8)+_0x5e2d20[_0x583459][_0x41bd09(0x1cd)]+_0x41bd09(0x248)+_0x41bd09(0x1d8)+_0x5e2d20[_0x583459][_0x41bd09(0x207)]+_0x41bd09(0x248)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5e2d20[_0x583459][_0x41bd09(0x218)]+_0x41bd09(0x248)+_0x41bd09(0x1d8)+_0x5e2d20[_0x583459][_0x41bd09(0x1b9)]+_0x41bd09(0x248)+_0x41bd09(0x1d8)+_0x3f393a[_0x41bd09(0x1dd)]+'</td>'+_0x41bd09(0x1d8)+_0x5e2d20[_0x583459][_0x41bd09(0x295)]+_0x41bd09(0x248)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5e2d20[_0x583459][_0x41bd09(0x208)]+_0x5e2d20[_0x583459][_0x41bd09(0x223)]+_0x5e2d20[_0x583459][_0x41bd09(0x203)]+_0x5e2d20[_0x583459]['to_bin']+_0x5e2d20[_0x583459][_0x41bd09(0x22c)][0x0]+_0x5e2d20[_0x583459][_0x41bd09(0x1ed)]+_0x41bd09(0x248),'</tr>';}let _0x79feb=nodemailer[_0x41bd09(0x1e0)]({'host':_0x559f16[_0x41bd09(0x27c)],'port':Number(_0x559f16[_0x41bd09(0x214)]),'secure':![],'auth':{'user':_0x559f16[_0x41bd09(0x1fd)],'pass':_0x559f16[_0x41bd09(0x1bd)]}}),_0x57381b={'from':_0x559f16['email'],'to':_0x54db61[0x0][_0x41bd09(0x293)],'subject':'Transfer\x20Mail','attachments':[{'filename':_0x41bd09(0x24e),'path':__dirname+_0x41bd09(0x24f)+_0x41bd09(0x257)+_0x2e7ba9[0x0]['image'],'cid':_0x41bd09(0x233)}],'html':_0x41bd09(0x251)+'<html><head><title></title>'+_0x41bd09(0x1f7)+'<div>'+_0x41bd09(0x2a7)+_0x41bd09(0x229)+_0x41bd09(0x239)+_0x41bd09(0x216)+_0x41bd09(0x229)+'<h2>\x20'+_0x2e7ba9[0x0][_0x41bd09(0x256)]+'\x20</h2>'+'</div>'+_0x41bd09(0x216)+_0x41bd09(0x297)+'<div>'+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x41bd09(0x221)+_0x3f393a['invoice']+'\x20'+_0x41bd09(0x250)+_0x41bd09(0x245)+_0x3f393a[_0x41bd09(0x252)]+'\x20'+_0x41bd09(0x2a5)+_0x41bd09(0x240)+_0x41bd09(0x216)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x41bd09(0x1e9)+_0x41bd09(0x27f)+_0x41bd09(0x227)+_0x41bd09(0x219)+_0x41bd09(0x222)+_0x41bd09(0x1e1)+_0x41bd09(0x1df)+_0x41bd09(0x264)+_0x41bd09(0x204)+_0x41bd09(0x213)+_0x41bd09(0x24a)+_0x41bd09(0x1b7)+_0x41bd09(0x1bb)+'\x20'+_0x29e872+'\x20'+_0x41bd09(0x299)+_0x41bd09(0x254)+'<div>'+_0x41bd09(0x269)+'<h5>'+_0x2e7ba9[0x0][_0x41bd09(0x256)]+'</h5>'+_0x41bd09(0x216)+_0x41bd09(0x216)+_0x41bd09(0x21a)};_0x79feb[_0x41bd09(0x22b)](_0x57381b,function(_0x54eae8,_0x2a9b83){var _0x2a2bbc=_0x41bd09;_0x54eae8?(console[_0x2a2bbc(0x270)](_0x54eae8),console[_0x2a2bbc(0x270)](_0x2a2bbc(0x29d))):console['log'](_0x2a2bbc(0x215));}),_0x71a095['flash'](_0x41bd09(0x288),'Transfer\x20Finalize\x20Successfully'),_0xd1fb47['redirect']('/picking_list/PDF_transfer_rm/'+_0x69b16a[_0x41bd09(0x1ee)]);}catch(_0x28c8a1){console[_0x41bd09(0x23d)](_0x28c8a1),_0xd1fb47['status'](0x1f4)['json']({'Perror':_0x41bd09(0x1d1),'message':_0x28c8a1['message']});}})[_0x114644(0x27a)](_0x544005=>{var _0x1a8614=_0x114644;console[_0x1a8614(0x23d)](_0x544005),_0xd1fb47[_0x1a8614(0x21c)](0x1f4)[_0x1a8614(0x235)]({'Perror':_0x1a8614(0x1be)});});}catch(_0x216c57){_0xd1fb47[_0x114644(0x235)](_0x216c57);}}catch(_0x8e78cf){console[_0x114644(0x23d)](_0x8e78cf),_0xd1fb47[_0x114644(0x21c)](0x1f4)[_0x114644(0x235)]({'Merror':_0x114644(0x1d1),'Message':_0x8e78cf[_0x114644(0x275)]});}})['catch'](_0x241b7c=>{var _0x4b73f3=_0x2ce7f9;console[_0x4b73f3(0x23d)](_0x241b7c),_0xd1fb47['status'](0x1f4)[_0x4b73f3(0x235)]({'Merror':_0x4b73f3(0x1be)});});}catch(_0x24738f){console[_0x2ce7f9(0x270)](_0x24738f);}});function BayBinSelected(_0x9c826b,_0x287c73){var _0x2fcf7a=a0_0x535fc7,_0x1e2628=[],_0x4ecd26=[],_0x4d7371=[],_0x2f1b1a=[],_0x4809a0=[],_0x5c5acc=[];let _0x477a90=[];if(_0x9c826b==_0x2fcf7a(0x1f6))switch(_0x287c73){case _0x2fcf7a(0x20e):_0x1e2628=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x4ecd26=[0x1,0x2],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=['Level',_0x2fcf7a(0x28c)],_0x4809a0=['D'],_0x5c5acc=['A'];break;case'Rack\x20B':_0x1e2628=[0x6,0x5,0x4,0x3,0x2,0x1],_0x4ecd26=[0x1,0x2],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x262),_0x2fcf7a(0x28c)],_0x4809a0=['D'],_0x5c5acc=['B'];break;case _0x2fcf7a(0x296):_0x1e2628=[0x0],_0x4ecd26=[0x0],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x28c)],_0x4809a0=['D'],_0x5c5acc=['S'];break;case'Receiving\x20Area':_0x1e2628=[0x0],_0x4ecd26=[0x0],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x4d7371=[_0x2fcf7a(0x28c)],_0x4809a0=['D'],_0x5c5acc=['R'];break;}else{if(_0x9c826b=='COLD\x20STORAGE')switch(_0x287c73){case _0x2fcf7a(0x20e):_0x1e2628=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x4ecd26=['B','F'],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x262),'Floor'],_0x4809a0=['C'],_0x5c5acc=['A'];break;case _0x2fcf7a(0x1d7):_0x1e2628=[0x5,0x4,0x3,0x2,0x1],_0x4ecd26=['F','B','S'],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x262),_0x2fcf7a(0x28c)],_0x4809a0=['C'],_0x5c5acc=['B'];break;case _0x2fcf7a(0x2a4):_0x1e2628=[0x1,0x2,0x3,0x4,0x5],_0x4ecd26=['B','F','S'],_0x2f1b1a=[0x5,0x4,0x3,0x2,0x1],_0x4d7371=[_0x2fcf7a(0x262),_0x2fcf7a(0x28c)],_0x4809a0=['C'],_0x5c5acc=['C'];break;case _0x2fcf7a(0x26c):_0x1e2628=[0x5,0x4,0x3,0x2,0x1],_0x4ecd26=['F','B','S'],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=['Level','Floor'],_0x4809a0=['C'],_0x5c5acc=['D'];break;case _0x2fcf7a(0x1e7):_0x1e2628=[0x4,0x3,0x2,0x1],_0x4ecd26=[0x1,0x2],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x262),'Floor'],_0x4809a0=['C'],_0x5c5acc=['E'];break;case _0x2fcf7a(0x226):_0x1e2628=[0x1,0x2,0x3],_0x4ecd26=[0x1,0x2],_0x2f1b1a=[0x1,0x2,0x3,0x4,0x5],_0x4d7371=[_0x2fcf7a(0x262)],_0x4809a0=['C'],_0x5c5acc=['F'];break;}}return{'levels':_0x1e2628,'Isle':_0x4ecd26,'rack':_0x2f1b1a,'type':_0x4d7371,'storage':_0x4809a0,'rak':_0x5c5acc};}router[a0_0x535fc7(0x1e8)](a0_0x535fc7(0x1eb),auth,async(_0x4857a0,_0x471139)=>{var _0x27dd4f=a0_0x535fc7;try{const {username:_0x2fe430,email:_0x4908fb,role:_0x4a0928}=_0x4857a0[_0x27dd4f(0x228)],_0x77f4fb=_0x4857a0[_0x27dd4f(0x228)],_0x23f979=await profile[_0x27dd4f(0x22a)]({'email':_0x77f4fb['email']}),_0x5a8f61=await master_shop[_0x27dd4f(0x253)](),_0x38d0e5=await transfers[_0x27dd4f(0x294)](_0x4857a0[_0x27dd4f(0x2a6)]['id']);let _0x4421b8;if(_0x77f4fb[_0x27dd4f(0x29f)]==_0x27dd4f(0x1b8)){const _0x26648a=await staff[_0x27dd4f(0x22a)]({'email':_0x77f4fb[_0x27dd4f(0x1fd)]});_0x4421b8=await warehouse[_0x27dd4f(0x1bf)]([{'$match':{'status':'Enabled','name':_0x26648a['warehouse'],'warehouse_category':_0x27dd4f(0x206)}},{'$group':{'_id':_0x27dd4f(0x1c5),'name':{'$first':_0x27dd4f(0x1c5)}}}]);}else _0x4421b8=await warehouse[_0x27dd4f(0x1bf)]([{'$match':{'status':_0x27dd4f(0x276),'warehouse_category':_0x27dd4f(0x206)}},{'$group':{'_id':'$name','name':{'$first':_0x27dd4f(0x1c5)}}}]);const _0x42dae0=await warehouse[_0x27dd4f(0x1bf)]([{'$match':{'name':_0x38d0e5[_0x27dd4f(0x282)],'warehouse_category':_0x27dd4f(0x206)}},{'$unwind':_0x27dd4f(0x266)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x27dd4f(0x1da)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x27dd4f(0x243)},'bin':{'$first':_0x27dd4f(0x246)},'type':{'$first':_0x27dd4f(0x20f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x27dd4f(0x1de)},'secondary_code':{'$first':_0x27dd4f(0x273)},'product_code':{'$first':_0x27dd4f(0x261)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x27dd4f(0x278)},'expiry_date':{'$first':_0x27dd4f(0x265)},'production_date':{'$first':_0x27dd4f(0x1ec)},'room':{'$first':_0x27dd4f(0x2a2)}}}]),_0x23976f=await product[_0x27dd4f(0x253)]({}),_0x38ae4e=BayBinSelected(_0x38d0e5[_0x27dd4f(0x1dd)],_0x38d0e5[_0x27dd4f(0x2a8)]);if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]=='English\x20(US)'){var _0x23aa88=users[_0x27dd4f(0x202)];console[_0x27dd4f(0x270)](_0x23aa88);}else{if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]==_0x27dd4f(0x21b))var _0x23aa88=users['Hindi'];else{if(_0x5a8f61[0x0]['language']=='German')var _0x23aa88=users[_0x27dd4f(0x279)];else{if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]==_0x27dd4f(0x25b))var _0x23aa88=users['Spanish'];else{if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]=='French')var _0x23aa88=users[_0x27dd4f(0x1e2)];else{if(_0x5a8f61[0x0]['language']==_0x27dd4f(0x22e))var _0x23aa88=users[_0x27dd4f(0x1c0)];else{if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]=='Chinese')var _0x23aa88=users['Chinese'];else{if(_0x5a8f61[0x0][_0x27dd4f(0x1c3)]==_0x27dd4f(0x24b))var _0x23aa88=users[_0x27dd4f(0x1ff)];}}}}}}}_0x471139[_0x27dd4f(0x1f4)](_0x27dd4f(0x27d),{'success':_0x4857a0[_0x27dd4f(0x237)](_0x27dd4f(0x288)),'errors':_0x4857a0[_0x27dd4f(0x237)]('errors'),'role':_0x77f4fb,'profile':_0x23f979,'master_shop':_0x5a8f61,'warehouse':_0x4421b8,'transfer':_0x38d0e5,'stock':_0x42dae0,'unit':_0x23976f,'language':_0x23aa88});}catch(_0x54280f){console[_0x27dd4f(0x270)](_0x54280f);}}),router['post'](a0_0x535fc7(0x1eb),auth,async(_0x4957a4,_0x279c15)=>{var _0xdee431=a0_0x535fc7;try{const _0x291ed6=_0x4957a4[_0xdee431(0x2a6)]['id'],_0x49d0dd=await transfers['findById'](_0x291ed6);_0x279c15['json'](_0x4957a4[_0xdee431(0x217)]);return;const {date:_0xcec650,from_warehouse:_0x5bd9cd,FromRoom_name:_0x1711dd,to_warehouse:_0x41eaf2,ToRoom_name:_0x2e9cfd,prod_name:_0x17124e,from_prod_qty:_0x45ec23,from_prod_level:_0x216a00,from_prod_isle:_0x142c59,from_prod_pallet:_0x58c417,to_prod_qty:_0x362d88,to_prod_level:_0x744c83,to_prod_isle:_0x1eff07,to_prod_pallet:_0x19f6ef,primary_code:_0x98405d,secondary_code:_0x52fd86,product_code3:_0x303805,note:_0x7c6617,invoice:_0xa3e2d5,expiry_date:_0x2834ae}=_0x4957a4['body'];if(typeof _0x17124e==_0xdee431(0x292))var _0x397511=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x1f8)]],_0x3d345b=[_0x4957a4['body'][_0xdee431(0x1fa)]],_0x521005=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x25f)]],_0xf4c61b=[_0x4957a4[_0xdee431(0x217)]['from_prod_isle']],_0x308ec0=[_0x4957a4['body'][_0xdee431(0x1fb)]],_0x257761=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x1e5)]],_0x2ccbba=[_0x4957a4['body']['to_prod_qty']],_0x4794e2=[_0x4957a4[_0xdee431(0x217)]['to_prod_level']],_0x3918a9=[_0x4957a4[_0xdee431(0x217)]['to_prod_isle']],_0x38fd56=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x26f)]],_0x17dae5=[_0x4957a4[_0xdee431(0x217)]['to_types']],_0x41ca69=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x208)]],_0x3ad7d3=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x29c)]],_0x342905=[_0x4957a4[_0xdee431(0x217)]['primary_code']],_0x4d4e47=[_0x4957a4['body'][_0xdee431(0x21e)]],_0xd0c7ea=[_0x4957a4[_0xdee431(0x217)]['product_code3']],_0x445106=[_0x4957a4[_0xdee431(0x217)]['MaxStocks_data2']],_0x337c4a=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x218)]],_0x4b873a=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x1b9)]],_0x24347f=[_0x4957a4[_0xdee431(0x217)]['batch_code']],_0x1a859d=[_0x4957a4['body'][_0xdee431(0x26a)]],_0x50c412=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x28f)]],_0x5600b4=[_0x4957a4[_0xdee431(0x217)][_0xdee431(0x22d)]];else var _0x397511=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x1f8)]],_0x41ca69=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x208)]],_0x3ad7d3=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x29c)]],_0x257761=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x1e5)]],_0x17dae5=[..._0x4957a4[_0xdee431(0x217)]['to_types']],_0x3d345b=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x1fa)]],_0x521005=[..._0x4957a4['body']['from_prod_level']],_0xf4c61b=[..._0x4957a4['body']['from_prod_isle']],_0x308ec0=[..._0x4957a4['body'][_0xdee431(0x1fb)]],_0x2ccbba=[..._0x4957a4[_0xdee431(0x217)]['to_prod_qty']],_0x4794e2=[..._0x4957a4['body'][_0xdee431(0x1cf)]],_0x3918a9=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x1c7)]],_0x38fd56=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x26f)]],_0x342905=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x26d)]],_0x4d4e47=[..._0x4957a4[_0xdee431(0x217)]['secondary_code']],_0xd0c7ea=[..._0x4957a4[_0xdee431(0x217)]['product_code3']],_0x445106=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x25a)]],_0x337c4a=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x218)]],_0x4b873a=[..._0x4957a4[_0xdee431(0x217)]['secondary_unit']],_0x24347f=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x263)]],_0x1a859d=[..._0x4957a4[_0xdee431(0x217)][_0xdee431(0x26a)]],_0x50c412=[..._0x4957a4[_0xdee431(0x217)]['from_storage']],_0x5600b4=[..._0x4957a4[_0xdee431(0x217)]['from_rak']];const _0x52b0bf=_0x397511[_0xdee431(0x25c)](_0x19ff4e=>{return _0x19ff4e={'product_name':_0x19ff4e};});_0x3d345b[_0xdee431(0x291)]((_0x5e19dd,_0x22b372)=>{var _0x258056=_0xdee431;_0x52b0bf[_0x22b372][_0x258056(0x23b)]=_0x5e19dd;}),_0x521005[_0xdee431(0x291)]((_0x1c1d4e,_0x1ff53e)=>{_0x52b0bf[_0x1ff53e]['from_bay']=_0x1c1d4e;}),_0xf4c61b['forEach']((_0x558de4,_0x4d1108)=>{var _0x46dba7=_0xdee431;_0x52b0bf[_0x4d1108][_0x46dba7(0x232)]=_0x558de4;}),_0x308ec0[_0xdee431(0x291)]((_0x153708,_0x29e3aa)=>{_0x52b0bf[_0x29e3aa]['from_floorlevel']=_0x153708;}),_0x2ccbba[_0xdee431(0x291)]((_0x127232,_0x1f5cf7)=>{var _0x50fc69=_0xdee431;_0x52b0bf[_0x1f5cf7][_0x50fc69(0x207)]=_0x127232;}),_0x4794e2['forEach']((_0x465860,_0x4d1725)=>{var _0x3a1db9=_0xdee431;_0x52b0bf[_0x4d1725][_0x3a1db9(0x203)]=_0x465860;}),_0x3918a9[_0xdee431(0x291)]((_0x53761e,_0x1ecfbf)=>{_0x52b0bf[_0x1ecfbf]['to_bin']=_0x53761e;}),_0x38fd56[_0xdee431(0x291)]((_0x3e87a6,_0x194ccb)=>{var _0x21ae4a=_0xdee431;_0x52b0bf[_0x194ccb][_0x21ae4a(0x1ed)]=_0x3e87a6;}),_0x342905[_0xdee431(0x291)]((_0x5bedd6,_0x110852)=>{_0x52b0bf[_0x110852]['primary_code']=_0x5bedd6;}),_0x4d4e47[_0xdee431(0x291)]((_0x24421c,_0x38d5de)=>{var _0x2f31b8=_0xdee431;_0x52b0bf[_0x38d5de][_0x2f31b8(0x21e)]=_0x24421c;}),_0xd0c7ea['forEach']((_0x57fa4c,_0x51f854)=>{var _0x385282=_0xdee431;_0x52b0bf[_0x51f854][_0x385282(0x1cd)]=_0x57fa4c;}),_0x445106[_0xdee431(0x291)]((_0x51970f,_0x1f76ef)=>{_0x52b0bf[_0x1f76ef]['maxProducts']=_0x51970f;}),_0x337c4a[_0xdee431(0x291)]((_0x5e8f79,_0x5171c2)=>{var _0x4328c6=_0xdee431;_0x52b0bf[_0x5171c2][_0x4328c6(0x218)]=_0x5e8f79;}),_0x4b873a[_0xdee431(0x291)]((_0x5b2f5d,_0x7694d5)=>{var _0x2f784e=_0xdee431;_0x52b0bf[_0x7694d5][_0x2f784e(0x1b9)]=_0x5b2f5d;}),_0x24347f[_0xdee431(0x291)]((_0xeb24a2,_0x2d0d8d)=>{var _0x17a5b3=_0xdee431;_0x52b0bf[_0x2d0d8d][_0x17a5b3(0x263)]=_0xeb24a2;}),_0x1a859d[_0xdee431(0x291)]((_0x542171,_0x49234d)=>{var _0x99ab=_0xdee431;_0x52b0bf[_0x49234d][_0x99ab(0x26a)]=_0x542171;}),_0x41ca69['forEach']((_0x4454ac,_0x104381)=>{var _0x223198=_0xdee431;_0x52b0bf[_0x104381][_0x223198(0x208)]=_0x4454ac;}),_0x3ad7d3[_0xdee431(0x291)]((_0x4540d5,_0x20108c)=>{var _0x144e39=_0xdee431;_0x52b0bf[_0x20108c][_0x144e39(0x223)]=_0x4540d5;}),_0x257761[_0xdee431(0x291)]((_0x360d5f,_0x45fa21)=>{var _0x514b51=_0xdee431;_0x52b0bf[_0x45fa21][_0x514b51(0x1e5)]=_0x360d5f;}),_0x17dae5[_0xdee431(0x291)]((_0xb40447,_0x594abc)=>{var _0x2592f7=_0xdee431;_0x52b0bf[_0x594abc][_0x2592f7(0x22c)]=_0xb40447;}),_0x50c412[_0xdee431(0x291)]((_0x141787,_0x542395)=>{_0x52b0bf[_0x542395]['from_storage']=_0x141787;}),_0x5600b4[_0xdee431(0x291)]((_0x477f53,_0x1683fa)=>{var _0x10e09a=_0xdee431;_0x52b0bf[_0x1683fa][_0x10e09a(0x28e)]=_0x477f53;});const _0x5246cc=_0x52b0bf[_0xdee431(0x26b)](_0x2be70a=>_0x2be70a['to_quantity']!=='0'&&_0x2be70a[_0xdee431(0x207)]!==''||_0x2be70a[_0xdee431(0x1ed)]!=='0'&&_0x2be70a[_0xdee431(0x1ed)]!=='');var _0x41c729=0x0;_0x5246cc['forEach'](_0x289637=>{var _0x3c6d76=_0xdee431;parseInt(_0x289637[_0x3c6d76(0x23b)])<parseInt(_0x289637[_0x3c6d76(0x207)])&&_0x41c729++;});if(_0x41c729!=0x0)return _0x4957a4[_0xdee431(0x237)](_0xdee431(0x1f2),_0xdee431(0x1d3)),_0x279c15['redirect'](_0xdee431(0x1bc));const _0x541b7c=await warehouse[_0xdee431(0x22a)]({'name':_0x49d0dd[_0xdee431(0x282)],'room':_0x49d0dd['from_room']});_0x49d0dd[_0xdee431(0x20c)][_0xdee431(0x291)](_0x19b5ce=>{var _0xcd8a01=_0xdee431;if(_0x19b5ce['to_quantity']>0x0){const _0x515e4c=_0x541b7c[_0xcd8a01(0x271)][_0xcd8a01(0x25c)](_0x1cd3f1=>{var _0x33528c=_0xcd8a01;_0x1cd3f1[_0x33528c(0x244)]==_0x19b5ce[_0x33528c(0x244)]&&_0x1cd3f1[_0x33528c(0x225)]==_0x19b5ce[_0x33528c(0x24c)]&&_0x1cd3f1[_0x33528c(0x212)]==_0x19b5ce[_0x33528c(0x1e5)]&&_0x1cd3f1[_0x33528c(0x272)]==_0x19b5ce['from_bin']&&_0x1cd3f1[_0x33528c(0x238)]==_0x19b5ce['from_bay']&&_0x1cd3f1[_0x33528c(0x223)]==_0x19b5ce[_0x33528c(0x28e)]&&_0x1cd3f1[_0x33528c(0x208)]==_0x19b5ce[_0x33528c(0x28f)]&&(_0x1cd3f1['product_stock']=parseInt(_0x1cd3f1[_0x33528c(0x267)])+parseInt(_0x19b5ce['to_quantity']));});}}),await _0x541b7c[_0xdee431(0x22f)]();const _0x5ec8db=await warehouse[_0xdee431(0x22a)]({'name':_0x49d0dd[_0xdee431(0x1dd)],'room':_0x49d0dd[_0xdee431(0x2a8)]});_0x49d0dd[_0xdee431(0x20c)][_0xdee431(0x291)](_0x5277d5=>{var _0x398da7=_0xdee431;if(_0x5277d5[_0x398da7(0x207)]>0x0){const _0x1ff2f9=_0x5ec8db[_0x398da7(0x271)][_0x398da7(0x25c)](_0x4c862f=>{var _0x52cf71=_0x398da7;_0x4c862f['product_name']==_0x5277d5['product_name']&&_0x4c862f['floorlevel']==_0x5277d5[_0x52cf71(0x1ed)]&&_0x4c862f[_0x52cf71(0x212)]==_0x5277d5[_0x52cf71(0x22c)]&&_0x4c862f[_0x52cf71(0x272)]==_0x5277d5[_0x52cf71(0x1f3)]&&_0x4c862f[_0x52cf71(0x238)]==_0x5277d5[_0x52cf71(0x203)]&&_0x4c862f[_0x52cf71(0x223)]==_0x5277d5[_0x52cf71(0x223)]&&_0x4c862f['storage']==_0x5277d5[_0x52cf71(0x208)]&&(_0x4c862f[_0x52cf71(0x267)]=parseInt(_0x4c862f['product_stock'])-parseInt(_0x5277d5['to_quantity']));});}}),await _0x5ec8db[_0xdee431(0x22f)](),_0x49d0dd[_0xdee431(0x252)]=_0xcec650,_0x49d0dd[_0xdee431(0x282)]=_0x5bd9cd,_0x49d0dd['to_warehouse']=_0x41eaf2,_0x49d0dd[_0xdee431(0x20c)]=_0x5246cc,_0x49d0dd[_0xdee431(0x1c6)]=_0x7c6617,_0x49d0dd[_0xdee431(0x24d)]=_0xa3e2d5;const _0xbb4fe1=await _0x49d0dd[_0xdee431(0x22f)]();console[_0xdee431(0x270)](_0xbb4fe1);const _0xfcd63d=await warehouse[_0xdee431(0x22a)]({'name':_0x5bd9cd,'room':_0x1711dd});_0xbb4fe1[_0xdee431(0x20c)][_0xdee431(0x291)](_0x1b83f7=>{var _0x49091e=_0xdee431;if(_0x1b83f7[_0x49091e(0x207)]>0x0){const _0x42747f=_0xfcd63d['product_details'][_0x49091e(0x25c)](_0x13fbae=>{var _0x29d695=_0x49091e;_0x13fbae[_0x29d695(0x244)]==_0x1b83f7[_0x29d695(0x244)]&&_0x13fbae[_0x29d695(0x225)]==_0x1b83f7[_0x29d695(0x24c)]&&_0x13fbae[_0x29d695(0x212)]==_0x1b83f7[_0x29d695(0x1e5)]&&_0x13fbae[_0x29d695(0x272)]==_0x1b83f7[_0x29d695(0x232)]&&_0x13fbae[_0x29d695(0x238)]==_0x1b83f7['from_bay']&&_0x13fbae[_0x29d695(0x223)]==_0x1b83f7[_0x29d695(0x28e)]&&_0x13fbae[_0x29d695(0x208)]==_0x1b83f7['from_storage']&&(_0x13fbae['product_stock']=parseInt(_0x13fbae[_0x29d695(0x267)])-parseInt(_0x1b83f7[_0x29d695(0x207)]));});}}),await _0xfcd63d[_0xdee431(0x22f)]();const _0x53c196=await warehouse[_0xdee431(0x22a)]({'name':_0x41eaf2,'room':_0x2e9cfd});_0xbb4fe1[_0xdee431(0x20c)][_0xdee431(0x291)](_0x375ee3=>{var _0x5f086c=_0xdee431;if(_0x375ee3['to_quantity']>0x0){var _0x36ef74=0x0;const _0x27184c=_0x53c196[_0x5f086c(0x271)]['map'](_0x5a0c0e=>{var _0x238131=_0x5f086c;_0x5a0c0e['product_name']==_0x375ee3[_0x238131(0x244)]&&_0x5a0c0e[_0x238131(0x225)]==_0x375ee3['to_floorlevel']&&_0x5a0c0e['type']==_0x375ee3[_0x238131(0x22c)]&&_0x5a0c0e['bin']==_0x375ee3[_0x238131(0x1f3)]&&_0x5a0c0e[_0x238131(0x238)]==_0x375ee3[_0x238131(0x203)]&&_0x5a0c0e[_0x238131(0x223)]==_0x375ee3[_0x238131(0x223)]&&_0x5a0c0e[_0x238131(0x208)]==_0x375ee3[_0x238131(0x208)]&&(_0x5a0c0e['product_stock']=parseInt(_0x5a0c0e['product_stock'])+parseInt(_0x375ee3[_0x238131(0x207)]),_0x36ef74++);});_0x36ef74=='0'&&(_0x53c196['product_details']=_0x53c196['product_details'][_0x5f086c(0x200)]({'product_name':_0x375ee3[_0x5f086c(0x244)],'product_stock':_0x375ee3[_0x5f086c(0x207)],'bay':_0x375ee3[_0x5f086c(0x203)],'bin':_0x375ee3[_0x5f086c(0x1f3)],'type':_0x375ee3['to_types'],'floorlevel':_0x375ee3[_0x5f086c(0x1ed)],'storage':_0x375ee3[_0x5f086c(0x208)],'rack':_0x375ee3['rack'],'product_code':_0x375ee3[_0x5f086c(0x1cd)],'primary_code':_0x375ee3[_0x5f086c(0x26d)],'secondary_code':_0x375ee3['secondary_code'],'maxProducts':_0x375ee3['maxProducts'],'storage':_0x375ee3[_0x5f086c(0x208)],'rack':_0x375ee3[_0x5f086c(0x223)]}));}}),await _0x53c196[_0xdee431(0x22f)](),_0x4957a4[_0xdee431(0x237)](_0xdee431(0x288),_0xdee431(0x284)),_0x279c15['redirect'](_0xdee431(0x1f1));}catch(_0x3f1979){console[_0xdee431(0x270)](_0x3f1979);}}),router[a0_0x535fc7(0x298)]('/barcode_scanner',async(_0x56aa00,_0x407130)=>{var _0x4a491c=a0_0x535fc7;const {FromWareHouse:_0x257426,FromRoom:_0x16cd00,ToWarehouse:_0x36da9b,ToRoom:_0x49f9e8,primary_code:_0x203168,Roomslist:_0x1b4fd0}=_0x56aa00[_0x4a491c(0x217)],_0x5406f3=_0x1b4fd0[_0x4a491c(0x23e)](','),_0x23d9f2=[];async function _0x458b52(_0x5c7d39){var _0x554df5=_0x4a491c;const _0x1e9889=await warehouse['aggregate']([{'$match':{'name':_0x257426,'room':_0x5c7d39}},{'$unwind':_0x554df5(0x266)},{'$match':{'product_details.primary_code':_0x203168}},{'$group':{'_id':_0x554df5(0x1d5),'name':{'$first':_0x554df5(0x1da)},'instock':{'$first':_0x554df5(0x1fc)},'primary_code':{'$first':_0x554df5(0x1de)},'secondary_code':{'$first':_0x554df5(0x273)},'product_code':{'$first':_0x554df5(0x261)},'level':{'$first':_0x554df5(0x243)},'isle':{'$first':_0x554df5(0x246)},'type':{'$first':_0x554df5(0x20f)},'pallet':{'$first':_0x554df5(0x249)},'unit':{'$first':_0x554df5(0x1f5)},'secondary_unit':{'$first':_0x554df5(0x274)},'storage':{'$first':_0x554df5(0x241)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x554df5(0x265)},'production_date':{'$first':_0x554df5(0x1ec)},'batch_code':{'$first':_0x554df5(0x210)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x554df5(0x2a2)},'maxProducts':{'$first':_0x554df5(0x280)}}}]),_0x1d2597=await warehouse[_0x554df5(0x1bf)]([{'$match':{'name':_0x257426,'room':_0x5c7d39}},{'$unwind':_0x554df5(0x266)},{'$match':{'product_details.secondary_code':_0x203168}},{'$group':{'_id':_0x554df5(0x1d5),'name':{'$first':_0x554df5(0x1da)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x554df5(0x273)},'product_code':{'$first':_0x554df5(0x261)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x554df5(0x246)},'type':{'$first':_0x554df5(0x20f)},'pallet':{'$first':_0x554df5(0x249)},'unit':{'$first':_0x554df5(0x1f5)},'secondary_unit':{'$first':_0x554df5(0x274)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x554df5(0x278)},'expiry_date':{'$first':_0x554df5(0x265)},'production_date':{'$first':_0x554df5(0x1ec)},'batch_code':{'$first':_0x554df5(0x210)},'maxPerUnit':{'$first':_0x554df5(0x25e)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x554df5(0x2a2)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);if(_0x1e9889[_0x554df5(0x1db)]>0x0)_0x23d9f2['push'](_0x1e9889);else _0x1d2597[_0x554df5(0x1db)]>0x0&&_0x23d9f2[_0x554df5(0x277)](_0x1d2597);}const _0x468fc4=_0x5406f3[_0x4a491c(0x25c)](_0x4a90a4=>_0x458b52(_0x4a90a4));await Promise[_0x4a491c(0x231)](_0x468fc4),_0x407130['json'](_0x23d9f2);}),router[a0_0x535fc7(0x298)](a0_0x535fc7(0x1c2),async(_0x28cfc2,_0x2cfb7f)=>{var _0x593d8e=a0_0x535fc7;try{const {FromWareHouse:_0x5b1e0d,FromRoom:_0x3533d4,ToWarehouse:_0x6aa6ec,ToRoom:_0x2e9798,secondary_code:_0x5a9db0}=_0x28cfc2[_0x593d8e(0x217)],_0x3065c8=await warehouse['aggregate']([{'$match':{'name':_0x5b1e0d}},{'$unwind':_0x593d8e(0x266)},{'$match':{'product_details.secondary_code':_0x5a9db0}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x593d8e(0x1da)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x593d8e(0x273)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x593d8e(0x1c5)},'level':{'$first':_0x593d8e(0x289)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x593d8e(0x21f)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x593d8e(0x1f5)}}}]);_0x2cfb7f[_0x593d8e(0x21c)](0xc8)[_0x593d8e(0x235)](_0x3065c8);}catch(_0x9e2aa){_0x2cfb7f['status'](0x194)[_0x593d8e(0x235)]({'message':_0x9e2aa[_0x593d8e(0x275)]});}}),router[a0_0x535fc7(0x298)](a0_0x535fc7(0x28a),async(_0x4343fa,_0x49b54b)=>{var _0x5cd5b6=a0_0x535fc7;try{const {FromWareHouse:_0x134caa,FromRoom:_0x36d8c5,ToWarehouse:_0x4b13a9,ToRoom:_0x14ba54,product_code:_0x44d9e4}=_0x4343fa[_0x5cd5b6(0x217)],_0xddd2c5=await warehouse['aggregate']([{'$match':{'name':_0x134caa}},{'$unwind':_0x5cd5b6(0x266)},{'$match':{'product_details.product_code':_0x44d9e4}},{'$group':{'_id':_0x5cd5b6(0x1d5),'name':{'$first':_0x5cd5b6(0x1da)},'primary_code':{'$first':_0x5cd5b6(0x1de)},'secondary_code':{'$first':_0x5cd5b6(0x273)},'product_code':{'$first':_0x5cd5b6(0x261)},'instock':{'$first':_0x5cd5b6(0x1fc)},'warehouse':{'$first':_0x5cd5b6(0x1c5)},'level':{'$first':_0x5cd5b6(0x289)},'isle':{'$first':_0x5cd5b6(0x28b)},'pallet':{'$first':_0x5cd5b6(0x21f)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x5cd5b6(0x1f5)}}}]);_0x49b54b[_0x5cd5b6(0x21c)](0xc8)[_0x5cd5b6(0x235)](_0xddd2c5);}catch(_0x3aace4){_0x49b54b[_0x5cd5b6(0x21c)](0x194)['json']({'message':_0x3aace4['message']});}}),router[a0_0x535fc7(0x298)](a0_0x535fc7(0x290),async(_0x518727,_0x1af130)=>{var _0x56f2cf=a0_0x535fc7;const {level:_0x44c981,isle:_0x51e0b3,pallet:_0x4c9508,warehouses:_0x19efd9,room:_0x11a40d}=_0x518727[_0x56f2cf(0x217)];try{const _0x1cb083=await warehouse[_0x56f2cf(0x1bf)]([{'$match':{'name':_0x19efd9,'room':_0x11a40d}},{'$unwind':_0x56f2cf(0x266)},{'$match':{'product_details.level':parseInt(_0x44c981),'product_details.isle':_0x51e0b3,'product_details.pallet':parseInt(_0x4c9508)}},{'$group':{'_id':_0x56f2cf(0x1d5),'name':{'$first':_0x56f2cf(0x1da)},'product_stock':{'$first':_0x56f2cf(0x1fc)},'level':{'$first':_0x56f2cf(0x289)},'isle':{'$first':_0x56f2cf(0x28b)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x1af130[_0x56f2cf(0x21c)](0xc8)[_0x56f2cf(0x235)](_0x1cb083);}catch(_0x54075e){_0x1af130[_0x56f2cf(0x21c)](0x194)[_0x56f2cf(0x235)]({'message':_0x54075e[_0x56f2cf(0x275)]});}}),module[a0_0x535fc7(0x1c1)]=router;