var a0_0x2ce349=a0_0x37a9;(function(_0x8c64a8,_0x4f9aff){var _0x31aada=a0_0x37a9,_0x4bf7b9=_0x8c64a8();while(!![]){try{var _0x29c260=-parseInt(_0x31aada(0x1af))/0x1+-parseInt(_0x31aada(0x1dd))/0x2*(-parseInt(_0x31aada(0x100))/0x3)+-parseInt(_0x31aada(0x16a))/0x4+-parseInt(_0x31aada(0x172))/0x5+-parseInt(_0x31aada(0x1e0))/0x6*(parseInt(_0x31aada(0xfe))/0x7)+-parseInt(_0x31aada(0x110))/0x8+parseInt(_0x31aada(0x17d))/0x9;if(_0x29c260===_0x4f9aff)break;else _0x4bf7b9['push'](_0x4bf7b9['shift']());}catch(_0x3e6b69){_0x4bf7b9['push'](_0x4bf7b9['shift']());}}}(a0_0x2d3a,0xe9204));const express=require(a0_0x2ce349(0x148)),app=express(),router=express[a0_0x2ce349(0x128)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x2ce349(0x13e)),users=require(a0_0x2ce349(0x19d)),nodemailer=require(a0_0x2ce349(0x183));router[a0_0x2ce349(0x1a8)](a0_0x2ce349(0x146),auth,async(_0x13c8c8,_0x524b09)=>{var _0x531947=a0_0x2ce349;try{const {username:_0x2c3a19,email:_0x1de938,role:_0x2f9698}=_0x13c8c8['user'],_0x198b3b=_0x13c8c8[_0x531947(0x11c)],_0x213ed1=await profile[_0x531947(0x152)]({'email':_0x198b3b[_0x531947(0x182)]}),_0x4df517=await master_shop[_0x531947(0xfb)]();console['log'](_0x531947(0x15f),_0x4df517);let _0x2914f7;if(_0x198b3b['role']=='staff'){const _0x510377=await staff[_0x531947(0x152)]({'email':_0x198b3b[_0x531947(0x182)]});_0x2914f7=await transfers['find']({'from_warehouse':_0x510377[_0x531947(0x18b)]});}else _0x2914f7=await transfers[_0x531947(0x13f)]([{'$unwind':_0x531947(0xf8)},{'$group':{'_id':_0x531947(0x15b),'invoice':{'$first':_0x531947(0x178)},'date':{'$first':'$date'},'from_warehouse':{'$first':_0x531947(0x1ca)},'to_warehouse':{'$first':_0x531947(0x114)},'from_room_name':{'$addToSet':_0x531947(0x12a)},'to_room_name':{'$addToSet':_0x531947(0x13d)},'finalize':{'$first':_0x531947(0x102)},'isAllowEdit':{'$first':_0x531947(0x18e)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x4df517[0x0]['language']==_0x531947(0x1a7)){var _0xa96446=users[_0x531947(0x1dc)];console['log'](_0xa96446);}else{if(_0x4df517[0x0][_0x531947(0x169)]==_0x531947(0x12b))var _0xa96446=users['Hindi'];else{if(_0x4df517[0x0][_0x531947(0x169)]==_0x531947(0x1ce))var _0xa96446=users[_0x531947(0x1ce)];else{if(_0x4df517[0x0][_0x531947(0x169)]==_0x531947(0x1d8))var _0xa96446=users[_0x531947(0x1d8)];else{if(_0x4df517[0x0]['language']==_0x531947(0x1cd))var _0xa96446=users[_0x531947(0x1cd)];else{if(_0x4df517[0x0]['language']=='Portuguese\x20(BR)')var _0xa96446=users['Portuguese'];else{if(_0x4df517[0x0][_0x531947(0x169)]=='Chinese')var _0xa96446=users[_0x531947(0x16f)];else{if(_0x4df517[0x0][_0x531947(0x169)]==_0x531947(0x189))var _0xa96446=users[_0x531947(0x159)];}}}}}}}_0x524b09['render'](_0x531947(0x1e2),{'success':_0x13c8c8['flash'](_0x531947(0x1d2)),'errors':_0x13c8c8[_0x531947(0x1b6)](_0x531947(0x156)),'role':_0x198b3b,'profile':_0x213ed1,'master_shop':_0x4df517,'transfer':_0x2914f7,'language':_0xa96446});}catch(_0xce4729){console[_0x531947(0x1ab)](_0xce4729);}});async function getRandom8DigitNumber(){var _0x21ebbb=a0_0x2ce349;const _0x2be59d=0x989680,_0x30f1bd=0x5f5e0ff,_0x1b9af1=Math[_0x21ebbb(0x163)](Math[_0x21ebbb(0x1d0)]()*(_0x30f1bd-_0x2be59d+0x1))+_0x2be59d;var _0x5e7d69;const _0x5f3761=await transfers[_0x21ebbb(0x152)]({'invoice':_0x21ebbb(0x1eb)+_0x1b9af1});return _0x5f3761&&_0x5f3761[_0x21ebbb(0x105)]>0x0?_0x5e7d69=_0x21ebbb(0x1eb)+_0x1b9af1:_0x5e7d69=_0x21ebbb(0x1eb)+_0x1b9af1,_0x5e7d69;}router[a0_0x2ce349(0x1a8)](a0_0x2ce349(0x145),auth,async(_0x5be1c2,_0x176c8d)=>{var _0x44e5b7=a0_0x2ce349;try{const {username:_0x37857c,email:_0x131baa,role:_0x5af549}=_0x5be1c2['user'],_0x14cec7=_0x5be1c2[_0x44e5b7(0x11c)],_0x570c5e=await profile['findOne']({'email':_0x14cec7[_0x44e5b7(0x182)]}),_0x59c447=await master_shop[_0x44e5b7(0xfb)]();console['log'](_0x44e5b7(0x15f),_0x59c447);let _0x1ec266;if(_0x14cec7['role']=='staff'){const _0x53d316=await staff[_0x44e5b7(0x152)]({'email':_0x14cec7[_0x44e5b7(0x182)]});_0x1ec266=await warehouse[_0x44e5b7(0x13f)]([{'$match':{'status':_0x44e5b7(0x124),'name':_0x53d316[_0x44e5b7(0x18b)],'warehouse_category':_0x44e5b7(0x1e6)}},{'$group':{'_id':_0x44e5b7(0x1ad),'name':{'$first':'$name'}}}]);}else _0x1ec266=await warehouse['aggregate']([{'$match':{'status':_0x44e5b7(0x124),'warehouse_category':_0x44e5b7(0x1e6)}},{'$group':{'_id':_0x44e5b7(0x1ad),'name':{'$first':_0x44e5b7(0x1ad)}}}]);var _0x178b4f=[_0x44e5b7(0x127),_0x44e5b7(0x18f),'Return\x20Rooms'];const _0x3c38b3=await transfers[_0x44e5b7(0xfb)]({}),_0x406631=_0x3c38b3['length']+0x1,_0x3da0cf=_0x44e5b7(0x1eb)+_0x406631['toString']()[_0x44e5b7(0x1b7)](0x5,'0');if(_0x59c447[0x0]['language']==_0x44e5b7(0x1a7)){var _0x1f8ba6=users[_0x44e5b7(0x1dc)];console['log'](_0x1f8ba6);}else{if(_0x59c447[0x0][_0x44e5b7(0x169)]==_0x44e5b7(0x12b))var _0x1f8ba6=users[_0x44e5b7(0x12b)];else{if(_0x59c447[0x0][_0x44e5b7(0x169)]=='German')var _0x1f8ba6=users[_0x44e5b7(0x1ce)];else{if(_0x59c447[0x0][_0x44e5b7(0x169)]==_0x44e5b7(0x1d8))var _0x1f8ba6=users[_0x44e5b7(0x1d8)];else{if(_0x59c447[0x0]['language']==_0x44e5b7(0x1cd))var _0x1f8ba6=users['French'];else{if(_0x59c447[0x0]['language']==_0x44e5b7(0x11b))var _0x1f8ba6=users[_0x44e5b7(0x196)];else{if(_0x59c447[0x0][_0x44e5b7(0x169)]=='Chinese')var _0x1f8ba6=users[_0x44e5b7(0x16f)];else{if(_0x59c447[0x0][_0x44e5b7(0x169)]==_0x44e5b7(0x189))var _0x1f8ba6=users['Arabic'];}}}}}}}const _0xdff90b=getRandom8DigitNumber();_0xdff90b[_0x44e5b7(0x12d)](_0x252ce9=>{var _0x54e907=_0x44e5b7;_0x176c8d['render'](_0x54e907(0x132),{'success':_0x5be1c2['flash']('success'),'errors':_0x5be1c2[_0x54e907(0x1b6)](_0x54e907(0x156)),'role':_0x14cec7,'profile':_0x570c5e,'master_shop':_0x59c447,'warehouse':_0x1ec266,'language':_0x1f8ba6,'rooms_data':_0x178b4f,'invoice':_0x252ce9});})[_0x44e5b7(0x1b1)](_0x22ebce=>{var _0x45d692=_0x44e5b7;_0x5be1c2[_0x45d692(0x1b6)](_0x45d692(0x156),_0x45d692(0x158)),_0x176c8d['redirect'](_0x45d692(0x1c2));});}catch(_0x411916){console[_0x44e5b7(0x1ab)](_0x411916);}}),router[a0_0x2ce349(0x17b)](a0_0x2ce349(0x145),auth,async(_0x186e8f,_0x4381f0)=>{var _0x5833f0=a0_0x2ce349;try{console[_0x5833f0(0x1ab)](_0x186e8f[_0x5833f0(0x19e)]);const {date:_0x73f233,from_warehouse:_0x16dfb9,FromRoom_name:_0x9aae59,to_warehouse:_0x28a653,ToRoom_name:_0x9d1807,prod_name:_0x5cbae6,from_prod_qty:_0x11514a,from_prod_level:_0x25876b,from_prod_isle:_0x48ec9d,from_prod_pallet:_0x45f481,to_prod_qty:_0x2d2a48,to_prod_level:_0x2b741b,to_prod_isle:_0x48b4fa,to_prod_pallet:_0x263904,primary_code:_0x247d6a,secondary_code:_0xd1ea07,product_code3:_0x5c1fc9,note:_0x50606c,MaxStocks_data2:_0x5b6be8,invoice:_0x1f04b9,expiry_date:_0x52891e}=_0x186e8f[_0x5833f0(0x19e)];if(typeof _0x5cbae6==_0x5833f0(0x198))var _0x48051b=[_0x186e8f['body'][_0x5833f0(0x1a5)]],_0x23e359=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x15a)]],_0x2afe00=[_0x186e8f['body']['from_prod_level']],_0x4c383a=[_0x186e8f['body'][_0x5833f0(0x15d)]],_0x556914=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x117)]],_0x51e0eb=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1a0)]],_0x1cbafd=[_0x186e8f[_0x5833f0(0x19e)]['secondary_code']],_0xb2ab5e=[_0x186e8f[_0x5833f0(0x19e)]['product_code3']],_0x4ce64b=[_0x186e8f[_0x5833f0(0x19e)]['MaxStocks_data2']],_0x369354=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x16e)]],_0x266127=[_0x186e8f[_0x5833f0(0x19e)]['secondary_unit']],_0x77a295=[_0x186e8f[_0x5833f0(0x19e)]['batch_code']],_0x314920=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x16b)]],_0x37c219=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x136)]],_0x5ca103=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x150)]],_0x3647cd=[_0x186e8f[_0x5833f0(0x19e)]['prod_cat']],_0x89c236=[_0x186e8f['body'][_0x5833f0(0x1aa)]],_0x31d7d5=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1d6)]],_0x3da803=[_0x186e8f[_0x5833f0(0x19e)]['from_invoice']],_0x580b3d=[_0x186e8f[_0x5833f0(0x19e)]['to_invoice']],_0x25fe3f=[_0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x167)]];else var _0x48051b=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1a5)]],_0x23e359=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x15a)]],_0x2afe00=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1cb)]],_0x4c383a=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x15d)]],_0x556914=[..._0x186e8f['body'][_0x5833f0(0x117)]],_0x51e0eb=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1a0)]],_0x1cbafd=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x122)]],_0xb2ab5e=[..._0x186e8f[_0x5833f0(0x19e)]['product_code3']],_0x4ce64b=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0xf7)]],_0x369354=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x16e)]],_0x266127=[..._0x186e8f[_0x5833f0(0x19e)]['secondary_unit']],_0x77a295=[..._0x186e8f[_0x5833f0(0x19e)]['batch_code']],_0x314920=[..._0x186e8f['body'][_0x5833f0(0x16b)]],_0x37c219=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x136)]],_0x5ca103=[..._0x186e8f['body'][_0x5833f0(0x150)]],_0x3647cd=[..._0x186e8f['body'][_0x5833f0(0xfc)]],_0x89c236=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1aa)]],_0x31d7d5=[..._0x186e8f[_0x5833f0(0x19e)]['ToRoomAssigned']],_0x3da803=[..._0x186e8f[_0x5833f0(0x19e)][_0x5833f0(0x1a6)]],_0x580b3d=[..._0x186e8f['body'][_0x5833f0(0x10e)]],_0x25fe3f=[..._0x186e8f['body']['id_transaction']];const _0x32a777=_0x48051b['map'](_0x4eeb3e=>{return _0x4eeb3e={'product_name':_0x4eeb3e};});_0x23e359['forEach']((_0x450af6,_0x52eeeb)=>{var _0x224e86=_0x5833f0;_0x32a777[_0x52eeeb][_0x224e86(0xfa)]=_0x450af6;}),_0x3da803[_0x5833f0(0x1d1)]((_0x49d0c8,_0xacab45)=>{_0x32a777[_0xacab45]['from_invoice']=_0x49d0c8;}),_0x580b3d[_0x5833f0(0x1d1)]((_0xe8b534,_0x2067ea)=>{var _0x277a00=_0x5833f0;_0x32a777[_0x2067ea][_0x277a00(0x194)]=_0xe8b534;}),_0x25fe3f[_0x5833f0(0x1d1)]((_0x58d713,_0x18576a)=>{var _0x5bf4ff=_0x5833f0;_0x32a777[_0x18576a][_0x5bf4ff(0x1a3)]=_0x58d713;}),_0x2afe00[_0x5833f0(0x1d1)]((_0x56c6f6,_0x1e8f37)=>{_0x89c236['forEach']((_0x4d9ed4,_0x22274f)=>{var _0x16eebe=a0_0x37a9;if(_0x4d9ed4==_0x16eebe(0x1e3)&&_0x1e8f37==_0x22274f){var _0x5bd17c=_0x56c6f6[_0x16eebe(0x175)](0x3);_0x32a777[_0x1e8f37]['from_storage']=_0x56c6f6[0x0],_0x32a777[_0x1e8f37][_0x16eebe(0x1c3)]=_0x56c6f6[0x1],_0x32a777[_0x1e8f37][_0x16eebe(0x186)]=0x0,_0x32a777[_0x1e8f37][_0x16eebe(0x171)]=0x0,_0x32a777[_0x1e8f37][_0x16eebe(0x118)]=_0x16eebe(0x1bf),_0x32a777[_0x1e8f37][_0x16eebe(0x1b0)]=_0x5bd17c;}else{if(_0x4d9ed4==_0x16eebe(0x11f)&&_0x1e8f37==_0x22274f){var _0x5bd17c=_0x56c6f6['slice'](0x3);_0x32a777[_0x1e8f37][_0x16eebe(0x19b)]=_0x56c6f6[0x0],_0x32a777[_0x1e8f37][_0x16eebe(0x1c3)]=_0x56c6f6[0x1],_0x32a777[_0x1e8f37][_0x16eebe(0x186)]=0x0,_0x32a777[_0x1e8f37][_0x16eebe(0x171)]=0x0,_0x32a777[_0x1e8f37][_0x16eebe(0x118)]=_0x16eebe(0x1bf),_0x32a777[_0x1e8f37][_0x16eebe(0x1b0)]=_0x56c6f6[0x5];}else{if(_0x1e8f37==_0x22274f){if(_0x56c6f6[0x0]=='A'&&_0x56c6f6[0x1]=='L'&&_0x56c6f6[0x2]=='L')console['log'](_0x4d9ed4+_0x16eebe(0x18a)+_0x1e8f37+_0x16eebe(0x18a)+_0x22274f+_0x16eebe(0x18a)+_0x56c6f6+_0x16eebe(0x10a)),_0x32a777[_0x1e8f37][_0x16eebe(0x19b)]=_0x56c6f6[0x0],_0x32a777[_0x1e8f37][_0x16eebe(0x1c3)]=_0x56c6f6[0x1],_0x32a777[_0x1e8f37]['from_bay']=0x0,_0x32a777[_0x1e8f37][_0x16eebe(0x171)]=0x0,_0x32a777[_0x1e8f37]['from_types']=_0x16eebe(0x1bf),_0x32a777[_0x1e8f37][_0x16eebe(0x1b0)]=_0x56c6f6[0x3];else{var _0x3fcb30;if(_0x56c6f6[0x4]=='L')_0x3fcb30=_0x16eebe(0x1ec);else _0x56c6f6[0x4]=='F'&&(_0x3fcb30=_0x16eebe(0x1bf));_0x32a777[_0x1e8f37][_0x16eebe(0x19b)]=_0x56c6f6[0x0],_0x32a777[_0x1e8f37]['from_rack']=_0x56c6f6[0x1],_0x32a777[_0x1e8f37][_0x16eebe(0x186)]=_0x56c6f6[0x2],_0x32a777[_0x1e8f37]['from_bin']=_0x56c6f6[0x3],_0x32a777[_0x1e8f37][_0x16eebe(0x118)]=_0x3fcb30,_0x32a777[_0x1e8f37][_0x16eebe(0x1b0)]=_0x56c6f6[0x5];}}}}});}),_0x4c383a['forEach']((_0x1e04ed,_0x4fcfdd)=>{_0x32a777[_0x4fcfdd]['to_quantity']=_0x1e04ed;}),_0x556914[_0x5833f0(0x1d1)]((_0x6f29a6,_0x4e0a47)=>{_0x31d7d5['forEach']((_0x1d28c6,_0x7785ff)=>{var _0x195031=a0_0x37a9;if(_0x1d28c6==_0x195031(0x1e3)&&_0x4e0a47==_0x7785ff){var _0x1411e1=_0x6f29a6[_0x195031(0x175)](0x3);_0x32a777[_0x4e0a47][_0x195031(0x1d7)]=_0x6f29a6[0x0],_0x32a777[_0x4e0a47][_0x195031(0x11a)]=_0x6f29a6[0x1],_0x32a777[_0x4e0a47][_0x195031(0x1a9)]=0x0,_0x32a777[_0x4e0a47]['to_bin']=0x0,_0x32a777[_0x4e0a47][_0x195031(0x125)]=_0x195031(0x1bf),_0x32a777[_0x4e0a47][_0x195031(0x1ba)]=_0x1411e1;}else{if(_0x1d28c6==_0x195031(0x11f)&&_0x4e0a47==_0x7785ff){var _0x1411e1=_0x6f29a6[_0x195031(0x175)](0x3);_0x32a777[_0x4e0a47][_0x195031(0x1d7)]=_0x6f29a6[0x0],_0x32a777[_0x4e0a47][_0x195031(0x11a)]=_0x6f29a6[0x1],_0x32a777[_0x4e0a47][_0x195031(0x1a9)]=0x0,_0x32a777[_0x4e0a47][_0x195031(0x112)]=0x0,_0x32a777[_0x4e0a47][_0x195031(0x125)]=_0x195031(0x1bf),_0x32a777[_0x4e0a47][_0x195031(0x1ba)]=_0x6f29a6[0x5];}else{if(_0x4e0a47==_0x7785ff){if(_0x6f29a6[0x0]=='A'&&_0x6f29a6[0x1]=='L'&&_0x6f29a6[0x2]=='L')console[_0x195031(0x1ab)](_0x1d28c6+_0x195031(0x18a)+_0x4e0a47+_0x195031(0x18a)+_0x7785ff+'\x20<>\x20'+_0x6f29a6+_0x195031(0x10a)),_0x32a777[_0x4e0a47][_0x195031(0x1d7)]=_0x6f29a6[0x0],_0x32a777[_0x4e0a47][_0x195031(0x11a)]=_0x6f29a6[0x1],_0x32a777[_0x4e0a47]['to_bay']=0x0,_0x32a777[_0x4e0a47]['to_bin']=0x0,_0x32a777[_0x4e0a47]['to_types']=_0x195031(0x1bf),_0x32a777[_0x4e0a47][_0x195031(0x1ba)]=_0x6f29a6[0x3];else{var _0x282122;if(_0x6f29a6[0x4]=='L')_0x282122='Level';else _0x6f29a6[0x4]=='F'&&(_0x282122=_0x195031(0x1bf));_0x32a777[_0x4e0a47][_0x195031(0x1d7)]=_0x6f29a6[0x0],_0x32a777[_0x4e0a47][_0x195031(0x11a)]=_0x6f29a6[0x1],_0x32a777[_0x4e0a47][_0x195031(0x1a9)]=_0x6f29a6[0x2],_0x32a777[_0x4e0a47][_0x195031(0x112)]=_0x6f29a6[0x3],_0x32a777[_0x4e0a47][_0x195031(0x125)]=_0x282122,_0x32a777[_0x4e0a47][_0x195031(0x1ba)]=_0x6f29a6[0x5];}}}}});}),_0x51e0eb[_0x5833f0(0x1d1)]((_0x32256f,_0x3fb331)=>{_0x32a777[_0x3fb331]['primary_code']=_0x32256f;}),_0x1cbafd['forEach']((_0x55d219,_0x2f3072)=>{_0x32a777[_0x2f3072]['secondary_code']=_0x55d219;}),_0xb2ab5e[_0x5833f0(0x1d1)]((_0x4c4ab3,_0xd6685)=>{var _0x341a5d=_0x5833f0;_0x32a777[_0xd6685][_0x341a5d(0x1d3)]=_0x4c4ab3;}),_0x4ce64b[_0x5833f0(0x1d1)]((_0xebfd03,_0xdd04fc)=>{var _0x578b24=_0x5833f0;_0x32a777[_0xdd04fc][_0x578b24(0x106)]=_0xebfd03;}),_0x369354[_0x5833f0(0x1d1)]((_0xa670a1,_0x3d0934)=>{var _0x464bae=_0x5833f0;_0x32a777[_0x3d0934][_0x464bae(0x1e8)]=_0xa670a1;}),_0x266127[_0x5833f0(0x1d1)]((_0xfa5f9,_0x5f253f)=>{var _0x5231ad=_0x5833f0;_0x32a777[_0x5f253f][_0x5231ad(0x1c9)]=_0xfa5f9;}),_0x77a295[_0x5833f0(0x1d1)]((_0x13ce73,_0x276fb1)=>{_0x32a777[_0x276fb1]['batch_code']=_0x13ce73;}),_0x314920[_0x5833f0(0x1d1)]((_0x16e8fd,_0x194d12)=>{_0x32a777[_0x194d12]['expiry_date']=_0x16e8fd;}),_0x37c219[_0x5833f0(0x1d1)]((_0x4568fc,_0x51193e)=>{var _0x4d6e57=_0x5833f0;_0x32a777[_0x51193e][_0x4d6e57(0x16d)]=_0x4568fc;}),_0x5ca103[_0x5833f0(0x1d1)]((_0x42455d,_0x5586c7)=>{var _0x1f5aba=_0x5833f0;_0x32a777[_0x5586c7][_0x1f5aba(0x150)]=_0x42455d;}),_0x3647cd[_0x5833f0(0x1d1)]((_0x4fda0e,_0x1f002d)=>{var _0x17de24=_0x5833f0;_0x32a777[_0x1f002d][_0x17de24(0xfc)]=_0x4fda0e;}),_0x89c236[_0x5833f0(0x1d1)]((_0x42b601,_0x567507)=>{var _0xb839fb=_0x5833f0;_0x32a777[_0x567507][_0xb839fb(0x17e)]=_0x42b601;}),_0x31d7d5[_0x5833f0(0x1d1)]((_0x149176,_0x4b81ff)=>{var _0xbc736=_0x5833f0;_0x32a777[_0x4b81ff][_0xbc736(0x13b)]=_0x149176;});const _0x27ec79=_0x32a777[_0x5833f0(0x11d)](_0xf84621=>_0xf84621[_0x5833f0(0x193)]!=='0'&&_0xf84621['to_quantity']!==''||_0xf84621[_0x5833f0(0x1ba)]!=='0'&&_0xf84621[_0x5833f0(0x1ba)]!==''),_0x46d5e1=new transfers({'date':_0x73f233,'from_warehouse':_0x16dfb9,'to_warehouse':_0x28a653,'product':_0x27ec79,'note':_0x50606c,'invoice':_0x1f04b9}),_0x1fba0c=await _0x46d5e1['save']();_0x186e8f[_0x5833f0(0x1b6)](_0x5833f0(0x1d2),_0x5833f0(0xfd)),_0x4381f0[_0x5833f0(0x139)](_0x5833f0(0x144)+_0x1fba0c[_0x5833f0(0x170)]);}catch(_0x23fb93){console[_0x5833f0(0x1ab)](_0x23fb93),_0x4381f0['status'](0xc8)[_0x5833f0(0x15e)]({'errorMessage':_0x23fb93[_0x5833f0(0x1de)]});}}),router[a0_0x2ce349(0x1a8)](a0_0x2ce349(0x1df),auth,async(_0x3d3573,_0x163ee0)=>{var _0xf55e09=a0_0x2ce349;try{const {username:_0x158e01,email:_0x4e775d,role:_0x504968}=_0x3d3573[_0xf55e09(0x11c)],_0x1dc7a8=_0x3d3573[_0xf55e09(0x11c)],_0x2d677e=await profile[_0xf55e09(0x152)]({'email':_0x1dc7a8['email']}),_0x488203=await master_shop[_0xf55e09(0xfb)]();console['log'](_0xf55e09(0x15f),_0x488203);const _0x47ce05=await transfers[_0xf55e09(0x1e5)](_0x3d3573['params']['id']);let _0x472da3=new Date(_0x47ce05[_0xf55e09(0x16b)]),_0x4c6cfc=('0'+_0x472da3[_0xf55e09(0x116)]())['slice'](-0x2),_0x3d3729=('0'+(_0x472da3[_0xf55e09(0x1be)]()+0x1))[_0xf55e09(0x175)](-0x2),_0xa2cb72=_0x472da3[_0xf55e09(0x19c)](),_0x4d9d1d=_0xa2cb72+'-'+_0x3d3729+'-'+_0x4c6cfc,_0x566e8b;if(_0x1dc7a8[_0xf55e09(0x121)]==_0xf55e09(0x199)){const _0x478354=await staff[_0xf55e09(0x152)]({'email':_0x1dc7a8[_0xf55e09(0x182)]});_0x566e8b=await warehouse[_0xf55e09(0xfb)]({'status':_0xf55e09(0x124),'name':_0x478354[_0xf55e09(0x18b)],'warehouse_category':'Raw\x20Materials'});}else _0x566e8b=await warehouse[_0xf55e09(0xfb)]({'status':_0xf55e09(0x124),'warehouse_category':_0xf55e09(0x1e6)});const _0x3d7c04=await warehouse[_0xf55e09(0x13f)]([{'$match':{'name':_0x47ce05[_0xf55e09(0x14c)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0xf55e09(0x1b8)},'product_stock':{'$first':_0xf55e09(0x1e1)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0xf55e09(0x190)},'primary_code':{'$first':_0xf55e09(0x1c1)},'secondary_code':{'$first':_0xf55e09(0x12f)},'product_code':{'$first':_0xf55e09(0x19a)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0xf55e09(0x119)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0xf55e09(0x115)}}}]);if(_0x488203[0x0][_0xf55e09(0x169)]==_0xf55e09(0x1a7)){var _0x1f1e24=users[_0xf55e09(0x1dc)];console[_0xf55e09(0x1ab)](_0x1f1e24);}else{if(_0x488203[0x0][_0xf55e09(0x169)]==_0xf55e09(0x12b))var _0x1f1e24=users[_0xf55e09(0x12b)];else{if(_0x488203[0x0][_0xf55e09(0x169)]==_0xf55e09(0x1ce))var _0x1f1e24=users[_0xf55e09(0x1ce)];else{if(_0x488203[0x0]['language']==_0xf55e09(0x1d8))var _0x1f1e24=users[_0xf55e09(0x1d8)];else{if(_0x488203[0x0][_0xf55e09(0x169)]=='French')var _0x1f1e24=users['French'];else{if(_0x488203[0x0]['language']=='Portuguese\x20(BR)')var _0x1f1e24=users['Portuguese'];else{if(_0x488203[0x0][_0xf55e09(0x169)]==_0xf55e09(0x16f))var _0x1f1e24=users[_0xf55e09(0x16f)];else{if(_0x488203[0x0]['language']=='Arabic\x20(ae)')var _0x1f1e24=users[_0xf55e09(0x159)];}}}}}}}_0x163ee0[_0xf55e09(0x17c)](_0xf55e09(0x179),{'success':_0x3d3573[_0xf55e09(0x1b6)](_0xf55e09(0x1d2)),'errors':_0x3d3573[_0xf55e09(0x1b6)](_0xf55e09(0x156)),'role':_0x1dc7a8,'profile':_0x2d677e,'master_shop':_0x488203,'warehouse':_0x566e8b,'transfer':_0x47ce05,'stock':_0x3d7c04,'language':_0x1f1e24});}catch(_0x1f8336){console[_0xf55e09(0x1ab)](_0x1f8336);}}),router['post'](a0_0x2ce349(0x1df),auth,async(_0x35d230,_0x39964a)=>{var _0x200970=a0_0x2ce349;try{const _0x1185e6=_0x35d230[_0x200970(0x10c)]['id'],{from_warehouse:_0x1bdf54,FromRoom_name:_0x4ba1c0,to_warehouse:_0x260bb2,ToRoom_name:_0x365d3f}=_0x35d230['body'],_0x5caf9c=await transfers[_0x200970(0x1e5)]({'_id':_0x1185e6}),_0x22c4f2=_0x5caf9c[_0x200970(0x1a1)]['map'](async _0x202b9b=>{var _0x4d1821=_0x200970;if(_0x202b9b[_0x4d1821(0x193)]>0x0){var _0x228814=await warehouse[_0x4d1821(0x152)]({'name':_0x5caf9c['from_warehouse'],'room':_0x202b9b[_0x4d1821(0x17e)],'warehouse_category':'Raw\x20Materials'});const _0x11f9c6=_0x228814['product_details']['map'](_0x1aaa5b=>{var _0x2d68e5=_0x4d1821;_0x1aaa5b['product_name']==_0x202b9b['product_name']&&_0x1aaa5b['floorlevel']==_0x202b9b[_0x2d68e5(0x1b0)]&&_0x1aaa5b[_0x2d68e5(0x143)]==_0x202b9b[_0x2d68e5(0x118)]&&_0x1aaa5b[_0x2d68e5(0x133)]==_0x202b9b[_0x2d68e5(0x171)]&&_0x1aaa5b[_0x2d68e5(0x1e9)]==_0x202b9b[_0x2d68e5(0x186)]&&_0x1aaa5b[_0x2d68e5(0x11a)]==_0x202b9b[_0x2d68e5(0x1c3)]&&_0x1aaa5b[_0x2d68e5(0x1d7)]==_0x202b9b[_0x2d68e5(0x19b)]&&_0x1aaa5b[_0x2d68e5(0x16b)]==_0x202b9b[_0x2d68e5(0x16b)]&&_0x1aaa5b[_0x2d68e5(0x155)]==_0x202b9b[_0x2d68e5(0x155)]&&_0x1aaa5b[_0x2d68e5(0x150)]==_0x202b9b[_0x2d68e5(0x150)]&&_0x1aaa5b[_0x2d68e5(0x177)]==_0x202b9b[_0x2d68e5(0x1a6)]&&_0x1aaa5b[_0x2d68e5(0x170)]==_0x202b9b[_0x2d68e5(0x1a3)]&&(_0x1aaa5b['product_stock']=_0x1aaa5b[_0x2d68e5(0x10d)]-_0x202b9b['to_quantity']);});}return _0x228814;});Promise[_0x200970(0x185)](_0x22c4f2)[_0x200970(0x12d)](async _0x295337=>{var _0x4bb190=_0x200970;try{for(const _0x39a4f9 of _0x295337){await _0x39a4f9[_0x4bb190(0x173)]();}try{const _0x59967b=_0x5caf9c[_0x4bb190(0x1a1)][_0x4bb190(0x157)](async _0x1f203f=>{var _0x2c45be=_0x4bb190;if(_0x1f203f['to_quantity']>0x0){var _0x4e3f4c=await warehouse['findOne']({'name':_0x5caf9c['to_warehouse'],'room':_0x1f203f[_0x2c45be(0x13b)],'warehouse_category':'Raw\x20Materials'}),_0x2527fb=0x0;const _0x31079e=_0x4e3f4c[_0x2c45be(0x1d9)][_0x2c45be(0x157)](_0x564f7c=>{var _0x49d0f9=_0x2c45be;_0x564f7c[_0x49d0f9(0x14f)]==_0x1f203f['product_name']&&_0x564f7c[_0x49d0f9(0x147)]==_0x1f203f[_0x49d0f9(0x1ba)]&&_0x564f7c[_0x49d0f9(0x143)]==_0x1f203f[_0x49d0f9(0x125)]&&_0x564f7c[_0x49d0f9(0x133)]==_0x1f203f['to_bin']&&_0x564f7c[_0x49d0f9(0x1e9)]==_0x1f203f[_0x49d0f9(0x1a9)]&&_0x564f7c[_0x49d0f9(0x11a)]==_0x1f203f['rack']&&_0x564f7c['storage']==_0x1f203f[_0x49d0f9(0x1d7)]&&_0x564f7c[_0x49d0f9(0x16b)]==_0x1f203f['expiry_date']&&_0x564f7c[_0x49d0f9(0x155)]==_0x1f203f[_0x49d0f9(0x155)]&&_0x564f7c[_0x49d0f9(0x150)]==_0x1f203f['production_date']&&_0x564f7c[_0x49d0f9(0x177)]==_0x1f203f[_0x49d0f9(0x194)]&&(_0x564f7c[_0x49d0f9(0x10d)]=_0x564f7c[_0x49d0f9(0x10d)]+_0x1f203f[_0x49d0f9(0x193)],_0x2527fb++);});_0x2527fb=='0'&&(_0x4e3f4c['product_details']=_0x4e3f4c['product_details']['concat']({'product_name':_0x1f203f[_0x2c45be(0x14f)],'product_stock':_0x1f203f[_0x2c45be(0x193)],'bay':_0x1f203f['to_bay'],'bin':_0x1f203f[_0x2c45be(0x112)],'type':_0x1f203f[_0x2c45be(0x125)],'floorlevel':_0x1f203f[_0x2c45be(0x1ba)],'storage':_0x1f203f['storage'],'rack':_0x1f203f['rack'],'product_code':_0x1f203f[_0x2c45be(0x1d3)],'primary_code':_0x1f203f['primary_code'],'secondary_code':_0x1f203f[_0x2c45be(0x122)],'maxProducts':_0x1f203f[_0x2c45be(0x106)],'storage':_0x1f203f[_0x2c45be(0x1d7)],'rack':_0x1f203f[_0x2c45be(0x11a)],'expiry_date':_0x1f203f['expiry_date'],'maxPerUnit':_0x1f203f[_0x2c45be(0x16d)],'batch_code':_0x1f203f[_0x2c45be(0x155)],'production_date':_0x1f203f[_0x2c45be(0x150)]}));}return _0x4e3f4c;});Promise[_0x4bb190(0x185)](_0x59967b)[_0x4bb190(0x12d)](async _0x577b1f=>{var _0x4170e6=_0x4bb190;try{for(const _0x592ce2 of _0x577b1f){await warehouse[_0x4170e6(0x181)]({'_id':_0x592ce2[_0x4170e6(0x170)]},{'$addToSet':{'product_details':{'$each':_0x592ce2[_0x4170e6(0x1d9)]}}});}_0x5caf9c[_0x4170e6(0x19f)]=_0x4170e6(0x1da);const _0xfce95a=await _0x5caf9c[_0x4170e6(0x173)](),_0x313f40=await master_shop[_0x4170e6(0xfb)](),_0x416893=await email_settings['findOne'](),_0x23ab3b=await supervisor_settings[_0x4170e6(0xfb)]();var _0x2c7d10=_0x5caf9c[_0x4170e6(0x1a1)],_0x42bb4e='',_0x1179d2;for(_0x1179d2 in _0x2c7d10){_0x42bb4e+=_0x4170e6(0x166)+_0x4170e6(0x134)+_0x2c7d10[_0x1179d2][_0x4170e6(0x14f)]+_0x4170e6(0xf9)+_0x4170e6(0x134)+_0x2c7d10[_0x1179d2][_0x4170e6(0x1d3)]+_0x4170e6(0xf9)+_0x4170e6(0x134)+_0x2c7d10[_0x1179d2]['to_quantity']+_0x4170e6(0xf9)+_0x4170e6(0x134)+_0x2c7d10[_0x1179d2][_0x4170e6(0x1e8)]+_0x4170e6(0xf9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2c7d10[_0x1179d2][_0x4170e6(0x1c9)]+_0x4170e6(0xf9)+_0x4170e6(0x134)+_0x5caf9c[_0x4170e6(0x108)]+_0x4170e6(0xf9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2c7d10[_0x1179d2][_0x4170e6(0x13b)]+_0x4170e6(0xf9)+_0x4170e6(0x134)+_0x2c7d10[_0x1179d2][_0x4170e6(0x1d7)]+_0x2c7d10[_0x1179d2][_0x4170e6(0x11a)]+_0x2c7d10[_0x1179d2][_0x4170e6(0x1a9)]+_0x2c7d10[_0x1179d2][_0x4170e6(0x112)]+_0x2c7d10[_0x1179d2][_0x4170e6(0x125)][0x0]+_0x2c7d10[_0x1179d2][_0x4170e6(0x1ba)]+_0x4170e6(0xf9),_0x4170e6(0x14b);}let _0x4a80bf=nodemailer[_0x4170e6(0x1a2)]({'host':_0x416893[_0x4170e6(0x129)],'port':Number(_0x416893['port']),'secure':![],'auth':{'user':_0x416893[_0x4170e6(0x182)],'pass':_0x416893['password']}}),_0x56fd24={'from':_0x416893[_0x4170e6(0x182)],'to':_0x23ab3b[0x0][_0x4170e6(0x180)],'subject':'Transfer\x20Mail','attachments':[{'filename':_0x4170e6(0x11e),'path':__dirname+_0x4170e6(0x111)+_0x4170e6(0x1c0)+_0x313f40[0x0][_0x4170e6(0x1bc)],'cid':_0x4170e6(0x151)}],'html':_0x4170e6(0x197)+'<html><head><title></title>'+_0x4170e6(0x14d)+_0x4170e6(0xff)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x4170e6(0xff)+_0x4170e6(0x165)+_0x4170e6(0x1e4)+_0x4170e6(0xff)+'<h2>\x20'+_0x313f40[0x0]['site_title']+'\x20</h2>'+_0x4170e6(0x1e4)+_0x4170e6(0x1e4)+'<hr\x20class=\x22my-3\x22>'+_0x4170e6(0xff)+_0x4170e6(0x13a)+_0x4170e6(0x142)+_0x5caf9c[_0x4170e6(0x177)]+'\x20'+_0x4170e6(0x13c)+_0x4170e6(0x14a)+_0x5caf9c[_0x4170e6(0x1cf)]+'\x20'+_0x4170e6(0x1bb)+_0x4170e6(0x187)+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x4170e6(0x123)+_0x4170e6(0x166)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x4170e6(0x18c)+_0x4170e6(0x10b)+_0x4170e6(0x1b3)+_0x4170e6(0x107)+_0x4170e6(0x161)+_0x4170e6(0x1b9)+_0x4170e6(0x14b)+_0x4170e6(0x109)+_0x4170e6(0x18d)+'\x20'+_0x42bb4e+'\x20'+_0x4170e6(0x113)+_0x4170e6(0x16c)+_0x4170e6(0xff)+_0x4170e6(0x164)+_0x4170e6(0x149)+_0x313f40[0x0]['site_title']+_0x4170e6(0x187)+'</div>'+_0x4170e6(0x1e4)+_0x4170e6(0x17f)};_0x4a80bf[_0x4170e6(0x176)](_0x56fd24,function(_0xe5a99e,_0x250942){var _0x289790=_0x4170e6;_0xe5a99e?(console[_0x289790(0x1ab)](_0xe5a99e),console[_0x289790(0x1ab)]('Error\x20Occurs')):console[_0x289790(0x1ab)]('Email\x20sent\x20successfully');}),_0x35d230[_0x4170e6(0x1b6)](_0x4170e6(0x1d2),'Transfer\x20Finalize\x20Successfully'),_0x39964a[_0x4170e6(0x139)](_0x4170e6(0x14e)+_0xfce95a['_id']);}catch(_0x433a86){console[_0x4170e6(0x1ae)](_0x433a86),_0x39964a['status'](0x1f4)[_0x4170e6(0x15e)]({'Perror':_0x4170e6(0x1e7),'message':_0x433a86[_0x4170e6(0x1de)]});}})[_0x4bb190(0x1b1)](_0x12d438=>{var _0x5053ef=_0x4bb190;console['error'](_0x12d438),_0x39964a[_0x5053ef(0x1ea)](0x1f4)['json']({'Perror':'An\x20error\x20occurred.'});});}catch(_0x5b2c40){_0x39964a['json'](_0x5b2c40);}}catch(_0x7fc2cb){console[_0x4bb190(0x1ae)](_0x7fc2cb),_0x39964a[_0x4bb190(0x1ea)](0x1f4)[_0x4bb190(0x15e)]({'Merror':_0x4bb190(0x1e7),'Message':_0x7fc2cb['message']});}})['catch'](_0x522240=>{var _0x174dd1=_0x200970;console[_0x174dd1(0x1ae)](_0x522240),_0x39964a[_0x174dd1(0x1ea)](0x1f4)['json']({'Merror':_0x174dd1(0x1c7)});});}catch(_0x339c2b){console[_0x200970(0x1ab)](_0x339c2b);}});function a0_0x37a9(_0x1aede8,_0x3936b3){var _0x2d3ac8=a0_0x2d3a();return a0_0x37a9=function(_0x37a95e,_0x26753e){_0x37a95e=_0x37a95e-0xf7;var _0x57c106=_0x2d3ac8[_0x37a95e];return _0x57c106;},a0_0x37a9(_0x1aede8,_0x3936b3);}function BayBinSelected(_0x1d80c7,_0x4410a1){var _0x55d6b2=a0_0x2ce349,_0x3436ee=[],_0x57be57=[],_0x33a92d=[],_0x127063=[],_0x497b97=[],_0x3df151=[];let _0x5f5c1a=[];if(_0x1d80c7==_0x55d6b2(0x1d4))switch(_0x4410a1){case _0x55d6b2(0x1c8):_0x3436ee=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x57be57=[0x1,0x2],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),'Floor'],_0x497b97=['D'],_0x3df151=['A'];break;case _0x55d6b2(0x174):_0x3436ee=[0x6,0x5,0x4,0x3,0x2,0x1],_0x57be57=[0x1,0x2],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),_0x55d6b2(0x1bf)],_0x497b97=['D'],_0x3df151=['B'];break;case _0x55d6b2(0x11f):_0x3436ee=[0x0],_0x57be57=[0x0],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=['Floor'],_0x497b97=['D'],_0x3df151=['S'];break;case _0x55d6b2(0x1e3):_0x3436ee=[0x0],_0x57be57=[0x0],_0x127063=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x33a92d=[_0x55d6b2(0x1bf)],_0x497b97=['D'],_0x3df151=['R'];break;}else{if(_0x1d80c7=='COLD\x20STORAGE')switch(_0x4410a1){case'Rack\x20A':_0x3436ee=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x57be57=['B','F'],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),'Floor'],_0x497b97=['C'],_0x3df151=['A'];break;case _0x55d6b2(0x174):_0x3436ee=[0x5,0x4,0x3,0x2,0x1],_0x57be57=['F','B','S'],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),_0x55d6b2(0x1bf)],_0x497b97=['C'],_0x3df151=['B'];break;case _0x55d6b2(0x192):_0x3436ee=[0x1,0x2,0x3,0x4,0x5],_0x57be57=['B','F','S'],_0x127063=[0x5,0x4,0x3,0x2,0x1],_0x33a92d=[_0x55d6b2(0x1ec),_0x55d6b2(0x1bf)],_0x497b97=['C'],_0x3df151=['C'];break;case _0x55d6b2(0x15c):_0x3436ee=[0x5,0x4,0x3,0x2,0x1],_0x57be57=['F','B','S'],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),'Floor'],_0x497b97=['C'],_0x3df151=['D'];break;case _0x55d6b2(0x184):_0x3436ee=[0x4,0x3,0x2,0x1],_0x57be57=[0x1,0x2],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec),_0x55d6b2(0x1bf)],_0x497b97=['C'],_0x3df151=['E'];break;case _0x55d6b2(0x160):_0x3436ee=[0x1,0x2,0x3],_0x57be57=[0x1,0x2],_0x127063=[0x1,0x2,0x3,0x4,0x5],_0x33a92d=[_0x55d6b2(0x1ec)],_0x497b97=['C'],_0x3df151=['F'];break;}}return{'levels':_0x3436ee,'Isle':_0x57be57,'rack':_0x127063,'type':_0x33a92d,'storage':_0x497b97,'rak':_0x3df151};}function a0_0x2d3a(){var _0x4c32ce=['Shelves','rak','role','secondary_code','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','Enabled','to_types','from_rak','Ambient','Router','host','$product.from_room_name','Hindi','product_code3','then','/view/:id','$product_details.secondary_code','exports','$product_details.invoice','add_transfer','bin','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.batch_code','max_per_unit','$product_details.isle','to_room','redirect','<h5\x20style=\x22text-align:\x20left;\x22>','to_room_name','<span\x20style=\x22float:\x20right;\x22>','$product.to_room_name','../middleware/auth','aggregate','$product_details._id','$product_details.expiry_date','\x20Order\x20Number\x20:\x20','type','/transfer/preview/','/view/add_transfer','/view','floorlevel','express','<h5>','\x20Order\x20Date\x20:\x20','</tr>','from_warehouse','</head><body>','/picking_list/PDF_transfer_rm/','product_name','production_date','logo','findOne','from_prod_isle','$product_details.unit','batch_code','errors','map','There\x27s\x20a\x20error\x20in\x20this\x20transaction','Arabic','from_prod_qty','$_id','Rack\x20D','New_Qty_Converted','json','master','Rack\x20F','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','to_prod_pallet','floor','<strong>\x20Regards\x20</strong>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<tr>','id_transaction','$product_details.production_date','language','2976364kdoRcn','expiry_date','</table>','maxperunit','primary_unit','Chinese','_id','from_bin','3247105eNRJCX','save','Rack\x20B','slice','sendMail','invoice','$invoice','edit_transfer_view','$product_details.bay','post','render','55351260mdjZDP','from_room_name','</body></html>','RMSEmail','updateOne','email','nodemailer','Rack\x20E','all','from_bay','</h5>','$product_details.secondary_unit','Arabic\x20(ae)','\x20<>\x20','warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<tbody\x20style=\x22text-align:\x20center;\x22>','$isAllowEdit','Enclosed','$product_details.floorlevel','to_prod_isle','Rack\x20C','to_quantity','To_invoice','$product_details.bin','Portuguese','<!DOCTYPE\x20html>','string','staff','$product_details.product_code','from_storage','getFullYear','../public/language/languages.json','body','finalize','primary_code','product','createTransport','id_transaction_id','from_prod_pallet','prod_name','from_invoice','English\x20(US)','get','to_bay','RoomAssigned','log','/CheckingWarehouse','$name','error','1879353jjyoqp','from_floorlevel','catch','note','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','/barcode_scanner3','$product_details.maxProducts','flash','padStart','$product_details.product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','to_floorlevel','</span>','image','edit_transfer','getMonth','Floor','/upload/','$product_details.primary_code','/transfer/view','from_rack','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','back','$product_details.storage','An\x20error\x20occurred.','Rack\x20A','secondary_unit','$from_warehouse','from_prod_level','to_prod_qty','French','German','date','random','forEach','success','product_code','DRY\x20STORAGE','$product_details.maxPerUnit','ToRoomAssigned','storage','Spanish','product_details','True','$product_details','English','1703866WTnKjz','message','/preview/:id','24756psrWhX','$product_details.product_stock','transfer','Receiving\x20Area','</div>','findById','Raw\x20Materials','An\x20error\x20occurred\x20while\x20saving\x20data.','unit','bay','status','TRF-','Level','concat','MaxStocks_data2','$product','</td>','from_quantity','find','prod_cat','Product\x20Transfer\x20successfully','1491cZJfGZ','<div>','3fVakDT','from_room','$finalize','$product_details.pallet','$product_details.type','length','maxProducts','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','to_warehouse','</thead>','here','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','params','product_stock','to_invoice','/barcode_scanner','15163888inlTkc','/../public','to_bin','</tbody>','$to_warehouse','$room','getDate','to_prod_level','from_types','$product_details.rack','rack','Portuguese\x20(BR)','user','filter','Logo.png'];a0_0x2d3a=function(){return _0x4c32ce;};return a0_0x2d3a();}router[a0_0x2ce349(0x1a8)](a0_0x2ce349(0x12e),auth,async(_0x1ee28f,_0x56d662)=>{var _0x567f8a=a0_0x2ce349;try{const {username:_0x4d0c64,email:_0x46046c,role:_0x30ca54}=_0x1ee28f[_0x567f8a(0x11c)],_0x25ca7f=_0x1ee28f['user'],_0x3d509a=await profile[_0x567f8a(0x152)]({'email':_0x25ca7f[_0x567f8a(0x182)]}),_0x24ceb1=await master_shop[_0x567f8a(0xfb)](),_0x2d17a8=await transfers[_0x567f8a(0x1e5)](_0x1ee28f[_0x567f8a(0x10c)]['id']);let _0x31bf44;if(_0x25ca7f[_0x567f8a(0x121)]==_0x567f8a(0x199)){const _0x35c62c=await staff[_0x567f8a(0x152)]({'email':_0x25ca7f[_0x567f8a(0x182)]});_0x31bf44=await warehouse[_0x567f8a(0x13f)]([{'$match':{'status':_0x567f8a(0x124),'name':_0x35c62c[_0x567f8a(0x18b)],'warehouse_category':_0x567f8a(0x1e6)}},{'$group':{'_id':_0x567f8a(0x1ad),'name':{'$first':_0x567f8a(0x1ad)}}}]);}else _0x31bf44=await warehouse[_0x567f8a(0x13f)]([{'$match':{'status':_0x567f8a(0x124),'warehouse_category':_0x567f8a(0x1e6)}},{'$group':{'_id':_0x567f8a(0x1ad),'name':{'$first':_0x567f8a(0x1ad)}}}]);const _0x457195=await warehouse[_0x567f8a(0x13f)]([{'$match':{'name':_0x2d17a8[_0x567f8a(0x14c)],'warehouse_category':'Raw\x20Materials'}},{'$unwind':'$product_details'},{'$group':{'_id':_0x567f8a(0x140),'name':{'$first':_0x567f8a(0x1b8)},'product_stock':{'$first':_0x567f8a(0x1e1)},'bay':{'$first':_0x567f8a(0x17a)},'bin':{'$first':_0x567f8a(0x195)},'type':{'$first':_0x567f8a(0x104)},'floorlevel':{'$first':_0x567f8a(0x190)},'primary_code':{'$first':_0x567f8a(0x1c1)},'secondary_code':{'$first':_0x567f8a(0x12f)},'product_code':{'$first':_0x567f8a(0x19a)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x567f8a(0x119)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x567f8a(0x115)}}}]),_0x2dbce6=await product[_0x567f8a(0xfb)]({}),_0x40a8bc=BayBinSelected(_0x2d17a8[_0x567f8a(0x108)],_0x2d17a8[_0x567f8a(0x138)]);if(_0x24ceb1[0x0]['language']==_0x567f8a(0x1a7)){var _0x27a20e=users['English'];console[_0x567f8a(0x1ab)](_0x27a20e);}else{if(_0x24ceb1[0x0]['language']==_0x567f8a(0x12b))var _0x27a20e=users['Hindi'];else{if(_0x24ceb1[0x0]['language']==_0x567f8a(0x1ce))var _0x27a20e=users['German'];else{if(_0x24ceb1[0x0][_0x567f8a(0x169)]=='Spanish')var _0x27a20e=users['Spanish'];else{if(_0x24ceb1[0x0]['language']==_0x567f8a(0x1cd))var _0x27a20e=users[_0x567f8a(0x1cd)];else{if(_0x24ceb1[0x0]['language']==_0x567f8a(0x11b))var _0x27a20e=users[_0x567f8a(0x196)];else{if(_0x24ceb1[0x0][_0x567f8a(0x169)]=='Chinese')var _0x27a20e=users['Chinese'];else{if(_0x24ceb1[0x0][_0x567f8a(0x169)]==_0x567f8a(0x189))var _0x27a20e=users[_0x567f8a(0x159)];}}}}}}}_0x56d662[_0x567f8a(0x17c)](_0x567f8a(0x1bd),{'success':_0x1ee28f[_0x567f8a(0x1b6)](_0x567f8a(0x1d2)),'errors':_0x1ee28f[_0x567f8a(0x1b6)](_0x567f8a(0x156)),'role':_0x25ca7f,'profile':_0x3d509a,'master_shop':_0x24ceb1,'warehouse':_0x31bf44,'transfer':_0x2d17a8,'stock':_0x457195,'unit':_0x2dbce6,'language':_0x27a20e});}catch(_0x540b8a){console[_0x567f8a(0x1ab)](_0x540b8a);}}),router['post']('/view/:id',auth,async(_0x4f9327,_0x5792bc)=>{var _0x3fec09=a0_0x2ce349;try{const _0xbf8e77=_0x4f9327[_0x3fec09(0x10c)]['id'],_0x56dcee=await transfers[_0x3fec09(0x1e5)](_0xbf8e77);_0x5792bc[_0x3fec09(0x15e)](_0x4f9327['body']);return;const {date:_0x3b72ed,from_warehouse:_0xeff60d,FromRoom_name:_0x36787a,to_warehouse:_0x4b7120,ToRoom_name:_0x3ee680,prod_name:_0x10ed2e,from_prod_qty:_0x1bc366,from_prod_level:_0x5b1ecc,from_prod_isle:_0x251c34,from_prod_pallet:_0x1c3311,to_prod_qty:_0x32e4a6,to_prod_level:_0x362d1b,to_prod_isle:_0x29fc23,to_prod_pallet:_0x2de94a,primary_code:_0xb5850f,secondary_code:_0x4f96c6,product_code3:_0x37c558,note:_0x34b391,invoice:_0xe88155,expiry_date:_0x1c03da}=_0x4f9327[_0x3fec09(0x19e)];if(typeof _0x10ed2e==_0x3fec09(0x198))var _0x36f477=[_0x4f9327['body'][_0x3fec09(0x1a5)]],_0x7d0f58=[_0x4f9327[_0x3fec09(0x19e)]['from_prod_qty']],_0x1a20af=[_0x4f9327[_0x3fec09(0x19e)]['from_prod_level']],_0x503c4a=[_0x4f9327['body'][_0x3fec09(0x153)]],_0x404563=[_0x4f9327['body']['from_prod_pallet']],_0x5b20cf=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x118)]],_0x5e38dc=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1cc)]],_0x5c24fe=[_0x4f9327[_0x3fec09(0x19e)]['to_prod_level']],_0x50be49=[_0x4f9327[_0x3fec09(0x19e)]['to_prod_isle']],_0x32f96e=[_0x4f9327[_0x3fec09(0x19e)]['to_prod_pallet']],_0x2feffa=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x125)]],_0x4d19e9=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1d7)]],_0x4e9efa=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x120)]],_0x237482=[_0x4f9327['body']['primary_code']],_0x3c9c6a=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x122)]],_0x1e3983=[_0x4f9327['body'][_0x3fec09(0x12c)]],_0x4aec07=[_0x4f9327['body'][_0x3fec09(0xf7)]],_0x2a37e5=[_0x4f9327['body'][_0x3fec09(0x1e8)]],_0x26c8b3=[_0x4f9327['body'][_0x3fec09(0x1c9)]],_0x4d82e3=[_0x4f9327[_0x3fec09(0x19e)]['batch_code']],_0x172c74=[_0x4f9327['body'][_0x3fec09(0x16b)]],_0x3a58f3=[_0x4f9327['body'][_0x3fec09(0x19b)]],_0x342916=[_0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x126)]];else var _0x36f477=[..._0x4f9327[_0x3fec09(0x19e)]['prod_name']],_0x4d19e9=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1d7)]],_0x4e9efa=[..._0x4f9327['body'][_0x3fec09(0x120)]],_0x5b20cf=[..._0x4f9327['body'][_0x3fec09(0x118)]],_0x2feffa=[..._0x4f9327[_0x3fec09(0x19e)]['to_types']],_0x7d0f58=[..._0x4f9327['body'][_0x3fec09(0x15a)]],_0x1a20af=[..._0x4f9327[_0x3fec09(0x19e)]['from_prod_level']],_0x503c4a=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x153)]],_0x404563=[..._0x4f9327['body'][_0x3fec09(0x1a4)]],_0x5e38dc=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1cc)]],_0x5c24fe=[..._0x4f9327[_0x3fec09(0x19e)]['to_prod_level']],_0x50be49=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x191)]],_0x32f96e=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x162)]],_0x237482=[..._0x4f9327['body'][_0x3fec09(0x1a0)]],_0x3c9c6a=[..._0x4f9327[_0x3fec09(0x19e)]['secondary_code']],_0x1e3983=[..._0x4f9327[_0x3fec09(0x19e)]['product_code3']],_0x4aec07=[..._0x4f9327[_0x3fec09(0x19e)]['MaxStocks_data2']],_0x2a37e5=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1e8)]],_0x26c8b3=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x1c9)]],_0x4d82e3=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x155)]],_0x172c74=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x16b)]],_0x3a58f3=[..._0x4f9327[_0x3fec09(0x19e)]['from_storage']],_0x342916=[..._0x4f9327[_0x3fec09(0x19e)][_0x3fec09(0x126)]];const _0x5f1a24=_0x36f477[_0x3fec09(0x157)](_0x3bd671=>{return _0x3bd671={'product_name':_0x3bd671};});_0x7d0f58['forEach']((_0x15365e,_0x2cff97)=>{_0x5f1a24[_0x2cff97]['from_quantity']=_0x15365e;}),_0x1a20af[_0x3fec09(0x1d1)]((_0x4d331c,_0x19a6ee)=>{var _0x58b540=_0x3fec09;_0x5f1a24[_0x19a6ee][_0x58b540(0x186)]=_0x4d331c;}),_0x503c4a[_0x3fec09(0x1d1)]((_0x3149ef,_0xdd80ea)=>{var _0x244cf0=_0x3fec09;_0x5f1a24[_0xdd80ea][_0x244cf0(0x171)]=_0x3149ef;}),_0x404563[_0x3fec09(0x1d1)]((_0x113e2c,_0x5d68a4)=>{var _0x5eb276=_0x3fec09;_0x5f1a24[_0x5d68a4][_0x5eb276(0x1b0)]=_0x113e2c;}),_0x5e38dc[_0x3fec09(0x1d1)]((_0x36277b,_0x448809)=>{var _0x17b4f0=_0x3fec09;_0x5f1a24[_0x448809][_0x17b4f0(0x193)]=_0x36277b;}),_0x5c24fe['forEach']((_0x50e53a,_0x3cb059)=>{var _0x37b6de=_0x3fec09;_0x5f1a24[_0x3cb059][_0x37b6de(0x1a9)]=_0x50e53a;}),_0x50be49[_0x3fec09(0x1d1)]((_0x56f018,_0xb4cba6)=>{var _0x31ea64=_0x3fec09;_0x5f1a24[_0xb4cba6][_0x31ea64(0x112)]=_0x56f018;}),_0x32f96e[_0x3fec09(0x1d1)]((_0x1d00bd,_0x27358a)=>{var _0x46463b=_0x3fec09;_0x5f1a24[_0x27358a][_0x46463b(0x1ba)]=_0x1d00bd;}),_0x237482[_0x3fec09(0x1d1)]((_0x2b7b90,_0xd516f1)=>{var _0x4240cd=_0x3fec09;_0x5f1a24[_0xd516f1][_0x4240cd(0x1a0)]=_0x2b7b90;}),_0x3c9c6a['forEach']((_0x1f4a5b,_0x5d08f3)=>{var _0x440cb9=_0x3fec09;_0x5f1a24[_0x5d08f3][_0x440cb9(0x122)]=_0x1f4a5b;}),_0x1e3983[_0x3fec09(0x1d1)]((_0x384eff,_0x4303a5)=>{_0x5f1a24[_0x4303a5]['product_code']=_0x384eff;}),_0x4aec07['forEach']((_0x664d95,_0x295c7d)=>{var _0x4323b2=_0x3fec09;_0x5f1a24[_0x295c7d][_0x4323b2(0x106)]=_0x664d95;}),_0x2a37e5['forEach']((_0x47188b,_0x13520d)=>{var _0x31f6b0=_0x3fec09;_0x5f1a24[_0x13520d][_0x31f6b0(0x1e8)]=_0x47188b;}),_0x26c8b3[_0x3fec09(0x1d1)]((_0x40e373,_0x2e8f1e)=>{_0x5f1a24[_0x2e8f1e]['secondary_unit']=_0x40e373;}),_0x4d82e3[_0x3fec09(0x1d1)]((_0x24eaba,_0x5eff50)=>{var _0x32fa79=_0x3fec09;_0x5f1a24[_0x5eff50][_0x32fa79(0x155)]=_0x24eaba;}),_0x172c74[_0x3fec09(0x1d1)]((_0x28dd43,_0x2bac17)=>{var _0x2e1f9f=_0x3fec09;_0x5f1a24[_0x2bac17][_0x2e1f9f(0x16b)]=_0x28dd43;}),_0x4d19e9[_0x3fec09(0x1d1)]((_0x5728f9,_0x5d73f2)=>{var _0x161e5d=_0x3fec09;_0x5f1a24[_0x5d73f2][_0x161e5d(0x1d7)]=_0x5728f9;}),_0x4e9efa[_0x3fec09(0x1d1)]((_0xed7a01,_0xd00ecf)=>{_0x5f1a24[_0xd00ecf]['rack']=_0xed7a01;}),_0x5b20cf['forEach']((_0x3a2ccd,_0x53b7d7)=>{var _0x43ed06=_0x3fec09;_0x5f1a24[_0x53b7d7][_0x43ed06(0x118)]=_0x3a2ccd;}),_0x2feffa[_0x3fec09(0x1d1)]((_0x8bf9a5,_0x70cc7)=>{var _0x415c0a=_0x3fec09;_0x5f1a24[_0x70cc7][_0x415c0a(0x125)]=_0x8bf9a5;}),_0x3a58f3[_0x3fec09(0x1d1)]((_0x1b646f,_0x5cfc18)=>{var _0x38b525=_0x3fec09;_0x5f1a24[_0x5cfc18][_0x38b525(0x19b)]=_0x1b646f;}),_0x342916[_0x3fec09(0x1d1)]((_0x14c85f,_0x1e88d0)=>{var _0x173584=_0x3fec09;_0x5f1a24[_0x1e88d0][_0x173584(0x1c3)]=_0x14c85f;});const _0x70f59c=_0x5f1a24[_0x3fec09(0x11d)](_0x586a49=>_0x586a49['to_quantity']!=='0'&&_0x586a49['to_quantity']!==''||_0x586a49[_0x3fec09(0x1ba)]!=='0'&&_0x586a49['to_floorlevel']!=='');var _0x1742c7=0x0;_0x70f59c[_0x3fec09(0x1d1)](_0x55fa24=>{var _0x155ad2=_0x3fec09;parseInt(_0x55fa24[_0x155ad2(0xfa)])<parseInt(_0x55fa24[_0x155ad2(0x193)])&&_0x1742c7++;});if(_0x1742c7!=0x0)return _0x4f9327[_0x3fec09(0x1b6)](_0x3fec09(0x156),_0x3fec09(0x1c4)),_0x5792bc['redirect'](_0x3fec09(0x1c5));const _0xd1c812=await warehouse[_0x3fec09(0x152)]({'name':_0x56dcee['from_warehouse'],'room':_0x56dcee[_0x3fec09(0x101)]});_0x56dcee['product'][_0x3fec09(0x1d1)](_0x1a6f53=>{var _0x34cd9b=_0x3fec09;if(_0x1a6f53[_0x34cd9b(0x193)]>0x0){const _0x5ae44f=_0xd1c812[_0x34cd9b(0x1d9)]['map'](_0x553055=>{var _0x5eb04a=_0x34cd9b;_0x553055[_0x5eb04a(0x14f)]==_0x1a6f53[_0x5eb04a(0x14f)]&&_0x553055[_0x5eb04a(0x147)]==_0x1a6f53[_0x5eb04a(0x1b0)]&&_0x553055[_0x5eb04a(0x143)]==_0x1a6f53['from_types']&&_0x553055[_0x5eb04a(0x133)]==_0x1a6f53[_0x5eb04a(0x171)]&&_0x553055[_0x5eb04a(0x1e9)]==_0x1a6f53[_0x5eb04a(0x186)]&&_0x553055[_0x5eb04a(0x11a)]==_0x1a6f53[_0x5eb04a(0x1c3)]&&_0x553055[_0x5eb04a(0x1d7)]==_0x1a6f53[_0x5eb04a(0x19b)]&&(_0x553055['product_stock']=parseInt(_0x553055[_0x5eb04a(0x10d)])+parseInt(_0x1a6f53['to_quantity']));});}}),await _0xd1c812[_0x3fec09(0x173)]();const _0x30d58a=await warehouse[_0x3fec09(0x152)]({'name':_0x56dcee[_0x3fec09(0x108)],'room':_0x56dcee[_0x3fec09(0x138)]});_0x56dcee[_0x3fec09(0x1a1)][_0x3fec09(0x1d1)](_0x345db8=>{var _0x42fef9=_0x3fec09;if(_0x345db8['to_quantity']>0x0){const _0x42d170=_0x30d58a['product_details'][_0x42fef9(0x157)](_0x1bcc9a=>{var _0x3fa4a3=_0x42fef9;_0x1bcc9a[_0x3fa4a3(0x14f)]==_0x345db8[_0x3fa4a3(0x14f)]&&_0x1bcc9a[_0x3fa4a3(0x147)]==_0x345db8[_0x3fa4a3(0x1ba)]&&_0x1bcc9a[_0x3fa4a3(0x143)]==_0x345db8['to_types']&&_0x1bcc9a[_0x3fa4a3(0x133)]==_0x345db8[_0x3fa4a3(0x112)]&&_0x1bcc9a[_0x3fa4a3(0x1e9)]==_0x345db8['to_bay']&&_0x1bcc9a[_0x3fa4a3(0x11a)]==_0x345db8['rack']&&_0x1bcc9a[_0x3fa4a3(0x1d7)]==_0x345db8[_0x3fa4a3(0x1d7)]&&(_0x1bcc9a['product_stock']=parseInt(_0x1bcc9a[_0x3fa4a3(0x10d)])-parseInt(_0x345db8[_0x3fa4a3(0x193)]));});}}),await _0x30d58a[_0x3fec09(0x173)](),_0x56dcee[_0x3fec09(0x1cf)]=_0x3b72ed,_0x56dcee[_0x3fec09(0x14c)]=_0xeff60d,_0x56dcee[_0x3fec09(0x108)]=_0x4b7120,_0x56dcee[_0x3fec09(0x1a1)]=_0x70f59c,_0x56dcee[_0x3fec09(0x1b2)]=_0x34b391,_0x56dcee[_0x3fec09(0x177)]=_0xe88155;const _0xffff0e=await _0x56dcee[_0x3fec09(0x173)]();console[_0x3fec09(0x1ab)](_0xffff0e);const _0x47550d=await warehouse[_0x3fec09(0x152)]({'name':_0xeff60d,'room':_0x36787a});_0xffff0e[_0x3fec09(0x1a1)]['forEach'](_0x273079=>{var _0x33ef73=_0x3fec09;if(_0x273079['to_quantity']>0x0){const _0x265732=_0x47550d[_0x33ef73(0x1d9)]['map'](_0x9f0b0e=>{var _0x4f4719=_0x33ef73;_0x9f0b0e[_0x4f4719(0x14f)]==_0x273079[_0x4f4719(0x14f)]&&_0x9f0b0e[_0x4f4719(0x147)]==_0x273079[_0x4f4719(0x1b0)]&&_0x9f0b0e[_0x4f4719(0x143)]==_0x273079[_0x4f4719(0x118)]&&_0x9f0b0e[_0x4f4719(0x133)]==_0x273079[_0x4f4719(0x171)]&&_0x9f0b0e[_0x4f4719(0x1e9)]==_0x273079[_0x4f4719(0x186)]&&_0x9f0b0e[_0x4f4719(0x11a)]==_0x273079[_0x4f4719(0x1c3)]&&_0x9f0b0e[_0x4f4719(0x1d7)]==_0x273079[_0x4f4719(0x19b)]&&(_0x9f0b0e['product_stock']=parseInt(_0x9f0b0e[_0x4f4719(0x10d)])-parseInt(_0x273079[_0x4f4719(0x193)]));});}}),await _0x47550d[_0x3fec09(0x173)]();const _0x4f39a9=await warehouse[_0x3fec09(0x152)]({'name':_0x4b7120,'room':_0x3ee680});_0xffff0e['product'][_0x3fec09(0x1d1)](_0x150d99=>{var _0x3ddd10=_0x3fec09;if(_0x150d99[_0x3ddd10(0x193)]>0x0){var _0x1030c3=0x0;const _0x256fc5=_0x4f39a9['product_details'][_0x3ddd10(0x157)](_0x365d2a=>{var _0x36fec6=_0x3ddd10;_0x365d2a['product_name']==_0x150d99[_0x36fec6(0x14f)]&&_0x365d2a['floorlevel']==_0x150d99[_0x36fec6(0x1ba)]&&_0x365d2a[_0x36fec6(0x143)]==_0x150d99[_0x36fec6(0x125)]&&_0x365d2a[_0x36fec6(0x133)]==_0x150d99[_0x36fec6(0x112)]&&_0x365d2a[_0x36fec6(0x1e9)]==_0x150d99[_0x36fec6(0x1a9)]&&_0x365d2a[_0x36fec6(0x11a)]==_0x150d99[_0x36fec6(0x11a)]&&_0x365d2a[_0x36fec6(0x1d7)]==_0x150d99[_0x36fec6(0x1d7)]&&(_0x365d2a[_0x36fec6(0x10d)]=parseInt(_0x365d2a[_0x36fec6(0x10d)])+parseInt(_0x150d99['to_quantity']),_0x1030c3++);});_0x1030c3=='0'&&(_0x4f39a9['product_details']=_0x4f39a9['product_details'][_0x3ddd10(0x1ed)]({'product_name':_0x150d99[_0x3ddd10(0x14f)],'product_stock':_0x150d99[_0x3ddd10(0x193)],'bay':_0x150d99['to_bay'],'bin':_0x150d99[_0x3ddd10(0x112)],'type':_0x150d99[_0x3ddd10(0x125)],'floorlevel':_0x150d99[_0x3ddd10(0x1ba)],'storage':_0x150d99[_0x3ddd10(0x1d7)],'rack':_0x150d99[_0x3ddd10(0x11a)],'product_code':_0x150d99['product_code'],'primary_code':_0x150d99[_0x3ddd10(0x1a0)],'secondary_code':_0x150d99[_0x3ddd10(0x122)],'maxProducts':_0x150d99[_0x3ddd10(0x106)],'storage':_0x150d99[_0x3ddd10(0x1d7)],'rack':_0x150d99[_0x3ddd10(0x11a)]}));}}),await _0x4f39a9[_0x3fec09(0x173)](),_0x4f9327[_0x3fec09(0x1b6)]('success','Transfer\x20Edit\x20Successfully'),_0x5792bc[_0x3fec09(0x139)](_0x3fec09(0x1c2));}catch(_0x4579e2){console[_0x3fec09(0x1ab)](_0x4579e2);}}),router[a0_0x2ce349(0x17b)](a0_0x2ce349(0x10f),async(_0x205105,_0x18fbaf)=>{var _0x59c95d=a0_0x2ce349;const {FromWareHouse:_0x1f2419,FromRoom:_0x4c62f2,ToWarehouse:_0x46b3c1,ToRoom:_0x586d2d,primary_code:_0x34a5dd,Roomslist:_0x31b9fd}=_0x205105[_0x59c95d(0x19e)],_0x21d3af=_0x31b9fd['split'](','),_0x4d94f5=[];async function _0x5db343(_0xd84dde){var _0x13f4c9=_0x59c95d;const _0x2cdec8=await warehouse[_0x13f4c9(0x13f)]([{'$match':{'name':_0x1f2419,'room':_0xd84dde}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x34a5dd}},{'$group':{'_id':_0x13f4c9(0x140),'name':{'$first':_0x13f4c9(0x1b8)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x13f4c9(0x12f)},'product_code':{'$first':_0x13f4c9(0x19a)},'level':{'$first':_0x13f4c9(0x17a)},'isle':{'$first':_0x13f4c9(0x195)},'type':{'$first':_0x13f4c9(0x104)},'pallet':{'$first':_0x13f4c9(0x190)},'unit':{'$first':_0x13f4c9(0x154)},'secondary_unit':{'$first':_0x13f4c9(0x188)},'storage':{'$first':_0x13f4c9(0x1c6)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x13f4c9(0x141)},'production_date':{'$first':_0x13f4c9(0x168)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x13f4c9(0x1d5)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x13f4c9(0x115)},'maxProducts':{'$first':_0x13f4c9(0x1b5)},'invoice_product':{'$first':_0x13f4c9(0x131)}}}]),_0x4c3863=await warehouse['aggregate']([{'$match':{'name':_0x1f2419,'room':_0xd84dde}},{'$unwind':_0x13f4c9(0x1db)},{'$match':{'product_details.secondary_code':_0x34a5dd}},{'$group':{'_id':_0x13f4c9(0x140),'name':{'$first':_0x13f4c9(0x1b8)},'instock':{'$first':_0x13f4c9(0x1e1)},'primary_code':{'$first':_0x13f4c9(0x1c1)},'secondary_code':{'$first':_0x13f4c9(0x12f)},'product_code':{'$first':_0x13f4c9(0x19a)},'level':{'$first':_0x13f4c9(0x17a)},'isle':{'$first':_0x13f4c9(0x195)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x13f4c9(0x190)},'unit':{'$first':_0x13f4c9(0x154)},'secondary_unit':{'$first':_0x13f4c9(0x188)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x13f4c9(0x119)},'expiry_date':{'$first':_0x13f4c9(0x141)},'production_date':{'$first':_0x13f4c9(0x168)},'batch_code':{'$first':_0x13f4c9(0x135)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x13f4c9(0x115)},'maxProducts':{'$first':_0x13f4c9(0x1b5)},'invoice_product':{'$first':_0x13f4c9(0x131)}}}]);if(_0x2cdec8['length']>0x0)_0x4d94f5['push'](_0x2cdec8);else _0x4c3863[_0x13f4c9(0x105)]>0x0&&_0x4d94f5['push'](_0x4c3863);}const _0x153f9b=_0x21d3af[_0x59c95d(0x157)](_0x11bb6=>_0x5db343(_0x11bb6));await Promise['all'](_0x153f9b),_0x18fbaf['json'](_0x4d94f5);}),router[a0_0x2ce349(0x17b)]('/barcode_scanner2',async(_0x34c88e,_0xcfecd6)=>{var _0x3d0d1c=a0_0x2ce349;try{const {FromWareHouse:_0x2cad8b,FromRoom:_0x30ebc5,ToWarehouse:_0x2a45ef,ToRoom:_0x1c7843,secondary_code:_0x2dcc0c}=_0x34c88e['body'],_0x1a5349=await warehouse['aggregate']([{'$match':{'name':_0x2cad8b}},{'$unwind':_0x3d0d1c(0x1db)},{'$match':{'product_details.secondary_code':_0x2dcc0c}},{'$group':{'_id':_0x3d0d1c(0x140),'name':{'$first':_0x3d0d1c(0x1b8)},'primary_code':{'$first':_0x3d0d1c(0x1c1)},'secondary_code':{'$first':_0x3d0d1c(0x12f)},'product_code':{'$first':_0x3d0d1c(0x19a)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x3d0d1c(0x1ad)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x3d0d1c(0x137)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x3d0d1c(0x154)}}}]);_0xcfecd6[_0x3d0d1c(0x1ea)](0xc8)[_0x3d0d1c(0x15e)](_0x1a5349);}catch(_0x102676){_0xcfecd6[_0x3d0d1c(0x1ea)](0x194)[_0x3d0d1c(0x15e)]({'message':_0x102676[_0x3d0d1c(0x1de)]});}}),router[a0_0x2ce349(0x17b)](a0_0x2ce349(0x1b4),async(_0x18fdcb,_0x148d98)=>{var _0x90ae33=a0_0x2ce349;try{const {FromWareHouse:_0x4a5429,FromRoom:_0xbd92d1,ToWarehouse:_0x3fb111,ToRoom:_0x3f4a8d,product_code:_0x26c336}=_0x18fdcb[_0x90ae33(0x19e)],_0x35cba9=await warehouse[_0x90ae33(0x13f)]([{'$match':{'name':_0x4a5429}},{'$unwind':_0x90ae33(0x1db)},{'$match':{'product_details.product_code':_0x26c336}},{'$group':{'_id':_0x90ae33(0x140),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x90ae33(0x1c1)},'secondary_code':{'$first':_0x90ae33(0x12f)},'product_code':{'$first':_0x90ae33(0x19a)},'instock':{'$first':_0x90ae33(0x1e1)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x90ae33(0x137)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x90ae33(0x1b5)},'unit':{'$first':_0x90ae33(0x154)}}}]);_0x148d98[_0x90ae33(0x1ea)](0xc8)[_0x90ae33(0x15e)](_0x35cba9);}catch(_0x58c0a1){_0x148d98[_0x90ae33(0x1ea)](0x194)[_0x90ae33(0x15e)]({'message':_0x58c0a1[_0x90ae33(0x1de)]});}}),router[a0_0x2ce349(0x17b)](a0_0x2ce349(0x1ac),async(_0x2a9294,_0xa82910)=>{var _0x3db987=a0_0x2ce349;const {level:_0x1eb429,isle:_0x3cbb02,pallet:_0x4c651e,warehouses:_0x5a196d,room:_0x1891c7}=_0x2a9294['body'];try{const _0x3273e6=await warehouse[_0x3db987(0x13f)]([{'$match':{'name':_0x5a196d,'room':_0x1891c7}},{'$unwind':_0x3db987(0x1db)},{'$match':{'product_details.level':parseInt(_0x1eb429),'product_details.isle':_0x3cbb02,'product_details.pallet':parseInt(_0x4c651e)}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3db987(0x1e1)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x3db987(0x137)},'pallet':{'$first':_0x3db987(0x103)},'maxProducts':{'$first':_0x3db987(0x1b5)}}}]);_0xa82910[_0x3db987(0x1ea)](0xc8)[_0x3db987(0x15e)](_0x3273e6);}catch(_0x283b4c){_0xa82910[_0x3db987(0x1ea)](0x194)[_0x3db987(0x15e)]({'message':_0x283b4c[_0x3db987(0x1de)]});}}),module[a0_0x2ce349(0x130)]=router;