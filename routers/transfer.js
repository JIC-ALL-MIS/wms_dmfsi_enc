function a0_0x1008(_0x24eae0,_0x11f3b8){var _0xd739f6=a0_0xd739();return a0_0x1008=function(_0x100807,_0xe6c5ca){_0x100807=_0x100807-0x17b;var _0x4cae24=_0xd739f6[_0x100807];return _0x4cae24;},a0_0x1008(_0x24eae0,_0x11f3b8);}var a0_0x5278c0=a0_0x1008;function a0_0xd739(){var _0x3bc9cf=['French','success','/transfer/preview/','getFullYear','from_room_name','toString','Rack\x20C','from_floorlevel','9716730FtVfWP','port','</thead>','note','</tr>','RMSEmail','image','message','getMonth','params','then','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','from_bin','Return\x20Rooms','../public/language/languages.json','host','product_details','from_rack','bay','to_prod_isle','log','from_bay','to_warehouse','finalize','Shelves','Rack\x20B','$product_details.storage','11EjNXJZ','There\x27s\x20a\x20error\x20in\x20this\x20transaction','concat','from_prod_qty','Transfer\x20Edit\x20Successfully','To_invoice','$product_details.secondary_unit','$room','date','random','render','staff','$name','Portuguese','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','from_quantity','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','to_prod_pallet','get','add_transfer','$product_details.production_date','forEach','storage','logo','unit','<h2>\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','slice','aggregate','Arabic\x20(ae)','to_prod_qty','$isAllowEdit','from_rak','primary_code','primary_unit','prod_name','product_code','product_name','English\x20(US)','ToRoomAssigned','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','Email\x20sent\x20successfully','catch','</h5>','Rack\x20A','product_stock','to_floorlevel','nodemailer','<hr\x20class=\x22my-3\x22>','flash','to_invoice','all','$date','870GgqPZG','/upload/','$product_details.maxPerUnit','Receiving\x20Area','user','errors','/picking_list/PDF_transfer_rm/','_id','</head><body>','$product_details.type','</td>','maxperunit','/barcode_scanner','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','batch_code','Chinese','An\x20error\x20occurred.','/view','edit_transfer','from_invoice','</tbody>','Error\x20Occurs','save','$product_details.product_stock','filter','to_quantity','$product_details.primary_code','from_prod_isle','string','master','exports','$product_details.isle','922144IreHcN','<div>','password','54089KajZPE','json','site_title','45HYXKpe','English','invoice','from_prod_level','$product_details.bay','length','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','prod_cat','Hindi','Transfer\x20Mail','$product_details._id','find','14yQMSoH','Enabled','post','/transfer/view','1270216IkKOwP','<tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','type','to_bay','findOne','role','/barcode_scanner3','</span>','<!DOCTYPE\x20html>','$product_details.product_code','from_warehouse','/../public','$product_details.level','warehouse','/barcode_scanner2','error','secondary_code','3475790wNxxME','/CheckingWarehouse','Rack\x20F','to_room_name','from_types','TRF-','Rack\x20D','\x20Order\x20Date\x20:\x20','$product_details.batch_code','$from_warehouse','$product_details.unit','</table>','$product_details.maxProducts','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','Portuguese\x20(BR)','$product_details.rack','$product_details','Rack\x20E','Logo.png','to_prod_level','<strong>\x20Regards\x20</strong>','maxProducts','</div>','24194616tpGTvB','push','$product_details.floorlevel','sendMail','expiry_date','$product_details.product_name','from_prod_pallet','to_types','to_room','email','../middleware/auth','Product\x20Transfer\x20successfully','Ambient','findById','rack','to_bin','Arabic','$product.to_room_name','from_storage','$product_details.pallet','German','status','<h5\x20style=\x22text-align:\x20left;\x22>','bin','True','getDate','map','language','49947cxSojG','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','updateOne','rak','Floor','floorlevel','<html><head><title></title>','Raw\x20Materials','max_per_unit','$product.from_room_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','production_date','Spanish','RoomAssigned','$product_details.expiry_date','/view/add_transfer','$_id','New_Qty_Converted','redirect','product_code3','\x20</h2>','4OUrGny','body','secondary_unit','$product','../models/all_models','express','$product_details.secondary_code','Level','<span\x20style=\x22float:\x20right;\x22>','An\x20error\x20occurred\x20while\x20saving\x20data.','MaxStocks_data2','product','/view/:id','createTransport','$invoice','/preview/:id','DRY\x20STORAGE','floor','$product_details.bin'];a0_0xd739=function(){return _0x3bc9cf;};return a0_0xd739();}(function(_0x31988a,_0x1ce8eb){var _0x240bda=a0_0x1008,_0x2fe73e=_0x31988a();while(!![]){try{var _0x1b05eb=-parseInt(_0x240bda(0x246))/0x1+parseInt(_0x240bda(0x242))/0x2*(parseInt(_0x240bda(0x18f))/0x3)+parseInt(_0x240bda(0x1a4))/0x4*(parseInt(_0x240bda(0x258))/0x5)+-parseInt(_0x240bda(0x210))/0x6*(parseInt(_0x240bda(0x233))/0x7)+-parseInt(_0x240bda(0x230))/0x8*(parseInt(_0x240bda(0x236))/0x9)+parseInt(_0x240bda(0x1bf))/0xa*(parseInt(_0x240bda(0x1da))/0xb)+parseInt(_0x240bda(0x26f))/0xc;if(_0x1b05eb===_0x1ce8eb)break;else _0x2fe73e['push'](_0x2fe73e['shift']());}catch(_0x97f3c6){_0x2fe73e['push'](_0x2fe73e['shift']());}}}(a0_0xd739,0xcb46d));const express=require(a0_0x5278c0(0x1a9)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x5278c0(0x1a8)),auth=require(a0_0x5278c0(0x17d)),users=require(a0_0x5278c0(0x1cd)),nodemailer=require(a0_0x5278c0(0x20a));router['get'](a0_0x5278c0(0x221),auth,async(_0x2918df,_0x467ba3)=>{var _0x458818=a0_0x5278c0;try{const {username:_0x36efad,email:_0x228fec,role:_0x24d9d6}=_0x2918df[_0x458818(0x214)],_0x5ebcc3=_0x2918df[_0x458818(0x214)],_0x1630eb=await profile['findOne']({'email':_0x5ebcc3[_0x458818(0x17c)]}),_0x555ac4=await master_shop[_0x458818(0x241)]();console[_0x458818(0x1d3)](_0x458818(0x22d),_0x555ac4);let _0x1e0f55;if(_0x5ebcc3[_0x458818(0x24c)]==_0x458818(0x1e5)){const _0x2f5c2c=await staff['findOne']({'email':_0x5ebcc3[_0x458818(0x17c)]});_0x1e0f55=await transfers[_0x458818(0x241)]({'from_warehouse':_0x2f5c2c[_0x458818(0x254)]});}else _0x1e0f55=await transfers[_0x458818(0x1f7)]([{'$unwind':_0x458818(0x1a7)},{'$group':{'_id':_0x458818(0x19f),'invoice':{'$first':_0x458818(0x1b2)},'date':{'$first':_0x458818(0x20f)},'from_warehouse':{'$first':_0x458818(0x261)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x458818(0x198)},'to_room_name':{'$addToSet':_0x458818(0x184)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x458818(0x1fa)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x555ac4[0x0][_0x458818(0x18e)]==_0x458818(0x201)){var _0x528d59=users[_0x458818(0x237)];console[_0x458818(0x1d3)](_0x528d59);}else{if(_0x555ac4[0x0][_0x458818(0x18e)]==_0x458818(0x23e))var _0x528d59=users[_0x458818(0x23e)];else{if(_0x555ac4[0x0][_0x458818(0x18e)]=='German')var _0x528d59=users['German'];else{if(_0x555ac4[0x0][_0x458818(0x18e)]=='Spanish')var _0x528d59=users[_0x458818(0x19b)];else{if(_0x555ac4[0x0][_0x458818(0x18e)]==_0x458818(0x1b7))var _0x528d59=users[_0x458818(0x1b7)];else{if(_0x555ac4[0x0]['language']==_0x458818(0x266))var _0x528d59=users[_0x458818(0x1e7)];else{if(_0x555ac4[0x0][_0x458818(0x18e)]==_0x458818(0x21f))var _0x528d59=users['Chinese'];else{if(_0x555ac4[0x0]['language']==_0x458818(0x1f8))var _0x528d59=users[_0x458818(0x183)];}}}}}}}_0x467ba3['render']('transfer',{'success':_0x2918df[_0x458818(0x20c)](_0x458818(0x1b8)),'errors':_0x2918df[_0x458818(0x20c)](_0x458818(0x215)),'role':_0x5ebcc3,'profile':_0x1630eb,'master_shop':_0x555ac4,'transfer':_0x1e0f55,'language':_0x528d59});}catch(_0x462450){console[_0x458818(0x1d3)](_0x462450);}});async function getRandom8DigitNumber(){var _0x126aec=a0_0x5278c0;const _0x1e0ca2=0x989680,_0x538af9=0x5f5e0ff,_0x39e960=Math[_0x126aec(0x1b5)](Math[_0x126aec(0x1e3)]()*(_0x538af9-_0x1e0ca2+0x1))+_0x1e0ca2;var _0x56d4b2;const _0xfa13f2=await transfers['findOne']({'invoice':_0x126aec(0x25d)+_0x39e960});return _0xfa13f2&&_0xfa13f2[_0x126aec(0x23b)]>0x0?_0x56d4b2=_0x126aec(0x25d)+_0x39e960:_0x56d4b2=_0x126aec(0x25d)+_0x39e960,_0x56d4b2;}router['get']('/view/add_transfer',auth,async(_0x1f1326,_0x278504)=>{var _0xfc1329=a0_0x5278c0;try{const {username:_0x1f5d2f,email:_0x7d8ef6,role:_0xcbf389}=_0x1f1326[_0xfc1329(0x214)],_0x5719bc=_0x1f1326[_0xfc1329(0x214)],_0x336f34=await profile[_0xfc1329(0x24b)]({'email':_0x5719bc[_0xfc1329(0x17c)]}),_0x27ae6e=await master_shop[_0xfc1329(0x241)]();console[_0xfc1329(0x1d3)]('master',_0x27ae6e);let _0x99f337;if(_0x5719bc[_0xfc1329(0x24c)]=='staff'){const _0x363b06=await staff['findOne']({'email':_0x5719bc[_0xfc1329(0x17c)]});_0x99f337=await warehouse[_0xfc1329(0x1f7)]([{'$match':{'status':_0xfc1329(0x243),'name':_0x363b06[_0xfc1329(0x254)],'warehouse_category':_0xfc1329(0x196)}},{'$group':{'_id':'$name','name':{'$first':_0xfc1329(0x1e6)}}}]);}else _0x99f337=await warehouse['aggregate']([{'$match':{'status':_0xfc1329(0x243),'warehouse_category':_0xfc1329(0x196)}},{'$group':{'_id':_0xfc1329(0x1e6),'name':{'$first':_0xfc1329(0x1e6)}}}]);var _0x373ea4=[_0xfc1329(0x17f),'Enclosed',_0xfc1329(0x1cc)];const _0xf55746=await transfers[_0xfc1329(0x241)]({}),_0x1f88af=_0xf55746[_0xfc1329(0x23b)]+0x1,_0x3d244d='TRF-'+_0x1f88af[_0xfc1329(0x1bc)]()['padStart'](0x5,'0');if(_0x27ae6e[0x0][_0xfc1329(0x18e)]==_0xfc1329(0x201)){var _0x9cab26=users[_0xfc1329(0x237)];console['log'](_0x9cab26);}else{if(_0x27ae6e[0x0][_0xfc1329(0x18e)]==_0xfc1329(0x23e))var _0x9cab26=users[_0xfc1329(0x23e)];else{if(_0x27ae6e[0x0][_0xfc1329(0x18e)]=='German')var _0x9cab26=users[_0xfc1329(0x187)];else{if(_0x27ae6e[0x0]['language']==_0xfc1329(0x19b))var _0x9cab26=users[_0xfc1329(0x19b)];else{if(_0x27ae6e[0x0]['language']==_0xfc1329(0x1b7))var _0x9cab26=users[_0xfc1329(0x1b7)];else{if(_0x27ae6e[0x0][_0xfc1329(0x18e)]==_0xfc1329(0x266))var _0x9cab26=users[_0xfc1329(0x1e7)];else{if(_0x27ae6e[0x0][_0xfc1329(0x18e)]==_0xfc1329(0x21f))var _0x9cab26=users[_0xfc1329(0x21f)];else{if(_0x27ae6e[0x0][_0xfc1329(0x18e)]=='Arabic\x20(ae)')var _0x9cab26=users[_0xfc1329(0x183)];}}}}}}}const _0x11c69a=getRandom8DigitNumber();_0x11c69a[_0xfc1329(0x1c9)](_0x7f665b=>{var _0x1c6d95=_0xfc1329;_0x278504[_0x1c6d95(0x1e4)](_0x1c6d95(0x1ed),{'success':_0x1f1326[_0x1c6d95(0x20c)]('success'),'errors':_0x1f1326[_0x1c6d95(0x20c)](_0x1c6d95(0x215)),'role':_0x5719bc,'profile':_0x336f34,'master_shop':_0x27ae6e,'warehouse':_0x99f337,'language':_0x9cab26,'rooms_data':_0x373ea4,'invoice':_0x7f665b});})[_0xfc1329(0x205)](_0xd67433=>{var _0x4818b1=_0xfc1329;_0x1f1326[_0x4818b1(0x20c)](_0x4818b1(0x215),_0x4818b1(0x1db)),_0x278504['redirect'](_0x4818b1(0x245));});}catch(_0x20c38f){console[_0xfc1329(0x1d3)](_0x20c38f);}}),router[a0_0x5278c0(0x244)](a0_0x5278c0(0x19e),auth,async(_0x51273f,_0x196998)=>{var _0x58413=a0_0x5278c0;try{console[_0x58413(0x1d3)](_0x51273f[_0x58413(0x1a5)]);const {date:_0xca6226,from_warehouse:_0x4a500e,FromRoom_name:_0x3b6fe1,to_warehouse:_0x3ab7c8,ToRoom_name:_0x5c0779,prod_name:_0x46cffe,from_prod_qty:_0x5c641e,from_prod_level:_0x2070ce,from_prod_isle:_0x3ac933,from_prod_pallet:_0x5da352,to_prod_qty:_0x4cf89f,to_prod_level:_0x566225,to_prod_isle:_0x29a036,to_prod_pallet:_0x27a53c,primary_code:_0x1ab213,secondary_code:_0x4de41e,product_code3:_0x48b5ce,note:_0x1f79b5,MaxStocks_data2:_0x299d51,invoice:_0x4a9ba0,expiry_date:_0x52d77c}=_0x51273f[_0x58413(0x1a5)];if(typeof _0x46cffe==_0x58413(0x22c))var _0x416a82=[_0x51273f['body'][_0x58413(0x1fe)]],_0x5a041d=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x1dd)]],_0x68383e=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x239)]],_0xb477ad=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x1a0)]],_0x9b2820=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x26b)]],_0xae88f=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x1fc)]],_0x4bc2c5=[_0x51273f['body'][_0x58413(0x257)]],_0x50b65f=[_0x51273f[_0x58413(0x1a5)]['product_code3']],_0x4f8d78=[_0x51273f['body'][_0x58413(0x1ae)]],_0xb2cbf1=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x1fd)]],_0x8b459f=[_0x51273f[_0x58413(0x1a5)]['secondary_unit']],_0x57a555=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x21e)]],_0x4305de=[_0x51273f['body'][_0x58413(0x273)]],_0x1ad099=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x197)]],_0x15b9e9=[_0x51273f['body'][_0x58413(0x19a)]],_0x20bec1=[_0x51273f['body'][_0x58413(0x23d)]],_0x3086be=[_0x51273f['body']['RoomAssigned']],_0x568900=[_0x51273f[_0x58413(0x1a5)][_0x58413(0x202)]],_0x183e04=[_0x51273f[_0x58413(0x1a5)]['from_invoice']],_0x426e01=[_0x51273f['body'][_0x58413(0x20d)]];else var _0x416a82=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x1fe)]],_0x5a041d=[..._0x51273f[_0x58413(0x1a5)]['from_prod_qty']],_0x68383e=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x239)]],_0xb477ad=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x1a0)]],_0x9b2820=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x26b)]],_0xae88f=[..._0x51273f['body'][_0x58413(0x1fc)]],_0x4bc2c5=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x257)]],_0x50b65f=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x1a2)]],_0x4f8d78=[..._0x51273f['body'][_0x58413(0x1ae)]],_0xb2cbf1=[..._0x51273f[_0x58413(0x1a5)]['primary_unit']],_0x8b459f=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x1a6)]],_0x57a555=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x21e)]],_0x4305de=[..._0x51273f['body']['expiry_date']],_0x1ad099=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x197)]],_0x15b9e9=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x19a)]],_0x20bec1=[..._0x51273f['body'][_0x58413(0x23d)]],_0x3086be=[..._0x51273f['body'][_0x58413(0x19c)]],_0x568900=[..._0x51273f[_0x58413(0x1a5)][_0x58413(0x202)]],_0x183e04=[..._0x51273f['body'][_0x58413(0x223)]],_0x426e01=[..._0x51273f['body']['to_invoice']];const _0x13b98a=_0x416a82[_0x58413(0x18d)](_0x11e9a5=>{return _0x11e9a5={'product_name':_0x11e9a5};});_0x5a041d[_0x58413(0x1ef)]((_0x1b5109,_0x3e409c)=>{var _0x45e4c2=_0x58413;_0x13b98a[_0x3e409c][_0x45e4c2(0x1e9)]=_0x1b5109;}),_0x183e04[_0x58413(0x1ef)]((_0x32a37e,_0x5acd67)=>{_0x13b98a[_0x5acd67]['from_invoice']=_0x32a37e;}),_0x426e01[_0x58413(0x1ef)]((_0x32bfc1,_0x53c7f0)=>{var _0x2c951d=_0x58413;_0x13b98a[_0x53c7f0][_0x2c951d(0x1df)]=_0x32bfc1;}),_0x68383e[_0x58413(0x1ef)]((_0x225110,_0x46010c)=>{var _0x3d2c54=_0x58413;_0x3086be[_0x3d2c54(0x1ef)]((_0x17ff14,_0x5c9a4a)=>{var _0x58b158=_0x3d2c54;if(_0x17ff14==_0x58b158(0x213)&&_0x46010c==_0x5c9a4a){var _0x3f8f5c=_0x225110['slice'](0x3);_0x13b98a[_0x46010c][_0x58b158(0x185)]=_0x225110[0x0],_0x13b98a[_0x46010c][_0x58b158(0x1d0)]=_0x225110[0x1],_0x13b98a[_0x46010c]['from_bay']=0x0,_0x13b98a[_0x46010c]['from_bin']=0x0,_0x13b98a[_0x46010c]['from_types']=_0x58b158(0x193),_0x13b98a[_0x46010c]['from_floorlevel']=_0x3f8f5c;}else{if(_0x17ff14==_0x58b158(0x1d7)&&_0x46010c==_0x5c9a4a){var _0x3f8f5c=_0x225110['slice'](0x3);_0x13b98a[_0x46010c][_0x58b158(0x185)]=_0x225110[0x0],_0x13b98a[_0x46010c][_0x58b158(0x1d0)]=_0x225110[0x1],_0x13b98a[_0x46010c]['from_bay']=0x0,_0x13b98a[_0x46010c][_0x58b158(0x1cb)]=0x0,_0x13b98a[_0x46010c][_0x58b158(0x25c)]='Floor',_0x13b98a[_0x46010c][_0x58b158(0x1be)]=_0x225110[0x5];}else{if(_0x46010c==_0x5c9a4a){var _0x10761e;if(_0x225110[0x4]=='L')_0x10761e=_0x58b158(0x1ab);else _0x225110[0x4]=='F'&&(_0x10761e=_0x58b158(0x193));_0x13b98a[_0x46010c]['from_storage']=_0x225110[0x0],_0x13b98a[_0x46010c][_0x58b158(0x1d0)]=_0x225110[0x1],_0x13b98a[_0x46010c][_0x58b158(0x1d4)]=_0x225110[0x2],_0x13b98a[_0x46010c]['from_bin']=_0x225110[0x3],_0x13b98a[_0x46010c]['from_types']=_0x10761e,_0x13b98a[_0x46010c][_0x58b158(0x1be)]=_0x225110[0x5];}}}});}),_0xb477ad[_0x58413(0x1ef)]((_0x4b9796,_0x41b7b1)=>{var _0x304baa=_0x58413;_0x13b98a[_0x41b7b1][_0x304baa(0x229)]=_0x4b9796;}),_0x9b2820[_0x58413(0x1ef)]((_0x22e7ef,_0x3d07b6)=>{_0x568900['forEach']((_0x3db710,_0x16b40d)=>{var _0x393adb=a0_0x1008;if(_0x3db710=='Receiving\x20Area'&&_0x3d07b6==_0x16b40d){var _0x210451=_0x22e7ef[_0x393adb(0x1f6)](0x3);_0x13b98a[_0x3d07b6][_0x393adb(0x1f0)]=_0x22e7ef[0x0],_0x13b98a[_0x3d07b6][_0x393adb(0x181)]=_0x22e7ef[0x1],_0x13b98a[_0x3d07b6][_0x393adb(0x24a)]=0x0,_0x13b98a[_0x3d07b6][_0x393adb(0x182)]=0x0,_0x13b98a[_0x3d07b6][_0x393adb(0x276)]=_0x393adb(0x193),_0x13b98a[_0x3d07b6][_0x393adb(0x209)]=_0x210451;}else{if(_0x3db710==_0x393adb(0x1d7)&&_0x3d07b6==_0x16b40d){var _0x210451=_0x22e7ef['slice'](0x3);_0x13b98a[_0x3d07b6][_0x393adb(0x1f0)]=_0x22e7ef[0x0],_0x13b98a[_0x3d07b6][_0x393adb(0x181)]=_0x22e7ef[0x1],_0x13b98a[_0x3d07b6][_0x393adb(0x24a)]=0x0,_0x13b98a[_0x3d07b6][_0x393adb(0x182)]=0x0,_0x13b98a[_0x3d07b6][_0x393adb(0x276)]='Floor',_0x13b98a[_0x3d07b6][_0x393adb(0x209)]=_0x22e7ef[0x5];}else{if(_0x3d07b6==_0x16b40d){var _0x6ca788;if(_0x22e7ef[0x4]=='L')_0x6ca788='Level';else _0x22e7ef[0x4]=='F'&&(_0x6ca788='Floor');_0x13b98a[_0x3d07b6][_0x393adb(0x1f0)]=_0x22e7ef[0x0],_0x13b98a[_0x3d07b6]['rack']=_0x22e7ef[0x1],_0x13b98a[_0x3d07b6][_0x393adb(0x24a)]=_0x22e7ef[0x2],_0x13b98a[_0x3d07b6][_0x393adb(0x182)]=_0x22e7ef[0x3],_0x13b98a[_0x3d07b6]['to_types']=_0x6ca788,_0x13b98a[_0x3d07b6][_0x393adb(0x209)]=_0x22e7ef[0x5];}}}});}),_0xae88f[_0x58413(0x1ef)]((_0x19b032,_0x110529)=>{var _0x168688=_0x58413;_0x13b98a[_0x110529][_0x168688(0x1fc)]=_0x19b032;}),_0x4bc2c5[_0x58413(0x1ef)]((_0x4c9eeb,_0x5f0925)=>{var _0x1feb20=_0x58413;_0x13b98a[_0x5f0925][_0x1feb20(0x257)]=_0x4c9eeb;}),_0x50b65f[_0x58413(0x1ef)]((_0x2f3a9f,_0x3c3aac)=>{_0x13b98a[_0x3c3aac]['product_code']=_0x2f3a9f;}),_0x4f8d78[_0x58413(0x1ef)]((_0x32a72b,_0x32c5de)=>{_0x13b98a[_0x32c5de]['maxProducts']=_0x32a72b;}),_0xb2cbf1[_0x58413(0x1ef)]((_0xe8fdcc,_0x142690)=>{var _0x55c5d8=_0x58413;_0x13b98a[_0x142690][_0x55c5d8(0x1f2)]=_0xe8fdcc;}),_0x8b459f['forEach']((_0x1bb9d4,_0x38a77b)=>{var _0x53031b=_0x58413;_0x13b98a[_0x38a77b][_0x53031b(0x1a6)]=_0x1bb9d4;}),_0x57a555[_0x58413(0x1ef)]((_0x26aa04,_0x458600)=>{_0x13b98a[_0x458600]['batch_code']=_0x26aa04;}),_0x4305de[_0x58413(0x1ef)]((_0x49fae4,_0x35331b)=>{var _0x3196d9=_0x58413;_0x13b98a[_0x35331b][_0x3196d9(0x273)]=_0x49fae4;}),_0x1ad099[_0x58413(0x1ef)]((_0x53b5bc,_0x230eae)=>{_0x13b98a[_0x230eae]['maxperunit']=_0x53b5bc;}),_0x15b9e9[_0x58413(0x1ef)]((_0x35f22a,_0x35c4cb)=>{_0x13b98a[_0x35c4cb]['production_date']=_0x35f22a;}),_0x20bec1[_0x58413(0x1ef)]((_0x93f2fe,_0x1ee5d5)=>{var _0x23bdb6=_0x58413;_0x13b98a[_0x1ee5d5][_0x23bdb6(0x23d)]=_0x93f2fe;}),_0x3086be[_0x58413(0x1ef)]((_0x59ad21,_0x118509)=>{var _0x45dd90=_0x58413;_0x13b98a[_0x118509][_0x45dd90(0x1bb)]=_0x59ad21;}),_0x568900[_0x58413(0x1ef)]((_0x3ce205,_0x2d8aa6)=>{_0x13b98a[_0x2d8aa6]['to_room_name']=_0x3ce205;});const _0x5b1871=_0x13b98a[_0x58413(0x228)](_0x5e5774=>_0x5e5774[_0x58413(0x229)]!=='0'&&_0x5e5774['to_quantity']!==''||_0x5e5774[_0x58413(0x209)]!=='0'&&_0x5e5774['to_floorlevel']!==''),_0x4e2fa7=new transfers({'date':_0xca6226,'from_warehouse':_0x4a500e,'to_warehouse':_0x3ab7c8,'product':_0x5b1871,'note':_0x1f79b5,'invoice':_0x4a9ba0}),_0xcc7d29=await _0x4e2fa7['save']();_0x51273f['flash']('success',_0x58413(0x17e)),_0x196998[_0x58413(0x1a1)](_0x58413(0x1b9)+_0xcc7d29[_0x58413(0x217)]);}catch(_0x4dbab5){console[_0x58413(0x1d3)](_0x4dbab5),_0x196998['status'](0xc8)[_0x58413(0x234)]({'errorMessage':_0x4dbab5[_0x58413(0x1c6)]});}}),router[a0_0x5278c0(0x1ec)](a0_0x5278c0(0x1b3),auth,async(_0x288249,_0x5888db)=>{var _0x519e53=a0_0x5278c0;try{const {username:_0x563788,email:_0x29a539,role:_0x4ef43a}=_0x288249['user'],_0x5b5436=_0x288249[_0x519e53(0x214)],_0x5add61=await profile[_0x519e53(0x24b)]({'email':_0x5b5436['email']}),_0x583fd7=await master_shop['find']();console['log'](_0x519e53(0x22d),_0x583fd7);const _0x401a35=await transfers['findById'](_0x288249[_0x519e53(0x1c8)]['id']);let _0x40e1d0=new Date(_0x401a35[_0x519e53(0x273)]),_0x298f65=('0'+_0x40e1d0[_0x519e53(0x18c)]())[_0x519e53(0x1f6)](-0x2),_0x328da3=('0'+(_0x40e1d0[_0x519e53(0x1c7)]()+0x1))[_0x519e53(0x1f6)](-0x2),_0x1bd1ab=_0x40e1d0[_0x519e53(0x1ba)](),_0x38d350=_0x1bd1ab+'-'+_0x328da3+'-'+_0x298f65,_0x131e91;if(_0x5b5436['role']==_0x519e53(0x1e5)){const _0x58f3ac=await staff[_0x519e53(0x24b)]({'email':_0x5b5436['email']});_0x131e91=await warehouse[_0x519e53(0x241)]({'status':'Enabled','name':_0x58f3ac[_0x519e53(0x254)],'warehouse_category':_0x519e53(0x196)});}else _0x131e91=await warehouse[_0x519e53(0x241)]({'status':_0x519e53(0x243),'warehouse_category':_0x519e53(0x196)});const _0xc3f9f3=await warehouse[_0x519e53(0x1f7)]([{'$match':{'name':_0x401a35[_0x519e53(0x251)]}},{'$unwind':_0x519e53(0x268)},{'$group':{'_id':_0x519e53(0x240),'name':{'$first':_0x519e53(0x274)},'product_stock':{'$first':_0x519e53(0x227)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x519e53(0x271)},'primary_code':{'$first':_0x519e53(0x22a)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x519e53(0x250)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x519e53(0x267)},'expiry_date':{'$first':_0x519e53(0x19d)},'production_date':{'$first':_0x519e53(0x1ee)},'room':{'$first':_0x519e53(0x1e1)}}}]);if(_0x583fd7[0x0][_0x519e53(0x18e)]=='English\x20(US)'){var _0xab6420=users[_0x519e53(0x237)];console[_0x519e53(0x1d3)](_0xab6420);}else{if(_0x583fd7[0x0][_0x519e53(0x18e)]=='Hindi')var _0xab6420=users['Hindi'];else{if(_0x583fd7[0x0][_0x519e53(0x18e)]=='German')var _0xab6420=users[_0x519e53(0x187)];else{if(_0x583fd7[0x0]['language']==_0x519e53(0x19b))var _0xab6420=users[_0x519e53(0x19b)];else{if(_0x583fd7[0x0][_0x519e53(0x18e)]=='French')var _0xab6420=users['French'];else{if(_0x583fd7[0x0][_0x519e53(0x18e)]=='Portuguese\x20(BR)')var _0xab6420=users['Portuguese'];else{if(_0x583fd7[0x0][_0x519e53(0x18e)]==_0x519e53(0x21f))var _0xab6420=users[_0x519e53(0x21f)];else{if(_0x583fd7[0x0][_0x519e53(0x18e)]==_0x519e53(0x1f8))var _0xab6420=users[_0x519e53(0x183)];}}}}}}}_0x5888db[_0x519e53(0x1e4)]('edit_transfer_view',{'success':_0x288249['flash']('success'),'errors':_0x288249[_0x519e53(0x20c)](_0x519e53(0x215)),'role':_0x5b5436,'profile':_0x5add61,'master_shop':_0x583fd7,'warehouse':_0x131e91,'transfer':_0x401a35,'stock':_0xc3f9f3,'language':_0xab6420});}catch(_0x2f9ced){console[_0x519e53(0x1d3)](_0x2f9ced);}}),router[a0_0x5278c0(0x244)]('/preview/:id',auth,async(_0x3ee597,_0x4aa686)=>{var _0x5a3c4c=a0_0x5278c0;try{const _0x1096a9=_0x3ee597[_0x5a3c4c(0x1c8)]['id'],{from_warehouse:_0x49123c,FromRoom_name:_0x483482,to_warehouse:_0x40c01b,ToRoom_name:_0x5e5467}=_0x3ee597[_0x5a3c4c(0x1a5)],_0x5b4e1f=await transfers[_0x5a3c4c(0x180)]({'_id':_0x1096a9}),_0x4a63be=_0x5b4e1f[_0x5a3c4c(0x1af)][_0x5a3c4c(0x18d)](async _0x839a93=>{var _0x49285f=_0x5a3c4c;if(_0x839a93['to_quantity']>0x0){var _0x22b334=await warehouse[_0x49285f(0x24b)]({'name':_0x5b4e1f[_0x49285f(0x251)],'room':_0x839a93[_0x49285f(0x1bb)],'warehouse_category':_0x49285f(0x196)});const _0x5cdcfe=_0x22b334['product_details'][_0x49285f(0x18d)](_0x40a18f=>{var _0x58dff7=_0x49285f;_0x40a18f[_0x58dff7(0x200)]==_0x839a93[_0x58dff7(0x200)]&&_0x40a18f[_0x58dff7(0x194)]==_0x839a93[_0x58dff7(0x1be)]&&_0x40a18f['type']==_0x839a93['from_types']&&_0x40a18f['bin']==_0x839a93[_0x58dff7(0x1cb)]&&_0x40a18f['bay']==_0x839a93[_0x58dff7(0x1d4)]&&_0x40a18f[_0x58dff7(0x181)]==_0x839a93[_0x58dff7(0x1d0)]&&_0x40a18f['storage']==_0x839a93[_0x58dff7(0x185)]&&_0x40a18f['expiry_date']==_0x839a93[_0x58dff7(0x273)]&&_0x40a18f['batch_code']==_0x839a93[_0x58dff7(0x21e)]&&_0x40a18f['production_date']==_0x839a93['production_date']&&_0x40a18f[_0x58dff7(0x238)]==_0x839a93[_0x58dff7(0x223)]&&(_0x40a18f[_0x58dff7(0x208)]=_0x40a18f[_0x58dff7(0x208)]-_0x839a93['to_quantity']);});}return _0x22b334;});Promise[_0x5a3c4c(0x20e)](_0x4a63be)[_0x5a3c4c(0x1c9)](async _0x494886=>{var _0x318826=_0x5a3c4c;try{for(const _0x4adb3f of _0x494886){await _0x4adb3f[_0x318826(0x226)]();}try{const _0x155e69=_0x5b4e1f[_0x318826(0x1af)]['map'](async _0x26f067=>{var _0x43552f=_0x318826;if(_0x26f067['to_quantity']>0x0){var _0x1b2f28=await warehouse[_0x43552f(0x24b)]({'name':_0x5b4e1f[_0x43552f(0x1d5)],'room':_0x26f067[_0x43552f(0x25b)],'warehouse_category':_0x43552f(0x196)}),_0x27dddd=0x0;const _0x3b438a=_0x1b2f28[_0x43552f(0x1cf)][_0x43552f(0x18d)](_0x46eab4=>{var _0x160362=_0x43552f;_0x46eab4['product_name']==_0x26f067[_0x160362(0x200)]&&_0x46eab4['floorlevel']==_0x26f067[_0x160362(0x209)]&&_0x46eab4['type']==_0x26f067[_0x160362(0x276)]&&_0x46eab4[_0x160362(0x18a)]==_0x26f067['to_bin']&&_0x46eab4['bay']==_0x26f067['to_bay']&&_0x46eab4[_0x160362(0x181)]==_0x26f067[_0x160362(0x181)]&&_0x46eab4[_0x160362(0x1f0)]==_0x26f067[_0x160362(0x1f0)]&&_0x46eab4[_0x160362(0x273)]==_0x26f067['expiry_date']&&_0x46eab4[_0x160362(0x21e)]==_0x26f067[_0x160362(0x21e)]&&_0x46eab4[_0x160362(0x19a)]==_0x26f067[_0x160362(0x19a)]&&_0x46eab4[_0x160362(0x238)]==_0x26f067['To_invoice']&&(_0x46eab4[_0x160362(0x208)]=_0x46eab4['product_stock']+_0x26f067[_0x160362(0x229)],_0x27dddd++);});_0x27dddd=='0'&&(_0x1b2f28[_0x43552f(0x1cf)]=_0x1b2f28[_0x43552f(0x1cf)][_0x43552f(0x1dc)]({'product_name':_0x26f067[_0x43552f(0x200)],'product_stock':_0x26f067[_0x43552f(0x229)],'bay':_0x26f067[_0x43552f(0x24a)],'bin':_0x26f067['to_bin'],'type':_0x26f067['to_types'],'floorlevel':_0x26f067[_0x43552f(0x209)],'storage':_0x26f067[_0x43552f(0x1f0)],'rack':_0x26f067[_0x43552f(0x181)],'product_code':_0x26f067['product_code'],'primary_code':_0x26f067[_0x43552f(0x1fc)],'secondary_code':_0x26f067[_0x43552f(0x257)],'maxProducts':_0x26f067['maxProducts'],'storage':_0x26f067[_0x43552f(0x1f0)],'rack':_0x26f067[_0x43552f(0x181)],'expiry_date':_0x26f067['expiry_date'],'maxPerUnit':_0x26f067[_0x43552f(0x21b)],'batch_code':_0x26f067[_0x43552f(0x21e)],'production_date':_0x26f067[_0x43552f(0x19a)]}));}return _0x1b2f28;});Promise['all'](_0x155e69)[_0x318826(0x1c9)](async _0x4b8b2b=>{var _0x221777=_0x318826;try{for(const _0x436732 of _0x4b8b2b){await warehouse[_0x221777(0x191)]({'_id':_0x436732['_id']},{'$addToSet':{'product_details':{'$each':_0x436732['product_details']}}});}_0x5b4e1f[_0x221777(0x1d6)]=_0x221777(0x18b);const _0x2c80e7=await _0x5b4e1f[_0x221777(0x226)](),_0x5d4acd=await master_shop[_0x221777(0x241)](),_0x1be7bd=await email_settings['findOne'](),_0xaa22e1=await supervisor_settings['find']();var _0x45beef=_0x5b4e1f[_0x221777(0x1af)],_0x1c1cc2='',_0x350ec9;for(_0x350ec9 in _0x45beef){_0x1c1cc2+='<tr>'+_0x221777(0x23c)+_0x45beef[_0x350ec9][_0x221777(0x200)]+_0x221777(0x21a)+_0x221777(0x23c)+_0x45beef[_0x350ec9][_0x221777(0x1ff)]+_0x221777(0x21a)+_0x221777(0x23c)+_0x45beef[_0x350ec9][_0x221777(0x229)]+_0x221777(0x21a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x45beef[_0x350ec9]['unit']+_0x221777(0x21a)+_0x221777(0x23c)+_0x45beef[_0x350ec9]['secondary_unit']+'</td>'+_0x221777(0x23c)+_0x5b4e1f['to_warehouse']+_0x221777(0x21a)+_0x221777(0x23c)+_0x45beef[_0x350ec9][_0x221777(0x25b)]+_0x221777(0x21a)+_0x221777(0x23c)+_0x45beef[_0x350ec9]['storage']+_0x45beef[_0x350ec9][_0x221777(0x181)]+_0x45beef[_0x350ec9][_0x221777(0x24a)]+_0x45beef[_0x350ec9][_0x221777(0x182)]+_0x45beef[_0x350ec9][_0x221777(0x276)][0x0]+_0x45beef[_0x350ec9][_0x221777(0x209)]+_0x221777(0x21a),_0x221777(0x1c3);}let _0x4c79b2=nodemailer[_0x221777(0x1b1)]({'host':_0x1be7bd[_0x221777(0x1ce)],'port':Number(_0x1be7bd[_0x221777(0x1c0)]),'secure':![],'auth':{'user':_0x1be7bd['email'],'pass':_0x1be7bd[_0x221777(0x232)]}}),_0x447e79={'from':_0x1be7bd[_0x221777(0x17c)],'to':_0xaa22e1[0x0][_0x221777(0x1c4)],'subject':_0x221777(0x23f),'attachments':[{'filename':_0x221777(0x26a),'path':__dirname+_0x221777(0x252)+_0x221777(0x211)+_0x5d4acd[0x0][_0x221777(0x1c5)],'cid':_0x221777(0x1f1)}],'html':_0x221777(0x24f)+_0x221777(0x195)+_0x221777(0x218)+_0x221777(0x231)+_0x221777(0x190)+'<div>'+_0x221777(0x1ea)+_0x221777(0x26e)+'<div>'+_0x221777(0x1f3)+_0x5d4acd[0x0][_0x221777(0x235)]+_0x221777(0x1a3)+'</div>'+_0x221777(0x26e)+_0x221777(0x20b)+_0x221777(0x231)+_0x221777(0x189)+'\x20Order\x20Number\x20:\x20'+_0x5b4e1f[_0x221777(0x238)]+'\x20'+_0x221777(0x1ac)+_0x221777(0x25f)+_0x5b4e1f[_0x221777(0x1e2)]+'\x20'+_0x221777(0x24e)+_0x221777(0x206)+_0x221777(0x26e)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x221777(0x265)+_0x221777(0x247)+_0x221777(0x199)+_0x221777(0x21d)+_0x221777(0x1f4)+_0x221777(0x248)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x221777(0x1ca)+_0x221777(0x203)+_0x221777(0x1f5)+_0x221777(0x1c3)+_0x221777(0x1c1)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x1c1cc2+'\x20'+_0x221777(0x224)+_0x221777(0x263)+_0x221777(0x231)+_0x221777(0x26c)+'<h5>'+_0x5d4acd[0x0][_0x221777(0x235)]+_0x221777(0x206)+_0x221777(0x26e)+_0x221777(0x26e)+'</body></html>'};_0x4c79b2[_0x221777(0x272)](_0x447e79,function(_0x413229,_0x39273f){var _0x383c9a=_0x221777;_0x413229?(console[_0x383c9a(0x1d3)](_0x413229),console[_0x383c9a(0x1d3)](_0x383c9a(0x225))):console['log'](_0x383c9a(0x204));}),_0x3ee597[_0x221777(0x20c)]('success','Transfer\x20Finalize\x20Successfully'),_0x4aa686[_0x221777(0x1a1)](_0x221777(0x216)+_0x2c80e7[_0x221777(0x217)]);}catch(_0x47a02f){console['error'](_0x47a02f),_0x4aa686[_0x221777(0x188)](0x1f4)[_0x221777(0x234)]({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x47a02f[_0x221777(0x1c6)]});}})[_0x318826(0x205)](_0x3f6a51=>{var _0x4d8439=_0x318826;console[_0x4d8439(0x256)](_0x3f6a51),_0x4aa686[_0x4d8439(0x188)](0x1f4)[_0x4d8439(0x234)]({'Perror':'An\x20error\x20occurred.'});});}catch(_0x534296){_0x4aa686['json'](_0x534296);}}catch(_0x4652c4){console[_0x318826(0x256)](_0x4652c4),_0x4aa686[_0x318826(0x188)](0x1f4)[_0x318826(0x234)]({'Merror':_0x318826(0x1ad),'Message':_0x4652c4[_0x318826(0x1c6)]});}})[_0x5a3c4c(0x205)](_0x3594dd=>{var _0x5b7d90=_0x5a3c4c;console[_0x5b7d90(0x256)](_0x3594dd),_0x4aa686['status'](0x1f4)[_0x5b7d90(0x234)]({'Merror':_0x5b7d90(0x220)});});}catch(_0x51c8b4){console[_0x5a3c4c(0x1d3)](_0x51c8b4);}});function BayBinSelected(_0x3478ba,_0x256a40){var _0xca1ef9=a0_0x5278c0,_0x422c32=[],_0x42847f=[],_0x69a124=[],_0x166ab1=[],_0x200749=[],_0x2ad2f0=[];let _0x53939c=[];if(_0x3478ba==_0xca1ef9(0x1b4))switch(_0x256a40){case _0xca1ef9(0x207):_0x422c32=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x42847f=[0x1,0x2],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x1ab),'Floor'],_0x200749=['D'],_0x2ad2f0=['A'];break;case _0xca1ef9(0x1d8):_0x422c32=[0x6,0x5,0x4,0x3,0x2,0x1],_0x42847f=[0x1,0x2],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=['Level',_0xca1ef9(0x193)],_0x200749=['D'],_0x2ad2f0=['B'];break;case _0xca1ef9(0x1d7):_0x422c32=[0x0],_0x42847f=[0x0],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x193)],_0x200749=['D'],_0x2ad2f0=['S'];break;case'Receiving\x20Area':_0x422c32=[0x0],_0x42847f=[0x0],_0x166ab1=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x69a124=['Floor'],_0x200749=['D'],_0x2ad2f0=['R'];break;}else{if(_0x3478ba=='COLD\x20STORAGE')switch(_0x256a40){case _0xca1ef9(0x207):_0x422c32=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x42847f=['B','F'],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x1ab),_0xca1ef9(0x193)],_0x200749=['C'],_0x2ad2f0=['A'];break;case _0xca1ef9(0x1d8):_0x422c32=[0x5,0x4,0x3,0x2,0x1],_0x42847f=['F','B','S'],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x1ab),_0xca1ef9(0x193)],_0x200749=['C'],_0x2ad2f0=['B'];break;case _0xca1ef9(0x1bd):_0x422c32=[0x1,0x2,0x3,0x4,0x5],_0x42847f=['B','F','S'],_0x166ab1=[0x5,0x4,0x3,0x2,0x1],_0x69a124=[_0xca1ef9(0x1ab),_0xca1ef9(0x193)],_0x200749=['C'],_0x2ad2f0=['C'];break;case _0xca1ef9(0x25e):_0x422c32=[0x5,0x4,0x3,0x2,0x1],_0x42847f=['F','B','S'],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x1ab),_0xca1ef9(0x193)],_0x200749=['C'],_0x2ad2f0=['D'];break;case _0xca1ef9(0x269):_0x422c32=[0x4,0x3,0x2,0x1],_0x42847f=[0x1,0x2],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=[_0xca1ef9(0x1ab),_0xca1ef9(0x193)],_0x200749=['C'],_0x2ad2f0=['E'];break;case _0xca1ef9(0x25a):_0x422c32=[0x1,0x2,0x3],_0x42847f=[0x1,0x2],_0x166ab1=[0x1,0x2,0x3,0x4,0x5],_0x69a124=['Level'],_0x200749=['C'],_0x2ad2f0=['F'];break;}}return{'levels':_0x422c32,'Isle':_0x42847f,'rack':_0x166ab1,'type':_0x69a124,'storage':_0x200749,'rak':_0x2ad2f0};}router['get'](a0_0x5278c0(0x1b0),auth,async(_0x476cc7,_0x7ba5b9)=>{var _0x369c78=a0_0x5278c0;try{const {username:_0x50c7be,email:_0x4264f6,role:_0x1727fa}=_0x476cc7[_0x369c78(0x214)],_0x2827ce=_0x476cc7['user'],_0x382c10=await profile['findOne']({'email':_0x2827ce[_0x369c78(0x17c)]}),_0x50cbb7=await master_shop[_0x369c78(0x241)](),_0x32df2c=await transfers[_0x369c78(0x180)](_0x476cc7['params']['id']);let _0x1e4149;if(_0x2827ce[_0x369c78(0x24c)]==_0x369c78(0x1e5)){const _0x14330e=await staff[_0x369c78(0x24b)]({'email':_0x2827ce[_0x369c78(0x17c)]});_0x1e4149=await warehouse[_0x369c78(0x1f7)]([{'$match':{'status':_0x369c78(0x243),'name':_0x14330e[_0x369c78(0x254)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x369c78(0x1e6),'name':{'$first':_0x369c78(0x1e6)}}}]);}else _0x1e4149=await warehouse['aggregate']([{'$match':{'status':_0x369c78(0x243),'warehouse_category':_0x369c78(0x196)}},{'$group':{'_id':_0x369c78(0x1e6),'name':{'$first':'$name'}}}]);const _0x328e7b=await warehouse['aggregate']([{'$match':{'name':_0x32df2c['from_warehouse'],'warehouse_category':'Raw\x20Materials'}},{'$unwind':'$product_details'},{'$group':{'_id':_0x369c78(0x240),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x369c78(0x227)},'bay':{'$first':_0x369c78(0x23a)},'bin':{'$first':_0x369c78(0x1b6)},'type':{'$first':_0x369c78(0x219)},'floorlevel':{'$first':_0x369c78(0x271)},'primary_code':{'$first':_0x369c78(0x22a)},'secondary_code':{'$first':_0x369c78(0x1aa)},'product_code':{'$first':_0x369c78(0x250)},'storage':{'$first':_0x369c78(0x1d9)},'rack':{'$first':_0x369c78(0x267)},'expiry_date':{'$first':_0x369c78(0x19d)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x369c78(0x1e1)}}}]),_0x1c9b06=await product[_0x369c78(0x241)]({}),_0x1598db=BayBinSelected(_0x32df2c[_0x369c78(0x1d5)],_0x32df2c[_0x369c78(0x17b)]);if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x201)){var _0x170bd3=users[_0x369c78(0x237)];console[_0x369c78(0x1d3)](_0x170bd3);}else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x23e))var _0x170bd3=users[_0x369c78(0x23e)];else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x187))var _0x170bd3=users['German'];else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x19b))var _0x170bd3=users[_0x369c78(0x19b)];else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x1b7))var _0x170bd3=users[_0x369c78(0x1b7)];else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x266))var _0x170bd3=users['Portuguese'];else{if(_0x50cbb7[0x0]['language']==_0x369c78(0x21f))var _0x170bd3=users[_0x369c78(0x21f)];else{if(_0x50cbb7[0x0][_0x369c78(0x18e)]==_0x369c78(0x1f8))var _0x170bd3=users[_0x369c78(0x183)];}}}}}}}_0x7ba5b9[_0x369c78(0x1e4)](_0x369c78(0x222),{'success':_0x476cc7[_0x369c78(0x20c)](_0x369c78(0x1b8)),'errors':_0x476cc7['flash'](_0x369c78(0x215)),'role':_0x2827ce,'profile':_0x382c10,'master_shop':_0x50cbb7,'warehouse':_0x1e4149,'transfer':_0x32df2c,'stock':_0x328e7b,'unit':_0x1c9b06,'language':_0x170bd3});}catch(_0x1e88b3){console[_0x369c78(0x1d3)](_0x1e88b3);}}),router['post'](a0_0x5278c0(0x1b0),auth,async(_0x3587cf,_0x410dec)=>{var _0x241c9c=a0_0x5278c0;try{const _0x32b23e=_0x3587cf[_0x241c9c(0x1c8)]['id'],_0x5e7a30=await transfers[_0x241c9c(0x180)](_0x32b23e);_0x410dec[_0x241c9c(0x234)](_0x3587cf[_0x241c9c(0x1a5)]);return;const {date:_0xfbcb8d,from_warehouse:_0x4aef20,FromRoom_name:_0x128c83,to_warehouse:_0x21e3a9,ToRoom_name:_0x145b89,prod_name:_0x39881b,from_prod_qty:_0x541ac7,from_prod_level:_0x4896ea,from_prod_isle:_0x3d82e1,from_prod_pallet:_0x3974d3,to_prod_qty:_0x8a1e8b,to_prod_level:_0x36fa3a,to_prod_isle:_0x416f93,to_prod_pallet:_0x5e4031,primary_code:_0x36e55b,secondary_code:_0x3dcf03,product_code3:_0x5d6d6c,note:_0x584d00,invoice:_0x1a46be,expiry_date:_0x393d38}=_0x3587cf[_0x241c9c(0x1a5)];if(typeof _0x39881b==_0x241c9c(0x22c))var _0x101787=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1fe)]],_0x5d7dc0=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1dd)]],_0x5af00b=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x239)]],_0x30bef8=[_0x3587cf[_0x241c9c(0x1a5)]['from_prod_isle']],_0x1bf141=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x275)]],_0x156aff=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x25c)]],_0x57a6b4=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1f9)]],_0x5c576d=[_0x3587cf['body'][_0x241c9c(0x26b)]],_0x1e6c87=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1d2)]],_0x35d186=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1eb)]],_0x1d78b0=[_0x3587cf[_0x241c9c(0x1a5)]['to_types']],_0x3ee4b3=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1f0)]],_0x144bc0=[_0x3587cf['body'][_0x241c9c(0x192)]],_0x286445=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1fc)]],_0xde88ae=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x257)]],_0x5e9cd5=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1a2)]],_0x47d33c=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1ae)]],_0x1b57ba=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1f2)]],_0x292c85=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1a6)]],_0xe32e59=[_0x3587cf['body'][_0x241c9c(0x21e)]],_0x192444=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x273)]],_0x19b27e=[_0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x185)]],_0x5cac28=[_0x3587cf['body'][_0x241c9c(0x1fb)]];else var _0x101787=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1fe)]],_0x3ee4b3=[..._0x3587cf[_0x241c9c(0x1a5)]['storage']],_0x144bc0=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x192)]],_0x156aff=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x25c)]],_0x1d78b0=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x276)]],_0x5d7dc0=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1dd)]],_0x5af00b=[..._0x3587cf[_0x241c9c(0x1a5)]['from_prod_level']],_0x30bef8=[..._0x3587cf['body'][_0x241c9c(0x22b)]],_0x1bf141=[..._0x3587cf[_0x241c9c(0x1a5)]['from_prod_pallet']],_0x57a6b4=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1f9)]],_0x5c576d=[..._0x3587cf['body'][_0x241c9c(0x26b)]],_0x1e6c87=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1d2)]],_0x35d186=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1eb)]],_0x286445=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1fc)]],_0xde88ae=[..._0x3587cf[_0x241c9c(0x1a5)]['secondary_code']],_0x5e9cd5=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1a2)]],_0x47d33c=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1ae)]],_0x1b57ba=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1f2)]],_0x292c85=[..._0x3587cf[_0x241c9c(0x1a5)]['secondary_unit']],_0xe32e59=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x21e)]],_0x192444=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x273)]],_0x19b27e=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x185)]],_0x5cac28=[..._0x3587cf[_0x241c9c(0x1a5)][_0x241c9c(0x1fb)]];const _0x58f812=_0x101787[_0x241c9c(0x18d)](_0x544234=>{return _0x544234={'product_name':_0x544234};});_0x5d7dc0[_0x241c9c(0x1ef)]((_0x4daceb,_0x528a1b)=>{_0x58f812[_0x528a1b]['from_quantity']=_0x4daceb;}),_0x5af00b[_0x241c9c(0x1ef)]((_0x1ef5dc,_0x542d59)=>{var _0x138c98=_0x241c9c;_0x58f812[_0x542d59][_0x138c98(0x1d4)]=_0x1ef5dc;}),_0x30bef8['forEach']((_0x2387b8,_0x58a407)=>{var _0x3b64ec=_0x241c9c;_0x58f812[_0x58a407][_0x3b64ec(0x1cb)]=_0x2387b8;}),_0x1bf141[_0x241c9c(0x1ef)]((_0x6612ec,_0x5d3134)=>{var _0x4ec3ff=_0x241c9c;_0x58f812[_0x5d3134][_0x4ec3ff(0x1be)]=_0x6612ec;}),_0x57a6b4[_0x241c9c(0x1ef)]((_0x1c6c77,_0x2ae568)=>{var _0x19e233=_0x241c9c;_0x58f812[_0x2ae568][_0x19e233(0x229)]=_0x1c6c77;}),_0x5c576d[_0x241c9c(0x1ef)]((_0x38f5ab,_0x9c9be2)=>{var _0x55f233=_0x241c9c;_0x58f812[_0x9c9be2][_0x55f233(0x24a)]=_0x38f5ab;}),_0x1e6c87['forEach']((_0x51c0f7,_0x152715)=>{var _0x45277a=_0x241c9c;_0x58f812[_0x152715][_0x45277a(0x182)]=_0x51c0f7;}),_0x35d186[_0x241c9c(0x1ef)]((_0x396876,_0x4be62b)=>{var _0x12696d=_0x241c9c;_0x58f812[_0x4be62b][_0x12696d(0x209)]=_0x396876;}),_0x286445[_0x241c9c(0x1ef)]((_0x383de8,_0x2f8af5)=>{var _0x3ed719=_0x241c9c;_0x58f812[_0x2f8af5][_0x3ed719(0x1fc)]=_0x383de8;}),_0xde88ae[_0x241c9c(0x1ef)]((_0x32a18b,_0x12183a)=>{var _0x42e077=_0x241c9c;_0x58f812[_0x12183a][_0x42e077(0x257)]=_0x32a18b;}),_0x5e9cd5['forEach']((_0x11418c,_0x18dec2)=>{_0x58f812[_0x18dec2]['product_code']=_0x11418c;}),_0x47d33c['forEach']((_0x412976,_0x333ba2)=>{var _0x3306f7=_0x241c9c;_0x58f812[_0x333ba2][_0x3306f7(0x26d)]=_0x412976;}),_0x1b57ba[_0x241c9c(0x1ef)]((_0x9018e8,_0x24ecb2)=>{_0x58f812[_0x24ecb2]['unit']=_0x9018e8;}),_0x292c85[_0x241c9c(0x1ef)]((_0x264e4b,_0x1c96b4)=>{var _0x42af0a=_0x241c9c;_0x58f812[_0x1c96b4][_0x42af0a(0x1a6)]=_0x264e4b;}),_0xe32e59[_0x241c9c(0x1ef)]((_0x4c62c5,_0x2b2b61)=>{var _0xf71627=_0x241c9c;_0x58f812[_0x2b2b61][_0xf71627(0x21e)]=_0x4c62c5;}),_0x192444['forEach']((_0x5346c1,_0x225639)=>{_0x58f812[_0x225639]['expiry_date']=_0x5346c1;}),_0x3ee4b3['forEach']((_0x1a4c4b,_0x4f9899)=>{var _0x4831d4=_0x241c9c;_0x58f812[_0x4f9899][_0x4831d4(0x1f0)]=_0x1a4c4b;}),_0x144bc0[_0x241c9c(0x1ef)]((_0x2b88bb,_0x138b28)=>{var _0x33b66a=_0x241c9c;_0x58f812[_0x138b28][_0x33b66a(0x181)]=_0x2b88bb;}),_0x156aff['forEach']((_0x10481e,_0x3be64d)=>{var _0x2f19d7=_0x241c9c;_0x58f812[_0x3be64d][_0x2f19d7(0x25c)]=_0x10481e;}),_0x1d78b0['forEach']((_0x2f1026,_0x371f15)=>{var _0x13c1f6=_0x241c9c;_0x58f812[_0x371f15][_0x13c1f6(0x276)]=_0x2f1026;}),_0x19b27e[_0x241c9c(0x1ef)]((_0x556145,_0x1275a0)=>{var _0x5adb49=_0x241c9c;_0x58f812[_0x1275a0][_0x5adb49(0x185)]=_0x556145;}),_0x5cac28['forEach']((_0x20336c,_0x44684a)=>{var _0x3819ab=_0x241c9c;_0x58f812[_0x44684a][_0x3819ab(0x1d0)]=_0x20336c;});const _0x2e91bd=_0x58f812['filter'](_0x20bca8=>_0x20bca8[_0x241c9c(0x229)]!=='0'&&_0x20bca8[_0x241c9c(0x229)]!==''||_0x20bca8['to_floorlevel']!=='0'&&_0x20bca8[_0x241c9c(0x209)]!=='');var _0x2528e2=0x0;_0x2e91bd['forEach'](_0x2a5287=>{var _0x75a6d3=_0x241c9c;parseInt(_0x2a5287[_0x75a6d3(0x1e9)])<parseInt(_0x2a5287[_0x75a6d3(0x229)])&&_0x2528e2++;});if(_0x2528e2!=0x0)return _0x3587cf[_0x241c9c(0x20c)](_0x241c9c(0x215),_0x241c9c(0x1e8)),_0x410dec[_0x241c9c(0x1a1)]('back');const _0x519d6c=await warehouse['findOne']({'name':_0x5e7a30[_0x241c9c(0x251)],'room':_0x5e7a30['from_room']});_0x5e7a30[_0x241c9c(0x1af)]['forEach'](_0x2988b7=>{var _0x31001c=_0x241c9c;if(_0x2988b7[_0x31001c(0x229)]>0x0){const _0x4ddacc=_0x519d6c[_0x31001c(0x1cf)][_0x31001c(0x18d)](_0x7289a7=>{var _0x16e895=_0x31001c;_0x7289a7[_0x16e895(0x200)]==_0x2988b7[_0x16e895(0x200)]&&_0x7289a7[_0x16e895(0x194)]==_0x2988b7['from_floorlevel']&&_0x7289a7[_0x16e895(0x249)]==_0x2988b7[_0x16e895(0x25c)]&&_0x7289a7[_0x16e895(0x18a)]==_0x2988b7['from_bin']&&_0x7289a7[_0x16e895(0x1d1)]==_0x2988b7[_0x16e895(0x1d4)]&&_0x7289a7[_0x16e895(0x181)]==_0x2988b7[_0x16e895(0x1d0)]&&_0x7289a7['storage']==_0x2988b7[_0x16e895(0x185)]&&(_0x7289a7['product_stock']=parseInt(_0x7289a7['product_stock'])+parseInt(_0x2988b7[_0x16e895(0x229)]));});}}),await _0x519d6c[_0x241c9c(0x226)]();const _0x136be5=await warehouse['findOne']({'name':_0x5e7a30['to_warehouse'],'room':_0x5e7a30[_0x241c9c(0x17b)]});_0x5e7a30[_0x241c9c(0x1af)][_0x241c9c(0x1ef)](_0x239f09=>{var _0x362618=_0x241c9c;if(_0x239f09['to_quantity']>0x0){const _0x5797b1=_0x136be5[_0x362618(0x1cf)][_0x362618(0x18d)](_0x248c86=>{var _0x78fbed=_0x362618;_0x248c86['product_name']==_0x239f09[_0x78fbed(0x200)]&&_0x248c86[_0x78fbed(0x194)]==_0x239f09[_0x78fbed(0x209)]&&_0x248c86['type']==_0x239f09[_0x78fbed(0x276)]&&_0x248c86[_0x78fbed(0x18a)]==_0x239f09['to_bin']&&_0x248c86[_0x78fbed(0x1d1)]==_0x239f09[_0x78fbed(0x24a)]&&_0x248c86[_0x78fbed(0x181)]==_0x239f09[_0x78fbed(0x181)]&&_0x248c86[_0x78fbed(0x1f0)]==_0x239f09[_0x78fbed(0x1f0)]&&(_0x248c86['product_stock']=parseInt(_0x248c86[_0x78fbed(0x208)])-parseInt(_0x239f09[_0x78fbed(0x229)]));});}}),await _0x136be5[_0x241c9c(0x226)](),_0x5e7a30['date']=_0xfbcb8d,_0x5e7a30['from_warehouse']=_0x4aef20,_0x5e7a30[_0x241c9c(0x1d5)]=_0x21e3a9,_0x5e7a30[_0x241c9c(0x1af)]=_0x2e91bd,_0x5e7a30[_0x241c9c(0x1c2)]=_0x584d00,_0x5e7a30[_0x241c9c(0x238)]=_0x1a46be;const _0x3ab687=await _0x5e7a30['save']();console[_0x241c9c(0x1d3)](_0x3ab687);const _0x334f98=await warehouse[_0x241c9c(0x24b)]({'name':_0x4aef20,'room':_0x128c83});_0x3ab687[_0x241c9c(0x1af)][_0x241c9c(0x1ef)](_0x52187a=>{var _0x152ddf=_0x241c9c;if(_0x52187a[_0x152ddf(0x229)]>0x0){const _0x323ae1=_0x334f98[_0x152ddf(0x1cf)][_0x152ddf(0x18d)](_0x557dcb=>{var _0x2d36a2=_0x152ddf;_0x557dcb[_0x2d36a2(0x200)]==_0x52187a['product_name']&&_0x557dcb[_0x2d36a2(0x194)]==_0x52187a[_0x2d36a2(0x1be)]&&_0x557dcb[_0x2d36a2(0x249)]==_0x52187a[_0x2d36a2(0x25c)]&&_0x557dcb[_0x2d36a2(0x18a)]==_0x52187a['from_bin']&&_0x557dcb['bay']==_0x52187a['from_bay']&&_0x557dcb[_0x2d36a2(0x181)]==_0x52187a['from_rack']&&_0x557dcb[_0x2d36a2(0x1f0)]==_0x52187a[_0x2d36a2(0x185)]&&(_0x557dcb[_0x2d36a2(0x208)]=parseInt(_0x557dcb[_0x2d36a2(0x208)])-parseInt(_0x52187a[_0x2d36a2(0x229)]));});}}),await _0x334f98[_0x241c9c(0x226)]();const _0x159d23=await warehouse[_0x241c9c(0x24b)]({'name':_0x21e3a9,'room':_0x145b89});_0x3ab687['product']['forEach'](_0x490188=>{var _0x28abca=_0x241c9c;if(_0x490188[_0x28abca(0x229)]>0x0){var _0xdb81f=0x0;const _0x3d2d5c=_0x159d23[_0x28abca(0x1cf)][_0x28abca(0x18d)](_0x86d24f=>{var _0x5c81a3=_0x28abca;_0x86d24f[_0x5c81a3(0x200)]==_0x490188[_0x5c81a3(0x200)]&&_0x86d24f[_0x5c81a3(0x194)]==_0x490188[_0x5c81a3(0x209)]&&_0x86d24f[_0x5c81a3(0x249)]==_0x490188[_0x5c81a3(0x276)]&&_0x86d24f[_0x5c81a3(0x18a)]==_0x490188[_0x5c81a3(0x182)]&&_0x86d24f[_0x5c81a3(0x1d1)]==_0x490188[_0x5c81a3(0x24a)]&&_0x86d24f[_0x5c81a3(0x181)]==_0x490188[_0x5c81a3(0x181)]&&_0x86d24f['storage']==_0x490188[_0x5c81a3(0x1f0)]&&(_0x86d24f['product_stock']=parseInt(_0x86d24f['product_stock'])+parseInt(_0x490188[_0x5c81a3(0x229)]),_0xdb81f++);});_0xdb81f=='0'&&(_0x159d23[_0x28abca(0x1cf)]=_0x159d23[_0x28abca(0x1cf)][_0x28abca(0x1dc)]({'product_name':_0x490188['product_name'],'product_stock':_0x490188[_0x28abca(0x229)],'bay':_0x490188[_0x28abca(0x24a)],'bin':_0x490188[_0x28abca(0x182)],'type':_0x490188['to_types'],'floorlevel':_0x490188[_0x28abca(0x209)],'storage':_0x490188[_0x28abca(0x1f0)],'rack':_0x490188[_0x28abca(0x181)],'product_code':_0x490188[_0x28abca(0x1ff)],'primary_code':_0x490188[_0x28abca(0x1fc)],'secondary_code':_0x490188[_0x28abca(0x257)],'maxProducts':_0x490188[_0x28abca(0x26d)],'storage':_0x490188[_0x28abca(0x1f0)],'rack':_0x490188[_0x28abca(0x181)]}));}}),await _0x159d23[_0x241c9c(0x226)](),_0x3587cf[_0x241c9c(0x20c)](_0x241c9c(0x1b8),_0x241c9c(0x1de)),_0x410dec[_0x241c9c(0x1a1)](_0x241c9c(0x245));}catch(_0x517abd){console[_0x241c9c(0x1d3)](_0x517abd);}}),router['post'](a0_0x5278c0(0x21c),async(_0x13ea12,_0x2edb5c)=>{var _0x4b63e5=a0_0x5278c0;const {FromWareHouse:_0x50d631,FromRoom:_0x1a6d06,ToWarehouse:_0x540be5,ToRoom:_0x2f0630,primary_code:_0xe515e6,Roomslist:_0x3b1020}=_0x13ea12[_0x4b63e5(0x1a5)],_0x539067=_0x3b1020['split'](','),_0x523ddd=[];async function _0x4f05f6(_0x439020){var _0x5802d3=_0x4b63e5;const _0x5a4a11=await warehouse[_0x5802d3(0x1f7)]([{'$match':{'name':_0x50d631,'room':_0x439020}},{'$unwind':_0x5802d3(0x268)},{'$match':{'product_details.primary_code':_0xe515e6}},{'$group':{'_id':_0x5802d3(0x240),'name':{'$first':_0x5802d3(0x274)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x5802d3(0x22a)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5802d3(0x250)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x5802d3(0x1b6)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x5802d3(0x271)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x5802d3(0x1e0)},'storage':{'$first':_0x5802d3(0x1d9)},'rack':{'$first':_0x5802d3(0x267)},'expiry_date':{'$first':_0x5802d3(0x19d)},'production_date':{'$first':_0x5802d3(0x1ee)},'batch_code':{'$first':_0x5802d3(0x260)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x5802d3(0x1e1)},'maxProducts':{'$first':_0x5802d3(0x264)}}}]),_0x20e12f=await warehouse[_0x5802d3(0x1f7)]([{'$match':{'name':_0x50d631,'room':_0x439020}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0xe515e6}},{'$group':{'_id':_0x5802d3(0x240),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x5802d3(0x227)},'primary_code':{'$first':_0x5802d3(0x22a)},'secondary_code':{'$first':_0x5802d3(0x1aa)},'product_code':{'$first':_0x5802d3(0x250)},'level':{'$first':_0x5802d3(0x23a)},'isle':{'$first':_0x5802d3(0x1b6)},'type':{'$first':_0x5802d3(0x219)},'pallet':{'$first':_0x5802d3(0x271)},'unit':{'$first':_0x5802d3(0x262)},'secondary_unit':{'$first':_0x5802d3(0x1e0)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5802d3(0x267)},'expiry_date':{'$first':_0x5802d3(0x19d)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x5802d3(0x260)},'maxPerUnit':{'$first':_0x5802d3(0x212)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x5802d3(0x264)}}}]);if(_0x5a4a11[_0x5802d3(0x23b)]>0x0)_0x523ddd['push'](_0x5a4a11);else _0x20e12f[_0x5802d3(0x23b)]>0x0&&_0x523ddd[_0x5802d3(0x270)](_0x20e12f);}const _0x108e56=_0x539067['map'](_0x118dbd=>_0x4f05f6(_0x118dbd));await Promise['all'](_0x108e56),_0x2edb5c[_0x4b63e5(0x234)](_0x523ddd);}),router['post'](a0_0x5278c0(0x255),async(_0x4a5dd9,_0xfe55af)=>{var _0x17f95d=a0_0x5278c0;try{const {FromWareHouse:_0x4a098e,FromRoom:_0x579bc2,ToWarehouse:_0x24f325,ToRoom:_0x27cee0,secondary_code:_0x76d35}=_0x4a5dd9[_0x17f95d(0x1a5)],_0x32a5bc=await warehouse[_0x17f95d(0x1f7)]([{'$match':{'name':_0x4a098e}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x76d35}},{'$group':{'_id':_0x17f95d(0x240),'name':{'$first':_0x17f95d(0x274)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x17f95d(0x1aa)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x17f95d(0x227)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x17f95d(0x22f)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x17f95d(0x264)},'unit':{'$first':'$product_details.unit'}}}]);_0xfe55af[_0x17f95d(0x188)](0xc8)[_0x17f95d(0x234)](_0x32a5bc);}catch(_0x4bc9a3){_0xfe55af['status'](0x194)['json']({'message':_0x4bc9a3[_0x17f95d(0x1c6)]});}}),router[a0_0x5278c0(0x244)](a0_0x5278c0(0x24d),async(_0x7d2b9b,_0x4f946c)=>{var _0x18b117=a0_0x5278c0;try{const {FromWareHouse:_0x202284,FromRoom:_0x1bde65,ToWarehouse:_0x502d37,ToRoom:_0x36a74e,product_code:_0x14cfab}=_0x7d2b9b[_0x18b117(0x1a5)],_0x1f7819=await warehouse['aggregate']([{'$match':{'name':_0x202284}},{'$unwind':_0x18b117(0x268)},{'$match':{'product_details.product_code':_0x14cfab}},{'$group':{'_id':_0x18b117(0x240),'name':{'$first':_0x18b117(0x274)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x18b117(0x1aa)},'product_code':{'$first':_0x18b117(0x250)},'instock':{'$first':_0x18b117(0x227)},'warehouse':{'$first':_0x18b117(0x1e6)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x18b117(0x22f)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x18b117(0x264)},'unit':{'$first':'$product_details.unit'}}}]);_0x4f946c[_0x18b117(0x188)](0xc8)[_0x18b117(0x234)](_0x1f7819);}catch(_0x3c42e0){_0x4f946c[_0x18b117(0x188)](0x194)[_0x18b117(0x234)]({'message':_0x3c42e0['message']});}}),router[a0_0x5278c0(0x244)](a0_0x5278c0(0x259),async(_0x37eaa9,_0x14c8e9)=>{var _0x13872c=a0_0x5278c0;const {level:_0x1bff2a,isle:_0x921aa2,pallet:_0x1c5f30,warehouses:_0x243e2e,room:_0x1e1394}=_0x37eaa9[_0x13872c(0x1a5)];try{const _0x8ed99a=await warehouse['aggregate']([{'$match':{'name':_0x243e2e,'room':_0x1e1394}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x1bff2a),'product_details.isle':_0x921aa2,'product_details.pallet':parseInt(_0x1c5f30)}},{'$group':{'_id':_0x13872c(0x240),'name':{'$first':_0x13872c(0x274)},'product_stock':{'$first':_0x13872c(0x227)},'level':{'$first':_0x13872c(0x253)},'isle':{'$first':_0x13872c(0x22f)},'pallet':{'$first':_0x13872c(0x186)},'maxProducts':{'$first':_0x13872c(0x264)}}}]);_0x14c8e9[_0x13872c(0x188)](0xc8)[_0x13872c(0x234)](_0x8ed99a);}catch(_0xd10ab){_0x14c8e9[_0x13872c(0x188)](0x194)['json']({'message':_0xd10ab[_0x13872c(0x1c6)]});}}),module[a0_0x5278c0(0x22e)]=router;