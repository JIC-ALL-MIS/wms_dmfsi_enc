function a0_0xd1e7(){var _0x5b185d=['$product_details.level','$room','Transfer\x20Finalize\x20Successfully','$product_details.unit','to_bin','port','7090zdaoRu','product','/upload/','render','secondary_code','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.invoice','maxperunit','$product_details.storage','secondary_unit','from_warehouse','$product_details.maxProducts','batch_code','from_floorlevel','post','bay','from_invoice','from_prod_pallet','string','from_bay','to_invoice','160936jdmVfM','to_prod_qty','concat','$product_details.rack','flash','error','$invoice','to_types','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','</head><body>','toString','</table>','$product.to_room_name','/barcode_scanner2','get','French','bin','to_bay','to_prod_level','from_prod_qty','id_transaction_id','/transfer/view','floorlevel','message','length','$product_details.product_stock','$product_details.bin','/barcode_scanner3','product_stock','Shelves','primary_unit','rack','<table\x20style=\x22width:\x20100%\x20!important;\x22>','/view','product_code','from_quantity','DRY\x20STORAGE','$product_details.secondary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','8217szHvKi','maxProducts','forEach','1395iARZZp','Transfer\x20Edit\x20Successfully','$to_warehouse','params','prod_cat','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','\x20Order\x20Date\x20:\x20','German','_id','Level','success','Receiving\x20Area','catch','<span\x20style=\x22float:\x20right;\x22>','$from_warehouse','find','$product_details.production_date','Logo.png','log','express','$product_details.bay','English\x20(US)','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','$isAllowEdit','<hr\x20class=\x22my-3\x22>','nodemailer','edit_transfer','../public/language/languages.json','padStart','<div>','Enabled','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','<strong>\x20Regards\x20</strong>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Email\x20sent\x20successfully','all','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','product_details','map','from_prod_level','findById','$product_details.pallet','getMonth','save','</tr>','from_prod_isle','Router','rak','$product_details.product_code','Hindi','RoomAssigned','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','to_warehouse','</thead>','70iFdRWP','redirect','$product_details.expiry_date','date','/view/:id','storage','to_room_name','json','here','$product_details.primary_code','from_types','note','from_room','$date','<tbody\x20style=\x22text-align:\x20center;\x22>','<tr>','getFullYear','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.maxPerUnit','\x20<>\x20','$product_details.product_name','6890226Dlpiur','status','staff','to_prod_pallet','$product_details._id','split','password','expiry_date','New_Qty_Converted','</td>','Rack\x20E','warehouse','type','Portuguese','from_room_name','\x20Order\x20Number\x20:\x20','host','Raw\x20Materials','Portuguese\x20(BR)','from_rak','$product_details.secondary_unit','push','getDate','Rack\x20D','../middleware/auth','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','Rack\x20B','$product_details.isle','Arabic','$name','$product_details.batch_code','$finalize','$product_details','/preview/:id','Rack\x20A','email','MaxStocks_data2','Rack\x20C','body','</h5>','updateOne','Arabic\x20(ae)','316372WIBXow','from_storage','Product\x20Transfer\x20successfully','to_floorlevel','3azaRQA','user','</div>','from_bin','findOne','production_date','Chinese','from_rack','site_title','/CheckingWarehouse','to_prod_isle','$product_details.floorlevel','True','role','unit','invoice','errors','aggregate','Spanish','<html><head><title></title>','Enclosed','Floor','then','product_name','TRF-','ToRoomAssigned','to_quantity','Rack\x20F','language','/transfer/preview/','id_transaction','22502832wmIuWO','slice','filter','to_room','An\x20error\x20occurred.','product_code3','/view/add_transfer','$product_details.type','master','</tbody>','Error\x20Occurs','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','6068335HXCmnY','Return\x20Rooms','Transfer\x20Mail','245ZydwCr','To_invoice','</span>','primary_code'];a0_0xd1e7=function(){return _0x5b185d;};return a0_0xd1e7();}var a0_0x3a5f2b=a0_0x2c6c;(function(_0x83dcc1,_0xc772d1){var _0x5784c4=a0_0x2c6c,_0x351772=_0x83dcc1();while(!![]){try{var _0x27507b=-parseInt(_0x5784c4(0x1c1))/0x1*(-parseInt(_0x5784c4(0x1fa))/0x2)+-parseInt(_0x5784c4(0x14d))/0x3*(parseInt(_0x5784c4(0x149))/0x4)+-parseInt(_0x5784c4(0x178))/0x5+-parseInt(_0x5784c4(0x20f))/0x6+-parseInt(_0x5784c4(0x17b))/0x7*(-parseInt(_0x5784c4(0x19a))/0x8)+parseInt(_0x5784c4(0x1c4))/0x9*(parseInt(_0x5784c4(0x185))/0xa)+parseInt(_0x5784c4(0x16c))/0xb;if(_0x27507b===_0xc772d1)break;else _0x351772['push'](_0x351772['shift']());}catch(_0x569fe6){_0x351772['push'](_0x351772['shift']());}}}(a0_0xd1e7,0xac676));const express=require(a0_0x3a5f2b(0x1d7)),app=express(),router=express[a0_0x3a5f2b(0x1f2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x3a5f2b(0x227)),users=require(a0_0x3a5f2b(0x1df)),nodemailer=require(a0_0x3a5f2b(0x1dd));router[a0_0x3a5f2b(0x1a8)](a0_0x3a5f2b(0x1bb),auth,async(_0x4e1549,_0x532b09)=>{var _0x3cac4c=a0_0x3a5f2b;try{const {username:_0x21783a,email:_0x195ea1,role:_0x4ebfbb}=_0x4e1549[_0x3cac4c(0x14e)],_0x57786c=_0x4e1549[_0x3cac4c(0x14e)],_0xde961f=await profile[_0x3cac4c(0x151)]({'email':_0x57786c[_0x3cac4c(0x232)]}),_0x10ba1b=await master_shop['find']();console[_0x3cac4c(0x1d6)](_0x3cac4c(0x174),_0x10ba1b);let _0x63b9c;if(_0x57786c['role']==_0x3cac4c(0x211)){const _0x193f3e=await staff['findOne']({'email':_0x57786c[_0x3cac4c(0x232)]});_0x63b9c=await transfers['find']({'from_warehouse':_0x193f3e[_0x3cac4c(0x21a)]});}else _0x63b9c=await transfers[_0x3cac4c(0x15e)]([{'$unwind':'$product'},{'$group':{'_id':'$_id','invoice':{'$first':_0x3cac4c(0x1a0)},'date':{'$first':_0x3cac4c(0x207)},'from_warehouse':{'$first':_0x3cac4c(0x1d2)},'to_warehouse':{'$first':_0x3cac4c(0x1c6)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':_0x3cac4c(0x1a6)},'finalize':{'$first':_0x3cac4c(0x22e)},'isAllowEdit':{'$first':_0x3cac4c(0x1db)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x10ba1b[0x0][_0x3cac4c(0x169)]=='English\x20(US)'){var _0x32d1b1=users['English'];console[_0x3cac4c(0x1d6)](_0x32d1b1);}else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x1f5))var _0x32d1b1=users[_0x3cac4c(0x1f5)];else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x1cb))var _0x32d1b1=users[_0x3cac4c(0x1cb)];else{if(_0x10ba1b[0x0]['language']==_0x3cac4c(0x15f))var _0x32d1b1=users[_0x3cac4c(0x15f)];else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x1a9))var _0x32d1b1=users[_0x3cac4c(0x1a9)];else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x221))var _0x32d1b1=users[_0x3cac4c(0x21c)];else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x153))var _0x32d1b1=users[_0x3cac4c(0x153)];else{if(_0x10ba1b[0x0][_0x3cac4c(0x169)]==_0x3cac4c(0x148))var _0x32d1b1=users[_0x3cac4c(0x22b)];}}}}}}}_0x532b09[_0x3cac4c(0x188)]('transfer',{'success':_0x4e1549[_0x3cac4c(0x19e)](_0x3cac4c(0x1ce)),'errors':_0x4e1549[_0x3cac4c(0x19e)](_0x3cac4c(0x15d)),'role':_0x57786c,'profile':_0xde961f,'master_shop':_0x10ba1b,'transfer':_0x63b9c,'language':_0x32d1b1});}catch(_0x221cf6){console['log'](_0x221cf6);}});async function getRandom8DigitNumber(){var _0xb851d3=a0_0x3a5f2b;const _0x31b9e8=0x989680,_0x3c63bd=0x5f5e0ff,_0x3cb05f=Math['floor'](Math['random']()*(_0x3c63bd-_0x31b9e8+0x1))+_0x31b9e8;var _0x554cca;const _0x26690c=await transfers[_0xb851d3(0x151)]({'invoice':_0xb851d3(0x165)+_0x3cb05f});return _0x26690c&&_0x26690c[_0xb851d3(0x1b2)]>0x0?_0x554cca='TRF-'+_0x3cb05f:_0x554cca=_0xb851d3(0x165)+_0x3cb05f,_0x554cca;}router['get'](a0_0x3a5f2b(0x172),auth,async(_0x128731,_0x2068b9)=>{var _0x14c5fd=a0_0x3a5f2b;try{const {username:_0x4e6830,email:_0x2795d6,role:_0x1b7620}=_0x128731[_0x14c5fd(0x14e)],_0x5a32a3=_0x128731[_0x14c5fd(0x14e)],_0x541f46=await profile[_0x14c5fd(0x151)]({'email':_0x5a32a3[_0x14c5fd(0x232)]}),_0x36089a=await master_shop[_0x14c5fd(0x1d3)]();console[_0x14c5fd(0x1d6)]('master',_0x36089a);let _0x59cf02;if(_0x5a32a3['role']==_0x14c5fd(0x211)){const _0x2879cd=await staff[_0x14c5fd(0x151)]({'email':_0x5a32a3['email']});_0x59cf02=await warehouse[_0x14c5fd(0x15e)]([{'$match':{'status':_0x14c5fd(0x1e2),'name':_0x2879cd[_0x14c5fd(0x21a)],'warehouse_category':_0x14c5fd(0x220)}},{'$group':{'_id':_0x14c5fd(0x22c),'name':{'$first':_0x14c5fd(0x22c)}}}]);}else _0x59cf02=await warehouse[_0x14c5fd(0x15e)]([{'$match':{'status':_0x14c5fd(0x1e2),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x14c5fd(0x22c)}}}]);var _0x457197=['Ambient',_0x14c5fd(0x161),_0x14c5fd(0x179)];const _0x410960=await transfers[_0x14c5fd(0x1d3)]({}),_0x5e57a7=_0x410960[_0x14c5fd(0x1b2)]+0x1,_0x4a9f8e=_0x14c5fd(0x165)+_0x5e57a7[_0x14c5fd(0x1a4)]()[_0x14c5fd(0x1e0)](0x5,'0');if(_0x36089a[0x0][_0x14c5fd(0x169)]=='English\x20(US)'){var _0x4457c7=users['English'];console[_0x14c5fd(0x1d6)](_0x4457c7);}else{if(_0x36089a[0x0][_0x14c5fd(0x169)]==_0x14c5fd(0x1f5))var _0x4457c7=users['Hindi'];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]==_0x14c5fd(0x1cb))var _0x4457c7=users[_0x14c5fd(0x1cb)];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]=='Spanish')var _0x4457c7=users[_0x14c5fd(0x15f)];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]==_0x14c5fd(0x1a9))var _0x4457c7=users[_0x14c5fd(0x1a9)];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]=='Portuguese\x20(BR)')var _0x4457c7=users[_0x14c5fd(0x21c)];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]==_0x14c5fd(0x153))var _0x4457c7=users[_0x14c5fd(0x153)];else{if(_0x36089a[0x0][_0x14c5fd(0x169)]==_0x14c5fd(0x148))var _0x4457c7=users[_0x14c5fd(0x22b)];}}}}}}}const _0x3d9f50=getRandom8DigitNumber();_0x3d9f50['then'](_0x558598=>{var _0x32e705=_0x14c5fd;_0x2068b9[_0x32e705(0x188)]('add_transfer',{'success':_0x128731['flash'](_0x32e705(0x1ce)),'errors':_0x128731[_0x32e705(0x19e)]('errors'),'role':_0x5a32a3,'profile':_0x541f46,'master_shop':_0x36089a,'warehouse':_0x59cf02,'language':_0x4457c7,'rooms_data':_0x457197,'invoice':_0x558598});})['catch'](_0x5f4ca4=>{var _0x11864d=_0x14c5fd;_0x128731[_0x11864d(0x19e)](_0x11864d(0x15d),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x2068b9[_0x11864d(0x1fb)](_0x11864d(0x1af));});}catch(_0x2b4c68){console[_0x14c5fd(0x1d6)](_0x2b4c68);}}),router[a0_0x3a5f2b(0x193)](a0_0x3a5f2b(0x172),auth,async(_0x430771,_0x3dcbca)=>{var _0x5f4d52=a0_0x3a5f2b;try{console[_0x5f4d52(0x1d6)](_0x430771[_0x5f4d52(0x235)]);const {date:_0x58db0b,from_warehouse:_0xe7eeeb,FromRoom_name:_0x1e032f,to_warehouse:_0x1e4c3b,ToRoom_name:_0x35ab70,prod_name:_0x1a3431,from_prod_qty:_0x3f67b5,from_prod_level:_0x2ff69b,from_prod_isle:_0x27c470,from_prod_pallet:_0x5610ae,to_prod_qty:_0x3970d8,to_prod_level:_0x4dcd53,to_prod_isle:_0x1570c6,to_prod_pallet:_0x361e33,primary_code:_0x1159c8,secondary_code:_0x57257b,product_code3:_0x3122f9,note:_0xc43b12,MaxStocks_data2:_0x4bdb3e,invoice:_0x493e83,expiry_date:_0x2ec7bf}=_0x430771['body'];if(typeof _0x1a3431==_0x5f4d52(0x197))var _0x1e45cb=[_0x430771[_0x5f4d52(0x235)]['prod_name']],_0x5eeb80=[_0x430771[_0x5f4d52(0x235)]['from_prod_qty']],_0x53296e=[_0x430771['body'][_0x5f4d52(0x1eb)]],_0x46471b=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x217)]],_0x1f4c9c=[_0x430771[_0x5f4d52(0x235)]['to_prod_level']],_0x371305=[_0x430771[_0x5f4d52(0x235)]['primary_code']],_0xe7956=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x189)]],_0x5a2847=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x171)]],_0x5dfc6d=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x233)]],_0x639260=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1b8)]],_0x222f50=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x18e)]],_0x135548=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x191)]],_0x586b0b=[_0x430771[_0x5f4d52(0x235)]['expiry_date']],_0x44960a=[_0x430771[_0x5f4d52(0x235)]['max_per_unit']],_0x1058e5=[_0x430771['body']['production_date']],_0x5b12e2=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1c8)]],_0x3372ad=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1f6)]],_0x1aa4c6=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x166)]],_0x3215c3=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x195)]],_0x45ebbf=[_0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x199)]],_0x1e3fde=[_0x430771[_0x5f4d52(0x235)]['id_transaction']];else var _0x1e45cb=[..._0x430771[_0x5f4d52(0x235)]['prod_name']],_0x5eeb80=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1ad)]],_0x53296e=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1eb)]],_0x46471b=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x217)]],_0x1f4c9c=[..._0x430771[_0x5f4d52(0x235)]['to_prod_level']],_0x371305=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x17e)]],_0xe7956=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x189)]],_0x5a2847=[..._0x430771['body']['product_code3']],_0x5dfc6d=[..._0x430771['body'][_0x5f4d52(0x233)]],_0x639260=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1b8)]],_0x222f50=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x18e)]],_0x135548=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x191)]],_0x586b0b=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x216)]],_0x44960a=[..._0x430771[_0x5f4d52(0x235)]['max_per_unit']],_0x1058e5=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x152)]],_0x5b12e2=[..._0x430771['body']['prod_cat']],_0x3372ad=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x1f6)]],_0x1aa4c6=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x166)]],_0x3215c3=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x195)]],_0x45ebbf=[..._0x430771['body'][_0x5f4d52(0x199)]],_0x1e3fde=[..._0x430771[_0x5f4d52(0x235)][_0x5f4d52(0x16b)]];const _0x5913b6=_0x1e45cb['map'](_0x5f3584=>{return _0x5f3584={'product_name':_0x5f3584};});_0x5eeb80[_0x5f4d52(0x1c3)]((_0x2bd0f8,_0xed4346)=>{var _0x31717f=_0x5f4d52;_0x5913b6[_0xed4346][_0x31717f(0x1bd)]=_0x2bd0f8;}),_0x3215c3[_0x5f4d52(0x1c3)]((_0x45bd96,_0x1ffd63)=>{_0x5913b6[_0x1ffd63]['from_invoice']=_0x45bd96;}),_0x45ebbf[_0x5f4d52(0x1c3)]((_0x5b4a08,_0x1d98fa)=>{var _0x2418f0=_0x5f4d52;_0x5913b6[_0x1d98fa][_0x2418f0(0x17c)]=_0x5b4a08;}),_0x1e3fde[_0x5f4d52(0x1c3)]((_0x3144a0,_0x2cc113)=>{var _0x5cff6e=_0x5f4d52;_0x5913b6[_0x2cc113][_0x5cff6e(0x1ae)]=_0x3144a0;}),_0x53296e[_0x5f4d52(0x1c3)]((_0x5e95e4,_0x174d7c)=>{_0x3372ad['forEach']((_0x11dc55,_0x15e4fb)=>{var _0x42111a=a0_0x2c6c;if(_0x11dc55==_0x42111a(0x1cf)&&_0x174d7c==_0x15e4fb){var _0x4eaf3d=_0x5e95e4[_0x42111a(0x16d)](0x3);_0x5913b6[_0x174d7c][_0x42111a(0x14a)]=_0x5e95e4[0x0],_0x5913b6[_0x174d7c][_0x42111a(0x154)]=_0x5e95e4[0x1],_0x5913b6[_0x174d7c][_0x42111a(0x198)]=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x150)]=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x204)]='Floor',_0x5913b6[_0x174d7c][_0x42111a(0x192)]=_0x4eaf3d;}else{if(_0x11dc55==_0x42111a(0x1b7)&&_0x174d7c==_0x15e4fb){var _0x4eaf3d=_0x5e95e4[_0x42111a(0x16d)](0x3);_0x5913b6[_0x174d7c][_0x42111a(0x14a)]=_0x5e95e4[0x0],_0x5913b6[_0x174d7c][_0x42111a(0x154)]=_0x5e95e4[0x1],_0x5913b6[_0x174d7c]['from_bay']=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x150)]=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x204)]=_0x42111a(0x162),_0x5913b6[_0x174d7c][_0x42111a(0x192)]=_0x5e95e4[0x5];}else{if(_0x174d7c==_0x15e4fb){if(_0x5e95e4[0x0]=='A'&&_0x5e95e4[0x1]=='L'&&_0x5e95e4[0x2]=='L')console[_0x42111a(0x1d6)](_0x11dc55+_0x42111a(0x20d)+_0x174d7c+_0x42111a(0x20d)+_0x15e4fb+_0x42111a(0x20d)+_0x5e95e4+_0x42111a(0x202)),_0x5913b6[_0x174d7c]['from_storage']=_0x5e95e4[0x0],_0x5913b6[_0x174d7c][_0x42111a(0x154)]=_0x5e95e4[0x1],_0x5913b6[_0x174d7c]['from_bay']=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x150)]=0x0,_0x5913b6[_0x174d7c][_0x42111a(0x204)]=_0x42111a(0x162),_0x5913b6[_0x174d7c][_0x42111a(0x192)]=_0x5e95e4[0x3];else{var _0x1f9788;if(_0x5e95e4[0x4]=='L')_0x1f9788=_0x42111a(0x1cd);else _0x5e95e4[0x4]=='F'&&(_0x1f9788='Floor');_0x5913b6[_0x174d7c][_0x42111a(0x14a)]=_0x5e95e4[0x0],_0x5913b6[_0x174d7c]['from_rack']=_0x5e95e4[0x1],_0x5913b6[_0x174d7c][_0x42111a(0x198)]=_0x5e95e4[0x2],_0x5913b6[_0x174d7c][_0x42111a(0x150)]=_0x5e95e4[0x3],_0x5913b6[_0x174d7c]['from_types']=_0x1f9788,_0x5913b6[_0x174d7c][_0x42111a(0x192)]=_0x5e95e4[0x5];}}}}});}),_0x46471b[_0x5f4d52(0x1c3)]((_0x359ec9,_0x25c5f3)=>{_0x5913b6[_0x25c5f3]['to_quantity']=_0x359ec9;}),_0x1f4c9c[_0x5f4d52(0x1c3)]((_0x491d58,_0x55b37c)=>{var _0x1c482a=_0x5f4d52;_0x1aa4c6[_0x1c482a(0x1c3)]((_0x4a53d4,_0x27e964)=>{var _0x47279e=_0x1c482a;if(_0x4a53d4=='Receiving\x20Area'&&_0x55b37c==_0x27e964){var _0x5ee051=_0x491d58[_0x47279e(0x16d)](0x3);_0x5913b6[_0x55b37c][_0x47279e(0x1ff)]=_0x491d58[0x0],_0x5913b6[_0x55b37c][_0x47279e(0x1b9)]=_0x491d58[0x1],_0x5913b6[_0x55b37c][_0x47279e(0x1ab)]=0x0,_0x5913b6[_0x55b37c][_0x47279e(0x183)]=0x0,_0x5913b6[_0x55b37c][_0x47279e(0x1a1)]=_0x47279e(0x162),_0x5913b6[_0x55b37c][_0x47279e(0x14c)]=_0x5ee051;}else{if(_0x4a53d4=='Shelves'&&_0x55b37c==_0x27e964){var _0x5ee051=_0x491d58['slice'](0x3);_0x5913b6[_0x55b37c][_0x47279e(0x1ff)]=_0x491d58[0x0],_0x5913b6[_0x55b37c][_0x47279e(0x1b9)]=_0x491d58[0x1],_0x5913b6[_0x55b37c][_0x47279e(0x1ab)]=0x0,_0x5913b6[_0x55b37c][_0x47279e(0x183)]=0x0,_0x5913b6[_0x55b37c][_0x47279e(0x1a1)]=_0x47279e(0x162),_0x5913b6[_0x55b37c][_0x47279e(0x14c)]=_0x491d58[0x5];}else{if(_0x55b37c==_0x27e964){if(_0x491d58[0x0]=='A'&&_0x491d58[0x1]=='L'&&_0x491d58[0x2]=='L')console[_0x47279e(0x1d6)](_0x4a53d4+'\x20<>\x20'+_0x55b37c+'\x20<>\x20'+_0x27e964+_0x47279e(0x20d)+_0x491d58+_0x47279e(0x202)),_0x5913b6[_0x55b37c][_0x47279e(0x1ff)]=_0x491d58[0x0],_0x5913b6[_0x55b37c][_0x47279e(0x1b9)]=_0x491d58[0x1],_0x5913b6[_0x55b37c][_0x47279e(0x1ab)]=0x0,_0x5913b6[_0x55b37c]['to_bin']=0x0,_0x5913b6[_0x55b37c][_0x47279e(0x1a1)]=_0x47279e(0x162),_0x5913b6[_0x55b37c][_0x47279e(0x14c)]=_0x491d58[0x3];else{var _0x5e5577;if(_0x491d58[0x4]=='L')_0x5e5577='Level';else _0x491d58[0x4]=='F'&&(_0x5e5577=_0x47279e(0x162));_0x5913b6[_0x55b37c][_0x47279e(0x1ff)]=_0x491d58[0x0],_0x5913b6[_0x55b37c]['rack']=_0x491d58[0x1],_0x5913b6[_0x55b37c]['to_bay']=_0x491d58[0x2],_0x5913b6[_0x55b37c][_0x47279e(0x183)]=_0x491d58[0x3],_0x5913b6[_0x55b37c]['to_types']=_0x5e5577,_0x5913b6[_0x55b37c][_0x47279e(0x14c)]=_0x491d58[0x5];}}}}});}),_0x371305[_0x5f4d52(0x1c3)]((_0x18cb95,_0x37eba6)=>{_0x5913b6[_0x37eba6]['primary_code']=_0x18cb95;}),_0xe7956[_0x5f4d52(0x1c3)]((_0x581a4e,_0x5b56e6)=>{var _0x4af428=_0x5f4d52;_0x5913b6[_0x5b56e6][_0x4af428(0x189)]=_0x581a4e;}),_0x5a2847[_0x5f4d52(0x1c3)]((_0x3c494a,_0x24e977)=>{_0x5913b6[_0x24e977]['product_code']=_0x3c494a;}),_0x5dfc6d[_0x5f4d52(0x1c3)]((_0x4ab3e5,_0x2c14df)=>{var _0x457a77=_0x5f4d52;_0x5913b6[_0x2c14df][_0x457a77(0x1c2)]=_0x4ab3e5;}),_0x639260[_0x5f4d52(0x1c3)]((_0x3ac219,_0x57b870)=>{var _0x3d65b3=_0x5f4d52;_0x5913b6[_0x57b870][_0x3d65b3(0x15b)]=_0x3ac219;}),_0x222f50[_0x5f4d52(0x1c3)]((_0x21d16f,_0x169e46)=>{var _0x5a67b5=_0x5f4d52;_0x5913b6[_0x169e46][_0x5a67b5(0x18e)]=_0x21d16f;}),_0x135548[_0x5f4d52(0x1c3)]((_0x56af15,_0x2ddb05)=>{var _0x3d7c65=_0x5f4d52;_0x5913b6[_0x2ddb05][_0x3d7c65(0x191)]=_0x56af15;}),_0x586b0b[_0x5f4d52(0x1c3)]((_0x3140c4,_0xf13113)=>{var _0x5a8eb2=_0x5f4d52;_0x5913b6[_0xf13113][_0x5a8eb2(0x216)]=_0x3140c4;}),_0x44960a['forEach']((_0x4acdcc,_0x5ee99b)=>{_0x5913b6[_0x5ee99b]['maxperunit']=_0x4acdcc;}),_0x1058e5[_0x5f4d52(0x1c3)]((_0x464bc0,_0x5880cf)=>{_0x5913b6[_0x5880cf]['production_date']=_0x464bc0;}),_0x5b12e2[_0x5f4d52(0x1c3)]((_0x17860d,_0x534496)=>{var _0x228eb5=_0x5f4d52;_0x5913b6[_0x534496][_0x228eb5(0x1c8)]=_0x17860d;}),_0x3372ad[_0x5f4d52(0x1c3)]((_0x5b29df,_0x2121e1)=>{_0x5913b6[_0x2121e1]['from_room_name']=_0x5b29df;}),_0x1aa4c6[_0x5f4d52(0x1c3)]((_0x2efaf6,_0x3fdcea)=>{_0x5913b6[_0x3fdcea]['to_room_name']=_0x2efaf6;});const _0x52803a=_0x5913b6['filter'](_0x12fb2d=>_0x12fb2d[_0x5f4d52(0x167)]!=='0'&&_0x12fb2d['to_quantity']!==''||_0x12fb2d['to_floorlevel']!=='0'&&_0x12fb2d[_0x5f4d52(0x14c)]!==''),_0x5d4629=new transfers({'date':_0x58db0b,'from_warehouse':_0xe7eeeb,'to_warehouse':_0x1e4c3b,'product':_0x52803a,'note':_0xc43b12,'invoice':_0x493e83}),_0x345c72=await _0x5d4629['save']();_0x430771[_0x5f4d52(0x19e)](_0x5f4d52(0x1ce),_0x5f4d52(0x14b)),_0x3dcbca[_0x5f4d52(0x1fb)](_0x5f4d52(0x16a)+_0x345c72[_0x5f4d52(0x1cc)]);}catch(_0x4b94f0){console[_0x5f4d52(0x1d6)](_0x4b94f0),_0x3dcbca['status'](0xc8)[_0x5f4d52(0x201)]({'errorMessage':_0x4b94f0[_0x5f4d52(0x1b1)]});}}),router['get'](a0_0x3a5f2b(0x230),auth,async(_0x384c60,_0x42c997)=>{var _0x3de189=a0_0x3a5f2b;try{const {username:_0x2b62af,email:_0x10facf,role:_0x5858c8}=_0x384c60[_0x3de189(0x14e)],_0x5b559c=_0x384c60[_0x3de189(0x14e)],_0x364b50=await profile['findOne']({'email':_0x5b559c[_0x3de189(0x232)]}),_0x138327=await master_shop['find']();console[_0x3de189(0x1d6)](_0x3de189(0x174),_0x138327);const _0x200885=await transfers[_0x3de189(0x1ec)](_0x384c60[_0x3de189(0x1c7)]['id']);let _0x8dedde=new Date(_0x200885[_0x3de189(0x216)]),_0x3f70f5=('0'+_0x8dedde[_0x3de189(0x225)]())[_0x3de189(0x16d)](-0x2),_0x1d32b6=('0'+(_0x8dedde[_0x3de189(0x1ee)]()+0x1))[_0x3de189(0x16d)](-0x2),_0x97e79d=_0x8dedde[_0x3de189(0x20a)](),_0x523b12=_0x97e79d+'-'+_0x1d32b6+'-'+_0x3f70f5,_0x25d886;if(_0x5b559c[_0x3de189(0x15a)]==_0x3de189(0x211)){const _0x391ede=await staff['findOne']({'email':_0x5b559c['email']});_0x25d886=await warehouse[_0x3de189(0x1d3)]({'status':_0x3de189(0x1e2),'name':_0x391ede[_0x3de189(0x21a)],'warehouse_category':_0x3de189(0x220)});}else _0x25d886=await warehouse['find']({'status':_0x3de189(0x1e2),'warehouse_category':_0x3de189(0x220)});const _0x39e26a=await warehouse['aggregate']([{'$match':{'name':_0x200885[_0x3de189(0x18f)]}},{'$unwind':_0x3de189(0x22f)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3de189(0x1b3)},'bay':{'$first':_0x3de189(0x1d8)},'bin':{'$first':_0x3de189(0x1b4)},'type':{'$first':_0x3de189(0x173)},'floorlevel':{'$first':_0x3de189(0x158)},'primary_code':{'$first':_0x3de189(0x203)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3de189(0x1f4)},'storage':{'$first':_0x3de189(0x18d)},'rack':{'$first':_0x3de189(0x19d)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x3de189(0x1d4)},'room':{'$first':_0x3de189(0x180)}}}]);if(_0x138327[0x0][_0x3de189(0x169)]==_0x3de189(0x1d9)){var _0x1ee86e=users['English'];console['log'](_0x1ee86e);}else{if(_0x138327[0x0][_0x3de189(0x169)]=='Hindi')var _0x1ee86e=users['Hindi'];else{if(_0x138327[0x0]['language']==_0x3de189(0x1cb))var _0x1ee86e=users[_0x3de189(0x1cb)];else{if(_0x138327[0x0][_0x3de189(0x169)]==_0x3de189(0x15f))var _0x1ee86e=users['Spanish'];else{if(_0x138327[0x0][_0x3de189(0x169)]=='French')var _0x1ee86e=users[_0x3de189(0x1a9)];else{if(_0x138327[0x0][_0x3de189(0x169)]==_0x3de189(0x221))var _0x1ee86e=users[_0x3de189(0x21c)];else{if(_0x138327[0x0]['language']==_0x3de189(0x153))var _0x1ee86e=users[_0x3de189(0x153)];else{if(_0x138327[0x0]['language']==_0x3de189(0x148))var _0x1ee86e=users['Arabic'];}}}}}}}_0x42c997['render']('edit_transfer_view',{'success':_0x384c60[_0x3de189(0x19e)](_0x3de189(0x1ce)),'errors':_0x384c60[_0x3de189(0x19e)](_0x3de189(0x15d)),'role':_0x5b559c,'profile':_0x364b50,'master_shop':_0x138327,'warehouse':_0x25d886,'transfer':_0x200885,'stock':_0x39e26a,'language':_0x1ee86e});}catch(_0x244e53){console[_0x3de189(0x1d6)](_0x244e53);}}),router[a0_0x3a5f2b(0x193)](a0_0x3a5f2b(0x230),auth,async(_0x298cec,_0x4a0cdd)=>{var _0x3aa19e=a0_0x3a5f2b;try{const _0x51b01a=_0x298cec['params']['id'],{from_warehouse:_0x132cf6,FromRoom_name:_0x53cc08,to_warehouse:_0x23f11e,ToRoom_name:_0x4548c5}=_0x298cec[_0x3aa19e(0x235)],_0x4e1af8=await transfers[_0x3aa19e(0x1ec)]({'_id':_0x51b01a}),_0x51c225=_0x4e1af8['product'][_0x3aa19e(0x1ea)](async _0x4ae5ee=>{var _0x4049d0=_0x3aa19e;if(_0x4ae5ee[_0x4049d0(0x167)]>0x0){var _0x52f08a=await warehouse[_0x4049d0(0x151)]({'name':_0x4e1af8[_0x4049d0(0x18f)],'room':_0x4ae5ee[_0x4049d0(0x21d)],'warehouse_category':_0x4049d0(0x220)});const _0xa9360a=_0x52f08a['product_details'][_0x4049d0(0x1ea)](_0x4caa0d=>{var _0x4ea70f=_0x4049d0;_0x4caa0d[_0x4ea70f(0x164)]==_0x4ae5ee[_0x4ea70f(0x164)]&&_0x4caa0d[_0x4ea70f(0x1b0)]==_0x4ae5ee[_0x4ea70f(0x192)]&&_0x4caa0d[_0x4ea70f(0x21b)]==_0x4ae5ee[_0x4ea70f(0x204)]&&_0x4caa0d[_0x4ea70f(0x1aa)]==_0x4ae5ee[_0x4ea70f(0x150)]&&_0x4caa0d[_0x4ea70f(0x194)]==_0x4ae5ee[_0x4ea70f(0x198)]&&_0x4caa0d[_0x4ea70f(0x1b9)]==_0x4ae5ee[_0x4ea70f(0x154)]&&_0x4caa0d[_0x4ea70f(0x1ff)]==_0x4ae5ee[_0x4ea70f(0x14a)]&&_0x4caa0d[_0x4ea70f(0x216)]==_0x4ae5ee[_0x4ea70f(0x216)]&&_0x4caa0d['batch_code']==_0x4ae5ee['batch_code']&&_0x4caa0d[_0x4ea70f(0x152)]==_0x4ae5ee[_0x4ea70f(0x152)]&&_0x4caa0d[_0x4ea70f(0x15c)]==_0x4ae5ee[_0x4ea70f(0x195)]&&_0x4caa0d[_0x4ea70f(0x1cc)]==_0x4ae5ee[_0x4ea70f(0x1ae)]&&(_0x4caa0d[_0x4ea70f(0x1b6)]=_0x4caa0d['product_stock']-_0x4ae5ee[_0x4ea70f(0x167)]);});}return _0x52f08a;});Promise[_0x3aa19e(0x1e7)](_0x51c225)[_0x3aa19e(0x163)](async _0x11830b=>{var _0x2d53ff=_0x3aa19e;try{for(const _0x2710de of _0x11830b){await _0x2710de[_0x2d53ff(0x1ef)]();}try{const _0x5e7aa4=_0x4e1af8[_0x2d53ff(0x186)][_0x2d53ff(0x1ea)](async _0x51fc7c=>{var _0x45af53=_0x2d53ff;if(_0x51fc7c['to_quantity']>0x0){var _0x557ec9=await warehouse['findOne']({'name':_0x4e1af8[_0x45af53(0x1f8)],'room':_0x51fc7c[_0x45af53(0x200)],'warehouse_category':_0x45af53(0x220)}),_0x2b290f=0x0;const _0x54a6ea=_0x557ec9['product_details'][_0x45af53(0x1ea)](_0x2ead3a=>{var _0x57dcd7=_0x45af53;_0x2ead3a[_0x57dcd7(0x164)]==_0x51fc7c['product_name']&&_0x2ead3a['floorlevel']==_0x51fc7c[_0x57dcd7(0x14c)]&&_0x2ead3a[_0x57dcd7(0x21b)]==_0x51fc7c[_0x57dcd7(0x1a1)]&&_0x2ead3a[_0x57dcd7(0x1aa)]==_0x51fc7c['to_bin']&&_0x2ead3a[_0x57dcd7(0x194)]==_0x51fc7c[_0x57dcd7(0x1ab)]&&_0x2ead3a['rack']==_0x51fc7c[_0x57dcd7(0x1b9)]&&_0x2ead3a[_0x57dcd7(0x1ff)]==_0x51fc7c[_0x57dcd7(0x1ff)]&&_0x2ead3a[_0x57dcd7(0x216)]==_0x51fc7c['expiry_date']&&_0x2ead3a[_0x57dcd7(0x191)]==_0x51fc7c['batch_code']&&_0x2ead3a['production_date']==_0x51fc7c[_0x57dcd7(0x152)]&&_0x2ead3a[_0x57dcd7(0x15c)]==_0x51fc7c[_0x57dcd7(0x17c)]&&(_0x2ead3a[_0x57dcd7(0x1b6)]=_0x2ead3a[_0x57dcd7(0x1b6)]+_0x51fc7c[_0x57dcd7(0x167)],_0x2b290f++);});_0x2b290f=='0'&&(_0x557ec9[_0x45af53(0x1e9)]=_0x557ec9[_0x45af53(0x1e9)][_0x45af53(0x19c)]({'product_name':_0x51fc7c['product_name'],'product_stock':_0x51fc7c[_0x45af53(0x167)],'bay':_0x51fc7c[_0x45af53(0x1ab)],'bin':_0x51fc7c[_0x45af53(0x183)],'type':_0x51fc7c['to_types'],'floorlevel':_0x51fc7c[_0x45af53(0x14c)],'storage':_0x51fc7c['storage'],'rack':_0x51fc7c[_0x45af53(0x1b9)],'product_code':_0x51fc7c[_0x45af53(0x1bc)],'primary_code':_0x51fc7c[_0x45af53(0x17e)],'secondary_code':_0x51fc7c['secondary_code'],'maxProducts':_0x51fc7c[_0x45af53(0x1c2)],'storage':_0x51fc7c[_0x45af53(0x1ff)],'rack':_0x51fc7c[_0x45af53(0x1b9)],'expiry_date':_0x51fc7c[_0x45af53(0x216)],'maxPerUnit':_0x51fc7c[_0x45af53(0x18c)],'batch_code':_0x51fc7c[_0x45af53(0x191)],'production_date':_0x51fc7c[_0x45af53(0x152)]}));}return _0x557ec9;});Promise[_0x2d53ff(0x1e7)](_0x5e7aa4)['then'](async _0x3a980f=>{var _0x48b8fd=_0x2d53ff;try{for(const _0xe31f32 of _0x3a980f){await warehouse[_0x48b8fd(0x147)]({'_id':_0xe31f32[_0x48b8fd(0x1cc)]},{'$addToSet':{'product_details':{'$each':_0xe31f32[_0x48b8fd(0x1e9)]}}});}_0x4e1af8['finalize']=_0x48b8fd(0x159);const _0x48256e=await _0x4e1af8[_0x48b8fd(0x1ef)](),_0x2a1f2f=await master_shop[_0x48b8fd(0x1d3)](),_0x52cc67=await email_settings[_0x48b8fd(0x151)](),_0x32067a=await supervisor_settings['find']();var _0xb6037b=_0x4e1af8[_0x48b8fd(0x186)],_0x53faea='',_0x358897;for(_0x358897 in _0xb6037b){_0x53faea+=_0x48b8fd(0x209)+_0x48b8fd(0x18a)+_0xb6037b[_0x358897]['product_name']+_0x48b8fd(0x218)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xb6037b[_0x358897][_0x48b8fd(0x1bc)]+_0x48b8fd(0x218)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xb6037b[_0x358897][_0x48b8fd(0x167)]+_0x48b8fd(0x218)+_0x48b8fd(0x18a)+_0xb6037b[_0x358897][_0x48b8fd(0x15b)]+_0x48b8fd(0x218)+_0x48b8fd(0x18a)+_0xb6037b[_0x358897][_0x48b8fd(0x18e)]+_0x48b8fd(0x218)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4e1af8[_0x48b8fd(0x1f8)]+_0x48b8fd(0x218)+_0x48b8fd(0x18a)+_0xb6037b[_0x358897]['to_room_name']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xb6037b[_0x358897][_0x48b8fd(0x1ff)]+_0xb6037b[_0x358897][_0x48b8fd(0x1b9)]+_0xb6037b[_0x358897][_0x48b8fd(0x1ab)]+_0xb6037b[_0x358897][_0x48b8fd(0x183)]+_0xb6037b[_0x358897][_0x48b8fd(0x1a1)][0x0]+_0xb6037b[_0x358897][_0x48b8fd(0x14c)]+_0x48b8fd(0x218),'</tr>';}let _0x1eab6a=nodemailer['createTransport']({'host':_0x52cc67[_0x48b8fd(0x21f)],'port':Number(_0x52cc67[_0x48b8fd(0x184)]),'secure':![],'auth':{'user':_0x52cc67['email'],'pass':_0x52cc67[_0x48b8fd(0x215)]}}),_0x5ddec2={'from':_0x52cc67[_0x48b8fd(0x232)],'to':_0x32067a[0x0]['RMSEmail'],'subject':_0x48b8fd(0x17a),'attachments':[{'filename':_0x48b8fd(0x1d5),'path':__dirname+'/../public'+_0x48b8fd(0x187)+_0x2a1f2f[0x0]['image'],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x48b8fd(0x160)+_0x48b8fd(0x1a3)+_0x48b8fd(0x1e1)+_0x48b8fd(0x1da)+_0x48b8fd(0x1e1)+_0x48b8fd(0x1c9)+'</div>'+_0x48b8fd(0x1e1)+'<h2>\x20'+_0x2a1f2f[0x0][_0x48b8fd(0x155)]+'\x20</h2>'+_0x48b8fd(0x14f)+_0x48b8fd(0x14f)+_0x48b8fd(0x1dc)+_0x48b8fd(0x1e1)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x48b8fd(0x21e)+_0x4e1af8['invoice']+'\x20'+_0x48b8fd(0x1d1)+_0x48b8fd(0x1ca)+_0x4e1af8['date']+'\x20'+_0x48b8fd(0x17d)+_0x48b8fd(0x146)+_0x48b8fd(0x14f)+_0x48b8fd(0x1ba)+_0x48b8fd(0x228)+'<tr>'+_0x48b8fd(0x1f7)+_0x48b8fd(0x1e5)+_0x48b8fd(0x1a2)+_0x48b8fd(0x1c0)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x48b8fd(0x177)+_0x48b8fd(0x1e3)+_0x48b8fd(0x1e8)+_0x48b8fd(0x1f0)+_0x48b8fd(0x1f9)+_0x48b8fd(0x208)+'\x20'+_0x53faea+'\x20'+_0x48b8fd(0x175)+_0x48b8fd(0x1a5)+_0x48b8fd(0x1e1)+_0x48b8fd(0x1e4)+'<h5>'+_0x2a1f2f[0x0]['site_title']+'</h5>'+_0x48b8fd(0x14f)+_0x48b8fd(0x14f)+'</body></html>'};_0x1eab6a['sendMail'](_0x5ddec2,function(_0x5b5205,_0x365709){var _0x22cd40=_0x48b8fd;_0x5b5205?(console[_0x22cd40(0x1d6)](_0x5b5205),console[_0x22cd40(0x1d6)](_0x22cd40(0x176))):console[_0x22cd40(0x1d6)](_0x22cd40(0x1e6));}),_0x298cec['flash'](_0x48b8fd(0x1ce),_0x48b8fd(0x181)),_0x4a0cdd[_0x48b8fd(0x1fb)]('/picking_list/PDF_transfer_rm/'+_0x48256e[_0x48b8fd(0x1cc)]);}catch(_0x3a0739){console[_0x48b8fd(0x19f)](_0x3a0739),_0x4a0cdd[_0x48b8fd(0x210)](0x1f4)[_0x48b8fd(0x201)]({'Perror':_0x48b8fd(0x20b),'message':_0x3a0739[_0x48b8fd(0x1b1)]});}})[_0x2d53ff(0x1d0)](_0x531abe=>{var _0x2e25cd=_0x2d53ff;console[_0x2e25cd(0x19f)](_0x531abe),_0x4a0cdd[_0x2e25cd(0x210)](0x1f4)[_0x2e25cd(0x201)]({'Perror':_0x2e25cd(0x170)});});}catch(_0x48a126){_0x4a0cdd[_0x2d53ff(0x201)](_0x48a126);}}catch(_0x20129d){console[_0x2d53ff(0x19f)](_0x20129d),_0x4a0cdd[_0x2d53ff(0x210)](0x1f4)[_0x2d53ff(0x201)]({'Merror':_0x2d53ff(0x20b),'Message':_0x20129d[_0x2d53ff(0x1b1)]});}})[_0x3aa19e(0x1d0)](_0x2e86ee=>{var _0x30f5a5=_0x3aa19e;console[_0x30f5a5(0x19f)](_0x2e86ee),_0x4a0cdd[_0x30f5a5(0x210)](0x1f4)[_0x30f5a5(0x201)]({'Merror':_0x30f5a5(0x170)});});}catch(_0x43605b){console[_0x3aa19e(0x1d6)](_0x43605b);}});function BayBinSelected(_0x1bd9ef,_0x2729c7){var _0x261d4e=a0_0x3a5f2b,_0x134212=[],_0xee4f0e=[],_0x51a128=[],_0x522ee1=[],_0x4474eb=[],_0x1120f8=[];let _0x544a0d=[];if(_0x1bd9ef==_0x261d4e(0x1be))switch(_0x2729c7){case _0x261d4e(0x231):_0x134212=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0xee4f0e=[0x1,0x2],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x1cd),_0x261d4e(0x162)],_0x4474eb=['D'],_0x1120f8=['A'];break;case'Rack\x20B':_0x134212=[0x6,0x5,0x4,0x3,0x2,0x1],_0xee4f0e=[0x1,0x2],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x1cd),_0x261d4e(0x162)],_0x4474eb=['D'],_0x1120f8=['B'];break;case _0x261d4e(0x1b7):_0x134212=[0x0],_0xee4f0e=[0x0],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x162)],_0x4474eb=['D'],_0x1120f8=['S'];break;case _0x261d4e(0x1cf):_0x134212=[0x0],_0xee4f0e=[0x0],_0x522ee1=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x51a128=[_0x261d4e(0x162)],_0x4474eb=['D'],_0x1120f8=['R'];break;}else{if(_0x1bd9ef=='COLD\x20STORAGE')switch(_0x2729c7){case'Rack\x20A':_0x134212=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0xee4f0e=['B','F'],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=['Level','Floor'],_0x4474eb=['C'],_0x1120f8=['A'];break;case _0x261d4e(0x229):_0x134212=[0x5,0x4,0x3,0x2,0x1],_0xee4f0e=['F','B','S'],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=['Level',_0x261d4e(0x162)],_0x4474eb=['C'],_0x1120f8=['B'];break;case _0x261d4e(0x234):_0x134212=[0x1,0x2,0x3,0x4,0x5],_0xee4f0e=['B','F','S'],_0x522ee1=[0x5,0x4,0x3,0x2,0x1],_0x51a128=[_0x261d4e(0x1cd),_0x261d4e(0x162)],_0x4474eb=['C'],_0x1120f8=['C'];break;case _0x261d4e(0x226):_0x134212=[0x5,0x4,0x3,0x2,0x1],_0xee4f0e=['F','B','S'],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x1cd),_0x261d4e(0x162)],_0x4474eb=['C'],_0x1120f8=['D'];break;case _0x261d4e(0x219):_0x134212=[0x4,0x3,0x2,0x1],_0xee4f0e=[0x1,0x2],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x1cd),_0x261d4e(0x162)],_0x4474eb=['C'],_0x1120f8=['E'];break;case _0x261d4e(0x168):_0x134212=[0x1,0x2,0x3],_0xee4f0e=[0x1,0x2],_0x522ee1=[0x1,0x2,0x3,0x4,0x5],_0x51a128=[_0x261d4e(0x1cd)],_0x4474eb=['C'],_0x1120f8=['F'];break;}}return{'levels':_0x134212,'Isle':_0xee4f0e,'rack':_0x522ee1,'type':_0x51a128,'storage':_0x4474eb,'rak':_0x1120f8};}function a0_0x2c6c(_0x79917b,_0x294621){var _0xd1e7bd=a0_0xd1e7();return a0_0x2c6c=function(_0x2c6cb7,_0x21bcbf){_0x2c6cb7=_0x2c6cb7-0x146;var _0x47b3d8=_0xd1e7bd[_0x2c6cb7];return _0x47b3d8;},a0_0x2c6c(_0x79917b,_0x294621);}router[a0_0x3a5f2b(0x1a8)]('/view/:id',auth,async(_0x1a48be,_0x31af10)=>{var _0x30cd67=a0_0x3a5f2b;try{const {username:_0x3d1f4d,email:_0x5c617b,role:_0x79bb6f}=_0x1a48be['user'],_0x987f7a=_0x1a48be[_0x30cd67(0x14e)],_0x56f9d2=await profile[_0x30cd67(0x151)]({'email':_0x987f7a[_0x30cd67(0x232)]}),_0x5f0935=await master_shop['find'](),_0x289dd8=await transfers[_0x30cd67(0x1ec)](_0x1a48be[_0x30cd67(0x1c7)]['id']);let _0x2a23aa;if(_0x987f7a['role']==_0x30cd67(0x211)){const _0x3e841e=await staff[_0x30cd67(0x151)]({'email':_0x987f7a['email']});_0x2a23aa=await warehouse[_0x30cd67(0x15e)]([{'$match':{'status':_0x30cd67(0x1e2),'name':_0x3e841e[_0x30cd67(0x21a)],'warehouse_category':_0x30cd67(0x220)}},{'$group':{'_id':'$name','name':{'$first':_0x30cd67(0x22c)}}}]);}else _0x2a23aa=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x30cd67(0x220)}},{'$group':{'_id':_0x30cd67(0x22c),'name':{'$first':'$name'}}}]);const _0x453588=await warehouse[_0x30cd67(0x15e)]([{'$match':{'name':_0x289dd8[_0x30cd67(0x18f)],'warehouse_category':_0x30cd67(0x220)}},{'$unwind':_0x30cd67(0x22f)},{'$group':{'_id':_0x30cd67(0x213),'name':{'$first':_0x30cd67(0x20e)},'product_stock':{'$first':_0x30cd67(0x1b3)},'bay':{'$first':_0x30cd67(0x1d8)},'bin':{'$first':_0x30cd67(0x1b4)},'type':{'$first':_0x30cd67(0x173)},'floorlevel':{'$first':_0x30cd67(0x158)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x30cd67(0x1bf)},'product_code':{'$first':_0x30cd67(0x1f4)},'storage':{'$first':_0x30cd67(0x18d)},'rack':{'$first':_0x30cd67(0x19d)},'expiry_date':{'$first':_0x30cd67(0x1fc)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x30cd67(0x180)}}}]),_0x161c36=await product[_0x30cd67(0x1d3)]({}),_0x4e38f2=BayBinSelected(_0x289dd8[_0x30cd67(0x1f8)],_0x289dd8[_0x30cd67(0x16f)]);if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x1d9)){var _0x1974d0=users['English'];console[_0x30cd67(0x1d6)](_0x1974d0);}else{if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x1f5))var _0x1974d0=users['Hindi'];else{if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x1cb))var _0x1974d0=users[_0x30cd67(0x1cb)];else{if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x15f))var _0x1974d0=users[_0x30cd67(0x15f)];else{if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x1a9))var _0x1974d0=users[_0x30cd67(0x1a9)];else{if(_0x5f0935[0x0][_0x30cd67(0x169)]=='Portuguese\x20(BR)')var _0x1974d0=users[_0x30cd67(0x21c)];else{if(_0x5f0935[0x0][_0x30cd67(0x169)]==_0x30cd67(0x153))var _0x1974d0=users[_0x30cd67(0x153)];else{if(_0x5f0935[0x0]['language']==_0x30cd67(0x148))var _0x1974d0=users[_0x30cd67(0x22b)];}}}}}}}_0x31af10[_0x30cd67(0x188)](_0x30cd67(0x1de),{'success':_0x1a48be['flash']('success'),'errors':_0x1a48be[_0x30cd67(0x19e)](_0x30cd67(0x15d)),'role':_0x987f7a,'profile':_0x56f9d2,'master_shop':_0x5f0935,'warehouse':_0x2a23aa,'transfer':_0x289dd8,'stock':_0x453588,'unit':_0x161c36,'language':_0x1974d0});}catch(_0x18f22f){console[_0x30cd67(0x1d6)](_0x18f22f);}}),router[a0_0x3a5f2b(0x193)](a0_0x3a5f2b(0x1fe),auth,async(_0x13cd6b,_0x39bfcc)=>{var _0xbb5776=a0_0x3a5f2b;try{const _0x15ce44=_0x13cd6b[_0xbb5776(0x1c7)]['id'],_0x3b527e=await transfers[_0xbb5776(0x1ec)](_0x15ce44);_0x39bfcc[_0xbb5776(0x201)](_0x13cd6b[_0xbb5776(0x235)]);return;const {date:_0xe4eeba,from_warehouse:_0x5dd577,FromRoom_name:_0x237d25,to_warehouse:_0x3b8300,ToRoom_name:_0x1e275f,prod_name:_0x2dc74c,from_prod_qty:_0x287a50,from_prod_level:_0x3e50b3,from_prod_isle:_0x5b2e99,from_prod_pallet:_0x325306,to_prod_qty:_0x1e8e85,to_prod_level:_0x1d4be1,to_prod_isle:_0x5b000b,to_prod_pallet:_0x352a24,primary_code:_0x8491,secondary_code:_0x35a3eb,product_code3:_0x23dc7a,note:_0x3e4e50,invoice:_0x8c55c2,expiry_date:_0x1cf0bf}=_0x13cd6b[_0xbb5776(0x235)];if(typeof _0x2dc74c==_0xbb5776(0x197))var _0x56ab5e=[_0x13cd6b[_0xbb5776(0x235)]['prod_name']],_0x3f2f50=[_0x13cd6b['body'][_0xbb5776(0x1ad)]],_0x33fa2a=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1eb)]],_0x3aa6f6=[_0x13cd6b[_0xbb5776(0x235)]['from_prod_isle']],_0x577938=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x196)]],_0x525d86=[_0x13cd6b['body'][_0xbb5776(0x204)]],_0x4a1f0f=[_0x13cd6b[_0xbb5776(0x235)]['to_prod_qty']],_0x23b7dc=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1ac)]],_0x4aaf03=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x157)]],_0x177b55=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x212)]],_0x31293c=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1a1)]],_0x59a2ab=[_0x13cd6b['body'][_0xbb5776(0x1ff)]],_0x330ef1=[_0x13cd6b['body'][_0xbb5776(0x1f3)]],_0x2c1bde=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x17e)]],_0x35a73d=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x189)]],_0x56c390=[_0x13cd6b['body'][_0xbb5776(0x171)]],_0x21b7c2=[_0x13cd6b[_0xbb5776(0x235)]['MaxStocks_data2']],_0xf42a23=[_0x13cd6b[_0xbb5776(0x235)]['unit']],_0x4007e0=[_0x13cd6b['body'][_0xbb5776(0x18e)]],_0x513397=[_0x13cd6b['body'][_0xbb5776(0x191)]],_0xb1bfa9=[_0x13cd6b[_0xbb5776(0x235)]['expiry_date']],_0x1fe2fa=[_0x13cd6b[_0xbb5776(0x235)]['from_storage']],_0x43181f=[_0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x222)]];else var _0x56ab5e=[..._0x13cd6b[_0xbb5776(0x235)]['prod_name']],_0x59a2ab=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1ff)]],_0x330ef1=[..._0x13cd6b[_0xbb5776(0x235)]['rak']],_0x525d86=[..._0x13cd6b['body'][_0xbb5776(0x204)]],_0x31293c=[..._0x13cd6b[_0xbb5776(0x235)]['to_types']],_0x3f2f50=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1ad)]],_0x33fa2a=[..._0x13cd6b['body'][_0xbb5776(0x1eb)]],_0x3aa6f6=[..._0x13cd6b['body'][_0xbb5776(0x1f1)]],_0x577938=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x196)]],_0x4a1f0f=[..._0x13cd6b['body'][_0xbb5776(0x19b)]],_0x23b7dc=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x1ac)]],_0x4aaf03=[..._0x13cd6b[_0xbb5776(0x235)]['to_prod_isle']],_0x177b55=[..._0x13cd6b['body'][_0xbb5776(0x212)]],_0x2c1bde=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x17e)]],_0x35a73d=[..._0x13cd6b['body'][_0xbb5776(0x189)]],_0x56c390=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x171)]],_0x21b7c2=[..._0x13cd6b[_0xbb5776(0x235)]['MaxStocks_data2']],_0xf42a23=[..._0x13cd6b[_0xbb5776(0x235)]['unit']],_0x4007e0=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x18e)]],_0x513397=[..._0x13cd6b['body']['batch_code']],_0xb1bfa9=[..._0x13cd6b['body'][_0xbb5776(0x216)]],_0x1fe2fa=[..._0x13cd6b[_0xbb5776(0x235)]['from_storage']],_0x43181f=[..._0x13cd6b[_0xbb5776(0x235)][_0xbb5776(0x222)]];const _0x2e337c=_0x56ab5e[_0xbb5776(0x1ea)](_0x46711e=>{return _0x46711e={'product_name':_0x46711e};});_0x3f2f50['forEach']((_0x646085,_0x19db97)=>{var _0x90b327=_0xbb5776;_0x2e337c[_0x19db97][_0x90b327(0x1bd)]=_0x646085;}),_0x33fa2a[_0xbb5776(0x1c3)]((_0x4cc01f,_0x3ec357)=>{var _0x4fa517=_0xbb5776;_0x2e337c[_0x3ec357][_0x4fa517(0x198)]=_0x4cc01f;}),_0x3aa6f6['forEach']((_0x53240a,_0x533423)=>{var _0x1c4440=_0xbb5776;_0x2e337c[_0x533423][_0x1c4440(0x150)]=_0x53240a;}),_0x577938[_0xbb5776(0x1c3)]((_0x29fe41,_0x43d4ff)=>{var _0x4f6804=_0xbb5776;_0x2e337c[_0x43d4ff][_0x4f6804(0x192)]=_0x29fe41;}),_0x4a1f0f[_0xbb5776(0x1c3)]((_0xf04be2,_0x5709ad)=>{var _0x58949b=_0xbb5776;_0x2e337c[_0x5709ad][_0x58949b(0x167)]=_0xf04be2;}),_0x23b7dc[_0xbb5776(0x1c3)]((_0x1b9111,_0x7a48a8)=>{var _0x8e4d29=_0xbb5776;_0x2e337c[_0x7a48a8][_0x8e4d29(0x1ab)]=_0x1b9111;}),_0x4aaf03[_0xbb5776(0x1c3)]((_0x41d598,_0x274e4a)=>{var _0xde81eb=_0xbb5776;_0x2e337c[_0x274e4a][_0xde81eb(0x183)]=_0x41d598;}),_0x177b55[_0xbb5776(0x1c3)]((_0x3edaa4,_0x2cf9af)=>{var _0x533f1b=_0xbb5776;_0x2e337c[_0x2cf9af][_0x533f1b(0x14c)]=_0x3edaa4;}),_0x2c1bde[_0xbb5776(0x1c3)]((_0x2458d4,_0x2ab5bc)=>{var _0x120755=_0xbb5776;_0x2e337c[_0x2ab5bc][_0x120755(0x17e)]=_0x2458d4;}),_0x35a73d['forEach']((_0x5abb9b,_0x4bf651)=>{var _0x37eb09=_0xbb5776;_0x2e337c[_0x4bf651][_0x37eb09(0x189)]=_0x5abb9b;}),_0x56c390[_0xbb5776(0x1c3)]((_0x3e24bf,_0x41bf96)=>{var _0x1ea7d9=_0xbb5776;_0x2e337c[_0x41bf96][_0x1ea7d9(0x1bc)]=_0x3e24bf;}),_0x21b7c2['forEach']((_0x425fcf,_0x11acc2)=>{var _0x175c57=_0xbb5776;_0x2e337c[_0x11acc2][_0x175c57(0x1c2)]=_0x425fcf;}),_0xf42a23[_0xbb5776(0x1c3)]((_0x94f6c0,_0x3d195b)=>{_0x2e337c[_0x3d195b]['unit']=_0x94f6c0;}),_0x4007e0[_0xbb5776(0x1c3)]((_0x563a3e,_0x5a546e)=>{var _0x4e7989=_0xbb5776;_0x2e337c[_0x5a546e][_0x4e7989(0x18e)]=_0x563a3e;}),_0x513397[_0xbb5776(0x1c3)]((_0x502912,_0x1e3994)=>{_0x2e337c[_0x1e3994]['batch_code']=_0x502912;}),_0xb1bfa9[_0xbb5776(0x1c3)]((_0x3b8091,_0x210234)=>{var _0x56adf0=_0xbb5776;_0x2e337c[_0x210234][_0x56adf0(0x216)]=_0x3b8091;}),_0x59a2ab[_0xbb5776(0x1c3)]((_0x50f74d,_0x39dd09)=>{var _0x3988da=_0xbb5776;_0x2e337c[_0x39dd09][_0x3988da(0x1ff)]=_0x50f74d;}),_0x330ef1[_0xbb5776(0x1c3)]((_0x33fc06,_0x3c98dc)=>{var _0x129e9a=_0xbb5776;_0x2e337c[_0x3c98dc][_0x129e9a(0x1b9)]=_0x33fc06;}),_0x525d86[_0xbb5776(0x1c3)]((_0x1311ae,_0x30b8a0)=>{var _0x356081=_0xbb5776;_0x2e337c[_0x30b8a0][_0x356081(0x204)]=_0x1311ae;}),_0x31293c['forEach']((_0x25c07b,_0x311cfd)=>{var _0x5e7b86=_0xbb5776;_0x2e337c[_0x311cfd][_0x5e7b86(0x1a1)]=_0x25c07b;}),_0x1fe2fa[_0xbb5776(0x1c3)]((_0x2d45d8,_0x3be8a5)=>{_0x2e337c[_0x3be8a5]['from_storage']=_0x2d45d8;}),_0x43181f['forEach']((_0x1c90e7,_0xeb3603)=>{var _0x2ef73d=_0xbb5776;_0x2e337c[_0xeb3603][_0x2ef73d(0x154)]=_0x1c90e7;});const _0x41d0f2=_0x2e337c[_0xbb5776(0x16e)](_0x31a0be=>_0x31a0be[_0xbb5776(0x167)]!=='0'&&_0x31a0be['to_quantity']!==''||_0x31a0be[_0xbb5776(0x14c)]!=='0'&&_0x31a0be[_0xbb5776(0x14c)]!=='');var _0x28f335=0x0;_0x41d0f2[_0xbb5776(0x1c3)](_0x258c4a=>{var _0x590d3f=_0xbb5776;parseInt(_0x258c4a[_0x590d3f(0x1bd)])<parseInt(_0x258c4a[_0x590d3f(0x167)])&&_0x28f335++;});if(_0x28f335!=0x0)return _0x13cd6b['flash'](_0xbb5776(0x15d),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x39bfcc[_0xbb5776(0x1fb)]('back');const _0x50efd0=await warehouse[_0xbb5776(0x151)]({'name':_0x3b527e['from_warehouse'],'room':_0x3b527e[_0xbb5776(0x206)]});_0x3b527e[_0xbb5776(0x186)]['forEach'](_0x171738=>{var _0x269649=_0xbb5776;if(_0x171738[_0x269649(0x167)]>0x0){const _0x3280eb=_0x50efd0['product_details'][_0x269649(0x1ea)](_0x5ae130=>{var _0x128039=_0x269649;_0x5ae130[_0x128039(0x164)]==_0x171738['product_name']&&_0x5ae130[_0x128039(0x1b0)]==_0x171738[_0x128039(0x192)]&&_0x5ae130['type']==_0x171738[_0x128039(0x204)]&&_0x5ae130[_0x128039(0x1aa)]==_0x171738[_0x128039(0x150)]&&_0x5ae130[_0x128039(0x194)]==_0x171738[_0x128039(0x198)]&&_0x5ae130[_0x128039(0x1b9)]==_0x171738[_0x128039(0x154)]&&_0x5ae130['storage']==_0x171738[_0x128039(0x14a)]&&(_0x5ae130[_0x128039(0x1b6)]=parseInt(_0x5ae130[_0x128039(0x1b6)])+parseInt(_0x171738[_0x128039(0x167)]));});}}),await _0x50efd0['save']();const _0x15b52b=await warehouse['findOne']({'name':_0x3b527e[_0xbb5776(0x1f8)],'room':_0x3b527e[_0xbb5776(0x16f)]});_0x3b527e['product'][_0xbb5776(0x1c3)](_0x1a3435=>{var _0x2fdf1f=_0xbb5776;if(_0x1a3435[_0x2fdf1f(0x167)]>0x0){const _0x6922f8=_0x15b52b[_0x2fdf1f(0x1e9)][_0x2fdf1f(0x1ea)](_0x240800=>{var _0x1bb04=_0x2fdf1f;_0x240800[_0x1bb04(0x164)]==_0x1a3435['product_name']&&_0x240800[_0x1bb04(0x1b0)]==_0x1a3435['to_floorlevel']&&_0x240800['type']==_0x1a3435['to_types']&&_0x240800[_0x1bb04(0x1aa)]==_0x1a3435[_0x1bb04(0x183)]&&_0x240800[_0x1bb04(0x194)]==_0x1a3435[_0x1bb04(0x1ab)]&&_0x240800['rack']==_0x1a3435[_0x1bb04(0x1b9)]&&_0x240800[_0x1bb04(0x1ff)]==_0x1a3435['storage']&&(_0x240800['product_stock']=parseInt(_0x240800[_0x1bb04(0x1b6)])-parseInt(_0x1a3435[_0x1bb04(0x167)]));});}}),await _0x15b52b['save'](),_0x3b527e[_0xbb5776(0x1fd)]=_0xe4eeba,_0x3b527e[_0xbb5776(0x18f)]=_0x5dd577,_0x3b527e[_0xbb5776(0x1f8)]=_0x3b8300,_0x3b527e[_0xbb5776(0x186)]=_0x41d0f2,_0x3b527e[_0xbb5776(0x205)]=_0x3e4e50,_0x3b527e[_0xbb5776(0x15c)]=_0x8c55c2;const _0x3e9fd8=await _0x3b527e[_0xbb5776(0x1ef)]();console[_0xbb5776(0x1d6)](_0x3e9fd8);const _0xe6e98c=await warehouse[_0xbb5776(0x151)]({'name':_0x5dd577,'room':_0x237d25});_0x3e9fd8[_0xbb5776(0x186)][_0xbb5776(0x1c3)](_0xb05385=>{var _0x40b899=_0xbb5776;if(_0xb05385[_0x40b899(0x167)]>0x0){const _0x326e30=_0xe6e98c[_0x40b899(0x1e9)][_0x40b899(0x1ea)](_0x75884b=>{var _0x3d1d7a=_0x40b899;_0x75884b[_0x3d1d7a(0x164)]==_0xb05385[_0x3d1d7a(0x164)]&&_0x75884b[_0x3d1d7a(0x1b0)]==_0xb05385[_0x3d1d7a(0x192)]&&_0x75884b[_0x3d1d7a(0x21b)]==_0xb05385[_0x3d1d7a(0x204)]&&_0x75884b[_0x3d1d7a(0x1aa)]==_0xb05385[_0x3d1d7a(0x150)]&&_0x75884b[_0x3d1d7a(0x194)]==_0xb05385[_0x3d1d7a(0x198)]&&_0x75884b[_0x3d1d7a(0x1b9)]==_0xb05385['from_rack']&&_0x75884b['storage']==_0xb05385[_0x3d1d7a(0x14a)]&&(_0x75884b[_0x3d1d7a(0x1b6)]=parseInt(_0x75884b[_0x3d1d7a(0x1b6)])-parseInt(_0xb05385[_0x3d1d7a(0x167)]));});}}),await _0xe6e98c[_0xbb5776(0x1ef)]();const _0x3d8782=await warehouse[_0xbb5776(0x151)]({'name':_0x3b8300,'room':_0x1e275f});_0x3e9fd8['product'][_0xbb5776(0x1c3)](_0x441e92=>{var _0x2b0ac0=_0xbb5776;if(_0x441e92[_0x2b0ac0(0x167)]>0x0){var _0x45034b=0x0;const _0xcf54d8=_0x3d8782[_0x2b0ac0(0x1e9)][_0x2b0ac0(0x1ea)](_0x2d7f5c=>{var _0x278804=_0x2b0ac0;_0x2d7f5c[_0x278804(0x164)]==_0x441e92[_0x278804(0x164)]&&_0x2d7f5c[_0x278804(0x1b0)]==_0x441e92[_0x278804(0x14c)]&&_0x2d7f5c['type']==_0x441e92[_0x278804(0x1a1)]&&_0x2d7f5c[_0x278804(0x1aa)]==_0x441e92[_0x278804(0x183)]&&_0x2d7f5c[_0x278804(0x194)]==_0x441e92[_0x278804(0x1ab)]&&_0x2d7f5c[_0x278804(0x1b9)]==_0x441e92[_0x278804(0x1b9)]&&_0x2d7f5c[_0x278804(0x1ff)]==_0x441e92[_0x278804(0x1ff)]&&(_0x2d7f5c['product_stock']=parseInt(_0x2d7f5c[_0x278804(0x1b6)])+parseInt(_0x441e92[_0x278804(0x167)]),_0x45034b++);});_0x45034b=='0'&&(_0x3d8782[_0x2b0ac0(0x1e9)]=_0x3d8782[_0x2b0ac0(0x1e9)]['concat']({'product_name':_0x441e92[_0x2b0ac0(0x164)],'product_stock':_0x441e92[_0x2b0ac0(0x167)],'bay':_0x441e92[_0x2b0ac0(0x1ab)],'bin':_0x441e92[_0x2b0ac0(0x183)],'type':_0x441e92[_0x2b0ac0(0x1a1)],'floorlevel':_0x441e92[_0x2b0ac0(0x14c)],'storage':_0x441e92[_0x2b0ac0(0x1ff)],'rack':_0x441e92[_0x2b0ac0(0x1b9)],'product_code':_0x441e92[_0x2b0ac0(0x1bc)],'primary_code':_0x441e92[_0x2b0ac0(0x17e)],'secondary_code':_0x441e92['secondary_code'],'maxProducts':_0x441e92[_0x2b0ac0(0x1c2)],'storage':_0x441e92[_0x2b0ac0(0x1ff)],'rack':_0x441e92[_0x2b0ac0(0x1b9)]}));}}),await _0x3d8782[_0xbb5776(0x1ef)](),_0x13cd6b[_0xbb5776(0x19e)](_0xbb5776(0x1ce),_0xbb5776(0x1c5)),_0x39bfcc['redirect']('/transfer/view');}catch(_0x298b8f){console['log'](_0x298b8f);}}),router[a0_0x3a5f2b(0x193)]('/barcode_scanner',async(_0x27bd85,_0x1dcb38)=>{var _0xaf70b6=a0_0x3a5f2b;const {FromWareHouse:_0x3b21cc,FromRoom:_0x2dc7cc,ToWarehouse:_0x4547b4,ToRoom:_0x45a7d5,primary_code:_0x2cf9db,Roomslist:_0x10f39a}=_0x27bd85[_0xaf70b6(0x235)],_0x3d3e51=_0x10f39a[_0xaf70b6(0x214)](','),_0x1dda5a=[];async function _0x176187(_0x195f3a){var _0x3b0c64=_0xaf70b6;const _0x8b76f9=await warehouse[_0x3b0c64(0x15e)]([{'$match':{'name':_0x3b21cc,'room':_0x195f3a}},{'$unwind':_0x3b0c64(0x22f)},{'$match':{'product_details.primary_code':_0x2cf9db}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x3b0c64(0x1b3)},'primary_code':{'$first':_0x3b0c64(0x203)},'secondary_code':{'$first':_0x3b0c64(0x1bf)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x3b0c64(0x1d8)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x3b0c64(0x173)},'pallet':{'$first':_0x3b0c64(0x158)},'unit':{'$first':_0x3b0c64(0x182)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3b0c64(0x19d)},'expiry_date':{'$first':_0x3b0c64(0x1fc)},'production_date':{'$first':_0x3b0c64(0x1d4)},'batch_code':{'$first':_0x3b0c64(0x22d)},'maxPerUnit':{'$first':_0x3b0c64(0x20c)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x3b0c64(0x180)},'maxProducts':{'$first':_0x3b0c64(0x190)},'invoice_product':{'$first':_0x3b0c64(0x18b)}}}]),_0x1e42c4=await warehouse[_0x3b0c64(0x15e)]([{'$match':{'name':_0x3b21cc,'room':_0x195f3a}},{'$unwind':_0x3b0c64(0x22f)},{'$match':{'product_details.secondary_code':_0x2cf9db}},{'$group':{'_id':_0x3b0c64(0x213),'name':{'$first':_0x3b0c64(0x20e)},'instock':{'$first':_0x3b0c64(0x1b3)},'primary_code':{'$first':_0x3b0c64(0x203)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3b0c64(0x1f4)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x3b0c64(0x1b4)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x3b0c64(0x158)},'unit':{'$first':_0x3b0c64(0x182)},'secondary_unit':{'$first':_0x3b0c64(0x223)},'storage':{'$first':_0x3b0c64(0x18d)},'rack':{'$first':_0x3b0c64(0x19d)},'expiry_date':{'$first':_0x3b0c64(0x1fc)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x3b0c64(0x22d)},'maxPerUnit':{'$first':_0x3b0c64(0x20c)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x3b0c64(0x180)},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':'$product_details.invoice'}}}]);if(_0x8b76f9[_0x3b0c64(0x1b2)]>0x0)_0x1dda5a[_0x3b0c64(0x224)](_0x8b76f9);else _0x1e42c4[_0x3b0c64(0x1b2)]>0x0&&_0x1dda5a[_0x3b0c64(0x224)](_0x1e42c4);}const _0x56c787=_0x3d3e51['map'](_0x4570db=>_0x176187(_0x4570db));await Promise[_0xaf70b6(0x1e7)](_0x56c787),_0x1dcb38['json'](_0x1dda5a);}),router['post'](a0_0x3a5f2b(0x1a7),async(_0x31c2d4,_0x36d322)=>{var _0x219a92=a0_0x3a5f2b;try{const {FromWareHouse:_0x3605ff,FromRoom:_0x3c7640,ToWarehouse:_0xa39f0a,ToRoom:_0xa34eeb,secondary_code:_0x54c424}=_0x31c2d4[_0x219a92(0x235)],_0x8748a5=await warehouse[_0x219a92(0x15e)]([{'$match':{'name':_0x3605ff}},{'$unwind':_0x219a92(0x22f)},{'$match':{'product_details.secondary_code':_0x54c424}},{'$group':{'_id':_0x219a92(0x213),'name':{'$first':_0x219a92(0x20e)},'primary_code':{'$first':_0x219a92(0x203)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x219a92(0x1f4)},'instock':{'$first':_0x219a92(0x1b3)},'warehouse':{'$first':_0x219a92(0x22c)},'level':{'$first':_0x219a92(0x17f)},'isle':{'$first':_0x219a92(0x22a)},'pallet':{'$first':_0x219a92(0x1ed)},'maxProducts':{'$first':_0x219a92(0x190)},'unit':{'$first':_0x219a92(0x182)}}}]);_0x36d322[_0x219a92(0x210)](0xc8)[_0x219a92(0x201)](_0x8748a5);}catch(_0x2fd981){_0x36d322[_0x219a92(0x210)](0x194)[_0x219a92(0x201)]({'message':_0x2fd981[_0x219a92(0x1b1)]});}}),router[a0_0x3a5f2b(0x193)](a0_0x3a5f2b(0x1b5),async(_0x3e23cf,_0x51e798)=>{var _0x4ca9e7=a0_0x3a5f2b;try{const {FromWareHouse:_0x1d8c28,FromRoom:_0x3aaea0,ToWarehouse:_0x4f5919,ToRoom:_0x409485,product_code:_0x402bc5}=_0x3e23cf[_0x4ca9e7(0x235)],_0x4eb4a9=await warehouse[_0x4ca9e7(0x15e)]([{'$match':{'name':_0x1d8c28}},{'$unwind':_0x4ca9e7(0x22f)},{'$match':{'product_details.product_code':_0x402bc5}},{'$group':{'_id':_0x4ca9e7(0x213),'name':{'$first':_0x4ca9e7(0x20e)},'primary_code':{'$first':_0x4ca9e7(0x203)},'secondary_code':{'$first':_0x4ca9e7(0x1bf)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x4ca9e7(0x1b3)},'warehouse':{'$first':_0x4ca9e7(0x22c)},'level':{'$first':_0x4ca9e7(0x17f)},'isle':{'$first':_0x4ca9e7(0x22a)},'pallet':{'$first':_0x4ca9e7(0x1ed)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':'$product_details.unit'}}}]);_0x51e798[_0x4ca9e7(0x210)](0xc8)[_0x4ca9e7(0x201)](_0x4eb4a9);}catch(_0x247353){_0x51e798[_0x4ca9e7(0x210)](0x194)[_0x4ca9e7(0x201)]({'message':_0x247353[_0x4ca9e7(0x1b1)]});}}),router['post'](a0_0x3a5f2b(0x156),async(_0x49e559,_0x35a177)=>{var _0x517241=a0_0x3a5f2b;const {level:_0x61746b,isle:_0x33d55d,pallet:_0x2ae5eb,warehouses:_0x30d417,room:_0xa613fa}=_0x49e559['body'];try{const _0x44772f=await warehouse['aggregate']([{'$match':{'name':_0x30d417,'room':_0xa613fa}},{'$unwind':_0x517241(0x22f)},{'$match':{'product_details.level':parseInt(_0x61746b),'product_details.isle':_0x33d55d,'product_details.pallet':parseInt(_0x2ae5eb)}},{'$group':{'_id':_0x517241(0x213),'name':{'$first':_0x517241(0x20e)},'product_stock':{'$first':'$product_details.product_stock'},'level':{'$first':_0x517241(0x17f)},'isle':{'$first':_0x517241(0x22a)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x517241(0x190)}}}]);_0x35a177['status'](0xc8)[_0x517241(0x201)](_0x44772f);}catch(_0x40ed8f){_0x35a177['status'](0x194)[_0x517241(0x201)]({'message':_0x40ed8f[_0x517241(0x1b1)]});}}),module['exports']=router;