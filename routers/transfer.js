var a0_0x421aec=a0_0x2ac8;function a0_0x35ae(){var _0x335450=['secondary_unit','email','$date','log','from_prod_isle','<tbody\x20style=\x22text-align:\x20center;\x22>','max_per_unit','from_bin','$product_details.product_stock','to_floorlevel','get','../models/all_models','/preview/:id','$product_details.batch_code','language','767922yOKHyg','$product_details.pallet','TRF-','Transfer\x20Edit\x20Successfully','6486821CwIyFv','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$invoice','$product_details.product_code','from_floorlevel','from_warehouse','16MliJOQ','ToRoomAssigned','status','to_bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','14481bmKXaR','from_rack','Rack\x20C','New_Qty_Converted','body','</head><body>','push','save','Enclosed','</td>','$product_details.level','4648945pxpILU','$product','COLD\x20STORAGE','maxperunit','map','product_name','Ambient','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','floorlevel','/view/add_transfer','Receiving\x20Area','concat','product_details','errors','warehouse','to_warehouse','forEach','/CheckingWarehouse','Rack\x20B','edit_transfer_view','createTransport','<!DOCTYPE\x20html>','$product_details.bay','toString','prod_name','random','note','floor','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Return\x20Rooms','to_bin','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Portuguese\x20(BR)','/view/:id','Arabic','string','1780628lNAMUZ','<strong>\x20Regards\x20</strong>','from_room','from_prod_level','to_room','from_types','</tr>','json','redirect','Level','$product_details.primary_code','</body></html>','findById','primary_unit','1NZGtGf','from_storage','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Transfer\x20Mail','to_prod_pallet','Spanish','<span\x20style=\x22float:\x20right;\x22>','</thead>','3470rLGlBO','to_types','Logo.png','bin','filter','length','$product_details.isle','$_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','product_code3','from_room_name','German','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','from_rak','24iBhuok','$product_details.maxPerUnit','unit','from_invoice','primary_code','Rack\x20A','add_transfer','Raw\x20Materials','$product_details.unit','/transfer/view','<tr>','render','MaxStocks_data2','padStart','Arabic\x20(ae)','<h5\x20style=\x22text-align:\x20left;\x22>','$product_details.secondary_unit','exports','from_quantity','all','$room','expiry_date','post','invoice','catch','user','type','nodemailer','\x20</h2>','To_invoice','DRY\x20STORAGE','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.expiry_date','Chinese','updateOne','date','English\x20(US)','$product_details.secondary_code','to_invoice','Floor','role','host','to_prod_isle','RoomAssigned','production_date','slice','$product.from_room_name','product_stock','</h5>','bay','25hnzayU','error','from_prod_pallet','from_prod_qty','back','batch_code','/upload/','prod_cat','$product_details.type','$from_warehouse','$product_details.maxProducts','site_title','\x20Order\x20Date\x20:\x20','Portuguese','Rack\x20E','find','params','product_code','Rack\x20D','</table>','secondary_code','$name','2412768wHukJC','sendMail','<hr\x20class=\x22my-3\x22>','rak','An\x20error\x20occurred.','Router','to_prod_level','$product_details.floorlevel','English','$to_warehouse','Email\x20sent\x20successfully','2214582JdNdvy','staff','/view','/barcode_scanner3','findOne','$product_details._id','rack','to_prod_qty','to_quantity','master','$product_details.storage','logo','product','to_room_name','finalize','/transfer/preview/','from_bay','RMSEmail','message','success','Shelves','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','$product_details.production_date','</div>','maxProducts','$product_details.product_name','split','An\x20error\x20occurred\x20while\x20saving\x20data.','express','\x20Order\x20Number\x20:\x20','then','flash','Enabled','_id','aggregate','<div>','Hindi','$product_details.rack','<h2>\x20','$product_details','French','storage','<h5>','</span>','$product_details.bin'];a0_0x35ae=function(){return _0x335450;};return a0_0x35ae();}(function(_0x247894,_0x300dc7){var _0x3e049d=a0_0x2ac8,_0x241359=_0x247894();while(!![]){try{var _0x291ce5=-parseInt(_0x3e049d(0x207))/0x1*(parseInt(_0x3e049d(0x173))/0x2)+parseInt(_0x3e049d(0x1ba))/0x3+parseInt(_0x3e049d(0x1f9))/0x4+parseInt(_0x3e049d(0x15d))/0x5*(parseInt(_0x3e049d(0x17e))/0x6)+-parseInt(_0x3e049d(0x1d4))/0x7*(-parseInt(_0x3e049d(0x1c4))/0x8)+parseInt(_0x3e049d(0x1c9))/0x9*(-parseInt(_0x3e049d(0x20f))/0xa)+parseInt(_0x3e049d(0x1be))/0xb*(-parseInt(_0x3e049d(0x12b))/0xc);if(_0x291ce5===_0x300dc7)break;else _0x241359['push'](_0x241359['shift']());}catch(_0x5ac8e2){_0x241359['push'](_0x241359['shift']());}}}(a0_0x35ae,0xe33c5));const express=require(a0_0x421aec(0x19a)),app=express(),router=express[a0_0x421aec(0x178)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x421aec(0x1b6)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),nodemailer=require(a0_0x421aec(0x146));router[a0_0x421aec(0x1b5)](a0_0x421aec(0x180),auth,async(_0x56f988,_0x232991)=>{var _0x470eae=a0_0x421aec;try{const {username:_0x2abf99,email:_0x21ba25,role:_0x22bfcc}=_0x56f988[_0x470eae(0x144)],_0x184e9d=_0x56f988[_0x470eae(0x144)],_0x5b48e6=await profile[_0x470eae(0x182)]({'email':_0x184e9d[_0x470eae(0x1ac)]}),_0x168ac6=await master_shop[_0x470eae(0x16c)]();console[_0x470eae(0x1ae)](_0x470eae(0x187),_0x168ac6);let _0x1d64a6;if(_0x184e9d[_0x470eae(0x153)]=='staff'){const _0x10d628=await staff[_0x470eae(0x182)]({'email':_0x184e9d[_0x470eae(0x1ac)]});_0x1d64a6=await transfers['find']({'from_warehouse':_0x10d628[_0x470eae(0x1e3)]});}else _0x1d64a6=await transfers['aggregate']([{'$unwind':_0x470eae(0x1d5)},{'$group':{'_id':_0x470eae(0x124),'invoice':{'$first':_0x470eae(0x1c0)},'date':{'$first':_0x470eae(0x1ad)},'from_warehouse':{'$first':_0x470eae(0x166)},'to_warehouse':{'$first':_0x470eae(0x17c)},'from_room_name':{'$addToSet':_0x470eae(0x159)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x14f)){var _0x276a39=users[_0x470eae(0x17b)];console[_0x470eae(0x1ae)](_0x276a39);}else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x1a2))var _0x276a39=users['Hindi'];else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x128))var _0x276a39=users['German'];else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x20c))var _0x276a39=users[_0x470eae(0x20c)];else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x1a6))var _0x276a39=users['French'];else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]=='Portuguese\x20(BR)')var _0x276a39=users['Portuguese'];else{if(_0x168ac6[0x0]['language']==_0x470eae(0x14c))var _0x276a39=users[_0x470eae(0x14c)];else{if(_0x168ac6[0x0][_0x470eae(0x1b9)]==_0x470eae(0x139))var _0x276a39=users[_0x470eae(0x1f7)];}}}}}}}_0x232991['render']('transfer',{'success':_0x56f988['flash'](_0x470eae(0x191)),'errors':_0x56f988[_0x470eae(0x19d)](_0x470eae(0x1e2)),'role':_0x184e9d,'profile':_0x5b48e6,'master_shop':_0x168ac6,'transfer':_0x1d64a6,'language':_0x276a39});}catch(_0x2af49e){console['log'](_0x2af49e);}});async function getRandom8DigitNumber(){var _0x53f908=a0_0x421aec;const _0xceb20b=0x989680,_0x48b4d1=0x5f5e0ff,_0x229d37=Math[_0x53f908(0x1f0)](Math[_0x53f908(0x1ee)]()*(_0x48b4d1-_0xceb20b+0x1))+_0xceb20b;var _0x4db5cc;const _0x419092=await transfers[_0x53f908(0x182)]({'invoice':_0x53f908(0x1bc)+_0x229d37});return _0x419092&&_0x419092[_0x53f908(0x122)]>0x0?_0x4db5cc=_0x53f908(0x1bc)+_0x229d37:_0x4db5cc=_0x53f908(0x1bc)+_0x229d37,_0x4db5cc;}function a0_0x2ac8(_0x1774a6,_0x2bf9f6){var _0x35ae1a=a0_0x35ae();return a0_0x2ac8=function(_0x2ac8bb,_0x215868){_0x2ac8bb=_0x2ac8bb-0x11e;var _0x333965=_0x35ae1a[_0x2ac8bb];return _0x333965;},a0_0x2ac8(_0x1774a6,_0x2bf9f6);}router[a0_0x421aec(0x1b5)](a0_0x421aec(0x1de),auth,async(_0x594f05,_0x41c62f)=>{var _0x2c053f=a0_0x421aec;try{const {username:_0x532367,email:_0x2ea4ef,role:_0xf44a17}=_0x594f05[_0x2c053f(0x144)],_0x1f7649=_0x594f05['user'],_0x4550f1=await profile[_0x2c053f(0x182)]({'email':_0x1f7649['email']}),_0x1df541=await master_shop[_0x2c053f(0x16c)]();console[_0x2c053f(0x1ae)](_0x2c053f(0x187),_0x1df541);let _0x8ffc6;if(_0x1f7649['role']==_0x2c053f(0x17f)){const _0x36fc50=await staff['findOne']({'email':_0x1f7649[_0x2c053f(0x1ac)]});_0x8ffc6=await warehouse['aggregate']([{'$match':{'status':_0x2c053f(0x19e),'name':_0x36fc50[_0x2c053f(0x1e3)],'warehouse_category':_0x2c053f(0x132)}},{'$group':{'_id':'$name','name':{'$first':_0x2c053f(0x172)}}}]);}else _0x8ffc6=await warehouse[_0x2c053f(0x1a0)]([{'$match':{'status':_0x2c053f(0x19e),'warehouse_category':_0x2c053f(0x132)}},{'$group':{'_id':_0x2c053f(0x172),'name':{'$first':_0x2c053f(0x172)}}}]);var _0x2068c4=[_0x2c053f(0x1da),_0x2c053f(0x1d1),_0x2c053f(0x1f2)];const _0x6b9d99=await transfers['find']({}),_0x19ce0a=_0x6b9d99[_0x2c053f(0x122)]+0x1,_0x4ccaf4=_0x2c053f(0x1bc)+_0x19ce0a[_0x2c053f(0x1ec)]()[_0x2c053f(0x138)](0x5,'0');if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x14f)){var _0x582f33=users[_0x2c053f(0x17b)];console[_0x2c053f(0x1ae)](_0x582f33);}else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x1a2))var _0x582f33=users[_0x2c053f(0x1a2)];else{if(_0x1df541[0x0]['language']==_0x2c053f(0x128))var _0x582f33=users[_0x2c053f(0x128)];else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x20c))var _0x582f33=users[_0x2c053f(0x20c)];else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]=='French')var _0x582f33=users['French'];else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x1f5))var _0x582f33=users[_0x2c053f(0x16a)];else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x14c))var _0x582f33=users[_0x2c053f(0x14c)];else{if(_0x1df541[0x0][_0x2c053f(0x1b9)]==_0x2c053f(0x139))var _0x582f33=users[_0x2c053f(0x1f7)];}}}}}}}const _0x3ebc9b=getRandom8DigitNumber();_0x3ebc9b['then'](_0x20cef8=>{var _0x932792=_0x2c053f;_0x41c62f[_0x932792(0x136)](_0x932792(0x131),{'success':_0x594f05[_0x932792(0x19d)](_0x932792(0x191)),'errors':_0x594f05['flash'](_0x932792(0x1e2)),'role':_0x1f7649,'profile':_0x4550f1,'master_shop':_0x1df541,'warehouse':_0x8ffc6,'language':_0x582f33,'rooms_data':_0x2068c4,'invoice':_0x20cef8});})[_0x2c053f(0x143)](_0x1258ed=>{var _0x2f9abd=_0x2c053f;_0x594f05['flash'](_0x2f9abd(0x1e2),_0x2f9abd(0x1bf)),_0x41c62f[_0x2f9abd(0x201)]('/transfer/view');});}catch(_0x556db0){console[_0x2c053f(0x1ae)](_0x556db0);}}),router[a0_0x421aec(0x141)]('/view/add_transfer',auth,async(_0x28ea62,_0x388e74)=>{var _0x3a1ebb=a0_0x421aec;try{console[_0x3a1ebb(0x1ae)](_0x28ea62[_0x3a1ebb(0x1cd)]);const {date:_0x50756e,from_warehouse:_0x17b1be,FromRoom_name:_0x40070f,to_warehouse:_0x307c75,ToRoom_name:_0x254e32,prod_name:_0x1847e5,from_prod_qty:_0x5b3bd1,from_prod_level:_0x1ecd28,from_prod_isle:_0x2d507f,from_prod_pallet:_0x588c55,to_prod_qty:_0x16efc3,to_prod_level:_0x1ff66a,to_prod_isle:_0x45669b,to_prod_pallet:_0x3ed3e7,primary_code:_0x110aec,secondary_code:_0x14b39c,product_code3:_0x3976c3,note:_0x3638e8,MaxStocks_data2:_0x18a36d,invoice:_0x60447a,expiry_date:_0x2ab7ba}=_0x28ea62[_0x3a1ebb(0x1cd)];if(typeof _0x1847e5==_0x3a1ebb(0x1f8))var _0xdf54f4=[_0x28ea62[_0x3a1ebb(0x1cd)]['prod_name']],_0xf7f9be=[_0x28ea62['body'][_0x3a1ebb(0x160)]],_0x487367=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1fc)]],_0x3af9c9=[_0x28ea62[_0x3a1ebb(0x1cd)]['New_Qty_Converted']],_0x4dfac8=[_0x28ea62[_0x3a1ebb(0x1cd)]['to_prod_level']],_0x567b89=[_0x28ea62[_0x3a1ebb(0x1cd)]['primary_code']],_0x2dfaef=[_0x28ea62['body']['secondary_code']],_0x28fc8d=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x126)]],_0x257a88=[_0x28ea62['body']['MaxStocks_data2']],_0x14e007=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x206)]],_0x49492a=[_0x28ea62['body'][_0x3a1ebb(0x1ab)]],_0x54bf99=[_0x28ea62['body'][_0x3a1ebb(0x162)]],_0x2c6c58=[_0x28ea62['body'][_0x3a1ebb(0x140)]],_0x1ee8f0=[_0x28ea62[_0x3a1ebb(0x1cd)]['max_per_unit']],_0x5572a1=[_0x28ea62['body'][_0x3a1ebb(0x157)]],_0x2add0b=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x164)]],_0x3ef4c3=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x156)]],_0x656c00=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1c5)]],_0x4c7056=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x12e)]],_0xc2b40a=[_0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x151)]];else var _0xdf54f4=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1ed)]],_0xf7f9be=[..._0x28ea62['body']['from_prod_qty']],_0x487367=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1fc)]],_0x3af9c9=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1cc)]],_0x4dfac8=[..._0x28ea62[_0x3a1ebb(0x1cd)]['to_prod_level']],_0x567b89=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x12f)]],_0x2dfaef=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x171)]],_0x28fc8d=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x126)]],_0x257a88=[..._0x28ea62['body'][_0x3a1ebb(0x137)]],_0x14e007=[..._0x28ea62['body'][_0x3a1ebb(0x206)]],_0x49492a=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1ab)]],_0x54bf99=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x162)]],_0x2c6c58=[..._0x28ea62[_0x3a1ebb(0x1cd)]['expiry_date']],_0x1ee8f0=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1b1)]],_0x5572a1=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x157)]],_0x2add0b=[..._0x28ea62['body'][_0x3a1ebb(0x164)]],_0x3ef4c3=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x156)]],_0x656c00=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x1c5)]],_0x4c7056=[..._0x28ea62[_0x3a1ebb(0x1cd)][_0x3a1ebb(0x12e)]],_0xc2b40a=[..._0x28ea62['body'][_0x3a1ebb(0x151)]];const _0x5ec013=_0xdf54f4[_0x3a1ebb(0x1d8)](_0x269b6e=>{return _0x269b6e={'product_name':_0x269b6e};});_0xf7f9be['forEach']((_0x32d5f7,_0x203ace)=>{var _0x397263=_0x3a1ebb;_0x5ec013[_0x203ace][_0x397263(0x13d)]=_0x32d5f7;}),_0x4c7056[_0x3a1ebb(0x1e5)]((_0x14b47e,_0x10d470)=>{var _0x465a6c=_0x3a1ebb;_0x5ec013[_0x10d470][_0x465a6c(0x12e)]=_0x14b47e;}),_0xc2b40a['forEach']((_0x3e93de,_0x1f6854)=>{_0x5ec013[_0x1f6854]['To_invoice']=_0x3e93de;}),_0x487367[_0x3a1ebb(0x1e5)]((_0x3da25a,_0xb5736d)=>{_0x3ef4c3['forEach']((_0x5c831c,_0xedc958)=>{var _0x4736fa=a0_0x2ac8;if(_0x5c831c==_0x4736fa(0x1df)&&_0xb5736d==_0xedc958){var _0x571e8f=_0x3da25a[_0x4736fa(0x158)](0x3);_0x5ec013[_0xb5736d][_0x4736fa(0x208)]=_0x3da25a[0x0],_0x5ec013[_0xb5736d][_0x4736fa(0x1ca)]=_0x3da25a[0x1],_0x5ec013[_0xb5736d][_0x4736fa(0x18e)]=0x0,_0x5ec013[_0xb5736d]['from_bin']=0x0,_0x5ec013[_0xb5736d][_0x4736fa(0x1fe)]=_0x4736fa(0x152),_0x5ec013[_0xb5736d][_0x4736fa(0x1c2)]=_0x571e8f;}else{if(_0x5c831c=='Shelves'&&_0xb5736d==_0xedc958){var _0x571e8f=_0x3da25a[_0x4736fa(0x158)](0x3);_0x5ec013[_0xb5736d][_0x4736fa(0x208)]=_0x3da25a[0x0],_0x5ec013[_0xb5736d][_0x4736fa(0x1ca)]=_0x3da25a[0x1],_0x5ec013[_0xb5736d][_0x4736fa(0x18e)]=0x0,_0x5ec013[_0xb5736d][_0x4736fa(0x1b2)]=0x0,_0x5ec013[_0xb5736d][_0x4736fa(0x1fe)]='Floor',_0x5ec013[_0xb5736d][_0x4736fa(0x1c2)]=_0x3da25a[0x5];}else{if(_0xb5736d==_0xedc958){var _0x1c82f8;if(_0x3da25a[0x4]=='L')_0x1c82f8=_0x4736fa(0x202);else _0x3da25a[0x4]=='F'&&(_0x1c82f8=_0x4736fa(0x152));_0x5ec013[_0xb5736d][_0x4736fa(0x208)]=_0x3da25a[0x0],_0x5ec013[_0xb5736d][_0x4736fa(0x1ca)]=_0x3da25a[0x1],_0x5ec013[_0xb5736d][_0x4736fa(0x18e)]=_0x3da25a[0x2],_0x5ec013[_0xb5736d]['from_bin']=_0x3da25a[0x3],_0x5ec013[_0xb5736d]['from_types']=_0x1c82f8,_0x5ec013[_0xb5736d][_0x4736fa(0x1c2)]=_0x3da25a[0x5];}}}});}),_0x3af9c9[_0x3a1ebb(0x1e5)]((_0x3369fb,_0x1d6cf2)=>{var _0x1fff77=_0x3a1ebb;_0x5ec013[_0x1d6cf2][_0x1fff77(0x186)]=_0x3369fb;}),_0x4dfac8[_0x3a1ebb(0x1e5)]((_0x4975d7,_0x3a8af9)=>{var _0x26752e=_0x3a1ebb;_0x656c00[_0x26752e(0x1e5)]((_0x1b5b65,_0xb00fc4)=>{var _0x6b186b=_0x26752e;if(_0x1b5b65==_0x6b186b(0x1df)&&_0x3a8af9==_0xb00fc4){var _0x44ab56=_0x4975d7[_0x6b186b(0x158)](0x3);_0x5ec013[_0x3a8af9][_0x6b186b(0x1a7)]=_0x4975d7[0x0],_0x5ec013[_0x3a8af9][_0x6b186b(0x184)]=_0x4975d7[0x1],_0x5ec013[_0x3a8af9][_0x6b186b(0x1c7)]=0x0,_0x5ec013[_0x3a8af9][_0x6b186b(0x1f3)]=0x0,_0x5ec013[_0x3a8af9][_0x6b186b(0x11e)]='Floor',_0x5ec013[_0x3a8af9]['to_floorlevel']=_0x44ab56;}else{if(_0x1b5b65==_0x6b186b(0x192)&&_0x3a8af9==_0xb00fc4){var _0x44ab56=_0x4975d7['slice'](0x3);_0x5ec013[_0x3a8af9]['storage']=_0x4975d7[0x0],_0x5ec013[_0x3a8af9][_0x6b186b(0x184)]=_0x4975d7[0x1],_0x5ec013[_0x3a8af9][_0x6b186b(0x1c7)]=0x0,_0x5ec013[_0x3a8af9][_0x6b186b(0x1f3)]=0x0,_0x5ec013[_0x3a8af9]['to_types']=_0x6b186b(0x152),_0x5ec013[_0x3a8af9][_0x6b186b(0x1b4)]=_0x4975d7[0x5];}else{if(_0x3a8af9==_0xb00fc4){var _0x26d17b;if(_0x4975d7[0x4]=='L')_0x26d17b=_0x6b186b(0x202);else _0x4975d7[0x4]=='F'&&(_0x26d17b='Floor');_0x5ec013[_0x3a8af9]['storage']=_0x4975d7[0x0],_0x5ec013[_0x3a8af9][_0x6b186b(0x184)]=_0x4975d7[0x1],_0x5ec013[_0x3a8af9][_0x6b186b(0x1c7)]=_0x4975d7[0x2],_0x5ec013[_0x3a8af9][_0x6b186b(0x1f3)]=_0x4975d7[0x3],_0x5ec013[_0x3a8af9]['to_types']=_0x26d17b,_0x5ec013[_0x3a8af9][_0x6b186b(0x1b4)]=_0x4975d7[0x5];}}}});}),_0x567b89[_0x3a1ebb(0x1e5)]((_0x60476c,_0x59f362)=>{var _0x16494b=_0x3a1ebb;_0x5ec013[_0x59f362][_0x16494b(0x12f)]=_0x60476c;}),_0x2dfaef[_0x3a1ebb(0x1e5)]((_0x4e32bb,_0x4312dc)=>{var _0xcd7343=_0x3a1ebb;_0x5ec013[_0x4312dc][_0xcd7343(0x171)]=_0x4e32bb;}),_0x28fc8d[_0x3a1ebb(0x1e5)]((_0x958c84,_0x1a631d)=>{_0x5ec013[_0x1a631d]['product_code']=_0x958c84;}),_0x257a88[_0x3a1ebb(0x1e5)]((_0x312658,_0x289be3)=>{_0x5ec013[_0x289be3]['maxProducts']=_0x312658;}),_0x14e007[_0x3a1ebb(0x1e5)]((_0x3b64eb,_0x227f9b)=>{var _0xc00dfe=_0x3a1ebb;_0x5ec013[_0x227f9b][_0xc00dfe(0x12d)]=_0x3b64eb;}),_0x49492a[_0x3a1ebb(0x1e5)]((_0x3eb5be,_0x39fdd4)=>{var _0x2a9907=_0x3a1ebb;_0x5ec013[_0x39fdd4][_0x2a9907(0x1ab)]=_0x3eb5be;}),_0x54bf99[_0x3a1ebb(0x1e5)]((_0x4dc2e0,_0x1c6a2e)=>{var _0x14dc5d=_0x3a1ebb;_0x5ec013[_0x1c6a2e][_0x14dc5d(0x162)]=_0x4dc2e0;}),_0x2c6c58[_0x3a1ebb(0x1e5)]((_0x46abc8,_0x8d0fa6)=>{var _0x1b1b1c=_0x3a1ebb;_0x5ec013[_0x8d0fa6][_0x1b1b1c(0x140)]=_0x46abc8;}),_0x1ee8f0[_0x3a1ebb(0x1e5)]((_0x1c3b06,_0x2b98b2)=>{var _0x35e843=_0x3a1ebb;_0x5ec013[_0x2b98b2][_0x35e843(0x1d7)]=_0x1c3b06;}),_0x5572a1[_0x3a1ebb(0x1e5)]((_0x24ca4d,_0xe8ca5d)=>{var _0x22cacc=_0x3a1ebb;_0x5ec013[_0xe8ca5d][_0x22cacc(0x157)]=_0x24ca4d;}),_0x2add0b[_0x3a1ebb(0x1e5)]((_0x185e20,_0x19ab81)=>{var _0x380a02=_0x3a1ebb;_0x5ec013[_0x19ab81][_0x380a02(0x164)]=_0x185e20;}),_0x3ef4c3[_0x3a1ebb(0x1e5)]((_0x4119bc,_0x58d0e4)=>{var _0x39d055=_0x3a1ebb;_0x5ec013[_0x58d0e4][_0x39d055(0x127)]=_0x4119bc;}),_0x656c00[_0x3a1ebb(0x1e5)]((_0x351c54,_0x576e6c)=>{var _0x1b8195=_0x3a1ebb;_0x5ec013[_0x576e6c][_0x1b8195(0x18b)]=_0x351c54;});const _0x4ba69d=_0x5ec013[_0x3a1ebb(0x121)](_0x4df128=>_0x4df128[_0x3a1ebb(0x186)]!=='0'&&_0x4df128[_0x3a1ebb(0x186)]!==''||_0x4df128[_0x3a1ebb(0x1b4)]!=='0'&&_0x4df128[_0x3a1ebb(0x1b4)]!==''),_0x1af1d3=new transfers({'date':_0x50756e,'from_warehouse':_0x17b1be,'to_warehouse':_0x307c75,'product':_0x4ba69d,'note':_0x3638e8,'invoice':_0x60447a}),_0x11b66e=await _0x1af1d3['save']();_0x28ea62['flash'](_0x3a1ebb(0x191),'Product\x20Transfer\x20successfully'),_0x388e74[_0x3a1ebb(0x201)](_0x3a1ebb(0x18d)+_0x11b66e['_id']);}catch(_0x3ab028){console[_0x3a1ebb(0x1ae)](_0x3ab028),_0x388e74[_0x3a1ebb(0x1c6)](0xc8)['json']({'errorMessage':_0x3ab028[_0x3a1ebb(0x190)]});}}),router['get'](a0_0x421aec(0x1b7),auth,async(_0x445753,_0x39d2cc)=>{var _0x14c69c=a0_0x421aec;try{const {username:_0x19badd,email:_0x2ded52,role:_0x5bdcae}=_0x445753[_0x14c69c(0x144)],_0xf5f175=_0x445753[_0x14c69c(0x144)],_0x3e285a=await profile['findOne']({'email':_0xf5f175[_0x14c69c(0x1ac)]}),_0x3aba63=await master_shop['find']();console[_0x14c69c(0x1ae)](_0x14c69c(0x187),_0x3aba63);const _0x3d6ba1=await transfers[_0x14c69c(0x205)](_0x445753['params']['id']);let _0x34df6b=new Date(_0x3d6ba1[_0x14c69c(0x140)]),_0x3e8aa1=('0'+_0x34df6b['getDate']())['slice'](-0x2),_0x47881d=('0'+(_0x34df6b['getMonth']()+0x1))[_0x14c69c(0x158)](-0x2),_0x18078c=_0x34df6b['getFullYear'](),_0x2c85e6=_0x18078c+'-'+_0x47881d+'-'+_0x3e8aa1,_0xa75821;if(_0xf5f175[_0x14c69c(0x153)]==_0x14c69c(0x17f)){const _0x4559ed=await staff[_0x14c69c(0x182)]({'email':_0xf5f175[_0x14c69c(0x1ac)]});_0xa75821=await warehouse[_0x14c69c(0x16c)]({'status':_0x14c69c(0x19e),'name':_0x4559ed[_0x14c69c(0x1e3)],'warehouse_category':_0x14c69c(0x132)});}else _0xa75821=await warehouse[_0x14c69c(0x16c)]({'status':_0x14c69c(0x19e),'warehouse_category':_0x14c69c(0x132)});const _0x25bf72=await warehouse[_0x14c69c(0x1a0)]([{'$match':{'name':_0x3d6ba1[_0x14c69c(0x1c3)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x14c69c(0x183),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x14c69c(0x1b3)},'bay':{'$first':_0x14c69c(0x1eb)},'bin':{'$first':_0x14c69c(0x1aa)},'type':{'$first':_0x14c69c(0x165)},'floorlevel':{'$first':_0x14c69c(0x17a)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x14c69c(0x150)},'product_code':{'$first':_0x14c69c(0x1c1)},'storage':{'$first':_0x14c69c(0x188)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x14c69c(0x14b)},'production_date':{'$first':_0x14c69c(0x194)},'room':{'$first':_0x14c69c(0x13f)}}}]);if(_0x3aba63[0x0][_0x14c69c(0x1b9)]==_0x14c69c(0x14f)){var _0x16015f=users['English'];console[_0x14c69c(0x1ae)](_0x16015f);}else{if(_0x3aba63[0x0]['language']==_0x14c69c(0x1a2))var _0x16015f=users['Hindi'];else{if(_0x3aba63[0x0][_0x14c69c(0x1b9)]==_0x14c69c(0x128))var _0x16015f=users[_0x14c69c(0x128)];else{if(_0x3aba63[0x0]['language']==_0x14c69c(0x20c))var _0x16015f=users[_0x14c69c(0x20c)];else{if(_0x3aba63[0x0][_0x14c69c(0x1b9)]==_0x14c69c(0x1a6))var _0x16015f=users['French'];else{if(_0x3aba63[0x0][_0x14c69c(0x1b9)]=='Portuguese\x20(BR)')var _0x16015f=users['Portuguese'];else{if(_0x3aba63[0x0][_0x14c69c(0x1b9)]=='Chinese')var _0x16015f=users[_0x14c69c(0x14c)];else{if(_0x3aba63[0x0][_0x14c69c(0x1b9)]==_0x14c69c(0x139))var _0x16015f=users[_0x14c69c(0x1f7)];}}}}}}}_0x39d2cc[_0x14c69c(0x136)](_0x14c69c(0x1e8),{'success':_0x445753[_0x14c69c(0x19d)]('success'),'errors':_0x445753[_0x14c69c(0x19d)]('errors'),'role':_0xf5f175,'profile':_0x3e285a,'master_shop':_0x3aba63,'warehouse':_0xa75821,'transfer':_0x3d6ba1,'stock':_0x25bf72,'language':_0x16015f});}catch(_0x557247){console[_0x14c69c(0x1ae)](_0x557247);}}),router[a0_0x421aec(0x141)](a0_0x421aec(0x1b7),auth,async(_0x4396ea,_0x52d21e)=>{var _0x4d3fbc=a0_0x421aec;try{const _0x105990=_0x4396ea[_0x4d3fbc(0x16d)]['id'],{from_warehouse:_0x4ce1fe,FromRoom_name:_0x4f1f8c,to_warehouse:_0x6d7ab1,ToRoom_name:_0x5babe5}=_0x4396ea[_0x4d3fbc(0x1cd)],_0x31ee29=await transfers['findById']({'_id':_0x105990}),_0x30fb7e=_0x31ee29[_0x4d3fbc(0x18a)][_0x4d3fbc(0x1d8)](async _0x10c05d=>{var _0x2c55a8=_0x4d3fbc;if(_0x10c05d[_0x2c55a8(0x186)]>0x0){var _0x49e024=await warehouse[_0x2c55a8(0x182)]({'name':_0x31ee29[_0x2c55a8(0x1c3)],'room':_0x10c05d[_0x2c55a8(0x127)],'warehouse_category':_0x2c55a8(0x132)});const _0x57b619=_0x49e024[_0x2c55a8(0x1e1)][_0x2c55a8(0x1d8)](_0x4e8e62=>{var _0x2bfba8=_0x2c55a8;_0x4e8e62[_0x2bfba8(0x1d9)]==_0x10c05d['product_name']&&_0x4e8e62[_0x2bfba8(0x1dd)]==_0x10c05d[_0x2bfba8(0x1c2)]&&_0x4e8e62[_0x2bfba8(0x145)]==_0x10c05d[_0x2bfba8(0x1fe)]&&_0x4e8e62[_0x2bfba8(0x120)]==_0x10c05d[_0x2bfba8(0x1b2)]&&_0x4e8e62['bay']==_0x10c05d[_0x2bfba8(0x18e)]&&_0x4e8e62[_0x2bfba8(0x184)]==_0x10c05d['from_rack']&&_0x4e8e62[_0x2bfba8(0x1a7)]==_0x10c05d[_0x2bfba8(0x208)]&&_0x4e8e62['expiry_date']==_0x10c05d['expiry_date']&&_0x4e8e62[_0x2bfba8(0x162)]==_0x10c05d[_0x2bfba8(0x162)]&&_0x4e8e62[_0x2bfba8(0x157)]==_0x10c05d[_0x2bfba8(0x157)]&&_0x4e8e62['invoice']==_0x10c05d[_0x2bfba8(0x12e)]&&(_0x4e8e62[_0x2bfba8(0x15a)]=_0x4e8e62[_0x2bfba8(0x15a)]-_0x10c05d[_0x2bfba8(0x186)]);});}return _0x49e024;});Promise[_0x4d3fbc(0x13e)](_0x30fb7e)[_0x4d3fbc(0x19c)](async _0x4a320b=>{var _0x3234e1=_0x4d3fbc;try{for(const _0x117c2a of _0x4a320b){await _0x117c2a[_0x3234e1(0x1d0)]();}try{const _0x417c24=_0x31ee29[_0x3234e1(0x18a)]['map'](async _0x15c42d=>{var _0x3c1693=_0x3234e1;if(_0x15c42d[_0x3c1693(0x186)]>0x0){var _0x2ca44f=await warehouse[_0x3c1693(0x182)]({'name':_0x31ee29[_0x3c1693(0x1e4)],'room':_0x15c42d['to_room_name'],'warehouse_category':_0x3c1693(0x132)}),_0x544767=0x0;const _0x1c7a84=_0x2ca44f['product_details'][_0x3c1693(0x1d8)](_0x145334=>{var _0x32c45b=_0x3c1693;_0x145334['product_name']==_0x15c42d['product_name']&&_0x145334[_0x32c45b(0x1dd)]==_0x15c42d['to_floorlevel']&&_0x145334['type']==_0x15c42d[_0x32c45b(0x11e)]&&_0x145334[_0x32c45b(0x120)]==_0x15c42d[_0x32c45b(0x1f3)]&&_0x145334['bay']==_0x15c42d['to_bay']&&_0x145334[_0x32c45b(0x184)]==_0x15c42d['rack']&&_0x145334[_0x32c45b(0x1a7)]==_0x15c42d['storage']&&_0x145334[_0x32c45b(0x140)]==_0x15c42d[_0x32c45b(0x140)]&&_0x145334['batch_code']==_0x15c42d[_0x32c45b(0x162)]&&_0x145334['production_date']==_0x15c42d[_0x32c45b(0x157)]&&_0x145334[_0x32c45b(0x142)]==_0x15c42d[_0x32c45b(0x148)]&&(_0x145334[_0x32c45b(0x15a)]=_0x145334[_0x32c45b(0x15a)]+_0x15c42d[_0x32c45b(0x186)],_0x544767++);});_0x544767=='0'&&(_0x2ca44f[_0x3c1693(0x1e1)]=_0x2ca44f['product_details']['concat']({'product_name':_0x15c42d[_0x3c1693(0x1d9)],'product_stock':_0x15c42d[_0x3c1693(0x186)],'bay':_0x15c42d['to_bay'],'bin':_0x15c42d[_0x3c1693(0x1f3)],'type':_0x15c42d['to_types'],'floorlevel':_0x15c42d[_0x3c1693(0x1b4)],'storage':_0x15c42d[_0x3c1693(0x1a7)],'rack':_0x15c42d['rack'],'product_code':_0x15c42d[_0x3c1693(0x16e)],'primary_code':_0x15c42d['primary_code'],'secondary_code':_0x15c42d[_0x3c1693(0x171)],'maxProducts':_0x15c42d[_0x3c1693(0x196)],'storage':_0x15c42d[_0x3c1693(0x1a7)],'rack':_0x15c42d['rack'],'expiry_date':_0x15c42d[_0x3c1693(0x140)],'maxPerUnit':_0x15c42d[_0x3c1693(0x1d7)],'batch_code':_0x15c42d[_0x3c1693(0x162)],'production_date':_0x15c42d[_0x3c1693(0x157)]}));}return _0x2ca44f;});Promise[_0x3234e1(0x13e)](_0x417c24)[_0x3234e1(0x19c)](async _0xcfa6c1=>{var _0x4ba47e=_0x3234e1;try{for(const _0x180196 of _0xcfa6c1){await warehouse[_0x4ba47e(0x14d)]({'_id':_0x180196[_0x4ba47e(0x19f)]},{'$addToSet':{'product_details':{'$each':_0x180196[_0x4ba47e(0x1e1)]}}});}_0x31ee29[_0x4ba47e(0x18c)]='True';const _0x1433a2=await _0x31ee29[_0x4ba47e(0x1d0)](),_0x85715b=await master_shop['find'](),_0x55a712=await email_settings[_0x4ba47e(0x182)](),_0x1b3774=await supervisor_settings[_0x4ba47e(0x16c)]();var _0x193265=_0x31ee29['product'],_0x2e2c5b='',_0x49bd73;for(_0x49bd73 in _0x193265){_0x2e2c5b+=_0x4ba47e(0x135)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x193265[_0x49bd73][_0x4ba47e(0x1d9)]+_0x4ba47e(0x1d2)+_0x4ba47e(0x209)+_0x193265[_0x49bd73][_0x4ba47e(0x16e)]+'</td>'+_0x4ba47e(0x209)+_0x193265[_0x49bd73][_0x4ba47e(0x186)]+_0x4ba47e(0x1d2)+_0x4ba47e(0x209)+_0x193265[_0x49bd73][_0x4ba47e(0x12d)]+_0x4ba47e(0x1d2)+_0x4ba47e(0x209)+_0x193265[_0x49bd73][_0x4ba47e(0x1ab)]+'</td>'+_0x4ba47e(0x209)+_0x31ee29[_0x4ba47e(0x1e4)]+_0x4ba47e(0x1d2)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x193265[_0x49bd73]['to_room_name']+_0x4ba47e(0x1d2)+_0x4ba47e(0x209)+_0x193265[_0x49bd73][_0x4ba47e(0x1a7)]+_0x193265[_0x49bd73][_0x4ba47e(0x184)]+_0x193265[_0x49bd73][_0x4ba47e(0x1c7)]+_0x193265[_0x49bd73][_0x4ba47e(0x1f3)]+_0x193265[_0x49bd73]['to_types'][0x0]+_0x193265[_0x49bd73][_0x4ba47e(0x1b4)]+_0x4ba47e(0x1d2),_0x4ba47e(0x1ff);}let _0x5bdf80=nodemailer[_0x4ba47e(0x1e9)]({'host':_0x55a712[_0x4ba47e(0x154)],'port':Number(_0x55a712['port']),'secure':![],'auth':{'user':_0x55a712['email'],'pass':_0x55a712['password']}}),_0x24a67e={'from':_0x55a712['email'],'to':_0x1b3774[0x0][_0x4ba47e(0x18f)],'subject':_0x4ba47e(0x20a),'attachments':[{'filename':_0x4ba47e(0x11f),'path':__dirname+'/../public'+_0x4ba47e(0x163)+_0x85715b[0x0]['image'],'cid':_0x4ba47e(0x189)}],'html':_0x4ba47e(0x1ea)+'<html><head><title></title>'+_0x4ba47e(0x1ce)+'<div>'+_0x4ba47e(0x129)+_0x4ba47e(0x1a1)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x4ba47e(0x195)+_0x4ba47e(0x1a1)+_0x4ba47e(0x1a4)+_0x85715b[0x0][_0x4ba47e(0x168)]+_0x4ba47e(0x147)+_0x4ba47e(0x195)+_0x4ba47e(0x195)+_0x4ba47e(0x175)+'<div>'+_0x4ba47e(0x13a)+_0x4ba47e(0x19b)+_0x31ee29[_0x4ba47e(0x142)]+'\x20'+_0x4ba47e(0x20d)+_0x4ba47e(0x169)+_0x31ee29['date']+'\x20'+_0x4ba47e(0x1a9)+_0x4ba47e(0x15b)+_0x4ba47e(0x195)+_0x4ba47e(0x1f4)+_0x4ba47e(0x14a)+'<tr>'+_0x4ba47e(0x1c8)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x4ba47e(0x1dc)+_0x4ba47e(0x1f1)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x4ba47e(0x125)+_0x4ba47e(0x193)+_0x4ba47e(0x1ff)+_0x4ba47e(0x20e)+_0x4ba47e(0x1b0)+'\x20'+_0x2e2c5b+'\x20'+'</tbody>'+_0x4ba47e(0x170)+_0x4ba47e(0x1a1)+_0x4ba47e(0x1fa)+_0x4ba47e(0x1a8)+_0x85715b[0x0][_0x4ba47e(0x168)]+_0x4ba47e(0x15b)+_0x4ba47e(0x195)+_0x4ba47e(0x195)+_0x4ba47e(0x204)};_0x5bdf80[_0x4ba47e(0x174)](_0x24a67e,function(_0x1dab7a,_0x863a39){var _0x1bf00e=_0x4ba47e;_0x1dab7a?(console[_0x1bf00e(0x1ae)](_0x1dab7a),console['log']('Error\x20Occurs')):console[_0x1bf00e(0x1ae)](_0x1bf00e(0x17d));}),_0x4396ea[_0x4ba47e(0x19d)](_0x4ba47e(0x191),'Transfer\x20Finalize\x20Successfully'),_0x52d21e[_0x4ba47e(0x201)]('/picking_list/PDF_transfer_rm/'+_0x1433a2['_id']);}catch(_0x5da6de){console[_0x4ba47e(0x15e)](_0x5da6de),_0x52d21e[_0x4ba47e(0x1c6)](0x1f4)[_0x4ba47e(0x200)]({'Perror':_0x4ba47e(0x199),'message':_0x5da6de[_0x4ba47e(0x190)]});}})[_0x3234e1(0x143)](_0x573308=>{var _0x20c032=_0x3234e1;console[_0x20c032(0x15e)](_0x573308),_0x52d21e[_0x20c032(0x1c6)](0x1f4)[_0x20c032(0x200)]({'Perror':_0x20c032(0x177)});});}catch(_0x31949b){_0x52d21e['json'](_0x31949b);}}catch(_0x743b12){console[_0x3234e1(0x15e)](_0x743b12),_0x52d21e[_0x3234e1(0x1c6)](0x1f4)[_0x3234e1(0x200)]({'Merror':_0x3234e1(0x199),'Message':_0x743b12[_0x3234e1(0x190)]});}})[_0x4d3fbc(0x143)](_0x489168=>{var _0x103d06=_0x4d3fbc;console[_0x103d06(0x15e)](_0x489168),_0x52d21e[_0x103d06(0x1c6)](0x1f4)[_0x103d06(0x200)]({'Merror':_0x103d06(0x177)});});}catch(_0x4f572b){console[_0x4d3fbc(0x1ae)](_0x4f572b);}});function BayBinSelected(_0x1298ac,_0x4b5257){var _0x19eedb=a0_0x421aec,_0x2562df=[],_0x1d1bf3=[],_0x4be15c=[],_0x3e493c=[],_0x5a6656=[],_0x32df35=[];let _0x3783c0=[];if(_0x1298ac==_0x19eedb(0x149))switch(_0x4b5257){case _0x19eedb(0x130):_0x2562df=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x1d1bf3=[0x1,0x2],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['D'],_0x32df35=['A'];break;case _0x19eedb(0x1e7):_0x2562df=[0x6,0x5,0x4,0x3,0x2,0x1],_0x1d1bf3=[0x1,0x2],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['D'],_0x32df35=['B'];break;case _0x19eedb(0x192):_0x2562df=[0x0],_0x1d1bf3=[0x0],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x152)],_0x5a6656=['D'],_0x32df35=['S'];break;case _0x19eedb(0x1df):_0x2562df=[0x0],_0x1d1bf3=[0x0],_0x3e493c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x4be15c=[_0x19eedb(0x152)],_0x5a6656=['D'],_0x32df35=['R'];break;}else{if(_0x1298ac==_0x19eedb(0x1d6))switch(_0x4b5257){case _0x19eedb(0x130):_0x2562df=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x1d1bf3=['B','F'],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=['Level',_0x19eedb(0x152)],_0x5a6656=['C'],_0x32df35=['A'];break;case _0x19eedb(0x1e7):_0x2562df=[0x5,0x4,0x3,0x2,0x1],_0x1d1bf3=['F','B','S'],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['C'],_0x32df35=['B'];break;case _0x19eedb(0x1cb):_0x2562df=[0x1,0x2,0x3,0x4,0x5],_0x1d1bf3=['B','F','S'],_0x3e493c=[0x5,0x4,0x3,0x2,0x1],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['C'],_0x32df35=['C'];break;case _0x19eedb(0x16f):_0x2562df=[0x5,0x4,0x3,0x2,0x1],_0x1d1bf3=['F','B','S'],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['C'],_0x32df35=['D'];break;case _0x19eedb(0x16b):_0x2562df=[0x4,0x3,0x2,0x1],_0x1d1bf3=[0x1,0x2],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202),_0x19eedb(0x152)],_0x5a6656=['C'],_0x32df35=['E'];break;case'Rack\x20F':_0x2562df=[0x1,0x2,0x3],_0x1d1bf3=[0x1,0x2],_0x3e493c=[0x1,0x2,0x3,0x4,0x5],_0x4be15c=[_0x19eedb(0x202)],_0x5a6656=['C'],_0x32df35=['F'];break;}}return{'levels':_0x2562df,'Isle':_0x1d1bf3,'rack':_0x3e493c,'type':_0x4be15c,'storage':_0x5a6656,'rak':_0x32df35};}router['get'](a0_0x421aec(0x1f6),auth,async(_0x2157f4,_0x162362)=>{var _0x468bd1=a0_0x421aec;try{const {username:_0xa276ee,email:_0x416e9f,role:_0x42c00f}=_0x2157f4[_0x468bd1(0x144)],_0x39e45b=_0x2157f4['user'],_0x1513b0=await profile[_0x468bd1(0x182)]({'email':_0x39e45b['email']}),_0x155a09=await master_shop['find'](),_0xe0af6d=await transfers[_0x468bd1(0x205)](_0x2157f4[_0x468bd1(0x16d)]['id']);let _0x1144cd;if(_0x39e45b['role']==_0x468bd1(0x17f)){const _0x333828=await staff['findOne']({'email':_0x39e45b[_0x468bd1(0x1ac)]});_0x1144cd=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x333828['warehouse'],'warehouse_category':_0x468bd1(0x132)}},{'$group':{'_id':_0x468bd1(0x172),'name':{'$first':'$name'}}}]);}else _0x1144cd=await warehouse[_0x468bd1(0x1a0)]([{'$match':{'status':_0x468bd1(0x19e),'warehouse_category':_0x468bd1(0x132)}},{'$group':{'_id':_0x468bd1(0x172),'name':{'$first':'$name'}}}]);const _0x310b5a=await warehouse[_0x468bd1(0x1a0)]([{'$match':{'name':_0xe0af6d['from_warehouse'],'warehouse_category':_0x468bd1(0x132)}},{'$unwind':'$product_details'},{'$group':{'_id':_0x468bd1(0x183),'name':{'$first':_0x468bd1(0x197)},'product_stock':{'$first':_0x468bd1(0x1b3)},'bay':{'$first':_0x468bd1(0x1eb)},'bin':{'$first':_0x468bd1(0x1aa)},'type':{'$first':_0x468bd1(0x165)},'floorlevel':{'$first':_0x468bd1(0x17a)},'primary_code':{'$first':_0x468bd1(0x203)},'secondary_code':{'$first':_0x468bd1(0x150)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x468bd1(0x188)},'rack':{'$first':_0x468bd1(0x1a3)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x468bd1(0x194)},'room':{'$first':_0x468bd1(0x13f)}}}]),_0x54e53c=await product[_0x468bd1(0x16c)]({}),_0x3b6c7b=BayBinSelected(_0xe0af6d[_0x468bd1(0x1e4)],_0xe0af6d[_0x468bd1(0x1fd)]);if(_0x155a09[0x0]['language']==_0x468bd1(0x14f)){var _0x25e5d9=users[_0x468bd1(0x17b)];console[_0x468bd1(0x1ae)](_0x25e5d9);}else{if(_0x155a09[0x0][_0x468bd1(0x1b9)]==_0x468bd1(0x1a2))var _0x25e5d9=users['Hindi'];else{if(_0x155a09[0x0]['language']==_0x468bd1(0x128))var _0x25e5d9=users['German'];else{if(_0x155a09[0x0]['language']==_0x468bd1(0x20c))var _0x25e5d9=users[_0x468bd1(0x20c)];else{if(_0x155a09[0x0]['language']==_0x468bd1(0x1a6))var _0x25e5d9=users[_0x468bd1(0x1a6)];else{if(_0x155a09[0x0][_0x468bd1(0x1b9)]==_0x468bd1(0x1f5))var _0x25e5d9=users[_0x468bd1(0x16a)];else{if(_0x155a09[0x0][_0x468bd1(0x1b9)]=='Chinese')var _0x25e5d9=users['Chinese'];else{if(_0x155a09[0x0][_0x468bd1(0x1b9)]==_0x468bd1(0x139))var _0x25e5d9=users[_0x468bd1(0x1f7)];}}}}}}}_0x162362[_0x468bd1(0x136)]('edit_transfer',{'success':_0x2157f4[_0x468bd1(0x19d)](_0x468bd1(0x191)),'errors':_0x2157f4['flash'](_0x468bd1(0x1e2)),'role':_0x39e45b,'profile':_0x1513b0,'master_shop':_0x155a09,'warehouse':_0x1144cd,'transfer':_0xe0af6d,'stock':_0x310b5a,'unit':_0x54e53c,'language':_0x25e5d9});}catch(_0x21ce63){console['log'](_0x21ce63);}}),router[a0_0x421aec(0x141)](a0_0x421aec(0x1f6),auth,async(_0x5f05ae,_0x1d62dc)=>{var _0x96f42a=a0_0x421aec;try{const _0x5bc09e=_0x5f05ae[_0x96f42a(0x16d)]['id'],_0x3f641e=await transfers[_0x96f42a(0x205)](_0x5bc09e);_0x1d62dc[_0x96f42a(0x200)](_0x5f05ae[_0x96f42a(0x1cd)]);return;const {date:_0x1c41e5,from_warehouse:_0x2a836b,FromRoom_name:_0x297b7f,to_warehouse:_0x2f1e11,ToRoom_name:_0x587bfa,prod_name:_0x27536f,from_prod_qty:_0x3f4793,from_prod_level:_0x2b67f8,from_prod_isle:_0x499137,from_prod_pallet:_0x3605c9,to_prod_qty:_0x103cb5,to_prod_level:_0x5a7c42,to_prod_isle:_0x4d1ab9,to_prod_pallet:_0x28d2ba,primary_code:_0x2914d8,secondary_code:_0x5c8975,product_code3:_0x2aaa6d,note:_0x4dae43,invoice:_0x12b80d,expiry_date:_0x1ea843}=_0x5f05ae[_0x96f42a(0x1cd)];if(typeof _0x27536f==_0x96f42a(0x1f8))var _0x4cbd49=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1ed)]],_0x2b8877=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x160)]],_0x5e69fb=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1fc)]],_0x4275af=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1af)]],_0x56a53b=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x15f)]],_0x964235=[_0x5f05ae['body'][_0x96f42a(0x1fe)]],_0x53a38a=[_0x5f05ae['body'][_0x96f42a(0x185)]],_0xc13c9d=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x179)]],_0x19a66e=[_0x5f05ae['body']['to_prod_isle']],_0x4719bb=[_0x5f05ae['body'][_0x96f42a(0x20b)]],_0x11d437=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x11e)]],_0x61d179=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1a7)]],_0x1bfd7f=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x176)]],_0x1dc651=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x12f)]],_0x2916c8=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x171)]],_0x562deb=[_0x5f05ae['body'][_0x96f42a(0x126)]],_0x5ed6bc=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x137)]],_0x3dbd97=[_0x5f05ae[_0x96f42a(0x1cd)]['unit']],_0x7be9e5=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1ab)]],_0x1b0fd5=[_0x5f05ae['body'][_0x96f42a(0x162)]],_0x1c21d2=[_0x5f05ae['body'][_0x96f42a(0x140)]],_0xb849b0=[_0x5f05ae[_0x96f42a(0x1cd)]['from_storage']],_0x595b32=[_0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x12a)]];else var _0x4cbd49=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1ed)]],_0x61d179=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1a7)]],_0x1bfd7f=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x176)]],_0x964235=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1fe)]],_0x11d437=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x11e)]],_0x2b8877=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x160)]],_0x5e69fb=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1fc)]],_0x4275af=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x1af)]],_0x56a53b=[..._0x5f05ae['body'][_0x96f42a(0x15f)]],_0x53a38a=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x185)]],_0xc13c9d=[..._0x5f05ae['body'][_0x96f42a(0x179)]],_0x19a66e=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x155)]],_0x4719bb=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x20b)]],_0x1dc651=[..._0x5f05ae[_0x96f42a(0x1cd)]['primary_code']],_0x2916c8=[..._0x5f05ae['body'][_0x96f42a(0x171)]],_0x562deb=[..._0x5f05ae['body']['product_code3']],_0x5ed6bc=[..._0x5f05ae['body']['MaxStocks_data2']],_0x3dbd97=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x12d)]],_0x7be9e5=[..._0x5f05ae[_0x96f42a(0x1cd)]['secondary_unit']],_0x1b0fd5=[..._0x5f05ae['body'][_0x96f42a(0x162)]],_0x1c21d2=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x140)]],_0xb849b0=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x208)]],_0x595b32=[..._0x5f05ae[_0x96f42a(0x1cd)][_0x96f42a(0x12a)]];const _0x152447=_0x4cbd49[_0x96f42a(0x1d8)](_0x421ec7=>{return _0x421ec7={'product_name':_0x421ec7};});_0x2b8877['forEach']((_0xa2231f,_0x2ec0ec)=>{var _0x35a73e=_0x96f42a;_0x152447[_0x2ec0ec][_0x35a73e(0x13d)]=_0xa2231f;}),_0x5e69fb['forEach']((_0x4362e3,_0x29e0e9)=>{_0x152447[_0x29e0e9]['from_bay']=_0x4362e3;}),_0x4275af[_0x96f42a(0x1e5)]((_0x926f2c,_0x4b812f)=>{var _0x311d74=_0x96f42a;_0x152447[_0x4b812f][_0x311d74(0x1b2)]=_0x926f2c;}),_0x56a53b[_0x96f42a(0x1e5)]((_0x2b770c,_0x747c45)=>{_0x152447[_0x747c45]['from_floorlevel']=_0x2b770c;}),_0x53a38a['forEach']((_0x1cd6c7,_0x44f48a)=>{_0x152447[_0x44f48a]['to_quantity']=_0x1cd6c7;}),_0xc13c9d['forEach']((_0x21c86c,_0x1b1afa)=>{var _0x5e336f=_0x96f42a;_0x152447[_0x1b1afa][_0x5e336f(0x1c7)]=_0x21c86c;}),_0x19a66e['forEach']((_0x2c0f74,_0x33182a)=>{_0x152447[_0x33182a]['to_bin']=_0x2c0f74;}),_0x4719bb['forEach']((_0x48ed5d,_0x155b49)=>{var _0x13dd39=_0x96f42a;_0x152447[_0x155b49][_0x13dd39(0x1b4)]=_0x48ed5d;}),_0x1dc651[_0x96f42a(0x1e5)]((_0x389de9,_0x19839b)=>{_0x152447[_0x19839b]['primary_code']=_0x389de9;}),_0x2916c8[_0x96f42a(0x1e5)]((_0x3403cb,_0x582029)=>{var _0x46d360=_0x96f42a;_0x152447[_0x582029][_0x46d360(0x171)]=_0x3403cb;}),_0x562deb['forEach']((_0x31568d,_0x464a5c)=>{var _0x49ff01=_0x96f42a;_0x152447[_0x464a5c][_0x49ff01(0x16e)]=_0x31568d;}),_0x5ed6bc[_0x96f42a(0x1e5)]((_0x134f30,_0x107cc4)=>{var _0x305409=_0x96f42a;_0x152447[_0x107cc4][_0x305409(0x196)]=_0x134f30;}),_0x3dbd97['forEach']((_0xe6e886,_0x3e619b)=>{var _0x8b4f3b=_0x96f42a;_0x152447[_0x3e619b][_0x8b4f3b(0x12d)]=_0xe6e886;}),_0x7be9e5[_0x96f42a(0x1e5)]((_0x4eb8da,_0x1d1f81)=>{var _0x266304=_0x96f42a;_0x152447[_0x1d1f81][_0x266304(0x1ab)]=_0x4eb8da;}),_0x1b0fd5[_0x96f42a(0x1e5)]((_0x1a074e,_0x7dd2b2)=>{var _0x9c5146=_0x96f42a;_0x152447[_0x7dd2b2][_0x9c5146(0x162)]=_0x1a074e;}),_0x1c21d2[_0x96f42a(0x1e5)]((_0x5d6da6,_0x362b2b)=>{var _0x26be41=_0x96f42a;_0x152447[_0x362b2b][_0x26be41(0x140)]=_0x5d6da6;}),_0x61d179[_0x96f42a(0x1e5)]((_0x56debd,_0x3372cf)=>{var _0x4c85ae=_0x96f42a;_0x152447[_0x3372cf][_0x4c85ae(0x1a7)]=_0x56debd;}),_0x1bfd7f[_0x96f42a(0x1e5)]((_0xdac7ba,_0x4f0ac6)=>{_0x152447[_0x4f0ac6]['rack']=_0xdac7ba;}),_0x964235[_0x96f42a(0x1e5)]((_0x589f78,_0x581de0)=>{var _0xdc86a7=_0x96f42a;_0x152447[_0x581de0][_0xdc86a7(0x1fe)]=_0x589f78;}),_0x11d437[_0x96f42a(0x1e5)]((_0x1a532f,_0x46d7e6)=>{_0x152447[_0x46d7e6]['to_types']=_0x1a532f;}),_0xb849b0[_0x96f42a(0x1e5)]((_0x4b1757,_0x5a369c)=>{_0x152447[_0x5a369c]['from_storage']=_0x4b1757;}),_0x595b32[_0x96f42a(0x1e5)]((_0x4a76ea,_0x3c7e8d)=>{var _0x4aac5d=_0x96f42a;_0x152447[_0x3c7e8d][_0x4aac5d(0x1ca)]=_0x4a76ea;});const _0x520e9f=_0x152447[_0x96f42a(0x121)](_0xccea60=>_0xccea60['to_quantity']!=='0'&&_0xccea60[_0x96f42a(0x186)]!==''||_0xccea60[_0x96f42a(0x1b4)]!=='0'&&_0xccea60[_0x96f42a(0x1b4)]!=='');var _0x3f8447=0x0;_0x520e9f[_0x96f42a(0x1e5)](_0x110ade=>{var _0x3659d5=_0x96f42a;parseInt(_0x110ade[_0x3659d5(0x13d)])<parseInt(_0x110ade['to_quantity'])&&_0x3f8447++;});if(_0x3f8447!=0x0)return _0x5f05ae[_0x96f42a(0x19d)](_0x96f42a(0x1e2),_0x96f42a(0x1db)),_0x1d62dc['redirect'](_0x96f42a(0x161));const _0x35405c=await warehouse[_0x96f42a(0x182)]({'name':_0x3f641e[_0x96f42a(0x1c3)],'room':_0x3f641e[_0x96f42a(0x1fb)]});_0x3f641e[_0x96f42a(0x18a)][_0x96f42a(0x1e5)](_0x201d14=>{var _0xd4b0ea=_0x96f42a;if(_0x201d14[_0xd4b0ea(0x186)]>0x0){const _0x1b4896=_0x35405c[_0xd4b0ea(0x1e1)][_0xd4b0ea(0x1d8)](_0x4fdea2=>{var _0x143742=_0xd4b0ea;_0x4fdea2[_0x143742(0x1d9)]==_0x201d14[_0x143742(0x1d9)]&&_0x4fdea2[_0x143742(0x1dd)]==_0x201d14[_0x143742(0x1c2)]&&_0x4fdea2['type']==_0x201d14[_0x143742(0x1fe)]&&_0x4fdea2[_0x143742(0x120)]==_0x201d14['from_bin']&&_0x4fdea2[_0x143742(0x15c)]==_0x201d14[_0x143742(0x18e)]&&_0x4fdea2[_0x143742(0x184)]==_0x201d14[_0x143742(0x1ca)]&&_0x4fdea2['storage']==_0x201d14[_0x143742(0x208)]&&(_0x4fdea2[_0x143742(0x15a)]=parseInt(_0x4fdea2[_0x143742(0x15a)])+parseInt(_0x201d14[_0x143742(0x186)]));});}}),await _0x35405c[_0x96f42a(0x1d0)]();const _0x3c2082=await warehouse[_0x96f42a(0x182)]({'name':_0x3f641e[_0x96f42a(0x1e4)],'room':_0x3f641e['to_room']});_0x3f641e[_0x96f42a(0x18a)][_0x96f42a(0x1e5)](_0x472c9b=>{var _0x722433=_0x96f42a;if(_0x472c9b[_0x722433(0x186)]>0x0){const _0x3c3e73=_0x3c2082[_0x722433(0x1e1)][_0x722433(0x1d8)](_0x1eda6b=>{var _0x47e072=_0x722433;_0x1eda6b['product_name']==_0x472c9b[_0x47e072(0x1d9)]&&_0x1eda6b['floorlevel']==_0x472c9b[_0x47e072(0x1b4)]&&_0x1eda6b['type']==_0x472c9b['to_types']&&_0x1eda6b[_0x47e072(0x120)]==_0x472c9b[_0x47e072(0x1f3)]&&_0x1eda6b[_0x47e072(0x15c)]==_0x472c9b[_0x47e072(0x1c7)]&&_0x1eda6b[_0x47e072(0x184)]==_0x472c9b[_0x47e072(0x184)]&&_0x1eda6b['storage']==_0x472c9b[_0x47e072(0x1a7)]&&(_0x1eda6b[_0x47e072(0x15a)]=parseInt(_0x1eda6b[_0x47e072(0x15a)])-parseInt(_0x472c9b['to_quantity']));});}}),await _0x3c2082[_0x96f42a(0x1d0)](),_0x3f641e[_0x96f42a(0x14e)]=_0x1c41e5,_0x3f641e[_0x96f42a(0x1c3)]=_0x2a836b,_0x3f641e['to_warehouse']=_0x2f1e11,_0x3f641e['product']=_0x520e9f,_0x3f641e[_0x96f42a(0x1ef)]=_0x4dae43,_0x3f641e[_0x96f42a(0x142)]=_0x12b80d;const _0x2ced0e=await _0x3f641e[_0x96f42a(0x1d0)]();console[_0x96f42a(0x1ae)](_0x2ced0e);const _0x481a2c=await warehouse[_0x96f42a(0x182)]({'name':_0x2a836b,'room':_0x297b7f});_0x2ced0e[_0x96f42a(0x18a)][_0x96f42a(0x1e5)](_0x3d9cd3=>{var _0x25a3e5=_0x96f42a;if(_0x3d9cd3[_0x25a3e5(0x186)]>0x0){const _0x13044e=_0x481a2c['product_details'][_0x25a3e5(0x1d8)](_0x5454b2=>{var _0x4a0933=_0x25a3e5;_0x5454b2[_0x4a0933(0x1d9)]==_0x3d9cd3[_0x4a0933(0x1d9)]&&_0x5454b2[_0x4a0933(0x1dd)]==_0x3d9cd3[_0x4a0933(0x1c2)]&&_0x5454b2[_0x4a0933(0x145)]==_0x3d9cd3['from_types']&&_0x5454b2[_0x4a0933(0x120)]==_0x3d9cd3[_0x4a0933(0x1b2)]&&_0x5454b2[_0x4a0933(0x15c)]==_0x3d9cd3['from_bay']&&_0x5454b2['rack']==_0x3d9cd3[_0x4a0933(0x1ca)]&&_0x5454b2[_0x4a0933(0x1a7)]==_0x3d9cd3['from_storage']&&(_0x5454b2[_0x4a0933(0x15a)]=parseInt(_0x5454b2[_0x4a0933(0x15a)])-parseInt(_0x3d9cd3[_0x4a0933(0x186)]));});}}),await _0x481a2c['save']();const _0x5bb5f9=await warehouse[_0x96f42a(0x182)]({'name':_0x2f1e11,'room':_0x587bfa});_0x2ced0e[_0x96f42a(0x18a)][_0x96f42a(0x1e5)](_0x180c72=>{var _0x4189cf=_0x96f42a;if(_0x180c72[_0x4189cf(0x186)]>0x0){var _0x5605df=0x0;const _0x48de00=_0x5bb5f9['product_details'][_0x4189cf(0x1d8)](_0x4d0bd7=>{var _0x5cd3c6=_0x4189cf;_0x4d0bd7[_0x5cd3c6(0x1d9)]==_0x180c72[_0x5cd3c6(0x1d9)]&&_0x4d0bd7[_0x5cd3c6(0x1dd)]==_0x180c72['to_floorlevel']&&_0x4d0bd7['type']==_0x180c72['to_types']&&_0x4d0bd7[_0x5cd3c6(0x120)]==_0x180c72[_0x5cd3c6(0x1f3)]&&_0x4d0bd7[_0x5cd3c6(0x15c)]==_0x180c72[_0x5cd3c6(0x1c7)]&&_0x4d0bd7[_0x5cd3c6(0x184)]==_0x180c72[_0x5cd3c6(0x184)]&&_0x4d0bd7[_0x5cd3c6(0x1a7)]==_0x180c72[_0x5cd3c6(0x1a7)]&&(_0x4d0bd7[_0x5cd3c6(0x15a)]=parseInt(_0x4d0bd7[_0x5cd3c6(0x15a)])+parseInt(_0x180c72[_0x5cd3c6(0x186)]),_0x5605df++);});_0x5605df=='0'&&(_0x5bb5f9['product_details']=_0x5bb5f9[_0x4189cf(0x1e1)][_0x4189cf(0x1e0)]({'product_name':_0x180c72[_0x4189cf(0x1d9)],'product_stock':_0x180c72['to_quantity'],'bay':_0x180c72['to_bay'],'bin':_0x180c72[_0x4189cf(0x1f3)],'type':_0x180c72[_0x4189cf(0x11e)],'floorlevel':_0x180c72['to_floorlevel'],'storage':_0x180c72[_0x4189cf(0x1a7)],'rack':_0x180c72[_0x4189cf(0x184)],'product_code':_0x180c72['product_code'],'primary_code':_0x180c72['primary_code'],'secondary_code':_0x180c72[_0x4189cf(0x171)],'maxProducts':_0x180c72[_0x4189cf(0x196)],'storage':_0x180c72['storage'],'rack':_0x180c72[_0x4189cf(0x184)]}));}}),await _0x5bb5f9['save'](),_0x5f05ae[_0x96f42a(0x19d)]('success',_0x96f42a(0x1bd)),_0x1d62dc['redirect'](_0x96f42a(0x134));}catch(_0x9c3b3c){console[_0x96f42a(0x1ae)](_0x9c3b3c);}}),router[a0_0x421aec(0x141)]('/barcode_scanner',async(_0x227032,_0x2b6def)=>{var _0x28a340=a0_0x421aec;const {FromWareHouse:_0x5b6c1c,FromRoom:_0x3d186f,ToWarehouse:_0x2b3330,ToRoom:_0x5e7a66,primary_code:_0x52181b,Roomslist:_0x28025a}=_0x227032[_0x28a340(0x1cd)],_0x1feb56=_0x28025a[_0x28a340(0x198)](','),_0x5ba119=[];async function _0xe4ed1a(_0xa8b384){var _0x32a0b5=_0x28a340;const _0x5aff78=await warehouse['aggregate']([{'$match':{'name':_0x5b6c1c,'room':_0xa8b384}},{'$unwind':_0x32a0b5(0x1a5)},{'$match':{'product_details.primary_code':_0x52181b}},{'$group':{'_id':_0x32a0b5(0x183),'name':{'$first':_0x32a0b5(0x197)},'instock':{'$first':_0x32a0b5(0x1b3)},'primary_code':{'$first':_0x32a0b5(0x203)},'secondary_code':{'$first':_0x32a0b5(0x150)},'product_code':{'$first':_0x32a0b5(0x1c1)},'level':{'$first':_0x32a0b5(0x1eb)},'isle':{'$first':_0x32a0b5(0x1aa)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x32a0b5(0x17a)},'unit':{'$first':_0x32a0b5(0x133)},'secondary_unit':{'$first':_0x32a0b5(0x13b)},'storage':{'$first':_0x32a0b5(0x188)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x32a0b5(0x14b)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x32a0b5(0x1b8)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x32a0b5(0x167)}}}]),_0x2a2656=await warehouse[_0x32a0b5(0x1a0)]([{'$match':{'name':_0x5b6c1c,'room':_0xa8b384}},{'$unwind':_0x32a0b5(0x1a5)},{'$match':{'product_details.secondary_code':_0x52181b}},{'$group':{'_id':_0x32a0b5(0x183),'name':{'$first':_0x32a0b5(0x197)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x32a0b5(0x150)},'product_code':{'$first':_0x32a0b5(0x1c1)},'level':{'$first':_0x32a0b5(0x1eb)},'isle':{'$first':_0x32a0b5(0x1aa)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x32a0b5(0x17a)},'unit':{'$first':_0x32a0b5(0x133)},'secondary_unit':{'$first':_0x32a0b5(0x13b)},'storage':{'$first':_0x32a0b5(0x188)},'rack':{'$first':_0x32a0b5(0x1a3)},'expiry_date':{'$first':_0x32a0b5(0x14b)},'production_date':{'$first':_0x32a0b5(0x194)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x32a0b5(0x12c)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x32a0b5(0x13f)},'maxProducts':{'$first':_0x32a0b5(0x167)}}}]);if(_0x5aff78['length']>0x0)_0x5ba119[_0x32a0b5(0x1cf)](_0x5aff78);else _0x2a2656[_0x32a0b5(0x122)]>0x0&&_0x5ba119[_0x32a0b5(0x1cf)](_0x2a2656);}const _0x121a2d=_0x1feb56[_0x28a340(0x1d8)](_0x3024e6=>_0xe4ed1a(_0x3024e6));await Promise[_0x28a340(0x13e)](_0x121a2d),_0x2b6def[_0x28a340(0x200)](_0x5ba119);}),router[a0_0x421aec(0x141)]('/barcode_scanner2',async(_0x131af0,_0x3731fc)=>{var _0xb683d4=a0_0x421aec;try{const {FromWareHouse:_0xd1885f,FromRoom:_0x19605f,ToWarehouse:_0x85fe0f,ToRoom:_0x35285e,secondary_code:_0x281b82}=_0x131af0['body'],_0x38eb4d=await warehouse[_0xb683d4(0x1a0)]([{'$match':{'name':_0xd1885f}},{'$unwind':_0xb683d4(0x1a5)},{'$match':{'product_details.secondary_code':_0x281b82}},{'$group':{'_id':_0xb683d4(0x183),'name':{'$first':_0xb683d4(0x197)},'primary_code':{'$first':_0xb683d4(0x203)},'secondary_code':{'$first':_0xb683d4(0x150)},'product_code':{'$first':_0xb683d4(0x1c1)},'instock':{'$first':_0xb683d4(0x1b3)},'warehouse':{'$first':_0xb683d4(0x172)},'level':{'$first':_0xb683d4(0x1d3)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0xb683d4(0x1bb)},'maxProducts':{'$first':_0xb683d4(0x167)},'unit':{'$first':_0xb683d4(0x133)}}}]);_0x3731fc['status'](0xc8)[_0xb683d4(0x200)](_0x38eb4d);}catch(_0x258a09){_0x3731fc[_0xb683d4(0x1c6)](0x194)[_0xb683d4(0x200)]({'message':_0x258a09['message']});}}),router[a0_0x421aec(0x141)](a0_0x421aec(0x181),async(_0x141239,_0x47faf8)=>{var _0x8ef37c=a0_0x421aec;try{const {FromWareHouse:_0x50a69a,FromRoom:_0x402a6c,ToWarehouse:_0xb06a1c,ToRoom:_0xf46b47,product_code:_0x2fc174}=_0x141239[_0x8ef37c(0x1cd)],_0xa55bd2=await warehouse[_0x8ef37c(0x1a0)]([{'$match':{'name':_0x50a69a}},{'$unwind':_0x8ef37c(0x1a5)},{'$match':{'product_details.product_code':_0x2fc174}},{'$group':{'_id':_0x8ef37c(0x183),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x8ef37c(0x150)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x8ef37c(0x1b3)},'warehouse':{'$first':_0x8ef37c(0x172)},'level':{'$first':'$product_details.level'},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x8ef37c(0x1bb)},'maxProducts':{'$first':_0x8ef37c(0x167)},'unit':{'$first':_0x8ef37c(0x133)}}}]);_0x47faf8[_0x8ef37c(0x1c6)](0xc8)[_0x8ef37c(0x200)](_0xa55bd2);}catch(_0x269909){_0x47faf8['status'](0x194)[_0x8ef37c(0x200)]({'message':_0x269909['message']});}}),router[a0_0x421aec(0x141)](a0_0x421aec(0x1e6),async(_0xd2de1e,_0x3614fe)=>{var _0x4fbae0=a0_0x421aec;const {level:_0x582fcf,isle:_0x2481cd,pallet:_0x4f4e82,warehouses:_0x314325,room:_0x324767}=_0xd2de1e[_0x4fbae0(0x1cd)];try{const _0x536db0=await warehouse[_0x4fbae0(0x1a0)]([{'$match':{'name':_0x314325,'room':_0x324767}},{'$unwind':_0x4fbae0(0x1a5)},{'$match':{'product_details.level':parseInt(_0x582fcf),'product_details.isle':_0x2481cd,'product_details.pallet':parseInt(_0x4f4e82)}},{'$group':{'_id':_0x4fbae0(0x183),'name':{'$first':_0x4fbae0(0x197)},'product_stock':{'$first':_0x4fbae0(0x1b3)},'level':{'$first':_0x4fbae0(0x1d3)},'isle':{'$first':_0x4fbae0(0x123)},'pallet':{'$first':_0x4fbae0(0x1bb)},'maxProducts':{'$first':_0x4fbae0(0x167)}}}]);_0x3614fe[_0x4fbae0(0x1c6)](0xc8)[_0x4fbae0(0x200)](_0x536db0);}catch(_0x375220){_0x3614fe[_0x4fbae0(0x1c6)](0x194)[_0x4fbae0(0x200)]({'message':_0x375220['message']});}}),module[a0_0x421aec(0x13c)]=router;