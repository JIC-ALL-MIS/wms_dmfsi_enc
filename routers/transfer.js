var a0_0xf616b0=a0_0x4c1c;(function(_0xe19b8,_0x3d1d20){var _0xa59106=a0_0x4c1c,_0x2f4b30=_0xe19b8();while(!![]){try{var _0x5eb540=-parseInt(_0xa59106(0xf2))/0x1+-parseInt(_0xa59106(0xb2))/0x2+-parseInt(_0xa59106(0xc8))/0x3*(-parseInt(_0xa59106(0x81))/0x4)+-parseInt(_0xa59106(0xb1))/0x5+parseInt(_0xa59106(0xce))/0x6+parseInt(_0xa59106(0x116))/0x7+parseInt(_0xa59106(0xc9))/0x8;if(_0x5eb540===_0x3d1d20)break;else _0x2f4b30['push'](_0x2f4b30['shift']());}catch(_0x37a586){_0x2f4b30['push'](_0x2f4b30['shift']());}}}(a0_0x479e,0xbfddc));function a0_0x479e(){var _0x49cd85=['$product_details','floorlevel','host','Transfer\x20Edit\x20Successfully','$product_details.level','\x20Order\x20Number\x20:\x20','string','from_rack','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','from_room_name','$name','expiry_date','$invoice','max_per_unit','log','getFullYear','role','/view','exports','977160BTpXbX','</tbody>','German','$product_details.unit','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','language','from_prod_level','aggregate','from_bin','Floor','save','errors','</td>','to_prod_qty','to_prod_pallet','$product_details.product_stock','</head><body>','$to_warehouse','../public/language/languages.json','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','product_stock','primary_code','/view/:id','prod_name','DRY\x20STORAGE','<div>','Hindi','flash','params','There\x27s\x20a\x20error\x20in\x20this\x20transaction','True','json','to_bin','Logo.png','map','maxProducts','6521823dBiJnu','Chinese','render','warehouse','primary_unit','Portuguese','Ambient','$product_details.pallet','$product_details._id','../middleware/auth','$product.to_room_name','prod_cat','</body></html>','<!DOCTYPE\x20html>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','site_title','English\x20(US)','$product_details.rack','all','Shelves','$finalize','concat','updateOne','type','$product_details.expiry_date','error','$product_details.bay','Spanish','to_types','rack','Portuguese\x20(BR)','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','from_invoice','$product.from_room_name','\x20Order\x20Date\x20:\x20','Arabic','MaxStocks_data2','/upload/','from_quantity','/barcode_scanner','COLD\x20STORAGE','from_bay','slice','Rack\x20F','French','to_room','Receiving\x20Area','status','success','getMonth','add_transfer','Enabled','staff','$product_details.primary_code','$product_details.floorlevel','nodemailer','from_rak','$product_details.type','invoice','message','\x20</h2>','An\x20error\x20occurred\x20while\x20saving\x20data.','<hr\x20class=\x22my-3\x22>','find','to_invoice','port','edit_transfer_view','product_code3','email','$product_details.storage','random','to_room_name','storage','batch_code','password','<h5\x20style=\x22text-align:\x20left;\x22>','to_quantity','from_storage','redirect','Router','to_floorlevel','<tbody\x20style=\x22text-align:\x20center;\x22>','$product_details.product_name','<table\x20style=\x22width:\x20100%\x20!important;\x22>','An\x20error\x20occurred.','from_warehouse','forEach','43256eXZESZ','$product_details.bin','$from_warehouse','back','Rack\x20C','$product_details.batch_code','/../public','$product_details.production_date','../models/all_models','getDate','Rack\x20B','production_date','from_prod_qty','Error\x20Occurs','$_id','body','Enclosed','$product_details.secondary_unit','</span>','Email\x20sent\x20successfully','secondary_code','</h5>','secondary_unit','$product_details.isle','Return\x20Rooms','date','$product_details.secondary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','$room','note','sendMail','product_details','</div>','</tr>','product_name','_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','RMSEmail','padStart','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','toString','/preview/:id','</table>','</thead>','master','to_warehouse','$product_details.maxPerUnit','from_floorlevel','2853135fXZdJW','611710xWKGba','TRF-','$date','ToRoomAssigned','<tr>','catch','findOne','user','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','maxperunit','push','$product_details.maxProducts','from_prod_pallet','RoomAssigned','rak','bin','$product_details.product_code','to_prod_level','findById','unit','filter','Arabic\x20(ae)','48aoThPQ','11803976PNweZW','product_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','Rack\x20A','product','355896TBfSQe','Rack\x20E','length','from_types','/transfer/preview/','$product','post','Raw\x20Materials','bay','/transfer/view','Level','New_Qty_Converted','then','from_prod_isle','English','get','to_bay'];a0_0x479e=function(){return _0x49cd85;};return a0_0x479e();}function a0_0x4c1c(_0x250e02,_0x56c91b){var _0x479e98=a0_0x479e();return a0_0x4c1c=function(_0x4c1cfd,_0x12bf33){_0x4c1cfd=_0x4c1cfd-0x6d;var _0xfd7d49=_0x479e98[_0x4c1cfd];return _0xfd7d49;},a0_0x4c1c(_0x250e02,_0x56c91b);}const express=require('express'),app=express(),router=express[a0_0xf616b0(0x79)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0xf616b0(0x89)),auth=require(a0_0xf616b0(0x11f)),users=require(a0_0xf616b0(0x104)),nodemailer=require(a0_0xf616b0(0x14d));router[a0_0xf616b0(0xdd)](a0_0xf616b0(0xf0),auth,async(_0x101c01,_0xe5ed6a)=>{var _0x21886d=a0_0xf616b0;try{const {username:_0x2aad66,email:_0x2c2e9b,role:_0x21fb9a}=_0x101c01[_0x21886d(0xb9)],_0x119dae=_0x101c01['user'],_0x3f233a=await profile[_0x21886d(0xb8)]({'email':_0x119dae[_0x21886d(0x6e)]}),_0x32edf3=await master_shop[_0x21886d(0x155)]();console[_0x21886d(0xed)]('master',_0x32edf3);let _0x339554;if(_0x119dae['role']=='staff'){const _0x197c84=await staff[_0x21886d(0xb8)]({'email':_0x119dae[_0x21886d(0x6e)]});_0x339554=await transfers[_0x21886d(0x155)]({'from_warehouse':_0x197c84[_0x21886d(0x119)]});}else _0x339554=await transfers[_0x21886d(0xf9)]([{'$unwind':_0x21886d(0xd3)},{'$group':{'_id':_0x21886d(0x8f),'invoice':{'$first':_0x21886d(0xeb)},'date':{'$first':_0x21886d(0xb4)},'from_warehouse':{'$first':_0x21886d(0x83)},'to_warehouse':{'$first':_0x21886d(0x103)},'from_room_name':{'$addToSet':_0x21886d(0x137)},'to_room_name':{'$addToSet':_0x21886d(0x120)},'finalize':{'$first':_0x21886d(0x12a)},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x32edf3[0x0][_0x21886d(0xf7)]==_0x21886d(0x126)){var _0x46894b=users[_0x21886d(0xdc)];console['log'](_0x46894b);}else{if(_0x32edf3[0x0][_0x21886d(0xf7)]==_0x21886d(0x10c))var _0x46894b=users['Hindi'];else{if(_0x32edf3[0x0][_0x21886d(0xf7)]=='German')var _0x46894b=users['German'];else{if(_0x32edf3[0x0][_0x21886d(0xf7)]==_0x21886d(0x131))var _0x46894b=users['Spanish'];else{if(_0x32edf3[0x0][_0x21886d(0xf7)]==_0x21886d(0x142))var _0x46894b=users[_0x21886d(0x142)];else{if(_0x32edf3[0x0]['language']=='Portuguese\x20(BR)')var _0x46894b=users[_0x21886d(0x11b)];else{if(_0x32edf3[0x0]['language']==_0x21886d(0x117))var _0x46894b=users['Chinese'];else{if(_0x32edf3[0x0]['language']=='Arabic\x20(ae)')var _0x46894b=users['Arabic'];}}}}}}}_0xe5ed6a['render']('transfer',{'success':_0x101c01[_0x21886d(0x10d)](_0x21886d(0x146)),'errors':_0x101c01['flash'](_0x21886d(0xfd)),'role':_0x119dae,'profile':_0x3f233a,'master_shop':_0x32edf3,'transfer':_0x339554,'language':_0x46894b});}catch(_0x1ed095){console[_0x21886d(0xed)](_0x1ed095);}});async function getRandom8DigitNumber(){var _0x327b01=a0_0xf616b0;const _0x8e9038=0x989680,_0x3ae1e1=0x5f5e0ff,_0x15a87b=Math['floor'](Math[_0x327b01(0x70)]()*(_0x3ae1e1-_0x8e9038+0x1))+_0x8e9038;var _0x4d53da;const _0x218cb8=await transfers['findOne']({'invoice':_0x327b01(0xb3)+_0x15a87b});return _0x218cb8&&_0x218cb8[_0x327b01(0xd0)]>0x0?_0x4d53da='TRF-'+_0x15a87b:_0x4d53da=_0x327b01(0xb3)+_0x15a87b,_0x4d53da;}router[a0_0xf616b0(0xdd)]('/view/add_transfer',auth,async(_0x1abb06,_0x10d2ee)=>{var _0x2b1ee6=a0_0xf616b0;try{const {username:_0x2fbb9e,email:_0x2c80c3,role:_0x1a3d01}=_0x1abb06['user'],_0x368e31=_0x1abb06[_0x2b1ee6(0xb9)],_0x555f6c=await profile[_0x2b1ee6(0xb8)]({'email':_0x368e31[_0x2b1ee6(0x6e)]}),_0x15f952=await master_shop[_0x2b1ee6(0x155)]();console['log']('master',_0x15f952);let _0x543884;if(_0x368e31[_0x2b1ee6(0xef)]==_0x2b1ee6(0x14a)){const _0x498b78=await staff[_0x2b1ee6(0xb8)]({'email':_0x368e31['email']});_0x543884=await warehouse[_0x2b1ee6(0xf9)]([{'$match':{'status':'Enabled','name':_0x498b78[_0x2b1ee6(0x119)],'warehouse_category':_0x2b1ee6(0xd5)}},{'$group':{'_id':_0x2b1ee6(0xe9),'name':{'$first':_0x2b1ee6(0xe9)}}}]);}else _0x543884=await warehouse[_0x2b1ee6(0xf9)]([{'$match':{'status':'Enabled','warehouse_category':_0x2b1ee6(0xd5)}},{'$group':{'_id':_0x2b1ee6(0xe9),'name':{'$first':'$name'}}}]);var _0x2cafaf=[_0x2b1ee6(0x11c),_0x2b1ee6(0x91),_0x2b1ee6(0x99)];const _0xec3106=await transfers[_0x2b1ee6(0x155)]({}),_0x3f9189=_0xec3106['length']+0x1,_0x35ccd8='TRF-'+_0x3f9189[_0x2b1ee6(0xa9)]()[_0x2b1ee6(0xa7)](0x5,'0');if(_0x15f952[0x0]['language']==_0x2b1ee6(0x126)){var _0x2241b7=users[_0x2b1ee6(0xdc)];console[_0x2b1ee6(0xed)](_0x2241b7);}else{if(_0x15f952[0x0]['language']==_0x2b1ee6(0x10c))var _0x2241b7=users[_0x2b1ee6(0x10c)];else{if(_0x15f952[0x0][_0x2b1ee6(0xf7)]=='German')var _0x2241b7=users[_0x2b1ee6(0xf4)];else{if(_0x15f952[0x0]['language']==_0x2b1ee6(0x131))var _0x2241b7=users[_0x2b1ee6(0x131)];else{if(_0x15f952[0x0][_0x2b1ee6(0xf7)]==_0x2b1ee6(0x142))var _0x2241b7=users['French'];else{if(_0x15f952[0x0][_0x2b1ee6(0xf7)]==_0x2b1ee6(0x134))var _0x2241b7=users[_0x2b1ee6(0x11b)];else{if(_0x15f952[0x0][_0x2b1ee6(0xf7)]==_0x2b1ee6(0x117))var _0x2241b7=users[_0x2b1ee6(0x117)];else{if(_0x15f952[0x0]['language']==_0x2b1ee6(0xc7))var _0x2241b7=users['Arabic'];}}}}}}}const _0x4318c7=getRandom8DigitNumber();_0x4318c7[_0x2b1ee6(0xda)](_0x2fdae3=>{var _0x4a590c=_0x2b1ee6;_0x10d2ee[_0x4a590c(0x118)](_0x4a590c(0x148),{'success':_0x1abb06[_0x4a590c(0x10d)](_0x4a590c(0x146)),'errors':_0x1abb06[_0x4a590c(0x10d)](_0x4a590c(0xfd)),'role':_0x368e31,'profile':_0x555f6c,'master_shop':_0x15f952,'warehouse':_0x543884,'language':_0x2241b7,'rooms_data':_0x2cafaf,'invoice':_0x2fdae3});})[_0x2b1ee6(0xb7)](_0x267be7=>{var _0x1f9050=_0x2b1ee6;_0x1abb06[_0x1f9050(0x10d)](_0x1f9050(0xfd),_0x1f9050(0x10f)),_0x10d2ee['redirect'](_0x1f9050(0xd7));});}catch(_0x2a7ff3){console[_0x2b1ee6(0xed)](_0x2a7ff3);}}),router[a0_0xf616b0(0xd4)]('/view/add_transfer',auth,async(_0x3dd036,_0xd12429)=>{var _0xa4cc09=a0_0xf616b0;try{console[_0xa4cc09(0xed)](_0x3dd036[_0xa4cc09(0x90)]);const {date:_0x2d7752,from_warehouse:_0x32a7cd,FromRoom_name:_0x5151f4,to_warehouse:_0x2db346,ToRoom_name:_0x4b9c32,prod_name:_0x35bf4a,from_prod_qty:_0x3abb50,from_prod_level:_0x2066ce,from_prod_isle:_0x30677d,from_prod_pallet:_0x3b6e86,to_prod_qty:_0x2d39a7,to_prod_level:_0x42cfe4,to_prod_isle:_0x3c2474,to_prod_pallet:_0x180232,primary_code:_0x6d373b,secondary_code:_0x2a129e,product_code3:_0x7907b7,note:_0x84c4d9,MaxStocks_data2:_0x54d5be,invoice:_0x1765fa,expiry_date:_0xe056e4}=_0x3dd036[_0xa4cc09(0x90)];if(typeof _0x35bf4a==_0xa4cc09(0xe5))var _0x1d259d=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x109)]],_0x139ccb=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x8d)]],_0x2af730=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xf8)]],_0xe822d8=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xd9)]],_0x9cfaaa=[_0x3dd036['body'][_0xa4cc09(0xc3)]],_0x1161d0=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x107)]],_0x5cc9ea=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x95)]],_0x2a0e53=[_0x3dd036['body'][_0xa4cc09(0x6d)]],_0x1f2a94=[_0x3dd036[_0xa4cc09(0x90)]['MaxStocks_data2']],_0xe97752=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x11a)]],_0x1b378a=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x97)]],_0x1ddd4e=[_0x3dd036['body'][_0xa4cc09(0x73)]],_0x27f890=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xea)]],_0x323636=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xec)]],_0x2e78a1=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x8c)]],_0x4e07c6=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x121)]],_0x3adc2c=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xbf)]],_0x3df3a6=[_0x3dd036[_0xa4cc09(0x90)]['ToRoomAssigned']],_0x55451c=[_0x3dd036[_0xa4cc09(0x90)]['from_invoice']],_0x2a1539=[_0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x156)]];else var _0x1d259d=[..._0x3dd036['body'][_0xa4cc09(0x109)]],_0x139ccb=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x8d)]],_0x2af730=[..._0x3dd036['body'][_0xa4cc09(0xf8)]],_0xe822d8=[..._0x3dd036['body'][_0xa4cc09(0xd9)]],_0x9cfaaa=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xc3)]],_0x1161d0=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x107)]],_0x5cc9ea=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x95)]],_0x2a0e53=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x6d)]],_0x1f2a94=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x13a)]],_0xe97752=[..._0x3dd036[_0xa4cc09(0x90)]['primary_unit']],_0x1b378a=[..._0x3dd036['body']['secondary_unit']],_0x1ddd4e=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x73)]],_0x27f890=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xea)]],_0x323636=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0xec)]],_0x2e78a1=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x8c)]],_0x4e07c6=[..._0x3dd036['body'][_0xa4cc09(0x121)]],_0x3adc2c=[..._0x3dd036[_0xa4cc09(0x90)]['RoomAssigned']],_0x3df3a6=[..._0x3dd036['body'][_0xa4cc09(0xb5)]],_0x55451c=[..._0x3dd036[_0xa4cc09(0x90)]['from_invoice']],_0x2a1539=[..._0x3dd036[_0xa4cc09(0x90)][_0xa4cc09(0x156)]];const _0x38627b=_0x1d259d[_0xa4cc09(0x114)](_0x48ff7b=>{return _0x48ff7b={'product_name':_0x48ff7b};});_0x139ccb[_0xa4cc09(0x80)]((_0x59c18c,_0x5d3a5a)=>{var _0x1fd9fe=_0xa4cc09;_0x38627b[_0x5d3a5a][_0x1fd9fe(0x13c)]=_0x59c18c;}),_0x55451c[_0xa4cc09(0x80)]((_0x333151,_0x24524d)=>{_0x38627b[_0x24524d]['from_invoice']=_0x333151;}),_0x2a1539[_0xa4cc09(0x80)]((_0xa1e2a1,_0x3a357b)=>{_0x38627b[_0x3a357b]['To_invoice']=_0xa1e2a1;}),_0x2af730['forEach']((_0x386a6b,_0x400fc2)=>{var _0x47909f=_0xa4cc09;_0x3adc2c[_0x47909f(0x80)]((_0x99f851,_0x2fa7d0)=>{var _0x2ba1af=_0x47909f;if(_0x99f851==_0x2ba1af(0x144)&&_0x400fc2==_0x2fa7d0){var _0x3dbedd=_0x386a6b[_0x2ba1af(0x140)](0x3);_0x38627b[_0x400fc2]['from_storage']=_0x386a6b[0x0],_0x38627b[_0x400fc2]['from_rack']=_0x386a6b[0x1],_0x38627b[_0x400fc2][_0x2ba1af(0x13f)]=0x0,_0x38627b[_0x400fc2]['from_bin']=0x0,_0x38627b[_0x400fc2][_0x2ba1af(0xd1)]=_0x2ba1af(0xfb),_0x38627b[_0x400fc2][_0x2ba1af(0xb0)]=_0x3dbedd;}else{if(_0x99f851==_0x2ba1af(0x129)&&_0x400fc2==_0x2fa7d0){var _0x3dbedd=_0x386a6b[_0x2ba1af(0x140)](0x3);_0x38627b[_0x400fc2][_0x2ba1af(0x77)]=_0x386a6b[0x0],_0x38627b[_0x400fc2][_0x2ba1af(0xe6)]=_0x386a6b[0x1],_0x38627b[_0x400fc2][_0x2ba1af(0x13f)]=0x0,_0x38627b[_0x400fc2][_0x2ba1af(0xfa)]=0x0,_0x38627b[_0x400fc2][_0x2ba1af(0xd1)]=_0x2ba1af(0xfb),_0x38627b[_0x400fc2][_0x2ba1af(0xb0)]=_0x386a6b[0x5];}else{if(_0x400fc2==_0x2fa7d0){var _0x33a2ce;if(_0x386a6b[0x4]=='L')_0x33a2ce='Level';else _0x386a6b[0x4]=='F'&&(_0x33a2ce='Floor');_0x38627b[_0x400fc2][_0x2ba1af(0x77)]=_0x386a6b[0x0],_0x38627b[_0x400fc2][_0x2ba1af(0xe6)]=_0x386a6b[0x1],_0x38627b[_0x400fc2][_0x2ba1af(0x13f)]=_0x386a6b[0x2],_0x38627b[_0x400fc2][_0x2ba1af(0xfa)]=_0x386a6b[0x3],_0x38627b[_0x400fc2]['from_types']=_0x33a2ce,_0x38627b[_0x400fc2][_0x2ba1af(0xb0)]=_0x386a6b[0x5];}}}});}),_0xe822d8['forEach']((_0x3f3835,_0x1f352e)=>{var _0x4b8d61=_0xa4cc09;_0x38627b[_0x1f352e][_0x4b8d61(0x76)]=_0x3f3835;}),_0x9cfaaa[_0xa4cc09(0x80)]((_0x130405,_0x38b76b)=>{var _0x275963=_0xa4cc09;_0x3df3a6[_0x275963(0x80)]((_0x3ecfbf,_0x32b2e9)=>{var _0x943112=_0x275963;if(_0x3ecfbf==_0x943112(0x144)&&_0x38b76b==_0x32b2e9){var _0x17ab0d=_0x130405[_0x943112(0x140)](0x3);_0x38627b[_0x38b76b][_0x943112(0x72)]=_0x130405[0x0],_0x38627b[_0x38b76b][_0x943112(0x133)]=_0x130405[0x1],_0x38627b[_0x38b76b][_0x943112(0xde)]=0x0,_0x38627b[_0x38b76b][_0x943112(0x112)]=0x0,_0x38627b[_0x38b76b][_0x943112(0x132)]='Floor',_0x38627b[_0x38b76b]['to_floorlevel']=_0x17ab0d;}else{if(_0x3ecfbf==_0x943112(0x129)&&_0x38b76b==_0x32b2e9){var _0x17ab0d=_0x130405[_0x943112(0x140)](0x3);_0x38627b[_0x38b76b][_0x943112(0x72)]=_0x130405[0x0],_0x38627b[_0x38b76b][_0x943112(0x133)]=_0x130405[0x1],_0x38627b[_0x38b76b]['to_bay']=0x0,_0x38627b[_0x38b76b][_0x943112(0x112)]=0x0,_0x38627b[_0x38b76b][_0x943112(0x132)]=_0x943112(0xfb),_0x38627b[_0x38b76b][_0x943112(0x7a)]=_0x130405[0x5];}else{if(_0x38b76b==_0x32b2e9){var _0x4800c6;if(_0x130405[0x4]=='L')_0x4800c6=_0x943112(0xd8);else _0x130405[0x4]=='F'&&(_0x4800c6=_0x943112(0xfb));_0x38627b[_0x38b76b][_0x943112(0x72)]=_0x130405[0x0],_0x38627b[_0x38b76b]['rack']=_0x130405[0x1],_0x38627b[_0x38b76b]['to_bay']=_0x130405[0x2],_0x38627b[_0x38b76b][_0x943112(0x112)]=_0x130405[0x3],_0x38627b[_0x38b76b][_0x943112(0x132)]=_0x4800c6,_0x38627b[_0x38b76b]['to_floorlevel']=_0x130405[0x5];}}}});}),_0x1161d0['forEach']((_0x44d406,_0x4ee8c8)=>{_0x38627b[_0x4ee8c8]['primary_code']=_0x44d406;}),_0x5cc9ea[_0xa4cc09(0x80)]((_0x198b82,_0x2cc18f)=>{_0x38627b[_0x2cc18f]['secondary_code']=_0x198b82;}),_0x2a0e53['forEach']((_0x568a12,_0x329049)=>{_0x38627b[_0x329049]['product_code']=_0x568a12;}),_0x1f2a94[_0xa4cc09(0x80)]((_0x52727c,_0xa811ed)=>{_0x38627b[_0xa811ed]['maxProducts']=_0x52727c;}),_0xe97752['forEach']((_0x9f826d,_0x381362)=>{var _0x4854dc=_0xa4cc09;_0x38627b[_0x381362][_0x4854dc(0xc5)]=_0x9f826d;}),_0x1b378a['forEach']((_0x2abd00,_0x429db5)=>{var _0x4ea68d=_0xa4cc09;_0x38627b[_0x429db5][_0x4ea68d(0x97)]=_0x2abd00;}),_0x1ddd4e[_0xa4cc09(0x80)]((_0x1d2162,_0x3a6179)=>{_0x38627b[_0x3a6179]['batch_code']=_0x1d2162;}),_0x27f890[_0xa4cc09(0x80)]((_0x5c5d38,_0x119524)=>{var _0x48aa62=_0xa4cc09;_0x38627b[_0x119524][_0x48aa62(0xea)]=_0x5c5d38;}),_0x323636['forEach']((_0x566717,_0x3547ee)=>{var _0x44fc56=_0xa4cc09;_0x38627b[_0x3547ee][_0x44fc56(0xbb)]=_0x566717;}),_0x2e78a1['forEach']((_0x2c5c46,_0x10779b)=>{var _0xd2c736=_0xa4cc09;_0x38627b[_0x10779b][_0xd2c736(0x8c)]=_0x2c5c46;}),_0x4e07c6[_0xa4cc09(0x80)]((_0x55f3f9,_0xa6b50d)=>{var _0x3aade4=_0xa4cc09;_0x38627b[_0xa6b50d][_0x3aade4(0x121)]=_0x55f3f9;}),_0x3adc2c['forEach']((_0x32d2bf,_0x4743ce)=>{var _0x4116a9=_0xa4cc09;_0x38627b[_0x4743ce][_0x4116a9(0xe8)]=_0x32d2bf;}),_0x3df3a6[_0xa4cc09(0x80)]((_0x2bbe34,_0x1d62af)=>{var _0x26c591=_0xa4cc09;_0x38627b[_0x1d62af][_0x26c591(0x71)]=_0x2bbe34;});const _0x5d9711=_0x38627b[_0xa4cc09(0xc6)](_0x426ac1=>_0x426ac1[_0xa4cc09(0x76)]!=='0'&&_0x426ac1[_0xa4cc09(0x76)]!==''||_0x426ac1[_0xa4cc09(0x7a)]!=='0'&&_0x426ac1[_0xa4cc09(0x7a)]!==''),_0x3971d5=new transfers({'date':_0x2d7752,'from_warehouse':_0x32a7cd,'to_warehouse':_0x2db346,'product':_0x5d9711,'note':_0x84c4d9,'invoice':_0x1765fa}),_0x2df235=await _0x3971d5['save']();_0x3dd036[_0xa4cc09(0x10d)](_0xa4cc09(0x146),'Product\x20Transfer\x20successfully'),_0xd12429['redirect'](_0xa4cc09(0xd2)+_0x2df235[_0xa4cc09(0xa4)]);}catch(_0x13f8cf){console[_0xa4cc09(0xed)](_0x13f8cf),_0xd12429[_0xa4cc09(0x145)](0xc8)[_0xa4cc09(0x111)]({'errorMessage':_0x13f8cf[_0xa4cc09(0x151)]});}}),router[a0_0xf616b0(0xdd)](a0_0xf616b0(0xaa),auth,async(_0x39a141,_0x5192b6)=>{var _0x65f4d1=a0_0xf616b0;try{const {username:_0x48014a,email:_0x41aab8,role:_0x2c525c}=_0x39a141[_0x65f4d1(0xb9)],_0xf73d57=_0x39a141[_0x65f4d1(0xb9)],_0x5b9da8=await profile['findOne']({'email':_0xf73d57[_0x65f4d1(0x6e)]}),_0xb4bc92=await master_shop[_0x65f4d1(0x155)]();console[_0x65f4d1(0xed)](_0x65f4d1(0xad),_0xb4bc92);const _0x21f915=await transfers['findById'](_0x39a141['params']['id']);let _0x38530f=new Date(_0x21f915[_0x65f4d1(0xea)]),_0x58d498=('0'+_0x38530f[_0x65f4d1(0x8a)]())[_0x65f4d1(0x140)](-0x2),_0x518028=('0'+(_0x38530f[_0x65f4d1(0x147)]()+0x1))[_0x65f4d1(0x140)](-0x2),_0x95eb6a=_0x38530f[_0x65f4d1(0xee)](),_0x1a752f=_0x95eb6a+'-'+_0x518028+'-'+_0x58d498,_0x49074e;if(_0xf73d57[_0x65f4d1(0xef)]=='staff'){const _0x4d67ee=await staff['findOne']({'email':_0xf73d57[_0x65f4d1(0x6e)]});_0x49074e=await warehouse['find']({'status':_0x65f4d1(0x149),'name':_0x4d67ee[_0x65f4d1(0x119)],'warehouse_category':_0x65f4d1(0xd5)});}else _0x49074e=await warehouse[_0x65f4d1(0x155)]({'status':_0x65f4d1(0x149),'warehouse_category':_0x65f4d1(0xd5)});const _0x4a70b1=await warehouse[_0x65f4d1(0xf9)]([{'$match':{'name':_0x21f915[_0x65f4d1(0x7f)]}},{'$unwind':_0x65f4d1(0xdf)},{'$group':{'_id':_0x65f4d1(0x11e),'name':{'$first':_0x65f4d1(0x7c)},'product_stock':{'$first':_0x65f4d1(0x101)},'bay':{'$first':_0x65f4d1(0x130)},'bin':{'$first':_0x65f4d1(0x82)},'type':{'$first':_0x65f4d1(0x14f)},'floorlevel':{'$first':_0x65f4d1(0x14c)},'primary_code':{'$first':_0x65f4d1(0x14b)},'secondary_code':{'$first':_0x65f4d1(0x9b)},'product_code':{'$first':_0x65f4d1(0xc2)},'storage':{'$first':_0x65f4d1(0x6f)},'rack':{'$first':_0x65f4d1(0x127)},'expiry_date':{'$first':_0x65f4d1(0x12e)},'production_date':{'$first':_0x65f4d1(0x88)},'room':{'$first':'$room'}}}]);if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0x126)){var _0x50af1a=users[_0x65f4d1(0xdc)];console[_0x65f4d1(0xed)](_0x50af1a);}else{if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0x10c))var _0x50af1a=users['Hindi'];else{if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0xf4))var _0x50af1a=users[_0x65f4d1(0xf4)];else{if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0x131))var _0x50af1a=users['Spanish'];else{if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0x142))var _0x50af1a=users[_0x65f4d1(0x142)];else{if(_0xb4bc92[0x0]['language']=='Portuguese\x20(BR)')var _0x50af1a=users[_0x65f4d1(0x11b)];else{if(_0xb4bc92[0x0][_0x65f4d1(0xf7)]==_0x65f4d1(0x117))var _0x50af1a=users['Chinese'];else{if(_0xb4bc92[0x0]['language']==_0x65f4d1(0xc7))var _0x50af1a=users['Arabic'];}}}}}}}_0x5192b6[_0x65f4d1(0x118)](_0x65f4d1(0x158),{'success':_0x39a141['flash'](_0x65f4d1(0x146)),'errors':_0x39a141[_0x65f4d1(0x10d)](_0x65f4d1(0xfd)),'role':_0xf73d57,'profile':_0x5b9da8,'master_shop':_0xb4bc92,'warehouse':_0x49074e,'transfer':_0x21f915,'stock':_0x4a70b1,'language':_0x50af1a});}catch(_0x3e27aa){console[_0x65f4d1(0xed)](_0x3e27aa);}}),router[a0_0xf616b0(0xd4)](a0_0xf616b0(0xaa),auth,async(_0x4702f3,_0x8b0ad3)=>{var _0x39fa4e=a0_0xf616b0;try{const _0x161ec3=_0x4702f3[_0x39fa4e(0x10e)]['id'],{from_warehouse:_0x4df44a,FromRoom_name:_0x811d4c,to_warehouse:_0x33ee36,ToRoom_name:_0x26d7ae}=_0x4702f3['body'],_0x347bd8=await transfers[_0x39fa4e(0xc4)]({'_id':_0x161ec3}),_0xc17347=_0x347bd8[_0x39fa4e(0xcd)][_0x39fa4e(0x114)](async _0x4a9713=>{var _0x5c218f=_0x39fa4e;if(_0x4a9713['to_quantity']>0x0){var _0x1b8e54=await warehouse[_0x5c218f(0xb8)]({'name':_0x347bd8[_0x5c218f(0x7f)],'room':_0x4a9713[_0x5c218f(0xe8)],'warehouse_category':_0x5c218f(0xd5)});const _0x12faee=_0x1b8e54['product_details'][_0x5c218f(0x114)](_0xd07e0c=>{var _0x406522=_0x5c218f;_0xd07e0c['product_name']==_0x4a9713['product_name']&&_0xd07e0c[_0x406522(0xe0)]==_0x4a9713['from_floorlevel']&&_0xd07e0c[_0x406522(0x12d)]==_0x4a9713[_0x406522(0xd1)]&&_0xd07e0c[_0x406522(0xc1)]==_0x4a9713[_0x406522(0xfa)]&&_0xd07e0c[_0x406522(0xd6)]==_0x4a9713[_0x406522(0x13f)]&&_0xd07e0c[_0x406522(0x133)]==_0x4a9713[_0x406522(0xe6)]&&_0xd07e0c['storage']==_0x4a9713[_0x406522(0x77)]&&_0xd07e0c['expiry_date']==_0x4a9713[_0x406522(0xea)]&&_0xd07e0c[_0x406522(0x73)]==_0x4a9713['batch_code']&&_0xd07e0c[_0x406522(0x8c)]==_0x4a9713[_0x406522(0x8c)]&&_0xd07e0c[_0x406522(0x150)]==_0x4a9713[_0x406522(0x136)]&&(_0xd07e0c[_0x406522(0x106)]=_0xd07e0c[_0x406522(0x106)]-_0x4a9713[_0x406522(0x76)]);});}return _0x1b8e54;});Promise[_0x39fa4e(0x128)](_0xc17347)[_0x39fa4e(0xda)](async _0x29bf14=>{var _0xec2dfb=_0x39fa4e;try{for(const _0x2a3459 of _0x29bf14){await _0x2a3459[_0xec2dfb(0xfc)]();}try{const _0x19c1ad=_0x347bd8[_0xec2dfb(0xcd)][_0xec2dfb(0x114)](async _0x30db41=>{var _0x1bad59=_0xec2dfb;if(_0x30db41['to_quantity']>0x0){var _0x1a6b4a=await warehouse[_0x1bad59(0xb8)]({'name':_0x347bd8['to_warehouse'],'room':_0x30db41[_0x1bad59(0x71)],'warehouse_category':_0x1bad59(0xd5)}),_0x527ef8=0x0;const _0x326c4b=_0x1a6b4a[_0x1bad59(0xa0)][_0x1bad59(0x114)](_0x4c0f12=>{var _0x2f2c0d=_0x1bad59;_0x4c0f12[_0x2f2c0d(0xa3)]==_0x30db41[_0x2f2c0d(0xa3)]&&_0x4c0f12[_0x2f2c0d(0xe0)]==_0x30db41[_0x2f2c0d(0x7a)]&&_0x4c0f12['type']==_0x30db41[_0x2f2c0d(0x132)]&&_0x4c0f12[_0x2f2c0d(0xc1)]==_0x30db41[_0x2f2c0d(0x112)]&&_0x4c0f12['bay']==_0x30db41[_0x2f2c0d(0xde)]&&_0x4c0f12[_0x2f2c0d(0x133)]==_0x30db41[_0x2f2c0d(0x133)]&&_0x4c0f12['storage']==_0x30db41[_0x2f2c0d(0x72)]&&_0x4c0f12['expiry_date']==_0x30db41[_0x2f2c0d(0xea)]&&_0x4c0f12[_0x2f2c0d(0x73)]==_0x30db41[_0x2f2c0d(0x73)]&&_0x4c0f12[_0x2f2c0d(0x8c)]==_0x30db41[_0x2f2c0d(0x8c)]&&_0x4c0f12[_0x2f2c0d(0x150)]==_0x30db41['To_invoice']&&(_0x4c0f12[_0x2f2c0d(0x106)]=_0x4c0f12[_0x2f2c0d(0x106)]+_0x30db41[_0x2f2c0d(0x76)],_0x527ef8++);});_0x527ef8=='0'&&(_0x1a6b4a[_0x1bad59(0xa0)]=_0x1a6b4a[_0x1bad59(0xa0)][_0x1bad59(0x12b)]({'product_name':_0x30db41[_0x1bad59(0xa3)],'product_stock':_0x30db41[_0x1bad59(0x76)],'bay':_0x30db41['to_bay'],'bin':_0x30db41[_0x1bad59(0x112)],'type':_0x30db41[_0x1bad59(0x132)],'floorlevel':_0x30db41[_0x1bad59(0x7a)],'storage':_0x30db41['storage'],'rack':_0x30db41['rack'],'product_code':_0x30db41[_0x1bad59(0xca)],'primary_code':_0x30db41[_0x1bad59(0x107)],'secondary_code':_0x30db41[_0x1bad59(0x95)],'maxProducts':_0x30db41[_0x1bad59(0x115)],'storage':_0x30db41[_0x1bad59(0x72)],'rack':_0x30db41['rack'],'expiry_date':_0x30db41[_0x1bad59(0xea)],'maxPerUnit':_0x30db41[_0x1bad59(0xbb)],'batch_code':_0x30db41['batch_code'],'production_date':_0x30db41[_0x1bad59(0x8c)]}));}return _0x1a6b4a;});Promise[_0xec2dfb(0x128)](_0x19c1ad)[_0xec2dfb(0xda)](async _0x237efe=>{var _0x123e4b=_0xec2dfb;try{for(const _0xd600f6 of _0x237efe){await warehouse[_0x123e4b(0x12c)]({'_id':_0xd600f6[_0x123e4b(0xa4)]},{'$addToSet':{'product_details':{'$each':_0xd600f6[_0x123e4b(0xa0)]}}});}_0x347bd8['finalize']=_0x123e4b(0x110);const _0x3c2141=await _0x347bd8['save'](),_0x48cddb=await master_shop[_0x123e4b(0x155)](),_0x1a90ec=await email_settings[_0x123e4b(0xb8)](),_0x4bb66e=await supervisor_settings['find']();var _0x329f18=_0x347bd8[_0x123e4b(0xcd)],_0x24b330='',_0x358e49;for(_0x358e49 in _0x329f18){_0x24b330+=_0x123e4b(0xb6)+_0x123e4b(0x105)+_0x329f18[_0x358e49][_0x123e4b(0xa3)]+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x329f18[_0x358e49]['product_code']+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x329f18[_0x358e49][_0x123e4b(0x76)]+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x329f18[_0x358e49][_0x123e4b(0xc5)]+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x329f18[_0x358e49]['secondary_unit']+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x347bd8['to_warehouse']+_0x123e4b(0xfe)+_0x123e4b(0x105)+_0x329f18[_0x358e49][_0x123e4b(0x71)]+'</td>'+_0x123e4b(0x105)+_0x329f18[_0x358e49][_0x123e4b(0x72)]+_0x329f18[_0x358e49][_0x123e4b(0x133)]+_0x329f18[_0x358e49][_0x123e4b(0xde)]+_0x329f18[_0x358e49][_0x123e4b(0x112)]+_0x329f18[_0x358e49][_0x123e4b(0x132)][0x0]+_0x329f18[_0x358e49][_0x123e4b(0x7a)]+_0x123e4b(0xfe),'</tr>';}let _0xa86cdb=nodemailer['createTransport']({'host':_0x1a90ec[_0x123e4b(0xe1)],'port':Number(_0x1a90ec[_0x123e4b(0x157)]),'secure':![],'auth':{'user':_0x1a90ec[_0x123e4b(0x6e)],'pass':_0x1a90ec[_0x123e4b(0x74)]}}),_0xd08b26={'from':_0x1a90ec[_0x123e4b(0x6e)],'to':_0x4bb66e[0x0][_0x123e4b(0xa6)],'subject':'Transfer\x20Mail','attachments':[{'filename':_0x123e4b(0x113),'path':__dirname+_0x123e4b(0x87)+_0x123e4b(0x13b)+_0x48cddb[0x0]['image'],'cid':'logo'}],'html':_0x123e4b(0x123)+'<html><head><title></title>'+_0x123e4b(0x102)+_0x123e4b(0x10b)+_0x123e4b(0xf6)+_0x123e4b(0x10b)+_0x123e4b(0x135)+'</div>'+_0x123e4b(0x10b)+'<h2>\x20'+_0x48cddb[0x0][_0x123e4b(0x125)]+_0x123e4b(0x152)+_0x123e4b(0xa1)+_0x123e4b(0xa1)+_0x123e4b(0x154)+_0x123e4b(0x10b)+_0x123e4b(0x75)+_0x123e4b(0xe4)+_0x347bd8['invoice']+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x123e4b(0x138)+_0x347bd8['date']+'\x20'+_0x123e4b(0x93)+_0x123e4b(0x96)+_0x123e4b(0xa1)+_0x123e4b(0x7d)+_0x123e4b(0xa8)+_0x123e4b(0xb6)+_0x123e4b(0x124)+_0x123e4b(0xe7)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x123e4b(0xa5)+_0x123e4b(0x9c)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x123e4b(0xcb)+_0x123e4b(0xa2)+_0x123e4b(0xac)+_0x123e4b(0x7b)+'\x20'+_0x24b330+'\x20'+_0x123e4b(0xf3)+_0x123e4b(0xab)+_0x123e4b(0x10b)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x48cddb[0x0][_0x123e4b(0x125)]+_0x123e4b(0x96)+'</div>'+_0x123e4b(0xa1)+_0x123e4b(0x122)};_0xa86cdb[_0x123e4b(0x9f)](_0xd08b26,function(_0x845e5a,_0x77c3b8){var _0x3cda7b=_0x123e4b;_0x845e5a?(console[_0x3cda7b(0xed)](_0x845e5a),console['log'](_0x3cda7b(0x8e))):console[_0x3cda7b(0xed)](_0x3cda7b(0x94));}),_0x4702f3[_0x123e4b(0x10d)](_0x123e4b(0x146),'Transfer\x20Finalize\x20Successfully'),_0x8b0ad3[_0x123e4b(0x78)]('/picking_list/PDF_transfer_rm/'+_0x3c2141[_0x123e4b(0xa4)]);}catch(_0x3b6cc0){console[_0x123e4b(0x12f)](_0x3b6cc0),_0x8b0ad3['status'](0x1f4)[_0x123e4b(0x111)]({'Perror':_0x123e4b(0x153),'message':_0x3b6cc0[_0x123e4b(0x151)]});}})['catch'](_0x1814f0=>{var _0x171c94=_0xec2dfb;console['error'](_0x1814f0),_0x8b0ad3[_0x171c94(0x145)](0x1f4)[_0x171c94(0x111)]({'Perror':_0x171c94(0x7e)});});}catch(_0x358889){_0x8b0ad3[_0xec2dfb(0x111)](_0x358889);}}catch(_0x22c1fd){console[_0xec2dfb(0x12f)](_0x22c1fd),_0x8b0ad3['status'](0x1f4)[_0xec2dfb(0x111)]({'Merror':_0xec2dfb(0x153),'Message':_0x22c1fd[_0xec2dfb(0x151)]});}})[_0x39fa4e(0xb7)](_0x315cd7=>{var _0x50df72=_0x39fa4e;console[_0x50df72(0x12f)](_0x315cd7),_0x8b0ad3[_0x50df72(0x145)](0x1f4)[_0x50df72(0x111)]({'Merror':_0x50df72(0x7e)});});}catch(_0x5d4c6c){console[_0x39fa4e(0xed)](_0x5d4c6c);}});function BayBinSelected(_0x49411a,_0x4eb2dd){var _0x309e81=a0_0xf616b0,_0x52bae3=[],_0x21b1f7=[],_0x15e4fa=[],_0x472f7c=[],_0x507584=[],_0x288b14=[];let _0x2e2d09=[];if(_0x49411a==_0x309e81(0x10a))switch(_0x4eb2dd){case _0x309e81(0xcc):_0x52bae3=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x21b1f7=[0x1,0x2],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['D'],_0x288b14=['A'];break;case'Rack\x20B':_0x52bae3=[0x6,0x5,0x4,0x3,0x2,0x1],_0x21b1f7=[0x1,0x2],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=['Level',_0x309e81(0xfb)],_0x507584=['D'],_0x288b14=['B'];break;case _0x309e81(0x129):_0x52bae3=[0x0],_0x21b1f7=[0x0],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xfb)],_0x507584=['D'],_0x288b14=['S'];break;case'Receiving\x20Area':_0x52bae3=[0x0],_0x21b1f7=[0x0],_0x472f7c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x15e4fa=[_0x309e81(0xfb)],_0x507584=['D'],_0x288b14=['R'];break;}else{if(_0x49411a==_0x309e81(0x13e))switch(_0x4eb2dd){case _0x309e81(0xcc):_0x52bae3=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x21b1f7=['B','F'],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['C'],_0x288b14=['A'];break;case _0x309e81(0x8b):_0x52bae3=[0x5,0x4,0x3,0x2,0x1],_0x21b1f7=['F','B','S'],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['C'],_0x288b14=['B'];break;case _0x309e81(0x85):_0x52bae3=[0x1,0x2,0x3,0x4,0x5],_0x21b1f7=['B','F','S'],_0x472f7c=[0x5,0x4,0x3,0x2,0x1],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['C'],_0x288b14=['C'];break;case'Rack\x20D':_0x52bae3=[0x5,0x4,0x3,0x2,0x1],_0x21b1f7=['F','B','S'],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['C'],_0x288b14=['D'];break;case _0x309e81(0xcf):_0x52bae3=[0x4,0x3,0x2,0x1],_0x21b1f7=[0x1,0x2],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8),_0x309e81(0xfb)],_0x507584=['C'],_0x288b14=['E'];break;case _0x309e81(0x141):_0x52bae3=[0x1,0x2,0x3],_0x21b1f7=[0x1,0x2],_0x472f7c=[0x1,0x2,0x3,0x4,0x5],_0x15e4fa=[_0x309e81(0xd8)],_0x507584=['C'],_0x288b14=['F'];break;}}return{'levels':_0x52bae3,'Isle':_0x21b1f7,'rack':_0x472f7c,'type':_0x15e4fa,'storage':_0x507584,'rak':_0x288b14};}router[a0_0xf616b0(0xdd)](a0_0xf616b0(0x108),auth,async(_0x36932b,_0x20d7ae)=>{var _0x2d58db=a0_0xf616b0;try{const {username:_0x11ba03,email:_0x5a1534,role:_0x21f652}=_0x36932b[_0x2d58db(0xb9)],_0x421700=_0x36932b['user'],_0x29ab61=await profile[_0x2d58db(0xb8)]({'email':_0x421700['email']}),_0x387246=await master_shop['find'](),_0x1c4b5f=await transfers[_0x2d58db(0xc4)](_0x36932b['params']['id']);let _0x4fc64f;if(_0x421700['role']==_0x2d58db(0x14a)){const _0x40faed=await staff[_0x2d58db(0xb8)]({'email':_0x421700['email']});_0x4fc64f=await warehouse[_0x2d58db(0xf9)]([{'$match':{'status':'Enabled','name':_0x40faed[_0x2d58db(0x119)],'warehouse_category':_0x2d58db(0xd5)}},{'$group':{'_id':'$name','name':{'$first':_0x2d58db(0xe9)}}}]);}else _0x4fc64f=await warehouse[_0x2d58db(0xf9)]([{'$match':{'status':_0x2d58db(0x149),'warehouse_category':_0x2d58db(0xd5)}},{'$group':{'_id':_0x2d58db(0xe9),'name':{'$first':_0x2d58db(0xe9)}}}]);const _0x7c3fe2=await warehouse[_0x2d58db(0xf9)]([{'$match':{'name':_0x1c4b5f['from_warehouse'],'warehouse_category':_0x2d58db(0xd5)}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2d58db(0x7c)},'product_stock':{'$first':_0x2d58db(0x101)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x2d58db(0x14f)},'floorlevel':{'$first':_0x2d58db(0x14c)},'primary_code':{'$first':_0x2d58db(0x14b)},'secondary_code':{'$first':_0x2d58db(0x9b)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x2d58db(0x6f)},'rack':{'$first':_0x2d58db(0x127)},'expiry_date':{'$first':_0x2d58db(0x12e)},'production_date':{'$first':_0x2d58db(0x88)},'room':{'$first':'$room'}}}]),_0x31ccf1=await product['find']({}),_0x5c4336=BayBinSelected(_0x1c4b5f['to_warehouse'],_0x1c4b5f[_0x2d58db(0x143)]);if(_0x387246[0x0][_0x2d58db(0xf7)]==_0x2d58db(0x126)){var _0x58f946=users[_0x2d58db(0xdc)];console[_0x2d58db(0xed)](_0x58f946);}else{if(_0x387246[0x0][_0x2d58db(0xf7)]=='Hindi')var _0x58f946=users[_0x2d58db(0x10c)];else{if(_0x387246[0x0][_0x2d58db(0xf7)]=='German')var _0x58f946=users['German'];else{if(_0x387246[0x0][_0x2d58db(0xf7)]==_0x2d58db(0x131))var _0x58f946=users[_0x2d58db(0x131)];else{if(_0x387246[0x0]['language']=='French')var _0x58f946=users[_0x2d58db(0x142)];else{if(_0x387246[0x0]['language']=='Portuguese\x20(BR)')var _0x58f946=users[_0x2d58db(0x11b)];else{if(_0x387246[0x0]['language']==_0x2d58db(0x117))var _0x58f946=users[_0x2d58db(0x117)];else{if(_0x387246[0x0][_0x2d58db(0xf7)]=='Arabic\x20(ae)')var _0x58f946=users[_0x2d58db(0x139)];}}}}}}}_0x20d7ae[_0x2d58db(0x118)]('edit_transfer',{'success':_0x36932b[_0x2d58db(0x10d)]('success'),'errors':_0x36932b[_0x2d58db(0x10d)]('errors'),'role':_0x421700,'profile':_0x29ab61,'master_shop':_0x387246,'warehouse':_0x4fc64f,'transfer':_0x1c4b5f,'stock':_0x7c3fe2,'unit':_0x31ccf1,'language':_0x58f946});}catch(_0x37efed){console[_0x2d58db(0xed)](_0x37efed);}}),router[a0_0xf616b0(0xd4)](a0_0xf616b0(0x108),auth,async(_0x43911b,_0x1eda98)=>{var _0x2bd1ac=a0_0xf616b0;try{const _0x12bf1d=_0x43911b[_0x2bd1ac(0x10e)]['id'],_0xc3d648=await transfers['findById'](_0x12bf1d);_0x1eda98['json'](_0x43911b[_0x2bd1ac(0x90)]);return;const {date:_0x6d04d,from_warehouse:_0x4ceb7,FromRoom_name:_0x4ba7b8,to_warehouse:_0x2fa438,ToRoom_name:_0x14d678,prod_name:_0x1abe67,from_prod_qty:_0x17b9ec,from_prod_level:_0x229ad0,from_prod_isle:_0x2679a2,from_prod_pallet:_0x14e354,to_prod_qty:_0x254958,to_prod_level:_0x121386,to_prod_isle:_0x3a2043,to_prod_pallet:_0x4483fb,primary_code:_0x3bf1b7,secondary_code:_0x10e317,product_code3:_0x44e4d0,note:_0x3b66dc,invoice:_0x3dc083,expiry_date:_0x51e804}=_0x43911b[_0x2bd1ac(0x90)];if(typeof _0x1abe67==_0x2bd1ac(0xe5))var _0x81a3e8=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x109)]],_0x5c8aae=[_0x43911b[_0x2bd1ac(0x90)]['from_prod_qty']],_0x2423ba=[_0x43911b['body'][_0x2bd1ac(0xf8)]],_0x394827=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xdb)]],_0x2fe1e3=[_0x43911b[_0x2bd1ac(0x90)]['from_prod_pallet']],_0x494827=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xd1)]],_0x375645=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xff)]],_0x550a35=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xc3)]],_0x4863d7=[_0x43911b['body']['to_prod_isle']],_0x90a190=[_0x43911b[_0x2bd1ac(0x90)]['to_prod_pallet']],_0x3e9990=[_0x43911b[_0x2bd1ac(0x90)]['to_types']],_0x48ac48=[_0x43911b['body'][_0x2bd1ac(0x72)]],_0x2c4716=[_0x43911b['body'][_0x2bd1ac(0xc0)]],_0x4ca8a1=[_0x43911b['body']['primary_code']],_0x24e026=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x95)]],_0x5f5c5b=[_0x43911b[_0x2bd1ac(0x90)]['product_code3']],_0x322f5e=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x13a)]],_0x117aff=[_0x43911b['body']['unit']],_0x2c2370=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x97)]],_0x1685bb=[_0x43911b['body'][_0x2bd1ac(0x73)]],_0x36568e=[_0x43911b[_0x2bd1ac(0x90)]['expiry_date']],_0x52b78b=[_0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x77)]],_0x2e5040=[_0x43911b['body']['from_rak']];else var _0x81a3e8=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x109)]],_0x48ac48=[..._0x43911b['body']['storage']],_0x2c4716=[..._0x43911b['body'][_0x2bd1ac(0xc0)]],_0x494827=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xd1)]],_0x3e9990=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x132)]],_0x5c8aae=[..._0x43911b['body'][_0x2bd1ac(0x8d)]],_0x2423ba=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xf8)]],_0x394827=[..._0x43911b['body'][_0x2bd1ac(0xdb)]],_0x2fe1e3=[..._0x43911b['body'][_0x2bd1ac(0xbe)]],_0x375645=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xff)]],_0x550a35=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xc3)]],_0x4863d7=[..._0x43911b[_0x2bd1ac(0x90)]['to_prod_isle']],_0x90a190=[..._0x43911b['body'][_0x2bd1ac(0x100)]],_0x4ca8a1=[..._0x43911b[_0x2bd1ac(0x90)]['primary_code']],_0x24e026=[..._0x43911b[_0x2bd1ac(0x90)]['secondary_code']],_0x5f5c5b=[..._0x43911b['body']['product_code3']],_0x322f5e=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x13a)]],_0x117aff=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xc5)]],_0x2c2370=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0x97)]],_0x1685bb=[..._0x43911b['body'][_0x2bd1ac(0x73)]],_0x36568e=[..._0x43911b[_0x2bd1ac(0x90)][_0x2bd1ac(0xea)]],_0x52b78b=[..._0x43911b['body'][_0x2bd1ac(0x77)]],_0x2e5040=[..._0x43911b['body'][_0x2bd1ac(0x14e)]];const _0x4a62c2=_0x81a3e8['map'](_0x1dc70f=>{return _0x1dc70f={'product_name':_0x1dc70f};});_0x5c8aae[_0x2bd1ac(0x80)]((_0x3cb973,_0x1ecd8c)=>{var _0x453c81=_0x2bd1ac;_0x4a62c2[_0x1ecd8c][_0x453c81(0x13c)]=_0x3cb973;}),_0x2423ba[_0x2bd1ac(0x80)]((_0x4be09d,_0x5bca1e)=>{var _0x425ef4=_0x2bd1ac;_0x4a62c2[_0x5bca1e][_0x425ef4(0x13f)]=_0x4be09d;}),_0x394827[_0x2bd1ac(0x80)]((_0xb0325f,_0xc40317)=>{var _0x531d17=_0x2bd1ac;_0x4a62c2[_0xc40317][_0x531d17(0xfa)]=_0xb0325f;}),_0x2fe1e3[_0x2bd1ac(0x80)]((_0x1fc4d5,_0x19e29c)=>{var _0x186773=_0x2bd1ac;_0x4a62c2[_0x19e29c][_0x186773(0xb0)]=_0x1fc4d5;}),_0x375645['forEach']((_0xb2779a,_0x36eb67)=>{_0x4a62c2[_0x36eb67]['to_quantity']=_0xb2779a;}),_0x550a35['forEach']((_0x508984,_0x584c45)=>{var _0x2ff247=_0x2bd1ac;_0x4a62c2[_0x584c45][_0x2ff247(0xde)]=_0x508984;}),_0x4863d7[_0x2bd1ac(0x80)]((_0xd9866d,_0x5cf55c)=>{_0x4a62c2[_0x5cf55c]['to_bin']=_0xd9866d;}),_0x90a190[_0x2bd1ac(0x80)]((_0x132d7,_0x19f175)=>{var _0x331130=_0x2bd1ac;_0x4a62c2[_0x19f175][_0x331130(0x7a)]=_0x132d7;}),_0x4ca8a1[_0x2bd1ac(0x80)]((_0x2f9b07,_0x10d65c)=>{_0x4a62c2[_0x10d65c]['primary_code']=_0x2f9b07;}),_0x24e026[_0x2bd1ac(0x80)]((_0x576042,_0x21cd3b)=>{var _0x449297=_0x2bd1ac;_0x4a62c2[_0x21cd3b][_0x449297(0x95)]=_0x576042;}),_0x5f5c5b['forEach']((_0xfa2a70,_0x5ed7d2)=>{var _0x22a657=_0x2bd1ac;_0x4a62c2[_0x5ed7d2][_0x22a657(0xca)]=_0xfa2a70;}),_0x322f5e[_0x2bd1ac(0x80)]((_0x19e42d,_0x20057a)=>{_0x4a62c2[_0x20057a]['maxProducts']=_0x19e42d;}),_0x117aff[_0x2bd1ac(0x80)]((_0x163a93,_0x17f61a)=>{var _0x466575=_0x2bd1ac;_0x4a62c2[_0x17f61a][_0x466575(0xc5)]=_0x163a93;}),_0x2c2370[_0x2bd1ac(0x80)]((_0x2cf570,_0x3d131d)=>{var _0x5ebaf9=_0x2bd1ac;_0x4a62c2[_0x3d131d][_0x5ebaf9(0x97)]=_0x2cf570;}),_0x1685bb['forEach']((_0x46bdf8,_0x56f6f5)=>{var _0x1b5443=_0x2bd1ac;_0x4a62c2[_0x56f6f5][_0x1b5443(0x73)]=_0x46bdf8;}),_0x36568e[_0x2bd1ac(0x80)]((_0x28aee9,_0x54fe0c)=>{var _0x5b146d=_0x2bd1ac;_0x4a62c2[_0x54fe0c][_0x5b146d(0xea)]=_0x28aee9;}),_0x48ac48[_0x2bd1ac(0x80)]((_0x428b6b,_0x1832fc)=>{_0x4a62c2[_0x1832fc]['storage']=_0x428b6b;}),_0x2c4716[_0x2bd1ac(0x80)]((_0x14ce72,_0x315200)=>{var _0x471fba=_0x2bd1ac;_0x4a62c2[_0x315200][_0x471fba(0x133)]=_0x14ce72;}),_0x494827[_0x2bd1ac(0x80)]((_0x57f227,_0x121bde)=>{var _0x9295f7=_0x2bd1ac;_0x4a62c2[_0x121bde][_0x9295f7(0xd1)]=_0x57f227;}),_0x3e9990[_0x2bd1ac(0x80)]((_0x35d229,_0x449e7d)=>{_0x4a62c2[_0x449e7d]['to_types']=_0x35d229;}),_0x52b78b[_0x2bd1ac(0x80)]((_0x28a04a,_0x1c85f2)=>{var _0x467ce0=_0x2bd1ac;_0x4a62c2[_0x1c85f2][_0x467ce0(0x77)]=_0x28a04a;}),_0x2e5040[_0x2bd1ac(0x80)]((_0x9d85a2,_0x10ee0f)=>{var _0x26570a=_0x2bd1ac;_0x4a62c2[_0x10ee0f][_0x26570a(0xe6)]=_0x9d85a2;});const _0x5472b7=_0x4a62c2['filter'](_0x358aa9=>_0x358aa9[_0x2bd1ac(0x76)]!=='0'&&_0x358aa9[_0x2bd1ac(0x76)]!==''||_0x358aa9[_0x2bd1ac(0x7a)]!=='0'&&_0x358aa9[_0x2bd1ac(0x7a)]!=='');var _0x33ef67=0x0;_0x5472b7['forEach'](_0x2a63a1=>{var _0x5ee1be=_0x2bd1ac;parseInt(_0x2a63a1[_0x5ee1be(0x13c)])<parseInt(_0x2a63a1[_0x5ee1be(0x76)])&&_0x33ef67++;});if(_0x33ef67!=0x0)return _0x43911b[_0x2bd1ac(0x10d)](_0x2bd1ac(0xfd),_0x2bd1ac(0xba)),_0x1eda98[_0x2bd1ac(0x78)](_0x2bd1ac(0x84));const _0x41ce1c=await warehouse[_0x2bd1ac(0xb8)]({'name':_0xc3d648[_0x2bd1ac(0x7f)],'room':_0xc3d648['from_room']});_0xc3d648[_0x2bd1ac(0xcd)][_0x2bd1ac(0x80)](_0x1e4de4=>{var _0x2815f3=_0x2bd1ac;if(_0x1e4de4[_0x2815f3(0x76)]>0x0){const _0x3b7170=_0x41ce1c[_0x2815f3(0xa0)]['map'](_0x4cdbc2=>{var _0x400fa2=_0x2815f3;_0x4cdbc2['product_name']==_0x1e4de4[_0x400fa2(0xa3)]&&_0x4cdbc2['floorlevel']==_0x1e4de4[_0x400fa2(0xb0)]&&_0x4cdbc2[_0x400fa2(0x12d)]==_0x1e4de4[_0x400fa2(0xd1)]&&_0x4cdbc2['bin']==_0x1e4de4[_0x400fa2(0xfa)]&&_0x4cdbc2[_0x400fa2(0xd6)]==_0x1e4de4['from_bay']&&_0x4cdbc2[_0x400fa2(0x133)]==_0x1e4de4[_0x400fa2(0xe6)]&&_0x4cdbc2[_0x400fa2(0x72)]==_0x1e4de4[_0x400fa2(0x77)]&&(_0x4cdbc2[_0x400fa2(0x106)]=parseInt(_0x4cdbc2[_0x400fa2(0x106)])+parseInt(_0x1e4de4[_0x400fa2(0x76)]));});}}),await _0x41ce1c[_0x2bd1ac(0xfc)]();const _0x2e1514=await warehouse[_0x2bd1ac(0xb8)]({'name':_0xc3d648[_0x2bd1ac(0xae)],'room':_0xc3d648[_0x2bd1ac(0x143)]});_0xc3d648[_0x2bd1ac(0xcd)][_0x2bd1ac(0x80)](_0x234ab2=>{var _0x50d0de=_0x2bd1ac;if(_0x234ab2[_0x50d0de(0x76)]>0x0){const _0x4d1a7c=_0x2e1514['product_details']['map'](_0x12dfd7=>{var _0x274b9d=_0x50d0de;_0x12dfd7[_0x274b9d(0xa3)]==_0x234ab2['product_name']&&_0x12dfd7['floorlevel']==_0x234ab2[_0x274b9d(0x7a)]&&_0x12dfd7[_0x274b9d(0x12d)]==_0x234ab2[_0x274b9d(0x132)]&&_0x12dfd7[_0x274b9d(0xc1)]==_0x234ab2[_0x274b9d(0x112)]&&_0x12dfd7[_0x274b9d(0xd6)]==_0x234ab2[_0x274b9d(0xde)]&&_0x12dfd7[_0x274b9d(0x133)]==_0x234ab2['rack']&&_0x12dfd7[_0x274b9d(0x72)]==_0x234ab2[_0x274b9d(0x72)]&&(_0x12dfd7[_0x274b9d(0x106)]=parseInt(_0x12dfd7[_0x274b9d(0x106)])-parseInt(_0x234ab2[_0x274b9d(0x76)]));});}}),await _0x2e1514[_0x2bd1ac(0xfc)](),_0xc3d648[_0x2bd1ac(0x9a)]=_0x6d04d,_0xc3d648[_0x2bd1ac(0x7f)]=_0x4ceb7,_0xc3d648[_0x2bd1ac(0xae)]=_0x2fa438,_0xc3d648[_0x2bd1ac(0xcd)]=_0x5472b7,_0xc3d648[_0x2bd1ac(0x9e)]=_0x3b66dc,_0xc3d648['invoice']=_0x3dc083;const _0x45fa2f=await _0xc3d648[_0x2bd1ac(0xfc)]();console['log'](_0x45fa2f);const _0x479029=await warehouse[_0x2bd1ac(0xb8)]({'name':_0x4ceb7,'room':_0x4ba7b8});_0x45fa2f[_0x2bd1ac(0xcd)]['forEach'](_0x111998=>{var _0x36ced7=_0x2bd1ac;if(_0x111998[_0x36ced7(0x76)]>0x0){const _0x1d2049=_0x479029[_0x36ced7(0xa0)][_0x36ced7(0x114)](_0xcc86c1=>{var _0xd6f36c=_0x36ced7;_0xcc86c1[_0xd6f36c(0xa3)]==_0x111998[_0xd6f36c(0xa3)]&&_0xcc86c1[_0xd6f36c(0xe0)]==_0x111998[_0xd6f36c(0xb0)]&&_0xcc86c1[_0xd6f36c(0x12d)]==_0x111998[_0xd6f36c(0xd1)]&&_0xcc86c1[_0xd6f36c(0xc1)]==_0x111998[_0xd6f36c(0xfa)]&&_0xcc86c1['bay']==_0x111998[_0xd6f36c(0x13f)]&&_0xcc86c1[_0xd6f36c(0x133)]==_0x111998['from_rack']&&_0xcc86c1[_0xd6f36c(0x72)]==_0x111998[_0xd6f36c(0x77)]&&(_0xcc86c1[_0xd6f36c(0x106)]=parseInt(_0xcc86c1['product_stock'])-parseInt(_0x111998['to_quantity']));});}}),await _0x479029[_0x2bd1ac(0xfc)]();const _0x1e537b=await warehouse[_0x2bd1ac(0xb8)]({'name':_0x2fa438,'room':_0x14d678});_0x45fa2f[_0x2bd1ac(0xcd)][_0x2bd1ac(0x80)](_0x1eb458=>{var _0x2eeac4=_0x2bd1ac;if(_0x1eb458[_0x2eeac4(0x76)]>0x0){var _0x230eaf=0x0;const _0x3a1be9=_0x1e537b[_0x2eeac4(0xa0)]['map'](_0x2bda80=>{var _0x5cabc6=_0x2eeac4;_0x2bda80[_0x5cabc6(0xa3)]==_0x1eb458[_0x5cabc6(0xa3)]&&_0x2bda80[_0x5cabc6(0xe0)]==_0x1eb458[_0x5cabc6(0x7a)]&&_0x2bda80['type']==_0x1eb458[_0x5cabc6(0x132)]&&_0x2bda80['bin']==_0x1eb458['to_bin']&&_0x2bda80[_0x5cabc6(0xd6)]==_0x1eb458[_0x5cabc6(0xde)]&&_0x2bda80[_0x5cabc6(0x133)]==_0x1eb458['rack']&&_0x2bda80[_0x5cabc6(0x72)]==_0x1eb458[_0x5cabc6(0x72)]&&(_0x2bda80[_0x5cabc6(0x106)]=parseInt(_0x2bda80[_0x5cabc6(0x106)])+parseInt(_0x1eb458['to_quantity']),_0x230eaf++);});_0x230eaf=='0'&&(_0x1e537b[_0x2eeac4(0xa0)]=_0x1e537b['product_details'][_0x2eeac4(0x12b)]({'product_name':_0x1eb458[_0x2eeac4(0xa3)],'product_stock':_0x1eb458[_0x2eeac4(0x76)],'bay':_0x1eb458['to_bay'],'bin':_0x1eb458[_0x2eeac4(0x112)],'type':_0x1eb458[_0x2eeac4(0x132)],'floorlevel':_0x1eb458[_0x2eeac4(0x7a)],'storage':_0x1eb458[_0x2eeac4(0x72)],'rack':_0x1eb458[_0x2eeac4(0x133)],'product_code':_0x1eb458[_0x2eeac4(0xca)],'primary_code':_0x1eb458[_0x2eeac4(0x107)],'secondary_code':_0x1eb458['secondary_code'],'maxProducts':_0x1eb458[_0x2eeac4(0x115)],'storage':_0x1eb458[_0x2eeac4(0x72)],'rack':_0x1eb458['rack']}));}}),await _0x1e537b[_0x2bd1ac(0xfc)](),_0x43911b[_0x2bd1ac(0x10d)](_0x2bd1ac(0x146),_0x2bd1ac(0xe2)),_0x1eda98[_0x2bd1ac(0x78)](_0x2bd1ac(0xd7));}catch(_0x2bf6c9){console['log'](_0x2bf6c9);}}),router[a0_0xf616b0(0xd4)](a0_0xf616b0(0x13d),async(_0x2fcd25,_0x2c51f4)=>{var _0x577979=a0_0xf616b0;const {FromWareHouse:_0x11c5a7,FromRoom:_0x404e54,ToWarehouse:_0x878791,ToRoom:_0x73fb5f,primary_code:_0x309f88,Roomslist:_0x3b9f2a}=_0x2fcd25[_0x577979(0x90)],_0x3c97cb=_0x3b9f2a['split'](','),_0x30fb6a=[];async function _0x191731(_0x5362d8){var _0x5bdf18=_0x577979;const _0x3bbc3f=await warehouse[_0x5bdf18(0xf9)]([{'$match':{'name':_0x11c5a7,'room':_0x5362d8}},{'$unwind':_0x5bdf18(0xdf)},{'$match':{'product_details.primary_code':_0x309f88}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5bdf18(0x7c)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x5bdf18(0x14b)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5bdf18(0xc2)},'level':{'$first':_0x5bdf18(0x130)},'isle':{'$first':_0x5bdf18(0x82)},'type':{'$first':_0x5bdf18(0x14f)},'pallet':{'$first':_0x5bdf18(0x14c)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x5bdf18(0x92)},'storage':{'$first':_0x5bdf18(0x6f)},'rack':{'$first':_0x5bdf18(0x127)},'expiry_date':{'$first':_0x5bdf18(0x12e)},'production_date':{'$first':_0x5bdf18(0x88)},'batch_code':{'$first':_0x5bdf18(0x86)},'maxPerUnit':{'$first':_0x5bdf18(0xaf)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x5bdf18(0x9d)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]),_0x46e27c=await warehouse[_0x5bdf18(0xf9)]([{'$match':{'name':_0x11c5a7,'room':_0x5362d8}},{'$unwind':_0x5bdf18(0xdf)},{'$match':{'product_details.secondary_code':_0x309f88}},{'$group':{'_id':_0x5bdf18(0x11e),'name':{'$first':_0x5bdf18(0x7c)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x5bdf18(0x14b)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x5bdf18(0x82)},'type':{'$first':_0x5bdf18(0x14f)},'pallet':{'$first':_0x5bdf18(0x14c)},'unit':{'$first':_0x5bdf18(0xf5)},'secondary_unit':{'$first':_0x5bdf18(0x92)},'storage':{'$first':_0x5bdf18(0x6f)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x5bdf18(0x88)},'batch_code':{'$first':_0x5bdf18(0x86)},'maxPerUnit':{'$first':_0x5bdf18(0xaf)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);if(_0x3bbc3f['length']>0x0)_0x30fb6a[_0x5bdf18(0xbc)](_0x3bbc3f);else _0x46e27c[_0x5bdf18(0xd0)]>0x0&&_0x30fb6a[_0x5bdf18(0xbc)](_0x46e27c);}const _0x1835e3=_0x3c97cb[_0x577979(0x114)](_0x32f884=>_0x191731(_0x32f884));await Promise['all'](_0x1835e3),_0x2c51f4[_0x577979(0x111)](_0x30fb6a);}),router[a0_0xf616b0(0xd4)]('/barcode_scanner2',async(_0x1a3327,_0x25eed3)=>{var _0x18eaae=a0_0xf616b0;try{const {FromWareHouse:_0x42de11,FromRoom:_0x2f5f08,ToWarehouse:_0x106af4,ToRoom:_0x55d020,secondary_code:_0x134b7e}=_0x1a3327[_0x18eaae(0x90)],_0x58966c=await warehouse[_0x18eaae(0xf9)]([{'$match':{'name':_0x42de11}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x134b7e}},{'$group':{'_id':_0x18eaae(0x11e),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x18eaae(0x14b)},'secondary_code':{'$first':_0x18eaae(0x9b)},'product_code':{'$first':_0x18eaae(0xc2)},'instock':{'$first':_0x18eaae(0x101)},'warehouse':{'$first':_0x18eaae(0xe9)},'level':{'$first':_0x18eaae(0xe3)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x18eaae(0x11d)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x18eaae(0xf5)}}}]);_0x25eed3[_0x18eaae(0x145)](0xc8)['json'](_0x58966c);}catch(_0x17e93){_0x25eed3[_0x18eaae(0x145)](0x194)['json']({'message':_0x17e93[_0x18eaae(0x151)]});}}),router[a0_0xf616b0(0xd4)]('/barcode_scanner3',async(_0x195e14,_0x23e0eb)=>{var _0x391a73=a0_0xf616b0;try{const {FromWareHouse:_0x20c7f9,FromRoom:_0x3f8946,ToWarehouse:_0xf3f83d,ToRoom:_0x382378,product_code:_0x570b52}=_0x195e14[_0x391a73(0x90)],_0x181d54=await warehouse[_0x391a73(0xf9)]([{'$match':{'name':_0x20c7f9}},{'$unwind':_0x391a73(0xdf)},{'$match':{'product_details.product_code':_0x570b52}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x391a73(0x7c)},'primary_code':{'$first':_0x391a73(0x14b)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x391a73(0xc2)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x391a73(0xe9)},'level':{'$first':_0x391a73(0xe3)},'isle':{'$first':_0x391a73(0x98)},'pallet':{'$first':_0x391a73(0x11d)},'maxProducts':{'$first':_0x391a73(0xbd)},'unit':{'$first':'$product_details.unit'}}}]);_0x23e0eb[_0x391a73(0x145)](0xc8)[_0x391a73(0x111)](_0x181d54);}catch(_0x409f59){_0x23e0eb[_0x391a73(0x145)](0x194)[_0x391a73(0x111)]({'message':_0x409f59['message']});}}),router[a0_0xf616b0(0xd4)]('/CheckingWarehouse',async(_0x23a90b,_0x8f97fa)=>{var _0x2a341e=a0_0xf616b0;const {level:_0x68ee6,isle:_0xa8202,pallet:_0x40e5e9,warehouses:_0x3b5c58,room:_0x1b2720}=_0x23a90b['body'];try{const _0x3bc402=await warehouse[_0x2a341e(0xf9)]([{'$match':{'name':_0x3b5c58,'room':_0x1b2720}},{'$unwind':_0x2a341e(0xdf)},{'$match':{'product_details.level':parseInt(_0x68ee6),'product_details.isle':_0xa8202,'product_details.pallet':parseInt(_0x40e5e9)}},{'$group':{'_id':_0x2a341e(0x11e),'name':{'$first':_0x2a341e(0x7c)},'product_stock':{'$first':_0x2a341e(0x101)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x2a341e(0x98)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x2a341e(0xbd)}}}]);_0x8f97fa[_0x2a341e(0x145)](0xc8)[_0x2a341e(0x111)](_0x3bc402);}catch(_0x449a8c){_0x8f97fa['status'](0x194)[_0x2a341e(0x111)]({'message':_0x449a8c[_0x2a341e(0x151)]});}}),module[a0_0xf616b0(0xf1)]=router;