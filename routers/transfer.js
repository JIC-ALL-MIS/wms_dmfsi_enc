var a0_0x13f423=a0_0x339d;(function(_0x3e9a0f,_0x4a6855){var _0x514b2c=a0_0x339d,_0x21922e=_0x3e9a0f();while(!![]){try{var _0x1453fc=-parseInt(_0x514b2c(0x110))/0x1*(-parseInt(_0x514b2c(0x147))/0x2)+parseInt(_0x514b2c(0x1a0))/0x3*(-parseInt(_0x514b2c(0x13d))/0x4)+-parseInt(_0x514b2c(0x140))/0x5+parseInt(_0x514b2c(0x14e))/0x6+-parseInt(_0x514b2c(0x16f))/0x7*(-parseInt(_0x514b2c(0x136))/0x8)+parseInt(_0x514b2c(0x132))/0x9+-parseInt(_0x514b2c(0x19a))/0xa*(parseInt(_0x514b2c(0x109))/0xb);if(_0x1453fc===_0x4a6855)break;else _0x21922e['push'](_0x21922e['shift']());}catch(_0x3da4bb){_0x21922e['push'](_0x21922e['shift']());}}}(a0_0x37bd,0xd1351));const express=require(a0_0x13f423(0x130)),app=express(),router=express[a0_0x13f423(0xae)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x13f423(0x154)),auth=require(a0_0x13f423(0x143)),users=require(a0_0x13f423(0x178)),nodemailer=require(a0_0x13f423(0xdb));function a0_0x339d(_0x121c16,_0x4b84a3){var _0x37bd92=a0_0x37bd();return a0_0x339d=function(_0x339d54,_0x2f2051){_0x339d54=_0x339d54-0xac;var _0x547f68=_0x37bd92[_0x339d54];return _0x547f68;},a0_0x339d(_0x121c16,_0x4b84a3);}router[a0_0x13f423(0x12e)](a0_0x13f423(0xeb),auth,async(_0x5ab022,_0x2f3bbb)=>{var _0x4398b5=a0_0x13f423;try{const {username:_0xdf782a,email:_0x527475,role:_0x3c9f03}=_0x5ab022[_0x4398b5(0x180)],_0x54a497=_0x5ab022[_0x4398b5(0x180)],_0x426d11=await profile['findOne']({'email':_0x54a497[_0x4398b5(0x162)]}),_0x12be0d=await master_shop[_0x4398b5(0x193)]();console[_0x4398b5(0x198)](_0x4398b5(0x11d),_0x12be0d);let _0x22bc53;if(_0x54a497[_0x4398b5(0x12f)]==_0x4398b5(0x16a)){const _0x41910e=await staff[_0x4398b5(0xd1)]({'email':_0x54a497['email']});_0x22bc53=await transfers[_0x4398b5(0x193)]({'from_warehouse':_0x41910e[_0x4398b5(0xb0)]});}else _0x22bc53=await transfers[_0x4398b5(0xed)]([{'$unwind':_0x4398b5(0x199)},{'$group':{'_id':'$_id','invoice':{'$first':_0x4398b5(0xd8)},'date':{'$first':_0x4398b5(0x163)},'from_warehouse':{'$first':_0x4398b5(0x13a)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x4398b5(0xfb)},'to_room_name':{'$addToSet':_0x4398b5(0xd7)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x4398b5(0x19b)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x12be0d[0x0]['language']=='English\x20(US)'){var _0x301143=users['English'];console[_0x4398b5(0x198)](_0x301143);}else{if(_0x12be0d[0x0][_0x4398b5(0xe2)]==_0x4398b5(0x161))var _0x301143=users[_0x4398b5(0x161)];else{if(_0x12be0d[0x0][_0x4398b5(0xe2)]==_0x4398b5(0x115))var _0x301143=users[_0x4398b5(0x115)];else{if(_0x12be0d[0x0]['language']==_0x4398b5(0xbf))var _0x301143=users[_0x4398b5(0xbf)];else{if(_0x12be0d[0x0][_0x4398b5(0xe2)]==_0x4398b5(0x13f))var _0x301143=users['French'];else{if(_0x12be0d[0x0]['language']=='Portuguese\x20(BR)')var _0x301143=users[_0x4398b5(0x170)];else{if(_0x12be0d[0x0][_0x4398b5(0xe2)]==_0x4398b5(0x173))var _0x301143=users['Chinese'];else{if(_0x12be0d[0x0][_0x4398b5(0xe2)]==_0x4398b5(0x14d))var _0x301143=users['Arabic'];}}}}}}}_0x2f3bbb[_0x4398b5(0x152)](_0x4398b5(0x134),{'success':_0x5ab022['flash']('success'),'errors':_0x5ab022[_0x4398b5(0xe5)]('errors'),'role':_0x54a497,'profile':_0x426d11,'master_shop':_0x12be0d,'transfer':_0x22bc53,'language':_0x301143});}catch(_0x13469c){console[_0x4398b5(0x198)](_0x13469c);}});async function getRandom8DigitNumber(){var _0x433b09=a0_0x13f423;const _0x4e32ee=0x989680,_0x32503d=0x5f5e0ff,_0x539dc5=Math[_0x433b09(0xbd)](Math[_0x433b09(0xe0)]()*(_0x32503d-_0x4e32ee+0x1))+_0x4e32ee;var _0x54424c;const _0x2e8add=await transfers['findOne']({'invoice':'TRF-'+_0x539dc5});return _0x2e8add&&_0x2e8add['length']>0x0?_0x54424c=_0x433b09(0x18e)+_0x539dc5:_0x54424c='TRF-'+_0x539dc5,_0x54424c;}router[a0_0x13f423(0x12e)]('/view/add_transfer',auth,async(_0x289d47,_0x4ff904)=>{var _0x507ac5=a0_0x13f423;try{const {username:_0x4df764,email:_0x1358bf,role:_0x471363}=_0x289d47[_0x507ac5(0x180)],_0x1b36ff=_0x289d47[_0x507ac5(0x180)],_0x39f1de=await profile[_0x507ac5(0xd1)]({'email':_0x1b36ff[_0x507ac5(0x162)]}),_0x4d4b55=await master_shop['find']();console[_0x507ac5(0x198)](_0x507ac5(0x11d),_0x4d4b55);let _0x5a1c16;if(_0x1b36ff[_0x507ac5(0x12f)]==_0x507ac5(0x16a)){const _0xbc2caa=await staff[_0x507ac5(0xd1)]({'email':_0x1b36ff[_0x507ac5(0x162)]});_0x5a1c16=await warehouse[_0x507ac5(0xed)]([{'$match':{'status':_0x507ac5(0xe4),'name':_0xbc2caa[_0x507ac5(0xb0)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x507ac5(0xee),'name':{'$first':_0x507ac5(0xee)}}}]);}else _0x5a1c16=await warehouse[_0x507ac5(0xed)]([{'$match':{'status':_0x507ac5(0xe4),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x507ac5(0xee),'name':{'$first':_0x507ac5(0xee)}}}]);var _0x771a0=['Ambient',_0x507ac5(0xc9),_0x507ac5(0x141)];const _0x504d1d=await transfers['find']({}),_0x26cbdd=_0x504d1d[_0x507ac5(0x186)]+0x1,_0x852c6b=_0x507ac5(0x18e)+_0x26cbdd['toString']()[_0x507ac5(0x10c)](0x5,'0');if(_0x4d4b55[0x0][_0x507ac5(0xe2)]==_0x507ac5(0xe1)){var _0x1b8d18=users[_0x507ac5(0x112)];console[_0x507ac5(0x198)](_0x1b8d18);}else{if(_0x4d4b55[0x0][_0x507ac5(0xe2)]==_0x507ac5(0x161))var _0x1b8d18=users[_0x507ac5(0x161)];else{if(_0x4d4b55[0x0][_0x507ac5(0xe2)]==_0x507ac5(0x115))var _0x1b8d18=users[_0x507ac5(0x115)];else{if(_0x4d4b55[0x0][_0x507ac5(0xe2)]==_0x507ac5(0xbf))var _0x1b8d18=users[_0x507ac5(0xbf)];else{if(_0x4d4b55[0x0]['language']==_0x507ac5(0x13f))var _0x1b8d18=users[_0x507ac5(0x13f)];else{if(_0x4d4b55[0x0][_0x507ac5(0xe2)]==_0x507ac5(0xc7))var _0x1b8d18=users['Portuguese'];else{if(_0x4d4b55[0x0][_0x507ac5(0xe2)]=='Chinese')var _0x1b8d18=users['Chinese'];else{if(_0x4d4b55[0x0]['language']==_0x507ac5(0x14d))var _0x1b8d18=users[_0x507ac5(0x107)];}}}}}}}const _0x1b88ff=getRandom8DigitNumber();_0x1b88ff[_0x507ac5(0xef)](_0x3e2993=>{var _0x261a25=_0x507ac5;_0x4ff904['render'](_0x261a25(0x10e),{'success':_0x289d47[_0x261a25(0xe5)](_0x261a25(0xaf)),'errors':_0x289d47[_0x261a25(0xe5)]('errors'),'role':_0x1b36ff,'profile':_0x39f1de,'master_shop':_0x4d4b55,'warehouse':_0x5a1c16,'language':_0x1b8d18,'rooms_data':_0x771a0,'invoice':_0x3e2993});})[_0x507ac5(0xf0)](_0xd8adfb=>{var _0x11ae19=_0x507ac5;_0x289d47[_0x11ae19(0xe5)](_0x11ae19(0x13b),_0x11ae19(0x196)),_0x4ff904[_0x11ae19(0x187)](_0x11ae19(0x16d));});}catch(_0x2fad64){console[_0x507ac5(0x198)](_0x2fad64);}}),router[a0_0x13f423(0x17a)]('/view/add_transfer',auth,async(_0x7acf4d,_0x53f896)=>{var _0xab1d03=a0_0x13f423;try{console[_0xab1d03(0x198)](_0x7acf4d[_0xab1d03(0xc1)]);const {date:_0x148606,from_warehouse:_0x25c7ea,FromRoom_name:_0x5d0309,to_warehouse:_0x77eeb7,ToRoom_name:_0x14e5dc,prod_name:_0x383e37,from_prod_qty:_0x3c0562,from_prod_level:_0xbf3922,from_prod_isle:_0x213cb0,from_prod_pallet:_0x29f17e,to_prod_qty:_0x402c4e,to_prod_level:_0x1bdef2,to_prod_isle:_0x57fadd,to_prod_pallet:_0x45bfe3,primary_code:_0x31bb1a,secondary_code:_0x27461d,product_code3:_0x470359,note:_0x3b52a0,MaxStocks_data2:_0x1616eb,invoice:_0x4e46ed,expiry_date:_0x46a7bd}=_0x7acf4d[_0xab1d03(0xc1)];if(typeof _0x383e37==_0xab1d03(0x11e))var _0x2cc41d=[_0x7acf4d[_0xab1d03(0xc1)]['prod_name']],_0x133245=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x16e)]],_0x29dbbe=[_0x7acf4d['body']['from_prod_level']],_0x34158c=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x184)]],_0x3614c3=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x14b)]],_0x57e00b=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xbe)]],_0x558ede=[_0x7acf4d[_0xab1d03(0xc1)]['secondary_code']],_0x416259=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xad)]],_0x4fedbf=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x185)]],_0x2b21c8=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x167)]],_0x5337af=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x15f)]],_0x558cc6=[_0x7acf4d['body'][_0xab1d03(0x149)]],_0x579f6c=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x127)]],_0x56a9e9=[_0x7acf4d['body'][_0xab1d03(0x157)]],_0x5ced09=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xec)]],_0x529137=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xb5)]],_0x4de68c=[_0x7acf4d['body'][_0xab1d03(0x165)]],_0x242b3a=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xea)]],_0x284220=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xc2)]],_0x55ed5e=[_0x7acf4d[_0xab1d03(0xc1)]['to_invoice']],_0x670eeb=[_0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x19d)]];else var _0x2cc41d=[..._0x7acf4d['body'][_0xab1d03(0x18d)]],_0x133245=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x16e)]],_0x29dbbe=[..._0x7acf4d['body'][_0xab1d03(0xb4)]],_0x34158c=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x184)]],_0x3614c3=[..._0x7acf4d['body'][_0xab1d03(0x14b)]],_0x57e00b=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xbe)]],_0x558ede=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x10d)]],_0x416259=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xad)]],_0x4fedbf=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x185)]],_0x2b21c8=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x167)]],_0x5337af=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x15f)]],_0x558cc6=[..._0x7acf4d[_0xab1d03(0xc1)]['batch_code']],_0x579f6c=[..._0x7acf4d[_0xab1d03(0xc1)]['expiry_date']],_0x56a9e9=[..._0x7acf4d['body'][_0xab1d03(0x157)]],_0x5ced09=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xec)]],_0x529137=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xb5)]],_0x4de68c=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0x165)]],_0x242b3a=[..._0x7acf4d[_0xab1d03(0xc1)]['ToRoomAssigned']],_0x284220=[..._0x7acf4d['body'][_0xab1d03(0xc2)]],_0x55ed5e=[..._0x7acf4d[_0xab1d03(0xc1)][_0xab1d03(0xe9)]],_0x670eeb=[..._0x7acf4d[_0xab1d03(0xc1)]['id_transaction']];const _0xe774f4=_0x2cc41d[_0xab1d03(0xb8)](_0x542a62=>{return _0x542a62={'product_name':_0x542a62};});_0x133245['forEach']((_0x8092b2,_0x2d284a)=>{var _0x21220e=_0xab1d03;_0xe774f4[_0x2d284a][_0x21220e(0x17b)]=_0x8092b2;}),_0x284220['forEach']((_0x177b7b,_0x49a795)=>{var _0x35de5f=_0xab1d03;_0xe774f4[_0x49a795][_0x35de5f(0xc2)]=_0x177b7b;}),_0x55ed5e[_0xab1d03(0x156)]((_0x325e14,_0x54986c)=>{_0xe774f4[_0x54986c]['To_invoice']=_0x325e14;}),_0x670eeb['forEach']((_0x2427b3,_0x4164e8)=>{var _0x351187=_0xab1d03;_0xe774f4[_0x4164e8][_0x351187(0x151)]=_0x2427b3;}),_0x29dbbe['forEach']((_0x2f03cb,_0x3e1e42)=>{var _0x4ad55d=_0xab1d03;_0x4de68c[_0x4ad55d(0x156)]((_0x54936d,_0x54236f)=>{var _0x4efc99=_0x4ad55d;if(_0x54936d=='Receiving\x20Area'&&_0x3e1e42==_0x54236f){var _0x1935c3=_0x2f03cb[_0x4efc99(0x15a)](0x3);_0xe774f4[_0x3e1e42][_0x4efc99(0x150)]=_0x2f03cb[0x0],_0xe774f4[_0x3e1e42]['from_rack']=_0x2f03cb[0x1],_0xe774f4[_0x3e1e42]['from_bay']=0x0,_0xe774f4[_0x3e1e42][_0x4efc99(0x159)]=0x0,_0xe774f4[_0x3e1e42]['from_types']=_0x4efc99(0xdd),_0xe774f4[_0x3e1e42][_0x4efc99(0x124)]=_0x1935c3;}else{if(_0x54936d==_0x4efc99(0x145)&&_0x3e1e42==_0x54236f){var _0x1935c3=_0x2f03cb[_0x4efc99(0x15a)](0x3);_0xe774f4[_0x3e1e42][_0x4efc99(0x150)]=_0x2f03cb[0x0],_0xe774f4[_0x3e1e42][_0x4efc99(0xb2)]=_0x2f03cb[0x1],_0xe774f4[_0x3e1e42][_0x4efc99(0xb7)]=0x0,_0xe774f4[_0x3e1e42][_0x4efc99(0x159)]=0x0,_0xe774f4[_0x3e1e42][_0x4efc99(0xf6)]=_0x4efc99(0xdd),_0xe774f4[_0x3e1e42][_0x4efc99(0x124)]=_0x2f03cb[0x5];}else{if(_0x3e1e42==_0x54236f){if(_0x2f03cb[0x0]=='A'&&_0x2f03cb[0x1]=='L'&&_0x2f03cb[0x2]=='L')console[_0x4efc99(0x198)](_0x54936d+_0x4efc99(0xcc)+_0x3e1e42+'\x20<>\x20'+_0x54236f+_0x4efc99(0xcc)+_0x2f03cb+_0x4efc99(0xb3)),_0xe774f4[_0x3e1e42][_0x4efc99(0x150)]=_0x2f03cb[0x0],_0xe774f4[_0x3e1e42][_0x4efc99(0xb2)]=_0x2f03cb[0x1],_0xe774f4[_0x3e1e42][_0x4efc99(0xb7)]=0x0,_0xe774f4[_0x3e1e42][_0x4efc99(0x159)]=0x0,_0xe774f4[_0x3e1e42][_0x4efc99(0xf6)]=_0x4efc99(0xdd),_0xe774f4[_0x3e1e42]['from_floorlevel']=_0x2f03cb[0x3];else{var _0x44b3f0;if(_0x2f03cb[0x4]=='L')_0x44b3f0='Level';else _0x2f03cb[0x4]=='F'&&(_0x44b3f0=_0x4efc99(0xdd));_0xe774f4[_0x3e1e42][_0x4efc99(0x150)]=_0x2f03cb[0x0],_0xe774f4[_0x3e1e42][_0x4efc99(0xb2)]=_0x2f03cb[0x1],_0xe774f4[_0x3e1e42][_0x4efc99(0xb7)]=_0x2f03cb[0x2],_0xe774f4[_0x3e1e42][_0x4efc99(0x159)]=_0x2f03cb[0x3],_0xe774f4[_0x3e1e42]['from_types']=_0x44b3f0,_0xe774f4[_0x3e1e42][_0x4efc99(0x124)]=_0x2f03cb[0x5];}}}}});}),_0x34158c[_0xab1d03(0x156)]((_0x210cc2,_0x31f722)=>{var _0x59f5d7=_0xab1d03;_0xe774f4[_0x31f722][_0x59f5d7(0x12c)]=_0x210cc2;}),_0x3614c3['forEach']((_0x8e560f,_0xdacee3)=>{var _0x13ab22=_0xab1d03;_0x242b3a[_0x13ab22(0x156)]((_0x10fd37,_0x3dc4f6)=>{var _0x1fa47d=_0x13ab22;if(_0x10fd37==_0x1fa47d(0x14f)&&_0xdacee3==_0x3dc4f6){var _0x161da9=_0x8e560f[_0x1fa47d(0x15a)](0x3);_0xe774f4[_0xdacee3][_0x1fa47d(0x17e)]=_0x8e560f[0x0],_0xe774f4[_0xdacee3][_0x1fa47d(0xb1)]=_0x8e560f[0x1],_0xe774f4[_0xdacee3][_0x1fa47d(0xd3)]=0x0,_0xe774f4[_0xdacee3][_0x1fa47d(0x13e)]=0x0,_0xe774f4[_0xdacee3][_0x1fa47d(0x10a)]='Floor',_0xe774f4[_0xdacee3][_0x1fa47d(0x18b)]=_0x161da9;}else{if(_0x10fd37==_0x1fa47d(0x145)&&_0xdacee3==_0x3dc4f6){var _0x161da9=_0x8e560f['slice'](0x3);_0xe774f4[_0xdacee3]['storage']=_0x8e560f[0x0],_0xe774f4[_0xdacee3]['rack']=_0x8e560f[0x1],_0xe774f4[_0xdacee3][_0x1fa47d(0xd3)]=0x0,_0xe774f4[_0xdacee3][_0x1fa47d(0x13e)]=0x0,_0xe774f4[_0xdacee3][_0x1fa47d(0x10a)]=_0x1fa47d(0xdd),_0xe774f4[_0xdacee3][_0x1fa47d(0x18b)]=_0x8e560f[0x5];}else{if(_0xdacee3==_0x3dc4f6){if(_0x8e560f[0x0]=='A'&&_0x8e560f[0x1]=='L'&&_0x8e560f[0x2]=='L')console[_0x1fa47d(0x198)](_0x10fd37+_0x1fa47d(0xcc)+_0xdacee3+_0x1fa47d(0xcc)+_0x3dc4f6+_0x1fa47d(0xcc)+_0x8e560f+_0x1fa47d(0xb3)),_0xe774f4[_0xdacee3][_0x1fa47d(0x17e)]=_0x8e560f[0x0],_0xe774f4[_0xdacee3][_0x1fa47d(0xb1)]=_0x8e560f[0x1],_0xe774f4[_0xdacee3][_0x1fa47d(0xd3)]=0x0,_0xe774f4[_0xdacee3]['to_bin']=0x0,_0xe774f4[_0xdacee3][_0x1fa47d(0x10a)]=_0x1fa47d(0xdd),_0xe774f4[_0xdacee3][_0x1fa47d(0x18b)]=_0x8e560f[0x3];else{var _0x1c6ee1;if(_0x8e560f[0x4]=='L')_0x1c6ee1='Level';else _0x8e560f[0x4]=='F'&&(_0x1c6ee1='Floor');_0xe774f4[_0xdacee3]['storage']=_0x8e560f[0x0],_0xe774f4[_0xdacee3]['rack']=_0x8e560f[0x1],_0xe774f4[_0xdacee3][_0x1fa47d(0xd3)]=_0x8e560f[0x2],_0xe774f4[_0xdacee3][_0x1fa47d(0x13e)]=_0x8e560f[0x3],_0xe774f4[_0xdacee3]['to_types']=_0x1c6ee1,_0xe774f4[_0xdacee3][_0x1fa47d(0x18b)]=_0x8e560f[0x5];}}}}});}),_0x57e00b[_0xab1d03(0x156)]((_0x237c57,_0x3ec7b3)=>{_0xe774f4[_0x3ec7b3]['primary_code']=_0x237c57;}),_0x558ede[_0xab1d03(0x156)]((_0x1e9464,_0x3ba2ad)=>{var _0x1dc8c8=_0xab1d03;_0xe774f4[_0x3ba2ad][_0x1dc8c8(0x10d)]=_0x1e9464;}),_0x416259[_0xab1d03(0x156)]((_0x22cde8,_0x563ba4)=>{var _0x63d239=_0xab1d03;_0xe774f4[_0x563ba4][_0x63d239(0xde)]=_0x22cde8;}),_0x4fedbf[_0xab1d03(0x156)]((_0x43bc57,_0x5a10b6)=>{var _0x2c20e6=_0xab1d03;_0xe774f4[_0x5a10b6][_0x2c20e6(0x11b)]=_0x43bc57;}),_0x2b21c8[_0xab1d03(0x156)]((_0x5ca348,_0x42acf8)=>{var _0x5317bd=_0xab1d03;_0xe774f4[_0x42acf8][_0x5317bd(0x138)]=_0x5ca348;}),_0x5337af[_0xab1d03(0x156)]((_0x1c5ba8,_0x25bf06)=>{var _0x5b5ae7=_0xab1d03;_0xe774f4[_0x25bf06][_0x5b5ae7(0x15f)]=_0x1c5ba8;}),_0x558cc6[_0xab1d03(0x156)]((_0x32c633,_0x2449f1)=>{var _0x59dfe6=_0xab1d03;_0xe774f4[_0x2449f1][_0x59dfe6(0x149)]=_0x32c633;}),_0x579f6c['forEach']((_0x470261,_0x54f3a7)=>{var _0x3d3f5e=_0xab1d03;_0xe774f4[_0x54f3a7][_0x3d3f5e(0x127)]=_0x470261;}),_0x56a9e9[_0xab1d03(0x156)]((_0x14eb27,_0x13a0ad)=>{var _0x2a3b2a=_0xab1d03;_0xe774f4[_0x13a0ad][_0x2a3b2a(0x1a2)]=_0x14eb27;}),_0x5ced09[_0xab1d03(0x156)]((_0x53100c,_0x71e92)=>{var _0x419ae1=_0xab1d03;_0xe774f4[_0x71e92][_0x419ae1(0xec)]=_0x53100c;}),_0x529137[_0xab1d03(0x156)]((_0x148a48,_0x50a5a8)=>{var _0x4d50c3=_0xab1d03;_0xe774f4[_0x50a5a8][_0x4d50c3(0xb5)]=_0x148a48;}),_0x4de68c[_0xab1d03(0x156)]((_0x483892,_0x168323)=>{var _0x57c59b=_0xab1d03;_0xe774f4[_0x168323][_0x57c59b(0xd9)]=_0x483892;}),_0x242b3a[_0xab1d03(0x156)]((_0x51d918,_0x167360)=>{var _0x183914=_0xab1d03;_0xe774f4[_0x167360][_0x183914(0x144)]=_0x51d918;});const _0x5522e8=_0xe774f4['filter'](_0x26bc18=>_0x26bc18['to_quantity']!=='0'&&_0x26bc18['to_quantity']!==''||_0x26bc18['to_floorlevel']!=='0'&&_0x26bc18[_0xab1d03(0x18b)]!==''),_0x436617=new transfers({'date':_0x148606,'from_warehouse':_0x25c7ea,'to_warehouse':_0x77eeb7,'product':_0x5522e8,'note':_0x3b52a0,'invoice':_0x4e46ed}),_0x443a99=await _0x436617[_0xab1d03(0x146)]();_0x7acf4d[_0xab1d03(0xe5)]('success',_0xab1d03(0x18f)),_0x53f896[_0xab1d03(0x187)](_0xab1d03(0x15b)+_0x443a99[_0xab1d03(0xf8)]);}catch(_0x13bcf2){console[_0xab1d03(0x198)](_0x13bcf2),_0x53f896[_0xab1d03(0x19c)](0xc8)['json']({'errorMessage':_0x13bcf2[_0xab1d03(0x104)]});}}),router[a0_0x13f423(0x12e)](a0_0x13f423(0xcb),auth,async(_0x596076,_0x407858)=>{var _0x3d5cbe=a0_0x13f423;try{const {username:_0x2e5bb4,email:_0x26c3ec,role:_0x504df9}=_0x596076[_0x3d5cbe(0x180)],_0xfc5c10=_0x596076['user'],_0x1efa2b=await profile['findOne']({'email':_0xfc5c10[_0x3d5cbe(0x162)]}),_0x333ec2=await master_shop[_0x3d5cbe(0x193)]();console[_0x3d5cbe(0x198)]('master',_0x333ec2);const _0x1bb58b=await transfers['findById'](_0x596076[_0x3d5cbe(0xcf)]['id']);let _0x24f05c=new Date(_0x1bb58b[_0x3d5cbe(0x127)]),_0x517a81=('0'+_0x24f05c['getDate']())[_0x3d5cbe(0x15a)](-0x2),_0x2413fe=('0'+(_0x24f05c[_0x3d5cbe(0x183)]()+0x1))[_0x3d5cbe(0x15a)](-0x2),_0x445db1=_0x24f05c['getFullYear'](),_0x54763b=_0x445db1+'-'+_0x2413fe+'-'+_0x517a81,_0x31b714;if(_0xfc5c10['role']==_0x3d5cbe(0x16a)){const _0x2897ac=await staff[_0x3d5cbe(0xd1)]({'email':_0xfc5c10[_0x3d5cbe(0x162)]});_0x31b714=await warehouse[_0x3d5cbe(0x193)]({'status':'Enabled','name':_0x2897ac[_0x3d5cbe(0xb0)],'warehouse_category':_0x3d5cbe(0x17d)});}else _0x31b714=await warehouse[_0x3d5cbe(0x193)]({'status':_0x3d5cbe(0xe4),'warehouse_category':_0x3d5cbe(0x17d)});const _0x312209=await warehouse[_0x3d5cbe(0xed)]([{'$match':{'name':_0x1bb58b[_0x3d5cbe(0x168)]}},{'$unwind':_0x3d5cbe(0xe3)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3d5cbe(0x189)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x3d5cbe(0xf9)},'floorlevel':{'$first':_0x3d5cbe(0x158)},'primary_code':{'$first':_0x3d5cbe(0x148)},'secondary_code':{'$first':_0x3d5cbe(0x131)},'product_code':{'$first':_0x3d5cbe(0x101)},'storage':{'$first':_0x3d5cbe(0xf4)},'rack':{'$first':_0x3d5cbe(0x179)},'expiry_date':{'$first':_0x3d5cbe(0xc4)},'production_date':{'$first':_0x3d5cbe(0xdf)},'room':{'$first':'$room'}}}]);if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0xe1)){var _0x558992=users[_0x3d5cbe(0x112)];console[_0x3d5cbe(0x198)](_0x558992);}else{if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0x161))var _0x558992=users[_0x3d5cbe(0x161)];else{if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0x115))var _0x558992=users[_0x3d5cbe(0x115)];else{if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0xbf))var _0x558992=users[_0x3d5cbe(0xbf)];else{if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0x13f))var _0x558992=users['French'];else{if(_0x333ec2[0x0]['language']=='Portuguese\x20(BR)')var _0x558992=users['Portuguese'];else{if(_0x333ec2[0x0][_0x3d5cbe(0xe2)]==_0x3d5cbe(0x173))var _0x558992=users[_0x3d5cbe(0x173)];else{if(_0x333ec2[0x0]['language']=='Arabic\x20(ae)')var _0x558992=users[_0x3d5cbe(0x107)];}}}}}}}_0x407858[_0x3d5cbe(0x152)](_0x3d5cbe(0x188),{'success':_0x596076['flash']('success'),'errors':_0x596076[_0x3d5cbe(0xe5)](_0x3d5cbe(0x13b)),'role':_0xfc5c10,'profile':_0x1efa2b,'master_shop':_0x333ec2,'warehouse':_0x31b714,'transfer':_0x1bb58b,'stock':_0x312209,'language':_0x558992});}catch(_0x2eb065){console['log'](_0x2eb065);}}),router[a0_0x13f423(0x17a)](a0_0x13f423(0xcb),auth,async(_0x2a53ec,_0x170cae)=>{var _0xc8ac7c=a0_0x13f423;try{const _0x71e52a=_0x2a53ec[_0xc8ac7c(0xcf)]['id'],{from_warehouse:_0x474547,FromRoom_name:_0x54430f,to_warehouse:_0x28e409,ToRoom_name:_0x29863b}=_0x2a53ec[_0xc8ac7c(0xc1)],_0x337457=await transfers['findById']({'_id':_0x71e52a}),_0x254679=_0x337457['product'][_0xc8ac7c(0xb8)](async _0x39052f=>{var _0x3ce02b=_0xc8ac7c;if(_0x39052f['to_quantity']>0x0){var _0x411123=await warehouse[_0x3ce02b(0xd1)]({'name':_0x337457[_0x3ce02b(0x168)],'room':_0x39052f[_0x3ce02b(0xd9)],'warehouse_category':_0x3ce02b(0x17d)});const _0x18de9b=_0x411123[_0x3ce02b(0x135)][_0x3ce02b(0xb8)](_0x27e603=>{var _0x8fae2=_0x3ce02b;_0x27e603[_0x8fae2(0x17f)]==_0x39052f[_0x8fae2(0x17f)]&&_0x27e603[_0x8fae2(0x15e)]==_0x39052f[_0x8fae2(0x124)]&&_0x27e603[_0x8fae2(0xce)]==_0x39052f[_0x8fae2(0xf6)]&&_0x27e603[_0x8fae2(0xfd)]==_0x39052f[_0x8fae2(0x159)]&&_0x27e603[_0x8fae2(0xd0)]==_0x39052f[_0x8fae2(0xb7)]&&_0x27e603['rack']==_0x39052f[_0x8fae2(0xb2)]&&_0x27e603[_0x8fae2(0x17e)]==_0x39052f[_0x8fae2(0x150)]&&_0x27e603[_0x8fae2(0x127)]==_0x39052f[_0x8fae2(0x127)]&&_0x27e603[_0x8fae2(0x149)]==_0x39052f[_0x8fae2(0x149)]&&_0x27e603[_0x8fae2(0xec)]==_0x39052f['production_date']&&_0x27e603[_0x8fae2(0x119)]==_0x39052f[_0x8fae2(0xc2)]&&_0x27e603[_0x8fae2(0xf8)]==_0x39052f[_0x8fae2(0x151)]&&(_0x27e603[_0x8fae2(0xf1)]=_0x27e603[_0x8fae2(0xf1)]-_0x39052f['to_quantity']);});}return _0x411123;});Promise[_0xc8ac7c(0xf5)](_0x254679)[_0xc8ac7c(0xef)](async _0x1a7cf9=>{var _0x221955=_0xc8ac7c;try{for(const _0x2e14eb of _0x1a7cf9){await _0x2e14eb[_0x221955(0x146)]();}try{const _0x16ca7f=_0x337457['product'][_0x221955(0xb8)](async _0x3af7ce=>{var _0x21d368=_0x221955;if(_0x3af7ce[_0x21d368(0x12c)]>0x0){var _0x172b8a=await warehouse[_0x21d368(0xd1)]({'name':_0x337457[_0x21d368(0xbb)],'room':_0x3af7ce[_0x21d368(0x144)],'warehouse_category':'Raw\x20Materials'}),_0x2b3ca8=0x0;const _0x3158fc=_0x172b8a[_0x21d368(0x135)][_0x21d368(0xb8)](_0x1c92ce=>{var _0x12b3b2=_0x21d368;_0x1c92ce[_0x12b3b2(0x17f)]==_0x3af7ce[_0x12b3b2(0x17f)]&&_0x1c92ce[_0x12b3b2(0x15e)]==_0x3af7ce[_0x12b3b2(0x18b)]&&_0x1c92ce[_0x12b3b2(0xce)]==_0x3af7ce[_0x12b3b2(0x10a)]&&_0x1c92ce[_0x12b3b2(0xfd)]==_0x3af7ce[_0x12b3b2(0x13e)]&&_0x1c92ce[_0x12b3b2(0xd0)]==_0x3af7ce[_0x12b3b2(0xd3)]&&_0x1c92ce['rack']==_0x3af7ce[_0x12b3b2(0xb1)]&&_0x1c92ce[_0x12b3b2(0x17e)]==_0x3af7ce['storage']&&_0x1c92ce[_0x12b3b2(0x127)]==_0x3af7ce[_0x12b3b2(0x127)]&&_0x1c92ce[_0x12b3b2(0x149)]==_0x3af7ce['batch_code']&&_0x1c92ce[_0x12b3b2(0xec)]==_0x3af7ce[_0x12b3b2(0xec)]&&_0x1c92ce['invoice']==_0x3af7ce[_0x12b3b2(0xc5)]&&(_0x1c92ce[_0x12b3b2(0xf1)]=_0x1c92ce[_0x12b3b2(0xf1)]+_0x3af7ce[_0x12b3b2(0x12c)],_0x2b3ca8++);});_0x2b3ca8=='0'&&(_0x172b8a[_0x21d368(0x135)]=_0x172b8a[_0x21d368(0x135)][_0x21d368(0x153)]({'product_name':_0x3af7ce[_0x21d368(0x17f)],'product_stock':_0x3af7ce[_0x21d368(0x12c)],'bay':_0x3af7ce[_0x21d368(0xd3)],'bin':_0x3af7ce[_0x21d368(0x13e)],'type':_0x3af7ce[_0x21d368(0x10a)],'floorlevel':_0x3af7ce[_0x21d368(0x18b)],'storage':_0x3af7ce[_0x21d368(0x17e)],'rack':_0x3af7ce[_0x21d368(0xb1)],'product_code':_0x3af7ce[_0x21d368(0xde)],'primary_code':_0x3af7ce['primary_code'],'secondary_code':_0x3af7ce[_0x21d368(0x10d)],'maxProducts':_0x3af7ce[_0x21d368(0x11b)],'storage':_0x3af7ce['storage'],'rack':_0x3af7ce['rack'],'expiry_date':_0x3af7ce[_0x21d368(0x127)],'maxPerUnit':_0x3af7ce['maxperunit'],'batch_code':_0x3af7ce[_0x21d368(0x149)],'production_date':_0x3af7ce['production_date']}));}return _0x172b8a;});Promise[_0x221955(0xf5)](_0x16ca7f)[_0x221955(0xef)](async _0x179c34=>{var _0x2656fb=_0x221955;try{for(const _0x5c881c of _0x179c34){await warehouse[_0x2656fb(0xd5)]({'_id':_0x5c881c[_0x2656fb(0xf8)]},{'$addToSet':{'product_details':{'$each':_0x5c881c['product_details']}}});}_0x337457['finalize']=_0x2656fb(0x105);const _0x5ae274=await _0x337457['save'](),_0x1a2715=await master_shop[_0x2656fb(0x193)](),_0x212b62=await email_settings[_0x2656fb(0xd1)](),_0x5a4d2f=await supervisor_settings['find']();var _0x3bafdf=_0x337457[_0x2656fb(0x12a)],_0xe46dd0='',_0xfb4661;for(_0xfb4661 in _0x3bafdf){_0xe46dd0+=_0x2656fb(0x172)+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x17f)]+'</td>'+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0xde)]+'</td>'+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x12c)]+_0x2656fb(0x164)+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x138)]+'</td>'+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x15f)]+_0x2656fb(0x164)+_0x2656fb(0xbc)+_0x337457['to_warehouse']+_0x2656fb(0x164)+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x144)]+_0x2656fb(0x164)+_0x2656fb(0xbc)+_0x3bafdf[_0xfb4661][_0x2656fb(0x17e)]+_0x3bafdf[_0xfb4661][_0x2656fb(0xb1)]+_0x3bafdf[_0xfb4661][_0x2656fb(0xd3)]+_0x3bafdf[_0xfb4661][_0x2656fb(0x13e)]+_0x3bafdf[_0xfb4661][_0x2656fb(0x10a)][0x0]+_0x3bafdf[_0xfb4661][_0x2656fb(0x18b)]+_0x2656fb(0x164),_0x2656fb(0x117);}let _0x3e63ba=nodemailer[_0x2656fb(0x16c)]({'host':_0x212b62[_0x2656fb(0xf2)],'port':Number(_0x212b62[_0x2656fb(0x15c)]),'secure':![],'auth':{'user':_0x212b62['email'],'pass':_0x212b62[_0x2656fb(0x10b)]}}),_0x5004ed={'from':_0x212b62[_0x2656fb(0x162)],'to':_0x5a4d2f[0x0][_0x2656fb(0xd6)],'subject':_0x2656fb(0x100),'attachments':[{'filename':'Logo.png','path':__dirname+_0x2656fb(0x14c)+_0x2656fb(0x155)+_0x1a2715[0x0]['image'],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+_0x2656fb(0xe8)+_0x2656fb(0x121)+_0x2656fb(0x18c)+_0x2656fb(0x121)+_0x2656fb(0x169)+_0x2656fb(0xcd)+'<div>'+_0x2656fb(0xd2)+_0x1a2715[0x0][_0x2656fb(0x16b)]+_0x2656fb(0x123)+_0x2656fb(0xcd)+_0x2656fb(0xcd)+_0x2656fb(0x139)+'<div>'+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x2656fb(0xfe)+_0x337457['invoice']+'\x20'+_0x2656fb(0x118)+_0x2656fb(0x190)+_0x337457[_0x2656fb(0xf3)]+'\x20'+_0x2656fb(0xfa)+'</h5>'+_0x2656fb(0xcd)+_0x2656fb(0x125)+_0x2656fb(0x18a)+_0x2656fb(0x172)+_0x2656fb(0x108)+_0x2656fb(0x174)+_0x2656fb(0x17c)+_0x2656fb(0xda)+_0x2656fb(0xca)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x2656fb(0xe7)+_0x2656fb(0x177)+_0x2656fb(0x117)+_0x2656fb(0x129)+_0x2656fb(0x13c)+'\x20'+_0xe46dd0+'\x20'+_0x2656fb(0xdc)+'</table>'+'<div>'+_0x2656fb(0x10f)+_0x2656fb(0xb9)+_0x1a2715[0x0][_0x2656fb(0x16b)]+_0x2656fb(0x175)+_0x2656fb(0xcd)+_0x2656fb(0xcd)+_0x2656fb(0x197)};_0x3e63ba[_0x2656fb(0x120)](_0x5004ed,function(_0x41f85f,_0x1afaaa){var _0xe1d90=_0x2656fb;_0x41f85f?(console[_0xe1d90(0x198)](_0x41f85f),console[_0xe1d90(0x198)](_0xe1d90(0xb6))):console['log'](_0xe1d90(0x194));}),_0x2a53ec[_0x2656fb(0xe5)](_0x2656fb(0xaf),_0x2656fb(0x171)),_0x170cae[_0x2656fb(0x187)]('/picking_list/PDF_transfer_rm/'+_0x5ae274[_0x2656fb(0xf8)]);}catch(_0x1a1145){console[_0x2656fb(0xac)](_0x1a1145),_0x170cae[_0x2656fb(0x19c)](0x1f4)['json']({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x1a1145['message']});}})[_0x221955(0xf0)](_0xb8bbc1=>{var _0xbee242=_0x221955;console['error'](_0xb8bbc1),_0x170cae[_0xbee242(0x19c)](0x1f4)[_0xbee242(0x1a1)]({'Perror':'An\x20error\x20occurred.'});});}catch(_0x33fc78){_0x170cae[_0x221955(0x1a1)](_0x33fc78);}}catch(_0x2ae3f0){console['error'](_0x2ae3f0),_0x170cae[_0x221955(0x19c)](0x1f4)[_0x221955(0x1a1)]({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x2ae3f0[_0x221955(0x104)]});}})['catch'](_0x32379c=>{var _0x483f34=_0xc8ac7c;console[_0x483f34(0xac)](_0x32379c),_0x170cae['status'](0x1f4)['json']({'Merror':'An\x20error\x20occurred.'});});}catch(_0x1ef700){console[_0xc8ac7c(0x198)](_0x1ef700);}});function BayBinSelected(_0x15a2ae,_0x3fc87f){var _0x9fd1a9=a0_0x13f423,_0x3a3149=[],_0x4f7b3d=[],_0x277acd=[],_0x56f902=[],_0x397662=[],_0x138c59=[];let _0x2e0c1c=[];if(_0x15a2ae==_0x9fd1a9(0x102))switch(_0x3fc87f){case'Rack\x20A':_0x3a3149=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x4f7b3d=[0x1,0x2],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c),_0x9fd1a9(0xdd)],_0x397662=['D'],_0x138c59=['A'];break;case _0x9fd1a9(0x128):_0x3a3149=[0x6,0x5,0x4,0x3,0x2,0x1],_0x4f7b3d=[0x1,0x2],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c),_0x9fd1a9(0xdd)],_0x397662=['D'],_0x138c59=['B'];break;case _0x9fd1a9(0x145):_0x3a3149=[0x0],_0x4f7b3d=[0x0],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0xdd)],_0x397662=['D'],_0x138c59=['S'];break;case _0x9fd1a9(0x14f):_0x3a3149=[0x0],_0x4f7b3d=[0x0],_0x56f902=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x277acd=[_0x9fd1a9(0xdd)],_0x397662=['D'],_0x138c59=['R'];break;}else{if(_0x15a2ae==_0x9fd1a9(0x191))switch(_0x3fc87f){case'Rack\x20A':_0x3a3149=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x4f7b3d=['B','F'],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c),_0x9fd1a9(0xdd)],_0x397662=['C'],_0x138c59=['A'];break;case'Rack\x20B':_0x3a3149=[0x5,0x4,0x3,0x2,0x1],_0x4f7b3d=['F','B','S'],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c),_0x9fd1a9(0xdd)],_0x397662=['C'],_0x138c59=['B'];break;case _0x9fd1a9(0xc3):_0x3a3149=[0x1,0x2,0x3,0x4,0x5],_0x4f7b3d=['B','F','S'],_0x56f902=[0x5,0x4,0x3,0x2,0x1],_0x277acd=[_0x9fd1a9(0x11c),_0x9fd1a9(0xdd)],_0x397662=['C'],_0x138c59=['C'];break;case _0x9fd1a9(0x166):_0x3a3149=[0x5,0x4,0x3,0x2,0x1],_0x4f7b3d=['F','B','S'],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c),'Floor'],_0x397662=['C'],_0x138c59=['D'];break;case _0x9fd1a9(0x14a):_0x3a3149=[0x4,0x3,0x2,0x1],_0x4f7b3d=[0x1,0x2],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=['Level','Floor'],_0x397662=['C'],_0x138c59=['E'];break;case'Rack\x20F':_0x3a3149=[0x1,0x2,0x3],_0x4f7b3d=[0x1,0x2],_0x56f902=[0x1,0x2,0x3,0x4,0x5],_0x277acd=[_0x9fd1a9(0x11c)],_0x397662=['C'],_0x138c59=['F'];break;}}return{'levels':_0x3a3149,'Isle':_0x4f7b3d,'rack':_0x56f902,'type':_0x277acd,'storage':_0x397662,'rak':_0x138c59};}router[a0_0x13f423(0x12e)](a0_0x13f423(0xd4),auth,async(_0x364d44,_0x2c2e4f)=>{var _0x1389f0=a0_0x13f423;try{const {username:_0x61608d,email:_0x4b101b,role:_0x329194}=_0x364d44[_0x1389f0(0x180)],_0x1f06d3=_0x364d44['user'],_0x127e19=await profile['findOne']({'email':_0x1f06d3['email']}),_0x2bb8a3=await master_shop[_0x1389f0(0x193)](),_0x17d0cb=await transfers[_0x1389f0(0x142)](_0x364d44['params']['id']);let _0x463c24;if(_0x1f06d3[_0x1389f0(0x12f)]==_0x1389f0(0x16a)){const _0x54f65b=await staff[_0x1389f0(0xd1)]({'email':_0x1f06d3[_0x1389f0(0x162)]});_0x463c24=await warehouse[_0x1389f0(0xed)]([{'$match':{'status':_0x1389f0(0xe4),'name':_0x54f65b[_0x1389f0(0xb0)],'warehouse_category':_0x1389f0(0x17d)}},{'$group':{'_id':_0x1389f0(0xee),'name':{'$first':_0x1389f0(0xee)}}}]);}else _0x463c24=await warehouse[_0x1389f0(0xed)]([{'$match':{'status':'Enabled','warehouse_category':_0x1389f0(0x17d)}},{'$group':{'_id':_0x1389f0(0xee),'name':{'$first':_0x1389f0(0xee)}}}]);const _0x4b50f3=await warehouse[_0x1389f0(0xed)]([{'$match':{'name':_0x17d0cb[_0x1389f0(0x168)],'warehouse_category':'Raw\x20Materials'}},{'$unwind':_0x1389f0(0xe3)},{'$group':{'_id':_0x1389f0(0x195),'name':{'$first':_0x1389f0(0x176)},'product_stock':{'$first':_0x1389f0(0x189)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x1389f0(0x160)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x1389f0(0x148)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x1389f0(0x101)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1389f0(0x179)},'expiry_date':{'$first':_0x1389f0(0xc4)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x1389f0(0x19f)}}}]),_0xf39a3=await product[_0x1389f0(0x193)]({}),_0x1ff719=BayBinSelected(_0x17d0cb[_0x1389f0(0xbb)],_0x17d0cb[_0x1389f0(0xff)]);if(_0x2bb8a3[0x0][_0x1389f0(0xe2)]==_0x1389f0(0xe1)){var _0x29f156=users[_0x1389f0(0x112)];console[_0x1389f0(0x198)](_0x29f156);}else{if(_0x2bb8a3[0x0]['language']==_0x1389f0(0x161))var _0x29f156=users[_0x1389f0(0x161)];else{if(_0x2bb8a3[0x0]['language']==_0x1389f0(0x115))var _0x29f156=users['German'];else{if(_0x2bb8a3[0x0]['language']=='Spanish')var _0x29f156=users[_0x1389f0(0xbf)];else{if(_0x2bb8a3[0x0][_0x1389f0(0xe2)]==_0x1389f0(0x13f))var _0x29f156=users[_0x1389f0(0x13f)];else{if(_0x2bb8a3[0x0]['language']==_0x1389f0(0xc7))var _0x29f156=users[_0x1389f0(0x170)];else{if(_0x2bb8a3[0x0][_0x1389f0(0xe2)]==_0x1389f0(0x173))var _0x29f156=users[_0x1389f0(0x173)];else{if(_0x2bb8a3[0x0][_0x1389f0(0xe2)]=='Arabic\x20(ae)')var _0x29f156=users[_0x1389f0(0x107)];}}}}}}}_0x2c2e4f[_0x1389f0(0x152)](_0x1389f0(0x116),{'success':_0x364d44[_0x1389f0(0xe5)](_0x1389f0(0xaf)),'errors':_0x364d44[_0x1389f0(0xe5)](_0x1389f0(0x13b)),'role':_0x1f06d3,'profile':_0x127e19,'master_shop':_0x2bb8a3,'warehouse':_0x463c24,'transfer':_0x17d0cb,'stock':_0x4b50f3,'unit':_0xf39a3,'language':_0x29f156});}catch(_0x2862a9){console['log'](_0x2862a9);}}),router['post'](a0_0x13f423(0xd4),auth,async(_0x7b6b8e,_0x126c8d)=>{var _0x250a7a=a0_0x13f423;try{const _0x54c06d=_0x7b6b8e[_0x250a7a(0xcf)]['id'],_0x8aa6c8=await transfers[_0x250a7a(0x142)](_0x54c06d);_0x126c8d[_0x250a7a(0x1a1)](_0x7b6b8e['body']);return;const {date:_0x49a70d,from_warehouse:_0x3e103a,FromRoom_name:_0x2249c2,to_warehouse:_0x11c7ba,ToRoom_name:_0x467cd8,prod_name:_0x1e4dd2,from_prod_qty:_0x4939a9,from_prod_level:_0x83d3e5,from_prod_isle:_0x5b373c,from_prod_pallet:_0x12f1c0,to_prod_qty:_0x2b6fd7,to_prod_level:_0x184942,to_prod_isle:_0x59d01d,to_prod_pallet:_0x2a877a,primary_code:_0x197bd3,secondary_code:_0x5dec3d,product_code3:_0x445bf2,note:_0x2479d1,invoice:_0x25aa20,expiry_date:_0x313c88}=_0x7b6b8e['body'];if(typeof _0x1e4dd2==_0x250a7a(0x11e))var _0x1adeb4=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x18d)]],_0x380c07=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x16e)]],_0x2082ca=[_0x7b6b8e['body'][_0x250a7a(0xb4)]],_0x1fd754=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xc8)]],_0x500cf3=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xf7)]],_0x44b955=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xf6)]],_0x1f77cb=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x12b)]],_0x1fd6c1=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x14b)]],_0x52eb32=[_0x7b6b8e['body']['to_prod_isle']],_0x3d5dda=[_0x7b6b8e['body'][_0x250a7a(0x19e)]],_0x619d25=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x10a)]],_0xf67c2c=[_0x7b6b8e['body'][_0x250a7a(0x17e)]],_0x1b2865=[_0x7b6b8e['body']['rak']],_0x421145=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xbe)]],_0x289eb9=[_0x7b6b8e[_0x250a7a(0xc1)]['secondary_code']],_0x5d11e5=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xad)]],_0x5804c1=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x185)]],_0x1efa9d=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x138)]],_0x461871=[_0x7b6b8e['body'][_0x250a7a(0x15f)]],_0x42c49e=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x149)]],_0x2bc028=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x127)]],_0x156458=[_0x7b6b8e[_0x250a7a(0xc1)]['from_storage']],_0x3ef1d4=[_0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x182)]];else var _0x1adeb4=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x18d)]],_0xf67c2c=[..._0x7b6b8e['body']['storage']],_0x1b2865=[..._0x7b6b8e[_0x250a7a(0xc1)]['rak']],_0x44b955=[..._0x7b6b8e['body'][_0x250a7a(0xf6)]],_0x619d25=[..._0x7b6b8e['body'][_0x250a7a(0x10a)]],_0x380c07=[..._0x7b6b8e['body'][_0x250a7a(0x16e)]],_0x2082ca=[..._0x7b6b8e[_0x250a7a(0xc1)]['from_prod_level']],_0x1fd754=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xc8)]],_0x500cf3=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xf7)]],_0x1f77cb=[..._0x7b6b8e['body']['to_prod_qty']],_0x1fd6c1=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x14b)]],_0x52eb32=[..._0x7b6b8e['body'][_0x250a7a(0x11a)]],_0x3d5dda=[..._0x7b6b8e[_0x250a7a(0xc1)]['to_prod_pallet']],_0x421145=[..._0x7b6b8e[_0x250a7a(0xc1)]['primary_code']],_0x289eb9=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x10d)]],_0x5d11e5=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0xad)]],_0x5804c1=[..._0x7b6b8e['body'][_0x250a7a(0x185)]],_0x1efa9d=[..._0x7b6b8e['body']['unit']],_0x461871=[..._0x7b6b8e['body']['secondary_unit']],_0x42c49e=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x149)]],_0x2bc028=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x127)]],_0x156458=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x150)]],_0x3ef1d4=[..._0x7b6b8e[_0x250a7a(0xc1)][_0x250a7a(0x182)]];const _0x11423e=_0x1adeb4[_0x250a7a(0xb8)](_0x1130dc=>{return _0x1130dc={'product_name':_0x1130dc};});_0x380c07[_0x250a7a(0x156)]((_0x599ec3,_0x137460)=>{var _0xc9165c=_0x250a7a;_0x11423e[_0x137460][_0xc9165c(0x17b)]=_0x599ec3;}),_0x2082ca[_0x250a7a(0x156)]((_0x3d3e10,_0x351a67)=>{_0x11423e[_0x351a67]['from_bay']=_0x3d3e10;}),_0x1fd754['forEach']((_0x4a4b0b,_0x1a6dd5)=>{var _0x4a0110=_0x250a7a;_0x11423e[_0x1a6dd5][_0x4a0110(0x159)]=_0x4a4b0b;}),_0x500cf3[_0x250a7a(0x156)]((_0x18c0c1,_0x48926b)=>{var _0x27340e=_0x250a7a;_0x11423e[_0x48926b][_0x27340e(0x124)]=_0x18c0c1;}),_0x1f77cb[_0x250a7a(0x156)]((_0x182b4b,_0x16ad4d)=>{_0x11423e[_0x16ad4d]['to_quantity']=_0x182b4b;}),_0x1fd6c1[_0x250a7a(0x156)]((_0x28aa34,_0x341860)=>{var _0x212dd8=_0x250a7a;_0x11423e[_0x341860][_0x212dd8(0xd3)]=_0x28aa34;}),_0x52eb32[_0x250a7a(0x156)]((_0x2b5760,_0x27d1bf)=>{var _0x1f3b77=_0x250a7a;_0x11423e[_0x27d1bf][_0x1f3b77(0x13e)]=_0x2b5760;}),_0x3d5dda[_0x250a7a(0x156)]((_0x59aeeb,_0x56876c)=>{var _0x101e10=_0x250a7a;_0x11423e[_0x56876c][_0x101e10(0x18b)]=_0x59aeeb;}),_0x421145[_0x250a7a(0x156)]((_0x15e3d9,_0x517955)=>{var _0x3ff9bb=_0x250a7a;_0x11423e[_0x517955][_0x3ff9bb(0xbe)]=_0x15e3d9;}),_0x289eb9[_0x250a7a(0x156)]((_0x4b4bd8,_0x5f302d)=>{var _0x41575b=_0x250a7a;_0x11423e[_0x5f302d][_0x41575b(0x10d)]=_0x4b4bd8;}),_0x5d11e5[_0x250a7a(0x156)]((_0x13b9f3,_0x4fec30)=>{_0x11423e[_0x4fec30]['product_code']=_0x13b9f3;}),_0x5804c1['forEach']((_0x323fbe,_0x363bed)=>{var _0x2e3bfe=_0x250a7a;_0x11423e[_0x363bed][_0x2e3bfe(0x11b)]=_0x323fbe;}),_0x1efa9d[_0x250a7a(0x156)]((_0x1641ac,_0x3449aa)=>{var _0x163eb4=_0x250a7a;_0x11423e[_0x3449aa][_0x163eb4(0x138)]=_0x1641ac;}),_0x461871[_0x250a7a(0x156)]((_0x52fd8d,_0x3af3d4)=>{var _0x46db8e=_0x250a7a;_0x11423e[_0x3af3d4][_0x46db8e(0x15f)]=_0x52fd8d;}),_0x42c49e[_0x250a7a(0x156)]((_0x4147d1,_0x992b9e)=>{var _0x26b530=_0x250a7a;_0x11423e[_0x992b9e][_0x26b530(0x149)]=_0x4147d1;}),_0x2bc028[_0x250a7a(0x156)]((_0x39eae4,_0xec9463)=>{var _0x40f203=_0x250a7a;_0x11423e[_0xec9463][_0x40f203(0x127)]=_0x39eae4;}),_0xf67c2c[_0x250a7a(0x156)]((_0x1252ff,_0x5a8690)=>{_0x11423e[_0x5a8690]['storage']=_0x1252ff;}),_0x1b2865[_0x250a7a(0x156)]((_0x625435,_0x12a0a0)=>{_0x11423e[_0x12a0a0]['rack']=_0x625435;}),_0x44b955['forEach']((_0x37893c,_0x1b0e1b)=>{var _0x1d8dcb=_0x250a7a;_0x11423e[_0x1b0e1b][_0x1d8dcb(0xf6)]=_0x37893c;}),_0x619d25[_0x250a7a(0x156)]((_0x1a1d8c,_0x2cad43)=>{var _0x328f97=_0x250a7a;_0x11423e[_0x2cad43][_0x328f97(0x10a)]=_0x1a1d8c;}),_0x156458['forEach']((_0x1c7771,_0x341593)=>{_0x11423e[_0x341593]['from_storage']=_0x1c7771;}),_0x3ef1d4[_0x250a7a(0x156)]((_0x4788fd,_0x4c9447)=>{var _0x23c17a=_0x250a7a;_0x11423e[_0x4c9447][_0x23c17a(0xb2)]=_0x4788fd;});const _0x32be1e=_0x11423e[_0x250a7a(0x15d)](_0x39c4d6=>_0x39c4d6[_0x250a7a(0x12c)]!=='0'&&_0x39c4d6[_0x250a7a(0x12c)]!==''||_0x39c4d6[_0x250a7a(0x18b)]!=='0'&&_0x39c4d6[_0x250a7a(0x18b)]!=='');var _0x32d098=0x0;_0x32be1e[_0x250a7a(0x156)](_0x5452d2=>{var _0x4f77e0=_0x250a7a;parseInt(_0x5452d2[_0x4f77e0(0x17b)])<parseInt(_0x5452d2[_0x4f77e0(0x12c)])&&_0x32d098++;});if(_0x32d098!=0x0)return _0x7b6b8e[_0x250a7a(0xe5)]('errors',_0x250a7a(0xc6)),_0x126c8d[_0x250a7a(0x187)](_0x250a7a(0x192));const _0x53059c=await warehouse[_0x250a7a(0xd1)]({'name':_0x8aa6c8['from_warehouse'],'room':_0x8aa6c8[_0x250a7a(0xc0)]});_0x8aa6c8[_0x250a7a(0x12a)][_0x250a7a(0x156)](_0x3c4d19=>{var _0x34e1a9=_0x250a7a;if(_0x3c4d19[_0x34e1a9(0x12c)]>0x0){const _0x4205ad=_0x53059c['product_details']['map'](_0x13b541=>{var _0x583be6=_0x34e1a9;_0x13b541[_0x583be6(0x17f)]==_0x3c4d19[_0x583be6(0x17f)]&&_0x13b541[_0x583be6(0x15e)]==_0x3c4d19[_0x583be6(0x124)]&&_0x13b541[_0x583be6(0xce)]==_0x3c4d19[_0x583be6(0xf6)]&&_0x13b541[_0x583be6(0xfd)]==_0x3c4d19['from_bin']&&_0x13b541[_0x583be6(0xd0)]==_0x3c4d19[_0x583be6(0xb7)]&&_0x13b541[_0x583be6(0xb1)]==_0x3c4d19['from_rack']&&_0x13b541['storage']==_0x3c4d19['from_storage']&&(_0x13b541[_0x583be6(0xf1)]=parseInt(_0x13b541['product_stock'])+parseInt(_0x3c4d19[_0x583be6(0x12c)]));});}}),await _0x53059c[_0x250a7a(0x146)]();const _0x4b7175=await warehouse[_0x250a7a(0xd1)]({'name':_0x8aa6c8[_0x250a7a(0xbb)],'room':_0x8aa6c8[_0x250a7a(0xff)]});_0x8aa6c8[_0x250a7a(0x12a)][_0x250a7a(0x156)](_0x3757fd=>{var _0x560136=_0x250a7a;if(_0x3757fd['to_quantity']>0x0){const _0x1be503=_0x4b7175[_0x560136(0x135)]['map'](_0x25ea92=>{var _0x4e75db=_0x560136;_0x25ea92[_0x4e75db(0x17f)]==_0x3757fd[_0x4e75db(0x17f)]&&_0x25ea92[_0x4e75db(0x15e)]==_0x3757fd[_0x4e75db(0x18b)]&&_0x25ea92['type']==_0x3757fd['to_types']&&_0x25ea92[_0x4e75db(0xfd)]==_0x3757fd['to_bin']&&_0x25ea92[_0x4e75db(0xd0)]==_0x3757fd[_0x4e75db(0xd3)]&&_0x25ea92['rack']==_0x3757fd[_0x4e75db(0xb1)]&&_0x25ea92[_0x4e75db(0x17e)]==_0x3757fd[_0x4e75db(0x17e)]&&(_0x25ea92[_0x4e75db(0xf1)]=parseInt(_0x25ea92['product_stock'])-parseInt(_0x3757fd[_0x4e75db(0x12c)]));});}}),await _0x4b7175[_0x250a7a(0x146)](),_0x8aa6c8[_0x250a7a(0xf3)]=_0x49a70d,_0x8aa6c8['from_warehouse']=_0x3e103a,_0x8aa6c8[_0x250a7a(0xbb)]=_0x11c7ba,_0x8aa6c8[_0x250a7a(0x12a)]=_0x32be1e,_0x8aa6c8[_0x250a7a(0x122)]=_0x2479d1,_0x8aa6c8[_0x250a7a(0x119)]=_0x25aa20;const _0x5984b7=await _0x8aa6c8['save']();console[_0x250a7a(0x198)](_0x5984b7);const _0x2269bf=await warehouse[_0x250a7a(0xd1)]({'name':_0x3e103a,'room':_0x2249c2});_0x5984b7[_0x250a7a(0x12a)][_0x250a7a(0x156)](_0x378233=>{var _0x19980f=_0x250a7a;if(_0x378233['to_quantity']>0x0){const _0x26b320=_0x2269bf[_0x19980f(0x135)][_0x19980f(0xb8)](_0x123ac1=>{var _0x2d900c=_0x19980f;_0x123ac1[_0x2d900c(0x17f)]==_0x378233[_0x2d900c(0x17f)]&&_0x123ac1[_0x2d900c(0x15e)]==_0x378233[_0x2d900c(0x124)]&&_0x123ac1['type']==_0x378233[_0x2d900c(0xf6)]&&_0x123ac1[_0x2d900c(0xfd)]==_0x378233[_0x2d900c(0x159)]&&_0x123ac1[_0x2d900c(0xd0)]==_0x378233['from_bay']&&_0x123ac1[_0x2d900c(0xb1)]==_0x378233[_0x2d900c(0xb2)]&&_0x123ac1['storage']==_0x378233[_0x2d900c(0x150)]&&(_0x123ac1[_0x2d900c(0xf1)]=parseInt(_0x123ac1[_0x2d900c(0xf1)])-parseInt(_0x378233[_0x2d900c(0x12c)]));});}}),await _0x2269bf[_0x250a7a(0x146)]();const _0x3dc5cd=await warehouse[_0x250a7a(0xd1)]({'name':_0x11c7ba,'room':_0x467cd8});_0x5984b7['product']['forEach'](_0x32a5a2=>{var _0x453bf6=_0x250a7a;if(_0x32a5a2['to_quantity']>0x0){var _0x365543=0x0;const _0x4b5448=_0x3dc5cd[_0x453bf6(0x135)]['map'](_0x1266c4=>{var _0xe9d47=_0x453bf6;_0x1266c4[_0xe9d47(0x17f)]==_0x32a5a2[_0xe9d47(0x17f)]&&_0x1266c4[_0xe9d47(0x15e)]==_0x32a5a2['to_floorlevel']&&_0x1266c4[_0xe9d47(0xce)]==_0x32a5a2[_0xe9d47(0x10a)]&&_0x1266c4[_0xe9d47(0xfd)]==_0x32a5a2['to_bin']&&_0x1266c4[_0xe9d47(0xd0)]==_0x32a5a2[_0xe9d47(0xd3)]&&_0x1266c4[_0xe9d47(0xb1)]==_0x32a5a2[_0xe9d47(0xb1)]&&_0x1266c4['storage']==_0x32a5a2[_0xe9d47(0x17e)]&&(_0x1266c4['product_stock']=parseInt(_0x1266c4[_0xe9d47(0xf1)])+parseInt(_0x32a5a2['to_quantity']),_0x365543++);});_0x365543=='0'&&(_0x3dc5cd[_0x453bf6(0x135)]=_0x3dc5cd[_0x453bf6(0x135)]['concat']({'product_name':_0x32a5a2['product_name'],'product_stock':_0x32a5a2[_0x453bf6(0x12c)],'bay':_0x32a5a2[_0x453bf6(0xd3)],'bin':_0x32a5a2[_0x453bf6(0x13e)],'type':_0x32a5a2[_0x453bf6(0x10a)],'floorlevel':_0x32a5a2[_0x453bf6(0x18b)],'storage':_0x32a5a2[_0x453bf6(0x17e)],'rack':_0x32a5a2[_0x453bf6(0xb1)],'product_code':_0x32a5a2[_0x453bf6(0xde)],'primary_code':_0x32a5a2['primary_code'],'secondary_code':_0x32a5a2[_0x453bf6(0x10d)],'maxProducts':_0x32a5a2[_0x453bf6(0x11b)],'storage':_0x32a5a2[_0x453bf6(0x17e)],'rack':_0x32a5a2[_0x453bf6(0xb1)]}));}}),await _0x3dc5cd[_0x250a7a(0x146)](),_0x7b6b8e['flash'](_0x250a7a(0xaf),_0x250a7a(0x113)),_0x126c8d[_0x250a7a(0x187)](_0x250a7a(0x16d));}catch(_0x36b94b){console[_0x250a7a(0x198)](_0x36b94b);}}),router[a0_0x13f423(0x17a)]('/barcode_scanner',async(_0x137ac3,_0x3b343d)=>{var _0x464491=a0_0x13f423;const {FromWareHouse:_0x3b72aa,FromRoom:_0x323c19,ToWarehouse:_0x46a0ed,ToRoom:_0x221657,primary_code:_0xfdc9bf,Roomslist:_0x3524ec}=_0x137ac3['body'],_0x5912b6=_0x3524ec[_0x464491(0xe6)](','),_0x12cbd7=[];async function _0x372ac4(_0x57f786){var _0x4e644b=_0x464491;const _0x224ff4=await warehouse[_0x4e644b(0xed)]([{'$match':{'name':_0x3b72aa,'room':_0x57f786}},{'$unwind':_0x4e644b(0xe3)},{'$match':{'product_details.primary_code':_0xfdc9bf}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x4e644b(0x176)},'instock':{'$first':_0x4e644b(0x189)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4e644b(0x131)},'product_code':{'$first':_0x4e644b(0x101)},'level':{'$first':_0x4e644b(0x12d)},'isle':{'$first':_0x4e644b(0x160)},'type':{'$first':_0x4e644b(0xf9)},'pallet':{'$first':_0x4e644b(0x158)},'unit':{'$first':_0x4e644b(0xba)},'secondary_unit':{'$first':_0x4e644b(0x137)},'storage':{'$first':_0x4e644b(0xf4)},'rack':{'$first':_0x4e644b(0x179)},'expiry_date':{'$first':_0x4e644b(0xc4)},'production_date':{'$first':_0x4e644b(0xdf)},'batch_code':{'$first':_0x4e644b(0x11f)},'maxPerUnit':{'$first':_0x4e644b(0x111)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x4e644b(0x19f)},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':_0x4e644b(0x106)}}}]),_0x4083a8=await warehouse[_0x4e644b(0xed)]([{'$match':{'name':_0x3b72aa,'room':_0x57f786}},{'$unwind':_0x4e644b(0xe3)},{'$match':{'product_details.secondary_code':_0xfdc9bf}},{'$group':{'_id':_0x4e644b(0x195),'name':{'$first':_0x4e644b(0x176)},'instock':{'$first':_0x4e644b(0x189)},'primary_code':{'$first':_0x4e644b(0x148)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4e644b(0x101)},'level':{'$first':_0x4e644b(0x12d)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x4e644b(0xf9)},'pallet':{'$first':_0x4e644b(0x158)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x4e644b(0x137)},'storage':{'$first':_0x4e644b(0xf4)},'rack':{'$first':_0x4e644b(0x179)},'expiry_date':{'$first':_0x4e644b(0xc4)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x4e644b(0x11f)},'maxPerUnit':{'$first':_0x4e644b(0x111)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x4e644b(0xfc)},'invoice_product':{'$first':'$product_details.invoice'}}}]);if(_0x224ff4['length']>0x0)_0x12cbd7[_0x4e644b(0x103)](_0x224ff4);else _0x4083a8[_0x4e644b(0x186)]>0x0&&_0x12cbd7[_0x4e644b(0x103)](_0x4083a8);}const _0x4ed6c1=_0x5912b6['map'](_0x599230=>_0x372ac4(_0x599230));await Promise[_0x464491(0xf5)](_0x4ed6c1),_0x3b343d['json'](_0x12cbd7);}),router[a0_0x13f423(0x17a)]('/barcode_scanner2',async(_0xa55d93,_0x367363)=>{var _0x2cba55=a0_0x13f423;try{const {FromWareHouse:_0xdeb4e4,FromRoom:_0x231dea,ToWarehouse:_0x4ea0dd,ToRoom:_0x20039a,secondary_code:_0xcb3763}=_0xa55d93['body'],_0x1f83a4=await warehouse[_0x2cba55(0xed)]([{'$match':{'name':_0xdeb4e4}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0xcb3763}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x2cba55(0x148)},'secondary_code':{'$first':_0x2cba55(0x131)},'product_code':{'$first':_0x2cba55(0x101)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x2cba55(0xee)},'level':{'$first':_0x2cba55(0x181)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x2cba55(0x114)},'maxProducts':{'$first':_0x2cba55(0xfc)},'unit':{'$first':'$product_details.unit'}}}]);_0x367363['status'](0xc8)[_0x2cba55(0x1a1)](_0x1f83a4);}catch(_0x494f2a){_0x367363[_0x2cba55(0x19c)](0x194)[_0x2cba55(0x1a1)]({'message':_0x494f2a[_0x2cba55(0x104)]});}}),router[a0_0x13f423(0x17a)]('/barcode_scanner3',async(_0xed3e61,_0x2cd2b7)=>{var _0x245d2e=a0_0x13f423;try{const {FromWareHouse:_0x148c34,FromRoom:_0x4a379e,ToWarehouse:_0x1f177f,ToRoom:_0x3345c0,product_code:_0x54cee6}=_0xed3e61['body'],_0x59dd07=await warehouse[_0x245d2e(0xed)]([{'$match':{'name':_0x148c34}},{'$unwind':_0x245d2e(0xe3)},{'$match':{'product_details.product_code':_0x54cee6}},{'$group':{'_id':_0x245d2e(0x195),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x245d2e(0x131)},'product_code':{'$first':_0x245d2e(0x101)},'instock':{'$first':_0x245d2e(0x189)},'warehouse':{'$first':_0x245d2e(0xee)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x245d2e(0x133)},'pallet':{'$first':_0x245d2e(0x114)},'maxProducts':{'$first':_0x245d2e(0xfc)},'unit':{'$first':_0x245d2e(0xba)}}}]);_0x2cd2b7[_0x245d2e(0x19c)](0xc8)[_0x245d2e(0x1a1)](_0x59dd07);}catch(_0x1e83b9){_0x2cd2b7[_0x245d2e(0x19c)](0x194)[_0x245d2e(0x1a1)]({'message':_0x1e83b9[_0x245d2e(0x104)]});}}),router[a0_0x13f423(0x17a)]('/CheckingWarehouse',async(_0x37cb50,_0xe159a8)=>{var _0x342f38=a0_0x13f423;const {level:_0xd87d0d,isle:_0x256126,pallet:_0x8fbf28,warehouses:_0x2efaec,room:_0x200b54}=_0x37cb50['body'];try{const _0x260f0b=await warehouse[_0x342f38(0xed)]([{'$match':{'name':_0x2efaec,'room':_0x200b54}},{'$unwind':_0x342f38(0xe3)},{'$match':{'product_details.level':parseInt(_0xd87d0d),'product_details.isle':_0x256126,'product_details.pallet':parseInt(_0x8fbf28)}},{'$group':{'_id':_0x342f38(0x195),'name':{'$first':_0x342f38(0x176)},'product_stock':{'$first':_0x342f38(0x189)},'level':{'$first':_0x342f38(0x181)},'isle':{'$first':_0x342f38(0x133)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0xe159a8['status'](0xc8)['json'](_0x260f0b);}catch(_0x32c1b1){_0xe159a8[_0x342f38(0x19c)](0x194)[_0x342f38(0x1a1)]({'message':_0x32c1b1[_0x342f38(0x104)]});}}),module[a0_0x13f423(0x126)]=router;function a0_0x37bd(){var _0x1fa142=['/transfer/view','from_prod_qty','2326744OuVtJC','Portuguese','Transfer\x20Finalize\x20Successfully','<tr>','Chinese','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</h5>','$product_details.product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','../public/language/languages.json','$product_details.rack','post','from_quantity','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','Raw\x20Materials','storage','product_name','user','$product_details.level','from_rak','getMonth','New_Qty_Converted','MaxStocks_data2','length','redirect','edit_transfer_view','$product_details.product_stock','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','to_floorlevel','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','prod_name','TRF-','Product\x20Transfer\x20successfully','\x20Order\x20Date\x20:\x20','COLD\x20STORAGE','back','find','Email\x20sent\x20successfully','$product_details._id','There\x27s\x20a\x20error\x20in\x20this\x20transaction','</body></html>','log','$product','3925130nrdiDm','$isAllowEdit','status','id_transaction','to_prod_pallet','$room','3194871LZDLNq','json','maxperunit','error','product_code3','Router','success','warehouse','rack','from_rack','here','from_prod_level','prod_cat','Error\x20Occurs','from_bay','map','<h5>','$product_details.unit','to_warehouse','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','floor','primary_code','Spanish','from_room','body','from_invoice','Rack\x20C','$product_details.expiry_date','To_invoice','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','Portuguese\x20(BR)','from_prod_isle','Enclosed','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','/preview/:id','\x20<>\x20','</div>','type','params','bay','findOne','<h2>\x20','to_bay','/view/:id','updateOne','RMSEmail','$product.to_room_name','$invoice','from_room_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','nodemailer','</tbody>','Floor','product_code','$product_details.production_date','random','English\x20(US)','language','$product_details','Enabled','flash','split','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','</head><body>','to_invoice','ToRoomAssigned','/view','production_date','aggregate','$name','then','catch','product_stock','host','date','$product_details.storage','all','from_types','from_prod_pallet','_id','$product_details.type','</span>','$product.from_room_name','$product_details.maxProducts','bin','\x20Order\x20Number\x20:\x20','to_room','Transfer\x20Mail','$product_details.product_code','DRY\x20STORAGE','push','message','True','$product_details.invoice','Arabic','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','11QPqSIa','to_types','password','padStart','secondary_code','add_transfer','<strong>\x20Regards\x20</strong>','2TteJOQ','$product_details.maxPerUnit','English','Transfer\x20Edit\x20Successfully','$product_details.pallet','German','edit_transfer','</tr>','<span\x20style=\x22float:\x20right;\x22>','invoice','to_prod_isle','maxProducts','Level','master','string','$product_details.batch_code','sendMail','<div>','note','\x20</h2>','from_floorlevel','<table\x20style=\x22width:\x20100%\x20!important;\x22>','exports','expiry_date','Rack\x20B','</thead>','product','to_prod_qty','to_quantity','$product_details.bay','get','role','express','$product_details.secondary_code','4626477lFJIPC','$product_details.isle','transfer','product_details','40ILRzvW','$product_details.secondary_unit','unit','<hr\x20class=\x22my-3\x22>','$from_warehouse','errors','<tbody\x20style=\x22text-align:\x20center;\x22>','4EZHzMU','to_bin','French','7022810GCSOdt','Return\x20Rooms','findById','../middleware/auth','to_room_name','Shelves','save','1527606jFjFNU','$product_details.primary_code','batch_code','Rack\x20E','to_prod_level','/../public','Arabic\x20(ae)','91956VXMpri','Receiving\x20Area','from_storage','id_transaction_id','render','concat','../models/all_models','/upload/','forEach','max_per_unit','$product_details.floorlevel','from_bin','slice','/transfer/preview/','port','filter','floorlevel','secondary_unit','$product_details.bin','Hindi','email','$date','</td>','RoomAssigned','Rack\x20D','primary_unit','from_warehouse','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','staff','site_title','createTransport'];a0_0x37bd=function(){return _0x1fa142;};return a0_0x37bd();}