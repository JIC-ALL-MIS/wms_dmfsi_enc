var a0_0x5d9aec=a0_0x5c19;(function(_0x59429e,_0x3c0af9){var _0xdf2bf6=a0_0x5c19,_0x4e7bed=_0x59429e();while(!![]){try{var _0x151561=parseInt(_0xdf2bf6(0x193))/0x1*(-parseInt(_0xdf2bf6(0x110))/0x2)+-parseInt(_0xdf2bf6(0x100))/0x3*(-parseInt(_0xdf2bf6(0x131))/0x4)+-parseInt(_0xdf2bf6(0xeb))/0x5+-parseInt(_0xdf2bf6(0x148))/0x6+parseInt(_0xdf2bf6(0x17f))/0x7*(parseInt(_0xdf2bf6(0x10e))/0x8)+-parseInt(_0xdf2bf6(0x157))/0x9*(parseInt(_0xdf2bf6(0xd6))/0xa)+parseInt(_0xdf2bf6(0x1b5))/0xb;if(_0x151561===_0x3c0af9)break;else _0x4e7bed['push'](_0x4e7bed['shift']());}catch(_0x53e529){_0x4e7bed['push'](_0x4e7bed['shift']());}}}(a0_0x4026,0x5e36e));function a0_0x5c19(_0x351961,_0x3d9a6a){var _0x4026d3=a0_0x4026();return a0_0x5c19=function(_0x5c19e7,_0x2bbc92){_0x5c19e7=_0x5c19e7-0xc9;var _0x57b09d=_0x4026d3[_0x5c19e7];return _0x57b09d;},a0_0x5c19(_0x351961,_0x3d9a6a);}const express=require(a0_0x5d9aec(0x140)),app=express(),router=express[a0_0x5d9aec(0x19d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x5d9aec(0x175)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x5d9aec(0x145));function a0_0x4026(){var _0x5648f1=['findOne','To_invoice','$name','from_prod_level','from_prod_pallet','Floor','to_prod_pallet','TRF-','all','$product.from_room_name','expiry_date','Enabled','to_prod_qty','/upload/','220767EaWBHO','rack','floor','from_warehouse','max_per_unit','bin','body','ToRoomAssigned','master','batch_code','from_prod_isle','$product_details.product_code','Rack\x20D','back','24OLJTWt','primary_unit','3374SRyeCd','</head><body>','to_types','from_room_name','product','/preview/:id','$product_details.expiry_date','from_invoice','New_Qty_Converted','$product_details.bin','$product_details.rack','from_rack','prod_cat','<hr\x20class=\x22my-3\x22>','</tr>','then','length','MaxStocks_data2','add_transfer','from_bin','product_name','host','image','to_bay','note','push','render','An\x20error\x20occurred.','to_warehouse','German','$isAllowEdit','$product_details.primary_code','to_bin','20FpalqX','\x20Order\x20Number\x20:\x20','COLD\x20STORAGE','staff','True','from_floorlevel','Rack\x20F','$product_details.batch_code','from_bay','RoomAssigned','$product_details.product_name','split','<h5>','$to_warehouse','to_quantity','express','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','edit_transfer_view','</h5>','$product','nodemailer','site_title','type','2778756BTzcSz','to_prod_level','Hindi','flash','English','filter','createTransport','catch','Rack\x20E','secondary_code','toString','save','/transfer/preview/','findById','Rack\x20B','117xcCclw','from_prod_qty','date','product_stock','/view/:id','redirect','English\x20(US)','Level','Raw\x20Materials','$product_details.storage','log','<!DOCTYPE\x20html>','maxperunit','email','bay','<div>','/CheckingWarehouse','role','to_room_name','string','$room','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','aggregate','<tbody\x20style=\x22text-align:\x20center;\x22>','status','Transfer\x20Finalize\x20Successfully','$product_details.maxProducts','Rack\x20C','Error\x20Occurs','storage','../middleware/auth','random','logo','rak','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','errors','</div>','$product_details.isle','product_code3','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','1700671asIDZm','message','$product_details.secondary_unit','unit','production_date','from_storage','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','forEach','Chinese','to_prod_isle','password','get','Spanish','/transfer/view','Logo.png','$product_details._id','port','French','json','</table>','189EEUPhE','to_invoice','$product_details','RMSEmail','$product_details.type','Transfer\x20Edit\x20Successfully','error','Return\x20Rooms','primary_code','from_room','Router','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','floorlevel','from_types','product_code','_id','There\x27s\x20a\x20error\x20in\x20this\x20transaction','params','DRY\x20STORAGE','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<tr>','Arabic','warehouse','$finalize','</thead>','$_id','</td>','getMonth','Portuguese\x20(BR)','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.floorlevel','product_details','<span\x20style=\x22float:\x20right;\x22>','<strong>\x20Regards\x20</strong>','9738179ZdhhzZ','edit_transfer','slice','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Arabic\x20(ae)','from_quantity','getFullYear','$product_details.unit','$product_details.secondary_code','</tbody>','user','/view/add_transfer','map','secondary_unit','Enclosed','$product_details.maxPerUnit','464990DLnPeb','sendMail','$product_details.production_date','/barcode_scanner3','maxProducts','</body></html>','from_rak','prod_name','$product_details.product_stock','Shelves','exports','to_floorlevel','find','Receiving\x20Area','invoice','updateOne','success','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','<h2>\x20','finalize','transfer','1048675hHIyEd','$product_details.level','$product_details.bay','language','post','Portuguese','$product_details.pallet'];a0_0x4026=function(){return _0x5648f1;};return a0_0x4026();}router['get']('/view',auth,async(_0x44daf7,_0x3f2d5c)=>{var _0x6cfb80=a0_0x5d9aec;try{const {username:_0x84184e,email:_0x2134e0,role:_0x95d30b}=_0x44daf7['user'],_0x41c17c=_0x44daf7[_0x6cfb80(0xd0)],_0x402896=await profile[_0x6cfb80(0xf2)]({'email':_0x41c17c[_0x6cfb80(0x164)]}),_0x50dbe8=await master_shop[_0x6cfb80(0xe2)]();console[_0x6cfb80(0x161)](_0x6cfb80(0x108),_0x50dbe8);let _0x425252;if(_0x41c17c[_0x6cfb80(0x168)]=='staff'){const _0x5b3d97=await staff[_0x6cfb80(0xf2)]({'email':_0x41c17c['email']});_0x425252=await transfers['find']({'from_warehouse':_0x5b3d97[_0x6cfb80(0x1a9)]});}else _0x425252=await transfers[_0x6cfb80(0x16d)]([{'$unwind':_0x6cfb80(0x144)},{'$group':{'_id':_0x6cfb80(0x1ac),'invoice':{'$first':'$invoice'},'date':{'$first':'$date'},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x6cfb80(0x13e)},'from_room_name':{'$addToSet':_0x6cfb80(0xfb)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x6cfb80(0x1aa)},'isAllowEdit':{'$first':_0x6cfb80(0x12e)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0x15d)){var _0x5d27cd=users[_0x6cfb80(0x14c)];console[_0x6cfb80(0x161)](_0x5d27cd);}else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0x14a))var _0x5d27cd=users[_0x6cfb80(0x14a)];else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0x12d))var _0x5d27cd=users[_0x6cfb80(0x12d)];else{if(_0x50dbe8[0x0]['language']==_0x6cfb80(0x18b))var _0x5d27cd=users['Spanish'];else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0x190))var _0x5d27cd=users[_0x6cfb80(0x190)];else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]=='Portuguese\x20(BR)')var _0x5d27cd=users['Portuguese'];else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0x187))var _0x5d27cd=users[_0x6cfb80(0x187)];else{if(_0x50dbe8[0x0][_0x6cfb80(0xee)]==_0x6cfb80(0xca))var _0x5d27cd=users[_0x6cfb80(0x1a8)];}}}}}}}_0x3f2d5c[_0x6cfb80(0x12a)](_0x6cfb80(0xea),{'success':_0x44daf7['flash'](_0x6cfb80(0xe6)),'errors':_0x44daf7[_0x6cfb80(0x14b)](_0x6cfb80(0x17a)),'role':_0x41c17c,'profile':_0x402896,'master_shop':_0x50dbe8,'transfer':_0x425252,'language':_0x5d27cd});}catch(_0x4cb765){console[_0x6cfb80(0x161)](_0x4cb765);}});async function getRandom8DigitNumber(){var _0x44d2d8=a0_0x5d9aec;const _0x157188=0x989680,_0x5c47a0=0x5f5e0ff,_0x3f494b=Math[_0x44d2d8(0x102)](Math[_0x44d2d8(0x176)]()*(_0x5c47a0-_0x157188+0x1))+_0x157188;var _0x2050eb;const _0x2c4659=await transfers['findOne']({'invoice':'TRF-'+_0x3f494b});return _0x2c4659&&_0x2c4659[_0x44d2d8(0x120)]>0x0?_0x2050eb=_0x44d2d8(0xf9)+_0x3f494b:_0x2050eb='TRF-'+_0x3f494b,_0x2050eb;}router[a0_0x5d9aec(0x18a)](a0_0x5d9aec(0xd1),auth,async(_0x2ea810,_0xbac87b)=>{var _0x322468=a0_0x5d9aec;try{const {username:_0x5cfa22,email:_0x2da99c,role:_0x2116a2}=_0x2ea810[_0x322468(0xd0)],_0x243df0=_0x2ea810[_0x322468(0xd0)],_0xa334bb=await profile[_0x322468(0xf2)]({'email':_0x243df0[_0x322468(0x164)]}),_0x390ddd=await master_shop[_0x322468(0xe2)]();console[_0x322468(0x161)](_0x322468(0x108),_0x390ddd);let _0x1503b9;if(_0x243df0['role']==_0x322468(0x134)){const _0x56a0af=await staff[_0x322468(0xf2)]({'email':_0x243df0['email']});_0x1503b9=await warehouse[_0x322468(0x16d)]([{'$match':{'status':_0x322468(0xfd),'name':_0x56a0af[_0x322468(0x1a9)],'warehouse_category':_0x322468(0x15f)}},{'$group':{'_id':_0x322468(0xf4),'name':{'$first':_0x322468(0xf4)}}}]);}else _0x1503b9=await warehouse['aggregate']([{'$match':{'status':_0x322468(0xfd),'warehouse_category':_0x322468(0x15f)}},{'$group':{'_id':'$name','name':{'$first':_0x322468(0xf4)}}}]);var _0x252d91=['Ambient',_0x322468(0xd4),_0x322468(0x19a)];const _0x42c54a=await transfers[_0x322468(0xe2)]({}),_0x5d2d15=_0x42c54a[_0x322468(0x120)]+0x1,_0x3ef4f4=_0x322468(0xf9)+_0x5d2d15[_0x322468(0x152)]()['padStart'](0x5,'0');if(_0x390ddd[0x0][_0x322468(0xee)]==_0x322468(0x15d)){var _0x46a887=users['English'];console['log'](_0x46a887);}else{if(_0x390ddd[0x0][_0x322468(0xee)]==_0x322468(0x14a))var _0x46a887=users[_0x322468(0x14a)];else{if(_0x390ddd[0x0]['language']==_0x322468(0x12d))var _0x46a887=users[_0x322468(0x12d)];else{if(_0x390ddd[0x0][_0x322468(0xee)]==_0x322468(0x18b))var _0x46a887=users[_0x322468(0x18b)];else{if(_0x390ddd[0x0][_0x322468(0xee)]==_0x322468(0x190))var _0x46a887=users[_0x322468(0x190)];else{if(_0x390ddd[0x0][_0x322468(0xee)]=='Portuguese\x20(BR)')var _0x46a887=users['Portuguese'];else{if(_0x390ddd[0x0]['language']=='Chinese')var _0x46a887=users[_0x322468(0x187)];else{if(_0x390ddd[0x0][_0x322468(0xee)]==_0x322468(0xca))var _0x46a887=users[_0x322468(0x1a8)];}}}}}}}const _0x59e183=getRandom8DigitNumber();_0x59e183[_0x322468(0x11f)](_0x19f5ee=>{var _0x5c182f=_0x322468;_0xbac87b[_0x5c182f(0x12a)](_0x5c182f(0x122),{'success':_0x2ea810[_0x5c182f(0x14b)](_0x5c182f(0xe6)),'errors':_0x2ea810[_0x5c182f(0x14b)](_0x5c182f(0x17a)),'role':_0x243df0,'profile':_0xa334bb,'master_shop':_0x390ddd,'warehouse':_0x1503b9,'language':_0x46a887,'rooms_data':_0x252d91,'invoice':_0x19f5ee});})['catch'](_0x3b05a0=>{var _0x3180a2=_0x322468;_0x2ea810[_0x3180a2(0x14b)](_0x3180a2(0x17a),_0x3180a2(0x1a3)),_0xbac87b['redirect'](_0x3180a2(0x18c));});}catch(_0x4aeb76){console[_0x322468(0x161)](_0x4aeb76);}}),router[a0_0x5d9aec(0xef)](a0_0x5d9aec(0xd1),auth,async(_0x35e358,_0x39efa9)=>{var _0x437df8=a0_0x5d9aec;try{console[_0x437df8(0x161)](_0x35e358[_0x437df8(0x106)]);const {date:_0x3d426b,from_warehouse:_0x2b94c6,FromRoom_name:_0x4622a4,to_warehouse:_0x3bab98,ToRoom_name:_0x44039a,prod_name:_0x553f8c,from_prod_qty:_0x1a3a77,from_prod_level:_0x212ed3,from_prod_isle:_0x4432d4,from_prod_pallet:_0x37f3f9,to_prod_qty:_0x26e4a1,to_prod_level:_0x4fc6b9,to_prod_isle:_0x15f645,to_prod_pallet:_0x4fb5ec,primary_code:_0x3bd92b,secondary_code:_0x5f40fb,product_code3:_0x2dab57,note:_0x436ba2,MaxStocks_data2:_0x78a47,invoice:_0x5e4228,expiry_date:_0x1cf767}=_0x35e358['body'];if(typeof _0x553f8c==_0x437df8(0x16a))var _0x6ee3d1=[_0x35e358[_0x437df8(0x106)]['prod_name']],_0x4d869a=[_0x35e358['body']['from_prod_qty']],_0x88896=[_0x35e358[_0x437df8(0x106)][_0x437df8(0xf5)]],_0x22754b=[_0x35e358['body']['New_Qty_Converted']],_0x2dad28=[_0x35e358['body'][_0x437df8(0x149)]],_0x4c2ddf=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x19b)]],_0x571324=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x151)]],_0x132af8=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x17d)]],_0x212c70=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x121)]],_0xe33f8a=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x10f)]],_0x594b62=[_0x35e358[_0x437df8(0x106)][_0x437df8(0xd3)]],_0x1fda24=[_0x35e358[_0x437df8(0x106)]['batch_code']],_0x43f9f2=[_0x35e358[_0x437df8(0x106)][_0x437df8(0xfc)]],_0x4fba99=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x104)]],_0x31fb3a=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x183)]],_0x39256c=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x11c)]],_0x106f59=[_0x35e358['body'][_0x437df8(0x13a)]],_0x2e219f=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x107)]],_0x1dc8ad=[_0x35e358[_0x437df8(0x106)]['from_invoice']],_0x62b1ad=[_0x35e358[_0x437df8(0x106)][_0x437df8(0x194)]];else var _0x6ee3d1=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0xdd)]],_0x4d869a=[..._0x35e358[_0x437df8(0x106)]['from_prod_qty']],_0x88896=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0xf5)]],_0x22754b=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x118)]],_0x2dad28=[..._0x35e358['body'][_0x437df8(0x149)]],_0x4c2ddf=[..._0x35e358[_0x437df8(0x106)]['primary_code']],_0x571324=[..._0x35e358['body'][_0x437df8(0x151)]],_0x132af8=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x17d)]],_0x212c70=[..._0x35e358['body'][_0x437df8(0x121)]],_0xe33f8a=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x10f)]],_0x594b62=[..._0x35e358['body']['secondary_unit']],_0x1fda24=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x109)]],_0x43f9f2=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0xfc)]],_0x4fba99=[..._0x35e358['body'][_0x437df8(0x104)]],_0x31fb3a=[..._0x35e358['body'][_0x437df8(0x183)]],_0x39256c=[..._0x35e358['body'][_0x437df8(0x11c)]],_0x106f59=[..._0x35e358['body'][_0x437df8(0x13a)]],_0x2e219f=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x107)]],_0x1dc8ad=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x117)]],_0x62b1ad=[..._0x35e358[_0x437df8(0x106)][_0x437df8(0x194)]];const _0x412235=_0x6ee3d1['map'](_0x1bc86d=>{return _0x1bc86d={'product_name':_0x1bc86d};});_0x4d869a[_0x437df8(0x186)]((_0x296595,_0x47bbfe)=>{var _0x287ffd=_0x437df8;_0x412235[_0x47bbfe][_0x287ffd(0xcb)]=_0x296595;}),_0x1dc8ad[_0x437df8(0x186)]((_0x3e51dd,_0x2bf3b0)=>{_0x412235[_0x2bf3b0]['from_invoice']=_0x3e51dd;}),_0x62b1ad[_0x437df8(0x186)]((_0x56a08f,_0x228411)=>{var _0x3fd72f=_0x437df8;_0x412235[_0x228411][_0x3fd72f(0xf3)]=_0x56a08f;}),_0x88896[_0x437df8(0x186)]((_0x182957,_0x5d68a9)=>{var _0x384116=_0x437df8;_0x106f59[_0x384116(0x186)]((_0x357c82,_0x5607c4)=>{var _0x57c84f=_0x384116;if(_0x357c82==_0x57c84f(0xe3)&&_0x5d68a9==_0x5607c4){var _0x1d0f6f=_0x182957[_0x57c84f(0x1b7)](0x3);_0x412235[_0x5d68a9]['from_storage']=_0x182957[0x0],_0x412235[_0x5d68a9][_0x57c84f(0x11b)]=_0x182957[0x1],_0x412235[_0x5d68a9][_0x57c84f(0x139)]=0x0,_0x412235[_0x5d68a9][_0x57c84f(0x123)]=0x0,_0x412235[_0x5d68a9][_0x57c84f(0x1a0)]='Floor',_0x412235[_0x5d68a9]['from_floorlevel']=_0x1d0f6f;}else{if(_0x357c82==_0x57c84f(0xdf)&&_0x5d68a9==_0x5607c4){var _0x1d0f6f=_0x182957[_0x57c84f(0x1b7)](0x3);_0x412235[_0x5d68a9][_0x57c84f(0x184)]=_0x182957[0x0],_0x412235[_0x5d68a9][_0x57c84f(0x11b)]=_0x182957[0x1],_0x412235[_0x5d68a9]['from_bay']=0x0,_0x412235[_0x5d68a9]['from_bin']=0x0,_0x412235[_0x5d68a9][_0x57c84f(0x1a0)]=_0x57c84f(0xf7),_0x412235[_0x5d68a9][_0x57c84f(0x136)]=_0x182957[0x5];}else{if(_0x5d68a9==_0x5607c4){var _0x27e0ff;if(_0x182957[0x4]=='L')_0x27e0ff=_0x57c84f(0x15e);else _0x182957[0x4]=='F'&&(_0x27e0ff='Floor');_0x412235[_0x5d68a9][_0x57c84f(0x184)]=_0x182957[0x0],_0x412235[_0x5d68a9][_0x57c84f(0x11b)]=_0x182957[0x1],_0x412235[_0x5d68a9]['from_bay']=_0x182957[0x2],_0x412235[_0x5d68a9][_0x57c84f(0x123)]=_0x182957[0x3],_0x412235[_0x5d68a9][_0x57c84f(0x1a0)]=_0x27e0ff,_0x412235[_0x5d68a9][_0x57c84f(0x136)]=_0x182957[0x5];}}}});}),_0x22754b['forEach']((_0x38e2f6,_0x3d86c1)=>{var _0x5a6765=_0x437df8;_0x412235[_0x3d86c1][_0x5a6765(0x13f)]=_0x38e2f6;}),_0x2dad28[_0x437df8(0x186)]((_0x565ae0,_0x5c2802)=>{var _0x42defe=_0x437df8;_0x2e219f[_0x42defe(0x186)]((_0x4552bd,_0x3980ef)=>{var _0x485802=_0x42defe;if(_0x4552bd=='Receiving\x20Area'&&_0x5c2802==_0x3980ef){var _0x5064ed=_0x565ae0[_0x485802(0x1b7)](0x3);_0x412235[_0x5c2802][_0x485802(0x174)]=_0x565ae0[0x0],_0x412235[_0x5c2802][_0x485802(0x101)]=_0x565ae0[0x1],_0x412235[_0x5c2802][_0x485802(0x127)]=0x0,_0x412235[_0x5c2802][_0x485802(0x130)]=0x0,_0x412235[_0x5c2802][_0x485802(0x112)]=_0x485802(0xf7),_0x412235[_0x5c2802][_0x485802(0xe1)]=_0x5064ed;}else{if(_0x4552bd==_0x485802(0xdf)&&_0x5c2802==_0x3980ef){var _0x5064ed=_0x565ae0[_0x485802(0x1b7)](0x3);_0x412235[_0x5c2802][_0x485802(0x174)]=_0x565ae0[0x0],_0x412235[_0x5c2802][_0x485802(0x101)]=_0x565ae0[0x1],_0x412235[_0x5c2802]['to_bay']=0x0,_0x412235[_0x5c2802]['to_bin']=0x0,_0x412235[_0x5c2802]['to_types']=_0x485802(0xf7),_0x412235[_0x5c2802][_0x485802(0xe1)]=_0x565ae0[0x5];}else{if(_0x5c2802==_0x3980ef){var _0x577b75;if(_0x565ae0[0x4]=='L')_0x577b75='Level';else _0x565ae0[0x4]=='F'&&(_0x577b75=_0x485802(0xf7));_0x412235[_0x5c2802][_0x485802(0x174)]=_0x565ae0[0x0],_0x412235[_0x5c2802][_0x485802(0x101)]=_0x565ae0[0x1],_0x412235[_0x5c2802][_0x485802(0x127)]=_0x565ae0[0x2],_0x412235[_0x5c2802][_0x485802(0x130)]=_0x565ae0[0x3],_0x412235[_0x5c2802]['to_types']=_0x577b75,_0x412235[_0x5c2802][_0x485802(0xe1)]=_0x565ae0[0x5];}}}});}),_0x4c2ddf[_0x437df8(0x186)]((_0x423c45,_0x2966cb)=>{var _0x4c4a5e=_0x437df8;_0x412235[_0x2966cb][_0x4c4a5e(0x19b)]=_0x423c45;}),_0x571324[_0x437df8(0x186)]((_0x437da4,_0x1ec062)=>{_0x412235[_0x1ec062]['secondary_code']=_0x437da4;}),_0x132af8[_0x437df8(0x186)]((_0x1648c3,_0x3a3049)=>{var _0x45644e=_0x437df8;_0x412235[_0x3a3049][_0x45644e(0x1a1)]=_0x1648c3;}),_0x212c70[_0x437df8(0x186)]((_0x127cec,_0x3e8f93)=>{var _0x26a87a=_0x437df8;_0x412235[_0x3e8f93][_0x26a87a(0xda)]=_0x127cec;}),_0xe33f8a['forEach']((_0x68e775,_0x288cd1)=>{_0x412235[_0x288cd1]['unit']=_0x68e775;}),_0x594b62['forEach']((_0x12d11f,_0x433020)=>{var _0x39369f=_0x437df8;_0x412235[_0x433020][_0x39369f(0xd3)]=_0x12d11f;}),_0x1fda24[_0x437df8(0x186)]((_0x5d1170,_0x1ea9ec)=>{var _0x55b301=_0x437df8;_0x412235[_0x1ea9ec][_0x55b301(0x109)]=_0x5d1170;}),_0x43f9f2[_0x437df8(0x186)]((_0x428a6d,_0x4594d3)=>{_0x412235[_0x4594d3]['expiry_date']=_0x428a6d;}),_0x4fba99[_0x437df8(0x186)]((_0x4ad1e3,_0x192fc2)=>{var _0xa00ab1=_0x437df8;_0x412235[_0x192fc2][_0xa00ab1(0x163)]=_0x4ad1e3;}),_0x31fb3a[_0x437df8(0x186)]((_0x2aa32c,_0x27427d)=>{var _0x462761=_0x437df8;_0x412235[_0x27427d][_0x462761(0x183)]=_0x2aa32c;}),_0x39256c[_0x437df8(0x186)]((_0x5f3c2f,_0xd4be67)=>{var _0x43c829=_0x437df8;_0x412235[_0xd4be67][_0x43c829(0x11c)]=_0x5f3c2f;}),_0x106f59[_0x437df8(0x186)]((_0x864a97,_0x5e6f72)=>{var _0x34eef8=_0x437df8;_0x412235[_0x5e6f72][_0x34eef8(0x113)]=_0x864a97;}),_0x2e219f['forEach']((_0x1df665,_0x43b481)=>{var _0x1fd2b4=_0x437df8;_0x412235[_0x43b481][_0x1fd2b4(0x169)]=_0x1df665;});const _0x866fc5=_0x412235[_0x437df8(0x14d)](_0x195c42=>_0x195c42[_0x437df8(0x13f)]!=='0'&&_0x195c42[_0x437df8(0x13f)]!==''||_0x195c42[_0x437df8(0xe1)]!=='0'&&_0x195c42[_0x437df8(0xe1)]!==''),_0x4b979e=new transfers({'date':_0x3d426b,'from_warehouse':_0x2b94c6,'to_warehouse':_0x3bab98,'product':_0x866fc5,'note':_0x436ba2,'invoice':_0x5e4228}),_0xed6955=await _0x4b979e['save']();_0x35e358[_0x437df8(0x14b)](_0x437df8(0xe6),'Product\x20Transfer\x20successfully'),_0x39efa9['redirect'](_0x437df8(0x154)+_0xed6955['_id']);}catch(_0x5f2a4){console['log'](_0x5f2a4),_0x39efa9[_0x437df8(0x16f)](0xc8)['json']({'errorMessage':_0x5f2a4['message']});}}),router[a0_0x5d9aec(0x18a)](a0_0x5d9aec(0x115),auth,async(_0x427e98,_0x383b5d)=>{var _0x18e6e8=a0_0x5d9aec;try{const {username:_0x37794d,email:_0x3a8068,role:_0x56b4c3}=_0x427e98['user'],_0x36f283=_0x427e98[_0x18e6e8(0xd0)],_0x57fc3b=await profile['findOne']({'email':_0x36f283[_0x18e6e8(0x164)]}),_0x25697a=await master_shop[_0x18e6e8(0xe2)]();console[_0x18e6e8(0x161)](_0x18e6e8(0x108),_0x25697a);const _0x186934=await transfers[_0x18e6e8(0x155)](_0x427e98[_0x18e6e8(0x1a4)]['id']);let _0x1764e2=new Date(_0x186934[_0x18e6e8(0xfc)]),_0x3111fa=('0'+_0x1764e2['getDate']())[_0x18e6e8(0x1b7)](-0x2),_0x4cf03f=('0'+(_0x1764e2[_0x18e6e8(0x1ae)]()+0x1))['slice'](-0x2),_0x440b5b=_0x1764e2[_0x18e6e8(0xcc)](),_0x192fea=_0x440b5b+'-'+_0x4cf03f+'-'+_0x3111fa,_0x5ea2a7;if(_0x36f283[_0x18e6e8(0x168)]=='staff'){const _0x220d7c=await staff[_0x18e6e8(0xf2)]({'email':_0x36f283['email']});_0x5ea2a7=await warehouse[_0x18e6e8(0xe2)]({'status':_0x18e6e8(0xfd),'name':_0x220d7c['warehouse'],'warehouse_category':_0x18e6e8(0x15f)});}else _0x5ea2a7=await warehouse[_0x18e6e8(0xe2)]({'status':_0x18e6e8(0xfd),'warehouse_category':'Raw\x20Materials'});const _0x4716da=await warehouse[_0x18e6e8(0x16d)]([{'$match':{'name':_0x186934[_0x18e6e8(0x103)]}},{'$unwind':_0x18e6e8(0x195)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x18e6e8(0x13b)},'product_stock':{'$first':_0x18e6e8(0xde)},'bay':{'$first':_0x18e6e8(0xed)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x18e6e8(0x197)},'floorlevel':{'$first':_0x18e6e8(0x1b1)},'primary_code':{'$first':_0x18e6e8(0x12f)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x18e6e8(0x10b)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x18e6e8(0x11a)},'expiry_date':{'$first':_0x18e6e8(0x116)},'production_date':{'$first':_0x18e6e8(0xd8)},'room':{'$first':_0x18e6e8(0x16b)}}}]);if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x15d)){var _0x4ca89=users['English'];console['log'](_0x4ca89);}else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x14a))var _0x4ca89=users['Hindi'];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x12d))var _0x4ca89=users[_0x18e6e8(0x12d)];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x18b))var _0x4ca89=users['Spanish'];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x190))var _0x4ca89=users[_0x18e6e8(0x190)];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x1af))var _0x4ca89=users['Portuguese'];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0x187))var _0x4ca89=users['Chinese'];else{if(_0x25697a[0x0][_0x18e6e8(0xee)]==_0x18e6e8(0xca))var _0x4ca89=users[_0x18e6e8(0x1a8)];}}}}}}}_0x383b5d[_0x18e6e8(0x12a)](_0x18e6e8(0x142),{'success':_0x427e98[_0x18e6e8(0x14b)](_0x18e6e8(0xe6)),'errors':_0x427e98['flash'](_0x18e6e8(0x17a)),'role':_0x36f283,'profile':_0x57fc3b,'master_shop':_0x25697a,'warehouse':_0x5ea2a7,'transfer':_0x186934,'stock':_0x4716da,'language':_0x4ca89});}catch(_0x33c5c7){console[_0x18e6e8(0x161)](_0x33c5c7);}}),router[a0_0x5d9aec(0xef)](a0_0x5d9aec(0x115),auth,async(_0x5eebad,_0x543f92)=>{var _0x51c260=a0_0x5d9aec;try{const _0x280891=_0x5eebad[_0x51c260(0x1a4)]['id'],{from_warehouse:_0x257f81,FromRoom_name:_0x115304,to_warehouse:_0x1337e9,ToRoom_name:_0x4d3920}=_0x5eebad[_0x51c260(0x106)],_0x5ce51a=await transfers[_0x51c260(0x155)]({'_id':_0x280891}),_0x1779bc=_0x5ce51a[_0x51c260(0x114)][_0x51c260(0xd2)](async _0x52a0e6=>{var _0x44299d=_0x51c260;if(_0x52a0e6['to_quantity']>0x0){var _0xca302e=await warehouse[_0x44299d(0xf2)]({'name':_0x5ce51a[_0x44299d(0x103)],'room':_0x52a0e6[_0x44299d(0x113)],'warehouse_category':_0x44299d(0x15f)});const _0x45a6f5=_0xca302e[_0x44299d(0x1b2)][_0x44299d(0xd2)](_0x58047c=>{var _0xdb8193=_0x44299d;_0x58047c[_0xdb8193(0x124)]==_0x52a0e6[_0xdb8193(0x124)]&&_0x58047c[_0xdb8193(0x19f)]==_0x52a0e6[_0xdb8193(0x136)]&&_0x58047c[_0xdb8193(0x147)]==_0x52a0e6[_0xdb8193(0x1a0)]&&_0x58047c[_0xdb8193(0x105)]==_0x52a0e6[_0xdb8193(0x123)]&&_0x58047c[_0xdb8193(0x165)]==_0x52a0e6['from_bay']&&_0x58047c[_0xdb8193(0x101)]==_0x52a0e6[_0xdb8193(0x11b)]&&_0x58047c[_0xdb8193(0x174)]==_0x52a0e6[_0xdb8193(0x184)]&&_0x58047c[_0xdb8193(0xfc)]==_0x52a0e6['expiry_date']&&_0x58047c[_0xdb8193(0x109)]==_0x52a0e6[_0xdb8193(0x109)]&&_0x58047c[_0xdb8193(0x183)]==_0x52a0e6['production_date']&&_0x58047c[_0xdb8193(0xe4)]==_0x52a0e6[_0xdb8193(0x117)]&&(_0x58047c['product_stock']=_0x58047c['product_stock']-_0x52a0e6[_0xdb8193(0x13f)]);});}return _0xca302e;});Promise[_0x51c260(0xfa)](_0x1779bc)[_0x51c260(0x11f)](async _0x246fea=>{var _0xee0a95=_0x51c260;try{for(const _0x28d521 of _0x246fea){await _0x28d521[_0xee0a95(0x153)]();}try{const _0x34d771=_0x5ce51a[_0xee0a95(0x114)][_0xee0a95(0xd2)](async _0x51aee2=>{var _0x323e81=_0xee0a95;if(_0x51aee2[_0x323e81(0x13f)]>0x0){var _0x198930=await warehouse[_0x323e81(0xf2)]({'name':_0x5ce51a[_0x323e81(0x12c)],'room':_0x51aee2[_0x323e81(0x169)],'warehouse_category':_0x323e81(0x15f)}),_0x2311a2=0x0;const _0x45cf63=_0x198930[_0x323e81(0x1b2)][_0x323e81(0xd2)](_0x43961c=>{var _0x9d5acf=_0x323e81;_0x43961c[_0x9d5acf(0x124)]==_0x51aee2['product_name']&&_0x43961c['floorlevel']==_0x51aee2[_0x9d5acf(0xe1)]&&_0x43961c[_0x9d5acf(0x147)]==_0x51aee2[_0x9d5acf(0x112)]&&_0x43961c[_0x9d5acf(0x105)]==_0x51aee2[_0x9d5acf(0x130)]&&_0x43961c[_0x9d5acf(0x165)]==_0x51aee2[_0x9d5acf(0x127)]&&_0x43961c[_0x9d5acf(0x101)]==_0x51aee2['rack']&&_0x43961c['storage']==_0x51aee2[_0x9d5acf(0x174)]&&_0x43961c['expiry_date']==_0x51aee2[_0x9d5acf(0xfc)]&&_0x43961c['batch_code']==_0x51aee2[_0x9d5acf(0x109)]&&_0x43961c[_0x9d5acf(0x183)]==_0x51aee2[_0x9d5acf(0x183)]&&_0x43961c[_0x9d5acf(0xe4)]==_0x51aee2[_0x9d5acf(0xf3)]&&(_0x43961c[_0x9d5acf(0x15a)]=_0x43961c[_0x9d5acf(0x15a)]+_0x51aee2[_0x9d5acf(0x13f)],_0x2311a2++);});_0x2311a2=='0'&&(_0x198930['product_details']=_0x198930[_0x323e81(0x1b2)]['concat']({'product_name':_0x51aee2['product_name'],'product_stock':_0x51aee2['to_quantity'],'bay':_0x51aee2[_0x323e81(0x127)],'bin':_0x51aee2['to_bin'],'type':_0x51aee2[_0x323e81(0x112)],'floorlevel':_0x51aee2[_0x323e81(0xe1)],'storage':_0x51aee2['storage'],'rack':_0x51aee2[_0x323e81(0x101)],'product_code':_0x51aee2[_0x323e81(0x1a1)],'primary_code':_0x51aee2[_0x323e81(0x19b)],'secondary_code':_0x51aee2['secondary_code'],'maxProducts':_0x51aee2[_0x323e81(0xda)],'storage':_0x51aee2[_0x323e81(0x174)],'rack':_0x51aee2[_0x323e81(0x101)],'expiry_date':_0x51aee2[_0x323e81(0xfc)],'maxPerUnit':_0x51aee2['maxperunit'],'batch_code':_0x51aee2['batch_code'],'production_date':_0x51aee2[_0x323e81(0x183)]}));}return _0x198930;});Promise[_0xee0a95(0xfa)](_0x34d771)[_0xee0a95(0x11f)](async _0x194442=>{var _0x56f5af=_0xee0a95;try{for(const _0x5c703b of _0x194442){await warehouse[_0x56f5af(0xe5)]({'_id':_0x5c703b[_0x56f5af(0x1a2)]},{'$addToSet':{'product_details':{'$each':_0x5c703b[_0x56f5af(0x1b2)]}}});}_0x5ce51a[_0x56f5af(0xe9)]=_0x56f5af(0x135);const _0x38d889=await _0x5ce51a[_0x56f5af(0x153)](),_0x407482=await master_shop['find'](),_0x21fd73=await email_settings['findOne'](),_0x48b3da=await supervisor_settings[_0x56f5af(0xe2)]();var _0x346d45=_0x5ce51a['product'],_0x210ee1='',_0x56128b;for(_0x56128b in _0x346d45){_0x210ee1+=_0x56f5af(0x1a7)+_0x56f5af(0x1a6)+_0x346d45[_0x56128b][_0x56f5af(0x124)]+'</td>'+_0x56f5af(0x1a6)+_0x346d45[_0x56128b][_0x56f5af(0x1a1)]+_0x56f5af(0x1ad)+_0x56f5af(0x1a6)+_0x346d45[_0x56128b][_0x56f5af(0x13f)]+'</td>'+_0x56f5af(0x1a6)+_0x346d45[_0x56128b][_0x56f5af(0x182)]+_0x56f5af(0x1ad)+_0x56f5af(0x1a6)+_0x346d45[_0x56128b][_0x56f5af(0xd3)]+_0x56f5af(0x1ad)+_0x56f5af(0x1a6)+_0x5ce51a[_0x56f5af(0x12c)]+_0x56f5af(0x1ad)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x346d45[_0x56128b][_0x56f5af(0x169)]+_0x56f5af(0x1ad)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x346d45[_0x56128b]['storage']+_0x346d45[_0x56128b][_0x56f5af(0x101)]+_0x346d45[_0x56128b][_0x56f5af(0x127)]+_0x346d45[_0x56128b]['to_bin']+_0x346d45[_0x56128b][_0x56f5af(0x112)][0x0]+_0x346d45[_0x56128b][_0x56f5af(0xe1)]+'</td>',_0x56f5af(0x11e);}let _0x5ee93a=nodemailer[_0x56f5af(0x14e)]({'host':_0x21fd73[_0x56f5af(0x125)],'port':Number(_0x21fd73[_0x56f5af(0x18f)]),'secure':![],'auth':{'user':_0x21fd73[_0x56f5af(0x164)],'pass':_0x21fd73[_0x56f5af(0x189)]}}),_0x5ef47d={'from':_0x21fd73[_0x56f5af(0x164)],'to':_0x48b3da[0x0][_0x56f5af(0x196)],'subject':'Transfer\x20Mail','attachments':[{'filename':_0x56f5af(0x18d),'path':__dirname+'/../public'+_0x56f5af(0xff)+_0x407482[0x0][_0x56f5af(0x126)],'cid':_0x56f5af(0x177)}],'html':_0x56f5af(0x162)+'<html><head><title></title>'+_0x56f5af(0x111)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x56f5af(0x166)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x56f5af(0x17b)+_0x56f5af(0x166)+_0x56f5af(0xe8)+_0x407482[0x0][_0x56f5af(0x146)]+'\x20</h2>'+_0x56f5af(0x17b)+'</div>'+_0x56f5af(0x11d)+_0x56f5af(0x166)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x56f5af(0x132)+_0x5ce51a[_0x56f5af(0xe4)]+'\x20'+_0x56f5af(0x1b3)+'\x20Order\x20Date\x20:\x20'+_0x5ce51a[_0x56f5af(0x159)]+'\x20'+'</span>'+_0x56f5af(0x143)+_0x56f5af(0x17b)+_0x56f5af(0xc9)+_0x56f5af(0x179)+_0x56f5af(0x1a7)+_0x56f5af(0x185)+_0x56f5af(0x141)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x56f5af(0x19e)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x56f5af(0x16c)+_0x56f5af(0x17e)+_0x56f5af(0xe7)+_0x56f5af(0x11e)+_0x56f5af(0x1ab)+_0x56f5af(0x16e)+'\x20'+_0x210ee1+'\x20'+_0x56f5af(0xcf)+_0x56f5af(0x192)+_0x56f5af(0x166)+_0x56f5af(0x1b4)+_0x56f5af(0x13d)+_0x407482[0x0][_0x56f5af(0x146)]+'</h5>'+_0x56f5af(0x17b)+_0x56f5af(0x17b)+_0x56f5af(0xdb)};_0x5ee93a[_0x56f5af(0xd7)](_0x5ef47d,function(_0x568294,_0xa4d234){var _0x2191a7=_0x56f5af;_0x568294?(console[_0x2191a7(0x161)](_0x568294),console[_0x2191a7(0x161)](_0x2191a7(0x173))):console['log']('Email\x20sent\x20successfully');}),_0x5eebad[_0x56f5af(0x14b)](_0x56f5af(0xe6),_0x56f5af(0x170)),_0x543f92[_0x56f5af(0x15c)]('/picking_list/PDF_transfer_rm/'+_0x38d889[_0x56f5af(0x1a2)]);}catch(_0x59a5fc){console[_0x56f5af(0x199)](_0x59a5fc),_0x543f92[_0x56f5af(0x16f)](0x1f4)[_0x56f5af(0x191)]({'Perror':_0x56f5af(0x1b0),'message':_0x59a5fc[_0x56f5af(0x180)]});}})[_0xee0a95(0x14f)](_0x3ed59c=>{var _0x5c9a0f=_0xee0a95;console[_0x5c9a0f(0x199)](_0x3ed59c),_0x543f92['status'](0x1f4)['json']({'Perror':_0x5c9a0f(0x12b)});});}catch(_0x13f8f3){_0x543f92[_0xee0a95(0x191)](_0x13f8f3);}}catch(_0xfbf989){console[_0xee0a95(0x199)](_0xfbf989),_0x543f92[_0xee0a95(0x16f)](0x1f4)[_0xee0a95(0x191)]({'Merror':_0xee0a95(0x1b0),'Message':_0xfbf989[_0xee0a95(0x180)]});}})[_0x51c260(0x14f)](_0x468c9e=>{var _0x3950b3=_0x51c260;console[_0x3950b3(0x199)](_0x468c9e),_0x543f92['status'](0x1f4)[_0x3950b3(0x191)]({'Merror':_0x3950b3(0x12b)});});}catch(_0x2c1e92){console[_0x51c260(0x161)](_0x2c1e92);}});function BayBinSelected(_0x193e16,_0x3dca0f){var _0x155d17=a0_0x5d9aec,_0x18494c=[],_0x3d4a81=[],_0x3d21c0=[],_0x13c37a=[],_0x38cae5=[],_0xfe88c3=[];let _0x527475=[];if(_0x193e16==_0x155d17(0x1a5))switch(_0x3dca0f){case'Rack\x20A':_0x18494c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x3d4a81=[0x1,0x2],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),'Floor'],_0x38cae5=['D'],_0xfe88c3=['A'];break;case'Rack\x20B':_0x18494c=[0x6,0x5,0x4,0x3,0x2,0x1],_0x3d4a81=[0x1,0x2],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),'Floor'],_0x38cae5=['D'],_0xfe88c3=['B'];break;case _0x155d17(0xdf):_0x18494c=[0x0],_0x3d4a81=[0x0],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0xf7)],_0x38cae5=['D'],_0xfe88c3=['S'];break;case _0x155d17(0xe3):_0x18494c=[0x0],_0x3d4a81=[0x0],_0x13c37a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x3d21c0=['Floor'],_0x38cae5=['D'],_0xfe88c3=['R'];break;}else{if(_0x193e16==_0x155d17(0x133))switch(_0x3dca0f){case'Rack\x20A':_0x18494c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x3d4a81=['B','F'],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),_0x155d17(0xf7)],_0x38cae5=['C'],_0xfe88c3=['A'];break;case _0x155d17(0x156):_0x18494c=[0x5,0x4,0x3,0x2,0x1],_0x3d4a81=['F','B','S'],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),_0x155d17(0xf7)],_0x38cae5=['C'],_0xfe88c3=['B'];break;case _0x155d17(0x172):_0x18494c=[0x1,0x2,0x3,0x4,0x5],_0x3d4a81=['B','F','S'],_0x13c37a=[0x5,0x4,0x3,0x2,0x1],_0x3d21c0=[_0x155d17(0x15e),'Floor'],_0x38cae5=['C'],_0xfe88c3=['C'];break;case _0x155d17(0x10c):_0x18494c=[0x5,0x4,0x3,0x2,0x1],_0x3d4a81=['F','B','S'],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),_0x155d17(0xf7)],_0x38cae5=['C'],_0xfe88c3=['D'];break;case _0x155d17(0x150):_0x18494c=[0x4,0x3,0x2,0x1],_0x3d4a81=[0x1,0x2],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=[_0x155d17(0x15e),_0x155d17(0xf7)],_0x38cae5=['C'],_0xfe88c3=['E'];break;case _0x155d17(0x137):_0x18494c=[0x1,0x2,0x3],_0x3d4a81=[0x1,0x2],_0x13c37a=[0x1,0x2,0x3,0x4,0x5],_0x3d21c0=['Level'],_0x38cae5=['C'],_0xfe88c3=['F'];break;}}return{'levels':_0x18494c,'Isle':_0x3d4a81,'rack':_0x13c37a,'type':_0x3d21c0,'storage':_0x38cae5,'rak':_0xfe88c3};}router['get'](a0_0x5d9aec(0x15b),auth,async(_0x5bae60,_0x2b5c0c)=>{var _0x3c8834=a0_0x5d9aec;try{const {username:_0x1ce293,email:_0x2cb653,role:_0x3bcea6}=_0x5bae60[_0x3c8834(0xd0)],_0x1f108a=_0x5bae60[_0x3c8834(0xd0)],_0x3d6554=await profile[_0x3c8834(0xf2)]({'email':_0x1f108a['email']}),_0x4ad6d4=await master_shop[_0x3c8834(0xe2)](),_0x206048=await transfers[_0x3c8834(0x155)](_0x5bae60['params']['id']);let _0x3283ac;if(_0x1f108a[_0x3c8834(0x168)]==_0x3c8834(0x134)){const _0x453cb2=await staff['findOne']({'email':_0x1f108a[_0x3c8834(0x164)]});_0x3283ac=await warehouse[_0x3c8834(0x16d)]([{'$match':{'status':_0x3c8834(0xfd),'name':_0x453cb2[_0x3c8834(0x1a9)],'warehouse_category':_0x3c8834(0x15f)}},{'$group':{'_id':_0x3c8834(0xf4),'name':{'$first':_0x3c8834(0xf4)}}}]);}else _0x3283ac=await warehouse[_0x3c8834(0x16d)]([{'$match':{'status':'Enabled','warehouse_category':_0x3c8834(0x15f)}},{'$group':{'_id':'$name','name':{'$first':_0x3c8834(0xf4)}}}]);const _0x30b8bd=await warehouse[_0x3c8834(0x16d)]([{'$match':{'name':_0x206048[_0x3c8834(0x103)],'warehouse_category':_0x3c8834(0x15f)}},{'$unwind':'$product_details'},{'$group':{'_id':_0x3c8834(0x18e),'name':{'$first':_0x3c8834(0x13b)},'product_stock':{'$first':_0x3c8834(0xde)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x3c8834(0x119)},'type':{'$first':_0x3c8834(0x197)},'floorlevel':{'$first':_0x3c8834(0x1b1)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3c8834(0xce)},'product_code':{'$first':_0x3c8834(0x10b)},'storage':{'$first':_0x3c8834(0x160)},'rack':{'$first':_0x3c8834(0x11a)},'expiry_date':{'$first':_0x3c8834(0x116)},'production_date':{'$first':_0x3c8834(0xd8)},'room':{'$first':_0x3c8834(0x16b)}}}]),_0x3024f4=await product[_0x3c8834(0xe2)]({}),_0xed5b29=BayBinSelected(_0x206048['to_warehouse'],_0x206048['to_room']);if(_0x4ad6d4[0x0][_0x3c8834(0xee)]=='English\x20(US)'){var _0x1a4301=users['English'];console['log'](_0x1a4301);}else{if(_0x4ad6d4[0x0][_0x3c8834(0xee)]==_0x3c8834(0x14a))var _0x1a4301=users['Hindi'];else{if(_0x4ad6d4[0x0][_0x3c8834(0xee)]==_0x3c8834(0x12d))var _0x1a4301=users[_0x3c8834(0x12d)];else{if(_0x4ad6d4[0x0]['language']=='Spanish')var _0x1a4301=users[_0x3c8834(0x18b)];else{if(_0x4ad6d4[0x0][_0x3c8834(0xee)]==_0x3c8834(0x190))var _0x1a4301=users[_0x3c8834(0x190)];else{if(_0x4ad6d4[0x0][_0x3c8834(0xee)]=='Portuguese\x20(BR)')var _0x1a4301=users[_0x3c8834(0xf0)];else{if(_0x4ad6d4[0x0][_0x3c8834(0xee)]==_0x3c8834(0x187))var _0x1a4301=users['Chinese'];else{if(_0x4ad6d4[0x0]['language']==_0x3c8834(0xca))var _0x1a4301=users[_0x3c8834(0x1a8)];}}}}}}}_0x2b5c0c[_0x3c8834(0x12a)](_0x3c8834(0x1b6),{'success':_0x5bae60[_0x3c8834(0x14b)](_0x3c8834(0xe6)),'errors':_0x5bae60[_0x3c8834(0x14b)](_0x3c8834(0x17a)),'role':_0x1f108a,'profile':_0x3d6554,'master_shop':_0x4ad6d4,'warehouse':_0x3283ac,'transfer':_0x206048,'stock':_0x30b8bd,'unit':_0x3024f4,'language':_0x1a4301});}catch(_0x93ca02){console[_0x3c8834(0x161)](_0x93ca02);}}),router['post']('/view/:id',auth,async(_0x648e7c,_0x1ae422)=>{var _0xb4ec6=a0_0x5d9aec;try{const _0x54f836=_0x648e7c[_0xb4ec6(0x1a4)]['id'],_0x514dfe=await transfers['findById'](_0x54f836);_0x1ae422['json'](_0x648e7c['body']);return;const {date:_0xf67853,from_warehouse:_0x984eb7,FromRoom_name:_0x6fb4dc,to_warehouse:_0x461094,ToRoom_name:_0x5e99ef,prod_name:_0x1e2b70,from_prod_qty:_0x26f40f,from_prod_level:_0x3efb5a,from_prod_isle:_0x597047,from_prod_pallet:_0x23f158,to_prod_qty:_0x2c8ca4,to_prod_level:_0x4313e6,to_prod_isle:_0x562c1b,to_prod_pallet:_0x9cb617,primary_code:_0x514f4e,secondary_code:_0x4c08a0,product_code3:_0x33aa7e,note:_0x5c6ba1,invoice:_0x3a5e65,expiry_date:_0x4f8c24}=_0x648e7c['body'];if(typeof _0x1e2b70==_0xb4ec6(0x16a))var _0x252fea=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xdd)]],_0x3db8dd=[_0x648e7c[_0xb4ec6(0x106)]['from_prod_qty']],_0x5cfbbf=[_0x648e7c[_0xb4ec6(0x106)]['from_prod_level']],_0x8626b2=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x10a)]],_0x4ffdd6=[_0x648e7c['body']['from_prod_pallet']],_0x1e6b5e=[_0x648e7c['body'][_0xb4ec6(0x1a0)]],_0x312123=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xfe)]],_0xfa5f9f=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x149)]],_0x3a1df5=[_0x648e7c[_0xb4ec6(0x106)]['to_prod_isle']],_0x595f98=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xf8)]],_0x506368=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x112)]],_0x93b94a=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x174)]],_0x497def=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x178)]],_0x48fe7a=[_0x648e7c['body'][_0xb4ec6(0x19b)]],_0x184d3e=[_0x648e7c[_0xb4ec6(0x106)]['secondary_code']],_0x2483f5=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x17d)]],_0x3d9799=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x121)]],_0x18570e=[_0x648e7c['body'][_0xb4ec6(0x182)]],_0x343aab=[_0x648e7c[_0xb4ec6(0x106)]['secondary_unit']],_0x198050=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x109)]],_0x1353c4=[_0x648e7c['body']['expiry_date']],_0x2b3bfb=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x184)]],_0x553362=[_0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xdc)]];else var _0x252fea=[..._0x648e7c['body']['prod_name']],_0x93b94a=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x174)]],_0x497def=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x178)]],_0x1e6b5e=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x1a0)]],_0x506368=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x112)]],_0x3db8dd=[..._0x648e7c['body'][_0xb4ec6(0x158)]],_0x5cfbbf=[..._0x648e7c['body']['from_prod_level']],_0x8626b2=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x10a)]],_0x4ffdd6=[..._0x648e7c['body'][_0xb4ec6(0xf6)]],_0x312123=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xfe)]],_0xfa5f9f=[..._0x648e7c['body'][_0xb4ec6(0x149)]],_0x3a1df5=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x188)]],_0x595f98=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xf8)]],_0x48fe7a=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x19b)]],_0x184d3e=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x151)]],_0x2483f5=[..._0x648e7c['body'][_0xb4ec6(0x17d)]],_0x3d9799=[..._0x648e7c['body'][_0xb4ec6(0x121)]],_0x18570e=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x182)]],_0x343aab=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xd3)]],_0x198050=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0x109)]],_0x1353c4=[..._0x648e7c[_0xb4ec6(0x106)]['expiry_date']],_0x2b3bfb=[..._0x648e7c[_0xb4ec6(0x106)]['from_storage']],_0x553362=[..._0x648e7c[_0xb4ec6(0x106)][_0xb4ec6(0xdc)]];const _0x2ed4bc=_0x252fea[_0xb4ec6(0xd2)](_0x1153bd=>{return _0x1153bd={'product_name':_0x1153bd};});_0x3db8dd[_0xb4ec6(0x186)]((_0x1d75f1,_0x151adc)=>{var _0x38b3d8=_0xb4ec6;_0x2ed4bc[_0x151adc][_0x38b3d8(0xcb)]=_0x1d75f1;}),_0x5cfbbf[_0xb4ec6(0x186)]((_0x9954a0,_0x1c63c6)=>{_0x2ed4bc[_0x1c63c6]['from_bay']=_0x9954a0;}),_0x8626b2['forEach']((_0x2de891,_0xd7128b)=>{_0x2ed4bc[_0xd7128b]['from_bin']=_0x2de891;}),_0x4ffdd6['forEach']((_0x3705b0,_0xc81120)=>{var _0x2efcef=_0xb4ec6;_0x2ed4bc[_0xc81120][_0x2efcef(0x136)]=_0x3705b0;}),_0x312123[_0xb4ec6(0x186)]((_0x4dcadf,_0x5301d8)=>{var _0x480906=_0xb4ec6;_0x2ed4bc[_0x5301d8][_0x480906(0x13f)]=_0x4dcadf;}),_0xfa5f9f[_0xb4ec6(0x186)]((_0x387e27,_0xb95739)=>{var _0x52cf92=_0xb4ec6;_0x2ed4bc[_0xb95739][_0x52cf92(0x127)]=_0x387e27;}),_0x3a1df5[_0xb4ec6(0x186)]((_0x2cf3b9,_0x3d88c6)=>{_0x2ed4bc[_0x3d88c6]['to_bin']=_0x2cf3b9;}),_0x595f98['forEach']((_0x14b0af,_0x4a84a3)=>{var _0x1eb4e4=_0xb4ec6;_0x2ed4bc[_0x4a84a3][_0x1eb4e4(0xe1)]=_0x14b0af;}),_0x48fe7a[_0xb4ec6(0x186)]((_0x4fa5f7,_0x2928e8)=>{_0x2ed4bc[_0x2928e8]['primary_code']=_0x4fa5f7;}),_0x184d3e[_0xb4ec6(0x186)]((_0x2f2fc8,_0x243a3e)=>{var _0x2ba48c=_0xb4ec6;_0x2ed4bc[_0x243a3e][_0x2ba48c(0x151)]=_0x2f2fc8;}),_0x2483f5[_0xb4ec6(0x186)]((_0x6129ba,_0x3cb14b)=>{_0x2ed4bc[_0x3cb14b]['product_code']=_0x6129ba;}),_0x3d9799[_0xb4ec6(0x186)]((_0x139915,_0x1ad45e)=>{_0x2ed4bc[_0x1ad45e]['maxProducts']=_0x139915;}),_0x18570e[_0xb4ec6(0x186)]((_0x1aef5a,_0x531193)=>{var _0x49a3ba=_0xb4ec6;_0x2ed4bc[_0x531193][_0x49a3ba(0x182)]=_0x1aef5a;}),_0x343aab[_0xb4ec6(0x186)]((_0x36bd5f,_0x2f0304)=>{_0x2ed4bc[_0x2f0304]['secondary_unit']=_0x36bd5f;}),_0x198050['forEach']((_0x3951c7,_0xeb00f9)=>{var _0x385fce=_0xb4ec6;_0x2ed4bc[_0xeb00f9][_0x385fce(0x109)]=_0x3951c7;}),_0x1353c4[_0xb4ec6(0x186)]((_0x34321f,_0x5b14e4)=>{var _0x2dc581=_0xb4ec6;_0x2ed4bc[_0x5b14e4][_0x2dc581(0xfc)]=_0x34321f;}),_0x93b94a[_0xb4ec6(0x186)]((_0x14dce8,_0x4548a0)=>{var _0x3bae8d=_0xb4ec6;_0x2ed4bc[_0x4548a0][_0x3bae8d(0x174)]=_0x14dce8;}),_0x497def[_0xb4ec6(0x186)]((_0x52fc94,_0x1aee96)=>{var _0x57a5a8=_0xb4ec6;_0x2ed4bc[_0x1aee96][_0x57a5a8(0x101)]=_0x52fc94;}),_0x1e6b5e['forEach']((_0x3a34ee,_0x3feb0f)=>{var _0x3a9140=_0xb4ec6;_0x2ed4bc[_0x3feb0f][_0x3a9140(0x1a0)]=_0x3a34ee;}),_0x506368[_0xb4ec6(0x186)]((_0x5a9465,_0x227880)=>{var _0x16d8d3=_0xb4ec6;_0x2ed4bc[_0x227880][_0x16d8d3(0x112)]=_0x5a9465;}),_0x2b3bfb['forEach']((_0x33c582,_0x2f0de2)=>{var _0x5d97bf=_0xb4ec6;_0x2ed4bc[_0x2f0de2][_0x5d97bf(0x184)]=_0x33c582;}),_0x553362['forEach']((_0x4b061e,_0x449d51)=>{var _0x5105de=_0xb4ec6;_0x2ed4bc[_0x449d51][_0x5105de(0x11b)]=_0x4b061e;});const _0x1c549a=_0x2ed4bc['filter'](_0x52996a=>_0x52996a[_0xb4ec6(0x13f)]!=='0'&&_0x52996a['to_quantity']!==''||_0x52996a['to_floorlevel']!=='0'&&_0x52996a[_0xb4ec6(0xe1)]!=='');var _0x41f404=0x0;_0x1c549a['forEach'](_0x29f4f3=>{var _0x6219=_0xb4ec6;parseInt(_0x29f4f3[_0x6219(0xcb)])<parseInt(_0x29f4f3[_0x6219(0x13f)])&&_0x41f404++;});if(_0x41f404!=0x0)return _0x648e7c[_0xb4ec6(0x14b)]('errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x1ae422[_0xb4ec6(0x15c)](_0xb4ec6(0x10d));const _0x183b1a=await warehouse[_0xb4ec6(0xf2)]({'name':_0x514dfe[_0xb4ec6(0x103)],'room':_0x514dfe[_0xb4ec6(0x19c)]});_0x514dfe[_0xb4ec6(0x114)][_0xb4ec6(0x186)](_0x210bc7=>{var _0x45c7e8=_0xb4ec6;if(_0x210bc7[_0x45c7e8(0x13f)]>0x0){const _0x3b72bc=_0x183b1a['product_details'][_0x45c7e8(0xd2)](_0x4ca186=>{var _0x112865=_0x45c7e8;_0x4ca186['product_name']==_0x210bc7[_0x112865(0x124)]&&_0x4ca186[_0x112865(0x19f)]==_0x210bc7['from_floorlevel']&&_0x4ca186[_0x112865(0x147)]==_0x210bc7['from_types']&&_0x4ca186[_0x112865(0x105)]==_0x210bc7['from_bin']&&_0x4ca186[_0x112865(0x165)]==_0x210bc7['from_bay']&&_0x4ca186['rack']==_0x210bc7['from_rack']&&_0x4ca186['storage']==_0x210bc7[_0x112865(0x184)]&&(_0x4ca186[_0x112865(0x15a)]=parseInt(_0x4ca186['product_stock'])+parseInt(_0x210bc7[_0x112865(0x13f)]));});}}),await _0x183b1a['save']();const _0x416544=await warehouse[_0xb4ec6(0xf2)]({'name':_0x514dfe[_0xb4ec6(0x12c)],'room':_0x514dfe['to_room']});_0x514dfe[_0xb4ec6(0x114)][_0xb4ec6(0x186)](_0x44abe2=>{var _0x3c96a1=_0xb4ec6;if(_0x44abe2[_0x3c96a1(0x13f)]>0x0){const _0x2c0710=_0x416544['product_details']['map'](_0x3ab658=>{var _0x3d78a8=_0x3c96a1;_0x3ab658[_0x3d78a8(0x124)]==_0x44abe2[_0x3d78a8(0x124)]&&_0x3ab658[_0x3d78a8(0x19f)]==_0x44abe2[_0x3d78a8(0xe1)]&&_0x3ab658[_0x3d78a8(0x147)]==_0x44abe2[_0x3d78a8(0x112)]&&_0x3ab658[_0x3d78a8(0x105)]==_0x44abe2[_0x3d78a8(0x130)]&&_0x3ab658[_0x3d78a8(0x165)]==_0x44abe2[_0x3d78a8(0x127)]&&_0x3ab658[_0x3d78a8(0x101)]==_0x44abe2[_0x3d78a8(0x101)]&&_0x3ab658['storage']==_0x44abe2['storage']&&(_0x3ab658['product_stock']=parseInt(_0x3ab658[_0x3d78a8(0x15a)])-parseInt(_0x44abe2[_0x3d78a8(0x13f)]));});}}),await _0x416544[_0xb4ec6(0x153)](),_0x514dfe[_0xb4ec6(0x159)]=_0xf67853,_0x514dfe[_0xb4ec6(0x103)]=_0x984eb7,_0x514dfe[_0xb4ec6(0x12c)]=_0x461094,_0x514dfe[_0xb4ec6(0x114)]=_0x1c549a,_0x514dfe[_0xb4ec6(0x128)]=_0x5c6ba1,_0x514dfe['invoice']=_0x3a5e65;const _0x21a45c=await _0x514dfe[_0xb4ec6(0x153)]();console[_0xb4ec6(0x161)](_0x21a45c);const _0x44313f=await warehouse['findOne']({'name':_0x984eb7,'room':_0x6fb4dc});_0x21a45c[_0xb4ec6(0x114)][_0xb4ec6(0x186)](_0x1300b3=>{var _0x12f144=_0xb4ec6;if(_0x1300b3['to_quantity']>0x0){const _0x11f78d=_0x44313f[_0x12f144(0x1b2)]['map'](_0x22a162=>{var _0x17e101=_0x12f144;_0x22a162[_0x17e101(0x124)]==_0x1300b3[_0x17e101(0x124)]&&_0x22a162[_0x17e101(0x19f)]==_0x1300b3['from_floorlevel']&&_0x22a162[_0x17e101(0x147)]==_0x1300b3[_0x17e101(0x1a0)]&&_0x22a162[_0x17e101(0x105)]==_0x1300b3[_0x17e101(0x123)]&&_0x22a162[_0x17e101(0x165)]==_0x1300b3['from_bay']&&_0x22a162[_0x17e101(0x101)]==_0x1300b3[_0x17e101(0x11b)]&&_0x22a162[_0x17e101(0x174)]==_0x1300b3['from_storage']&&(_0x22a162[_0x17e101(0x15a)]=parseInt(_0x22a162[_0x17e101(0x15a)])-parseInt(_0x1300b3[_0x17e101(0x13f)]));});}}),await _0x44313f[_0xb4ec6(0x153)]();const _0x589721=await warehouse[_0xb4ec6(0xf2)]({'name':_0x461094,'room':_0x5e99ef});_0x21a45c[_0xb4ec6(0x114)]['forEach'](_0x1fecf6=>{var _0x28d244=_0xb4ec6;if(_0x1fecf6[_0x28d244(0x13f)]>0x0){var _0x56abf8=0x0;const _0x145fff=_0x589721[_0x28d244(0x1b2)][_0x28d244(0xd2)](_0x202178=>{var _0x47f5d0=_0x28d244;_0x202178['product_name']==_0x1fecf6[_0x47f5d0(0x124)]&&_0x202178['floorlevel']==_0x1fecf6[_0x47f5d0(0xe1)]&&_0x202178[_0x47f5d0(0x147)]==_0x1fecf6[_0x47f5d0(0x112)]&&_0x202178[_0x47f5d0(0x105)]==_0x1fecf6[_0x47f5d0(0x130)]&&_0x202178[_0x47f5d0(0x165)]==_0x1fecf6[_0x47f5d0(0x127)]&&_0x202178[_0x47f5d0(0x101)]==_0x1fecf6['rack']&&_0x202178[_0x47f5d0(0x174)]==_0x1fecf6[_0x47f5d0(0x174)]&&(_0x202178[_0x47f5d0(0x15a)]=parseInt(_0x202178['product_stock'])+parseInt(_0x1fecf6[_0x47f5d0(0x13f)]),_0x56abf8++);});_0x56abf8=='0'&&(_0x589721[_0x28d244(0x1b2)]=_0x589721[_0x28d244(0x1b2)]['concat']({'product_name':_0x1fecf6[_0x28d244(0x124)],'product_stock':_0x1fecf6[_0x28d244(0x13f)],'bay':_0x1fecf6[_0x28d244(0x127)],'bin':_0x1fecf6['to_bin'],'type':_0x1fecf6[_0x28d244(0x112)],'floorlevel':_0x1fecf6['to_floorlevel'],'storage':_0x1fecf6[_0x28d244(0x174)],'rack':_0x1fecf6[_0x28d244(0x101)],'product_code':_0x1fecf6['product_code'],'primary_code':_0x1fecf6['primary_code'],'secondary_code':_0x1fecf6[_0x28d244(0x151)],'maxProducts':_0x1fecf6['maxProducts'],'storage':_0x1fecf6[_0x28d244(0x174)],'rack':_0x1fecf6['rack']}));}}),await _0x589721['save'](),_0x648e7c[_0xb4ec6(0x14b)](_0xb4ec6(0xe6),_0xb4ec6(0x198)),_0x1ae422[_0xb4ec6(0x15c)](_0xb4ec6(0x18c));}catch(_0x4678af){console['log'](_0x4678af);}}),router['post']('/barcode_scanner',async(_0x3afec2,_0x2f8c7d)=>{var _0x573379=a0_0x5d9aec;const {FromWareHouse:_0x2b7cf4,FromRoom:_0x3101db,ToWarehouse:_0x404180,ToRoom:_0x19363a,primary_code:_0x1e05be,Roomslist:_0x16674c}=_0x3afec2[_0x573379(0x106)],_0x3bafb8=_0x16674c[_0x573379(0x13c)](','),_0x4e4201=[];async function _0x16a311(_0x5f54ec){var _0x240575=_0x573379;const _0x382554=await warehouse[_0x240575(0x16d)]([{'$match':{'name':_0x2b7cf4,'room':_0x5f54ec}},{'$unwind':_0x240575(0x195)},{'$match':{'product_details.primary_code':_0x1e05be}},{'$group':{'_id':_0x240575(0x18e),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x240575(0xde)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x240575(0xce)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x240575(0xed)},'isle':{'$first':_0x240575(0x119)},'type':{'$first':_0x240575(0x197)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x240575(0xcd)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x240575(0x160)},'rack':{'$first':_0x240575(0x11a)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x240575(0xd8)},'batch_code':{'$first':_0x240575(0x138)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x240575(0x171)}}}]),_0x2fa848=await warehouse['aggregate']([{'$match':{'name':_0x2b7cf4,'room':_0x5f54ec}},{'$unwind':_0x240575(0x195)},{'$match':{'product_details.secondary_code':_0x1e05be}},{'$group':{'_id':_0x240575(0x18e),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x240575(0xde)},'primary_code':{'$first':_0x240575(0x12f)},'secondary_code':{'$first':_0x240575(0xce)},'product_code':{'$first':_0x240575(0x10b)},'level':{'$first':_0x240575(0xed)},'isle':{'$first':_0x240575(0x119)},'type':{'$first':_0x240575(0x197)},'pallet':{'$first':_0x240575(0x1b1)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x240575(0x181)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x240575(0x116)},'production_date':{'$first':_0x240575(0xd8)},'batch_code':{'$first':_0x240575(0x138)},'maxPerUnit':{'$first':_0x240575(0xd5)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x240575(0x16b)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);if(_0x382554[_0x240575(0x120)]>0x0)_0x4e4201[_0x240575(0x129)](_0x382554);else _0x2fa848[_0x240575(0x120)]>0x0&&_0x4e4201[_0x240575(0x129)](_0x2fa848);}const _0x5506a8=_0x3bafb8[_0x573379(0xd2)](_0x5c6b09=>_0x16a311(_0x5c6b09));await Promise[_0x573379(0xfa)](_0x5506a8),_0x2f8c7d[_0x573379(0x191)](_0x4e4201);}),router[a0_0x5d9aec(0xef)]('/barcode_scanner2',async(_0x4cc2ab,_0x3df6e4)=>{var _0x32db82=a0_0x5d9aec;try{const {FromWareHouse:_0x3dcb1f,FromRoom:_0x45f27c,ToWarehouse:_0x392c81,ToRoom:_0x164a5e,secondary_code:_0x5cd40c}=_0x4cc2ab[_0x32db82(0x106)],_0x2539ae=await warehouse[_0x32db82(0x16d)]([{'$match':{'name':_0x3dcb1f}},{'$unwind':_0x32db82(0x195)},{'$match':{'product_details.secondary_code':_0x5cd40c}},{'$group':{'_id':_0x32db82(0x18e),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x32db82(0x12f)},'secondary_code':{'$first':_0x32db82(0xce)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x32db82(0xde)},'warehouse':{'$first':'$name'},'level':{'$first':_0x32db82(0xec)},'isle':{'$first':_0x32db82(0x17c)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x32db82(0x171)},'unit':{'$first':_0x32db82(0xcd)}}}]);_0x3df6e4['status'](0xc8)['json'](_0x2539ae);}catch(_0x8aedc9){_0x3df6e4[_0x32db82(0x16f)](0x194)[_0x32db82(0x191)]({'message':_0x8aedc9[_0x32db82(0x180)]});}}),router['post'](a0_0x5d9aec(0xd9),async(_0x213072,_0x3ab612)=>{var _0x4920b1=a0_0x5d9aec;try{const {FromWareHouse:_0x21132c,FromRoom:_0xf27b6,ToWarehouse:_0x508b57,ToRoom:_0x104982,product_code:_0xd9631c}=_0x213072['body'],_0x59cff1=await warehouse['aggregate']([{'$match':{'name':_0x21132c}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0xd9631c}},{'$group':{'_id':_0x4920b1(0x18e),'name':{'$first':_0x4920b1(0x13b)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4920b1(0xce)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x4920b1(0xde)},'warehouse':{'$first':'$name'},'level':{'$first':_0x4920b1(0xec)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x4920b1(0xf1)},'maxProducts':{'$first':_0x4920b1(0x171)},'unit':{'$first':'$product_details.unit'}}}]);_0x3ab612[_0x4920b1(0x16f)](0xc8)['json'](_0x59cff1);}catch(_0x3991a0){_0x3ab612[_0x4920b1(0x16f)](0x194)[_0x4920b1(0x191)]({'message':_0x3991a0['message']});}}),router[a0_0x5d9aec(0xef)](a0_0x5d9aec(0x167),async(_0x17783a,_0x5489db)=>{var _0x53e61d=a0_0x5d9aec;const {level:_0x5bb3d3,isle:_0x545971,pallet:_0x5c0be8,warehouses:_0x1536c6,room:_0x3c6573}=_0x17783a['body'];try{const _0x58a658=await warehouse[_0x53e61d(0x16d)]([{'$match':{'name':_0x1536c6,'room':_0x3c6573}},{'$unwind':_0x53e61d(0x195)},{'$match':{'product_details.level':parseInt(_0x5bb3d3),'product_details.isle':_0x545971,'product_details.pallet':parseInt(_0x5c0be8)}},{'$group':{'_id':_0x53e61d(0x18e),'name':{'$first':_0x53e61d(0x13b)},'product_stock':{'$first':_0x53e61d(0xde)},'level':{'$first':_0x53e61d(0xec)},'isle':{'$first':_0x53e61d(0x17c)},'pallet':{'$first':_0x53e61d(0xf1)},'maxProducts':{'$first':_0x53e61d(0x171)}}}]);_0x5489db[_0x53e61d(0x16f)](0xc8)[_0x53e61d(0x191)](_0x58a658);}catch(_0x43b45a){_0x5489db[_0x53e61d(0x16f)](0x194)[_0x53e61d(0x191)]({'message':_0x43b45a[_0x53e61d(0x180)]});}}),module[a0_0x5d9aec(0xe0)]=router;