function a0_0x3724(){var _0x49c4dc=['from_rack','find','to_floorlevel','id_transaction_id','TRF-','1591213PMgGXG','from_room_name','Logo.png','secondary_code','Spanish','primary_unit','$from_warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','exports','COLD\x20STORAGE','Arabic','1024744UvbqOx','rak','Shelves','Error\x20Occurs','/transfer/view','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$invoice','$room','here','prod_name','Rack\x20B','language','RMSEmail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$product_details.type','site_title','$product_details.storage','master','Ambient','product_name','Chinese','</div>','</head><body>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','from_storage','note','</tr>','$product_details.bay','all','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','2GWBDBn','/barcode_scanner3','filter','from_prod_isle','string','errors','product','$product_details.unit','Rack\x20C','rack','to_prod_level','Transfer\x20Edit\x20Successfully','staff','$product_details.invoice','<h2>\x20','production_date','8790GMlilB','to_prod_pallet','Transfer\x20Finalize\x20Successfully','/view/:id','from_prod_qty','user','$product_details.production_date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','<html><head><title></title>','5122396OLJfOd','$date','params','<h5>','storage','bay','from_rak','findById','/preview/:id','to_invoice','</h5>','transfer','primary_code','German','success','$product.to_room_name','Hindi','from_prod_pallet','/barcode_scanner2','../models/all_models','Raw\x20Materials','$product_details.rack','floor','Router','$product_details.isle','<!DOCTYPE\x20html>','forEach','bin','Rack\x20E','$product.from_room_name','7627420FXPFqS','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','aggregate','Portuguese','edit_transfer','Transfer\x20Mail','from_floorlevel','/view','from_invoice','RoomAssigned','slice','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','get','../middleware/auth','to_prod_isle','\x20Order\x20Number\x20:\x20','body','from_warehouse','password','To_invoice','save','Rack\x20D','createTransport','to_warehouse','map','Return\x20Rooms','padStart','ToRoomAssigned','<tr>','$product_details.pallet','French','$product_details.bin','from_types','id_transaction','type','updateOne','Enabled','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','_id','product_code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','product_code3','expiry_date','An\x20error\x20occurred.','unit','$product_details.batch_code','$product_details.expiry_date','</body></html>','DRY\x20STORAGE','secondary_unit','$product_details.secondary_unit','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','message','True','findOne','Portuguese\x20(BR)','$product_details._id','$product_details.primary_code','from_quantity','invoice','maxperunit','/upload/','$finalize','add_transfer','There\x27s\x20a\x20error\x20in\x20this\x20transaction','from_bay','$product_details.maxProducts','<div>','split','Arabic\x20(ae)','$product_details.level','host','$product_details.floorlevel','<strong>\x20Regards\x20</strong>','Rack\x20A','$name','prod_cat','floorlevel','<h5\x20style=\x22text-align:\x20left;\x22>','from_prod_level','$product_details.maxPerUnit','105qRgBOx','toString','$product_details.product_stock','An\x20error\x20occurred\x20while\x20saving\x20data.','redirect','$product_details.product_name','edit_transfer_view','to_room_name','port','finalize','to_bin','English','Receiving\x20Area','to_room','then','/../public','catch','$to_warehouse','/view/add_transfer','MaxStocks_data2','7348284tXwVwF','Product\x20Transfer\x20successfully','Email\x20sent\x20successfully','</span>','maxProducts','Level','to_prod_qty','5FyqgOM','English\x20(US)','</tbody>','role','email','$product_details.secondary_code','$product_details','error','from_bin','$product_details.product_code','$product','concat','logo','batch_code','log','render','flash','post','product_stock','max_per_unit','push','Floor','to_types','to_bay','../public/language/languages.json','to_quantity','json','warehouse','$isAllowEdit','\x20<>\x20','/CheckingWarehouse','<hr\x20class=\x22my-3\x22>','length','product_details','status','2422893XeXHKQ','sendMail','express','Rack\x20F'];a0_0x3724=function(){return _0x49c4dc;};return a0_0x3724();}function a0_0x311e(_0x1bd167,_0x38198a){var _0x3724b2=a0_0x3724();return a0_0x311e=function(_0x311e5a,_0x2910c7){_0x311e5a=_0x311e5a-0x1cc;var _0x168029=_0x3724b2[_0x311e5a];return _0x168029;},a0_0x311e(_0x1bd167,_0x38198a);}var a0_0xb720ed=a0_0x311e;(function(_0x4e2ea6,_0x1c71a2){var _0x296e0f=a0_0x311e,_0x16a49c=_0x4e2ea6();while(!![]){try{var _0x469437=-parseInt(_0x296e0f(0x256))/0x1*(-parseInt(_0x296e0f(0x27f))/0x2)+parseInt(_0x296e0f(0x24d))/0x3+parseInt(_0x296e0f(0x298))/0x4*(-parseInt(_0x296e0f(0x22a))/0x5)+-parseInt(_0x296e0f(0x28f))/0x6*(-parseInt(_0x296e0f(0x20f))/0x7)+-parseInt(_0x296e0f(0x261))/0x8+-parseInt(_0x296e0f(0x223))/0x9+parseInt(_0x296e0f(0x2b6))/0xa;if(_0x469437===_0x1c71a2)break;else _0x16a49c['push'](_0x16a49c['shift']());}catch(_0x1e0bd2){_0x16a49c['push'](_0x16a49c['shift']());}}}(a0_0x3724,0xe9fb9));const express=require(a0_0xb720ed(0x24f)),app=express(),router=express[a0_0xb720ed(0x2af)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0xb720ed(0x2ab)),auth=require(a0_0xb720ed(0x2c4)),users=require(a0_0xb720ed(0x242)),nodemailer=require('nodemailer');router[a0_0xb720ed(0x2c3)](a0_0xb720ed(0x2be),auth,async(_0x2b4cdf,_0x2b07fc)=>{var _0x3f40b4=a0_0xb720ed;try{const {username:_0x555f75,email:_0x10cb94,role:_0x113d1b}=_0x2b4cdf[_0x3f40b4(0x294)],_0x13c24b=_0x2b4cdf[_0x3f40b4(0x294)],_0x3fce9b=await profile[_0x3f40b4(0x1f4)]({'email':_0x13c24b[_0x3f40b4(0x22e)]}),_0x396a38=await master_shop['find']();console[_0x3f40b4(0x238)](_0x3f40b4(0x272),_0x396a38);let _0x25c312;if(_0x13c24b[_0x3f40b4(0x22d)]=='staff'){const _0x10565d=await staff[_0x3f40b4(0x1f4)]({'email':_0x13c24b['email']});_0x25c312=await transfers[_0x3f40b4(0x252)]({'from_warehouse':_0x10565d[_0x3f40b4(0x245)]});}else _0x25c312=await transfers[_0x3f40b4(0x2b9)]([{'$unwind':_0x3f40b4(0x234)},{'$group':{'_id':'$_id','invoice':{'$first':_0x3f40b4(0x267)},'date':{'$first':_0x3f40b4(0x299)},'from_warehouse':{'$first':_0x3f40b4(0x25c)},'to_warehouse':{'$first':_0x3f40b4(0x220)},'from_room_name':{'$addToSet':_0x3f40b4(0x2b5)},'to_room_name':{'$addToSet':_0x3f40b4(0x2a7)},'finalize':{'$first':_0x3f40b4(0x1fc)},'isAllowEdit':{'$first':_0x3f40b4(0x246)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x22b)){var _0xdd4d8d=users[_0x3f40b4(0x21a)];console[_0x3f40b4(0x238)](_0xdd4d8d);}else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x2a8))var _0xdd4d8d=users[_0x3f40b4(0x2a8)];else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x2a5))var _0xdd4d8d=users[_0x3f40b4(0x2a5)];else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x25a))var _0xdd4d8d=users['Spanish'];else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x1db))var _0xdd4d8d=users[_0x3f40b4(0x1db)];else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x1f5))var _0xdd4d8d=users[_0x3f40b4(0x2ba)];else{if(_0x396a38[0x0][_0x3f40b4(0x26c)]==_0x3f40b4(0x275))var _0xdd4d8d=users[_0x3f40b4(0x275)];else{if(_0x396a38[0x0]['language']==_0x3f40b4(0x203))var _0xdd4d8d=users['Arabic'];}}}}}}}_0x2b07fc[_0x3f40b4(0x239)](_0x3f40b4(0x2a3),{'success':_0x2b4cdf[_0x3f40b4(0x23a)](_0x3f40b4(0x2a6)),'errors':_0x2b4cdf[_0x3f40b4(0x23a)](_0x3f40b4(0x284)),'role':_0x13c24b,'profile':_0x3fce9b,'master_shop':_0x396a38,'transfer':_0x25c312,'language':_0xdd4d8d});}catch(_0x1fb5ce){console[_0x3f40b4(0x238)](_0x1fb5ce);}});async function getRandom8DigitNumber(){var _0x3b35a9=a0_0xb720ed;const _0x847a1e=0x989680,_0x1f2c67=0x5f5e0ff,_0x374a6e=Math[_0x3b35a9(0x2ae)](Math['random']()*(_0x1f2c67-_0x847a1e+0x1))+_0x847a1e;var _0x3e07db;const _0x532bb1=await transfers['findOne']({'invoice':'TRF-'+_0x374a6e});return _0x532bb1&&_0x532bb1[_0x3b35a9(0x24a)]>0x0?_0x3e07db=_0x3b35a9(0x255)+_0x374a6e:_0x3e07db=_0x3b35a9(0x255)+_0x374a6e,_0x3e07db;}router[a0_0xb720ed(0x2c3)]('/view/add_transfer',auth,async(_0x1940ae,_0x16375c)=>{var _0x3d4686=a0_0xb720ed;try{const {username:_0x3c9943,email:_0x2c07b4,role:_0x38a0fc}=_0x1940ae[_0x3d4686(0x294)],_0x31c822=_0x1940ae[_0x3d4686(0x294)],_0x4c2a8d=await profile[_0x3d4686(0x1f4)]({'email':_0x31c822[_0x3d4686(0x22e)]}),_0x170ece=await master_shop[_0x3d4686(0x252)]();console['log']('master',_0x170ece);let _0x20b448;if(_0x31c822[_0x3d4686(0x22d)]==_0x3d4686(0x28b)){const _0x1bbcd5=await staff[_0x3d4686(0x1f4)]({'email':_0x31c822[_0x3d4686(0x22e)]});_0x20b448=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x1bbcd5[_0x3d4686(0x245)],'warehouse_category':_0x3d4686(0x2ac)}},{'$group':{'_id':'$name','name':{'$first':_0x3d4686(0x209)}}}]);}else _0x20b448=await warehouse[_0x3d4686(0x2b9)]([{'$match':{'status':_0x3d4686(0x1e1),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x3d4686(0x209),'name':{'$first':'$name'}}}]);var _0x48a77d=[_0x3d4686(0x273),'Enclosed',_0x3d4686(0x1d6)];const _0x233a35=await transfers['find']({}),_0xc63358=_0x233a35[_0x3d4686(0x24a)]+0x1,_0x1380a2=_0x3d4686(0x255)+_0xc63358[_0x3d4686(0x210)]()[_0x3d4686(0x1d7)](0x5,'0');if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x22b)){var _0x5b9d92=users[_0x3d4686(0x21a)];console[_0x3d4686(0x238)](_0x5b9d92);}else{if(_0x170ece[0x0]['language']==_0x3d4686(0x2a8))var _0x5b9d92=users['Hindi'];else{if(_0x170ece[0x0]['language']==_0x3d4686(0x2a5))var _0x5b9d92=users[_0x3d4686(0x2a5)];else{if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x25a))var _0x5b9d92=users['Spanish'];else{if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x1db))var _0x5b9d92=users[_0x3d4686(0x1db)];else{if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x1f5))var _0x5b9d92=users[_0x3d4686(0x2ba)];else{if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x275))var _0x5b9d92=users[_0x3d4686(0x275)];else{if(_0x170ece[0x0][_0x3d4686(0x26c)]==_0x3d4686(0x203))var _0x5b9d92=users[_0x3d4686(0x260)];}}}}}}}const _0x42d100=getRandom8DigitNumber();_0x42d100[_0x3d4686(0x21d)](_0x3a6863=>{var _0x362453=_0x3d4686;_0x16375c[_0x362453(0x239)](_0x362453(0x1fd),{'success':_0x1940ae[_0x362453(0x23a)]('success'),'errors':_0x1940ae[_0x362453(0x23a)](_0x362453(0x284)),'role':_0x31c822,'profile':_0x4c2a8d,'master_shop':_0x170ece,'warehouse':_0x20b448,'language':_0x5b9d92,'rooms_data':_0x48a77d,'invoice':_0x3a6863});})[_0x3d4686(0x21f)](_0x4492f7=>{var _0x3eeff0=_0x3d4686;_0x1940ae['flash']('errors',_0x3eeff0(0x1fe)),_0x16375c[_0x3eeff0(0x213)](_0x3eeff0(0x265));});}catch(_0x51b1e8){console[_0x3d4686(0x238)](_0x51b1e8);}}),router['post'](a0_0xb720ed(0x221),auth,async(_0x11e1e8,_0x1b090f)=>{var _0x2f4a92=a0_0xb720ed;try{console[_0x2f4a92(0x238)](_0x11e1e8[_0x2f4a92(0x1cd)]);const {date:_0x580f38,from_warehouse:_0x27826a,FromRoom_name:_0x2a26b3,to_warehouse:_0x579dfa,ToRoom_name:_0x881aa3,prod_name:_0x3701a3,from_prod_qty:_0x13ed6d,from_prod_level:_0x3383af,from_prod_isle:_0x11e33a,from_prod_pallet:_0x389c25,to_prod_qty:_0xbbb9e9,to_prod_level:_0x5e5e6b,to_prod_isle:_0x4544f4,to_prod_pallet:_0x35036f,primary_code:_0x2154bc,secondary_code:_0x43e2bf,product_code3:_0x1748cc,note:_0xb0ce8d,MaxStocks_data2:_0x48a336,invoice:_0x4ff9c8,expiry_date:_0x326155}=_0x11e1e8[_0x2f4a92(0x1cd)];if(typeof _0x3701a3==_0x2f4a92(0x283))var _0x126f2d=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x26a)]],_0x1506ca=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x293)]],_0xd6df47=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x20d)]],_0x2ac27d=[_0x11e1e8[_0x2f4a92(0x1cd)]['New_Qty_Converted']],_0x2e05b5=[_0x11e1e8['body']['to_prod_level']],_0x42fece=[_0x11e1e8['body']['primary_code']],_0x3afdb2=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x259)]],_0x495c90=[_0x11e1e8['body'][_0x2f4a92(0x1e6)]],_0x29e240=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x222)]],_0x4b88f2=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x25b)]],_0x5d7cf5=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x1ee)]],_0x364eb8=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x237)]],_0x3cf169=[_0x11e1e8[_0x2f4a92(0x1cd)]['expiry_date']],_0x53ae7b=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x23d)]],_0x360d09=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x28e)]],_0x7e7b33=[_0x11e1e8['body']['prod_cat']],_0x17df6b=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x2c0)]],_0x5034ef=[_0x11e1e8['body'][_0x2f4a92(0x1d8)]],_0x3a6a05=[_0x11e1e8['body'][_0x2f4a92(0x2bf)]],_0x2a51ac=[_0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x2a1)]],_0x50dc72=[_0x11e1e8[_0x2f4a92(0x1cd)]['id_transaction']];else var _0x126f2d=[..._0x11e1e8['body'][_0x2f4a92(0x26a)]],_0x1506ca=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x293)]],_0xd6df47=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x20d)]],_0x2ac27d=[..._0x11e1e8[_0x2f4a92(0x1cd)]['New_Qty_Converted']],_0x2e05b5=[..._0x11e1e8[_0x2f4a92(0x1cd)]['to_prod_level']],_0x42fece=[..._0x11e1e8[_0x2f4a92(0x1cd)]['primary_code']],_0x3afdb2=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x259)]],_0x495c90=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x1e6)]],_0x29e240=[..._0x11e1e8['body']['MaxStocks_data2']],_0x4b88f2=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x25b)]],_0x5d7cf5=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x1ee)]],_0x364eb8=[..._0x11e1e8[_0x2f4a92(0x1cd)]['batch_code']],_0x3cf169=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x1e7)]],_0x53ae7b=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x23d)]],_0x360d09=[..._0x11e1e8['body'][_0x2f4a92(0x28e)]],_0x7e7b33=[..._0x11e1e8[_0x2f4a92(0x1cd)]['prod_cat']],_0x17df6b=[..._0x11e1e8['body']['RoomAssigned']],_0x5034ef=[..._0x11e1e8[_0x2f4a92(0x1cd)]['ToRoomAssigned']],_0x3a6a05=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x2bf)]],_0x2a51ac=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x2a1)]],_0x50dc72=[..._0x11e1e8[_0x2f4a92(0x1cd)][_0x2f4a92(0x1de)]];const _0x4dd7b9=_0x126f2d[_0x2f4a92(0x1d5)](_0x1931e6=>{return _0x1931e6={'product_name':_0x1931e6};});_0x1506ca['forEach']((_0x4db280,_0x3e3507)=>{_0x4dd7b9[_0x3e3507]['from_quantity']=_0x4db280;}),_0x3a6a05['forEach']((_0xcac552,_0x5a3738)=>{var _0x3b6347=_0x2f4a92;_0x4dd7b9[_0x5a3738][_0x3b6347(0x2bf)]=_0xcac552;}),_0x2a51ac[_0x2f4a92(0x2b2)]((_0x303243,_0xa50a63)=>{var _0x1e87a0=_0x2f4a92;_0x4dd7b9[_0xa50a63][_0x1e87a0(0x1d0)]=_0x303243;}),_0x50dc72[_0x2f4a92(0x2b2)]((_0x371ed9,_0x4d3adf)=>{_0x4dd7b9[_0x4d3adf]['id_transaction_id']=_0x371ed9;}),_0xd6df47[_0x2f4a92(0x2b2)]((_0x5a547e,_0x22f307)=>{_0x17df6b['forEach']((_0x2695b4,_0x8dc012)=>{var _0x2c9d6f=a0_0x311e;if(_0x2695b4==_0x2c9d6f(0x21b)&&_0x22f307==_0x8dc012){var _0x23b2e5=_0x5a547e[_0x2c9d6f(0x2c1)](0x3);_0x4dd7b9[_0x22f307][_0x2c9d6f(0x279)]=_0x5a547e[0x0],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x251)]=_0x5a547e[0x1],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1ff)]=0x0,_0x4dd7b9[_0x22f307]['from_bin']=0x0,_0x4dd7b9[_0x22f307]['from_types']='Floor',_0x4dd7b9[_0x22f307]['from_floorlevel']=_0x23b2e5;}else{if(_0x2695b4==_0x2c9d6f(0x263)&&_0x22f307==_0x8dc012){var _0x23b2e5=_0x5a547e[_0x2c9d6f(0x2c1)](0x3);_0x4dd7b9[_0x22f307][_0x2c9d6f(0x279)]=_0x5a547e[0x0],_0x4dd7b9[_0x22f307]['from_rack']=_0x5a547e[0x1],_0x4dd7b9[_0x22f307]['from_bay']=0x0,_0x4dd7b9[_0x22f307][_0x2c9d6f(0x232)]=0x0,_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1dd)]=_0x2c9d6f(0x23f),_0x4dd7b9[_0x22f307][_0x2c9d6f(0x2bd)]=_0x5a547e[0x5];}else{if(_0x22f307==_0x8dc012){if(_0x5a547e[0x0]=='A'&&_0x5a547e[0x1]=='L'&&_0x5a547e[0x2]=='L')console['log'](_0x2695b4+_0x2c9d6f(0x247)+_0x22f307+_0x2c9d6f(0x247)+_0x8dc012+'\x20<>\x20'+_0x5a547e+_0x2c9d6f(0x269)),_0x4dd7b9[_0x22f307][_0x2c9d6f(0x279)]=_0x5a547e[0x0],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x251)]=_0x5a547e[0x1],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1ff)]=0x0,_0x4dd7b9[_0x22f307][_0x2c9d6f(0x232)]=0x0,_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1dd)]='Floor',_0x4dd7b9[_0x22f307][_0x2c9d6f(0x2bd)]=_0x5a547e[0x3];else{var _0x1b05c4;if(_0x5a547e[0x4]=='L')_0x1b05c4=_0x2c9d6f(0x228);else _0x5a547e[0x4]=='F'&&(_0x1b05c4='Floor');_0x4dd7b9[_0x22f307]['from_storage']=_0x5a547e[0x0],_0x4dd7b9[_0x22f307]['from_rack']=_0x5a547e[0x1],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1ff)]=_0x5a547e[0x2],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x232)]=_0x5a547e[0x3],_0x4dd7b9[_0x22f307][_0x2c9d6f(0x1dd)]=_0x1b05c4,_0x4dd7b9[_0x22f307]['from_floorlevel']=_0x5a547e[0x5];}}}}});}),_0x2ac27d[_0x2f4a92(0x2b2)]((_0x17eeac,_0x6052a1)=>{var _0x3141ec=_0x2f4a92;_0x4dd7b9[_0x6052a1][_0x3141ec(0x243)]=_0x17eeac;}),_0x2e05b5['forEach']((_0x1902c2,_0x525f20)=>{var _0x3dd1df=_0x2f4a92;_0x5034ef[_0x3dd1df(0x2b2)]((_0x98000d,_0x41abf9)=>{var _0x53f452=_0x3dd1df;if(_0x98000d==_0x53f452(0x21b)&&_0x525f20==_0x41abf9){var _0xde1803=_0x1902c2[_0x53f452(0x2c1)](0x3);_0x4dd7b9[_0x525f20][_0x53f452(0x29c)]=_0x1902c2[0x0],_0x4dd7b9[_0x525f20]['rack']=_0x1902c2[0x1],_0x4dd7b9[_0x525f20][_0x53f452(0x241)]=0x0,_0x4dd7b9[_0x525f20][_0x53f452(0x219)]=0x0,_0x4dd7b9[_0x525f20][_0x53f452(0x240)]=_0x53f452(0x23f),_0x4dd7b9[_0x525f20][_0x53f452(0x253)]=_0xde1803;}else{if(_0x98000d==_0x53f452(0x263)&&_0x525f20==_0x41abf9){var _0xde1803=_0x1902c2[_0x53f452(0x2c1)](0x3);_0x4dd7b9[_0x525f20][_0x53f452(0x29c)]=_0x1902c2[0x0],_0x4dd7b9[_0x525f20][_0x53f452(0x288)]=_0x1902c2[0x1],_0x4dd7b9[_0x525f20]['to_bay']=0x0,_0x4dd7b9[_0x525f20]['to_bin']=0x0,_0x4dd7b9[_0x525f20][_0x53f452(0x240)]=_0x53f452(0x23f),_0x4dd7b9[_0x525f20][_0x53f452(0x253)]=_0x1902c2[0x5];}else{if(_0x525f20==_0x41abf9){if(_0x1902c2[0x0]=='A'&&_0x1902c2[0x1]=='L'&&_0x1902c2[0x2]=='L')console[_0x53f452(0x238)](_0x98000d+_0x53f452(0x247)+_0x525f20+_0x53f452(0x247)+_0x41abf9+_0x53f452(0x247)+_0x1902c2+_0x53f452(0x269)),_0x4dd7b9[_0x525f20]['storage']=_0x1902c2[0x0],_0x4dd7b9[_0x525f20][_0x53f452(0x288)]=_0x1902c2[0x1],_0x4dd7b9[_0x525f20][_0x53f452(0x241)]=0x0,_0x4dd7b9[_0x525f20][_0x53f452(0x219)]=0x0,_0x4dd7b9[_0x525f20]['to_types']=_0x53f452(0x23f),_0x4dd7b9[_0x525f20][_0x53f452(0x253)]=_0x1902c2[0x3];else{var _0x41b81a;if(_0x1902c2[0x4]=='L')_0x41b81a=_0x53f452(0x228);else _0x1902c2[0x4]=='F'&&(_0x41b81a=_0x53f452(0x23f));_0x4dd7b9[_0x525f20][_0x53f452(0x29c)]=_0x1902c2[0x0],_0x4dd7b9[_0x525f20][_0x53f452(0x288)]=_0x1902c2[0x1],_0x4dd7b9[_0x525f20][_0x53f452(0x241)]=_0x1902c2[0x2],_0x4dd7b9[_0x525f20][_0x53f452(0x219)]=_0x1902c2[0x3],_0x4dd7b9[_0x525f20][_0x53f452(0x240)]=_0x41b81a,_0x4dd7b9[_0x525f20][_0x53f452(0x253)]=_0x1902c2[0x5];}}}}});}),_0x42fece[_0x2f4a92(0x2b2)]((_0x42d13e,_0x216054)=>{_0x4dd7b9[_0x216054]['primary_code']=_0x42d13e;}),_0x3afdb2[_0x2f4a92(0x2b2)]((_0x1e2da0,_0xb6d91a)=>{var _0x2bc916=_0x2f4a92;_0x4dd7b9[_0xb6d91a][_0x2bc916(0x259)]=_0x1e2da0;}),_0x495c90[_0x2f4a92(0x2b2)]((_0x549b3f,_0x366e30)=>{var _0x222bf3=_0x2f4a92;_0x4dd7b9[_0x366e30][_0x222bf3(0x1e4)]=_0x549b3f;}),_0x29e240[_0x2f4a92(0x2b2)]((_0x14dcef,_0xaf81bb)=>{var _0x5cd062=_0x2f4a92;_0x4dd7b9[_0xaf81bb][_0x5cd062(0x227)]=_0x14dcef;}),_0x4b88f2[_0x2f4a92(0x2b2)]((_0x3de903,_0x499c45)=>{var _0x41c4f8=_0x2f4a92;_0x4dd7b9[_0x499c45][_0x41c4f8(0x1e9)]=_0x3de903;}),_0x5d7cf5[_0x2f4a92(0x2b2)]((_0x571dcb,_0x4f6e23)=>{var _0x3ea561=_0x2f4a92;_0x4dd7b9[_0x4f6e23][_0x3ea561(0x1ee)]=_0x571dcb;}),_0x364eb8[_0x2f4a92(0x2b2)]((_0x3761ab,_0x540170)=>{_0x4dd7b9[_0x540170]['batch_code']=_0x3761ab;}),_0x3cf169['forEach']((_0x4364a7,_0x526082)=>{var _0x1d1b88=_0x2f4a92;_0x4dd7b9[_0x526082][_0x1d1b88(0x1e7)]=_0x4364a7;}),_0x53ae7b[_0x2f4a92(0x2b2)]((_0x2f0bf4,_0x119699)=>{_0x4dd7b9[_0x119699]['maxperunit']=_0x2f0bf4;}),_0x360d09[_0x2f4a92(0x2b2)]((_0x1527bf,_0x47b31b)=>{var _0x165e30=_0x2f4a92;_0x4dd7b9[_0x47b31b][_0x165e30(0x28e)]=_0x1527bf;}),_0x7e7b33[_0x2f4a92(0x2b2)]((_0x508f3b,_0x1913dc)=>{var _0x101bfd=_0x2f4a92;_0x4dd7b9[_0x1913dc][_0x101bfd(0x20a)]=_0x508f3b;}),_0x17df6b[_0x2f4a92(0x2b2)]((_0x49469a,_0x51267c)=>{_0x4dd7b9[_0x51267c]['from_room_name']=_0x49469a;}),_0x5034ef[_0x2f4a92(0x2b2)]((_0x1f3b86,_0xea6724)=>{_0x4dd7b9[_0xea6724]['to_room_name']=_0x1f3b86;});const _0x3c44b2=_0x4dd7b9[_0x2f4a92(0x281)](_0x4e4ffa=>_0x4e4ffa[_0x2f4a92(0x243)]!=='0'&&_0x4e4ffa['to_quantity']!==''||_0x4e4ffa[_0x2f4a92(0x253)]!=='0'&&_0x4e4ffa[_0x2f4a92(0x253)]!==''),_0x2cbafc=new transfers({'date':_0x580f38,'from_warehouse':_0x27826a,'to_warehouse':_0x579dfa,'product':_0x3c44b2,'note':_0xb0ce8d,'invoice':_0x4ff9c8}),_0x50eaca=await _0x2cbafc['save']();_0x11e1e8[_0x2f4a92(0x23a)]('success',_0x2f4a92(0x224)),_0x1b090f[_0x2f4a92(0x213)]('/transfer/preview/'+_0x50eaca['_id']);}catch(_0x221d27){console['log'](_0x221d27),_0x1b090f[_0x2f4a92(0x24c)](0xc8)[_0x2f4a92(0x244)]({'errorMessage':_0x221d27[_0x2f4a92(0x1f2)]});}}),router[a0_0xb720ed(0x2c3)](a0_0xb720ed(0x2a0),auth,async(_0x59ddee,_0xd69cac)=>{var _0x3fb4d6=a0_0xb720ed;try{const {username:_0x53ddbc,email:_0x810308,role:_0x412fba}=_0x59ddee[_0x3fb4d6(0x294)],_0x484dd9=_0x59ddee[_0x3fb4d6(0x294)],_0x2677e5=await profile['findOne']({'email':_0x484dd9[_0x3fb4d6(0x22e)]}),_0x4692ae=await master_shop['find']();console[_0x3fb4d6(0x238)](_0x3fb4d6(0x272),_0x4692ae);const _0x6ff2f2=await transfers[_0x3fb4d6(0x29f)](_0x59ddee[_0x3fb4d6(0x29a)]['id']);let _0x242ec3=new Date(_0x6ff2f2[_0x3fb4d6(0x1e7)]),_0x426547=('0'+_0x242ec3['getDate']())[_0x3fb4d6(0x2c1)](-0x2),_0x4db8a1=('0'+(_0x242ec3['getMonth']()+0x1))[_0x3fb4d6(0x2c1)](-0x2),_0x122c4d=_0x242ec3['getFullYear'](),_0x1ec714=_0x122c4d+'-'+_0x4db8a1+'-'+_0x426547,_0xf27a41;if(_0x484dd9[_0x3fb4d6(0x22d)]==_0x3fb4d6(0x28b)){const _0x19f6a9=await staff[_0x3fb4d6(0x1f4)]({'email':_0x484dd9[_0x3fb4d6(0x22e)]});_0xf27a41=await warehouse[_0x3fb4d6(0x252)]({'status':_0x3fb4d6(0x1e1),'name':_0x19f6a9[_0x3fb4d6(0x245)],'warehouse_category':_0x3fb4d6(0x2ac)});}else _0xf27a41=await warehouse['find']({'status':_0x3fb4d6(0x1e1),'warehouse_category':_0x3fb4d6(0x2ac)});const _0x3d0e0b=await warehouse[_0x3fb4d6(0x2b9)]([{'$match':{'name':_0x6ff2f2[_0x3fb4d6(0x1ce)]}},{'$unwind':_0x3fb4d6(0x230)},{'$group':{'_id':_0x3fb4d6(0x1f6),'name':{'$first':_0x3fb4d6(0x214)},'product_stock':{'$first':_0x3fb4d6(0x211)},'bay':{'$first':_0x3fb4d6(0x27c)},'bin':{'$first':_0x3fb4d6(0x1dc)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x3fb4d6(0x1f7)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3fb4d6(0x233)},'storage':{'$first':_0x3fb4d6(0x271)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x3fb4d6(0x1eb)},'production_date':{'$first':_0x3fb4d6(0x295)},'room':{'$first':'$room'}}}]);if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]=='English\x20(US)'){var _0x33088e=users[_0x3fb4d6(0x21a)];console[_0x3fb4d6(0x238)](_0x33088e);}else{if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]==_0x3fb4d6(0x2a8))var _0x33088e=users['Hindi'];else{if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]==_0x3fb4d6(0x2a5))var _0x33088e=users['German'];else{if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]=='Spanish')var _0x33088e=users[_0x3fb4d6(0x25a)];else{if(_0x4692ae[0x0]['language']==_0x3fb4d6(0x1db))var _0x33088e=users['French'];else{if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]=='Portuguese\x20(BR)')var _0x33088e=users['Portuguese'];else{if(_0x4692ae[0x0][_0x3fb4d6(0x26c)]==_0x3fb4d6(0x275))var _0x33088e=users[_0x3fb4d6(0x275)];else{if(_0x4692ae[0x0]['language']==_0x3fb4d6(0x203))var _0x33088e=users[_0x3fb4d6(0x260)];}}}}}}}_0xd69cac[_0x3fb4d6(0x239)](_0x3fb4d6(0x215),{'success':_0x59ddee[_0x3fb4d6(0x23a)]('success'),'errors':_0x59ddee[_0x3fb4d6(0x23a)](_0x3fb4d6(0x284)),'role':_0x484dd9,'profile':_0x2677e5,'master_shop':_0x4692ae,'warehouse':_0xf27a41,'transfer':_0x6ff2f2,'stock':_0x3d0e0b,'language':_0x33088e});}catch(_0x1e2d3d){console[_0x3fb4d6(0x238)](_0x1e2d3d);}}),router[a0_0xb720ed(0x23b)](a0_0xb720ed(0x2a0),auth,async(_0x2cd3dd,_0x3ce8fa)=>{var _0x3dc3f3=a0_0xb720ed;try{const _0x2184de=_0x2cd3dd['params']['id'],{from_warehouse:_0x5e829c,FromRoom_name:_0x436729,to_warehouse:_0x1c4195,ToRoom_name:_0x5b1dd4}=_0x2cd3dd[_0x3dc3f3(0x1cd)],_0x5a908c=await transfers['findById']({'_id':_0x2184de}),_0x4585c7=_0x5a908c['product'][_0x3dc3f3(0x1d5)](async _0x2580b5=>{var _0x19b9e9=_0x3dc3f3;if(_0x2580b5['to_quantity']>0x0){var _0x2f965f=await warehouse['findOne']({'name':_0x5a908c[_0x19b9e9(0x1ce)],'room':_0x2580b5[_0x19b9e9(0x257)],'warehouse_category':_0x19b9e9(0x2ac)});const _0x558f09=_0x2f965f[_0x19b9e9(0x24b)]['map'](_0x5dc6e6=>{var _0x5bd93c=_0x19b9e9;_0x5dc6e6[_0x5bd93c(0x274)]==_0x2580b5[_0x5bd93c(0x274)]&&_0x5dc6e6[_0x5bd93c(0x20b)]==_0x2580b5[_0x5bd93c(0x2bd)]&&_0x5dc6e6[_0x5bd93c(0x1df)]==_0x2580b5['from_types']&&_0x5dc6e6[_0x5bd93c(0x2b3)]==_0x2580b5['from_bin']&&_0x5dc6e6['bay']==_0x2580b5[_0x5bd93c(0x1ff)]&&_0x5dc6e6['rack']==_0x2580b5[_0x5bd93c(0x251)]&&_0x5dc6e6[_0x5bd93c(0x29c)]==_0x2580b5[_0x5bd93c(0x279)]&&_0x5dc6e6[_0x5bd93c(0x1e7)]==_0x2580b5[_0x5bd93c(0x1e7)]&&_0x5dc6e6[_0x5bd93c(0x237)]==_0x2580b5[_0x5bd93c(0x237)]&&_0x5dc6e6[_0x5bd93c(0x28e)]==_0x2580b5[_0x5bd93c(0x28e)]&&_0x5dc6e6['invoice']==_0x2580b5[_0x5bd93c(0x2bf)]&&_0x5dc6e6[_0x5bd93c(0x1e3)]==_0x2580b5[_0x5bd93c(0x254)]&&(_0x5dc6e6[_0x5bd93c(0x23c)]=_0x5dc6e6[_0x5bd93c(0x23c)]-_0x2580b5[_0x5bd93c(0x243)]);});}return _0x2f965f;});Promise['all'](_0x4585c7)[_0x3dc3f3(0x21d)](async _0xf8d3ed=>{var _0x17a03b=_0x3dc3f3;try{for(const _0x2b8845 of _0xf8d3ed){await _0x2b8845['save']();}try{const _0xfb9ee4=_0x5a908c[_0x17a03b(0x285)][_0x17a03b(0x1d5)](async _0x23d336=>{var _0x4ba683=_0x17a03b;if(_0x23d336[_0x4ba683(0x243)]>0x0){var _0x189e77=await warehouse['findOne']({'name':_0x5a908c[_0x4ba683(0x1d4)],'room':_0x23d336['to_room_name'],'warehouse_category':_0x4ba683(0x2ac)}),_0x2bf16a=0x0;const _0x2d4dad=_0x189e77['product_details']['map'](_0x804284=>{var _0x3ad9b2=_0x4ba683;_0x804284[_0x3ad9b2(0x274)]==_0x23d336['product_name']&&_0x804284[_0x3ad9b2(0x20b)]==_0x23d336[_0x3ad9b2(0x253)]&&_0x804284[_0x3ad9b2(0x1df)]==_0x23d336[_0x3ad9b2(0x240)]&&_0x804284['bin']==_0x23d336[_0x3ad9b2(0x219)]&&_0x804284['bay']==_0x23d336[_0x3ad9b2(0x241)]&&_0x804284[_0x3ad9b2(0x288)]==_0x23d336[_0x3ad9b2(0x288)]&&_0x804284['storage']==_0x23d336[_0x3ad9b2(0x29c)]&&_0x804284[_0x3ad9b2(0x1e7)]==_0x23d336[_0x3ad9b2(0x1e7)]&&_0x804284[_0x3ad9b2(0x237)]==_0x23d336[_0x3ad9b2(0x237)]&&_0x804284[_0x3ad9b2(0x28e)]==_0x23d336[_0x3ad9b2(0x28e)]&&_0x804284[_0x3ad9b2(0x1f9)]==_0x23d336[_0x3ad9b2(0x1d0)]&&(_0x804284[_0x3ad9b2(0x23c)]=_0x804284[_0x3ad9b2(0x23c)]+_0x23d336['to_quantity'],_0x2bf16a++);});_0x2bf16a=='0'&&(_0x189e77[_0x4ba683(0x24b)]=_0x189e77[_0x4ba683(0x24b)][_0x4ba683(0x235)]({'product_name':_0x23d336[_0x4ba683(0x274)],'product_stock':_0x23d336['to_quantity'],'bay':_0x23d336[_0x4ba683(0x241)],'bin':_0x23d336[_0x4ba683(0x219)],'type':_0x23d336['to_types'],'floorlevel':_0x23d336[_0x4ba683(0x253)],'storage':_0x23d336[_0x4ba683(0x29c)],'rack':_0x23d336[_0x4ba683(0x288)],'product_code':_0x23d336[_0x4ba683(0x1e4)],'primary_code':_0x23d336[_0x4ba683(0x2a4)],'secondary_code':_0x23d336[_0x4ba683(0x259)],'maxProducts':_0x23d336[_0x4ba683(0x227)],'storage':_0x23d336['storage'],'rack':_0x23d336[_0x4ba683(0x288)],'expiry_date':_0x23d336[_0x4ba683(0x1e7)],'maxPerUnit':_0x23d336[_0x4ba683(0x1fa)],'batch_code':_0x23d336['batch_code'],'production_date':_0x23d336[_0x4ba683(0x28e)]}));}return _0x189e77;});Promise['all'](_0xfb9ee4)['then'](async _0x5b4ad3=>{var _0x3df50f=_0x17a03b;try{for(const _0x23a265 of _0x5b4ad3){await warehouse[_0x3df50f(0x1e0)]({'_id':_0x23a265[_0x3df50f(0x1e3)]},{'$addToSet':{'product_details':{'$each':_0x23a265[_0x3df50f(0x24b)]}}});}_0x5a908c[_0x3df50f(0x218)]=_0x3df50f(0x1f3);const _0x2e3028=await _0x5a908c[_0x3df50f(0x1d1)](),_0x55d824=await master_shop[_0x3df50f(0x252)](),_0x4a8029=await email_settings[_0x3df50f(0x1f4)](),_0x457107=await supervisor_settings[_0x3df50f(0x252)]();var _0x4bf4e2=_0x5a908c['product'],_0x1a302a='',_0x2a2ac1;for(_0x2a2ac1 in _0x4bf4e2){_0x1a302a+='<tr>'+_0x3df50f(0x266)+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x274)]+_0x3df50f(0x1f0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4bf4e2[_0x2a2ac1]['product_code']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4bf4e2[_0x2a2ac1]['to_quantity']+_0x3df50f(0x1f0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x1e9)]+_0x3df50f(0x1f0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x1ee)]+'</td>'+_0x3df50f(0x266)+_0x5a908c[_0x3df50f(0x1d4)]+_0x3df50f(0x1f0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x216)]+_0x3df50f(0x1f0)+_0x3df50f(0x266)+_0x4bf4e2[_0x2a2ac1]['storage']+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x288)]+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x241)]+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x219)]+_0x4bf4e2[_0x2a2ac1]['to_types'][0x0]+_0x4bf4e2[_0x2a2ac1][_0x3df50f(0x253)]+_0x3df50f(0x1f0),_0x3df50f(0x27b);}let _0x56188f=nodemailer[_0x3df50f(0x1d3)]({'host':_0x4a8029[_0x3df50f(0x205)],'port':Number(_0x4a8029[_0x3df50f(0x217)]),'secure':![],'auth':{'user':_0x4a8029[_0x3df50f(0x22e)],'pass':_0x4a8029[_0x3df50f(0x1cf)]}}),_0xc56a62={'from':_0x4a8029['email'],'to':_0x457107[0x0][_0x3df50f(0x26d)],'subject':_0x3df50f(0x2bc),'attachments':[{'filename':_0x3df50f(0x258),'path':__dirname+_0x3df50f(0x21e)+_0x3df50f(0x1fb)+_0x55d824[0x0]['image'],'cid':_0x3df50f(0x236)}],'html':_0x3df50f(0x2b1)+_0x3df50f(0x297)+_0x3df50f(0x277)+_0x3df50f(0x201)+_0x3df50f(0x1e5)+_0x3df50f(0x201)+_0x3df50f(0x1e2)+_0x3df50f(0x276)+'<div>'+_0x3df50f(0x28d)+_0x55d824[0x0][_0x3df50f(0x270)]+'\x20</h2>'+_0x3df50f(0x276)+_0x3df50f(0x276)+_0x3df50f(0x249)+_0x3df50f(0x201)+_0x3df50f(0x20c)+_0x3df50f(0x1cc)+_0x5a908c[_0x3df50f(0x1f9)]+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+'\x20Order\x20Date\x20:\x20'+_0x5a908c['date']+'\x20'+_0x3df50f(0x226)+_0x3df50f(0x2a2)+_0x3df50f(0x276)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x3df50f(0x2b7)+_0x3df50f(0x1d9)+_0x3df50f(0x27e)+_0x3df50f(0x26e)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x3df50f(0x278)+_0x3df50f(0x25d)+_0x3df50f(0x1f1)+_0x3df50f(0x296)+_0x3df50f(0x2b8)+_0x3df50f(0x27b)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x1a302a+'\x20'+_0x3df50f(0x22c)+'</table>'+_0x3df50f(0x201)+_0x3df50f(0x207)+_0x3df50f(0x29b)+_0x55d824[0x0][_0x3df50f(0x270)]+'</h5>'+_0x3df50f(0x276)+'</div>'+_0x3df50f(0x1ec)};_0x56188f[_0x3df50f(0x24e)](_0xc56a62,function(_0x344fbf,_0x50dc9a){var _0x267489=_0x3df50f;_0x344fbf?(console[_0x267489(0x238)](_0x344fbf),console[_0x267489(0x238)](_0x267489(0x264))):console[_0x267489(0x238)](_0x267489(0x225));}),_0x2cd3dd[_0x3df50f(0x23a)]('success',_0x3df50f(0x291)),_0x3ce8fa[_0x3df50f(0x213)]('/picking_list/PDF_transfer_rm/'+_0x2e3028[_0x3df50f(0x1e3)]);}catch(_0x71459c){console[_0x3df50f(0x231)](_0x71459c),_0x3ce8fa[_0x3df50f(0x24c)](0x1f4)[_0x3df50f(0x244)]({'Perror':_0x3df50f(0x212),'message':_0x71459c['message']});}})[_0x17a03b(0x21f)](_0x329f2a=>{var _0x1447de=_0x17a03b;console[_0x1447de(0x231)](_0x329f2a),_0x3ce8fa[_0x1447de(0x24c)](0x1f4)[_0x1447de(0x244)]({'Perror':_0x1447de(0x1e8)});});}catch(_0xd35a6b){_0x3ce8fa[_0x17a03b(0x244)](_0xd35a6b);}}catch(_0xcb7e35){console[_0x17a03b(0x231)](_0xcb7e35),_0x3ce8fa[_0x17a03b(0x24c)](0x1f4)[_0x17a03b(0x244)]({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0xcb7e35[_0x17a03b(0x1f2)]});}})[_0x3dc3f3(0x21f)](_0x1abc10=>{var _0x3208c5=_0x3dc3f3;console[_0x3208c5(0x231)](_0x1abc10),_0x3ce8fa[_0x3208c5(0x24c)](0x1f4)[_0x3208c5(0x244)]({'Merror':_0x3208c5(0x1e8)});});}catch(_0x5c33b8){console[_0x3dc3f3(0x238)](_0x5c33b8);}});function BayBinSelected(_0xfd7cbd,_0x4bf5cb){var _0x410f5e=a0_0xb720ed,_0x44b325=[],_0x322508=[],_0xbb7bf3=[],_0xadcebc=[],_0x12d519=[],_0x34115c=[];let _0x102086=[];if(_0xfd7cbd==_0x410f5e(0x1ed))switch(_0x4bf5cb){case _0x410f5e(0x208):_0x44b325=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x322508=[0x1,0x2],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228),_0x410f5e(0x23f)],_0x12d519=['D'],_0x34115c=['A'];break;case _0x410f5e(0x26b):_0x44b325=[0x6,0x5,0x4,0x3,0x2,0x1],_0x322508=[0x1,0x2],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=['Level','Floor'],_0x12d519=['D'],_0x34115c=['B'];break;case'Shelves':_0x44b325=[0x0],_0x322508=[0x0],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x23f)],_0x12d519=['D'],_0x34115c=['S'];break;case _0x410f5e(0x21b):_0x44b325=[0x0],_0x322508=[0x0],_0xadcebc=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0xbb7bf3=[_0x410f5e(0x23f)],_0x12d519=['D'],_0x34115c=['R'];break;}else{if(_0xfd7cbd==_0x410f5e(0x25f))switch(_0x4bf5cb){case'Rack\x20A':_0x44b325=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x322508=['B','F'],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228),'Floor'],_0x12d519=['C'],_0x34115c=['A'];break;case'Rack\x20B':_0x44b325=[0x5,0x4,0x3,0x2,0x1],_0x322508=['F','B','S'],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228),_0x410f5e(0x23f)],_0x12d519=['C'],_0x34115c=['B'];break;case _0x410f5e(0x287):_0x44b325=[0x1,0x2,0x3,0x4,0x5],_0x322508=['B','F','S'],_0xadcebc=[0x5,0x4,0x3,0x2,0x1],_0xbb7bf3=[_0x410f5e(0x228),_0x410f5e(0x23f)],_0x12d519=['C'],_0x34115c=['C'];break;case _0x410f5e(0x1d2):_0x44b325=[0x5,0x4,0x3,0x2,0x1],_0x322508=['F','B','S'],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228),_0x410f5e(0x23f)],_0x12d519=['C'],_0x34115c=['D'];break;case _0x410f5e(0x2b4):_0x44b325=[0x4,0x3,0x2,0x1],_0x322508=[0x1,0x2],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228),_0x410f5e(0x23f)],_0x12d519=['C'],_0x34115c=['E'];break;case _0x410f5e(0x250):_0x44b325=[0x1,0x2,0x3],_0x322508=[0x1,0x2],_0xadcebc=[0x1,0x2,0x3,0x4,0x5],_0xbb7bf3=[_0x410f5e(0x228)],_0x12d519=['C'],_0x34115c=['F'];break;}}return{'levels':_0x44b325,'Isle':_0x322508,'rack':_0xadcebc,'type':_0xbb7bf3,'storage':_0x12d519,'rak':_0x34115c};}router['get'](a0_0xb720ed(0x292),auth,async(_0x372c77,_0xe39a45)=>{var _0x18f14e=a0_0xb720ed;try{const {username:_0x2d8531,email:_0x93da44,role:_0x1a1a4b}=_0x372c77['user'],_0x4facd1=_0x372c77[_0x18f14e(0x294)],_0x511e8a=await profile[_0x18f14e(0x1f4)]({'email':_0x4facd1[_0x18f14e(0x22e)]}),_0x596711=await master_shop[_0x18f14e(0x252)](),_0x285ccd=await transfers[_0x18f14e(0x29f)](_0x372c77[_0x18f14e(0x29a)]['id']);let _0x3c8159;if(_0x4facd1[_0x18f14e(0x22d)]==_0x18f14e(0x28b)){const _0x2c09f7=await staff[_0x18f14e(0x1f4)]({'email':_0x4facd1['email']});_0x3c8159=await warehouse['aggregate']([{'$match':{'status':_0x18f14e(0x1e1),'name':_0x2c09f7[_0x18f14e(0x245)],'warehouse_category':_0x18f14e(0x2ac)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x3c8159=await warehouse[_0x18f14e(0x2b9)]([{'$match':{'status':_0x18f14e(0x1e1),'warehouse_category':_0x18f14e(0x2ac)}},{'$group':{'_id':_0x18f14e(0x209),'name':{'$first':_0x18f14e(0x209)}}}]);const _0x552dfd=await warehouse['aggregate']([{'$match':{'name':_0x285ccd[_0x18f14e(0x1ce)],'warehouse_category':_0x18f14e(0x2ac)}},{'$unwind':_0x18f14e(0x230)},{'$group':{'_id':_0x18f14e(0x1f6),'name':{'$first':_0x18f14e(0x214)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x18f14e(0x26f)},'floorlevel':{'$first':_0x18f14e(0x206)},'primary_code':{'$first':_0x18f14e(0x1f7)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x18f14e(0x233)},'storage':{'$first':_0x18f14e(0x271)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x18f14e(0x1eb)},'production_date':{'$first':_0x18f14e(0x295)},'room':{'$first':_0x18f14e(0x268)}}}]),_0x5661a9=await product[_0x18f14e(0x252)]({}),_0x1be71d=BayBinSelected(_0x285ccd[_0x18f14e(0x1d4)],_0x285ccd[_0x18f14e(0x21c)]);if(_0x596711[0x0]['language']==_0x18f14e(0x22b)){var _0x33753d=users['English'];console[_0x18f14e(0x238)](_0x33753d);}else{if(_0x596711[0x0][_0x18f14e(0x26c)]==_0x18f14e(0x2a8))var _0x33753d=users['Hindi'];else{if(_0x596711[0x0]['language']==_0x18f14e(0x2a5))var _0x33753d=users[_0x18f14e(0x2a5)];else{if(_0x596711[0x0][_0x18f14e(0x26c)]==_0x18f14e(0x25a))var _0x33753d=users[_0x18f14e(0x25a)];else{if(_0x596711[0x0][_0x18f14e(0x26c)]=='French')var _0x33753d=users[_0x18f14e(0x1db)];else{if(_0x596711[0x0][_0x18f14e(0x26c)]==_0x18f14e(0x1f5))var _0x33753d=users[_0x18f14e(0x2ba)];else{if(_0x596711[0x0]['language']==_0x18f14e(0x275))var _0x33753d=users[_0x18f14e(0x275)];else{if(_0x596711[0x0][_0x18f14e(0x26c)]==_0x18f14e(0x203))var _0x33753d=users[_0x18f14e(0x260)];}}}}}}}_0xe39a45[_0x18f14e(0x239)](_0x18f14e(0x2bb),{'success':_0x372c77[_0x18f14e(0x23a)](_0x18f14e(0x2a6)),'errors':_0x372c77['flash'](_0x18f14e(0x284)),'role':_0x4facd1,'profile':_0x511e8a,'master_shop':_0x596711,'warehouse':_0x3c8159,'transfer':_0x285ccd,'stock':_0x552dfd,'unit':_0x5661a9,'language':_0x33753d});}catch(_0x120098){console[_0x18f14e(0x238)](_0x120098);}}),router[a0_0xb720ed(0x23b)](a0_0xb720ed(0x292),auth,async(_0x5dcc32,_0x279074)=>{var _0x26b7cf=a0_0xb720ed;try{const _0x1f5c36=_0x5dcc32[_0x26b7cf(0x29a)]['id'],_0x3414ce=await transfers[_0x26b7cf(0x29f)](_0x1f5c36);_0x279074[_0x26b7cf(0x244)](_0x5dcc32[_0x26b7cf(0x1cd)]);return;const {date:_0x4b6393,from_warehouse:_0x365356,FromRoom_name:_0x324e88,to_warehouse:_0x590cf,ToRoom_name:_0xada4ac,prod_name:_0x3f2841,from_prod_qty:_0x113a6a,from_prod_level:_0x583496,from_prod_isle:_0x2bda1f,from_prod_pallet:_0x424b4b,to_prod_qty:_0x5f2467,to_prod_level:_0x5a5393,to_prod_isle:_0x5b3d54,to_prod_pallet:_0x463ade,primary_code:_0x260662,secondary_code:_0xdfdc49,product_code3:_0x968aa,note:_0x1e5536,invoice:_0x3bcba0,expiry_date:_0x4a5be0}=_0x5dcc32['body'];if(typeof _0x3f2841==_0x26b7cf(0x283))var _0x2c6ab1=[_0x5dcc32['body'][_0x26b7cf(0x26a)]],_0x4469e3=[_0x5dcc32[_0x26b7cf(0x1cd)]['from_prod_qty']],_0xabb572=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x20d)]],_0x2d1d0a=[_0x5dcc32[_0x26b7cf(0x1cd)]['from_prod_isle']],_0x4bf6c4=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x2a9)]],_0x442c35=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1dd)]],_0x3fecfd=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x229)]],_0x1db662=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x289)]],_0x41b2c1=[_0x5dcc32[_0x26b7cf(0x1cd)]['to_prod_isle']],_0x1f54d0=[_0x5dcc32[_0x26b7cf(0x1cd)]['to_prod_pallet']],_0x1887a5=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x240)]],_0x53a7b9=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x29c)]],_0xd78901=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x262)]],_0x4ef473=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x2a4)]],_0x99c1be=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x259)]],_0x2c0466=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1e6)]],_0x2044dd=[_0x5dcc32['body'][_0x26b7cf(0x222)]],_0x5ac90d=[_0x5dcc32[_0x26b7cf(0x1cd)]['unit']],_0x458c1f=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1ee)]],_0x4d0d7b=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x237)]],_0x214555=[_0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1e7)]],_0x28227e=[_0x5dcc32['body'][_0x26b7cf(0x279)]],_0x1fffb4=[_0x5dcc32[_0x26b7cf(0x1cd)]['from_rak']];else var _0x2c6ab1=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x26a)]],_0x53a7b9=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x29c)]],_0xd78901=[..._0x5dcc32['body'][_0x26b7cf(0x262)]],_0x442c35=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1dd)]],_0x1887a5=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x240)]],_0x4469e3=[..._0x5dcc32[_0x26b7cf(0x1cd)]['from_prod_qty']],_0xabb572=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x20d)]],_0x2d1d0a=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x282)]],_0x4bf6c4=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x2a9)]],_0x3fecfd=[..._0x5dcc32['body'][_0x26b7cf(0x229)]],_0x1db662=[..._0x5dcc32[_0x26b7cf(0x1cd)]['to_prod_level']],_0x41b2c1=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x2c5)]],_0x1f54d0=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x290)]],_0x4ef473=[..._0x5dcc32[_0x26b7cf(0x1cd)]['primary_code']],_0x99c1be=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x259)]],_0x2c0466=[..._0x5dcc32['body'][_0x26b7cf(0x1e6)]],_0x2044dd=[..._0x5dcc32['body'][_0x26b7cf(0x222)]],_0x5ac90d=[..._0x5dcc32[_0x26b7cf(0x1cd)]['unit']],_0x458c1f=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x1ee)]],_0x4d0d7b=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x237)]],_0x214555=[..._0x5dcc32['body']['expiry_date']],_0x28227e=[..._0x5dcc32[_0x26b7cf(0x1cd)]['from_storage']],_0x1fffb4=[..._0x5dcc32[_0x26b7cf(0x1cd)][_0x26b7cf(0x29e)]];const _0x2cdbe0=_0x2c6ab1[_0x26b7cf(0x1d5)](_0x49940a=>{return _0x49940a={'product_name':_0x49940a};});_0x4469e3[_0x26b7cf(0x2b2)]((_0x151740,_0x4eb114)=>{_0x2cdbe0[_0x4eb114]['from_quantity']=_0x151740;}),_0xabb572[_0x26b7cf(0x2b2)]((_0x1a991c,_0x44315b)=>{var _0x4f36c4=_0x26b7cf;_0x2cdbe0[_0x44315b][_0x4f36c4(0x1ff)]=_0x1a991c;}),_0x2d1d0a[_0x26b7cf(0x2b2)]((_0x34d95a,_0x2a89e2)=>{_0x2cdbe0[_0x2a89e2]['from_bin']=_0x34d95a;}),_0x4bf6c4['forEach']((_0x3af94d,_0x5cf906)=>{var _0x4621bc=_0x26b7cf;_0x2cdbe0[_0x5cf906][_0x4621bc(0x2bd)]=_0x3af94d;}),_0x3fecfd[_0x26b7cf(0x2b2)]((_0x1d1d1c,_0x2e895a)=>{var _0x1e675f=_0x26b7cf;_0x2cdbe0[_0x2e895a][_0x1e675f(0x243)]=_0x1d1d1c;}),_0x1db662['forEach']((_0x248bb6,_0x4b139c)=>{var _0x296728=_0x26b7cf;_0x2cdbe0[_0x4b139c][_0x296728(0x241)]=_0x248bb6;}),_0x41b2c1['forEach']((_0x574fbc,_0xfadedc)=>{var _0x28366d=_0x26b7cf;_0x2cdbe0[_0xfadedc][_0x28366d(0x219)]=_0x574fbc;}),_0x1f54d0[_0x26b7cf(0x2b2)]((_0x299c63,_0x2e51ad)=>{var _0x578086=_0x26b7cf;_0x2cdbe0[_0x2e51ad][_0x578086(0x253)]=_0x299c63;}),_0x4ef473[_0x26b7cf(0x2b2)]((_0x241f3d,_0x437cae)=>{var _0x568c68=_0x26b7cf;_0x2cdbe0[_0x437cae][_0x568c68(0x2a4)]=_0x241f3d;}),_0x99c1be[_0x26b7cf(0x2b2)]((_0x4f4766,_0x3a416e)=>{var _0x1f19d7=_0x26b7cf;_0x2cdbe0[_0x3a416e][_0x1f19d7(0x259)]=_0x4f4766;}),_0x2c0466[_0x26b7cf(0x2b2)]((_0x3d045f,_0x4c2d37)=>{_0x2cdbe0[_0x4c2d37]['product_code']=_0x3d045f;}),_0x2044dd['forEach']((_0x579101,_0x455cf7)=>{var _0x749de8=_0x26b7cf;_0x2cdbe0[_0x455cf7][_0x749de8(0x227)]=_0x579101;}),_0x5ac90d['forEach']((_0x3e31e1,_0x53648f)=>{var _0x3329ed=_0x26b7cf;_0x2cdbe0[_0x53648f][_0x3329ed(0x1e9)]=_0x3e31e1;}),_0x458c1f['forEach']((_0x3da4f7,_0x31150d)=>{var _0x9db186=_0x26b7cf;_0x2cdbe0[_0x31150d][_0x9db186(0x1ee)]=_0x3da4f7;}),_0x4d0d7b['forEach']((_0x9582ea,_0x5120fe)=>{var _0x37f859=_0x26b7cf;_0x2cdbe0[_0x5120fe][_0x37f859(0x237)]=_0x9582ea;}),_0x214555['forEach']((_0x1ab9cf,_0x43b565)=>{_0x2cdbe0[_0x43b565]['expiry_date']=_0x1ab9cf;}),_0x53a7b9[_0x26b7cf(0x2b2)]((_0x1a04fe,_0x524fff)=>{var _0x1e9e40=_0x26b7cf;_0x2cdbe0[_0x524fff][_0x1e9e40(0x29c)]=_0x1a04fe;}),_0xd78901[_0x26b7cf(0x2b2)]((_0x43c201,_0x2b516f)=>{var _0x5bea05=_0x26b7cf;_0x2cdbe0[_0x2b516f][_0x5bea05(0x288)]=_0x43c201;}),_0x442c35[_0x26b7cf(0x2b2)]((_0x29b987,_0x7b3faf)=>{var _0x37b73b=_0x26b7cf;_0x2cdbe0[_0x7b3faf][_0x37b73b(0x1dd)]=_0x29b987;}),_0x1887a5[_0x26b7cf(0x2b2)]((_0x422e3d,_0x52fea3)=>{_0x2cdbe0[_0x52fea3]['to_types']=_0x422e3d;}),_0x28227e[_0x26b7cf(0x2b2)]((_0x5d2db2,_0x2c66be)=>{var _0x1c3f25=_0x26b7cf;_0x2cdbe0[_0x2c66be][_0x1c3f25(0x279)]=_0x5d2db2;}),_0x1fffb4[_0x26b7cf(0x2b2)]((_0x42bc1a,_0x36bbe4)=>{var _0x55accd=_0x26b7cf;_0x2cdbe0[_0x36bbe4][_0x55accd(0x251)]=_0x42bc1a;});const _0x5ed827=_0x2cdbe0[_0x26b7cf(0x281)](_0x48caa9=>_0x48caa9[_0x26b7cf(0x243)]!=='0'&&_0x48caa9['to_quantity']!==''||_0x48caa9[_0x26b7cf(0x253)]!=='0'&&_0x48caa9[_0x26b7cf(0x253)]!=='');var _0xa3d6b8=0x0;_0x5ed827[_0x26b7cf(0x2b2)](_0x22e69c=>{var _0x1359e6=_0x26b7cf;parseInt(_0x22e69c[_0x1359e6(0x1f8)])<parseInt(_0x22e69c[_0x1359e6(0x243)])&&_0xa3d6b8++;});if(_0xa3d6b8!=0x0)return _0x5dcc32[_0x26b7cf(0x23a)]('errors',_0x26b7cf(0x2c2)),_0x279074['redirect']('back');const _0x2329d1=await warehouse['findOne']({'name':_0x3414ce['from_warehouse'],'room':_0x3414ce['from_room']});_0x3414ce[_0x26b7cf(0x285)][_0x26b7cf(0x2b2)](_0x332748=>{var _0x1db051=_0x26b7cf;if(_0x332748['to_quantity']>0x0){const _0x31c3f9=_0x2329d1[_0x1db051(0x24b)][_0x1db051(0x1d5)](_0x479feb=>{var _0x2c0ee3=_0x1db051;_0x479feb[_0x2c0ee3(0x274)]==_0x332748[_0x2c0ee3(0x274)]&&_0x479feb[_0x2c0ee3(0x20b)]==_0x332748[_0x2c0ee3(0x2bd)]&&_0x479feb[_0x2c0ee3(0x1df)]==_0x332748['from_types']&&_0x479feb[_0x2c0ee3(0x2b3)]==_0x332748[_0x2c0ee3(0x232)]&&_0x479feb['bay']==_0x332748[_0x2c0ee3(0x1ff)]&&_0x479feb[_0x2c0ee3(0x288)]==_0x332748[_0x2c0ee3(0x251)]&&_0x479feb[_0x2c0ee3(0x29c)]==_0x332748[_0x2c0ee3(0x279)]&&(_0x479feb[_0x2c0ee3(0x23c)]=parseInt(_0x479feb[_0x2c0ee3(0x23c)])+parseInt(_0x332748[_0x2c0ee3(0x243)]));});}}),await _0x2329d1[_0x26b7cf(0x1d1)]();const _0x439309=await warehouse['findOne']({'name':_0x3414ce[_0x26b7cf(0x1d4)],'room':_0x3414ce[_0x26b7cf(0x21c)]});_0x3414ce['product'][_0x26b7cf(0x2b2)](_0x34b396=>{var _0x5005ff=_0x26b7cf;if(_0x34b396['to_quantity']>0x0){const _0x500c09=_0x439309[_0x5005ff(0x24b)][_0x5005ff(0x1d5)](_0xf41f78=>{var _0x10cc04=_0x5005ff;_0xf41f78[_0x10cc04(0x274)]==_0x34b396[_0x10cc04(0x274)]&&_0xf41f78[_0x10cc04(0x20b)]==_0x34b396[_0x10cc04(0x253)]&&_0xf41f78[_0x10cc04(0x1df)]==_0x34b396[_0x10cc04(0x240)]&&_0xf41f78[_0x10cc04(0x2b3)]==_0x34b396[_0x10cc04(0x219)]&&_0xf41f78[_0x10cc04(0x29d)]==_0x34b396['to_bay']&&_0xf41f78[_0x10cc04(0x288)]==_0x34b396[_0x10cc04(0x288)]&&_0xf41f78['storage']==_0x34b396[_0x10cc04(0x29c)]&&(_0xf41f78[_0x10cc04(0x23c)]=parseInt(_0xf41f78[_0x10cc04(0x23c)])-parseInt(_0x34b396[_0x10cc04(0x243)]));});}}),await _0x439309['save'](),_0x3414ce['date']=_0x4b6393,_0x3414ce[_0x26b7cf(0x1ce)]=_0x365356,_0x3414ce[_0x26b7cf(0x1d4)]=_0x590cf,_0x3414ce[_0x26b7cf(0x285)]=_0x5ed827,_0x3414ce[_0x26b7cf(0x27a)]=_0x1e5536,_0x3414ce[_0x26b7cf(0x1f9)]=_0x3bcba0;const _0x4b9c36=await _0x3414ce[_0x26b7cf(0x1d1)]();console[_0x26b7cf(0x238)](_0x4b9c36);const _0x4c3672=await warehouse[_0x26b7cf(0x1f4)]({'name':_0x365356,'room':_0x324e88});_0x4b9c36[_0x26b7cf(0x285)][_0x26b7cf(0x2b2)](_0x5616a3=>{var _0x5042ac=_0x26b7cf;if(_0x5616a3['to_quantity']>0x0){const _0x5743c8=_0x4c3672[_0x5042ac(0x24b)][_0x5042ac(0x1d5)](_0x154ba4=>{var _0x571302=_0x5042ac;_0x154ba4['product_name']==_0x5616a3[_0x571302(0x274)]&&_0x154ba4['floorlevel']==_0x5616a3[_0x571302(0x2bd)]&&_0x154ba4['type']==_0x5616a3['from_types']&&_0x154ba4[_0x571302(0x2b3)]==_0x5616a3[_0x571302(0x232)]&&_0x154ba4['bay']==_0x5616a3['from_bay']&&_0x154ba4[_0x571302(0x288)]==_0x5616a3[_0x571302(0x251)]&&_0x154ba4[_0x571302(0x29c)]==_0x5616a3[_0x571302(0x279)]&&(_0x154ba4[_0x571302(0x23c)]=parseInt(_0x154ba4[_0x571302(0x23c)])-parseInt(_0x5616a3[_0x571302(0x243)]));});}}),await _0x4c3672[_0x26b7cf(0x1d1)]();const _0x3ba32b=await warehouse['findOne']({'name':_0x590cf,'room':_0xada4ac});_0x4b9c36[_0x26b7cf(0x285)]['forEach'](_0x57a68c=>{var _0xb09da=_0x26b7cf;if(_0x57a68c[_0xb09da(0x243)]>0x0){var _0x1292a9=0x0;const _0x11d28d=_0x3ba32b[_0xb09da(0x24b)][_0xb09da(0x1d5)](_0x2dbf9b=>{var _0x181d63=_0xb09da;_0x2dbf9b[_0x181d63(0x274)]==_0x57a68c[_0x181d63(0x274)]&&_0x2dbf9b[_0x181d63(0x20b)]==_0x57a68c[_0x181d63(0x253)]&&_0x2dbf9b[_0x181d63(0x1df)]==_0x57a68c[_0x181d63(0x240)]&&_0x2dbf9b['bin']==_0x57a68c['to_bin']&&_0x2dbf9b['bay']==_0x57a68c[_0x181d63(0x241)]&&_0x2dbf9b[_0x181d63(0x288)]==_0x57a68c[_0x181d63(0x288)]&&_0x2dbf9b[_0x181d63(0x29c)]==_0x57a68c[_0x181d63(0x29c)]&&(_0x2dbf9b[_0x181d63(0x23c)]=parseInt(_0x2dbf9b[_0x181d63(0x23c)])+parseInt(_0x57a68c[_0x181d63(0x243)]),_0x1292a9++);});_0x1292a9=='0'&&(_0x3ba32b[_0xb09da(0x24b)]=_0x3ba32b['product_details']['concat']({'product_name':_0x57a68c['product_name'],'product_stock':_0x57a68c['to_quantity'],'bay':_0x57a68c[_0xb09da(0x241)],'bin':_0x57a68c['to_bin'],'type':_0x57a68c[_0xb09da(0x240)],'floorlevel':_0x57a68c[_0xb09da(0x253)],'storage':_0x57a68c[_0xb09da(0x29c)],'rack':_0x57a68c[_0xb09da(0x288)],'product_code':_0x57a68c[_0xb09da(0x1e4)],'primary_code':_0x57a68c[_0xb09da(0x2a4)],'secondary_code':_0x57a68c[_0xb09da(0x259)],'maxProducts':_0x57a68c[_0xb09da(0x227)],'storage':_0x57a68c[_0xb09da(0x29c)],'rack':_0x57a68c['rack']}));}}),await _0x3ba32b[_0x26b7cf(0x1d1)](),_0x5dcc32[_0x26b7cf(0x23a)](_0x26b7cf(0x2a6),_0x26b7cf(0x28a)),_0x279074[_0x26b7cf(0x213)](_0x26b7cf(0x265));}catch(_0x31e421){console[_0x26b7cf(0x238)](_0x31e421);}}),router['post']('/barcode_scanner',async(_0xbd827e,_0xea5736)=>{var _0x43bb82=a0_0xb720ed;const {FromWareHouse:_0x4d7b46,FromRoom:_0x584349,ToWarehouse:_0x1db80c,ToRoom:_0x3ba202,primary_code:_0x68fa14,Roomslist:_0x481790}=_0xbd827e[_0x43bb82(0x1cd)],_0x559059=_0x481790[_0x43bb82(0x202)](','),_0x31935b=[];async function _0x2b6b77(_0x8ac7b8){var _0x66b130=_0x43bb82;const _0x199196=await warehouse[_0x66b130(0x2b9)]([{'$match':{'name':_0x4d7b46,'room':_0x8ac7b8}},{'$unwind':_0x66b130(0x230)},{'$match':{'product_details.primary_code':_0x68fa14}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x66b130(0x1f7)},'secondary_code':{'$first':_0x66b130(0x22f)},'product_code':{'$first':_0x66b130(0x233)},'level':{'$first':_0x66b130(0x27c)},'isle':{'$first':_0x66b130(0x1dc)},'type':{'$first':_0x66b130(0x26f)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x66b130(0x1ef)},'storage':{'$first':_0x66b130(0x271)},'rack':{'$first':_0x66b130(0x2ad)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x66b130(0x295)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x66b130(0x20e)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x66b130(0x200)},'invoice_product':{'$first':'$product_details.invoice'}}}]),_0x3629f4=await warehouse[_0x66b130(0x2b9)]([{'$match':{'name':_0x4d7b46,'room':_0x8ac7b8}},{'$unwind':_0x66b130(0x230)},{'$match':{'product_details.secondary_code':_0x68fa14}},{'$group':{'_id':_0x66b130(0x1f6),'name':{'$first':_0x66b130(0x214)},'instock':{'$first':_0x66b130(0x211)},'primary_code':{'$first':_0x66b130(0x1f7)},'secondary_code':{'$first':_0x66b130(0x22f)},'product_code':{'$first':_0x66b130(0x233)},'level':{'$first':_0x66b130(0x27c)},'isle':{'$first':_0x66b130(0x1dc)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x66b130(0x286)},'secondary_unit':{'$first':_0x66b130(0x1ef)},'storage':{'$first':_0x66b130(0x271)},'rack':{'$first':_0x66b130(0x2ad)},'expiry_date':{'$first':_0x66b130(0x1eb)},'production_date':{'$first':_0x66b130(0x295)},'batch_code':{'$first':_0x66b130(0x1ea)},'maxPerUnit':{'$first':_0x66b130(0x20e)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x66b130(0x268)},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':_0x66b130(0x28c)}}}]);if(_0x199196[_0x66b130(0x24a)]>0x0)_0x31935b[_0x66b130(0x23e)](_0x199196);else _0x3629f4[_0x66b130(0x24a)]>0x0&&_0x31935b['push'](_0x3629f4);}const _0x4afcaf=_0x559059[_0x43bb82(0x1d5)](_0x5ef2e6=>_0x2b6b77(_0x5ef2e6));await Promise[_0x43bb82(0x27d)](_0x4afcaf),_0xea5736['json'](_0x31935b);}),router[a0_0xb720ed(0x23b)](a0_0xb720ed(0x2aa),async(_0x5ba562,_0x5bd669)=>{var _0x39032b=a0_0xb720ed;try{const {FromWareHouse:_0x4021db,FromRoom:_0x1968c1,ToWarehouse:_0x48d080,ToRoom:_0x2e3e9f,secondary_code:_0x14d30f}=_0x5ba562[_0x39032b(0x1cd)],_0x4845fa=await warehouse[_0x39032b(0x2b9)]([{'$match':{'name':_0x4021db}},{'$unwind':_0x39032b(0x230)},{'$match':{'product_details.secondary_code':_0x14d30f}},{'$group':{'_id':_0x39032b(0x1f6),'name':{'$first':_0x39032b(0x214)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x39032b(0x211)},'warehouse':{'$first':_0x39032b(0x209)},'level':{'$first':'$product_details.level'},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x39032b(0x286)}}}]);_0x5bd669['status'](0xc8)[_0x39032b(0x244)](_0x4845fa);}catch(_0x33846a){_0x5bd669['status'](0x194)[_0x39032b(0x244)]({'message':_0x33846a[_0x39032b(0x1f2)]});}}),router[a0_0xb720ed(0x23b)](a0_0xb720ed(0x280),async(_0x283fb0,_0x383c19)=>{var _0x33a7a2=a0_0xb720ed;try{const {FromWareHouse:_0xb41243,FromRoom:_0x4ab540,ToWarehouse:_0x2615ca,ToRoom:_0x37667d,product_code:_0x1f93f9}=_0x283fb0[_0x33a7a2(0x1cd)],_0x49a4f0=await warehouse[_0x33a7a2(0x2b9)]([{'$match':{'name':_0xb41243}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x1f93f9}},{'$group':{'_id':_0x33a7a2(0x1f6),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x33a7a2(0x1f7)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x33a7a2(0x233)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x33a7a2(0x2b0)},'pallet':{'$first':_0x33a7a2(0x1da)},'maxProducts':{'$first':_0x33a7a2(0x200)},'unit':{'$first':_0x33a7a2(0x286)}}}]);_0x383c19['status'](0xc8)['json'](_0x49a4f0);}catch(_0x3a73dd){_0x383c19[_0x33a7a2(0x24c)](0x194)['json']({'message':_0x3a73dd['message']});}}),router[a0_0xb720ed(0x23b)](a0_0xb720ed(0x248),async(_0x57cee1,_0xd2db75)=>{var _0x5c9d29=a0_0xb720ed;const {level:_0x4235c8,isle:_0x81d53d,pallet:_0x5c42eb,warehouses:_0x530988,room:_0x19632a}=_0x57cee1[_0x5c9d29(0x1cd)];try{const _0x4e4a7b=await warehouse['aggregate']([{'$match':{'name':_0x530988,'room':_0x19632a}},{'$unwind':_0x5c9d29(0x230)},{'$match':{'product_details.level':parseInt(_0x4235c8),'product_details.isle':_0x81d53d,'product_details.pallet':parseInt(_0x5c42eb)}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x5c9d29(0x211)},'level':{'$first':_0x5c9d29(0x204)},'isle':{'$first':_0x5c9d29(0x2b0)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x5c9d29(0x200)}}}]);_0xd2db75[_0x5c9d29(0x24c)](0xc8)[_0x5c9d29(0x244)](_0x4e4a7b);}catch(_0x38c9d4){_0xd2db75[_0x5c9d29(0x24c)](0x194)['json']({'message':_0x38c9d4[_0x5c9d29(0x1f2)]});}}),module[a0_0xb720ed(0x25e)]=router;