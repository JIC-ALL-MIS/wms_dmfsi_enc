var a0_0x4c9768=a0_0x260e;function a0_0x260e(_0x2ad87e,_0x5956f7){var _0x436083=a0_0x4360();return a0_0x260e=function(_0x260ea7,_0x27d649){_0x260ea7=_0x260ea7-0x150;var _0xca7c18=_0x436083[_0x260ea7];return _0xca7c18;},a0_0x260e(_0x2ad87e,_0x5956f7);}(function(_0x4ef563,_0x4edb69){var _0x170361=a0_0x260e,_0x3c3642=_0x4ef563();while(!![]){try{var _0x201dac=-parseInt(_0x170361(0x1a7))/0x1+parseInt(_0x170361(0x1ed))/0x2+-parseInt(_0x170361(0x1d1))/0x3+-parseInt(_0x170361(0x1fb))/0x4+-parseInt(_0x170361(0x1d7))/0x5*(-parseInt(_0x170361(0x155))/0x6)+parseInt(_0x170361(0x1a9))/0x7*(parseInt(_0x170361(0x1ff))/0x8)+parseInt(_0x170361(0x1e7))/0x9;if(_0x201dac===_0x4edb69)break;else _0x3c3642['push'](_0x3c3642['shift']());}catch(_0x32bd37){_0x3c3642['push'](_0x3c3642['shift']());}}}(a0_0x4360,0x4fea2));const express=require('express'),app=express(),router=express[a0_0x4c9768(0x1ca)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x4c9768(0x1ef)),auth=require(a0_0x4c9768(0x198)),users=require('../public/language/languages.json'),nodemailer=require('nodemailer');function a0_0x4360(){var _0x52fd2b=['to_room','unit','358081bgMtPV','floorlevel','798364GkcDWy','site_title','</tbody>','$finalize','ToRoomAssigned','Email\x20sent\x20successfully','English','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$product_details.secondary_unit','Return\x20Rooms','/transfer/view','<span\x20style=\x22float:\x20right;\x22>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','secondary_unit','$product_details.bin','message','French','slice','bay','to_prod_pallet','</table>','user','log','date','map','$invoice','flash','to_prod_qty','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','German','storage','to_prod_isle','Router','$product_details.product_name','_id','from_room','port','from_rack','floor','911373GvLzYq','$product_details.maxPerUnit','params','from_warehouse','findOne','back','69145Nvpatr','\x20Order\x20Number\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','split','then','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','production_date','Receiving\x20Area','maxperunit','to_quantity','DRY\x20STORAGE','bin','$date','to_warehouse','to_prod_level','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','4159125luYjva','find','json','concat','$product_details.batch_code','There\x27s\x20a\x20error\x20in\x20this\x20transaction','950526Actgbx','language','../models/all_models','primary_code','from_floorlevel','$product_details.bay','$product_details.product_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','\x20</h2>','Rack\x20E','$product_details.unit','to_invoice','$product','to_floorlevel','2571628szkXjV','aggregate','TRF-','forEach','40MRklTE','$product_details','Rack\x20A','Chinese','to_bay','Arabic','Transfer\x20Mail','host','rak','findById','/barcode_scanner','from_prod_pallet','Shelves','Enabled','sendMail','$product_details.expiry_date','invoice','errors','string','status','get','$product_details.maxProducts','$from_warehouse','Rack\x20B','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','from_bin','expiry_date','<h2>\x20','secondary_code','/../public','product_stock','password','render','Ambient','from_prod_level','from_prod_qty','warehouse','all','English\x20(US)','$isAllowEdit','True','success','$product_details.secondary_code','to_types','Hindi','Arabic\x20(ae)','prod_name','Raw\x20Materials','RoomAssigned','To_invoice','primary_unit','Rack\x20F','from_prod_isle','add_transfer','$product_details.pallet','product','/view/add_transfer','product_code3','updateOne','Floor','<table\x20style=\x22width:\x20100%\x20!important;\x22>','post','logo','</body></html>','54ktlVsP','<tbody\x20style=\x22text-align:\x20center;\x22>','maxProducts','catch','error','push','$room','$product_details.storage','Product\x20Transfer\x20successfully','Transfer\x20Finalize\x20Successfully','Rack\x20D','finalize','Level','$product_details.isle','max_per_unit','getMonth','/upload/','</td>','from_types','</head><body>','body','New_Qty_Converted','/view','to_bin','from_invoice','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','$name','prod_cat','from_storage','MaxStocks_data2','batch_code','An\x20error\x20occurred\x20while\x20saving\x20data.','filter','$product_details.primary_code','Spanish','<hr\x20class=\x22my-3\x22>','</div>','/CheckingWarehouse','length','Portuguese','exports','email','$_id','createTransport','<tr>','product_name','from_quantity','master','getDate','staff','$product_details.floorlevel','getFullYear','/preview/:id','product_details','from_rak','</h5>','An\x20error\x20occurred.','product_code','rack','$product_details.product_stock','<div>','redirect','/view/:id','from_room_name','Portuguese\x20(BR)','$product_details._id','$product_details.production_date','../middleware/auth','to_room_name','from_bay','$product_details.type','\x20Order\x20Date\x20:\x20','<strong>\x20Regards\x20</strong>','save','$product_details.level','type','</tr>','$product_details.rack','Logo.png','COLD\x20STORAGE'];a0_0x4360=function(){return _0x52fd2b;};return a0_0x4360();}router[a0_0x4c9768(0x213)](a0_0x4c9768(0x16b),auth,async(_0xf47553,_0x547877)=>{var _0x49afc7=a0_0x4c9768;try{const {username:_0xaa3bb8,email:_0xb2f07d,role:_0x122d37}=_0xf47553[_0x49afc7(0x1be)],_0x5f4324=_0xf47553[_0x49afc7(0x1be)],_0x472654=await profile['findOne']({'email':_0x5f4324[_0x49afc7(0x17e)]}),_0x316fba=await master_shop['find']();console[_0x49afc7(0x1bf)](_0x49afc7(0x184),_0x316fba);let _0x19d8d4;if(_0x5f4324['role']==_0x49afc7(0x186)){const _0x1459e2=await staff['findOne']({'email':_0x5f4324[_0x49afc7(0x17e)]});_0x19d8d4=await transfers[_0x49afc7(0x1e8)]({'from_warehouse':_0x1459e2[_0x49afc7(0x223)]});}else _0x19d8d4=await transfers['aggregate']([{'$unwind':_0x49afc7(0x1f9)},{'$group':{'_id':_0x49afc7(0x17f),'invoice':{'$first':_0x49afc7(0x1c2)},'date':{'$first':_0x49afc7(0x1e3)},'from_warehouse':{'$first':_0x49afc7(0x215)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x49afc7(0x1ac)},'isAllowEdit':{'$first':_0x49afc7(0x226)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x225)){var _0x1c105b=users[_0x49afc7(0x1af)];console['log'](_0x1c105b);}else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x22b))var _0x1c105b=users[_0x49afc7(0x22b)];else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x1c7))var _0x1c105b=users[_0x49afc7(0x1c7)];else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x177))var _0x1c105b=users[_0x49afc7(0x177)];else{if(_0x316fba[0x0]['language']=='French')var _0x1c105b=users[_0x49afc7(0x1b9)];else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x195))var _0x1c105b=users['Portuguese'];else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x202))var _0x1c105b=users[_0x49afc7(0x202)];else{if(_0x316fba[0x0][_0x49afc7(0x1ee)]==_0x49afc7(0x22c))var _0x1c105b=users[_0x49afc7(0x204)];}}}}}}}_0x547877[_0x49afc7(0x21f)]('transfer',{'success':_0xf47553[_0x49afc7(0x1c3)](_0x49afc7(0x228)),'errors':_0xf47553[_0x49afc7(0x1c3)](_0x49afc7(0x210)),'role':_0x5f4324,'profile':_0x472654,'master_shop':_0x316fba,'transfer':_0x19d8d4,'language':_0x1c105b});}catch(_0x47b1de){console[_0x49afc7(0x1bf)](_0x47b1de);}});async function getRandom8DigitNumber(){var _0x5e906f=a0_0x4c9768;const _0x4a319f=0x989680,_0x17bf59=0x5f5e0ff,_0x318ba3=Math[_0x5e906f(0x1d0)](Math['random']()*(_0x17bf59-_0x4a319f+0x1))+_0x4a319f;var _0x3eefe9;const _0x5a95c5=await transfers[_0x5e906f(0x1d5)]({'invoice':_0x5e906f(0x1fd)+_0x318ba3});return _0x5a95c5&&_0x5a95c5['length']>0x0?_0x3eefe9='TRF-'+_0x318ba3:_0x3eefe9=_0x5e906f(0x1fd)+_0x318ba3,_0x3eefe9;}router['get']('/view/add_transfer',auth,async(_0x15dd1d,_0x2f2cae)=>{var _0x282b61=a0_0x4c9768;try{const {username:_0x49b212,email:_0x16b8e7,role:_0x32c1ca}=_0x15dd1d[_0x282b61(0x1be)],_0x221d8b=_0x15dd1d[_0x282b61(0x1be)],_0xe6c889=await profile[_0x282b61(0x1d5)]({'email':_0x221d8b[_0x282b61(0x17e)]}),_0x1524d9=await master_shop['find']();console[_0x282b61(0x1bf)](_0x282b61(0x184),_0x1524d9);let _0x4b3b30;if(_0x221d8b['role']==_0x282b61(0x186)){const _0x310189=await staff[_0x282b61(0x1d5)]({'email':_0x221d8b[_0x282b61(0x17e)]});_0x4b3b30=await warehouse[_0x282b61(0x1fc)]([{'$match':{'status':_0x282b61(0x20c),'name':_0x310189[_0x282b61(0x223)],'warehouse_category':_0x282b61(0x22e)}},{'$group':{'_id':_0x282b61(0x16f),'name':{'$first':_0x282b61(0x16f)}}}]);}else _0x4b3b30=await warehouse[_0x282b61(0x1fc)]([{'$match':{'status':_0x282b61(0x20c),'warehouse_category':_0x282b61(0x22e)}},{'$group':{'_id':_0x282b61(0x16f),'name':{'$first':'$name'}}}]);var _0x5d4689=[_0x282b61(0x220),'Enclosed',_0x282b61(0x1b2)];const _0x123810=await transfers[_0x282b61(0x1e8)]({}),_0x50ee69=_0x123810['length']+0x1,_0x271c90=_0x282b61(0x1fd)+_0x50ee69['toString']()['padStart'](0x5,'0');if(_0x1524d9[0x0]['language']==_0x282b61(0x225)){var _0x805c8a=users[_0x282b61(0x1af)];console[_0x282b61(0x1bf)](_0x805c8a);}else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x22b))var _0x805c8a=users[_0x282b61(0x22b)];else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x1c7))var _0x805c8a=users[_0x282b61(0x1c7)];else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x177))var _0x805c8a=users[_0x282b61(0x177)];else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x1b9))var _0x805c8a=users[_0x282b61(0x1b9)];else{if(_0x1524d9[0x0]['language']==_0x282b61(0x195))var _0x805c8a=users['Portuguese'];else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x202))var _0x805c8a=users[_0x282b61(0x202)];else{if(_0x1524d9[0x0][_0x282b61(0x1ee)]==_0x282b61(0x22c))var _0x805c8a=users[_0x282b61(0x204)];}}}}}}}const _0x1051fd=getRandom8DigitNumber();_0x1051fd[_0x282b61(0x1db)](_0x2a9fda=>{var _0x289970=_0x282b61;_0x2f2cae[_0x289970(0x21f)](_0x289970(0x234),{'success':_0x15dd1d[_0x289970(0x1c3)]('success'),'errors':_0x15dd1d[_0x289970(0x1c3)](_0x289970(0x210)),'role':_0x221d8b,'profile':_0xe6c889,'master_shop':_0x1524d9,'warehouse':_0x4b3b30,'language':_0x805c8a,'rooms_data':_0x5d4689,'invoice':_0x2a9fda});})[_0x282b61(0x158)](_0x3e1097=>{var _0x15cbac=_0x282b61;_0x15dd1d[_0x15cbac(0x1c3)]('errors',_0x15cbac(0x1ec)),_0x2f2cae[_0x15cbac(0x192)](_0x15cbac(0x1b3));});}catch(_0x1829d3){console[_0x282b61(0x1bf)](_0x1829d3);}}),router['post'](a0_0x4c9768(0x237),auth,async(_0x197cff,_0x140821)=>{var _0x4e46b1=a0_0x4c9768;try{console[_0x4e46b1(0x1bf)](_0x197cff[_0x4e46b1(0x169)]);const {date:_0x167c8d,from_warehouse:_0x589513,FromRoom_name:_0x10e39c,to_warehouse:_0x32fac9,ToRoom_name:_0x59da84,prod_name:_0x6f1e6d,from_prod_qty:_0x3c2732,from_prod_level:_0x43d02d,from_prod_isle:_0xc14d3d,from_prod_pallet:_0x331da8,to_prod_qty:_0x2764cc,to_prod_level:_0x291f43,to_prod_isle:_0x234533,to_prod_pallet:_0xd75099,primary_code:_0x142714,secondary_code:_0x14f7c6,product_code3:_0x62395b,note:_0x3bb252,MaxStocks_data2:_0x3c666e,invoice:_0x5b494d,expiry_date:_0x397592}=_0x197cff[_0x4e46b1(0x169)];if(typeof _0x6f1e6d==_0x4e46b1(0x211))var _0x2df69a=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x22d)]],_0x1122bf=[_0x197cff['body']['from_prod_qty']],_0x4e7f68=[_0x197cff[_0x4e46b1(0x169)]['from_prod_level']],_0x21267b=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x16a)]],_0x53e40d=[_0x197cff[_0x4e46b1(0x169)]['to_prod_level']],_0x17c817=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1f0)]],_0x19cbd7=[_0x197cff['body']['secondary_code']],_0x5fefcf=[_0x197cff['body']['product_code3']],_0x3d2187=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x172)]],_0x2c4b3e=[_0x197cff['body'][_0x4e46b1(0x231)]],_0x4de81e=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1b6)]],_0x239a2b=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x173)]],_0x4f7399=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x219)]],_0xeb579d=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x163)]],_0x152331=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1dd)]],_0x2cba33=[_0x197cff['body'][_0x4e46b1(0x170)]],_0x2aef3f=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x22f)]],_0x23e2d9=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1ad)]],_0x95130e=[_0x197cff['body']['from_invoice']],_0x4ecc97=[_0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1f8)]];else var _0x2df69a=[..._0x197cff[_0x4e46b1(0x169)]['prod_name']],_0x1122bf=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x222)]],_0x4e7f68=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x221)]],_0x21267b=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x16a)]],_0x53e40d=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1e5)]],_0x17c817=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1f0)]],_0x19cbd7=[..._0x197cff[_0x4e46b1(0x169)]['secondary_code']],_0x5fefcf=[..._0x197cff['body']['product_code3']],_0x3d2187=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x172)]],_0x2c4b3e=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x231)]],_0x4de81e=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1b6)]],_0x239a2b=[..._0x197cff[_0x4e46b1(0x169)]['batch_code']],_0x4f7399=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x219)]],_0xeb579d=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x163)]],_0x152331=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1dd)]],_0x2cba33=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x170)]],_0x2aef3f=[..._0x197cff['body'][_0x4e46b1(0x22f)]],_0x23e2d9=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1ad)]],_0x95130e=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x16d)]],_0x4ecc97=[..._0x197cff[_0x4e46b1(0x169)][_0x4e46b1(0x1f8)]];const _0x1d148e=_0x2df69a[_0x4e46b1(0x1c1)](_0x3ee3f0=>{return _0x3ee3f0={'product_name':_0x3ee3f0};});_0x1122bf[_0x4e46b1(0x1fe)]((_0x3cb8f7,_0x4587a0)=>{var _0x4502a3=_0x4e46b1;_0x1d148e[_0x4587a0][_0x4502a3(0x183)]=_0x3cb8f7;}),_0x95130e[_0x4e46b1(0x1fe)]((_0x3987da,_0x287f2b)=>{var _0x5df187=_0x4e46b1;_0x1d148e[_0x287f2b][_0x5df187(0x16d)]=_0x3987da;}),_0x4ecc97[_0x4e46b1(0x1fe)]((_0x48fa5d,_0x3a62e2)=>{_0x1d148e[_0x3a62e2]['To_invoice']=_0x48fa5d;}),_0x4e7f68[_0x4e46b1(0x1fe)]((_0x2db501,_0x35bd64)=>{var _0x33ce98=_0x4e46b1;_0x2aef3f[_0x33ce98(0x1fe)]((_0x4591b7,_0x34a5ef)=>{var _0x4c2e28=_0x33ce98;if(_0x4591b7==_0x4c2e28(0x1de)&&_0x35bd64==_0x34a5ef){var _0x220e3c=_0x2db501['slice'](0x3);_0x1d148e[_0x35bd64]['from_storage']=_0x2db501[0x0],_0x1d148e[_0x35bd64][_0x4c2e28(0x1cf)]=_0x2db501[0x1],_0x1d148e[_0x35bd64][_0x4c2e28(0x19a)]=0x0,_0x1d148e[_0x35bd64][_0x4c2e28(0x218)]=0x0,_0x1d148e[_0x35bd64][_0x4c2e28(0x167)]='Floor',_0x1d148e[_0x35bd64][_0x4c2e28(0x1f1)]=_0x220e3c;}else{if(_0x4591b7==_0x4c2e28(0x20b)&&_0x35bd64==_0x34a5ef){var _0x220e3c=_0x2db501[_0x4c2e28(0x1ba)](0x3);_0x1d148e[_0x35bd64]['from_storage']=_0x2db501[0x0],_0x1d148e[_0x35bd64]['from_rack']=_0x2db501[0x1],_0x1d148e[_0x35bd64][_0x4c2e28(0x19a)]=0x0,_0x1d148e[_0x35bd64][_0x4c2e28(0x218)]=0x0,_0x1d148e[_0x35bd64][_0x4c2e28(0x167)]=_0x4c2e28(0x150),_0x1d148e[_0x35bd64][_0x4c2e28(0x1f1)]=_0x2db501[0x5];}else{if(_0x35bd64==_0x34a5ef){var _0x5ea1b9;if(_0x2db501[0x4]=='L')_0x5ea1b9=_0x4c2e28(0x161);else _0x2db501[0x4]=='F'&&(_0x5ea1b9=_0x4c2e28(0x150));_0x1d148e[_0x35bd64][_0x4c2e28(0x171)]=_0x2db501[0x0],_0x1d148e[_0x35bd64]['from_rack']=_0x2db501[0x1],_0x1d148e[_0x35bd64][_0x4c2e28(0x19a)]=_0x2db501[0x2],_0x1d148e[_0x35bd64][_0x4c2e28(0x218)]=_0x2db501[0x3],_0x1d148e[_0x35bd64][_0x4c2e28(0x167)]=_0x5ea1b9,_0x1d148e[_0x35bd64][_0x4c2e28(0x1f1)]=_0x2db501[0x5];}}}});}),_0x21267b[_0x4e46b1(0x1fe)]((_0x26404d,_0x5865c6)=>{_0x1d148e[_0x5865c6]['to_quantity']=_0x26404d;}),_0x53e40d[_0x4e46b1(0x1fe)]((_0x1520f0,_0x261ed7)=>{var _0xd48c47=_0x4e46b1;_0x23e2d9[_0xd48c47(0x1fe)]((_0x334693,_0x52dde9)=>{var _0x3f0fce=_0xd48c47;if(_0x334693=='Receiving\x20Area'&&_0x261ed7==_0x52dde9){var _0x53c780=_0x1520f0[_0x3f0fce(0x1ba)](0x3);_0x1d148e[_0x261ed7][_0x3f0fce(0x1c8)]=_0x1520f0[0x0],_0x1d148e[_0x261ed7]['rack']=_0x1520f0[0x1],_0x1d148e[_0x261ed7][_0x3f0fce(0x203)]=0x0,_0x1d148e[_0x261ed7]['to_bin']=0x0,_0x1d148e[_0x261ed7][_0x3f0fce(0x22a)]=_0x3f0fce(0x150),_0x1d148e[_0x261ed7][_0x3f0fce(0x1fa)]=_0x53c780;}else{if(_0x334693==_0x3f0fce(0x20b)&&_0x261ed7==_0x52dde9){var _0x53c780=_0x1520f0[_0x3f0fce(0x1ba)](0x3);_0x1d148e[_0x261ed7][_0x3f0fce(0x1c8)]=_0x1520f0[0x0],_0x1d148e[_0x261ed7][_0x3f0fce(0x18f)]=_0x1520f0[0x1],_0x1d148e[_0x261ed7]['to_bay']=0x0,_0x1d148e[_0x261ed7]['to_bin']=0x0,_0x1d148e[_0x261ed7][_0x3f0fce(0x22a)]=_0x3f0fce(0x150),_0x1d148e[_0x261ed7]['to_floorlevel']=_0x1520f0[0x5];}else{if(_0x261ed7==_0x52dde9){var _0x232904;if(_0x1520f0[0x4]=='L')_0x232904=_0x3f0fce(0x161);else _0x1520f0[0x4]=='F'&&(_0x232904=_0x3f0fce(0x150));_0x1d148e[_0x261ed7][_0x3f0fce(0x1c8)]=_0x1520f0[0x0],_0x1d148e[_0x261ed7][_0x3f0fce(0x18f)]=_0x1520f0[0x1],_0x1d148e[_0x261ed7][_0x3f0fce(0x203)]=_0x1520f0[0x2],_0x1d148e[_0x261ed7][_0x3f0fce(0x16c)]=_0x1520f0[0x3],_0x1d148e[_0x261ed7][_0x3f0fce(0x22a)]=_0x232904,_0x1d148e[_0x261ed7][_0x3f0fce(0x1fa)]=_0x1520f0[0x5];}}}});}),_0x17c817[_0x4e46b1(0x1fe)]((_0x517fab,_0x23a684)=>{var _0x512ba6=_0x4e46b1;_0x1d148e[_0x23a684][_0x512ba6(0x1f0)]=_0x517fab;}),_0x19cbd7[_0x4e46b1(0x1fe)]((_0xa83ecf,_0x316b0c)=>{var _0x5bced4=_0x4e46b1;_0x1d148e[_0x316b0c][_0x5bced4(0x21b)]=_0xa83ecf;}),_0x5fefcf['forEach']((_0x3c3857,_0x1f6e92)=>{var _0x32c5f7=_0x4e46b1;_0x1d148e[_0x1f6e92][_0x32c5f7(0x18e)]=_0x3c3857;}),_0x3d2187[_0x4e46b1(0x1fe)]((_0x290242,_0x197325)=>{var _0x589e7c=_0x4e46b1;_0x1d148e[_0x197325][_0x589e7c(0x157)]=_0x290242;}),_0x2c4b3e[_0x4e46b1(0x1fe)]((_0x192b5f,_0xac29c6)=>{var _0x1bfa17=_0x4e46b1;_0x1d148e[_0xac29c6][_0x1bfa17(0x1a6)]=_0x192b5f;}),_0x4de81e[_0x4e46b1(0x1fe)]((_0xf0ebf8,_0x12d4bc)=>{var _0x18f471=_0x4e46b1;_0x1d148e[_0x12d4bc][_0x18f471(0x1b6)]=_0xf0ebf8;}),_0x239a2b['forEach']((_0x16b4c7,_0x53fa97)=>{_0x1d148e[_0x53fa97]['batch_code']=_0x16b4c7;}),_0x4f7399[_0x4e46b1(0x1fe)]((_0x5d89d3,_0x4bd46e)=>{_0x1d148e[_0x4bd46e]['expiry_date']=_0x5d89d3;}),_0xeb579d[_0x4e46b1(0x1fe)]((_0x1a062b,_0x8b37d9)=>{var _0x4835cf=_0x4e46b1;_0x1d148e[_0x8b37d9][_0x4835cf(0x1df)]=_0x1a062b;}),_0x152331['forEach']((_0x3b84f9,_0x1980f1)=>{_0x1d148e[_0x1980f1]['production_date']=_0x3b84f9;}),_0x2cba33[_0x4e46b1(0x1fe)]((_0xd6d2f4,_0x569047)=>{_0x1d148e[_0x569047]['prod_cat']=_0xd6d2f4;}),_0x2aef3f['forEach']((_0x3c9e49,_0x3425d2)=>{var _0x15de7a=_0x4e46b1;_0x1d148e[_0x3425d2][_0x15de7a(0x194)]=_0x3c9e49;}),_0x23e2d9[_0x4e46b1(0x1fe)]((_0x283697,_0x382261)=>{var _0x2929ea=_0x4e46b1;_0x1d148e[_0x382261][_0x2929ea(0x199)]=_0x283697;});const _0x5b3fc2=_0x1d148e['filter'](_0x2f6924=>_0x2f6924[_0x4e46b1(0x1e0)]!=='0'&&_0x2f6924['to_quantity']!==''||_0x2f6924[_0x4e46b1(0x1fa)]!=='0'&&_0x2f6924[_0x4e46b1(0x1fa)]!==''),_0x3288e3=new transfers({'date':_0x167c8d,'from_warehouse':_0x589513,'to_warehouse':_0x32fac9,'product':_0x5b3fc2,'note':_0x3bb252,'invoice':_0x5b494d}),_0x3d6a69=await _0x3288e3['save']();_0x197cff['flash'](_0x4e46b1(0x228),_0x4e46b1(0x15d)),_0x140821[_0x4e46b1(0x192)]('/transfer/preview/'+_0x3d6a69[_0x4e46b1(0x1cc)]);}catch(_0x30924d){console['log'](_0x30924d),_0x140821[_0x4e46b1(0x212)](0xc8)[_0x4e46b1(0x1e9)]({'errorMessage':_0x30924d['message']});}}),router['get']('/preview/:id',auth,async(_0x115aa7,_0x1b5f92)=>{var _0x47722e=a0_0x4c9768;try{const {username:_0x39eae2,email:_0xf3fceb,role:_0x3958d7}=_0x115aa7[_0x47722e(0x1be)],_0x2ce60b=_0x115aa7['user'],_0x18e3b0=await profile[_0x47722e(0x1d5)]({'email':_0x2ce60b[_0x47722e(0x17e)]}),_0x4522c4=await master_shop['find']();console[_0x47722e(0x1bf)]('master',_0x4522c4);const _0x29f360=await transfers[_0x47722e(0x208)](_0x115aa7[_0x47722e(0x1d3)]['id']);let _0x1dfa1b=new Date(_0x29f360['expiry_date']),_0x12bd7c=('0'+_0x1dfa1b[_0x47722e(0x185)]())['slice'](-0x2),_0x5b7b10=('0'+(_0x1dfa1b[_0x47722e(0x164)]()+0x1))[_0x47722e(0x1ba)](-0x2),_0x4ed9f=_0x1dfa1b[_0x47722e(0x188)](),_0x4f3b75=_0x4ed9f+'-'+_0x5b7b10+'-'+_0x12bd7c,_0x237977;if(_0x2ce60b['role']==_0x47722e(0x186)){const _0x234ab3=await staff[_0x47722e(0x1d5)]({'email':_0x2ce60b[_0x47722e(0x17e)]});_0x237977=await warehouse[_0x47722e(0x1e8)]({'status':'Enabled','name':_0x234ab3[_0x47722e(0x223)],'warehouse_category':'Raw\x20Materials'});}else _0x237977=await warehouse['find']({'status':_0x47722e(0x20c),'warehouse_category':_0x47722e(0x22e)});const _0x501833=await warehouse[_0x47722e(0x1fc)]([{'$match':{'name':_0x29f360[_0x47722e(0x1d4)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x47722e(0x196),'name':{'$first':_0x47722e(0x1cb)},'product_stock':{'$first':_0x47722e(0x190)},'bay':{'$first':_0x47722e(0x1f2)},'bin':{'$first':_0x47722e(0x1b7)},'type':{'$first':_0x47722e(0x19b)},'floorlevel':{'$first':_0x47722e(0x187)},'primary_code':{'$first':_0x47722e(0x176)},'secondary_code':{'$first':_0x47722e(0x229)},'product_code':{'$first':_0x47722e(0x1f3)},'storage':{'$first':_0x47722e(0x15c)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x47722e(0x20e)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x47722e(0x15b)}}}]);if(_0x4522c4[0x0]['language']=='English\x20(US)'){var _0x53c09d=users[_0x47722e(0x1af)];console[_0x47722e(0x1bf)](_0x53c09d);}else{if(_0x4522c4[0x0][_0x47722e(0x1ee)]==_0x47722e(0x22b))var _0x53c09d=users['Hindi'];else{if(_0x4522c4[0x0]['language']==_0x47722e(0x1c7))var _0x53c09d=users['German'];else{if(_0x4522c4[0x0]['language']==_0x47722e(0x177))var _0x53c09d=users['Spanish'];else{if(_0x4522c4[0x0][_0x47722e(0x1ee)]=='French')var _0x53c09d=users[_0x47722e(0x1b9)];else{if(_0x4522c4[0x0]['language']==_0x47722e(0x195))var _0x53c09d=users[_0x47722e(0x17c)];else{if(_0x4522c4[0x0][_0x47722e(0x1ee)]=='Chinese')var _0x53c09d=users[_0x47722e(0x202)];else{if(_0x4522c4[0x0][_0x47722e(0x1ee)]=='Arabic\x20(ae)')var _0x53c09d=users['Arabic'];}}}}}}}_0x1b5f92[_0x47722e(0x21f)]('edit_transfer_view',{'success':_0x115aa7[_0x47722e(0x1c3)](_0x47722e(0x228)),'errors':_0x115aa7[_0x47722e(0x1c3)](_0x47722e(0x210)),'role':_0x2ce60b,'profile':_0x18e3b0,'master_shop':_0x4522c4,'warehouse':_0x237977,'transfer':_0x29f360,'stock':_0x501833,'language':_0x53c09d});}catch(_0x36d1bd){console[_0x47722e(0x1bf)](_0x36d1bd);}}),router[a0_0x4c9768(0x152)](a0_0x4c9768(0x189),auth,async(_0x54fb3f,_0x39562d)=>{var _0x411d74=a0_0x4c9768;try{const _0x524a31=_0x54fb3f[_0x411d74(0x1d3)]['id'],{from_warehouse:_0x2a706a,FromRoom_name:_0x58b325,to_warehouse:_0x2bf481,ToRoom_name:_0x48b1ec}=_0x54fb3f[_0x411d74(0x169)],_0x110d5a=await transfers[_0x411d74(0x208)]({'_id':_0x524a31}),_0x3e9dd5=_0x110d5a[_0x411d74(0x236)][_0x411d74(0x1c1)](async _0x86d035=>{var _0x58b290=_0x411d74;if(_0x86d035[_0x58b290(0x1e0)]>0x0){var _0x2f4995=await warehouse[_0x58b290(0x1d5)]({'name':_0x110d5a['from_warehouse'],'room':_0x86d035['from_room_name'],'warehouse_category':'Raw\x20Materials'});const _0x26fb09=_0x2f4995['product_details'][_0x58b290(0x1c1)](_0x26ee10=>{var _0x4195bf=_0x58b290;_0x26ee10[_0x4195bf(0x182)]==_0x86d035[_0x4195bf(0x182)]&&_0x26ee10[_0x4195bf(0x1a8)]==_0x86d035[_0x4195bf(0x1f1)]&&_0x26ee10[_0x4195bf(0x1a0)]==_0x86d035[_0x4195bf(0x167)]&&_0x26ee10[_0x4195bf(0x1e2)]==_0x86d035['from_bin']&&_0x26ee10[_0x4195bf(0x1bb)]==_0x86d035['from_bay']&&_0x26ee10[_0x4195bf(0x18f)]==_0x86d035['from_rack']&&_0x26ee10[_0x4195bf(0x1c8)]==_0x86d035['from_storage']&&_0x26ee10[_0x4195bf(0x219)]==_0x86d035[_0x4195bf(0x219)]&&_0x26ee10[_0x4195bf(0x173)]==_0x86d035['batch_code']&&_0x26ee10['production_date']==_0x86d035[_0x4195bf(0x1dd)]&&_0x26ee10['invoice']==_0x86d035['from_invoice']&&(_0x26ee10[_0x4195bf(0x21d)]=_0x26ee10['product_stock']-_0x86d035[_0x4195bf(0x1e0)]);});}return _0x2f4995;});Promise[_0x411d74(0x224)](_0x3e9dd5)[_0x411d74(0x1db)](async _0x48099e=>{var _0x565a4f=_0x411d74;try{for(const _0x5b9094 of _0x48099e){await _0x5b9094[_0x565a4f(0x19e)]();}try{const _0xedfa05=_0x110d5a['product'][_0x565a4f(0x1c1)](async _0x5705f6=>{var _0x4271d7=_0x565a4f;if(_0x5705f6[_0x4271d7(0x1e0)]>0x0){var _0x57a309=await warehouse[_0x4271d7(0x1d5)]({'name':_0x110d5a[_0x4271d7(0x1e4)],'room':_0x5705f6[_0x4271d7(0x199)],'warehouse_category':_0x4271d7(0x22e)}),_0x3be542=0x0;const _0x18fe1c=_0x57a309['product_details'][_0x4271d7(0x1c1)](_0x51fb8e=>{var _0x514d8a=_0x4271d7;_0x51fb8e[_0x514d8a(0x182)]==_0x5705f6[_0x514d8a(0x182)]&&_0x51fb8e[_0x514d8a(0x1a8)]==_0x5705f6[_0x514d8a(0x1fa)]&&_0x51fb8e[_0x514d8a(0x1a0)]==_0x5705f6[_0x514d8a(0x22a)]&&_0x51fb8e[_0x514d8a(0x1e2)]==_0x5705f6[_0x514d8a(0x16c)]&&_0x51fb8e['bay']==_0x5705f6[_0x514d8a(0x203)]&&_0x51fb8e[_0x514d8a(0x18f)]==_0x5705f6[_0x514d8a(0x18f)]&&_0x51fb8e[_0x514d8a(0x1c8)]==_0x5705f6[_0x514d8a(0x1c8)]&&_0x51fb8e[_0x514d8a(0x219)]==_0x5705f6[_0x514d8a(0x219)]&&_0x51fb8e['batch_code']==_0x5705f6['batch_code']&&_0x51fb8e[_0x514d8a(0x1dd)]==_0x5705f6[_0x514d8a(0x1dd)]&&_0x51fb8e[_0x514d8a(0x20f)]==_0x5705f6[_0x514d8a(0x230)]&&(_0x51fb8e[_0x514d8a(0x21d)]=_0x51fb8e[_0x514d8a(0x21d)]+_0x5705f6[_0x514d8a(0x1e0)],_0x3be542++);});_0x3be542=='0'&&(_0x57a309[_0x4271d7(0x18a)]=_0x57a309[_0x4271d7(0x18a)][_0x4271d7(0x1ea)]({'product_name':_0x5705f6[_0x4271d7(0x182)],'product_stock':_0x5705f6[_0x4271d7(0x1e0)],'bay':_0x5705f6[_0x4271d7(0x203)],'bin':_0x5705f6[_0x4271d7(0x16c)],'type':_0x5705f6['to_types'],'floorlevel':_0x5705f6[_0x4271d7(0x1fa)],'storage':_0x5705f6['storage'],'rack':_0x5705f6[_0x4271d7(0x18f)],'product_code':_0x5705f6['product_code'],'primary_code':_0x5705f6['primary_code'],'secondary_code':_0x5705f6['secondary_code'],'maxProducts':_0x5705f6[_0x4271d7(0x157)],'storage':_0x5705f6[_0x4271d7(0x1c8)],'rack':_0x5705f6['rack'],'expiry_date':_0x5705f6[_0x4271d7(0x219)],'maxPerUnit':_0x5705f6[_0x4271d7(0x1df)],'batch_code':_0x5705f6['batch_code'],'production_date':_0x5705f6[_0x4271d7(0x1dd)]}));}return _0x57a309;});Promise[_0x565a4f(0x224)](_0xedfa05)[_0x565a4f(0x1db)](async _0xa281c0=>{var _0x16fb27=_0x565a4f;try{for(const _0x3c51d2 of _0xa281c0){await warehouse[_0x16fb27(0x239)]({'_id':_0x3c51d2[_0x16fb27(0x1cc)]},{'$addToSet':{'product_details':{'$each':_0x3c51d2[_0x16fb27(0x18a)]}}});}_0x110d5a[_0x16fb27(0x160)]=_0x16fb27(0x227);const _0x59413b=await _0x110d5a[_0x16fb27(0x19e)](),_0x2e231f=await master_shop[_0x16fb27(0x1e8)](),_0x390687=await email_settings[_0x16fb27(0x1d5)](),_0x1ce57f=await supervisor_settings['find']();var _0x353714=_0x110d5a['product'],_0x20336b='',_0x5a58cb;for(_0x5a58cb in _0x353714){_0x20336b+=_0x16fb27(0x181)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x353714[_0x5a58cb][_0x16fb27(0x182)]+_0x16fb27(0x166)+_0x16fb27(0x1e6)+_0x353714[_0x5a58cb][_0x16fb27(0x18e)]+_0x16fb27(0x166)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x353714[_0x5a58cb][_0x16fb27(0x1e0)]+'</td>'+_0x16fb27(0x1e6)+_0x353714[_0x5a58cb]['unit']+_0x16fb27(0x166)+_0x16fb27(0x1e6)+_0x353714[_0x5a58cb][_0x16fb27(0x1b6)]+'</td>'+_0x16fb27(0x1e6)+_0x110d5a['to_warehouse']+_0x16fb27(0x166)+_0x16fb27(0x1e6)+_0x353714[_0x5a58cb][_0x16fb27(0x199)]+_0x16fb27(0x166)+_0x16fb27(0x1e6)+_0x353714[_0x5a58cb][_0x16fb27(0x1c8)]+_0x353714[_0x5a58cb][_0x16fb27(0x18f)]+_0x353714[_0x5a58cb][_0x16fb27(0x203)]+_0x353714[_0x5a58cb][_0x16fb27(0x16c)]+_0x353714[_0x5a58cb][_0x16fb27(0x22a)][0x0]+_0x353714[_0x5a58cb][_0x16fb27(0x1fa)]+_0x16fb27(0x166),_0x16fb27(0x1a1);}let _0x1b861e=nodemailer[_0x16fb27(0x180)]({'host':_0x390687[_0x16fb27(0x206)],'port':Number(_0x390687[_0x16fb27(0x1ce)]),'secure':![],'auth':{'user':_0x390687['email'],'pass':_0x390687[_0x16fb27(0x21e)]}}),_0x387041={'from':_0x390687['email'],'to':_0x1ce57f[0x0]['RMSEmail'],'subject':_0x16fb27(0x205),'attachments':[{'filename':_0x16fb27(0x1a3),'path':__dirname+_0x16fb27(0x21c)+_0x16fb27(0x165)+_0x2e231f[0x0]['image'],'cid':_0x16fb27(0x153)}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+_0x16fb27(0x168)+_0x16fb27(0x191)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x16fb27(0x191)+_0x16fb27(0x16e)+_0x16fb27(0x179)+'<div>'+_0x16fb27(0x21a)+_0x2e231f[0x0][_0x16fb27(0x1aa)]+_0x16fb27(0x1f5)+'</div>'+_0x16fb27(0x179)+_0x16fb27(0x178)+_0x16fb27(0x191)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x16fb27(0x1d8)+_0x110d5a[_0x16fb27(0x20f)]+'\x20'+_0x16fb27(0x1b4)+_0x16fb27(0x19c)+_0x110d5a[_0x16fb27(0x1c0)]+'\x20'+'</span>'+_0x16fb27(0x18c)+_0x16fb27(0x179)+_0x16fb27(0x151)+_0x16fb27(0x1b5)+_0x16fb27(0x181)+_0x16fb27(0x1dc)+_0x16fb27(0x1d9)+_0x16fb27(0x217)+_0x16fb27(0x1b0)+_0x16fb27(0x1c5)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x16fb27(0x1f4)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x16fb27(0x1a1)+'</thead>'+_0x16fb27(0x156)+'\x20'+_0x20336b+'\x20'+_0x16fb27(0x1ab)+_0x16fb27(0x1bd)+'<div>'+_0x16fb27(0x19d)+'<h5>'+_0x2e231f[0x0][_0x16fb27(0x1aa)]+_0x16fb27(0x18c)+_0x16fb27(0x179)+'</div>'+_0x16fb27(0x154)};_0x1b861e[_0x16fb27(0x20d)](_0x387041,function(_0x386ce3,_0x57f47f){var _0x11a2d9=_0x16fb27;_0x386ce3?(console['log'](_0x386ce3),console[_0x11a2d9(0x1bf)]('Error\x20Occurs')):console[_0x11a2d9(0x1bf)](_0x11a2d9(0x1ae));}),_0x54fb3f[_0x16fb27(0x1c3)](_0x16fb27(0x228),_0x16fb27(0x15e)),_0x39562d[_0x16fb27(0x192)]('/picking_list/PDF_transfer_rm/'+_0x59413b['_id']);}catch(_0xec1b82){console[_0x16fb27(0x159)](_0xec1b82),_0x39562d[_0x16fb27(0x212)](0x1f4)[_0x16fb27(0x1e9)]({'Perror':_0x16fb27(0x174),'message':_0xec1b82[_0x16fb27(0x1b8)]});}})[_0x565a4f(0x158)](_0x525bc6=>{var _0x297a2d=_0x565a4f;console[_0x297a2d(0x159)](_0x525bc6),_0x39562d['status'](0x1f4)[_0x297a2d(0x1e9)]({'Perror':_0x297a2d(0x18d)});});}catch(_0x30adca){_0x39562d[_0x565a4f(0x1e9)](_0x30adca);}}catch(_0x594bb8){console[_0x565a4f(0x159)](_0x594bb8),_0x39562d[_0x565a4f(0x212)](0x1f4)[_0x565a4f(0x1e9)]({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x594bb8[_0x565a4f(0x1b8)]});}})[_0x411d74(0x158)](_0x6d6492=>{var _0x573c2d=_0x411d74;console['error'](_0x6d6492),_0x39562d[_0x573c2d(0x212)](0x1f4)[_0x573c2d(0x1e9)]({'Merror':_0x573c2d(0x18d)});});}catch(_0x341fe2){console[_0x411d74(0x1bf)](_0x341fe2);}});function BayBinSelected(_0x5750da,_0x5c6ac2){var _0x32bb30=a0_0x4c9768,_0x1be606=[],_0x24a04e=[],_0x542307=[],_0x2f1fb8=[],_0x574304=[],_0x3bca0f=[];let _0x359831=[];if(_0x5750da==_0x32bb30(0x1e1))switch(_0x5c6ac2){case _0x32bb30(0x201):_0x1be606=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x24a04e=[0x1,0x2],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),'Floor'],_0x574304=['D'],_0x3bca0f=['A'];break;case _0x32bb30(0x216):_0x1be606=[0x6,0x5,0x4,0x3,0x2,0x1],_0x24a04e=[0x1,0x2],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),_0x32bb30(0x150)],_0x574304=['D'],_0x3bca0f=['B'];break;case _0x32bb30(0x20b):_0x1be606=[0x0],_0x24a04e=[0x0],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x150)],_0x574304=['D'],_0x3bca0f=['S'];break;case _0x32bb30(0x1de):_0x1be606=[0x0],_0x24a04e=[0x0],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x542307=[_0x32bb30(0x150)],_0x574304=['D'],_0x3bca0f=['R'];break;}else{if(_0x5750da==_0x32bb30(0x1a4))switch(_0x5c6ac2){case'Rack\x20A':_0x1be606=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x24a04e=['B','F'],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),'Floor'],_0x574304=['C'],_0x3bca0f=['A'];break;case _0x32bb30(0x216):_0x1be606=[0x5,0x4,0x3,0x2,0x1],_0x24a04e=['F','B','S'],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),_0x32bb30(0x150)],_0x574304=['C'],_0x3bca0f=['B'];break;case'Rack\x20C':_0x1be606=[0x1,0x2,0x3,0x4,0x5],_0x24a04e=['B','F','S'],_0x2f1fb8=[0x5,0x4,0x3,0x2,0x1],_0x542307=[_0x32bb30(0x161),_0x32bb30(0x150)],_0x574304=['C'],_0x3bca0f=['C'];break;case _0x32bb30(0x15f):_0x1be606=[0x5,0x4,0x3,0x2,0x1],_0x24a04e=['F','B','S'],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),_0x32bb30(0x150)],_0x574304=['C'],_0x3bca0f=['D'];break;case _0x32bb30(0x1f6):_0x1be606=[0x4,0x3,0x2,0x1],_0x24a04e=[0x1,0x2],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161),_0x32bb30(0x150)],_0x574304=['C'],_0x3bca0f=['E'];break;case _0x32bb30(0x232):_0x1be606=[0x1,0x2,0x3],_0x24a04e=[0x1,0x2],_0x2f1fb8=[0x1,0x2,0x3,0x4,0x5],_0x542307=[_0x32bb30(0x161)],_0x574304=['C'],_0x3bca0f=['F'];break;}}return{'levels':_0x1be606,'Isle':_0x24a04e,'rack':_0x2f1fb8,'type':_0x542307,'storage':_0x574304,'rak':_0x3bca0f};}router[a0_0x4c9768(0x213)](a0_0x4c9768(0x193),auth,async(_0x6da373,_0x5797bb)=>{var _0x1f5a47=a0_0x4c9768;try{const {username:_0xe567b3,email:_0xcf8c6c,role:_0x182f00}=_0x6da373['user'],_0x4671d9=_0x6da373[_0x1f5a47(0x1be)],_0x194fa6=await profile['findOne']({'email':_0x4671d9[_0x1f5a47(0x17e)]}),_0x5b4ee7=await master_shop[_0x1f5a47(0x1e8)](),_0x3fc317=await transfers[_0x1f5a47(0x208)](_0x6da373['params']['id']);let _0x5cd76e;if(_0x4671d9['role']==_0x1f5a47(0x186)){const _0x4470d9=await staff[_0x1f5a47(0x1d5)]({'email':_0x4671d9[_0x1f5a47(0x17e)]});_0x5cd76e=await warehouse['aggregate']([{'$match':{'status':_0x1f5a47(0x20c),'name':_0x4470d9[_0x1f5a47(0x223)],'warehouse_category':_0x1f5a47(0x22e)}},{'$group':{'_id':_0x1f5a47(0x16f),'name':{'$first':'$name'}}}]);}else _0x5cd76e=await warehouse[_0x1f5a47(0x1fc)]([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x1f5a47(0x16f),'name':{'$first':_0x1f5a47(0x16f)}}}]);const _0x53a7a1=await warehouse['aggregate']([{'$match':{'name':_0x3fc317[_0x1f5a47(0x1d4)],'warehouse_category':_0x1f5a47(0x22e)}},{'$unwind':_0x1f5a47(0x200)},{'$group':{'_id':_0x1f5a47(0x196),'name':{'$first':_0x1f5a47(0x1cb)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x1f5a47(0x1b7)},'type':{'$first':_0x1f5a47(0x19b)},'floorlevel':{'$first':_0x1f5a47(0x187)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1f5a47(0x229)},'product_code':{'$first':_0x1f5a47(0x1f3)},'storage':{'$first':_0x1f5a47(0x15c)},'rack':{'$first':_0x1f5a47(0x1a2)},'expiry_date':{'$first':_0x1f5a47(0x20e)},'production_date':{'$first':_0x1f5a47(0x197)},'room':{'$first':_0x1f5a47(0x15b)}}}]),_0x54b64f=await product[_0x1f5a47(0x1e8)]({}),_0x44c14b=BayBinSelected(_0x3fc317['to_warehouse'],_0x3fc317[_0x1f5a47(0x1a5)]);if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x225)){var _0x4beb32=users[_0x1f5a47(0x1af)];console[_0x1f5a47(0x1bf)](_0x4beb32);}else{if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x22b))var _0x4beb32=users['Hindi'];else{if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x1c7))var _0x4beb32=users[_0x1f5a47(0x1c7)];else{if(_0x5b4ee7[0x0]['language']=='Spanish')var _0x4beb32=users['Spanish'];else{if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x1b9))var _0x4beb32=users['French'];else{if(_0x5b4ee7[0x0]['language']==_0x1f5a47(0x195))var _0x4beb32=users[_0x1f5a47(0x17c)];else{if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x202))var _0x4beb32=users['Chinese'];else{if(_0x5b4ee7[0x0][_0x1f5a47(0x1ee)]==_0x1f5a47(0x22c))var _0x4beb32=users[_0x1f5a47(0x204)];}}}}}}}_0x5797bb['render']('edit_transfer',{'success':_0x6da373[_0x1f5a47(0x1c3)](_0x1f5a47(0x228)),'errors':_0x6da373[_0x1f5a47(0x1c3)](_0x1f5a47(0x210)),'role':_0x4671d9,'profile':_0x194fa6,'master_shop':_0x5b4ee7,'warehouse':_0x5cd76e,'transfer':_0x3fc317,'stock':_0x53a7a1,'unit':_0x54b64f,'language':_0x4beb32});}catch(_0x5df667){console[_0x1f5a47(0x1bf)](_0x5df667);}}),router[a0_0x4c9768(0x152)](a0_0x4c9768(0x193),auth,async(_0x42d1b4,_0x5ed097)=>{var _0x4e6523=a0_0x4c9768;try{const _0x138879=_0x42d1b4[_0x4e6523(0x1d3)]['id'],_0x618e8e=await transfers['findById'](_0x138879);_0x5ed097['json'](_0x42d1b4[_0x4e6523(0x169)]);return;const {date:_0x9c5e93,from_warehouse:_0x55913c,FromRoom_name:_0x56af88,to_warehouse:_0x23a0ff,ToRoom_name:_0x1b5879,prod_name:_0x595ea9,from_prod_qty:_0x199d2a,from_prod_level:_0x21197a,from_prod_isle:_0x2d5c38,from_prod_pallet:_0x1b965c,to_prod_qty:_0x1ea221,to_prod_level:_0xd3286a,to_prod_isle:_0x57dd64,to_prod_pallet:_0x396010,primary_code:_0x598e6f,secondary_code:_0x3adad9,product_code3:_0x3cc8c0,note:_0x4c38d7,invoice:_0x23eb60,expiry_date:_0x28499f}=_0x42d1b4['body'];if(typeof _0x595ea9=='string')var _0x41b4b0=[_0x42d1b4[_0x4e6523(0x169)]['prod_name']],_0x32db47=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x222)]],_0x261980=[_0x42d1b4[_0x4e6523(0x169)]['from_prod_level']],_0x37bfc7=[_0x42d1b4[_0x4e6523(0x169)]['from_prod_isle']],_0x42c7db=[_0x42d1b4['body']['from_prod_pallet']],_0x391e80=[_0x42d1b4['body']['from_types']],_0x376f45=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1c4)]],_0xa5bf03=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1e5)]],_0x3cb625=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1c9)]],_0x4cd964=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1bc)]],_0x17ac89=[_0x42d1b4['body'][_0x4e6523(0x22a)]],_0x19ec37=[_0x42d1b4['body'][_0x4e6523(0x1c8)]],_0xf65f06=[_0x42d1b4['body'][_0x4e6523(0x207)]],_0x187f87=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1f0)]],_0x1e042e=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x21b)]],_0x10ceb6=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x238)]],_0x2423ac=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x172)]],_0x38a8e2=[_0x42d1b4['body'][_0x4e6523(0x1a6)]],_0x425973=[_0x42d1b4['body'][_0x4e6523(0x1b6)]],_0x1cd75a=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x173)]],_0x31815d=[_0x42d1b4[_0x4e6523(0x169)]['expiry_date']],_0x191837=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x171)]],_0x2223ab=[_0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x18b)]];else var _0x41b4b0=[..._0x42d1b4['body'][_0x4e6523(0x22d)]],_0x19ec37=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1c8)]],_0xf65f06=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x207)]],_0x391e80=[..._0x42d1b4['body'][_0x4e6523(0x167)]],_0x17ac89=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x22a)]],_0x32db47=[..._0x42d1b4['body'][_0x4e6523(0x222)]],_0x261980=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x221)]],_0x37bfc7=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x233)]],_0x42c7db=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x20a)]],_0x376f45=[..._0x42d1b4[_0x4e6523(0x169)]['to_prod_qty']],_0xa5bf03=[..._0x42d1b4['body'][_0x4e6523(0x1e5)]],_0x3cb625=[..._0x42d1b4[_0x4e6523(0x169)]['to_prod_isle']],_0x4cd964=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1bc)]],_0x187f87=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1f0)]],_0x1e042e=[..._0x42d1b4['body']['secondary_code']],_0x10ceb6=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x238)]],_0x2423ac=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x172)]],_0x38a8e2=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1a6)]],_0x425973=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x1b6)]],_0x1cd75a=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x173)]],_0x31815d=[..._0x42d1b4[_0x4e6523(0x169)]['expiry_date']],_0x191837=[..._0x42d1b4[_0x4e6523(0x169)][_0x4e6523(0x171)]],_0x2223ab=[..._0x42d1b4['body'][_0x4e6523(0x18b)]];const _0xbf426d=_0x41b4b0[_0x4e6523(0x1c1)](_0x186a93=>{return _0x186a93={'product_name':_0x186a93};});_0x32db47['forEach']((_0x4b12f2,_0x2cd6c6)=>{var _0x506617=_0x4e6523;_0xbf426d[_0x2cd6c6][_0x506617(0x183)]=_0x4b12f2;}),_0x261980[_0x4e6523(0x1fe)]((_0x4e3bab,_0x27debf)=>{_0xbf426d[_0x27debf]['from_bay']=_0x4e3bab;}),_0x37bfc7[_0x4e6523(0x1fe)]((_0x205e83,_0x1e1f02)=>{var _0xf0a2a0=_0x4e6523;_0xbf426d[_0x1e1f02][_0xf0a2a0(0x218)]=_0x205e83;}),_0x42c7db[_0x4e6523(0x1fe)]((_0x1f87d5,_0xd9cb9d)=>{var _0x4713fa=_0x4e6523;_0xbf426d[_0xd9cb9d][_0x4713fa(0x1f1)]=_0x1f87d5;}),_0x376f45[_0x4e6523(0x1fe)]((_0x3429c6,_0x266bc0)=>{var _0xc8293b=_0x4e6523;_0xbf426d[_0x266bc0][_0xc8293b(0x1e0)]=_0x3429c6;}),_0xa5bf03['forEach']((_0x57c25e,_0x2ab28d)=>{var _0x140d78=_0x4e6523;_0xbf426d[_0x2ab28d][_0x140d78(0x203)]=_0x57c25e;}),_0x3cb625[_0x4e6523(0x1fe)]((_0x1722bd,_0x1a4026)=>{_0xbf426d[_0x1a4026]['to_bin']=_0x1722bd;}),_0x4cd964[_0x4e6523(0x1fe)]((_0x5a3990,_0x1cb360)=>{var _0x17485a=_0x4e6523;_0xbf426d[_0x1cb360][_0x17485a(0x1fa)]=_0x5a3990;}),_0x187f87[_0x4e6523(0x1fe)]((_0x4e0fad,_0x530ac7)=>{_0xbf426d[_0x530ac7]['primary_code']=_0x4e0fad;}),_0x1e042e[_0x4e6523(0x1fe)]((_0x33f9a8,_0x5ea61f)=>{var _0x167eed=_0x4e6523;_0xbf426d[_0x5ea61f][_0x167eed(0x21b)]=_0x33f9a8;}),_0x10ceb6[_0x4e6523(0x1fe)]((_0x305b2d,_0x2f3b22)=>{_0xbf426d[_0x2f3b22]['product_code']=_0x305b2d;}),_0x2423ac[_0x4e6523(0x1fe)]((_0x343fd8,_0x466169)=>{var _0x13174b=_0x4e6523;_0xbf426d[_0x466169][_0x13174b(0x157)]=_0x343fd8;}),_0x38a8e2['forEach']((_0x4fac9f,_0x87911d)=>{var _0x53dc2c=_0x4e6523;_0xbf426d[_0x87911d][_0x53dc2c(0x1a6)]=_0x4fac9f;}),_0x425973[_0x4e6523(0x1fe)]((_0x3e132c,_0x4dddb1)=>{_0xbf426d[_0x4dddb1]['secondary_unit']=_0x3e132c;}),_0x1cd75a[_0x4e6523(0x1fe)]((_0x227a2d,_0x3b6089)=>{var _0x387d8e=_0x4e6523;_0xbf426d[_0x3b6089][_0x387d8e(0x173)]=_0x227a2d;}),_0x31815d['forEach']((_0x4fe077,_0x365153)=>{var _0xe6b861=_0x4e6523;_0xbf426d[_0x365153][_0xe6b861(0x219)]=_0x4fe077;}),_0x19ec37[_0x4e6523(0x1fe)]((_0x3b1e0d,_0x4c31ff)=>{var _0x1cfa9b=_0x4e6523;_0xbf426d[_0x4c31ff][_0x1cfa9b(0x1c8)]=_0x3b1e0d;}),_0xf65f06[_0x4e6523(0x1fe)]((_0x177070,_0x5c76db)=>{var _0x5a006c=_0x4e6523;_0xbf426d[_0x5c76db][_0x5a006c(0x18f)]=_0x177070;}),_0x391e80[_0x4e6523(0x1fe)]((_0x303ede,_0x47e0d5)=>{var _0x150eb8=_0x4e6523;_0xbf426d[_0x47e0d5][_0x150eb8(0x167)]=_0x303ede;}),_0x17ac89[_0x4e6523(0x1fe)]((_0x100da5,_0x5a5989)=>{var _0x58e51b=_0x4e6523;_0xbf426d[_0x5a5989][_0x58e51b(0x22a)]=_0x100da5;}),_0x191837['forEach']((_0x1f015f,_0x580c45)=>{var _0x32af69=_0x4e6523;_0xbf426d[_0x580c45][_0x32af69(0x171)]=_0x1f015f;}),_0x2223ab['forEach']((_0x29aa56,_0x133bb4)=>{_0xbf426d[_0x133bb4]['from_rack']=_0x29aa56;});const _0x3635c8=_0xbf426d[_0x4e6523(0x175)](_0x25d45c=>_0x25d45c[_0x4e6523(0x1e0)]!=='0'&&_0x25d45c[_0x4e6523(0x1e0)]!==''||_0x25d45c[_0x4e6523(0x1fa)]!=='0'&&_0x25d45c[_0x4e6523(0x1fa)]!=='');var _0x5bc101=0x0;_0x3635c8['forEach'](_0x41a340=>{var _0x580279=_0x4e6523;parseInt(_0x41a340[_0x580279(0x183)])<parseInt(_0x41a340['to_quantity'])&&_0x5bc101++;});if(_0x5bc101!=0x0)return _0x42d1b4[_0x4e6523(0x1c3)]('errors',_0x4e6523(0x1c6)),_0x5ed097[_0x4e6523(0x192)](_0x4e6523(0x1d6));const _0xc4266c=await warehouse[_0x4e6523(0x1d5)]({'name':_0x618e8e[_0x4e6523(0x1d4)],'room':_0x618e8e[_0x4e6523(0x1cd)]});_0x618e8e['product']['forEach'](_0x4569e8=>{var _0x3f76c3=_0x4e6523;if(_0x4569e8[_0x3f76c3(0x1e0)]>0x0){const _0x33d8eb=_0xc4266c[_0x3f76c3(0x18a)]['map'](_0xb9b7e4=>{var _0x233b43=_0x3f76c3;_0xb9b7e4['product_name']==_0x4569e8[_0x233b43(0x182)]&&_0xb9b7e4[_0x233b43(0x1a8)]==_0x4569e8['from_floorlevel']&&_0xb9b7e4[_0x233b43(0x1a0)]==_0x4569e8[_0x233b43(0x167)]&&_0xb9b7e4[_0x233b43(0x1e2)]==_0x4569e8[_0x233b43(0x218)]&&_0xb9b7e4[_0x233b43(0x1bb)]==_0x4569e8['from_bay']&&_0xb9b7e4[_0x233b43(0x18f)]==_0x4569e8[_0x233b43(0x1cf)]&&_0xb9b7e4[_0x233b43(0x1c8)]==_0x4569e8['from_storage']&&(_0xb9b7e4[_0x233b43(0x21d)]=parseInt(_0xb9b7e4[_0x233b43(0x21d)])+parseInt(_0x4569e8[_0x233b43(0x1e0)]));});}}),await _0xc4266c[_0x4e6523(0x19e)]();const _0x4c15be=await warehouse[_0x4e6523(0x1d5)]({'name':_0x618e8e[_0x4e6523(0x1e4)],'room':_0x618e8e[_0x4e6523(0x1a5)]});_0x618e8e[_0x4e6523(0x236)][_0x4e6523(0x1fe)](_0x13b88b=>{var _0x2e00f3=_0x4e6523;if(_0x13b88b[_0x2e00f3(0x1e0)]>0x0){const _0x4a74a9=_0x4c15be['product_details'][_0x2e00f3(0x1c1)](_0x4e988b=>{var _0x26d672=_0x2e00f3;_0x4e988b[_0x26d672(0x182)]==_0x13b88b[_0x26d672(0x182)]&&_0x4e988b[_0x26d672(0x1a8)]==_0x13b88b[_0x26d672(0x1fa)]&&_0x4e988b[_0x26d672(0x1a0)]==_0x13b88b['to_types']&&_0x4e988b[_0x26d672(0x1e2)]==_0x13b88b[_0x26d672(0x16c)]&&_0x4e988b[_0x26d672(0x1bb)]==_0x13b88b[_0x26d672(0x203)]&&_0x4e988b[_0x26d672(0x18f)]==_0x13b88b[_0x26d672(0x18f)]&&_0x4e988b[_0x26d672(0x1c8)]==_0x13b88b[_0x26d672(0x1c8)]&&(_0x4e988b[_0x26d672(0x21d)]=parseInt(_0x4e988b[_0x26d672(0x21d)])-parseInt(_0x13b88b[_0x26d672(0x1e0)]));});}}),await _0x4c15be['save'](),_0x618e8e[_0x4e6523(0x1c0)]=_0x9c5e93,_0x618e8e[_0x4e6523(0x1d4)]=_0x55913c,_0x618e8e[_0x4e6523(0x1e4)]=_0x23a0ff,_0x618e8e[_0x4e6523(0x236)]=_0x3635c8,_0x618e8e['note']=_0x4c38d7,_0x618e8e['invoice']=_0x23eb60;const _0xc9695b=await _0x618e8e[_0x4e6523(0x19e)]();console[_0x4e6523(0x1bf)](_0xc9695b);const _0x1958f4=await warehouse[_0x4e6523(0x1d5)]({'name':_0x55913c,'room':_0x56af88});_0xc9695b['product']['forEach'](_0x2e3ec3=>{var _0x1d9f58=_0x4e6523;if(_0x2e3ec3[_0x1d9f58(0x1e0)]>0x0){const _0xbf1c45=_0x1958f4[_0x1d9f58(0x18a)]['map'](_0x24b5be=>{var _0x41ede4=_0x1d9f58;_0x24b5be[_0x41ede4(0x182)]==_0x2e3ec3[_0x41ede4(0x182)]&&_0x24b5be[_0x41ede4(0x1a8)]==_0x2e3ec3[_0x41ede4(0x1f1)]&&_0x24b5be[_0x41ede4(0x1a0)]==_0x2e3ec3[_0x41ede4(0x167)]&&_0x24b5be['bin']==_0x2e3ec3[_0x41ede4(0x218)]&&_0x24b5be[_0x41ede4(0x1bb)]==_0x2e3ec3[_0x41ede4(0x19a)]&&_0x24b5be['rack']==_0x2e3ec3[_0x41ede4(0x1cf)]&&_0x24b5be[_0x41ede4(0x1c8)]==_0x2e3ec3['from_storage']&&(_0x24b5be['product_stock']=parseInt(_0x24b5be[_0x41ede4(0x21d)])-parseInt(_0x2e3ec3[_0x41ede4(0x1e0)]));});}}),await _0x1958f4[_0x4e6523(0x19e)]();const _0x34a695=await warehouse[_0x4e6523(0x1d5)]({'name':_0x23a0ff,'room':_0x1b5879});_0xc9695b['product'][_0x4e6523(0x1fe)](_0x553f21=>{var _0x31647e=_0x4e6523;if(_0x553f21['to_quantity']>0x0){var _0x323591=0x0;const _0x238304=_0x34a695[_0x31647e(0x18a)][_0x31647e(0x1c1)](_0x39f0fc=>{var _0x1a7483=_0x31647e;_0x39f0fc[_0x1a7483(0x182)]==_0x553f21[_0x1a7483(0x182)]&&_0x39f0fc[_0x1a7483(0x1a8)]==_0x553f21[_0x1a7483(0x1fa)]&&_0x39f0fc['type']==_0x553f21[_0x1a7483(0x22a)]&&_0x39f0fc[_0x1a7483(0x1e2)]==_0x553f21[_0x1a7483(0x16c)]&&_0x39f0fc[_0x1a7483(0x1bb)]==_0x553f21[_0x1a7483(0x203)]&&_0x39f0fc[_0x1a7483(0x18f)]==_0x553f21[_0x1a7483(0x18f)]&&_0x39f0fc['storage']==_0x553f21[_0x1a7483(0x1c8)]&&(_0x39f0fc[_0x1a7483(0x21d)]=parseInt(_0x39f0fc[_0x1a7483(0x21d)])+parseInt(_0x553f21[_0x1a7483(0x1e0)]),_0x323591++);});_0x323591=='0'&&(_0x34a695[_0x31647e(0x18a)]=_0x34a695[_0x31647e(0x18a)][_0x31647e(0x1ea)]({'product_name':_0x553f21[_0x31647e(0x182)],'product_stock':_0x553f21['to_quantity'],'bay':_0x553f21[_0x31647e(0x203)],'bin':_0x553f21[_0x31647e(0x16c)],'type':_0x553f21[_0x31647e(0x22a)],'floorlevel':_0x553f21[_0x31647e(0x1fa)],'storage':_0x553f21[_0x31647e(0x1c8)],'rack':_0x553f21[_0x31647e(0x18f)],'product_code':_0x553f21[_0x31647e(0x18e)],'primary_code':_0x553f21[_0x31647e(0x1f0)],'secondary_code':_0x553f21[_0x31647e(0x21b)],'maxProducts':_0x553f21[_0x31647e(0x157)],'storage':_0x553f21['storage'],'rack':_0x553f21[_0x31647e(0x18f)]}));}}),await _0x34a695[_0x4e6523(0x19e)](),_0x42d1b4['flash'](_0x4e6523(0x228),'Transfer\x20Edit\x20Successfully'),_0x5ed097['redirect'](_0x4e6523(0x1b3));}catch(_0x156412){console[_0x4e6523(0x1bf)](_0x156412);}}),router[a0_0x4c9768(0x152)](a0_0x4c9768(0x209),async(_0x2a4233,_0xef186)=>{var _0x3d16fd=a0_0x4c9768;const {FromWareHouse:_0x19cd68,FromRoom:_0x4ba5a9,ToWarehouse:_0x30de1b,ToRoom:_0x418d7e,primary_code:_0x44a006,Roomslist:_0x266789}=_0x2a4233[_0x3d16fd(0x169)],_0x3d5bce=_0x266789[_0x3d16fd(0x1da)](','),_0x4e1103=[];async function _0x267c9b(_0x3a2efb){var _0x44262a=_0x3d16fd;const _0x3850be=await warehouse[_0x44262a(0x1fc)]([{'$match':{'name':_0x19cd68,'room':_0x3a2efb}},{'$unwind':_0x44262a(0x200)},{'$match':{'product_details.primary_code':_0x44a006}},{'$group':{'_id':_0x44262a(0x196),'name':{'$first':_0x44262a(0x1cb)},'instock':{'$first':_0x44262a(0x190)},'primary_code':{'$first':_0x44262a(0x176)},'secondary_code':{'$first':_0x44262a(0x229)},'product_code':{'$first':_0x44262a(0x1f3)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x44262a(0x1b7)},'type':{'$first':_0x44262a(0x19b)},'pallet':{'$first':_0x44262a(0x187)},'unit':{'$first':_0x44262a(0x1f7)},'secondary_unit':{'$first':_0x44262a(0x1b1)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x44262a(0x1a2)},'expiry_date':{'$first':_0x44262a(0x20e)},'production_date':{'$first':_0x44262a(0x197)},'batch_code':{'$first':_0x44262a(0x1eb)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x44262a(0x15b)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]),_0x3d0d87=await warehouse[_0x44262a(0x1fc)]([{'$match':{'name':_0x19cd68,'room':_0x3a2efb}},{'$unwind':_0x44262a(0x200)},{'$match':{'product_details.secondary_code':_0x44a006}},{'$group':{'_id':_0x44262a(0x196),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x44262a(0x190)},'primary_code':{'$first':_0x44262a(0x176)},'secondary_code':{'$first':_0x44262a(0x229)},'product_code':{'$first':_0x44262a(0x1f3)},'level':{'$first':_0x44262a(0x1f2)},'isle':{'$first':_0x44262a(0x1b7)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x44262a(0x187)},'unit':{'$first':_0x44262a(0x1f7)},'secondary_unit':{'$first':_0x44262a(0x1b1)},'storage':{'$first':_0x44262a(0x15c)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x44262a(0x20e)},'production_date':{'$first':_0x44262a(0x197)},'batch_code':{'$first':_0x44262a(0x1eb)},'maxPerUnit':{'$first':_0x44262a(0x1d2)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x44262a(0x15b)},'maxProducts':{'$first':_0x44262a(0x214)}}}]);if(_0x3850be[_0x44262a(0x17b)]>0x0)_0x4e1103[_0x44262a(0x15a)](_0x3850be);else _0x3d0d87[_0x44262a(0x17b)]>0x0&&_0x4e1103[_0x44262a(0x15a)](_0x3d0d87);}const _0x552bad=_0x3d5bce[_0x3d16fd(0x1c1)](_0x5e1195=>_0x267c9b(_0x5e1195));await Promise[_0x3d16fd(0x224)](_0x552bad),_0xef186['json'](_0x4e1103);}),router[a0_0x4c9768(0x152)]('/barcode_scanner2',async(_0x3a33bf,_0x424a7c)=>{var _0x5e3204=a0_0x4c9768;try{const {FromWareHouse:_0x56dd61,FromRoom:_0x338451,ToWarehouse:_0x12e816,ToRoom:_0x8d7c0,secondary_code:_0x1eeabb}=_0x3a33bf[_0x5e3204(0x169)],_0xed390f=await warehouse[_0x5e3204(0x1fc)]([{'$match':{'name':_0x56dd61}},{'$unwind':_0x5e3204(0x200)},{'$match':{'product_details.secondary_code':_0x1eeabb}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5e3204(0x1cb)},'primary_code':{'$first':_0x5e3204(0x176)},'secondary_code':{'$first':_0x5e3204(0x229)},'product_code':{'$first':_0x5e3204(0x1f3)},'instock':{'$first':_0x5e3204(0x190)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x5e3204(0x162)},'pallet':{'$first':_0x5e3204(0x235)},'maxProducts':{'$first':_0x5e3204(0x214)},'unit':{'$first':_0x5e3204(0x1f7)}}}]);_0x424a7c[_0x5e3204(0x212)](0xc8)[_0x5e3204(0x1e9)](_0xed390f);}catch(_0x295eb4){_0x424a7c[_0x5e3204(0x212)](0x194)[_0x5e3204(0x1e9)]({'message':_0x295eb4['message']});}}),router['post']('/barcode_scanner3',async(_0x5b6be8,_0x17d9f5)=>{var _0x5dbf85=a0_0x4c9768;try{const {FromWareHouse:_0x430814,FromRoom:_0x1b3510,ToWarehouse:_0x3817b3,ToRoom:_0x46e246,product_code:_0x5093d0}=_0x5b6be8['body'],_0x490cd9=await warehouse[_0x5dbf85(0x1fc)]([{'$match':{'name':_0x430814}},{'$unwind':_0x5dbf85(0x200)},{'$match':{'product_details.product_code':_0x5093d0}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5dbf85(0x1cb)},'primary_code':{'$first':_0x5dbf85(0x176)},'secondary_code':{'$first':_0x5dbf85(0x229)},'product_code':{'$first':_0x5dbf85(0x1f3)},'instock':{'$first':_0x5dbf85(0x190)},'warehouse':{'$first':'$name'},'level':{'$first':_0x5dbf85(0x19f)},'isle':{'$first':_0x5dbf85(0x162)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x5dbf85(0x1f7)}}}]);_0x17d9f5[_0x5dbf85(0x212)](0xc8)['json'](_0x490cd9);}catch(_0x57aa21){_0x17d9f5[_0x5dbf85(0x212)](0x194)[_0x5dbf85(0x1e9)]({'message':_0x57aa21[_0x5dbf85(0x1b8)]});}}),router[a0_0x4c9768(0x152)](a0_0x4c9768(0x17a),async(_0x27f94e,_0x56eedd)=>{var _0x124137=a0_0x4c9768;const {level:_0x416705,isle:_0x59a265,pallet:_0x379764,warehouses:_0x5b85d6,room:_0x2fd2f8}=_0x27f94e[_0x124137(0x169)];try{const _0x227f02=await warehouse[_0x124137(0x1fc)]([{'$match':{'name':_0x5b85d6,'room':_0x2fd2f8}},{'$unwind':_0x124137(0x200)},{'$match':{'product_details.level':parseInt(_0x416705),'product_details.isle':_0x59a265,'product_details.pallet':parseInt(_0x379764)}},{'$group':{'_id':_0x124137(0x196),'name':{'$first':_0x124137(0x1cb)},'product_stock':{'$first':_0x124137(0x190)},'level':{'$first':_0x124137(0x19f)},'isle':{'$first':_0x124137(0x162)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x124137(0x214)}}}]);_0x56eedd['status'](0xc8)[_0x124137(0x1e9)](_0x227f02);}catch(_0x4ab1c0){_0x56eedd[_0x124137(0x212)](0x194)[_0x124137(0x1e9)]({'message':_0x4ab1c0[_0x124137(0x1b8)]});}}),module[a0_0x4c9768(0x17d)]=router;