function a0_0x9bbf(_0x53e1d5,_0x306423){var _0x40bcba=a0_0x40bc();return a0_0x9bbf=function(_0x9bbf7b,_0x175926){_0x9bbf7b=_0x9bbf7b-0x114;var _0x47ab4e=_0x40bcba[_0x9bbf7b];return _0x47ab4e;},a0_0x9bbf(_0x53e1d5,_0x306423);}var a0_0x17dbb5=a0_0x9bbf;(function(_0x25552b,_0x324507){var _0xce3a38=a0_0x9bbf,_0x20fe85=_0x25552b();while(!![]){try{var _0x131860=-parseInt(_0xce3a38(0x14c))/0x1*(parseInt(_0xce3a38(0x1a2))/0x2)+-parseInt(_0xce3a38(0x173))/0x3*(parseInt(_0xce3a38(0x137))/0x4)+parseInt(_0xce3a38(0x1c1))/0x5+-parseInt(_0xce3a38(0x19e))/0x6+-parseInt(_0xce3a38(0x1fa))/0x7+-parseInt(_0xce3a38(0x1dd))/0x8*(parseInt(_0xce3a38(0x183))/0x9)+parseInt(_0xce3a38(0x1e7))/0xa;if(_0x131860===_0x324507)break;else _0x20fe85['push'](_0x20fe85['shift']());}catch(_0x4d7028){_0x20fe85['push'](_0x20fe85['shift']());}}}(a0_0x40bc,0xe17cb));const express=require(a0_0x17dbb5(0x13a)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x17dbb5(0x172)),users=require(a0_0x17dbb5(0x12d)),nodemailer=require(a0_0x17dbb5(0x203));router['get'](a0_0x17dbb5(0x153),auth,async(_0x15d4fa,_0x5ca6f2)=>{var _0x1378fb=a0_0x17dbb5;try{const {username:_0x11c20f,email:_0x176cd0,role:_0x779fc9}=_0x15d4fa['user'],_0x1e674a=_0x15d4fa['user'],_0x4a9ed0=await profile['findOne']({'email':_0x1e674a['email']}),_0x385c9c=await master_shop['find']();console['log'](_0x1378fb(0x206),_0x385c9c);let _0x165cc1;if(_0x1e674a['role']==_0x1378fb(0x1d6)){const _0x36d50f=await staff['findOne']({'email':_0x1e674a[_0x1378fb(0x1ed)]});_0x165cc1=await transfers['find']({'from_warehouse':_0x36d50f[_0x1378fb(0x143)]});}else _0x165cc1=await transfers[_0x1378fb(0x19d)]([{'$unwind':'$product'},{'$group':{'_id':_0x1378fb(0x1a3),'invoice':{'$first':'$invoice'},'date':{'$first':_0x1378fb(0x1bf)},'from_warehouse':{'$first':_0x1378fb(0x192)},'to_warehouse':{'$first':_0x1378fb(0x1ca)},'from_room_name':{'$addToSet':_0x1378fb(0x17b)},'to_room_name':{'$addToSet':_0x1378fb(0x125)},'finalize':{'$first':_0x1378fb(0x1c8)},'isAllowEdit':{'$first':_0x1378fb(0x135)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x385c9c[0x0]['language']==_0x1378fb(0x177)){var _0x3700fc=users['English'];console['log'](_0x3700fc);}else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]==_0x1378fb(0x1a1))var _0x3700fc=users[_0x1378fb(0x1a1)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]==_0x1378fb(0x1ab))var _0x3700fc=users[_0x1378fb(0x1ab)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]==_0x1378fb(0x1ad))var _0x3700fc=users[_0x1378fb(0x1ad)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]==_0x1378fb(0x127))var _0x3700fc=users[_0x1378fb(0x127)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]==_0x1378fb(0x1f3))var _0x3700fc=users[_0x1378fb(0x1e0)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]=='Chinese')var _0x3700fc=users[_0x1378fb(0x155)];else{if(_0x385c9c[0x0][_0x1378fb(0x17e)]=='Arabic\x20(ae)')var _0x3700fc=users[_0x1378fb(0x15a)];}}}}}}}_0x5ca6f2['render']('transfer',{'success':_0x15d4fa[_0x1378fb(0x133)](_0x1378fb(0x1f9)),'errors':_0x15d4fa['flash'](_0x1378fb(0x1af)),'role':_0x1e674a,'profile':_0x4a9ed0,'master_shop':_0x385c9c,'transfer':_0x165cc1,'language':_0x3700fc});}catch(_0x768316){console['log'](_0x768316);}});async function getRandom8DigitNumber(){var _0x4a485f=a0_0x17dbb5;const _0x1968fd=0x989680,_0x467e0f=0x5f5e0ff,_0x1ec2a8=Math['floor'](Math[_0x4a485f(0x147)]()*(_0x467e0f-_0x1968fd+0x1))+_0x1968fd;var _0x1cd3f5;const _0x2bdbd5=await transfers[_0x4a485f(0x170)]({'invoice':_0x4a485f(0x117)+_0x1ec2a8});return _0x2bdbd5&&_0x2bdbd5[_0x4a485f(0x1b1)]>0x0?_0x1cd3f5=_0x4a485f(0x117)+_0x1ec2a8:_0x1cd3f5=_0x4a485f(0x117)+_0x1ec2a8,_0x1cd3f5;}router[a0_0x17dbb5(0x1da)](a0_0x17dbb5(0x19c),auth,async(_0x5daeba,_0xd28d4a)=>{var _0x446464=a0_0x17dbb5;try{const {username:_0x4d2029,email:_0x55d756,role:_0x47f3bd}=_0x5daeba['user'],_0x4af449=_0x5daeba['user'],_0x17ce13=await profile[_0x446464(0x170)]({'email':_0x4af449[_0x446464(0x1ed)]}),_0x39e783=await master_shop[_0x446464(0x145)]();console[_0x446464(0x1ae)](_0x446464(0x206),_0x39e783);let _0x1332ae;if(_0x4af449['role']==_0x446464(0x1d6)){const _0x487f4b=await staff[_0x446464(0x170)]({'email':_0x4af449[_0x446464(0x1ed)]});_0x1332ae=await warehouse[_0x446464(0x19d)]([{'$match':{'status':_0x446464(0x1c7),'name':_0x487f4b['warehouse'],'warehouse_category':_0x446464(0x116)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x1332ae=await warehouse[_0x446464(0x19d)]([{'$match':{'status':'Enabled','warehouse_category':_0x446464(0x116)}},{'$group':{'_id':'$name','name':{'$first':_0x446464(0x19f)}}}]);var _0x2cc974=[_0x446464(0x1e6),_0x446464(0x1a8),_0x446464(0x1a4)];const _0x56fa52=await transfers[_0x446464(0x145)]({}),_0x24828f=_0x56fa52['length']+0x1,_0x18c178=_0x446464(0x117)+_0x24828f[_0x446464(0x165)]()[_0x446464(0x11d)](0x5,'0');if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x177)){var _0x3caa5a=users[_0x446464(0x1fb)];console[_0x446464(0x1ae)](_0x3caa5a);}else{if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x1a1))var _0x3caa5a=users['Hindi'];else{if(_0x39e783[0x0]['language']=='German')var _0x3caa5a=users[_0x446464(0x1ab)];else{if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x1ad))var _0x3caa5a=users[_0x446464(0x1ad)];else{if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x127))var _0x3caa5a=users[_0x446464(0x127)];else{if(_0x39e783[0x0]['language']==_0x446464(0x1f3))var _0x3caa5a=users['Portuguese'];else{if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x155))var _0x3caa5a=users[_0x446464(0x155)];else{if(_0x39e783[0x0][_0x446464(0x17e)]==_0x446464(0x1f7))var _0x3caa5a=users[_0x446464(0x15a)];}}}}}}}const _0x508abb=getRandom8DigitNumber();_0x508abb['then'](_0x5d5ee8=>{var _0x4fc47e=_0x446464;_0xd28d4a[_0x4fc47e(0x13c)](_0x4fc47e(0x18e),{'success':_0x5daeba[_0x4fc47e(0x133)](_0x4fc47e(0x1f9)),'errors':_0x5daeba[_0x4fc47e(0x133)](_0x4fc47e(0x1af)),'role':_0x4af449,'profile':_0x17ce13,'master_shop':_0x39e783,'warehouse':_0x1332ae,'language':_0x3caa5a,'rooms_data':_0x2cc974,'invoice':_0x5d5ee8});})[_0x446464(0x152)](_0x3388fb=>{var _0x5804bf=_0x446464;_0x5daeba[_0x5804bf(0x133)](_0x5804bf(0x1af),_0x5804bf(0x1ac)),_0xd28d4a['redirect']('/transfer/view');});}catch(_0x2383d1){console['log'](_0x2383d1);}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x19c),auth,async(_0x191d23,_0x3ce401)=>{var _0x5f1fdc=a0_0x17dbb5;try{console[_0x5f1fdc(0x1ae)](_0x191d23[_0x5f1fdc(0x1d2)]);const {date:_0x4e7ecd,from_warehouse:_0xa81007,FromRoom_name:_0x3104b6,to_warehouse:_0x412cb0,ToRoom_name:_0x1dfaef,prod_name:_0xad12d4,from_prod_qty:_0x4b9001,from_prod_level:_0xd91f33,from_prod_isle:_0x118a71,from_prod_pallet:_0x2ed16f,to_prod_qty:_0x521e10,to_prod_level:_0x89429e,to_prod_isle:_0x576a88,to_prod_pallet:_0x5d9583,primary_code:_0x55661c,secondary_code:_0x14014d,product_code3:_0x5db3f8,note:_0x1a4c89,MaxStocks_data2:_0x411258,invoice:_0x5ed212,expiry_date:_0x20a336}=_0x191d23[_0x5f1fdc(0x1d2)];if(typeof _0xad12d4==_0x5f1fdc(0x168))var _0x21fd3b=[_0x191d23['body'][_0x5f1fdc(0x14f)]],_0x23a046=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x13d)]],_0x5c251e=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x18a)]],_0xf8459d=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1b6)]],_0x53b138=[_0x191d23[_0x5f1fdc(0x1d2)]['to_prod_level']],_0x3f29cf=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x11f)]],_0x5b9ecd=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x12e)]],_0x5ebee9=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1f8)]],_0x35c837=[_0x191d23[_0x5f1fdc(0x1d2)]['MaxStocks_data2']],_0x3279fe=[_0x191d23['body']['primary_unit']],_0xeeda16=[_0x191d23[_0x5f1fdc(0x1d2)]['secondary_unit']],_0x590510=[_0x191d23[_0x5f1fdc(0x1d2)]['batch_code']],_0x9fee97=[_0x191d23['body']['expiry_date']],_0x4fadf3=[_0x191d23[_0x5f1fdc(0x1d2)]['max_per_unit']],_0x2fd134=[_0x191d23[_0x5f1fdc(0x1d2)]['production_date']],_0x24c606=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x17a)]],_0x1831f0=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1ec)]],_0x406bb1=[_0x191d23['body'][_0x5f1fdc(0x129)]],_0x5b5642=[_0x191d23['body'][_0x5f1fdc(0x162)]],_0x5169e0=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x166)]],_0x4c55e2=[_0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x197)]];else var _0x21fd3b=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x14f)]],_0x23a046=[..._0x191d23[_0x5f1fdc(0x1d2)]['from_prod_qty']],_0x5c251e=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x18a)]],_0xf8459d=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1b6)]],_0x53b138=[..._0x191d23['body'][_0x5f1fdc(0x1e3)]],_0x3f29cf=[..._0x191d23['body'][_0x5f1fdc(0x11f)]],_0x5b9ecd=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x12e)]],_0x5ebee9=[..._0x191d23['body'][_0x5f1fdc(0x1f8)]],_0x35c837=[..._0x191d23['body'][_0x5f1fdc(0x11c)]],_0x3279fe=[..._0x191d23['body']['primary_unit']],_0xeeda16=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x181)]],_0x590510=[..._0x191d23['body'][_0x5f1fdc(0x186)]],_0x9fee97=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x17f)]],_0x4fadf3=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x149)]],_0x2fd134=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1eb)]],_0x24c606=[..._0x191d23[_0x5f1fdc(0x1d2)]['prod_cat']],_0x1831f0=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x1ec)]],_0x406bb1=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x129)]],_0x5b5642=[..._0x191d23[_0x5f1fdc(0x1d2)][_0x5f1fdc(0x162)]],_0x5169e0=[..._0x191d23[_0x5f1fdc(0x1d2)]['to_invoice']],_0x4c55e2=[..._0x191d23[_0x5f1fdc(0x1d2)]['id_transaction']];const _0x2658fd=_0x21fd3b['map'](_0x964b83=>{return _0x964b83={'product_name':_0x964b83};});_0x23a046['forEach']((_0x50c627,_0xd4d539)=>{var _0xdb93d2=_0x5f1fdc;_0x2658fd[_0xd4d539][_0xdb93d2(0x179)]=_0x50c627;}),_0x5b5642[_0x5f1fdc(0x205)]((_0x2f688f,_0x93a331)=>{_0x2658fd[_0x93a331]['from_invoice']=_0x2f688f;}),_0x5169e0[_0x5f1fdc(0x205)]((_0x9333ea,_0x9f02e7)=>{var _0x1ed559=_0x5f1fdc;_0x2658fd[_0x9f02e7][_0x1ed559(0x1f0)]=_0x9333ea;}),_0x4c55e2[_0x5f1fdc(0x205)]((_0x45572b,_0x78c0b0)=>{var _0x16ef17=_0x5f1fdc;_0x2658fd[_0x78c0b0][_0x16ef17(0x171)]=_0x45572b;}),_0x5c251e['forEach']((_0x4aee7b,_0x54616a)=>{var _0x4cadfa=_0x5f1fdc;_0x1831f0[_0x4cadfa(0x205)]((_0x335f84,_0x295e26)=>{var _0x916edf=_0x4cadfa;if(_0x335f84==_0x916edf(0x150)&&_0x54616a==_0x295e26){var _0x5cb9a7=_0x4aee7b[_0x916edf(0x199)](0x3);_0x2658fd[_0x54616a][_0x916edf(0x1e2)]=_0x4aee7b[0x0],_0x2658fd[_0x54616a]['from_rack']=_0x4aee7b[0x1],_0x2658fd[_0x54616a][_0x916edf(0x1d8)]=0x0,_0x2658fd[_0x54616a][_0x916edf(0x1cb)]=0x0,_0x2658fd[_0x54616a][_0x916edf(0x16a)]='Floor',_0x2658fd[_0x54616a][_0x916edf(0x119)]=_0x5cb9a7;}else{if(_0x335f84==_0x916edf(0x190)&&_0x54616a==_0x295e26){var _0x5cb9a7=_0x4aee7b[_0x916edf(0x199)](0x3);_0x2658fd[_0x54616a]['from_storage']=_0x4aee7b[0x0],_0x2658fd[_0x54616a][_0x916edf(0x18d)]=_0x4aee7b[0x1],_0x2658fd[_0x54616a][_0x916edf(0x1d8)]=0x0,_0x2658fd[_0x54616a][_0x916edf(0x1cb)]=0x0,_0x2658fd[_0x54616a]['from_types']=_0x916edf(0x201),_0x2658fd[_0x54616a][_0x916edf(0x119)]=_0x4aee7b[0x5];}else{if(_0x54616a==_0x295e26){if(_0x4aee7b[0x0]=='A'&&_0x4aee7b[0x1]=='L'&&_0x4aee7b[0x2]=='L')console['log'](_0x335f84+_0x916edf(0x12a)+_0x54616a+_0x916edf(0x12a)+_0x295e26+_0x916edf(0x12a)+_0x4aee7b+'here'),_0x2658fd[_0x54616a][_0x916edf(0x1e2)]=_0x4aee7b[0x0],_0x2658fd[_0x54616a][_0x916edf(0x18d)]=_0x4aee7b[0x1],_0x2658fd[_0x54616a][_0x916edf(0x1d8)]=0x0,_0x2658fd[_0x54616a][_0x916edf(0x1cb)]=0x0,_0x2658fd[_0x54616a][_0x916edf(0x16a)]=_0x916edf(0x201),_0x2658fd[_0x54616a][_0x916edf(0x119)]=_0x4aee7b[0x3];else{var _0x186ea6;if(_0x4aee7b[0x4]=='L')_0x186ea6='Level';else _0x4aee7b[0x4]=='F'&&(_0x186ea6='Floor');_0x2658fd[_0x54616a][_0x916edf(0x1e2)]=_0x4aee7b[0x0],_0x2658fd[_0x54616a]['from_rack']=_0x4aee7b[0x1],_0x2658fd[_0x54616a][_0x916edf(0x1d8)]=_0x4aee7b[0x2],_0x2658fd[_0x54616a]['from_bin']=_0x4aee7b[0x3],_0x2658fd[_0x54616a]['from_types']=_0x186ea6,_0x2658fd[_0x54616a]['from_floorlevel']=_0x4aee7b[0x5];}}}}});}),_0xf8459d['forEach']((_0x4d9ec4,_0x2359fc)=>{var _0x211675=_0x5f1fdc;_0x2658fd[_0x2359fc][_0x211675(0x1b4)]=_0x4d9ec4;}),_0x53b138[_0x5f1fdc(0x205)]((_0x12bcde,_0x45e198)=>{var _0x3115ae=_0x5f1fdc;_0x406bb1[_0x3115ae(0x205)]((_0x189dd9,_0x3f840a)=>{var _0x44dc64=_0x3115ae;if(_0x189dd9=='Receiving\x20Area'&&_0x45e198==_0x3f840a){var _0x4c7783=_0x12bcde['slice'](0x3);_0x2658fd[_0x45e198][_0x44dc64(0x1de)]=_0x12bcde[0x0],_0x2658fd[_0x45e198][_0x44dc64(0x1b8)]=_0x12bcde[0x1],_0x2658fd[_0x45e198][_0x44dc64(0x16f)]=0x0,_0x2658fd[_0x45e198][_0x44dc64(0x1a0)]=0x0,_0x2658fd[_0x45e198][_0x44dc64(0x200)]='Floor',_0x2658fd[_0x45e198]['to_floorlevel']=_0x4c7783;}else{if(_0x189dd9==_0x44dc64(0x190)&&_0x45e198==_0x3f840a){var _0x4c7783=_0x12bcde[_0x44dc64(0x199)](0x3);_0x2658fd[_0x45e198][_0x44dc64(0x1de)]=_0x12bcde[0x0],_0x2658fd[_0x45e198][_0x44dc64(0x1b8)]=_0x12bcde[0x1],_0x2658fd[_0x45e198][_0x44dc64(0x16f)]=0x0,_0x2658fd[_0x45e198][_0x44dc64(0x1a0)]=0x0,_0x2658fd[_0x45e198]['to_types']=_0x44dc64(0x201),_0x2658fd[_0x45e198][_0x44dc64(0x130)]=_0x12bcde[0x5];}else{if(_0x45e198==_0x3f840a){if(_0x12bcde[0x0]=='A'&&_0x12bcde[0x1]=='L'&&_0x12bcde[0x2]=='L')console['log'](_0x189dd9+_0x44dc64(0x12a)+_0x45e198+_0x44dc64(0x12a)+_0x3f840a+_0x44dc64(0x12a)+_0x12bcde+_0x44dc64(0x1ff)),_0x2658fd[_0x45e198][_0x44dc64(0x1de)]=_0x12bcde[0x0],_0x2658fd[_0x45e198][_0x44dc64(0x1b8)]=_0x12bcde[0x1],_0x2658fd[_0x45e198][_0x44dc64(0x16f)]=0x0,_0x2658fd[_0x45e198][_0x44dc64(0x1a0)]=0x0,_0x2658fd[_0x45e198][_0x44dc64(0x200)]=_0x44dc64(0x201),_0x2658fd[_0x45e198][_0x44dc64(0x130)]=_0x12bcde[0x3];else{var _0x32ab31;if(_0x12bcde[0x4]=='L')_0x32ab31=_0x44dc64(0x159);else _0x12bcde[0x4]=='F'&&(_0x32ab31=_0x44dc64(0x201));_0x2658fd[_0x45e198][_0x44dc64(0x1de)]=_0x12bcde[0x0],_0x2658fd[_0x45e198][_0x44dc64(0x1b8)]=_0x12bcde[0x1],_0x2658fd[_0x45e198][_0x44dc64(0x16f)]=_0x12bcde[0x2],_0x2658fd[_0x45e198][_0x44dc64(0x1a0)]=_0x12bcde[0x3],_0x2658fd[_0x45e198][_0x44dc64(0x200)]=_0x32ab31,_0x2658fd[_0x45e198][_0x44dc64(0x130)]=_0x12bcde[0x5];}}}}});}),_0x3f29cf['forEach']((_0x3914ee,_0x127751)=>{var _0x575b3e=_0x5f1fdc;_0x2658fd[_0x127751][_0x575b3e(0x11f)]=_0x3914ee;}),_0x5b9ecd[_0x5f1fdc(0x205)]((_0x439eaa,_0x27101d)=>{var _0x217a82=_0x5f1fdc;_0x2658fd[_0x27101d][_0x217a82(0x12e)]=_0x439eaa;}),_0x5ebee9[_0x5f1fdc(0x205)]((_0x38b461,_0x2b9837)=>{var _0x43437e=_0x5f1fdc;_0x2658fd[_0x2b9837][_0x43437e(0x1e9)]=_0x38b461;}),_0x35c837[_0x5f1fdc(0x205)]((_0x252a5d,_0x2cbe23)=>{var _0x17a849=_0x5f1fdc;_0x2658fd[_0x2cbe23][_0x17a849(0x184)]=_0x252a5d;}),_0x3279fe[_0x5f1fdc(0x205)]((_0x39b4e4,_0x50d512)=>{_0x2658fd[_0x50d512]['unit']=_0x39b4e4;}),_0xeeda16[_0x5f1fdc(0x205)]((_0x3ad2aa,_0xbd5fb0)=>{var _0x365cc0=_0x5f1fdc;_0x2658fd[_0xbd5fb0][_0x365cc0(0x181)]=_0x3ad2aa;}),_0x590510[_0x5f1fdc(0x205)]((_0x788422,_0x17f01d)=>{var _0x1f6e0=_0x5f1fdc;_0x2658fd[_0x17f01d][_0x1f6e0(0x186)]=_0x788422;}),_0x9fee97[_0x5f1fdc(0x205)]((_0x330f68,_0x2f4360)=>{var _0x39d551=_0x5f1fdc;_0x2658fd[_0x2f4360][_0x39d551(0x17f)]=_0x330f68;}),_0x4fadf3[_0x5f1fdc(0x205)]((_0x3b2923,_0x224660)=>{_0x2658fd[_0x224660]['maxperunit']=_0x3b2923;}),_0x2fd134[_0x5f1fdc(0x205)]((_0x3fc895,_0x31e63b)=>{var _0x712af6=_0x5f1fdc;_0x2658fd[_0x31e63b][_0x712af6(0x1eb)]=_0x3fc895;}),_0x24c606[_0x5f1fdc(0x205)]((_0x1b269a,_0xbc3200)=>{var _0x399479=_0x5f1fdc;_0x2658fd[_0xbc3200][_0x399479(0x17a)]=_0x1b269a;}),_0x1831f0['forEach']((_0x53bae2,_0x2587b4)=>{var _0x586ee7=_0x5f1fdc;_0x2658fd[_0x2587b4][_0x586ee7(0x1fc)]=_0x53bae2;}),_0x406bb1[_0x5f1fdc(0x205)]((_0x2bcef1,_0x304344)=>{var _0x14c10b=_0x5f1fdc;_0x2658fd[_0x304344][_0x14c10b(0x1d3)]=_0x2bcef1;});const _0x4fa05e=_0x2658fd[_0x5f1fdc(0x160)](_0x216783=>_0x216783['to_quantity']!=='0'&&_0x216783[_0x5f1fdc(0x1b4)]!==''||_0x216783[_0x5f1fdc(0x130)]!=='0'&&_0x216783[_0x5f1fdc(0x130)]!==''),_0x5c3f09=new transfers({'date':_0x4e7ecd,'from_warehouse':_0xa81007,'to_warehouse':_0x412cb0,'product':_0x4fa05e,'note':_0x1a4c89,'invoice':_0x5ed212}),_0x505df4=await _0x5c3f09['save']();_0x191d23[_0x5f1fdc(0x133)]('success',_0x5f1fdc(0x151)),_0x3ce401[_0x5f1fdc(0x14e)]('/transfer/preview/'+_0x505df4[_0x5f1fdc(0x11e)]);}catch(_0x11d9a1){console[_0x5f1fdc(0x1ae)](_0x11d9a1),_0x3ce401[_0x5f1fdc(0x1c9)](0xc8)[_0x5f1fdc(0x1c0)]({'errorMessage':_0x11d9a1[_0x5f1fdc(0x114)]});}}),router[a0_0x17dbb5(0x1da)](a0_0x17dbb5(0x148),auth,async(_0x1d2ead,_0x710830)=>{var _0x37d4d3=a0_0x17dbb5;try{const {username:_0x6baeb6,email:_0x5063b1,role:_0x29a4e6}=_0x1d2ead[_0x37d4d3(0x169)],_0xa07149=_0x1d2ead[_0x37d4d3(0x169)],_0x5c4112=await profile[_0x37d4d3(0x170)]({'email':_0xa07149[_0x37d4d3(0x1ed)]}),_0x5ccd6d=await master_shop['find']();console['log'](_0x37d4d3(0x206),_0x5ccd6d);const _0x44223a=await transfers[_0x37d4d3(0x1a6)](_0x1d2ead[_0x37d4d3(0x15e)]['id']);let _0x4d4224=new Date(_0x44223a[_0x37d4d3(0x17f)]),_0x4984e9=('0'+_0x4d4224[_0x37d4d3(0x207)]())[_0x37d4d3(0x199)](-0x2),_0xef3ae7=('0'+(_0x4d4224['getMonth']()+0x1))['slice'](-0x2),_0x1fe660=_0x4d4224['getFullYear'](),_0x40a77a=_0x1fe660+'-'+_0xef3ae7+'-'+_0x4984e9,_0x50f524;if(_0xa07149['role']=='staff'){const _0x518724=await staff[_0x37d4d3(0x170)]({'email':_0xa07149['email']});_0x50f524=await warehouse['find']({'status':_0x37d4d3(0x1c7),'name':_0x518724[_0x37d4d3(0x143)],'warehouse_category':_0x37d4d3(0x116)});}else _0x50f524=await warehouse[_0x37d4d3(0x145)]({'status':'Enabled','warehouse_category':_0x37d4d3(0x116)});const _0x38869c=await warehouse[_0x37d4d3(0x19d)]([{'$match':{'name':_0x44223a[_0x37d4d3(0x1df)]}},{'$unwind':_0x37d4d3(0x19b)},{'$group':{'_id':_0x37d4d3(0x15b),'name':{'$first':_0x37d4d3(0x120)},'product_stock':{'$first':_0x37d4d3(0x12f)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x37d4d3(0x208)},'type':{'$first':_0x37d4d3(0x121)},'floorlevel':{'$first':_0x37d4d3(0x18c)},'primary_code':{'$first':_0x37d4d3(0x176)},'secondary_code':{'$first':_0x37d4d3(0x1bb)},'product_code':{'$first':_0x37d4d3(0x18f)},'storage':{'$first':_0x37d4d3(0x1bd)},'rack':{'$first':_0x37d4d3(0x140)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x37d4d3(0x182)},'room':{'$first':_0x37d4d3(0x1f4)}}}]);if(_0x5ccd6d[0x0]['language']==_0x37d4d3(0x177)){var _0x2ca599=users[_0x37d4d3(0x1fb)];console['log'](_0x2ca599);}else{if(_0x5ccd6d[0x0][_0x37d4d3(0x17e)]==_0x37d4d3(0x1a1))var _0x2ca599=users[_0x37d4d3(0x1a1)];else{if(_0x5ccd6d[0x0]['language']=='German')var _0x2ca599=users[_0x37d4d3(0x1ab)];else{if(_0x5ccd6d[0x0]['language']==_0x37d4d3(0x1ad))var _0x2ca599=users['Spanish'];else{if(_0x5ccd6d[0x0]['language']==_0x37d4d3(0x127))var _0x2ca599=users[_0x37d4d3(0x127)];else{if(_0x5ccd6d[0x0][_0x37d4d3(0x17e)]==_0x37d4d3(0x1f3))var _0x2ca599=users[_0x37d4d3(0x1e0)];else{if(_0x5ccd6d[0x0][_0x37d4d3(0x17e)]=='Chinese')var _0x2ca599=users[_0x37d4d3(0x155)];else{if(_0x5ccd6d[0x0]['language']==_0x37d4d3(0x1f7))var _0x2ca599=users[_0x37d4d3(0x15a)];}}}}}}}_0x710830[_0x37d4d3(0x13c)](_0x37d4d3(0x198),{'success':_0x1d2ead['flash'](_0x37d4d3(0x1f9)),'errors':_0x1d2ead['flash']('errors'),'role':_0xa07149,'profile':_0x5c4112,'master_shop':_0x5ccd6d,'warehouse':_0x50f524,'transfer':_0x44223a,'stock':_0x38869c,'language':_0x2ca599});}catch(_0x5e9fe5){console['log'](_0x5e9fe5);}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x148),auth,async(_0x5b64d0,_0x36a7df)=>{var _0x863c0e=a0_0x17dbb5;try{const _0x2172f7=_0x5b64d0[_0x863c0e(0x15e)]['id'],{from_warehouse:_0x3485a9,FromRoom_name:_0x227fda,to_warehouse:_0x4c70b5,ToRoom_name:_0x1c1524}=_0x5b64d0['body'],_0xe77c5e=await transfers['findById']({'_id':_0x2172f7}),_0x436899=_0xe77c5e[_0x863c0e(0x195)]['map'](async _0x58a488=>{var _0x3a75e6=_0x863c0e;if(_0x58a488[_0x3a75e6(0x1b4)]>0x0){var _0x52a24d=await warehouse[_0x3a75e6(0x170)]({'name':_0xe77c5e[_0x3a75e6(0x1df)],'room':_0x58a488[_0x3a75e6(0x1fc)],'warehouse_category':_0x3a75e6(0x116)});const _0x326e1f=_0x52a24d[_0x3a75e6(0x180)][_0x3a75e6(0x12c)](_0x5cc014=>{var _0x24a8cc=_0x3a75e6;_0x5cc014['product_name']==_0x58a488['product_name']&&_0x5cc014[_0x24a8cc(0x1e1)]==_0x58a488[_0x24a8cc(0x119)]&&_0x5cc014[_0x24a8cc(0x1db)]==_0x58a488[_0x24a8cc(0x16a)]&&_0x5cc014[_0x24a8cc(0x1cc)]==_0x58a488['from_bin']&&_0x5cc014['bay']==_0x58a488[_0x24a8cc(0x1d8)]&&_0x5cc014[_0x24a8cc(0x1b8)]==_0x58a488[_0x24a8cc(0x18d)]&&_0x5cc014[_0x24a8cc(0x1de)]==_0x58a488[_0x24a8cc(0x1e2)]&&_0x5cc014[_0x24a8cc(0x17f)]==_0x58a488[_0x24a8cc(0x17f)]&&_0x5cc014['batch_code']==_0x58a488['batch_code']&&_0x5cc014[_0x24a8cc(0x1eb)]==_0x58a488[_0x24a8cc(0x1eb)]&&_0x5cc014[_0x24a8cc(0x146)]==_0x58a488[_0x24a8cc(0x162)]&&_0x5cc014[_0x24a8cc(0x11e)]==_0x58a488[_0x24a8cc(0x171)]&&(_0x5cc014[_0x24a8cc(0x154)]=_0x5cc014[_0x24a8cc(0x154)]-_0x58a488[_0x24a8cc(0x1b4)]);});}return _0x52a24d;});Promise['all'](_0x436899)['then'](async _0x5bb332=>{var _0x221671=_0x863c0e;try{for(const _0x1483fe of _0x5bb332){await _0x1483fe[_0x221671(0x1e4)]();}try{const _0x1077d8=_0xe77c5e[_0x221671(0x195)][_0x221671(0x12c)](async _0x492d2d=>{var _0x155263=_0x221671;if(_0x492d2d[_0x155263(0x1b4)]>0x0){var _0x56eb02=await warehouse[_0x155263(0x170)]({'name':_0xe77c5e[_0x155263(0x185)],'room':_0x492d2d['to_room_name'],'warehouse_category':'Raw\x20Materials'}),_0x387d39=0x0;const _0x2a8465=_0x56eb02['product_details'][_0x155263(0x12c)](_0x4f7874=>{var _0x1b5904=_0x155263;_0x4f7874[_0x1b5904(0x139)]==_0x492d2d['product_name']&&_0x4f7874[_0x1b5904(0x1e1)]==_0x492d2d[_0x1b5904(0x130)]&&_0x4f7874['type']==_0x492d2d[_0x1b5904(0x200)]&&_0x4f7874[_0x1b5904(0x1cc)]==_0x492d2d['to_bin']&&_0x4f7874[_0x1b5904(0x122)]==_0x492d2d[_0x1b5904(0x16f)]&&_0x4f7874[_0x1b5904(0x1b8)]==_0x492d2d[_0x1b5904(0x1b8)]&&_0x4f7874['storage']==_0x492d2d[_0x1b5904(0x1de)]&&_0x4f7874[_0x1b5904(0x17f)]==_0x492d2d[_0x1b5904(0x17f)]&&_0x4f7874['batch_code']==_0x492d2d['batch_code']&&_0x4f7874[_0x1b5904(0x1eb)]==_0x492d2d[_0x1b5904(0x1eb)]&&_0x4f7874[_0x1b5904(0x146)]==_0x492d2d[_0x1b5904(0x1f0)]&&(_0x4f7874[_0x1b5904(0x154)]=_0x4f7874[_0x1b5904(0x154)]+_0x492d2d[_0x1b5904(0x1b4)],_0x387d39++);});_0x387d39=='0'&&(_0x56eb02[_0x155263(0x180)]=_0x56eb02[_0x155263(0x180)][_0x155263(0x115)]({'product_name':_0x492d2d[_0x155263(0x139)],'product_stock':_0x492d2d['to_quantity'],'bay':_0x492d2d['to_bay'],'bin':_0x492d2d[_0x155263(0x1a0)],'type':_0x492d2d[_0x155263(0x200)],'floorlevel':_0x492d2d['to_floorlevel'],'storage':_0x492d2d[_0x155263(0x1de)],'rack':_0x492d2d[_0x155263(0x1b8)],'product_code':_0x492d2d[_0x155263(0x1e9)],'primary_code':_0x492d2d[_0x155263(0x11f)],'secondary_code':_0x492d2d['secondary_code'],'maxProducts':_0x492d2d[_0x155263(0x184)],'storage':_0x492d2d[_0x155263(0x1de)],'rack':_0x492d2d['rack'],'expiry_date':_0x492d2d[_0x155263(0x17f)],'maxPerUnit':_0x492d2d[_0x155263(0x1cf)],'batch_code':_0x492d2d[_0x155263(0x186)],'production_date':_0x492d2d[_0x155263(0x1eb)]}));}return _0x56eb02;});Promise[_0x221671(0x156)](_0x1077d8)['then'](async _0x282b5d=>{var _0x39cdf4=_0x221671;try{for(const _0x4855d6 of _0x282b5d){await warehouse[_0x39cdf4(0x131)]({'_id':_0x4855d6[_0x39cdf4(0x11e)]},{'$addToSet':{'product_details':{'$each':_0x4855d6[_0x39cdf4(0x180)]}}});}_0xe77c5e[_0x39cdf4(0x1be)]=_0x39cdf4(0x193);const _0x552f78=await _0xe77c5e['save'](),_0x4eb5c3=await master_shop['find'](),_0x3aea3c=await email_settings['findOne'](),_0x411b6a=await supervisor_settings[_0x39cdf4(0x145)]();var _0x32807f=_0xe77c5e[_0x39cdf4(0x195)],_0x16184a='',_0x9bb8a9;for(_0x9bb8a9 in _0x32807f){_0x16184a+=_0x39cdf4(0x157)+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9][_0x39cdf4(0x139)]+'</td>'+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9]['product_code']+_0x39cdf4(0x16b)+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9]['to_quantity']+'</td>'+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9][_0x39cdf4(0x1ea)]+_0x39cdf4(0x16b)+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9]['secondary_unit']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xe77c5e[_0x39cdf4(0x185)]+_0x39cdf4(0x16b)+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9][_0x39cdf4(0x1d3)]+_0x39cdf4(0x16b)+_0x39cdf4(0x14d)+_0x32807f[_0x9bb8a9][_0x39cdf4(0x1de)]+_0x32807f[_0x9bb8a9][_0x39cdf4(0x1b8)]+_0x32807f[_0x9bb8a9][_0x39cdf4(0x16f)]+_0x32807f[_0x9bb8a9][_0x39cdf4(0x1a0)]+_0x32807f[_0x9bb8a9]['to_types'][0x0]+_0x32807f[_0x9bb8a9]['to_floorlevel']+'</td>','</tr>';}let _0x2d320d=nodemailer[_0x39cdf4(0x1d1)]({'host':_0x3aea3c['host'],'port':Number(_0x3aea3c[_0x39cdf4(0x188)]),'secure':![],'auth':{'user':_0x3aea3c['email'],'pass':_0x3aea3c[_0x39cdf4(0x16d)]}}),_0x1bd7eb={'from':_0x3aea3c[_0x39cdf4(0x1ed)],'to':_0x411b6a[0x0]['RMSEmail'],'subject':_0x39cdf4(0x11a),'attachments':[{'filename':'Logo.png','path':__dirname+_0x39cdf4(0x1dc)+_0x39cdf4(0x1d5)+_0x4eb5c3[0x0][_0x39cdf4(0x163)],'cid':_0x39cdf4(0x1f2)}],'html':_0x39cdf4(0x16c)+_0x39cdf4(0x167)+_0x39cdf4(0x1c3)+'<div>'+_0x39cdf4(0x1ef)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x39cdf4(0x175)+_0x39cdf4(0x124)+'<h2>\x20'+_0x4eb5c3[0x0][_0x39cdf4(0x204)]+_0x39cdf4(0x1d9)+'</div>'+'</div>'+_0x39cdf4(0x178)+_0x39cdf4(0x124)+_0x39cdf4(0x158)+_0x39cdf4(0x1cd)+_0xe77c5e['invoice']+'\x20'+_0x39cdf4(0x1e5)+_0x39cdf4(0x1b7)+_0xe77c5e['date']+'\x20'+_0x39cdf4(0x15f)+_0x39cdf4(0x1b9)+_0x39cdf4(0x175)+_0x39cdf4(0x134)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+_0x39cdf4(0x15c)+_0x39cdf4(0x1fe)+_0x39cdf4(0x1b2)+_0x39cdf4(0x1f1)+_0x39cdf4(0x123)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x39cdf4(0x1d7)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x39cdf4(0x191)+_0x39cdf4(0x144)+_0x39cdf4(0x142)+'\x20'+_0x16184a+'\x20'+_0x39cdf4(0x17d)+_0x39cdf4(0x161)+_0x39cdf4(0x124)+_0x39cdf4(0x196)+_0x39cdf4(0x1d0)+_0x4eb5c3[0x0][_0x39cdf4(0x204)]+_0x39cdf4(0x1b9)+_0x39cdf4(0x175)+'</div>'+_0x39cdf4(0x16e)};_0x2d320d['sendMail'](_0x1bd7eb,function(_0x53dacd,_0x27967c){var _0x4d007f=_0x39cdf4;_0x53dacd?(console['log'](_0x53dacd),console[_0x4d007f(0x1ae)](_0x4d007f(0x136))):console['log'](_0x4d007f(0x12b));}),_0x5b64d0['flash'](_0x39cdf4(0x1f9),_0x39cdf4(0x18b)),_0x36a7df[_0x39cdf4(0x14e)](_0x39cdf4(0x15d)+_0x552f78[_0x39cdf4(0x11e)]);}catch(_0x361984){console[_0x39cdf4(0x118)](_0x361984),_0x36a7df[_0x39cdf4(0x1c9)](0x1f4)[_0x39cdf4(0x1c0)]({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x361984[_0x39cdf4(0x114)]});}})[_0x221671(0x152)](_0x3b669e=>{var _0x5833a2=_0x221671;console['error'](_0x3b669e),_0x36a7df[_0x5833a2(0x1c9)](0x1f4)[_0x5833a2(0x1c0)]({'Perror':_0x5833a2(0x20a)});});}catch(_0x2f8a60){_0x36a7df[_0x221671(0x1c0)](_0x2f8a60);}}catch(_0x3f6fd6){console[_0x221671(0x118)](_0x3f6fd6),_0x36a7df[_0x221671(0x1c9)](0x1f4)[_0x221671(0x1c0)]({'Merror':_0x221671(0x1f5),'Message':_0x3f6fd6[_0x221671(0x114)]});}})['catch'](_0x4aeecb=>{var _0x12bdf0=_0x863c0e;console['error'](_0x4aeecb),_0x36a7df[_0x12bdf0(0x1c9)](0x1f4)['json']({'Merror':'An\x20error\x20occurred.'});});}catch(_0x5ed1ea){console[_0x863c0e(0x1ae)](_0x5ed1ea);}});function BayBinSelected(_0x4005cd,_0x3c28a4){var _0x454c5d=a0_0x17dbb5,_0xf05d5f=[],_0x36969d=[],_0x12f5e9=[],_0x26963c=[],_0x29c9de=[],_0x530bc1=[];let _0x25c464=[];if(_0x4005cd==_0x454c5d(0x1d4))switch(_0x3c28a4){case _0x454c5d(0x1a7):_0xf05d5f=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x36969d=[0x1,0x2],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['D'],_0x530bc1=['A'];break;case'Rack\x20B':_0xf05d5f=[0x6,0x5,0x4,0x3,0x2,0x1],_0x36969d=[0x1,0x2],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=['Level',_0x454c5d(0x201)],_0x29c9de=['D'],_0x530bc1=['B'];break;case _0x454c5d(0x190):_0xf05d5f=[0x0],_0x36969d=[0x0],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=['Floor'],_0x29c9de=['D'],_0x530bc1=['S'];break;case _0x454c5d(0x150):_0xf05d5f=[0x0],_0x36969d=[0x0],_0x26963c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x12f5e9=['Floor'],_0x29c9de=['D'],_0x530bc1=['R'];break;}else{if(_0x4005cd==_0x454c5d(0x126))switch(_0x3c28a4){case _0x454c5d(0x1a7):_0xf05d5f=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x36969d=['B','F'],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['C'],_0x530bc1=['A'];break;case _0x454c5d(0x128):_0xf05d5f=[0x5,0x4,0x3,0x2,0x1],_0x36969d=['F','B','S'],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['C'],_0x530bc1=['B'];break;case'Rack\x20C':_0xf05d5f=[0x1,0x2,0x3,0x4,0x5],_0x36969d=['B','F','S'],_0x26963c=[0x5,0x4,0x3,0x2,0x1],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['C'],_0x530bc1=['C'];break;case _0x454c5d(0x1b0):_0xf05d5f=[0x5,0x4,0x3,0x2,0x1],_0x36969d=['F','B','S'],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['C'],_0x530bc1=['D'];break;case'Rack\x20E':_0xf05d5f=[0x4,0x3,0x2,0x1],_0x36969d=[0x1,0x2],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159),_0x454c5d(0x201)],_0x29c9de=['C'],_0x530bc1=['E'];break;case'Rack\x20F':_0xf05d5f=[0x1,0x2,0x3],_0x36969d=[0x1,0x2],_0x26963c=[0x1,0x2,0x3,0x4,0x5],_0x12f5e9=[_0x454c5d(0x159)],_0x29c9de=['C'],_0x530bc1=['F'];break;}}return{'levels':_0xf05d5f,'Isle':_0x36969d,'rack':_0x26963c,'type':_0x12f5e9,'storage':_0x29c9de,'rak':_0x530bc1};}function a0_0x40bc(){var _0x295f49=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','/picking_list/PDF_transfer_rm/','params','</span>','filter','</table>','from_invoice','image','date','toString','to_invoice','<html><head><title></title>','string','user','from_types','</td>','<!DOCTYPE\x20html>','password','</body></html>','to_bay','findOne','id_transaction_id','../middleware/auth','15VXBnFL','/CheckingWarehouse','</div>','$product_details.primary_code','English\x20(US)','<hr\x20class=\x22my-3\x22>','from_quantity','prod_cat','$product.from_room_name','$product_details.expiry_date','</tbody>','language','expiry_date','product_details','secondary_unit','$product_details.production_date','549HixeaX','maxProducts','to_warehouse','batch_code','/transfer/view','port','$product_details.unit','from_prod_level','Transfer\x20Finalize\x20Successfully','$product_details.floorlevel','from_rack','add_transfer','$product_details.product_code','Shelves','</tr>','$from_warehouse','True','Transfer\x20Edit\x20Successfully','product','<strong>\x20Regards\x20</strong>','id_transaction','edit_transfer_view','slice','to_room','$product_details','/view/add_transfer','aggregate','7589826TjqUZO','$name','to_bin','Hindi','1250tbojZe','$_id','Return\x20Rooms','note','findById','Rack\x20A','Enclosed','/barcode_scanner2','$product_details.maxProducts','German','There\x27s\x20a\x20error\x20in\x20this\x20transaction','Spanish','log','errors','Rack\x20D','length','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','rak','to_quantity','to_prod_isle','New_Qty_Converted','\x20Order\x20Date\x20:\x20','rack','</h5>','exports','$product_details.secondary_code','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','$product_details.storage','finalize','$date','json','3176955tfEwqt','push','</head><body>','from_prod_pallet','role','$product_details.secondary_unit','Enabled','$finalize','status','$to_warehouse','from_bin','bin','\x20Order\x20Number\x20:\x20','$product_details.batch_code','maxperunit','<h5>','createTransport','body','to_room_name','DRY\x20STORAGE','/upload/','staff','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','from_bay','\x20</h2>','get','type','/../public','51208rYYJXY','storage','from_warehouse','Portuguese','floorlevel','from_storage','to_prod_level','save','<span\x20style=\x22float:\x20right;\x22>','Ambient','36851310YqfLfm','post','product_code','unit','production_date','RoomAssigned','email','$product_details.bay','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','To_invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','logo','Portuguese\x20(BR)','$room','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.maxPerUnit','Arabic\x20(ae)','product_code3','success','3027045uxGvUK','English','from_room_name','$product_details.pallet','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','here','to_types','Floor','to_prod_qty','nodemailer','site_title','forEach','master','getDate','$product_details.bin','$product_details.level','An\x20error\x20occurred.','message','concat','Raw\x20Materials','TRF-','error','from_floorlevel','Transfer\x20Mail','edit_transfer','MaxStocks_data2','padStart','_id','primary_code','$product_details.product_name','$product_details.type','bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','<div>','$product.to_room_name','COLD\x20STORAGE','French','Rack\x20B','ToRoomAssigned','\x20<>\x20','Email\x20sent\x20successfully','map','../public/language/languages.json','secondary_code','$product_details.product_stock','to_floorlevel','updateOne','$product_details.isle','flash','<table\x20style=\x22width:\x20100%\x20!important;\x22>','$isAllowEdit','Error\x20Occurs','76748DGcUeH','/barcode_scanner3','product_name','express','/barcode_scanner','render','from_prod_qty','to_prod_pallet','from_prod_isle','$product_details.rack','$product_details.invoice','<tbody\x20style=\x22text-align:\x20center;\x22>','warehouse','</thead>','find','invoice','random','/preview/:id','max_per_unit','from_rak','/view/:id','1941NdwlpJ','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','redirect','prod_name','Receiving\x20Area','Product\x20Transfer\x20successfully','catch','/view','product_stock','Chinese','all','<tr>','<h5\x20style=\x22text-align:\x20left;\x22>','Level','Arabic','$product_details._id'];a0_0x40bc=function(){return _0x295f49;};return a0_0x40bc();}router[a0_0x17dbb5(0x1da)](a0_0x17dbb5(0x14b),auth,async(_0x54d348,_0x210777)=>{var _0xb0bf65=a0_0x17dbb5;try{const {username:_0xb7d5cb,email:_0x3ebea6,role:_0x46e03e}=_0x54d348[_0xb0bf65(0x169)],_0x433693=_0x54d348[_0xb0bf65(0x169)],_0xf4d185=await profile[_0xb0bf65(0x170)]({'email':_0x433693[_0xb0bf65(0x1ed)]}),_0x3c8df2=await master_shop[_0xb0bf65(0x145)](),_0x46c9ff=await transfers[_0xb0bf65(0x1a6)](_0x54d348[_0xb0bf65(0x15e)]['id']);let _0x1ab14b;if(_0x433693[_0xb0bf65(0x1c5)]==_0xb0bf65(0x1d6)){const _0x5a24ad=await staff[_0xb0bf65(0x170)]({'email':_0x433693[_0xb0bf65(0x1ed)]});_0x1ab14b=await warehouse[_0xb0bf65(0x19d)]([{'$match':{'status':_0xb0bf65(0x1c7),'name':_0x5a24ad[_0xb0bf65(0x143)],'warehouse_category':_0xb0bf65(0x116)}},{'$group':{'_id':_0xb0bf65(0x19f),'name':{'$first':_0xb0bf65(0x19f)}}}]);}else _0x1ab14b=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0xb0bf65(0x116)}},{'$group':{'_id':_0xb0bf65(0x19f),'name':{'$first':_0xb0bf65(0x19f)}}}]);const _0x56136=await warehouse[_0xb0bf65(0x19d)]([{'$match':{'name':_0x46c9ff[_0xb0bf65(0x1df)],'warehouse_category':_0xb0bf65(0x116)}},{'$unwind':_0xb0bf65(0x19b)},{'$group':{'_id':_0xb0bf65(0x15b),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0xb0bf65(0x1ee)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0xb0bf65(0x18c)},'primary_code':{'$first':_0xb0bf65(0x176)},'secondary_code':{'$first':_0xb0bf65(0x1bb)},'product_code':{'$first':_0xb0bf65(0x18f)},'storage':{'$first':_0xb0bf65(0x1bd)},'rack':{'$first':_0xb0bf65(0x140)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0xb0bf65(0x1f4)}}}]),_0x7acd41=await product[_0xb0bf65(0x145)]({}),_0x4e6336=BayBinSelected(_0x46c9ff[_0xb0bf65(0x185)],_0x46c9ff[_0xb0bf65(0x19a)]);if(_0x3c8df2[0x0][_0xb0bf65(0x17e)]==_0xb0bf65(0x177)){var _0x333c5f=users[_0xb0bf65(0x1fb)];console[_0xb0bf65(0x1ae)](_0x333c5f);}else{if(_0x3c8df2[0x0]['language']==_0xb0bf65(0x1a1))var _0x333c5f=users['Hindi'];else{if(_0x3c8df2[0x0][_0xb0bf65(0x17e)]=='German')var _0x333c5f=users[_0xb0bf65(0x1ab)];else{if(_0x3c8df2[0x0]['language']==_0xb0bf65(0x1ad))var _0x333c5f=users['Spanish'];else{if(_0x3c8df2[0x0]['language']=='French')var _0x333c5f=users[_0xb0bf65(0x127)];else{if(_0x3c8df2[0x0][_0xb0bf65(0x17e)]==_0xb0bf65(0x1f3))var _0x333c5f=users[_0xb0bf65(0x1e0)];else{if(_0x3c8df2[0x0]['language']==_0xb0bf65(0x155))var _0x333c5f=users['Chinese'];else{if(_0x3c8df2[0x0]['language']=='Arabic\x20(ae)')var _0x333c5f=users[_0xb0bf65(0x15a)];}}}}}}}_0x210777['render'](_0xb0bf65(0x11b),{'success':_0x54d348['flash'](_0xb0bf65(0x1f9)),'errors':_0x54d348[_0xb0bf65(0x133)]('errors'),'role':_0x433693,'profile':_0xf4d185,'master_shop':_0x3c8df2,'warehouse':_0x1ab14b,'transfer':_0x46c9ff,'stock':_0x56136,'unit':_0x7acd41,'language':_0x333c5f});}catch(_0x229e5c){console[_0xb0bf65(0x1ae)](_0x229e5c);}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x14b),auth,async(_0xb27811,_0xed156f)=>{var _0x2dc665=a0_0x17dbb5;try{const _0x1c3745=_0xb27811[_0x2dc665(0x15e)]['id'],_0x414462=await transfers[_0x2dc665(0x1a6)](_0x1c3745);_0xed156f[_0x2dc665(0x1c0)](_0xb27811[_0x2dc665(0x1d2)]);return;const {date:_0x24cd95,from_warehouse:_0x38ff10,FromRoom_name:_0x213c54,to_warehouse:_0x1f3527,ToRoom_name:_0x3ed86e,prod_name:_0x5ae3ec,from_prod_qty:_0x26c457,from_prod_level:_0x4bd70b,from_prod_isle:_0x2fc7dd,from_prod_pallet:_0x48136f,to_prod_qty:_0x55ee99,to_prod_level:_0x60afcc,to_prod_isle:_0x4066c2,to_prod_pallet:_0x23ec61,primary_code:_0x4dcf91,secondary_code:_0x6dff8f,product_code3:_0x2b1988,note:_0x2a8f60,invoice:_0x20c7a5,expiry_date:_0x3032e7}=_0xb27811[_0x2dc665(0x1d2)];if(typeof _0x5ae3ec==_0x2dc665(0x168))var _0x216b9e=[_0xb27811[_0x2dc665(0x1d2)]['prod_name']],_0x290f93=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x13d)]],_0xcbb2b2=[_0xb27811['body'][_0x2dc665(0x18a)]],_0x22653f=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x13f)]],_0x437180=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1c4)]],_0x257a22=[_0xb27811[_0x2dc665(0x1d2)]['from_types']],_0x54a511=[_0xb27811['body'][_0x2dc665(0x202)]],_0x3a633e=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1e3)]],_0x2c2e8f=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1b5)]],_0x21e848=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x13e)]],_0x8b16f4=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x200)]],_0x3d3d35=[_0xb27811[_0x2dc665(0x1d2)]['storage']],_0x45f6e1=[_0xb27811['body'][_0x2dc665(0x1b3)]],_0x3a5343=[_0xb27811['body'][_0x2dc665(0x11f)]],_0x5d046d=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x12e)]],_0x14a826=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1f8)]],_0x553d56=[_0xb27811['body'][_0x2dc665(0x11c)]],_0x49ecad=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1ea)]],_0x2aaa23=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x181)]],_0x1fc3cf=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x186)]],_0x2ab565=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x17f)]],_0x27728c=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1e2)]],_0x2bd1e4=[_0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x14a)]];else var _0x216b9e=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x14f)]],_0x3d3d35=[..._0xb27811['body'][_0x2dc665(0x1de)]],_0x45f6e1=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1b3)]],_0x257a22=[..._0xb27811['body'][_0x2dc665(0x16a)]],_0x8b16f4=[..._0xb27811[_0x2dc665(0x1d2)]['to_types']],_0x290f93=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x13d)]],_0xcbb2b2=[..._0xb27811[_0x2dc665(0x1d2)]['from_prod_level']],_0x22653f=[..._0xb27811['body'][_0x2dc665(0x13f)]],_0x437180=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1c4)]],_0x54a511=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x202)]],_0x3a633e=[..._0xb27811['body'][_0x2dc665(0x1e3)]],_0x2c2e8f=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1b5)]],_0x21e848=[..._0xb27811[_0x2dc665(0x1d2)]['to_prod_pallet']],_0x3a5343=[..._0xb27811[_0x2dc665(0x1d2)]['primary_code']],_0x5d046d=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x12e)]],_0x14a826=[..._0xb27811[_0x2dc665(0x1d2)]['product_code3']],_0x553d56=[..._0xb27811[_0x2dc665(0x1d2)]['MaxStocks_data2']],_0x49ecad=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x1ea)]],_0x2aaa23=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x181)]],_0x1fc3cf=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x186)]],_0x2ab565=[..._0xb27811[_0x2dc665(0x1d2)][_0x2dc665(0x17f)]],_0x27728c=[..._0xb27811[_0x2dc665(0x1d2)]['from_storage']],_0x2bd1e4=[..._0xb27811[_0x2dc665(0x1d2)]['from_rak']];const _0x84dd90=_0x216b9e[_0x2dc665(0x12c)](_0xa5ac=>{return _0xa5ac={'product_name':_0xa5ac};});_0x290f93[_0x2dc665(0x205)]((_0x56af1e,_0x1bc4f6)=>{var _0x475868=_0x2dc665;_0x84dd90[_0x1bc4f6][_0x475868(0x179)]=_0x56af1e;}),_0xcbb2b2[_0x2dc665(0x205)]((_0x3dcc23,_0x485c80)=>{_0x84dd90[_0x485c80]['from_bay']=_0x3dcc23;}),_0x22653f[_0x2dc665(0x205)]((_0x48e70a,_0x2029bf)=>{var _0x2df07f=_0x2dc665;_0x84dd90[_0x2029bf][_0x2df07f(0x1cb)]=_0x48e70a;}),_0x437180[_0x2dc665(0x205)]((_0x2bc215,_0xbcae99)=>{var _0x262529=_0x2dc665;_0x84dd90[_0xbcae99][_0x262529(0x119)]=_0x2bc215;}),_0x54a511[_0x2dc665(0x205)]((_0x300666,_0x5ade78)=>{var _0x5b371f=_0x2dc665;_0x84dd90[_0x5ade78][_0x5b371f(0x1b4)]=_0x300666;}),_0x3a633e[_0x2dc665(0x205)]((_0x26e013,_0x36ecca)=>{var _0x532b58=_0x2dc665;_0x84dd90[_0x36ecca][_0x532b58(0x16f)]=_0x26e013;}),_0x2c2e8f['forEach']((_0x5cc4a2,_0x2f9772)=>{var _0x4c0bf8=_0x2dc665;_0x84dd90[_0x2f9772][_0x4c0bf8(0x1a0)]=_0x5cc4a2;}),_0x21e848[_0x2dc665(0x205)]((_0x1d6fbc,_0x3fc9d1)=>{var _0x2a6ae5=_0x2dc665;_0x84dd90[_0x3fc9d1][_0x2a6ae5(0x130)]=_0x1d6fbc;}),_0x3a5343['forEach']((_0x6edb1,_0x36ca77)=>{var _0x494af2=_0x2dc665;_0x84dd90[_0x36ca77][_0x494af2(0x11f)]=_0x6edb1;}),_0x5d046d[_0x2dc665(0x205)]((_0x5c061f,_0x3fa30b)=>{_0x84dd90[_0x3fa30b]['secondary_code']=_0x5c061f;}),_0x14a826['forEach']((_0x3ff9c8,_0x3f5180)=>{_0x84dd90[_0x3f5180]['product_code']=_0x3ff9c8;}),_0x553d56[_0x2dc665(0x205)]((_0x263c8d,_0x186252)=>{_0x84dd90[_0x186252]['maxProducts']=_0x263c8d;}),_0x49ecad[_0x2dc665(0x205)]((_0xb38673,_0x132016)=>{var _0x35b98f=_0x2dc665;_0x84dd90[_0x132016][_0x35b98f(0x1ea)]=_0xb38673;}),_0x2aaa23[_0x2dc665(0x205)]((_0x579ef0,_0xd4d785)=>{var _0x3d21fe=_0x2dc665;_0x84dd90[_0xd4d785][_0x3d21fe(0x181)]=_0x579ef0;}),_0x1fc3cf[_0x2dc665(0x205)]((_0x2f8109,_0xfb635d)=>{_0x84dd90[_0xfb635d]['batch_code']=_0x2f8109;}),_0x2ab565[_0x2dc665(0x205)]((_0x22abde,_0x4e2162)=>{var _0x3f4f11=_0x2dc665;_0x84dd90[_0x4e2162][_0x3f4f11(0x17f)]=_0x22abde;}),_0x3d3d35[_0x2dc665(0x205)]((_0x63a5af,_0x30d137)=>{var _0x48cd66=_0x2dc665;_0x84dd90[_0x30d137][_0x48cd66(0x1de)]=_0x63a5af;}),_0x45f6e1[_0x2dc665(0x205)]((_0x477b0a,_0x59fd01)=>{_0x84dd90[_0x59fd01]['rack']=_0x477b0a;}),_0x257a22[_0x2dc665(0x205)]((_0x4d410a,_0x358e02)=>{_0x84dd90[_0x358e02]['from_types']=_0x4d410a;}),_0x8b16f4[_0x2dc665(0x205)]((_0x2b5993,_0x19ce95)=>{var _0x28b733=_0x2dc665;_0x84dd90[_0x19ce95][_0x28b733(0x200)]=_0x2b5993;}),_0x27728c[_0x2dc665(0x205)]((_0x46882b,_0x2d8c37)=>{var _0x1e0ad8=_0x2dc665;_0x84dd90[_0x2d8c37][_0x1e0ad8(0x1e2)]=_0x46882b;}),_0x2bd1e4['forEach']((_0x3ab6b7,_0x233e71)=>{_0x84dd90[_0x233e71]['from_rack']=_0x3ab6b7;});const _0x2558cf=_0x84dd90[_0x2dc665(0x160)](_0x16c3f6=>_0x16c3f6[_0x2dc665(0x1b4)]!=='0'&&_0x16c3f6[_0x2dc665(0x1b4)]!==''||_0x16c3f6[_0x2dc665(0x130)]!=='0'&&_0x16c3f6['to_floorlevel']!=='');var _0x3bc7c8=0x0;_0x2558cf[_0x2dc665(0x205)](_0x5e6367=>{var _0x2dd9c3=_0x2dc665;parseInt(_0x5e6367[_0x2dd9c3(0x179)])<parseInt(_0x5e6367[_0x2dd9c3(0x1b4)])&&_0x3bc7c8++;});if(_0x3bc7c8!=0x0)return _0xb27811[_0x2dc665(0x133)](_0x2dc665(0x1af),_0x2dc665(0x1bc)),_0xed156f[_0x2dc665(0x14e)]('back');const _0x291f0e=await warehouse[_0x2dc665(0x170)]({'name':_0x414462['from_warehouse'],'room':_0x414462['from_room']});_0x414462[_0x2dc665(0x195)][_0x2dc665(0x205)](_0x561fae=>{var _0x60a450=_0x2dc665;if(_0x561fae[_0x60a450(0x1b4)]>0x0){const _0x548626=_0x291f0e['product_details'][_0x60a450(0x12c)](_0x4bd5b8=>{var _0x3f2686=_0x60a450;_0x4bd5b8[_0x3f2686(0x139)]==_0x561fae[_0x3f2686(0x139)]&&_0x4bd5b8[_0x3f2686(0x1e1)]==_0x561fae[_0x3f2686(0x119)]&&_0x4bd5b8[_0x3f2686(0x1db)]==_0x561fae[_0x3f2686(0x16a)]&&_0x4bd5b8[_0x3f2686(0x1cc)]==_0x561fae[_0x3f2686(0x1cb)]&&_0x4bd5b8[_0x3f2686(0x122)]==_0x561fae['from_bay']&&_0x4bd5b8[_0x3f2686(0x1b8)]==_0x561fae[_0x3f2686(0x18d)]&&_0x4bd5b8[_0x3f2686(0x1de)]==_0x561fae['from_storage']&&(_0x4bd5b8[_0x3f2686(0x154)]=parseInt(_0x4bd5b8[_0x3f2686(0x154)])+parseInt(_0x561fae[_0x3f2686(0x1b4)]));});}}),await _0x291f0e['save']();const _0x54f3d8=await warehouse[_0x2dc665(0x170)]({'name':_0x414462['to_warehouse'],'room':_0x414462['to_room']});_0x414462[_0x2dc665(0x195)]['forEach'](_0xec455b=>{var _0x38e75e=_0x2dc665;if(_0xec455b[_0x38e75e(0x1b4)]>0x0){const _0x28c1bc=_0x54f3d8['product_details'][_0x38e75e(0x12c)](_0x34b1ce=>{var _0x3e25bd=_0x38e75e;_0x34b1ce[_0x3e25bd(0x139)]==_0xec455b[_0x3e25bd(0x139)]&&_0x34b1ce[_0x3e25bd(0x1e1)]==_0xec455b[_0x3e25bd(0x130)]&&_0x34b1ce[_0x3e25bd(0x1db)]==_0xec455b[_0x3e25bd(0x200)]&&_0x34b1ce['bin']==_0xec455b['to_bin']&&_0x34b1ce[_0x3e25bd(0x122)]==_0xec455b[_0x3e25bd(0x16f)]&&_0x34b1ce[_0x3e25bd(0x1b8)]==_0xec455b['rack']&&_0x34b1ce['storage']==_0xec455b[_0x3e25bd(0x1de)]&&(_0x34b1ce['product_stock']=parseInt(_0x34b1ce[_0x3e25bd(0x154)])-parseInt(_0xec455b[_0x3e25bd(0x1b4)]));});}}),await _0x54f3d8[_0x2dc665(0x1e4)](),_0x414462[_0x2dc665(0x164)]=_0x24cd95,_0x414462['from_warehouse']=_0x38ff10,_0x414462[_0x2dc665(0x185)]=_0x1f3527,_0x414462['product']=_0x2558cf,_0x414462[_0x2dc665(0x1a5)]=_0x2a8f60,_0x414462[_0x2dc665(0x146)]=_0x20c7a5;const _0x575926=await _0x414462['save']();console[_0x2dc665(0x1ae)](_0x575926);const _0x40cbf5=await warehouse[_0x2dc665(0x170)]({'name':_0x38ff10,'room':_0x213c54});_0x575926[_0x2dc665(0x195)]['forEach'](_0x1c623a=>{var _0xe84f44=_0x2dc665;if(_0x1c623a[_0xe84f44(0x1b4)]>0x0){const _0x885f7a=_0x40cbf5[_0xe84f44(0x180)][_0xe84f44(0x12c)](_0x169031=>{var _0x2b6e9f=_0xe84f44;_0x169031[_0x2b6e9f(0x139)]==_0x1c623a[_0x2b6e9f(0x139)]&&_0x169031[_0x2b6e9f(0x1e1)]==_0x1c623a['from_floorlevel']&&_0x169031[_0x2b6e9f(0x1db)]==_0x1c623a[_0x2b6e9f(0x16a)]&&_0x169031[_0x2b6e9f(0x1cc)]==_0x1c623a[_0x2b6e9f(0x1cb)]&&_0x169031[_0x2b6e9f(0x122)]==_0x1c623a[_0x2b6e9f(0x1d8)]&&_0x169031['rack']==_0x1c623a['from_rack']&&_0x169031['storage']==_0x1c623a[_0x2b6e9f(0x1e2)]&&(_0x169031[_0x2b6e9f(0x154)]=parseInt(_0x169031[_0x2b6e9f(0x154)])-parseInt(_0x1c623a[_0x2b6e9f(0x1b4)]));});}}),await _0x40cbf5['save']();const _0x3c67d2=await warehouse[_0x2dc665(0x170)]({'name':_0x1f3527,'room':_0x3ed86e});_0x575926[_0x2dc665(0x195)][_0x2dc665(0x205)](_0x596421=>{var _0x32652e=_0x2dc665;if(_0x596421[_0x32652e(0x1b4)]>0x0){var _0x58b532=0x0;const _0x3e08e4=_0x3c67d2[_0x32652e(0x180)][_0x32652e(0x12c)](_0x4793f2=>{var _0x355e87=_0x32652e;_0x4793f2[_0x355e87(0x139)]==_0x596421['product_name']&&_0x4793f2[_0x355e87(0x1e1)]==_0x596421[_0x355e87(0x130)]&&_0x4793f2['type']==_0x596421[_0x355e87(0x200)]&&_0x4793f2['bin']==_0x596421[_0x355e87(0x1a0)]&&_0x4793f2[_0x355e87(0x122)]==_0x596421[_0x355e87(0x16f)]&&_0x4793f2['rack']==_0x596421['rack']&&_0x4793f2[_0x355e87(0x1de)]==_0x596421['storage']&&(_0x4793f2[_0x355e87(0x154)]=parseInt(_0x4793f2[_0x355e87(0x154)])+parseInt(_0x596421[_0x355e87(0x1b4)]),_0x58b532++);});_0x58b532=='0'&&(_0x3c67d2[_0x32652e(0x180)]=_0x3c67d2[_0x32652e(0x180)][_0x32652e(0x115)]({'product_name':_0x596421[_0x32652e(0x139)],'product_stock':_0x596421['to_quantity'],'bay':_0x596421[_0x32652e(0x16f)],'bin':_0x596421[_0x32652e(0x1a0)],'type':_0x596421[_0x32652e(0x200)],'floorlevel':_0x596421[_0x32652e(0x130)],'storage':_0x596421['storage'],'rack':_0x596421[_0x32652e(0x1b8)],'product_code':_0x596421['product_code'],'primary_code':_0x596421[_0x32652e(0x11f)],'secondary_code':_0x596421['secondary_code'],'maxProducts':_0x596421[_0x32652e(0x184)],'storage':_0x596421[_0x32652e(0x1de)],'rack':_0x596421[_0x32652e(0x1b8)]}));}}),await _0x3c67d2['save'](),_0xb27811[_0x2dc665(0x133)](_0x2dc665(0x1f9),_0x2dc665(0x194)),_0xed156f['redirect'](_0x2dc665(0x187));}catch(_0x51e4d1){console[_0x2dc665(0x1ae)](_0x51e4d1);}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x13b),async(_0x2e445a,_0x2f258a)=>{var _0x16f5c2=a0_0x17dbb5;const {FromWareHouse:_0x5d9934,FromRoom:_0xdb6c7c,ToWarehouse:_0x16ebff,ToRoom:_0x17733c,primary_code:_0x1acbfa,Roomslist:_0x4611d5}=_0x2e445a[_0x16f5c2(0x1d2)],_0x404bde=_0x4611d5['split'](','),_0x5143f5=[];async function _0x375e66(_0x18ba76){var _0x5b31ff=_0x16f5c2;const _0x170cb2=await warehouse[_0x5b31ff(0x19d)]([{'$match':{'name':_0x5d9934,'room':_0x18ba76}},{'$unwind':_0x5b31ff(0x19b)},{'$match':{'product_details.primary_code':_0x1acbfa}},{'$group':{'_id':_0x5b31ff(0x15b),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x5b31ff(0x12f)},'primary_code':{'$first':_0x5b31ff(0x176)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x5b31ff(0x1ee)},'isle':{'$first':_0x5b31ff(0x208)},'type':{'$first':_0x5b31ff(0x121)},'pallet':{'$first':_0x5b31ff(0x18c)},'unit':{'$first':_0x5b31ff(0x189)},'secondary_unit':{'$first':_0x5b31ff(0x1c6)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5b31ff(0x140)},'expiry_date':{'$first':_0x5b31ff(0x17c)},'production_date':{'$first':_0x5b31ff(0x182)},'batch_code':{'$first':_0x5b31ff(0x1ce)},'maxPerUnit':{'$first':_0x5b31ff(0x1f6)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x5b31ff(0x1aa)},'invoice_product':{'$first':_0x5b31ff(0x141)}}}]),_0x9d8251=await warehouse[_0x5b31ff(0x19d)]([{'$match':{'name':_0x5d9934,'room':_0x18ba76}},{'$unwind':_0x5b31ff(0x19b)},{'$match':{'product_details.secondary_code':_0x1acbfa}},{'$group':{'_id':_0x5b31ff(0x15b),'name':{'$first':_0x5b31ff(0x120)},'instock':{'$first':_0x5b31ff(0x12f)},'primary_code':{'$first':_0x5b31ff(0x176)},'secondary_code':{'$first':_0x5b31ff(0x1bb)},'product_code':{'$first':_0x5b31ff(0x18f)},'level':{'$first':_0x5b31ff(0x1ee)},'isle':{'$first':_0x5b31ff(0x208)},'type':{'$first':_0x5b31ff(0x121)},'pallet':{'$first':_0x5b31ff(0x18c)},'unit':{'$first':_0x5b31ff(0x189)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x5b31ff(0x1bd)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x5b31ff(0x182)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x5b31ff(0x1f6)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x5b31ff(0x1f4)},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':_0x5b31ff(0x141)}}}]);if(_0x170cb2[_0x5b31ff(0x1b1)]>0x0)_0x5143f5['push'](_0x170cb2);else _0x9d8251[_0x5b31ff(0x1b1)]>0x0&&_0x5143f5[_0x5b31ff(0x1c2)](_0x9d8251);}const _0x5a33a8=_0x404bde[_0x16f5c2(0x12c)](_0x5d8bbd=>_0x375e66(_0x5d8bbd));await Promise[_0x16f5c2(0x156)](_0x5a33a8),_0x2f258a[_0x16f5c2(0x1c0)](_0x5143f5);}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x1a9),async(_0x429935,_0x27ece6)=>{var _0x3b255c=a0_0x17dbb5;try{const {FromWareHouse:_0x5ce1d7,FromRoom:_0x2dbc19,ToWarehouse:_0x594e41,ToRoom:_0x47c78e,secondary_code:_0x470270}=_0x429935[_0x3b255c(0x1d2)],_0x59e0a7=await warehouse[_0x3b255c(0x19d)]([{'$match':{'name':_0x5ce1d7}},{'$unwind':_0x3b255c(0x19b)},{'$match':{'product_details.secondary_code':_0x470270}},{'$group':{'_id':_0x3b255c(0x15b),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x3b255c(0x176)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3b255c(0x18f)},'instock':{'$first':_0x3b255c(0x12f)},'warehouse':{'$first':_0x3b255c(0x19f)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x3b255c(0x132)},'pallet':{'$first':_0x3b255c(0x1fd)},'maxProducts':{'$first':_0x3b255c(0x1aa)},'unit':{'$first':_0x3b255c(0x189)}}}]);_0x27ece6[_0x3b255c(0x1c9)](0xc8)['json'](_0x59e0a7);}catch(_0x185595){_0x27ece6['status'](0x194)[_0x3b255c(0x1c0)]({'message':_0x185595[_0x3b255c(0x114)]});}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x138),async(_0x311319,_0x52a140)=>{var _0x533a0b=a0_0x17dbb5;try{const {FromWareHouse:_0x172d20,FromRoom:_0x5340c9,ToWarehouse:_0x268054,ToRoom:_0x2f82e4,product_code:_0x305011}=_0x311319['body'],_0x88be3=await warehouse[_0x533a0b(0x19d)]([{'$match':{'name':_0x172d20}},{'$unwind':_0x533a0b(0x19b)},{'$match':{'product_details.product_code':_0x305011}},{'$group':{'_id':_0x533a0b(0x15b),'name':{'$first':_0x533a0b(0x120)},'primary_code':{'$first':_0x533a0b(0x176)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x533a0b(0x18f)},'instock':{'$first':_0x533a0b(0x12f)},'warehouse':{'$first':_0x533a0b(0x19f)},'level':{'$first':_0x533a0b(0x209)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x533a0b(0x1fd)},'maxProducts':{'$first':_0x533a0b(0x1aa)},'unit':{'$first':_0x533a0b(0x189)}}}]);_0x52a140['status'](0xc8)[_0x533a0b(0x1c0)](_0x88be3);}catch(_0x4ef76d){_0x52a140[_0x533a0b(0x1c9)](0x194)[_0x533a0b(0x1c0)]({'message':_0x4ef76d[_0x533a0b(0x114)]});}}),router[a0_0x17dbb5(0x1e8)](a0_0x17dbb5(0x174),async(_0x517462,_0x58a41c)=>{var _0xa3a837=a0_0x17dbb5;const {level:_0x27bd0d,isle:_0x5c960f,pallet:_0x1a6856,warehouses:_0x2bd2df,room:_0x505eb9}=_0x517462['body'];try{const _0x368e3b=await warehouse[_0xa3a837(0x19d)]([{'$match':{'name':_0x2bd2df,'room':_0x505eb9}},{'$unwind':_0xa3a837(0x19b)},{'$match':{'product_details.level':parseInt(_0x27bd0d),'product_details.isle':_0x5c960f,'product_details.pallet':parseInt(_0x1a6856)}},{'$group':{'_id':_0xa3a837(0x15b),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0xa3a837(0x12f)},'level':{'$first':_0xa3a837(0x209)},'isle':{'$first':_0xa3a837(0x132)},'pallet':{'$first':_0xa3a837(0x1fd)},'maxProducts':{'$first':_0xa3a837(0x1aa)}}}]);_0x58a41c[_0xa3a837(0x1c9)](0xc8)[_0xa3a837(0x1c0)](_0x368e3b);}catch(_0x3b924e){_0x58a41c[_0xa3a837(0x1c9)](0x194)[_0xa3a837(0x1c0)]({'message':_0x3b924e[_0xa3a837(0x114)]});}}),module[a0_0x17dbb5(0x1ba)]=router;