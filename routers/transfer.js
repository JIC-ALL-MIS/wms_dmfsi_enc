var a0_0x741aca=a0_0x2643;function a0_0x2643(_0x39ff4e,_0x4f3a0a){var _0x387b6e=a0_0x387b();return a0_0x2643=function(_0x264365,_0x47c82d){_0x264365=_0x264365-0x15d;var _0x5ddeac=_0x387b6e[_0x264365];return _0x5ddeac;},a0_0x2643(_0x39ff4e,_0x4f3a0a);}(function(_0x3bb732,_0x161cf0){var _0x5c7958=a0_0x2643,_0x1991eb=_0x3bb732();while(!![]){try{var _0xd64cf0=parseInt(_0x5c7958(0x214))/0x1*(-parseInt(_0x5c7958(0x1ad))/0x2)+parseInt(_0x5c7958(0x200))/0x3+-parseInt(_0x5c7958(0x169))/0x4+-parseInt(_0x5c7958(0x255))/0x5*(-parseInt(_0x5c7958(0x1da))/0x6)+parseInt(_0x5c7958(0x179))/0x7+parseInt(_0x5c7958(0x1f6))/0x8+-parseInt(_0x5c7958(0x1f9))/0x9*(-parseInt(_0x5c7958(0x253))/0xa);if(_0xd64cf0===_0x161cf0)break;else _0x1991eb['push'](_0x1991eb['shift']());}catch(_0x809bb1){_0x1991eb['push'](_0x1991eb['shift']());}}}(a0_0x387b,0x3e19d),require(a0_0x741aca(0x1a3))[a0_0x741aca(0x1df)]());const express=require(a0_0x741aca(0x185)),app=express(),router=express[a0_0x741aca(0x245)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x741aca(0x186)),auth=require(a0_0x741aca(0x1f4)),users=require(a0_0x741aca(0x201)),nodemailer=require(a0_0x741aca(0x1c8)),mongoose=require(a0_0x741aca(0x23e));router[a0_0x741aca(0x1a2)]('/view',auth,async(_0x27d1ee,_0x362ffc)=>{var _0x6527dc=a0_0x741aca;try{const {username:_0x320fb6,email:_0x12cb81,role:_0x5edcd8}=_0x27d1ee[_0x6527dc(0x21f)],_0x12c91d=_0x27d1ee['user'],_0x5b2ffa=await profile[_0x6527dc(0x1fc)]({'email':_0x12c91d[_0x6527dc(0x233)]}),_0x4d9657=await master_shop[_0x6527dc(0x168)]();console['log'](_0x6527dc(0x166),_0x4d9657);let _0x3aa3e3;if(_0x12c91d[_0x6527dc(0x1bd)]==_0x6527dc(0x211)){const _0x23208f=await staff[_0x6527dc(0x1fc)]({'email':_0x12c91d['email']});_0x3aa3e3=await transfers[_0x6527dc(0x168)]({'from_warehouse':_0x23208f['warehouse']});}else _0x3aa3e3=await transfers[_0x6527dc(0x161)]([{'$unwind':_0x6527dc(0x203)},{'$group':{'_id':_0x6527dc(0x226),'invoice':{'$first':_0x6527dc(0x1a6)},'date':{'$first':_0x6527dc(0x249)},'from_warehouse':{'$first':_0x6527dc(0x261)},'to_warehouse':{'$first':_0x6527dc(0x267)},'from_room_name':{'$addToSet':_0x6527dc(0x174)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x6527dc(0x268)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x4d9657[0x0][_0x6527dc(0x24d)]==_0x6527dc(0x1d6)){var _0x24c907=users[_0x6527dc(0x1a0)];console[_0x6527dc(0x209)](_0x24c907);}else{if(_0x4d9657[0x0][_0x6527dc(0x24d)]==_0x6527dc(0x1f1))var _0x24c907=users[_0x6527dc(0x1f1)];else{if(_0x4d9657[0x0]['language']=='German')var _0x24c907=users[_0x6527dc(0x18d)];else{if(_0x4d9657[0x0]['language']==_0x6527dc(0x20b))var _0x24c907=users[_0x6527dc(0x20b)];else{if(_0x4d9657[0x0][_0x6527dc(0x24d)]==_0x6527dc(0x1c7))var _0x24c907=users[_0x6527dc(0x1c7)];else{if(_0x4d9657[0x0]['language']==_0x6527dc(0x22e))var _0x24c907=users['Portuguese'];else{if(_0x4d9657[0x0][_0x6527dc(0x24d)]==_0x6527dc(0x16c))var _0x24c907=users[_0x6527dc(0x16c)];else{if(_0x4d9657[0x0][_0x6527dc(0x24d)]==_0x6527dc(0x1e7))var _0x24c907=users[_0x6527dc(0x21c)];}}}}}}}_0x362ffc['render'](_0x6527dc(0x192),{'success':_0x27d1ee[_0x6527dc(0x1c2)](_0x6527dc(0x19a)),'errors':_0x27d1ee[_0x6527dc(0x1c2)](_0x6527dc(0x1b0)),'role':_0x12c91d,'profile':_0x5b2ffa,'master_shop':_0x4d9657,'transfer':_0x3aa3e3,'language':_0x24c907});}catch(_0x5e54d8){console[_0x6527dc(0x209)](_0x5e54d8);}});async function getRandom8DigitNumber(){var _0x2eaff0=a0_0x741aca;const _0x58a6a2=0x989680,_0x3e8976=0x5f5e0ff,_0x4e5e01=Math[_0x2eaff0(0x237)](Math[_0x2eaff0(0x1d8)]()*(_0x3e8976-_0x58a6a2+0x1))+_0x58a6a2;var _0x28cd32;const _0x580a4a=await transfers['findOne']({'invoice':_0x2eaff0(0x256)+_0x4e5e01});return _0x580a4a&&_0x580a4a[_0x2eaff0(0x1ee)]>0x0?_0x28cd32=_0x2eaff0(0x256)+_0x4e5e01:_0x28cd32=_0x2eaff0(0x256)+_0x4e5e01,_0x28cd32;}router[a0_0x741aca(0x1a2)](a0_0x741aca(0x212),auth,async(_0x7126a5,_0x4a5277)=>{var _0xd5f3fe=a0_0x741aca;try{const {username:_0x1d1e9f,email:_0x4a43dc,role:_0x1cb4f4}=_0x7126a5[_0xd5f3fe(0x21f)],_0x1b0ce0=_0x7126a5['user'],_0x1e5102=await profile[_0xd5f3fe(0x1fc)]({'email':_0x1b0ce0[_0xd5f3fe(0x233)]}),_0x8b75c=await master_shop[_0xd5f3fe(0x168)]();console[_0xd5f3fe(0x209)](_0xd5f3fe(0x166),_0x8b75c);let _0x3e73fd;if(_0x1b0ce0['role']=='staff'){const _0x56ae0b=await staff[_0xd5f3fe(0x1fc)]({'email':_0x1b0ce0[_0xd5f3fe(0x233)]});_0x3e73fd=await warehouse['aggregate']([{'$match':{'status':_0xd5f3fe(0x1f8),'name':_0x56ae0b[_0xd5f3fe(0x24f)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0xd5f3fe(0x181),'name':{'$first':'$name'}}}]);}else _0x3e73fd=await warehouse[_0xd5f3fe(0x161)]([{'$match':{'status':_0xd5f3fe(0x1f8),'warehouse_category':_0xd5f3fe(0x1d7)}},{'$group':{'_id':_0xd5f3fe(0x181),'name':{'$first':'$name'}}}]);var _0x1090a3=[_0xd5f3fe(0x24e),'Enclosed',_0xd5f3fe(0x224)];const _0x247b22=await transfers[_0xd5f3fe(0x168)]({}),_0x3a2c35=_0x247b22[_0xd5f3fe(0x1ee)]+0x1,_0x3e6035='TRF-'+_0x3a2c35[_0xd5f3fe(0x25c)]()[_0xd5f3fe(0x194)](0x5,'0');if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]=='English\x20(US)'){var _0x190a04=users[_0xd5f3fe(0x1a0)];console[_0xd5f3fe(0x209)](_0x190a04);}else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x1f1))var _0x190a04=users['Hindi'];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x18d))var _0x190a04=users[_0xd5f3fe(0x18d)];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x20b))var _0x190a04=users['Spanish'];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x1c7))var _0x190a04=users[_0xd5f3fe(0x1c7)];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x22e))var _0x190a04=users[_0xd5f3fe(0x1c5)];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]==_0xd5f3fe(0x16c))var _0x190a04=users['Chinese'];else{if(_0x8b75c[0x0][_0xd5f3fe(0x24d)]=='Arabic\x20(ae)')var _0x190a04=users[_0xd5f3fe(0x21c)];}}}}}}}const _0x184e7c=getRandom8DigitNumber();_0x184e7c[_0xd5f3fe(0x1c4)](_0x1e61e2=>{var _0x14eca1=_0xd5f3fe;_0x4a5277[_0x14eca1(0x269)](_0x14eca1(0x1ed),{'success':_0x7126a5[_0x14eca1(0x1c2)]('success'),'errors':_0x7126a5[_0x14eca1(0x1c2)](_0x14eca1(0x1b0)),'role':_0x1b0ce0,'profile':_0x1e5102,'master_shop':_0x8b75c,'warehouse':_0x3e73fd,'language':_0x190a04,'rooms_data':_0x1090a3,'invoice':_0x1e61e2});})[_0xd5f3fe(0x1e1)](_0x41f6af=>{var _0x5240a6=_0xd5f3fe;_0x7126a5[_0x5240a6(0x1c2)](_0x5240a6(0x1b0),_0x5240a6(0x241)),_0x4a5277[_0x5240a6(0x16d)]('/transfer/view');});}catch(_0x400cbc){console[_0xd5f3fe(0x209)](_0x400cbc);}}),router[a0_0x741aca(0x23f)](a0_0x741aca(0x212),auth,async(_0x2dbdbb,_0x51caff)=>{var _0x3648ac=a0_0x741aca;try{console['log'](_0x2dbdbb['body']);const {date:_0x3c5ecc,from_warehouse:_0x271e5e,FromRoom_name:_0xb90491,to_warehouse:_0xd3eae9,ToRoom_name:_0x1b9467,prod_name:_0x24236c,from_prod_qty:_0x30a214,from_prod_level:_0x3cff8f,from_prod_isle:_0x3f7a0f,from_prod_pallet:_0x1ce643,to_prod_qty:_0x57e50f,to_prod_level:_0x4188ed,to_prod_isle:_0x1eddf9,to_prod_pallet:_0x37a91b,primary_code:_0x4bc961,secondary_code:_0x3e0e73,product_code3:_0x476160,note:_0x429c18,MaxStocks_data2:_0x19d1de,invoice:_0xf4ca28,expiry_date:_0xe521f1}=_0x2dbdbb[_0x3648ac(0x17b)];if(typeof _0x24236c=='string')var _0x42873c=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1f3)]],_0x519af3=[_0x2dbdbb['body'][_0x3648ac(0x1ea)]],_0x14f688=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1bc)]],_0x131b7d=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1c3)]],_0x267b13=[_0x2dbdbb[_0x3648ac(0x17b)]['to_prod_level']],_0x9f0189=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x258)]],_0x892972=[_0x2dbdbb[_0x3648ac(0x17b)]['secondary_code']],_0x277872=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1b9)]],_0x13cc42=[_0x2dbdbb['body'][_0x3648ac(0x257)]],_0x34cdef=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1b7)]],_0x345367=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x21e)]],_0x160fbe=[_0x2dbdbb[_0x3648ac(0x17b)]['batch_code']],_0x103c97=[_0x2dbdbb['body']['expiry_date']],_0x5d3e33=[_0x2dbdbb['body'][_0x3648ac(0x1b4)]],_0x4c20b9=[_0x2dbdbb[_0x3648ac(0x17b)]['production_date']],_0x412561=[_0x2dbdbb['body'][_0x3648ac(0x1d9)]],_0x8606da=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1fb)]],_0x405f7a=[_0x2dbdbb['body'][_0x3648ac(0x248)]],_0x3ea0ea=[_0x2dbdbb[_0x3648ac(0x17b)]['from_invoice']],_0x194a88=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x232)]],_0x45c136=[_0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1f2)]];else var _0x42873c=[..._0x2dbdbb['body']['prod_name']],_0x519af3=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1ea)]],_0x14f688=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1bc)]],_0x131b7d=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1c3)]],_0x267b13=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x206)]],_0x9f0189=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x258)]],_0x892972=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x198)]],_0x277872=[..._0x2dbdbb['body'][_0x3648ac(0x1b9)]],_0x13cc42=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x257)]],_0x34cdef=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1b7)]],_0x345367=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x21e)]],_0x160fbe=[..._0x2dbdbb[_0x3648ac(0x17b)]['batch_code']],_0x103c97=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x208)]],_0x5d3e33=[..._0x2dbdbb['body'][_0x3648ac(0x1b4)]],_0x4c20b9=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1a8)]],_0x412561=[..._0x2dbdbb['body'][_0x3648ac(0x1d9)]],_0x8606da=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x1fb)]],_0x405f7a=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x248)]],_0x3ea0ea=[..._0x2dbdbb[_0x3648ac(0x17b)][_0x3648ac(0x188)]],_0x194a88=[..._0x2dbdbb['body'][_0x3648ac(0x232)]],_0x45c136=[..._0x2dbdbb['body'][_0x3648ac(0x1f2)]];const _0x2d1e3a=_0x42873c[_0x3648ac(0x18c)](_0x3aa9a6=>{return _0x3aa9a6={'product_name':_0x3aa9a6};});_0x519af3[_0x3648ac(0x1c9)]((_0x3d0861,_0x231963)=>{var _0x37ec35=_0x3648ac;_0x2d1e3a[_0x231963][_0x37ec35(0x22b)]=_0x3d0861;}),_0x3ea0ea[_0x3648ac(0x1c9)]((_0x4e9756,_0xa56d8b)=>{_0x2d1e3a[_0xa56d8b]['from_invoice']=_0x4e9756;}),_0x194a88[_0x3648ac(0x1c9)]((_0x401218,_0xe98272)=>{var _0xc22381=_0x3648ac;_0x2d1e3a[_0xe98272][_0xc22381(0x15e)]=_0x401218;}),_0x45c136[_0x3648ac(0x1c9)]((_0x2c775e,_0xe5dfc7)=>{var _0x38a275=_0x3648ac;_0x2d1e3a[_0xe5dfc7][_0x38a275(0x18e)]=_0x2c775e;}),_0x14f688[_0x3648ac(0x1c9)]((_0x242174,_0xd44b6)=>{_0x8606da['forEach']((_0x1b3f13,_0x54225c)=>{var _0x45e1cc=a0_0x2643;if(_0x1b3f13==_0x45e1cc(0x165)&&_0xd44b6==_0x54225c){var _0x1aaec1=_0x242174[_0x45e1cc(0x260)](0x3);_0x2d1e3a[_0xd44b6][_0x45e1cc(0x162)]=_0x242174[0x0],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x22d)]=_0x242174[0x1],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x266)]=0x0,_0x2d1e3a[_0xd44b6]['from_bin']=0x0,_0x2d1e3a[_0xd44b6][_0x45e1cc(0x20c)]=_0x45e1cc(0x222),_0x2d1e3a[_0xd44b6][_0x45e1cc(0x1ec)]=_0x1aaec1;}else{if(_0x1b3f13==_0x45e1cc(0x191)&&_0xd44b6==_0x54225c){var _0x1aaec1=_0x242174['slice'](0x3);_0x2d1e3a[_0xd44b6][_0x45e1cc(0x162)]=_0x242174[0x0],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x22d)]=_0x242174[0x1],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x266)]=0x0,_0x2d1e3a[_0xd44b6][_0x45e1cc(0x184)]=0x0,_0x2d1e3a[_0xd44b6][_0x45e1cc(0x20c)]=_0x45e1cc(0x222),_0x2d1e3a[_0xd44b6][_0x45e1cc(0x1ec)]=_0x242174[0x5];}else{if(_0xd44b6==_0x54225c){if(_0x242174[0x0]=='A'&&_0x242174[0x1]=='L'&&_0x242174[0x2]=='L')console[_0x45e1cc(0x209)](_0x1b3f13+_0x45e1cc(0x1b5)+_0xd44b6+_0x45e1cc(0x1b5)+_0x54225c+'\x20<>\x20'+_0x242174+'here'),_0x2d1e3a[_0xd44b6][_0x45e1cc(0x162)]=_0x242174[0x0],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x22d)]=_0x242174[0x1],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x266)]=0x0,_0x2d1e3a[_0xd44b6]['from_bin']=0x0,_0x2d1e3a[_0xd44b6][_0x45e1cc(0x20c)]=_0x45e1cc(0x222),_0x2d1e3a[_0xd44b6][_0x45e1cc(0x1ec)]=_0x242174[0x3];else{var _0x449b8b;if(_0x242174[0x4]=='L')_0x449b8b=_0x45e1cc(0x218);else _0x242174[0x4]=='F'&&(_0x449b8b=_0x45e1cc(0x222));_0x2d1e3a[_0xd44b6][_0x45e1cc(0x162)]=_0x242174[0x0],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x22d)]=_0x242174[0x1],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x266)]=_0x242174[0x2],_0x2d1e3a[_0xd44b6][_0x45e1cc(0x184)]=_0x242174[0x3],_0x2d1e3a[_0xd44b6]['from_types']=_0x449b8b,_0x2d1e3a[_0xd44b6][_0x45e1cc(0x1ec)]=_0x242174[0x5];}}}}});}),_0x131b7d[_0x3648ac(0x1c9)]((_0x3af049,_0x259446)=>{var _0x5055b4=_0x3648ac;_0x2d1e3a[_0x259446][_0x5055b4(0x1c6)]=_0x3af049;}),_0x267b13['forEach']((_0xea5db3,_0x3f1307)=>{var _0x1da2ea=_0x3648ac;_0x405f7a[_0x1da2ea(0x1c9)]((_0x54ee53,_0xe48452)=>{var _0x2b95c5=_0x1da2ea;if(_0x54ee53=='Receiving\x20Area'&&_0x3f1307==_0xe48452){var _0x40a5f8=_0xea5db3[_0x2b95c5(0x260)](0x3);_0x2d1e3a[_0x3f1307][_0x2b95c5(0x26a)]=_0xea5db3[0x0],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x234)]=_0xea5db3[0x1],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x23d)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x18f)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x235)]=_0x2b95c5(0x222),_0x2d1e3a[_0x3f1307][_0x2b95c5(0x1a9)]=_0x40a5f8;}else{if(_0x54ee53==_0x2b95c5(0x191)&&_0x3f1307==_0xe48452){var _0x40a5f8=_0xea5db3['slice'](0x3);_0x2d1e3a[_0x3f1307][_0x2b95c5(0x26a)]=_0xea5db3[0x0],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x234)]=_0xea5db3[0x1],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x23d)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x18f)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x235)]='Floor',_0x2d1e3a[_0x3f1307][_0x2b95c5(0x1a9)]=_0xea5db3[0x5];}else{if(_0x3f1307==_0xe48452){if(_0xea5db3[0x0]=='A'&&_0xea5db3[0x1]=='L'&&_0xea5db3[0x2]=='L')console['log'](_0x54ee53+_0x2b95c5(0x1b5)+_0x3f1307+_0x2b95c5(0x1b5)+_0xe48452+'\x20<>\x20'+_0xea5db3+_0x2b95c5(0x172)),_0x2d1e3a[_0x3f1307][_0x2b95c5(0x26a)]=_0xea5db3[0x0],_0x2d1e3a[_0x3f1307]['rack']=_0xea5db3[0x1],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x23d)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x18f)]=0x0,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x235)]=_0x2b95c5(0x222),_0x2d1e3a[_0x3f1307][_0x2b95c5(0x1a9)]=_0xea5db3[0x3];else{var _0x5de6d7;if(_0xea5db3[0x4]=='L')_0x5de6d7=_0x2b95c5(0x218);else _0xea5db3[0x4]=='F'&&(_0x5de6d7=_0x2b95c5(0x222));_0x2d1e3a[_0x3f1307][_0x2b95c5(0x26a)]=_0xea5db3[0x0],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x234)]=_0xea5db3[0x1],_0x2d1e3a[_0x3f1307]['to_bay']=_0xea5db3[0x2],_0x2d1e3a[_0x3f1307][_0x2b95c5(0x18f)]=_0xea5db3[0x3],_0x2d1e3a[_0x3f1307]['to_types']=_0x5de6d7,_0x2d1e3a[_0x3f1307][_0x2b95c5(0x1a9)]=_0xea5db3[0x5];}}}}});}),_0x9f0189[_0x3648ac(0x1c9)]((_0x54334e,_0x4a0ae0)=>{var _0x24f1c6=_0x3648ac;_0x2d1e3a[_0x4a0ae0][_0x24f1c6(0x258)]=_0x54334e;}),_0x892972[_0x3648ac(0x1c9)]((_0x40782c,_0x3ed514)=>{var _0x119beb=_0x3648ac;_0x2d1e3a[_0x3ed514][_0x119beb(0x198)]=_0x40782c;}),_0x277872['forEach']((_0x18b708,_0x41bab5)=>{var _0x50f1f9=_0x3648ac;_0x2d1e3a[_0x41bab5][_0x50f1f9(0x252)]=_0x18b708;}),_0x13cc42[_0x3648ac(0x1c9)]((_0x2ae88c,_0x30a309)=>{_0x2d1e3a[_0x30a309]['maxProducts']=_0x2ae88c;}),_0x34cdef[_0x3648ac(0x1c9)]((_0x2b9f26,_0x4f30e9)=>{_0x2d1e3a[_0x4f30e9]['unit']=_0x2b9f26;}),_0x345367['forEach']((_0x40c96c,_0x2ff9b9)=>{var _0x40ad87=_0x3648ac;_0x2d1e3a[_0x2ff9b9][_0x40ad87(0x21e)]=_0x40c96c;}),_0x160fbe[_0x3648ac(0x1c9)]((_0x219704,_0x51d6d9)=>{var _0x42e5a7=_0x3648ac;_0x2d1e3a[_0x51d6d9][_0x42e5a7(0x227)]=_0x219704;}),_0x103c97[_0x3648ac(0x1c9)]((_0x506018,_0x554cef)=>{_0x2d1e3a[_0x554cef]['expiry_date']=_0x506018;}),_0x5d3e33['forEach']((_0x537c49,_0x3c075e)=>{var _0x3ea092=_0x3648ac;_0x2d1e3a[_0x3c075e][_0x3ea092(0x171)]=_0x537c49;}),_0x4c20b9[_0x3648ac(0x1c9)]((_0x3161ba,_0x269229)=>{var _0x4f14ac=_0x3648ac;_0x2d1e3a[_0x269229][_0x4f14ac(0x1a8)]=_0x3161ba;}),_0x412561[_0x3648ac(0x1c9)]((_0x486f64,_0x12df01)=>{_0x2d1e3a[_0x12df01]['prod_cat']=_0x486f64;}),_0x8606da[_0x3648ac(0x1c9)]((_0x413d9b,_0x287161)=>{var _0x35b91b=_0x3648ac;_0x2d1e3a[_0x287161][_0x35b91b(0x1cc)]=_0x413d9b;}),_0x405f7a[_0x3648ac(0x1c9)]((_0x28bd49,_0x9b6f5d)=>{_0x2d1e3a[_0x9b6f5d]['to_room_name']=_0x28bd49;});const _0x263c2c=_0x2d1e3a[_0x3648ac(0x1ac)](_0x23acd9=>_0x23acd9['to_quantity']!=='0'&&_0x23acd9[_0x3648ac(0x1c6)]!==''||_0x23acd9[_0x3648ac(0x1a9)]!=='0'&&_0x23acd9['to_floorlevel']!==''),_0x1d9bbe=new transfers({'date':_0x3c5ecc,'from_warehouse':_0x271e5e,'to_warehouse':_0xd3eae9,'product':_0x263c2c,'note':_0x429c18,'invoice':_0xf4ca28}),_0x5c94bc=await _0x1d9bbe['save']();_0x2dbdbb[_0x3648ac(0x1c2)](_0x3648ac(0x19a),_0x3648ac(0x216)),_0x51caff[_0x3648ac(0x16d)](_0x3648ac(0x1cb)+_0x5c94bc[_0x3648ac(0x242)]);}catch(_0x19bcbf){console[_0x3648ac(0x209)](_0x19bcbf),_0x51caff[_0x3648ac(0x19e)](0xc8)[_0x3648ac(0x20e)]({'errorMessage':_0x19bcbf[_0x3648ac(0x230)]});}}),router[a0_0x741aca(0x1a2)]('/preview/:id',auth,async(_0x4ec6c9,_0x23a8d6)=>{var _0x366430=a0_0x741aca;try{const {username:_0x8df0b7,email:_0x1af4b6,role:_0x336c08}=_0x4ec6c9[_0x366430(0x21f)],_0x5a5673=_0x4ec6c9[_0x366430(0x21f)],_0x40e6d9=await profile[_0x366430(0x1fc)]({'email':_0x5a5673[_0x366430(0x233)]}),_0x17ec22=await master_shop[_0x366430(0x168)]();console[_0x366430(0x209)](_0x366430(0x166),_0x17ec22);const _0x48e281=await transfers[_0x366430(0x262)](_0x4ec6c9[_0x366430(0x215)]['id']);let _0x296b93=new Date(_0x48e281[_0x366430(0x208)]),_0x25508a=('0'+_0x296b93['getDate']())[_0x366430(0x260)](-0x2),_0x2f7de6=('0'+(_0x296b93[_0x366430(0x16e)]()+0x1))[_0x366430(0x260)](-0x2),_0xe0d910=_0x296b93[_0x366430(0x1e0)](),_0xc5e99e=_0xe0d910+'-'+_0x2f7de6+'-'+_0x25508a,_0x2f5422;if(_0x5a5673[_0x366430(0x1bd)]==_0x366430(0x211)){const _0x52d2aa=await staff[_0x366430(0x1fc)]({'email':_0x5a5673[_0x366430(0x233)]});_0x2f5422=await warehouse[_0x366430(0x168)]({'status':_0x366430(0x1f8),'name':_0x52d2aa[_0x366430(0x24f)],'warehouse_category':_0x366430(0x1d7)});}else _0x2f5422=await warehouse['find']({'status':_0x366430(0x1f8),'warehouse_category':'Raw\x20Materials'});const _0x5324ca=await warehouse[_0x366430(0x161)]([{'$match':{'name':_0x48e281[_0x366430(0x1e8)]}},{'$unwind':_0x366430(0x1dd)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x366430(0x176)},'product_stock':{'$first':_0x366430(0x1f5)},'bay':{'$first':_0x366430(0x207)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x366430(0x1fd)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x366430(0x264)},'storage':{'$first':_0x366430(0x1e2)},'rack':{'$first':_0x366430(0x263)},'expiry_date':{'$first':_0x366430(0x254)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x366430(0x180)}}}]);if(_0x17ec22[0x0][_0x366430(0x24d)]==_0x366430(0x1d6)){var _0x1831d2=users[_0x366430(0x1a0)];console[_0x366430(0x209)](_0x1831d2);}else{if(_0x17ec22[0x0]['language']==_0x366430(0x1f1))var _0x1831d2=users[_0x366430(0x1f1)];else{if(_0x17ec22[0x0][_0x366430(0x24d)]=='German')var _0x1831d2=users[_0x366430(0x18d)];else{if(_0x17ec22[0x0][_0x366430(0x24d)]==_0x366430(0x20b))var _0x1831d2=users[_0x366430(0x20b)];else{if(_0x17ec22[0x0]['language']=='French')var _0x1831d2=users[_0x366430(0x1c7)];else{if(_0x17ec22[0x0]['language']==_0x366430(0x22e))var _0x1831d2=users['Portuguese'];else{if(_0x17ec22[0x0][_0x366430(0x24d)]==_0x366430(0x16c))var _0x1831d2=users[_0x366430(0x16c)];else{if(_0x17ec22[0x0][_0x366430(0x24d)]=='Arabic\x20(ae)')var _0x1831d2=users[_0x366430(0x21c)];}}}}}}}_0x23a8d6[_0x366430(0x269)](_0x366430(0x187),{'success':_0x4ec6c9[_0x366430(0x1c2)](_0x366430(0x19a)),'errors':_0x4ec6c9['flash'](_0x366430(0x1b0)),'role':_0x5a5673,'profile':_0x40e6d9,'master_shop':_0x17ec22,'warehouse':_0x2f5422,'transfer':_0x48e281,'stock':_0x5324ca,'language':_0x1831d2});}catch(_0x190dfb){console[_0x366430(0x209)](_0x190dfb);}});async function updateProduct_detl(_0x3be700){var _0x2d969f=a0_0x741aca;const _0x40ce83=await mongoose[_0x2d969f(0x223)]();try{console['log'](_0x2d969f(0x1e4));const _0x143628=mongoose['Types'][_0x2d969f(0x1d0)];return await _0x40ce83[_0x2d969f(0x23c)](async()=>{var _0x52c402=_0x2d969f;for(const _0x34f6b1 of _0x3be700[_0x52c402(0x1aa)]){console['log'](new _0x143628());const _0xe9cb75=await warehouse['aggregate']([{'$match':{'name':_0x3be700['from_warehouse'],'room':_0x34f6b1[_0x52c402(0x1cc)]}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x143628(_0x34f6b1['id_transaction_id'])}}])[_0x52c402(0x225)](_0x40ce83);if(_0xe9cb75['length']===0x0)throw new Error(_0x52c402(0x196)+_0x34f6b1[_0x52c402(0x1cc)]);for(const _0xd80766 of _0xe9cb75){console[_0x52c402(0x209)](parseFloat(_0xd80766[_0x52c402(0x265)]['product_stock'][_0x52c402(0x1a1)](0x2))>=parseFloat(_0x34f6b1[_0x52c402(0x1c6)]['toFixed'](0x2)));if(parseFloat(_0xd80766[_0x52c402(0x265)][_0x52c402(0x1ef)][_0x52c402(0x1a1)](0x2))>=parseFloat(_0x34f6b1[_0x52c402(0x1c6)][_0x52c402(0x1a1)](0x2))){let _0x45f69f=(parseFloat(_0xd80766[_0x52c402(0x265)][_0x52c402(0x1ef)][_0x52c402(0x1a1)](0x2))-parseFloat(_0x34f6b1[_0x52c402(0x1c6)]))['toFixed'](0x2);console[_0x52c402(0x209)](_0x52c402(0x25b),_0x45f69f),console[_0x52c402(0x209)](_0x52c402(0x1a4)),await warehouse['updateOne']({'_id':_0x143628(_0xd80766[_0x52c402(0x242)]),'product_details._id':_0x143628(_0xd80766[_0x52c402(0x265)][_0x52c402(0x242)])},{'$set':{'product_details.$.product_stock':_0x45f69f,'product_details.$.trf_invoice':_0x3be700[_0x52c402(0x228)]}},{'session':_0x40ce83});const _0x40eb0f=await warehouse[_0x52c402(0x161)]([{'$match':{'name':_0x3be700['to_warehouse'],'room':_0x34f6b1[_0x52c402(0x190)]}}])[_0x52c402(0x225)](_0x40ce83);console[_0x52c402(0x209)](_0x52c402(0x244)),await warehouse['updateOne']({'name':_0x3be700['to_warehouse'],'room':_0x34f6b1[_0x52c402(0x190)]},{'$push':{'product_details':{'product_name':_0x34f6b1[_0x52c402(0x1fa)],'product_stock':_0x34f6b1['to_quantity'],'primary_code':_0x34f6b1[_0x52c402(0x258)],'secondary_code':_0x34f6b1[_0x52c402(0x198)],'product_code':_0x34f6b1[_0x52c402(0x252)],'storage':_0x34f6b1['storage'],'rack':_0x34f6b1[_0x52c402(0x234)],'bay':_0x34f6b1[_0x52c402(0x23d)],'bin':_0x34f6b1[_0x52c402(0x18f)],'type':_0x34f6b1['to_types'],'floorlevel':_0x34f6b1['to_floorlevel'],'maxProducts':_0x34f6b1['maxProducts'],'expiry_date':_0x34f6b1[_0x52c402(0x208)],'production_date':_0x34f6b1['production_date'],'maxPerUnit':_0x34f6b1['maxperunit'],'batch_code':_0x34f6b1[_0x52c402(0x227)],'unit':_0x34f6b1['unit'],'secondary_unit':_0x34f6b1[_0x52c402(0x21e)],'alertQTY':_0xd80766[_0x52c402(0x265)][_0x52c402(0x175)],'delivery_date':_0xd80766[_0x52c402(0x265)][_0x52c402(0x202)],'delivery_code':_0xd80766[_0x52c402(0x265)][_0x52c402(0x259)],'product_cat':_0xd80766[_0x52c402(0x265)][_0x52c402(0x19d)],'invoice':_0x34f6b1['from_invoice'],'trf_invoice':_0x3be700[_0x52c402(0x228)],'date_data':_0x3be700[_0x52c402(0x16a)],'_id':new _0x143628()}}},{'session':_0x40ce83});}else{console[_0x52c402(0x209)](_0x52c402(0x1c0),QTYTotal);throw new Error('No\x20matching\x20document\x20found\x20for\x20product\x20ID\x20'+_0xd80766['_id']+'\x20and\x20QTY\x20:\x20'+QTYTotal);}}}}),{'success':!![],'message':'Products\x20updated\x20successfully.'};}catch(_0xa5d6){return console[_0x2d969f(0x209)](_0xa5d6),await _0x40ce83['abortTransaction'](),console[_0x2d969f(0x209)](_0x2d969f(0x204)),{'success':![],'message':_0xa5d6[_0x2d969f(0x230)]};}finally{_0x40ce83[_0x2d969f(0x1d3)](),console['log']('..............disconnected.....................');}}router[a0_0x741aca(0x23f)](a0_0x741aca(0x217),auth,async(_0x52aec8,_0xcb7a6d)=>{var _0x1a6e39=a0_0x741aca;try{const _0x1e5efe=_0x52aec8[_0x1a6e39(0x215)]['id'],{from_warehouse:_0x28fa03,FromRoom_name:_0x4c5358,to_warehouse:_0x4a8762,ToRoom_name:_0x4fb3b3}=_0x52aec8['body'],_0x54a235=await transfers[_0x1a6e39(0x262)]({'_id':_0x1e5efe});await updateProduct_detl(_0x54a235),_0x54a235[_0x1a6e39(0x1e3)]=_0x1a6e39(0x1db);const _0x5ba92c=await _0x54a235[_0x1a6e39(0x1e6)](),_0x444466=await master_shop[_0x1a6e39(0x168)](),_0x579c92=await email_settings[_0x1a6e39(0x1fc)](),_0x58ca1c=await supervisor_settings['find']();var _0x2aea8e=_0x54a235[_0x1a6e39(0x1aa)],_0x488078='',_0x4857bb;for(_0x4857bb in _0x2aea8e){_0x488078+=_0x1a6e39(0x1ba)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2aea8e[_0x4857bb][_0x1a6e39(0x1fa)]+'</td>'+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb][_0x1a6e39(0x252)]+_0x1a6e39(0x25a)+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb]['to_quantity']+_0x1a6e39(0x25a)+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb][_0x1a6e39(0x1d4)]+'</td>'+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb][_0x1a6e39(0x21e)]+'</td>'+_0x1a6e39(0x1b3)+_0x54a235[_0x1a6e39(0x1a7)]+_0x1a6e39(0x25a)+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb][_0x1a6e39(0x190)]+_0x1a6e39(0x25a)+_0x1a6e39(0x1b3)+_0x2aea8e[_0x4857bb][_0x1a6e39(0x26a)]+_0x2aea8e[_0x4857bb][_0x1a6e39(0x234)]+_0x2aea8e[_0x4857bb]['to_bay']+_0x2aea8e[_0x4857bb]['to_bin']+_0x2aea8e[_0x4857bb][_0x1a6e39(0x235)][0x0]+_0x2aea8e[_0x4857bb][_0x1a6e39(0x1a9)]+_0x1a6e39(0x25a),'</tr>';}let _0x1b2758=nodemailer[_0x1a6e39(0x1eb)]({'host':_0x579c92['host'],'port':Number(_0x579c92[_0x1a6e39(0x1fe)]),'secure':![],'auth':{'user':_0x579c92[_0x1a6e39(0x233)],'pass':_0x579c92['password']}}),_0x14b654={'from':_0x579c92[_0x1a6e39(0x233)],'to':_0x58ca1c[0x0][_0x1a6e39(0x178)],'subject':_0x1a6e39(0x1ff),'attachments':[{'filename':_0x1a6e39(0x173),'path':__dirname+'/../public'+_0x1a6e39(0x221)+_0x444466[0x0][_0x1a6e39(0x23a)],'cid':_0x1a6e39(0x1b2)}],'html':'<!DOCTYPE\x20html>'+_0x1a6e39(0x22f)+_0x1a6e39(0x25f)+_0x1a6e39(0x17a)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x1a6e39(0x17a)+_0x1a6e39(0x15f)+'</div>'+'<div>'+_0x1a6e39(0x1be)+_0x444466[0x0][_0x1a6e39(0x1d1)]+_0x1a6e39(0x1ca)+'</div>'+'</div>'+_0x1a6e39(0x1de)+_0x1a6e39(0x17a)+_0x1a6e39(0x19b)+_0x1a6e39(0x251)+_0x54a235['invoice']+'\x20'+_0x1a6e39(0x1ce)+_0x1a6e39(0x15d)+_0x54a235[_0x1a6e39(0x16a)]+'\x20'+_0x1a6e39(0x16b)+_0x1a6e39(0x229)+_0x1a6e39(0x247)+_0x1a6e39(0x20f)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+_0x1a6e39(0x17c)+_0x1a6e39(0x182)+_0x1a6e39(0x193)+_0x1a6e39(0x205)+_0x1a6e39(0x24c)+_0x1a6e39(0x163)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+'</tr>'+_0x1a6e39(0x164)+_0x1a6e39(0x170)+'\x20'+_0x488078+'\x20'+_0x1a6e39(0x1ab)+'</table>'+_0x1a6e39(0x17a)+_0x1a6e39(0x238)+_0x1a6e39(0x17d)+_0x444466[0x0][_0x1a6e39(0x1d1)]+_0x1a6e39(0x229)+'</div>'+_0x1a6e39(0x247)+_0x1a6e39(0x1c1)};_0x1b2758[_0x1a6e39(0x1f7)](_0x14b654,function(_0x4a63d4,_0x2ce2ca){var _0x33cce3=_0x1a6e39;_0x4a63d4?(console[_0x33cce3(0x209)](_0x4a63d4),console[_0x33cce3(0x209)](_0x33cce3(0x210))):console[_0x33cce3(0x209)](_0x33cce3(0x189));}),_0x52aec8[_0x1a6e39(0x1c2)](_0x1a6e39(0x19a),_0x1a6e39(0x236)),_0xcb7a6d['redirect']('/picking_list/PDF_transfer_rm/'+_0x5ba92c[_0x1a6e39(0x242)]);}catch(_0x5847f6){console[_0x1a6e39(0x209)](_0x5847f6);}});function BayBinSelected(_0x4d674b,_0x45321a){var _0x2ada49=a0_0x741aca,_0x2fcae4=[],_0x52ff97=[],_0x462626=[],_0x2fa77c=[],_0x41b56a=[],_0x2ffebf=[];let _0x10f36b=[];if(_0x4d674b==_0x2ada49(0x1b1))switch(_0x45321a){case _0x2ada49(0x213):_0x2fcae4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x52ff97=[0x1,0x2],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=['Level',_0x2ada49(0x222)],_0x41b56a=['D'],_0x2ffebf=['A'];break;case _0x2ada49(0x160):_0x2fcae4=[0x6,0x5,0x4,0x3,0x2,0x1],_0x52ff97=[0x1,0x2],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=[_0x2ada49(0x218),_0x2ada49(0x222)],_0x41b56a=['D'],_0x2ffebf=['B'];break;case'Shelves':_0x2fcae4=[0x0],_0x52ff97=[0x0],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=[_0x2ada49(0x222)],_0x41b56a=['D'],_0x2ffebf=['S'];break;case'Receiving\x20Area':_0x2fcae4=[0x0],_0x52ff97=[0x0],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x462626=[_0x2ada49(0x222)],_0x41b56a=['D'],_0x2ffebf=['R'];break;}else{if(_0x4d674b==_0x2ada49(0x1f0))switch(_0x45321a){case _0x2ada49(0x213):_0x2fcae4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x52ff97=['B','F'],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=[_0x2ada49(0x218),_0x2ada49(0x222)],_0x41b56a=['C'],_0x2ffebf=['A'];break;case _0x2ada49(0x160):_0x2fcae4=[0x5,0x4,0x3,0x2,0x1],_0x52ff97=['F','B','S'],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=[_0x2ada49(0x218),'Floor'],_0x41b56a=['C'],_0x2ffebf=['B'];break;case _0x2ada49(0x220):_0x2fcae4=[0x1,0x2,0x3,0x4,0x5],_0x52ff97=['B','F','S'],_0x2fa77c=[0x5,0x4,0x3,0x2,0x1],_0x462626=[_0x2ada49(0x218),_0x2ada49(0x222)],_0x41b56a=['C'],_0x2ffebf=['C'];break;case'Rack\x20D':_0x2fcae4=[0x5,0x4,0x3,0x2,0x1],_0x52ff97=['F','B','S'],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=['Level',_0x2ada49(0x222)],_0x41b56a=['C'],_0x2ffebf=['D'];break;case _0x2ada49(0x1b6):_0x2fcae4=[0x4,0x3,0x2,0x1],_0x52ff97=[0x1,0x2],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=['Level','Floor'],_0x41b56a=['C'],_0x2ffebf=['E'];break;case _0x2ada49(0x24b):_0x2fcae4=[0x1,0x2,0x3],_0x52ff97=[0x1,0x2],_0x2fa77c=[0x1,0x2,0x3,0x4,0x5],_0x462626=['Level'],_0x41b56a=['C'],_0x2ffebf=['F'];break;}}return{'levels':_0x2fcae4,'Isle':_0x52ff97,'rack':_0x2fa77c,'type':_0x462626,'storage':_0x41b56a,'rak':_0x2ffebf};}router[a0_0x741aca(0x1a2)](a0_0x741aca(0x1dc),auth,async(_0x54a919,_0x1283a3)=>{var _0x59e36a=a0_0x741aca;try{const {username:_0x5d91f6,email:_0x36af3c,role:_0x22ac83}=_0x54a919[_0x59e36a(0x21f)],_0xc46e77=_0x54a919[_0x59e36a(0x21f)],_0x469cd9=await profile[_0x59e36a(0x1fc)]({'email':_0xc46e77[_0x59e36a(0x233)]}),_0x4bfacb=await master_shop[_0x59e36a(0x168)](),_0x5d14cc=await transfers[_0x59e36a(0x262)](_0x54a919[_0x59e36a(0x215)]['id']);let _0x476ebb;if(_0xc46e77[_0x59e36a(0x1bd)]=='staff'){const _0x103269=await staff['findOne']({'email':_0xc46e77[_0x59e36a(0x233)]});_0x476ebb=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x103269[_0x59e36a(0x24f)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x59e36a(0x181),'name':{'$first':_0x59e36a(0x181)}}}]);}else _0x476ebb=await warehouse['aggregate']([{'$match':{'status':_0x59e36a(0x1f8),'warehouse_category':_0x59e36a(0x1d7)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);const _0x54172a=await warehouse['aggregate']([{'$match':{'name':_0x5d14cc[_0x59e36a(0x1e8)],'warehouse_category':_0x59e36a(0x1d7)}},{'$unwind':_0x59e36a(0x1dd)},{'$group':{'_id':_0x59e36a(0x195),'name':{'$first':_0x59e36a(0x176)},'product_stock':{'$first':_0x59e36a(0x1f5)},'bay':{'$first':_0x59e36a(0x207)},'bin':{'$first':_0x59e36a(0x1e9)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x59e36a(0x246)},'primary_code':{'$first':_0x59e36a(0x19f)},'secondary_code':{'$first':_0x59e36a(0x1d5)},'product_code':{'$first':_0x59e36a(0x264)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x59e36a(0x263)},'expiry_date':{'$first':_0x59e36a(0x254)},'production_date':{'$first':_0x59e36a(0x1e5)},'room':{'$first':_0x59e36a(0x180)}}}]),_0x5b9fd6=await product[_0x59e36a(0x168)]({}),_0x2776d7=BayBinSelected(_0x5d14cc['to_warehouse'],_0x5d14cc[_0x59e36a(0x239)]);if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x1d6)){var _0x4ee8ad=users[_0x59e36a(0x1a0)];console[_0x59e36a(0x209)](_0x4ee8ad);}else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x1f1))var _0x4ee8ad=users[_0x59e36a(0x1f1)];else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x18d))var _0x4ee8ad=users[_0x59e36a(0x18d)];else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x20b))var _0x4ee8ad=users[_0x59e36a(0x20b)];else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x1c7))var _0x4ee8ad=users[_0x59e36a(0x1c7)];else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x22e))var _0x4ee8ad=users['Portuguese'];else{if(_0x4bfacb[0x0][_0x59e36a(0x24d)]==_0x59e36a(0x16c))var _0x4ee8ad=users[_0x59e36a(0x16c)];else{if(_0x4bfacb[0x0]['language']==_0x59e36a(0x1e7))var _0x4ee8ad=users[_0x59e36a(0x21c)];}}}}}}}_0x1283a3['render']('edit_transfer',{'success':_0x54a919[_0x59e36a(0x1c2)](_0x59e36a(0x19a)),'errors':_0x54a919[_0x59e36a(0x1c2)]('errors'),'role':_0xc46e77,'profile':_0x469cd9,'master_shop':_0x4bfacb,'warehouse':_0x476ebb,'transfer':_0x5d14cc,'stock':_0x54172a,'unit':_0x5b9fd6,'language':_0x4ee8ad});}catch(_0x5b6f3e){console[_0x59e36a(0x209)](_0x5b6f3e);}}),router[a0_0x741aca(0x23f)]('/view/:id',auth,async(_0xbd2dcd,_0x162dae)=>{var _0x2930f7=a0_0x741aca;try{const _0x18a3c9=_0xbd2dcd[_0x2930f7(0x215)]['id'],_0x2603b4=await transfers[_0x2930f7(0x262)](_0x18a3c9);_0x162dae['json'](_0xbd2dcd[_0x2930f7(0x17b)]);return;const {date:_0x5c6476,from_warehouse:_0x31c330,FromRoom_name:_0x238419,to_warehouse:_0x59354b,ToRoom_name:_0x25d715,prod_name:_0x301029,from_prod_qty:_0x3ca803,from_prod_level:_0x3e24aa,from_prod_isle:_0x1db06c,from_prod_pallet:_0x32a976,to_prod_qty:_0x3e6caf,to_prod_level:_0x397711,to_prod_isle:_0x1ae72a,to_prod_pallet:_0xbf370a,primary_code:_0x2f9b37,secondary_code:_0xa41042,product_code3:_0x8f5e8e,note:_0x138a8c,invoice:_0x446c7f,expiry_date:_0x849239}=_0xbd2dcd[_0x2930f7(0x17b)];if(typeof _0x301029=='string')var _0x30c0c0=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1f3)]],_0x4fe903=[_0xbd2dcd['body']['from_prod_qty']],_0x447967=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1bc)]],_0x553bcf=[_0xbd2dcd['body'][_0x2930f7(0x21d)]],_0x23e516=[_0xbd2dcd[_0x2930f7(0x17b)]['from_prod_pallet']],_0x31801e=[_0xbd2dcd['body']['from_types']],_0x19c3b7=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x22a)]],_0x395c15=[_0xbd2dcd[_0x2930f7(0x17b)]['to_prod_level']],_0x52d1dd=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1af)]],_0x413798=[_0xbd2dcd[_0x2930f7(0x17b)]['to_prod_pallet']],_0x5d381a=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x235)]],_0x1debbe=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x26a)]],_0x1705c3=[_0xbd2dcd['body']['rak']],_0x391124=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x258)]],_0x43a20e=[_0xbd2dcd[_0x2930f7(0x17b)]['secondary_code']],_0x257688=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1b9)]],_0x4a8e10=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x257)]],_0x468ae6=[_0xbd2dcd[_0x2930f7(0x17b)]['unit']],_0x47280=[_0xbd2dcd[_0x2930f7(0x17b)]['secondary_unit']],_0x502ccf=[_0xbd2dcd[_0x2930f7(0x17b)]['batch_code']],_0x3bf2ae=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x208)]],_0x2e11c7=[_0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x162)]],_0x59b7f5=[_0xbd2dcd[_0x2930f7(0x17b)]['from_rak']];else var _0x30c0c0=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1f3)]],_0x1debbe=[..._0xbd2dcd[_0x2930f7(0x17b)]['storage']],_0x1705c3=[..._0xbd2dcd['body'][_0x2930f7(0x18a)]],_0x31801e=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x20c)]],_0x5d381a=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x235)]],_0x4fe903=[..._0xbd2dcd['body'][_0x2930f7(0x1ea)]],_0x447967=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1bc)]],_0x553bcf=[..._0xbd2dcd[_0x2930f7(0x17b)]['from_prod_isle']],_0x23e516=[..._0xbd2dcd['body'][_0x2930f7(0x231)]],_0x19c3b7=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x22a)]],_0x395c15=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x206)]],_0x52d1dd=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1af)]],_0x413798=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1a5)]],_0x391124=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x258)]],_0x43a20e=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x198)]],_0x257688=[..._0xbd2dcd[_0x2930f7(0x17b)]['product_code3']],_0x4a8e10=[..._0xbd2dcd['body'][_0x2930f7(0x257)]],_0x468ae6=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1d4)]],_0x47280=[..._0xbd2dcd['body'][_0x2930f7(0x21e)]],_0x502ccf=[..._0xbd2dcd['body'][_0x2930f7(0x227)]],_0x3bf2ae=[..._0xbd2dcd[_0x2930f7(0x17b)]['expiry_date']],_0x2e11c7=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x162)]],_0x59b7f5=[..._0xbd2dcd[_0x2930f7(0x17b)][_0x2930f7(0x1cf)]];const _0x34529e=_0x30c0c0[_0x2930f7(0x18c)](_0x5e63bb=>{return _0x5e63bb={'product_name':_0x5e63bb};});_0x4fe903[_0x2930f7(0x1c9)]((_0x2dac,_0x3ef9ea)=>{var _0x998396=_0x2930f7;_0x34529e[_0x3ef9ea][_0x998396(0x22b)]=_0x2dac;}),_0x447967[_0x2930f7(0x1c9)]((_0x408141,_0x364b01)=>{_0x34529e[_0x364b01]['from_bay']=_0x408141;}),_0x553bcf['forEach']((_0x54d2ad,_0x315a4b)=>{var _0x2d5d70=_0x2930f7;_0x34529e[_0x315a4b][_0x2d5d70(0x184)]=_0x54d2ad;}),_0x23e516['forEach']((_0x1d0a6b,_0x5d37ff)=>{_0x34529e[_0x5d37ff]['from_floorlevel']=_0x1d0a6b;}),_0x19c3b7['forEach']((_0x55d048,_0x2f6163)=>{var _0x5e3c9b=_0x2930f7;_0x34529e[_0x2f6163][_0x5e3c9b(0x1c6)]=_0x55d048;}),_0x395c15[_0x2930f7(0x1c9)]((_0x40f74e,_0x455dd3)=>{var _0x221d8f=_0x2930f7;_0x34529e[_0x455dd3][_0x221d8f(0x23d)]=_0x40f74e;}),_0x52d1dd['forEach']((_0x277586,_0x518824)=>{var _0x1b7faf=_0x2930f7;_0x34529e[_0x518824][_0x1b7faf(0x18f)]=_0x277586;}),_0x413798['forEach']((_0x1d83b5,_0x2e920e)=>{var _0x116a28=_0x2930f7;_0x34529e[_0x2e920e][_0x116a28(0x1a9)]=_0x1d83b5;}),_0x391124[_0x2930f7(0x1c9)]((_0x1ff7e8,_0x5c3c5e)=>{var _0x581fd5=_0x2930f7;_0x34529e[_0x5c3c5e][_0x581fd5(0x258)]=_0x1ff7e8;}),_0x43a20e['forEach']((_0x17dc74,_0x30dfb2)=>{var _0xf3986c=_0x2930f7;_0x34529e[_0x30dfb2][_0xf3986c(0x198)]=_0x17dc74;}),_0x257688[_0x2930f7(0x1c9)]((_0x2f12a7,_0x5f0467)=>{_0x34529e[_0x5f0467]['product_code']=_0x2f12a7;}),_0x4a8e10[_0x2930f7(0x1c9)]((_0x4de725,_0x53887a)=>{var _0x323f19=_0x2930f7;_0x34529e[_0x53887a][_0x323f19(0x21a)]=_0x4de725;}),_0x468ae6['forEach']((_0x21a2e4,_0x2501e3)=>{_0x34529e[_0x2501e3]['unit']=_0x21a2e4;}),_0x47280['forEach']((_0x3bf663,_0x5f3632)=>{_0x34529e[_0x5f3632]['secondary_unit']=_0x3bf663;}),_0x502ccf['forEach']((_0x10e789,_0x512efc)=>{var _0x5262ab=_0x2930f7;_0x34529e[_0x512efc][_0x5262ab(0x227)]=_0x10e789;}),_0x3bf2ae[_0x2930f7(0x1c9)]((_0x1310ff,_0x1ce1a0)=>{_0x34529e[_0x1ce1a0]['expiry_date']=_0x1310ff;}),_0x1debbe[_0x2930f7(0x1c9)]((_0x4f4fbe,_0x4e2497)=>{var _0x2b407a=_0x2930f7;_0x34529e[_0x4e2497][_0x2b407a(0x26a)]=_0x4f4fbe;}),_0x1705c3[_0x2930f7(0x1c9)]((_0x4c0906,_0x4960f3)=>{var _0x92af11=_0x2930f7;_0x34529e[_0x4960f3][_0x92af11(0x234)]=_0x4c0906;}),_0x31801e[_0x2930f7(0x1c9)]((_0x1e1366,_0x2e2d77)=>{var _0x2548ce=_0x2930f7;_0x34529e[_0x2e2d77][_0x2548ce(0x20c)]=_0x1e1366;}),_0x5d381a[_0x2930f7(0x1c9)]((_0x12bd7e,_0x5cda91)=>{_0x34529e[_0x5cda91]['to_types']=_0x12bd7e;}),_0x2e11c7[_0x2930f7(0x1c9)]((_0x1b6f3e,_0x8712e1)=>{var _0x2d789c=_0x2930f7;_0x34529e[_0x8712e1][_0x2d789c(0x162)]=_0x1b6f3e;}),_0x59b7f5['forEach']((_0x770944,_0x608e8d)=>{var _0xbe0f9a=_0x2930f7;_0x34529e[_0x608e8d][_0xbe0f9a(0x22d)]=_0x770944;});const _0x3c150f=_0x34529e[_0x2930f7(0x1ac)](_0x1156cd=>_0x1156cd[_0x2930f7(0x1c6)]!=='0'&&_0x1156cd[_0x2930f7(0x1c6)]!==''||_0x1156cd[_0x2930f7(0x1a9)]!=='0'&&_0x1156cd[_0x2930f7(0x1a9)]!=='');var _0xc068e=0x0;_0x3c150f[_0x2930f7(0x1c9)](_0xf7c233=>{var _0x5061e7=_0x2930f7;parseInt(_0xf7c233[_0x5061e7(0x22b)])<parseInt(_0xf7c233['to_quantity'])&&_0xc068e++;});if(_0xc068e!=0x0)return _0xbd2dcd[_0x2930f7(0x1c2)](_0x2930f7(0x1b0),_0x2930f7(0x16f)),_0x162dae['redirect'](_0x2930f7(0x1bb));const _0x43e8f0=await warehouse[_0x2930f7(0x1fc)]({'name':_0x2603b4[_0x2930f7(0x1e8)],'room':_0x2603b4[_0x2930f7(0x243)]});_0x2603b4[_0x2930f7(0x1aa)]['forEach'](_0x569ae7=>{var _0x1fdfa2=_0x2930f7;if(_0x569ae7[_0x1fdfa2(0x1c6)]>0x0){const _0x298754=_0x43e8f0[_0x1fdfa2(0x265)][_0x1fdfa2(0x18c)](_0xdddadb=>{var _0xc89a47=_0x1fdfa2;_0xdddadb[_0xc89a47(0x1fa)]==_0x569ae7[_0xc89a47(0x1fa)]&&_0xdddadb['floorlevel']==_0x569ae7[_0xc89a47(0x1ec)]&&_0xdddadb[_0xc89a47(0x23b)]==_0x569ae7['from_types']&&_0xdddadb['bin']==_0x569ae7[_0xc89a47(0x184)]&&_0xdddadb[_0xc89a47(0x219)]==_0x569ae7['from_bay']&&_0xdddadb[_0xc89a47(0x234)]==_0x569ae7[_0xc89a47(0x22d)]&&_0xdddadb[_0xc89a47(0x26a)]==_0x569ae7['from_storage']&&(_0xdddadb['product_stock']=parseInt(_0xdddadb[_0xc89a47(0x1ef)])+parseInt(_0x569ae7['to_quantity']));});}}),await _0x43e8f0[_0x2930f7(0x1e6)]();const _0x3f2c9b=await warehouse[_0x2930f7(0x1fc)]({'name':_0x2603b4[_0x2930f7(0x1a7)],'room':_0x2603b4['to_room']});_0x2603b4[_0x2930f7(0x1aa)][_0x2930f7(0x1c9)](_0x46dd9b=>{var _0x3bc5d4=_0x2930f7;if(_0x46dd9b[_0x3bc5d4(0x1c6)]>0x0){const _0x2f2592=_0x3f2c9b['product_details'][_0x3bc5d4(0x18c)](_0x2d1dd8=>{var _0x2136e9=_0x3bc5d4;_0x2d1dd8[_0x2136e9(0x1fa)]==_0x46dd9b['product_name']&&_0x2d1dd8[_0x2136e9(0x25d)]==_0x46dd9b[_0x2136e9(0x1a9)]&&_0x2d1dd8[_0x2136e9(0x23b)]==_0x46dd9b[_0x2136e9(0x235)]&&_0x2d1dd8[_0x2136e9(0x25e)]==_0x46dd9b[_0x2136e9(0x18f)]&&_0x2d1dd8[_0x2136e9(0x219)]==_0x46dd9b[_0x2136e9(0x23d)]&&_0x2d1dd8[_0x2136e9(0x234)]==_0x46dd9b[_0x2136e9(0x234)]&&_0x2d1dd8[_0x2136e9(0x26a)]==_0x46dd9b[_0x2136e9(0x26a)]&&(_0x2d1dd8[_0x2136e9(0x1ef)]=parseInt(_0x2d1dd8[_0x2136e9(0x1ef)])-parseInt(_0x46dd9b[_0x2136e9(0x1c6)]));});}}),await _0x3f2c9b[_0x2930f7(0x1e6)](),_0x2603b4[_0x2930f7(0x16a)]=_0x5c6476,_0x2603b4[_0x2930f7(0x1e8)]=_0x31c330,_0x2603b4[_0x2930f7(0x1a7)]=_0x59354b,_0x2603b4[_0x2930f7(0x1aa)]=_0x3c150f,_0x2603b4[_0x2930f7(0x20a)]=_0x138a8c,_0x2603b4[_0x2930f7(0x228)]=_0x446c7f;const _0x4aa0b3=await _0x2603b4[_0x2930f7(0x1e6)]();console[_0x2930f7(0x209)](_0x4aa0b3);const _0x24881d=await warehouse[_0x2930f7(0x1fc)]({'name':_0x31c330,'room':_0x238419});_0x4aa0b3[_0x2930f7(0x1aa)][_0x2930f7(0x1c9)](_0x127ab4=>{var _0x31a144=_0x2930f7;if(_0x127ab4['to_quantity']>0x0){const _0x2b6cb3=_0x24881d[_0x31a144(0x265)][_0x31a144(0x18c)](_0x463481=>{var _0x425621=_0x31a144;_0x463481['product_name']==_0x127ab4[_0x425621(0x1fa)]&&_0x463481[_0x425621(0x25d)]==_0x127ab4[_0x425621(0x1ec)]&&_0x463481['type']==_0x127ab4['from_types']&&_0x463481['bin']==_0x127ab4[_0x425621(0x184)]&&_0x463481[_0x425621(0x219)]==_0x127ab4[_0x425621(0x266)]&&_0x463481['rack']==_0x127ab4[_0x425621(0x22d)]&&_0x463481[_0x425621(0x26a)]==_0x127ab4[_0x425621(0x162)]&&(_0x463481[_0x425621(0x1ef)]=parseInt(_0x463481[_0x425621(0x1ef)])-parseInt(_0x127ab4[_0x425621(0x1c6)]));});}}),await _0x24881d[_0x2930f7(0x1e6)]();const _0x2bf3b8=await warehouse['findOne']({'name':_0x59354b,'room':_0x25d715});_0x4aa0b3['product'][_0x2930f7(0x1c9)](_0x38d6de=>{var _0x4ef1fd=_0x2930f7;if(_0x38d6de['to_quantity']>0x0){var _0x4c1f78=0x0;const _0x33c27d=_0x2bf3b8[_0x4ef1fd(0x265)][_0x4ef1fd(0x18c)](_0x4fc0af=>{var _0x2dd331=_0x4ef1fd;_0x4fc0af[_0x2dd331(0x1fa)]==_0x38d6de[_0x2dd331(0x1fa)]&&_0x4fc0af[_0x2dd331(0x25d)]==_0x38d6de[_0x2dd331(0x1a9)]&&_0x4fc0af[_0x2dd331(0x23b)]==_0x38d6de[_0x2dd331(0x235)]&&_0x4fc0af[_0x2dd331(0x25e)]==_0x38d6de['to_bin']&&_0x4fc0af[_0x2dd331(0x219)]==_0x38d6de[_0x2dd331(0x23d)]&&_0x4fc0af[_0x2dd331(0x234)]==_0x38d6de[_0x2dd331(0x234)]&&_0x4fc0af[_0x2dd331(0x26a)]==_0x38d6de[_0x2dd331(0x26a)]&&(_0x4fc0af['product_stock']=parseInt(_0x4fc0af['product_stock'])+parseInt(_0x38d6de[_0x2dd331(0x1c6)]),_0x4c1f78++);});_0x4c1f78=='0'&&(_0x2bf3b8['product_details']=_0x2bf3b8[_0x4ef1fd(0x265)][_0x4ef1fd(0x1d2)]({'product_name':_0x38d6de[_0x4ef1fd(0x1fa)],'product_stock':_0x38d6de[_0x4ef1fd(0x1c6)],'bay':_0x38d6de[_0x4ef1fd(0x23d)],'bin':_0x38d6de[_0x4ef1fd(0x18f)],'type':_0x38d6de[_0x4ef1fd(0x235)],'floorlevel':_0x38d6de[_0x4ef1fd(0x1a9)],'storage':_0x38d6de[_0x4ef1fd(0x26a)],'rack':_0x38d6de[_0x4ef1fd(0x234)],'product_code':_0x38d6de[_0x4ef1fd(0x252)],'primary_code':_0x38d6de['primary_code'],'secondary_code':_0x38d6de[_0x4ef1fd(0x198)],'maxProducts':_0x38d6de[_0x4ef1fd(0x21a)],'storage':_0x38d6de[_0x4ef1fd(0x26a)],'rack':_0x38d6de[_0x4ef1fd(0x234)]}));}}),await _0x2bf3b8[_0x2930f7(0x1e6)](),_0xbd2dcd['flash'](_0x2930f7(0x19a),_0x2930f7(0x1bf)),_0x162dae[_0x2930f7(0x16d)](_0x2930f7(0x17e));}catch(_0x34d9ff){console[_0x2930f7(0x209)](_0x34d9ff);}}),router[a0_0x741aca(0x23f)](a0_0x741aca(0x1ae),async(_0x3e591f,_0x56979b)=>{var _0x5ce9b3=a0_0x741aca;const {FromWareHouse:_0x4ce9f8,FromRoom:_0x75f281,ToWarehouse:_0x254ecf,ToRoom:_0xf1e979,primary_code:_0x3f394f,Roomslist:_0x1b5bbc}=_0x3e591f['body'],_0x221c79=_0x1b5bbc[_0x5ce9b3(0x183)](','),_0x159a77=[];async function _0x551fa8(_0xe30e94){var _0x2277a2=_0x5ce9b3;const _0x8b61d3=await warehouse[_0x2277a2(0x161)]([{'$match':{'name':_0x4ce9f8,'room':_0xe30e94}},{'$unwind':_0x2277a2(0x1dd)},{'$match':{'product_details.primary_code':_0x3f394f}},{'$group':{'_id':_0x2277a2(0x195),'name':{'$first':'$product_details.product_name'},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x2277a2(0x19f)},'secondary_code':{'$first':_0x2277a2(0x1d5)},'product_code':{'$first':_0x2277a2(0x264)},'level':{'$first':_0x2277a2(0x207)},'isle':{'$first':_0x2277a2(0x1e9)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x2277a2(0x246)},'unit':{'$first':_0x2277a2(0x199)},'secondary_unit':{'$first':_0x2277a2(0x1b8)},'storage':{'$first':_0x2277a2(0x1e2)},'rack':{'$first':_0x2277a2(0x263)},'expiry_date':{'$first':_0x2277a2(0x254)},'production_date':{'$first':_0x2277a2(0x1e5)},'batch_code':{'$first':_0x2277a2(0x240)},'maxPerUnit':{'$first':_0x2277a2(0x250)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x2277a2(0x180)},'maxProducts':{'$first':_0x2277a2(0x21b)},'invoice_product':{'$first':_0x2277a2(0x24a)}}}]),_0x448b59=await warehouse['aggregate']([{'$match':{'name':_0x4ce9f8,'room':_0xe30e94}},{'$unwind':_0x2277a2(0x1dd)},{'$match':{'product_details.secondary_code':_0x3f394f}},{'$group':{'_id':_0x2277a2(0x195),'name':{'$first':_0x2277a2(0x176)},'instock':{'$first':_0x2277a2(0x1f5)},'primary_code':{'$first':_0x2277a2(0x19f)},'secondary_code':{'$first':_0x2277a2(0x1d5)},'product_code':{'$first':_0x2277a2(0x264)},'level':{'$first':_0x2277a2(0x207)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x2277a2(0x1fd)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x2277a2(0x199)},'secondary_unit':{'$first':_0x2277a2(0x1b8)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x2277a2(0x263)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x2277a2(0x240)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x2277a2(0x180)},'maxProducts':{'$first':_0x2277a2(0x21b)},'invoice_product':{'$first':_0x2277a2(0x24a)}}}]);if(_0x8b61d3[_0x2277a2(0x1ee)]>0x0)_0x159a77[_0x2277a2(0x197)](_0x8b61d3);else _0x448b59[_0x2277a2(0x1ee)]>0x0&&_0x159a77[_0x2277a2(0x197)](_0x448b59);}const _0x140f8c=_0x221c79[_0x5ce9b3(0x18c)](_0x1b1219=>_0x551fa8(_0x1b1219));await Promise[_0x5ce9b3(0x18b)](_0x140f8c),_0x56979b[_0x5ce9b3(0x20e)](_0x159a77);}),router[a0_0x741aca(0x23f)](a0_0x741aca(0x177),async(_0x3d3d97,_0x5c97b3)=>{var _0x4009bb=a0_0x741aca;try{const {FromWareHouse:_0x328ea4,FromRoom:_0x58a2dc,ToWarehouse:_0x27b2d8,ToRoom:_0x5d930e,secondary_code:_0x1f128e}=_0x3d3d97[_0x4009bb(0x17b)],_0xa197=await warehouse[_0x4009bb(0x161)]([{'$match':{'name':_0x328ea4}},{'$unwind':_0x4009bb(0x1dd)},{'$match':{'product_details.secondary_code':_0x1f128e}},{'$group':{'_id':_0x4009bb(0x195),'name':{'$first':_0x4009bb(0x176)},'primary_code':{'$first':_0x4009bb(0x19f)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4009bb(0x264)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x4009bb(0x181)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x4009bb(0x1cd)},'pallet':{'$first':_0x4009bb(0x167)},'maxProducts':{'$first':_0x4009bb(0x21b)},'unit':{'$first':_0x4009bb(0x199)}}}]);_0x5c97b3[_0x4009bb(0x19e)](0xc8)[_0x4009bb(0x20e)](_0xa197);}catch(_0x2912a8){_0x5c97b3[_0x4009bb(0x19e)](0x194)['json']({'message':_0x2912a8['message']});}}),router[a0_0x741aca(0x23f)](a0_0x741aca(0x19c),async(_0x191e26,_0x28ab09)=>{var _0xadc104=a0_0x741aca;try{const {FromWareHouse:_0x5bfcd8,FromRoom:_0x225769,ToWarehouse:_0x24f417,ToRoom:_0x381b05,product_code:_0x409395}=_0x191e26[_0xadc104(0x17b)],_0x550e10=await warehouse[_0xadc104(0x161)]([{'$match':{'name':_0x5bfcd8}},{'$unwind':_0xadc104(0x1dd)},{'$match':{'product_details.product_code':_0x409395}},{'$group':{'_id':_0xadc104(0x195),'name':{'$first':_0xadc104(0x176)},'primary_code':{'$first':_0xadc104(0x19f)},'secondary_code':{'$first':_0xadc104(0x1d5)},'product_code':{'$first':_0xadc104(0x264)},'instock':{'$first':_0xadc104(0x1f5)},'warehouse':{'$first':_0xadc104(0x181)},'level':{'$first':_0xadc104(0x22c)},'isle':{'$first':_0xadc104(0x1cd)},'pallet':{'$first':_0xadc104(0x167)},'maxProducts':{'$first':_0xadc104(0x21b)},'unit':{'$first':_0xadc104(0x199)}}}]);_0x28ab09['status'](0xc8)[_0xadc104(0x20e)](_0x550e10);}catch(_0x5db1a0){_0x28ab09[_0xadc104(0x19e)](0x194)['json']({'message':_0x5db1a0[_0xadc104(0x230)]});}}),router[a0_0x741aca(0x23f)](a0_0x741aca(0x20d),async(_0x4f75bf,_0x5f3597)=>{var _0x59d0d6=a0_0x741aca;const {level:_0x5d1be6,isle:_0x296481,pallet:_0x3065a5,warehouses:_0x26fad0,room:_0x2e397d}=_0x4f75bf['body'];try{const _0x195059=await warehouse[_0x59d0d6(0x161)]([{'$match':{'name':_0x26fad0,'room':_0x2e397d}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x5d1be6),'product_details.isle':_0x296481,'product_details.pallet':parseInt(_0x3065a5)}},{'$group':{'_id':_0x59d0d6(0x195),'name':{'$first':_0x59d0d6(0x176)},'product_stock':{'$first':_0x59d0d6(0x1f5)},'level':{'$first':_0x59d0d6(0x22c)},'isle':{'$first':_0x59d0d6(0x1cd)},'pallet':{'$first':_0x59d0d6(0x167)},'maxProducts':{'$first':_0x59d0d6(0x21b)}}}]);_0x5f3597[_0x59d0d6(0x19e)](0xc8)[_0x59d0d6(0x20e)](_0x195059);}catch(_0x4b9b97){_0x5f3597[_0x59d0d6(0x19e)](0x194)['json']({'message':_0x4b9b97[_0x59d0d6(0x230)]});}}),module[a0_0x741aca(0x17f)]=router;function a0_0x387b(){var _0x5d3432=['2000712XXNBQy','date','</span>','Chinese','redirect','getMonth','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<tbody\x20style=\x22text-align:\x20center;\x22>','maxperunit','here','Logo.png','$product.from_room_name','alertQTY','$product_details.product_name','/barcode_scanner2','RMSEmail','1901627DiuNnO','<div>','body','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<h5>','/transfer/view','exports','$room','$name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','split','from_bin','express','../models/all_models','edit_transfer_view','from_invoice','Email\x20sent\x20successfully','rak','all','map','German','id_transaction_id','to_bin','to_room_name','Shelves','transfer','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','padStart','$product_details._id','No\x20warehouse\x20data\x20found\x20for\x20room:\x20','push','secondary_code','$product_details.unit','success','<h5\x20style=\x22text-align:\x20left;\x22>','/barcode_scanner3','product_cat','status','$product_details.primary_code','English','toFixed','get','dotenv','..............from\x20deducted.....................','to_prod_pallet','$invoice','to_warehouse','production_date','to_floorlevel','product','</tbody>','filter','11786lqmrwq','/barcode_scanner','to_prod_isle','errors','DRY\x20STORAGE','logo','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','max_per_unit','\x20<>\x20','Rack\x20E','primary_unit','$product_details.secondary_unit','product_code3','<tr>','back','from_prod_level','role','<h2>\x20','Transfer\x20Edit\x20Successfully','not\x20meet\x20the\x20need\x20stock','</body></html>','flash','New_Qty_Converted','then','Portuguese','to_quantity','French','nodemailer','forEach','\x20</h2>','/transfer/preview/','from_room_name','$product_details.isle','<span\x20style=\x22float:\x20right;\x22>','from_rak','ObjectId','site_title','concat','endSession','unit','$product_details.secondary_code','English\x20(US)','Raw\x20Materials','random','prod_cat','1224xUVjqn','True','/view/:id','$product_details','<hr\x20class=\x22my-3\x22>','config','getFullYear','catch','$product_details.storage','finalize','..............connected.....................','$product_details.production_date','save','Arabic\x20(ae)','from_warehouse','$product_details.bin','from_prod_qty','createTransport','from_floorlevel','add_transfer','length','product_stock','COLD\x20STORAGE','Hindi','id_transaction','prod_name','../middleware/auth','$product_details.product_stock','290872sFmBhz','sendMail','Enabled','710676uyEWji','product_name','RoomAssigned','findOne','$product_details.type','port','Transfer\x20Mail','926535BzXQPP','../public/language/languages.json','delivery_date','$product','Transaction\x20aborted.','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','to_prod_level','$product_details.bay','expiry_date','log','note','Spanish','from_types','/CheckingWarehouse','json','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Error\x20Occurs','staff','/view/add_transfer','Rack\x20A','74qeEwNL','params','Product\x20Transfer\x20successfully','/preview/:id','Level','bay','maxProducts','$product_details.maxProducts','Arabic','from_prod_isle','secondary_unit','user','Rack\x20C','/upload/','Floor','startSession','Return\x20Rooms','session','$_id','batch_code','invoice','</h5>','to_prod_qty','from_quantity','$product_details.level','from_rack','Portuguese\x20(BR)','<html><head><title></title>','message','from_prod_pallet','to_invoice','email','rack','to_types','Transfer\x20Finalize\x20Successfully','floor','<strong>\x20Regards\x20</strong>','to_room','image','type','withTransaction','to_bay','mongoose','post','$product_details.batch_code','There\x27s\x20a\x20error\x20in\x20this\x20transaction','_id','from_room','..............to\x20deducted.....................','Router','$product_details.floorlevel','</div>','ToRoomAssigned','$date','$product_details.invoice','Rack\x20F','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','language','Ambient','warehouse','$product_details.maxPerUnit','\x20Order\x20Number\x20:\x20','product_code','70VKVqCH','$product_details.expiry_date','515BbrTmh','TRF-','MaxStocks_data2','primary_code','delivery_code','</td>','meet\x20the\x20need\x20stock','toString','floorlevel','bin','</head><body>','slice','$from_warehouse','findById','$product_details.rack','$product_details.product_code','product_details','from_bay','$to_warehouse','$isAllowEdit','render','storage','\x20Order\x20Date\x20:\x20','To_invoice','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Rack\x20B','aggregate','from_storage','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','</thead>','Receiving\x20Area','master','$product_details.pallet','find'];a0_0x387b=function(){return _0x5d3432;};return a0_0x387b();}