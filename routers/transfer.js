function a0_0x5331(_0x1dfdf0,_0x2ae5dc){var _0x2cd416=a0_0x2cd4();return a0_0x5331=function(_0x533168,_0x2e146a){_0x533168=_0x533168-0x142;var _0x48555a=_0x2cd416[_0x533168];return _0x48555a;},a0_0x5331(_0x1dfdf0,_0x2ae5dc);}var a0_0x432997=a0_0x5331;(function(_0x31d12c,_0x24a16a){var _0x50794b=a0_0x5331,_0x5020ca=_0x31d12c();while(!![]){try{var _0xf7ca2e=-parseInt(_0x50794b(0x147))/0x1*(-parseInt(_0x50794b(0x18d))/0x2)+parseInt(_0x50794b(0x1e1))/0x3*(parseInt(_0x50794b(0x21d))/0x4)+-parseInt(_0x50794b(0x219))/0x5+parseInt(_0x50794b(0x1f5))/0x6*(parseInt(_0x50794b(0x16b))/0x7)+parseInt(_0x50794b(0x164))/0x8+-parseInt(_0x50794b(0x1ee))/0x9+parseInt(_0x50794b(0x171))/0xa*(-parseInt(_0x50794b(0x175))/0xb);if(_0xf7ca2e===_0x24a16a)break;else _0x5020ca['push'](_0x5020ca['shift']());}catch(_0x1114c6){_0x5020ca['push'](_0x5020ca['shift']());}}}(a0_0x2cd4,0xd93d1));const express=require(a0_0x432997(0x20e)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x432997(0x232)),users=require('../public/language/languages.json'),nodemailer=require('nodemailer');router['get'](a0_0x432997(0x19c),auth,async(_0x275d2d,_0x5c132a)=>{var _0x206dd0=a0_0x432997;try{const {username:_0x1063d4,email:_0x335506,role:_0x33e24f}=_0x275d2d[_0x206dd0(0x214)],_0x115207=_0x275d2d[_0x206dd0(0x214)],_0x57ff91=await profile['findOne']({'email':_0x115207['email']}),_0x43b0e8=await master_shop[_0x206dd0(0x174)]();console[_0x206dd0(0x16c)](_0x206dd0(0x15d),_0x43b0e8);let _0x24de52;if(_0x115207[_0x206dd0(0x17f)]=='staff'){const _0x41a45f=await staff[_0x206dd0(0x157)]({'email':_0x115207[_0x206dd0(0x173)]});_0x24de52=await transfers['find']({'from_warehouse':_0x41a45f[_0x206dd0(0x1ff)]});}else _0x24de52=await transfers[_0x206dd0(0x1f0)]([{'$unwind':'$product'},{'$group':{'_id':_0x206dd0(0x215),'invoice':{'$first':_0x206dd0(0x1ef)},'date':{'$first':'$date'},'from_warehouse':{'$first':_0x206dd0(0x17e)},'to_warehouse':{'$first':_0x206dd0(0x1d2)},'from_room_name':{'$addToSet':_0x206dd0(0x177)},'to_room_name':{'$addToSet':_0x206dd0(0x1f9)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x206dd0(0x212)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x43b0e8[0x0]['language']=='English\x20(US)'){var _0x21685a=users[_0x206dd0(0x166)];console[_0x206dd0(0x16c)](_0x21685a);}else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x203))var _0x21685a=users['Hindi'];else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x189))var _0x21685a=users[_0x206dd0(0x189)];else{if(_0x43b0e8[0x0]['language']==_0x206dd0(0x1a1))var _0x21685a=users['Spanish'];else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x209))var _0x21685a=users[_0x206dd0(0x209)];else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x1e6))var _0x21685a=users['Portuguese'];else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x145))var _0x21685a=users[_0x206dd0(0x145)];else{if(_0x43b0e8[0x0][_0x206dd0(0x1ca)]==_0x206dd0(0x18a))var _0x21685a=users[_0x206dd0(0x18e)];}}}}}}}_0x5c132a['render'](_0x206dd0(0x149),{'success':_0x275d2d[_0x206dd0(0x190)]('success'),'errors':_0x275d2d[_0x206dd0(0x190)]('errors'),'role':_0x115207,'profile':_0x57ff91,'master_shop':_0x43b0e8,'transfer':_0x24de52,'language':_0x21685a});}catch(_0xbc7bcc){console[_0x206dd0(0x16c)](_0xbc7bcc);}});async function getRandom8DigitNumber(){var _0x496fc0=a0_0x432997;const _0x4be9db=0x989680,_0x376570=0x5f5e0ff,_0x100b02=Math['floor'](Math[_0x496fc0(0x1fc)]()*(_0x376570-_0x4be9db+0x1))+_0x4be9db;var _0x1350bf;const _0x59e4e0=await transfers[_0x496fc0(0x157)]({'invoice':_0x496fc0(0x1ad)+_0x100b02});return _0x59e4e0&&_0x59e4e0[_0x496fc0(0x152)]>0x0?_0x1350bf='TRF-'+_0x100b02:_0x1350bf=_0x496fc0(0x1ad)+_0x100b02,_0x1350bf;}router['get'](a0_0x432997(0x1c9),auth,async(_0x4f369f,_0x5d5bf4)=>{var _0x212e78=a0_0x432997;try{const {username:_0x43bc3f,email:_0x301d1b,role:_0x152e62}=_0x4f369f['user'],_0x1f73de=_0x4f369f['user'],_0x24ceaf=await profile[_0x212e78(0x157)]({'email':_0x1f73de[_0x212e78(0x173)]}),_0x5612d5=await master_shop['find']();console[_0x212e78(0x16c)](_0x212e78(0x15d),_0x5612d5);let _0x444189;if(_0x1f73de['role']=='staff'){const _0x158b2f=await staff[_0x212e78(0x157)]({'email':_0x1f73de[_0x212e78(0x173)]});_0x444189=await warehouse[_0x212e78(0x1f0)]([{'$match':{'status':_0x212e78(0x144),'name':_0x158b2f[_0x212e78(0x1ff)],'warehouse_category':_0x212e78(0x14d)}},{'$group':{'_id':_0x212e78(0x167),'name':{'$first':_0x212e78(0x167)}}}]);}else _0x444189=await warehouse[_0x212e78(0x1f0)]([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x212e78(0x167),'name':{'$first':_0x212e78(0x167)}}}]);var _0x5d6bab=[_0x212e78(0x172),_0x212e78(0x1f6),_0x212e78(0x1c2)];const _0x433c68=await transfers['find']({}),_0x570b3e=_0x433c68['length']+0x1,_0x30ee31=_0x212e78(0x1ad)+_0x570b3e['toString']()[_0x212e78(0x1e0)](0x5,'0');if(_0x5612d5[0x0][_0x212e78(0x1ca)]==_0x212e78(0x1d9)){var _0x129492=users[_0x212e78(0x166)];console[_0x212e78(0x16c)](_0x129492);}else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]==_0x212e78(0x203))var _0x129492=users[_0x212e78(0x203)];else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]==_0x212e78(0x189))var _0x129492=users[_0x212e78(0x189)];else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]=='Spanish')var _0x129492=users[_0x212e78(0x1a1)];else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]=='French')var _0x129492=users[_0x212e78(0x209)];else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]=='Portuguese\x20(BR)')var _0x129492=users[_0x212e78(0x200)];else{if(_0x5612d5[0x0][_0x212e78(0x1ca)]==_0x212e78(0x145))var _0x129492=users[_0x212e78(0x145)];else{if(_0x5612d5[0x0]['language']==_0x212e78(0x18a))var _0x129492=users[_0x212e78(0x18e)];}}}}}}}const _0x50c2b3=getRandom8DigitNumber();_0x50c2b3['then'](_0x19a699=>{var _0x4f77ea=_0x212e78;_0x5d5bf4[_0x4f77ea(0x1e9)](_0x4f77ea(0x1f3),{'success':_0x4f369f[_0x4f77ea(0x190)](_0x4f77ea(0x1de)),'errors':_0x4f369f['flash'](_0x4f77ea(0x205)),'role':_0x1f73de,'profile':_0x24ceaf,'master_shop':_0x5612d5,'warehouse':_0x444189,'language':_0x129492,'rooms_data':_0x5d6bab,'invoice':_0x19a699});})['catch'](_0xc9fddb=>{var _0x150ae6=_0x212e78;_0x4f369f[_0x150ae6(0x190)](_0x150ae6(0x205),_0x150ae6(0x1c1)),_0x5d5bf4['redirect']('/transfer/view');});}catch(_0x2fa7c6){console['log'](_0x2fa7c6);}}),router[a0_0x432997(0x1dd)](a0_0x432997(0x1c9),auth,async(_0x533011,_0x35a423)=>{var _0x34b34a=a0_0x432997;try{console['log'](_0x533011[_0x34b34a(0x178)]);const {date:_0x12a81a,from_warehouse:_0x22ea57,FromRoom_name:_0x1f9c59,to_warehouse:_0x4dcfca,ToRoom_name:_0x5e9779,prod_name:_0x113d50,from_prod_qty:_0x5165d1,from_prod_level:_0x5bf404,from_prod_isle:_0x32ce84,from_prod_pallet:_0x16b14b,to_prod_qty:_0x29f435,to_prod_level:_0x2f3100,to_prod_isle:_0x5093a4,to_prod_pallet:_0x1d35bc,primary_code:_0x12c36a,secondary_code:_0x58683f,product_code3:_0x57994f,note:_0x4c028d,MaxStocks_data2:_0x3a817d,invoice:_0x21d7e6,expiry_date:_0xc3f628}=_0x533011[_0x34b34a(0x178)];if(typeof _0x113d50=='string')var _0x59ee94=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x236)]],_0x55e53b=[_0x533011[_0x34b34a(0x178)]['from_prod_qty']],_0x25b459=[_0x533011['body'][_0x34b34a(0x229)]],_0x300ebf=[_0x533011['body'][_0x34b34a(0x176)]],_0x538cb3=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1c5)]],_0x2f615a=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1a4)]],_0x260919=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x18b)]],_0x1a17b0=[_0x533011['body'][_0x34b34a(0x1d0)]],_0x1b36d6=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1c0)]],_0x16dfc3=[_0x533011[_0x34b34a(0x178)]['primary_unit']],_0x32a048=[_0x533011['body'][_0x34b34a(0x207)]],_0x53e23f=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x15e)]],_0x5962b1=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1bf)]],_0x137aaa=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1d3)]],_0x361127=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1fb)]],_0x5dc192=[_0x533011[_0x34b34a(0x178)]['prod_cat']],_0x17e70b=[_0x533011[_0x34b34a(0x178)]['RoomAssigned']],_0x50fc1f=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x148)]],_0x2f1ee3=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x239)]],_0x30ea4e=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1ac)]],_0xfbd463=[_0x533011[_0x34b34a(0x178)][_0x34b34a(0x1c3)]];else var _0x59ee94=[..._0x533011['body'][_0x34b34a(0x236)]],_0x55e53b=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x223)]],_0x25b459=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x229)]],_0x300ebf=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x176)]],_0x538cb3=[..._0x533011['body']['to_prod_level']],_0x2f615a=[..._0x533011[_0x34b34a(0x178)]['primary_code']],_0x260919=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x18b)]],_0x1a17b0=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1d0)]],_0x1b36d6=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1c0)]],_0x16dfc3=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x224)]],_0x32a048=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x207)]],_0x53e23f=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x15e)]],_0x5962b1=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1bf)]],_0x137aaa=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1d3)]],_0x361127=[..._0x533011['body']['production_date']],_0x5dc192=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1eb)]],_0x17e70b=[..._0x533011['body'][_0x34b34a(0x20f)]],_0x50fc1f=[..._0x533011['body'][_0x34b34a(0x148)]],_0x2f1ee3=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x239)]],_0x30ea4e=[..._0x533011[_0x34b34a(0x178)][_0x34b34a(0x1ac)]],_0xfbd463=[..._0x533011['body']['id_transaction']];const _0x52b8f0=_0x59ee94[_0x34b34a(0x1ab)](_0x2fdce5=>{return _0x2fdce5={'product_name':_0x2fdce5};});_0x55e53b['forEach']((_0x285174,_0x772f18)=>{var _0x568ac3=_0x34b34a;_0x52b8f0[_0x772f18][_0x568ac3(0x21f)]=_0x285174;}),_0x2f1ee3[_0x34b34a(0x153)]((_0x3e67ae,_0x1a8e65)=>{var _0x5a0e98=_0x34b34a;_0x52b8f0[_0x1a8e65][_0x5a0e98(0x239)]=_0x3e67ae;}),_0x30ea4e[_0x34b34a(0x153)]((_0x18ee5e,_0xd8c507)=>{var _0x328e2a=_0x34b34a;_0x52b8f0[_0xd8c507][_0x328e2a(0x206)]=_0x18ee5e;}),_0xfbd463[_0x34b34a(0x153)]((_0x41b1a5,_0x5af3f3)=>{var _0x467292=_0x34b34a;_0x52b8f0[_0x5af3f3][_0x467292(0x1cd)]=_0x41b1a5;}),_0x25b459['forEach']((_0x16b588,_0x45fd10)=>{var _0x9b72ac=_0x34b34a;_0x17e70b[_0x9b72ac(0x153)]((_0x5572df,_0x4b596b)=>{var _0x440606=_0x9b72ac;if(_0x5572df==_0x440606(0x14b)&&_0x45fd10==_0x4b596b){var _0x5bdef5=_0x16b588[_0x440606(0x1b1)](0x3);_0x52b8f0[_0x45fd10]['from_storage']=_0x16b588[0x0],_0x52b8f0[_0x45fd10][_0x440606(0x182)]=_0x16b588[0x1],_0x52b8f0[_0x45fd10][_0x440606(0x1bc)]=0x0,_0x52b8f0[_0x45fd10][_0x440606(0x146)]=0x0,_0x52b8f0[_0x45fd10]['from_types']=_0x440606(0x1b3),_0x52b8f0[_0x45fd10][_0x440606(0x1e3)]=_0x5bdef5;}else{if(_0x5572df==_0x440606(0x187)&&_0x45fd10==_0x4b596b){var _0x5bdef5=_0x16b588['slice'](0x3);_0x52b8f0[_0x45fd10]['from_storage']=_0x16b588[0x0],_0x52b8f0[_0x45fd10][_0x440606(0x182)]=_0x16b588[0x1],_0x52b8f0[_0x45fd10][_0x440606(0x1bc)]=0x0,_0x52b8f0[_0x45fd10][_0x440606(0x146)]=0x0,_0x52b8f0[_0x45fd10]['from_types']='Floor',_0x52b8f0[_0x45fd10]['from_floorlevel']=_0x16b588[0x5];}else{if(_0x45fd10==_0x4b596b){if(_0x16b588[0x0]=='A'&&_0x16b588[0x1]=='L'&&_0x16b588[0x2]=='L')console[_0x440606(0x16c)](_0x5572df+_0x440606(0x1ae)+_0x45fd10+_0x440606(0x1ae)+_0x4b596b+_0x440606(0x1ae)+_0x16b588+'here'),_0x52b8f0[_0x45fd10][_0x440606(0x1b6)]=_0x16b588[0x0],_0x52b8f0[_0x45fd10][_0x440606(0x182)]=_0x16b588[0x1],_0x52b8f0[_0x45fd10]['from_bay']=0x0,_0x52b8f0[_0x45fd10][_0x440606(0x146)]=0x0,_0x52b8f0[_0x45fd10][_0x440606(0x161)]='Floor',_0x52b8f0[_0x45fd10]['from_floorlevel']=_0x16b588[0x3];else{var _0x23578e;if(_0x16b588[0x4]=='L')_0x23578e=_0x440606(0x1a0);else _0x16b588[0x4]=='F'&&(_0x23578e=_0x440606(0x1b3));_0x52b8f0[_0x45fd10][_0x440606(0x1b6)]=_0x16b588[0x0],_0x52b8f0[_0x45fd10][_0x440606(0x182)]=_0x16b588[0x1],_0x52b8f0[_0x45fd10][_0x440606(0x1bc)]=_0x16b588[0x2],_0x52b8f0[_0x45fd10][_0x440606(0x146)]=_0x16b588[0x3],_0x52b8f0[_0x45fd10][_0x440606(0x161)]=_0x23578e,_0x52b8f0[_0x45fd10]['from_floorlevel']=_0x16b588[0x5];}}}}});}),_0x300ebf[_0x34b34a(0x153)]((_0x46bf32,_0xd73fff)=>{var _0x21484f=_0x34b34a;_0x52b8f0[_0xd73fff][_0x21484f(0x1ed)]=_0x46bf32;}),_0x538cb3[_0x34b34a(0x153)]((_0x372f68,_0x2c83f4)=>{var _0x21f51d=_0x34b34a;_0x50fc1f[_0x21f51d(0x153)]((_0x496e8d,_0x3c1d2a)=>{var _0x285c61=_0x21f51d;if(_0x496e8d==_0x285c61(0x14b)&&_0x2c83f4==_0x3c1d2a){var _0xf0f52e=_0x372f68[_0x285c61(0x1b1)](0x3);_0x52b8f0[_0x2c83f4][_0x285c61(0x235)]=_0x372f68[0x0],_0x52b8f0[_0x2c83f4][_0x285c61(0x201)]=_0x372f68[0x1],_0x52b8f0[_0x2c83f4][_0x285c61(0x16a)]=0x0,_0x52b8f0[_0x2c83f4]['to_bin']=0x0,_0x52b8f0[_0x2c83f4][_0x285c61(0x15f)]=_0x285c61(0x1b3),_0x52b8f0[_0x2c83f4][_0x285c61(0x1d5)]=_0xf0f52e;}else{if(_0x496e8d=='Shelves'&&_0x2c83f4==_0x3c1d2a){var _0xf0f52e=_0x372f68[_0x285c61(0x1b1)](0x3);_0x52b8f0[_0x2c83f4]['storage']=_0x372f68[0x0],_0x52b8f0[_0x2c83f4][_0x285c61(0x201)]=_0x372f68[0x1],_0x52b8f0[_0x2c83f4]['to_bay']=0x0,_0x52b8f0[_0x2c83f4][_0x285c61(0x1d7)]=0x0,_0x52b8f0[_0x2c83f4][_0x285c61(0x15f)]=_0x285c61(0x1b3),_0x52b8f0[_0x2c83f4][_0x285c61(0x1d5)]=_0x372f68[0x5];}else{if(_0x2c83f4==_0x3c1d2a){if(_0x372f68[0x0]=='A'&&_0x372f68[0x1]=='L'&&_0x372f68[0x2]=='L')console['log'](_0x496e8d+'\x20<>\x20'+_0x2c83f4+_0x285c61(0x1ae)+_0x3c1d2a+'\x20<>\x20'+_0x372f68+_0x285c61(0x1ce)),_0x52b8f0[_0x2c83f4][_0x285c61(0x235)]=_0x372f68[0x0],_0x52b8f0[_0x2c83f4][_0x285c61(0x201)]=_0x372f68[0x1],_0x52b8f0[_0x2c83f4][_0x285c61(0x16a)]=0x0,_0x52b8f0[_0x2c83f4]['to_bin']=0x0,_0x52b8f0[_0x2c83f4][_0x285c61(0x15f)]=_0x285c61(0x1b3),_0x52b8f0[_0x2c83f4][_0x285c61(0x1d5)]=_0x372f68[0x3];else{var _0x21d01d;if(_0x372f68[0x4]=='L')_0x21d01d=_0x285c61(0x1a0);else _0x372f68[0x4]=='F'&&(_0x21d01d=_0x285c61(0x1b3));_0x52b8f0[_0x2c83f4][_0x285c61(0x235)]=_0x372f68[0x0],_0x52b8f0[_0x2c83f4][_0x285c61(0x201)]=_0x372f68[0x1],_0x52b8f0[_0x2c83f4][_0x285c61(0x16a)]=_0x372f68[0x2],_0x52b8f0[_0x2c83f4][_0x285c61(0x1d7)]=_0x372f68[0x3],_0x52b8f0[_0x2c83f4][_0x285c61(0x15f)]=_0x21d01d,_0x52b8f0[_0x2c83f4][_0x285c61(0x1d5)]=_0x372f68[0x5];}}}}});}),_0x2f615a[_0x34b34a(0x153)]((_0x381b1c,_0x53dbe8)=>{var _0x340745=_0x34b34a;_0x52b8f0[_0x53dbe8][_0x340745(0x1a4)]=_0x381b1c;}),_0x260919['forEach']((_0x56aa11,_0x2e54a1)=>{var _0xc43981=_0x34b34a;_0x52b8f0[_0x2e54a1][_0xc43981(0x18b)]=_0x56aa11;}),_0x1a17b0[_0x34b34a(0x153)]((_0x4cd727,_0x38d8ca)=>{_0x52b8f0[_0x38d8ca]['product_code']=_0x4cd727;}),_0x1b36d6['forEach']((_0x49e2c4,_0x1b224d)=>{var _0x24d3c7=_0x34b34a;_0x52b8f0[_0x1b224d][_0x24d3c7(0x179)]=_0x49e2c4;}),_0x16dfc3[_0x34b34a(0x153)]((_0x38cb5a,_0x43ce21)=>{var _0xc9dbd0=_0x34b34a;_0x52b8f0[_0x43ce21][_0xc9dbd0(0x1e2)]=_0x38cb5a;}),_0x32a048[_0x34b34a(0x153)]((_0x3b2269,_0x18c9c1)=>{var _0x3209af=_0x34b34a;_0x52b8f0[_0x18c9c1][_0x3209af(0x207)]=_0x3b2269;}),_0x53e23f[_0x34b34a(0x153)]((_0x271593,_0x17c2ef)=>{var _0x75218e=_0x34b34a;_0x52b8f0[_0x17c2ef][_0x75218e(0x15e)]=_0x271593;}),_0x5962b1[_0x34b34a(0x153)]((_0x24cd19,_0x450d06)=>{var _0x1a66cb=_0x34b34a;_0x52b8f0[_0x450d06][_0x1a66cb(0x1bf)]=_0x24cd19;}),_0x137aaa[_0x34b34a(0x153)]((_0x8f7394,_0x3eda70)=>{var _0x1bfe26=_0x34b34a;_0x52b8f0[_0x3eda70][_0x1bfe26(0x194)]=_0x8f7394;}),_0x361127['forEach']((_0x4afd87,_0x191d78)=>{var _0x567a81=_0x34b34a;_0x52b8f0[_0x191d78][_0x567a81(0x1fb)]=_0x4afd87;}),_0x5dc192[_0x34b34a(0x153)]((_0x3c2788,_0x371e07)=>{var _0x15b2df=_0x34b34a;_0x52b8f0[_0x371e07][_0x15b2df(0x1eb)]=_0x3c2788;}),_0x17e70b['forEach']((_0x28a6c3,_0x196576)=>{var _0xb7b6bb=_0x34b34a;_0x52b8f0[_0x196576][_0xb7b6bb(0x218)]=_0x28a6c3;}),_0x50fc1f[_0x34b34a(0x153)]((_0x61cbf8,_0x1aa1a3)=>{var _0x1e6c67=_0x34b34a;_0x52b8f0[_0x1aa1a3][_0x1e6c67(0x22b)]=_0x61cbf8;});const _0x37eeef=_0x52b8f0[_0x34b34a(0x163)](_0xfb99f7=>_0xfb99f7['to_quantity']!=='0'&&_0xfb99f7[_0x34b34a(0x1ed)]!==''||_0xfb99f7[_0x34b34a(0x1d5)]!=='0'&&_0xfb99f7[_0x34b34a(0x1d5)]!==''),_0x13b3d8=new transfers({'date':_0x12a81a,'from_warehouse':_0x22ea57,'to_warehouse':_0x4dcfca,'product':_0x37eeef,'note':_0x4c028d,'invoice':_0x21d7e6}),_0x550203=await _0x13b3d8[_0x34b34a(0x16d)]();_0x533011['flash'](_0x34b34a(0x1de),_0x34b34a(0x1cc)),_0x35a423['redirect']('/transfer/preview/'+_0x550203[_0x34b34a(0x1b0)]);}catch(_0x58b82f){console['log'](_0x58b82f),_0x35a423[_0x34b34a(0x199)](0xc8)[_0x34b34a(0x1b8)]({'errorMessage':_0x58b82f[_0x34b34a(0x1f2)]});}}),router[a0_0x432997(0x1be)](a0_0x432997(0x221),auth,async(_0x5f2fcc,_0x2618ed)=>{var _0x4cf3d6=a0_0x432997;try{const {username:_0x2b566b,email:_0x3ae7db,role:_0x4f612a}=_0x5f2fcc['user'],_0x5daa68=_0x5f2fcc['user'],_0xd74643=await profile[_0x4cf3d6(0x157)]({'email':_0x5daa68['email']}),_0x34e744=await master_shop[_0x4cf3d6(0x174)]();console[_0x4cf3d6(0x16c)]('master',_0x34e744);const _0x420328=await transfers[_0x4cf3d6(0x15b)](_0x5f2fcc[_0x4cf3d6(0x20c)]['id']);let _0x409df1=new Date(_0x420328[_0x4cf3d6(0x1bf)]),_0x427021=('0'+_0x409df1[_0x4cf3d6(0x228)]())[_0x4cf3d6(0x1b1)](-0x2),_0x3e8619=('0'+(_0x409df1[_0x4cf3d6(0x184)]()+0x1))[_0x4cf3d6(0x1b1)](-0x2),_0x3b9179=_0x409df1['getFullYear'](),_0x48e307=_0x3b9179+'-'+_0x3e8619+'-'+_0x427021,_0x1fb51b;if(_0x5daa68[_0x4cf3d6(0x17f)]==_0x4cf3d6(0x1dc)){const _0x1e2649=await staff[_0x4cf3d6(0x157)]({'email':_0x5daa68[_0x4cf3d6(0x173)]});_0x1fb51b=await warehouse[_0x4cf3d6(0x174)]({'status':'Enabled','name':_0x1e2649[_0x4cf3d6(0x1ff)],'warehouse_category':'Raw\x20Materials'});}else _0x1fb51b=await warehouse['find']({'status':_0x4cf3d6(0x144),'warehouse_category':_0x4cf3d6(0x14d)});const _0x5dffbe=await warehouse[_0x4cf3d6(0x1f0)]([{'$match':{'name':_0x420328[_0x4cf3d6(0x154)]}},{'$unwind':_0x4cf3d6(0x1b4)},{'$group':{'_id':_0x4cf3d6(0x1f4),'name':{'$first':_0x4cf3d6(0x1c7)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x4cf3d6(0x195)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x4cf3d6(0x204)},'primary_code':{'$first':_0x4cf3d6(0x165)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4cf3d6(0x169)},'storage':{'$first':_0x4cf3d6(0x15a)},'rack':{'$first':_0x4cf3d6(0x1fe)},'expiry_date':{'$first':_0x4cf3d6(0x20b)},'production_date':{'$first':_0x4cf3d6(0x220)},'room':{'$first':'$room'}}}]);if(_0x34e744[0x0]['language']==_0x4cf3d6(0x1d9)){var _0x22d3aa=users[_0x4cf3d6(0x166)];console[_0x4cf3d6(0x16c)](_0x22d3aa);}else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]=='Hindi')var _0x22d3aa=users['Hindi'];else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]=='German')var _0x22d3aa=users[_0x4cf3d6(0x189)];else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]==_0x4cf3d6(0x1a1))var _0x22d3aa=users['Spanish'];else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]==_0x4cf3d6(0x209))var _0x22d3aa=users['French'];else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]==_0x4cf3d6(0x1e6))var _0x22d3aa=users[_0x4cf3d6(0x200)];else{if(_0x34e744[0x0][_0x4cf3d6(0x1ca)]==_0x4cf3d6(0x145))var _0x22d3aa=users[_0x4cf3d6(0x145)];else{if(_0x34e744[0x0]['language']=='Arabic\x20(ae)')var _0x22d3aa=users[_0x4cf3d6(0x18e)];}}}}}}}_0x2618ed['render'](_0x4cf3d6(0x238),{'success':_0x5f2fcc[_0x4cf3d6(0x190)](_0x4cf3d6(0x1de)),'errors':_0x5f2fcc[_0x4cf3d6(0x190)](_0x4cf3d6(0x205)),'role':_0x5daa68,'profile':_0xd74643,'master_shop':_0x34e744,'warehouse':_0x1fb51b,'transfer':_0x420328,'stock':_0x5dffbe,'language':_0x22d3aa});}catch(_0x235f8c){console[_0x4cf3d6(0x16c)](_0x235f8c);}}),router[a0_0x432997(0x1dd)]('/preview/:id',auth,async(_0x33154b,_0x23c7e7)=>{var _0x2a16a6=a0_0x432997;try{const _0x497ece=_0x33154b['params']['id'],{from_warehouse:_0xa1a0e3,FromRoom_name:_0x3d86ae,to_warehouse:_0x52176f,ToRoom_name:_0x2cf35b}=_0x33154b[_0x2a16a6(0x178)],_0x9e71d6=await transfers[_0x2a16a6(0x15b)]({'_id':_0x497ece}),_0x4e2c2a=_0x9e71d6[_0x2a16a6(0x233)]['map'](async _0x1d287f=>{var _0x29bc98=_0x2a16a6;if(_0x1d287f[_0x29bc98(0x1ed)]>0x0){var _0x40d17c=await warehouse[_0x29bc98(0x157)]({'name':_0x9e71d6[_0x29bc98(0x154)],'room':_0x1d287f[_0x29bc98(0x218)],'warehouse_category':_0x29bc98(0x14d)});const _0x2e2201=_0x40d17c[_0x29bc98(0x1bd)][_0x29bc98(0x1ab)](_0x385a08=>{var _0x1308ec=_0x29bc98;_0x385a08[_0x1308ec(0x159)]==_0x1d287f['product_name']&&_0x385a08[_0x1308ec(0x20d)]==_0x1d287f[_0x1308ec(0x1e3)]&&_0x385a08['type']==_0x1d287f[_0x1308ec(0x161)]&&_0x385a08['bin']==_0x1d287f['from_bin']&&_0x385a08['bay']==_0x1d287f[_0x1308ec(0x1bc)]&&_0x385a08[_0x1308ec(0x201)]==_0x1d287f['from_rack']&&_0x385a08['storage']==_0x1d287f['from_storage']&&_0x385a08[_0x1308ec(0x1bf)]==_0x1d287f[_0x1308ec(0x1bf)]&&_0x385a08[_0x1308ec(0x15e)]==_0x1d287f[_0x1308ec(0x15e)]&&_0x385a08['production_date']==_0x1d287f[_0x1308ec(0x1fb)]&&_0x385a08[_0x1308ec(0x1d1)]==_0x1d287f['from_invoice']&&_0x385a08[_0x1308ec(0x1b0)]==_0x1d287f[_0x1308ec(0x1cd)]&&(_0x385a08['product_stock']=_0x385a08[_0x1308ec(0x20a)]-_0x1d287f[_0x1308ec(0x1ed)]);});}return _0x40d17c;});Promise['all'](_0x4e2c2a)[_0x2a16a6(0x17b)](async _0x2b764d=>{var _0x45622b=_0x2a16a6;try{for(const _0x23d3c9 of _0x2b764d){await _0x23d3c9[_0x45622b(0x16d)]();}try{const _0x4bf15d=_0x9e71d6[_0x45622b(0x233)]['map'](async _0x29a8cc=>{var _0x4fc7ad=_0x45622b;if(_0x29a8cc[_0x4fc7ad(0x1ed)]>0x0){var _0x3d57ff=await warehouse[_0x4fc7ad(0x157)]({'name':_0x9e71d6[_0x4fc7ad(0x216)],'room':_0x29a8cc['to_room_name'],'warehouse_category':'Raw\x20Materials'}),_0x3b9ea7=0x0;const _0x2e54e0=_0x3d57ff['product_details'][_0x4fc7ad(0x1ab)](_0xb7f7fc=>{var _0x35cca7=_0x4fc7ad;_0xb7f7fc[_0x35cca7(0x159)]==_0x29a8cc[_0x35cca7(0x159)]&&_0xb7f7fc[_0x35cca7(0x20d)]==_0x29a8cc[_0x35cca7(0x1d5)]&&_0xb7f7fc[_0x35cca7(0x19a)]==_0x29a8cc[_0x35cca7(0x15f)]&&_0xb7f7fc[_0x35cca7(0x226)]==_0x29a8cc[_0x35cca7(0x1d7)]&&_0xb7f7fc[_0x35cca7(0x19e)]==_0x29a8cc[_0x35cca7(0x16a)]&&_0xb7f7fc['rack']==_0x29a8cc[_0x35cca7(0x201)]&&_0xb7f7fc[_0x35cca7(0x235)]==_0x29a8cc['storage']&&_0xb7f7fc[_0x35cca7(0x1bf)]==_0x29a8cc[_0x35cca7(0x1bf)]&&_0xb7f7fc[_0x35cca7(0x15e)]==_0x29a8cc[_0x35cca7(0x15e)]&&_0xb7f7fc[_0x35cca7(0x1fb)]==_0x29a8cc['production_date']&&_0xb7f7fc[_0x35cca7(0x1d1)]==_0x29a8cc[_0x35cca7(0x206)]&&(_0xb7f7fc[_0x35cca7(0x20a)]=_0xb7f7fc[_0x35cca7(0x20a)]+_0x29a8cc[_0x35cca7(0x1ed)],_0x3b9ea7++);});_0x3b9ea7=='0'&&(_0x3d57ff[_0x4fc7ad(0x1bd)]=_0x3d57ff[_0x4fc7ad(0x1bd)][_0x4fc7ad(0x14c)]({'product_name':_0x29a8cc[_0x4fc7ad(0x159)],'product_stock':_0x29a8cc[_0x4fc7ad(0x1ed)],'bay':_0x29a8cc[_0x4fc7ad(0x16a)],'bin':_0x29a8cc[_0x4fc7ad(0x1d7)],'type':_0x29a8cc[_0x4fc7ad(0x15f)],'floorlevel':_0x29a8cc['to_floorlevel'],'storage':_0x29a8cc[_0x4fc7ad(0x235)],'rack':_0x29a8cc[_0x4fc7ad(0x201)],'product_code':_0x29a8cc[_0x4fc7ad(0x191)],'primary_code':_0x29a8cc[_0x4fc7ad(0x1a4)],'secondary_code':_0x29a8cc['secondary_code'],'maxProducts':_0x29a8cc['maxProducts'],'storage':_0x29a8cc['storage'],'rack':_0x29a8cc[_0x4fc7ad(0x201)],'expiry_date':_0x29a8cc[_0x4fc7ad(0x1bf)],'maxPerUnit':_0x29a8cc['maxperunit'],'batch_code':_0x29a8cc[_0x4fc7ad(0x15e)],'production_date':_0x29a8cc['production_date']}));}return _0x3d57ff;});Promise['all'](_0x4bf15d)[_0x45622b(0x17b)](async _0x4e578d=>{var _0x24f25=_0x45622b;try{for(const _0x1b52d1 of _0x4e578d){await warehouse[_0x24f25(0x151)]({'_id':_0x1b52d1[_0x24f25(0x1b0)]},{'$addToSet':{'product_details':{'$each':_0x1b52d1['product_details']}}});}_0x9e71d6[_0x24f25(0x234)]=_0x24f25(0x1a8);const _0x4f2d61=await _0x9e71d6[_0x24f25(0x16d)](),_0x509c96=await master_shop[_0x24f25(0x174)](),_0x527f34=await email_settings[_0x24f25(0x157)](),_0x572604=await supervisor_settings[_0x24f25(0x174)]();var _0x1e3ba8=_0x9e71d6[_0x24f25(0x233)],_0x4efc37='',_0x5d0a12;for(_0x5d0a12 in _0x1e3ba8){_0x4efc37+='<tr>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1e3ba8[_0x5d0a12][_0x24f25(0x159)]+_0x24f25(0x196)+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12]['product_code']+_0x24f25(0x196)+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12]['to_quantity']+_0x24f25(0x196)+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12][_0x24f25(0x1e2)]+'</td>'+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12]['secondary_unit']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x9e71d6['to_warehouse']+_0x24f25(0x196)+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12][_0x24f25(0x22b)]+'</td>'+_0x24f25(0x1a2)+_0x1e3ba8[_0x5d0a12][_0x24f25(0x235)]+_0x1e3ba8[_0x5d0a12][_0x24f25(0x201)]+_0x1e3ba8[_0x5d0a12][_0x24f25(0x16a)]+_0x1e3ba8[_0x5d0a12][_0x24f25(0x1d7)]+_0x1e3ba8[_0x5d0a12][_0x24f25(0x15f)][0x0]+_0x1e3ba8[_0x5d0a12][_0x24f25(0x1d5)]+_0x24f25(0x196),_0x24f25(0x210);}let _0x43f9d9=nodemailer[_0x24f25(0x211)]({'host':_0x527f34[_0x24f25(0x21b)],'port':Number(_0x527f34['port']),'secure':![],'auth':{'user':_0x527f34['email'],'pass':_0x527f34['password']}}),_0x16a664={'from':_0x527f34[_0x24f25(0x173)],'to':_0x572604[0x0][_0x24f25(0x230)],'subject':_0x24f25(0x22e),'attachments':[{'filename':_0x24f25(0x1fd),'path':__dirname+'/../public'+_0x24f25(0x162)+_0x509c96[0x0]['image'],'cid':_0x24f25(0x22f)}],'html':'<!DOCTYPE\x20html>'+_0x24f25(0x14a)+_0x24f25(0x1df)+_0x24f25(0x1c8)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x24f25(0x1c8)+_0x24f25(0x193)+_0x24f25(0x188)+'<div>'+'<h2>\x20'+_0x509c96[0x0][_0x24f25(0x225)]+'\x20</h2>'+_0x24f25(0x188)+_0x24f25(0x188)+_0x24f25(0x14f)+'<div>'+_0x24f25(0x1bb)+_0x24f25(0x1ec)+_0x9e71d6[_0x24f25(0x1d1)]+'\x20'+_0x24f25(0x17a)+_0x24f25(0x222)+_0x9e71d6['date']+'\x20'+_0x24f25(0x19b)+'</h5>'+_0x24f25(0x188)+_0x24f25(0x1cf)+_0x24f25(0x1a5)+_0x24f25(0x1a7)+_0x24f25(0x158)+_0x24f25(0x1e7)+_0x24f25(0x1fa)+_0x24f25(0x155)+_0x24f25(0x186)+_0x24f25(0x16e)+_0x24f25(0x185)+_0x24f25(0x17d)+_0x24f25(0x210)+_0x24f25(0x142)+_0x24f25(0x1b2)+'\x20'+_0x4efc37+'\x20'+_0x24f25(0x156)+_0x24f25(0x16f)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x24f25(0x168)+_0x509c96[0x0][_0x24f25(0x225)]+'</h5>'+_0x24f25(0x188)+_0x24f25(0x188)+_0x24f25(0x202)};_0x43f9d9[_0x24f25(0x15c)](_0x16a664,function(_0x143947,_0x30a3a1){var _0x4b370e=_0x24f25;_0x143947?(console['log'](_0x143947),console['log'](_0x4b370e(0x143))):console['log'](_0x4b370e(0x18c));}),_0x33154b['flash'](_0x24f25(0x1de),_0x24f25(0x22d)),_0x23c7e7[_0x24f25(0x1ba)](_0x24f25(0x237)+_0x4f2d61[_0x24f25(0x1b0)]);}catch(_0xadd8d3){console[_0x24f25(0x21a)](_0xadd8d3),_0x23c7e7[_0x24f25(0x199)](0x1f4)['json']({'Perror':_0x24f25(0x1b9),'message':_0xadd8d3['message']});}})['catch'](_0x1758de=>{var _0x36ea19=_0x45622b;console[_0x36ea19(0x21a)](_0x1758de),_0x23c7e7[_0x36ea19(0x199)](0x1f4)[_0x36ea19(0x1b8)]({'Perror':_0x36ea19(0x1af)});});}catch(_0x460e8e){_0x23c7e7['json'](_0x460e8e);}}catch(_0x2aaa93){console[_0x45622b(0x21a)](_0x2aaa93),_0x23c7e7[_0x45622b(0x199)](0x1f4)['json']({'Merror':_0x45622b(0x1b9),'Message':_0x2aaa93['message']});}})[_0x2a16a6(0x150)](_0x357864=>{var _0x70bf8b=_0x2a16a6;console[_0x70bf8b(0x21a)](_0x357864),_0x23c7e7[_0x70bf8b(0x199)](0x1f4)[_0x70bf8b(0x1b8)]({'Merror':_0x70bf8b(0x1af)});});}catch(_0x4f7d21){console['log'](_0x4f7d21);}});function a0_0x2cd4(){var _0x1d86a5=['/view/add_transfer','language','/barcode_scanner2','Product\x20Transfer\x20successfully','id_transaction_id','here','<table\x20style=\x22width:\x20100%\x20!important;\x22>','product_code3','invoice','$to_warehouse','max_per_unit','$product_details.maxProducts','to_floorlevel','to_room','to_bin','$product_details.unit','English\x20(US)','from_rak','$product_details.type','staff','post','success','</head><body>','padStart','3lbsmiR','unit','from_floorlevel','/transfer/view','$room','Portuguese\x20(BR)','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','to_prod_pallet','render','/barcode_scanner3','prod_cat','\x20Order\x20Number\x20:\x20','to_quantity','7382727EqVeYg','$invoice','aggregate','Transfer\x20Edit\x20Successfully','message','add_transfer','$product_details._id','1800YYYaeC','Enclosed','edit_transfer','$product_details.batch_code','$product.to_room_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','production_date','random','Logo.png','$product_details.rack','warehouse','Portuguese','rack','</body></html>','Hindi','$product_details.floorlevel','errors','To_invoice','secondary_unit','rak','French','product_stock','$product_details.expiry_date','params','floorlevel','express','RoomAssigned','</tr>','createTransport','$isAllowEdit','Rack\x20A','user','$_id','to_warehouse','$product_details.isle','from_room_name','6394805iDMnVJ','error','host','Rack\x20B','6616776nVHyTz','string','from_quantity','$product_details.production_date','/preview/:id','\x20Order\x20Date\x20:\x20','from_prod_qty','primary_unit','site_title','bin','$product_details.secondary_unit','getDate','from_prod_level','from_room','to_room_name','DRY\x20STORAGE','Transfer\x20Finalize\x20Successfully','Transfer\x20Mail','logo','RMSEmail','Rack\x20C','../middleware/auth','product','finalize','storage','prod_name','/picking_list/PDF_transfer_rm/','edit_transfer_view','from_invoice','</thead>','Error\x20Occurs','Enabled','Chinese','from_bin','12nNReCs','ToRoomAssigned','transfer','<html><head><title></title>','Receiving\x20Area','concat','Raw\x20Materials','$product_details.invoice','<hr\x20class=\x22my-3\x22>','catch','updateOne','length','forEach','from_warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','</tbody>','findOne','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','product_name','$product_details.storage','findById','sendMail','master','batch_code','to_types','COLD\x20STORAGE','from_types','/upload/','filter','8015560VXnvnC','$product_details.primary_code','English','$name','<h5>','$product_details.product_code','to_bay','3101Cjyqfw','log','save','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','</table>','to_prod_qty','20EgKlOY','Ambient','email','find','3300033PsNyBZ','New_Qty_Converted','$product.from_room_name','body','maxProducts','<span\x20style=\x22float:\x20right;\x22>','then','from_prod_pallet','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','$from_warehouse','role','Rack\x20F','all','from_rack','push','getMonth','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','Shelves','</div>','German','Arabic\x20(ae)','secondary_code','Email\x20sent\x20successfully','133340qHcWep','Arabic','Rack\x20D','flash','product_code','$product_details.secondary_code','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','maxperunit','$product_details.bay','</td>','/barcode_scanner','date','status','type','</span>','/view','$product_details.maxPerUnit','bay','exports','Level','Spanish','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.bin','primary_code','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.pallet','<tr>','True','from_prod_isle','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','map','to_invoice','TRF-','\x20<>\x20','An\x20error\x20occurred.','_id','slice','<tbody\x20style=\x22text-align:\x20center;\x22>','Floor','$product_details','$product_details.product_stock','from_storage','to_prod_isle','json','An\x20error\x20occurred\x20while\x20saving\x20data.','redirect','<h5\x20style=\x22text-align:\x20left;\x22>','from_bay','product_details','get','expiry_date','MaxStocks_data2','There\x27s\x20a\x20error\x20in\x20this\x20transaction','Return\x20Rooms','id_transaction','Rack\x20E','to_prod_level','/view/:id','$product_details.product_name','<div>'];a0_0x2cd4=function(){return _0x1d86a5;};return a0_0x2cd4();}function BayBinSelected(_0x37e1cb,_0x456070){var _0x4eadb3=a0_0x432997,_0x292a8a=[],_0x53e7fc=[],_0xb6fbf2=[],_0x15bc06=[],_0x1f3a23=[],_0x2a882e=[];let _0x2b4e6e=[];if(_0x37e1cb==_0x4eadb3(0x22c))switch(_0x456070){case'Rack\x20A':_0x292a8a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x53e7fc=[0x1,0x2],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0),_0x4eadb3(0x1b3)],_0x1f3a23=['D'],_0x2a882e=['A'];break;case _0x4eadb3(0x21c):_0x292a8a=[0x6,0x5,0x4,0x3,0x2,0x1],_0x53e7fc=[0x1,0x2],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0),_0x4eadb3(0x1b3)],_0x1f3a23=['D'],_0x2a882e=['B'];break;case _0x4eadb3(0x187):_0x292a8a=[0x0],_0x53e7fc=[0x0],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1b3)],_0x1f3a23=['D'],_0x2a882e=['S'];break;case _0x4eadb3(0x14b):_0x292a8a=[0x0],_0x53e7fc=[0x0],_0x15bc06=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0xb6fbf2=['Floor'],_0x1f3a23=['D'],_0x2a882e=['R'];break;}else{if(_0x37e1cb==_0x4eadb3(0x160))switch(_0x456070){case _0x4eadb3(0x213):_0x292a8a=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x53e7fc=['B','F'],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0),_0x4eadb3(0x1b3)],_0x1f3a23=['C'],_0x2a882e=['A'];break;case _0x4eadb3(0x21c):_0x292a8a=[0x5,0x4,0x3,0x2,0x1],_0x53e7fc=['F','B','S'],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=['Level',_0x4eadb3(0x1b3)],_0x1f3a23=['C'],_0x2a882e=['B'];break;case _0x4eadb3(0x231):_0x292a8a=[0x1,0x2,0x3,0x4,0x5],_0x53e7fc=['B','F','S'],_0x15bc06=[0x5,0x4,0x3,0x2,0x1],_0xb6fbf2=[_0x4eadb3(0x1a0),_0x4eadb3(0x1b3)],_0x1f3a23=['C'],_0x2a882e=['C'];break;case _0x4eadb3(0x18f):_0x292a8a=[0x5,0x4,0x3,0x2,0x1],_0x53e7fc=['F','B','S'],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0),_0x4eadb3(0x1b3)],_0x1f3a23=['C'],_0x2a882e=['D'];break;case _0x4eadb3(0x1c4):_0x292a8a=[0x4,0x3,0x2,0x1],_0x53e7fc=[0x1,0x2],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0),'Floor'],_0x1f3a23=['C'],_0x2a882e=['E'];break;case _0x4eadb3(0x180):_0x292a8a=[0x1,0x2,0x3],_0x53e7fc=[0x1,0x2],_0x15bc06=[0x1,0x2,0x3,0x4,0x5],_0xb6fbf2=[_0x4eadb3(0x1a0)],_0x1f3a23=['C'],_0x2a882e=['F'];break;}}return{'levels':_0x292a8a,'Isle':_0x53e7fc,'rack':_0x15bc06,'type':_0xb6fbf2,'storage':_0x1f3a23,'rak':_0x2a882e};}router[a0_0x432997(0x1be)](a0_0x432997(0x1c6),auth,async(_0x15ef34,_0x5b93c6)=>{var _0x394cde=a0_0x432997;try{const {username:_0x46f911,email:_0x545756,role:_0x3d1550}=_0x15ef34[_0x394cde(0x214)],_0x294355=_0x15ef34[_0x394cde(0x214)],_0x2911ed=await profile['findOne']({'email':_0x294355[_0x394cde(0x173)]}),_0x4d58e9=await master_shop[_0x394cde(0x174)](),_0x328de1=await transfers[_0x394cde(0x15b)](_0x15ef34[_0x394cde(0x20c)]['id']);let _0x57da73;if(_0x294355[_0x394cde(0x17f)]==_0x394cde(0x1dc)){const _0x55827f=await staff['findOne']({'email':_0x294355['email']});_0x57da73=await warehouse[_0x394cde(0x1f0)]([{'$match':{'status':_0x394cde(0x144),'name':_0x55827f[_0x394cde(0x1ff)],'warehouse_category':_0x394cde(0x14d)}},{'$group':{'_id':'$name','name':{'$first':_0x394cde(0x167)}}}]);}else _0x57da73=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x394cde(0x167),'name':{'$first':_0x394cde(0x167)}}}]);const _0x2ac367=await warehouse[_0x394cde(0x1f0)]([{'$match':{'name':_0x328de1[_0x394cde(0x154)],'warehouse_category':_0x394cde(0x14d)}},{'$unwind':_0x394cde(0x1b4)},{'$group':{'_id':_0x394cde(0x1f4),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x394cde(0x1b5)},'bay':{'$first':_0x394cde(0x195)},'bin':{'$first':_0x394cde(0x1a3)},'type':{'$first':_0x394cde(0x1db)},'floorlevel':{'$first':_0x394cde(0x204)},'primary_code':{'$first':_0x394cde(0x165)},'secondary_code':{'$first':_0x394cde(0x192)},'product_code':{'$first':_0x394cde(0x169)},'storage':{'$first':_0x394cde(0x15a)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x394cde(0x20b)},'production_date':{'$first':_0x394cde(0x220)},'room':{'$first':_0x394cde(0x1e5)}}}]),_0x317443=await product[_0x394cde(0x174)]({}),_0x409308=BayBinSelected(_0x328de1[_0x394cde(0x216)],_0x328de1['to_room']);if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x1d9)){var _0x51e2a4=users['English'];console[_0x394cde(0x16c)](_0x51e2a4);}else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x203))var _0x51e2a4=users['Hindi'];else{if(_0x4d58e9[0x0]['language']=='German')var _0x51e2a4=users[_0x394cde(0x189)];else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x1a1))var _0x51e2a4=users[_0x394cde(0x1a1)];else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x209))var _0x51e2a4=users[_0x394cde(0x209)];else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x1e6))var _0x51e2a4=users[_0x394cde(0x200)];else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x145))var _0x51e2a4=users[_0x394cde(0x145)];else{if(_0x4d58e9[0x0][_0x394cde(0x1ca)]==_0x394cde(0x18a))var _0x51e2a4=users[_0x394cde(0x18e)];}}}}}}}_0x5b93c6[_0x394cde(0x1e9)](_0x394cde(0x1f7),{'success':_0x15ef34['flash'](_0x394cde(0x1de)),'errors':_0x15ef34[_0x394cde(0x190)](_0x394cde(0x205)),'role':_0x294355,'profile':_0x2911ed,'master_shop':_0x4d58e9,'warehouse':_0x57da73,'transfer':_0x328de1,'stock':_0x2ac367,'unit':_0x317443,'language':_0x51e2a4});}catch(_0x4fd51e){console[_0x394cde(0x16c)](_0x4fd51e);}}),router[a0_0x432997(0x1dd)](a0_0x432997(0x1c6),auth,async(_0x3bd005,_0x25912c)=>{var _0x5e8e26=a0_0x432997;try{const _0x532c34=_0x3bd005['params']['id'],_0x4a2086=await transfers[_0x5e8e26(0x15b)](_0x532c34);_0x25912c[_0x5e8e26(0x1b8)](_0x3bd005['body']);return;const {date:_0x11ab7f,from_warehouse:_0x14880d,FromRoom_name:_0x5ee845,to_warehouse:_0x5cb3c0,ToRoom_name:_0xb220ee,prod_name:_0x27445c,from_prod_qty:_0xe4a87,from_prod_level:_0x4ac624,from_prod_isle:_0x35a65b,from_prod_pallet:_0x250913,to_prod_qty:_0x2b8f4b,to_prod_level:_0x4c2cfd,to_prod_isle:_0x3307c5,to_prod_pallet:_0x50e34a,primary_code:_0x271dde,secondary_code:_0xbe5e83,product_code3:_0xa369bf,note:_0x35b516,invoice:_0xb1f284,expiry_date:_0x2d91af}=_0x3bd005[_0x5e8e26(0x178)];if(typeof _0x27445c==_0x5e8e26(0x21e))var _0x281453=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x236)]],_0x2a3c65=[_0x3bd005['body'][_0x5e8e26(0x223)]],_0x17dbe8=[_0x3bd005['body'][_0x5e8e26(0x229)]],_0x100f1f=[_0x3bd005['body'][_0x5e8e26(0x1a9)]],_0x5ecb5e=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x17c)]],_0x25abad=[_0x3bd005[_0x5e8e26(0x178)]['from_types']],_0x19facc=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x170)]],_0x10b1b0=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1c5)]],_0xaf618f=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1b7)]],_0x48b403=[_0x3bd005[_0x5e8e26(0x178)]['to_prod_pallet']],_0x2dd3bc=[_0x3bd005['body']['to_types']],_0x3fc95f=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x235)]],_0x83289c=[_0x3bd005['body'][_0x5e8e26(0x208)]],_0x37b672=[_0x3bd005[_0x5e8e26(0x178)]['primary_code']],_0x5a8e97=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x18b)]],_0x128f21=[_0x3bd005['body'][_0x5e8e26(0x1d0)]],_0x5c850b=[_0x3bd005['body'][_0x5e8e26(0x1c0)]],_0x3ca51f=[_0x3bd005['body'][_0x5e8e26(0x1e2)]],_0x16673f=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x207)]],_0x4b548d=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x15e)]],_0x3df99c=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1bf)]],_0x255650=[_0x3bd005[_0x5e8e26(0x178)]['from_storage']],_0x5c223e=[_0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1da)]];else var _0x281453=[..._0x3bd005[_0x5e8e26(0x178)]['prod_name']],_0x3fc95f=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x235)]],_0x83289c=[..._0x3bd005['body'][_0x5e8e26(0x208)]],_0x25abad=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x161)]],_0x2dd3bc=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x15f)]],_0x2a3c65=[..._0x3bd005['body']['from_prod_qty']],_0x17dbe8=[..._0x3bd005['body'][_0x5e8e26(0x229)]],_0x100f1f=[..._0x3bd005[_0x5e8e26(0x178)]['from_prod_isle']],_0x5ecb5e=[..._0x3bd005[_0x5e8e26(0x178)]['from_prod_pallet']],_0x19facc=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x170)]],_0x10b1b0=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1c5)]],_0xaf618f=[..._0x3bd005['body'][_0x5e8e26(0x1b7)]],_0x48b403=[..._0x3bd005['body'][_0x5e8e26(0x1e8)]],_0x37b672=[..._0x3bd005['body']['primary_code']],_0x5a8e97=[..._0x3bd005[_0x5e8e26(0x178)]['secondary_code']],_0x128f21=[..._0x3bd005[_0x5e8e26(0x178)]['product_code3']],_0x5c850b=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1c0)]],_0x3ca51f=[..._0x3bd005[_0x5e8e26(0x178)]['unit']],_0x16673f=[..._0x3bd005['body']['secondary_unit']],_0x4b548d=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x15e)]],_0x3df99c=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1bf)]],_0x255650=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1b6)]],_0x5c223e=[..._0x3bd005[_0x5e8e26(0x178)][_0x5e8e26(0x1da)]];const _0x3c1c2e=_0x281453[_0x5e8e26(0x1ab)](_0x363430=>{return _0x363430={'product_name':_0x363430};});_0x2a3c65[_0x5e8e26(0x153)]((_0x259c4a,_0x5eabe4)=>{var _0x3e015a=_0x5e8e26;_0x3c1c2e[_0x5eabe4][_0x3e015a(0x21f)]=_0x259c4a;}),_0x17dbe8[_0x5e8e26(0x153)]((_0x1aa404,_0x592d9c)=>{var _0x104bf4=_0x5e8e26;_0x3c1c2e[_0x592d9c][_0x104bf4(0x1bc)]=_0x1aa404;}),_0x100f1f[_0x5e8e26(0x153)]((_0x557a96,_0x3ab785)=>{var _0x43172a=_0x5e8e26;_0x3c1c2e[_0x3ab785][_0x43172a(0x146)]=_0x557a96;}),_0x5ecb5e[_0x5e8e26(0x153)]((_0x33d8ce,_0x2b785a)=>{_0x3c1c2e[_0x2b785a]['from_floorlevel']=_0x33d8ce;}),_0x19facc[_0x5e8e26(0x153)]((_0x2ee7f7,_0x2ff8a7)=>{var _0x342084=_0x5e8e26;_0x3c1c2e[_0x2ff8a7][_0x342084(0x1ed)]=_0x2ee7f7;}),_0x10b1b0[_0x5e8e26(0x153)]((_0x2f5472,_0x1378f1)=>{var _0x52ad41=_0x5e8e26;_0x3c1c2e[_0x1378f1][_0x52ad41(0x16a)]=_0x2f5472;}),_0xaf618f[_0x5e8e26(0x153)]((_0x3b90c9,_0x53d76b)=>{var _0x4f23f5=_0x5e8e26;_0x3c1c2e[_0x53d76b][_0x4f23f5(0x1d7)]=_0x3b90c9;}),_0x48b403[_0x5e8e26(0x153)]((_0x1d63b9,_0x465937)=>{var _0x5ddf6b=_0x5e8e26;_0x3c1c2e[_0x465937][_0x5ddf6b(0x1d5)]=_0x1d63b9;}),_0x37b672[_0x5e8e26(0x153)]((_0x2a828f,_0x17e97b)=>{var _0x165c1a=_0x5e8e26;_0x3c1c2e[_0x17e97b][_0x165c1a(0x1a4)]=_0x2a828f;}),_0x5a8e97['forEach']((_0x88cc23,_0x37532b)=>{var _0x1dbad8=_0x5e8e26;_0x3c1c2e[_0x37532b][_0x1dbad8(0x18b)]=_0x88cc23;}),_0x128f21[_0x5e8e26(0x153)]((_0x1990fb,_0x55591c)=>{var _0x6fba9e=_0x5e8e26;_0x3c1c2e[_0x55591c][_0x6fba9e(0x191)]=_0x1990fb;}),_0x5c850b['forEach']((_0x2f1295,_0x3debba)=>{var _0x46cfa6=_0x5e8e26;_0x3c1c2e[_0x3debba][_0x46cfa6(0x179)]=_0x2f1295;}),_0x3ca51f['forEach']((_0x58b52f,_0x2814fa)=>{_0x3c1c2e[_0x2814fa]['unit']=_0x58b52f;}),_0x16673f[_0x5e8e26(0x153)]((_0x445afa,_0x4014b9)=>{var _0x3bbc8=_0x5e8e26;_0x3c1c2e[_0x4014b9][_0x3bbc8(0x207)]=_0x445afa;}),_0x4b548d[_0x5e8e26(0x153)]((_0x7f0c39,_0x5e1972)=>{var _0x530163=_0x5e8e26;_0x3c1c2e[_0x5e1972][_0x530163(0x15e)]=_0x7f0c39;}),_0x3df99c[_0x5e8e26(0x153)]((_0x7d19e7,_0x52a7b7)=>{var _0x5a5129=_0x5e8e26;_0x3c1c2e[_0x52a7b7][_0x5a5129(0x1bf)]=_0x7d19e7;}),_0x3fc95f['forEach']((_0x1a6b60,_0x1fb14d)=>{_0x3c1c2e[_0x1fb14d]['storage']=_0x1a6b60;}),_0x83289c[_0x5e8e26(0x153)]((_0x43be5b,_0x56156d)=>{var _0x45ae58=_0x5e8e26;_0x3c1c2e[_0x56156d][_0x45ae58(0x201)]=_0x43be5b;}),_0x25abad[_0x5e8e26(0x153)]((_0x2ae157,_0xc145bf)=>{var _0x5cfd6c=_0x5e8e26;_0x3c1c2e[_0xc145bf][_0x5cfd6c(0x161)]=_0x2ae157;}),_0x2dd3bc['forEach']((_0x2baec3,_0x29187d)=>{var _0x35479b=_0x5e8e26;_0x3c1c2e[_0x29187d][_0x35479b(0x15f)]=_0x2baec3;}),_0x255650[_0x5e8e26(0x153)]((_0x5457ce,_0x2ca6f8)=>{var _0x4cc7db=_0x5e8e26;_0x3c1c2e[_0x2ca6f8][_0x4cc7db(0x1b6)]=_0x5457ce;}),_0x5c223e['forEach']((_0x2c7408,_0x49ab90)=>{var _0x27cbc1=_0x5e8e26;_0x3c1c2e[_0x49ab90][_0x27cbc1(0x182)]=_0x2c7408;});const _0x2c546b=_0x3c1c2e[_0x5e8e26(0x163)](_0x4733d4=>_0x4733d4[_0x5e8e26(0x1ed)]!=='0'&&_0x4733d4['to_quantity']!==''||_0x4733d4[_0x5e8e26(0x1d5)]!=='0'&&_0x4733d4[_0x5e8e26(0x1d5)]!=='');var _0x3c7e7a=0x0;_0x2c546b['forEach'](_0x2f4aa3=>{var _0x46c0a7=_0x5e8e26;parseInt(_0x2f4aa3[_0x46c0a7(0x21f)])<parseInt(_0x2f4aa3[_0x46c0a7(0x1ed)])&&_0x3c7e7a++;});if(_0x3c7e7a!=0x0)return _0x3bd005['flash'](_0x5e8e26(0x205),_0x5e8e26(0x1aa)),_0x25912c[_0x5e8e26(0x1ba)]('back');const _0x2ef7c1=await warehouse[_0x5e8e26(0x157)]({'name':_0x4a2086[_0x5e8e26(0x154)],'room':_0x4a2086[_0x5e8e26(0x22a)]});_0x4a2086[_0x5e8e26(0x233)][_0x5e8e26(0x153)](_0x435b71=>{var _0x1c8baf=_0x5e8e26;if(_0x435b71[_0x1c8baf(0x1ed)]>0x0){const _0x3e496c=_0x2ef7c1[_0x1c8baf(0x1bd)][_0x1c8baf(0x1ab)](_0x3a296c=>{var _0x486857=_0x1c8baf;_0x3a296c['product_name']==_0x435b71[_0x486857(0x159)]&&_0x3a296c[_0x486857(0x20d)]==_0x435b71[_0x486857(0x1e3)]&&_0x3a296c[_0x486857(0x19a)]==_0x435b71[_0x486857(0x161)]&&_0x3a296c[_0x486857(0x226)]==_0x435b71[_0x486857(0x146)]&&_0x3a296c[_0x486857(0x19e)]==_0x435b71['from_bay']&&_0x3a296c[_0x486857(0x201)]==_0x435b71[_0x486857(0x182)]&&_0x3a296c[_0x486857(0x235)]==_0x435b71[_0x486857(0x1b6)]&&(_0x3a296c['product_stock']=parseInt(_0x3a296c[_0x486857(0x20a)])+parseInt(_0x435b71[_0x486857(0x1ed)]));});}}),await _0x2ef7c1[_0x5e8e26(0x16d)]();const _0x35183e=await warehouse[_0x5e8e26(0x157)]({'name':_0x4a2086[_0x5e8e26(0x216)],'room':_0x4a2086[_0x5e8e26(0x1d6)]});_0x4a2086[_0x5e8e26(0x233)][_0x5e8e26(0x153)](_0x999b82=>{var _0x32dda0=_0x5e8e26;if(_0x999b82['to_quantity']>0x0){const _0xc1c8bb=_0x35183e[_0x32dda0(0x1bd)]['map'](_0x5227e2=>{var _0xdf3494=_0x32dda0;_0x5227e2[_0xdf3494(0x159)]==_0x999b82['product_name']&&_0x5227e2[_0xdf3494(0x20d)]==_0x999b82[_0xdf3494(0x1d5)]&&_0x5227e2[_0xdf3494(0x19a)]==_0x999b82['to_types']&&_0x5227e2[_0xdf3494(0x226)]==_0x999b82[_0xdf3494(0x1d7)]&&_0x5227e2[_0xdf3494(0x19e)]==_0x999b82[_0xdf3494(0x16a)]&&_0x5227e2[_0xdf3494(0x201)]==_0x999b82[_0xdf3494(0x201)]&&_0x5227e2[_0xdf3494(0x235)]==_0x999b82[_0xdf3494(0x235)]&&(_0x5227e2[_0xdf3494(0x20a)]=parseInt(_0x5227e2[_0xdf3494(0x20a)])-parseInt(_0x999b82[_0xdf3494(0x1ed)]));});}}),await _0x35183e[_0x5e8e26(0x16d)](),_0x4a2086[_0x5e8e26(0x198)]=_0x11ab7f,_0x4a2086[_0x5e8e26(0x154)]=_0x14880d,_0x4a2086['to_warehouse']=_0x5cb3c0,_0x4a2086[_0x5e8e26(0x233)]=_0x2c546b,_0x4a2086['note']=_0x35b516,_0x4a2086[_0x5e8e26(0x1d1)]=_0xb1f284;const _0x3271ae=await _0x4a2086[_0x5e8e26(0x16d)]();console[_0x5e8e26(0x16c)](_0x3271ae);const _0x480d92=await warehouse['findOne']({'name':_0x14880d,'room':_0x5ee845});_0x3271ae[_0x5e8e26(0x233)]['forEach'](_0x35b3ba=>{var _0x3c3b93=_0x5e8e26;if(_0x35b3ba[_0x3c3b93(0x1ed)]>0x0){const _0x4b2534=_0x480d92[_0x3c3b93(0x1bd)][_0x3c3b93(0x1ab)](_0x3028b0=>{var _0x40ff1a=_0x3c3b93;_0x3028b0[_0x40ff1a(0x159)]==_0x35b3ba['product_name']&&_0x3028b0[_0x40ff1a(0x20d)]==_0x35b3ba[_0x40ff1a(0x1e3)]&&_0x3028b0[_0x40ff1a(0x19a)]==_0x35b3ba[_0x40ff1a(0x161)]&&_0x3028b0['bin']==_0x35b3ba['from_bin']&&_0x3028b0['bay']==_0x35b3ba[_0x40ff1a(0x1bc)]&&_0x3028b0['rack']==_0x35b3ba['from_rack']&&_0x3028b0[_0x40ff1a(0x235)]==_0x35b3ba[_0x40ff1a(0x1b6)]&&(_0x3028b0[_0x40ff1a(0x20a)]=parseInt(_0x3028b0['product_stock'])-parseInt(_0x35b3ba[_0x40ff1a(0x1ed)]));});}}),await _0x480d92[_0x5e8e26(0x16d)]();const _0x4c0eab=await warehouse['findOne']({'name':_0x5cb3c0,'room':_0xb220ee});_0x3271ae[_0x5e8e26(0x233)][_0x5e8e26(0x153)](_0x154e6a=>{var _0x33cc71=_0x5e8e26;if(_0x154e6a[_0x33cc71(0x1ed)]>0x0){var _0x3c972d=0x0;const _0x866b2d=_0x4c0eab[_0x33cc71(0x1bd)]['map'](_0x22168c=>{var _0x28752a=_0x33cc71;_0x22168c[_0x28752a(0x159)]==_0x154e6a['product_name']&&_0x22168c[_0x28752a(0x20d)]==_0x154e6a['to_floorlevel']&&_0x22168c[_0x28752a(0x19a)]==_0x154e6a['to_types']&&_0x22168c[_0x28752a(0x226)]==_0x154e6a[_0x28752a(0x1d7)]&&_0x22168c[_0x28752a(0x19e)]==_0x154e6a['to_bay']&&_0x22168c['rack']==_0x154e6a['rack']&&_0x22168c[_0x28752a(0x235)]==_0x154e6a[_0x28752a(0x235)]&&(_0x22168c[_0x28752a(0x20a)]=parseInt(_0x22168c['product_stock'])+parseInt(_0x154e6a['to_quantity']),_0x3c972d++);});_0x3c972d=='0'&&(_0x4c0eab[_0x33cc71(0x1bd)]=_0x4c0eab['product_details'][_0x33cc71(0x14c)]({'product_name':_0x154e6a[_0x33cc71(0x159)],'product_stock':_0x154e6a[_0x33cc71(0x1ed)],'bay':_0x154e6a[_0x33cc71(0x16a)],'bin':_0x154e6a['to_bin'],'type':_0x154e6a[_0x33cc71(0x15f)],'floorlevel':_0x154e6a[_0x33cc71(0x1d5)],'storage':_0x154e6a[_0x33cc71(0x235)],'rack':_0x154e6a[_0x33cc71(0x201)],'product_code':_0x154e6a[_0x33cc71(0x191)],'primary_code':_0x154e6a[_0x33cc71(0x1a4)],'secondary_code':_0x154e6a[_0x33cc71(0x18b)],'maxProducts':_0x154e6a['maxProducts'],'storage':_0x154e6a[_0x33cc71(0x235)],'rack':_0x154e6a['rack']}));}}),await _0x4c0eab[_0x5e8e26(0x16d)](),_0x3bd005[_0x5e8e26(0x190)]('success',_0x5e8e26(0x1f1)),_0x25912c[_0x5e8e26(0x1ba)](_0x5e8e26(0x1e4));}catch(_0x5b1c67){console['log'](_0x5b1c67);}}),router[a0_0x432997(0x1dd)](a0_0x432997(0x197),async(_0x3f37c2,_0x4edf34)=>{var _0x516d6e=a0_0x432997;const {FromWareHouse:_0x2a8181,FromRoom:_0x17632f,ToWarehouse:_0x8f191a,ToRoom:_0x1028b7,primary_code:_0x37d0dc,Roomslist:_0x5eaab6}=_0x3f37c2[_0x516d6e(0x178)],_0x37c447=_0x5eaab6['split'](','),_0x38a62c=[];async function _0x548d6d(_0x5d6c11){var _0x42fc8c=_0x516d6e;const _0x4797a8=await warehouse['aggregate']([{'$match':{'name':_0x2a8181,'room':_0x5d6c11}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x37d0dc}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x42fc8c(0x1c7)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x42fc8c(0x192)},'product_code':{'$first':_0x42fc8c(0x169)},'level':{'$first':_0x42fc8c(0x195)},'isle':{'$first':_0x42fc8c(0x1a3)},'type':{'$first':_0x42fc8c(0x1db)},'pallet':{'$first':_0x42fc8c(0x204)},'unit':{'$first':_0x42fc8c(0x1d8)},'secondary_unit':{'$first':_0x42fc8c(0x227)},'storage':{'$first':_0x42fc8c(0x15a)},'rack':{'$first':_0x42fc8c(0x1fe)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x42fc8c(0x1f8)},'maxPerUnit':{'$first':_0x42fc8c(0x19d)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x42fc8c(0x1d4)},'invoice_product':{'$first':_0x42fc8c(0x14e)}}}]),_0x48c496=await warehouse[_0x42fc8c(0x1f0)]([{'$match':{'name':_0x2a8181,'room':_0x5d6c11}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x37d0dc}},{'$group':{'_id':_0x42fc8c(0x1f4),'name':{'$first':_0x42fc8c(0x1c7)},'instock':{'$first':_0x42fc8c(0x1b5)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x42fc8c(0x192)},'product_code':{'$first':_0x42fc8c(0x169)},'level':{'$first':_0x42fc8c(0x195)},'isle':{'$first':_0x42fc8c(0x1a3)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x42fc8c(0x227)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x42fc8c(0x1fe)},'expiry_date':{'$first':_0x42fc8c(0x20b)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x42fc8c(0x1e5)},'maxProducts':{'$first':_0x42fc8c(0x1d4)},'invoice_product':{'$first':'$product_details.invoice'}}}]);if(_0x4797a8[_0x42fc8c(0x152)]>0x0)_0x38a62c['push'](_0x4797a8);else _0x48c496[_0x42fc8c(0x152)]>0x0&&_0x38a62c[_0x42fc8c(0x183)](_0x48c496);}const _0x277151=_0x37c447[_0x516d6e(0x1ab)](_0xa2891=>_0x548d6d(_0xa2891));await Promise[_0x516d6e(0x181)](_0x277151),_0x4edf34[_0x516d6e(0x1b8)](_0x38a62c);}),router[a0_0x432997(0x1dd)](a0_0x432997(0x1cb),async(_0x168b61,_0x2112ba)=>{var _0x3a3c7a=a0_0x432997;try{const {FromWareHouse:_0x5616c8,FromRoom:_0x28f315,ToWarehouse:_0x52753c,ToRoom:_0x35471c,secondary_code:_0x4496f9}=_0x168b61['body'],_0x31a47f=await warehouse[_0x3a3c7a(0x1f0)]([{'$match':{'name':_0x5616c8}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x4496f9}},{'$group':{'_id':_0x3a3c7a(0x1f4),'name':{'$first':_0x3a3c7a(0x1c7)},'primary_code':{'$first':_0x3a3c7a(0x165)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3a3c7a(0x169)},'instock':{'$first':_0x3a3c7a(0x1b5)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x3a3c7a(0x217)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x3a3c7a(0x1d8)}}}]);_0x2112ba['status'](0xc8)[_0x3a3c7a(0x1b8)](_0x31a47f);}catch(_0x50f42d){_0x2112ba[_0x3a3c7a(0x199)](0x194)[_0x3a3c7a(0x1b8)]({'message':_0x50f42d[_0x3a3c7a(0x1f2)]});}}),router[a0_0x432997(0x1dd)](a0_0x432997(0x1ea),async(_0x36bac4,_0x4d6501)=>{var _0x77b1a4=a0_0x432997;try{const {FromWareHouse:_0x2e5319,FromRoom:_0x4fa89d,ToWarehouse:_0x1742a4,ToRoom:_0x4e3e99,product_code:_0x5d78b9}=_0x36bac4['body'],_0x2b540a=await warehouse['aggregate']([{'$match':{'name':_0x2e5319}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x5d78b9}},{'$group':{'_id':_0x77b1a4(0x1f4),'name':{'$first':_0x77b1a4(0x1c7)},'primary_code':{'$first':_0x77b1a4(0x165)},'secondary_code':{'$first':_0x77b1a4(0x192)},'product_code':{'$first':_0x77b1a4(0x169)},'instock':{'$first':_0x77b1a4(0x1b5)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x77b1a4(0x217)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x77b1a4(0x1d4)},'unit':{'$first':_0x77b1a4(0x1d8)}}}]);_0x4d6501[_0x77b1a4(0x199)](0xc8)[_0x77b1a4(0x1b8)](_0x2b540a);}catch(_0x4d7d45){_0x4d6501[_0x77b1a4(0x199)](0x194)[_0x77b1a4(0x1b8)]({'message':_0x4d7d45[_0x77b1a4(0x1f2)]});}}),router[a0_0x432997(0x1dd)]('/CheckingWarehouse',async(_0x531277,_0x51e9d4)=>{var _0x588961=a0_0x432997;const {level:_0x12317c,isle:_0x124dc6,pallet:_0x3ef433,warehouses:_0x4f6c64,room:_0x2ff6ab}=_0x531277[_0x588961(0x178)];try{const _0x4b1ef0=await warehouse['aggregate']([{'$match':{'name':_0x4f6c64,'room':_0x2ff6ab}},{'$unwind':_0x588961(0x1b4)},{'$match':{'product_details.level':parseInt(_0x12317c),'product_details.isle':_0x124dc6,'product_details.pallet':parseInt(_0x3ef433)}},{'$group':{'_id':_0x588961(0x1f4),'name':{'$first':_0x588961(0x1c7)},'product_stock':{'$first':'$product_details.product_stock'},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x588961(0x217)},'pallet':{'$first':_0x588961(0x1a6)},'maxProducts':{'$first':_0x588961(0x1d4)}}}]);_0x51e9d4[_0x588961(0x199)](0xc8)[_0x588961(0x1b8)](_0x4b1ef0);}catch(_0x19fc78){_0x51e9d4['status'](0x194)['json']({'message':_0x19fc78[_0x588961(0x1f2)]});}}),module[a0_0x432997(0x19f)]=router;