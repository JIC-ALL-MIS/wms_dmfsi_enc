function a0_0x269f(_0x5b13e1,_0x4f2413){var _0x16322f=a0_0x1632();return a0_0x269f=function(_0x269fce,_0x431e85){_0x269fce=_0x269fce-0x1d6;var _0x367a17=_0x16322f[_0x269fce];return _0x367a17;},a0_0x269f(_0x5b13e1,_0x4f2413);}function a0_0x1632(){var _0x5ec650=['<thead\x20style=\x22width:\x20100%\x20!important;\x22>','body','/view/add_transfer','from_storage','flash','Rack\x20D','from_prod_qty','English','Enabled','from_prod_isle','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','to_quantity','Raw\x20Materials','<h5>','role','$product_details.pallet','product_stock','$product_details','ToRoomAssigned','from_bin','</tbody>','$product_details.production_date','primary_code','$product_details._id','secondary_code','expiry_date','$product','Rack\x20A','batch_code','product_code','Rack\x20F','post','slice','secondary_unit','Rack\x20C','error','max_per_unit','product_details','random','</div>','exports','type','primary_unit','908073ISldQV','2558619ApvowR','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','edit_transfer','TRF-','from_room_name','from_prod_pallet','English\x20(US)','German','Floor','Arabic\x20(ae)','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','to_warehouse','Transfer\x20Mail','from_rak','80tpYtdF','finalize','to_bay','/view','/../public','$product_details.bay','/transfer/preview/','to_types','findById','$name','bin','to_invoice','nodemailer','findOne','Spanish','image','$product.to_room_name','from_rack','Rack\x20E','$room','from_invoice','/barcode_scanner2','to_prod_pallet','Chinese','Shelves','note','<div>','$product_details.isle','split','/picking_list/PDF_transfer_rm/','Level','storage','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.product_stock','staff','$product_details.maxPerUnit','$product_details.type','../models/all_models','<h5\x20style=\x22text-align:\x20left;\x22>','\x20Order\x20Date\x20:\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</td>','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','floorlevel','Email\x20sent\x20successfully','$product_details.batch_code','<!DOCTYPE\x20html>','Receiving\x20Area','$product_details.primary_code','</head><body>','To_invoice','</table>','$product_details.secondary_code','Transfer\x20Finalize\x20Successfully','master','$product_details.storage','from_prod_level','createTransport','MaxStocks_data2','/transfer/view','$invoice','string','errors','maxProducts','from_warehouse','2548914jiAiRf','Router','</h5>','all','params','$_id','unit','invoice','2561094fOomGL','rack','$product_details.rack','save','product_name','<span\x20style=\x22float:\x20right;\x22>','prod_name','site_title','RoomAssigned','Portuguese','warehouse','language','$to_warehouse','bay','to_prod_qty','/preview/:id','from_floorlevel','$product_details.unit','There\x27s\x20a\x20error\x20in\x20this\x20transaction','maxperunit','product_code3','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/view/:id','updateOne','padStart','back','forEach','<hr\x20class=\x22my-3\x22>','port','to_room','<strong>\x20Regards\x20</strong>','from_quantity','True','edit_transfer_view','from_types','<tr>','1921802hvFcHS','/barcode_scanner','$date','$product_details.maxProducts','</tr>','_id','/upload/','14wLbpFg','\x20Order\x20Number\x20:\x20','</body></html>','map','Hindi','user','Arabic','aggregate','length','An\x20error\x20occurred\x20while\x20saving\x20data.','$from_warehouse','Logo.png','render','date','floor','$product_details.level','express','from_bay','email','Product\x20Transfer\x20successfully','production_date','14268928AKdpcl','Portuguese\x20(BR)','36845GyfpPh','Error\x20Occurs','$isAllowEdit','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Ambient','concat','</thead>','find','logo','product','../public/language/languages.json','message','to_bin','to_prod_isle','French','catch','$product_details.expiry_date','An\x20error\x20occurred.','$product_details.product_name','json','then','status','Enclosed','prod_cat','$product_details.floorlevel','sendMail','get','Rack\x20B','to_prod_level','Return\x20Rooms','to_floorlevel','584BDsdFA','$product_details.bin','filter','success','toString','to_room_name','from_room','push','DRY\x20STORAGE','$product_details.product_code','redirect','log','New_Qty_Converted','/CheckingWarehouse'];a0_0x1632=function(){return _0x5ec650;};return a0_0x1632();}var a0_0x1b9bc1=a0_0x269f;(function(_0x9221b,_0x17a2f0){var _0x5ef16b=a0_0x269f,_0x597171=_0x9221b();while(!![]){try{var _0x26254c=parseInt(_0x5ef16b(0x1fb))/0x1+-parseInt(_0x5ef16b(0x1d7))/0x2+-parseInt(_0x5ef16b(0x272))/0x3+-parseInt(_0x5ef16b(0x238))/0x4*(-parseInt(_0x5ef16b(0x219))/0x5)+-parseInt(_0x5ef16b(0x2c1))/0x6*(parseInt(_0x5ef16b(0x202))/0x7)+parseInt(_0x5ef16b(0x217))/0x8+-parseInt(_0x5ef16b(0x271))/0x9*(parseInt(_0x5ef16b(0x280))/0xa);if(_0x26254c===_0x17a2f0)break;else _0x597171['push'](_0x597171['shift']());}catch(_0x4d44d9){_0x597171['push'](_0x597171['shift']());}}}(a0_0x1632,0xf1f52));const express=require(a0_0x1b9bc1(0x212)),app=express(),router=express[a0_0x1b9bc1(0x2c2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x1b9bc1(0x2a5)),auth=require('../middleware/auth'),users=require(a0_0x1b9bc1(0x223)),nodemailer=require(a0_0x1b9bc1(0x28c));router[a0_0x1b9bc1(0x233)](a0_0x1b9bc1(0x283),auth,async(_0x344cc9,_0x512ada)=>{var _0x20f378=a0_0x1b9bc1;try{const {username:_0x293573,email:_0x167868,role:_0x251889}=_0x344cc9['user'],_0x3c86de=_0x344cc9[_0x20f378(0x207)],_0x20f3a6=await profile['findOne']({'email':_0x3c86de[_0x20f378(0x214)]}),_0x3ad8c0=await master_shop[_0x20f378(0x220)]();console[_0x20f378(0x243)]('master',_0x3ad8c0);let _0x32cda2;if(_0x3c86de['role']==_0x20f378(0x2a2)){const _0x2ca28e=await staff[_0x20f378(0x28d)]({'email':_0x3c86de[_0x20f378(0x214)]});_0x32cda2=await transfers['find']({'from_warehouse':_0x2ca28e[_0x20f378(0x1e1)]});}else _0x32cda2=await transfers['aggregate']([{'$unwind':_0x20f378(0x260)},{'$group':{'_id':_0x20f378(0x2c6),'invoice':{'$first':_0x20f378(0x2bc)},'date':{'$first':_0x20f378(0x1fd)},'from_warehouse':{'$first':_0x20f378(0x20c)},'to_warehouse':{'$first':_0x20f378(0x1e3)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':_0x20f378(0x290)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x20f378(0x21b)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x3ad8c0[0x0]['language']==_0x20f378(0x278)){var _0x27a687=users['English'];console['log'](_0x27a687);}else{if(_0x3ad8c0[0x0]['language']==_0x20f378(0x206))var _0x27a687=users['Hindi'];else{if(_0x3ad8c0[0x0][_0x20f378(0x1e2)]=='German')var _0x27a687=users[_0x20f378(0x279)];else{if(_0x3ad8c0[0x0][_0x20f378(0x1e2)]==_0x20f378(0x28e))var _0x27a687=users['Spanish'];else{if(_0x3ad8c0[0x0][_0x20f378(0x1e2)]==_0x20f378(0x227))var _0x27a687=users[_0x20f378(0x227)];else{if(_0x3ad8c0[0x0][_0x20f378(0x1e2)]==_0x20f378(0x218))var _0x27a687=users[_0x20f378(0x1e0)];else{if(_0x3ad8c0[0x0]['language']=='Chinese')var _0x27a687=users[_0x20f378(0x297)];else{if(_0x3ad8c0[0x0][_0x20f378(0x1e2)]=='Arabic\x20(ae)')var _0x27a687=users[_0x20f378(0x208)];}}}}}}}_0x512ada[_0x20f378(0x20e)]('transfer',{'success':_0x344cc9['flash'](_0x20f378(0x23b)),'errors':_0x344cc9[_0x20f378(0x24a)](_0x20f378(0x2be)),'role':_0x3c86de,'profile':_0x20f3a6,'master_shop':_0x3ad8c0,'transfer':_0x32cda2,'language':_0x27a687});}catch(_0x41cb9b){console[_0x20f378(0x243)](_0x41cb9b);}});async function getRandom8DigitNumber(){var _0x339f7e=a0_0x1b9bc1;const _0x5f54d0=0x989680,_0x26edbe=0x5f5e0ff,_0x310f27=Math[_0x339f7e(0x210)](Math[_0x339f7e(0x26c)]()*(_0x26edbe-_0x5f54d0+0x1))+_0x5f54d0;var _0x517b4c;const _0x47eeab=await transfers['findOne']({'invoice':'TRF-'+_0x310f27});return _0x47eeab&&_0x47eeab[_0x339f7e(0x20a)]>0x0?_0x517b4c=_0x339f7e(0x275)+_0x310f27:_0x517b4c='TRF-'+_0x310f27,_0x517b4c;}router[a0_0x1b9bc1(0x233)](a0_0x1b9bc1(0x248),auth,async(_0xc268ca,_0x34ec1b)=>{var _0x18b20e=a0_0x1b9bc1;try{const {username:_0xd20249,email:_0x36ef47,role:_0x3ee63d}=_0xc268ca[_0x18b20e(0x207)],_0xedbbf=_0xc268ca[_0x18b20e(0x207)],_0xa1172e=await profile[_0x18b20e(0x28d)]({'email':_0xedbbf[_0x18b20e(0x214)]}),_0x5a5cba=await master_shop[_0x18b20e(0x220)]();console[_0x18b20e(0x243)]('master',_0x5a5cba);let _0x4a42ad;if(_0xedbbf[_0x18b20e(0x254)]==_0x18b20e(0x2a2)){const _0x44dc52=await staff['findOne']({'email':_0xedbbf[_0x18b20e(0x214)]});_0x4a42ad=await warehouse[_0x18b20e(0x209)]([{'$match':{'status':'Enabled','name':_0x44dc52[_0x18b20e(0x1e1)],'warehouse_category':_0x18b20e(0x252)}},{'$group':{'_id':_0x18b20e(0x289),'name':{'$first':_0x18b20e(0x289)}}}]);}else _0x4a42ad=await warehouse[_0x18b20e(0x209)]([{'$match':{'status':_0x18b20e(0x24e),'warehouse_category':_0x18b20e(0x252)}},{'$group':{'_id':_0x18b20e(0x289),'name':{'$first':_0x18b20e(0x289)}}}]);var _0x8d7f29=[_0x18b20e(0x21d),_0x18b20e(0x22f),_0x18b20e(0x236)];const _0x2de11a=await transfers[_0x18b20e(0x220)]({}),_0x22d9db=_0x2de11a[_0x18b20e(0x20a)]+0x1,_0x303fcd='TRF-'+_0x22d9db[_0x18b20e(0x23c)]()[_0x18b20e(0x1ef)](0x5,'0');if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]==_0x18b20e(0x278)){var _0x2e8b24=users[_0x18b20e(0x24d)];console[_0x18b20e(0x243)](_0x2e8b24);}else{if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]=='Hindi')var _0x2e8b24=users[_0x18b20e(0x206)];else{if(_0x5a5cba[0x0]['language']==_0x18b20e(0x279))var _0x2e8b24=users[_0x18b20e(0x279)];else{if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]=='Spanish')var _0x2e8b24=users[_0x18b20e(0x28e)];else{if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]==_0x18b20e(0x227))var _0x2e8b24=users[_0x18b20e(0x227)];else{if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]==_0x18b20e(0x218))var _0x2e8b24=users[_0x18b20e(0x1e0)];else{if(_0x5a5cba[0x0][_0x18b20e(0x1e2)]==_0x18b20e(0x297))var _0x2e8b24=users[_0x18b20e(0x297)];else{if(_0x5a5cba[0x0]['language']==_0x18b20e(0x27b))var _0x2e8b24=users[_0x18b20e(0x208)];}}}}}}}const _0xb53ba4=getRandom8DigitNumber();_0xb53ba4[_0x18b20e(0x22d)](_0x772fa8=>{var _0x8eb7bc=_0x18b20e;_0x34ec1b[_0x8eb7bc(0x20e)]('add_transfer',{'success':_0xc268ca['flash']('success'),'errors':_0xc268ca['flash'](_0x8eb7bc(0x2be)),'role':_0xedbbf,'profile':_0xa1172e,'master_shop':_0x5a5cba,'warehouse':_0x4a42ad,'language':_0x2e8b24,'rooms_data':_0x8d7f29,'invoice':_0x772fa8});})[_0x18b20e(0x228)](_0x246826=>{var _0x337d6d=_0x18b20e;_0xc268ca[_0x337d6d(0x24a)](_0x337d6d(0x2be),_0x337d6d(0x1e9)),_0x34ec1b[_0x337d6d(0x242)]('/transfer/view');});}catch(_0x3bda68){console[_0x18b20e(0x243)](_0x3bda68);}}),router[a0_0x1b9bc1(0x265)](a0_0x1b9bc1(0x248),auth,async(_0x124beb,_0x361352)=>{var _0xac02ec=a0_0x1b9bc1;try{console[_0xac02ec(0x243)](_0x124beb[_0xac02ec(0x247)]);const {date:_0x1444db,from_warehouse:_0x29fe08,FromRoom_name:_0x3bd56b,to_warehouse:_0x54de03,ToRoom_name:_0x476600,prod_name:_0x325807,from_prod_qty:_0x1aae8e,from_prod_level:_0x5d263e,from_prod_isle:_0x5ddd0d,from_prod_pallet:_0x5af69b,to_prod_qty:_0x4e8212,to_prod_level:_0x6a3506,to_prod_isle:_0xa357ad,to_prod_pallet:_0x5aee91,primary_code:_0xe04666,secondary_code:_0x38690f,product_code3:_0x1d6ec0,note:_0x16050d,MaxStocks_data2:_0x19d64f,invoice:_0x27b125,expiry_date:_0x293518}=_0x124beb[_0xac02ec(0x247)];if(typeof _0x325807==_0xac02ec(0x2bd))var _0x59925d=[_0x124beb['body'][_0xac02ec(0x1dd)]],_0x52cbcf=[_0x124beb['body'][_0xac02ec(0x24c)]],_0x412777=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x2b8)]],_0x52c6f4=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x244)]],_0x47811a=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x235)]],_0x434df0=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x25c)]],_0xab3bb7=[_0x124beb[_0xac02ec(0x247)]['secondary_code']],_0xecaf98=[_0x124beb['body'][_0xac02ec(0x1eb)]],_0x1409b7=[_0x124beb['body'][_0xac02ec(0x2ba)]],_0x51cbbf=[_0x124beb['body']['primary_unit']],_0x47628d=[_0x124beb[_0xac02ec(0x247)]['secondary_unit']],_0x340e8b=[_0x124beb['body'][_0xac02ec(0x262)]],_0x4857b0=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x25f)]],_0x1b7ece=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x26a)]],_0x2b2619=[_0x124beb['body'][_0xac02ec(0x216)]],_0x9fe2ee=[_0x124beb['body'][_0xac02ec(0x230)]],_0x578a07=[_0x124beb['body'][_0xac02ec(0x1df)]],_0x4a7834=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x258)]],_0x48f879=[_0x124beb[_0xac02ec(0x247)]['from_invoice']],_0x2cf35b=[_0x124beb[_0xac02ec(0x247)][_0xac02ec(0x28b)]];else var _0x59925d=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x1dd)]],_0x52cbcf=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x24c)]],_0x412777=[..._0x124beb[_0xac02ec(0x247)]['from_prod_level']],_0x52c6f4=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x244)]],_0x47811a=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x235)]],_0x434df0=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x25c)]],_0xab3bb7=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x25e)]],_0xecaf98=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x1eb)]],_0x1409b7=[..._0x124beb[_0xac02ec(0x247)]['MaxStocks_data2']],_0x51cbbf=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x270)]],_0x47628d=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x267)]],_0x340e8b=[..._0x124beb['body'][_0xac02ec(0x262)]],_0x4857b0=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x25f)]],_0x1b7ece=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x26a)]],_0x2b2619=[..._0x124beb[_0xac02ec(0x247)]['production_date']],_0x9fe2ee=[..._0x124beb['body'][_0xac02ec(0x230)]],_0x578a07=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x1df)]],_0x4a7834=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x258)]],_0x48f879=[..._0x124beb['body']['from_invoice']],_0x2cf35b=[..._0x124beb[_0xac02ec(0x247)][_0xac02ec(0x28b)]];const _0x14aaed=_0x59925d[_0xac02ec(0x205)](_0x5ce431=>{return _0x5ce431={'product_name':_0x5ce431};});_0x52cbcf[_0xac02ec(0x1f1)]((_0x701dc7,_0x124686)=>{_0x14aaed[_0x124686]['from_quantity']=_0x701dc7;}),_0x48f879['forEach']((_0x4eaa9f,_0x5f13b2)=>{var _0x5428cd=_0xac02ec;_0x14aaed[_0x5f13b2][_0x5428cd(0x294)]=_0x4eaa9f;}),_0x2cf35b[_0xac02ec(0x1f1)]((_0x1a1512,_0x5d1058)=>{var _0x348588=_0xac02ec;_0x14aaed[_0x5d1058][_0x348588(0x2b2)]=_0x1a1512;}),_0x412777[_0xac02ec(0x1f1)]((_0x19ae37,_0x37c5d2)=>{var _0x25d923=_0xac02ec;_0x578a07[_0x25d923(0x1f1)]((_0x213e75,_0x5587f9)=>{var _0x1d5a30=_0x25d923;if(_0x213e75==_0x1d5a30(0x2af)&&_0x37c5d2==_0x5587f9){var _0x4cd601=_0x19ae37[_0x1d5a30(0x266)](0x3);_0x14aaed[_0x37c5d2][_0x1d5a30(0x249)]=_0x19ae37[0x0],_0x14aaed[_0x37c5d2][_0x1d5a30(0x291)]=_0x19ae37[0x1],_0x14aaed[_0x37c5d2][_0x1d5a30(0x213)]=0x0,_0x14aaed[_0x37c5d2][_0x1d5a30(0x259)]=0x0,_0x14aaed[_0x37c5d2][_0x1d5a30(0x1f9)]='Floor',_0x14aaed[_0x37c5d2][_0x1d5a30(0x1e7)]=_0x4cd601;}else{if(_0x213e75=='Shelves'&&_0x37c5d2==_0x5587f9){var _0x4cd601=_0x19ae37[_0x1d5a30(0x266)](0x3);_0x14aaed[_0x37c5d2]['from_storage']=_0x19ae37[0x0],_0x14aaed[_0x37c5d2][_0x1d5a30(0x291)]=_0x19ae37[0x1],_0x14aaed[_0x37c5d2]['from_bay']=0x0,_0x14aaed[_0x37c5d2][_0x1d5a30(0x259)]=0x0,_0x14aaed[_0x37c5d2][_0x1d5a30(0x1f9)]=_0x1d5a30(0x27a),_0x14aaed[_0x37c5d2][_0x1d5a30(0x1e7)]=_0x19ae37[0x5];}else{if(_0x37c5d2==_0x5587f9){var _0x19cf31;if(_0x19ae37[0x4]=='L')_0x19cf31=_0x1d5a30(0x29e);else _0x19ae37[0x4]=='F'&&(_0x19cf31=_0x1d5a30(0x27a));_0x14aaed[_0x37c5d2][_0x1d5a30(0x249)]=_0x19ae37[0x0],_0x14aaed[_0x37c5d2][_0x1d5a30(0x291)]=_0x19ae37[0x1],_0x14aaed[_0x37c5d2][_0x1d5a30(0x213)]=_0x19ae37[0x2],_0x14aaed[_0x37c5d2][_0x1d5a30(0x259)]=_0x19ae37[0x3],_0x14aaed[_0x37c5d2][_0x1d5a30(0x1f9)]=_0x19cf31,_0x14aaed[_0x37c5d2][_0x1d5a30(0x1e7)]=_0x19ae37[0x5];}}}});}),_0x52c6f4['forEach']((_0x162d56,_0xcec330)=>{_0x14aaed[_0xcec330]['to_quantity']=_0x162d56;}),_0x47811a[_0xac02ec(0x1f1)]((_0x5e2dd1,_0x5f031e)=>{var _0x799c64=_0xac02ec;_0x4a7834[_0x799c64(0x1f1)]((_0x5cc613,_0x1bc132)=>{var _0x239c16=_0x799c64;if(_0x5cc613==_0x239c16(0x2af)&&_0x5f031e==_0x1bc132){var _0x2d3ed6=_0x5e2dd1['slice'](0x3);_0x14aaed[_0x5f031e][_0x239c16(0x29f)]=_0x5e2dd1[0x0],_0x14aaed[_0x5f031e][_0x239c16(0x1d8)]=_0x5e2dd1[0x1],_0x14aaed[_0x5f031e]['to_bay']=0x0,_0x14aaed[_0x5f031e][_0x239c16(0x225)]=0x0,_0x14aaed[_0x5f031e][_0x239c16(0x287)]='Floor',_0x14aaed[_0x5f031e][_0x239c16(0x237)]=_0x2d3ed6;}else{if(_0x5cc613==_0x239c16(0x298)&&_0x5f031e==_0x1bc132){var _0x2d3ed6=_0x5e2dd1['slice'](0x3);_0x14aaed[_0x5f031e][_0x239c16(0x29f)]=_0x5e2dd1[0x0],_0x14aaed[_0x5f031e][_0x239c16(0x1d8)]=_0x5e2dd1[0x1],_0x14aaed[_0x5f031e][_0x239c16(0x282)]=0x0,_0x14aaed[_0x5f031e][_0x239c16(0x225)]=0x0,_0x14aaed[_0x5f031e]['to_types']=_0x239c16(0x27a),_0x14aaed[_0x5f031e]['to_floorlevel']=_0x5e2dd1[0x5];}else{if(_0x5f031e==_0x1bc132){var _0x4d0d57;if(_0x5e2dd1[0x4]=='L')_0x4d0d57=_0x239c16(0x29e);else _0x5e2dd1[0x4]=='F'&&(_0x4d0d57=_0x239c16(0x27a));_0x14aaed[_0x5f031e]['storage']=_0x5e2dd1[0x0],_0x14aaed[_0x5f031e][_0x239c16(0x1d8)]=_0x5e2dd1[0x1],_0x14aaed[_0x5f031e]['to_bay']=_0x5e2dd1[0x2],_0x14aaed[_0x5f031e]['to_bin']=_0x5e2dd1[0x3],_0x14aaed[_0x5f031e][_0x239c16(0x287)]=_0x4d0d57,_0x14aaed[_0x5f031e][_0x239c16(0x237)]=_0x5e2dd1[0x5];}}}});}),_0x434df0['forEach']((_0x11e1d8,_0x401adb)=>{_0x14aaed[_0x401adb]['primary_code']=_0x11e1d8;}),_0xab3bb7[_0xac02ec(0x1f1)]((_0x1987d3,_0x1d4c79)=>{var _0x100a63=_0xac02ec;_0x14aaed[_0x1d4c79][_0x100a63(0x25e)]=_0x1987d3;}),_0xecaf98['forEach']((_0x5dbcf2,_0x5322c2)=>{var _0x3e06f3=_0xac02ec;_0x14aaed[_0x5322c2][_0x3e06f3(0x263)]=_0x5dbcf2;}),_0x1409b7[_0xac02ec(0x1f1)]((_0x1367f6,_0x4746aa)=>{_0x14aaed[_0x4746aa]['maxProducts']=_0x1367f6;}),_0x51cbbf[_0xac02ec(0x1f1)]((_0x1bad42,_0x398d8a)=>{_0x14aaed[_0x398d8a]['unit']=_0x1bad42;}),_0x47628d[_0xac02ec(0x1f1)]((_0x960c14,_0x279730)=>{_0x14aaed[_0x279730]['secondary_unit']=_0x960c14;}),_0x340e8b['forEach']((_0x56962a,_0x2c52ca)=>{var _0x236119=_0xac02ec;_0x14aaed[_0x2c52ca][_0x236119(0x262)]=_0x56962a;}),_0x4857b0['forEach']((_0x3504dd,_0x480b1f)=>{_0x14aaed[_0x480b1f]['expiry_date']=_0x3504dd;}),_0x1b7ece['forEach']((_0x472895,_0x97c274)=>{_0x14aaed[_0x97c274]['maxperunit']=_0x472895;}),_0x2b2619['forEach']((_0x4a8ac3,_0x393852)=>{var _0x46fd69=_0xac02ec;_0x14aaed[_0x393852][_0x46fd69(0x216)]=_0x4a8ac3;}),_0x9fe2ee[_0xac02ec(0x1f1)]((_0x237312,_0x5e3538)=>{var _0x47ad4b=_0xac02ec;_0x14aaed[_0x5e3538][_0x47ad4b(0x230)]=_0x237312;}),_0x578a07[_0xac02ec(0x1f1)]((_0x2e1d51,_0x57843c)=>{var _0x4fec1b=_0xac02ec;_0x14aaed[_0x57843c][_0x4fec1b(0x276)]=_0x2e1d51;}),_0x4a7834['forEach']((_0x320e70,_0x5f140e)=>{var _0x4c6a23=_0xac02ec;_0x14aaed[_0x5f140e][_0x4c6a23(0x23d)]=_0x320e70;});const _0x384a1d=_0x14aaed[_0xac02ec(0x23a)](_0x49b1f1=>_0x49b1f1['to_quantity']!=='0'&&_0x49b1f1[_0xac02ec(0x251)]!==''||_0x49b1f1['to_floorlevel']!=='0'&&_0x49b1f1[_0xac02ec(0x237)]!==''),_0x5710bf=new transfers({'date':_0x1444db,'from_warehouse':_0x29fe08,'to_warehouse':_0x54de03,'product':_0x384a1d,'note':_0x16050d,'invoice':_0x27b125}),_0x25f4f6=await _0x5710bf[_0xac02ec(0x1da)]();_0x124beb[_0xac02ec(0x24a)](_0xac02ec(0x23b),_0xac02ec(0x215)),_0x361352[_0xac02ec(0x242)](_0xac02ec(0x286)+_0x25f4f6[_0xac02ec(0x200)]);}catch(_0xea69fc){console[_0xac02ec(0x243)](_0xea69fc),_0x361352[_0xac02ec(0x22e)](0xc8)[_0xac02ec(0x22c)]({'errorMessage':_0xea69fc[_0xac02ec(0x224)]});}}),router['get']('/preview/:id',auth,async(_0x48d3af,_0x23d115)=>{var _0x1773a2=a0_0x1b9bc1;try{const {username:_0x4c6884,email:_0x5967c9,role:_0x45680e}=_0x48d3af['user'],_0x2f32a3=_0x48d3af[_0x1773a2(0x207)],_0x1a1663=await profile[_0x1773a2(0x28d)]({'email':_0x2f32a3['email']}),_0x4036c5=await master_shop[_0x1773a2(0x220)]();console[_0x1773a2(0x243)](_0x1773a2(0x2b6),_0x4036c5);const _0x2eac4b=await transfers[_0x1773a2(0x288)](_0x48d3af[_0x1773a2(0x2c5)]['id']);let _0x20f67c=new Date(_0x2eac4b['expiry_date']),_0x21e3d5=('0'+_0x20f67c['getDate']())[_0x1773a2(0x266)](-0x2),_0x330d87=('0'+(_0x20f67c['getMonth']()+0x1))[_0x1773a2(0x266)](-0x2),_0x31fab4=_0x20f67c['getFullYear'](),_0x1350a9=_0x31fab4+'-'+_0x330d87+'-'+_0x21e3d5,_0x28efd7;if(_0x2f32a3['role']==_0x1773a2(0x2a2)){const _0x33caf0=await staff[_0x1773a2(0x28d)]({'email':_0x2f32a3['email']});_0x28efd7=await warehouse[_0x1773a2(0x220)]({'status':_0x1773a2(0x24e),'name':_0x33caf0[_0x1773a2(0x1e1)],'warehouse_category':_0x1773a2(0x252)});}else _0x28efd7=await warehouse[_0x1773a2(0x220)]({'status':_0x1773a2(0x24e),'warehouse_category':_0x1773a2(0x252)});const _0x2281f3=await warehouse[_0x1773a2(0x209)]([{'$match':{'name':_0x2eac4b['from_warehouse']}},{'$unwind':_0x1773a2(0x257)},{'$group':{'_id':_0x1773a2(0x25d),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1773a2(0x2a1)},'bay':{'$first':_0x1773a2(0x285)},'bin':{'$first':_0x1773a2(0x239)},'type':{'$first':_0x1773a2(0x2a4)},'floorlevel':{'$first':_0x1773a2(0x231)},'primary_code':{'$first':_0x1773a2(0x2b0)},'secondary_code':{'$first':_0x1773a2(0x2b4)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x1773a2(0x2b7)},'rack':{'$first':_0x1773a2(0x1d9)},'expiry_date':{'$first':_0x1773a2(0x229)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x1773a2(0x293)}}}]);if(_0x4036c5[0x0]['language']==_0x1773a2(0x278)){var _0x6d86bc=users[_0x1773a2(0x24d)];console[_0x1773a2(0x243)](_0x6d86bc);}else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x206))var _0x6d86bc=users[_0x1773a2(0x206)];else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x279))var _0x6d86bc=users['German'];else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x28e))var _0x6d86bc=users['Spanish'];else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x227))var _0x6d86bc=users[_0x1773a2(0x227)];else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x218))var _0x6d86bc=users[_0x1773a2(0x1e0)];else{if(_0x4036c5[0x0]['language']==_0x1773a2(0x297))var _0x6d86bc=users[_0x1773a2(0x297)];else{if(_0x4036c5[0x0][_0x1773a2(0x1e2)]==_0x1773a2(0x27b))var _0x6d86bc=users[_0x1773a2(0x208)];}}}}}}}_0x23d115[_0x1773a2(0x20e)](_0x1773a2(0x1f8),{'success':_0x48d3af[_0x1773a2(0x24a)](_0x1773a2(0x23b)),'errors':_0x48d3af[_0x1773a2(0x24a)](_0x1773a2(0x2be)),'role':_0x2f32a3,'profile':_0x1a1663,'master_shop':_0x4036c5,'warehouse':_0x28efd7,'transfer':_0x2eac4b,'stock':_0x2281f3,'language':_0x6d86bc});}catch(_0x3f8a24){console[_0x1773a2(0x243)](_0x3f8a24);}}),router['post'](a0_0x1b9bc1(0x1e6),auth,async(_0x5892d7,_0x4643c1)=>{var _0x5e9c7b=a0_0x1b9bc1;try{const _0x11fff3=_0x5892d7[_0x5e9c7b(0x2c5)]['id'],{from_warehouse:_0x5a8a57,FromRoom_name:_0xeccd71,to_warehouse:_0x472a4c,ToRoom_name:_0x5d96e3}=_0x5892d7[_0x5e9c7b(0x247)],_0xc2e5c4=await transfers[_0x5e9c7b(0x288)]({'_id':_0x11fff3}),_0x5060cb=_0xc2e5c4[_0x5e9c7b(0x222)]['map'](async _0x32ebc7=>{var _0x361241=_0x5e9c7b;if(_0x32ebc7[_0x361241(0x251)]>0x0){var _0x52627d=await warehouse['findOne']({'name':_0xc2e5c4[_0x361241(0x2c0)],'room':_0x32ebc7['from_room_name'],'warehouse_category':_0x361241(0x252)});const _0x3bdfe8=_0x52627d[_0x361241(0x26b)][_0x361241(0x205)](_0x35f58c=>{var _0x3ea467=_0x361241;_0x35f58c[_0x3ea467(0x1db)]==_0x32ebc7[_0x3ea467(0x1db)]&&_0x35f58c[_0x3ea467(0x2ab)]==_0x32ebc7['from_floorlevel']&&_0x35f58c['type']==_0x32ebc7[_0x3ea467(0x1f9)]&&_0x35f58c[_0x3ea467(0x28a)]==_0x32ebc7['from_bin']&&_0x35f58c[_0x3ea467(0x1e4)]==_0x32ebc7['from_bay']&&_0x35f58c['rack']==_0x32ebc7[_0x3ea467(0x291)]&&_0x35f58c[_0x3ea467(0x29f)]==_0x32ebc7[_0x3ea467(0x249)]&&_0x35f58c[_0x3ea467(0x25f)]==_0x32ebc7[_0x3ea467(0x25f)]&&_0x35f58c[_0x3ea467(0x262)]==_0x32ebc7[_0x3ea467(0x262)]&&_0x35f58c[_0x3ea467(0x216)]==_0x32ebc7[_0x3ea467(0x216)]&&_0x35f58c[_0x3ea467(0x1d6)]==_0x32ebc7[_0x3ea467(0x294)]&&(_0x35f58c[_0x3ea467(0x256)]=_0x35f58c[_0x3ea467(0x256)]-_0x32ebc7['to_quantity']);});}return _0x52627d;});Promise[_0x5e9c7b(0x2c4)](_0x5060cb)[_0x5e9c7b(0x22d)](async _0x5e6bd9=>{var _0x52b86f=_0x5e9c7b;try{for(const _0x28efe2 of _0x5e6bd9){await _0x28efe2[_0x52b86f(0x1da)]();}try{const _0x2c5c00=_0xc2e5c4[_0x52b86f(0x222)][_0x52b86f(0x205)](async _0x431163=>{var _0x46651e=_0x52b86f;if(_0x431163[_0x46651e(0x251)]>0x0){var _0xc555c9=await warehouse[_0x46651e(0x28d)]({'name':_0xc2e5c4['to_warehouse'],'room':_0x431163['to_room_name'],'warehouse_category':_0x46651e(0x252)}),_0xe4541a=0x0;const _0x17316a=_0xc555c9[_0x46651e(0x26b)][_0x46651e(0x205)](_0x305ca5=>{var _0x23b980=_0x46651e;_0x305ca5[_0x23b980(0x1db)]==_0x431163[_0x23b980(0x1db)]&&_0x305ca5[_0x23b980(0x2ab)]==_0x431163['to_floorlevel']&&_0x305ca5['type']==_0x431163[_0x23b980(0x287)]&&_0x305ca5[_0x23b980(0x28a)]==_0x431163[_0x23b980(0x225)]&&_0x305ca5[_0x23b980(0x1e4)]==_0x431163[_0x23b980(0x282)]&&_0x305ca5[_0x23b980(0x1d8)]==_0x431163[_0x23b980(0x1d8)]&&_0x305ca5[_0x23b980(0x29f)]==_0x431163['storage']&&_0x305ca5[_0x23b980(0x25f)]==_0x431163['expiry_date']&&_0x305ca5['batch_code']==_0x431163[_0x23b980(0x262)]&&_0x305ca5[_0x23b980(0x216)]==_0x431163['production_date']&&_0x305ca5['invoice']==_0x431163[_0x23b980(0x2b2)]&&(_0x305ca5[_0x23b980(0x256)]=_0x305ca5[_0x23b980(0x256)]+_0x431163[_0x23b980(0x251)],_0xe4541a++);});_0xe4541a=='0'&&(_0xc555c9[_0x46651e(0x26b)]=_0xc555c9['product_details'][_0x46651e(0x21e)]({'product_name':_0x431163[_0x46651e(0x1db)],'product_stock':_0x431163[_0x46651e(0x251)],'bay':_0x431163['to_bay'],'bin':_0x431163[_0x46651e(0x225)],'type':_0x431163[_0x46651e(0x287)],'floorlevel':_0x431163['to_floorlevel'],'storage':_0x431163[_0x46651e(0x29f)],'rack':_0x431163[_0x46651e(0x1d8)],'product_code':_0x431163[_0x46651e(0x263)],'primary_code':_0x431163[_0x46651e(0x25c)],'secondary_code':_0x431163['secondary_code'],'maxProducts':_0x431163['maxProducts'],'storage':_0x431163['storage'],'rack':_0x431163['rack'],'expiry_date':_0x431163[_0x46651e(0x25f)],'maxPerUnit':_0x431163[_0x46651e(0x1ea)],'batch_code':_0x431163['batch_code'],'production_date':_0x431163[_0x46651e(0x216)]}));}return _0xc555c9;});Promise[_0x52b86f(0x2c4)](_0x2c5c00)[_0x52b86f(0x22d)](async _0x218e90=>{var _0x7474eb=_0x52b86f;try{for(const _0x35198f of _0x218e90){await warehouse[_0x7474eb(0x1ee)]({'_id':_0x35198f[_0x7474eb(0x200)]},{'$addToSet':{'product_details':{'$each':_0x35198f[_0x7474eb(0x26b)]}}});}_0xc2e5c4[_0x7474eb(0x281)]=_0x7474eb(0x1f7);const _0x573bba=await _0xc2e5c4[_0x7474eb(0x1da)](),_0x41b847=await master_shop[_0x7474eb(0x220)](),_0x257629=await email_settings['findOne'](),_0x4d464a=await supervisor_settings[_0x7474eb(0x220)]();var _0x4a52ec=_0xc2e5c4[_0x7474eb(0x222)],_0x3ed0fb='',_0xaf96ab;for(_0xaf96ab in _0x4a52ec){_0x3ed0fb+=_0x7474eb(0x1fa)+_0x7474eb(0x2a0)+_0x4a52ec[_0xaf96ab]['product_name']+_0x7474eb(0x2a9)+_0x7474eb(0x2a0)+_0x4a52ec[_0xaf96ab][_0x7474eb(0x263)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4a52ec[_0xaf96ab][_0x7474eb(0x251)]+'</td>'+_0x7474eb(0x2a0)+_0x4a52ec[_0xaf96ab][_0x7474eb(0x2c7)]+_0x7474eb(0x2a9)+_0x7474eb(0x2a0)+_0x4a52ec[_0xaf96ab][_0x7474eb(0x267)]+'</td>'+_0x7474eb(0x2a0)+_0xc2e5c4[_0x7474eb(0x27d)]+_0x7474eb(0x2a9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4a52ec[_0xaf96ab][_0x7474eb(0x23d)]+_0x7474eb(0x2a9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4a52ec[_0xaf96ab][_0x7474eb(0x29f)]+_0x4a52ec[_0xaf96ab][_0x7474eb(0x1d8)]+_0x4a52ec[_0xaf96ab][_0x7474eb(0x282)]+_0x4a52ec[_0xaf96ab][_0x7474eb(0x225)]+_0x4a52ec[_0xaf96ab][_0x7474eb(0x287)][0x0]+_0x4a52ec[_0xaf96ab]['to_floorlevel']+_0x7474eb(0x2a9),'</tr>';}let _0x38d949=nodemailer[_0x7474eb(0x2b9)]({'host':_0x257629['host'],'port':Number(_0x257629[_0x7474eb(0x1f3)]),'secure':![],'auth':{'user':_0x257629[_0x7474eb(0x214)],'pass':_0x257629['password']}}),_0x3b8e52={'from':_0x257629['email'],'to':_0x4d464a[0x0]['RMSEmail'],'subject':_0x7474eb(0x27e),'attachments':[{'filename':_0x7474eb(0x20d),'path':__dirname+_0x7474eb(0x284)+_0x7474eb(0x201)+_0x41b847[0x0][_0x7474eb(0x28f)],'cid':_0x7474eb(0x221)}],'html':_0x7474eb(0x2ae)+'<html><head><title></title>'+_0x7474eb(0x2b1)+_0x7474eb(0x29a)+_0x7474eb(0x1ec)+'<div>'+_0x7474eb(0x27c)+_0x7474eb(0x26d)+_0x7474eb(0x29a)+'<h2>\x20'+_0x41b847[0x0][_0x7474eb(0x1de)]+'\x20</h2>'+'</div>'+_0x7474eb(0x26d)+_0x7474eb(0x1f2)+_0x7474eb(0x29a)+_0x7474eb(0x2a6)+_0x7474eb(0x203)+_0xc2e5c4['invoice']+'\x20'+_0x7474eb(0x1dc)+_0x7474eb(0x2a7)+_0xc2e5c4[_0x7474eb(0x20f)]+'\x20'+'</span>'+_0x7474eb(0x2c3)+_0x7474eb(0x26d)+_0x7474eb(0x21c)+_0x7474eb(0x246)+'<tr>'+_0x7474eb(0x2a8)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x7474eb(0x273)+_0x7474eb(0x250)+_0x7474eb(0x1ff)+_0x7474eb(0x21f)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x3ed0fb+'\x20'+_0x7474eb(0x25a)+_0x7474eb(0x2b3)+_0x7474eb(0x29a)+_0x7474eb(0x1f5)+_0x7474eb(0x253)+_0x41b847[0x0][_0x7474eb(0x1de)]+_0x7474eb(0x2c3)+_0x7474eb(0x26d)+'</div>'+_0x7474eb(0x204)};_0x38d949[_0x7474eb(0x232)](_0x3b8e52,function(_0x21fc97,_0x1094f9){var _0x2cda4a=_0x7474eb;_0x21fc97?(console['log'](_0x21fc97),console[_0x2cda4a(0x243)](_0x2cda4a(0x21a))):console['log'](_0x2cda4a(0x2ac));}),_0x5892d7[_0x7474eb(0x24a)](_0x7474eb(0x23b),_0x7474eb(0x2b5)),_0x4643c1[_0x7474eb(0x242)](_0x7474eb(0x29d)+_0x573bba[_0x7474eb(0x200)]);}catch(_0x40de8c){console[_0x7474eb(0x269)](_0x40de8c),_0x4643c1[_0x7474eb(0x22e)](0x1f4)[_0x7474eb(0x22c)]({'Perror':_0x7474eb(0x20b),'message':_0x40de8c[_0x7474eb(0x224)]});}})[_0x52b86f(0x228)](_0x489a73=>{var _0x5611d4=_0x52b86f;console[_0x5611d4(0x269)](_0x489a73),_0x4643c1[_0x5611d4(0x22e)](0x1f4)['json']({'Perror':_0x5611d4(0x22a)});});}catch(_0x467a21){_0x4643c1[_0x52b86f(0x22c)](_0x467a21);}}catch(_0x387e6c){console[_0x52b86f(0x269)](_0x387e6c),_0x4643c1[_0x52b86f(0x22e)](0x1f4)[_0x52b86f(0x22c)]({'Merror':_0x52b86f(0x20b),'Message':_0x387e6c[_0x52b86f(0x224)]});}})[_0x5e9c7b(0x228)](_0x5135b0=>{var _0xe99c2d=_0x5e9c7b;console[_0xe99c2d(0x269)](_0x5135b0),_0x4643c1[_0xe99c2d(0x22e)](0x1f4)['json']({'Merror':_0xe99c2d(0x22a)});});}catch(_0x211a3d){console[_0x5e9c7b(0x243)](_0x211a3d);}});function BayBinSelected(_0x5dad57,_0xdf013f){var _0x183851=a0_0x1b9bc1,_0x12e957=[],_0x15a278=[],_0x15e636=[],_0x52f3be=[],_0x62ad96=[],_0xaff19e=[];let _0x650f02=[];if(_0x5dad57==_0x183851(0x240))switch(_0xdf013f){case _0x183851(0x261):_0x12e957=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x15a278=[0x1,0x2],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=['Level',_0x183851(0x27a)],_0x62ad96=['D'],_0xaff19e=['A'];break;case'Rack\x20B':_0x12e957=[0x6,0x5,0x4,0x3,0x2,0x1],_0x15a278=[0x1,0x2],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=[_0x183851(0x29e),_0x183851(0x27a)],_0x62ad96=['D'],_0xaff19e=['B'];break;case _0x183851(0x298):_0x12e957=[0x0],_0x15a278=[0x0],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=['Floor'],_0x62ad96=['D'],_0xaff19e=['S'];break;case'Receiving\x20Area':_0x12e957=[0x0],_0x15a278=[0x0],_0x52f3be=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x15e636=[_0x183851(0x27a)],_0x62ad96=['D'],_0xaff19e=['R'];break;}else{if(_0x5dad57=='COLD\x20STORAGE')switch(_0xdf013f){case'Rack\x20A':_0x12e957=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x15a278=['B','F'],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=['Level',_0x183851(0x27a)],_0x62ad96=['C'],_0xaff19e=['A'];break;case _0x183851(0x234):_0x12e957=[0x5,0x4,0x3,0x2,0x1],_0x15a278=['F','B','S'],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=[_0x183851(0x29e),'Floor'],_0x62ad96=['C'],_0xaff19e=['B'];break;case _0x183851(0x268):_0x12e957=[0x1,0x2,0x3,0x4,0x5],_0x15a278=['B','F','S'],_0x52f3be=[0x5,0x4,0x3,0x2,0x1],_0x15e636=['Level','Floor'],_0x62ad96=['C'],_0xaff19e=['C'];break;case _0x183851(0x24b):_0x12e957=[0x5,0x4,0x3,0x2,0x1],_0x15a278=['F','B','S'],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=[_0x183851(0x29e),'Floor'],_0x62ad96=['C'],_0xaff19e=['D'];break;case _0x183851(0x292):_0x12e957=[0x4,0x3,0x2,0x1],_0x15a278=[0x1,0x2],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=['Level',_0x183851(0x27a)],_0x62ad96=['C'],_0xaff19e=['E'];break;case _0x183851(0x264):_0x12e957=[0x1,0x2,0x3],_0x15a278=[0x1,0x2],_0x52f3be=[0x1,0x2,0x3,0x4,0x5],_0x15e636=[_0x183851(0x29e)],_0x62ad96=['C'],_0xaff19e=['F'];break;}}return{'levels':_0x12e957,'Isle':_0x15a278,'rack':_0x52f3be,'type':_0x15e636,'storage':_0x62ad96,'rak':_0xaff19e};}router[a0_0x1b9bc1(0x233)]('/view/:id',auth,async(_0x3cbe8c,_0x337412)=>{var _0x10f16d=a0_0x1b9bc1;try{const {username:_0x2e2b50,email:_0x2cc035,role:_0x120b61}=_0x3cbe8c[_0x10f16d(0x207)],_0x7b62b2=_0x3cbe8c['user'],_0x15709f=await profile[_0x10f16d(0x28d)]({'email':_0x7b62b2[_0x10f16d(0x214)]}),_0x3d1d04=await master_shop['find'](),_0x114cd1=await transfers[_0x10f16d(0x288)](_0x3cbe8c['params']['id']);let _0x2ba675;if(_0x7b62b2['role']=='staff'){const _0x55c27c=await staff[_0x10f16d(0x28d)]({'email':_0x7b62b2['email']});_0x2ba675=await warehouse[_0x10f16d(0x209)]([{'$match':{'status':_0x10f16d(0x24e),'name':_0x55c27c['warehouse'],'warehouse_category':_0x10f16d(0x252)}},{'$group':{'_id':_0x10f16d(0x289),'name':{'$first':'$name'}}}]);}else _0x2ba675=await warehouse[_0x10f16d(0x209)]([{'$match':{'status':_0x10f16d(0x24e),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x10f16d(0x289)}}}]);const _0x2c249d=await warehouse[_0x10f16d(0x209)]([{'$match':{'name':_0x114cd1[_0x10f16d(0x2c0)],'warehouse_category':_0x10f16d(0x252)}},{'$unwind':_0x10f16d(0x257)},{'$group':{'_id':_0x10f16d(0x25d),'name':{'$first':_0x10f16d(0x22b)},'product_stock':{'$first':_0x10f16d(0x2a1)},'bay':{'$first':_0x10f16d(0x285)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x10f16d(0x2a4)},'floorlevel':{'$first':_0x10f16d(0x231)},'primary_code':{'$first':_0x10f16d(0x2b0)},'secondary_code':{'$first':_0x10f16d(0x2b4)},'product_code':{'$first':_0x10f16d(0x241)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x10f16d(0x229)},'production_date':{'$first':_0x10f16d(0x25b)},'room':{'$first':_0x10f16d(0x293)}}}]),_0x5c4c28=await product[_0x10f16d(0x220)]({}),_0x3b6978=BayBinSelected(_0x114cd1[_0x10f16d(0x27d)],_0x114cd1['to_room']);if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]=='English\x20(US)'){var _0x35e2e8=users[_0x10f16d(0x24d)];console[_0x10f16d(0x243)](_0x35e2e8);}else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x206))var _0x35e2e8=users['Hindi'];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x279))var _0x35e2e8=users[_0x10f16d(0x279)];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x28e))var _0x35e2e8=users[_0x10f16d(0x28e)];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x227))var _0x35e2e8=users[_0x10f16d(0x227)];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x218))var _0x35e2e8=users['Portuguese'];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x297))var _0x35e2e8=users[_0x10f16d(0x297)];else{if(_0x3d1d04[0x0][_0x10f16d(0x1e2)]==_0x10f16d(0x27b))var _0x35e2e8=users[_0x10f16d(0x208)];}}}}}}}_0x337412[_0x10f16d(0x20e)](_0x10f16d(0x274),{'success':_0x3cbe8c['flash']('success'),'errors':_0x3cbe8c['flash'](_0x10f16d(0x2be)),'role':_0x7b62b2,'profile':_0x15709f,'master_shop':_0x3d1d04,'warehouse':_0x2ba675,'transfer':_0x114cd1,'stock':_0x2c249d,'unit':_0x5c4c28,'language':_0x35e2e8});}catch(_0x39d126){console[_0x10f16d(0x243)](_0x39d126);}}),router['post'](a0_0x1b9bc1(0x1ed),auth,async(_0x4870b1,_0x55b0cb)=>{var _0x386e2b=a0_0x1b9bc1;try{const _0x9676a2=_0x4870b1['params']['id'],_0x535c83=await transfers[_0x386e2b(0x288)](_0x9676a2);_0x55b0cb[_0x386e2b(0x22c)](_0x4870b1[_0x386e2b(0x247)]);return;const {date:_0x66a80c,from_warehouse:_0x240f62,FromRoom_name:_0x28dad2,to_warehouse:_0x438979,ToRoom_name:_0x1b7a1c,prod_name:_0x5cd3b3,from_prod_qty:_0x144b4,from_prod_level:_0x2f1f78,from_prod_isle:_0x5b3235,from_prod_pallet:_0x2541ed,to_prod_qty:_0x3ae66c,to_prod_level:_0x50c9ba,to_prod_isle:_0x45e157,to_prod_pallet:_0x438f05,primary_code:_0x5738a8,secondary_code:_0x3c6c4a,product_code3:_0x31f2a9,note:_0x5d48df,invoice:_0x2b2293,expiry_date:_0x624100}=_0x4870b1[_0x386e2b(0x247)];if(typeof _0x5cd3b3==_0x386e2b(0x2bd))var _0x278ff3=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x1dd)]],_0x58d735=[_0x4870b1['body']['from_prod_qty']],_0x3d6671=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x2b8)]],_0x446916=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x24f)]],_0x12bac7=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x277)]],_0x351f53=[_0x4870b1[_0x386e2b(0x247)]['from_types']],_0xf1d738=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x1e5)]],_0xabebb4=[_0x4870b1['body'][_0x386e2b(0x235)]],_0x2a04ca=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x226)]],_0xb5c271=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x296)]],_0x2110a8=[_0x4870b1['body'][_0x386e2b(0x287)]],_0x4b1e25=[_0x4870b1['body'][_0x386e2b(0x29f)]],_0x390509=[_0x4870b1[_0x386e2b(0x247)]['rak']],_0x300f11=[_0x4870b1[_0x386e2b(0x247)]['primary_code']],_0x46aef8=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x25e)]],_0x5e4e68=[_0x4870b1['body'][_0x386e2b(0x1eb)]],_0x29d3d=[_0x4870b1['body'][_0x386e2b(0x2ba)]],_0x55ab76=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x2c7)]],_0x46cbe0=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x267)]],_0x3ea8be=[_0x4870b1['body'][_0x386e2b(0x262)]],_0x5d2106=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x25f)]],_0x2306af=[_0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x249)]],_0x357ea0=[_0x4870b1['body'][_0x386e2b(0x27f)]];else var _0x278ff3=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x1dd)]],_0x4b1e25=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x29f)]],_0x390509=[..._0x4870b1[_0x386e2b(0x247)]['rak']],_0x351f53=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x1f9)]],_0x2110a8=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x287)]],_0x58d735=[..._0x4870b1['body'][_0x386e2b(0x24c)]],_0x3d6671=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x2b8)]],_0x446916=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x24f)]],_0x12bac7=[..._0x4870b1['body'][_0x386e2b(0x277)]],_0xf1d738=[..._0x4870b1[_0x386e2b(0x247)]['to_prod_qty']],_0xabebb4=[..._0x4870b1['body'][_0x386e2b(0x235)]],_0x2a04ca=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x226)]],_0xb5c271=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x296)]],_0x300f11=[..._0x4870b1[_0x386e2b(0x247)]['primary_code']],_0x46aef8=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x25e)]],_0x5e4e68=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x1eb)]],_0x29d3d=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x2ba)]],_0x55ab76=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x2c7)]],_0x46cbe0=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x267)]],_0x3ea8be=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x262)]],_0x5d2106=[..._0x4870b1[_0x386e2b(0x247)][_0x386e2b(0x25f)]],_0x2306af=[..._0x4870b1[_0x386e2b(0x247)]['from_storage']],_0x357ea0=[..._0x4870b1[_0x386e2b(0x247)]['from_rak']];const _0x99defe=_0x278ff3[_0x386e2b(0x205)](_0xea8122=>{return _0xea8122={'product_name':_0xea8122};});_0x58d735[_0x386e2b(0x1f1)]((_0x33d582,_0x608688)=>{var _0x239060=_0x386e2b;_0x99defe[_0x608688][_0x239060(0x1f6)]=_0x33d582;}),_0x3d6671[_0x386e2b(0x1f1)]((_0x6a1643,_0x2ab56b)=>{var _0xf982a8=_0x386e2b;_0x99defe[_0x2ab56b][_0xf982a8(0x213)]=_0x6a1643;}),_0x446916['forEach']((_0x4aac48,_0x227acc)=>{var _0xca62c=_0x386e2b;_0x99defe[_0x227acc][_0xca62c(0x259)]=_0x4aac48;}),_0x12bac7[_0x386e2b(0x1f1)]((_0x2e4af6,_0x568fe2)=>{var _0x1598dd=_0x386e2b;_0x99defe[_0x568fe2][_0x1598dd(0x1e7)]=_0x2e4af6;}),_0xf1d738['forEach']((_0x16215b,_0x280c83)=>{var _0x9b04e6=_0x386e2b;_0x99defe[_0x280c83][_0x9b04e6(0x251)]=_0x16215b;}),_0xabebb4[_0x386e2b(0x1f1)]((_0x1b7518,_0x43f453)=>{var _0x32feec=_0x386e2b;_0x99defe[_0x43f453][_0x32feec(0x282)]=_0x1b7518;}),_0x2a04ca[_0x386e2b(0x1f1)]((_0x27dcd0,_0x3f16f1)=>{var _0x5bbcd4=_0x386e2b;_0x99defe[_0x3f16f1][_0x5bbcd4(0x225)]=_0x27dcd0;}),_0xb5c271[_0x386e2b(0x1f1)]((_0x2203b1,_0x29b580)=>{var _0x338cbf=_0x386e2b;_0x99defe[_0x29b580][_0x338cbf(0x237)]=_0x2203b1;}),_0x300f11[_0x386e2b(0x1f1)]((_0xe00661,_0x522186)=>{_0x99defe[_0x522186]['primary_code']=_0xe00661;}),_0x46aef8['forEach']((_0x8feac3,_0x1c9b99)=>{var _0x2399dc=_0x386e2b;_0x99defe[_0x1c9b99][_0x2399dc(0x25e)]=_0x8feac3;}),_0x5e4e68[_0x386e2b(0x1f1)]((_0x507172,_0x22e871)=>{var _0x5a5d95=_0x386e2b;_0x99defe[_0x22e871][_0x5a5d95(0x263)]=_0x507172;}),_0x29d3d[_0x386e2b(0x1f1)]((_0x1a134d,_0x3e6da5)=>{var _0x4da9cc=_0x386e2b;_0x99defe[_0x3e6da5][_0x4da9cc(0x2bf)]=_0x1a134d;}),_0x55ab76['forEach']((_0x2b169c,_0x5a6d7c)=>{var _0x5463e2=_0x386e2b;_0x99defe[_0x5a6d7c][_0x5463e2(0x2c7)]=_0x2b169c;}),_0x46cbe0[_0x386e2b(0x1f1)]((_0x4db788,_0x517948)=>{var _0x223637=_0x386e2b;_0x99defe[_0x517948][_0x223637(0x267)]=_0x4db788;}),_0x3ea8be[_0x386e2b(0x1f1)]((_0x5af3ba,_0x1a1d46)=>{var _0x16f5ea=_0x386e2b;_0x99defe[_0x1a1d46][_0x16f5ea(0x262)]=_0x5af3ba;}),_0x5d2106['forEach']((_0x455b62,_0x188cf9)=>{_0x99defe[_0x188cf9]['expiry_date']=_0x455b62;}),_0x4b1e25[_0x386e2b(0x1f1)]((_0xe3b390,_0x2ea2d6)=>{var _0xb6530f=_0x386e2b;_0x99defe[_0x2ea2d6][_0xb6530f(0x29f)]=_0xe3b390;}),_0x390509[_0x386e2b(0x1f1)]((_0x4201df,_0x3ea8cf)=>{var _0x1a9c9c=_0x386e2b;_0x99defe[_0x3ea8cf][_0x1a9c9c(0x1d8)]=_0x4201df;}),_0x351f53['forEach']((_0x21c564,_0x5b6633)=>{var _0x2412ef=_0x386e2b;_0x99defe[_0x5b6633][_0x2412ef(0x1f9)]=_0x21c564;}),_0x2110a8[_0x386e2b(0x1f1)]((_0x56ce30,_0x2feb91)=>{var _0x480bd6=_0x386e2b;_0x99defe[_0x2feb91][_0x480bd6(0x287)]=_0x56ce30;}),_0x2306af[_0x386e2b(0x1f1)]((_0x46143d,_0x47fca8)=>{_0x99defe[_0x47fca8]['from_storage']=_0x46143d;}),_0x357ea0[_0x386e2b(0x1f1)]((_0xfab080,_0x155aaf)=>{var _0x5ec124=_0x386e2b;_0x99defe[_0x155aaf][_0x5ec124(0x291)]=_0xfab080;});const _0x5cdff3=_0x99defe['filter'](_0x3e5035=>_0x3e5035[_0x386e2b(0x251)]!=='0'&&_0x3e5035[_0x386e2b(0x251)]!==''||_0x3e5035[_0x386e2b(0x237)]!=='0'&&_0x3e5035[_0x386e2b(0x237)]!=='');var _0x7f1700=0x0;_0x5cdff3[_0x386e2b(0x1f1)](_0x5b62d7=>{var _0x5e2ce2=_0x386e2b;parseInt(_0x5b62d7[_0x5e2ce2(0x1f6)])<parseInt(_0x5b62d7[_0x5e2ce2(0x251)])&&_0x7f1700++;});if(_0x7f1700!=0x0)return _0x4870b1[_0x386e2b(0x24a)](_0x386e2b(0x2be),_0x386e2b(0x2aa)),_0x55b0cb[_0x386e2b(0x242)](_0x386e2b(0x1f0));const _0x19d55d=await warehouse[_0x386e2b(0x28d)]({'name':_0x535c83[_0x386e2b(0x2c0)],'room':_0x535c83[_0x386e2b(0x23e)]});_0x535c83[_0x386e2b(0x222)][_0x386e2b(0x1f1)](_0x5333cb=>{var _0xd588e2=_0x386e2b;if(_0x5333cb[_0xd588e2(0x251)]>0x0){const _0x2246d9=_0x19d55d[_0xd588e2(0x26b)][_0xd588e2(0x205)](_0x4e1c76=>{var _0x36a5f1=_0xd588e2;_0x4e1c76['product_name']==_0x5333cb[_0x36a5f1(0x1db)]&&_0x4e1c76[_0x36a5f1(0x2ab)]==_0x5333cb['from_floorlevel']&&_0x4e1c76[_0x36a5f1(0x26f)]==_0x5333cb['from_types']&&_0x4e1c76[_0x36a5f1(0x28a)]==_0x5333cb['from_bin']&&_0x4e1c76['bay']==_0x5333cb[_0x36a5f1(0x213)]&&_0x4e1c76[_0x36a5f1(0x1d8)]==_0x5333cb['from_rack']&&_0x4e1c76['storage']==_0x5333cb['from_storage']&&(_0x4e1c76[_0x36a5f1(0x256)]=parseInt(_0x4e1c76[_0x36a5f1(0x256)])+parseInt(_0x5333cb[_0x36a5f1(0x251)]));});}}),await _0x19d55d[_0x386e2b(0x1da)]();const _0x2291ff=await warehouse['findOne']({'name':_0x535c83[_0x386e2b(0x27d)],'room':_0x535c83[_0x386e2b(0x1f4)]});_0x535c83[_0x386e2b(0x222)]['forEach'](_0x88c9fd=>{var _0x6a77ee=_0x386e2b;if(_0x88c9fd[_0x6a77ee(0x251)]>0x0){const _0x5368b9=_0x2291ff[_0x6a77ee(0x26b)][_0x6a77ee(0x205)](_0x1a0bac=>{var _0x37de97=_0x6a77ee;_0x1a0bac[_0x37de97(0x1db)]==_0x88c9fd[_0x37de97(0x1db)]&&_0x1a0bac[_0x37de97(0x2ab)]==_0x88c9fd[_0x37de97(0x237)]&&_0x1a0bac[_0x37de97(0x26f)]==_0x88c9fd['to_types']&&_0x1a0bac['bin']==_0x88c9fd['to_bin']&&_0x1a0bac[_0x37de97(0x1e4)]==_0x88c9fd[_0x37de97(0x282)]&&_0x1a0bac['rack']==_0x88c9fd['rack']&&_0x1a0bac['storage']==_0x88c9fd['storage']&&(_0x1a0bac['product_stock']=parseInt(_0x1a0bac[_0x37de97(0x256)])-parseInt(_0x88c9fd['to_quantity']));});}}),await _0x2291ff[_0x386e2b(0x1da)](),_0x535c83['date']=_0x66a80c,_0x535c83[_0x386e2b(0x2c0)]=_0x240f62,_0x535c83[_0x386e2b(0x27d)]=_0x438979,_0x535c83[_0x386e2b(0x222)]=_0x5cdff3,_0x535c83[_0x386e2b(0x299)]=_0x5d48df,_0x535c83[_0x386e2b(0x1d6)]=_0x2b2293;const _0x2936c0=await _0x535c83['save']();console[_0x386e2b(0x243)](_0x2936c0);const _0x1c472f=await warehouse[_0x386e2b(0x28d)]({'name':_0x240f62,'room':_0x28dad2});_0x2936c0['product']['forEach'](_0x498e33=>{var _0x133bf4=_0x386e2b;if(_0x498e33[_0x133bf4(0x251)]>0x0){const _0x1fc19d=_0x1c472f[_0x133bf4(0x26b)]['map'](_0xb83744=>{var _0x7df37b=_0x133bf4;_0xb83744[_0x7df37b(0x1db)]==_0x498e33['product_name']&&_0xb83744[_0x7df37b(0x2ab)]==_0x498e33[_0x7df37b(0x1e7)]&&_0xb83744['type']==_0x498e33[_0x7df37b(0x1f9)]&&_0xb83744[_0x7df37b(0x28a)]==_0x498e33[_0x7df37b(0x259)]&&_0xb83744['bay']==_0x498e33[_0x7df37b(0x213)]&&_0xb83744['rack']==_0x498e33[_0x7df37b(0x291)]&&_0xb83744[_0x7df37b(0x29f)]==_0x498e33[_0x7df37b(0x249)]&&(_0xb83744[_0x7df37b(0x256)]=parseInt(_0xb83744[_0x7df37b(0x256)])-parseInt(_0x498e33[_0x7df37b(0x251)]));});}}),await _0x1c472f[_0x386e2b(0x1da)]();const _0x58455b=await warehouse[_0x386e2b(0x28d)]({'name':_0x438979,'room':_0x1b7a1c});_0x2936c0[_0x386e2b(0x222)]['forEach'](_0x11f360=>{var _0x4b65cf=_0x386e2b;if(_0x11f360[_0x4b65cf(0x251)]>0x0){var _0xa69985=0x0;const _0x533c9e=_0x58455b[_0x4b65cf(0x26b)]['map'](_0xa81840=>{var _0x55a2e9=_0x4b65cf;_0xa81840['product_name']==_0x11f360[_0x55a2e9(0x1db)]&&_0xa81840[_0x55a2e9(0x2ab)]==_0x11f360[_0x55a2e9(0x237)]&&_0xa81840[_0x55a2e9(0x26f)]==_0x11f360[_0x55a2e9(0x287)]&&_0xa81840[_0x55a2e9(0x28a)]==_0x11f360[_0x55a2e9(0x225)]&&_0xa81840[_0x55a2e9(0x1e4)]==_0x11f360[_0x55a2e9(0x282)]&&_0xa81840[_0x55a2e9(0x1d8)]==_0x11f360[_0x55a2e9(0x1d8)]&&_0xa81840[_0x55a2e9(0x29f)]==_0x11f360['storage']&&(_0xa81840[_0x55a2e9(0x256)]=parseInt(_0xa81840[_0x55a2e9(0x256)])+parseInt(_0x11f360['to_quantity']),_0xa69985++);});_0xa69985=='0'&&(_0x58455b[_0x4b65cf(0x26b)]=_0x58455b[_0x4b65cf(0x26b)][_0x4b65cf(0x21e)]({'product_name':_0x11f360[_0x4b65cf(0x1db)],'product_stock':_0x11f360[_0x4b65cf(0x251)],'bay':_0x11f360[_0x4b65cf(0x282)],'bin':_0x11f360[_0x4b65cf(0x225)],'type':_0x11f360['to_types'],'floorlevel':_0x11f360['to_floorlevel'],'storage':_0x11f360['storage'],'rack':_0x11f360[_0x4b65cf(0x1d8)],'product_code':_0x11f360[_0x4b65cf(0x263)],'primary_code':_0x11f360[_0x4b65cf(0x25c)],'secondary_code':_0x11f360[_0x4b65cf(0x25e)],'maxProducts':_0x11f360[_0x4b65cf(0x2bf)],'storage':_0x11f360[_0x4b65cf(0x29f)],'rack':_0x11f360['rack']}));}}),await _0x58455b[_0x386e2b(0x1da)](),_0x4870b1[_0x386e2b(0x24a)](_0x386e2b(0x23b),'Transfer\x20Edit\x20Successfully'),_0x55b0cb[_0x386e2b(0x242)](_0x386e2b(0x2bb));}catch(_0x24305f){console[_0x386e2b(0x243)](_0x24305f);}}),router['post'](a0_0x1b9bc1(0x1fc),async(_0x15a449,_0x23055a)=>{var _0x1869ad=a0_0x1b9bc1;const {FromWareHouse:_0x2b7140,FromRoom:_0x2febdd,ToWarehouse:_0x110b16,ToRoom:_0x596db3,primary_code:_0x15d1b9,Roomslist:_0x3528c4}=_0x15a449[_0x1869ad(0x247)],_0x4c4b66=_0x3528c4[_0x1869ad(0x29c)](','),_0x5f3698=[];async function _0x99b2bd(_0xe90000){var _0x2b4909=_0x1869ad;const _0x50a725=await warehouse['aggregate']([{'$match':{'name':_0x2b7140,'room':_0xe90000}},{'$unwind':_0x2b4909(0x257)},{'$match':{'product_details.primary_code':_0x15d1b9}},{'$group':{'_id':_0x2b4909(0x25d),'name':{'$first':_0x2b4909(0x22b)},'instock':{'$first':_0x2b4909(0x2a1)},'primary_code':{'$first':_0x2b4909(0x2b0)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2b4909(0x241)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x2b4909(0x239)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x2b4909(0x231)},'unit':{'$first':_0x2b4909(0x1e8)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x2b4909(0x1d9)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x2b4909(0x25b)},'batch_code':{'$first':_0x2b4909(0x2ad)},'maxPerUnit':{'$first':_0x2b4909(0x2a3)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x2b4909(0x1fe)}}}]),_0x278137=await warehouse[_0x2b4909(0x209)]([{'$match':{'name':_0x2b7140,'room':_0xe90000}},{'$unwind':_0x2b4909(0x257)},{'$match':{'product_details.secondary_code':_0x15d1b9}},{'$group':{'_id':_0x2b4909(0x25d),'name':{'$first':_0x2b4909(0x22b)},'instock':{'$first':_0x2b4909(0x2a1)},'primary_code':{'$first':_0x2b4909(0x2b0)},'secondary_code':{'$first':_0x2b4909(0x2b4)},'product_code':{'$first':_0x2b4909(0x241)},'level':{'$first':_0x2b4909(0x285)},'isle':{'$first':_0x2b4909(0x239)},'type':{'$first':_0x2b4909(0x2a4)},'pallet':{'$first':_0x2b4909(0x231)},'unit':{'$first':_0x2b4909(0x1e8)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x2b4909(0x2b7)},'rack':{'$first':_0x2b4909(0x1d9)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x2b4909(0x2a3)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x2b4909(0x293)},'maxProducts':{'$first':_0x2b4909(0x1fe)}}}]);if(_0x50a725['length']>0x0)_0x5f3698[_0x2b4909(0x23f)](_0x50a725);else _0x278137[_0x2b4909(0x20a)]>0x0&&_0x5f3698[_0x2b4909(0x23f)](_0x278137);}const _0x299751=_0x4c4b66['map'](_0x5c3f06=>_0x99b2bd(_0x5c3f06));await Promise[_0x1869ad(0x2c4)](_0x299751),_0x23055a[_0x1869ad(0x22c)](_0x5f3698);}),router[a0_0x1b9bc1(0x265)](a0_0x1b9bc1(0x295),async(_0x12f6de,_0x118c27)=>{var _0x1d300c=a0_0x1b9bc1;try{const {FromWareHouse:_0x5a2e22,FromRoom:_0x5b26e1,ToWarehouse:_0x101d75,ToRoom:_0x2adaf1,secondary_code:_0x3e3319}=_0x12f6de[_0x1d300c(0x247)],_0x251911=await warehouse[_0x1d300c(0x209)]([{'$match':{'name':_0x5a2e22}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x3e3319}},{'$group':{'_id':_0x1d300c(0x25d),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x1d300c(0x2b0)},'secondary_code':{'$first':_0x1d300c(0x2b4)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':_0x1d300c(0x2a1)},'warehouse':{'$first':'$name'},'level':{'$first':_0x1d300c(0x211)},'isle':{'$first':_0x1d300c(0x29b)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x1d300c(0x1e8)}}}]);_0x118c27[_0x1d300c(0x22e)](0xc8)['json'](_0x251911);}catch(_0x1e8954){_0x118c27[_0x1d300c(0x22e)](0x194)['json']({'message':_0x1e8954[_0x1d300c(0x224)]});}}),router[a0_0x1b9bc1(0x265)]('/barcode_scanner3',async(_0x3d0027,_0xc24798)=>{var _0x4347c4=a0_0x1b9bc1;try{const {FromWareHouse:_0x1a7888,FromRoom:_0x4b2699,ToWarehouse:_0x40283e,ToRoom:_0x3861a3,product_code:_0x290a78}=_0x3d0027[_0x4347c4(0x247)],_0xb4a96c=await warehouse[_0x4347c4(0x209)]([{'$match':{'name':_0x1a7888}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x290a78}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x4347c4(0x22b)},'primary_code':{'$first':_0x4347c4(0x2b0)},'secondary_code':{'$first':_0x4347c4(0x2b4)},'product_code':{'$first':_0x4347c4(0x241)},'instock':{'$first':_0x4347c4(0x2a1)},'warehouse':{'$first':_0x4347c4(0x289)},'level':{'$first':'$product_details.level'},'isle':{'$first':_0x4347c4(0x29b)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x4347c4(0x1fe)},'unit':{'$first':_0x4347c4(0x1e8)}}}]);_0xc24798[_0x4347c4(0x22e)](0xc8)['json'](_0xb4a96c);}catch(_0x597676){_0xc24798[_0x4347c4(0x22e)](0x194)[_0x4347c4(0x22c)]({'message':_0x597676['message']});}}),router[a0_0x1b9bc1(0x265)](a0_0x1b9bc1(0x245),async(_0x4b1788,_0x5872d6)=>{var _0x563c92=a0_0x1b9bc1;const {level:_0x1a216e,isle:_0x38e937,pallet:_0x3ba7f4,warehouses:_0x74887f,room:_0x482075}=_0x4b1788['body'];try{const _0x9e9ed9=await warehouse['aggregate']([{'$match':{'name':_0x74887f,'room':_0x482075}},{'$unwind':_0x563c92(0x257)},{'$match':{'product_details.level':parseInt(_0x1a216e),'product_details.isle':_0x38e937,'product_details.pallet':parseInt(_0x3ba7f4)}},{'$group':{'_id':_0x563c92(0x25d),'name':{'$first':_0x563c92(0x22b)},'product_stock':{'$first':_0x563c92(0x2a1)},'level':{'$first':'$product_details.level'},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x563c92(0x255)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x5872d6[_0x563c92(0x22e)](0xc8)[_0x563c92(0x22c)](_0x9e9ed9);}catch(_0x3ab395){_0x5872d6['status'](0x194)[_0x563c92(0x22c)]({'message':_0x3ab395[_0x563c92(0x224)]});}}),module[a0_0x1b9bc1(0x26e)]=router;