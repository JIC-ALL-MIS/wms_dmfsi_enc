var a0_0xee4a5a=a0_0x53d9;function a0_0x53d9(_0xe39b76,_0x2c0ba6){var _0x10e0e1=a0_0x10e0();return a0_0x53d9=function(_0x53d994,_0x2147d6){_0x53d994=_0x53d994-0x1aa;var _0x10d0b3=_0x10e0e1[_0x53d994];return _0x10d0b3;},a0_0x53d9(_0xe39b76,_0x2c0ba6);}(function(_0x53427c,_0x13caa5){var _0x5e7b2c=a0_0x53d9,_0x22cea8=_0x53427c();while(!![]){try{var _0x49cdfa=parseInt(_0x5e7b2c(0x1e1))/0x1+-parseInt(_0x5e7b2c(0x203))/0x2+-parseInt(_0x5e7b2c(0x1ff))/0x3*(parseInt(_0x5e7b2c(0x27e))/0x4)+parseInt(_0x5e7b2c(0x296))/0x5+-parseInt(_0x5e7b2c(0x271))/0x6*(-parseInt(_0x5e7b2c(0x276))/0x7)+parseInt(_0x5e7b2c(0x23b))/0x8*(-parseInt(_0x5e7b2c(0x20b))/0x9)+-parseInt(_0x5e7b2c(0x20a))/0xa*(-parseInt(_0x5e7b2c(0x265))/0xb);if(_0x49cdfa===_0x13caa5)break;else _0x22cea8['push'](_0x22cea8['shift']());}catch(_0x2d2430){_0x22cea8['push'](_0x22cea8['shift']());}}}(a0_0x10e0,0x25e05));const express=require(a0_0xee4a5a(0x1cd)),app=express(),router=express[a0_0xee4a5a(0x1d7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0xee4a5a(0x25b)),auth=require(a0_0xee4a5a(0x239)),users=require('../public/language/languages.json'),nodemailer=require(a0_0xee4a5a(0x1d4));router[a0_0xee4a5a(0x208)](a0_0xee4a5a(0x295),auth,async(_0x25bce8,_0x11cc7c)=>{var _0x15c29d=a0_0xee4a5a;try{const {username:_0x57167e,email:_0x5bd0df,role:_0x16fcfd}=_0x25bce8['user'],_0x2ee339=_0x25bce8[_0x15c29d(0x1ed)],_0x577154=await profile[_0x15c29d(0x1f9)]({'email':_0x2ee339[_0x15c29d(0x292)]}),_0x4fe2a5=await master_shop['find']();console[_0x15c29d(0x1c1)](_0x15c29d(0x22e),_0x4fe2a5);let _0x4296f0;if(_0x2ee339[_0x15c29d(0x1fc)]=='staff'){const _0x949a=await staff[_0x15c29d(0x1f9)]({'email':_0x2ee339['email']});_0x4296f0=await transfers[_0x15c29d(0x1ea)]({'from_warehouse':_0x949a[_0x15c29d(0x222)]});}else _0x4296f0=await transfers[_0x15c29d(0x273)]([{'$unwind':_0x15c29d(0x263)},{'$group':{'_id':'$_id','invoice':{'$first':_0x15c29d(0x1d9)},'date':{'$first':_0x15c29d(0x1fd)},'from_warehouse':{'$first':_0x15c29d(0x29c)},'to_warehouse':{'$first':_0x15c29d(0x27d)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x15c29d(0x28c)},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x4fe2a5[0x0][_0x15c29d(0x233)]==_0x15c29d(0x1e7)){var _0x232417=users[_0x15c29d(0x27c)];console[_0x15c29d(0x1c1)](_0x232417);}else{if(_0x4fe2a5[0x0][_0x15c29d(0x233)]==_0x15c29d(0x20f))var _0x232417=users['Hindi'];else{if(_0x4fe2a5[0x0][_0x15c29d(0x233)]==_0x15c29d(0x1b1))var _0x232417=users[_0x15c29d(0x1b1)];else{if(_0x4fe2a5[0x0]['language']==_0x15c29d(0x275))var _0x232417=users['Spanish'];else{if(_0x4fe2a5[0x0][_0x15c29d(0x233)]=='French')var _0x232417=users[_0x15c29d(0x235)];else{if(_0x4fe2a5[0x0][_0x15c29d(0x233)]==_0x15c29d(0x20d))var _0x232417=users[_0x15c29d(0x1b2)];else{if(_0x4fe2a5[0x0]['language']==_0x15c29d(0x250))var _0x232417=users['Chinese'];else{if(_0x4fe2a5[0x0][_0x15c29d(0x233)]==_0x15c29d(0x22a))var _0x232417=users['Arabic'];}}}}}}}_0x11cc7c['render'](_0x15c29d(0x1be),{'success':_0x25bce8[_0x15c29d(0x1de)](_0x15c29d(0x231)),'errors':_0x25bce8['flash']('errors'),'role':_0x2ee339,'profile':_0x577154,'master_shop':_0x4fe2a5,'transfer':_0x4296f0,'language':_0x232417});}catch(_0x439f13){console['log'](_0x439f13);}});async function getRandom8DigitNumber(){var _0x3ff363=a0_0xee4a5a;const _0x22be99=0x989680,_0x17c0c6=0x5f5e0ff,_0x53dd35=Math[_0x3ff363(0x2a2)](Math[_0x3ff363(0x210)]()*(_0x17c0c6-_0x22be99+0x1))+_0x22be99;var _0x5dfa85;const _0x157623=await transfers[_0x3ff363(0x1f9)]({'invoice':_0x3ff363(0x266)+_0x53dd35});return _0x157623&&_0x157623['length']>0x0?_0x5dfa85='TRF-'+_0x53dd35:_0x5dfa85=_0x3ff363(0x266)+_0x53dd35,_0x5dfa85;}router[a0_0xee4a5a(0x208)](a0_0xee4a5a(0x23a),auth,async(_0x3d09a5,_0x3f0200)=>{var _0x3ec132=a0_0xee4a5a;try{const {username:_0x4027ec,email:_0x49a347,role:_0x4bccfc}=_0x3d09a5[_0x3ec132(0x1ed)],_0x270b96=_0x3d09a5[_0x3ec132(0x1ed)],_0x131c1d=await profile[_0x3ec132(0x1f9)]({'email':_0x270b96[_0x3ec132(0x292)]}),_0x35b5f2=await master_shop[_0x3ec132(0x1ea)]();console[_0x3ec132(0x1c1)](_0x3ec132(0x22e),_0x35b5f2);let _0x34a7f9;if(_0x270b96['role']==_0x3ec132(0x1d1)){const _0x37a896=await staff[_0x3ec132(0x1f9)]({'email':_0x270b96[_0x3ec132(0x292)]});_0x34a7f9=await warehouse[_0x3ec132(0x273)]([{'$match':{'status':_0x3ec132(0x243),'name':_0x37a896['warehouse'],'warehouse_category':_0x3ec132(0x1da)}},{'$group':{'_id':'$name','name':{'$first':_0x3ec132(0x1cb)}}}]);}else _0x34a7f9=await warehouse[_0x3ec132(0x273)]([{'$match':{'status':_0x3ec132(0x243),'warehouse_category':_0x3ec132(0x1da)}},{'$group':{'_id':_0x3ec132(0x1cb),'name':{'$first':'$name'}}}]);var _0x5a91b9=[_0x3ec132(0x286),_0x3ec132(0x1bf),_0x3ec132(0x25a)];const _0x408487=await transfers['find']({}),_0x14a9a7=_0x408487[_0x3ec132(0x1c9)]+0x1,_0x31a4ba=_0x3ec132(0x266)+_0x14a9a7[_0x3ec132(0x255)]()[_0x3ec132(0x1d3)](0x5,'0');if(_0x35b5f2[0x0][_0x3ec132(0x233)]=='English\x20(US)'){var _0x26e6ce=users[_0x3ec132(0x27c)];console['log'](_0x26e6ce);}else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]==_0x3ec132(0x20f))var _0x26e6ce=users[_0x3ec132(0x20f)];else{if(_0x35b5f2[0x0]['language']=='German')var _0x26e6ce=users[_0x3ec132(0x1b1)];else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]==_0x3ec132(0x275))var _0x26e6ce=users[_0x3ec132(0x275)];else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]=='French')var _0x26e6ce=users[_0x3ec132(0x235)];else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]==_0x3ec132(0x20d))var _0x26e6ce=users[_0x3ec132(0x1b2)];else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]==_0x3ec132(0x250))var _0x26e6ce=users['Chinese'];else{if(_0x35b5f2[0x0][_0x3ec132(0x233)]=='Arabic\x20(ae)')var _0x26e6ce=users[_0x3ec132(0x22c)];}}}}}}}const _0x543a02=getRandom8DigitNumber();_0x543a02[_0x3ec132(0x1b6)](_0x352e66=>{var _0x5c1047=_0x3ec132;_0x3f0200[_0x5c1047(0x1ce)]('add_transfer',{'success':_0x3d09a5[_0x5c1047(0x1de)](_0x5c1047(0x231)),'errors':_0x3d09a5['flash']('errors'),'role':_0x270b96,'profile':_0x131c1d,'master_shop':_0x35b5f2,'warehouse':_0x34a7f9,'language':_0x26e6ce,'rooms_data':_0x5a91b9,'invoice':_0x352e66});})['catch'](_0x3b02dc=>{var _0x158eb9=_0x3ec132;_0x3d09a5['flash'](_0x158eb9(0x23e),_0x158eb9(0x1af)),_0x3f0200[_0x158eb9(0x1f0)](_0x158eb9(0x1e3));});}catch(_0x5587a7){console[_0x3ec132(0x1c1)](_0x5587a7);}}),router[a0_0xee4a5a(0x278)](a0_0xee4a5a(0x23a),auth,async(_0x599d3c,_0x2a1801)=>{var _0xf6f70=a0_0xee4a5a;try{console[_0xf6f70(0x1c1)](_0x599d3c['body']);const {date:_0x6f8040,from_warehouse:_0x2b26f1,FromRoom_name:_0x5c7ee2,to_warehouse:_0x413f39,ToRoom_name:_0x316a6d,prod_name:_0x5e339b,from_prod_qty:_0x1b6e36,from_prod_level:_0x1b127d,from_prod_isle:_0x32cf90,from_prod_pallet:_0x1e05d6,to_prod_qty:_0x11c0f3,to_prod_level:_0x4e36c0,to_prod_isle:_0x191524,to_prod_pallet:_0x8e8817,primary_code:_0x3f9b0e,secondary_code:_0x2c0b17,product_code3:_0x295721,note:_0x1617dc,MaxStocks_data2:_0x10dddc,invoice:_0x2d66bc,expiry_date:_0x2ddc65}=_0x599d3c['body'];if(typeof _0x5e339b==_0xf6f70(0x221))var _0x34144d=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x26f)]],_0x5a93c2=[_0x599d3c[_0xf6f70(0x294)]['from_prod_qty']],_0x3199c6=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x280)]],_0x225e4c=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x256)]],_0x363128=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x232)]],_0x3d371c=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1bb)]],_0x146563=[_0x599d3c[_0xf6f70(0x294)]['secondary_code']],_0x306776=[_0x599d3c[_0xf6f70(0x294)]['product_code3']],_0x4c797f=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x299)]],_0x51f14b=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1ae)]],_0x39bbcf=[_0x599d3c[_0xf6f70(0x294)]['secondary_unit']],_0x4f2f19=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x206)]],_0x567c85=[_0x599d3c['body']['expiry_date']],_0x30abee=[_0x599d3c['body'][_0xf6f70(0x1ee)]],_0x2c3b70=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x28e)]],_0x1f43c9=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x240)]],_0x1b6160=[_0x599d3c['body'][_0xf6f70(0x212)]],_0x156a1c=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1cc)]],_0x1c73e1=[_0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x24e)]],_0x4d45f3=[_0x599d3c[_0xf6f70(0x294)]['to_invoice']],_0x407a3c=[_0x599d3c['body'][_0xf6f70(0x234)]];else var _0x34144d=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x26f)]],_0x5a93c2=[..._0x599d3c['body'][_0xf6f70(0x236)]],_0x3199c6=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x280)]],_0x225e4c=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x256)]],_0x363128=[..._0x599d3c['body'][_0xf6f70(0x232)]],_0x3d371c=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1bb)]],_0x146563=[..._0x599d3c['body'][_0xf6f70(0x229)]],_0x306776=[..._0x599d3c['body'][_0xf6f70(0x288)]],_0x4c797f=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x299)]],_0x51f14b=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1ae)]],_0x39bbcf=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x22f)]],_0x4f2f19=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x206)]],_0x567c85=[..._0x599d3c['body'][_0xf6f70(0x28f)]],_0x30abee=[..._0x599d3c['body'][_0xf6f70(0x1ee)]],_0x2c3b70=[..._0x599d3c['body']['production_date']],_0x1f43c9=[..._0x599d3c[_0xf6f70(0x294)]['prod_cat']],_0x1b6160=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x212)]],_0x156a1c=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x1cc)]],_0x1c73e1=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x24e)]],_0x4d45f3=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x258)]],_0x407a3c=[..._0x599d3c[_0xf6f70(0x294)][_0xf6f70(0x234)]];const _0x588357=_0x34144d['map'](_0x50b888=>{return _0x50b888={'product_name':_0x50b888};});_0x5a93c2[_0xf6f70(0x1d2)]((_0x57c4c2,_0x133b19)=>{var _0x5b70ed=_0xf6f70;_0x588357[_0x133b19][_0x5b70ed(0x249)]=_0x57c4c2;}),_0x1c73e1[_0xf6f70(0x1d2)]((_0xc46d38,_0x306ca7)=>{var _0x2284c2=_0xf6f70;_0x588357[_0x306ca7][_0x2284c2(0x24e)]=_0xc46d38;}),_0x4d45f3['forEach']((_0x663fdb,_0x55d11c)=>{_0x588357[_0x55d11c]['To_invoice']=_0x663fdb;}),_0x407a3c[_0xf6f70(0x1d2)]((_0x332034,_0x52285c)=>{var _0x2295ae=_0xf6f70;_0x588357[_0x52285c][_0x2295ae(0x287)]=_0x332034;}),_0x3199c6[_0xf6f70(0x1d2)]((_0x29f9f3,_0x20e324)=>{var _0x38e926=_0xf6f70;_0x1b6160[_0x38e926(0x1d2)]((_0x1cf9e2,_0x34a82c)=>{var _0x23ca5d=_0x38e926;if(_0x1cf9e2=='Receiving\x20Area'&&_0x20e324==_0x34a82c){var _0x26382a=_0x29f9f3[_0x23ca5d(0x24b)](0x3);_0x588357[_0x20e324][_0x23ca5d(0x1fa)]=_0x29f9f3[0x0],_0x588357[_0x20e324][_0x23ca5d(0x1b4)]=_0x29f9f3[0x1],_0x588357[_0x20e324][_0x23ca5d(0x279)]=0x0,_0x588357[_0x20e324]['from_bin']=0x0,_0x588357[_0x20e324][_0x23ca5d(0x25c)]='Floor',_0x588357[_0x20e324][_0x23ca5d(0x2a0)]=_0x26382a;}else{if(_0x1cf9e2=='Shelves'&&_0x20e324==_0x34a82c){var _0x26382a=_0x29f9f3[_0x23ca5d(0x24b)](0x3);_0x588357[_0x20e324]['from_storage']=_0x29f9f3[0x0],_0x588357[_0x20e324][_0x23ca5d(0x1b4)]=_0x29f9f3[0x1],_0x588357[_0x20e324][_0x23ca5d(0x279)]=0x0,_0x588357[_0x20e324][_0x23ca5d(0x260)]=0x0,_0x588357[_0x20e324]['from_types']=_0x23ca5d(0x205),_0x588357[_0x20e324][_0x23ca5d(0x2a0)]=_0x29f9f3[0x5];}else{if(_0x20e324==_0x34a82c){if(_0x29f9f3[0x0]=='A'&&_0x29f9f3[0x1]=='L'&&_0x29f9f3[0x2]=='L')console[_0x23ca5d(0x1c1)](_0x1cf9e2+'\x20<>\x20'+_0x20e324+'\x20<>\x20'+_0x34a82c+_0x23ca5d(0x209)+_0x29f9f3+_0x23ca5d(0x21a)),_0x588357[_0x20e324][_0x23ca5d(0x1fa)]=_0x29f9f3[0x0],_0x588357[_0x20e324]['from_rack']=_0x29f9f3[0x1],_0x588357[_0x20e324]['from_bay']=0x0,_0x588357[_0x20e324][_0x23ca5d(0x260)]=0x0,_0x588357[_0x20e324][_0x23ca5d(0x25c)]=_0x23ca5d(0x205),_0x588357[_0x20e324][_0x23ca5d(0x2a0)]=_0x29f9f3[0x3];else{var _0xa02c9c;if(_0x29f9f3[0x4]=='L')_0xa02c9c='Level';else _0x29f9f3[0x4]=='F'&&(_0xa02c9c=_0x23ca5d(0x205));_0x588357[_0x20e324][_0x23ca5d(0x1fa)]=_0x29f9f3[0x0],_0x588357[_0x20e324][_0x23ca5d(0x1b4)]=_0x29f9f3[0x1],_0x588357[_0x20e324][_0x23ca5d(0x279)]=_0x29f9f3[0x2],_0x588357[_0x20e324][_0x23ca5d(0x260)]=_0x29f9f3[0x3],_0x588357[_0x20e324]['from_types']=_0xa02c9c,_0x588357[_0x20e324]['from_floorlevel']=_0x29f9f3[0x5];}}}}});}),_0x225e4c[_0xf6f70(0x1d2)]((_0x5e5bdc,_0x570155)=>{var _0x13c276=_0xf6f70;_0x588357[_0x570155][_0x13c276(0x1e2)]=_0x5e5bdc;}),_0x363128['forEach']((_0x43330d,_0x5a7f8b)=>{var _0x41dfe4=_0xf6f70;_0x156a1c[_0x41dfe4(0x1d2)]((_0x213450,_0x390a01)=>{var _0x3f2805=_0x41dfe4;if(_0x213450==_0x3f2805(0x20c)&&_0x5a7f8b==_0x390a01){var _0x3ecacc=_0x43330d[_0x3f2805(0x24b)](0x3);_0x588357[_0x5a7f8b][_0x3f2805(0x1dc)]=_0x43330d[0x0],_0x588357[_0x5a7f8b][_0x3f2805(0x24a)]=_0x43330d[0x1],_0x588357[_0x5a7f8b][_0x3f2805(0x202)]=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x298)]=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x293)]=_0x3f2805(0x205),_0x588357[_0x5a7f8b][_0x3f2805(0x1d5)]=_0x3ecacc;}else{if(_0x213450==_0x3f2805(0x246)&&_0x5a7f8b==_0x390a01){var _0x3ecacc=_0x43330d['slice'](0x3);_0x588357[_0x5a7f8b][_0x3f2805(0x1dc)]=_0x43330d[0x0],_0x588357[_0x5a7f8b][_0x3f2805(0x24a)]=_0x43330d[0x1],_0x588357[_0x5a7f8b][_0x3f2805(0x202)]=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x298)]=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x293)]=_0x3f2805(0x205),_0x588357[_0x5a7f8b]['to_floorlevel']=_0x43330d[0x5];}else{if(_0x5a7f8b==_0x390a01){if(_0x43330d[0x0]=='A'&&_0x43330d[0x1]=='L'&&_0x43330d[0x2]=='L')console[_0x3f2805(0x1c1)](_0x213450+_0x3f2805(0x209)+_0x5a7f8b+'\x20<>\x20'+_0x390a01+'\x20<>\x20'+_0x43330d+_0x3f2805(0x21a)),_0x588357[_0x5a7f8b][_0x3f2805(0x1dc)]=_0x43330d[0x0],_0x588357[_0x5a7f8b][_0x3f2805(0x24a)]=_0x43330d[0x1],_0x588357[_0x5a7f8b]['to_bay']=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x298)]=0x0,_0x588357[_0x5a7f8b][_0x3f2805(0x293)]=_0x3f2805(0x205),_0x588357[_0x5a7f8b][_0x3f2805(0x1d5)]=_0x43330d[0x3];else{var _0x906d;if(_0x43330d[0x4]=='L')_0x906d='Level';else _0x43330d[0x4]=='F'&&(_0x906d=_0x3f2805(0x205));_0x588357[_0x5a7f8b]['storage']=_0x43330d[0x0],_0x588357[_0x5a7f8b][_0x3f2805(0x24a)]=_0x43330d[0x1],_0x588357[_0x5a7f8b][_0x3f2805(0x202)]=_0x43330d[0x2],_0x588357[_0x5a7f8b][_0x3f2805(0x298)]=_0x43330d[0x3],_0x588357[_0x5a7f8b][_0x3f2805(0x293)]=_0x906d,_0x588357[_0x5a7f8b][_0x3f2805(0x1d5)]=_0x43330d[0x5];}}}}});}),_0x3d371c['forEach']((_0x299177,_0x4ea4aa)=>{var _0x571894=_0xf6f70;_0x588357[_0x4ea4aa][_0x571894(0x1bb)]=_0x299177;}),_0x146563[_0xf6f70(0x1d2)]((_0x30def0,_0x3289ad)=>{var _0x489819=_0xf6f70;_0x588357[_0x3289ad][_0x489819(0x229)]=_0x30def0;}),_0x306776[_0xf6f70(0x1d2)]((_0x4d1846,_0x11d38d)=>{var _0x185c0e=_0xf6f70;_0x588357[_0x11d38d][_0x185c0e(0x1bd)]=_0x4d1846;}),_0x4c797f['forEach']((_0x590cdb,_0x445666)=>{var _0x451500=_0xf6f70;_0x588357[_0x445666][_0x451500(0x27f)]=_0x590cdb;}),_0x51f14b['forEach']((_0x307d8d,_0x2cdf54)=>{_0x588357[_0x2cdf54]['unit']=_0x307d8d;}),_0x39bbcf[_0xf6f70(0x1d2)]((_0x14709d,_0x192cc5)=>{var _0x1d71ea=_0xf6f70;_0x588357[_0x192cc5][_0x1d71ea(0x22f)]=_0x14709d;}),_0x4f2f19[_0xf6f70(0x1d2)]((_0x3c9439,_0xf65ed8)=>{var _0x2f4c2e=_0xf6f70;_0x588357[_0xf65ed8][_0x2f4c2e(0x206)]=_0x3c9439;}),_0x567c85['forEach']((_0xa3f983,_0x60c59c)=>{var _0x11b190=_0xf6f70;_0x588357[_0x60c59c][_0x11b190(0x28f)]=_0xa3f983;}),_0x30abee[_0xf6f70(0x1d2)]((_0x39b87e,_0xd85aec)=>{var _0x59e5b1=_0xf6f70;_0x588357[_0xd85aec][_0x59e5b1(0x1f4)]=_0x39b87e;}),_0x2c3b70[_0xf6f70(0x1d2)]((_0x2976bb,_0x394b1e)=>{var _0x2b3e48=_0xf6f70;_0x588357[_0x394b1e][_0x2b3e48(0x28e)]=_0x2976bb;}),_0x1f43c9[_0xf6f70(0x1d2)]((_0x5417bb,_0xbe33e1)=>{var _0x418ff8=_0xf6f70;_0x588357[_0xbe33e1][_0x418ff8(0x240)]=_0x5417bb;}),_0x1b6160[_0xf6f70(0x1d2)]((_0x180bcf,_0xa9175d)=>{_0x588357[_0xa9175d]['from_room_name']=_0x180bcf;}),_0x156a1c[_0xf6f70(0x1d2)]((_0x2745c5,_0x12c749)=>{_0x588357[_0x12c749]['to_room_name']=_0x2745c5;});const _0x487074=_0x588357['filter'](_0x237bb7=>_0x237bb7['to_quantity']!=='0'&&_0x237bb7[_0xf6f70(0x1e2)]!==''||_0x237bb7[_0xf6f70(0x1d5)]!=='0'&&_0x237bb7[_0xf6f70(0x1d5)]!==''),_0x24afda=new transfers({'date':_0x6f8040,'from_warehouse':_0x2b26f1,'to_warehouse':_0x413f39,'product':_0x487074,'note':_0x1617dc,'invoice':_0x2d66bc}),_0x140390=await _0x24afda[_0xf6f70(0x224)]();_0x599d3c['flash'](_0xf6f70(0x231),_0xf6f70(0x261)),_0x2a1801['redirect'](_0xf6f70(0x29e)+_0x140390[_0xf6f70(0x1aa)]);}catch(_0x2b9fbe){console[_0xf6f70(0x1c1)](_0x2b9fbe),_0x2a1801['status'](0xc8)[_0xf6f70(0x1c0)]({'errorMessage':_0x2b9fbe['message']});}}),router[a0_0xee4a5a(0x208)](a0_0xee4a5a(0x1b5),auth,async(_0x1015d6,_0x593aaf)=>{var _0x580075=a0_0xee4a5a;try{const {username:_0x5824e3,email:_0x1e8c08,role:_0x4087fa}=_0x1015d6[_0x580075(0x1ed)],_0x5dc1c4=_0x1015d6[_0x580075(0x1ed)],_0xb2e00b=await profile['findOne']({'email':_0x5dc1c4[_0x580075(0x292)]}),_0x1483d9=await master_shop[_0x580075(0x1ea)]();console[_0x580075(0x1c1)]('master',_0x1483d9);const _0x9414e3=await transfers[_0x580075(0x230)](_0x1015d6['params']['id']);let _0x298f6d=new Date(_0x9414e3[_0x580075(0x28f)]),_0x50aba7=('0'+_0x298f6d[_0x580075(0x1eb)]())[_0x580075(0x24b)](-0x2),_0x3a5c22=('0'+(_0x298f6d[_0x580075(0x274)]()+0x1))[_0x580075(0x24b)](-0x2),_0x350d29=_0x298f6d['getFullYear'](),_0x300c8d=_0x350d29+'-'+_0x3a5c22+'-'+_0x50aba7,_0x46d906;if(_0x5dc1c4[_0x580075(0x1fc)]==_0x580075(0x1d1)){const _0x13a47f=await staff[_0x580075(0x1f9)]({'email':_0x5dc1c4['email']});_0x46d906=await warehouse['find']({'status':_0x580075(0x243),'name':_0x13a47f[_0x580075(0x222)],'warehouse_category':_0x580075(0x1da)});}else _0x46d906=await warehouse[_0x580075(0x1ea)]({'status':_0x580075(0x243),'warehouse_category':_0x580075(0x1da)});const _0x1a23bc=await warehouse[_0x580075(0x273)]([{'$match':{'name':_0x9414e3[_0x580075(0x1c4)]}},{'$unwind':_0x580075(0x1b0)},{'$group':{'_id':_0x580075(0x27b),'name':{'$first':_0x580075(0x241)},'product_stock':{'$first':_0x580075(0x25d)},'bay':{'$first':_0x580075(0x1dd)},'bin':{'$first':_0x580075(0x28a)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x580075(0x226)},'product_code':{'$first':_0x580075(0x1e0)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x580075(0x2a3)},'expiry_date':{'$first':_0x580075(0x2a1)},'production_date':{'$first':_0x580075(0x1d6)},'room':{'$first':_0x580075(0x284)}}}]);if(_0x1483d9[0x0][_0x580075(0x233)]==_0x580075(0x1e7)){var _0x2bc0f9=users[_0x580075(0x27c)];console[_0x580075(0x1c1)](_0x2bc0f9);}else{if(_0x1483d9[0x0][_0x580075(0x233)]==_0x580075(0x20f))var _0x2bc0f9=users[_0x580075(0x20f)];else{if(_0x1483d9[0x0]['language']==_0x580075(0x1b1))var _0x2bc0f9=users[_0x580075(0x1b1)];else{if(_0x1483d9[0x0][_0x580075(0x233)]==_0x580075(0x275))var _0x2bc0f9=users[_0x580075(0x275)];else{if(_0x1483d9[0x0][_0x580075(0x233)]=='French')var _0x2bc0f9=users['French'];else{if(_0x1483d9[0x0][_0x580075(0x233)]==_0x580075(0x20d))var _0x2bc0f9=users['Portuguese'];else{if(_0x1483d9[0x0][_0x580075(0x233)]==_0x580075(0x250))var _0x2bc0f9=users[_0x580075(0x250)];else{if(_0x1483d9[0x0]['language']==_0x580075(0x22a))var _0x2bc0f9=users[_0x580075(0x22c)];}}}}}}}_0x593aaf[_0x580075(0x1ce)](_0x580075(0x259),{'success':_0x1015d6[_0x580075(0x1de)](_0x580075(0x231)),'errors':_0x1015d6[_0x580075(0x1de)](_0x580075(0x23e)),'role':_0x5dc1c4,'profile':_0xb2e00b,'master_shop':_0x1483d9,'warehouse':_0x46d906,'transfer':_0x9414e3,'stock':_0x1a23bc,'language':_0x2bc0f9});}catch(_0x2e1605){console[_0x580075(0x1c1)](_0x2e1605);}}),router[a0_0xee4a5a(0x278)](a0_0xee4a5a(0x1b5),auth,async(_0x2fc2a2,_0x6e4862)=>{var _0x5054a9=a0_0xee4a5a;try{const _0x52e68e=_0x2fc2a2[_0x5054a9(0x1d8)]['id'],{from_warehouse:_0x4b0059,FromRoom_name:_0x149d9b,to_warehouse:_0x293590,ToRoom_name:_0x71d2b1}=_0x2fc2a2['body'],_0x50d6ba=await transfers[_0x5054a9(0x230)]({'_id':_0x52e68e}),_0x1399be=_0x50d6ba[_0x5054a9(0x21d)]['map'](async _0x45fad8=>{var _0xfe3736=_0x5054a9;if(_0x45fad8['to_quantity']>0x0){var _0x11bb3d=await warehouse[_0xfe3736(0x1f9)]({'name':_0x50d6ba[_0xfe3736(0x1c4)],'room':_0x45fad8[_0xfe3736(0x23d)],'warehouse_category':_0xfe3736(0x1da)});const _0x4639c9=_0x11bb3d['product_details'][_0xfe3736(0x1ef)](_0x2250d6=>{var _0x4f0422=_0xfe3736;_0x2250d6[_0x4f0422(0x1db)]==_0x45fad8[_0x4f0422(0x1db)]&&_0x2250d6['floorlevel']==_0x45fad8[_0x4f0422(0x2a0)]&&_0x2250d6[_0x4f0422(0x217)]==_0x45fad8['from_types']&&_0x2250d6[_0x4f0422(0x1ba)]==_0x45fad8['from_bin']&&_0x2250d6[_0x4f0422(0x1fe)]==_0x45fad8[_0x4f0422(0x279)]&&_0x2250d6[_0x4f0422(0x24a)]==_0x45fad8[_0x4f0422(0x1b4)]&&_0x2250d6[_0x4f0422(0x1dc)]==_0x45fad8[_0x4f0422(0x1fa)]&&_0x2250d6[_0x4f0422(0x28f)]==_0x45fad8[_0x4f0422(0x28f)]&&_0x2250d6[_0x4f0422(0x206)]==_0x45fad8['batch_code']&&_0x2250d6[_0x4f0422(0x28e)]==_0x45fad8[_0x4f0422(0x28e)]&&_0x2250d6[_0x4f0422(0x1ac)]==_0x45fad8['from_invoice']&&_0x2250d6[_0x4f0422(0x1aa)]==_0x45fad8[_0x4f0422(0x287)]&&(_0x2250d6[_0x4f0422(0x1ad)]=_0x2250d6[_0x4f0422(0x1ad)]-_0x45fad8[_0x4f0422(0x1e2)]);});}return _0x11bb3d;});Promise[_0x5054a9(0x29a)](_0x1399be)[_0x5054a9(0x1b6)](async _0x3adcf3=>{var _0x335720=_0x5054a9;try{for(const _0x7bd61 of _0x3adcf3){await _0x7bd61['save']();}try{const _0x46f57e=_0x50d6ba[_0x335720(0x21d)]['map'](async _0x49c28a=>{var _0x56b529=_0x335720;if(_0x49c28a[_0x56b529(0x1e2)]>0x0){var _0x22f41f=await warehouse[_0x56b529(0x1f9)]({'name':_0x50d6ba['to_warehouse'],'room':_0x49c28a[_0x56b529(0x204)],'warehouse_category':_0x56b529(0x1da)}),_0xf67ee2=0x0;const _0x310db6=_0x22f41f[_0x56b529(0x1c5)][_0x56b529(0x1ef)](_0x4eb898=>{var _0x47fd66=_0x56b529;_0x4eb898[_0x47fd66(0x1db)]==_0x49c28a[_0x47fd66(0x1db)]&&_0x4eb898[_0x47fd66(0x1e4)]==_0x49c28a[_0x47fd66(0x1d5)]&&_0x4eb898[_0x47fd66(0x217)]==_0x49c28a[_0x47fd66(0x293)]&&_0x4eb898[_0x47fd66(0x1ba)]==_0x49c28a[_0x47fd66(0x298)]&&_0x4eb898[_0x47fd66(0x1fe)]==_0x49c28a[_0x47fd66(0x202)]&&_0x4eb898[_0x47fd66(0x24a)]==_0x49c28a['rack']&&_0x4eb898[_0x47fd66(0x1dc)]==_0x49c28a['storage']&&_0x4eb898[_0x47fd66(0x28f)]==_0x49c28a['expiry_date']&&_0x4eb898[_0x47fd66(0x206)]==_0x49c28a[_0x47fd66(0x206)]&&_0x4eb898[_0x47fd66(0x28e)]==_0x49c28a[_0x47fd66(0x28e)]&&_0x4eb898['invoice']==_0x49c28a[_0x47fd66(0x1df)]&&(_0x4eb898[_0x47fd66(0x1ad)]=_0x4eb898['product_stock']+_0x49c28a[_0x47fd66(0x1e2)],_0xf67ee2++);});_0xf67ee2=='0'&&(_0x22f41f[_0x56b529(0x1c5)]=_0x22f41f[_0x56b529(0x1c5)][_0x56b529(0x1b8)]({'product_name':_0x49c28a[_0x56b529(0x1db)],'product_stock':_0x49c28a[_0x56b529(0x1e2)],'bay':_0x49c28a[_0x56b529(0x202)],'bin':_0x49c28a[_0x56b529(0x298)],'type':_0x49c28a[_0x56b529(0x293)],'floorlevel':_0x49c28a[_0x56b529(0x1d5)],'storage':_0x49c28a[_0x56b529(0x1dc)],'rack':_0x49c28a[_0x56b529(0x24a)],'product_code':_0x49c28a[_0x56b529(0x1bd)],'primary_code':_0x49c28a[_0x56b529(0x1bb)],'secondary_code':_0x49c28a[_0x56b529(0x229)],'maxProducts':_0x49c28a[_0x56b529(0x27f)],'storage':_0x49c28a['storage'],'rack':_0x49c28a[_0x56b529(0x24a)],'expiry_date':_0x49c28a[_0x56b529(0x28f)],'maxPerUnit':_0x49c28a[_0x56b529(0x1f4)],'batch_code':_0x49c28a['batch_code'],'production_date':_0x49c28a['production_date']}));}return _0x22f41f;});Promise[_0x335720(0x29a)](_0x46f57e)[_0x335720(0x1b6)](async _0x55faac=>{var _0x39bc28=_0x335720;try{for(const _0x5cbbc2 of _0x55faac){await warehouse[_0x39bc28(0x1d0)]({'_id':_0x5cbbc2['_id']},{'$addToSet':{'product_details':{'$each':_0x5cbbc2['product_details']}}});}_0x50d6ba[_0x39bc28(0x29f)]='True';const _0x6a1bf0=await _0x50d6ba['save'](),_0xdcd27c=await master_shop['find'](),_0x4f39ad=await email_settings['findOne'](),_0xa8b571=await supervisor_settings['find']();var _0x31af92=_0x50d6ba[_0x39bc28(0x21d)],_0x1cb6c8='',_0x4acc75;for(_0x4acc75 in _0x31af92){_0x1cb6c8+=_0x39bc28(0x26e)+_0x39bc28(0x1f8)+_0x31af92[_0x4acc75]['product_name']+_0x39bc28(0x21b)+_0x39bc28(0x1f8)+_0x31af92[_0x4acc75]['product_code']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x31af92[_0x4acc75][_0x39bc28(0x1e2)]+_0x39bc28(0x21b)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x31af92[_0x4acc75]['unit']+_0x39bc28(0x21b)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x31af92[_0x4acc75][_0x39bc28(0x22f)]+'</td>'+_0x39bc28(0x1f8)+_0x50d6ba[_0x39bc28(0x242)]+_0x39bc28(0x21b)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x31af92[_0x4acc75][_0x39bc28(0x204)]+_0x39bc28(0x21b)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x31af92[_0x4acc75][_0x39bc28(0x1dc)]+_0x31af92[_0x4acc75]['rack']+_0x31af92[_0x4acc75][_0x39bc28(0x202)]+_0x31af92[_0x4acc75]['to_bin']+_0x31af92[_0x4acc75][_0x39bc28(0x293)][0x0]+_0x31af92[_0x4acc75][_0x39bc28(0x1d5)]+_0x39bc28(0x21b),_0x39bc28(0x23f);}let _0x4fb96f=nodemailer[_0x39bc28(0x24c)]({'host':_0x4f39ad[_0x39bc28(0x1c8)],'port':Number(_0x4f39ad[_0x39bc28(0x270)]),'secure':![],'auth':{'user':_0x4f39ad[_0x39bc28(0x292)],'pass':_0x4f39ad[_0x39bc28(0x1c7)]}}),_0xf0d070={'from':_0x4f39ad['email'],'to':_0xa8b571[0x0]['RMSEmail'],'subject':'Transfer\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x39bc28(0x211)+_0xdcd27c[0x0][_0x39bc28(0x28d)],'cid':'logo'}],'html':_0x39bc28(0x285)+_0x39bc28(0x1e8)+'</head><body>'+'<div>'+_0x39bc28(0x1bc)+_0x39bc28(0x228)+_0x39bc28(0x20e)+_0x39bc28(0x1f3)+'<div>'+_0x39bc28(0x1fb)+_0xdcd27c[0x0][_0x39bc28(0x23c)]+_0x39bc28(0x24d)+_0x39bc28(0x1f3)+'</div>'+_0x39bc28(0x267)+_0x39bc28(0x228)+_0x39bc28(0x1e6)+_0x39bc28(0x214)+_0x50d6ba[_0x39bc28(0x1ac)]+'\x20'+_0x39bc28(0x26d)+_0x39bc28(0x289)+_0x50d6ba[_0x39bc28(0x201)]+'\x20'+_0x39bc28(0x28b)+'</h5>'+_0x39bc28(0x1f3)+_0x39bc28(0x1cf)+_0x39bc28(0x290)+'<tr>'+_0x39bc28(0x29b)+_0x39bc28(0x223)+_0x39bc28(0x254)+_0x39bc28(0x1f5)+_0x39bc28(0x213)+_0x39bc28(0x297)+_0x39bc28(0x253)+_0x39bc28(0x21f)+'</tr>'+_0x39bc28(0x26b)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x1cb6c8+'\x20'+_0x39bc28(0x1c6)+_0x39bc28(0x1b3)+_0x39bc28(0x228)+'<strong>\x20Regards\x20</strong>'+_0x39bc28(0x1e9)+_0xdcd27c[0x0]['site_title']+'</h5>'+'</div>'+_0x39bc28(0x1f3)+'</body></html>'};_0x4fb96f[_0x39bc28(0x227)](_0xf0d070,function(_0x2d0045,_0x290efc){var _0x4a0545=_0x39bc28;_0x2d0045?(console['log'](_0x2d0045),console['log'](_0x4a0545(0x262))):console['log']('Email\x20sent\x20successfully');}),_0x2fc2a2[_0x39bc28(0x1de)](_0x39bc28(0x231),_0x39bc28(0x200)),_0x6e4862['redirect'](_0x39bc28(0x1ec)+_0x6a1bf0[_0x39bc28(0x1aa)]);}catch(_0x54cded){console[_0x39bc28(0x1f2)](_0x54cded),_0x6e4862[_0x39bc28(0x1b9)](0x1f4)[_0x39bc28(0x1c0)]({'Perror':_0x39bc28(0x21c),'message':_0x54cded['message']});}})[_0x335720(0x1f7)](_0xd3a159=>{var _0x4742a2=_0x335720;console['error'](_0xd3a159),_0x6e4862[_0x4742a2(0x1b9)](0x1f4)[_0x4742a2(0x1c0)]({'Perror':'An\x20error\x20occurred.'});});}catch(_0x4a8b25){_0x6e4862['json'](_0x4a8b25);}}catch(_0xb76838){console[_0x335720(0x1f2)](_0xb76838),_0x6e4862['status'](0x1f4)[_0x335720(0x1c0)]({'Merror':_0x335720(0x21c),'Message':_0xb76838[_0x335720(0x25e)]});}})['catch'](_0x1b9bf7=>{var _0x1229c6=_0x5054a9;console[_0x1229c6(0x1f2)](_0x1b9bf7),_0x6e4862[_0x1229c6(0x1b9)](0x1f4)[_0x1229c6(0x1c0)]({'Merror':_0x1229c6(0x1f1)});});}catch(_0x4c1482){console[_0x5054a9(0x1c1)](_0x4c1482);}});function a0_0x10e0(){var _0x32c65f=['get','\x20<>\x20','31960EPGcec','99QsRANX','Receiving\x20Area','Portuguese\x20(BR)','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Hindi','random','/upload/','RoomAssigned','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','\x20Order\x20Number\x20:\x20','Rack\x20C','/view/:id','type','Transfer\x20Edit\x20Successfully','to_room','here','</td>','An\x20error\x20occurred\x20while\x20saving\x20data.','product','from_room','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','filter','string','warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','save','$product_details.maxProducts','$product_details.secondary_code','sendMail','<div>','secondary_code','Arabic\x20(ae)','from_prod_isle','Arabic','Rack\x20F','master','secondary_unit','findById','success','to_prod_level','language','id_transaction','French','from_prod_qty','$product_details.floorlevel','Level','../middleware/auth','/view/add_transfer','116056ZNiiqz','site_title','from_room_name','errors','</tr>','prod_cat','$product_details.product_name','to_warehouse','Enabled','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','$product_details.batch_code','Shelves','$product_details.secondary_unit','Rack\x20A','from_quantity','rack','slice','createTransport','\x20</h2>','from_invoice','/barcode_scanner2','Chinese','$product_details.maxPerUnit','to_prod_isle','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','toString','New_Qty_Converted','from_prod_pallet','to_invoice','edit_transfer_view','Return\x20Rooms','../models/all_models','from_types','$product_details.product_stock','message','$product_details.unit','from_bin','Product\x20Transfer\x20successfully','Error\x20Occurs','$product','$product_details.pallet','1034qYRbPa','TRF-','<hr\x20class=\x22my-3\x22>','split','Rack\x20B','to_prod_pallet','</thead>','unit','<span\x20style=\x22float:\x20right;\x22>','<tr>','prod_name','port','138EJZfVL','Rack\x20D','aggregate','getMonth','Spanish','17283XzTypW','$product_details.type','post','from_bay','exports','$product_details._id','English','$to_warehouse','490648jAeanO','maxProducts','from_prod_level','to_prod_qty','$product_details.primary_code','rak','$room','<!DOCTYPE\x20html>','Ambient','id_transaction_id','product_code3','\x20Order\x20Date\x20:\x20','$product_details.bin','</span>','$finalize','image','production_date','expiry_date','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.invoice','email','to_types','body','/view','169240FyNbhQ','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','to_bin','MaxStocks_data2','all','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$from_warehouse','$product_details.isle','/transfer/preview/','finalize','from_floorlevel','$product_details.expiry_date','floor','$product_details.rack','_id','edit_transfer','invoice','product_stock','primary_unit','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$product_details','German','Portuguese','</table>','from_rack','/preview/:id','then','/barcode_scanner','concat','status','bin','primary_code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','product_code','transfer','Enclosed','json','log','from_rak','note','from_warehouse','product_details','</tbody>','password','host','length','push','$name','ToRoomAssigned','express','render','<table\x20style=\x22width:\x20100%\x20!important;\x22>','updateOne','staff','forEach','padStart','nodemailer','to_floorlevel','$product_details.production_date','Router','params','$invoice','Raw\x20Materials','product_name','storage','$product_details.bay','flash','To_invoice','$product_details.product_code','277366djtdoy','to_quantity','/transfer/view','floorlevel','$product_details.storage','<h5\x20style=\x22text-align:\x20left;\x22>','English\x20(US)','<html><head><title></title>','<h5>','find','getDate','/picking_list/PDF_transfer_rm/','user','max_per_unit','map','redirect','An\x20error\x20occurred.','error','</div>','maxperunit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$product_details.level','catch','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','findOne','from_storage','<h2>\x20','role','$date','bay','3IgpaJV','Transfer\x20Finalize\x20Successfully','date','to_bay','462090kiJdTx','to_room_name','Floor','batch_code','DRY\x20STORAGE'];a0_0x10e0=function(){return _0x32c65f;};return a0_0x10e0();}function BayBinSelected(_0x170f9d,_0xfa7ce6){var _0x563d32=a0_0xee4a5a,_0x3585c0=[],_0x7a0725=[],_0x22f5d9=[],_0x114131=[],_0x380120=[],_0x2d35a6=[];let _0x285457=[];if(_0x170f9d==_0x563d32(0x207))switch(_0xfa7ce6){case _0x563d32(0x248):_0x3585c0=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x7a0725=[0x1,0x2],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=['Level','Floor'],_0x380120=['D'],_0x2d35a6=['A'];break;case _0x563d32(0x269):_0x3585c0=[0x6,0x5,0x4,0x3,0x2,0x1],_0x7a0725=[0x1,0x2],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=[_0x563d32(0x238),_0x563d32(0x205)],_0x380120=['D'],_0x2d35a6=['B'];break;case _0x563d32(0x246):_0x3585c0=[0x0],_0x7a0725=[0x0],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=[_0x563d32(0x205)],_0x380120=['D'],_0x2d35a6=['S'];break;case _0x563d32(0x20c):_0x3585c0=[0x0],_0x7a0725=[0x0],_0x114131=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x22f5d9=[_0x563d32(0x205)],_0x380120=['D'],_0x2d35a6=['R'];break;}else{if(_0x170f9d=='COLD\x20STORAGE')switch(_0xfa7ce6){case _0x563d32(0x248):_0x3585c0=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x7a0725=['B','F'],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=['Level',_0x563d32(0x205)],_0x380120=['C'],_0x2d35a6=['A'];break;case _0x563d32(0x269):_0x3585c0=[0x5,0x4,0x3,0x2,0x1],_0x7a0725=['F','B','S'],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=[_0x563d32(0x238),_0x563d32(0x205)],_0x380120=['C'],_0x2d35a6=['B'];break;case _0x563d32(0x215):_0x3585c0=[0x1,0x2,0x3,0x4,0x5],_0x7a0725=['B','F','S'],_0x114131=[0x5,0x4,0x3,0x2,0x1],_0x22f5d9=[_0x563d32(0x238),_0x563d32(0x205)],_0x380120=['C'],_0x2d35a6=['C'];break;case _0x563d32(0x272):_0x3585c0=[0x5,0x4,0x3,0x2,0x1],_0x7a0725=['F','B','S'],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=[_0x563d32(0x238),_0x563d32(0x205)],_0x380120=['C'],_0x2d35a6=['D'];break;case'Rack\x20E':_0x3585c0=[0x4,0x3,0x2,0x1],_0x7a0725=[0x1,0x2],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=['Level','Floor'],_0x380120=['C'],_0x2d35a6=['E'];break;case _0x563d32(0x22d):_0x3585c0=[0x1,0x2,0x3],_0x7a0725=[0x1,0x2],_0x114131=[0x1,0x2,0x3,0x4,0x5],_0x22f5d9=[_0x563d32(0x238)],_0x380120=['C'],_0x2d35a6=['F'];break;}}return{'levels':_0x3585c0,'Isle':_0x7a0725,'rack':_0x114131,'type':_0x22f5d9,'storage':_0x380120,'rak':_0x2d35a6};}router[a0_0xee4a5a(0x208)](a0_0xee4a5a(0x216),auth,async(_0x28dee9,_0x5bc904)=>{var _0x737063=a0_0xee4a5a;try{const {username:_0xeb6fdc,email:_0x24dd0a,role:_0x4c1a57}=_0x28dee9[_0x737063(0x1ed)],_0x2a941=_0x28dee9['user'],_0x4b5b38=await profile[_0x737063(0x1f9)]({'email':_0x2a941[_0x737063(0x292)]}),_0x4df25e=await master_shop['find'](),_0x3bc28f=await transfers[_0x737063(0x230)](_0x28dee9[_0x737063(0x1d8)]['id']);let _0x57b17e;if(_0x2a941['role']==_0x737063(0x1d1)){const _0xdf366c=await staff[_0x737063(0x1f9)]({'email':_0x2a941[_0x737063(0x292)]});_0x57b17e=await warehouse['aggregate']([{'$match':{'status':_0x737063(0x243),'name':_0xdf366c[_0x737063(0x222)],'warehouse_category':_0x737063(0x1da)}},{'$group':{'_id':_0x737063(0x1cb),'name':{'$first':_0x737063(0x1cb)}}}]);}else _0x57b17e=await warehouse[_0x737063(0x273)]([{'$match':{'status':_0x737063(0x243),'warehouse_category':_0x737063(0x1da)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);const _0x3b3bcd=await warehouse[_0x737063(0x273)]([{'$match':{'name':_0x3bc28f[_0x737063(0x1c4)],'warehouse_category':_0x737063(0x1da)}},{'$unwind':_0x737063(0x1b0)},{'$group':{'_id':_0x737063(0x27b),'name':{'$first':_0x737063(0x241)},'product_stock':{'$first':_0x737063(0x25d)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x737063(0x28a)},'type':{'$first':_0x737063(0x277)},'floorlevel':{'$first':_0x737063(0x237)},'primary_code':{'$first':_0x737063(0x282)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x737063(0x1e0)},'storage':{'$first':_0x737063(0x1e5)},'rack':{'$first':_0x737063(0x2a3)},'expiry_date':{'$first':_0x737063(0x2a1)},'production_date':{'$first':_0x737063(0x1d6)},'room':{'$first':_0x737063(0x284)}}}]),_0x1fcbd3=await product[_0x737063(0x1ea)]({}),_0x3b1fbe=BayBinSelected(_0x3bc28f[_0x737063(0x242)],_0x3bc28f[_0x737063(0x219)]);if(_0x4df25e[0x0][_0x737063(0x233)]==_0x737063(0x1e7)){var _0x1f9a69=users[_0x737063(0x27c)];console[_0x737063(0x1c1)](_0x1f9a69);}else{if(_0x4df25e[0x0]['language']==_0x737063(0x20f))var _0x1f9a69=users[_0x737063(0x20f)];else{if(_0x4df25e[0x0][_0x737063(0x233)]==_0x737063(0x1b1))var _0x1f9a69=users['German'];else{if(_0x4df25e[0x0]['language']==_0x737063(0x275))var _0x1f9a69=users['Spanish'];else{if(_0x4df25e[0x0][_0x737063(0x233)]==_0x737063(0x235))var _0x1f9a69=users[_0x737063(0x235)];else{if(_0x4df25e[0x0]['language']=='Portuguese\x20(BR)')var _0x1f9a69=users[_0x737063(0x1b2)];else{if(_0x4df25e[0x0][_0x737063(0x233)]==_0x737063(0x250))var _0x1f9a69=users[_0x737063(0x250)];else{if(_0x4df25e[0x0][_0x737063(0x233)]==_0x737063(0x22a))var _0x1f9a69=users[_0x737063(0x22c)];}}}}}}}_0x5bc904['render'](_0x737063(0x1ab),{'success':_0x28dee9[_0x737063(0x1de)](_0x737063(0x231)),'errors':_0x28dee9['flash'](_0x737063(0x23e)),'role':_0x2a941,'profile':_0x4b5b38,'master_shop':_0x4df25e,'warehouse':_0x57b17e,'transfer':_0x3bc28f,'stock':_0x3b3bcd,'unit':_0x1fcbd3,'language':_0x1f9a69});}catch(_0x5b497a){console[_0x737063(0x1c1)](_0x5b497a);}}),router[a0_0xee4a5a(0x278)](a0_0xee4a5a(0x216),auth,async(_0x11f978,_0x44afe2)=>{var _0x145c41=a0_0xee4a5a;try{const _0x16e455=_0x11f978[_0x145c41(0x1d8)]['id'],_0x13d19e=await transfers[_0x145c41(0x230)](_0x16e455);_0x44afe2[_0x145c41(0x1c0)](_0x11f978[_0x145c41(0x294)]);return;const {date:_0x24c507,from_warehouse:_0x1091f9,FromRoom_name:_0x195a8a,to_warehouse:_0x6168af,ToRoom_name:_0x103b2c,prod_name:_0x57eb0b,from_prod_qty:_0x4ab805,from_prod_level:_0xca6d82,from_prod_isle:_0x5bd42e,from_prod_pallet:_0x4a2c22,to_prod_qty:_0x57c2ea,to_prod_level:_0x20430c,to_prod_isle:_0x23785e,to_prod_pallet:_0x4948e9,primary_code:_0x40933f,secondary_code:_0x2b02f2,product_code3:_0x417411,note:_0x474b7e,invoice:_0x262e54,expiry_date:_0x53511e}=_0x11f978['body'];if(typeof _0x57eb0b==_0x145c41(0x221))var _0x38641f=[_0x11f978['body'][_0x145c41(0x26f)]],_0x509652=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x236)]],_0x5d10c8=[_0x11f978['body']['from_prod_level']],_0x3c2daa=[_0x11f978['body'][_0x145c41(0x22b)]],_0x397fa9=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x257)]],_0x513506=[_0x11f978['body'][_0x145c41(0x25c)]],_0x3876d4=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x281)]],_0xfd5102=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x232)]],_0x847233=[_0x11f978['body'][_0x145c41(0x252)]],_0xbdd4f2=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x26a)]],_0x5a845f=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x293)]],_0xa95e83=[_0x11f978['body'][_0x145c41(0x1dc)]],_0x233fec=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x283)]],_0x452bc5=[_0x11f978['body'][_0x145c41(0x1bb)]],_0x3908e4=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x229)]],_0x28d053=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x288)]],_0x33f1ad=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x299)]],_0x298410=[_0x11f978['body'][_0x145c41(0x26c)]],_0x372ff5=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x22f)]],_0x44ac16=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x206)]],_0x4bbbac=[_0x11f978[_0x145c41(0x294)]['expiry_date']],_0x5536cb=[_0x11f978['body']['from_storage']],_0x599d5c=[_0x11f978[_0x145c41(0x294)][_0x145c41(0x1c2)]];else var _0x38641f=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x26f)]],_0xa95e83=[..._0x11f978[_0x145c41(0x294)]['storage']],_0x233fec=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x283)]],_0x513506=[..._0x11f978['body']['from_types']],_0x5a845f=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x293)]],_0x509652=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x236)]],_0x5d10c8=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x280)]],_0x3c2daa=[..._0x11f978[_0x145c41(0x294)]['from_prod_isle']],_0x397fa9=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x257)]],_0x3876d4=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x281)]],_0xfd5102=[..._0x11f978['body'][_0x145c41(0x232)]],_0x847233=[..._0x11f978['body'][_0x145c41(0x252)]],_0xbdd4f2=[..._0x11f978['body'][_0x145c41(0x26a)]],_0x452bc5=[..._0x11f978['body']['primary_code']],_0x3908e4=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x229)]],_0x28d053=[..._0x11f978['body'][_0x145c41(0x288)]],_0x33f1ad=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x299)]],_0x298410=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x26c)]],_0x372ff5=[..._0x11f978['body'][_0x145c41(0x22f)]],_0x44ac16=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x206)]],_0x4bbbac=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x28f)]],_0x5536cb=[..._0x11f978[_0x145c41(0x294)]['from_storage']],_0x599d5c=[..._0x11f978[_0x145c41(0x294)][_0x145c41(0x1c2)]];const _0x38d617=_0x38641f['map'](_0x2b23fe=>{return _0x2b23fe={'product_name':_0x2b23fe};});_0x509652[_0x145c41(0x1d2)]((_0x2e16db,_0x98a443)=>{_0x38d617[_0x98a443]['from_quantity']=_0x2e16db;}),_0x5d10c8['forEach']((_0x1343ec,_0x499006)=>{var _0x316f2d=_0x145c41;_0x38d617[_0x499006][_0x316f2d(0x279)]=_0x1343ec;}),_0x3c2daa[_0x145c41(0x1d2)]((_0x48f536,_0x5a57c2)=>{var _0x515c1b=_0x145c41;_0x38d617[_0x5a57c2][_0x515c1b(0x260)]=_0x48f536;}),_0x397fa9[_0x145c41(0x1d2)]((_0x1bd3ce,_0x34e340)=>{var _0x24d93c=_0x145c41;_0x38d617[_0x34e340][_0x24d93c(0x2a0)]=_0x1bd3ce;}),_0x3876d4[_0x145c41(0x1d2)]((_0xae4c16,_0xc4f790)=>{var _0x1a6ce3=_0x145c41;_0x38d617[_0xc4f790][_0x1a6ce3(0x1e2)]=_0xae4c16;}),_0xfd5102[_0x145c41(0x1d2)]((_0x50ed39,_0xa5e3d)=>{var _0x149f14=_0x145c41;_0x38d617[_0xa5e3d][_0x149f14(0x202)]=_0x50ed39;}),_0x847233['forEach']((_0x2f5299,_0x267421)=>{var _0x5189fa=_0x145c41;_0x38d617[_0x267421][_0x5189fa(0x298)]=_0x2f5299;}),_0xbdd4f2[_0x145c41(0x1d2)]((_0x262c3d,_0x2effc6)=>{var _0x40066e=_0x145c41;_0x38d617[_0x2effc6][_0x40066e(0x1d5)]=_0x262c3d;}),_0x452bc5[_0x145c41(0x1d2)]((_0x5b7310,_0x10ea7e)=>{var _0xdeea77=_0x145c41;_0x38d617[_0x10ea7e][_0xdeea77(0x1bb)]=_0x5b7310;}),_0x3908e4[_0x145c41(0x1d2)]((_0x2f7b1e,_0x59cc05)=>{var _0x160b78=_0x145c41;_0x38d617[_0x59cc05][_0x160b78(0x229)]=_0x2f7b1e;}),_0x28d053[_0x145c41(0x1d2)]((_0x1cc57e,_0x38eb80)=>{var _0xc48819=_0x145c41;_0x38d617[_0x38eb80][_0xc48819(0x1bd)]=_0x1cc57e;}),_0x33f1ad[_0x145c41(0x1d2)]((_0x3c71bf,_0x23bcbf)=>{_0x38d617[_0x23bcbf]['maxProducts']=_0x3c71bf;}),_0x298410['forEach']((_0x41fb5e,_0x5a4609)=>{_0x38d617[_0x5a4609]['unit']=_0x41fb5e;}),_0x372ff5[_0x145c41(0x1d2)]((_0x180a90,_0x5605a7)=>{var _0x49359a=_0x145c41;_0x38d617[_0x5605a7][_0x49359a(0x22f)]=_0x180a90;}),_0x44ac16[_0x145c41(0x1d2)]((_0x5c2191,_0x21f77f)=>{var _0x47ed6c=_0x145c41;_0x38d617[_0x21f77f][_0x47ed6c(0x206)]=_0x5c2191;}),_0x4bbbac[_0x145c41(0x1d2)]((_0x5e52ba,_0x2eeaa6)=>{var _0x1088a9=_0x145c41;_0x38d617[_0x2eeaa6][_0x1088a9(0x28f)]=_0x5e52ba;}),_0xa95e83[_0x145c41(0x1d2)]((_0x57c2ae,_0x327a28)=>{var _0x26fa84=_0x145c41;_0x38d617[_0x327a28][_0x26fa84(0x1dc)]=_0x57c2ae;}),_0x233fec[_0x145c41(0x1d2)]((_0x23c4f8,_0x50a45)=>{_0x38d617[_0x50a45]['rack']=_0x23c4f8;}),_0x513506[_0x145c41(0x1d2)]((_0x2378a4,_0x52c4af)=>{_0x38d617[_0x52c4af]['from_types']=_0x2378a4;}),_0x5a845f[_0x145c41(0x1d2)]((_0x450f31,_0x41af26)=>{var _0x299761=_0x145c41;_0x38d617[_0x41af26][_0x299761(0x293)]=_0x450f31;}),_0x5536cb[_0x145c41(0x1d2)]((_0x2f6645,_0x330f8f)=>{var _0x596f74=_0x145c41;_0x38d617[_0x330f8f][_0x596f74(0x1fa)]=_0x2f6645;}),_0x599d5c[_0x145c41(0x1d2)]((_0x3d0025,_0x244df6)=>{var _0x37b54b=_0x145c41;_0x38d617[_0x244df6][_0x37b54b(0x1b4)]=_0x3d0025;});const _0x1cb9c4=_0x38d617[_0x145c41(0x220)](_0x447c1d=>_0x447c1d[_0x145c41(0x1e2)]!=='0'&&_0x447c1d[_0x145c41(0x1e2)]!==''||_0x447c1d[_0x145c41(0x1d5)]!=='0'&&_0x447c1d['to_floorlevel']!=='');var _0x526e03=0x0;_0x1cb9c4[_0x145c41(0x1d2)](_0x3fd885=>{var _0x28a07a=_0x145c41;parseInt(_0x3fd885[_0x28a07a(0x249)])<parseInt(_0x3fd885['to_quantity'])&&_0x526e03++;});if(_0x526e03!=0x0)return _0x11f978['flash'](_0x145c41(0x23e),_0x145c41(0x244)),_0x44afe2[_0x145c41(0x1f0)]('back');const _0x1ccfc7=await warehouse[_0x145c41(0x1f9)]({'name':_0x13d19e[_0x145c41(0x1c4)],'room':_0x13d19e[_0x145c41(0x21e)]});_0x13d19e['product']['forEach'](_0x480ec9=>{var _0x55ca21=_0x145c41;if(_0x480ec9[_0x55ca21(0x1e2)]>0x0){const _0x576688=_0x1ccfc7['product_details'][_0x55ca21(0x1ef)](_0x24ed2f=>{var _0x370836=_0x55ca21;_0x24ed2f[_0x370836(0x1db)]==_0x480ec9[_0x370836(0x1db)]&&_0x24ed2f[_0x370836(0x1e4)]==_0x480ec9[_0x370836(0x2a0)]&&_0x24ed2f[_0x370836(0x217)]==_0x480ec9[_0x370836(0x25c)]&&_0x24ed2f[_0x370836(0x1ba)]==_0x480ec9[_0x370836(0x260)]&&_0x24ed2f['bay']==_0x480ec9[_0x370836(0x279)]&&_0x24ed2f[_0x370836(0x24a)]==_0x480ec9[_0x370836(0x1b4)]&&_0x24ed2f[_0x370836(0x1dc)]==_0x480ec9[_0x370836(0x1fa)]&&(_0x24ed2f[_0x370836(0x1ad)]=parseInt(_0x24ed2f[_0x370836(0x1ad)])+parseInt(_0x480ec9[_0x370836(0x1e2)]));});}}),await _0x1ccfc7[_0x145c41(0x224)]();const _0x509b30=await warehouse[_0x145c41(0x1f9)]({'name':_0x13d19e[_0x145c41(0x242)],'room':_0x13d19e[_0x145c41(0x219)]});_0x13d19e['product'][_0x145c41(0x1d2)](_0x1af6bc=>{var _0x439326=_0x145c41;if(_0x1af6bc[_0x439326(0x1e2)]>0x0){const _0x571424=_0x509b30[_0x439326(0x1c5)]['map'](_0x430776=>{var _0x4830a8=_0x439326;_0x430776[_0x4830a8(0x1db)]==_0x1af6bc[_0x4830a8(0x1db)]&&_0x430776[_0x4830a8(0x1e4)]==_0x1af6bc[_0x4830a8(0x1d5)]&&_0x430776[_0x4830a8(0x217)]==_0x1af6bc[_0x4830a8(0x293)]&&_0x430776[_0x4830a8(0x1ba)]==_0x1af6bc[_0x4830a8(0x298)]&&_0x430776[_0x4830a8(0x1fe)]==_0x1af6bc[_0x4830a8(0x202)]&&_0x430776[_0x4830a8(0x24a)]==_0x1af6bc['rack']&&_0x430776[_0x4830a8(0x1dc)]==_0x1af6bc[_0x4830a8(0x1dc)]&&(_0x430776[_0x4830a8(0x1ad)]=parseInt(_0x430776[_0x4830a8(0x1ad)])-parseInt(_0x1af6bc[_0x4830a8(0x1e2)]));});}}),await _0x509b30[_0x145c41(0x224)](),_0x13d19e[_0x145c41(0x201)]=_0x24c507,_0x13d19e[_0x145c41(0x1c4)]=_0x1091f9,_0x13d19e[_0x145c41(0x242)]=_0x6168af,_0x13d19e[_0x145c41(0x21d)]=_0x1cb9c4,_0x13d19e[_0x145c41(0x1c3)]=_0x474b7e,_0x13d19e[_0x145c41(0x1ac)]=_0x262e54;const _0x1b8f2b=await _0x13d19e['save']();console[_0x145c41(0x1c1)](_0x1b8f2b);const _0x2ae90c=await warehouse[_0x145c41(0x1f9)]({'name':_0x1091f9,'room':_0x195a8a});_0x1b8f2b[_0x145c41(0x21d)][_0x145c41(0x1d2)](_0x131287=>{var _0x384622=_0x145c41;if(_0x131287[_0x384622(0x1e2)]>0x0){const _0x51d417=_0x2ae90c[_0x384622(0x1c5)][_0x384622(0x1ef)](_0x227e5d=>{var _0xdf9b02=_0x384622;_0x227e5d[_0xdf9b02(0x1db)]==_0x131287['product_name']&&_0x227e5d[_0xdf9b02(0x1e4)]==_0x131287['from_floorlevel']&&_0x227e5d[_0xdf9b02(0x217)]==_0x131287[_0xdf9b02(0x25c)]&&_0x227e5d[_0xdf9b02(0x1ba)]==_0x131287['from_bin']&&_0x227e5d[_0xdf9b02(0x1fe)]==_0x131287[_0xdf9b02(0x279)]&&_0x227e5d[_0xdf9b02(0x24a)]==_0x131287[_0xdf9b02(0x1b4)]&&_0x227e5d[_0xdf9b02(0x1dc)]==_0x131287[_0xdf9b02(0x1fa)]&&(_0x227e5d[_0xdf9b02(0x1ad)]=parseInt(_0x227e5d[_0xdf9b02(0x1ad)])-parseInt(_0x131287[_0xdf9b02(0x1e2)]));});}}),await _0x2ae90c['save']();const _0xd8a1f3=await warehouse[_0x145c41(0x1f9)]({'name':_0x6168af,'room':_0x103b2c});_0x1b8f2b[_0x145c41(0x21d)]['forEach'](_0x4365e9=>{var _0x287917=_0x145c41;if(_0x4365e9['to_quantity']>0x0){var _0x2be835=0x0;const _0x376201=_0xd8a1f3['product_details'][_0x287917(0x1ef)](_0x4c7d33=>{var _0x2b02ce=_0x287917;_0x4c7d33[_0x2b02ce(0x1db)]==_0x4365e9[_0x2b02ce(0x1db)]&&_0x4c7d33[_0x2b02ce(0x1e4)]==_0x4365e9[_0x2b02ce(0x1d5)]&&_0x4c7d33[_0x2b02ce(0x217)]==_0x4365e9[_0x2b02ce(0x293)]&&_0x4c7d33['bin']==_0x4365e9[_0x2b02ce(0x298)]&&_0x4c7d33[_0x2b02ce(0x1fe)]==_0x4365e9[_0x2b02ce(0x202)]&&_0x4c7d33['rack']==_0x4365e9['rack']&&_0x4c7d33[_0x2b02ce(0x1dc)]==_0x4365e9[_0x2b02ce(0x1dc)]&&(_0x4c7d33[_0x2b02ce(0x1ad)]=parseInt(_0x4c7d33[_0x2b02ce(0x1ad)])+parseInt(_0x4365e9['to_quantity']),_0x2be835++);});_0x2be835=='0'&&(_0xd8a1f3[_0x287917(0x1c5)]=_0xd8a1f3[_0x287917(0x1c5)]['concat']({'product_name':_0x4365e9['product_name'],'product_stock':_0x4365e9[_0x287917(0x1e2)],'bay':_0x4365e9[_0x287917(0x202)],'bin':_0x4365e9[_0x287917(0x298)],'type':_0x4365e9[_0x287917(0x293)],'floorlevel':_0x4365e9[_0x287917(0x1d5)],'storage':_0x4365e9['storage'],'rack':_0x4365e9['rack'],'product_code':_0x4365e9[_0x287917(0x1bd)],'primary_code':_0x4365e9[_0x287917(0x1bb)],'secondary_code':_0x4365e9[_0x287917(0x229)],'maxProducts':_0x4365e9[_0x287917(0x27f)],'storage':_0x4365e9[_0x287917(0x1dc)],'rack':_0x4365e9[_0x287917(0x24a)]}));}}),await _0xd8a1f3['save'](),_0x11f978[_0x145c41(0x1de)](_0x145c41(0x231),_0x145c41(0x218)),_0x44afe2[_0x145c41(0x1f0)](_0x145c41(0x1e3));}catch(_0x1e0e2a){console['log'](_0x1e0e2a);}}),router[a0_0xee4a5a(0x278)](a0_0xee4a5a(0x1b7),async(_0x2914b2,_0x543a7a)=>{var _0x322d7d=a0_0xee4a5a;const {FromWareHouse:_0x5bd18f,FromRoom:_0x3982b3,ToWarehouse:_0x5e721d,ToRoom:_0x2b3c0f,primary_code:_0x564381,Roomslist:_0x3e6fd0}=_0x2914b2[_0x322d7d(0x294)],_0x320724=_0x3e6fd0[_0x322d7d(0x268)](','),_0x47fa49=[];async function _0x5d5869(_0x4d774b){var _0x11822e=_0x322d7d;const _0x25134e=await warehouse[_0x11822e(0x273)]([{'$match':{'name':_0x5bd18f,'room':_0x4d774b}},{'$unwind':_0x11822e(0x1b0)},{'$match':{'product_details.primary_code':_0x564381}},{'$group':{'_id':_0x11822e(0x27b),'name':{'$first':_0x11822e(0x241)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x11822e(0x282)},'secondary_code':{'$first':_0x11822e(0x226)},'product_code':{'$first':_0x11822e(0x1e0)},'level':{'$first':_0x11822e(0x1dd)},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x11822e(0x237)},'unit':{'$first':_0x11822e(0x25f)},'secondary_unit':{'$first':_0x11822e(0x247)},'storage':{'$first':_0x11822e(0x1e5)},'rack':{'$first':_0x11822e(0x2a3)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x11822e(0x245)},'maxPerUnit':{'$first':_0x11822e(0x251)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x11822e(0x284)},'maxProducts':{'$first':_0x11822e(0x225)},'invoice_product':{'$first':_0x11822e(0x291)}}}]),_0x2519bd=await warehouse['aggregate']([{'$match':{'name':_0x5bd18f,'room':_0x4d774b}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x564381}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x11822e(0x226)},'product_code':{'$first':_0x11822e(0x1e0)},'level':{'$first':_0x11822e(0x1dd)},'isle':{'$first':_0x11822e(0x28a)},'type':{'$first':_0x11822e(0x277)},'pallet':{'$first':_0x11822e(0x237)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x11822e(0x247)},'storage':{'$first':_0x11822e(0x1e5)},'rack':{'$first':_0x11822e(0x2a3)},'expiry_date':{'$first':_0x11822e(0x2a1)},'production_date':{'$first':_0x11822e(0x1d6)},'batch_code':{'$first':_0x11822e(0x245)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x11822e(0x284)},'maxProducts':{'$first':_0x11822e(0x225)},'invoice_product':{'$first':_0x11822e(0x291)}}}]);if(_0x25134e[_0x11822e(0x1c9)]>0x0)_0x47fa49[_0x11822e(0x1ca)](_0x25134e);else _0x2519bd[_0x11822e(0x1c9)]>0x0&&_0x47fa49[_0x11822e(0x1ca)](_0x2519bd);}const _0x562c32=_0x320724[_0x322d7d(0x1ef)](_0x5723ce=>_0x5d5869(_0x5723ce));await Promise[_0x322d7d(0x29a)](_0x562c32),_0x543a7a['json'](_0x47fa49);}),router[a0_0xee4a5a(0x278)](a0_0xee4a5a(0x24f),async(_0x5c2a8d,_0x3864b7)=>{var _0x568b2f=a0_0xee4a5a;try{const {FromWareHouse:_0x11f3b4,FromRoom:_0x15056e,ToWarehouse:_0x47c05a,ToRoom:_0x1ebef1,secondary_code:_0xbb0109}=_0x5c2a8d[_0x568b2f(0x294)],_0x2a0e04=await warehouse[_0x568b2f(0x273)]([{'$match':{'name':_0x11f3b4}},{'$unwind':_0x568b2f(0x1b0)},{'$match':{'product_details.secondary_code':_0xbb0109}},{'$group':{'_id':_0x568b2f(0x27b),'name':{'$first':_0x568b2f(0x241)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x568b2f(0x226)},'product_code':{'$first':_0x568b2f(0x1e0)},'instock':{'$first':_0x568b2f(0x25d)},'warehouse':{'$first':_0x568b2f(0x1cb)},'level':{'$first':_0x568b2f(0x1f6)},'isle':{'$first':_0x568b2f(0x29d)},'pallet':{'$first':_0x568b2f(0x264)},'maxProducts':{'$first':_0x568b2f(0x225)},'unit':{'$first':_0x568b2f(0x25f)}}}]);_0x3864b7[_0x568b2f(0x1b9)](0xc8)[_0x568b2f(0x1c0)](_0x2a0e04);}catch(_0x853c0b){_0x3864b7[_0x568b2f(0x1b9)](0x194)[_0x568b2f(0x1c0)]({'message':_0x853c0b[_0x568b2f(0x25e)]});}}),router[a0_0xee4a5a(0x278)]('/barcode_scanner3',async(_0x57ebb3,_0x4a00e6)=>{var _0x7b33f9=a0_0xee4a5a;try{const {FromWareHouse:_0x293d25,FromRoom:_0x28727a,ToWarehouse:_0x564afc,ToRoom:_0x4bbf7b,product_code:_0x467645}=_0x57ebb3[_0x7b33f9(0x294)],_0x43ed3a=await warehouse[_0x7b33f9(0x273)]([{'$match':{'name':_0x293d25}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x467645}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'primary_code':{'$first':_0x7b33f9(0x282)},'secondary_code':{'$first':_0x7b33f9(0x226)},'product_code':{'$first':_0x7b33f9(0x1e0)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x7b33f9(0x1cb)},'level':{'$first':_0x7b33f9(0x1f6)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x7b33f9(0x225)},'unit':{'$first':'$product_details.unit'}}}]);_0x4a00e6['status'](0xc8)[_0x7b33f9(0x1c0)](_0x43ed3a);}catch(_0x12fba1){_0x4a00e6[_0x7b33f9(0x1b9)](0x194)[_0x7b33f9(0x1c0)]({'message':_0x12fba1['message']});}}),router[a0_0xee4a5a(0x278)]('/CheckingWarehouse',async(_0x35155b,_0x31034c)=>{var _0x4f77bc=a0_0xee4a5a;const {level:_0x50a0b9,isle:_0x210549,pallet:_0x458b7a,warehouses:_0x124257,room:_0x3d3067}=_0x35155b[_0x4f77bc(0x294)];try{const _0x583eab=await warehouse[_0x4f77bc(0x273)]([{'$match':{'name':_0x124257,'room':_0x3d3067}},{'$unwind':_0x4f77bc(0x1b0)},{'$match':{'product_details.level':parseInt(_0x50a0b9),'product_details.isle':_0x210549,'product_details.pallet':parseInt(_0x458b7a)}},{'$group':{'_id':_0x4f77bc(0x27b),'name':{'$first':_0x4f77bc(0x241)},'product_stock':{'$first':_0x4f77bc(0x25d)},'level':{'$first':_0x4f77bc(0x1f6)},'isle':{'$first':_0x4f77bc(0x29d)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x4f77bc(0x225)}}}]);_0x31034c[_0x4f77bc(0x1b9)](0xc8)[_0x4f77bc(0x1c0)](_0x583eab);}catch(_0x314da2){_0x31034c[_0x4f77bc(0x1b9)](0x194)[_0x4f77bc(0x1c0)]({'message':_0x314da2[_0x4f77bc(0x25e)]});}}),module[a0_0xee4a5a(0x27a)]=router;