function a0_0x4d60(_0x51d2eb,_0x1c587c){var _0x379864=a0_0x3798();return a0_0x4d60=function(_0x4d6062,_0x5026f4){_0x4d6062=_0x4d6062-0x198;var _0x474c41=_0x379864[_0x4d6062];return _0x474c41;},a0_0x4d60(_0x51d2eb,_0x1c587c);}var a0_0x578046=a0_0x4d60;(function(_0x50eb3d,_0x147d77){var _0x762174=a0_0x4d60,_0x27f8d5=_0x50eb3d();while(!![]){try{var _0x18edd3=parseInt(_0x762174(0x229))/0x1+parseInt(_0x762174(0x268))/0x2*(parseInt(_0x762174(0x269))/0x3)+parseInt(_0x762174(0x228))/0x4+-parseInt(_0x762174(0x21d))/0x5*(parseInt(_0x762174(0x1e1))/0x6)+parseInt(_0x762174(0x1f3))/0x7+-parseInt(_0x762174(0x222))/0x8+-parseInt(_0x762174(0x1e8))/0x9;if(_0x18edd3===_0x147d77)break;else _0x27f8d5['push'](_0x27f8d5['shift']());}catch(_0x354ccd){_0x27f8d5['push'](_0x27f8d5['shift']());}}}(a0_0x3798,0x31582),require(a0_0x578046(0x25d))[a0_0x578046(0x1ea)]());const express=require(a0_0x578046(0x1dd)),app=express(),router=express[a0_0x578046(0x246)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x578046(0x1c8)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x578046(0x1ac)),mongoose=require(a0_0x578046(0x292));router[a0_0x578046(0x22e)](a0_0x578046(0x1a5),auth,async(_0xe0ae9d,_0x4bb233)=>{var _0x39f0fe=a0_0x578046;try{const {username:_0x11554c,email:_0x7ad5f3,role:_0x1e883f}=_0xe0ae9d[_0x39f0fe(0x1d9)],_0xa82059=_0xe0ae9d[_0x39f0fe(0x1d9)],_0x2d4ff4=await profile[_0x39f0fe(0x19a)]({'email':_0xa82059[_0x39f0fe(0x25a)]}),_0x1f0994=await master_shop[_0x39f0fe(0x264)]();console[_0x39f0fe(0x217)](_0x39f0fe(0x1e6),_0x1f0994);let _0xbd9ced;if(_0xa82059[_0x39f0fe(0x22c)]==_0x39f0fe(0x282)){const _0xad1121=await staff[_0x39f0fe(0x19a)]({'email':_0xa82059[_0x39f0fe(0x25a)]});_0xbd9ced=await transfers['find']({'from_warehouse':_0xad1121[_0x39f0fe(0x27b)]});}else _0xbd9ced=await transfers['aggregate']([{'$unwind':_0x39f0fe(0x284)},{'$group':{'_id':'$_id','invoice':{'$first':_0x39f0fe(0x204)},'date':{'$first':_0x39f0fe(0x1cf)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x39f0fe(0x23b)},'to_room_name':{'$addToSet':_0x39f0fe(0x24f)},'finalize':{'$first':_0x39f0fe(0x233)},'isAllowEdit':{'$first':_0x39f0fe(0x1f7)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]==_0x39f0fe(0x1eb)){var _0x2ac69c=users[_0x39f0fe(0x258)];console['log'](_0x2ac69c);}else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]==_0x39f0fe(0x286))var _0x2ac69c=users[_0x39f0fe(0x286)];else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]==_0x39f0fe(0x257))var _0x2ac69c=users[_0x39f0fe(0x257)];else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]=='Spanish')var _0x2ac69c=users['Spanish'];else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]==_0x39f0fe(0x1d7))var _0x2ac69c=users['French'];else{if(_0x1f0994[0x0]['language']==_0x39f0fe(0x215))var _0x2ac69c=users[_0x39f0fe(0x1c7)];else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]==_0x39f0fe(0x232))var _0x2ac69c=users[_0x39f0fe(0x232)];else{if(_0x1f0994[0x0][_0x39f0fe(0x1bb)]=='Arabic\x20(ae)')var _0x2ac69c=users['Arabic'];}}}}}}}_0x4bb233['render'](_0x39f0fe(0x201),{'success':_0xe0ae9d[_0x39f0fe(0x1ce)](_0x39f0fe(0x1d4)),'errors':_0xe0ae9d['flash'](_0x39f0fe(0x19e)),'role':_0xa82059,'profile':_0x2d4ff4,'master_shop':_0x1f0994,'transfer':_0xbd9ced,'language':_0x2ac69c});}catch(_0x5231e4){console[_0x39f0fe(0x217)](_0x5231e4);}});async function getRandom8DigitNumber(){var _0x260608=a0_0x578046;const _0x477aa5=0x989680,_0x506254=0x5f5e0ff,_0x542fbb=Math['floor'](Math['random']()*(_0x506254-_0x477aa5+0x1))+_0x477aa5;var _0x3c3bf2;const _0x5cccd4=await transfers[_0x260608(0x19a)]({'invoice':'TRF-'+_0x542fbb});return _0x5cccd4&&_0x5cccd4[_0x260608(0x1e9)]>0x0?_0x3c3bf2=_0x260608(0x28f)+_0x542fbb:_0x3c3bf2=_0x260608(0x28f)+_0x542fbb,_0x3c3bf2;}router['get'](a0_0x578046(0x270),auth,async(_0x51ab2c,_0x235c80)=>{var _0x2e672d=a0_0x578046;try{const {username:_0x35bd5b,email:_0x506717,role:_0x4bfaf9}=_0x51ab2c['user'],_0x1f035b=_0x51ab2c[_0x2e672d(0x1d9)],_0x19bd1f=await profile[_0x2e672d(0x19a)]({'email':_0x1f035b[_0x2e672d(0x25a)]}),_0x2a0ffe=await master_shop['find']();console['log'](_0x2e672d(0x1e6),_0x2a0ffe);let _0xa2ed9b;if(_0x1f035b[_0x2e672d(0x22c)]==_0x2e672d(0x282)){const _0xf84a89=await staff[_0x2e672d(0x19a)]({'email':_0x1f035b['email']});_0xa2ed9b=await warehouse['aggregate']([{'$match':{'status':_0x2e672d(0x1f2),'name':_0xf84a89[_0x2e672d(0x27b)],'warehouse_category':_0x2e672d(0x1cd)}},{'$group':{'_id':_0x2e672d(0x235),'name':{'$first':_0x2e672d(0x235)}}}]);}else _0xa2ed9b=await warehouse[_0x2e672d(0x279)]([{'$match':{'status':_0x2e672d(0x1f2),'warehouse_category':_0x2e672d(0x1cd)}},{'$group':{'_id':_0x2e672d(0x235),'name':{'$first':'$name'}}}]);var _0x7c4363=[_0x2e672d(0x20d),'Enclosed',_0x2e672d(0x1ec)];const _0x170e07=await transfers[_0x2e672d(0x264)]({}),_0x15a33c=_0x170e07[_0x2e672d(0x1e9)]+0x1,_0x252b93='TRF-'+_0x15a33c[_0x2e672d(0x1fe)]()['padStart'](0x5,'0');if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]==_0x2e672d(0x1eb)){var _0xfbc4b=users[_0x2e672d(0x258)];console['log'](_0xfbc4b);}else{if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]==_0x2e672d(0x286))var _0xfbc4b=users['Hindi'];else{if(_0x2a0ffe[0x0]['language']==_0x2e672d(0x257))var _0xfbc4b=users[_0x2e672d(0x257)];else{if(_0x2a0ffe[0x0]['language']==_0x2e672d(0x288))var _0xfbc4b=users[_0x2e672d(0x288)];else{if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]==_0x2e672d(0x1d7))var _0xfbc4b=users[_0x2e672d(0x1d7)];else{if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]==_0x2e672d(0x215))var _0xfbc4b=users[_0x2e672d(0x1c7)];else{if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]==_0x2e672d(0x232))var _0xfbc4b=users[_0x2e672d(0x232)];else{if(_0x2a0ffe[0x0][_0x2e672d(0x1bb)]=='Arabic\x20(ae)')var _0xfbc4b=users[_0x2e672d(0x1bf)];}}}}}}}const _0x2b11c8=getRandom8DigitNumber();_0x2b11c8[_0x2e672d(0x1a8)](_0x287b41=>{var _0x14cc2d=_0x2e672d;_0x235c80[_0x14cc2d(0x221)](_0x14cc2d(0x1b4),{'success':_0x51ab2c['flash'](_0x14cc2d(0x1d4)),'errors':_0x51ab2c[_0x14cc2d(0x1ce)](_0x14cc2d(0x19e)),'role':_0x1f035b,'profile':_0x19bd1f,'master_shop':_0x2a0ffe,'warehouse':_0xa2ed9b,'language':_0xfbc4b,'rooms_data':_0x7c4363,'invoice':_0x287b41});})[_0x2e672d(0x26d)](_0x20d0a7=>{var _0x20a669=_0x2e672d;_0x51ab2c[_0x20a669(0x1ce)](_0x20a669(0x19e),_0x20a669(0x255)),_0x235c80[_0x20a669(0x283)](_0x20a669(0x256));});}catch(_0x4d3ad7){console[_0x2e672d(0x217)](_0x4d3ad7);}}),router['post'](a0_0x578046(0x270),auth,async(_0x11414d,_0xe8145e)=>{var _0xb7380=a0_0x578046;try{console[_0xb7380(0x217)](_0x11414d[_0xb7380(0x19c)]);const {date:_0x311e77,from_warehouse:_0x3471a2,FromRoom_name:_0x25a257,to_warehouse:_0x2669f4,ToRoom_name:_0x1f4408,prod_name:_0x17e43a,from_prod_qty:_0x2a3428,from_prod_level:_0x442e4a,from_prod_isle:_0x23bdef,from_prod_pallet:_0x5025d7,to_prod_qty:_0x18d2a1,to_prod_level:_0x54714b,to_prod_isle:_0x52aa57,to_prod_pallet:_0x55c6f8,primary_code:_0xc36517,secondary_code:_0x4b4aa3,product_code3:_0x49ae6a,note:_0x5bc75d,MaxStocks_data2:_0x386095,invoice:_0x30ffec,expiry_date:_0x801c18}=_0x11414d[_0xb7380(0x19c)];if(typeof _0x17e43a==_0xb7380(0x225))var _0x3c6b16=[_0x11414d['body'][_0xb7380(0x259)]],_0x18d254=[_0x11414d[_0xb7380(0x19c)]['from_prod_qty']],_0x5de531=[_0x11414d['body'][_0xb7380(0x20c)]],_0x5510f8=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x23a)]],_0xee5dd=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x1f1)]],_0x4abebc=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x20e)]],_0x559de5=[_0x11414d[_0xb7380(0x19c)]['secondary_code']],_0x424f4b=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x1bd)]],_0x119050=[_0x11414d['body'][_0xb7380(0x1a2)]],_0x39a752=[_0x11414d[_0xb7380(0x19c)]['primary_unit']],_0x98b746=[_0x11414d[_0xb7380(0x19c)]['secondary_unit']],_0x319220=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x247)]],_0x3079c4=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x227)]],_0x7f7044=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x280)]],_0x17ce6a=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x231)]],_0xb43a3c=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x281)]],_0x2eee4d=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x260)]],_0x4b9a86=[_0x11414d[_0xb7380(0x19c)]['ToRoomAssigned']],_0x763bde=[_0x11414d['body'][_0xb7380(0x244)]],_0x1abcaa=[_0x11414d[_0xb7380(0x19c)][_0xb7380(0x205)]],_0x500464=[_0x11414d['body'][_0xb7380(0x20b)]];else var _0x3c6b16=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x259)]],_0x18d254=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x274)]],_0x5de531=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x20c)]],_0x5510f8=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x23a)]],_0xee5dd=[..._0x11414d[_0xb7380(0x19c)]['to_prod_level']],_0x4abebc=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x20e)]],_0x559de5=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x273)]],_0x424f4b=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x1bd)]],_0x119050=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x1a2)]],_0x39a752=[..._0x11414d[_0xb7380(0x19c)]['primary_unit']],_0x98b746=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x28c)]],_0x319220=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x247)]],_0x3079c4=[..._0x11414d['body']['expiry_date']],_0x7f7044=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x280)]],_0x17ce6a=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x231)]],_0xb43a3c=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x281)]],_0x2eee4d=[..._0x11414d[_0xb7380(0x19c)]['RoomAssigned']],_0x4b9a86=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x19d)]],_0x763bde=[..._0x11414d[_0xb7380(0x19c)][_0xb7380(0x244)]],_0x1abcaa=[..._0x11414d['body'][_0xb7380(0x205)]],_0x500464=[..._0x11414d[_0xb7380(0x19c)]['id_transaction']];const _0x160717=_0x3c6b16[_0xb7380(0x291)](_0x330bf3=>{return _0x330bf3={'product_name':_0x330bf3};});_0x18d254[_0xb7380(0x1b0)]((_0x3d560a,_0x1dfbf9)=>{var _0x437285=_0xb7380;_0x160717[_0x1dfbf9][_0x437285(0x275)]=_0x3d560a;}),_0x763bde[_0xb7380(0x1b0)]((_0x35ea3c,_0x1ae419)=>{var _0x399ccf=_0xb7380;_0x160717[_0x1ae419][_0x399ccf(0x244)]=_0x35ea3c;}),_0x1abcaa[_0xb7380(0x1b0)]((_0x5f451c,_0x40357c)=>{_0x160717[_0x40357c]['To_invoice']=_0x5f451c;}),_0x500464['forEach']((_0x2f009d,_0x16ef2f)=>{_0x160717[_0x16ef2f]['id_transaction_id']=_0x2f009d;}),_0x5de531[_0xb7380(0x1b0)]((_0x523f11,_0x295761)=>{_0x2eee4d['forEach']((_0x5e076c,_0x284c70)=>{var _0x13ab76=a0_0x4d60;if(_0x5e076c==_0x13ab76(0x1af)&&_0x295761==_0x284c70){var _0xd9f0eb=_0x523f11[_0x13ab76(0x1e2)](0x3);_0x160717[_0x295761][_0x13ab76(0x293)]=_0x523f11[0x0],_0x160717[_0x295761][_0x13ab76(0x19f)]=_0x523f11[0x1],_0x160717[_0x295761]['from_bay']=0x0,_0x160717[_0x295761][_0x13ab76(0x1c9)]=0x0,_0x160717[_0x295761][_0x13ab76(0x199)]=_0x13ab76(0x25f),_0x160717[_0x295761][_0x13ab76(0x1e5)]=_0xd9f0eb;}else{if(_0x5e076c=='Shelves'&&_0x295761==_0x284c70){var _0xd9f0eb=_0x523f11[_0x13ab76(0x1e2)](0x3);_0x160717[_0x295761]['from_storage']=_0x523f11[0x0],_0x160717[_0x295761][_0x13ab76(0x19f)]=_0x523f11[0x1],_0x160717[_0x295761][_0x13ab76(0x26c)]=0x0,_0x160717[_0x295761][_0x13ab76(0x1c9)]=0x0,_0x160717[_0x295761][_0x13ab76(0x199)]=_0x13ab76(0x25f),_0x160717[_0x295761][_0x13ab76(0x1e5)]=_0x523f11[0x5];}else{if(_0x295761==_0x284c70){if(_0x523f11[0x0]=='A'&&_0x523f11[0x1]=='L'&&_0x523f11[0x2]=='L')console['log'](_0x5e076c+_0x13ab76(0x1b5)+_0x295761+_0x13ab76(0x1b5)+_0x284c70+_0x13ab76(0x1b5)+_0x523f11+_0x13ab76(0x1da)),_0x160717[_0x295761][_0x13ab76(0x293)]=_0x523f11[0x0],_0x160717[_0x295761]['from_rack']=_0x523f11[0x1],_0x160717[_0x295761]['from_bay']=0x0,_0x160717[_0x295761][_0x13ab76(0x1c9)]=0x0,_0x160717[_0x295761]['from_types']=_0x13ab76(0x25f),_0x160717[_0x295761][_0x13ab76(0x1e5)]=_0x523f11[0x3];else{var _0x4063fd;if(_0x523f11[0x4]=='L')_0x4063fd=_0x13ab76(0x1f4);else _0x523f11[0x4]=='F'&&(_0x4063fd='Floor');_0x160717[_0x295761]['from_storage']=_0x523f11[0x0],_0x160717[_0x295761][_0x13ab76(0x19f)]=_0x523f11[0x1],_0x160717[_0x295761][_0x13ab76(0x26c)]=_0x523f11[0x2],_0x160717[_0x295761]['from_bin']=_0x523f11[0x3],_0x160717[_0x295761][_0x13ab76(0x199)]=_0x4063fd,_0x160717[_0x295761][_0x13ab76(0x1e5)]=_0x523f11[0x5];}}}}});}),_0x5510f8[_0xb7380(0x1b0)]((_0x421a88,_0xce612c)=>{var _0x44101d=_0xb7380;_0x160717[_0xce612c][_0x44101d(0x23c)]=_0x421a88;}),_0xee5dd['forEach']((_0x28c88a,_0x53f640)=>{var _0x114230=_0xb7380;_0x4b9a86[_0x114230(0x1b0)]((_0x27298e,_0x636905)=>{var _0x42c918=_0x114230;if(_0x27298e==_0x42c918(0x1af)&&_0x53f640==_0x636905){var _0x924ab6=_0x28c88a[_0x42c918(0x1e2)](0x3);_0x160717[_0x53f640][_0x42c918(0x1b9)]=_0x28c88a[0x0],_0x160717[_0x53f640][_0x42c918(0x248)]=_0x28c88a[0x1],_0x160717[_0x53f640][_0x42c918(0x1c1)]=0x0,_0x160717[_0x53f640][_0x42c918(0x1d8)]=0x0,_0x160717[_0x53f640]['to_types']=_0x42c918(0x25f),_0x160717[_0x53f640][_0x42c918(0x208)]=_0x924ab6;}else{if(_0x27298e==_0x42c918(0x1fa)&&_0x53f640==_0x636905){var _0x924ab6=_0x28c88a['slice'](0x3);_0x160717[_0x53f640][_0x42c918(0x1b9)]=_0x28c88a[0x0],_0x160717[_0x53f640][_0x42c918(0x248)]=_0x28c88a[0x1],_0x160717[_0x53f640][_0x42c918(0x1c1)]=0x0,_0x160717[_0x53f640][_0x42c918(0x1d8)]=0x0,_0x160717[_0x53f640][_0x42c918(0x1ff)]=_0x42c918(0x25f),_0x160717[_0x53f640]['to_floorlevel']=_0x28c88a[0x5];}else{if(_0x53f640==_0x636905){if(_0x28c88a[0x0]=='A'&&_0x28c88a[0x1]=='L'&&_0x28c88a[0x2]=='L')console[_0x42c918(0x217)](_0x27298e+_0x42c918(0x1b5)+_0x53f640+_0x42c918(0x1b5)+_0x636905+'\x20<>\x20'+_0x28c88a+_0x42c918(0x1da)),_0x160717[_0x53f640]['storage']=_0x28c88a[0x0],_0x160717[_0x53f640][_0x42c918(0x248)]=_0x28c88a[0x1],_0x160717[_0x53f640][_0x42c918(0x1c1)]=0x0,_0x160717[_0x53f640][_0x42c918(0x1d8)]=0x0,_0x160717[_0x53f640][_0x42c918(0x1ff)]=_0x42c918(0x25f),_0x160717[_0x53f640]['to_floorlevel']=_0x28c88a[0x3];else{var _0x50dc00;if(_0x28c88a[0x4]=='L')_0x50dc00=_0x42c918(0x1f4);else _0x28c88a[0x4]=='F'&&(_0x50dc00=_0x42c918(0x25f));_0x160717[_0x53f640][_0x42c918(0x1b9)]=_0x28c88a[0x0],_0x160717[_0x53f640][_0x42c918(0x248)]=_0x28c88a[0x1],_0x160717[_0x53f640][_0x42c918(0x1c1)]=_0x28c88a[0x2],_0x160717[_0x53f640][_0x42c918(0x1d8)]=_0x28c88a[0x3],_0x160717[_0x53f640]['to_types']=_0x50dc00,_0x160717[_0x53f640][_0x42c918(0x208)]=_0x28c88a[0x5];}}}}});}),_0x4abebc[_0xb7380(0x1b0)]((_0x1cf0d7,_0x4ebee9)=>{var _0x19cbc6=_0xb7380;_0x160717[_0x4ebee9][_0x19cbc6(0x20e)]=_0x1cf0d7;}),_0x559de5[_0xb7380(0x1b0)]((_0x433d0e,_0xa3f22)=>{var _0x5d9ceb=_0xb7380;_0x160717[_0xa3f22][_0x5d9ceb(0x273)]=_0x433d0e;}),_0x424f4b[_0xb7380(0x1b0)]((_0x389c13,_0x5ab441)=>{_0x160717[_0x5ab441]['product_code']=_0x389c13;}),_0x119050[_0xb7380(0x1b0)]((_0x2df161,_0x4e04e1)=>{_0x160717[_0x4e04e1]['maxProducts']=_0x2df161;}),_0x39a752[_0xb7380(0x1b0)]((_0x4bc642,_0x24401d)=>{_0x160717[_0x24401d]['unit']=_0x4bc642;}),_0x98b746[_0xb7380(0x1b0)]((_0x701dc5,_0x2a4289)=>{var _0x2ad266=_0xb7380;_0x160717[_0x2a4289][_0x2ad266(0x28c)]=_0x701dc5;}),_0x319220[_0xb7380(0x1b0)]((_0x53b150,_0x42a982)=>{var _0x38a148=_0xb7380;_0x160717[_0x42a982][_0x38a148(0x247)]=_0x53b150;}),_0x3079c4[_0xb7380(0x1b0)]((_0x2d70fc,_0x55613e)=>{_0x160717[_0x55613e]['expiry_date']=_0x2d70fc;}),_0x7f7044[_0xb7380(0x1b0)]((_0x188986,_0x484cf1)=>{var _0x2541cc=_0xb7380;_0x160717[_0x484cf1][_0x2541cc(0x21a)]=_0x188986;}),_0x17ce6a[_0xb7380(0x1b0)]((_0x1244f1,_0x216b88)=>{_0x160717[_0x216b88]['production_date']=_0x1244f1;}),_0xb43a3c[_0xb7380(0x1b0)]((_0x38f19d,_0x1c1af7)=>{_0x160717[_0x1c1af7]['prod_cat']=_0x38f19d;}),_0x2eee4d[_0xb7380(0x1b0)]((_0x352e97,_0x259b1b)=>{var _0x412975=_0xb7380;_0x160717[_0x259b1b][_0x412975(0x23f)]=_0x352e97;}),_0x4b9a86[_0xb7380(0x1b0)]((_0x2e84e9,_0x6b1eec)=>{var _0x3a07a9=_0xb7380;_0x160717[_0x6b1eec][_0x3a07a9(0x21c)]=_0x2e84e9;});const _0x370de5=_0x160717[_0xb7380(0x251)](_0x16e619=>_0x16e619[_0xb7380(0x23c)]!=='0'&&_0x16e619[_0xb7380(0x23c)]!==''||_0x16e619[_0xb7380(0x208)]!=='0'&&_0x16e619[_0xb7380(0x208)]!==''),_0x57bdce=new transfers({'date':_0x311e77,'from_warehouse':_0x3471a2,'to_warehouse':_0x2669f4,'product':_0x370de5,'note':_0x5bc75d,'invoice':_0x30ffec}),_0x4cad23=await _0x57bdce[_0xb7380(0x28d)]();_0x11414d['flash'](_0xb7380(0x1d4),'Product\x20Transfer\x20successfully'),_0xe8145e['redirect']('/transfer/preview/'+_0x4cad23['_id']);}catch(_0x2dca6e){console[_0xb7380(0x217)](_0x2dca6e),_0xe8145e[_0xb7380(0x1fc)](0xc8)['json']({'errorMessage':_0x2dca6e[_0xb7380(0x261)]});}}),router[a0_0x578046(0x22e)](a0_0x578046(0x1ed),auth,async(_0x174064,_0x67e414)=>{var _0x3a2acc=a0_0x578046;try{const {username:_0x4796f4,email:_0x30f934,role:_0x3fd2b8}=_0x174064[_0x3a2acc(0x1d9)],_0x57bbb8=_0x174064[_0x3a2acc(0x1d9)],_0x4835b7=await profile[_0x3a2acc(0x19a)]({'email':_0x57bbb8['email']}),_0x423181=await master_shop[_0x3a2acc(0x264)]();console[_0x3a2acc(0x217)](_0x3a2acc(0x1e6),_0x423181);const _0x4b8751=await transfers[_0x3a2acc(0x1dc)](_0x174064[_0x3a2acc(0x1fb)]['id']);let _0x5a5bc7=new Date(_0x4b8751['expiry_date']),_0x2bad8e=('0'+_0x5a5bc7['getDate']())['slice'](-0x2),_0x599992=('0'+(_0x5a5bc7[_0x3a2acc(0x243)]()+0x1))['slice'](-0x2),_0x1590da=_0x5a5bc7[_0x3a2acc(0x19b)](),_0x116963=_0x1590da+'-'+_0x599992+'-'+_0x2bad8e,_0x5a1be5;if(_0x57bbb8[_0x3a2acc(0x22c)]==_0x3a2acc(0x282)){const _0x5d51be=await staff['findOne']({'email':_0x57bbb8['email']});_0x5a1be5=await warehouse[_0x3a2acc(0x264)]({'status':'Enabled','name':_0x5d51be['warehouse'],'warehouse_category':_0x3a2acc(0x1cd)});}else _0x5a1be5=await warehouse[_0x3a2acc(0x264)]({'status':_0x3a2acc(0x1f2),'warehouse_category':_0x3a2acc(0x1cd)});const _0x3d8067=await warehouse[_0x3a2acc(0x279)]([{'$match':{'name':_0x4b8751[_0x3a2acc(0x24e)]}},{'$unwind':_0x3a2acc(0x265)},{'$group':{'_id':_0x3a2acc(0x28e),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3a2acc(0x230)},'bay':{'$first':_0x3a2acc(0x211)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x3a2acc(0x272)},'floorlevel':{'$first':_0x3a2acc(0x1a6)},'primary_code':{'$first':_0x3a2acc(0x20f)},'secondary_code':{'$first':_0x3a2acc(0x253)},'product_code':{'$first':_0x3a2acc(0x24a)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x3a2acc(0x241)},'expiry_date':{'$first':_0x3a2acc(0x1b8)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':'$room'}}}]);if(_0x423181[0x0][_0x3a2acc(0x1bb)]==_0x3a2acc(0x1eb)){var _0x1032cc=users[_0x3a2acc(0x258)];console['log'](_0x1032cc);}else{if(_0x423181[0x0]['language']==_0x3a2acc(0x286))var _0x1032cc=users['Hindi'];else{if(_0x423181[0x0][_0x3a2acc(0x1bb)]==_0x3a2acc(0x257))var _0x1032cc=users['German'];else{if(_0x423181[0x0]['language']==_0x3a2acc(0x288))var _0x1032cc=users[_0x3a2acc(0x288)];else{if(_0x423181[0x0][_0x3a2acc(0x1bb)]=='French')var _0x1032cc=users['French'];else{if(_0x423181[0x0]['language']=='Portuguese\x20(BR)')var _0x1032cc=users[_0x3a2acc(0x1c7)];else{if(_0x423181[0x0]['language']=='Chinese')var _0x1032cc=users['Chinese'];else{if(_0x423181[0x0][_0x3a2acc(0x1bb)]==_0x3a2acc(0x1c4))var _0x1032cc=users[_0x3a2acc(0x1bf)];}}}}}}}_0x67e414['render']('edit_transfer_view',{'success':_0x174064[_0x3a2acc(0x1ce)](_0x3a2acc(0x1d4)),'errors':_0x174064[_0x3a2acc(0x1ce)]('errors'),'role':_0x57bbb8,'profile':_0x4835b7,'master_shop':_0x423181,'warehouse':_0x5a1be5,'transfer':_0x4b8751,'stock':_0x3d8067,'language':_0x1032cc});}catch(_0x363aeb){console['log'](_0x363aeb);}});async function updateProduct_detl(_0x4d323d){var _0x6d2f35=a0_0x578046;const _0x4c9c43=await mongoose[_0x6d2f35(0x277)]();try{console['log']('..............connected.....................');const _0x5debc7=mongoose[_0x6d2f35(0x1c0)][_0x6d2f35(0x27a)];return await _0x4c9c43[_0x6d2f35(0x285)](async()=>{var _0x512d5d=_0x6d2f35;for(const _0x4ee595 of _0x4d323d[_0x512d5d(0x254)]){console[_0x512d5d(0x217)](new _0x5debc7());const _0x2f3778=await warehouse['aggregate']([{'$match':{'name':_0x4d323d[_0x512d5d(0x24e)],'room':_0x4ee595[_0x512d5d(0x23f)]}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x5debc7(_0x4ee595[_0x512d5d(0x1b7)])}}])[_0x512d5d(0x1f9)](_0x4c9c43);if(_0x2f3778['length']===0x0)throw new Error(_0x512d5d(0x26f)+_0x4ee595['from_room_name']);for(const _0x3c5378 of _0x2f3778){let _0x579ed0=(parseFloat(_0x3c5378['product_details'][_0x512d5d(0x236)][_0x512d5d(0x1a9)](0x2))-parseFloat(_0x4ee595[_0x512d5d(0x23c)]))[_0x512d5d(0x1a9)](0x2);if(_0x579ed0>0x0){console['log'](_0x512d5d(0x20a),_0x579ed0),console[_0x512d5d(0x217)](_0x512d5d(0x1f6)),await warehouse[_0x512d5d(0x223)]({'_id':_0x5debc7(_0x3c5378['_id']),'product_details._id':_0x5debc7(_0x3c5378['product_details']['_id'])},{'$set':{'product_details.$.product_stock':_0x579ed0,'product_details.$.trf_invoice':_0x4d323d['invoice']}},{'session':_0x4c9c43});const _0x45b7eb=await warehouse[_0x512d5d(0x279)]([{'$match':{'name':_0x4d323d[_0x512d5d(0x1f8)],'room':_0x4ee595['to_room_name']}}])['session'](_0x4c9c43);console[_0x512d5d(0x217)]('..............to\x20deducted.....................'),await warehouse[_0x512d5d(0x223)]({'name':_0x4d323d[_0x512d5d(0x1f8)],'room':_0x4ee595[_0x512d5d(0x21c)]},{'$push':{'product_details':{'product_name':_0x4ee595[_0x512d5d(0x212)],'product_stock':_0x4ee595[_0x512d5d(0x23c)],'primary_code':_0x4ee595[_0x512d5d(0x20e)],'secondary_code':_0x4ee595[_0x512d5d(0x273)],'product_code':_0x4ee595[_0x512d5d(0x21e)],'storage':_0x4ee595['storage'],'rack':_0x4ee595[_0x512d5d(0x248)],'bay':_0x4ee595[_0x512d5d(0x1c1)],'bin':_0x4ee595[_0x512d5d(0x1d8)],'type':_0x4ee595[_0x512d5d(0x1ff)],'floorlevel':_0x4ee595[_0x512d5d(0x208)],'maxProducts':_0x4ee595[_0x512d5d(0x1f0)],'expiry_date':_0x4ee595[_0x512d5d(0x227)],'production_date':_0x4ee595[_0x512d5d(0x231)],'maxPerUnit':_0x4ee595[_0x512d5d(0x21a)],'batch_code':_0x4ee595['batch_code'],'unit':_0x4ee595[_0x512d5d(0x1bc)],'secondary_unit':_0x4ee595[_0x512d5d(0x28c)],'alertQTY':_0x3c5378['product_details']['alertQTY'],'delivery_date':_0x3c5378[_0x512d5d(0x1d2)][_0x512d5d(0x239)],'delivery_code':_0x3c5378[_0x512d5d(0x1d2)][_0x512d5d(0x200)],'product_cat':_0x3c5378['product_details']['product_cat'],'invoice':_0x4ee595[_0x512d5d(0x244)],'trf_invoice':_0x4d323d[_0x512d5d(0x224)],'date_data':_0x4d323d[_0x512d5d(0x213)],'_id':new _0x5debc7()}}},{'session':_0x4c9c43});}else{console['log']('not\x20meet\x20the\x20need\x20stock',_0x579ed0);throw new Error('No\x20matching\x20document\x20found\x20for\x20product\x20ID\x20'+_0x3c5378[_0x512d5d(0x1d0)]+'\x20and\x20QTY\x20:\x20'+_0x579ed0);}}}}),{'success':!![],'message':_0x6d2f35(0x1c2)};}catch(_0x5864c5){return console['log'](_0x5864c5),await _0x4c9c43['abortTransaction'](),console[_0x6d2f35(0x217)](_0x6d2f35(0x24d)),{'success':![],'message':_0x5864c5['message']};}finally{_0x4c9c43[_0x6d2f35(0x220)](),console['log']('..............disconnected.....................');}}router['post']('/preview/:id',auth,async(_0x2ff83f,_0x5e315b)=>{var _0x5c447d=a0_0x578046;try{const _0x4af568=_0x2ff83f[_0x5c447d(0x1fb)]['id'],{from_warehouse:_0x419cee,FromRoom_name:_0x32f291,to_warehouse:_0x4fc537,ToRoom_name:_0x3a5579}=_0x2ff83f[_0x5c447d(0x19c)],_0x560b12=await transfers[_0x5c447d(0x1dc)]({'_id':_0x4af568});await updateProduct_detl(_0x560b12),_0x560b12[_0x5c447d(0x1c3)]=_0x5c447d(0x22f);const _0x3b1195=await _0x560b12[_0x5c447d(0x28d)](),_0x54b8f1=await master_shop[_0x5c447d(0x264)](),_0x38b49f=await email_settings[_0x5c447d(0x19a)](),_0x3e1595=await supervisor_settings[_0x5c447d(0x264)]();var _0x2c01c7=_0x560b12['product'],_0x553522='',_0x2b3fbd;for(_0x2b3fbd in _0x2c01c7){_0x553522+=_0x5c447d(0x1aa)+_0x5c447d(0x203)+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x212)]+_0x5c447d(0x287)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x21e)]+_0x5c447d(0x287)+_0x5c447d(0x203)+_0x2c01c7[_0x2b3fbd]['to_quantity']+_0x5c447d(0x287)+_0x5c447d(0x203)+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x1bc)]+_0x5c447d(0x287)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2c01c7[_0x2b3fbd]['secondary_unit']+_0x5c447d(0x287)+_0x5c447d(0x203)+_0x560b12[_0x5c447d(0x1f8)]+_0x5c447d(0x287)+_0x5c447d(0x203)+_0x2c01c7[_0x2b3fbd]['to_room_name']+'</td>'+_0x5c447d(0x203)+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x1b9)]+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x248)]+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x1c1)]+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x1d8)]+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x1ff)][0x0]+_0x2c01c7[_0x2b3fbd][_0x5c447d(0x208)]+_0x5c447d(0x287),_0x5c447d(0x271);}let _0x503c18=nodemailer[_0x5c447d(0x226)]({'host':_0x38b49f[_0x5c447d(0x25e)],'port':Number(_0x38b49f['port']),'secure':![],'auth':{'user':_0x38b49f['email'],'pass':_0x38b49f['password']}}),_0xaa2b73={'from':_0x38b49f['email'],'to':_0x3e1595[0x0][_0x5c447d(0x1b3)],'subject':_0x5c447d(0x238),'attachments':[{'filename':_0x5c447d(0x1ef),'path':__dirname+_0x5c447d(0x21b)+_0x5c447d(0x1d1)+_0x54b8f1[0x0]['image'],'cid':_0x5c447d(0x22d)}],'html':_0x5c447d(0x278)+'<html><head><title></title>'+_0x5c447d(0x1c6)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x5c447d(0x1cc)+_0x5c447d(0x262)+_0x5c447d(0x198)+_0x5c447d(0x1cc)+_0x5c447d(0x276)+_0x54b8f1[0x0][_0x5c447d(0x1b6)]+_0x5c447d(0x266)+'</div>'+_0x5c447d(0x198)+_0x5c447d(0x1e7)+_0x5c447d(0x1cc)+_0x5c447d(0x245)+_0x5c447d(0x27e)+_0x560b12[_0x5c447d(0x224)]+'\x20'+_0x5c447d(0x22a)+_0x5c447d(0x206)+_0x560b12[_0x5c447d(0x213)]+'\x20'+'</span>'+_0x5c447d(0x207)+'</div>'+_0x5c447d(0x1be)+_0x5c447d(0x234)+_0x5c447d(0x1aa)+_0x5c447d(0x252)+_0x5c447d(0x25b)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x5c447d(0x1ab)+_0x5c447d(0x202)+_0x5c447d(0x28b)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x5c447d(0x26b)+'</tr>'+_0x5c447d(0x21f)+_0x5c447d(0x294)+'\x20'+_0x553522+'\x20'+_0x5c447d(0x24b)+_0x5c447d(0x1cb)+'<div>'+_0x5c447d(0x289)+'<h5>'+_0x54b8f1[0x0][_0x5c447d(0x1b6)]+_0x5c447d(0x207)+_0x5c447d(0x198)+'</div>'+_0x5c447d(0x1db)};_0x503c18[_0x5c447d(0x1ee)](_0xaa2b73,function(_0x5ded35,_0x3ad4fd){var _0x553590=_0x5c447d;_0x5ded35?(console[_0x553590(0x217)](_0x5ded35),console[_0x553590(0x217)](_0x553590(0x25c))):console[_0x553590(0x217)](_0x553590(0x24c));}),_0x2ff83f[_0x5c447d(0x1ce)](_0x5c447d(0x1d4),_0x5c447d(0x242)),_0x5e315b[_0x5c447d(0x283)](_0x5c447d(0x1fd)+_0x3b1195[_0x5c447d(0x1d0)]);}catch(_0x408624){console[_0x5c447d(0x217)](_0x408624);}});function BayBinSelected(_0xb8f5d,_0xd355a4){var _0x3a7da3=a0_0x578046,_0x329955=[],_0x4d03a3=[],_0x99b47d=[],_0x130fa0=[],_0x3f3f9f=[],_0x43273c=[];let _0x4a3e31=[];if(_0xb8f5d==_0x3a7da3(0x27d))switch(_0xd355a4){case _0x3a7da3(0x267):_0x329955=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x4d03a3=[0x1,0x2],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=[_0x3a7da3(0x1f4),'Floor'],_0x3f3f9f=['D'],_0x43273c=['A'];break;case'Rack\x20B':_0x329955=[0x6,0x5,0x4,0x3,0x2,0x1],_0x4d03a3=[0x1,0x2],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=['Level',_0x3a7da3(0x25f)],_0x3f3f9f=['D'],_0x43273c=['B'];break;case'Shelves':_0x329955=[0x0],_0x4d03a3=[0x0],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=[_0x3a7da3(0x25f)],_0x3f3f9f=['D'],_0x43273c=['S'];break;case _0x3a7da3(0x1af):_0x329955=[0x0],_0x4d03a3=[0x0],_0x130fa0=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x99b47d=['Floor'],_0x3f3f9f=['D'],_0x43273c=['R'];break;}else{if(_0xb8f5d==_0x3a7da3(0x27c))switch(_0xd355a4){case _0x3a7da3(0x267):_0x329955=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x4d03a3=['B','F'],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=[_0x3a7da3(0x1f4),'Floor'],_0x3f3f9f=['C'],_0x43273c=['A'];break;case'Rack\x20B':_0x329955=[0x5,0x4,0x3,0x2,0x1],_0x4d03a3=['F','B','S'],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=[_0x3a7da3(0x1f4),_0x3a7da3(0x25f)],_0x3f3f9f=['C'],_0x43273c=['B'];break;case'Rack\x20C':_0x329955=[0x1,0x2,0x3,0x4,0x5],_0x4d03a3=['B','F','S'],_0x130fa0=[0x5,0x4,0x3,0x2,0x1],_0x99b47d=[_0x3a7da3(0x1f4),_0x3a7da3(0x25f)],_0x3f3f9f=['C'],_0x43273c=['C'];break;case _0x3a7da3(0x1ae):_0x329955=[0x5,0x4,0x3,0x2,0x1],_0x4d03a3=['F','B','S'],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=['Level',_0x3a7da3(0x25f)],_0x3f3f9f=['C'],_0x43273c=['D'];break;case _0x3a7da3(0x1e4):_0x329955=[0x4,0x3,0x2,0x1],_0x4d03a3=[0x1,0x2],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=['Level',_0x3a7da3(0x25f)],_0x3f3f9f=['C'],_0x43273c=['E'];break;case'Rack\x20F':_0x329955=[0x1,0x2,0x3],_0x4d03a3=[0x1,0x2],_0x130fa0=[0x1,0x2,0x3,0x4,0x5],_0x99b47d=['Level'],_0x3f3f9f=['C'],_0x43273c=['F'];break;}}return{'levels':_0x329955,'Isle':_0x4d03a3,'rack':_0x130fa0,'type':_0x99b47d,'storage':_0x3f3f9f,'rak':_0x43273c};}router[a0_0x578046(0x22e)](a0_0x578046(0x1ad),auth,async(_0x8311ef,_0x9b43eb)=>{var _0x6b9020=a0_0x578046;try{const {username:_0x2e368d,email:_0xf0a3e4,role:_0x373840}=_0x8311ef[_0x6b9020(0x1d9)],_0x5db6a2=_0x8311ef['user'],_0x3a456e=await profile[_0x6b9020(0x19a)]({'email':_0x5db6a2[_0x6b9020(0x25a)]}),_0x5d75a4=await master_shop[_0x6b9020(0x264)](),_0x55837a=await transfers[_0x6b9020(0x1dc)](_0x8311ef['params']['id']);let _0x4fc9d6;if(_0x5db6a2['role']==_0x6b9020(0x282)){const _0x125575=await staff[_0x6b9020(0x19a)]({'email':_0x5db6a2[_0x6b9020(0x25a)]});_0x4fc9d6=await warehouse[_0x6b9020(0x279)]([{'$match':{'status':_0x6b9020(0x1f2),'name':_0x125575[_0x6b9020(0x27b)],'warehouse_category':_0x6b9020(0x1cd)}},{'$group':{'_id':_0x6b9020(0x235),'name':{'$first':_0x6b9020(0x235)}}}]);}else _0x4fc9d6=await warehouse[_0x6b9020(0x279)]([{'$match':{'status':_0x6b9020(0x1f2),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x6b9020(0x235),'name':{'$first':_0x6b9020(0x235)}}}]);const _0x3a3f5e=await warehouse[_0x6b9020(0x279)]([{'$match':{'name':_0x55837a['from_warehouse'],'warehouse_category':'Raw\x20Materials'}},{'$unwind':_0x6b9020(0x265)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x6b9020(0x1d6)},'product_stock':{'$first':_0x6b9020(0x230)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x6b9020(0x1b1)},'type':{'$first':_0x6b9020(0x272)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x6b9020(0x20f)},'secondary_code':{'$first':_0x6b9020(0x253)},'product_code':{'$first':_0x6b9020(0x24a)},'storage':{'$first':_0x6b9020(0x1a0)},'rack':{'$first':_0x6b9020(0x241)},'expiry_date':{'$first':_0x6b9020(0x1b8)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':'$room'}}}]),_0x30e64b=await product[_0x6b9020(0x264)]({}),_0x469203=BayBinSelected(_0x55837a[_0x6b9020(0x1f8)],_0x55837a['to_room']);if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]==_0x6b9020(0x1eb)){var _0x13eb83=users[_0x6b9020(0x258)];console[_0x6b9020(0x217)](_0x13eb83);}else{if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]==_0x6b9020(0x286))var _0x13eb83=users[_0x6b9020(0x286)];else{if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]=='German')var _0x13eb83=users[_0x6b9020(0x257)];else{if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]==_0x6b9020(0x288))var _0x13eb83=users[_0x6b9020(0x288)];else{if(_0x5d75a4[0x0]['language']==_0x6b9020(0x1d7))var _0x13eb83=users[_0x6b9020(0x1d7)];else{if(_0x5d75a4[0x0]['language']==_0x6b9020(0x215))var _0x13eb83=users[_0x6b9020(0x1c7)];else{if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]==_0x6b9020(0x232))var _0x13eb83=users[_0x6b9020(0x232)];else{if(_0x5d75a4[0x0][_0x6b9020(0x1bb)]==_0x6b9020(0x1c4))var _0x13eb83=users[_0x6b9020(0x1bf)];}}}}}}}_0x9b43eb[_0x6b9020(0x221)](_0x6b9020(0x219),{'success':_0x8311ef[_0x6b9020(0x1ce)](_0x6b9020(0x1d4)),'errors':_0x8311ef['flash'](_0x6b9020(0x19e)),'role':_0x5db6a2,'profile':_0x3a456e,'master_shop':_0x5d75a4,'warehouse':_0x4fc9d6,'transfer':_0x55837a,'stock':_0x3a3f5e,'unit':_0x30e64b,'language':_0x13eb83});}catch(_0x1b569f){console['log'](_0x1b569f);}}),router['post']('/view/:id',auth,async(_0x57e830,_0x26064e)=>{var _0x245e23=a0_0x578046;try{const _0x2e9320=_0x57e830[_0x245e23(0x1fb)]['id'],_0x507cab=await transfers['findById'](_0x2e9320);_0x26064e['json'](_0x57e830[_0x245e23(0x19c)]);return;const {date:_0x57a0c1,from_warehouse:_0x283ad9,FromRoom_name:_0x33be63,to_warehouse:_0x249a7c,ToRoom_name:_0x20ac56,prod_name:_0x8eb713,from_prod_qty:_0x1f4fdf,from_prod_level:_0x1a41a1,from_prod_isle:_0x5603d3,from_prod_pallet:_0x352d47,to_prod_qty:_0x1bbe9f,to_prod_level:_0x1d371a,to_prod_isle:_0x5ccb81,to_prod_pallet:_0x5ab20e,primary_code:_0xa039d6,secondary_code:_0x5ac6a5,product_code3:_0xe7060a,note:_0x23c0e5,invoice:_0x44574b,expiry_date:_0xf8bc9b}=_0x57e830[_0x245e23(0x19c)];if(typeof _0x8eb713=='string')var _0x2af62a=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x259)]],_0x563176=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x274)]],_0x551016=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x20c)]],_0x47f2c3=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1a1)]],_0x40b4ff=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1a3)]],_0x1d90e1=[_0x57e830['body'][_0x245e23(0x199)]],_0x1875d8=[_0x57e830['body'][_0x245e23(0x216)]],_0x56f5d0=[_0x57e830['body']['to_prod_level']],_0x9d543e=[_0x57e830['body'][_0x245e23(0x240)]],_0x4b6468=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1ca)]],_0x5c2327=[_0x57e830[_0x245e23(0x19c)]['to_types']],_0x4bcdf1=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1b9)]],_0x2df4c1=[_0x57e830['body'][_0x245e23(0x218)]],_0x35a0ec=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x20e)]],_0x48fb04=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x273)]],_0x31d6b5=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1bd)]],_0xb91683=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1a2)]],_0x461c91=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x1bc)]],_0x336f8a=[_0x57e830['body'][_0x245e23(0x28c)]],_0x15368b=[_0x57e830['body']['batch_code']],_0x5a839a=[_0x57e830[_0x245e23(0x19c)][_0x245e23(0x227)]],_0xdba453=[_0x57e830[_0x245e23(0x19c)]['from_storage']],_0xe69510=[_0x57e830['body']['from_rak']];else var _0x2af62a=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x259)]],_0x4bcdf1=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x1b9)]],_0x2df4c1=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x218)]],_0x1d90e1=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x199)]],_0x5c2327=[..._0x57e830['body'][_0x245e23(0x1ff)]],_0x563176=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x274)]],_0x551016=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x20c)]],_0x47f2c3=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x1a1)]],_0x40b4ff=[..._0x57e830['body'][_0x245e23(0x1a3)]],_0x1875d8=[..._0x57e830['body'][_0x245e23(0x216)]],_0x56f5d0=[..._0x57e830['body'][_0x245e23(0x1f1)]],_0x9d543e=[..._0x57e830['body'][_0x245e23(0x240)]],_0x4b6468=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x1ca)]],_0x35a0ec=[..._0x57e830['body']['primary_code']],_0x48fb04=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x273)]],_0x31d6b5=[..._0x57e830['body'][_0x245e23(0x1bd)]],_0xb91683=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x1a2)]],_0x461c91=[..._0x57e830[_0x245e23(0x19c)]['unit']],_0x336f8a=[..._0x57e830['body']['secondary_unit']],_0x15368b=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x247)]],_0x5a839a=[..._0x57e830[_0x245e23(0x19c)]['expiry_date']],_0xdba453=[..._0x57e830[_0x245e23(0x19c)][_0x245e23(0x293)]],_0xe69510=[..._0x57e830['body']['from_rak']];const _0x21e24e=_0x2af62a['map'](_0x4fb696=>{return _0x4fb696={'product_name':_0x4fb696};});_0x563176[_0x245e23(0x1b0)]((_0x3a92da,_0x238081)=>{var _0x38b5e0=_0x245e23;_0x21e24e[_0x238081][_0x38b5e0(0x275)]=_0x3a92da;}),_0x551016['forEach']((_0x5e93f3,_0x1d6678)=>{var _0x11f210=_0x245e23;_0x21e24e[_0x1d6678][_0x11f210(0x26c)]=_0x5e93f3;}),_0x47f2c3[_0x245e23(0x1b0)]((_0x8a302,_0x5a441b)=>{var _0x2041d3=_0x245e23;_0x21e24e[_0x5a441b][_0x2041d3(0x1c9)]=_0x8a302;}),_0x40b4ff[_0x245e23(0x1b0)]((_0x5375fb,_0xdad747)=>{var _0x539533=_0x245e23;_0x21e24e[_0xdad747][_0x539533(0x1e5)]=_0x5375fb;}),_0x1875d8['forEach']((_0x280fea,_0x196f1a)=>{var _0x19f530=_0x245e23;_0x21e24e[_0x196f1a][_0x19f530(0x23c)]=_0x280fea;}),_0x56f5d0['forEach']((_0x1cbf6e,_0x172c5b)=>{_0x21e24e[_0x172c5b]['to_bay']=_0x1cbf6e;}),_0x9d543e[_0x245e23(0x1b0)]((_0x4ed980,_0x3cda01)=>{var _0xf0eb19=_0x245e23;_0x21e24e[_0x3cda01][_0xf0eb19(0x1d8)]=_0x4ed980;}),_0x4b6468[_0x245e23(0x1b0)]((_0x1704e8,_0x3159a2)=>{var _0x20b51b=_0x245e23;_0x21e24e[_0x3159a2][_0x20b51b(0x208)]=_0x1704e8;}),_0x35a0ec['forEach']((_0x678b66,_0x587de1)=>{var _0x223720=_0x245e23;_0x21e24e[_0x587de1][_0x223720(0x20e)]=_0x678b66;}),_0x48fb04[_0x245e23(0x1b0)]((_0x408d4d,_0x155001)=>{var _0x124c26=_0x245e23;_0x21e24e[_0x155001][_0x124c26(0x273)]=_0x408d4d;}),_0x31d6b5['forEach']((_0x21e636,_0x3a1cc1)=>{var _0x67e73c=_0x245e23;_0x21e24e[_0x3a1cc1][_0x67e73c(0x21e)]=_0x21e636;}),_0xb91683['forEach']((_0x13d7b6,_0x5b5188)=>{var _0x5b0a41=_0x245e23;_0x21e24e[_0x5b5188][_0x5b0a41(0x1f0)]=_0x13d7b6;}),_0x461c91['forEach']((_0x116384,_0xa9e654)=>{var _0x56bc7f=_0x245e23;_0x21e24e[_0xa9e654][_0x56bc7f(0x1bc)]=_0x116384;}),_0x336f8a[_0x245e23(0x1b0)]((_0x4341ee,_0x412d58)=>{var _0x415362=_0x245e23;_0x21e24e[_0x412d58][_0x415362(0x28c)]=_0x4341ee;}),_0x15368b[_0x245e23(0x1b0)]((_0x11dbb5,_0x50191c)=>{var _0x4df653=_0x245e23;_0x21e24e[_0x50191c][_0x4df653(0x247)]=_0x11dbb5;}),_0x5a839a[_0x245e23(0x1b0)]((_0x3f7865,_0x4102f0)=>{var _0x15f28d=_0x245e23;_0x21e24e[_0x4102f0][_0x15f28d(0x227)]=_0x3f7865;}),_0x4bcdf1['forEach']((_0x1531aa,_0x2db41a)=>{_0x21e24e[_0x2db41a]['storage']=_0x1531aa;}),_0x2df4c1[_0x245e23(0x1b0)]((_0x1a62bf,_0x45bca5)=>{_0x21e24e[_0x45bca5]['rack']=_0x1a62bf;}),_0x1d90e1['forEach']((_0x1db7d4,_0x13ee69)=>{var _0x1ce824=_0x245e23;_0x21e24e[_0x13ee69][_0x1ce824(0x199)]=_0x1db7d4;}),_0x5c2327[_0x245e23(0x1b0)]((_0x2abae6,_0x129358)=>{var _0x1771e0=_0x245e23;_0x21e24e[_0x129358][_0x1771e0(0x1ff)]=_0x2abae6;}),_0xdba453[_0x245e23(0x1b0)]((_0x24b6af,_0x375ddc)=>{var _0x5687eb=_0x245e23;_0x21e24e[_0x375ddc][_0x5687eb(0x293)]=_0x24b6af;}),_0xe69510[_0x245e23(0x1b0)]((_0xa13ba4,_0x14661b)=>{var _0x116479=_0x245e23;_0x21e24e[_0x14661b][_0x116479(0x19f)]=_0xa13ba4;});const _0x41d01e=_0x21e24e['filter'](_0x440a8a=>_0x440a8a[_0x245e23(0x23c)]!=='0'&&_0x440a8a[_0x245e23(0x23c)]!==''||_0x440a8a['to_floorlevel']!=='0'&&_0x440a8a[_0x245e23(0x208)]!=='');var _0x1def82=0x0;_0x41d01e[_0x245e23(0x1b0)](_0x2f4369=>{var _0x2f1a32=_0x245e23;parseInt(_0x2f4369[_0x2f1a32(0x275)])<parseInt(_0x2f4369[_0x2f1a32(0x23c)])&&_0x1def82++;});if(_0x1def82!=0x0)return _0x57e830[_0x245e23(0x1ce)](_0x245e23(0x19e),_0x245e23(0x23e)),_0x26064e[_0x245e23(0x283)](_0x245e23(0x1f5));const _0x4932c1=await warehouse[_0x245e23(0x19a)]({'name':_0x507cab[_0x245e23(0x24e)],'room':_0x507cab[_0x245e23(0x1e3)]});_0x507cab[_0x245e23(0x254)]['forEach'](_0x37c04e=>{var _0x51bf12=_0x245e23;if(_0x37c04e[_0x51bf12(0x23c)]>0x0){const _0x2b6ef9=_0x4932c1[_0x51bf12(0x1d2)][_0x51bf12(0x291)](_0x1358e0=>{var _0x3197a2=_0x51bf12;_0x1358e0[_0x3197a2(0x212)]==_0x37c04e[_0x3197a2(0x212)]&&_0x1358e0[_0x3197a2(0x209)]==_0x37c04e[_0x3197a2(0x1e5)]&&_0x1358e0[_0x3197a2(0x249)]==_0x37c04e[_0x3197a2(0x199)]&&_0x1358e0['bin']==_0x37c04e[_0x3197a2(0x1c9)]&&_0x1358e0[_0x3197a2(0x1de)]==_0x37c04e[_0x3197a2(0x26c)]&&_0x1358e0['rack']==_0x37c04e['from_rack']&&_0x1358e0[_0x3197a2(0x1b9)]==_0x37c04e[_0x3197a2(0x293)]&&(_0x1358e0[_0x3197a2(0x236)]=parseInt(_0x1358e0[_0x3197a2(0x236)])+parseInt(_0x37c04e[_0x3197a2(0x23c)]));});}}),await _0x4932c1[_0x245e23(0x28d)]();const _0x1cd2d0=await warehouse[_0x245e23(0x19a)]({'name':_0x507cab[_0x245e23(0x1f8)],'room':_0x507cab[_0x245e23(0x210)]});_0x507cab[_0x245e23(0x254)][_0x245e23(0x1b0)](_0x116682=>{var _0x9e03fb=_0x245e23;if(_0x116682[_0x9e03fb(0x23c)]>0x0){const _0x4fc3a7=_0x1cd2d0['product_details']['map'](_0x4815ff=>{var _0x1b2150=_0x9e03fb;_0x4815ff['product_name']==_0x116682['product_name']&&_0x4815ff[_0x1b2150(0x209)]==_0x116682[_0x1b2150(0x208)]&&_0x4815ff[_0x1b2150(0x249)]==_0x116682['to_types']&&_0x4815ff['bin']==_0x116682['to_bin']&&_0x4815ff[_0x1b2150(0x1de)]==_0x116682[_0x1b2150(0x1c1)]&&_0x4815ff[_0x1b2150(0x248)]==_0x116682['rack']&&_0x4815ff['storage']==_0x116682[_0x1b2150(0x1b9)]&&(_0x4815ff[_0x1b2150(0x236)]=parseInt(_0x4815ff['product_stock'])-parseInt(_0x116682[_0x1b2150(0x23c)]));});}}),await _0x1cd2d0[_0x245e23(0x28d)](),_0x507cab[_0x245e23(0x213)]=_0x57a0c1,_0x507cab[_0x245e23(0x24e)]=_0x283ad9,_0x507cab[_0x245e23(0x1f8)]=_0x249a7c,_0x507cab[_0x245e23(0x254)]=_0x41d01e,_0x507cab[_0x245e23(0x28a)]=_0x23c0e5,_0x507cab[_0x245e23(0x224)]=_0x44574b;const _0xda479=await _0x507cab[_0x245e23(0x28d)]();console[_0x245e23(0x217)](_0xda479);const _0x28a1e7=await warehouse['findOne']({'name':_0x283ad9,'room':_0x33be63});_0xda479[_0x245e23(0x254)][_0x245e23(0x1b0)](_0x5e3495=>{var _0x53bac5=_0x245e23;if(_0x5e3495['to_quantity']>0x0){const _0x5ed0fe=_0x28a1e7[_0x53bac5(0x1d2)][_0x53bac5(0x291)](_0x461c44=>{var _0x32110c=_0x53bac5;_0x461c44[_0x32110c(0x212)]==_0x5e3495['product_name']&&_0x461c44[_0x32110c(0x209)]==_0x5e3495[_0x32110c(0x1e5)]&&_0x461c44[_0x32110c(0x249)]==_0x5e3495['from_types']&&_0x461c44['bin']==_0x5e3495['from_bin']&&_0x461c44['bay']==_0x5e3495[_0x32110c(0x26c)]&&_0x461c44['rack']==_0x5e3495['from_rack']&&_0x461c44[_0x32110c(0x1b9)]==_0x5e3495['from_storage']&&(_0x461c44[_0x32110c(0x236)]=parseInt(_0x461c44[_0x32110c(0x236)])-parseInt(_0x5e3495['to_quantity']));});}}),await _0x28a1e7[_0x245e23(0x28d)]();const _0xb61cae=await warehouse[_0x245e23(0x19a)]({'name':_0x249a7c,'room':_0x20ac56});_0xda479['product']['forEach'](_0x47c2c1=>{var _0x4c7bc0=_0x245e23;if(_0x47c2c1[_0x4c7bc0(0x23c)]>0x0){var _0x3dff7d=0x0;const _0x34d06f=_0xb61cae[_0x4c7bc0(0x1d2)][_0x4c7bc0(0x291)](_0x5b3910=>{var _0x3b2a56=_0x4c7bc0;_0x5b3910[_0x3b2a56(0x212)]==_0x47c2c1[_0x3b2a56(0x212)]&&_0x5b3910[_0x3b2a56(0x209)]==_0x47c2c1[_0x3b2a56(0x208)]&&_0x5b3910['type']==_0x47c2c1[_0x3b2a56(0x1ff)]&&_0x5b3910[_0x3b2a56(0x250)]==_0x47c2c1[_0x3b2a56(0x1d8)]&&_0x5b3910[_0x3b2a56(0x1de)]==_0x47c2c1[_0x3b2a56(0x1c1)]&&_0x5b3910[_0x3b2a56(0x248)]==_0x47c2c1[_0x3b2a56(0x248)]&&_0x5b3910[_0x3b2a56(0x1b9)]==_0x47c2c1['storage']&&(_0x5b3910[_0x3b2a56(0x236)]=parseInt(_0x5b3910[_0x3b2a56(0x236)])+parseInt(_0x47c2c1[_0x3b2a56(0x23c)]),_0x3dff7d++);});_0x3dff7d=='0'&&(_0xb61cae[_0x4c7bc0(0x1d2)]=_0xb61cae[_0x4c7bc0(0x1d2)][_0x4c7bc0(0x1d3)]({'product_name':_0x47c2c1[_0x4c7bc0(0x212)],'product_stock':_0x47c2c1[_0x4c7bc0(0x23c)],'bay':_0x47c2c1['to_bay'],'bin':_0x47c2c1[_0x4c7bc0(0x1d8)],'type':_0x47c2c1[_0x4c7bc0(0x1ff)],'floorlevel':_0x47c2c1[_0x4c7bc0(0x208)],'storage':_0x47c2c1['storage'],'rack':_0x47c2c1[_0x4c7bc0(0x248)],'product_code':_0x47c2c1[_0x4c7bc0(0x21e)],'primary_code':_0x47c2c1[_0x4c7bc0(0x20e)],'secondary_code':_0x47c2c1[_0x4c7bc0(0x273)],'maxProducts':_0x47c2c1[_0x4c7bc0(0x1f0)],'storage':_0x47c2c1['storage'],'rack':_0x47c2c1[_0x4c7bc0(0x248)]}));}}),await _0xb61cae['save'](),_0x57e830[_0x245e23(0x1ce)](_0x245e23(0x1d4),'Transfer\x20Edit\x20Successfully'),_0x26064e['redirect'](_0x245e23(0x256));}catch(_0x9d1dac){console[_0x245e23(0x217)](_0x9d1dac);}}),router[a0_0x578046(0x1ba)]('/barcode_scanner',async(_0x2f23ad,_0x28b68e)=>{var _0x5be640=a0_0x578046;const {FromWareHouse:_0x34a747,FromRoom:_0x4e581d,ToWarehouse:_0x526dc6,ToRoom:_0x405fa8,primary_code:_0x2d5f32,Roomslist:_0x450663}=_0x2f23ad[_0x5be640(0x19c)],_0x20478d=_0x450663['split'](','),_0xaeda7b=[];async function _0x4cb279(_0x3bdc7a){var _0x2bbb8d=_0x5be640;const _0x559d95=await warehouse[_0x2bbb8d(0x279)]([{'$match':{'name':_0x34a747,'room':_0x3bdc7a}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x2d5f32}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2bbb8d(0x1d6)},'instock':{'$first':_0x2bbb8d(0x230)},'primary_code':{'$first':_0x2bbb8d(0x20f)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2bbb8d(0x24a)},'level':{'$first':_0x2bbb8d(0x211)},'isle':{'$first':_0x2bbb8d(0x1b1)},'type':{'$first':_0x2bbb8d(0x272)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x2bbb8d(0x1a4)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x2bbb8d(0x1a0)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x2bbb8d(0x1b8)},'production_date':{'$first':_0x2bbb8d(0x1b2)},'batch_code':{'$first':_0x2bbb8d(0x1c5)},'maxPerUnit':{'$first':_0x2bbb8d(0x1a7)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x2bbb8d(0x26e)},'maxProducts':{'$first':_0x2bbb8d(0x1e0)},'invoice_product':{'$first':_0x2bbb8d(0x23d)}}}]),_0x574ba9=await warehouse[_0x2bbb8d(0x279)]([{'$match':{'name':_0x34a747,'room':_0x3bdc7a}},{'$unwind':_0x2bbb8d(0x265)},{'$match':{'product_details.secondary_code':_0x2d5f32}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2bbb8d(0x1d6)},'instock':{'$first':_0x2bbb8d(0x230)},'primary_code':{'$first':_0x2bbb8d(0x20f)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2bbb8d(0x24a)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x2bbb8d(0x1b1)},'type':{'$first':_0x2bbb8d(0x272)},'pallet':{'$first':_0x2bbb8d(0x1a6)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x2bbb8d(0x1d5)},'storage':{'$first':_0x2bbb8d(0x1a0)},'rack':{'$first':_0x2bbb8d(0x241)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x2bbb8d(0x1b2)},'batch_code':{'$first':_0x2bbb8d(0x1c5)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':_0x2bbb8d(0x1e0)},'invoice_product':{'$first':_0x2bbb8d(0x23d)}}}]);if(_0x559d95['length']>0x0)_0xaeda7b[_0x2bbb8d(0x1df)](_0x559d95);else _0x574ba9[_0x2bbb8d(0x1e9)]>0x0&&_0xaeda7b[_0x2bbb8d(0x1df)](_0x574ba9);}const _0x3668ef=_0x20478d['map'](_0x34d1bc=>_0x4cb279(_0x34d1bc));await Promise['all'](_0x3668ef),_0x28b68e[_0x5be640(0x27f)](_0xaeda7b);}),router[a0_0x578046(0x1ba)](a0_0x578046(0x290),async(_0x1aaffa,_0x5acf89)=>{var _0x357c17=a0_0x578046;try{const {FromWareHouse:_0x436f62,FromRoom:_0x22f858,ToWarehouse:_0x2c50e3,ToRoom:_0x5ba66c,secondary_code:_0xbb1ee5}=_0x1aaffa[_0x357c17(0x19c)],_0x4437d4=await warehouse[_0x357c17(0x279)]([{'$match':{'name':_0x436f62}},{'$unwind':_0x357c17(0x265)},{'$match':{'product_details.secondary_code':_0xbb1ee5}},{'$group':{'_id':_0x357c17(0x28e),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x357c17(0x253)},'product_code':{'$first':_0x357c17(0x24a)},'instock':{'$first':_0x357c17(0x230)},'warehouse':{'$first':_0x357c17(0x235)},'level':{'$first':_0x357c17(0x237)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x357c17(0x1e0)},'unit':{'$first':'$product_details.unit'}}}]);_0x5acf89[_0x357c17(0x1fc)](0xc8)[_0x357c17(0x27f)](_0x4437d4);}catch(_0x31f713){_0x5acf89[_0x357c17(0x1fc)](0x194)[_0x357c17(0x27f)]({'message':_0x31f713[_0x357c17(0x261)]});}}),router[a0_0x578046(0x1ba)]('/barcode_scanner3',async(_0x10d50e,_0x1b27fc)=>{var _0x513934=a0_0x578046;try{const {FromWareHouse:_0x3672e1,FromRoom:_0x480b02,ToWarehouse:_0x544707,ToRoom:_0x57d89d,product_code:_0x2331de}=_0x10d50e['body'],_0x46634b=await warehouse[_0x513934(0x279)]([{'$match':{'name':_0x3672e1}},{'$unwind':_0x513934(0x265)},{'$match':{'product_details.product_code':_0x2331de}},{'$group':{'_id':_0x513934(0x28e),'name':{'$first':_0x513934(0x1d6)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x513934(0x253)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x513934(0x235)},'level':{'$first':_0x513934(0x237)},'isle':{'$first':_0x513934(0x26a)},'pallet':{'$first':_0x513934(0x214)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':'$product_details.unit'}}}]);_0x1b27fc[_0x513934(0x1fc)](0xc8)['json'](_0x46634b);}catch(_0x2704f6){_0x1b27fc['status'](0x194)[_0x513934(0x27f)]({'message':_0x2704f6[_0x513934(0x261)]});}}),router[a0_0x578046(0x1ba)](a0_0x578046(0x22b),async(_0x5083a9,_0x1485a6)=>{var _0x1b8a1a=a0_0x578046;const {level:_0x2f6f40,isle:_0x6721d1,pallet:_0x1f52c3,warehouses:_0x11d27e,room:_0x136786}=_0x5083a9[_0x1b8a1a(0x19c)];try{const _0x230c22=await warehouse['aggregate']([{'$match':{'name':_0x11d27e,'room':_0x136786}},{'$unwind':_0x1b8a1a(0x265)},{'$match':{'product_details.level':parseInt(_0x2f6f40),'product_details.isle':_0x6721d1,'product_details.pallet':parseInt(_0x1f52c3)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1b8a1a(0x1d6)},'product_stock':{'$first':'$product_details.product_stock'},'level':{'$first':_0x1b8a1a(0x237)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x1b8a1a(0x214)},'maxProducts':{'$first':_0x1b8a1a(0x1e0)}}}]);_0x1485a6[_0x1b8a1a(0x1fc)](0xc8)[_0x1b8a1a(0x27f)](_0x230c22);}catch(_0x27fd95){_0x1485a6[_0x1b8a1a(0x1fc)](0x194)[_0x1b8a1a(0x27f)]({'message':_0x27fd95['message']});}}),module[a0_0x578046(0x263)]=router;function a0_0x3798(){var _0x41bb12=['$product_details.batch_code','</head><body>','Portuguese','../middleware/auth','from_bin','to_prod_pallet','</table>','<div>','Raw\x20Materials','flash','$date','_id','/upload/','product_details','concat','success','$product_details.secondary_unit','$product_details.product_name','French','to_bin','user','here','</body></html>','findById','express','bay','push','$product_details.maxProducts','12ZJJlGe','slice','from_room','Rack\x20E','from_floorlevel','master','<hr\x20class=\x22my-3\x22>','6617880AhcoPr','length','config','English\x20(US)','Return\x20Rooms','/preview/:id','sendMail','Logo.png','maxProducts','to_prod_level','Enabled','2286004JKZgsz','Level','back','..............from\x20deducted.....................','$isAllowEdit','to_warehouse','session','Shelves','params','status','/picking_list/PDF_transfer_rm/','toString','to_types','delivery_code','transfer','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$invoice','to_invoice','\x20Order\x20Date\x20:\x20','</h5>','to_floorlevel','floorlevel','meet\x20the\x20need\x20stock','id_transaction','from_prod_level','Ambient','primary_code','$product_details.primary_code','to_room','$product_details.bay','product_name','date','$product_details.pallet','Portuguese\x20(BR)','to_prod_qty','log','rak','edit_transfer','maxperunit','/../public','to_room_name','132370iPcgoC','product_code','</thead>','endSession','render','1005328TeuuEo','updateOne','invoice','string','createTransport','expiry_date','1391116OEgjOW','224831qurqmZ','<span\x20style=\x22float:\x20right;\x22>','/CheckingWarehouse','role','logo','get','True','$product_details.product_stock','production_date','Chinese','$finalize','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$name','product_stock','$product_details.level','Transfer\x20Mail','delivery_date','New_Qty_Converted','$product.from_room_name','to_quantity','$product_details.invoice','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','from_room_name','to_prod_isle','$product_details.rack','Transfer\x20Finalize\x20Successfully','getMonth','from_invoice','<h5\x20style=\x22text-align:\x20left;\x22>','Router','batch_code','rack','type','$product_details.product_code','</tbody>','Email\x20sent\x20successfully','Transaction\x20aborted.','from_warehouse','$product.to_room_name','bin','filter','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$product_details.secondary_code','product','There\x27s\x20a\x20error\x20in\x20this\x20transaction','/transfer/view','German','English','prod_name','email','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Error\x20Occurs','dotenv','host','Floor','RoomAssigned','message','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','exports','find','$product_details','\x20</h2>','Rack\x20A','33364zavvts','39etmncU','$product_details.isle','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','from_bay','catch','$room','No\x20warehouse\x20data\x20found\x20for\x20room:\x20','/view/add_transfer','</tr>','$product_details.type','secondary_code','from_prod_qty','from_quantity','<h2>\x20','startSession','<!DOCTYPE\x20html>','aggregate','ObjectId','warehouse','COLD\x20STORAGE','DRY\x20STORAGE','\x20Order\x20Number\x20:\x20','json','max_per_unit','prod_cat','staff','redirect','$product','withTransaction','Hindi','</td>','Spanish','<strong>\x20Regards\x20</strong>','note','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','secondary_unit','save','$product_details._id','TRF-','/barcode_scanner2','map','mongoose','from_storage','<tbody\x20style=\x22text-align:\x20center;\x22>','</div>','from_types','findOne','getFullYear','body','ToRoomAssigned','errors','from_rack','$product_details.storage','from_prod_isle','MaxStocks_data2','from_prod_pallet','$product_details.unit','/view','$product_details.floorlevel','$product_details.maxPerUnit','then','toFixed','<tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','nodemailer','/view/:id','Rack\x20D','Receiving\x20Area','forEach','$product_details.bin','$product_details.production_date','RMSEmail','add_transfer','\x20<>\x20','site_title','id_transaction_id','$product_details.expiry_date','storage','post','language','unit','product_code3','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Arabic','Types','to_bay','Products\x20updated\x20successfully.','finalize','Arabic\x20(ae)'];a0_0x3798=function(){return _0x41bb12;};return a0_0x3798();}