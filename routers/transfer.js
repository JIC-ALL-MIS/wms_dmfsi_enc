function a0_0xfa38(){var _0x1c1902=['DRY\x20STORAGE','English\x20(US)','Transfer\x20Finalize\x20Successfully','../public/language/languages.json','$product_details.production_date','1629428fySUjK','$product_details.expiry_date','max_per_unit','success','Spanish','Ambient','get','\x20Order\x20Number\x20:\x20','/view','email','French','push','product_details','$product_details.level','type','/barcode_scanner2','role','/barcode_scanner','product_name','from_floorlevel','$to_warehouse','from_rack','Portuguese','rack','catch','$name','params','product','site_title','$product_details.pallet','English','prod_cat','40AoACdS','warehouse','German','to_types','$room','$product_details.primary_code','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product','To_invoice','<hr\x20class=\x22my-3\x22>','to_quantity','Portuguese\x20(BR)','$product_details.product_code','Floor','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','slice','error','aggregate','</h5>','errors','from_prod_pallet','from_prod_isle','Enabled','Chinese','15uAilVz','_id','$product_details.unit','post','Arabic','</thead>','$product_details.type','length','floorlevel','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','split','$product_details._id','/CheckingWarehouse','<!DOCTYPE\x20html>','8507205uhSdza','True','<tr>','COLD\x20STORAGE','toString','map','Enclosed','from_types','$product_details.secondary_code','<html><head><title></title>','status','8337120sAjZih','from_room_name','</tr>','padStart','$product_details.storage','<tbody\x20style=\x22text-align:\x20center;\x22>','$from_warehouse','port','bay','from_prod_level','4762869LsotsC','log','express','string','to_prod_qty','Shelves','secondary_code','body','Product\x20Transfer\x20successfully','storage','from_warehouse','to_room','Hindi','all','/../public','product_code','edit_transfer_view','primary_code','Arabic\x20(ae)','floor','3826440GfauwL','$product_details.product_name','TRF-','master','Transfer\x20Mail','Router','from_invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','getDate','product_stock','MaxStocks_data2','expiry_date','Rack\x20B','to_invoice','secondary_unit','/view/add_transfer','Level','$product_details.secondary_unit','</head><body>','$product.to_room_name','staff','findById','ToRoomAssigned','to_prod_pallet','from_prod_qty','to_bay','createTransport','random','$product_details.bin','RoomAssigned','product_code3','message','filter','flash','image','maxperunit','from_storage','An\x20error\x20occurred\x20while\x20saving\x20data.','from_bay','$product_details.bay','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','\x20</h2>','rak','add_transfer','$product_details.product_stock','to_room_name','from_bin','unit','../middleware/auth','<div>','prod_name','concat','json','Rack\x20C','Raw\x20Materials','render','</div>','language','/transfer/view','getFullYear','Rack\x20A','$product_details.maxProducts','then','find','to_warehouse','invoice','user','</body></html>','date','batch_code','$product_details','to_prod_level','</table>','maxProducts','$product_details.rack','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/preview/:id','findOne','</tbody>','$product_details.floorlevel','$date','../models/all_models','$product_details.isle','from_quantity','<h5>','sendMail','Email\x20sent\x20successfully','</span>','An\x20error\x20occurred.','</td>','from_rak','forEach','password','New_Qty_Converted','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','/view/:id','bin','$product_details.batch_code','378533hmcrHJ','redirect','RMSEmail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','production_date','4357989aTNMAC','to_bin','to_floorlevel','Receiving\x20Area','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','from_room','save','getMonth','/barcode_scanner3'];a0_0xfa38=function(){return _0x1c1902;};return a0_0xfa38();}var a0_0x42a214=a0_0x5cb0;(function(_0x3ec7cd,_0x397d2c){var _0x259181=a0_0x5cb0,_0x3a5972=_0x3ec7cd();while(!![]){try{var _0x26b0ed=-parseInt(_0x259181(0x146))/0x1+parseInt(_0x259181(0x1c9))/0x2+-parseInt(_0x259181(0x1b5))/0x3+parseInt(_0x259181(0x15a))/0x4*(-parseInt(_0x259181(0x192))/0x5)+-parseInt(_0x259181(0x1ab))/0x6+parseInt(_0x259181(0x1a0))/0x7+-parseInt(_0x259181(0x17a))/0x8*(-parseInt(_0x259181(0x14b))/0x9);if(_0x26b0ed===_0x397d2c)break;else _0x3a5972['push'](_0x3a5972['shift']());}catch(_0x5f5d2c){_0x3a5972['push'](_0x3a5972['shift']());}}}(a0_0xfa38,0xed475));function a0_0x5cb0(_0x185b60,_0x224626){var _0xfa38fd=a0_0xfa38();return a0_0x5cb0=function(_0x5cb0aa,_0x5adfb9){_0x5cb0aa=_0x5cb0aa-0x131;var _0x2e5a6a=_0xfa38fd[_0x5cb0aa];return _0x2e5a6a;},a0_0x5cb0(_0x185b60,_0x224626);}const express=require(a0_0x42a214(0x1b7)),app=express(),router=express[a0_0x42a214(0x1ce)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x42a214(0x135)),auth=require(a0_0x42a214(0x1f9)),users=require(a0_0x42a214(0x158)),nodemailer=require('nodemailer');router['get'](a0_0x42a214(0x162),auth,async(_0x4272bb,_0x175c69)=>{var _0x3fcdde=a0_0x42a214;try{const {username:_0x3ace8f,email:_0x3f8977,role:_0x4697f2}=_0x4272bb[_0x3fcdde(0x20b)],_0x3eca7c=_0x4272bb['user'],_0x3c486e=await profile[_0x3fcdde(0x131)]({'email':_0x3eca7c[_0x3fcdde(0x163)]}),_0x1ee19e=await master_shop[_0x3fcdde(0x208)]();console['log'](_0x3fcdde(0x1cc),_0x1ee19e);let _0x48843a;if(_0x3eca7c[_0x3fcdde(0x16a)]==_0x3fcdde(0x1dd)){const _0xd44844=await staff[_0x3fcdde(0x131)]({'email':_0x3eca7c['email']});_0x48843a=await transfers[_0x3fcdde(0x208)]({'from_warehouse':_0xd44844[_0x3fcdde(0x17b)]});}else _0x48843a=await transfers[_0x3fcdde(0x18b)]([{'$unwind':_0x3fcdde(0x181)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':_0x3fcdde(0x134)},'from_warehouse':{'$first':_0x3fcdde(0x1b1)},'to_warehouse':{'$first':_0x3fcdde(0x16e)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':_0x3fcdde(0x1dc)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x1ee19e[0x0][_0x3fcdde(0x202)]==_0x3fcdde(0x156)){var _0x2ec64a=users[_0x3fcdde(0x178)];console[_0x3fcdde(0x1b6)](_0x2ec64a);}else{if(_0x1ee19e[0x0][_0x3fcdde(0x202)]=='Hindi')var _0x2ec64a=users[_0x3fcdde(0x1c1)];else{if(_0x1ee19e[0x0][_0x3fcdde(0x202)]=='German')var _0x2ec64a=users[_0x3fcdde(0x17c)];else{if(_0x1ee19e[0x0]['language']==_0x3fcdde(0x15e))var _0x2ec64a=users[_0x3fcdde(0x15e)];else{if(_0x1ee19e[0x0][_0x3fcdde(0x202)]==_0x3fcdde(0x164))var _0x2ec64a=users['French'];else{if(_0x1ee19e[0x0]['language']==_0x3fcdde(0x185))var _0x2ec64a=users['Portuguese'];else{if(_0x1ee19e[0x0][_0x3fcdde(0x202)]==_0x3fcdde(0x191))var _0x2ec64a=users['Chinese'];else{if(_0x1ee19e[0x0][_0x3fcdde(0x202)]==_0x3fcdde(0x1c7))var _0x2ec64a=users[_0x3fcdde(0x196)];}}}}}}}_0x175c69[_0x3fcdde(0x200)]('transfer',{'success':_0x4272bb[_0x3fcdde(0x1ea)](_0x3fcdde(0x15d)),'errors':_0x4272bb[_0x3fcdde(0x1ea)](_0x3fcdde(0x18d)),'role':_0x3eca7c,'profile':_0x3c486e,'master_shop':_0x1ee19e,'transfer':_0x48843a,'language':_0x2ec64a});}catch(_0x1db986){console['log'](_0x1db986);}});async function getRandom8DigitNumber(){var _0x34c45c=a0_0x42a214;const _0x2c2f1b=0x989680,_0x45da6e=0x5f5e0ff,_0x41208d=Math[_0x34c45c(0x1c8)](Math[_0x34c45c(0x1e4)]()*(_0x45da6e-_0x2c2f1b+0x1))+_0x2c2f1b;var _0x288a0f;const _0x191ed7=await transfers['findOne']({'invoice':_0x34c45c(0x1cb)+_0x41208d});return _0x191ed7&&_0x191ed7[_0x34c45c(0x199)]>0x0?_0x288a0f='TRF-'+_0x41208d:_0x288a0f=_0x34c45c(0x1cb)+_0x41208d,_0x288a0f;}router[a0_0x42a214(0x160)](a0_0x42a214(0x1d8),auth,async(_0x39944f,_0x1bc8e2)=>{var _0x1b9413=a0_0x42a214;try{const {username:_0x54cc77,email:_0x28d0e2,role:_0x198f39}=_0x39944f[_0x1b9413(0x20b)],_0x21a5fc=_0x39944f[_0x1b9413(0x20b)],_0x1fed40=await profile['findOne']({'email':_0x21a5fc[_0x1b9413(0x163)]}),_0x33397e=await master_shop['find']();console['log'](_0x1b9413(0x1cc),_0x33397e);let _0x470354;if(_0x21a5fc[_0x1b9413(0x16a)]==_0x1b9413(0x1dd)){const _0x2a353e=await staff[_0x1b9413(0x131)]({'email':_0x21a5fc['email']});_0x470354=await warehouse['aggregate']([{'$match':{'status':_0x1b9413(0x190),'name':_0x2a353e[_0x1b9413(0x17b)],'warehouse_category':_0x1b9413(0x1ff)}},{'$group':{'_id':_0x1b9413(0x173),'name':{'$first':_0x1b9413(0x173)}}}]);}else _0x470354=await warehouse[_0x1b9413(0x18b)]([{'$match':{'status':_0x1b9413(0x190),'warehouse_category':_0x1b9413(0x1ff)}},{'$group':{'_id':_0x1b9413(0x173),'name':{'$first':_0x1b9413(0x173)}}}]);var _0x4c75a2=[_0x1b9413(0x15f),_0x1b9413(0x1a6),'Return\x20Rooms'];const _0xc67531=await transfers[_0x1b9413(0x208)]({}),_0x5a7a0a=_0xc67531[_0x1b9413(0x199)]+0x1,_0x32bb17='TRF-'+_0x5a7a0a[_0x1b9413(0x1a4)]()[_0x1b9413(0x1ae)](0x5,'0');if(_0x33397e[0x0][_0x1b9413(0x202)]==_0x1b9413(0x156)){var _0x361387=users[_0x1b9413(0x178)];console[_0x1b9413(0x1b6)](_0x361387);}else{if(_0x33397e[0x0][_0x1b9413(0x202)]==_0x1b9413(0x1c1))var _0x361387=users['Hindi'];else{if(_0x33397e[0x0][_0x1b9413(0x202)]=='German')var _0x361387=users['German'];else{if(_0x33397e[0x0]['language']==_0x1b9413(0x15e))var _0x361387=users[_0x1b9413(0x15e)];else{if(_0x33397e[0x0]['language']==_0x1b9413(0x164))var _0x361387=users['French'];else{if(_0x33397e[0x0]['language']==_0x1b9413(0x185))var _0x361387=users[_0x1b9413(0x170)];else{if(_0x33397e[0x0][_0x1b9413(0x202)]==_0x1b9413(0x191))var _0x361387=users[_0x1b9413(0x191)];else{if(_0x33397e[0x0][_0x1b9413(0x202)]==_0x1b9413(0x1c7))var _0x361387=users['Arabic'];}}}}}}}const _0xdb0a5c=getRandom8DigitNumber();_0xdb0a5c[_0x1b9413(0x207)](_0x38bb31=>{var _0x1890fc=_0x1b9413;_0x1bc8e2['render'](_0x1890fc(0x1f4),{'success':_0x39944f[_0x1890fc(0x1ea)]('success'),'errors':_0x39944f[_0x1890fc(0x1ea)]('errors'),'role':_0x21a5fc,'profile':_0x1fed40,'master_shop':_0x33397e,'warehouse':_0x470354,'language':_0x361387,'rooms_data':_0x4c75a2,'invoice':_0x38bb31});})[_0x1b9413(0x172)](_0x2b3543=>{var _0x15603b=_0x1b9413;_0x39944f['flash'](_0x15603b(0x18d),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x1bc8e2['redirect'](_0x15603b(0x203));});}catch(_0x47980e){console[_0x1b9413(0x1b6)](_0x47980e);}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x1d8),auth,async(_0x2f166b,_0x58c3d1)=>{var _0x507ea5=a0_0x42a214;try{console['log'](_0x2f166b[_0x507ea5(0x1bc)]);const {date:_0x4dd387,from_warehouse:_0x1d8ef9,FromRoom_name:_0x3d9feb,to_warehouse:_0x4ac806,ToRoom_name:_0x5b7248,prod_name:_0x181117,from_prod_qty:_0x1f3cfa,from_prod_level:_0x2082fb,from_prod_isle:_0x903b3a,from_prod_pallet:_0x4d539a,to_prod_qty:_0x4470d5,to_prod_level:_0x5827b0,to_prod_isle:_0x4e7a1c,to_prod_pallet:_0x17fc8f,primary_code:_0x2a426f,secondary_code:_0x1995e6,product_code3:_0x2f19bf,note:_0x1eb157,MaxStocks_data2:_0x19690d,invoice:_0x399c43,expiry_date:_0x3176fc}=_0x2f166b['body'];if(typeof _0x181117==_0x507ea5(0x1b8))var _0x41be37=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1fb)]],_0x55924a=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1e1)]],_0x5bdafa=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1b4)]],_0x54211a=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x141)]],_0x31133d=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x210)]],_0x22bfac=[_0x2f166b['body']['primary_code']],_0xbeaca6=[_0x2f166b['body'][_0x507ea5(0x1bb)]],_0x235657=[_0x2f166b[_0x507ea5(0x1bc)]['product_code3']],_0x29c98f=[_0x2f166b[_0x507ea5(0x1bc)]['MaxStocks_data2']],_0x5ed1fa=[_0x2f166b['body']['primary_unit']],_0x4e6772=[_0x2f166b[_0x507ea5(0x1bc)]['secondary_unit']],_0x579310=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x20e)]],_0x8b8476=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1d4)]],_0x88df89=[_0x2f166b[_0x507ea5(0x1bc)]['max_per_unit']],_0x4049d9=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x14a)]],_0x1c15e3=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x179)]],_0x50c018=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1e6)]],_0x1ca8ba=[_0x2f166b[_0x507ea5(0x1bc)]['ToRoomAssigned']],_0x320dc3=[_0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1cf)]],_0x353a02=[_0x2f166b['body'][_0x507ea5(0x1d6)]];else var _0x41be37=[..._0x2f166b['body']['prod_name']],_0x55924a=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1e1)]],_0x5bdafa=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1b4)]],_0x54211a=[..._0x2f166b[_0x507ea5(0x1bc)]['New_Qty_Converted']],_0x31133d=[..._0x2f166b['body'][_0x507ea5(0x210)]],_0x22bfac=[..._0x2f166b[_0x507ea5(0x1bc)]['primary_code']],_0xbeaca6=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1bb)]],_0x235657=[..._0x2f166b['body'][_0x507ea5(0x1e7)]],_0x29c98f=[..._0x2f166b['body'][_0x507ea5(0x1d3)]],_0x5ed1fa=[..._0x2f166b[_0x507ea5(0x1bc)]['primary_unit']],_0x4e6772=[..._0x2f166b['body']['secondary_unit']],_0x579310=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x20e)]],_0x8b8476=[..._0x2f166b['body'][_0x507ea5(0x1d4)]],_0x88df89=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x15c)]],_0x4049d9=[..._0x2f166b[_0x507ea5(0x1bc)]['production_date']],_0x1c15e3=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x179)]],_0x50c018=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1e6)]],_0x1ca8ba=[..._0x2f166b['body'][_0x507ea5(0x1df)]],_0x320dc3=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1cf)]],_0x353a02=[..._0x2f166b[_0x507ea5(0x1bc)][_0x507ea5(0x1d6)]];const _0x1bfcad=_0x41be37['map'](_0x48ae17=>{return _0x48ae17={'product_name':_0x48ae17};});_0x55924a[_0x507ea5(0x13f)]((_0x72ef66,_0x5309ce)=>{var _0x46dc6a=_0x507ea5;_0x1bfcad[_0x5309ce][_0x46dc6a(0x137)]=_0x72ef66;}),_0x320dc3[_0x507ea5(0x13f)]((_0x5418d7,_0x20df9c)=>{var _0x8c642b=_0x507ea5;_0x1bfcad[_0x20df9c][_0x8c642b(0x1cf)]=_0x5418d7;}),_0x353a02['forEach']((_0x5edd64,_0x902b8a)=>{var _0x33a7df=_0x507ea5;_0x1bfcad[_0x902b8a][_0x33a7df(0x182)]=_0x5edd64;}),_0x5bdafa[_0x507ea5(0x13f)]((_0x2635b6,_0x52a860)=>{_0x50c018['forEach']((_0x43ce62,_0x5a6e66)=>{var _0x5d8d89=a0_0x5cb0;if(_0x43ce62==_0x5d8d89(0x14e)&&_0x52a860==_0x5a6e66){var _0x5ead79=_0x2635b6[_0x5d8d89(0x189)](0x3);_0x1bfcad[_0x52a860][_0x5d8d89(0x1ed)]=_0x2635b6[0x0],_0x1bfcad[_0x52a860][_0x5d8d89(0x16f)]=_0x2635b6[0x1],_0x1bfcad[_0x52a860][_0x5d8d89(0x1ef)]=0x0,_0x1bfcad[_0x52a860][_0x5d8d89(0x1f7)]=0x0,_0x1bfcad[_0x52a860][_0x5d8d89(0x1a7)]=_0x5d8d89(0x187),_0x1bfcad[_0x52a860][_0x5d8d89(0x16d)]=_0x5ead79;}else{if(_0x43ce62==_0x5d8d89(0x1ba)&&_0x52a860==_0x5a6e66){var _0x5ead79=_0x2635b6[_0x5d8d89(0x189)](0x3);_0x1bfcad[_0x52a860][_0x5d8d89(0x1ed)]=_0x2635b6[0x0],_0x1bfcad[_0x52a860][_0x5d8d89(0x16f)]=_0x2635b6[0x1],_0x1bfcad[_0x52a860]['from_bay']=0x0,_0x1bfcad[_0x52a860][_0x5d8d89(0x1f7)]=0x0,_0x1bfcad[_0x52a860][_0x5d8d89(0x1a7)]=_0x5d8d89(0x187),_0x1bfcad[_0x52a860]['from_floorlevel']=_0x2635b6[0x5];}else{if(_0x52a860==_0x5a6e66){var _0x4e5976;if(_0x2635b6[0x4]=='L')_0x4e5976=_0x5d8d89(0x1d9);else _0x2635b6[0x4]=='F'&&(_0x4e5976=_0x5d8d89(0x187));_0x1bfcad[_0x52a860][_0x5d8d89(0x1ed)]=_0x2635b6[0x0],_0x1bfcad[_0x52a860][_0x5d8d89(0x16f)]=_0x2635b6[0x1],_0x1bfcad[_0x52a860][_0x5d8d89(0x1ef)]=_0x2635b6[0x2],_0x1bfcad[_0x52a860]['from_bin']=_0x2635b6[0x3],_0x1bfcad[_0x52a860][_0x5d8d89(0x1a7)]=_0x4e5976,_0x1bfcad[_0x52a860][_0x5d8d89(0x16d)]=_0x2635b6[0x5];}}}});}),_0x54211a[_0x507ea5(0x13f)]((_0x43042c,_0x57676a)=>{var _0x96b9b5=_0x507ea5;_0x1bfcad[_0x57676a][_0x96b9b5(0x184)]=_0x43042c;}),_0x31133d[_0x507ea5(0x13f)]((_0x47d9eb,_0x1f2d03)=>{var _0x1d02d9=_0x507ea5;_0x1ca8ba[_0x1d02d9(0x13f)]((_0x5ac16f,_0x205cfe)=>{var _0x2ae310=_0x1d02d9;if(_0x5ac16f==_0x2ae310(0x14e)&&_0x1f2d03==_0x205cfe){var _0x29c2f4=_0x47d9eb[_0x2ae310(0x189)](0x3);_0x1bfcad[_0x1f2d03][_0x2ae310(0x1be)]=_0x47d9eb[0x0],_0x1bfcad[_0x1f2d03]['rack']=_0x47d9eb[0x1],_0x1bfcad[_0x1f2d03][_0x2ae310(0x1e2)]=0x0,_0x1bfcad[_0x1f2d03][_0x2ae310(0x14c)]=0x0,_0x1bfcad[_0x1f2d03]['to_types']=_0x2ae310(0x187),_0x1bfcad[_0x1f2d03][_0x2ae310(0x14d)]=_0x29c2f4;}else{if(_0x5ac16f==_0x2ae310(0x1ba)&&_0x1f2d03==_0x205cfe){var _0x29c2f4=_0x47d9eb[_0x2ae310(0x189)](0x3);_0x1bfcad[_0x1f2d03][_0x2ae310(0x1be)]=_0x47d9eb[0x0],_0x1bfcad[_0x1f2d03][_0x2ae310(0x171)]=_0x47d9eb[0x1],_0x1bfcad[_0x1f2d03][_0x2ae310(0x1e2)]=0x0,_0x1bfcad[_0x1f2d03][_0x2ae310(0x14c)]=0x0,_0x1bfcad[_0x1f2d03][_0x2ae310(0x17d)]=_0x2ae310(0x187),_0x1bfcad[_0x1f2d03][_0x2ae310(0x14d)]=_0x47d9eb[0x5];}else{if(_0x1f2d03==_0x205cfe){var _0x14d447;if(_0x47d9eb[0x4]=='L')_0x14d447=_0x2ae310(0x1d9);else _0x47d9eb[0x4]=='F'&&(_0x14d447=_0x2ae310(0x187));_0x1bfcad[_0x1f2d03]['storage']=_0x47d9eb[0x0],_0x1bfcad[_0x1f2d03]['rack']=_0x47d9eb[0x1],_0x1bfcad[_0x1f2d03][_0x2ae310(0x1e2)]=_0x47d9eb[0x2],_0x1bfcad[_0x1f2d03]['to_bin']=_0x47d9eb[0x3],_0x1bfcad[_0x1f2d03]['to_types']=_0x14d447,_0x1bfcad[_0x1f2d03][_0x2ae310(0x14d)]=_0x47d9eb[0x5];}}}});}),_0x22bfac[_0x507ea5(0x13f)]((_0x47ddf7,_0x2adefb)=>{var _0x5b4ab2=_0x507ea5;_0x1bfcad[_0x2adefb][_0x5b4ab2(0x1c6)]=_0x47ddf7;}),_0xbeaca6[_0x507ea5(0x13f)]((_0x3fe012,_0xa5ca0b)=>{var _0x47118b=_0x507ea5;_0x1bfcad[_0xa5ca0b][_0x47118b(0x1bb)]=_0x3fe012;}),_0x235657[_0x507ea5(0x13f)]((_0x3e51ae,_0x5181ac)=>{var _0x5a0a43=_0x507ea5;_0x1bfcad[_0x5181ac][_0x5a0a43(0x1c4)]=_0x3e51ae;}),_0x29c98f[_0x507ea5(0x13f)]((_0x5c23b6,_0x515851)=>{var _0x179b7b=_0x507ea5;_0x1bfcad[_0x515851][_0x179b7b(0x212)]=_0x5c23b6;}),_0x5ed1fa[_0x507ea5(0x13f)]((_0x246235,_0x9b1545)=>{var _0xd977ee=_0x507ea5;_0x1bfcad[_0x9b1545][_0xd977ee(0x1f8)]=_0x246235;}),_0x4e6772[_0x507ea5(0x13f)]((_0x231b12,_0x5e1942)=>{var _0x513684=_0x507ea5;_0x1bfcad[_0x5e1942][_0x513684(0x1d7)]=_0x231b12;}),_0x579310[_0x507ea5(0x13f)]((_0x4095a1,_0x2e957f)=>{var _0x1c3367=_0x507ea5;_0x1bfcad[_0x2e957f][_0x1c3367(0x20e)]=_0x4095a1;}),_0x8b8476[_0x507ea5(0x13f)]((_0x351840,_0x779a7d)=>{var _0x43e0aa=_0x507ea5;_0x1bfcad[_0x779a7d][_0x43e0aa(0x1d4)]=_0x351840;}),_0x88df89[_0x507ea5(0x13f)]((_0x1b59b0,_0x4058fc)=>{var _0x3f3463=_0x507ea5;_0x1bfcad[_0x4058fc][_0x3f3463(0x1ec)]=_0x1b59b0;}),_0x4049d9[_0x507ea5(0x13f)]((_0x188068,_0x59b335)=>{var _0x1ff582=_0x507ea5;_0x1bfcad[_0x59b335][_0x1ff582(0x14a)]=_0x188068;}),_0x1c15e3[_0x507ea5(0x13f)]((_0x23ee3d,_0xba59ef)=>{_0x1bfcad[_0xba59ef]['prod_cat']=_0x23ee3d;}),_0x50c018[_0x507ea5(0x13f)]((_0x15c78a,_0x366274)=>{var _0x4b12f9=_0x507ea5;_0x1bfcad[_0x366274][_0x4b12f9(0x1ac)]=_0x15c78a;}),_0x1ca8ba[_0x507ea5(0x13f)]((_0x4c51f4,_0x11ce38)=>{_0x1bfcad[_0x11ce38]['to_room_name']=_0x4c51f4;});const _0x43dcb6=_0x1bfcad[_0x507ea5(0x1e9)](_0x40ce19=>_0x40ce19[_0x507ea5(0x184)]!=='0'&&_0x40ce19[_0x507ea5(0x184)]!==''||_0x40ce19[_0x507ea5(0x14d)]!=='0'&&_0x40ce19['to_floorlevel']!==''),_0x1d16cc=new transfers({'date':_0x4dd387,'from_warehouse':_0x1d8ef9,'to_warehouse':_0x4ac806,'product':_0x43dcb6,'note':_0x1eb157,'invoice':_0x399c43}),_0x5d16c4=await _0x1d16cc['save']();_0x2f166b['flash']('success',_0x507ea5(0x1bd)),_0x58c3d1[_0x507ea5(0x147)]('/transfer/preview/'+_0x5d16c4[_0x507ea5(0x193)]);}catch(_0x11ac24){console[_0x507ea5(0x1b6)](_0x11ac24),_0x58c3d1['status'](0xc8)[_0x507ea5(0x1fd)]({'errorMessage':_0x11ac24[_0x507ea5(0x1e8)]});}}),router['get'](a0_0x42a214(0x215),auth,async(_0x445596,_0x10b697)=>{var _0x18346f=a0_0x42a214;try{const {username:_0x5695fb,email:_0x1cda1b,role:_0x4d2bc8}=_0x445596['user'],_0x11f8fc=_0x445596[_0x18346f(0x20b)],_0x30b357=await profile['findOne']({'email':_0x11f8fc['email']}),_0x59c66f=await master_shop[_0x18346f(0x208)]();console[_0x18346f(0x1b6)](_0x18346f(0x1cc),_0x59c66f);const _0x4121ea=await transfers[_0x18346f(0x1de)](_0x445596[_0x18346f(0x174)]['id']);let _0x412717=new Date(_0x4121ea[_0x18346f(0x1d4)]),_0x5ff112=('0'+_0x412717[_0x18346f(0x1d1)]())[_0x18346f(0x189)](-0x2),_0x417ca0=('0'+(_0x412717[_0x18346f(0x153)]()+0x1))[_0x18346f(0x189)](-0x2),_0x422421=_0x412717[_0x18346f(0x204)](),_0x97b7ee=_0x422421+'-'+_0x417ca0+'-'+_0x5ff112,_0x44ccd5;if(_0x11f8fc[_0x18346f(0x16a)]==_0x18346f(0x1dd)){const _0x5f1f0c=await staff[_0x18346f(0x131)]({'email':_0x11f8fc[_0x18346f(0x163)]});_0x44ccd5=await warehouse['find']({'status':'Enabled','name':_0x5f1f0c[_0x18346f(0x17b)],'warehouse_category':_0x18346f(0x1ff)});}else _0x44ccd5=await warehouse[_0x18346f(0x208)]({'status':_0x18346f(0x190),'warehouse_category':'Raw\x20Materials'});const _0x3ad43b=await warehouse['aggregate']([{'$match':{'name':_0x4121ea[_0x18346f(0x1bf)]}},{'$unwind':_0x18346f(0x20f)},{'$group':{'_id':_0x18346f(0x19d),'name':{'$first':_0x18346f(0x1ca)},'product_stock':{'$first':_0x18346f(0x1f5)},'bay':{'$first':_0x18346f(0x1f0)},'bin':{'$first':_0x18346f(0x1e5)},'type':{'$first':_0x18346f(0x198)},'floorlevel':{'$first':_0x18346f(0x133)},'primary_code':{'$first':_0x18346f(0x17f)},'secondary_code':{'$first':_0x18346f(0x1a8)},'product_code':{'$first':_0x18346f(0x186)},'storage':{'$first':_0x18346f(0x1af)},'rack':{'$first':_0x18346f(0x213)},'expiry_date':{'$first':_0x18346f(0x15b)},'production_date':{'$first':_0x18346f(0x159)},'room':{'$first':_0x18346f(0x17e)}}}]);if(_0x59c66f[0x0][_0x18346f(0x202)]==_0x18346f(0x156)){var _0x192d73=users['English'];console[_0x18346f(0x1b6)](_0x192d73);}else{if(_0x59c66f[0x0]['language']=='Hindi')var _0x192d73=users[_0x18346f(0x1c1)];else{if(_0x59c66f[0x0][_0x18346f(0x202)]==_0x18346f(0x17c))var _0x192d73=users[_0x18346f(0x17c)];else{if(_0x59c66f[0x0][_0x18346f(0x202)]=='Spanish')var _0x192d73=users[_0x18346f(0x15e)];else{if(_0x59c66f[0x0][_0x18346f(0x202)]==_0x18346f(0x164))var _0x192d73=users[_0x18346f(0x164)];else{if(_0x59c66f[0x0][_0x18346f(0x202)]=='Portuguese\x20(BR)')var _0x192d73=users['Portuguese'];else{if(_0x59c66f[0x0]['language']==_0x18346f(0x191))var _0x192d73=users['Chinese'];else{if(_0x59c66f[0x0][_0x18346f(0x202)]==_0x18346f(0x1c7))var _0x192d73=users[_0x18346f(0x196)];}}}}}}}_0x10b697[_0x18346f(0x200)](_0x18346f(0x1c5),{'success':_0x445596[_0x18346f(0x1ea)]('success'),'errors':_0x445596[_0x18346f(0x1ea)](_0x18346f(0x18d)),'role':_0x11f8fc,'profile':_0x30b357,'master_shop':_0x59c66f,'warehouse':_0x44ccd5,'transfer':_0x4121ea,'stock':_0x3ad43b,'language':_0x192d73});}catch(_0x3ac3f7){console[_0x18346f(0x1b6)](_0x3ac3f7);}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x215),auth,async(_0x4651a8,_0x58c382)=>{var _0x321445=a0_0x42a214;try{const _0x53c0c1=_0x4651a8['params']['id'],{from_warehouse:_0x52a4cb,FromRoom_name:_0x3559f8,to_warehouse:_0x3f2ad2,ToRoom_name:_0x2d1587}=_0x4651a8[_0x321445(0x1bc)],_0x2a3ff5=await transfers[_0x321445(0x1de)]({'_id':_0x53c0c1}),_0x539ab5=_0x2a3ff5[_0x321445(0x175)][_0x321445(0x1a5)](async _0x53c575=>{var _0xa544dc=_0x321445;if(_0x53c575['to_quantity']>0x0){var _0x14c77a=await warehouse[_0xa544dc(0x131)]({'name':_0x2a3ff5[_0xa544dc(0x1bf)],'room':_0x53c575[_0xa544dc(0x1ac)],'warehouse_category':'Raw\x20Materials'});const _0x8dfe54=_0x14c77a[_0xa544dc(0x166)][_0xa544dc(0x1a5)](_0x38d3c0=>{var _0x4531eb=_0xa544dc;_0x38d3c0['product_name']==_0x53c575[_0x4531eb(0x16c)]&&_0x38d3c0[_0x4531eb(0x19a)]==_0x53c575['from_floorlevel']&&_0x38d3c0[_0x4531eb(0x168)]==_0x53c575[_0x4531eb(0x1a7)]&&_0x38d3c0[_0x4531eb(0x144)]==_0x53c575[_0x4531eb(0x1f7)]&&_0x38d3c0[_0x4531eb(0x1b3)]==_0x53c575[_0x4531eb(0x1ef)]&&_0x38d3c0[_0x4531eb(0x171)]==_0x53c575[_0x4531eb(0x16f)]&&_0x38d3c0[_0x4531eb(0x1be)]==_0x53c575['from_storage']&&_0x38d3c0[_0x4531eb(0x1d4)]==_0x53c575[_0x4531eb(0x1d4)]&&_0x38d3c0[_0x4531eb(0x20e)]==_0x53c575[_0x4531eb(0x20e)]&&_0x38d3c0[_0x4531eb(0x14a)]==_0x53c575[_0x4531eb(0x14a)]&&_0x38d3c0[_0x4531eb(0x20a)]==_0x53c575['from_invoice']&&(_0x38d3c0[_0x4531eb(0x1d2)]=_0x38d3c0[_0x4531eb(0x1d2)]-_0x53c575[_0x4531eb(0x184)]);});}return _0x14c77a;});Promise[_0x321445(0x1c2)](_0x539ab5)[_0x321445(0x207)](async _0x1abd56=>{var _0x28c748=_0x321445;try{for(const _0x4de4e6 of _0x1abd56){await _0x4de4e6['save']();}try{const _0x3073b2=_0x2a3ff5[_0x28c748(0x175)][_0x28c748(0x1a5)](async _0xbbc8a5=>{var _0x291414=_0x28c748;if(_0xbbc8a5[_0x291414(0x184)]>0x0){var _0x45b3c7=await warehouse[_0x291414(0x131)]({'name':_0x2a3ff5[_0x291414(0x209)],'room':_0xbbc8a5[_0x291414(0x1f6)],'warehouse_category':_0x291414(0x1ff)}),_0x388988=0x0;const _0xa7bec7=_0x45b3c7[_0x291414(0x166)][_0x291414(0x1a5)](_0x788aad=>{var _0x1d263f=_0x291414;_0x788aad[_0x1d263f(0x16c)]==_0xbbc8a5['product_name']&&_0x788aad[_0x1d263f(0x19a)]==_0xbbc8a5[_0x1d263f(0x14d)]&&_0x788aad[_0x1d263f(0x168)]==_0xbbc8a5[_0x1d263f(0x17d)]&&_0x788aad[_0x1d263f(0x144)]==_0xbbc8a5[_0x1d263f(0x14c)]&&_0x788aad[_0x1d263f(0x1b3)]==_0xbbc8a5[_0x1d263f(0x1e2)]&&_0x788aad[_0x1d263f(0x171)]==_0xbbc8a5[_0x1d263f(0x171)]&&_0x788aad[_0x1d263f(0x1be)]==_0xbbc8a5[_0x1d263f(0x1be)]&&_0x788aad['expiry_date']==_0xbbc8a5[_0x1d263f(0x1d4)]&&_0x788aad[_0x1d263f(0x20e)]==_0xbbc8a5['batch_code']&&_0x788aad[_0x1d263f(0x14a)]==_0xbbc8a5[_0x1d263f(0x14a)]&&_0x788aad[_0x1d263f(0x20a)]==_0xbbc8a5['To_invoice']&&(_0x788aad['product_stock']=_0x788aad[_0x1d263f(0x1d2)]+_0xbbc8a5[_0x1d263f(0x184)],_0x388988++);});_0x388988=='0'&&(_0x45b3c7['product_details']=_0x45b3c7[_0x291414(0x166)][_0x291414(0x1fc)]({'product_name':_0xbbc8a5['product_name'],'product_stock':_0xbbc8a5['to_quantity'],'bay':_0xbbc8a5[_0x291414(0x1e2)],'bin':_0xbbc8a5[_0x291414(0x14c)],'type':_0xbbc8a5[_0x291414(0x17d)],'floorlevel':_0xbbc8a5[_0x291414(0x14d)],'storage':_0xbbc8a5['storage'],'rack':_0xbbc8a5[_0x291414(0x171)],'product_code':_0xbbc8a5['product_code'],'primary_code':_0xbbc8a5['primary_code'],'secondary_code':_0xbbc8a5[_0x291414(0x1bb)],'maxProducts':_0xbbc8a5[_0x291414(0x212)],'storage':_0xbbc8a5[_0x291414(0x1be)],'rack':_0xbbc8a5[_0x291414(0x171)],'expiry_date':_0xbbc8a5['expiry_date'],'maxPerUnit':_0xbbc8a5['maxperunit'],'batch_code':_0xbbc8a5[_0x291414(0x20e)],'production_date':_0xbbc8a5['production_date']}));}return _0x45b3c7;});Promise['all'](_0x3073b2)[_0x28c748(0x207)](async _0x544ffd=>{var _0x164cb6=_0x28c748;try{for(const _0xc9fb46 of _0x544ffd){await warehouse['updateOne']({'_id':_0xc9fb46[_0x164cb6(0x193)]},{'$addToSet':{'product_details':{'$each':_0xc9fb46[_0x164cb6(0x166)]}}});}_0x2a3ff5['finalize']=_0x164cb6(0x1a1);const _0x1e029b=await _0x2a3ff5[_0x164cb6(0x152)](),_0x86ba8d=await master_shop[_0x164cb6(0x208)](),_0x20039b=await email_settings[_0x164cb6(0x131)](),_0x5d0070=await supervisor_settings[_0x164cb6(0x208)]();var _0x401287=_0x2a3ff5[_0x164cb6(0x175)],_0x2cccc5='',_0x218e3c;for(_0x218e3c in _0x401287){_0x2cccc5+='<tr>'+_0x164cb6(0x214)+_0x401287[_0x218e3c][_0x164cb6(0x16c)]+'</td>'+_0x164cb6(0x214)+_0x401287[_0x218e3c][_0x164cb6(0x1c4)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x401287[_0x218e3c][_0x164cb6(0x184)]+_0x164cb6(0x13d)+_0x164cb6(0x214)+_0x401287[_0x218e3c][_0x164cb6(0x1f8)]+_0x164cb6(0x13d)+_0x164cb6(0x214)+_0x401287[_0x218e3c][_0x164cb6(0x1d7)]+'</td>'+_0x164cb6(0x214)+_0x2a3ff5[_0x164cb6(0x209)]+_0x164cb6(0x13d)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x401287[_0x218e3c][_0x164cb6(0x1f6)]+_0x164cb6(0x13d)+_0x164cb6(0x214)+_0x401287[_0x218e3c][_0x164cb6(0x1be)]+_0x401287[_0x218e3c][_0x164cb6(0x171)]+_0x401287[_0x218e3c][_0x164cb6(0x1e2)]+_0x401287[_0x218e3c][_0x164cb6(0x14c)]+_0x401287[_0x218e3c][_0x164cb6(0x17d)][0x0]+_0x401287[_0x218e3c][_0x164cb6(0x14d)]+'</td>',_0x164cb6(0x1ad);}let _0x977645=nodemailer[_0x164cb6(0x1e3)]({'host':_0x20039b['host'],'port':Number(_0x20039b[_0x164cb6(0x1b2)]),'secure':![],'auth':{'user':_0x20039b[_0x164cb6(0x163)],'pass':_0x20039b[_0x164cb6(0x140)]}}),_0x188c4c={'from':_0x20039b[_0x164cb6(0x163)],'to':_0x5d0070[0x0][_0x164cb6(0x148)],'subject':_0x164cb6(0x1cd),'attachments':[{'filename':'Logo.png','path':__dirname+_0x164cb6(0x1c3)+'/upload/'+_0x86ba8d[0x0][_0x164cb6(0x1eb)],'cid':'logo'}],'html':_0x164cb6(0x19f)+_0x164cb6(0x1a9)+_0x164cb6(0x1db)+_0x164cb6(0x1fa)+_0x164cb6(0x1f1)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x164cb6(0x201)+'<div>'+'<h2>\x20'+_0x86ba8d[0x0][_0x164cb6(0x176)]+_0x164cb6(0x1f2)+'</div>'+_0x164cb6(0x201)+_0x164cb6(0x183)+_0x164cb6(0x1fa)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x164cb6(0x161)+_0x2a3ff5[_0x164cb6(0x20a)]+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+'\x20Order\x20Date\x20:\x20'+_0x2a3ff5[_0x164cb6(0x20d)]+'\x20'+_0x164cb6(0x13b)+_0x164cb6(0x18c)+_0x164cb6(0x201)+_0x164cb6(0x150)+_0x164cb6(0x180)+_0x164cb6(0x1a2)+_0x164cb6(0x14f)+_0x164cb6(0x19b)+_0x164cb6(0x142)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x164cb6(0x149)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x164cb6(0x1d0)+_0x164cb6(0x1ad)+_0x164cb6(0x197)+_0x164cb6(0x1b0)+'\x20'+_0x2cccc5+'\x20'+_0x164cb6(0x132)+_0x164cb6(0x211)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x164cb6(0x138)+_0x86ba8d[0x0]['site_title']+'</h5>'+_0x164cb6(0x201)+_0x164cb6(0x201)+_0x164cb6(0x20c)};_0x977645[_0x164cb6(0x139)](_0x188c4c,function(_0x9b7165,_0x3adc68){var _0x2f8f82=_0x164cb6;_0x9b7165?(console['log'](_0x9b7165),console[_0x2f8f82(0x1b6)]('Error\x20Occurs')):console[_0x2f8f82(0x1b6)](_0x2f8f82(0x13a));}),_0x4651a8[_0x164cb6(0x1ea)]('success',_0x164cb6(0x157)),_0x58c382[_0x164cb6(0x147)]('/picking_list/PDF_transfer_rm/'+_0x1e029b[_0x164cb6(0x193)]);}catch(_0x2fb9e0){console[_0x164cb6(0x18a)](_0x2fb9e0),_0x58c382[_0x164cb6(0x1aa)](0x1f4)[_0x164cb6(0x1fd)]({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x2fb9e0[_0x164cb6(0x1e8)]});}})[_0x28c748(0x172)](_0x5bd874=>{var _0x45077b=_0x28c748;console[_0x45077b(0x18a)](_0x5bd874),_0x58c382[_0x45077b(0x1aa)](0x1f4)[_0x45077b(0x1fd)]({'Perror':_0x45077b(0x13c)});});}catch(_0x4dedd8){_0x58c382[_0x28c748(0x1fd)](_0x4dedd8);}}catch(_0x50ae9e){console['error'](_0x50ae9e),_0x58c382['status'](0x1f4)[_0x28c748(0x1fd)]({'Merror':_0x28c748(0x1ee),'Message':_0x50ae9e[_0x28c748(0x1e8)]});}})[_0x321445(0x172)](_0x3a0f01=>{var _0x46894a=_0x321445;console[_0x46894a(0x18a)](_0x3a0f01),_0x58c382['status'](0x1f4)[_0x46894a(0x1fd)]({'Merror':_0x46894a(0x13c)});});}catch(_0x4eb722){console[_0x321445(0x1b6)](_0x4eb722);}});function BayBinSelected(_0x45af6b,_0x4a55cc){var _0x2bf790=a0_0x42a214,_0x2d6ddd=[],_0x21e5ea=[],_0x2a855b=[],_0x2fc94e=[],_0x58c8d7=[],_0x19ffc2=[];let _0xa82320=[];if(_0x45af6b==_0x2bf790(0x155))switch(_0x4a55cc){case _0x2bf790(0x205):_0x2d6ddd=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x21e5ea=[0x1,0x2],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=['Level',_0x2bf790(0x187)],_0x58c8d7=['D'],_0x19ffc2=['A'];break;case _0x2bf790(0x1d5):_0x2d6ddd=[0x6,0x5,0x4,0x3,0x2,0x1],_0x21e5ea=[0x1,0x2],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x1d9),_0x2bf790(0x187)],_0x58c8d7=['D'],_0x19ffc2=['B'];break;case _0x2bf790(0x1ba):_0x2d6ddd=[0x0],_0x21e5ea=[0x0],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x187)],_0x58c8d7=['D'],_0x19ffc2=['S'];break;case _0x2bf790(0x14e):_0x2d6ddd=[0x0],_0x21e5ea=[0x0],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x2a855b=[_0x2bf790(0x187)],_0x58c8d7=['D'],_0x19ffc2=['R'];break;}else{if(_0x45af6b==_0x2bf790(0x1a3))switch(_0x4a55cc){case _0x2bf790(0x205):_0x2d6ddd=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x21e5ea=['B','F'],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x1d9),'Floor'],_0x58c8d7=['C'],_0x19ffc2=['A'];break;case _0x2bf790(0x1d5):_0x2d6ddd=[0x5,0x4,0x3,0x2,0x1],_0x21e5ea=['F','B','S'],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x1d9),_0x2bf790(0x187)],_0x58c8d7=['C'],_0x19ffc2=['B'];break;case _0x2bf790(0x1fe):_0x2d6ddd=[0x1,0x2,0x3,0x4,0x5],_0x21e5ea=['B','F','S'],_0x2fc94e=[0x5,0x4,0x3,0x2,0x1],_0x2a855b=[_0x2bf790(0x1d9),_0x2bf790(0x187)],_0x58c8d7=['C'],_0x19ffc2=['C'];break;case'Rack\x20D':_0x2d6ddd=[0x5,0x4,0x3,0x2,0x1],_0x21e5ea=['F','B','S'],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=['Level',_0x2bf790(0x187)],_0x58c8d7=['C'],_0x19ffc2=['D'];break;case'Rack\x20E':_0x2d6ddd=[0x4,0x3,0x2,0x1],_0x21e5ea=[0x1,0x2],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x1d9),_0x2bf790(0x187)],_0x58c8d7=['C'],_0x19ffc2=['E'];break;case'Rack\x20F':_0x2d6ddd=[0x1,0x2,0x3],_0x21e5ea=[0x1,0x2],_0x2fc94e=[0x1,0x2,0x3,0x4,0x5],_0x2a855b=[_0x2bf790(0x1d9)],_0x58c8d7=['C'],_0x19ffc2=['F'];break;}}return{'levels':_0x2d6ddd,'Isle':_0x21e5ea,'rack':_0x2fc94e,'type':_0x2a855b,'storage':_0x58c8d7,'rak':_0x19ffc2};}router[a0_0x42a214(0x160)](a0_0x42a214(0x143),auth,async(_0x50c84b,_0x5a3e6d)=>{var _0x6c10ec=a0_0x42a214;try{const {username:_0x38ed2f,email:_0x3e79e1,role:_0x50ef48}=_0x50c84b['user'],_0x343f63=_0x50c84b[_0x6c10ec(0x20b)],_0x5a8a6d=await profile[_0x6c10ec(0x131)]({'email':_0x343f63['email']}),_0x4e1b35=await master_shop[_0x6c10ec(0x208)](),_0x336cc1=await transfers[_0x6c10ec(0x1de)](_0x50c84b['params']['id']);let _0x4a984b;if(_0x343f63['role']==_0x6c10ec(0x1dd)){const _0x4fac11=await staff[_0x6c10ec(0x131)]({'email':_0x343f63[_0x6c10ec(0x163)]});_0x4a984b=await warehouse['aggregate']([{'$match':{'status':_0x6c10ec(0x190),'name':_0x4fac11[_0x6c10ec(0x17b)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x6c10ec(0x173),'name':{'$first':_0x6c10ec(0x173)}}}]);}else _0x4a984b=await warehouse[_0x6c10ec(0x18b)]([{'$match':{'status':'Enabled','warehouse_category':_0x6c10ec(0x1ff)}},{'$group':{'_id':_0x6c10ec(0x173),'name':{'$first':_0x6c10ec(0x173)}}}]);const _0x36c0de=await warehouse['aggregate']([{'$match':{'name':_0x336cc1[_0x6c10ec(0x1bf)],'warehouse_category':'Raw\x20Materials'}},{'$unwind':_0x6c10ec(0x20f)},{'$group':{'_id':_0x6c10ec(0x19d),'name':{'$first':_0x6c10ec(0x1ca)},'product_stock':{'$first':_0x6c10ec(0x1f5)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x6c10ec(0x1e5)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x6c10ec(0x1a8)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x6c10ec(0x1af)},'rack':{'$first':_0x6c10ec(0x213)},'expiry_date':{'$first':_0x6c10ec(0x15b)},'production_date':{'$first':_0x6c10ec(0x159)},'room':{'$first':_0x6c10ec(0x17e)}}}]),_0x52ef6e=await product[_0x6c10ec(0x208)]({}),_0x5d3754=BayBinSelected(_0x336cc1[_0x6c10ec(0x209)],_0x336cc1[_0x6c10ec(0x1c0)]);if(_0x4e1b35[0x0][_0x6c10ec(0x202)]==_0x6c10ec(0x156)){var _0x50cc8d=users[_0x6c10ec(0x178)];console[_0x6c10ec(0x1b6)](_0x50cc8d);}else{if(_0x4e1b35[0x0]['language']==_0x6c10ec(0x1c1))var _0x50cc8d=users[_0x6c10ec(0x1c1)];else{if(_0x4e1b35[0x0]['language']==_0x6c10ec(0x17c))var _0x50cc8d=users[_0x6c10ec(0x17c)];else{if(_0x4e1b35[0x0][_0x6c10ec(0x202)]==_0x6c10ec(0x15e))var _0x50cc8d=users['Spanish'];else{if(_0x4e1b35[0x0]['language']==_0x6c10ec(0x164))var _0x50cc8d=users[_0x6c10ec(0x164)];else{if(_0x4e1b35[0x0]['language']==_0x6c10ec(0x185))var _0x50cc8d=users[_0x6c10ec(0x170)];else{if(_0x4e1b35[0x0][_0x6c10ec(0x202)]==_0x6c10ec(0x191))var _0x50cc8d=users[_0x6c10ec(0x191)];else{if(_0x4e1b35[0x0]['language']==_0x6c10ec(0x1c7))var _0x50cc8d=users[_0x6c10ec(0x196)];}}}}}}}_0x5a3e6d['render']('edit_transfer',{'success':_0x50c84b[_0x6c10ec(0x1ea)](_0x6c10ec(0x15d)),'errors':_0x50c84b[_0x6c10ec(0x1ea)](_0x6c10ec(0x18d)),'role':_0x343f63,'profile':_0x5a8a6d,'master_shop':_0x4e1b35,'warehouse':_0x4a984b,'transfer':_0x336cc1,'stock':_0x36c0de,'unit':_0x52ef6e,'language':_0x50cc8d});}catch(_0x394439){console[_0x6c10ec(0x1b6)](_0x394439);}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x143),auth,async(_0x2b705e,_0x3a0776)=>{var _0x27c1a5=a0_0x42a214;try{const _0x5c9b51=_0x2b705e[_0x27c1a5(0x174)]['id'],_0x1d12b5=await transfers[_0x27c1a5(0x1de)](_0x5c9b51);_0x3a0776[_0x27c1a5(0x1fd)](_0x2b705e[_0x27c1a5(0x1bc)]);return;const {date:_0x5a7138,from_warehouse:_0x8f3b54,FromRoom_name:_0x3c541a,to_warehouse:_0x179992,ToRoom_name:_0x3ce671,prod_name:_0x3d439a,from_prod_qty:_0x3cc3fe,from_prod_level:_0x4d9539,from_prod_isle:_0x31e8ed,from_prod_pallet:_0x562c61,to_prod_qty:_0x22961f,to_prod_level:_0x4dc785,to_prod_isle:_0x2096b1,to_prod_pallet:_0x3a0164,primary_code:_0x34a413,secondary_code:_0x42396d,product_code3:_0x461742,note:_0x2ce3e0,invoice:_0x595b73,expiry_date:_0x32d721}=_0x2b705e[_0x27c1a5(0x1bc)];if(typeof _0x3d439a==_0x27c1a5(0x1b8))var _0x4da4d9=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1fb)]],_0x4b1294=[_0x2b705e[_0x27c1a5(0x1bc)]['from_prod_qty']],_0x4c0719=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1b4)]],_0x4b7f96=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x18f)]],_0x3e8416=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x18e)]],_0x48083b=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1a7)]],_0x758d2e=[_0x2b705e['body']['to_prod_qty']],_0x5069ca=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x210)]],_0x3d84d5=[_0x2b705e[_0x27c1a5(0x1bc)]['to_prod_isle']],_0x120708=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1e0)]],_0x3bd992=[_0x2b705e['body'][_0x27c1a5(0x17d)]],_0x5d89b2=[_0x2b705e['body'][_0x27c1a5(0x1be)]],_0xc22cbe=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1f3)]],_0x315174=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1c6)]],_0x4d4c91=[_0x2b705e['body'][_0x27c1a5(0x1bb)]],_0x274dfa=[_0x2b705e['body'][_0x27c1a5(0x1e7)]],_0x49c673=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1d3)]],_0x2586a9=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1f8)]],_0x33dc6f=[_0x2b705e['body'][_0x27c1a5(0x1d7)]],_0x4a8fd8=[_0x2b705e[_0x27c1a5(0x1bc)]['batch_code']],_0x5a6fbe=[_0x2b705e['body'][_0x27c1a5(0x1d4)]],_0x3b4fd4=[_0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1ed)]],_0x30676c=[_0x2b705e['body'][_0x27c1a5(0x13e)]];else var _0x4da4d9=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1fb)]],_0x5d89b2=[..._0x2b705e[_0x27c1a5(0x1bc)]['storage']],_0xc22cbe=[..._0x2b705e[_0x27c1a5(0x1bc)]['rak']],_0x48083b=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1a7)]],_0x3bd992=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x17d)]],_0x4b1294=[..._0x2b705e[_0x27c1a5(0x1bc)]['from_prod_qty']],_0x4c0719=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1b4)]],_0x4b7f96=[..._0x2b705e[_0x27c1a5(0x1bc)]['from_prod_isle']],_0x3e8416=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x18e)]],_0x758d2e=[..._0x2b705e['body'][_0x27c1a5(0x1b9)]],_0x5069ca=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x210)]],_0x3d84d5=[..._0x2b705e[_0x27c1a5(0x1bc)]['to_prod_isle']],_0x120708=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1e0)]],_0x315174=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1c6)]],_0x4d4c91=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1bb)]],_0x274dfa=[..._0x2b705e[_0x27c1a5(0x1bc)]['product_code3']],_0x49c673=[..._0x2b705e['body'][_0x27c1a5(0x1d3)]],_0x2586a9=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1f8)]],_0x33dc6f=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1d7)]],_0x4a8fd8=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x20e)]],_0x5a6fbe=[..._0x2b705e[_0x27c1a5(0x1bc)][_0x27c1a5(0x1d4)]],_0x3b4fd4=[..._0x2b705e['body'][_0x27c1a5(0x1ed)]],_0x30676c=[..._0x2b705e['body'][_0x27c1a5(0x13e)]];const _0x201f4a=_0x4da4d9[_0x27c1a5(0x1a5)](_0x156994=>{return _0x156994={'product_name':_0x156994};});_0x4b1294['forEach']((_0x565335,_0x2985d3)=>{var _0x33a033=_0x27c1a5;_0x201f4a[_0x2985d3][_0x33a033(0x137)]=_0x565335;}),_0x4c0719[_0x27c1a5(0x13f)]((_0x17a296,_0xa680fe)=>{var _0x480a45=_0x27c1a5;_0x201f4a[_0xa680fe][_0x480a45(0x1ef)]=_0x17a296;}),_0x4b7f96[_0x27c1a5(0x13f)]((_0x5a0160,_0x5989e2)=>{var _0x3b6613=_0x27c1a5;_0x201f4a[_0x5989e2][_0x3b6613(0x1f7)]=_0x5a0160;}),_0x3e8416[_0x27c1a5(0x13f)]((_0x3193bb,_0x4b18bf)=>{var _0x251f4d=_0x27c1a5;_0x201f4a[_0x4b18bf][_0x251f4d(0x16d)]=_0x3193bb;}),_0x758d2e[_0x27c1a5(0x13f)]((_0x2a43e5,_0x55835b)=>{var _0x2b0717=_0x27c1a5;_0x201f4a[_0x55835b][_0x2b0717(0x184)]=_0x2a43e5;}),_0x5069ca[_0x27c1a5(0x13f)]((_0x7ae7c9,_0x4a6be7)=>{var _0x22b6bb=_0x27c1a5;_0x201f4a[_0x4a6be7][_0x22b6bb(0x1e2)]=_0x7ae7c9;}),_0x3d84d5[_0x27c1a5(0x13f)]((_0xa547e4,_0x3c8903)=>{var _0x86553e=_0x27c1a5;_0x201f4a[_0x3c8903][_0x86553e(0x14c)]=_0xa547e4;}),_0x120708[_0x27c1a5(0x13f)]((_0x45c48c,_0x563358)=>{_0x201f4a[_0x563358]['to_floorlevel']=_0x45c48c;}),_0x315174['forEach']((_0x291018,_0x193818)=>{var _0x8fb5a7=_0x27c1a5;_0x201f4a[_0x193818][_0x8fb5a7(0x1c6)]=_0x291018;}),_0x4d4c91[_0x27c1a5(0x13f)]((_0x5c8967,_0x2c3260)=>{_0x201f4a[_0x2c3260]['secondary_code']=_0x5c8967;}),_0x274dfa[_0x27c1a5(0x13f)]((_0x4faa8b,_0x4b7cba)=>{_0x201f4a[_0x4b7cba]['product_code']=_0x4faa8b;}),_0x49c673[_0x27c1a5(0x13f)]((_0x27fa9d,_0xa1ea24)=>{var _0x39c4e4=_0x27c1a5;_0x201f4a[_0xa1ea24][_0x39c4e4(0x212)]=_0x27fa9d;}),_0x2586a9['forEach']((_0x4611d4,_0x2e3025)=>{_0x201f4a[_0x2e3025]['unit']=_0x4611d4;}),_0x33dc6f[_0x27c1a5(0x13f)]((_0x4594ba,_0x3088e2)=>{var _0x4ef784=_0x27c1a5;_0x201f4a[_0x3088e2][_0x4ef784(0x1d7)]=_0x4594ba;}),_0x4a8fd8[_0x27c1a5(0x13f)]((_0x481b02,_0x387ed1)=>{_0x201f4a[_0x387ed1]['batch_code']=_0x481b02;}),_0x5a6fbe[_0x27c1a5(0x13f)]((_0x5b1203,_0x4ccff1)=>{var _0xf3808b=_0x27c1a5;_0x201f4a[_0x4ccff1][_0xf3808b(0x1d4)]=_0x5b1203;}),_0x5d89b2[_0x27c1a5(0x13f)]((_0x46c601,_0x4c0ec2)=>{var _0x8e6f9=_0x27c1a5;_0x201f4a[_0x4c0ec2][_0x8e6f9(0x1be)]=_0x46c601;}),_0xc22cbe[_0x27c1a5(0x13f)]((_0x2f43f9,_0x375141)=>{var _0x11c774=_0x27c1a5;_0x201f4a[_0x375141][_0x11c774(0x171)]=_0x2f43f9;}),_0x48083b['forEach']((_0x31eda6,_0x2079cd)=>{_0x201f4a[_0x2079cd]['from_types']=_0x31eda6;}),_0x3bd992['forEach']((_0x4bbafd,_0xf3a027)=>{_0x201f4a[_0xf3a027]['to_types']=_0x4bbafd;}),_0x3b4fd4[_0x27c1a5(0x13f)]((_0x1a0d5e,_0x493888)=>{var _0xc85f1e=_0x27c1a5;_0x201f4a[_0x493888][_0xc85f1e(0x1ed)]=_0x1a0d5e;}),_0x30676c[_0x27c1a5(0x13f)]((_0x2304b2,_0x12b52c)=>{var _0x382c21=_0x27c1a5;_0x201f4a[_0x12b52c][_0x382c21(0x16f)]=_0x2304b2;});const _0x4df3bb=_0x201f4a['filter'](_0x1adb2c=>_0x1adb2c[_0x27c1a5(0x184)]!=='0'&&_0x1adb2c[_0x27c1a5(0x184)]!==''||_0x1adb2c['to_floorlevel']!=='0'&&_0x1adb2c[_0x27c1a5(0x14d)]!=='');var _0x1c8190=0x0;_0x4df3bb[_0x27c1a5(0x13f)](_0x4adff4=>{var _0x3f23f8=_0x27c1a5;parseInt(_0x4adff4[_0x3f23f8(0x137)])<parseInt(_0x4adff4[_0x3f23f8(0x184)])&&_0x1c8190++;});if(_0x1c8190!=0x0)return _0x2b705e['flash'](_0x27c1a5(0x18d),_0x27c1a5(0x188)),_0x3a0776[_0x27c1a5(0x147)]('back');const _0x20353a=await warehouse[_0x27c1a5(0x131)]({'name':_0x1d12b5[_0x27c1a5(0x1bf)],'room':_0x1d12b5[_0x27c1a5(0x151)]});_0x1d12b5['product'][_0x27c1a5(0x13f)](_0x4b75ce=>{var _0x465a9a=_0x27c1a5;if(_0x4b75ce['to_quantity']>0x0){const _0x81b6e8=_0x20353a[_0x465a9a(0x166)][_0x465a9a(0x1a5)](_0x134ffb=>{var _0x41418e=_0x465a9a;_0x134ffb[_0x41418e(0x16c)]==_0x4b75ce['product_name']&&_0x134ffb['floorlevel']==_0x4b75ce['from_floorlevel']&&_0x134ffb[_0x41418e(0x168)]==_0x4b75ce[_0x41418e(0x1a7)]&&_0x134ffb[_0x41418e(0x144)]==_0x4b75ce['from_bin']&&_0x134ffb['bay']==_0x4b75ce[_0x41418e(0x1ef)]&&_0x134ffb[_0x41418e(0x171)]==_0x4b75ce[_0x41418e(0x16f)]&&_0x134ffb[_0x41418e(0x1be)]==_0x4b75ce[_0x41418e(0x1ed)]&&(_0x134ffb[_0x41418e(0x1d2)]=parseInt(_0x134ffb[_0x41418e(0x1d2)])+parseInt(_0x4b75ce[_0x41418e(0x184)]));});}}),await _0x20353a[_0x27c1a5(0x152)]();const _0x4f5088=await warehouse[_0x27c1a5(0x131)]({'name':_0x1d12b5[_0x27c1a5(0x209)],'room':_0x1d12b5['to_room']});_0x1d12b5[_0x27c1a5(0x175)][_0x27c1a5(0x13f)](_0x2488ac=>{var _0x208ca8=_0x27c1a5;if(_0x2488ac['to_quantity']>0x0){const _0x3d9b66=_0x4f5088[_0x208ca8(0x166)][_0x208ca8(0x1a5)](_0x54c515=>{var _0x5739f9=_0x208ca8;_0x54c515['product_name']==_0x2488ac['product_name']&&_0x54c515[_0x5739f9(0x19a)]==_0x2488ac[_0x5739f9(0x14d)]&&_0x54c515['type']==_0x2488ac[_0x5739f9(0x17d)]&&_0x54c515[_0x5739f9(0x144)]==_0x2488ac[_0x5739f9(0x14c)]&&_0x54c515[_0x5739f9(0x1b3)]==_0x2488ac[_0x5739f9(0x1e2)]&&_0x54c515[_0x5739f9(0x171)]==_0x2488ac[_0x5739f9(0x171)]&&_0x54c515[_0x5739f9(0x1be)]==_0x2488ac[_0x5739f9(0x1be)]&&(_0x54c515[_0x5739f9(0x1d2)]=parseInt(_0x54c515[_0x5739f9(0x1d2)])-parseInt(_0x2488ac[_0x5739f9(0x184)]));});}}),await _0x4f5088[_0x27c1a5(0x152)](),_0x1d12b5[_0x27c1a5(0x20d)]=_0x5a7138,_0x1d12b5[_0x27c1a5(0x1bf)]=_0x8f3b54,_0x1d12b5[_0x27c1a5(0x209)]=_0x179992,_0x1d12b5['product']=_0x4df3bb,_0x1d12b5['note']=_0x2ce3e0,_0x1d12b5['invoice']=_0x595b73;const _0x178ce7=await _0x1d12b5[_0x27c1a5(0x152)]();console[_0x27c1a5(0x1b6)](_0x178ce7);const _0x2aac6e=await warehouse[_0x27c1a5(0x131)]({'name':_0x8f3b54,'room':_0x3c541a});_0x178ce7[_0x27c1a5(0x175)][_0x27c1a5(0x13f)](_0x6bcdda=>{var _0x2537d9=_0x27c1a5;if(_0x6bcdda[_0x2537d9(0x184)]>0x0){const _0x7ebe7b=_0x2aac6e['product_details'][_0x2537d9(0x1a5)](_0x259d15=>{var _0x1d2c3b=_0x2537d9;_0x259d15[_0x1d2c3b(0x16c)]==_0x6bcdda[_0x1d2c3b(0x16c)]&&_0x259d15[_0x1d2c3b(0x19a)]==_0x6bcdda[_0x1d2c3b(0x16d)]&&_0x259d15[_0x1d2c3b(0x168)]==_0x6bcdda[_0x1d2c3b(0x1a7)]&&_0x259d15[_0x1d2c3b(0x144)]==_0x6bcdda['from_bin']&&_0x259d15[_0x1d2c3b(0x1b3)]==_0x6bcdda['from_bay']&&_0x259d15['rack']==_0x6bcdda[_0x1d2c3b(0x16f)]&&_0x259d15[_0x1d2c3b(0x1be)]==_0x6bcdda[_0x1d2c3b(0x1ed)]&&(_0x259d15['product_stock']=parseInt(_0x259d15['product_stock'])-parseInt(_0x6bcdda[_0x1d2c3b(0x184)]));});}}),await _0x2aac6e[_0x27c1a5(0x152)]();const _0x50a7cb=await warehouse[_0x27c1a5(0x131)]({'name':_0x179992,'room':_0x3ce671});_0x178ce7['product'][_0x27c1a5(0x13f)](_0x4267b1=>{var _0x3fa24a=_0x27c1a5;if(_0x4267b1[_0x3fa24a(0x184)]>0x0){var _0x44f625=0x0;const _0x3e1f47=_0x50a7cb[_0x3fa24a(0x166)][_0x3fa24a(0x1a5)](_0x27114f=>{var _0x24c809=_0x3fa24a;_0x27114f[_0x24c809(0x16c)]==_0x4267b1[_0x24c809(0x16c)]&&_0x27114f[_0x24c809(0x19a)]==_0x4267b1[_0x24c809(0x14d)]&&_0x27114f['type']==_0x4267b1[_0x24c809(0x17d)]&&_0x27114f[_0x24c809(0x144)]==_0x4267b1[_0x24c809(0x14c)]&&_0x27114f[_0x24c809(0x1b3)]==_0x4267b1[_0x24c809(0x1e2)]&&_0x27114f[_0x24c809(0x171)]==_0x4267b1[_0x24c809(0x171)]&&_0x27114f[_0x24c809(0x1be)]==_0x4267b1[_0x24c809(0x1be)]&&(_0x27114f[_0x24c809(0x1d2)]=parseInt(_0x27114f[_0x24c809(0x1d2)])+parseInt(_0x4267b1[_0x24c809(0x184)]),_0x44f625++);});_0x44f625=='0'&&(_0x50a7cb[_0x3fa24a(0x166)]=_0x50a7cb[_0x3fa24a(0x166)][_0x3fa24a(0x1fc)]({'product_name':_0x4267b1[_0x3fa24a(0x16c)],'product_stock':_0x4267b1[_0x3fa24a(0x184)],'bay':_0x4267b1['to_bay'],'bin':_0x4267b1[_0x3fa24a(0x14c)],'type':_0x4267b1[_0x3fa24a(0x17d)],'floorlevel':_0x4267b1[_0x3fa24a(0x14d)],'storage':_0x4267b1[_0x3fa24a(0x1be)],'rack':_0x4267b1[_0x3fa24a(0x171)],'product_code':_0x4267b1[_0x3fa24a(0x1c4)],'primary_code':_0x4267b1['primary_code'],'secondary_code':_0x4267b1[_0x3fa24a(0x1bb)],'maxProducts':_0x4267b1['maxProducts'],'storage':_0x4267b1[_0x3fa24a(0x1be)],'rack':_0x4267b1[_0x3fa24a(0x171)]}));}}),await _0x50a7cb[_0x27c1a5(0x152)](),_0x2b705e[_0x27c1a5(0x1ea)](_0x27c1a5(0x15d),'Transfer\x20Edit\x20Successfully'),_0x3a0776[_0x27c1a5(0x147)](_0x27c1a5(0x203));}catch(_0x443304){console[_0x27c1a5(0x1b6)](_0x443304);}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x16b),async(_0x3e65fc,_0x4ebb8d)=>{var _0x13bf57=a0_0x42a214;const {FromWareHouse:_0x5de08b,FromRoom:_0xe9729e,ToWarehouse:_0x2c9ede,ToRoom:_0x507f2b,primary_code:_0x3dfebe,Roomslist:_0x910d12}=_0x3e65fc[_0x13bf57(0x1bc)],_0x5470a5=_0x910d12[_0x13bf57(0x19c)](','),_0x4b8eb0=[];async function _0x2fa8fa(_0x26102b){var _0x201fd8=_0x13bf57;const _0x120fc6=await warehouse[_0x201fd8(0x18b)]([{'$match':{'name':_0x5de08b,'room':_0x26102b}},{'$unwind':_0x201fd8(0x20f)},{'$match':{'product_details.primary_code':_0x3dfebe}},{'$group':{'_id':_0x201fd8(0x19d),'name':{'$first':_0x201fd8(0x1ca)},'instock':{'$first':_0x201fd8(0x1f5)},'primary_code':{'$first':_0x201fd8(0x17f)},'secondary_code':{'$first':_0x201fd8(0x1a8)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x201fd8(0x1e5)},'type':{'$first':_0x201fd8(0x198)},'pallet':{'$first':_0x201fd8(0x133)},'unit':{'$first':_0x201fd8(0x194)},'secondary_unit':{'$first':_0x201fd8(0x1da)},'storage':{'$first':_0x201fd8(0x1af)},'rack':{'$first':_0x201fd8(0x213)},'expiry_date':{'$first':_0x201fd8(0x15b)},'production_date':{'$first':_0x201fd8(0x159)},'batch_code':{'$first':_0x201fd8(0x145)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x201fd8(0x17e)},'maxProducts':{'$first':_0x201fd8(0x206)}}}]),_0x3602c6=await warehouse['aggregate']([{'$match':{'name':_0x5de08b,'room':_0x26102b}},{'$unwind':_0x201fd8(0x20f)},{'$match':{'product_details.secondary_code':_0x3dfebe}},{'$group':{'_id':_0x201fd8(0x19d),'name':{'$first':_0x201fd8(0x1ca)},'instock':{'$first':_0x201fd8(0x1f5)},'primary_code':{'$first':_0x201fd8(0x17f)},'secondary_code':{'$first':_0x201fd8(0x1a8)},'product_code':{'$first':_0x201fd8(0x186)},'level':{'$first':_0x201fd8(0x1f0)},'isle':{'$first':_0x201fd8(0x1e5)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x201fd8(0x194)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x201fd8(0x1af)},'rack':{'$first':_0x201fd8(0x213)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x201fd8(0x159)},'batch_code':{'$first':_0x201fd8(0x145)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x201fd8(0x17e)},'maxProducts':{'$first':_0x201fd8(0x206)}}}]);if(_0x120fc6['length']>0x0)_0x4b8eb0[_0x201fd8(0x165)](_0x120fc6);else _0x3602c6['length']>0x0&&_0x4b8eb0['push'](_0x3602c6);}const _0x2450fa=_0x5470a5['map'](_0x3d4264=>_0x2fa8fa(_0x3d4264));await Promise['all'](_0x2450fa),_0x4ebb8d[_0x13bf57(0x1fd)](_0x4b8eb0);}),router[a0_0x42a214(0x195)](a0_0x42a214(0x169),async(_0x59b8e8,_0x35b503)=>{var _0x41d06a=a0_0x42a214;try{const {FromWareHouse:_0x5cb169,FromRoom:_0x290bc8,ToWarehouse:_0x5285d8,ToRoom:_0x4e56f8,secondary_code:_0x3b2d4f}=_0x59b8e8['body'],_0x466a56=await warehouse['aggregate']([{'$match':{'name':_0x5cb169}},{'$unwind':_0x41d06a(0x20f)},{'$match':{'product_details.secondary_code':_0x3b2d4f}},{'$group':{'_id':_0x41d06a(0x19d),'name':{'$first':_0x41d06a(0x1ca)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x41d06a(0x1a8)},'product_code':{'$first':_0x41d06a(0x186)},'instock':{'$first':_0x41d06a(0x1f5)},'warehouse':{'$first':_0x41d06a(0x173)},'level':{'$first':_0x41d06a(0x167)},'isle':{'$first':_0x41d06a(0x136)},'pallet':{'$first':_0x41d06a(0x177)},'maxProducts':{'$first':_0x41d06a(0x206)},'unit':{'$first':'$product_details.unit'}}}]);_0x35b503[_0x41d06a(0x1aa)](0xc8)[_0x41d06a(0x1fd)](_0x466a56);}catch(_0xfed407){_0x35b503[_0x41d06a(0x1aa)](0x194)[_0x41d06a(0x1fd)]({'message':_0xfed407[_0x41d06a(0x1e8)]});}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x154),async(_0x131a97,_0x91b1a0)=>{var _0x47eb33=a0_0x42a214;try{const {FromWareHouse:_0x1fa625,FromRoom:_0x5ad618,ToWarehouse:_0x3305c1,ToRoom:_0x49aa17,product_code:_0x5d6f07}=_0x131a97[_0x47eb33(0x1bc)],_0x24d035=await warehouse[_0x47eb33(0x18b)]([{'$match':{'name':_0x1fa625}},{'$unwind':_0x47eb33(0x20f)},{'$match':{'product_details.product_code':_0x5d6f07}},{'$group':{'_id':_0x47eb33(0x19d),'name':{'$first':_0x47eb33(0x1ca)},'primary_code':{'$first':_0x47eb33(0x17f)},'secondary_code':{'$first':_0x47eb33(0x1a8)},'product_code':{'$first':_0x47eb33(0x186)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':'$name'},'level':{'$first':_0x47eb33(0x167)},'isle':{'$first':_0x47eb33(0x136)},'pallet':{'$first':_0x47eb33(0x177)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':'$product_details.unit'}}}]);_0x91b1a0[_0x47eb33(0x1aa)](0xc8)[_0x47eb33(0x1fd)](_0x24d035);}catch(_0xff809a){_0x91b1a0['status'](0x194)[_0x47eb33(0x1fd)]({'message':_0xff809a['message']});}}),router[a0_0x42a214(0x195)](a0_0x42a214(0x19e),async(_0x3ac5ce,_0x4417eb)=>{var _0x1e935f=a0_0x42a214;const {level:_0x24a667,isle:_0x591688,pallet:_0x39bc2b,warehouses:_0x412c06,room:_0x296a9d}=_0x3ac5ce[_0x1e935f(0x1bc)];try{const _0x1cd610=await warehouse[_0x1e935f(0x18b)]([{'$match':{'name':_0x412c06,'room':_0x296a9d}},{'$unwind':_0x1e935f(0x20f)},{'$match':{'product_details.level':parseInt(_0x24a667),'product_details.isle':_0x591688,'product_details.pallet':parseInt(_0x39bc2b)}},{'$group':{'_id':_0x1e935f(0x19d),'name':{'$first':_0x1e935f(0x1ca)},'product_stock':{'$first':_0x1e935f(0x1f5)},'level':{'$first':_0x1e935f(0x167)},'isle':{'$first':_0x1e935f(0x136)},'pallet':{'$first':_0x1e935f(0x177)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x4417eb['status'](0xc8)['json'](_0x1cd610);}catch(_0x4bac96){_0x4417eb[_0x1e935f(0x1aa)](0x194)['json']({'message':_0x4bac96[_0x1e935f(0x1e8)]});}}),module['exports']=router;