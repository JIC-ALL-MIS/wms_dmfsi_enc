const a0_0x5c2494=a0_0x4bd9;(function(_0xf1799f,_0x4b9096){const _0x253fee=a0_0x4bd9,_0x1fbad7=_0xf1799f();while(!![]){try{const _0x1ba8a3=parseInt(_0x253fee(0x207))/0x1+-parseInt(_0x253fee(0x21e))/0x2+-parseInt(_0x253fee(0x204))/0x3*(-parseInt(_0x253fee(0x213))/0x4)+parseInt(_0x253fee(0x218))/0x5+-parseInt(_0x253fee(0x212))/0x6+parseInt(_0x253fee(0x20c))/0x7*(-parseInt(_0x253fee(0x209))/0x8)+parseInt(_0x253fee(0x1f5))/0x9;if(_0x1ba8a3===_0x4b9096)break;else _0x1fbad7['push'](_0x1fbad7['shift']());}catch(_0x47ec63){_0x1fbad7['push'](_0x1fbad7['shift']());}}}(a0_0x4cbb,0xb8ef8));function a0_0x4cbb(){const _0x37c00c=['256660gwiDDM','Chinese','8qoSuKD','get','user','2660791lrkAfO','Hindi','findOne','errors','German','language','6686880AyLowB','781512dQMxzM','Portuguese\x20(BR)','../public/language/languages.json','$to_warehouse','$product.from_quantity','3622300MnDYRq','/index','exports','/rm_chart','$total_price','../models/all_models','1314432beocze','find','success','Arabic','$return_sale','/raw_line','$product.quantity','$sale_product.quantity','/raw_adj_line','Spanish','$product','index','$return_product','$sale_product','Raw\x20Materials','True','length','/fg_line','flash','email','Finished\x20Goods','15595263AwtFzu','Router','$product.adjust_qty','$return_sale.sale_qty','$product.to_quantity','log','json','$product.product_name','English\x20(US)','warehouse_category','Portuguese','/raw_out_line','aggregate','/raw_trf_line','$date','3eqoFEd','$total_amount','French'];a0_0x4cbb=function(){return _0x37c00c;};return a0_0x4cbb();}function a0_0x4bd9(_0xe3b68e,_0x46ed07){const _0x4cbb43=a0_0x4cbb();return a0_0x4bd9=function(_0x4bd9e1,_0x2bb608){_0x4bd9e1=_0x4bd9e1-0x1e7;let _0x187c89=_0x4cbb43[_0x4bd9e1];return _0x187c89;},a0_0x4bd9(_0xe3b68e,_0x46ed07);}const express=require('express'),app=express(),router=express[a0_0x5c2494(0x1f6)](),auth=require('../middleware/auth'),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished}=require(a0_0x5c2494(0x21d)),users=require(a0_0x5c2494(0x215));router[a0_0x5c2494(0x20a)](a0_0x5c2494(0x219),auth,async(_0x245022,_0x17d255)=>{const _0x28a24a=a0_0x5c2494;try{const {username:_0x3c0932,email:_0x4bf9ab,role:_0x70f6e}=_0x245022[_0x28a24a(0x20b)],_0x3e8a42=_0x245022[_0x28a24a(0x20b)];var _0x58371d;if(_0x3e8a42[_0x28a24a(0x1fe)]==_0x28a24a(0x1ee)){const _0x387e8c=await product['find']({'product_category':_0x28a24a(0x1ee)});_0x58371d=_0x387e8c[_0x28a24a(0x1f0)];}else{if(_0x3e8a42['warehouse_category']=='Finished\x20Goods'){const _0x2f0597=await product['find']({'product_category':_0x28a24a(0x1f4)});_0x58371d=_0x2f0597['length'];}else{const _0x460863=await product[_0x28a24a(0x21f)]();_0x58371d=_0x460863[_0x28a24a(0x1f0)];}}const _0x2c78da=await profile[_0x28a24a(0x20e)]({'email':_0x3e8a42[_0x28a24a(0x1f3)]}),_0x441e1d=await master_shop['find'](),_0x121f3d=await sales['aggregate']([{'$group':{'_id':null,'total_price':{'$sum':_0x28a24a(0x21c)}}}]),_0x555d4c=await sales[_0x28a24a(0x201)]([{'$unwind':_0x28a24a(0x1ed)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x28a24a(0x1e7)}}}]),_0x38419f=await sales_return[_0x28a24a(0x201)]([{'$group':{'_id':null,'total':{'$sum':_0x28a24a(0x205)}}}]),_0x4f0602=await sales_return[_0x28a24a(0x201)]([{'$unwind':_0x28a24a(0x222)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x28a24a(0x1f8)}}}]),_0x1f3456=await purchases['aggregate']([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x2db633=await purchases_return[_0x28a24a(0x201)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x32ae50=await purchases_return['aggregate']([{'$unwind':_0x28a24a(0x1ec)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x1b44e0=await purchases[_0x28a24a(0x201)]([{'$unwind':'$product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x28a24a(0x224)}}}]),_0x47b37b=await purchases[_0x28a24a(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0xfd823c=await sales[_0x28a24a(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x152ab3=await transfers['aggregate']([{'$unwind':_0x28a24a(0x1ea)},{'$group':{'_id':_0x28a24a(0x1fc),'fromWarehouse':{'$first':'$from_warehouse'},'toWareHouse':{'$first':_0x28a24a(0x216)},'FromtotalQuantity':{'$sum':_0x28a24a(0x217)},'TototalQuantity':{'$sum':_0x28a24a(0x1f9)}}}]),_0x1f303d=await categories[_0x28a24a(0x21f)](),_0x65d9f=await product['find'](),_0x330567=await suppliers['find'](),_0x1f6eb8=await customer[_0x28a24a(0x21f)]();if(_0x441e1d[0x0][_0x28a24a(0x211)]==_0x28a24a(0x1fd))var _0x48c475=users['English'];else{if(_0x441e1d[0x0]['language']==_0x28a24a(0x20d))var _0x48c475=users[_0x28a24a(0x20d)];else{if(_0x441e1d[0x0][_0x28a24a(0x211)]==_0x28a24a(0x210))var _0x48c475=users[_0x28a24a(0x210)];else{if(_0x441e1d[0x0]['language']==_0x28a24a(0x1e9))var _0x48c475=users[_0x28a24a(0x1e9)];else{if(_0x441e1d[0x0][_0x28a24a(0x211)]==_0x28a24a(0x206))var _0x48c475=users[_0x28a24a(0x206)];else{if(_0x441e1d[0x0][_0x28a24a(0x211)]==_0x28a24a(0x214))var _0x48c475=users[_0x28a24a(0x1ff)];else{if(_0x441e1d[0x0][_0x28a24a(0x211)]==_0x28a24a(0x208))var _0x48c475=users[_0x28a24a(0x208)];else{if(_0x441e1d[0x0][_0x28a24a(0x211)]=='Arabic\x20(ae)')var _0x48c475=users[_0x28a24a(0x221)];}}}}}}}_0x17d255['render'](_0x28a24a(0x1eb),{'success':_0x245022[_0x28a24a(0x1f2)](_0x28a24a(0x220)),'errors':_0x245022[_0x28a24a(0x1f2)](_0x28a24a(0x20f)),'role':_0x3e8a42,'profile':_0x2c78da,'sale':_0x121f3d[0x0],'sales_return':_0x38419f[0x0],'purchases':_0x1f3456[0x0],'purchases_return':_0x2db633[0x0],'purchases_table':_0x47b37b,'sales_table':_0xfd823c,'categories':_0x1f303d[_0x28a24a(0x1f0)],'product':_0x65d9f['length'],'suppliers':_0x330567[_0x28a24a(0x1f0)],'customer':_0x1f6eb8[_0x28a24a(0x1f0)],'master_shop':_0x441e1d,'language':_0x48c475,'sale_QTY':_0x555d4c[0x0],'purchases_QTY':_0x1b44e0[0x0],'sales_return_QTY':_0x4f0602[0x0],'purchases_return_QTY':_0x32ae50[0x0],'transfer_table':_0x152ab3,'product_cnt':_0x58371d});}catch(_0x244c9d){console[_0x28a24a(0x1fa)](_0x244c9d);}}),router[a0_0x5c2494(0x20a)](a0_0x5c2494(0x223),auth,async(_0x2e2bd3,_0x321d83)=>{const _0x1de6b7=a0_0x5c2494;try{const _0x54f0bc=await purchases[_0x1de6b7(0x201)]([{'$unwind':'$product'},{'$group':{'_id':_0x1de6b7(0x203),'totalQuantity':{'$sum':'$product.quantity'},'date':{'$first':_0x1de6b7(0x203)}}},{'$sort':{'date':0x1}}]);_0x321d83[_0x1de6b7(0x1fb)](_0x54f0bc);}catch(_0x1adc65){_0x321d83[_0x1de6b7(0x1fb)](_0x1adc65);}}),router['get'](a0_0x5c2494(0x200),auth,async(_0x2b1018,_0x5ad49e)=>{const _0x3d4fe0=a0_0x5c2494;try{const _0x286dbe=await sales['aggregate']([{'$match':{'finalize':_0x3d4fe0(0x1ef)}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x3d4fe0(0x203),'totalQuantity':{'$sum':_0x3d4fe0(0x1e7)},'date':{'$first':_0x3d4fe0(0x203)}}},{'$sort':{'date':0x1}}]);_0x5ad49e[_0x3d4fe0(0x1fb)](_0x286dbe);}catch(_0x5b8095){_0x5ad49e[_0x3d4fe0(0x1fb)](_0x5b8095);}}),router[a0_0x5c2494(0x20a)](a0_0x5c2494(0x1e8),auth,async(_0x335484,_0x157dd6)=>{const _0x3ff26f=a0_0x5c2494;try{const _0xddaae4=await adjustment[_0x3ff26f(0x201)]([{'$match':{'finalize':_0x3ff26f(0x1ef)}},{'$unwind':_0x3ff26f(0x1ea)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x3ff26f(0x1f7)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x157dd6[_0x3ff26f(0x1fb)](_0xddaae4);}catch(_0x10dca1){_0x157dd6['json'](_0x10dca1);}}),router['get'](a0_0x5c2494(0x202),auth,async(_0x1f9bf6,_0x2fc5d4)=>{const _0x12aceb=a0_0x5c2494;try{const _0x2b11ea=await transfers[_0x12aceb(0x201)]([{'$match':{'finalize':'True'}},{'$unwind':_0x12aceb(0x1ea)},{'$group':{'_id':_0x12aceb(0x203),'totalQuantity':{'$sum':'$product.to_quantity'},'date':{'$first':_0x12aceb(0x203)}}},{'$sort':{'date':0x1}}]);_0x2fc5d4['json'](_0x2b11ea);}catch(_0x332940){_0x2fc5d4[_0x12aceb(0x1fb)](_0x332940);}}),router['get'](a0_0x5c2494(0x1f1),auth,async(_0x6f6f60,_0x1c7439)=>{const _0x3aba0d=a0_0x5c2494;try{const _0x316e3a=await purchases_finished[_0x3aba0d(0x201)]([{'$unwind':_0x3aba0d(0x1ea)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x3aba0d(0x224)},'date':{'$first':_0x3aba0d(0x203)}}},{'$sort':{'date':0x1}}]);_0x1c7439[_0x3aba0d(0x1fb)](_0x316e3a);}catch(_0xd40b37){_0x1c7439[_0x3aba0d(0x1fb)](_0xd40b37);}}),router[a0_0x5c2494(0x20a)]('/fg_out_line',auth,async(_0x224368,_0x1f744c)=>{const _0x250b87=a0_0x5c2494;try{const _0xfd2dae=await sales_finished['aggregate']([{'$match':{'finalize':_0x250b87(0x1ef)}},{'$unwind':_0x250b87(0x1ed)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x250b87(0x1e7)},'date':{'$first':_0x250b87(0x203)}}},{'$sort':{'date':0x1}}]);_0x1f744c[_0x250b87(0x1fb)](_0xfd2dae);}catch(_0x4b850d){_0x1f744c[_0x250b87(0x1fb)](_0x4b850d);}}),router[a0_0x5c2494(0x20a)]('/fg_adj_line',auth,async(_0x39e9b0,_0x1e507b)=>{const _0x2b20e8=a0_0x5c2494;try{const _0x2117b7=await adjustment_finished[_0x2b20e8(0x201)]([{'$match':{'finalize':_0x2b20e8(0x1ef)}},{'$unwind':_0x2b20e8(0x1ea)},{'$group':{'_id':_0x2b20e8(0x203),'totalQuantity':{'$sum':_0x2b20e8(0x1f7)},'date':{'$first':_0x2b20e8(0x203)}}},{'$sort':{'date':0x1}}]);_0x1e507b[_0x2b20e8(0x1fb)](_0x2117b7);}catch(_0x34544b){_0x1e507b[_0x2b20e8(0x1fb)](_0x34544b);}}),router[a0_0x5c2494(0x20a)]('/fg_trf_line',auth,async(_0x1f868c,_0x452595)=>{const _0x1a78f9=a0_0x5c2494;try{const _0x1d5f2c=await transfers_finished[_0x1a78f9(0x201)]([{'$match':{'finalize':_0x1a78f9(0x1ef)}},{'$unwind':'$product'},{'$group':{'_id':_0x1a78f9(0x203),'totalQuantity':{'$sum':_0x1a78f9(0x1f9)},'date':{'$first':_0x1a78f9(0x203)}}},{'$sort':{'date':0x1}}]);_0x452595[_0x1a78f9(0x1fb)](_0x1d5f2c);}catch(_0xfe71f0){_0x452595['json'](_0xfe71f0);}}),router[a0_0x5c2494(0x20a)](a0_0x5c2494(0x21b),auth,async(_0x4de211,_0x543d90)=>{const _0xffd030=a0_0x5c2494;try{const _0x3518d6=await purchases[_0xffd030(0x201)]([{'$unwind':_0xffd030(0x1ea)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0xffd030(0x224)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0xb1ccb7=await sales[_0xffd030(0x201)]([{'$match':{'finalize':_0xffd030(0x1ef)}},{'$unwind':_0xffd030(0x1ed)},{'$group':{'_id':_0xffd030(0x203),'totalQuantity':{'$sum':_0xffd030(0x1e7)},'date':{'$first':_0xffd030(0x203)}}},{'$sort':{'date':0x1}}]),_0x405bf1=await adjustment[_0xffd030(0x201)]([{'$match':{'finalize':_0xffd030(0x1ef)}},{'$unwind':'$product'},{'$group':{'_id':_0xffd030(0x203),'totalQuantity':{'$sum':_0xffd030(0x1f7)},'date':{'$first':_0xffd030(0x203)}}},{'$sort':{'date':0x1}}]),_0x1a4264=await transfers[_0xffd030(0x201)]([{'$match':{'finalize':_0xffd030(0x1ef)}},{'$unwind':_0xffd030(0x1ea)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0xffd030(0x1f9)},'date':{'$first':_0xffd030(0x203)}}},{'$sort':{'date':0x1}}]);_0x543d90[_0xffd030(0x1fb)]({'purchases':_0x3518d6,'sales':_0xb1ccb7,'adjustment':_0x405bf1,'transfer':_0x1a4264});}catch(_0x1641df){_0x543d90[_0xffd030(0x1fb)](_0x1641df);}}),router[a0_0x5c2494(0x20a)]('/fg_chart',auth,async(_0x9a0860,_0x3805c5)=>{const _0x321c51=a0_0x5c2494;try{const _0x1ee237=await product[_0x321c51(0x21f)]({'product_category':_0x321c51(0x1f4)});_0x3805c5[_0x321c51(0x1fb)]({'count':_0x1ee237['length']});}catch(_0x40191d){_0x3805c5[_0x321c51(0x1fb)](_0x40191d);}}),module[a0_0x5c2494(0x21a)]=router;