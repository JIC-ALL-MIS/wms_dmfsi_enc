const a0_0x404359=a0_0x5318;function a0_0x5318(_0x291dfc,_0x282cf9){const _0x45163a=a0_0x4516();return a0_0x5318=function(_0x5318db,_0x67114f){_0x5318db=_0x5318db-0x141;let _0x1e980c=_0x45163a[_0x5318db];return _0x1e980c;},a0_0x5318(_0x291dfc,_0x282cf9);}(function(_0x58640f,_0x1c4271){const _0x25a545=a0_0x5318,_0x4b80f5=_0x58640f();while(!![]){try{const _0x56d309=parseInt(_0x25a545(0x157))/0x1+parseInt(_0x25a545(0x143))/0x2*(-parseInt(_0x25a545(0x15e))/0x3)+-parseInt(_0x25a545(0x145))/0x4+parseInt(_0x25a545(0x14c))/0x5+-parseInt(_0x25a545(0x169))/0x6+parseInt(_0x25a545(0x179))/0x7+parseInt(_0x25a545(0x147))/0x8*(-parseInt(_0x25a545(0x17a))/0x9);if(_0x56d309===_0x1c4271)break;else _0x4b80f5['push'](_0x4b80f5['shift']());}catch(_0x30a982){_0x4b80f5['push'](_0x4b80f5['shift']());}}}(a0_0x4516,0x63c25));function a0_0x4516(){const _0x36073d=['user','exports','/fg_line','True','3670870rjPwxO','9NtqycT','$sale_product.quantity','length','German','Portuguese','get','Finished\x20Goods','Arabic','325856oAPKeH','English\x20(US)','292200fPMBPy','$product','475624AEhRjO','aggregate','English','/raw_out_line','../middleware/auth','2461820IIiHUd','$date','Hindi','Portuguese\x20(BR)','Raw\x20Materials','$total_price','../public/language/languages.json','$sale_product','$product.from_quantity','email','Arabic\x20(ae)','369919HcRYJZ','Chinese','flash','json','findOne','/raw_line','$return_product.return_qty','3LoziGc','language','index','$product.quantity','/fg_trf_line','/rm_chart','express','$return_sale.sale_qty','French','log','$to_warehouse','4095894fUurvf','$return_product','find','Spanish','$product.adjust_qty','warehouse_category','render','/index','/fg_out_line','$product.to_quantity','$total_amount','$return_sale'];a0_0x4516=function(){return _0x36073d;};return a0_0x4516();}const express=require(a0_0x404359(0x164)),app=express(),router=express['Router'](),auth=require(a0_0x404359(0x14b)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished}=require('../models/all_models'),users=require(a0_0x404359(0x152));router['get'](a0_0x404359(0x170),auth,async(_0x5cba62,_0x1697ca)=>{const _0x4e6daf=a0_0x404359;try{const {username:_0x7a353a,email:_0xd83d6a,role:_0x5a0036}=_0x5cba62['user'],_0xb45dad=_0x5cba62[_0x4e6daf(0x175)];var _0x4ca9d3;if(_0xb45dad[_0x4e6daf(0x16e)]=='Raw\x20Materials'){const _0x37fb76=await product[_0x4e6daf(0x16b)]({'product_category':_0x4e6daf(0x150)});_0x4ca9d3=_0x37fb76[_0x4e6daf(0x17c)];}else{if(_0xb45dad[_0x4e6daf(0x16e)]==_0x4e6daf(0x141)){const _0x28b746=await product['find']({'product_category':'Finished\x20Goods'});_0x4ca9d3=_0x28b746[_0x4e6daf(0x17c)];}else{const _0x328ba1=await product[_0x4e6daf(0x16b)]();_0x4ca9d3=_0x328ba1[_0x4e6daf(0x17c)];}}const _0x4d38d8=await profile[_0x4e6daf(0x15b)]({'email':_0xb45dad[_0x4e6daf(0x155)]}),_0x249f1f=await master_shop['find'](),_0x4e9c9d=await sales[_0x4e6daf(0x148)]([{'$group':{'_id':null,'total_price':{'$sum':_0x4e6daf(0x151)}}}]),_0x51f2b0=await sales[_0x4e6daf(0x148)]([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':'$sale_product.quantity'}}}]),_0x298c76=await sales_return[_0x4e6daf(0x148)]([{'$group':{'_id':null,'total':{'$sum':_0x4e6daf(0x173)}}}]),_0xb5e609=await sales_return[_0x4e6daf(0x148)]([{'$unwind':_0x4e6daf(0x174)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x4e6daf(0x165)}}}]),_0x4abea9=await purchases[_0x4e6daf(0x148)]([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x2fa415=await purchases_return[_0x4e6daf(0x148)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0xb42bd1=await purchases_return[_0x4e6daf(0x148)]([{'$unwind':_0x4e6daf(0x16a)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x4e6daf(0x15d)}}}]),_0x2a5df4=await purchases[_0x4e6daf(0x148)]([{'$unwind':'$product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x4e6daf(0x161)}}}]),_0x1a3ded=await purchases['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x55f47c=await sales[_0x4e6daf(0x148)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x7a0594=await transfers[_0x4e6daf(0x148)]([{'$unwind':_0x4e6daf(0x146)},{'$group':{'_id':'$product.product_name','fromWarehouse':{'$first':'$from_warehouse'},'toWareHouse':{'$first':_0x4e6daf(0x168)},'FromtotalQuantity':{'$sum':_0x4e6daf(0x154)},'TototalQuantity':{'$sum':_0x4e6daf(0x172)}}}]),_0x3e9b68=await categories['find'](),_0x10e7da=await product[_0x4e6daf(0x16b)](),_0x30c9da=await suppliers[_0x4e6daf(0x16b)](),_0xda0c47=await customer['find']();if(_0x249f1f[0x0]['language']==_0x4e6daf(0x144))var _0x4fd0ae=users[_0x4e6daf(0x149)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x14e))var _0x4fd0ae=users[_0x4e6daf(0x14e)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x17d))var _0x4fd0ae=users[_0x4e6daf(0x17d)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x16c))var _0x4fd0ae=users[_0x4e6daf(0x16c)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x166))var _0x4fd0ae=users[_0x4e6daf(0x166)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x14f))var _0x4fd0ae=users[_0x4e6daf(0x17e)];else{if(_0x249f1f[0x0][_0x4e6daf(0x15f)]==_0x4e6daf(0x158))var _0x4fd0ae=users[_0x4e6daf(0x158)];else{if(_0x249f1f[0x0]['language']==_0x4e6daf(0x156))var _0x4fd0ae=users[_0x4e6daf(0x142)];}}}}}}}_0x1697ca[_0x4e6daf(0x16f)](_0x4e6daf(0x160),{'success':_0x5cba62[_0x4e6daf(0x159)]('success'),'errors':_0x5cba62[_0x4e6daf(0x159)]('errors'),'role':_0xb45dad,'profile':_0x4d38d8,'sale':_0x4e9c9d[0x0],'sales_return':_0x298c76[0x0],'purchases':_0x4abea9[0x0],'purchases_return':_0x2fa415[0x0],'purchases_table':_0x1a3ded,'sales_table':_0x55f47c,'categories':_0x3e9b68[_0x4e6daf(0x17c)],'product':_0x10e7da[_0x4e6daf(0x17c)],'suppliers':_0x30c9da['length'],'customer':_0xda0c47['length'],'master_shop':_0x249f1f,'language':_0x4fd0ae,'sale_QTY':_0x51f2b0[0x0],'purchases_QTY':_0x2a5df4[0x0],'sales_return_QTY':_0xb5e609[0x0],'purchases_return_QTY':_0xb42bd1[0x0],'transfer_table':_0x7a0594,'product_cnt':_0x4ca9d3});}catch(_0x314642){console[_0x4e6daf(0x167)](_0x314642);}}),router[a0_0x404359(0x17f)](a0_0x404359(0x15c),auth,async(_0xbd3fd4,_0x55d8ea)=>{const _0x56eb83=a0_0x404359;try{const _0x474311=await purchases['aggregate']([{'$unwind':_0x56eb83(0x146)},{'$group':{'_id':_0x56eb83(0x14d),'totalQuantity':{'$sum':_0x56eb83(0x161)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x55d8ea[_0x56eb83(0x15a)](_0x474311);}catch(_0x1b6da7){_0x55d8ea[_0x56eb83(0x15a)](_0x1b6da7);}}),router['get'](a0_0x404359(0x14a),auth,async(_0x14d01c,_0xf6e1)=>{const _0x4ff166=a0_0x404359;try{const _0x3a8c89=await sales[_0x4ff166(0x148)]([{'$match':{'finalize':'True'}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x4ff166(0x14d),'totalQuantity':{'$sum':_0x4ff166(0x17b)},'date':{'$first':_0x4ff166(0x14d)}}},{'$sort':{'date':0x1}}]);_0xf6e1[_0x4ff166(0x15a)](_0x3a8c89);}catch(_0x5bf786){_0xf6e1['json'](_0x5bf786);}}),router[a0_0x404359(0x17f)]('/raw_adj_line',auth,async(_0xfbdefa,_0x496a61)=>{const _0x341258=a0_0x404359;try{const _0x5d6f22=await adjustment[_0x341258(0x148)]([{'$match':{'finalize':_0x341258(0x178)}},{'$unwind':_0x341258(0x146)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x341258(0x16d)},'date':{'$first':_0x341258(0x14d)}}},{'$sort':{'date':0x1}}]);_0x496a61[_0x341258(0x15a)](_0x5d6f22);}catch(_0x434f57){_0x496a61[_0x341258(0x15a)](_0x434f57);}}),router[a0_0x404359(0x17f)]('/raw_trf_line',auth,async(_0x133bd5,_0x4b3143)=>{const _0x209861=a0_0x404359;try{const _0x46dae5=await transfers['aggregate']([{'$match':{'finalize':'True'}},{'$unwind':_0x209861(0x146)},{'$group':{'_id':_0x209861(0x14d),'totalQuantity':{'$sum':_0x209861(0x172)},'date':{'$first':_0x209861(0x14d)}}},{'$sort':{'date':0x1}}]);_0x4b3143['json'](_0x46dae5);}catch(_0x46d100){_0x4b3143[_0x209861(0x15a)](_0x46d100);}}),router[a0_0x404359(0x17f)](a0_0x404359(0x177),auth,async(_0x324525,_0x20b9a5)=>{const _0x2a5609=a0_0x404359;try{const _0x5210b7=await purchases_finished[_0x2a5609(0x148)]([{'$unwind':_0x2a5609(0x146)},{'$group':{'_id':_0x2a5609(0x14d),'totalQuantity':{'$sum':_0x2a5609(0x161)},'date':{'$first':_0x2a5609(0x14d)}}},{'$sort':{'date':0x1}}]);_0x20b9a5[_0x2a5609(0x15a)](_0x5210b7);}catch(_0x5c63e1){_0x20b9a5[_0x2a5609(0x15a)](_0x5c63e1);}}),router[a0_0x404359(0x17f)](a0_0x404359(0x171),auth,async(_0x56ad3f,_0x141b0a)=>{const _0x52eed4=a0_0x404359;try{const _0x2cb369=await sales_finished['aggregate']([{'$match':{'finalize':_0x52eed4(0x178)}},{'$unwind':_0x52eed4(0x153)},{'$group':{'_id':'$date','totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':_0x52eed4(0x14d)}}},{'$sort':{'date':0x1}}]);_0x141b0a[_0x52eed4(0x15a)](_0x2cb369);}catch(_0x39288b){_0x141b0a['json'](_0x39288b);}}),router[a0_0x404359(0x17f)]('/fg_adj_line',auth,async(_0x52248d,_0x4157d6)=>{const _0x15ccad=a0_0x404359;try{const _0x5bea25=await adjustment_finished['aggregate']([{'$match':{'finalize':_0x15ccad(0x178)}},{'$unwind':'$product'},{'$group':{'_id':_0x15ccad(0x14d),'totalQuantity':{'$sum':_0x15ccad(0x16d)},'date':{'$first':_0x15ccad(0x14d)}}},{'$sort':{'date':0x1}}]);_0x4157d6[_0x15ccad(0x15a)](_0x5bea25);}catch(_0x3fcd5c){_0x4157d6[_0x15ccad(0x15a)](_0x3fcd5c);}}),router[a0_0x404359(0x17f)](a0_0x404359(0x162),auth,async(_0x43c3fb,_0xd4b49a)=>{const _0x5727c7=a0_0x404359;try{const _0x3dea05=await transfers_finished[_0x5727c7(0x148)]([{'$match':{'finalize':'True'}},{'$unwind':_0x5727c7(0x146)},{'$group':{'_id':_0x5727c7(0x14d),'totalQuantity':{'$sum':_0x5727c7(0x172)},'date':{'$first':_0x5727c7(0x14d)}}},{'$sort':{'date':0x1}}]);_0xd4b49a[_0x5727c7(0x15a)](_0x3dea05);}catch(_0xab1aa4){_0xd4b49a[_0x5727c7(0x15a)](_0xab1aa4);}}),router[a0_0x404359(0x17f)](a0_0x404359(0x163),auth,async(_0x386cdf,_0x2ec43f)=>{const _0x98db2d=a0_0x404359;try{const _0x2a7571=await purchases['aggregate']([{'$unwind':_0x98db2d(0x146)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x98db2d(0x161)},'date':{'$first':_0x98db2d(0x14d)}}},{'$sort':{'date':0x1}}]),_0x4ec015=await sales[_0x98db2d(0x148)]([{'$match':{'finalize':'True'}},{'$unwind':_0x98db2d(0x153)},{'$group':{'_id':_0x98db2d(0x14d),'totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':_0x98db2d(0x14d)}}},{'$sort':{'date':0x1}}]),_0x31912f=await adjustment['aggregate']([{'$match':{'finalize':'True'}},{'$unwind':_0x98db2d(0x146)},{'$group':{'_id':_0x98db2d(0x14d),'totalQuantity':{'$sum':_0x98db2d(0x16d)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0x596978=await transfers[_0x98db2d(0x148)]([{'$match':{'finalize':_0x98db2d(0x178)}},{'$unwind':_0x98db2d(0x146)},{'$group':{'_id':_0x98db2d(0x14d),'totalQuantity':{'$sum':'$product.to_quantity'},'date':{'$first':_0x98db2d(0x14d)}}},{'$sort':{'date':0x1}}]);_0x2ec43f[_0x98db2d(0x15a)]({'purchases':_0x2a7571,'sales':_0x4ec015,'adjustment':_0x31912f,'transfer':_0x596978});}catch(_0x9359bc){_0x2ec43f[_0x98db2d(0x15a)](_0x9359bc);}}),router['get']('/fg_chart',auth,async(_0x2dd232,_0x1237b4)=>{const _0x42a447=a0_0x404359;try{const _0x1d7ebe=await product[_0x42a447(0x16b)]({'product_category':'Finished\x20Goods'});_0x1237b4[_0x42a447(0x15a)]({'count':_0x1d7ebe['length']});}catch(_0x6a3e03){_0x1237b4[_0x42a447(0x15a)](_0x6a3e03);}}),module[a0_0x404359(0x176)]=router;