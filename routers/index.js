const a0_0x4b4946=a0_0xfd71;(function(_0x3845a9,_0x158c19){const _0x48681c=a0_0xfd71,_0x2cfdcf=_0x3845a9();while(!![]){try{const _0x4d03f2=-parseInt(_0x48681c(0x163))/0x1*(-parseInt(_0x48681c(0x162))/0x2)+-parseInt(_0x48681c(0x157))/0x3+parseInt(_0x48681c(0x15e))/0x4+-parseInt(_0x48681c(0x18b))/0x5*(parseInt(_0x48681c(0x161))/0x6)+parseInt(_0x48681c(0x15c))/0x7*(parseInt(_0x48681c(0x170))/0x8)+parseInt(_0x48681c(0x158))/0x9+-parseInt(_0x48681c(0x186))/0xa;if(_0x4d03f2===_0x158c19)break;else _0x2cfdcf['push'](_0x2cfdcf['shift']());}catch(_0x53b542){_0x2cfdcf['push'](_0x2cfdcf['shift']());}}}(a0_0x2885,0x33b8b));function a0_0x2885(){const _0x243f03=['express','$to_warehouse','index','findOne','language','/fg_trf_line','3969860KvaWEc','/fg_out_line','$date','success','email','25ZkEnwo','$product.product_name','../middleware/auth','aggregate','Arabic\x20(ae)','/fg_adj_line','Arabic','errors','549870SXUHuh','1194066iFDQri','$total_amount','True','Router','112pwIzHA','get','919568ngzBNE','$return_sale.sale_qty','../public/language/languages.json','211032WIBwbu','6EelnMX','73903RZohbP','exports','$return_sale','/raw_line','$sale_product.quantity','$total_price','German','$product.adjust_qty','Chinese','French','$product.quantity','render','$sale_product','191856PJrboe','English\x20(US)','/raw_trf_line','json','$product','length','/index','$return_product','Hindi','$product.to_quantity','user','find','flash','$from_warehouse','Portuguese\x20(BR)','/fg_line'];a0_0x2885=function(){return _0x243f03;};return a0_0x2885();}const express=require(a0_0x4b4946(0x180)),app=express(),router=express[a0_0x4b4946(0x15b)](),auth=require(a0_0x4b4946(0x18d)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished}=require('../models/all_models'),users=require(a0_0x4b4946(0x160));function a0_0xfd71(_0x35a421,_0x33211c){const _0x28855f=a0_0x2885();return a0_0xfd71=function(_0xfd7191,_0x4c6bed){_0xfd7191=_0xfd7191-0x152;let _0x4e4501=_0x28855f[_0xfd7191];return _0x4e4501;},a0_0xfd71(_0x35a421,_0x33211c);}router['get'](a0_0x4b4946(0x176),auth,async(_0x526542,_0x3c9590)=>{const _0x102336=a0_0x4b4946;try{const {username:_0x5d65d4,email:_0x3bb7bf,role:_0x508eaf}=_0x526542[_0x102336(0x17a)],_0x1b2c03=_0x526542['user'],_0x12933b=await profile[_0x102336(0x183)]({'email':_0x1b2c03[_0x102336(0x18a)]}),_0x39a847=await master_shop[_0x102336(0x17b)](),_0x5c1e3c=await sales[_0x102336(0x152)]([{'$group':{'_id':null,'total_price':{'$sum':_0x102336(0x168)}}}]),_0x3f173c=await sales[_0x102336(0x152)]([{'$unwind':_0x102336(0x16f)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x102336(0x167)}}}]),_0x117a3a=await sales_return[_0x102336(0x152)]([{'$group':{'_id':null,'total':{'$sum':_0x102336(0x159)}}}]),_0x57f7d9=await sales_return[_0x102336(0x152)]([{'$unwind':_0x102336(0x165)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x102336(0x15f)}}}]),_0x5ccadc=await purchases['aggregate']([{'$group':{'_id':null,'total_amount':{'$sum':_0x102336(0x159)}}}]),_0x2dac15=await purchases_return[_0x102336(0x152)]([{'$group':{'_id':null,'total':{'$sum':_0x102336(0x159)}}}]),_0xf91ea1=await purchases_return[_0x102336(0x152)]([{'$unwind':_0x102336(0x177)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x51f596=await purchases['aggregate']([{'$unwind':'$product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x102336(0x16d)}}}]),_0x346b1d=await purchases[_0x102336(0x152)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x268cd7=await sales['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x416d74=await transfers['aggregate']([{'$unwind':_0x102336(0x174)},{'$group':{'_id':_0x102336(0x18c),'fromWarehouse':{'$first':_0x102336(0x17d)},'toWareHouse':{'$first':_0x102336(0x181)},'FromtotalQuantity':{'$sum':'$product.from_quantity'},'TototalQuantity':{'$sum':'$product.to_quantity'}}}]),_0x198239=await categories['find'](),_0x2671fd=await product[_0x102336(0x17b)](),_0x36f1c4=await suppliers[_0x102336(0x17b)](),_0x5b762a=await customer[_0x102336(0x17b)]();if(_0x39a847[0x0]['language']==_0x102336(0x171))var _0x10ccb5=users['English'];else{if(_0x39a847[0x0][_0x102336(0x184)]==_0x102336(0x178))var _0x10ccb5=users[_0x102336(0x178)];else{if(_0x39a847[0x0][_0x102336(0x184)]==_0x102336(0x169))var _0x10ccb5=users[_0x102336(0x169)];else{if(_0x39a847[0x0]['language']=='Spanish')var _0x10ccb5=users['Spanish'];else{if(_0x39a847[0x0][_0x102336(0x184)]=='French')var _0x10ccb5=users[_0x102336(0x16c)];else{if(_0x39a847[0x0][_0x102336(0x184)]==_0x102336(0x17e))var _0x10ccb5=users['Portuguese'];else{if(_0x39a847[0x0][_0x102336(0x184)]==_0x102336(0x16b))var _0x10ccb5=users[_0x102336(0x16b)];else{if(_0x39a847[0x0]['language']==_0x102336(0x153))var _0x10ccb5=users[_0x102336(0x155)];}}}}}}}_0x3c9590[_0x102336(0x16e)](_0x102336(0x182),{'success':_0x526542['flash'](_0x102336(0x189)),'errors':_0x526542[_0x102336(0x17c)](_0x102336(0x156)),'role':_0x1b2c03,'profile':_0x12933b,'sale':_0x5c1e3c[0x0],'sales_return':_0x117a3a[0x0],'purchases':_0x5ccadc[0x0],'purchases_return':_0x2dac15[0x0],'purchases_table':_0x346b1d,'sales_table':_0x268cd7,'categories':_0x198239['length'],'product':_0x2671fd[_0x102336(0x175)],'suppliers':_0x36f1c4['length'],'customer':_0x5b762a[_0x102336(0x175)],'master_shop':_0x39a847,'language':_0x10ccb5,'sale_QTY':_0x3f173c[0x0],'purchases_QTY':_0x51f596[0x0],'sales_return_QTY':_0x57f7d9[0x0],'purchases_return_QTY':_0xf91ea1[0x0],'transfer_table':_0x416d74});}catch(_0x418355){console['log'](_0x418355);}}),router[a0_0x4b4946(0x15d)](a0_0x4b4946(0x166),auth,async(_0xe906b7,_0x3c0cc2)=>{const _0x16bb87=a0_0x4b4946;try{const _0x3885ce=await purchases[_0x16bb87(0x152)]([{'$unwind':_0x16bb87(0x174)},{'$group':{'_id':_0x16bb87(0x188),'totalQuantity':{'$sum':_0x16bb87(0x16d)},'date':{'$first':_0x16bb87(0x188)}}},{'$sort':{'date':0x1}}]);_0x3c0cc2[_0x16bb87(0x173)](_0x3885ce);}catch(_0x52f379){_0x3c0cc2[_0x16bb87(0x173)](_0x52f379);}}),router[a0_0x4b4946(0x15d)]('/raw_out_line',auth,async(_0x240bd9,_0x56a688)=>{const _0x3b4037=a0_0x4b4946;try{const _0x1b00a0=await sales[_0x3b4037(0x152)]([{'$match':{'finalize':_0x3b4037(0x15a)}},{'$unwind':_0x3b4037(0x16f)},{'$group':{'_id':_0x3b4037(0x188),'totalQuantity':{'$sum':_0x3b4037(0x167)},'date':{'$first':_0x3b4037(0x188)}}},{'$sort':{'date':0x1}}]);_0x56a688[_0x3b4037(0x173)](_0x1b00a0);}catch(_0x1e8a2c){_0x56a688[_0x3b4037(0x173)](_0x1e8a2c);}}),router[a0_0x4b4946(0x15d)]('/raw_adj_line',auth,async(_0xe3c347,_0x303da9)=>{const _0x55da15=a0_0x4b4946;try{const _0xdd086f=await adjustment[_0x55da15(0x152)]([{'$match':{'finalize':_0x55da15(0x15a)}},{'$unwind':'$product'},{'$group':{'_id':_0x55da15(0x188),'totalQuantity':{'$sum':_0x55da15(0x16a)},'date':{'$first':_0x55da15(0x188)}}},{'$sort':{'date':0x1}}]);_0x303da9[_0x55da15(0x173)](_0xdd086f);}catch(_0x728346){_0x303da9[_0x55da15(0x173)](_0x728346);}}),router[a0_0x4b4946(0x15d)](a0_0x4b4946(0x172),auth,async(_0xf30621,_0x5ba08f)=>{const _0x1696df=a0_0x4b4946;try{const _0x37d4de=await transfers['aggregate']([{'$match':{'finalize':_0x1696df(0x15a)}},{'$unwind':_0x1696df(0x174)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x1696df(0x179)},'date':{'$first':_0x1696df(0x188)}}},{'$sort':{'date':0x1}}]);_0x5ba08f['json'](_0x37d4de);}catch(_0x4d288b){_0x5ba08f[_0x1696df(0x173)](_0x4d288b);}}),router['get'](a0_0x4b4946(0x17f),auth,async(_0x50346d,_0x2cebc7)=>{const _0x438f5f=a0_0x4b4946;try{const _0x3e48a0=await purchases_finished[_0x438f5f(0x152)]([{'$unwind':'$product'},{'$group':{'_id':_0x438f5f(0x188),'totalQuantity':{'$sum':_0x438f5f(0x16d)},'date':{'$first':_0x438f5f(0x188)}}},{'$sort':{'date':0x1}}]);_0x2cebc7[_0x438f5f(0x173)](_0x3e48a0);}catch(_0x2c5f96){_0x2cebc7[_0x438f5f(0x173)](_0x2c5f96);}}),router['get'](a0_0x4b4946(0x187),auth,async(_0x3d4c0b,_0x4465b8)=>{const _0x2ec11f=a0_0x4b4946;try{const _0x5bda2e=await sales_finished[_0x2ec11f(0x152)]([{'$match':{'finalize':_0x2ec11f(0x15a)}},{'$unwind':_0x2ec11f(0x16f)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x2ec11f(0x167)},'date':{'$first':_0x2ec11f(0x188)}}},{'$sort':{'date':0x1}}]);_0x4465b8['json'](_0x5bda2e);}catch(_0x1ee71e){_0x4465b8[_0x2ec11f(0x173)](_0x1ee71e);}}),router[a0_0x4b4946(0x15d)](a0_0x4b4946(0x154),auth,async(_0xc33718,_0x4f1201)=>{const _0x492108=a0_0x4b4946;try{const _0x1fc65b=await adjustment_finished['aggregate']([{'$match':{'finalize':'True'}},{'$unwind':_0x492108(0x174)},{'$group':{'_id':_0x492108(0x188),'totalQuantity':{'$sum':_0x492108(0x16a)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x4f1201[_0x492108(0x173)](_0x1fc65b);}catch(_0x4b6ebc){_0x4f1201['json'](_0x4b6ebc);}}),router[a0_0x4b4946(0x15d)](a0_0x4b4946(0x185),auth,async(_0x71a794,_0x415318)=>{const _0x49911f=a0_0x4b4946;try{const _0x4b4018=await transfers_finished[_0x49911f(0x152)]([{'$match':{'finalize':_0x49911f(0x15a)}},{'$unwind':'$product'},{'$group':{'_id':'$date','totalQuantity':{'$sum':'$product.to_quantity'},'date':{'$first':_0x49911f(0x188)}}},{'$sort':{'date':0x1}}]);_0x415318['json'](_0x4b4018);}catch(_0x245fb0){_0x415318[_0x49911f(0x173)](_0x245fb0);}}),module[a0_0x4b4946(0x164)]=router;