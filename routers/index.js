const a0_0xb50f1f=a0_0x3241;function a0_0x3241(_0x28bfcd,_0x47e8b1){const _0x49f95b=a0_0x49f9();return a0_0x3241=function(_0x3241b7,_0x54b529){_0x3241b7=_0x3241b7-0x96;let _0x3e5ce7=_0x49f95b[_0x3241b7];return _0x3e5ce7;},a0_0x3241(_0x28bfcd,_0x47e8b1);}(function(_0x479eec,_0x4a46f1){const _0x459d23=a0_0x3241,_0x43caff=_0x479eec();while(!![]){try{const _0x59b047=parseInt(_0x459d23(0xb1))/0x1+parseInt(_0x459d23(0xc2))/0x2+-parseInt(_0x459d23(0xab))/0x3+-parseInt(_0x459d23(0x9e))/0x4*(-parseInt(_0x459d23(0xc1))/0x5)+parseInt(_0x459d23(0x9b))/0x6+parseInt(_0x459d23(0xaf))/0x7+-parseInt(_0x459d23(0xa4))/0x8;if(_0x59b047===_0x4a46f1)break;else _0x43caff['push'](_0x43caff['shift']());}catch(_0x4ef9e){_0x43caff['push'](_0x43caff['shift']());}}}(a0_0x49f9,0xb2539));const express=require('express'),app=express(),router=express['Router'](),auth=require(a0_0xb50f1f(0xc5)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished}=require(a0_0xb50f1f(0xb5)),users=require(a0_0xb50f1f(0xa9));function a0_0x49f9(){const _0x57a319=['$return_sale.sale_qty','True','5241546vDwhWb','German','$sale_product.quantity','140152rjcPHh','length','$from_warehouse','$return_product.return_qty','Finished\x20Goods','flash','10819600XYccRd','$date','Raw\x20Materials','Chinese','Hindi','../public/language/languages.json','$product.to_quantity','3837348codnXd','language','$to_warehouse','findOne','2309202HqvlZj','Spanish','864001BpLFFp','/fg_line','Arabic\x20(ae)','$total_price','../models/all_models','/fg_out_line','find','$total_amount','/raw_adj_line','/raw_trf_line','$product.from_quantity','$return_sale','email','$return_product','/fg_trf_line','/index','140jIxpEt','626898jjMuTX','$product.product_name','$product.adjust_qty','../middleware/auth','get','/fg_adj_line','English\x20(US)','aggregate','log','user','json','errors','$sale_product','$product.quantity','French','$product'];a0_0x49f9=function(){return _0x57a319;};return a0_0x49f9();}router[a0_0xb50f1f(0xc6)](a0_0xb50f1f(0xc0),auth,async(_0x4e7534,_0x80456f)=>{const _0x3cf81a=a0_0xb50f1f;try{const {username:_0x2b5558,email:_0x2089b2,role:_0x4f6c73}=_0x4e7534[_0x3cf81a(0xcb)],_0x18725e=_0x4e7534[_0x3cf81a(0xcb)];var _0x518fe8;if(_0x18725e['warehouse_category']==_0x3cf81a(0xa6)){const _0x34648f=await product[_0x3cf81a(0xb7)]({'product_category':'Raw\x20Materials'});_0x518fe8=_0x34648f[_0x3cf81a(0x9f)];}else{if(_0x18725e['warehouse_category']==_0x3cf81a(0xa2)){const _0x54f01f=await product[_0x3cf81a(0xb7)]({'product_category':'Finished\x20Goods'});_0x518fe8=_0x54f01f[_0x3cf81a(0x9f)];}else{const _0x579252=await product[_0x3cf81a(0xb7)]();_0x518fe8=_0x579252['length'];}}const _0x3317ce=await profile[_0x3cf81a(0xae)]({'email':_0x18725e[_0x3cf81a(0xbd)]}),_0xa91234=await master_shop[_0x3cf81a(0xb7)](),_0xe4407d=await sales[_0x3cf81a(0xc9)]([{'$group':{'_id':null,'total_price':{'$sum':_0x3cf81a(0xb4)}}}]),_0x5d903a=await sales[_0x3cf81a(0xc9)]([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x3cf81a(0x9d)}}}]),_0x21f30f=await sales_return[_0x3cf81a(0xc9)]([{'$group':{'_id':null,'total':{'$sum':_0x3cf81a(0xb8)}}}]),_0x59046b=await sales_return['aggregate']([{'$unwind':_0x3cf81a(0xbc)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x3cf81a(0x99)}}}]),_0x4f3fcf=await purchases[_0x3cf81a(0xc9)]([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x1dd801=await purchases_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x3cf81a(0xb8)}}}]),_0x12fdd5=await purchases_return[_0x3cf81a(0xc9)]([{'$unwind':_0x3cf81a(0xbe)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x3cf81a(0xa1)}}}]),_0x3e6d83=await purchases[_0x3cf81a(0xc9)]([{'$unwind':_0x3cf81a(0x98)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x3cf81a(0x96)}}}]),_0x37f811=await purchases[_0x3cf81a(0xc9)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x2f7daa=await sales[_0x3cf81a(0xc9)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x411d1c=await transfers[_0x3cf81a(0xc9)]([{'$unwind':_0x3cf81a(0x98)},{'$group':{'_id':_0x3cf81a(0xc3),'fromWarehouse':{'$first':_0x3cf81a(0xa0)},'toWareHouse':{'$first':_0x3cf81a(0xad)},'FromtotalQuantity':{'$sum':_0x3cf81a(0xbb)},'TototalQuantity':{'$sum':_0x3cf81a(0xaa)}}}]),_0x288860=await categories[_0x3cf81a(0xb7)](),_0xf9f2b9=await product[_0x3cf81a(0xb7)](),_0x18bd1d=await suppliers['find'](),_0x35b8b1=await customer[_0x3cf81a(0xb7)]();if(_0xa91234[0x0][_0x3cf81a(0xac)]==_0x3cf81a(0xc8))var _0x5631a3=users['English'];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]=='Hindi')var _0x5631a3=users[_0x3cf81a(0xa8)];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]==_0x3cf81a(0x9c))var _0x5631a3=users['German'];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]==_0x3cf81a(0xb0))var _0x5631a3=users['Spanish'];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]==_0x3cf81a(0x97))var _0x5631a3=users[_0x3cf81a(0x97)];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]=='Portuguese\x20(BR)')var _0x5631a3=users['Portuguese'];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]=='Chinese')var _0x5631a3=users[_0x3cf81a(0xa7)];else{if(_0xa91234[0x0][_0x3cf81a(0xac)]==_0x3cf81a(0xb3))var _0x5631a3=users['Arabic'];}}}}}}}_0x80456f['render']('index',{'success':_0x4e7534[_0x3cf81a(0xa3)]('success'),'errors':_0x4e7534[_0x3cf81a(0xa3)](_0x3cf81a(0xcd)),'role':_0x18725e,'profile':_0x3317ce,'sale':_0xe4407d[0x0],'sales_return':_0x21f30f[0x0],'purchases':_0x4f3fcf[0x0],'purchases_return':_0x1dd801[0x0],'purchases_table':_0x37f811,'sales_table':_0x2f7daa,'categories':_0x288860[_0x3cf81a(0x9f)],'product':_0xf9f2b9[_0x3cf81a(0x9f)],'suppliers':_0x18bd1d[_0x3cf81a(0x9f)],'customer':_0x35b8b1[_0x3cf81a(0x9f)],'master_shop':_0xa91234,'language':_0x5631a3,'sale_QTY':_0x5d903a[0x0],'purchases_QTY':_0x3e6d83[0x0],'sales_return_QTY':_0x59046b[0x0],'purchases_return_QTY':_0x12fdd5[0x0],'transfer_table':_0x411d1c,'product_cnt':_0x518fe8});}catch(_0x1efcb6){console[_0x3cf81a(0xca)](_0x1efcb6);}}),router['get']('/raw_line',auth,async(_0x265a63,_0x208661)=>{const _0x63eaff=a0_0xb50f1f;try{const _0x26cc70=await purchases[_0x63eaff(0xc9)]([{'$unwind':'$product'},{'$group':{'_id':_0x63eaff(0xa5),'totalQuantity':{'$sum':'$product.quantity'},'date':{'$first':_0x63eaff(0xa5)}}},{'$sort':{'date':0x1}}]);_0x208661[_0x63eaff(0xcc)](_0x26cc70);}catch(_0x408be2){_0x208661[_0x63eaff(0xcc)](_0x408be2);}}),router[a0_0xb50f1f(0xc6)]('/raw_out_line',auth,async(_0x50ee09,_0x247e3c)=>{const _0x4cec54=a0_0xb50f1f;try{const _0xe1e2b9=await sales[_0x4cec54(0xc9)]([{'$match':{'finalize':_0x4cec54(0x9a)}},{'$unwind':_0x4cec54(0xce)},{'$group':{'_id':_0x4cec54(0xa5),'totalQuantity':{'$sum':_0x4cec54(0x9d)},'date':{'$first':_0x4cec54(0xa5)}}},{'$sort':{'date':0x1}}]);_0x247e3c[_0x4cec54(0xcc)](_0xe1e2b9);}catch(_0x5ce193){_0x247e3c[_0x4cec54(0xcc)](_0x5ce193);}}),router['get'](a0_0xb50f1f(0xb9),auth,async(_0x3be5c8,_0x47a3c0)=>{const _0x1a8b90=a0_0xb50f1f;try{const _0x8fe1f4=await adjustment[_0x1a8b90(0xc9)]([{'$match':{'finalize':_0x1a8b90(0x9a)}},{'$unwind':_0x1a8b90(0x98)},{'$group':{'_id':_0x1a8b90(0xa5),'totalQuantity':{'$sum':'$product.adjust_qty'},'date':{'$first':_0x1a8b90(0xa5)}}},{'$sort':{'date':0x1}}]);_0x47a3c0[_0x1a8b90(0xcc)](_0x8fe1f4);}catch(_0x320c2d){_0x47a3c0[_0x1a8b90(0xcc)](_0x320c2d);}}),router[a0_0xb50f1f(0xc6)](a0_0xb50f1f(0xba),auth,async(_0x5d112d,_0x128535)=>{const _0x82ca68=a0_0xb50f1f;try{const _0x407049=await transfers['aggregate']([{'$match':{'finalize':_0x82ca68(0x9a)}},{'$unwind':_0x82ca68(0x98)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x82ca68(0xaa)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x128535[_0x82ca68(0xcc)](_0x407049);}catch(_0x21bc69){_0x128535['json'](_0x21bc69);}}),router['get'](a0_0xb50f1f(0xb2),auth,async(_0x42b45f,_0x4003e4)=>{const _0x12e542=a0_0xb50f1f;try{const _0x420b4d=await purchases_finished[_0x12e542(0xc9)]([{'$unwind':'$product'},{'$group':{'_id':'$date','totalQuantity':{'$sum':'$product.quantity'},'date':{'$first':_0x12e542(0xa5)}}},{'$sort':{'date':0x1}}]);_0x4003e4[_0x12e542(0xcc)](_0x420b4d);}catch(_0xbca84c){_0x4003e4[_0x12e542(0xcc)](_0xbca84c);}}),router[a0_0xb50f1f(0xc6)](a0_0xb50f1f(0xb6),auth,async(_0x33c2c7,_0x34d3ea)=>{const _0x456a96=a0_0xb50f1f;try{const _0x52f3fd=await sales_finished['aggregate']([{'$match':{'finalize':_0x456a96(0x9a)}},{'$unwind':_0x456a96(0xce)},{'$group':{'_id':_0x456a96(0xa5),'totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':_0x456a96(0xa5)}}},{'$sort':{'date':0x1}}]);_0x34d3ea[_0x456a96(0xcc)](_0x52f3fd);}catch(_0xa70e2b){_0x34d3ea[_0x456a96(0xcc)](_0xa70e2b);}}),router[a0_0xb50f1f(0xc6)](a0_0xb50f1f(0xc7),auth,async(_0x192f54,_0x1609b3)=>{const _0x35d559=a0_0xb50f1f;try{const _0xbcb7f8=await adjustment_finished['aggregate']([{'$match':{'finalize':'True'}},{'$unwind':_0x35d559(0x98)},{'$group':{'_id':_0x35d559(0xa5),'totalQuantity':{'$sum':_0x35d559(0xc4)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x1609b3[_0x35d559(0xcc)](_0xbcb7f8);}catch(_0x2a7a8d){_0x1609b3['json'](_0x2a7a8d);}}),router[a0_0xb50f1f(0xc6)](a0_0xb50f1f(0xbf),auth,async(_0x473988,_0x38de13)=>{const _0x4666b1=a0_0xb50f1f;try{const _0x46fa26=await transfers_finished['aggregate']([{'$match':{'finalize':_0x4666b1(0x9a)}},{'$unwind':'$product'},{'$group':{'_id':_0x4666b1(0xa5),'totalQuantity':{'$sum':'$product.to_quantity'},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x38de13[_0x4666b1(0xcc)](_0x46fa26);}catch(_0x5b6df4){_0x38de13[_0x4666b1(0xcc)](_0x5b6df4);}}),router[a0_0xb50f1f(0xc6)]('/rm_chart',auth,async(_0x2ffa09,_0x42f176)=>{const _0x3d22b9=a0_0xb50f1f;try{const _0x43c104=await purchases['aggregate']([{'$unwind':_0x3d22b9(0x98)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x3d22b9(0x96)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0xc366c4=await sales[_0x3d22b9(0xc9)]([{'$match':{'finalize':_0x3d22b9(0x9a)}},{'$unwind':_0x3d22b9(0xce)},{'$group':{'_id':_0x3d22b9(0xa5),'totalQuantity':{'$sum':_0x3d22b9(0x9d)},'date':{'$first':_0x3d22b9(0xa5)}}},{'$sort':{'date':0x1}}]),_0x1348cc=await adjustment[_0x3d22b9(0xc9)]([{'$match':{'finalize':_0x3d22b9(0x9a)}},{'$unwind':_0x3d22b9(0x98)},{'$group':{'_id':_0x3d22b9(0xa5),'totalQuantity':{'$sum':_0x3d22b9(0xc4)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0x269570=await transfers['aggregate']([{'$match':{'finalize':_0x3d22b9(0x9a)}},{'$unwind':'$product'},{'$group':{'_id':_0x3d22b9(0xa5),'totalQuantity':{'$sum':'$product.to_quantity'},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x42f176[_0x3d22b9(0xcc)]({'purchases':_0x43c104,'sales':_0xc366c4,'adjustment':_0x1348cc,'transfer':_0x269570});}catch(_0x419c0e){_0x42f176['json'](_0x419c0e);}}),router[a0_0xb50f1f(0xc6)]('/fg_chart',auth,async(_0x690caf,_0x58dac3)=>{const _0xbda493=a0_0xb50f1f;try{const _0x5a9bf1=await product['find']({'product_category':_0xbda493(0xa2)});_0x58dac3[_0xbda493(0xcc)]({'count':_0x5a9bf1[_0xbda493(0x9f)]});}catch(_0xd8fb28){_0x58dac3[_0xbda493(0xcc)](_0xd8fb28);}}),module['exports']=router;