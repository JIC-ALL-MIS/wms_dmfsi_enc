const a0_0x80bd6=a0_0x2fca;(function(_0x729990,_0x5db11f){const _0x19863b=a0_0x2fca,_0x4c4331=_0x729990();while(!![]){try{const _0x61498b=-parseInt(_0x19863b(0xcb))/0x1*(parseInt(_0x19863b(0xe2))/0x2)+parseInt(_0x19863b(0xf9))/0x3*(parseInt(_0x19863b(0xff))/0x4)+parseInt(_0x19863b(0xd7))/0x5+parseInt(_0x19863b(0xcf))/0x6*(-parseInt(_0x19863b(0xfd))/0x7)+parseInt(_0x19863b(0xeb))/0x8*(-parseInt(_0x19863b(0x103))/0x9)+parseInt(_0x19863b(0xd0))/0xa*(-parseInt(_0x19863b(0xcd))/0xb)+parseInt(_0x19863b(0xf5))/0xc;if(_0x61498b===_0x5db11f)break;else _0x4c4331['push'](_0x4c4331['shift']());}catch(_0x21ebb5){_0x4c4331['push'](_0x4c4331['shift']());}}}(a0_0x56c1,0x56b21));function a0_0x2fca(_0x52a70f,_0x36cdbb){const _0x56c1e7=a0_0x56c1();return a0_0x2fca=function(_0x2fca0b,_0x21d495){_0x2fca0b=_0x2fca0b-0xca;let _0xf62245=_0x56c1e7[_0x2fca0b];return _0xf62245;},a0_0x2fca(_0x52a70f,_0x36cdbb);}const express=require(a0_0x80bd6(0x102)),app=express(),router=express[a0_0x80bd6(0xf7)](),auth=require(a0_0x80bd6(0xe7)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished}=require(a0_0x80bd6(0xf3)),users=require('../public/language/languages.json');function a0_0x56c1(){const _0x37bce4=['Portuguese\x20(BR)','$sale_product.quantity','user','../middleware/auth','English\x20(US)','length','get','376CwgJGU','$sale_product','json','errors','aggregate','Chinese','$to_warehouse','/fg_adj_line','../models/all_models','$return_product','12742296LVJOht','$return_product.return_qty','Router','/index','24LlwGNb','/raw_trf_line','render','/fg_chart','84VyknoQ','$product.adjust_qty','130548pXOQTB','/fg_line','email','express','26397xkFRav','Arabic','$product.quantity','$total_amount','English','$return_sale','language','Spanish','571VYbYQm','Raw\x20Materials','22SepvId','True','25212VYrJtD','1756720NFjBYO','$total_price','$product.product_name','Portuguese','German','Hindi','Finished\x20Goods','362685lliLVx','Arabic\x20(ae)','/raw_line','find','$date','$product.from_quantity','findOne','warehouse_category','$product','French','$product.to_quantity','1754oYRRHv','/raw_adj_line'];a0_0x56c1=function(){return _0x37bce4;};return a0_0x56c1();}router[a0_0x80bd6(0xea)](a0_0x80bd6(0xf8),auth,async(_0x5c7038,_0x2de134)=>{const _0x56d865=a0_0x80bd6;try{const {username:_0x313d84,email:_0x589b62,role:_0x373c70}=_0x5c7038[_0x56d865(0xe6)],_0x178bca=_0x5c7038[_0x56d865(0xe6)];var _0x5a1774;if(_0x178bca[_0x56d865(0xde)]==_0x56d865(0xcc)){const _0x2861da=await product[_0x56d865(0xda)]({'product_category':'Raw\x20Materials'});_0x5a1774=_0x2861da[_0x56d865(0xe9)];}else{if(_0x178bca[_0x56d865(0xde)]==_0x56d865(0xd6)){const _0x1ed5ba=await product['find']({'product_category':_0x56d865(0xd6)});_0x5a1774=_0x1ed5ba[_0x56d865(0xe9)];}else{const _0x26ea75=await product['find']();_0x5a1774=_0x26ea75['length'];}}const _0x1942b0=await profile[_0x56d865(0xdd)]({'email':_0x178bca[_0x56d865(0x101)]}),_0x4f9e29=await master_shop[_0x56d865(0xda)](),_0x22c719=await sales[_0x56d865(0xef)]([{'$group':{'_id':null,'total_price':{'$sum':_0x56d865(0xd1)}}}]),_0x52f6fa=await sales[_0x56d865(0xef)]([{'$unwind':_0x56d865(0xec)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x56d865(0xe5)}}}]),_0x3352ba=await sales_return[_0x56d865(0xef)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x1f2694=await sales_return[_0x56d865(0xef)]([{'$unwind':_0x56d865(0x108)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_sale.sale_qty'}}}]),_0x390536=await purchases[_0x56d865(0xef)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x56d865(0x106)}}}]),_0x170d3f=await purchases_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x56d865(0x106)}}}]),_0x1b5902=await purchases_return['aggregate']([{'$unwind':_0x56d865(0xf4)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x56d865(0xf6)}}}]),_0x444011=await purchases['aggregate']([{'$unwind':_0x56d865(0xdf)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x56d865(0x105)}}}]),_0x4dfb38=await purchases[_0x56d865(0xef)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x1c4386=await sales[_0x56d865(0xef)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x300ceb=await transfers[_0x56d865(0xef)]([{'$unwind':'$product'},{'$group':{'_id':_0x56d865(0xd2),'fromWarehouse':{'$first':'$from_warehouse'},'toWareHouse':{'$first':_0x56d865(0xf1)},'FromtotalQuantity':{'$sum':_0x56d865(0xdc)},'TototalQuantity':{'$sum':_0x56d865(0xe1)}}}]),_0x2e1fce=await categories[_0x56d865(0xda)](),_0x110295=await product['find'](),_0x291d75=await suppliers[_0x56d865(0xda)](),_0x3c6550=await customer[_0x56d865(0xda)]();if(_0x4f9e29[0x0][_0x56d865(0x109)]==_0x56d865(0xe8))var _0x572f72=users[_0x56d865(0x107)];else{if(_0x4f9e29[0x0][_0x56d865(0x109)]=='Hindi')var _0x572f72=users[_0x56d865(0xd5)];else{if(_0x4f9e29[0x0]['language']==_0x56d865(0xd4))var _0x572f72=users[_0x56d865(0xd4)];else{if(_0x4f9e29[0x0][_0x56d865(0x109)]==_0x56d865(0xca))var _0x572f72=users[_0x56d865(0xca)];else{if(_0x4f9e29[0x0][_0x56d865(0x109)]==_0x56d865(0xe0))var _0x572f72=users[_0x56d865(0xe0)];else{if(_0x4f9e29[0x0][_0x56d865(0x109)]==_0x56d865(0xe4))var _0x572f72=users[_0x56d865(0xd3)];else{if(_0x4f9e29[0x0]['language']==_0x56d865(0xf0))var _0x572f72=users['Chinese'];else{if(_0x4f9e29[0x0][_0x56d865(0x109)]==_0x56d865(0xd8))var _0x572f72=users[_0x56d865(0x104)];}}}}}}}_0x2de134[_0x56d865(0xfb)]('index',{'success':_0x5c7038['flash']('success'),'errors':_0x5c7038['flash'](_0x56d865(0xee)),'role':_0x178bca,'profile':_0x1942b0,'sale':_0x22c719[0x0],'sales_return':_0x3352ba[0x0],'purchases':_0x390536[0x0],'purchases_return':_0x170d3f[0x0],'purchases_table':_0x4dfb38,'sales_table':_0x1c4386,'categories':_0x2e1fce[_0x56d865(0xe9)],'product':_0x110295[_0x56d865(0xe9)],'suppliers':_0x291d75[_0x56d865(0xe9)],'customer':_0x3c6550[_0x56d865(0xe9)],'master_shop':_0x4f9e29,'language':_0x572f72,'sale_QTY':_0x52f6fa[0x0],'purchases_QTY':_0x444011[0x0],'sales_return_QTY':_0x1f2694[0x0],'purchases_return_QTY':_0x1b5902[0x0],'transfer_table':_0x300ceb,'product_cnt':_0x5a1774});}catch(_0x43aa9b){console['log'](_0x43aa9b);}}),router[a0_0x80bd6(0xea)](a0_0x80bd6(0xd9),auth,async(_0x27387b,_0x3f6dbf)=>{const _0x392315=a0_0x80bd6;try{const _0x3a1a13=await purchases[_0x392315(0xef)]([{'$unwind':_0x392315(0xdf)},{'$group':{'_id':_0x392315(0xdb),'totalQuantity':{'$sum':_0x392315(0x105)},'date':{'$first':_0x392315(0xdb)}}},{'$sort':{'date':0x1}}]);_0x3f6dbf[_0x392315(0xed)](_0x3a1a13);}catch(_0xfa0285){_0x3f6dbf['json'](_0xfa0285);}}),router[a0_0x80bd6(0xea)]('/raw_out_line',auth,async(_0x320e6c,_0x5283ce)=>{const _0x2e53d6=a0_0x80bd6;try{const _0x4172a4=await sales[_0x2e53d6(0xef)]([{'$match':{'finalize':'True'}},{'$unwind':'$sale_product'},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x2e53d6(0xe5)},'date':{'$first':_0x2e53d6(0xdb)}}},{'$sort':{'date':0x1}}]);_0x5283ce[_0x2e53d6(0xed)](_0x4172a4);}catch(_0x4b6a7c){_0x5283ce[_0x2e53d6(0xed)](_0x4b6a7c);}}),router[a0_0x80bd6(0xea)](a0_0x80bd6(0xe3),auth,async(_0x317eac,_0x2c060a)=>{const _0x4241db=a0_0x80bd6;try{const _0x59ca47=await adjustment['aggregate']([{'$match':{'finalize':_0x4241db(0xce)}},{'$unwind':_0x4241db(0xdf)},{'$group':{'_id':'$date','totalQuantity':{'$sum':'$product.adjust_qty'},'date':{'$first':_0x4241db(0xdb)}}},{'$sort':{'date':0x1}}]);_0x2c060a[_0x4241db(0xed)](_0x59ca47);}catch(_0x385be4){_0x2c060a[_0x4241db(0xed)](_0x385be4);}}),router['get'](a0_0x80bd6(0xfa),auth,async(_0x3a1528,_0x5ce1f6)=>{const _0x339293=a0_0x80bd6;try{const _0x37fd67=await transfers[_0x339293(0xef)]([{'$match':{'finalize':'True'}},{'$unwind':_0x339293(0xdf)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x339293(0xe1)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x5ce1f6[_0x339293(0xed)](_0x37fd67);}catch(_0x581766){_0x5ce1f6['json'](_0x581766);}}),router['get'](a0_0x80bd6(0x100),auth,async(_0x124713,_0xbd991)=>{const _0x3406b0=a0_0x80bd6;try{const _0x31a1ca=await purchases_finished[_0x3406b0(0xef)]([{'$unwind':'$product'},{'$group':{'_id':_0x3406b0(0xdb),'totalQuantity':{'$sum':'$product.quantity'},'date':{'$first':_0x3406b0(0xdb)}}},{'$sort':{'date':0x1}}]);_0xbd991[_0x3406b0(0xed)](_0x31a1ca);}catch(_0x2730d0){_0xbd991['json'](_0x2730d0);}}),router['get']('/fg_out_line',auth,async(_0x2aa0a7,_0x4dd88b)=>{const _0x929442=a0_0x80bd6;try{const _0x369aa7=await sales_finished['aggregate']([{'$match':{'finalize':'True'}},{'$unwind':_0x929442(0xec)},{'$group':{'_id':'$date','totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x4dd88b[_0x929442(0xed)](_0x369aa7);}catch(_0x5ba4a3){_0x4dd88b['json'](_0x5ba4a3);}}),router[a0_0x80bd6(0xea)](a0_0x80bd6(0xf2),auth,async(_0x2272dd,_0xf5b98b)=>{const _0x156b64=a0_0x80bd6;try{const _0x37ad2a=await adjustment_finished[_0x156b64(0xef)]([{'$match':{'finalize':'True'}},{'$unwind':_0x156b64(0xdf)},{'$group':{'_id':_0x156b64(0xdb),'totalQuantity':{'$sum':_0x156b64(0xfe)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0xf5b98b['json'](_0x37ad2a);}catch(_0x24f4f6){_0xf5b98b['json'](_0x24f4f6);}}),router[a0_0x80bd6(0xea)]('/fg_trf_line',auth,async(_0x10e79a,_0x1e575b)=>{const _0x2b025d=a0_0x80bd6;try{const _0x158dbe=await transfers_finished['aggregate']([{'$match':{'finalize':_0x2b025d(0xce)}},{'$unwind':_0x2b025d(0xdf)},{'$group':{'_id':_0x2b025d(0xdb),'totalQuantity':{'$sum':_0x2b025d(0xe1)},'date':{'$first':_0x2b025d(0xdb)}}},{'$sort':{'date':0x1}}]);_0x1e575b[_0x2b025d(0xed)](_0x158dbe);}catch(_0x115d76){_0x1e575b[_0x2b025d(0xed)](_0x115d76);}}),router[a0_0x80bd6(0xea)]('/rm_chart',auth,async(_0x418508,_0x16907f)=>{const _0x58c706=a0_0x80bd6;try{const _0x20e339=await purchases[_0x58c706(0xef)]([{'$unwind':_0x58c706(0xdf)},{'$group':{'_id':_0x58c706(0xdb),'totalQuantity':{'$sum':_0x58c706(0x105)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0x5efba7=await sales['aggregate']([{'$match':{'finalize':_0x58c706(0xce)}},{'$unwind':'$sale_product'},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x58c706(0xe5)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0x3e2826=await adjustment[_0x58c706(0xef)]([{'$match':{'finalize':_0x58c706(0xce)}},{'$unwind':_0x58c706(0xdf)},{'$group':{'_id':_0x58c706(0xdb),'totalQuantity':{'$sum':_0x58c706(0xfe)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]),_0x29e2ae=await transfers['aggregate']([{'$match':{'finalize':_0x58c706(0xce)}},{'$unwind':_0x58c706(0xdf)},{'$group':{'_id':_0x58c706(0xdb),'totalQuantity':{'$sum':_0x58c706(0xe1)},'date':{'$first':_0x58c706(0xdb)}}},{'$sort':{'date':0x1}}]);_0x16907f[_0x58c706(0xed)]({'purchases':_0x20e339,'sales':_0x5efba7,'adjustment':_0x3e2826,'transfer':_0x29e2ae});}catch(_0x79ede){_0x16907f[_0x58c706(0xed)](_0x79ede);}}),router[a0_0x80bd6(0xea)](a0_0x80bd6(0xfc),auth,async(_0x5e9f07,_0xc480c4)=>{const _0x2691e1=a0_0x80bd6;try{const _0x3b9ecf=await product[_0x2691e1(0xda)]({'product_category':'Finished\x20Goods'});_0xc480c4['json']({'count':_0x3b9ecf[_0x2691e1(0xe9)]});}catch(_0x411597){_0xc480c4['json'](_0x411597);}}),module['exports']=router;