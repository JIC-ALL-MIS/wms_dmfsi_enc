function a0_0x88a6(_0x3c6814,_0x4906a5){const _0x50b5d1=a0_0x50b5();return a0_0x88a6=function(_0x88a642,_0x29fd64){_0x88a642=_0x88a642-0x12b;let _0x41552a=_0x50b5d1[_0x88a642];return _0x41552a;},a0_0x88a6(_0x3c6814,_0x4906a5);}const a0_0x3ee589=a0_0x88a6;(function(_0x10d67e,_0x122bd2){const _0x49b6f5=a0_0x88a6,_0x2149e7=_0x10d67e();while(!![]){try{const _0x32e01d=-parseInt(_0x49b6f5(0x159))/0x1*(-parseInt(_0x49b6f5(0x13b))/0x2)+-parseInt(_0x49b6f5(0x14d))/0x3+-parseInt(_0x49b6f5(0x153))/0x4*(-parseInt(_0x49b6f5(0x180))/0x5)+parseInt(_0x49b6f5(0x141))/0x6+parseInt(_0x49b6f5(0x186))/0x7+-parseInt(_0x49b6f5(0x16a))/0x8+parseInt(_0x49b6f5(0x12d))/0x9;if(_0x32e01d===_0x122bd2)break;else _0x2149e7['push'](_0x2149e7['shift']());}catch(_0xc04388){_0x2149e7['push'](_0x2149e7['shift']());}}}(a0_0x50b5,0x8e6cc));const express=require(a0_0x3ee589(0x17c)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require('../models/all_models'),auth=require(a0_0x3ee589(0x175)),users=require(a0_0x3ee589(0x134)),excelJS=require('exceljs'),xlsx=require(a0_0x3ee589(0x15d)),multer=require(a0_0x3ee589(0x182));function a0_0x50b5(){const _0x302667=['customer','attachment;\x20filename=customer_Migration_File.xlsx','../public/language/languages.json','sheet_to_json','landline','Customers','single','/view/:id','English','580964sWiZpB','receivable_sum','write','flash','French','addWorksheet','4047684mBDZBG','Sale','save','customer\x20update\x20successfully','errors','Arabic','public/Migration','master','post','Portuguese\x20(BR)','customer_data','now','2030175yTOfja','utils','Content-Disposition','json','body','$amount','12632lSgGzt','address','send','PUnits','find','customer_docs','2BwiJZj','Arabic\x20(ae)','/view','SalesmanCode','xlsx','payment_data','Portuguese','then','language','get','Content-Type','redirect','findById','mobile','findOne','aggregate','/view/payment/:id','6247504yUOKzL','success','reason','error','name','customer\x20add\x20successfully','Hindi','amount','filename','email','originalname','../middleware/auth','data','setHeader','$reason','Name','user','receivable','express','sale','map','English\x20(US)','520wQHvok','render','multer','payable_sum','/customer_import_migrate_file','SalesmanName','632394Fhrggt','German','Sale\x20Return','PName','Chinese','log','status','/customer/view','Spanish','3300147XOvDLq','params','diskStorage','sale_return','columns'];a0_0x50b5=function(){return _0x302667;};return a0_0x50b5();}router[a0_0x3ee589(0x162)](a0_0x3ee589(0x15b),auth,async(_0x4c5857,_0x48ff18)=>{const _0xce263f=a0_0x3ee589;try{const {username:_0x20c1a1,email:_0x1a161b,role:_0x1d5cac}=_0x4c5857[_0xce263f(0x17a)],_0x425aad=_0x4c5857[_0xce263f(0x17a)],_0x4d0a06=await profile[_0xce263f(0x167)]({'email':_0x425aad[_0xce263f(0x173)]}),_0x37ac92=await master_shop[_0xce263f(0x157)]();console['log'](_0xce263f(0x148),_0x37ac92);const _0x1617ac=await customer[_0xce263f(0x157)](),_0x805d71=await customer[_0xce263f(0x168)]([{'$lookup':{'from':'c_payments','localField':'name','foreignField':_0xce263f(0x132),'as':_0xce263f(0x158)}}]);console['log'](_0x805d71);const _0x5f1caf=_0x805d71[_0xce263f(0x17e)](_0xeb98b4=>{const _0x14ab29=_0xce263f;console[_0x14ab29(0x18b)](_0x14ab29(0x176),_0xeb98b4);var _0x4e626c=0x0,_0x1cfa43=0x0;return _0xeb98b4[_0x14ab29(0x158)]['forEach'](_0x44b4ea=>{const _0x5b5050=_0x14ab29;console[_0x5b5050(0x18b)]('element',_0x44b4ea),_0x44b4ea[_0x5b5050(0x16c)]==_0x5b5050(0x142)?_0x4e626c+=_0x44b4ea[_0x5b5050(0x171)]:_0x1cfa43+=_0x44b4ea['amount'];}),_0xeb98b4[_0x14ab29(0x17d)]=parseFloat(_0x4e626c)+0x0,_0xeb98b4[_0x14ab29(0x130)]=parseFloat(_0x1cfa43)+0x0,_0xeb98b4;});console['log'](_0xce263f(0x15e),_0x5f1caf);if(_0x37ac92[0x0]['language']==_0xce263f(0x17f)){var _0x41f10a=users[_0xce263f(0x13a)];console['log'](_0x41f10a);}else{if(_0x37ac92[0x0][_0xce263f(0x161)]=='Hindi')var _0x41f10a=users['Hindi'];else{if(_0x37ac92[0x0][_0xce263f(0x161)]==_0xce263f(0x187))var _0x41f10a=users['German'];else{if(_0x37ac92[0x0][_0xce263f(0x161)]==_0xce263f(0x12c))var _0x41f10a=users[_0xce263f(0x12c)];else{if(_0x37ac92[0x0][_0xce263f(0x161)]==_0xce263f(0x13f))var _0x41f10a=users[_0xce263f(0x13f)];else{if(_0x37ac92[0x0][_0xce263f(0x161)]==_0xce263f(0x14a))var _0x41f10a=users[_0xce263f(0x15f)];else{if(_0x37ac92[0x0][_0xce263f(0x161)]==_0xce263f(0x18a))var _0x41f10a=users['Chinese'];else{if(_0x37ac92[0x0][_0xce263f(0x161)]=='Arabic\x20(ae)')var _0x41f10a=users[_0xce263f(0x146)];}}}}}}}_0x48ff18['render']('customer',{'success':_0x4c5857['flash'](_0xce263f(0x16b)),'errors':_0x4c5857[_0xce263f(0x13e)](_0xce263f(0x145)),'user':_0x1617ac,'role':_0x425aad,'profile':_0x4d0a06,'payment':_0x5f1caf,'master_shop':_0x37ac92,'language':_0x41f10a});}catch(_0x1e08c3){console['log'](_0x1e08c3);}}),router[a0_0x3ee589(0x149)]('/view',auth,async(_0x8d7ec2,_0x56411d)=>{const _0x3d625b=a0_0x3ee589;try{const {name:_0x542096,address:_0x9b6292,mobile:_0x531cb8,email:_0x5e65da,receivable:_0x15cf21,payable:_0x8ea3e,contactperson:_0x68436c,landline:_0xa69820}=_0x8d7ec2['body'],_0x2ddd54=new customer({'name':_0x542096,'address':_0x9b6292,'mobile':_0x531cb8,'email':_0x5e65da,'receivable':_0x15cf21,'payable':_0x8ea3e,'contactperson':_0x68436c,'landline':_0xa69820}),_0x20a6bf=await _0x2ddd54[_0x3d625b(0x143)]();_0x8d7ec2['flash'](_0x3d625b(0x16b),_0x3d625b(0x16f)),_0x56411d[_0x3d625b(0x164)]('/customer/view');}catch(_0x175975){console['log'](_0x175975);}}),router[a0_0x3ee589(0x162)](a0_0x3ee589(0x139),auth,async(_0x5cff77,_0x2fde61)=>{const _0x453d87=a0_0x3ee589;try{const {username:_0x56e6b4,email:_0x1c2b91,role:_0x962a63}=_0x5cff77[_0x453d87(0x17a)],_0x289047=_0x5cff77['user'],_0x2635c=await profile['findOne']({'email':_0x289047['email']}),_0x2f7adc=await master_shop['find']();console['log'](_0x453d87(0x148),_0x2f7adc);const _0x4f6cf3=_0x5cff77[_0x453d87(0x12e)]['id'],_0x487834=await customer[_0x453d87(0x165)](_0x4f6cf3);if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x17f)){var _0x3c423c=users['English'];console[_0x453d87(0x18b)](_0x3c423c);}else{if(_0x2f7adc[0x0][_0x453d87(0x161)]=='Hindi')var _0x3c423c=users['Hindi'];else{if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x187))var _0x3c423c=users[_0x453d87(0x187)];else{if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x12c))var _0x3c423c=users[_0x453d87(0x12c)];else{if(_0x2f7adc[0x0]['language']==_0x453d87(0x13f))var _0x3c423c=users['French'];else{if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x14a))var _0x3c423c=users[_0x453d87(0x15f)];else{if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x18a))var _0x3c423c=users[_0x453d87(0x18a)];else{if(_0x2f7adc[0x0][_0x453d87(0x161)]==_0x453d87(0x15a))var _0x3c423c=users[_0x453d87(0x146)];}}}}}}}_0x2fde61[_0x453d87(0x181)](_0x453d87(0x132),{'success':_0x5cff77['flash'](_0x453d87(0x16b)),'errors':_0x5cff77[_0x453d87(0x13e)](_0x453d87(0x145)),'role':_0x289047,'profile':_0x2635c,'user':_0x487834,'master_shop':_0x2f7adc,'language':_0x3c423c});}catch(_0x6e0222){console[_0x453d87(0x18b)](_0x6e0222);}}),router['post']('/view/:id',auth,async(_0x14e9cf,_0x1f83f5)=>{const _0x61ae65=a0_0x3ee589;try{const _0x33e22a=_0x14e9cf[_0x61ae65(0x12e)]['id'],_0x1717e7=await customer[_0x61ae65(0x165)](_0x33e22a),{name:_0x976391,address:_0xed8cf1,mobile:_0x2b864d,email:_0x2323e2,receivable:_0x20c069,payable:_0x4b92a0,contactperson:_0x4ae102,landline:_0x5b13af}=_0x14e9cf[_0x61ae65(0x151)];_0x1717e7[_0x61ae65(0x16e)]=_0x976391,_0x1717e7[_0x61ae65(0x154)]=_0xed8cf1,_0x1717e7['mobile']=_0x2b864d,_0x1717e7['email']=_0x2323e2,_0x1717e7[_0x61ae65(0x17b)]=_0x20c069,_0x1717e7['payable']=_0x4b92a0,_0x1717e7['contactperson']=_0x4ae102,_0x1717e7[_0x61ae65(0x136)]=_0x5b13af;const _0xb54875=await _0x1717e7['save']();_0x14e9cf[_0x61ae65(0x13e)](_0x61ae65(0x16b),_0x61ae65(0x144)),_0x1f83f5[_0x61ae65(0x164)](_0x61ae65(0x12b));}catch(_0x3840ee){console[_0x61ae65(0x18b)](_0x3840ee);}}),router[a0_0x3ee589(0x162)](a0_0x3ee589(0x169),auth,async(_0x5028f7,_0x3ccdab)=>{const _0x1abaf7=a0_0x3ee589;try{const {username:_0x3461aa,email:_0x1800ae,role:_0x36b31c}=_0x5028f7[_0x1abaf7(0x17a)],_0x2f11f5=_0x5028f7[_0x1abaf7(0x17a)],_0x343263=await profile[_0x1abaf7(0x167)]({'email':_0x2f11f5[_0x1abaf7(0x173)]}),_0x57b703=await master_shop[_0x1abaf7(0x157)]();console[_0x1abaf7(0x18b)]('master',_0x57b703),console['log'](_0x5028f7[_0x1abaf7(0x12e)]['id']);const _0x573129=await customer[_0x1abaf7(0x167)]({'_id':_0x5028f7[_0x1abaf7(0x12e)]['id']});console[_0x1abaf7(0x18b)](_0x1abaf7(0x14b),_0x573129);const _0x47ee77=await c_payment_data['find']({'customer':_0x573129[_0x1abaf7(0x16e)]});console[_0x1abaf7(0x18b)](_0x47ee77);const _0x1a8412=await c_payment_data[_0x1abaf7(0x168)]([{'$match':{'customer':_0x573129[_0x1abaf7(0x16e)]}},{'$match':{'reason':_0x1abaf7(0x142)}},{'$group':{'_id':_0x1abaf7(0x178),'sum':{'$sum':_0x1abaf7(0x152)}}}]);console['log'](_0x1abaf7(0x183),_0x1a8412);const _0x6047c7=await c_payment_data[_0x1abaf7(0x168)]([{'$match':{'customer':_0x573129['name']}},{'$match':{'reason':_0x1abaf7(0x188)}},{'$group':{'_id':_0x1abaf7(0x178),'sum':{'$sum':_0x1abaf7(0x152)}}}]);console[_0x1abaf7(0x18b)](_0x1abaf7(0x13c),_0x6047c7);if(_0x57b703[0x0][_0x1abaf7(0x161)]==_0x1abaf7(0x17f)){var _0x58cf05=users['English'];console[_0x1abaf7(0x18b)](_0x58cf05);}else{if(_0x57b703[0x0][_0x1abaf7(0x161)]==_0x1abaf7(0x170))var _0x58cf05=users['Hindi'];else{if(_0x57b703[0x0][_0x1abaf7(0x161)]==_0x1abaf7(0x187))var _0x58cf05=users['German'];else{if(_0x57b703[0x0][_0x1abaf7(0x161)]==_0x1abaf7(0x12c))var _0x58cf05=users['Spanish'];else{if(_0x57b703[0x0][_0x1abaf7(0x161)]==_0x1abaf7(0x13f))var _0x58cf05=users[_0x1abaf7(0x13f)];else{if(_0x57b703[0x0]['language']==_0x1abaf7(0x14a))var _0x58cf05=users[_0x1abaf7(0x15f)];else{if(_0x57b703[0x0][_0x1abaf7(0x161)]=='Chinese')var _0x58cf05=users[_0x1abaf7(0x18a)];else{if(_0x57b703[0x0][_0x1abaf7(0x161)]=='Arabic\x20(ae)')var _0x58cf05=users[_0x1abaf7(0x146)];}}}}}}}_0x3ccdab[_0x1abaf7(0x181)]('customer_payment',{'success':_0x5028f7[_0x1abaf7(0x13e)](_0x1abaf7(0x16b)),'errors':_0x5028f7[_0x1abaf7(0x13e)]('errors'),'role':_0x2f11f5,'profile':_0x343263,'payment':_0x47ee77,'payable':_0x1a8412,'receivable':_0x6047c7,'master_shop':_0x57b703,'language':_0x58cf05});}catch(_0x9c598){console[_0x1abaf7(0x18b)](_0x9c598);}}),router[a0_0x3ee589(0x162)]('/products_export_migrate_file',auth,async(_0x647cb9,_0x5b2067)=>{const _0x419fc0=a0_0x3ee589;try{const _0x4e1ae5=new excelJS['Workbook'](),_0x43a1c4=_0x4e1ae5[_0x419fc0(0x140)](_0x419fc0(0x137));return _0x43a1c4[_0x419fc0(0x131)]=[{'header':'ID','key':_0x419fc0(0x189),'width':0xa},{'header':_0x419fc0(0x179),'key':'PBrands','width':0xa},{'header':_0x419fc0(0x15c),'key':_0x419fc0(0x156),'width':0xa},{'header':_0x419fc0(0x185),'key':_0x419fc0(0x185),'width':0xa},{'header':_0x419fc0(0x154),'key':_0x419fc0(0x154),'width':0xa},{'header':_0x419fc0(0x166),'key':_0x419fc0(0x166),'width':0xa},{'header':_0x419fc0(0x173),'key':'email','width':0xa}],_0x5b2067[_0x419fc0(0x177)](_0x419fc0(0x163),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5b2067['setHeader'](_0x419fc0(0x14f),_0x419fc0(0x133)),_0x4e1ae5[_0x419fc0(0x15d)][_0x419fc0(0x13d)](_0x5b2067)[_0x419fc0(0x160)](()=>{_0x5b2067['status'](0xc8);});}catch(_0x40f4be){_0x5b2067[_0x419fc0(0x18c)](0x190)[_0x419fc0(0x155)]({'errors':_0x40f4be['message']});}});const storage1=multer[a0_0x3ee589(0x12f)]({'destination':(_0x427195,_0x1e27f0,_0x152ac3)=>{const _0x212092=a0_0x3ee589;_0x152ac3(null,_0x212092(0x147));},'filename':(_0x56f393,_0xd0ea7e,_0x3594e4)=>{const _0x2d8712=a0_0x3ee589;_0x3594e4(null,Date[_0x2d8712(0x14c)]()+_0xd0ea7e[_0x2d8712(0x174)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x3ee589(0x149)](a0_0x3ee589(0x184),auth,uploadMigrate[a0_0x3ee589(0x138)]('customer_product_fule'),async(_0x32059f,_0x2c3c7b)=>{const _0x150c0d=a0_0x3ee589,_0x51daa8=_0x32059f['file'][_0x150c0d(0x172)],_0x3689f6=await xlsx['readFile']('public/Migration/'+_0x51daa8);let _0x39fe70=_0x3689f6['SheetNames'],_0x2a4b69=xlsx[_0x150c0d(0x14e)][_0x150c0d(0x135)](_0x3689f6['Sheets'][_0x39fe70[0x0]]);for(const _0x25ee02 of _0x2a4b69){const _0x239337=_0x25ee02['ID'],_0x87c76c=_0x25ee02[_0x150c0d(0x179)],_0x176106=_0x25ee02[_0x150c0d(0x15c)],_0x2cedc8=_0x25ee02[_0x150c0d(0x185)],_0x437af0=_0x25ee02[_0x150c0d(0x154)],_0xea8851=_0x25ee02[_0x150c0d(0x166)],_0x2498b0=_0x25ee02[_0x150c0d(0x173)];try{let _0x346e3c=await customer[_0x150c0d(0x167)]({'name':_0x87c76c});if(!_0x346e3c){const _0x5cc6a5=new customer({'name':_0x87c76c,'ID':_0x239337,'SalesmanCode':_0x176106,'SalesmanName':_0x2cedc8,'address':_0x437af0,'mobile':_0xea8851,'email':_0x2498b0});_0x346e3c=await _0x5cc6a5[_0x150c0d(0x143)](),_0x32059f[_0x150c0d(0x13e)]('success',_0x87c76c+'\x20added\x20successfully');}else _0x32059f[_0x150c0d(0x13e)](_0x150c0d(0x16d),_0x87c76c+'\x20Failed');}catch(_0x5e436c){_0x2c3c7b['status'](0x1f4)[_0x150c0d(0x150)]({'proderror':_0x5e436c['message'],'aproduct':ProductName});}}_0x2c3c7b[_0x150c0d(0x164)](_0x150c0d(0x12b));}),module['exports']=router;