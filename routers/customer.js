function a0_0x4771(){const _0x4a8890=['/view/payment/:id','address','Portuguese\x20(BR)','Chinese','user','Hindi','readFile','/view','name','public/Migration/','success','Arabic\x20(ae)','json','findById','\x20added\x20successfully','2014080dDiaPn','attachment;\x20filename=customer_Migration_File.xlsx','Sale\x20Return','find','Workbook','/customer_import_migrate_file','1857583JTDvjN','Arabic','customer\x20add\x20successfully','French','9UPcLpU','986920EFxCRi','Router','findOne','customer','log','17637590CYGODQ','aggregate','$amount','PBrands','xlsx','flash','../middleware/auth','36wbXMuw','errors','../models/all_models','multer','params','then','receivable','receivable_sum','/products_export_migrate_file','/view/:id','error','SalesmanName','render','PName','utils','Portuguese','customer_docs','exceljs','English\x20(US)','filename','$reason','body','message','single','English','status','landline','contactperson','post','diskStorage','c_payments','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','language','Sale','now','write','sale','74535MlOmwc','master','Customers','PUnits','Spanish','data','save','Name','payment_data','SalesmanCode','/customer/view','payable_sum','customer_payment','452615ckHDcj','sheet_to_json','map','exports','German','addWorksheet','customer\x20update\x20successfully','\x20Failed','15nSSfEC','get','customer_data','email','mobile','158906YJgvbE'];a0_0x4771=function(){return _0x4a8890;};return a0_0x4771();}function a0_0x13e4(_0x4d38c6,_0x593118){const _0x47717c=a0_0x4771();return a0_0x13e4=function(_0x13e404,_0x496ff6){_0x13e404=_0x13e404-0x153;let _0x1cf01f=_0x47717c[_0x13e404];return _0x1cf01f;},a0_0x13e4(_0x4d38c6,_0x593118);}const a0_0x2869df=a0_0x13e4;(function(_0x2ad717,_0x4cc186){const _0x4f55a5=a0_0x13e4,_0x2fdb30=_0x2ad717();while(!![]){try{const _0x1b6f83=-parseInt(_0x4f55a5(0x17a))/0x1+parseInt(_0x4f55a5(0x187))/0x2*(-parseInt(_0x4f55a5(0x182))/0x3)+parseInt(_0x4f55a5(0x1ae))/0x4*(parseInt(_0x4f55a5(0x16d))/0x5)+-parseInt(_0x4f55a5(0x197))/0x6+parseInt(_0x4f55a5(0x19d))/0x7+parseInt(_0x4f55a5(0x1a2))/0x8*(-parseInt(_0x4f55a5(0x1a1))/0x9)+parseInt(_0x4f55a5(0x1a7))/0xa;if(_0x1b6f83===_0x4cc186)break;else _0x2fdb30['push'](_0x2fdb30['shift']());}catch(_0x21524a){_0x2fdb30['push'](_0x2fdb30['shift']());}}}(a0_0x4771,0xd095e));const express=require('express'),app=express(),router=express[a0_0x2869df(0x1a3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x2869df(0x1b0)),auth=require(a0_0x2869df(0x1ad)),users=require('../public/language/languages.json'),excelJS=require(a0_0x2869df(0x159)),xlsx=require(a0_0x2869df(0x1ab)),multer=require(a0_0x2869df(0x1b1));router[a0_0x2869df(0x183)]('/view',auth,async(_0x1c1c59,_0x184d58)=>{const _0x2d1fa6=a0_0x2869df;try{const {username:_0xbcf776,email:_0x19d5a9,role:_0x3721ca}=_0x1c1c59['user'],_0x27c6f8=_0x1c1c59[_0x2d1fa6(0x18c)],_0x130095=await profile[_0x2d1fa6(0x1a4)]({'email':_0x27c6f8[_0x2d1fa6(0x185)]}),_0x4e86a6=await master_shop['find']();console[_0x2d1fa6(0x1a6)](_0x2d1fa6(0x16e),_0x4e86a6);const _0x141428=await customer['find'](),_0x4b50bc=await customer['aggregate']([{'$lookup':{'from':_0x2d1fa6(0x166),'localField':'name','foreignField':_0x2d1fa6(0x1a5),'as':_0x2d1fa6(0x158)}}]);console[_0x2d1fa6(0x1a6)](_0x4b50bc);const _0x8de054=_0x4b50bc[_0x2d1fa6(0x17c)](_0x4429b4=>{const _0x45a72b=_0x2d1fa6;console['log'](_0x45a72b(0x172),_0x4429b4);var _0x4fffe6=0x0,_0x52a193=0x0;return _0x4429b4[_0x45a72b(0x158)]['forEach'](_0x3a445b=>{const _0x3efdfb=_0x45a72b;console[_0x3efdfb(0x1a6)]('element',_0x3a445b),_0x3a445b['reason']==_0x3efdfb(0x169)?_0x4fffe6+=_0x3a445b['amount']:_0x52a193+=_0x3a445b['amount'];}),_0x4429b4[_0x45a72b(0x16c)]=parseFloat(_0x4fffe6)+0x0,_0x4429b4['sale_return']=parseFloat(_0x52a193)+0x0,_0x4429b4;});console['log'](_0x2d1fa6(0x175),_0x8de054);if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]==_0x2d1fa6(0x15a)){var _0x54f241=users['English'];console[_0x2d1fa6(0x1a6)](_0x54f241);}else{if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]=='Hindi')var _0x54f241=users[_0x2d1fa6(0x18d)];else{if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]=='German')var _0x54f241=users[_0x2d1fa6(0x17e)];else{if(_0x4e86a6[0x0]['language']==_0x2d1fa6(0x171))var _0x54f241=users[_0x2d1fa6(0x171)];else{if(_0x4e86a6[0x0]['language']==_0x2d1fa6(0x1a0))var _0x54f241=users[_0x2d1fa6(0x1a0)];else{if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]==_0x2d1fa6(0x18a))var _0x54f241=users[_0x2d1fa6(0x157)];else{if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]=='Chinese')var _0x54f241=users[_0x2d1fa6(0x18b)];else{if(_0x4e86a6[0x0][_0x2d1fa6(0x168)]==_0x2d1fa6(0x193))var _0x54f241=users[_0x2d1fa6(0x19e)];}}}}}}}_0x184d58[_0x2d1fa6(0x154)](_0x2d1fa6(0x1a5),{'success':_0x1c1c59[_0x2d1fa6(0x1ac)](_0x2d1fa6(0x192)),'errors':_0x1c1c59[_0x2d1fa6(0x1ac)]('errors'),'user':_0x141428,'role':_0x27c6f8,'profile':_0x130095,'payment':_0x8de054,'master_shop':_0x4e86a6,'language':_0x54f241});}catch(_0x311de6){console[_0x2d1fa6(0x1a6)](_0x311de6);}}),router[a0_0x2869df(0x164)](a0_0x2869df(0x18f),auth,async(_0x380318,_0x344fdf)=>{const _0x21548d=a0_0x2869df;try{const {name:_0x201046,address:_0x5f2bc5,mobile:_0x31e030,email:_0x53bec0,receivable:_0x39ba12,payable:_0x455ebe,contactperson:_0x301ffa,landline:_0x7a597}=_0x380318[_0x21548d(0x15d)],_0x109734=new customer({'name':_0x201046,'address':_0x5f2bc5,'mobile':_0x31e030,'email':_0x53bec0,'receivable':_0x39ba12,'payable':_0x455ebe,'contactperson':_0x301ffa,'landline':_0x7a597}),_0x4dd8d7=await _0x109734['save']();_0x380318[_0x21548d(0x1ac)](_0x21548d(0x192),_0x21548d(0x19f)),_0x344fdf['redirect']('/customer/view');}catch(_0x483ff3){console[_0x21548d(0x1a6)](_0x483ff3);}}),router[a0_0x2869df(0x183)](a0_0x2869df(0x1b7),auth,async(_0x112fdb,_0x4e2a2e)=>{const _0x20fb8c=a0_0x2869df;try{const {username:_0x46c0ac,email:_0x2ed2d2,role:_0x564dca}=_0x112fdb[_0x20fb8c(0x18c)],_0x28afb2=_0x112fdb[_0x20fb8c(0x18c)],_0x2bb814=await profile[_0x20fb8c(0x1a4)]({'email':_0x28afb2[_0x20fb8c(0x185)]}),_0x109d8e=await master_shop['find']();console[_0x20fb8c(0x1a6)](_0x20fb8c(0x16e),_0x109d8e);const _0x5989f1=_0x112fdb[_0x20fb8c(0x1b2)]['id'],_0x2435d4=await customer[_0x20fb8c(0x195)](_0x5989f1);if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x15a)){var _0x57f199=users['English'];console['log'](_0x57f199);}else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x18d))var _0x57f199=users[_0x20fb8c(0x18d)];else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x17e))var _0x57f199=users['German'];else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x171))var _0x57f199=users[_0x20fb8c(0x171)];else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]=='French')var _0x57f199=users['French'];else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x18a))var _0x57f199=users[_0x20fb8c(0x157)];else{if(_0x109d8e[0x0][_0x20fb8c(0x168)]==_0x20fb8c(0x18b))var _0x57f199=users['Chinese'];else{if(_0x109d8e[0x0]['language']=='Arabic\x20(ae)')var _0x57f199=users['Arabic'];}}}}}}}_0x4e2a2e[_0x20fb8c(0x154)]('customer',{'success':_0x112fdb[_0x20fb8c(0x1ac)](_0x20fb8c(0x192)),'errors':_0x112fdb[_0x20fb8c(0x1ac)]('errors'),'role':_0x28afb2,'profile':_0x2bb814,'user':_0x2435d4,'master_shop':_0x109d8e,'language':_0x57f199});}catch(_0xe6134){console['log'](_0xe6134);}}),router['post'](a0_0x2869df(0x1b7),auth,async(_0x297307,_0x1e11e5)=>{const _0x13ebf2=a0_0x2869df;try{const _0x2ba9e0=_0x297307[_0x13ebf2(0x1b2)]['id'],_0x314d14=await customer['findById'](_0x2ba9e0),{name:_0x3c7ab9,address:_0xb87977,mobile:_0xfb7fb5,email:_0x1062d6,receivable:_0x16c790,payable:_0x3a70e2,contactperson:_0x3f84e4,landline:_0x23c4cd}=_0x297307[_0x13ebf2(0x15d)];_0x314d14['name']=_0x3c7ab9,_0x314d14[_0x13ebf2(0x189)]=_0xb87977,_0x314d14[_0x13ebf2(0x186)]=_0xfb7fb5,_0x314d14[_0x13ebf2(0x185)]=_0x1062d6,_0x314d14[_0x13ebf2(0x1b4)]=_0x16c790,_0x314d14['payable']=_0x3a70e2,_0x314d14[_0x13ebf2(0x163)]=_0x3f84e4,_0x314d14[_0x13ebf2(0x162)]=_0x23c4cd;const _0x3b0db8=await _0x314d14[_0x13ebf2(0x173)]();_0x297307['flash']('success',_0x13ebf2(0x180)),_0x1e11e5['redirect']('/customer/view');}catch(_0x49e875){console[_0x13ebf2(0x1a6)](_0x49e875);}}),router[a0_0x2869df(0x183)](a0_0x2869df(0x188),auth,async(_0x32adba,_0x374e35)=>{const _0x5625d6=a0_0x2869df;try{const {username:_0x4be18c,email:_0x53e980,role:_0x43af04}=_0x32adba['user'],_0x44932d=_0x32adba[_0x5625d6(0x18c)],_0x162fe4=await profile[_0x5625d6(0x1a4)]({'email':_0x44932d[_0x5625d6(0x185)]}),_0x2b0cd7=await master_shop[_0x5625d6(0x19a)]();console[_0x5625d6(0x1a6)](_0x5625d6(0x16e),_0x2b0cd7),console[_0x5625d6(0x1a6)](_0x32adba[_0x5625d6(0x1b2)]['id']);const _0x2fbec9=await customer[_0x5625d6(0x1a4)]({'_id':_0x32adba[_0x5625d6(0x1b2)]['id']});console['log'](_0x5625d6(0x184),_0x2fbec9);const _0x227ccf=await c_payment_data[_0x5625d6(0x19a)]({'customer':_0x2fbec9[_0x5625d6(0x190)]});console[_0x5625d6(0x1a6)](_0x227ccf);const _0x3e59c7=await c_payment_data[_0x5625d6(0x1a8)]([{'$match':{'customer':_0x2fbec9[_0x5625d6(0x190)]}},{'$match':{'reason':_0x5625d6(0x169)}},{'$group':{'_id':_0x5625d6(0x15c),'sum':{'$sum':'$amount'}}}]);console[_0x5625d6(0x1a6)](_0x5625d6(0x178),_0x3e59c7);const _0x116953=await c_payment_data[_0x5625d6(0x1a8)]([{'$match':{'customer':_0x2fbec9[_0x5625d6(0x190)]}},{'$match':{'reason':_0x5625d6(0x199)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x5625d6(0x1a9)}}}]);console['log'](_0x5625d6(0x1b5),_0x116953);if(_0x2b0cd7[0x0][_0x5625d6(0x168)]=='English\x20(US)'){var _0x1b5739=users[_0x5625d6(0x160)];console[_0x5625d6(0x1a6)](_0x1b5739);}else{if(_0x2b0cd7[0x0]['language']=='Hindi')var _0x1b5739=users[_0x5625d6(0x18d)];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x17e))var _0x1b5739=users[_0x5625d6(0x17e)];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x171))var _0x1b5739=users[_0x5625d6(0x171)];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x1a0))var _0x1b5739=users['French'];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x18a))var _0x1b5739=users[_0x5625d6(0x157)];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x18b))var _0x1b5739=users[_0x5625d6(0x18b)];else{if(_0x2b0cd7[0x0][_0x5625d6(0x168)]==_0x5625d6(0x193))var _0x1b5739=users[_0x5625d6(0x19e)];}}}}}}}_0x374e35[_0x5625d6(0x154)](_0x5625d6(0x179),{'success':_0x32adba[_0x5625d6(0x1ac)](_0x5625d6(0x192)),'errors':_0x32adba['flash'](_0x5625d6(0x1af)),'role':_0x44932d,'profile':_0x162fe4,'payment':_0x227ccf,'payable':_0x3e59c7,'receivable':_0x116953,'master_shop':_0x2b0cd7,'language':_0x1b5739});}catch(_0x233ac4){console['log'](_0x233ac4);}}),router['get'](a0_0x2869df(0x1b6),auth,async(_0x228ffd,_0xaf92fd)=>{const _0x3c816f=a0_0x2869df;try{const _0x3e2e62=new excelJS[(_0x3c816f(0x19b))](),_0x4fa656=_0x3e2e62[_0x3c816f(0x17f)](_0x3c816f(0x16f));return _0x4fa656['columns']=[{'header':'ID','key':_0x3c816f(0x155),'width':0xa},{'header':_0x3c816f(0x174),'key':_0x3c816f(0x1aa),'width':0xa},{'header':_0x3c816f(0x176),'key':_0x3c816f(0x170),'width':0xa},{'header':_0x3c816f(0x153),'key':_0x3c816f(0x153),'width':0xa},{'header':_0x3c816f(0x189),'key':_0x3c816f(0x189),'width':0xa},{'header':_0x3c816f(0x186),'key':_0x3c816f(0x186),'width':0xa},{'header':_0x3c816f(0x185),'key':'email','width':0xa}],_0xaf92fd['setHeader']('Content-Type',_0x3c816f(0x167)),_0xaf92fd['setHeader']('Content-Disposition',_0x3c816f(0x198)),_0x3e2e62[_0x3c816f(0x1ab)][_0x3c816f(0x16b)](_0xaf92fd)[_0x3c816f(0x1b3)](()=>{const _0x4f9cd9=_0x3c816f;_0xaf92fd[_0x4f9cd9(0x161)](0xc8);});}catch(_0x2a60d9){_0xaf92fd[_0x3c816f(0x161)](0x190)['send']({'errors':_0x2a60d9[_0x3c816f(0x15e)]});}});const storage1=multer[a0_0x2869df(0x165)]({'destination':(_0x11800f,_0x2909af,_0x7bcb20)=>{_0x7bcb20(null,'public/Migration');},'filename':(_0x501048,_0x1869b5,_0x10b508)=>{const _0x27ca67=a0_0x2869df;_0x10b508(null,Date[_0x27ca67(0x16a)]()+_0x1869b5['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x2869df(0x164)](a0_0x2869df(0x19c),auth,uploadMigrate[a0_0x2869df(0x15f)]('customer_product_fule'),async(_0x5c1834,_0x2c2bd3)=>{const _0x2b0eeb=a0_0x2869df,_0x1598a7=_0x5c1834['file'][_0x2b0eeb(0x15b)],_0x1f1492=await xlsx[_0x2b0eeb(0x18e)](_0x2b0eeb(0x191)+_0x1598a7);let _0x338f38=_0x1f1492['SheetNames'],_0x387cbb=xlsx[_0x2b0eeb(0x156)][_0x2b0eeb(0x17b)](_0x1f1492['Sheets'][_0x338f38[0x0]]);for(const _0xceeb9a of _0x387cbb){const _0x567328=_0xceeb9a['ID'],_0xdd9aa=_0xceeb9a[_0x2b0eeb(0x174)],_0x3521c0=_0xceeb9a['SalesmanCode'],_0x5e338e=_0xceeb9a[_0x2b0eeb(0x153)],_0x24032d=_0xceeb9a[_0x2b0eeb(0x189)],_0x1fa015=_0xceeb9a[_0x2b0eeb(0x186)],_0x4c0b58=_0xceeb9a[_0x2b0eeb(0x185)];try{let _0x5bdd76=await customer[_0x2b0eeb(0x1a4)]({'name':_0xdd9aa});if(!_0x5bdd76){const _0x2fb9a5=new customer({'name':_0xdd9aa,'ID':_0x567328,'SalesmanCode':_0x3521c0,'SalesmanName':_0x5e338e,'address':_0x24032d,'mobile':_0x1fa015,'email':_0x4c0b58});_0x5bdd76=await _0x2fb9a5['save'](),_0x5c1834[_0x2b0eeb(0x1ac)](_0x2b0eeb(0x192),_0xdd9aa+_0x2b0eeb(0x196));}else _0x5c1834['flash'](_0x2b0eeb(0x1b8),_0xdd9aa+_0x2b0eeb(0x181));}catch(_0x173d20){_0x2c2bd3['status'](0x1f4)[_0x2b0eeb(0x194)]({'proderror':_0x173d20[_0x2b0eeb(0x15e)],'aproduct':ProductName});}}_0x2c2bd3['redirect'](_0x2b0eeb(0x177));}),module[a0_0x2869df(0x17d)]=router;