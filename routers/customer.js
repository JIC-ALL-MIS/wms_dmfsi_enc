function a0_0x5a2c(){const _0x5be8a3=['originalname','public/Migration','customer\x20update\x20successfully','510829vECZqz','Chinese','redirect','Spanish','../models/all_models','now','params','French','customer_docs','addWorksheet','Content-Disposition','aggregate','filename','save','user','341156YkAaWQ','3078250brZBQx','status','12394140qJtLyg','send','Portuguese\x20(BR)','amount','mobile','receivable_sum','element','attachment;\x20filename=customer_Migration_File.xlsx','message','$reason','Sale','findOne','flash','master','forEach','English\x20(US)','single','multer','Portuguese','map','39600ZQHegW','log','532UvJESu','name','sale_return','customer_product_fule','receivable','Arabic\x20(ae)','Content-Type','payable','c_payments','payable_sum','express','English','German','Router','Name','../middleware/auth','sale','/view/:id','customer','utils','post','get','render','success','address','write','$amount','Arabic','find','columns','SalesmanCode','findById','3160qnjjSE','body','public/Migration/','SheetNames','data','diskStorage','../public/language/languages.json','SalesmanName','\x20added\x20successfully','landline','contactperson','Hindi','/customer/view','/products_export_migrate_file','Workbook','then','51dBEpIs','10404fOZGlc','file','90408eopkgJ','language','error','setHeader','readFile','errors','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','email','PUnits','customer_payment'];a0_0x5a2c=function(){return _0x5be8a3;};return a0_0x5a2c();}function a0_0x5308(_0x178dda,_0x59eebc){const _0x5a2c90=a0_0x5a2c();return a0_0x5308=function(_0x530811,_0x18240c){_0x530811=_0x530811-0x199;let _0x4b0d83=_0x5a2c90[_0x530811];return _0x4b0d83;},a0_0x5308(_0x178dda,_0x59eebc);}const a0_0x260ce1=a0_0x5308;(function(_0x451002,_0x2d704a){const _0x33ab52=a0_0x5308,_0x3b61c7=_0x451002();while(!![]){try{const _0x59d250=parseInt(_0x33ab52(0x1cc))/0x1+-parseInt(_0x33ab52(0x1db))/0x2+-parseInt(_0x33ab52(0x1bc))/0x3*(-parseInt(_0x33ab52(0x1bf))/0x4)+-parseInt(_0x33ab52(0x1dc))/0x5+parseInt(_0x33ab52(0x1f2))/0x6*(-parseInt(_0x33ab52(0x1f4))/0x7)+parseInt(_0x33ab52(0x1ac))/0x8*(-parseInt(_0x33ab52(0x1bd))/0x9)+parseInt(_0x33ab52(0x1de))/0xa;if(_0x59d250===_0x2d704a)break;else _0x3b61c7['push'](_0x3b61c7['shift']());}catch(_0x24d65a){_0x3b61c7['push'](_0x3b61c7['shift']());}}}(a0_0x5a2c,0x5f38d));const express=require(a0_0x260ce1(0x1fe)),app=express(),router=express[a0_0x260ce1(0x199)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x260ce1(0x1d0)),auth=require(a0_0x260ce1(0x19b)),users=require(a0_0x260ce1(0x1b2)),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x260ce1(0x1ef));router[a0_0x260ce1(0x1a1)]('/view',auth,async(_0x451488,_0x1cbbdd)=>{const _0x50b0dd=a0_0x260ce1;try{const {username:_0x180eaa,email:_0x3c58eb,role:_0x127801}=_0x451488['user'],_0x3dcac9=_0x451488[_0x50b0dd(0x1da)],_0x554c05=await profile[_0x50b0dd(0x1e9)]({'email':_0x3dcac9[_0x50b0dd(0x1c6)]}),_0x1d292a=await master_shop[_0x50b0dd(0x1a8)]();console['log'](_0x50b0dd(0x1eb),_0x1d292a);const _0x3a0d64=await customer[_0x50b0dd(0x1a8)](),_0x161e95=await customer[_0x50b0dd(0x1d7)]([{'$lookup':{'from':_0x50b0dd(0x1fc),'localField':'name','foreignField':_0x50b0dd(0x19e),'as':_0x50b0dd(0x1d4)}}]);console['log'](_0x161e95);const _0x454006=_0x161e95[_0x50b0dd(0x1f1)](_0x1d39fa=>{const _0x15fd10=_0x50b0dd;console['log'](_0x15fd10(0x1b0),_0x1d39fa);var _0x9a1821=0x0,_0x47a421=0x0;return _0x1d39fa[_0x15fd10(0x1d4)][_0x15fd10(0x1ec)](_0x166472=>{const _0x15b71c=_0x15fd10;console[_0x15b71c(0x1f3)](_0x15b71c(0x1e4),_0x166472),_0x166472['reason']==_0x15b71c(0x1e8)?_0x9a1821+=_0x166472[_0x15b71c(0x1e1)]:_0x47a421+=_0x166472[_0x15b71c(0x1e1)];}),_0x1d39fa[_0x15fd10(0x19c)]=parseFloat(_0x9a1821)+0x0,_0x1d39fa[_0x15fd10(0x1f6)]=parseFloat(_0x47a421)+0x0,_0x1d39fa;});console[_0x50b0dd(0x1f3)]('payment_data',_0x454006);if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]==_0x50b0dd(0x1ed)){var _0x2b8d2d=users[_0x50b0dd(0x1ff)];console[_0x50b0dd(0x1f3)](_0x2b8d2d);}else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]=='Hindi')var _0x2b8d2d=users[_0x50b0dd(0x1b7)];else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]=='German')var _0x2b8d2d=users[_0x50b0dd(0x200)];else{if(_0x1d292a[0x0]['language']==_0x50b0dd(0x1cf))var _0x2b8d2d=users[_0x50b0dd(0x1cf)];else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]==_0x50b0dd(0x1d3))var _0x2b8d2d=users[_0x50b0dd(0x1d3)];else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]=='Portuguese\x20(BR)')var _0x2b8d2d=users[_0x50b0dd(0x1f0)];else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]==_0x50b0dd(0x1cd))var _0x2b8d2d=users[_0x50b0dd(0x1cd)];else{if(_0x1d292a[0x0][_0x50b0dd(0x1c0)]==_0x50b0dd(0x1f9))var _0x2b8d2d=users[_0x50b0dd(0x1a7)];}}}}}}}_0x1cbbdd[_0x50b0dd(0x1a2)](_0x50b0dd(0x19e),{'success':_0x451488[_0x50b0dd(0x1ea)]('success'),'errors':_0x451488[_0x50b0dd(0x1ea)]('errors'),'user':_0x3a0d64,'role':_0x3dcac9,'profile':_0x554c05,'payment':_0x454006,'master_shop':_0x1d292a,'language':_0x2b8d2d});}catch(_0x3ae120){console['log'](_0x3ae120);}}),router[a0_0x260ce1(0x1a0)]('/view',auth,async(_0x45149e,_0x4e364a)=>{const _0x2a38d9=a0_0x260ce1;try{const {name:_0x190dd8,address:_0x37bd4f,mobile:_0x1266dc,email:_0x50ede5,receivable:_0x155b89,payable:_0x3d1b53,contactperson:_0x60eeb,landline:_0x3aa3d1}=_0x45149e[_0x2a38d9(0x1ad)],_0x5a8a1d=new customer({'name':_0x190dd8,'address':_0x37bd4f,'mobile':_0x1266dc,'email':_0x50ede5,'receivable':_0x155b89,'payable':_0x3d1b53,'contactperson':_0x60eeb,'landline':_0x3aa3d1}),_0x450369=await _0x5a8a1d['save']();_0x45149e[_0x2a38d9(0x1ea)](_0x2a38d9(0x1a3),'customer\x20add\x20successfully'),_0x4e364a[_0x2a38d9(0x1ce)]('/customer/view');}catch(_0x3b6fd6){console[_0x2a38d9(0x1f3)](_0x3b6fd6);}}),router[a0_0x260ce1(0x1a1)](a0_0x260ce1(0x19d),auth,async(_0x1df225,_0x3e6c76)=>{const _0x55221e=a0_0x260ce1;try{const {username:_0x5f4852,email:_0x40658b,role:_0x21c6cd}=_0x1df225[_0x55221e(0x1da)],_0x2cf3bf=_0x1df225[_0x55221e(0x1da)],_0x240699=await profile['findOne']({'email':_0x2cf3bf[_0x55221e(0x1c6)]}),_0x38c71d=await master_shop['find']();console[_0x55221e(0x1f3)]('master',_0x38c71d);const _0x258a07=_0x1df225['params']['id'],_0x57ad3b=await customer[_0x55221e(0x1ab)](_0x258a07);if(_0x38c71d[0x0][_0x55221e(0x1c0)]==_0x55221e(0x1ed)){var _0x223ab3=users['English'];console[_0x55221e(0x1f3)](_0x223ab3);}else{if(_0x38c71d[0x0][_0x55221e(0x1c0)]==_0x55221e(0x1b7))var _0x223ab3=users['Hindi'];else{if(_0x38c71d[0x0]['language']==_0x55221e(0x200))var _0x223ab3=users[_0x55221e(0x200)];else{if(_0x38c71d[0x0][_0x55221e(0x1c0)]==_0x55221e(0x1cf))var _0x223ab3=users[_0x55221e(0x1cf)];else{if(_0x38c71d[0x0][_0x55221e(0x1c0)]=='French')var _0x223ab3=users[_0x55221e(0x1d3)];else{if(_0x38c71d[0x0]['language']=='Portuguese\x20(BR)')var _0x223ab3=users[_0x55221e(0x1f0)];else{if(_0x38c71d[0x0][_0x55221e(0x1c0)]==_0x55221e(0x1cd))var _0x223ab3=users[_0x55221e(0x1cd)];else{if(_0x38c71d[0x0][_0x55221e(0x1c0)]==_0x55221e(0x1f9))var _0x223ab3=users[_0x55221e(0x1a7)];}}}}}}}_0x3e6c76['render'](_0x55221e(0x19e),{'success':_0x1df225['flash'](_0x55221e(0x1a3)),'errors':_0x1df225[_0x55221e(0x1ea)](_0x55221e(0x1c4)),'role':_0x2cf3bf,'profile':_0x240699,'user':_0x57ad3b,'master_shop':_0x38c71d,'language':_0x223ab3});}catch(_0x3068df){console[_0x55221e(0x1f3)](_0x3068df);}}),router[a0_0x260ce1(0x1a0)](a0_0x260ce1(0x19d),auth,async(_0x455ca1,_0x41f0fd)=>{const _0x57225f=a0_0x260ce1;try{const _0x37eb78=_0x455ca1[_0x57225f(0x1d2)]['id'],_0x2ddf98=await customer[_0x57225f(0x1ab)](_0x37eb78),{name:_0x3ae80a,address:_0x424865,mobile:_0x522d04,email:_0x48bcc2,receivable:_0x98843b,payable:_0xac9741,contactperson:_0x1acc8c,landline:_0x1647cb}=_0x455ca1[_0x57225f(0x1ad)];_0x2ddf98[_0x57225f(0x1f5)]=_0x3ae80a,_0x2ddf98[_0x57225f(0x1a4)]=_0x424865,_0x2ddf98['mobile']=_0x522d04,_0x2ddf98[_0x57225f(0x1c6)]=_0x48bcc2,_0x2ddf98[_0x57225f(0x1f8)]=_0x98843b,_0x2ddf98[_0x57225f(0x1fb)]=_0xac9741,_0x2ddf98[_0x57225f(0x1b6)]=_0x1acc8c,_0x2ddf98[_0x57225f(0x1b5)]=_0x1647cb;const _0x501cd9=await _0x2ddf98[_0x57225f(0x1d9)]();_0x455ca1[_0x57225f(0x1ea)](_0x57225f(0x1a3),_0x57225f(0x1cb)),_0x41f0fd['redirect']('/customer/view');}catch(_0x30ed49){console['log'](_0x30ed49);}}),router[a0_0x260ce1(0x1a1)]('/view/payment/:id',auth,async(_0x27083f,_0x4755b5)=>{const _0x15bfad=a0_0x260ce1;try{const {username:_0x116a63,email:_0x376072,role:_0x241943}=_0x27083f['user'],_0x4ce594=_0x27083f['user'],_0x8c402a=await profile[_0x15bfad(0x1e9)]({'email':_0x4ce594[_0x15bfad(0x1c6)]}),_0x2896ab=await master_shop[_0x15bfad(0x1a8)]();console[_0x15bfad(0x1f3)](_0x15bfad(0x1eb),_0x2896ab),console[_0x15bfad(0x1f3)](_0x27083f['params']['id']);const _0x357897=await customer[_0x15bfad(0x1e9)]({'_id':_0x27083f[_0x15bfad(0x1d2)]['id']});console[_0x15bfad(0x1f3)]('customer_data',_0x357897);const _0x551d56=await c_payment_data[_0x15bfad(0x1a8)]({'customer':_0x357897['name']});console[_0x15bfad(0x1f3)](_0x551d56);const _0x5a133d=await c_payment_data[_0x15bfad(0x1d7)]([{'$match':{'customer':_0x357897[_0x15bfad(0x1f5)]}},{'$match':{'reason':_0x15bfad(0x1e8)}},{'$group':{'_id':_0x15bfad(0x1e7),'sum':{'$sum':_0x15bfad(0x1a6)}}}]);console[_0x15bfad(0x1f3)](_0x15bfad(0x1fd),_0x5a133d);const _0x3eb33f=await c_payment_data[_0x15bfad(0x1d7)]([{'$match':{'customer':_0x357897[_0x15bfad(0x1f5)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':_0x15bfad(0x1e7),'sum':{'$sum':_0x15bfad(0x1a6)}}}]);console[_0x15bfad(0x1f3)](_0x15bfad(0x1e3),_0x3eb33f);if(_0x2896ab[0x0][_0x15bfad(0x1c0)]==_0x15bfad(0x1ed)){var _0x34fe2d=users['English'];console[_0x15bfad(0x1f3)](_0x34fe2d);}else{if(_0x2896ab[0x0]['language']==_0x15bfad(0x1b7))var _0x34fe2d=users['Hindi'];else{if(_0x2896ab[0x0][_0x15bfad(0x1c0)]=='German')var _0x34fe2d=users[_0x15bfad(0x200)];else{if(_0x2896ab[0x0]['language']==_0x15bfad(0x1cf))var _0x34fe2d=users[_0x15bfad(0x1cf)];else{if(_0x2896ab[0x0][_0x15bfad(0x1c0)]==_0x15bfad(0x1d3))var _0x34fe2d=users[_0x15bfad(0x1d3)];else{if(_0x2896ab[0x0][_0x15bfad(0x1c0)]==_0x15bfad(0x1e0))var _0x34fe2d=users['Portuguese'];else{if(_0x2896ab[0x0][_0x15bfad(0x1c0)]==_0x15bfad(0x1cd))var _0x34fe2d=users[_0x15bfad(0x1cd)];else{if(_0x2896ab[0x0]['language']=='Arabic\x20(ae)')var _0x34fe2d=users[_0x15bfad(0x1a7)];}}}}}}}_0x4755b5['render'](_0x15bfad(0x1c8),{'success':_0x27083f[_0x15bfad(0x1ea)](_0x15bfad(0x1a3)),'errors':_0x27083f[_0x15bfad(0x1ea)](_0x15bfad(0x1c4)),'role':_0x4ce594,'profile':_0x8c402a,'payment':_0x551d56,'payable':_0x5a133d,'receivable':_0x3eb33f,'master_shop':_0x2896ab,'language':_0x34fe2d});}catch(_0x38114f){console[_0x15bfad(0x1f3)](_0x38114f);}}),router[a0_0x260ce1(0x1a1)](a0_0x260ce1(0x1b9),auth,async(_0x16b498,_0x44c1bd)=>{const _0x16b39b=a0_0x260ce1;try{const _0x12a656=new excelJS[(_0x16b39b(0x1ba))](),_0x11f32f=_0x12a656[_0x16b39b(0x1d5)]('Customers');return _0x11f32f[_0x16b39b(0x1a9)]=[{'header':'ID','key':'PName','width':0xa},{'header':_0x16b39b(0x19a),'key':'PBrands','width':0xa},{'header':_0x16b39b(0x1aa),'key':_0x16b39b(0x1c7),'width':0xa},{'header':'SalesmanName','key':'SalesmanName','width':0xa},{'header':_0x16b39b(0x1a4),'key':_0x16b39b(0x1a4),'width':0xa},{'header':_0x16b39b(0x1e2),'key':_0x16b39b(0x1e2),'width':0xa},{'header':_0x16b39b(0x1c6),'key':_0x16b39b(0x1c6),'width':0xa}],_0x44c1bd[_0x16b39b(0x1c2)](_0x16b39b(0x1fa),_0x16b39b(0x1c5)),_0x44c1bd['setHeader'](_0x16b39b(0x1d6),_0x16b39b(0x1e5)),_0x12a656['xlsx'][_0x16b39b(0x1a5)](_0x44c1bd)[_0x16b39b(0x1bb)](()=>{_0x44c1bd['status'](0xc8);});}catch(_0x26380f){_0x44c1bd[_0x16b39b(0x1dd)](0x190)[_0x16b39b(0x1df)]({'errors':_0x26380f[_0x16b39b(0x1e6)]});}});const storage1=multer[a0_0x260ce1(0x1b1)]({'destination':(_0x9101b0,_0x4daf53,_0x41c736)=>{const _0x475eb3=a0_0x260ce1;_0x41c736(null,_0x475eb3(0x1ca));},'filename':(_0x1564d1,_0x2693c3,_0x1adc1d)=>{const _0x401f16=a0_0x260ce1;_0x1adc1d(null,Date[_0x401f16(0x1d1)]()+_0x2693c3[_0x401f16(0x1c9)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x260ce1(0x1a0)]('/customer_import_migrate_file',auth,uploadMigrate[a0_0x260ce1(0x1ee)](a0_0x260ce1(0x1f7)),async(_0x37eafe,_0x3dd45e)=>{const _0x57a4eb=a0_0x260ce1,_0x26c26f=_0x37eafe[_0x57a4eb(0x1be)][_0x57a4eb(0x1d8)],_0x523204=await xlsx[_0x57a4eb(0x1c3)](_0x57a4eb(0x1ae)+_0x26c26f);let _0x982aa0=_0x523204[_0x57a4eb(0x1af)],_0x1e5cb9=xlsx[_0x57a4eb(0x19f)]['sheet_to_json'](_0x523204['Sheets'][_0x982aa0[0x0]]);for(const _0x3daccd of _0x1e5cb9){const _0x288f6d=_0x3daccd['ID'],_0x3e1ff6=_0x3daccd[_0x57a4eb(0x19a)],_0x411e1b=_0x3daccd[_0x57a4eb(0x1aa)],_0x226e76=_0x3daccd[_0x57a4eb(0x1b3)],_0x56bce0=_0x3daccd['address'],_0x1377b4=_0x3daccd['mobile'],_0x4654b1=_0x3daccd[_0x57a4eb(0x1c6)];try{let _0x19645d=await customer['findOne']({'name':_0x3e1ff6});if(!_0x19645d){const _0x4dc322=new customer({'name':_0x3e1ff6,'ID':_0x288f6d,'SalesmanCode':_0x411e1b,'SalesmanName':_0x226e76,'address':_0x56bce0,'mobile':_0x1377b4,'email':_0x4654b1});_0x19645d=await _0x4dc322[_0x57a4eb(0x1d9)](),_0x37eafe['flash'](_0x57a4eb(0x1a3),_0x3e1ff6+_0x57a4eb(0x1b4));}else _0x37eafe[_0x57a4eb(0x1ea)](_0x57a4eb(0x1c1),_0x3e1ff6+'\x20Failed');}catch(_0x137cd4){_0x3dd45e[_0x57a4eb(0x1dd)](0x1f4)['json']({'proderror':_0x137cd4[_0x57a4eb(0x1e6)],'aproduct':ProductName});}}_0x3dd45e[_0x57a4eb(0x1ce)](_0x57a4eb(0x1b8));}),module['exports']=router;