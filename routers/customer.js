function a0_0x5cb3(){const _0x52aa55=['PUnits','German','Content-Type','message','sale_return','/view/payment/:id','flash','939000qwIRAb','mobile','log','aggregate','English\x20(US)','/products_export_migrate_file','payable_sum','4906650xTkdJw','utils','Sale\x20Return','express','contactperson','write','findById','../middleware/auth','element','SalesmanCode','21UHDVzJ','English','amount','status','file','now','Sale','customer_payment','2189dLSnJi','params','102966fcwTnR','/customer/view','address','Router','find','addWorksheet','body','user','public/Migration/','Chinese','customer_data','payment_data','Portuguese','data','columns','Portuguese\x20(BR)','diskStorage','SalesmanName','customer\x20add\x20successfully','forEach','receivable','setHeader','error','sale','$amount','Arabic','then','xlsx','Spanish','Content-Disposition','Name','attachment;\x20filename=customer_Migration_File.xlsx','81675hsMhSL','reason','map','PBrands','customer','../public/language/languages.json','279HLiZHG','Arabic\x20(ae)','originalname','960qOKKhH','render','120160EUBdZp','\x20Failed','French','SheetNames','landline','email','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/view/:id','redirect','name','customer_docs','errors','language','public/Migration','findOne','sheet_to_json','Hindi','$reason','8TjMiGm','post','customer_product_fule','get','/customer_import_migrate_file','master','exceljs','success','../models/all_models','save','readFile','multer','19984HemBtZ','/view'];a0_0x5cb3=function(){return _0x52aa55;};return a0_0x5cb3();}const a0_0x1cf3f2=a0_0x4dd0;(function(_0x5cb448,_0x219e5c){const _0x56306d=a0_0x4dd0,_0x455e31=_0x5cb448();while(!![]){try{const _0x3f88ad=-parseInt(_0x56306d(0xfd))/0x1*(-parseInt(_0x56306d(0x150))/0x2)+-parseInt(_0x56306d(0x107))/0x3*(-parseInt(_0x56306d(0x144))/0x4)+-parseInt(_0x56306d(0x127))/0x5+-parseInt(_0x56306d(0x159))/0x6+parseInt(_0x56306d(0xf3))/0x7+-parseInt(_0x56306d(0x132))/0x8*(parseInt(_0x56306d(0x12d))/0x9)+parseInt(_0x56306d(0x130))/0xa*(parseInt(_0x56306d(0x105))/0xb);if(_0x3f88ad===_0x219e5c)break;else _0x455e31['push'](_0x455e31['shift']());}catch(_0x3e0e5e){_0x455e31['push'](_0x455e31['shift']());}}}(a0_0x5cb3,0x57e8b));const express=require(a0_0x1cf3f2(0xf6)),app=express(),router=express[a0_0x1cf3f2(0x10a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x1cf3f2(0x14c)),auth=require(a0_0x1cf3f2(0xfa)),users=require(a0_0x1cf3f2(0x12c)),excelJS=require(a0_0x1cf3f2(0x14a)),xlsx=require(a0_0x1cf3f2(0x122)),multer=require(a0_0x1cf3f2(0x14f));function a0_0x4dd0(_0x3c2782,_0x1f7784){const _0x5cb31c=a0_0x5cb3();return a0_0x4dd0=function(_0x4dd0f4,_0x1ac49e){_0x4dd0f4=_0x4dd0f4-0xf2;let _0x193084=_0x5cb31c[_0x4dd0f4];return _0x193084;},a0_0x4dd0(_0x3c2782,_0x1f7784);}router[a0_0x1cf3f2(0x147)](a0_0x1cf3f2(0x151),auth,async(_0x6ae7d4,_0x1fadc1)=>{const _0x1118f5=a0_0x1cf3f2;try{const {username:_0x3e67e1,email:_0xd22e3e,role:_0x5f44c2}=_0x6ae7d4[_0x1118f5(0x10e)],_0x2793d1=_0x6ae7d4[_0x1118f5(0x10e)],_0x384294=await profile['findOne']({'email':_0x2793d1[_0x1118f5(0x137)]}),_0xa2d9aa=await master_shop['find']();console[_0x1118f5(0x15b)](_0x1118f5(0x149),_0xa2d9aa);const _0x5528a8=await customer[_0x1118f5(0x10b)](),_0x371f59=await customer[_0x1118f5(0x15c)]([{'$lookup':{'from':'c_payments','localField':_0x1118f5(0x13b),'foreignField':'customer','as':_0x1118f5(0x13c)}}]);console[_0x1118f5(0x15b)](_0x371f59);const _0x17b815=_0x371f59[_0x1118f5(0x129)](_0x25f5da=>{const _0x28efce=_0x1118f5;console[_0x28efce(0x15b)](_0x28efce(0x114),_0x25f5da);var _0x41f5c1=0x0,_0xcb6a6d=0x0;return _0x25f5da[_0x28efce(0x13c)][_0x28efce(0x11a)](_0xad1208=>{const _0x27726b=_0x28efce;console[_0x27726b(0x15b)](_0x27726b(0xfb),_0xad1208),_0xad1208[_0x27726b(0x128)]=='Sale'?_0x41f5c1+=_0xad1208[_0x27726b(0xff)]:_0xcb6a6d+=_0xad1208[_0x27726b(0xff)];}),_0x25f5da[_0x28efce(0x11e)]=parseFloat(_0x41f5c1)+0x0,_0x25f5da[_0x28efce(0x156)]=parseFloat(_0xcb6a6d)+0x0,_0x25f5da;});console[_0x1118f5(0x15b)](_0x1118f5(0x112),_0x17b815);if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]==_0x1118f5(0x15d)){var _0x250f6c=users[_0x1118f5(0xfe)];console[_0x1118f5(0x15b)](_0x250f6c);}else{if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]==_0x1118f5(0x142))var _0x250f6c=users[_0x1118f5(0x142)];else{if(_0xa2d9aa[0x0]['language']==_0x1118f5(0x153))var _0x250f6c=users[_0x1118f5(0x153)];else{if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]==_0x1118f5(0x123))var _0x250f6c=users['Spanish'];else{if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]=='French')var _0x250f6c=users[_0x1118f5(0x134)];else{if(_0xa2d9aa[0x0]['language']=='Portuguese\x20(BR)')var _0x250f6c=users[_0x1118f5(0x113)];else{if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]==_0x1118f5(0x110))var _0x250f6c=users[_0x1118f5(0x110)];else{if(_0xa2d9aa[0x0][_0x1118f5(0x13e)]==_0x1118f5(0x12e))var _0x250f6c=users[_0x1118f5(0x120)];}}}}}}}_0x1fadc1['render'](_0x1118f5(0x12b),{'success':_0x6ae7d4[_0x1118f5(0x158)]('success'),'errors':_0x6ae7d4['flash'](_0x1118f5(0x13d)),'user':_0x5528a8,'role':_0x2793d1,'profile':_0x384294,'payment':_0x17b815,'master_shop':_0xa2d9aa,'language':_0x250f6c});}catch(_0x22bdae){console[_0x1118f5(0x15b)](_0x22bdae);}}),router['post'](a0_0x1cf3f2(0x151),auth,async(_0x50e321,_0x1ff1ae)=>{const _0x417007=a0_0x1cf3f2;try{const {name:_0x3dbddf,address:_0x3b804b,mobile:_0x2a4736,email:_0x214d29,receivable:_0x2fdf58,payable:_0x57f1d1,contactperson:_0x25d829,landline:_0x1ddfde}=_0x50e321[_0x417007(0x10d)],_0x158e07=new customer({'name':_0x3dbddf,'address':_0x3b804b,'mobile':_0x2a4736,'email':_0x214d29,'receivable':_0x2fdf58,'payable':_0x57f1d1,'contactperson':_0x25d829,'landline':_0x1ddfde}),_0x298b8f=await _0x158e07[_0x417007(0x14d)]();_0x50e321[_0x417007(0x158)]('success',_0x417007(0x119)),_0x1ff1ae['redirect'](_0x417007(0x108));}catch(_0x5e5909){console['log'](_0x5e5909);}}),router[a0_0x1cf3f2(0x147)](a0_0x1cf3f2(0x139),auth,async(_0x1a01bb,_0x551e76)=>{const _0xe6fde2=a0_0x1cf3f2;try{const {username:_0x5bc0e6,email:_0x2bfd0a,role:_0x2dfb90}=_0x1a01bb[_0xe6fde2(0x10e)],_0x126f86=_0x1a01bb[_0xe6fde2(0x10e)],_0xbb1fcc=await profile[_0xe6fde2(0x140)]({'email':_0x126f86[_0xe6fde2(0x137)]}),_0x4331ac=await master_shop['find']();console[_0xe6fde2(0x15b)](_0xe6fde2(0x149),_0x4331ac);const _0x4ca721=_0x1a01bb[_0xe6fde2(0x106)]['id'],_0x2c14c9=await customer[_0xe6fde2(0xf9)](_0x4ca721);if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x15d)){var _0x366ab9=users[_0xe6fde2(0xfe)];console[_0xe6fde2(0x15b)](_0x366ab9);}else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x142))var _0x366ab9=users[_0xe6fde2(0x142)];else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x153))var _0x366ab9=users['German'];else{if(_0x4331ac[0x0]['language']=='Spanish')var _0x366ab9=users[_0xe6fde2(0x123)];else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]=='French')var _0x366ab9=users[_0xe6fde2(0x134)];else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x116))var _0x366ab9=users[_0xe6fde2(0x113)];else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x110))var _0x366ab9=users['Chinese'];else{if(_0x4331ac[0x0][_0xe6fde2(0x13e)]==_0xe6fde2(0x12e))var _0x366ab9=users[_0xe6fde2(0x120)];}}}}}}}_0x551e76[_0xe6fde2(0x131)]('customer',{'success':_0x1a01bb[_0xe6fde2(0x158)](_0xe6fde2(0x14b)),'errors':_0x1a01bb[_0xe6fde2(0x158)]('errors'),'role':_0x126f86,'profile':_0xbb1fcc,'user':_0x2c14c9,'master_shop':_0x4331ac,'language':_0x366ab9});}catch(_0x258216){console['log'](_0x258216);}}),router[a0_0x1cf3f2(0x145)]('/view/:id',auth,async(_0x1e43c2,_0x3d2122)=>{const _0x24fae7=a0_0x1cf3f2;try{const _0x2ebfae=_0x1e43c2[_0x24fae7(0x106)]['id'],_0x2897eb=await customer[_0x24fae7(0xf9)](_0x2ebfae),{name:_0x8fa058,address:_0x391cf7,mobile:_0x282610,email:_0x536b62,receivable:_0x355e65,payable:_0x31802e,contactperson:_0x32a57a,landline:_0x50a032}=_0x1e43c2[_0x24fae7(0x10d)];_0x2897eb[_0x24fae7(0x13b)]=_0x8fa058,_0x2897eb['address']=_0x391cf7,_0x2897eb['mobile']=_0x282610,_0x2897eb['email']=_0x536b62,_0x2897eb[_0x24fae7(0x11b)]=_0x355e65,_0x2897eb['payable']=_0x31802e,_0x2897eb[_0x24fae7(0xf7)]=_0x32a57a,_0x2897eb[_0x24fae7(0x136)]=_0x50a032;const _0x23f4f2=await _0x2897eb[_0x24fae7(0x14d)]();_0x1e43c2[_0x24fae7(0x158)]('success','customer\x20update\x20successfully'),_0x3d2122['redirect'](_0x24fae7(0x108));}catch(_0x5e3e15){console['log'](_0x5e3e15);}}),router['get'](a0_0x1cf3f2(0x157),auth,async(_0xe3cc3d,_0x319d4f)=>{const _0x1adaa2=a0_0x1cf3f2;try{const {username:_0x9459b6,email:_0x4d4df0,role:_0x6a88e3}=_0xe3cc3d[_0x1adaa2(0x10e)],_0xd0c9a0=_0xe3cc3d[_0x1adaa2(0x10e)],_0xde8727=await profile['findOne']({'email':_0xd0c9a0[_0x1adaa2(0x137)]}),_0x1e1abe=await master_shop['find']();console[_0x1adaa2(0x15b)]('master',_0x1e1abe),console[_0x1adaa2(0x15b)](_0xe3cc3d[_0x1adaa2(0x106)]['id']);const _0x3b69e3=await customer[_0x1adaa2(0x140)]({'_id':_0xe3cc3d[_0x1adaa2(0x106)]['id']});console[_0x1adaa2(0x15b)](_0x1adaa2(0x111),_0x3b69e3);const _0x5b73f6=await c_payment_data[_0x1adaa2(0x10b)]({'customer':_0x3b69e3[_0x1adaa2(0x13b)]});console['log'](_0x5b73f6);const _0x341127=await c_payment_data[_0x1adaa2(0x15c)]([{'$match':{'customer':_0x3b69e3[_0x1adaa2(0x13b)]}},{'$match':{'reason':_0x1adaa2(0x103)}},{'$group':{'_id':_0x1adaa2(0x143),'sum':{'$sum':_0x1adaa2(0x11f)}}}]);console[_0x1adaa2(0x15b)](_0x1adaa2(0xf2),_0x341127);const _0xa4d4a9=await c_payment_data[_0x1adaa2(0x15c)]([{'$match':{'customer':_0x3b69e3[_0x1adaa2(0x13b)]}},{'$match':{'reason':_0x1adaa2(0xf5)}},{'$group':{'_id':_0x1adaa2(0x143),'sum':{'$sum':_0x1adaa2(0x11f)}}}]);console['log']('receivable_sum',_0xa4d4a9);if(_0x1e1abe[0x0]['language']=='English\x20(US)'){var _0x15cac5=users['English'];console[_0x1adaa2(0x15b)](_0x15cac5);}else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]==_0x1adaa2(0x142))var _0x15cac5=users[_0x1adaa2(0x142)];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]==_0x1adaa2(0x153))var _0x15cac5=users[_0x1adaa2(0x153)];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]=='Spanish')var _0x15cac5=users[_0x1adaa2(0x123)];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]==_0x1adaa2(0x134))var _0x15cac5=users['French'];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]==_0x1adaa2(0x116))var _0x15cac5=users[_0x1adaa2(0x113)];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]=='Chinese')var _0x15cac5=users[_0x1adaa2(0x110)];else{if(_0x1e1abe[0x0][_0x1adaa2(0x13e)]=='Arabic\x20(ae)')var _0x15cac5=users[_0x1adaa2(0x120)];}}}}}}}_0x319d4f[_0x1adaa2(0x131)](_0x1adaa2(0x104),{'success':_0xe3cc3d[_0x1adaa2(0x158)]('success'),'errors':_0xe3cc3d[_0x1adaa2(0x158)](_0x1adaa2(0x13d)),'role':_0xd0c9a0,'profile':_0xde8727,'payment':_0x5b73f6,'payable':_0x341127,'receivable':_0xa4d4a9,'master_shop':_0x1e1abe,'language':_0x15cac5});}catch(_0x501543){console[_0x1adaa2(0x15b)](_0x501543);}}),router['get'](a0_0x1cf3f2(0x15e),auth,async(_0x4901fe,_0x3a1d53)=>{const _0x205aa5=a0_0x1cf3f2;try{const _0x450eb5=new excelJS['Workbook'](),_0x2cfb54=_0x450eb5[_0x205aa5(0x10c)]('Customers');return _0x2cfb54[_0x205aa5(0x115)]=[{'header':'ID','key':'PName','width':0xa},{'header':_0x205aa5(0x125),'key':_0x205aa5(0x12a),'width':0xa},{'header':_0x205aa5(0xfc),'key':_0x205aa5(0x152),'width':0xa},{'header':_0x205aa5(0x118),'key':_0x205aa5(0x118),'width':0xa},{'header':_0x205aa5(0x109),'key':_0x205aa5(0x109),'width':0xa},{'header':_0x205aa5(0x15a),'key':_0x205aa5(0x15a),'width':0xa},{'header':_0x205aa5(0x137),'key':_0x205aa5(0x137),'width':0xa}],_0x3a1d53[_0x205aa5(0x11c)](_0x205aa5(0x154),_0x205aa5(0x138)),_0x3a1d53[_0x205aa5(0x11c)](_0x205aa5(0x124),_0x205aa5(0x126)),_0x450eb5[_0x205aa5(0x122)][_0x205aa5(0xf8)](_0x3a1d53)[_0x205aa5(0x121)](()=>{const _0x15284a=_0x205aa5;_0x3a1d53[_0x15284a(0x100)](0xc8);});}catch(_0x5527dc){_0x3a1d53[_0x205aa5(0x100)](0x190)['send']({'errors':_0x5527dc[_0x205aa5(0x155)]});}});const storage1=multer[a0_0x1cf3f2(0x117)]({'destination':(_0x4e6440,_0x2f5606,_0x548fe8)=>{const _0xbbea0e=a0_0x1cf3f2;_0x548fe8(null,_0xbbea0e(0x13f));},'filename':(_0x5ae2db,_0x4e7b9f,_0xe7a16b)=>{const _0x5f49dc=a0_0x1cf3f2;_0xe7a16b(null,Date[_0x5f49dc(0x102)]()+_0x4e7b9f[_0x5f49dc(0x12f)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1cf3f2(0x145)](a0_0x1cf3f2(0x148),auth,uploadMigrate['single'](a0_0x1cf3f2(0x146)),async(_0x1c47f0,_0x3727ab)=>{const _0x28e51a=a0_0x1cf3f2,_0x44e8ad=_0x1c47f0[_0x28e51a(0x101)]['filename'],_0x460330=await xlsx[_0x28e51a(0x14e)](_0x28e51a(0x10f)+_0x44e8ad);let _0x2201cf=_0x460330[_0x28e51a(0x135)],_0x1e2282=xlsx[_0x28e51a(0xf4)][_0x28e51a(0x141)](_0x460330['Sheets'][_0x2201cf[0x0]]);for(const _0x315c88 of _0x1e2282){const _0x366df4=_0x315c88['ID'],_0x5ac171=_0x315c88[_0x28e51a(0x125)],_0x21d4ab=_0x315c88[_0x28e51a(0xfc)],_0x3c2574=_0x315c88['SalesmanName'],_0x4d40f3=_0x315c88[_0x28e51a(0x109)],_0x134ebf=_0x315c88[_0x28e51a(0x15a)],_0xe83bcd=_0x315c88['email'];try{let _0x3f4382=await customer[_0x28e51a(0x140)]({'name':_0x5ac171});if(!_0x3f4382){const _0x485e45=new customer({'name':_0x5ac171,'ID':_0x366df4,'SalesmanCode':_0x21d4ab,'SalesmanName':_0x3c2574,'address':_0x4d40f3,'mobile':_0x134ebf,'email':_0xe83bcd});_0x3f4382=await _0x485e45['save'](),_0x1c47f0[_0x28e51a(0x158)](_0x28e51a(0x14b),_0x5ac171+'\x20added\x20successfully');}else _0x1c47f0['flash'](_0x28e51a(0x11d),_0x5ac171+_0x28e51a(0x133));}catch(_0x5e8f01){_0x3727ab['status'](0x1f4)['json']({'proderror':_0x5e8f01[_0x28e51a(0x155)],'aproduct':ProductName});}}_0x3727ab[_0x28e51a(0x13a)](_0x28e51a(0x108));}),module['exports']=router;