function a0_0x3f80(){const _0x365782=['public/Migration','single','payable','name','get','log','\x20added\x20successfully','customer_data','Name','sale','c_payments','receivable','setHeader','write','utils','data','2359250uPlNNO','user','reason','contactperson','master','2102685QELbQJ','Content-Type','payable_sum','map','params','forEach','$amount','Arabic','columns','294ZkyBbp','receivable_sum','\x20Failed','customer_docs','render','save','sale_return','Arabic\x20(ae)','json','1261162TgShaF','Chinese','attachment;\x20filename=customer_Migration_File.xlsx','Spanish','multer','express','Hindi','originalname','status','message','email','mobile','/customer/view','SheetNames','$reason','Customers','/products_export_migrate_file','customer_payment','Router','language','success','findOne','Portuguese\x20(BR)','post','German','31969pTEOhJ','exceljs','aggregate','then','customer\x20add\x20successfully','body','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','landline','Sale','errors','find','xlsx','SalesmanName','../middleware/auth','/view','76296sHCwxS','French','SalesmanCode','English\x20(US)','PBrands','14359512HKeGDl','exports','Content-Disposition','filename','/customer_import_migrate_file','English','redirect','sheet_to_json','send','address','Portuguese','1579906uwlHXz','customer','../models/all_models','Sheets','/view/payment/:id','amount','flash','file'];a0_0x3f80=function(){return _0x365782;};return a0_0x3f80();}const a0_0x1f9fc5=a0_0x36a4;(function(_0x2dfec1,_0x52fb6b){const _0x53fdad=a0_0x36a4,_0x4c71cf=_0x2dfec1();while(!![]){try{const _0x18578e=-parseInt(_0x53fdad(0x23c))/0x1+-parseInt(_0x53fdad(0x20d))/0x2+parseInt(_0x53fdad(0x22a))/0x3+-parseInt(_0x53fdad(0x1fd))/0x4+parseInt(_0x53fdad(0x225))/0x5+-parseInt(_0x53fdad(0x233))/0x6*(parseInt(_0x53fdad(0x1ee))/0x7)+parseInt(_0x53fdad(0x202))/0x8;if(_0x18578e===_0x52fb6b)break;else _0x4c71cf['push'](_0x4c71cf['shift']());}catch(_0x48c5e2){_0x4c71cf['push'](_0x4c71cf['shift']());}}}(a0_0x3f80,0xa47b0));const express=require(a0_0x1f9fc5(0x241)),app=express(),router=express[a0_0x1f9fc5(0x24e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x1f9fc5(0x20f)),auth=require(a0_0x1f9fc5(0x1fb)),users=require('../public/language/languages.json'),excelJS=require(a0_0x1f9fc5(0x1ef)),xlsx=require(a0_0x1f9fc5(0x1f9)),multer=require(a0_0x1f9fc5(0x240));function a0_0x36a4(_0x305574,_0x2ea7ee){const _0x3f80b4=a0_0x3f80();return a0_0x36a4=function(_0x36a457,_0xa3c64d){_0x36a457=_0x36a457-0x1ea;let _0x4bed74=_0x3f80b4[_0x36a457];return _0x4bed74;},a0_0x36a4(_0x305574,_0x2ea7ee);}router[a0_0x1f9fc5(0x219)]('/view',auth,async(_0xc532b3,_0x2d8640)=>{const _0x46ca31=a0_0x1f9fc5;try{const {username:_0x19a63e,email:_0x2bb9d8,role:_0x5caf2d}=_0xc532b3[_0x46ca31(0x226)],_0x557b4d=_0xc532b3[_0x46ca31(0x226)],_0x2b6146=await profile['findOne']({'email':_0x557b4d[_0x46ca31(0x246)]}),_0x7c9bc2=await master_shop[_0x46ca31(0x1f8)]();console[_0x46ca31(0x21a)](_0x46ca31(0x229),_0x7c9bc2);const _0x582e2b=await customer[_0x46ca31(0x1f8)](),_0x10b45d=await customer[_0x46ca31(0x1f0)]([{'$lookup':{'from':_0x46ca31(0x21f),'localField':_0x46ca31(0x218),'foreignField':_0x46ca31(0x20e),'as':_0x46ca31(0x236)}}]);console[_0x46ca31(0x21a)](_0x10b45d);const _0x4f4fcb=_0x10b45d[_0x46ca31(0x22d)](_0x2d43ae=>{const _0x40f11f=_0x46ca31;console[_0x40f11f(0x21a)](_0x40f11f(0x224),_0x2d43ae);var _0x566ef3=0x0,_0x25dd16=0x0;return _0x2d43ae[_0x40f11f(0x236)][_0x40f11f(0x22f)](_0x502564=>{const _0x553f21=_0x40f11f;console[_0x553f21(0x21a)]('element',_0x502564),_0x502564[_0x553f21(0x227)]==_0x553f21(0x1f6)?_0x566ef3+=_0x502564[_0x553f21(0x212)]:_0x25dd16+=_0x502564[_0x553f21(0x212)];}),_0x2d43ae[_0x40f11f(0x21e)]=parseFloat(_0x566ef3)+0x0,_0x2d43ae[_0x40f11f(0x239)]=parseFloat(_0x25dd16)+0x0,_0x2d43ae;});console['log']('payment_data',_0x4f4fcb);if(_0x7c9bc2[0x0][_0x46ca31(0x24f)]==_0x46ca31(0x200)){var _0x19bf69=users[_0x46ca31(0x207)];console[_0x46ca31(0x21a)](_0x19bf69);}else{if(_0x7c9bc2[0x0][_0x46ca31(0x24f)]==_0x46ca31(0x242))var _0x19bf69=users[_0x46ca31(0x242)];else{if(_0x7c9bc2[0x0]['language']==_0x46ca31(0x1ed))var _0x19bf69=users[_0x46ca31(0x1ed)];else{if(_0x7c9bc2[0x0][_0x46ca31(0x24f)]==_0x46ca31(0x23f))var _0x19bf69=users[_0x46ca31(0x23f)];else{if(_0x7c9bc2[0x0][_0x46ca31(0x24f)]=='French')var _0x19bf69=users[_0x46ca31(0x1fe)];else{if(_0x7c9bc2[0x0]['language']==_0x46ca31(0x1eb))var _0x19bf69=users[_0x46ca31(0x20c)];else{if(_0x7c9bc2[0x0]['language']==_0x46ca31(0x23d))var _0x19bf69=users['Chinese'];else{if(_0x7c9bc2[0x0]['language']=='Arabic\x20(ae)')var _0x19bf69=users['Arabic'];}}}}}}}_0x2d8640[_0x46ca31(0x237)](_0x46ca31(0x20e),{'success':_0xc532b3['flash'](_0x46ca31(0x250)),'errors':_0xc532b3['flash']('errors'),'user':_0x582e2b,'role':_0x557b4d,'profile':_0x2b6146,'payment':_0x4f4fcb,'master_shop':_0x7c9bc2,'language':_0x19bf69});}catch(_0x2a1877){console[_0x46ca31(0x21a)](_0x2a1877);}}),router[a0_0x1f9fc5(0x1ec)](a0_0x1f9fc5(0x1fc),auth,async(_0x3c28cb,_0x291fd9)=>{const _0x5950da=a0_0x1f9fc5;try{const {name:_0x52f347,address:_0x2c6e27,mobile:_0x4b7ae4,email:_0x4d2e77,receivable:_0x4cee0e,payable:_0x453afb,contactperson:_0x14515d,landline:_0x20e69c}=_0x3c28cb[_0x5950da(0x1f3)],_0x5d2126=new customer({'name':_0x52f347,'address':_0x2c6e27,'mobile':_0x4b7ae4,'email':_0x4d2e77,'receivable':_0x4cee0e,'payable':_0x453afb,'contactperson':_0x14515d,'landline':_0x20e69c}),_0x2e4bd4=await _0x5d2126['save']();_0x3c28cb[_0x5950da(0x213)](_0x5950da(0x250),_0x5950da(0x1f2)),_0x291fd9[_0x5950da(0x208)](_0x5950da(0x248));}catch(_0x328bff){console[_0x5950da(0x21a)](_0x328bff);}}),router[a0_0x1f9fc5(0x219)]('/view/:id',auth,async(_0x414702,_0x51df34)=>{const _0x457163=a0_0x1f9fc5;try{const {username:_0x2a6ea1,email:_0x498917,role:_0x445d69}=_0x414702[_0x457163(0x226)],_0x3279a6=_0x414702[_0x457163(0x226)],_0x93eb0d=await profile[_0x457163(0x1ea)]({'email':_0x3279a6[_0x457163(0x246)]}),_0x2d4ac0=await master_shop[_0x457163(0x1f8)]();console[_0x457163(0x21a)]('master',_0x2d4ac0);const _0x43d934=_0x414702[_0x457163(0x22e)]['id'],_0x48c6e4=await customer['findById'](_0x43d934);if(_0x2d4ac0[0x0]['language']==_0x457163(0x200)){var _0x35160f=users[_0x457163(0x207)];console[_0x457163(0x21a)](_0x35160f);}else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]=='Hindi')var _0x35160f=users[_0x457163(0x242)];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]==_0x457163(0x1ed))var _0x35160f=users[_0x457163(0x1ed)];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]=='Spanish')var _0x35160f=users['Spanish'];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]=='French')var _0x35160f=users[_0x457163(0x1fe)];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]==_0x457163(0x1eb))var _0x35160f=users[_0x457163(0x20c)];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]==_0x457163(0x23d))var _0x35160f=users[_0x457163(0x23d)];else{if(_0x2d4ac0[0x0][_0x457163(0x24f)]==_0x457163(0x23a))var _0x35160f=users[_0x457163(0x231)];}}}}}}}_0x51df34['render'](_0x457163(0x20e),{'success':_0x414702[_0x457163(0x213)](_0x457163(0x250)),'errors':_0x414702[_0x457163(0x213)](_0x457163(0x1f7)),'role':_0x3279a6,'profile':_0x93eb0d,'user':_0x48c6e4,'master_shop':_0x2d4ac0,'language':_0x35160f});}catch(_0x32ab6a){console['log'](_0x32ab6a);}}),router['post']('/view/:id',auth,async(_0x549802,_0x25706d)=>{const _0x3700be=a0_0x1f9fc5;try{const _0x553f0a=_0x549802[_0x3700be(0x22e)]['id'],_0x3feaad=await customer['findById'](_0x553f0a),{name:_0x5c99a5,address:_0x515a39,mobile:_0x14caf1,email:_0x5d90bf,receivable:_0x1aa6b4,payable:_0x3bf2f9,contactperson:_0x17ff5c,landline:_0x1c71ec}=_0x549802['body'];_0x3feaad[_0x3700be(0x218)]=_0x5c99a5,_0x3feaad['address']=_0x515a39,_0x3feaad[_0x3700be(0x247)]=_0x14caf1,_0x3feaad['email']=_0x5d90bf,_0x3feaad[_0x3700be(0x220)]=_0x1aa6b4,_0x3feaad[_0x3700be(0x217)]=_0x3bf2f9,_0x3feaad[_0x3700be(0x228)]=_0x17ff5c,_0x3feaad[_0x3700be(0x1f5)]=_0x1c71ec;const _0x215c80=await _0x3feaad[_0x3700be(0x238)]();_0x549802['flash'](_0x3700be(0x250),'customer\x20update\x20successfully'),_0x25706d['redirect'](_0x3700be(0x248));}catch(_0x4c5e33){console[_0x3700be(0x21a)](_0x4c5e33);}}),router['get'](a0_0x1f9fc5(0x211),auth,async(_0x4aa681,_0x257f2a)=>{const _0x117b79=a0_0x1f9fc5;try{const {username:_0x338d5d,email:_0x24d130,role:_0x210017}=_0x4aa681[_0x117b79(0x226)],_0x2cfb93=_0x4aa681['user'],_0x3a5740=await profile[_0x117b79(0x1ea)]({'email':_0x2cfb93[_0x117b79(0x246)]}),_0x10f94e=await master_shop['find']();console[_0x117b79(0x21a)](_0x117b79(0x229),_0x10f94e),console['log'](_0x4aa681[_0x117b79(0x22e)]['id']);const _0x1007ab=await customer[_0x117b79(0x1ea)]({'_id':_0x4aa681[_0x117b79(0x22e)]['id']});console['log'](_0x117b79(0x21c),_0x1007ab);const _0x5e3ea2=await c_payment_data[_0x117b79(0x1f8)]({'customer':_0x1007ab[_0x117b79(0x218)]});console[_0x117b79(0x21a)](_0x5e3ea2);const _0x2ce0c8=await c_payment_data['aggregate']([{'$match':{'customer':_0x1007ab['name']}},{'$match':{'reason':_0x117b79(0x1f6)}},{'$group':{'_id':_0x117b79(0x24a),'sum':{'$sum':_0x117b79(0x230)}}}]);console[_0x117b79(0x21a)](_0x117b79(0x22c),_0x2ce0c8);const _0x186bbb=await c_payment_data[_0x117b79(0x1f0)]([{'$match':{'customer':_0x1007ab[_0x117b79(0x218)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':_0x117b79(0x24a),'sum':{'$sum':'$amount'}}}]);console[_0x117b79(0x21a)](_0x117b79(0x234),_0x186bbb);if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x200)){var _0x54462b=users[_0x117b79(0x207)];console['log'](_0x54462b);}else{if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x242))var _0x54462b=users[_0x117b79(0x242)];else{if(_0x10f94e[0x0][_0x117b79(0x24f)]=='German')var _0x54462b=users['German'];else{if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x23f))var _0x54462b=users[_0x117b79(0x23f)];else{if(_0x10f94e[0x0]['language']==_0x117b79(0x1fe))var _0x54462b=users[_0x117b79(0x1fe)];else{if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x1eb))var _0x54462b=users[_0x117b79(0x20c)];else{if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x23d))var _0x54462b=users[_0x117b79(0x23d)];else{if(_0x10f94e[0x0][_0x117b79(0x24f)]==_0x117b79(0x23a))var _0x54462b=users['Arabic'];}}}}}}}_0x257f2a[_0x117b79(0x237)](_0x117b79(0x24d),{'success':_0x4aa681[_0x117b79(0x213)]('success'),'errors':_0x4aa681['flash'](_0x117b79(0x1f7)),'role':_0x2cfb93,'profile':_0x3a5740,'payment':_0x5e3ea2,'payable':_0x2ce0c8,'receivable':_0x186bbb,'master_shop':_0x10f94e,'language':_0x54462b});}catch(_0x25971e){console[_0x117b79(0x21a)](_0x25971e);}}),router[a0_0x1f9fc5(0x219)](a0_0x1f9fc5(0x24c),auth,async(_0x14b16b,_0xe705a5)=>{const _0x1902f5=a0_0x1f9fc5;try{const _0x28a013=new excelJS['Workbook'](),_0x119db8=_0x28a013['addWorksheet'](_0x1902f5(0x24b));return _0x119db8[_0x1902f5(0x232)]=[{'header':'ID','key':'PName','width':0xa},{'header':'Name','key':_0x1902f5(0x201),'width':0xa},{'header':_0x1902f5(0x1ff),'key':'PUnits','width':0xa},{'header':'SalesmanName','key':_0x1902f5(0x1fa),'width':0xa},{'header':_0x1902f5(0x20b),'key':'address','width':0xa},{'header':'mobile','key':'mobile','width':0xa},{'header':'email','key':'email','width':0xa}],_0xe705a5[_0x1902f5(0x221)](_0x1902f5(0x22b),_0x1902f5(0x1f4)),_0xe705a5['setHeader'](_0x1902f5(0x204),_0x1902f5(0x23e)),_0x28a013['xlsx'][_0x1902f5(0x222)](_0xe705a5)[_0x1902f5(0x1f1)](()=>{const _0x17f751=_0x1902f5;_0xe705a5[_0x17f751(0x244)](0xc8);});}catch(_0x5b431a){_0xe705a5[_0x1902f5(0x244)](0x190)[_0x1902f5(0x20a)]({'errors':_0x5b431a[_0x1902f5(0x245)]});}});const storage1=multer['diskStorage']({'destination':(_0x205b4f,_0x422be7,_0x5f0d9f)=>{const _0x2a1a6a=a0_0x1f9fc5;_0x5f0d9f(null,_0x2a1a6a(0x215));},'filename':(_0x11457c,_0xa5c932,_0x2c96b0)=>{const _0xdc1f98=a0_0x1f9fc5;_0x2c96b0(null,Date['now']()+_0xa5c932[_0xdc1f98(0x243)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1f9fc5(0x1ec)](a0_0x1f9fc5(0x206),auth,uploadMigrate[a0_0x1f9fc5(0x216)]('customer_product_fule'),async(_0x379534,_0x179d64)=>{const _0x2c57dd=a0_0x1f9fc5,_0x3ac302=_0x379534[_0x2c57dd(0x214)][_0x2c57dd(0x205)],_0x26d4dc=await xlsx['readFile']('public/Migration/'+_0x3ac302);let _0x230db5=_0x26d4dc[_0x2c57dd(0x249)],_0xe44fad=xlsx[_0x2c57dd(0x223)][_0x2c57dd(0x209)](_0x26d4dc[_0x2c57dd(0x210)][_0x230db5[0x0]]);for(const _0x462bab of _0xe44fad){const _0x5bcfcf=_0x462bab['ID'],_0x167282=_0x462bab[_0x2c57dd(0x21d)],_0x3f731d=_0x462bab[_0x2c57dd(0x1ff)],_0x28121c=_0x462bab[_0x2c57dd(0x1fa)],_0x49da82=_0x462bab[_0x2c57dd(0x20b)],_0xd7d921=_0x462bab[_0x2c57dd(0x247)],_0x376bd4=_0x462bab[_0x2c57dd(0x246)];try{let _0x2b24b5=await customer[_0x2c57dd(0x1ea)]({'name':_0x167282});if(!_0x2b24b5){const _0x12a3de=new customer({'name':_0x167282,'ID':_0x5bcfcf,'SalesmanCode':_0x3f731d,'SalesmanName':_0x28121c,'address':_0x49da82,'mobile':_0xd7d921,'email':_0x376bd4});_0x2b24b5=await _0x12a3de[_0x2c57dd(0x238)](),_0x379534[_0x2c57dd(0x213)](_0x2c57dd(0x250),_0x167282+_0x2c57dd(0x21b));}else _0x379534[_0x2c57dd(0x213)]('error',_0x167282+_0x2c57dd(0x235));}catch(_0x337c26){_0x179d64[_0x2c57dd(0x244)](0x1f4)[_0x2c57dd(0x23b)]({'proderror':_0x337c26[_0x2c57dd(0x245)],'aproduct':ProductName});}}_0x179d64['redirect'](_0x2c57dd(0x248));}),module[a0_0x1f9fc5(0x203)]=router;