function a0_0x3dd3(){const _0x53e93b=['Sale','German','readFile','findById','data','status','file','258584DqPcdh','amount','json','Portuguese\x20(BR)','flash','/view','multer','Content-Type','Sheets','xlsx','error','French','\x20added\x20successfully','Workbook','payment_data','master','setHeader','body','forEach','41657SXZVzw','render','5959570RkYZqY','aggregate','landline','Portuguese','send','then','columns','originalname','SalesmanName','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','exceljs','$amount','find','SalesmanCode','/view/:id','/products_export_migrate_file','Spanish','user','exports','get','customer','54jbeLGP','now','save','language','../middleware/auth','map','/customer_import_migrate_file','express','name','receivable','customer_data','post','customer_product_fule','Content-Disposition','address','English','errors','message','Hindi','Chinese','SheetNames','1141784jmxXbo','c_payments','success','384538CEERQT','11pUZRie','../public/language/languages.json','email','reason','3OSdeOo','customer_docs','redirect','Arabic','log','diskStorage','single','English\x20(US)','public/Migration/','params','public/Migration','10652ErhjWR','1938708nOEnlm','sale_return','receivable_sum','findOne','PName','mobile','$reason','/customer/view','customer\x20update\x20successfully','Name','write','addWorksheet','element','filename','70mqtfdi','\x20Failed'];a0_0x3dd3=function(){return _0x53e93b;};return a0_0x3dd3();}const a0_0x5e445f=a0_0x36a5;(function(_0x3d0eb6,_0xdc3386){const _0x116d74=a0_0x36a5,_0x213003=_0x3d0eb6();while(!![]){try{const _0x59afc5=parseInt(_0x116d74(0x132))/0x1+-parseInt(_0x116d74(0x15a))/0x2*(-parseInt(_0x116d74(0x137))/0x3)+-parseInt(_0x116d74(0x142))/0x4*(-parseInt(_0x116d74(0x151))/0x5)+-parseInt(_0x116d74(0x184))/0x6*(parseInt(_0x116d74(0x16d))/0x7)+parseInt(_0x116d74(0x199))/0x8+parseInt(_0x116d74(0x143))/0x9+parseInt(_0x116d74(0x16f))/0xa*(-parseInt(_0x116d74(0x133))/0xb);if(_0x59afc5===_0xdc3386)break;else _0x213003['push'](_0x213003['shift']());}catch(_0x8e2f37){_0x213003['push'](_0x213003['shift']());}}}(a0_0x3dd3,0x3f693));function a0_0x36a5(_0x363993,_0x1028e9){const _0x3dd39e=a0_0x3dd3();return a0_0x36a5=function(_0x36a512,_0x2c1bd3){_0x36a512=_0x36a512-0x130;let _0x3ad7cd=_0x3dd39e[_0x36a512];return _0x3ad7cd;},a0_0x36a5(_0x363993,_0x1028e9);}const express=require(a0_0x5e445f(0x18b)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require('../models/all_models'),auth=require(a0_0x5e445f(0x188)),users=require(a0_0x5e445f(0x134)),excelJS=require(a0_0x5e445f(0x179)),xlsx=require('xlsx'),multer=require(a0_0x5e445f(0x160));router['get'](a0_0x5e445f(0x15f),auth,async(_0x4b89ce,_0x53a9bf)=>{const _0x3b1be8=a0_0x5e445f;try{const {username:_0x3c71ba,email:_0x209c9d,role:_0x123093}=_0x4b89ce['user'],_0x3a0b84=_0x4b89ce['user'],_0x10e444=await profile[_0x3b1be8(0x146)]({'email':_0x3a0b84[_0x3b1be8(0x135)]}),_0x346ed2=await master_shop[_0x3b1be8(0x17b)]();console[_0x3b1be8(0x13b)](_0x3b1be8(0x169),_0x346ed2);const _0x27e930=await customer['find'](),_0x351fcd=await customer[_0x3b1be8(0x170)]([{'$lookup':{'from':_0x3b1be8(0x130),'localField':'name','foreignField':_0x3b1be8(0x183),'as':'customer_docs'}}]);console[_0x3b1be8(0x13b)](_0x351fcd);const _0x5aa4cc=_0x351fcd[_0x3b1be8(0x189)](_0x3c8f33=>{const _0x18fb47=_0x3b1be8;console[_0x18fb47(0x13b)](_0x18fb47(0x157),_0x3c8f33);var _0x38bc5d=0x0,_0xa7b9b6=0x0;return _0x3c8f33[_0x18fb47(0x138)][_0x18fb47(0x16c)](_0x544cf3=>{const _0x38f969=_0x18fb47;console[_0x38f969(0x13b)](_0x38f969(0x14f),_0x544cf3),_0x544cf3[_0x38f969(0x136)]==_0x38f969(0x153)?_0x38bc5d+=_0x544cf3[_0x38f969(0x15b)]:_0xa7b9b6+=_0x544cf3[_0x38f969(0x15b)];}),_0x3c8f33['sale']=parseFloat(_0x38bc5d)+0x0,_0x3c8f33[_0x18fb47(0x144)]=parseFloat(_0xa7b9b6)+0x0,_0x3c8f33;});console['log'](_0x3b1be8(0x168),_0x5aa4cc);if(_0x346ed2[0x0][_0x3b1be8(0x187)]=='English\x20(US)'){var _0x101bd8=users['English'];console['log'](_0x101bd8);}else{if(_0x346ed2[0x0][_0x3b1be8(0x187)]==_0x3b1be8(0x196))var _0x101bd8=users['Hindi'];else{if(_0x346ed2[0x0]['language']==_0x3b1be8(0x154))var _0x101bd8=users[_0x3b1be8(0x154)];else{if(_0x346ed2[0x0][_0x3b1be8(0x187)]==_0x3b1be8(0x17f))var _0x101bd8=users[_0x3b1be8(0x17f)];else{if(_0x346ed2[0x0][_0x3b1be8(0x187)]==_0x3b1be8(0x165))var _0x101bd8=users[_0x3b1be8(0x165)];else{if(_0x346ed2[0x0][_0x3b1be8(0x187)]==_0x3b1be8(0x15d))var _0x101bd8=users[_0x3b1be8(0x172)];else{if(_0x346ed2[0x0]['language']==_0x3b1be8(0x197))var _0x101bd8=users[_0x3b1be8(0x197)];else{if(_0x346ed2[0x0][_0x3b1be8(0x187)]=='Arabic\x20(ae)')var _0x101bd8=users[_0x3b1be8(0x13a)];}}}}}}}_0x53a9bf['render'](_0x3b1be8(0x183),{'success':_0x4b89ce['flash']('success'),'errors':_0x4b89ce[_0x3b1be8(0x15e)](_0x3b1be8(0x194)),'user':_0x27e930,'role':_0x3a0b84,'profile':_0x10e444,'payment':_0x5aa4cc,'master_shop':_0x346ed2,'language':_0x101bd8});}catch(_0x1fe3df){console['log'](_0x1fe3df);}}),router[a0_0x5e445f(0x18f)](a0_0x5e445f(0x15f),auth,async(_0x39379c,_0x243d66)=>{const _0x101414=a0_0x5e445f;try{const {name:_0x321dfe,address:_0x6c78d2,mobile:_0x2b0504,email:_0x590173,receivable:_0x2fb7ee,payable:_0x4fb289,contactperson:_0x1d8598,landline:_0x22a1f2}=_0x39379c[_0x101414(0x16b)],_0x517430=new customer({'name':_0x321dfe,'address':_0x6c78d2,'mobile':_0x2b0504,'email':_0x590173,'receivable':_0x2fb7ee,'payable':_0x4fb289,'contactperson':_0x1d8598,'landline':_0x22a1f2}),_0x106ae0=await _0x517430[_0x101414(0x186)]();_0x39379c[_0x101414(0x15e)]('success','customer\x20add\x20successfully'),_0x243d66[_0x101414(0x139)]('/customer/view');}catch(_0x2578f8){console['log'](_0x2578f8);}}),router[a0_0x5e445f(0x182)](a0_0x5e445f(0x17d),auth,async(_0x253f56,_0x1f6aa2)=>{const _0x35ec8a=a0_0x5e445f;try{const {username:_0x5053b4,email:_0x2b4b06,role:_0x54f2e9}=_0x253f56['user'],_0x5ae3ba=_0x253f56['user'],_0x2f5035=await profile['findOne']({'email':_0x5ae3ba[_0x35ec8a(0x135)]}),_0x40e1d7=await master_shop[_0x35ec8a(0x17b)]();console['log']('master',_0x40e1d7);const _0x4c44d5=_0x253f56[_0x35ec8a(0x140)]['id'],_0x3b78c1=await customer[_0x35ec8a(0x156)](_0x4c44d5);if(_0x40e1d7[0x0][_0x35ec8a(0x187)]==_0x35ec8a(0x13e)){var _0x1491a9=users[_0x35ec8a(0x193)];console[_0x35ec8a(0x13b)](_0x1491a9);}else{if(_0x40e1d7[0x0]['language']==_0x35ec8a(0x196))var _0x1491a9=users[_0x35ec8a(0x196)];else{if(_0x40e1d7[0x0][_0x35ec8a(0x187)]=='German')var _0x1491a9=users['German'];else{if(_0x40e1d7[0x0]['language']==_0x35ec8a(0x17f))var _0x1491a9=users[_0x35ec8a(0x17f)];else{if(_0x40e1d7[0x0][_0x35ec8a(0x187)]==_0x35ec8a(0x165))var _0x1491a9=users['French'];else{if(_0x40e1d7[0x0][_0x35ec8a(0x187)]==_0x35ec8a(0x15d))var _0x1491a9=users['Portuguese'];else{if(_0x40e1d7[0x0]['language']==_0x35ec8a(0x197))var _0x1491a9=users[_0x35ec8a(0x197)];else{if(_0x40e1d7[0x0][_0x35ec8a(0x187)]=='Arabic\x20(ae)')var _0x1491a9=users[_0x35ec8a(0x13a)];}}}}}}}_0x1f6aa2[_0x35ec8a(0x16e)](_0x35ec8a(0x183),{'success':_0x253f56[_0x35ec8a(0x15e)](_0x35ec8a(0x131)),'errors':_0x253f56['flash']('errors'),'role':_0x5ae3ba,'profile':_0x2f5035,'user':_0x3b78c1,'master_shop':_0x40e1d7,'language':_0x1491a9});}catch(_0xe7eb96){console[_0x35ec8a(0x13b)](_0xe7eb96);}}),router[a0_0x5e445f(0x18f)](a0_0x5e445f(0x17d),auth,async(_0x1008f4,_0x19240d)=>{const _0x3cb43f=a0_0x5e445f;try{const _0x5919f8=_0x1008f4[_0x3cb43f(0x140)]['id'],_0x24a370=await customer['findById'](_0x5919f8),{name:_0x2699e9,address:_0x1b25bf,mobile:_0x4d3965,email:_0x3c4add,receivable:_0xd59060,payable:_0x2ba625,contactperson:_0x2a9c79,landline:_0x297751}=_0x1008f4[_0x3cb43f(0x16b)];_0x24a370['name']=_0x2699e9,_0x24a370[_0x3cb43f(0x192)]=_0x1b25bf,_0x24a370[_0x3cb43f(0x148)]=_0x4d3965,_0x24a370[_0x3cb43f(0x135)]=_0x3c4add,_0x24a370[_0x3cb43f(0x18d)]=_0xd59060,_0x24a370['payable']=_0x2ba625,_0x24a370['contactperson']=_0x2a9c79,_0x24a370[_0x3cb43f(0x171)]=_0x297751;const _0x795bba=await _0x24a370[_0x3cb43f(0x186)]();_0x1008f4['flash'](_0x3cb43f(0x131),_0x3cb43f(0x14b)),_0x19240d[_0x3cb43f(0x139)](_0x3cb43f(0x14a));}catch(_0x4ec07b){console['log'](_0x4ec07b);}}),router[a0_0x5e445f(0x182)]('/view/payment/:id',auth,async(_0x5a41eb,_0x15886a)=>{const _0x5b97b6=a0_0x5e445f;try{const {username:_0x153d7e,email:_0x4cab25,role:_0x2afdad}=_0x5a41eb[_0x5b97b6(0x180)],_0xe86335=_0x5a41eb[_0x5b97b6(0x180)],_0x3c1b50=await profile['findOne']({'email':_0xe86335[_0x5b97b6(0x135)]}),_0x1eb1e6=await master_shop[_0x5b97b6(0x17b)]();console[_0x5b97b6(0x13b)](_0x5b97b6(0x169),_0x1eb1e6),console[_0x5b97b6(0x13b)](_0x5a41eb[_0x5b97b6(0x140)]['id']);const _0xed4572=await customer[_0x5b97b6(0x146)]({'_id':_0x5a41eb['params']['id']});console['log'](_0x5b97b6(0x18e),_0xed4572);const _0x5afde2=await c_payment_data['find']({'customer':_0xed4572[_0x5b97b6(0x18c)]});console[_0x5b97b6(0x13b)](_0x5afde2);const _0x242564=await c_payment_data[_0x5b97b6(0x170)]([{'$match':{'customer':_0xed4572[_0x5b97b6(0x18c)]}},{'$match':{'reason':_0x5b97b6(0x153)}},{'$group':{'_id':'$reason','sum':{'$sum':'$amount'}}}]);console[_0x5b97b6(0x13b)]('payable_sum',_0x242564);const _0x8dad9b=await c_payment_data[_0x5b97b6(0x170)]([{'$match':{'customer':_0xed4572[_0x5b97b6(0x18c)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':_0x5b97b6(0x149),'sum':{'$sum':_0x5b97b6(0x17a)}}}]);console[_0x5b97b6(0x13b)](_0x5b97b6(0x145),_0x8dad9b);if(_0x1eb1e6[0x0][_0x5b97b6(0x187)]==_0x5b97b6(0x13e)){var _0x4d119f=users[_0x5b97b6(0x193)];console[_0x5b97b6(0x13b)](_0x4d119f);}else{if(_0x1eb1e6[0x0][_0x5b97b6(0x187)]==_0x5b97b6(0x196))var _0x4d119f=users[_0x5b97b6(0x196)];else{if(_0x1eb1e6[0x0][_0x5b97b6(0x187)]==_0x5b97b6(0x154))var _0x4d119f=users[_0x5b97b6(0x154)];else{if(_0x1eb1e6[0x0][_0x5b97b6(0x187)]=='Spanish')var _0x4d119f=users['Spanish'];else{if(_0x1eb1e6[0x0]['language']=='French')var _0x4d119f=users[_0x5b97b6(0x165)];else{if(_0x1eb1e6[0x0][_0x5b97b6(0x187)]=='Portuguese\x20(BR)')var _0x4d119f=users[_0x5b97b6(0x172)];else{if(_0x1eb1e6[0x0]['language']==_0x5b97b6(0x197))var _0x4d119f=users[_0x5b97b6(0x197)];else{if(_0x1eb1e6[0x0]['language']=='Arabic\x20(ae)')var _0x4d119f=users[_0x5b97b6(0x13a)];}}}}}}}_0x15886a[_0x5b97b6(0x16e)]('customer_payment',{'success':_0x5a41eb['flash'](_0x5b97b6(0x131)),'errors':_0x5a41eb[_0x5b97b6(0x15e)](_0x5b97b6(0x194)),'role':_0xe86335,'profile':_0x3c1b50,'payment':_0x5afde2,'payable':_0x242564,'receivable':_0x8dad9b,'master_shop':_0x1eb1e6,'language':_0x4d119f});}catch(_0xe05e27){console['log'](_0xe05e27);}}),router[a0_0x5e445f(0x182)](a0_0x5e445f(0x17e),auth,async(_0xb6f6f2,_0x59e3ea)=>{const _0xb340f0=a0_0x5e445f;try{const _0x4204ec=new excelJS[(_0xb340f0(0x167))](),_0x57616f=_0x4204ec[_0xb340f0(0x14e)]('Customers');return _0x57616f[_0xb340f0(0x175)]=[{'header':'ID','key':_0xb340f0(0x147),'width':0xa},{'header':'Name','key':'PBrands','width':0xa},{'header':_0xb340f0(0x17c),'key':'PUnits','width':0xa},{'header':_0xb340f0(0x177),'key':_0xb340f0(0x177),'width':0xa},{'header':_0xb340f0(0x192),'key':'address','width':0xa},{'header':_0xb340f0(0x148),'key':_0xb340f0(0x148),'width':0xa},{'header':_0xb340f0(0x135),'key':_0xb340f0(0x135),'width':0xa}],_0x59e3ea[_0xb340f0(0x16a)](_0xb340f0(0x161),_0xb340f0(0x178)),_0x59e3ea[_0xb340f0(0x16a)](_0xb340f0(0x191),'attachment;\x20filename=customer_Migration_File.xlsx'),_0x4204ec[_0xb340f0(0x163)][_0xb340f0(0x14d)](_0x59e3ea)[_0xb340f0(0x174)](()=>{_0x59e3ea['status'](0xc8);});}catch(_0x5ea818){_0x59e3ea['status'](0x190)[_0xb340f0(0x173)]({'errors':_0x5ea818[_0xb340f0(0x195)]});}});const storage1=multer[a0_0x5e445f(0x13c)]({'destination':(_0xdf18d4,_0x24f4d1,_0x46021c)=>{const _0x266ebf=a0_0x5e445f;_0x46021c(null,_0x266ebf(0x141));},'filename':(_0x2263d4,_0xb5ca01,_0x4dc1e5)=>{const _0x1e4f8d=a0_0x5e445f;_0x4dc1e5(null,Date[_0x1e4f8d(0x185)]()+_0xb5ca01[_0x1e4f8d(0x176)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5e445f(0x18f)](a0_0x5e445f(0x18a),auth,uploadMigrate[a0_0x5e445f(0x13d)](a0_0x5e445f(0x190)),async(_0x31af63,_0x55e86f)=>{const _0x4eb51c=a0_0x5e445f,_0x4fefcc=_0x31af63[_0x4eb51c(0x159)][_0x4eb51c(0x150)],_0x54c1c4=await xlsx[_0x4eb51c(0x155)](_0x4eb51c(0x13f)+_0x4fefcc);let _0x1bfa9d=_0x54c1c4[_0x4eb51c(0x198)],_0x19996b=xlsx['utils']['sheet_to_json'](_0x54c1c4[_0x4eb51c(0x162)][_0x1bfa9d[0x0]]);for(const _0x25a99c of _0x19996b){const _0x41dcdc=_0x25a99c['ID'],_0x4d309d=_0x25a99c[_0x4eb51c(0x14c)],_0x4a1f86=_0x25a99c[_0x4eb51c(0x17c)],_0x1d11f1=_0x25a99c['SalesmanName'],_0x4eb381=_0x25a99c[_0x4eb51c(0x192)],_0x511191=_0x25a99c[_0x4eb51c(0x148)],_0x18628a=_0x25a99c[_0x4eb51c(0x135)];try{let _0x976915=await customer[_0x4eb51c(0x146)]({'name':_0x4d309d});if(!_0x976915){const _0x355c54=new customer({'name':_0x4d309d,'ID':_0x41dcdc,'SalesmanCode':_0x4a1f86,'SalesmanName':_0x1d11f1,'address':_0x4eb381,'mobile':_0x511191,'email':_0x18628a});_0x976915=await _0x355c54[_0x4eb51c(0x186)](),_0x31af63[_0x4eb51c(0x15e)](_0x4eb51c(0x131),_0x4d309d+_0x4eb51c(0x166));}else _0x31af63['flash'](_0x4eb51c(0x164),_0x4d309d+_0x4eb51c(0x152));}catch(_0xbe1bac){_0x55e86f[_0x4eb51c(0x158)](0x1f4)[_0x4eb51c(0x15c)]({'proderror':_0xbe1bac[_0x4eb51c(0x195)],'aproduct':ProductName});}}_0x55e86f['redirect'](_0x4eb51c(0x14a));}),module[a0_0x5e445f(0x181)]=router;