function a0_0xf01b(_0x5d4823,_0x32ae8c){const _0x3e5181=a0_0x3e51();return a0_0xf01b=function(_0xf01b66,_0x43aaf8){_0xf01b66=_0xf01b66-0x117;let _0x33721a=_0x3e5181[_0xf01b66];return _0x33721a;},a0_0xf01b(_0x5d4823,_0x32ae8c);}const a0_0x159198=a0_0xf01b;(function(_0x1553ca,_0x2287e6){const _0x444dfb=a0_0xf01b,_0x2df709=_0x1553ca();while(!![]){try{const _0xf492a4=parseInt(_0x444dfb(0x12a))/0x1*(-parseInt(_0x444dfb(0x152))/0x2)+parseInt(_0x444dfb(0x149))/0x3+-parseInt(_0x444dfb(0x14e))/0x4+-parseInt(_0x444dfb(0x126))/0x5+parseInt(_0x444dfb(0x12c))/0x6+-parseInt(_0x444dfb(0x16f))/0x7*(-parseInt(_0x444dfb(0x159))/0x8)+parseInt(_0x444dfb(0x17e))/0x9;if(_0xf492a4===_0x2287e6)break;else _0x2df709['push'](_0x2df709['shift']());}catch(_0x363bf4){_0x2df709['push'](_0x2df709['shift']());}}}(a0_0x3e51,0xaef3c));const express=require(a0_0x159198(0x13c)),app=express(),router=express[a0_0x159198(0x123)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x159198(0x17d)),auth=require(a0_0x159198(0x134)),users=require(a0_0x159198(0x131)),excelJS=require(a0_0x159198(0x14a)),xlsx=require(a0_0x159198(0x136)),multer=require(a0_0x159198(0x175));router['get']('/view',auth,async(_0x2792f7,_0xd31ead)=>{const _0x22a421=a0_0x159198;try{const {username:_0xf3c222,email:_0x56e875,role:_0x42bdf5}=_0x2792f7[_0x22a421(0x12b)],_0x139f86=_0x2792f7[_0x22a421(0x12b)],_0x3aa823=await profile[_0x22a421(0x151)]({'email':_0x139f86['email']}),_0x3e5d27=await master_shop[_0x22a421(0x15e)]();console[_0x22a421(0x12f)](_0x22a421(0x132),_0x3e5d27);const _0x2dcb2c=await customer[_0x22a421(0x15e)](),_0x5dfc54=await customer['aggregate']([{'$lookup':{'from':'c_payments','localField':_0x22a421(0x11e),'foreignField':'customer','as':_0x22a421(0x118)}}]);console[_0x22a421(0x12f)](_0x5dfc54);const _0x23388b=_0x5dfc54[_0x22a421(0x156)](_0x2a5c7f=>{const _0x82376a=_0x22a421;console[_0x82376a(0x12f)](_0x82376a(0x142),_0x2a5c7f);var _0x35b111=0x0,_0x4d19bb=0x0;return _0x2a5c7f[_0x82376a(0x118)][_0x82376a(0x145)](_0x4f62f3=>{const _0x1c7686=_0x82376a;console[_0x1c7686(0x12f)](_0x1c7686(0x168),_0x4f62f3),_0x4f62f3[_0x1c7686(0x146)]==_0x1c7686(0x13b)?_0x35b111+=_0x4f62f3[_0x1c7686(0x15f)]:_0x4d19bb+=_0x4f62f3[_0x1c7686(0x15f)];}),_0x2a5c7f[_0x82376a(0x17c)]=parseFloat(_0x35b111)+0x0,_0x2a5c7f[_0x82376a(0x16d)]=parseFloat(_0x4d19bb)+0x0,_0x2a5c7f;});console[_0x22a421(0x12f)](_0x22a421(0x122),_0x23388b);if(_0x3e5d27[0x0]['language']==_0x22a421(0x137)){var _0x39ce3a=users[_0x22a421(0x157)];console[_0x22a421(0x12f)](_0x39ce3a);}else{if(_0x3e5d27[0x0][_0x22a421(0x163)]==_0x22a421(0x11a))var _0x39ce3a=users['Hindi'];else{if(_0x3e5d27[0x0][_0x22a421(0x163)]==_0x22a421(0x14c))var _0x39ce3a=users[_0x22a421(0x14c)];else{if(_0x3e5d27[0x0][_0x22a421(0x163)]=='Spanish')var _0x39ce3a=users[_0x22a421(0x169)];else{if(_0x3e5d27[0x0][_0x22a421(0x163)]=='French')var _0x39ce3a=users[_0x22a421(0x148)];else{if(_0x3e5d27[0x0][_0x22a421(0x163)]==_0x22a421(0x171))var _0x39ce3a=users[_0x22a421(0x178)];else{if(_0x3e5d27[0x0][_0x22a421(0x163)]=='Chinese')var _0x39ce3a=users[_0x22a421(0x133)];else{if(_0x3e5d27[0x0]['language']==_0x22a421(0x14d))var _0x39ce3a=users['Arabic'];}}}}}}}_0xd31ead[_0x22a421(0x15b)](_0x22a421(0x180),{'success':_0x2792f7[_0x22a421(0x174)](_0x22a421(0x179)),'errors':_0x2792f7[_0x22a421(0x174)](_0x22a421(0x172)),'user':_0x2dcb2c,'role':_0x139f86,'profile':_0x3aa823,'payment':_0x23388b,'master_shop':_0x3e5d27,'language':_0x39ce3a});}catch(_0x6d6233){console['log'](_0x6d6233);}}),router[a0_0x159198(0x165)](a0_0x159198(0x164),auth,async(_0x1dff7d,_0x388da6)=>{const _0x203c5c=a0_0x159198;try{const {name:_0x4242af,address:_0x20a30f,mobile:_0xee203f,email:_0x1e9f11,receivable:_0x4c734d,payable:_0x4debcc,contactperson:_0x4022dd,landline:_0x414905}=_0x1dff7d[_0x203c5c(0x158)],_0x2d22da=new customer({'name':_0x4242af,'address':_0x20a30f,'mobile':_0xee203f,'email':_0x1e9f11,'receivable':_0x4c734d,'payable':_0x4debcc,'contactperson':_0x4022dd,'landline':_0x414905}),_0x300a2c=await _0x2d22da[_0x203c5c(0x166)]();_0x1dff7d[_0x203c5c(0x174)](_0x203c5c(0x179),_0x203c5c(0x17f)),_0x388da6[_0x203c5c(0x16a)]('/customer/view');}catch(_0x378834){console[_0x203c5c(0x12f)](_0x378834);}}),router['get'](a0_0x159198(0x176),auth,async(_0x133ee1,_0x5dac04)=>{const _0x2c8481=a0_0x159198;try{const {username:_0x2b9e40,email:_0x2675de,role:_0x4c3f03}=_0x133ee1[_0x2c8481(0x12b)],_0x14243d=_0x133ee1[_0x2c8481(0x12b)],_0x403214=await profile[_0x2c8481(0x151)]({'email':_0x14243d[_0x2c8481(0x162)]}),_0x2a1420=await master_shop['find']();console[_0x2c8481(0x12f)](_0x2c8481(0x132),_0x2a1420);const _0x1cbfaa=_0x133ee1[_0x2c8481(0x119)]['id'],_0x3cbfbe=await customer[_0x2c8481(0x11d)](_0x1cbfaa);if(_0x2a1420[0x0][_0x2c8481(0x163)]==_0x2c8481(0x137)){var _0x6c3f48=users[_0x2c8481(0x157)];console[_0x2c8481(0x12f)](_0x6c3f48);}else{if(_0x2a1420[0x0][_0x2c8481(0x163)]==_0x2c8481(0x11a))var _0x6c3f48=users[_0x2c8481(0x11a)];else{if(_0x2a1420[0x0][_0x2c8481(0x163)]=='German')var _0x6c3f48=users[_0x2c8481(0x14c)];else{if(_0x2a1420[0x0]['language']==_0x2c8481(0x169))var _0x6c3f48=users[_0x2c8481(0x169)];else{if(_0x2a1420[0x0]['language']==_0x2c8481(0x148))var _0x6c3f48=users[_0x2c8481(0x148)];else{if(_0x2a1420[0x0][_0x2c8481(0x163)]=='Portuguese\x20(BR)')var _0x6c3f48=users[_0x2c8481(0x178)];else{if(_0x2a1420[0x0][_0x2c8481(0x163)]==_0x2c8481(0x133))var _0x6c3f48=users[_0x2c8481(0x133)];else{if(_0x2a1420[0x0]['language']==_0x2c8481(0x14d))var _0x6c3f48=users['Arabic'];}}}}}}}_0x5dac04[_0x2c8481(0x15b)](_0x2c8481(0x180),{'success':_0x133ee1[_0x2c8481(0x174)](_0x2c8481(0x179)),'errors':_0x133ee1[_0x2c8481(0x174)](_0x2c8481(0x172)),'role':_0x14243d,'profile':_0x403214,'user':_0x3cbfbe,'master_shop':_0x2a1420,'language':_0x6c3f48});}catch(_0x2b9f4b){console[_0x2c8481(0x12f)](_0x2b9f4b);}}),router[a0_0x159198(0x165)](a0_0x159198(0x176),auth,async(_0x281823,_0x1b4d5f)=>{const _0x4d896a=a0_0x159198;try{const _0x452888=_0x281823[_0x4d896a(0x119)]['id'],_0x19634f=await customer[_0x4d896a(0x11d)](_0x452888),{name:_0x20ba82,address:_0x5e2e99,mobile:_0x3761fe,email:_0x37ebf2,receivable:_0x123581,payable:_0x3ffecb,contactperson:_0x153262,landline:_0x12536d}=_0x281823[_0x4d896a(0x158)];_0x19634f['name']=_0x20ba82,_0x19634f[_0x4d896a(0x11f)]=_0x5e2e99,_0x19634f['mobile']=_0x3761fe,_0x19634f[_0x4d896a(0x162)]=_0x37ebf2,_0x19634f['receivable']=_0x123581,_0x19634f['payable']=_0x3ffecb,_0x19634f[_0x4d896a(0x177)]=_0x153262,_0x19634f['landline']=_0x12536d;const _0x58a8ff=await _0x19634f[_0x4d896a(0x166)]();_0x281823[_0x4d896a(0x174)](_0x4d896a(0x179),_0x4d896a(0x15c)),_0x1b4d5f['redirect'](_0x4d896a(0x120));}catch(_0x9becf){console[_0x4d896a(0x12f)](_0x9becf);}}),router[a0_0x159198(0x15d)](a0_0x159198(0x17b),auth,async(_0x24f022,_0x39d840)=>{const _0x59003e=a0_0x159198;try{const {username:_0x4a58db,email:_0x4eff69,role:_0x4a5a52}=_0x24f022[_0x59003e(0x12b)],_0x50d61f=_0x24f022['user'],_0x5245c1=await profile['findOne']({'email':_0x50d61f[_0x59003e(0x162)]}),_0x24fb46=await master_shop[_0x59003e(0x15e)]();console[_0x59003e(0x12f)](_0x59003e(0x132),_0x24fb46),console['log'](_0x24f022[_0x59003e(0x119)]['id']);const _0xf39812=await customer[_0x59003e(0x151)]({'_id':_0x24f022[_0x59003e(0x119)]['id']});console['log']('customer_data',_0xf39812);const _0x4b4ccc=await c_payment_data[_0x59003e(0x15e)]({'customer':_0xf39812[_0x59003e(0x11e)]});console[_0x59003e(0x12f)](_0x4b4ccc);const _0x34dcf9=await c_payment_data[_0x59003e(0x17a)]([{'$match':{'customer':_0xf39812[_0x59003e(0x11e)]}},{'$match':{'reason':_0x59003e(0x13b)}},{'$group':{'_id':_0x59003e(0x12e),'sum':{'$sum':_0x59003e(0x139)}}}]);console[_0x59003e(0x12f)]('payable_sum',_0x34dcf9);const _0x332f31=await c_payment_data[_0x59003e(0x17a)]([{'$match':{'customer':_0xf39812[_0x59003e(0x11e)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':_0x59003e(0x12e),'sum':{'$sum':_0x59003e(0x139)}}}]);console[_0x59003e(0x12f)](_0x59003e(0x173),_0x332f31);if(_0x24fb46[0x0][_0x59003e(0x163)]==_0x59003e(0x137)){var _0x4c625d=users['English'];console[_0x59003e(0x12f)](_0x4c625d);}else{if(_0x24fb46[0x0][_0x59003e(0x163)]==_0x59003e(0x11a))var _0x4c625d=users[_0x59003e(0x11a)];else{if(_0x24fb46[0x0]['language']==_0x59003e(0x14c))var _0x4c625d=users[_0x59003e(0x14c)];else{if(_0x24fb46[0x0][_0x59003e(0x163)]==_0x59003e(0x169))var _0x4c625d=users[_0x59003e(0x169)];else{if(_0x24fb46[0x0][_0x59003e(0x163)]=='French')var _0x4c625d=users[_0x59003e(0x148)];else{if(_0x24fb46[0x0][_0x59003e(0x163)]==_0x59003e(0x171))var _0x4c625d=users[_0x59003e(0x178)];else{if(_0x24fb46[0x0]['language']==_0x59003e(0x133))var _0x4c625d=users[_0x59003e(0x133)];else{if(_0x24fb46[0x0][_0x59003e(0x163)]==_0x59003e(0x14d))var _0x4c625d=users['Arabic'];}}}}}}}_0x39d840[_0x59003e(0x15b)](_0x59003e(0x13e),{'success':_0x24f022['flash'](_0x59003e(0x179)),'errors':_0x24f022[_0x59003e(0x174)](_0x59003e(0x172)),'role':_0x50d61f,'profile':_0x5245c1,'payment':_0x4b4ccc,'payable':_0x34dcf9,'receivable':_0x332f31,'master_shop':_0x24fb46,'language':_0x4c625d});}catch(_0x29ce10){console['log'](_0x29ce10);}}),router[a0_0x159198(0x15d)](a0_0x159198(0x14b),auth,async(_0x1b0674,_0x4b9ba6)=>{const _0x34fa81=a0_0x159198;try{const _0x35f244=new excelJS[(_0x34fa81(0x170))](),_0x5acc1b=_0x35f244[_0x34fa81(0x140)](_0x34fa81(0x13f));return _0x5acc1b[_0x34fa81(0x138)]=[{'header':'ID','key':_0x34fa81(0x124),'width':0xa},{'header':'Name','key':'PBrands','width':0xa},{'header':_0x34fa81(0x160),'key':_0x34fa81(0x16c),'width':0xa},{'header':_0x34fa81(0x125),'key':_0x34fa81(0x125),'width':0xa},{'header':_0x34fa81(0x11f),'key':_0x34fa81(0x11f),'width':0xa},{'header':_0x34fa81(0x167),'key':_0x34fa81(0x167),'width':0xa},{'header':_0x34fa81(0x162),'key':_0x34fa81(0x162),'width':0xa}],_0x4b9ba6[_0x34fa81(0x129)](_0x34fa81(0x153),_0x34fa81(0x13a)),_0x4b9ba6[_0x34fa81(0x129)](_0x34fa81(0x13d),_0x34fa81(0x11b)),_0x35f244[_0x34fa81(0x136)][_0x34fa81(0x161)](_0x4b9ba6)['then'](()=>{const _0x5303ba=_0x34fa81;_0x4b9ba6[_0x5303ba(0x14f)](0xc8);});}catch(_0x5425d8){_0x4b9ba6[_0x34fa81(0x14f)](0x190)[_0x34fa81(0x147)]({'errors':_0x5425d8[_0x34fa81(0x128)]});}});const storage1=multer[a0_0x159198(0x130)]({'destination':(_0x2d9aa,_0x255fcb,_0x2736bd)=>{_0x2736bd(null,'public/Migration');},'filename':(_0x49b5bd,_0x3a90cc,_0x485811)=>{const _0x511904=a0_0x159198;_0x485811(null,Date[_0x511904(0x127)]()+_0x3a90cc[_0x511904(0x117)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x3e51(){const _0x8e73c2=['Arabic\x20(ae)','5274488zVlabx','status','readFile','findOne','2jjWfhG','Content-Type','SheetNames','\x20added\x20successfully','map','English','body','16uTHefX','customer_product_fule','render','customer\x20update\x20successfully','get','find','amount','SalesmanCode','write','email','language','/view','post','save','mobile','element','Spanish','redirect','Sheets','PUnits','sale_return','\x20Failed','15057EPGOqY','Workbook','Portuguese\x20(BR)','errors','receivable_sum','flash','multer','/view/:id','contactperson','Portuguese','success','aggregate','/view/payment/:id','sale','../models/all_models','27807426haVRtn','customer\x20add\x20successfully','customer','originalname','customer_docs','params','Hindi','attachment;\x20filename=customer_Migration_File.xlsx','json','findById','name','address','/customer/view','file','payment_data','Router','PName','SalesmanName','2264920uTiTsZ','now','message','setHeader','1179226trWXsN','user','2063526QLIGfF','filename','$reason','log','diskStorage','../public/language/languages.json','master','Chinese','../middleware/auth','/customer_import_migrate_file','xlsx','English\x20(US)','columns','$amount','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Sale','express','Content-Disposition','customer_payment','Customers','addWorksheet','exports','data','public/Migration/','Name','forEach','reason','send','French','688497aYxQAj','exceljs','/products_export_migrate_file','German'];a0_0x3e51=function(){return _0x8e73c2;};return a0_0x3e51();}router[a0_0x159198(0x165)](a0_0x159198(0x135),auth,uploadMigrate['single'](a0_0x159198(0x15a)),async(_0x375d66,_0x5eb9cd)=>{const _0x317187=a0_0x159198,_0x2323a2=_0x375d66[_0x317187(0x121)][_0x317187(0x12d)],_0x50ba5a=await xlsx[_0x317187(0x150)](_0x317187(0x143)+_0x2323a2);let _0x27f807=_0x50ba5a[_0x317187(0x154)],_0x5bd49e=xlsx['utils']['sheet_to_json'](_0x50ba5a[_0x317187(0x16b)][_0x27f807[0x0]]);for(const _0x342a86 of _0x5bd49e){const _0x4b7dd2=_0x342a86['ID'],_0x2a3e04=_0x342a86[_0x317187(0x144)],_0x22061a=_0x342a86[_0x317187(0x160)],_0x5c0a37=_0x342a86[_0x317187(0x125)],_0x13296e=_0x342a86['address'],_0x70f9fb=_0x342a86['mobile'],_0x2bc58f=_0x342a86[_0x317187(0x162)];try{let _0x1ad444=await customer[_0x317187(0x151)]({'name':_0x2a3e04});if(!_0x1ad444){const _0x54abb6=new customer({'name':_0x2a3e04,'ID':_0x4b7dd2,'SalesmanCode':_0x22061a,'SalesmanName':_0x5c0a37,'address':_0x13296e,'mobile':_0x70f9fb,'email':_0x2bc58f});_0x1ad444=await _0x54abb6[_0x317187(0x166)](),_0x375d66[_0x317187(0x174)](_0x317187(0x179),_0x2a3e04+_0x317187(0x155));}else _0x375d66['flash']('error',_0x2a3e04+_0x317187(0x16e));}catch(_0x38e4af){_0x5eb9cd[_0x317187(0x14f)](0x1f4)[_0x317187(0x11c)]({'proderror':_0x38e4af[_0x317187(0x128)],'aproduct':ProductName});}}_0x5eb9cd[_0x317187(0x16a)]('/customer/view');}),module[a0_0x159198(0x141)]=router;