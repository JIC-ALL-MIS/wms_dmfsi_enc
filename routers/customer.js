function a0_0x25dd(_0x49a4b5,_0x342109){const _0x311c43=a0_0x311c();return a0_0x25dd=function(_0x25dd44,_0x40e00a){_0x25dd44=_0x25dd44-0xcd;let _0x4a126d=_0x311c43[_0x25dd44];return _0x4a126d;},a0_0x25dd(_0x49a4b5,_0x342109);}function a0_0x311c(){const _0x5e2f2a=['$reason','findById','SalesmanName','/customer/view','customer_product_fule','forEach','post','name','params','Sale','Name','SheetNames','mobile','Portuguese\x20(BR)','aggregate','38702230FAlorN','1816357fsTUaR','reason','now','German','customer_payment','Spanish','customer_data','errors','find','diskStorage','11YhIoii','public/Migration/','findOne','PName','French','9353460FkKllV','Chinese','Content-Type','\x20Failed','multer','1183956aedeoT','376BmgzSG','landline','error','Content-Disposition','write','language','save','user','Workbook','270267syfoMf','Sheets','Portuguese','/view/payment/:id','message','success','then','redirect','sale','c_payments','2127222dWkiTj','285250cjDKSd','customer\x20add\x20successfully','exports','customer','/customer_import_migrate_file','PBrands','status','receivable','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','exceljs','filename','customer_docs','5MfJOjW','originalname','flash','data','/view/:id','Hindi','PUnits','master','Arabic','columns','Customers','setHeader','addWorksheet','SalesmanCode','../middleware/auth','json','amount','element','contactperson','Arabic\x20(ae)','16yasClK','\x20added\x20successfully','receivable_sum','utils','payment_data','payable','readFile','address','English','log','attachment;\x20filename=customer_Migration_File.xlsx','file','email','render','express','get','xlsx','English\x20(US)','payable_sum'];a0_0x311c=function(){return _0x5e2f2a;};return a0_0x311c();}const a0_0x161f18=a0_0x25dd;(function(_0x193f25,_0x22dc24){const _0x28907a=a0_0x25dd,_0x23106a=_0x193f25();while(!![]){try{const _0x56e758=parseInt(_0x28907a(0xd8))/0x1+-parseInt(_0x28907a(0x121))/0x2*(parseInt(_0x28907a(0xf6))/0x3)+parseInt(_0x28907a(0xec))/0x4*(-parseInt(_0x28907a(0x10d))/0x5)+-parseInt(_0x28907a(0xe7))/0x6+parseInt(_0x28907a(0x101))/0x7*(-parseInt(_0x28907a(0xed))/0x8)+-parseInt(_0x28907a(0x100))/0x9+-parseInt(_0x28907a(0xd7))/0xa*(-parseInt(_0x28907a(0xe2))/0xb);if(_0x56e758===_0x22dc24)break;else _0x23106a['push'](_0x23106a['shift']());}catch(_0x492764){_0x23106a['push'](_0x23106a['shift']());}}}(a0_0x311c,0xea381));const express=require(a0_0x161f18(0x12f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require('../models/all_models'),auth=require(a0_0x161f18(0x11b)),users=require('../public/language/languages.json'),excelJS=require(a0_0x161f18(0x10a)),xlsx=require('xlsx'),multer=require(a0_0x161f18(0xeb));router['get']('/view',auth,async(_0x169866,_0x543d7d)=>{const _0x57dc59=a0_0x161f18;try{const {username:_0x384a20,email:_0x22feee,role:_0x5cdeb4}=_0x169866['user'],_0x1a8f52=_0x169866[_0x57dc59(0xf4)],_0x55da8a=await profile[_0x57dc59(0xe4)]({'email':_0x1a8f52[_0x57dc59(0x12d)]}),_0xedb94=await master_shop['find']();console[_0x57dc59(0x12a)](_0x57dc59(0x114),_0xedb94);const _0x5104e3=await customer[_0x57dc59(0xe0)](),_0x58766f=await customer['aggregate']([{'$lookup':{'from':_0x57dc59(0xff),'localField':'name','foreignField':_0x57dc59(0x104),'as':_0x57dc59(0x10c)}}]);console['log'](_0x58766f);const _0x2f6606=_0x58766f['map'](_0x48b8f9=>{const _0xf5236e=_0x57dc59;console[_0xf5236e(0x12a)](_0xf5236e(0x110),_0x48b8f9);var _0xa5b1f3=0x0,_0x2389aa=0x0;return _0x48b8f9[_0xf5236e(0x10c)][_0xf5236e(0xcd)](_0x399a4a=>{const _0x30970d=_0xf5236e;console[_0x30970d(0x12a)](_0x30970d(0x11e),_0x399a4a),_0x399a4a[_0x30970d(0xd9)]=='Sale'?_0xa5b1f3+=_0x399a4a[_0x30970d(0x11d)]:_0x2389aa+=_0x399a4a[_0x30970d(0x11d)];}),_0x48b8f9[_0xf5236e(0xfe)]=parseFloat(_0xa5b1f3)+0x0,_0x48b8f9['sale_return']=parseFloat(_0x2389aa)+0x0,_0x48b8f9;});console['log'](_0x57dc59(0x125),_0x2f6606);if(_0xedb94[0x0][_0x57dc59(0xf2)]==_0x57dc59(0x132)){var _0x408fda=users[_0x57dc59(0x129)];console[_0x57dc59(0x12a)](_0x408fda);}else{if(_0xedb94[0x0][_0x57dc59(0xf2)]=='Hindi')var _0x408fda=users['Hindi'];else{if(_0xedb94[0x0][_0x57dc59(0xf2)]==_0x57dc59(0xdb))var _0x408fda=users[_0x57dc59(0xdb)];else{if(_0xedb94[0x0][_0x57dc59(0xf2)]=='Spanish')var _0x408fda=users[_0x57dc59(0xdd)];else{if(_0xedb94[0x0][_0x57dc59(0xf2)]==_0x57dc59(0xe6))var _0x408fda=users[_0x57dc59(0xe6)];else{if(_0xedb94[0x0]['language']==_0x57dc59(0xd5))var _0x408fda=users[_0x57dc59(0xf8)];else{if(_0xedb94[0x0]['language']==_0x57dc59(0xe8))var _0x408fda=users[_0x57dc59(0xe8)];else{if(_0xedb94[0x0]['language']=='Arabic\x20(ae)')var _0x408fda=users[_0x57dc59(0x115)];}}}}}}}_0x543d7d[_0x57dc59(0x12e)](_0x57dc59(0x104),{'success':_0x169866['flash'](_0x57dc59(0xfb)),'errors':_0x169866[_0x57dc59(0x10f)](_0x57dc59(0xdf)),'user':_0x5104e3,'role':_0x1a8f52,'profile':_0x55da8a,'payment':_0x2f6606,'master_shop':_0xedb94,'language':_0x408fda});}catch(_0x81bc45){console[_0x57dc59(0x12a)](_0x81bc45);}}),router[a0_0x161f18(0xce)]('/view',auth,async(_0x4e5b91,_0x3981e0)=>{const _0x3e8a88=a0_0x161f18;try{const {name:_0x55a037,address:_0x7a2dcf,mobile:_0x9dddfe,email:_0x2a741d,receivable:_0x510f94,payable:_0x1afbc0,contactperson:_0x411697,landline:_0x2df3ca}=_0x4e5b91['body'],_0x4f8d3=new customer({'name':_0x55a037,'address':_0x7a2dcf,'mobile':_0x9dddfe,'email':_0x2a741d,'receivable':_0x510f94,'payable':_0x1afbc0,'contactperson':_0x411697,'landline':_0x2df3ca}),_0x448537=await _0x4f8d3[_0x3e8a88(0xf3)]();_0x4e5b91[_0x3e8a88(0x10f)](_0x3e8a88(0xfb),_0x3e8a88(0x102)),_0x3981e0['redirect'](_0x3e8a88(0x137));}catch(_0x455db4){console[_0x3e8a88(0x12a)](_0x455db4);}}),router[a0_0x161f18(0x130)]('/view/:id',auth,async(_0x4541a9,_0x2c1b9c)=>{const _0x287956=a0_0x161f18;try{const {username:_0x5ef2ea,email:_0x269f02,role:_0x1c0795}=_0x4541a9[_0x287956(0xf4)],_0x8a918=_0x4541a9[_0x287956(0xf4)],_0x25bc30=await profile[_0x287956(0xe4)]({'email':_0x8a918[_0x287956(0x12d)]}),_0x109c83=await master_shop[_0x287956(0xe0)]();console[_0x287956(0x12a)](_0x287956(0x114),_0x109c83);const _0x3067cb=_0x4541a9[_0x287956(0xd0)]['id'],_0x5a42e8=await customer[_0x287956(0x135)](_0x3067cb);if(_0x109c83[0x0][_0x287956(0xf2)]=='English\x20(US)'){var _0x51f101=users['English'];console[_0x287956(0x12a)](_0x51f101);}else{if(_0x109c83[0x0]['language']=='Hindi')var _0x51f101=users['Hindi'];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0xdb))var _0x51f101=users[_0x287956(0xdb)];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0xdd))var _0x51f101=users['Spanish'];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0xe6))var _0x51f101=users[_0x287956(0xe6)];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0xd5))var _0x51f101=users[_0x287956(0xf8)];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0xe8))var _0x51f101=users[_0x287956(0xe8)];else{if(_0x109c83[0x0][_0x287956(0xf2)]==_0x287956(0x120))var _0x51f101=users[_0x287956(0x115)];}}}}}}}_0x2c1b9c[_0x287956(0x12e)]('customer',{'success':_0x4541a9['flash'](_0x287956(0xfb)),'errors':_0x4541a9[_0x287956(0x10f)](_0x287956(0xdf)),'role':_0x8a918,'profile':_0x25bc30,'user':_0x5a42e8,'master_shop':_0x109c83,'language':_0x51f101});}catch(_0x5499f0){console[_0x287956(0x12a)](_0x5499f0);}}),router[a0_0x161f18(0xce)](a0_0x161f18(0x111),auth,async(_0x1b4c34,_0x38ae1b)=>{const _0x41a68c=a0_0x161f18;try{const _0x58e3cd=_0x1b4c34['params']['id'],_0x540253=await customer[_0x41a68c(0x135)](_0x58e3cd),{name:_0x4ad942,address:_0x5ad420,mobile:_0x2ddd07,email:_0x5a3a5e,receivable:_0x58ec0,payable:_0x4c15de,contactperson:_0x34e980,landline:_0x2fee21}=_0x1b4c34['body'];_0x540253[_0x41a68c(0xcf)]=_0x4ad942,_0x540253[_0x41a68c(0x128)]=_0x5ad420,_0x540253[_0x41a68c(0xd4)]=_0x2ddd07,_0x540253[_0x41a68c(0x12d)]=_0x5a3a5e,_0x540253[_0x41a68c(0x108)]=_0x58ec0,_0x540253[_0x41a68c(0x126)]=_0x4c15de,_0x540253[_0x41a68c(0x11f)]=_0x34e980,_0x540253[_0x41a68c(0xee)]=_0x2fee21;const _0x467ab4=await _0x540253[_0x41a68c(0xf3)]();_0x1b4c34[_0x41a68c(0x10f)](_0x41a68c(0xfb),'customer\x20update\x20successfully'),_0x38ae1b[_0x41a68c(0xfd)]('/customer/view');}catch(_0x222214){console[_0x41a68c(0x12a)](_0x222214);}}),router[a0_0x161f18(0x130)](a0_0x161f18(0xf9),auth,async(_0x3798e7,_0x64bf2f)=>{const _0x538185=a0_0x161f18;try{const {username:_0x338232,email:_0x2bd216,role:_0x31e1dd}=_0x3798e7[_0x538185(0xf4)],_0x41fde2=_0x3798e7[_0x538185(0xf4)],_0x2ffd77=await profile[_0x538185(0xe4)]({'email':_0x41fde2['email']}),_0x5ca55f=await master_shop[_0x538185(0xe0)]();console[_0x538185(0x12a)](_0x538185(0x114),_0x5ca55f),console['log'](_0x3798e7['params']['id']);const _0x252427=await customer[_0x538185(0xe4)]({'_id':_0x3798e7[_0x538185(0xd0)]['id']});console[_0x538185(0x12a)](_0x538185(0xde),_0x252427);const _0x11e3e8=await c_payment_data[_0x538185(0xe0)]({'customer':_0x252427[_0x538185(0xcf)]});console[_0x538185(0x12a)](_0x11e3e8);const _0x5d586c=await c_payment_data[_0x538185(0xd6)]([{'$match':{'customer':_0x252427['name']}},{'$match':{'reason':_0x538185(0xd1)}},{'$group':{'_id':'$reason','sum':{'$sum':'$amount'}}}]);console[_0x538185(0x12a)](_0x538185(0x133),_0x5d586c);const _0x890bf3=await c_payment_data[_0x538185(0xd6)]([{'$match':{'customer':_0x252427[_0x538185(0xcf)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':_0x538185(0x134),'sum':{'$sum':'$amount'}}}]);console['log'](_0x538185(0x123),_0x890bf3);if(_0x5ca55f[0x0][_0x538185(0xf2)]=='English\x20(US)'){var _0x397831=users['English'];console[_0x538185(0x12a)](_0x397831);}else{if(_0x5ca55f[0x0][_0x538185(0xf2)]==_0x538185(0x112))var _0x397831=users[_0x538185(0x112)];else{if(_0x5ca55f[0x0][_0x538185(0xf2)]==_0x538185(0xdb))var _0x397831=users[_0x538185(0xdb)];else{if(_0x5ca55f[0x0]['language']==_0x538185(0xdd))var _0x397831=users[_0x538185(0xdd)];else{if(_0x5ca55f[0x0][_0x538185(0xf2)]==_0x538185(0xe6))var _0x397831=users[_0x538185(0xe6)];else{if(_0x5ca55f[0x0]['language']==_0x538185(0xd5))var _0x397831=users[_0x538185(0xf8)];else{if(_0x5ca55f[0x0][_0x538185(0xf2)]==_0x538185(0xe8))var _0x397831=users[_0x538185(0xe8)];else{if(_0x5ca55f[0x0]['language']==_0x538185(0x120))var _0x397831=users[_0x538185(0x115)];}}}}}}}_0x64bf2f['render'](_0x538185(0xdc),{'success':_0x3798e7[_0x538185(0x10f)]('success'),'errors':_0x3798e7['flash'](_0x538185(0xdf)),'role':_0x41fde2,'profile':_0x2ffd77,'payment':_0x11e3e8,'payable':_0x5d586c,'receivable':_0x890bf3,'master_shop':_0x5ca55f,'language':_0x397831});}catch(_0x22b499){console['log'](_0x22b499);}}),router[a0_0x161f18(0x130)]('/products_export_migrate_file',auth,async(_0x327cb8,_0x549529)=>{const _0x4dcac8=a0_0x161f18;try{const _0x557059=new excelJS[(_0x4dcac8(0xf5))](),_0x40f91d=_0x557059[_0x4dcac8(0x119)](_0x4dcac8(0x117));return _0x40f91d[_0x4dcac8(0x116)]=[{'header':'ID','key':_0x4dcac8(0xe5),'width':0xa},{'header':_0x4dcac8(0xd2),'key':_0x4dcac8(0x106),'width':0xa},{'header':_0x4dcac8(0x11a),'key':_0x4dcac8(0x113),'width':0xa},{'header':_0x4dcac8(0x136),'key':_0x4dcac8(0x136),'width':0xa},{'header':_0x4dcac8(0x128),'key':'address','width':0xa},{'header':'mobile','key':_0x4dcac8(0xd4),'width':0xa},{'header':_0x4dcac8(0x12d),'key':_0x4dcac8(0x12d),'width':0xa}],_0x549529[_0x4dcac8(0x118)](_0x4dcac8(0xe9),_0x4dcac8(0x109)),_0x549529[_0x4dcac8(0x118)](_0x4dcac8(0xf0),_0x4dcac8(0x12b)),_0x557059[_0x4dcac8(0x131)][_0x4dcac8(0xf1)](_0x549529)[_0x4dcac8(0xfc)](()=>{_0x549529['status'](0xc8);});}catch(_0x1b7952){_0x549529[_0x4dcac8(0x107)](0x190)['send']({'errors':_0x1b7952[_0x4dcac8(0xfa)]});}});const storage1=multer[a0_0x161f18(0xe1)]({'destination':(_0x4f39ee,_0x41fec0,_0x54c5a8)=>{_0x54c5a8(null,'public/Migration');},'filename':(_0x5a4746,_0x823aac,_0xd15473)=>{const _0xc5722d=a0_0x161f18;_0xd15473(null,Date[_0xc5722d(0xda)]()+_0x823aac[_0xc5722d(0x10e)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x161f18(0xce)](a0_0x161f18(0x105),auth,uploadMigrate['single'](a0_0x161f18(0x138)),async(_0x2c68f6,_0x278419)=>{const _0x3c857a=a0_0x161f18,_0x1fa374=_0x2c68f6[_0x3c857a(0x12c)][_0x3c857a(0x10b)],_0x1038ff=await xlsx[_0x3c857a(0x127)](_0x3c857a(0xe3)+_0x1fa374);let _0xfca3e1=_0x1038ff[_0x3c857a(0xd3)],_0x34635e=xlsx[_0x3c857a(0x124)]['sheet_to_json'](_0x1038ff[_0x3c857a(0xf7)][_0xfca3e1[0x0]]);for(const _0x5ad6cf of _0x34635e){const _0x5d46af=_0x5ad6cf['ID'],_0x2e234a=_0x5ad6cf['Name'],_0x9a8b0=_0x5ad6cf[_0x3c857a(0x11a)],_0x137b4d=_0x5ad6cf[_0x3c857a(0x136)],_0x48e735=_0x5ad6cf[_0x3c857a(0x128)],_0xba6f06=_0x5ad6cf[_0x3c857a(0xd4)],_0x16034a=_0x5ad6cf[_0x3c857a(0x12d)];try{let _0x487a71=await customer['findOne']({'name':_0x2e234a});if(!_0x487a71){const _0x2b91af=new customer({'name':_0x2e234a,'ID':_0x5d46af,'SalesmanCode':_0x9a8b0,'SalesmanName':_0x137b4d,'address':_0x48e735,'mobile':_0xba6f06,'email':_0x16034a});_0x487a71=await _0x2b91af[_0x3c857a(0xf3)](),_0x2c68f6[_0x3c857a(0x10f)]('success',_0x2e234a+_0x3c857a(0x122));}else _0x2c68f6[_0x3c857a(0x10f)](_0x3c857a(0xef),_0x2e234a+_0x3c857a(0xea));}catch(_0x448a31){_0x278419[_0x3c857a(0x107)](0x1f4)[_0x3c857a(0x11c)]({'proderror':_0x448a31[_0x3c857a(0xfa)],'aproduct':ProductName});}}_0x278419[_0x3c857a(0xfd)](_0x3c857a(0x137));}),module[a0_0x161f18(0x103)]=router;