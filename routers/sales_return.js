function a0_0x456b(){var _0x5b4617=['product_details','master','15890sITEIR','2145752VsFeTb','floorlevel','body','secondary_code','sales_return_invoice','Arabic\x20(ae)','errors','purchase\x20return\x20successfully','Return\x20Rooms','202yOCZvp','$product_details.rack','c_payment','flash','json','params','$product_details.bin','types','primary_code','forEach','/view/:id','old_warehouse_data','due_amount','foreach\x20newproduct','Portuguese','product_code','bin','$customer_docs','paid_amount','English\x20(US)','$name','$product_details.secondary_code','get','Portuguese\x20(BR)','message','product_stock','5751NMYYHU','customer','/give_payment/:id','customer_docs','render','1741359ufDMcb','/sales_return/view','name','191435uBHUgK','getMonth','invoice','$product_details.floorlevel','return_qty','return_sale_edit','sales_return','ToWarehouse','date','161184qUnlNz','1754FldWRs','French','$product_details.product_code','stock','customers','$product_details','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','back','redirect','2876881gRKVsS','/view','status','string','email','sale_qty','findById','language','return_sale','../public/language/languages.json','log','product_name','Arabic','note','$product_details.primary_code','English','map','suppliers','subtract','old_data','Enabled','new\x20new_data','Hindi','save','126KZxTiM','German','all_data','post','/invoice/:id','user','success','aggregate','type','Router','Spanish','findOne','Returned\x20Payment\x20For\x20Sale\x20Return','$product_details.bay','express','Sale\x20Return','bay','Chinese','$product_details.product_name','ToRoom','slice','Return\x20Goods','find','$product_details._id','payment\x20successfull'];a0_0x456b=function(){return _0x5b4617;};return a0_0x456b();}function a0_0x21ef(_0x10dae8,_0x1b0e4b){var _0x456b71=a0_0x456b();return a0_0x21ef=function(_0x21ef9b,_0x4551dc){_0x21ef9b=_0x21ef9b-0xda;var _0x279d55=_0x456b71[_0x21ef9b];return _0x279d55;},a0_0x21ef(_0x10dae8,_0x1b0e4b);}var a0_0x3063b6=a0_0x21ef;(function(_0x231239,_0x13d1ca){var _0x3f0b99=a0_0x21ef,_0x9113c2=_0x231239();while(!![]){try{var _0x2f0a9c=parseInt(_0x3f0b99(0x11e))/0x1*(parseInt(_0x3f0b99(0xf2))/0x2)+-parseInt(_0x3f0b99(0x111))/0x3+parseInt(_0x3f0b99(0x11d))/0x4+-parseInt(_0x3f0b99(0x114))/0x5*(parseInt(_0x3f0b99(0x13f))/0x6)+parseInt(_0x3f0b99(0x127))/0x7+parseInt(_0x3f0b99(0xe9))/0x8+-parseInt(_0x3f0b99(0x10c))/0x9*(-parseInt(_0x3f0b99(0xe8))/0xa);if(_0x2f0a9c===_0x13d1ca)break;else _0x9113c2['push'](_0x9113c2['shift']());}catch(_0x5068f1){_0x9113c2['push'](_0x9113c2['shift']());}}}(a0_0x456b,0x80cb7));const express=require(a0_0x3063b6(0xdb)),app=express(),router=express[a0_0x3063b6(0x148)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x3063b6(0x130));router[a0_0x3063b6(0x108)](a0_0x3063b6(0x128),auth,async(_0x4651e7,_0x2d9433)=>{var _0x3e28f5=a0_0x3063b6;try{const {username:_0x5f2139,email:_0xd54fc0,role:_0x4d5929}=_0x4651e7[_0x3e28f5(0x144)],_0x51a3b0=_0x4651e7['user'],_0xd2138f=await profile[_0x3e28f5(0x14a)]({'email':_0x51a3b0[_0x3e28f5(0x12b)]}),_0xd336d6=await master_shop[_0x3e28f5(0xe3)]();console[_0x3e28f5(0x131)](_0x3e28f5(0xe7),_0xd336d6);const _0x48dbcd=await sales_return[_0x3e28f5(0x146)]([{'$lookup':{'from':_0x3e28f5(0x122),'localField':_0x3e28f5(0x10d),'foreignField':_0x3e28f5(0x113),'as':_0x3e28f5(0x10f)}},{'$unwind':_0x3e28f5(0x103)}]);console[_0x3e28f5(0x131)](_0x3e28f5(0x141),_0x48dbcd);if(_0xd336d6[0x0][_0x3e28f5(0x12e)]=='English\x20(US)'){var _0x57c8c3=users[_0x3e28f5(0x136)];console['log'](_0x57c8c3);}else{if(_0xd336d6[0x0][_0x3e28f5(0x12e)]==_0x3e28f5(0x13d))var _0x57c8c3=users[_0x3e28f5(0x13d)];else{if(_0xd336d6[0x0][_0x3e28f5(0x12e)]=='German')var _0x57c8c3=users[_0x3e28f5(0x140)];else{if(_0xd336d6[0x0]['language']==_0x3e28f5(0x149))var _0x57c8c3=users['Spanish'];else{if(_0xd336d6[0x0]['language']==_0x3e28f5(0x11f))var _0x57c8c3=users[_0x3e28f5(0x11f)];else{if(_0xd336d6[0x0]['language']==_0x3e28f5(0x109))var _0x57c8c3=users[_0x3e28f5(0x100)];else{if(_0xd336d6[0x0][_0x3e28f5(0x12e)]=='Chinese')var _0x57c8c3=users[_0x3e28f5(0xde)];else{if(_0xd336d6[0x0][_0x3e28f5(0x12e)]=='Arabic\x20(ae)')var _0x57c8c3=users[_0x3e28f5(0x133)];}}}}}}}_0x2d9433[_0x3e28f5(0x110)](_0x3e28f5(0x11a),{'success':_0x4651e7['flash'](_0x3e28f5(0x145)),'errors':_0x4651e7[_0x3e28f5(0xf5)](_0x3e28f5(0xef)),'role':_0x51a3b0,'profile':_0xd2138f,'master_shop':_0xd336d6,'user':_0x48dbcd,'language':_0x57c8c3});}catch(_0x589d5f){console[_0x3e28f5(0x131)](_0x589d5f);}}),router[a0_0x3063b6(0x108)](a0_0x3063b6(0xfc),auth,async(_0x38b648,_0x590227)=>{var _0x330717=a0_0x3063b6;try{const {username:_0x47989a,email:_0x30c58b,role:_0x1bfe7a}=_0x38b648[_0x330717(0x144)],_0x4c5050=_0x38b648[_0x330717(0x144)],_0x4f4fb2=await profile[_0x330717(0x14a)]({'email':_0x4c5050['email']}),_0x500cc5=await master_shop['find']();console[_0x330717(0x131)]('master',_0x500cc5);const _0x68c851=_0x38b648[_0x330717(0xf7)]['id'];console['log'](_0x68c851);var _0x3122ff=[_0x330717(0xf1)];const _0x4eec79=await sales_return[_0x330717(0x12d)](_0x68c851),_0x367157=await warehouse[_0x330717(0x146)]([{'$match':{'name':_0x4eec79[_0x330717(0x11b)],'room':_0x4eec79[_0x330717(0xe0)]}},{'$unwind':_0x330717(0x123)},{'$group':{'_id':_0x330717(0xe4),'name':{'$first':_0x330717(0xdf)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x330717(0xda)},'bin':{'$first':_0x330717(0xf8)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x330717(0x117)},'primary_code':{'$first':_0x330717(0x135)},'secondary_code':{'$first':_0x330717(0x107)},'product_code':{'$first':_0x330717(0x120)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x330717(0xf3)}}}]);console[_0x330717(0x131)](_0x367157);const _0x49947d=await warehouse['aggregate']([{'$match':{'status':_0x330717(0x13b),'name':_0x330717(0xe2),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x330717(0x106),'name':{'$first':_0x330717(0x106)}}},{'$sort':{'name':0x1}}]),_0x4ec51f=await product[_0x330717(0xe3)]({});if(_0x500cc5[0x0][_0x330717(0x12e)]==_0x330717(0x105)){var _0x38ba82=users[_0x330717(0x136)];console[_0x330717(0x131)](_0x38ba82);}else{if(_0x500cc5[0x0]['language']==_0x330717(0x13d))var _0x38ba82=users[_0x330717(0x13d)];else{if(_0x500cc5[0x0]['language']==_0x330717(0x140))var _0x38ba82=users['German'];else{if(_0x500cc5[0x0][_0x330717(0x12e)]==_0x330717(0x149))var _0x38ba82=users[_0x330717(0x149)];else{if(_0x500cc5[0x0]['language']==_0x330717(0x11f))var _0x38ba82=users['French'];else{if(_0x500cc5[0x0][_0x330717(0x12e)]==_0x330717(0x109))var _0x38ba82=users[_0x330717(0x100)];else{if(_0x500cc5[0x0][_0x330717(0x12e)]=='Chinese')var _0x38ba82=users[_0x330717(0xde)];else{if(_0x500cc5[0x0][_0x330717(0x12e)]==_0x330717(0xee))var _0x38ba82=users[_0x330717(0x133)];}}}}}}}_0x590227[_0x330717(0x110)](_0x330717(0x119),{'success':_0x38b648['flash'](_0x330717(0x145)),'errors':_0x38b648[_0x330717(0xf5)](_0x330717(0xef)),'role':_0x4c5050,'profile':_0x4f4fb2,'master_shop':_0x500cc5,'user':_0x4eec79,'stock':_0x367157,'unit':_0x4ec51f,'language':_0x38ba82,'warehouses':_0x49947d,'rooms':_0x3122ff});}catch(_0xb90953){console[_0x330717(0x131)](_0xb90953);}}),router[a0_0x3063b6(0x142)]('/view/:id',auth,async(_0x187a54,_0x4fb4f8)=>{var _0x144115=a0_0x3063b6;try{const _0x1759d6=_0x187a54['params']['id'];console[_0x144115(0x131)](_0x1759d6);const _0x1f0ffc=await sales_return['findOne']({'invoice':_0x187a54[_0x144115(0xeb)][_0x144115(0x116)]});console[_0x144115(0x131)](_0x144115(0x13a),_0x1f0ffc);const _0x30088c=await warehouse[_0x144115(0x14a)]({'name':_0x1f0ffc[_0x144115(0x11b)],'room':_0x1f0ffc[_0x144115(0xe0)]});console[_0x144115(0x131)](_0x144115(0xfd),_0x30088c);const {invoice:_0x181cc0,customer:_0x580183,date:_0x250ecd,warehouse_name:_0x39dc5c,product_name:_0x256256,primary_code:_0x110278,secondary_code:_0x1b64cd,product_code:_0x17d201,sales_quantity:_0x1a0f07,stocks:_0x6d88ea,return_qty:_0x3ada10,note:_0x1ff8d1,to_warehouse_name:_0x288cf3,to_Room_name:_0xeaed22}=_0x187a54[_0x144115(0xeb)];console[_0x144115(0x131)](_0x187a54[_0x144115(0xeb)]);if(typeof _0x256256==_0x144115(0x12a))var _0x3d8a6d=[_0x187a54[_0x144115(0xeb)][_0x144115(0x132)]],_0x5307fd=[_0x187a54['body'][_0x144115(0xfa)]],_0x2e9dc5=[_0x187a54['body'][_0x144115(0xec)]],_0xc0c9bc=[_0x187a54[_0x144115(0xeb)][_0x144115(0x101)]],_0x3ee648=[_0x187a54[_0x144115(0xeb)]['sales_quantity']],_0x30ea61=[_0x187a54[_0x144115(0xeb)]['stocks']],_0x4599b2=[_0x187a54[_0x144115(0xeb)]['return_qty']],_0x574bba=[_0x187a54[_0x144115(0xeb)][_0x144115(0xdd)]],_0x566e7f=[_0x187a54['body']['bin']],_0x5256c2=[_0x187a54[_0x144115(0xeb)]['types']],_0xa9854f=[_0x187a54[_0x144115(0xeb)][_0x144115(0xea)]];else var _0x3d8a6d=[..._0x187a54[_0x144115(0xeb)][_0x144115(0x132)]],_0x5307fd=[..._0x187a54['body'][_0x144115(0xfa)]],_0x2e9dc5=[..._0x187a54['body'][_0x144115(0xec)]],_0xc0c9bc=[..._0x187a54[_0x144115(0xeb)][_0x144115(0x101)]],_0x3ee648=[..._0x187a54['body']['sales_quantity']],_0x30ea61=[..._0x187a54[_0x144115(0xeb)]['stocks']],_0x4599b2=[..._0x187a54['body'][_0x144115(0x118)]],_0x574bba=[..._0x187a54[_0x144115(0xeb)][_0x144115(0xdd)]],_0x566e7f=[..._0x187a54[_0x144115(0xeb)]['bin']],_0x5256c2=[..._0x187a54[_0x144115(0xeb)][_0x144115(0xf9)]],_0xa9854f=[..._0x187a54['body']['floorlevel']];const _0x1da828=_0x3d8a6d[_0x144115(0x137)](_0x22c968=>{return _0x22c968={'product_name':_0x22c968};});_0x5307fd[_0x144115(0xfb)]((_0x16d506,_0x183264)=>{_0x1da828[_0x183264]['primary_code']=_0x16d506;}),_0x2e9dc5[_0x144115(0xfb)]((_0x4f53d5,_0x1efd7d)=>{var _0x9fab9e=_0x144115;_0x1da828[_0x1efd7d][_0x9fab9e(0xec)]=_0x4f53d5;}),_0xc0c9bc[_0x144115(0xfb)]((_0x496458,_0x1fd9f8)=>{var _0x4b900d=_0x144115;_0x1da828[_0x1fd9f8][_0x4b900d(0x101)]=_0x496458;}),_0x3ee648[_0x144115(0xfb)]((_0x4d6539,_0x24015b)=>{_0x1da828[_0x24015b]['sale_qty']=_0x4d6539;}),_0x30ea61['forEach']((_0x546331,_0x46ff40)=>{var _0x5ba3bd=_0x144115;_0x1da828[_0x46ff40][_0x5ba3bd(0x121)]=_0x546331;}),_0x4599b2[_0x144115(0xfb)]((_0x43912f,_0x1f9607)=>{var _0x58e6ea=_0x144115;_0x1da828[_0x1f9607][_0x58e6ea(0x118)]=_0x43912f;}),_0x574bba[_0x144115(0xfb)]((_0x30bc2f,_0x1cac4b)=>{var _0x6c9929=_0x144115;_0x1da828[_0x1cac4b][_0x6c9929(0xdd)]=_0x30bc2f;}),_0x566e7f[_0x144115(0xfb)]((_0x3a54fe,_0x57041e)=>{var _0x516f85=_0x144115;_0x1da828[_0x57041e][_0x516f85(0x102)]=_0x3a54fe;}),_0x5256c2['forEach']((_0x4ac31e,_0x20a3fc)=>{_0x1da828[_0x20a3fc]['type']=_0x4ac31e;}),_0xa9854f[_0x144115(0xfb)]((_0x513c8e,_0x364242)=>{_0x1da828[_0x364242]['floorlevel']=_0x513c8e;});var _0x1275f4=0x0;_0x1da828['forEach'](_0x4ace80=>{var _0x4fd945=_0x144115;console[_0x4fd945(0x131)](_0x4fd945(0xff),_0x4ace80),(parseInt(_0x4ace80[_0x4fd945(0x12c)])<parseInt(_0x4ace80[_0x4fd945(0x118)])||parseInt(_0x4ace80[_0x4fd945(0x121)])<parseInt(_0x4ace80[_0x4fd945(0x118)])&&parseInt(_0x4ace80['sale_qty'])>parseInt(_0x4ace80[_0x4fd945(0x118)])||parseInt(_0x4ace80[_0x4fd945(0x118)])==0x0)&&_0x1275f4++;});if(_0x1275f4!=0x0)return _0x187a54['flash'](_0x144115(0xef),_0x144115(0x124)),_0x4fb4f8[_0x144115(0x126)](_0x144115(0x125));_0x1f0ffc[_0x144115(0x12f)][_0x144115(0xfb)](_0x31073a=>{var _0x3ab60e=_0x144115;const _0x3dcb87=_0x30088c[_0x3ab60e(0xe6)]['map'](_0x13a852=>{var _0x147c02=_0x3ab60e;_0x13a852['product_name']==_0x31073a[_0x147c02(0x132)]&&_0x13a852[_0x147c02(0xea)]==_0x31073a[_0x147c02(0xea)]&&_0x13a852['type']==_0x31073a[_0x147c02(0x147)]&&_0x13a852['bin']==_0x31073a['bin']&&_0x13a852[_0x147c02(0xdd)]==_0x31073a[_0x147c02(0xdd)]&&(_0x13a852[_0x147c02(0x10b)]=parseInt(_0x13a852[_0x147c02(0x10b)])+parseInt(_0x31073a[_0x147c02(0x118)]));});}),console[_0x144115(0x131)](_0x144115(0xfd),_0x30088c),await _0x30088c[_0x144115(0x13e)](),_0x1f0ffc[_0x144115(0x116)]=_0x181cc0,_0x1f0ffc[_0x144115(0x10d)]=_0x580183,_0x1f0ffc[_0x144115(0x11c)]=_0x250ecd,_0x1f0ffc['warehouse_name']=_0x39dc5c,_0x1f0ffc['return_sale']=_0x1da828,_0x1f0ffc[_0x144115(0x134)]=_0x1ff8d1,_0x1f0ffc['ToWarehouse']=_0x288cf3,_0x1f0ffc[_0x144115(0xe0)]=_0xeaed22;const _0x556664=await _0x1f0ffc[_0x144115(0x13e)]();console[_0x144115(0x131)](_0x144115(0x13c),_0x556664);const _0x12a252=await c_payment_data[_0x144115(0x14a)]({'invoice':_0x187a54['body'][_0x144115(0x116)],'reason':_0x144115(0xdc)});_0x12a252[_0x144115(0x138)]=_0x187a54[_0x144115(0xeb)][_0x144115(0x138)],_0x12a252[_0x144115(0x11c)]=_0x187a54[_0x144115(0xeb)]['date'],await _0x12a252[_0x144115(0x13e)](),_0x187a54[_0x144115(0xf5)](_0x144115(0x145),_0x144115(0xf0)),_0x4fb4f8[_0x144115(0x126)](_0x144115(0x112));}catch(_0xf7097c){console[_0x144115(0x131)](_0xf7097c),_0x4fb4f8[_0x144115(0x129)](0xc8)[_0x144115(0xf6)]({'message':_0xf7097c[_0x144115(0x10a)]});}}),router[a0_0x3063b6(0x142)](a0_0x3063b6(0x10e),auth,async(_0x59e248,_0x1123a4)=>{var _0x31911b=a0_0x3063b6;try{const _0x42123c=_0x59e248[_0x31911b(0xf7)]['id'],{invoice:_0x14c0c5,customer:_0x4eeced,payable_to_customer:_0x15220c,paid_amount:_0xa09a7f}=_0x59e248[_0x31911b(0xeb)],_0x5da021=await sales_return[_0x31911b(0x12d)](_0x42123c);console[_0x31911b(0x131)]('data',_0x5da021),console[_0x31911b(0x131)](_0x15220c),console['log'](_0xa09a7f);var _0x52674e=_0x15220c-_0xa09a7f;console['log'](_0x31911b(0x139),_0x52674e),_0x5da021[_0x31911b(0x104)]=parseFloat(_0xa09a7f)+parseFloat(_0x5da021[_0x31911b(0x104)]),_0x5da021[_0x31911b(0xfe)]=_0x52674e,console['log'](_0x5da021);const _0x1449a7=await _0x5da021['save']();console[_0x31911b(0x131)](0x1b207);const _0x2eb6a4=await c_payment_data[_0x31911b(0x14a)]({'invoice':_0x59e248[_0x31911b(0xeb)][_0x31911b(0x116)],'reason':_0x31911b(0xdc)});console[_0x31911b(0x131)](_0x31911b(0xf4),_0x2eb6a4),_0x2eb6a4['amount']=_0x52674e,await _0x2eb6a4[_0x31911b(0x13e)]();let _0x501baf=new Date(),_0x3cae8c=('0'+_0x501baf['getDate']())[_0x31911b(0xe1)](-0x2),_0x35854d=('0'+(_0x501baf[_0x31911b(0x115)]()+0x1))['slice'](-0x2),_0x3db38c=_0x501baf['getFullYear'](),_0x3fb7b5=_0x3db38c+'-'+_0x35854d+'-'+_0x3cae8c;const _0x5d091d=new customer_payment({'invoice':_0x14c0c5,'date':_0x3db38c+'-'+_0x35854d+'-'+_0x3cae8c,'customer':_0x4eeced,'reason':_0x31911b(0x14b),'amount':_0xa09a7f}),_0x4b2455=await _0x5d091d[_0x31911b(0x13e)]();_0x59e248[_0x31911b(0xf5)](_0x31911b(0x145),_0x31911b(0xe5)),_0x1123a4[_0x31911b(0x126)](_0x31911b(0x112));}catch(_0x418905){console['log'](_0x418905);}}),router[a0_0x3063b6(0x108)](a0_0x3063b6(0x143),auth,async(_0x5d19a3,_0xd1e258)=>{var _0xdfc85e=a0_0x3063b6;try{const {username:_0x102f7a,email:_0x1fdd0a,role:_0x5b0872}=_0x5d19a3[_0xdfc85e(0x144)],_0xddcfa=_0x5d19a3[_0xdfc85e(0x144)],_0x30d015=await profile['findOne']({'email':_0xddcfa['email']}),_0x4dbc11=await master_shop[_0xdfc85e(0xe3)]();console['log'](_0xdfc85e(0xe7),_0x4dbc11);const _0x1f358a=_0x5d19a3[_0xdfc85e(0xf7)]['id'],_0x36c27f=await sales_return[_0xdfc85e(0x12d)](_0x1f358a);console[_0xdfc85e(0x131)](_0x36c27f);const _0x3f7f2e=await customer[_0xdfc85e(0x14a)]({'name':_0x36c27f[_0xdfc85e(0x10d)]});console[_0xdfc85e(0x131)](_0x3f7f2e);if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]=='English\x20(US)'){var _0x33150f=users[_0xdfc85e(0x136)];console[_0xdfc85e(0x131)](_0x33150f);}else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0x13d))var _0x33150f=users[_0xdfc85e(0x13d)];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0x140))var _0x33150f=users['German'];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0x149))var _0x33150f=users[_0xdfc85e(0x149)];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0x11f))var _0x33150f=users[_0xdfc85e(0x11f)];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0x109))var _0x33150f=users['Portuguese'];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]=='Chinese')var _0x33150f=users[_0xdfc85e(0xde)];else{if(_0x4dbc11[0x0][_0xdfc85e(0x12e)]==_0xdfc85e(0xee))var _0x33150f=users[_0xdfc85e(0x133)];}}}}}}}_0xd1e258['render'](_0xdfc85e(0xed),{'success':_0x5d19a3[_0xdfc85e(0xf5)](_0xdfc85e(0x145)),'errors':_0x5d19a3[_0xdfc85e(0xf5)](_0xdfc85e(0xef)),'role':_0xddcfa,'profile':_0x30d015,'master_shop':_0x4dbc11,'customers':_0x3f7f2e,'sales':_0x36c27f,'language':_0x33150f});}catch(_0x1ee7e7){console[_0xdfc85e(0x131)](_0x1ee7e7);}}),module['exports']=router;