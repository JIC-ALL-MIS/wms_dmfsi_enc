function a0_0x5b5a(_0x360edb,_0x41cdba){const _0x2b309d=a0_0x2b30();return a0_0x5b5a=function(_0x5b5a5a,_0x2f9cfe){_0x5b5a5a=_0x5b5a5a-0xe7;let _0x48291e=_0x2b309d[_0x5b5a5a];return _0x48291e;},a0_0x5b5a(_0x360edb,_0x41cdba);}const a0_0x17205b=a0_0x5b5a;function a0_0x2b30(){const _0x515f29=['data_sales','../../models/all_models','_id','render','$name','474942cyGAtt','$product.product_code','$product_details.product_name','1463520VLpOye','$sale_product','$product._id','monitor','table\x20page','$sale_product.quantity','/join','$product_details._id','push','$product.id_transaction_id','Router','get','all','$product_details','flash','$product_details.product_stock','1268575AlrACd','\x20documents\x20updated','$sale_product.id_transaction_from','valueOf','/warehouse_monitor','status','$warehouse_name','warehouse_data','$sale_product.product_code','1102977vTlAaJ','map','$product.id_transaction_from','$$invoice','data_adjustment','log','$room','$product.new_adjust_qty','$product.room_names','8869721ghEYkf','aggregate','exports','$product.invoice','length','errors','json','message','$sale_product._id','invoice','195899eRDbzW','$sale_product.invoice','warehouses','1003996fQdUIR','data_transfer','$invoice','$product.product_name'];a0_0x2b30=function(){return _0x515f29;};return a0_0x2b30();}(function(_0x5dffb8,_0x22e656){const _0x3e79e2=a0_0x5b5a,_0x50febe=_0x5dffb8();while(!![]){try{const _0x3ee289=-parseInt(_0x3e79e2(0x119))/0x1+-parseInt(_0x3e79e2(0xea))/0x2+-parseInt(_0x3e79e2(0x106))/0x3+-parseInt(_0x3e79e2(0x11c))/0x4+-parseInt(_0x3e79e2(0xfd))/0x5+parseInt(_0x3e79e2(0xed))/0x6+parseInt(_0x3e79e2(0x10f))/0x7;if(_0x3ee289===_0x22e656)break;else _0x50febe['push'](_0x50febe['shift']());}catch(_0x5dd5e1){_0x50febe['push'](_0x50febe['shift']());}}}(a0_0x2b30,0x321e0));const express=require('express'),app=express(),router=express[a0_0x17205b(0xf7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x17205b(0x121));router['get']('/negative',async(_0xee5ef6,_0x26683c)=>{const _0x3e1e22=a0_0x17205b;try{const _0x17ece5=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x26683c[_0x3e1e22(0x115)]({'status':_0x17ece5['modifiedCount']+_0x3e1e22(0xfe)});}catch(_0x29d078){console[_0x3e1e22(0x10b)]('table\x20page',_0x29d078),_0x26683c['status'](0xc8)[_0x3e1e22(0x115)]({'message':_0x29d078[_0x3e1e22(0x116)]});}}),router[a0_0x17205b(0xf8)]('/checking',async(_0xbf3f0a,_0x6c9aed)=>{const _0xbd871f=a0_0x17205b;try{const _0x19b2e4=await warehouse[_0xbd871f(0x110)]([{'$unwind':_0xbd871f(0xfa)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0xbd871f(0xe9),'room':_0xbd871f(0x10c)},'products':{'$push':'$product_details'}}}]);_0x6c9aed['json'](_0x19b2e4);}catch(_0x99981e){console['log'](_0xbd871f(0xf1),_0x99981e),_0x6c9aed[_0xbd871f(0x102)](0xc8)[_0xbd871f(0x115)]({'message':_0x99981e[_0xbd871f(0x116)]});}}),router[a0_0x17205b(0xf8)](a0_0x17205b(0x101),async(_0x8f11f4,_0x30b596)=>{const _0x3f51b9=a0_0x17205b;_0x30b596[_0x3f51b9(0xe8)](_0x3f51b9(0xf0),{'success':_0x8f11f4[_0x3f51b9(0xfb)]('success'),'errors':_0x8f11f4[_0x3f51b9(0xfb)](_0x3f51b9(0x114))});}),router[a0_0x17205b(0xf8)](a0_0x17205b(0xf3),async(_0x5ea1d6,_0x690bad)=>{const _0x5d86f4=a0_0x17205b;var _0x4b38d3=await purchases[_0x5d86f4(0x110)]([{'$lookup':{'from':_0x5d86f4(0x11b),'let':{'invoice':_0x5d86f4(0x11e)},'pipeline':[{'$unwind':_0x5d86f4(0xfa)},{'$match':{'$expr':{'$eq':[_0x5d86f4(0x109),'$product_details.invoice']}}},{'$project':{'_id':_0x5d86f4(0xf4),'product_name':_0x5d86f4(0xec),'product_code':'$product_details.product_code','quantity_available':_0x5d86f4(0xfc),'warehouse_name':_0x5d86f4(0xe9),'warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':_0x5d86f4(0x104)}}]);_0x4b38d3[_0x5d86f4(0x120)]={},await Promise[_0x5d86f4(0xf9)](_0x4b38d3['map'](async _0x12f39b=>{const _0x493259=_0x5d86f4;_0x4b38d3[_0x493259(0x120)][_0x12f39b[_0x493259(0x118)]]=[],await Promise[_0x493259(0xf9)](_0x12f39b['warehouse_data']['map'](async _0x3abca6=>{const _0x1effce=_0x493259,_0x48e604=await sales[_0x1effce(0x110)]([{'$unwind':_0x1effce(0xee)},{'$match':{'sale_product.id_transaction_from':_0x3abca6[_0x1effce(0xe7)][_0x1effce(0x100)](),'sale_product.invoice':_0x3abca6[_0x1effce(0x118)]}},{'$project':{'_id':_0x1effce(0x117),'product_name':'$sale_product.product_name','product_code':_0x1effce(0x105),'quantity_available':_0x1effce(0xf2),'warehouse_name':_0x1effce(0x103),'warehouse_room':'$sale_product.room_name','product_invoice':_0x1effce(0x11a),'invoice':_0x1effce(0x11e),'id_transaction_from':_0x1effce(0xff)}}]);_0x48e604[_0x1effce(0x113)]>0x0&&_0x4b38d3['data_sales'][_0x12f39b[_0x1effce(0x118)]][_0x1effce(0xf5)](..._0x48e604);}));})),_0x4b38d3[_0x5d86f4(0x120)]=_0x4b38d3[_0x5d86f4(0x120)],_0x4b38d3[_0x5d86f4(0x10a)]={},await Promise['all'](_0x4b38d3[_0x5d86f4(0x107)](async _0x5ae39a=>{const _0x116195=_0x5d86f4;_0x4b38d3[_0x116195(0x10a)][_0x5ae39a['invoice']]=[],await Promise[_0x116195(0xf9)](_0x5ae39a[_0x116195(0x104)][_0x116195(0x107)](async _0x599c42=>{const _0x37f704=_0x116195,_0x48d3f5=await adjustment[_0x37f704(0x110)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x599c42[_0x37f704(0xe7)][_0x37f704(0x100)](),'product.invoice':_0x599c42['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x37f704(0x11f),'product_code':_0x37f704(0xeb),'quantity_available':_0x37f704(0x10d),'warehouse_name':'$warehouse_name','warehouse_room':_0x37f704(0x10e),'product_invoice':_0x37f704(0x112),'invoice':_0x37f704(0x11e),'id_transaction_from':_0x37f704(0x108)}}]);_0x48d3f5[_0x37f704(0x113)]>0x0&&_0x4b38d3[_0x37f704(0x10a)][_0x5ae39a[_0x37f704(0x118)]][_0x37f704(0xf5)](..._0x48d3f5);}));})),_0x4b38d3['data_transfer']={},await Promise['all'](_0x4b38d3['map'](async _0x30c972=>{const _0x3a9b6f=_0x5d86f4;_0x4b38d3[_0x3a9b6f(0x11d)][_0x30c972[_0x3a9b6f(0x118)]]=[],await Promise[_0x3a9b6f(0xf9)](_0x30c972[_0x3a9b6f(0x104)][_0x3a9b6f(0x107)](async _0x3dc2fc=>{const _0x394067=_0x3a9b6f,_0x553e92=await transfers[_0x394067(0x110)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x3dc2fc[_0x394067(0xe7)][_0x394067(0x100)](),'product.To_invoice':_0x3dc2fc[_0x394067(0x118)]}},{'$project':{'_id':_0x394067(0xef),'product_name':_0x394067(0x11f),'product_code':_0x394067(0xeb),'quantity_available':'$product.to_quantity','warehouse_name':'$to_warehouse','warehouse_room':_0x394067(0x10e),'product_invoice':'$product.to_room_name','invoice':_0x394067(0x11e),'id_transaction_id':_0x394067(0xf6)}}]);console['log'](_0x553e92),_0x553e92[_0x394067(0x113)]>0x0&&_0x4b38d3[_0x394067(0x11d)][_0x30c972[_0x394067(0x118)]][_0x394067(0xf5)](..._0x553e92);}));})),_0x690bad[_0x5d86f4(0x115)]({'purchases_warehouse':_0x4b38d3,'data_sales':_0x4b38d3[_0x5d86f4(0x120)],'data_adjustment':_0x4b38d3[_0x5d86f4(0x10a)],'data_transfer':_0x4b38d3[_0x5d86f4(0x11d)]});}),module[a0_0x17205b(0x111)]=router;