function a0_0xf011(_0x42a781,_0x4a4709){const _0x5d6334=a0_0x5d63();return a0_0xf011=function(_0xf011c,_0x57da40){_0xf011c=_0xf011c-0x9d;let _0x2ea5c0=_0x5d6334[_0xf011c];return _0x2ea5c0;},a0_0xf011(_0x42a781,_0x4a4709);}function a0_0x5d63(){const _0x5c3c97=['$product._id','length','express','$product.product_name','status','1175626dQCPsG','exports','8333094ECVmfg','8ShCZGr','aggregate','log','$product_details.product_name','push','$sale_product.product_code','invoice','data_adjustment','3MXBSoX','valueOf','success','$product.room_names','$product_details._id','$invoice','$product','_id','data_sales','$product.to_quantity','$product_details.invoice','$product.invoice','flash','$$invoice','/join','$product.id_transaction_from','data_transfer','warehouse_data','$product.new_adjust_qty','json','table\x20page','\x20documents\x20updated','$product.to_room_name','50qBCSbn','41523770RSCCCa','render','9212832JTHPry','$room','12102309mioLVX','$name','212756CJtoWO','modifiedCount','$to_warehouse','$sale_product.invoice','get','warehouses','$warehouse_name','message','14800005047429','958739ZJTWnM','$sale_product.quantity','$product_details','updateMany','INCF-52068316','$sale_product.room_name','map','$sale_product._id','$product.id_transaction_id','all','/warehouse_monitor'];a0_0x5d63=function(){return _0x5c3c97;};return a0_0x5d63();}const a0_0x211fe9=a0_0xf011;(function(_0x2494d7,_0x54a71e){const _0x48a91f=a0_0xf011,_0x2bbaae=_0x2494d7();while(!![]){try{const _0x7c2a10=parseInt(_0x48a91f(0xc3))/0x1+-parseInt(_0x48a91f(0xd3))/0x2*(parseInt(_0x48a91f(0xde))/0x3)+-parseInt(_0x48a91f(0xba))/0x4*(-parseInt(_0x48a91f(0xb3))/0x5)+parseInt(_0x48a91f(0xb6))/0x6+parseInt(_0x48a91f(0xd5))/0x7+parseInt(_0x48a91f(0xd6))/0x8*(parseInt(_0x48a91f(0xb8))/0x9)+-parseInt(_0x48a91f(0xb4))/0xa;if(_0x7c2a10===_0x54a71e)break;else _0x2bbaae['push'](_0x2bbaae['shift']());}catch(_0x1e2a6b){_0x2bbaae['push'](_0x2bbaae['shift']());}}}(a0_0x5d63,0xc873e));const express=require(a0_0x211fe9(0xd0)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x211fe9(0xbe)]('/negative',async(_0x1675f6,_0x3372c5)=>{const _0xa84c56=a0_0x211fe9;try{const _0x27b4f8=await warehouse[_0xa84c56(0xc6)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x3372c5[_0xa84c56(0xaf)]({'status':_0x27b4f8[_0xa84c56(0xbb)]+_0xa84c56(0xb1)});}catch(_0x19018f){console['log'](_0xa84c56(0xb0),_0x19018f),_0x3372c5[_0xa84c56(0xd2)](0xc8)[_0xa84c56(0xaf)]({'message':_0x19018f['message']});}}),router['get']('/checking',async(_0x5349de,_0x381a55)=>{const _0x38f0c4=a0_0x211fe9;try{const _0x440e32=await warehouse[_0x38f0c4(0xd7)]([{'$unwind':_0x38f0c4(0xc5)},{'$match':{'product_details.invoice':_0x38f0c4(0xc7),'product_details.primary_code':_0x38f0c4(0xc2)}},{'$group':{'_id':{'name':_0x38f0c4(0xb9),'room':'$room'},'products':{'$push':_0x38f0c4(0xc5)}}}]);_0x381a55[_0x38f0c4(0xaf)](_0x440e32);}catch(_0x3eb412){console[_0x38f0c4(0xd8)](_0x38f0c4(0xb0),_0x3eb412),_0x381a55[_0x38f0c4(0xd2)](0xc8)[_0x38f0c4(0xaf)]({'message':_0x3eb412[_0x38f0c4(0xc1)]});}}),router[a0_0x211fe9(0xbe)](a0_0x211fe9(0xcd),async(_0x162608,_0x2b62fc)=>{const _0x2582d4=a0_0x211fe9;_0x2b62fc[_0x2582d4(0xb5)]('monitor',{'success':_0x162608[_0x2582d4(0xa8)](_0x2582d4(0x9e)),'errors':_0x162608['flash']('errors')});}),router[a0_0x211fe9(0xbe)](a0_0x211fe9(0xaa),async(_0x501f0e,_0x1d5810)=>{const _0x50471f=a0_0x211fe9;var _0x28d573=await purchases[_0x50471f(0xd7)]([{'$lookup':{'from':_0x50471f(0xbf),'let':{'invoice':_0x50471f(0xa1)},'pipeline':[{'$unwind':_0x50471f(0xc5)},{'$match':{'$expr':{'$eq':[_0x50471f(0xa9),_0x50471f(0xa6)]}}},{'$project':{'_id':_0x50471f(0xa0),'product_name':_0x50471f(0xd9),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x50471f(0xb9),'warehouse_room':_0x50471f(0xb7),'invoice':'$product_details.invoice'}}],'as':_0x50471f(0xad)}}]);_0x28d573[_0x50471f(0xa4)]={},await Promise['all'](_0x28d573[_0x50471f(0xc9)](async _0x35b31d=>{const _0x26c646=_0x50471f;_0x28d573['data_sales'][_0x35b31d[_0x26c646(0xdc)]]=[],await Promise[_0x26c646(0xcc)](_0x35b31d[_0x26c646(0xad)][_0x26c646(0xc9)](async _0x44f92a=>{const _0x5924cf=_0x26c646,_0x403927=await sales[_0x5924cf(0xd7)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x44f92a[_0x5924cf(0xa3)]['valueOf'](),'sale_product.invoice':_0x44f92a[_0x5924cf(0xdc)]}},{'$project':{'_id':_0x5924cf(0xca),'product_name':'$sale_product.product_name','product_code':_0x5924cf(0xdb),'quantity_available':_0x5924cf(0xc4),'warehouse_name':'$warehouse_name','warehouse_room':_0x5924cf(0xc8),'product_invoice':_0x5924cf(0xbd),'invoice':_0x5924cf(0xa1),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x403927['length']>0x0&&_0x28d573['data_sales'][_0x35b31d[_0x5924cf(0xdc)]][_0x5924cf(0xda)](..._0x403927);}));})),_0x28d573[_0x50471f(0xa4)]=_0x28d573[_0x50471f(0xa4)],_0x28d573['data_adjustment']={},await Promise[_0x50471f(0xcc)](_0x28d573[_0x50471f(0xc9)](async _0x4764fc=>{const _0x4343e8=_0x50471f;_0x28d573[_0x4343e8(0xdd)][_0x4764fc[_0x4343e8(0xdc)]]=[],await Promise[_0x4343e8(0xcc)](_0x4764fc['warehouse_data'][_0x4343e8(0xc9)](async _0x5064ef=>{const _0x2782e9=_0x4343e8,_0x76ce8b=await adjustment['aggregate']([{'$unwind':_0x2782e9(0xa2)},{'$match':{'product.id_transaction_from':_0x5064ef[_0x2782e9(0xa3)]['valueOf'](),'product.invoice':_0x5064ef[_0x2782e9(0xdc)]}},{'$project':{'_id':'$product._id','product_name':_0x2782e9(0xd1),'product_code':'$product.product_code','quantity_available':_0x2782e9(0xae),'warehouse_name':_0x2782e9(0xc0),'warehouse_room':'$product.room_names','product_invoice':_0x2782e9(0xa7),'invoice':'$invoice','id_transaction_from':_0x2782e9(0xab)}}]);_0x76ce8b[_0x2782e9(0xcf)]>0x0&&_0x28d573[_0x2782e9(0xdd)][_0x4764fc[_0x2782e9(0xdc)]][_0x2782e9(0xda)](..._0x76ce8b);}));})),_0x28d573[_0x50471f(0xac)]={},await Promise[_0x50471f(0xcc)](_0x28d573['map'](async _0x4f820b=>{const _0x7b6fdc=_0x50471f;_0x28d573['data_transfer'][_0x4f820b[_0x7b6fdc(0xdc)]]=[],await Promise[_0x7b6fdc(0xcc)](_0x4f820b[_0x7b6fdc(0xad)]['map'](async _0x57a312=>{const _0x30463f=_0x7b6fdc,_0x37f93a=await transfers['aggregate']([{'$unwind':_0x30463f(0xa2)},{'$match':{'product.id_transaction_id':_0x57a312['_id'][_0x30463f(0x9d)](),'product.To_invoice':_0x57a312[_0x30463f(0xdc)]}},{'$project':{'_id':_0x30463f(0xce),'product_name':_0x30463f(0xd1),'product_code':'$product.product_code','quantity_available':_0x30463f(0xa5),'warehouse_name':_0x30463f(0xbc),'warehouse_room':_0x30463f(0x9f),'product_invoice':_0x30463f(0xb2),'invoice':_0x30463f(0xa1),'id_transaction_id':_0x30463f(0xcb)}}]);console[_0x30463f(0xd8)](_0x37f93a),_0x37f93a['length']>0x0&&_0x28d573['data_transfer'][_0x4f820b[_0x30463f(0xdc)]]['push'](..._0x37f93a);}));})),_0x1d5810[_0x50471f(0xaf)]({'purchases_warehouse':_0x28d573,'data_sales':_0x28d573[_0x50471f(0xa4)],'data_adjustment':_0x28d573[_0x50471f(0xdd)],'data_transfer':_0x28d573['data_transfer']});}),module[a0_0x211fe9(0xd4)]=router;