function a0_0x51fb(_0x4f41f6,_0x1ebd35){const _0x1f4e6c=a0_0x1f4e();return a0_0x51fb=function(_0x51fbec,_0x3b25cf){_0x51fbec=_0x51fbec-0x14d;let _0x4baf3f=_0x1f4e6c[_0x51fbec];return _0x4baf3f;},a0_0x51fb(_0x4f41f6,_0x1ebd35);}const a0_0x456410=a0_0x51fb;(function(_0x33d4b9,_0x23fbc0){const _0x1e8551=a0_0x51fb,_0x38ac8a=_0x33d4b9();while(!![]){try{const _0x41e786=parseInt(_0x1e8551(0x163))/0x1*(-parseInt(_0x1e8551(0x15d))/0x2)+parseInt(_0x1e8551(0x161))/0x3+parseInt(_0x1e8551(0x15a))/0x4+-parseInt(_0x1e8551(0x173))/0x5+-parseInt(_0x1e8551(0x154))/0x6+parseInt(_0x1e8551(0x16d))/0x7+parseInt(_0x1e8551(0x16e))/0x8;if(_0x41e786===_0x23fbc0)break;else _0x38ac8a['push'](_0x38ac8a['shift']());}catch(_0x9f88fc){_0x38ac8a['push'](_0x38ac8a['shift']());}}}(a0_0x1f4e,0x926f1));const express=require('express'),app=express(),router=express[a0_0x456410(0x175)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x456410(0x162)](a0_0x456410(0x15c),async(_0x2997f9,_0x494f81)=>{const _0x43014a=a0_0x456410;try{const _0x2593ad=await warehouse[_0x43014a(0x14f)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x494f81[_0x43014a(0x17a)]({'status':_0x2593ad[_0x43014a(0x15f)]+_0x43014a(0x15b)});}catch(_0x59ad88){console[_0x43014a(0x187)]('table\x20page',_0x59ad88),_0x494f81[_0x43014a(0x186)](0xc8)[_0x43014a(0x17a)]({'message':_0x59ad88[_0x43014a(0x151)]});}}),router['get']('/checking',async(_0x17cbab,_0x2aa573)=>{const _0x3dc96a=a0_0x456410;try{const _0x475e03=await warehouse[_0x3dc96a(0x171)]([{'$unwind':_0x3dc96a(0x184)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x3dc96a(0x168),'room':'$room'},'products':{'$push':_0x3dc96a(0x184)}}}]);_0x2aa573[_0x3dc96a(0x17a)](_0x475e03);}catch(_0x36f2ea){console[_0x3dc96a(0x187)](_0x3dc96a(0x188),_0x36f2ea),_0x2aa573[_0x3dc96a(0x186)](0xc8)['json']({'message':_0x36f2ea[_0x3dc96a(0x151)]});}}),router['get'](a0_0x456410(0x160),async(_0x421f03,_0x436f41)=>{const _0x53e8d8=a0_0x456410;_0x436f41[_0x53e8d8(0x180)]('monitor',{'success':_0x421f03[_0x53e8d8(0x169)](_0x53e8d8(0x157)),'errors':_0x421f03[_0x53e8d8(0x169)](_0x53e8d8(0x181))});}),router['get'](a0_0x456410(0x177),async(_0x2fae4a,_0x8f0781)=>{const _0x3527c9=a0_0x456410;var _0x347f11=await purchases['aggregate']([{'$lookup':{'from':_0x3527c9(0x189),'let':{'invoice':_0x3527c9(0x174)},'pipeline':[{'$unwind':_0x3527c9(0x184)},{'$match':{'$expr':{'$eq':[_0x3527c9(0x172),_0x3527c9(0x170)]}}},{'$project':{'_id':_0x3527c9(0x183),'product_name':_0x3527c9(0x182),'product_code':_0x3527c9(0x176),'quantity_available':'$product_details.product_stock','warehouse_name':_0x3527c9(0x168),'warehouse_room':_0x3527c9(0x152),'invoice':_0x3527c9(0x170)}}],'as':_0x3527c9(0x153)}}]);_0x347f11[_0x3527c9(0x16b)]={},await Promise[_0x3527c9(0x14e)](_0x347f11['map'](async _0x12ba6c=>{const _0x597cef=_0x3527c9;_0x347f11[_0x597cef(0x16b)][_0x12ba6c[_0x597cef(0x179)]]=[],await Promise['all'](_0x12ba6c[_0x597cef(0x153)][_0x597cef(0x164)](async _0x2b9e77=>{const _0x5ca644=_0x597cef,_0x3896e0=await sales['aggregate']([{'$unwind':_0x5ca644(0x178)},{'$match':{'sale_product.id_transaction_from':_0x2b9e77[_0x5ca644(0x18c)][_0x5ca644(0x155)](),'sale_product.invoice':_0x2b9e77[_0x5ca644(0x179)]}},{'$project':{'_id':_0x5ca644(0x17f),'product_name':_0x5ca644(0x156),'product_code':_0x5ca644(0x16a),'quantity_available':_0x5ca644(0x15e),'warehouse_name':_0x5ca644(0x17c),'warehouse_room':_0x5ca644(0x158),'product_invoice':'$sale_product.invoice','invoice':_0x5ca644(0x174),'id_transaction_from':_0x5ca644(0x18a)}}]);_0x3896e0[_0x5ca644(0x165)]>0x0&&_0x347f11['data_sales'][_0x12ba6c[_0x5ca644(0x179)]][_0x5ca644(0x17d)](..._0x3896e0);}));})),_0x347f11[_0x3527c9(0x16b)]=_0x347f11[_0x3527c9(0x16b)],_0x347f11[_0x3527c9(0x185)]={},await Promise[_0x3527c9(0x14e)](_0x347f11[_0x3527c9(0x164)](async _0x13902b=>{const _0x3d7c11=_0x3527c9;_0x347f11[_0x3d7c11(0x185)][_0x13902b['invoice']]=[],await Promise['all'](_0x13902b['warehouse_data'][_0x3d7c11(0x164)](async _0x3d68f=>{const _0x18366e=_0x3d7c11,_0x2b6bda=await adjustment['aggregate']([{'$unwind':_0x18366e(0x167)},{'$match':{'product.id_transaction_from':_0x3d68f[_0x18366e(0x18c)]['valueOf'](),'product.invoice':_0x3d68f[_0x18366e(0x179)]}},{'$project':{'_id':'$product._id','product_name':_0x18366e(0x18b),'product_code':'$product.product_code','quantity_available':_0x18366e(0x159),'warehouse_name':_0x18366e(0x17c),'warehouse_room':'$product.room_names','product_invoice':_0x18366e(0x150),'invoice':_0x18366e(0x174),'id_transaction_from':'$product.id_transaction_from'}}]);_0x2b6bda[_0x18366e(0x165)]>0x0&&_0x347f11['data_adjustment'][_0x13902b[_0x18366e(0x179)]][_0x18366e(0x17d)](..._0x2b6bda);}));})),_0x347f11[_0x3527c9(0x16f)]={},await Promise[_0x3527c9(0x14e)](_0x347f11['map'](async _0xe7c348=>{const _0x53c8b6=_0x3527c9;_0x347f11[_0x53c8b6(0x16f)][_0xe7c348['invoice']]=[],await Promise[_0x53c8b6(0x14e)](_0xe7c348['warehouse_data'][_0x53c8b6(0x164)](async _0x401583=>{const _0x25d892=_0x53c8b6,_0x2743a1=await transfers[_0x25d892(0x171)]([{'$unwind':_0x25d892(0x167)},{'$match':{'product.id_transaction_id':_0x401583[_0x25d892(0x18c)]['valueOf'](),'product.To_invoice':_0x401583[_0x25d892(0x179)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x25d892(0x166),'quantity_available':_0x25d892(0x17b),'warehouse_name':'$to_warehouse','warehouse_room':'$product.room_names','product_invoice':_0x25d892(0x17e),'invoice':_0x25d892(0x174),'id_transaction_id':_0x25d892(0x16c)}}]);console['log'](_0x2743a1),_0x2743a1['length']>0x0&&_0x347f11['data_transfer'][_0xe7c348[_0x25d892(0x179)]][_0x25d892(0x17d)](..._0x2743a1);}));})),_0x8f0781[_0x3527c9(0x17a)]({'purchases_warehouse':_0x347f11,'data_sales':_0x347f11['data_sales'],'data_adjustment':_0x347f11[_0x3527c9(0x185)],'data_transfer':_0x347f11[_0x3527c9(0x16f)]});}),module[a0_0x456410(0x14d)]=router;function a0_0x1f4e(){const _0x38b5a9=['valueOf','$sale_product.product_name','success','$sale_product.room_name','$product.new_adjust_qty','560864TKFLSK','\x20documents\x20updated','/negative','1018708WvdpbE','$sale_product.quantity','modifiedCount','/warehouse_monitor','2602431LHiTgD','get','1RQrpst','map','length','$product.product_code','$product','$name','flash','$sale_product.product_code','data_sales','$product.id_transaction_id','6653185JhfVpK','7329168JfWhUY','data_transfer','$product_details.invoice','aggregate','$$invoice','5457575yzzgyK','$invoice','Router','$product_details.product_code','/join','$sale_product','invoice','json','$product.to_quantity','$warehouse_name','push','$product.to_room_name','$sale_product._id','render','errors','$product_details.product_name','$product_details._id','$product_details','data_adjustment','status','log','table\x20page','warehouses','$sale_product.id_transaction_from','$product.product_name','_id','exports','all','updateMany','$product.invoice','message','$room','warehouse_data','4041792YHscAg'];a0_0x1f4e=function(){return _0x38b5a9;};return a0_0x1f4e();}