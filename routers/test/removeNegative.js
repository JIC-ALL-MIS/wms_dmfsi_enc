function a0_0x1990(_0x299284,_0x3877ad){const _0x3ee289=a0_0x3ee2();return a0_0x1990=function(_0x199092,_0x473899){_0x199092=_0x199092-0x18a;let _0xe69afe=_0x3ee289[_0x199092];return _0xe69afe;},a0_0x1990(_0x299284,_0x3877ad);}const a0_0x2f23d6=a0_0x1990;(function(_0x3ab9d8,_0xce70b0){const _0x2b3d37=a0_0x1990,_0x1c6bb0=_0x3ab9d8();while(!![]){try{const _0x1082ef=parseInt(_0x2b3d37(0x1af))/0x1+parseInt(_0x2b3d37(0x19a))/0x2*(parseInt(_0x2b3d37(0x193))/0x3)+parseInt(_0x2b3d37(0x1ba))/0x4+parseInt(_0x2b3d37(0x1c5))/0x5+-parseInt(_0x2b3d37(0x192))/0x6+parseInt(_0x2b3d37(0x1ab))/0x7*(-parseInt(_0x2b3d37(0x195))/0x8)+-parseInt(_0x2b3d37(0x1a6))/0x9*(-parseInt(_0x2b3d37(0x1b9))/0xa);if(_0x1082ef===_0xce70b0)break;else _0x1c6bb0['push'](_0x1c6bb0['shift']());}catch(_0x422a15){_0x1c6bb0['push'](_0x1c6bb0['shift']());}}}(a0_0x3ee2,0x371d6));const express=require(a0_0x2f23d6(0x1a0)),app=express(),router=express[a0_0x2f23d6(0x1a3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router['get'](a0_0x2f23d6(0x1a1),async(_0x411639,_0x54f209)=>{const _0x12244f=a0_0x2f23d6;try{const _0x2a6733=await warehouse[_0x12244f(0x197)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x54f209['json']({'status':_0x2a6733['modifiedCount']+_0x12244f(0x1a4)});}catch(_0x5d8ad0){console['log'](_0x12244f(0x19b),_0x5d8ad0),_0x54f209[_0x12244f(0x1a9)](0xc8)[_0x12244f(0x19f)]({'message':_0x5d8ad0[_0x12244f(0x18c)]});}}),router[a0_0x2f23d6(0x1b1)](a0_0x2f23d6(0x1b5),async(_0x22f070,_0x523778)=>{const _0x44b60f=a0_0x2f23d6;try{const _0x4b1b25=await warehouse[_0x44b60f(0x18b)]([{'$unwind':_0x44b60f(0x190)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x44b60f(0x1ae)}},{'$group':{'_id':{'name':_0x44b60f(0x1c1),'room':_0x44b60f(0x1b3)},'products':{'$push':'$product_details'}}}]);_0x523778[_0x44b60f(0x19f)](_0x4b1b25);}catch(_0xd2183b){console[_0x44b60f(0x194)](_0x44b60f(0x19b),_0xd2183b),_0x523778[_0x44b60f(0x1a9)](0xc8)[_0x44b60f(0x19f)]({'message':_0xd2183b[_0x44b60f(0x18c)]});}}),router['get'](a0_0x2f23d6(0x1be),async(_0x1f5f46,_0x1082e8)=>{const _0x39d250=a0_0x2f23d6;_0x1082e8['render'](_0x39d250(0x18a),{'success':_0x1f5f46[_0x39d250(0x1cc)]('success'),'errors':_0x1f5f46['flash'](_0x39d250(0x1c3))});}),router[a0_0x2f23d6(0x1b1)](a0_0x2f23d6(0x1c6),async(_0x58f4eb,_0x61fa87)=>{const _0x2ccfe0=a0_0x2f23d6;var _0x45430c=await purchases[_0x2ccfe0(0x18b)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x2ccfe0(0x19c)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x2ccfe0(0x1b2),_0x2ccfe0(0x1c7)]}}},{'$project':{'_id':_0x2ccfe0(0x1ad),'product_name':_0x2ccfe0(0x1a5),'product_code':_0x2ccfe0(0x1a2),'quantity_available':_0x2ccfe0(0x199),'warehouse_name':_0x2ccfe0(0x1c1),'warehouse_room':_0x2ccfe0(0x1b3),'invoice':'$product_details.invoice'}}],'as':_0x2ccfe0(0x198)}}]);_0x45430c[_0x2ccfe0(0x1bd)]={},await Promise['all'](_0x45430c[_0x2ccfe0(0x19d)](async _0x2f20db=>{const _0x473cfb=_0x2ccfe0;_0x45430c['data_sales'][_0x2f20db[_0x473cfb(0x191)]]=[],await Promise[_0x473cfb(0x1c4)](_0x2f20db[_0x473cfb(0x198)][_0x473cfb(0x19d)](async _0x87d5b9=>{const _0xba8e65=_0x473cfb,_0x1911f9=await sales[_0xba8e65(0x18b)]([{'$unwind':_0xba8e65(0x1c0)},{'$match':{'sale_product.id_transaction_from':_0x87d5b9[_0xba8e65(0x1bb)][_0xba8e65(0x1c9)](),'sale_product.invoice':_0x87d5b9[_0xba8e65(0x191)]}},{'$project':{'_id':'$sale_product._id','product_name':_0xba8e65(0x1b7),'product_code':'$sale_product.product_code','quantity_available':_0xba8e65(0x1b8),'warehouse_name':'$warehouse_name','warehouse_room':_0xba8e65(0x1cb),'product_invoice':'$sale_product.invoice','invoice':_0xba8e65(0x19c),'id_transaction_from':_0xba8e65(0x1b6)}}]);_0x1911f9[_0xba8e65(0x1b4)]>0x0&&_0x45430c['data_sales'][_0x2f20db[_0xba8e65(0x191)]][_0xba8e65(0x1a8)](..._0x1911f9);}));})),_0x45430c[_0x2ccfe0(0x1bd)]=_0x45430c[_0x2ccfe0(0x1bd)],_0x45430c[_0x2ccfe0(0x1aa)]={},await Promise[_0x2ccfe0(0x1c4)](_0x45430c[_0x2ccfe0(0x19d)](async _0x32e691=>{const _0x1c1a50=_0x2ccfe0;_0x45430c['data_adjustment'][_0x32e691['invoice']]=[],await Promise['all'](_0x32e691[_0x1c1a50(0x198)][_0x1c1a50(0x19d)](async _0x4a1814=>{const _0x5d92fe=_0x1c1a50,_0x290ffb=await adjustment[_0x5d92fe(0x18b)]([{'$unwind':_0x5d92fe(0x1bc)},{'$match':{'product.id_transaction_from':_0x4a1814['_id'][_0x5d92fe(0x1c9)](),'product.invoice':_0x4a1814[_0x5d92fe(0x191)]}},{'$project':{'_id':_0x5d92fe(0x18d),'product_name':_0x5d92fe(0x196),'product_code':_0x5d92fe(0x18f),'quantity_available':_0x5d92fe(0x1c2),'warehouse_name':_0x5d92fe(0x1b0),'warehouse_room':'$product.room_names','product_invoice':_0x5d92fe(0x1c8),'invoice':_0x5d92fe(0x19c),'id_transaction_from':'$product.id_transaction_from'}}]);_0x290ffb[_0x5d92fe(0x1b4)]>0x0&&_0x45430c[_0x5d92fe(0x1aa)][_0x32e691[_0x5d92fe(0x191)]]['push'](..._0x290ffb);}));})),_0x45430c[_0x2ccfe0(0x19e)]={},await Promise[_0x2ccfe0(0x1c4)](_0x45430c[_0x2ccfe0(0x19d)](async _0x2ace33=>{const _0x584e03=_0x2ccfe0;_0x45430c['data_transfer'][_0x2ace33['invoice']]=[],await Promise[_0x584e03(0x1c4)](_0x2ace33[_0x584e03(0x198)]['map'](async _0x265524=>{const _0x81afa9=_0x584e03,_0x43e709=await transfers[_0x81afa9(0x18b)]([{'$unwind':_0x81afa9(0x1bc)},{'$match':{'product.id_transaction_id':_0x265524['_id'][_0x81afa9(0x1c9)](),'product.To_invoice':_0x265524[_0x81afa9(0x191)]}},{'$project':{'_id':_0x81afa9(0x18d),'product_name':_0x81afa9(0x196),'product_code':_0x81afa9(0x18f),'quantity_available':_0x81afa9(0x1ac),'warehouse_name':_0x81afa9(0x1ca),'warehouse_room':_0x81afa9(0x1bf),'product_invoice':_0x81afa9(0x18e),'invoice':'$invoice','id_transaction_id':_0x81afa9(0x1a7)}}]);console['log'](_0x43e709),_0x43e709[_0x81afa9(0x1b4)]>0x0&&_0x45430c[_0x81afa9(0x19e)][_0x2ace33[_0x81afa9(0x191)]]['push'](..._0x43e709);}));})),_0x61fa87[_0x2ccfe0(0x19f)]({'purchases_warehouse':_0x45430c,'data_sales':_0x45430c[_0x2ccfe0(0x1bd)],'data_adjustment':_0x45430c[_0x2ccfe0(0x1aa)],'data_transfer':_0x45430c[_0x2ccfe0(0x19e)]});}),module['exports']=router;function a0_0x3ee2(){const _0x4ad705=['$product.id_transaction_id','push','status','data_adjustment','7redbjc','$product.to_quantity','$product_details._id','14800005047429','388190ibVBLB','$warehouse_name','get','$$invoice','$room','length','/checking','$sale_product.id_transaction_from','$sale_product.product_name','$sale_product.quantity','521210rLqvjp','246840eYxvNR','_id','$product','data_sales','/warehouse_monitor','$product.room_names','$sale_product','$name','$product.new_adjust_qty','errors','all','422020clZEdm','/join','$product_details.invoice','$product.invoice','valueOf','$to_warehouse','$sale_product.room_name','flash','monitor','aggregate','message','$product._id','$product.to_room_name','$product.product_code','$product_details','invoice','1112004UflVgH','2649vLiCAc','log','2469392JNuGGE','$product.product_name','updateMany','warehouse_data','$product_details.product_stock','302YxiPzr','table\x20page','$invoice','map','data_transfer','json','express','/negative','$product_details.product_code','Router','\x20documents\x20updated','$product_details.product_name','9hKdWLJ'];a0_0x3ee2=function(){return _0x4ad705;};return a0_0x3ee2();}