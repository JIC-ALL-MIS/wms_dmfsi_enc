function a0_0x26ec(){const _0x255955=['7112367fGfRyZ','$sale_product.product_name','aggregate','$sale_product.quantity','$product_details','$product.product_name','$product_details._id','1917500MSyngV','$product_details.product_code','_id','data_sales','data_adjustment','warehouse_data','Router','$product_details.product_name','$product.room_names','invoice','success','monitor','/join','render','$invoice','length','$room','/warehouse_monitor','$$invoice','/checking','$product.product_code','14800005047429','$name','$sale_product.room_name','map','$product.id_transaction_from','$sale_product','get','valueOf','$product','table\x20page','/negative','$sale_product.invoice','all','441732TeHXye','log','$to_warehouse','3432868wgVPLq','173279pyrIgI','push','errors','json','message','2414504qxOENe','$product_details.invoice','../../models/all_models','$product.new_adjust_qty','data_transfer','1114128NPEzki','2NjHMOQ','$product._id','flash','$sale_product.id_transaction_from','updateMany','status','7HfFMpd','modifiedCount','$warehouse_name'];a0_0x26ec=function(){return _0x255955;};return a0_0x26ec();}const a0_0x27f2c6=a0_0x3e62;function a0_0x3e62(_0x2d2a2b,_0x5baa82){const _0x26ec38=a0_0x26ec();return a0_0x3e62=function(_0x3e62cf,_0x3e491a){_0x3e62cf=_0x3e62cf-0xbc;let _0x2a5aaa=_0x26ec38[_0x3e62cf];return _0x2a5aaa;},a0_0x3e62(_0x2d2a2b,_0x5baa82);}(function(_0x1d317d,_0x18db73){const _0x22dcaf=a0_0x3e62,_0x27a54a=_0x1d317d();while(!![]){try{const _0x36cbd4=-parseInt(_0x22dcaf(0xc2))/0x1*(parseInt(_0x22dcaf(0xcd))/0x2)+-parseInt(_0x22dcaf(0xbe))/0x3+-parseInt(_0x22dcaf(0xc1))/0x4+parseInt(_0x22dcaf(0xdd))/0x5+parseInt(_0x22dcaf(0xcc))/0x6+-parseInt(_0x22dcaf(0xd3))/0x7*(-parseInt(_0x22dcaf(0xc7))/0x8)+parseInt(_0x22dcaf(0xd6))/0x9;if(_0x36cbd4===_0x18db73)break;else _0x27a54a['push'](_0x27a54a['shift']());}catch(_0x2674ad){_0x27a54a['push'](_0x27a54a['shift']());}}}(a0_0x26ec,0x75cdc));const express=require('express'),app=express(),router=express[a0_0x27f2c6(0xe3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x27f2c6(0xc9));router[a0_0x27f2c6(0xf8)](a0_0x27f2c6(0xfc),async(_0x4da80d,_0x270f6b)=>{const _0x60fafc=a0_0x27f2c6;try{const _0x5e9d1a=await warehouse[_0x60fafc(0xd1)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x270f6b[_0x60fafc(0xc5)]({'status':_0x5e9d1a[_0x60fafc(0xd4)]+'\x20documents\x20updated'});}catch(_0x16c565){console[_0x60fafc(0xbf)](_0x60fafc(0xfb),_0x16c565),_0x270f6b['status'](0xc8)[_0x60fafc(0xc5)]({'message':_0x16c565[_0x60fafc(0xc6)]});}}),router[a0_0x27f2c6(0xf8)](a0_0x27f2c6(0xf0),async(_0x3857fb,_0x1660f8)=>{const _0xd1413b=a0_0x27f2c6;try{const _0x32bc89=await warehouse[_0xd1413b(0xd8)]([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0xd1413b(0xf2)}},{'$group':{'_id':{'name':_0xd1413b(0xf3),'room':_0xd1413b(0xed)},'products':{'$push':'$product_details'}}}]);_0x1660f8['json'](_0x32bc89);}catch(_0x7c270f){console[_0xd1413b(0xbf)](_0xd1413b(0xfb),_0x7c270f),_0x1660f8[_0xd1413b(0xd2)](0xc8)['json']({'message':_0x7c270f[_0xd1413b(0xc6)]});}}),router['get'](a0_0x27f2c6(0xee),async(_0x5e3fa3,_0x269a8d)=>{const _0x21e5e8=a0_0x27f2c6;_0x269a8d[_0x21e5e8(0xea)](_0x21e5e8(0xe8),{'success':_0x5e3fa3[_0x21e5e8(0xcf)](_0x21e5e8(0xe7)),'errors':_0x5e3fa3[_0x21e5e8(0xcf)](_0x21e5e8(0xc4))});}),router['get'](a0_0x27f2c6(0xe9),async(_0x1a2038,_0x10b925)=>{const _0x1f729b=a0_0x27f2c6;var _0x32402a=await purchases[_0x1f729b(0xd8)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x1f729b(0xeb)},'pipeline':[{'$unwind':_0x1f729b(0xda)},{'$match':{'$expr':{'$eq':[_0x1f729b(0xef),_0x1f729b(0xc8)]}}},{'$project':{'_id':_0x1f729b(0xdc),'product_name':_0x1f729b(0xe4),'product_code':_0x1f729b(0xde),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':_0x1f729b(0xed),'invoice':_0x1f729b(0xc8)}}],'as':_0x1f729b(0xe2)}}]);_0x32402a['data_sales']={},await Promise[_0x1f729b(0xbd)](_0x32402a[_0x1f729b(0xf5)](async _0x165714=>{const _0xcbd3d0=_0x1f729b;_0x32402a[_0xcbd3d0(0xe0)][_0x165714[_0xcbd3d0(0xe6)]]=[],await Promise['all'](_0x165714['warehouse_data'][_0xcbd3d0(0xf5)](async _0x225cf5=>{const _0x1883e7=_0xcbd3d0,_0x265517=await sales['aggregate']([{'$unwind':_0x1883e7(0xf7)},{'$match':{'sale_product.id_transaction_from':_0x225cf5[_0x1883e7(0xdf)][_0x1883e7(0xf9)](),'sale_product.invoice':_0x225cf5['invoice']}},{'$project':{'_id':'$sale_product._id','product_name':_0x1883e7(0xd7),'product_code':'$sale_product.product_code','quantity_available':_0x1883e7(0xd9),'warehouse_name':_0x1883e7(0xd5),'warehouse_room':_0x1883e7(0xf4),'product_invoice':_0x1883e7(0xbc),'invoice':'$invoice','id_transaction_from':_0x1883e7(0xd0)}}]);_0x265517[_0x1883e7(0xec)]>0x0&&_0x32402a[_0x1883e7(0xe0)][_0x165714[_0x1883e7(0xe6)]][_0x1883e7(0xc3)](..._0x265517);}));})),_0x32402a[_0x1f729b(0xe0)]=_0x32402a['data_sales'],_0x32402a[_0x1f729b(0xe1)]={},await Promise[_0x1f729b(0xbd)](_0x32402a[_0x1f729b(0xf5)](async _0x2738f5=>{const _0x3a2a14=_0x1f729b;_0x32402a['data_adjustment'][_0x2738f5[_0x3a2a14(0xe6)]]=[],await Promise[_0x3a2a14(0xbd)](_0x2738f5[_0x3a2a14(0xe2)][_0x3a2a14(0xf5)](async _0x3a6dc0=>{const _0x1d2fc7=_0x3a2a14,_0x1f9d6d=await adjustment[_0x1d2fc7(0xd8)]([{'$unwind':_0x1d2fc7(0xfa)},{'$match':{'product.id_transaction_from':_0x3a6dc0[_0x1d2fc7(0xdf)][_0x1d2fc7(0xf9)](),'product.invoice':_0x3a6dc0[_0x1d2fc7(0xe6)]}},{'$project':{'_id':_0x1d2fc7(0xce),'product_name':_0x1d2fc7(0xdb),'product_code':_0x1d2fc7(0xf1),'quantity_available':_0x1d2fc7(0xca),'warehouse_name':_0x1d2fc7(0xd5),'warehouse_room':_0x1d2fc7(0xe5),'product_invoice':'$product.invoice','invoice':_0x1d2fc7(0xeb),'id_transaction_from':_0x1d2fc7(0xf6)}}]);_0x1f9d6d[_0x1d2fc7(0xec)]>0x0&&_0x32402a['data_adjustment'][_0x2738f5['invoice']][_0x1d2fc7(0xc3)](..._0x1f9d6d);}));})),_0x32402a[_0x1f729b(0xcb)]={},await Promise[_0x1f729b(0xbd)](_0x32402a[_0x1f729b(0xf5)](async _0x495ccc=>{const _0x91d800=_0x1f729b;_0x32402a['data_transfer'][_0x495ccc[_0x91d800(0xe6)]]=[],await Promise[_0x91d800(0xbd)](_0x495ccc[_0x91d800(0xe2)][_0x91d800(0xf5)](async _0x42f640=>{const _0x116843=_0x91d800,_0x11b46b=await transfers[_0x116843(0xd8)]([{'$unwind':_0x116843(0xfa)},{'$match':{'product.id_transaction_id':_0x42f640['_id'][_0x116843(0xf9)](),'product.To_invoice':_0x42f640[_0x116843(0xe6)]}},{'$project':{'_id':_0x116843(0xce),'product_name':_0x116843(0xdb),'product_code':_0x116843(0xf1),'quantity_available':'$product.to_quantity','warehouse_name':_0x116843(0xc0),'warehouse_room':_0x116843(0xe5),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_id':'$product.id_transaction_id'}}]);console[_0x116843(0xbf)](_0x11b46b),_0x11b46b['length']>0x0&&_0x32402a[_0x116843(0xcb)][_0x495ccc['invoice']]['push'](..._0x11b46b);}));})),_0x10b925[_0x1f729b(0xc5)]({'purchases_warehouse':_0x32402a,'data_sales':_0x32402a[_0x1f729b(0xe0)],'data_adjustment':_0x32402a['data_adjustment'],'data_transfer':_0x32402a[_0x1f729b(0xcb)]});}),module['exports']=router;