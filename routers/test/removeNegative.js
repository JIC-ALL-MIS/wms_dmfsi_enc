function a0_0x5bd3(_0x253cd1,_0x4c8585){const _0x166f31=a0_0x166f();return a0_0x5bd3=function(_0x5bd36d,_0x3af337){_0x5bd36d=_0x5bd36d-0x119;let _0x102f5e=_0x166f31[_0x5bd36d];return _0x102f5e;},a0_0x5bd3(_0x253cd1,_0x4c8585);}const a0_0x360337=a0_0x5bd3;function a0_0x166f(){const _0x33aabc=['modifiedCount','$sale_product._id','$product.id_transaction_from','21SWbBCT','42848FKKDeP','$name','updateMany','status','$product_details._id','Router','warehouse_data','valueOf','$$invoice','$room','/negative','$warehouse_name','$product.id_transaction_id','$product.new_adjust_qty','data_adjustment','$sale_product.room_name','express','2WhVoQF','render','warehouses','/warehouse_monitor','table\x20page','data_sales','6660zbWBoF','log','$sale_product','$product.room_names','4193450MAYAel','$sale_product.id_transaction_from','map','_id','$to_warehouse','flash','/join','success','$product','../../models/all_models','$sale_product.product_code','/checking','$product.product_name','aggregate','$product.product_code','$product._id','$product_details.invoice','$product_details','message','$invoice','$product_details.product_stock','invoice','3024oIlKEG','$product.to_quantity','json','monitor','5914952kqcXPv','2349078zRRhtz','$product.to_room_name','$sale_product.quantity','93FbXFLU','get','56771rrKBuf','9860YGdfpZ','length','data_transfer','errors','push','961777bYbjlg','all'];a0_0x166f=function(){return _0x33aabc;};return a0_0x166f();}(function(_0x3e5bd8,_0x150722){const _0x4d963c=a0_0x5bd3,_0x470914=_0x3e5bd8();while(!![]){try{const _0x2a3ec5=parseInt(_0x4d963c(0x13e))/0x1*(-parseInt(_0x4d963c(0x155))/0x2)+-parseInt(_0x4d963c(0x136))/0x3*(parseInt(_0x4d963c(0x144))/0x4)+-parseInt(_0x4d963c(0x15f))/0x5+parseInt(_0x4d963c(0x133))/0x6*(-parseInt(_0x4d963c(0x143))/0x7)+parseInt(_0x4d963c(0x132))/0x8+-parseInt(_0x4d963c(0x12e))/0x9*(-parseInt(_0x4d963c(0x139))/0xa)+-parseInt(_0x4d963c(0x138))/0xb*(-parseInt(_0x4d963c(0x15b))/0xc);if(_0x2a3ec5===_0x150722)break;else _0x470914['push'](_0x470914['shift']());}catch(_0x48ccdd){_0x470914['push'](_0x470914['shift']());}}}(a0_0x166f,0x994e6));const express=require(a0_0x360337(0x154)),app=express(),router=express[a0_0x360337(0x149)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x360337(0x121));router[a0_0x360337(0x137)](a0_0x360337(0x14e),async(_0x63880e,_0x2c85c2)=>{const _0x41c8f2=a0_0x360337;try{const _0x2a18e1=await warehouse[_0x41c8f2(0x146)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2c85c2['json']({'status':_0x2a18e1[_0x41c8f2(0x140)]+'\x20documents\x20updated'});}catch(_0x1a5d75){console[_0x41c8f2(0x15c)](_0x41c8f2(0x159),_0x1a5d75),_0x2c85c2[_0x41c8f2(0x147)](0xc8)[_0x41c8f2(0x130)]({'message':_0x1a5d75[_0x41c8f2(0x12a)]});}}),router[a0_0x360337(0x137)](a0_0x360337(0x123),async(_0x64582c,_0x4d06d8)=>{const _0x54ab23=a0_0x360337;try{const _0x164036=await warehouse['aggregate']([{'$unwind':_0x54ab23(0x129)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x54ab23(0x145),'room':_0x54ab23(0x14d)},'products':{'$push':'$product_details'}}}]);_0x4d06d8[_0x54ab23(0x130)](_0x164036);}catch(_0x5cb4ea){console['log'](_0x54ab23(0x159),_0x5cb4ea),_0x4d06d8['status'](0xc8)['json']({'message':_0x5cb4ea[_0x54ab23(0x12a)]});}}),router[a0_0x360337(0x137)](a0_0x360337(0x158),async(_0x963547,_0x78d02c)=>{const _0x38332c=a0_0x360337;_0x78d02c[_0x38332c(0x156)](_0x38332c(0x131),{'success':_0x963547[_0x38332c(0x11d)](_0x38332c(0x11f)),'errors':_0x963547[_0x38332c(0x11d)](_0x38332c(0x13c))});}),router[a0_0x360337(0x137)](a0_0x360337(0x11e),async(_0x5688d0,_0x1836a5)=>{const _0x2f6350=a0_0x360337;var _0x48b48e=await purchases[_0x2f6350(0x125)]([{'$lookup':{'from':_0x2f6350(0x157),'let':{'invoice':_0x2f6350(0x12b)},'pipeline':[{'$unwind':_0x2f6350(0x129)},{'$match':{'$expr':{'$eq':[_0x2f6350(0x14c),_0x2f6350(0x128)]}}},{'$project':{'_id':_0x2f6350(0x148),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x2f6350(0x12c),'warehouse_name':_0x2f6350(0x145),'warehouse_room':_0x2f6350(0x14d),'invoice':_0x2f6350(0x128)}}],'as':_0x2f6350(0x14a)}}]);_0x48b48e[_0x2f6350(0x15a)]={},await Promise[_0x2f6350(0x13f)](_0x48b48e[_0x2f6350(0x11a)](async _0x1fb41c=>{const _0x4674c7=_0x2f6350;_0x48b48e[_0x4674c7(0x15a)][_0x1fb41c[_0x4674c7(0x12d)]]=[],await Promise[_0x4674c7(0x13f)](_0x1fb41c[_0x4674c7(0x14a)][_0x4674c7(0x11a)](async _0x2bb390=>{const _0x5cc0a7=_0x4674c7,_0x31334a=await sales[_0x5cc0a7(0x125)]([{'$unwind':_0x5cc0a7(0x15d)},{'$match':{'sale_product.id_transaction_from':_0x2bb390['_id']['valueOf'](),'sale_product.invoice':_0x2bb390['invoice']}},{'$project':{'_id':_0x5cc0a7(0x141),'product_name':'$sale_product.product_name','product_code':_0x5cc0a7(0x122),'quantity_available':_0x5cc0a7(0x135),'warehouse_name':_0x5cc0a7(0x14f),'warehouse_room':_0x5cc0a7(0x153),'product_invoice':'$sale_product.invoice','invoice':_0x5cc0a7(0x12b),'id_transaction_from':_0x5cc0a7(0x119)}}]);_0x31334a['length']>0x0&&_0x48b48e[_0x5cc0a7(0x15a)][_0x1fb41c['invoice']][_0x5cc0a7(0x13d)](..._0x31334a);}));})),_0x48b48e[_0x2f6350(0x15a)]=_0x48b48e[_0x2f6350(0x15a)],_0x48b48e['data_adjustment']={},await Promise[_0x2f6350(0x13f)](_0x48b48e[_0x2f6350(0x11a)](async _0x1d6e09=>{const _0x105fc8=_0x2f6350;_0x48b48e[_0x105fc8(0x152)][_0x1d6e09[_0x105fc8(0x12d)]]=[],await Promise[_0x105fc8(0x13f)](_0x1d6e09[_0x105fc8(0x14a)][_0x105fc8(0x11a)](async _0x5f3d06=>{const _0x37e22e=_0x105fc8,_0x28d58e=await adjustment[_0x37e22e(0x125)]([{'$unwind':_0x37e22e(0x120)},{'$match':{'product.id_transaction_from':_0x5f3d06[_0x37e22e(0x11b)][_0x37e22e(0x14b)](),'product.invoice':_0x5f3d06[_0x37e22e(0x12d)]}},{'$project':{'_id':_0x37e22e(0x127),'product_name':_0x37e22e(0x124),'product_code':'$product.product_code','quantity_available':_0x37e22e(0x151),'warehouse_name':'$warehouse_name','warehouse_room':_0x37e22e(0x15e),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x37e22e(0x142)}}]);_0x28d58e[_0x37e22e(0x13a)]>0x0&&_0x48b48e[_0x37e22e(0x152)][_0x1d6e09[_0x37e22e(0x12d)]][_0x37e22e(0x13d)](..._0x28d58e);}));})),_0x48b48e[_0x2f6350(0x13b)]={},await Promise[_0x2f6350(0x13f)](_0x48b48e[_0x2f6350(0x11a)](async _0x37eea0=>{const _0x914788=_0x2f6350;_0x48b48e[_0x914788(0x13b)][_0x37eea0['invoice']]=[],await Promise[_0x914788(0x13f)](_0x37eea0[_0x914788(0x14a)][_0x914788(0x11a)](async _0x10cc48=>{const _0x1553e8=_0x914788,_0x312159=await transfers[_0x1553e8(0x125)]([{'$unwind':_0x1553e8(0x120)},{'$match':{'product.id_transaction_id':_0x10cc48[_0x1553e8(0x11b)][_0x1553e8(0x14b)](),'product.To_invoice':_0x10cc48[_0x1553e8(0x12d)]}},{'$project':{'_id':_0x1553e8(0x127),'product_name':_0x1553e8(0x124),'product_code':_0x1553e8(0x126),'quantity_available':_0x1553e8(0x12f),'warehouse_name':_0x1553e8(0x11c),'warehouse_room':_0x1553e8(0x15e),'product_invoice':_0x1553e8(0x134),'invoice':'$invoice','id_transaction_id':_0x1553e8(0x150)}}]);console['log'](_0x312159),_0x312159[_0x1553e8(0x13a)]>0x0&&_0x48b48e['data_transfer'][_0x37eea0['invoice']]['push'](..._0x312159);}));})),_0x1836a5[_0x2f6350(0x130)]({'purchases_warehouse':_0x48b48e,'data_sales':_0x48b48e['data_sales'],'data_adjustment':_0x48b48e[_0x2f6350(0x152)],'data_transfer':_0x48b48e[_0x2f6350(0x13b)]});}),module['exports']=router;