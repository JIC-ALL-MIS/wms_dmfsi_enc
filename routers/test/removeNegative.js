const a0_0x326be9=a0_0x8013;(function(_0x29d495,_0x25bd2e){const _0x25249a=a0_0x8013,_0x4119b9=_0x29d495();while(!![]){try{const _0x1fece6=-parseInt(_0x25249a(0x1ef))/0x1*(-parseInt(_0x25249a(0x213))/0x2)+parseInt(_0x25249a(0x22d))/0x3*(-parseInt(_0x25249a(0x1f2))/0x4)+-parseInt(_0x25249a(0x20f))/0x5+-parseInt(_0x25249a(0x1f9))/0x6*(-parseInt(_0x25249a(0x231))/0x7)+parseInt(_0x25249a(0x208))/0x8*(-parseInt(_0x25249a(0x20b))/0x9)+-parseInt(_0x25249a(0x218))/0xa+parseInt(_0x25249a(0x219))/0xb;if(_0x1fece6===_0x25bd2e)break;else _0x4119b9['push'](_0x4119b9['shift']());}catch(_0x43054d){_0x4119b9['push'](_0x4119b9['shift']());}}}(a0_0x3a42,0x99c1e));function a0_0x8013(_0x578b28,_0xde5de1){const _0x3a4275=a0_0x3a42();return a0_0x8013=function(_0x8013c3,_0x40f2ff){_0x8013c3=_0x8013c3-0x1ed;let _0x56e52d=_0x3a4275[_0x8013c3];return _0x56e52d;},a0_0x8013(_0x578b28,_0xde5de1);}const express=require(a0_0x326be9(0x21c)),app=express(),router=express[a0_0x326be9(0x226)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x326be9(0x1ff));function a0_0x3a42(){const _0x3d2a81=['warehouse_data','render','$product_details.product_stock','$sale_product.id_transaction_from','$to_warehouse','$product.invoice','$product_details.invoice','$sale_product','48oyAfTj','$product._id','data_sales','104508jebKbl','data_adjustment','$room','$invoice','3852185VTkrNs','$product_details.product_name','$product.product_code','table\x20page','2vSpymT','$sale_product.invoice','flash','success','$product.product_name','1013600uyyuVb','5362544DAtKkW','$product_details._id','$product.id_transaction_id','express','_id','$name','errors','$sale_product.product_code','aggregate','$sale_product._id','$sale_product.quantity','get','all','Router','$product.to_room_name','exports','valueOf','modifiedCount','$product.new_adjust_qty','$product.id_transaction_from','231eXHRnx','push','updateMany','$$invoice','6857501OPblWB','warehouses','map','length','json','status','1120358mriCoX','$product_details','/negative','52792qAtSxM','message','\x20documents\x20updated','/checking','log','$product_details.product_code','data_transfer','6kesdNv','invoice','$product','monitor','$product.room_names','$warehouse_name','../../models/all_models'];a0_0x3a42=function(){return _0x3d2a81;};return a0_0x3a42();}router[a0_0x326be9(0x224)](a0_0x326be9(0x1f1),async(_0x45e126,_0x154c94)=>{const _0x30f1ba=a0_0x326be9;try{const _0x1ce2af=await warehouse[_0x30f1ba(0x22f)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x154c94['json']({'status':_0x1ce2af[_0x30f1ba(0x22a)]+_0x30f1ba(0x1f4)});}catch(_0x52d2b8){console[_0x30f1ba(0x1f6)](_0x30f1ba(0x212),_0x52d2b8),_0x154c94['status'](0xc8)[_0x30f1ba(0x1ed)]({'message':_0x52d2b8[_0x30f1ba(0x1f3)]});}}),router[a0_0x326be9(0x224)](a0_0x326be9(0x1f5),async(_0x68b336,_0x3bc39e)=>{const _0x486fab=a0_0x326be9;try{const _0x34c952=await warehouse['aggregate']([{'$unwind':_0x486fab(0x1f0)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x486fab(0x21e),'room':_0x486fab(0x20d)},'products':{'$push':_0x486fab(0x1f0)}}}]);_0x3bc39e['json'](_0x34c952);}catch(_0x27809f){console[_0x486fab(0x1f6)]('table\x20page',_0x27809f),_0x3bc39e[_0x486fab(0x1ee)](0xc8)[_0x486fab(0x1ed)]({'message':_0x27809f['message']});}}),router[a0_0x326be9(0x224)]('/warehouse_monitor',async(_0x115f3b,_0x4b88fc)=>{const _0x167a26=a0_0x326be9;_0x4b88fc[_0x167a26(0x201)](_0x167a26(0x1fc),{'success':_0x115f3b[_0x167a26(0x215)](_0x167a26(0x216)),'errors':_0x115f3b['flash'](_0x167a26(0x21f))});}),router[a0_0x326be9(0x224)]('/join',async(_0x5b780a,_0x458053)=>{const _0x11dac9=a0_0x326be9;var _0x2bddac=await purchases[_0x11dac9(0x221)]([{'$lookup':{'from':_0x11dac9(0x232),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x11dac9(0x1f0)},{'$match':{'$expr':{'$eq':[_0x11dac9(0x230),'$product_details.invoice']}}},{'$project':{'_id':_0x11dac9(0x21a),'product_name':_0x11dac9(0x210),'product_code':_0x11dac9(0x1f7),'quantity_available':_0x11dac9(0x202),'warehouse_name':_0x11dac9(0x21e),'warehouse_room':_0x11dac9(0x20d),'invoice':_0x11dac9(0x206)}}],'as':'warehouse_data'}}]);_0x2bddac[_0x11dac9(0x20a)]={},await Promise['all'](_0x2bddac[_0x11dac9(0x233)](async _0x2b8d51=>{const _0x1a7b94=_0x11dac9;_0x2bddac[_0x1a7b94(0x20a)][_0x2b8d51[_0x1a7b94(0x1fa)]]=[],await Promise[_0x1a7b94(0x225)](_0x2b8d51['warehouse_data'][_0x1a7b94(0x233)](async _0x1306a7=>{const _0x2ccf1b=_0x1a7b94,_0x5938a1=await sales[_0x2ccf1b(0x221)]([{'$unwind':_0x2ccf1b(0x207)},{'$match':{'sale_product.id_transaction_from':_0x1306a7[_0x2ccf1b(0x21d)][_0x2ccf1b(0x229)](),'sale_product.invoice':_0x1306a7[_0x2ccf1b(0x1fa)]}},{'$project':{'_id':_0x2ccf1b(0x222),'product_name':'$sale_product.product_name','product_code':_0x2ccf1b(0x220),'quantity_available':_0x2ccf1b(0x223),'warehouse_name':_0x2ccf1b(0x1fe),'warehouse_room':'$sale_product.room_name','product_invoice':_0x2ccf1b(0x214),'invoice':_0x2ccf1b(0x20e),'id_transaction_from':_0x2ccf1b(0x203)}}]);_0x5938a1[_0x2ccf1b(0x234)]>0x0&&_0x2bddac[_0x2ccf1b(0x20a)][_0x2b8d51[_0x2ccf1b(0x1fa)]]['push'](..._0x5938a1);}));})),_0x2bddac[_0x11dac9(0x20a)]=_0x2bddac[_0x11dac9(0x20a)],_0x2bddac['data_adjustment']={},await Promise[_0x11dac9(0x225)](_0x2bddac[_0x11dac9(0x233)](async _0x515e2a=>{const _0x5e8200=_0x11dac9;_0x2bddac['data_adjustment'][_0x515e2a['invoice']]=[],await Promise[_0x5e8200(0x225)](_0x515e2a[_0x5e8200(0x200)][_0x5e8200(0x233)](async _0x2619d0=>{const _0x18d117=_0x5e8200,_0x7512dc=await adjustment['aggregate']([{'$unwind':_0x18d117(0x1fb)},{'$match':{'product.id_transaction_from':_0x2619d0[_0x18d117(0x21d)][_0x18d117(0x229)](),'product.invoice':_0x2619d0['invoice']}},{'$project':{'_id':_0x18d117(0x209),'product_name':_0x18d117(0x217),'product_code':'$product.product_code','quantity_available':_0x18d117(0x22b),'warehouse_name':_0x18d117(0x1fe),'warehouse_room':_0x18d117(0x1fd),'product_invoice':_0x18d117(0x205),'invoice':_0x18d117(0x20e),'id_transaction_from':_0x18d117(0x22c)}}]);_0x7512dc[_0x18d117(0x234)]>0x0&&_0x2bddac['data_adjustment'][_0x515e2a[_0x18d117(0x1fa)]][_0x18d117(0x22e)](..._0x7512dc);}));})),_0x2bddac['data_transfer']={},await Promise[_0x11dac9(0x225)](_0x2bddac[_0x11dac9(0x233)](async _0x5a2bc1=>{const _0x581812=_0x11dac9;_0x2bddac[_0x581812(0x1f8)][_0x5a2bc1['invoice']]=[],await Promise['all'](_0x5a2bc1[_0x581812(0x200)][_0x581812(0x233)](async _0x523a55=>{const _0x5a5efb=_0x581812,_0x462e9e=await transfers['aggregate']([{'$unwind':_0x5a5efb(0x1fb)},{'$match':{'product.id_transaction_id':_0x523a55[_0x5a5efb(0x21d)]['valueOf'](),'product.To_invoice':_0x523a55[_0x5a5efb(0x1fa)]}},{'$project':{'_id':_0x5a5efb(0x209),'product_name':'$product.product_name','product_code':_0x5a5efb(0x211),'quantity_available':'$product.to_quantity','warehouse_name':_0x5a5efb(0x204),'warehouse_room':_0x5a5efb(0x1fd),'product_invoice':_0x5a5efb(0x227),'invoice':_0x5a5efb(0x20e),'id_transaction_id':_0x5a5efb(0x21b)}}]);console[_0x5a5efb(0x1f6)](_0x462e9e),_0x462e9e['length']>0x0&&_0x2bddac[_0x5a5efb(0x1f8)][_0x5a2bc1['invoice']]['push'](..._0x462e9e);}));})),_0x458053[_0x11dac9(0x1ed)]({'purchases_warehouse':_0x2bddac,'data_sales':_0x2bddac['data_sales'],'data_adjustment':_0x2bddac[_0x11dac9(0x20c)],'data_transfer':_0x2bddac[_0x11dac9(0x1f8)]});}),module[a0_0x326be9(0x228)]=router;