function a0_0xb282(_0x21d9ae,_0x1a2c6d){const _0x1c334b=a0_0x1c33();return a0_0xb282=function(_0xb282f0,_0x55099f){_0xb282f0=_0xb282f0-0xb1;let _0x38a87e=_0x1c334b[_0xb282f0];return _0x38a87e;},a0_0xb282(_0x21d9ae,_0x1a2c6d);}const a0_0x79c7f5=a0_0xb282;(function(_0x4cea0b,_0x8a2b63){const _0x3593f5=a0_0xb282,_0x2fa70b=_0x4cea0b();while(!![]){try{const _0x228f2a=parseInt(_0x3593f5(0xcc))/0x1*(parseInt(_0x3593f5(0xec))/0x2)+-parseInt(_0x3593f5(0xd2))/0x3*(parseInt(_0x3593f5(0xbb))/0x4)+parseInt(_0x3593f5(0xc5))/0x5*(-parseInt(_0x3593f5(0xdf))/0x6)+-parseInt(_0x3593f5(0xde))/0x7*(parseInt(_0x3593f5(0xbd))/0x8)+-parseInt(_0x3593f5(0xdc))/0x9+-parseInt(_0x3593f5(0xb9))/0xa+parseInt(_0x3593f5(0xd9))/0xb;if(_0x228f2a===_0x8a2b63)break;else _0x2fa70b['push'](_0x2fa70b['shift']());}catch(_0x58b97c){_0x2fa70b['push'](_0x2fa70b['shift']());}}}(a0_0x1c33,0x53bbb));const express=require(a0_0x79c7f5(0xda)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x79c7f5(0xe8));function a0_0x1c33(){const _0x34101d=['$room','invoice','push','$warehouse_name','5vHTsAU','\x20documents\x20updated','all','$name','$product.room_names','$invoice','$sale_product._id','3KHQfVO','log','$product_details','flash','aggregate','success','99JOPzSZ','$product._id','INCF-52068316','data_sales','status','get','$sale_product','25624027sRwuYu','express','14800005047429','977373AzaWyb','exports','91ljAIge','4050906VMUlHl','_id','$product','message','table\x20page','$product.id_transaction_from','json','$product.invoice','$product_details.product_name','../../models/all_models','render','$product.product_code','$product.to_quantity','307064YjalAL','data_adjustment','valueOf','data_transfer','$product.product_name','modifiedCount','length','/warehouse_monitor','map','errors','6286740ErEMWO','$product_details.product_stock','73916BzrVko','$sale_product.product_code','261448aToJeo','$sale_product.room_name','$$invoice','warehouse_data'];a0_0x1c33=function(){return _0x34101d;};return a0_0x1c33();}router['get']('/negative',async(_0x442784,_0x2f881b)=>{const _0x25d9c5=a0_0x79c7f5;try{const _0x90be3f=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2f881b['json']({'status':_0x90be3f[_0x25d9c5(0xb4)]+_0x25d9c5(0xc6)});}catch(_0x291af6){console[_0x25d9c5(0xcd)](_0x25d9c5(0xe3),_0x291af6),_0x2f881b[_0x25d9c5(0xd6)](0xc8)[_0x25d9c5(0xe5)]({'message':_0x291af6[_0x25d9c5(0xe2)]});}}),router[a0_0x79c7f5(0xd7)]('/checking',async(_0x4069e6,_0xbe2f5c)=>{const _0x380b24=a0_0x79c7f5;try{const _0x304693=await warehouse[_0x380b24(0xd0)]([{'$unwind':_0x380b24(0xce)},{'$match':{'product_details.invoice':_0x380b24(0xd4),'product_details.primary_code':_0x380b24(0xdb)}},{'$group':{'_id':{'name':'$name','room':_0x380b24(0xc1)},'products':{'$push':_0x380b24(0xce)}}}]);_0xbe2f5c[_0x380b24(0xe5)](_0x304693);}catch(_0x1c02b2){console[_0x380b24(0xcd)]('table\x20page',_0x1c02b2),_0xbe2f5c[_0x380b24(0xd6)](0xc8)[_0x380b24(0xe5)]({'message':_0x1c02b2[_0x380b24(0xe2)]});}}),router[a0_0x79c7f5(0xd7)](a0_0x79c7f5(0xb6),async(_0x25918a,_0x93260)=>{const _0x5e2033=a0_0x79c7f5;_0x93260[_0x5e2033(0xe9)]('monitor',{'success':_0x25918a[_0x5e2033(0xcf)](_0x5e2033(0xd1)),'errors':_0x25918a['flash'](_0x5e2033(0xb8))});}),router[a0_0x79c7f5(0xd7)]('/join',async(_0x25627a,_0x39e9f3)=>{const _0x518fc=a0_0x79c7f5;var _0x298187=await purchases['aggregate']([{'$lookup':{'from':'warehouses','let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x518fc(0xce)},{'$match':{'$expr':{'$eq':[_0x518fc(0xbf),'$product_details.invoice']}}},{'$project':{'_id':'$product_details._id','product_name':_0x518fc(0xe7),'product_code':'$product_details.product_code','quantity_available':_0x518fc(0xba),'warehouse_name':_0x518fc(0xc8),'warehouse_room':_0x518fc(0xc1),'invoice':'$product_details.invoice'}}],'as':_0x518fc(0xc0)}}]);_0x298187[_0x518fc(0xd5)]={},await Promise[_0x518fc(0xc7)](_0x298187[_0x518fc(0xb7)](async _0x3a42b7=>{const _0x1820a8=_0x518fc;_0x298187[_0x1820a8(0xd5)][_0x3a42b7[_0x1820a8(0xc2)]]=[],await Promise[_0x1820a8(0xc7)](_0x3a42b7['warehouse_data'][_0x1820a8(0xb7)](async _0x3ce3fa=>{const _0x5749aa=_0x1820a8,_0x465549=await sales[_0x5749aa(0xd0)]([{'$unwind':_0x5749aa(0xd8)},{'$match':{'sale_product.id_transaction_from':_0x3ce3fa[_0x5749aa(0xe0)][_0x5749aa(0xb1)](),'sale_product.invoice':_0x3ce3fa[_0x5749aa(0xc2)]}},{'$project':{'_id':_0x5749aa(0xcb),'product_name':'$sale_product.product_name','product_code':_0x5749aa(0xbc),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x5749aa(0xbe),'product_invoice':'$sale_product.invoice','invoice':_0x5749aa(0xca),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x465549['length']>0x0&&_0x298187[_0x5749aa(0xd5)][_0x3a42b7[_0x5749aa(0xc2)]][_0x5749aa(0xc3)](..._0x465549);}));})),_0x298187[_0x518fc(0xd5)]=_0x298187[_0x518fc(0xd5)],_0x298187[_0x518fc(0xed)]={},await Promise[_0x518fc(0xc7)](_0x298187[_0x518fc(0xb7)](async _0x35d68f=>{const _0x56f567=_0x518fc;_0x298187['data_adjustment'][_0x35d68f[_0x56f567(0xc2)]]=[],await Promise[_0x56f567(0xc7)](_0x35d68f['warehouse_data'][_0x56f567(0xb7)](async _0x57c044=>{const _0x1975ec=_0x56f567,_0x3614e3=await adjustment[_0x1975ec(0xd0)]([{'$unwind':_0x1975ec(0xe1)},{'$match':{'product.id_transaction_from':_0x57c044[_0x1975ec(0xe0)]['valueOf'](),'product.invoice':_0x57c044[_0x1975ec(0xc2)]}},{'$project':{'_id':_0x1975ec(0xd3),'product_name':_0x1975ec(0xb3),'product_code':_0x1975ec(0xea),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x1975ec(0xc4),'warehouse_room':_0x1975ec(0xc9),'product_invoice':_0x1975ec(0xe6),'invoice':_0x1975ec(0xca),'id_transaction_from':_0x1975ec(0xe4)}}]);_0x3614e3[_0x1975ec(0xb5)]>0x0&&_0x298187[_0x1975ec(0xed)][_0x35d68f['invoice']]['push'](..._0x3614e3);}));})),_0x298187[_0x518fc(0xb2)]={},await Promise[_0x518fc(0xc7)](_0x298187['map'](async _0x52ecb5=>{const _0x29cb77=_0x518fc;_0x298187[_0x29cb77(0xb2)][_0x52ecb5[_0x29cb77(0xc2)]]=[],await Promise[_0x29cb77(0xc7)](_0x52ecb5[_0x29cb77(0xc0)]['map'](async _0x12f12d=>{const _0x4888ca=_0x29cb77,_0x3106ec=await transfers[_0x4888ca(0xd0)]([{'$unwind':_0x4888ca(0xe1)},{'$match':{'product.id_transaction_id':_0x12f12d[_0x4888ca(0xe0)][_0x4888ca(0xb1)](),'product.To_invoice':_0x12f12d[_0x4888ca(0xc2)]}},{'$project':{'_id':_0x4888ca(0xd3),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x4888ca(0xeb),'warehouse_name':'$to_warehouse','warehouse_room':_0x4888ca(0xc9),'product_invoice':'$product.to_room_name','invoice':_0x4888ca(0xca),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x4888ca(0xcd)](_0x3106ec),_0x3106ec[_0x4888ca(0xb5)]>0x0&&_0x298187[_0x4888ca(0xb2)][_0x52ecb5['invoice']]['push'](..._0x3106ec);}));})),_0x39e9f3[_0x518fc(0xe5)]({'purchases_warehouse':_0x298187,'data_sales':_0x298187[_0x518fc(0xd5)],'data_adjustment':_0x298187[_0x518fc(0xed)],'data_transfer':_0x298187[_0x518fc(0xb2)]});}),module[a0_0x79c7f5(0xdd)]=router;