const a0_0xc7b767=a0_0x5319;function a0_0x5319(_0x135ef9,_0x13d196){const _0x73f4de=a0_0x73f4();return a0_0x5319=function(_0x5319e5,_0x55d1c2){_0x5319e5=_0x5319e5-0x152;let _0x194156=_0x73f4de[_0x5319e5];return _0x194156;},a0_0x5319(_0x135ef9,_0x13d196);}(function(_0x5b1643,_0x387feb){const _0x431b2c=a0_0x5319,_0x4f1a70=_0x5b1643();while(!![]){try{const _0x40d074=parseInt(_0x431b2c(0x173))/0x1*(parseInt(_0x431b2c(0x180))/0x2)+parseInt(_0x431b2c(0x18a))/0x3*(-parseInt(_0x431b2c(0x15e))/0x4)+parseInt(_0x431b2c(0x18c))/0x5+parseInt(_0x431b2c(0x192))/0x6+-parseInt(_0x431b2c(0x170))/0x7*(-parseInt(_0x431b2c(0x169))/0x8)+parseInt(_0x431b2c(0x16d))/0x9+-parseInt(_0x431b2c(0x174))/0xa*(parseInt(_0x431b2c(0x167))/0xb);if(_0x40d074===_0x387feb)break;else _0x4f1a70['push'](_0x4f1a70['shift']());}catch(_0x23df4c){_0x4f1a70['push'](_0x4f1a70['shift']());}}}(a0_0x73f4,0xb5b7e));const express=require(a0_0xc7b767(0x168)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0xc7b767(0x18f));router['get']('/negative',async(_0x320cad,_0x4ac856)=>{const _0x819fdc=a0_0xc7b767;try{const _0x1aeb5a=await warehouse[_0x819fdc(0x15d)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x4ac856[_0x819fdc(0x159)]({'status':_0x1aeb5a[_0x819fdc(0x17f)]+'\x20documents\x20updated'});}catch(_0xba036d){console[_0x819fdc(0x172)](_0x819fdc(0x16f),_0xba036d),_0x4ac856['status'](0xc8)[_0x819fdc(0x159)]({'message':_0xba036d[_0x819fdc(0x187)]});}}),router[a0_0xc7b767(0x158)]('/checking',async(_0x3e2567,_0x545696)=>{const _0x25c6c2=a0_0xc7b767;try{const _0xc1f8d5=await warehouse[_0x25c6c2(0x166)]([{'$unwind':_0x25c6c2(0x17e)},{'$match':{'product_details.invoice':_0x25c6c2(0x190),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x25c6c2(0x164),'room':_0x25c6c2(0x16b)},'products':{'$push':_0x25c6c2(0x17e)}}}]);_0x545696[_0x25c6c2(0x159)](_0xc1f8d5);}catch(_0x19833c){console[_0x25c6c2(0x172)](_0x25c6c2(0x16f),_0x19833c),_0x545696[_0x25c6c2(0x157)](0xc8)['json']({'message':_0x19833c[_0x25c6c2(0x187)]});}}),router[a0_0xc7b767(0x158)](a0_0xc7b767(0x153),async(_0x7b0a8f,_0xbcb277)=>{const _0xa5b7d=a0_0xc7b767;_0xbcb277['render'](_0xa5b7d(0x18e),{'success':_0x7b0a8f[_0xa5b7d(0x171)](_0xa5b7d(0x154)),'errors':_0x7b0a8f[_0xa5b7d(0x171)]('errors')});}),router[a0_0xc7b767(0x158)](a0_0xc7b767(0x15c),async(_0x3cac83,_0x3e94f2)=>{const _0x3230a3=a0_0xc7b767;var _0x2abfec=await purchases[_0x3230a3(0x166)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x3230a3(0x18d)},'pipeline':[{'$unwind':_0x3230a3(0x17e)},{'$match':{'$expr':{'$eq':[_0x3230a3(0x16c),'$product_details.invoice']}}},{'$project':{'_id':'$product_details._id','product_name':_0x3230a3(0x188),'product_code':'$product_details.product_code','quantity_available':_0x3230a3(0x177),'warehouse_name':_0x3230a3(0x164),'warehouse_room':'$room','invoice':_0x3230a3(0x184)}}],'as':_0x3230a3(0x183)}}]);_0x2abfec[_0x3230a3(0x155)]={},await Promise[_0x3230a3(0x15a)](_0x2abfec['map'](async _0x3c0c0d=>{const _0x5c49fd=_0x3230a3;_0x2abfec[_0x5c49fd(0x155)][_0x3c0c0d[_0x5c49fd(0x15b)]]=[],await Promise[_0x5c49fd(0x15a)](_0x3c0c0d[_0x5c49fd(0x183)]['map'](async _0x438115=>{const _0x206433=_0x5c49fd,_0x2d4e9b=await sales[_0x206433(0x166)]([{'$unwind':_0x206433(0x17a)},{'$match':{'sale_product.id_transaction_from':_0x438115[_0x206433(0x162)]['valueOf'](),'sale_product.invoice':_0x438115['invoice']}},{'$project':{'_id':_0x206433(0x189),'product_name':_0x206433(0x178),'product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x206433(0x156),'product_invoice':_0x206433(0x186),'invoice':_0x206433(0x18d),'id_transaction_from':_0x206433(0x185)}}]);_0x2d4e9b[_0x206433(0x182)]>0x0&&_0x2abfec[_0x206433(0x155)][_0x3c0c0d[_0x206433(0x15b)]][_0x206433(0x15f)](..._0x2d4e9b);}));})),_0x2abfec[_0x3230a3(0x155)]=_0x2abfec['data_sales'],_0x2abfec['data_adjustment']={},await Promise['all'](_0x2abfec[_0x3230a3(0x161)](async _0x76514a=>{const _0x3fe408=_0x3230a3;_0x2abfec[_0x3fe408(0x16e)][_0x76514a[_0x3fe408(0x15b)]]=[],await Promise[_0x3fe408(0x15a)](_0x76514a['warehouse_data'][_0x3fe408(0x161)](async _0x7c9d6e=>{const _0x3ee80=_0x3fe408,_0x99a19a=await adjustment[_0x3ee80(0x166)]([{'$unwind':_0x3ee80(0x163)},{'$match':{'product.id_transaction_from':_0x7c9d6e[_0x3ee80(0x162)][_0x3ee80(0x152)](),'product.invoice':_0x7c9d6e[_0x3ee80(0x15b)]}},{'$project':{'_id':_0x3ee80(0x17b),'product_name':_0x3ee80(0x165),'product_code':_0x3ee80(0x16a),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':_0x3ee80(0x18b),'product_invoice':_0x3ee80(0x191),'invoice':_0x3ee80(0x18d),'id_transaction_from':_0x3ee80(0x181)}}]);_0x99a19a[_0x3ee80(0x182)]>0x0&&_0x2abfec[_0x3ee80(0x16e)][_0x76514a['invoice']]['push'](..._0x99a19a);}));})),_0x2abfec[_0x3230a3(0x175)]={},await Promise[_0x3230a3(0x15a)](_0x2abfec[_0x3230a3(0x161)](async _0x350a60=>{const _0x44856c=_0x3230a3;_0x2abfec[_0x44856c(0x175)][_0x350a60[_0x44856c(0x15b)]]=[],await Promise[_0x44856c(0x15a)](_0x350a60['warehouse_data'][_0x44856c(0x161)](async _0x366417=>{const _0x565350=_0x44856c,_0x5949bd=await transfers[_0x565350(0x166)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x366417[_0x565350(0x162)][_0x565350(0x152)](),'product.To_invoice':_0x366417[_0x565350(0x15b)]}},{'$project':{'_id':_0x565350(0x17b),'product_name':_0x565350(0x165),'product_code':_0x565350(0x16a),'quantity_available':_0x565350(0x17c),'warehouse_name':_0x565350(0x176),'warehouse_room':'$product.room_names','product_invoice':_0x565350(0x179),'invoice':_0x565350(0x18d),'id_transaction_id':_0x565350(0x160)}}]);console[_0x565350(0x172)](_0x5949bd),_0x5949bd[_0x565350(0x182)]>0x0&&_0x2abfec['data_transfer'][_0x350a60['invoice']][_0x565350(0x15f)](..._0x5949bd);}));})),_0x3e94f2[_0x3230a3(0x159)]({'purchases_warehouse':_0x2abfec,'data_sales':_0x2abfec[_0x3230a3(0x155)],'data_adjustment':_0x2abfec[_0x3230a3(0x16e)],'data_transfer':_0x2abfec['data_transfer']});}),module[a0_0xc7b767(0x17d)]=router;function a0_0x73f4(){const _0x1c8039=['INCF-52068316','$product.invoice','3703332TzbcvP','valueOf','/warehouse_monitor','success','data_sales','$sale_product.room_name','status','get','json','all','invoice','/join','updateMany','332fkYJYq','push','$product.id_transaction_id','map','_id','$product','$name','$product.product_name','aggregate','14285909AjyIxy','express','1672360WFKKLH','$product.product_code','$room','$$invoice','11389995hKtyIW','data_adjustment','table\x20page','14dhmBXz','flash','log','549518ObttUh','20fuWZxs','data_transfer','$to_warehouse','$product_details.product_stock','$sale_product.product_name','$product.to_room_name','$sale_product','$product._id','$product.to_quantity','exports','$product_details','modifiedCount','4vDvgAk','$product.id_transaction_from','length','warehouse_data','$product_details.invoice','$sale_product.id_transaction_from','$sale_product.invoice','message','$product_details.product_name','$sale_product._id','22713mXEaAj','$product.room_names','2851230vJloiq','$invoice','monitor','../../models/all_models'];a0_0x73f4=function(){return _0x1c8039;};return a0_0x73f4();}