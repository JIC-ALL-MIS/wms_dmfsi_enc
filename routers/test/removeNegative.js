function a0_0x5985(_0x498b80,_0x370437){const _0x519802=a0_0x5198();return a0_0x5985=function(_0x59851b,_0x49b1ce){_0x59851b=_0x59851b-0x89;let _0x305f17=_0x519802[_0x59851b];return _0x305f17;},a0_0x5985(_0x498b80,_0x370437);}const a0_0x1ec4f7=a0_0x5985;(function(_0xf6d9d8,_0x263e63){const _0x2337fa=a0_0x5985,_0x6f49a2=_0xf6d9d8();while(!![]){try{const _0x575d6d=-parseInt(_0x2337fa(0xc8))/0x1+parseInt(_0x2337fa(0x9c))/0x2*(parseInt(_0x2337fa(0x8e))/0x3)+-parseInt(_0x2337fa(0xb6))/0x4+parseInt(_0x2337fa(0xb9))/0x5+parseInt(_0x2337fa(0xa1))/0x6+parseInt(_0x2337fa(0x9a))/0x7+parseInt(_0x2337fa(0xb0))/0x8;if(_0x575d6d===_0x263e63)break;else _0x6f49a2['push'](_0x6f49a2['shift']());}catch(_0x310c50){_0x6f49a2['push'](_0x6f49a2['shift']());}}}(a0_0x5198,0x58961));const express=require(a0_0x1ec4f7(0x8a)),app=express(),router=express[a0_0x1ec4f7(0x99)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');function a0_0x5198(){const _0x1f2c92=['$product.product_code','$invoice','log','data_transfer','render','_id','$product.id_transaction_id','$name','$to_warehouse','/warehouse_monitor','$sale_product._id','status','1713024tZgXTB','$product.id_transaction_from','exports','json','success','$sale_product.id_transaction_from','2228108cyyWbE','$product_details.product_code','INCF-52068316','836000OtAonL','$product_details.product_name','get','$product_details.product_stock','modifiedCount','invoice','$$invoice','$product_details.invoice','/negative','monitor','table\x20page','$product','/checking','$product_details._id','flash','585510HDIuHM','length','message','/join','express','data_sales','$product.product_name','$product_details','6aOcVpV','$product.room_names','$warehouse_name','$room','map','\x20documents\x20updated','$sale_product.product_name','$sale_product.quantity','warehouse_data','$product.to_quantity','updateMany','Router','3007340elwAdw','valueOf','649288bNZyNu','errors','aggregate','$product._id','all','270900FxptQY','data_adjustment','push'];a0_0x5198=function(){return _0x1f2c92;};return a0_0x5198();}router[a0_0x1ec4f7(0xbb)](a0_0x1ec4f7(0xc1),async(_0xb058b0,_0x1eb72a)=>{const _0x44cd37=a0_0x1ec4f7;try{const _0x44f087=await warehouse[_0x44cd37(0x98)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1eb72a[_0x44cd37(0xb3)]({'status':_0x44f087[_0x44cd37(0xbd)]+_0x44cd37(0x93)});}catch(_0x4e117c){console[_0x44cd37(0xa6)](_0x44cd37(0xc3),_0x4e117c),_0x1eb72a[_0x44cd37(0xaf)](0xc8)['json']({'message':_0x4e117c[_0x44cd37(0xca)]});}}),router['get'](a0_0x1ec4f7(0xc5),async(_0x474cf2,_0x581962)=>{const _0x26bdb4=a0_0x1ec4f7;try{const _0x22e17b=await warehouse[_0x26bdb4(0x9e)]([{'$unwind':_0x26bdb4(0x8d)},{'$match':{'product_details.invoice':_0x26bdb4(0xb8),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':'$name','room':_0x26bdb4(0x91)},'products':{'$push':_0x26bdb4(0x8d)}}}]);_0x581962[_0x26bdb4(0xb3)](_0x22e17b);}catch(_0x3e6b27){console[_0x26bdb4(0xa6)](_0x26bdb4(0xc3),_0x3e6b27),_0x581962[_0x26bdb4(0xaf)](0xc8)[_0x26bdb4(0xb3)]({'message':_0x3e6b27[_0x26bdb4(0xca)]});}}),router['get'](a0_0x1ec4f7(0xad),async(_0x521071,_0x875f7f)=>{const _0x52b8d8=a0_0x1ec4f7;_0x875f7f[_0x52b8d8(0xa8)](_0x52b8d8(0xc2),{'success':_0x521071[_0x52b8d8(0xc7)](_0x52b8d8(0xb4)),'errors':_0x521071[_0x52b8d8(0xc7)](_0x52b8d8(0x9d))});}),router[a0_0x1ec4f7(0xbb)](a0_0x1ec4f7(0x89),async(_0x4c93f0,_0x413e81)=>{const _0x4dbc6d=a0_0x1ec4f7;var _0x5467e3=await purchases[_0x4dbc6d(0x9e)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x4dbc6d(0xa5)},'pipeline':[{'$unwind':_0x4dbc6d(0x8d)},{'$match':{'$expr':{'$eq':[_0x4dbc6d(0xbf),_0x4dbc6d(0xc0)]}}},{'$project':{'_id':_0x4dbc6d(0xc6),'product_name':_0x4dbc6d(0xba),'product_code':_0x4dbc6d(0xb7),'quantity_available':_0x4dbc6d(0xbc),'warehouse_name':_0x4dbc6d(0xab),'warehouse_room':_0x4dbc6d(0x91),'invoice':_0x4dbc6d(0xc0)}}],'as':_0x4dbc6d(0x96)}}]);_0x5467e3[_0x4dbc6d(0x8b)]={},await Promise[_0x4dbc6d(0xa0)](_0x5467e3[_0x4dbc6d(0x92)](async _0x3b70dc=>{const _0x24dff6=_0x4dbc6d;_0x5467e3[_0x24dff6(0x8b)][_0x3b70dc[_0x24dff6(0xbe)]]=[],await Promise[_0x24dff6(0xa0)](_0x3b70dc['warehouse_data'][_0x24dff6(0x92)](async _0x1a9f24=>{const _0x15ec97=_0x24dff6,_0x10b8ac=await sales[_0x15ec97(0x9e)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x1a9f24[_0x15ec97(0xa9)][_0x15ec97(0x9b)](),'sale_product.invoice':_0x1a9f24[_0x15ec97(0xbe)]}},{'$project':{'_id':_0x15ec97(0xae),'product_name':_0x15ec97(0x94),'product_code':'$sale_product.product_code','quantity_available':_0x15ec97(0x95),'warehouse_name':_0x15ec97(0x90),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x15ec97(0xa5),'id_transaction_from':_0x15ec97(0xb5)}}]);_0x10b8ac['length']>0x0&&_0x5467e3[_0x15ec97(0x8b)][_0x3b70dc['invoice']]['push'](..._0x10b8ac);}));})),_0x5467e3[_0x4dbc6d(0x8b)]=_0x5467e3['data_sales'],_0x5467e3[_0x4dbc6d(0xa2)]={},await Promise[_0x4dbc6d(0xa0)](_0x5467e3[_0x4dbc6d(0x92)](async _0x3b5079=>{const _0x189e8f=_0x4dbc6d;_0x5467e3['data_adjustment'][_0x3b5079[_0x189e8f(0xbe)]]=[],await Promise[_0x189e8f(0xa0)](_0x3b5079['warehouse_data'][_0x189e8f(0x92)](async _0x2a4777=>{const _0x1a727d=_0x189e8f,_0x1d58c4=await adjustment[_0x1a727d(0x9e)]([{'$unwind':_0x1a727d(0xc4)},{'$match':{'product.id_transaction_from':_0x2a4777['_id']['valueOf'](),'product.invoice':_0x2a4777['invoice']}},{'$project':{'_id':_0x1a727d(0x9f),'product_name':_0x1a727d(0x8c),'product_code':_0x1a727d(0xa4),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x1a727d(0x90),'warehouse_room':_0x1a727d(0x8f),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x1a727d(0xb1)}}]);_0x1d58c4[_0x1a727d(0xc9)]>0x0&&_0x5467e3[_0x1a727d(0xa2)][_0x3b5079[_0x1a727d(0xbe)]]['push'](..._0x1d58c4);}));})),_0x5467e3[_0x4dbc6d(0xa7)]={},await Promise[_0x4dbc6d(0xa0)](_0x5467e3[_0x4dbc6d(0x92)](async _0x4f5133=>{const _0x19c5cf=_0x4dbc6d;_0x5467e3[_0x19c5cf(0xa7)][_0x4f5133['invoice']]=[],await Promise[_0x19c5cf(0xa0)](_0x4f5133[_0x19c5cf(0x96)][_0x19c5cf(0x92)](async _0x28d3d6=>{const _0x4d8f45=_0x19c5cf,_0x8b3474=await transfers[_0x4d8f45(0x9e)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x28d3d6['_id']['valueOf'](),'product.To_invoice':_0x28d3d6[_0x4d8f45(0xbe)]}},{'$project':{'_id':'$product._id','product_name':_0x4d8f45(0x8c),'product_code':_0x4d8f45(0xa4),'quantity_available':_0x4d8f45(0x97),'warehouse_name':_0x4d8f45(0xac),'warehouse_room':_0x4d8f45(0x8f),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_id':_0x4d8f45(0xaa)}}]);console[_0x4d8f45(0xa6)](_0x8b3474),_0x8b3474[_0x4d8f45(0xc9)]>0x0&&_0x5467e3['data_transfer'][_0x4f5133[_0x4d8f45(0xbe)]][_0x4d8f45(0xa3)](..._0x8b3474);}));})),_0x413e81['json']({'purchases_warehouse':_0x5467e3,'data_sales':_0x5467e3[_0x4dbc6d(0x8b)],'data_adjustment':_0x5467e3[_0x4dbc6d(0xa2)],'data_transfer':_0x5467e3['data_transfer']});}),module[a0_0x1ec4f7(0xb2)]=router;