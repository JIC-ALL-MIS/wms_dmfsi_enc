const a0_0x1285ea=a0_0x5e32;function a0_0x5e32(_0x1ee049,_0x49ca00){const _0x1cb99e=a0_0x1cb9();return a0_0x5e32=function(_0x5e32b0,_0x4128ec){_0x5e32b0=_0x5e32b0-0x195;let _0x2dfabb=_0x1cb99e[_0x5e32b0];return _0x2dfabb;},a0_0x5e32(_0x1ee049,_0x49ca00);}(function(_0x27ea9f,_0x4273ea){const _0x219e8b=a0_0x5e32,_0x275c03=_0x27ea9f();while(!![]){try{const _0x4f8782=-parseInt(_0x219e8b(0x199))/0x1+-parseInt(_0x219e8b(0x1c2))/0x2*(-parseInt(_0x219e8b(0x19a))/0x3)+parseInt(_0x219e8b(0x1a3))/0x4*(parseInt(_0x219e8b(0x1b9))/0x5)+parseInt(_0x219e8b(0x1b6))/0x6+-parseInt(_0x219e8b(0x1b2))/0x7+-parseInt(_0x219e8b(0x1b4))/0x8*(-parseInt(_0x219e8b(0x1a8))/0x9)+parseInt(_0x219e8b(0x1ad))/0xa;if(_0x4f8782===_0x4273ea)break;else _0x275c03['push'](_0x275c03['shift']());}catch(_0x1e4d88){_0x275c03['push'](_0x275c03['shift']());}}}(a0_0x1cb9,0x6868e));function a0_0x1cb9(){const _0x32a760=['INCF-89085235','table\x20page','12vJyHvR','../../models/all_models','aggregate','invoice','/join','9Rceovj','14800005047429','$product_details','render','flash','3740820eVPiKA','/negative','_id','errors','push','5830139snCmkF','message','5768264iRuPEV','json','194778wlidgO','Router','map','641995oneEgl','status','$name','room_name','length','valueOf','get','success','exports','146MeWwYf','\x20documents\x20updated','modifiedCount','product_details','monitor','$sale_product','340858IFaXxT','3642GzISQl','product','all','/warehouse_monitor','log','INCF-52068316','warehouse_name'];a0_0x1cb9=function(){return _0x32a760;};return a0_0x1cb9();}const express=require('express'),app=express(),router=express[a0_0x1285ea(0x1b7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished}=require(a0_0x1285ea(0x1a4));router[a0_0x1285ea(0x1bf)](a0_0x1285ea(0x1ae),async(_0x381147,_0xffc10f)=>{const _0x5236c7=a0_0x1285ea;try{const _0x28e507=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0xffc10f['json']({'status':_0x28e507[_0x5236c7(0x195)]+_0x5236c7(0x1c3)});}catch(_0x2cc886){console['log'](_0x5236c7(0x1a2),_0x2cc886),_0xffc10f['status'](0xc8)['json']({'message':_0x2cc886[_0x5236c7(0x1b3)]});}}),router[a0_0x1285ea(0x1bf)]('/checking',async(_0x2e1c3e,_0x7de5d5)=>{const _0x6d17d6=a0_0x1285ea;try{const _0x32901a=await warehouse['aggregate']([{'$unwind':_0x6d17d6(0x1aa)},{'$match':{'product_details.invoice':_0x6d17d6(0x19f),'product_details.primary_code':_0x6d17d6(0x1a9)}},{'$group':{'_id':{'name':_0x6d17d6(0x1bb),'room':'$room'},'products':{'$push':_0x6d17d6(0x1aa)}}}]);_0x7de5d5['json'](_0x32901a);}catch(_0x3bc7df){console[_0x6d17d6(0x19e)](_0x6d17d6(0x1a2),_0x3bc7df),_0x7de5d5[_0x6d17d6(0x1ba)](0xc8)[_0x6d17d6(0x1b5)]({'message':_0x3bc7df[_0x6d17d6(0x1b3)]});}}),router[a0_0x1285ea(0x1bf)](a0_0x1285ea(0x19d),async(_0x340c5e,_0x7a572f)=>{const _0x3effa0=a0_0x1285ea;_0x7a572f[_0x3effa0(0x1ab)](_0x3effa0(0x197),{'success':_0x340c5e['flash'](_0x3effa0(0x1c0)),'errors':_0x340c5e[_0x3effa0(0x1ac)](_0x3effa0(0x1b0))});}),router[a0_0x1285ea(0x1bf)](a0_0x1285ea(0x1a7),async(_0x549073,_0x161446)=>{const _0x3902de=a0_0x1285ea,_0x1af81f=await purchases_finished[_0x3902de(0x1a5)]([{'$match':{'invoice':_0x3902de(0x1a1)}}]);let _0x29c6d7=[];await Promise[_0x3902de(0x19c)](_0x1af81f[_0x3902de(0x1b8)](async _0x31da27=>{const _0x12b04a=_0x3902de;await Promise[_0x12b04a(0x19c)](_0x31da27[_0x12b04a(0x19b)][_0x12b04a(0x1b8)](async _0x4bbac5=>{const _0x148bae=_0x12b04a,_0x4cb7d4=await warehouse[_0x148bae(0x1a5)]([{'$match':{'name':_0x31da27[_0x148bae(0x1a0)],'room':_0x4bbac5[_0x148bae(0x1bc)]}},{'$unwind':'$product_details'},{'$match':{'product_details.invoice':_0x4bbac5[_0x148bae(0x1a6)],'product_details.id_incoming':_0x4bbac5[_0x148bae(0x1af)][_0x148bae(0x1be)]()}}]);_0x29c6d7[_0x148bae(0x1b1)](_0x4cb7d4);}));}));let _0x2f8959=[];await Promise[_0x3902de(0x19c)](_0x29c6d7[_0x3902de(0x1b8)](async _0x301812=>{const _0x38d59d=_0x3902de;await Promise[_0x38d59d(0x19c)](_0x301812['map'](async _0x43006b=>{const _0x516d53=_0x38d59d;console[_0x516d53(0x19e)](_0x43006b['product_details'][_0x516d53(0x1a6)]);const _0x5ce585=await sales_finished[_0x516d53(0x1a5)]([{'$unwind':_0x516d53(0x198)},{'$match':{'sale_product.id_transaction_from':_0x43006b['product_details'][_0x516d53(0x1af)]['valueOf'](),'sale_product.invoice':_0x43006b[_0x516d53(0x196)][_0x516d53(0x1a6)]}}]);console['log'](_0x5ce585[_0x516d53(0x1bd)]),_0x5ce585['length']>0x0&&_0x2f8959[_0x516d53(0x1b1)](_0x5ce585);}));}));}),module[a0_0x1285ea(0x1c1)]=router;