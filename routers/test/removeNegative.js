const a0_0x26665b=a0_0xe40e;(function(_0x39b772,_0x2e3c2c){const _0x5bb08d=a0_0xe40e,_0x325626=_0x39b772();while(!![]){try{const _0x15f9d6=-parseInt(_0x5bb08d(0x1aa))/0x1+-parseInt(_0x5bb08d(0x198))/0x2+parseInt(_0x5bb08d(0x1cb))/0x3+-parseInt(_0x5bb08d(0x1a9))/0x4+parseInt(_0x5bb08d(0x19e))/0x5*(parseInt(_0x5bb08d(0x1cc))/0x6)+parseInt(_0x5bb08d(0x1bb))/0x7+parseInt(_0x5bb08d(0x1b0))/0x8;if(_0x15f9d6===_0x2e3c2c)break;else _0x325626['push'](_0x325626['shift']());}catch(_0x147e4f){_0x325626['push'](_0x325626['shift']());}}}(a0_0x5124,0xb2a13));const express=require('express'),app=express(),router=express[a0_0x26665b(0x1b7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x26665b(0x1b8));function a0_0xe40e(_0x5d3ccf,_0x3e81b3){const _0x512411=a0_0x5124();return a0_0xe40e=function(_0xe40e2f,_0x5162f1){_0xe40e2f=_0xe40e2f-0x197;let _0x590936=_0x512411[_0xe40e2f];return _0x590936;},a0_0xe40e(_0x5d3ccf,_0x3e81b3);}function a0_0x5124(){const _0x3920a5=['$sale_product.invoice','Router','../../models/all_models','updateMany','status','3617509KSHQpy','$product_details.product_code','log','$product._id','warehouse_data','$product_details.product_name','$warehouse_name','get','success','flash','valueOf','_id','$sale_product','$sale_product.quantity','json','$name','2586177BgWtqH','54QxzbDm','invoice','$product.room_names','INCF-52068316','$sale_product._id','table\x20page','$product.invoice','$sale_product.product_name','exports','$invoice','render','map','$product.id_transaction_id','$product_details.invoice','173412GBJoCd','/warehouse_monitor','$to_warehouse','$product_details.product_stock','modifiedCount','$product_details._id','802535zbEfTy','$product.to_quantity','data_adjustment','length','$$invoice','$sale_product.id_transaction_from','$product.new_adjust_qty','warehouses','data_sales','push','aggregate','5304840YSeBQl','1286554GggwOg','$product.product_code','$product_details','/join','$product.product_name','data_transfer','4861824pBUyGq','$room','\x20documents\x20updated','message','monitor','all'];a0_0x5124=function(){return _0x3920a5;};return a0_0x5124();}router[a0_0x26665b(0x1c2)]('/negative',async(_0x50f4f9,_0x333bb3)=>{const _0x319f1d=a0_0x26665b;try{const _0x2604bb=await warehouse[_0x319f1d(0x1b9)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x333bb3['json']({'status':_0x2604bb[_0x319f1d(0x19c)]+_0x319f1d(0x1b2)});}catch(_0xa8d359){console[_0x319f1d(0x1bd)](_0x319f1d(0x1d1),_0xa8d359),_0x333bb3[_0x319f1d(0x1ba)](0xc8)[_0x319f1d(0x1c9)]({'message':_0xa8d359['message']});}}),router[a0_0x26665b(0x1c2)]('/checking',async(_0x10eb62,_0x41e79b)=>{const _0x1ae38c=a0_0x26665b;try{const _0x257241=await warehouse['aggregate']([{'$unwind':_0x1ae38c(0x1ac)},{'$match':{'product_details.invoice':_0x1ae38c(0x1cf),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':'$name','room':_0x1ae38c(0x1b1)},'products':{'$push':'$product_details'}}}]);_0x41e79b['json'](_0x257241);}catch(_0x39909d){console['log']('table\x20page',_0x39909d),_0x41e79b[_0x1ae38c(0x1ba)](0xc8)[_0x1ae38c(0x1c9)]({'message':_0x39909d[_0x1ae38c(0x1b3)]});}}),router['get'](a0_0x26665b(0x199),async(_0x256cb0,_0x53f063)=>{const _0x1153d4=a0_0x26665b;_0x53f063[_0x1153d4(0x1d6)](_0x1153d4(0x1b4),{'success':_0x256cb0[_0x1153d4(0x1c4)](_0x1153d4(0x1c3)),'errors':_0x256cb0['flash']('errors')});}),router[a0_0x26665b(0x1c2)](a0_0x26665b(0x1ad),async(_0x10a925,_0x34210e)=>{const _0xb3eab1=a0_0x26665b;var _0x2c46bd=await purchases['aggregate']([{'$lookup':{'from':_0xb3eab1(0x1a5),'let':{'invoice':_0xb3eab1(0x1d5)},'pipeline':[{'$unwind':_0xb3eab1(0x1ac)},{'$match':{'$expr':{'$eq':[_0xb3eab1(0x1a2),_0xb3eab1(0x197)]}}},{'$project':{'_id':_0xb3eab1(0x19d),'product_name':_0xb3eab1(0x1c0),'product_code':_0xb3eab1(0x1bc),'quantity_available':_0xb3eab1(0x19b),'warehouse_name':_0xb3eab1(0x1ca),'warehouse_room':'$room','invoice':_0xb3eab1(0x197)}}],'as':'warehouse_data'}}]);_0x2c46bd['data_sales']={},await Promise[_0xb3eab1(0x1b5)](_0x2c46bd[_0xb3eab1(0x1d7)](async _0x1d0308=>{const _0x4fcc1b=_0xb3eab1;_0x2c46bd[_0x4fcc1b(0x1a6)][_0x1d0308[_0x4fcc1b(0x1cd)]]=[],await Promise[_0x4fcc1b(0x1b5)](_0x1d0308[_0x4fcc1b(0x1bf)][_0x4fcc1b(0x1d7)](async _0x26ecd2=>{const _0x2fca00=_0x4fcc1b,_0x5a6365=await sales[_0x2fca00(0x1a8)]([{'$unwind':_0x2fca00(0x1c7)},{'$match':{'sale_product.id_transaction_from':_0x26ecd2[_0x2fca00(0x1c6)][_0x2fca00(0x1c5)](),'sale_product.invoice':_0x26ecd2['invoice']}},{'$project':{'_id':_0x2fca00(0x1d0),'product_name':_0x2fca00(0x1d3),'product_code':'$sale_product.product_code','quantity_available':_0x2fca00(0x1c8),'warehouse_name':_0x2fca00(0x1c1),'warehouse_room':'$sale_product.room_name','product_invoice':_0x2fca00(0x1b6),'invoice':_0x2fca00(0x1d5),'id_transaction_from':_0x2fca00(0x1a3)}}]);_0x5a6365['length']>0x0&&_0x2c46bd[_0x2fca00(0x1a6)][_0x1d0308[_0x2fca00(0x1cd)]][_0x2fca00(0x1a7)](..._0x5a6365);}));})),_0x2c46bd['data_sales']=_0x2c46bd[_0xb3eab1(0x1a6)],_0x2c46bd[_0xb3eab1(0x1a0)]={},await Promise[_0xb3eab1(0x1b5)](_0x2c46bd[_0xb3eab1(0x1d7)](async _0x24e710=>{const _0x3f19bd=_0xb3eab1;_0x2c46bd[_0x3f19bd(0x1a0)][_0x24e710['invoice']]=[],await Promise[_0x3f19bd(0x1b5)](_0x24e710[_0x3f19bd(0x1bf)]['map'](async _0x4d970a=>{const _0x1260f7=_0x3f19bd,_0x30d100=await adjustment[_0x1260f7(0x1a8)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x4d970a[_0x1260f7(0x1c6)][_0x1260f7(0x1c5)](),'product.invoice':_0x4d970a['invoice']}},{'$project':{'_id':_0x1260f7(0x1be),'product_name':_0x1260f7(0x1ae),'product_code':_0x1260f7(0x1ab),'quantity_available':_0x1260f7(0x1a4),'warehouse_name':_0x1260f7(0x1c1),'warehouse_room':_0x1260f7(0x1ce),'product_invoice':_0x1260f7(0x1d2),'invoice':_0x1260f7(0x1d5),'id_transaction_from':'$product.id_transaction_from'}}]);_0x30d100[_0x1260f7(0x1a1)]>0x0&&_0x2c46bd['data_adjustment'][_0x24e710[_0x1260f7(0x1cd)]][_0x1260f7(0x1a7)](..._0x30d100);}));})),_0x2c46bd['data_transfer']={},await Promise[_0xb3eab1(0x1b5)](_0x2c46bd[_0xb3eab1(0x1d7)](async _0x456c16=>{const _0x13deb1=_0xb3eab1;_0x2c46bd[_0x13deb1(0x1af)][_0x456c16['invoice']]=[],await Promise['all'](_0x456c16[_0x13deb1(0x1bf)][_0x13deb1(0x1d7)](async _0x57de95=>{const _0x177e30=_0x13deb1,_0x31de31=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x57de95[_0x177e30(0x1c6)][_0x177e30(0x1c5)](),'product.To_invoice':_0x57de95[_0x177e30(0x1cd)]}},{'$project':{'_id':_0x177e30(0x1be),'product_name':_0x177e30(0x1ae),'product_code':_0x177e30(0x1ab),'quantity_available':_0x177e30(0x19f),'warehouse_name':_0x177e30(0x19a),'warehouse_room':_0x177e30(0x1ce),'product_invoice':'$product.to_room_name','invoice':_0x177e30(0x1d5),'id_transaction_id':_0x177e30(0x1d8)}}]);console[_0x177e30(0x1bd)](_0x31de31),_0x31de31[_0x177e30(0x1a1)]>0x0&&_0x2c46bd[_0x177e30(0x1af)][_0x456c16[_0x177e30(0x1cd)]]['push'](..._0x31de31);}));})),_0x34210e['json']({'purchases_warehouse':_0x2c46bd,'data_sales':_0x2c46bd['data_sales'],'data_adjustment':_0x2c46bd[_0xb3eab1(0x1a0)],'data_transfer':_0x2c46bd[_0xb3eab1(0x1af)]});}),module[a0_0x26665b(0x1d4)]=router;