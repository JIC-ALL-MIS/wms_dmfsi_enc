const a0_0x358468=a0_0x16f4;(function(_0x3e3e54,_0x53e0ef){const _0x283bc7=a0_0x16f4,_0x3376bb=_0x3e3e54();while(!![]){try{const _0x489d67=-parseInt(_0x283bc7(0xd7))/0x1*(parseInt(_0x283bc7(0xda))/0x2)+parseInt(_0x283bc7(0xcb))/0x3*(parseInt(_0x283bc7(0xdd))/0x4)+-parseInt(_0x283bc7(0xe9))/0x5+parseInt(_0x283bc7(0xca))/0x6+parseInt(_0x283bc7(0xe8))/0x7*(parseInt(_0x283bc7(0xd3))/0x8)+-parseInt(_0x283bc7(0xdc))/0x9*(-parseInt(_0x283bc7(0xcc))/0xa)+parseInt(_0x283bc7(0xd4))/0xb*(-parseInt(_0x283bc7(0xe0))/0xc);if(_0x489d67===_0x53e0ef)break;else _0x3376bb['push'](_0x3376bb['shift']());}catch(_0x4611b4){_0x3376bb['push'](_0x3376bb['shift']());}}}(a0_0x387e,0x2cc31));const express=require(a0_0x358468(0xc5)),app=express(),router=express[a0_0x358468(0xe6)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished}=require(a0_0x358468(0xe2));function a0_0x387e(){const _0x50d808=['$$invoice','3936GuWhhG','$address','/negative','12hkdgXQ','$product_details.product_stock','9Dbrzes','1648TFNcaX','$product_details.product_name','updateMany','68412RvUpeP','$invoice','../../models/all_models','$product_details._id','aggregate','json','Router','flash','14iuPQDA','1143115bPEKFX','warehouse_data','/warehouse_monitor','INCF-69565374','warehouses','exports','express','\x20documents\x20updated','status','get','table\x20page','1426434bdnLWe','939JFVvMt','405260GwRhmx','$product_details','message','render','$product_details.product_code','log','$room','455512XRnpaA','165ztzHCd','$name'];a0_0x387e=function(){return _0x50d808;};return a0_0x387e();}function a0_0x16f4(_0x34b72f,_0x327bcd){const _0x387e1d=a0_0x387e();return a0_0x16f4=function(_0x16f455,_0x15ea2c){_0x16f455=_0x16f455-0xc0;let _0x2f9d90=_0x387e1d[_0x16f455];return _0x2f9d90;},a0_0x16f4(_0x34b72f,_0x327bcd);}router[a0_0x358468(0xc8)](a0_0x358468(0xd9),async(_0x477001,_0x25a3f0)=>{const _0xb22d37=a0_0x358468;try{const _0x38901b=await warehouse[_0xb22d37(0xdf)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x25a3f0[_0xb22d37(0xe5)]({'status':_0x38901b['modifiedCount']+_0xb22d37(0xc6)});}catch(_0x72a8bc){console['log'](_0xb22d37(0xc9),_0x72a8bc),_0x25a3f0[_0xb22d37(0xc7)](0xc8)['json']({'message':_0x72a8bc[_0xb22d37(0xce)]});}}),router[a0_0x358468(0xc8)]('/checking',async(_0x1f7952,_0x59cd51)=>{const _0x479668=a0_0x358468;try{const _0x2bd4cf=await warehouse['aggregate']([{'$unwind':_0x479668(0xcd)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x479668(0xd5),'room':_0x479668(0xd2)},'products':{'$push':'$product_details'}}}]);_0x59cd51[_0x479668(0xe5)](_0x2bd4cf);}catch(_0x287c27){console[_0x479668(0xd1)]('table\x20page',_0x287c27),_0x59cd51[_0x479668(0xc7)](0xc8)[_0x479668(0xe5)]({'message':_0x287c27[_0x479668(0xce)]});}}),router[a0_0x358468(0xc8)](a0_0x358468(0xc1),async(_0x4155aa,_0x30e63d)=>{const _0x72cdee=a0_0x358468;_0x30e63d[_0x72cdee(0xcf)]('monitor',{'success':_0x4155aa['flash']('success'),'errors':_0x4155aa[_0x72cdee(0xe7)]('errors')});}),router[a0_0x358468(0xc8)]('/join',async(_0x4610ff,_0x521fef)=>{const _0x219941=a0_0x358468,_0x1cba4e=await purchases_finished[_0x219941(0xe4)]([{'$match':{'invoice':_0x219941(0xc2)}},{'$lookup':{'from':_0x219941(0xc3),'let':{'invoice':_0x219941(0xe1)},'pipeline':[{'$unwind':_0x219941(0xcd)},{'$match':{'$expr':{'$eq':[_0x219941(0xd6),'$product_details.invoice']}}},{'$project':{'_id':_0x219941(0xe3),'product_name':_0x219941(0xde),'product_code':_0x219941(0xd0),'quantity_purchased':'$product.quantity','quantity_available':_0x219941(0xdb),'warehouse_name':_0x219941(0xd5),'warehouse_address':_0x219941(0xd8)}}],'as':_0x219941(0xc0)}}]);_0x521fef[_0x219941(0xe5)](_0x1cba4e);}),module[a0_0x358468(0xc4)]=router;