function a0_0xc2f8(_0x1103fe,_0x257f03){var _0x107855=a0_0x1078();return a0_0xc2f8=function(_0xc2f826,_0xef1ece){_0xc2f826=_0xc2f826-0x94;var _0x6972b4=_0x107855[_0xc2f826];return _0x6972b4;},a0_0xc2f8(_0x1103fe,_0x257f03);}var a0_0x2a2e00=a0_0xc2f8;(function(_0x1d356c,_0x2931ce){var _0x22d9eb=a0_0xc2f8,_0x509fef=_0x1d356c();while(!![]){try{var _0x18626f=parseInt(_0x22d9eb(0x95))/0x1+parseInt(_0x22d9eb(0xcd))/0x2+parseInt(_0x22d9eb(0xf3))/0x3+-parseInt(_0x22d9eb(0xc1))/0x4*(parseInt(_0x22d9eb(0xf4))/0x5)+-parseInt(_0x22d9eb(0x10e))/0x6+parseInt(_0x22d9eb(0xb4))/0x7+parseInt(_0x22d9eb(0xd4))/0x8;if(_0x18626f===_0x2931ce)break;else _0x509fef['push'](_0x509fef['shift']());}catch(_0x43b9a9){_0x509fef['push'](_0x509fef['shift']());}}}(a0_0x1078,0xb3fe3));const express=require(a0_0x2a2e00(0xf6)),app=express(),router=express[a0_0x2a2e00(0xd7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x2a2e00(0xa8)),auth=require(a0_0x2a2e00(0x108)),users=require(a0_0x2a2e00(0xac));function a0_0x1078(){var _0x12cb63=['Chinese','foreach\x20newproduct','map','master','return_purchase_edit','1140264FiTGPY','getMonth','product_name','Arabic','final','$return_product.price','$receivable','log','$suppliers','$product_details','$product_details.type','level','suppliers','/view/:id','payment\x20successfull','Spanish','$supplier_docs.address','$product_details.floorlevel','email','../models/all_models','French','$invoice','$received','../public/language/languages.json','$product_details.secondary_code','warehouse_name','$product_details._id','old_data','forEach','return_product','to_room','135660qFqJmS','save','$product_details.bay','stock_data','success','Portuguese\x20(BR)','$return_product','findOne','find','$return_product.total','types','$total_amount','purchase_quantity','92vshSro','Received\x20For\x20Purchase\x20Return','findById','name','Hindi','primary_code','slice','json','body','string','params','Arabic\x20(ae)','28884VTCEYo','$note','stocks','pallet','type','redirect','flash','539208LUxIin','product_stock','aggregate','Router','$product_details.bin','secondary_code','$product_details.product_code','$product_details.product_stock','Portuguese','product_code','to_warehouse_name','old_warehouse_data','/invoice/:id','user','return_purchase_invoice','$product_details.product_name','$due_amount','product_code_hide','bay','back','German','Raw\x20Materials','product_details','status','$return_product.return_qty','room','render','English\x20(US)','secondary_code_hide','post','floorlevel','4198071DJwIyF','122015JiZgNP','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','express','amount','message','primary_code_hide','bin','$_id','$warehouse_name','get','Enabled','$date','purchase\x20return\x20successfully','to_Room_name','$supplier_docs.email','language','/purchases_return/view','$discount','Purchase\x20Return','English','../middleware/auth','$product_details.storage','getFullYear','return_qty','invoice','received','8053944ibXdyC','$name','errors'];a0_0x1078=function(){return _0x12cb63;};return a0_0x1078();}router[a0_0x2a2e00(0xfd)]('/view',auth,async(_0x2f948e,_0x3eb81b)=>{var _0x2ac531=a0_0x2a2e00;try{const {username:_0x2c61c9,email:_0x5774b6,role:_0x9785a2}=_0x2f948e['user'],_0x41813e=_0x2f948e[_0x2ac531(0xe1)],_0xc2f8c5=await profile[_0x2ac531(0xbb)]({'email':_0x41813e[_0x2ac531(0xa7)]}),_0x486e9c=await master_shop[_0x2ac531(0xbc)]();console['log']('master',_0x486e9c);const _0x578518=await purchases_return[_0x2ac531(0xd6)]([{'$lookup':{'from':'suppliers','localField':_0x2ac531(0xa1),'foreignField':_0x2ac531(0xc4),'as':'supplier_docs'}},{'$unwind':_0x2ac531(0xba)},{'$unwind':'$supplier_docs'},{'$group':{'_id':_0x2ac531(0xfb),'invoice':{'$first':_0x2ac531(0xaa)},'date':{'$first':_0x2ac531(0xff)},'suppliers':{'$first':_0x2ac531(0x9d)},'warehouse_name':{'$first':_0x2ac531(0xfc)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':_0x2ac531(0xec)},'price':{'$first':_0x2ac531(0x9a)},'total':{'$sum':_0x2ac531(0xbd)},'note':{'$first':_0x2ac531(0xce)},'total_amount':{'$first':_0x2ac531(0xbf)},'discount':{'$first':_0x2ac531(0x105)},'receivable':{'$first':_0x2ac531(0x9b)},'received':{'$first':_0x2ac531(0xab)},'due_amount':{'$first':_0x2ac531(0xe4)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':_0x2ac531(0x102)},'address':{'$first':_0x2ac531(0xa5)},'return_sum_qty':{'$sum':_0x2ac531(0xec)}}}]);console[_0x2ac531(0x9c)](_0x578518);if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0xef)){var _0x547add=users[_0x2ac531(0x107)];console['log'](_0x547add);}else{if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0xc5))var _0x547add=users[_0x2ac531(0xc5)];else{if(_0x486e9c[0x0]['language']==_0x2ac531(0xe8))var _0x547add=users[_0x2ac531(0xe8)];else{if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0xa4))var _0x547add=users[_0x2ac531(0xa4)];else{if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0xa9))var _0x547add=users['French'];else{if(_0x486e9c[0x0]['language']==_0x2ac531(0xb9))var _0x547add=users[_0x2ac531(0xdc)];else{if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0x111))var _0x547add=users[_0x2ac531(0x111)];else{if(_0x486e9c[0x0][_0x2ac531(0x103)]==_0x2ac531(0xcc))var _0x547add=users[_0x2ac531(0x98)];}}}}}}}_0x3eb81b['render']('purchases_return',{'success':_0x2f948e[_0x2ac531(0xd3)](_0x2ac531(0xb8)),'errors':_0x2f948e[_0x2ac531(0xd3)](_0x2ac531(0x110)),'role':_0x41813e,'profile':_0xc2f8c5,'master_shop':_0x486e9c,'user':_0x578518,'language':_0x547add});}catch(_0x1c21cc){console['log'](_0x1c21cc);}}),router[a0_0x2a2e00(0xfd)]('/view/:id',auth,async(_0x1a9e9b,_0x2d8266)=>{var _0x2c732b=a0_0x2a2e00;try{const {username:_0x263810,email:_0x45b6e6,role:_0x5c7b23}=_0x1a9e9b['user'],_0x17ac73=_0x1a9e9b[_0x2c732b(0xe1)],_0x549ec3=await profile[_0x2c732b(0xbb)]({'email':_0x17ac73[_0x2c732b(0xa7)]}),_0x2c9915=await product[_0x2c732b(0xbc)]({}),_0x10da39=await master_shop[_0x2c732b(0xbc)]();console[_0x2c732b(0x9c)]('master',_0x10da39),console['log'](_0x1a9e9b['body']);const _0x503ddb=_0x1a9e9b[_0x2c732b(0xcb)]['id'],_0x37fe9d=await purchases_return[_0x2c732b(0xc3)](_0x503ddb);console['log'](_0x37fe9d);const _0x34537a=await warehouse[_0x2c732b(0xd6)]([{'$match':{'name':_0x37fe9d[_0x2c732b(0xae)],'room':_0x37fe9d[_0x2c732b(0xed)]}},{'$unwind':_0x2c732b(0x9e)},{'$group':{'_id':_0x2c732b(0xaf),'name':{'$first':_0x2c732b(0xe3)},'product_stock':{'$first':_0x2c732b(0xdb)},'bay':{'$first':_0x2c732b(0xb6)},'bin':{'$first':_0x2c732b(0xd8)},'type':{'$first':_0x2c732b(0x9f)},'floorlevel':{'$first':_0x2c732b(0xa6)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x2c732b(0xad)},'product_code':{'$first':_0x2c732b(0xda)},'storage':{'$first':_0x2c732b(0x109)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x2c732b(0xd6)]([{'$match':{'status':_0x2c732b(0xfe),'name':'Return\x20Goods','warehouse_category':_0x2c732b(0xe9)}},{'$group':{'_id':_0x2c732b(0x10f),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x2c732b(0x9c)](_0x2c732b(0xb7),_0x34537a);if(_0x10da39[0x0][_0x2c732b(0x103)]=='English\x20(US)'){var _0x5ab7ce=users[_0x2c732b(0x107)];console[_0x2c732b(0x9c)](_0x5ab7ce);}else{if(_0x10da39[0x0][_0x2c732b(0x103)]==_0x2c732b(0xc5))var _0x5ab7ce=users[_0x2c732b(0xc5)];else{if(_0x10da39[0x0][_0x2c732b(0x103)]==_0x2c732b(0xe8))var _0x5ab7ce=users[_0x2c732b(0xe8)];else{if(_0x10da39[0x0][_0x2c732b(0x103)]==_0x2c732b(0xa4))var _0x5ab7ce=users[_0x2c732b(0xa4)];else{if(_0x10da39[0x0]['language']==_0x2c732b(0xa9))var _0x5ab7ce=users[_0x2c732b(0xa9)];else{if(_0x10da39[0x0]['language']=='Portuguese\x20(BR)')var _0x5ab7ce=users['Portuguese'];else{if(_0x10da39[0x0]['language']==_0x2c732b(0x111))var _0x5ab7ce=users[_0x2c732b(0x111)];else{if(_0x10da39[0x0]['language']==_0x2c732b(0xcc))var _0x5ab7ce=users[_0x2c732b(0x98)];}}}}}}}_0x2d8266[_0x2c732b(0xee)](_0x2c732b(0x94),{'success':_0x1a9e9b[_0x2c732b(0xd3)](_0x2c732b(0xb8)),'errors':_0x1a9e9b[_0x2c732b(0xd3)](_0x2c732b(0x110)),'role':_0x17ac73,'master_shop':_0x10da39,'profile':_0x549ec3,'user':_0x37fe9d,'stock':_0x34537a,'product':_0x2c9915,'language':_0x5ab7ce,'warehouse':warehouse_data});}catch(_0x12c90a){console['log'](_0x12c90a);}}),router[a0_0x2a2e00(0xf1)](a0_0x2a2e00(0xa2),auth,async(_0x1832cf,_0x18d9ad)=>{var _0x18c145=a0_0x2a2e00;try{const _0x102ee8=_0x1832cf[_0x18c145(0xcb)]['id'];console[_0x18c145(0x9c)](_0x102ee8);const _0x186a28=await purchases_return['findOne']({'invoice':_0x1832cf['body'][_0x18c145(0x10c)]});console[_0x18c145(0x9c)](_0x18c145(0xb0),_0x186a28);const _0x36809e=await warehouse[_0x18c145(0xbb)]({'name':_0x186a28[_0x18c145(0xde)],'room':_0x186a28[_0x18c145(0xb3)]});console['log'](_0x18c145(0xdf),_0x36809e);const {invoice:_0x261d3f,suppliers:_0x328dec,date:_0x14aa15,warehouse_name:_0x802536,product_name:_0x34d41a,purchase_quantity:_0x450a79,stocks:_0x5c117f,return_qty:_0x30aa71,note:_0xd1202c,Room_name:_0x2b7091,level:_0x3aa5a5,isle:_0x2eb4fe,pallet:_0x2bb5cc,to_warehouse_name:_0x35886b,to_Room_name:_0x52a0a9}=_0x1832cf[_0x18c145(0xc9)];if(typeof _0x34d41a==_0x18c145(0xca))var _0x48573b=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0x97)]],_0x48e1ab=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xc0)]],_0x23e667=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xcf)]],_0x57e20a=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0x10b)]],_0x5d2588=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xa0)]],_0x4b44c4=[_0x1832cf['body']['isle']],_0x99e562=[_0x1832cf[_0x18c145(0xc9)]['pallet']],_0x12a66f=[_0x1832cf['body'][_0x18c145(0xbe)]],_0x3f1291=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xe5)]],_0x62b1e6=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xf9)]],_0x349b50=[_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xf0)]];else var _0x48573b=[..._0x1832cf[_0x18c145(0xc9)]['product_name']],_0x48e1ab=[..._0x1832cf[_0x18c145(0xc9)]['purchase_quantity']],_0x23e667=[..._0x1832cf['body'][_0x18c145(0xcf)]],_0x57e20a=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0x10b)]],_0x5d2588=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0xa0)]],_0x4b44c4=[..._0x1832cf[_0x18c145(0xc9)]['isle']],_0x99e562=[..._0x1832cf[_0x18c145(0xc9)]['pallet']],_0x3f1291=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0xe5)]],_0x62b1e6=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0xf9)]],_0x349b50=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0xf0)]],_0x12a66f=[..._0x1832cf[_0x18c145(0xc9)][_0x18c145(0xbe)]];const _0x5d7822=_0x48573b[_0x18c145(0x113)](_0x245832=>{return _0x245832={'product_name':_0x245832};});_0x48e1ab[_0x18c145(0xb1)]((_0x37a0d1,_0x20978a)=>{var _0x5327cf=_0x18c145;_0x5d7822[_0x20978a][_0x5327cf(0xc0)]=_0x37a0d1;}),_0x23e667[_0x18c145(0xb1)]((_0x59fa4c,_0x3c45cd)=>{_0x5d7822[_0x3c45cd]['stock_quantity']=_0x59fa4c;}),_0x57e20a[_0x18c145(0xb1)]((_0x4ecc40,_0x1360a1)=>{_0x5d7822[_0x1360a1]['return_qty']=_0x4ecc40;}),_0x5d2588[_0x18c145(0xb1)]((_0x1de112,_0x3398c1)=>{var _0x5679b9=_0x18c145;_0x5d7822[_0x3398c1][_0x5679b9(0xe6)]=_0x1de112;}),_0x4b44c4[_0x18c145(0xb1)]((_0x24eab6,_0x4ad38f)=>{var _0x21745c=_0x18c145;_0x5d7822[_0x4ad38f][_0x21745c(0xfa)]=_0x24eab6;}),_0x99e562[_0x18c145(0xb1)]((_0x42fdae,_0xdf5e12)=>{var _0xfb9e69=_0x18c145;_0x5d7822[_0xdf5e12][_0xfb9e69(0xf2)]=_0x42fdae;}),_0x3f1291[_0x18c145(0xb1)]((_0x480ef3,_0x52b8b3)=>{var _0x40a2e8=_0x18c145;_0x5d7822[_0x52b8b3][_0x40a2e8(0xdd)]=_0x480ef3;}),_0x62b1e6[_0x18c145(0xb1)]((_0x4fc853,_0x2e5e1b)=>{var _0x5f4655=_0x18c145;_0x5d7822[_0x2e5e1b][_0x5f4655(0xc6)]=_0x4fc853;}),_0x349b50[_0x18c145(0xb1)]((_0x4ef4d6,_0x440fa3)=>{var _0x417e29=_0x18c145;_0x5d7822[_0x440fa3][_0x417e29(0xd9)]=_0x4ef4d6;}),_0x12a66f[_0x18c145(0xb1)]((_0x1dafe8,_0x319bca)=>{var _0x37eafe=_0x18c145;_0x5d7822[_0x319bca][_0x37eafe(0xd1)]=_0x1dafe8;});var _0x38fd44=0x0;_0x5d7822[_0x18c145(0xb1)](_0x555dd8=>{var _0x4e9a5d=_0x18c145;console[_0x4e9a5d(0x9c)](_0x4e9a5d(0x112),_0x555dd8),(parseInt(_0x555dd8[_0x4e9a5d(0xc0)])<parseInt(_0x555dd8['return_qty'])||parseInt(_0x555dd8['stock_quantity'])<parseInt(_0x555dd8[_0x4e9a5d(0x10b)])||parseInt(_0x555dd8['return_qty'])==0x0)&&_0x38fd44++;});if(_0x38fd44!=0x0)return _0x1832cf[_0x18c145(0xd3)](_0x18c145(0x110),_0x18c145(0xf5)),_0x18d9ad[_0x18c145(0xd2)](_0x18c145(0xe7));_0x186a28[_0x18c145(0xb2)][_0x18c145(0xb1)](_0xf562f3=>{var _0x1df553=_0x18c145;const _0x1b0317=_0x36809e[_0x1df553(0xea)][_0x1df553(0x113)](_0x3e2d8a=>{var _0x3010be=_0x1df553;_0x3e2d8a[_0x3010be(0x97)]==_0xf562f3[_0x3010be(0x97)]&&_0x3e2d8a['floorlevel']==_0xf562f3['floorlevel']&&_0x3e2d8a['type']==_0xf562f3[_0x3010be(0xd1)]&&_0x3e2d8a['bin']==_0xf562f3[_0x3010be(0xfa)]&&_0x3e2d8a['bay']==_0xf562f3[_0x3010be(0xe6)]&&(_0x3e2d8a[_0x3010be(0xd5)]=parseInt(_0x3e2d8a[_0x3010be(0xd5)])+parseInt(_0xf562f3[_0x3010be(0x10b)]));});}),console['log'](_0x18c145(0xdf),_0x36809e),await _0x36809e[_0x18c145(0xb5)](),_0x186a28[_0x18c145(0x10c)]=_0x261d3f,_0x186a28[_0x18c145(0xa1)]=_0x328dec,_0x186a28['date']=_0x14aa15,_0x186a28[_0x18c145(0xae)]=_0x802536,_0x186a28[_0x18c145(0xb2)]=_0x5d7822,_0x186a28['note']=_0xd1202c,_0x186a28[_0x18c145(0xed)]=_0x2b7091,_0x186a28['to_warehouse_name']=_0x35886b,_0x186a28[_0x18c145(0xb3)]=_0x52a0a9;const _0x33ac9a=await _0x186a28['save'](),_0x21b4a1=await purchases_return[_0x18c145(0xbb)]({'invoice':_0x1832cf[_0x18c145(0xc9)][_0x18c145(0x10c)]}),_0x2fa524=await warehouse[_0x18c145(0xbb)]({'name':_0x1832cf[_0x18c145(0xc9)][_0x18c145(0xde)],'room':_0x1832cf[_0x18c145(0xc9)][_0x18c145(0x101)]});_0x21b4a1['return_product'][_0x18c145(0xb1)](_0x505d4b=>{var _0xd5ea88=_0x18c145;_0x2fa524[_0xd5ea88(0xea)][_0xd5ea88(0x113)](_0x4af33e=>{var _0x1cbfc9=_0xd5ea88;_0x4af33e[_0x1cbfc9(0x97)]==_0x505d4b[_0x1cbfc9(0x97)]&&_0x4af33e[_0x1cbfc9(0xd0)]==_0x505d4b[_0x1cbfc9(0xd0)]&&(_0x4af33e[_0x1cbfc9(0xd5)]=parseInt(_0x4af33e['product_stock'])-parseInt(_0x505d4b['return_qty']),console[_0x1cbfc9(0x9c)]('product_details.return_qtyproduct_details.return_qty',_0x505d4b[_0x1cbfc9(0x10b)]));});}),console[_0x18c145(0x9c)](_0x18c145(0x99),_0x2fa524),await _0x2fa524['save']();const _0x3dc2db=await s_payment_data['findOne']({'invoice':_0x1832cf[_0x18c145(0xc9)][_0x18c145(0x10c)],'reason':_0x18c145(0x106)});await _0x3dc2db[_0x18c145(0xb5)](),_0x1832cf[_0x18c145(0xd3)]('success',_0x18c145(0x100)),_0x18d9ad[_0x18c145(0xd2)](_0x18c145(0x104));}catch(_0x3f8be7){console[_0x18c145(0x9c)](_0x3f8be7),_0x18d9ad[_0x18c145(0xeb)](0xc8)[_0x18c145(0xc8)]({'message':_0x3f8be7[_0x18c145(0xf8)]});}}),router[a0_0x2a2e00(0xfd)](a0_0x2a2e00(0xe0),auth,async(_0x2953c7,_0x39ebad)=>{var _0x2e5132=a0_0x2a2e00;try{const {username:_0x3c25b5,email:_0x36aca8,role:_0x15c861}=_0x2953c7[_0x2e5132(0xe1)],_0x35333a=_0x2953c7['user'],_0x15fe76=await profile[_0x2e5132(0xbb)]({'email':_0x35333a['email']}),_0x34f6a9=await master_shop[_0x2e5132(0xbc)]();console[_0x2e5132(0x9c)](_0x2e5132(0x114),_0x34f6a9);const _0x3acbfd=_0x2953c7[_0x2e5132(0xcb)]['id'],_0x1d3ec8=await purchases_return[_0x2e5132(0xc3)](_0x3acbfd);console[_0x2e5132(0x9c)](_0x1d3ec8);const _0x2c1da5=await suppliers[_0x2e5132(0xbb)]({'name':_0x1d3ec8[_0x2e5132(0xa1)]});console[_0x2e5132(0x9c)](_0x2c1da5);if(_0x34f6a9[0x0][_0x2e5132(0x103)]==_0x2e5132(0xef)){var _0x24b836=users[_0x2e5132(0x107)];console[_0x2e5132(0x9c)](_0x24b836);}else{if(_0x34f6a9[0x0]['language']==_0x2e5132(0xc5))var _0x24b836=users[_0x2e5132(0xc5)];else{if(_0x34f6a9[0x0][_0x2e5132(0x103)]==_0x2e5132(0xe8))var _0x24b836=users[_0x2e5132(0xe8)];else{if(_0x34f6a9[0x0][_0x2e5132(0x103)]=='Spanish')var _0x24b836=users[_0x2e5132(0xa4)];else{if(_0x34f6a9[0x0][_0x2e5132(0x103)]==_0x2e5132(0xa9))var _0x24b836=users[_0x2e5132(0xa9)];else{if(_0x34f6a9[0x0][_0x2e5132(0x103)]==_0x2e5132(0xb9))var _0x24b836=users[_0x2e5132(0xdc)];else{if(_0x34f6a9[0x0]['language']==_0x2e5132(0x111))var _0x24b836=users[_0x2e5132(0x111)];else{if(_0x34f6a9[0x0][_0x2e5132(0x103)]==_0x2e5132(0xcc))var _0x24b836=users['Arabic'];}}}}}}}_0x39ebad[_0x2e5132(0xee)](_0x2e5132(0xe2),{'success':_0x2953c7[_0x2e5132(0xd3)](_0x2e5132(0xb8)),'errors':_0x2953c7[_0x2e5132(0xd3)]('errors'),'role':_0x35333a,'profile':_0x15fe76,'master_shop':_0x34f6a9,'supplier':_0x2c1da5,'purchase':_0x1d3ec8,'language':_0x24b836});}catch(_0x5cdfd6){console[_0x2e5132(0x9c)](_0x5cdfd6);}}),router[a0_0x2a2e00(0xf1)]('/receive_payment/:id',auth,async(_0x497da2,_0x236817)=>{var _0x152852=a0_0x2a2e00;try{const _0x4d1355=_0x497da2[_0x152852(0xcb)]['id'],{invoice:_0x46e8e9,suppliers:_0x471fc9,receivable_amount:_0x1d43a5,received_amount:_0x5a62d5}=_0x497da2[_0x152852(0xc9)],_0x133d14=await purchases_return[_0x152852(0xc3)](_0x4d1355);console['log'](_0x133d14);var _0x19acb3=_0x1d43a5-_0x5a62d5;console[_0x152852(0x9c)](_0x5a62d5),_0x133d14[_0x152852(0x10d)]=parseFloat(_0x5a62d5)+parseFloat(_0x133d14[_0x152852(0x10d)]),_0x133d14['due_amount']=_0x19acb3,console[_0x152852(0x9c)](_0x133d14);const _0x526eae=await _0x133d14[_0x152852(0xb5)](),_0x456d90=await s_payment_data[_0x152852(0xbb)]({'invoice':_0x497da2['body'][_0x152852(0x10c)],'reason':_0x152852(0x106)});_0x456d90[_0x152852(0xf7)]=_0x19acb3,await _0x456d90[_0x152852(0xb5)]();let _0x2be5b6=new Date(),_0x11ded9=('0'+_0x2be5b6['getDate']())[_0x152852(0xc7)](-0x2),_0x5f2f7b=('0'+(_0x2be5b6[_0x152852(0x96)]()+0x1))[_0x152852(0xc7)](-0x2),_0x521792=_0x2be5b6[_0x152852(0x10a)](),_0x4acc72=_0x521792+'-'+_0x5f2f7b+'-'+_0x11ded9;const _0x355722=new suppliers_payment({'invoice':_0x46e8e9,'date':_0x521792+'-'+_0x5f2f7b+'-'+_0x11ded9,'suppliers':_0x471fc9,'reason':_0x152852(0xc2),'amount':_0x5a62d5}),_0x5c4e70=await _0x355722['save']();_0x497da2[_0x152852(0xd3)](_0x152852(0xb8),_0x152852(0xa3)),_0x236817[_0x152852(0xd2)](_0x152852(0x104));}catch(_0x407e03){console[_0x152852(0x9c)](_0x407e03);}}),module['exports']=router;