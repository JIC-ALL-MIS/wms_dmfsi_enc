function a0_0x44ca(){var _0x346edc=['return_product','$return_product.return_qty','Received\x20For\x20Purchase\x20Return','to_warehouse_name','errors','status','forEach','$return_product','$return_product.price','aggregate','suppliers','$total_amount','received','warehouse_name','Chinese','$supplier_docs.address','66tfmdtJ','return_qty','params','purchase\x20return\x20successfully','product_stock','Purchase\x20Return','find','French','old_warehouse_data','user','871364fiFpul','$product_details.floorlevel','pallet','135258EBKWTv','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$supplier_docs','note','primary_code_hide','findOne','render','types','$product_details.product_name','json','$product_details.storage','6933XGQdyu','7998300aTVJvB','$product_details.type','/purchases_return/view','save','Spanish','level','amount','language','Enabled','product_details','post','Arabic\x20(ae)','get','to_Room_name','getDate','2558016QXVPBU','$note','356760mZEbRy','English\x20(US)','91eTFTVn','secondary_code_hide','$product_details.rack','purchases_return','$product_details.product_code','email','$product_details.bay','stocks','$product_details.product_stock','slice','purchase_quantity','stock_data','map','bin','name','getFullYear','return_purchase_edit','Return\x20Goods','/view/:id','invoice','flash','English','log','secondary_code','$supplier_docs.mobile','Arabic','room','German','due_amount','$product_details','bay','isle','foreach\x20newproduct','Portuguese','express','floorlevel','Hindi','$return_product.product_name','to_room','$product_details.primary_code','product_name','$_id','/view','Portuguese\x20(BR)','supplier_docs','getMonth','$due_amount','type','$supplier_docs.email','../models/all_models','../middleware/auth','$suppliers','stock_quantity','primary_code','redirect','product_code','master','product_details.return_qtyproduct_details.return_qty','body','$date','success','findById','258080SMrJAi','$name'];a0_0x44ca=function(){return _0x346edc;};return a0_0x44ca();}var a0_0x22a379=a0_0x2399;(function(_0x5c7b54,_0x4ff245){var _0x3a2316=a0_0x2399,_0x513f2b=_0x5c7b54();while(!![]){try{var _0x24dcd5=parseInt(_0x3a2316(0xc8))/0x1+parseInt(_0x3a2316(0xda))/0x2*(-parseInt(_0x3a2316(0xf2))/0x3)+-parseInt(_0x3a2316(0xe4))/0x4+-parseInt(_0x3a2316(0x104))/0x5+parseInt(_0x3a2316(0xe7))/0x6*(-parseInt(_0x3a2316(0x106))/0x7)+-parseInt(_0x3a2316(0x102))/0x8+parseInt(_0x3a2316(0xf3))/0x9;if(_0x24dcd5===_0x4ff245)break;else _0x513f2b['push'](_0x513f2b['shift']());}catch(_0x4ff27a){_0x513f2b['push'](_0x513f2b['shift']());}}}(a0_0x44ca,0x29241));function a0_0x2399(_0x2f92c0,_0x36c373){var _0x44caf0=a0_0x44ca();return a0_0x2399=function(_0x2399d8,_0x124472){_0x2399d8=_0x2399d8-0xae;var _0x3d2009=_0x44caf0[_0x2399d8];return _0x3d2009;},a0_0x2399(_0x2f92c0,_0x36c373);}const express=require(a0_0x22a379(0x128)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x22a379(0xbb)),auth=require(a0_0x22a379(0xbc)),users=require('../public/language/languages.json');router[a0_0x22a379(0xff)](a0_0x22a379(0xb4),auth,async(_0x455c98,_0x3ef52a)=>{var _0x45039b=a0_0x22a379;try{const {username:_0x5e9123,email:_0x1800ba,role:_0x34912d}=_0x455c98[_0x45039b(0xe3)],_0x4278b3=_0x455c98[_0x45039b(0xe3)],_0x47b0f2=await profile['findOne']({'email':_0x4278b3[_0x45039b(0x10b)]}),_0x21b832=await master_shop[_0x45039b(0xe0)]();console[_0x45039b(0x11c)](_0x45039b(0xc2),_0x21b832);const _0x1ee0f5=await purchases_return[_0x45039b(0xd3)]([{'$lookup':{'from':_0x45039b(0xd4),'localField':_0x45039b(0xd4),'foreignField':_0x45039b(0x114),'as':_0x45039b(0xb6)}},{'$unwind':_0x45039b(0xd1)},{'$unwind':_0x45039b(0xe9)},{'$group':{'_id':_0x45039b(0xb3),'invoice':{'$first':'$invoice'},'date':{'$first':_0x45039b(0xc5)},'suppliers':{'$first':_0x45039b(0xbd)},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':_0x45039b(0xaf)},'return_qty':{'$first':_0x45039b(0xcb)},'price':{'$first':_0x45039b(0xd2)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x45039b(0x103)},'total_amount':{'$first':_0x45039b(0xd5)},'discount':{'$first':'$discount'},'receivable':{'$first':'$receivable'},'received':{'$first':'$received'},'due_amount':{'$first':_0x45039b(0xb8)},'mobile':{'$first':_0x45039b(0x11e)},'email':{'$first':_0x45039b(0xba)},'address':{'$first':_0x45039b(0xd9)},'return_sum_qty':{'$sum':_0x45039b(0xcb)}}}]);console[_0x45039b(0x11c)](_0x1ee0f5);if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0x105)){var _0x1a741e=users['English'];console[_0x45039b(0x11c)](_0x1a741e);}else{if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0xae))var _0x1a741e=users[_0x45039b(0xae)];else{if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0x121))var _0x1a741e=users[_0x45039b(0x121)];else{if(_0x21b832[0x0][_0x45039b(0xfa)]=='Spanish')var _0x1a741e=users[_0x45039b(0xf7)];else{if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0xe1))var _0x1a741e=users[_0x45039b(0xe1)];else{if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0xb5))var _0x1a741e=users[_0x45039b(0x127)];else{if(_0x21b832[0x0]['language']==_0x45039b(0xd8))var _0x1a741e=users[_0x45039b(0xd8)];else{if(_0x21b832[0x0][_0x45039b(0xfa)]==_0x45039b(0xfe))var _0x1a741e=users['Arabic'];}}}}}}}_0x3ef52a[_0x45039b(0xed)](_0x45039b(0x109),{'success':_0x455c98[_0x45039b(0x11a)](_0x45039b(0xc6)),'errors':_0x455c98[_0x45039b(0x11a)](_0x45039b(0xce)),'role':_0x4278b3,'profile':_0x47b0f2,'master_shop':_0x21b832,'user':_0x1ee0f5,'language':_0x1a741e});}catch(_0x5dd0fa){console[_0x45039b(0x11c)](_0x5dd0fa);}}),router[a0_0x22a379(0xff)](a0_0x22a379(0x118),auth,async(_0x41a690,_0x1dd3a3)=>{var _0x253ff6=a0_0x22a379;try{const {username:_0x16c5ab,email:_0x1cc3b7,role:_0x38c8fb}=_0x41a690[_0x253ff6(0xe3)],_0x5a96d1=_0x41a690[_0x253ff6(0xe3)],_0x191c06=await profile['findOne']({'email':_0x5a96d1[_0x253ff6(0x10b)]}),_0x18a28b=await product[_0x253ff6(0xe0)]({}),_0x309752=await master_shop['find']();console[_0x253ff6(0x11c)](_0x253ff6(0xc2),_0x309752),console[_0x253ff6(0x11c)](_0x41a690['body']);const _0xaa42cf=_0x41a690[_0x253ff6(0xdc)]['id'],_0x3e6b46=await purchases_return[_0x253ff6(0xc7)](_0xaa42cf);console['log'](_0x3e6b46);const _0x5b54ad=await warehouse[_0x253ff6(0xd3)]([{'$match':{'name':_0x3e6b46[_0x253ff6(0xd7)],'room':_0x3e6b46['room']}},{'$unwind':_0x253ff6(0x123)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x253ff6(0xef)},'product_stock':{'$first':_0x253ff6(0x10e)},'bay':{'$first':_0x253ff6(0x10c)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x253ff6(0xf4)},'floorlevel':{'$first':_0x253ff6(0xe5)},'primary_code':{'$first':_0x253ff6(0xb1)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x253ff6(0x10a)},'storage':{'$first':_0x253ff6(0xf1)},'rack':{'$first':_0x253ff6(0x108)}}}]);warehouse_data=await warehouse[_0x253ff6(0xd3)]([{'$match':{'status':_0x253ff6(0xfb),'name':_0x253ff6(0x117),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x253ff6(0xc9),'name':{'$first':_0x253ff6(0xc9)}}},{'$sort':{'name':0x1}}]),console[_0x253ff6(0x11c)](_0x253ff6(0x111),_0x5b54ad);if(_0x309752[0x0][_0x253ff6(0xfa)]=='English\x20(US)'){var _0x318987=users[_0x253ff6(0x11b)];console[_0x253ff6(0x11c)](_0x318987);}else{if(_0x309752[0x0]['language']==_0x253ff6(0xae))var _0x318987=users[_0x253ff6(0xae)];else{if(_0x309752[0x0]['language']==_0x253ff6(0x121))var _0x318987=users[_0x253ff6(0x121)];else{if(_0x309752[0x0][_0x253ff6(0xfa)]==_0x253ff6(0xf7))var _0x318987=users[_0x253ff6(0xf7)];else{if(_0x309752[0x0][_0x253ff6(0xfa)]=='French')var _0x318987=users['French'];else{if(_0x309752[0x0][_0x253ff6(0xfa)]==_0x253ff6(0xb5))var _0x318987=users[_0x253ff6(0x127)];else{if(_0x309752[0x0][_0x253ff6(0xfa)]==_0x253ff6(0xd8))var _0x318987=users['Chinese'];else{if(_0x309752[0x0][_0x253ff6(0xfa)]==_0x253ff6(0xfe))var _0x318987=users[_0x253ff6(0x11f)];}}}}}}}_0x1dd3a3[_0x253ff6(0xed)](_0x253ff6(0x116),{'success':_0x41a690[_0x253ff6(0x11a)]('success'),'errors':_0x41a690[_0x253ff6(0x11a)](_0x253ff6(0xce)),'role':_0x5a96d1,'master_shop':_0x309752,'profile':_0x191c06,'user':_0x3e6b46,'stock':_0x5b54ad,'product':_0x18a28b,'language':_0x318987,'warehouse':warehouse_data});}catch(_0x321f11){console[_0x253ff6(0x11c)](_0x321f11);}}),router[a0_0x22a379(0xfd)]('/view/:id',auth,async(_0x1d4616,_0x436ad0)=>{var _0x43f5fd=a0_0x22a379;try{const _0xc8a003=_0x1d4616[_0x43f5fd(0xdc)]['id'];console['log'](_0xc8a003);const _0x515199=await purchases_return[_0x43f5fd(0xec)]({'invoice':_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x119)]});console['log']('old_data',_0x515199);const _0x4c7f65=await warehouse[_0x43f5fd(0xec)]({'name':_0x515199[_0x43f5fd(0xcd)],'room':_0x515199['to_room']});console[_0x43f5fd(0x11c)](_0x43f5fd(0xe2),_0x4c7f65);const {invoice:_0x2b1cc7,suppliers:_0x45b9fd,date:_0x6df193,warehouse_name:_0x3e9e41,product_name:_0x5b00b3,purchase_quantity:_0xdb3553,stocks:_0x3b3881,return_qty:_0x53a9b6,note:_0x295271,Room_name:_0x5a2c72,level:_0x28db36,isle:_0x35ed01,pallet:_0x12aa62,to_warehouse_name:_0x5234a7,to_Room_name:_0x24c60d}=_0x1d4616['body'];if(typeof _0x5b00b3=='string')var _0x198feb=[_0x1d4616[_0x43f5fd(0xc4)]['product_name']],_0x238091=[_0x1d4616['body']['purchase_quantity']],_0x2cabfb=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x10d)]],_0x561075=[_0x1d4616['body'][_0x43f5fd(0xdb)]],_0x58440d=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xf8)]],_0x2d61da=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x125)]],_0x2fd7cb=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xe6)]],_0x1ca5b5=[_0x1d4616[_0x43f5fd(0xc4)]['types']],_0x59b4c8=[_0x1d4616['body']['product_code_hide']],_0xa2799d=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xeb)]],_0x22faaa=[_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x107)]];else var _0x198feb=[..._0x1d4616['body'][_0x43f5fd(0xb2)]],_0x238091=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x110)]],_0x2cabfb=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x10d)]],_0x561075=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xdb)]],_0x58440d=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xf8)]],_0x2d61da=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x125)]],_0x2fd7cb=[..._0x1d4616[_0x43f5fd(0xc4)]['pallet']],_0x59b4c8=[..._0x1d4616['body']['product_code_hide']],_0xa2799d=[..._0x1d4616['body'][_0x43f5fd(0xeb)]],_0x22faaa=[..._0x1d4616['body'][_0x43f5fd(0x107)]],_0x1ca5b5=[..._0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0xee)]];const _0x3593e9=_0x198feb[_0x43f5fd(0x112)](_0x2a349b=>{return _0x2a349b={'product_name':_0x2a349b};});_0x238091[_0x43f5fd(0xd0)]((_0x5b1f8a,_0x1ec9c9)=>{var _0x544563=_0x43f5fd;_0x3593e9[_0x1ec9c9][_0x544563(0x110)]=_0x5b1f8a;}),_0x2cabfb['forEach']((_0x49fad9,_0x12de5a)=>{var _0x125083=_0x43f5fd;_0x3593e9[_0x12de5a][_0x125083(0xbe)]=_0x49fad9;}),_0x561075['forEach']((_0x2ae715,_0x1011be)=>{var _0x48fa23=_0x43f5fd;_0x3593e9[_0x1011be][_0x48fa23(0xdb)]=_0x2ae715;}),_0x58440d[_0x43f5fd(0xd0)]((_0xf96b82,_0x5324ed)=>{var _0x5cf20d=_0x43f5fd;_0x3593e9[_0x5324ed][_0x5cf20d(0x124)]=_0xf96b82;}),_0x2d61da['forEach']((_0x322426,_0x355dcb)=>{var _0x5a4458=_0x43f5fd;_0x3593e9[_0x355dcb][_0x5a4458(0x113)]=_0x322426;}),_0x2fd7cb[_0x43f5fd(0xd0)]((_0x1e104f,_0x1d41d3)=>{var _0x46d622=_0x43f5fd;_0x3593e9[_0x1d41d3][_0x46d622(0x129)]=_0x1e104f;}),_0x59b4c8[_0x43f5fd(0xd0)]((_0x374bc1,_0x29d1e1)=>{var _0x1b740a=_0x43f5fd;_0x3593e9[_0x29d1e1][_0x1b740a(0xc1)]=_0x374bc1;}),_0xa2799d[_0x43f5fd(0xd0)]((_0x4788e0,_0x120ad9)=>{var _0xc189e6=_0x43f5fd;_0x3593e9[_0x120ad9][_0xc189e6(0xbf)]=_0x4788e0;}),_0x22faaa[_0x43f5fd(0xd0)]((_0x25ff74,_0x1a86ef)=>{var _0x329b18=_0x43f5fd;_0x3593e9[_0x1a86ef][_0x329b18(0x11d)]=_0x25ff74;}),_0x1ca5b5['forEach']((_0x5d8490,_0x4b38b5)=>{_0x3593e9[_0x4b38b5]['type']=_0x5d8490;});var _0x20604c=0x0;_0x3593e9[_0x43f5fd(0xd0)](_0x19932d=>{var _0x14ed8e=_0x43f5fd;console['log'](_0x14ed8e(0x126),_0x19932d),(parseInt(_0x19932d[_0x14ed8e(0x110)])<parseInt(_0x19932d['return_qty'])||parseInt(_0x19932d[_0x14ed8e(0xbe)])<parseInt(_0x19932d['return_qty'])||parseInt(_0x19932d[_0x14ed8e(0xdb)])==0x0)&&_0x20604c++;});if(_0x20604c!=0x0)return _0x1d4616[_0x43f5fd(0x11a)](_0x43f5fd(0xce),_0x43f5fd(0xe8)),_0x436ad0[_0x43f5fd(0xc0)]('back');_0x515199[_0x43f5fd(0xca)]['forEach'](_0x78ffca=>{var _0x5ccd0e=_0x43f5fd;const _0x5cd721=_0x4c7f65[_0x5ccd0e(0xfc)][_0x5ccd0e(0x112)](_0x25d5d8=>{var _0x56fbb6=_0x5ccd0e;_0x25d5d8[_0x56fbb6(0xb2)]==_0x78ffca[_0x56fbb6(0xb2)]&&_0x25d5d8[_0x56fbb6(0x129)]==_0x78ffca['floorlevel']&&_0x25d5d8['type']==_0x78ffca[_0x56fbb6(0xb9)]&&_0x25d5d8['bin']==_0x78ffca[_0x56fbb6(0x113)]&&_0x25d5d8['bay']==_0x78ffca[_0x56fbb6(0x124)]&&(_0x25d5d8[_0x56fbb6(0xde)]=parseInt(_0x25d5d8['product_stock'])+parseInt(_0x78ffca[_0x56fbb6(0xdb)]));});}),console[_0x43f5fd(0x11c)]('old_warehouse_data',_0x4c7f65),await _0x4c7f65[_0x43f5fd(0xf6)](),_0x515199[_0x43f5fd(0x119)]=_0x2b1cc7,_0x515199[_0x43f5fd(0xd4)]=_0x45b9fd,_0x515199['date']=_0x6df193,_0x515199[_0x43f5fd(0xd7)]=_0x3e9e41,_0x515199['return_product']=_0x3593e9,_0x515199[_0x43f5fd(0xea)]=_0x295271,_0x515199[_0x43f5fd(0x120)]=_0x5a2c72,_0x515199[_0x43f5fd(0xcd)]=_0x5234a7,_0x515199[_0x43f5fd(0xb0)]=_0x24c60d;const _0x2cf66d=await _0x515199[_0x43f5fd(0xf6)](),_0x10f9bb=await purchases_return[_0x43f5fd(0xec)]({'invoice':_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x119)]}),_0x196c4b=await warehouse[_0x43f5fd(0xec)]({'name':_0x1d4616['body'][_0x43f5fd(0xcd)],'room':_0x1d4616[_0x43f5fd(0xc4)][_0x43f5fd(0x100)]});_0x10f9bb[_0x43f5fd(0xca)][_0x43f5fd(0xd0)](_0x399356=>{var _0x5e4e50=_0x43f5fd;_0x196c4b[_0x5e4e50(0xfc)][_0x5e4e50(0x112)](_0x105f47=>{var _0x573703=_0x5e4e50;_0x105f47['product_name']==_0x399356[_0x573703(0xb2)]&&_0x105f47[_0x573703(0xe6)]==_0x399356['pallet']&&(_0x105f47[_0x573703(0xde)]=parseInt(_0x105f47[_0x573703(0xde)])-parseInt(_0x399356[_0x573703(0xdb)]),console['log'](_0x573703(0xc3),_0x399356[_0x573703(0xdb)]));});}),console[_0x43f5fd(0x11c)]('final',_0x196c4b),await _0x196c4b['save']();const _0x293f12=await s_payment_data[_0x43f5fd(0xec)]({'invoice':_0x1d4616[_0x43f5fd(0xc4)]['invoice'],'reason':_0x43f5fd(0xdf)});await _0x293f12[_0x43f5fd(0xf6)](),_0x1d4616[_0x43f5fd(0x11a)](_0x43f5fd(0xc6),_0x43f5fd(0xdd)),_0x436ad0['redirect'](_0x43f5fd(0xf5));}catch(_0x1d3349){console[_0x43f5fd(0x11c)](_0x1d3349),_0x436ad0[_0x43f5fd(0xcf)](0xc8)[_0x43f5fd(0xf0)]({'message':_0x1d3349['message']});}}),router[a0_0x22a379(0xff)]('/invoice/:id',auth,async(_0x5c223a,_0x576503)=>{var _0x29e600=a0_0x22a379;try{const {username:_0xcdf1b8,email:_0x532bb1,role:_0x4972fb}=_0x5c223a[_0x29e600(0xe3)],_0x42e293=_0x5c223a[_0x29e600(0xe3)],_0x105ed8=await profile['findOne']({'email':_0x42e293['email']}),_0x373ba9=await master_shop[_0x29e600(0xe0)]();console['log'](_0x29e600(0xc2),_0x373ba9);const _0x95e48b=_0x5c223a[_0x29e600(0xdc)]['id'],_0x5315b7=await purchases_return['findById'](_0x95e48b);console[_0x29e600(0x11c)](_0x5315b7);const _0x11510d=await suppliers[_0x29e600(0xec)]({'name':_0x5315b7['suppliers']});console[_0x29e600(0x11c)](_0x11510d);if(_0x373ba9[0x0]['language']==_0x29e600(0x105)){var _0x355caa=users[_0x29e600(0x11b)];console['log'](_0x355caa);}else{if(_0x373ba9[0x0]['language']==_0x29e600(0xae))var _0x355caa=users[_0x29e600(0xae)];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]==_0x29e600(0x121))var _0x355caa=users[_0x29e600(0x121)];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]==_0x29e600(0xf7))var _0x355caa=users['Spanish'];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]==_0x29e600(0xe1))var _0x355caa=users[_0x29e600(0xe1)];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]==_0x29e600(0xb5))var _0x355caa=users[_0x29e600(0x127)];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]==_0x29e600(0xd8))var _0x355caa=users[_0x29e600(0xd8)];else{if(_0x373ba9[0x0][_0x29e600(0xfa)]=='Arabic\x20(ae)')var _0x355caa=users[_0x29e600(0x11f)];}}}}}}}_0x576503[_0x29e600(0xed)]('return_purchase_invoice',{'success':_0x5c223a[_0x29e600(0x11a)](_0x29e600(0xc6)),'errors':_0x5c223a['flash'](_0x29e600(0xce)),'role':_0x42e293,'profile':_0x105ed8,'master_shop':_0x373ba9,'supplier':_0x11510d,'purchase':_0x5315b7,'language':_0x355caa});}catch(_0x1d0081){console[_0x29e600(0x11c)](_0x1d0081);}}),router[a0_0x22a379(0xfd)]('/receive_payment/:id',auth,async(_0x26e541,_0x55b699)=>{var _0x3bb62c=a0_0x22a379;try{const _0x50471e=_0x26e541[_0x3bb62c(0xdc)]['id'],{invoice:_0x25e6e3,suppliers:_0x2bc45d,receivable_amount:_0xd2e802,received_amount:_0x3a3027}=_0x26e541['body'],_0x5121e7=await purchases_return[_0x3bb62c(0xc7)](_0x50471e);console[_0x3bb62c(0x11c)](_0x5121e7);var _0x556ef0=_0xd2e802-_0x3a3027;console[_0x3bb62c(0x11c)](_0x3a3027),_0x5121e7['received']=parseFloat(_0x3a3027)+parseFloat(_0x5121e7[_0x3bb62c(0xd6)]),_0x5121e7[_0x3bb62c(0x122)]=_0x556ef0,console[_0x3bb62c(0x11c)](_0x5121e7);const _0x2b6cf3=await _0x5121e7[_0x3bb62c(0xf6)](),_0x3753ab=await s_payment_data['findOne']({'invoice':_0x26e541[_0x3bb62c(0xc4)][_0x3bb62c(0x119)],'reason':_0x3bb62c(0xdf)});_0x3753ab[_0x3bb62c(0xf9)]=_0x556ef0,await _0x3753ab[_0x3bb62c(0xf6)]();let _0x5a1e26=new Date(),_0x2d4f94=('0'+_0x5a1e26[_0x3bb62c(0x101)]())[_0x3bb62c(0x10f)](-0x2),_0x5d7326=('0'+(_0x5a1e26[_0x3bb62c(0xb7)]()+0x1))[_0x3bb62c(0x10f)](-0x2),_0x33a3fa=_0x5a1e26[_0x3bb62c(0x115)](),_0x161d53=_0x33a3fa+'-'+_0x5d7326+'-'+_0x2d4f94;const _0x48fce5=new suppliers_payment({'invoice':_0x25e6e3,'date':_0x33a3fa+'-'+_0x5d7326+'-'+_0x2d4f94,'suppliers':_0x2bc45d,'reason':_0x3bb62c(0xcc),'amount':_0x3a3027}),_0x780d8d=await _0x48fce5['save']();_0x26e541[_0x3bb62c(0x11a)]('success','payment\x20successfull'),_0x55b699[_0x3bb62c(0xc0)]('/purchases_return/view');}catch(_0x2c9cd9){console['log'](_0x2c9cd9);}}),module['exports']=router;