var a0_0x2e1293=a0_0xa5a8;(function(_0x5b949c,_0x528922){var _0x15e3ab=a0_0xa5a8,_0x18c0cc=_0x5b949c();while(!![]){try{var _0x2d23dc=-parseInt(_0x15e3ab(0x19a))/0x1*(parseInt(_0x15e3ab(0x151))/0x2)+parseInt(_0x15e3ab(0x197))/0x3*(parseInt(_0x15e3ab(0x184))/0x4)+parseInt(_0x15e3ab(0x16e))/0x5+parseInt(_0x15e3ab(0x17e))/0x6+-parseInt(_0x15e3ab(0x144))/0x7+parseInt(_0x15e3ab(0x191))/0x8+-parseInt(_0x15e3ab(0x150))/0x9*(parseInt(_0x15e3ab(0x1ae))/0xa);if(_0x2d23dc===_0x528922)break;else _0x18c0cc['push'](_0x18c0cc['shift']());}catch(_0x302b8e){_0x18c0cc['push'](_0x18c0cc['shift']());}}}(a0_0x5f2a,0xb4753));function a0_0xa5a8(_0x3152ec,_0x2c898e){var _0x5f2a7a=a0_0x5f2a();return a0_0xa5a8=function(_0xa5a873,_0x3ed292){_0xa5a873=_0xa5a873-0x135;var _0x283fa7=_0x5f2a7a[_0xa5a873];return _0x283fa7;},a0_0xa5a8(_0x3152ec,_0x2c898e);}const express=require(a0_0x2e1293(0x170)),app=express(),router=express[a0_0x2e1293(0x160)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x2e1293(0x181)),auth=require(a0_0x2e1293(0x13f)),users=require(a0_0x2e1293(0x158));function a0_0x5f2a(){var _0x268e4b=['back','$product_details.type','email','$supplier_docs','/purchases_return/view','8270ViFkOQ','Arabic','level','$product_details.rack','json','types','$return_product.price','French','redirect','$warehouse_name','success','primary_code_hide','findById','Chinese','/view/:id','$return_product.product_name','post','purchase_quantity','get','Spanish','$name','$supplier_docs.address','../middleware/auth','due_amount','Purchase\x20Return','findOne','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','667366qnsUnw','errors','$due_amount','return_purchase_invoice','forEach','$product_details._id','return_purchase_edit','bay','product_name','$suppliers','pallet','$product_details','25938RPiwjm','22fVIOew','$_id','Hindi','old_data','English','secondary_code','floorlevel','../public/language/languages.json','Received\x20For\x20Purchase\x20Return','product_stock','$receivable','English\x20(US)','Arabic\x20(ae)','Return\x20Goods','product_code_hide','Router','supplier_docs','to_warehouse_name','to_room','flash','language','Raw\x20Materials','string','type','$product_details.product_name','purchase\x20return\x20successfully','product_code','invoice','map','6192880PrpGlS','stock_quantity','express','foreach\x20newproduct','save','payment\x20successfull','status','bin','$product_details.primary_code','primary_code','room','$return_product.return_qty','/invoice/:id','Portuguese','product_details','received','2093322vfeCRJ','aggregate','$product_details.product_code','../models/all_models','message','warehouse_name','51680XEwaVg','return_product','$supplier_docs.mobile','params','/receive_payment/:id','render','stocks','find','$product_details.floorlevel','$return_product.total','isle','Portuguese\x20(BR)','old_warehouse_data','9610408UapoEX','log','user','getFullYear','body','$invoice','330cuwXhP','getMonth','final','90187bmWkXP','suppliers','return_qty','$product_details.bay','German','to_Room_name','getDate','$product_details.storage','$discount','$total_amount','$note','/view','master','slice','Enabled'];a0_0x5f2a=function(){return _0x268e4b;};return a0_0x5f2a();}router[a0_0x2e1293(0x13b)](a0_0x2e1293(0x1a5),auth,async(_0x17a0af,_0x10ae5d)=>{var _0x1f679c=a0_0x2e1293;try{const {username:_0x4e7162,email:_0x561a6d,role:_0x3cddc8}=_0x17a0af[_0x1f679c(0x193)],_0x1ebdb0=_0x17a0af[_0x1f679c(0x193)],_0x586ff5=await profile[_0x1f679c(0x142)]({'email':_0x1ebdb0[_0x1f679c(0x1ab)]}),_0x5683ee=await master_shop[_0x1f679c(0x18b)]();console[_0x1f679c(0x192)](_0x1f679c(0x1a6),_0x5683ee);const _0x4f826d=await purchases_return[_0x1f679c(0x17f)]([{'$lookup':{'from':_0x1f679c(0x19b),'localField':_0x1f679c(0x19b),'foreignField':'name','as':_0x1f679c(0x161)}},{'$unwind':'$return_product'},{'$unwind':_0x1f679c(0x1ac)},{'$group':{'_id':_0x1f679c(0x152),'invoice':{'$first':_0x1f679c(0x196)},'date':{'$first':'$date'},'suppliers':{'$first':_0x1f679c(0x14d)},'warehouse_name':{'$first':_0x1f679c(0x1b7)},'product_name':{'$first':_0x1f679c(0x138)},'return_qty':{'$first':_0x1f679c(0x179)},'price':{'$first':_0x1f679c(0x1b4)},'total':{'$sum':_0x1f679c(0x18d)},'note':{'$first':_0x1f679c(0x1a4)},'total_amount':{'$first':_0x1f679c(0x1a3)},'discount':{'$first':_0x1f679c(0x1a2)},'receivable':{'$first':_0x1f679c(0x15b)},'received':{'$first':'$received'},'due_amount':{'$first':_0x1f679c(0x146)},'mobile':{'$first':_0x1f679c(0x186)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x1f679c(0x13e)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x1f679c(0x192)](_0x4f826d);if(_0x5683ee[0x0][_0x1f679c(0x165)]==_0x1f679c(0x15c)){var _0x279ec9=users[_0x1f679c(0x155)];console['log'](_0x279ec9);}else{if(_0x5683ee[0x0]['language']==_0x1f679c(0x153))var _0x279ec9=users[_0x1f679c(0x153)];else{if(_0x5683ee[0x0][_0x1f679c(0x165)]==_0x1f679c(0x19e))var _0x279ec9=users['German'];else{if(_0x5683ee[0x0][_0x1f679c(0x165)]==_0x1f679c(0x13c))var _0x279ec9=users[_0x1f679c(0x13c)];else{if(_0x5683ee[0x0][_0x1f679c(0x165)]==_0x1f679c(0x1b5))var _0x279ec9=users[_0x1f679c(0x1b5)];else{if(_0x5683ee[0x0][_0x1f679c(0x165)]=='Portuguese\x20(BR)')var _0x279ec9=users[_0x1f679c(0x17b)];else{if(_0x5683ee[0x0][_0x1f679c(0x165)]==_0x1f679c(0x136))var _0x279ec9=users[_0x1f679c(0x136)];else{if(_0x5683ee[0x0]['language']==_0x1f679c(0x15d))var _0x279ec9=users[_0x1f679c(0x1af)];}}}}}}}_0x10ae5d[_0x1f679c(0x189)]('purchases_return',{'success':_0x17a0af[_0x1f679c(0x164)](_0x1f679c(0x1b8)),'errors':_0x17a0af[_0x1f679c(0x164)](_0x1f679c(0x145)),'role':_0x1ebdb0,'profile':_0x586ff5,'master_shop':_0x5683ee,'user':_0x4f826d,'language':_0x279ec9});}catch(_0x1a410f){console[_0x1f679c(0x192)](_0x1a410f);}}),router[a0_0x2e1293(0x13b)](a0_0x2e1293(0x137),auth,async(_0x24ed7e,_0x23904e)=>{var _0xb078dc=a0_0x2e1293;try{const {username:_0xc01329,email:_0x2c38be,role:_0x37d66a}=_0x24ed7e[_0xb078dc(0x193)],_0xd1e9ee=_0x24ed7e[_0xb078dc(0x193)],_0x366aff=await profile[_0xb078dc(0x142)]({'email':_0xd1e9ee[_0xb078dc(0x1ab)]}),_0x5b4d66=await product['find']({}),_0x434035=await master_shop[_0xb078dc(0x18b)]();console['log']('master',_0x434035),console['log'](_0x24ed7e[_0xb078dc(0x195)]);const _0x41dd1a=_0x24ed7e[_0xb078dc(0x187)]['id'],_0x5b2a81=await purchases_return['findById'](_0x41dd1a);console[_0xb078dc(0x192)](_0x5b2a81);const _0x92a806=await warehouse[_0xb078dc(0x17f)]([{'$match':{'name':_0x5b2a81['warehouse_name'],'room':_0x5b2a81[_0xb078dc(0x178)]}},{'$unwind':_0xb078dc(0x14f)},{'$group':{'_id':_0xb078dc(0x149),'name':{'$first':_0xb078dc(0x169)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0xb078dc(0x19d)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0xb078dc(0x1aa)},'floorlevel':{'$first':_0xb078dc(0x18c)},'primary_code':{'$first':_0xb078dc(0x176)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xb078dc(0x180)},'storage':{'$first':_0xb078dc(0x1a1)},'rack':{'$first':_0xb078dc(0x1b1)}}}]);warehouse_data=await warehouse[_0xb078dc(0x17f)]([{'$match':{'status':_0xb078dc(0x1a8),'name':_0xb078dc(0x15e),'warehouse_category':_0xb078dc(0x166)}},{'$group':{'_id':_0xb078dc(0x13d),'name':{'$first':_0xb078dc(0x13d)}}},{'$sort':{'name':0x1}}]),console[_0xb078dc(0x192)]('stock_data',_0x92a806);if(_0x434035[0x0]['language']=='English\x20(US)'){var _0x545fb5=users['English'];console['log'](_0x545fb5);}else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x153))var _0x545fb5=users[_0xb078dc(0x153)];else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x19e))var _0x545fb5=users[_0xb078dc(0x19e)];else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x13c))var _0x545fb5=users[_0xb078dc(0x13c)];else{if(_0x434035[0x0]['language']==_0xb078dc(0x1b5))var _0x545fb5=users['French'];else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x18f))var _0x545fb5=users[_0xb078dc(0x17b)];else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x136))var _0x545fb5=users[_0xb078dc(0x136)];else{if(_0x434035[0x0][_0xb078dc(0x165)]==_0xb078dc(0x15d))var _0x545fb5=users[_0xb078dc(0x1af)];}}}}}}}_0x23904e[_0xb078dc(0x189)](_0xb078dc(0x14a),{'success':_0x24ed7e[_0xb078dc(0x164)](_0xb078dc(0x1b8)),'errors':_0x24ed7e['flash'](_0xb078dc(0x145)),'role':_0xd1e9ee,'master_shop':_0x434035,'profile':_0x366aff,'user':_0x5b2a81,'stock':_0x92a806,'product':_0x5b4d66,'language':_0x545fb5,'warehouse':warehouse_data});}catch(_0x700497){console[_0xb078dc(0x192)](_0x700497);}}),router[a0_0x2e1293(0x139)](a0_0x2e1293(0x137),auth,async(_0x109482,_0x7c1d47)=>{var _0x517a6d=a0_0x2e1293;try{const _0x66b15a=_0x109482[_0x517a6d(0x187)]['id'];console['log'](_0x66b15a);const _0x38801d=await purchases_return[_0x517a6d(0x142)]({'invoice':_0x109482[_0x517a6d(0x195)]['invoice']});console[_0x517a6d(0x192)](_0x517a6d(0x154),_0x38801d);const _0x311d5f=await warehouse[_0x517a6d(0x142)]({'name':_0x38801d['to_warehouse_name'],'room':_0x38801d[_0x517a6d(0x163)]});console[_0x517a6d(0x192)](_0x517a6d(0x190),_0x311d5f);const {invoice:_0x16cc2c,suppliers:_0x90c6f6,date:_0x557471,warehouse_name:_0x3b2a7d,product_name:_0x450923,purchase_quantity:_0x43d78b,stocks:_0x2238d6,return_qty:_0x4e3046,note:_0xf4a13b,Room_name:_0x21d8a9,level:_0x4a66e1,isle:_0x37cd21,pallet:_0x45ea55,to_warehouse_name:_0x3c9f8a,to_Room_name:_0x5c4592}=_0x109482[_0x517a6d(0x195)];if(typeof _0x450923==_0x517a6d(0x167))var _0x2786ae=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x14c)]],_0x5e9d02=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x13a)]],_0x14be10=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x18a)]],_0x5d5df7=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x19c)]],_0x488f44=[_0x109482['body'][_0x517a6d(0x1b0)]],_0x41d9cd=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x18e)]],_0x149e5e=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x14e)]],_0x556313=[_0x109482['body'][_0x517a6d(0x1b3)]],_0x44c09d=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x15f)]],_0x2c7497=[_0x109482[_0x517a6d(0x195)][_0x517a6d(0x1b9)]],_0x58d81a=[_0x109482[_0x517a6d(0x195)]['secondary_code_hide']];else var _0x2786ae=[..._0x109482['body'][_0x517a6d(0x14c)]],_0x5e9d02=[..._0x109482['body'][_0x517a6d(0x13a)]],_0x14be10=[..._0x109482['body']['stocks']],_0x5d5df7=[..._0x109482[_0x517a6d(0x195)]['return_qty']],_0x488f44=[..._0x109482[_0x517a6d(0x195)][_0x517a6d(0x1b0)]],_0x41d9cd=[..._0x109482['body']['isle']],_0x149e5e=[..._0x109482[_0x517a6d(0x195)][_0x517a6d(0x14e)]],_0x44c09d=[..._0x109482[_0x517a6d(0x195)][_0x517a6d(0x15f)]],_0x2c7497=[..._0x109482[_0x517a6d(0x195)][_0x517a6d(0x1b9)]],_0x58d81a=[..._0x109482[_0x517a6d(0x195)]['secondary_code_hide']],_0x556313=[..._0x109482[_0x517a6d(0x195)][_0x517a6d(0x1b3)]];const _0x2f8176=_0x2786ae[_0x517a6d(0x16d)](_0x392aa8=>{return _0x392aa8={'product_name':_0x392aa8};});_0x5e9d02['forEach']((_0x59dd5d,_0x24912c)=>{var _0x229bae=_0x517a6d;_0x2f8176[_0x24912c][_0x229bae(0x13a)]=_0x59dd5d;}),_0x14be10[_0x517a6d(0x148)]((_0xcafc8b,_0x255674)=>{_0x2f8176[_0x255674]['stock_quantity']=_0xcafc8b;}),_0x5d5df7['forEach']((_0x2264fa,_0x4c08ac)=>{var _0x1a9e26=_0x517a6d;_0x2f8176[_0x4c08ac][_0x1a9e26(0x19c)]=_0x2264fa;}),_0x488f44[_0x517a6d(0x148)]((_0x5db192,_0x3000a5)=>{var _0x5d0a47=_0x517a6d;_0x2f8176[_0x3000a5][_0x5d0a47(0x14b)]=_0x5db192;}),_0x41d9cd['forEach']((_0x5f4074,_0x46cb0e)=>{var _0x3cde43=_0x517a6d;_0x2f8176[_0x46cb0e][_0x3cde43(0x175)]=_0x5f4074;}),_0x149e5e[_0x517a6d(0x148)]((_0x5c269e,_0x1701a2)=>{var _0x5d0811=_0x517a6d;_0x2f8176[_0x1701a2][_0x5d0811(0x157)]=_0x5c269e;}),_0x44c09d['forEach']((_0x32ae5a,_0x3c0597)=>{var _0x5d030d=_0x517a6d;_0x2f8176[_0x3c0597][_0x5d030d(0x16b)]=_0x32ae5a;}),_0x2c7497['forEach']((_0x54ae18,_0x2fe360)=>{var _0x1e1d74=_0x517a6d;_0x2f8176[_0x2fe360][_0x1e1d74(0x177)]=_0x54ae18;}),_0x58d81a[_0x517a6d(0x148)]((_0x3faba7,_0x3e1bd6)=>{var _0x5cf4ba=_0x517a6d;_0x2f8176[_0x3e1bd6][_0x5cf4ba(0x156)]=_0x3faba7;}),_0x556313['forEach']((_0x314e21,_0x526419)=>{var _0x22664c=_0x517a6d;_0x2f8176[_0x526419][_0x22664c(0x168)]=_0x314e21;});var _0x2bc5c4=0x0;_0x2f8176['forEach'](_0x46dd59=>{var _0x3e4ccb=_0x517a6d;console['log'](_0x3e4ccb(0x171),_0x46dd59),(parseInt(_0x46dd59[_0x3e4ccb(0x13a)])<parseInt(_0x46dd59[_0x3e4ccb(0x19c)])||parseInt(_0x46dd59[_0x3e4ccb(0x16f)])<parseInt(_0x46dd59[_0x3e4ccb(0x19c)])||parseInt(_0x46dd59[_0x3e4ccb(0x19c)])==0x0)&&_0x2bc5c4++;});if(_0x2bc5c4!=0x0)return _0x109482['flash'](_0x517a6d(0x145),_0x517a6d(0x143)),_0x7c1d47[_0x517a6d(0x1b6)](_0x517a6d(0x1a9));_0x38801d[_0x517a6d(0x185)][_0x517a6d(0x148)](_0xb2eadb=>{var _0x2324f9=_0x517a6d;const _0x2f44fa=_0x311d5f['product_details'][_0x2324f9(0x16d)](_0x39cb19=>{var _0x3b8c07=_0x2324f9;_0x39cb19['product_name']==_0xb2eadb[_0x3b8c07(0x14c)]&&_0x39cb19[_0x3b8c07(0x157)]==_0xb2eadb[_0x3b8c07(0x157)]&&_0x39cb19[_0x3b8c07(0x168)]==_0xb2eadb[_0x3b8c07(0x168)]&&_0x39cb19[_0x3b8c07(0x175)]==_0xb2eadb[_0x3b8c07(0x175)]&&_0x39cb19[_0x3b8c07(0x14b)]==_0xb2eadb[_0x3b8c07(0x14b)]&&(_0x39cb19[_0x3b8c07(0x15a)]=parseInt(_0x39cb19[_0x3b8c07(0x15a)])+parseInt(_0xb2eadb[_0x3b8c07(0x19c)]));});}),console[_0x517a6d(0x192)](_0x517a6d(0x190),_0x311d5f),await _0x311d5f[_0x517a6d(0x172)](),_0x38801d[_0x517a6d(0x16c)]=_0x16cc2c,_0x38801d[_0x517a6d(0x19b)]=_0x90c6f6,_0x38801d['date']=_0x557471,_0x38801d[_0x517a6d(0x183)]=_0x3b2a7d,_0x38801d[_0x517a6d(0x185)]=_0x2f8176,_0x38801d['note']=_0xf4a13b,_0x38801d['room']=_0x21d8a9,_0x38801d[_0x517a6d(0x162)]=_0x3c9f8a,_0x38801d[_0x517a6d(0x163)]=_0x5c4592;const _0x1bb906=await _0x38801d[_0x517a6d(0x172)](),_0x3f4f61=await purchases_return[_0x517a6d(0x142)]({'invoice':_0x109482[_0x517a6d(0x195)][_0x517a6d(0x16c)]}),_0x2e0edb=await warehouse[_0x517a6d(0x142)]({'name':_0x109482[_0x517a6d(0x195)][_0x517a6d(0x162)],'room':_0x109482[_0x517a6d(0x195)][_0x517a6d(0x19f)]});_0x3f4f61[_0x517a6d(0x185)][_0x517a6d(0x148)](_0x1d71af=>{var _0x1b1103=_0x517a6d;_0x2e0edb[_0x1b1103(0x17c)][_0x1b1103(0x16d)](_0x41738f=>{var _0x29e586=_0x1b1103;_0x41738f[_0x29e586(0x14c)]==_0x1d71af[_0x29e586(0x14c)]&&_0x41738f[_0x29e586(0x14e)]==_0x1d71af[_0x29e586(0x14e)]&&(_0x41738f['product_stock']=parseInt(_0x41738f[_0x29e586(0x15a)])-parseInt(_0x1d71af[_0x29e586(0x19c)]),console[_0x29e586(0x192)]('product_details.return_qtyproduct_details.return_qty',_0x1d71af['return_qty']));});}),console[_0x517a6d(0x192)](_0x517a6d(0x199),_0x2e0edb),await _0x2e0edb[_0x517a6d(0x172)]();const _0xf3bbd6=await s_payment_data[_0x517a6d(0x142)]({'invoice':_0x109482[_0x517a6d(0x195)][_0x517a6d(0x16c)],'reason':_0x517a6d(0x141)});await _0xf3bbd6['save'](),_0x109482[_0x517a6d(0x164)](_0x517a6d(0x1b8),_0x517a6d(0x16a)),_0x7c1d47[_0x517a6d(0x1b6)](_0x517a6d(0x1ad));}catch(_0x1e6f70){console[_0x517a6d(0x192)](_0x1e6f70),_0x7c1d47[_0x517a6d(0x174)](0xc8)[_0x517a6d(0x1b2)]({'message':_0x1e6f70[_0x517a6d(0x182)]});}}),router[a0_0x2e1293(0x13b)](a0_0x2e1293(0x17a),auth,async(_0x27249f,_0x31cb60)=>{var _0x1e0111=a0_0x2e1293;try{const {username:_0x3865de,email:_0x3f1f33,role:_0x5ce6da}=_0x27249f[_0x1e0111(0x193)],_0x459601=_0x27249f[_0x1e0111(0x193)],_0x3040b8=await profile['findOne']({'email':_0x459601[_0x1e0111(0x1ab)]}),_0x506a50=await master_shop[_0x1e0111(0x18b)]();console['log'](_0x1e0111(0x1a6),_0x506a50);const _0x3a8a92=_0x27249f['params']['id'],_0x153f66=await purchases_return[_0x1e0111(0x135)](_0x3a8a92);console[_0x1e0111(0x192)](_0x153f66);const _0x3da401=await suppliers[_0x1e0111(0x142)]({'name':_0x153f66['suppliers']});console[_0x1e0111(0x192)](_0x3da401);if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x15c)){var _0x8f3b7b=users[_0x1e0111(0x155)];console['log'](_0x8f3b7b);}else{if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x153))var _0x8f3b7b=users[_0x1e0111(0x153)];else{if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x19e))var _0x8f3b7b=users[_0x1e0111(0x19e)];else{if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x13c))var _0x8f3b7b=users[_0x1e0111(0x13c)];else{if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x1b5))var _0x8f3b7b=users[_0x1e0111(0x1b5)];else{if(_0x506a50[0x0][_0x1e0111(0x165)]==_0x1e0111(0x18f))var _0x8f3b7b=users[_0x1e0111(0x17b)];else{if(_0x506a50[0x0]['language']==_0x1e0111(0x136))var _0x8f3b7b=users[_0x1e0111(0x136)];else{if(_0x506a50[0x0]['language']==_0x1e0111(0x15d))var _0x8f3b7b=users['Arabic'];}}}}}}}_0x31cb60[_0x1e0111(0x189)](_0x1e0111(0x147),{'success':_0x27249f['flash'](_0x1e0111(0x1b8)),'errors':_0x27249f['flash']('errors'),'role':_0x459601,'profile':_0x3040b8,'master_shop':_0x506a50,'supplier':_0x3da401,'purchase':_0x153f66,'language':_0x8f3b7b});}catch(_0xe2fbc4){console['log'](_0xe2fbc4);}}),router['post'](a0_0x2e1293(0x188),auth,async(_0x43b9d2,_0xd9d107)=>{var _0x4a7092=a0_0x2e1293;try{const _0x25d620=_0x43b9d2['params']['id'],{invoice:_0x52bdfe,suppliers:_0x291479,receivable_amount:_0x5c7b7e,received_amount:_0x2a6f97}=_0x43b9d2[_0x4a7092(0x195)],_0x2b9dee=await purchases_return[_0x4a7092(0x135)](_0x25d620);console[_0x4a7092(0x192)](_0x2b9dee);var _0x2acf9e=_0x5c7b7e-_0x2a6f97;console[_0x4a7092(0x192)](_0x2a6f97),_0x2b9dee['received']=parseFloat(_0x2a6f97)+parseFloat(_0x2b9dee[_0x4a7092(0x17d)]),_0x2b9dee[_0x4a7092(0x140)]=_0x2acf9e,console[_0x4a7092(0x192)](_0x2b9dee);const _0x36578e=await _0x2b9dee[_0x4a7092(0x172)](),_0x3608d3=await s_payment_data['findOne']({'invoice':_0x43b9d2['body'][_0x4a7092(0x16c)],'reason':_0x4a7092(0x141)});_0x3608d3['amount']=_0x2acf9e,await _0x3608d3[_0x4a7092(0x172)]();let _0x726f3=new Date(),_0x4b2897=('0'+_0x726f3[_0x4a7092(0x1a0)]())['slice'](-0x2),_0x194f9f=('0'+(_0x726f3[_0x4a7092(0x198)]()+0x1))[_0x4a7092(0x1a7)](-0x2),_0x439c5e=_0x726f3[_0x4a7092(0x194)](),_0x2fe920=_0x439c5e+'-'+_0x194f9f+'-'+_0x4b2897;const _0x73320b=new suppliers_payment({'invoice':_0x52bdfe,'date':_0x439c5e+'-'+_0x194f9f+'-'+_0x4b2897,'suppliers':_0x291479,'reason':_0x4a7092(0x159),'amount':_0x2a6f97}),_0x5f4794=await _0x73320b[_0x4a7092(0x172)]();_0x43b9d2[_0x4a7092(0x164)](_0x4a7092(0x1b8),_0x4a7092(0x173)),_0xd9d107[_0x4a7092(0x1b6)]('/purchases_return/view');}catch(_0x17c782){console[_0x4a7092(0x192)](_0x17c782);}}),module['exports']=router;