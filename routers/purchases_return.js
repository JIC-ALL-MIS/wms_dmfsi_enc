var a0_0xdea7f7=a0_0x4fe1;function a0_0x5a12(){var _0x56fd12=['return_qty','render','$return_product.total','old_data','French','return_purchase_invoice','flash','Raw\x20Materials','invoice','$total_amount','product_name','forEach','aggregate','email','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$product_details.product_stock','final','Portuguese\x20(BR)','207wBuBNz','isle','6284532csWjcR','product_stock','../models/all_models','1268546EdSYGh','3327885XcXpVj','../middleware/auth','$_id','$warehouse_name','bin','206840ZirEOD','Portuguese','/invoice/:id','suppliers','$suppliers','stock_quantity','status','/view/:id','message','$return_product','exports','product_details.return_qtyproduct_details.return_qty','$due_amount','type','$product_details._id','note','purchases_return','$invoice','4VjKnSW','received','$product_details.secondary_code','$product_details.bay','/purchases_return/view','product_details','primary_code','purchase_quantity','$supplier_docs','$date','find','product_code','get','German','../public/language/languages.json','$discount','map','slice','$product_details.type','old_warehouse_data','purchase\x20return\x20successfully','English\x20(US)','types','product_code_hide','Arabic','$supplier_docs.email','8CRiOAV','$name','primary_code_hide','5147912pCrXfw','return_product','success','$return_product.price','name','$product_details.product_name','$product_details.product_code','level','stocks','redirect','date','Purchase\x20Return','findById','post','to_warehouse_name','8664341UtYWep','body','Chinese','foreach\x20newproduct','$return_product.product_name','secondary_code_hide','master','$product_details.floorlevel','pallet','$return_product.return_qty','/receive_payment/:id','Arabic\x20(ae)','language','bay','errors','$supplier_docs.mobile','Spanish','findOne','$product_details.rack','English','payment\x20successfull','$product_details','getDate','Enabled','warehouse_name','amount','Hindi','floorlevel','$product_details.storage','log','1721943MQLQpQ','params','1IVqgOb','json','user','room','due_amount','save','/view','to_room'];a0_0x5a12=function(){return _0x56fd12;};return a0_0x5a12();}function a0_0x4fe1(_0x35cb5b,_0x1bcc84){var _0x5a1223=a0_0x5a12();return a0_0x4fe1=function(_0x4fe1a6,_0x5e6095){_0x4fe1a6=_0x4fe1a6-0x8f;var _0x2a4014=_0x5a1223[_0x4fe1a6];return _0x2a4014;},a0_0x4fe1(_0x35cb5b,_0x1bcc84);}(function(_0xf15b85,_0xc6d29){var _0x282879=a0_0x4fe1,_0x142b7a=_0xf15b85();while(!![]){try{var _0x2dfe8a=-parseInt(_0x282879(0xa7))/0x1*(-parseInt(_0x282879(0xc6))/0x2)+parseInt(_0x282879(0xa5))/0x3*(parseInt(_0x282879(0xde))/0x4)+parseInt(_0x282879(0xc7))/0x5+parseInt(_0x282879(0xc3))/0x6+parseInt(_0x282879(0x10a))/0x7*(-parseInt(_0x282879(0xf8))/0x8)+-parseInt(_0x282879(0xc1))/0x9*(parseInt(_0x282879(0xcc))/0xa)+-parseInt(_0x282879(0xfb))/0xb;if(_0x2dfe8a===_0xc6d29)break;else _0x142b7a['push'](_0x142b7a['shift']());}catch(_0x348eb1){_0x142b7a['push'](_0x142b7a['shift']());}}}(a0_0x5a12,0xb49b6));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0xdea7f7(0xc5)),auth=require(a0_0xdea7f7(0xc8)),users=require(a0_0xdea7f7(0xec));router[a0_0xdea7f7(0xea)](a0_0xdea7f7(0xad),auth,async(_0xc27e83,_0x416447)=>{var _0x5edfcb=a0_0xdea7f7;try{const {username:_0x3c1aba,email:_0x4f4822,role:_0x8c2964}=_0xc27e83['user'],_0x33b0f6=_0xc27e83[_0x5edfcb(0xa9)],_0x307211=await profile['findOne']({'email':_0x33b0f6[_0x5edfcb(0xbc)]}),_0x3ecece=await master_shop[_0x5edfcb(0xe8)]();console[_0x5edfcb(0xa4)]('master',_0x3ecece);const _0x1f129=await purchases_return['aggregate']([{'$lookup':{'from':_0x5edfcb(0xcf),'localField':_0x5edfcb(0xcf),'foreignField':_0x5edfcb(0xff),'as':'supplier_docs'}},{'$unwind':_0x5edfcb(0xd5)},{'$unwind':_0x5edfcb(0xe6)},{'$group':{'_id':_0x5edfcb(0xc9),'invoice':{'$first':_0x5edfcb(0xdd)},'date':{'$first':_0x5edfcb(0xe7)},'suppliers':{'$first':_0x5edfcb(0xd0)},'warehouse_name':{'$first':_0x5edfcb(0xca)},'product_name':{'$first':_0x5edfcb(0x10e)},'return_qty':{'$first':_0x5edfcb(0x90)},'price':{'$first':_0x5edfcb(0xfe)},'total':{'$sum':_0x5edfcb(0xb1)},'note':{'$first':'$note'},'total_amount':{'$first':_0x5edfcb(0xb8)},'discount':{'$first':_0x5edfcb(0xed)},'receivable':{'$first':'$receivable'},'received':{'$first':'$received'},'due_amount':{'$first':_0x5edfcb(0xd8)},'mobile':{'$first':_0x5edfcb(0x96)},'email':{'$first':_0x5edfcb(0xf7)},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x5edfcb(0x90)}}}]);console[_0x5edfcb(0xa4)](_0x1f129);if(_0x3ecece[0x0][_0x5edfcb(0x93)]=='English\x20(US)'){var _0x444d27=users[_0x5edfcb(0x9a)];console[_0x5edfcb(0xa4)](_0x444d27);}else{if(_0x3ecece[0x0]['language']==_0x5edfcb(0xa1))var _0x444d27=users['Hindi'];else{if(_0x3ecece[0x0]['language']==_0x5edfcb(0xeb))var _0x444d27=users[_0x5edfcb(0xeb)];else{if(_0x3ecece[0x0][_0x5edfcb(0x93)]=='Spanish')var _0x444d27=users['Spanish'];else{if(_0x3ecece[0x0][_0x5edfcb(0x93)]==_0x5edfcb(0xb3))var _0x444d27=users[_0x5edfcb(0xb3)];else{if(_0x3ecece[0x0][_0x5edfcb(0x93)]==_0x5edfcb(0xc0))var _0x444d27=users[_0x5edfcb(0xcd)];else{if(_0x3ecece[0x0][_0x5edfcb(0x93)]==_0x5edfcb(0x10c))var _0x444d27=users[_0x5edfcb(0x10c)];else{if(_0x3ecece[0x0][_0x5edfcb(0x93)]==_0x5edfcb(0x92))var _0x444d27=users[_0x5edfcb(0xf6)];}}}}}}}_0x416447['render'](_0x5edfcb(0xdc),{'success':_0xc27e83[_0x5edfcb(0xb5)]('success'),'errors':_0xc27e83[_0x5edfcb(0xb5)]('errors'),'role':_0x33b0f6,'profile':_0x307211,'master_shop':_0x3ecece,'user':_0x1f129,'language':_0x444d27});}catch(_0x10ca8b){console[_0x5edfcb(0xa4)](_0x10ca8b);}}),router[a0_0xdea7f7(0xea)](a0_0xdea7f7(0xd3),auth,async(_0xd336fd,_0x969804)=>{var _0x1c5f25=a0_0xdea7f7;try{const {username:_0x113ccc,email:_0x1e029f,role:_0x2e567b}=_0xd336fd[_0x1c5f25(0xa9)],_0x37a418=_0xd336fd['user'],_0x5040bc=await profile[_0x1c5f25(0x98)]({'email':_0x37a418[_0x1c5f25(0xbc)]}),_0x4b2c52=await product[_0x1c5f25(0xe8)]({}),_0x521e05=await master_shop[_0x1c5f25(0xe8)]();console[_0x1c5f25(0xa4)](_0x1c5f25(0x110),_0x521e05),console[_0x1c5f25(0xa4)](_0xd336fd[_0x1c5f25(0x10b)]);const _0x1861d4=_0xd336fd['params']['id'],_0x2863eb=await purchases_return[_0x1c5f25(0x107)](_0x1861d4);console['log'](_0x2863eb);const _0x548631=await warehouse[_0x1c5f25(0xbb)]([{'$match':{'name':_0x2863eb[_0x1c5f25(0x9f)],'room':_0x2863eb[_0x1c5f25(0xaa)]}},{'$unwind':_0x1c5f25(0x9c)},{'$group':{'_id':_0x1c5f25(0xda),'name':{'$first':_0x1c5f25(0x100)},'product_stock':{'$first':_0x1c5f25(0xbe)},'bay':{'$first':_0x1c5f25(0xe1)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x1c5f25(0xf0)},'floorlevel':{'$first':_0x1c5f25(0x111)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1c5f25(0xe0)},'product_code':{'$first':_0x1c5f25(0x101)},'storage':{'$first':_0x1c5f25(0xa3)},'rack':{'$first':_0x1c5f25(0x99)}}}]);warehouse_data=await warehouse[_0x1c5f25(0xbb)]([{'$match':{'status':_0x1c5f25(0x9e),'name':'Return\x20Goods','warehouse_category':_0x1c5f25(0xb6)}},{'$group':{'_id':_0x1c5f25(0xf9),'name':{'$first':_0x1c5f25(0xf9)}}},{'$sort':{'name':0x1}}]),console[_0x1c5f25(0xa4)]('stock_data',_0x548631);if(_0x521e05[0x0][_0x1c5f25(0x93)]==_0x1c5f25(0xf3)){var _0x20a745=users[_0x1c5f25(0x9a)];console[_0x1c5f25(0xa4)](_0x20a745);}else{if(_0x521e05[0x0][_0x1c5f25(0x93)]=='Hindi')var _0x20a745=users['Hindi'];else{if(_0x521e05[0x0]['language']=='German')var _0x20a745=users[_0x1c5f25(0xeb)];else{if(_0x521e05[0x0][_0x1c5f25(0x93)]==_0x1c5f25(0x97))var _0x20a745=users[_0x1c5f25(0x97)];else{if(_0x521e05[0x0][_0x1c5f25(0x93)]==_0x1c5f25(0xb3))var _0x20a745=users['French'];else{if(_0x521e05[0x0]['language']==_0x1c5f25(0xc0))var _0x20a745=users[_0x1c5f25(0xcd)];else{if(_0x521e05[0x0][_0x1c5f25(0x93)]==_0x1c5f25(0x10c))var _0x20a745=users[_0x1c5f25(0x10c)];else{if(_0x521e05[0x0][_0x1c5f25(0x93)]=='Arabic\x20(ae)')var _0x20a745=users[_0x1c5f25(0xf6)];}}}}}}}_0x969804[_0x1c5f25(0xb0)]('return_purchase_edit',{'success':_0xd336fd[_0x1c5f25(0xb5)](_0x1c5f25(0xfd)),'errors':_0xd336fd[_0x1c5f25(0xb5)](_0x1c5f25(0x95)),'role':_0x37a418,'master_shop':_0x521e05,'profile':_0x5040bc,'user':_0x2863eb,'stock':_0x548631,'product':_0x4b2c52,'language':_0x20a745,'warehouse':warehouse_data});}catch(_0x49e67f){console[_0x1c5f25(0xa4)](_0x49e67f);}}),router[a0_0xdea7f7(0x108)](a0_0xdea7f7(0xd3),auth,async(_0x106ff7,_0x41fefc)=>{var _0x14e2c4=a0_0xdea7f7;try{const _0x7dc346=_0x106ff7[_0x14e2c4(0xa6)]['id'];console[_0x14e2c4(0xa4)](_0x7dc346);const _0x4bca63=await purchases_return[_0x14e2c4(0x98)]({'invoice':_0x106ff7['body'][_0x14e2c4(0xb7)]});console[_0x14e2c4(0xa4)](_0x14e2c4(0xb2),_0x4bca63);const _0x59f37e=await warehouse['findOne']({'name':_0x4bca63[_0x14e2c4(0x109)],'room':_0x4bca63[_0x14e2c4(0xae)]});console[_0x14e2c4(0xa4)](_0x14e2c4(0xf1),_0x59f37e);const {invoice:_0x2a7b4b,suppliers:_0x352007,date:_0x1aff2f,warehouse_name:_0x2603e6,product_name:_0x686413,purchase_quantity:_0x283e13,stocks:_0x1b4935,return_qty:_0x6a0e9d,note:_0x27905a,Room_name:_0x56cd61,level:_0x1dbe7e,isle:_0xf48b7a,pallet:_0x395e5d,to_warehouse_name:_0x3f6426,to_Room_name:_0xaa65e6}=_0x106ff7[_0x14e2c4(0x10b)];if(typeof _0x686413=='string')var _0x4581e9=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xb9)]],_0x526da5=[_0x106ff7[_0x14e2c4(0x10b)]['purchase_quantity']],_0x281058=[_0x106ff7['body'][_0x14e2c4(0x103)]],_0x346d18=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xaf)]],_0x492b2d=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x102)]],_0x52533d=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xc2)]],_0x34a8fe=[_0x106ff7['body']['pallet']],_0x32a860=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xf4)]],_0x4278bd=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xf5)]],_0x1a5746=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xfa)]],_0x54e983=[_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x10f)]];else var _0x4581e9=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xb9)]],_0x526da5=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xe5)]],_0x281058=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x103)]],_0x346d18=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xaf)]],_0x492b2d=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x102)]],_0x52533d=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xc2)]],_0x34a8fe=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x8f)]],_0x4278bd=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xf5)]],_0x1a5746=[..._0x106ff7['body'][_0x14e2c4(0xfa)]],_0x54e983=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0x10f)]],_0x32a860=[..._0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xf4)]];const _0x47a81f=_0x4581e9['map'](_0x3958f9=>{return _0x3958f9={'product_name':_0x3958f9};});_0x526da5['forEach']((_0x1b3b7b,_0x4eaf1f)=>{var _0x3a08dd=_0x14e2c4;_0x47a81f[_0x4eaf1f][_0x3a08dd(0xe5)]=_0x1b3b7b;}),_0x281058[_0x14e2c4(0xba)]((_0x344e37,_0xd62d0b)=>{_0x47a81f[_0xd62d0b]['stock_quantity']=_0x344e37;}),_0x346d18['forEach']((_0x58191d,_0x1b027b)=>{var _0x3643b6=_0x14e2c4;_0x47a81f[_0x1b027b][_0x3643b6(0xaf)]=_0x58191d;}),_0x492b2d[_0x14e2c4(0xba)]((_0x22015a,_0x3dc7f8)=>{_0x47a81f[_0x3dc7f8]['bay']=_0x22015a;}),_0x52533d[_0x14e2c4(0xba)]((_0x5dc2ba,_0x47a88a)=>{var _0x5efd6c=_0x14e2c4;_0x47a81f[_0x47a88a][_0x5efd6c(0xcb)]=_0x5dc2ba;}),_0x34a8fe[_0x14e2c4(0xba)]((_0x5a271d,_0x258fb2)=>{var _0x4dc950=_0x14e2c4;_0x47a81f[_0x258fb2][_0x4dc950(0xa2)]=_0x5a271d;}),_0x4278bd['forEach']((_0x3ce010,_0x121141)=>{var _0x59734f=_0x14e2c4;_0x47a81f[_0x121141][_0x59734f(0xe9)]=_0x3ce010;}),_0x1a5746[_0x14e2c4(0xba)]((_0x3012c6,_0x24ac83)=>{var _0x266bf4=_0x14e2c4;_0x47a81f[_0x24ac83][_0x266bf4(0xe4)]=_0x3012c6;}),_0x54e983[_0x14e2c4(0xba)]((_0x52260c,_0x46bf1d)=>{_0x47a81f[_0x46bf1d]['secondary_code']=_0x52260c;}),_0x32a860['forEach']((_0x2fbf4d,_0x35d408)=>{var _0x443c65=_0x14e2c4;_0x47a81f[_0x35d408][_0x443c65(0xd9)]=_0x2fbf4d;});var _0x5c2a9d=0x0;_0x47a81f[_0x14e2c4(0xba)](_0xfc0687=>{var _0x3f322b=_0x14e2c4;console['log'](_0x3f322b(0x10d),_0xfc0687),(parseInt(_0xfc0687['purchase_quantity'])<parseInt(_0xfc0687['return_qty'])||parseInt(_0xfc0687[_0x3f322b(0xd1)])<parseInt(_0xfc0687[_0x3f322b(0xaf)])||parseInt(_0xfc0687[_0x3f322b(0xaf)])==0x0)&&_0x5c2a9d++;});if(_0x5c2a9d!=0x0)return _0x106ff7[_0x14e2c4(0xb5)](_0x14e2c4(0x95),_0x14e2c4(0xbd)),_0x41fefc[_0x14e2c4(0x104)]('back');_0x4bca63['return_product'][_0x14e2c4(0xba)](_0x1e2136=>{var _0x27b068=_0x14e2c4;const _0x17cbde=_0x59f37e[_0x27b068(0xe3)][_0x27b068(0xee)](_0x5256f2=>{var _0x59b5e0=_0x27b068;_0x5256f2[_0x59b5e0(0xb9)]==_0x1e2136[_0x59b5e0(0xb9)]&&_0x5256f2[_0x59b5e0(0xa2)]==_0x1e2136['floorlevel']&&_0x5256f2[_0x59b5e0(0xd9)]==_0x1e2136[_0x59b5e0(0xd9)]&&_0x5256f2['bin']==_0x1e2136[_0x59b5e0(0xcb)]&&_0x5256f2[_0x59b5e0(0x94)]==_0x1e2136[_0x59b5e0(0x94)]&&(_0x5256f2['product_stock']=parseInt(_0x5256f2[_0x59b5e0(0xc4)])+parseInt(_0x1e2136[_0x59b5e0(0xaf)]));});}),console['log'](_0x14e2c4(0xf1),_0x59f37e),await _0x59f37e[_0x14e2c4(0xac)](),_0x4bca63[_0x14e2c4(0xb7)]=_0x2a7b4b,_0x4bca63[_0x14e2c4(0xcf)]=_0x352007,_0x4bca63[_0x14e2c4(0x105)]=_0x1aff2f,_0x4bca63[_0x14e2c4(0x9f)]=_0x2603e6,_0x4bca63['return_product']=_0x47a81f,_0x4bca63[_0x14e2c4(0xdb)]=_0x27905a,_0x4bca63[_0x14e2c4(0xaa)]=_0x56cd61,_0x4bca63[_0x14e2c4(0x109)]=_0x3f6426,_0x4bca63[_0x14e2c4(0xae)]=_0xaa65e6;const _0x3c4c34=await _0x4bca63['save'](),_0xbbbd74=await purchases_return[_0x14e2c4(0x98)]({'invoice':_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xb7)]}),_0x29041e=await warehouse['findOne']({'name':_0x106ff7[_0x14e2c4(0x10b)]['to_warehouse_name'],'room':_0x106ff7[_0x14e2c4(0x10b)]['to_Room_name']});_0xbbbd74[_0x14e2c4(0xfc)]['forEach'](_0x57e6cc=>{var _0x5eba80=_0x14e2c4;_0x29041e[_0x5eba80(0xe3)]['map'](_0x1c2eaf=>{var _0x29588a=_0x5eba80;_0x1c2eaf[_0x29588a(0xb9)]==_0x57e6cc[_0x29588a(0xb9)]&&_0x1c2eaf[_0x29588a(0x8f)]==_0x57e6cc[_0x29588a(0x8f)]&&(_0x1c2eaf[_0x29588a(0xc4)]=parseInt(_0x1c2eaf['product_stock'])-parseInt(_0x57e6cc[_0x29588a(0xaf)]),console[_0x29588a(0xa4)](_0x29588a(0xd7),_0x57e6cc[_0x29588a(0xaf)]));});}),console[_0x14e2c4(0xa4)](_0x14e2c4(0xbf),_0x29041e),await _0x29041e[_0x14e2c4(0xac)]();const _0x3dbb2c=await s_payment_data[_0x14e2c4(0x98)]({'invoice':_0x106ff7[_0x14e2c4(0x10b)][_0x14e2c4(0xb7)],'reason':_0x14e2c4(0x106)});await _0x3dbb2c[_0x14e2c4(0xac)](),_0x106ff7['flash'](_0x14e2c4(0xfd),_0x14e2c4(0xf2)),_0x41fefc[_0x14e2c4(0x104)](_0x14e2c4(0xe2));}catch(_0x1c4851){console[_0x14e2c4(0xa4)](_0x1c4851),_0x41fefc[_0x14e2c4(0xd2)](0xc8)[_0x14e2c4(0xa8)]({'message':_0x1c4851[_0x14e2c4(0xd4)]});}}),router['get'](a0_0xdea7f7(0xce),auth,async(_0x4b9712,_0x41aac)=>{var _0x2b7de2=a0_0xdea7f7;try{const {username:_0x3574a8,email:_0xdf19aa,role:_0x241918}=_0x4b9712[_0x2b7de2(0xa9)],_0x2c60ca=_0x4b9712['user'],_0x5c15ee=await profile[_0x2b7de2(0x98)]({'email':_0x2c60ca[_0x2b7de2(0xbc)]}),_0x27a1ee=await master_shop[_0x2b7de2(0xe8)]();console[_0x2b7de2(0xa4)](_0x2b7de2(0x110),_0x27a1ee);const _0x168d09=_0x4b9712[_0x2b7de2(0xa6)]['id'],_0x4851e2=await purchases_return[_0x2b7de2(0x107)](_0x168d09);console[_0x2b7de2(0xa4)](_0x4851e2);const _0x533b98=await suppliers[_0x2b7de2(0x98)]({'name':_0x4851e2[_0x2b7de2(0xcf)]});console[_0x2b7de2(0xa4)](_0x533b98);if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0xf3)){var _0x24339a=users[_0x2b7de2(0x9a)];console[_0x2b7de2(0xa4)](_0x24339a);}else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0xa1))var _0x24339a=users[_0x2b7de2(0xa1)];else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0xeb))var _0x24339a=users['German'];else{if(_0x27a1ee[0x0]['language']==_0x2b7de2(0x97))var _0x24339a=users['Spanish'];else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0xb3))var _0x24339a=users['French'];else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0xc0))var _0x24339a=users[_0x2b7de2(0xcd)];else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]==_0x2b7de2(0x10c))var _0x24339a=users['Chinese'];else{if(_0x27a1ee[0x0][_0x2b7de2(0x93)]=='Arabic\x20(ae)')var _0x24339a=users['Arabic'];}}}}}}}_0x41aac[_0x2b7de2(0xb0)](_0x2b7de2(0xb4),{'success':_0x4b9712[_0x2b7de2(0xb5)](_0x2b7de2(0xfd)),'errors':_0x4b9712[_0x2b7de2(0xb5)](_0x2b7de2(0x95)),'role':_0x2c60ca,'profile':_0x5c15ee,'master_shop':_0x27a1ee,'supplier':_0x533b98,'purchase':_0x4851e2,'language':_0x24339a});}catch(_0x4c6956){console[_0x2b7de2(0xa4)](_0x4c6956);}}),router[a0_0xdea7f7(0x108)](a0_0xdea7f7(0x91),auth,async(_0x2ecf70,_0x44bdd5)=>{var _0x1905d1=a0_0xdea7f7;try{const _0x1f9c73=_0x2ecf70[_0x1905d1(0xa6)]['id'],{invoice:_0x31d23d,suppliers:_0xe56194,receivable_amount:_0xfd5125,received_amount:_0x30c019}=_0x2ecf70[_0x1905d1(0x10b)],_0x7b5dc5=await purchases_return[_0x1905d1(0x107)](_0x1f9c73);console[_0x1905d1(0xa4)](_0x7b5dc5);var _0x35170a=_0xfd5125-_0x30c019;console[_0x1905d1(0xa4)](_0x30c019),_0x7b5dc5[_0x1905d1(0xdf)]=parseFloat(_0x30c019)+parseFloat(_0x7b5dc5[_0x1905d1(0xdf)]),_0x7b5dc5[_0x1905d1(0xab)]=_0x35170a,console[_0x1905d1(0xa4)](_0x7b5dc5);const _0x550f39=await _0x7b5dc5['save'](),_0x3ae92f=await s_payment_data['findOne']({'invoice':_0x2ecf70[_0x1905d1(0x10b)][_0x1905d1(0xb7)],'reason':'Purchase\x20Return'});_0x3ae92f[_0x1905d1(0xa0)]=_0x35170a,await _0x3ae92f[_0x1905d1(0xac)]();let _0x45262e=new Date(),_0xb39efa=('0'+_0x45262e[_0x1905d1(0x9d)]())[_0x1905d1(0xef)](-0x2),_0x524583=('0'+(_0x45262e['getMonth']()+0x1))['slice'](-0x2),_0x320373=_0x45262e['getFullYear'](),_0x9d8295=_0x320373+'-'+_0x524583+'-'+_0xb39efa;const _0x47abbd=new suppliers_payment({'invoice':_0x31d23d,'date':_0x320373+'-'+_0x524583+'-'+_0xb39efa,'suppliers':_0xe56194,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x30c019}),_0x512584=await _0x47abbd[_0x1905d1(0xac)]();_0x2ecf70[_0x1905d1(0xb5)](_0x1905d1(0xfd),_0x1905d1(0x9b)),_0x44bdd5[_0x1905d1(0x104)]('/purchases_return/view');}catch(_0x2e2148){console[_0x1905d1(0xa4)](_0x2e2148);}}),module[a0_0xdea7f7(0xd6)]=router;