var a0_0x39a7fd=a0_0x3004;function a0_0x3004(_0x5bcaee,_0x3f4440){var _0x33fc39=a0_0x33fc();return a0_0x3004=function(_0x3004c2,_0x5a5bae){_0x3004c2=_0x3004c2-0x14b;var _0x5e4a05=_0x33fc39[_0x3004c2];return _0x5e4a05;},a0_0x3004(_0x5bcaee,_0x3f4440);}(function(_0x32cf36,_0x4a1a1d){var _0x1be70e=a0_0x3004,_0x3c943c=_0x32cf36();while(!![]){try{var _0x55e468=-parseInt(_0x1be70e(0x163))/0x1+parseInt(_0x1be70e(0x16c))/0x2+parseInt(_0x1be70e(0x177))/0x3*(-parseInt(_0x1be70e(0x1be))/0x4)+parseInt(_0x1be70e(0x193))/0x5+-parseInt(_0x1be70e(0x1c6))/0x6+-parseInt(_0x1be70e(0x1b8))/0x7+parseInt(_0x1be70e(0x195))/0x8;if(_0x55e468===_0x4a1a1d)break;else _0x3c943c['push'](_0x3c943c['shift']());}catch(_0x17247c){_0x3c943c['push'](_0x3c943c['shift']());}}}(a0_0x33fc,0x491f2));function a0_0x33fc(){var _0x98752f=['stock_quantity','user','131045ZrrVQR','received','11607704sOKIgD','$product_details.secondary_code','product_name','getDate','Hindi','$note','to_Room_name','render','purchase\x20return\x20successfully','invoice','bin','$product_details.bay','floorlevel','German','../middleware/auth','warehouse_name','$product_details.primary_code','Portuguese\x20(BR)','foreach\x20newproduct','Purchase\x20Return','purchases_return','../public/language/languages.json','Router','errors','/invoice/:id','getMonth','room','$product_details._id','master','email','../models/all_models','map','$supplier_docs.mobile','$product_details.type','$discount','3481317FGbkJv','old_data','to_room','params','$warehouse_name','/view','3816ulAEbk','purchase_quantity','exports','/purchases_return/view','date','Received\x20For\x20Purchase\x20Return','$_id','product_details.return_qtyproduct_details.return_qty','1561500pIjICw','$date','status','findOne','$product_details','pallet','$total_amount','Chinese','$receivable','to_warehouse_name','Spanish','return_qty','supplier_docs','Enabled','isle','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$supplier_docs','$product_details.product_name','slice','types','message','level','English','bay','findById','getFullYear','311861LHHriB','product_code_hide','log','Portuguese','save','final','French','return_purchase_edit','$suppliers','58304mFrdky','suppliers','language','$product_details.storage','back','$product_details.product_code','aggregate','$return_product.return_qty','body','$due_amount','stocks','432Lpltug','$name','redirect','find','Arabic\x20(ae)','return_product','payment\x20successfull','name','$supplier_docs.email','type','flash','primary_code_hide','/view/:id','forEach','old_warehouse_data','get','secondary_code_hide','$return_product.total','$return_product.price','secondary_code','English\x20(US)','$received','product_stock','$product_details.product_stock','success','note'];a0_0x33fc=function(){return _0x98752f;};return a0_0x33fc();}const express=require('express'),app=express(),router=express[a0_0x39a7fd(0x1ab)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x39a7fd(0x1b3)),auth=require(a0_0x39a7fd(0x1a3)),users=require(a0_0x39a7fd(0x1aa));router[a0_0x39a7fd(0x186)](a0_0x39a7fd(0x1bd),auth,async(_0x39951e,_0x4798ae)=>{var _0x3b7d6a=a0_0x39a7fd;try{const {username:_0x10c2ad,email:_0x2234a7,role:_0x39cea9}=_0x39951e[_0x3b7d6a(0x192)],_0x376541=_0x39951e['user'],_0x1d8ba4=await profile['findOne']({'email':_0x376541['email']}),_0x2efee7=await master_shop[_0x3b7d6a(0x17a)]();console[_0x3b7d6a(0x165)](_0x3b7d6a(0x1b1),_0x2efee7);const _0x34a53b=await purchases_return[_0x3b7d6a(0x172)]([{'$lookup':{'from':_0x3b7d6a(0x16d),'localField':_0x3b7d6a(0x16d),'foreignField':_0x3b7d6a(0x17e),'as':_0x3b7d6a(0x155)}},{'$unwind':'$return_product'},{'$unwind':_0x3b7d6a(0x159)},{'$group':{'_id':_0x3b7d6a(0x1c4),'invoice':{'$first':'$invoice'},'date':{'$first':_0x3b7d6a(0x1c7)},'suppliers':{'$first':_0x3b7d6a(0x16b)},'warehouse_name':{'$first':_0x3b7d6a(0x1bc)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x3b7d6a(0x189)},'total':{'$sum':_0x3b7d6a(0x188)},'note':{'$first':_0x3b7d6a(0x19a)},'total_amount':{'$first':_0x3b7d6a(0x14f)},'discount':{'$first':_0x3b7d6a(0x1b7)},'receivable':{'$first':_0x3b7d6a(0x151)},'received':{'$first':_0x3b7d6a(0x18c)},'due_amount':{'$first':_0x3b7d6a(0x175)},'mobile':{'$first':_0x3b7d6a(0x1b5)},'email':{'$first':_0x3b7d6a(0x17f)},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x3b7d6a(0x173)}}}]);console[_0x3b7d6a(0x165)](_0x34a53b);if(_0x2efee7[0x0]['language']==_0x3b7d6a(0x18b)){var _0x3298dd=users[_0x3b7d6a(0x15f)];console[_0x3b7d6a(0x165)](_0x3298dd);}else{if(_0x2efee7[0x0][_0x3b7d6a(0x16e)]==_0x3b7d6a(0x199))var _0x3298dd=users[_0x3b7d6a(0x199)];else{if(_0x2efee7[0x0]['language']==_0x3b7d6a(0x1a2))var _0x3298dd=users['German'];else{if(_0x2efee7[0x0]['language']=='Spanish')var _0x3298dd=users[_0x3b7d6a(0x153)];else{if(_0x2efee7[0x0]['language']==_0x3b7d6a(0x169))var _0x3298dd=users[_0x3b7d6a(0x169)];else{if(_0x2efee7[0x0][_0x3b7d6a(0x16e)]=='Portuguese\x20(BR)')var _0x3298dd=users['Portuguese'];else{if(_0x2efee7[0x0][_0x3b7d6a(0x16e)]==_0x3b7d6a(0x150))var _0x3298dd=users[_0x3b7d6a(0x150)];else{if(_0x2efee7[0x0]['language']=='Arabic\x20(ae)')var _0x3298dd=users['Arabic'];}}}}}}}_0x4798ae['render'](_0x3b7d6a(0x1a9),{'success':_0x39951e['flash']('success'),'errors':_0x39951e[_0x3b7d6a(0x181)]('errors'),'role':_0x376541,'profile':_0x1d8ba4,'master_shop':_0x2efee7,'user':_0x34a53b,'language':_0x3298dd});}catch(_0x2f8324){console[_0x3b7d6a(0x165)](_0x2f8324);}}),router['get'](a0_0x39a7fd(0x183),auth,async(_0x518dc1,_0x7a4535)=>{var _0x2887d6=a0_0x39a7fd;try{const {username:_0x51d479,email:_0xf58e18,role:_0x1853e8}=_0x518dc1[_0x2887d6(0x192)],_0x261cc5=_0x518dc1[_0x2887d6(0x192)],_0xaca9d=await profile[_0x2887d6(0x14c)]({'email':_0x261cc5[_0x2887d6(0x1b2)]}),_0x2b2d6f=await product[_0x2887d6(0x17a)]({}),_0x19912f=await master_shop['find']();console[_0x2887d6(0x165)](_0x2887d6(0x1b1),_0x19912f),console[_0x2887d6(0x165)](_0x518dc1[_0x2887d6(0x174)]);const _0x136b1f=_0x518dc1[_0x2887d6(0x1bb)]['id'],_0x437f17=await purchases_return['findById'](_0x136b1f);console['log'](_0x437f17);const _0x1ec112=await warehouse['aggregate']([{'$match':{'name':_0x437f17[_0x2887d6(0x1a4)],'room':_0x437f17['room']}},{'$unwind':_0x2887d6(0x14d)},{'$group':{'_id':_0x2887d6(0x1b0),'name':{'$first':_0x2887d6(0x15a)},'product_stock':{'$first':_0x2887d6(0x18e)},'bay':{'$first':_0x2887d6(0x1a0)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x2887d6(0x1b6)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x2887d6(0x1a5)},'secondary_code':{'$first':_0x2887d6(0x196)},'product_code':{'$first':_0x2887d6(0x171)},'storage':{'$first':_0x2887d6(0x16f)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x2887d6(0x172)]([{'$match':{'status':_0x2887d6(0x156),'name':'Return\x20Goods','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x2887d6(0x178),'name':{'$first':_0x2887d6(0x178)}}},{'$sort':{'name':0x1}}]),console[_0x2887d6(0x165)]('stock_data',_0x1ec112);if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x18b)){var _0x2d89a6=users['English'];console[_0x2887d6(0x165)](_0x2d89a6);}else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x199))var _0x2d89a6=users['Hindi'];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x1a2))var _0x2d89a6=users[_0x2887d6(0x1a2)];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x153))var _0x2d89a6=users[_0x2887d6(0x153)];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x169))var _0x2d89a6=users['French'];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x1a6))var _0x2d89a6=users[_0x2887d6(0x166)];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]=='Chinese')var _0x2d89a6=users[_0x2887d6(0x150)];else{if(_0x19912f[0x0][_0x2887d6(0x16e)]==_0x2887d6(0x17b))var _0x2d89a6=users['Arabic'];}}}}}}}_0x7a4535[_0x2887d6(0x19c)](_0x2887d6(0x16a),{'success':_0x518dc1[_0x2887d6(0x181)](_0x2887d6(0x18f)),'errors':_0x518dc1[_0x2887d6(0x181)](_0x2887d6(0x1ac)),'role':_0x261cc5,'master_shop':_0x19912f,'profile':_0xaca9d,'user':_0x437f17,'stock':_0x1ec112,'product':_0x2b2d6f,'language':_0x2d89a6,'warehouse':warehouse_data});}catch(_0x43b4ad){console[_0x2887d6(0x165)](_0x43b4ad);}}),router['post'](a0_0x39a7fd(0x183),auth,async(_0x1827df,_0x37602d)=>{var _0x138dd7=a0_0x39a7fd;try{const _0xe91aed=_0x1827df[_0x138dd7(0x1bb)]['id'];console[_0x138dd7(0x165)](_0xe91aed);const _0x2ba3e5=await purchases_return[_0x138dd7(0x14c)]({'invoice':_0x1827df[_0x138dd7(0x174)]['invoice']});console[_0x138dd7(0x165)](_0x138dd7(0x1b9),_0x2ba3e5);const _0x5d8e47=await warehouse[_0x138dd7(0x14c)]({'name':_0x2ba3e5['to_warehouse_name'],'room':_0x2ba3e5[_0x138dd7(0x1ba)]});console['log']('old_warehouse_data',_0x5d8e47);const {invoice:_0x1a5d61,suppliers:_0x49cbfe,date:_0xfb820d,warehouse_name:_0x284255,product_name:_0x1173f3,purchase_quantity:_0x3a69ca,stocks:_0x405bd5,return_qty:_0x4f0304,note:_0x24ccb3,Room_name:_0x2a4345,level:_0x27c020,isle:_0x541b57,pallet:_0x3c5a96,to_warehouse_name:_0xb9b97,to_Room_name:_0x27617d}=_0x1827df['body'];if(typeof _0x1173f3=='string')var _0x182791=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x197)]],_0x1b9417=[_0x1827df[_0x138dd7(0x174)]['purchase_quantity']],_0x4f7a6c=[_0x1827df['body'][_0x138dd7(0x176)]],_0x1d436f=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x154)]],_0x457a3e=[_0x1827df['body'][_0x138dd7(0x15e)]],_0x44612d=[_0x1827df[_0x138dd7(0x174)]['isle']],_0x39fa65=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x14e)]],_0x517d42=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x15c)]],_0x237aea=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x164)]],_0x48c3dd=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x182)]],_0x25f6a3=[_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x187)]];else var _0x182791=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x197)]],_0x1b9417=[..._0x1827df['body'][_0x138dd7(0x1bf)]],_0x4f7a6c=[..._0x1827df['body'][_0x138dd7(0x176)]],_0x1d436f=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x154)]],_0x457a3e=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x15e)]],_0x44612d=[..._0x1827df['body'][_0x138dd7(0x157)]],_0x39fa65=[..._0x1827df[_0x138dd7(0x174)]['pallet']],_0x237aea=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x164)]],_0x48c3dd=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x182)]],_0x25f6a3=[..._0x1827df[_0x138dd7(0x174)][_0x138dd7(0x187)]],_0x517d42=[..._0x1827df['body'][_0x138dd7(0x15c)]];const _0x59bbb7=_0x182791['map'](_0x4ec21a=>{return _0x4ec21a={'product_name':_0x4ec21a};});_0x1b9417[_0x138dd7(0x184)]((_0x304903,_0x296561)=>{var _0x4783d4=_0x138dd7;_0x59bbb7[_0x296561][_0x4783d4(0x1bf)]=_0x304903;}),_0x4f7a6c['forEach']((_0x23f997,_0x5c9416)=>{var _0x205725=_0x138dd7;_0x59bbb7[_0x5c9416][_0x205725(0x191)]=_0x23f997;}),_0x1d436f[_0x138dd7(0x184)]((_0x2f1e2c,_0x2988c8)=>{_0x59bbb7[_0x2988c8]['return_qty']=_0x2f1e2c;}),_0x457a3e[_0x138dd7(0x184)]((_0x381779,_0xa25122)=>{var _0x4b2629=_0x138dd7;_0x59bbb7[_0xa25122][_0x4b2629(0x160)]=_0x381779;}),_0x44612d[_0x138dd7(0x184)]((_0x51798a,_0x1764f8)=>{var _0x39a0e8=_0x138dd7;_0x59bbb7[_0x1764f8][_0x39a0e8(0x19f)]=_0x51798a;}),_0x39fa65['forEach']((_0x24eac4,_0x433261)=>{var _0x19254b=_0x138dd7;_0x59bbb7[_0x433261][_0x19254b(0x1a1)]=_0x24eac4;}),_0x237aea['forEach']((_0x55f574,_0x50dbfa)=>{_0x59bbb7[_0x50dbfa]['product_code']=_0x55f574;}),_0x48c3dd[_0x138dd7(0x184)]((_0x30357f,_0x4408b1)=>{_0x59bbb7[_0x4408b1]['primary_code']=_0x30357f;}),_0x25f6a3[_0x138dd7(0x184)]((_0xd84703,_0x4c4370)=>{var _0x1c3501=_0x138dd7;_0x59bbb7[_0x4c4370][_0x1c3501(0x18a)]=_0xd84703;}),_0x517d42['forEach']((_0xb0e07,_0x40174b)=>{var _0x2b654b=_0x138dd7;_0x59bbb7[_0x40174b][_0x2b654b(0x180)]=_0xb0e07;});var _0x1d2584=0x0;_0x59bbb7[_0x138dd7(0x184)](_0x5a45c8=>{var _0x14cbe7=_0x138dd7;console['log'](_0x14cbe7(0x1a7),_0x5a45c8),(parseInt(_0x5a45c8['purchase_quantity'])<parseInt(_0x5a45c8['return_qty'])||parseInt(_0x5a45c8[_0x14cbe7(0x191)])<parseInt(_0x5a45c8[_0x14cbe7(0x154)])||parseInt(_0x5a45c8['return_qty'])==0x0)&&_0x1d2584++;});if(_0x1d2584!=0x0)return _0x1827df['flash'](_0x138dd7(0x1ac),_0x138dd7(0x158)),_0x37602d[_0x138dd7(0x179)](_0x138dd7(0x170));_0x2ba3e5[_0x138dd7(0x17c)][_0x138dd7(0x184)](_0x5298f8=>{var _0x21194d=_0x138dd7;const _0x30513b=_0x5d8e47['product_details'][_0x21194d(0x1b4)](_0x31f6f7=>{var _0x124751=_0x21194d;_0x31f6f7[_0x124751(0x197)]==_0x5298f8[_0x124751(0x197)]&&_0x31f6f7['floorlevel']==_0x5298f8[_0x124751(0x1a1)]&&_0x31f6f7['type']==_0x5298f8[_0x124751(0x180)]&&_0x31f6f7[_0x124751(0x19f)]==_0x5298f8['bin']&&_0x31f6f7[_0x124751(0x160)]==_0x5298f8[_0x124751(0x160)]&&(_0x31f6f7[_0x124751(0x18d)]=parseInt(_0x31f6f7[_0x124751(0x18d)])+parseInt(_0x5298f8[_0x124751(0x154)]));});}),console[_0x138dd7(0x165)](_0x138dd7(0x185),_0x5d8e47),await _0x5d8e47[_0x138dd7(0x167)](),_0x2ba3e5[_0x138dd7(0x19e)]=_0x1a5d61,_0x2ba3e5[_0x138dd7(0x16d)]=_0x49cbfe,_0x2ba3e5[_0x138dd7(0x1c2)]=_0xfb820d,_0x2ba3e5[_0x138dd7(0x1a4)]=_0x284255,_0x2ba3e5[_0x138dd7(0x17c)]=_0x59bbb7,_0x2ba3e5[_0x138dd7(0x190)]=_0x24ccb3,_0x2ba3e5[_0x138dd7(0x1af)]=_0x2a4345,_0x2ba3e5[_0x138dd7(0x152)]=_0xb9b97,_0x2ba3e5['to_room']=_0x27617d;const _0x31b9ab=await _0x2ba3e5['save'](),_0x14d957=await purchases_return[_0x138dd7(0x14c)]({'invoice':_0x1827df['body']['invoice']}),_0x33a041=await warehouse[_0x138dd7(0x14c)]({'name':_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x152)],'room':_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x19b)]});_0x14d957[_0x138dd7(0x17c)][_0x138dd7(0x184)](_0x2af52c=>{var _0x3492ac=_0x138dd7;_0x33a041['product_details'][_0x3492ac(0x1b4)](_0x5290b3=>{var _0x18969b=_0x3492ac;_0x5290b3['product_name']==_0x2af52c['product_name']&&_0x5290b3['pallet']==_0x2af52c[_0x18969b(0x14e)]&&(_0x5290b3[_0x18969b(0x18d)]=parseInt(_0x5290b3[_0x18969b(0x18d)])-parseInt(_0x2af52c['return_qty']),console[_0x18969b(0x165)](_0x18969b(0x1c5),_0x2af52c['return_qty']));});}),console[_0x138dd7(0x165)](_0x138dd7(0x168),_0x33a041),await _0x33a041[_0x138dd7(0x167)]();const _0x56947f=await s_payment_data[_0x138dd7(0x14c)]({'invoice':_0x1827df[_0x138dd7(0x174)][_0x138dd7(0x19e)],'reason':_0x138dd7(0x1a8)});await _0x56947f[_0x138dd7(0x167)](),_0x1827df[_0x138dd7(0x181)](_0x138dd7(0x18f),_0x138dd7(0x19d)),_0x37602d['redirect'](_0x138dd7(0x1c1));}catch(_0x5093b6){console[_0x138dd7(0x165)](_0x5093b6),_0x37602d[_0x138dd7(0x14b)](0xc8)['json']({'message':_0x5093b6[_0x138dd7(0x15d)]});}}),router['get'](a0_0x39a7fd(0x1ad),auth,async(_0x101625,_0x4893ec)=>{var _0x2fa339=a0_0x39a7fd;try{const {username:_0x7ca976,email:_0x1a49e9,role:_0x263d39}=_0x101625[_0x2fa339(0x192)],_0xac59c4=_0x101625[_0x2fa339(0x192)],_0x47941f=await profile[_0x2fa339(0x14c)]({'email':_0xac59c4[_0x2fa339(0x1b2)]}),_0x2b3f32=await master_shop[_0x2fa339(0x17a)]();console[_0x2fa339(0x165)](_0x2fa339(0x1b1),_0x2b3f32);const _0x1bcdc0=_0x101625['params']['id'],_0xd4d116=await purchases_return['findById'](_0x1bcdc0);console[_0x2fa339(0x165)](_0xd4d116);const _0xc8be30=await suppliers[_0x2fa339(0x14c)]({'name':_0xd4d116[_0x2fa339(0x16d)]});console[_0x2fa339(0x165)](_0xc8be30);if(_0x2b3f32[0x0][_0x2fa339(0x16e)]==_0x2fa339(0x18b)){var _0x57b2ad=users[_0x2fa339(0x15f)];console[_0x2fa339(0x165)](_0x57b2ad);}else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]==_0x2fa339(0x199))var _0x57b2ad=users[_0x2fa339(0x199)];else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]=='German')var _0x57b2ad=users['German'];else{if(_0x2b3f32[0x0]['language']=='Spanish')var _0x57b2ad=users[_0x2fa339(0x153)];else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]==_0x2fa339(0x169))var _0x57b2ad=users[_0x2fa339(0x169)];else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]==_0x2fa339(0x1a6))var _0x57b2ad=users[_0x2fa339(0x166)];else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]=='Chinese')var _0x57b2ad=users[_0x2fa339(0x150)];else{if(_0x2b3f32[0x0][_0x2fa339(0x16e)]==_0x2fa339(0x17b))var _0x57b2ad=users['Arabic'];}}}}}}}_0x4893ec[_0x2fa339(0x19c)]('return_purchase_invoice',{'success':_0x101625[_0x2fa339(0x181)](_0x2fa339(0x18f)),'errors':_0x101625['flash'](_0x2fa339(0x1ac)),'role':_0xac59c4,'profile':_0x47941f,'master_shop':_0x2b3f32,'supplier':_0xc8be30,'purchase':_0xd4d116,'language':_0x57b2ad});}catch(_0x1004ed){console[_0x2fa339(0x165)](_0x1004ed);}}),router['post']('/receive_payment/:id',auth,async(_0x188ac5,_0x513f53)=>{var _0xb06f3d=a0_0x39a7fd;try{const _0x19cd08=_0x188ac5['params']['id'],{invoice:_0x38faa7,suppliers:_0x2c7dfd,receivable_amount:_0x298ac2,received_amount:_0x102924}=_0x188ac5['body'],_0x4c390f=await purchases_return[_0xb06f3d(0x161)](_0x19cd08);console[_0xb06f3d(0x165)](_0x4c390f);var _0x3b79dc=_0x298ac2-_0x102924;console[_0xb06f3d(0x165)](_0x102924),_0x4c390f[_0xb06f3d(0x194)]=parseFloat(_0x102924)+parseFloat(_0x4c390f[_0xb06f3d(0x194)]),_0x4c390f['due_amount']=_0x3b79dc,console[_0xb06f3d(0x165)](_0x4c390f);const _0x3e9df0=await _0x4c390f[_0xb06f3d(0x167)](),_0x5e574=await s_payment_data[_0xb06f3d(0x14c)]({'invoice':_0x188ac5[_0xb06f3d(0x174)][_0xb06f3d(0x19e)],'reason':'Purchase\x20Return'});_0x5e574['amount']=_0x3b79dc,await _0x5e574['save']();let _0x5e633f=new Date(),_0x3877a9=('0'+_0x5e633f[_0xb06f3d(0x198)]())['slice'](-0x2),_0x793a20=('0'+(_0x5e633f[_0xb06f3d(0x1ae)]()+0x1))[_0xb06f3d(0x15b)](-0x2),_0x3bb1a8=_0x5e633f[_0xb06f3d(0x162)](),_0x310c0e=_0x3bb1a8+'-'+_0x793a20+'-'+_0x3877a9;const _0x1c7778=new suppliers_payment({'invoice':_0x38faa7,'date':_0x3bb1a8+'-'+_0x793a20+'-'+_0x3877a9,'suppliers':_0x2c7dfd,'reason':_0xb06f3d(0x1c3),'amount':_0x102924}),_0x4f53ba=await _0x1c7778[_0xb06f3d(0x167)]();_0x188ac5[_0xb06f3d(0x181)]('success',_0xb06f3d(0x17d)),_0x513f53['redirect'](_0xb06f3d(0x1c1));}catch(_0x475b1f){console[_0xb06f3d(0x165)](_0x475b1f);}}),module[a0_0x39a7fd(0x1c0)]=router;