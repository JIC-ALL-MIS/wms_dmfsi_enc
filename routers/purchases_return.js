var a0_0x39c3fd=a0_0x268a;function a0_0x268a(_0x250b40,_0xb96486){var _0x1b318e=a0_0x1b31();return a0_0x268a=function(_0x268ac2,_0x3a9789){_0x268ac2=_0x268ac2-0x85;var _0x3a1faf=_0x1b318e[_0x268ac2];return _0x3a1faf;},a0_0x268a(_0x250b40,_0xb96486);}(function(_0x219061,_0x56e17c){var _0x1a7ec6=a0_0x268a,_0x3ebf9e=_0x219061();while(!![]){try{var _0x323b22=-parseInt(_0x1a7ec6(0xe2))/0x1+parseInt(_0x1a7ec6(0x8b))/0x2*(parseInt(_0x1a7ec6(0xde))/0x3)+-parseInt(_0x1a7ec6(0xbe))/0x4+parseInt(_0x1a7ec6(0xe1))/0x5*(parseInt(_0x1a7ec6(0xe5))/0x6)+-parseInt(_0x1a7ec6(0xe7))/0x7+parseInt(_0x1a7ec6(0xb7))/0x8*(parseInt(_0x1a7ec6(0xa4))/0x9)+parseInt(_0x1a7ec6(0xbc))/0xa;if(_0x323b22===_0x56e17c)break;else _0x3ebf9e['push'](_0x3ebf9e['shift']());}catch(_0x59a810){_0x3ebf9e['push'](_0x3ebf9e['shift']());}}}(a0_0x1b31,0x7319e));function a0_0x1b31(){var _0x5c10c1=['redirect','product_details.return_qtyproduct_details.return_qty','Hindi','old_warehouse_data','old_data','$return_product.price','level','$suppliers','Chinese','$product_details.product_name','$supplier_docs.address','payment\x20successfull','132aUYRsQ','/view/:id','forEach','15plzLNU','909896rUPQET','$supplier_docs.email','../models/all_models','913002yKKBOh','foreach\x20newproduct','6338521WirHUy','date','$date','stock_quantity','getMonth','primary_code_hide','find','/view','floorlevel','isle','../middleware/auth','message','stocks','English\x20(US)','$due_amount','room','English','purchase_quantity','user','$discount','type','warehouse_name','received','product_stock','product_name','Spanish','to_Room_name','post','body','../public/language/languages.json','getDate','product_code','types','$total_amount','Enabled','/purchases_return/view','$product_details','return_purchase_invoice','json','20404UaKLmW','Return\x20Goods','invoice','$warehouse_name','$product_details.storage','product_code_hide','$product_details.floorlevel','string','Purchase\x20Return','$product_details.rack','email','errors','params','secondary_code_hide','$received','findOne','final','success','render','primary_code','save','$_id','$receivable','$product_details.bin','/invoice/:id','65646rgMPBl','$name','$product_details.secondary_code','findById','product_details','note','bin','German','return_purchase_edit','master','$product_details.product_code','French','$supplier_docs','pallet','$product_details._id','return_qty','amount','Arabic\x20(ae)','supplier_docs','656vkbMRl','name','$note','bay','$supplier_docs.mobile','15703060YdKfgV','log','3147800hObpPk','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','aggregate','Portuguese\x20(BR)','Arabic','$product_details.type','to_room','getFullYear','Portuguese','language','/receive_payment/:id','purchase\x20return\x20successfully','$return_product.total','due_amount','map','Received\x20For\x20Purchase\x20Return','flash','get','to_warehouse_name','suppliers'];a0_0x1b31=function(){return _0x5c10c1;};return a0_0x1b31();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x39c3fd(0xe4)),auth=require(a0_0x39c3fd(0xf1)),users=require(a0_0x39c3fd(0x104));router['get'](a0_0x39c3fd(0xee),auth,async(_0x4e98d9,_0x5db4a4)=>{var _0x4a9a24=a0_0x39c3fd;try{const {username:_0x51ed22,email:_0x9e70cb,role:_0xd60eaa}=_0x4e98d9[_0x4a9a24(0xf9)],_0x204fb3=_0x4e98d9['user'],_0x367f1e=await profile['findOne']({'email':_0x204fb3[_0x4a9a24(0x95)]}),_0x1c7552=await master_shop[_0x4a9a24(0xed)]();console[_0x4a9a24(0xbd)](_0x4a9a24(0xad),_0x1c7552);const _0x29e586=await purchases_return[_0x4a9a24(0xc0)]([{'$lookup':{'from':_0x4a9a24(0xd1),'localField':_0x4a9a24(0xd1),'foreignField':_0x4a9a24(0xb8),'as':_0x4a9a24(0xb6)}},{'$unwind':'$return_product'},{'$unwind':_0x4a9a24(0xb0)},{'$group':{'_id':_0x4a9a24(0xa0),'invoice':{'$first':'$invoice'},'date':{'$first':_0x4a9a24(0xe9)},'suppliers':{'$first':_0x4a9a24(0xd9)},'warehouse_name':{'$first':_0x4a9a24(0x8e)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x4a9a24(0xd7)},'total':{'$sum':_0x4a9a24(0xca)},'note':{'$first':_0x4a9a24(0xb9)},'total_amount':{'$first':_0x4a9a24(0x85)},'discount':{'$first':_0x4a9a24(0xfa)},'receivable':{'$first':_0x4a9a24(0xa1)},'received':{'$first':_0x4a9a24(0x99)},'due_amount':{'$first':_0x4a9a24(0xf5)},'mobile':{'$first':_0x4a9a24(0xbb)},'email':{'$first':_0x4a9a24(0xe3)},'address':{'$first':_0x4a9a24(0xdc)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x4a9a24(0xbd)](_0x29e586);if(_0x1c7552[0x0][_0x4a9a24(0xc7)]==_0x4a9a24(0xf4)){var _0x22804c=users[_0x4a9a24(0xf7)];console[_0x4a9a24(0xbd)](_0x22804c);}else{if(_0x1c7552[0x0]['language']==_0x4a9a24(0xd4))var _0x22804c=users[_0x4a9a24(0xd4)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]==_0x4a9a24(0xab))var _0x22804c=users[_0x4a9a24(0xab)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]==_0x4a9a24(0x100))var _0x22804c=users[_0x4a9a24(0x100)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]==_0x4a9a24(0xaf))var _0x22804c=users[_0x4a9a24(0xaf)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]=='Portuguese\x20(BR)')var _0x22804c=users[_0x4a9a24(0xc6)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]=='Chinese')var _0x22804c=users[_0x4a9a24(0xda)];else{if(_0x1c7552[0x0][_0x4a9a24(0xc7)]==_0x4a9a24(0xb5))var _0x22804c=users['Arabic'];}}}}}}}_0x5db4a4['render']('purchases_return',{'success':_0x4e98d9[_0x4a9a24(0xce)](_0x4a9a24(0x9c)),'errors':_0x4e98d9['flash']('errors'),'role':_0x204fb3,'profile':_0x367f1e,'master_shop':_0x1c7552,'user':_0x29e586,'language':_0x22804c});}catch(_0x3ce1fe){console[_0x4a9a24(0xbd)](_0x3ce1fe);}}),router[a0_0x39c3fd(0xcf)](a0_0x39c3fd(0xdf),auth,async(_0x513b15,_0xbd4ff1)=>{var _0x1b0f73=a0_0x39c3fd;try{const {username:_0x2e59b0,email:_0x45687d,role:_0x4c401f}=_0x513b15[_0x1b0f73(0xf9)],_0x5e70d1=_0x513b15['user'],_0x5cd4d5=await profile['findOne']({'email':_0x5e70d1[_0x1b0f73(0x95)]}),_0x48d27b=await product['find']({}),_0x2452aa=await master_shop[_0x1b0f73(0xed)]();console[_0x1b0f73(0xbd)](_0x1b0f73(0xad),_0x2452aa),console[_0x1b0f73(0xbd)](_0x513b15[_0x1b0f73(0x103)]);const _0x35a5f8=_0x513b15[_0x1b0f73(0x97)]['id'],_0x2d141e=await purchases_return[_0x1b0f73(0xa7)](_0x35a5f8);console[_0x1b0f73(0xbd)](_0x2d141e);const _0x530f57=await warehouse[_0x1b0f73(0xc0)]([{'$match':{'name':_0x2d141e[_0x1b0f73(0xfc)],'room':_0x2d141e[_0x1b0f73(0xf6)]}},{'$unwind':_0x1b0f73(0x88)},{'$group':{'_id':_0x1b0f73(0xb2),'name':{'$first':_0x1b0f73(0xdb)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x1b0f73(0xa2)},'type':{'$first':_0x1b0f73(0xc3)},'floorlevel':{'$first':_0x1b0f73(0x91)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1b0f73(0xa6)},'product_code':{'$first':_0x1b0f73(0xae)},'storage':{'$first':_0x1b0f73(0x8f)},'rack':{'$first':_0x1b0f73(0x94)}}}]);warehouse_data=await warehouse[_0x1b0f73(0xc0)]([{'$match':{'status':_0x1b0f73(0x86),'name':_0x1b0f73(0x8c),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x1b0f73(0xa5)}}},{'$sort':{'name':0x1}}]),console[_0x1b0f73(0xbd)]('stock_data',_0x530f57);if(_0x2452aa[0x0][_0x1b0f73(0xc7)]==_0x1b0f73(0xf4)){var _0x116600=users['English'];console['log'](_0x116600);}else{if(_0x2452aa[0x0][_0x1b0f73(0xc7)]==_0x1b0f73(0xd4))var _0x116600=users[_0x1b0f73(0xd4)];else{if(_0x2452aa[0x0][_0x1b0f73(0xc7)]=='German')var _0x116600=users[_0x1b0f73(0xab)];else{if(_0x2452aa[0x0]['language']==_0x1b0f73(0x100))var _0x116600=users[_0x1b0f73(0x100)];else{if(_0x2452aa[0x0][_0x1b0f73(0xc7)]=='French')var _0x116600=users['French'];else{if(_0x2452aa[0x0]['language']==_0x1b0f73(0xc1))var _0x116600=users[_0x1b0f73(0xc6)];else{if(_0x2452aa[0x0][_0x1b0f73(0xc7)]==_0x1b0f73(0xda))var _0x116600=users[_0x1b0f73(0xda)];else{if(_0x2452aa[0x0][_0x1b0f73(0xc7)]=='Arabic\x20(ae)')var _0x116600=users['Arabic'];}}}}}}}_0xbd4ff1[_0x1b0f73(0x9d)](_0x1b0f73(0xac),{'success':_0x513b15[_0x1b0f73(0xce)]('success'),'errors':_0x513b15[_0x1b0f73(0xce)](_0x1b0f73(0x96)),'role':_0x5e70d1,'master_shop':_0x2452aa,'profile':_0x5cd4d5,'user':_0x2d141e,'stock':_0x530f57,'product':_0x48d27b,'language':_0x116600,'warehouse':warehouse_data});}catch(_0x3c6e2e){console['log'](_0x3c6e2e);}}),router['post'](a0_0x39c3fd(0xdf),auth,async(_0x4cc1d9,_0x52892d)=>{var _0x3ea0c0=a0_0x39c3fd;try{const _0x27b8c3=_0x4cc1d9['params']['id'];console[_0x3ea0c0(0xbd)](_0x27b8c3);const _0x5bef01=await purchases_return[_0x3ea0c0(0x9a)]({'invoice':_0x4cc1d9['body']['invoice']});console[_0x3ea0c0(0xbd)](_0x3ea0c0(0xd6),_0x5bef01);const _0x31b703=await warehouse['findOne']({'name':_0x5bef01['to_warehouse_name'],'room':_0x5bef01[_0x3ea0c0(0xc4)]});console[_0x3ea0c0(0xbd)](_0x3ea0c0(0xd5),_0x31b703);const {invoice:_0x4a6aa8,suppliers:_0x3062fd,date:_0x2005f5,warehouse_name:_0xb5ff80,product_name:_0x25a601,purchase_quantity:_0x501c65,stocks:_0x116992,return_qty:_0x13cf14,note:_0x57dd9a,Room_name:_0x5f5558,level:_0x56b1ac,isle:_0x764d4a,pallet:_0x10e930,to_warehouse_name:_0x55299a,to_Room_name:_0x1958a9}=_0x4cc1d9[_0x3ea0c0(0x103)];if(typeof _0x25a601==_0x3ea0c0(0x92))var _0x284c4e=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xff)]],_0x4a23be=[_0x4cc1d9[_0x3ea0c0(0x103)]['purchase_quantity']],_0x5a46e7=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xf3)]],_0xbb0a94=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xb3)]],_0x455050=[_0x4cc1d9['body'][_0x3ea0c0(0xd8)]],_0x2f580a=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xf0)]],_0x542751=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xb1)]],_0x494bf6=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x107)]],_0x375f1f=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x90)]],_0x5358a2=[_0x4cc1d9[_0x3ea0c0(0x103)]['primary_code_hide']],_0xd83ff8=[_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x98)]];else var _0x284c4e=[..._0x4cc1d9['body']['product_name']],_0x4a23be=[..._0x4cc1d9['body'][_0x3ea0c0(0xf8)]],_0x5a46e7=[..._0x4cc1d9[_0x3ea0c0(0x103)]['stocks']],_0xbb0a94=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xb3)]],_0x455050=[..._0x4cc1d9['body']['level']],_0x2f580a=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xf0)]],_0x542751=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xb1)]],_0x375f1f=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x90)]],_0x5358a2=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xec)]],_0xd83ff8=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x98)]],_0x494bf6=[..._0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x107)]];const _0x5e5503=_0x284c4e['map'](_0x565c26=>{return _0x565c26={'product_name':_0x565c26};});_0x4a23be[_0x3ea0c0(0xe0)]((_0x366bf0,_0x5dc9c2)=>{var _0x28a6e5=_0x3ea0c0;_0x5e5503[_0x5dc9c2][_0x28a6e5(0xf8)]=_0x366bf0;}),_0x5a46e7[_0x3ea0c0(0xe0)]((_0x441cba,_0x2c2ed8)=>{var _0x4a14d9=_0x3ea0c0;_0x5e5503[_0x2c2ed8][_0x4a14d9(0xea)]=_0x441cba;}),_0xbb0a94[_0x3ea0c0(0xe0)]((_0x1dd54f,_0x189079)=>{var _0x408970=_0x3ea0c0;_0x5e5503[_0x189079][_0x408970(0xb3)]=_0x1dd54f;}),_0x455050['forEach']((_0xfd8ac2,_0x1ae1dd)=>{_0x5e5503[_0x1ae1dd]['bay']=_0xfd8ac2;}),_0x2f580a[_0x3ea0c0(0xe0)]((_0x17378b,_0xce44b9)=>{var _0x13263b=_0x3ea0c0;_0x5e5503[_0xce44b9][_0x13263b(0xaa)]=_0x17378b;}),_0x542751[_0x3ea0c0(0xe0)]((_0x397e4e,_0x2716ea)=>{var _0x4adc57=_0x3ea0c0;_0x5e5503[_0x2716ea][_0x4adc57(0xef)]=_0x397e4e;}),_0x375f1f[_0x3ea0c0(0xe0)]((_0x4da358,_0x330a3c)=>{var _0x4c23e1=_0x3ea0c0;_0x5e5503[_0x330a3c][_0x4c23e1(0x106)]=_0x4da358;}),_0x5358a2[_0x3ea0c0(0xe0)]((_0x307c7f,_0x507348)=>{var _0x5bae01=_0x3ea0c0;_0x5e5503[_0x507348][_0x5bae01(0x9e)]=_0x307c7f;}),_0xd83ff8['forEach']((_0x144a3c,_0x1b9735)=>{_0x5e5503[_0x1b9735]['secondary_code']=_0x144a3c;}),_0x494bf6[_0x3ea0c0(0xe0)]((_0x35567d,_0x55c920)=>{_0x5e5503[_0x55c920]['type']=_0x35567d;});var _0x3f10b=0x0;_0x5e5503[_0x3ea0c0(0xe0)](_0x18c7ac=>{var _0x2f87a2=_0x3ea0c0;console['log'](_0x2f87a2(0xe6),_0x18c7ac),(parseInt(_0x18c7ac[_0x2f87a2(0xf8)])<parseInt(_0x18c7ac[_0x2f87a2(0xb3)])||parseInt(_0x18c7ac[_0x2f87a2(0xea)])<parseInt(_0x18c7ac['return_qty'])||parseInt(_0x18c7ac['return_qty'])==0x0)&&_0x3f10b++;});if(_0x3f10b!=0x0)return _0x4cc1d9[_0x3ea0c0(0xce)](_0x3ea0c0(0x96),_0x3ea0c0(0xbf)),_0x52892d[_0x3ea0c0(0xd2)]('back');_0x5bef01['return_product'][_0x3ea0c0(0xe0)](_0xdacecd=>{const _0x2f08ce=_0x31b703['product_details']['map'](_0x105ed5=>{var _0x41e464=a0_0x268a;_0x105ed5['product_name']==_0xdacecd[_0x41e464(0xff)]&&_0x105ed5[_0x41e464(0xef)]==_0xdacecd['floorlevel']&&_0x105ed5[_0x41e464(0xfb)]==_0xdacecd[_0x41e464(0xfb)]&&_0x105ed5[_0x41e464(0xaa)]==_0xdacecd[_0x41e464(0xaa)]&&_0x105ed5[_0x41e464(0xba)]==_0xdacecd[_0x41e464(0xba)]&&(_0x105ed5[_0x41e464(0xfe)]=parseInt(_0x105ed5[_0x41e464(0xfe)])+parseInt(_0xdacecd[_0x41e464(0xb3)]));});}),console[_0x3ea0c0(0xbd)](_0x3ea0c0(0xd5),_0x31b703),await _0x31b703[_0x3ea0c0(0x9f)](),_0x5bef01['invoice']=_0x4a6aa8,_0x5bef01[_0x3ea0c0(0xd1)]=_0x3062fd,_0x5bef01[_0x3ea0c0(0xe8)]=_0x2005f5,_0x5bef01['warehouse_name']=_0xb5ff80,_0x5bef01['return_product']=_0x5e5503,_0x5bef01[_0x3ea0c0(0xa9)]=_0x57dd9a,_0x5bef01[_0x3ea0c0(0xf6)]=_0x5f5558,_0x5bef01[_0x3ea0c0(0xd0)]=_0x55299a,_0x5bef01[_0x3ea0c0(0xc4)]=_0x1958a9;const _0x1ccb77=await _0x5bef01[_0x3ea0c0(0x9f)](),_0x2862e1=await purchases_return['findOne']({'invoice':_0x4cc1d9['body'][_0x3ea0c0(0x8d)]}),_0x14c250=await warehouse['findOne']({'name':_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0xd0)],'room':_0x4cc1d9[_0x3ea0c0(0x103)][_0x3ea0c0(0x101)]});_0x2862e1['return_product'][_0x3ea0c0(0xe0)](_0x5258b5=>{var _0x556e6b=_0x3ea0c0;_0x14c250[_0x556e6b(0xa8)][_0x556e6b(0xcc)](_0x21548f=>{var _0x485649=_0x556e6b;_0x21548f['product_name']==_0x5258b5[_0x485649(0xff)]&&_0x21548f[_0x485649(0xb1)]==_0x5258b5['pallet']&&(_0x21548f[_0x485649(0xfe)]=parseInt(_0x21548f[_0x485649(0xfe)])-parseInt(_0x5258b5[_0x485649(0xb3)]),console[_0x485649(0xbd)](_0x485649(0xd3),_0x5258b5['return_qty']));});}),console[_0x3ea0c0(0xbd)](_0x3ea0c0(0x9b),_0x14c250),await _0x14c250[_0x3ea0c0(0x9f)]();const _0x26187f=await s_payment_data[_0x3ea0c0(0x9a)]({'invoice':_0x4cc1d9[_0x3ea0c0(0x103)]['invoice'],'reason':_0x3ea0c0(0x93)});await _0x26187f[_0x3ea0c0(0x9f)](),_0x4cc1d9[_0x3ea0c0(0xce)](_0x3ea0c0(0x9c),_0x3ea0c0(0xc9)),_0x52892d[_0x3ea0c0(0xd2)](_0x3ea0c0(0x87));}catch(_0x101372){console[_0x3ea0c0(0xbd)](_0x101372),_0x52892d['status'](0xc8)[_0x3ea0c0(0x8a)]({'message':_0x101372[_0x3ea0c0(0xf2)]});}}),router[a0_0x39c3fd(0xcf)](a0_0x39c3fd(0xa3),auth,async(_0x348531,_0x2abcf4)=>{var _0x4ac357=a0_0x39c3fd;try{const {username:_0x5c0d0e,email:_0x3b6b2c,role:_0x19ba50}=_0x348531[_0x4ac357(0xf9)],_0x480726=_0x348531[_0x4ac357(0xf9)],_0x153a6c=await profile['findOne']({'email':_0x480726['email']}),_0x4b2089=await master_shop[_0x4ac357(0xed)]();console[_0x4ac357(0xbd)]('master',_0x4b2089);const _0x509d45=_0x348531['params']['id'],_0x507f90=await purchases_return[_0x4ac357(0xa7)](_0x509d45);console[_0x4ac357(0xbd)](_0x507f90);const _0x14b244=await suppliers[_0x4ac357(0x9a)]({'name':_0x507f90[_0x4ac357(0xd1)]});console[_0x4ac357(0xbd)](_0x14b244);if(_0x4b2089[0x0][_0x4ac357(0xc7)]==_0x4ac357(0xf4)){var _0x8b88ad=users[_0x4ac357(0xf7)];console[_0x4ac357(0xbd)](_0x8b88ad);}else{if(_0x4b2089[0x0]['language']=='Hindi')var _0x8b88ad=users['Hindi'];else{if(_0x4b2089[0x0][_0x4ac357(0xc7)]==_0x4ac357(0xab))var _0x8b88ad=users['German'];else{if(_0x4b2089[0x0][_0x4ac357(0xc7)]=='Spanish')var _0x8b88ad=users[_0x4ac357(0x100)];else{if(_0x4b2089[0x0]['language']==_0x4ac357(0xaf))var _0x8b88ad=users[_0x4ac357(0xaf)];else{if(_0x4b2089[0x0][_0x4ac357(0xc7)]==_0x4ac357(0xc1))var _0x8b88ad=users[_0x4ac357(0xc6)];else{if(_0x4b2089[0x0][_0x4ac357(0xc7)]=='Chinese')var _0x8b88ad=users[_0x4ac357(0xda)];else{if(_0x4b2089[0x0][_0x4ac357(0xc7)]=='Arabic\x20(ae)')var _0x8b88ad=users[_0x4ac357(0xc2)];}}}}}}}_0x2abcf4[_0x4ac357(0x9d)](_0x4ac357(0x89),{'success':_0x348531[_0x4ac357(0xce)](_0x4ac357(0x9c)),'errors':_0x348531[_0x4ac357(0xce)](_0x4ac357(0x96)),'role':_0x480726,'profile':_0x153a6c,'master_shop':_0x4b2089,'supplier':_0x14b244,'purchase':_0x507f90,'language':_0x8b88ad});}catch(_0xfa13cb){console[_0x4ac357(0xbd)](_0xfa13cb);}}),router[a0_0x39c3fd(0x102)](a0_0x39c3fd(0xc8),auth,async(_0x3e5ff6,_0x34d1cc)=>{var _0xa9caa9=a0_0x39c3fd;try{const _0x4498b5=_0x3e5ff6['params']['id'],{invoice:_0x5da482,suppliers:_0x21df56,receivable_amount:_0x403129,received_amount:_0x5145de}=_0x3e5ff6[_0xa9caa9(0x103)],_0xdf37e1=await purchases_return['findById'](_0x4498b5);console[_0xa9caa9(0xbd)](_0xdf37e1);var _0xe854df=_0x403129-_0x5145de;console[_0xa9caa9(0xbd)](_0x5145de),_0xdf37e1[_0xa9caa9(0xfd)]=parseFloat(_0x5145de)+parseFloat(_0xdf37e1[_0xa9caa9(0xfd)]),_0xdf37e1[_0xa9caa9(0xcb)]=_0xe854df,console[_0xa9caa9(0xbd)](_0xdf37e1);const _0x2c891e=await _0xdf37e1[_0xa9caa9(0x9f)](),_0x1a3335=await s_payment_data['findOne']({'invoice':_0x3e5ff6['body'][_0xa9caa9(0x8d)],'reason':_0xa9caa9(0x93)});_0x1a3335[_0xa9caa9(0xb4)]=_0xe854df,await _0x1a3335[_0xa9caa9(0x9f)]();let _0x4d8018=new Date(),_0x58f10c=('0'+_0x4d8018[_0xa9caa9(0x105)]())['slice'](-0x2),_0x29d0f4=('0'+(_0x4d8018[_0xa9caa9(0xeb)]()+0x1))['slice'](-0x2),_0x145f7e=_0x4d8018[_0xa9caa9(0xc5)](),_0x1408c1=_0x145f7e+'-'+_0x29d0f4+'-'+_0x58f10c;const _0x4b48b2=new suppliers_payment({'invoice':_0x5da482,'date':_0x145f7e+'-'+_0x29d0f4+'-'+_0x58f10c,'suppliers':_0x21df56,'reason':_0xa9caa9(0xcd),'amount':_0x5145de}),_0x230d7a=await _0x4b48b2['save']();_0x3e5ff6['flash'](_0xa9caa9(0x9c),_0xa9caa9(0xdd)),_0x34d1cc[_0xa9caa9(0xd2)](_0xa9caa9(0x87));}catch(_0x18d588){console[_0xa9caa9(0xbd)](_0x18d588);}}),module['exports']=router;