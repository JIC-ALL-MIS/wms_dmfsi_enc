var a0_0x4a7e9f=a0_0x4818;(function(_0x407168,_0x3b3c73){var _0x20e3ea=a0_0x4818,_0x3eb487=_0x407168();while(!![]){try{var _0x10f47a=parseInt(_0x20e3ea(0x13b))/0x1+-parseInt(_0x20e3ea(0x107))/0x2+-parseInt(_0x20e3ea(0x10f))/0x3*(-parseInt(_0x20e3ea(0x102))/0x4)+parseInt(_0x20e3ea(0x159))/0x5*(parseInt(_0x20e3ea(0xf6))/0x6)+parseInt(_0x20e3ea(0x131))/0x7*(-parseInt(_0x20e3ea(0x13d))/0x8)+-parseInt(_0x20e3ea(0x161))/0x9+parseInt(_0x20e3ea(0x10d))/0xa;if(_0x10f47a===_0x3b3c73)break;else _0x3eb487['push'](_0x3eb487['shift']());}catch(_0x1cea7d){_0x3eb487['push'](_0x3eb487['shift']());}}}(a0_0x2bee,0xde3fc));function a0_0x4818(_0x267f7f,_0x128e69){var _0x2beead=a0_0x2bee();return a0_0x4818=function(_0x48181a,_0x27b509){_0x48181a=_0x48181a-0xed;var _0x57a665=_0x2beead[_0x48181a];return _0x57a665;},a0_0x4818(_0x267f7f,_0x128e69);}function a0_0x2bee(){var _0x2c5fe2=['product_code_hide','to_warehouse_name','render','3625444dSmTGA','date','get','old_data','$product_details.storage','$product_details.bin','6569170ZWzpla','payment\x20successfull','42HZnHfb','$supplier_docs.mobile','find','Portuguese\x20(BR)','master','return_qty','isle','Router','product_stock','English\x20(US)','getMonth','$product_details','$name','due_amount','slice','product_name','getDate','$product_details.secondary_code','$receivable','Return\x20Goods','return_purchase_edit','$product_details.rack','Enabled','email','aggregate','save','/purchases_return/view','$product_details.primary_code','$return_product.total','stock_data','return_product','to_room','old_warehouse_data','redirect','2237186wWvbrA','post','purchases_return','params','name','French','../models/all_models','Arabic\x20(ae)','forEach','$discount','718120yUGcoD','success','24VPysro','primary_code','$return_product.return_qty','Hindi','Purchase\x20Return','pallet','secondary_code_hide','secondary_code','$product_details.bay','types','flash','Spanish','$product_details.product_code','$invoice','product_details','$return_product.product_name','purchase\x20return\x20successfully','return_purchase_invoice','user','German','/view/:id','errors','invoice','stocks','product_details.return_qtyproduct_details.return_qty','status','bay','$date','255pcKTnz','/view','message','purchase_quantity','$_id','express','room','suppliers','8651619cBbuyo','log','note','warehouse_name','../public/language/languages.json','final','$supplier_docs.email','$supplier_docs.address','Arabic','Chinese','bin','findOne','received','body','map','type','findById','floorlevel','level','212976aKxMiS','$return_product','language','$due_amount','Portuguese','English','$supplier_docs','$product_details.product_stock','$note','json','primary_code_hide','getFullYear','416516oeLDFM','stock_quantity'];a0_0x2bee=function(){return _0x2c5fe2;};return a0_0x2bee();}const express=require(a0_0x4a7e9f(0x15e)),app=express(),router=express[a0_0x4a7e9f(0x116)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x4a7e9f(0x137)),auth=require('../middleware/auth'),users=require(a0_0x4a7e9f(0x165));router['get'](a0_0x4a7e9f(0x15a),auth,async(_0x806c12,_0x3b9d9b)=>{var _0x1d8f87=a0_0x4a7e9f;try{const {username:_0x431cb4,email:_0x28f36e,role:_0x3c3c4d}=_0x806c12['user'],_0x53d6b8=_0x806c12[_0x1d8f87(0x14f)],_0x1fe1cd=await profile[_0x1d8f87(0xee)]({'email':_0x53d6b8[_0x1d8f87(0x126)]}),_0x27207d=await master_shop[_0x1d8f87(0x111)]();console['log'](_0x1d8f87(0x113),_0x27207d);const _0x4b921c=await purchases_return[_0x1d8f87(0x127)]([{'$lookup':{'from':'suppliers','localField':_0x1d8f87(0x160),'foreignField':_0x1d8f87(0x135),'as':'supplier_docs'}},{'$unwind':_0x1d8f87(0xf7)},{'$unwind':_0x1d8f87(0xfc)},{'$group':{'_id':_0x1d8f87(0x15d),'invoice':{'$first':_0x1d8f87(0x14a)},'date':{'$first':_0x1d8f87(0x158)},'suppliers':{'$first':'$suppliers'},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':_0x1d8f87(0x14c)},'return_qty':{'$first':_0x1d8f87(0x13f)},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x1d8f87(0x12b)},'note':{'$first':_0x1d8f87(0xfe)},'total_amount':{'$first':'$total_amount'},'discount':{'$first':_0x1d8f87(0x13a)},'receivable':{'$first':_0x1d8f87(0x121)},'received':{'$first':'$received'},'due_amount':{'$first':_0x1d8f87(0xf9)},'mobile':{'$first':_0x1d8f87(0x110)},'email':{'$first':_0x1d8f87(0x167)},'address':{'$first':_0x1d8f87(0x168)},'return_sum_qty':{'$sum':_0x1d8f87(0x13f)}}}]);console[_0x1d8f87(0x162)](_0x4b921c);if(_0x27207d[0x0][_0x1d8f87(0xf8)]==_0x1d8f87(0x118)){var _0x533e1a=users[_0x1d8f87(0xfb)];console[_0x1d8f87(0x162)](_0x533e1a);}else{if(_0x27207d[0x0][_0x1d8f87(0xf8)]==_0x1d8f87(0x140))var _0x533e1a=users['Hindi'];else{if(_0x27207d[0x0][_0x1d8f87(0xf8)]==_0x1d8f87(0x150))var _0x533e1a=users['German'];else{if(_0x27207d[0x0][_0x1d8f87(0xf8)]=='Spanish')var _0x533e1a=users[_0x1d8f87(0x148)];else{if(_0x27207d[0x0]['language']=='French')var _0x533e1a=users[_0x1d8f87(0x136)];else{if(_0x27207d[0x0][_0x1d8f87(0xf8)]==_0x1d8f87(0x112))var _0x533e1a=users['Portuguese'];else{if(_0x27207d[0x0][_0x1d8f87(0xf8)]==_0x1d8f87(0x16a))var _0x533e1a=users[_0x1d8f87(0x16a)];else{if(_0x27207d[0x0]['language']==_0x1d8f87(0x138))var _0x533e1a=users[_0x1d8f87(0x169)];}}}}}}}_0x3b9d9b[_0x1d8f87(0x106)](_0x1d8f87(0x133),{'success':_0x806c12[_0x1d8f87(0x147)]('success'),'errors':_0x806c12[_0x1d8f87(0x147)](_0x1d8f87(0x152)),'role':_0x53d6b8,'profile':_0x1fe1cd,'master_shop':_0x27207d,'user':_0x4b921c,'language':_0x533e1a});}catch(_0x132a52){console['log'](_0x132a52);}}),router[a0_0x4a7e9f(0x109)](a0_0x4a7e9f(0x151),auth,async(_0x12ad16,_0xeb648d)=>{var _0x1fd6ea=a0_0x4a7e9f;try{const {username:_0x313d1e,email:_0x83f2f3,role:_0xbd2c2f}=_0x12ad16[_0x1fd6ea(0x14f)],_0x3b3622=_0x12ad16['user'],_0x301015=await profile[_0x1fd6ea(0xee)]({'email':_0x3b3622[_0x1fd6ea(0x126)]}),_0x3ebc23=await product[_0x1fd6ea(0x111)]({}),_0x2b828b=await master_shop['find']();console[_0x1fd6ea(0x162)](_0x1fd6ea(0x113),_0x2b828b),console[_0x1fd6ea(0x162)](_0x12ad16[_0x1fd6ea(0xf0)]);const _0x5a982b=_0x12ad16[_0x1fd6ea(0x134)]['id'],_0x314f7d=await purchases_return[_0x1fd6ea(0xf3)](_0x5a982b);console[_0x1fd6ea(0x162)](_0x314f7d);const _0x47d0cf=await warehouse['aggregate']([{'$match':{'name':_0x314f7d[_0x1fd6ea(0x164)],'room':_0x314f7d['room']}},{'$unwind':_0x1fd6ea(0x11a)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1fd6ea(0xfd)},'bay':{'$first':_0x1fd6ea(0x145)},'bin':{'$first':_0x1fd6ea(0x10c)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x1fd6ea(0x12a)},'secondary_code':{'$first':_0x1fd6ea(0x120)},'product_code':{'$first':_0x1fd6ea(0x149)},'storage':{'$first':_0x1fd6ea(0x10b)},'rack':{'$first':_0x1fd6ea(0x124)}}}]);warehouse_data=await warehouse[_0x1fd6ea(0x127)]([{'$match':{'status':_0x1fd6ea(0x125),'name':_0x1fd6ea(0x122),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x1fd6ea(0x11b),'name':{'$first':_0x1fd6ea(0x11b)}}},{'$sort':{'name':0x1}}]),console[_0x1fd6ea(0x162)](_0x1fd6ea(0x12c),_0x47d0cf);if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x118)){var _0x184d30=users[_0x1fd6ea(0xfb)];console[_0x1fd6ea(0x162)](_0x184d30);}else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x140))var _0x184d30=users[_0x1fd6ea(0x140)];else{if(_0x2b828b[0x0]['language']==_0x1fd6ea(0x150))var _0x184d30=users[_0x1fd6ea(0x150)];else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x148))var _0x184d30=users[_0x1fd6ea(0x148)];else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x136))var _0x184d30=users['French'];else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x112))var _0x184d30=users['Portuguese'];else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x16a))var _0x184d30=users[_0x1fd6ea(0x16a)];else{if(_0x2b828b[0x0][_0x1fd6ea(0xf8)]==_0x1fd6ea(0x138))var _0x184d30=users[_0x1fd6ea(0x169)];}}}}}}}_0xeb648d[_0x1fd6ea(0x106)](_0x1fd6ea(0x123),{'success':_0x12ad16[_0x1fd6ea(0x147)](_0x1fd6ea(0x13c)),'errors':_0x12ad16[_0x1fd6ea(0x147)](_0x1fd6ea(0x152)),'role':_0x3b3622,'master_shop':_0x2b828b,'profile':_0x301015,'user':_0x314f7d,'stock':_0x47d0cf,'product':_0x3ebc23,'language':_0x184d30,'warehouse':warehouse_data});}catch(_0x4788be){console['log'](_0x4788be);}}),router[a0_0x4a7e9f(0x132)](a0_0x4a7e9f(0x151),auth,async(_0x3628b1,_0x5890d4)=>{var _0x25336b=a0_0x4a7e9f;try{const _0x452ffd=_0x3628b1[_0x25336b(0x134)]['id'];console[_0x25336b(0x162)](_0x452ffd);const _0x5ad336=await purchases_return[_0x25336b(0xee)]({'invoice':_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x153)]});console[_0x25336b(0x162)](_0x25336b(0x10a),_0x5ad336);const _0x143f0f=await warehouse['findOne']({'name':_0x5ad336[_0x25336b(0x105)],'room':_0x5ad336[_0x25336b(0x12e)]});console[_0x25336b(0x162)](_0x25336b(0x12f),_0x143f0f);const {invoice:_0x2fd6fc,suppliers:_0x4f6141,date:_0x56079f,warehouse_name:_0x37fd84,product_name:_0x4e4a20,purchase_quantity:_0x474fc7,stocks:_0x28d9a3,return_qty:_0x3c23ad,note:_0x4d3caf,Room_name:_0x348831,level:_0x2e8b98,isle:_0x3a1535,pallet:_0x4299c2,to_warehouse_name:_0x36b9e5,to_Room_name:_0x19b268}=_0x3628b1['body'];if(typeof _0x4e4a20=='string')var _0x3dad35=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x11e)]],_0x2e0a76=[_0x3628b1['body'][_0x25336b(0x15c)]],_0x4fa21d=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x154)]],_0x44ff0d=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x114)]],_0x27e1a6=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0xf5)]],_0x356d15=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x115)]],_0x1d0a3e=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x142)]],_0x10e14a=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x146)]],_0x5ed720=[_0x3628b1['body'][_0x25336b(0x104)]],_0x422932=[_0x3628b1['body'][_0x25336b(0x100)]],_0x234ac4=[_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x143)]];else var _0x3dad35=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x11e)]],_0x2e0a76=[..._0x3628b1['body'][_0x25336b(0x15c)]],_0x4fa21d=[..._0x3628b1[_0x25336b(0xf0)]['stocks']],_0x44ff0d=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x114)]],_0x27e1a6=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0xf5)]],_0x356d15=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x115)]],_0x1d0a3e=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x142)]],_0x5ed720=[..._0x3628b1[_0x25336b(0xf0)]['product_code_hide']],_0x422932=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x100)]],_0x234ac4=[..._0x3628b1['body']['secondary_code_hide']],_0x10e14a=[..._0x3628b1[_0x25336b(0xf0)][_0x25336b(0x146)]];const _0x2c98cb=_0x3dad35[_0x25336b(0xf1)](_0x2c84c2=>{return _0x2c84c2={'product_name':_0x2c84c2};});_0x2e0a76['forEach']((_0x248ec8,_0x101462)=>{var _0x244230=_0x25336b;_0x2c98cb[_0x101462][_0x244230(0x15c)]=_0x248ec8;}),_0x4fa21d['forEach']((_0x290eb0,_0x5e44c2)=>{var _0x4fa3e2=_0x25336b;_0x2c98cb[_0x5e44c2][_0x4fa3e2(0x103)]=_0x290eb0;}),_0x44ff0d[_0x25336b(0x139)]((_0x27ed8f,_0x5aaa06)=>{_0x2c98cb[_0x5aaa06]['return_qty']=_0x27ed8f;}),_0x27e1a6[_0x25336b(0x139)]((_0x1d3dd9,_0x17a4e1)=>{_0x2c98cb[_0x17a4e1]['bay']=_0x1d3dd9;}),_0x356d15[_0x25336b(0x139)]((_0x415468,_0x42c8a2)=>{var _0x1ea326=_0x25336b;_0x2c98cb[_0x42c8a2][_0x1ea326(0xed)]=_0x415468;}),_0x1d0a3e[_0x25336b(0x139)]((_0x6aab5d,_0x275428)=>{_0x2c98cb[_0x275428]['floorlevel']=_0x6aab5d;}),_0x5ed720[_0x25336b(0x139)]((_0x4110fb,_0x47b85c)=>{_0x2c98cb[_0x47b85c]['product_code']=_0x4110fb;}),_0x422932['forEach']((_0x392b6d,_0x113acd)=>{var _0x589696=_0x25336b;_0x2c98cb[_0x113acd][_0x589696(0x13e)]=_0x392b6d;}),_0x234ac4['forEach']((_0x3c3671,_0xbf098c)=>{var _0x35f16d=_0x25336b;_0x2c98cb[_0xbf098c][_0x35f16d(0x144)]=_0x3c3671;}),_0x10e14a[_0x25336b(0x139)]((_0x48485d,_0x35cba8)=>{var _0x51b440=_0x25336b;_0x2c98cb[_0x35cba8][_0x51b440(0xf2)]=_0x48485d;});var _0x5bc5af=0x0;_0x2c98cb[_0x25336b(0x139)](_0x46b84b=>{var _0x480b69=_0x25336b;console[_0x480b69(0x162)]('foreach\x20newproduct',_0x46b84b),(parseInt(_0x46b84b[_0x480b69(0x15c)])<parseInt(_0x46b84b[_0x480b69(0x114)])||parseInt(_0x46b84b[_0x480b69(0x103)])<parseInt(_0x46b84b['return_qty'])||parseInt(_0x46b84b[_0x480b69(0x114)])==0x0)&&_0x5bc5af++;});if(_0x5bc5af!=0x0)return _0x3628b1[_0x25336b(0x147)]('errors','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x5890d4[_0x25336b(0x130)]('back');_0x5ad336[_0x25336b(0x12d)][_0x25336b(0x139)](_0x3c40ec=>{var _0x4cb110=_0x25336b;const _0x16e779=_0x143f0f['product_details'][_0x4cb110(0xf1)](_0x5b9eb6=>{var _0x156cfa=_0x4cb110;_0x5b9eb6[_0x156cfa(0x11e)]==_0x3c40ec[_0x156cfa(0x11e)]&&_0x5b9eb6[_0x156cfa(0xf4)]==_0x3c40ec[_0x156cfa(0xf4)]&&_0x5b9eb6[_0x156cfa(0xf2)]==_0x3c40ec[_0x156cfa(0xf2)]&&_0x5b9eb6[_0x156cfa(0xed)]==_0x3c40ec['bin']&&_0x5b9eb6[_0x156cfa(0x157)]==_0x3c40ec[_0x156cfa(0x157)]&&(_0x5b9eb6[_0x156cfa(0x117)]=parseInt(_0x5b9eb6[_0x156cfa(0x117)])+parseInt(_0x3c40ec[_0x156cfa(0x114)]));});}),console['log'](_0x25336b(0x12f),_0x143f0f),await _0x143f0f[_0x25336b(0x128)](),_0x5ad336[_0x25336b(0x153)]=_0x2fd6fc,_0x5ad336[_0x25336b(0x160)]=_0x4f6141,_0x5ad336[_0x25336b(0x108)]=_0x56079f,_0x5ad336[_0x25336b(0x164)]=_0x37fd84,_0x5ad336['return_product']=_0x2c98cb,_0x5ad336[_0x25336b(0x163)]=_0x4d3caf,_0x5ad336[_0x25336b(0x15f)]=_0x348831,_0x5ad336[_0x25336b(0x105)]=_0x36b9e5,_0x5ad336[_0x25336b(0x12e)]=_0x19b268;const _0x27267f=await _0x5ad336[_0x25336b(0x128)](),_0x3c0f83=await purchases_return['findOne']({'invoice':_0x3628b1['body']['invoice']}),_0x507fc5=await warehouse[_0x25336b(0xee)]({'name':_0x3628b1[_0x25336b(0xf0)][_0x25336b(0x105)],'room':_0x3628b1[_0x25336b(0xf0)]['to_Room_name']});_0x3c0f83['return_product'][_0x25336b(0x139)](_0x4ed8f2=>{var _0x4a4ad7=_0x25336b;_0x507fc5[_0x4a4ad7(0x14b)][_0x4a4ad7(0xf1)](_0x35c4dc=>{var _0x4102b1=_0x4a4ad7;_0x35c4dc[_0x4102b1(0x11e)]==_0x4ed8f2[_0x4102b1(0x11e)]&&_0x35c4dc[_0x4102b1(0x142)]==_0x4ed8f2[_0x4102b1(0x142)]&&(_0x35c4dc[_0x4102b1(0x117)]=parseInt(_0x35c4dc[_0x4102b1(0x117)])-parseInt(_0x4ed8f2[_0x4102b1(0x114)]),console['log'](_0x4102b1(0x155),_0x4ed8f2[_0x4102b1(0x114)]));});}),console[_0x25336b(0x162)](_0x25336b(0x166),_0x507fc5),await _0x507fc5[_0x25336b(0x128)]();const _0x42b5df=await s_payment_data[_0x25336b(0xee)]({'invoice':_0x3628b1['body'][_0x25336b(0x153)],'reason':_0x25336b(0x141)});await _0x42b5df[_0x25336b(0x128)](),_0x3628b1[_0x25336b(0x147)]('success',_0x25336b(0x14d)),_0x5890d4[_0x25336b(0x130)](_0x25336b(0x129));}catch(_0x385e4d){console[_0x25336b(0x162)](_0x385e4d),_0x5890d4[_0x25336b(0x156)](0xc8)[_0x25336b(0xff)]({'message':_0x385e4d[_0x25336b(0x15b)]});}}),router['get']('/invoice/:id',auth,async(_0x586727,_0x47e4af)=>{var _0x90c180=a0_0x4a7e9f;try{const {username:_0x252a9f,email:_0x11af90,role:_0x384492}=_0x586727[_0x90c180(0x14f)],_0x2dbd6a=_0x586727[_0x90c180(0x14f)],_0x571309=await profile[_0x90c180(0xee)]({'email':_0x2dbd6a['email']}),_0x2687d0=await master_shop[_0x90c180(0x111)]();console[_0x90c180(0x162)](_0x90c180(0x113),_0x2687d0);const _0xdaa2c7=_0x586727[_0x90c180(0x134)]['id'],_0xdc29f2=await purchases_return[_0x90c180(0xf3)](_0xdaa2c7);console['log'](_0xdc29f2);const _0x33f856=await suppliers[_0x90c180(0xee)]({'name':_0xdc29f2[_0x90c180(0x160)]});console[_0x90c180(0x162)](_0x33f856);if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x118)){var _0x16c73a=users['English'];console[_0x90c180(0x162)](_0x16c73a);}else{if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x140))var _0x16c73a=users[_0x90c180(0x140)];else{if(_0x2687d0[0x0]['language']=='German')var _0x16c73a=users[_0x90c180(0x150)];else{if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x148))var _0x16c73a=users['Spanish'];else{if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x136))var _0x16c73a=users[_0x90c180(0x136)];else{if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x112))var _0x16c73a=users[_0x90c180(0xfa)];else{if(_0x2687d0[0x0][_0x90c180(0xf8)]=='Chinese')var _0x16c73a=users[_0x90c180(0x16a)];else{if(_0x2687d0[0x0][_0x90c180(0xf8)]==_0x90c180(0x138))var _0x16c73a=users[_0x90c180(0x169)];}}}}}}}_0x47e4af[_0x90c180(0x106)](_0x90c180(0x14e),{'success':_0x586727['flash'](_0x90c180(0x13c)),'errors':_0x586727[_0x90c180(0x147)](_0x90c180(0x152)),'role':_0x2dbd6a,'profile':_0x571309,'master_shop':_0x2687d0,'supplier':_0x33f856,'purchase':_0xdc29f2,'language':_0x16c73a});}catch(_0x425bf6){console[_0x90c180(0x162)](_0x425bf6);}}),router[a0_0x4a7e9f(0x132)]('/receive_payment/:id',auth,async(_0x427eec,_0x2b518b)=>{var _0x57af6c=a0_0x4a7e9f;try{const _0x5e30a9=_0x427eec[_0x57af6c(0x134)]['id'],{invoice:_0x1371ee,suppliers:_0x5399c2,receivable_amount:_0x273de5,received_amount:_0x376b12}=_0x427eec['body'],_0x2bcd59=await purchases_return['findById'](_0x5e30a9);console[_0x57af6c(0x162)](_0x2bcd59);var _0x1b273a=_0x273de5-_0x376b12;console[_0x57af6c(0x162)](_0x376b12),_0x2bcd59[_0x57af6c(0xef)]=parseFloat(_0x376b12)+parseFloat(_0x2bcd59['received']),_0x2bcd59[_0x57af6c(0x11c)]=_0x1b273a,console['log'](_0x2bcd59);const _0x513d75=await _0x2bcd59['save'](),_0x4d33ec=await s_payment_data['findOne']({'invoice':_0x427eec['body'][_0x57af6c(0x153)],'reason':'Purchase\x20Return'});_0x4d33ec['amount']=_0x1b273a,await _0x4d33ec[_0x57af6c(0x128)]();let _0x346d4d=new Date(),_0x36ad81=('0'+_0x346d4d[_0x57af6c(0x11f)]())[_0x57af6c(0x11d)](-0x2),_0x3f7cbc=('0'+(_0x346d4d[_0x57af6c(0x119)]()+0x1))[_0x57af6c(0x11d)](-0x2),_0x494451=_0x346d4d[_0x57af6c(0x101)](),_0x3b9ec5=_0x494451+'-'+_0x3f7cbc+'-'+_0x36ad81;const _0x986ddd=new suppliers_payment({'invoice':_0x1371ee,'date':_0x494451+'-'+_0x3f7cbc+'-'+_0x36ad81,'suppliers':_0x5399c2,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x376b12}),_0x4f296b=await _0x986ddd[_0x57af6c(0x128)]();_0x427eec[_0x57af6c(0x147)]('success',_0x57af6c(0x10e)),_0x2b518b['redirect']('/purchases_return/view');}catch(_0x42192d){console[_0x57af6c(0x162)](_0x42192d);}}),module['exports']=router;