function a0_0x1bf4(_0x28678e,_0x2f8817){var _0xd12f52=a0_0xd12f();return a0_0x1bf4=function(_0x1bf4a8,_0x31cd48){_0x1bf4a8=_0x1bf4a8-0x140;var _0x756256=_0xd12f52[_0x1bf4a8];return _0x756256;},a0_0x1bf4(_0x28678e,_0x2f8817);}var a0_0x5861d4=a0_0x1bf4;(function(_0x486b99,_0x5b1759){var _0x312537=a0_0x1bf4,_0x514bae=_0x486b99();while(!![]){try{var _0x4d6006=parseInt(_0x312537(0x1a8))/0x1+parseInt(_0x312537(0x17c))/0x2+parseInt(_0x312537(0x188))/0x3+parseInt(_0x312537(0x160))/0x4+-parseInt(_0x312537(0x16e))/0x5+-parseInt(_0x312537(0x175))/0x6*(parseInt(_0x312537(0x142))/0x7)+-parseInt(_0x312537(0x159))/0x8;if(_0x4d6006===_0x5b1759)break;else _0x514bae['push'](_0x514bae['shift']());}catch(_0x4f9bf9){_0x514bae['push'](_0x514bae['shift']());}}}(a0_0xd12f,0x2a4ea));function a0_0xd12f(){var _0x1b4e0d=['Router','Arabic','$supplier_docs.email','flash','secondary_code','7HVReoS','bay','stocks','find','$name','$return_product.price','secondary_code_hide','$suppliers','English\x20(US)','redirect','$product_details.product_stock','$product_details.product_name','language','to_Room_name','post','findOne','$warehouse_name','return_product','invoice','due_amount','$discount','log','to_warehouse_name','1958136yESrlR','/view','errors','type','$date','return_qty','$return_product.return_qty','1085212LMQYcL','purchase_quantity','express','final','Raw\x20Materials','$supplier_docs.address','getDate','back','Portuguese\x20(BR)','product_details','floorlevel','Purchase\x20Return','body','room','378935PawQjq','amount','/purchases_return/view','exports','Chinese','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','map','1666926jEglVG','warehouse_name','status','purchases_return','pallet','Hindi','$product_details.rack','454866iDiDpU','email','note','types','findById','Portuguese','$supplier_docs.mobile','primary_code_hide','render','slice','Spanish','product_stock','422823YijyBA','suppliers','$product_details.product_code','$return_product.product_name','$invoice','aggregate','product_name','$product_details.bin','$total_amount','$note','Enabled','$product_details.primary_code','payment\x20successfull','product_code_hide','save','$product_details.secondary_code','params','German','$product_details.storage','return_purchase_edit','English','primary_code','Return\x20Goods','forEach','/receive_payment/:id','success','$received','/view/:id','Arabic\x20(ae)','bin','level','getMonth','131988HIarfu','to_room','$receivable','isle','stock_quantity','product_code','../models/all_models','$supplier_docs','received','user','../middleware/auth','Received\x20For\x20Purchase\x20Return','French','old_data','old_warehouse_data','get','purchase\x20return\x20successfully','master'];a0_0xd12f=function(){return _0x1b4e0d;};return a0_0xd12f();}const express=require(a0_0x5861d4(0x162)),app=express(),router=express[a0_0x5861d4(0x1ba)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x5861d4(0x1ae)),auth=require(a0_0x5861d4(0x1b2)),users=require('../public/language/languages.json');router['get'](a0_0x5861d4(0x15a),auth,async(_0x1adf47,_0xb73536)=>{var _0x2fdb6c=a0_0x5861d4;try{const {username:_0x1ba264,email:_0x260590,role:_0x178f8f}=_0x1adf47[_0x2fdb6c(0x1b1)],_0xb1178d=_0x1adf47['user'],_0x20123c=await profile['findOne']({'email':_0xb1178d[_0x2fdb6c(0x17d)]}),_0x587ce5=await master_shop[_0x2fdb6c(0x145)]();console[_0x2fdb6c(0x157)](_0x2fdb6c(0x1b9),_0x587ce5);const _0xe5b18d=await purchases_return[_0x2fdb6c(0x18d)]([{'$lookup':{'from':_0x2fdb6c(0x189),'localField':_0x2fdb6c(0x189),'foreignField':'name','as':'supplier_docs'}},{'$unwind':'$return_product'},{'$unwind':_0x2fdb6c(0x1af)},{'$group':{'_id':'$_id','invoice':{'$first':_0x2fdb6c(0x18c)},'date':{'$first':_0x2fdb6c(0x15d)},'suppliers':{'$first':_0x2fdb6c(0x149)},'warehouse_name':{'$first':_0x2fdb6c(0x152)},'product_name':{'$first':_0x2fdb6c(0x18b)},'return_qty':{'$first':_0x2fdb6c(0x15f)},'price':{'$first':_0x2fdb6c(0x147)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x2fdb6c(0x191)},'total_amount':{'$first':_0x2fdb6c(0x190)},'discount':{'$first':_0x2fdb6c(0x156)},'receivable':{'$first':_0x2fdb6c(0x1aa)},'received':{'$first':_0x2fdb6c(0x1a2)},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':_0x2fdb6c(0x182)},'email':{'$first':_0x2fdb6c(0x1bc)},'address':{'$first':_0x2fdb6c(0x165)},'return_sum_qty':{'$sum':_0x2fdb6c(0x15f)}}}]);console[_0x2fdb6c(0x157)](_0xe5b18d);if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]==_0x2fdb6c(0x14a)){var _0x25ba70=users[_0x2fdb6c(0x19c)];console['log'](_0x25ba70);}else{if(_0x587ce5[0x0]['language']==_0x2fdb6c(0x17a))var _0x25ba70=users[_0x2fdb6c(0x17a)];else{if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]=='German')var _0x25ba70=users[_0x2fdb6c(0x199)];else{if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]==_0x2fdb6c(0x186))var _0x25ba70=users[_0x2fdb6c(0x186)];else{if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]==_0x2fdb6c(0x1b4))var _0x25ba70=users[_0x2fdb6c(0x1b4)];else{if(_0x587ce5[0x0]['language']==_0x2fdb6c(0x168))var _0x25ba70=users[_0x2fdb6c(0x181)];else{if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]==_0x2fdb6c(0x172))var _0x25ba70=users['Chinese'];else{if(_0x587ce5[0x0][_0x2fdb6c(0x14e)]==_0x2fdb6c(0x1a4))var _0x25ba70=users[_0x2fdb6c(0x1bb)];}}}}}}}_0xb73536['render'](_0x2fdb6c(0x178),{'success':_0x1adf47[_0x2fdb6c(0x140)](_0x2fdb6c(0x1a1)),'errors':_0x1adf47[_0x2fdb6c(0x140)](_0x2fdb6c(0x15b)),'role':_0xb1178d,'profile':_0x20123c,'master_shop':_0x587ce5,'user':_0xe5b18d,'language':_0x25ba70});}catch(_0x34b1a5){console[_0x2fdb6c(0x157)](_0x34b1a5);}}),router[a0_0x5861d4(0x1b7)](a0_0x5861d4(0x1a3),auth,async(_0x5eab47,_0x5d764c)=>{var _0x254c3c=a0_0x5861d4;try{const {username:_0xfb05b,email:_0x4c3963,role:_0x5a5792}=_0x5eab47[_0x254c3c(0x1b1)],_0x1919f4=_0x5eab47[_0x254c3c(0x1b1)],_0xc4b483=await profile['findOne']({'email':_0x1919f4[_0x254c3c(0x17d)]}),_0x45d1ee=await product[_0x254c3c(0x145)]({}),_0x1ae83e=await master_shop[_0x254c3c(0x145)]();console[_0x254c3c(0x157)]('master',_0x1ae83e),console[_0x254c3c(0x157)](_0x5eab47['body']);const _0x528df2=_0x5eab47[_0x254c3c(0x198)]['id'],_0x1d37f7=await purchases_return[_0x254c3c(0x180)](_0x528df2);console[_0x254c3c(0x157)](_0x1d37f7);const _0x2221e5=await warehouse[_0x254c3c(0x18d)]([{'$match':{'name':_0x1d37f7[_0x254c3c(0x176)],'room':_0x1d37f7[_0x254c3c(0x16d)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x254c3c(0x14d)},'product_stock':{'$first':_0x254c3c(0x14c)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x254c3c(0x18f)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x254c3c(0x193)},'secondary_code':{'$first':_0x254c3c(0x197)},'product_code':{'$first':_0x254c3c(0x18a)},'storage':{'$first':_0x254c3c(0x19a)},'rack':{'$first':_0x254c3c(0x17b)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x254c3c(0x192),'name':_0x254c3c(0x19e),'warehouse_category':_0x254c3c(0x164)}},{'$group':{'_id':_0x254c3c(0x146),'name':{'$first':_0x254c3c(0x146)}}},{'$sort':{'name':0x1}}]),console['log']('stock_data',_0x2221e5);if(_0x1ae83e[0x0][_0x254c3c(0x14e)]==_0x254c3c(0x14a)){var _0x174527=users[_0x254c3c(0x19c)];console['log'](_0x174527);}else{if(_0x1ae83e[0x0]['language']==_0x254c3c(0x17a))var _0x174527=users[_0x254c3c(0x17a)];else{if(_0x1ae83e[0x0][_0x254c3c(0x14e)]=='German')var _0x174527=users['German'];else{if(_0x1ae83e[0x0][_0x254c3c(0x14e)]==_0x254c3c(0x186))var _0x174527=users[_0x254c3c(0x186)];else{if(_0x1ae83e[0x0]['language']==_0x254c3c(0x1b4))var _0x174527=users[_0x254c3c(0x1b4)];else{if(_0x1ae83e[0x0]['language']==_0x254c3c(0x168))var _0x174527=users[_0x254c3c(0x181)];else{if(_0x1ae83e[0x0][_0x254c3c(0x14e)]==_0x254c3c(0x172))var _0x174527=users['Chinese'];else{if(_0x1ae83e[0x0][_0x254c3c(0x14e)]==_0x254c3c(0x1a4))var _0x174527=users[_0x254c3c(0x1bb)];}}}}}}}_0x5d764c['render'](_0x254c3c(0x19b),{'success':_0x5eab47['flash'](_0x254c3c(0x1a1)),'errors':_0x5eab47[_0x254c3c(0x140)](_0x254c3c(0x15b)),'role':_0x1919f4,'master_shop':_0x1ae83e,'profile':_0xc4b483,'user':_0x1d37f7,'stock':_0x2221e5,'product':_0x45d1ee,'language':_0x174527,'warehouse':warehouse_data});}catch(_0x23d55d){console[_0x254c3c(0x157)](_0x23d55d);}}),router[a0_0x5861d4(0x150)](a0_0x5861d4(0x1a3),auth,async(_0x1f4dff,_0xde472a)=>{var _0x3fda7c=a0_0x5861d4;try{const _0x365407=_0x1f4dff[_0x3fda7c(0x198)]['id'];console[_0x3fda7c(0x157)](_0x365407);const _0x1dae34=await purchases_return[_0x3fda7c(0x151)]({'invoice':_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x154)]});console[_0x3fda7c(0x157)](_0x3fda7c(0x1b5),_0x1dae34);const _0x11ae3a=await warehouse[_0x3fda7c(0x151)]({'name':_0x1dae34[_0x3fda7c(0x158)],'room':_0x1dae34[_0x3fda7c(0x1a9)]});console[_0x3fda7c(0x157)](_0x3fda7c(0x1b6),_0x11ae3a);const {invoice:_0x4a6dcf,suppliers:_0x242df8,date:_0x45e6e4,warehouse_name:_0x49dd22,product_name:_0x458731,purchase_quantity:_0x13cd7b,stocks:_0x2998c3,return_qty:_0x246fc7,note:_0x150e69,Room_name:_0x4e44e5,level:_0xabc0a5,isle:_0x366917,pallet:_0x37b1ed,to_warehouse_name:_0x2084a6,to_Room_name:_0x55e578}=_0x1f4dff['body'];if(typeof _0x458731=='string')var _0x1fc960=[_0x1f4dff['body'][_0x3fda7c(0x18e)]],_0x47bc30=[_0x1f4dff[_0x3fda7c(0x16c)]['purchase_quantity']],_0x261a1d=[_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x144)]],_0x141494=[_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x15e)]],_0x487a96=[_0x1f4dff['body'][_0x3fda7c(0x1a6)]],_0x170ef8=[_0x1f4dff[_0x3fda7c(0x16c)]['isle']],_0x4551e7=[_0x1f4dff[_0x3fda7c(0x16c)]['pallet']],_0x43b0da=[_0x1f4dff[_0x3fda7c(0x16c)]['types']],_0x2b299a=[_0x1f4dff['body'][_0x3fda7c(0x195)]],_0x382ee0=[_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x183)]],_0xfa58de=[_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x148)]];else var _0x1fc960=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x18e)]],_0x47bc30=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x161)]],_0x261a1d=[..._0x1f4dff[_0x3fda7c(0x16c)]['stocks']],_0x141494=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x15e)]],_0x487a96=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x1a6)]],_0x170ef8=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x1ab)]],_0x4551e7=[..._0x1f4dff[_0x3fda7c(0x16c)]['pallet']],_0x2b299a=[..._0x1f4dff['body']['product_code_hide']],_0x382ee0=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x183)]],_0xfa58de=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x148)]],_0x43b0da=[..._0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x17f)]];const _0x96ae05=_0x1fc960[_0x3fda7c(0x174)](_0x2f85e3=>{return _0x2f85e3={'product_name':_0x2f85e3};});_0x47bc30[_0x3fda7c(0x19f)]((_0x2d58ab,_0x54999d)=>{var _0xfe5fb8=_0x3fda7c;_0x96ae05[_0x54999d][_0xfe5fb8(0x161)]=_0x2d58ab;}),_0x261a1d['forEach']((_0x24c982,_0x44aac0)=>{_0x96ae05[_0x44aac0]['stock_quantity']=_0x24c982;}),_0x141494[_0x3fda7c(0x19f)]((_0x498e9b,_0x5bb86)=>{var _0x300e28=_0x3fda7c;_0x96ae05[_0x5bb86][_0x300e28(0x15e)]=_0x498e9b;}),_0x487a96[_0x3fda7c(0x19f)]((_0x2b4a51,_0x40fe20)=>{var _0x2f8b7c=_0x3fda7c;_0x96ae05[_0x40fe20][_0x2f8b7c(0x143)]=_0x2b4a51;}),_0x170ef8[_0x3fda7c(0x19f)]((_0x53cc15,_0x5bbe50)=>{var _0x52c079=_0x3fda7c;_0x96ae05[_0x5bbe50][_0x52c079(0x1a5)]=_0x53cc15;}),_0x4551e7[_0x3fda7c(0x19f)]((_0x5d1e15,_0x3dbc27)=>{var _0x1a93ed=_0x3fda7c;_0x96ae05[_0x3dbc27][_0x1a93ed(0x16a)]=_0x5d1e15;}),_0x2b299a['forEach']((_0x1c843b,_0x292404)=>{var _0x7b1c72=_0x3fda7c;_0x96ae05[_0x292404][_0x7b1c72(0x1ad)]=_0x1c843b;}),_0x382ee0['forEach']((_0x22ce50,_0x3d708c)=>{var _0x34a794=_0x3fda7c;_0x96ae05[_0x3d708c][_0x34a794(0x19d)]=_0x22ce50;}),_0xfa58de[_0x3fda7c(0x19f)]((_0x1d2d59,_0x287367)=>{var _0x3062b9=_0x3fda7c;_0x96ae05[_0x287367][_0x3062b9(0x141)]=_0x1d2d59;}),_0x43b0da[_0x3fda7c(0x19f)]((_0x311d4e,_0x290ed9)=>{_0x96ae05[_0x290ed9]['type']=_0x311d4e;});var _0x42e356=0x0;_0x96ae05[_0x3fda7c(0x19f)](_0x57e394=>{var _0x4f037c=_0x3fda7c;console['log']('foreach\x20newproduct',_0x57e394),(parseInt(_0x57e394[_0x4f037c(0x161)])<parseInt(_0x57e394[_0x4f037c(0x15e)])||parseInt(_0x57e394[_0x4f037c(0x1ac)])<parseInt(_0x57e394[_0x4f037c(0x15e)])||parseInt(_0x57e394['return_qty'])==0x0)&&_0x42e356++;});if(_0x42e356!=0x0)return _0x1f4dff[_0x3fda7c(0x140)](_0x3fda7c(0x15b),_0x3fda7c(0x173)),_0xde472a[_0x3fda7c(0x14b)](_0x3fda7c(0x167));_0x1dae34['return_product']['forEach'](_0x12e4e9=>{var _0xdd733d=_0x3fda7c;const _0x65dfe2=_0x11ae3a[_0xdd733d(0x169)][_0xdd733d(0x174)](_0x977d07=>{var _0x586ae8=_0xdd733d;_0x977d07[_0x586ae8(0x18e)]==_0x12e4e9[_0x586ae8(0x18e)]&&_0x977d07[_0x586ae8(0x16a)]==_0x12e4e9[_0x586ae8(0x16a)]&&_0x977d07[_0x586ae8(0x15c)]==_0x12e4e9[_0x586ae8(0x15c)]&&_0x977d07[_0x586ae8(0x1a5)]==_0x12e4e9['bin']&&_0x977d07['bay']==_0x12e4e9[_0x586ae8(0x143)]&&(_0x977d07[_0x586ae8(0x187)]=parseInt(_0x977d07[_0x586ae8(0x187)])+parseInt(_0x12e4e9[_0x586ae8(0x15e)]));});}),console[_0x3fda7c(0x157)](_0x3fda7c(0x1b6),_0x11ae3a),await _0x11ae3a[_0x3fda7c(0x196)](),_0x1dae34[_0x3fda7c(0x154)]=_0x4a6dcf,_0x1dae34[_0x3fda7c(0x189)]=_0x242df8,_0x1dae34['date']=_0x45e6e4,_0x1dae34[_0x3fda7c(0x176)]=_0x49dd22,_0x1dae34[_0x3fda7c(0x153)]=_0x96ae05,_0x1dae34[_0x3fda7c(0x17e)]=_0x150e69,_0x1dae34[_0x3fda7c(0x16d)]=_0x4e44e5,_0x1dae34['to_warehouse_name']=_0x2084a6,_0x1dae34['to_room']=_0x55e578;const _0x509751=await _0x1dae34['save'](),_0x5c0cd9=await purchases_return[_0x3fda7c(0x151)]({'invoice':_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x154)]}),_0x4e0755=await warehouse[_0x3fda7c(0x151)]({'name':_0x1f4dff['body'][_0x3fda7c(0x158)],'room':_0x1f4dff[_0x3fda7c(0x16c)][_0x3fda7c(0x14f)]});_0x5c0cd9['return_product'][_0x3fda7c(0x19f)](_0xb955fe=>{var _0x1e7ecb=_0x3fda7c;_0x4e0755[_0x1e7ecb(0x169)][_0x1e7ecb(0x174)](_0x286415=>{var _0x4f1a70=_0x1e7ecb;_0x286415['product_name']==_0xb955fe[_0x4f1a70(0x18e)]&&_0x286415[_0x4f1a70(0x179)]==_0xb955fe[_0x4f1a70(0x179)]&&(_0x286415[_0x4f1a70(0x187)]=parseInt(_0x286415[_0x4f1a70(0x187)])-parseInt(_0xb955fe[_0x4f1a70(0x15e)]),console[_0x4f1a70(0x157)]('product_details.return_qtyproduct_details.return_qty',_0xb955fe[_0x4f1a70(0x15e)]));});}),console[_0x3fda7c(0x157)](_0x3fda7c(0x163),_0x4e0755),await _0x4e0755[_0x3fda7c(0x196)]();const _0x4dd7e4=await s_payment_data[_0x3fda7c(0x151)]({'invoice':_0x1f4dff[_0x3fda7c(0x16c)]['invoice'],'reason':_0x3fda7c(0x16b)});await _0x4dd7e4[_0x3fda7c(0x196)](),_0x1f4dff[_0x3fda7c(0x140)]('success',_0x3fda7c(0x1b8)),_0xde472a[_0x3fda7c(0x14b)](_0x3fda7c(0x170));}catch(_0x19b1e8){console['log'](_0x19b1e8),_0xde472a[_0x3fda7c(0x177)](0xc8)['json']({'message':_0x19b1e8['message']});}}),router['get']('/invoice/:id',auth,async(_0x416f30,_0x21b33d)=>{var _0x4f2a7a=a0_0x5861d4;try{const {username:_0x13db74,email:_0x39bd3b,role:_0x5a2f19}=_0x416f30[_0x4f2a7a(0x1b1)],_0x531e4f=_0x416f30[_0x4f2a7a(0x1b1)],_0x50b2c1=await profile[_0x4f2a7a(0x151)]({'email':_0x531e4f[_0x4f2a7a(0x17d)]}),_0x5b3c15=await master_shop[_0x4f2a7a(0x145)]();console[_0x4f2a7a(0x157)](_0x4f2a7a(0x1b9),_0x5b3c15);const _0x1389ff=_0x416f30[_0x4f2a7a(0x198)]['id'],_0x4bbc2e=await purchases_return['findById'](_0x1389ff);console[_0x4f2a7a(0x157)](_0x4bbc2e);const _0x41ae80=await suppliers[_0x4f2a7a(0x151)]({'name':_0x4bbc2e['suppliers']});console['log'](_0x41ae80);if(_0x5b3c15[0x0]['language']==_0x4f2a7a(0x14a)){var _0x28a6b3=users['English'];console[_0x4f2a7a(0x157)](_0x28a6b3);}else{if(_0x5b3c15[0x0][_0x4f2a7a(0x14e)]==_0x4f2a7a(0x17a))var _0x28a6b3=users[_0x4f2a7a(0x17a)];else{if(_0x5b3c15[0x0]['language']=='German')var _0x28a6b3=users[_0x4f2a7a(0x199)];else{if(_0x5b3c15[0x0][_0x4f2a7a(0x14e)]==_0x4f2a7a(0x186))var _0x28a6b3=users[_0x4f2a7a(0x186)];else{if(_0x5b3c15[0x0][_0x4f2a7a(0x14e)]==_0x4f2a7a(0x1b4))var _0x28a6b3=users[_0x4f2a7a(0x1b4)];else{if(_0x5b3c15[0x0]['language']==_0x4f2a7a(0x168))var _0x28a6b3=users[_0x4f2a7a(0x181)];else{if(_0x5b3c15[0x0]['language']=='Chinese')var _0x28a6b3=users[_0x4f2a7a(0x172)];else{if(_0x5b3c15[0x0]['language']==_0x4f2a7a(0x1a4))var _0x28a6b3=users[_0x4f2a7a(0x1bb)];}}}}}}}_0x21b33d[_0x4f2a7a(0x184)]('return_purchase_invoice',{'success':_0x416f30[_0x4f2a7a(0x140)](_0x4f2a7a(0x1a1)),'errors':_0x416f30[_0x4f2a7a(0x140)]('errors'),'role':_0x531e4f,'profile':_0x50b2c1,'master_shop':_0x5b3c15,'supplier':_0x41ae80,'purchase':_0x4bbc2e,'language':_0x28a6b3});}catch(_0xe7c305){console[_0x4f2a7a(0x157)](_0xe7c305);}}),router[a0_0x5861d4(0x150)](a0_0x5861d4(0x1a0),auth,async(_0x44a69a,_0x192218)=>{var _0x135df2=a0_0x5861d4;try{const _0x4aaf58=_0x44a69a[_0x135df2(0x198)]['id'],{invoice:_0x16c804,suppliers:_0x217c3e,receivable_amount:_0xbb453a,received_amount:_0x4e89ba}=_0x44a69a['body'],_0x410f55=await purchases_return['findById'](_0x4aaf58);console[_0x135df2(0x157)](_0x410f55);var _0x5d7651=_0xbb453a-_0x4e89ba;console['log'](_0x4e89ba),_0x410f55[_0x135df2(0x1b0)]=parseFloat(_0x4e89ba)+parseFloat(_0x410f55[_0x135df2(0x1b0)]),_0x410f55[_0x135df2(0x155)]=_0x5d7651,console[_0x135df2(0x157)](_0x410f55);const _0x4e20f5=await _0x410f55[_0x135df2(0x196)](),_0xe3d9d5=await s_payment_data['findOne']({'invoice':_0x44a69a[_0x135df2(0x16c)]['invoice'],'reason':'Purchase\x20Return'});_0xe3d9d5[_0x135df2(0x16f)]=_0x5d7651,await _0xe3d9d5[_0x135df2(0x196)]();let _0xa89b01=new Date(),_0x485866=('0'+_0xa89b01[_0x135df2(0x166)]())[_0x135df2(0x185)](-0x2),_0x50bf47=('0'+(_0xa89b01[_0x135df2(0x1a7)]()+0x1))[_0x135df2(0x185)](-0x2),_0x5db2e5=_0xa89b01['getFullYear'](),_0xf264f5=_0x5db2e5+'-'+_0x50bf47+'-'+_0x485866;const _0x2871ad=new suppliers_payment({'invoice':_0x16c804,'date':_0x5db2e5+'-'+_0x50bf47+'-'+_0x485866,'suppliers':_0x217c3e,'reason':_0x135df2(0x1b3),'amount':_0x4e89ba}),_0x5dbb41=await _0x2871ad['save']();_0x44a69a[_0x135df2(0x140)](_0x135df2(0x1a1),_0x135df2(0x194)),_0x192218[_0x135df2(0x14b)](_0x135df2(0x170));}catch(_0x285a16){console[_0x135df2(0x157)](_0x285a16);}}),module[a0_0x5861d4(0x171)]=router;