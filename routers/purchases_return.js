var a0_0x30a1ea=a0_0x4c05;function a0_0x20be(){var _0x195e54=['Purchase\x20Return','getMonth','language','$product_details.floorlevel','params','to_warehouse_name','stocks','status','English\x20(US)','$product_details._id','bay','floorlevel','$total_amount','forEach','success','609309nClbvT','bin','../public/language/languages.json','render','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$supplier_docs','4Biujic','types','26fYoSvP','save','$product_details.rack','old_warehouse_data','stock_data','French','get','$discount','warehouse_name','Chinese','primary_code','master','$invoice','purchase_quantity','secondary_code','$return_product.total','$product_details.storage','$product_details','slice','type','supplier_docs','aggregate','$_id','string','redirect','$product_details.bay','product_details.return_qtyproduct_details.return_qty','product_name','getFullYear','$note','stock_quantity','$product_details.product_name','suppliers','level','$supplier_docs.address','foreach\x20newproduct','Raw\x20Materials','received','name','1735720uzNuot','/purchases_return/view','$warehouse_name','2027361PBWoah','/receive_payment/:id','$product_details.product_stock','Portuguese','return_product','email','$date','German','$supplier_docs.email','Router','Arabic','Hindi','product_code','return_qty','message','findOne','$product_details.bin','/invoice/:id','body','date','$product_details.primary_code','2521974SEBPFH','$due_amount','16629570WPGzwz','40jYSGWH','exports','$received','amount','$return_product.return_qty','/view','express','isle','$supplier_docs.mobile','secondary_code_hide','post','English','4122671eSvojN','Spanish','Portuguese\x20(BR)','flash','getDate','$return_product.price','return_purchase_edit','../middleware/auth','errors','note','$return_product.product_name','$product_details.secondary_code','primary_code_hide','Return\x20Goods','Arabic\x20(ae)','$product_details.product_code','findById','map','log','room','$product_details.type','json','user','product_stock','/view/:id','$return_product','back','invoice','63475mKHknY','due_amount','pallet','to_Room_name'];a0_0x20be=function(){return _0x195e54;};return a0_0x20be();}(function(_0x3eaf9e,_0x35bbf0){var _0x593fef=a0_0x4c05,_0x5bb359=_0x3eaf9e();while(!![]){try{var _0xb87e2d=-parseInt(_0x593fef(0xd4))/0x1*(parseInt(_0x593fef(0xef))/0x2)+parseInt(_0x593fef(0x119))/0x3+-parseInt(_0x593fef(0xed))/0x4*(-parseInt(_0x593fef(0x116))/0x5)+-parseInt(_0x593fef(0xa9))/0x6+-parseInt(_0x593fef(0xb8))/0x7+parseInt(_0x593fef(0xac))/0x8*(-parseInt(_0x593fef(0xe7))/0x9)+parseInt(_0x593fef(0xab))/0xa;if(_0xb87e2d===_0x35bbf0)break;else _0x5bb359['push'](_0x5bb359['shift']());}catch(_0x5f5861){_0x5bb359['push'](_0x5bb359['shift']());}}}(a0_0x20be,0x7d39e));const express=require(a0_0x30a1ea(0xb2)),app=express(),router=express[a0_0x30a1ea(0x122)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x30a1ea(0xbf)),users=require(a0_0x30a1ea(0xe9));function a0_0x4c05(_0x229570,_0x1b1d10){var _0x20be18=a0_0x20be();return a0_0x4c05=function(_0x4c0579,_0x8fd3f0){_0x4c0579=_0x4c0579-0xa7;var _0x3ff137=_0x20be18[_0x4c0579];return _0x3ff137;},a0_0x4c05(_0x229570,_0x1b1d10);}router[a0_0x30a1ea(0xf5)](a0_0x30a1ea(0xb1),auth,async(_0x50921d,_0x33bd6f)=>{var _0x1fdaca=a0_0x30a1ea;try{const {username:_0x15140e,email:_0x114e0f,role:_0x55c707}=_0x50921d[_0x1fdaca(0xce)],_0x304305=_0x50921d[_0x1fdaca(0xce)],_0x580c73=await profile[_0x1fdaca(0x128)]({'email':_0x304305[_0x1fdaca(0x11e)]}),_0x5cd88b=await master_shop['find']();console[_0x1fdaca(0xca)](_0x1fdaca(0xfa),_0x5cd88b);const _0x3c722f=await purchases_return['aggregate']([{'$lookup':{'from':_0x1fdaca(0x10f),'localField':'suppliers','foreignField':_0x1fdaca(0x115),'as':_0x1fdaca(0x103)}},{'$unwind':_0x1fdaca(0xd1)},{'$unwind':_0x1fdaca(0xec)},{'$group':{'_id':_0x1fdaca(0x105),'invoice':{'$first':_0x1fdaca(0xfb)},'date':{'$first':_0x1fdaca(0x11f)},'suppliers':{'$first':'$suppliers'},'warehouse_name':{'$first':_0x1fdaca(0x118)},'product_name':{'$first':_0x1fdaca(0xc2)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x1fdaca(0xbd)},'total':{'$sum':_0x1fdaca(0xfe)},'note':{'$first':_0x1fdaca(0x10c)},'total_amount':{'$first':_0x1fdaca(0xe4)},'discount':{'$first':_0x1fdaca(0xf6)},'receivable':{'$first':'$receivable'},'received':{'$first':_0x1fdaca(0xae)},'due_amount':{'$first':_0x1fdaca(0xaa)},'mobile':{'$first':_0x1fdaca(0xb4)},'email':{'$first':_0x1fdaca(0x121)},'address':{'$first':_0x1fdaca(0x111)},'return_sum_qty':{'$sum':_0x1fdaca(0xb0)}}}]);console[_0x1fdaca(0xca)](_0x3c722f);if(_0x5cd88b[0x0][_0x1fdaca(0xda)]=='English\x20(US)'){var _0x28f963=users['English'];console[_0x1fdaca(0xca)](_0x28f963);}else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]==_0x1fdaca(0x124))var _0x28f963=users[_0x1fdaca(0x124)];else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]==_0x1fdaca(0x120))var _0x28f963=users[_0x1fdaca(0x120)];else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]==_0x1fdaca(0xb9))var _0x28f963=users[_0x1fdaca(0xb9)];else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]==_0x1fdaca(0xf4))var _0x28f963=users[_0x1fdaca(0xf4)];else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]==_0x1fdaca(0xba))var _0x28f963=users[_0x1fdaca(0x11c)];else{if(_0x5cd88b[0x0][_0x1fdaca(0xda)]=='Chinese')var _0x28f963=users[_0x1fdaca(0xf8)];else{if(_0x5cd88b[0x0]['language']==_0x1fdaca(0xc6))var _0x28f963=users[_0x1fdaca(0x123)];}}}}}}}_0x33bd6f[_0x1fdaca(0xea)]('purchases_return',{'success':_0x50921d['flash']('success'),'errors':_0x50921d[_0x1fdaca(0xbb)](_0x1fdaca(0xc0)),'role':_0x304305,'profile':_0x580c73,'master_shop':_0x5cd88b,'user':_0x3c722f,'language':_0x28f963});}catch(_0x534b58){console['log'](_0x534b58);}}),router[a0_0x30a1ea(0xf5)](a0_0x30a1ea(0xd0),auth,async(_0x14b9b1,_0xfb8228)=>{var _0x3366be=a0_0x30a1ea;try{const {username:_0x134357,email:_0x139645,role:_0x291039}=_0x14b9b1[_0x3366be(0xce)],_0x2f3132=_0x14b9b1[_0x3366be(0xce)],_0x5b6f8b=await profile[_0x3366be(0x128)]({'email':_0x2f3132[_0x3366be(0x11e)]}),_0x422f2e=await product['find']({}),_0x282aad=await master_shop['find']();console[_0x3366be(0xca)](_0x3366be(0xfa),_0x282aad),console[_0x3366be(0xca)](_0x14b9b1[_0x3366be(0x12b)]);const _0x2619a6=_0x14b9b1[_0x3366be(0xdc)]['id'],_0x44a37b=await purchases_return[_0x3366be(0xc8)](_0x2619a6);console['log'](_0x44a37b);const _0x3abbdb=await warehouse[_0x3366be(0x104)]([{'$match':{'name':_0x44a37b[_0x3366be(0xf7)],'room':_0x44a37b[_0x3366be(0xcb)]}},{'$unwind':_0x3366be(0x100)},{'$group':{'_id':_0x3366be(0xe1),'name':{'$first':_0x3366be(0x10e)},'product_stock':{'$first':_0x3366be(0x11b)},'bay':{'$first':_0x3366be(0x108)},'bin':{'$first':_0x3366be(0x129)},'type':{'$first':_0x3366be(0xcc)},'floorlevel':{'$first':_0x3366be(0xdb)},'primary_code':{'$first':_0x3366be(0xa8)},'secondary_code':{'$first':_0x3366be(0xc3)},'product_code':{'$first':_0x3366be(0xc7)},'storage':{'$first':_0x3366be(0xff)},'rack':{'$first':_0x3366be(0xf1)}}}]);warehouse_data=await warehouse[_0x3366be(0x104)]([{'$match':{'status':'Enabled','name':_0x3366be(0xc5),'warehouse_category':_0x3366be(0x113)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x3366be(0xca)](_0x3366be(0xf3),_0x3abbdb);if(_0x282aad[0x0]['language']==_0x3366be(0xe0)){var _0x449656=users[_0x3366be(0xb7)];console[_0x3366be(0xca)](_0x449656);}else{if(_0x282aad[0x0][_0x3366be(0xda)]==_0x3366be(0x124))var _0x449656=users[_0x3366be(0x124)];else{if(_0x282aad[0x0][_0x3366be(0xda)]==_0x3366be(0x120))var _0x449656=users[_0x3366be(0x120)];else{if(_0x282aad[0x0][_0x3366be(0xda)]=='Spanish')var _0x449656=users[_0x3366be(0xb9)];else{if(_0x282aad[0x0]['language']==_0x3366be(0xf4))var _0x449656=users[_0x3366be(0xf4)];else{if(_0x282aad[0x0][_0x3366be(0xda)]=='Portuguese\x20(BR)')var _0x449656=users[_0x3366be(0x11c)];else{if(_0x282aad[0x0][_0x3366be(0xda)]==_0x3366be(0xf8))var _0x449656=users[_0x3366be(0xf8)];else{if(_0x282aad[0x0][_0x3366be(0xda)]==_0x3366be(0xc6))var _0x449656=users[_0x3366be(0x123)];}}}}}}}_0xfb8228[_0x3366be(0xea)](_0x3366be(0xbe),{'success':_0x14b9b1[_0x3366be(0xbb)]('success'),'errors':_0x14b9b1[_0x3366be(0xbb)](_0x3366be(0xc0)),'role':_0x2f3132,'master_shop':_0x282aad,'profile':_0x5b6f8b,'user':_0x44a37b,'stock':_0x3abbdb,'product':_0x422f2e,'language':_0x449656,'warehouse':warehouse_data});}catch(_0x5609bd){console[_0x3366be(0xca)](_0x5609bd);}}),router[a0_0x30a1ea(0xb6)]('/view/:id',auth,async(_0x13ffc5,_0x2beaee)=>{var _0x43fa16=a0_0x30a1ea;try{const _0x37bc21=_0x13ffc5[_0x43fa16(0xdc)]['id'];console[_0x43fa16(0xca)](_0x37bc21);const _0x1ff68d=await purchases_return[_0x43fa16(0x128)]({'invoice':_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xd3)]});console[_0x43fa16(0xca)]('old_data',_0x1ff68d);const _0x1da644=await warehouse['findOne']({'name':_0x1ff68d[_0x43fa16(0xdd)],'room':_0x1ff68d['to_room']});console[_0x43fa16(0xca)](_0x43fa16(0xf2),_0x1da644);const {invoice:_0x4f83c7,suppliers:_0x19f5a0,date:_0x528743,warehouse_name:_0x224ae6,product_name:_0x28fd4d,purchase_quantity:_0x4f1c23,stocks:_0x10234e,return_qty:_0xf991a2,note:_0x213ae7,Room_name:_0x16af52,level:_0x2330d7,isle:_0x3eb963,pallet:_0x467836,to_warehouse_name:_0x35a0e6,to_Room_name:_0x46a1fe}=_0x13ffc5[_0x43fa16(0x12b)];if(typeof _0x28fd4d==_0x43fa16(0x106))var _0x2c091b=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0x10a)]],_0xb9dbbc=[_0x13ffc5['body'][_0x43fa16(0xfc)]],_0x253dd3=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xde)]],_0x9cfe72=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0x126)]],_0x5813db=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0x110)]],_0x4f1102=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xb3)]],_0x2dcc52=[_0x13ffc5[_0x43fa16(0x12b)]['pallet']],_0x46a23b=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xee)]],_0x7218b5=[_0x13ffc5[_0x43fa16(0x12b)]['product_code_hide']],_0x3f25a9=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xc4)]],_0xd7f21=[_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xb5)]];else var _0x2c091b=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0x10a)]],_0xb9dbbc=[..._0x13ffc5[_0x43fa16(0x12b)]['purchase_quantity']],_0x253dd3=[..._0x13ffc5[_0x43fa16(0x12b)]['stocks']],_0x9cfe72=[..._0x13ffc5['body'][_0x43fa16(0x126)]],_0x5813db=[..._0x13ffc5['body']['level']],_0x4f1102=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xb3)]],_0x2dcc52=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xd6)]],_0x7218b5=[..._0x13ffc5['body']['product_code_hide']],_0x3f25a9=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xc4)]],_0xd7f21=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xb5)]],_0x46a23b=[..._0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xee)]];const _0x55e76e=_0x2c091b[_0x43fa16(0xc9)](_0x4a5196=>{return _0x4a5196={'product_name':_0x4a5196};});_0xb9dbbc[_0x43fa16(0xe5)]((_0x443064,_0x5a1077)=>{var _0x295b74=_0x43fa16;_0x55e76e[_0x5a1077][_0x295b74(0xfc)]=_0x443064;}),_0x253dd3[_0x43fa16(0xe5)]((_0x464767,_0x284855)=>{_0x55e76e[_0x284855]['stock_quantity']=_0x464767;}),_0x9cfe72[_0x43fa16(0xe5)]((_0x330313,_0x44f103)=>{var _0x4b3ee4=_0x43fa16;_0x55e76e[_0x44f103][_0x4b3ee4(0x126)]=_0x330313;}),_0x5813db[_0x43fa16(0xe5)]((_0x32ab23,_0x4e31c7)=>{var _0x409a6c=_0x43fa16;_0x55e76e[_0x4e31c7][_0x409a6c(0xe2)]=_0x32ab23;}),_0x4f1102[_0x43fa16(0xe5)]((_0x3ff143,_0x5dc125)=>{var _0x313dbb=_0x43fa16;_0x55e76e[_0x5dc125][_0x313dbb(0xe8)]=_0x3ff143;}),_0x2dcc52['forEach']((_0x546cca,_0x4f3cdc)=>{var _0x58ed2f=_0x43fa16;_0x55e76e[_0x4f3cdc][_0x58ed2f(0xe3)]=_0x546cca;}),_0x7218b5[_0x43fa16(0xe5)]((_0x4d9f39,_0x496774)=>{var _0xd3aa25=_0x43fa16;_0x55e76e[_0x496774][_0xd3aa25(0x125)]=_0x4d9f39;}),_0x3f25a9[_0x43fa16(0xe5)]((_0x54d74d,_0x5e52dc)=>{var _0x293b19=_0x43fa16;_0x55e76e[_0x5e52dc][_0x293b19(0xf9)]=_0x54d74d;}),_0xd7f21['forEach']((_0x1a87ac,_0x52d42c)=>{var _0xc5723d=_0x43fa16;_0x55e76e[_0x52d42c][_0xc5723d(0xfd)]=_0x1a87ac;}),_0x46a23b[_0x43fa16(0xe5)]((_0x112522,_0x3ea0e9)=>{_0x55e76e[_0x3ea0e9]['type']=_0x112522;});var _0x21ee98=0x0;_0x55e76e[_0x43fa16(0xe5)](_0x5cc1a4=>{var _0x2aa4ec=_0x43fa16;console['log'](_0x2aa4ec(0x112),_0x5cc1a4),(parseInt(_0x5cc1a4[_0x2aa4ec(0xfc)])<parseInt(_0x5cc1a4['return_qty'])||parseInt(_0x5cc1a4[_0x2aa4ec(0x10d)])<parseInt(_0x5cc1a4['return_qty'])||parseInt(_0x5cc1a4[_0x2aa4ec(0x126)])==0x0)&&_0x21ee98++;});if(_0x21ee98!=0x0)return _0x13ffc5[_0x43fa16(0xbb)](_0x43fa16(0xc0),_0x43fa16(0xeb)),_0x2beaee[_0x43fa16(0x107)](_0x43fa16(0xd2));_0x1ff68d[_0x43fa16(0x11d)][_0x43fa16(0xe5)](_0x432f6c=>{const _0x20ca53=_0x1da644['product_details']['map'](_0x51a3fc=>{var _0x28544b=a0_0x4c05;_0x51a3fc[_0x28544b(0x10a)]==_0x432f6c[_0x28544b(0x10a)]&&_0x51a3fc['floorlevel']==_0x432f6c['floorlevel']&&_0x51a3fc[_0x28544b(0x102)]==_0x432f6c[_0x28544b(0x102)]&&_0x51a3fc[_0x28544b(0xe8)]==_0x432f6c[_0x28544b(0xe8)]&&_0x51a3fc[_0x28544b(0xe2)]==_0x432f6c[_0x28544b(0xe2)]&&(_0x51a3fc[_0x28544b(0xcf)]=parseInt(_0x51a3fc[_0x28544b(0xcf)])+parseInt(_0x432f6c['return_qty']));});}),console['log'](_0x43fa16(0xf2),_0x1da644),await _0x1da644[_0x43fa16(0xf0)](),_0x1ff68d[_0x43fa16(0xd3)]=_0x4f83c7,_0x1ff68d[_0x43fa16(0x10f)]=_0x19f5a0,_0x1ff68d[_0x43fa16(0xa7)]=_0x528743,_0x1ff68d['warehouse_name']=_0x224ae6,_0x1ff68d['return_product']=_0x55e76e,_0x1ff68d[_0x43fa16(0xc1)]=_0x213ae7,_0x1ff68d['room']=_0x16af52,_0x1ff68d[_0x43fa16(0xdd)]=_0x35a0e6,_0x1ff68d['to_room']=_0x46a1fe;const _0xa109a=await _0x1ff68d[_0x43fa16(0xf0)](),_0x2cc913=await purchases_return[_0x43fa16(0x128)]({'invoice':_0x13ffc5['body']['invoice']}),_0x15c52e=await warehouse[_0x43fa16(0x128)]({'name':_0x13ffc5[_0x43fa16(0x12b)]['to_warehouse_name'],'room':_0x13ffc5['body'][_0x43fa16(0xd7)]});_0x2cc913[_0x43fa16(0x11d)]['forEach'](_0x7f4056=>{var _0x5b88e4=_0x43fa16;_0x15c52e['product_details'][_0x5b88e4(0xc9)](_0xaa4b30=>{var _0x108f8e=_0x5b88e4;_0xaa4b30[_0x108f8e(0x10a)]==_0x7f4056[_0x108f8e(0x10a)]&&_0xaa4b30[_0x108f8e(0xd6)]==_0x7f4056['pallet']&&(_0xaa4b30['product_stock']=parseInt(_0xaa4b30[_0x108f8e(0xcf)])-parseInt(_0x7f4056[_0x108f8e(0x126)]),console[_0x108f8e(0xca)](_0x108f8e(0x109),_0x7f4056[_0x108f8e(0x126)]));});}),console[_0x43fa16(0xca)]('final',_0x15c52e),await _0x15c52e[_0x43fa16(0xf0)]();const _0x507ed8=await s_payment_data[_0x43fa16(0x128)]({'invoice':_0x13ffc5[_0x43fa16(0x12b)][_0x43fa16(0xd3)],'reason':_0x43fa16(0xd8)});await _0x507ed8['save'](),_0x13ffc5[_0x43fa16(0xbb)]('success','purchase\x20return\x20successfully'),_0x2beaee[_0x43fa16(0x107)](_0x43fa16(0x117));}catch(_0x4f4eef){console['log'](_0x4f4eef),_0x2beaee[_0x43fa16(0xdf)](0xc8)[_0x43fa16(0xcd)]({'message':_0x4f4eef[_0x43fa16(0x127)]});}}),router[a0_0x30a1ea(0xf5)](a0_0x30a1ea(0x12a),auth,async(_0x55abe9,_0xdbe1c8)=>{var _0x4cded1=a0_0x30a1ea;try{const {username:_0x4a4ac3,email:_0x1f3925,role:_0x16c9a5}=_0x55abe9[_0x4cded1(0xce)],_0x435e2a=_0x55abe9['user'],_0x145a64=await profile[_0x4cded1(0x128)]({'email':_0x435e2a[_0x4cded1(0x11e)]}),_0x49d2e0=await master_shop['find']();console[_0x4cded1(0xca)](_0x4cded1(0xfa),_0x49d2e0);const _0x3d8927=_0x55abe9['params']['id'],_0x12cbbb=await purchases_return[_0x4cded1(0xc8)](_0x3d8927);console[_0x4cded1(0xca)](_0x12cbbb);const _0x22b4e1=await suppliers['findOne']({'name':_0x12cbbb[_0x4cded1(0x10f)]});console['log'](_0x22b4e1);if(_0x49d2e0[0x0]['language']=='English\x20(US)'){var _0x2b4511=users[_0x4cded1(0xb7)];console['log'](_0x2b4511);}else{if(_0x49d2e0[0x0][_0x4cded1(0xda)]==_0x4cded1(0x124))var _0x2b4511=users[_0x4cded1(0x124)];else{if(_0x49d2e0[0x0][_0x4cded1(0xda)]==_0x4cded1(0x120))var _0x2b4511=users[_0x4cded1(0x120)];else{if(_0x49d2e0[0x0][_0x4cded1(0xda)]==_0x4cded1(0xb9))var _0x2b4511=users[_0x4cded1(0xb9)];else{if(_0x49d2e0[0x0]['language']==_0x4cded1(0xf4))var _0x2b4511=users[_0x4cded1(0xf4)];else{if(_0x49d2e0[0x0]['language']==_0x4cded1(0xba))var _0x2b4511=users[_0x4cded1(0x11c)];else{if(_0x49d2e0[0x0][_0x4cded1(0xda)]==_0x4cded1(0xf8))var _0x2b4511=users[_0x4cded1(0xf8)];else{if(_0x49d2e0[0x0]['language']==_0x4cded1(0xc6))var _0x2b4511=users[_0x4cded1(0x123)];}}}}}}}_0xdbe1c8[_0x4cded1(0xea)]('return_purchase_invoice',{'success':_0x55abe9[_0x4cded1(0xbb)](_0x4cded1(0xe6)),'errors':_0x55abe9[_0x4cded1(0xbb)]('errors'),'role':_0x435e2a,'profile':_0x145a64,'master_shop':_0x49d2e0,'supplier':_0x22b4e1,'purchase':_0x12cbbb,'language':_0x2b4511});}catch(_0x4dcdb3){console[_0x4cded1(0xca)](_0x4dcdb3);}}),router['post'](a0_0x30a1ea(0x11a),auth,async(_0x1225e8,_0x298739)=>{var _0x35ee83=a0_0x30a1ea;try{const _0x48c85d=_0x1225e8['params']['id'],{invoice:_0x22e396,suppliers:_0x223ecb,receivable_amount:_0x318b11,received_amount:_0x2b4bb5}=_0x1225e8[_0x35ee83(0x12b)],_0x10e6b3=await purchases_return[_0x35ee83(0xc8)](_0x48c85d);console['log'](_0x10e6b3);var _0x39b6ca=_0x318b11-_0x2b4bb5;console[_0x35ee83(0xca)](_0x2b4bb5),_0x10e6b3[_0x35ee83(0x114)]=parseFloat(_0x2b4bb5)+parseFloat(_0x10e6b3['received']),_0x10e6b3[_0x35ee83(0xd5)]=_0x39b6ca,console[_0x35ee83(0xca)](_0x10e6b3);const _0x305f05=await _0x10e6b3[_0x35ee83(0xf0)](),_0x4dec23=await s_payment_data[_0x35ee83(0x128)]({'invoice':_0x1225e8[_0x35ee83(0x12b)][_0x35ee83(0xd3)],'reason':'Purchase\x20Return'});_0x4dec23[_0x35ee83(0xaf)]=_0x39b6ca,await _0x4dec23['save']();let _0x8e82f0=new Date(),_0xa65e89=('0'+_0x8e82f0[_0x35ee83(0xbc)]())[_0x35ee83(0x101)](-0x2),_0x546fc5=('0'+(_0x8e82f0[_0x35ee83(0xd9)]()+0x1))[_0x35ee83(0x101)](-0x2),_0x572022=_0x8e82f0[_0x35ee83(0x10b)](),_0x5bfaf5=_0x572022+'-'+_0x546fc5+'-'+_0xa65e89;const _0x41c373=new suppliers_payment({'invoice':_0x22e396,'date':_0x572022+'-'+_0x546fc5+'-'+_0xa65e89,'suppliers':_0x223ecb,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x2b4bb5}),_0x2d269f=await _0x41c373[_0x35ee83(0xf0)]();_0x1225e8[_0x35ee83(0xbb)]('success','payment\x20successfull'),_0x298739['redirect'](_0x35ee83(0x117));}catch(_0x197ef8){console['log'](_0x197ef8);}}),module[a0_0x30a1ea(0xad)]=router;