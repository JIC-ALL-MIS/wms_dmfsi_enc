function a0_0x1515(){var _0x41e83e=['map','bay','$product_details.primary_code','Router','received','save','email','$warehouse_name','product_code_hide','secondary_code_hide','$note','string','findById','message','get','$return_product.product_name','$invoice','product_name','to_warehouse_name','pallet','$product_details.type','/view/:id','$due_amount','status','master','Enabled','old_warehouse_data','errors','$supplier_docs.email','101620KooTJe','secondary_code','English\x20(US)','flash','$date','405840JkKdUx','slice','Chinese','payment\x20successfull','$return_product.price','German','Arabic','33TxVlud','floorlevel','$total_amount','amount','stock_quantity','return_purchase_edit','product_stock','$return_product.return_qty','back','product_code','Purchase\x20Return','room','level','to_room','/purchases_return/view','findOne','Portuguese','Arabic\x20(ae)','Spanish','due_amount','$received','redirect','$product_details.rack','$supplier_docs.mobile','purchases_return','English','Hindi','log','body','success','supplier_docs','$product_details.bay','foreach\x20newproduct','2erHojx','$product_details.storage','final','$product_details.product_stock','../middleware/auth','$product_details.bin','stock_data','$suppliers','916790XQUQez','3985961XatTrH','post','user','render','product_details.return_qtyproduct_details.return_qty','params','/invoice/:id','../models/all_models','474988rdFCVA','json','language','invoice','$supplier_docs','find','purchase\x20return\x20successfully','Return\x20Goods','warehouse_name','type','return_qty','$name','purchase_quantity','bin','8sjUbXw','$product_details._id','getFullYear','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','product_details','Received\x20For\x20Purchase\x20Return','Portuguese\x20(BR)','aggregate','getDate','isle','express','4241502RZMAys','note','$receivable','$product_details.secondary_code','stocks','exports','$return_product','2966676JCMiqj','$_id','types','primary_code_hide','French','$product_details.floorlevel','return_product','forEach','suppliers'];a0_0x1515=function(){return _0x41e83e;};return a0_0x1515();}var a0_0x31a655=a0_0x3acd;(function(_0x556096,_0x7eed76){var _0xde8509=a0_0x3acd,_0x2e5b84=_0x556096();while(!![]){try{var _0x3085d2=parseInt(_0xde8509(0x1cf))/0x1*(parseInt(_0xde8509(0x1c7))/0x2)+parseInt(_0xde8509(0x22a))/0x3*(parseInt(_0xde8509(0x1d8))/0x4)+parseInt(_0xde8509(0x21e))/0x5+-parseInt(_0xde8509(0x1f8))/0x6+parseInt(_0xde8509(0x1d0))/0x7*(-parseInt(_0xde8509(0x1e6))/0x8)+-parseInt(_0xde8509(0x1f1))/0x9+-parseInt(_0xde8509(0x223))/0xa;if(_0x3085d2===_0x7eed76)break;else _0x2e5b84['push'](_0x2e5b84['shift']());}catch(_0x166f49){_0x2e5b84['push'](_0x2e5b84['shift']());}}}(a0_0x1515,0xa2fd0));function a0_0x3acd(_0x480945,_0x2a5969){var _0x15153d=a0_0x1515();return a0_0x3acd=function(_0x3acd8f,_0x1825a9){_0x3acd8f=_0x3acd8f-0x1b9;var _0x424a43=_0x15153d[_0x3acd8f];return _0x424a43;},a0_0x3acd(_0x480945,_0x2a5969);}const express=require(a0_0x31a655(0x1f0)),app=express(),router=express[a0_0x31a655(0x204)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x31a655(0x1d7)),auth=require(a0_0x31a655(0x1cb)),users=require('../public/language/languages.json');router[a0_0x31a655(0x20f)]('/view',auth,async(_0x33c5bb,_0x54843b)=>{var _0x2c8ae2=a0_0x31a655;try{const {username:_0x594252,email:_0x33152f,role:_0x5cb795}=_0x33c5bb['user'],_0x10eaa2=_0x33c5bb[_0x2c8ae2(0x1d2)],_0x187a78=await profile[_0x2c8ae2(0x239)]({'email':_0x10eaa2[_0x2c8ae2(0x207)]}),_0x5955ab=await master_shop[_0x2c8ae2(0x1dd)]();console['log'](_0x2c8ae2(0x219),_0x5955ab);const _0x40b178=await purchases_return['aggregate']([{'$lookup':{'from':_0x2c8ae2(0x200),'localField':'suppliers','foreignField':'name','as':_0x2c8ae2(0x1c4)}},{'$unwind':_0x2c8ae2(0x1f7)},{'$unwind':_0x2c8ae2(0x1dc)},{'$group':{'_id':_0x2c8ae2(0x1f9),'invoice':{'$first':_0x2c8ae2(0x211)},'date':{'$first':_0x2c8ae2(0x222)},'suppliers':{'$first':_0x2c8ae2(0x1ce)},'warehouse_name':{'$first':_0x2c8ae2(0x208)},'product_name':{'$first':_0x2c8ae2(0x210)},'return_qty':{'$first':_0x2c8ae2(0x231)},'price':{'$first':_0x2c8ae2(0x227)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x2c8ae2(0x20b)},'total_amount':{'$first':_0x2c8ae2(0x22c)},'discount':{'$first':'$discount'},'receivable':{'$first':_0x2c8ae2(0x1f3)},'received':{'$first':_0x2c8ae2(0x1ba)},'due_amount':{'$first':_0x2c8ae2(0x217)},'mobile':{'$first':_0x2c8ae2(0x1bd)},'email':{'$first':_0x2c8ae2(0x21d)},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x2c8ae2(0x1c1)](_0x40b178);if(_0x5955ab[0x0]['language']==_0x2c8ae2(0x220)){var _0x44fd99=users[_0x2c8ae2(0x1bf)];console[_0x2c8ae2(0x1c1)](_0x44fd99);}else{if(_0x5955ab[0x0][_0x2c8ae2(0x1da)]==_0x2c8ae2(0x1c0))var _0x44fd99=users['Hindi'];else{if(_0x5955ab[0x0]['language']==_0x2c8ae2(0x228))var _0x44fd99=users[_0x2c8ae2(0x228)];else{if(_0x5955ab[0x0][_0x2c8ae2(0x1da)]==_0x2c8ae2(0x23c))var _0x44fd99=users['Spanish'];else{if(_0x5955ab[0x0][_0x2c8ae2(0x1da)]==_0x2c8ae2(0x1fc))var _0x44fd99=users[_0x2c8ae2(0x1fc)];else{if(_0x5955ab[0x0][_0x2c8ae2(0x1da)]==_0x2c8ae2(0x1ec))var _0x44fd99=users[_0x2c8ae2(0x23a)];else{if(_0x5955ab[0x0][_0x2c8ae2(0x1da)]=='Chinese')var _0x44fd99=users[_0x2c8ae2(0x225)];else{if(_0x5955ab[0x0]['language']==_0x2c8ae2(0x23b))var _0x44fd99=users[_0x2c8ae2(0x229)];}}}}}}}_0x54843b[_0x2c8ae2(0x1d3)](_0x2c8ae2(0x1be),{'success':_0x33c5bb[_0x2c8ae2(0x221)]('success'),'errors':_0x33c5bb[_0x2c8ae2(0x221)]('errors'),'role':_0x10eaa2,'profile':_0x187a78,'master_shop':_0x5955ab,'user':_0x40b178,'language':_0x44fd99});}catch(_0x28c6ae){console[_0x2c8ae2(0x1c1)](_0x28c6ae);}}),router[a0_0x31a655(0x20f)]('/view/:id',auth,async(_0x4c2c15,_0x23d949)=>{var _0x205620=a0_0x31a655;try{const {username:_0x12afd3,email:_0x1e17bc,role:_0x16b98f}=_0x4c2c15['user'],_0xbb1d70=_0x4c2c15['user'],_0x4f760c=await profile[_0x205620(0x239)]({'email':_0xbb1d70[_0x205620(0x207)]}),_0x302f50=await product['find']({}),_0xe7831a=await master_shop['find']();console[_0x205620(0x1c1)](_0x205620(0x219),_0xe7831a),console[_0x205620(0x1c1)](_0x4c2c15[_0x205620(0x1c2)]);const _0x3c34b0=_0x4c2c15['params']['id'],_0xf2aa14=await purchases_return[_0x205620(0x20d)](_0x3c34b0);console[_0x205620(0x1c1)](_0xf2aa14);const _0x2379e4=await warehouse[_0x205620(0x1ed)]([{'$match':{'name':_0xf2aa14[_0x205620(0x1e0)],'room':_0xf2aa14['room']}},{'$unwind':'$product_details'},{'$group':{'_id':_0x205620(0x1e7),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x205620(0x1ca)},'bay':{'$first':_0x205620(0x1c5)},'bin':{'$first':_0x205620(0x1cc)},'type':{'$first':_0x205620(0x215)},'floorlevel':{'$first':_0x205620(0x1fd)},'primary_code':{'$first':_0x205620(0x203)},'secondary_code':{'$first':_0x205620(0x1f4)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x205620(0x1c8)},'rack':{'$first':_0x205620(0x1bc)}}}]);warehouse_data=await warehouse[_0x205620(0x1ed)]([{'$match':{'status':_0x205620(0x21a),'name':_0x205620(0x1df),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x205620(0x1e3),'name':{'$first':_0x205620(0x1e3)}}},{'$sort':{'name':0x1}}]),console['log'](_0x205620(0x1cd),_0x2379e4);if(_0xe7831a[0x0]['language']==_0x205620(0x220)){var _0x1ed083=users['English'];console['log'](_0x1ed083);}else{if(_0xe7831a[0x0][_0x205620(0x1da)]==_0x205620(0x1c0))var _0x1ed083=users[_0x205620(0x1c0)];else{if(_0xe7831a[0x0][_0x205620(0x1da)]==_0x205620(0x228))var _0x1ed083=users['German'];else{if(_0xe7831a[0x0][_0x205620(0x1da)]=='Spanish')var _0x1ed083=users[_0x205620(0x23c)];else{if(_0xe7831a[0x0][_0x205620(0x1da)]==_0x205620(0x1fc))var _0x1ed083=users['French'];else{if(_0xe7831a[0x0][_0x205620(0x1da)]==_0x205620(0x1ec))var _0x1ed083=users[_0x205620(0x23a)];else{if(_0xe7831a[0x0]['language']==_0x205620(0x225))var _0x1ed083=users['Chinese'];else{if(_0xe7831a[0x0]['language']==_0x205620(0x23b))var _0x1ed083=users[_0x205620(0x229)];}}}}}}}_0x23d949[_0x205620(0x1d3)](_0x205620(0x22f),{'success':_0x4c2c15[_0x205620(0x221)]('success'),'errors':_0x4c2c15[_0x205620(0x221)](_0x205620(0x21c)),'role':_0xbb1d70,'master_shop':_0xe7831a,'profile':_0x4f760c,'user':_0xf2aa14,'stock':_0x2379e4,'product':_0x302f50,'language':_0x1ed083,'warehouse':warehouse_data});}catch(_0x4ce020){console['log'](_0x4ce020);}}),router[a0_0x31a655(0x1d1)](a0_0x31a655(0x216),auth,async(_0x14cd56,_0x97bc34)=>{var _0x5eb736=a0_0x31a655;try{const _0x2d69d7=_0x14cd56['params']['id'];console[_0x5eb736(0x1c1)](_0x2d69d7);const _0x41e101=await purchases_return[_0x5eb736(0x239)]({'invoice':_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1db)]});console[_0x5eb736(0x1c1)]('old_data',_0x41e101);const _0x4e8ace=await warehouse[_0x5eb736(0x239)]({'name':_0x41e101[_0x5eb736(0x213)],'room':_0x41e101[_0x5eb736(0x237)]});console[_0x5eb736(0x1c1)](_0x5eb736(0x21b),_0x4e8ace);const {invoice:_0x58df01,suppliers:_0x5c9367,date:_0x2b4968,warehouse_name:_0x115360,product_name:_0x183310,purchase_quantity:_0x2e4fbb,stocks:_0x15dd42,return_qty:_0x4c1089,note:_0x47ff63,Room_name:_0x1e46d7,level:_0x37fa8,isle:_0x18f43c,pallet:_0x4ad3c0,to_warehouse_name:_0x143763,to_Room_name:_0x413e87}=_0x14cd56[_0x5eb736(0x1c2)];if(typeof _0x183310==_0x5eb736(0x20c))var _0x559085=[_0x14cd56[_0x5eb736(0x1c2)]['product_name']],_0x7f6e78=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1e4)]],_0x5071c7=[_0x14cd56[_0x5eb736(0x1c2)]['stocks']],_0x56d894=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1e2)]],_0x59b91f=[_0x14cd56['body'][_0x5eb736(0x236)]],_0x352197=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1ef)]],_0x5a4c3d=[_0x14cd56['body'][_0x5eb736(0x214)]],_0x3dc930=[_0x14cd56[_0x5eb736(0x1c2)]['types']],_0x48d1cb=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x209)]],_0xeb1380=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1fb)]],_0x248c54=[_0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x20a)]];else var _0x559085=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x212)]],_0x7f6e78=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1e4)]],_0x5071c7=[..._0x14cd56['body'][_0x5eb736(0x1f5)]],_0x56d894=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1e2)]],_0x59b91f=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x236)]],_0x352197=[..._0x14cd56['body'][_0x5eb736(0x1ef)]],_0x5a4c3d=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x214)]],_0x48d1cb=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x209)]],_0xeb1380=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1fb)]],_0x248c54=[..._0x14cd56['body']['secondary_code_hide']],_0x3dc930=[..._0x14cd56[_0x5eb736(0x1c2)][_0x5eb736(0x1fa)]];const _0x22b347=_0x559085[_0x5eb736(0x201)](_0x3aa2f5=>{return _0x3aa2f5={'product_name':_0x3aa2f5};});_0x7f6e78['forEach']((_0x160a12,_0x35d36a)=>{_0x22b347[_0x35d36a]['purchase_quantity']=_0x160a12;}),_0x5071c7['forEach']((_0x33e188,_0x3eb79a)=>{var _0x1ec9a0=_0x5eb736;_0x22b347[_0x3eb79a][_0x1ec9a0(0x22e)]=_0x33e188;}),_0x56d894[_0x5eb736(0x1ff)]((_0x382542,_0x45ae19)=>{var _0x3b8b25=_0x5eb736;_0x22b347[_0x45ae19][_0x3b8b25(0x1e2)]=_0x382542;}),_0x59b91f[_0x5eb736(0x1ff)]((_0xde1808,_0x5d3fab)=>{var _0x3c0cd7=_0x5eb736;_0x22b347[_0x5d3fab][_0x3c0cd7(0x202)]=_0xde1808;}),_0x352197[_0x5eb736(0x1ff)]((_0x22d325,_0xf21bd4)=>{var _0x4628ce=_0x5eb736;_0x22b347[_0xf21bd4][_0x4628ce(0x1e5)]=_0x22d325;}),_0x5a4c3d[_0x5eb736(0x1ff)]((_0xcc08cc,_0x517f4b)=>{var _0x84a2e4=_0x5eb736;_0x22b347[_0x517f4b][_0x84a2e4(0x22b)]=_0xcc08cc;}),_0x48d1cb['forEach']((_0x325bcf,_0x15766a)=>{var _0x52fdab=_0x5eb736;_0x22b347[_0x15766a][_0x52fdab(0x233)]=_0x325bcf;}),_0xeb1380[_0x5eb736(0x1ff)]((_0x2e02e3,_0x28275c)=>{_0x22b347[_0x28275c]['primary_code']=_0x2e02e3;}),_0x248c54['forEach']((_0x1c3eff,_0xd4b4f8)=>{var _0x333fdc=_0x5eb736;_0x22b347[_0xd4b4f8][_0x333fdc(0x21f)]=_0x1c3eff;}),_0x3dc930[_0x5eb736(0x1ff)]((_0x22d74f,_0x3983ce)=>{var _0x15e45d=_0x5eb736;_0x22b347[_0x3983ce][_0x15e45d(0x1e1)]=_0x22d74f;});var _0x53c8c4=0x0;_0x22b347[_0x5eb736(0x1ff)](_0x174a78=>{var _0x4377f5=_0x5eb736;console['log'](_0x4377f5(0x1c6),_0x174a78),(parseInt(_0x174a78[_0x4377f5(0x1e4)])<parseInt(_0x174a78[_0x4377f5(0x1e2)])||parseInt(_0x174a78[_0x4377f5(0x22e)])<parseInt(_0x174a78[_0x4377f5(0x1e2)])||parseInt(_0x174a78['return_qty'])==0x0)&&_0x53c8c4++;});if(_0x53c8c4!=0x0)return _0x14cd56[_0x5eb736(0x221)]('errors',_0x5eb736(0x1e9)),_0x97bc34[_0x5eb736(0x1bb)](_0x5eb736(0x232));_0x41e101[_0x5eb736(0x1fe)][_0x5eb736(0x1ff)](_0x2a0d78=>{var _0x36b73c=_0x5eb736;const _0x2635d7=_0x4e8ace[_0x36b73c(0x1ea)]['map'](_0xc217f9=>{var _0x4c8871=_0x36b73c;_0xc217f9['product_name']==_0x2a0d78[_0x4c8871(0x212)]&&_0xc217f9[_0x4c8871(0x22b)]==_0x2a0d78['floorlevel']&&_0xc217f9[_0x4c8871(0x1e1)]==_0x2a0d78[_0x4c8871(0x1e1)]&&_0xc217f9[_0x4c8871(0x1e5)]==_0x2a0d78[_0x4c8871(0x1e5)]&&_0xc217f9[_0x4c8871(0x202)]==_0x2a0d78[_0x4c8871(0x202)]&&(_0xc217f9[_0x4c8871(0x230)]=parseInt(_0xc217f9[_0x4c8871(0x230)])+parseInt(_0x2a0d78[_0x4c8871(0x1e2)]));});}),console[_0x5eb736(0x1c1)](_0x5eb736(0x21b),_0x4e8ace),await _0x4e8ace['save'](),_0x41e101['invoice']=_0x58df01,_0x41e101[_0x5eb736(0x200)]=_0x5c9367,_0x41e101['date']=_0x2b4968,_0x41e101[_0x5eb736(0x1e0)]=_0x115360,_0x41e101['return_product']=_0x22b347,_0x41e101[_0x5eb736(0x1f2)]=_0x47ff63,_0x41e101[_0x5eb736(0x235)]=_0x1e46d7,_0x41e101[_0x5eb736(0x213)]=_0x143763,_0x41e101['to_room']=_0x413e87;const _0x4c26af=await _0x41e101[_0x5eb736(0x206)](),_0x485259=await purchases_return[_0x5eb736(0x239)]({'invoice':_0x14cd56['body'][_0x5eb736(0x1db)]}),_0x4305d1=await warehouse[_0x5eb736(0x239)]({'name':_0x14cd56['body'][_0x5eb736(0x213)],'room':_0x14cd56[_0x5eb736(0x1c2)]['to_Room_name']});_0x485259['return_product'][_0x5eb736(0x1ff)](_0x2559e1=>{var _0x5bcab0=_0x5eb736;_0x4305d1[_0x5bcab0(0x1ea)][_0x5bcab0(0x201)](_0x20b7d1=>{var _0x13fc43=_0x5bcab0;_0x20b7d1[_0x13fc43(0x212)]==_0x2559e1[_0x13fc43(0x212)]&&_0x20b7d1[_0x13fc43(0x214)]==_0x2559e1[_0x13fc43(0x214)]&&(_0x20b7d1[_0x13fc43(0x230)]=parseInt(_0x20b7d1[_0x13fc43(0x230)])-parseInt(_0x2559e1[_0x13fc43(0x1e2)]),console[_0x13fc43(0x1c1)](_0x13fc43(0x1d4),_0x2559e1[_0x13fc43(0x1e2)]));});}),console[_0x5eb736(0x1c1)](_0x5eb736(0x1c9),_0x4305d1),await _0x4305d1[_0x5eb736(0x206)]();const _0x264835=await s_payment_data[_0x5eb736(0x239)]({'invoice':_0x14cd56['body'][_0x5eb736(0x1db)],'reason':'Purchase\x20Return'});await _0x264835[_0x5eb736(0x206)](),_0x14cd56[_0x5eb736(0x221)](_0x5eb736(0x1c3),_0x5eb736(0x1de)),_0x97bc34['redirect'](_0x5eb736(0x238));}catch(_0x1328a2){console['log'](_0x1328a2),_0x97bc34[_0x5eb736(0x218)](0xc8)[_0x5eb736(0x1d9)]({'message':_0x1328a2[_0x5eb736(0x20e)]});}}),router[a0_0x31a655(0x20f)](a0_0x31a655(0x1d6),auth,async(_0x1a06c7,_0x539a9f)=>{var _0xafed64=a0_0x31a655;try{const {username:_0xe70e2f,email:_0x2ff141,role:_0xdd6b29}=_0x1a06c7[_0xafed64(0x1d2)],_0x2564dc=_0x1a06c7[_0xafed64(0x1d2)],_0x4a54a9=await profile[_0xafed64(0x239)]({'email':_0x2564dc[_0xafed64(0x207)]}),_0x108eb8=await master_shop[_0xafed64(0x1dd)]();console[_0xafed64(0x1c1)](_0xafed64(0x219),_0x108eb8);const _0x4b9ee9=_0x1a06c7['params']['id'],_0x3c7916=await purchases_return['findById'](_0x4b9ee9);console[_0xafed64(0x1c1)](_0x3c7916);const _0x53799b=await suppliers[_0xafed64(0x239)]({'name':_0x3c7916[_0xafed64(0x200)]});console[_0xafed64(0x1c1)](_0x53799b);if(_0x108eb8[0x0][_0xafed64(0x1da)]=='English\x20(US)'){var _0x28458c=users[_0xafed64(0x1bf)];console[_0xafed64(0x1c1)](_0x28458c);}else{if(_0x108eb8[0x0]['language']==_0xafed64(0x1c0))var _0x28458c=users[_0xafed64(0x1c0)];else{if(_0x108eb8[0x0][_0xafed64(0x1da)]==_0xafed64(0x228))var _0x28458c=users[_0xafed64(0x228)];else{if(_0x108eb8[0x0]['language']==_0xafed64(0x23c))var _0x28458c=users[_0xafed64(0x23c)];else{if(_0x108eb8[0x0][_0xafed64(0x1da)]==_0xafed64(0x1fc))var _0x28458c=users[_0xafed64(0x1fc)];else{if(_0x108eb8[0x0][_0xafed64(0x1da)]==_0xafed64(0x1ec))var _0x28458c=users['Portuguese'];else{if(_0x108eb8[0x0]['language']==_0xafed64(0x225))var _0x28458c=users['Chinese'];else{if(_0x108eb8[0x0]['language']==_0xafed64(0x23b))var _0x28458c=users['Arabic'];}}}}}}}_0x539a9f[_0xafed64(0x1d3)]('return_purchase_invoice',{'success':_0x1a06c7[_0xafed64(0x221)](_0xafed64(0x1c3)),'errors':_0x1a06c7[_0xafed64(0x221)](_0xafed64(0x21c)),'role':_0x2564dc,'profile':_0x4a54a9,'master_shop':_0x108eb8,'supplier':_0x53799b,'purchase':_0x3c7916,'language':_0x28458c});}catch(_0x1bbca1){console[_0xafed64(0x1c1)](_0x1bbca1);}}),router[a0_0x31a655(0x1d1)]('/receive_payment/:id',auth,async(_0x1356da,_0x13f2b8)=>{var _0x547fe3=a0_0x31a655;try{const _0x4b0165=_0x1356da[_0x547fe3(0x1d5)]['id'],{invoice:_0x21d0d1,suppliers:_0x5708c4,receivable_amount:_0x474ddc,received_amount:_0x213706}=_0x1356da['body'],_0x2da8f9=await purchases_return[_0x547fe3(0x20d)](_0x4b0165);console[_0x547fe3(0x1c1)](_0x2da8f9);var _0x429a24=_0x474ddc-_0x213706;console['log'](_0x213706),_0x2da8f9[_0x547fe3(0x205)]=parseFloat(_0x213706)+parseFloat(_0x2da8f9['received']),_0x2da8f9[_0x547fe3(0x1b9)]=_0x429a24,console[_0x547fe3(0x1c1)](_0x2da8f9);const _0x28c571=await _0x2da8f9[_0x547fe3(0x206)](),_0x370e3e=await s_payment_data[_0x547fe3(0x239)]({'invoice':_0x1356da['body'][_0x547fe3(0x1db)],'reason':_0x547fe3(0x234)});_0x370e3e[_0x547fe3(0x22d)]=_0x429a24,await _0x370e3e['save']();let _0x440853=new Date(),_0x428fcf=('0'+_0x440853[_0x547fe3(0x1ee)]())['slice'](-0x2),_0x420ffb=('0'+(_0x440853['getMonth']()+0x1))[_0x547fe3(0x224)](-0x2),_0x5cecca=_0x440853[_0x547fe3(0x1e8)](),_0x665d47=_0x5cecca+'-'+_0x420ffb+'-'+_0x428fcf;const _0x1858c9=new suppliers_payment({'invoice':_0x21d0d1,'date':_0x5cecca+'-'+_0x420ffb+'-'+_0x428fcf,'suppliers':_0x5708c4,'reason':_0x547fe3(0x1eb),'amount':_0x213706}),_0x5bf871=await _0x1858c9[_0x547fe3(0x206)]();_0x1356da[_0x547fe3(0x221)]('success',_0x547fe3(0x226)),_0x13f2b8['redirect'](_0x547fe3(0x238));}catch(_0x345082){console['log'](_0x345082);}}),module[a0_0x31a655(0x1f6)]=router;