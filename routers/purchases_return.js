function a0_0x2a6a(){var _0x4ccb33=['secondary_code_hide','/view/:id','body','$invoice','Received\x20For\x20Purchase\x20Return','$total_amount','save','$product_details.bin','stock_quantity','message','flash','return_product','findOne','$supplier_docs','primary_code_hide','to_room','redirect','floorlevel','to_warehouse_name','json','log','product_name','Arabic\x20(ae)','supplier_docs','warehouse_name','Hindi','84aXfBKu','$product_details.product_stock','$_id','$product_details.bay','Enabled','$product_details.product_code','types','Portuguese\x20(BR)','product_details.return_qtyproduct_details.return_qty','map','product_stock','English','Arabic','18zaHcoi','Purchase\x20Return','status','$receivable','$discount','product_code_hide','145505rOnBqo','post','email','express','forEach','$date','name','/purchases_return/view','bay','received','12666456wyLhio','Return\x20Goods','7769IWMVrA','final','/view','../middleware/auth','2399660EWUrfK','Chinese','German','get','suppliers','$name','$product_details.secondary_code','/invoice/:id','$product_details.product_name','product_code','render','122zVdkfk','find','stocks','old_warehouse_data','$due_amount','invoice','$supplier_docs.address','findById','stock_data','$product_details.floorlevel','11rQLRDw','level','old_data','purchase_quantity','isle','room','secondary_code','$return_product.total','../public/language/languages.json','return_purchase_invoice','back','79328FoFuQT','Portuguese','French','$return_product','string','$return_product.product_name','English\x20(US)','success','$product_details.type','date','purchases_return','master','Raw\x20Materials','purchase\x20return\x20successfully','params','$product_details.rack','type','slice','3259438IkEIAJ','aggregate','pallet','return_qty','57jbeGkP','amount','user','to_Room_name','476488yruCCi','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','getFullYear','language','$return_product.return_qty','getDate','$product_details','payment\x20successfull','/receive_payment/:id','Spanish','product_details','errors','bin'];a0_0x2a6a=function(){return _0x4ccb33;};return a0_0x2a6a();}var a0_0x1a301a=a0_0x560e;function a0_0x560e(_0x486bf,_0xcdef0c){var _0x2a6afb=a0_0x2a6a();return a0_0x560e=function(_0x560e56,_0x4d3b6e){_0x560e56=_0x560e56-0x12d;var _0x31f513=_0x2a6afb[_0x560e56];return _0x31f513;},a0_0x560e(_0x486bf,_0xcdef0c);}(function(_0x3ecdda,_0x478052){var _0x125491=a0_0x560e,_0x4c505d=_0x3ecdda();while(!![]){try{var _0x421158=parseInt(_0x125491(0x148))/0x1*(-parseInt(_0x125491(0x157))/0x2)+-parseInt(_0x125491(0x182))/0x3*(parseInt(_0x125491(0x16c))/0x4)+parseInt(_0x125491(0x13c))/0x5*(parseInt(_0x125491(0x1ad))/0x6)+-parseInt(_0x125491(0x17e))/0x7+-parseInt(_0x125491(0x186))/0x8*(parseInt(_0x125491(0x136))/0x9)+parseInt(_0x125491(0x14c))/0xa*(parseInt(_0x125491(0x161))/0xb)+parseInt(_0x125491(0x146))/0xc;if(_0x421158===_0x478052)break;else _0x4c505d['push'](_0x4c505d['shift']());}catch(_0x4291cd){_0x4c505d['push'](_0x4c505d['shift']());}}}(a0_0x2a6a,0x414b5));const express=require(a0_0x1a301a(0x13f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x1a301a(0x14b)),users=require(a0_0x1a301a(0x169));router[a0_0x1a301a(0x14f)](a0_0x1a301a(0x14a),auth,async(_0x54d5c0,_0x86accb)=>{var _0x4049fe=a0_0x1a301a;try{const {username:_0x123f5f,email:_0x1dcd7f,role:_0xac9395}=_0x54d5c0[_0x4049fe(0x184)],_0x5192dc=_0x54d5c0[_0x4049fe(0x184)],_0x220a53=await profile[_0x4049fe(0x19f)]({'email':_0x5192dc[_0x4049fe(0x13e)]}),_0x421c75=await master_shop[_0x4049fe(0x158)]();console[_0x4049fe(0x1a7)](_0x4049fe(0x177),_0x421c75);const _0xb8680e=await purchases_return[_0x4049fe(0x17f)]([{'$lookup':{'from':_0x4049fe(0x150),'localField':_0x4049fe(0x150),'foreignField':_0x4049fe(0x142),'as':_0x4049fe(0x1aa)}},{'$unwind':_0x4049fe(0x16f)},{'$unwind':_0x4049fe(0x1a0)},{'$group':{'_id':_0x4049fe(0x1af),'invoice':{'$first':_0x4049fe(0x196)},'date':{'$first':_0x4049fe(0x141)},'suppliers':{'$first':'$suppliers'},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':_0x4049fe(0x171)},'return_qty':{'$first':_0x4049fe(0x18a)},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x4049fe(0x168)},'note':{'$first':'$note'},'total_amount':{'$first':_0x4049fe(0x198)},'discount':{'$first':_0x4049fe(0x13a)},'receivable':{'$first':_0x4049fe(0x139)},'received':{'$first':'$received'},'due_amount':{'$first':_0x4049fe(0x15b)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x4049fe(0x15d)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x4049fe(0x1a7)](_0xb8680e);if(_0x421c75[0x0][_0x4049fe(0x189)]=='English\x20(US)'){var _0x39f13a=users[_0x4049fe(0x134)];console[_0x4049fe(0x1a7)](_0x39f13a);}else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x1ac))var _0x39f13a=users['Hindi'];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x14e))var _0x39f13a=users[_0x4049fe(0x14e)];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x18f))var _0x39f13a=users[_0x4049fe(0x18f)];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x16e))var _0x39f13a=users['French'];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x130))var _0x39f13a=users[_0x4049fe(0x16d)];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x14d))var _0x39f13a=users[_0x4049fe(0x14d)];else{if(_0x421c75[0x0][_0x4049fe(0x189)]==_0x4049fe(0x1a9))var _0x39f13a=users[_0x4049fe(0x135)];}}}}}}}_0x86accb['render'](_0x4049fe(0x176),{'success':_0x54d5c0[_0x4049fe(0x19d)]('success'),'errors':_0x54d5c0[_0x4049fe(0x19d)]('errors'),'role':_0x5192dc,'profile':_0x220a53,'master_shop':_0x421c75,'user':_0xb8680e,'language':_0x39f13a});}catch(_0x523c95){console[_0x4049fe(0x1a7)](_0x523c95);}}),router[a0_0x1a301a(0x14f)]('/view/:id',auth,async(_0x1f7b0a,_0x376426)=>{var _0x4b6e6b=a0_0x1a301a;try{const {username:_0x4502aa,email:_0x1153c5,role:_0x379fd5}=_0x1f7b0a[_0x4b6e6b(0x184)],_0x59cbe2=_0x1f7b0a[_0x4b6e6b(0x184)],_0x213c5c=await profile[_0x4b6e6b(0x19f)]({'email':_0x59cbe2[_0x4b6e6b(0x13e)]}),_0x51f2f5=await product[_0x4b6e6b(0x158)]({}),_0xe3d89=await master_shop[_0x4b6e6b(0x158)]();console[_0x4b6e6b(0x1a7)]('master',_0xe3d89),console['log'](_0x1f7b0a[_0x4b6e6b(0x195)]);const _0x2b9990=_0x1f7b0a[_0x4b6e6b(0x17a)]['id'],_0x2605e0=await purchases_return[_0x4b6e6b(0x15e)](_0x2b9990);console[_0x4b6e6b(0x1a7)](_0x2605e0);const _0x40fbe1=await warehouse['aggregate']([{'$match':{'name':_0x2605e0[_0x4b6e6b(0x1ab)],'room':_0x2605e0[_0x4b6e6b(0x166)]}},{'$unwind':_0x4b6e6b(0x18c)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x4b6e6b(0x154)},'product_stock':{'$first':_0x4b6e6b(0x1ae)},'bay':{'$first':_0x4b6e6b(0x1b0)},'bin':{'$first':_0x4b6e6b(0x19a)},'type':{'$first':_0x4b6e6b(0x174)},'floorlevel':{'$first':_0x4b6e6b(0x160)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4b6e6b(0x152)},'product_code':{'$first':_0x4b6e6b(0x12e)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x4b6e6b(0x17b)}}}]);warehouse_data=await warehouse[_0x4b6e6b(0x17f)]([{'$match':{'status':_0x4b6e6b(0x12d),'name':_0x4b6e6b(0x147),'warehouse_category':_0x4b6e6b(0x178)}},{'$group':{'_id':_0x4b6e6b(0x151),'name':{'$first':_0x4b6e6b(0x151)}}},{'$sort':{'name':0x1}}]),console['log'](_0x4b6e6b(0x15f),_0x40fbe1);if(_0xe3d89[0x0][_0x4b6e6b(0x189)]==_0x4b6e6b(0x172)){var _0x1b0d3f=users[_0x4b6e6b(0x134)];console[_0x4b6e6b(0x1a7)](_0x1b0d3f);}else{if(_0xe3d89[0x0][_0x4b6e6b(0x189)]==_0x4b6e6b(0x1ac))var _0x1b0d3f=users[_0x4b6e6b(0x1ac)];else{if(_0xe3d89[0x0][_0x4b6e6b(0x189)]=='German')var _0x1b0d3f=users[_0x4b6e6b(0x14e)];else{if(_0xe3d89[0x0][_0x4b6e6b(0x189)]==_0x4b6e6b(0x18f))var _0x1b0d3f=users[_0x4b6e6b(0x18f)];else{if(_0xe3d89[0x0][_0x4b6e6b(0x189)]==_0x4b6e6b(0x16e))var _0x1b0d3f=users['French'];else{if(_0xe3d89[0x0][_0x4b6e6b(0x189)]==_0x4b6e6b(0x130))var _0x1b0d3f=users[_0x4b6e6b(0x16d)];else{if(_0xe3d89[0x0]['language']==_0x4b6e6b(0x14d))var _0x1b0d3f=users[_0x4b6e6b(0x14d)];else{if(_0xe3d89[0x0]['language']=='Arabic\x20(ae)')var _0x1b0d3f=users[_0x4b6e6b(0x135)];}}}}}}}_0x376426[_0x4b6e6b(0x156)]('return_purchase_edit',{'success':_0x1f7b0a[_0x4b6e6b(0x19d)](_0x4b6e6b(0x173)),'errors':_0x1f7b0a['flash'](_0x4b6e6b(0x191)),'role':_0x59cbe2,'master_shop':_0xe3d89,'profile':_0x213c5c,'user':_0x2605e0,'stock':_0x40fbe1,'product':_0x51f2f5,'language':_0x1b0d3f,'warehouse':warehouse_data});}catch(_0x1634b8){console[_0x4b6e6b(0x1a7)](_0x1634b8);}}),router[a0_0x1a301a(0x13d)](a0_0x1a301a(0x194),auth,async(_0x179203,_0x537b44)=>{var _0x31bf98=a0_0x1a301a;try{const _0xee02fe=_0x179203[_0x31bf98(0x17a)]['id'];console[_0x31bf98(0x1a7)](_0xee02fe);const _0x2dd590=await purchases_return[_0x31bf98(0x19f)]({'invoice':_0x179203[_0x31bf98(0x195)]['invoice']});console[_0x31bf98(0x1a7)](_0x31bf98(0x163),_0x2dd590);const _0x164885=await warehouse[_0x31bf98(0x19f)]({'name':_0x2dd590['to_warehouse_name'],'room':_0x2dd590[_0x31bf98(0x1a2)]});console[_0x31bf98(0x1a7)](_0x31bf98(0x15a),_0x164885);const {invoice:_0x575a49,suppliers:_0xcb35a1,date:_0x583a80,warehouse_name:_0x4cccf6,product_name:_0x2f416e,purchase_quantity:_0x281d86,stocks:_0x17d00b,return_qty:_0x4ecec7,note:_0x12e1f3,Room_name:_0x14eedb,level:_0x1c862a,isle:_0x70ae0c,pallet:_0x8a0cb7,to_warehouse_name:_0x1c58ad,to_Room_name:_0x137bea}=_0x179203[_0x31bf98(0x195)];if(typeof _0x2f416e==_0x31bf98(0x170))var _0xdb0c84=[_0x179203[_0x31bf98(0x195)]['product_name']],_0x5dc6a1=[_0x179203['body'][_0x31bf98(0x164)]],_0xc69bda=[_0x179203['body'][_0x31bf98(0x159)]],_0x2ec20d=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x181)]],_0x3e75a6=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x162)]],_0x4b918f=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x165)]],_0x1c7182=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x180)]],_0x1dd38a=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x12f)]],_0x324de0=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x13b)]],_0x1f405f=[_0x179203['body'][_0x31bf98(0x1a1)]],_0x12910b=[_0x179203[_0x31bf98(0x195)][_0x31bf98(0x193)]];else var _0xdb0c84=[..._0x179203[_0x31bf98(0x195)]['product_name']],_0x5dc6a1=[..._0x179203['body'][_0x31bf98(0x164)]],_0xc69bda=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x159)]],_0x2ec20d=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x181)]],_0x3e75a6=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x162)]],_0x4b918f=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x165)]],_0x1c7182=[..._0x179203['body'][_0x31bf98(0x180)]],_0x324de0=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x13b)]],_0x1f405f=[..._0x179203[_0x31bf98(0x195)][_0x31bf98(0x1a1)]],_0x12910b=[..._0x179203['body'][_0x31bf98(0x193)]],_0x1dd38a=[..._0x179203[_0x31bf98(0x195)]['types']];const _0x549293=_0xdb0c84['map'](_0x14873d=>{return _0x14873d={'product_name':_0x14873d};});_0x5dc6a1[_0x31bf98(0x140)]((_0x3469df,_0x5cdf8a)=>{var _0x4bf7de=_0x31bf98;_0x549293[_0x5cdf8a][_0x4bf7de(0x164)]=_0x3469df;}),_0xc69bda['forEach']((_0x27d636,_0x3916ac)=>{var _0x59efb8=_0x31bf98;_0x549293[_0x3916ac][_0x59efb8(0x19b)]=_0x27d636;}),_0x2ec20d[_0x31bf98(0x140)]((_0x244857,_0x2a6247)=>{var _0x957b57=_0x31bf98;_0x549293[_0x2a6247][_0x957b57(0x181)]=_0x244857;}),_0x3e75a6[_0x31bf98(0x140)]((_0x106493,_0x4b9c94)=>{var _0x545f7a=_0x31bf98;_0x549293[_0x4b9c94][_0x545f7a(0x144)]=_0x106493;}),_0x4b918f['forEach']((_0x2b404a,_0x4dc60a)=>{var _0x45a6c5=_0x31bf98;_0x549293[_0x4dc60a][_0x45a6c5(0x192)]=_0x2b404a;}),_0x1c7182[_0x31bf98(0x140)]((_0x15472b,_0x43cf16)=>{_0x549293[_0x43cf16]['floorlevel']=_0x15472b;}),_0x324de0[_0x31bf98(0x140)]((_0x27a2c3,_0xc991bb)=>{var _0x3dffe8=_0x31bf98;_0x549293[_0xc991bb][_0x3dffe8(0x155)]=_0x27a2c3;}),_0x1f405f['forEach']((_0x4555dc,_0x3df151)=>{_0x549293[_0x3df151]['primary_code']=_0x4555dc;}),_0x12910b[_0x31bf98(0x140)]((_0x187681,_0x398a67)=>{var _0x43813f=_0x31bf98;_0x549293[_0x398a67][_0x43813f(0x167)]=_0x187681;}),_0x1dd38a[_0x31bf98(0x140)]((_0x1afa4f,_0x1f034b)=>{_0x549293[_0x1f034b]['type']=_0x1afa4f;});var _0x3fd6a1=0x0;_0x549293[_0x31bf98(0x140)](_0xe3f00d=>{var _0x7b3ebb=_0x31bf98;console[_0x7b3ebb(0x1a7)]('foreach\x20newproduct',_0xe3f00d),(parseInt(_0xe3f00d[_0x7b3ebb(0x164)])<parseInt(_0xe3f00d[_0x7b3ebb(0x181)])||parseInt(_0xe3f00d[_0x7b3ebb(0x19b)])<parseInt(_0xe3f00d[_0x7b3ebb(0x181)])||parseInt(_0xe3f00d[_0x7b3ebb(0x181)])==0x0)&&_0x3fd6a1++;});if(_0x3fd6a1!=0x0)return _0x179203[_0x31bf98(0x19d)](_0x31bf98(0x191),_0x31bf98(0x187)),_0x537b44[_0x31bf98(0x1a3)](_0x31bf98(0x16b));_0x2dd590[_0x31bf98(0x19e)][_0x31bf98(0x140)](_0xcc381b=>{var _0x52ff91=_0x31bf98;const _0x475fe0=_0x164885[_0x52ff91(0x190)][_0x52ff91(0x132)](_0x1568eb=>{var _0x18866b=_0x52ff91;_0x1568eb[_0x18866b(0x1a8)]==_0xcc381b['product_name']&&_0x1568eb['floorlevel']==_0xcc381b[_0x18866b(0x1a4)]&&_0x1568eb['type']==_0xcc381b[_0x18866b(0x17c)]&&_0x1568eb[_0x18866b(0x192)]==_0xcc381b['bin']&&_0x1568eb[_0x18866b(0x144)]==_0xcc381b[_0x18866b(0x144)]&&(_0x1568eb[_0x18866b(0x133)]=parseInt(_0x1568eb[_0x18866b(0x133)])+parseInt(_0xcc381b[_0x18866b(0x181)]));});}),console[_0x31bf98(0x1a7)](_0x31bf98(0x15a),_0x164885),await _0x164885[_0x31bf98(0x199)](),_0x2dd590[_0x31bf98(0x15c)]=_0x575a49,_0x2dd590[_0x31bf98(0x150)]=_0xcb35a1,_0x2dd590[_0x31bf98(0x175)]=_0x583a80,_0x2dd590[_0x31bf98(0x1ab)]=_0x4cccf6,_0x2dd590[_0x31bf98(0x19e)]=_0x549293,_0x2dd590['note']=_0x12e1f3,_0x2dd590[_0x31bf98(0x166)]=_0x14eedb,_0x2dd590[_0x31bf98(0x1a5)]=_0x1c58ad,_0x2dd590[_0x31bf98(0x1a2)]=_0x137bea;const _0xe0b68b=await _0x2dd590[_0x31bf98(0x199)](),_0x11763b=await purchases_return[_0x31bf98(0x19f)]({'invoice':_0x179203[_0x31bf98(0x195)][_0x31bf98(0x15c)]}),_0x3c2bfc=await warehouse[_0x31bf98(0x19f)]({'name':_0x179203['body'][_0x31bf98(0x1a5)],'room':_0x179203[_0x31bf98(0x195)][_0x31bf98(0x185)]});_0x11763b['return_product']['forEach'](_0x5ce6b6=>{var _0x4bad28=_0x31bf98;_0x3c2bfc[_0x4bad28(0x190)][_0x4bad28(0x132)](_0x2f76b0=>{var _0x4d1484=_0x4bad28;_0x2f76b0['product_name']==_0x5ce6b6[_0x4d1484(0x1a8)]&&_0x2f76b0['pallet']==_0x5ce6b6['pallet']&&(_0x2f76b0[_0x4d1484(0x133)]=parseInt(_0x2f76b0['product_stock'])-parseInt(_0x5ce6b6[_0x4d1484(0x181)]),console['log'](_0x4d1484(0x131),_0x5ce6b6['return_qty']));});}),console['log'](_0x31bf98(0x149),_0x3c2bfc),await _0x3c2bfc[_0x31bf98(0x199)]();const _0x1ea008=await s_payment_data[_0x31bf98(0x19f)]({'invoice':_0x179203[_0x31bf98(0x195)][_0x31bf98(0x15c)],'reason':_0x31bf98(0x137)});await _0x1ea008[_0x31bf98(0x199)](),_0x179203[_0x31bf98(0x19d)](_0x31bf98(0x173),_0x31bf98(0x179)),_0x537b44[_0x31bf98(0x1a3)](_0x31bf98(0x143));}catch(_0x1078d0){console[_0x31bf98(0x1a7)](_0x1078d0),_0x537b44[_0x31bf98(0x138)](0xc8)[_0x31bf98(0x1a6)]({'message':_0x1078d0[_0x31bf98(0x19c)]});}}),router[a0_0x1a301a(0x14f)](a0_0x1a301a(0x153),auth,async(_0x3251bd,_0x477ea6)=>{var _0x312dfb=a0_0x1a301a;try{const {username:_0x1e031b,email:_0x21d2f6,role:_0x3ec3a5}=_0x3251bd[_0x312dfb(0x184)],_0x5624ca=_0x3251bd[_0x312dfb(0x184)],_0x595dbe=await profile[_0x312dfb(0x19f)]({'email':_0x5624ca['email']}),_0x2ee383=await master_shop['find']();console[_0x312dfb(0x1a7)](_0x312dfb(0x177),_0x2ee383);const _0x160245=_0x3251bd[_0x312dfb(0x17a)]['id'],_0x3ad71f=await purchases_return[_0x312dfb(0x15e)](_0x160245);console[_0x312dfb(0x1a7)](_0x3ad71f);const _0x13579c=await suppliers[_0x312dfb(0x19f)]({'name':_0x3ad71f['suppliers']});console[_0x312dfb(0x1a7)](_0x13579c);if(_0x2ee383[0x0][_0x312dfb(0x189)]==_0x312dfb(0x172)){var _0x5e6c68=users[_0x312dfb(0x134)];console[_0x312dfb(0x1a7)](_0x5e6c68);}else{if(_0x2ee383[0x0][_0x312dfb(0x189)]=='Hindi')var _0x5e6c68=users['Hindi'];else{if(_0x2ee383[0x0][_0x312dfb(0x189)]==_0x312dfb(0x14e))var _0x5e6c68=users[_0x312dfb(0x14e)];else{if(_0x2ee383[0x0]['language']==_0x312dfb(0x18f))var _0x5e6c68=users[_0x312dfb(0x18f)];else{if(_0x2ee383[0x0][_0x312dfb(0x189)]==_0x312dfb(0x16e))var _0x5e6c68=users[_0x312dfb(0x16e)];else{if(_0x2ee383[0x0]['language']==_0x312dfb(0x130))var _0x5e6c68=users[_0x312dfb(0x16d)];else{if(_0x2ee383[0x0][_0x312dfb(0x189)]==_0x312dfb(0x14d))var _0x5e6c68=users[_0x312dfb(0x14d)];else{if(_0x2ee383[0x0][_0x312dfb(0x189)]==_0x312dfb(0x1a9))var _0x5e6c68=users[_0x312dfb(0x135)];}}}}}}}_0x477ea6['render'](_0x312dfb(0x16a),{'success':_0x3251bd[_0x312dfb(0x19d)]('success'),'errors':_0x3251bd[_0x312dfb(0x19d)](_0x312dfb(0x191)),'role':_0x5624ca,'profile':_0x595dbe,'master_shop':_0x2ee383,'supplier':_0x13579c,'purchase':_0x3ad71f,'language':_0x5e6c68});}catch(_0x283035){console[_0x312dfb(0x1a7)](_0x283035);}}),router[a0_0x1a301a(0x13d)](a0_0x1a301a(0x18e),auth,async(_0x277598,_0x3d0609)=>{var _0x7d2499=a0_0x1a301a;try{const _0x3a8b96=_0x277598[_0x7d2499(0x17a)]['id'],{invoice:_0x25d736,suppliers:_0x164244,receivable_amount:_0x104ba7,received_amount:_0x140669}=_0x277598[_0x7d2499(0x195)],_0x1ba7f8=await purchases_return[_0x7d2499(0x15e)](_0x3a8b96);console[_0x7d2499(0x1a7)](_0x1ba7f8);var _0x8e46fa=_0x104ba7-_0x140669;console[_0x7d2499(0x1a7)](_0x140669),_0x1ba7f8['received']=parseFloat(_0x140669)+parseFloat(_0x1ba7f8[_0x7d2499(0x145)]),_0x1ba7f8['due_amount']=_0x8e46fa,console['log'](_0x1ba7f8);const _0x5ea589=await _0x1ba7f8[_0x7d2499(0x199)](),_0x273763=await s_payment_data[_0x7d2499(0x19f)]({'invoice':_0x277598[_0x7d2499(0x195)][_0x7d2499(0x15c)],'reason':_0x7d2499(0x137)});_0x273763[_0x7d2499(0x183)]=_0x8e46fa,await _0x273763['save']();let _0x187db8=new Date(),_0x1f3dbd=('0'+_0x187db8[_0x7d2499(0x18b)]())[_0x7d2499(0x17d)](-0x2),_0x1cb9b3=('0'+(_0x187db8['getMonth']()+0x1))[_0x7d2499(0x17d)](-0x2),_0xe9e2c8=_0x187db8[_0x7d2499(0x188)](),_0x328290=_0xe9e2c8+'-'+_0x1cb9b3+'-'+_0x1f3dbd;const _0x4c5422=new suppliers_payment({'invoice':_0x25d736,'date':_0xe9e2c8+'-'+_0x1cb9b3+'-'+_0x1f3dbd,'suppliers':_0x164244,'reason':_0x7d2499(0x197),'amount':_0x140669}),_0x34aa12=await _0x4c5422[_0x7d2499(0x199)]();_0x277598['flash'](_0x7d2499(0x173),_0x7d2499(0x18d)),_0x3d0609[_0x7d2499(0x1a3)](_0x7d2499(0x143));}catch(_0x5bead9){console[_0x7d2499(0x1a7)](_0x5bead9);}}),module['exports']=router;