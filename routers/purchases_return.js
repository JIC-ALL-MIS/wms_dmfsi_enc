var a0_0x306464=a0_0x2608;(function(_0x484535,_0x2e60c0){var _0x689b16=a0_0x2608,_0x46a569=_0x484535();while(!![]){try{var _0x1cb512=-parseInt(_0x689b16(0x17e))/0x1*(parseInt(_0x689b16(0x1ee))/0x2)+parseInt(_0x689b16(0x1f2))/0x3*(parseInt(_0x689b16(0x1ac))/0x4)+-parseInt(_0x689b16(0x19f))/0x5*(parseInt(_0x689b16(0x1dc))/0x6)+parseInt(_0x689b16(0x1d6))/0x7*(parseInt(_0x689b16(0x1e0))/0x8)+-parseInt(_0x689b16(0x18b))/0x9*(-parseInt(_0x689b16(0x1e8))/0xa)+parseInt(_0x689b16(0x184))/0xb*(parseInt(_0x689b16(0x1f7))/0xc)+parseInt(_0x689b16(0x17f))/0xd*(-parseInt(_0x689b16(0x1a0))/0xe);if(_0x1cb512===_0x2e60c0)break;else _0x46a569['push'](_0x46a569['shift']());}catch(_0xefa543){_0x46a569['push'](_0x46a569['shift']());}}}(a0_0x1d8c,0x69216));const express=require(a0_0x306464(0x1d1)),app=express(),router=express[a0_0x306464(0x1c7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x306464(0x1b5)),users=require(a0_0x306464(0x1c9));function a0_0x2608(_0x3094cf,_0x123f47){var _0x1d8c86=a0_0x1d8c();return a0_0x2608=function(_0x260833,_0x5f48b3){_0x260833=_0x260833-0x17a;var _0x402837=_0x1d8c86[_0x260833];return _0x402837;},a0_0x2608(_0x3094cf,_0x123f47);}function a0_0x1d8c(){var _0x5a19f2=['Raw\x20Materials','product_details.return_qtyproduct_details.return_qty','207uqFXEC','return_qty','flash','bin','$note','8489556geEhAA','to_warehouse_name','due_amount','stocks','$product_details.rack','$suppliers','received','old_data','product_stock','$warehouse_name','$receivable','errors','837626lqxHdT','13fXuAgS','post','purchase_quantity','product_name','Purchase\x20Return','11yEaeHT','$product_details.bin','Arabic','$name','return_product','back','$date','90081GjSPav','Portuguese','success','French','findOne','floorlevel','getMonth','language','/view/:id','Portuguese\x20(BR)','$product_details.product_name','old_warehouse_data','purchases_return','$invoice','render','$total_amount','$supplier_docs','email','warehouse_name','$_id','350eOJbCc','1022854pEAMsg','$product_details.product_code','$discount','pallet','product_code_hide','$return_product.return_qty','forEach','$return_product.price','$product_details.bay','status','map','redirect','11836JDmjja','English','$product_details._id','Arabic\x20(ae)','product_details','master','$return_product.product_name','name','invoice','../middleware/auth','isle','findById','to_Room_name','level','primary_code_hide','return_purchase_invoice','types','purchase\x20return\x20successfully','Enabled','$product_details.product_stock','getDate','Spanish','note','get','English\x20(US)','log','exports','Router','date','../public/language/languages.json','/purchases_return/view','/view','final','supplier_docs','find','body','user','express','German','slice','$return_product.total','aggregate','20083nQxCyZ','$supplier_docs.address','to_room','room','foreach\x20newproduct','$product_details.storage','2532SQVJTf','Chinese','product_code','save','192ENtUIX','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','Hindi','$supplier_docs.mobile','Return\x20Goods','/receive_payment/:id','$due_amount','$product_details.type','390YoxiNE','bay','$return_product','type','params','suppliers','2yHSLIo','secondary_code_hide'];a0_0x1d8c=function(){return _0x5a19f2;};return a0_0x1d8c();}router['get'](a0_0x306464(0x1cb),auth,async(_0x4d946e,_0x28d295)=>{var _0x1f3f94=a0_0x306464;try{const {username:_0x2f2e8c,email:_0x4e2f68,role:_0x1c3256}=_0x4d946e[_0x1f3f94(0x1d0)],_0x30f852=_0x4d946e[_0x1f3f94(0x1d0)],_0x937954=await profile[_0x1f3f94(0x18f)]({'email':_0x30f852[_0x1f3f94(0x19c)]}),_0x33c0ca=await master_shop['find']();console[_0x1f3f94(0x1c5)](_0x1f3f94(0x1b1),_0x33c0ca);const _0x571a0c=await purchases_return[_0x1f3f94(0x1d5)]([{'$lookup':{'from':_0x1f3f94(0x1ed),'localField':'suppliers','foreignField':_0x1f3f94(0x1b3),'as':_0x1f3f94(0x1cd)}},{'$unwind':_0x1f3f94(0x1ea)},{'$unwind':_0x1f3f94(0x19b)},{'$group':{'_id':_0x1f3f94(0x19e),'invoice':{'$first':_0x1f3f94(0x198)},'date':{'$first':_0x1f3f94(0x18a)},'suppliers':{'$first':_0x1f3f94(0x1fc)},'warehouse_name':{'$first':_0x1f3f94(0x17b)},'product_name':{'$first':_0x1f3f94(0x1b2)},'return_qty':{'$first':_0x1f3f94(0x1a5)},'price':{'$first':_0x1f3f94(0x1a7)},'total':{'$sum':_0x1f3f94(0x1d4)},'note':{'$first':_0x1f3f94(0x1f6)},'total_amount':{'$first':_0x1f3f94(0x19a)},'discount':{'$first':_0x1f3f94(0x1a2)},'receivable':{'$first':_0x1f3f94(0x17c)},'received':{'$first':'$received'},'due_amount':{'$first':_0x1f3f94(0x1e6)},'mobile':{'$first':_0x1f3f94(0x1e3)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x1f3f94(0x1d7)},'return_sum_qty':{'$sum':_0x1f3f94(0x1a5)}}}]);console[_0x1f3f94(0x1c5)](_0x571a0c);if(_0x33c0ca[0x0]['language']==_0x1f3f94(0x1c4)){var _0x36cd91=users['English'];console['log'](_0x36cd91);}else{if(_0x33c0ca[0x0]['language']==_0x1f3f94(0x1e2))var _0x36cd91=users[_0x1f3f94(0x1e2)];else{if(_0x33c0ca[0x0][_0x1f3f94(0x192)]=='German')var _0x36cd91=users['German'];else{if(_0x33c0ca[0x0][_0x1f3f94(0x192)]=='Spanish')var _0x36cd91=users[_0x1f3f94(0x1c1)];else{if(_0x33c0ca[0x0]['language']==_0x1f3f94(0x18e))var _0x36cd91=users[_0x1f3f94(0x18e)];else{if(_0x33c0ca[0x0][_0x1f3f94(0x192)]==_0x1f3f94(0x194))var _0x36cd91=users['Portuguese'];else{if(_0x33c0ca[0x0]['language']==_0x1f3f94(0x1dd))var _0x36cd91=users[_0x1f3f94(0x1dd)];else{if(_0x33c0ca[0x0][_0x1f3f94(0x192)]==_0x1f3f94(0x1af))var _0x36cd91=users['Arabic'];}}}}}}}_0x28d295[_0x1f3f94(0x199)](_0x1f3f94(0x197),{'success':_0x4d946e[_0x1f3f94(0x1f4)](_0x1f3f94(0x18d)),'errors':_0x4d946e[_0x1f3f94(0x1f4)]('errors'),'role':_0x30f852,'profile':_0x937954,'master_shop':_0x33c0ca,'user':_0x571a0c,'language':_0x36cd91});}catch(_0x229343){console[_0x1f3f94(0x1c5)](_0x229343);}}),router['get'](a0_0x306464(0x193),auth,async(_0x522910,_0x388ddc)=>{var _0x1a54e1=a0_0x306464;try{const {username:_0x634fd6,email:_0x803f43,role:_0x392f81}=_0x522910[_0x1a54e1(0x1d0)],_0x46100e=_0x522910['user'],_0x41f688=await profile[_0x1a54e1(0x18f)]({'email':_0x46100e[_0x1a54e1(0x19c)]}),_0x1c85fd=await product[_0x1a54e1(0x1ce)]({}),_0x145fab=await master_shop['find']();console[_0x1a54e1(0x1c5)](_0x1a54e1(0x1b1),_0x145fab),console[_0x1a54e1(0x1c5)](_0x522910[_0x1a54e1(0x1cf)]);const _0x200b5b=_0x522910[_0x1a54e1(0x1ec)]['id'],_0x503fc4=await purchases_return[_0x1a54e1(0x1b7)](_0x200b5b);console['log'](_0x503fc4);const _0x127338=await warehouse[_0x1a54e1(0x1d5)]([{'$match':{'name':_0x503fc4[_0x1a54e1(0x19d)],'room':_0x503fc4[_0x1a54e1(0x1d9)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x1a54e1(0x1ae),'name':{'$first':_0x1a54e1(0x195)},'product_stock':{'$first':_0x1a54e1(0x1bf)},'bay':{'$first':_0x1a54e1(0x1a8)},'bin':{'$first':_0x1a54e1(0x185)},'type':{'$first':_0x1a54e1(0x1e7)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x1a54e1(0x1a1)},'storage':{'$first':_0x1a54e1(0x1db)},'rack':{'$first':_0x1a54e1(0x1fb)}}}]);warehouse_data=await warehouse[_0x1a54e1(0x1d5)]([{'$match':{'status':_0x1a54e1(0x1be),'name':_0x1a54e1(0x1e4),'warehouse_category':_0x1a54e1(0x1f0)}},{'$group':{'_id':_0x1a54e1(0x187),'name':{'$first':_0x1a54e1(0x187)}}},{'$sort':{'name':0x1}}]),console[_0x1a54e1(0x1c5)]('stock_data',_0x127338);if(_0x145fab[0x0]['language']==_0x1a54e1(0x1c4)){var _0x33ca0a=users[_0x1a54e1(0x1ad)];console['log'](_0x33ca0a);}else{if(_0x145fab[0x0][_0x1a54e1(0x192)]==_0x1a54e1(0x1e2))var _0x33ca0a=users[_0x1a54e1(0x1e2)];else{if(_0x145fab[0x0]['language']==_0x1a54e1(0x1d2))var _0x33ca0a=users['German'];else{if(_0x145fab[0x0][_0x1a54e1(0x192)]==_0x1a54e1(0x1c1))var _0x33ca0a=users[_0x1a54e1(0x1c1)];else{if(_0x145fab[0x0][_0x1a54e1(0x192)]==_0x1a54e1(0x18e))var _0x33ca0a=users[_0x1a54e1(0x18e)];else{if(_0x145fab[0x0]['language']==_0x1a54e1(0x194))var _0x33ca0a=users[_0x1a54e1(0x18c)];else{if(_0x145fab[0x0][_0x1a54e1(0x192)]=='Chinese')var _0x33ca0a=users[_0x1a54e1(0x1dd)];else{if(_0x145fab[0x0][_0x1a54e1(0x192)]==_0x1a54e1(0x1af))var _0x33ca0a=users[_0x1a54e1(0x186)];}}}}}}}_0x388ddc[_0x1a54e1(0x199)]('return_purchase_edit',{'success':_0x522910[_0x1a54e1(0x1f4)]('success'),'errors':_0x522910[_0x1a54e1(0x1f4)](_0x1a54e1(0x17d)),'role':_0x46100e,'master_shop':_0x145fab,'profile':_0x41f688,'user':_0x503fc4,'stock':_0x127338,'product':_0x1c85fd,'language':_0x33ca0a,'warehouse':warehouse_data});}catch(_0x597a39){console[_0x1a54e1(0x1c5)](_0x597a39);}}),router[a0_0x306464(0x180)](a0_0x306464(0x193),auth,async(_0x5bd8b0,_0x2a19c7)=>{var _0x304583=a0_0x306464;try{const _0x569764=_0x5bd8b0[_0x304583(0x1ec)]['id'];console['log'](_0x569764);const _0x237352=await purchases_return[_0x304583(0x18f)]({'invoice':_0x5bd8b0[_0x304583(0x1cf)]['invoice']});console[_0x304583(0x1c5)](_0x304583(0x1fe),_0x237352);const _0x59e574=await warehouse[_0x304583(0x18f)]({'name':_0x237352['to_warehouse_name'],'room':_0x237352['to_room']});console['log'](_0x304583(0x196),_0x59e574);const {invoice:_0xef12cb,suppliers:_0x4ca85d,date:_0x56e8c4,warehouse_name:_0x59db2d,product_name:_0x11e127,purchase_quantity:_0x400eae,stocks:_0x4afd93,return_qty:_0x7c1333,note:_0x3db7df,Room_name:_0x51e513,level:_0x48588d,isle:_0x14a66b,pallet:_0x50a1e7,to_warehouse_name:_0x454b94,to_Room_name:_0x5181b2}=_0x5bd8b0['body'];if(typeof _0x11e127=='string')var _0x23e46d=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x182)]],_0x463a4d=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x181)]],_0xa24913=[_0x5bd8b0[_0x304583(0x1cf)]['stocks']],_0x2f8aae=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1f3)]],_0x370595=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1b9)]],_0x11b942=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1b6)]],_0x5dc6b8=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1a3)]],_0x42bb29=[_0x5bd8b0[_0x304583(0x1cf)]['types']],_0x4bf245=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1a4)]],_0x17e7ed=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1ba)]],_0x3ec88b=[_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1ef)]];else var _0x23e46d=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x182)]],_0x463a4d=[..._0x5bd8b0[_0x304583(0x1cf)]['purchase_quantity']],_0xa24913=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1fa)]],_0x2f8aae=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1f3)]],_0x370595=[..._0x5bd8b0[_0x304583(0x1cf)]['level']],_0x11b942=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1b6)]],_0x5dc6b8=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1a3)]],_0x4bf245=[..._0x5bd8b0[_0x304583(0x1cf)]['product_code_hide']],_0x17e7ed=[..._0x5bd8b0['body']['primary_code_hide']],_0x3ec88b=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1ef)]],_0x42bb29=[..._0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1bc)]];const _0x55ae9f=_0x23e46d[_0x304583(0x1aa)](_0x53d30b=>{return _0x53d30b={'product_name':_0x53d30b};});_0x463a4d['forEach']((_0x18bcec,_0x1d9d12)=>{var _0xe513d3=_0x304583;_0x55ae9f[_0x1d9d12][_0xe513d3(0x181)]=_0x18bcec;}),_0xa24913[_0x304583(0x1a6)]((_0x540ac4,_0x231eb3)=>{_0x55ae9f[_0x231eb3]['stock_quantity']=_0x540ac4;}),_0x2f8aae[_0x304583(0x1a6)]((_0x1ca990,_0x140216)=>{var _0x36662b=_0x304583;_0x55ae9f[_0x140216][_0x36662b(0x1f3)]=_0x1ca990;}),_0x370595[_0x304583(0x1a6)]((_0x50e3d9,_0x4d1103)=>{var _0x15c73b=_0x304583;_0x55ae9f[_0x4d1103][_0x15c73b(0x1e9)]=_0x50e3d9;}),_0x11b942[_0x304583(0x1a6)]((_0x5971a4,_0x252cd2)=>{var _0x16fe2c=_0x304583;_0x55ae9f[_0x252cd2][_0x16fe2c(0x1f5)]=_0x5971a4;}),_0x5dc6b8[_0x304583(0x1a6)]((_0x32d0a2,_0x57b1fc)=>{var _0x192dfb=_0x304583;_0x55ae9f[_0x57b1fc][_0x192dfb(0x190)]=_0x32d0a2;}),_0x4bf245[_0x304583(0x1a6)]((_0x431b98,_0x43efc8)=>{var _0x5664cb=_0x304583;_0x55ae9f[_0x43efc8][_0x5664cb(0x1de)]=_0x431b98;}),_0x17e7ed[_0x304583(0x1a6)]((_0x2b0261,_0x3c3818)=>{_0x55ae9f[_0x3c3818]['primary_code']=_0x2b0261;}),_0x3ec88b[_0x304583(0x1a6)]((_0x3bd912,_0x2eda20)=>{_0x55ae9f[_0x2eda20]['secondary_code']=_0x3bd912;}),_0x42bb29['forEach']((_0x3313e9,_0x4fc0ba)=>{_0x55ae9f[_0x4fc0ba]['type']=_0x3313e9;});var _0x25c7ac=0x0;_0x55ae9f['forEach'](_0x2bedab=>{var _0x158245=_0x304583;console[_0x158245(0x1c5)](_0x158245(0x1da),_0x2bedab),(parseInt(_0x2bedab[_0x158245(0x181)])<parseInt(_0x2bedab[_0x158245(0x1f3)])||parseInt(_0x2bedab['stock_quantity'])<parseInt(_0x2bedab[_0x158245(0x1f3)])||parseInt(_0x2bedab[_0x158245(0x1f3)])==0x0)&&_0x25c7ac++;});if(_0x25c7ac!=0x0)return _0x5bd8b0[_0x304583(0x1f4)](_0x304583(0x17d),_0x304583(0x1e1)),_0x2a19c7[_0x304583(0x1ab)](_0x304583(0x189));_0x237352[_0x304583(0x188)][_0x304583(0x1a6)](_0x39f647=>{var _0x27fcb9=_0x304583;const _0x3a7b4a=_0x59e574['product_details'][_0x27fcb9(0x1aa)](_0x32be33=>{var _0x382000=_0x27fcb9;_0x32be33['product_name']==_0x39f647[_0x382000(0x182)]&&_0x32be33[_0x382000(0x190)]==_0x39f647[_0x382000(0x190)]&&_0x32be33[_0x382000(0x1eb)]==_0x39f647[_0x382000(0x1eb)]&&_0x32be33[_0x382000(0x1f5)]==_0x39f647['bin']&&_0x32be33[_0x382000(0x1e9)]==_0x39f647[_0x382000(0x1e9)]&&(_0x32be33['product_stock']=parseInt(_0x32be33[_0x382000(0x17a)])+parseInt(_0x39f647[_0x382000(0x1f3)]));});}),console['log']('old_warehouse_data',_0x59e574),await _0x59e574[_0x304583(0x1df)](),_0x237352[_0x304583(0x1b4)]=_0xef12cb,_0x237352[_0x304583(0x1ed)]=_0x4ca85d,_0x237352[_0x304583(0x1c8)]=_0x56e8c4,_0x237352[_0x304583(0x19d)]=_0x59db2d,_0x237352[_0x304583(0x188)]=_0x55ae9f,_0x237352[_0x304583(0x1c2)]=_0x3db7df,_0x237352['room']=_0x51e513,_0x237352[_0x304583(0x1f8)]=_0x454b94,_0x237352[_0x304583(0x1d8)]=_0x5181b2;const _0x472f83=await _0x237352[_0x304583(0x1df)](),_0x1ade26=await purchases_return[_0x304583(0x18f)]({'invoice':_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1b4)]}),_0x896ec8=await warehouse['findOne']({'name':_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1f8)],'room':_0x5bd8b0[_0x304583(0x1cf)][_0x304583(0x1b8)]});_0x1ade26['return_product'][_0x304583(0x1a6)](_0x339347=>{var _0x10d426=_0x304583;_0x896ec8[_0x10d426(0x1b0)][_0x10d426(0x1aa)](_0x157d8a=>{var _0xac15dd=_0x10d426;_0x157d8a[_0xac15dd(0x182)]==_0x339347['product_name']&&_0x157d8a[_0xac15dd(0x1a3)]==_0x339347[_0xac15dd(0x1a3)]&&(_0x157d8a[_0xac15dd(0x17a)]=parseInt(_0x157d8a['product_stock'])-parseInt(_0x339347[_0xac15dd(0x1f3)]),console['log'](_0xac15dd(0x1f1),_0x339347[_0xac15dd(0x1f3)]));});}),console[_0x304583(0x1c5)](_0x304583(0x1cc),_0x896ec8),await _0x896ec8[_0x304583(0x1df)]();const _0x59a02c=await s_payment_data[_0x304583(0x18f)]({'invoice':_0x5bd8b0[_0x304583(0x1cf)]['invoice'],'reason':_0x304583(0x183)});await _0x59a02c['save'](),_0x5bd8b0[_0x304583(0x1f4)](_0x304583(0x18d),_0x304583(0x1bd)),_0x2a19c7[_0x304583(0x1ab)](_0x304583(0x1ca));}catch(_0xca1872){console[_0x304583(0x1c5)](_0xca1872),_0x2a19c7[_0x304583(0x1a9)](0xc8)['json']({'message':_0xca1872['message']});}}),router[a0_0x306464(0x1c3)]('/invoice/:id',auth,async(_0x493bed,_0x41bc66)=>{var _0x2cebc5=a0_0x306464;try{const {username:_0x19afca,email:_0x103727,role:_0x10f9cb}=_0x493bed[_0x2cebc5(0x1d0)],_0x5e68a0=_0x493bed['user'],_0x47651f=await profile[_0x2cebc5(0x18f)]({'email':_0x5e68a0[_0x2cebc5(0x19c)]}),_0x48c9e6=await master_shop[_0x2cebc5(0x1ce)]();console[_0x2cebc5(0x1c5)](_0x2cebc5(0x1b1),_0x48c9e6);const _0x41b679=_0x493bed[_0x2cebc5(0x1ec)]['id'],_0x1a2338=await purchases_return[_0x2cebc5(0x1b7)](_0x41b679);console[_0x2cebc5(0x1c5)](_0x1a2338);const _0x478407=await suppliers[_0x2cebc5(0x18f)]({'name':_0x1a2338[_0x2cebc5(0x1ed)]});console[_0x2cebc5(0x1c5)](_0x478407);if(_0x48c9e6[0x0][_0x2cebc5(0x192)]==_0x2cebc5(0x1c4)){var _0x24bc45=users[_0x2cebc5(0x1ad)];console[_0x2cebc5(0x1c5)](_0x24bc45);}else{if(_0x48c9e6[0x0][_0x2cebc5(0x192)]==_0x2cebc5(0x1e2))var _0x24bc45=users[_0x2cebc5(0x1e2)];else{if(_0x48c9e6[0x0][_0x2cebc5(0x192)]=='German')var _0x24bc45=users['German'];else{if(_0x48c9e6[0x0][_0x2cebc5(0x192)]==_0x2cebc5(0x1c1))var _0x24bc45=users[_0x2cebc5(0x1c1)];else{if(_0x48c9e6[0x0][_0x2cebc5(0x192)]==_0x2cebc5(0x18e))var _0x24bc45=users['French'];else{if(_0x48c9e6[0x0]['language']==_0x2cebc5(0x194))var _0x24bc45=users[_0x2cebc5(0x18c)];else{if(_0x48c9e6[0x0]['language']=='Chinese')var _0x24bc45=users[_0x2cebc5(0x1dd)];else{if(_0x48c9e6[0x0]['language']=='Arabic\x20(ae)')var _0x24bc45=users[_0x2cebc5(0x186)];}}}}}}}_0x41bc66[_0x2cebc5(0x199)](_0x2cebc5(0x1bb),{'success':_0x493bed[_0x2cebc5(0x1f4)](_0x2cebc5(0x18d)),'errors':_0x493bed[_0x2cebc5(0x1f4)](_0x2cebc5(0x17d)),'role':_0x5e68a0,'profile':_0x47651f,'master_shop':_0x48c9e6,'supplier':_0x478407,'purchase':_0x1a2338,'language':_0x24bc45});}catch(_0x335dd8){console[_0x2cebc5(0x1c5)](_0x335dd8);}}),router[a0_0x306464(0x180)](a0_0x306464(0x1e5),auth,async(_0x495d0a,_0x220fff)=>{var _0x1bdbd4=a0_0x306464;try{const _0x2360c1=_0x495d0a['params']['id'],{invoice:_0x3e5485,suppliers:_0x499d93,receivable_amount:_0x41b43d,received_amount:_0x2dde86}=_0x495d0a[_0x1bdbd4(0x1cf)],_0xa181c7=await purchases_return[_0x1bdbd4(0x1b7)](_0x2360c1);console[_0x1bdbd4(0x1c5)](_0xa181c7);var _0x57c912=_0x41b43d-_0x2dde86;console[_0x1bdbd4(0x1c5)](_0x2dde86),_0xa181c7[_0x1bdbd4(0x1fd)]=parseFloat(_0x2dde86)+parseFloat(_0xa181c7[_0x1bdbd4(0x1fd)]),_0xa181c7[_0x1bdbd4(0x1f9)]=_0x57c912,console['log'](_0xa181c7);const _0x1b439a=await _0xa181c7[_0x1bdbd4(0x1df)](),_0x2097a2=await s_payment_data['findOne']({'invoice':_0x495d0a[_0x1bdbd4(0x1cf)]['invoice'],'reason':_0x1bdbd4(0x183)});_0x2097a2['amount']=_0x57c912,await _0x2097a2[_0x1bdbd4(0x1df)]();let _0x265b72=new Date(),_0x5d8cbc=('0'+_0x265b72[_0x1bdbd4(0x1c0)]())[_0x1bdbd4(0x1d3)](-0x2),_0x231fff=('0'+(_0x265b72[_0x1bdbd4(0x191)]()+0x1))['slice'](-0x2),_0x490fb8=_0x265b72['getFullYear'](),_0x2020ac=_0x490fb8+'-'+_0x231fff+'-'+_0x5d8cbc;const _0x54ad67=new suppliers_payment({'invoice':_0x3e5485,'date':_0x490fb8+'-'+_0x231fff+'-'+_0x5d8cbc,'suppliers':_0x499d93,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x2dde86}),_0x23d42a=await _0x54ad67[_0x1bdbd4(0x1df)]();_0x495d0a[_0x1bdbd4(0x1f4)](_0x1bdbd4(0x18d),'payment\x20successfull'),_0x220fff[_0x1bdbd4(0x1ab)](_0x1bdbd4(0x1ca));}catch(_0x3709a4){console[_0x1bdbd4(0x1c5)](_0x3709a4);}}),module[a0_0x306464(0x1c6)]=router;