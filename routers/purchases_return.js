var a0_0x481639=a0_0x5378;(function(_0x478d56,_0x11233e){var _0x5272c6=a0_0x5378,_0x3d2744=_0x478d56();while(!![]){try{var _0x3ef393=parseInt(_0x5272c6(0x1db))/0x1+parseInt(_0x5272c6(0x23a))/0x2*(-parseInt(_0x5272c6(0x236))/0x3)+-parseInt(_0x5272c6(0x1f3))/0x4*(-parseInt(_0x5272c6(0x22b))/0x5)+parseInt(_0x5272c6(0x21b))/0x6*(parseInt(_0x5272c6(0x24c))/0x7)+parseInt(_0x5272c6(0x1ec))/0x8+-parseInt(_0x5272c6(0x1e9))/0x9+-parseInt(_0x5272c6(0x20d))/0xa;if(_0x3ef393===_0x11233e)break;else _0x3d2744['push'](_0x3d2744['shift']());}catch(_0x168b9c){_0x3d2744['push'](_0x3d2744['shift']());}}}(a0_0x4dbb,0x8c768));function a0_0x5378(_0x16196c,_0x104974){var _0x4dbbee=a0_0x4dbb();return a0_0x5378=function(_0x53789e,_0x128227){_0x53789e=_0x53789e-0x1d1;var _0x1dc300=_0x4dbbee[_0x53789e];return _0x1dc300;},a0_0x5378(_0x16196c,_0x104974);}const express=require('express'),app=express(),router=express[a0_0x481639(0x1dd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x481639(0x1f6)),auth=require('../middleware/auth'),users=require(a0_0x481639(0x1fc));function a0_0x4dbb(){var _0x17e87c=['1660086fdUEWX','return_qty','render','to_room','/receive_payment/:id','findOne','slice','Hindi','save','return_purchase_edit','$supplier_docs.mobile','findById','product_stock','$name','to_warehouse_name','redirect','9805eBcLAh','$product_details.type','English\x20(US)','get','getFullYear','flash','product_details.return_qtyproduct_details.return_qty','/view/:id','bay','secondary_code_hide','warehouse_name','426FfhWlg','$_id','json','Arabic','5606ZNHsZc','post','$supplier_docs.email','final','primary_code_hide','aggregate','floorlevel','/purchases_return/view','payment\x20successfull','find','English','Enabled','$product_details.primary_code','getMonth','to_Room_name','$product_details.bay','$product_details.storage','received','28AsTjfi','primary_code','body','exports','room','/view','Purchase\x20Return','return_product','$product_details._id','Spanish','purchase\x20return\x20successfully','invoice','/invoice/:id','$return_product.product_name','product_details','110777OEwPPR','type','Router','Received\x20For\x20Purchase\x20Return','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','Arabic\x20(ae)','language','level','master','old_warehouse_data','$discount','params','German','supplier_docs','75087wZwNSu','suppliers','secondary_code','2797088CaouIK','$return_product.return_qty','$return_product.price','$note','$product_details','$date','$product_details.bin','948kVJJsP','date','Portuguese','../models/all_models','product_code_hide','isle','$warehouse_name','getDate','pallet','../public/language/languages.json','types','$product_details.product_name','$invoice','Chinese','map','back','due_amount','old_data','status','stock_quantity','French','errors','success','product_name','$product_details.product_code','amount','10501890zgrphG','purchases_return','user','$supplier_docs.address','stocks','$received','forEach','bin','Return\x20Goods','email','string','$supplier_docs','purchase_quantity','log'];a0_0x4dbb=function(){return _0x17e87c;};return a0_0x4dbb();}router[a0_0x481639(0x22e)](a0_0x481639(0x1d1),auth,async(_0x2dcc36,_0x5c6ba1)=>{var _0x19a9a2=a0_0x481639;try{const {username:_0x48b489,email:_0x579fdb,role:_0x39e9a3}=_0x2dcc36[_0x19a9a2(0x20f)],_0x4a62ef=_0x2dcc36[_0x19a9a2(0x20f)],_0x4c93e6=await profile[_0x19a9a2(0x220)]({'email':_0x4a62ef[_0x19a9a2(0x216)]}),_0x215b0a=await master_shop[_0x19a9a2(0x243)]();console[_0x19a9a2(0x21a)](_0x19a9a2(0x1e3),_0x215b0a);const _0x138c16=await purchases_return[_0x19a9a2(0x23f)]([{'$lookup':{'from':_0x19a9a2(0x1ea),'localField':_0x19a9a2(0x1ea),'foreignField':'name','as':_0x19a9a2(0x1e8)}},{'$unwind':'$return_product'},{'$unwind':_0x19a9a2(0x218)},{'$group':{'_id':_0x19a9a2(0x237),'invoice':{'$first':_0x19a9a2(0x1ff)},'date':{'$first':_0x19a9a2(0x1f1)},'suppliers':{'$first':'$suppliers'},'warehouse_name':{'$first':_0x19a9a2(0x1f9)},'product_name':{'$first':_0x19a9a2(0x1d9)},'return_qty':{'$first':_0x19a9a2(0x1ed)},'price':{'$first':_0x19a9a2(0x1ee)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x19a9a2(0x1ef)},'total_amount':{'$first':'$total_amount'},'discount':{'$first':_0x19a9a2(0x1e5)},'receivable':{'$first':'$receivable'},'received':{'$first':_0x19a9a2(0x212)},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':_0x19a9a2(0x225)},'email':{'$first':_0x19a9a2(0x23c)},'address':{'$first':_0x19a9a2(0x210)},'return_sum_qty':{'$sum':_0x19a9a2(0x1ed)}}}]);console[_0x19a9a2(0x21a)](_0x138c16);if(_0x215b0a[0x0][_0x19a9a2(0x1e1)]==_0x19a9a2(0x22d)){var _0x362019=users[_0x19a9a2(0x244)];console[_0x19a9a2(0x21a)](_0x362019);}else{if(_0x215b0a[0x0][_0x19a9a2(0x1e1)]==_0x19a9a2(0x222))var _0x362019=users[_0x19a9a2(0x222)];else{if(_0x215b0a[0x0]['language']==_0x19a9a2(0x1e7))var _0x362019=users[_0x19a9a2(0x1e7)];else{if(_0x215b0a[0x0][_0x19a9a2(0x1e1)]==_0x19a9a2(0x1d5))var _0x362019=users[_0x19a9a2(0x1d5)];else{if(_0x215b0a[0x0][_0x19a9a2(0x1e1)]==_0x19a9a2(0x207))var _0x362019=users[_0x19a9a2(0x207)];else{if(_0x215b0a[0x0][_0x19a9a2(0x1e1)]=='Portuguese\x20(BR)')var _0x362019=users[_0x19a9a2(0x1f5)];else{if(_0x215b0a[0x0]['language']=='Chinese')var _0x362019=users[_0x19a9a2(0x200)];else{if(_0x215b0a[0x0]['language']==_0x19a9a2(0x1e0))var _0x362019=users[_0x19a9a2(0x239)];}}}}}}}_0x5c6ba1[_0x19a9a2(0x21d)](_0x19a9a2(0x20e),{'success':_0x2dcc36[_0x19a9a2(0x230)](_0x19a9a2(0x209)),'errors':_0x2dcc36[_0x19a9a2(0x230)]('errors'),'role':_0x4a62ef,'profile':_0x4c93e6,'master_shop':_0x215b0a,'user':_0x138c16,'language':_0x362019});}catch(_0x426332){console[_0x19a9a2(0x21a)](_0x426332);}}),router[a0_0x481639(0x22e)](a0_0x481639(0x232),auth,async(_0x3e1d68,_0x2485c1)=>{var _0x501cf8=a0_0x481639;try{const {username:_0x185d47,email:_0x4a7378,role:_0x565a70}=_0x3e1d68['user'],_0x506fd0=_0x3e1d68[_0x501cf8(0x20f)],_0x58c8a5=await profile[_0x501cf8(0x220)]({'email':_0x506fd0[_0x501cf8(0x216)]}),_0x243fef=await product['find']({}),_0x2f05a3=await master_shop[_0x501cf8(0x243)]();console[_0x501cf8(0x21a)](_0x501cf8(0x1e3),_0x2f05a3),console[_0x501cf8(0x21a)](_0x3e1d68[_0x501cf8(0x24e)]);const _0x2bada5=_0x3e1d68['params']['id'],_0x3377ed=await purchases_return['findById'](_0x2bada5);console['log'](_0x3377ed);const _0x5ad2c5=await warehouse['aggregate']([{'$match':{'name':_0x3377ed['warehouse_name'],'room':_0x3377ed[_0x501cf8(0x250)]}},{'$unwind':_0x501cf8(0x1f0)},{'$group':{'_id':_0x501cf8(0x1d4),'name':{'$first':_0x501cf8(0x1fe)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x501cf8(0x249)},'bin':{'$first':_0x501cf8(0x1f2)},'type':{'$first':_0x501cf8(0x22c)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x501cf8(0x246)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x501cf8(0x20b)},'storage':{'$first':_0x501cf8(0x24a)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x501cf8(0x23f)]([{'$match':{'status':_0x501cf8(0x245),'name':_0x501cf8(0x215),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x501cf8(0x228),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x501cf8(0x21a)]('stock_data',_0x5ad2c5);if(_0x2f05a3[0x0]['language']==_0x501cf8(0x22d)){var _0x1efe2d=users[_0x501cf8(0x244)];console['log'](_0x1efe2d);}else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]==_0x501cf8(0x222))var _0x1efe2d=users[_0x501cf8(0x222)];else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]==_0x501cf8(0x1e7))var _0x1efe2d=users[_0x501cf8(0x1e7)];else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]=='Spanish')var _0x1efe2d=users['Spanish'];else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]==_0x501cf8(0x207))var _0x1efe2d=users[_0x501cf8(0x207)];else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]=='Portuguese\x20(BR)')var _0x1efe2d=users[_0x501cf8(0x1f5)];else{if(_0x2f05a3[0x0][_0x501cf8(0x1e1)]==_0x501cf8(0x200))var _0x1efe2d=users['Chinese'];else{if(_0x2f05a3[0x0]['language']=='Arabic\x20(ae)')var _0x1efe2d=users[_0x501cf8(0x239)];}}}}}}}_0x2485c1[_0x501cf8(0x21d)](_0x501cf8(0x224),{'success':_0x3e1d68[_0x501cf8(0x230)](_0x501cf8(0x209)),'errors':_0x3e1d68[_0x501cf8(0x230)](_0x501cf8(0x208)),'role':_0x506fd0,'master_shop':_0x2f05a3,'profile':_0x58c8a5,'user':_0x3377ed,'stock':_0x5ad2c5,'product':_0x243fef,'language':_0x1efe2d,'warehouse':warehouse_data});}catch(_0x3db42f){console[_0x501cf8(0x21a)](_0x3db42f);}}),router[a0_0x481639(0x23b)](a0_0x481639(0x232),auth,async(_0x11c1d8,_0xb211f3)=>{var _0x4e5731=a0_0x481639;try{const _0x55b138=_0x11c1d8[_0x4e5731(0x1e6)]['id'];console[_0x4e5731(0x21a)](_0x55b138);const _0x2bd016=await purchases_return[_0x4e5731(0x220)]({'invoice':_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1d7)]});console['log'](_0x4e5731(0x204),_0x2bd016);const _0x1b8674=await warehouse[_0x4e5731(0x220)]({'name':_0x2bd016[_0x4e5731(0x229)],'room':_0x2bd016[_0x4e5731(0x21e)]});console[_0x4e5731(0x21a)]('old_warehouse_data',_0x1b8674);const {invoice:_0x1066fa,suppliers:_0x2de7d4,date:_0x5abaa0,warehouse_name:_0x32ae98,product_name:_0x582235,purchase_quantity:_0x20304c,stocks:_0x509052,return_qty:_0x21324f,note:_0x1c6fd0,Room_name:_0x3aa4f5,level:_0x48a00d,isle:_0x33786f,pallet:_0x32fdb1,to_warehouse_name:_0x20d45a,to_Room_name:_0x22df25}=_0x11c1d8[_0x4e5731(0x24e)];if(typeof _0x582235==_0x4e5731(0x217))var _0x20bf02=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x20a)]],_0x457d2c=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x219)]],_0x4a0a2f=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x211)]],_0x5b8953=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x21c)]],_0x42f728=[_0x11c1d8['body'][_0x4e5731(0x1e2)]],_0x1065c6=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1f8)]],_0x19b53d=[_0x11c1d8[_0x4e5731(0x24e)]['pallet']],_0x180125=[_0x11c1d8['body'][_0x4e5731(0x1fd)]],_0x53df2e=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1f7)]],_0x43d09a=[_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x23e)]],_0x18c895=[_0x11c1d8['body'][_0x4e5731(0x234)]];else var _0x20bf02=[..._0x11c1d8[_0x4e5731(0x24e)]['product_name']],_0x457d2c=[..._0x11c1d8['body']['purchase_quantity']],_0x4a0a2f=[..._0x11c1d8['body'][_0x4e5731(0x211)]],_0x5b8953=[..._0x11c1d8[_0x4e5731(0x24e)]['return_qty']],_0x42f728=[..._0x11c1d8['body'][_0x4e5731(0x1e2)]],_0x1065c6=[..._0x11c1d8[_0x4e5731(0x24e)]['isle']],_0x19b53d=[..._0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1fb)]],_0x53df2e=[..._0x11c1d8['body'][_0x4e5731(0x1f7)]],_0x43d09a=[..._0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x23e)]],_0x18c895=[..._0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x234)]],_0x180125=[..._0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1fd)]];const _0x599460=_0x20bf02['map'](_0x278a65=>{return _0x278a65={'product_name':_0x278a65};});_0x457d2c[_0x4e5731(0x213)]((_0x430247,_0x293583)=>{_0x599460[_0x293583]['purchase_quantity']=_0x430247;}),_0x4a0a2f[_0x4e5731(0x213)]((_0x49711e,_0x5df331)=>{var _0x2a1486=_0x4e5731;_0x599460[_0x5df331][_0x2a1486(0x206)]=_0x49711e;}),_0x5b8953[_0x4e5731(0x213)]((_0x2d9272,_0x16f78c)=>{var _0x32dbd2=_0x4e5731;_0x599460[_0x16f78c][_0x32dbd2(0x21c)]=_0x2d9272;}),_0x42f728['forEach']((_0x530262,_0x5bb41e)=>{var _0x446846=_0x4e5731;_0x599460[_0x5bb41e][_0x446846(0x233)]=_0x530262;}),_0x1065c6[_0x4e5731(0x213)]((_0x21355e,_0x18be74)=>{_0x599460[_0x18be74]['bin']=_0x21355e;}),_0x19b53d[_0x4e5731(0x213)]((_0x21297a,_0x5a1a60)=>{var _0x17a03c=_0x4e5731;_0x599460[_0x5a1a60][_0x17a03c(0x240)]=_0x21297a;}),_0x53df2e[_0x4e5731(0x213)]((_0x2bbe5b,_0x5ec00e)=>{_0x599460[_0x5ec00e]['product_code']=_0x2bbe5b;}),_0x43d09a['forEach']((_0x4b79f2,_0x279a90)=>{var _0x4d92c6=_0x4e5731;_0x599460[_0x279a90][_0x4d92c6(0x24d)]=_0x4b79f2;}),_0x18c895['forEach']((_0x36c301,_0x29e335)=>{var _0x4c347d=_0x4e5731;_0x599460[_0x29e335][_0x4c347d(0x1eb)]=_0x36c301;}),_0x180125[_0x4e5731(0x213)]((_0x29a4f1,_0x3b6657)=>{_0x599460[_0x3b6657]['type']=_0x29a4f1;});var _0x5baaa0=0x0;_0x599460[_0x4e5731(0x213)](_0x3c333c=>{var _0x59bff7=_0x4e5731;console[_0x59bff7(0x21a)]('foreach\x20newproduct',_0x3c333c),(parseInt(_0x3c333c[_0x59bff7(0x219)])<parseInt(_0x3c333c[_0x59bff7(0x21c)])||parseInt(_0x3c333c[_0x59bff7(0x206)])<parseInt(_0x3c333c[_0x59bff7(0x21c)])||parseInt(_0x3c333c[_0x59bff7(0x21c)])==0x0)&&_0x5baaa0++;});if(_0x5baaa0!=0x0)return _0x11c1d8['flash']('errors',_0x4e5731(0x1df)),_0xb211f3['redirect'](_0x4e5731(0x202));_0x2bd016[_0x4e5731(0x1d3)][_0x4e5731(0x213)](_0x448c4f=>{var _0x18a576=_0x4e5731;const _0x57e9f4=_0x1b8674[_0x18a576(0x1da)][_0x18a576(0x201)](_0x14d0fe=>{var _0x3912b6=_0x18a576;_0x14d0fe[_0x3912b6(0x20a)]==_0x448c4f[_0x3912b6(0x20a)]&&_0x14d0fe[_0x3912b6(0x240)]==_0x448c4f[_0x3912b6(0x240)]&&_0x14d0fe[_0x3912b6(0x1dc)]==_0x448c4f[_0x3912b6(0x1dc)]&&_0x14d0fe[_0x3912b6(0x214)]==_0x448c4f['bin']&&_0x14d0fe['bay']==_0x448c4f[_0x3912b6(0x233)]&&(_0x14d0fe[_0x3912b6(0x227)]=parseInt(_0x14d0fe[_0x3912b6(0x227)])+parseInt(_0x448c4f[_0x3912b6(0x21c)]));});}),console[_0x4e5731(0x21a)](_0x4e5731(0x1e4),_0x1b8674),await _0x1b8674['save'](),_0x2bd016[_0x4e5731(0x1d7)]=_0x1066fa,_0x2bd016[_0x4e5731(0x1ea)]=_0x2de7d4,_0x2bd016[_0x4e5731(0x1f4)]=_0x5abaa0,_0x2bd016[_0x4e5731(0x235)]=_0x32ae98,_0x2bd016[_0x4e5731(0x1d3)]=_0x599460,_0x2bd016['note']=_0x1c6fd0,_0x2bd016[_0x4e5731(0x250)]=_0x3aa4f5,_0x2bd016[_0x4e5731(0x229)]=_0x20d45a,_0x2bd016['to_room']=_0x22df25;const _0x394f20=await _0x2bd016[_0x4e5731(0x223)](),_0x547162=await purchases_return[_0x4e5731(0x220)]({'invoice':_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1d7)]}),_0x9aaf00=await warehouse[_0x4e5731(0x220)]({'name':_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x229)],'room':_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x248)]});_0x547162[_0x4e5731(0x1d3)][_0x4e5731(0x213)](_0x160d79=>{var _0x67db0c=_0x4e5731;_0x9aaf00[_0x67db0c(0x1da)][_0x67db0c(0x201)](_0x35721d=>{var _0x529e38=_0x67db0c;_0x35721d[_0x529e38(0x20a)]==_0x160d79[_0x529e38(0x20a)]&&_0x35721d[_0x529e38(0x1fb)]==_0x160d79[_0x529e38(0x1fb)]&&(_0x35721d[_0x529e38(0x227)]=parseInt(_0x35721d[_0x529e38(0x227)])-parseInt(_0x160d79[_0x529e38(0x21c)]),console['log'](_0x529e38(0x231),_0x160d79['return_qty']));});}),console['log'](_0x4e5731(0x23d),_0x9aaf00),await _0x9aaf00[_0x4e5731(0x223)]();const _0x2d14e2=await s_payment_data[_0x4e5731(0x220)]({'invoice':_0x11c1d8[_0x4e5731(0x24e)][_0x4e5731(0x1d7)],'reason':_0x4e5731(0x1d2)});await _0x2d14e2[_0x4e5731(0x223)](),_0x11c1d8[_0x4e5731(0x230)](_0x4e5731(0x209),_0x4e5731(0x1d6)),_0xb211f3[_0x4e5731(0x22a)](_0x4e5731(0x241));}catch(_0x54d78a){console['log'](_0x54d78a),_0xb211f3[_0x4e5731(0x205)](0xc8)[_0x4e5731(0x238)]({'message':_0x54d78a['message']});}}),router[a0_0x481639(0x22e)](a0_0x481639(0x1d8),auth,async(_0x3e92a4,_0x542742)=>{var _0x4afaa9=a0_0x481639;try{const {username:_0x3d321f,email:_0xeb9af,role:_0x30518b}=_0x3e92a4[_0x4afaa9(0x20f)],_0x28abb0=_0x3e92a4[_0x4afaa9(0x20f)],_0xd7c806=await profile[_0x4afaa9(0x220)]({'email':_0x28abb0[_0x4afaa9(0x216)]}),_0x54ccbb=await master_shop[_0x4afaa9(0x243)]();console['log'](_0x4afaa9(0x1e3),_0x54ccbb);const _0x4fe498=_0x3e92a4[_0x4afaa9(0x1e6)]['id'],_0x38faab=await purchases_return[_0x4afaa9(0x226)](_0x4fe498);console['log'](_0x38faab);const _0x568811=await suppliers[_0x4afaa9(0x220)]({'name':_0x38faab[_0x4afaa9(0x1ea)]});console[_0x4afaa9(0x21a)](_0x568811);if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]==_0x4afaa9(0x22d)){var _0x49b6b7=users[_0x4afaa9(0x244)];console[_0x4afaa9(0x21a)](_0x49b6b7);}else{if(_0x54ccbb[0x0]['language']=='Hindi')var _0x49b6b7=users[_0x4afaa9(0x222)];else{if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]==_0x4afaa9(0x1e7))var _0x49b6b7=users[_0x4afaa9(0x1e7)];else{if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]=='Spanish')var _0x49b6b7=users[_0x4afaa9(0x1d5)];else{if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]==_0x4afaa9(0x207))var _0x49b6b7=users[_0x4afaa9(0x207)];else{if(_0x54ccbb[0x0]['language']=='Portuguese\x20(BR)')var _0x49b6b7=users[_0x4afaa9(0x1f5)];else{if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]==_0x4afaa9(0x200))var _0x49b6b7=users[_0x4afaa9(0x200)];else{if(_0x54ccbb[0x0][_0x4afaa9(0x1e1)]==_0x4afaa9(0x1e0))var _0x49b6b7=users[_0x4afaa9(0x239)];}}}}}}}_0x542742[_0x4afaa9(0x21d)]('return_purchase_invoice',{'success':_0x3e92a4['flash'](_0x4afaa9(0x209)),'errors':_0x3e92a4[_0x4afaa9(0x230)]('errors'),'role':_0x28abb0,'profile':_0xd7c806,'master_shop':_0x54ccbb,'supplier':_0x568811,'purchase':_0x38faab,'language':_0x49b6b7});}catch(_0x190254){console[_0x4afaa9(0x21a)](_0x190254);}}),router[a0_0x481639(0x23b)](a0_0x481639(0x21f),auth,async(_0x268f82,_0x4995c8)=>{var _0x25ccf3=a0_0x481639;try{const _0x3935f9=_0x268f82[_0x25ccf3(0x1e6)]['id'],{invoice:_0x1ea357,suppliers:_0x3d46e3,receivable_amount:_0x5b8a97,received_amount:_0x44f559}=_0x268f82[_0x25ccf3(0x24e)],_0x4def3f=await purchases_return[_0x25ccf3(0x226)](_0x3935f9);console[_0x25ccf3(0x21a)](_0x4def3f);var _0x428c34=_0x5b8a97-_0x44f559;console['log'](_0x44f559),_0x4def3f[_0x25ccf3(0x24b)]=parseFloat(_0x44f559)+parseFloat(_0x4def3f[_0x25ccf3(0x24b)]),_0x4def3f[_0x25ccf3(0x203)]=_0x428c34,console['log'](_0x4def3f);const _0xa92d66=await _0x4def3f[_0x25ccf3(0x223)](),_0x3b9828=await s_payment_data[_0x25ccf3(0x220)]({'invoice':_0x268f82['body']['invoice'],'reason':'Purchase\x20Return'});_0x3b9828[_0x25ccf3(0x20c)]=_0x428c34,await _0x3b9828[_0x25ccf3(0x223)]();let _0x41b859=new Date(),_0x454ddc=('0'+_0x41b859[_0x25ccf3(0x1fa)]())[_0x25ccf3(0x221)](-0x2),_0x122aeb=('0'+(_0x41b859[_0x25ccf3(0x247)]()+0x1))[_0x25ccf3(0x221)](-0x2),_0x1a8eb0=_0x41b859[_0x25ccf3(0x22f)](),_0x470155=_0x1a8eb0+'-'+_0x122aeb+'-'+_0x454ddc;const _0x299e41=new suppliers_payment({'invoice':_0x1ea357,'date':_0x1a8eb0+'-'+_0x122aeb+'-'+_0x454ddc,'suppliers':_0x3d46e3,'reason':_0x25ccf3(0x1de),'amount':_0x44f559}),_0x33484f=await _0x299e41[_0x25ccf3(0x223)]();_0x268f82[_0x25ccf3(0x230)](_0x25ccf3(0x209),_0x25ccf3(0x242)),_0x4995c8['redirect'](_0x25ccf3(0x241));}catch(_0x254e2a){console[_0x25ccf3(0x21a)](_0x254e2a);}}),module[a0_0x481639(0x24f)]=router;