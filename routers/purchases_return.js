var a0_0x31752d=a0_0x4e0d;function a0_0x69d2(){var _0x307e31=['secondary_code_hide','product_code','2htECta','return_purchase_edit','user','$received','$product_details.storage','Router','purchases_return','old_warehouse_data','../models/all_models','suppliers','184780pBEPjT','name','forEach','post','return_purchase_invoice','primary_code','product_code_hide','back','getFullYear','German','foreach\x20newproduct','$due_amount','602121TAElUe','express','$product_details._id','status','get','Purchase\x20Return','$return_product.price','$_id','$return_product.product_name','level','$supplier_docs.address','$note','isle','note','purchase_quantity','$return_product.return_qty','email','log','stocks','$product_details.bay','errors','1365708egLGCf','to_room','/receive_payment/:id','find','$invoice','Received\x20For\x20Purchase\x20Return','getDate','findById','$receivable','bin','Arabic\x20(ae)','master','Hindi','$discount','received','stock_quantity','$product_details.floorlevel','type','primary_code_hide','7eVgQIr','slice','$supplier_docs.email','Spanish','179990tXDsME','$product_details.type','map','success','product_details','findOne','/purchases_return/view','aggregate','$warehouse_name','to_Room_name','Portuguese','4161652CEtjZW','Return\x20Goods','room','getMonth','to_warehouse_name','warehouse_name','secondary_code','return_qty','Arabic','$return_product.total','bay','language','supplier_docs','$name','pallet','$total_amount','350CScgac','product_details.return_qtyproduct_details.return_qty','$product_details','json','/view','invoice','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$suppliers','$supplier_docs.mobile','English\x20(US)','save','stock_data','floorlevel','$product_details.secondary_code','date','$product_details.product_stock','message','Portuguese\x20(BR)','$date','French','$supplier_docs','render','return_product','../middleware/auth','/view/:id','flash','params','final','$product_details.bin','redirect','225495ROQZrH','English','old_data','body','product_name','due_amount','Raw\x20Materials','$product_details.product_name','Chinese','40nCGxXS','product_stock','2889160IJXOJu','types','string'];a0_0x69d2=function(){return _0x307e31;};return a0_0x69d2();}(function(_0x4aa770,_0x3cd76b){var _0x12e149=a0_0x4e0d,_0x7c92ac=_0x4aa770();while(!![]){try{var _0x479cdf=parseInt(_0x12e149(0xec))/0x1+-parseInt(_0x12e149(0x135))/0x2*(parseInt(_0x12e149(0xc0))/0x3)+parseInt(_0x12e149(0x12e))/0x4*(parseInt(_0x12e149(0xb4))/0x5)+-parseInt(_0x12e149(0xd5))/0x6*(-parseInt(_0x12e149(0xe8))/0x7)+parseInt(_0x12e149(0x130))/0x8+parseInt(_0x12e149(0x125))/0x9*(-parseInt(_0x12e149(0x107))/0xa)+parseInt(_0x12e149(0xf7))/0xb;if(_0x479cdf===_0x3cd76b)break;else _0x7c92ac['push'](_0x7c92ac['shift']());}catch(_0x28648b){_0x7c92ac['push'](_0x7c92ac['shift']());}}}(a0_0x69d2,0x6b2e5));const express=require(a0_0x31752d(0xc1)),app=express(),router=express[a0_0x31752d(0xaf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x31752d(0xb2)),auth=require(a0_0x31752d(0x11e)),users=require('../public/language/languages.json');function a0_0x4e0d(_0x48df7b,_0x5b87fa){var _0x69d2bc=a0_0x69d2();return a0_0x4e0d=function(_0x4e0d35,_0x34fd3a){_0x4e0d35=_0x4e0d35-0xad;var _0x50c0b4=_0x69d2bc[_0x4e0d35];return _0x50c0b4;},a0_0x4e0d(_0x48df7b,_0x5b87fa);}router[a0_0x31752d(0xc4)](a0_0x31752d(0x10b),auth,async(_0x5ec205,_0x4f6d1a)=>{var _0x5a6f2d=a0_0x31752d;try{const {username:_0x5ab58f,email:_0x167666,role:_0x537554}=_0x5ec205['user'],_0x47fd40=_0x5ec205['user'],_0x4eebce=await profile[_0x5a6f2d(0xf1)]({'email':_0x47fd40['email']}),_0x23a679=await master_shop[_0x5a6f2d(0xd8)]();console[_0x5a6f2d(0xd1)](_0x5a6f2d(0xe0),_0x23a679);const _0x37276d=await purchases_return[_0x5a6f2d(0xf3)]([{'$lookup':{'from':'suppliers','localField':_0x5a6f2d(0xb3),'foreignField':_0x5a6f2d(0xb5),'as':_0x5a6f2d(0x103)}},{'$unwind':'$return_product'},{'$unwind':_0x5a6f2d(0x11b)},{'$group':{'_id':_0x5a6f2d(0xc7),'invoice':{'$first':_0x5a6f2d(0xd9)},'date':{'$first':_0x5a6f2d(0x119)},'suppliers':{'$first':_0x5a6f2d(0x10e)},'warehouse_name':{'$first':_0x5a6f2d(0xf4)},'product_name':{'$first':_0x5a6f2d(0xc8)},'return_qty':{'$first':_0x5a6f2d(0xcf)},'price':{'$first':_0x5a6f2d(0xc6)},'total':{'$sum':_0x5a6f2d(0x100)},'note':{'$first':_0x5a6f2d(0xcb)},'total_amount':{'$first':_0x5a6f2d(0x106)},'discount':{'$first':_0x5a6f2d(0xe2)},'receivable':{'$first':_0x5a6f2d(0xdd)},'received':{'$first':_0x5a6f2d(0xad)},'due_amount':{'$first':_0x5a6f2d(0xbf)},'mobile':{'$first':_0x5a6f2d(0x10f)},'email':{'$first':_0x5a6f2d(0xea)},'address':{'$first':_0x5a6f2d(0xca)},'return_sum_qty':{'$sum':_0x5a6f2d(0xcf)}}}]);console[_0x5a6f2d(0xd1)](_0x37276d);if(_0x23a679[0x0]['language']==_0x5a6f2d(0x110)){var _0x14bd02=users[_0x5a6f2d(0x126)];console[_0x5a6f2d(0xd1)](_0x14bd02);}else{if(_0x23a679[0x0][_0x5a6f2d(0x102)]==_0x5a6f2d(0xe1))var _0x14bd02=users[_0x5a6f2d(0xe1)];else{if(_0x23a679[0x0][_0x5a6f2d(0x102)]=='German')var _0x14bd02=users[_0x5a6f2d(0xbd)];else{if(_0x23a679[0x0]['language']==_0x5a6f2d(0xeb))var _0x14bd02=users['Spanish'];else{if(_0x23a679[0x0][_0x5a6f2d(0x102)]==_0x5a6f2d(0x11a))var _0x14bd02=users[_0x5a6f2d(0x11a)];else{if(_0x23a679[0x0][_0x5a6f2d(0x102)]==_0x5a6f2d(0x118))var _0x14bd02=users[_0x5a6f2d(0xf6)];else{if(_0x23a679[0x0][_0x5a6f2d(0x102)]=='Chinese')var _0x14bd02=users[_0x5a6f2d(0x12d)];else{if(_0x23a679[0x0]['language']==_0x5a6f2d(0xdf))var _0x14bd02=users[_0x5a6f2d(0xff)];}}}}}}}_0x4f6d1a['render'](_0x5a6f2d(0xb0),{'success':_0x5ec205['flash'](_0x5a6f2d(0xef)),'errors':_0x5ec205[_0x5a6f2d(0x120)]('errors'),'role':_0x47fd40,'profile':_0x4eebce,'master_shop':_0x23a679,'user':_0x37276d,'language':_0x14bd02});}catch(_0x4d13ea){console[_0x5a6f2d(0xd1)](_0x4d13ea);}}),router['get'](a0_0x31752d(0x11f),auth,async(_0x398ac5,_0x322ace)=>{var _0x49839e=a0_0x31752d;try{const {username:_0x16163e,email:_0x512a63,role:_0x371519}=_0x398ac5[_0x49839e(0x137)],_0x14e0ba=_0x398ac5['user'],_0x19e2f9=await profile['findOne']({'email':_0x14e0ba[_0x49839e(0xd0)]}),_0x2ecada=await product[_0x49839e(0xd8)]({}),_0x2539dd=await master_shop[_0x49839e(0xd8)]();console[_0x49839e(0xd1)](_0x49839e(0xe0),_0x2539dd),console[_0x49839e(0xd1)](_0x398ac5[_0x49839e(0x128)]);const _0x38bac4=_0x398ac5[_0x49839e(0x121)]['id'],_0xfa2c49=await purchases_return[_0x49839e(0xdc)](_0x38bac4);console[_0x49839e(0xd1)](_0xfa2c49);const _0x4a8285=await warehouse[_0x49839e(0xf3)]([{'$match':{'name':_0xfa2c49[_0x49839e(0xfc)],'room':_0xfa2c49[_0x49839e(0xf9)]}},{'$unwind':_0x49839e(0x109)},{'$group':{'_id':_0x49839e(0xc2),'name':{'$first':_0x49839e(0x12c)},'product_stock':{'$first':_0x49839e(0x116)},'bay':{'$first':_0x49839e(0xd3)},'bin':{'$first':_0x49839e(0x123)},'type':{'$first':_0x49839e(0xed)},'floorlevel':{'$first':_0x49839e(0xe5)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x49839e(0x114)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x49839e(0xae)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x49839e(0xf8),'warehouse_category':_0x49839e(0x12b)}},{'$group':{'_id':_0x49839e(0x104),'name':{'$first':_0x49839e(0x104)}}},{'$sort':{'name':0x1}}]),console[_0x49839e(0xd1)](_0x49839e(0x112),_0x4a8285);if(_0x2539dd[0x0]['language']==_0x49839e(0x110)){var _0x3e7a11=users['English'];console['log'](_0x3e7a11);}else{if(_0x2539dd[0x0][_0x49839e(0x102)]==_0x49839e(0xe1))var _0x3e7a11=users[_0x49839e(0xe1)];else{if(_0x2539dd[0x0]['language']==_0x49839e(0xbd))var _0x3e7a11=users['German'];else{if(_0x2539dd[0x0][_0x49839e(0x102)]==_0x49839e(0xeb))var _0x3e7a11=users[_0x49839e(0xeb)];else{if(_0x2539dd[0x0]['language']==_0x49839e(0x11a))var _0x3e7a11=users['French'];else{if(_0x2539dd[0x0]['language']==_0x49839e(0x118))var _0x3e7a11=users[_0x49839e(0xf6)];else{if(_0x2539dd[0x0][_0x49839e(0x102)]==_0x49839e(0x12d))var _0x3e7a11=users[_0x49839e(0x12d)];else{if(_0x2539dd[0x0]['language']=='Arabic\x20(ae)')var _0x3e7a11=users[_0x49839e(0xff)];}}}}}}}_0x322ace[_0x49839e(0x11c)](_0x49839e(0x136),{'success':_0x398ac5['flash'](_0x49839e(0xef)),'errors':_0x398ac5[_0x49839e(0x120)](_0x49839e(0xd4)),'role':_0x14e0ba,'master_shop':_0x2539dd,'profile':_0x19e2f9,'user':_0xfa2c49,'stock':_0x4a8285,'product':_0x2ecada,'language':_0x3e7a11,'warehouse':warehouse_data});}catch(_0x5d64b9){console[_0x49839e(0xd1)](_0x5d64b9);}}),router[a0_0x31752d(0xb7)](a0_0x31752d(0x11f),auth,async(_0x40a8c4,_0x15acc6)=>{var _0x4ed2b6=a0_0x31752d;try{const _0x3c07a9=_0x40a8c4[_0x4ed2b6(0x121)]['id'];console[_0x4ed2b6(0xd1)](_0x3c07a9);const _0x530c7c=await purchases_return[_0x4ed2b6(0xf1)]({'invoice':_0x40a8c4[_0x4ed2b6(0x128)]['invoice']});console[_0x4ed2b6(0xd1)](_0x4ed2b6(0x127),_0x530c7c);const _0x3d9e0d=await warehouse['findOne']({'name':_0x530c7c[_0x4ed2b6(0xfb)],'room':_0x530c7c['to_room']});console[_0x4ed2b6(0xd1)]('old_warehouse_data',_0x3d9e0d);const {invoice:_0x13b605,suppliers:_0x1ed619,date:_0x30a19c,warehouse_name:_0xd2f563,product_name:_0x648762,purchase_quantity:_0x3b2204,stocks:_0x3a5b4b,return_qty:_0x21f541,note:_0xf8dafb,Room_name:_0x1d3b90,level:_0x343f2f,isle:_0x5d96d5,pallet:_0x285c86,to_warehouse_name:_0x54412b,to_Room_name:_0x25ca6e}=_0x40a8c4[_0x4ed2b6(0x128)];if(typeof _0x648762==_0x4ed2b6(0x132))var _0x22865b=[_0x40a8c4['body'][_0x4ed2b6(0x129)]],_0x515309=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xce)]],_0x168fb4=[_0x40a8c4[_0x4ed2b6(0x128)]['stocks']],_0x30922f=[_0x40a8c4[_0x4ed2b6(0x128)]['return_qty']],_0xd18ac5=[_0x40a8c4['body'][_0x4ed2b6(0xc9)]],_0x435bcf=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xcc)]],_0x629680=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x105)]],_0x513ad1=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x131)]],_0x1bac4b=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xba)]],_0x22f76e=[_0x40a8c4[_0x4ed2b6(0x128)]['primary_code_hide']],_0xb4e9b6=[_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x133)]];else var _0x22865b=[..._0x40a8c4['body'][_0x4ed2b6(0x129)]],_0x515309=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xce)]],_0x168fb4=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xd2)]],_0x30922f=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xfe)]],_0xd18ac5=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xc9)]],_0x435bcf=[..._0x40a8c4['body'][_0x4ed2b6(0xcc)]],_0x629680=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x105)]],_0x1bac4b=[..._0x40a8c4[_0x4ed2b6(0x128)]['product_code_hide']],_0x22f76e=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xe7)]],_0xb4e9b6=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x133)]],_0x513ad1=[..._0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x131)]];const _0x2a8849=_0x22865b['map'](_0x3b3287=>{return _0x3b3287={'product_name':_0x3b3287};});_0x515309[_0x4ed2b6(0xb6)]((_0x3773bc,_0xb930b)=>{_0x2a8849[_0xb930b]['purchase_quantity']=_0x3773bc;}),_0x168fb4['forEach']((_0x5ca299,_0x3e7666)=>{var _0x36559c=_0x4ed2b6;_0x2a8849[_0x3e7666][_0x36559c(0xe4)]=_0x5ca299;}),_0x30922f['forEach']((_0x5d265a,_0x24b054)=>{_0x2a8849[_0x24b054]['return_qty']=_0x5d265a;}),_0xd18ac5[_0x4ed2b6(0xb6)]((_0x176cad,_0x1c4527)=>{var _0x6f63ea=_0x4ed2b6;_0x2a8849[_0x1c4527][_0x6f63ea(0x101)]=_0x176cad;}),_0x435bcf[_0x4ed2b6(0xb6)]((_0x4aff8a,_0x287e79)=>{var _0x164f73=_0x4ed2b6;_0x2a8849[_0x287e79][_0x164f73(0xde)]=_0x4aff8a;}),_0x629680[_0x4ed2b6(0xb6)]((_0x5b1074,_0x2339a5)=>{var _0x3b04a5=_0x4ed2b6;_0x2a8849[_0x2339a5][_0x3b04a5(0x113)]=_0x5b1074;}),_0x1bac4b['forEach']((_0x5c03b3,_0x140799)=>{var _0x2a87d1=_0x4ed2b6;_0x2a8849[_0x140799][_0x2a87d1(0x134)]=_0x5c03b3;}),_0x22f76e['forEach']((_0x3f1ef2,_0x8e2b02)=>{var _0x412da8=_0x4ed2b6;_0x2a8849[_0x8e2b02][_0x412da8(0xb9)]=_0x3f1ef2;}),_0xb4e9b6[_0x4ed2b6(0xb6)]((_0x1ee770,_0xc85b)=>{var _0x561504=_0x4ed2b6;_0x2a8849[_0xc85b][_0x561504(0xfd)]=_0x1ee770;}),_0x513ad1['forEach']((_0x174b84,_0x9cba73)=>{var _0x5559f9=_0x4ed2b6;_0x2a8849[_0x9cba73][_0x5559f9(0xe6)]=_0x174b84;});var _0x44b07b=0x0;_0x2a8849[_0x4ed2b6(0xb6)](_0x5db055=>{var _0x32c08c=_0x4ed2b6;console[_0x32c08c(0xd1)](_0x32c08c(0xbe),_0x5db055),(parseInt(_0x5db055[_0x32c08c(0xce)])<parseInt(_0x5db055['return_qty'])||parseInt(_0x5db055['stock_quantity'])<parseInt(_0x5db055[_0x32c08c(0xfe)])||parseInt(_0x5db055[_0x32c08c(0xfe)])==0x0)&&_0x44b07b++;});if(_0x44b07b!=0x0)return _0x40a8c4[_0x4ed2b6(0x120)](_0x4ed2b6(0xd4),_0x4ed2b6(0x10d)),_0x15acc6[_0x4ed2b6(0x124)](_0x4ed2b6(0xbb));_0x530c7c[_0x4ed2b6(0x11d)][_0x4ed2b6(0xb6)](_0xf6a94c=>{var _0x1a846d=_0x4ed2b6;const _0x146780=_0x3d9e0d[_0x1a846d(0xf0)][_0x1a846d(0xee)](_0x40906c=>{var _0x1d21b0=_0x1a846d;_0x40906c['product_name']==_0xf6a94c['product_name']&&_0x40906c[_0x1d21b0(0x113)]==_0xf6a94c[_0x1d21b0(0x113)]&&_0x40906c[_0x1d21b0(0xe6)]==_0xf6a94c[_0x1d21b0(0xe6)]&&_0x40906c['bin']==_0xf6a94c[_0x1d21b0(0xde)]&&_0x40906c[_0x1d21b0(0x101)]==_0xf6a94c['bay']&&(_0x40906c[_0x1d21b0(0x12f)]=parseInt(_0x40906c[_0x1d21b0(0x12f)])+parseInt(_0xf6a94c[_0x1d21b0(0xfe)]));});}),console['log'](_0x4ed2b6(0xb1),_0x3d9e0d),await _0x3d9e0d[_0x4ed2b6(0x111)](),_0x530c7c['invoice']=_0x13b605,_0x530c7c[_0x4ed2b6(0xb3)]=_0x1ed619,_0x530c7c[_0x4ed2b6(0x115)]=_0x30a19c,_0x530c7c['warehouse_name']=_0xd2f563,_0x530c7c[_0x4ed2b6(0x11d)]=_0x2a8849,_0x530c7c[_0x4ed2b6(0xcd)]=_0xf8dafb,_0x530c7c[_0x4ed2b6(0xf9)]=_0x1d3b90,_0x530c7c[_0x4ed2b6(0xfb)]=_0x54412b,_0x530c7c[_0x4ed2b6(0xd6)]=_0x25ca6e;const _0x135094=await _0x530c7c[_0x4ed2b6(0x111)](),_0x3aebd6=await purchases_return[_0x4ed2b6(0xf1)]({'invoice':_0x40a8c4[_0x4ed2b6(0x128)]['invoice']}),_0x17c026=await warehouse['findOne']({'name':_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xfb)],'room':_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0xf5)]});_0x3aebd6[_0x4ed2b6(0x11d)][_0x4ed2b6(0xb6)](_0x9ee763=>{var _0x334b13=_0x4ed2b6;_0x17c026[_0x334b13(0xf0)][_0x334b13(0xee)](_0x43b14f=>{var _0x21f7ad=_0x334b13;_0x43b14f[_0x21f7ad(0x129)]==_0x9ee763['product_name']&&_0x43b14f[_0x21f7ad(0x105)]==_0x9ee763[_0x21f7ad(0x105)]&&(_0x43b14f['product_stock']=parseInt(_0x43b14f[_0x21f7ad(0x12f)])-parseInt(_0x9ee763[_0x21f7ad(0xfe)]),console[_0x21f7ad(0xd1)](_0x21f7ad(0x108),_0x9ee763['return_qty']));});}),console['log'](_0x4ed2b6(0x122),_0x17c026),await _0x17c026[_0x4ed2b6(0x111)]();const _0x95af88=await s_payment_data[_0x4ed2b6(0xf1)]({'invoice':_0x40a8c4[_0x4ed2b6(0x128)][_0x4ed2b6(0x10c)],'reason':_0x4ed2b6(0xc5)});await _0x95af88[_0x4ed2b6(0x111)](),_0x40a8c4[_0x4ed2b6(0x120)](_0x4ed2b6(0xef),'purchase\x20return\x20successfully'),_0x15acc6['redirect'](_0x4ed2b6(0xf2));}catch(_0x11997c){console['log'](_0x11997c),_0x15acc6[_0x4ed2b6(0xc3)](0xc8)[_0x4ed2b6(0x10a)]({'message':_0x11997c[_0x4ed2b6(0x117)]});}}),router[a0_0x31752d(0xc4)]('/invoice/:id',auth,async(_0x1b26d9,_0x5dbeb0)=>{var _0x56b8c8=a0_0x31752d;try{const {username:_0x1baa12,email:_0x1fe5a4,role:_0x47bdd7}=_0x1b26d9[_0x56b8c8(0x137)],_0x2477e4=_0x1b26d9[_0x56b8c8(0x137)],_0x1b24d5=await profile['findOne']({'email':_0x2477e4['email']}),_0x7df9fe=await master_shop[_0x56b8c8(0xd8)]();console[_0x56b8c8(0xd1)](_0x56b8c8(0xe0),_0x7df9fe);const _0x38b5b7=_0x1b26d9[_0x56b8c8(0x121)]['id'],_0x1b5759=await purchases_return['findById'](_0x38b5b7);console[_0x56b8c8(0xd1)](_0x1b5759);const _0x2d5fb9=await suppliers[_0x56b8c8(0xf1)]({'name':_0x1b5759[_0x56b8c8(0xb3)]});console[_0x56b8c8(0xd1)](_0x2d5fb9);if(_0x7df9fe[0x0][_0x56b8c8(0x102)]==_0x56b8c8(0x110)){var _0x57be82=users[_0x56b8c8(0x126)];console[_0x56b8c8(0xd1)](_0x57be82);}else{if(_0x7df9fe[0x0][_0x56b8c8(0x102)]==_0x56b8c8(0xe1))var _0x57be82=users['Hindi'];else{if(_0x7df9fe[0x0][_0x56b8c8(0x102)]==_0x56b8c8(0xbd))var _0x57be82=users[_0x56b8c8(0xbd)];else{if(_0x7df9fe[0x0][_0x56b8c8(0x102)]=='Spanish')var _0x57be82=users['Spanish'];else{if(_0x7df9fe[0x0][_0x56b8c8(0x102)]==_0x56b8c8(0x11a))var _0x57be82=users[_0x56b8c8(0x11a)];else{if(_0x7df9fe[0x0]['language']==_0x56b8c8(0x118))var _0x57be82=users[_0x56b8c8(0xf6)];else{if(_0x7df9fe[0x0]['language']==_0x56b8c8(0x12d))var _0x57be82=users[_0x56b8c8(0x12d)];else{if(_0x7df9fe[0x0][_0x56b8c8(0x102)]=='Arabic\x20(ae)')var _0x57be82=users['Arabic'];}}}}}}}_0x5dbeb0['render'](_0x56b8c8(0xb8),{'success':_0x1b26d9[_0x56b8c8(0x120)]('success'),'errors':_0x1b26d9[_0x56b8c8(0x120)](_0x56b8c8(0xd4)),'role':_0x2477e4,'profile':_0x1b24d5,'master_shop':_0x7df9fe,'supplier':_0x2d5fb9,'purchase':_0x1b5759,'language':_0x57be82});}catch(_0x1473f0){console['log'](_0x1473f0);}}),router[a0_0x31752d(0xb7)](a0_0x31752d(0xd7),auth,async(_0x5f0eaa,_0x931673)=>{var _0x3007af=a0_0x31752d;try{const _0x1dff80=_0x5f0eaa[_0x3007af(0x121)]['id'],{invoice:_0x4ef298,suppliers:_0x2e7f29,receivable_amount:_0x248f02,received_amount:_0x2e9e7d}=_0x5f0eaa['body'],_0x3a8ff3=await purchases_return[_0x3007af(0xdc)](_0x1dff80);console[_0x3007af(0xd1)](_0x3a8ff3);var _0x20398d=_0x248f02-_0x2e9e7d;console[_0x3007af(0xd1)](_0x2e9e7d),_0x3a8ff3[_0x3007af(0xe3)]=parseFloat(_0x2e9e7d)+parseFloat(_0x3a8ff3['received']),_0x3a8ff3[_0x3007af(0x12a)]=_0x20398d,console[_0x3007af(0xd1)](_0x3a8ff3);const _0x3bcdda=await _0x3a8ff3[_0x3007af(0x111)](),_0x6427b0=await s_payment_data[_0x3007af(0xf1)]({'invoice':_0x5f0eaa[_0x3007af(0x128)]['invoice'],'reason':'Purchase\x20Return'});_0x6427b0['amount']=_0x20398d,await _0x6427b0[_0x3007af(0x111)]();let _0x11772c=new Date(),_0x4d78d3=('0'+_0x11772c[_0x3007af(0xdb)]())[_0x3007af(0xe9)](-0x2),_0x46e308=('0'+(_0x11772c[_0x3007af(0xfa)]()+0x1))[_0x3007af(0xe9)](-0x2),_0x4b6a4b=_0x11772c[_0x3007af(0xbc)](),_0x2f7683=_0x4b6a4b+'-'+_0x46e308+'-'+_0x4d78d3;const _0x338d90=new suppliers_payment({'invoice':_0x4ef298,'date':_0x4b6a4b+'-'+_0x46e308+'-'+_0x4d78d3,'suppliers':_0x2e7f29,'reason':_0x3007af(0xda),'amount':_0x2e9e7d}),_0x37091e=await _0x338d90['save']();_0x5f0eaa['flash'](_0x3007af(0xef),'payment\x20successfull'),_0x931673['redirect'](_0x3007af(0xf2));}catch(_0x1819be){console[_0x3007af(0xd1)](_0x1819be);}}),module['exports']=router;