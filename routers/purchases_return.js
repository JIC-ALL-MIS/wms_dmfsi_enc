function a0_0x2aed(_0xd005dd,_0x472ccc){var _0x1216df=a0_0x1216();return a0_0x2aed=function(_0x2aed31,_0x453e45){_0x2aed31=_0x2aed31-0x1cc;var _0x46b443=_0x1216df[_0x2aed31];return _0x46b443;},a0_0x2aed(_0xd005dd,_0x472ccc);}var a0_0x2a4508=a0_0x2aed;function a0_0x1216(){var _0x315ae4=['findById','types','$date','floorlevel','supplier_docs','status','map','purchase_quantity','$supplier_docs.email','date','string','flash','return_product','$product_details._id','product_name','bin','old_warehouse_data','product_details.return_qtyproduct_details.return_qty','$product_details.rack','exports','German','stocks','../middleware/auth','product_details','../public/language/languages.json','master','params','amount','express','product_stock','$suppliers','$return_product','2150UxSrdC','room','/purchases_return/view','purchase\x20return\x20successfully','3wEQISe','$_id','getFullYear','/receive_payment/:id','post','139370xTDpye','success','/invoice/:id','render','$supplier_docs.address','findOne','user','note','return_purchase_edit','Arabic','$product_details.floorlevel','../models/all_models','$product_details.storage','redirect','stock_quantity','errors','json','9410GLDGzG','payment\x20successfull','Purchase\x20Return','secondary_code_hide','level','French','save','primary_code_hide','find','back','body','Hindi','bay','suppliers','435001byyAJR','$supplier_docs.mobile','to_room','final','Spanish','Chinese','Portuguese','aggregate','$discount','$supplier_docs','$name','English','log','primary_code','$total_amount','346252PVytqS','received','$product_details.product_stock','$product_details.bin','English\x20(US)','Router','Portuguese\x20(BR)','foreach\x20newproduct','stock_data','language','secondary_code','$warehouse_name','type','get','$invoice','return_purchase_invoice','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','forEach','2DuoNDY','2594223NHEzJw','getMonth','slice','due_amount','$receivable','$product_details','10897200RSGRFT','pallet','/view/:id','$product_details.primary_code','$note','email','return_qty','to_warehouse_name','product_code_hide','$return_product.price','purchases_return','old_data','$due_amount','$return_product.return_qty','Arabic\x20(ae)','warehouse_name','invoice','1647499goBkRB','4038mjnQKm','Enabled','to_Room_name'];a0_0x1216=function(){return _0x315ae4;};return a0_0x1216();}(function(_0x58a28f,_0x69cf81){var _0x2f1e31=a0_0x2aed,_0x4b8e05=_0x58a28f();while(!![]){try{var _0x28c17c=-parseInt(_0x2f1e31(0x240))/0x1*(-parseInt(_0x2f1e31(0x1dc))/0x2)+parseInt(_0x2f1e31(0x21c))/0x3*(-parseInt(_0x2f1e31(0x24f))/0x4)+parseInt(_0x2f1e31(0x232))/0x5*(parseInt(_0x2f1e31(0x1f5))/0x6)+parseInt(_0x2f1e31(0x1f4))/0x7+parseInt(_0x2f1e31(0x1e3))/0x8+parseInt(_0x2f1e31(0x1dd))/0x9+parseInt(_0x2f1e31(0x218))/0xa*(-parseInt(_0x2f1e31(0x221))/0xb);if(_0x28c17c===_0x69cf81)break;else _0x4b8e05['push'](_0x4b8e05['shift']());}catch(_0x2ac2f5){_0x4b8e05['push'](_0x4b8e05['shift']());}}}(a0_0x1216,0xbda18));const express=require(a0_0x2a4508(0x214)),app=express(),router=express[a0_0x2a4508(0x1cf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x2a4508(0x22c)),auth=require(a0_0x2a4508(0x20e)),users=require(a0_0x2a4508(0x210));router['get']('/view',auth,async(_0x300475,_0x239f86)=>{var _0x3ba33a=a0_0x2a4508;try{const {username:_0x4ffa28,email:_0x3cb08f,role:_0x4b67b9}=_0x300475[_0x3ba33a(0x227)],_0xd6a13e=_0x300475[_0x3ba33a(0x227)],_0x2925a2=await profile[_0x3ba33a(0x226)]({'email':_0xd6a13e[_0x3ba33a(0x1e8)]}),_0x57bcfc=await master_shop[_0x3ba33a(0x23a)]();console[_0x3ba33a(0x24c)](_0x3ba33a(0x211),_0x57bcfc);const _0x508194=await purchases_return[_0x3ba33a(0x247)]([{'$lookup':{'from':_0x3ba33a(0x23f),'localField':_0x3ba33a(0x23f),'foreignField':'name','as':_0x3ba33a(0x1fc)}},{'$unwind':_0x3ba33a(0x217)},{'$unwind':_0x3ba33a(0x249)},{'$group':{'_id':_0x3ba33a(0x21d),'invoice':{'$first':_0x3ba33a(0x1d8)},'date':{'$first':_0x3ba33a(0x1fa)},'suppliers':{'$first':_0x3ba33a(0x216)},'warehouse_name':{'$first':_0x3ba33a(0x1d5)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':_0x3ba33a(0x1f0)},'price':{'$first':_0x3ba33a(0x1ec)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x3ba33a(0x1e7)},'total_amount':{'$first':_0x3ba33a(0x24e)},'discount':{'$first':_0x3ba33a(0x248)},'receivable':{'$first':_0x3ba33a(0x1e1)},'received':{'$first':'$received'},'due_amount':{'$first':_0x3ba33a(0x1ef)},'mobile':{'$first':_0x3ba33a(0x241)},'email':{'$first':_0x3ba33a(0x200)},'address':{'$first':_0x3ba33a(0x225)},'return_sum_qty':{'$sum':_0x3ba33a(0x1f0)}}}]);console['log'](_0x508194);if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x1ce)){var _0x8ee88e=users['English'];console[_0x3ba33a(0x24c)](_0x8ee88e);}else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x23d))var _0x8ee88e=users['Hindi'];else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x20c))var _0x8ee88e=users['German'];else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x244))var _0x8ee88e=users['Spanish'];else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x237))var _0x8ee88e=users[_0x3ba33a(0x237)];else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]==_0x3ba33a(0x1d0))var _0x8ee88e=users[_0x3ba33a(0x246)];else{if(_0x57bcfc[0x0][_0x3ba33a(0x1d3)]=='Chinese')var _0x8ee88e=users[_0x3ba33a(0x245)];else{if(_0x57bcfc[0x0]['language']==_0x3ba33a(0x1f1))var _0x8ee88e=users[_0x3ba33a(0x22a)];}}}}}}}_0x239f86['render'](_0x3ba33a(0x1ed),{'success':_0x300475[_0x3ba33a(0x203)](_0x3ba33a(0x222)),'errors':_0x300475[_0x3ba33a(0x203)]('errors'),'role':_0xd6a13e,'profile':_0x2925a2,'master_shop':_0x57bcfc,'user':_0x508194,'language':_0x8ee88e});}catch(_0x1f0c2a){console['log'](_0x1f0c2a);}}),router[a0_0x2a4508(0x1d7)]('/view/:id',auth,async(_0x19a1ed,_0x2ede16)=>{var _0x5723c1=a0_0x2a4508;try{const {username:_0x407712,email:_0x3bbd9b,role:_0x2a713c}=_0x19a1ed[_0x5723c1(0x227)],_0x247b62=_0x19a1ed['user'],_0x151f1b=await profile[_0x5723c1(0x226)]({'email':_0x247b62[_0x5723c1(0x1e8)]}),_0x3a4f07=await product[_0x5723c1(0x23a)]({}),_0x531078=await master_shop[_0x5723c1(0x23a)]();console['log'](_0x5723c1(0x211),_0x531078),console[_0x5723c1(0x24c)](_0x19a1ed[_0x5723c1(0x23c)]);const _0x388bff=_0x19a1ed[_0x5723c1(0x212)]['id'],_0x2b5888=await purchases_return[_0x5723c1(0x1f8)](_0x388bff);console['log'](_0x2b5888);const _0x20e844=await warehouse[_0x5723c1(0x247)]([{'$match':{'name':_0x2b5888[_0x5723c1(0x1f2)],'room':_0x2b5888[_0x5723c1(0x219)]}},{'$unwind':_0x5723c1(0x1e2)},{'$group':{'_id':_0x5723c1(0x205),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x5723c1(0x1cc)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x5723c1(0x1cd)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x5723c1(0x22b)},'primary_code':{'$first':_0x5723c1(0x1e6)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x5723c1(0x22d)},'rack':{'$first':_0x5723c1(0x20a)}}}]);warehouse_data=await warehouse[_0x5723c1(0x247)]([{'$match':{'status':_0x5723c1(0x1f6),'name':'Return\x20Goods','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x5723c1(0x24a),'name':{'$first':_0x5723c1(0x24a)}}},{'$sort':{'name':0x1}}]),console['log'](_0x5723c1(0x1d2),_0x20e844);if(_0x531078[0x0][_0x5723c1(0x1d3)]==_0x5723c1(0x1ce)){var _0x4f9c2f=users[_0x5723c1(0x24b)];console[_0x5723c1(0x24c)](_0x4f9c2f);}else{if(_0x531078[0x0][_0x5723c1(0x1d3)]=='Hindi')var _0x4f9c2f=users[_0x5723c1(0x23d)];else{if(_0x531078[0x0][_0x5723c1(0x1d3)]==_0x5723c1(0x20c))var _0x4f9c2f=users[_0x5723c1(0x20c)];else{if(_0x531078[0x0][_0x5723c1(0x1d3)]==_0x5723c1(0x244))var _0x4f9c2f=users[_0x5723c1(0x244)];else{if(_0x531078[0x0]['language']==_0x5723c1(0x237))var _0x4f9c2f=users[_0x5723c1(0x237)];else{if(_0x531078[0x0][_0x5723c1(0x1d3)]==_0x5723c1(0x1d0))var _0x4f9c2f=users[_0x5723c1(0x246)];else{if(_0x531078[0x0]['language']==_0x5723c1(0x245))var _0x4f9c2f=users[_0x5723c1(0x245)];else{if(_0x531078[0x0]['language']==_0x5723c1(0x1f1))var _0x4f9c2f=users[_0x5723c1(0x22a)];}}}}}}}_0x2ede16[_0x5723c1(0x224)](_0x5723c1(0x229),{'success':_0x19a1ed[_0x5723c1(0x203)](_0x5723c1(0x222)),'errors':_0x19a1ed[_0x5723c1(0x203)]('errors'),'role':_0x247b62,'master_shop':_0x531078,'profile':_0x151f1b,'user':_0x2b5888,'stock':_0x20e844,'product':_0x3a4f07,'language':_0x4f9c2f,'warehouse':warehouse_data});}catch(_0x80645d){console[_0x5723c1(0x24c)](_0x80645d);}}),router['post'](a0_0x2a4508(0x1e5),auth,async(_0x541e55,_0x1df2fa)=>{var _0x3ac8d8=a0_0x2a4508;try{const _0x30241d=_0x541e55[_0x3ac8d8(0x212)]['id'];console[_0x3ac8d8(0x24c)](_0x30241d);const _0x5d7df9=await purchases_return[_0x3ac8d8(0x226)]({'invoice':_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1f3)]});console['log'](_0x3ac8d8(0x1ee),_0x5d7df9);const _0x55d1d5=await warehouse['findOne']({'name':_0x5d7df9[_0x3ac8d8(0x1ea)],'room':_0x5d7df9['to_room']});console[_0x3ac8d8(0x24c)](_0x3ac8d8(0x208),_0x55d1d5);const {invoice:_0x4aae9e,suppliers:_0x3e0ad5,date:_0x18bb1b,warehouse_name:_0x5a1554,product_name:_0x16786e,purchase_quantity:_0x3188e6,stocks:_0x2cb6e2,return_qty:_0x567267,note:_0x5e84b1,Room_name:_0x3d61dc,level:_0x19279f,isle:_0xe6346a,pallet:_0x479d45,to_warehouse_name:_0x256d88,to_Room_name:_0x18dec1}=_0x541e55[_0x3ac8d8(0x23c)];if(typeof _0x16786e==_0x3ac8d8(0x202))var _0x5dbb25=[_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x206)]],_0x403778=[_0x541e55['body'][_0x3ac8d8(0x1ff)]],_0x187496=[_0x541e55['body'][_0x3ac8d8(0x20d)]],_0x5e377c=[_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1e9)]],_0x3ff426=[_0x541e55['body']['level']],_0x1abe0b=[_0x541e55['body']['isle']],_0x13dbe3=[_0x541e55[_0x3ac8d8(0x23c)]['pallet']],_0x4356b3=[_0x541e55[_0x3ac8d8(0x23c)]['types']],_0x5c7320=[_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1eb)]],_0x1335d2=[_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x239)]],_0x466575=[_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x235)]];else var _0x5dbb25=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x206)]],_0x403778=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1ff)]],_0x187496=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x20d)]],_0x5e377c=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1e9)]],_0x3ff426=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x236)]],_0x1abe0b=[..._0x541e55[_0x3ac8d8(0x23c)]['isle']],_0x13dbe3=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1e4)]],_0x5c7320=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1eb)]],_0x1335d2=[..._0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x239)]],_0x466575=[..._0x541e55['body'][_0x3ac8d8(0x235)]],_0x4356b3=[..._0x541e55['body'][_0x3ac8d8(0x1f9)]];const _0x10054f=_0x5dbb25['map'](_0x22ec33=>{return _0x22ec33={'product_name':_0x22ec33};});_0x403778[_0x3ac8d8(0x1db)]((_0x2e1d1b,_0x2ae7a6)=>{var _0x54071e=_0x3ac8d8;_0x10054f[_0x2ae7a6][_0x54071e(0x1ff)]=_0x2e1d1b;}),_0x187496['forEach']((_0x39e2d3,_0x3ccb9b)=>{var _0x435106=_0x3ac8d8;_0x10054f[_0x3ccb9b][_0x435106(0x22f)]=_0x39e2d3;}),_0x5e377c[_0x3ac8d8(0x1db)]((_0x442659,_0x1012e6)=>{var _0xbc07d3=_0x3ac8d8;_0x10054f[_0x1012e6][_0xbc07d3(0x1e9)]=_0x442659;}),_0x3ff426[_0x3ac8d8(0x1db)]((_0x2caafd,_0x3aff7b)=>{var _0x26f65e=_0x3ac8d8;_0x10054f[_0x3aff7b][_0x26f65e(0x23e)]=_0x2caafd;}),_0x1abe0b['forEach']((_0x4de018,_0x15fece)=>{var _0x184477=_0x3ac8d8;_0x10054f[_0x15fece][_0x184477(0x207)]=_0x4de018;}),_0x13dbe3[_0x3ac8d8(0x1db)]((_0x212074,_0xe1f03f)=>{_0x10054f[_0xe1f03f]['floorlevel']=_0x212074;}),_0x5c7320[_0x3ac8d8(0x1db)]((_0x2661ac,_0x33b60e)=>{_0x10054f[_0x33b60e]['product_code']=_0x2661ac;}),_0x1335d2[_0x3ac8d8(0x1db)]((_0x45ce2c,_0xd7496)=>{var _0x506926=_0x3ac8d8;_0x10054f[_0xd7496][_0x506926(0x24d)]=_0x45ce2c;}),_0x466575[_0x3ac8d8(0x1db)]((_0x5f34ac,_0x45c308)=>{var _0x35c93e=_0x3ac8d8;_0x10054f[_0x45c308][_0x35c93e(0x1d4)]=_0x5f34ac;}),_0x4356b3[_0x3ac8d8(0x1db)]((_0x81fff1,_0x3c1e48)=>{var _0xebb990=_0x3ac8d8;_0x10054f[_0x3c1e48][_0xebb990(0x1d6)]=_0x81fff1;});var _0xa7be11=0x0;_0x10054f[_0x3ac8d8(0x1db)](_0x20cf34=>{var _0x391ab3=_0x3ac8d8;console[_0x391ab3(0x24c)](_0x391ab3(0x1d1),_0x20cf34),(parseInt(_0x20cf34[_0x391ab3(0x1ff)])<parseInt(_0x20cf34[_0x391ab3(0x1e9)])||parseInt(_0x20cf34['stock_quantity'])<parseInt(_0x20cf34[_0x391ab3(0x1e9)])||parseInt(_0x20cf34[_0x391ab3(0x1e9)])==0x0)&&_0xa7be11++;});if(_0xa7be11!=0x0)return _0x541e55['flash'](_0x3ac8d8(0x230),_0x3ac8d8(0x1da)),_0x1df2fa[_0x3ac8d8(0x22e)](_0x3ac8d8(0x23b));_0x5d7df9['return_product'][_0x3ac8d8(0x1db)](_0x15b91c=>{var _0x3c4efb=_0x3ac8d8;const _0x138747=_0x55d1d5[_0x3c4efb(0x20f)][_0x3c4efb(0x1fe)](_0x4155e5=>{var _0x243f44=_0x3c4efb;_0x4155e5[_0x243f44(0x206)]==_0x15b91c[_0x243f44(0x206)]&&_0x4155e5[_0x243f44(0x1fb)]==_0x15b91c[_0x243f44(0x1fb)]&&_0x4155e5['type']==_0x15b91c['type']&&_0x4155e5[_0x243f44(0x207)]==_0x15b91c[_0x243f44(0x207)]&&_0x4155e5['bay']==_0x15b91c['bay']&&(_0x4155e5[_0x243f44(0x215)]=parseInt(_0x4155e5[_0x243f44(0x215)])+parseInt(_0x15b91c['return_qty']));});}),console['log'](_0x3ac8d8(0x208),_0x55d1d5),await _0x55d1d5[_0x3ac8d8(0x238)](),_0x5d7df9[_0x3ac8d8(0x1f3)]=_0x4aae9e,_0x5d7df9[_0x3ac8d8(0x23f)]=_0x3e0ad5,_0x5d7df9[_0x3ac8d8(0x201)]=_0x18bb1b,_0x5d7df9[_0x3ac8d8(0x1f2)]=_0x5a1554,_0x5d7df9[_0x3ac8d8(0x204)]=_0x10054f,_0x5d7df9[_0x3ac8d8(0x228)]=_0x5e84b1,_0x5d7df9[_0x3ac8d8(0x219)]=_0x3d61dc,_0x5d7df9[_0x3ac8d8(0x1ea)]=_0x256d88,_0x5d7df9[_0x3ac8d8(0x242)]=_0x18dec1;const _0x23bb94=await _0x5d7df9[_0x3ac8d8(0x238)](),_0x24b627=await purchases_return[_0x3ac8d8(0x226)]({'invoice':_0x541e55['body'][_0x3ac8d8(0x1f3)]}),_0x37c270=await warehouse[_0x3ac8d8(0x226)]({'name':_0x541e55['body']['to_warehouse_name'],'room':_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1f7)]});_0x24b627[_0x3ac8d8(0x204)]['forEach'](_0xdae359=>{_0x37c270['product_details']['map'](_0x2fb525=>{var _0x5b5aaf=a0_0x2aed;_0x2fb525[_0x5b5aaf(0x206)]==_0xdae359[_0x5b5aaf(0x206)]&&_0x2fb525[_0x5b5aaf(0x1e4)]==_0xdae359[_0x5b5aaf(0x1e4)]&&(_0x2fb525[_0x5b5aaf(0x215)]=parseInt(_0x2fb525['product_stock'])-parseInt(_0xdae359[_0x5b5aaf(0x1e9)]),console['log'](_0x5b5aaf(0x209),_0xdae359['return_qty']));});}),console[_0x3ac8d8(0x24c)](_0x3ac8d8(0x243),_0x37c270),await _0x37c270['save']();const _0x5c0c24=await s_payment_data['findOne']({'invoice':_0x541e55[_0x3ac8d8(0x23c)][_0x3ac8d8(0x1f3)],'reason':_0x3ac8d8(0x234)});await _0x5c0c24['save'](),_0x541e55['flash'](_0x3ac8d8(0x222),_0x3ac8d8(0x21b)),_0x1df2fa[_0x3ac8d8(0x22e)]('/purchases_return/view');}catch(_0x3b7173){console[_0x3ac8d8(0x24c)](_0x3b7173),_0x1df2fa[_0x3ac8d8(0x1fd)](0xc8)[_0x3ac8d8(0x231)]({'message':_0x3b7173['message']});}}),router[a0_0x2a4508(0x1d7)](a0_0x2a4508(0x223),auth,async(_0x33c3f1,_0x163a34)=>{var _0x498051=a0_0x2a4508;try{const {username:_0x4cc58b,email:_0x147d44,role:_0x52380b}=_0x33c3f1['user'],_0x2d39b5=_0x33c3f1[_0x498051(0x227)],_0x52c347=await profile['findOne']({'email':_0x2d39b5[_0x498051(0x1e8)]}),_0x53c1b4=await master_shop['find']();console['log'](_0x498051(0x211),_0x53c1b4);const _0x2040e3=_0x33c3f1[_0x498051(0x212)]['id'],_0x770ba0=await purchases_return[_0x498051(0x1f8)](_0x2040e3);console[_0x498051(0x24c)](_0x770ba0);const _0x1a7c56=await suppliers[_0x498051(0x226)]({'name':_0x770ba0['suppliers']});console[_0x498051(0x24c)](_0x1a7c56);if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x1ce)){var _0x20d43f=users['English'];console['log'](_0x20d43f);}else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x23d))var _0x20d43f=users[_0x498051(0x23d)];else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x20c))var _0x20d43f=users[_0x498051(0x20c)];else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x244))var _0x20d43f=users[_0x498051(0x244)];else{if(_0x53c1b4[0x0]['language']=='French')var _0x20d43f=users[_0x498051(0x237)];else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x1d0))var _0x20d43f=users[_0x498051(0x246)];else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x245))var _0x20d43f=users[_0x498051(0x245)];else{if(_0x53c1b4[0x0][_0x498051(0x1d3)]==_0x498051(0x1f1))var _0x20d43f=users[_0x498051(0x22a)];}}}}}}}_0x163a34[_0x498051(0x224)](_0x498051(0x1d9),{'success':_0x33c3f1['flash']('success'),'errors':_0x33c3f1[_0x498051(0x203)]('errors'),'role':_0x2d39b5,'profile':_0x52c347,'master_shop':_0x53c1b4,'supplier':_0x1a7c56,'purchase':_0x770ba0,'language':_0x20d43f});}catch(_0x3b184b){console[_0x498051(0x24c)](_0x3b184b);}}),router[a0_0x2a4508(0x220)](a0_0x2a4508(0x21f),auth,async(_0x5ab41c,_0xd6dac3)=>{var _0x39bdb2=a0_0x2a4508;try{const _0x537476=_0x5ab41c[_0x39bdb2(0x212)]['id'],{invoice:_0x2458e4,suppliers:_0x982f81,receivable_amount:_0x1ef69f,received_amount:_0x24a228}=_0x5ab41c[_0x39bdb2(0x23c)],_0xde2d29=await purchases_return['findById'](_0x537476);console[_0x39bdb2(0x24c)](_0xde2d29);var _0x2217eb=_0x1ef69f-_0x24a228;console[_0x39bdb2(0x24c)](_0x24a228),_0xde2d29[_0x39bdb2(0x250)]=parseFloat(_0x24a228)+parseFloat(_0xde2d29['received']),_0xde2d29[_0x39bdb2(0x1e0)]=_0x2217eb,console[_0x39bdb2(0x24c)](_0xde2d29);const _0x3d49af=await _0xde2d29[_0x39bdb2(0x238)](),_0x5403ec=await s_payment_data[_0x39bdb2(0x226)]({'invoice':_0x5ab41c[_0x39bdb2(0x23c)][_0x39bdb2(0x1f3)],'reason':_0x39bdb2(0x234)});_0x5403ec[_0x39bdb2(0x213)]=_0x2217eb,await _0x5403ec[_0x39bdb2(0x238)]();let _0x1efc54=new Date(),_0x5cbbde=('0'+_0x1efc54['getDate']())['slice'](-0x2),_0x11ff01=('0'+(_0x1efc54[_0x39bdb2(0x1de)]()+0x1))[_0x39bdb2(0x1df)](-0x2),_0x5ea7d8=_0x1efc54[_0x39bdb2(0x21e)](),_0x1f3a47=_0x5ea7d8+'-'+_0x11ff01+'-'+_0x5cbbde;const _0x2cb5ce=new suppliers_payment({'invoice':_0x2458e4,'date':_0x5ea7d8+'-'+_0x11ff01+'-'+_0x5cbbde,'suppliers':_0x982f81,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x24a228}),_0x133a6d=await _0x2cb5ce[_0x39bdb2(0x238)]();_0x5ab41c[_0x39bdb2(0x203)](_0x39bdb2(0x222),_0x39bdb2(0x233)),_0xd6dac3[_0x39bdb2(0x22e)](_0x39bdb2(0x21a));}catch(_0xca0550){console[_0x39bdb2(0x24c)](_0xca0550);}}),module[a0_0x2a4508(0x20b)]=router;