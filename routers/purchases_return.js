function a0_0x121c(){var _0x49c1cf=['$product_details.product_name','back','pallet','getMonth','secondary_code','$return_product.return_qty','German','body','stock_quantity','$product_details.product_stock','Arabic\x20(ae)','$product_details.type','message','$product_details.bay','$product_details.product_code','/view/:id','invoice','supplier_docs','findById','../public/language/languages.json','name','Return\x20Goods','$received','types','$invoice','/invoice/:id','to_room','primary_code','$supplier_docs.email','$supplier_docs.address','primary_code_hide','type','return_qty','379764fOcZac','email','../middleware/auth','English','getDate','Portuguese','986274haopuo','language','$receivable','slice','status','546026skUlMd','old_warehouse_data','$due_amount','product_code','success','bin','$product_details','params','bay','product_details','Enabled','save','express','$product_details.floorlevel','master','$return_product','user','$note','note','room','/receive_payment/:id','received','$supplier_docs','secondary_code_hide','return_product','$supplier_docs.mobile','$return_product.product_name','due_amount','$total_amount','1WQfMaP','/purchases_return/view','Spanish','286686VnOKDj','$discount','/view','$suppliers','map','Chinese','Router','Arabic','stocks','Portuguese\x20(BR)','$product_details.bin','find','log','English\x20(US)','$name','amount','stock_data','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','string','product_name','Hindi','warehouse_name','Purchase\x20Return','$return_product.total','errors','foreach\x20newproduct','$warehouse_name','14940rNLTgT','exports','get','265224IhOMSF','1917rpyAcA','getFullYear','suppliers','floorlevel','aggregate','forEach','5FqjRuC','to_warehouse_name','render','1104904RrkuoW','findOne','post','return_purchase_edit','Raw\x20Materials','product_stock','purchases_return','purchase_quantity','flash','Received\x20For\x20Purchase\x20Return','French','7dJRvDa'];a0_0x121c=function(){return _0x49c1cf;};return a0_0x121c();}var a0_0x32c18a=a0_0x3c2d;(function(_0x2d8b3f,_0x20fedb){var _0x184407=a0_0x3c2d,_0x3c4b12=_0x2d8b3f();while(!![]){try{var _0x2a20b4=parseInt(_0x184407(0x1d9))/0x1*(parseInt(_0x184407(0x1bc))/0x2)+parseInt(_0x184407(0x1dc))/0x3+-parseInt(_0x184407(0x204))/0x4*(parseInt(_0x184407(0x201))/0x5)+-parseInt(_0x184407(0x1b7))/0x6+-parseInt(_0x184407(0x20f))/0x7*(parseInt(_0x184407(0x1fa))/0x8)+-parseInt(_0x184407(0x1fb))/0x9*(-parseInt(_0x184407(0x1f7))/0xa)+-parseInt(_0x184407(0x1b1))/0xb;if(_0x2a20b4===_0x20fedb)break;else _0x3c4b12['push'](_0x3c4b12['shift']());}catch(_0x590778){_0x3c4b12['push'](_0x3c4b12['shift']());}}}(a0_0x121c,0x2b953));const express=require(a0_0x32c18a(0x1c8)),app=express(),router=express[a0_0x32c18a(0x1e2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x32c18a(0x1b3)),users=require(a0_0x32c18a(0x1a3));function a0_0x3c2d(_0x2f752e,_0x20fbaa){var _0x121c45=a0_0x121c();return a0_0x3c2d=function(_0x3c2dee,_0x50f743){_0x3c2dee=_0x3c2dee-0x197;var _0x392cf9=_0x121c45[_0x3c2dee];return _0x392cf9;},a0_0x3c2d(_0x2f752e,_0x20fbaa);}router[a0_0x32c18a(0x1f9)](a0_0x32c18a(0x1de),auth,async(_0x3f0b6c,_0x100e92)=>{var _0x44b73e=a0_0x32c18a;try{const {username:_0x1396b1,email:_0x34a788,role:_0x4bc0b3}=_0x3f0b6c[_0x44b73e(0x1cc)],_0x95f4ea=_0x3f0b6c['user'],_0x341e00=await profile[_0x44b73e(0x205)]({'email':_0x95f4ea[_0x44b73e(0x1b2)]}),_0x304fdf=await master_shop[_0x44b73e(0x1e7)]();console[_0x44b73e(0x1e8)](_0x44b73e(0x1ca),_0x304fdf);const _0x4f0b2c=await purchases_return['aggregate']([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0x44b73e(0x1a4),'as':_0x44b73e(0x1a1)}},{'$unwind':_0x44b73e(0x1cb)},{'$unwind':_0x44b73e(0x1d2)},{'$group':{'_id':'$_id','invoice':{'$first':_0x44b73e(0x1a8)},'date':{'$first':'$date'},'suppliers':{'$first':_0x44b73e(0x1df)},'warehouse_name':{'$first':_0x44b73e(0x1f6)},'product_name':{'$first':_0x44b73e(0x1d6)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x44b73e(0x1f3)},'note':{'$first':_0x44b73e(0x1cd)},'total_amount':{'$first':_0x44b73e(0x1d8)},'discount':{'$first':_0x44b73e(0x1dd)},'receivable':{'$first':_0x44b73e(0x1b9)},'received':{'$first':_0x44b73e(0x1a6)},'due_amount':{'$first':_0x44b73e(0x1be)},'mobile':{'$first':_0x44b73e(0x1d5)},'email':{'$first':_0x44b73e(0x1ac)},'address':{'$first':_0x44b73e(0x1ad)},'return_sum_qty':{'$sum':_0x44b73e(0x215)}}}]);console['log'](_0x4f0b2c);if(_0x304fdf[0x0][_0x44b73e(0x1b8)]=='English\x20(US)'){var _0x153069=users[_0x44b73e(0x1b4)];console[_0x44b73e(0x1e8)](_0x153069);}else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x1f0))var _0x153069=users['Hindi'];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]=='German')var _0x153069=users[_0x44b73e(0x216)];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x1db))var _0x153069=users[_0x44b73e(0x1db)];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x20e))var _0x153069=users[_0x44b73e(0x20e)];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x1e5))var _0x153069=users[_0x44b73e(0x1b6)];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x1e1))var _0x153069=users['Chinese'];else{if(_0x304fdf[0x0][_0x44b73e(0x1b8)]==_0x44b73e(0x19a))var _0x153069=users[_0x44b73e(0x1e3)];}}}}}}}_0x100e92[_0x44b73e(0x203)](_0x44b73e(0x20a),{'success':_0x3f0b6c['flash'](_0x44b73e(0x1c0)),'errors':_0x3f0b6c[_0x44b73e(0x20c)](_0x44b73e(0x1f4)),'role':_0x95f4ea,'profile':_0x341e00,'master_shop':_0x304fdf,'user':_0x4f0b2c,'language':_0x153069});}catch(_0x4f5c6b){console[_0x44b73e(0x1e8)](_0x4f5c6b);}}),router['get'](a0_0x32c18a(0x19f),auth,async(_0x4cd81f,_0x2d953f)=>{var _0x5951cf=a0_0x32c18a;try{const {username:_0x31dfc8,email:_0x3f9c43,role:_0x167e0c}=_0x4cd81f[_0x5951cf(0x1cc)],_0x2557d5=_0x4cd81f[_0x5951cf(0x1cc)],_0x2de037=await profile[_0x5951cf(0x205)]({'email':_0x2557d5[_0x5951cf(0x1b2)]}),_0x16fd5d=await product['find']({}),_0x415686=await master_shop[_0x5951cf(0x1e7)]();console['log'](_0x5951cf(0x1ca),_0x415686),console[_0x5951cf(0x1e8)](_0x4cd81f[_0x5951cf(0x197)]);const _0x5bbc26=_0x4cd81f[_0x5951cf(0x1c3)]['id'],_0x3f4308=await purchases_return[_0x5951cf(0x1a2)](_0x5bbc26);console[_0x5951cf(0x1e8)](_0x3f4308);const _0x3013a7=await warehouse[_0x5951cf(0x1ff)]([{'$match':{'name':_0x3f4308[_0x5951cf(0x1f1)],'room':_0x3f4308[_0x5951cf(0x1cf)]}},{'$unwind':_0x5951cf(0x1c2)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5951cf(0x210)},'product_stock':{'$first':_0x5951cf(0x199)},'bay':{'$first':_0x5951cf(0x19d)},'bin':{'$first':_0x5951cf(0x1e6)},'type':{'$first':_0x5951cf(0x19b)},'floorlevel':{'$first':_0x5951cf(0x1c9)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5951cf(0x19e)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x5951cf(0x1ff)]([{'$match':{'status':_0x5951cf(0x1c6),'name':_0x5951cf(0x1a5),'warehouse_category':_0x5951cf(0x208)}},{'$group':{'_id':_0x5951cf(0x1ea),'name':{'$first':_0x5951cf(0x1ea)}}},{'$sort':{'name':0x1}}]),console['log'](_0x5951cf(0x1ec),_0x3013a7);if(_0x415686[0x0][_0x5951cf(0x1b8)]=='English\x20(US)'){var _0x20faed=users[_0x5951cf(0x1b4)];console[_0x5951cf(0x1e8)](_0x20faed);}else{if(_0x415686[0x0][_0x5951cf(0x1b8)]=='Hindi')var _0x20faed=users[_0x5951cf(0x1f0)];else{if(_0x415686[0x0][_0x5951cf(0x1b8)]==_0x5951cf(0x216))var _0x20faed=users[_0x5951cf(0x216)];else{if(_0x415686[0x0][_0x5951cf(0x1b8)]==_0x5951cf(0x1db))var _0x20faed=users[_0x5951cf(0x1db)];else{if(_0x415686[0x0]['language']=='French')var _0x20faed=users[_0x5951cf(0x20e)];else{if(_0x415686[0x0][_0x5951cf(0x1b8)]==_0x5951cf(0x1e5))var _0x20faed=users[_0x5951cf(0x1b6)];else{if(_0x415686[0x0][_0x5951cf(0x1b8)]==_0x5951cf(0x1e1))var _0x20faed=users['Chinese'];else{if(_0x415686[0x0][_0x5951cf(0x1b8)]=='Arabic\x20(ae)')var _0x20faed=users[_0x5951cf(0x1e3)];}}}}}}}_0x2d953f['render'](_0x5951cf(0x207),{'success':_0x4cd81f[_0x5951cf(0x20c)](_0x5951cf(0x1c0)),'errors':_0x4cd81f[_0x5951cf(0x20c)](_0x5951cf(0x1f4)),'role':_0x2557d5,'master_shop':_0x415686,'profile':_0x2de037,'user':_0x3f4308,'stock':_0x3013a7,'product':_0x16fd5d,'language':_0x20faed,'warehouse':warehouse_data});}catch(_0x5a3a9f){console[_0x5951cf(0x1e8)](_0x5a3a9f);}}),router[a0_0x32c18a(0x206)](a0_0x32c18a(0x19f),auth,async(_0x389936,_0xf8be5)=>{var _0x1b356c=a0_0x32c18a;try{const _0x3c7980=_0x389936[_0x1b356c(0x1c3)]['id'];console[_0x1b356c(0x1e8)](_0x3c7980);const _0x2551d6=await purchases_return['findOne']({'invoice':_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1a0)]});console[_0x1b356c(0x1e8)]('old_data',_0x2551d6);const _0x25547a=await warehouse['findOne']({'name':_0x2551d6[_0x1b356c(0x202)],'room':_0x2551d6[_0x1b356c(0x1aa)]});console[_0x1b356c(0x1e8)](_0x1b356c(0x1bd),_0x25547a);const {invoice:_0x4c9463,suppliers:_0x44fdb2,date:_0x3834a7,warehouse_name:_0x1c21c2,product_name:_0x2fcc6f,purchase_quantity:_0x375b48,stocks:_0x59a7f5,return_qty:_0x563c23,note:_0x405550,Room_name:_0x172b24,level:_0x471d65,isle:_0x5c8d72,pallet:_0x2221ac,to_warehouse_name:_0x33be04,to_Room_name:_0x314934}=_0x389936['body'];if(typeof _0x2fcc6f==_0x1b356c(0x1ee))var _0x471461=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1ef)]],_0x47c9c5=[_0x389936['body'][_0x1b356c(0x20b)]],_0x21c30b=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1e4)]],_0x51e7e4=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1b0)]],_0x2b81f0=[_0x389936[_0x1b356c(0x197)]['level']],_0x4415ca=[_0x389936[_0x1b356c(0x197)]['isle']],_0x11024e=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x212)]],_0x37d87b=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1a7)]],_0x1506e3=[_0x389936[_0x1b356c(0x197)]['product_code_hide']],_0x45a2c5=[_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1ae)]],_0x229745=[_0x389936['body'][_0x1b356c(0x1d3)]];else var _0x471461=[..._0x389936['body'][_0x1b356c(0x1ef)]],_0x47c9c5=[..._0x389936[_0x1b356c(0x197)]['purchase_quantity']],_0x21c30b=[..._0x389936['body'][_0x1b356c(0x1e4)]],_0x51e7e4=[..._0x389936[_0x1b356c(0x197)][_0x1b356c(0x1b0)]],_0x2b81f0=[..._0x389936[_0x1b356c(0x197)]['level']],_0x4415ca=[..._0x389936[_0x1b356c(0x197)]['isle']],_0x11024e=[..._0x389936[_0x1b356c(0x197)][_0x1b356c(0x212)]],_0x1506e3=[..._0x389936['body']['product_code_hide']],_0x45a2c5=[..._0x389936['body'][_0x1b356c(0x1ae)]],_0x229745=[..._0x389936[_0x1b356c(0x197)][_0x1b356c(0x1d3)]],_0x37d87b=[..._0x389936[_0x1b356c(0x197)][_0x1b356c(0x1a7)]];const _0x23514a=_0x471461[_0x1b356c(0x1e0)](_0x513d2e=>{return _0x513d2e={'product_name':_0x513d2e};});_0x47c9c5['forEach']((_0x497daa,_0x112cf0)=>{var _0x396ed9=_0x1b356c;_0x23514a[_0x112cf0][_0x396ed9(0x20b)]=_0x497daa;}),_0x21c30b[_0x1b356c(0x200)]((_0x32178d,_0x1f20d9)=>{var _0x58884b=_0x1b356c;_0x23514a[_0x1f20d9][_0x58884b(0x198)]=_0x32178d;}),_0x51e7e4[_0x1b356c(0x200)]((_0x33aff2,_0x278117)=>{_0x23514a[_0x278117]['return_qty']=_0x33aff2;}),_0x2b81f0[_0x1b356c(0x200)]((_0x13517a,_0x13ef67)=>{var _0x2b71f9=_0x1b356c;_0x23514a[_0x13ef67][_0x2b71f9(0x1c4)]=_0x13517a;}),_0x4415ca[_0x1b356c(0x200)]((_0x22a4d4,_0x3aab64)=>{var _0x16df23=_0x1b356c;_0x23514a[_0x3aab64][_0x16df23(0x1c1)]=_0x22a4d4;}),_0x11024e[_0x1b356c(0x200)]((_0xa4fa16,_0x35706b)=>{var _0x1fb99c=_0x1b356c;_0x23514a[_0x35706b][_0x1fb99c(0x1fe)]=_0xa4fa16;}),_0x1506e3[_0x1b356c(0x200)]((_0x14a29c,_0x5eb479)=>{var _0x416d18=_0x1b356c;_0x23514a[_0x5eb479][_0x416d18(0x1bf)]=_0x14a29c;}),_0x45a2c5[_0x1b356c(0x200)]((_0x32b075,_0x4a4ec5)=>{var _0x335cfa=_0x1b356c;_0x23514a[_0x4a4ec5][_0x335cfa(0x1ab)]=_0x32b075;}),_0x229745[_0x1b356c(0x200)]((_0x3e149a,_0x19620c)=>{var _0x265727=_0x1b356c;_0x23514a[_0x19620c][_0x265727(0x214)]=_0x3e149a;}),_0x37d87b[_0x1b356c(0x200)]((_0x35aeff,_0x5c45f7)=>{var _0x5a6b15=_0x1b356c;_0x23514a[_0x5c45f7][_0x5a6b15(0x1af)]=_0x35aeff;});var _0xfb603d=0x0;_0x23514a['forEach'](_0x462bd2=>{var _0x357e34=_0x1b356c;console[_0x357e34(0x1e8)](_0x357e34(0x1f5),_0x462bd2),(parseInt(_0x462bd2[_0x357e34(0x20b)])<parseInt(_0x462bd2['return_qty'])||parseInt(_0x462bd2[_0x357e34(0x198)])<parseInt(_0x462bd2[_0x357e34(0x1b0)])||parseInt(_0x462bd2[_0x357e34(0x1b0)])==0x0)&&_0xfb603d++;});if(_0xfb603d!=0x0)return _0x389936[_0x1b356c(0x20c)](_0x1b356c(0x1f4),_0x1b356c(0x1ed)),_0xf8be5['redirect'](_0x1b356c(0x211));_0x2551d6[_0x1b356c(0x1d4)][_0x1b356c(0x200)](_0xbf3b3=>{var _0x1152da=_0x1b356c;const _0x290f18=_0x25547a[_0x1152da(0x1c5)][_0x1152da(0x1e0)](_0x281aaa=>{var _0x544902=_0x1152da;_0x281aaa[_0x544902(0x1ef)]==_0xbf3b3[_0x544902(0x1ef)]&&_0x281aaa[_0x544902(0x1fe)]==_0xbf3b3['floorlevel']&&_0x281aaa['type']==_0xbf3b3[_0x544902(0x1af)]&&_0x281aaa[_0x544902(0x1c1)]==_0xbf3b3['bin']&&_0x281aaa['bay']==_0xbf3b3[_0x544902(0x1c4)]&&(_0x281aaa[_0x544902(0x209)]=parseInt(_0x281aaa['product_stock'])+parseInt(_0xbf3b3['return_qty']));});}),console[_0x1b356c(0x1e8)](_0x1b356c(0x1bd),_0x25547a),await _0x25547a[_0x1b356c(0x1c7)](),_0x2551d6['invoice']=_0x4c9463,_0x2551d6[_0x1b356c(0x1fd)]=_0x44fdb2,_0x2551d6['date']=_0x3834a7,_0x2551d6['warehouse_name']=_0x1c21c2,_0x2551d6[_0x1b356c(0x1d4)]=_0x23514a,_0x2551d6[_0x1b356c(0x1ce)]=_0x405550,_0x2551d6[_0x1b356c(0x1cf)]=_0x172b24,_0x2551d6[_0x1b356c(0x202)]=_0x33be04,_0x2551d6[_0x1b356c(0x1aa)]=_0x314934;const _0x5e9226=await _0x2551d6[_0x1b356c(0x1c7)](),_0x229bf0=await purchases_return['findOne']({'invoice':_0x389936['body'][_0x1b356c(0x1a0)]}),_0x1b4d8a=await warehouse[_0x1b356c(0x205)]({'name':_0x389936['body'][_0x1b356c(0x202)],'room':_0x389936[_0x1b356c(0x197)]['to_Room_name']});_0x229bf0['return_product'][_0x1b356c(0x200)](_0x2db90d=>{var _0x4aa160=_0x1b356c;_0x1b4d8a[_0x4aa160(0x1c5)][_0x4aa160(0x1e0)](_0x36c0a0=>{var _0x14071b=_0x4aa160;_0x36c0a0[_0x14071b(0x1ef)]==_0x2db90d[_0x14071b(0x1ef)]&&_0x36c0a0[_0x14071b(0x212)]==_0x2db90d['pallet']&&(_0x36c0a0[_0x14071b(0x209)]=parseInt(_0x36c0a0['product_stock'])-parseInt(_0x2db90d[_0x14071b(0x1b0)]),console[_0x14071b(0x1e8)]('product_details.return_qtyproduct_details.return_qty',_0x2db90d[_0x14071b(0x1b0)]));});}),console[_0x1b356c(0x1e8)]('final',_0x1b4d8a),await _0x1b4d8a[_0x1b356c(0x1c7)]();const _0x52876e=await s_payment_data[_0x1b356c(0x205)]({'invoice':_0x389936[_0x1b356c(0x197)][_0x1b356c(0x1a0)],'reason':_0x1b356c(0x1f2)});await _0x52876e[_0x1b356c(0x1c7)](),_0x389936[_0x1b356c(0x20c)](_0x1b356c(0x1c0),'purchase\x20return\x20successfully'),_0xf8be5['redirect']('/purchases_return/view');}catch(_0x81331b){console[_0x1b356c(0x1e8)](_0x81331b),_0xf8be5[_0x1b356c(0x1bb)](0xc8)['json']({'message':_0x81331b[_0x1b356c(0x19c)]});}}),router[a0_0x32c18a(0x1f9)](a0_0x32c18a(0x1a9),auth,async(_0x27c534,_0x5e3304)=>{var _0x4d2b97=a0_0x32c18a;try{const {username:_0xfdc113,email:_0x22fb0b,role:_0x2b408d}=_0x27c534[_0x4d2b97(0x1cc)],_0x30be27=_0x27c534[_0x4d2b97(0x1cc)],_0xf04d44=await profile[_0x4d2b97(0x205)]({'email':_0x30be27[_0x4d2b97(0x1b2)]}),_0x17168d=await master_shop['find']();console[_0x4d2b97(0x1e8)](_0x4d2b97(0x1ca),_0x17168d);const _0x5880ce=_0x27c534[_0x4d2b97(0x1c3)]['id'],_0x168087=await purchases_return[_0x4d2b97(0x1a2)](_0x5880ce);console[_0x4d2b97(0x1e8)](_0x168087);const _0x3c08b0=await suppliers[_0x4d2b97(0x205)]({'name':_0x168087['suppliers']});console[_0x4d2b97(0x1e8)](_0x3c08b0);if(_0x17168d[0x0]['language']==_0x4d2b97(0x1e9)){var _0x484458=users[_0x4d2b97(0x1b4)];console['log'](_0x484458);}else{if(_0x17168d[0x0]['language']==_0x4d2b97(0x1f0))var _0x484458=users['Hindi'];else{if(_0x17168d[0x0][_0x4d2b97(0x1b8)]=='German')var _0x484458=users[_0x4d2b97(0x216)];else{if(_0x17168d[0x0]['language']==_0x4d2b97(0x1db))var _0x484458=users[_0x4d2b97(0x1db)];else{if(_0x17168d[0x0]['language']==_0x4d2b97(0x20e))var _0x484458=users['French'];else{if(_0x17168d[0x0]['language']==_0x4d2b97(0x1e5))var _0x484458=users['Portuguese'];else{if(_0x17168d[0x0][_0x4d2b97(0x1b8)]=='Chinese')var _0x484458=users['Chinese'];else{if(_0x17168d[0x0][_0x4d2b97(0x1b8)]=='Arabic\x20(ae)')var _0x484458=users[_0x4d2b97(0x1e3)];}}}}}}}_0x5e3304[_0x4d2b97(0x203)]('return_purchase_invoice',{'success':_0x27c534[_0x4d2b97(0x20c)]('success'),'errors':_0x27c534[_0x4d2b97(0x20c)](_0x4d2b97(0x1f4)),'role':_0x30be27,'profile':_0xf04d44,'master_shop':_0x17168d,'supplier':_0x3c08b0,'purchase':_0x168087,'language':_0x484458});}catch(_0x5c892e){console[_0x4d2b97(0x1e8)](_0x5c892e);}}),router[a0_0x32c18a(0x206)](a0_0x32c18a(0x1d0),auth,async(_0x430ff1,_0x51aa3e)=>{var _0x30c946=a0_0x32c18a;try{const _0x183b78=_0x430ff1[_0x30c946(0x1c3)]['id'],{invoice:_0x404e8b,suppliers:_0x342625,receivable_amount:_0x3d3b4f,received_amount:_0x450f2e}=_0x430ff1[_0x30c946(0x197)],_0x3d5a85=await purchases_return[_0x30c946(0x1a2)](_0x183b78);console[_0x30c946(0x1e8)](_0x3d5a85);var _0x70b08=_0x3d3b4f-_0x450f2e;console[_0x30c946(0x1e8)](_0x450f2e),_0x3d5a85[_0x30c946(0x1d1)]=parseFloat(_0x450f2e)+parseFloat(_0x3d5a85['received']),_0x3d5a85[_0x30c946(0x1d7)]=_0x70b08,console[_0x30c946(0x1e8)](_0x3d5a85);const _0x269260=await _0x3d5a85[_0x30c946(0x1c7)](),_0x5274b4=await s_payment_data[_0x30c946(0x205)]({'invoice':_0x430ff1[_0x30c946(0x197)][_0x30c946(0x1a0)],'reason':_0x30c946(0x1f2)});_0x5274b4[_0x30c946(0x1eb)]=_0x70b08,await _0x5274b4['save']();let _0xf95177=new Date(),_0x1bb483=('0'+_0xf95177[_0x30c946(0x1b5)]())['slice'](-0x2),_0x3d8002=('0'+(_0xf95177[_0x30c946(0x213)]()+0x1))[_0x30c946(0x1ba)](-0x2),_0x59f526=_0xf95177[_0x30c946(0x1fc)](),_0x531f16=_0x59f526+'-'+_0x3d8002+'-'+_0x1bb483;const _0xed92b2=new suppliers_payment({'invoice':_0x404e8b,'date':_0x59f526+'-'+_0x3d8002+'-'+_0x1bb483,'suppliers':_0x342625,'reason':_0x30c946(0x20d),'amount':_0x450f2e}),_0x454ddf=await _0xed92b2['save']();_0x430ff1[_0x30c946(0x20c)](_0x30c946(0x1c0),'payment\x20successfull'),_0x51aa3e['redirect'](_0x30c946(0x1da));}catch(_0x3c38fb){console[_0x30c946(0x1e8)](_0x3c38fb);}}),module[a0_0x32c18a(0x1f8)]=router;