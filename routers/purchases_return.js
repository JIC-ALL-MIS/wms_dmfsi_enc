function a0_0x1b20(_0x284281,_0x2e583d){var _0x3e78b1=a0_0x3e78();return a0_0x1b20=function(_0x1b207c,_0x52851c){_0x1b207c=_0x1b207c-0x19c;var _0x2b83e3=_0x3e78b1[_0x1b207c];return _0x2b83e3;},a0_0x1b20(_0x284281,_0x2e583d);}var a0_0x5d07e8=a0_0x1b20;(function(_0x5754ce,_0x3c85b3){var _0x56f612=a0_0x1b20,_0x35975e=_0x5754ce();while(!![]){try{var _0x32243d=parseInt(_0x56f612(0x1d4))/0x1*(-parseInt(_0x56f612(0x201))/0x2)+-parseInt(_0x56f612(0x1b2))/0x3+-parseInt(_0x56f612(0x1d3))/0x4*(parseInt(_0x56f612(0x1f7))/0x5)+-parseInt(_0x56f612(0x200))/0x6+-parseInt(_0x56f612(0x1d0))/0x7+-parseInt(_0x56f612(0x1bf))/0x8+parseInt(_0x56f612(0x1ff))/0x9*(parseInt(_0x56f612(0x1c9))/0xa);if(_0x32243d===_0x3c85b3)break;else _0x35975e['push'](_0x35975e['shift']());}catch(_0x434be6){_0x35975e['push'](_0x35975e['shift']());}}}(a0_0x3e78,0x8c47f));function a0_0x3e78(){var _0x301f55=['return_qty','$product_details.rack','Purchase\x20Return','2279982trQXBp','old_data','$received','primary_code_hide','exports','getMonth','Portuguese\x20(BR)','English\x20(US)','$supplier_docs','suppliers','supplier_docs','../public/language/languages.json','aggregate','1384224YIGLGD','$product_details','to_warehouse_name','render','success','Return\x20Goods','$receivable','bin','type','purchase\x20return\x20successfully','10464970XuASsh','French','to_Room_name','$date','$supplier_docs.email','Router','due_amount','5478151BphOkG','date','product_code_hide','7340ItBoGU','2EAEqex','$return_product.return_qty','language','$supplier_docs.mobile','../models/all_models','Hindi','/view/:id','$supplier_docs.address','errors','log','master','Spanish','$invoice','body','forEach','room','Enabled','$warehouse_name','types','Arabic','bay','slice','$product_details._id','product_stock','Portuguese','$product_details.bin','$product_details.primary_code','$product_details.secondary_code','/purchases_return/view','payment\x20successfull','redirect','/view','$product_details.bay','get','Chinese','110Fwcsiu','return_product','Arabic\x20(ae)','isle','$return_product','note','final','$due_amount','27szJmlE','2756682HatLvh','349468ETgboH','$product_details.storage','$discount','warehouse_name','invoice','$product_details.product_code','back','/invoice/:id','floorlevel','product_details.return_qtyproduct_details.return_qty','findById','German','$total_amount','save','pallet','stock_quantity','old_warehouse_data','product_name','foreach\x20newproduct','purchase_quantity','$suppliers','Raw\x20Materials','message','express','findOne','find','map','English','user','Received\x20For\x20Purchase\x20Return','secondary_code_hide','$product_details.floorlevel','params','$product_details.product_name','flash','return_purchase_invoice','email','$name'];a0_0x3e78=function(){return _0x301f55;};return a0_0x3e78();}const express=require(a0_0x5d07e8(0x1a0)),app=express(),router=express[a0_0x5d07e8(0x1ce)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x5d07e8(0x1d8)),auth=require('../middleware/auth'),users=require(a0_0x5d07e8(0x1bd));router['get'](a0_0x5d07e8(0x1f3),auth,async(_0x132b5d,_0x3c679e)=>{var _0x60c83f=a0_0x5d07e8;try{const {username:_0xeb98ce,email:_0x2746dc,role:_0x4a74cc}=_0x132b5d[_0x60c83f(0x1a5)],_0x335944=_0x132b5d[_0x60c83f(0x1a5)],_0x490cb1=await profile[_0x60c83f(0x1a1)]({'email':_0x335944[_0x60c83f(0x1ad)]}),_0xb50e3c=await master_shop[_0x60c83f(0x1a2)]();console['log']('master',_0xb50e3c);const _0x5dfcee=await purchases_return[_0x60c83f(0x1be)]([{'$lookup':{'from':_0x60c83f(0x1bb),'localField':_0x60c83f(0x1bb),'foreignField':'name','as':_0x60c83f(0x1bc)}},{'$unwind':_0x60c83f(0x1fb)},{'$unwind':_0x60c83f(0x1ba)},{'$group':{'_id':'$_id','invoice':{'$first':_0x60c83f(0x1e0)},'date':{'$first':_0x60c83f(0x1cc)},'suppliers':{'$first':_0x60c83f(0x19d)},'warehouse_name':{'$first':_0x60c83f(0x1e5)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':_0x60c83f(0x1d5)},'price':{'$first':'$return_product.price'},'total':{'$sum':'$return_product.total'},'note':{'$first':'$note'},'total_amount':{'$first':_0x60c83f(0x20d)},'discount':{'$first':_0x60c83f(0x203)},'receivable':{'$first':_0x60c83f(0x1c5)},'received':{'$first':_0x60c83f(0x1b4)},'due_amount':{'$first':_0x60c83f(0x1fe)},'mobile':{'$first':_0x60c83f(0x1d7)},'email':{'$first':_0x60c83f(0x1cd)},'address':{'$first':_0x60c83f(0x1db)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x60c83f(0x1dd)](_0x5dfcee);if(_0xb50e3c[0x0]['language']=='English\x20(US)'){var _0x15ba66=users['English'];console[_0x60c83f(0x1dd)](_0x15ba66);}else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x1d9))var _0x15ba66=users[_0x60c83f(0x1d9)];else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x20c))var _0x15ba66=users['German'];else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x1df))var _0x15ba66=users[_0x60c83f(0x1df)];else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x1ca))var _0x15ba66=users[_0x60c83f(0x1ca)];else{if(_0xb50e3c[0x0]['language']=='Portuguese\x20(BR)')var _0x15ba66=users[_0x60c83f(0x1ec)];else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x1f6))var _0x15ba66=users[_0x60c83f(0x1f6)];else{if(_0xb50e3c[0x0][_0x60c83f(0x1d6)]==_0x60c83f(0x1f9))var _0x15ba66=users['Arabic'];}}}}}}}_0x3c679e[_0x60c83f(0x1c2)]('purchases_return',{'success':_0x132b5d[_0x60c83f(0x1ab)](_0x60c83f(0x1c3)),'errors':_0x132b5d[_0x60c83f(0x1ab)](_0x60c83f(0x1dc)),'role':_0x335944,'profile':_0x490cb1,'master_shop':_0xb50e3c,'user':_0x5dfcee,'language':_0x15ba66});}catch(_0x34a923){console[_0x60c83f(0x1dd)](_0x34a923);}}),router[a0_0x5d07e8(0x1f5)]('/view/:id',auth,async(_0x3e701b,_0x43119b)=>{var _0x4cad03=a0_0x5d07e8;try{const {username:_0x2acd39,email:_0x3d3a49,role:_0xa17a89}=_0x3e701b['user'],_0x48ed4a=_0x3e701b[_0x4cad03(0x1a5)],_0x3d9642=await profile[_0x4cad03(0x1a1)]({'email':_0x48ed4a[_0x4cad03(0x1ad)]}),_0x52ebfa=await product[_0x4cad03(0x1a2)]({}),_0x5ed0ef=await master_shop[_0x4cad03(0x1a2)]();console[_0x4cad03(0x1dd)](_0x4cad03(0x1de),_0x5ed0ef),console[_0x4cad03(0x1dd)](_0x3e701b[_0x4cad03(0x1e1)]);const _0x258ced=_0x3e701b[_0x4cad03(0x1a9)]['id'],_0x1a25a4=await purchases_return[_0x4cad03(0x20b)](_0x258ced);console['log'](_0x1a25a4);const _0x59b8a8=await warehouse['aggregate']([{'$match':{'name':_0x1a25a4[_0x4cad03(0x204)],'room':_0x1a25a4['room']}},{'$unwind':_0x4cad03(0x1c0)},{'$group':{'_id':_0x4cad03(0x1ea),'name':{'$first':_0x4cad03(0x1aa)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x4cad03(0x1f4)},'bin':{'$first':_0x4cad03(0x1ed)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x4cad03(0x1a8)},'primary_code':{'$first':_0x4cad03(0x1ee)},'secondary_code':{'$first':_0x4cad03(0x1ef)},'product_code':{'$first':_0x4cad03(0x206)},'storage':{'$first':_0x4cad03(0x202)},'rack':{'$first':_0x4cad03(0x1b0)}}}]);warehouse_data=await warehouse[_0x4cad03(0x1be)]([{'$match':{'status':_0x4cad03(0x1e4),'name':_0x4cad03(0x1c4),'warehouse_category':_0x4cad03(0x19e)}},{'$group':{'_id':_0x4cad03(0x1ae),'name':{'$first':_0x4cad03(0x1ae)}}},{'$sort':{'name':0x1}}]),console[_0x4cad03(0x1dd)]('stock_data',_0x59b8a8);if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1b9)){var _0x34af99=users[_0x4cad03(0x1a4)];console[_0x4cad03(0x1dd)](_0x34af99);}else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1d9))var _0x34af99=users[_0x4cad03(0x1d9)];else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x20c))var _0x34af99=users[_0x4cad03(0x20c)];else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1df))var _0x34af99=users['Spanish'];else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1ca))var _0x34af99=users[_0x4cad03(0x1ca)];else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1b8))var _0x34af99=users['Portuguese'];else{if(_0x5ed0ef[0x0]['language']==_0x4cad03(0x1f6))var _0x34af99=users[_0x4cad03(0x1f6)];else{if(_0x5ed0ef[0x0][_0x4cad03(0x1d6)]==_0x4cad03(0x1f9))var _0x34af99=users[_0x4cad03(0x1e7)];}}}}}}}_0x43119b[_0x4cad03(0x1c2)]('return_purchase_edit',{'success':_0x3e701b[_0x4cad03(0x1ab)]('success'),'errors':_0x3e701b[_0x4cad03(0x1ab)](_0x4cad03(0x1dc)),'role':_0x48ed4a,'master_shop':_0x5ed0ef,'profile':_0x3d9642,'user':_0x1a25a4,'stock':_0x59b8a8,'product':_0x52ebfa,'language':_0x34af99,'warehouse':warehouse_data});}catch(_0x24427b){console[_0x4cad03(0x1dd)](_0x24427b);}}),router['post'](a0_0x5d07e8(0x1da),auth,async(_0x36b44a,_0x5f4c1e)=>{var _0x3b3777=a0_0x5d07e8;try{const _0xcbdfc2=_0x36b44a[_0x3b3777(0x1a9)]['id'];console[_0x3b3777(0x1dd)](_0xcbdfc2);const _0x1f12f7=await purchases_return[_0x3b3777(0x1a1)]({'invoice':_0x36b44a[_0x3b3777(0x1e1)]['invoice']});console[_0x3b3777(0x1dd)](_0x3b3777(0x1b3),_0x1f12f7);const _0x2bc195=await warehouse[_0x3b3777(0x1a1)]({'name':_0x1f12f7[_0x3b3777(0x1c1)],'room':_0x1f12f7['to_room']});console[_0x3b3777(0x1dd)]('old_warehouse_data',_0x2bc195);const {invoice:_0x165cfc,suppliers:_0x31e084,date:_0x5a3248,warehouse_name:_0x38cc45,product_name:_0x5f2fc8,purchase_quantity:_0x20a126,stocks:_0xd218a,return_qty:_0x143e06,note:_0x460742,Room_name:_0x1191bd,level:_0x27fa29,isle:_0x5372c9,pallet:_0x5271c4,to_warehouse_name:_0x12842c,to_Room_name:_0x8f785}=_0x36b44a['body'];if(typeof _0x5f2fc8=='string')var _0x2a0d65=[_0x36b44a[_0x3b3777(0x1e1)]['product_name']],_0x41fd8a=[_0x36b44a['body']['purchase_quantity']],_0x255845=[_0x36b44a[_0x3b3777(0x1e1)]['stocks']],_0x58a374=[_0x36b44a['body'][_0x3b3777(0x1af)]],_0x2c7d0c=[_0x36b44a[_0x3b3777(0x1e1)]['level']],_0x2080c0=[_0x36b44a['body'][_0x3b3777(0x1fa)]],_0x44ec90=[_0x36b44a[_0x3b3777(0x1e1)]['pallet']],_0x1447a2=[_0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1e6)]],_0x406b05=[_0x36b44a[_0x3b3777(0x1e1)]['product_code_hide']],_0x240c88=[_0x36b44a['body'][_0x3b3777(0x1b5)]],_0x349264=[_0x36b44a[_0x3b3777(0x1e1)]['secondary_code_hide']];else var _0x2a0d65=[..._0x36b44a[_0x3b3777(0x1e1)]['product_name']],_0x41fd8a=[..._0x36b44a['body'][_0x3b3777(0x19c)]],_0x255845=[..._0x36b44a[_0x3b3777(0x1e1)]['stocks']],_0x58a374=[..._0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1af)]],_0x2c7d0c=[..._0x36b44a[_0x3b3777(0x1e1)]['level']],_0x2080c0=[..._0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1fa)]],_0x44ec90=[..._0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x20f)]],_0x406b05=[..._0x36b44a['body'][_0x3b3777(0x1d2)]],_0x240c88=[..._0x36b44a['body'][_0x3b3777(0x1b5)]],_0x349264=[..._0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1a7)]],_0x1447a2=[..._0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1e6)]];const _0x366438=_0x2a0d65[_0x3b3777(0x1a3)](_0x707ed2=>{return _0x707ed2={'product_name':_0x707ed2};});_0x41fd8a[_0x3b3777(0x1e2)]((_0x115635,_0x28cdb4)=>{_0x366438[_0x28cdb4]['purchase_quantity']=_0x115635;}),_0x255845[_0x3b3777(0x1e2)]((_0x2b1069,_0x2669c9)=>{var _0xd024cf=_0x3b3777;_0x366438[_0x2669c9][_0xd024cf(0x210)]=_0x2b1069;}),_0x58a374['forEach']((_0x19e44d,_0x5db20d)=>{var _0x4c0207=_0x3b3777;_0x366438[_0x5db20d][_0x4c0207(0x1af)]=_0x19e44d;}),_0x2c7d0c[_0x3b3777(0x1e2)]((_0x1c9d4d,_0x3e51a2)=>{var _0x3b3dce=_0x3b3777;_0x366438[_0x3e51a2][_0x3b3dce(0x1e8)]=_0x1c9d4d;}),_0x2080c0[_0x3b3777(0x1e2)]((_0x1e5b21,_0x2b5b2f)=>{_0x366438[_0x2b5b2f]['bin']=_0x1e5b21;}),_0x44ec90[_0x3b3777(0x1e2)]((_0x38045b,_0x22804f)=>{_0x366438[_0x22804f]['floorlevel']=_0x38045b;}),_0x406b05[_0x3b3777(0x1e2)]((_0x24f16c,_0x5bbdd4)=>{_0x366438[_0x5bbdd4]['product_code']=_0x24f16c;}),_0x240c88['forEach']((_0x391eec,_0x26c8a8)=>{_0x366438[_0x26c8a8]['primary_code']=_0x391eec;}),_0x349264[_0x3b3777(0x1e2)]((_0x16d030,_0x5ac682)=>{_0x366438[_0x5ac682]['secondary_code']=_0x16d030;}),_0x1447a2[_0x3b3777(0x1e2)]((_0x59ba27,_0x4cf7d7)=>{_0x366438[_0x4cf7d7]['type']=_0x59ba27;});var _0x599425=0x0;_0x366438[_0x3b3777(0x1e2)](_0x2101a3=>{var _0xd5b15f=_0x3b3777;console[_0xd5b15f(0x1dd)](_0xd5b15f(0x213),_0x2101a3),(parseInt(_0x2101a3[_0xd5b15f(0x19c)])<parseInt(_0x2101a3['return_qty'])||parseInt(_0x2101a3[_0xd5b15f(0x210)])<parseInt(_0x2101a3[_0xd5b15f(0x1af)])||parseInt(_0x2101a3[_0xd5b15f(0x1af)])==0x0)&&_0x599425++;});if(_0x599425!=0x0)return _0x36b44a['flash'](_0x3b3777(0x1dc),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x5f4c1e[_0x3b3777(0x1f2)](_0x3b3777(0x207));_0x1f12f7[_0x3b3777(0x1f8)][_0x3b3777(0x1e2)](_0x2bee52=>{var _0xcd66de=_0x3b3777;const _0x320c3c=_0x2bc195['product_details'][_0xcd66de(0x1a3)](_0x476a4b=>{var _0x17265b=_0xcd66de;_0x476a4b[_0x17265b(0x212)]==_0x2bee52['product_name']&&_0x476a4b[_0x17265b(0x209)]==_0x2bee52[_0x17265b(0x209)]&&_0x476a4b[_0x17265b(0x1c7)]==_0x2bee52[_0x17265b(0x1c7)]&&_0x476a4b[_0x17265b(0x1c6)]==_0x2bee52['bin']&&_0x476a4b['bay']==_0x2bee52['bay']&&(_0x476a4b[_0x17265b(0x1eb)]=parseInt(_0x476a4b[_0x17265b(0x1eb)])+parseInt(_0x2bee52[_0x17265b(0x1af)]));});}),console[_0x3b3777(0x1dd)](_0x3b3777(0x211),_0x2bc195),await _0x2bc195[_0x3b3777(0x20e)](),_0x1f12f7[_0x3b3777(0x205)]=_0x165cfc,_0x1f12f7[_0x3b3777(0x1bb)]=_0x31e084,_0x1f12f7[_0x3b3777(0x1d1)]=_0x5a3248,_0x1f12f7[_0x3b3777(0x204)]=_0x38cc45,_0x1f12f7[_0x3b3777(0x1f8)]=_0x366438,_0x1f12f7[_0x3b3777(0x1fc)]=_0x460742,_0x1f12f7[_0x3b3777(0x1e3)]=_0x1191bd,_0x1f12f7[_0x3b3777(0x1c1)]=_0x12842c,_0x1f12f7['to_room']=_0x8f785;const _0x21b09f=await _0x1f12f7['save'](),_0x5530f8=await purchases_return[_0x3b3777(0x1a1)]({'invoice':_0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x205)]}),_0x59b1b1=await warehouse[_0x3b3777(0x1a1)]({'name':_0x36b44a[_0x3b3777(0x1e1)][_0x3b3777(0x1c1)],'room':_0x36b44a['body'][_0x3b3777(0x1cb)]});_0x5530f8[_0x3b3777(0x1f8)]['forEach'](_0x308dbd=>{var _0xf2f7a9=_0x3b3777;_0x59b1b1['product_details'][_0xf2f7a9(0x1a3)](_0xa4d2d1=>{var _0x269dc1=_0xf2f7a9;_0xa4d2d1[_0x269dc1(0x212)]==_0x308dbd['product_name']&&_0xa4d2d1[_0x269dc1(0x20f)]==_0x308dbd[_0x269dc1(0x20f)]&&(_0xa4d2d1[_0x269dc1(0x1eb)]=parseInt(_0xa4d2d1[_0x269dc1(0x1eb)])-parseInt(_0x308dbd[_0x269dc1(0x1af)]),console['log'](_0x269dc1(0x20a),_0x308dbd[_0x269dc1(0x1af)]));});}),console[_0x3b3777(0x1dd)](_0x3b3777(0x1fd),_0x59b1b1),await _0x59b1b1['save']();const _0x368b1d=await s_payment_data[_0x3b3777(0x1a1)]({'invoice':_0x36b44a[_0x3b3777(0x1e1)]['invoice'],'reason':'Purchase\x20Return'});await _0x368b1d['save'](),_0x36b44a[_0x3b3777(0x1ab)](_0x3b3777(0x1c3),_0x3b3777(0x1c8)),_0x5f4c1e['redirect'](_0x3b3777(0x1f0));}catch(_0x4ab1c9){console[_0x3b3777(0x1dd)](_0x4ab1c9),_0x5f4c1e['status'](0xc8)['json']({'message':_0x4ab1c9[_0x3b3777(0x19f)]});}}),router[a0_0x5d07e8(0x1f5)](a0_0x5d07e8(0x208),auth,async(_0x3914d4,_0x252a68)=>{var _0xed633=a0_0x5d07e8;try{const {username:_0x347988,email:_0x558daf,role:_0x30beea}=_0x3914d4[_0xed633(0x1a5)],_0xa50da2=_0x3914d4[_0xed633(0x1a5)],_0x2955e8=await profile[_0xed633(0x1a1)]({'email':_0xa50da2['email']}),_0x5e052f=await master_shop[_0xed633(0x1a2)]();console[_0xed633(0x1dd)]('master',_0x5e052f);const _0x4776e2=_0x3914d4[_0xed633(0x1a9)]['id'],_0x202bba=await purchases_return[_0xed633(0x20b)](_0x4776e2);console['log'](_0x202bba);const _0x19e456=await suppliers[_0xed633(0x1a1)]({'name':_0x202bba[_0xed633(0x1bb)]});console[_0xed633(0x1dd)](_0x19e456);if(_0x5e052f[0x0][_0xed633(0x1d6)]==_0xed633(0x1b9)){var _0x24e613=users[_0xed633(0x1a4)];console[_0xed633(0x1dd)](_0x24e613);}else{if(_0x5e052f[0x0][_0xed633(0x1d6)]=='Hindi')var _0x24e613=users[_0xed633(0x1d9)];else{if(_0x5e052f[0x0]['language']==_0xed633(0x20c))var _0x24e613=users[_0xed633(0x20c)];else{if(_0x5e052f[0x0][_0xed633(0x1d6)]==_0xed633(0x1df))var _0x24e613=users[_0xed633(0x1df)];else{if(_0x5e052f[0x0][_0xed633(0x1d6)]==_0xed633(0x1ca))var _0x24e613=users[_0xed633(0x1ca)];else{if(_0x5e052f[0x0]['language']=='Portuguese\x20(BR)')var _0x24e613=users[_0xed633(0x1ec)];else{if(_0x5e052f[0x0][_0xed633(0x1d6)]==_0xed633(0x1f6))var _0x24e613=users[_0xed633(0x1f6)];else{if(_0x5e052f[0x0][_0xed633(0x1d6)]=='Arabic\x20(ae)')var _0x24e613=users[_0xed633(0x1e7)];}}}}}}}_0x252a68[_0xed633(0x1c2)](_0xed633(0x1ac),{'success':_0x3914d4[_0xed633(0x1ab)]('success'),'errors':_0x3914d4[_0xed633(0x1ab)]('errors'),'role':_0xa50da2,'profile':_0x2955e8,'master_shop':_0x5e052f,'supplier':_0x19e456,'purchase':_0x202bba,'language':_0x24e613});}catch(_0xe02aad){console[_0xed633(0x1dd)](_0xe02aad);}}),router['post']('/receive_payment/:id',auth,async(_0x29dbb3,_0x2b328b)=>{var _0x2e192b=a0_0x5d07e8;try{const _0x84d6f0=_0x29dbb3[_0x2e192b(0x1a9)]['id'],{invoice:_0x4090e1,suppliers:_0x413a86,receivable_amount:_0x5c5fb9,received_amount:_0x3ea039}=_0x29dbb3[_0x2e192b(0x1e1)],_0x15efd9=await purchases_return[_0x2e192b(0x20b)](_0x84d6f0);console[_0x2e192b(0x1dd)](_0x15efd9);var _0x4cb340=_0x5c5fb9-_0x3ea039;console[_0x2e192b(0x1dd)](_0x3ea039),_0x15efd9['received']=parseFloat(_0x3ea039)+parseFloat(_0x15efd9['received']),_0x15efd9[_0x2e192b(0x1cf)]=_0x4cb340,console[_0x2e192b(0x1dd)](_0x15efd9);const _0xa4d118=await _0x15efd9[_0x2e192b(0x20e)](),_0x301444=await s_payment_data[_0x2e192b(0x1a1)]({'invoice':_0x29dbb3[_0x2e192b(0x1e1)][_0x2e192b(0x205)],'reason':_0x2e192b(0x1b1)});_0x301444['amount']=_0x4cb340,await _0x301444[_0x2e192b(0x20e)]();let _0x150f77=new Date(),_0x372aaf=('0'+_0x150f77['getDate']())[_0x2e192b(0x1e9)](-0x2),_0x2e9898=('0'+(_0x150f77[_0x2e192b(0x1b7)]()+0x1))[_0x2e192b(0x1e9)](-0x2),_0x55ce50=_0x150f77['getFullYear'](),_0x5f651d=_0x55ce50+'-'+_0x2e9898+'-'+_0x372aaf;const _0x2d28be=new suppliers_payment({'invoice':_0x4090e1,'date':_0x55ce50+'-'+_0x2e9898+'-'+_0x372aaf,'suppliers':_0x413a86,'reason':_0x2e192b(0x1a6),'amount':_0x3ea039}),_0x49600d=await _0x2d28be['save']();_0x29dbb3['flash'](_0x2e192b(0x1c3),_0x2e192b(0x1f1)),_0x2b328b['redirect'](_0x2e192b(0x1f0));}catch(_0x4d10df){console[_0x2e192b(0x1dd)](_0x4d10df);}}),module[a0_0x5d07e8(0x1b6)]=router;