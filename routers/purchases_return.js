function a0_0xdf3c(){var _0x48d5f4=['51630tqOrQI','product_name','floorlevel','purchases_return','primary_code_hide','351rWpZGd','$return_product.total','Portuguese','suppliers','bay','product_code_hide','Purchase\x20Return','stocks','60NsINRr','1050048KFEMvG','exports','user','message','$product_details.product_name','isle','date','$product_details.bin','return_product','string','343BmITYi','get','$receivable','$supplier_docs.address','Hindi','language','product_details','$return_product.price','stock_quantity','4511376cttqHR','$product_details.secondary_code','redirect','Spanish','findById','body','supplier_docs','92290jUkgEY','/view/:id','$return_product','purchase_quantity','log','return_purchase_invoice','render','English','note','$product_details.bay','product_details.return_qtyproduct_details.return_qty','Enabled','$product_details.type','amount','room','return_purchase_edit','success','10TtxwoK','old_data','email','product_stock','save','level','Raw\x20Materials','$supplier_docs','getMonth','/receive_payment/:id','English\x20(US)','$_id','to_room','557937KSWVrl','forEach','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','secondary_code_hide','Portuguese\x20(BR)','product_code','../middleware/auth','$product_details.product_code','aggregate','errors','received','back','warehouse_name','../public/language/languages.json','$product_details.primary_code','bin','return_qty','express','German','$supplier_docs.email','$total_amount','$date','$product_details.product_stock','post','types','primary_code','secondary_code','to_warehouse_name','Chinese','type','json','Arabic','/purchases_return/view','params','map','find','Arabic\x20(ae)','slice','$note','invoice','findOne','Received\x20For\x20Purchase\x20Return','getFullYear','pallet','stock_data','$suppliers','$return_product.return_qty','status','48968aYsAeQ','$discount','French','16488692tCfAyE','foreach\x20newproduct','getDate','flash'];a0_0xdf3c=function(){return _0x48d5f4;};return a0_0xdf3c();}var a0_0x22ff24=a0_0x3e0d;(function(_0x94d46d,_0x5dc229){var _0x328f43=a0_0x3e0d,_0x22b0df=_0x94d46d();while(!![]){try{var _0x3c84bc=parseInt(_0x328f43(0x175))/0x1+-parseInt(_0x328f43(0x128))/0x2*(-parseInt(_0x328f43(0x13c))/0x3)+parseInt(_0x328f43(0x13d))/0x4*(parseInt(_0x328f43(0x168))/0x5)+-parseInt(_0x328f43(0x12f))/0x6*(-parseInt(_0x328f43(0x147))/0x7)+-parseInt(_0x328f43(0x150))/0x8+-parseInt(_0x328f43(0x134))/0x9*(-parseInt(_0x328f43(0x157))/0xa)+-parseInt(_0x328f43(0x12b))/0xb;if(_0x3c84bc===_0x5dc229)break;else _0x22b0df['push'](_0x22b0df['shift']());}catch(_0x4b6ee9){_0x22b0df['push'](_0x22b0df['shift']());}}}(a0_0xdf3c,0x471fb));const express=require(a0_0x22ff24(0x186)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x22ff24(0x17b)),users=require(a0_0x22ff24(0x182));function a0_0x3e0d(_0x2fd603,_0x1e71b8){var _0xdf3c62=a0_0xdf3c();return a0_0x3e0d=function(_0x3e0dde,_0xddd0e5){_0x3e0dde=_0x3e0dde-0x11e;var _0x3fe3bf=_0xdf3c62[_0x3e0dde];return _0x3fe3bf;},a0_0x3e0d(_0x2fd603,_0x1e71b8);}router[a0_0x22ff24(0x148)]('/view',auth,async(_0x449229,_0x191264)=>{var _0x590b57=a0_0x22ff24;try{const {username:_0x49e540,email:_0x1731be,role:_0x400cd3}=_0x449229[_0x590b57(0x13f)],_0x3e32db=_0x449229[_0x590b57(0x13f)],_0x37410f=await profile['findOne']({'email':_0x3e32db['email']}),_0x5c2f62=await master_shop['find']();console['log']('master',_0x5c2f62);const _0x27c0b6=await purchases_return[_0x590b57(0x17d)]([{'$lookup':{'from':'suppliers','localField':_0x590b57(0x137),'foreignField':'name','as':_0x590b57(0x156)}},{'$unwind':_0x590b57(0x159)},{'$unwind':_0x590b57(0x16f)},{'$group':{'_id':_0x590b57(0x173),'invoice':{'$first':'$invoice'},'date':{'$first':_0x590b57(0x18a)},'suppliers':{'$first':_0x590b57(0x125)},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x590b57(0x14e)},'total':{'$sum':_0x590b57(0x135)},'note':{'$first':_0x590b57(0x11e)},'total_amount':{'$first':_0x590b57(0x189)},'discount':{'$first':_0x590b57(0x129)},'receivable':{'$first':_0x590b57(0x149)},'received':{'$first':'$received'},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':_0x590b57(0x188)},'address':{'$first':_0x590b57(0x14a)},'return_sum_qty':{'$sum':_0x590b57(0x126)}}}]);console[_0x590b57(0x15b)](_0x27c0b6);if(_0x5c2f62[0x0][_0x590b57(0x14c)]==_0x590b57(0x172)){var _0x5203d4=users[_0x590b57(0x15e)];console[_0x590b57(0x15b)](_0x5203d4);}else{if(_0x5c2f62[0x0]['language']==_0x590b57(0x14b))var _0x5203d4=users[_0x590b57(0x14b)];else{if(_0x5c2f62[0x0]['language']==_0x590b57(0x187))var _0x5203d4=users[_0x590b57(0x187)];else{if(_0x5c2f62[0x0][_0x590b57(0x14c)]==_0x590b57(0x153))var _0x5203d4=users[_0x590b57(0x153)];else{if(_0x5c2f62[0x0]['language']==_0x590b57(0x12a))var _0x5203d4=users[_0x590b57(0x12a)];else{if(_0x5c2f62[0x0][_0x590b57(0x14c)]==_0x590b57(0x179))var _0x5203d4=users[_0x590b57(0x136)];else{if(_0x5c2f62[0x0]['language']==_0x590b57(0x191))var _0x5203d4=users[_0x590b57(0x191)];else{if(_0x5c2f62[0x0][_0x590b57(0x14c)]==_0x590b57(0x199))var _0x5203d4=users[_0x590b57(0x194)];}}}}}}}_0x191264[_0x590b57(0x15d)](_0x590b57(0x132),{'success':_0x449229[_0x590b57(0x12e)](_0x590b57(0x167)),'errors':_0x449229[_0x590b57(0x12e)](_0x590b57(0x17e)),'role':_0x3e32db,'profile':_0x37410f,'master_shop':_0x5c2f62,'user':_0x27c0b6,'language':_0x5203d4});}catch(_0x4bf558){console['log'](_0x4bf558);}}),router['get'](a0_0x22ff24(0x158),auth,async(_0x2caff3,_0x2cdd3c)=>{var _0x1cb58f=a0_0x22ff24;try{const {username:_0x103152,email:_0x46fe81,role:_0x98b869}=_0x2caff3[_0x1cb58f(0x13f)],_0x87c665=_0x2caff3[_0x1cb58f(0x13f)],_0x436d79=await profile[_0x1cb58f(0x120)]({'email':_0x87c665[_0x1cb58f(0x16a)]}),_0x5872aa=await product[_0x1cb58f(0x198)]({}),_0x4ffeeb=await master_shop[_0x1cb58f(0x198)]();console[_0x1cb58f(0x15b)]('master',_0x4ffeeb),console[_0x1cb58f(0x15b)](_0x2caff3[_0x1cb58f(0x155)]);const _0x229e20=_0x2caff3[_0x1cb58f(0x196)]['id'],_0x3ab21e=await purchases_return[_0x1cb58f(0x154)](_0x229e20);console[_0x1cb58f(0x15b)](_0x3ab21e);const _0x40b6ac=await warehouse['aggregate']([{'$match':{'name':_0x3ab21e[_0x1cb58f(0x181)],'room':_0x3ab21e['room']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1cb58f(0x141)},'product_stock':{'$first':_0x1cb58f(0x18b)},'bay':{'$first':_0x1cb58f(0x160)},'bin':{'$first':_0x1cb58f(0x144)},'type':{'$first':_0x1cb58f(0x163)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x1cb58f(0x183)},'secondary_code':{'$first':_0x1cb58f(0x151)},'product_code':{'$first':_0x1cb58f(0x17c)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x1cb58f(0x162),'name':'Return\x20Goods','warehouse_category':_0x1cb58f(0x16e)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x1cb58f(0x15b)](_0x1cb58f(0x124),_0x40b6ac);if(_0x4ffeeb[0x0]['language']=='English\x20(US)'){var _0x9a70df=users[_0x1cb58f(0x15e)];console[_0x1cb58f(0x15b)](_0x9a70df);}else{if(_0x4ffeeb[0x0]['language']==_0x1cb58f(0x14b))var _0x9a70df=users[_0x1cb58f(0x14b)];else{if(_0x4ffeeb[0x0][_0x1cb58f(0x14c)]==_0x1cb58f(0x187))var _0x9a70df=users[_0x1cb58f(0x187)];else{if(_0x4ffeeb[0x0][_0x1cb58f(0x14c)]==_0x1cb58f(0x153))var _0x9a70df=users[_0x1cb58f(0x153)];else{if(_0x4ffeeb[0x0][_0x1cb58f(0x14c)]=='French')var _0x9a70df=users['French'];else{if(_0x4ffeeb[0x0]['language']=='Portuguese\x20(BR)')var _0x9a70df=users[_0x1cb58f(0x136)];else{if(_0x4ffeeb[0x0]['language']==_0x1cb58f(0x191))var _0x9a70df=users['Chinese'];else{if(_0x4ffeeb[0x0][_0x1cb58f(0x14c)]==_0x1cb58f(0x199))var _0x9a70df=users[_0x1cb58f(0x194)];}}}}}}}_0x2cdd3c[_0x1cb58f(0x15d)](_0x1cb58f(0x166),{'success':_0x2caff3['flash']('success'),'errors':_0x2caff3['flash'](_0x1cb58f(0x17e)),'role':_0x87c665,'master_shop':_0x4ffeeb,'profile':_0x436d79,'user':_0x3ab21e,'stock':_0x40b6ac,'product':_0x5872aa,'language':_0x9a70df,'warehouse':warehouse_data});}catch(_0x5f0c79){console[_0x1cb58f(0x15b)](_0x5f0c79);}}),router[a0_0x22ff24(0x18c)]('/view/:id',auth,async(_0x5d2dba,_0x2bff21)=>{var _0x51c1e3=a0_0x22ff24;try{const _0x1ee38c=_0x5d2dba[_0x51c1e3(0x196)]['id'];console[_0x51c1e3(0x15b)](_0x1ee38c);const _0x42e2f5=await purchases_return[_0x51c1e3(0x120)]({'invoice':_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x11f)]});console[_0x51c1e3(0x15b)](_0x51c1e3(0x169),_0x42e2f5);const _0x54e511=await warehouse['findOne']({'name':_0x42e2f5[_0x51c1e3(0x190)],'room':_0x42e2f5[_0x51c1e3(0x174)]});console[_0x51c1e3(0x15b)]('old_warehouse_data',_0x54e511);const {invoice:_0x7cb81a,suppliers:_0xc3d31d,date:_0x31c085,warehouse_name:_0x746eb6,product_name:_0x5d1d62,purchase_quantity:_0x2b9a7f,stocks:_0x588239,return_qty:_0x4bed9c,note:_0x24b254,Room_name:_0x4bf2fd,level:_0x4afdce,isle:_0x899459,pallet:_0x3f95c,to_warehouse_name:_0x35ccf2,to_Room_name:_0x1891cd}=_0x5d2dba[_0x51c1e3(0x155)];if(typeof _0x5d1d62==_0x51c1e3(0x146))var _0xa758b3=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x130)]],_0x3c8fa3=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x15a)]],_0x560916=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x13b)]],_0x4f6bfd=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x185)]],_0x4f06c0=[_0x5d2dba[_0x51c1e3(0x155)]['level']],_0x473467=[_0x5d2dba[_0x51c1e3(0x155)]['isle']],_0xd29426=[_0x5d2dba['body'][_0x51c1e3(0x123)]],_0x32e7f8=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x18d)]],_0x2614fa=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x139)]],_0x17bbb4=[_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x133)]],_0x2e8561=[_0x5d2dba['body'][_0x51c1e3(0x178)]];else var _0xa758b3=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x130)]],_0x3c8fa3=[..._0x5d2dba['body'][_0x51c1e3(0x15a)]],_0x560916=[..._0x5d2dba['body']['stocks']],_0x4f6bfd=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x185)]],_0x4f06c0=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x16d)]],_0x473467=[..._0x5d2dba['body'][_0x51c1e3(0x142)]],_0xd29426=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x123)]],_0x2614fa=[..._0x5d2dba['body'][_0x51c1e3(0x139)]],_0x17bbb4=[..._0x5d2dba[_0x51c1e3(0x155)]['primary_code_hide']],_0x2e8561=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x178)]],_0x32e7f8=[..._0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x18d)]];const _0x3015f7=_0xa758b3[_0x51c1e3(0x197)](_0x398349=>{return _0x398349={'product_name':_0x398349};});_0x3c8fa3[_0x51c1e3(0x176)]((_0x45ae1a,_0x271e67)=>{_0x3015f7[_0x271e67]['purchase_quantity']=_0x45ae1a;}),_0x560916['forEach']((_0xcafeb,_0x50f0ef)=>{var _0xe5633f=_0x51c1e3;_0x3015f7[_0x50f0ef][_0xe5633f(0x14f)]=_0xcafeb;}),_0x4f6bfd[_0x51c1e3(0x176)]((_0x529fcc,_0x1440d7)=>{_0x3015f7[_0x1440d7]['return_qty']=_0x529fcc;}),_0x4f06c0[_0x51c1e3(0x176)]((_0x15ded7,_0x59e38e)=>{var _0x40ef21=_0x51c1e3;_0x3015f7[_0x59e38e][_0x40ef21(0x138)]=_0x15ded7;}),_0x473467[_0x51c1e3(0x176)]((_0x2c9508,_0x8cefc5)=>{var _0x52b25c=_0x51c1e3;_0x3015f7[_0x8cefc5][_0x52b25c(0x184)]=_0x2c9508;}),_0xd29426[_0x51c1e3(0x176)]((_0x1e9878,_0x5fd94f)=>{var _0x40af2d=_0x51c1e3;_0x3015f7[_0x5fd94f][_0x40af2d(0x131)]=_0x1e9878;}),_0x2614fa[_0x51c1e3(0x176)]((_0x3a5403,_0x1889b3)=>{var _0x7fbbac=_0x51c1e3;_0x3015f7[_0x1889b3][_0x7fbbac(0x17a)]=_0x3a5403;}),_0x17bbb4[_0x51c1e3(0x176)]((_0x4eff3c,_0x56a633)=>{var _0xdf3b8f=_0x51c1e3;_0x3015f7[_0x56a633][_0xdf3b8f(0x18e)]=_0x4eff3c;}),_0x2e8561[_0x51c1e3(0x176)]((_0x1d762f,_0x5f8689)=>{var _0x39eb8f=_0x51c1e3;_0x3015f7[_0x5f8689][_0x39eb8f(0x18f)]=_0x1d762f;}),_0x32e7f8[_0x51c1e3(0x176)]((_0x30cecd,_0x1dfa57)=>{_0x3015f7[_0x1dfa57]['type']=_0x30cecd;});var _0x3001f3=0x0;_0x3015f7[_0x51c1e3(0x176)](_0x43417f=>{var _0x35068b=_0x51c1e3;console[_0x35068b(0x15b)](_0x35068b(0x12c),_0x43417f),(parseInt(_0x43417f[_0x35068b(0x15a)])<parseInt(_0x43417f[_0x35068b(0x185)])||parseInt(_0x43417f[_0x35068b(0x14f)])<parseInt(_0x43417f[_0x35068b(0x185)])||parseInt(_0x43417f[_0x35068b(0x185)])==0x0)&&_0x3001f3++;});if(_0x3001f3!=0x0)return _0x5d2dba[_0x51c1e3(0x12e)](_0x51c1e3(0x17e),_0x51c1e3(0x177)),_0x2bff21[_0x51c1e3(0x152)](_0x51c1e3(0x180));_0x42e2f5[_0x51c1e3(0x145)][_0x51c1e3(0x176)](_0x27ae02=>{var _0x54eaa7=_0x51c1e3;const _0x30e952=_0x54e511[_0x54eaa7(0x14d)][_0x54eaa7(0x197)](_0x303a0f=>{var _0x1b71e1=_0x54eaa7;_0x303a0f['product_name']==_0x27ae02[_0x1b71e1(0x130)]&&_0x303a0f[_0x1b71e1(0x131)]==_0x27ae02[_0x1b71e1(0x131)]&&_0x303a0f[_0x1b71e1(0x192)]==_0x27ae02[_0x1b71e1(0x192)]&&_0x303a0f[_0x1b71e1(0x184)]==_0x27ae02[_0x1b71e1(0x184)]&&_0x303a0f[_0x1b71e1(0x138)]==_0x27ae02[_0x1b71e1(0x138)]&&(_0x303a0f['product_stock']=parseInt(_0x303a0f['product_stock'])+parseInt(_0x27ae02[_0x1b71e1(0x185)]));});}),console[_0x51c1e3(0x15b)]('old_warehouse_data',_0x54e511),await _0x54e511[_0x51c1e3(0x16c)](),_0x42e2f5[_0x51c1e3(0x11f)]=_0x7cb81a,_0x42e2f5[_0x51c1e3(0x137)]=_0xc3d31d,_0x42e2f5[_0x51c1e3(0x143)]=_0x31c085,_0x42e2f5[_0x51c1e3(0x181)]=_0x746eb6,_0x42e2f5[_0x51c1e3(0x145)]=_0x3015f7,_0x42e2f5[_0x51c1e3(0x15f)]=_0x24b254,_0x42e2f5[_0x51c1e3(0x165)]=_0x4bf2fd,_0x42e2f5[_0x51c1e3(0x190)]=_0x35ccf2,_0x42e2f5[_0x51c1e3(0x174)]=_0x1891cd;const _0x261bc0=await _0x42e2f5[_0x51c1e3(0x16c)](),_0x4def4a=await purchases_return[_0x51c1e3(0x120)]({'invoice':_0x5d2dba[_0x51c1e3(0x155)][_0x51c1e3(0x11f)]}),_0x4dca76=await warehouse['findOne']({'name':_0x5d2dba['body'][_0x51c1e3(0x190)],'room':_0x5d2dba[_0x51c1e3(0x155)]['to_Room_name']});_0x4def4a[_0x51c1e3(0x145)]['forEach'](_0x54d71a=>{var _0x535e30=_0x51c1e3;_0x4dca76[_0x535e30(0x14d)][_0x535e30(0x197)](_0x3def27=>{var _0x3a9c07=_0x535e30;_0x3def27[_0x3a9c07(0x130)]==_0x54d71a['product_name']&&_0x3def27[_0x3a9c07(0x123)]==_0x54d71a[_0x3a9c07(0x123)]&&(_0x3def27[_0x3a9c07(0x16b)]=parseInt(_0x3def27[_0x3a9c07(0x16b)])-parseInt(_0x54d71a[_0x3a9c07(0x185)]),console[_0x3a9c07(0x15b)](_0x3a9c07(0x161),_0x54d71a[_0x3a9c07(0x185)]));});}),console['log']('final',_0x4dca76),await _0x4dca76[_0x51c1e3(0x16c)]();const _0x1f2d61=await s_payment_data[_0x51c1e3(0x120)]({'invoice':_0x5d2dba['body'][_0x51c1e3(0x11f)],'reason':_0x51c1e3(0x13a)});await _0x1f2d61[_0x51c1e3(0x16c)](),_0x5d2dba['flash'](_0x51c1e3(0x167),'purchase\x20return\x20successfully'),_0x2bff21[_0x51c1e3(0x152)](_0x51c1e3(0x195));}catch(_0x3e26c4){console['log'](_0x3e26c4),_0x2bff21[_0x51c1e3(0x127)](0xc8)[_0x51c1e3(0x193)]({'message':_0x3e26c4[_0x51c1e3(0x140)]});}}),router[a0_0x22ff24(0x148)]('/invoice/:id',auth,async(_0x2a9fd9,_0x2c39f4)=>{var _0x877c96=a0_0x22ff24;try{const {username:_0xdc637d,email:_0x299b47,role:_0x7342eb}=_0x2a9fd9[_0x877c96(0x13f)],_0x161daf=_0x2a9fd9[_0x877c96(0x13f)],_0x10a657=await profile[_0x877c96(0x120)]({'email':_0x161daf[_0x877c96(0x16a)]}),_0x1437a0=await master_shop[_0x877c96(0x198)]();console[_0x877c96(0x15b)]('master',_0x1437a0);const _0x1a888b=_0x2a9fd9[_0x877c96(0x196)]['id'],_0x4b7f18=await purchases_return[_0x877c96(0x154)](_0x1a888b);console[_0x877c96(0x15b)](_0x4b7f18);const _0x508f6c=await suppliers[_0x877c96(0x120)]({'name':_0x4b7f18[_0x877c96(0x137)]});console['log'](_0x508f6c);if(_0x1437a0[0x0]['language']==_0x877c96(0x172)){var _0xfab47c=users[_0x877c96(0x15e)];console[_0x877c96(0x15b)](_0xfab47c);}else{if(_0x1437a0[0x0][_0x877c96(0x14c)]==_0x877c96(0x14b))var _0xfab47c=users[_0x877c96(0x14b)];else{if(_0x1437a0[0x0][_0x877c96(0x14c)]=='German')var _0xfab47c=users['German'];else{if(_0x1437a0[0x0][_0x877c96(0x14c)]==_0x877c96(0x153))var _0xfab47c=users[_0x877c96(0x153)];else{if(_0x1437a0[0x0][_0x877c96(0x14c)]==_0x877c96(0x12a))var _0xfab47c=users[_0x877c96(0x12a)];else{if(_0x1437a0[0x0][_0x877c96(0x14c)]==_0x877c96(0x179))var _0xfab47c=users[_0x877c96(0x136)];else{if(_0x1437a0[0x0]['language']==_0x877c96(0x191))var _0xfab47c=users['Chinese'];else{if(_0x1437a0[0x0][_0x877c96(0x14c)]==_0x877c96(0x199))var _0xfab47c=users[_0x877c96(0x194)];}}}}}}}_0x2c39f4[_0x877c96(0x15d)](_0x877c96(0x15c),{'success':_0x2a9fd9[_0x877c96(0x12e)](_0x877c96(0x167)),'errors':_0x2a9fd9[_0x877c96(0x12e)]('errors'),'role':_0x161daf,'profile':_0x10a657,'master_shop':_0x1437a0,'supplier':_0x508f6c,'purchase':_0x4b7f18,'language':_0xfab47c});}catch(_0x42d027){console[_0x877c96(0x15b)](_0x42d027);}}),router['post'](a0_0x22ff24(0x171),auth,async(_0x5cd5f3,_0x359f37)=>{var _0x3011fc=a0_0x22ff24;try{const _0x4b5570=_0x5cd5f3[_0x3011fc(0x196)]['id'],{invoice:_0x3e8e4d,suppliers:_0x4d785e,receivable_amount:_0x6d1ac9,received_amount:_0x4692d9}=_0x5cd5f3[_0x3011fc(0x155)],_0x21bc61=await purchases_return[_0x3011fc(0x154)](_0x4b5570);console['log'](_0x21bc61);var _0x1d66e7=_0x6d1ac9-_0x4692d9;console[_0x3011fc(0x15b)](_0x4692d9),_0x21bc61[_0x3011fc(0x17f)]=parseFloat(_0x4692d9)+parseFloat(_0x21bc61[_0x3011fc(0x17f)]),_0x21bc61['due_amount']=_0x1d66e7,console[_0x3011fc(0x15b)](_0x21bc61);const _0x55d0e5=await _0x21bc61['save'](),_0x3828ce=await s_payment_data[_0x3011fc(0x120)]({'invoice':_0x5cd5f3[_0x3011fc(0x155)]['invoice'],'reason':'Purchase\x20Return'});_0x3828ce[_0x3011fc(0x164)]=_0x1d66e7,await _0x3828ce[_0x3011fc(0x16c)]();let _0x2ea2b0=new Date(),_0x5c2a1a=('0'+_0x2ea2b0[_0x3011fc(0x12d)]())['slice'](-0x2),_0x52b9db=('0'+(_0x2ea2b0[_0x3011fc(0x170)]()+0x1))[_0x3011fc(0x19a)](-0x2),_0x4aef36=_0x2ea2b0[_0x3011fc(0x122)](),_0x4ecc7b=_0x4aef36+'-'+_0x52b9db+'-'+_0x5c2a1a;const _0x24be89=new suppliers_payment({'invoice':_0x3e8e4d,'date':_0x4aef36+'-'+_0x52b9db+'-'+_0x5c2a1a,'suppliers':_0x4d785e,'reason':_0x3011fc(0x121),'amount':_0x4692d9}),_0x140c46=await _0x24be89[_0x3011fc(0x16c)]();_0x5cd5f3[_0x3011fc(0x12e)](_0x3011fc(0x167),'payment\x20successfull'),_0x359f37[_0x3011fc(0x152)](_0x3011fc(0x195));}catch(_0xacdd9){console['log'](_0xacdd9);}}),module[a0_0x22ff24(0x13e)]=router;