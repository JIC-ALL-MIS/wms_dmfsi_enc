var a0_0x1fddb9=a0_0xaf23;(function(_0x3dbb09,_0x1a5047){var _0x974358=a0_0xaf23,_0x4344fa=_0x3dbb09();while(!![]){try{var _0x3b7032=-parseInt(_0x974358(0x1d4))/0x1*(parseInt(_0x974358(0x1f5))/0x2)+parseInt(_0x974358(0x1d8))/0x3+-parseInt(_0x974358(0x1ac))/0x4*(-parseInt(_0x974358(0x18c))/0x5)+parseInt(_0x974358(0x1c1))/0x6*(-parseInt(_0x974358(0x1f8))/0x7)+parseInt(_0x974358(0x202))/0x8+parseInt(_0x974358(0x1b9))/0x9*(parseInt(_0x974358(0x1fe))/0xa)+-parseInt(_0x974358(0x1f6))/0xb*(-parseInt(_0x974358(0x1c4))/0xc);if(_0x3b7032===_0x1a5047)break;else _0x4344fa['push'](_0x4344fa['shift']());}catch(_0x4cadcf){_0x4344fa['push'](_0x4344fa['shift']());}}}(a0_0x87a0,0xeb2c4));const express=require(a0_0x1fddb9(0x1dd)),app=express(),router=express[a0_0x1fddb9(0x1ea)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x1fddb9(0x183));function a0_0xaf23(_0x4e667f,_0x2608a2){var _0x87a032=a0_0x87a0();return a0_0xaf23=function(_0xaf231e,_0x2eaff1){_0xaf231e=_0xaf231e-0x183;var _0x38ad17=_0x87a032[_0xaf231e];return _0x38ad17;},a0_0xaf23(_0x4e667f,_0x2608a2);}router[a0_0x1fddb9(0x201)](a0_0x1fddb9(0x1a0),auth,async(_0xa18390,_0x36e0fd)=>{var _0x306a84=a0_0x1fddb9;try{const {username:_0x2ed8f2,email:_0x41f3bf,role:_0x257444}=_0xa18390[_0x306a84(0x1eb)],_0x3a2860=_0xa18390['user'],_0x54946d=await profile[_0x306a84(0x1cf)]({'email':_0x3a2860[_0x306a84(0x198)]}),_0x5e8f94=await master_shop['find']();console['log'](_0x306a84(0x1e0),_0x5e8f94);const _0x18a501=await purchases_return['aggregate']([{'$lookup':{'from':_0x306a84(0x1a4),'localField':_0x306a84(0x1a4),'foreignField':_0x306a84(0x1fb),'as':_0x306a84(0x18e)}},{'$unwind':_0x306a84(0x1b2)},{'$unwind':_0x306a84(0x1b4)},{'$group':{'_id':_0x306a84(0x1f2),'invoice':{'$first':_0x306a84(0x1ca)},'date':{'$first':_0x306a84(0x1b8)},'suppliers':{'$first':'$suppliers'},'warehouse_name':{'$first':_0x306a84(0x1bc)},'product_name':{'$first':_0x306a84(0x19c)},'return_qty':{'$first':_0x306a84(0x1e2)},'price':{'$first':_0x306a84(0x1ba)},'total':{'$sum':'$return_product.total'},'note':{'$first':'$note'},'total_amount':{'$first':_0x306a84(0x1a9)},'discount':{'$first':_0x306a84(0x1ed)},'receivable':{'$first':_0x306a84(0x194)},'received':{'$first':_0x306a84(0x1c9)},'due_amount':{'$first':_0x306a84(0x1e9)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':'$supplier_docs.email'},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x306a84(0x1e2)}}}]);console['log'](_0x18a501);if(_0x5e8f94[0x0]['language']==_0x306a84(0x1d1)){var _0x5736b1=users['English'];console[_0x306a84(0x1aa)](_0x5736b1);}else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1af))var _0x5736b1=users[_0x306a84(0x1af)];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1a3))var _0x5736b1=users['German'];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1ff))var _0x5736b1=users[_0x306a84(0x1ff)];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1d9))var _0x5736b1=users['French'];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1c5))var _0x5736b1=users[_0x306a84(0x203)];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]=='Chinese')var _0x5736b1=users[_0x306a84(0x1e8)];else{if(_0x5e8f94[0x0][_0x306a84(0x188)]==_0x306a84(0x1ad))var _0x5736b1=users[_0x306a84(0x1be)];}}}}}}}_0x36e0fd[_0x306a84(0x1b7)](_0x306a84(0x1e3),{'success':_0xa18390[_0x306a84(0x206)](_0x306a84(0x1b5)),'errors':_0xa18390[_0x306a84(0x206)](_0x306a84(0x209)),'role':_0x3a2860,'profile':_0x54946d,'master_shop':_0x5e8f94,'user':_0x18a501,'language':_0x5736b1});}catch(_0x19c0c5){console['log'](_0x19c0c5);}}),router[a0_0x1fddb9(0x201)](a0_0x1fddb9(0x205),auth,async(_0x138d98,_0x458f8f)=>{var _0x2c9357=a0_0x1fddb9;try{const {username:_0x4ae5ab,email:_0x3fe209,role:_0x3ac17e}=_0x138d98[_0x2c9357(0x1eb)],_0x376bbb=_0x138d98[_0x2c9357(0x1eb)],_0x301c80=await profile[_0x2c9357(0x1cf)]({'email':_0x376bbb['email']}),_0x447ec7=await product['find']({}),_0x1eee52=await master_shop[_0x2c9357(0x191)]();console[_0x2c9357(0x1aa)](_0x2c9357(0x1e0),_0x1eee52),console[_0x2c9357(0x1aa)](_0x138d98[_0x2c9357(0x1c3)]);const _0x45461b=_0x138d98[_0x2c9357(0x1e4)]['id'],_0x254fbd=await purchases_return[_0x2c9357(0x1f4)](_0x45461b);console[_0x2c9357(0x1aa)](_0x254fbd);const _0x312740=await warehouse['aggregate']([{'$match':{'name':_0x254fbd[_0x2c9357(0x1b3)],'room':_0x254fbd['room']}},{'$unwind':_0x2c9357(0x1df)},{'$group':{'_id':_0x2c9357(0x1d2),'name':{'$first':_0x2c9357(0x1c0)},'product_stock':{'$first':_0x2c9357(0x1d7)},'bay':{'$first':_0x2c9357(0x1d3)},'bin':{'$first':_0x2c9357(0x1a8)},'type':{'$first':_0x2c9357(0x200)},'floorlevel':{'$first':_0x2c9357(0x1f1)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x2c9357(0x1ae)},'product_code':{'$first':_0x2c9357(0x1e1)},'storage':{'$first':_0x2c9357(0x1e5)},'rack':{'$first':_0x2c9357(0x18a)}}}]);warehouse_data=await warehouse[_0x2c9357(0x19f)]([{'$match':{'status':_0x2c9357(0x1c7),'name':_0x2c9357(0x1bb),'warehouse_category':_0x2c9357(0x19a)}},{'$group':{'_id':_0x2c9357(0x1ce),'name':{'$first':_0x2c9357(0x1ce)}}},{'$sort':{'name':0x1}}]),console[_0x2c9357(0x1aa)](_0x2c9357(0x1db),_0x312740);if(_0x1eee52[0x0][_0x2c9357(0x188)]=='English\x20(US)'){var _0x32b84f=users['English'];console[_0x2c9357(0x1aa)](_0x32b84f);}else{if(_0x1eee52[0x0][_0x2c9357(0x188)]==_0x2c9357(0x1af))var _0x32b84f=users[_0x2c9357(0x1af)];else{if(_0x1eee52[0x0][_0x2c9357(0x188)]=='German')var _0x32b84f=users[_0x2c9357(0x1a3)];else{if(_0x1eee52[0x0]['language']==_0x2c9357(0x1ff))var _0x32b84f=users[_0x2c9357(0x1ff)];else{if(_0x1eee52[0x0][_0x2c9357(0x188)]=='French')var _0x32b84f=users[_0x2c9357(0x1d9)];else{if(_0x1eee52[0x0][_0x2c9357(0x188)]==_0x2c9357(0x1c5))var _0x32b84f=users[_0x2c9357(0x203)];else{if(_0x1eee52[0x0]['language']==_0x2c9357(0x1e8))var _0x32b84f=users['Chinese'];else{if(_0x1eee52[0x0][_0x2c9357(0x188)]=='Arabic\x20(ae)')var _0x32b84f=users[_0x2c9357(0x1be)];}}}}}}}_0x458f8f[_0x2c9357(0x1b7)](_0x2c9357(0x189),{'success':_0x138d98['flash']('success'),'errors':_0x138d98[_0x2c9357(0x206)](_0x2c9357(0x209)),'role':_0x376bbb,'master_shop':_0x1eee52,'profile':_0x301c80,'user':_0x254fbd,'stock':_0x312740,'product':_0x447ec7,'language':_0x32b84f,'warehouse':warehouse_data});}catch(_0x400deb){console[_0x2c9357(0x1aa)](_0x400deb);}}),router[a0_0x1fddb9(0x192)](a0_0x1fddb9(0x205),auth,async(_0x5a5def,_0x1b42eb)=>{var _0x539e8c=a0_0x1fddb9;try{const _0x5ebe97=_0x5a5def['params']['id'];console[_0x539e8c(0x1aa)](_0x5ebe97);const _0x3a72e2=await purchases_return[_0x539e8c(0x1cf)]({'invoice':_0x5a5def[_0x539e8c(0x1c3)]['invoice']});console[_0x539e8c(0x1aa)](_0x539e8c(0x187),_0x3a72e2);const _0x445b5b=await warehouse[_0x539e8c(0x1cf)]({'name':_0x3a72e2[_0x539e8c(0x1fd)],'room':_0x3a72e2[_0x539e8c(0x207)]});console[_0x539e8c(0x1aa)]('old_warehouse_data',_0x445b5b);const {invoice:_0x23636e,suppliers:_0x510cdb,date:_0x9cd9a6,warehouse_name:_0x7e4de7,product_name:_0x3432b5,purchase_quantity:_0x1cb4d3,stocks:_0x4c09b2,return_qty:_0x59a4a7,note:_0x1eb876,Room_name:_0x33c8a3,level:_0x34dd57,isle:_0x468b24,pallet:_0x18f5df,to_warehouse_name:_0x4e3ecd,to_Room_name:_0x4cc432}=_0x5a5def[_0x539e8c(0x1c3)];if(typeof _0x3432b5==_0x539e8c(0x208))var _0xcdcc88=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x204)]],_0x474715=[_0x5a5def[_0x539e8c(0x1c3)]['purchase_quantity']],_0x105e00=[_0x5a5def['body']['stocks']],_0x1bda1d=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1bd)]],_0x14e59a=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x196)]],_0x21f526=[_0x5a5def['body'][_0x539e8c(0x199)]],_0x58f0c0=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x19b)]],_0x177373=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1a1)]],_0x13d974=[_0x5a5def[_0x539e8c(0x1c3)]['product_code_hide']],_0x284fc4=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1c8)]],_0x3a878e=[_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1ef)]];else var _0xcdcc88=[..._0x5a5def['body'][_0x539e8c(0x204)]],_0x474715=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1cb)]],_0x105e00=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1de)]],_0x1bda1d=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1bd)]],_0x14e59a=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x196)]],_0x21f526=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x199)]],_0x58f0c0=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x19b)]],_0x13d974=[..._0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1ab)]],_0x284fc4=[..._0x5a5def[_0x539e8c(0x1c3)]['primary_code_hide']],_0x3a878e=[..._0x5a5def[_0x539e8c(0x1c3)]['secondary_code_hide']],_0x177373=[..._0x5a5def[_0x539e8c(0x1c3)]['types']];const _0x97e382=_0xcdcc88['map'](_0x1c44b2=>{return _0x1c44b2={'product_name':_0x1c44b2};});_0x474715['forEach']((_0x4ad931,_0xf20a06)=>{var _0xd0fae8=_0x539e8c;_0x97e382[_0xf20a06][_0xd0fae8(0x1cb)]=_0x4ad931;}),_0x105e00[_0x539e8c(0x1d6)]((_0x46561f,_0x44bf3d)=>{var _0x29d534=_0x539e8c;_0x97e382[_0x44bf3d][_0x29d534(0x193)]=_0x46561f;}),_0x1bda1d[_0x539e8c(0x1d6)]((_0x495e9b,_0x39a895)=>{var _0x7b816b=_0x539e8c;_0x97e382[_0x39a895][_0x7b816b(0x1bd)]=_0x495e9b;}),_0x14e59a[_0x539e8c(0x1d6)]((_0x420cde,_0x366c6f)=>{var _0x441984=_0x539e8c;_0x97e382[_0x366c6f][_0x441984(0x197)]=_0x420cde;}),_0x21f526['forEach']((_0x44e947,_0x2528a1)=>{var _0x3d1381=_0x539e8c;_0x97e382[_0x2528a1][_0x3d1381(0x1c6)]=_0x44e947;}),_0x58f0c0['forEach']((_0xc3babf,_0xac6437)=>{var _0x5a0e1f=_0x539e8c;_0x97e382[_0xac6437][_0x5a0e1f(0x1bf)]=_0xc3babf;}),_0x13d974[_0x539e8c(0x1d6)]((_0x4e404e,_0x308909)=>{var _0x31b9d7=_0x539e8c;_0x97e382[_0x308909][_0x31b9d7(0x1d5)]=_0x4e404e;}),_0x284fc4[_0x539e8c(0x1d6)]((_0x33a556,_0x1bb09a)=>{var _0x397047=_0x539e8c;_0x97e382[_0x1bb09a][_0x397047(0x1e6)]=_0x33a556;}),_0x3a878e['forEach']((_0x202494,_0x337123)=>{var _0xd7331=_0x539e8c;_0x97e382[_0x337123][_0xd7331(0x186)]=_0x202494;}),_0x177373[_0x539e8c(0x1d6)]((_0x29171f,_0x1136ae)=>{var _0x5bc454=_0x539e8c;_0x97e382[_0x1136ae][_0x5bc454(0x185)]=_0x29171f;});var _0x4f2218=0x0;_0x97e382[_0x539e8c(0x1d6)](_0x3be8c2=>{var _0x230161=_0x539e8c;console[_0x230161(0x1aa)]('foreach\x20newproduct',_0x3be8c2),(parseInt(_0x3be8c2[_0x230161(0x1cb)])<parseInt(_0x3be8c2[_0x230161(0x1bd)])||parseInt(_0x3be8c2[_0x230161(0x193)])<parseInt(_0x3be8c2[_0x230161(0x1bd)])||parseInt(_0x3be8c2['return_qty'])==0x0)&&_0x4f2218++;});if(_0x4f2218!=0x0)return _0x5a5def[_0x539e8c(0x206)](_0x539e8c(0x209),_0x539e8c(0x1fa)),_0x1b42eb[_0x539e8c(0x1a6)](_0x539e8c(0x184));_0x3a72e2[_0x539e8c(0x1cd)][_0x539e8c(0x1d6)](_0x15bbb3=>{var _0x53c2e2=_0x539e8c;const _0x1b0053=_0x445b5b[_0x53c2e2(0x1b1)][_0x53c2e2(0x18d)](_0xfe2eef=>{var _0x3f4cb0=_0x53c2e2;_0xfe2eef[_0x3f4cb0(0x204)]==_0x15bbb3[_0x3f4cb0(0x204)]&&_0xfe2eef['floorlevel']==_0x15bbb3['floorlevel']&&_0xfe2eef[_0x3f4cb0(0x185)]==_0x15bbb3[_0x3f4cb0(0x185)]&&_0xfe2eef[_0x3f4cb0(0x1c6)]==_0x15bbb3[_0x3f4cb0(0x1c6)]&&_0xfe2eef[_0x3f4cb0(0x197)]==_0x15bbb3[_0x3f4cb0(0x197)]&&(_0xfe2eef[_0x3f4cb0(0x1f3)]=parseInt(_0xfe2eef['product_stock'])+parseInt(_0x15bbb3[_0x3f4cb0(0x1bd)]));});}),console[_0x539e8c(0x1aa)](_0x539e8c(0x20a),_0x445b5b),await _0x445b5b[_0x539e8c(0x1cc)](),_0x3a72e2['invoice']=_0x23636e,_0x3a72e2[_0x539e8c(0x1a4)]=_0x510cdb,_0x3a72e2[_0x539e8c(0x18f)]=_0x9cd9a6,_0x3a72e2[_0x539e8c(0x1b3)]=_0x7e4de7,_0x3a72e2[_0x539e8c(0x1cd)]=_0x97e382,_0x3a72e2[_0x539e8c(0x195)]=_0x1eb876,_0x3a72e2[_0x539e8c(0x19d)]=_0x33c8a3,_0x3a72e2[_0x539e8c(0x1fd)]=_0x4e3ecd,_0x3a72e2[_0x539e8c(0x207)]=_0x4cc432;const _0x2c7d40=await _0x3a72e2[_0x539e8c(0x1cc)](),_0x1fe4d4=await purchases_return[_0x539e8c(0x1cf)]({'invoice':_0x5a5def['body'][_0x539e8c(0x18b)]}),_0x547661=await warehouse[_0x539e8c(0x1cf)]({'name':_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x1fd)],'room':_0x5a5def['body'][_0x539e8c(0x19e)]});_0x1fe4d4[_0x539e8c(0x1cd)][_0x539e8c(0x1d6)](_0x23b5b4=>{var _0x502568=_0x539e8c;_0x547661[_0x502568(0x1b1)]['map'](_0x1db6ea=>{var _0x16da7a=_0x502568;_0x1db6ea[_0x16da7a(0x204)]==_0x23b5b4[_0x16da7a(0x204)]&&_0x1db6ea[_0x16da7a(0x19b)]==_0x23b5b4[_0x16da7a(0x19b)]&&(_0x1db6ea[_0x16da7a(0x1f3)]=parseInt(_0x1db6ea[_0x16da7a(0x1f3)])-parseInt(_0x23b5b4[_0x16da7a(0x1bd)]),console[_0x16da7a(0x1aa)](_0x16da7a(0x1a2),_0x23b5b4['return_qty']));});}),console[_0x539e8c(0x1aa)]('final',_0x547661),await _0x547661[_0x539e8c(0x1cc)]();const _0x45b16a=await s_payment_data[_0x539e8c(0x1cf)]({'invoice':_0x5a5def[_0x539e8c(0x1c3)][_0x539e8c(0x18b)],'reason':'Purchase\x20Return'});await _0x45b16a[_0x539e8c(0x1cc)](),_0x5a5def[_0x539e8c(0x206)](_0x539e8c(0x1b5),_0x539e8c(0x1b6)),_0x1b42eb[_0x539e8c(0x1a6)](_0x539e8c(0x1a5));}catch(_0x5446da){console['log'](_0x5446da),_0x1b42eb[_0x539e8c(0x1ec)](0xc8)[_0x539e8c(0x1d0)]({'message':_0x5446da[_0x539e8c(0x1f0)]});}}),router['get']('/invoice/:id',auth,async(_0x22cb39,_0x530568)=>{var _0x2f8736=a0_0x1fddb9;try{const {username:_0x28eeb1,email:_0x5e6966,role:_0x4789b9}=_0x22cb39[_0x2f8736(0x1eb)],_0x17d817=_0x22cb39[_0x2f8736(0x1eb)],_0x4688b8=await profile['findOne']({'email':_0x17d817['email']}),_0x30e54a=await master_shop['find']();console[_0x2f8736(0x1aa)](_0x2f8736(0x1e0),_0x30e54a);const _0x135fa7=_0x22cb39['params']['id'],_0x8f2868=await purchases_return['findById'](_0x135fa7);console[_0x2f8736(0x1aa)](_0x8f2868);const _0xd7dd5e=await suppliers[_0x2f8736(0x1cf)]({'name':_0x8f2868['suppliers']});console['log'](_0xd7dd5e);if(_0x30e54a[0x0][_0x2f8736(0x188)]=='English\x20(US)'){var _0x2fe4ef=users['English'];console[_0x2f8736(0x1aa)](_0x2fe4ef);}else{if(_0x30e54a[0x0][_0x2f8736(0x188)]==_0x2f8736(0x1af))var _0x2fe4ef=users['Hindi'];else{if(_0x30e54a[0x0][_0x2f8736(0x188)]==_0x2f8736(0x1a3))var _0x2fe4ef=users[_0x2f8736(0x1a3)];else{if(_0x30e54a[0x0][_0x2f8736(0x188)]=='Spanish')var _0x2fe4ef=users[_0x2f8736(0x1ff)];else{if(_0x30e54a[0x0][_0x2f8736(0x188)]==_0x2f8736(0x1d9))var _0x2fe4ef=users[_0x2f8736(0x1d9)];else{if(_0x30e54a[0x0]['language']==_0x2f8736(0x1c5))var _0x2fe4ef=users['Portuguese'];else{if(_0x30e54a[0x0][_0x2f8736(0x188)]==_0x2f8736(0x1e8))var _0x2fe4ef=users[_0x2f8736(0x1e8)];else{if(_0x30e54a[0x0][_0x2f8736(0x188)]==_0x2f8736(0x1ad))var _0x2fe4ef=users[_0x2f8736(0x1be)];}}}}}}}_0x530568[_0x2f8736(0x1b7)](_0x2f8736(0x1b0),{'success':_0x22cb39[_0x2f8736(0x206)](_0x2f8736(0x1b5)),'errors':_0x22cb39[_0x2f8736(0x206)](_0x2f8736(0x209)),'role':_0x17d817,'profile':_0x4688b8,'master_shop':_0x30e54a,'supplier':_0xd7dd5e,'purchase':_0x8f2868,'language':_0x2fe4ef});}catch(_0x53662e){console[_0x2f8736(0x1aa)](_0x53662e);}}),router['post'](a0_0x1fddb9(0x1f9),auth,async(_0x5afdd4,_0x1e9905)=>{var _0x58fc46=a0_0x1fddb9;try{const _0x2a34fb=_0x5afdd4['params']['id'],{invoice:_0x2629a4,suppliers:_0x862897,receivable_amount:_0x5cc23d,received_amount:_0x12743b}=_0x5afdd4[_0x58fc46(0x1c3)],_0x3dce1f=await purchases_return['findById'](_0x2a34fb);console[_0x58fc46(0x1aa)](_0x3dce1f);var _0x5e68ce=_0x5cc23d-_0x12743b;console[_0x58fc46(0x1aa)](_0x12743b),_0x3dce1f[_0x58fc46(0x1da)]=parseFloat(_0x12743b)+parseFloat(_0x3dce1f[_0x58fc46(0x1da)]),_0x3dce1f[_0x58fc46(0x1fc)]=_0x5e68ce,console[_0x58fc46(0x1aa)](_0x3dce1f);const _0x4e182e=await _0x3dce1f[_0x58fc46(0x1cc)](),_0x2481b1=await s_payment_data[_0x58fc46(0x1cf)]({'invoice':_0x5afdd4[_0x58fc46(0x1c3)][_0x58fc46(0x18b)],'reason':_0x58fc46(0x1ee)});_0x2481b1['amount']=_0x5e68ce,await _0x2481b1[_0x58fc46(0x1cc)]();let _0x292e99=new Date(),_0x21d562=('0'+_0x292e99[_0x58fc46(0x190)]())[_0x58fc46(0x1f7)](-0x2),_0x40d056=('0'+(_0x292e99[_0x58fc46(0x1c2)]()+0x1))['slice'](-0x2),_0x30e5fb=_0x292e99[_0x58fc46(0x1a7)](),_0x3f4aea=_0x30e5fb+'-'+_0x40d056+'-'+_0x21d562;const _0x84eb8d=new suppliers_payment({'invoice':_0x2629a4,'date':_0x30e5fb+'-'+_0x40d056+'-'+_0x21d562,'suppliers':_0x862897,'reason':_0x58fc46(0x1dc),'amount':_0x12743b}),_0x5a60bb=await _0x84eb8d[_0x58fc46(0x1cc)]();_0x5afdd4['flash'](_0x58fc46(0x1b5),'payment\x20successfull'),_0x1e9905['redirect'](_0x58fc46(0x1a5));}catch(_0x14c59f){console[_0x58fc46(0x1aa)](_0x14c59f);}}),module[a0_0x1fddb9(0x1e7)]=router;function a0_0x87a0(){var _0x4bfea8=['purchase_quantity','save','return_product','$name','findOne','json','English\x20(US)','$product_details._id','$product_details.bay','1277iPfgpB','product_code','forEach','$product_details.product_stock','818994mFxWju','French','received','stock_data','Received\x20For\x20Purchase\x20Return','express','stocks','$product_details','master','$product_details.product_code','$return_product.return_qty','purchases_return','params','$product_details.storage','primary_code','exports','Chinese','$due_amount','Router','user','status','$discount','Purchase\x20Return','secondary_code_hide','message','$product_details.floorlevel','$_id','product_stock','findById','804qMFYdi','16016kEyyOV','slice','154WRyGrP','/receive_payment/:id','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','name','due_amount','to_warehouse_name','3602230RPjInJ','Spanish','$product_details.type','get','3394784KMkpPN','Portuguese','product_name','/view/:id','flash','to_room','string','errors','old_warehouse_data','../public/language/languages.json','back','type','secondary_code','old_data','language','return_purchase_edit','$product_details.rack','invoice','215xZlUlf','map','supplier_docs','date','getDate','find','post','stock_quantity','$receivable','note','level','bay','email','isle','Raw\x20Materials','pallet','$return_product.product_name','room','to_Room_name','aggregate','/view','types','product_details.return_qtyproduct_details.return_qty','German','suppliers','/purchases_return/view','redirect','getFullYear','$product_details.bin','$total_amount','log','product_code_hide','27996TfYGIg','Arabic\x20(ae)','$product_details.secondary_code','Hindi','return_purchase_invoice','product_details','$return_product','warehouse_name','$supplier_docs','success','purchase\x20return\x20successfully','render','$date','9vngVNo','$return_product.price','Return\x20Goods','$warehouse_name','return_qty','Arabic','floorlevel','$product_details.product_name','216768iFfwSQ','getMonth','body','7524NTIQJg','Portuguese\x20(BR)','bin','Enabled','primary_code_hide','$received','$invoice'];a0_0x87a0=function(){return _0x4bfea8;};return a0_0x87a0();}