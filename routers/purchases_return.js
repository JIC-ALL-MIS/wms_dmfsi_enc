function a0_0x10da(_0x41b5ae,_0x4b7a39){var _0x134476=a0_0x1344();return a0_0x10da=function(_0x10da24,_0x3a515d){_0x10da24=_0x10da24-0x8c;var _0x471e16=_0x134476[_0x10da24];return _0x471e16;},a0_0x10da(_0x41b5ae,_0x4b7a39);}function a0_0x1344(){var _0x7926ed=['exports','old_data','/receive_payment/:id','amount','10220490nebotG','$product_details.storage','message','post','body','warehouse_name','$warehouse_name','product_name','primary_code','$product_details.secondary_code','product_code_hide','$product_details.rack','$return_product.return_qty','supplier_docs','product_stock','$_id','3961872BfpLtU','payment\x20successfull','params','English','find','pallet','json','English\x20(US)','$return_product.product_name','success','type','$received','Router','2379978nucrxl','Portuguese','string','foreach\x20newproduct','515771CWOdcy','note','$note','flash','$return_product.total','3330015rjwenA','$return_product.price','secondary_code','$name','/view','due_amount','room','floorlevel','invoice','language','product_details','master','$receivable','$product_details','findOne','suppliers','log','/invoice/:id','2948976XtgFHe','types','/purchases_return/view','$product_details.product_code','to_warehouse_name','return_purchase_edit','$total_amount','name','Arabic','bay','back','$due_amount','Raw\x20Materials','$return_product','get','$date','Chinese','Purchase\x20Return','final','to_room','$product_details.bin','$product_details.floorlevel','save','purchase\x20return\x20successfully','stock_data','getDate','166020pvkMqB','purchase_quantity','$supplier_docs','French','stock_quantity','German','Arabic\x20(ae)','secondary_code_hide','Spanish','express','level','Hindi','$invoice','isle','$product_details.bay','render','map','to_Room_name','purchases_return','$supplier_docs.address','primary_code_hide','2NpCUxu','forEach','return_qty','$product_details.primary_code','errors','$product_details.product_stock','return_product','product_code','$discount','redirect','product_details.return_qtyproduct_details.return_qty','bin','getFullYear','aggregate','$suppliers','$supplier_docs.mobile','$supplier_docs.email','../middleware/auth','email','$product_details.type','old_warehouse_data','28XGCotD','Return\x20Goods','Received\x20For\x20Purchase\x20Return','user','received','stocks','/view/:id','findById'];a0_0x1344=function(){return _0x7926ed;};return a0_0x1344();}var a0_0x3f3143=a0_0x10da;(function(_0x11f2fb,_0x3c73af){var _0x3f49b2=a0_0x10da,_0x4b61bd=_0x11f2fb();while(!![]){try{var _0x42dcf6=parseInt(_0x3f49b2(0xdb))/0x1*(parseInt(_0x3f49b2(0x99))/0x2)+-parseInt(_0x3f49b2(0xd7))/0x3+parseInt(_0x3f49b2(0xca))/0x4+parseInt(_0x3f49b2(0xe0))/0x5+parseInt(_0x3f49b2(0x10c))/0x6*(-parseInt(_0x3f49b2(0xae))/0x7)+parseInt(_0x3f49b2(0xf2))/0x8+-parseInt(_0x3f49b2(0xba))/0x9;if(_0x42dcf6===_0x3c73af)break;else _0x4b61bd['push'](_0x4b61bd['shift']());}catch(_0x35001f){_0x4b61bd['push'](_0x4b61bd['shift']());}}}(a0_0x1344,0x7a600));const express=require(a0_0x3f3143(0x8d)),app=express(),router=express[a0_0x3f3143(0xd6)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x3f3143(0xaa)),users=require('../public/language/languages.json');router['get'](a0_0x3f3143(0xe4),auth,async(_0x22a408,_0x284ab6)=>{var _0xe28151=a0_0x3f3143;try{const {username:_0x2350ac,email:_0x5af4d8,role:_0x40ada0}=_0x22a408['user'],_0x19ff3a=_0x22a408[_0xe28151(0xb1)],_0x44e747=await profile[_0xe28151(0xee)]({'email':_0x19ff3a[_0xe28151(0xab)]}),_0x565a69=await master_shop[_0xe28151(0xce)]();console['log'](_0xe28151(0xeb),_0x565a69);const _0x3bbd5e=await purchases_return[_0xe28151(0xa6)]([{'$lookup':{'from':_0xe28151(0xef),'localField':_0xe28151(0xef),'foreignField':_0xe28151(0xf9),'as':_0xe28151(0xc7)}},{'$unwind':_0xe28151(0xff)},{'$unwind':_0xe28151(0x10e)},{'$group':{'_id':_0xe28151(0xc9),'invoice':{'$first':_0xe28151(0x90)},'date':{'$first':_0xe28151(0x101)},'suppliers':{'$first':_0xe28151(0xa7)},'warehouse_name':{'$first':_0xe28151(0xc0)},'product_name':{'$first':_0xe28151(0xd2)},'return_qty':{'$first':_0xe28151(0xc6)},'price':{'$first':_0xe28151(0xe1)},'total':{'$sum':_0xe28151(0xdf)},'note':{'$first':_0xe28151(0xdd)},'total_amount':{'$first':_0xe28151(0xf8)},'discount':{'$first':_0xe28151(0xa1)},'receivable':{'$first':_0xe28151(0xec)},'received':{'$first':_0xe28151(0xd5)},'due_amount':{'$first':_0xe28151(0xfd)},'mobile':{'$first':_0xe28151(0xa8)},'email':{'$first':_0xe28151(0xa9)},'address':{'$first':_0xe28151(0x97)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0xe28151(0xf0)](_0x3bbd5e);if(_0x565a69[0x0][_0xe28151(0xe9)]=='English\x20(US)'){var _0x41e759=users[_0xe28151(0xcd)];console[_0xe28151(0xf0)](_0x41e759);}else{if(_0x565a69[0x0][_0xe28151(0xe9)]==_0xe28151(0x8f))var _0x41e759=users['Hindi'];else{if(_0x565a69[0x0]['language']==_0xe28151(0x111))var _0x41e759=users[_0xe28151(0x111)];else{if(_0x565a69[0x0][_0xe28151(0xe9)]==_0xe28151(0x8c))var _0x41e759=users[_0xe28151(0x8c)];else{if(_0x565a69[0x0][_0xe28151(0xe9)]==_0xe28151(0x10f))var _0x41e759=users[_0xe28151(0x10f)];else{if(_0x565a69[0x0]['language']=='Portuguese\x20(BR)')var _0x41e759=users[_0xe28151(0xd8)];else{if(_0x565a69[0x0][_0xe28151(0xe9)]==_0xe28151(0x102))var _0x41e759=users[_0xe28151(0x102)];else{if(_0x565a69[0x0][_0xe28151(0xe9)]=='Arabic\x20(ae)')var _0x41e759=users[_0xe28151(0xfa)];}}}}}}}_0x284ab6[_0xe28151(0x93)](_0xe28151(0x96),{'success':_0x22a408[_0xe28151(0xde)]('success'),'errors':_0x22a408[_0xe28151(0xde)](_0xe28151(0x9d)),'role':_0x19ff3a,'profile':_0x44e747,'master_shop':_0x565a69,'user':_0x3bbd5e,'language':_0x41e759});}catch(_0x57e40d){console[_0xe28151(0xf0)](_0x57e40d);}}),router[a0_0x3f3143(0x100)](a0_0x3f3143(0xb4),auth,async(_0x149fce,_0x1337eb)=>{var _0x17bd05=a0_0x3f3143;try{const {username:_0x414f66,email:_0x57a431,role:_0x367939}=_0x149fce['user'],_0x1108a0=_0x149fce[_0x17bd05(0xb1)],_0x1ef0fb=await profile[_0x17bd05(0xee)]({'email':_0x1108a0['email']}),_0x25d6bf=await product[_0x17bd05(0xce)]({}),_0x1da674=await master_shop[_0x17bd05(0xce)]();console[_0x17bd05(0xf0)](_0x17bd05(0xeb),_0x1da674),console['log'](_0x149fce['body']);const _0x3956ba=_0x149fce[_0x17bd05(0xcc)]['id'],_0x553a4a=await purchases_return[_0x17bd05(0xb5)](_0x3956ba);console[_0x17bd05(0xf0)](_0x553a4a);const _0x3eadc5=await warehouse[_0x17bd05(0xa6)]([{'$match':{'name':_0x553a4a[_0x17bd05(0xbf)],'room':_0x553a4a[_0x17bd05(0xe6)]}},{'$unwind':_0x17bd05(0xed)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x17bd05(0x9e)},'bay':{'$first':_0x17bd05(0x92)},'bin':{'$first':_0x17bd05(0x106)},'type':{'$first':_0x17bd05(0xac)},'floorlevel':{'$first':_0x17bd05(0x107)},'primary_code':{'$first':_0x17bd05(0x9c)},'secondary_code':{'$first':_0x17bd05(0xc3)},'product_code':{'$first':_0x17bd05(0xf5)},'storage':{'$first':_0x17bd05(0xbb)},'rack':{'$first':_0x17bd05(0xc5)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x17bd05(0xaf),'warehouse_category':_0x17bd05(0xfe)}},{'$group':{'_id':'$name','name':{'$first':_0x17bd05(0xe3)}}},{'$sort':{'name':0x1}}]),console[_0x17bd05(0xf0)](_0x17bd05(0x10a),_0x3eadc5);if(_0x1da674[0x0][_0x17bd05(0xe9)]==_0x17bd05(0xd1)){var _0x4b719f=users[_0x17bd05(0xcd)];console[_0x17bd05(0xf0)](_0x4b719f);}else{if(_0x1da674[0x0][_0x17bd05(0xe9)]==_0x17bd05(0x8f))var _0x4b719f=users[_0x17bd05(0x8f)];else{if(_0x1da674[0x0]['language']==_0x17bd05(0x111))var _0x4b719f=users[_0x17bd05(0x111)];else{if(_0x1da674[0x0][_0x17bd05(0xe9)]==_0x17bd05(0x8c))var _0x4b719f=users['Spanish'];else{if(_0x1da674[0x0][_0x17bd05(0xe9)]==_0x17bd05(0x10f))var _0x4b719f=users[_0x17bd05(0x10f)];else{if(_0x1da674[0x0][_0x17bd05(0xe9)]=='Portuguese\x20(BR)')var _0x4b719f=users[_0x17bd05(0xd8)];else{if(_0x1da674[0x0][_0x17bd05(0xe9)]=='Chinese')var _0x4b719f=users['Chinese'];else{if(_0x1da674[0x0][_0x17bd05(0xe9)]==_0x17bd05(0x112))var _0x4b719f=users[_0x17bd05(0xfa)];}}}}}}}_0x1337eb['render'](_0x17bd05(0xf7),{'success':_0x149fce['flash']('success'),'errors':_0x149fce[_0x17bd05(0xde)]('errors'),'role':_0x1108a0,'master_shop':_0x1da674,'profile':_0x1ef0fb,'user':_0x553a4a,'stock':_0x3eadc5,'product':_0x25d6bf,'language':_0x4b719f,'warehouse':warehouse_data});}catch(_0x405ab2){console[_0x17bd05(0xf0)](_0x405ab2);}}),router[a0_0x3f3143(0xbd)]('/view/:id',auth,async(_0x3f9344,_0x3fca9b)=>{var _0x1ba192=a0_0x3f3143;try{const _0x21aa79=_0x3f9344[_0x1ba192(0xcc)]['id'];console[_0x1ba192(0xf0)](_0x21aa79);const _0x2bf356=await purchases_return[_0x1ba192(0xee)]({'invoice':_0x3f9344['body'][_0x1ba192(0xe8)]});console[_0x1ba192(0xf0)](_0x1ba192(0xb7),_0x2bf356);const _0x16c813=await warehouse[_0x1ba192(0xee)]({'name':_0x2bf356[_0x1ba192(0xf6)],'room':_0x2bf356[_0x1ba192(0x105)]});console[_0x1ba192(0xf0)](_0x1ba192(0xad),_0x16c813);const {invoice:_0x2f8c10,suppliers:_0x4b42d6,date:_0x4756bf,warehouse_name:_0x1bc274,product_name:_0x5f2556,purchase_quantity:_0x4911c1,stocks:_0x4dc960,return_qty:_0x5e6c3b,note:_0x50fa5d,Room_name:_0x2e7ef9,level:_0x1fd96d,isle:_0x21f472,pallet:_0x2c2a14,to_warehouse_name:_0xe7549f,to_Room_name:_0x219a78}=_0x3f9344[_0x1ba192(0xbe)];if(typeof _0x5f2556==_0x1ba192(0xd9))var _0x5ca6f2=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xc1)]],_0x117edc=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x10d)]],_0xaacdfd=[_0x3f9344[_0x1ba192(0xbe)]['stocks']],_0xc4b88=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x9b)]],_0x21f636=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x8e)]],_0x4113e0=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x91)]],_0x53b846=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xcf)]],_0x342086=[_0x3f9344['body']['types']],_0xccb79f=[_0x3f9344['body'][_0x1ba192(0xc4)]],_0x2e885a=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x98)]],_0x53d7a3=[_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x113)]];else var _0x5ca6f2=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xc1)]],_0x117edc=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x10d)]],_0xaacdfd=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xb3)]],_0xc4b88=[..._0x3f9344['body'][_0x1ba192(0x9b)]],_0x21f636=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x8e)]],_0x4113e0=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x91)]],_0x53b846=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xcf)]],_0xccb79f=[..._0x3f9344['body']['product_code_hide']],_0x2e885a=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x98)]],_0x53d7a3=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x113)]],_0x342086=[..._0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xf3)]];const _0x4e2916=_0x5ca6f2[_0x1ba192(0x94)](_0x3fc959=>{return _0x3fc959={'product_name':_0x3fc959};});_0x117edc[_0x1ba192(0x9a)]((_0x5e0837,_0x2f74cf)=>{_0x4e2916[_0x2f74cf]['purchase_quantity']=_0x5e0837;}),_0xaacdfd['forEach']((_0xca451c,_0x5568ce)=>{_0x4e2916[_0x5568ce]['stock_quantity']=_0xca451c;}),_0xc4b88[_0x1ba192(0x9a)]((_0xf4513b,_0x10ba9d)=>{var _0x77bdd8=_0x1ba192;_0x4e2916[_0x10ba9d][_0x77bdd8(0x9b)]=_0xf4513b;}),_0x21f636[_0x1ba192(0x9a)]((_0x296a18,_0x2af1df)=>{var _0x4c3bf4=_0x1ba192;_0x4e2916[_0x2af1df][_0x4c3bf4(0xfb)]=_0x296a18;}),_0x4113e0[_0x1ba192(0x9a)]((_0x1a7630,_0x21e12a)=>{var _0x22f0f9=_0x1ba192;_0x4e2916[_0x21e12a][_0x22f0f9(0xa4)]=_0x1a7630;}),_0x53b846[_0x1ba192(0x9a)]((_0x428f9d,_0x512fca)=>{var _0x486073=_0x1ba192;_0x4e2916[_0x512fca][_0x486073(0xe7)]=_0x428f9d;}),_0xccb79f['forEach']((_0x313363,_0x51ee70)=>{var _0x2d066d=_0x1ba192;_0x4e2916[_0x51ee70][_0x2d066d(0xa0)]=_0x313363;}),_0x2e885a[_0x1ba192(0x9a)]((_0x326f75,_0xcf27e9)=>{var _0x2bc8e5=_0x1ba192;_0x4e2916[_0xcf27e9][_0x2bc8e5(0xc2)]=_0x326f75;}),_0x53d7a3[_0x1ba192(0x9a)]((_0xc112e1,_0x42741c)=>{var _0x535cb5=_0x1ba192;_0x4e2916[_0x42741c][_0x535cb5(0xe2)]=_0xc112e1;}),_0x342086['forEach']((_0x426054,_0x2689f8)=>{var _0x3055dc=_0x1ba192;_0x4e2916[_0x2689f8][_0x3055dc(0xd4)]=_0x426054;});var _0x2f5f9c=0x0;_0x4e2916['forEach'](_0x5b388d=>{var _0x2c0654=_0x1ba192;console[_0x2c0654(0xf0)](_0x2c0654(0xda),_0x5b388d),(parseInt(_0x5b388d[_0x2c0654(0x10d)])<parseInt(_0x5b388d[_0x2c0654(0x9b)])||parseInt(_0x5b388d[_0x2c0654(0x110)])<parseInt(_0x5b388d['return_qty'])||parseInt(_0x5b388d[_0x2c0654(0x9b)])==0x0)&&_0x2f5f9c++;});if(_0x2f5f9c!=0x0)return _0x3f9344[_0x1ba192(0xde)]('errors','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x3fca9b['redirect'](_0x1ba192(0xfc));_0x2bf356[_0x1ba192(0x9f)][_0x1ba192(0x9a)](_0x3ec9e5=>{var _0x232958=_0x1ba192;const _0x25cdc7=_0x16c813['product_details'][_0x232958(0x94)](_0x2dab0f=>{var _0x4c6d8a=_0x232958;_0x2dab0f['product_name']==_0x3ec9e5[_0x4c6d8a(0xc1)]&&_0x2dab0f['floorlevel']==_0x3ec9e5['floorlevel']&&_0x2dab0f[_0x4c6d8a(0xd4)]==_0x3ec9e5[_0x4c6d8a(0xd4)]&&_0x2dab0f[_0x4c6d8a(0xa4)]==_0x3ec9e5[_0x4c6d8a(0xa4)]&&_0x2dab0f[_0x4c6d8a(0xfb)]==_0x3ec9e5[_0x4c6d8a(0xfb)]&&(_0x2dab0f['product_stock']=parseInt(_0x2dab0f['product_stock'])+parseInt(_0x3ec9e5['return_qty']));});}),console['log'](_0x1ba192(0xad),_0x16c813),await _0x16c813[_0x1ba192(0x108)](),_0x2bf356[_0x1ba192(0xe8)]=_0x2f8c10,_0x2bf356[_0x1ba192(0xef)]=_0x4b42d6,_0x2bf356['date']=_0x4756bf,_0x2bf356[_0x1ba192(0xbf)]=_0x1bc274,_0x2bf356[_0x1ba192(0x9f)]=_0x4e2916,_0x2bf356[_0x1ba192(0xdc)]=_0x50fa5d,_0x2bf356[_0x1ba192(0xe6)]=_0x2e7ef9,_0x2bf356[_0x1ba192(0xf6)]=_0xe7549f,_0x2bf356[_0x1ba192(0x105)]=_0x219a78;const _0xf84627=await _0x2bf356['save'](),_0x21506c=await purchases_return[_0x1ba192(0xee)]({'invoice':_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xe8)]}),_0x1d0f53=await warehouse[_0x1ba192(0xee)]({'name':_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xf6)],'room':_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0x95)]});_0x21506c['return_product'][_0x1ba192(0x9a)](_0x573605=>{var _0x5a92aa=_0x1ba192;_0x1d0f53[_0x5a92aa(0xea)][_0x5a92aa(0x94)](_0x14faed=>{var _0x254429=_0x5a92aa;_0x14faed[_0x254429(0xc1)]==_0x573605[_0x254429(0xc1)]&&_0x14faed[_0x254429(0xcf)]==_0x573605['pallet']&&(_0x14faed[_0x254429(0xc8)]=parseInt(_0x14faed[_0x254429(0xc8)])-parseInt(_0x573605['return_qty']),console[_0x254429(0xf0)](_0x254429(0xa3),_0x573605[_0x254429(0x9b)]));});}),console['log'](_0x1ba192(0x104),_0x1d0f53),await _0x1d0f53['save']();const _0x2ea295=await s_payment_data[_0x1ba192(0xee)]({'invoice':_0x3f9344[_0x1ba192(0xbe)][_0x1ba192(0xe8)],'reason':_0x1ba192(0x103)});await _0x2ea295[_0x1ba192(0x108)](),_0x3f9344[_0x1ba192(0xde)]('success',_0x1ba192(0x109)),_0x3fca9b[_0x1ba192(0xa2)](_0x1ba192(0xf4));}catch(_0x3289ec){console['log'](_0x3289ec),_0x3fca9b['status'](0xc8)[_0x1ba192(0xd0)]({'message':_0x3289ec[_0x1ba192(0xbc)]});}}),router[a0_0x3f3143(0x100)](a0_0x3f3143(0xf1),auth,async(_0x21584f,_0x5eba6e)=>{var _0x524db3=a0_0x3f3143;try{const {username:_0x1d202d,email:_0x2684f6,role:_0x17817d}=_0x21584f['user'],_0x556e50=_0x21584f[_0x524db3(0xb1)],_0x2a0b66=await profile[_0x524db3(0xee)]({'email':_0x556e50['email']}),_0x57eba2=await master_shop['find']();console[_0x524db3(0xf0)](_0x524db3(0xeb),_0x57eba2);const _0x22fd07=_0x21584f[_0x524db3(0xcc)]['id'],_0x4c1120=await purchases_return[_0x524db3(0xb5)](_0x22fd07);console[_0x524db3(0xf0)](_0x4c1120);const _0x55bf53=await suppliers[_0x524db3(0xee)]({'name':_0x4c1120[_0x524db3(0xef)]});console[_0x524db3(0xf0)](_0x55bf53);if(_0x57eba2[0x0]['language']==_0x524db3(0xd1)){var _0x295402=users['English'];console[_0x524db3(0xf0)](_0x295402);}else{if(_0x57eba2[0x0][_0x524db3(0xe9)]=='Hindi')var _0x295402=users['Hindi'];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]=='German')var _0x295402=users[_0x524db3(0x111)];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]=='Spanish')var _0x295402=users[_0x524db3(0x8c)];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]==_0x524db3(0x10f))var _0x295402=users['French'];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]=='Portuguese\x20(BR)')var _0x295402=users[_0x524db3(0xd8)];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]==_0x524db3(0x102))var _0x295402=users['Chinese'];else{if(_0x57eba2[0x0][_0x524db3(0xe9)]==_0x524db3(0x112))var _0x295402=users[_0x524db3(0xfa)];}}}}}}}_0x5eba6e['render']('return_purchase_invoice',{'success':_0x21584f['flash'](_0x524db3(0xd3)),'errors':_0x21584f[_0x524db3(0xde)](_0x524db3(0x9d)),'role':_0x556e50,'profile':_0x2a0b66,'master_shop':_0x57eba2,'supplier':_0x55bf53,'purchase':_0x4c1120,'language':_0x295402});}catch(_0x126987){console[_0x524db3(0xf0)](_0x126987);}}),router['post'](a0_0x3f3143(0xb8),auth,async(_0x1dba18,_0x940cef)=>{var _0x478899=a0_0x3f3143;try{const _0x119bf5=_0x1dba18[_0x478899(0xcc)]['id'],{invoice:_0x5eeb31,suppliers:_0x471b73,receivable_amount:_0x3d5a67,received_amount:_0x474cf2}=_0x1dba18[_0x478899(0xbe)],_0x317c9c=await purchases_return['findById'](_0x119bf5);console[_0x478899(0xf0)](_0x317c9c);var _0x54543d=_0x3d5a67-_0x474cf2;console[_0x478899(0xf0)](_0x474cf2),_0x317c9c[_0x478899(0xb2)]=parseFloat(_0x474cf2)+parseFloat(_0x317c9c[_0x478899(0xb2)]),_0x317c9c[_0x478899(0xe5)]=_0x54543d,console[_0x478899(0xf0)](_0x317c9c);const _0x658bfd=await _0x317c9c[_0x478899(0x108)](),_0xcd7e45=await s_payment_data[_0x478899(0xee)]({'invoice':_0x1dba18[_0x478899(0xbe)][_0x478899(0xe8)],'reason':'Purchase\x20Return'});_0xcd7e45[_0x478899(0xb9)]=_0x54543d,await _0xcd7e45[_0x478899(0x108)]();let _0x5bb1da=new Date(),_0x194d92=('0'+_0x5bb1da[_0x478899(0x10b)]())['slice'](-0x2),_0x4a52cb=('0'+(_0x5bb1da['getMonth']()+0x1))['slice'](-0x2),_0x33c108=_0x5bb1da[_0x478899(0xa5)](),_0x4ae428=_0x33c108+'-'+_0x4a52cb+'-'+_0x194d92;const _0x3389e0=new suppliers_payment({'invoice':_0x5eeb31,'date':_0x33c108+'-'+_0x4a52cb+'-'+_0x194d92,'suppliers':_0x471b73,'reason':_0x478899(0xb0),'amount':_0x474cf2}),_0x133b08=await _0x3389e0[_0x478899(0x108)]();_0x1dba18[_0x478899(0xde)]('success',_0x478899(0xcb)),_0x940cef['redirect'](_0x478899(0xf4));}catch(_0xca25ae){console[_0x478899(0xf0)](_0xca25ae);}}),module[a0_0x3f3143(0xb6)]=router;