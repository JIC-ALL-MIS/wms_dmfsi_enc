var a0_0x121327=a0_0x5449;(function(_0x719124,_0x332980){var _0x4f1e26=a0_0x5449,_0xc85bef=_0x719124();while(!![]){try{var _0x3679ed=-parseInt(_0x4f1e26(0x1f4))/0x1+parseInt(_0x4f1e26(0x240))/0x2*(parseInt(_0x4f1e26(0x22e))/0x3)+-parseInt(_0x4f1e26(0x234))/0x4+parseInt(_0x4f1e26(0x24c))/0x5*(parseInt(_0x4f1e26(0x1f7))/0x6)+-parseInt(_0x4f1e26(0x227))/0x7*(-parseInt(_0x4f1e26(0x211))/0x8)+-parseInt(_0x4f1e26(0x1ee))/0x9*(parseInt(_0x4f1e26(0x1e7))/0xa)+-parseInt(_0x4f1e26(0x1df))/0xb;if(_0x3679ed===_0x332980)break;else _0xc85bef['push'](_0xc85bef['shift']());}catch(_0x473530){_0xc85bef['push'](_0xc85bef['shift']());}}}(a0_0x12fe,0x82858));function a0_0x5449(_0x164fc5,_0x1cd671){var _0x12fed4=a0_0x12fe();return a0_0x5449=function(_0x5449f5,_0x314747){_0x5449f5=_0x5449f5-0x1cf;var _0x52b04a=_0x12fed4[_0x5449f5];return _0x52b04a;},a0_0x5449(_0x164fc5,_0x1cd671);}function a0_0x12fe(){var _0x37109b=['product_code_hide','$product_details','69mUOHGs','log','getMonth','level','amount','pallet','314900DYvVhr','stocks','$_id','Router','foreach\x20newproduct','params','$product_details.type','primary_code_hide','type','exports','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','stock_quantity','78886jplqLj','$product_details.bay','aggregate','invoice','$return_product.return_qty','warehouse_name','$note','date','find','$product_details.product_code','Arabic\x20(ae)','product_details','4411535CnvYsl','purchases_return','Portuguese','product_code','English\x20(US)','back','redirect','secondary_code','Enabled','return_product','name','$suppliers','message','purchase\x20return\x20successfully','$supplier_docs','$product_details.product_name','bin','floorlevel','received','express','payment\x20successfull','render','8835574wtUfps','French','$return_product.price','final','Raw\x20Materials','old_warehouse_data','/purchases_return/view','secondary_code_hide','970Iltjoc','master','Arabic','primary_code','Chinese','old_data','map','45990fzrOws','product_stock','English','room','to_room','return_qty','407730nyFeQf','due_amount','user','6vHqSpg','$product_details._id','getFullYear','getDate','save','findOne','Purchase\x20Return','email','/view','$product_details.floorlevel','errors','../public/language/languages.json','json','language','bay','purchase_quantity','/view/:id','findById','Spanish','$supplier_docs.mobile','German','$product_details.storage','$supplier_docs.email','$name','success','product_name','33416FtGyZG','$product_details.rack','/invoice/:id','Hindi','string','$product_details.secondary_code','$return_product.product_name','Received\x20For\x20Purchase\x20Return','$product_details.bin','body','$product_details.product_stock','../models/all_models','$supplier_docs.address','$receivable','to_warehouse_name','product_details.return_qtyproduct_details.return_qty','to_Room_name','get','forEach','isle','Portuguese\x20(BR)','slice','889gikmPD','stock_data','$warehouse_name','flash','suppliers'];a0_0x12fe=function(){return _0x37109b;};return a0_0x12fe();}const express=require(a0_0x121327(0x1dc)),app=express(),router=express[a0_0x121327(0x237)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x121327(0x21c)),auth=require('../middleware/auth'),users=require(a0_0x121327(0x202));router[a0_0x121327(0x222)](a0_0x121327(0x1ff),auth,async(_0x2a398a,_0xe0b196)=>{var _0x5d8673=a0_0x121327;try{const {username:_0x525d5e,email:_0x3b0045,role:_0x1b1373}=_0x2a398a[_0x5d8673(0x1f6)],_0x216ebf=_0x2a398a[_0x5d8673(0x1f6)],_0x11e485=await profile['findOne']({'email':_0x216ebf['email']}),_0x11738c=await master_shop[_0x5d8673(0x248)]();console[_0x5d8673(0x22f)]('master',_0x11738c);const _0x52437f=await purchases_return[_0x5d8673(0x242)]([{'$lookup':{'from':_0x5d8673(0x22b),'localField':_0x5d8673(0x22b),'foreignField':_0x5d8673(0x1d3),'as':'supplier_docs'}},{'$unwind':'$return_product'},{'$unwind':_0x5d8673(0x1d7)},{'$group':{'_id':_0x5d8673(0x236),'invoice':{'$first':'$invoice'},'date':{'$first':'$date'},'suppliers':{'$first':_0x5d8673(0x1d4)},'warehouse_name':{'$first':_0x5d8673(0x229)},'product_name':{'$first':_0x5d8673(0x217)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x5d8673(0x1e1)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x5d8673(0x246)},'total_amount':{'$first':'$total_amount'},'discount':{'$first':'$discount'},'receivable':{'$first':_0x5d8673(0x21e)},'received':{'$first':'$received'},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':_0x5d8673(0x20a)},'email':{'$first':_0x5d8673(0x20d)},'address':{'$first':_0x5d8673(0x21d)},'return_sum_qty':{'$sum':_0x5d8673(0x244)}}}]);console[_0x5d8673(0x22f)](_0x52437f);if(_0x11738c[0x0][_0x5d8673(0x204)]==_0x5d8673(0x250)){var _0x57cc97=users['English'];console['log'](_0x57cc97);}else{if(_0x11738c[0x0][_0x5d8673(0x204)]==_0x5d8673(0x214))var _0x57cc97=users[_0x5d8673(0x214)];else{if(_0x11738c[0x0][_0x5d8673(0x204)]==_0x5d8673(0x20b))var _0x57cc97=users[_0x5d8673(0x20b)];else{if(_0x11738c[0x0][_0x5d8673(0x204)]=='Spanish')var _0x57cc97=users[_0x5d8673(0x209)];else{if(_0x11738c[0x0]['language']==_0x5d8673(0x1e0))var _0x57cc97=users['French'];else{if(_0x11738c[0x0]['language']=='Portuguese\x20(BR)')var _0x57cc97=users[_0x5d8673(0x24e)];else{if(_0x11738c[0x0][_0x5d8673(0x204)]=='Chinese')var _0x57cc97=users[_0x5d8673(0x1eb)];else{if(_0x11738c[0x0][_0x5d8673(0x204)]==_0x5d8673(0x24a))var _0x57cc97=users[_0x5d8673(0x1e9)];}}}}}}}_0xe0b196[_0x5d8673(0x1de)](_0x5d8673(0x24d),{'success':_0x2a398a['flash'](_0x5d8673(0x20f)),'errors':_0x2a398a['flash'](_0x5d8673(0x201)),'role':_0x216ebf,'profile':_0x11e485,'master_shop':_0x11738c,'user':_0x52437f,'language':_0x57cc97});}catch(_0x3d8984){console[_0x5d8673(0x22f)](_0x3d8984);}}),router[a0_0x121327(0x222)](a0_0x121327(0x207),auth,async(_0x405be0,_0x102947)=>{var _0x2d17fe=a0_0x121327;try{const {username:_0x669d14,email:_0x4fffd4,role:_0x50638a}=_0x405be0[_0x2d17fe(0x1f6)],_0xf952b0=_0x405be0[_0x2d17fe(0x1f6)],_0x17ff23=await profile['findOne']({'email':_0xf952b0[_0x2d17fe(0x1fe)]}),_0x27f151=await product[_0x2d17fe(0x248)]({}),_0x3e41d4=await master_shop['find']();console[_0x2d17fe(0x22f)](_0x2d17fe(0x1e8),_0x3e41d4),console[_0x2d17fe(0x22f)](_0x405be0['body']);const _0x4c1089=_0x405be0[_0x2d17fe(0x239)]['id'],_0x1cd78f=await purchases_return['findById'](_0x4c1089);console[_0x2d17fe(0x22f)](_0x1cd78f);const _0x1c7bd5=await warehouse[_0x2d17fe(0x242)]([{'$match':{'name':_0x1cd78f['warehouse_name'],'room':_0x1cd78f[_0x2d17fe(0x1f1)]}},{'$unwind':_0x2d17fe(0x22d)},{'$group':{'_id':_0x2d17fe(0x1f8),'name':{'$first':_0x2d17fe(0x1d8)},'product_stock':{'$first':_0x2d17fe(0x21b)},'bay':{'$first':_0x2d17fe(0x241)},'bin':{'$first':_0x2d17fe(0x219)},'type':{'$first':_0x2d17fe(0x23a)},'floorlevel':{'$first':_0x2d17fe(0x200)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x2d17fe(0x216)},'product_code':{'$first':_0x2d17fe(0x249)},'storage':{'$first':_0x2d17fe(0x20c)},'rack':{'$first':_0x2d17fe(0x212)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x2d17fe(0x1d1),'name':'Return\x20Goods','warehouse_category':_0x2d17fe(0x1e3)}},{'$group':{'_id':'$name','name':{'$first':_0x2d17fe(0x20e)}}},{'$sort':{'name':0x1}}]),console[_0x2d17fe(0x22f)](_0x2d17fe(0x228),_0x1c7bd5);if(_0x3e41d4[0x0][_0x2d17fe(0x204)]==_0x2d17fe(0x250)){var _0x206a3a=users[_0x2d17fe(0x1f0)];console[_0x2d17fe(0x22f)](_0x206a3a);}else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]==_0x2d17fe(0x214))var _0x206a3a=users[_0x2d17fe(0x214)];else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]=='German')var _0x206a3a=users[_0x2d17fe(0x20b)];else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]==_0x2d17fe(0x209))var _0x206a3a=users['Spanish'];else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]==_0x2d17fe(0x1e0))var _0x206a3a=users[_0x2d17fe(0x1e0)];else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]==_0x2d17fe(0x225))var _0x206a3a=users[_0x2d17fe(0x24e)];else{if(_0x3e41d4[0x0][_0x2d17fe(0x204)]=='Chinese')var _0x206a3a=users[_0x2d17fe(0x1eb)];else{if(_0x3e41d4[0x0]['language']=='Arabic\x20(ae)')var _0x206a3a=users[_0x2d17fe(0x1e9)];}}}}}}}_0x102947['render']('return_purchase_edit',{'success':_0x405be0[_0x2d17fe(0x22a)](_0x2d17fe(0x20f)),'errors':_0x405be0[_0x2d17fe(0x22a)]('errors'),'role':_0xf952b0,'master_shop':_0x3e41d4,'profile':_0x17ff23,'user':_0x1cd78f,'stock':_0x1c7bd5,'product':_0x27f151,'language':_0x206a3a,'warehouse':warehouse_data});}catch(_0x1bdc74){console[_0x2d17fe(0x22f)](_0x1bdc74);}}),router['post'](a0_0x121327(0x207),auth,async(_0x3c6c5d,_0x5f577b)=>{var _0x4119e3=a0_0x121327;try{const _0x277206=_0x3c6c5d[_0x4119e3(0x239)]['id'];console[_0x4119e3(0x22f)](_0x277206);const _0x412d76=await purchases_return[_0x4119e3(0x1fc)]({'invoice':_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x243)]});console[_0x4119e3(0x22f)](_0x4119e3(0x1ec),_0x412d76);const _0xbd9449=await warehouse[_0x4119e3(0x1fc)]({'name':_0x412d76[_0x4119e3(0x21f)],'room':_0x412d76['to_room']});console[_0x4119e3(0x22f)]('old_warehouse_data',_0xbd9449);const {invoice:_0x4cab5d,suppliers:_0x1fba9e,date:_0x4da73b,warehouse_name:_0x2a2f3b,product_name:_0xcfc7e5,purchase_quantity:_0x4a50a5,stocks:_0x3a0930,return_qty:_0x147db5,note:_0x5743a8,Room_name:_0x48b303,level:_0xe4361,isle:_0x265ef2,pallet:_0x188cf4,to_warehouse_name:_0xb195ff,to_Room_name:_0x38fb3e}=_0x3c6c5d[_0x4119e3(0x21a)];if(typeof _0xcfc7e5==_0x4119e3(0x215))var _0xbfe7f5=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x210)]],_0xc7afa=[_0x3c6c5d[_0x4119e3(0x21a)]['purchase_quantity']],_0x436c52=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x235)]],_0x55ee82=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x1f3)]],_0x59c5a8=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x231)]],_0x4deb9f=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x224)]],_0xa5b888=[_0x3c6c5d[_0x4119e3(0x21a)]['pallet']],_0x510491=[_0x3c6c5d['body']['types']],_0x5a7814=[_0x3c6c5d['body'][_0x4119e3(0x22c)]],_0x52cd65=[_0x3c6c5d['body'][_0x4119e3(0x23b)]],_0x4c8050=[_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x1e6)]];else var _0xbfe7f5=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x210)]],_0xc7afa=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x206)]],_0x436c52=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x235)]],_0x55ee82=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x1f3)]],_0x59c5a8=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x231)]],_0x4deb9f=[..._0x3c6c5d['body'][_0x4119e3(0x224)]],_0xa5b888=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x233)]],_0x5a7814=[..._0x3c6c5d['body']['product_code_hide']],_0x52cd65=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x23b)]],_0x4c8050=[..._0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x1e6)]],_0x510491=[..._0x3c6c5d[_0x4119e3(0x21a)]['types']];const _0x19147f=_0xbfe7f5[_0x4119e3(0x1ed)](_0x1817dc=>{return _0x1817dc={'product_name':_0x1817dc};});_0xc7afa['forEach']((_0x448799,_0x4899cb)=>{var _0x5a7e55=_0x4119e3;_0x19147f[_0x4899cb][_0x5a7e55(0x206)]=_0x448799;}),_0x436c52[_0x4119e3(0x223)]((_0x3526fb,_0x24d2e9)=>{var _0x1881ab=_0x4119e3;_0x19147f[_0x24d2e9][_0x1881ab(0x23f)]=_0x3526fb;}),_0x55ee82[_0x4119e3(0x223)]((_0x81a98d,_0x82ca11)=>{_0x19147f[_0x82ca11]['return_qty']=_0x81a98d;}),_0x59c5a8[_0x4119e3(0x223)]((_0x43189b,_0x6110a5)=>{_0x19147f[_0x6110a5]['bay']=_0x43189b;}),_0x4deb9f[_0x4119e3(0x223)]((_0x167ea7,_0x48cc9f)=>{var _0x45b214=_0x4119e3;_0x19147f[_0x48cc9f][_0x45b214(0x1d9)]=_0x167ea7;}),_0xa5b888[_0x4119e3(0x223)]((_0x1d6aa4,_0x16c9d6)=>{_0x19147f[_0x16c9d6]['floorlevel']=_0x1d6aa4;}),_0x5a7814[_0x4119e3(0x223)]((_0x5e81d1,_0x2bfbcc)=>{var _0x55a2c5=_0x4119e3;_0x19147f[_0x2bfbcc][_0x55a2c5(0x24f)]=_0x5e81d1;}),_0x52cd65[_0x4119e3(0x223)]((_0x2c58ac,_0x4f41e8)=>{var _0x28871e=_0x4119e3;_0x19147f[_0x4f41e8][_0x28871e(0x1ea)]=_0x2c58ac;}),_0x4c8050['forEach']((_0x240933,_0x19ba56)=>{var _0x36e4af=_0x4119e3;_0x19147f[_0x19ba56][_0x36e4af(0x1d0)]=_0x240933;}),_0x510491[_0x4119e3(0x223)]((_0x2cecdc,_0x54d1b0)=>{var _0x254bb2=_0x4119e3;_0x19147f[_0x54d1b0][_0x254bb2(0x23c)]=_0x2cecdc;});var _0xcd11ac=0x0;_0x19147f['forEach'](_0x38fd2f=>{var _0x6f865f=_0x4119e3;console['log'](_0x6f865f(0x238),_0x38fd2f),(parseInt(_0x38fd2f[_0x6f865f(0x206)])<parseInt(_0x38fd2f['return_qty'])||parseInt(_0x38fd2f[_0x6f865f(0x23f)])<parseInt(_0x38fd2f['return_qty'])||parseInt(_0x38fd2f['return_qty'])==0x0)&&_0xcd11ac++;});if(_0xcd11ac!=0x0)return _0x3c6c5d[_0x4119e3(0x22a)](_0x4119e3(0x201),_0x4119e3(0x23e)),_0x5f577b[_0x4119e3(0x1cf)](_0x4119e3(0x251));_0x412d76[_0x4119e3(0x1d2)]['forEach'](_0x17291a=>{var _0x1c2123=_0x4119e3;const _0x29decb=_0xbd9449[_0x1c2123(0x24b)][_0x1c2123(0x1ed)](_0x2002e3=>{var _0x50abe9=_0x1c2123;_0x2002e3[_0x50abe9(0x210)]==_0x17291a[_0x50abe9(0x210)]&&_0x2002e3[_0x50abe9(0x1da)]==_0x17291a[_0x50abe9(0x1da)]&&_0x2002e3[_0x50abe9(0x23c)]==_0x17291a['type']&&_0x2002e3[_0x50abe9(0x1d9)]==_0x17291a[_0x50abe9(0x1d9)]&&_0x2002e3[_0x50abe9(0x205)]==_0x17291a[_0x50abe9(0x205)]&&(_0x2002e3[_0x50abe9(0x1ef)]=parseInt(_0x2002e3[_0x50abe9(0x1ef)])+parseInt(_0x17291a[_0x50abe9(0x1f3)]));});}),console[_0x4119e3(0x22f)](_0x4119e3(0x1e4),_0xbd9449),await _0xbd9449['save'](),_0x412d76[_0x4119e3(0x243)]=_0x4cab5d,_0x412d76[_0x4119e3(0x22b)]=_0x1fba9e,_0x412d76[_0x4119e3(0x247)]=_0x4da73b,_0x412d76[_0x4119e3(0x245)]=_0x2a2f3b,_0x412d76[_0x4119e3(0x1d2)]=_0x19147f,_0x412d76['note']=_0x5743a8,_0x412d76[_0x4119e3(0x1f1)]=_0x48b303,_0x412d76[_0x4119e3(0x21f)]=_0xb195ff,_0x412d76[_0x4119e3(0x1f2)]=_0x38fb3e;const _0x1d368e=await _0x412d76[_0x4119e3(0x1fb)](),_0x51d8a4=await purchases_return[_0x4119e3(0x1fc)]({'invoice':_0x3c6c5d['body'][_0x4119e3(0x243)]}),_0x2b198f=await warehouse['findOne']({'name':_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x21f)],'room':_0x3c6c5d[_0x4119e3(0x21a)][_0x4119e3(0x221)]});_0x51d8a4['return_product'][_0x4119e3(0x223)](_0x33e0f0=>{_0x2b198f['product_details']['map'](_0xafb732=>{var _0x4b3f55=a0_0x5449;_0xafb732[_0x4b3f55(0x210)]==_0x33e0f0['product_name']&&_0xafb732[_0x4b3f55(0x233)]==_0x33e0f0[_0x4b3f55(0x233)]&&(_0xafb732['product_stock']=parseInt(_0xafb732[_0x4b3f55(0x1ef)])-parseInt(_0x33e0f0['return_qty']),console[_0x4b3f55(0x22f)](_0x4b3f55(0x220),_0x33e0f0[_0x4b3f55(0x1f3)]));});}),console[_0x4119e3(0x22f)](_0x4119e3(0x1e2),_0x2b198f),await _0x2b198f[_0x4119e3(0x1fb)]();const _0x323496=await s_payment_data[_0x4119e3(0x1fc)]({'invoice':_0x3c6c5d[_0x4119e3(0x21a)]['invoice'],'reason':'Purchase\x20Return'});await _0x323496['save'](),_0x3c6c5d['flash']('success',_0x4119e3(0x1d6)),_0x5f577b[_0x4119e3(0x1cf)](_0x4119e3(0x1e5));}catch(_0x4f55b9){console[_0x4119e3(0x22f)](_0x4f55b9),_0x5f577b['status'](0xc8)[_0x4119e3(0x203)]({'message':_0x4f55b9[_0x4119e3(0x1d5)]});}}),router[a0_0x121327(0x222)](a0_0x121327(0x213),auth,async(_0x501153,_0x14be7c)=>{var _0x13a7bb=a0_0x121327;try{const {username:_0x14a600,email:_0x2f0d5a,role:_0x13b07c}=_0x501153[_0x13a7bb(0x1f6)],_0x56dc5a=_0x501153['user'],_0x19fdc7=await profile[_0x13a7bb(0x1fc)]({'email':_0x56dc5a['email']}),_0x4e5689=await master_shop['find']();console[_0x13a7bb(0x22f)](_0x13a7bb(0x1e8),_0x4e5689);const _0x2fb0a5=_0x501153[_0x13a7bb(0x239)]['id'],_0x1f2713=await purchases_return['findById'](_0x2fb0a5);console[_0x13a7bb(0x22f)](_0x1f2713);const _0x1985e9=await suppliers[_0x13a7bb(0x1fc)]({'name':_0x1f2713['suppliers']});console['log'](_0x1985e9);if(_0x4e5689[0x0][_0x13a7bb(0x204)]==_0x13a7bb(0x250)){var _0x30e291=users[_0x13a7bb(0x1f0)];console[_0x13a7bb(0x22f)](_0x30e291);}else{if(_0x4e5689[0x0][_0x13a7bb(0x204)]==_0x13a7bb(0x214))var _0x30e291=users[_0x13a7bb(0x214)];else{if(_0x4e5689[0x0][_0x13a7bb(0x204)]==_0x13a7bb(0x20b))var _0x30e291=users[_0x13a7bb(0x20b)];else{if(_0x4e5689[0x0][_0x13a7bb(0x204)]==_0x13a7bb(0x209))var _0x30e291=users[_0x13a7bb(0x209)];else{if(_0x4e5689[0x0][_0x13a7bb(0x204)]=='French')var _0x30e291=users['French'];else{if(_0x4e5689[0x0]['language']=='Portuguese\x20(BR)')var _0x30e291=users[_0x13a7bb(0x24e)];else{if(_0x4e5689[0x0]['language']=='Chinese')var _0x30e291=users[_0x13a7bb(0x1eb)];else{if(_0x4e5689[0x0]['language']==_0x13a7bb(0x24a))var _0x30e291=users[_0x13a7bb(0x1e9)];}}}}}}}_0x14be7c['render']('return_purchase_invoice',{'success':_0x501153[_0x13a7bb(0x22a)](_0x13a7bb(0x20f)),'errors':_0x501153[_0x13a7bb(0x22a)](_0x13a7bb(0x201)),'role':_0x56dc5a,'profile':_0x19fdc7,'master_shop':_0x4e5689,'supplier':_0x1985e9,'purchase':_0x1f2713,'language':_0x30e291});}catch(_0x626207){console[_0x13a7bb(0x22f)](_0x626207);}}),router['post']('/receive_payment/:id',auth,async(_0x1b8a5c,_0x2e5720)=>{var _0x146e28=a0_0x121327;try{const _0x5ece93=_0x1b8a5c[_0x146e28(0x239)]['id'],{invoice:_0x44aa05,suppliers:_0x350670,receivable_amount:_0x8c0ff,received_amount:_0x388e91}=_0x1b8a5c[_0x146e28(0x21a)],_0x154543=await purchases_return[_0x146e28(0x208)](_0x5ece93);console[_0x146e28(0x22f)](_0x154543);var _0x5c0bcc=_0x8c0ff-_0x388e91;console[_0x146e28(0x22f)](_0x388e91),_0x154543[_0x146e28(0x1db)]=parseFloat(_0x388e91)+parseFloat(_0x154543[_0x146e28(0x1db)]),_0x154543[_0x146e28(0x1f5)]=_0x5c0bcc,console['log'](_0x154543);const _0x5b1b2c=await _0x154543[_0x146e28(0x1fb)](),_0x4a6f70=await s_payment_data[_0x146e28(0x1fc)]({'invoice':_0x1b8a5c[_0x146e28(0x21a)][_0x146e28(0x243)],'reason':_0x146e28(0x1fd)});_0x4a6f70[_0x146e28(0x232)]=_0x5c0bcc,await _0x4a6f70[_0x146e28(0x1fb)]();let _0x488781=new Date(),_0x52d465=('0'+_0x488781[_0x146e28(0x1fa)]())[_0x146e28(0x226)](-0x2),_0x143c2d=('0'+(_0x488781[_0x146e28(0x230)]()+0x1))['slice'](-0x2),_0x5cb04d=_0x488781[_0x146e28(0x1f9)](),_0x51b151=_0x5cb04d+'-'+_0x143c2d+'-'+_0x52d465;const _0x238b80=new suppliers_payment({'invoice':_0x44aa05,'date':_0x5cb04d+'-'+_0x143c2d+'-'+_0x52d465,'suppliers':_0x350670,'reason':_0x146e28(0x218),'amount':_0x388e91}),_0x221458=await _0x238b80[_0x146e28(0x1fb)]();_0x1b8a5c[_0x146e28(0x22a)](_0x146e28(0x20f),_0x146e28(0x1dd)),_0x2e5720['redirect'](_0x146e28(0x1e5));}catch(_0xe06dd9){console['log'](_0xe06dd9);}}),module[a0_0x121327(0x23d)]=router;