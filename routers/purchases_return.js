function a0_0x34bb(_0x4d98ab,_0x1f35f3){var _0xe6f46d=a0_0xe6f4();return a0_0x34bb=function(_0x34bb3c,_0x54a60b){_0x34bb3c=_0x34bb3c-0x143;var _0xe66a97=_0xe6f46d[_0x34bb3c];return _0xe66a97;},a0_0x34bb(_0x4d98ab,_0x1f35f3);}var a0_0x472e5d=a0_0x34bb;(function(_0x39f074,_0x41dd0f){var _0x9ce4ab=a0_0x34bb,_0x54d61f=_0x39f074();while(!![]){try{var _0x1914e3=parseInt(_0x9ce4ab(0x1b3))/0x1*(parseInt(_0x9ce4ab(0x14c))/0x2)+parseInt(_0x9ce4ab(0x17b))/0x3+parseInt(_0x9ce4ab(0x199))/0x4*(parseInt(_0x9ce4ab(0x180))/0x5)+-parseInt(_0x9ce4ab(0x186))/0x6+-parseInt(_0x9ce4ab(0x182))/0x7+parseInt(_0x9ce4ab(0x1b8))/0x8*(parseInt(_0x9ce4ab(0x16f))/0x9)+-parseInt(_0x9ce4ab(0x174))/0xa*(parseInt(_0x9ce4ab(0x1b4))/0xb);if(_0x1914e3===_0x41dd0f)break;else _0x54d61f['push'](_0x54d61f['shift']());}catch(_0x248bdf){_0x54d61f['push'](_0x54d61f['shift']());}}}(a0_0xe6f4,0xbc52a));function a0_0xe6f4(){var _0x559a0c=['product_code_hide','$product_details.storage','find','$return_product.return_qty','user','$return_product.product_name','Portuguese\x20(BR)','types','$due_amount','suppliers','bin','$receivable','errors','$product_details.bay','received','244kRNHvT','$return_product.total','due_amount','product_stock','$product_details.product_code','back','warehouse_name','Arabic','getMonth','email','$return_product','return_product','$product_details.secondary_code','stock_data','flash','$product_details.rack','primary_code','primary_code_hide','get','../public/language/languages.json','$supplier_docs.address','post','$supplier_docs','params','secondary_code_hide','product_name','8681wvhhnW','2999271KtfHrh','bay','type','product_details','8UZrOBk','slice','Enabled','floorlevel','Hindi','stock_quantity','$product_details','master','Arabic\x20(ae)','name','Received\x20For\x20Purchase\x20Return','German','$note','isle','json','return_qty','language','getDate','$invoice','pallet','302xiMOUV','level','Purchase\x20Return','note','$received','purchase_quantity','$supplier_docs.mobile','save','body','to_room','$discount','French','redirect','amount','Chinese','Spanish','/view/:id','payment\x20successfull','$warehouse_name','/view','Portuguese','invoice','exports','log','map','English\x20(US)','string','findOne','purchase\x20return\x20successfully','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$product_details.product_name','aggregate','foreach\x20newproduct','$product_details.product_stock','/purchases_return/view','8631999FIfBTJ','supplier_docs','$name','return_purchase_edit','forEach','20JkBTNl','$supplier_docs.email','to_warehouse_name','stocks','product_code','room','getFullYear','839571vHzRkw','English','$date','success','../models/all_models','98585BfhUET','Router','10546592PvBEYC','old_warehouse_data','$suppliers','render','5575128iHEhCW','findById','to_Room_name','product_details.return_qtyproduct_details.return_qty'];a0_0xe6f4=function(){return _0x559a0c;};return a0_0xe6f4();}const express=require('express'),app=express(),router=express[a0_0x472e5d(0x181)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x472e5d(0x17f)),auth=require('../middleware/auth'),users=require(a0_0x472e5d(0x1ac));router['get'](a0_0x472e5d(0x15f),auth,async(_0x1daf01,_0x1d3c4b)=>{var _0x381880=a0_0x472e5d;try{const {username:_0x4607f5,email:_0x56dde0,role:_0x49b01c}=_0x1daf01['user'],_0xcba6a4=_0x1daf01['user'],_0x296f2a=await profile[_0x381880(0x167)]({'email':_0xcba6a4[_0x381880(0x1a2)]}),_0x381f91=await master_shop[_0x381880(0x18c)]();console[_0x381880(0x163)](_0x381880(0x1bf),_0x381f91);const _0x52fa51=await purchases_return[_0x381880(0x16b)]([{'$lookup':{'from':'suppliers','localField':_0x381880(0x193),'foreignField':_0x381880(0x1c1),'as':_0x381880(0x170)}},{'$unwind':_0x381880(0x1a3)},{'$unwind':_0x381880(0x1af)},{'$group':{'_id':'$_id','invoice':{'$first':_0x381880(0x14a)},'date':{'$first':_0x381880(0x17d)},'suppliers':{'$first':_0x381880(0x184)},'warehouse_name':{'$first':_0x381880(0x15e)},'product_name':{'$first':_0x381880(0x18f)},'return_qty':{'$first':_0x381880(0x18d)},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x381880(0x19a)},'note':{'$first':_0x381880(0x144)},'total_amount':{'$first':'$total_amount'},'discount':{'$first':_0x381880(0x156)},'receivable':{'$first':_0x381880(0x195)},'received':{'$first':_0x381880(0x150)},'due_amount':{'$first':_0x381880(0x192)},'mobile':{'$first':_0x381880(0x152)},'email':{'$first':_0x381880(0x175)},'address':{'$first':_0x381880(0x1ad)},'return_sum_qty':{'$sum':_0x381880(0x18d)}}}]);console[_0x381880(0x163)](_0x52fa51);if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x165)){var _0x51c19c=users[_0x381880(0x17c)];console['log'](_0x51c19c);}else{if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x1bc))var _0x51c19c=users[_0x381880(0x1bc)];else{if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x143))var _0x51c19c=users[_0x381880(0x143)];else{if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x15b))var _0x51c19c=users['Spanish'];else{if(_0x381f91[0x0]['language']=='French')var _0x51c19c=users[_0x381880(0x157)];else{if(_0x381f91[0x0][_0x381880(0x148)]=='Portuguese\x20(BR)')var _0x51c19c=users['Portuguese'];else{if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x15a))var _0x51c19c=users[_0x381880(0x15a)];else{if(_0x381f91[0x0][_0x381880(0x148)]==_0x381880(0x1c0))var _0x51c19c=users['Arabic'];}}}}}}}_0x1d3c4b[_0x381880(0x185)]('purchases_return',{'success':_0x1daf01['flash'](_0x381880(0x17e)),'errors':_0x1daf01['flash']('errors'),'role':_0xcba6a4,'profile':_0x296f2a,'master_shop':_0x381f91,'user':_0x52fa51,'language':_0x51c19c});}catch(_0x3cdab4){console[_0x381880(0x163)](_0x3cdab4);}}),router[a0_0x472e5d(0x1ab)](a0_0x472e5d(0x15c),auth,async(_0x251188,_0x1d1319)=>{var _0x6cdbb1=a0_0x472e5d;try{const {username:_0x19fb29,email:_0x5dcf79,role:_0x31158b}=_0x251188[_0x6cdbb1(0x18e)],_0x3a8d7b=_0x251188[_0x6cdbb1(0x18e)],_0x26120a=await profile[_0x6cdbb1(0x167)]({'email':_0x3a8d7b['email']}),_0x4b6269=await product['find']({}),_0x532dc0=await master_shop[_0x6cdbb1(0x18c)]();console[_0x6cdbb1(0x163)]('master',_0x532dc0),console['log'](_0x251188[_0x6cdbb1(0x154)]);const _0x49cea5=_0x251188[_0x6cdbb1(0x1b0)]['id'],_0x29d840=await purchases_return[_0x6cdbb1(0x187)](_0x49cea5);console[_0x6cdbb1(0x163)](_0x29d840);const _0xd18b35=await warehouse[_0x6cdbb1(0x16b)]([{'$match':{'name':_0x29d840[_0x6cdbb1(0x19f)],'room':_0x29d840[_0x6cdbb1(0x179)]}},{'$unwind':_0x6cdbb1(0x1be)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x6cdbb1(0x16a)},'product_stock':{'$first':_0x6cdbb1(0x16d)},'bay':{'$first':_0x6cdbb1(0x197)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x6cdbb1(0x1a5)},'product_code':{'$first':_0x6cdbb1(0x19d)},'storage':{'$first':_0x6cdbb1(0x18b)},'rack':{'$first':_0x6cdbb1(0x1a8)}}}]);warehouse_data=await warehouse[_0x6cdbb1(0x16b)]([{'$match':{'status':_0x6cdbb1(0x1ba),'name':'Return\x20Goods','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x6cdbb1(0x171)}}},{'$sort':{'name':0x1}}]),console['log'](_0x6cdbb1(0x1a6),_0xd18b35);if(_0x532dc0[0x0]['language']==_0x6cdbb1(0x165)){var _0x40af10=users[_0x6cdbb1(0x17c)];console['log'](_0x40af10);}else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]==_0x6cdbb1(0x1bc))var _0x40af10=users[_0x6cdbb1(0x1bc)];else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]==_0x6cdbb1(0x143))var _0x40af10=users['German'];else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]==_0x6cdbb1(0x15b))var _0x40af10=users[_0x6cdbb1(0x15b)];else{if(_0x532dc0[0x0]['language']==_0x6cdbb1(0x157))var _0x40af10=users[_0x6cdbb1(0x157)];else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]==_0x6cdbb1(0x190))var _0x40af10=users['Portuguese'];else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]=='Chinese')var _0x40af10=users[_0x6cdbb1(0x15a)];else{if(_0x532dc0[0x0][_0x6cdbb1(0x148)]=='Arabic\x20(ae)')var _0x40af10=users[_0x6cdbb1(0x1a0)];}}}}}}}_0x1d1319[_0x6cdbb1(0x185)](_0x6cdbb1(0x172),{'success':_0x251188['flash']('success'),'errors':_0x251188[_0x6cdbb1(0x1a7)](_0x6cdbb1(0x196)),'role':_0x3a8d7b,'master_shop':_0x532dc0,'profile':_0x26120a,'user':_0x29d840,'stock':_0xd18b35,'product':_0x4b6269,'language':_0x40af10,'warehouse':warehouse_data});}catch(_0x537ec1){console[_0x6cdbb1(0x163)](_0x537ec1);}}),router[a0_0x472e5d(0x1ae)](a0_0x472e5d(0x15c),auth,async(_0xc8bb6d,_0x2ea699)=>{var _0x4fc369=a0_0x472e5d;try{const _0x2bd9e3=_0xc8bb6d[_0x4fc369(0x1b0)]['id'];console[_0x4fc369(0x163)](_0x2bd9e3);const _0x303718=await purchases_return['findOne']({'invoice':_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x161)]});console[_0x4fc369(0x163)]('old_data',_0x303718);const _0xe4e8cc=await warehouse[_0x4fc369(0x167)]({'name':_0x303718['to_warehouse_name'],'room':_0x303718[_0x4fc369(0x155)]});console[_0x4fc369(0x163)](_0x4fc369(0x183),_0xe4e8cc);const {invoice:_0x33710c,suppliers:_0x5cd466,date:_0x5060fa,warehouse_name:_0x3dde5c,product_name:_0x238943,purchase_quantity:_0x40446c,stocks:_0x4eff39,return_qty:_0x1b170b,note:_0x5adefb,Room_name:_0x235f8d,level:_0x190792,isle:_0xa1cd0a,pallet:_0xd3843f,to_warehouse_name:_0x35a546,to_Room_name:_0x28ccd6}=_0xc8bb6d['body'];if(typeof _0x238943==_0x4fc369(0x166))var _0x5a23ca=[_0xc8bb6d[_0x4fc369(0x154)]['product_name']],_0x57a84d=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x151)]],_0x4d35b7=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x177)]],_0x497e4d=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x147)]],_0x2329ea=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x14d)]],_0x2ed1e3=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x145)]],_0xc649f2=[_0xc8bb6d['body']['pallet']],_0x126e9f=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x191)]],_0x12f86c=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x18a)]],_0x165121=[_0xc8bb6d[_0x4fc369(0x154)]['primary_code_hide']],_0x59d83b=[_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x1b1)]];else var _0x5a23ca=[..._0xc8bb6d['body']['product_name']],_0x57a84d=[..._0xc8bb6d['body'][_0x4fc369(0x151)]],_0x4d35b7=[..._0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x177)]],_0x497e4d=[..._0xc8bb6d[_0x4fc369(0x154)]['return_qty']],_0x2329ea=[..._0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x14d)]],_0x2ed1e3=[..._0xc8bb6d[_0x4fc369(0x154)]['isle']],_0xc649f2=[..._0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x14b)]],_0x12f86c=[..._0xc8bb6d['body'][_0x4fc369(0x18a)]],_0x165121=[..._0xc8bb6d['body'][_0x4fc369(0x1aa)]],_0x59d83b=[..._0xc8bb6d['body'][_0x4fc369(0x1b1)]],_0x126e9f=[..._0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x191)]];const _0x1db3ad=_0x5a23ca[_0x4fc369(0x164)](_0x3380b8=>{return _0x3380b8={'product_name':_0x3380b8};});_0x57a84d[_0x4fc369(0x173)]((_0x2aa6e2,_0x3b5837)=>{_0x1db3ad[_0x3b5837]['purchase_quantity']=_0x2aa6e2;}),_0x4d35b7[_0x4fc369(0x173)]((_0x3164d3,_0x28b45d)=>{var _0x35951a=_0x4fc369;_0x1db3ad[_0x28b45d][_0x35951a(0x1bd)]=_0x3164d3;}),_0x497e4d[_0x4fc369(0x173)]((_0x469e2a,_0x2fbc27)=>{var _0x51fa5b=_0x4fc369;_0x1db3ad[_0x2fbc27][_0x51fa5b(0x147)]=_0x469e2a;}),_0x2329ea[_0x4fc369(0x173)]((_0x58d6d4,_0x4cf14e)=>{_0x1db3ad[_0x4cf14e]['bay']=_0x58d6d4;}),_0x2ed1e3[_0x4fc369(0x173)]((_0x55613c,_0x2b3699)=>{var _0x8c8f65=_0x4fc369;_0x1db3ad[_0x2b3699][_0x8c8f65(0x194)]=_0x55613c;}),_0xc649f2[_0x4fc369(0x173)]((_0x241578,_0x523afb)=>{var _0x17b5c1=_0x4fc369;_0x1db3ad[_0x523afb][_0x17b5c1(0x1bb)]=_0x241578;}),_0x12f86c['forEach']((_0x8225f4,_0x2267f6)=>{var _0x511b24=_0x4fc369;_0x1db3ad[_0x2267f6][_0x511b24(0x178)]=_0x8225f4;}),_0x165121[_0x4fc369(0x173)]((_0x144bac,_0x476994)=>{var _0x5d4b3a=_0x4fc369;_0x1db3ad[_0x476994][_0x5d4b3a(0x1a9)]=_0x144bac;}),_0x59d83b[_0x4fc369(0x173)]((_0x3ec2cf,_0x5b8f71)=>{_0x1db3ad[_0x5b8f71]['secondary_code']=_0x3ec2cf;}),_0x126e9f['forEach']((_0x59247e,_0x58f9aa)=>{_0x1db3ad[_0x58f9aa]['type']=_0x59247e;});var _0x2f80ad=0x0;_0x1db3ad[_0x4fc369(0x173)](_0x3529f2=>{var _0x4571bc=_0x4fc369;console[_0x4571bc(0x163)](_0x4571bc(0x16c),_0x3529f2),(parseInt(_0x3529f2[_0x4571bc(0x151)])<parseInt(_0x3529f2[_0x4571bc(0x147)])||parseInt(_0x3529f2[_0x4571bc(0x1bd)])<parseInt(_0x3529f2['return_qty'])||parseInt(_0x3529f2[_0x4571bc(0x147)])==0x0)&&_0x2f80ad++;});if(_0x2f80ad!=0x0)return _0xc8bb6d[_0x4fc369(0x1a7)]('errors',_0x4fc369(0x169)),_0x2ea699[_0x4fc369(0x158)](_0x4fc369(0x19e));_0x303718['return_product'][_0x4fc369(0x173)](_0x38f7f3=>{var _0x3503cc=_0x4fc369;const _0x1716c7=_0xe4e8cc['product_details'][_0x3503cc(0x164)](_0x44109e=>{var _0x2fe653=_0x3503cc;_0x44109e[_0x2fe653(0x1b2)]==_0x38f7f3[_0x2fe653(0x1b2)]&&_0x44109e[_0x2fe653(0x1bb)]==_0x38f7f3[_0x2fe653(0x1bb)]&&_0x44109e['type']==_0x38f7f3[_0x2fe653(0x1b6)]&&_0x44109e[_0x2fe653(0x194)]==_0x38f7f3[_0x2fe653(0x194)]&&_0x44109e[_0x2fe653(0x1b5)]==_0x38f7f3['bay']&&(_0x44109e[_0x2fe653(0x19c)]=parseInt(_0x44109e['product_stock'])+parseInt(_0x38f7f3['return_qty']));});}),console['log'](_0x4fc369(0x183),_0xe4e8cc),await _0xe4e8cc[_0x4fc369(0x153)](),_0x303718[_0x4fc369(0x161)]=_0x33710c,_0x303718[_0x4fc369(0x193)]=_0x5cd466,_0x303718['date']=_0x5060fa,_0x303718[_0x4fc369(0x19f)]=_0x3dde5c,_0x303718[_0x4fc369(0x1a4)]=_0x1db3ad,_0x303718[_0x4fc369(0x14f)]=_0x5adefb,_0x303718[_0x4fc369(0x179)]=_0x235f8d,_0x303718[_0x4fc369(0x176)]=_0x35a546,_0x303718[_0x4fc369(0x155)]=_0x28ccd6;const _0x2e20fa=await _0x303718[_0x4fc369(0x153)](),_0x536e68=await purchases_return[_0x4fc369(0x167)]({'invoice':_0xc8bb6d[_0x4fc369(0x154)]['invoice']}),_0x390b0b=await warehouse['findOne']({'name':_0xc8bb6d['body'][_0x4fc369(0x176)],'room':_0xc8bb6d[_0x4fc369(0x154)][_0x4fc369(0x188)]});_0x536e68[_0x4fc369(0x1a4)][_0x4fc369(0x173)](_0x1cf368=>{var _0x50a0ad=_0x4fc369;_0x390b0b[_0x50a0ad(0x1b7)][_0x50a0ad(0x164)](_0x56b326=>{var _0x3ba5b2=_0x50a0ad;_0x56b326['product_name']==_0x1cf368[_0x3ba5b2(0x1b2)]&&_0x56b326['pallet']==_0x1cf368['pallet']&&(_0x56b326[_0x3ba5b2(0x19c)]=parseInt(_0x56b326[_0x3ba5b2(0x19c)])-parseInt(_0x1cf368[_0x3ba5b2(0x147)]),console[_0x3ba5b2(0x163)](_0x3ba5b2(0x189),_0x1cf368['return_qty']));});}),console['log']('final',_0x390b0b),await _0x390b0b[_0x4fc369(0x153)]();const _0x4944a3=await s_payment_data['findOne']({'invoice':_0xc8bb6d['body'][_0x4fc369(0x161)],'reason':_0x4fc369(0x14e)});await _0x4944a3[_0x4fc369(0x153)](),_0xc8bb6d[_0x4fc369(0x1a7)](_0x4fc369(0x17e),_0x4fc369(0x168)),_0x2ea699['redirect'](_0x4fc369(0x16e));}catch(_0x113b9f){console[_0x4fc369(0x163)](_0x113b9f),_0x2ea699['status'](0xc8)[_0x4fc369(0x146)]({'message':_0x113b9f['message']});}}),router[a0_0x472e5d(0x1ab)]('/invoice/:id',auth,async(_0x52154a,_0x1fe7e7)=>{var _0x3a9cd4=a0_0x472e5d;try{const {username:_0x4e6e35,email:_0x32d402,role:_0x4e473e}=_0x52154a['user'],_0x167748=_0x52154a[_0x3a9cd4(0x18e)],_0x4ce543=await profile[_0x3a9cd4(0x167)]({'email':_0x167748[_0x3a9cd4(0x1a2)]}),_0xbcdef2=await master_shop[_0x3a9cd4(0x18c)]();console[_0x3a9cd4(0x163)](_0x3a9cd4(0x1bf),_0xbcdef2);const _0x48ec0b=_0x52154a['params']['id'],_0x878580=await purchases_return[_0x3a9cd4(0x187)](_0x48ec0b);console[_0x3a9cd4(0x163)](_0x878580);const _0x2f5986=await suppliers[_0x3a9cd4(0x167)]({'name':_0x878580[_0x3a9cd4(0x193)]});console[_0x3a9cd4(0x163)](_0x2f5986);if(_0xbcdef2[0x0][_0x3a9cd4(0x148)]=='English\x20(US)'){var _0xd7586f=users[_0x3a9cd4(0x17c)];console[_0x3a9cd4(0x163)](_0xd7586f);}else{if(_0xbcdef2[0x0][_0x3a9cd4(0x148)]==_0x3a9cd4(0x1bc))var _0xd7586f=users['Hindi'];else{if(_0xbcdef2[0x0][_0x3a9cd4(0x148)]==_0x3a9cd4(0x143))var _0xd7586f=users[_0x3a9cd4(0x143)];else{if(_0xbcdef2[0x0][_0x3a9cd4(0x148)]==_0x3a9cd4(0x15b))var _0xd7586f=users[_0x3a9cd4(0x15b)];else{if(_0xbcdef2[0x0]['language']=='French')var _0xd7586f=users[_0x3a9cd4(0x157)];else{if(_0xbcdef2[0x0]['language']==_0x3a9cd4(0x190))var _0xd7586f=users[_0x3a9cd4(0x160)];else{if(_0xbcdef2[0x0]['language']==_0x3a9cd4(0x15a))var _0xd7586f=users['Chinese'];else{if(_0xbcdef2[0x0][_0x3a9cd4(0x148)]==_0x3a9cd4(0x1c0))var _0xd7586f=users[_0x3a9cd4(0x1a0)];}}}}}}}_0x1fe7e7[_0x3a9cd4(0x185)]('return_purchase_invoice',{'success':_0x52154a[_0x3a9cd4(0x1a7)](_0x3a9cd4(0x17e)),'errors':_0x52154a[_0x3a9cd4(0x1a7)]('errors'),'role':_0x167748,'profile':_0x4ce543,'master_shop':_0xbcdef2,'supplier':_0x2f5986,'purchase':_0x878580,'language':_0xd7586f});}catch(_0xfa8fe7){console['log'](_0xfa8fe7);}}),router[a0_0x472e5d(0x1ae)]('/receive_payment/:id',auth,async(_0x4db153,_0x11690c)=>{var _0xa42c4d=a0_0x472e5d;try{const _0x50e576=_0x4db153[_0xa42c4d(0x1b0)]['id'],{invoice:_0x645fa0,suppliers:_0x58bc06,receivable_amount:_0x594747,received_amount:_0xf7404e}=_0x4db153[_0xa42c4d(0x154)],_0x30e98c=await purchases_return[_0xa42c4d(0x187)](_0x50e576);console[_0xa42c4d(0x163)](_0x30e98c);var _0x1b9503=_0x594747-_0xf7404e;console[_0xa42c4d(0x163)](_0xf7404e),_0x30e98c[_0xa42c4d(0x198)]=parseFloat(_0xf7404e)+parseFloat(_0x30e98c['received']),_0x30e98c[_0xa42c4d(0x19b)]=_0x1b9503,console['log'](_0x30e98c);const _0x3db24b=await _0x30e98c['save'](),_0xec25e1=await s_payment_data[_0xa42c4d(0x167)]({'invoice':_0x4db153[_0xa42c4d(0x154)][_0xa42c4d(0x161)],'reason':'Purchase\x20Return'});_0xec25e1[_0xa42c4d(0x159)]=_0x1b9503,await _0xec25e1[_0xa42c4d(0x153)]();let _0x46d7dd=new Date(),_0x5c10e6=('0'+_0x46d7dd[_0xa42c4d(0x149)]())[_0xa42c4d(0x1b9)](-0x2),_0x5a1742=('0'+(_0x46d7dd[_0xa42c4d(0x1a1)]()+0x1))['slice'](-0x2),_0x162964=_0x46d7dd[_0xa42c4d(0x17a)](),_0x43d6d0=_0x162964+'-'+_0x5a1742+'-'+_0x5c10e6;const _0x2b83ba=new suppliers_payment({'invoice':_0x645fa0,'date':_0x162964+'-'+_0x5a1742+'-'+_0x5c10e6,'suppliers':_0x58bc06,'reason':_0xa42c4d(0x1c2),'amount':_0xf7404e}),_0x25af41=await _0x2b83ba[_0xa42c4d(0x153)]();_0x4db153[_0xa42c4d(0x1a7)](_0xa42c4d(0x17e),_0xa42c4d(0x15d)),_0x11690c[_0xa42c4d(0x158)](_0xa42c4d(0x16e));}catch(_0x2a5d7a){console['log'](_0x2a5d7a);}}),module[a0_0x472e5d(0x162)]=router;