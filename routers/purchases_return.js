function a0_0x5de2(){var _0x232aa3=['find','Purchase\x20Return','995391CZguvp','bin','getDate','$product_details.product_name','French','$supplier_docs.address','findById','return_qty','Router','status','get','English','21429YTEHWl','aggregate','warehouse_name','4168856BjfwWx','$product_details.product_code','date','Portuguese','return_product','$name','$return_product','errors','product_name','Portuguese\x20(BR)','save','room','redirect','English\x20(US)','3970LWiORe','level','due_amount','render','Raw\x20Materials','$return_product.total','stock_data','Arabic','$product_details.primary_code','floorlevel','$product_details._id','/purchases_return/view','master','12mycZuX','product_code','user','post','purchase\x20return\x20successfully','$product_details','Arabic\x20(ae)','json','secondary_code_hide','../public/language/languages.json','Spanish','$_id','foreach\x20newproduct','92BmThbE','11710358wUvNLv','90591ABYAfN','$product_details.rack','$suppliers','types','secondary_code','/view','$return_product.price','$note','product_details','$warehouse_name','/view/:id','log','product_code_hide','payment\x20successfull','bay','type','$total_amount','primary_code','2ALdiNg','$due_amount','language','express','German','params','isle','520PZBiat','Enabled','exports','flash','$return_product.return_qty','to_room','back','to_warehouse_name','54876CEoQHL','purchases_return','8491882aBSkNR','/invoice/:id','string','product_stock','$product_details.storage','invoice','$date','suppliers','map','$return_product.product_name','to_Room_name','primary_code_hide','success','pallet','Chinese','$product_details.bin','message','purchase_quantity','getMonth','13LHnIjo','../models/all_models','old_warehouse_data','body','old_data','stocks','Return\x20Goods','findOne','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','forEach','14EfNYCX','../middleware/auth','slice','name','supplier_docs','Hindi','stock_quantity'];a0_0x5de2=function(){return _0x232aa3;};return a0_0x5de2();}var a0_0x3f87c8=a0_0x3047;(function(_0x530e72,_0x50d0ba){var _0x382cec=a0_0x3047,_0x3aaa25=_0x530e72();while(!![]){try{var _0x2b605b=parseInt(_0x382cec(0x179))/0x1*(parseInt(_0x382cec(0x142))/0x2)+-parseInt(_0x382cec(0x1b2))/0x3*(parseInt(_0x382cec(0x1b0))/0x4)+-parseInt(_0x382cec(0x149))/0x5*(-parseInt(_0x382cec(0x151))/0x6)+parseInt(_0x382cec(0x170))/0x7*(-parseInt(_0x382cec(0x188))/0x8)+-parseInt(_0x382cec(0x185))/0x9*(-parseInt(_0x382cec(0x196))/0xa)+parseInt(_0x382cec(0x1b1))/0xb*(-parseInt(_0x382cec(0x1a3))/0xc)+parseInt(_0x382cec(0x166))/0xd*(parseInt(_0x382cec(0x153))/0xe);if(_0x2b605b===_0x50d0ba)break;else _0x3aaa25['push'](_0x3aaa25['shift']());}catch(_0x450cc2){_0x3aaa25['push'](_0x3aaa25['shift']());}}}(a0_0x5de2,0xaa2f0));function a0_0x3047(_0x47e1e4,_0x18c362){var _0x5de271=a0_0x5de2();return a0_0x3047=function(_0x3047e6,_0x3727e7){_0x3047e6=_0x3047e6-0x133;var _0xe257f0=_0x5de271[_0x3047e6];return _0xe257f0;},a0_0x3047(_0x47e1e4,_0x18c362);}const express=require(a0_0x3f87c8(0x145)),app=express(),router=express[a0_0x3f87c8(0x181)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x3f87c8(0x167)),auth=require(a0_0x3f87c8(0x171)),users=require(a0_0x3f87c8(0x1ac));router[a0_0x3f87c8(0x183)](a0_0x3f87c8(0x135),auth,async(_0x242be4,_0x3d51b5)=>{var _0xd7e034=a0_0x3f87c8;try{const {username:_0x18ce6f,email:_0x3b0e00,role:_0x1474e0}=_0x242be4[_0xd7e034(0x1a5)],_0x574235=_0x242be4[_0xd7e034(0x1a5)],_0x20b909=await profile[_0xd7e034(0x16d)]({'email':_0x574235['email']}),_0x1d17d3=await master_shop[_0xd7e034(0x177)]();console[_0xd7e034(0x13b)]('master',_0x1d17d3);const _0x1e3c7d=await purchases_return[_0xd7e034(0x186)]([{'$lookup':{'from':_0xd7e034(0x15a),'localField':_0xd7e034(0x15a),'foreignField':_0xd7e034(0x173),'as':_0xd7e034(0x174)}},{'$unwind':_0xd7e034(0x18e)},{'$unwind':'$supplier_docs'},{'$group':{'_id':_0xd7e034(0x1ae),'invoice':{'$first':'$invoice'},'date':{'$first':_0xd7e034(0x159)},'suppliers':{'$first':_0xd7e034(0x1b4)},'warehouse_name':{'$first':_0xd7e034(0x139)},'product_name':{'$first':_0xd7e034(0x15c)},'return_qty':{'$first':_0xd7e034(0x14d)},'price':{'$first':_0xd7e034(0x136)},'total':{'$sum':_0xd7e034(0x19b)},'note':{'$first':_0xd7e034(0x137)},'total_amount':{'$first':_0xd7e034(0x140)},'discount':{'$first':'$discount'},'receivable':{'$first':'$receivable'},'received':{'$first':'$received'},'due_amount':{'$first':_0xd7e034(0x143)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0xd7e034(0x17e)},'return_sum_qty':{'$sum':_0xd7e034(0x14d)}}}]);console['log'](_0x1e3c7d);if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x195)){var _0x15559b=users[_0xd7e034(0x184)];console[_0xd7e034(0x13b)](_0x15559b);}else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x175))var _0x15559b=users[_0xd7e034(0x175)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x146))var _0x15559b=users[_0xd7e034(0x146)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x1ad))var _0x15559b=users[_0xd7e034(0x1ad)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]=='French')var _0x15559b=users[_0xd7e034(0x17d)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x191))var _0x15559b=users[_0xd7e034(0x18b)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x161))var _0x15559b=users[_0xd7e034(0x161)];else{if(_0x1d17d3[0x0][_0xd7e034(0x144)]==_0xd7e034(0x1a9))var _0x15559b=users[_0xd7e034(0x19d)];}}}}}}}_0x3d51b5['render'](_0xd7e034(0x152),{'success':_0x242be4[_0xd7e034(0x14c)](_0xd7e034(0x15f)),'errors':_0x242be4[_0xd7e034(0x14c)](_0xd7e034(0x18f)),'role':_0x574235,'profile':_0x20b909,'master_shop':_0x1d17d3,'user':_0x1e3c7d,'language':_0x15559b});}catch(_0x3669f8){console['log'](_0x3669f8);}}),router[a0_0x3f87c8(0x183)](a0_0x3f87c8(0x13a),auth,async(_0x370c18,_0x542358)=>{var _0xc7f836=a0_0x3f87c8;try{const {username:_0x4c0df8,email:_0xeacae7,role:_0x39e834}=_0x370c18[_0xc7f836(0x1a5)],_0x475980=_0x370c18[_0xc7f836(0x1a5)],_0x2e39b6=await profile['findOne']({'email':_0x475980['email']}),_0xd41f13=await product['find']({}),_0x2c1585=await master_shop[_0xc7f836(0x177)]();console[_0xc7f836(0x13b)](_0xc7f836(0x1a2),_0x2c1585),console[_0xc7f836(0x13b)](_0x370c18['body']);const _0x3dac01=_0x370c18[_0xc7f836(0x147)]['id'],_0x582f76=await purchases_return['findById'](_0x3dac01);console['log'](_0x582f76);const _0x42766d=await warehouse[_0xc7f836(0x186)]([{'$match':{'name':_0x582f76[_0xc7f836(0x187)],'room':_0x582f76[_0xc7f836(0x193)]}},{'$unwind':_0xc7f836(0x1a8)},{'$group':{'_id':_0xc7f836(0x1a0),'name':{'$first':_0xc7f836(0x17c)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xc7f836(0x162)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0xc7f836(0x19e)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xc7f836(0x189)},'storage':{'$first':_0xc7f836(0x157)},'rack':{'$first':_0xc7f836(0x1b3)}}}]);warehouse_data=await warehouse[_0xc7f836(0x186)]([{'$match':{'status':_0xc7f836(0x14a),'name':_0xc7f836(0x16c),'warehouse_category':_0xc7f836(0x19a)}},{'$group':{'_id':_0xc7f836(0x18d),'name':{'$first':_0xc7f836(0x18d)}}},{'$sort':{'name':0x1}}]),console[_0xc7f836(0x13b)](_0xc7f836(0x19c),_0x42766d);if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x195)){var _0x2b456c=users['English'];console[_0xc7f836(0x13b)](_0x2b456c);}else{if(_0x2c1585[0x0][_0xc7f836(0x144)]=='Hindi')var _0x2b456c=users['Hindi'];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x146))var _0x2b456c=users['German'];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x1ad))var _0x2b456c=users['Spanish'];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x17d))var _0x2b456c=users[_0xc7f836(0x17d)];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x191))var _0x2b456c=users['Portuguese'];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]=='Chinese')var _0x2b456c=users['Chinese'];else{if(_0x2c1585[0x0][_0xc7f836(0x144)]==_0xc7f836(0x1a9))var _0x2b456c=users[_0xc7f836(0x19d)];}}}}}}}_0x542358[_0xc7f836(0x199)]('return_purchase_edit',{'success':_0x370c18[_0xc7f836(0x14c)](_0xc7f836(0x15f)),'errors':_0x370c18[_0xc7f836(0x14c)](_0xc7f836(0x18f)),'role':_0x475980,'master_shop':_0x2c1585,'profile':_0x2e39b6,'user':_0x582f76,'stock':_0x42766d,'product':_0xd41f13,'language':_0x2b456c,'warehouse':warehouse_data});}catch(_0x2e36bb){console[_0xc7f836(0x13b)](_0x2e36bb);}}),router[a0_0x3f87c8(0x1a6)]('/view/:id',auth,async(_0x59f518,_0xf46fb)=>{var _0x33efef=a0_0x3f87c8;try{const _0x30e893=_0x59f518[_0x33efef(0x147)]['id'];console[_0x33efef(0x13b)](_0x30e893);const _0x4d98ce=await purchases_return['findOne']({'invoice':_0x59f518[_0x33efef(0x169)][_0x33efef(0x158)]});console[_0x33efef(0x13b)](_0x33efef(0x16a),_0x4d98ce);const _0x2a37e4=await warehouse[_0x33efef(0x16d)]({'name':_0x4d98ce[_0x33efef(0x150)],'room':_0x4d98ce[_0x33efef(0x14e)]});console[_0x33efef(0x13b)]('old_warehouse_data',_0x2a37e4);const {invoice:_0x17f1c1,suppliers:_0x8475e7,date:_0x46a804,warehouse_name:_0x2eed06,product_name:_0x39f14a,purchase_quantity:_0x3447e3,stocks:_0x1ab150,return_qty:_0x5e3d09,note:_0x569e3e,Room_name:_0x1964c7,level:_0x16191a,isle:_0x1fc63d,pallet:_0x4becbb,to_warehouse_name:_0x1f6dc8,to_Room_name:_0x574aae}=_0x59f518[_0x33efef(0x169)];if(typeof _0x39f14a==_0x33efef(0x155))var _0x102533=[_0x59f518['body'][_0x33efef(0x190)]],_0x4750b1=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x164)]],_0x396f7b=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x16b)]],_0x77cd48=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x180)]],_0x328bae=[_0x59f518[_0x33efef(0x169)]['level']],_0x23186c=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x148)]],_0x38e5e3=[_0x59f518['body'][_0x33efef(0x160)]],_0x3d239d=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x133)]],_0x1a3e20=[_0x59f518['body'][_0x33efef(0x13c)]],_0x104823=[_0x59f518[_0x33efef(0x169)]['primary_code_hide']],_0x4eb773=[_0x59f518[_0x33efef(0x169)][_0x33efef(0x1ab)]];else var _0x102533=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x190)]],_0x4750b1=[..._0x59f518['body'][_0x33efef(0x164)]],_0x396f7b=[..._0x59f518['body'][_0x33efef(0x16b)]],_0x77cd48=[..._0x59f518['body'][_0x33efef(0x180)]],_0x328bae=[..._0x59f518['body'][_0x33efef(0x197)]],_0x23186c=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x148)]],_0x38e5e3=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x160)]],_0x1a3e20=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x13c)]],_0x104823=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x15e)]],_0x4eb773=[..._0x59f518[_0x33efef(0x169)][_0x33efef(0x1ab)]],_0x3d239d=[..._0x59f518[_0x33efef(0x169)]['types']];const _0x28b3c9=_0x102533[_0x33efef(0x15b)](_0x2025aa=>{return _0x2025aa={'product_name':_0x2025aa};});_0x4750b1['forEach']((_0xdd8167,_0x440e2a)=>{var _0x40d780=_0x33efef;_0x28b3c9[_0x440e2a][_0x40d780(0x164)]=_0xdd8167;}),_0x396f7b[_0x33efef(0x16f)]((_0x75ef47,_0x4bc11d)=>{var _0x470030=_0x33efef;_0x28b3c9[_0x4bc11d][_0x470030(0x176)]=_0x75ef47;}),_0x77cd48[_0x33efef(0x16f)]((_0x19d887,_0x1617bf)=>{var _0x362ddb=_0x33efef;_0x28b3c9[_0x1617bf][_0x362ddb(0x180)]=_0x19d887;}),_0x328bae['forEach']((_0x135a49,_0x350edf)=>{var _0x1bbb35=_0x33efef;_0x28b3c9[_0x350edf][_0x1bbb35(0x13e)]=_0x135a49;}),_0x23186c[_0x33efef(0x16f)]((_0xdaf1ee,_0x5ecb7a)=>{var _0x44f7c6=_0x33efef;_0x28b3c9[_0x5ecb7a][_0x44f7c6(0x17a)]=_0xdaf1ee;}),_0x38e5e3['forEach']((_0x351411,_0x348628)=>{var _0x228e25=_0x33efef;_0x28b3c9[_0x348628][_0x228e25(0x19f)]=_0x351411;}),_0x1a3e20['forEach']((_0x323370,_0x811a74)=>{var _0x370b59=_0x33efef;_0x28b3c9[_0x811a74][_0x370b59(0x1a4)]=_0x323370;}),_0x104823[_0x33efef(0x16f)]((_0x27966f,_0x5c9ebf)=>{var _0x569d5f=_0x33efef;_0x28b3c9[_0x5c9ebf][_0x569d5f(0x141)]=_0x27966f;}),_0x4eb773[_0x33efef(0x16f)]((_0x419ddf,_0x97c600)=>{var _0x39bf58=_0x33efef;_0x28b3c9[_0x97c600][_0x39bf58(0x134)]=_0x419ddf;}),_0x3d239d[_0x33efef(0x16f)]((_0x35576b,_0x30b7a1)=>{var _0x2888a4=_0x33efef;_0x28b3c9[_0x30b7a1][_0x2888a4(0x13f)]=_0x35576b;});var _0x4aa550=0x0;_0x28b3c9[_0x33efef(0x16f)](_0x2ea7cf=>{var _0x2b7ced=_0x33efef;console[_0x2b7ced(0x13b)](_0x2b7ced(0x1af),_0x2ea7cf),(parseInt(_0x2ea7cf[_0x2b7ced(0x164)])<parseInt(_0x2ea7cf[_0x2b7ced(0x180)])||parseInt(_0x2ea7cf['stock_quantity'])<parseInt(_0x2ea7cf[_0x2b7ced(0x180)])||parseInt(_0x2ea7cf[_0x2b7ced(0x180)])==0x0)&&_0x4aa550++;});if(_0x4aa550!=0x0)return _0x59f518[_0x33efef(0x14c)]('errors',_0x33efef(0x16e)),_0xf46fb['redirect'](_0x33efef(0x14f));_0x4d98ce['return_product'][_0x33efef(0x16f)](_0x91589=>{const _0x1d881f=_0x2a37e4['product_details']['map'](_0x1340a3=>{var _0x41335e=a0_0x3047;_0x1340a3['product_name']==_0x91589[_0x41335e(0x190)]&&_0x1340a3['floorlevel']==_0x91589[_0x41335e(0x19f)]&&_0x1340a3[_0x41335e(0x13f)]==_0x91589[_0x41335e(0x13f)]&&_0x1340a3[_0x41335e(0x17a)]==_0x91589[_0x41335e(0x17a)]&&_0x1340a3['bay']==_0x91589[_0x41335e(0x13e)]&&(_0x1340a3['product_stock']=parseInt(_0x1340a3['product_stock'])+parseInt(_0x91589[_0x41335e(0x180)]));});}),console[_0x33efef(0x13b)](_0x33efef(0x168),_0x2a37e4),await _0x2a37e4[_0x33efef(0x192)](),_0x4d98ce['invoice']=_0x17f1c1,_0x4d98ce[_0x33efef(0x15a)]=_0x8475e7,_0x4d98ce[_0x33efef(0x18a)]=_0x46a804,_0x4d98ce[_0x33efef(0x187)]=_0x2eed06,_0x4d98ce[_0x33efef(0x18c)]=_0x28b3c9,_0x4d98ce['note']=_0x569e3e,_0x4d98ce[_0x33efef(0x193)]=_0x1964c7,_0x4d98ce['to_warehouse_name']=_0x1f6dc8,_0x4d98ce[_0x33efef(0x14e)]=_0x574aae;const _0x385e92=await _0x4d98ce[_0x33efef(0x192)](),_0x52d739=await purchases_return['findOne']({'invoice':_0x59f518[_0x33efef(0x169)][_0x33efef(0x158)]}),_0x5f5365=await warehouse[_0x33efef(0x16d)]({'name':_0x59f518[_0x33efef(0x169)]['to_warehouse_name'],'room':_0x59f518[_0x33efef(0x169)][_0x33efef(0x15d)]});_0x52d739[_0x33efef(0x18c)][_0x33efef(0x16f)](_0x1f055e=>{var _0x47c0a4=_0x33efef;_0x5f5365[_0x47c0a4(0x138)][_0x47c0a4(0x15b)](_0x30ec31=>{var _0x28f600=_0x47c0a4;_0x30ec31['product_name']==_0x1f055e[_0x28f600(0x190)]&&_0x30ec31[_0x28f600(0x160)]==_0x1f055e[_0x28f600(0x160)]&&(_0x30ec31[_0x28f600(0x156)]=parseInt(_0x30ec31[_0x28f600(0x156)])-parseInt(_0x1f055e[_0x28f600(0x180)]),console[_0x28f600(0x13b)]('product_details.return_qtyproduct_details.return_qty',_0x1f055e[_0x28f600(0x180)]));});}),console[_0x33efef(0x13b)]('final',_0x5f5365),await _0x5f5365[_0x33efef(0x192)]();const _0x258f6c=await s_payment_data[_0x33efef(0x16d)]({'invoice':_0x59f518[_0x33efef(0x169)][_0x33efef(0x158)],'reason':_0x33efef(0x178)});await _0x258f6c['save'](),_0x59f518[_0x33efef(0x14c)](_0x33efef(0x15f),_0x33efef(0x1a7)),_0xf46fb[_0x33efef(0x194)](_0x33efef(0x1a1));}catch(_0x3242aa){console['log'](_0x3242aa),_0xf46fb[_0x33efef(0x182)](0xc8)[_0x33efef(0x1aa)]({'message':_0x3242aa[_0x33efef(0x163)]});}}),router[a0_0x3f87c8(0x183)](a0_0x3f87c8(0x154),auth,async(_0x30271d,_0xea0171)=>{var _0x4ced0c=a0_0x3f87c8;try{const {username:_0x46226d,email:_0x407a02,role:_0x560e5b}=_0x30271d['user'],_0x55dee9=_0x30271d[_0x4ced0c(0x1a5)],_0x550995=await profile['findOne']({'email':_0x55dee9['email']}),_0x2d6940=await master_shop[_0x4ced0c(0x177)]();console[_0x4ced0c(0x13b)]('master',_0x2d6940);const _0x626e99=_0x30271d['params']['id'],_0x3e37ee=await purchases_return[_0x4ced0c(0x17f)](_0x626e99);console[_0x4ced0c(0x13b)](_0x3e37ee);const _0x441939=await suppliers[_0x4ced0c(0x16d)]({'name':_0x3e37ee[_0x4ced0c(0x15a)]});console[_0x4ced0c(0x13b)](_0x441939);if(_0x2d6940[0x0]['language']==_0x4ced0c(0x195)){var _0x25dff8=users[_0x4ced0c(0x184)];console[_0x4ced0c(0x13b)](_0x25dff8);}else{if(_0x2d6940[0x0]['language']==_0x4ced0c(0x175))var _0x25dff8=users[_0x4ced0c(0x175)];else{if(_0x2d6940[0x0]['language']==_0x4ced0c(0x146))var _0x25dff8=users[_0x4ced0c(0x146)];else{if(_0x2d6940[0x0][_0x4ced0c(0x144)]=='Spanish')var _0x25dff8=users[_0x4ced0c(0x1ad)];else{if(_0x2d6940[0x0][_0x4ced0c(0x144)]=='French')var _0x25dff8=users['French'];else{if(_0x2d6940[0x0][_0x4ced0c(0x144)]==_0x4ced0c(0x191))var _0x25dff8=users['Portuguese'];else{if(_0x2d6940[0x0][_0x4ced0c(0x144)]==_0x4ced0c(0x161))var _0x25dff8=users['Chinese'];else{if(_0x2d6940[0x0][_0x4ced0c(0x144)]=='Arabic\x20(ae)')var _0x25dff8=users[_0x4ced0c(0x19d)];}}}}}}}_0xea0171['render']('return_purchase_invoice',{'success':_0x30271d[_0x4ced0c(0x14c)](_0x4ced0c(0x15f)),'errors':_0x30271d[_0x4ced0c(0x14c)](_0x4ced0c(0x18f)),'role':_0x55dee9,'profile':_0x550995,'master_shop':_0x2d6940,'supplier':_0x441939,'purchase':_0x3e37ee,'language':_0x25dff8});}catch(_0x5f02b2){console['log'](_0x5f02b2);}}),router['post']('/receive_payment/:id',auth,async(_0x21e295,_0x499bd3)=>{var _0x53dce2=a0_0x3f87c8;try{const _0x5f464e=_0x21e295[_0x53dce2(0x147)]['id'],{invoice:_0x3075ca,suppliers:_0x4d526b,receivable_amount:_0x1c966a,received_amount:_0x3f8f4d}=_0x21e295[_0x53dce2(0x169)],_0x21ce73=await purchases_return['findById'](_0x5f464e);console[_0x53dce2(0x13b)](_0x21ce73);var _0x56901=_0x1c966a-_0x3f8f4d;console[_0x53dce2(0x13b)](_0x3f8f4d),_0x21ce73['received']=parseFloat(_0x3f8f4d)+parseFloat(_0x21ce73['received']),_0x21ce73[_0x53dce2(0x198)]=_0x56901,console[_0x53dce2(0x13b)](_0x21ce73);const _0x591a0c=await _0x21ce73[_0x53dce2(0x192)](),_0x51d136=await s_payment_data[_0x53dce2(0x16d)]({'invoice':_0x21e295[_0x53dce2(0x169)][_0x53dce2(0x158)],'reason':_0x53dce2(0x178)});_0x51d136['amount']=_0x56901,await _0x51d136[_0x53dce2(0x192)]();let _0x5f1b78=new Date(),_0x190195=('0'+_0x5f1b78[_0x53dce2(0x17b)]())[_0x53dce2(0x172)](-0x2),_0x174669=('0'+(_0x5f1b78[_0x53dce2(0x165)]()+0x1))[_0x53dce2(0x172)](-0x2),_0x5ee046=_0x5f1b78['getFullYear'](),_0x5ec4a9=_0x5ee046+'-'+_0x174669+'-'+_0x190195;const _0x19ab3c=new suppliers_payment({'invoice':_0x3075ca,'date':_0x5ee046+'-'+_0x174669+'-'+_0x190195,'suppliers':_0x4d526b,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x3f8f4d}),_0x3c1b51=await _0x19ab3c[_0x53dce2(0x192)]();_0x21e295['flash']('success',_0x53dce2(0x13d)),_0x499bd3[_0x53dce2(0x194)]('/purchases_return/view');}catch(_0x2e569e){console[_0x53dce2(0x13b)](_0x2e569e);}}),module[a0_0x3f87c8(0x14b)]=router;