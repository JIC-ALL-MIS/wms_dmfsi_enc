const a0_0x14073d=a0_0x168c;(function(_0x57c0a0,_0x1f2480){const _0x28c84b=a0_0x168c,_0x345fb5=_0x57c0a0();while(!![]){try{const _0x4ee3d2=-parseInt(_0x28c84b(0x201))/0x1+-parseInt(_0x28c84b(0x1f9))/0x2*(parseInt(_0x28c84b(0x213))/0x3)+parseInt(_0x28c84b(0x1fe))/0x4+-parseInt(_0x28c84b(0x1ef))/0x5+parseInt(_0x28c84b(0x1ee))/0x6+-parseInt(_0x28c84b(0x21b))/0x7*(-parseInt(_0x28c84b(0x209))/0x8)+parseInt(_0x28c84b(0x1f4))/0x9*(parseInt(_0x28c84b(0x207))/0xa);if(_0x4ee3d2===_0x1f2480)break;else _0x345fb5['push'](_0x345fb5['shift']());}catch(_0x1728fe){_0x345fb5['push'](_0x345fb5['shift']());}}}(a0_0x4803,0x880ba));function a0_0x4803(){const _0x1d7ccb=['German','3ZydWOI','Portuguese','post','Arabic','language','errors','/view/:id','success','852257cAmqXq','../middleware/auth','user','render','express','findById','warehouse_category','French','$name','aggregate','flash','English','params','../public/language/languages.json','Chinese','Hindi','password','2969046aActdx','4771370HNtfHE','exports','warehouse','redirect','English\x20(US)','6714ddEmVF','Enabled','save','Arabic\x20(ae)','firstname','759048ABTAed','mobile','name','get','staff','2157336GgtumF','Spanish','master','475644SqOOZo','Finished\x20Goods','bcryptjs','log','/view','Router','16230iIGeJv','status','8OmqgDo','findOne','find','\x20is\x20add\x20successfully','position','email','body','Portuguese\x20(BR)','Raw\x20Materials'];a0_0x4803=function(){return _0x1d7ccb;};return a0_0x4803();}function a0_0x168c(_0x84fa69,_0x46a17e){const _0x480321=a0_0x4803();return a0_0x168c=function(_0x168c1a,_0x144ab8){_0x168c1a=_0x168c1a-0x1e4;let _0x22e687=_0x480321[_0x168c1a];return _0x22e687;},a0_0x168c(_0x84fa69,_0x46a17e);}const express=require(a0_0x14073d(0x21f)),app=express(),router=express[a0_0x14073d(0x206)](),bcrypt=require(a0_0x14073d(0x203)),{profile,master_shop,sing_up,categories,brands,units,product,warehouse,staff}=require('../models/all_models'),auth=require(a0_0x14073d(0x21c)),users=require(a0_0x14073d(0x1ea));router[a0_0x14073d(0x1fc)]('/view',auth,async(_0x4ed895,_0x37ed59)=>{const _0x4cbabe=a0_0x14073d;try{const {username:_0x4384fb,email:_0xac10,role:_0x297afe}=_0x4ed895[_0x4cbabe(0x21d)],_0x36f009=_0x4ed895[_0x4cbabe(0x21d)],_0x539f1b=await profile[_0x4cbabe(0x20a)]({'email':_0x36f009[_0x4cbabe(0x20e)]}),_0x5e231f=await master_shop[_0x4cbabe(0x20b)]();console[_0x4cbabe(0x204)](_0x4cbabe(0x200),_0x5e231f),warehouse_data=await warehouse[_0x4cbabe(0x1e6)]([{'$match':{'status':_0x4cbabe(0x1f5)}},{'$group':{'_id':_0x4cbabe(0x1e5),'name':{'$first':_0x4cbabe(0x1e5)}}}]);const _0x285f9f=await staff[_0x4cbabe(0x20b)]();console[_0x4cbabe(0x204)](_0x285f9f);if(_0x5e231f[0x0][_0x4cbabe(0x217)]==_0x4cbabe(0x1f3)){var _0x272167=users[_0x4cbabe(0x1e8)];console['log'](_0x272167);}else{if(_0x5e231f[0x0]['language']==_0x4cbabe(0x1ec))var _0x272167=users[_0x4cbabe(0x1ec)];else{if(_0x5e231f[0x0][_0x4cbabe(0x217)]==_0x4cbabe(0x212))var _0x272167=users[_0x4cbabe(0x212)];else{if(_0x5e231f[0x0]['language']==_0x4cbabe(0x1ff))var _0x272167=users[_0x4cbabe(0x1ff)];else{if(_0x5e231f[0x0]['language']==_0x4cbabe(0x1e4))var _0x272167=users[_0x4cbabe(0x1e4)];else{if(_0x5e231f[0x0]['language']==_0x4cbabe(0x210))var _0x272167=users[_0x4cbabe(0x214)];else{if(_0x5e231f[0x0]['language']==_0x4cbabe(0x1eb))var _0x272167=users[_0x4cbabe(0x1eb)];else{if(_0x5e231f[0x0][_0x4cbabe(0x217)]=='Arabic\x20(ae)')var _0x272167=users[_0x4cbabe(0x216)];}}}}}}}let _0x1a7905=['Raw\x20Materials',_0x4cbabe(0x202)];_0x37ed59['render']('staff',{'success':_0x4ed895[_0x4cbabe(0x1e7)](_0x4cbabe(0x21a)),'errors':_0x4ed895['flash'](_0x4cbabe(0x218)),'role':_0x36f009,'profile':_0x539f1b,'master_shop':_0x5e231f,'user':_0x285f9f,'language':_0x272167,'warehouse':warehouse_data,'warehouse_cat':_0x1a7905});}catch(_0xd2e0cf){console['log'](_0xd2e0cf);}}),router[a0_0x14073d(0x215)](a0_0x14073d(0x205),auth,async(_0x758c26,_0x4aa2b7)=>{const _0x48aef4=a0_0x14073d;try{const {name:_0x544a85,email:_0x3e593e,mobile:_0x1914c1,password:_0x591649,status:_0x5af9b2,warehouse:_0x165904,position:_0x1a7cf4,warehouse_cat:_0x2e65ff}=_0x758c26['body'],_0x106771=await bcrypt['hash'](_0x591649,0xa),_0x3ebe91=new staff({'name':_0x544a85,'email':_0x3e593e,'mobile':_0x1914c1,'status':_0x5af9b2,'warehouse':_0x165904,'position':_0x1a7cf4,'warehouse_category':_0x2e65ff}),_0x16f02c=await staff['findOne']({'email':_0x3e593e});console['log'](_0x16f02c);if(_0x16f02c)return _0x758c26[_0x48aef4(0x1e7)](_0x48aef4(0x218),'Email\x20'+_0x3e593e+'\x20is\x20alredy\x20added.\x20please\x20choose\x20another'),_0x4aa2b7[_0x48aef4(0x1f2)]('back'),![];const _0x411f5d=await _0x3ebe91[_0x48aef4(0x1f6)](),_0x3d0f68=new sing_up({'name':_0x544a85,'email':_0x3e593e,'password':_0x106771,'role':_0x48aef4(0x1fd)}),_0x54d9f7=await _0x3d0f68['save'](),_0x2f90d4=new profile({'firstname':_0x544a85,'email':_0x3e593e}),_0x8360ad=await _0x2f90d4[_0x48aef4(0x1f6)]();_0x758c26[_0x48aef4(0x1e7)](_0x48aef4(0x21a),_0x544a85+_0x48aef4(0x20c)),_0x4aa2b7['redirect']('/staff/view');}catch(_0x48b661){console[_0x48aef4(0x204)](_0x48b661);}}),router[a0_0x14073d(0x1fc)](a0_0x14073d(0x219),auth,async(_0x13c0b4,_0x46dfcc)=>{const _0x23fe7d=a0_0x14073d;try{const _0x319174=_0x13c0b4[_0x23fe7d(0x1e9)]['id'],_0x90d6aa=await master_shop[_0x23fe7d(0x20b)](),_0x22aff6=await staff['findById'](_0x319174);if(_0x90d6aa[0x0]['language']=='English\x20(US)'){var _0x285bcc=users[_0x23fe7d(0x1e8)];console[_0x23fe7d(0x204)](_0x285bcc);}else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]==_0x23fe7d(0x1ec))var _0x285bcc=users[_0x23fe7d(0x1ec)];else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]=='German')var _0x285bcc=users[_0x23fe7d(0x212)];else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]==_0x23fe7d(0x1ff))var _0x285bcc=users['Spanish'];else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]==_0x23fe7d(0x1e4))var _0x285bcc=users[_0x23fe7d(0x1e4)];else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]==_0x23fe7d(0x210))var _0x285bcc=users[_0x23fe7d(0x214)];else{if(_0x90d6aa[0x0]['language']==_0x23fe7d(0x1eb))var _0x285bcc=users[_0x23fe7d(0x1eb)];else{if(_0x90d6aa[0x0][_0x23fe7d(0x217)]==_0x23fe7d(0x1f7))var _0x285bcc=users[_0x23fe7d(0x216)];}}}}}}}let _0x372208=[_0x23fe7d(0x211),_0x23fe7d(0x202)];_0x46dfcc[_0x23fe7d(0x21e)](_0x23fe7d(0x1fd),{'success':_0x13c0b4[_0x23fe7d(0x1e7)](_0x23fe7d(0x21a)),'errors':_0x13c0b4[_0x23fe7d(0x1e7)](_0x23fe7d(0x218)),'master_shop':_0x90d6aa,'user':_0x22aff6,'language':_0x285bcc,'warehouse_cat':_0x372208});}catch(_0x419d72){console[_0x23fe7d(0x204)](_0x419d72);}}),router[a0_0x14073d(0x215)]('/view/:id',auth,async(_0x24586b,_0x41b63a)=>{const _0x338f1c=a0_0x14073d;try{const _0x137365=_0x24586b[_0x338f1c(0x1e9)]['id'],_0x4ac58b=await staff[_0x338f1c(0x220)](_0x137365),{name:_0x5546d4,email:_0x5b9d02,mobile:_0x583b20,password:_0x3a1da6,status:_0x1718a0,warehouse:_0x107f6f,position:_0x35a19f,warehouse_cat:_0x17303a}=_0x24586b[_0x338f1c(0x20f)];_0x4ac58b[_0x338f1c(0x1fb)]=_0x5546d4,_0x4ac58b[_0x338f1c(0x20e)]=_0x5b9d02,_0x4ac58b[_0x338f1c(0x1fa)]=_0x583b20,_0x4ac58b[_0x338f1c(0x1ed)]=_0x3a1da6,_0x4ac58b[_0x338f1c(0x208)]=_0x1718a0,_0x4ac58b[_0x338f1c(0x1f1)]=_0x107f6f,_0x4ac58b[_0x338f1c(0x20d)]=_0x35a19f,_0x4ac58b[_0x338f1c(0x221)]=_0x17303a;const _0x40839b=await _0x4ac58b[_0x338f1c(0x1f6)](),_0x2f977d=await profile[_0x338f1c(0x20a)]({'email':_0x5b9d02});_0x2f977d[_0x338f1c(0x1f8)]=_0x5546d4,_0x2f977d['email']=_0x5b9d02,await _0x2f977d[_0x338f1c(0x1f6)](),_0x24586b['flash'](_0x338f1c(0x21a),'staff\x20data\x20update\x20successfully'),_0x41b63a['redirect']('/staff/view');}catch(_0x339ff0){console['log'](_0x339ff0),_0x41b63a[_0x338f1c(0x208)](0xc8)['json'](_0x339ff0);}}),module[a0_0x14073d(0x1f0)]=router;