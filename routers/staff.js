const a0_0x47b772=a0_0x21eb;(function(_0x275e83,_0x30e1a3){const _0x28d0e3=a0_0x21eb,_0x279c80=_0x275e83();while(!![]){try{const _0x54a6d1=-parseInt(_0x28d0e3(0x1b8))/0x1*(-parseInt(_0x28d0e3(0x1c1))/0x2)+parseInt(_0x28d0e3(0x1ea))/0x3+-parseInt(_0x28d0e3(0x1b6))/0x4*(parseInt(_0x28d0e3(0x1b9))/0x5)+-parseInt(_0x28d0e3(0x1d4))/0x6+-parseInt(_0x28d0e3(0x1f2))/0x7+-parseInt(_0x28d0e3(0x1c6))/0x8*(parseInt(_0x28d0e3(0x1d0))/0x9)+parseInt(_0x28d0e3(0x1db))/0xa*(parseInt(_0x28d0e3(0x1c5))/0xb);if(_0x54a6d1===_0x30e1a3)break;else _0x279c80['push'](_0x279c80['shift']());}catch(_0x242b42){_0x279c80['push'](_0x279c80['shift']());}}}(a0_0x33d8,0xe6903));function a0_0x21eb(_0x56758b,_0x349aac){const _0x33d810=a0_0x33d8();return a0_0x21eb=function(_0x21eb03,_0x2fa844){_0x21eb03=_0x21eb03-0x1b6;let _0x4b2fa6=_0x33d810[_0x21eb03];return _0x4b2fa6;},a0_0x21eb(_0x56758b,_0x349aac);}const express=require('express'),app=express(),router=express['Router'](),bcrypt=require('bcryptjs'),{profile,master_shop,sing_up,categories,brands,units,product,warehouse,staff}=require('../models/all_models'),auth=require(a0_0x47b772(0x1d5)),users=require(a0_0x47b772(0x1bf));function a0_0x33d8(){const _0x421985=['redirect','English','hash','\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/staff/view','370mjyFPt','Finished\x20Goods','staff\x20data\x20update\x20successfully','mobile','log','exports','Hindi','English\x20(US)','$name','password','render','/view','German','Chinese','errors','2513499zPEGYZ','find','name','Arabic','params','Raw\x20Materials','Arabic\x20(ae)','/view/:id','7739158PodKlD','4srjBWa','flash','1675321dQhofN','4314790DNNlYZ','status','findOne','save','body','Portuguese','../public/language/languages.json','findById','2MXJSLS','staff','email','Email\x20','771529uiwMCK','226296zHeSsf','warehouse_category','json','Portuguese\x20(BR)','master','success','get','Spanish','user','language','441SnElOj','warehouse','French','post','4855770OkIwKn','../middleware/auth'];a0_0x33d8=function(){return _0x421985;};return a0_0x33d8();}router[a0_0x47b772(0x1cc)](a0_0x47b772(0x1e6),auth,async(_0x1c155e,_0x4d472d)=>{const _0xd85118=a0_0x47b772;try{const {username:_0x456e6b,email:_0x158873,role:_0x2a3ce9}=_0x1c155e[_0xd85118(0x1ce)],_0x40475d=_0x1c155e[_0xd85118(0x1ce)],_0x54a643=await profile[_0xd85118(0x1bb)]({'email':_0x40475d[_0xd85118(0x1c3)]}),_0x408697=await master_shop[_0xd85118(0x1eb)]();console['log'](_0xd85118(0x1ca),_0x408697),warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0xd85118(0x1e3),'name':{'$first':_0xd85118(0x1e3)}}}]);const _0x4cbca8=await staff[_0xd85118(0x1eb)]();console['log'](_0x4cbca8);if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1e2)){var _0x4a7e68=users[_0xd85118(0x1d7)];console[_0xd85118(0x1df)](_0x4a7e68);}else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1e1))var _0x4a7e68=users[_0xd85118(0x1e1)];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1e7))var _0x4a7e68=users['German'];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1cd))var _0x4a7e68=users[_0xd85118(0x1cd)];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1d2))var _0x4a7e68=users['French'];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1c9))var _0x4a7e68=users[_0xd85118(0x1be)];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1e8))var _0x4a7e68=users[_0xd85118(0x1e8)];else{if(_0x408697[0x0][_0xd85118(0x1cf)]==_0xd85118(0x1f0))var _0x4a7e68=users[_0xd85118(0x1ed)];}}}}}}}let _0x5f11f3=[_0xd85118(0x1ef),_0xd85118(0x1dc)];_0x4d472d[_0xd85118(0x1e5)](_0xd85118(0x1c2),{'success':_0x1c155e[_0xd85118(0x1b7)](_0xd85118(0x1cb)),'errors':_0x1c155e[_0xd85118(0x1b7)](_0xd85118(0x1e9)),'role':_0x40475d,'profile':_0x54a643,'master_shop':_0x408697,'user':_0x4cbca8,'language':_0x4a7e68,'warehouse':warehouse_data,'warehouse_cat':_0x5f11f3});}catch(_0x3200fb){console[_0xd85118(0x1df)](_0x3200fb);}}),router[a0_0x47b772(0x1d3)](a0_0x47b772(0x1e6),auth,async(_0x784433,_0x56cbb2)=>{const _0x581a4d=a0_0x47b772;try{const {name:_0xe9199d,email:_0x266ed8,mobile:_0x49feb7,password:_0x12931b,status:_0x3b6e09,warehouse:_0x2656c2,position:_0x443df3,warehouse_cat:_0xb173b8}=_0x784433[_0x581a4d(0x1bd)],_0x11e515=await bcrypt[_0x581a4d(0x1d8)](_0x12931b,0xa),_0x242ecc=new staff({'name':_0xe9199d,'email':_0x266ed8,'mobile':_0x49feb7,'status':_0x3b6e09,'warehouse':_0x2656c2,'position':_0x443df3,'warehouse_category':_0xb173b8}),_0x129842=await staff['findOne']({'email':_0x266ed8});console['log'](_0x129842);if(_0x129842)return _0x784433[_0x581a4d(0x1b7)](_0x581a4d(0x1e9),_0x581a4d(0x1c4)+_0x266ed8+_0x581a4d(0x1d9)),_0x56cbb2[_0x581a4d(0x1d6)]('back'),![];const _0x35f0e9=await _0x242ecc[_0x581a4d(0x1bc)](),_0x5f3c63=new sing_up({'name':_0xe9199d,'email':_0x266ed8,'password':_0x11e515,'role':'staff'}),_0x2792d3=await _0x5f3c63['save'](),_0x5b3a04=new profile({'firstname':_0xe9199d,'email':_0x266ed8}),_0x45873a=await _0x5b3a04[_0x581a4d(0x1bc)]();_0x784433['flash'](_0x581a4d(0x1cb),_0xe9199d+'\x20is\x20add\x20successfully'),_0x56cbb2['redirect'](_0x581a4d(0x1da));}catch(_0x1fffc4){console[_0x581a4d(0x1df)](_0x1fffc4);}}),router['get'](a0_0x47b772(0x1f1),auth,async(_0x8d83db,_0x43e7ff)=>{const _0x519a0f=a0_0x47b772;try{const _0x20fbd9=_0x8d83db[_0x519a0f(0x1ee)]['id'],_0x17b268=await master_shop[_0x519a0f(0x1eb)](),_0x3fe26e=await staff[_0x519a0f(0x1c0)](_0x20fbd9);if(_0x17b268[0x0][_0x519a0f(0x1cf)]=='English\x20(US)'){var _0x5db0be=users[_0x519a0f(0x1d7)];console[_0x519a0f(0x1df)](_0x5db0be);}else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]=='Hindi')var _0x5db0be=users[_0x519a0f(0x1e1)];else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]==_0x519a0f(0x1e7))var _0x5db0be=users[_0x519a0f(0x1e7)];else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]==_0x519a0f(0x1cd))var _0x5db0be=users['Spanish'];else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]==_0x519a0f(0x1d2))var _0x5db0be=users[_0x519a0f(0x1d2)];else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]==_0x519a0f(0x1c9))var _0x5db0be=users['Portuguese'];else{if(_0x17b268[0x0][_0x519a0f(0x1cf)]==_0x519a0f(0x1e8))var _0x5db0be=users[_0x519a0f(0x1e8)];else{if(_0x17b268[0x0]['language']==_0x519a0f(0x1f0))var _0x5db0be=users[_0x519a0f(0x1ed)];}}}}}}}let _0x100544=[_0x519a0f(0x1ef),'Finished\x20Goods'];_0x43e7ff['render'](_0x519a0f(0x1c2),{'success':_0x8d83db[_0x519a0f(0x1b7)](_0x519a0f(0x1cb)),'errors':_0x8d83db[_0x519a0f(0x1b7)]('errors'),'master_shop':_0x17b268,'user':_0x3fe26e,'language':_0x5db0be,'warehouse_cat':_0x100544});}catch(_0x3794d2){console[_0x519a0f(0x1df)](_0x3794d2);}}),router['post']('/view/:id',auth,async(_0x3d6d56,_0x3093cd)=>{const _0x559b5f=a0_0x47b772;try{const _0xbd35f8=_0x3d6d56[_0x559b5f(0x1ee)]['id'],_0x5c2399=await staff[_0x559b5f(0x1c0)](_0xbd35f8),{name:_0x10c20f,email:_0x52956f,mobile:_0x5ddd6b,password:_0x3d41f2,status:_0x1d8f53,warehouse:_0x1397c1,position:_0x4e61a6,warehouse_cat:_0xfaaaa4}=_0x3d6d56['body'];_0x5c2399[_0x559b5f(0x1ec)]=_0x10c20f,_0x5c2399[_0x559b5f(0x1c3)]=_0x52956f,_0x5c2399[_0x559b5f(0x1de)]=_0x5ddd6b,_0x5c2399[_0x559b5f(0x1e4)]=_0x3d41f2,_0x5c2399[_0x559b5f(0x1ba)]=_0x1d8f53,_0x5c2399[_0x559b5f(0x1d1)]=_0x1397c1,_0x5c2399['position']=_0x4e61a6,_0x5c2399[_0x559b5f(0x1c7)]=_0xfaaaa4;const _0x904097=await _0x5c2399[_0x559b5f(0x1bc)](),_0x3e3f3d=await profile['findOne']({'email':_0x52956f});_0x3e3f3d['firstname']=_0x10c20f,_0x3e3f3d[_0x559b5f(0x1c3)]=_0x52956f,await _0x3e3f3d[_0x559b5f(0x1bc)](),_0x3d6d56[_0x559b5f(0x1b7)]('success',_0x559b5f(0x1dd)),_0x3093cd[_0x559b5f(0x1d6)]('/staff/view');}catch(_0x445c27){console[_0x559b5f(0x1df)](_0x445c27),_0x3093cd[_0x559b5f(0x1ba)](0xc8)[_0x559b5f(0x1c8)](_0x445c27);}}),module[a0_0x47b772(0x1e0)]=router;