const a0_0x360a09=a0_0x13a2;(function(_0x208e27,_0x1b3d1e){const _0x39fe0f=a0_0x13a2,_0x1826f9=_0x208e27();while(!![]){try{const _0x45c390=parseInt(_0x39fe0f(0x1fc))/0x1+parseInt(_0x39fe0f(0x1f8))/0x2+parseInt(_0x39fe0f(0x1e3))/0x3+-parseInt(_0x39fe0f(0x1e6))/0x4+-parseInt(_0x39fe0f(0x1ed))/0x5+-parseInt(_0x39fe0f(0x209))/0x6+parseInt(_0x39fe0f(0x210))/0x7;if(_0x45c390===_0x1b3d1e)break;else _0x1826f9['push'](_0x1826f9['shift']());}catch(_0x44b44f){_0x1826f9['push'](_0x1826f9['shift']());}}}(a0_0x4722,0x39adb));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x360a09(0x1e9)),{profile,master_shop,sing_up,categories,brands,units,product,warehouse,staff}=require(a0_0x360a09(0x1e7)),auth=require(a0_0x360a09(0x1e0)),users=require(a0_0x360a09(0x1fd));function a0_0x13a2(_0x2ad3be,_0x573ea9){const _0x4722d6=a0_0x4722();return a0_0x13a2=function(_0x13a24c,_0x172663){_0x13a24c=_0x13a24c-0x1d7;let _0x4169ed=_0x4722d6[_0x13a24c];return _0x4169ed;},a0_0x13a2(_0x2ad3be,_0x573ea9);}function a0_0x4722(){const _0x1e5a7d=['user','json','position','success','redirect','English\x20(US)','email','../middleware/auth','find','French','873186gvOwUB','save','Hindi','1120152FYDpvV','../models/all_models','Portuguese\x20(BR)','bcryptjs','Chinese','aggregate','warehouse','1676285fNvTTu','Portuguese','/staff/view','\x20is\x20add\x20successfully','password','language','/view/:id','name','params','English','\x20is\x20alredy\x20added.\x20please\x20choose\x20another','484744tLbfae','German','Arabic','errors','72244lVCtLM','../public/language/languages.json','Arabic\x20(ae)','findOne','Raw\x20Materials','body','back','Finished\x20Goods','post','findById','log','flash','hash','688920vuxkmh','get','/view','staff\x20data\x20update\x20successfully','$name','status','Spanish','2524816SUtqVq','mobile','Email\x20'];a0_0x4722=function(){return _0x1e5a7d;};return a0_0x4722();}router[a0_0x360a09(0x20a)](a0_0x360a09(0x20b),auth,async(_0x4aff19,_0x56bb60)=>{const _0x40e17d=a0_0x360a09;try{const {username:_0x8c012e,email:_0x349d75,role:_0x3aa267}=_0x4aff19[_0x40e17d(0x1d9)],_0x406b6f=_0x4aff19['user'],_0x5497cd=await profile[_0x40e17d(0x1ff)]({'email':_0x406b6f['email']}),_0xa70927=await master_shop['find']();console[_0x40e17d(0x206)]('master',_0xa70927),warehouse_data=await warehouse[_0x40e17d(0x1eb)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0x40e17d(0x20d)}}}]);const _0xa536f4=await staff[_0x40e17d(0x1e1)]();console[_0x40e17d(0x206)](_0xa536f4);if(_0xa70927[0x0][_0x40e17d(0x1f2)]==_0x40e17d(0x1de)){var _0x1fa370=users[_0x40e17d(0x1f6)];console[_0x40e17d(0x206)](_0x1fa370);}else{if(_0xa70927[0x0][_0x40e17d(0x1f2)]==_0x40e17d(0x1e5))var _0x1fa370=users[_0x40e17d(0x1e5)];else{if(_0xa70927[0x0]['language']==_0x40e17d(0x1f9))var _0x1fa370=users['German'];else{if(_0xa70927[0x0][_0x40e17d(0x1f2)]==_0x40e17d(0x20f))var _0x1fa370=users[_0x40e17d(0x20f)];else{if(_0xa70927[0x0][_0x40e17d(0x1f2)]==_0x40e17d(0x1e2))var _0x1fa370=users[_0x40e17d(0x1e2)];else{if(_0xa70927[0x0]['language']==_0x40e17d(0x1e8))var _0x1fa370=users[_0x40e17d(0x1ee)];else{if(_0xa70927[0x0][_0x40e17d(0x1f2)]==_0x40e17d(0x1ea))var _0x1fa370=users[_0x40e17d(0x1ea)];else{if(_0xa70927[0x0]['language']==_0x40e17d(0x1fe))var _0x1fa370=users[_0x40e17d(0x1fa)];}}}}}}}let _0x2e4974=['Raw\x20Materials',_0x40e17d(0x203)];_0x56bb60['render']('staff',{'success':_0x4aff19[_0x40e17d(0x207)]('success'),'errors':_0x4aff19['flash'](_0x40e17d(0x1fb)),'role':_0x406b6f,'profile':_0x5497cd,'master_shop':_0xa70927,'user':_0xa536f4,'language':_0x1fa370,'warehouse':warehouse_data,'warehouse_cat':_0x2e4974});}catch(_0x245156){console[_0x40e17d(0x206)](_0x245156);}}),router[a0_0x360a09(0x204)](a0_0x360a09(0x20b),auth,async(_0x4f8e8e,_0x1184e7)=>{const _0x56e47d=a0_0x360a09;try{const {name:_0x12742e,email:_0x1b4faf,mobile:_0x53e19f,password:_0x36e88b,status:_0x372c2e,warehouse:_0x18b94a,position:_0xc393e9,warehouse_cat:_0x403976}=_0x4f8e8e[_0x56e47d(0x201)],_0x61c59e=await bcrypt[_0x56e47d(0x208)](_0x36e88b,0xa),_0xd5734d=new staff({'name':_0x12742e,'email':_0x1b4faf,'mobile':_0x53e19f,'status':_0x372c2e,'warehouse':_0x18b94a,'position':_0xc393e9,'warehouse_category':_0x403976}),_0x499be4=await staff[_0x56e47d(0x1ff)]({'email':_0x1b4faf});console[_0x56e47d(0x206)](_0x499be4);if(_0x499be4)return _0x4f8e8e[_0x56e47d(0x207)](_0x56e47d(0x1fb),_0x56e47d(0x1d8)+_0x1b4faf+_0x56e47d(0x1f7)),_0x1184e7['redirect'](_0x56e47d(0x202)),![];const _0x527b85=await _0xd5734d['save'](),_0x4f9884=new sing_up({'name':_0x12742e,'email':_0x1b4faf,'password':_0x61c59e,'role':'staff'}),_0x3609ba=await _0x4f9884[_0x56e47d(0x1e4)](),_0x3c7283=new profile({'firstname':_0x12742e,'email':_0x1b4faf}),_0x162300=await _0x3c7283[_0x56e47d(0x1e4)]();_0x4f8e8e[_0x56e47d(0x207)]('success',_0x12742e+_0x56e47d(0x1f0)),_0x1184e7[_0x56e47d(0x1dd)]('/staff/view');}catch(_0x26a5d1){console['log'](_0x26a5d1);}}),router['get'](a0_0x360a09(0x1f3),auth,async(_0x40a3d5,_0x5e2196)=>{const _0x1af06b=a0_0x360a09;try{const _0x2b222e=_0x40a3d5[_0x1af06b(0x1f5)]['id'],_0x226c2a=await master_shop[_0x1af06b(0x1e1)](),_0x9e44cf=await staff[_0x1af06b(0x205)](_0x2b222e);if(_0x226c2a[0x0][_0x1af06b(0x1f2)]=='English\x20(US)'){var _0x498240=users[_0x1af06b(0x1f6)];console[_0x1af06b(0x206)](_0x498240);}else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]=='Hindi')var _0x498240=users['Hindi'];else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]==_0x1af06b(0x1f9))var _0x498240=users[_0x1af06b(0x1f9)];else{if(_0x226c2a[0x0]['language']=='Spanish')var _0x498240=users[_0x1af06b(0x20f)];else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]==_0x1af06b(0x1e2))var _0x498240=users[_0x1af06b(0x1e2)];else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]==_0x1af06b(0x1e8))var _0x498240=users['Portuguese'];else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]==_0x1af06b(0x1ea))var _0x498240=users[_0x1af06b(0x1ea)];else{if(_0x226c2a[0x0][_0x1af06b(0x1f2)]==_0x1af06b(0x1fe))var _0x498240=users['Arabic'];}}}}}}}let _0x242e5a=[_0x1af06b(0x200),_0x1af06b(0x203)];_0x5e2196['render']('staff',{'success':_0x40a3d5[_0x1af06b(0x207)](_0x1af06b(0x1dc)),'errors':_0x40a3d5[_0x1af06b(0x207)](_0x1af06b(0x1fb)),'master_shop':_0x226c2a,'user':_0x9e44cf,'language':_0x498240,'warehouse_cat':_0x242e5a});}catch(_0xdea316){console[_0x1af06b(0x206)](_0xdea316);}}),router['post'](a0_0x360a09(0x1f3),auth,async(_0x415a29,_0x2f6c27)=>{const _0x3da8d2=a0_0x360a09;try{const _0xe108de=_0x415a29[_0x3da8d2(0x1f5)]['id'],_0x177b33=await staff['findById'](_0xe108de),{name:_0x47f484,email:_0x40f06b,mobile:_0x4d5d85,password:_0x3c1806,status:_0x4b9b80,warehouse:_0x108045,position:_0x13d51e,warehouse_cat:_0x5945ab}=_0x415a29[_0x3da8d2(0x201)];_0x177b33[_0x3da8d2(0x1f4)]=_0x47f484,_0x177b33[_0x3da8d2(0x1df)]=_0x40f06b,_0x177b33[_0x3da8d2(0x1d7)]=_0x4d5d85,_0x177b33[_0x3da8d2(0x1f1)]=_0x3c1806,_0x177b33['status']=_0x4b9b80,_0x177b33[_0x3da8d2(0x1ec)]=_0x108045,_0x177b33[_0x3da8d2(0x1db)]=_0x13d51e,_0x177b33['warehouse_category']=_0x5945ab;const _0x3af96c=await _0x177b33[_0x3da8d2(0x1e4)](),_0x5c7812=await profile[_0x3da8d2(0x1ff)]({'email':_0x40f06b});_0x5c7812['firstname']=_0x47f484,_0x5c7812[_0x3da8d2(0x1df)]=_0x40f06b,await _0x5c7812[_0x3da8d2(0x1e4)](),_0x415a29[_0x3da8d2(0x207)](_0x3da8d2(0x1dc),_0x3da8d2(0x20c)),_0x2f6c27[_0x3da8d2(0x1dd)](_0x3da8d2(0x1ef));}catch(_0x2ba379){console[_0x3da8d2(0x206)](_0x2ba379),_0x2f6c27[_0x3da8d2(0x20e)](0xc8)[_0x3da8d2(0x1da)](_0x2ba379);}}),module['exports']=router;