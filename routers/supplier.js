const a0_0x1ff6bb=a0_0x14ca;(function(_0x1e3018,_0x5979ca){const _0x6756a2=a0_0x14ca,_0x29edc2=_0x1e3018();while(!![]){try{const _0x370bb8=-parseInt(_0x6756a2(0x13b))/0x1+-parseInt(_0x6756a2(0x141))/0x2*(parseInt(_0x6756a2(0x181))/0x3)+parseInt(_0x6756a2(0x191))/0x4+parseInt(_0x6756a2(0x15a))/0x5*(parseInt(_0x6756a2(0x199))/0x6)+-parseInt(_0x6756a2(0x19b))/0x7*(parseInt(_0x6756a2(0x19d))/0x8)+parseInt(_0x6756a2(0x18d))/0x9*(-parseInt(_0x6756a2(0x134))/0xa)+parseInt(_0x6756a2(0x16e))/0xb*(parseInt(_0x6756a2(0x149))/0xc);if(_0x370bb8===_0x5979ca)break;else _0x29edc2['push'](_0x29edc2['shift']());}catch(_0xc9030d){_0x29edc2['push'](_0x29edc2['shift']());}}}(a0_0x2bee,0x9bc1b));const express=require(a0_0x1ff6bb(0x18b)),app=express(),router=express[a0_0x1ff6bb(0x15b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x1ff6bb(0x135)),auth=require(a0_0x1ff6bb(0x13d)),users=require(a0_0x1ff6bb(0x170)),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x1ff6bb(0x19a));router[a0_0x1ff6bb(0x197)]('/view',auth,async(_0x1d3129,_0x32fba7)=>{const _0x5c1a5b=a0_0x1ff6bb;try{const {username:_0x3e929e,email:_0x4e3641,role:_0x60cab5}=_0x1d3129['user'],_0x1f9b1f=_0x1d3129[_0x5c1a5b(0x162)],_0x1f4c8c=await profile[_0x5c1a5b(0x15e)]({'email':_0x1f9b1f[_0x5c1a5b(0x19e)]}),_0x3fd236=await master_shop[_0x5c1a5b(0x153)]();console[_0x5c1a5b(0x14f)](_0x5c1a5b(0x146),_0x3fd236);const _0x362c73=await suppliers[_0x5c1a5b(0x153)]();console[_0x5c1a5b(0x14f)](_0x362c73);const _0x3dc9d5=await suppliers[_0x5c1a5b(0x140)]([{'$lookup':{'from':_0x5c1a5b(0x139),'localField':_0x5c1a5b(0x160),'foreignField':_0x5c1a5b(0x14c),'as':_0x5c1a5b(0x14b)}}]),_0x4baa1c=_0x3dc9d5[_0x5c1a5b(0x198)](_0x4eaa07=>{const _0x4bc43f=_0x5c1a5b;console[_0x4bc43f(0x14f)](_0x4bc43f(0x142),_0x4eaa07);var _0x1da646=0x0,_0x568ccd=0x0;return _0x4eaa07[_0x4bc43f(0x14b)]['forEach'](_0x3cb6d0=>{const _0x216734=_0x4bc43f;console[_0x216734(0x14f)](_0x216734(0x186),_0x3cb6d0),_0x3cb6d0[_0x216734(0x196)]==_0x216734(0x163)?_0x1da646+=_0x3cb6d0[_0x216734(0x159)]:_0x568ccd+=_0x3cb6d0['amount'];}),_0x4eaa07[_0x4bc43f(0x13f)]=_0x1da646,_0x4eaa07[_0x4bc43f(0x18f)]=_0x568ccd,_0x4eaa07;});console['log'](_0x5c1a5b(0x14a),_0x4baa1c);if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x13c)){var _0x48c24d=users[_0x5c1a5b(0x182)];console['log'](_0x48c24d);}else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x188))var _0x48c24d=users[_0x5c1a5b(0x188)];else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x136))var _0x48c24d=users['German'];else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x193))var _0x48c24d=users[_0x5c1a5b(0x193)];else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x17a))var _0x48c24d=users['French'];else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x176))var _0x48c24d=users[_0x5c1a5b(0x171)];else{if(_0x3fd236[0x0][_0x5c1a5b(0x187)]==_0x5c1a5b(0x16a))var _0x48c24d=users[_0x5c1a5b(0x16a)];else{if(_0x3fd236[0x0]['language']==_0x5c1a5b(0x172))var _0x48c24d=users[_0x5c1a5b(0x178)];}}}}}}}_0x32fba7[_0x5c1a5b(0x138)](_0x5c1a5b(0x173),{'success':_0x1d3129[_0x5c1a5b(0x165)]('success'),'errors':_0x1d3129[_0x5c1a5b(0x165)](_0x5c1a5b(0x19f)),'user':_0x362c73,'profile':_0x1f4c8c,'master_shop':_0x3fd236,'role':_0x1f9b1f,'payment':_0x4baa1c,'language':_0x48c24d});}catch(_0x443d1a){console[_0x5c1a5b(0x14f)](_0x443d1a);}}),router['post'](a0_0x1ff6bb(0x179),auth,async(_0x5455a4,_0x35b9e2)=>{const _0x30a239=a0_0x1ff6bb;try{const {name:_0x455700,email:_0xf6cf5,mobile:_0x303bf1,company:_0x58a028,address:_0x46a304,receivable:_0x42f515,payable:_0x4880be,code:_0x432401,contactperson:_0x3b0ed3,landline:_0x52ec0c}=_0x5455a4[_0x30a239(0x13e)],_0x3788d7=new suppliers({'name':_0x455700,'email':_0xf6cf5,'mobile':_0x303bf1,'company':_0x58a028,'address':_0x46a304,'receivable':_0x42f515,'payable':_0x4880be,'suppliers_code':_0x432401,'contactperson':_0x3b0ed3,'landline':_0x52ec0c}),_0x105c21=await _0x3788d7[_0x30a239(0x15c)]();_0x5455a4[_0x30a239(0x165)]('success','supplier\x20data\x20add\x20successfully'),_0x35b9e2[_0x30a239(0x18e)](_0x30a239(0x15f));}catch(_0x2c1e84){console[_0x30a239(0x14f)](_0x2c1e84);}}),router['get'](a0_0x1ff6bb(0x16c),auth,async(_0x36744c,_0x6eb0c6)=>{const _0x5e8090=a0_0x1ff6bb;try{const {username:_0x31915f,email:_0x7892e8,role:_0x3488fd}=_0x36744c['user'],_0x1b7995=_0x36744c[_0x5e8090(0x162)],_0x59053e=await profile[_0x5e8090(0x15e)]({'email':_0x1b7995['email']}),_0x17dab3=await master_shop[_0x5e8090(0x153)]();console[_0x5e8090(0x14f)](_0x5e8090(0x146),_0x17dab3);const _0x2baa0b=_0x36744c[_0x5e8090(0x184)]['id'],_0x3721d8=await suppliers[_0x5e8090(0x143)](_0x2baa0b);console['log'](_0x3721d8);if(_0x17dab3[0x0][_0x5e8090(0x187)]==_0x5e8090(0x13c)){var _0x2c928a=users[_0x5e8090(0x182)];console[_0x5e8090(0x14f)](_0x2c928a);}else{if(_0x17dab3[0x0][_0x5e8090(0x187)]=='Hindi')var _0x2c928a=users['Hindi'];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]==_0x5e8090(0x136))var _0x2c928a=users[_0x5e8090(0x136)];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]==_0x5e8090(0x193))var _0x2c928a=users[_0x5e8090(0x193)];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]=='French')var _0x2c928a=users[_0x5e8090(0x17a)];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]=='Portuguese\x20(BR)')var _0x2c928a=users[_0x5e8090(0x171)];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]==_0x5e8090(0x16a))var _0x2c928a=users[_0x5e8090(0x16a)];else{if(_0x17dab3[0x0][_0x5e8090(0x187)]==_0x5e8090(0x172))var _0x2c928a=users['Arabic'];}}}}}}}_0x6eb0c6[_0x5e8090(0x138)](_0x5e8090(0x173),{'success':_0x36744c[_0x5e8090(0x165)](_0x5e8090(0x17b)),'errors':_0x36744c[_0x5e8090(0x165)]('errors'),'role':_0x1b7995,'profile':_0x59053e,'master_shop':_0x17dab3,'user':_0x3721d8,'language':_0x2c928a});}catch(_0x481f0f){console[_0x5e8090(0x14f)](_0x481f0f);}}),router[a0_0x1ff6bb(0x16d)](a0_0x1ff6bb(0x16c),auth,async(_0xaf0db2,_0x3461c3)=>{const _0x2eaeb4=a0_0x1ff6bb;try{const _0xce7d74=_0xaf0db2['params']['id'],_0x1c9e75=await suppliers[_0x2eaeb4(0x143)](_0xce7d74),{name:_0x21b348,email:_0x4443f8,mobile:_0x13ee50,company:_0x4cbe2c,address:_0x1ec832,receivable:_0x13d3b7,payable:_0x1e8273,code:_0x3bda0e,contactperson:_0x3b75bd,landline:_0x3f589a}=_0xaf0db2[_0x2eaeb4(0x13e)];_0x1c9e75[_0x2eaeb4(0x160)]=_0x21b348,_0x1c9e75[_0x2eaeb4(0x19e)]=_0x4443f8,_0x1c9e75[_0x2eaeb4(0x192)]=_0x13ee50,_0x1c9e75[_0x2eaeb4(0x155)]=_0x4cbe2c,_0x1c9e75[_0x2eaeb4(0x17c)]=_0x1ec832,_0x1c9e75[_0x2eaeb4(0x161)]=_0x13d3b7,_0x1c9e75[_0x2eaeb4(0x14e)]=_0x1e8273,_0x1c9e75['suppliers_code']=_0x3bda0e,_0x1c9e75[_0x2eaeb4(0x144)]=_0x3b75bd,_0x1c9e75['landline']=_0x3f589a;const _0x9e9dd5=await _0x1c9e75[_0x2eaeb4(0x15c)]();_0xaf0db2[_0x2eaeb4(0x165)](_0x2eaeb4(0x17b),'supplier\x20data\x20update\x20successfully'),_0x3461c3[_0x2eaeb4(0x18e)]('/supplier/view');}catch(_0x1dbce5){console[_0x2eaeb4(0x14f)](_0x1dbce5);}}),router['get']('/view/payment/:id',auth,async(_0x2af541,_0x344871)=>{const _0x5bb565=a0_0x1ff6bb;try{const {username:_0xfb2492,email:_0x161f8a,role:_0x1560b1}=_0x2af541['user'],_0x598a73=_0x2af541[_0x5bb565(0x162)],_0x23132b=await profile['findOne']({'email':_0x598a73[_0x5bb565(0x19e)]}),_0x1c7242=await master_shop['find']();console[_0x5bb565(0x14f)]('master',_0x1c7242),console[_0x5bb565(0x14f)](_0x2af541[_0x5bb565(0x184)]['id']);const _0x3d557d=await suppliers[_0x5bb565(0x15e)]({'_id':_0x2af541[_0x5bb565(0x184)]['id']});console[_0x5bb565(0x14f)](_0x3d557d);const _0x3adb9c=await s_payment_data[_0x5bb565(0x153)]({'suppliers':_0x3d557d[_0x5bb565(0x160)]});console[_0x5bb565(0x14f)](_0x3adb9c);const _0x1da4be=await s_payment_data[_0x5bb565(0x140)]([{'$match':{'suppliers':_0x3d557d[_0x5bb565(0x160)]}},{'$match':{'reason':_0x5bb565(0x163)}},{'$group':{'_id':_0x5bb565(0x185),'sum':{'$sum':_0x5bb565(0x1a0)}}}]);console[_0x5bb565(0x14f)](_0x5bb565(0x17d),_0x1da4be);const _0x2ec980=await s_payment_data[_0x5bb565(0x140)]([{'$match':{'suppliers':_0x3d557d[_0x5bb565(0x160)]}},{'$match':{'reason':_0x5bb565(0x166)}},{'$group':{'_id':_0x5bb565(0x185),'sum':{'$sum':'$amount'}}}]);console[_0x5bb565(0x14f)](_0x5bb565(0x190),_0x2ec980);if(_0x1c7242[0x0][_0x5bb565(0x187)]==_0x5bb565(0x13c)){var _0x1d411f=users[_0x5bb565(0x182)];console[_0x5bb565(0x14f)](_0x1d411f);}else{if(_0x1c7242[0x0][_0x5bb565(0x187)]==_0x5bb565(0x188))var _0x1d411f=users[_0x5bb565(0x188)];else{if(_0x1c7242[0x0][_0x5bb565(0x187)]==_0x5bb565(0x136))var _0x1d411f=users[_0x5bb565(0x136)];else{if(_0x1c7242[0x0][_0x5bb565(0x187)]=='Spanish')var _0x1d411f=users[_0x5bb565(0x193)];else{if(_0x1c7242[0x0]['language']==_0x5bb565(0x17a))var _0x1d411f=users[_0x5bb565(0x17a)];else{if(_0x1c7242[0x0]['language']==_0x5bb565(0x176))var _0x1d411f=users[_0x5bb565(0x171)];else{if(_0x1c7242[0x0][_0x5bb565(0x187)]=='Chinese')var _0x1d411f=users[_0x5bb565(0x16a)];else{if(_0x1c7242[0x0][_0x5bb565(0x187)]==_0x5bb565(0x172))var _0x1d411f=users[_0x5bb565(0x178)];}}}}}}}_0x344871[_0x5bb565(0x138)]('supplier_payment',{'success':_0x2af541['flash']('success'),'errors':_0x2af541[_0x5bb565(0x165)](_0x5bb565(0x19f)),'role':_0x598a73,'profile':_0x23132b,'master_shop':_0x1c7242,'payment':_0x3adb9c,'payable':_0x1da4be,'receivable':_0x2ec980,'language':_0x1d411f});}catch(_0xa4306d){console[_0x5bb565(0x14f)](_0xa4306d);}}),router[a0_0x1ff6bb(0x197)](a0_0x1ff6bb(0x15d),auth,async(_0x5f33d6,_0x1ef234)=>{const _0x380df4=a0_0x1ff6bb;try{const _0xe3dc7f=new excelJS[(_0x380df4(0x189))](),_0xea837c=_0xe3dc7f[_0x380df4(0x174)]('Customers');return _0xea837c[_0x380df4(0x137)]=[{'header':'Name','key':_0x380df4(0x175),'width':0xa},{'header':_0x380df4(0x147),'key':_0x380df4(0x195),'width':0xa},{'header':_0x380df4(0x16f),'key':_0x380df4(0x18c),'width':0xa},{'header':'Mobile_number','key':_0x380df4(0x17c),'width':0xa},{'header':_0x380df4(0x150),'key':_0x380df4(0x192),'width':0xa},{'header':_0x380df4(0x17c),'key':_0x380df4(0x19e),'width':0xa}],_0x1ef234[_0x380df4(0x177)](_0x380df4(0x167),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x1ef234[_0x380df4(0x177)](_0x380df4(0x13a),'attachment;\x20filename=supplier_Migration_File.xlsx'),_0xe3dc7f[_0x380df4(0x133)][_0x380df4(0x17f)](_0x1ef234)[_0x380df4(0x145)](()=>{const _0x1e8219=_0x380df4;_0x1ef234[_0x1e8219(0x18a)](0xc8);});}catch(_0x2a92f7){_0x1ef234['status'](0x190)[_0x380df4(0x180)]({'errors':_0x2a92f7[_0x380df4(0x156)]});}});const storage1=multer['diskStorage']({'destination':(_0x2d1e5c,_0x42123e,_0x10dcd1)=>{const _0x435b2a=a0_0x1ff6bb;_0x10dcd1(null,_0x435b2a(0x158));},'filename':(_0xa2bb89,_0x110271,_0x241706)=>{const _0x1e3b44=a0_0x1ff6bb;_0x241706(null,Date[_0x1e3b44(0x14d)]()+_0x110271[_0x1e3b44(0x154)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x14ca(_0x3f6723,_0x224463){const _0x2bee61=a0_0x2bee();return a0_0x14ca=function(_0x14ca2a,_0x3a216d){_0x14ca2a=_0x14ca2a-0x133;let _0x2e8231=_0x2bee61[_0x14ca2a];return _0x2e8231;},a0_0x14ca(_0x3f6723,_0x224463);}router[a0_0x1ff6bb(0x16d)](a0_0x1ff6bb(0x16b),auth,uploadMigrate[a0_0x1ff6bb(0x152)]('supplier_product_file'),async(_0x45a99a,_0x5e78a0)=>{const _0x7d76b=a0_0x1ff6bb,_0x25d548=_0x45a99a['file']['filename'],_0x4b566c=await xlsx['readFile'](_0x7d76b(0x183)+_0x25d548);let _0x44aaeb=_0x4b566c[_0x7d76b(0x169)],_0x27bdc4=xlsx[_0x7d76b(0x168)][_0x7d76b(0x164)](_0x4b566c[_0x7d76b(0x194)][_0x44aaeb[0x0]]);for(const _0xf58dcf of _0x27bdc4){const _0x4f6609=_0xf58dcf[_0x7d76b(0x17e)],_0x16bc21=_0xf58dcf['Supplier_Code'],_0x313473=_0xf58dcf['address'],_0x316d3b=_0xf58dcf['Mobile_number'],_0x2c4bc8=_0xf58dcf[_0x7d76b(0x16f)],_0x44ff56=_0xf58dcf[_0x7d76b(0x150)];try{let _0x99ee12=await suppliers[_0x7d76b(0x15e)]({'name':_0x4f6609});if(!_0x99ee12){const _0x38811f=new suppliers({'name':_0x4f6609,'suppliers_code':_0x16bc21,'address':_0x313473,'mobile':_0x316d3b,'email':_0x2c4bc8,'company':_0x44ff56});_0x99ee12=await _0x38811f[_0x7d76b(0x15c)](),_0x45a99a[_0x7d76b(0x165)]('success',_0x4f6609+_0x7d76b(0x148));}else _0x45a99a['flash']('error',_0x4f6609+_0x7d76b(0x19c));}catch(_0x4267f9){_0x5e78a0[_0x7d76b(0x18a)](0x1f4)[_0x7d76b(0x151)]({'proderror':_0x4267f9[_0x7d76b(0x156)],'aproduct':ProductName});}}_0x5e78a0[_0x7d76b(0x18e)](_0x7d76b(0x15f));}),module[a0_0x1ff6bb(0x157)]=router;function a0_0x2bee(){const _0xbd583f=['email','errors','$amount','xlsx','10ovoIYd','../models/all_models','German','columns','render','s_payments','Content-Disposition','347726RzhmeN','English\x20(US)','../middleware/auth','body','purchase','aggregate','50sZheyW','data','findById','contactperson','then','master','Supplier_Code','\x20added\x20successfully','5976AnTxyA','supplier.js\x20payment_data','suppliers_docs','suppliers','now','payable','log','Company_Name','json','single','find','originalname','company','message','exports','public/Migration','amount','10TtXHXI','Router','save','/products_export_migrate_file','findOne','/supplier/view','name','receivable','user','Purchase','sheet_to_json','flash','Purchase\x20Return','Content-Type','utils','SheetNames','Chinese','/supplier_import_migrate_file','/view/:id','post','34793Qxjeir','Email','../public/language/languages.json','Portuguese','Arabic\x20(ae)','supplier','addWorksheet','PBrands','Portuguese\x20(BR)','setHeader','Arabic','/view','French','success','address','payable_sum','Name','write','send','51771TTLMmE','English','public/Migration/','params','$reason','doc','language','Hindi','Workbook','status','express','SalesmanName','7846074iMWmFQ','redirect','purchase_return','receivable_sum','2897944KCmADt','mobile','Spanish','Sheets','PUnits','reason','get','map','3343416GAsCqa','multer','224bUnCOF','\x20Failed','281304hnVqsQ'];a0_0x2bee=function(){return _0xbd583f;};return a0_0x2bee();}