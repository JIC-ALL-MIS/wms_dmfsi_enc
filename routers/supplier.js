function a0_0x3eaa(_0x123647,_0x1796cd){const _0x1809ab=a0_0x1809();return a0_0x3eaa=function(_0x3eaaf4,_0x23eda4){_0x3eaaf4=_0x3eaaf4-0x83;let _0xa9ca8f=_0x1809ab[_0x3eaaf4];return _0xa9ca8f;},a0_0x3eaa(_0x123647,_0x1796cd);}const a0_0x400fd8=a0_0x3eaa;(function(_0x2f693f,_0x271345){const _0x3705f6=a0_0x3eaa,_0x1b9e50=_0x2f693f();while(!![]){try{const _0x207dc2=-parseInt(_0x3705f6(0xb0))/0x1*(parseInt(_0x3705f6(0xb2))/0x2)+parseInt(_0x3705f6(0xa7))/0x3*(-parseInt(_0x3705f6(0xa0))/0x4)+-parseInt(_0x3705f6(0xc4))/0x5+parseInt(_0x3705f6(0x89))/0x6*(-parseInt(_0x3705f6(0xc8))/0x7)+-parseInt(_0x3705f6(0x9e))/0x8*(-parseInt(_0x3705f6(0xf1))/0x9)+-parseInt(_0x3705f6(0xbf))/0xa*(parseInt(_0x3705f6(0x92))/0xb)+parseInt(_0x3705f6(0xba))/0xc;if(_0x207dc2===_0x271345)break;else _0x1b9e50['push'](_0x1b9e50['shift']());}catch(_0xeb4859){_0x1b9e50['push'](_0x1b9e50['shift']());}}}(a0_0x1809,0x42a01));function a0_0x1809(){const _0x5c0345=['../models/all_models','supplier.js\x20payment_data','contactperson','aggregate','Arabic','flash','Company_Name','\x20Failed','purchase','error','Spanish','address','/supplier_import_migrate_file','Hindi','Purchase','language','supplier\x20data\x20add\x20successfully','English\x20(US)','mobile','Content-Type','setHeader','name','get','PBrands','now','doc','suppliers_docs','supplier','27zEctZK','Email','French','PUnits','SheetNames','message','user','3204tmZyCN','exceljs','body','../public/language/languages.json','Chinese','find','xlsx','German','findById','11UcdpjB','purchase_return','data','then','map','Name','../middleware/auth','errors','Supplier_Code','write','render','multer','149712LTZrmL','/view/:id','2380IILgxG','Content-Disposition','findOne','Router','utils','Portuguese\x20(BR)','supplier\x20data\x20update\x20successfully','1977yhiPry','success','Purchase\x20Return','Arabic\x20(ae)','express','post','email','attachment;\x20filename=supplier_Migration_File.xlsx','suppliers','486043JpRoYq','Workbook','2gUXQBk','master','params','filename','reason','SalesmanName','redirect','receivable_sum','22137984XGumEQ','save','Portuguese','log','/view','1367220UlgzZJ','file','supplier_payment','\x20added\x20successfully','s_payments','719105nkhKdu','receivable','landline','json','6153rpolLf','Sheets','/view/payment/:id','status','$reason','exports','/supplier/view','sheet_to_json','single','$amount','amount','forEach','public/Migration/'];a0_0x1809=function(){return _0x5c0345;};return a0_0x1809();}const express=require(a0_0x400fd8(0xab)),app=express(),router=express[a0_0x400fd8(0xa3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x400fd8(0xd5)),auth=require(a0_0x400fd8(0x98)),users=require(a0_0x400fd8(0x8c)),excelJS=require(a0_0x400fd8(0x8a)),xlsx=require(a0_0x400fd8(0x8f)),multer=require(a0_0x400fd8(0x9d));router[a0_0x400fd8(0xeb)](a0_0x400fd8(0xbe),auth,async(_0x86e76,_0x477b65)=>{const _0xe74a2b=a0_0x400fd8;try{const {username:_0x5804e8,email:_0x519272,role:_0x63560d}=_0x86e76[_0xe74a2b(0x88)],_0x15a4c2=_0x86e76[_0xe74a2b(0x88)],_0xb2078e=await profile['findOne']({'email':_0x15a4c2[_0xe74a2b(0xad)]}),_0x20155b=await master_shop[_0xe74a2b(0x8e)]();console[_0xe74a2b(0xbd)]('master',_0x20155b);const _0x4c3fd2=await suppliers[_0xe74a2b(0x8e)]();console[_0xe74a2b(0xbd)](_0x4c3fd2);const _0x2ba27c=await suppliers[_0xe74a2b(0xd8)]([{'$lookup':{'from':_0xe74a2b(0xc3),'localField':_0xe74a2b(0xea),'foreignField':_0xe74a2b(0xaf),'as':_0xe74a2b(0xef)}}]),_0x19c3c5=_0x2ba27c[_0xe74a2b(0x96)](_0x15c208=>{const _0x245d9a=_0xe74a2b;console[_0x245d9a(0xbd)](_0x245d9a(0x94),_0x15c208);var _0x23d37c=0x0,_0x21049d=0x0;return _0x15c208['suppliers_docs'][_0x245d9a(0xd3)](_0x4ec1dc=>{const _0x212f4e=_0x245d9a;console[_0x212f4e(0xbd)](_0x212f4e(0xee),_0x4ec1dc),_0x4ec1dc[_0x212f4e(0xb6)]==_0x212f4e(0xe3)?_0x23d37c+=_0x4ec1dc[_0x212f4e(0xd2)]:_0x21049d+=_0x4ec1dc[_0x212f4e(0xd2)];}),_0x15c208[_0x245d9a(0xdd)]=_0x23d37c,_0x15c208[_0x245d9a(0x93)]=_0x21049d,_0x15c208;});console['log'](_0xe74a2b(0xd6),_0x19c3c5);if(_0x20155b[0x0]['language']==_0xe74a2b(0xe6)){var _0x44f50c=users['English'];console['log'](_0x44f50c);}else{if(_0x20155b[0x0][_0xe74a2b(0xe4)]==_0xe74a2b(0xe2))var _0x44f50c=users[_0xe74a2b(0xe2)];else{if(_0x20155b[0x0][_0xe74a2b(0xe4)]==_0xe74a2b(0x90))var _0x44f50c=users[_0xe74a2b(0x90)];else{if(_0x20155b[0x0]['language']==_0xe74a2b(0xdf))var _0x44f50c=users[_0xe74a2b(0xdf)];else{if(_0x20155b[0x0][_0xe74a2b(0xe4)]=='French')var _0x44f50c=users['French'];else{if(_0x20155b[0x0]['language']==_0xe74a2b(0xa5))var _0x44f50c=users[_0xe74a2b(0xbc)];else{if(_0x20155b[0x0]['language']==_0xe74a2b(0x8d))var _0x44f50c=users[_0xe74a2b(0x8d)];else{if(_0x20155b[0x0][_0xe74a2b(0xe4)]==_0xe74a2b(0xaa))var _0x44f50c=users[_0xe74a2b(0xd9)];}}}}}}}_0x477b65[_0xe74a2b(0x9c)](_0xe74a2b(0xf0),{'success':_0x86e76[_0xe74a2b(0xda)](_0xe74a2b(0xa8)),'errors':_0x86e76[_0xe74a2b(0xda)](_0xe74a2b(0x99)),'user':_0x4c3fd2,'profile':_0xb2078e,'master_shop':_0x20155b,'role':_0x15a4c2,'payment':_0x19c3c5,'language':_0x44f50c});}catch(_0x4f87ad){console[_0xe74a2b(0xbd)](_0x4f87ad);}}),router[a0_0x400fd8(0xac)](a0_0x400fd8(0xbe),auth,async(_0x5a263c,_0x32dc9e)=>{const _0x1c9288=a0_0x400fd8;try{const {name:_0x331585,email:_0x456bda,mobile:_0x32dbb9,company:_0x163bf0,address:_0x30df94,receivable:_0x21c8be,payable:_0x39a7ad,code:_0x38f527,contactperson:_0x5b2c9a,landline:_0x36820c}=_0x5a263c['body'],_0x429540=new suppliers({'name':_0x331585,'email':_0x456bda,'mobile':_0x32dbb9,'company':_0x163bf0,'address':_0x30df94,'receivable':_0x21c8be,'payable':_0x39a7ad,'suppliers_code':_0x38f527,'contactperson':_0x5b2c9a,'landline':_0x36820c}),_0x2a7930=await _0x429540[_0x1c9288(0xbb)]();_0x5a263c[_0x1c9288(0xda)](_0x1c9288(0xa8),_0x1c9288(0xe5)),_0x32dc9e[_0x1c9288(0xb8)](_0x1c9288(0xce));}catch(_0x1eac77){console[_0x1c9288(0xbd)](_0x1eac77);}}),router['get'](a0_0x400fd8(0x9f),auth,async(_0x20a799,_0x4c0ec5)=>{const _0x583ad8=a0_0x400fd8;try{const {username:_0x1641ee,email:_0x158a25,role:_0x450cf6}=_0x20a799[_0x583ad8(0x88)],_0x13bb24=_0x20a799['user'],_0x37a081=await profile[_0x583ad8(0xa2)]({'email':_0x13bb24['email']}),_0x48be61=await master_shop[_0x583ad8(0x8e)]();console[_0x583ad8(0xbd)](_0x583ad8(0xb3),_0x48be61);const _0x50fc01=_0x20a799[_0x583ad8(0xb4)]['id'],_0x1ebf0c=await suppliers['findById'](_0x50fc01);console[_0x583ad8(0xbd)](_0x1ebf0c);if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0xe6)){var _0x2efca3=users['English'];console['log'](_0x2efca3);}else{if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0xe2))var _0x2efca3=users['Hindi'];else{if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0x90))var _0x2efca3=users[_0x583ad8(0x90)];else{if(_0x48be61[0x0][_0x583ad8(0xe4)]=='Spanish')var _0x2efca3=users[_0x583ad8(0xdf)];else{if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0x84))var _0x2efca3=users[_0x583ad8(0x84)];else{if(_0x48be61[0x0]['language']==_0x583ad8(0xa5))var _0x2efca3=users[_0x583ad8(0xbc)];else{if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0x8d))var _0x2efca3=users['Chinese'];else{if(_0x48be61[0x0][_0x583ad8(0xe4)]==_0x583ad8(0xaa))var _0x2efca3=users[_0x583ad8(0xd9)];}}}}}}}_0x4c0ec5['render'](_0x583ad8(0xf0),{'success':_0x20a799['flash'](_0x583ad8(0xa8)),'errors':_0x20a799[_0x583ad8(0xda)](_0x583ad8(0x99)),'role':_0x13bb24,'profile':_0x37a081,'master_shop':_0x48be61,'user':_0x1ebf0c,'language':_0x2efca3});}catch(_0x483e15){console[_0x583ad8(0xbd)](_0x483e15);}}),router['post']('/view/:id',auth,async(_0x35c672,_0x2f3f2e)=>{const _0x15483c=a0_0x400fd8;try{const _0x3e19a3=_0x35c672[_0x15483c(0xb4)]['id'],_0x37a201=await suppliers[_0x15483c(0x91)](_0x3e19a3),{name:_0x5de185,email:_0x12192d,mobile:_0x2240ef,company:_0x1c753b,address:_0x367d5f,receivable:_0x3d0a5b,payable:_0x35f20a,code:_0x3aceb8,contactperson:_0x34182b,landline:_0x3634be}=_0x35c672[_0x15483c(0x8b)];_0x37a201[_0x15483c(0xea)]=_0x5de185,_0x37a201[_0x15483c(0xad)]=_0x12192d,_0x37a201[_0x15483c(0xe7)]=_0x2240ef,_0x37a201['company']=_0x1c753b,_0x37a201[_0x15483c(0xe0)]=_0x367d5f,_0x37a201[_0x15483c(0xc5)]=_0x3d0a5b,_0x37a201['payable']=_0x35f20a,_0x37a201['suppliers_code']=_0x3aceb8,_0x37a201[_0x15483c(0xd7)]=_0x34182b,_0x37a201[_0x15483c(0xc6)]=_0x3634be;const _0x27272a=await _0x37a201[_0x15483c(0xbb)]();_0x35c672[_0x15483c(0xda)]('success',_0x15483c(0xa6)),_0x2f3f2e['redirect'](_0x15483c(0xce));}catch(_0x1958dd){console[_0x15483c(0xbd)](_0x1958dd);}}),router[a0_0x400fd8(0xeb)](a0_0x400fd8(0xca),auth,async(_0x5de044,_0x2cf2f8)=>{const _0x5b5b65=a0_0x400fd8;try{const {username:_0xf4860c,email:_0x29e959,role:_0x8efe48}=_0x5de044['user'],_0x305562=_0x5de044[_0x5b5b65(0x88)],_0x52ef2d=await profile[_0x5b5b65(0xa2)]({'email':_0x305562[_0x5b5b65(0xad)]}),_0x17bb32=await master_shop[_0x5b5b65(0x8e)]();console[_0x5b5b65(0xbd)](_0x5b5b65(0xb3),_0x17bb32),console[_0x5b5b65(0xbd)](_0x5de044['params']['id']);const _0x190c41=await suppliers[_0x5b5b65(0xa2)]({'_id':_0x5de044[_0x5b5b65(0xb4)]['id']});console[_0x5b5b65(0xbd)](_0x190c41);const _0x585023=await s_payment_data[_0x5b5b65(0x8e)]({'suppliers':_0x190c41[_0x5b5b65(0xea)]});console[_0x5b5b65(0xbd)](_0x585023);const _0x3ca79b=await s_payment_data[_0x5b5b65(0xd8)]([{'$match':{'suppliers':_0x190c41[_0x5b5b65(0xea)]}},{'$match':{'reason':_0x5b5b65(0xe3)}},{'$group':{'_id':_0x5b5b65(0xcc),'sum':{'$sum':'$amount'}}}]);console[_0x5b5b65(0xbd)]('payable_sum',_0x3ca79b);const _0x43e8fd=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x190c41[_0x5b5b65(0xea)]}},{'$match':{'reason':_0x5b5b65(0xa9)}},{'$group':{'_id':_0x5b5b65(0xcc),'sum':{'$sum':_0x5b5b65(0xd1)}}}]);console[_0x5b5b65(0xbd)](_0x5b5b65(0xb9),_0x43e8fd);if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0xe6)){var _0x571f10=users['English'];console['log'](_0x571f10);}else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]=='Hindi')var _0x571f10=users[_0x5b5b65(0xe2)];else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0x90))var _0x571f10=users[_0x5b5b65(0x90)];else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0xdf))var _0x571f10=users['Spanish'];else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0x84))var _0x571f10=users['French'];else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0xa5))var _0x571f10=users[_0x5b5b65(0xbc)];else{if(_0x17bb32[0x0][_0x5b5b65(0xe4)]==_0x5b5b65(0x8d))var _0x571f10=users[_0x5b5b65(0x8d)];else{if(_0x17bb32[0x0]['language']==_0x5b5b65(0xaa))var _0x571f10=users[_0x5b5b65(0xd9)];}}}}}}}_0x2cf2f8[_0x5b5b65(0x9c)](_0x5b5b65(0xc1),{'success':_0x5de044[_0x5b5b65(0xda)](_0x5b5b65(0xa8)),'errors':_0x5de044[_0x5b5b65(0xda)]('errors'),'role':_0x305562,'profile':_0x52ef2d,'master_shop':_0x17bb32,'payment':_0x585023,'payable':_0x3ca79b,'receivable':_0x43e8fd,'language':_0x571f10});}catch(_0x37674c){console[_0x5b5b65(0xbd)](_0x37674c);}}),router[a0_0x400fd8(0xeb)]('/products_export_migrate_file',auth,async(_0x52980d,_0x4111d9)=>{const _0x26ee2f=a0_0x400fd8;try{const _0x520261=new excelJS[(_0x26ee2f(0xb1))](),_0x55749e=_0x520261['addWorksheet']('Customers');return _0x55749e['columns']=[{'header':_0x26ee2f(0x97),'key':_0x26ee2f(0xec),'width':0xa},{'header':'Supplier_Code','key':_0x26ee2f(0x85),'width':0xa},{'header':_0x26ee2f(0x83),'key':_0x26ee2f(0xb7),'width':0xa},{'header':'Mobile_number','key':_0x26ee2f(0xe0),'width':0xa},{'header':_0x26ee2f(0xdb),'key':_0x26ee2f(0xe7),'width':0xa},{'header':_0x26ee2f(0xe0),'key':_0x26ee2f(0xad),'width':0xa}],_0x4111d9[_0x26ee2f(0xe9)](_0x26ee2f(0xe8),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x4111d9['setHeader'](_0x26ee2f(0xa1),_0x26ee2f(0xae)),_0x520261[_0x26ee2f(0x8f)][_0x26ee2f(0x9b)](_0x4111d9)[_0x26ee2f(0x95)](()=>{const _0x1da30f=_0x26ee2f;_0x4111d9[_0x1da30f(0xcb)](0xc8);});}catch(_0x542791){_0x4111d9[_0x26ee2f(0xcb)](0x190)['send']({'errors':_0x542791[_0x26ee2f(0x87)]});}});const storage1=multer['diskStorage']({'destination':(_0x5d1505,_0x591d12,_0x3c3459)=>{_0x3c3459(null,'public/Migration');},'filename':(_0x3419c0,_0x118093,_0x3cf6e5)=>{const _0x292f8d=a0_0x400fd8;_0x3cf6e5(null,Date[_0x292f8d(0xed)]()+_0x118093['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x400fd8(0xac)](a0_0x400fd8(0xe1),auth,uploadMigrate[a0_0x400fd8(0xd0)]('supplier_product_file'),async(_0x5ccd5b,_0x6c4ca)=>{const _0x5ab327=a0_0x400fd8,_0x70cdc9=_0x5ccd5b[_0x5ab327(0xc0)][_0x5ab327(0xb5)],_0x326920=await xlsx['readFile'](_0x5ab327(0xd4)+_0x70cdc9);let _0x330042=_0x326920[_0x5ab327(0x86)],_0x39dae8=xlsx[_0x5ab327(0xa4)][_0x5ab327(0xcf)](_0x326920[_0x5ab327(0xc9)][_0x330042[0x0]]);for(const _0x122695 of _0x39dae8){const _0x35f96a=_0x122695[_0x5ab327(0x97)],_0x52ff5f=_0x122695[_0x5ab327(0x9a)],_0x1d028e=_0x122695[_0x5ab327(0xe0)],_0xc58a03=_0x122695['Mobile_number'],_0x58087e=_0x122695[_0x5ab327(0x83)],_0x177c4a=_0x122695[_0x5ab327(0xdb)];try{let _0x24ed99=await suppliers[_0x5ab327(0xa2)]({'name':_0x35f96a});if(!_0x24ed99){const _0x259e6a=new suppliers({'name':_0x35f96a,'suppliers_code':_0x52ff5f,'address':_0x1d028e,'mobile':_0xc58a03,'email':_0x58087e,'company':_0x177c4a});_0x24ed99=await _0x259e6a[_0x5ab327(0xbb)](),_0x5ccd5b[_0x5ab327(0xda)]('success',_0x35f96a+_0x5ab327(0xc2));}else _0x5ccd5b['flash'](_0x5ab327(0xde),_0x35f96a+_0x5ab327(0xdc));}catch(_0x18ec0a){_0x6c4ca[_0x5ab327(0xcb)](0x1f4)[_0x5ab327(0xc7)]({'proderror':_0x18ec0a[_0x5ab327(0x87)],'aproduct':ProductName});}}_0x6c4ca['redirect']('/supplier/view');}),module[a0_0x400fd8(0xcd)]=router;