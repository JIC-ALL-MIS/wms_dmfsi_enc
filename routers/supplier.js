const a0_0x4d9187=a0_0x5e72;(function(_0x233e71,_0x4b90da){const _0x136edf=a0_0x5e72,_0x5b6a29=_0x233e71();while(!![]){try{const _0x4b5690=-parseInt(_0x136edf(0x244))/0x1*(-parseInt(_0x136edf(0x240))/0x2)+-parseInt(_0x136edf(0x256))/0x3*(parseInt(_0x136edf(0x24c))/0x4)+parseInt(_0x136edf(0x234))/0x5*(-parseInt(_0x136edf(0x209))/0x6)+parseInt(_0x136edf(0x1fc))/0x7*(parseInt(_0x136edf(0x1f1))/0x8)+parseInt(_0x136edf(0x213))/0x9+parseInt(_0x136edf(0x202))/0xa*(parseInt(_0x136edf(0x23d))/0xb)+-parseInt(_0x136edf(0x224))/0xc*(parseInt(_0x136edf(0x1e7))/0xd);if(_0x4b5690===_0x4b90da)break;else _0x5b6a29['push'](_0x5b6a29['shift']());}catch(_0x185205){_0x5b6a29['push'](_0x5b6a29['shift']());}}}(a0_0x2cc7,0xd4a76));const express=require(a0_0x4d9187(0x235)),app=express(),router=express[a0_0x4d9187(0x236)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x4d9187(0x1f6)),auth=require(a0_0x4d9187(0x238)),users=require(a0_0x4d9187(0x1f9)),excelJS=require(a0_0x4d9187(0x241)),xlsx=require(a0_0x4d9187(0x24d)),multer=require(a0_0x4d9187(0x23a));function a0_0x2cc7(){const _0x6ae090=['Email','user','utils','768yHPFAR','Mobile_number','save','render','suppliers_code','single','errors','PBrands','\x20Failed','Content-Type','body','Portuguese\x20(BR)','SheetNames','forEach','addWorksheet','Sheets','190iTJUxN','express','Router','Purchase','../middleware/auth','log','multer','PUnits','French','68321JKSFAa','German','SalesmanName','2NzxALx','exceljs','email','amount','1303742AJolRR','reason','redirect','write','Arabic\x20(ae)','findOne','aggregate','filename','4WqQUSo','xlsx','Hindi','Spanish','setHeader','diskStorage','language','flash','sheet_to_json','$reason','3266448rsYAVe','success','Purchase\x20Return','params','error','260026RoXWVw','/supplier/view','Company_Name','Customers','now','Chinese','supplier\x20data\x20update\x20successfully','/view','data','master','4568CvHdHP','file','exports','supplier.js\x20payment_data','attachment;\x20filename=supplier_Migration_File.xlsx','../models/all_models','contactperson','get','../public/language/languages.json','name','/view/payment/:id','11991KijbKU','Portuguese','address','Content-Disposition','suppliers','originalname','1300oUGymp','/view/:id','public/Migration','json','/supplier_import_migrate_file','purchase','find','175782YccRmN','post','landline','suppliers_docs','Supplier_Code','findById','Workbook','status','mobile','purchase_return','11375685wpijOa','send','s_payments','readFile','Name','supplier_product_file','message','English','$amount','supplier_payment','/products_export_migrate_file','English\x20(US)','payable','receivable'];a0_0x2cc7=function(){return _0x6ae090;};return a0_0x2cc7();}function a0_0x5e72(_0x2c76e5,_0x97ce4e){const _0x2cc716=a0_0x2cc7();return a0_0x5e72=function(_0x5e7229,_0x343591){_0x5e7229=_0x5e7229-0x1e6;let _0x1950e6=_0x2cc716[_0x5e7229];return _0x1950e6;},a0_0x5e72(_0x2c76e5,_0x97ce4e);}router[a0_0x4d9187(0x1f8)](a0_0x4d9187(0x1ee),auth,async(_0xf7eea9,_0x4430ce)=>{const _0x1d022b=a0_0x4d9187;try{const {username:_0x4ccd95,email:_0x295ee3,role:_0x148bb7}=_0xf7eea9['user'],_0x5bb20d=_0xf7eea9['user'],_0x3b7eba=await profile[_0x1d022b(0x249)]({'email':_0x5bb20d['email']}),_0x566ffd=await master_shop[_0x1d022b(0x208)]();console['log'](_0x1d022b(0x1f0),_0x566ffd);const _0x21d452=await suppliers[_0x1d022b(0x208)]();console[_0x1d022b(0x239)](_0x21d452);const _0x1ae999=await suppliers[_0x1d022b(0x24a)]([{'$lookup':{'from':_0x1d022b(0x215),'localField':_0x1d022b(0x1fa),'foreignField':_0x1d022b(0x200),'as':_0x1d022b(0x20c)}}]),_0x2c4c76=_0x1ae999['map'](_0x523ae6=>{const _0x12c21b=_0x1d022b;console['log'](_0x12c21b(0x1ef),_0x523ae6);var _0x3cd2e9=0x0,_0xe3d713=0x0;return _0x523ae6[_0x12c21b(0x20c)][_0x12c21b(0x231)](_0x37b3ba=>{const _0x4d3fce=_0x12c21b;console[_0x4d3fce(0x239)]('doc',_0x37b3ba),_0x37b3ba[_0x4d3fce(0x245)]==_0x4d3fce(0x237)?_0x3cd2e9+=_0x37b3ba['amount']:_0xe3d713+=_0x37b3ba[_0x4d3fce(0x243)];}),_0x523ae6[_0x12c21b(0x207)]=_0x3cd2e9,_0x523ae6[_0x12c21b(0x212)]=_0xe3d713,_0x523ae6;});console[_0x1d022b(0x239)](_0x1d022b(0x1f4),_0x2c4c76);if(_0x566ffd[0x0]['language']==_0x1d022b(0x21e)){var _0x4da13c=users[_0x1d022b(0x21a)];console['log'](_0x4da13c);}else{if(_0x566ffd[0x0]['language']==_0x1d022b(0x24e))var _0x4da13c=users[_0x1d022b(0x24e)];else{if(_0x566ffd[0x0][_0x1d022b(0x252)]=='German')var _0x4da13c=users[_0x1d022b(0x23e)];else{if(_0x566ffd[0x0][_0x1d022b(0x252)]==_0x1d022b(0x24f))var _0x4da13c=users['Spanish'];else{if(_0x566ffd[0x0]['language']==_0x1d022b(0x23c))var _0x4da13c=users[_0x1d022b(0x23c)];else{if(_0x566ffd[0x0][_0x1d022b(0x252)]==_0x1d022b(0x22f))var _0x4da13c=users[_0x1d022b(0x1fd)];else{if(_0x566ffd[0x0][_0x1d022b(0x252)]==_0x1d022b(0x1ec))var _0x4da13c=users[_0x1d022b(0x1ec)];else{if(_0x566ffd[0x0][_0x1d022b(0x252)]==_0x1d022b(0x248))var _0x4da13c=users['Arabic'];}}}}}}}_0x4430ce[_0x1d022b(0x227)]('supplier',{'success':_0xf7eea9[_0x1d022b(0x253)](_0x1d022b(0x257)),'errors':_0xf7eea9[_0x1d022b(0x253)](_0x1d022b(0x22a)),'user':_0x21d452,'profile':_0x3b7eba,'master_shop':_0x566ffd,'role':_0x5bb20d,'payment':_0x2c4c76,'language':_0x4da13c});}catch(_0x1a774b){console[_0x1d022b(0x239)](_0x1a774b);}}),router[a0_0x4d9187(0x20a)](a0_0x4d9187(0x1ee),auth,async(_0x1afb9e,_0x5956e9)=>{const _0x2b3b58=a0_0x4d9187;try{const {name:_0x25869f,email:_0x5e16de,mobile:_0x5e328b,company:_0x150bef,address:_0x5ad566,receivable:_0x74977b,payable:_0xa97792,code:_0x5f5afd,contactperson:_0x27ef8a,landline:_0x14b466}=_0x1afb9e[_0x2b3b58(0x22e)],_0x3ac9c9=new suppliers({'name':_0x25869f,'email':_0x5e16de,'mobile':_0x5e328b,'company':_0x150bef,'address':_0x5ad566,'receivable':_0x74977b,'payable':_0xa97792,'suppliers_code':_0x5f5afd,'contactperson':_0x27ef8a,'landline':_0x14b466}),_0x404d92=await _0x3ac9c9[_0x2b3b58(0x226)]();_0x1afb9e[_0x2b3b58(0x253)](_0x2b3b58(0x257),'supplier\x20data\x20add\x20successfully'),_0x5956e9['redirect']('/supplier/view');}catch(_0xc471be){console[_0x2b3b58(0x239)](_0xc471be);}}),router[a0_0x4d9187(0x1f8)](a0_0x4d9187(0x203),auth,async(_0x41356d,_0x1e3c66)=>{const _0x39dcf5=a0_0x4d9187;try{const {username:_0x3c46f1,email:_0x25b335,role:_0xececdf}=_0x41356d['user'],_0x7c765=_0x41356d['user'],_0x18d0ce=await profile[_0x39dcf5(0x249)]({'email':_0x7c765[_0x39dcf5(0x242)]}),_0x496f25=await master_shop[_0x39dcf5(0x208)]();console['log']('master',_0x496f25);const _0x4a3940=_0x41356d[_0x39dcf5(0x259)]['id'],_0x1a7ae4=await suppliers[_0x39dcf5(0x20e)](_0x4a3940);console[_0x39dcf5(0x239)](_0x1a7ae4);if(_0x496f25[0x0]['language']=='English\x20(US)'){var _0x1bc3ca=users[_0x39dcf5(0x21a)];console[_0x39dcf5(0x239)](_0x1bc3ca);}else{if(_0x496f25[0x0][_0x39dcf5(0x252)]==_0x39dcf5(0x24e))var _0x1bc3ca=users[_0x39dcf5(0x24e)];else{if(_0x496f25[0x0][_0x39dcf5(0x252)]=='German')var _0x1bc3ca=users[_0x39dcf5(0x23e)];else{if(_0x496f25[0x0][_0x39dcf5(0x252)]==_0x39dcf5(0x24f))var _0x1bc3ca=users['Spanish'];else{if(_0x496f25[0x0]['language']==_0x39dcf5(0x23c))var _0x1bc3ca=users[_0x39dcf5(0x23c)];else{if(_0x496f25[0x0][_0x39dcf5(0x252)]==_0x39dcf5(0x22f))var _0x1bc3ca=users[_0x39dcf5(0x1fd)];else{if(_0x496f25[0x0]['language']=='Chinese')var _0x1bc3ca=users[_0x39dcf5(0x1ec)];else{if(_0x496f25[0x0][_0x39dcf5(0x252)]=='Arabic\x20(ae)')var _0x1bc3ca=users['Arabic'];}}}}}}}_0x1e3c66[_0x39dcf5(0x227)]('supplier',{'success':_0x41356d[_0x39dcf5(0x253)](_0x39dcf5(0x257)),'errors':_0x41356d[_0x39dcf5(0x253)](_0x39dcf5(0x22a)),'role':_0x7c765,'profile':_0x18d0ce,'master_shop':_0x496f25,'user':_0x1a7ae4,'language':_0x1bc3ca});}catch(_0x2082ae){console[_0x39dcf5(0x239)](_0x2082ae);}}),router[a0_0x4d9187(0x20a)](a0_0x4d9187(0x203),auth,async(_0xefba40,_0x3be2aa)=>{const _0x2f3af7=a0_0x4d9187;try{const _0x199b38=_0xefba40[_0x2f3af7(0x259)]['id'],_0x417a4a=await suppliers[_0x2f3af7(0x20e)](_0x199b38),{name:_0x20b5fe,email:_0x49faa7,mobile:_0x166eda,company:_0x1b3cd0,address:_0x22af8d,receivable:_0x1fd15f,payable:_0x4e7046,code:_0xaacd07,contactperson:_0x18c5d3,landline:_0x2136f9}=_0xefba40['body'];_0x417a4a[_0x2f3af7(0x1fa)]=_0x20b5fe,_0x417a4a[_0x2f3af7(0x242)]=_0x49faa7,_0x417a4a[_0x2f3af7(0x211)]=_0x166eda,_0x417a4a['company']=_0x1b3cd0,_0x417a4a[_0x2f3af7(0x1fe)]=_0x22af8d,_0x417a4a[_0x2f3af7(0x220)]=_0x1fd15f,_0x417a4a[_0x2f3af7(0x21f)]=_0x4e7046,_0x417a4a[_0x2f3af7(0x228)]=_0xaacd07,_0x417a4a[_0x2f3af7(0x1f7)]=_0x18c5d3,_0x417a4a[_0x2f3af7(0x20b)]=_0x2136f9;const _0x17d29b=await _0x417a4a[_0x2f3af7(0x226)]();_0xefba40[_0x2f3af7(0x253)]('success',_0x2f3af7(0x1ed)),_0x3be2aa[_0x2f3af7(0x246)](_0x2f3af7(0x1e8));}catch(_0x41f075){console[_0x2f3af7(0x239)](_0x41f075);}}),router['get'](a0_0x4d9187(0x1fb),auth,async(_0x2c9f16,_0x366275)=>{const _0x268864=a0_0x4d9187;try{const {username:_0x1c9a27,email:_0x470a24,role:_0x3db9ed}=_0x2c9f16[_0x268864(0x222)],_0x48aaf0=_0x2c9f16['user'],_0x582ea2=await profile[_0x268864(0x249)]({'email':_0x48aaf0[_0x268864(0x242)]}),_0x5dfdd7=await master_shop[_0x268864(0x208)]();console[_0x268864(0x239)](_0x268864(0x1f0),_0x5dfdd7),console[_0x268864(0x239)](_0x2c9f16['params']['id']);const _0x5c22a5=await suppliers['findOne']({'_id':_0x2c9f16[_0x268864(0x259)]['id']});console[_0x268864(0x239)](_0x5c22a5);const _0x3e7e02=await s_payment_data['find']({'suppliers':_0x5c22a5[_0x268864(0x1fa)]});console[_0x268864(0x239)](_0x3e7e02);const _0x1e0a85=await s_payment_data[_0x268864(0x24a)]([{'$match':{'suppliers':_0x5c22a5[_0x268864(0x1fa)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x268864(0x255),'sum':{'$sum':'$amount'}}}]);console[_0x268864(0x239)]('payable_sum',_0x1e0a85);const _0x36da87=await s_payment_data[_0x268864(0x24a)]([{'$match':{'suppliers':_0x5c22a5[_0x268864(0x1fa)]}},{'$match':{'reason':_0x268864(0x258)}},{'$group':{'_id':_0x268864(0x255),'sum':{'$sum':_0x268864(0x21b)}}}]);console['log']('receivable_sum',_0x36da87);if(_0x5dfdd7[0x0][_0x268864(0x252)]=='English\x20(US)'){var _0x3b73c0=users[_0x268864(0x21a)];console['log'](_0x3b73c0);}else{if(_0x5dfdd7[0x0][_0x268864(0x252)]==_0x268864(0x24e))var _0x3b73c0=users[_0x268864(0x24e)];else{if(_0x5dfdd7[0x0]['language']==_0x268864(0x23e))var _0x3b73c0=users[_0x268864(0x23e)];else{if(_0x5dfdd7[0x0][_0x268864(0x252)]=='Spanish')var _0x3b73c0=users[_0x268864(0x24f)];else{if(_0x5dfdd7[0x0][_0x268864(0x252)]==_0x268864(0x23c))var _0x3b73c0=users[_0x268864(0x23c)];else{if(_0x5dfdd7[0x0][_0x268864(0x252)]==_0x268864(0x22f))var _0x3b73c0=users[_0x268864(0x1fd)];else{if(_0x5dfdd7[0x0][_0x268864(0x252)]=='Chinese')var _0x3b73c0=users['Chinese'];else{if(_0x5dfdd7[0x0][_0x268864(0x252)]==_0x268864(0x248))var _0x3b73c0=users['Arabic'];}}}}}}}_0x366275[_0x268864(0x227)](_0x268864(0x21c),{'success':_0x2c9f16[_0x268864(0x253)](_0x268864(0x257)),'errors':_0x2c9f16[_0x268864(0x253)]('errors'),'role':_0x48aaf0,'profile':_0x582ea2,'master_shop':_0x5dfdd7,'payment':_0x3e7e02,'payable':_0x1e0a85,'receivable':_0x36da87,'language':_0x3b73c0});}catch(_0x3bf765){console[_0x268864(0x239)](_0x3bf765);}}),router[a0_0x4d9187(0x1f8)](a0_0x4d9187(0x21d),auth,async(_0x3a2663,_0x284a07)=>{const _0x512309=a0_0x4d9187;try{const _0x526bb4=new excelJS[(_0x512309(0x20f))](),_0x3c0313=_0x526bb4[_0x512309(0x232)](_0x512309(0x1ea));return _0x3c0313['columns']=[{'header':'Name','key':_0x512309(0x22b),'width':0xa},{'header':_0x512309(0x20d),'key':_0x512309(0x23b),'width':0xa},{'header':'Email','key':_0x512309(0x23f),'width':0xa},{'header':_0x512309(0x225),'key':_0x512309(0x1fe),'width':0xa},{'header':_0x512309(0x1e9),'key':_0x512309(0x211),'width':0xa},{'header':'address','key':_0x512309(0x242),'width':0xa}],_0x284a07[_0x512309(0x250)](_0x512309(0x22d),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x284a07[_0x512309(0x250)](_0x512309(0x1ff),_0x512309(0x1f5)),_0x526bb4[_0x512309(0x24d)][_0x512309(0x247)](_0x284a07)['then'](()=>{const _0x393205=_0x512309;_0x284a07[_0x393205(0x210)](0xc8);});}catch(_0x49f2c6){_0x284a07['status'](0x190)[_0x512309(0x214)]({'errors':_0x49f2c6[_0x512309(0x219)]});}});const storage1=multer[a0_0x4d9187(0x251)]({'destination':(_0x46738b,_0x1bbe73,_0x130752)=>{const _0x1f7a3=a0_0x4d9187;_0x130752(null,_0x1f7a3(0x204));},'filename':(_0x3d33e8,_0x5b374b,_0x46f559)=>{const _0x35e801=a0_0x4d9187;_0x46f559(null,Date[_0x35e801(0x1eb)]()+_0x5b374b[_0x35e801(0x201)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x4d9187(0x206),auth,uploadMigrate[a0_0x4d9187(0x229)](a0_0x4d9187(0x218)),async(_0x2a0163,_0x126535)=>{const _0x532ccd=a0_0x4d9187,_0x562737=_0x2a0163[_0x532ccd(0x1f2)][_0x532ccd(0x24b)],_0x59b535=await xlsx[_0x532ccd(0x216)]('public/Migration/'+_0x562737);let _0x2857cd=_0x59b535[_0x532ccd(0x230)],_0xd100cd=xlsx[_0x532ccd(0x223)][_0x532ccd(0x254)](_0x59b535[_0x532ccd(0x233)][_0x2857cd[0x0]]);for(const _0x7cf63f of _0xd100cd){const _0x357ef7=_0x7cf63f[_0x532ccd(0x217)],_0x4e7e4f=_0x7cf63f[_0x532ccd(0x20d)],_0xb0680d=_0x7cf63f['address'],_0x65ccee=_0x7cf63f[_0x532ccd(0x225)],_0x2ff75d=_0x7cf63f[_0x532ccd(0x221)],_0x3446fe=_0x7cf63f['Company_Name'];try{let _0x105c08=await suppliers[_0x532ccd(0x249)]({'name':_0x357ef7});if(!_0x105c08){const _0x414128=new suppliers({'name':_0x357ef7,'suppliers_code':_0x4e7e4f,'address':_0xb0680d,'mobile':_0x65ccee,'email':_0x2ff75d,'company':_0x3446fe});_0x105c08=await _0x414128['save'](),_0x2a0163[_0x532ccd(0x253)](_0x532ccd(0x257),_0x357ef7+'\x20added\x20successfully');}else _0x2a0163[_0x532ccd(0x253)](_0x532ccd(0x1e6),_0x357ef7+_0x532ccd(0x22c));}catch(_0x4fdb82){_0x126535[_0x532ccd(0x210)](0x1f4)[_0x532ccd(0x205)]({'proderror':_0x4fdb82[_0x532ccd(0x219)],'aproduct':ProductName});}}_0x126535[_0x532ccd(0x246)](_0x532ccd(0x1e8));}),module[a0_0x4d9187(0x1f3)]=router;