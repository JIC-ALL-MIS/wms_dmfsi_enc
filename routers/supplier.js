function a0_0x2dac(_0x2ec13f,_0x4f9e70){const _0x3c45d7=a0_0x3c45();return a0_0x2dac=function(_0x2daccc,_0x58a462){_0x2daccc=_0x2daccc-0x78;let _0x35f973=_0x3c45d7[_0x2daccc];return _0x35f973;},a0_0x2dac(_0x2ec13f,_0x4f9e70);}const a0_0x2ab656=a0_0x2dac;(function(_0x23f3c0,_0x1c8b7b){const _0x3c4469=a0_0x2dac,_0x20cf31=_0x23f3c0();while(!![]){try{const _0x3f8a97=-parseInt(_0x3c4469(0x7f))/0x1+parseInt(_0x3c4469(0x7b))/0x2*(parseInt(_0x3c4469(0xb8))/0x3)+-parseInt(_0x3c4469(0xc7))/0x4+-parseInt(_0x3c4469(0xcf))/0x5+-parseInt(_0x3c4469(0xde))/0x6+-parseInt(_0x3c4469(0x7e))/0x7+parseInt(_0x3c4469(0x94))/0x8;if(_0x3f8a97===_0x1c8b7b)break;else _0x20cf31['push'](_0x20cf31['shift']());}catch(_0x1373bf){_0x20cf31['push'](_0x20cf31['shift']());}}}(a0_0x3c45,0x93a4d));const express=require('express'),app=express(),router=express[a0_0x2ab656(0xa0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x2ab656(0xa9)),auth=require(a0_0x2ab656(0xca)),users=require(a0_0x2ab656(0xbf)),excelJS=require(a0_0x2ab656(0xb4)),xlsx=require(a0_0x2ab656(0xa6)),multer=require('multer');router[a0_0x2ab656(0x96)](a0_0x2ab656(0x86),auth,async(_0x246120,_0x5a146f)=>{const _0x8c73f5=a0_0x2ab656;try{const {username:_0x4651c6,email:_0x4887ac,role:_0x11d50d}=_0x246120[_0x8c73f5(0xcb)],_0x17f119=_0x246120[_0x8c73f5(0xcb)],_0x213df9=await profile[_0x8c73f5(0xaf)]({'email':_0x17f119[_0x8c73f5(0xa4)]}),_0x358d8a=await master_shop['find']();console[_0x8c73f5(0x88)]('master',_0x358d8a);const _0x635899=await suppliers['find']();console[_0x8c73f5(0x88)](_0x635899);const _0x28f93c=await suppliers['aggregate']([{'$lookup':{'from':_0x8c73f5(0xaa),'localField':_0x8c73f5(0x7c),'foreignField':_0x8c73f5(0xb5),'as':_0x8c73f5(0xcc)}}]),_0x239cdb=_0x28f93c[_0x8c73f5(0xdd)](_0x270d2d=>{const _0x112fa2=_0x8c73f5;console['log'](_0x112fa2(0x8b),_0x270d2d);var _0x5b6ad8=0x0,_0x3bfbfd=0x0;return _0x270d2d[_0x112fa2(0xcc)][_0x112fa2(0x90)](_0x190f0f=>{const _0x593f11=_0x112fa2;console['log'](_0x593f11(0xd1),_0x190f0f),_0x190f0f[_0x593f11(0xc9)]==_0x593f11(0xb3)?_0x5b6ad8+=_0x190f0f[_0x593f11(0x89)]:_0x3bfbfd+=_0x190f0f['amount'];}),_0x270d2d[_0x112fa2(0xa1)]=_0x5b6ad8,_0x270d2d['purchase_return']=_0x3bfbfd,_0x270d2d;});console[_0x8c73f5(0x88)]('supplier.js\x20payment_data',_0x239cdb);if(_0x358d8a[0x0][_0x8c73f5(0xd3)]==_0x8c73f5(0xc6)){var _0x13ea3c=users['English'];console[_0x8c73f5(0x88)](_0x13ea3c);}else{if(_0x358d8a[0x0][_0x8c73f5(0xd3)]==_0x8c73f5(0xbb))var _0x13ea3c=users[_0x8c73f5(0xbb)];else{if(_0x358d8a[0x0]['language']==_0x8c73f5(0x92))var _0x13ea3c=users[_0x8c73f5(0x92)];else{if(_0x358d8a[0x0][_0x8c73f5(0xd3)]==_0x8c73f5(0x82))var _0x13ea3c=users[_0x8c73f5(0x82)];else{if(_0x358d8a[0x0][_0x8c73f5(0xd3)]=='French')var _0x13ea3c=users[_0x8c73f5(0x87)];else{if(_0x358d8a[0x0]['language']=='Portuguese\x20(BR)')var _0x13ea3c=users['Portuguese'];else{if(_0x358d8a[0x0][_0x8c73f5(0xd3)]==_0x8c73f5(0x9a))var _0x13ea3c=users[_0x8c73f5(0x9a)];else{if(_0x358d8a[0x0][_0x8c73f5(0xd3)]=='Arabic\x20(ae)')var _0x13ea3c=users[_0x8c73f5(0xd9)];}}}}}}}_0x5a146f['render'](_0x8c73f5(0xa8),{'success':_0x246120[_0x8c73f5(0x93)](_0x8c73f5(0xdc)),'errors':_0x246120[_0x8c73f5(0x93)]('errors'),'user':_0x635899,'profile':_0x213df9,'master_shop':_0x358d8a,'role':_0x17f119,'payment':_0x239cdb,'language':_0x13ea3c});}catch(_0x1f951d){console['log'](_0x1f951d);}}),router[a0_0x2ab656(0x9f)](a0_0x2ab656(0x86),auth,async(_0x15579e,_0x724630)=>{const _0x16b89a=a0_0x2ab656;try{const {name:_0x36d830,email:_0x4346dd,mobile:_0x5b6853,company:_0x5a2024,address:_0x59fd4b,receivable:_0x371a00,payable:_0x41255a,code:_0x1aceff,contactperson:_0x431029,landline:_0x271eed}=_0x15579e['body'],_0x247f3b=new suppliers({'name':_0x36d830,'email':_0x4346dd,'mobile':_0x5b6853,'company':_0x5a2024,'address':_0x59fd4b,'receivable':_0x371a00,'payable':_0x41255a,'suppliers_code':_0x1aceff,'contactperson':_0x431029,'landline':_0x271eed}),_0xc563b4=await _0x247f3b['save']();_0x15579e[_0x16b89a(0x93)](_0x16b89a(0xdc),_0x16b89a(0x9e)),_0x724630[_0x16b89a(0xd2)](_0x16b89a(0xc3));}catch(_0x487ea5){console[_0x16b89a(0x88)](_0x487ea5);}}),router[a0_0x2ab656(0x96)](a0_0x2ab656(0x97),auth,async(_0x2427b6,_0x39a1ad)=>{const _0x403ca7=a0_0x2ab656;try{const {username:_0x31ffc8,email:_0x43be3a,role:_0x402efa}=_0x2427b6[_0x403ca7(0xcb)],_0x21a530=_0x2427b6['user'],_0x48387d=await profile[_0x403ca7(0xaf)]({'email':_0x21a530['email']}),_0x1f88e2=await master_shop[_0x403ca7(0xbc)]();console[_0x403ca7(0x88)](_0x403ca7(0xb1),_0x1f88e2);const _0x1291b6=_0x2427b6[_0x403ca7(0x9c)]['id'],_0x5c3e3f=await suppliers[_0x403ca7(0x8a)](_0x1291b6);console[_0x403ca7(0x88)](_0x5c3e3f);if(_0x1f88e2[0x0][_0x403ca7(0xd3)]=='English\x20(US)'){var _0xc68fd6=users['English'];console[_0x403ca7(0x88)](_0xc68fd6);}else{if(_0x1f88e2[0x0][_0x403ca7(0xd3)]=='Hindi')var _0xc68fd6=users['Hindi'];else{if(_0x1f88e2[0x0][_0x403ca7(0xd3)]==_0x403ca7(0x92))var _0xc68fd6=users[_0x403ca7(0x92)];else{if(_0x1f88e2[0x0]['language']=='Spanish')var _0xc68fd6=users['Spanish'];else{if(_0x1f88e2[0x0][_0x403ca7(0xd3)]==_0x403ca7(0x87))var _0xc68fd6=users['French'];else{if(_0x1f88e2[0x0][_0x403ca7(0xd3)]==_0x403ca7(0xbd))var _0xc68fd6=users['Portuguese'];else{if(_0x1f88e2[0x0]['language']==_0x403ca7(0x9a))var _0xc68fd6=users[_0x403ca7(0x9a)];else{if(_0x1f88e2[0x0][_0x403ca7(0xd3)]==_0x403ca7(0x95))var _0xc68fd6=users[_0x403ca7(0xd9)];}}}}}}}_0x39a1ad[_0x403ca7(0x9d)]('supplier',{'success':_0x2427b6[_0x403ca7(0x93)](_0x403ca7(0xdc)),'errors':_0x2427b6[_0x403ca7(0x93)]('errors'),'role':_0x21a530,'profile':_0x48387d,'master_shop':_0x1f88e2,'user':_0x5c3e3f,'language':_0xc68fd6});}catch(_0xa03451){console['log'](_0xa03451);}}),router[a0_0x2ab656(0x9f)]('/view/:id',auth,async(_0x329430,_0x5daf17)=>{const _0x136cf4=a0_0x2ab656;try{const _0x2545d8=_0x329430['params']['id'],_0x2e1079=await suppliers[_0x136cf4(0x8a)](_0x2545d8),{name:_0x538d25,email:_0x443c3f,mobile:_0x5be20b,company:_0x17c330,address:_0x476232,receivable:_0x34b8d0,payable:_0x142d2a,code:_0x342558,contactperson:_0x1233bc,landline:_0x1072b8}=_0x329430['body'];_0x2e1079[_0x136cf4(0x7c)]=_0x538d25,_0x2e1079['email']=_0x443c3f,_0x2e1079[_0x136cf4(0xdf)]=_0x5be20b,_0x2e1079[_0x136cf4(0x8d)]=_0x17c330,_0x2e1079[_0x136cf4(0xc2)]=_0x476232,_0x2e1079['receivable']=_0x34b8d0,_0x2e1079[_0x136cf4(0x98)]=_0x142d2a,_0x2e1079['suppliers_code']=_0x342558,_0x2e1079[_0x136cf4(0xb0)]=_0x1233bc,_0x2e1079['landline']=_0x1072b8;const _0x3925bc=await _0x2e1079[_0x136cf4(0xa2)]();_0x329430[_0x136cf4(0x93)]('success','supplier\x20data\x20update\x20successfully'),_0x5daf17[_0x136cf4(0xd2)](_0x136cf4(0xc3));}catch(_0x27a495){console[_0x136cf4(0x88)](_0x27a495);}}),router['get'](a0_0x2ab656(0xc0),auth,async(_0x56410e,_0x3cea87)=>{const _0x223321=a0_0x2ab656;try{const {username:_0xfe2900,email:_0x2fc05b,role:_0xdf8ce2}=_0x56410e[_0x223321(0xcb)],_0x167a48=_0x56410e['user'],_0x1ece00=await profile[_0x223321(0xaf)]({'email':_0x167a48['email']}),_0x291f5c=await master_shop[_0x223321(0xbc)]();console[_0x223321(0x88)](_0x223321(0xb1),_0x291f5c),console[_0x223321(0x88)](_0x56410e[_0x223321(0x9c)]['id']);const _0x1682a9=await suppliers[_0x223321(0xaf)]({'_id':_0x56410e[_0x223321(0x9c)]['id']});console[_0x223321(0x88)](_0x1682a9);const _0x2f1ca9=await s_payment_data[_0x223321(0xbc)]({'suppliers':_0x1682a9[_0x223321(0x7c)]});console['log'](_0x2f1ca9);const _0xdd3c22=await s_payment_data[_0x223321(0xc5)]([{'$match':{'suppliers':_0x1682a9[_0x223321(0x7c)]}},{'$match':{'reason':_0x223321(0xb3)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x223321(0xd4)}}}]);console[_0x223321(0x88)](_0x223321(0xb2),_0xdd3c22);const _0x422487=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x1682a9[_0x223321(0x7c)]}},{'$match':{'reason':_0x223321(0xb9)}},{'$group':{'_id':'$reason','sum':{'$sum':'$amount'}}}]);console[_0x223321(0x88)](_0x223321(0xae),_0x422487);if(_0x291f5c[0x0][_0x223321(0xd3)]==_0x223321(0xc6)){var _0x14ea40=users[_0x223321(0xd7)];console[_0x223321(0x88)](_0x14ea40);}else{if(_0x291f5c[0x0][_0x223321(0xd3)]==_0x223321(0xbb))var _0x14ea40=users[_0x223321(0xbb)];else{if(_0x291f5c[0x0][_0x223321(0xd3)]=='German')var _0x14ea40=users[_0x223321(0x92)];else{if(_0x291f5c[0x0]['language']==_0x223321(0x82))var _0x14ea40=users[_0x223321(0x82)];else{if(_0x291f5c[0x0][_0x223321(0xd3)]==_0x223321(0x87))var _0x14ea40=users[_0x223321(0x87)];else{if(_0x291f5c[0x0][_0x223321(0xd3)]=='Portuguese\x20(BR)')var _0x14ea40=users[_0x223321(0xc8)];else{if(_0x291f5c[0x0][_0x223321(0xd3)]==_0x223321(0x9a))var _0x14ea40=users['Chinese'];else{if(_0x291f5c[0x0][_0x223321(0xd3)]==_0x223321(0x95))var _0x14ea40=users[_0x223321(0xd9)];}}}}}}}_0x3cea87[_0x223321(0x9d)](_0x223321(0xd0),{'success':_0x56410e[_0x223321(0x93)]('success'),'errors':_0x56410e[_0x223321(0x93)](_0x223321(0xce)),'role':_0x167a48,'profile':_0x1ece00,'master_shop':_0x291f5c,'payment':_0x2f1ca9,'payable':_0xdd3c22,'receivable':_0x422487,'language':_0x14ea40});}catch(_0x670c2b){console[_0x223321(0x88)](_0x670c2b);}}),router[a0_0x2ab656(0x96)](a0_0x2ab656(0xbe),auth,async(_0x47ecc1,_0x1daf34)=>{const _0x40c9b8=a0_0x2ab656;try{const _0x671adc=new excelJS[(_0x40c9b8(0xd6))](),_0x3f91d5=_0x671adc[_0x40c9b8(0xa7)](_0x40c9b8(0xda));return _0x3f91d5[_0x40c9b8(0xa5)]=[{'header':_0x40c9b8(0x91),'key':'PBrands','width':0xa},{'header':_0x40c9b8(0xc1),'key':_0x40c9b8(0x7d),'width':0xa},{'header':_0x40c9b8(0x9b),'key':_0x40c9b8(0x78),'width':0xa},{'header':_0x40c9b8(0xcd),'key':_0x40c9b8(0xc2),'width':0xa},{'header':'Company_Name','key':_0x40c9b8(0xdf),'width':0xa},{'header':_0x40c9b8(0xc2),'key':_0x40c9b8(0xa4),'width':0xa}],_0x1daf34[_0x40c9b8(0x79)](_0x40c9b8(0x7a),_0x40c9b8(0xd8)),_0x1daf34[_0x40c9b8(0x79)](_0x40c9b8(0xdb),_0x40c9b8(0x99)),_0x671adc[_0x40c9b8(0xa6)][_0x40c9b8(0xd5)](_0x1daf34)[_0x40c9b8(0xb7)](()=>{const _0x452159=_0x40c9b8;_0x1daf34[_0x452159(0xb6)](0xc8);});}catch(_0x419900){_0x1daf34[_0x40c9b8(0xb6)](0x190)[_0x40c9b8(0x8c)]({'errors':_0x419900['message']});}});function a0_0x3c45(){const _0x2a56f7=['Content-Disposition','success','map','4778418WXJdYt','mobile','SalesmanName','setHeader','Content-Type','197566Qvbdck','name','PUnits','6974429mXbChf','1208266UUZGGo','json','utils','Spanish','message','file','error','/view','French','log','amount','findById','data','send','company','filename','now','forEach','Name','German','flash','33703928WQeyAQ','Arabic\x20(ae)','get','/view/:id','payable','attachment;\x20filename=supplier_Migration_File.xlsx','Chinese','Email','params','render','supplier\x20data\x20add\x20successfully','post','Router','purchase','save','public/Migration/','email','columns','xlsx','addWorksheet','supplier','../models/all_models','s_payments','single','Company_Name','Sheets','receivable_sum','findOne','contactperson','master','payable_sum','Purchase','exceljs','suppliers','status','then','30UEPXPi','Purchase\x20Return','supplier_product_file','Hindi','find','Portuguese\x20(BR)','/products_export_migrate_file','../public/language/languages.json','/view/payment/:id','Supplier_Code','address','/supplier/view','readFile','aggregate','English\x20(US)','1762324HfTHWs','Portuguese','reason','../middleware/auth','user','suppliers_docs','Mobile_number','errors','5772375LYZuMA','supplier_payment','doc','redirect','language','$amount','write','Workbook','English','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Arabic','Customers'];a0_0x3c45=function(){return _0x2a56f7;};return a0_0x3c45();}const storage1=multer['diskStorage']({'destination':(_0x205d9a,_0x534dde,_0x261b14)=>{_0x261b14(null,'public/Migration');},'filename':(_0x3de96c,_0x19943a,_0x4ce796)=>{const _0x1d4af3=a0_0x2ab656;_0x4ce796(null,Date[_0x1d4af3(0x8f)]()+_0x19943a['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x2ab656(0x9f)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x2ab656(0xab)](a0_0x2ab656(0xba)),async(_0x1f7fb9,_0x67e9aa)=>{const _0x5b432f=a0_0x2ab656,_0x57749e=_0x1f7fb9[_0x5b432f(0x84)][_0x5b432f(0x8e)],_0xb17e1c=await xlsx[_0x5b432f(0xc4)](_0x5b432f(0xa3)+_0x57749e);let _0x18b850=_0xb17e1c['SheetNames'],_0xeec8f2=xlsx[_0x5b432f(0x81)]['sheet_to_json'](_0xb17e1c[_0x5b432f(0xad)][_0x18b850[0x0]]);for(const _0x53d9f9 of _0xeec8f2){const _0x5d18e3=_0x53d9f9['Name'],_0x265ece=_0x53d9f9[_0x5b432f(0xc1)],_0x3a5440=_0x53d9f9[_0x5b432f(0xc2)],_0x26e574=_0x53d9f9[_0x5b432f(0xcd)],_0x2be1c9=_0x53d9f9[_0x5b432f(0x9b)],_0x324aaf=_0x53d9f9[_0x5b432f(0xac)];try{let _0x220e43=await suppliers[_0x5b432f(0xaf)]({'name':_0x5d18e3});if(!_0x220e43){const _0x15c75=new suppliers({'name':_0x5d18e3,'suppliers_code':_0x265ece,'address':_0x3a5440,'mobile':_0x26e574,'email':_0x2be1c9,'company':_0x324aaf});_0x220e43=await _0x15c75[_0x5b432f(0xa2)](),_0x1f7fb9[_0x5b432f(0x93)]('success',_0x5d18e3+'\x20added\x20successfully');}else _0x1f7fb9[_0x5b432f(0x93)](_0x5b432f(0x85),_0x5d18e3+'\x20Failed');}catch(_0x5f0f60){_0x67e9aa[_0x5b432f(0xb6)](0x1f4)[_0x5b432f(0x80)]({'proderror':_0x5f0f60[_0x5b432f(0x83)],'aproduct':ProductName});}}_0x67e9aa[_0x5b432f(0xd2)](_0x5b432f(0xc3));}),module['exports']=router;