function a0_0x6de4(){const _0x1b3ec0=['single','14CTbbxb','742908ZLssuE','suppliers_docs','25GFdBZe','Portuguese','../middleware/auth','Chinese','user','save','reason','purchase_return','findById','Company_Name','Portuguese\x20(BR)','columns','attachment;\x20filename=supplier_Migration_File.xlsx','utils','Hindi','exports','error','data','German','s_payments','Router','\x20Failed','log','Mobile_number','exceljs','filename','/supplier_import_migrate_file','language','1140idaKZK','params','setHeader','receivable','4spgJDl','English','doc','supplier.js\x20payment_data','aggregate','English\x20(US)','public/Migration','receivable_sum','414486HRwRWk','14822599gkYkvV','payable_sum','2901704Jtbvsp','status','supplier\x20data\x20update\x20successfully','/products_export_migrate_file','json','redirect','152640WQOtkx','Arabic\x20(ae)','message','express','SalesmanName','master','get','email','Content-Type','payable','$reason','Content-Disposition','suppliers','findOne','success','name','find','errors','../models/all_models','Arabic','flash','multer','sheet_to_json','body','15330SdwegE','SheetNames','now','suppliers_code','../public/language/languages.json','Sheets','company','post','Supplier_Code','then','diskStorage','public/Migration/','supplier','5790492jadsTS','/supplier/view','file','/view','xlsx','map','landline','Customers','PBrands','address','$amount','mobile','originalname','585ZlQGMa','Spanish','render','Email','/view/:id','French','Name','amount','/view/payment/:id'];a0_0x6de4=function(){return _0x1b3ec0;};return a0_0x6de4();}const a0_0x4c746f=a0_0x4a19;(function(_0x8aadd4,_0x3c28bf){const _0xe5ee2e=a0_0x4a19,_0x416ddc=_0x8aadd4();while(!![]){try{const _0x131ed2=-parseInt(_0xe5ee2e(0x11c))/0x1*(-parseInt(_0xe5ee2e(0x13e))/0x2)+-parseInt(_0xe5ee2e(0xf7))/0x3*(parseInt(_0xe5ee2e(0x13a))/0x4)+parseInt(_0xe5ee2e(0x11e))/0x5*(parseInt(_0xe5ee2e(0x146))/0x6)+parseInt(_0xe5ee2e(0x11b))/0x7*(parseInt(_0xe5ee2e(0x149))/0x8)+-parseInt(_0xe5ee2e(0x111))/0x9*(parseInt(_0xe5ee2e(0x14f))/0xa)+parseInt(_0xe5ee2e(0x147))/0xb+-parseInt(_0xe5ee2e(0x104))/0xc;if(_0x131ed2===_0x3c28bf)break;else _0x416ddc['push'](_0x416ddc['shift']());}catch(_0x57f70f){_0x416ddc['push'](_0x416ddc['shift']());}}}(a0_0x6de4,0xed931));function a0_0x4a19(_0x2e4c3f,_0x22c8f7){const _0x6de49d=a0_0x6de4();return a0_0x4a19=function(_0x4a194d,_0x57635a){_0x4a194d=_0x4a194d-0xe5;let _0x5e1d76=_0x6de49d[_0x4a194d];return _0x5e1d76;},a0_0x4a19(_0x2e4c3f,_0x22c8f7);}const express=require(a0_0x4c746f(0x152)),app=express(),router=express[a0_0x4c746f(0x132)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x4c746f(0xf1)),auth=require(a0_0x4c746f(0x120)),users=require(a0_0x4c746f(0xfb)),excelJS=require(a0_0x4c746f(0x136)),xlsx=require('xlsx'),multer=require(a0_0x4c746f(0xf4));router[a0_0x4c746f(0xe5)](a0_0x4c746f(0x107),auth,async(_0x2f3f4b,_0x3ee576)=>{const _0x4a5373=a0_0x4c746f;try{const {username:_0x5da019,email:_0xd85c5c,role:_0x2fe81d}=_0x2f3f4b[_0x4a5373(0x122)],_0x2af29d=_0x2f3f4b[_0x4a5373(0x122)],_0x4cdddf=await profile[_0x4a5373(0xec)]({'email':_0x2af29d[_0x4a5373(0xe6)]}),_0x79276d=await master_shop[_0x4a5373(0xef)]();console[_0x4a5373(0x134)]('master',_0x79276d);const _0x87c777=await suppliers['find']();console[_0x4a5373(0x134)](_0x87c777);const _0x166ffb=await suppliers['aggregate']([{'$lookup':{'from':_0x4a5373(0x131),'localField':_0x4a5373(0xee),'foreignField':_0x4a5373(0xeb),'as':_0x4a5373(0x11d)}}]),_0x4b012e=_0x166ffb[_0x4a5373(0x109)](_0x137668=>{const _0x4f72db=_0x4a5373;console[_0x4f72db(0x134)](_0x4f72db(0x12f),_0x137668);var _0x5237cc=0x0,_0x5514cd=0x0;return _0x137668[_0x4f72db(0x11d)]['forEach'](_0x20ea7e=>{const _0x19b250=_0x4f72db;console[_0x19b250(0x134)](_0x19b250(0x140),_0x20ea7e),_0x20ea7e[_0x19b250(0x124)]=='Purchase'?_0x5237cc+=_0x20ea7e['amount']:_0x5514cd+=_0x20ea7e[_0x19b250(0x118)];}),_0x137668['purchase']=_0x5237cc,_0x137668[_0x4f72db(0x125)]=_0x5514cd,_0x137668;});console[_0x4a5373(0x134)](_0x4a5373(0x141),_0x4b012e);if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x143)){var _0x48fbc6=users[_0x4a5373(0x13f)];console['log'](_0x48fbc6);}else{if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x12c))var _0x48fbc6=users[_0x4a5373(0x12c)];else{if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x130))var _0x48fbc6=users[_0x4a5373(0x130)];else{if(_0x79276d[0x0]['language']==_0x4a5373(0x112))var _0x48fbc6=users[_0x4a5373(0x112)];else{if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x116))var _0x48fbc6=users[_0x4a5373(0x116)];else{if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x128))var _0x48fbc6=users[_0x4a5373(0x11f)];else{if(_0x79276d[0x0]['language']==_0x4a5373(0x121))var _0x48fbc6=users[_0x4a5373(0x121)];else{if(_0x79276d[0x0][_0x4a5373(0x139)]==_0x4a5373(0x150))var _0x48fbc6=users[_0x4a5373(0xf2)];}}}}}}}_0x3ee576['render'](_0x4a5373(0x103),{'success':_0x2f3f4b['flash'](_0x4a5373(0xed)),'errors':_0x2f3f4b[_0x4a5373(0xf3)](_0x4a5373(0xf0)),'user':_0x87c777,'profile':_0x4cdddf,'master_shop':_0x79276d,'role':_0x2af29d,'payment':_0x4b012e,'language':_0x48fbc6});}catch(_0x38efa3){console[_0x4a5373(0x134)](_0x38efa3);}}),router[a0_0x4c746f(0xfe)](a0_0x4c746f(0x107),auth,async(_0x1822b6,_0x17f6c0)=>{const _0x15b6d9=a0_0x4c746f;try{const {name:_0xc907ee,email:_0x5e0a71,mobile:_0x10b492,company:_0x5971ea,address:_0x360dad,receivable:_0x212427,payable:_0x53d797,code:_0x5806d2,contactperson:_0x2fe879,landline:_0x5ecc2b}=_0x1822b6[_0x15b6d9(0xf6)],_0x94a82c=new suppliers({'name':_0xc907ee,'email':_0x5e0a71,'mobile':_0x10b492,'company':_0x5971ea,'address':_0x360dad,'receivable':_0x212427,'payable':_0x53d797,'suppliers_code':_0x5806d2,'contactperson':_0x2fe879,'landline':_0x5ecc2b}),_0x211c51=await _0x94a82c['save']();_0x1822b6[_0x15b6d9(0xf3)](_0x15b6d9(0xed),'supplier\x20data\x20add\x20successfully'),_0x17f6c0[_0x15b6d9(0x14e)](_0x15b6d9(0x105));}catch(_0x25d23f){console[_0x15b6d9(0x134)](_0x25d23f);}}),router[a0_0x4c746f(0xe5)]('/view/:id',auth,async(_0xddf0,_0xfdc97b)=>{const _0x3c591e=a0_0x4c746f;try{const {username:_0x329c9,email:_0x4a3a62,role:_0x3067a2}=_0xddf0[_0x3c591e(0x122)],_0x207e2b=_0xddf0['user'],_0x361b1d=await profile[_0x3c591e(0xec)]({'email':_0x207e2b[_0x3c591e(0xe6)]}),_0x5d5b93=await master_shop[_0x3c591e(0xef)]();console['log'](_0x3c591e(0x154),_0x5d5b93);const _0x2fffe0=_0xddf0[_0x3c591e(0x13b)]['id'],_0x3c7e53=await suppliers[_0x3c591e(0x126)](_0x2fffe0);console['log'](_0x3c7e53);if(_0x5d5b93[0x0][_0x3c591e(0x139)]==_0x3c591e(0x143)){var _0x7f05e0=users['English'];console['log'](_0x7f05e0);}else{if(_0x5d5b93[0x0][_0x3c591e(0x139)]==_0x3c591e(0x12c))var _0x7f05e0=users[_0x3c591e(0x12c)];else{if(_0x5d5b93[0x0][_0x3c591e(0x139)]==_0x3c591e(0x130))var _0x7f05e0=users[_0x3c591e(0x130)];else{if(_0x5d5b93[0x0][_0x3c591e(0x139)]=='Spanish')var _0x7f05e0=users[_0x3c591e(0x112)];else{if(_0x5d5b93[0x0]['language']==_0x3c591e(0x116))var _0x7f05e0=users[_0x3c591e(0x116)];else{if(_0x5d5b93[0x0][_0x3c591e(0x139)]==_0x3c591e(0x128))var _0x7f05e0=users[_0x3c591e(0x11f)];else{if(_0x5d5b93[0x0][_0x3c591e(0x139)]=='Chinese')var _0x7f05e0=users['Chinese'];else{if(_0x5d5b93[0x0]['language']==_0x3c591e(0x150))var _0x7f05e0=users[_0x3c591e(0xf2)];}}}}}}}_0xfdc97b[_0x3c591e(0x113)](_0x3c591e(0x103),{'success':_0xddf0[_0x3c591e(0xf3)](_0x3c591e(0xed)),'errors':_0xddf0[_0x3c591e(0xf3)](_0x3c591e(0xf0)),'role':_0x207e2b,'profile':_0x361b1d,'master_shop':_0x5d5b93,'user':_0x3c7e53,'language':_0x7f05e0});}catch(_0x4a93b9){console[_0x3c591e(0x134)](_0x4a93b9);}}),router['post'](a0_0x4c746f(0x115),auth,async(_0x51690b,_0x33daa1)=>{const _0x1c2fb7=a0_0x4c746f;try{const _0x408cf9=_0x51690b[_0x1c2fb7(0x13b)]['id'],_0x5f1630=await suppliers[_0x1c2fb7(0x126)](_0x408cf9),{name:_0xcf6eba,email:_0x222f61,mobile:_0x49705c,company:_0x37f0f6,address:_0x27155f,receivable:_0x4e3d8f,payable:_0x49dc1d,code:_0x481e4e,contactperson:_0x2d9188,landline:_0x36848d}=_0x51690b[_0x1c2fb7(0xf6)];_0x5f1630[_0x1c2fb7(0xee)]=_0xcf6eba,_0x5f1630[_0x1c2fb7(0xe6)]=_0x222f61,_0x5f1630[_0x1c2fb7(0x10f)]=_0x49705c,_0x5f1630[_0x1c2fb7(0xfd)]=_0x37f0f6,_0x5f1630[_0x1c2fb7(0x10d)]=_0x27155f,_0x5f1630[_0x1c2fb7(0x13d)]=_0x4e3d8f,_0x5f1630[_0x1c2fb7(0xe8)]=_0x49dc1d,_0x5f1630[_0x1c2fb7(0xfa)]=_0x481e4e,_0x5f1630['contactperson']=_0x2d9188,_0x5f1630[_0x1c2fb7(0x10a)]=_0x36848d;const _0x512459=await _0x5f1630[_0x1c2fb7(0x123)]();_0x51690b['flash'](_0x1c2fb7(0xed),_0x1c2fb7(0x14b)),_0x33daa1[_0x1c2fb7(0x14e)]('/supplier/view');}catch(_0x344831){console['log'](_0x344831);}}),router['get'](a0_0x4c746f(0x119),auth,async(_0x4afa4d,_0x20e5f9)=>{const _0x3f86fd=a0_0x4c746f;try{const {username:_0x1605b5,email:_0x548a87,role:_0x527291}=_0x4afa4d[_0x3f86fd(0x122)],_0x1aabc9=_0x4afa4d[_0x3f86fd(0x122)],_0x52a98c=await profile[_0x3f86fd(0xec)]({'email':_0x1aabc9[_0x3f86fd(0xe6)]}),_0x47f9da=await master_shop[_0x3f86fd(0xef)]();console[_0x3f86fd(0x134)](_0x3f86fd(0x154),_0x47f9da),console['log'](_0x4afa4d[_0x3f86fd(0x13b)]['id']);const _0x28285c=await suppliers[_0x3f86fd(0xec)]({'_id':_0x4afa4d[_0x3f86fd(0x13b)]['id']});console[_0x3f86fd(0x134)](_0x28285c);const _0x2dc22c=await s_payment_data[_0x3f86fd(0xef)]({'suppliers':_0x28285c['name']});console[_0x3f86fd(0x134)](_0x2dc22c);const _0xb1ed6b=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x28285c[_0x3f86fd(0xee)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x3f86fd(0xe9),'sum':{'$sum':_0x3f86fd(0x10e)}}}]);console[_0x3f86fd(0x134)](_0x3f86fd(0x148),_0xb1ed6b);const _0x416fc4=await s_payment_data[_0x3f86fd(0x142)]([{'$match':{'suppliers':_0x28285c['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x3f86fd(0xe9),'sum':{'$sum':'$amount'}}}]);console[_0x3f86fd(0x134)](_0x3f86fd(0x145),_0x416fc4);if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x143)){var _0x415ea4=users['English'];console['log'](_0x415ea4);}else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]=='Hindi')var _0x415ea4=users['Hindi'];else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x130))var _0x415ea4=users[_0x3f86fd(0x130)];else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x112))var _0x415ea4=users[_0x3f86fd(0x112)];else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x116))var _0x415ea4=users[_0x3f86fd(0x116)];else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x128))var _0x415ea4=users['Portuguese'];else{if(_0x47f9da[0x0][_0x3f86fd(0x139)]==_0x3f86fd(0x121))var _0x415ea4=users[_0x3f86fd(0x121)];else{if(_0x47f9da[0x0]['language']==_0x3f86fd(0x150))var _0x415ea4=users[_0x3f86fd(0xf2)];}}}}}}}_0x20e5f9[_0x3f86fd(0x113)]('supplier_payment',{'success':_0x4afa4d[_0x3f86fd(0xf3)](_0x3f86fd(0xed)),'errors':_0x4afa4d[_0x3f86fd(0xf3)](_0x3f86fd(0xf0)),'role':_0x1aabc9,'profile':_0x52a98c,'master_shop':_0x47f9da,'payment':_0x2dc22c,'payable':_0xb1ed6b,'receivable':_0x416fc4,'language':_0x415ea4});}catch(_0xfd6cc5){console[_0x3f86fd(0x134)](_0xfd6cc5);}}),router[a0_0x4c746f(0xe5)](a0_0x4c746f(0x14c),auth,async(_0x157bea,_0x315847)=>{const _0x34b523=a0_0x4c746f;try{const _0x5e8210=new excelJS['Workbook'](),_0x267a08=_0x5e8210['addWorksheet'](_0x34b523(0x10b));return _0x267a08[_0x34b523(0x129)]=[{'header':_0x34b523(0x117),'key':_0x34b523(0x10c),'width':0xa},{'header':_0x34b523(0xff),'key':'PUnits','width':0xa},{'header':_0x34b523(0x114),'key':_0x34b523(0x153),'width':0xa},{'header':_0x34b523(0x135),'key':_0x34b523(0x10d),'width':0xa},{'header':_0x34b523(0x127),'key':_0x34b523(0x10f),'width':0xa},{'header':'address','key':'email','width':0xa}],_0x315847['setHeader'](_0x34b523(0xe7),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x315847[_0x34b523(0x13c)](_0x34b523(0xea),_0x34b523(0x12a)),_0x5e8210[_0x34b523(0x108)]['write'](_0x315847)[_0x34b523(0x100)](()=>{const _0x5a32f0=_0x34b523;_0x315847[_0x5a32f0(0x14a)](0xc8);});}catch(_0x1d00e5){_0x315847[_0x34b523(0x14a)](0x190)['send']({'errors':_0x1d00e5[_0x34b523(0x151)]});}});const storage1=multer[a0_0x4c746f(0x101)]({'destination':(_0x1c7d43,_0x321dab,_0x4c9229)=>{const _0x4a66b3=a0_0x4c746f;_0x4c9229(null,_0x4a66b3(0x144));},'filename':(_0x291b65,_0x5315f4,_0x48452c)=>{const _0x57e87b=a0_0x4c746f;_0x48452c(null,Date[_0x57e87b(0xf9)]()+_0x5315f4[_0x57e87b(0x110)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x4c746f(0xfe)](a0_0x4c746f(0x138),auth,uploadMigrate[a0_0x4c746f(0x11a)]('supplier_product_file'),async(_0x3fc6a0,_0x353b0f)=>{const _0x32320f=a0_0x4c746f,_0x80cf4e=_0x3fc6a0[_0x32320f(0x106)][_0x32320f(0x137)],_0x1c002e=await xlsx['readFile'](_0x32320f(0x102)+_0x80cf4e);let _0x3aba29=_0x1c002e[_0x32320f(0xf8)],_0x376169=xlsx[_0x32320f(0x12b)][_0x32320f(0xf5)](_0x1c002e[_0x32320f(0xfc)][_0x3aba29[0x0]]);for(const _0x311f51 of _0x376169){const _0x1e8207=_0x311f51[_0x32320f(0x117)],_0xb34646=_0x311f51['Supplier_Code'],_0x3da7e3=_0x311f51[_0x32320f(0x10d)],_0x38d5c6=_0x311f51[_0x32320f(0x135)],_0x3cc661=_0x311f51[_0x32320f(0x114)],_0x106009=_0x311f51[_0x32320f(0x127)];try{let _0x3ad1aa=await suppliers[_0x32320f(0xec)]({'name':_0x1e8207});if(!_0x3ad1aa){const _0x17d3ca=new suppliers({'name':_0x1e8207,'suppliers_code':_0xb34646,'address':_0x3da7e3,'mobile':_0x38d5c6,'email':_0x3cc661,'company':_0x106009});_0x3ad1aa=await _0x17d3ca[_0x32320f(0x123)](),_0x3fc6a0['flash'](_0x32320f(0xed),_0x1e8207+'\x20added\x20successfully');}else _0x3fc6a0['flash'](_0x32320f(0x12e),_0x1e8207+_0x32320f(0x133));}catch(_0x351b1a){_0x353b0f[_0x32320f(0x14a)](0x1f4)[_0x32320f(0x14d)]({'proderror':_0x351b1a[_0x32320f(0x151)],'aproduct':ProductName});}}_0x353b0f[_0x32320f(0x14e)](_0x32320f(0x105));}),module[a0_0x4c746f(0x12d)]=router;