const a0_0x1cb204=a0_0x89a0;(function(_0x1545f1,_0x3a3d92){const _0x43d96e=a0_0x89a0,_0x4dce70=_0x1545f1();while(!![]){try{const _0x15c90c=parseInt(_0x43d96e(0x187))/0x1+-parseInt(_0x43d96e(0x182))/0x2+-parseInt(_0x43d96e(0x1dc))/0x3*(parseInt(_0x43d96e(0x19a))/0x4)+-parseInt(_0x43d96e(0x1b2))/0x5+parseInt(_0x43d96e(0x1a3))/0x6+parseInt(_0x43d96e(0x19f))/0x7+parseInt(_0x43d96e(0x17d))/0x8*(parseInt(_0x43d96e(0x1d6))/0x9);if(_0x15c90c===_0x3a3d92)break;else _0x4dce70['push'](_0x4dce70['shift']());}catch(_0x1159c4){_0x4dce70['push'](_0x4dce70['shift']());}}}(a0_0x4425,0xca6b4));const express=require(a0_0x1cb204(0x179)),app=express(),router=express[a0_0x1cb204(0x1b7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x1cb204(0x1d1)),auth=require(a0_0x1cb204(0x19e)),users=require(a0_0x1cb204(0x1c0)),excelJS=require('exceljs'),xlsx=require(a0_0x1cb204(0x191)),multer=require(a0_0x1cb204(0x19c));function a0_0x4425(){const _0x196282=['suppliers_docs','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','address','../models/all_models','Portuguese\x20(BR)','diskStorage','language','single','493821xwtCho','then','Customers','write','log','s_payments','357VteCvp','public/Migration','supplier','receivable','suppliers','$reason','send','/view/payment/:id','express','redirect','Sheets','/view','152SQteHP','SalesmanName','mobile','English','params','645146TabUWZ','file','status','get','supplier_product_file','112218FKtlLB','company','supplier_payment','/view/:id','body','purchase_return','Purchase','setHeader','Supplier_Code','$amount','xlsx','Mobile_number','Spanish','Arabic','Chinese','amount','utils','payable','French','33860OqYbeW','addWorksheet','multer','payable_sum','../middleware/auth','3641687MFZTaw','doc','Arabic\x20(ae)','/supplier/view','8808228DjIQdS','Hindi','forEach','columns','purchase','Company_Name','find','render','Name','English\x20(US)','aggregate','findById','PBrands','contactperson','/products_export_migrate_file','4919960cYexkk','reason','\x20added\x20successfully','success','data','Router','email','json','errors','post','save','user','supplier\x20data\x20add\x20successfully','Email','../public/language/languages.json','Portuguese','PUnits','German','map','findOne','flash','supplier.js\x20payment_data','master','Content-Type','message','name','Workbook','readFile'];a0_0x4425=function(){return _0x196282;};return a0_0x4425();}function a0_0x89a0(_0xc1afc3,_0x60acea){const _0x442526=a0_0x4425();return a0_0x89a0=function(_0x89a083,_0x372713){_0x89a083=_0x89a083-0x176;let _0x4d069a=_0x442526[_0x89a083];return _0x4d069a;},a0_0x89a0(_0xc1afc3,_0x60acea);}router[a0_0x1cb204(0x185)]('/view',auth,async(_0x234d08,_0x15d903)=>{const _0x3c68c6=a0_0x1cb204;try{const {username:_0x5bb697,email:_0x3cf173,role:_0x774f4c}=_0x234d08[_0x3c68c6(0x1bd)],_0x1c0b51=_0x234d08['user'],_0x16c67e=await profile[_0x3c68c6(0x1c5)]({'email':_0x1c0b51[_0x3c68c6(0x1b8)]}),_0x2cca19=await master_shop[_0x3c68c6(0x1a9)]();console[_0x3c68c6(0x1da)](_0x3c68c6(0x1c8),_0x2cca19);const _0x5a8101=await suppliers[_0x3c68c6(0x1a9)]();console[_0x3c68c6(0x1da)](_0x5a8101);const _0x4fc784=await suppliers['aggregate']([{'$lookup':{'from':_0x3c68c6(0x1db),'localField':_0x3c68c6(0x1cb),'foreignField':_0x3c68c6(0x1e0),'as':'suppliers_docs'}}]),_0xa2ffb5=_0x4fc784[_0x3c68c6(0x1c4)](_0x560548=>{const _0x15f52e=_0x3c68c6;console['log'](_0x15f52e(0x1b6),_0x560548);var _0x1e7b4f=0x0,_0x3cefee=0x0;return _0x560548[_0x15f52e(0x1ce)][_0x15f52e(0x1a5)](_0x5865c7=>{const _0x335936=_0x15f52e;console[_0x335936(0x1da)](_0x335936(0x1a0),_0x5865c7),_0x5865c7[_0x335936(0x1b3)]==_0x335936(0x18d)?_0x1e7b4f+=_0x5865c7[_0x335936(0x196)]:_0x3cefee+=_0x5865c7['amount'];}),_0x560548[_0x15f52e(0x1a7)]=_0x1e7b4f,_0x560548[_0x15f52e(0x18c)]=_0x3cefee,_0x560548;});console['log'](_0x3c68c6(0x1c7),_0xa2ffb5);if(_0x2cca19[0x0][_0x3c68c6(0x1d4)]=='English\x20(US)'){var _0xdd72ad=users[_0x3c68c6(0x180)];console['log'](_0xdd72ad);}else{if(_0x2cca19[0x0][_0x3c68c6(0x1d4)]=='Hindi')var _0xdd72ad=users[_0x3c68c6(0x1a4)];else{if(_0x2cca19[0x0][_0x3c68c6(0x1d4)]==_0x3c68c6(0x1c3))var _0xdd72ad=users['German'];else{if(_0x2cca19[0x0]['language']==_0x3c68c6(0x193))var _0xdd72ad=users[_0x3c68c6(0x193)];else{if(_0x2cca19[0x0][_0x3c68c6(0x1d4)]==_0x3c68c6(0x199))var _0xdd72ad=users[_0x3c68c6(0x199)];else{if(_0x2cca19[0x0]['language']==_0x3c68c6(0x1d2))var _0xdd72ad=users[_0x3c68c6(0x1c1)];else{if(_0x2cca19[0x0][_0x3c68c6(0x1d4)]==_0x3c68c6(0x195))var _0xdd72ad=users[_0x3c68c6(0x195)];else{if(_0x2cca19[0x0]['language']=='Arabic\x20(ae)')var _0xdd72ad=users[_0x3c68c6(0x194)];}}}}}}}_0x15d903[_0x3c68c6(0x1aa)](_0x3c68c6(0x1de),{'success':_0x234d08[_0x3c68c6(0x1c6)](_0x3c68c6(0x1b5)),'errors':_0x234d08[_0x3c68c6(0x1c6)](_0x3c68c6(0x1ba)),'user':_0x5a8101,'profile':_0x16c67e,'master_shop':_0x2cca19,'role':_0x1c0b51,'payment':_0xa2ffb5,'language':_0xdd72ad});}catch(_0x1a2fc0){console['log'](_0x1a2fc0);}}),router[a0_0x1cb204(0x1bb)](a0_0x1cb204(0x17c),auth,async(_0x20481f,_0x2473b9)=>{const _0x1026f0=a0_0x1cb204;try{const {name:_0x31b129,email:_0x52918d,mobile:_0x499b92,company:_0x55bef8,address:_0x23bbcd,receivable:_0x23877c,payable:_0x93cba8,code:_0x39fe07,contactperson:_0xcac495,landline:_0x4829cd}=_0x20481f[_0x1026f0(0x18b)],_0x3ad855=new suppliers({'name':_0x31b129,'email':_0x52918d,'mobile':_0x499b92,'company':_0x55bef8,'address':_0x23bbcd,'receivable':_0x23877c,'payable':_0x93cba8,'suppliers_code':_0x39fe07,'contactperson':_0xcac495,'landline':_0x4829cd}),_0x378bce=await _0x3ad855[_0x1026f0(0x1bc)]();_0x20481f[_0x1026f0(0x1c6)]('success',_0x1026f0(0x1be)),_0x2473b9[_0x1026f0(0x17a)](_0x1026f0(0x1a2));}catch(_0x270e12){console[_0x1026f0(0x1da)](_0x270e12);}}),router['get'](a0_0x1cb204(0x18a),auth,async(_0x50de0f,_0x153b9b)=>{const _0x3d4f1d=a0_0x1cb204;try{const {username:_0x413a12,email:_0x230f15,role:_0x51428b}=_0x50de0f[_0x3d4f1d(0x1bd)],_0x3b597a=_0x50de0f[_0x3d4f1d(0x1bd)],_0x51d60e=await profile[_0x3d4f1d(0x1c5)]({'email':_0x3b597a[_0x3d4f1d(0x1b8)]}),_0x49591c=await master_shop[_0x3d4f1d(0x1a9)]();console['log'](_0x3d4f1d(0x1c8),_0x49591c);const _0x46ad88=_0x50de0f['params']['id'],_0x2cddc6=await suppliers[_0x3d4f1d(0x1ae)](_0x46ad88);console[_0x3d4f1d(0x1da)](_0x2cddc6);if(_0x49591c[0x0][_0x3d4f1d(0x1d4)]==_0x3d4f1d(0x1ac)){var _0x2877c4=users['English'];console[_0x3d4f1d(0x1da)](_0x2877c4);}else{if(_0x49591c[0x0]['language']=='Hindi')var _0x2877c4=users[_0x3d4f1d(0x1a4)];else{if(_0x49591c[0x0][_0x3d4f1d(0x1d4)]==_0x3d4f1d(0x1c3))var _0x2877c4=users[_0x3d4f1d(0x1c3)];else{if(_0x49591c[0x0][_0x3d4f1d(0x1d4)]==_0x3d4f1d(0x193))var _0x2877c4=users[_0x3d4f1d(0x193)];else{if(_0x49591c[0x0][_0x3d4f1d(0x1d4)]==_0x3d4f1d(0x199))var _0x2877c4=users[_0x3d4f1d(0x199)];else{if(_0x49591c[0x0][_0x3d4f1d(0x1d4)]==_0x3d4f1d(0x1d2))var _0x2877c4=users[_0x3d4f1d(0x1c1)];else{if(_0x49591c[0x0]['language']==_0x3d4f1d(0x195))var _0x2877c4=users[_0x3d4f1d(0x195)];else{if(_0x49591c[0x0]['language']==_0x3d4f1d(0x1a1))var _0x2877c4=users[_0x3d4f1d(0x194)];}}}}}}}_0x153b9b[_0x3d4f1d(0x1aa)]('supplier',{'success':_0x50de0f[_0x3d4f1d(0x1c6)](_0x3d4f1d(0x1b5)),'errors':_0x50de0f[_0x3d4f1d(0x1c6)](_0x3d4f1d(0x1ba)),'role':_0x3b597a,'profile':_0x51d60e,'master_shop':_0x49591c,'user':_0x2cddc6,'language':_0x2877c4});}catch(_0x2ad82b){console['log'](_0x2ad82b);}}),router[a0_0x1cb204(0x1bb)](a0_0x1cb204(0x18a),auth,async(_0x5aedae,_0x1b5a4e)=>{const _0x3c75a0=a0_0x1cb204;try{const _0x3b9d09=_0x5aedae[_0x3c75a0(0x181)]['id'],_0x738f6b=await suppliers[_0x3c75a0(0x1ae)](_0x3b9d09),{name:_0x5d500b,email:_0x3d1e7b,mobile:_0x4f9656,company:_0x5711f1,address:_0x1523b4,receivable:_0x1d3d3c,payable:_0x5bf6c8,code:_0x597999,contactperson:_0x33be0e,landline:_0x5eca36}=_0x5aedae[_0x3c75a0(0x18b)];_0x738f6b['name']=_0x5d500b,_0x738f6b['email']=_0x3d1e7b,_0x738f6b[_0x3c75a0(0x17f)]=_0x4f9656,_0x738f6b[_0x3c75a0(0x188)]=_0x5711f1,_0x738f6b[_0x3c75a0(0x1d0)]=_0x1523b4,_0x738f6b[_0x3c75a0(0x1df)]=_0x1d3d3c,_0x738f6b[_0x3c75a0(0x198)]=_0x5bf6c8,_0x738f6b['suppliers_code']=_0x597999,_0x738f6b[_0x3c75a0(0x1b0)]=_0x33be0e,_0x738f6b['landline']=_0x5eca36;const _0x2e4937=await _0x738f6b[_0x3c75a0(0x1bc)]();_0x5aedae[_0x3c75a0(0x1c6)]('success','supplier\x20data\x20update\x20successfully'),_0x1b5a4e[_0x3c75a0(0x17a)](_0x3c75a0(0x1a2));}catch(_0x56c6ba){console[_0x3c75a0(0x1da)](_0x56c6ba);}}),router['get'](a0_0x1cb204(0x178),auth,async(_0xfab3d9,_0x118aa5)=>{const _0x31a17b=a0_0x1cb204;try{const {username:_0x5ef0c5,email:_0x294cf0,role:_0x324abb}=_0xfab3d9[_0x31a17b(0x1bd)],_0x44c805=_0xfab3d9['user'],_0x4528f4=await profile['findOne']({'email':_0x44c805[_0x31a17b(0x1b8)]}),_0x28344a=await master_shop[_0x31a17b(0x1a9)]();console[_0x31a17b(0x1da)](_0x31a17b(0x1c8),_0x28344a),console['log'](_0xfab3d9[_0x31a17b(0x181)]['id']);const _0x1813a2=await suppliers[_0x31a17b(0x1c5)]({'_id':_0xfab3d9['params']['id']});console[_0x31a17b(0x1da)](_0x1813a2);const _0x4d88f9=await s_payment_data[_0x31a17b(0x1a9)]({'suppliers':_0x1813a2[_0x31a17b(0x1cb)]});console[_0x31a17b(0x1da)](_0x4d88f9);const _0x31c490=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x1813a2['name']}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x31a17b(0x176),'sum':{'$sum':_0x31a17b(0x190)}}}]);console[_0x31a17b(0x1da)](_0x31a17b(0x19d),_0x31c490);const _0x157c12=await s_payment_data[_0x31a17b(0x1ad)]([{'$match':{'suppliers':_0x1813a2[_0x31a17b(0x1cb)]}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':'$reason','sum':{'$sum':_0x31a17b(0x190)}}}]);console[_0x31a17b(0x1da)]('receivable_sum',_0x157c12);if(_0x28344a[0x0]['language']==_0x31a17b(0x1ac)){var _0x422730=users[_0x31a17b(0x180)];console['log'](_0x422730);}else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]=='Hindi')var _0x422730=users[_0x31a17b(0x1a4)];else{if(_0x28344a[0x0]['language']=='German')var _0x422730=users['German'];else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]==_0x31a17b(0x193))var _0x422730=users['Spanish'];else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]==_0x31a17b(0x199))var _0x422730=users[_0x31a17b(0x199)];else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]=='Portuguese\x20(BR)')var _0x422730=users['Portuguese'];else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]==_0x31a17b(0x195))var _0x422730=users[_0x31a17b(0x195)];else{if(_0x28344a[0x0][_0x31a17b(0x1d4)]==_0x31a17b(0x1a1))var _0x422730=users['Arabic'];}}}}}}}_0x118aa5[_0x31a17b(0x1aa)](_0x31a17b(0x189),{'success':_0xfab3d9[_0x31a17b(0x1c6)](_0x31a17b(0x1b5)),'errors':_0xfab3d9[_0x31a17b(0x1c6)](_0x31a17b(0x1ba)),'role':_0x44c805,'profile':_0x4528f4,'master_shop':_0x28344a,'payment':_0x4d88f9,'payable':_0x31c490,'receivable':_0x157c12,'language':_0x422730});}catch(_0x227dc7){console[_0x31a17b(0x1da)](_0x227dc7);}}),router[a0_0x1cb204(0x185)](a0_0x1cb204(0x1b1),auth,async(_0x1b7cc8,_0x432c46)=>{const _0x3d0828=a0_0x1cb204;try{const _0x448e5f=new excelJS[(_0x3d0828(0x1cc))](),_0x4c303e=_0x448e5f[_0x3d0828(0x19b)](_0x3d0828(0x1d8));return _0x4c303e[_0x3d0828(0x1a6)]=[{'header':'Name','key':_0x3d0828(0x1af),'width':0xa},{'header':_0x3d0828(0x18f),'key':_0x3d0828(0x1c2),'width':0xa},{'header':_0x3d0828(0x1bf),'key':_0x3d0828(0x17e),'width':0xa},{'header':_0x3d0828(0x192),'key':_0x3d0828(0x1d0),'width':0xa},{'header':_0x3d0828(0x1a8),'key':_0x3d0828(0x17f),'width':0xa},{'header':_0x3d0828(0x1d0),'key':_0x3d0828(0x1b8),'width':0xa}],_0x432c46['setHeader'](_0x3d0828(0x1c9),_0x3d0828(0x1cf)),_0x432c46[_0x3d0828(0x18e)]('Content-Disposition','attachment;\x20filename=supplier_Migration_File.xlsx'),_0x448e5f[_0x3d0828(0x191)][_0x3d0828(0x1d9)](_0x432c46)[_0x3d0828(0x1d7)](()=>{_0x432c46['status'](0xc8);});}catch(_0x83fde3){_0x432c46[_0x3d0828(0x184)](0x190)[_0x3d0828(0x177)]({'errors':_0x83fde3[_0x3d0828(0x1ca)]});}});const storage1=multer[a0_0x1cb204(0x1d3)]({'destination':(_0x799064,_0x415805,_0x5acbce)=>{const _0x1d5869=a0_0x1cb204;_0x5acbce(null,_0x1d5869(0x1dd));},'filename':(_0x49cec0,_0x3e9141,_0x534d95)=>{_0x534d95(null,Date['now']()+_0x3e9141['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1cb204(0x1bb)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x1cb204(0x1d5)](a0_0x1cb204(0x186)),async(_0x38c703,_0x332c8e)=>{const _0x2b30c4=a0_0x1cb204,_0x410238=_0x38c703[_0x2b30c4(0x183)]['filename'],_0x4da486=await xlsx[_0x2b30c4(0x1cd)]('public/Migration/'+_0x410238);let _0x7c2ee0=_0x4da486['SheetNames'],_0x3eb698=xlsx[_0x2b30c4(0x197)]['sheet_to_json'](_0x4da486[_0x2b30c4(0x17b)][_0x7c2ee0[0x0]]);for(const _0x184af2 of _0x3eb698){const _0x6e7f44=_0x184af2[_0x2b30c4(0x1ab)],_0x514b9d=_0x184af2['Supplier_Code'],_0x33344b=_0x184af2['address'],_0x5d3001=_0x184af2[_0x2b30c4(0x192)],_0x55791b=_0x184af2['Email'],_0x50a1c9=_0x184af2[_0x2b30c4(0x1a8)];try{let _0x58fd9d=await suppliers[_0x2b30c4(0x1c5)]({'name':_0x6e7f44});if(!_0x58fd9d){const _0x2e98f3=new suppliers({'name':_0x6e7f44,'suppliers_code':_0x514b9d,'address':_0x33344b,'mobile':_0x5d3001,'email':_0x55791b,'company':_0x50a1c9});_0x58fd9d=await _0x2e98f3[_0x2b30c4(0x1bc)](),_0x38c703['flash'](_0x2b30c4(0x1b5),_0x6e7f44+_0x2b30c4(0x1b4));}else _0x38c703[_0x2b30c4(0x1c6)]('error',_0x6e7f44+'\x20Failed');}catch(_0x4b5bf9){_0x332c8e[_0x2b30c4(0x184)](0x1f4)[_0x2b30c4(0x1b9)]({'proderror':_0x4b5bf9['message'],'aproduct':ProductName});}}_0x332c8e[_0x2b30c4(0x17a)](_0x2b30c4(0x1a2));}),module['exports']=router;