function a0_0x13e6(){const _0x1ab296=['company','public/Migration/','Spanish','filename','payable_sum','Chinese','s_payments','amount','Name','../public/language/languages.json','English\x20(US)','3738412vrLRFa','render','success','redirect','then','suppliers_code','German','Purchase','supplier','/view','Arabic','5SXySbZ','supplier\x20data\x20update\x20successfully','1568uDwGeE','now','status','supplier.js\x20payment_data','attachment;\x20filename=supplier_Migration_File.xlsx','single','PBrands','findOne','send','\x20added\x20successfully','$amount','../middleware/auth','purchase_return','PUnits','supplier_product_file','address','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Workbook','originalname','suppliers_docs','$reason','3317810ayDuKr','receivable_sum','exports','Portuguese','multer','exceljs','receivable','diskStorage','supplier_payment','payable','flash','purchase','1726326XRYvms','params','setHeader','errors','error','xlsx','post','save','\x20Failed','addWorksheet','/products_export_migrate_file','Company_Name','file','/supplier_import_migrate_file','log','message','name','Customers','reason','2996652UGbgvT','find','/view/:id','map','user','language','Arabic\x20(ae)','landline','SalesmanName','33BoSOcM','3OfmREd','master','Supplier_Code','Sheets','body','24176QsfeNC','mobile','Hindi','/supplier/view','669013tlpTFp','readFile','French','../models/all_models','data','columns','Content-Type','findById','3887802ianEJV','email','suppliers','SheetNames','Mobile_number','aggregate','get','Portuguese\x20(BR)','English','contactperson'];a0_0x13e6=function(){return _0x1ab296;};return a0_0x13e6();}function a0_0x153f(_0x22f531,_0x299a71){const _0x13e63c=a0_0x13e6();return a0_0x153f=function(_0x153f50,_0xc93da6){_0x153f50=_0x153f50-0x73;let _0x7e782d=_0x13e63c[_0x153f50];return _0x7e782d;},a0_0x153f(_0x22f531,_0x299a71);}const a0_0x10bc90=a0_0x153f;(function(_0x8c0239,_0x1b952e){const _0x5c33a6=a0_0x153f,_0x3bb2ed=_0x8c0239();while(!![]){try{const _0x456438=parseInt(_0x5c33a6(0xa2))/0x1+parseInt(_0x5c33a6(0x7c))/0x2*(-parseInt(_0x5c33a6(0x99))/0x3)+parseInt(_0x5c33a6(0xbf))/0x4*(-parseInt(_0x5c33a6(0xca))/0x5)+-parseInt(_0x5c33a6(0x8f))/0x6+-parseInt(_0x5c33a6(0xcc))/0x7*(-parseInt(_0x5c33a6(0x9e))/0x8)+parseInt(_0x5c33a6(0xaa))/0x9+-parseInt(_0x5c33a6(0xe1))/0xa*(-parseInt(_0x5c33a6(0x98))/0xb);if(_0x456438===_0x1b952e)break;else _0x3bb2ed['push'](_0x3bb2ed['shift']());}catch(_0x5258a1){_0x3bb2ed['push'](_0x3bb2ed['shift']());}}}(a0_0x13e6,0x74396));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x10bc90(0xa5)),auth=require(a0_0x10bc90(0xd7)),users=require(a0_0x10bc90(0xbd)),excelJS=require(a0_0x10bc90(0x75)),xlsx=require(a0_0x10bc90(0x81)),multer=require(a0_0x10bc90(0x74));router[a0_0x10bc90(0xb0)](a0_0x10bc90(0xc8),auth,async(_0x493925,_0x496b73)=>{const _0x1ac390=a0_0x10bc90;try{const {username:_0x331ee5,email:_0xa975e3,role:_0x197d56}=_0x493925[_0x1ac390(0x93)],_0x557568=_0x493925['user'],_0x30687d=await profile[_0x1ac390(0xd3)]({'email':_0x557568[_0x1ac390(0xab)]}),_0x3ec08b=await master_shop[_0x1ac390(0x90)]();console[_0x1ac390(0x8a)](_0x1ac390(0x9a),_0x3ec08b);const _0x54c45c=await suppliers[_0x1ac390(0x90)]();console[_0x1ac390(0x8a)](_0x54c45c);const _0x514b68=await suppliers[_0x1ac390(0xaf)]([{'$lookup':{'from':_0x1ac390(0xba),'localField':'name','foreignField':_0x1ac390(0xac),'as':_0x1ac390(0xdf)}}]),_0xb4542f=_0x514b68[_0x1ac390(0x92)](_0xb9e3fe=>{const _0x5763d1=_0x1ac390;console[_0x5763d1(0x8a)](_0x5763d1(0xa6),_0xb9e3fe);var _0x39395f=0x0,_0x11dc85=0x0;return _0xb9e3fe[_0x5763d1(0xdf)]['forEach'](_0x23d8b1=>{const _0x34dc12=_0x5763d1;console[_0x34dc12(0x8a)]('doc',_0x23d8b1),_0x23d8b1[_0x34dc12(0x8e)]==_0x34dc12(0xc6)?_0x39395f+=_0x23d8b1[_0x34dc12(0xbb)]:_0x11dc85+=_0x23d8b1['amount'];}),_0xb9e3fe[_0x5763d1(0x7b)]=_0x39395f,_0xb9e3fe[_0x5763d1(0xd8)]=_0x11dc85,_0xb9e3fe;});console['log'](_0x1ac390(0xcf),_0xb4542f);if(_0x3ec08b[0x0]['language']==_0x1ac390(0xbe)){var _0x2cf5ef=users[_0x1ac390(0xb2)];console[_0x1ac390(0x8a)](_0x2cf5ef);}else{if(_0x3ec08b[0x0][_0x1ac390(0x94)]==_0x1ac390(0xa0))var _0x2cf5ef=users[_0x1ac390(0xa0)];else{if(_0x3ec08b[0x0][_0x1ac390(0x94)]==_0x1ac390(0xc5))var _0x2cf5ef=users[_0x1ac390(0xc5)];else{if(_0x3ec08b[0x0][_0x1ac390(0x94)]==_0x1ac390(0xb6))var _0x2cf5ef=users[_0x1ac390(0xb6)];else{if(_0x3ec08b[0x0]['language']==_0x1ac390(0xa4))var _0x2cf5ef=users[_0x1ac390(0xa4)];else{if(_0x3ec08b[0x0][_0x1ac390(0x94)]==_0x1ac390(0xb1))var _0x2cf5ef=users[_0x1ac390(0x73)];else{if(_0x3ec08b[0x0]['language']==_0x1ac390(0xb9))var _0x2cf5ef=users[_0x1ac390(0xb9)];else{if(_0x3ec08b[0x0][_0x1ac390(0x94)]==_0x1ac390(0x95))var _0x2cf5ef=users['Arabic'];}}}}}}}_0x496b73['render']('supplier',{'success':_0x493925['flash'](_0x1ac390(0xc1)),'errors':_0x493925[_0x1ac390(0x7a)](_0x1ac390(0x7f)),'user':_0x54c45c,'profile':_0x30687d,'master_shop':_0x3ec08b,'role':_0x557568,'payment':_0xb4542f,'language':_0x2cf5ef});}catch(_0x462415){console[_0x1ac390(0x8a)](_0x462415);}}),router[a0_0x10bc90(0x82)](a0_0x10bc90(0xc8),auth,async(_0x48e511,_0x2072ad)=>{const _0x128be4=a0_0x10bc90;try{const {name:_0x23b9e2,email:_0x7806b6,mobile:_0x59e0e3,company:_0x9b9e23,address:_0x475b28,receivable:_0x39b61e,payable:_0x1dacaa,code:_0x240919,contactperson:_0x54c788,landline:_0x316749}=_0x48e511[_0x128be4(0x9d)],_0x55ee7f=new suppliers({'name':_0x23b9e2,'email':_0x7806b6,'mobile':_0x59e0e3,'company':_0x9b9e23,'address':_0x475b28,'receivable':_0x39b61e,'payable':_0x1dacaa,'suppliers_code':_0x240919,'contactperson':_0x54c788,'landline':_0x316749}),_0x1eb39c=await _0x55ee7f[_0x128be4(0x83)]();_0x48e511['flash']('success','supplier\x20data\x20add\x20successfully'),_0x2072ad[_0x128be4(0xc2)](_0x128be4(0xa1));}catch(_0x377bab){console['log'](_0x377bab);}}),router[a0_0x10bc90(0xb0)]('/view/:id',auth,async(_0x4bf311,_0x1b4180)=>{const _0x30d12b=a0_0x10bc90;try{const {username:_0x52a1cf,email:_0x31ddd1,role:_0x26f6fd}=_0x4bf311[_0x30d12b(0x93)],_0x590e66=_0x4bf311['user'],_0xfcd27b=await profile['findOne']({'email':_0x590e66['email']}),_0x39181d=await master_shop[_0x30d12b(0x90)]();console[_0x30d12b(0x8a)](_0x30d12b(0x9a),_0x39181d);const _0xe80ce0=_0x4bf311[_0x30d12b(0x7d)]['id'],_0x4e0280=await suppliers['findById'](_0xe80ce0);console[_0x30d12b(0x8a)](_0x4e0280);if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0xbe)){var _0x46361c=users[_0x30d12b(0xb2)];console['log'](_0x46361c);}else{if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0xa0))var _0x46361c=users[_0x30d12b(0xa0)];else{if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0xc5))var _0x46361c=users['German'];else{if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0xb6))var _0x46361c=users[_0x30d12b(0xb6)];else{if(_0x39181d[0x0][_0x30d12b(0x94)]=='French')var _0x46361c=users[_0x30d12b(0xa4)];else{if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0xb1))var _0x46361c=users[_0x30d12b(0x73)];else{if(_0x39181d[0x0][_0x30d12b(0x94)]=='Chinese')var _0x46361c=users[_0x30d12b(0xb9)];else{if(_0x39181d[0x0][_0x30d12b(0x94)]==_0x30d12b(0x95))var _0x46361c=users[_0x30d12b(0xc9)];}}}}}}}_0x1b4180['render'](_0x30d12b(0xc7),{'success':_0x4bf311[_0x30d12b(0x7a)]('success'),'errors':_0x4bf311['flash'](_0x30d12b(0x7f)),'role':_0x590e66,'profile':_0xfcd27b,'master_shop':_0x39181d,'user':_0x4e0280,'language':_0x46361c});}catch(_0x6cd6b9){console[_0x30d12b(0x8a)](_0x6cd6b9);}}),router[a0_0x10bc90(0x82)](a0_0x10bc90(0x91),auth,async(_0x4ded08,_0xb5ecb8)=>{const _0x27cee8=a0_0x10bc90;try{const _0x499b68=_0x4ded08[_0x27cee8(0x7d)]['id'],_0x5b7b8b=await suppliers[_0x27cee8(0xa9)](_0x499b68),{name:_0x560b83,email:_0x7860b6,mobile:_0x13e930,company:_0x1cf36c,address:_0x40111c,receivable:_0x245cc2,payable:_0x2795db,code:_0x257df3,contactperson:_0x2bc48e,landline:_0x26cdce}=_0x4ded08['body'];_0x5b7b8b['name']=_0x560b83,_0x5b7b8b[_0x27cee8(0xab)]=_0x7860b6,_0x5b7b8b[_0x27cee8(0x9f)]=_0x13e930,_0x5b7b8b[_0x27cee8(0xb4)]=_0x1cf36c,_0x5b7b8b['address']=_0x40111c,_0x5b7b8b[_0x27cee8(0x76)]=_0x245cc2,_0x5b7b8b[_0x27cee8(0x79)]=_0x2795db,_0x5b7b8b[_0x27cee8(0xc4)]=_0x257df3,_0x5b7b8b[_0x27cee8(0xb3)]=_0x2bc48e,_0x5b7b8b[_0x27cee8(0x96)]=_0x26cdce;const _0x434a61=await _0x5b7b8b['save']();_0x4ded08[_0x27cee8(0x7a)]('success',_0x27cee8(0xcb)),_0xb5ecb8[_0x27cee8(0xc2)](_0x27cee8(0xa1));}catch(_0x3c73e8){console[_0x27cee8(0x8a)](_0x3c73e8);}}),router[a0_0x10bc90(0xb0)]('/view/payment/:id',auth,async(_0x282c9d,_0x224f32)=>{const _0x4e1f22=a0_0x10bc90;try{const {username:_0x45d77a,email:_0x515fbc,role:_0x3b9e84}=_0x282c9d[_0x4e1f22(0x93)],_0x794d7c=_0x282c9d[_0x4e1f22(0x93)],_0x5e2733=await profile['findOne']({'email':_0x794d7c[_0x4e1f22(0xab)]}),_0x481f72=await master_shop[_0x4e1f22(0x90)]();console[_0x4e1f22(0x8a)](_0x4e1f22(0x9a),_0x481f72),console[_0x4e1f22(0x8a)](_0x282c9d['params']['id']);const _0x26cca7=await suppliers[_0x4e1f22(0xd3)]({'_id':_0x282c9d['params']['id']});console[_0x4e1f22(0x8a)](_0x26cca7);const _0x99f544=await s_payment_data[_0x4e1f22(0x90)]({'suppliers':_0x26cca7[_0x4e1f22(0x8c)]});console['log'](_0x99f544);const _0x2ae217=await s_payment_data[_0x4e1f22(0xaf)]([{'$match':{'suppliers':_0x26cca7[_0x4e1f22(0x8c)]}},{'$match':{'reason':_0x4e1f22(0xc6)}},{'$group':{'_id':_0x4e1f22(0xe0),'sum':{'$sum':_0x4e1f22(0xd6)}}}]);console[_0x4e1f22(0x8a)](_0x4e1f22(0xb8),_0x2ae217);const _0x487714=await s_payment_data[_0x4e1f22(0xaf)]([{'$match':{'suppliers':_0x26cca7['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x4e1f22(0xe0),'sum':{'$sum':_0x4e1f22(0xd6)}}}]);console['log'](_0x4e1f22(0xe2),_0x487714);if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0xbe)){var _0x5ceb7c=users['English'];console[_0x4e1f22(0x8a)](_0x5ceb7c);}else{if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0xa0))var _0x5ceb7c=users[_0x4e1f22(0xa0)];else{if(_0x481f72[0x0]['language']==_0x4e1f22(0xc5))var _0x5ceb7c=users[_0x4e1f22(0xc5)];else{if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0xb6))var _0x5ceb7c=users[_0x4e1f22(0xb6)];else{if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0xa4))var _0x5ceb7c=users[_0x4e1f22(0xa4)];else{if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0xb1))var _0x5ceb7c=users[_0x4e1f22(0x73)];else{if(_0x481f72[0x0]['language']==_0x4e1f22(0xb9))var _0x5ceb7c=users[_0x4e1f22(0xb9)];else{if(_0x481f72[0x0][_0x4e1f22(0x94)]==_0x4e1f22(0x95))var _0x5ceb7c=users[_0x4e1f22(0xc9)];}}}}}}}_0x224f32[_0x4e1f22(0xc0)](_0x4e1f22(0x78),{'success':_0x282c9d['flash'](_0x4e1f22(0xc1)),'errors':_0x282c9d[_0x4e1f22(0x7a)](_0x4e1f22(0x7f)),'role':_0x794d7c,'profile':_0x5e2733,'master_shop':_0x481f72,'payment':_0x99f544,'payable':_0x2ae217,'receivable':_0x487714,'language':_0x5ceb7c});}catch(_0x227da9){console[_0x4e1f22(0x8a)](_0x227da9);}}),router[a0_0x10bc90(0xb0)](a0_0x10bc90(0x86),auth,async(_0xedbab0,_0x360184)=>{const _0x1f12b2=a0_0x10bc90;try{const _0x26a59c=new excelJS[(_0x1f12b2(0xdd))](),_0x4b7a02=_0x26a59c[_0x1f12b2(0x85)](_0x1f12b2(0x8d));return _0x4b7a02[_0x1f12b2(0xa7)]=[{'header':_0x1f12b2(0xbc),'key':_0x1f12b2(0xd2),'width':0xa},{'header':_0x1f12b2(0x9b),'key':_0x1f12b2(0xd9),'width':0xa},{'header':'Email','key':_0x1f12b2(0x97),'width':0xa},{'header':'Mobile_number','key':_0x1f12b2(0xdb),'width':0xa},{'header':_0x1f12b2(0x87),'key':'mobile','width':0xa},{'header':_0x1f12b2(0xdb),'key':_0x1f12b2(0xab),'width':0xa}],_0x360184[_0x1f12b2(0x7e)](_0x1f12b2(0xa8),_0x1f12b2(0xdc)),_0x360184['setHeader']('Content-Disposition',_0x1f12b2(0xd0)),_0x26a59c[_0x1f12b2(0x81)]['write'](_0x360184)[_0x1f12b2(0xc3)](()=>{const _0x4b3707=_0x1f12b2;_0x360184[_0x4b3707(0xce)](0xc8);});}catch(_0x3aeda8){_0x360184[_0x1f12b2(0xce)](0x190)[_0x1f12b2(0xd4)]({'errors':_0x3aeda8['message']});}});const storage1=multer[a0_0x10bc90(0x77)]({'destination':(_0x307d15,_0x37129b,_0x1629d8)=>{_0x1629d8(null,'public/Migration');},'filename':(_0x2d654e,_0x87137c,_0x2a1e5a)=>{const _0x79a7f8=a0_0x10bc90;_0x2a1e5a(null,Date[_0x79a7f8(0xcd)]()+_0x87137c[_0x79a7f8(0xde)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x10bc90(0x82)](a0_0x10bc90(0x89),auth,uploadMigrate[a0_0x10bc90(0xd1)](a0_0x10bc90(0xda)),async(_0x4dac8c,_0x5942c6)=>{const _0x24d08c=a0_0x10bc90,_0x78904e=_0x4dac8c[_0x24d08c(0x88)][_0x24d08c(0xb7)],_0x3190f6=await xlsx[_0x24d08c(0xa3)](_0x24d08c(0xb5)+_0x78904e);let _0x40a3de=_0x3190f6[_0x24d08c(0xad)],_0x2184d1=xlsx['utils']['sheet_to_json'](_0x3190f6[_0x24d08c(0x9c)][_0x40a3de[0x0]]);for(const _0x3ab8ca of _0x2184d1){const _0x16419e=_0x3ab8ca[_0x24d08c(0xbc)],_0x21f06c=_0x3ab8ca['Supplier_Code'],_0x5f055b=_0x3ab8ca[_0x24d08c(0xdb)],_0x1442aa=_0x3ab8ca[_0x24d08c(0xae)],_0x534efd=_0x3ab8ca['Email'],_0x32673f=_0x3ab8ca[_0x24d08c(0x87)];try{let _0x203e7c=await suppliers[_0x24d08c(0xd3)]({'name':_0x16419e});if(!_0x203e7c){const _0x3567e1=new suppliers({'name':_0x16419e,'suppliers_code':_0x21f06c,'address':_0x5f055b,'mobile':_0x1442aa,'email':_0x534efd,'company':_0x32673f});_0x203e7c=await _0x3567e1[_0x24d08c(0x83)](),_0x4dac8c['flash'](_0x24d08c(0xc1),_0x16419e+_0x24d08c(0xd5));}else _0x4dac8c['flash'](_0x24d08c(0x80),_0x16419e+_0x24d08c(0x84));}catch(_0xb5fdf2){_0x5942c6[_0x24d08c(0xce)](0x1f4)['json']({'proderror':_0xb5fdf2[_0x24d08c(0x8b)],'aproduct':ProductName});}}_0x5942c6['redirect'](_0x24d08c(0xa1));}),module[a0_0x10bc90(0xe3)]=router;