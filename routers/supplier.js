const a0_0x5338d3=a0_0x3ba2;(function(_0x9affe3,_0x4018ba){const _0x41f8a1=a0_0x3ba2,_0xb50428=_0x9affe3();while(!![]){try{const _0x321cb6=-parseInt(_0x41f8a1(0xb0))/0x1*(parseInt(_0x41f8a1(0xc3))/0x2)+-parseInt(_0x41f8a1(0x8c))/0x3*(-parseInt(_0x41f8a1(0x9c))/0x4)+-parseInt(_0x41f8a1(0xab))/0x5*(parseInt(_0x41f8a1(0xcb))/0x6)+-parseInt(_0x41f8a1(0xd7))/0x7+parseInt(_0x41f8a1(0xbc))/0x8*(parseInt(_0x41f8a1(0xde))/0x9)+parseInt(_0x41f8a1(0x95))/0xa+parseInt(_0x41f8a1(0xb7))/0xb;if(_0x321cb6===_0x4018ba)break;else _0xb50428['push'](_0xb50428['shift']());}catch(_0x4542a1){_0xb50428['push'](_0xb50428['shift']());}}}(a0_0x14b6,0xcd175));const express=require(a0_0x5338d3(0x97)),app=express(),router=express[a0_0x5338d3(0xa7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x5338d3(0xd0)),users=require('../public/language/languages.json'),excelJS=require(a0_0x5338d3(0x8d)),xlsx=require(a0_0x5338d3(0xda)),multer=require('multer');router[a0_0x5338d3(0xa9)](a0_0x5338d3(0xaa),auth,async(_0x4fee0e,_0x4801da)=>{const _0x55c963=a0_0x5338d3;try{const {username:_0xc7a738,email:_0x286483,role:_0x1f3b6c}=_0x4fee0e[_0x55c963(0xb6)],_0x1806b8=_0x4fee0e[_0x55c963(0xb6)],_0xc85c1a=await profile[_0x55c963(0x9e)]({'email':_0x1806b8[_0x55c963(0x8e)]}),_0x52e209=await master_shop[_0x55c963(0xb1)]();console[_0x55c963(0x85)](_0x55c963(0x9f),_0x52e209);const _0x3038f5=await suppliers[_0x55c963(0xb1)]();console[_0x55c963(0x85)](_0x3038f5);const _0x2307a0=await suppliers['aggregate']([{'$lookup':{'from':_0x55c963(0x86),'localField':_0x55c963(0xdd),'foreignField':_0x55c963(0xbe),'as':'suppliers_docs'}}]),_0x2c3e0e=_0x2307a0['map'](_0x3a3f07=>{const _0x3870cd=_0x55c963;console[_0x3870cd(0x85)]('data',_0x3a3f07);var _0x557c3b=0x0,_0x48328f=0x0;return _0x3a3f07[_0x3870cd(0xb9)][_0x3870cd(0xc5)](_0x13f7ea=>{const _0x3bdf0d=_0x3870cd;console[_0x3bdf0d(0x85)](_0x3bdf0d(0xa1),_0x13f7ea),_0x13f7ea['reason']==_0x3bdf0d(0xb2)?_0x557c3b+=_0x13f7ea[_0x3bdf0d(0xea)]:_0x48328f+=_0x13f7ea[_0x3bdf0d(0xea)];}),_0x3a3f07[_0x3870cd(0xe1)]=_0x557c3b,_0x3a3f07[_0x3870cd(0x92)]=_0x48328f,_0x3a3f07;});console[_0x55c963(0x85)](_0x55c963(0x93),_0x2c3e0e);if(_0x52e209[0x0][_0x55c963(0xd8)]==_0x55c963(0x87)){var _0x2d8442=users[_0x55c963(0xa6)];console[_0x55c963(0x85)](_0x2d8442);}else{if(_0x52e209[0x0][_0x55c963(0xd8)]==_0x55c963(0xdb))var _0x2d8442=users[_0x55c963(0xdb)];else{if(_0x52e209[0x0][_0x55c963(0xd8)]=='German')var _0x2d8442=users[_0x55c963(0x94)];else{if(_0x52e209[0x0][_0x55c963(0xd8)]==_0x55c963(0xae))var _0x2d8442=users[_0x55c963(0xae)];else{if(_0x52e209[0x0][_0x55c963(0xd8)]==_0x55c963(0xce))var _0x2d8442=users[_0x55c963(0xce)];else{if(_0x52e209[0x0][_0x55c963(0xd8)]==_0x55c963(0xeb))var _0x2d8442=users[_0x55c963(0xd2)];else{if(_0x52e209[0x0][_0x55c963(0xd8)]=='Chinese')var _0x2d8442=users[_0x55c963(0x89)];else{if(_0x52e209[0x0]['language']==_0x55c963(0xa0))var _0x2d8442=users[_0x55c963(0xca)];}}}}}}}_0x4801da[_0x55c963(0xb3)](_0x55c963(0x82),{'success':_0x4fee0e[_0x55c963(0xbb)](_0x55c963(0xaf)),'errors':_0x4fee0e[_0x55c963(0xbb)](_0x55c963(0x81)),'user':_0x3038f5,'profile':_0xc85c1a,'master_shop':_0x52e209,'role':_0x1806b8,'payment':_0x2c3e0e,'language':_0x2d8442});}catch(_0xee4507){console['log'](_0xee4507);}}),router['post'](a0_0x5338d3(0xaa),auth,async(_0x46e116,_0x50a72b)=>{const _0x11d9f7=a0_0x5338d3;try{const {name:_0x558576,email:_0x424291,mobile:_0xab1829,company:_0x51b8d2,address:_0x1fabef,receivable:_0x11a4c0,payable:_0x66572a,code:_0x2c7ee7,contactperson:_0x48545b,landline:_0x3f5520}=_0x46e116['body'],_0x572e07=new suppliers({'name':_0x558576,'email':_0x424291,'mobile':_0xab1829,'company':_0x51b8d2,'address':_0x1fabef,'receivable':_0x11a4c0,'payable':_0x66572a,'suppliers_code':_0x2c7ee7,'contactperson':_0x48545b,'landline':_0x3f5520}),_0x5d92f1=await _0x572e07[_0x11d9f7(0x91)]();_0x46e116[_0x11d9f7(0xbb)](_0x11d9f7(0xaf),_0x11d9f7(0x99)),_0x50a72b[_0x11d9f7(0xe8)]('/supplier/view');}catch(_0x4773fc){console[_0x11d9f7(0x85)](_0x4773fc);}}),router[a0_0x5338d3(0xa9)](a0_0x5338d3(0x9b),auth,async(_0x3860a5,_0x5d4931)=>{const _0x375698=a0_0x5338d3;try{const {username:_0x5d7225,email:_0x256b81,role:_0x550cf6}=_0x3860a5[_0x375698(0xb6)],_0x4e21bd=_0x3860a5[_0x375698(0xb6)],_0x2f000b=await profile[_0x375698(0x9e)]({'email':_0x4e21bd[_0x375698(0x8e)]}),_0x6fffd9=await master_shop[_0x375698(0xb1)]();console[_0x375698(0x85)](_0x375698(0x9f),_0x6fffd9);const _0x1a18a5=_0x3860a5[_0x375698(0x88)]['id'],_0x73f58e=await suppliers[_0x375698(0xbd)](_0x1a18a5);console['log'](_0x73f58e);if(_0x6fffd9[0x0]['language']==_0x375698(0x87)){var _0x103c41=users[_0x375698(0xa6)];console['log'](_0x103c41);}else{if(_0x6fffd9[0x0][_0x375698(0xd8)]=='Hindi')var _0x103c41=users['Hindi'];else{if(_0x6fffd9[0x0][_0x375698(0xd8)]==_0x375698(0x94))var _0x103c41=users[_0x375698(0x94)];else{if(_0x6fffd9[0x0][_0x375698(0xd8)]==_0x375698(0xae))var _0x103c41=users[_0x375698(0xae)];else{if(_0x6fffd9[0x0][_0x375698(0xd8)]==_0x375698(0xce))var _0x103c41=users[_0x375698(0xce)];else{if(_0x6fffd9[0x0][_0x375698(0xd8)]==_0x375698(0xeb))var _0x103c41=users[_0x375698(0xd2)];else{if(_0x6fffd9[0x0][_0x375698(0xd8)]=='Chinese')var _0x103c41=users[_0x375698(0x89)];else{if(_0x6fffd9[0x0]['language']==_0x375698(0xa0))var _0x103c41=users[_0x375698(0xca)];}}}}}}}_0x5d4931[_0x375698(0xb3)](_0x375698(0x82),{'success':_0x3860a5[_0x375698(0xbb)](_0x375698(0xaf)),'errors':_0x3860a5[_0x375698(0xbb)](_0x375698(0x81)),'role':_0x4e21bd,'profile':_0x2f000b,'master_shop':_0x6fffd9,'user':_0x73f58e,'language':_0x103c41});}catch(_0xb43d20){console[_0x375698(0x85)](_0xb43d20);}}),router[a0_0x5338d3(0xc7)](a0_0x5338d3(0x9b),auth,async(_0x56f140,_0x18854)=>{const _0xd80acf=a0_0x5338d3;try{const _0x25c409=_0x56f140[_0xd80acf(0x88)]['id'],_0x28980a=await suppliers['findById'](_0x25c409),{name:_0x561117,email:_0x10e000,mobile:_0x50faec,company:_0x21bde0,address:_0x30706a,receivable:_0x540e50,payable:_0x4014c5,code:_0x23da63,contactperson:_0x2d9f6e,landline:_0x5af4f6}=_0x56f140[_0xd80acf(0xd6)];_0x28980a['name']=_0x561117,_0x28980a['email']=_0x10e000,_0x28980a['mobile']=_0x50faec,_0x28980a[_0xd80acf(0xe3)]=_0x21bde0,_0x28980a[_0xd80acf(0xcf)]=_0x30706a,_0x28980a[_0xd80acf(0xba)]=_0x540e50,_0x28980a['payable']=_0x4014c5,_0x28980a[_0xd80acf(0xcd)]=_0x23da63,_0x28980a[_0xd80acf(0xa3)]=_0x2d9f6e,_0x28980a[_0xd80acf(0xd4)]=_0x5af4f6;const _0x2ca044=await _0x28980a['save']();_0x56f140['flash'](_0xd80acf(0xaf),_0xd80acf(0xbf)),_0x18854['redirect'](_0xd80acf(0x96));}catch(_0x133443){console[_0xd80acf(0x85)](_0x133443);}}),router[a0_0x5338d3(0xa9)](a0_0x5338d3(0x8a),auth,async(_0x4c1557,_0x33df63)=>{const _0x2f64b1=a0_0x5338d3;try{const {username:_0x4a3017,email:_0x350d20,role:_0x2222c9}=_0x4c1557['user'],_0x51e887=_0x4c1557[_0x2f64b1(0xb6)],_0xf71487=await profile[_0x2f64b1(0x9e)]({'email':_0x51e887['email']}),_0x4dd36a=await master_shop[_0x2f64b1(0xb1)]();console[_0x2f64b1(0x85)]('master',_0x4dd36a),console[_0x2f64b1(0x85)](_0x4c1557['params']['id']);const _0x2d18aa=await suppliers[_0x2f64b1(0x9e)]({'_id':_0x4c1557[_0x2f64b1(0x88)]['id']});console[_0x2f64b1(0x85)](_0x2d18aa);const _0x1ceaa3=await s_payment_data[_0x2f64b1(0xb1)]({'suppliers':_0x2d18aa[_0x2f64b1(0xdd)]});console[_0x2f64b1(0x85)](_0x1ceaa3);const _0x2a5648=await s_payment_data[_0x2f64b1(0xd5)]([{'$match':{'suppliers':_0x2d18aa['name']}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x2f64b1(0xd1),'sum':{'$sum':_0x2f64b1(0xe5)}}}]);console['log'](_0x2f64b1(0xc8),_0x2a5648);const _0x3bdd7c=await s_payment_data[_0x2f64b1(0xd5)]([{'$match':{'suppliers':_0x2d18aa[_0x2f64b1(0xdd)]}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x2f64b1(0xd1),'sum':{'$sum':_0x2f64b1(0xe5)}}}]);console[_0x2f64b1(0x85)](_0x2f64b1(0xe9),_0x3bdd7c);if(_0x4dd36a[0x0]['language']=='English\x20(US)'){var _0x51433b=users[_0x2f64b1(0xa6)];console['log'](_0x51433b);}else{if(_0x4dd36a[0x0]['language']=='Hindi')var _0x51433b=users[_0x2f64b1(0xdb)];else{if(_0x4dd36a[0x0][_0x2f64b1(0xd8)]==_0x2f64b1(0x94))var _0x51433b=users[_0x2f64b1(0x94)];else{if(_0x4dd36a[0x0][_0x2f64b1(0xd8)]==_0x2f64b1(0xae))var _0x51433b=users[_0x2f64b1(0xae)];else{if(_0x4dd36a[0x0]['language']==_0x2f64b1(0xce))var _0x51433b=users[_0x2f64b1(0xce)];else{if(_0x4dd36a[0x0][_0x2f64b1(0xd8)]=='Portuguese\x20(BR)')var _0x51433b=users[_0x2f64b1(0xd2)];else{if(_0x4dd36a[0x0][_0x2f64b1(0xd8)]==_0x2f64b1(0x89))var _0x51433b=users[_0x2f64b1(0x89)];else{if(_0x4dd36a[0x0][_0x2f64b1(0xd8)]=='Arabic\x20(ae)')var _0x51433b=users[_0x2f64b1(0xca)];}}}}}}}_0x33df63[_0x2f64b1(0xb3)](_0x2f64b1(0xc1),{'success':_0x4c1557[_0x2f64b1(0xbb)](_0x2f64b1(0xaf)),'errors':_0x4c1557['flash']('errors'),'role':_0x51e887,'profile':_0xf71487,'master_shop':_0x4dd36a,'payment':_0x1ceaa3,'payable':_0x2a5648,'receivable':_0x3bdd7c,'language':_0x51433b});}catch(_0x981340){console[_0x2f64b1(0x85)](_0x981340);}}),router[a0_0x5338d3(0xa9)](a0_0x5338d3(0xa4),auth,async(_0x401ec2,_0x5e93fa)=>{const _0x539e26=a0_0x5338d3;try{const _0x14e3a9=new excelJS[(_0x539e26(0xed))](),_0x3d0bf4=_0x14e3a9['addWorksheet'](_0x539e26(0xc0));return _0x3d0bf4[_0x539e26(0xe4)]=[{'header':_0x539e26(0xee),'key':_0x539e26(0x98),'width':0xa},{'header':_0x539e26(0xdc),'key':'PUnits','width':0xa},{'header':_0x539e26(0xc4),'key':'SalesmanName','width':0xa},{'header':'Mobile_number','key':_0x539e26(0xcf),'width':0xa},{'header':_0x539e26(0x8b),'key':_0x539e26(0xc9),'width':0xa},{'header':'address','key':_0x539e26(0x8e),'width':0xa}],_0x5e93fa[_0x539e26(0x9d)]('Content-Type','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x5e93fa['setHeader']('Content-Disposition',_0x539e26(0xa8)),_0x14e3a9[_0x539e26(0xda)]['write'](_0x5e93fa)[_0x539e26(0xe7)](()=>{const _0x1d68cc=_0x539e26;_0x5e93fa[_0x1d68cc(0xac)](0xc8);});}catch(_0x4d0bca){_0x5e93fa[_0x539e26(0xac)](0x190)[_0x539e26(0xd3)]({'errors':_0x4d0bca[_0x539e26(0xe6)]});}});function a0_0x3ba2(_0x586033,_0x495ba3){const _0x14b6ec=a0_0x14b6();return a0_0x3ba2=function(_0x3ba2ef,_0x5c1442){_0x3ba2ef=_0x3ba2ef-0x81;let _0x2382f0=_0x14b6ec[_0x3ba2ef];return _0x2382f0;},a0_0x3ba2(_0x586033,_0x495ba3);}const storage1=multer[a0_0x5338d3(0x83)]({'destination':(_0x9a5740,_0x49e002,_0x1bccf1)=>{const _0x550766=a0_0x5338d3;_0x1bccf1(null,_0x550766(0xcc));},'filename':(_0x48a478,_0x589564,_0x7a41df)=>{const _0x413348=a0_0x5338d3;_0x7a41df(null,Date[_0x413348(0xa2)]()+_0x589564[_0x413348(0xb8)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5338d3(0xc7)](a0_0x5338d3(0xc2),auth,uploadMigrate[a0_0x5338d3(0xdf)](a0_0x5338d3(0xe2)),async(_0x29e1c4,_0x3ced01)=>{const _0x3d30ba=a0_0x5338d3,_0xa3d16e=_0x29e1c4['file'][_0x3d30ba(0xa5)],_0x38c728=await xlsx['readFile'](_0x3d30ba(0xe0)+_0xa3d16e);let _0x16f367=_0x38c728[_0x3d30ba(0xd9)],_0x4832b4=xlsx[_0x3d30ba(0x8f)][_0x3d30ba(0xb5)](_0x38c728[_0x3d30ba(0xec)][_0x16f367[0x0]]);for(const _0x1c3f28 of _0x4832b4){const _0x383584=_0x1c3f28['Name'],_0x593788=_0x1c3f28['Supplier_Code'],_0x35f0a0=_0x1c3f28['address'],_0x1a01cc=_0x1c3f28[_0x3d30ba(0xb4)],_0x9e9355=_0x1c3f28[_0x3d30ba(0xc4)],_0x5049da=_0x1c3f28[_0x3d30ba(0x8b)];try{let _0x215870=await suppliers[_0x3d30ba(0x9e)]({'name':_0x383584});if(!_0x215870){const _0x1fd2b4=new suppliers({'name':_0x383584,'suppliers_code':_0x593788,'address':_0x35f0a0,'mobile':_0x1a01cc,'email':_0x9e9355,'company':_0x5049da});_0x215870=await _0x1fd2b4[_0x3d30ba(0x91)](),_0x29e1c4[_0x3d30ba(0xbb)](_0x3d30ba(0xaf),_0x383584+_0x3d30ba(0xc6));}else _0x29e1c4[_0x3d30ba(0xbb)](_0x3d30ba(0x9a),_0x383584+_0x3d30ba(0xad));}catch(_0x57b19d){_0x3ced01[_0x3d30ba(0xac)](0x1f4)[_0x3d30ba(0x84)]({'proderror':_0x57b19d[_0x3d30ba(0xe6)],'aproduct':ProductName});}}_0x3ced01['redirect'](_0x3d30ba(0x96));}),module[a0_0x5338d3(0x90)]=router;function a0_0x14b6(){const _0x1162ce=['285935GApkXt','find','Purchase','render','Mobile_number','sheet_to_json','user','6238958jTHUbH','originalname','suppliers_docs','receivable','flash','39480zJjKRQ','findById','suppliers','supplier\x20data\x20update\x20successfully','Customers','supplier_payment','/supplier_import_migrate_file','4rPPsBt','Email','forEach','\x20added\x20successfully','post','payable_sum','mobile','Arabic','6810PkTRKf','public/Migration','suppliers_code','French','address','../middleware/auth','$reason','Portuguese','send','landline','aggregate','body','5653662BoqUdM','language','SheetNames','xlsx','Hindi','Supplier_Code','name','846WoNxHj','single','public/Migration/','purchase','supplier_product_file','company','columns','$amount','message','then','redirect','receivable_sum','amount','Portuguese\x20(BR)','Sheets','Workbook','Name','errors','supplier','diskStorage','json','log','s_payments','English\x20(US)','params','Chinese','/view/payment/:id','Company_Name','33OwUoLx','exceljs','email','utils','exports','save','purchase_return','supplier.js\x20payment_data','German','12972670IGPIle','/supplier/view','express','PBrands','supplier\x20data\x20add\x20successfully','error','/view/:id','37636NUoqIJ','setHeader','findOne','master','Arabic\x20(ae)','doc','now','contactperson','/products_export_migrate_file','filename','English','Router','attachment;\x20filename=supplier_Migration_File.xlsx','get','/view','935emdiPx','status','\x20Failed','Spanish','success'];a0_0x14b6=function(){return _0x1162ce;};return a0_0x14b6();}