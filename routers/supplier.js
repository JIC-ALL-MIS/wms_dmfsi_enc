function a0_0x1f2f(_0x5f3006,_0x210b8d){const _0x335130=a0_0x3351();return a0_0x1f2f=function(_0x1f2f52,_0x5d83a6){_0x1f2f52=_0x1f2f52-0x17e;let _0x1c6223=_0x335130[_0x1f2f52];return _0x1c6223;},a0_0x1f2f(_0x5f3006,_0x210b8d);}const a0_0x12e9ae=a0_0x1f2f;(function(_0x4c8d21,_0x45ac63){const _0x2d22e4=a0_0x1f2f,_0x511bd3=_0x4c8d21();while(!![]){try{const _0x13e5c6=-parseInt(_0x2d22e4(0x1c6))/0x1+parseInt(_0x2d22e4(0x19a))/0x2*(-parseInt(_0x2d22e4(0x1ef))/0x3)+parseInt(_0x2d22e4(0x1ce))/0x4*(-parseInt(_0x2d22e4(0x1eb))/0x5)+parseInt(_0x2d22e4(0x1ee))/0x6*(parseInt(_0x2d22e4(0x17f))/0x7)+parseInt(_0x2d22e4(0x1d0))/0x8*(-parseInt(_0x2d22e4(0x1d2))/0x9)+-parseInt(_0x2d22e4(0x1c4))/0xa*(-parseInt(_0x2d22e4(0x1ea))/0xb)+-parseInt(_0x2d22e4(0x1a7))/0xc*(-parseInt(_0x2d22e4(0x1f0))/0xd);if(_0x13e5c6===_0x45ac63)break;else _0x511bd3['push'](_0x511bd3['shift']());}catch(_0x5cd55e){_0x511bd3['push'](_0x511bd3['shift']());}}}(a0_0x3351,0xcc619));function a0_0x3351(){const _0x1292cb=['suppliers_docs','receivable','attachment;\x20filename=supplier_Migration_File.xlsx','Arabic\x20(ae)','params','purchase_return','amount','s_payments','Company_Name','Customers','Name','2320530zIojSJ','PBrands','supplier.js\x20payment_data','Mobile_number','\x20added\x20successfully','receivable_sum','exports','Sheets','\x20Failed','addWorksheet','$reason','suppliers_code','English\x20(US)','252lPHDhU','readFile','doc','PUnits','reason','render','../public/language/languages.json','contactperson','purchase','error','post','SheetNames','SalesmanName','English','Content-Type','multer','/supplier/view','$amount','Portuguese','suppliers','master','German','originalname','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Router','/view/:id','Purchase\x20Return','email','/products_export_migrate_file','262540GpjzOc','body','1091672AwJSoN','name','findOne','public/Migration/','findById','/view','French','json','4BfeGQP','errors','7456uzFdhK','Email','9549RhTCkw','utils','language','send','filename','setHeader','mobile','Supplier_Code','Chinese','Portuguese\x20(BR)','now','user','Spanish','aggregate','../middleware/auth','flash','xlsx','get','Content-Disposition','save','columns','exceljs','message','log','286uwbCig','1994505fgdzww','supplier_payment','file','84LfKXCV','3jBencN','2175381vByTpW','success','140077uxmMjf','Hindi','find','address','redirect','landline','diskStorage','Purchase','then','forEach','single','supplier','write','../models/all_models','express','Arabic'];a0_0x3351=function(){return _0x1292cb;};return a0_0x3351();}const express=require(a0_0x12e9ae(0x18d)),app=express(),router=express[a0_0x12e9ae(0x1bf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x12e9ae(0x18c)),auth=require(a0_0x12e9ae(0x1e0)),users=require(a0_0x12e9ae(0x1ad)),excelJS=require(a0_0x12e9ae(0x1e7)),xlsx=require(a0_0x12e9ae(0x1e2)),multer=require(a0_0x12e9ae(0x1b6));router[a0_0x12e9ae(0x1e3)](a0_0x12e9ae(0x1cb),auth,async(_0x32b2a0,_0x108e93)=>{const _0x15892b=a0_0x12e9ae;try{const {username:_0x538113,email:_0x1ff30c,role:_0x1b947d}=_0x32b2a0[_0x15892b(0x1dd)],_0x5f2c70=_0x32b2a0[_0x15892b(0x1dd)],_0x408b56=await profile['findOne']({'email':_0x5f2c70[_0x15892b(0x1c2)]}),_0x276b44=await master_shop[_0x15892b(0x181)]();console[_0x15892b(0x1e9)](_0x15892b(0x1bb),_0x276b44);const _0x262ff8=await suppliers['find']();console[_0x15892b(0x1e9)](_0x262ff8);const _0x1601ae=await suppliers[_0x15892b(0x1df)]([{'$lookup':{'from':_0x15892b(0x196),'localField':_0x15892b(0x1c7),'foreignField':_0x15892b(0x1ba),'as':_0x15892b(0x18f)}}]),_0xdaf74b=_0x1601ae['map'](_0x391bdd=>{const _0x4ea1da=_0x15892b;console['log']('data',_0x391bdd);var _0x207756=0x0,_0x5c8e03=0x0;return _0x391bdd[_0x4ea1da(0x18f)][_0x4ea1da(0x188)](_0x174926=>{const _0x50099a=_0x4ea1da;console['log'](_0x50099a(0x1a9),_0x174926),_0x174926[_0x50099a(0x1ab)]==_0x50099a(0x186)?_0x207756+=_0x174926[_0x50099a(0x195)]:_0x5c8e03+=_0x174926[_0x50099a(0x195)];}),_0x391bdd[_0x4ea1da(0x1af)]=_0x207756,_0x391bdd[_0x4ea1da(0x194)]=_0x5c8e03,_0x391bdd;});console['log'](_0x15892b(0x19c),_0xdaf74b);if(_0x276b44[0x0][_0x15892b(0x1d4)]==_0x15892b(0x1a6)){var _0x564458=users[_0x15892b(0x1b4)];console[_0x15892b(0x1e9)](_0x564458);}else{if(_0x276b44[0x0][_0x15892b(0x1d4)]==_0x15892b(0x180))var _0x564458=users[_0x15892b(0x180)];else{if(_0x276b44[0x0][_0x15892b(0x1d4)]=='German')var _0x564458=users['German'];else{if(_0x276b44[0x0]['language']==_0x15892b(0x1de))var _0x564458=users[_0x15892b(0x1de)];else{if(_0x276b44[0x0][_0x15892b(0x1d4)]==_0x15892b(0x1cc))var _0x564458=users[_0x15892b(0x1cc)];else{if(_0x276b44[0x0][_0x15892b(0x1d4)]=='Portuguese\x20(BR)')var _0x564458=users[_0x15892b(0x1b9)];else{if(_0x276b44[0x0][_0x15892b(0x1d4)]==_0x15892b(0x1da))var _0x564458=users[_0x15892b(0x1da)];else{if(_0x276b44[0x0][_0x15892b(0x1d4)]==_0x15892b(0x192))var _0x564458=users['Arabic'];}}}}}}}_0x108e93[_0x15892b(0x1ac)](_0x15892b(0x18a),{'success':_0x32b2a0[_0x15892b(0x1e1)](_0x15892b(0x17e)),'errors':_0x32b2a0[_0x15892b(0x1e1)]('errors'),'user':_0x262ff8,'profile':_0x408b56,'master_shop':_0x276b44,'role':_0x5f2c70,'payment':_0xdaf74b,'language':_0x564458});}catch(_0x41a1aa){console[_0x15892b(0x1e9)](_0x41a1aa);}}),router[a0_0x12e9ae(0x1b1)]('/view',auth,async(_0x1e286a,_0x1d6d13)=>{const _0xc3a96f=a0_0x12e9ae;try{const {name:_0x5572bc,email:_0x44c0d9,mobile:_0xf6d31f,company:_0x21a667,address:_0xd84739,receivable:_0x4773a2,payable:_0x48b4e7,code:_0x24d136,contactperson:_0x36065e,landline:_0x426701}=_0x1e286a[_0xc3a96f(0x1c5)],_0xca855e=new suppliers({'name':_0x5572bc,'email':_0x44c0d9,'mobile':_0xf6d31f,'company':_0x21a667,'address':_0xd84739,'receivable':_0x4773a2,'payable':_0x48b4e7,'suppliers_code':_0x24d136,'contactperson':_0x36065e,'landline':_0x426701}),_0x429d00=await _0xca855e[_0xc3a96f(0x1e5)]();_0x1e286a['flash'](_0xc3a96f(0x17e),'supplier\x20data\x20add\x20successfully'),_0x1d6d13[_0xc3a96f(0x183)](_0xc3a96f(0x1b7));}catch(_0x2cb19b){console[_0xc3a96f(0x1e9)](_0x2cb19b);}}),router[a0_0x12e9ae(0x1e3)]('/view/:id',auth,async(_0x27d964,_0x138b34)=>{const _0x170593=a0_0x12e9ae;try{const {username:_0x2e5801,email:_0x2ef1fc,role:_0x3db73b}=_0x27d964[_0x170593(0x1dd)],_0x2b7199=_0x27d964[_0x170593(0x1dd)],_0x41074c=await profile[_0x170593(0x1c8)]({'email':_0x2b7199[_0x170593(0x1c2)]}),_0x49d272=await master_shop[_0x170593(0x181)]();console['log'](_0x170593(0x1bb),_0x49d272);const _0x1ea79f=_0x27d964[_0x170593(0x193)]['id'],_0x30e1e2=await suppliers[_0x170593(0x1ca)](_0x1ea79f);console[_0x170593(0x1e9)](_0x30e1e2);if(_0x49d272[0x0][_0x170593(0x1d4)]=='English\x20(US)'){var _0x4c6800=users[_0x170593(0x1b4)];console['log'](_0x4c6800);}else{if(_0x49d272[0x0][_0x170593(0x1d4)]==_0x170593(0x180))var _0x4c6800=users[_0x170593(0x180)];else{if(_0x49d272[0x0][_0x170593(0x1d4)]=='German')var _0x4c6800=users[_0x170593(0x1bc)];else{if(_0x49d272[0x0][_0x170593(0x1d4)]=='Spanish')var _0x4c6800=users['Spanish'];else{if(_0x49d272[0x0]['language']=='French')var _0x4c6800=users[_0x170593(0x1cc)];else{if(_0x49d272[0x0][_0x170593(0x1d4)]==_0x170593(0x1db))var _0x4c6800=users[_0x170593(0x1b9)];else{if(_0x49d272[0x0]['language']==_0x170593(0x1da))var _0x4c6800=users['Chinese'];else{if(_0x49d272[0x0][_0x170593(0x1d4)]=='Arabic\x20(ae)')var _0x4c6800=users[_0x170593(0x18e)];}}}}}}}_0x138b34[_0x170593(0x1ac)]('supplier',{'success':_0x27d964['flash'](_0x170593(0x17e)),'errors':_0x27d964[_0x170593(0x1e1)](_0x170593(0x1cf)),'role':_0x2b7199,'profile':_0x41074c,'master_shop':_0x49d272,'user':_0x30e1e2,'language':_0x4c6800});}catch(_0x3b4213){console[_0x170593(0x1e9)](_0x3b4213);}}),router[a0_0x12e9ae(0x1b1)](a0_0x12e9ae(0x1c0),auth,async(_0x5c86ef,_0x1244d9)=>{const _0x3d0bc1=a0_0x12e9ae;try{const _0x39179a=_0x5c86ef['params']['id'],_0x19f844=await suppliers[_0x3d0bc1(0x1ca)](_0x39179a),{name:_0x5f393f,email:_0x1f5de6,mobile:_0x5a571d,company:_0x271e91,address:_0x4dac01,receivable:_0x4f617c,payable:_0x1a2514,code:_0x53d589,contactperson:_0x188cec,landline:_0x2fcbdc}=_0x5c86ef[_0x3d0bc1(0x1c5)];_0x19f844[_0x3d0bc1(0x1c7)]=_0x5f393f,_0x19f844[_0x3d0bc1(0x1c2)]=_0x1f5de6,_0x19f844[_0x3d0bc1(0x1d8)]=_0x5a571d,_0x19f844['company']=_0x271e91,_0x19f844[_0x3d0bc1(0x182)]=_0x4dac01,_0x19f844[_0x3d0bc1(0x190)]=_0x4f617c,_0x19f844['payable']=_0x1a2514,_0x19f844[_0x3d0bc1(0x1a5)]=_0x53d589,_0x19f844[_0x3d0bc1(0x1ae)]=_0x188cec,_0x19f844[_0x3d0bc1(0x184)]=_0x2fcbdc;const _0x329706=await _0x19f844[_0x3d0bc1(0x1e5)]();_0x5c86ef[_0x3d0bc1(0x1e1)](_0x3d0bc1(0x17e),'supplier\x20data\x20update\x20successfully'),_0x1244d9[_0x3d0bc1(0x183)]('/supplier/view');}catch(_0x4c57df){console[_0x3d0bc1(0x1e9)](_0x4c57df);}}),router[a0_0x12e9ae(0x1e3)]('/view/payment/:id',auth,async(_0xfe3aa8,_0x128414)=>{const _0x323af=a0_0x12e9ae;try{const {username:_0x250c74,email:_0x5b35d3,role:_0x214369}=_0xfe3aa8[_0x323af(0x1dd)],_0x31a10b=_0xfe3aa8[_0x323af(0x1dd)],_0x37e6ba=await profile[_0x323af(0x1c8)]({'email':_0x31a10b['email']}),_0x2a3f6a=await master_shop[_0x323af(0x181)]();console[_0x323af(0x1e9)](_0x323af(0x1bb),_0x2a3f6a),console[_0x323af(0x1e9)](_0xfe3aa8[_0x323af(0x193)]['id']);const _0x8ad356=await suppliers[_0x323af(0x1c8)]({'_id':_0xfe3aa8[_0x323af(0x193)]['id']});console[_0x323af(0x1e9)](_0x8ad356);const _0x45e537=await s_payment_data[_0x323af(0x181)]({'suppliers':_0x8ad356['name']});console[_0x323af(0x1e9)](_0x45e537);const _0x1e7530=await s_payment_data[_0x323af(0x1df)]([{'$match':{'suppliers':_0x8ad356[_0x323af(0x1c7)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x323af(0x1a4),'sum':{'$sum':_0x323af(0x1b8)}}}]);console[_0x323af(0x1e9)]('payable_sum',_0x1e7530);const _0x32eeed=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x8ad356['name']}},{'$match':{'reason':_0x323af(0x1c1)}},{'$group':{'_id':_0x323af(0x1a4),'sum':{'$sum':_0x323af(0x1b8)}}}]);console[_0x323af(0x1e9)](_0x323af(0x19f),_0x32eeed);if(_0x2a3f6a[0x0]['language']==_0x323af(0x1a6)){var _0x3bcc63=users[_0x323af(0x1b4)];console[_0x323af(0x1e9)](_0x3bcc63);}else{if(_0x2a3f6a[0x0][_0x323af(0x1d4)]==_0x323af(0x180))var _0x3bcc63=users[_0x323af(0x180)];else{if(_0x2a3f6a[0x0][_0x323af(0x1d4)]==_0x323af(0x1bc))var _0x3bcc63=users[_0x323af(0x1bc)];else{if(_0x2a3f6a[0x0][_0x323af(0x1d4)]==_0x323af(0x1de))var _0x3bcc63=users[_0x323af(0x1de)];else{if(_0x2a3f6a[0x0][_0x323af(0x1d4)]==_0x323af(0x1cc))var _0x3bcc63=users['French'];else{if(_0x2a3f6a[0x0][_0x323af(0x1d4)]=='Portuguese\x20(BR)')var _0x3bcc63=users[_0x323af(0x1b9)];else{if(_0x2a3f6a[0x0]['language']=='Chinese')var _0x3bcc63=users[_0x323af(0x1da)];else{if(_0x2a3f6a[0x0]['language']=='Arabic\x20(ae)')var _0x3bcc63=users[_0x323af(0x18e)];}}}}}}}_0x128414['render'](_0x323af(0x1ec),{'success':_0xfe3aa8[_0x323af(0x1e1)](_0x323af(0x17e)),'errors':_0xfe3aa8[_0x323af(0x1e1)]('errors'),'role':_0x31a10b,'profile':_0x37e6ba,'master_shop':_0x2a3f6a,'payment':_0x45e537,'payable':_0x1e7530,'receivable':_0x32eeed,'language':_0x3bcc63});}catch(_0xf528e3){console[_0x323af(0x1e9)](_0xf528e3);}}),router[a0_0x12e9ae(0x1e3)](a0_0x12e9ae(0x1c3),auth,async(_0xc318b6,_0x4c4dcc)=>{const _0x3781d2=a0_0x12e9ae;try{const _0x35fdff=new excelJS['Workbook'](),_0x16efdb=_0x35fdff[_0x3781d2(0x1a3)](_0x3781d2(0x198));return _0x16efdb[_0x3781d2(0x1e6)]=[{'header':_0x3781d2(0x199),'key':_0x3781d2(0x19b),'width':0xa},{'header':_0x3781d2(0x1d9),'key':_0x3781d2(0x1aa),'width':0xa},{'header':_0x3781d2(0x1d1),'key':_0x3781d2(0x1b3),'width':0xa},{'header':_0x3781d2(0x19d),'key':'address','width':0xa},{'header':'Company_Name','key':_0x3781d2(0x1d8),'width':0xa},{'header':_0x3781d2(0x182),'key':_0x3781d2(0x1c2),'width':0xa}],_0x4c4dcc[_0x3781d2(0x1d7)](_0x3781d2(0x1b5),_0x3781d2(0x1be)),_0x4c4dcc[_0x3781d2(0x1d7)](_0x3781d2(0x1e4),_0x3781d2(0x191)),_0x35fdff[_0x3781d2(0x1e2)][_0x3781d2(0x18b)](_0x4c4dcc)[_0x3781d2(0x187)](()=>{_0x4c4dcc['status'](0xc8);});}catch(_0x56f8a1){_0x4c4dcc['status'](0x190)[_0x3781d2(0x1d5)]({'errors':_0x56f8a1[_0x3781d2(0x1e8)]});}});const storage1=multer[a0_0x12e9ae(0x185)]({'destination':(_0x3c1670,_0x2a81fb,_0x4b641d)=>{_0x4b641d(null,'public/Migration');},'filename':(_0x213cc1,_0xa41c8f,_0x5cfd6e)=>{const _0x1fc24c=a0_0x12e9ae;_0x5cfd6e(null,Date[_0x1fc24c(0x1dc)]()+_0xa41c8f[_0x1fc24c(0x1bd)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x12e9ae(0x1b1)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x12e9ae(0x189)]('supplier_product_file'),async(_0x5e7553,_0x15a521)=>{const _0x24b54c=a0_0x12e9ae,_0x5be994=_0x5e7553[_0x24b54c(0x1ed)][_0x24b54c(0x1d6)],_0x4b4f81=await xlsx[_0x24b54c(0x1a8)](_0x24b54c(0x1c9)+_0x5be994);let _0x5e93fb=_0x4b4f81[_0x24b54c(0x1b2)],_0x5d5771=xlsx[_0x24b54c(0x1d3)]['sheet_to_json'](_0x4b4f81[_0x24b54c(0x1a1)][_0x5e93fb[0x0]]);for(const _0x3bfd7c of _0x5d5771){const _0xdf460f=_0x3bfd7c['Name'],_0x126f1e=_0x3bfd7c[_0x24b54c(0x1d9)],_0x3282f4=_0x3bfd7c[_0x24b54c(0x182)],_0x135983=_0x3bfd7c['Mobile_number'],_0x1e81f4=_0x3bfd7c[_0x24b54c(0x1d1)],_0x439ae8=_0x3bfd7c[_0x24b54c(0x197)];try{let _0x7567c8=await suppliers['findOne']({'name':_0xdf460f});if(!_0x7567c8){const _0x401f3b=new suppliers({'name':_0xdf460f,'suppliers_code':_0x126f1e,'address':_0x3282f4,'mobile':_0x135983,'email':_0x1e81f4,'company':_0x439ae8});_0x7567c8=await _0x401f3b[_0x24b54c(0x1e5)](),_0x5e7553[_0x24b54c(0x1e1)]('success',_0xdf460f+_0x24b54c(0x19e));}else _0x5e7553[_0x24b54c(0x1e1)](_0x24b54c(0x1b0),_0xdf460f+_0x24b54c(0x1a2));}catch(_0x9cc15c){_0x15a521['status'](0x1f4)[_0x24b54c(0x1cd)]({'proderror':_0x9cc15c[_0x24b54c(0x1e8)],'aproduct':ProductName});}}_0x15a521[_0x24b54c(0x183)](_0x24b54c(0x1b7));}),module[a0_0x12e9ae(0x1a0)]=router;