const a0_0x145830=a0_0x4559;(function(_0x10cf4c,_0x3eed10){const _0x1d78fe=a0_0x4559,_0x5a7359=_0x10cf4c();while(!![]){try{const _0x3a5f39=parseInt(_0x1d78fe(0x1d9))/0x1*(-parseInt(_0x1d78fe(0x1ac))/0x2)+parseInt(_0x1d78fe(0x1d6))/0x3+-parseInt(_0x1d78fe(0x1cb))/0x4*(-parseInt(_0x1d78fe(0x1de))/0x5)+parseInt(_0x1d78fe(0x1c0))/0x6+-parseInt(_0x1d78fe(0x1d0))/0x7*(-parseInt(_0x1d78fe(0x199))/0x8)+parseInt(_0x1d78fe(0x1ab))/0x9+parseInt(_0x1d78fe(0x1bb))/0xa*(-parseInt(_0x1d78fe(0x1a8))/0xb);if(_0x3a5f39===_0x3eed10)break;else _0x5a7359['push'](_0x5a7359['shift']());}catch(_0x40c09b){_0x5a7359['push'](_0x5a7359['shift']());}}}(a0_0x2a03,0x2394b));const express=require(a0_0x145830(0x18f)),app=express(),router=express[a0_0x145830(0x1e9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x145830(0x1b9)),auth=require(a0_0x145830(0x19b)),users=require('../public/language/languages.json'),excelJS=require(a0_0x145830(0x1b6)),xlsx=require('xlsx'),multer=require(a0_0x145830(0x1dd));router['get'](a0_0x145830(0x1c8),auth,async(_0x58be10,_0x3b7ff1)=>{const _0xcbb714=a0_0x145830;try{const {username:_0x1550a8,email:_0x3bd77a,role:_0x3cde2e}=_0x58be10[_0xcbb714(0x1df)],_0x35b115=_0x58be10[_0xcbb714(0x1df)],_0x1a623c=await profile[_0xcbb714(0x1c5)]({'email':_0x35b115[_0xcbb714(0x1a1)]}),_0x1215a2=await master_shop['find']();console[_0xcbb714(0x1be)]('master',_0x1215a2);const _0x1f77c1=await suppliers[_0xcbb714(0x1dc)]();console[_0xcbb714(0x1be)](_0x1f77c1);const _0x4a5637=await suppliers[_0xcbb714(0x1b5)]([{'$lookup':{'from':_0xcbb714(0x189),'localField':'name','foreignField':'suppliers','as':_0xcbb714(0x1d1)}}]),_0x5c3836=_0x4a5637[_0xcbb714(0x1d8)](_0x5027df=>{const _0x5c460d=_0xcbb714;console[_0x5c460d(0x1be)](_0x5c460d(0x1bf),_0x5027df);var _0x1e03f8=0x0,_0x49d826=0x0;return _0x5027df[_0x5c460d(0x1d1)]['forEach'](_0x4c06e2=>{const _0x182f3b=_0x5c460d;console[_0x182f3b(0x1be)]('doc',_0x4c06e2),_0x4c06e2[_0x182f3b(0x1d3)]=='Purchase'?_0x1e03f8+=_0x4c06e2[_0x182f3b(0x1ea)]:_0x49d826+=_0x4c06e2[_0x182f3b(0x1ea)];}),_0x5027df[_0x5c460d(0x1ce)]=_0x1e03f8,_0x5027df[_0x5c460d(0x1bc)]=_0x49d826,_0x5027df;});console[_0xcbb714(0x1be)](_0xcbb714(0x1cd),_0x5c3836);if(_0x1215a2[0x0]['language']==_0xcbb714(0x1d5)){var _0x5bb586=users[_0xcbb714(0x1cf)];console[_0xcbb714(0x1be)](_0x5bb586);}else{if(_0x1215a2[0x0][_0xcbb714(0x1d2)]==_0xcbb714(0x185))var _0x5bb586=users['Hindi'];else{if(_0x1215a2[0x0]['language']==_0xcbb714(0x195))var _0x5bb586=users['German'];else{if(_0x1215a2[0x0][_0xcbb714(0x1d2)]==_0xcbb714(0x1e7))var _0x5bb586=users[_0xcbb714(0x1e7)];else{if(_0x1215a2[0x0][_0xcbb714(0x1d2)]==_0xcbb714(0x1c6))var _0x5bb586=users[_0xcbb714(0x1c6)];else{if(_0x1215a2[0x0]['language']==_0xcbb714(0x1a0))var _0x5bb586=users[_0xcbb714(0x180)];else{if(_0x1215a2[0x0][_0xcbb714(0x1d2)]=='Chinese')var _0x5bb586=users[_0xcbb714(0x188)];else{if(_0x1215a2[0x0][_0xcbb714(0x1d2)]==_0xcbb714(0x1e2))var _0x5bb586=users['Arabic'];}}}}}}}_0x3b7ff1[_0xcbb714(0x1e4)](_0xcbb714(0x1b4),{'success':_0x58be10[_0xcbb714(0x1e1)](_0xcbb714(0x184)),'errors':_0x58be10[_0xcbb714(0x1e1)](_0xcbb714(0x1b2)),'user':_0x1f77c1,'profile':_0x1a623c,'master_shop':_0x1215a2,'role':_0x35b115,'payment':_0x5c3836,'language':_0x5bb586});}catch(_0x48c15e){console['log'](_0x48c15e);}}),router[a0_0x145830(0x1a4)](a0_0x145830(0x1c8),auth,async(_0x11548e,_0x1f4157)=>{const _0x41b2ee=a0_0x145830;try{const {name:_0x28360e,email:_0x3c0141,mobile:_0x1949dc,company:_0x32dd32,address:_0x3a9c85,receivable:_0xf0c0e9,payable:_0x408c4f,code:_0x310163,contactperson:_0x311762,landline:_0x1c9643}=_0x11548e[_0x41b2ee(0x183)],_0x14b835=new suppliers({'name':_0x28360e,'email':_0x3c0141,'mobile':_0x1949dc,'company':_0x32dd32,'address':_0x3a9c85,'receivable':_0xf0c0e9,'payable':_0x408c4f,'suppliers_code':_0x310163,'contactperson':_0x311762,'landline':_0x1c9643}),_0x5dc08d=await _0x14b835[_0x41b2ee(0x190)]();_0x11548e[_0x41b2ee(0x1e1)](_0x41b2ee(0x184),'supplier\x20data\x20add\x20successfully'),_0x1f4157[_0x41b2ee(0x181)](_0x41b2ee(0x19e));}catch(_0x4c334b){console[_0x41b2ee(0x1be)](_0x4c334b);}}),router[a0_0x145830(0x1ca)](a0_0x145830(0x1cc),auth,async(_0x52e8d2,_0x8425d9)=>{const _0x43867e=a0_0x145830;try{const {username:_0x68dc0c,email:_0x3744fe,role:_0x3e0ec6}=_0x52e8d2[_0x43867e(0x1df)],_0x1321f5=_0x52e8d2[_0x43867e(0x1df)],_0xf1bc2e=await profile[_0x43867e(0x1c5)]({'email':_0x1321f5[_0x43867e(0x1a1)]}),_0x2c7e4f=await master_shop[_0x43867e(0x1dc)]();console[_0x43867e(0x1be)](_0x43867e(0x1bd),_0x2c7e4f);const _0x169b16=_0x52e8d2['params']['id'],_0x3839e8=await suppliers[_0x43867e(0x1da)](_0x169b16);console[_0x43867e(0x1be)](_0x3839e8);if(_0x2c7e4f[0x0]['language']==_0x43867e(0x1d5)){var _0x7f1384=users['English'];console['log'](_0x7f1384);}else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]==_0x43867e(0x185))var _0x7f1384=users[_0x43867e(0x185)];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]==_0x43867e(0x195))var _0x7f1384=users['German'];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]=='Spanish')var _0x7f1384=users['Spanish'];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]=='French')var _0x7f1384=users[_0x43867e(0x1c6)];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]==_0x43867e(0x1a0))var _0x7f1384=users[_0x43867e(0x180)];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]==_0x43867e(0x188))var _0x7f1384=users[_0x43867e(0x188)];else{if(_0x2c7e4f[0x0][_0x43867e(0x1d2)]=='Arabic\x20(ae)')var _0x7f1384=users['Arabic'];}}}}}}}_0x8425d9[_0x43867e(0x1e4)]('supplier',{'success':_0x52e8d2[_0x43867e(0x1e1)](_0x43867e(0x184)),'errors':_0x52e8d2[_0x43867e(0x1e1)]('errors'),'role':_0x1321f5,'profile':_0xf1bc2e,'master_shop':_0x2c7e4f,'user':_0x3839e8,'language':_0x7f1384});}catch(_0xf1353d){console['log'](_0xf1353d);}}),router[a0_0x145830(0x1a4)]('/view/:id',auth,async(_0x5c7e79,_0x3b9c5e)=>{const _0xb503cd=a0_0x145830;try{const _0x4ea3d4=_0x5c7e79['params']['id'],_0x574e36=await suppliers[_0xb503cd(0x1da)](_0x4ea3d4),{name:_0x3b0a77,email:_0x36f3df,mobile:_0x3d76e0,company:_0x25926c,address:_0x366582,receivable:_0x2dffd4,payable:_0x4eebd6,code:_0x4f6d86,contactperson:_0x5c0202,landline:_0x263f0d}=_0x5c7e79[_0xb503cd(0x183)];_0x574e36[_0xb503cd(0x1af)]=_0x3b0a77,_0x574e36[_0xb503cd(0x1a1)]=_0x36f3df,_0x574e36['mobile']=_0x3d76e0,_0x574e36[_0xb503cd(0x18d)]=_0x25926c,_0x574e36['address']=_0x366582,_0x574e36[_0xb503cd(0x1c4)]=_0x2dffd4,_0x574e36['payable']=_0x4eebd6,_0x574e36[_0xb503cd(0x1a3)]=_0x4f6d86,_0x574e36['contactperson']=_0x5c0202,_0x574e36[_0xb503cd(0x1a9)]=_0x263f0d;const _0x491355=await _0x574e36['save']();_0x5c7e79[_0xb503cd(0x1e1)](_0xb503cd(0x184),_0xb503cd(0x19a)),_0x3b9c5e[_0xb503cd(0x181)](_0xb503cd(0x19e));}catch(_0x5d26d6){console[_0xb503cd(0x1be)](_0x5d26d6);}}),router['get']('/view/payment/:id',auth,async(_0x4d1ab5,_0x400d06)=>{const _0x31f030=a0_0x145830;try{const {username:_0x4bf68b,email:_0x5255cf,role:_0x278173}=_0x4d1ab5[_0x31f030(0x1df)],_0x552343=_0x4d1ab5[_0x31f030(0x1df)],_0x482e8f=await profile[_0x31f030(0x1c5)]({'email':_0x552343['email']}),_0x4b6f39=await master_shop[_0x31f030(0x1dc)]();console[_0x31f030(0x1be)]('master',_0x4b6f39),console[_0x31f030(0x1be)](_0x4d1ab5[_0x31f030(0x1e6)]['id']);const _0x4bafe0=await suppliers['findOne']({'_id':_0x4d1ab5[_0x31f030(0x1e6)]['id']});console[_0x31f030(0x1be)](_0x4bafe0);const _0x179866=await s_payment_data[_0x31f030(0x1dc)]({'suppliers':_0x4bafe0[_0x31f030(0x1af)]});console[_0x31f030(0x1be)](_0x179866);const _0x7233dd=await s_payment_data[_0x31f030(0x1b5)]([{'$match':{'suppliers':_0x4bafe0[_0x31f030(0x1af)]}},{'$match':{'reason':_0x31f030(0x18c)}},{'$group':{'_id':_0x31f030(0x191),'sum':{'$sum':_0x31f030(0x19f)}}}]);console[_0x31f030(0x1be)]('payable_sum',_0x7233dd);const _0x48b5ee=await s_payment_data[_0x31f030(0x1b5)]([{'$match':{'suppliers':_0x4bafe0['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x31f030(0x191),'sum':{'$sum':_0x31f030(0x19f)}}}]);console['log'](_0x31f030(0x1d7),_0x48b5ee);if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x1d5)){var _0xab902=users[_0x31f030(0x1cf)];console[_0x31f030(0x1be)](_0xab902);}else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x185))var _0xab902=users['Hindi'];else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x195))var _0xab902=users[_0x31f030(0x195)];else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x1e7))var _0xab902=users[_0x31f030(0x1e7)];else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]=='French')var _0xab902=users[_0x31f030(0x1c6)];else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x1a0))var _0xab902=users['Portuguese'];else{if(_0x4b6f39[0x0][_0x31f030(0x1d2)]==_0x31f030(0x188))var _0xab902=users[_0x31f030(0x188)];else{if(_0x4b6f39[0x0]['language']==_0x31f030(0x1e2))var _0xab902=users['Arabic'];}}}}}}}_0x400d06[_0x31f030(0x1e4)](_0x31f030(0x1a6),{'success':_0x4d1ab5[_0x31f030(0x1e1)](_0x31f030(0x184)),'errors':_0x4d1ab5[_0x31f030(0x1e1)](_0x31f030(0x1b2)),'role':_0x552343,'profile':_0x482e8f,'master_shop':_0x4b6f39,'payment':_0x179866,'payable':_0x7233dd,'receivable':_0x48b5ee,'language':_0xab902});}catch(_0x474173){console['log'](_0x474173);}}),router['get'](a0_0x145830(0x1c2),auth,async(_0x248479,_0x185415)=>{const _0x6e57a6=a0_0x145830;try{const _0x54545e=new excelJS[(_0x6e57a6(0x18a))](),_0x4c1f83=_0x54545e[_0x6e57a6(0x19c)](_0x6e57a6(0x1e0));return _0x4c1f83[_0x6e57a6(0x182)]=[{'header':_0x6e57a6(0x1ad),'key':_0x6e57a6(0x1e5),'width':0xa},{'header':_0x6e57a6(0x1b7),'key':_0x6e57a6(0x1a5),'width':0xa},{'header':_0x6e57a6(0x1e3),'key':_0x6e57a6(0x1e8),'width':0xa},{'header':_0x6e57a6(0x1aa),'key':'address','width':0xa},{'header':'Company_Name','key':'mobile','width':0xa},{'header':_0x6e57a6(0x18b),'key':'email','width':0xa}],_0x185415['setHeader'](_0x6e57a6(0x1c1),_0x6e57a6(0x1a2)),_0x185415[_0x6e57a6(0x1b8)](_0x6e57a6(0x19d),_0x6e57a6(0x17f)),_0x54545e[_0x6e57a6(0x18e)][_0x6e57a6(0x193)](_0x185415)[_0x6e57a6(0x1db)](()=>{const _0x3da5b9=_0x6e57a6;_0x185415[_0x3da5b9(0x1c9)](0xc8);});}catch(_0x1a0cb2){_0x185415['status'](0x190)[_0x6e57a6(0x186)]({'errors':_0x1a0cb2[_0x6e57a6(0x187)]});}});const storage1=multer[a0_0x145830(0x1c7)]({'destination':(_0x223e1f,_0x53ee23,_0x5bb6d5)=>{const _0x5c962b=a0_0x145830;_0x5bb6d5(null,_0x5c962b(0x1d4));},'filename':(_0x12caa3,_0x213f3b,_0x3eba11)=>{const _0x1cc05c=a0_0x145830;_0x3eba11(null,Date[_0x1cc05c(0x1b0)]()+_0x213f3b['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x2a03(){const _0x2b1e17=['exports','1013464NouNkO','supplier\x20data\x20update\x20successfully','../middleware/auth','addWorksheet','Content-Disposition','/supplier/view','$amount','Portuguese\x20(BR)','email','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','suppliers_code','post','PUnits','supplier_payment','\x20added\x20successfully','319HPEcsV','landline','Mobile_number','1101537icLmBm','122962aRQVef','Name','Company_Name','name','now','readFile','errors','single','supplier','aggregate','exceljs','Supplier_Code','setHeader','../models/all_models','filename','161410OXiInb','purchase_return','master','log','data','247836LiALLP','Content-Type','/products_export_migrate_file','\x20Failed','receivable','findOne','French','diskStorage','/view','status','get','230704wWRzcX','/view/:id','supplier.js\x20payment_data','purchase','English','14xWAvNP','suppliers_docs','language','reason','public/Migration','English\x20(US)','601704rJZgZQ','receivable_sum','map','1vkQxmO','findById','then','find','multer','5kQYFkA','user','Customers','flash','Arabic\x20(ae)','Email','render','PBrands','params','Spanish','SalesmanName','Router','amount','attachment;\x20filename=supplier_Migration_File.xlsx','Portuguese','redirect','columns','body','success','Hindi','send','message','Chinese','s_payments','Workbook','address','Purchase','company','xlsx','express','save','$reason','error','write','SheetNames','German','Sheets','json'];a0_0x2a03=function(){return _0x2b1e17;};return a0_0x2a03();}function a0_0x4559(_0x36cb7e,_0x12a534){const _0x2a035b=a0_0x2a03();return a0_0x4559=function(_0x45593d,_0x13c8b2){_0x45593d=_0x45593d-0x17f;let _0x353f57=_0x2a035b[_0x45593d];return _0x353f57;},a0_0x4559(_0x36cb7e,_0x12a534);}router[a0_0x145830(0x1a4)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x145830(0x1b3)]('supplier_product_file'),async(_0x1002da,_0x5fae85)=>{const _0x3d7dfb=a0_0x145830,_0x4b942c=_0x1002da['file'][_0x3d7dfb(0x1ba)],_0x158c94=await xlsx[_0x3d7dfb(0x1b1)]('public/Migration/'+_0x4b942c);let _0x3e5aab=_0x158c94[_0x3d7dfb(0x194)],_0x2d3cc5=xlsx['utils']['sheet_to_json'](_0x158c94[_0x3d7dfb(0x196)][_0x3e5aab[0x0]]);for(const _0x3044c3 of _0x2d3cc5){const _0x48a1ba=_0x3044c3[_0x3d7dfb(0x1ad)],_0x29f2ae=_0x3044c3[_0x3d7dfb(0x1b7)],_0x48159d=_0x3044c3[_0x3d7dfb(0x18b)],_0x4377ff=_0x3044c3[_0x3d7dfb(0x1aa)],_0x442935=_0x3044c3['Email'],_0x1c84bc=_0x3044c3[_0x3d7dfb(0x1ae)];try{let _0x545ae0=await suppliers[_0x3d7dfb(0x1c5)]({'name':_0x48a1ba});if(!_0x545ae0){const _0x301ae8=new suppliers({'name':_0x48a1ba,'suppliers_code':_0x29f2ae,'address':_0x48159d,'mobile':_0x4377ff,'email':_0x442935,'company':_0x1c84bc});_0x545ae0=await _0x301ae8[_0x3d7dfb(0x190)](),_0x1002da[_0x3d7dfb(0x1e1)]('success',_0x48a1ba+_0x3d7dfb(0x1a7));}else _0x1002da[_0x3d7dfb(0x1e1)](_0x3d7dfb(0x192),_0x48a1ba+_0x3d7dfb(0x1c3));}catch(_0x2755eb){_0x5fae85[_0x3d7dfb(0x1c9)](0x1f4)[_0x3d7dfb(0x197)]({'proderror':_0x2755eb[_0x3d7dfb(0x187)],'aproduct':ProductName});}}_0x5fae85[_0x3d7dfb(0x181)](_0x3d7dfb(0x19e));}),module[a0_0x145830(0x198)]=router;