const a0_0x56fd8c=a0_0x4eca;(function(_0x2844fa,_0x561b1e){const _0x423d65=a0_0x4eca,_0x1a5965=_0x2844fa();while(!![]){try{const _0x2faac8=parseInt(_0x423d65(0x1d2))/0x1*(-parseInt(_0x423d65(0x1c4))/0x2)+-parseInt(_0x423d65(0x1ac))/0x3*(-parseInt(_0x423d65(0x18d))/0x4)+parseInt(_0x423d65(0x1d4))/0x5+parseInt(_0x423d65(0x1b4))/0x6+-parseInt(_0x423d65(0x193))/0x7+-parseInt(_0x423d65(0x1a5))/0x8*(parseInt(_0x423d65(0x1bb))/0x9)+-parseInt(_0x423d65(0x18b))/0xa*(-parseInt(_0x423d65(0x18a))/0xb);if(_0x2faac8===_0x561b1e)break;else _0x1a5965['push'](_0x1a5965['shift']());}catch(_0x518dc6){_0x1a5965['push'](_0x1a5965['shift']());}}}(a0_0x4b5f,0xb86f4));function a0_0x4eca(_0x12599a,_0x3a361d){const _0x4b5f87=a0_0x4b5f();return a0_0x4eca=function(_0x4eca3c,_0x596bf3){_0x4eca3c=_0x4eca3c-0x180;let _0x507406=_0x4b5f87[_0x4eca3c];return _0x507406;},a0_0x4eca(_0x12599a,_0x3a361d);}function a0_0x4b5f(){const _0x462df8=['1NOHlTp','send','4423755QYCAxs','landline','exceljs','../middleware/auth','redirect','payable','success','purchase_return','suppliers_code','findOne','params','supplier_product_file','Chinese','body','master','diskStorage','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Arabic','aggregate','Company_Name','$reason','/supplier/view','Arabic\x20(ae)','status','data','receivable','file','s_payments','PUnits','utils','/view','language','Workbook','33nXzkLV','4544630TJmQLq','attachment;\x20filename=supplier_Migration_File.xlsx','2544BmePDt','German','\x20Failed','Email','public/Migration','English\x20(US)','8323770SSbMSe','English','company','PBrands','/supplier_import_migrate_file','errors','now','supplier.js\x20payment_data','\x20added\x20successfully','save','/view/payment/:id','Name','email','Content-Disposition','post','Hindi','address','Supplier_Code','6797344mddrMB','find','readFile','log','xlsx','then','Purchase\x20Return','2568nHEdHy','express','reason','get','../models/all_models','flash','/view/:id','Purchase','6873102IrvDTH','purchase','message','write','supplier','user','Spanish','9npEENB','forEach','findById','French','columns','originalname','filename','exports','suppliers','2287702ftzjle','supplier\x20data\x20update\x20successfully','supplier_payment','mobile','Sheets','name','Mobile_number','amount','Portuguese','/products_export_migrate_file','Portuguese\x20(BR)','addWorksheet','suppliers_docs','$amount'];a0_0x4b5f=function(){return _0x462df8;};return a0_0x4b5f();}const express=require(a0_0x56fd8c(0x1ad)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x56fd8c(0x1b0)),auth=require(a0_0x56fd8c(0x1d7)),users=require('../public/language/languages.json'),excelJS=require(a0_0x56fd8c(0x1d6)),xlsx=require(a0_0x56fd8c(0x1a9)),multer=require('multer');router['get']('/view',auth,async(_0x2a31ba,_0x33b00f)=>{const _0x36feb8=a0_0x56fd8c;try{const {username:_0x5f45c7,email:_0x4fa6f3,role:_0x14e7b1}=_0x2a31ba['user'],_0x2a9d01=_0x2a31ba['user'],_0x5b4ba0=await profile['findOne']({'email':_0x2a9d01['email']}),_0x39d1d7=await master_shop[_0x36feb8(0x1a6)]();console[_0x36feb8(0x1a8)](_0x36feb8(0x1e2),_0x39d1d7);const _0x425252=await suppliers[_0x36feb8(0x1a6)]();console[_0x36feb8(0x1a8)](_0x425252);const _0x3bfa98=await suppliers[_0x36feb8(0x1e6)]([{'$lookup':{'from':_0x36feb8(0x184),'localField':_0x36feb8(0x1c9),'foreignField':_0x36feb8(0x1c3),'as':_0x36feb8(0x1d0)}}]),_0x590800=_0x3bfa98['map'](_0x3793a8=>{const _0x435521=_0x36feb8;console[_0x435521(0x1a8)](_0x435521(0x181),_0x3793a8);var _0x59ab03=0x0,_0x314f3e=0x0;return _0x3793a8['suppliers_docs'][_0x435521(0x1bc)](_0x533a50=>{const _0x3ecae8=_0x435521;console[_0x3ecae8(0x1a8)]('doc',_0x533a50),_0x533a50[_0x3ecae8(0x1ae)]==_0x3ecae8(0x1b3)?_0x59ab03+=_0x533a50[_0x3ecae8(0x1cb)]:_0x314f3e+=_0x533a50[_0x3ecae8(0x1cb)];}),_0x3793a8[_0x435521(0x1b5)]=_0x59ab03,_0x3793a8[_0x435521(0x1db)]=_0x314f3e,_0x3793a8;});console[_0x36feb8(0x1a8)](_0x36feb8(0x19a),_0x590800);if(_0x39d1d7[0x0][_0x36feb8(0x188)]==_0x36feb8(0x192)){var _0x26ed17=users[_0x36feb8(0x194)];console[_0x36feb8(0x1a8)](_0x26ed17);}else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]=='Hindi')var _0x26ed17=users[_0x36feb8(0x1a2)];else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]=='German')var _0x26ed17=users[_0x36feb8(0x18e)];else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]==_0x36feb8(0x1ba))var _0x26ed17=users['Spanish'];else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]==_0x36feb8(0x1be))var _0x26ed17=users[_0x36feb8(0x1be)];else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]=='Portuguese\x20(BR)')var _0x26ed17=users[_0x36feb8(0x1cc)];else{if(_0x39d1d7[0x0][_0x36feb8(0x188)]=='Chinese')var _0x26ed17=users[_0x36feb8(0x1e0)];else{if(_0x39d1d7[0x0]['language']==_0x36feb8(0x1ea))var _0x26ed17=users[_0x36feb8(0x1e5)];}}}}}}}_0x33b00f['render'](_0x36feb8(0x1b8),{'success':_0x2a31ba['flash'](_0x36feb8(0x1da)),'errors':_0x2a31ba['flash'](_0x36feb8(0x198)),'user':_0x425252,'profile':_0x5b4ba0,'master_shop':_0x39d1d7,'role':_0x2a9d01,'payment':_0x590800,'language':_0x26ed17});}catch(_0x118a7e){console[_0x36feb8(0x1a8)](_0x118a7e);}}),router[a0_0x56fd8c(0x1a1)](a0_0x56fd8c(0x187),auth,async(_0x28922c,_0x4e458f)=>{const _0x150048=a0_0x56fd8c;try{const {name:_0x43420a,email:_0x18602c,mobile:_0x160c8f,company:_0x188c65,address:_0x102d10,receivable:_0xed3dec,payable:_0x4a7da1,code:_0x4abceb,contactperson:_0x2bd114,landline:_0x39b702}=_0x28922c[_0x150048(0x1e1)],_0x1694fe=new suppliers({'name':_0x43420a,'email':_0x18602c,'mobile':_0x160c8f,'company':_0x188c65,'address':_0x102d10,'receivable':_0xed3dec,'payable':_0x4a7da1,'suppliers_code':_0x4abceb,'contactperson':_0x2bd114,'landline':_0x39b702}),_0x326bfc=await _0x1694fe[_0x150048(0x19c)]();_0x28922c[_0x150048(0x1b1)](_0x150048(0x1da),'supplier\x20data\x20add\x20successfully'),_0x4e458f['redirect'](_0x150048(0x1e9));}catch(_0x55afb7){console[_0x150048(0x1a8)](_0x55afb7);}}),router[a0_0x56fd8c(0x1af)]('/view/:id',auth,async(_0x33a7cd,_0x6e3255)=>{const _0x2a9c7b=a0_0x56fd8c;try{const {username:_0xbad33f,email:_0x380e55,role:_0x2ba34e}=_0x33a7cd[_0x2a9c7b(0x1b9)],_0x14c73f=_0x33a7cd[_0x2a9c7b(0x1b9)],_0x2560d1=await profile['findOne']({'email':_0x14c73f[_0x2a9c7b(0x19f)]}),_0x3379bd=await master_shop['find']();console[_0x2a9c7b(0x1a8)](_0x2a9c7b(0x1e2),_0x3379bd);const _0x41b796=_0x33a7cd[_0x2a9c7b(0x1de)]['id'],_0x248921=await suppliers['findById'](_0x41b796);console[_0x2a9c7b(0x1a8)](_0x248921);if(_0x3379bd[0x0][_0x2a9c7b(0x188)]==_0x2a9c7b(0x192)){var _0x67fb14=users[_0x2a9c7b(0x194)];console[_0x2a9c7b(0x1a8)](_0x67fb14);}else{if(_0x3379bd[0x0]['language']==_0x2a9c7b(0x1a2))var _0x67fb14=users['Hindi'];else{if(_0x3379bd[0x0]['language']=='German')var _0x67fb14=users['German'];else{if(_0x3379bd[0x0][_0x2a9c7b(0x188)]=='Spanish')var _0x67fb14=users[_0x2a9c7b(0x1ba)];else{if(_0x3379bd[0x0][_0x2a9c7b(0x188)]==_0x2a9c7b(0x1be))var _0x67fb14=users[_0x2a9c7b(0x1be)];else{if(_0x3379bd[0x0]['language']==_0x2a9c7b(0x1ce))var _0x67fb14=users['Portuguese'];else{if(_0x3379bd[0x0]['language']==_0x2a9c7b(0x1e0))var _0x67fb14=users['Chinese'];else{if(_0x3379bd[0x0]['language']=='Arabic\x20(ae)')var _0x67fb14=users[_0x2a9c7b(0x1e5)];}}}}}}}_0x6e3255['render'](_0x2a9c7b(0x1b8),{'success':_0x33a7cd[_0x2a9c7b(0x1b1)](_0x2a9c7b(0x1da)),'errors':_0x33a7cd[_0x2a9c7b(0x1b1)]('errors'),'role':_0x14c73f,'profile':_0x2560d1,'master_shop':_0x3379bd,'user':_0x248921,'language':_0x67fb14});}catch(_0x121c31){console['log'](_0x121c31);}}),router[a0_0x56fd8c(0x1a1)](a0_0x56fd8c(0x1b2),auth,async(_0x533772,_0x427d43)=>{const _0x11ae6e=a0_0x56fd8c;try{const _0x867fe9=_0x533772[_0x11ae6e(0x1de)]['id'],_0x4539e8=await suppliers[_0x11ae6e(0x1bd)](_0x867fe9),{name:_0x5269ac,email:_0x42b58e,mobile:_0x58d508,company:_0x267925,address:_0x4b3581,receivable:_0x492ce4,payable:_0x591bde,code:_0x3310be,contactperson:_0x21878b,landline:_0x2f7e5e}=_0x533772[_0x11ae6e(0x1e1)];_0x4539e8[_0x11ae6e(0x1c9)]=_0x5269ac,_0x4539e8[_0x11ae6e(0x19f)]=_0x42b58e,_0x4539e8[_0x11ae6e(0x1c7)]=_0x58d508,_0x4539e8[_0x11ae6e(0x195)]=_0x267925,_0x4539e8['address']=_0x4b3581,_0x4539e8[_0x11ae6e(0x182)]=_0x492ce4,_0x4539e8[_0x11ae6e(0x1d9)]=_0x591bde,_0x4539e8[_0x11ae6e(0x1dc)]=_0x3310be,_0x4539e8['contactperson']=_0x21878b,_0x4539e8[_0x11ae6e(0x1d5)]=_0x2f7e5e;const _0x56ee57=await _0x4539e8[_0x11ae6e(0x19c)]();_0x533772[_0x11ae6e(0x1b1)]('success',_0x11ae6e(0x1c5)),_0x427d43['redirect'](_0x11ae6e(0x1e9));}catch(_0x110762){console[_0x11ae6e(0x1a8)](_0x110762);}}),router[a0_0x56fd8c(0x1af)](a0_0x56fd8c(0x19d),auth,async(_0x446bb7,_0x12a220)=>{const _0x1fb8be=a0_0x56fd8c;try{const {username:_0x23305e,email:_0x585194,role:_0x5ce824}=_0x446bb7[_0x1fb8be(0x1b9)],_0x52f9be=_0x446bb7[_0x1fb8be(0x1b9)],_0x3b0258=await profile[_0x1fb8be(0x1dd)]({'email':_0x52f9be[_0x1fb8be(0x19f)]}),_0x1b614c=await master_shop['find']();console[_0x1fb8be(0x1a8)](_0x1fb8be(0x1e2),_0x1b614c),console[_0x1fb8be(0x1a8)](_0x446bb7['params']['id']);const _0x4e4741=await suppliers[_0x1fb8be(0x1dd)]({'_id':_0x446bb7[_0x1fb8be(0x1de)]['id']});console['log'](_0x4e4741);const _0x3a8379=await s_payment_data[_0x1fb8be(0x1a6)]({'suppliers':_0x4e4741[_0x1fb8be(0x1c9)]});console[_0x1fb8be(0x1a8)](_0x3a8379);const _0x58a316=await s_payment_data[_0x1fb8be(0x1e6)]([{'$match':{'suppliers':_0x4e4741[_0x1fb8be(0x1c9)]}},{'$match':{'reason':_0x1fb8be(0x1b3)}},{'$group':{'_id':_0x1fb8be(0x1e8),'sum':{'$sum':_0x1fb8be(0x1d1)}}}]);console[_0x1fb8be(0x1a8)]('payable_sum',_0x58a316);const _0x5ebcc0=await s_payment_data[_0x1fb8be(0x1e6)]([{'$match':{'suppliers':_0x4e4741[_0x1fb8be(0x1c9)]}},{'$match':{'reason':_0x1fb8be(0x1ab)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x1fb8be(0x1d1)}}}]);console[_0x1fb8be(0x1a8)]('receivable_sum',_0x5ebcc0);if(_0x1b614c[0x0][_0x1fb8be(0x188)]==_0x1fb8be(0x192)){var _0x291e9a=users[_0x1fb8be(0x194)];console[_0x1fb8be(0x1a8)](_0x291e9a);}else{if(_0x1b614c[0x0][_0x1fb8be(0x188)]==_0x1fb8be(0x1a2))var _0x291e9a=users[_0x1fb8be(0x1a2)];else{if(_0x1b614c[0x0]['language']==_0x1fb8be(0x18e))var _0x291e9a=users['German'];else{if(_0x1b614c[0x0][_0x1fb8be(0x188)]==_0x1fb8be(0x1ba))var _0x291e9a=users['Spanish'];else{if(_0x1b614c[0x0][_0x1fb8be(0x188)]==_0x1fb8be(0x1be))var _0x291e9a=users[_0x1fb8be(0x1be)];else{if(_0x1b614c[0x0]['language']==_0x1fb8be(0x1ce))var _0x291e9a=users[_0x1fb8be(0x1cc)];else{if(_0x1b614c[0x0][_0x1fb8be(0x188)]=='Chinese')var _0x291e9a=users[_0x1fb8be(0x1e0)];else{if(_0x1b614c[0x0][_0x1fb8be(0x188)]=='Arabic\x20(ae)')var _0x291e9a=users[_0x1fb8be(0x1e5)];}}}}}}}_0x12a220['render'](_0x1fb8be(0x1c6),{'success':_0x446bb7[_0x1fb8be(0x1b1)](_0x1fb8be(0x1da)),'errors':_0x446bb7['flash'](_0x1fb8be(0x198)),'role':_0x52f9be,'profile':_0x3b0258,'master_shop':_0x1b614c,'payment':_0x3a8379,'payable':_0x58a316,'receivable':_0x5ebcc0,'language':_0x291e9a});}catch(_0x26228d){console[_0x1fb8be(0x1a8)](_0x26228d);}}),router['get'](a0_0x56fd8c(0x1cd),auth,async(_0x31a084,_0x4fa9e6)=>{const _0x5bbb20=a0_0x56fd8c;try{const _0x47d974=new excelJS[(_0x5bbb20(0x189))](),_0x47b34d=_0x47d974[_0x5bbb20(0x1cf)]('Customers');return _0x47b34d[_0x5bbb20(0x1bf)]=[{'header':_0x5bbb20(0x19e),'key':_0x5bbb20(0x196),'width':0xa},{'header':_0x5bbb20(0x1a4),'key':_0x5bbb20(0x185),'width':0xa},{'header':_0x5bbb20(0x190),'key':'SalesmanName','width':0xa},{'header':'Mobile_number','key':_0x5bbb20(0x1a3),'width':0xa},{'header':_0x5bbb20(0x1e7),'key':_0x5bbb20(0x1c7),'width':0xa},{'header':_0x5bbb20(0x1a3),'key':_0x5bbb20(0x19f),'width':0xa}],_0x4fa9e6['setHeader']('Content-Type',_0x5bbb20(0x1e4)),_0x4fa9e6['setHeader'](_0x5bbb20(0x1a0),_0x5bbb20(0x18c)),_0x47d974[_0x5bbb20(0x1a9)][_0x5bbb20(0x1b7)](_0x4fa9e6)[_0x5bbb20(0x1aa)](()=>{_0x4fa9e6['status'](0xc8);});}catch(_0x92de95){_0x4fa9e6[_0x5bbb20(0x180)](0x190)[_0x5bbb20(0x1d3)]({'errors':_0x92de95[_0x5bbb20(0x1b6)]});}});const storage1=multer[a0_0x56fd8c(0x1e3)]({'destination':(_0x22897f,_0x41680e,_0xa1543e)=>{const _0x25ed98=a0_0x56fd8c;_0xa1543e(null,_0x25ed98(0x191));},'filename':(_0x3d7f2b,_0x560a45,_0x4c9413)=>{const _0x5d035e=a0_0x56fd8c;_0x4c9413(null,Date[_0x5d035e(0x199)]()+_0x560a45[_0x5d035e(0x1c0)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x56fd8c(0x1a1)](a0_0x56fd8c(0x197),auth,uploadMigrate['single'](a0_0x56fd8c(0x1df)),async(_0x5cbadd,_0x339be7)=>{const _0x2ba663=a0_0x56fd8c,_0x20b304=_0x5cbadd[_0x2ba663(0x183)][_0x2ba663(0x1c1)],_0x136bcf=await xlsx[_0x2ba663(0x1a7)]('public/Migration/'+_0x20b304);let _0x1fd7de=_0x136bcf['SheetNames'],_0x276ba8=xlsx[_0x2ba663(0x186)]['sheet_to_json'](_0x136bcf[_0x2ba663(0x1c8)][_0x1fd7de[0x0]]);for(const _0xd79c6d of _0x276ba8){const _0x4422bc=_0xd79c6d[_0x2ba663(0x19e)],_0xeb0df3=_0xd79c6d[_0x2ba663(0x1a4)],_0x48062f=_0xd79c6d[_0x2ba663(0x1a3)],_0x59b04a=_0xd79c6d[_0x2ba663(0x1ca)],_0x349433=_0xd79c6d[_0x2ba663(0x190)],_0x12e858=_0xd79c6d['Company_Name'];try{let _0x3e985d=await suppliers[_0x2ba663(0x1dd)]({'name':_0x4422bc});if(!_0x3e985d){const _0x5d0183=new suppliers({'name':_0x4422bc,'suppliers_code':_0xeb0df3,'address':_0x48062f,'mobile':_0x59b04a,'email':_0x349433,'company':_0x12e858});_0x3e985d=await _0x5d0183[_0x2ba663(0x19c)](),_0x5cbadd[_0x2ba663(0x1b1)](_0x2ba663(0x1da),_0x4422bc+_0x2ba663(0x19b));}else _0x5cbadd[_0x2ba663(0x1b1)]('error',_0x4422bc+_0x2ba663(0x18f));}catch(_0x166188){_0x339be7['status'](0x1f4)['json']({'proderror':_0x166188['message'],'aproduct':ProductName});}}_0x339be7[_0x2ba663(0x1d8)]('/supplier/view');}),module[a0_0x56fd8c(0x1c2)]=router;