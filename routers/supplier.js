const a0_0x354849=a0_0x12ee;(function(_0x271617,_0x25304a){const _0x2ca9bd=a0_0x12ee,_0x1c8ef9=_0x271617();while(!![]){try{const _0x429863=parseInt(_0x2ca9bd(0x9f))/0x1*(-parseInt(_0x2ca9bd(0xbd))/0x2)+parseInt(_0x2ca9bd(0x7c))/0x3+-parseInt(_0x2ca9bd(0xa7))/0x4+-parseInt(_0x2ca9bd(0x7f))/0x5*(parseInt(_0x2ca9bd(0x94))/0x6)+parseInt(_0x2ca9bd(0x85))/0x7+-parseInt(_0x2ca9bd(0x74))/0x8*(-parseInt(_0x2ca9bd(0x80))/0x9)+parseInt(_0x2ca9bd(0x96))/0xa*(parseInt(_0x2ca9bd(0x6f))/0xb);if(_0x429863===_0x25304a)break;else _0x1c8ef9['push'](_0x1c8ef9['shift']());}catch(_0x3aa9d0){_0x1c8ef9['push'](_0x1c8ef9['shift']());}}}(a0_0x4c2c,0x9dbd7));const express=require(a0_0x354849(0x9a)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x354849(0xce)),auth=require(a0_0x354849(0xc5)),users=require(a0_0x354849(0x8f)),excelJS=require(a0_0x354849(0xa3)),xlsx=require(a0_0x354849(0x9e)),multer=require(a0_0x354849(0xda));function a0_0x4c2c(){const _0x2a0a8d=['../middleware/auth','supplier\x20data\x20add\x20successfully','redirect','Chinese','status','receivable','Company_Name','attachment;\x20filename=supplier_Migration_File.xlsx','now','../models/all_models','SalesmanName','\x20Failed','sheet_to_json','columns','post','map','company','setHeader','public/Migration','PBrands','findOne','multer','Portuguese\x20(BR)','forEach','Email','findById','Hindi','supplier_product_file','189244rCjrOz','/view/payment/:id','German','$amount','amount','4149736ELJumJ','supplier.js\x20payment_data','errors','get','French','contactperson','success','Content-Disposition','196521ofGPIp','receivable_sum','write','5cKiagG','9ZXPmEb','data','supplier_payment','find','payable','5929364nZdeMn','send','Customers','PUnits','Spanish','email','flash','address','Purchase','doc','../public/language/languages.json','/supplier_import_migrate_file','log','Portuguese','render','6681930LDDVWa','English','970LSSACr','json','Workbook','purchase_return','express','body','save','user','xlsx','642233mNXCrH','Mobile_number','master','\x20added\x20successfully','exceljs','supplier','Supplier_Code','then','2792292JcoHdj','English\x20(US)','Purchase\x20Return','/view/:id','message','purchase','error','exports','aggregate','Arabic\x20(ae)','supplier\x20data\x20update\x20successfully','suppliers_code','$reason','name','Name','landline','diskStorage','readFile','file','params','/view','language','2nleSBS','Content-Type','reason','mobile','addWorksheet','Arabic','/supplier/view','payable_sum'];a0_0x4c2c=function(){return _0x2a0a8d;};return a0_0x4c2c();}router[a0_0x354849(0x77)](a0_0x354849(0xbb),auth,async(_0x4c4b74,_0x140dcb)=>{const _0x3e81f7=a0_0x354849;try{const {username:_0xb17a60,email:_0x127ad1,role:_0x140379}=_0x4c4b74[_0x3e81f7(0x9d)],_0x435ccf=_0x4c4b74['user'],_0x1922ee=await profile[_0x3e81f7(0xd9)]({'email':_0x435ccf['email']}),_0x25038d=await master_shop[_0x3e81f7(0x83)]();console['log'](_0x3e81f7(0xa1),_0x25038d);const _0x207c41=await suppliers['find']();console[_0x3e81f7(0x91)](_0x207c41);const _0x588940=await suppliers[_0x3e81f7(0xaf)]([{'$lookup':{'from':'s_payments','localField':_0x3e81f7(0xb4),'foreignField':'suppliers','as':'suppliers_docs'}}]),_0x2510ba=_0x588940[_0x3e81f7(0xd4)](_0x56fa1f=>{const _0x3787fc=_0x3e81f7;console['log'](_0x3787fc(0x81),_0x56fa1f);var _0x48cffc=0x0,_0x5024bd=0x0;return _0x56fa1f['suppliers_docs'][_0x3787fc(0x6a)](_0x2738f5=>{const _0x2a58c4=_0x3787fc;console[_0x2a58c4(0x91)](_0x2a58c4(0x8e),_0x2738f5),_0x2738f5[_0x2a58c4(0xbf)]==_0x2a58c4(0x8d)?_0x48cffc+=_0x2738f5[_0x2a58c4(0x73)]:_0x5024bd+=_0x2738f5[_0x2a58c4(0x73)];}),_0x56fa1f[_0x3787fc(0xac)]=_0x48cffc,_0x56fa1f[_0x3787fc(0x99)]=_0x5024bd,_0x56fa1f;});console[_0x3e81f7(0x91)](_0x3e81f7(0x75),_0x2510ba);if(_0x25038d[0x0][_0x3e81f7(0xbc)]==_0x3e81f7(0xa8)){var _0x1dcadd=users[_0x3e81f7(0x95)];console[_0x3e81f7(0x91)](_0x1dcadd);}else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]=='Hindi')var _0x1dcadd=users[_0x3e81f7(0x6d)];else{if(_0x25038d[0x0]['language']==_0x3e81f7(0x71))var _0x1dcadd=users[_0x3e81f7(0x71)];else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]==_0x3e81f7(0x89))var _0x1dcadd=users['Spanish'];else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]==_0x3e81f7(0x78))var _0x1dcadd=users[_0x3e81f7(0x78)];else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]=='Portuguese\x20(BR)')var _0x1dcadd=users['Portuguese'];else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]==_0x3e81f7(0xc8))var _0x1dcadd=users[_0x3e81f7(0xc8)];else{if(_0x25038d[0x0][_0x3e81f7(0xbc)]==_0x3e81f7(0xb0))var _0x1dcadd=users[_0x3e81f7(0xc2)];}}}}}}}_0x140dcb[_0x3e81f7(0x93)](_0x3e81f7(0xa4),{'success':_0x4c4b74[_0x3e81f7(0x8b)](_0x3e81f7(0x7a)),'errors':_0x4c4b74['flash'](_0x3e81f7(0x76)),'user':_0x207c41,'profile':_0x1922ee,'master_shop':_0x25038d,'role':_0x435ccf,'payment':_0x2510ba,'language':_0x1dcadd});}catch(_0x565219){console['log'](_0x565219);}}),router[a0_0x354849(0xd3)]('/view',auth,async(_0x3ea7c2,_0x377bad)=>{const _0x2d5374=a0_0x354849;try{const {name:_0x4ea337,email:_0x5d5079,mobile:_0x7e9444,company:_0x2206a6,address:_0x8b6e4b,receivable:_0x303852,payable:_0x2388cf,code:_0x50191f,contactperson:_0x2be0cc,landline:_0x2e0d92}=_0x3ea7c2[_0x2d5374(0x9b)],_0x217775=new suppliers({'name':_0x4ea337,'email':_0x5d5079,'mobile':_0x7e9444,'company':_0x2206a6,'address':_0x8b6e4b,'receivable':_0x303852,'payable':_0x2388cf,'suppliers_code':_0x50191f,'contactperson':_0x2be0cc,'landline':_0x2e0d92}),_0x3ab425=await _0x217775[_0x2d5374(0x9c)]();_0x3ea7c2[_0x2d5374(0x8b)](_0x2d5374(0x7a),_0x2d5374(0xc6)),_0x377bad[_0x2d5374(0xc7)](_0x2d5374(0xc3));}catch(_0x28f83c){console[_0x2d5374(0x91)](_0x28f83c);}}),router['get'](a0_0x354849(0xaa),auth,async(_0x566b64,_0x9a59b9)=>{const _0x5f032f=a0_0x354849;try{const {username:_0x5999ac,email:_0x3668a8,role:_0x358c8f}=_0x566b64['user'],_0x58cf6f=_0x566b64['user'],_0x35b378=await profile[_0x5f032f(0xd9)]({'email':_0x58cf6f['email']}),_0x55feb6=await master_shop[_0x5f032f(0x83)]();console[_0x5f032f(0x91)](_0x5f032f(0xa1),_0x55feb6);const _0x279be3=_0x566b64[_0x5f032f(0xba)]['id'],_0x509b83=await suppliers[_0x5f032f(0x6c)](_0x279be3);console[_0x5f032f(0x91)](_0x509b83);if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0xa8)){var _0xee81e4=users[_0x5f032f(0x95)];console[_0x5f032f(0x91)](_0xee81e4);}else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0x6d))var _0xee81e4=users[_0x5f032f(0x6d)];else{if(_0x55feb6[0x0]['language']==_0x5f032f(0x71))var _0xee81e4=users[_0x5f032f(0x71)];else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0x89))var _0xee81e4=users[_0x5f032f(0x89)];else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0x78))var _0xee81e4=users[_0x5f032f(0x78)];else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0x69))var _0xee81e4=users[_0x5f032f(0x92)];else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]==_0x5f032f(0xc8))var _0xee81e4=users[_0x5f032f(0xc8)];else{if(_0x55feb6[0x0][_0x5f032f(0xbc)]=='Arabic\x20(ae)')var _0xee81e4=users[_0x5f032f(0xc2)];}}}}}}}_0x9a59b9['render']('supplier',{'success':_0x566b64[_0x5f032f(0x8b)](_0x5f032f(0x7a)),'errors':_0x566b64[_0x5f032f(0x8b)](_0x5f032f(0x76)),'role':_0x58cf6f,'profile':_0x35b378,'master_shop':_0x55feb6,'user':_0x509b83,'language':_0xee81e4});}catch(_0xb65ffb){console['log'](_0xb65ffb);}}),router[a0_0x354849(0xd3)](a0_0x354849(0xaa),auth,async(_0x427ae7,_0x60c8e9)=>{const _0x3f5d0c=a0_0x354849;try{const _0x20b027=_0x427ae7[_0x3f5d0c(0xba)]['id'],_0x27d42a=await suppliers[_0x3f5d0c(0x6c)](_0x20b027),{name:_0xcef7dc,email:_0x3946d2,mobile:_0x25d2b2,company:_0x77305b,address:_0x50ec57,receivable:_0x17398d,payable:_0x2ce3a7,code:_0x372f3f,contactperson:_0x2beb80,landline:_0x828c4f}=_0x427ae7['body'];_0x27d42a['name']=_0xcef7dc,_0x27d42a[_0x3f5d0c(0x8a)]=_0x3946d2,_0x27d42a[_0x3f5d0c(0xc0)]=_0x25d2b2,_0x27d42a[_0x3f5d0c(0xd5)]=_0x77305b,_0x27d42a['address']=_0x50ec57,_0x27d42a[_0x3f5d0c(0xca)]=_0x17398d,_0x27d42a[_0x3f5d0c(0x84)]=_0x2ce3a7,_0x27d42a[_0x3f5d0c(0xb2)]=_0x372f3f,_0x27d42a[_0x3f5d0c(0x79)]=_0x2beb80,_0x27d42a[_0x3f5d0c(0xb6)]=_0x828c4f;const _0x8ecacc=await _0x27d42a[_0x3f5d0c(0x9c)]();_0x427ae7[_0x3f5d0c(0x8b)](_0x3f5d0c(0x7a),_0x3f5d0c(0xb1)),_0x60c8e9[_0x3f5d0c(0xc7)]('/supplier/view');}catch(_0xc47215){console[_0x3f5d0c(0x91)](_0xc47215);}}),router[a0_0x354849(0x77)](a0_0x354849(0x70),auth,async(_0x35aada,_0x40fe55)=>{const _0x48ff7e=a0_0x354849;try{const {username:_0xf3371f,email:_0x4b5be3,role:_0x3f53a9}=_0x35aada[_0x48ff7e(0x9d)],_0x2a84c1=_0x35aada[_0x48ff7e(0x9d)],_0x1928d6=await profile[_0x48ff7e(0xd9)]({'email':_0x2a84c1[_0x48ff7e(0x8a)]}),_0x59354d=await master_shop[_0x48ff7e(0x83)]();console[_0x48ff7e(0x91)](_0x48ff7e(0xa1),_0x59354d),console[_0x48ff7e(0x91)](_0x35aada['params']['id']);const _0x1b6385=await suppliers[_0x48ff7e(0xd9)]({'_id':_0x35aada[_0x48ff7e(0xba)]['id']});console['log'](_0x1b6385);const _0x31bcd9=await s_payment_data[_0x48ff7e(0x83)]({'suppliers':_0x1b6385['name']});console[_0x48ff7e(0x91)](_0x31bcd9);const _0x55a1dd=await s_payment_data[_0x48ff7e(0xaf)]([{'$match':{'suppliers':_0x1b6385[_0x48ff7e(0xb4)]}},{'$match':{'reason':_0x48ff7e(0x8d)}},{'$group':{'_id':_0x48ff7e(0xb3),'sum':{'$sum':_0x48ff7e(0x72)}}}]);console['log'](_0x48ff7e(0xc4),_0x55a1dd);const _0x3e280f=await s_payment_data[_0x48ff7e(0xaf)]([{'$match':{'suppliers':_0x1b6385[_0x48ff7e(0xb4)]}},{'$match':{'reason':_0x48ff7e(0xa9)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x48ff7e(0x72)}}}]);console[_0x48ff7e(0x91)](_0x48ff7e(0x7d),_0x3e280f);if(_0x59354d[0x0]['language']==_0x48ff7e(0xa8)){var _0x2be928=users[_0x48ff7e(0x95)];console[_0x48ff7e(0x91)](_0x2be928);}else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]==_0x48ff7e(0x6d))var _0x2be928=users[_0x48ff7e(0x6d)];else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]==_0x48ff7e(0x71))var _0x2be928=users[_0x48ff7e(0x71)];else{if(_0x59354d[0x0]['language']==_0x48ff7e(0x89))var _0x2be928=users['Spanish'];else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]=='French')var _0x2be928=users['French'];else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]==_0x48ff7e(0x69))var _0x2be928=users[_0x48ff7e(0x92)];else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]==_0x48ff7e(0xc8))var _0x2be928=users[_0x48ff7e(0xc8)];else{if(_0x59354d[0x0][_0x48ff7e(0xbc)]==_0x48ff7e(0xb0))var _0x2be928=users['Arabic'];}}}}}}}_0x40fe55[_0x48ff7e(0x93)](_0x48ff7e(0x82),{'success':_0x35aada[_0x48ff7e(0x8b)]('success'),'errors':_0x35aada[_0x48ff7e(0x8b)](_0x48ff7e(0x76)),'role':_0x2a84c1,'profile':_0x1928d6,'master_shop':_0x59354d,'payment':_0x31bcd9,'payable':_0x55a1dd,'receivable':_0x3e280f,'language':_0x2be928});}catch(_0xb1d6ee){console[_0x48ff7e(0x91)](_0xb1d6ee);}}),router[a0_0x354849(0x77)]('/products_export_migrate_file',auth,async(_0x1520ca,_0x4756d7)=>{const _0x19feb1=a0_0x354849;try{const _0x1741a2=new excelJS[(_0x19feb1(0x98))](),_0x36e536=_0x1741a2[_0x19feb1(0xc1)](_0x19feb1(0x87));return _0x36e536[_0x19feb1(0xd2)]=[{'header':_0x19feb1(0xb5),'key':_0x19feb1(0xd8),'width':0xa},{'header':_0x19feb1(0xa5),'key':_0x19feb1(0x88),'width':0xa},{'header':_0x19feb1(0x6b),'key':_0x19feb1(0xcf),'width':0xa},{'header':'Mobile_number','key':_0x19feb1(0x8c),'width':0xa},{'header':'Company_Name','key':_0x19feb1(0xc0),'width':0xa},{'header':'address','key':'email','width':0xa}],_0x4756d7[_0x19feb1(0xd6)](_0x19feb1(0xbe),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x4756d7[_0x19feb1(0xd6)](_0x19feb1(0x7b),_0x19feb1(0xcc)),_0x1741a2[_0x19feb1(0x9e)][_0x19feb1(0x7e)](_0x4756d7)[_0x19feb1(0xa6)](()=>{const _0x190f6a=_0x19feb1;_0x4756d7[_0x190f6a(0xc9)](0xc8);});}catch(_0x261965){_0x4756d7[_0x19feb1(0xc9)](0x190)[_0x19feb1(0x86)]({'errors':_0x261965[_0x19feb1(0xab)]});}});const storage1=multer[a0_0x354849(0xb7)]({'destination':(_0x25289c,_0x242620,_0x5cd430)=>{const _0x2a9295=a0_0x354849;_0x5cd430(null,_0x2a9295(0xd7));},'filename':(_0x59d763,_0xf3826b,_0x140046)=>{const _0x7fa02d=a0_0x354849;_0x140046(null,Date[_0x7fa02d(0xcd)]()+_0xf3826b['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x12ee(_0x4dc1f4,_0x242056){const _0x4c2c23=a0_0x4c2c();return a0_0x12ee=function(_0x12ee8e,_0x3360d0){_0x12ee8e=_0x12ee8e-0x69;let _0x189dde=_0x4c2c23[_0x12ee8e];return _0x189dde;},a0_0x12ee(_0x4dc1f4,_0x242056);}router['post'](a0_0x354849(0x90),auth,uploadMigrate['single'](a0_0x354849(0x6e)),async(_0x2bb5e5,_0x520113)=>{const _0x2bb82e=a0_0x354849,_0x17900e=_0x2bb5e5[_0x2bb82e(0xb9)]['filename'],_0x5b6b3b=await xlsx[_0x2bb82e(0xb8)]('public/Migration/'+_0x17900e);let _0x1506fa=_0x5b6b3b['SheetNames'],_0x27c4cd=xlsx['utils'][_0x2bb82e(0xd1)](_0x5b6b3b['Sheets'][_0x1506fa[0x0]]);for(const _0x587a69 of _0x27c4cd){const _0x42de3d=_0x587a69[_0x2bb82e(0xb5)],_0x11e9f7=_0x587a69[_0x2bb82e(0xa5)],_0x368d03=_0x587a69[_0x2bb82e(0x8c)],_0x23530c=_0x587a69[_0x2bb82e(0xa0)],_0x5c6af4=_0x587a69[_0x2bb82e(0x6b)],_0x20a067=_0x587a69[_0x2bb82e(0xcb)];try{let _0x4810a9=await suppliers['findOne']({'name':_0x42de3d});if(!_0x4810a9){const _0xd414d7=new suppliers({'name':_0x42de3d,'suppliers_code':_0x11e9f7,'address':_0x368d03,'mobile':_0x23530c,'email':_0x5c6af4,'company':_0x20a067});_0x4810a9=await _0xd414d7[_0x2bb82e(0x9c)](),_0x2bb5e5[_0x2bb82e(0x8b)](_0x2bb82e(0x7a),_0x42de3d+_0x2bb82e(0xa2));}else _0x2bb5e5[_0x2bb82e(0x8b)](_0x2bb82e(0xad),_0x42de3d+_0x2bb82e(0xd0));}catch(_0x404230){_0x520113[_0x2bb82e(0xc9)](0x1f4)[_0x2bb82e(0x97)]({'proderror':_0x404230['message'],'aproduct':ProductName});}}_0x520113[_0x2bb82e(0xc7)](_0x2bb82e(0xc3));}),module[a0_0x354849(0xae)]=router;