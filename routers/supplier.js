function a0_0x3f6a(_0x1618b7,_0x21780c){const _0x18857f=a0_0x1885();return a0_0x3f6a=function(_0x3f6a01,_0x3e8e7f){_0x3f6a01=_0x3f6a01-0x168;let _0x4b6e03=_0x18857f[_0x3f6a01];return _0x4b6e03;},a0_0x3f6a(_0x1618b7,_0x21780c);}const a0_0x58b9cf=a0_0x3f6a;(function(_0x592b74,_0x34c345){const _0x193b65=a0_0x3f6a,_0x1cf243=_0x592b74();while(!![]){try{const _0x1a2fc3=parseInt(_0x193b65(0x1b4))/0x1*(-parseInt(_0x193b65(0x18c))/0x2)+parseInt(_0x193b65(0x1bd))/0x3+-parseInt(_0x193b65(0x1af))/0x4*(parseInt(_0x193b65(0x1c1))/0x5)+-parseInt(_0x193b65(0x1bf))/0x6+parseInt(_0x193b65(0x1b6))/0x7*(parseInt(_0x193b65(0x1b7))/0x8)+-parseInt(_0x193b65(0x1ad))/0x9*(parseInt(_0x193b65(0x1c0))/0xa)+parseInt(_0x193b65(0x1bc))/0xb;if(_0x1a2fc3===_0x34c345)break;else _0x1cf243['push'](_0x1cf243['shift']());}catch(_0x58d179){_0x1cf243['push'](_0x1cf243['shift']());}}}(a0_0x1885,0xef1d7));const express=require(a0_0x58b9cf(0x1a8)),app=express(),router=express[a0_0x58b9cf(0x1d5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x58b9cf(0x1b9)),auth=require(a0_0x58b9cf(0x1b3)),users=require(a0_0x58b9cf(0x180)),excelJS=require(a0_0x58b9cf(0x16a)),xlsx=require(a0_0x58b9cf(0x1cb)),multer=require('multer');function a0_0x1885(){const _0x35786e=['setHeader','findOne','payable','../public/language/languages.json','French','/view','Spanish','Sheets','Arabic\x20(ae)','get','\x20Failed','email','public/Migration','English\x20(US)','landline','41722NfYWAZ','supplier','data','PBrands','findById','success','Company_Name','aggregate','German','receivable','status','Name','company','$amount','doc','Purchase','name','$reason','log','SheetNames','supplier\x20data\x20add\x20successfully','SalesmanName','Hindi','exports','master','supplier_product_file','receivable_sum','redirect','express','mobile','readFile','json','send','45zvLvCn','then','25404Dxgtyn','originalname','/view/:id','filename','../middleware/auth','20opNRzr','body','7231FsXtCx','3312TtWJur','purchase_return','../models/all_models','save','Supplier_Code','30950623BRCYye','5351967nzlVMc','Chinese','10999428DGQzld','2498570gMmsvP','430ddpnhU','Purchase\x20Return','suppliers_docs','file','Content-Disposition','/supplier/view','language','addWorksheet','sheet_to_json','find','xlsx','Arabic','payable_sum','contactperson','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Portuguese\x20(BR)','flash','message','map','public/Migration/','Router','suppliers_code','Mobile_number','Portuguese','s_payments','exceljs','post','Workbook','render','suppliers','PUnits','now','forEach','diskStorage','columns','reason','single','params','English','user','amount','utils','address','errors'];a0_0x1885=function(){return _0x35786e;};return a0_0x1885();}router['get'](a0_0x58b9cf(0x182),auth,async(_0x4e5f09,_0x40371f)=>{const _0x585c7c=a0_0x58b9cf;try{const {username:_0x1ccbaa,email:_0x58c092,role:_0xa30bc1}=_0x4e5f09[_0x585c7c(0x178)],_0x4cc258=_0x4e5f09[_0x585c7c(0x178)],_0x3018ff=await profile[_0x585c7c(0x17e)]({'email':_0x4cc258[_0x585c7c(0x188)]}),_0x2fdb66=await master_shop['find']();console[_0x585c7c(0x19e)]('master',_0x2fdb66);const _0x19a818=await suppliers[_0x585c7c(0x1ca)]();console[_0x585c7c(0x19e)](_0x19a818);const _0x59b9cc=await suppliers[_0x585c7c(0x193)]([{'$lookup':{'from':_0x585c7c(0x169),'localField':_0x585c7c(0x19c),'foreignField':_0x585c7c(0x16e),'as':_0x585c7c(0x1c3)}}]),_0x5ce7c0=_0x59b9cc[_0x585c7c(0x1d3)](_0x2ffac8=>{const _0x37193d=_0x585c7c;console[_0x37193d(0x19e)](_0x37193d(0x18e),_0x2ffac8);var _0x462ff5=0x0,_0x58a3dc=0x0;return _0x2ffac8[_0x37193d(0x1c3)][_0x37193d(0x171)](_0x12b47c=>{const _0x3bfeb0=_0x37193d;console[_0x3bfeb0(0x19e)](_0x3bfeb0(0x19a),_0x12b47c),_0x12b47c[_0x3bfeb0(0x174)]==_0x3bfeb0(0x19b)?_0x462ff5+=_0x12b47c[_0x3bfeb0(0x179)]:_0x58a3dc+=_0x12b47c[_0x3bfeb0(0x179)];}),_0x2ffac8['purchase']=_0x462ff5,_0x2ffac8[_0x37193d(0x1b8)]=_0x58a3dc,_0x2ffac8;});console['log']('supplier.js\x20payment_data',_0x5ce7c0);if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]==_0x585c7c(0x18a)){var _0x5e3aeb=users[_0x585c7c(0x177)];console['log'](_0x5e3aeb);}else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]=='Hindi')var _0x5e3aeb=users['Hindi'];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]==_0x585c7c(0x194))var _0x5e3aeb=users[_0x585c7c(0x194)];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]==_0x585c7c(0x183))var _0x5e3aeb=users[_0x585c7c(0x183)];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]=='French')var _0x5e3aeb=users[_0x585c7c(0x181)];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]==_0x585c7c(0x1d0))var _0x5e3aeb=users[_0x585c7c(0x168)];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]=='Chinese')var _0x5e3aeb=users[_0x585c7c(0x1be)];else{if(_0x2fdb66[0x0][_0x585c7c(0x1c7)]==_0x585c7c(0x185))var _0x5e3aeb=users[_0x585c7c(0x1cc)];}}}}}}}_0x40371f[_0x585c7c(0x16d)]('supplier',{'success':_0x4e5f09[_0x585c7c(0x1d1)](_0x585c7c(0x191)),'errors':_0x4e5f09[_0x585c7c(0x1d1)](_0x585c7c(0x17c)),'user':_0x19a818,'profile':_0x3018ff,'master_shop':_0x2fdb66,'role':_0x4cc258,'payment':_0x5ce7c0,'language':_0x5e3aeb});}catch(_0x573344){console[_0x585c7c(0x19e)](_0x573344);}}),router[a0_0x58b9cf(0x16b)]('/view',auth,async(_0x14fe35,_0x3e1759)=>{const _0x299b54=a0_0x58b9cf;try{const {name:_0x2ad03e,email:_0x46ead1,mobile:_0x4b2e09,company:_0x49e896,address:_0x355ed9,receivable:_0x318bd3,payable:_0x471e17,code:_0x51f1f5,contactperson:_0x3aee79,landline:_0xc61f77}=_0x14fe35[_0x299b54(0x1b5)],_0x4c92bb=new suppliers({'name':_0x2ad03e,'email':_0x46ead1,'mobile':_0x4b2e09,'company':_0x49e896,'address':_0x355ed9,'receivable':_0x318bd3,'payable':_0x471e17,'suppliers_code':_0x51f1f5,'contactperson':_0x3aee79,'landline':_0xc61f77}),_0x105d67=await _0x4c92bb['save']();_0x14fe35['flash'](_0x299b54(0x191),_0x299b54(0x1a0)),_0x3e1759[_0x299b54(0x1a7)]('/supplier/view');}catch(_0x49f84f){console[_0x299b54(0x19e)](_0x49f84f);}}),router[a0_0x58b9cf(0x186)](a0_0x58b9cf(0x1b1),auth,async(_0xdd40d9,_0x44ec26)=>{const _0x2ec3b5=a0_0x58b9cf;try{const {username:_0x4ef287,email:_0x2b03c2,role:_0x5f1ed0}=_0xdd40d9[_0x2ec3b5(0x178)],_0x3aaa38=_0xdd40d9[_0x2ec3b5(0x178)],_0x484676=await profile[_0x2ec3b5(0x17e)]({'email':_0x3aaa38['email']}),_0x461341=await master_shop[_0x2ec3b5(0x1ca)]();console['log']('master',_0x461341);const _0x1dde0c=_0xdd40d9[_0x2ec3b5(0x176)]['id'],_0x114abc=await suppliers['findById'](_0x1dde0c);console[_0x2ec3b5(0x19e)](_0x114abc);if(_0x461341[0x0][_0x2ec3b5(0x1c7)]==_0x2ec3b5(0x18a)){var _0x31a818=users[_0x2ec3b5(0x177)];console[_0x2ec3b5(0x19e)](_0x31a818);}else{if(_0x461341[0x0][_0x2ec3b5(0x1c7)]=='Hindi')var _0x31a818=users[_0x2ec3b5(0x1a2)];else{if(_0x461341[0x0]['language']==_0x2ec3b5(0x194))var _0x31a818=users[_0x2ec3b5(0x194)];else{if(_0x461341[0x0][_0x2ec3b5(0x1c7)]=='Spanish')var _0x31a818=users['Spanish'];else{if(_0x461341[0x0][_0x2ec3b5(0x1c7)]==_0x2ec3b5(0x181))var _0x31a818=users[_0x2ec3b5(0x181)];else{if(_0x461341[0x0][_0x2ec3b5(0x1c7)]=='Portuguese\x20(BR)')var _0x31a818=users['Portuguese'];else{if(_0x461341[0x0][_0x2ec3b5(0x1c7)]==_0x2ec3b5(0x1be))var _0x31a818=users['Chinese'];else{if(_0x461341[0x0]['language']==_0x2ec3b5(0x185))var _0x31a818=users[_0x2ec3b5(0x1cc)];}}}}}}}_0x44ec26[_0x2ec3b5(0x16d)](_0x2ec3b5(0x18d),{'success':_0xdd40d9[_0x2ec3b5(0x1d1)]('success'),'errors':_0xdd40d9[_0x2ec3b5(0x1d1)](_0x2ec3b5(0x17c)),'role':_0x3aaa38,'profile':_0x484676,'master_shop':_0x461341,'user':_0x114abc,'language':_0x31a818});}catch(_0xe26062){console['log'](_0xe26062);}}),router[a0_0x58b9cf(0x16b)]('/view/:id',auth,async(_0x9a3f31,_0x438f0c)=>{const _0x89b802=a0_0x58b9cf;try{const _0x39bd8e=_0x9a3f31[_0x89b802(0x176)]['id'],_0x44da71=await suppliers[_0x89b802(0x190)](_0x39bd8e),{name:_0x9b4c0e,email:_0x2b1730,mobile:_0x3c2da8,company:_0x391f9d,address:_0x5df6f7,receivable:_0x2f3bf0,payable:_0x34f635,code:_0x24e9fd,contactperson:_0x181993,landline:_0x1a4c56}=_0x9a3f31[_0x89b802(0x1b5)];_0x44da71['name']=_0x9b4c0e,_0x44da71[_0x89b802(0x188)]=_0x2b1730,_0x44da71[_0x89b802(0x1a9)]=_0x3c2da8,_0x44da71[_0x89b802(0x198)]=_0x391f9d,_0x44da71['address']=_0x5df6f7,_0x44da71[_0x89b802(0x195)]=_0x2f3bf0,_0x44da71[_0x89b802(0x17f)]=_0x34f635,_0x44da71[_0x89b802(0x1d6)]=_0x24e9fd,_0x44da71[_0x89b802(0x1ce)]=_0x181993,_0x44da71[_0x89b802(0x18b)]=_0x1a4c56;const _0x5b260e=await _0x44da71[_0x89b802(0x1ba)]();_0x9a3f31[_0x89b802(0x1d1)]('success','supplier\x20data\x20update\x20successfully'),_0x438f0c[_0x89b802(0x1a7)]('/supplier/view');}catch(_0x4dce25){console[_0x89b802(0x19e)](_0x4dce25);}}),router[a0_0x58b9cf(0x186)]('/view/payment/:id',auth,async(_0xd23354,_0x1bcca1)=>{const _0x22c0ee=a0_0x58b9cf;try{const {username:_0x4827cf,email:_0x4aa666,role:_0x54dbeb}=_0xd23354[_0x22c0ee(0x178)],_0x28bf7d=_0xd23354[_0x22c0ee(0x178)],_0x5e670d=await profile[_0x22c0ee(0x17e)]({'email':_0x28bf7d[_0x22c0ee(0x188)]}),_0x23ab80=await master_shop['find']();console[_0x22c0ee(0x19e)](_0x22c0ee(0x1a4),_0x23ab80),console[_0x22c0ee(0x19e)](_0xd23354['params']['id']);const _0x55e68f=await suppliers[_0x22c0ee(0x17e)]({'_id':_0xd23354[_0x22c0ee(0x176)]['id']});console[_0x22c0ee(0x19e)](_0x55e68f);const _0x308357=await s_payment_data[_0x22c0ee(0x1ca)]({'suppliers':_0x55e68f[_0x22c0ee(0x19c)]});console['log'](_0x308357);const _0x150b29=await s_payment_data[_0x22c0ee(0x193)]([{'$match':{'suppliers':_0x55e68f[_0x22c0ee(0x19c)]}},{'$match':{'reason':_0x22c0ee(0x19b)}},{'$group':{'_id':_0x22c0ee(0x19d),'sum':{'$sum':_0x22c0ee(0x199)}}}]);console[_0x22c0ee(0x19e)](_0x22c0ee(0x1cd),_0x150b29);const _0x260820=await s_payment_data[_0x22c0ee(0x193)]([{'$match':{'suppliers':_0x55e68f[_0x22c0ee(0x19c)]}},{'$match':{'reason':_0x22c0ee(0x1c2)}},{'$group':{'_id':_0x22c0ee(0x19d),'sum':{'$sum':_0x22c0ee(0x199)}}}]);console[_0x22c0ee(0x19e)](_0x22c0ee(0x1a6),_0x260820);if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]=='English\x20(US)'){var _0x2d2dcb=users[_0x22c0ee(0x177)];console[_0x22c0ee(0x19e)](_0x2d2dcb);}else{if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]==_0x22c0ee(0x1a2))var _0x2d2dcb=users['Hindi'];else{if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]==_0x22c0ee(0x194))var _0x2d2dcb=users[_0x22c0ee(0x194)];else{if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]=='Spanish')var _0x2d2dcb=users[_0x22c0ee(0x183)];else{if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]==_0x22c0ee(0x181))var _0x2d2dcb=users[_0x22c0ee(0x181)];else{if(_0x23ab80[0x0]['language']==_0x22c0ee(0x1d0))var _0x2d2dcb=users[_0x22c0ee(0x168)];else{if(_0x23ab80[0x0][_0x22c0ee(0x1c7)]==_0x22c0ee(0x1be))var _0x2d2dcb=users[_0x22c0ee(0x1be)];else{if(_0x23ab80[0x0]['language']==_0x22c0ee(0x185))var _0x2d2dcb=users[_0x22c0ee(0x1cc)];}}}}}}}_0x1bcca1[_0x22c0ee(0x16d)]('supplier_payment',{'success':_0xd23354['flash'](_0x22c0ee(0x191)),'errors':_0xd23354['flash'](_0x22c0ee(0x17c)),'role':_0x28bf7d,'profile':_0x5e670d,'master_shop':_0x23ab80,'payment':_0x308357,'payable':_0x150b29,'receivable':_0x260820,'language':_0x2d2dcb});}catch(_0x570aae){console[_0x22c0ee(0x19e)](_0x570aae);}}),router[a0_0x58b9cf(0x186)]('/products_export_migrate_file',auth,async(_0x5e2ee3,_0x5e6d35)=>{const _0x4bb084=a0_0x58b9cf;try{const _0x4757f4=new excelJS[(_0x4bb084(0x16c))](),_0x4387fe=_0x4757f4[_0x4bb084(0x1c8)]('Customers');return _0x4387fe[_0x4bb084(0x173)]=[{'header':_0x4bb084(0x197),'key':_0x4bb084(0x18f),'width':0xa},{'header':_0x4bb084(0x1bb),'key':_0x4bb084(0x16f),'width':0xa},{'header':'Email','key':_0x4bb084(0x1a1),'width':0xa},{'header':_0x4bb084(0x1d7),'key':_0x4bb084(0x17b),'width':0xa},{'header':_0x4bb084(0x192),'key':'mobile','width':0xa},{'header':'address','key':_0x4bb084(0x188),'width':0xa}],_0x5e6d35[_0x4bb084(0x17d)]('Content-Type',_0x4bb084(0x1cf)),_0x5e6d35[_0x4bb084(0x17d)](_0x4bb084(0x1c5),'attachment;\x20filename=supplier_Migration_File.xlsx'),_0x4757f4[_0x4bb084(0x1cb)]['write'](_0x5e6d35)[_0x4bb084(0x1ae)](()=>{const _0x2ff02c=_0x4bb084;_0x5e6d35[_0x2ff02c(0x196)](0xc8);});}catch(_0x33d7b8){_0x5e6d35[_0x4bb084(0x196)](0x190)[_0x4bb084(0x1ac)]({'errors':_0x33d7b8[_0x4bb084(0x1d2)]});}});const storage1=multer[a0_0x58b9cf(0x172)]({'destination':(_0x5547b1,_0x380245,_0xe73a87)=>{const _0x3050f1=a0_0x58b9cf;_0xe73a87(null,_0x3050f1(0x189));},'filename':(_0x3abc2d,_0x419cc8,_0x1a0591)=>{const _0x56ced0=a0_0x58b9cf;_0x1a0591(null,Date[_0x56ced0(0x170)]()+_0x419cc8[_0x56ced0(0x1b0)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x58b9cf(0x16b)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x58b9cf(0x175)](a0_0x58b9cf(0x1a5)),async(_0x2cb406,_0xb48406)=>{const _0x10dce3=a0_0x58b9cf,_0x371d27=_0x2cb406[_0x10dce3(0x1c4)][_0x10dce3(0x1b2)],_0xec2099=await xlsx[_0x10dce3(0x1aa)](_0x10dce3(0x1d4)+_0x371d27);let _0x3daa13=_0xec2099[_0x10dce3(0x19f)],_0x5d7531=xlsx[_0x10dce3(0x17a)][_0x10dce3(0x1c9)](_0xec2099[_0x10dce3(0x184)][_0x3daa13[0x0]]);for(const _0x553a61 of _0x5d7531){const _0x15ddc7=_0x553a61[_0x10dce3(0x197)],_0x7de3d0=_0x553a61['Supplier_Code'],_0x455651=_0x553a61[_0x10dce3(0x17b)],_0x15eabe=_0x553a61[_0x10dce3(0x1d7)],_0x347b98=_0x553a61['Email'],_0x9b877a=_0x553a61[_0x10dce3(0x192)];try{let _0x1bab38=await suppliers[_0x10dce3(0x17e)]({'name':_0x15ddc7});if(!_0x1bab38){const _0x5a7e08=new suppliers({'name':_0x15ddc7,'suppliers_code':_0x7de3d0,'address':_0x455651,'mobile':_0x15eabe,'email':_0x347b98,'company':_0x9b877a});_0x1bab38=await _0x5a7e08[_0x10dce3(0x1ba)](),_0x2cb406[_0x10dce3(0x1d1)](_0x10dce3(0x191),_0x15ddc7+'\x20added\x20successfully');}else _0x2cb406['flash']('error',_0x15ddc7+_0x10dce3(0x187));}catch(_0x13984a){_0xb48406[_0x10dce3(0x196)](0x1f4)[_0x10dce3(0x1ab)]({'proderror':_0x13984a[_0x10dce3(0x1d2)],'aproduct':ProductName});}}_0xb48406['redirect'](_0x10dce3(0x1c6));}),module[a0_0x58b9cf(0x1a3)]=router;