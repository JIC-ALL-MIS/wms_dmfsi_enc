const a0_0x5318f6=a0_0x4a24;function a0_0x2eca(){const _0x858c87=['French','supplier\x20data\x20update\x20successfully','render','Supplier_Code','Spanish','setHeader','get','language','attachment;\x20filename=supplier_Migration_File.xlsx','amount','aggregate','address','name','Content-Type','supplier\x20data\x20add\x20successfully','body','Workbook','send','contactperson','message','PBrands','single','doc','findById','9Wyvqvj','German','columns','findOne','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','suppliers_docs','forEach','readFile','data','3434920oBiPIN','purchase_return','express','570985wFhJDQ','/view/payment/:id','Email','/supplier_import_migrate_file','/view','status','xlsx','master','Company_Name','errors','Arabic','Portuguese\x20(BR)','originalname','post','reason','Content-Disposition','Arabic\x20(ae)','../public/language/languages.json','9948303MaOGNA','public/Migration','SheetNames','multer','payable_sum','params','18RgyJPy','Mobile_number','Purchase','error','email','\x20added\x20successfully','English','mobile','Purchase\x20Return','758921hojQza','/view/:id','Chinese','payable','1898498XgPhma','addWorksheet','s_payments','Portuguese','now','exports','/supplier/view','Customers','supplier','exceljs','$reason','$amount','SalesmanName','filename','save','receivable_sum','Sheets','supplier.js\x20payment_data','flash','redirect','then','\x20Failed','supplier_product_file','purchase','263422QjfzXt','find','English\x20(US)','/products_export_migrate_file','log','../models/all_models','Hindi','success','user','3431512FxkzNx','map'];a0_0x2eca=function(){return _0x858c87;};return a0_0x2eca();}(function(_0x359be5,_0x2f7c2c){const _0x5706ea=a0_0x4a24,_0x5d86f1=_0x359be5();while(!![]){try{const _0x19a6b3=parseInt(_0x5706ea(0x23c))/0x1+parseInt(_0x5706ea(0x1ec))/0x2*(-parseInt(_0x5706ea(0x20f))/0x3)+parseInt(_0x5706ea(0x1f5))/0x4+parseInt(_0x5706ea(0x21b))/0x5*(-parseInt(_0x5706ea(0x233))/0x6)+parseInt(_0x5706ea(0x240))/0x7+parseInt(_0x5706ea(0x218))/0x8+-parseInt(_0x5706ea(0x22d))/0x9;if(_0x19a6b3===_0x2f7c2c)break;else _0x5d86f1['push'](_0x5d86f1['shift']());}catch(_0x28f203){_0x5d86f1['push'](_0x5d86f1['shift']());}}}(a0_0x2eca,0x73caf));const express=require(a0_0x5318f6(0x21a)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x5318f6(0x1f1)),auth=require('../middleware/auth'),users=require(a0_0x5318f6(0x22c)),excelJS=require(a0_0x5318f6(0x1dd)),xlsx=require(a0_0x5318f6(0x221)),multer=require(a0_0x5318f6(0x230));function a0_0x4a24(_0x3009b3,_0xe64f3e){const _0x2eca43=a0_0x2eca();return a0_0x4a24=function(_0x4a2417,_0x1d9873){_0x4a2417=_0x4a2417-0x1d8;let _0x5651a9=_0x2eca43[_0x4a2417];return _0x5651a9;},a0_0x4a24(_0x3009b3,_0xe64f3e);}router['get'](a0_0x5318f6(0x21f),auth,async(_0x4584f6,_0x266af2)=>{const _0xdcbec6=a0_0x5318f6;try{const {username:_0x511a0d,email:_0x541276,role:_0x43fd04}=_0x4584f6[_0xdcbec6(0x1f4)],_0x5b4fa4=_0x4584f6[_0xdcbec6(0x1f4)],_0x12d34e=await profile[_0xdcbec6(0x212)]({'email':_0x5b4fa4[_0xdcbec6(0x237)]}),_0x3463dc=await master_shop[_0xdcbec6(0x1ed)]();console[_0xdcbec6(0x1f0)](_0xdcbec6(0x222),_0x3463dc);const _0x854383=await suppliers[_0xdcbec6(0x1ed)]();console[_0xdcbec6(0x1f0)](_0x854383);const _0x2cce99=await suppliers[_0xdcbec6(0x201)]([{'$lookup':{'from':_0xdcbec6(0x242),'localField':_0xdcbec6(0x203),'foreignField':'suppliers','as':_0xdcbec6(0x214)}}]),_0x369275=_0x2cce99[_0xdcbec6(0x1f6)](_0x4a7f81=>{const _0x2794d2=_0xdcbec6;console[_0x2794d2(0x1f0)](_0x2794d2(0x217),_0x4a7f81);var _0x161992=0x0,_0x21ca84=0x0;return _0x4a7f81[_0x2794d2(0x214)][_0x2794d2(0x215)](_0x1f6c08=>{const _0x26f22e=_0x2794d2;console[_0x26f22e(0x1f0)](_0x26f22e(0x20d),_0x1f6c08),_0x1f6c08[_0x26f22e(0x229)]=='Purchase'?_0x161992+=_0x1f6c08[_0x26f22e(0x200)]:_0x21ca84+=_0x1f6c08[_0x26f22e(0x200)];}),_0x4a7f81[_0x2794d2(0x1eb)]=_0x161992,_0x4a7f81[_0x2794d2(0x219)]=_0x21ca84,_0x4a7f81;});console[_0xdcbec6(0x1f0)](_0xdcbec6(0x1e5),_0x369275);if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]==_0xdcbec6(0x1ee)){var _0x372c9b=users[_0xdcbec6(0x239)];console[_0xdcbec6(0x1f0)](_0x372c9b);}else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]=='Hindi')var _0x372c9b=users['Hindi'];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]=='German')var _0x372c9b=users[_0xdcbec6(0x210)];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]==_0xdcbec6(0x1fb))var _0x372c9b=users[_0xdcbec6(0x1fb)];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]=='French')var _0x372c9b=users['French'];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]==_0xdcbec6(0x226))var _0x372c9b=users[_0xdcbec6(0x243)];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]==_0xdcbec6(0x23e))var _0x372c9b=users[_0xdcbec6(0x23e)];else{if(_0x3463dc[0x0][_0xdcbec6(0x1fe)]==_0xdcbec6(0x22b))var _0x372c9b=users['Arabic'];}}}}}}}_0x266af2[_0xdcbec6(0x1f9)](_0xdcbec6(0x1dc),{'success':_0x4584f6['flash'](_0xdcbec6(0x1f3)),'errors':_0x4584f6['flash'](_0xdcbec6(0x224)),'user':_0x854383,'profile':_0x12d34e,'master_shop':_0x3463dc,'role':_0x5b4fa4,'payment':_0x369275,'language':_0x372c9b});}catch(_0x34fa00){console[_0xdcbec6(0x1f0)](_0x34fa00);}}),router[a0_0x5318f6(0x228)](a0_0x5318f6(0x21f),auth,async(_0x3fed95,_0x7f318d)=>{const _0x4e11ea=a0_0x5318f6;try{const {name:_0x52e9d2,email:_0x40cba7,mobile:_0x11668a,company:_0x89fb21,address:_0x4a49fe,receivable:_0x2a05e6,payable:_0x2dbd13,code:_0x3525dd,contactperson:_0x5ebd29,landline:_0x149231}=_0x3fed95[_0x4e11ea(0x206)],_0x3a7390=new suppliers({'name':_0x52e9d2,'email':_0x40cba7,'mobile':_0x11668a,'company':_0x89fb21,'address':_0x4a49fe,'receivable':_0x2a05e6,'payable':_0x2dbd13,'suppliers_code':_0x3525dd,'contactperson':_0x5ebd29,'landline':_0x149231}),_0x4cc144=await _0x3a7390[_0x4e11ea(0x1e2)]();_0x3fed95['flash'](_0x4e11ea(0x1f3),_0x4e11ea(0x205)),_0x7f318d[_0x4e11ea(0x1e7)](_0x4e11ea(0x1da));}catch(_0x2a9b3c){console[_0x4e11ea(0x1f0)](_0x2a9b3c);}}),router[a0_0x5318f6(0x1fd)](a0_0x5318f6(0x23d),auth,async(_0x3a75d7,_0x21f14a)=>{const _0x571ddd=a0_0x5318f6;try{const {username:_0x284cba,email:_0x51cc2e,role:_0x19cc4a}=_0x3a75d7[_0x571ddd(0x1f4)],_0x290788=_0x3a75d7[_0x571ddd(0x1f4)],_0x5d9cf9=await profile[_0x571ddd(0x212)]({'email':_0x290788[_0x571ddd(0x237)]}),_0x3847c9=await master_shop['find']();console[_0x571ddd(0x1f0)]('master',_0x3847c9);const _0x56aab7=_0x3a75d7[_0x571ddd(0x232)]['id'],_0x40871d=await suppliers['findById'](_0x56aab7);console[_0x571ddd(0x1f0)](_0x40871d);if(_0x3847c9[0x0]['language']=='English\x20(US)'){var _0x5856a6=users[_0x571ddd(0x239)];console['log'](_0x5856a6);}else{if(_0x3847c9[0x0][_0x571ddd(0x1fe)]==_0x571ddd(0x1f2))var _0x5856a6=users[_0x571ddd(0x1f2)];else{if(_0x3847c9[0x0][_0x571ddd(0x1fe)]==_0x571ddd(0x210))var _0x5856a6=users[_0x571ddd(0x210)];else{if(_0x3847c9[0x0]['language']=='Spanish')var _0x5856a6=users['Spanish'];else{if(_0x3847c9[0x0][_0x571ddd(0x1fe)]==_0x571ddd(0x1f7))var _0x5856a6=users[_0x571ddd(0x1f7)];else{if(_0x3847c9[0x0][_0x571ddd(0x1fe)]=='Portuguese\x20(BR)')var _0x5856a6=users[_0x571ddd(0x243)];else{if(_0x3847c9[0x0][_0x571ddd(0x1fe)]==_0x571ddd(0x23e))var _0x5856a6=users[_0x571ddd(0x23e)];else{if(_0x3847c9[0x0]['language']==_0x571ddd(0x22b))var _0x5856a6=users[_0x571ddd(0x225)];}}}}}}}_0x21f14a[_0x571ddd(0x1f9)](_0x571ddd(0x1dc),{'success':_0x3a75d7['flash'](_0x571ddd(0x1f3)),'errors':_0x3a75d7[_0x571ddd(0x1e6)](_0x571ddd(0x224)),'role':_0x290788,'profile':_0x5d9cf9,'master_shop':_0x3847c9,'user':_0x40871d,'language':_0x5856a6});}catch(_0x3dfd66){console[_0x571ddd(0x1f0)](_0x3dfd66);}}),router[a0_0x5318f6(0x228)](a0_0x5318f6(0x23d),auth,async(_0x47b117,_0x3cc38a)=>{const _0x29ec48=a0_0x5318f6;try{const _0x2962f0=_0x47b117[_0x29ec48(0x232)]['id'],_0xc17938=await suppliers[_0x29ec48(0x20e)](_0x2962f0),{name:_0x127b73,email:_0xbd564b,mobile:_0x539306,company:_0x1232ef,address:_0x871295,receivable:_0x1d99ce,payable:_0x5065c9,code:_0x4b7bfa,contactperson:_0x429bb7,landline:_0x4e2f42}=_0x47b117[_0x29ec48(0x206)];_0xc17938[_0x29ec48(0x203)]=_0x127b73,_0xc17938[_0x29ec48(0x237)]=_0xbd564b,_0xc17938[_0x29ec48(0x23a)]=_0x539306,_0xc17938['company']=_0x1232ef,_0xc17938[_0x29ec48(0x202)]=_0x871295,_0xc17938['receivable']=_0x1d99ce,_0xc17938[_0x29ec48(0x23f)]=_0x5065c9,_0xc17938['suppliers_code']=_0x4b7bfa,_0xc17938[_0x29ec48(0x209)]=_0x429bb7,_0xc17938['landline']=_0x4e2f42;const _0x2e124e=await _0xc17938['save']();_0x47b117[_0x29ec48(0x1e6)](_0x29ec48(0x1f3),_0x29ec48(0x1f8)),_0x3cc38a['redirect'](_0x29ec48(0x1da));}catch(_0x29f932){console['log'](_0x29f932);}}),router['get'](a0_0x5318f6(0x21c),auth,async(_0xea81d7,_0x1f213d)=>{const _0x123d65=a0_0x5318f6;try{const {username:_0x66f60,email:_0x14ce14,role:_0x384a44}=_0xea81d7[_0x123d65(0x1f4)],_0x1d1ecc=_0xea81d7['user'],_0x2b0e4c=await profile[_0x123d65(0x212)]({'email':_0x1d1ecc['email']}),_0xd796ca=await master_shop['find']();console[_0x123d65(0x1f0)](_0x123d65(0x222),_0xd796ca),console[_0x123d65(0x1f0)](_0xea81d7['params']['id']);const _0x443314=await suppliers[_0x123d65(0x212)]({'_id':_0xea81d7[_0x123d65(0x232)]['id']});console[_0x123d65(0x1f0)](_0x443314);const _0x34695a=await s_payment_data[_0x123d65(0x1ed)]({'suppliers':_0x443314['name']});console[_0x123d65(0x1f0)](_0x34695a);const _0x4da89b=await s_payment_data[_0x123d65(0x201)]([{'$match':{'suppliers':_0x443314['name']}},{'$match':{'reason':_0x123d65(0x235)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x123d65(0x1df)}}}]);console[_0x123d65(0x1f0)](_0x123d65(0x231),_0x4da89b);const _0x10a246=await s_payment_data[_0x123d65(0x201)]([{'$match':{'suppliers':_0x443314[_0x123d65(0x203)]}},{'$match':{'reason':_0x123d65(0x23b)}},{'$group':{'_id':_0x123d65(0x1de),'sum':{'$sum':_0x123d65(0x1df)}}}]);console[_0x123d65(0x1f0)](_0x123d65(0x1e3),_0x10a246);if(_0xd796ca[0x0]['language']=='English\x20(US)'){var _0x54ae7e=users[_0x123d65(0x239)];console['log'](_0x54ae7e);}else{if(_0xd796ca[0x0]['language']==_0x123d65(0x1f2))var _0x54ae7e=users[_0x123d65(0x1f2)];else{if(_0xd796ca[0x0][_0x123d65(0x1fe)]==_0x123d65(0x210))var _0x54ae7e=users[_0x123d65(0x210)];else{if(_0xd796ca[0x0][_0x123d65(0x1fe)]==_0x123d65(0x1fb))var _0x54ae7e=users[_0x123d65(0x1fb)];else{if(_0xd796ca[0x0][_0x123d65(0x1fe)]=='French')var _0x54ae7e=users[_0x123d65(0x1f7)];else{if(_0xd796ca[0x0]['language']==_0x123d65(0x226))var _0x54ae7e=users[_0x123d65(0x243)];else{if(_0xd796ca[0x0][_0x123d65(0x1fe)]==_0x123d65(0x23e))var _0x54ae7e=users[_0x123d65(0x23e)];else{if(_0xd796ca[0x0][_0x123d65(0x1fe)]==_0x123d65(0x22b))var _0x54ae7e=users[_0x123d65(0x225)];}}}}}}}_0x1f213d[_0x123d65(0x1f9)]('supplier_payment',{'success':_0xea81d7[_0x123d65(0x1e6)](_0x123d65(0x1f3)),'errors':_0xea81d7['flash'](_0x123d65(0x224)),'role':_0x1d1ecc,'profile':_0x2b0e4c,'master_shop':_0xd796ca,'payment':_0x34695a,'payable':_0x4da89b,'receivable':_0x10a246,'language':_0x54ae7e});}catch(_0x135527){console[_0x123d65(0x1f0)](_0x135527);}}),router[a0_0x5318f6(0x1fd)](a0_0x5318f6(0x1ef),auth,async(_0x5dfd7c,_0x1e2fab)=>{const _0x542dfe=a0_0x5318f6;try{const _0x5522d6=new excelJS[(_0x542dfe(0x207))](),_0xe0b8cd=_0x5522d6[_0x542dfe(0x241)](_0x542dfe(0x1db));return _0xe0b8cd[_0x542dfe(0x211)]=[{'header':'Name','key':_0x542dfe(0x20b),'width':0xa},{'header':_0x542dfe(0x1fa),'key':'PUnits','width':0xa},{'header':_0x542dfe(0x21d),'key':_0x542dfe(0x1e0),'width':0xa},{'header':'Mobile_number','key':_0x542dfe(0x202),'width':0xa},{'header':_0x542dfe(0x223),'key':_0x542dfe(0x23a),'width':0xa},{'header':_0x542dfe(0x202),'key':'email','width':0xa}],_0x1e2fab[_0x542dfe(0x1fc)](_0x542dfe(0x204),_0x542dfe(0x213)),_0x1e2fab[_0x542dfe(0x1fc)](_0x542dfe(0x22a),_0x542dfe(0x1ff)),_0x5522d6[_0x542dfe(0x221)]['write'](_0x1e2fab)[_0x542dfe(0x1e8)](()=>{const _0x2d7a54=_0x542dfe;_0x1e2fab[_0x2d7a54(0x220)](0xc8);});}catch(_0x3977f2){_0x1e2fab[_0x542dfe(0x220)](0x190)[_0x542dfe(0x208)]({'errors':_0x3977f2['message']});}});const storage1=multer['diskStorage']({'destination':(_0x2f5a80,_0x559c57,_0x5c197)=>{const _0x13df36=a0_0x5318f6;_0x5c197(null,_0x13df36(0x22e));},'filename':(_0x12f43d,_0x5546b7,_0x1522e7)=>{const _0x2766e1=a0_0x5318f6;_0x1522e7(null,Date[_0x2766e1(0x1d8)]()+_0x5546b7[_0x2766e1(0x227)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5318f6(0x228)](a0_0x5318f6(0x21e),auth,uploadMigrate[a0_0x5318f6(0x20c)](a0_0x5318f6(0x1ea)),async(_0x4052d5,_0x448458)=>{const _0x4dac82=a0_0x5318f6,_0x1d0507=_0x4052d5['file'][_0x4dac82(0x1e1)],_0xf85e84=await xlsx[_0x4dac82(0x216)]('public/Migration/'+_0x1d0507);let _0x197404=_0xf85e84[_0x4dac82(0x22f)],_0x1e3f5a=xlsx['utils']['sheet_to_json'](_0xf85e84[_0x4dac82(0x1e4)][_0x197404[0x0]]);for(const _0x3b59a1 of _0x1e3f5a){const _0x28100b=_0x3b59a1['Name'],_0x34f51d=_0x3b59a1[_0x4dac82(0x1fa)],_0x5c7d84=_0x3b59a1[_0x4dac82(0x202)],_0x1d1e1e=_0x3b59a1[_0x4dac82(0x234)],_0xee3dab=_0x3b59a1[_0x4dac82(0x21d)],_0x3a43be=_0x3b59a1[_0x4dac82(0x223)];try{let _0x27633e=await suppliers[_0x4dac82(0x212)]({'name':_0x28100b});if(!_0x27633e){const _0x38d340=new suppliers({'name':_0x28100b,'suppliers_code':_0x34f51d,'address':_0x5c7d84,'mobile':_0x1d1e1e,'email':_0xee3dab,'company':_0x3a43be});_0x27633e=await _0x38d340['save'](),_0x4052d5[_0x4dac82(0x1e6)](_0x4dac82(0x1f3),_0x28100b+_0x4dac82(0x238));}else _0x4052d5[_0x4dac82(0x1e6)](_0x4dac82(0x236),_0x28100b+_0x4dac82(0x1e9));}catch(_0x46d609){_0x448458[_0x4dac82(0x220)](0x1f4)['json']({'proderror':_0x46d609[_0x4dac82(0x20a)],'aproduct':ProductName});}}_0x448458[_0x4dac82(0x1e7)]('/supplier/view');}),module[a0_0x5318f6(0x1d9)]=router;