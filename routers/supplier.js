const a0_0x540bea=a0_0x17de;function a0_0x17de(_0x19b827,_0xef8303){const _0x6d4e68=a0_0x6d4e();return a0_0x17de=function(_0x17de4d,_0x18b413){_0x17de4d=_0x17de4d-0x19d;let _0x3ce9e2=_0x6d4e68[_0x17de4d];return _0x3ce9e2;},a0_0x17de(_0x19b827,_0xef8303);}(function(_0x5d5307,_0x2dc870){const _0x298656=a0_0x17de,_0x22d67=_0x5d5307();while(!![]){try{const _0x58dcea=parseInt(_0x298656(0x1df))/0x1*(-parseInt(_0x298656(0x1bf))/0x2)+parseInt(_0x298656(0x1d3))/0x3+parseInt(_0x298656(0x1bb))/0x4*(parseInt(_0x298656(0x1f6))/0x5)+parseInt(_0x298656(0x1eb))/0x6+-parseInt(_0x298656(0x1ac))/0x7+parseInt(_0x298656(0x1a2))/0x8+parseInt(_0x298656(0x1b7))/0x9*(-parseInt(_0x298656(0x1d9))/0xa);if(_0x58dcea===_0x2dc870)break;else _0x22d67['push'](_0x22d67['shift']());}catch(_0x2f6797){_0x22d67['push'](_0x22d67['shift']());}}}(a0_0x6d4e,0xb9ac2));const express=require(a0_0x540bea(0x1c3)),app=express(),router=express[a0_0x540bea(0x1fb)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x540bea(0x1f0)),auth=require(a0_0x540bea(0x1ea)),users=require(a0_0x540bea(0x19d)),excelJS=require(a0_0x540bea(0x1f2)),xlsx=require(a0_0x540bea(0x1cf)),multer=require(a0_0x540bea(0x1b1));router['get']('/view',auth,async(_0xa2714e,_0x2a6fb9)=>{const _0x54f7f6=a0_0x540bea;try{const {username:_0x3a544f,email:_0x200921,role:_0x1f405f}=_0xa2714e['user'],_0x757c19=_0xa2714e[_0x54f7f6(0x1b2)],_0x4157b9=await profile[_0x54f7f6(0x1e6)]({'email':_0x757c19[_0x54f7f6(0x19f)]}),_0x530944=await master_shop['find']();console['log']('master',_0x530944);const _0x194beb=await suppliers['find']();console[_0x54f7f6(0x1ff)](_0x194beb);const _0x15c3db=await suppliers[_0x54f7f6(0x1b9)]([{'$lookup':{'from':'s_payments','localField':_0x54f7f6(0x1c9),'foreignField':_0x54f7f6(0x1c6),'as':_0x54f7f6(0x1fd)}}]),_0x28d991=_0x15c3db[_0x54f7f6(0x1e5)](_0x8696a7=>{const _0x15f317=_0x54f7f6;console[_0x15f317(0x1ff)](_0x15f317(0x1c2),_0x8696a7);var _0x157153=0x0,_0x345064=0x0;return _0x8696a7[_0x15f317(0x1fd)][_0x15f317(0x1a6)](_0x3355b8=>{const _0x31ff76=_0x15f317;console['log']('doc',_0x3355b8),_0x3355b8[_0x31ff76(0x1ef)]=='Purchase'?_0x157153+=_0x3355b8[_0x31ff76(0x1d0)]:_0x345064+=_0x3355b8[_0x31ff76(0x1d0)];}),_0x8696a7[_0x15f317(0x1a4)]=_0x157153,_0x8696a7['purchase_return']=_0x345064,_0x8696a7;});console[_0x54f7f6(0x1ff)]('supplier.js\x20payment_data',_0x28d991);if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x203)){var _0x13004e=users[_0x54f7f6(0x1a8)];console[_0x54f7f6(0x1ff)](_0x13004e);}else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x1d4))var _0x13004e=users[_0x54f7f6(0x1d4)];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x1d1))var _0x13004e=users['German'];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]=='Spanish')var _0x13004e=users[_0x54f7f6(0x1ec)];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x1e3))var _0x13004e=users[_0x54f7f6(0x1e3)];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]=='Portuguese\x20(BR)')var _0x13004e=users[_0x54f7f6(0x1db)];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x1a3))var _0x13004e=users[_0x54f7f6(0x1a3)];else{if(_0x530944[0x0][_0x54f7f6(0x1f3)]==_0x54f7f6(0x1a7))var _0x13004e=users[_0x54f7f6(0x1a5)];}}}}}}}_0x2a6fb9[_0x54f7f6(0x207)](_0x54f7f6(0x1f9),{'success':_0xa2714e[_0x54f7f6(0x1b6)](_0x54f7f6(0x1c8)),'errors':_0xa2714e[_0x54f7f6(0x1b6)](_0x54f7f6(0x1da)),'user':_0x194beb,'profile':_0x4157b9,'master_shop':_0x530944,'role':_0x757c19,'payment':_0x28d991,'language':_0x13004e});}catch(_0x350b83){console[_0x54f7f6(0x1ff)](_0x350b83);}}),router[a0_0x540bea(0x1e0)](a0_0x540bea(0x1c7),auth,async(_0x1e9c3e,_0x179cd1)=>{const _0xada95b=a0_0x540bea;try{const {name:_0x210ac0,email:_0x4cb839,mobile:_0x5d227c,company:_0x179a1f,address:_0x9fa4aa,receivable:_0xd28779,payable:_0x1fcfa9,code:_0xd54b8b,contactperson:_0x242eeb,landline:_0x479972}=_0x1e9c3e['body'],_0x168dd2=new suppliers({'name':_0x210ac0,'email':_0x4cb839,'mobile':_0x5d227c,'company':_0x179a1f,'address':_0x9fa4aa,'receivable':_0xd28779,'payable':_0x1fcfa9,'suppliers_code':_0xd54b8b,'contactperson':_0x242eeb,'landline':_0x479972}),_0x37dee1=await _0x168dd2[_0xada95b(0x1e8)]();_0x1e9c3e[_0xada95b(0x1b6)]('success',_0xada95b(0x1e9)),_0x179cd1['redirect']('/supplier/view');}catch(_0x1b93fc){console[_0xada95b(0x1ff)](_0x1b93fc);}}),router[a0_0x540bea(0x1af)](a0_0x540bea(0x1e7),auth,async(_0x542b2e,_0x30760b)=>{const _0x311591=a0_0x540bea;try{const {username:_0x173163,email:_0x22f3fd,role:_0x917552}=_0x542b2e[_0x311591(0x1b2)],_0x4bbbed=_0x542b2e[_0x311591(0x1b2)],_0x1f7b95=await profile[_0x311591(0x1e6)]({'email':_0x4bbbed[_0x311591(0x19f)]}),_0x3e41b9=await master_shop[_0x311591(0x1ca)]();console['log'](_0x311591(0x1b5),_0x3e41b9);const _0x256da8=_0x542b2e[_0x311591(0x1d8)]['id'],_0x5ecfb3=await suppliers[_0x311591(0x1d7)](_0x256da8);console[_0x311591(0x1ff)](_0x5ecfb3);if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x203)){var _0x101598=users[_0x311591(0x1a8)];console['log'](_0x101598);}else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]=='Hindi')var _0x101598=users[_0x311591(0x1d4)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]=='German')var _0x101598=users[_0x311591(0x1d1)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x1ec))var _0x101598=users[_0x311591(0x1ec)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x1e3))var _0x101598=users[_0x311591(0x1e3)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x1ad))var _0x101598=users[_0x311591(0x1db)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x1a3))var _0x101598=users[_0x311591(0x1a3)];else{if(_0x3e41b9[0x0][_0x311591(0x1f3)]==_0x311591(0x1a7))var _0x101598=users[_0x311591(0x1a5)];}}}}}}}_0x30760b['render'](_0x311591(0x1f9),{'success':_0x542b2e[_0x311591(0x1b6)](_0x311591(0x1c8)),'errors':_0x542b2e['flash'](_0x311591(0x1da)),'role':_0x4bbbed,'profile':_0x1f7b95,'master_shop':_0x3e41b9,'user':_0x5ecfb3,'language':_0x101598});}catch(_0x2d6ece){console[_0x311591(0x1ff)](_0x2d6ece);}}),router[a0_0x540bea(0x1e0)](a0_0x540bea(0x1e7),auth,async(_0x5253ea,_0x3565f7)=>{const _0x1a75e1=a0_0x540bea;try{const _0x31c230=_0x5253ea[_0x1a75e1(0x1d8)]['id'],_0x20a3a2=await suppliers[_0x1a75e1(0x1d7)](_0x31c230),{name:_0x2f4b4c,email:_0x351e97,mobile:_0x5eea8a,company:_0x5362ab,address:_0x260bce,receivable:_0x7ebe40,payable:_0x49862c,code:_0x56b24c,contactperson:_0x377eeb,landline:_0x1967e8}=_0x5253ea[_0x1a75e1(0x1ae)];_0x20a3a2[_0x1a75e1(0x1c9)]=_0x2f4b4c,_0x20a3a2[_0x1a75e1(0x19f)]=_0x351e97,_0x20a3a2['mobile']=_0x5eea8a,_0x20a3a2[_0x1a75e1(0x1bd)]=_0x5362ab,_0x20a3a2['address']=_0x260bce,_0x20a3a2['receivable']=_0x7ebe40,_0x20a3a2[_0x1a75e1(0x1c1)]=_0x49862c,_0x20a3a2[_0x1a75e1(0x205)]=_0x56b24c,_0x20a3a2[_0x1a75e1(0x1e4)]=_0x377eeb,_0x20a3a2[_0x1a75e1(0x1cc)]=_0x1967e8;const _0x9e3c9c=await _0x20a3a2[_0x1a75e1(0x1e8)]();_0x5253ea[_0x1a75e1(0x1b6)]('success',_0x1a75e1(0x1dc)),_0x3565f7[_0x1a75e1(0x1a0)](_0x1a75e1(0x1c5));}catch(_0xf54aa5){console[_0x1a75e1(0x1ff)](_0xf54aa5);}}),router[a0_0x540bea(0x1af)](a0_0x540bea(0x201),auth,async(_0x4797b9,_0x22e70c)=>{const _0x18c550=a0_0x540bea;try{const {username:_0x351e6f,email:_0x2266eb,role:_0x32f93c}=_0x4797b9[_0x18c550(0x1b2)],_0x3a9370=_0x4797b9[_0x18c550(0x1b2)],_0x4b176e=await profile[_0x18c550(0x1e6)]({'email':_0x3a9370[_0x18c550(0x19f)]}),_0x27fca7=await master_shop[_0x18c550(0x1ca)]();console['log'](_0x18c550(0x1b5),_0x27fca7),console[_0x18c550(0x1ff)](_0x4797b9[_0x18c550(0x1d8)]['id']);const _0x4fd685=await suppliers[_0x18c550(0x1e6)]({'_id':_0x4797b9[_0x18c550(0x1d8)]['id']});console[_0x18c550(0x1ff)](_0x4fd685);const _0x3f3dc6=await s_payment_data[_0x18c550(0x1ca)]({'suppliers':_0x4fd685[_0x18c550(0x1c9)]});console[_0x18c550(0x1ff)](_0x3f3dc6);const _0x222a5b=await s_payment_data[_0x18c550(0x1b9)]([{'$match':{'suppliers':_0x4fd685[_0x18c550(0x1c9)]}},{'$match':{'reason':_0x18c550(0x1b8)}},{'$group':{'_id':_0x18c550(0x19e),'sum':{'$sum':_0x18c550(0x20b)}}}]);console[_0x18c550(0x1ff)]('payable_sum',_0x222a5b);const _0x2c376b=await s_payment_data[_0x18c550(0x1b9)]([{'$match':{'suppliers':_0x4fd685[_0x18c550(0x1c9)]}},{'$match':{'reason':_0x18c550(0x1ed)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x18c550(0x20b)}}}]);console[_0x18c550(0x1ff)](_0x18c550(0x204),_0x2c376b);if(_0x27fca7[0x0][_0x18c550(0x1f3)]==_0x18c550(0x203)){var _0x4ab27a=users[_0x18c550(0x1a8)];console[_0x18c550(0x1ff)](_0x4ab27a);}else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]=='Hindi')var _0x4ab27a=users['Hindi'];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]==_0x18c550(0x1d1))var _0x4ab27a=users[_0x18c550(0x1d1)];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]==_0x18c550(0x1ec))var _0x4ab27a=users['Spanish'];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]=='French')var _0x4ab27a=users[_0x18c550(0x1e3)];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]==_0x18c550(0x1ad))var _0x4ab27a=users[_0x18c550(0x1db)];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]=='Chinese')var _0x4ab27a=users[_0x18c550(0x1a3)];else{if(_0x27fca7[0x0][_0x18c550(0x1f3)]==_0x18c550(0x1a7))var _0x4ab27a=users[_0x18c550(0x1a5)];}}}}}}}_0x22e70c[_0x18c550(0x207)](_0x18c550(0x1d5),{'success':_0x4797b9['flash'](_0x18c550(0x1c8)),'errors':_0x4797b9[_0x18c550(0x1b6)]('errors'),'role':_0x3a9370,'profile':_0x4b176e,'master_shop':_0x27fca7,'payment':_0x3f3dc6,'payable':_0x222a5b,'receivable':_0x2c376b,'language':_0x4ab27a});}catch(_0xd21b64){console['log'](_0xd21b64);}}),router[a0_0x540bea(0x1af)]('/products_export_migrate_file',auth,async(_0x167a09,_0x48f2b6)=>{const _0xbf6d92=a0_0x540bea;try{const _0x55aebf=new excelJS['Workbook'](),_0x3eea7e=_0x55aebf[_0xbf6d92(0x1c0)]('Customers');return _0x3eea7e['columns']=[{'header':_0xbf6d92(0x1aa),'key':_0xbf6d92(0x1f7),'width':0xa},{'header':_0xbf6d92(0x1f5),'key':_0xbf6d92(0x1a1),'width':0xa},{'header':_0xbf6d92(0x1e2),'key':_0xbf6d92(0x1d6),'width':0xa},{'header':'Mobile_number','key':'address','width':0xa},{'header':_0xbf6d92(0x1cb),'key':_0xbf6d92(0x1fc),'width':0xa},{'header':_0xbf6d92(0x202),'key':'email','width':0xa}],_0x48f2b6[_0xbf6d92(0x1ab)](_0xbf6d92(0x1d2),_0xbf6d92(0x1ee)),_0x48f2b6['setHeader'](_0xbf6d92(0x20c),_0xbf6d92(0x1b4)),_0x55aebf['xlsx'][_0xbf6d92(0x1ba)](_0x48f2b6)[_0xbf6d92(0x206)](()=>{const _0x329f98=_0xbf6d92;_0x48f2b6[_0x329f98(0x1c4)](0xc8);});}catch(_0x2b8fc8){_0x48f2b6['status'](0x190)[_0xbf6d92(0x1bc)]({'errors':_0x2b8fc8[_0xbf6d92(0x1ce)]});}});const storage1=multer[a0_0x540bea(0x209)]({'destination':(_0x30b91d,_0x4eb8c3,_0xbeb643)=>{_0xbeb643(null,'public/Migration');},'filename':(_0x406503,_0x41a8ae,_0x2ef4c6)=>{const _0x48e8c3=a0_0x540bea;_0x2ef4c6(null,Date[_0x48e8c3(0x1f4)]()+_0x41a8ae[_0x48e8c3(0x20a)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x540bea(0x1e0)](a0_0x540bea(0x1e1),auth,uploadMigrate[a0_0x540bea(0x1b0)](a0_0x540bea(0x1f8)),async(_0x2dd570,_0xd0fcb2)=>{const _0x1dd116=a0_0x540bea,_0x174aa5=_0x2dd570[_0x1dd116(0x208)][_0x1dd116(0x1dd)],_0xf7927d=await xlsx[_0x1dd116(0x200)]('public/Migration/'+_0x174aa5);let _0x3088b3=_0xf7927d['SheetNames'],_0xa368ae=xlsx[_0x1dd116(0x1fa)][_0x1dd116(0x1a9)](_0xf7927d[_0x1dd116(0x1b3)][_0x3088b3[0x0]]);for(const _0x3f2b77 of _0xa368ae){const _0x1f6ab9=_0x3f2b77['Name'],_0x2996b8=_0x3f2b77[_0x1dd116(0x1f5)],_0x51a13e=_0x3f2b77[_0x1dd116(0x202)],_0x26581a=_0x3f2b77[_0x1dd116(0x1f1)],_0x3ce105=_0x3f2b77[_0x1dd116(0x1e2)],_0x20a14e=_0x3f2b77['Company_Name'];try{let _0x2dbcbd=await suppliers['findOne']({'name':_0x1f6ab9});if(!_0x2dbcbd){const _0x46a254=new suppliers({'name':_0x1f6ab9,'suppliers_code':_0x2996b8,'address':_0x51a13e,'mobile':_0x26581a,'email':_0x3ce105,'company':_0x20a14e});_0x2dbcbd=await _0x46a254[_0x1dd116(0x1e8)](),_0x2dd570[_0x1dd116(0x1b6)]('success',_0x1f6ab9+_0x1dd116(0x1de));}else _0x2dd570[_0x1dd116(0x1b6)]('error',_0x1f6ab9+_0x1dd116(0x1be));}catch(_0x36c4e0){_0xd0fcb2[_0x1dd116(0x1c4)](0x1f4)[_0x1dd116(0x1cd)]({'proderror':_0x36c4e0[_0x1dd116(0x1ce)],'aproduct':ProductName});}}_0xd0fcb2['redirect'](_0x1dd116(0x1c5));}),module[a0_0x540bea(0x1fe)]=router;function a0_0x6d4e(){const _0x5340db=['Arabic','forEach','Arabic\x20(ae)','English','sheet_to_json','Name','setHeader','2675568KKhqqf','Portuguese\x20(BR)','body','get','single','multer','user','Sheets','attachment;\x20filename=supplier_Migration_File.xlsx','master','flash','7738083YxOjvw','Purchase','aggregate','write','29452bvOKpm','send','company','\x20Failed','314zyLsWH','addWorksheet','payable','data','express','status','/supplier/view','suppliers','/view','success','name','find','Company_Name','landline','json','message','xlsx','amount','German','Content-Type','3713697yETIaZ','Hindi','supplier_payment','SalesmanName','findById','params','10McDnyx','errors','Portuguese','supplier\x20data\x20update\x20successfully','filename','\x20added\x20successfully','6121QMbmPX','post','/supplier_import_migrate_file','Email','French','contactperson','map','findOne','/view/:id','save','supplier\x20data\x20add\x20successfully','../middleware/auth','7006494xyIacP','Spanish','Purchase\x20Return','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','reason','../models/all_models','Mobile_number','exceljs','language','now','Supplier_Code','225kSrngx','PBrands','supplier_product_file','supplier','utils','Router','mobile','suppliers_docs','exports','log','readFile','/view/payment/:id','address','English\x20(US)','receivable_sum','suppliers_code','then','render','file','diskStorage','originalname','$amount','Content-Disposition','../public/language/languages.json','$reason','email','redirect','PUnits','1812312IXXjOB','Chinese','purchase'];a0_0x6d4e=function(){return _0x5340db;};return a0_0x6d4e();}