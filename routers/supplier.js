const a0_0x2c53d9=a0_0x8833;(function(_0x4e4d92,_0x2177f6){const _0x226d26=a0_0x8833,_0x532cc3=_0x4e4d92();while(!![]){try{const _0x437c5=parseInt(_0x226d26(0x238))/0x1+-parseInt(_0x226d26(0x1e9))/0x2*(parseInt(_0x226d26(0x235))/0x3)+-parseInt(_0x226d26(0x22b))/0x4+-parseInt(_0x226d26(0x236))/0x5+-parseInt(_0x226d26(0x223))/0x6*(parseInt(_0x226d26(0x1e3))/0x7)+parseInt(_0x226d26(0x202))/0x8+-parseInt(_0x226d26(0x22c))/0x9*(-parseInt(_0x226d26(0x1fb))/0xa);if(_0x437c5===_0x2177f6)break;else _0x532cc3['push'](_0x532cc3['shift']());}catch(_0x3e977c){_0x532cc3['push'](_0x532cc3['shift']());}}}(a0_0x1b63,0x7e930));const express=require(a0_0x2c53d9(0x1f3)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x2c53d9(0x23c)),auth=require(a0_0x2c53d9(0x23f)),users=require(a0_0x2c53d9(0x203)),excelJS=require(a0_0x2c53d9(0x1fd)),xlsx=require(a0_0x2c53d9(0x22d)),multer=require(a0_0x2c53d9(0x20e));router[a0_0x2c53d9(0x23b)](a0_0x2c53d9(0x224),auth,async(_0x1feeb9,_0x3ce794)=>{const _0x18d5fc=a0_0x2c53d9;try{const {username:_0x43218e,email:_0x36f9c8,role:_0x57ec41}=_0x1feeb9[_0x18d5fc(0x1f5)],_0x5e791d=_0x1feeb9[_0x18d5fc(0x1f5)],_0xd8750b=await profile['findOne']({'email':_0x5e791d[_0x18d5fc(0x22f)]}),_0x4f6c7c=await master_shop[_0x18d5fc(0x1f4)]();console[_0x18d5fc(0x1f7)](_0x18d5fc(0x209),_0x4f6c7c);const _0xad4eb9=await suppliers[_0x18d5fc(0x1f4)]();console[_0x18d5fc(0x1f7)](_0xad4eb9);const _0x267573=await suppliers[_0x18d5fc(0x1e4)]([{'$lookup':{'from':'s_payments','localField':_0x18d5fc(0x233),'foreignField':'suppliers','as':_0x18d5fc(0x234)}}]),_0x16013a=_0x267573[_0x18d5fc(0x21e)](_0x4dc049=>{const _0x5b5ee7=_0x18d5fc;console[_0x5b5ee7(0x1f7)]('data',_0x4dc049);var _0x22af12=0x0,_0x4406d9=0x0;return _0x4dc049['suppliers_docs'][_0x5b5ee7(0x245)](_0x2aafb2=>{const _0x2f5199=_0x5b5ee7;console[_0x2f5199(0x1f7)](_0x2f5199(0x248),_0x2aafb2),_0x2aafb2['reason']==_0x2f5199(0x1e7)?_0x22af12+=_0x2aafb2[_0x2f5199(0x204)]:_0x4406d9+=_0x2aafb2[_0x2f5199(0x204)];}),_0x4dc049[_0x5b5ee7(0x213)]=_0x22af12,_0x4dc049['purchase_return']=_0x4406d9,_0x4dc049;});console[_0x18d5fc(0x1f7)](_0x18d5fc(0x246),_0x16013a);if(_0x4f6c7c[0x0][_0x18d5fc(0x21d)]==_0x18d5fc(0x241)){var _0x4a28d1=users['English'];console['log'](_0x4a28d1);}else{if(_0x4f6c7c[0x0]['language']==_0x18d5fc(0x1ec))var _0x4a28d1=users[_0x18d5fc(0x1ec)];else{if(_0x4f6c7c[0x0][_0x18d5fc(0x21d)]==_0x18d5fc(0x231))var _0x4a28d1=users[_0x18d5fc(0x231)];else{if(_0x4f6c7c[0x0][_0x18d5fc(0x21d)]==_0x18d5fc(0x247))var _0x4a28d1=users[_0x18d5fc(0x247)];else{if(_0x4f6c7c[0x0]['language']=='French')var _0x4a28d1=users['French'];else{if(_0x4f6c7c[0x0][_0x18d5fc(0x21d)]==_0x18d5fc(0x1f8))var _0x4a28d1=users['Portuguese'];else{if(_0x4f6c7c[0x0][_0x18d5fc(0x21d)]==_0x18d5fc(0x244))var _0x4a28d1=users[_0x18d5fc(0x244)];else{if(_0x4f6c7c[0x0]['language']=='Arabic\x20(ae)')var _0x4a28d1=users[_0x18d5fc(0x218)];}}}}}}}_0x3ce794[_0x18d5fc(0x23e)](_0x18d5fc(0x201),{'success':_0x1feeb9[_0x18d5fc(0x1f9)](_0x18d5fc(0x221)),'errors':_0x1feeb9[_0x18d5fc(0x1f9)](_0x18d5fc(0x230)),'user':_0xad4eb9,'profile':_0xd8750b,'master_shop':_0x4f6c7c,'role':_0x5e791d,'payment':_0x16013a,'language':_0x4a28d1});}catch(_0x4b9906){console[_0x18d5fc(0x1f7)](_0x4b9906);}}),router[a0_0x2c53d9(0x21f)]('/view',auth,async(_0x33aafc,_0x110cb5)=>{const _0x5b2680=a0_0x2c53d9;try{const {name:_0x2ce49,email:_0x3b59c9,mobile:_0x1bc62b,company:_0x478552,address:_0x3c0e91,receivable:_0x51c398,payable:_0x5558cb,code:_0x380dbf,contactperson:_0x57b349,landline:_0x1054da}=_0x33aafc['body'],_0x5458b8=new suppliers({'name':_0x2ce49,'email':_0x3b59c9,'mobile':_0x1bc62b,'company':_0x478552,'address':_0x3c0e91,'receivable':_0x51c398,'payable':_0x5558cb,'suppliers_code':_0x380dbf,'contactperson':_0x57b349,'landline':_0x1054da}),_0xa339aa=await _0x5458b8['save']();_0x33aafc[_0x5b2680(0x1f9)](_0x5b2680(0x221),_0x5b2680(0x1fe)),_0x110cb5['redirect']('/supplier/view');}catch(_0x4768a5){console[_0x5b2680(0x1f7)](_0x4768a5);}}),router[a0_0x2c53d9(0x23b)](a0_0x2c53d9(0x239),auth,async(_0x5741a3,_0x1df887)=>{const _0x3af61a=a0_0x2c53d9;try{const {username:_0x25b576,email:_0x4e7d79,role:_0x2a87ba}=_0x5741a3[_0x3af61a(0x1f5)],_0x60922a=_0x5741a3[_0x3af61a(0x1f5)],_0x285623=await profile['findOne']({'email':_0x60922a['email']}),_0x549125=await master_shop[_0x3af61a(0x1f4)]();console[_0x3af61a(0x1f7)](_0x3af61a(0x209),_0x549125);const _0x522e1f=_0x5741a3[_0x3af61a(0x237)]['id'],_0x479aea=await suppliers['findById'](_0x522e1f);console[_0x3af61a(0x1f7)](_0x479aea);if(_0x549125[0x0]['language']==_0x3af61a(0x241)){var _0x483330=users[_0x3af61a(0x249)];console[_0x3af61a(0x1f7)](_0x483330);}else{if(_0x549125[0x0]['language']==_0x3af61a(0x1ec))var _0x483330=users[_0x3af61a(0x1ec)];else{if(_0x549125[0x0][_0x3af61a(0x21d)]=='German')var _0x483330=users['German'];else{if(_0x549125[0x0]['language']==_0x3af61a(0x247))var _0x483330=users[_0x3af61a(0x247)];else{if(_0x549125[0x0][_0x3af61a(0x21d)]=='French')var _0x483330=users[_0x3af61a(0x214)];else{if(_0x549125[0x0][_0x3af61a(0x21d)]==_0x3af61a(0x1f8))var _0x483330=users[_0x3af61a(0x1ef)];else{if(_0x549125[0x0][_0x3af61a(0x21d)]==_0x3af61a(0x244))var _0x483330=users['Chinese'];else{if(_0x549125[0x0][_0x3af61a(0x21d)]==_0x3af61a(0x1f0))var _0x483330=users['Arabic'];}}}}}}}_0x1df887[_0x3af61a(0x23e)](_0x3af61a(0x201),{'success':_0x5741a3[_0x3af61a(0x1f9)](_0x3af61a(0x221)),'errors':_0x5741a3['flash'](_0x3af61a(0x230)),'role':_0x60922a,'profile':_0x285623,'master_shop':_0x549125,'user':_0x479aea,'language':_0x483330});}catch(_0x56b00e){console[_0x3af61a(0x1f7)](_0x56b00e);}}),router['post'](a0_0x2c53d9(0x239),auth,async(_0xe91043,_0x1656e6)=>{const _0x4d036f=a0_0x2c53d9;try{const _0x5b1a68=_0xe91043[_0x4d036f(0x237)]['id'],_0x40cc7e=await suppliers[_0x4d036f(0x216)](_0x5b1a68),{name:_0x3e109b,email:_0x58560e,mobile:_0x54ea85,company:_0x39d9df,address:_0x2d29de,receivable:_0x110fde,payable:_0x403f53,code:_0x479ec7,contactperson:_0x2456d8,landline:_0x2ed354}=_0xe91043[_0x4d036f(0x1eb)];_0x40cc7e[_0x4d036f(0x233)]=_0x3e109b,_0x40cc7e[_0x4d036f(0x22f)]=_0x58560e,_0x40cc7e[_0x4d036f(0x243)]=_0x54ea85,_0x40cc7e['company']=_0x39d9df,_0x40cc7e[_0x4d036f(0x21b)]=_0x2d29de,_0x40cc7e[_0x4d036f(0x20d)]=_0x110fde,_0x40cc7e[_0x4d036f(0x1f2)]=_0x403f53,_0x40cc7e[_0x4d036f(0x215)]=_0x479ec7,_0x40cc7e[_0x4d036f(0x219)]=_0x2456d8,_0x40cc7e['landline']=_0x2ed354;const _0x15c752=await _0x40cc7e[_0x4d036f(0x1ee)]();_0xe91043[_0x4d036f(0x1f9)](_0x4d036f(0x221),_0x4d036f(0x225)),_0x1656e6[_0x4d036f(0x20b)](_0x4d036f(0x242));}catch(_0x40da1b){console[_0x4d036f(0x1f7)](_0x40da1b);}}),router[a0_0x2c53d9(0x23b)](a0_0x2c53d9(0x1e8),auth,async(_0x59ff8c,_0x495a65)=>{const _0x45e231=a0_0x2c53d9;try{const {username:_0x1de941,email:_0x3f09bd,role:_0x4faccb}=_0x59ff8c['user'],_0x4e74ee=_0x59ff8c[_0x45e231(0x1f5)],_0x45eb37=await profile[_0x45e231(0x24a)]({'email':_0x4e74ee['email']}),_0x2b0697=await master_shop['find']();console[_0x45e231(0x1f7)](_0x45e231(0x209),_0x2b0697),console[_0x45e231(0x1f7)](_0x59ff8c[_0x45e231(0x237)]['id']);const _0x2eb61a=await suppliers[_0x45e231(0x24a)]({'_id':_0x59ff8c[_0x45e231(0x237)]['id']});console[_0x45e231(0x1f7)](_0x2eb61a);const _0x42f82b=await s_payment_data[_0x45e231(0x1f4)]({'suppliers':_0x2eb61a[_0x45e231(0x233)]});console[_0x45e231(0x1f7)](_0x42f82b);const _0x18dc06=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x2eb61a['name']}},{'$match':{'reason':_0x45e231(0x1e7)}},{'$group':{'_id':_0x45e231(0x20f),'sum':{'$sum':_0x45e231(0x20c)}}}]);console[_0x45e231(0x1f7)](_0x45e231(0x1ff),_0x18dc06);const _0x2edd14=await s_payment_data[_0x45e231(0x1e4)]([{'$match':{'suppliers':_0x2eb61a[_0x45e231(0x233)]}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x45e231(0x20f),'sum':{'$sum':_0x45e231(0x20c)}}}]);console[_0x45e231(0x1f7)]('receivable_sum',_0x2edd14);if(_0x2b0697[0x0][_0x45e231(0x21d)]=='English\x20(US)'){var _0x1fa664=users[_0x45e231(0x249)];console['log'](_0x1fa664);}else{if(_0x2b0697[0x0][_0x45e231(0x21d)]=='Hindi')var _0x1fa664=users[_0x45e231(0x1ec)];else{if(_0x2b0697[0x0][_0x45e231(0x21d)]==_0x45e231(0x231))var _0x1fa664=users[_0x45e231(0x231)];else{if(_0x2b0697[0x0]['language']==_0x45e231(0x247))var _0x1fa664=users[_0x45e231(0x247)];else{if(_0x2b0697[0x0][_0x45e231(0x21d)]==_0x45e231(0x214))var _0x1fa664=users['French'];else{if(_0x2b0697[0x0]['language']==_0x45e231(0x1f8))var _0x1fa664=users[_0x45e231(0x1ef)];else{if(_0x2b0697[0x0][_0x45e231(0x21d)]=='Chinese')var _0x1fa664=users[_0x45e231(0x244)];else{if(_0x2b0697[0x0][_0x45e231(0x21d)]==_0x45e231(0x1f0))var _0x1fa664=users['Arabic'];}}}}}}}_0x495a65[_0x45e231(0x23e)](_0x45e231(0x206),{'success':_0x59ff8c[_0x45e231(0x1f9)]('success'),'errors':_0x59ff8c['flash'](_0x45e231(0x230)),'role':_0x4e74ee,'profile':_0x45eb37,'master_shop':_0x2b0697,'payment':_0x42f82b,'payable':_0x18dc06,'receivable':_0x2edd14,'language':_0x1fa664});}catch(_0x3ccf25){console['log'](_0x3ccf25);}}),router[a0_0x2c53d9(0x23b)](a0_0x2c53d9(0x205),auth,async(_0x3b6e5b,_0xcfc003)=>{const _0x47bb53=a0_0x2c53d9;try{const _0x3df142=new excelJS[(_0x47bb53(0x1fc))](),_0x58746f=_0x3df142[_0x47bb53(0x217)](_0x47bb53(0x1e1));return _0x58746f[_0x47bb53(0x24b)]=[{'header':_0x47bb53(0x1f1),'key':_0x47bb53(0x232),'width':0xa},{'header':_0x47bb53(0x1ea),'key':_0x47bb53(0x1fa),'width':0xa},{'header':_0x47bb53(0x20a),'key':_0x47bb53(0x210),'width':0xa},{'header':_0x47bb53(0x24c),'key':_0x47bb53(0x21b),'width':0xa},{'header':_0x47bb53(0x222),'key':_0x47bb53(0x243),'width':0xa},{'header':_0x47bb53(0x21b),'key':_0x47bb53(0x22f),'width':0xa}],_0xcfc003[_0x47bb53(0x220)](_0x47bb53(0x240),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0xcfc003['setHeader'](_0x47bb53(0x1e6),_0x47bb53(0x1f6)),_0x3df142[_0x47bb53(0x22d)][_0x47bb53(0x229)](_0xcfc003)[_0x47bb53(0x211)](()=>{_0xcfc003['status'](0xc8);});}catch(_0x4d5592){_0xcfc003[_0x47bb53(0x21a)](0x190)['send']({'errors':_0x4d5592[_0x47bb53(0x207)]});}});const storage1=multer[a0_0x2c53d9(0x1e5)]({'destination':(_0x36dc45,_0x1eb10f,_0x2995af)=>{const _0x2b3c4e=a0_0x2c53d9;_0x2995af(null,_0x2b3c4e(0x21c));},'filename':(_0x4c3af5,_0x33cf14,_0x18adda)=>{_0x18adda(null,Date['now']()+_0x33cf14['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x8833(_0x5b9ad8,_0x55510f){const _0x1b63bc=a0_0x1b63();return a0_0x8833=function(_0x88330e,_0x31fbaa){_0x88330e=_0x88330e-0x1df;let _0x490af4=_0x1b63bc[_0x88330e];return _0x490af4;},a0_0x8833(_0x5b9ad8,_0x55510f);}router[a0_0x2c53d9(0x21f)](a0_0x2c53d9(0x22e),auth,uploadMigrate[a0_0x2c53d9(0x22a)](a0_0x2c53d9(0x226)),async(_0x2d56d5,_0x52f06d)=>{const _0x27928e=a0_0x2c53d9,_0x878dc3=_0x2d56d5[_0x27928e(0x200)]['filename'],_0x448105=await xlsx[_0x27928e(0x1e2)](_0x27928e(0x1ed)+_0x878dc3);let _0x357ef4=_0x448105[_0x27928e(0x227)],_0x2c6d3f=xlsx[_0x27928e(0x1e0)][_0x27928e(0x228)](_0x448105['Sheets'][_0x357ef4[0x0]]);for(const _0x435f8d of _0x2c6d3f){const _0x579d66=_0x435f8d[_0x27928e(0x1f1)],_0x1ce855=_0x435f8d[_0x27928e(0x1ea)],_0x636796=_0x435f8d[_0x27928e(0x21b)],_0x1b9ef0=_0x435f8d['Mobile_number'],_0x1fe82a=_0x435f8d[_0x27928e(0x20a)],_0x3ccede=_0x435f8d[_0x27928e(0x222)];try{let _0x1bb5f9=await suppliers['findOne']({'name':_0x579d66});if(!_0x1bb5f9){const _0x507a8b=new suppliers({'name':_0x579d66,'suppliers_code':_0x1ce855,'address':_0x636796,'mobile':_0x1b9ef0,'email':_0x1fe82a,'company':_0x3ccede});_0x1bb5f9=await _0x507a8b[_0x27928e(0x1ee)](),_0x2d56d5['flash']('success',_0x579d66+_0x27928e(0x212));}else _0x2d56d5[_0x27928e(0x1f9)](_0x27928e(0x23a),_0x579d66+_0x27928e(0x1df));}catch(_0x3aa6ea){_0x52f06d['status'](0x1f4)[_0x27928e(0x23d)]({'proderror':_0x3aa6ea[_0x27928e(0x207)],'aproduct':ProductName});}}_0x52f06d['redirect'](_0x27928e(0x242));}),module[a0_0x2c53d9(0x208)]=router;function a0_0x1b63(){const _0x28447e=['columns','Mobile_number','\x20Failed','utils','Customers','readFile','14287GlYXSU','aggregate','diskStorage','Content-Disposition','Purchase','/view/payment/:id','2716iyvsSq','Supplier_Code','body','Hindi','public/Migration/','save','Portuguese','Arabic\x20(ae)','Name','payable','express','find','user','attachment;\x20filename=supplier_Migration_File.xlsx','log','Portuguese\x20(BR)','flash','PUnits','10fojdvx','Workbook','exceljs','supplier\x20data\x20add\x20successfully','payable_sum','file','supplier','1636928orBjUs','../public/language/languages.json','amount','/products_export_migrate_file','supplier_payment','message','exports','master','Email','redirect','$amount','receivable','multer','$reason','SalesmanName','then','\x20added\x20successfully','purchase','French','suppliers_code','findById','addWorksheet','Arabic','contactperson','status','address','public/Migration','language','map','post','setHeader','success','Company_Name','1662OcMgCE','/view','supplier\x20data\x20update\x20successfully','supplier_product_file','SheetNames','sheet_to_json','write','single','2131800HeCqRe','18299583OkQGRd','xlsx','/supplier_import_migrate_file','email','errors','German','PBrands','name','suppliers_docs','159HzydyI','4597925jBBplF','params','370411SuHtFF','/view/:id','error','get','../models/all_models','json','render','../middleware/auth','Content-Type','English\x20(US)','/supplier/view','mobile','Chinese','forEach','supplier.js\x20payment_data','Spanish','doc','English','findOne'];a0_0x1b63=function(){return _0x28447e;};return a0_0x1b63();}