function a0_0x3454(){const _0x10f016=['Customers','reason','findOne','German','1741617SEJTvb','name','post','company','success','Router','\x20Failed','exports','landline','log','Company_Name','$reason','purchase','error','render','PUnits','sheet_to_json','2314123YrhTuu','payable','diskStorage','json','PBrands','Portuguese\x20(BR)','Portuguese','flash','email','user','write','/supplier/view','../middleware/auth','status','address','2181978LeFaFe','supplier\x20data\x20add\x20successfully','/products_export_migrate_file','594234bSjVUm','Arabic\x20(ae)','/view/payment/:id','French','/supplier_import_migrate_file','send','purchase_return','addWorksheet','express','doc','originalname','xlsx','readFile','mobile','aggregate','/view/:id','424500cHemRl','62832yYneVk','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','25OYCZlR','amount','574824KVZQjQ','suppliers_docs','\x20added\x20successfully','forEach','Arabic','get','receivable_sum','/view','save','Name','../models/all_models','single','contactperson','payable_sum','$amount','English','s_payments','map','../public/language/languages.json','receivable','Hindi','multer','supplier_product_file','Email','suppliers','supplier','file','setHeader','English\x20(US)','Spanish','supplier\x20data\x20update\x20successfully','Chinese','params','attachment;\x20filename=supplier_Migration_File.xlsx','Sheets','columns','Mobile_number','Content-Type','utils','message','find','errors','language','findById','body','16tyFuGn','Purchase','redirect','master','Purchase\x20Return','public/Migration'];a0_0x3454=function(){return _0x10f016;};return a0_0x3454();}const a0_0x23c380=a0_0x5144;(function(_0x34bcb3,_0x102756){const _0x4edc99=a0_0x5144,_0x3fa38e=_0x34bcb3();while(!![]){try{const _0x37136f=-parseInt(_0x4edc99(0xe8))/0x1+parseInt(_0x4edc99(0xe9))/0x2+-parseInt(_0x4edc99(0xd5))/0x3+parseInt(_0x4edc99(0xed))/0x4+-parseInt(_0x4edc99(0xeb))/0x5*(-parseInt(_0x4edc99(0xd8))/0x6)+-parseInt(_0x4edc99(0xc6))/0x7*(-parseInt(_0x4edc99(0x11a))/0x8)+parseInt(_0x4edc99(0xb5))/0x9;if(_0x37136f===_0x102756)break;else _0x3fa38e['push'](_0x3fa38e['shift']());}catch(_0x252c84){_0x3fa38e['push'](_0x3fa38e['shift']());}}}(a0_0x3454,0x5b1be));const express=require(a0_0x23c380(0xe0)),app=express(),router=express[a0_0x23c380(0xba)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x23c380(0xf7)),auth=require(a0_0x23c380(0xd2)),users=require(a0_0x23c380(0xff)),excelJS=require('exceljs'),xlsx=require(a0_0x23c380(0xe3)),multer=require(a0_0x23c380(0x102));function a0_0x5144(_0x5a6fad,_0x4b4090){const _0x345457=a0_0x3454();return a0_0x5144=function(_0x514453,_0x5abca0){_0x514453=_0x514453-0xb2;let _0x15e3e9=_0x345457[_0x514453];return _0x15e3e9;},a0_0x5144(_0x5a6fad,_0x4b4090);}router[a0_0x23c380(0xf2)](a0_0x23c380(0xf4),auth,async(_0x1d69db,_0x57b376)=>{const _0x5e672e=a0_0x23c380;try{const {username:_0x24762f,email:_0x90ad68,role:_0x12dfc1}=_0x1d69db[_0x5e672e(0xcf)],_0x3e8fe1=_0x1d69db['user'],_0x41c362=await profile[_0x5e672e(0xb3)]({'email':_0x3e8fe1[_0x5e672e(0xce)]}),_0xf00f69=await master_shop[_0x5e672e(0x115)]();console['log'](_0x5e672e(0x11d),_0xf00f69);const _0x2ea10a=await suppliers[_0x5e672e(0x115)]();console['log'](_0x2ea10a);const _0x5bc2fa=await suppliers['aggregate']([{'$lookup':{'from':_0x5e672e(0xfd),'localField':_0x5e672e(0xb6),'foreignField':_0x5e672e(0x105),'as':_0x5e672e(0xee)}}]),_0x2ff569=_0x5bc2fa[_0x5e672e(0xfe)](_0x169e13=>{const _0x432583=_0x5e672e;console['log']('data',_0x169e13);var _0x29f2af=0x0,_0x331390=0x0;return _0x169e13[_0x432583(0xee)][_0x432583(0xf0)](_0x279a55=>{const _0x55eb40=_0x432583;console[_0x55eb40(0xbe)](_0x55eb40(0xe1),_0x279a55),_0x279a55[_0x55eb40(0xb2)]==_0x55eb40(0x11b)?_0x29f2af+=_0x279a55['amount']:_0x331390+=_0x279a55[_0x55eb40(0xec)];}),_0x169e13[_0x432583(0xc1)]=_0x29f2af,_0x169e13[_0x432583(0xde)]=_0x331390,_0x169e13;});console[_0x5e672e(0xbe)]('supplier.js\x20payment_data',_0x2ff569);if(_0xf00f69[0x0]['language']==_0x5e672e(0x109)){var _0x4d6ff3=users['English'];console[_0x5e672e(0xbe)](_0x4d6ff3);}else{if(_0xf00f69[0x0]['language']=='Hindi')var _0x4d6ff3=users[_0x5e672e(0x101)];else{if(_0xf00f69[0x0][_0x5e672e(0x117)]==_0x5e672e(0xb4))var _0x4d6ff3=users[_0x5e672e(0xb4)];else{if(_0xf00f69[0x0][_0x5e672e(0x117)]==_0x5e672e(0x10a))var _0x4d6ff3=users[_0x5e672e(0x10a)];else{if(_0xf00f69[0x0][_0x5e672e(0x117)]=='French')var _0x4d6ff3=users[_0x5e672e(0xdb)];else{if(_0xf00f69[0x0][_0x5e672e(0x117)]==_0x5e672e(0xcb))var _0x4d6ff3=users[_0x5e672e(0xcc)];else{if(_0xf00f69[0x0]['language']==_0x5e672e(0x10c))var _0x4d6ff3=users['Chinese'];else{if(_0xf00f69[0x0][_0x5e672e(0x117)]==_0x5e672e(0xd9))var _0x4d6ff3=users[_0x5e672e(0xf1)];}}}}}}}_0x57b376[_0x5e672e(0xc3)](_0x5e672e(0x106),{'success':_0x1d69db[_0x5e672e(0xcd)](_0x5e672e(0xb9)),'errors':_0x1d69db['flash']('errors'),'user':_0x2ea10a,'profile':_0x41c362,'master_shop':_0xf00f69,'role':_0x3e8fe1,'payment':_0x2ff569,'language':_0x4d6ff3});}catch(_0x55beb5){console['log'](_0x55beb5);}}),router['post']('/view',auth,async(_0x5406b7,_0x134705)=>{const _0x4c142d=a0_0x23c380;try{const {name:_0x2c10a7,email:_0x234c98,mobile:_0x45e4a7,company:_0x1280f5,address:_0x31d5c1,receivable:_0x151b70,payable:_0x4d6a5e,code:_0x4e315f,contactperson:_0x54a17c,landline:_0x558457}=_0x5406b7['body'],_0x2056dc=new suppliers({'name':_0x2c10a7,'email':_0x234c98,'mobile':_0x45e4a7,'company':_0x1280f5,'address':_0x31d5c1,'receivable':_0x151b70,'payable':_0x4d6a5e,'suppliers_code':_0x4e315f,'contactperson':_0x54a17c,'landline':_0x558457}),_0x45ee5c=await _0x2056dc['save']();_0x5406b7[_0x4c142d(0xcd)]('success',_0x4c142d(0xd6)),_0x134705[_0x4c142d(0x11c)](_0x4c142d(0xd1));}catch(_0x4bc91d){console[_0x4c142d(0xbe)](_0x4bc91d);}}),router['get'](a0_0x23c380(0xe7),auth,async(_0x4f272a,_0x221c5a)=>{const _0x35b311=a0_0x23c380;try{const {username:_0x3211d5,email:_0x46f3cc,role:_0x297e85}=_0x4f272a[_0x35b311(0xcf)],_0x38ed7f=_0x4f272a[_0x35b311(0xcf)],_0xa64fbf=await profile[_0x35b311(0xb3)]({'email':_0x38ed7f[_0x35b311(0xce)]}),_0x493cc8=await master_shop[_0x35b311(0x115)]();console[_0x35b311(0xbe)](_0x35b311(0x11d),_0x493cc8);const _0x4aff1e=_0x4f272a[_0x35b311(0x10d)]['id'],_0x51cc53=await suppliers[_0x35b311(0x118)](_0x4aff1e);console['log'](_0x51cc53);if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0x109)){var _0x22d9d5=users[_0x35b311(0xfc)];console[_0x35b311(0xbe)](_0x22d9d5);}else{if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0x101))var _0x22d9d5=users['Hindi'];else{if(_0x493cc8[0x0]['language']==_0x35b311(0xb4))var _0x22d9d5=users[_0x35b311(0xb4)];else{if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0x10a))var _0x22d9d5=users[_0x35b311(0x10a)];else{if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0xdb))var _0x22d9d5=users[_0x35b311(0xdb)];else{if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0xcb))var _0x22d9d5=users[_0x35b311(0xcc)];else{if(_0x493cc8[0x0][_0x35b311(0x117)]==_0x35b311(0x10c))var _0x22d9d5=users[_0x35b311(0x10c)];else{if(_0x493cc8[0x0]['language']=='Arabic\x20(ae)')var _0x22d9d5=users[_0x35b311(0xf1)];}}}}}}}_0x221c5a[_0x35b311(0xc3)]('supplier',{'success':_0x4f272a[_0x35b311(0xcd)]('success'),'errors':_0x4f272a['flash'](_0x35b311(0x116)),'role':_0x38ed7f,'profile':_0xa64fbf,'master_shop':_0x493cc8,'user':_0x51cc53,'language':_0x22d9d5});}catch(_0x2479ab){console[_0x35b311(0xbe)](_0x2479ab);}}),router[a0_0x23c380(0xb7)](a0_0x23c380(0xe7),auth,async(_0x1c975c,_0x2a297d)=>{const _0x574fd2=a0_0x23c380;try{const _0x4d110c=_0x1c975c['params']['id'],_0x2fa0f0=await suppliers[_0x574fd2(0x118)](_0x4d110c),{name:_0x39e2c8,email:_0x433e5a,mobile:_0x36d30e,company:_0x67f793,address:_0x63363e,receivable:_0x9315d3,payable:_0x90d113,code:_0x37fe77,contactperson:_0x28ba4d,landline:_0xee32da}=_0x1c975c[_0x574fd2(0x119)];_0x2fa0f0['name']=_0x39e2c8,_0x2fa0f0[_0x574fd2(0xce)]=_0x433e5a,_0x2fa0f0[_0x574fd2(0xe5)]=_0x36d30e,_0x2fa0f0[_0x574fd2(0xb8)]=_0x67f793,_0x2fa0f0[_0x574fd2(0xd4)]=_0x63363e,_0x2fa0f0[_0x574fd2(0x100)]=_0x9315d3,_0x2fa0f0[_0x574fd2(0xc7)]=_0x90d113,_0x2fa0f0['suppliers_code']=_0x37fe77,_0x2fa0f0[_0x574fd2(0xf9)]=_0x28ba4d,_0x2fa0f0[_0x574fd2(0xbd)]=_0xee32da;const _0x516cef=await _0x2fa0f0[_0x574fd2(0xf5)]();_0x1c975c[_0x574fd2(0xcd)](_0x574fd2(0xb9),_0x574fd2(0x10b)),_0x2a297d[_0x574fd2(0x11c)](_0x574fd2(0xd1));}catch(_0x1f6563){console['log'](_0x1f6563);}}),router[a0_0x23c380(0xf2)](a0_0x23c380(0xda),auth,async(_0x3966e0,_0x5388f1)=>{const _0x215888=a0_0x23c380;try{const {username:_0x243035,email:_0xec15c8,role:_0x56d05e}=_0x3966e0[_0x215888(0xcf)],_0x2074bb=_0x3966e0['user'],_0x2255cc=await profile['findOne']({'email':_0x2074bb[_0x215888(0xce)]}),_0x388d2a=await master_shop['find']();console['log'](_0x215888(0x11d),_0x388d2a),console[_0x215888(0xbe)](_0x3966e0[_0x215888(0x10d)]['id']);const _0x38997e=await suppliers[_0x215888(0xb3)]({'_id':_0x3966e0[_0x215888(0x10d)]['id']});console[_0x215888(0xbe)](_0x38997e);const _0x1d3674=await s_payment_data[_0x215888(0x115)]({'suppliers':_0x38997e[_0x215888(0xb6)]});console[_0x215888(0xbe)](_0x1d3674);const _0x235411=await s_payment_data[_0x215888(0xe6)]([{'$match':{'suppliers':_0x38997e[_0x215888(0xb6)]}},{'$match':{'reason':_0x215888(0x11b)}},{'$group':{'_id':_0x215888(0xc0),'sum':{'$sum':_0x215888(0xfb)}}}]);console[_0x215888(0xbe)](_0x215888(0xfa),_0x235411);const _0x40b073=await s_payment_data[_0x215888(0xe6)]([{'$match':{'suppliers':_0x38997e[_0x215888(0xb6)]}},{'$match':{'reason':_0x215888(0x11e)}},{'$group':{'_id':_0x215888(0xc0),'sum':{'$sum':_0x215888(0xfb)}}}]);console[_0x215888(0xbe)](_0x215888(0xf3),_0x40b073);if(_0x388d2a[0x0][_0x215888(0x117)]=='English\x20(US)'){var _0x4ddb3f=users[_0x215888(0xfc)];console['log'](_0x4ddb3f);}else{if(_0x388d2a[0x0][_0x215888(0x117)]==_0x215888(0x101))var _0x4ddb3f=users[_0x215888(0x101)];else{if(_0x388d2a[0x0]['language']==_0x215888(0xb4))var _0x4ddb3f=users[_0x215888(0xb4)];else{if(_0x388d2a[0x0]['language']==_0x215888(0x10a))var _0x4ddb3f=users[_0x215888(0x10a)];else{if(_0x388d2a[0x0][_0x215888(0x117)]==_0x215888(0xdb))var _0x4ddb3f=users[_0x215888(0xdb)];else{if(_0x388d2a[0x0][_0x215888(0x117)]==_0x215888(0xcb))var _0x4ddb3f=users[_0x215888(0xcc)];else{if(_0x388d2a[0x0][_0x215888(0x117)]==_0x215888(0x10c))var _0x4ddb3f=users['Chinese'];else{if(_0x388d2a[0x0][_0x215888(0x117)]=='Arabic\x20(ae)')var _0x4ddb3f=users['Arabic'];}}}}}}}_0x5388f1[_0x215888(0xc3)]('supplier_payment',{'success':_0x3966e0[_0x215888(0xcd)](_0x215888(0xb9)),'errors':_0x3966e0[_0x215888(0xcd)](_0x215888(0x116)),'role':_0x2074bb,'profile':_0x2255cc,'master_shop':_0x388d2a,'payment':_0x1d3674,'payable':_0x235411,'receivable':_0x40b073,'language':_0x4ddb3f});}catch(_0x346fcf){console[_0x215888(0xbe)](_0x346fcf);}}),router[a0_0x23c380(0xf2)](a0_0x23c380(0xd7),auth,async(_0x623cfc,_0x3e5299)=>{const _0x325c1d=a0_0x23c380;try{const _0x588e84=new excelJS['Workbook'](),_0x5d141f=_0x588e84[_0x325c1d(0xdf)](_0x325c1d(0x120));return _0x5d141f[_0x325c1d(0x110)]=[{'header':_0x325c1d(0xf6),'key':_0x325c1d(0xca),'width':0xa},{'header':'Supplier_Code','key':_0x325c1d(0xc4),'width':0xa},{'header':_0x325c1d(0x104),'key':'SalesmanName','width':0xa},{'header':_0x325c1d(0x111),'key':_0x325c1d(0xd4),'width':0xa},{'header':_0x325c1d(0xbf),'key':_0x325c1d(0xe5),'width':0xa},{'header':'address','key':_0x325c1d(0xce),'width':0xa}],_0x3e5299[_0x325c1d(0x108)](_0x325c1d(0x112),_0x325c1d(0xea)),_0x3e5299[_0x325c1d(0x108)]('Content-Disposition',_0x325c1d(0x10e)),_0x588e84[_0x325c1d(0xe3)][_0x325c1d(0xd0)](_0x3e5299)['then'](()=>{const _0x3da239=_0x325c1d;_0x3e5299[_0x3da239(0xd3)](0xc8);});}catch(_0x6c947c){_0x3e5299[_0x325c1d(0xd3)](0x190)[_0x325c1d(0xdd)]({'errors':_0x6c947c['message']});}});const storage1=multer[a0_0x23c380(0xc8)]({'destination':(_0x13bd4e,_0x27552b,_0x81d1f0)=>{const _0x333970=a0_0x23c380;_0x81d1f0(null,_0x333970(0x11f));},'filename':(_0x4a7e17,_0x20b7c0,_0x273ba9)=>{const _0x26741d=a0_0x23c380;_0x273ba9(null,Date['now']()+_0x20b7c0[_0x26741d(0xe2)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x23c380(0xb7)](a0_0x23c380(0xdc),auth,uploadMigrate[a0_0x23c380(0xf8)](a0_0x23c380(0x103)),async(_0x44e16e,_0x2b72b9)=>{const _0x507561=a0_0x23c380,_0x1b52de=_0x44e16e[_0x507561(0x107)]['filename'],_0x266686=await xlsx[_0x507561(0xe4)]('public/Migration/'+_0x1b52de);let _0x142cba=_0x266686['SheetNames'],_0x3027f0=xlsx[_0x507561(0x113)][_0x507561(0xc5)](_0x266686[_0x507561(0x10f)][_0x142cba[0x0]]);for(const _0x22ef76 of _0x3027f0){const _0x3b9fb5=_0x22ef76[_0x507561(0xf6)],_0x331e56=_0x22ef76['Supplier_Code'],_0x44e824=_0x22ef76[_0x507561(0xd4)],_0x16a77a=_0x22ef76[_0x507561(0x111)],_0x103480=_0x22ef76[_0x507561(0x104)],_0x18d7bb=_0x22ef76[_0x507561(0xbf)];try{let _0x4d09f2=await suppliers[_0x507561(0xb3)]({'name':_0x3b9fb5});if(!_0x4d09f2){const _0x198e2c=new suppliers({'name':_0x3b9fb5,'suppliers_code':_0x331e56,'address':_0x44e824,'mobile':_0x16a77a,'email':_0x103480,'company':_0x18d7bb});_0x4d09f2=await _0x198e2c[_0x507561(0xf5)](),_0x44e16e[_0x507561(0xcd)](_0x507561(0xb9),_0x3b9fb5+_0x507561(0xef));}else _0x44e16e[_0x507561(0xcd)](_0x507561(0xc2),_0x3b9fb5+_0x507561(0xbb));}catch(_0x13b0e0){_0x2b72b9[_0x507561(0xd3)](0x1f4)[_0x507561(0xc9)]({'proderror':_0x13b0e0[_0x507561(0x114)],'aproduct':ProductName});}}_0x2b72b9[_0x507561(0x11c)](_0x507561(0xd1));}),module[a0_0x23c380(0xbc)]=router;