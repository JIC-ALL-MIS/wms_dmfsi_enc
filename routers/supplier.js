function a0_0x56f8(){const _0x238e69=['Router','Customers','6044sBshPO','purchase','find','Mobile_number','public/Migration/','Portuguese','PUnits','978JeQnAG','send','reason','638630cdNqyW','/view/payment/:id','render','$amount','public/Migration','supplier_payment','email','supplier.js\x20payment_data','landline','91nEcWVf','express','purchase_return','SheetNames','French','/supplier/view','Content-Disposition','user','redirect','26SFeTYm','now','contactperson','flash','readFile','utils','payable','errors','then','Purchase','address','payable_sum','single','../middleware/auth','Arabic','amount','xlsx','suppliers_docs','name','English','status','findById','../models/all_models','Sheets','Name','7979400YOskZY','json','company','supplier\x20data\x20add\x20successfully','success','write','findOne','suppliers_code','error','Company_Name','language','mobile','doc','German','get','file','Hindi','English\x20(US)','260784AykbSp','setHeader','addWorksheet','body','/products_export_migrate_file','log','exceljs','$reason','Supplier_Code','supplier','../public/language/languages.json','map','master','exports','data','Spanish','3726060aHOCol','Workbook','multer','/supplier_import_migrate_file','save','forEach','Arabic\x20(ae)','Email','post','Portuguese\x20(BR)','Chinese','16539130oGXbYC','params','/view','columns','11612hNSMIP','suppliers','receivable_sum','aggregate','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','SalesmanName','\x20Failed','\x20added\x20successfully'];a0_0x56f8=function(){return _0x238e69;};return a0_0x56f8();}const a0_0x576d20=a0_0x59f0;(function(_0x14e42b,_0x5b3f77){const _0x5e9d2f=a0_0x59f0,_0x5ea9a6=_0x14e42b();while(!![]){try{const _0x3b6cb7=-parseInt(_0x5e9d2f(0x1f8))/0x1*(-parseInt(_0x5e9d2f(0x242))/0x2)+-parseInt(_0x5e9d2f(0x253))/0x3*(parseInt(_0x5e9d2f(0x24c))/0x4)+parseInt(_0x5e9d2f(0x1e6))/0x5+parseInt(_0x5e9d2f(0x233))/0x6+-parseInt(_0x5e9d2f(0x1ef))/0x7*(parseInt(_0x5e9d2f(0x223))/0x8)+-parseInt(_0x5e9d2f(0x211))/0x9+parseInt(_0x5e9d2f(0x23e))/0xa;if(_0x3b6cb7===_0x5b3f77)break;else _0x5ea9a6['push'](_0x5ea9a6['shift']());}catch(_0x23b27d){_0x5ea9a6['push'](_0x5ea9a6['shift']());}}}(a0_0x56f8,0xb7435));const express=require(a0_0x576d20(0x1f0)),app=express(),router=express[a0_0x576d20(0x24a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x576d20(0x20e)),auth=require(a0_0x576d20(0x205)),users=require(a0_0x576d20(0x22d)),excelJS=require(a0_0x576d20(0x229)),xlsx=require(a0_0x576d20(0x208)),multer=require(a0_0x576d20(0x235));router[a0_0x576d20(0x21f)]('/view',auth,async(_0x12b393,_0x3e368e)=>{const _0x9cd4fe=a0_0x576d20;try{const {username:_0xbb6340,email:_0x19e980,role:_0x2586c3}=_0x12b393[_0x9cd4fe(0x1f6)],_0x245086=_0x12b393['user'],_0x30da03=await profile[_0x9cd4fe(0x217)]({'email':_0x245086[_0x9cd4fe(0x1ec)]}),_0x3198df=await master_shop[_0x9cd4fe(0x24e)]();console[_0x9cd4fe(0x228)](_0x9cd4fe(0x22f),_0x3198df);const _0x511786=await suppliers[_0x9cd4fe(0x24e)]();console[_0x9cd4fe(0x228)](_0x511786);const _0x43750c=await suppliers[_0x9cd4fe(0x245)]([{'$lookup':{'from':'s_payments','localField':_0x9cd4fe(0x20a),'foreignField':_0x9cd4fe(0x243),'as':_0x9cd4fe(0x209)}}]),_0x5ef9bf=_0x43750c[_0x9cd4fe(0x22e)](_0x5c0aaf=>{const _0x3c6b16=_0x9cd4fe;console[_0x3c6b16(0x228)](_0x3c6b16(0x231),_0x5c0aaf);var _0x35ed5f=0x0,_0x2dfabe=0x0;return _0x5c0aaf[_0x3c6b16(0x209)][_0x3c6b16(0x238)](_0x21b28a=>{const _0x23b2f0=_0x3c6b16;console['log'](_0x23b2f0(0x21d),_0x21b28a),_0x21b28a[_0x23b2f0(0x1e5)]==_0x23b2f0(0x201)?_0x35ed5f+=_0x21b28a['amount']:_0x2dfabe+=_0x21b28a[_0x23b2f0(0x207)];}),_0x5c0aaf[_0x3c6b16(0x24d)]=_0x35ed5f,_0x5c0aaf[_0x3c6b16(0x1f1)]=_0x2dfabe,_0x5c0aaf;});console['log'](_0x9cd4fe(0x1ed),_0x5ef9bf);if(_0x3198df[0x0]['language']==_0x9cd4fe(0x222)){var _0x2dc0b1=users[_0x9cd4fe(0x20b)];console[_0x9cd4fe(0x228)](_0x2dc0b1);}else{if(_0x3198df[0x0]['language']==_0x9cd4fe(0x221))var _0x2dc0b1=users[_0x9cd4fe(0x221)];else{if(_0x3198df[0x0]['language']=='German')var _0x2dc0b1=users[_0x9cd4fe(0x21e)];else{if(_0x3198df[0x0]['language']==_0x9cd4fe(0x232))var _0x2dc0b1=users[_0x9cd4fe(0x232)];else{if(_0x3198df[0x0]['language']=='French')var _0x2dc0b1=users['French'];else{if(_0x3198df[0x0][_0x9cd4fe(0x21b)]==_0x9cd4fe(0x23c))var _0x2dc0b1=users['Portuguese'];else{if(_0x3198df[0x0][_0x9cd4fe(0x21b)]==_0x9cd4fe(0x23d))var _0x2dc0b1=users[_0x9cd4fe(0x23d)];else{if(_0x3198df[0x0]['language']==_0x9cd4fe(0x239))var _0x2dc0b1=users[_0x9cd4fe(0x206)];}}}}}}}_0x3e368e[_0x9cd4fe(0x1e8)](_0x9cd4fe(0x22c),{'success':_0x12b393[_0x9cd4fe(0x1fb)](_0x9cd4fe(0x215)),'errors':_0x12b393[_0x9cd4fe(0x1fb)](_0x9cd4fe(0x1ff)),'user':_0x511786,'profile':_0x30da03,'master_shop':_0x3198df,'role':_0x245086,'payment':_0x5ef9bf,'language':_0x2dc0b1});}catch(_0x5f1371){console[_0x9cd4fe(0x228)](_0x5f1371);}}),router[a0_0x576d20(0x23b)](a0_0x576d20(0x240),auth,async(_0x4bbbdd,_0x46a210)=>{const _0x2d1cc6=a0_0x576d20;try{const {name:_0x282214,email:_0x114e82,mobile:_0x273c6d,company:_0x5dae92,address:_0x239bfc,receivable:_0x3450f7,payable:_0x17a7c0,code:_0x1a67cc,contactperson:_0x23048a,landline:_0x4c2e96}=_0x4bbbdd[_0x2d1cc6(0x226)],_0x13142f=new suppliers({'name':_0x282214,'email':_0x114e82,'mobile':_0x273c6d,'company':_0x5dae92,'address':_0x239bfc,'receivable':_0x3450f7,'payable':_0x17a7c0,'suppliers_code':_0x1a67cc,'contactperson':_0x23048a,'landline':_0x4c2e96}),_0x50be0e=await _0x13142f[_0x2d1cc6(0x237)]();_0x4bbbdd[_0x2d1cc6(0x1fb)]('success',_0x2d1cc6(0x214)),_0x46a210[_0x2d1cc6(0x1f7)](_0x2d1cc6(0x1f4));}catch(_0x16300d){console['log'](_0x16300d);}}),router['get']('/view/:id',auth,async(_0x1ff404,_0x592e11)=>{const _0x25f50a=a0_0x576d20;try{const {username:_0x55c164,email:_0x3a0186,role:_0x3dc401}=_0x1ff404[_0x25f50a(0x1f6)],_0x5dea37=_0x1ff404[_0x25f50a(0x1f6)],_0x4132f6=await profile[_0x25f50a(0x217)]({'email':_0x5dea37[_0x25f50a(0x1ec)]}),_0x26f9c2=await master_shop[_0x25f50a(0x24e)]();console[_0x25f50a(0x228)]('master',_0x26f9c2);const _0xa4a19e=_0x1ff404[_0x25f50a(0x23f)]['id'],_0x44da54=await suppliers[_0x25f50a(0x20d)](_0xa4a19e);console[_0x25f50a(0x228)](_0x44da54);if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x222)){var _0x4bd948=users[_0x25f50a(0x20b)];console['log'](_0x4bd948);}else{if(_0x26f9c2[0x0]['language']==_0x25f50a(0x221))var _0x4bd948=users[_0x25f50a(0x221)];else{if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x21e))var _0x4bd948=users['German'];else{if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x232))var _0x4bd948=users[_0x25f50a(0x232)];else{if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x1f3))var _0x4bd948=users[_0x25f50a(0x1f3)];else{if(_0x26f9c2[0x0]['language']==_0x25f50a(0x23c))var _0x4bd948=users[_0x25f50a(0x251)];else{if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x23d))var _0x4bd948=users[_0x25f50a(0x23d)];else{if(_0x26f9c2[0x0][_0x25f50a(0x21b)]==_0x25f50a(0x239))var _0x4bd948=users['Arabic'];}}}}}}}_0x592e11['render'](_0x25f50a(0x22c),{'success':_0x1ff404[_0x25f50a(0x1fb)](_0x25f50a(0x215)),'errors':_0x1ff404[_0x25f50a(0x1fb)](_0x25f50a(0x1ff)),'role':_0x5dea37,'profile':_0x4132f6,'master_shop':_0x26f9c2,'user':_0x44da54,'language':_0x4bd948});}catch(_0x275dbd){console[_0x25f50a(0x228)](_0x275dbd);}}),router[a0_0x576d20(0x23b)]('/view/:id',auth,async(_0x579d3e,_0xfcfaa6)=>{const _0x1c7c59=a0_0x576d20;try{const _0x5a8d60=_0x579d3e['params']['id'],_0xdfdb6c=await suppliers[_0x1c7c59(0x20d)](_0x5a8d60),{name:_0x29b8a8,email:_0x2265bf,mobile:_0x5f3b31,company:_0x4cc34f,address:_0x54ede0,receivable:_0x21f2db,payable:_0x427392,code:_0x2b6bd6,contactperson:_0x216206,landline:_0x121d7c}=_0x579d3e['body'];_0xdfdb6c[_0x1c7c59(0x20a)]=_0x29b8a8,_0xdfdb6c[_0x1c7c59(0x1ec)]=_0x2265bf,_0xdfdb6c[_0x1c7c59(0x21c)]=_0x5f3b31,_0xdfdb6c[_0x1c7c59(0x213)]=_0x4cc34f,_0xdfdb6c['address']=_0x54ede0,_0xdfdb6c['receivable']=_0x21f2db,_0xdfdb6c[_0x1c7c59(0x1fe)]=_0x427392,_0xdfdb6c[_0x1c7c59(0x218)]=_0x2b6bd6,_0xdfdb6c[_0x1c7c59(0x1fa)]=_0x216206,_0xdfdb6c[_0x1c7c59(0x1ee)]=_0x121d7c;const _0x29417f=await _0xdfdb6c[_0x1c7c59(0x237)]();_0x579d3e[_0x1c7c59(0x1fb)](_0x1c7c59(0x215),'supplier\x20data\x20update\x20successfully'),_0xfcfaa6[_0x1c7c59(0x1f7)](_0x1c7c59(0x1f4));}catch(_0x34c4f3){console['log'](_0x34c4f3);}}),router[a0_0x576d20(0x21f)](a0_0x576d20(0x1e7),auth,async(_0x20d1ab,_0x226495)=>{const _0x17d12b=a0_0x576d20;try{const {username:_0x304f64,email:_0x42f0ea,role:_0x13986}=_0x20d1ab[_0x17d12b(0x1f6)],_0x4fd060=_0x20d1ab[_0x17d12b(0x1f6)],_0x554a0b=await profile[_0x17d12b(0x217)]({'email':_0x4fd060['email']}),_0x548e98=await master_shop[_0x17d12b(0x24e)]();console[_0x17d12b(0x228)]('master',_0x548e98),console['log'](_0x20d1ab['params']['id']);const _0x3c6eef=await suppliers[_0x17d12b(0x217)]({'_id':_0x20d1ab[_0x17d12b(0x23f)]['id']});console[_0x17d12b(0x228)](_0x3c6eef);const _0x31512a=await s_payment_data[_0x17d12b(0x24e)]({'suppliers':_0x3c6eef['name']});console[_0x17d12b(0x228)](_0x31512a);const _0x206395=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x3c6eef[_0x17d12b(0x20a)]}},{'$match':{'reason':_0x17d12b(0x201)}},{'$group':{'_id':_0x17d12b(0x22a),'sum':{'$sum':_0x17d12b(0x1e9)}}}]);console[_0x17d12b(0x228)](_0x17d12b(0x203),_0x206395);const _0x436c49=await s_payment_data[_0x17d12b(0x245)]([{'$match':{'suppliers':_0x3c6eef['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x17d12b(0x22a),'sum':{'$sum':_0x17d12b(0x1e9)}}}]);console[_0x17d12b(0x228)](_0x17d12b(0x244),_0x436c49);if(_0x548e98[0x0][_0x17d12b(0x21b)]==_0x17d12b(0x222)){var _0x1266e5=users[_0x17d12b(0x20b)];console[_0x17d12b(0x228)](_0x1266e5);}else{if(_0x548e98[0x0]['language']==_0x17d12b(0x221))var _0x1266e5=users['Hindi'];else{if(_0x548e98[0x0]['language']==_0x17d12b(0x21e))var _0x1266e5=users['German'];else{if(_0x548e98[0x0][_0x17d12b(0x21b)]=='Spanish')var _0x1266e5=users['Spanish'];else{if(_0x548e98[0x0][_0x17d12b(0x21b)]==_0x17d12b(0x1f3))var _0x1266e5=users[_0x17d12b(0x1f3)];else{if(_0x548e98[0x0][_0x17d12b(0x21b)]==_0x17d12b(0x23c))var _0x1266e5=users[_0x17d12b(0x251)];else{if(_0x548e98[0x0][_0x17d12b(0x21b)]==_0x17d12b(0x23d))var _0x1266e5=users[_0x17d12b(0x23d)];else{if(_0x548e98[0x0]['language']==_0x17d12b(0x239))var _0x1266e5=users[_0x17d12b(0x206)];}}}}}}}_0x226495[_0x17d12b(0x1e8)](_0x17d12b(0x1eb),{'success':_0x20d1ab[_0x17d12b(0x1fb)]('success'),'errors':_0x20d1ab[_0x17d12b(0x1fb)]('errors'),'role':_0x4fd060,'profile':_0x554a0b,'master_shop':_0x548e98,'payment':_0x31512a,'payable':_0x206395,'receivable':_0x436c49,'language':_0x1266e5});}catch(_0x55f912){console['log'](_0x55f912);}}),router[a0_0x576d20(0x21f)](a0_0x576d20(0x227),auth,async(_0x426b4a,_0x40c10c)=>{const _0x17d9ae=a0_0x576d20;try{const _0x3b75cd=new excelJS[(_0x17d9ae(0x234))](),_0x2bc6f3=_0x3b75cd[_0x17d9ae(0x225)](_0x17d9ae(0x24b));return _0x2bc6f3[_0x17d9ae(0x241)]=[{'header':_0x17d9ae(0x210),'key':'PBrands','width':0xa},{'header':_0x17d9ae(0x22b),'key':_0x17d9ae(0x252),'width':0xa},{'header':'Email','key':_0x17d9ae(0x247),'width':0xa},{'header':_0x17d9ae(0x24f),'key':_0x17d9ae(0x202),'width':0xa},{'header':_0x17d9ae(0x21a),'key':'mobile','width':0xa},{'header':_0x17d9ae(0x202),'key':_0x17d9ae(0x1ec),'width':0xa}],_0x40c10c[_0x17d9ae(0x224)]('Content-Type',_0x17d9ae(0x246)),_0x40c10c['setHeader'](_0x17d9ae(0x1f5),'attachment;\x20filename=supplier_Migration_File.xlsx'),_0x3b75cd[_0x17d9ae(0x208)][_0x17d9ae(0x216)](_0x40c10c)[_0x17d9ae(0x200)](()=>{const _0x4feda2=_0x17d9ae;_0x40c10c[_0x4feda2(0x20c)](0xc8);});}catch(_0x444b30){_0x40c10c[_0x17d9ae(0x20c)](0x190)[_0x17d9ae(0x254)]({'errors':_0x444b30['message']});}});const storage1=multer['diskStorage']({'destination':(_0x421a7a,_0x479bd5,_0x54c3ab)=>{const _0xf8a9df=a0_0x576d20;_0x54c3ab(null,_0xf8a9df(0x1ea));},'filename':(_0x1645ce,_0x7626a7,_0x33b91f)=>{const _0x564eac=a0_0x576d20;_0x33b91f(null,Date[_0x564eac(0x1f9)]()+_0x7626a7['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x59f0(_0x17eb67,_0x3123fc){const _0x56f8da=a0_0x56f8();return a0_0x59f0=function(_0x59f037,_0x4eda59){_0x59f037=_0x59f037-0x1e5;let _0x59b3f7=_0x56f8da[_0x59f037];return _0x59b3f7;},a0_0x59f0(_0x17eb67,_0x3123fc);}router[a0_0x576d20(0x23b)](a0_0x576d20(0x236),auth,uploadMigrate[a0_0x576d20(0x204)]('supplier_product_file'),async(_0x59067a,_0xac0118)=>{const _0xf34748=a0_0x576d20,_0x576ef6=_0x59067a[_0xf34748(0x220)]['filename'],_0xd03da9=await xlsx[_0xf34748(0x1fc)](_0xf34748(0x250)+_0x576ef6);let _0x675e0c=_0xd03da9[_0xf34748(0x1f2)],_0x3af3d9=xlsx[_0xf34748(0x1fd)]['sheet_to_json'](_0xd03da9[_0xf34748(0x20f)][_0x675e0c[0x0]]);for(const _0x48ef9 of _0x3af3d9){const _0x5d7b22=_0x48ef9[_0xf34748(0x210)],_0x5b103e=_0x48ef9[_0xf34748(0x22b)],_0x49d7ed=_0x48ef9['address'],_0x261b36=_0x48ef9[_0xf34748(0x24f)],_0x1c4686=_0x48ef9[_0xf34748(0x23a)],_0x50fe2e=_0x48ef9[_0xf34748(0x21a)];try{let _0x44844a=await suppliers[_0xf34748(0x217)]({'name':_0x5d7b22});if(!_0x44844a){const _0x1f4225=new suppliers({'name':_0x5d7b22,'suppliers_code':_0x5b103e,'address':_0x49d7ed,'mobile':_0x261b36,'email':_0x1c4686,'company':_0x50fe2e});_0x44844a=await _0x1f4225[_0xf34748(0x237)](),_0x59067a[_0xf34748(0x1fb)](_0xf34748(0x215),_0x5d7b22+_0xf34748(0x249));}else _0x59067a[_0xf34748(0x1fb)](_0xf34748(0x219),_0x5d7b22+_0xf34748(0x248));}catch(_0x137e97){_0xac0118['status'](0x1f4)[_0xf34748(0x212)]({'proderror':_0x137e97['message'],'aproduct':ProductName});}}_0xac0118[_0xf34748(0x1f7)](_0xf34748(0x1f4));}),module[a0_0x576d20(0x230)]=router;