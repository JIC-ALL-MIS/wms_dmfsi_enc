function a0_0x3dd6(){const _0xe31772=['Portuguese','addWorksheet','supplier\x20data\x20update\x20successfully','data','receivable','201996EfQuue','Portuguese\x20(BR)','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','suppliers_docs','$reason','findById','Sheets','payable','Supplier_Code','mobile','findOne','610EqsnpM','Arabic\x20(ae)','post','get','Email','email','single','Arabic','Router','French','Purchase\x20Return','SheetNames','s_payments','utils','aggregate','Spanish','errors','user','supplier','redirect','doc','success','xlsx','params','Chinese','message','public/Migration/','send','render','Name','../middleware/auth','Content-Type','originalname','16WfaVCi','571944ZLqpHK','write','body','master','amount','/view/payment/:id','error','express','reason','file','330837dxpOVp','readFile','../models/all_models','$amount','/view/:id','exports','English\x20(US)','Purchase','3aaDOLl','attachment;\x20filename=supplier_Migration_File.xlsx','language','840000ctOtuV','find','receivable_sum','log','columns','1448ocRtIV','supplier\x20data\x20add\x20successfully','418716eCzQOl','contactperson','diskStorage','company','German','Company_Name','public/Migration','address','purchase','../public/language/languages.json','PBrands','\x20added\x20successfully','2550863piQNpw','Mobile_number','/supplier/view','Hindi','SalesmanName','save','supplier_payment','suppliers','English','multer','name','json','map','/products_export_migrate_file','status','flash'];a0_0x3dd6=function(){return _0xe31772;};return a0_0x3dd6();}function a0_0x501c(_0x4ae055,_0x1c1b64){const _0x3dd6d3=a0_0x3dd6();return a0_0x501c=function(_0x501c16,_0x337d91){_0x501c16=_0x501c16-0x1ec;let _0x41cf55=_0x3dd6d3[_0x501c16];return _0x41cf55;},a0_0x501c(_0x4ae055,_0x1c1b64);}const a0_0x1bf224=a0_0x501c;(function(_0x5b3b45,_0x347a33){const _0x33e2ce=a0_0x501c,_0x109d3d=_0x5b3b45();while(!![]){try{const _0x254dfa=-parseInt(_0x33e2ce(0x253))/0x1+-parseInt(_0x33e2ce(0x1fb))/0x2*(-parseInt(_0x33e2ce(0x1f1))/0x3)+parseInt(_0x33e2ce(0x1f9))/0x4*(-parseInt(_0x33e2ce(0x227))/0x5)+-parseInt(_0x33e2ce(0x249))/0x6+parseInt(_0x33e2ce(0x207))/0x7+-parseInt(_0x33e2ce(0x248))/0x8*(-parseInt(_0x33e2ce(0x21c))/0x9)+parseInt(_0x33e2ce(0x1f4))/0xa;if(_0x254dfa===_0x347a33)break;else _0x109d3d['push'](_0x109d3d['shift']());}catch(_0x261b20){_0x109d3d['push'](_0x109d3d['shift']());}}}(a0_0x3dd6,0x38b8a));const express=require(a0_0x1bf224(0x250)),app=express(),router=express[a0_0x1bf224(0x22f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x1bf224(0x255)),auth=require(a0_0x1bf224(0x245)),users=require(a0_0x1bf224(0x204)),excelJS=require('exceljs'),xlsx=require(a0_0x1bf224(0x23d)),multer=require(a0_0x1bf224(0x210));router[a0_0x1bf224(0x22a)]('/view',auth,async(_0x4110db,_0x5c5125)=>{const _0x39e46e=a0_0x1bf224;try{const {username:_0x15693b,email:_0x508dfb,role:_0x2a7e54}=_0x4110db[_0x39e46e(0x238)],_0x18361f=_0x4110db[_0x39e46e(0x238)],_0x1c9ea0=await profile['findOne']({'email':_0x18361f[_0x39e46e(0x22c)]}),_0x481476=await master_shop[_0x39e46e(0x1f5)]();console[_0x39e46e(0x1f7)](_0x39e46e(0x24c),_0x481476);const _0x4339cf=await suppliers['find']();console[_0x39e46e(0x1f7)](_0x4339cf);const _0x5d5f75=await suppliers[_0x39e46e(0x235)]([{'$lookup':{'from':_0x39e46e(0x233),'localField':_0x39e46e(0x211),'foreignField':_0x39e46e(0x20e),'as':'suppliers_docs'}}]),_0x452a91=_0x5d5f75[_0x39e46e(0x213)](_0x15a8fc=>{const _0x39ecbb=_0x39e46e;console['log'](_0x39ecbb(0x21a),_0x15a8fc);var _0x18c1f4=0x0,_0x1bee68=0x0;return _0x15a8fc[_0x39ecbb(0x21f)]['forEach'](_0x13fbb3=>{const _0x49bfcf=_0x39ecbb;console[_0x49bfcf(0x1f7)](_0x49bfcf(0x23b),_0x13fbb3),_0x13fbb3[_0x49bfcf(0x251)]==_0x49bfcf(0x1f0)?_0x18c1f4+=_0x13fbb3['amount']:_0x1bee68+=_0x13fbb3[_0x49bfcf(0x24d)];}),_0x15a8fc[_0x39ecbb(0x203)]=_0x18c1f4,_0x15a8fc['purchase_return']=_0x1bee68,_0x15a8fc;});console['log']('supplier.js\x20payment_data',_0x452a91);if(_0x481476[0x0]['language']=='English\x20(US)'){var _0x31ee99=users[_0x39e46e(0x20f)];console['log'](_0x31ee99);}else{if(_0x481476[0x0]['language']==_0x39e46e(0x20a))var _0x31ee99=users[_0x39e46e(0x20a)];else{if(_0x481476[0x0]['language']=='German')var _0x31ee99=users['German'];else{if(_0x481476[0x0][_0x39e46e(0x1f3)]==_0x39e46e(0x236))var _0x31ee99=users[_0x39e46e(0x236)];else{if(_0x481476[0x0][_0x39e46e(0x1f3)]==_0x39e46e(0x230))var _0x31ee99=users[_0x39e46e(0x230)];else{if(_0x481476[0x0]['language']==_0x39e46e(0x21d))var _0x31ee99=users[_0x39e46e(0x217)];else{if(_0x481476[0x0]['language']=='Chinese')var _0x31ee99=users[_0x39e46e(0x23f)];else{if(_0x481476[0x0]['language']=='Arabic\x20(ae)')var _0x31ee99=users[_0x39e46e(0x22e)];}}}}}}}_0x5c5125[_0x39e46e(0x243)](_0x39e46e(0x239),{'success':_0x4110db[_0x39e46e(0x216)](_0x39e46e(0x23c)),'errors':_0x4110db[_0x39e46e(0x216)]('errors'),'user':_0x4339cf,'profile':_0x1c9ea0,'master_shop':_0x481476,'role':_0x18361f,'payment':_0x452a91,'language':_0x31ee99});}catch(_0x1cef5f){console[_0x39e46e(0x1f7)](_0x1cef5f);}}),router[a0_0x1bf224(0x229)]('/view',auth,async(_0x5eb3d5,_0x34286b)=>{const _0x3421be=a0_0x1bf224;try{const {name:_0x20f76e,email:_0x384439,mobile:_0x51106d,company:_0x3bd212,address:_0x304528,receivable:_0x186d8d,payable:_0x39d454,code:_0x7a0edb,contactperson:_0x356bae,landline:_0x543f10}=_0x5eb3d5['body'],_0x61eee8=new suppliers({'name':_0x20f76e,'email':_0x384439,'mobile':_0x51106d,'company':_0x3bd212,'address':_0x304528,'receivable':_0x186d8d,'payable':_0x39d454,'suppliers_code':_0x7a0edb,'contactperson':_0x356bae,'landline':_0x543f10}),_0x3779ef=await _0x61eee8[_0x3421be(0x20c)]();_0x5eb3d5['flash'](_0x3421be(0x23c),_0x3421be(0x1fa)),_0x34286b['redirect']('/supplier/view');}catch(_0x5f6a9a){console[_0x3421be(0x1f7)](_0x5f6a9a);}}),router[a0_0x1bf224(0x22a)](a0_0x1bf224(0x1ed),auth,async(_0x4a50ba,_0x3d5549)=>{const _0x343e26=a0_0x1bf224;try{const {username:_0x5fd7ae,email:_0x3dc172,role:_0x112d74}=_0x4a50ba['user'],_0x28ad84=_0x4a50ba['user'],_0xb29018=await profile[_0x343e26(0x226)]({'email':_0x28ad84['email']}),_0xca1196=await master_shop[_0x343e26(0x1f5)]();console[_0x343e26(0x1f7)](_0x343e26(0x24c),_0xca1196);const _0x40183c=_0x4a50ba[_0x343e26(0x23e)]['id'],_0x5007e6=await suppliers[_0x343e26(0x221)](_0x40183c);console[_0x343e26(0x1f7)](_0x5007e6);if(_0xca1196[0x0][_0x343e26(0x1f3)]==_0x343e26(0x1ef)){var _0x438a33=users[_0x343e26(0x20f)];console[_0x343e26(0x1f7)](_0x438a33);}else{if(_0xca1196[0x0][_0x343e26(0x1f3)]==_0x343e26(0x20a))var _0x438a33=users[_0x343e26(0x20a)];else{if(_0xca1196[0x0][_0x343e26(0x1f3)]=='German')var _0x438a33=users[_0x343e26(0x1ff)];else{if(_0xca1196[0x0]['language']==_0x343e26(0x236))var _0x438a33=users['Spanish'];else{if(_0xca1196[0x0][_0x343e26(0x1f3)]==_0x343e26(0x230))var _0x438a33=users[_0x343e26(0x230)];else{if(_0xca1196[0x0][_0x343e26(0x1f3)]==_0x343e26(0x21d))var _0x438a33=users[_0x343e26(0x217)];else{if(_0xca1196[0x0][_0x343e26(0x1f3)]=='Chinese')var _0x438a33=users[_0x343e26(0x23f)];else{if(_0xca1196[0x0]['language']==_0x343e26(0x228))var _0x438a33=users[_0x343e26(0x22e)];}}}}}}}_0x3d5549['render'](_0x343e26(0x239),{'success':_0x4a50ba[_0x343e26(0x216)](_0x343e26(0x23c)),'errors':_0x4a50ba[_0x343e26(0x216)](_0x343e26(0x237)),'role':_0x28ad84,'profile':_0xb29018,'master_shop':_0xca1196,'user':_0x5007e6,'language':_0x438a33});}catch(_0x41d8ba){console[_0x343e26(0x1f7)](_0x41d8ba);}}),router[a0_0x1bf224(0x229)](a0_0x1bf224(0x1ed),auth,async(_0xc54fbc,_0xb883b)=>{const _0x5362cf=a0_0x1bf224;try{const _0x585b16=_0xc54fbc[_0x5362cf(0x23e)]['id'],_0x4d0165=await suppliers[_0x5362cf(0x221)](_0x585b16),{name:_0x348feb,email:_0x2a7159,mobile:_0x2c1a01,company:_0x214e60,address:_0x1fc1f4,receivable:_0x54a2f2,payable:_0x225a7b,code:_0x37b00f,contactperson:_0x59d4a7,landline:_0x24dc6d}=_0xc54fbc[_0x5362cf(0x24b)];_0x4d0165['name']=_0x348feb,_0x4d0165[_0x5362cf(0x22c)]=_0x2a7159,_0x4d0165[_0x5362cf(0x225)]=_0x2c1a01,_0x4d0165[_0x5362cf(0x1fe)]=_0x214e60,_0x4d0165[_0x5362cf(0x202)]=_0x1fc1f4,_0x4d0165[_0x5362cf(0x21b)]=_0x54a2f2,_0x4d0165[_0x5362cf(0x223)]=_0x225a7b,_0x4d0165['suppliers_code']=_0x37b00f,_0x4d0165[_0x5362cf(0x1fc)]=_0x59d4a7,_0x4d0165['landline']=_0x24dc6d;const _0x46f7de=await _0x4d0165[_0x5362cf(0x20c)]();_0xc54fbc[_0x5362cf(0x216)](_0x5362cf(0x23c),_0x5362cf(0x219)),_0xb883b['redirect'](_0x5362cf(0x209));}catch(_0x54fa74){console[_0x5362cf(0x1f7)](_0x54fa74);}}),router[a0_0x1bf224(0x22a)](a0_0x1bf224(0x24e),auth,async(_0x104a71,_0x31a9b)=>{const _0x4d474e=a0_0x1bf224;try{const {username:_0x10939a,email:_0x1ed921,role:_0x539a6f}=_0x104a71['user'],_0xdd0cb0=_0x104a71['user'],_0x2698c2=await profile['findOne']({'email':_0xdd0cb0[_0x4d474e(0x22c)]}),_0x47baed=await master_shop[_0x4d474e(0x1f5)]();console['log']('master',_0x47baed),console[_0x4d474e(0x1f7)](_0x104a71['params']['id']);const _0x4494f3=await suppliers['findOne']({'_id':_0x104a71[_0x4d474e(0x23e)]['id']});console['log'](_0x4494f3);const _0x1ed647=await s_payment_data[_0x4d474e(0x1f5)]({'suppliers':_0x4494f3[_0x4d474e(0x211)]});console[_0x4d474e(0x1f7)](_0x1ed647);const _0x56f8aa=await s_payment_data[_0x4d474e(0x235)]([{'$match':{'suppliers':_0x4494f3['name']}},{'$match':{'reason':_0x4d474e(0x1f0)}},{'$group':{'_id':_0x4d474e(0x220),'sum':{'$sum':_0x4d474e(0x1ec)}}}]);console[_0x4d474e(0x1f7)]('payable_sum',_0x56f8aa);const _0x20f634=await s_payment_data[_0x4d474e(0x235)]([{'$match':{'suppliers':_0x4494f3[_0x4d474e(0x211)]}},{'$match':{'reason':_0x4d474e(0x231)}},{'$group':{'_id':_0x4d474e(0x220),'sum':{'$sum':'$amount'}}}]);console[_0x4d474e(0x1f7)](_0x4d474e(0x1f6),_0x20f634);if(_0x47baed[0x0][_0x4d474e(0x1f3)]==_0x4d474e(0x1ef)){var _0x47a884=users[_0x4d474e(0x20f)];console[_0x4d474e(0x1f7)](_0x47a884);}else{if(_0x47baed[0x0][_0x4d474e(0x1f3)]==_0x4d474e(0x20a))var _0x47a884=users['Hindi'];else{if(_0x47baed[0x0]['language']=='German')var _0x47a884=users[_0x4d474e(0x1ff)];else{if(_0x47baed[0x0][_0x4d474e(0x1f3)]==_0x4d474e(0x236))var _0x47a884=users[_0x4d474e(0x236)];else{if(_0x47baed[0x0]['language']=='French')var _0x47a884=users[_0x4d474e(0x230)];else{if(_0x47baed[0x0][_0x4d474e(0x1f3)]==_0x4d474e(0x21d))var _0x47a884=users[_0x4d474e(0x217)];else{if(_0x47baed[0x0]['language']==_0x4d474e(0x23f))var _0x47a884=users['Chinese'];else{if(_0x47baed[0x0][_0x4d474e(0x1f3)]==_0x4d474e(0x228))var _0x47a884=users[_0x4d474e(0x22e)];}}}}}}}_0x31a9b['render'](_0x4d474e(0x20d),{'success':_0x104a71[_0x4d474e(0x216)](_0x4d474e(0x23c)),'errors':_0x104a71['flash'](_0x4d474e(0x237)),'role':_0xdd0cb0,'profile':_0x2698c2,'master_shop':_0x47baed,'payment':_0x1ed647,'payable':_0x56f8aa,'receivable':_0x20f634,'language':_0x47a884});}catch(_0x5c4363){console[_0x4d474e(0x1f7)](_0x5c4363);}}),router[a0_0x1bf224(0x22a)](a0_0x1bf224(0x214),auth,async(_0x4d054b,_0x4ec1ad)=>{const _0xd23b45=a0_0x1bf224;try{const _0x566500=new excelJS['Workbook'](),_0x5edd38=_0x566500[_0xd23b45(0x218)]('Customers');return _0x5edd38[_0xd23b45(0x1f8)]=[{'header':_0xd23b45(0x244),'key':_0xd23b45(0x205),'width':0xa},{'header':'Supplier_Code','key':'PUnits','width':0xa},{'header':_0xd23b45(0x22b),'key':_0xd23b45(0x20b),'width':0xa},{'header':'Mobile_number','key':_0xd23b45(0x202),'width':0xa},{'header':_0xd23b45(0x200),'key':_0xd23b45(0x225),'width':0xa},{'header':_0xd23b45(0x202),'key':_0xd23b45(0x22c),'width':0xa}],_0x4ec1ad['setHeader'](_0xd23b45(0x246),_0xd23b45(0x21e)),_0x4ec1ad['setHeader']('Content-Disposition',_0xd23b45(0x1f2)),_0x566500['xlsx'][_0xd23b45(0x24a)](_0x4ec1ad)['then'](()=>{const _0x35dd14=_0xd23b45;_0x4ec1ad[_0x35dd14(0x215)](0xc8);});}catch(_0x427408){_0x4ec1ad[_0xd23b45(0x215)](0x190)[_0xd23b45(0x242)]({'errors':_0x427408[_0xd23b45(0x240)]});}});const storage1=multer[a0_0x1bf224(0x1fd)]({'destination':(_0x4e0bde,_0x1a658d,_0x12d38b)=>{const _0x482902=a0_0x1bf224;_0x12d38b(null,_0x482902(0x201));},'filename':(_0x1b481c,_0x6aaf85,_0x36489c)=>{const _0x5c260c=a0_0x1bf224;_0x36489c(null,Date['now']()+_0x6aaf85[_0x5c260c(0x247)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1bf224(0x229)]('/supplier_import_migrate_file',auth,uploadMigrate[a0_0x1bf224(0x22d)]('supplier_product_file'),async(_0x5048a2,_0x29f96a)=>{const _0x15d5c4=a0_0x1bf224,_0x21c2f1=_0x5048a2[_0x15d5c4(0x252)]['filename'],_0x38047c=await xlsx[_0x15d5c4(0x254)](_0x15d5c4(0x241)+_0x21c2f1);let _0x4ba71b=_0x38047c[_0x15d5c4(0x232)],_0x249ddd=xlsx[_0x15d5c4(0x234)]['sheet_to_json'](_0x38047c[_0x15d5c4(0x222)][_0x4ba71b[0x0]]);for(const _0xb52fa9 of _0x249ddd){const _0x3aca25=_0xb52fa9[_0x15d5c4(0x244)],_0x298b3a=_0xb52fa9[_0x15d5c4(0x224)],_0x13f5db=_0xb52fa9[_0x15d5c4(0x202)],_0x5b0dd1=_0xb52fa9[_0x15d5c4(0x208)],_0x31003e=_0xb52fa9[_0x15d5c4(0x22b)],_0x310fd7=_0xb52fa9[_0x15d5c4(0x200)];try{let _0x2670e4=await suppliers['findOne']({'name':_0x3aca25});if(!_0x2670e4){const _0x2d57af=new suppliers({'name':_0x3aca25,'suppliers_code':_0x298b3a,'address':_0x13f5db,'mobile':_0x5b0dd1,'email':_0x31003e,'company':_0x310fd7});_0x2670e4=await _0x2d57af[_0x15d5c4(0x20c)](),_0x5048a2[_0x15d5c4(0x216)]('success',_0x3aca25+_0x15d5c4(0x206));}else _0x5048a2['flash'](_0x15d5c4(0x24f),_0x3aca25+'\x20Failed');}catch(_0x352bae){_0x29f96a[_0x15d5c4(0x215)](0x1f4)[_0x15d5c4(0x212)]({'proderror':_0x352bae['message'],'aproduct':ProductName});}}_0x29f96a[_0x15d5c4(0x23a)](_0x15d5c4(0x209));}),module[a0_0x1bf224(0x1ee)]=router;