function a0_0x347d(_0x1b80e0,_0x159d04){const _0x53c462=a0_0x53c4();return a0_0x347d=function(_0x347d7f,_0x2d6165){_0x347d7f=_0x347d7f-0x1a1;let _0x329e9e=_0x53c462[_0x347d7f];return _0x329e9e;},a0_0x347d(_0x1b80e0,_0x159d04);}const a0_0x1de6aa=a0_0x347d;(function(_0x2deabf,_0x5cc502){const _0x3d6046=a0_0x347d,_0x402cbe=_0x2deabf();while(!![]){try{const _0x5abacd=parseInt(_0x3d6046(0x1cd))/0x1+-parseInt(_0x3d6046(0x1f5))/0x2+parseInt(_0x3d6046(0x207))/0x3*(parseInt(_0x3d6046(0x1c1))/0x4)+parseInt(_0x3d6046(0x1bf))/0x5*(parseInt(_0x3d6046(0x1cf))/0x6)+-parseInt(_0x3d6046(0x1d1))/0x7*(-parseInt(_0x3d6046(0x1f7))/0x8)+-parseInt(_0x3d6046(0x1f3))/0x9+-parseInt(_0x3d6046(0x1a3))/0xa*(-parseInt(_0x3d6046(0x1e2))/0xb);if(_0x5abacd===_0x5cc502)break;else _0x402cbe['push'](_0x402cbe['shift']());}catch(_0x20f5d1){_0x402cbe['push'](_0x402cbe['shift']());}}}(a0_0x53c4,0x4806c));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x1de6aa(0x1e7)),auth=require(a0_0x1de6aa(0x1e3)),users=require(a0_0x1de6aa(0x1e1)),excelJS=require(a0_0x1de6aa(0x1ec)),xlsx=require(a0_0x1de6aa(0x1db)),multer=require(a0_0x1de6aa(0x20d));router[a0_0x1de6aa(0x1e0)]('/view',auth,async(_0x1356fd,_0x4fa0d9)=>{const _0x1332b1=a0_0x1de6aa;try{const {username:_0x3871e4,email:_0x36836f,role:_0x4ffdc7}=_0x1356fd[_0x1332b1(0x1d4)],_0x4fe3b0=_0x1356fd[_0x1332b1(0x1d4)],_0x34e3b0=await profile[_0x1332b1(0x1b4)]({'email':_0x4fe3b0['email']}),_0xa67fd1=await master_shop[_0x1332b1(0x1d2)]();console[_0x1332b1(0x1ff)](_0x1332b1(0x1f8),_0xa67fd1);const _0x25b4f0=await suppliers[_0x1332b1(0x1d2)]();console[_0x1332b1(0x1ff)](_0x25b4f0);const _0x334d00=await suppliers[_0x1332b1(0x1bb)]([{'$lookup':{'from':_0x1332b1(0x1bc),'localField':_0x1332b1(0x20e),'foreignField':_0x1332b1(0x1c9),'as':_0x1332b1(0x1a2)}}]),_0x15cc48=_0x334d00['map'](_0x222563=>{const _0x628055=_0x1332b1;console[_0x628055(0x1ff)](_0x628055(0x1cb),_0x222563);var _0x71cb98=0x0,_0x33d4b2=0x0;return _0x222563[_0x628055(0x1a2)][_0x628055(0x1b9)](_0x4b74ee=>{const _0x4aefcd=_0x628055;console[_0x4aefcd(0x1ff)]('doc',_0x4b74ee),_0x4b74ee['reason']==_0x4aefcd(0x1d9)?_0x71cb98+=_0x4b74ee[_0x4aefcd(0x1d0)]:_0x33d4b2+=_0x4b74ee[_0x4aefcd(0x1d0)];}),_0x222563['purchase']=_0x71cb98,_0x222563[_0x628055(0x1a4)]=_0x33d4b2,_0x222563;});console[_0x1332b1(0x1ff)](_0x1332b1(0x1c2),_0x15cc48);if(_0xa67fd1[0x0]['language']==_0x1332b1(0x20b)){var _0x5bee49=users[_0x1332b1(0x1dd)];console[_0x1332b1(0x1ff)](_0x5bee49);}else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]=='Hindi')var _0x5bee49=users[_0x1332b1(0x1d3)];else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]=='German')var _0x5bee49=users[_0x1332b1(0x1fb)];else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]==_0x1332b1(0x1d6))var _0x5bee49=users[_0x1332b1(0x1d6)];else{if(_0xa67fd1[0x0]['language']=='French')var _0x5bee49=users[_0x1332b1(0x1e9)];else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]==_0x1332b1(0x1da))var _0x5bee49=users[_0x1332b1(0x1d5)];else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]==_0x1332b1(0x1df))var _0x5bee49=users[_0x1332b1(0x1df)];else{if(_0xa67fd1[0x0][_0x1332b1(0x1c0)]==_0x1332b1(0x1c3))var _0x5bee49=users[_0x1332b1(0x1a7)];}}}}}}}_0x4fa0d9[_0x1332b1(0x1cc)]('supplier',{'success':_0x1356fd[_0x1332b1(0x1ed)]('success'),'errors':_0x1356fd['flash'](_0x1332b1(0x1f2)),'user':_0x25b4f0,'profile':_0x34e3b0,'master_shop':_0xa67fd1,'role':_0x4fe3b0,'payment':_0x15cc48,'language':_0x5bee49});}catch(_0x216329){console[_0x1332b1(0x1ff)](_0x216329);}}),router['post'](a0_0x1de6aa(0x1fe),auth,async(_0xdbcc66,_0x1b5ad6)=>{const _0x4af406=a0_0x1de6aa;try{const {name:_0x1f92cf,email:_0x31a000,mobile:_0x206d47,company:_0x302295,address:_0x13dad2,receivable:_0x4fbe4f,payable:_0x50c6f1,code:_0x1a8e39,contactperson:_0x4aeeb5,landline:_0x4fc19d}=_0xdbcc66['body'],_0x530b73=new suppliers({'name':_0x1f92cf,'email':_0x31a000,'mobile':_0x206d47,'company':_0x302295,'address':_0x13dad2,'receivable':_0x4fbe4f,'payable':_0x50c6f1,'suppliers_code':_0x1a8e39,'contactperson':_0x4aeeb5,'landline':_0x4fc19d}),_0x1f144b=await _0x530b73[_0x4af406(0x1e5)]();_0xdbcc66[_0x4af406(0x1ed)](_0x4af406(0x1f4),_0x4af406(0x1f9)),_0x1b5ad6['redirect'](_0x4af406(0x1ac));}catch(_0x3aca28){console[_0x4af406(0x1ff)](_0x3aca28);}}),router[a0_0x1de6aa(0x1e0)](a0_0x1de6aa(0x1ee),auth,async(_0x2c0c18,_0x48b2c7)=>{const _0x205358=a0_0x1de6aa;try{const {username:_0xdf308e,email:_0x5a24bb,role:_0x560c67}=_0x2c0c18[_0x205358(0x1d4)],_0x55df39=_0x2c0c18[_0x205358(0x1d4)],_0x52f42a=await profile[_0x205358(0x1b4)]({'email':_0x55df39[_0x205358(0x1a1)]}),_0x35eff8=await master_shop['find']();console[_0x205358(0x1ff)](_0x205358(0x1f8),_0x35eff8);const _0x2d05be=_0x2c0c18[_0x205358(0x1ce)]['id'],_0x406de2=await suppliers['findById'](_0x2d05be);console[_0x205358(0x1ff)](_0x406de2);if(_0x35eff8[0x0][_0x205358(0x1c0)]=='English\x20(US)'){var _0x13bd73=users[_0x205358(0x1dd)];console[_0x205358(0x1ff)](_0x13bd73);}else{if(_0x35eff8[0x0]['language']==_0x205358(0x1d3))var _0x13bd73=users[_0x205358(0x1d3)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]==_0x205358(0x1fb))var _0x13bd73=users[_0x205358(0x1fb)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]==_0x205358(0x1d6))var _0x13bd73=users[_0x205358(0x1d6)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]=='French')var _0x13bd73=users[_0x205358(0x1e9)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]=='Portuguese\x20(BR)')var _0x13bd73=users[_0x205358(0x1d5)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]==_0x205358(0x1df))var _0x13bd73=users[_0x205358(0x1df)];else{if(_0x35eff8[0x0][_0x205358(0x1c0)]==_0x205358(0x1c3))var _0x13bd73=users[_0x205358(0x1a7)];}}}}}}}_0x48b2c7[_0x205358(0x1cc)](_0x205358(0x1f6),{'success':_0x2c0c18[_0x205358(0x1ed)]('success'),'errors':_0x2c0c18['flash'](_0x205358(0x1f2)),'role':_0x55df39,'profile':_0x52f42a,'master_shop':_0x35eff8,'user':_0x406de2,'language':_0x13bd73});}catch(_0x18a22a){console['log'](_0x18a22a);}}),router[a0_0x1de6aa(0x201)]('/view/:id',auth,async(_0x2a6ef5,_0x10bcef)=>{const _0x59e49a=a0_0x1de6aa;try{const _0x3f4ab6=_0x2a6ef5['params']['id'],_0x455380=await suppliers[_0x59e49a(0x1f1)](_0x3f4ab6),{name:_0x444a52,email:_0x1c67ce,mobile:_0x1a7cf8,company:_0x85609b,address:_0x51c6a3,receivable:_0x2ffbfe,payable:_0x1eac91,code:_0x192306,contactperson:_0xf67933,landline:_0x15ab4f}=_0x2a6ef5[_0x59e49a(0x1ad)];_0x455380[_0x59e49a(0x20e)]=_0x444a52,_0x455380[_0x59e49a(0x1a1)]=_0x1c67ce,_0x455380[_0x59e49a(0x1fa)]=_0x1a7cf8,_0x455380['company']=_0x85609b,_0x455380[_0x59e49a(0x209)]=_0x51c6a3,_0x455380[_0x59e49a(0x1e8)]=_0x2ffbfe,_0x455380[_0x59e49a(0x1c8)]=_0x1eac91,_0x455380[_0x59e49a(0x20a)]=_0x192306,_0x455380['contactperson']=_0xf67933,_0x455380[_0x59e49a(0x1d8)]=_0x15ab4f;const _0x267763=await _0x455380[_0x59e49a(0x1e5)]();_0x2a6ef5[_0x59e49a(0x1ed)](_0x59e49a(0x1f4),_0x59e49a(0x1e4)),_0x10bcef[_0x59e49a(0x210)](_0x59e49a(0x1ac));}catch(_0x3f6af2){console[_0x59e49a(0x1ff)](_0x3f6af2);}}),router[a0_0x1de6aa(0x1e0)](a0_0x1de6aa(0x1b7),auth,async(_0x58dadf,_0x4a3599)=>{const _0x352ac3=a0_0x1de6aa;try{const {username:_0x4d0cd8,email:_0x4ffe1c,role:_0x264ebc}=_0x58dadf['user'],_0x2b57e4=_0x58dadf[_0x352ac3(0x1d4)],_0x19da36=await profile[_0x352ac3(0x1b4)]({'email':_0x2b57e4['email']}),_0x3d17bc=await master_shop[_0x352ac3(0x1d2)]();console[_0x352ac3(0x1ff)](_0x352ac3(0x1f8),_0x3d17bc),console[_0x352ac3(0x1ff)](_0x58dadf[_0x352ac3(0x1ce)]['id']);const _0x341406=await suppliers['findOne']({'_id':_0x58dadf[_0x352ac3(0x1ce)]['id']});console['log'](_0x341406);const _0x4eae09=await s_payment_data[_0x352ac3(0x1d2)]({'suppliers':_0x341406[_0x352ac3(0x20e)]});console[_0x352ac3(0x1ff)](_0x4eae09);const _0x3dced8=await s_payment_data[_0x352ac3(0x1bb)]([{'$match':{'suppliers':_0x341406[_0x352ac3(0x20e)]}},{'$match':{'reason':_0x352ac3(0x1d9)}},{'$group':{'_id':_0x352ac3(0x1be),'sum':{'$sum':_0x352ac3(0x1eb)}}}]);console['log'](_0x352ac3(0x204),_0x3dced8);const _0xc80867=await s_payment_data[_0x352ac3(0x1bb)]([{'$match':{'suppliers':_0x341406['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0x352ac3(0x1be),'sum':{'$sum':_0x352ac3(0x1eb)}}}]);console[_0x352ac3(0x1ff)](_0x352ac3(0x200),_0xc80867);if(_0x3d17bc[0x0]['language']==_0x352ac3(0x20b)){var _0x1f708c=users[_0x352ac3(0x1dd)];console[_0x352ac3(0x1ff)](_0x1f708c);}else{if(_0x3d17bc[0x0]['language']=='Hindi')var _0x1f708c=users['Hindi'];else{if(_0x3d17bc[0x0][_0x352ac3(0x1c0)]==_0x352ac3(0x1fb))var _0x1f708c=users[_0x352ac3(0x1fb)];else{if(_0x3d17bc[0x0]['language']==_0x352ac3(0x1d6))var _0x1f708c=users[_0x352ac3(0x1d6)];else{if(_0x3d17bc[0x0]['language']=='French')var _0x1f708c=users[_0x352ac3(0x1e9)];else{if(_0x3d17bc[0x0][_0x352ac3(0x1c0)]==_0x352ac3(0x1da))var _0x1f708c=users[_0x352ac3(0x1d5)];else{if(_0x3d17bc[0x0][_0x352ac3(0x1c0)]==_0x352ac3(0x1df))var _0x1f708c=users[_0x352ac3(0x1df)];else{if(_0x3d17bc[0x0][_0x352ac3(0x1c0)]=='Arabic\x20(ae)')var _0x1f708c=users[_0x352ac3(0x1a7)];}}}}}}}_0x4a3599[_0x352ac3(0x1cc)](_0x352ac3(0x1b0),{'success':_0x58dadf['flash'](_0x352ac3(0x1f4)),'errors':_0x58dadf['flash'](_0x352ac3(0x1f2)),'role':_0x2b57e4,'profile':_0x19da36,'master_shop':_0x3d17bc,'payment':_0x4eae09,'payable':_0x3dced8,'receivable':_0xc80867,'language':_0x1f708c});}catch(_0x4bdbff){console[_0x352ac3(0x1ff)](_0x4bdbff);}}),router['get'](a0_0x1de6aa(0x1c7),auth,async(_0x326eeb,_0x30c6de)=>{const _0x51033c=a0_0x1de6aa;try{const _0x5218b8=new excelJS[(_0x51033c(0x1c6))](),_0x31b747=_0x5218b8[_0x51033c(0x1dc)]('Customers');return _0x31b747[_0x51033c(0x205)]=[{'header':'Name','key':_0x51033c(0x1ea),'width':0xa},{'header':'Supplier_Code','key':_0x51033c(0x1d7),'width':0xa},{'header':_0x51033c(0x1ef),'key':_0x51033c(0x1fd),'width':0xa},{'header':_0x51033c(0x1a6),'key':_0x51033c(0x209),'width':0xa},{'header':'Company_Name','key':_0x51033c(0x1fa),'width':0xa},{'header':_0x51033c(0x209),'key':_0x51033c(0x1a1),'width':0xa}],_0x30c6de[_0x51033c(0x1aa)](_0x51033c(0x1b2),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x30c6de[_0x51033c(0x1aa)](_0x51033c(0x203),_0x51033c(0x1f0)),_0x5218b8[_0x51033c(0x1db)][_0x51033c(0x1c5)](_0x30c6de)[_0x51033c(0x1a8)](()=>{const _0x652f9d=_0x51033c;_0x30c6de[_0x652f9d(0x208)](0xc8);});}catch(_0x5b107e){_0x30c6de[_0x51033c(0x208)](0x190)[_0x51033c(0x1ca)]({'errors':_0x5b107e[_0x51033c(0x1e6)]});}});const storage1=multer['diskStorage']({'destination':(_0x40f74c,_0x787222,_0x2044ac)=>{const _0x4ddbe4=a0_0x1de6aa;_0x2044ac(null,_0x4ddbe4(0x20f));},'filename':(_0x3865ca,_0x626e49,_0x38010f)=>{const _0xc5cd6d=a0_0x1de6aa;_0x38010f(null,Date[_0xc5cd6d(0x1c4)]()+_0x626e49[_0xc5cd6d(0x1b8)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1de6aa(0x201)](a0_0x1de6aa(0x1b3),auth,uploadMigrate[a0_0x1de6aa(0x1fc)](a0_0x1de6aa(0x1a5)),async(_0x52f6e5,_0x3cb905)=>{const _0x134219=a0_0x1de6aa,_0x2eb97d=_0x52f6e5['file'][_0x134219(0x1b1)],_0x43fcdb=await xlsx[_0x134219(0x1de)](_0x134219(0x206)+_0x2eb97d);let _0x3f35ad=_0x43fcdb[_0x134219(0x1b5)],_0x18a317=xlsx[_0x134219(0x202)]['sheet_to_json'](_0x43fcdb[_0x134219(0x20c)][_0x3f35ad[0x0]]);for(const _0x1972b2 of _0x18a317){const _0x16c4f1=_0x1972b2[_0x134219(0x1bd)],_0x3dc620=_0x1972b2['Supplier_Code'],_0xbcef1=_0x1972b2['address'],_0x229300=_0x1972b2[_0x134219(0x1a6)],_0x577164=_0x1972b2[_0x134219(0x1ef)],_0x59b47a=_0x1972b2[_0x134219(0x1af)];try{let _0x3ec69f=await suppliers[_0x134219(0x1b4)]({'name':_0x16c4f1});if(!_0x3ec69f){const _0x4242f7=new suppliers({'name':_0x16c4f1,'suppliers_code':_0x3dc620,'address':_0xbcef1,'mobile':_0x229300,'email':_0x577164,'company':_0x59b47a});_0x3ec69f=await _0x4242f7[_0x134219(0x1e5)](),_0x52f6e5[_0x134219(0x1ed)](_0x134219(0x1f4),_0x16c4f1+_0x134219(0x1ab));}else _0x52f6e5[_0x134219(0x1ed)](_0x134219(0x1ba),_0x16c4f1+_0x134219(0x1a9));}catch(_0x517e26){_0x3cb905['status'](0x1f4)[_0x134219(0x1b6)]({'proderror':_0x517e26[_0x134219(0x1e6)],'aproduct':ProductName});}}_0x3cb905['redirect'](_0x134219(0x1ac));}),module[a0_0x1de6aa(0x1ae)]=router;function a0_0x53c4(){const _0x37ee3f=['public/Migration/','69TnAtQX','status','address','suppliers_code','English\x20(US)','Sheets','multer','name','public/Migration','redirect','email','suppliers_docs','10JTksRF','purchase_return','supplier_product_file','Mobile_number','Arabic','then','\x20Failed','setHeader','\x20added\x20successfully','/supplier/view','body','exports','Company_Name','supplier_payment','filename','Content-Type','/supplier_import_migrate_file','findOne','SheetNames','json','/view/payment/:id','originalname','forEach','error','aggregate','s_payments','Name','$reason','95airjWu','language','11108KaGAJd','supplier.js\x20payment_data','Arabic\x20(ae)','now','write','Workbook','/products_export_migrate_file','payable','suppliers','send','data','render','379644IjIbmh','params','137526RQJptv','amount','7Avgfxc','find','Hindi','user','Portuguese','Spanish','PUnits','landline','Purchase','Portuguese\x20(BR)','xlsx','addWorksheet','English','readFile','Chinese','get','../public/language/languages.json','944273BztoDd','../middleware/auth','supplier\x20data\x20update\x20successfully','save','message','../models/all_models','receivable','French','PBrands','$amount','exceljs','flash','/view/:id','Email','attachment;\x20filename=supplier_Migration_File.xlsx','findById','errors','2608623zqSkrH','success','960304VNSjsA','supplier','801296oIApYg','master','supplier\x20data\x20add\x20successfully','mobile','German','single','SalesmanName','/view','log','receivable_sum','post','utils','Content-Disposition','payable_sum','columns'];a0_0x53c4=function(){return _0x37ee3f;};return a0_0x53c4();}