var a0_0x5df909=a0_0x3a43;(function(_0x2153ff,_0x3fdf4b){var _0x54453a=a0_0x3a43,_0x29ac1c=_0x2153ff();while(!![]){try{var _0x5c5d5d=parseInt(_0x54453a(0x1dc))/0x1+parseInt(_0x54453a(0x1d6))/0x2+-parseInt(_0x54453a(0x15c))/0x3+-parseInt(_0x54453a(0x212))/0x4*(-parseInt(_0x54453a(0x1de))/0x5)+-parseInt(_0x54453a(0x1b6))/0x6*(-parseInt(_0x54453a(0x1e9))/0x7)+parseInt(_0x54453a(0x1b9))/0x8+-parseInt(_0x54453a(0x24d))/0x9*(parseInt(_0x54453a(0x14b))/0xa);if(_0x5c5d5d===_0x3fdf4b)break;else _0x29ac1c['push'](_0x29ac1c['shift']());}catch(_0xd45b89){_0x29ac1c['push'](_0x29ac1c['shift']());}}}(a0_0x2c6b,0xa7f9b));const express=require(a0_0x5df909(0x153)),app=express(),router=express[a0_0x5df909(0x182)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,c_payment_data,email_settings,sales_finished,sales_return_finished,supervisor_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require(a0_0x5df909(0x1b1)),users=require('../public/language/languages.json');function a0_0x3a43(_0x2899c4,_0x17308a){var _0x2c6b7e=a0_0x2c6b();return a0_0x3a43=function(_0x3a43ab,_0x27eb72){_0x3a43ab=_0x3a43ab-0x142;var _0x59e341=_0x2c6b7e[_0x3a43ab];return _0x59e341;},a0_0x3a43(_0x2899c4,_0x17308a);}router[a0_0x5df909(0x233)]('/view',auth,async(_0x5dee5f,_0x29c655)=>{var _0x24d14d=a0_0x5df909;try{const {username:_0x345daa,email:_0x2ae70c,role:_0x2b5155}=_0x5dee5f[_0x24d14d(0x1f6)],_0x43ad56=_0x5dee5f[_0x24d14d(0x1f6)],_0x3d7424=await profile[_0x24d14d(0x1d5)]({'email':_0x43ad56[_0x24d14d(0x167)]}),_0xa641ab=await master_shop[_0x24d14d(0x1c0)]();let _0x20b5df;if(_0x43ad56[_0x24d14d(0x216)]==_0x24d14d(0x1bb)){const _0x2feb7b=await staff[_0x24d14d(0x1d5)]({'email':_0x43ad56[_0x24d14d(0x167)]});_0x20b5df=await sales_finished['aggregate']([{'$lookup':{'from':_0x24d14d(0x150),'localField':_0x24d14d(0x240),'foreignField':_0x24d14d(0x1a2),'as':_0x24d14d(0x20a)}},{'$unwind':_0x24d14d(0x1f3)},{'$unwind':_0x24d14d(0x1a3)},{'$group':{'_id':'$_id','invoice':{'$first':_0x24d14d(0x24e)},'customers':{'$first':_0x24d14d(0x1b4)},'date':{'$first':_0x24d14d(0x1cc)},'warehouse_name':{'$first':'$warehouse_name'},'sale_product':{'$push':_0x24d14d(0x1a3)},'note':{'$first':_0x24d14d(0x160)},'return_data':{'$first':_0x24d14d(0x1be)},'customers_docs':{'$first':_0x24d14d(0x1f3)},'total_saleproduct_quantity':{'$sum':'$sale_product.quantity'},'level':{'$addToSet':_0x24d14d(0x230)},'isle':{'$addToSet':_0x24d14d(0x225)},'type':{'$addToSet':_0x24d14d(0x198)},'pallet':{'$addToSet':_0x24d14d(0x1f9)},'finalize':{'$first':_0x24d14d(0x228)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);}else _0x20b5df=await sales_finished[_0x24d14d(0x1e6)]([{'$lookup':{'from':_0x24d14d(0x150),'localField':_0x24d14d(0x240),'foreignField':_0x24d14d(0x1a2),'as':_0x24d14d(0x20a)}},{'$unwind':_0x24d14d(0x1f3)},{'$unwind':_0x24d14d(0x1a3)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'customers':{'$first':_0x24d14d(0x1b4)},'date':{'$first':_0x24d14d(0x1cc)},'warehouse_name':{'$first':_0x24d14d(0x22c)},'sale_product':{'$push':'$sale_product'},'note':{'$first':_0x24d14d(0x160)},'return_data':{'$first':_0x24d14d(0x1be)},'customers_docs':{'$first':'$customers_docs'},'total_saleproduct_quantity':{'$sum':'$sale_product.quantity'},'level':{'$addToSet':_0x24d14d(0x230)},'isle':{'$addToSet':'$sale_product.bin'},'type':{'$addToSet':_0x24d14d(0x198)},'pallet':{'$addToSet':_0x24d14d(0x1f9)},'finalize':{'$first':'$finalize'}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);if(_0xa641ab[0x0]['language']=='English\x20(US)'){var _0x3439e6=users[_0x24d14d(0x217)];console[_0x24d14d(0x21b)](_0x3439e6);}else{if(_0xa641ab[0x0]['language']==_0x24d14d(0x1ab))var _0x3439e6=users[_0x24d14d(0x1ab)];else{if(_0xa641ab[0x0][_0x24d14d(0x238)]==_0x24d14d(0x169))var _0x3439e6=users[_0x24d14d(0x169)];else{if(_0xa641ab[0x0][_0x24d14d(0x238)]=='Spanish')var _0x3439e6=users[_0x24d14d(0x24c)];else{if(_0xa641ab[0x0][_0x24d14d(0x238)]==_0x24d14d(0x1db))var _0x3439e6=users['French'];else{if(_0xa641ab[0x0][_0x24d14d(0x238)]==_0x24d14d(0x250))var _0x3439e6=users['Portuguese'];else{if(_0xa641ab[0x0][_0x24d14d(0x238)]==_0x24d14d(0x23a))var _0x3439e6=users[_0x24d14d(0x23a)];else{if(_0xa641ab[0x0]['language']==_0x24d14d(0x183))var _0x3439e6=users[_0x24d14d(0x21a)];}}}}}}}_0x29c655[_0x24d14d(0x22e)](_0x24d14d(0x154),{'success':_0x5dee5f[_0x24d14d(0x19c)](_0x24d14d(0x249)),'errors':_0x5dee5f['flash'](_0x24d14d(0x163)),'sales':_0x20b5df,'profile':_0x3d7424,'role':_0x43ad56,'master_shop':_0xa641ab,'language':_0x3439e6});}catch(_0x2f347f){console[_0x24d14d(0x21b)](_0x2f347f);}});async function getRandom8DigitNumber(){var _0x3e4a83=a0_0x5df909;const _0xb86675=0x989680,_0x5e650d=0x5f5e0ff,_0x5a5713=Math[_0x3e4a83(0x242)](Math[_0x3e4a83(0x175)]()*(_0x5e650d-_0xb86675+0x1))+_0xb86675;var _0x26dec7;const _0x55a89f=await sales_finished[_0x3e4a83(0x1d5)]({'invoice':_0x3e4a83(0x24a)+_0x5a5713});return _0x55a89f&&_0x55a89f[_0x3e4a83(0x162)]>0x0?_0x26dec7='OUTF-'+_0x5a5713:_0x26dec7=_0x3e4a83(0x24a)+_0x5a5713,_0x26dec7;}router['get'](a0_0x5df909(0x14e),auth,async(_0x421a93,_0x3da491)=>{var _0x26b1ef=a0_0x5df909;try{const {username:_0x3d9ca9,email:_0x1ebd02,role:_0x125185}=_0x421a93[_0x26b1ef(0x1f6)],_0x400ca5=_0x421a93['user'],_0x194312=await profile[_0x26b1ef(0x1d5)]({'email':_0x400ca5[_0x26b1ef(0x167)]}),_0x4e8d0e=await master_shop[_0x26b1ef(0x1c0)](),_0x1e6296=await customer[_0x26b1ef(0x1c0)]({});let _0x54587b;if(_0x400ca5[_0x26b1ef(0x216)]=='staff'){const _0x4a4362=await staff[_0x26b1ef(0x1d5)]({'email':_0x400ca5['email']});_0x54587b=await warehouse[_0x26b1ef(0x1e6)]([{'$match':{'status':_0x26b1ef(0x1ac),'name':_0x4a4362[_0x26b1ef(0x151)],'warehouse_category':_0x26b1ef(0x18e),'name':{'$ne':_0x26b1ef(0x1c1)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]);}else _0x54587b=await warehouse[_0x26b1ef(0x1e6)]([{'$match':{'status':'Enabled','warehouse_category':_0x26b1ef(0x18e),'name':{'$ne':_0x26b1ef(0x1c1)}}},{'$group':{'_id':_0x26b1ef(0x200),'name':{'$first':_0x26b1ef(0x200)}}},{'$sort':{'name':0x1}}]);const _0x4aece1=await product[_0x26b1ef(0x1c0)]({});var _0x1d1c31=[_0x26b1ef(0x17c),_0x26b1ef(0x1e0)];const _0x317e74=await sales_finished[_0x26b1ef(0x1c0)]({}),_0x2fd217=_0x317e74[_0x26b1ef(0x162)]+0x1,_0x3a0268=_0x26b1ef(0x24a)+_0x2fd217[_0x26b1ef(0x205)]()[_0x26b1ef(0x186)](0x5,'0');if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]==_0x26b1ef(0x173)){var _0x22fd5b=users['English'];console[_0x26b1ef(0x21b)](_0x22fd5b);}else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]==_0x26b1ef(0x1ab))var _0x22fd5b=users[_0x26b1ef(0x1ab)];else{if(_0x4e8d0e[0x0]['language']==_0x26b1ef(0x169))var _0x22fd5b=users[_0x26b1ef(0x169)];else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]=='Spanish')var _0x22fd5b=users[_0x26b1ef(0x24c)];else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]==_0x26b1ef(0x1db))var _0x22fd5b=users[_0x26b1ef(0x1db)];else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]=='Portuguese\x20(BR)')var _0x22fd5b=users[_0x26b1ef(0x15a)];else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]==_0x26b1ef(0x23a))var _0x22fd5b=users['Chinese'];else{if(_0x4e8d0e[0x0][_0x26b1ef(0x238)]==_0x26b1ef(0x183))var _0x22fd5b=users[_0x26b1ef(0x21a)];}}}}}}}const _0x12850b=getRandom8DigitNumber();_0x12850b[_0x26b1ef(0x1f5)](_0x3b6683=>{var _0x3853d7=_0x26b1ef;_0x3da491[_0x3853d7(0x22e)](_0x3853d7(0x18b),{'success':_0x421a93[_0x3853d7(0x19c)](_0x3853d7(0x249)),'errors':_0x421a93[_0x3853d7(0x19c)](_0x3853d7(0x163)),'role':_0x400ca5,'profile':_0x194312,'customer':_0x1e6296,'warehouse':_0x54587b,'product':_0x4aece1,'invoice':_0x3b6683,'master_shop':_0x4e8d0e,'language':_0x22fd5b,'rooms_data':_0x1d1c31});})[_0x26b1ef(0x159)](_0xf7b6e7=>{var _0x5675f7=_0x26b1ef;_0x421a93[_0x5675f7(0x19c)](_0x5675f7(0x163),_0x5675f7(0x1f8)),_0x3da491['redirect'](_0x5675f7(0x156));});}catch(_0xe1638c){console[_0x26b1ef(0x21b)](_0xe1638c);}}),router[a0_0x5df909(0x233)](a0_0x5df909(0x1e4),auth,async(_0x132b12,_0x2df8d9)=>{var _0x157c2d=a0_0x5df909;try{const _0x2f6ee6=_0x132b12[_0x157c2d(0x158)]['id'];console[_0x157c2d(0x21b)](_0x2f6ee6);const _0x329dc4=await product[_0x157c2d(0x1c0)](),_0x1fd137=await purchases[_0x157c2d(0x1e6)]([{'$match':{'warehouse_name':_0x2f6ee6}},{'$unwind':_0x157c2d(0x172)},{'$group':{'_id':'$product.product_name'}}]);console[_0x157c2d(0x21b)](_0x157c2d(0x1f2),_0x1fd137),_0x2df8d9[_0x157c2d(0x14f)](0xc8)['json']({'purchases_data':_0x1fd137,'product_data':_0x329dc4});}catch(_0x4340a6){console['log'](_0x4340a6);}}),router[a0_0x5df909(0x21f)]('/view/add_sale/product',auth,async(_0x3fe6d1,_0x1b2254)=>{var _0x3368a7=a0_0x5df909;try{const {warehouse_data:_0x351fea,product_data:_0x2580d8}=_0x3fe6d1[_0x3368a7(0x1c3)];console[_0x3368a7(0x21b)](_0x3fe6d1[_0x3368a7(0x1c3)]['product_data']);;const _0xdb9b43=await master_shop[_0x3368a7(0x1c0)]();console['log'](_0x3368a7(0x1c7),_0xdb9b43);const _0x568f94=await product[_0x3368a7(0x1d5)]({'name':_0x2580d8});console[_0x3368a7(0x21b)](_0x3368a7(0x208),_0x568f94);const _0x334d59=await warehouse['aggregate']([{'$match':{'name':_0x351fea}},{'$unwind':_0x3368a7(0x15b)},{'$match':{'product_details.product_name':_0x2580d8}},{'$group':{'_id':_0x3368a7(0x1e5),'product_stock':{'$first':_0x3368a7(0x1ae)}}}]);console[_0x3368a7(0x21b)](_0x3368a7(0x20f),_0x334d59),_0x1b2254['status'](0xc8)['json']({'master':_0xdb9b43,'new_product':_0x568f94,'stock_data':_0x334d59});}catch(_0x4c0fc8){console[_0x3368a7(0x21b)](_0x4c0fc8);}}),router[a0_0x5df909(0x21f)](a0_0x5df909(0x14e),auth,async(_0x400294,_0x2959a4)=>{var _0x18f50b=a0_0x5df909;try{const {invoice:_0x50c9e0,date:_0x5b138d,warehouse_name:_0xafb6c1,product_name:_0x5c3753,stock:_0x271cb8,quantity:_0x2bfb4b,note:_0x1be471,room:_0x44eddd,primary_code:_0xe9eb9d,secondary_code:_0x449bf7,prod_code:_0x457b77,level:_0x2f72b3,isle:_0x5e2061,pallet:_0x676a27,batch_code:_0x5b5693,SCRN:_0x1267b6,expiry_date:_0x2dc2c1,mode_transpo:_0x2f87b9,name_driver:_0x33ced0}=_0x400294['body'];if(typeof _0x5c3753==_0x18f50b(0x164))var _0x33f984=[_0x400294[_0x18f50b(0x1c3)]['product_name']],_0x2313bf=[_0x400294[_0x18f50b(0x1c3)]['stock']],_0x824622=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x17d)]],_0x426a94=[_0x400294[_0x18f50b(0x1c3)]['primary_code']],_0x2ef892=[_0x400294[_0x18f50b(0x1c3)]['secondary_code']],_0x3bae91=[_0x400294['body'][_0x18f50b(0x1a9)]],_0x449db3=[_0x400294[_0x18f50b(0x1c3)]['level']],_0x2ee31f=[_0x400294['body'][_0x18f50b(0x201)]],_0xe36934=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x1a7)]],_0x2bf243=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x1a6)]],_0x11a9cb=[_0x400294['body']['expiry_date']],_0x5b4250=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x245)]],_0x36857c=[_0x400294['body']['max_per_unit']],_0x596ac3=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x24b)]],_0x20941a=[_0x400294['body'][_0x18f50b(0x237)]],_0x47581e=[_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x179)]];else var _0x33f984=[..._0x400294['body']['product_name']],_0x2313bf=[..._0x400294[_0x18f50b(0x1c3)]['stock']],_0x824622=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x17d)]],_0x426a94=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x19e)]],_0x2ef892=[..._0x400294['body'][_0x18f50b(0x243)]],_0x3bae91=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x1a9)]],_0x449db3=[..._0x400294[_0x18f50b(0x1c3)]['level']],_0x2ee31f=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x201)]],_0xe36934=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x1a7)]],_0x2bf243=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x1a6)]],_0x11a9cb=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x196)]],_0x5b4250=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x245)]],_0x36857c=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x184)]],_0x596ac3=[..._0x400294['body'][_0x18f50b(0x24b)]],_0x20941a=[..._0x400294['body'][_0x18f50b(0x237)]],_0x47581e=[..._0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x179)]];const _0x34bfef=_0x33f984[_0x18f50b(0x251)](_0x1a2cab=>{return _0x1a2cab={'product_name':_0x1a2cab};});_0x2313bf['forEach']((_0x3a07fe,_0x39abb3)=>{_0x34bfef[_0x39abb3]['stock']=_0x3a07fe;}),_0x824622['forEach']((_0x4532ac,_0x1a7777)=>{var _0x34b637=_0x18f50b;_0x34bfef[_0x1a7777][_0x34b637(0x218)]=_0x4532ac;}),_0x426a94[_0x18f50b(0x211)]((_0x492287,_0x3bc6f9)=>{var _0x28af5b=_0x18f50b;_0x34bfef[_0x3bc6f9][_0x28af5b(0x19e)]=_0x492287;}),_0x2ef892[_0x18f50b(0x211)]((_0x158388,_0x2346ae)=>{var _0x150f96=_0x18f50b;_0x34bfef[_0x2346ae][_0x150f96(0x243)]=_0x158388;}),_0x3bae91[_0x18f50b(0x211)]((_0xfe8ea4,_0x3bc579)=>{var _0x260d18=_0x18f50b;_0x34bfef[_0x3bc579][_0x260d18(0x19a)]=_0xfe8ea4;}),_0x449db3['forEach']((_0x4b7ba4,_0x45a1fa)=>{var _0x8976=_0x18f50b;_0x34bfef[_0x45a1fa][_0x8976(0x15f)]=_0x4b7ba4;}),_0x2ee31f[_0x18f50b(0x211)]((_0x182403,_0x208c88)=>{var _0x36b275=_0x18f50b;_0x34bfef[_0x208c88][_0x36b275(0x142)]=_0x182403;}),_0xe36934[_0x18f50b(0x211)]((_0xaee8bf,_0x50c2fb)=>{var _0xa15b06=_0x18f50b;_0x34bfef[_0x50c2fb][_0xa15b06(0x1a7)]=_0xaee8bf;}),_0x2bf243[_0x18f50b(0x211)]((_0x504564,_0x2a68b)=>{var _0x3bac30=_0x18f50b;_0x34bfef[_0x2a68b][_0x3bac30(0x1a6)]=_0x504564;}),_0x11a9cb[_0x18f50b(0x211)]((_0x1e7bb2,_0xb1b715)=>{var _0x32e43c=_0x18f50b;_0x34bfef[_0xb1b715][_0x32e43c(0x196)]=_0x1e7bb2;}),_0x5b4250['forEach']((_0xbf9817,_0x4d45bb)=>{var _0x1c6f98=_0x18f50b;_0x34bfef[_0x4d45bb][_0x1c6f98(0x244)]=_0xbf9817;}),_0x36857c['forEach']((_0x2af9f8,_0xf35763)=>{var _0xa9515d=_0x18f50b;_0x34bfef[_0xf35763][_0xa9515d(0x22b)]=_0x2af9f8;}),_0x596ac3[_0x18f50b(0x211)]((_0x28b549,_0x58330a)=>{var _0x7934f4=_0x18f50b;_0x34bfef[_0x58330a][_0x7934f4(0x24b)]=_0x28b549;}),_0x20941a[_0x18f50b(0x211)]((_0x8594bd,_0x3642fb)=>{var _0x44981c=_0x18f50b;_0x34bfef[_0x3642fb][_0x44981c(0x185)]=_0x8594bd;}),_0x47581e[_0x18f50b(0x211)]((_0x1f43bb,_0x422549)=>{var _0x517c94=_0x18f50b;_0x34bfef[_0x422549][_0x517c94(0x22a)]=_0x1f43bb;});var _0x5dcf76=0x0;_0x34bfef[_0x18f50b(0x211)](_0xa6a937=>{var _0x3d028b=_0x18f50b;console[_0x3d028b(0x21b)]('foreach\x20newproduct',_0xa6a937),(parseInt(_0xa6a937[_0x3d028b(0x146)])<parseInt(_0xa6a937[_0x3d028b(0x218)])||parseInt(_0xa6a937['quantity'])==0x0)&&_0x5dcf76++;});if(_0x5dcf76!=0x0)return _0x400294[_0x18f50b(0x19c)](_0x18f50b(0x163),_0x18f50b(0x1c4)),_0x2959a4[_0x18f50b(0x241)](_0x18f50b(0x16a));const _0xe34622=_0x34bfef['filter'](_0x866a6d=>_0x866a6d['quantity']!=='0'&&_0x866a6d['quantity']!==''),_0x4411a1=new sales_finished({'invoice':_0x50c9e0,'customer':_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x240)],'date':_0x5b138d,'warehouse_name':_0xafb6c1,'sale_product':_0xe34622,'note':_0x1be471,'room':_0x44eddd,'primary_code':_0xe9eb9d,'secondary_code':_0x449bf7,'prod_code':_0x457b77,'SCRN':_0x1267b6,'finalize':'False','mode_transpo':_0x2f87b9,'name_driver':_0x33ced0}),_0x2b32ac=await _0x4411a1['save'](),_0x86efa9=await sales_finished['findOne']({'invoice':_0x50c9e0}),_0x59fc32=new c_payment_data({'invoice':_0x50c9e0,'customer':_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x240)],'reason':'Sale'});await _0x59fc32[_0x18f50b(0x188)]();const _0x49b29b=await master_shop[_0x18f50b(0x1c0)](),_0x3575d4=await email_settings[_0x18f50b(0x1d5)](),_0x247161=await customer['findOne']({'name':_0x400294[_0x18f50b(0x1c3)][_0x18f50b(0x240)]});_0x49b29b[0x0]['currency_placement']==0x1?(right_currency=_0x49b29b[0x0][_0x18f50b(0x16b)],left_currency=''):(right_currency='',left_currency=_0x49b29b[0x0][_0x18f50b(0x16b)]);var _0x560348=_0x33f984,_0x22a953=_0x824622,_0x4fc23b='',_0x15f86a;for(_0x15f86a in _0x560348){_0x4fc23b+='<tr>'+_0x18f50b(0x18a)+_0x560348[_0x15f86a]+'</td>'+_0x18f50b(0x18a)+_0x22a953[_0x15f86a]+_0x18f50b(0x206)+_0x18f50b(0x20c);}console['log'](_0x18f50b(0x18d),_0x4fc23b);let _0x2546aa=nodemailer[_0x18f50b(0x207)]({'service':'gmail','auth':{'user':_0x3575d4['email'],'pass':_0x3575d4[_0x18f50b(0x1e3)]}}),_0xe5320b={'from':_0x3575d4['email'],'to':_0x247161[_0x18f50b(0x167)],'subject':_0x18f50b(0x221),'attachments':[{'filename':_0x18f50b(0x246),'path':__dirname+_0x18f50b(0x23e)+_0x18f50b(0x157)+_0x49b29b[0x0]['image'],'cid':_0x18f50b(0x17b)}],'html':_0x18f50b(0x18c)+'<html><head><title></title>'+_0x18f50b(0x1da)+_0x18f50b(0x1bd)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x18f50b(0x155)+_0x18f50b(0x24f)+_0x18f50b(0x1bd)+'<h2>\x20'+_0x49b29b[0x0]['site_title']+_0x18f50b(0x23f)+_0x18f50b(0x24f)+_0x18f50b(0x24f)+_0x18f50b(0x14a)+_0x18f50b(0x1bd)+_0x18f50b(0x1fc)+'\x20Order\x20Number\x20:\x20'+_0x50c9e0+'\x20'+_0x18f50b(0x1fb)+_0x18f50b(0x1a1)+_0x5b138d+'\x20'+_0x18f50b(0x1d8)+_0x18f50b(0x145)+_0x18f50b(0x24f)+_0x18f50b(0x165)+_0x18f50b(0x1ed)+'<tr>'+_0x18f50b(0x213)+_0x18f50b(0x161)+_0x18f50b(0x20c)+_0x18f50b(0x191)+_0x18f50b(0x181)+'\x20'+_0x4fc23b+'\x20'+_0x18f50b(0x1c2)+_0x18f50b(0x19b)+_0x18f50b(0x1bd)+_0x18f50b(0x248)+'<h5>'+_0x49b29b[0x0][_0x18f50b(0x209)]+'</h5>'+_0x18f50b(0x24f)+_0x18f50b(0x24f)+_0x18f50b(0x1cd)};_0x2546aa[_0x18f50b(0x1d2)](_0xe5320b,function(_0x5697eb,_0x44b878){var _0x153ea1=_0x18f50b;_0x5697eb?(console[_0x153ea1(0x21b)](_0x5697eb),console[_0x153ea1(0x21b)]('Error\x20Occurs')):console[_0x153ea1(0x21b)](_0x153ea1(0x1d9));}),_0x400294[_0x18f50b(0x19c)](_0x18f50b(0x249),_0x18f50b(0x1fe)),_0x2959a4[_0x18f50b(0x241)](_0x18f50b(0x1f4)+_0x2b32ac['_id']);}catch(_0x1f157f){console[_0x18f50b(0x21b)](_0x1f157f);}}),router[a0_0x5df909(0x233)](a0_0x5df909(0x189),auth,async(_0x1c407f,_0x8b77)=>{var _0x11c046=a0_0x5df909;try{const {username:_0xe068df,email:_0x44830b,role:_0x4ecc36}=_0x1c407f[_0x11c046(0x1f6)],_0x122a8d=_0x1c407f[_0x11c046(0x1f6)],_0x38214e=await profile[_0x11c046(0x1d5)]({'email':_0x122a8d['email']}),_0x508dbd=await master_shop[_0x11c046(0x1c0)](),_0x583afe=_0x1c407f[_0x11c046(0x158)]['id'],_0x7d7e32=await sales_finished[_0x11c046(0x193)](_0x583afe),_0x951449=await warehouse['aggregate']([{'$match':{'name':_0x7d7e32[_0x11c046(0x1a8)]}},{'$unwind':_0x11c046(0x15b)},{'$group':{'_id':_0x11c046(0x1a5),'name':{'$first':_0x11c046(0x1e5)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x11c046(0x21c)},'bin':{'$first':_0x11c046(0x1c5)},'type':{'$first':_0x11c046(0x199)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x11c046(0x220)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x11c046(0x1c6)},'storage':{'$first':_0x11c046(0x1ca)},'rack':{'$first':_0x11c046(0x23b)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x11c046(0x14c)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x11c046(0x17f)}}}]),_0x3bba24=await customer[_0x11c046(0x1c0)]({});let _0x440f34;if(_0x122a8d['role']==_0x11c046(0x1bb)){const _0x3319a6=await staff[_0x11c046(0x1d5)]({'email':_0x122a8d[_0x11c046(0x167)]});_0x440f34=await warehouse['aggregate']([{'$match':{'status':_0x11c046(0x1ac),'name':_0x3319a6[_0x11c046(0x151)]}},{'$group':{'_id':_0x11c046(0x200),'name':{'$first':_0x11c046(0x200)}}}]);}else _0x440f34=await warehouse[_0x11c046(0x1e6)]([{'$match':{'status':_0x11c046(0x1ac)}},{'$group':{'_id':_0x11c046(0x200),'name':{'$first':_0x11c046(0x200)}}}]);const _0x375975=await product[_0x11c046(0x1c0)]({});if(_0x508dbd[0x0][_0x11c046(0x238)]=='English\x20(US)'){var _0xaabe42=users[_0x11c046(0x217)];console[_0x11c046(0x21b)](_0xaabe42);}else{if(_0x508dbd[0x0]['language']==_0x11c046(0x1ab))var _0xaabe42=users[_0x11c046(0x1ab)];else{if(_0x508dbd[0x0][_0x11c046(0x238)]==_0x11c046(0x169))var _0xaabe42=users[_0x11c046(0x169)];else{if(_0x508dbd[0x0][_0x11c046(0x238)]==_0x11c046(0x24c))var _0xaabe42=users[_0x11c046(0x24c)];else{if(_0x508dbd[0x0]['language']==_0x11c046(0x1db))var _0xaabe42=users[_0x11c046(0x1db)];else{if(_0x508dbd[0x0][_0x11c046(0x238)]==_0x11c046(0x250))var _0xaabe42=users[_0x11c046(0x15a)];else{if(_0x508dbd[0x0][_0x11c046(0x238)]==_0x11c046(0x23a))var _0xaabe42=users[_0x11c046(0x23a)];else{if(_0x508dbd[0x0][_0x11c046(0x238)]=='Arabic\x20(ae)')var _0xaabe42=users['Arabic'];}}}}}}}_0x8b77[_0x11c046(0x22e)](_0x11c046(0x16f),{'success':_0x1c407f[_0x11c046(0x19c)](_0x11c046(0x249)),'errors':_0x1c407f['flash'](_0x11c046(0x163)),'role':_0x122a8d,'profile':_0x38214e,'customer':_0x3bba24,'warehouse':_0x440f34,'product':_0x951449,'user':_0x7d7e32,'master_shop':_0x508dbd,'unit':_0x375975,'language':_0xaabe42});}catch(_0x535c86){console[_0x11c046(0x21b)](_0x535c86);}}),router[a0_0x5df909(0x21f)](a0_0x5df909(0x189),auth,async(_0x50bd64,_0x3fecd0)=>{var _0x5b55fe=a0_0x5df909;try{const _0x351f6e=_0x50bd64[_0x5b55fe(0x158)]['id'],{invoice:_0x261b23,warehouse_name:_0x1e8e18,room:_0x13768d}=_0x50bd64[_0x5b55fe(0x1c3)],_0x3ae7eb=await sales_finished[_0x5b55fe(0x1d5)]({'invoice':_0x261b23}),_0x1aa7a6=_0x3ae7eb[_0x5b55fe(0x17e)][_0x5b55fe(0x251)](async _0x25d5dd=>{var _0x15b8d5=_0x5b55fe,_0x3a494c=await warehouse[_0x15b8d5(0x1d5)]({'name':_0x1e8e18,'room':_0x25d5dd['room_name'],'warehouse_category':'Finished\x20Goods'});const _0x59acf1=_0x3a494c[_0x15b8d5(0x1bc)][_0x15b8d5(0x251)](_0x1fbc59=>{var _0x2d47ec=_0x15b8d5;_0x1fbc59[_0x2d47ec(0x16e)]==_0x25d5dd['product_name']&&_0x1fbc59[_0x2d47ec(0x15f)]==_0x25d5dd[_0x2d47ec(0x15f)]&&_0x1fbc59[_0x2d47ec(0x196)]==_0x25d5dd['expiry_date']&&_0x1fbc59[_0x2d47ec(0x244)]==_0x25d5dd[_0x2d47ec(0x244)]&&_0x1fbc59[_0x2d47ec(0x1a6)]==_0x25d5dd[_0x2d47ec(0x1a6)]&&_0x1fbc59[_0x2d47ec(0x22a)]==_0x25d5dd['invoice']&&(_0x1fbc59['product_stock']=_0x1fbc59[_0x2d47ec(0x1df)]-_0x25d5dd[_0x2d47ec(0x218)]);});return _0x3a494c;});Promise[_0x5b55fe(0x149)](_0x1aa7a6)[_0x5b55fe(0x1f5)](async _0x57cf36=>{var _0xb09ed6=_0x5b55fe;try{for(const _0x2e7c9d of _0x57cf36){await _0x2e7c9d[_0xb09ed6(0x188)]();}_0x3ae7eb['finalize']=_0xb09ed6(0x17a);const _0x1a8f41=await _0x3ae7eb[_0xb09ed6(0x188)](),_0x49f12e=await master_shop[_0xb09ed6(0x1c0)](),_0xf4f091=await email_settings['findOne'](),_0x278aa8=await supervisor_settings[_0xb09ed6(0x1c0)]();var _0x1b781c=_0x3ae7eb[_0xb09ed6(0x17e)],_0x546650='',_0x3ca1fe;for(_0x3ca1fe in _0x1b781c){var _0x275d6c='FG';_0x3ae7eb[_0xb09ed6(0x1a8)]==_0xb09ed6(0x1fa)&&(_0x275d6c='DG'),_0x546650+=_0xb09ed6(0x1b7)+_0xb09ed6(0x18a)+_0x1b781c[_0x3ca1fe][_0xb09ed6(0x16e)]+_0xb09ed6(0x206)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1b781c[_0x3ca1fe][_0xb09ed6(0x19a)]+_0xb09ed6(0x206)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1b781c[_0x3ca1fe]['quantity']+_0xb09ed6(0x206)+_0xb09ed6(0x18a)+_0x1b781c[_0x3ca1fe]['unit']+_0xb09ed6(0x206)+_0xb09ed6(0x18a)+_0x1b781c[_0x3ca1fe][_0xb09ed6(0x1a7)]+_0xb09ed6(0x206)+_0xb09ed6(0x18a)+_0x3ae7eb[_0xb09ed6(0x1a8)]+'</td>'+_0xb09ed6(0x18a)+_0x1b781c[_0x3ca1fe][_0xb09ed6(0x185)]+_0xb09ed6(0x206)+_0xb09ed6(0x18a)+_0x275d6c+_0x1b781c[_0x3ca1fe][_0xb09ed6(0x15f)]+'</td>';}let _0x416c04=nodemailer[_0xb09ed6(0x207)]({'host':_0xf4f091[_0xb09ed6(0x1ec)],'port':Number(_0xf4f091['port']),'secure':![],'auth':{'user':_0xf4f091[_0xb09ed6(0x167)],'pass':_0xf4f091[_0xb09ed6(0x1e3)]}}),_0x2d2ae5={'from':_0xf4f091['email'],'to':_0x278aa8[0x0][_0xb09ed6(0x15d)],'subject':_0xb09ed6(0x19f),'attachments':[{'filename':_0xb09ed6(0x246),'path':__dirname+'/../public'+_0xb09ed6(0x157)+_0x49f12e[0x0][_0xb09ed6(0x23c)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+'</head><body>'+_0xb09ed6(0x1bd)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0xb09ed6(0x1bd)+_0xb09ed6(0x155)+_0xb09ed6(0x24f)+_0xb09ed6(0x1bd)+_0xb09ed6(0x223)+_0x49f12e[0x0]['site_title']+'\x20</h2>'+_0xb09ed6(0x24f)+_0xb09ed6(0x24f)+_0xb09ed6(0x14a)+_0xb09ed6(0x1bd)+_0xb09ed6(0x1fc)+_0xb09ed6(0x190)+_0x3ae7eb[_0xb09ed6(0x22a)]+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0xb09ed6(0x1a1)+_0x3ae7eb[_0xb09ed6(0x1ad)]+'\x20'+_0xb09ed6(0x1d8)+_0xb09ed6(0x145)+_0xb09ed6(0x24f)+_0xb09ed6(0x165)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0xb09ed6(0x1b7)+_0xb09ed6(0x213)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0xb09ed6(0x210)+_0xb09ed6(0x1d0)+_0xb09ed6(0x1e1)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0xb09ed6(0x21d)+_0xb09ed6(0x178)+_0xb09ed6(0x20c)+_0xb09ed6(0x191)+_0xb09ed6(0x181)+'\x20'+_0x546650+'\x20'+'</tbody>'+_0xb09ed6(0x19b)+_0xb09ed6(0x1bd)+_0xb09ed6(0x248)+_0xb09ed6(0x1f0)+_0x49f12e[0x0][_0xb09ed6(0x209)]+_0xb09ed6(0x145)+_0xb09ed6(0x24f)+_0xb09ed6(0x24f)+_0xb09ed6(0x1cd)};_0x416c04['sendMail'](_0x2d2ae5,function(_0x2d1e86,_0x166f24){var _0x3bd53b=_0xb09ed6;_0x2d1e86?(console[_0x3bd53b(0x21b)](_0x2d1e86),console['log'](_0x3bd53b(0x16d))):console[_0x3bd53b(0x21b)](_0x3bd53b(0x1d9));}),_0x50bd64[_0xb09ed6(0x19c)](_0xb09ed6(0x249),_0xb09ed6(0x143)),_0x3fecd0[_0xb09ed6(0x241)]('/picking_list/pdf/'+_0x351f6e);}catch(_0x1e9261){console[_0xb09ed6(0x1af)](_0x1e9261),_0x3fecd0[_0xb09ed6(0x14f)](0x1f4)[_0xb09ed6(0x1ba)]({'error':_0xb09ed6(0x235)});}})[_0x5b55fe(0x159)](_0xbdf3d4=>{var _0x2d0251=_0x5b55fe;console['error'](_0xbdf3d4),_0x3fecd0[_0x2d0251(0x14f)](0x1f4)[_0x2d0251(0x1ba)]({'error':_0x2d0251(0x1eb)});});}catch(_0x60cc32){console[_0x5b55fe(0x21b)](_0x60cc32);}}),router[a0_0x5df909(0x233)](a0_0x5df909(0x187),auth,async(_0xd05c12,_0x22db3a)=>{var _0x1c4535=a0_0x5df909;try{const {username:_0x31d9a0,email:_0x49e592,role:_0x4812bd}=_0xd05c12['user'],_0x120aea=_0xd05c12[_0x1c4535(0x1f6)],_0x527699=await profile[_0x1c4535(0x1d5)]({'email':_0x120aea[_0x1c4535(0x167)]}),_0x5dee50=await master_shop['find'](),_0x5c251c=_0xd05c12[_0x1c4535(0x158)]['id'],_0x2a0989=await sales_finished['findById'](_0x5c251c);let _0x331217=new Date(_0x2a0989[_0x1c4535(0x196)]),_0x5cb0db=('0'+_0x331217[_0x1c4535(0x166)]())[_0x1c4535(0x1b8)](-0x2),_0x4f7c43=('0'+(_0x331217['getMonth']()+0x1))[_0x1c4535(0x1b8)](-0x2),_0x154606=_0x331217[_0x1c4535(0x19d)](),_0x49a305=_0x154606+'-'+_0x4f7c43+'-'+_0x5cb0db;var _0x3e57b9=[_0x1c4535(0x17c),_0x1c4535(0x1e0)];const _0x546c90=await warehouse[_0x1c4535(0x1e6)]([{'$match':{'name':_0x2a0989[_0x1c4535(0x1a8)],'room':_0x2a0989['room']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1c4535(0x1e5)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x1c4535(0x1c5)},'type':{'$first':_0x1c4535(0x199)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1c4535(0x194)},'product_code':{'$first':_0x1c4535(0x1c6)},'storage':{'$first':_0x1c4535(0x1ca)},'rack':{'$first':_0x1c4535(0x23b)}}}]),_0x3c93a6=await customer[_0x1c4535(0x1c0)]({});let _0x28321e;if(_0x120aea[_0x1c4535(0x216)]==_0x1c4535(0x1bb)){const _0x33be96=await staff[_0x1c4535(0x1d5)]({'email':_0x120aea['email']});_0x28321e=await warehouse[_0x1c4535(0x1e6)]([{'$match':{'status':_0x1c4535(0x1ac),'name':_0x33be96[_0x1c4535(0x151)]}},{'$group':{'_id':'$name','name':{'$first':_0x1c4535(0x200)}}}]);}else _0x28321e=await warehouse['aggregate']([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0x1c4535(0x200)}}}]);const _0x4e2d03=await product[_0x1c4535(0x1c0)]({});if(_0x5dee50[0x0][_0x1c4535(0x238)]==_0x1c4535(0x173)){var _0x1a8e0f=users['English'];console[_0x1c4535(0x21b)](_0x1a8e0f);}else{if(_0x5dee50[0x0][_0x1c4535(0x238)]==_0x1c4535(0x1ab))var _0x1a8e0f=users['Hindi'];else{if(_0x5dee50[0x0][_0x1c4535(0x238)]=='German')var _0x1a8e0f=users[_0x1c4535(0x169)];else{if(_0x5dee50[0x0]['language']==_0x1c4535(0x24c))var _0x1a8e0f=users['Spanish'];else{if(_0x5dee50[0x0][_0x1c4535(0x238)]=='French')var _0x1a8e0f=users[_0x1c4535(0x1db)];else{if(_0x5dee50[0x0]['language']==_0x1c4535(0x250))var _0x1a8e0f=users['Portuguese'];else{if(_0x5dee50[0x0]['language']==_0x1c4535(0x23a))var _0x1a8e0f=users['Chinese'];else{if(_0x5dee50[0x0]['language']==_0x1c4535(0x183))var _0x1a8e0f=users['Arabic'];}}}}}}}_0x22db3a[_0x1c4535(0x22e)](_0x1c4535(0x20b),{'success':_0xd05c12['flash'](_0x1c4535(0x249)),'errors':_0xd05c12[_0x1c4535(0x19c)]('errors'),'role':_0x120aea,'profile':_0x527699,'customer':_0x3c93a6,'warehouse':_0x28321e,'product':_0x546c90,'user':_0x2a0989,'master_shop':_0x5dee50,'unit':_0x4e2d03,'language':_0x1a8e0f,'rooms_data':_0x3e57b9,'ed_fullDate':_0x49a305});}catch(_0x1fbc09){console[_0x1c4535(0x21b)](_0x1fbc09);}}),router['post'](a0_0x5df909(0x187),auth,async(_0x580ffe,_0x14199d)=>{var _0x930e24=a0_0x5df909;try{const _0x458e37=_0x580ffe[_0x930e24(0x158)]['id'],_0x57e2db=await sales_finished[_0x930e24(0x1d5)]({'_id':_0x580ffe[_0x930e24(0x158)]['id']}),_0x437a9e=await warehouse[_0x930e24(0x1d5)]({'name':_0x57e2db[_0x930e24(0x1a8)],'room':_0x580ffe[_0x930e24(0x1c3)]['room'],'warehouse_category':_0x930e24(0x18e)}),{invoice:_0x1156c4,customer:_0x41c34f,date:_0x4b74b1,warehouse_name:_0x3f38b9,product_name:_0x2d0978,stock:_0x22135b,adjust_qty:_0x45b0f6,note:_0x2969fc,room:_0x56e9dc,primary_code:_0xc9c27d,secondary_code:_0x44f0f4,prod_code:_0x14dce3,level:_0x3bc631,isle:_0x508ce0,pallet:_0xd2bd2a,expiry_date:_0x48f477}=_0x580ffe['body'];if(typeof _0x2d0978==_0x930e24(0x164))var _0x1d174c=[_0x580ffe[_0x930e24(0x1c3)]['product_name']],_0x14f8b3=[_0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x146)]],_0x591aa6=[_0x580ffe[_0x930e24(0x1c3)]['adjust_qty']],_0xed7e4d=[_0x580ffe['body'][_0x930e24(0x19e)]],_0x370cae=[_0x580ffe['body'][_0x930e24(0x243)]],_0x518d9c=[_0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x1a9)]],_0x3be364=[_0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x1b2)]],_0xedf886=[_0x580ffe['body'][_0x930e24(0x196)]];else var _0x1d174c=[..._0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x16e)]],_0x14f8b3=[..._0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x146)]],_0x591aa6=[..._0x580ffe['body']['adjust_qty']],_0xed7e4d=[..._0x580ffe['body'][_0x930e24(0x19e)]],_0x370cae=[..._0x580ffe['body']['secondary_code']],_0x518d9c=[..._0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x1a9)]],_0x3be364=[..._0x580ffe['body'][_0x930e24(0x1b2)]],_0xedf886=[..._0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x196)]];const _0x26340e=_0x1d174c['map'](_0x20dc40=>{return _0x20dc40={'product_name':_0x20dc40};});_0x14f8b3['forEach']((_0x507fb1,_0xed322)=>{var _0x1b776c=_0x930e24;_0x26340e[_0xed322][_0x1b776c(0x146)]=_0x507fb1;}),_0x591aa6[_0x930e24(0x211)]((_0x1b22a9,_0x206627)=>{_0x26340e[_0x206627]['quantity']=_0x1b22a9;}),_0xed7e4d[_0x930e24(0x211)]((_0x41afa1,_0x487606)=>{_0x26340e[_0x487606]['primary_code']=_0x41afa1;}),_0x370cae['forEach']((_0x4a536a,_0x42a3cc)=>{var _0x55140a=_0x930e24;_0x26340e[_0x42a3cc][_0x55140a(0x243)]=_0x4a536a;}),_0x518d9c[_0x930e24(0x211)]((_0x2e0aba,_0x2715b4)=>{_0x26340e[_0x2715b4]['product_code']=_0x2e0aba;}),_0x3be364[_0x930e24(0x211)]((_0x4d5e2b,_0x3d5b18)=>{var _0x4d70f4=_0x930e24;_0x26340e[_0x3d5b18][_0x4d70f4(0x1b2)]=_0x4d5e2b;}),_0xedf886['forEach']((_0x576477,_0x3a18be)=>{var _0x1c7b4c=_0x930e24;_0x26340e[_0x3a18be][_0x1c7b4c(0x196)]=_0x576477;});var _0x1ff201=0x0;_0x26340e[_0x930e24(0x211)](_0x13009a=>{var _0x35e9a7=_0x930e24;console[_0x35e9a7(0x21b)](_0x35e9a7(0x1f1),_0x13009a),(parseInt(_0x13009a['stock'])<parseInt(_0x13009a[_0x35e9a7(0x218)])||parseInt(_0x13009a[_0x35e9a7(0x218)])==0x0)&&_0x1ff201++;});if(_0x1ff201!=0x0)return _0x580ffe[_0x930e24(0x19c)](_0x930e24(0x163),_0x930e24(0x1c4)),_0x14199d[_0x930e24(0x241)](_0x930e24(0x16a));_0x57e2db[_0x930e24(0x17e)][_0x930e24(0x211)](_0x24f543=>{var _0x3ccac3=_0x930e24;const _0x400434=_0x437a9e[_0x3ccac3(0x1bc)][_0x3ccac3(0x251)](_0x3f0d69=>{var _0x48ff68=_0x3ccac3;_0x3f0d69[_0x48ff68(0x16e)]==_0x24f543[_0x48ff68(0x16e)]&&_0x3f0d69[_0x48ff68(0x15f)]==_0x24f543[_0x48ff68(0x15f)]&&(_0x3f0d69[_0x48ff68(0x1df)]=parseInt(_0x3f0d69[_0x48ff68(0x1df)])+parseInt(_0x24f543['quantity']));});}),await _0x437a9e[_0x930e24(0x188)]();const _0x2ee6f9=_0x26340e[_0x930e24(0x22d)](_0x53eca5=>_0x53eca5[_0x930e24(0x218)]!=='0'&&_0x53eca5[_0x930e24(0x218)]!=='');_0x57e2db[_0x930e24(0x22a)]=_0x1156c4,_0x57e2db[_0x930e24(0x240)]=_0x41c34f,_0x57e2db['date']=_0x4b74b1,_0x57e2db['warehouse_name']=_0x3f38b9,_0x57e2db['sale_product']=_0x2ee6f9,_0x57e2db[_0x930e24(0x219)]=_0x2969fc,_0x57e2db[_0x930e24(0x1ee)]=_0x56e9dc;const _0x3c8dc2=await _0x57e2db['save'](),_0x3154b7=await sales_finished[_0x930e24(0x1d5)]({'_id':_0x580ffe[_0x930e24(0x158)]['id']}),_0x3abbcb=await warehouse[_0x930e24(0x1d5)]({'name':_0x3f38b9,'room':_0x56e9dc,'warehouse_category':_0x930e24(0x18e)});_0x3154b7[_0x930e24(0x17e)]['forEach'](_0x3e3d11=>{var _0x262ee7=_0x930e24;const _0x316c52=_0x3abbcb[_0x262ee7(0x1bc)]['map'](_0x305ac1=>{var _0x53c0e2=_0x262ee7;_0x305ac1[_0x53c0e2(0x16e)]==_0x3e3d11['product_name']&&_0x305ac1[_0x53c0e2(0x15f)]==_0x3e3d11[_0x53c0e2(0x15f)]&&(_0x305ac1[_0x53c0e2(0x1df)]=parseInt(_0x305ac1[_0x53c0e2(0x1df)])-parseInt(_0x3e3d11[_0x53c0e2(0x218)]));});}),console[_0x930e24(0x21b)](_0x930e24(0x15e),_0x3abbcb),await _0x3abbcb[_0x930e24(0x188)]();const _0x5743a9=await c_payment_data[_0x930e24(0x1d5)]({'invoice':_0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x22a)]});_0x5743a9[_0x930e24(0x224)]=_0x580ffe[_0x930e24(0x1c3)][_0x930e24(0x224)],await _0x5743a9['save'](),_0x580ffe[_0x930e24(0x19c)](_0x930e24(0x249),_0x930e24(0x143)),_0x14199d[_0x930e24(0x241)](_0x930e24(0x156));}catch(_0x3d5388){console[_0x930e24(0x21b)](_0x3d5388);}}),router[a0_0x5df909(0x21f)](a0_0x5df909(0x214),auth,async(_0x487b17,_0x440323)=>{var _0x88c694=a0_0x5df909;try{const _0x20b5a9=_0x487b17[_0x88c694(0x158)]['id'],{invoice:_0xe814de,customer:_0x124f9b,receivable_amount:_0x15a6c2,received_amount:_0x14ec82}=_0x487b17['body'],_0x81b0a4=await sales[_0x88c694(0x193)](_0x20b5a9);console['log'](_0x81b0a4);var _0x11d715=_0x15a6c2-_0x14ec82;console['log'](_0x14ec82),_0x81b0a4[_0x88c694(0x227)]=parseFloat(_0x14ec82)+parseFloat(_0x81b0a4[_0x88c694(0x227)]),_0x81b0a4[_0x88c694(0x1cf)]=_0x11d715,console[_0x88c694(0x21b)](_0x81b0a4);const _0x5973e5=await _0x81b0a4[_0x88c694(0x188)](),_0x3567d3=await c_payment_data[_0x88c694(0x1d5)]({'invoice':_0xe814de});_0x3567d3['amount']=_0x11d715,await _0x3567d3['save']();let _0xcf2c9e=new Date(),_0x51a3e5=('0'+_0xcf2c9e['getDate']())['slice'](-0x2),_0x3eedd4=('0'+(_0xcf2c9e[_0x88c694(0x234)]()+0x1))[_0x88c694(0x1b8)](-0x2),_0x560004=_0xcf2c9e[_0x88c694(0x19d)](),_0x44bc37=_0x560004+'-'+_0x3eedd4+'-'+_0x51a3e5;const _0x1f2b06=new customer_payment({'invoice':_0xe814de,'date':_0x560004+'-'+_0x3eedd4+'-'+_0x51a3e5,'customer':_0x124f9b,'reason':_0x88c694(0x1aa),'amount':_0x14ec82}),_0x160cef=await _0x1f2b06[_0x88c694(0x188)]();_0x487b17[_0x88c694(0x19c)](_0x88c694(0x249),_0x88c694(0x1ce)),_0x440323[_0x88c694(0x241)](_0x88c694(0x192));}catch(_0x349667){console[_0x88c694(0x21b)](_0x349667);}}),router['get']('/invoice/:id',auth,async(_0x12f6cf,_0x4fe336)=>{var _0x555f10=a0_0x5df909;try{const {username:_0x28d60e,email:_0xf204fa,role:_0x341403}=_0x12f6cf[_0x555f10(0x1f6)],_0xcdbb60=_0x12f6cf[_0x555f10(0x1f6)],_0x36e8df=await profile[_0x555f10(0x1d5)]({'email':_0xcdbb60[_0x555f10(0x167)]}),_0x91c2fb=await master_shop[_0x555f10(0x1c0)]();console[_0x555f10(0x21b)](_0x555f10(0x1c7),_0x91c2fb);const _0xadaaf4=_0x12f6cf['params']['id'],_0x194a56=await sales[_0x555f10(0x193)](_0xadaaf4);console[_0x555f10(0x21b)](_0x194a56);const _0x201888=await customer[_0x555f10(0x1d5)]({'name':_0x194a56['customer']});console[_0x555f10(0x21b)](_0x201888);if(_0x91c2fb[0x0][_0x555f10(0x238)]=='English\x20(US)'){var _0x4061bc=users['English'];console[_0x555f10(0x21b)](_0x4061bc);}else{if(_0x91c2fb[0x0][_0x555f10(0x238)]=='Hindi')var _0x4061bc=users[_0x555f10(0x1ab)];else{if(_0x91c2fb[0x0]['language']=='German')var _0x4061bc=users[_0x555f10(0x169)];else{if(_0x91c2fb[0x0][_0x555f10(0x238)]==_0x555f10(0x24c))var _0x4061bc=users[_0x555f10(0x24c)];else{if(_0x91c2fb[0x0]['language']=='French')var _0x4061bc=users[_0x555f10(0x1db)];else{if(_0x91c2fb[0x0][_0x555f10(0x238)]==_0x555f10(0x250))var _0x4061bc=users[_0x555f10(0x15a)];else{if(_0x91c2fb[0x0]['language']=='Chinese')var _0x4061bc=users[_0x555f10(0x23a)];else{if(_0x91c2fb[0x0][_0x555f10(0x238)]==_0x555f10(0x183))var _0x4061bc=users[_0x555f10(0x21a)];}}}}}}}_0x4fe336['render'](_0x555f10(0x18f),{'success':_0x12f6cf[_0x555f10(0x19c)](_0x555f10(0x249)),'errors':_0x12f6cf[_0x555f10(0x19c)](_0x555f10(0x163)),'role':_0xcdbb60,'profile':_0x36e8df,'master_shop':_0x91c2fb,'customers':_0x201888,'sales':_0x194a56,'language':_0x4061bc});}catch(_0x3924eb){console[_0x555f10(0x21b)](_0x3924eb);}}),router[a0_0x5df909(0x233)](a0_0x5df909(0x144),auth,async(_0x49046c,_0x2d63de)=>{var _0x1187b8=a0_0x5df909;try{const {username:_0x5d3c22,email:_0x27b146,role:_0x11daa9}=_0x49046c[_0x1187b8(0x1f6)],_0x3cc83b=_0x49046c[_0x1187b8(0x1f6)],_0x1db609=await profile[_0x1187b8(0x1d5)]({'email':_0x3cc83b['email']}),_0x1e85ac=await master_shop[_0x1187b8(0x1c0)](),_0xf69900=_0x49046c[_0x1187b8(0x158)]['id'],_0x1a3e14=await sales_finished['findById'](_0xf69900),_0x518707=await warehouse[_0x1187b8(0x1e6)]([{'$match':{'name':_0x1a3e14[_0x1187b8(0x1a8)]}},{'$unwind':_0x1187b8(0x15b)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1187b8(0x1e5)},'product_stock':{'$first':_0x1187b8(0x1ae)},'bay':{'$first':_0x1187b8(0x21c)},'bin':{'$first':_0x1187b8(0x1c5)},'type':{'$first':_0x1187b8(0x199)},'floorlevel':{'$first':_0x1187b8(0x22f)},'primary_code':{'$first':_0x1187b8(0x220)},'secondary_code':{'$first':_0x1187b8(0x194)},'product_code':{'$first':_0x1187b8(0x1c6)},'storage':{'$first':_0x1187b8(0x1ca)},'rack':{'$first':_0x1187b8(0x23b)},'expiry_date':{'$first':_0x1187b8(0x152)},'production_date':{'$first':_0x1187b8(0x14c)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x1187b8(0x232)},'maxProducts':{'$first':_0x1187b8(0x16c)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x1187b8(0x1e8)}}}]),_0x4ee490=await product[_0x1187b8(0x1c0)]({}),_0x4acbd7=await warehouse['aggregate']([{'$match':{'status':_0x1187b8(0x1ac),'warehouse_category':_0x1187b8(0x18e),'name':{'$ne':_0x1187b8(0x1d4),'$ne':'Quality\x20Inspection'}}},{'$group':{'_id':_0x1187b8(0x200),'name':{'$first':_0x1187b8(0x200)}}},{'$sort':{'name':0x1}}]);var _0x47b4d3=['Return\x20Rooms'];const _0x5c51f5=await warehouse['aggregate']([{'$match':{'status':_0x1187b8(0x1ac),'name':_0x1187b8(0x236)}},{'$group':{'_id':_0x1187b8(0x200),'name':{'$first':_0x1187b8(0x200)}}},{'$sort':{'name':0x1}}]);if(_0x1e85ac[0x0][_0x1187b8(0x238)]==_0x1187b8(0x173)){var _0x2255b4=users[_0x1187b8(0x217)];console[_0x1187b8(0x21b)](_0x2255b4);}else{if(_0x1e85ac[0x0][_0x1187b8(0x238)]=='Hindi')var _0x2255b4=users[_0x1187b8(0x1ab)];else{if(_0x1e85ac[0x0][_0x1187b8(0x238)]==_0x1187b8(0x169))var _0x2255b4=users[_0x1187b8(0x169)];else{if(_0x1e85ac[0x0]['language']==_0x1187b8(0x24c))var _0x2255b4=users[_0x1187b8(0x24c)];else{if(_0x1e85ac[0x0][_0x1187b8(0x238)]=='French')var _0x2255b4=users['French'];else{if(_0x1e85ac[0x0]['language']=='Portuguese\x20(BR)')var _0x2255b4=users[_0x1187b8(0x15a)];else{if(_0x1e85ac[0x0][_0x1187b8(0x238)]==_0x1187b8(0x23a))var _0x2255b4=users['Chinese'];else{if(_0x1e85ac[0x0]['language']==_0x1187b8(0x183))var _0x2255b4=users[_0x1187b8(0x21a)];}}}}}}}_0x2d63de[_0x1187b8(0x22e)](_0x1187b8(0x1d3),{'success':_0x49046c[_0x1187b8(0x19c)]('success'),'errors':_0x49046c[_0x1187b8(0x19c)](_0x1187b8(0x163)),'role':_0x3cc83b,'profile':_0x1db609,'user':_0x1a3e14,'stock':_0x518707,'master_shop':_0x1e85ac,'unit':_0x4ee490,'language':_0x2255b4,'warehouses':_0x4acbd7,'rooms':_0x47b4d3,'warehouse_QA':_0x5c51f5});}catch(_0x3d136d){console[_0x1187b8(0x21b)](_0x3d136d),_0x2d63de['status'](0xc8)['json']({'message':_0x3d136d['message']});}}),router['post'](a0_0x5df909(0x144),auth,async(_0x2381a6,_0x42788c)=>{var _0x41c285=a0_0x5df909;if(_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1a0)]=='QA')try{const {invoice:_0x382582,date:_0x146e05,warehouse_name:_0x248a49,product_name:_0x453bf3,primary_code:_0x5e8906,secondary_code:_0x5456e5,product_code:_0x4b4414,sales_quantity:_0x4e4d6e,stocks:_0x1c3938,return_qty:_0x20915f,Room_name:_0x340353,to_warehouse_name_QA:_0x4d445a,to_Room_name_QA:_0x5c4361,note:_0x365bcf,for_categorize:_0xee92da,product_name_QA1:_0x46ac31}=_0x2381a6[_0x41c285(0x1c3)];if(typeof _0x46ac31==_0x41c285(0x164))var _0x2d548c=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x247)]],_0x3950c6=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x174)]],_0x43c36c=[_0x2381a6[_0x41c285(0x1c3)]['secondary_code_QA']],_0x7059f0=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x203)]],_0x2ece2e=[_0x2381a6['body'][_0x41c285(0x1d1)]],_0x370fb2=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x177)]],_0x33ce1f=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x170)]],_0x29f442=[_0x2381a6['body'][_0x41c285(0x239)]],_0x599d07=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x229)]],_0x321d15=[_0x2381a6[_0x41c285(0x1c3)]['batch_code_QA']],_0x307526=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x147)]],_0x4fa75e=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1b3)]],_0x42acdc=[_0x2381a6['body'][_0x41c285(0x222)]],_0x114937=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x14d)]];else var _0x2d548c=[..._0x2381a6[_0x41c285(0x1c3)]['product_name_QA1']],_0x3950c6=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x174)]],_0x43c36c=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1b5)]],_0x7059f0=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x203)]],_0x2ece2e=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1d1)]],_0x370fb2=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x177)]],_0x33ce1f=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x170)]],_0x29f442=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x239)]],_0x599d07=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x229)]],_0x321d15=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x20e)]],_0x307526=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x147)]],_0x4fa75e=[..._0x2381a6['body'][_0x41c285(0x1b3)]],_0x42acdc=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x222)]],_0x114937=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x14d)]];const _0x22b394=_0x2d548c[_0x41c285(0x251)](_0x2b9c5b=>{return _0x2b9c5b={'product_name':_0x2b9c5b};});_0x3950c6[_0x41c285(0x211)]((_0x7c40c6,_0x3fb22c)=>{var _0x55d554=_0x41c285;_0x22b394[_0x3fb22c][_0x55d554(0x19e)]=_0x7c40c6;}),_0x43c36c[_0x41c285(0x211)]((_0x1d9cab,_0xef102d)=>{var _0x45e331=_0x41c285;_0x22b394[_0xef102d][_0x45e331(0x243)]=_0x1d9cab;}),_0x7059f0[_0x41c285(0x211)]((_0x1017fb,_0x546278)=>{_0x22b394[_0x546278]['product_code']=_0x1017fb;}),_0x2ece2e['forEach']((_0xe6bca,_0x5b2622)=>{var _0x410547=_0x41c285;_0x22b394[_0x5b2622][_0x410547(0x1a4)]=_0xe6bca;}),_0x370fb2[_0x41c285(0x211)]((_0x424b0b,_0xe84ce7)=>{_0x22b394[_0xe84ce7]['stock']=_0x424b0b;}),_0x33ce1f[_0x41c285(0x211)]((_0x5d0397,_0xd763c1)=>{var _0x552737=_0x41c285;_0x22b394[_0xd763c1][_0x552737(0x176)]=_0x5d0397;}),_0x29f442['forEach']((_0x2b0552,_0x3d337b)=>{_0x22b394[_0x3d337b]['maxPerUnit']=_0x2b0552;}),_0x599d07[_0x41c285(0x211)]((_0x5d68b9,_0x3a1a7a)=>{var _0x4e3672=_0x41c285;_0x22b394[_0x3a1a7a][_0x4e3672(0x1f7)]=_0x5d68b9;}),_0x321d15[_0x41c285(0x211)]((_0x3cbf71,_0x5c4a79)=>{var _0x4632da=_0x41c285;_0x22b394[_0x5c4a79][_0x4632da(0x1a6)]=_0x3cbf71;}),_0x307526['forEach']((_0x277725,_0x4af5dd)=>{_0x22b394[_0x4af5dd]['secondary_unit']=_0x277725;}),_0x4fa75e['forEach']((_0x22092b,_0x5852f4)=>{var _0x8a0423=_0x41c285;_0x22b394[_0x5852f4][_0x8a0423(0x142)]=_0x22092b;}),_0x42acdc[_0x41c285(0x211)]((_0x56685f,_0x257890)=>{var _0x2ae387=_0x41c285;_0x22b394[_0x257890][_0x2ae387(0x244)]=_0x56685f;}),_0x114937[_0x41c285(0x211)]((_0x4562a9,_0x251e9d)=>{var _0x516024=_0x41c285;_0x22b394[_0x251e9d][_0x516024(0x196)]=_0x4562a9;});const _0x57e799=await sales_finished['findOne']({'invoice':_0x382582});_0x57e799[_0x41c285(0x1e2)]=_0x41c285(0x17a);const _0x5e8192=await _0x57e799[_0x41c285(0x188)](),_0x14ec8a=new sales_return_finished({'invoice':_0x382582,'customer':_0x2381a6[_0x41c285(0x1c3)]['customer'],'date':_0x146e05,'warehouse_name':_0x248a49,'room':_0x340353,'ToWarehouse':_0x4d445a,'ToRoom':_0x5c4361,'return_sale_QA':_0x22b394,'note':_0x365bcf,'warehouse_cat':_0xee92da}),_0x525ce9=await _0x14ec8a['save'](),_0x91dafe=await sales_return_finished[_0x41c285(0x1d5)]({'invoice':_0x382582}),_0x27557a=await warehouse[_0x41c285(0x1d5)]({'name':_0x4d445a,'room':_0x5c4361});_0x91dafe[_0x41c285(0x197)][_0x41c285(0x211)](_0x936ead=>{var _0x588832=_0x41c285,_0x35df67=0x0;const _0x356c1a=_0x27557a[_0x588832(0x1bc)][_0x588832(0x251)](_0xd75c7=>{var _0x7eda2e=_0x588832;_0xd75c7['product_name']==_0x936ead[_0x7eda2e(0x16e)]&&_0xd75c7['expiry_date']==_0x936ead['expiry_date']&&_0xd75c7[_0x7eda2e(0x244)]==_0x936ead[_0x7eda2e(0x244)]&&_0xd75c7[_0x7eda2e(0x1a6)]==_0x936ead['batch_code']&&(_0xd75c7[_0x7eda2e(0x1df)]=parseInt(_0xd75c7[_0x7eda2e(0x1df)])+parseInt(_0x936ead['return_qty']),_0x35df67++);});_0x35df67=='0'&&(_0x27557a[_0x588832(0x1bc)]=_0x27557a[_0x588832(0x1bc)][_0x588832(0x1cb)]({'product_name':_0x936ead[_0x588832(0x16e)],'product_stock':_0x936ead[_0x588832(0x176)],'primary_code':_0x936ead[_0x588832(0x19e)],'secondary_code':_0x936ead[_0x588832(0x243)],'product_code':_0x936ead[_0x588832(0x19a)],'batch_code':_0x936ead[_0x588832(0x1a6)],'maxPerUnit':_0x936ead[_0x588832(0x202)],'production_date':_0x936ead[_0x588832(0x244)],'expiry_date':_0x936ead[_0x588832(0x196)],'secondary_unit':_0x936ead[_0x588832(0x1a7)],'unit':_0x936ead[_0x588832(0x142)],'maxProducts':_0x936ead[_0x588832(0x1f7)],'bay':_0x936ead[_0x588832(0x15f)]}));}),await _0x27557a['save']();const _0x2c0bd5=new c_payment_data({'invoice':_0x382582,'customer':_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x240)],'reason':_0x41c285(0x1ff)});await _0x2c0bd5['save']();const _0x4833c0=await master_shop[_0x41c285(0x1c0)](),_0x16104c=await email_settings[_0x41c285(0x1d5)](),_0x4ff8c7=await customer['findOne']({'name':_0x2381a6[_0x41c285(0x1c3)]['customer']});_0x4833c0[0x0][_0x41c285(0x1ef)]==0x1?(right_currency=_0x4833c0[0x0][_0x41c285(0x16b)],left_currency=''):(right_currency='',left_currency=_0x4833c0[0x0][_0x41c285(0x16b)]);var _0x25b2d2=_0x2d548c,_0x26760f=_0x33ce1f,_0x5e8e98='',_0x4f40ad;for(_0x4f40ad in _0x25b2d2){_0x5e8e98+=_0x41c285(0x1b7)+_0x41c285(0x18a)+_0x25b2d2[_0x4f40ad]+'</td>'+_0x41c285(0x18a)+_0x26760f[_0x4f40ad]+_0x41c285(0x206)+_0x41c285(0x20c);}console[_0x41c285(0x21b)](_0x41c285(0x18d),_0x5e8e98);let _0x38033b=nodemailer[_0x41c285(0x207)]({'service':'gmail','auth':{'user':_0x16104c[_0x41c285(0x167)],'pass':_0x16104c[_0x41c285(0x1e3)]}}),_0x2546cc={'from':_0x16104c[_0x41c285(0x167)],'to':_0x4ff8c7['email'],'subject':_0x41c285(0x1ea),'attachments':[{'filename':_0x41c285(0x246),'path':__dirname+_0x41c285(0x23e)+_0x41c285(0x157)+_0x4833c0[0x0][_0x41c285(0x23c)],'cid':_0x41c285(0x17b)}],'html':_0x41c285(0x18c)+'<html><head><title></title>'+'</head><body>'+_0x41c285(0x1bd)+_0x41c285(0x231)+_0x41c285(0x1bd)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x41c285(0x1bd)+'<h2>\x20'+_0x4833c0[0x0][_0x41c285(0x209)]+_0x41c285(0x23f)+_0x41c285(0x24f)+_0x41c285(0x24f)+'<hr\x20class=\x22my-3\x22>'+_0x41c285(0x1bd)+_0x41c285(0x1fc)+'\x20Order\x20Number\x20:\x20'+_0x382582+'\x20'+_0x41c285(0x1fb)+_0x41c285(0x1a1)+_0x146e05+'\x20'+_0x41c285(0x1d8)+'</h5>'+_0x41c285(0x24f)+_0x41c285(0x165)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x41c285(0x1b7)+_0x41c285(0x213)+_0x41c285(0x1c9)+_0x41c285(0x171)+_0x41c285(0x1d7)+_0x41c285(0x20c)+_0x41c285(0x191)+_0x41c285(0x181)+'\x20'+_0x5e8e98+'\x20'+_0x41c285(0x1c2)+_0x41c285(0x19b)+'<div>'+_0x41c285(0x248)+_0x41c285(0x1f0)+_0x4833c0[0x0][_0x41c285(0x209)]+_0x41c285(0x145)+_0x41c285(0x24f)+_0x41c285(0x24f)+_0x41c285(0x1cd)};_0x38033b[_0x41c285(0x1d2)](_0x2546cc,function(_0x12fb19,_0x6b1170){var _0x4003a1=_0x41c285;_0x12fb19?(console['log'](_0x12fb19),console[_0x4003a1(0x21b)](_0x4003a1(0x16d))):console[_0x4003a1(0x21b)](_0x4003a1(0x1d9));}),_0x2381a6['flash']('success',_0x41c285(0x168)),_0x42788c['redirect'](_0x41c285(0x156));}catch(_0x472fd9){_0x42788c[_0x41c285(0x14f)](0xc8)[_0x41c285(0x1ba)]({'message1':_0x472fd9['message']});}else{if(_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1a0)]=='GS')try{const {invoice:_0x29829b,date:_0x374432,warehouse_name:_0x289f3f,product_name:_0x1aba0b,primary_code:_0x4e0146,secondary_code:_0x3d3cb3,product_code:_0x581e60,sales_quantity:_0xe6a02e,stocks:_0x4b4613,return_qty:_0x6d154c,Room_name:_0x28a1ad,to_warehouse_name:_0x2a4265,to_Room_name:_0x5f53de,note:_0x4f5e80,level:_0x266582,isle:_0x43fc44,pallet:_0x179c8c,for_categorize:_0x432530}=_0x2381a6[_0x41c285(0x1c3)];if(typeof _0x1aba0b=='string')var _0x2d548c=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x16e)]],_0x3950c6=[_0x2381a6[_0x41c285(0x1c3)]['primary_code']],_0x43c36c=[_0x2381a6[_0x41c285(0x1c3)]['secondary_code']],_0x7059f0=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x19a)]],_0x2ece2e=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1dd)]],_0x33ce1f=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x176)]],_0x25d84d=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x15f)]],_0x29f442=[_0x2381a6['body'][_0x41c285(0x202)]],_0x599d07=[_0x2381a6[_0x41c285(0x1c3)]['maxProducts']],_0x321d15=[_0x2381a6[_0x41c285(0x1c3)]['batch_code']],_0x307526=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1a7)]],_0x4fa75e=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x142)]],_0x42acdc=[_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x244)]],_0x114937=[_0x2381a6['body'][_0x41c285(0x196)]];else var _0x2d548c=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x16e)]],_0x3950c6=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x19e)]],_0x43c36c=[..._0x2381a6[_0x41c285(0x1c3)]['secondary_code']],_0x7059f0=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x19a)]],_0x2ece2e=[..._0x2381a6['body'][_0x41c285(0x1dd)]],_0x33ce1f=[..._0x2381a6['body'][_0x41c285(0x176)]],_0x25d84d=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x15f)]],_0x29f442=[..._0x2381a6[_0x41c285(0x1c3)]['maxPerUnit']],_0x599d07=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1f7)]],_0x321d15=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x1a6)]],_0x307526=[..._0x2381a6['body'][_0x41c285(0x1a7)]],_0x4fa75e=[..._0x2381a6['body'][_0x41c285(0x142)]],_0x42acdc=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x244)]],_0x114937=[..._0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x196)]];const _0x3709da=_0x2d548c[_0x41c285(0x251)](_0x72a841=>{return _0x72a841={'product_name':_0x72a841};});_0x3950c6[_0x41c285(0x211)]((_0x14c24d,_0x2dd166)=>{var _0xb50edf=_0x41c285;_0x3709da[_0x2dd166][_0xb50edf(0x19e)]=_0x14c24d;}),_0x43c36c[_0x41c285(0x211)]((_0x23bc2a,_0x2f5c15)=>{var _0x356554=_0x41c285;_0x3709da[_0x2f5c15][_0x356554(0x243)]=_0x23bc2a;}),_0x7059f0[_0x41c285(0x211)]((_0x46fa44,_0x24d802)=>{_0x3709da[_0x24d802]['product_code']=_0x46fa44;}),_0x2ece2e['forEach']((_0x4f74a8,_0x478612)=>{var _0x45bbf8=_0x41c285;_0x3709da[_0x478612][_0x45bbf8(0x1a4)]=_0x4f74a8;}),_0x33ce1f[_0x41c285(0x211)]((_0x270c00,_0x2d1eba)=>{var _0x9dc1ac=_0x41c285;_0x3709da[_0x2d1eba][_0x9dc1ac(0x176)]=_0x270c00;}),_0x25d84d[_0x41c285(0x211)]((_0x4dd0a6,_0x47f350)=>{_0x3709da[_0x47f350]['bay']=_0x4dd0a6;}),_0x29f442['forEach']((_0x206a05,_0x23ae4e)=>{_0x3709da[_0x23ae4e]['maxPerUnit']=_0x206a05;}),_0x599d07[_0x41c285(0x211)]((_0xb346b6,_0x2529da)=>{var _0x1d0ce9=_0x41c285;_0x3709da[_0x2529da][_0x1d0ce9(0x1f7)]=_0xb346b6;}),_0x321d15[_0x41c285(0x211)]((_0x5a2c2d,_0x223be1)=>{var _0x184a36=_0x41c285;_0x3709da[_0x223be1][_0x184a36(0x1a6)]=_0x5a2c2d;}),_0x307526['forEach']((_0x14eeff,_0x9121b3)=>{var _0x734aba=_0x41c285;_0x3709da[_0x9121b3][_0x734aba(0x1a7)]=_0x14eeff;}),_0x4fa75e['forEach']((_0x545122,_0x1ab8a1)=>{var _0x4e9a1f=_0x41c285;_0x3709da[_0x1ab8a1][_0x4e9a1f(0x142)]=_0x545122;}),_0x42acdc[_0x41c285(0x211)]((_0x3f1b20,_0x348a9a)=>{var _0x42fba5=_0x41c285;_0x3709da[_0x348a9a][_0x42fba5(0x244)]=_0x3f1b20;}),_0x114937[_0x41c285(0x211)]((_0x444961,_0xe811fd)=>{var _0x5c4da4=_0x41c285;_0x3709da[_0xe811fd][_0x5c4da4(0x196)]=_0x444961;});var _0xdb395b=0x0;_0x3709da['forEach'](_0x585fab=>{var _0x343547=_0x41c285;(parseInt(_0x585fab[_0x343547(0x1a4)])<parseInt(_0x585fab['return_qty'])||parseInt(_0x585fab[_0x343547(0x146)])<parseInt(_0x585fab[_0x343547(0x176)])&&parseInt(_0x585fab[_0x343547(0x1a4)])>parseInt(_0x585fab[_0x343547(0x176)])||parseInt(_0x585fab[_0x343547(0x176)])==0x0)&&_0xdb395b++;});if(_0xdb395b!=0x0)return _0x2381a6[_0x41c285(0x19c)]('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x42788c['redirect'](_0x41c285(0x16a));const _0x33b9fc=await sales_finished[_0x41c285(0x1d5)]({'invoice':_0x29829b});_0x33b9fc[_0x41c285(0x1e2)]='True';const _0x26de94=await _0x33b9fc[_0x41c285(0x188)](),_0x16c5ef=new sales_return_finished({'invoice':_0x29829b,'customer':_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x240)],'date':_0x374432,'warehouse_name':_0x289f3f,'room':_0x28a1ad,'ToWarehouse':_0x2a4265,'ToRoom':_0x5f53de,'return_sale':_0x3709da,'note':_0x4f5e80,'warehouse_cat':_0x432530}),_0x472ed5=await _0x16c5ef[_0x41c285(0x188)](),_0x3edb31=await sales_return_finished['findOne']({'invoice':_0x29829b}),_0x38cd88=await warehouse[_0x41c285(0x1d5)]({'name':_0x2a4265,'room':_0x5f53de,'warehouse_category':_0x41c285(0x18e)});_0x3edb31['return_sale'][_0x41c285(0x211)](_0x259754=>{var _0x4fbbac=_0x41c285,_0x4998ea=0x0;const _0x5d6f5a=_0x38cd88[_0x4fbbac(0x1bc)][_0x4fbbac(0x251)](_0x57f655=>{var _0x57b5e6=_0x4fbbac;_0x57f655['product_name']==_0x259754[_0x57b5e6(0x16e)]&&_0x57f655[_0x57b5e6(0x15f)]==_0x259754['bay']&&_0x57f655[_0x57b5e6(0x196)]==_0x259754[_0x57b5e6(0x196)]&&_0x57f655[_0x57b5e6(0x244)]==_0x259754[_0x57b5e6(0x244)]&&_0x57f655[_0x57b5e6(0x1a6)]==_0x259754[_0x57b5e6(0x1a6)]&&(_0x57f655[_0x57b5e6(0x1df)]=parseInt(_0x57f655[_0x57b5e6(0x1df)])+parseInt(_0x259754['return_qty']),_0x4998ea++);});_0x4998ea=='0'&&(_0x38cd88[_0x4fbbac(0x1bc)]=_0x38cd88[_0x4fbbac(0x1bc)][_0x4fbbac(0x1cb)]({'product_name':_0x259754[_0x4fbbac(0x16e)],'product_stock':_0x259754[_0x4fbbac(0x176)],'primary_code':_0x259754[_0x4fbbac(0x19e)],'secondary_code':_0x259754['secondary_code'],'product_code':_0x259754[_0x4fbbac(0x19a)],'bay':_0x259754[_0x4fbbac(0x15f)],'batch_code':_0x259754[_0x4fbbac(0x1a6)],'maxPerUnit':_0x259754[_0x4fbbac(0x202)],'production_date':_0x259754[_0x4fbbac(0x244)],'expiry_date':_0x259754[_0x4fbbac(0x196)],'secondary_unit':_0x259754[_0x4fbbac(0x1a7)],'unit':_0x259754['unit'],'maxProducts':_0x259754[_0x4fbbac(0x1f7)]}));}),await _0x38cd88[_0x41c285(0x188)](),console[_0x41c285(0x21b)](_0x2381a6[_0x41c285(0x1c3)]);const _0x2d6c3d=new c_payment_data({'invoice':_0x29829b,'customer':_0x2381a6[_0x41c285(0x1c3)][_0x41c285(0x240)],'reason':_0x41c285(0x1ff)});await _0x2d6c3d['save']();const _0x53d64a=await master_shop[_0x41c285(0x1c0)]();console[_0x41c285(0x21b)]('add\x20post',_0x53d64a[0x0]['image']);const _0x287601=await email_settings[_0x41c285(0x1d5)](),_0x19506d=await customer[_0x41c285(0x1d5)]({'name':_0x2381a6['body'][_0x41c285(0x240)]});console['log'](_0x41c285(0x1c8),_0x19506d);_0x53d64a[0x0][_0x41c285(0x1ef)]==0x1?(right_currency=_0x53d64a[0x0][_0x41c285(0x16b)],left_currency=''):(right_currency='',left_currency=_0x53d64a[0x0][_0x41c285(0x16b)]);var _0x25b2d2=_0x2d548c,_0x26760f=_0x33ce1f,_0x5e8e98='',_0x4f40ad;for(_0x4f40ad in _0x25b2d2){_0x5e8e98+=_0x41c285(0x1b7)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x25b2d2[_0x4f40ad]+'</td>'+_0x41c285(0x18a)+_0x26760f[_0x4f40ad]+_0x41c285(0x206)+_0x41c285(0x20c);}console[_0x41c285(0x21b)](_0x41c285(0x18d),_0x5e8e98);let _0xcd03f9=nodemailer[_0x41c285(0x207)]({'service':_0x41c285(0x1bf),'auth':{'user':_0x287601[_0x41c285(0x167)],'pass':_0x287601[_0x41c285(0x1e3)]}}),_0x347f75={'from':_0x287601['email'],'to':_0x19506d[_0x41c285(0x167)],'subject':_0x41c285(0x1ea),'attachments':[{'filename':_0x41c285(0x246),'path':__dirname+_0x41c285(0x23e)+_0x41c285(0x157)+_0x53d64a[0x0]['image'],'cid':_0x41c285(0x17b)}],'html':_0x41c285(0x18c)+'<html><head><title></title>'+_0x41c285(0x1da)+'<div>'+_0x41c285(0x231)+'<div>'+_0x41c285(0x155)+_0x41c285(0x24f)+_0x41c285(0x1bd)+'<h2>\x20'+_0x53d64a[0x0][_0x41c285(0x209)]+_0x41c285(0x23f)+_0x41c285(0x24f)+_0x41c285(0x24f)+'<hr\x20class=\x22my-3\x22>'+_0x41c285(0x1bd)+_0x41c285(0x1fc)+_0x41c285(0x190)+_0x29829b+'\x20'+_0x41c285(0x1fb)+_0x41c285(0x1a1)+_0x374432+'\x20'+_0x41c285(0x1d8)+'</h5>'+_0x41c285(0x24f)+_0x41c285(0x165)+_0x41c285(0x1ed)+_0x41c285(0x1b7)+_0x41c285(0x213)+_0x41c285(0x1c9)+_0x41c285(0x171)+_0x41c285(0x1d7)+_0x41c285(0x20c)+'</thead>'+_0x41c285(0x181)+'\x20'+_0x5e8e98+'\x20'+'</tbody>'+'</table>'+_0x41c285(0x1bd)+_0x41c285(0x248)+'<h5>'+_0x53d64a[0x0][_0x41c285(0x209)]+_0x41c285(0x145)+_0x41c285(0x24f)+'</div>'+_0x41c285(0x1cd)};_0xcd03f9[_0x41c285(0x1d2)](_0x347f75,function(_0x203a0a,_0x11a558){var _0x16b982=_0x41c285;_0x203a0a?(console[_0x16b982(0x21b)](_0x203a0a),console[_0x16b982(0x21b)]('Error\x20Occurs')):console['log']('Email\x20sent\x20successfully');}),_0x2381a6[_0x41c285(0x19c)]('success','sales\x20item\x20return\x20successfull'),_0x42788c[_0x41c285(0x241)](_0x41c285(0x156));}catch(_0x57ffed){console[_0x41c285(0x21b)](_0x57ffed),_0x42788c[_0x41c285(0x14f)](0xc8)[_0x41c285(0x1ba)]({'message1':_0x57ffed[_0x41c285(0x195)]});}}}),router[a0_0x5df909(0x233)](a0_0x5df909(0x23d),auth,async(_0x5dd862,_0x5cef9f)=>{var _0x1f0f4e=a0_0x5df909;try{const {username:_0x25689f,email:_0x52bd0e,role:_0x2cc2a1}=_0x5dd862['user'],_0x4f8d54=_0x5dd862[_0x1f0f4e(0x1f6)],_0x637dc0=await profile[_0x1f0f4e(0x1d5)]({'email':_0x4f8d54[_0x1f0f4e(0x167)]}),_0x30bc0c=await master_shop[_0x1f0f4e(0x1c0)]();console['log']('barcode\x20Product\x20master',_0x30bc0c);const _0x31f946=_0x5dd862[_0x1f0f4e(0x158)]['id'],_0xe6532b=await sales['findById'](_0x31f946);console[_0x1f0f4e(0x21b)](_0x1f0f4e(0x20d),_0xe6532b);if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]==_0x1f0f4e(0x173))var _0xb1ed90=users[_0x1f0f4e(0x217)];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]=='Hindi')var _0xb1ed90=users[_0x1f0f4e(0x1ab)];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]==_0x1f0f4e(0x169))var _0xb1ed90=users['German'];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]==_0x1f0f4e(0x24c))var _0xb1ed90=users[_0x1f0f4e(0x24c)];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]==_0x1f0f4e(0x1db))var _0xb1ed90=users[_0x1f0f4e(0x1db)];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]=='Portuguese\x20(BR)')var _0xb1ed90=users['Portuguese'];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]==_0x1f0f4e(0x23a))var _0xb1ed90=users['Chinese'];else{if(_0x30bc0c[0x0][_0x1f0f4e(0x238)]=='Arabic\x20(ae)')var _0xb1ed90=users['Arabic'];}}}}}}}_0x5cef9f[_0x1f0f4e(0x22e)](_0x1f0f4e(0x204),{'success':_0x5dd862[_0x1f0f4e(0x19c)]('success'),'errors':_0x5dd862['flash'](_0x1f0f4e(0x163)),'role':_0x4f8d54,'profile':_0x637dc0,'alldata':_0xe6532b,'master_shop':_0x30bc0c,'language':_0xb1ed90});}catch(_0x2798b7){console['log'](_0x2798b7);}}),router[a0_0x5df909(0x21f)](a0_0x5df909(0x215),async(_0x5bd797,_0x499c1c)=>{var _0x4a13f5=a0_0x5df909;const {product_code:_0x2bdc9e,warehouse_name:_0x17380e,rooms_data:_0x507006,Roomslist:_0x4743d5}=_0x5bd797[_0x4a13f5(0x1c3)],_0x5bbca4=_0x4743d5[_0x4a13f5(0x1fd)](','),_0x5a1b19=[];async function _0x170294(_0x49af75){var _0x168dd8=_0x4a13f5;const _0x4f656c=await warehouse[_0x168dd8(0x1e6)]([{'$match':{'name':_0x17380e,'room':_0x49af75}},{'$unwind':_0x168dd8(0x15b)},{'$match':{'product_details.primary_code':_0x2bdc9e}},{'$group':{'_id':_0x168dd8(0x1a5),'name':{'$first':_0x168dd8(0x1e5)},'product_stock':{'$first':_0x168dd8(0x1ae)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x168dd8(0x1c6)},'level':{'$first':_0x168dd8(0x21c)},'isle':{'$first':_0x168dd8(0x1c5)},'type':{'$first':_0x168dd8(0x199)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x168dd8(0x1b0)},'secondary_unit':{'$first':_0x168dd8(0x232)},'storage':{'$first':_0x168dd8(0x1ca)},'rack':{'$first':_0x168dd8(0x23b)},'expiry_date':{'$first':_0x168dd8(0x152)},'production_date':{'$first':_0x168dd8(0x14c)},'maxPerUnit':{'$first':_0x168dd8(0x1e8)},'batch_code':{'$first':_0x168dd8(0x180)},'product_cat':{'$first':_0x168dd8(0x226)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x168dd8(0x17f)},'invoice':{'$first':_0x168dd8(0x21e)}}}]),_0x478d84=await warehouse[_0x168dd8(0x1e6)]([{'$match':{'name':_0x17380e,'room':_0x49af75}},{'$unwind':_0x168dd8(0x15b)},{'$match':{'product_details.secondary_code':_0x2bdc9e}},{'$group':{'_id':_0x168dd8(0x1a5),'name':{'$first':_0x168dd8(0x1e5)},'product_stock':{'$first':_0x168dd8(0x1ae)},'primary_code':{'$first':_0x168dd8(0x220)},'secondary_code':{'$first':_0x168dd8(0x194)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x168dd8(0x21c)},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x168dd8(0x232)},'storage':{'$first':_0x168dd8(0x1ca)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x168dd8(0x152)},'production_date':{'$first':_0x168dd8(0x14c)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x168dd8(0x226)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x168dd8(0x17f)},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x4f656c['length']>0x0)_0x5a1b19[_0x168dd8(0x148)](_0x4f656c);else _0x478d84['length']>0x0&&_0x5a1b19['push'](_0x478d84);}const _0x5af6e8=_0x5bbca4['map'](_0x3e4252=>_0x170294(_0x3e4252));await Promise[_0x4a13f5(0x149)](_0x5af6e8),_0x499c1c[_0x4a13f5(0x1ba)](_0x5a1b19);}),module[a0_0x5df909(0x1e7)]=router;function a0_0x2c6b(){var _0x4d0224=['error','$product_details.unit','nodemailer','level','unit_QA','$customer','secondary_code_QA','702TItmkD','<tr>','slice','9574376pkwoce','json','staff','product_details','<div>','$return_data','gmail','find','QA\x20Warehouse','</tbody>','body','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','$product_details.bin','$product_details.product_code','master','customer_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>','$product_details.storage','concat','$date','</body></html>','payment\x20successfull','due_amount','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','sales_quantity_QA','sendMail','return_sale_finished','Return\x20Goods','findOne','7330Zagegv','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Total\x20</th>','</span>','Email\x20sent\x20successfully','</head><body>','French','807530ZHTkzi','sales_quantity','490AFdXny','product_stock','Enclosed','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','return_data','password','/view/add_sales/:id','$product_details.product_name','aggregate','exports','$product_details.maxPerUnit','70147lIyyHK','Sale\x20Return\x20Mail','An\x20error\x20occurred.','host','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','room','currency_placement','<h5>','foreach\x20newproduct','purchases_data','$customers_docs','/all_sales_finished/preview/','then','user','maxProducts','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$sale_product.floorlevel','DRY\x20GOODS','<span\x20style=\x22float:\x20right;\x22>','<h5\x20style=\x22text-align:\x20left;\x22>','split','Sales\x20Add\x20successfully','Sale\x20Return','$name','primary_unit','maxPerUnit','product_code_QA','all_sales_barcode','toString','</td>','createTransport','product','site_title','customers_docs','edit_sales_finished','</tr>','barcode\x20user_id','batch_code_QA','stock_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','forEach','41524Ubcefv','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','/give_payment/:id','/barcode_scanner','role','English','quantity','note','Arabic','log','$product_details.bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.invoice','post','$product_details.primary_code','Sale\x20Product\x20Mail','production_date_QA','<h2>\x20','suppliers','$sale_product.bin','$product_details.product_cat','received_amount','$finalize','maxProducts_QA','invoice','maxperunit','$warehouse_name','filter','render','$product_details.floorlevel','$sale_product.bay','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','$product_details.secondary_unit','get','getMonth','An\x20error\x20occurred\x20while\x20saving\x20data.','Quality\x20Inspection','RoomAssigned','language','maxPerUnit_QA','Chinese','$product_details.rack','image','/barcode/:id','/../public','\x20</h2>','customer','redirect','floor','secondary_code','production_date','product_date','Logo.png','product_name_QA1','<strong>\x20Regards\x20</strong>','success','OUTF-','prod_cat','Spanish','9eNLMSN','$invoice','</div>','Portuguese\x20(BR)','map','unit','Sales\x20Update\x20successfully','/view/return_sales/:id','</h5>','stock','secondary_unit_QA','push','all','<hr\x20class=\x22my-3\x22>','21664550JvsYQR','$product_details.production_date','expiry_date_QA','/view/add_sales','status','customers','warehouse','$product_details.expiry_date','express','all_sales_finished','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/all_sales_finished/view','/upload/','params','catch','Portuguese','$product_details','4029915BlNxvU','FGSEmail','final','bay','$note','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Quantity\x20</th>','length','errors','string','<table\x20style=\x22width:\x20100%\x20!important;\x22>','getDate','email','sales\x20item\x20return\x20successfull','German','back','currency','$product_details.maxProducts','Error\x20Occurs','product_name','edit_sales_finished_view','return_qty_QA','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Price\x20</th>','$product','English\x20(US)','primary_code_QA','random','return_qty','stocks_QA','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','prod_invoice','True','logo','Ambient','carton','sale_product','$room','$product_details.batch_code','<tbody\x20style=\x22text-align:\x20center;\x22>','Router','Arabic\x20(ae)','max_per_unit','room_name','padStart','/view/:id','save','/preview/:id','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','add_sales_finished','<!DOCTYPE\x20html>','product_list','Finished\x20Goods','sales_invoice','\x20Order\x20Number\x20:\x20','</thead>','/all_sales/view','findById','$product_details.secondary_code','message','expiry_date','return_sale_QA','$sale_product.type','$product_details.type','product_code','</table>','flash','getFullYear','primary_code','Sales\x20Mail','for_categorize','\x20Order\x20Date\x20:\x20','name','$sale_product','sale_qty','$product_details._id','batch_code','secondary_unit','warehouse_name','prod_code','Received\x20Payment\x20For\x20Sale','Hindi','Enabled','date','$product_details.product_stock'];a0_0x2c6b=function(){return _0x4d0224;};return a0_0x2c6b();}