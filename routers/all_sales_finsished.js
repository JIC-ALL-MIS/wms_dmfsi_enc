var a0_0x444e3b=a0_0x2915;(function(_0x1fc048,_0x30fe9d){var _0x223ff7=a0_0x2915,_0x15b4ee=_0x1fc048();while(!![]){try{var _0x1d14ce=-parseInt(_0x223ff7(0x174))/0x1+-parseInt(_0x223ff7(0x186))/0x2*(-parseInt(_0x223ff7(0x14c))/0x3)+-parseInt(_0x223ff7(0x10e))/0x4*(parseInt(_0x223ff7(0x155))/0x5)+-parseInt(_0x223ff7(0x18f))/0x6*(parseInt(_0x223ff7(0x137))/0x7)+-parseInt(_0x223ff7(0x123))/0x8+-parseInt(_0x223ff7(0x1e6))/0x9+parseInt(_0x223ff7(0x1d6))/0xa;if(_0x1d14ce===_0x30fe9d)break;else _0x15b4ee['push'](_0x15b4ee['shift']());}catch(_0xca1525){_0x15b4ee['push'](_0x15b4ee['shift']());}}}(a0_0xc49b,0xd3b05));const express=require('express'),app=express(),router=express[a0_0x444e3b(0x10d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,c_payment_data,email_settings,sales_finished,sales_return_finished,supervisor_settings}=require(a0_0x444e3b(0x166)),auth=require(a0_0x444e3b(0x21d)),nodemailer=require(a0_0x444e3b(0x209)),users=require(a0_0x444e3b(0x202));function a0_0x2915(_0x160aa4,_0x6dde1e){var _0xc49b4=a0_0xc49b();return a0_0x2915=function(_0x291557,_0x44fcfc){_0x291557=_0x291557-0x108;var _0x4333cf=_0xc49b4[_0x291557];return _0x4333cf;},a0_0x2915(_0x160aa4,_0x6dde1e);}router['get'](a0_0x444e3b(0x18b),auth,async(_0x386b45,_0x5c6bf4)=>{var _0x32f300=a0_0x444e3b;try{const {username:_0x2e52db,email:_0x475a59,role:_0x30f64e}=_0x386b45['user'],_0x52aa9c=_0x386b45['user'],_0x5516d6=await profile[_0x32f300(0x126)]({'email':_0x52aa9c[_0x32f300(0x128)]}),_0x68d923=await master_shop[_0x32f300(0x125)]();let _0x1d9de6;if(_0x52aa9c[_0x32f300(0x12f)]==_0x32f300(0x20f)){const _0x5d754f=await staff['findOne']({'email':_0x52aa9c[_0x32f300(0x128)]});_0x1d9de6=await sales_finished['aggregate']([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0x32f300(0x1f5),'as':_0x32f300(0x1dd)}},{'$unwind':_0x32f300(0x10a)},{'$unwind':'$sale_product'},{'$group':{'_id':_0x32f300(0x127),'invoice':{'$first':'$invoice'},'customers':{'$first':_0x32f300(0x176)},'date':{'$first':_0x32f300(0x179)},'warehouse_name':{'$first':'$warehouse_name'},'sale_product':{'$push':_0x32f300(0x110)},'note':{'$first':_0x32f300(0x1a1)},'return_data':{'$first':_0x32f300(0x136)},'customers_docs':{'$first':_0x32f300(0x10a)},'total_saleproduct_quantity':{'$sum':_0x32f300(0x1b4)},'level':{'$addToSet':'$sale_product.bay'},'isle':{'$addToSet':_0x32f300(0x18d)},'type':{'$addToSet':'$sale_product.type'},'pallet':{'$addToSet':_0x32f300(0x173)},'finalize':{'$first':_0x32f300(0x1df)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);}else _0x1d9de6=await sales_finished['aggregate']([{'$lookup':{'from':_0x32f300(0x135),'localField':_0x32f300(0x1fb),'foreignField':_0x32f300(0x1f5),'as':_0x32f300(0x1dd)}},{'$unwind':_0x32f300(0x10a)},{'$unwind':_0x32f300(0x110)},{'$group':{'_id':_0x32f300(0x127),'invoice':{'$first':_0x32f300(0x1f9)},'customers':{'$first':_0x32f300(0x176)},'date':{'$first':_0x32f300(0x179)},'warehouse_name':{'$first':_0x32f300(0x194)},'sale_product':{'$push':_0x32f300(0x110)},'note':{'$first':_0x32f300(0x1a1)},'return_data':{'$first':_0x32f300(0x136)},'customers_docs':{'$first':_0x32f300(0x10a)},'total_saleproduct_quantity':{'$sum':_0x32f300(0x1b4)},'level':{'$addToSet':'$sale_product.bay'},'isle':{'$addToSet':_0x32f300(0x18d)},'type':{'$addToSet':_0x32f300(0x16a)},'pallet':{'$addToSet':_0x32f300(0x173)},'finalize':{'$first':_0x32f300(0x1df)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);if(_0x68d923[0x0][_0x32f300(0x1f0)]=='English\x20(US)'){var _0x515c08=users[_0x32f300(0x109)];console[_0x32f300(0x121)](_0x515c08);}else{if(_0x68d923[0x0][_0x32f300(0x1f0)]=='Hindi')var _0x515c08=users[_0x32f300(0x12e)];else{if(_0x68d923[0x0][_0x32f300(0x1f0)]==_0x32f300(0x147))var _0x515c08=users['German'];else{if(_0x68d923[0x0][_0x32f300(0x1f0)]==_0x32f300(0x170))var _0x515c08=users[_0x32f300(0x170)];else{if(_0x68d923[0x0][_0x32f300(0x1f0)]==_0x32f300(0x1da))var _0x515c08=users[_0x32f300(0x1da)];else{if(_0x68d923[0x0]['language']==_0x32f300(0x183))var _0x515c08=users[_0x32f300(0x1a9)];else{if(_0x68d923[0x0][_0x32f300(0x1f0)]=='Chinese')var _0x515c08=users['Chinese'];else{if(_0x68d923[0x0][_0x32f300(0x1f0)]=='Arabic\x20(ae)')var _0x515c08=users[_0x32f300(0x1e5)];}}}}}}}_0x5c6bf4[_0x32f300(0x1c3)](_0x32f300(0x211),{'success':_0x386b45[_0x32f300(0x199)](_0x32f300(0x21c)),'errors':_0x386b45[_0x32f300(0x199)](_0x32f300(0x18e)),'sales':_0x1d9de6,'profile':_0x5516d6,'role':_0x52aa9c,'master_shop':_0x68d923,'language':_0x515c08});}catch(_0x468a51){console[_0x32f300(0x121)](_0x468a51);}});async function getRandom8DigitNumber(){var _0x5e3bd3=a0_0x444e3b;const _0x4d3826=0x989680,_0x4cf69f=0x5f5e0ff,_0x25ea09=Math[_0x5e3bd3(0x1fa)](Math['random']()*(_0x4cf69f-_0x4d3826+0x1))+_0x4d3826;var _0x224bee;const _0x529ba7=await sales_finished['findOne']({'invoice':_0x5e3bd3(0x1b0)+_0x25ea09});return _0x529ba7&&_0x529ba7[_0x5e3bd3(0x1f1)]>0x0?_0x224bee=_0x5e3bd3(0x1b0)+_0x25ea09:_0x224bee=_0x5e3bd3(0x1b0)+_0x25ea09,_0x224bee;}router['get'](a0_0x444e3b(0x208),auth,async(_0x5261d3,_0x37c786)=>{var _0x9e138=a0_0x444e3b;try{const {username:_0x253f3e,email:_0x46c0aa,role:_0x434376}=_0x5261d3[_0x9e138(0x1a0)],_0x803da6=_0x5261d3[_0x9e138(0x1a0)],_0x4cf71b=await profile[_0x9e138(0x126)]({'email':_0x803da6[_0x9e138(0x128)]}),_0x26afc6=await master_shop[_0x9e138(0x125)](),_0x4e54d5=await customer[_0x9e138(0x125)]({});let _0x36074f;if(_0x803da6[_0x9e138(0x12f)]==_0x9e138(0x20f)){const _0x4d9001=await staff['findOne']({'email':_0x803da6['email']});_0x36074f=await warehouse[_0x9e138(0x1de)]([{'$match':{'status':_0x9e138(0x16b),'name':_0x4d9001['warehouse'],'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x9e138(0x151)}}},{'$group':{'_id':_0x9e138(0x20c),'name':{'$first':_0x9e138(0x20c)}}},{'$sort':{'name':0x1}}]);}else _0x36074f=await warehouse[_0x9e138(0x1de)]([{'$match':{'status':_0x9e138(0x16b),'warehouse_category':_0x9e138(0x1b5),'name':{'$ne':_0x9e138(0x151)}}},{'$group':{'_id':_0x9e138(0x20c),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]);const _0x194a9d=await product[_0x9e138(0x125)]({});var _0x36a960=['Ambient','Enclosed'];const _0x403bf9=await sales_finished['find']({}),_0xe2f187=_0x403bf9[_0x9e138(0x1f1)]+0x1,_0x4564f8=_0x9e138(0x1b0)+_0xe2f187[_0x9e138(0x16d)]()[_0x9e138(0x1db)](0x5,'0');if(_0x26afc6[0x0][_0x9e138(0x1f0)]=='English\x20(US)'){var _0x34bea7=users['English'];console[_0x9e138(0x121)](_0x34bea7);}else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x12e))var _0x34bea7=users[_0x9e138(0x12e)];else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x147))var _0x34bea7=users['German'];else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x170))var _0x34bea7=users['Spanish'];else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x1da))var _0x34bea7=users[_0x9e138(0x1da)];else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x183))var _0x34bea7=users[_0x9e138(0x1a9)];else{if(_0x26afc6[0x0][_0x9e138(0x1f0)]==_0x9e138(0x11d))var _0x34bea7=users[_0x9e138(0x11d)];else{if(_0x26afc6[0x0]['language']=='Arabic\x20(ae)')var _0x34bea7=users[_0x9e138(0x1e5)];}}}}}}}const _0x5692ba=getRandom8DigitNumber();_0x5692ba[_0x9e138(0x18c)](_0x1196b0=>{var _0x532e3c=_0x9e138;_0x37c786[_0x532e3c(0x1c3)]('add_sales_finished',{'success':_0x5261d3['flash'](_0x532e3c(0x21c)),'errors':_0x5261d3[_0x532e3c(0x199)](_0x532e3c(0x18e)),'role':_0x803da6,'profile':_0x4cf71b,'customer':_0x4e54d5,'warehouse':_0x36074f,'product':_0x194a9d,'invoice':_0x1196b0,'master_shop':_0x26afc6,'language':_0x34bea7,'rooms_data':_0x36a960});})[_0x9e138(0x1b7)](_0x58fe9f=>{var _0x17511e=_0x9e138;_0x5261d3['flash'](_0x17511e(0x18e),_0x17511e(0x1d0)),_0x37c786[_0x17511e(0x152)]('/all_sales_finished/view');});}catch(_0x4d153e){console['log'](_0x4d153e);}}),router[a0_0x444e3b(0x10f)](a0_0x444e3b(0x207),auth,async(_0x5650b1,_0x13f862)=>{var _0x11d32e=a0_0x444e3b;try{const _0x2fe3d9=_0x5650b1[_0x11d32e(0x206)]['id'];console[_0x11d32e(0x121)](_0x2fe3d9);const _0x473ffd=await product[_0x11d32e(0x125)](),_0x104ba8=await purchases[_0x11d32e(0x1de)]([{'$match':{'warehouse_name':_0x2fe3d9}},{'$unwind':_0x11d32e(0x13b)},{'$group':{'_id':_0x11d32e(0x145)}}]);console['log']('purchases_data',_0x104ba8),_0x13f862['status'](0xc8)[_0x11d32e(0x134)]({'purchases_data':_0x104ba8,'product_data':_0x473ffd});}catch(_0x3d3ca6){console[_0x11d32e(0x121)](_0x3d3ca6);}}),router[a0_0x444e3b(0x108)]('/view/add_sale/product',auth,async(_0x2fa8b4,_0x358f1c)=>{var _0x20543d=a0_0x444e3b;try{const {warehouse_data:_0x23df50,product_data:_0x468194}=_0x2fa8b4['body'];console[_0x20543d(0x121)](_0x2fa8b4['body'][_0x20543d(0x1c2)]);;const _0x4b9218=await master_shop[_0x20543d(0x125)]();console[_0x20543d(0x121)]('master',_0x4b9218);const _0x4abc7c=await product[_0x20543d(0x126)]({'name':_0x468194});console['log'](_0x20543d(0x158),_0x4abc7c);const _0x298299=await warehouse[_0x20543d(0x1de)]([{'$match':{'name':_0x23df50}},{'$unwind':_0x20543d(0x1c5)},{'$match':{'product_details.product_name':_0x468194}},{'$group':{'_id':'$product_details.product_name','product_stock':{'$first':_0x20543d(0x214)}}}]);console[_0x20543d(0x121)]('stock_data',_0x298299),_0x358f1c['status'](0xc8)[_0x20543d(0x134)]({'master':_0x4b9218,'new_product':_0x4abc7c,'stock_data':_0x298299});}catch(_0x299be4){console[_0x20543d(0x121)](_0x299be4);}}),router[a0_0x444e3b(0x108)]('/view/add_sales',auth,async(_0x923194,_0x3e3c54)=>{var _0x2b48ea=a0_0x444e3b;try{const {invoice:_0x2f037c,date:_0x59800e,warehouse_name:_0x3b4983,product_name:_0x5cc700,stock:_0x57e3e0,quantity:_0x45acde,note:_0x2a6b72,room:_0x442be8,primary_code:_0x388a4e,secondary_code:_0x59ae49,prod_code:_0x2f040f,level:_0x1364a5,isle:_0x9e30a7,pallet:_0x229be7,batch_code:_0x327746,SCRN:_0x1b63b4,expiry_date:_0x20f781,mode_transpo:_0x45ddcc,name_driver:_0x4a2229}=_0x923194[_0x2b48ea(0x1cd)];if(typeof _0x5cc700==_0x2b48ea(0x165))var _0x26a738=[_0x923194['body'][_0x2b48ea(0x1ce)]],_0x5eab91=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1a8)]],_0x5a9cd7=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1b3)]],_0x5eb0c5=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x219)]],_0x29b358=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x17b)]],_0xb60ebd=[_0x923194[_0x2b48ea(0x1cd)]['prod_code']],_0x1df091=[_0x923194['body'][_0x2b48ea(0x1d4)]],_0x4938b4=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x10c)]],_0x2d3630=[_0x923194['body'][_0x2b48ea(0x12b)]],_0x17f6c8=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1e2)]],_0x47899a=[_0x923194[_0x2b48ea(0x1cd)]['expiry_date']],_0x427429=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x13f)]],_0x3d47f3=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1be)]],_0x4b19b1=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x142)]],_0x9f51df=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1b1)]],_0x31a318=[_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1fd)]];else var _0x26a738=[..._0x923194[_0x2b48ea(0x1cd)]['product_name']],_0x5eab91=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1a8)]],_0x5a9cd7=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1b3)]],_0x5eb0c5=[..._0x923194['body'][_0x2b48ea(0x219)]],_0x29b358=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x17b)]],_0xb60ebd=[..._0x923194['body'][_0x2b48ea(0x124)]],_0x1df091=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1d4)]],_0x4938b4=[..._0x923194[_0x2b48ea(0x1cd)]['primary_unit']],_0x2d3630=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x12b)]],_0x17f6c8=[..._0x923194[_0x2b48ea(0x1cd)]['batch_code']],_0x47899a=[..._0x923194[_0x2b48ea(0x1cd)]['expiry_date']],_0x427429=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x13f)]],_0x3d47f3=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1be)]],_0x4b19b1=[..._0x923194['body'][_0x2b48ea(0x142)]],_0x9f51df=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1b1)]],_0x31a318=[..._0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1fd)]];const _0x117a13=_0x26a738[_0x2b48ea(0x156)](_0x38dea6=>{return _0x38dea6={'product_name':_0x38dea6};});_0x5eab91[_0x2b48ea(0x187)]((_0x9fa841,_0x1e3a74)=>{var _0x47e4a5=_0x2b48ea;_0x117a13[_0x1e3a74][_0x47e4a5(0x1a8)]=_0x9fa841;}),_0x5a9cd7[_0x2b48ea(0x187)]((_0x3d5066,_0x1f2351)=>{var _0x30b313=_0x2b48ea;_0x117a13[_0x1f2351][_0x30b313(0x129)]=Math[_0x30b313(0x182)](_0x3d5066);}),_0x5eb0c5[_0x2b48ea(0x187)]((_0x8b5ba2,_0xe9c16e)=>{var _0xd3078e=_0x2b48ea;_0x117a13[_0xe9c16e][_0xd3078e(0x219)]=_0x8b5ba2;}),_0x29b358[_0x2b48ea(0x187)]((_0x4916fd,_0x2eda34)=>{var _0x450e52=_0x2b48ea;_0x117a13[_0x2eda34][_0x450e52(0x17b)]=_0x4916fd;}),_0xb60ebd[_0x2b48ea(0x187)]((_0x2efb71,_0x1a7e71)=>{var _0x1322c0=_0x2b48ea;_0x117a13[_0x1a7e71][_0x1322c0(0x14b)]=_0x2efb71;}),_0x1df091[_0x2b48ea(0x187)]((_0x2b2822,_0x55f423)=>{var _0x5b6b5b=_0x2b48ea;_0x117a13[_0x55f423][_0x5b6b5b(0x1ff)]=_0x2b2822;}),_0x4938b4[_0x2b48ea(0x187)]((_0x3fc6da,_0x56f494)=>{var _0x3e6c25=_0x2b48ea;_0x117a13[_0x56f494][_0x3e6c25(0x190)]=_0x3fc6da;}),_0x2d3630[_0x2b48ea(0x187)]((_0x55daf1,_0x269b73)=>{var _0x2147b6=_0x2b48ea;_0x117a13[_0x269b73][_0x2147b6(0x12b)]=_0x55daf1;}),_0x17f6c8['forEach']((_0x2fcff6,_0x4d4956)=>{var _0x11c501=_0x2b48ea;_0x117a13[_0x4d4956][_0x11c501(0x1e2)]=_0x2fcff6;}),_0x47899a[_0x2b48ea(0x187)]((_0x5da2da,_0x5563cd)=>{var _0xf0654a=_0x2b48ea;_0x117a13[_0x5563cd][_0xf0654a(0x118)]=_0x5da2da;}),_0x427429[_0x2b48ea(0x187)]((_0x563ed9,_0x2999b8)=>{_0x117a13[_0x2999b8]['production_date']=_0x563ed9;}),_0x3d47f3['forEach']((_0x5ef630,_0x20fd44)=>{_0x117a13[_0x20fd44]['maxperunit']=_0x5ef630;}),_0x4b19b1[_0x2b48ea(0x187)]((_0x26b6f6,_0x21fb4d)=>{var _0x2cb337=_0x2b48ea;_0x117a13[_0x21fb4d][_0x2cb337(0x142)]=_0x26b6f6;}),_0x9f51df[_0x2b48ea(0x187)]((_0x465b92,_0x3763ab)=>{_0x117a13[_0x3763ab]['room_name']=_0x465b92;}),_0x31a318[_0x2b48ea(0x187)]((_0x137c4a,_0x349786)=>{_0x117a13[_0x349786]['invoice']=_0x137c4a;});var _0x443688=0x0;_0x117a13[_0x2b48ea(0x187)](_0xfec08b=>{var _0x48e43b=_0x2b48ea;parseFloat(_0xfec08b[_0x48e43b(0x1a8)])<parseFloat(_0xfec08b[_0x48e43b(0x129)])&&parseFloat(_0xfec08b['quantity'])>parseFloat(_0xfec08b['stock'])&&(console['log'](_0xfec08b[_0x48e43b(0x1a8)]+'\x20<>\x20'+_0xfec08b[_0x48e43b(0x129)]),_0x443688++);});if(_0x443688!=0x0)return _0x923194[_0x2b48ea(0x199)](_0x2b48ea(0x18e),'Must\x20not\x20be\x20greater\x20or\x20less\x20than\x20stock\x20Qty'),_0x3e3c54[_0x2b48ea(0x152)](_0x2b48ea(0x1c0));const _0x3c3ead=_0x117a13[_0x2b48ea(0x164)](_0x444993=>_0x444993[_0x2b48ea(0x129)]!=='0'&&_0x444993[_0x2b48ea(0x129)]!==''),_0x2f45d4=new sales_finished({'invoice':_0x2f037c,'customer':_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1fb)],'date':_0x59800e,'warehouse_name':_0x3b4983,'sale_product':_0x3c3ead,'note':_0x2a6b72,'room':_0x442be8,'primary_code':_0x388a4e,'secondary_code':_0x59ae49,'prod_code':_0x2f040f,'SCRN':_0x1b63b4,'finalize':'False','mode_transpo':_0x45ddcc,'name_driver':_0x4a2229}),_0x288bd6=await _0x2f45d4['save'](),_0x5b74a7=await sales_finished['findOne']({'invoice':_0x2f037c}),_0x300151=new c_payment_data({'invoice':_0x2f037c,'customer':_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1fb)],'reason':'Sale'});await _0x300151[_0x2b48ea(0x160)]();const _0x326d86=await master_shop['find'](),_0x2b6512=await email_settings[_0x2b48ea(0x126)](),_0xc1e8e2=await customer[_0x2b48ea(0x126)]({'name':_0x923194[_0x2b48ea(0x1cd)][_0x2b48ea(0x1fb)]});_0x326d86[0x0][_0x2b48ea(0x113)]==0x1?(right_currency=_0x326d86[0x0][_0x2b48ea(0x1cf)],left_currency=''):(right_currency='',left_currency=_0x326d86[0x0]['currency']);var _0x3c604b=_0x26a738,_0x36f65b=_0x5a9cd7,_0x30a360='',_0x245632;for(_0x245632 in _0x3c604b){_0x30a360+=_0x2b48ea(0x15c)+_0x2b48ea(0x12d)+_0x3c604b[_0x245632]+_0x2b48ea(0x201)+_0x2b48ea(0x12d)+_0x36f65b[_0x245632]+_0x2b48ea(0x201)+_0x2b48ea(0x15a);}console[_0x2b48ea(0x121)](_0x2b48ea(0x1fe),_0x30a360);let _0x15a71b=nodemailer[_0x2b48ea(0x1ab)]({'service':_0x2b48ea(0x168),'auth':{'user':_0x2b6512['email'],'pass':_0x2b6512['password']}}),_0x14f928={'from':_0x2b6512['email'],'to':_0xc1e8e2[_0x2b48ea(0x128)],'subject':'Sale\x20Product\x20Mail','attachments':[{'filename':_0x2b48ea(0x17d),'path':__dirname+_0x2b48ea(0x1a5)+_0x2b48ea(0x11a)+_0x326d86[0x0]['image'],'cid':_0x2b48ea(0x1ae)}],'html':_0x2b48ea(0x1c4)+'<html><head><title></title>'+_0x2b48ea(0x1e3)+_0x2b48ea(0x19e)+_0x2b48ea(0x1b8)+_0x2b48ea(0x19e)+_0x2b48ea(0x17a)+_0x2b48ea(0x139)+_0x2b48ea(0x19e)+'<h2>\x20'+_0x326d86[0x0][_0x2b48ea(0x138)]+_0x2b48ea(0x163)+_0x2b48ea(0x139)+_0x2b48ea(0x139)+_0x2b48ea(0x20d)+_0x2b48ea(0x19e)+_0x2b48ea(0x16e)+_0x2b48ea(0x161)+_0x2f037c+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x2b48ea(0x216)+_0x59800e+'\x20'+_0x2b48ea(0x192)+_0x2b48ea(0x19b)+_0x2b48ea(0x139)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2b48ea(0x1ea)+_0x2b48ea(0x15c)+_0x2b48ea(0x185)+_0x2b48ea(0x1e1)+_0x2b48ea(0x15a)+_0x2b48ea(0x19f)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x30a360+'\x20'+_0x2b48ea(0x15b)+_0x2b48ea(0x1a6)+_0x2b48ea(0x19e)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x326d86[0x0][_0x2b48ea(0x138)]+_0x2b48ea(0x19b)+_0x2b48ea(0x139)+'</div>'+'</body></html>'};_0x15a71b[_0x2b48ea(0x1d8)](_0x14f928,function(_0x2360f7,_0x30be37){var _0x32764e=_0x2b48ea;_0x2360f7?(console[_0x32764e(0x121)](_0x2360f7),console['log'](_0x32764e(0x13c))):console[_0x32764e(0x121)](_0x32764e(0x19c));}),_0x923194[_0x2b48ea(0x199)](_0x2b48ea(0x21c),_0x2b48ea(0x1a2)),_0x3e3c54[_0x2b48ea(0x152)](_0x2b48ea(0x14a)+_0x288bd6[_0x2b48ea(0x184)]);}catch(_0x545241){console['log'](_0x545241);}}),router[a0_0x444e3b(0x10f)](a0_0x444e3b(0x130),auth,async(_0x143b10,_0x5bb35d)=>{var _0x5f4069=a0_0x444e3b;try{const {username:_0x2969f7,email:_0x50d5ec,role:_0x27f985}=_0x143b10[_0x5f4069(0x1a0)],_0x23ff50=_0x143b10[_0x5f4069(0x1a0)],_0x213917=await profile[_0x5f4069(0x126)]({'email':_0x23ff50[_0x5f4069(0x128)]}),_0x96572f=await master_shop[_0x5f4069(0x125)](),_0x2a86f9=_0x143b10[_0x5f4069(0x206)]['id'],_0x5068f5=await sales_finished[_0x5f4069(0x112)](_0x2a86f9),_0x59b57f=await warehouse[_0x5f4069(0x1de)]([{'$match':{'name':_0x5068f5['warehouse_name']}},{'$unwind':_0x5f4069(0x1c5)},{'$group':{'_id':_0x5f4069(0x20e),'name':{'$first':_0x5f4069(0x15f)},'product_stock':{'$first':_0x5f4069(0x214)},'bay':{'$first':_0x5f4069(0x19d)},'bin':{'$first':_0x5f4069(0x117)},'type':{'$first':_0x5f4069(0x1e9)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x5f4069(0x195)},'secondary_code':{'$first':_0x5f4069(0x17e)},'product_code':{'$first':_0x5f4069(0x17c)},'storage':{'$first':_0x5f4069(0x1e0)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x5f4069(0x1e7)},'production_date':{'$first':_0x5f4069(0x12a)},'batch_code':{'$first':_0x5f4069(0x1ec)},'room':{'$first':_0x5f4069(0x1d9)}}}]),_0x1f232b=await customer[_0x5f4069(0x125)]({});let _0x3532ba;if(_0x23ff50[_0x5f4069(0x12f)]==_0x5f4069(0x20f)){const _0x50f174=await staff[_0x5f4069(0x126)]({'email':_0x23ff50[_0x5f4069(0x128)]});_0x3532ba=await warehouse[_0x5f4069(0x1de)]([{'$match':{'status':'Enabled','name':_0x50f174[_0x5f4069(0x193)]}},{'$group':{'_id':_0x5f4069(0x20c),'name':{'$first':_0x5f4069(0x20c)}}}]);}else _0x3532ba=await warehouse[_0x5f4069(0x1de)]([{'$match':{'status':_0x5f4069(0x16b)}},{'$group':{'_id':_0x5f4069(0x20c),'name':{'$first':_0x5f4069(0x20c)}}}]);const _0x32aa55=await product['find']({});if(_0x96572f[0x0][_0x5f4069(0x1f0)]==_0x5f4069(0x10b)){var _0x216e11=users['English'];console[_0x5f4069(0x121)](_0x216e11);}else{if(_0x96572f[0x0]['language']==_0x5f4069(0x12e))var _0x216e11=users['Hindi'];else{if(_0x96572f[0x0]['language']==_0x5f4069(0x147))var _0x216e11=users[_0x5f4069(0x147)];else{if(_0x96572f[0x0][_0x5f4069(0x1f0)]==_0x5f4069(0x170))var _0x216e11=users[_0x5f4069(0x170)];else{if(_0x96572f[0x0]['language']==_0x5f4069(0x1da))var _0x216e11=users['French'];else{if(_0x96572f[0x0][_0x5f4069(0x1f0)]=='Portuguese\x20(BR)')var _0x216e11=users[_0x5f4069(0x1a9)];else{if(_0x96572f[0x0][_0x5f4069(0x1f0)]=='Chinese')var _0x216e11=users[_0x5f4069(0x11d)];else{if(_0x96572f[0x0][_0x5f4069(0x1f0)]==_0x5f4069(0x21b))var _0x216e11=users['Arabic'];}}}}}}}_0x5bb35d['render'](_0x5f4069(0x132),{'success':_0x143b10[_0x5f4069(0x199)](_0x5f4069(0x21c)),'errors':_0x143b10[_0x5f4069(0x199)](_0x5f4069(0x18e)),'role':_0x23ff50,'profile':_0x213917,'customer':_0x1f232b,'warehouse':_0x3532ba,'product':_0x59b57f,'user':_0x5068f5,'master_shop':_0x96572f,'unit':_0x32aa55,'language':_0x216e11});}catch(_0x2f122a){console['log'](_0x2f122a);}}),router[a0_0x444e3b(0x108)](a0_0x444e3b(0x130),auth,async(_0x3fb9f5,_0x1b0bf4)=>{var _0x110694=a0_0x444e3b;try{const _0x35abca=_0x3fb9f5[_0x110694(0x206)]['id'],{invoice:_0x2ac285,warehouse_name:_0x48c0be,room:_0x1fc9b8}=_0x3fb9f5[_0x110694(0x1cd)],_0x3e9d51=await sales_finished[_0x110694(0x126)]({'invoice':_0x2ac285}),_0x15e251=_0x3e9d51[_0x110694(0x1b9)][_0x110694(0x156)](async _0x129980=>{var _0x24f96b=_0x110694,_0x5ad8da=await warehouse['findOne']({'name':_0x48c0be,'room':_0x129980[_0x24f96b(0x1ca)],'warehouse_category':_0x24f96b(0x1b5)});const _0x341e6e=_0x5ad8da[_0x24f96b(0x14f)][_0x24f96b(0x156)](_0xe6fb23=>{var _0xe80157=_0x24f96b;_0xe6fb23['product_name']==_0x129980[_0xe80157(0x1ce)]&&_0xe6fb23['bay']==_0x129980[_0xe80157(0x1ff)]&&_0xe6fb23[_0xe80157(0x118)]==_0x129980[_0xe80157(0x118)]&&_0xe6fb23[_0xe80157(0x1ba)]==_0x129980[_0xe80157(0x1ba)]&&_0xe6fb23['batch_code']==_0x129980[_0xe80157(0x1e2)]&&_0xe6fb23[_0xe80157(0x197)]==_0x129980[_0xe80157(0x197)]&&(_0xe6fb23[_0xe80157(0x1af)]=Math[_0xe80157(0x182)](_0xe6fb23[_0xe80157(0x1af)])-Math[_0xe80157(0x182)](_0x129980[_0xe80157(0x129)]));});return _0x5ad8da;});Promise[_0x110694(0x17f)](_0x15e251)[_0x110694(0x18c)](async _0x2c6fda=>{var _0x2a27a1=_0x110694;try{for(const _0x26c623 of _0x2c6fda){await _0x26c623[_0x2a27a1(0x160)]();}_0x3e9d51['finalize']=_0x2a27a1(0x148);const _0x3c209e=await _0x3e9d51[_0x2a27a1(0x160)](),_0x11b21b=await master_shop[_0x2a27a1(0x125)](),_0x128946=await email_settings[_0x2a27a1(0x126)](),_0x128221=await supervisor_settings[_0x2a27a1(0x125)]();var _0x13bdbf=_0x3e9d51[_0x2a27a1(0x1b9)],_0xdabc20='',_0x370a77;for(_0x370a77 in _0x13bdbf){var _0x53f9e7='FG';_0x3e9d51[_0x2a27a1(0x1c9)]==_0x2a27a1(0x14e)&&(_0x53f9e7='DG'),_0xdabc20+=_0x2a27a1(0x15c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x13bdbf[_0x370a77][_0x2a27a1(0x1ce)]+_0x2a27a1(0x201)+_0x2a27a1(0x12d)+_0x13bdbf[_0x370a77]['product_code']+_0x2a27a1(0x201)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x13bdbf[_0x370a77][_0x2a27a1(0x129)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x13bdbf[_0x370a77][_0x2a27a1(0x190)]+_0x2a27a1(0x201)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x13bdbf[_0x370a77][_0x2a27a1(0x12b)]+_0x2a27a1(0x201)+_0x2a27a1(0x12d)+_0x3e9d51['warehouse_name']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x13bdbf[_0x370a77][_0x2a27a1(0x1ca)]+_0x2a27a1(0x201)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x53f9e7+_0x13bdbf[_0x370a77][_0x2a27a1(0x1ff)]+_0x2a27a1(0x201);}let _0x4f3b2b=nodemailer[_0x2a27a1(0x1ab)]({'host':_0x128946[_0x2a27a1(0x189)],'port':Number(_0x128946[_0x2a27a1(0x1f3)]),'secure':![],'auth':{'user':_0x128946[_0x2a27a1(0x128)],'pass':_0x128946[_0x2a27a1(0x180)]}}),_0x74cf0={'from':_0x128946['email'],'to':_0x128221[0x0][_0x2a27a1(0x213)],'subject':'Sales\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x2a27a1(0x11a)+_0x11b21b[0x0][_0x2a27a1(0x19a)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x2a27a1(0x21a)+_0x2a27a1(0x1e3)+_0x2a27a1(0x19e)+_0x2a27a1(0x1b8)+'<div>'+_0x2a27a1(0x17a)+_0x2a27a1(0x139)+_0x2a27a1(0x19e)+_0x2a27a1(0x1c8)+_0x11b21b[0x0][_0x2a27a1(0x138)]+'\x20</h2>'+'</div>'+_0x2a27a1(0x139)+_0x2a27a1(0x20d)+_0x2a27a1(0x19e)+_0x2a27a1(0x16e)+'\x20Order\x20Number\x20:\x20'+_0x3e9d51['invoice']+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x2a27a1(0x216)+_0x3e9d51[_0x2a27a1(0x171)]+'\x20'+'</span>'+'</h5>'+_0x2a27a1(0x139)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2a27a1(0x1ea)+_0x2a27a1(0x15c)+_0x2a27a1(0x185)+_0x2a27a1(0x1bd)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x2a27a1(0x12c)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x2a27a1(0x205)+_0x2a27a1(0x188)+_0x2a27a1(0x15a)+_0x2a27a1(0x19f)+_0x2a27a1(0x1d3)+'\x20'+_0xdabc20+'\x20'+_0x2a27a1(0x15b)+_0x2a27a1(0x1a6)+_0x2a27a1(0x19e)+_0x2a27a1(0x198)+_0x2a27a1(0x217)+_0x11b21b[0x0][_0x2a27a1(0x138)]+_0x2a27a1(0x19b)+_0x2a27a1(0x139)+_0x2a27a1(0x139)+_0x2a27a1(0x133)};_0x4f3b2b[_0x2a27a1(0x1d8)](_0x74cf0,function(_0x3b1fca,_0x293c45){var _0x533adf=_0x2a27a1;_0x3b1fca?(console[_0x533adf(0x121)](_0x3b1fca),console['log']('Error\x20Occurs')):console[_0x533adf(0x121)]('Email\x20sent\x20successfully');}),_0x3fb9f5[_0x2a27a1(0x199)](_0x2a27a1(0x21c),_0x2a27a1(0x13e)),_0x1b0bf4['redirect'](_0x2a27a1(0x204)+_0x35abca);}catch(_0x36fc0b){console[_0x2a27a1(0x140)](_0x36fc0b),_0x1b0bf4[_0x2a27a1(0x191)](0x1f4)[_0x2a27a1(0x134)]({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x110694(0x1b7)](_0x59d485=>{var _0x4c2b1c=_0x110694;console[_0x4c2b1c(0x140)](_0x59d485),_0x1b0bf4['status'](0x1f4)['json']({'error':_0x4c2b1c(0x143)});});}catch(_0x3bd816){console[_0x110694(0x121)](_0x3bd816);}}),router[a0_0x444e3b(0x10f)](a0_0x444e3b(0x114),auth,async(_0xd0677c,_0x4d57c4)=>{var _0xa0e3bb=a0_0x444e3b;try{const {username:_0xcc355e,email:_0x193903,role:_0x2603b3}=_0xd0677c[_0xa0e3bb(0x1a0)],_0x168985=_0xd0677c[_0xa0e3bb(0x1a0)],_0x12ae1a=await profile[_0xa0e3bb(0x126)]({'email':_0x168985['email']}),_0x1e230e=await master_shop[_0xa0e3bb(0x125)](),_0x40df0a=_0xd0677c['params']['id'],_0x4ec1b9=await sales_finished['findById'](_0x40df0a);let _0x2041c7=new Date(_0x4ec1b9[_0xa0e3bb(0x118)]),_0x4ccbab=('0'+_0x2041c7[_0xa0e3bb(0x1c1)]())[_0xa0e3bb(0x16c)](-0x2),_0x1f4b67=('0'+(_0x2041c7['getMonth']()+0x1))['slice'](-0x2),_0x575126=_0x2041c7[_0xa0e3bb(0x172)](),_0x39e0de=_0x575126+'-'+_0x1f4b67+'-'+_0x4ccbab;var _0x24ec63=[_0xa0e3bb(0x1dc),_0xa0e3bb(0x1f2)];const _0x2a0e9c=await warehouse[_0xa0e3bb(0x1de)]([{'$match':{'name':_0x4ec1b9[_0xa0e3bb(0x1c9)],'room':_0x4ec1b9[_0xa0e3bb(0x215)]}},{'$unwind':_0xa0e3bb(0x1c5)},{'$group':{'_id':_0xa0e3bb(0x20e),'name':{'$first':_0xa0e3bb(0x15f)},'product_stock':{'$first':_0xa0e3bb(0x214)},'bay':{'$first':_0xa0e3bb(0x19d)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0xa0e3bb(0x1e9)},'floorlevel':{'$first':_0xa0e3bb(0x15d)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xa0e3bb(0x17c)},'storage':{'$first':_0xa0e3bb(0x1e0)},'rack':{'$first':'$product_details.rack'}}}]),_0x1addfe=await customer['find']({});let _0x337052;if(_0x168985[_0xa0e3bb(0x12f)]==_0xa0e3bb(0x20f)){const _0x1f37c9=await staff['findOne']({'email':_0x168985[_0xa0e3bb(0x128)]});_0x337052=await warehouse[_0xa0e3bb(0x1de)]([{'$match':{'status':_0xa0e3bb(0x16b),'name':_0x1f37c9[_0xa0e3bb(0x193)]}},{'$group':{'_id':_0xa0e3bb(0x20c),'name':{'$first':_0xa0e3bb(0x20c)}}}]);}else _0x337052=await warehouse[_0xa0e3bb(0x1de)]([{'$match':{'status':_0xa0e3bb(0x16b)}},{'$group':{'_id':_0xa0e3bb(0x20c),'name':{'$first':_0xa0e3bb(0x20c)}}}]);const _0x1fe8fe=await product['find']({});if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]==_0xa0e3bb(0x10b)){var _0x41eeab=users['English'];console[_0xa0e3bb(0x121)](_0x41eeab);}else{if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]=='Hindi')var _0x41eeab=users[_0xa0e3bb(0x12e)];else{if(_0x1e230e[0x0]['language']==_0xa0e3bb(0x147))var _0x41eeab=users[_0xa0e3bb(0x147)];else{if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]==_0xa0e3bb(0x170))var _0x41eeab=users[_0xa0e3bb(0x170)];else{if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]==_0xa0e3bb(0x1da))var _0x41eeab=users[_0xa0e3bb(0x1da)];else{if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]=='Portuguese\x20(BR)')var _0x41eeab=users[_0xa0e3bb(0x1a9)];else{if(_0x1e230e[0x0][_0xa0e3bb(0x1f0)]==_0xa0e3bb(0x11d))var _0x41eeab=users['Chinese'];else{if(_0x1e230e[0x0]['language']==_0xa0e3bb(0x21b))var _0x41eeab=users[_0xa0e3bb(0x1e5)];}}}}}}}_0x4d57c4[_0xa0e3bb(0x1c3)](_0xa0e3bb(0x181),{'success':_0xd0677c[_0xa0e3bb(0x199)](_0xa0e3bb(0x21c)),'errors':_0xd0677c[_0xa0e3bb(0x199)](_0xa0e3bb(0x18e)),'role':_0x168985,'profile':_0x12ae1a,'customer':_0x1addfe,'warehouse':_0x337052,'product':_0x2a0e9c,'user':_0x4ec1b9,'master_shop':_0x1e230e,'unit':_0x1fe8fe,'language':_0x41eeab,'rooms_data':_0x24ec63,'ed_fullDate':_0x39e0de});}catch(_0x9e6f55){console[_0xa0e3bb(0x121)](_0x9e6f55);}}),router[a0_0x444e3b(0x108)](a0_0x444e3b(0x114),auth,async(_0x13bb8a,_0x3a1180)=>{var _0x16d155=a0_0x444e3b;try{const _0x112b55=_0x13bb8a[_0x16d155(0x206)]['id'],_0x273612=await sales_finished['findOne']({'_id':_0x13bb8a['params']['id']}),_0xd25d4f=await warehouse[_0x16d155(0x126)]({'name':_0x273612[_0x16d155(0x1c9)],'room':_0x13bb8a[_0x16d155(0x1cd)]['room'],'warehouse_category':'Finished\x20Goods'}),{invoice:_0x4d1aa7,customer:_0x1bf1ce,date:_0x29e838,warehouse_name:_0x3b7277,product_name:_0x53ea0b,stock:_0x597c60,adjust_qty:_0x79ce0a,note:_0x5e810a,room:_0x115712,primary_code:_0x5cbbf4,secondary_code:_0x33583e,prod_code:_0x27e67b,level:_0x37c35b,isle:_0x42bdd0,pallet:_0x37cc38,expiry_date:_0xbf3e8c}=_0x13bb8a[_0x16d155(0x1cd)];if(typeof _0x53ea0b==_0x16d155(0x165))var _0x2e12ce=[_0x13bb8a['body'][_0x16d155(0x1ce)]],_0x221560=[_0x13bb8a['body'][_0x16d155(0x1a8)]],_0xb0241a=[_0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x1ee)]],_0x3119e2=[_0x13bb8a[_0x16d155(0x1cd)]['primary_code']],_0x46f148=[_0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x17b)]],_0x5e29d2=[_0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x124)]],_0xac1e28=[_0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x1d4)]],_0x338ad6=[_0x13bb8a['body'][_0x16d155(0x118)]];else var _0x2e12ce=[..._0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x1ce)]],_0x221560=[..._0x13bb8a['body']['stock']],_0xb0241a=[..._0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x1ee)]],_0x3119e2=[..._0x13bb8a[_0x16d155(0x1cd)]['primary_code']],_0x46f148=[..._0x13bb8a[_0x16d155(0x1cd)]['secondary_code']],_0x5e29d2=[..._0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x124)]],_0xac1e28=[..._0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x1d4)]],_0x338ad6=[..._0x13bb8a[_0x16d155(0x1cd)]['expiry_date']];const _0x47336b=_0x2e12ce[_0x16d155(0x156)](_0x61395a=>{return _0x61395a={'product_name':_0x61395a};});_0x221560[_0x16d155(0x187)]((_0x12164d,_0x2dac51)=>{var _0x57e770=_0x16d155;_0x47336b[_0x2dac51][_0x57e770(0x1a8)]=_0x12164d;}),_0xb0241a[_0x16d155(0x187)]((_0x5b47fc,_0x325c68)=>{var _0x5ead53=_0x16d155;_0x47336b[_0x325c68][_0x5ead53(0x129)]=_0x5b47fc;}),_0x3119e2[_0x16d155(0x187)]((_0x529316,_0x47b23f)=>{var _0x9d4b3d=_0x16d155;_0x47336b[_0x47b23f][_0x9d4b3d(0x219)]=_0x529316;}),_0x46f148[_0x16d155(0x187)]((_0x5ccfd9,_0x27c577)=>{var _0x31b997=_0x16d155;_0x47336b[_0x27c577][_0x31b997(0x17b)]=_0x5ccfd9;}),_0x5e29d2[_0x16d155(0x187)]((_0x107bdf,_0x1ec144)=>{_0x47336b[_0x1ec144]['product_code']=_0x107bdf;}),_0xac1e28['forEach']((_0x4725b2,_0x1594c6)=>{_0x47336b[_0x1594c6]['level']=_0x4725b2;}),_0x338ad6[_0x16d155(0x187)]((_0x576c9b,_0x1ad65f)=>{_0x47336b[_0x1ad65f]['expiry_date']=_0x576c9b;});var _0x538937=0x0;_0x47336b[_0x16d155(0x187)](_0x1e2f41=>{var _0x470ac5=_0x16d155;console[_0x470ac5(0x121)](_0x470ac5(0x157),_0x1e2f41),(parseInt(_0x1e2f41[_0x470ac5(0x1a8)])<parseInt(_0x1e2f41['quantity'])||parseInt(_0x1e2f41['quantity'])==0x0)&&_0x538937++;});if(_0x538937!=0x0)return _0x13bb8a[_0x16d155(0x199)](_0x16d155(0x18e),_0x16d155(0x150)),_0x3a1180['redirect'](_0x16d155(0x1c0));_0x273612[_0x16d155(0x1b9)][_0x16d155(0x187)](_0x52582f=>{var _0x9c466c=_0x16d155;const _0x3080d5=_0xd25d4f[_0x9c466c(0x14f)][_0x9c466c(0x156)](_0x37c2d5=>{var _0x2efd28=_0x9c466c;_0x37c2d5[_0x2efd28(0x1ce)]==_0x52582f[_0x2efd28(0x1ce)]&&_0x37c2d5[_0x2efd28(0x1ff)]==_0x52582f[_0x2efd28(0x1ff)]&&(_0x37c2d5['product_stock']=parseInt(_0x37c2d5[_0x2efd28(0x1af)])+parseInt(_0x52582f['quantity']));});}),await _0xd25d4f[_0x16d155(0x160)]();const _0x87e6e6=_0x47336b[_0x16d155(0x164)](_0xdfee4e=>_0xdfee4e['quantity']!=='0'&&_0xdfee4e['quantity']!=='');_0x273612[_0x16d155(0x197)]=_0x4d1aa7,_0x273612[_0x16d155(0x1fb)]=_0x1bf1ce,_0x273612[_0x16d155(0x171)]=_0x29e838,_0x273612[_0x16d155(0x1c9)]=_0x3b7277,_0x273612[_0x16d155(0x1b9)]=_0x87e6e6,_0x273612[_0x16d155(0x1ef)]=_0x5e810a,_0x273612[_0x16d155(0x215)]=_0x115712;const _0x35bc95=await _0x273612[_0x16d155(0x160)](),_0x3e2404=await sales_finished['findOne']({'_id':_0x13bb8a[_0x16d155(0x206)]['id']}),_0x4913e0=await warehouse['findOne']({'name':_0x3b7277,'room':_0x115712,'warehouse_category':_0x16d155(0x1b5)});_0x3e2404[_0x16d155(0x1b9)][_0x16d155(0x187)](_0x2fe21b=>{var _0x658e1e=_0x16d155;const _0x1210c8=_0x4913e0[_0x658e1e(0x14f)][_0x658e1e(0x156)](_0x29021d=>{var _0x43edbd=_0x658e1e;_0x29021d[_0x43edbd(0x1ce)]==_0x2fe21b[_0x43edbd(0x1ce)]&&_0x29021d[_0x43edbd(0x1ff)]==_0x2fe21b[_0x43edbd(0x1ff)]&&(_0x29021d[_0x43edbd(0x1af)]=parseInt(_0x29021d['product_stock'])-parseInt(_0x2fe21b['quantity']));});}),console['log']('final',_0x4913e0),await _0x4913e0['save']();const _0x339aee=await c_payment_data[_0x16d155(0x126)]({'invoice':_0x13bb8a[_0x16d155(0x1cd)][_0x16d155(0x197)]});_0x339aee[_0x16d155(0x1a3)]=_0x13bb8a[_0x16d155(0x1cd)]['suppliers'],await _0x339aee[_0x16d155(0x160)](),_0x13bb8a[_0x16d155(0x199)](_0x16d155(0x21c),_0x16d155(0x13e)),_0x3a1180['redirect'](_0x16d155(0x1c6));}catch(_0x54764a){console[_0x16d155(0x121)](_0x54764a);}}),router[a0_0x444e3b(0x108)](a0_0x444e3b(0x16f),auth,async(_0x3e1539,_0x48899d)=>{var _0x5f04ca=a0_0x444e3b;try{const _0x276ee4=_0x3e1539[_0x5f04ca(0x206)]['id'],{invoice:_0x3daf50,customer:_0x3be48b,receivable_amount:_0x3a4b05,received_amount:_0x42687a}=_0x3e1539[_0x5f04ca(0x1cd)],_0x48c525=await sales[_0x5f04ca(0x112)](_0x276ee4);console['log'](_0x48c525);var _0x16b354=_0x3a4b05-_0x42687a;console[_0x5f04ca(0x121)](_0x42687a),_0x48c525['received_amount']=parseFloat(_0x42687a)+parseFloat(_0x48c525[_0x5f04ca(0x210)]),_0x48c525[_0x5f04ca(0x1c7)]=_0x16b354,console[_0x5f04ca(0x121)](_0x48c525);const _0x2d9e2e=await _0x48c525[_0x5f04ca(0x160)](),_0x6b51d4=await c_payment_data[_0x5f04ca(0x126)]({'invoice':_0x3daf50});_0x6b51d4[_0x5f04ca(0x1bf)]=_0x16b354,await _0x6b51d4[_0x5f04ca(0x160)]();let _0x102528=new Date(),_0x155698=('0'+_0x102528[_0x5f04ca(0x1c1)]())[_0x5f04ca(0x16c)](-0x2),_0x38ef0c=('0'+(_0x102528[_0x5f04ca(0x1e8)]()+0x1))['slice'](-0x2),_0x303ac9=_0x102528[_0x5f04ca(0x172)](),_0x12886d=_0x303ac9+'-'+_0x38ef0c+'-'+_0x155698;const _0x1cd639=new customer_payment({'invoice':_0x3daf50,'date':_0x303ac9+'-'+_0x38ef0c+'-'+_0x155698,'customer':_0x3be48b,'reason':_0x5f04ca(0x11f),'amount':_0x42687a}),_0x1a58db=await _0x1cd639[_0x5f04ca(0x160)]();_0x3e1539['flash'](_0x5f04ca(0x21c),_0x5f04ca(0x1d5)),_0x48899d[_0x5f04ca(0x152)](_0x5f04ca(0x14d));}catch(_0x3a0000){console[_0x5f04ca(0x121)](_0x3a0000);}}),router[a0_0x444e3b(0x10f)](a0_0x444e3b(0x200),auth,async(_0xcdcba5,_0x103a94)=>{var _0x20802e=a0_0x444e3b;try{const {username:_0x38d135,email:_0x7fa04d,role:_0x59f24b}=_0xcdcba5[_0x20802e(0x1a0)],_0x13b6c4=_0xcdcba5['user'],_0x2cecc0=await profile[_0x20802e(0x126)]({'email':_0x13b6c4[_0x20802e(0x128)]}),_0x1a72e3=await master_shop[_0x20802e(0x125)]();console['log'](_0x20802e(0x131),_0x1a72e3);const _0x54bc1b=_0xcdcba5[_0x20802e(0x206)]['id'],_0x504b3f=await sales[_0x20802e(0x112)](_0x54bc1b);console[_0x20802e(0x121)](_0x504b3f);const _0x5e205b=await customer[_0x20802e(0x126)]({'name':_0x504b3f[_0x20802e(0x1fb)]});console[_0x20802e(0x121)](_0x5e205b);if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x10b)){var _0x1ca40e=users['English'];console[_0x20802e(0x121)](_0x1ca40e);}else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x12e))var _0x1ca40e=users[_0x20802e(0x12e)];else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x147))var _0x1ca40e=users[_0x20802e(0x147)];else{if(_0x1a72e3[0x0]['language']==_0x20802e(0x170))var _0x1ca40e=users[_0x20802e(0x170)];else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x1da))var _0x1ca40e=users['French'];else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]=='Portuguese\x20(BR)')var _0x1ca40e=users[_0x20802e(0x1a9)];else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x11d))var _0x1ca40e=users[_0x20802e(0x11d)];else{if(_0x1a72e3[0x0][_0x20802e(0x1f0)]==_0x20802e(0x21b))var _0x1ca40e=users['Arabic'];}}}}}}}_0x103a94[_0x20802e(0x1c3)]('sales_invoice',{'success':_0xcdcba5['flash'](_0x20802e(0x21c)),'errors':_0xcdcba5[_0x20802e(0x199)](_0x20802e(0x18e)),'role':_0x13b6c4,'profile':_0x2cecc0,'master_shop':_0x1a72e3,'customers':_0x5e205b,'sales':_0x504b3f,'language':_0x1ca40e});}catch(_0x3906b3){console[_0x20802e(0x121)](_0x3906b3);}}),router[a0_0x444e3b(0x10f)](a0_0x444e3b(0x1fc),auth,async(_0x4bf2c8,_0x2cb1d3)=>{var _0x539593=a0_0x444e3b;try{const {username:_0x5dc98b,email:_0x39eb59,role:_0x199b29}=_0x4bf2c8[_0x539593(0x1a0)],_0x288553=_0x4bf2c8[_0x539593(0x1a0)],_0x4a7531=await profile[_0x539593(0x126)]({'email':_0x288553[_0x539593(0x128)]}),_0x180cab=await master_shop[_0x539593(0x125)](),_0x2d2660=_0x4bf2c8[_0x539593(0x206)]['id'],_0x45a341=await sales_finished[_0x539593(0x112)](_0x2d2660),_0x5cb15f=await warehouse[_0x539593(0x1de)]([{'$match':{'name':_0x45a341[_0x539593(0x1c9)]}},{'$unwind':_0x539593(0x1c5)},{'$group':{'_id':_0x539593(0x20e),'name':{'$first':_0x539593(0x15f)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x539593(0x19d)},'bin':{'$first':_0x539593(0x117)},'type':{'$first':_0x539593(0x1e9)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x539593(0x195)},'secondary_code':{'$first':_0x539593(0x17e)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x539593(0x1f7)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x539593(0x12a)},'unit':{'$first':_0x539593(0x146)},'secondary_unit':{'$first':_0x539593(0x196)},'maxProducts':{'$first':_0x539593(0x177)},'batch_code':{'$first':_0x539593(0x1ec)},'maxPerUnit':{'$first':_0x539593(0x1ed)}}}]),_0x23efca=await product['find']({}),_0x20e187=await warehouse[_0x539593(0x1de)]([{'$match':{'status':'Enabled','warehouse_category':'Finished\x20Goods','name':{'$ne':_0x539593(0x13d),'$ne':_0x539593(0x18a)}}},{'$group':{'_id':_0x539593(0x20c),'name':{'$first':_0x539593(0x20c)}}},{'$sort':{'name':0x1}}]);var _0x4ad0e0=[_0x539593(0x1b6)];const _0x427825=await warehouse[_0x539593(0x1de)]([{'$match':{'status':_0x539593(0x16b),'name':_0x539593(0x18a)}},{'$group':{'_id':_0x539593(0x20c),'name':{'$first':_0x539593(0x20c)}}},{'$sort':{'name':0x1}}]);if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x10b)){var _0x18e07d=users[_0x539593(0x109)];console[_0x539593(0x121)](_0x18e07d);}else{if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x12e))var _0x18e07d=users['Hindi'];else{if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x147))var _0x18e07d=users[_0x539593(0x147)];else{if(_0x180cab[0x0][_0x539593(0x1f0)]=='Spanish')var _0x18e07d=users[_0x539593(0x170)];else{if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x1da))var _0x18e07d=users[_0x539593(0x1da)];else{if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x183))var _0x18e07d=users['Portuguese'];else{if(_0x180cab[0x0][_0x539593(0x1f0)]==_0x539593(0x11d))var _0x18e07d=users['Chinese'];else{if(_0x180cab[0x0]['language']==_0x539593(0x21b))var _0x18e07d=users[_0x539593(0x1e5)];}}}}}}}_0x2cb1d3[_0x539593(0x1c3)]('return_sale_finished',{'success':_0x4bf2c8[_0x539593(0x199)]('success'),'errors':_0x4bf2c8['flash'](_0x539593(0x18e)),'role':_0x288553,'profile':_0x4a7531,'user':_0x45a341,'stock':_0x5cb15f,'master_shop':_0x180cab,'unit':_0x23efca,'language':_0x18e07d,'warehouses':_0x20e187,'rooms':_0x4ad0e0,'warehouse_QA':_0x427825});}catch(_0xaab88c){console[_0x539593(0x121)](_0xaab88c),_0x2cb1d3[_0x539593(0x191)](0xc8)[_0x539593(0x134)]({'message':_0xaab88c[_0x539593(0x1eb)]});}}),router[a0_0x444e3b(0x108)](a0_0x444e3b(0x1fc),auth,async(_0x169a58,_0x4b768b)=>{var _0x267ca4=a0_0x444e3b;if(_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1a7)]=='QA')try{const {invoice:_0x9f4e10,date:_0x4994d1,warehouse_name:_0x1abc49,product_name:_0x5a6f41,primary_code:_0x4b94b9,secondary_code:_0x3986c,product_code:_0x4bd62e,sales_quantity:_0x3ed1b6,stocks:_0xb63f85,return_qty:_0x14d513,Room_name:_0x5c6a86,to_warehouse_name_QA:_0x513de6,to_Room_name_QA:_0x22f370,note:_0x2b3cbf,for_categorize:_0x3746c0,product_name_QA1:_0x1c9d4b}=_0x169a58[_0x267ca4(0x1cd)];if(typeof _0x1c9d4b=='string')var _0x3c6c84=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x159)]],_0x3f9296=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x203)]],_0x5652dc=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x141)]],_0x3180c4=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x178)]],_0x320aff=[_0x169a58[_0x267ca4(0x1cd)]['sales_quantity_QA']],_0x44e7a3=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1b2)]],_0x2a5724=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x20a)]],_0x3cc8f6=[_0x169a58[_0x267ca4(0x1cd)]['maxPerUnit_QA']],_0x221fc8=[_0x169a58[_0x267ca4(0x1cd)]['maxProducts_QA']],_0xf128b0=[_0x169a58['body'][_0x267ca4(0x122)]],_0x2d4cdb=[_0x169a58['body']['secondary_unit_QA']],_0x407814=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x144)]],_0x1e6cd6=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1d2)]],_0x127792=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x162)]];else var _0x3c6c84=[..._0x169a58[_0x267ca4(0x1cd)]['product_name_QA1']],_0x3f9296=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x203)]],_0x5652dc=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x141)]],_0x3180c4=[..._0x169a58['body']['product_code_QA']],_0x320aff=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x167)]],_0x44e7a3=[..._0x169a58['body'][_0x267ca4(0x1b2)]],_0x2a5724=[..._0x169a58[_0x267ca4(0x1cd)]['return_qty_QA']],_0x3cc8f6=[..._0x169a58['body'][_0x267ca4(0x153)]],_0x221fc8=[..._0x169a58['body'][_0x267ca4(0x1ad)]],_0xf128b0=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x122)]],_0x2d4cdb=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1d1)]],_0x407814=[..._0x169a58['body'][_0x267ca4(0x144)]],_0x1e6cd6=[..._0x169a58['body'][_0x267ca4(0x1d2)]],_0x127792=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x162)]];const _0x1ad7eb=_0x3c6c84[_0x267ca4(0x156)](_0x234cf4=>{return _0x234cf4={'product_name':_0x234cf4};});_0x3f9296['forEach']((_0x34279e,_0x1902d3)=>{_0x1ad7eb[_0x1902d3]['primary_code']=_0x34279e;}),_0x5652dc[_0x267ca4(0x187)]((_0x44b858,_0x20c15a)=>{var _0x5ca400=_0x267ca4;_0x1ad7eb[_0x20c15a][_0x5ca400(0x17b)]=_0x44b858;}),_0x3180c4['forEach']((_0x31b924,_0x1a1207)=>{var _0x569f88=_0x267ca4;_0x1ad7eb[_0x1a1207][_0x569f88(0x14b)]=_0x31b924;}),_0x320aff['forEach']((_0x11f498,_0xdaa160)=>{var _0x428609=_0x267ca4;_0x1ad7eb[_0xdaa160][_0x428609(0x11c)]=_0x11f498;}),_0x44e7a3[_0x267ca4(0x187)]((_0x1956f5,_0x5b7b32)=>{var _0x2d4dac=_0x267ca4;_0x1ad7eb[_0x5b7b32][_0x2d4dac(0x1a8)]=_0x1956f5;}),_0x2a5724[_0x267ca4(0x187)]((_0x21fd28,_0x29787b)=>{var _0x2cc7a3=_0x267ca4;_0x1ad7eb[_0x29787b][_0x2cc7a3(0x13a)]=_0x21fd28;}),_0x3cc8f6[_0x267ca4(0x187)]((_0x1c962b,_0x1c153b)=>{var _0x32dc62=_0x267ca4;_0x1ad7eb[_0x1c153b][_0x32dc62(0x1cc)]=_0x1c962b;}),_0x221fc8[_0x267ca4(0x187)]((_0x58bfee,_0x11531f)=>{_0x1ad7eb[_0x11531f]['maxProducts']=_0x58bfee;}),_0xf128b0['forEach']((_0x8427e1,_0xfc5221)=>{var _0x43968b=_0x267ca4;_0x1ad7eb[_0xfc5221][_0x43968b(0x1e2)]=_0x8427e1;}),_0x2d4cdb[_0x267ca4(0x187)]((_0x27bf62,_0x3c8aa8)=>{var _0x10f797=_0x267ca4;_0x1ad7eb[_0x3c8aa8][_0x10f797(0x12b)]=_0x27bf62;}),_0x407814['forEach']((_0x134fd9,_0x45363a)=>{var _0x545383=_0x267ca4;_0x1ad7eb[_0x45363a][_0x545383(0x190)]=_0x134fd9;}),_0x1e6cd6[_0x267ca4(0x187)]((_0x1a1d66,_0x3144d0)=>{var _0x50e447=_0x267ca4;_0x1ad7eb[_0x3144d0][_0x50e447(0x1ba)]=_0x1a1d66;}),_0x127792[_0x267ca4(0x187)]((_0x4850c3,_0x2cc75d)=>{_0x1ad7eb[_0x2cc75d]['expiry_date']=_0x4850c3;});const _0x668371=await sales_finished['findOne']({'invoice':_0x9f4e10});_0x668371[_0x267ca4(0x119)]='True';const _0x221d2c=await _0x668371['save'](),_0x57776b=new sales_return_finished({'invoice':_0x9f4e10,'customer':_0x169a58[_0x267ca4(0x1cd)]['customer'],'date':_0x4994d1,'warehouse_name':_0x1abc49,'room':_0x5c6a86,'ToWarehouse':_0x513de6,'ToRoom':_0x22f370,'return_sale_QA':_0x1ad7eb,'note':_0x2b3cbf,'warehouse_cat':_0x3746c0}),_0x53adc1=await _0x57776b[_0x267ca4(0x160)](),_0x57cb4d=await sales_return_finished[_0x267ca4(0x126)]({'invoice':_0x9f4e10}),_0x477c69=await warehouse[_0x267ca4(0x126)]({'name':_0x513de6,'room':_0x22f370});_0x57cb4d[_0x267ca4(0x1aa)][_0x267ca4(0x187)](_0xedf9b1=>{var _0x3305ae=_0x267ca4,_0x3e9396=0x0;const _0x103479=_0x477c69['product_details'][_0x3305ae(0x156)](_0x23f471=>{var _0x51089a=_0x3305ae;_0x23f471[_0x51089a(0x1ce)]==_0xedf9b1[_0x51089a(0x1ce)]&&_0x23f471['expiry_date']==_0xedf9b1[_0x51089a(0x118)]&&_0x23f471[_0x51089a(0x1ba)]==_0xedf9b1[_0x51089a(0x1ba)]&&_0x23f471[_0x51089a(0x1e2)]==_0xedf9b1['batch_code']&&(_0x23f471['product_stock']=parseInt(_0x23f471[_0x51089a(0x1af)])+parseInt(_0xedf9b1[_0x51089a(0x13a)]),_0x3e9396++);});_0x3e9396=='0'&&(_0x477c69[_0x3305ae(0x14f)]=_0x477c69[_0x3305ae(0x14f)][_0x3305ae(0x111)]({'product_name':_0xedf9b1[_0x3305ae(0x1ce)],'product_stock':_0xedf9b1['return_qty'],'primary_code':_0xedf9b1['primary_code'],'secondary_code':_0xedf9b1[_0x3305ae(0x17b)],'product_code':_0xedf9b1[_0x3305ae(0x14b)],'batch_code':_0xedf9b1['batch_code'],'maxPerUnit':_0xedf9b1[_0x3305ae(0x1cc)],'production_date':_0xedf9b1[_0x3305ae(0x1ba)],'expiry_date':_0xedf9b1[_0x3305ae(0x118)],'secondary_unit':_0xedf9b1[_0x3305ae(0x12b)],'unit':_0xedf9b1[_0x3305ae(0x190)],'maxProducts':_0xedf9b1[_0x3305ae(0x120)],'bay':_0xedf9b1[_0x3305ae(0x1ff)]}));}),await _0x477c69['save']();const _0x3bc179=new c_payment_data({'invoice':_0x9f4e10,'customer':_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1fb)],'reason':_0x267ca4(0x1f4)});await _0x3bc179[_0x267ca4(0x160)]();const _0x5e8acc=await master_shop['find'](),_0x2b8c4d=await email_settings[_0x267ca4(0x126)](),_0x3c529a=await customer[_0x267ca4(0x126)]({'name':_0x169a58[_0x267ca4(0x1cd)]['customer']});_0x5e8acc[0x0]['currency_placement']==0x1?(right_currency=_0x5e8acc[0x0]['currency'],left_currency=''):(right_currency='',left_currency=_0x5e8acc[0x0][_0x267ca4(0x1cf)]);var _0x43d138=_0x3c6c84,_0x222207=_0x2a5724,_0x30b1d4='',_0x1dfc04;for(_0x1dfc04 in _0x43d138){_0x30b1d4+='<tr>'+_0x267ca4(0x12d)+_0x43d138[_0x1dfc04]+_0x267ca4(0x201)+_0x267ca4(0x12d)+_0x222207[_0x1dfc04]+_0x267ca4(0x201)+'</tr>';}console[_0x267ca4(0x121)](_0x267ca4(0x1fe),_0x30b1d4);let _0x1b6b01=nodemailer[_0x267ca4(0x1ab)]({'service':_0x267ca4(0x168),'auth':{'user':_0x2b8c4d[_0x267ca4(0x128)],'pass':_0x2b8c4d[_0x267ca4(0x180)]}}),_0x46e4c1={'from':_0x2b8c4d['email'],'to':_0x3c529a[_0x267ca4(0x128)],'subject':'Sale\x20Return\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x267ca4(0x11a)+_0x5e8acc[0x0]['image'],'cid':'logo'}],'html':_0x267ca4(0x1c4)+_0x267ca4(0x21a)+'</head><body>'+_0x267ca4(0x19e)+_0x267ca4(0x1b8)+'<div>'+_0x267ca4(0x17a)+'</div>'+_0x267ca4(0x19e)+_0x267ca4(0x1c8)+_0x5e8acc[0x0]['site_title']+_0x267ca4(0x163)+'</div>'+_0x267ca4(0x139)+_0x267ca4(0x20d)+_0x267ca4(0x19e)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x267ca4(0x161)+_0x9f4e10+'\x20'+_0x267ca4(0x1d7)+_0x267ca4(0x216)+_0x4994d1+'\x20'+'</span>'+_0x267ca4(0x19b)+'</div>'+_0x267ca4(0x1a4)+_0x267ca4(0x1ea)+'<tr>'+_0x267ca4(0x185)+_0x267ca4(0x15e)+_0x267ca4(0x218)+_0x267ca4(0x175)+_0x267ca4(0x15a)+_0x267ca4(0x19f)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x30b1d4+'\x20'+_0x267ca4(0x15b)+_0x267ca4(0x1a6)+'<div>'+_0x267ca4(0x198)+_0x267ca4(0x217)+_0x5e8acc[0x0][_0x267ca4(0x138)]+_0x267ca4(0x19b)+_0x267ca4(0x139)+_0x267ca4(0x139)+_0x267ca4(0x133)};_0x1b6b01[_0x267ca4(0x1d8)](_0x46e4c1,function(_0x45a9a4,_0x499b0c){var _0x596785=_0x267ca4;_0x45a9a4?(console[_0x596785(0x121)](_0x45a9a4),console[_0x596785(0x121)](_0x596785(0x13c))):console[_0x596785(0x121)](_0x596785(0x19c));}),_0x169a58[_0x267ca4(0x199)](_0x267ca4(0x21c),'sales\x20item\x20return\x20successfull'),_0x4b768b[_0x267ca4(0x152)](_0x267ca4(0x1c6));}catch(_0x3d277c){_0x4b768b[_0x267ca4(0x191)](0xc8)[_0x267ca4(0x134)]({'message1':_0x3d277c[_0x267ca4(0x1eb)]});}else{if(_0x169a58['body'][_0x267ca4(0x1a7)]=='GS')try{const {invoice:_0x32497a,date:_0x4eb0a7,warehouse_name:_0x3b929b,product_name:_0x4a9500,primary_code:_0x426850,secondary_code:_0x17f0d6,product_code:_0x276303,sales_quantity:_0x1460ee,stocks:_0x2ab736,return_qty:_0x264df0,Room_name:_0x1ac6b4,to_warehouse_name:_0x25c98e,to_Room_name:_0x194eee,note:_0x141e25,level:_0x56f057,isle:_0x1ae47d,pallet:_0x1317ee,for_categorize:_0x4dad2b}=_0x169a58[_0x267ca4(0x1cd)];if(typeof _0x4a9500==_0x267ca4(0x165))var _0x3c6c84=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1ce)]],_0x3f9296=[_0x169a58['body'][_0x267ca4(0x219)]],_0x5652dc=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x17b)]],_0x3180c4=[_0x169a58[_0x267ca4(0x1cd)]['product_code']],_0x320aff=[_0x169a58['body'][_0x267ca4(0x149)]],_0x2a5724=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x13a)]],_0xf5b74a=[_0x169a58['body']['bay']],_0x3cc8f6=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1cc)]],_0x221fc8=[_0x169a58[_0x267ca4(0x1cd)]['maxProducts']],_0xf128b0=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1e2)]],_0x2d4cdb=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x12b)]],_0x407814=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x190)]],_0x1e6cd6=[_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1ba)]],_0x127792=[_0x169a58[_0x267ca4(0x1cd)]['expiry_date']];else var _0x3c6c84=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1ce)]],_0x3f9296=[..._0x169a58['body']['primary_code']],_0x5652dc=[..._0x169a58['body'][_0x267ca4(0x17b)]],_0x3180c4=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x14b)]],_0x320aff=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x149)]],_0x2a5724=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x13a)]],_0xf5b74a=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1ff)]],_0x3cc8f6=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1cc)]],_0x221fc8=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x120)]],_0xf128b0=[..._0x169a58['body']['batch_code']],_0x2d4cdb=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x12b)]],_0x407814=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x190)]],_0x1e6cd6=[..._0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1ba)]],_0x127792=[..._0x169a58['body'][_0x267ca4(0x118)]];const _0x11d387=_0x3c6c84[_0x267ca4(0x156)](_0x44b4fe=>{return _0x44b4fe={'product_name':_0x44b4fe};});_0x3f9296[_0x267ca4(0x187)]((_0x2caf62,_0x1b27bd)=>{var _0xe93a84=_0x267ca4;_0x11d387[_0x1b27bd][_0xe93a84(0x219)]=_0x2caf62;}),_0x5652dc[_0x267ca4(0x187)]((_0x27774a,_0x4cd834)=>{_0x11d387[_0x4cd834]['secondary_code']=_0x27774a;}),_0x3180c4[_0x267ca4(0x187)]((_0x25a127,_0x4ededc)=>{var _0x188fcd=_0x267ca4;_0x11d387[_0x4ededc][_0x188fcd(0x14b)]=_0x25a127;}),_0x320aff[_0x267ca4(0x187)]((_0x5826c3,_0x3e8d49)=>{var _0x38a1bc=_0x267ca4;_0x11d387[_0x3e8d49][_0x38a1bc(0x11c)]=_0x5826c3;}),_0x2a5724['forEach']((_0x2da7de,_0x2ab649)=>{var _0xa62223=_0x267ca4;_0x11d387[_0x2ab649][_0xa62223(0x13a)]=_0x2da7de;}),_0xf5b74a['forEach']((_0x3aaae9,_0x5b937a)=>{var _0x184733=_0x267ca4;_0x11d387[_0x5b937a][_0x184733(0x1ff)]=_0x3aaae9;}),_0x3cc8f6[_0x267ca4(0x187)]((_0x197138,_0x54a43c)=>{_0x11d387[_0x54a43c]['maxPerUnit']=_0x197138;}),_0x221fc8[_0x267ca4(0x187)]((_0xe09228,_0x519d76)=>{var _0x894a09=_0x267ca4;_0x11d387[_0x519d76][_0x894a09(0x120)]=_0xe09228;}),_0xf128b0[_0x267ca4(0x187)]((_0x583faf,_0xa4177d)=>{var _0x25c7c3=_0x267ca4;_0x11d387[_0xa4177d][_0x25c7c3(0x1e2)]=_0x583faf;}),_0x2d4cdb[_0x267ca4(0x187)]((_0x2bba00,_0x2ebb0d)=>{var _0x2a3971=_0x267ca4;_0x11d387[_0x2ebb0d][_0x2a3971(0x12b)]=_0x2bba00;}),_0x407814['forEach']((_0x2c2527,_0x2ae4cc)=>{var _0x396c19=_0x267ca4;_0x11d387[_0x2ae4cc][_0x396c19(0x190)]=_0x2c2527;}),_0x1e6cd6[_0x267ca4(0x187)]((_0x3d4ca2,_0x537abc)=>{var _0xf6071e=_0x267ca4;_0x11d387[_0x537abc][_0xf6071e(0x1ba)]=_0x3d4ca2;}),_0x127792[_0x267ca4(0x187)]((_0x49d1a3,_0x4915fc)=>{var _0xf4fab8=_0x267ca4;_0x11d387[_0x4915fc][_0xf4fab8(0x118)]=_0x49d1a3;});var _0xa9023b=0x0;_0x11d387['forEach'](_0x208026=>{var _0x501084=_0x267ca4;(parseInt(_0x208026['sale_qty'])<parseInt(_0x208026['return_qty'])||parseInt(_0x208026[_0x501084(0x1a8)])<parseInt(_0x208026[_0x501084(0x13a)])&&parseInt(_0x208026['sale_qty'])>parseInt(_0x208026[_0x501084(0x13a)])||parseInt(_0x208026[_0x501084(0x13a)])==0x0)&&_0xa9023b++;});if(_0xa9023b!=0x0)return _0x169a58[_0x267ca4(0x199)](_0x267ca4(0x18e),_0x267ca4(0x1bc)),_0x4b768b[_0x267ca4(0x152)]('back');const _0x4f5f93=await sales_finished['findOne']({'invoice':_0x32497a});_0x4f5f93[_0x267ca4(0x119)]=_0x267ca4(0x148);const _0x2d0f84=await _0x4f5f93[_0x267ca4(0x160)](),_0x14f14e=new sales_return_finished({'invoice':_0x32497a,'customer':_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1fb)],'date':_0x4eb0a7,'warehouse_name':_0x3b929b,'room':_0x1ac6b4,'ToWarehouse':_0x25c98e,'ToRoom':_0x194eee,'return_sale':_0x11d387,'note':_0x141e25,'warehouse_cat':_0x4dad2b}),_0x4ad860=await _0x14f14e[_0x267ca4(0x160)](),_0x39e1eb=await sales_return_finished[_0x267ca4(0x126)]({'invoice':_0x32497a}),_0x4f256f=await warehouse[_0x267ca4(0x126)]({'name':_0x25c98e,'room':_0x194eee,'warehouse_category':'Finished\x20Goods'});_0x39e1eb[_0x267ca4(0x1f8)][_0x267ca4(0x187)](_0xee136a=>{var _0x9ffea2=_0x267ca4,_0x466927=0x0;const _0x3db24c=_0x4f256f[_0x9ffea2(0x14f)]['map'](_0x36c641=>{var _0x423745=_0x9ffea2;_0x36c641[_0x423745(0x1ce)]==_0xee136a[_0x423745(0x1ce)]&&_0x36c641['bay']==_0xee136a[_0x423745(0x1ff)]&&_0x36c641[_0x423745(0x118)]==_0xee136a[_0x423745(0x118)]&&_0x36c641['production_date']==_0xee136a[_0x423745(0x1ba)]&&_0x36c641[_0x423745(0x1e2)]==_0xee136a[_0x423745(0x1e2)]&&(_0x36c641[_0x423745(0x1af)]=parseInt(_0x36c641[_0x423745(0x1af)])+parseInt(_0xee136a[_0x423745(0x13a)]),_0x466927++);});_0x466927=='0'&&(_0x4f256f[_0x9ffea2(0x14f)]=_0x4f256f[_0x9ffea2(0x14f)]['concat']({'product_name':_0xee136a[_0x9ffea2(0x1ce)],'product_stock':_0xee136a[_0x9ffea2(0x13a)],'primary_code':_0xee136a[_0x9ffea2(0x219)],'secondary_code':_0xee136a[_0x9ffea2(0x17b)],'product_code':_0xee136a[_0x9ffea2(0x14b)],'bay':_0xee136a[_0x9ffea2(0x1ff)],'batch_code':_0xee136a[_0x9ffea2(0x1e2)],'maxPerUnit':_0xee136a[_0x9ffea2(0x1cc)],'production_date':_0xee136a[_0x9ffea2(0x1ba)],'expiry_date':_0xee136a['expiry_date'],'secondary_unit':_0xee136a['secondary_unit'],'unit':_0xee136a[_0x9ffea2(0x190)],'maxProducts':_0xee136a[_0x9ffea2(0x120)]}));}),await _0x4f256f[_0x267ca4(0x160)](),console['log'](_0x169a58['body']);const _0x22d827=new c_payment_data({'invoice':_0x32497a,'customer':_0x169a58[_0x267ca4(0x1cd)][_0x267ca4(0x1fb)],'reason':_0x267ca4(0x1f4)});await _0x22d827[_0x267ca4(0x160)]();const _0x186a52=await master_shop[_0x267ca4(0x125)]();console['log'](_0x267ca4(0x1f6),_0x186a52[0x0]['image']);const _0x270c78=await email_settings[_0x267ca4(0x126)](),_0x43ea13=await customer[_0x267ca4(0x126)]({'name':_0x169a58[_0x267ca4(0x1cd)]['customer']});console[_0x267ca4(0x121)](_0x267ca4(0x1e4),_0x43ea13);_0x186a52[0x0][_0x267ca4(0x113)]==0x1?(right_currency=_0x186a52[0x0][_0x267ca4(0x1cf)],left_currency=''):(right_currency='',left_currency=_0x186a52[0x0]['currency']);var _0x43d138=_0x3c6c84,_0x222207=_0x2a5724,_0x30b1d4='',_0x1dfc04;for(_0x1dfc04 in _0x43d138){_0x30b1d4+=_0x267ca4(0x15c)+_0x267ca4(0x12d)+_0x43d138[_0x1dfc04]+'</td>'+_0x267ca4(0x12d)+_0x222207[_0x1dfc04]+_0x267ca4(0x201)+_0x267ca4(0x15a);}console['log'](_0x267ca4(0x1fe),_0x30b1d4);let _0x11b9a7=nodemailer[_0x267ca4(0x1ab)]({'service':_0x267ca4(0x168),'auth':{'user':_0x270c78[_0x267ca4(0x128)],'pass':_0x270c78[_0x267ca4(0x180)]}}),_0x33ec21={'from':_0x270c78['email'],'to':_0x43ea13['email'],'subject':'Sale\x20Return\x20Mail','attachments':[{'filename':_0x267ca4(0x17d),'path':__dirname+_0x267ca4(0x1a5)+_0x267ca4(0x11a)+_0x186a52[0x0][_0x267ca4(0x19a)],'cid':_0x267ca4(0x1ae)}],'html':_0x267ca4(0x1c4)+_0x267ca4(0x21a)+_0x267ca4(0x1e3)+_0x267ca4(0x19e)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x267ca4(0x19e)+_0x267ca4(0x17a)+'</div>'+'<div>'+_0x267ca4(0x1c8)+_0x186a52[0x0]['site_title']+'\x20</h2>'+_0x267ca4(0x139)+_0x267ca4(0x139)+_0x267ca4(0x20d)+_0x267ca4(0x19e)+_0x267ca4(0x16e)+_0x267ca4(0x161)+_0x32497a+'\x20'+_0x267ca4(0x1d7)+_0x267ca4(0x216)+_0x4eb0a7+'\x20'+_0x267ca4(0x192)+_0x267ca4(0x19b)+_0x267ca4(0x139)+_0x267ca4(0x1a4)+_0x267ca4(0x1ea)+_0x267ca4(0x15c)+_0x267ca4(0x185)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>'+_0x267ca4(0x218)+_0x267ca4(0x175)+_0x267ca4(0x15a)+'</thead>'+_0x267ca4(0x1d3)+'\x20'+_0x30b1d4+'\x20'+'</tbody>'+'</table>'+_0x267ca4(0x19e)+'<strong>\x20Regards\x20</strong>'+_0x267ca4(0x217)+_0x186a52[0x0][_0x267ca4(0x138)]+_0x267ca4(0x19b)+_0x267ca4(0x139)+_0x267ca4(0x139)+'</body></html>'};_0x11b9a7[_0x267ca4(0x1d8)](_0x33ec21,function(_0x5b3957,_0x513655){var _0x39d215=_0x267ca4;_0x5b3957?(console[_0x39d215(0x121)](_0x5b3957),console[_0x39d215(0x121)]('Error\x20Occurs')):console[_0x39d215(0x121)](_0x39d215(0x19c));}),_0x169a58[_0x267ca4(0x199)]('success',_0x267ca4(0x1ac)),_0x4b768b[_0x267ca4(0x152)](_0x267ca4(0x1c6));}catch(_0x3bf703){console[_0x267ca4(0x121)](_0x3bf703),_0x4b768b[_0x267ca4(0x191)](0xc8)[_0x267ca4(0x134)]({'message1':_0x3bf703['message']});}}}),router['get'](a0_0x444e3b(0x154),auth,async(_0x205327,_0x1b0e70)=>{var _0x1bda5c=a0_0x444e3b;try{const {username:_0x4164c,email:_0xd52535,role:_0x3611d2}=_0x205327[_0x1bda5c(0x1a0)],_0x48beda=_0x205327[_0x1bda5c(0x1a0)],_0x51de4a=await profile['findOne']({'email':_0x48beda[_0x1bda5c(0x128)]}),_0x2cb105=await master_shop[_0x1bda5c(0x125)]();console[_0x1bda5c(0x121)](_0x1bda5c(0x115),_0x2cb105);const _0x3b75f2=_0x205327[_0x1bda5c(0x206)]['id'],_0x2f77b3=await sales[_0x1bda5c(0x112)](_0x3b75f2);console[_0x1bda5c(0x121)](_0x1bda5c(0x20b),_0x2f77b3);if(_0x2cb105[0x0]['language']==_0x1bda5c(0x10b))var _0x2273bf=users['English'];else{if(_0x2cb105[0x0]['language']==_0x1bda5c(0x12e))var _0x2273bf=users['Hindi'];else{if(_0x2cb105[0x0][_0x1bda5c(0x1f0)]==_0x1bda5c(0x147))var _0x2273bf=users['German'];else{if(_0x2cb105[0x0][_0x1bda5c(0x1f0)]=='Spanish')var _0x2273bf=users[_0x1bda5c(0x170)];else{if(_0x2cb105[0x0][_0x1bda5c(0x1f0)]==_0x1bda5c(0x1da))var _0x2273bf=users[_0x1bda5c(0x1da)];else{if(_0x2cb105[0x0][_0x1bda5c(0x1f0)]=='Portuguese\x20(BR)')var _0x2273bf=users[_0x1bda5c(0x1a9)];else{if(_0x2cb105[0x0]['language']==_0x1bda5c(0x11d))var _0x2273bf=users[_0x1bda5c(0x11d)];else{if(_0x2cb105[0x0][_0x1bda5c(0x1f0)]=='Arabic\x20(ae)')var _0x2273bf=users[_0x1bda5c(0x1e5)];}}}}}}}_0x1b0e70[_0x1bda5c(0x1c3)](_0x1bda5c(0x11b),{'success':_0x205327['flash'](_0x1bda5c(0x21c)),'errors':_0x205327[_0x1bda5c(0x199)](_0x1bda5c(0x18e)),'role':_0x48beda,'profile':_0x51de4a,'alldata':_0x2f77b3,'master_shop':_0x2cb105,'language':_0x2273bf});}catch(_0x42fb2f){console[_0x1bda5c(0x121)](_0x42fb2f);}}),router[a0_0x444e3b(0x108)](a0_0x444e3b(0x1bb),async(_0x5f43cc,_0x5b3ee6)=>{var _0x3a24c0=a0_0x444e3b;const {product_code:_0x8ca4a,warehouse_name:_0x2d2a4f,rooms_data:_0x4f3c94,Roomslist:_0x22ab4a}=_0x5f43cc[_0x3a24c0(0x1cd)],_0x42ba03=_0x22ab4a[_0x3a24c0(0x1cb)](','),_0x4e82bd=[];async function _0x11aaaa(_0x3cc01d){var _0x1bef6b=_0x3a24c0;const _0x1d5208=await warehouse['aggregate']([{'$match':{'name':_0x2d2a4f,'room':_0x3cc01d}},{'$unwind':_0x1bef6b(0x1c5)},{'$match':{'product_details.primary_code':_0x8ca4a}},{'$group':{'_id':_0x1bef6b(0x20e),'name':{'$first':_0x1bef6b(0x15f)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x1bef6b(0x195)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x1bef6b(0x19d)},'isle':{'$first':_0x1bef6b(0x117)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x1bef6b(0x15d)},'unit':{'$first':_0x1bef6b(0x146)},'secondary_unit':{'$first':_0x1bef6b(0x196)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1bef6b(0x1f7)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x1bef6b(0x1ed)},'batch_code':{'$first':_0x1bef6b(0x1ec)},'product_cat':{'$first':_0x1bef6b(0x116)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x1bef6b(0x11e)}}}]),_0x5a7787=await warehouse[_0x1bef6b(0x1de)]([{'$match':{'name':_0x2d2a4f,'room':_0x3cc01d}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x8ca4a}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1bef6b(0x214)},'primary_code':{'$first':_0x1bef6b(0x195)},'secondary_code':{'$first':_0x1bef6b(0x17e)},'product_code':{'$first':_0x1bef6b(0x17c)},'level':{'$first':'$product_details.bay'},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x1bef6b(0x1e9)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x1bef6b(0x196)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1bef6b(0x1f7)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1bef6b(0x12a)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x1bef6b(0x1ec)},'product_cat':{'$first':_0x1bef6b(0x116)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x1bef6b(0x1d9)},'invoice':{'$first':_0x1bef6b(0x11e)}}}]);if(_0x1d5208[_0x1bef6b(0x1f1)]>0x0)_0x4e82bd[_0x1bef6b(0x212)](_0x1d5208);else _0x5a7787['length']>0x0&&_0x4e82bd[_0x1bef6b(0x212)](_0x5a7787);}const _0x1efe6b=_0x42ba03[_0x3a24c0(0x156)](_0x3149e4=>_0x11aaaa(_0x3149e4));await Promise['all'](_0x1efe6b),_0x5b3ee6[_0x3a24c0(0x134)](_0x4e82bd);}),module[a0_0x444e3b(0x169)]=router;function a0_0xc49b(){var _0x12de18=['German','True','sales_quantity','/all_sales_finished/preview/','product_code','46782iQuvEA','/all_sales/view','DRY\x20GOODS','product_details','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','QA\x20Warehouse','redirect','maxPerUnit_QA','/barcode/:id','115ZZWBcN','map','foreach\x20newproduct','product','product_name_QA1','</tr>','</tbody>','<tr>','$product_details.floorlevel','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>','$product_details.product_name','save','\x20Order\x20Number\x20:\x20','expiry_date_QA','\x20</h2>','filter','string','../models/all_models','sales_quantity_QA','gmail','exports','$sale_product.type','Enabled','slice','toString','<h5\x20style=\x22text-align:\x20left;\x22>','/give_payment/:id','Spanish','date','getFullYear','$sale_product.floorlevel','660447eKoFTB','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Total\x20</th>','$customer','$product_details.maxProducts','product_code_QA','$date','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','secondary_code','$product_details.product_code','Logo.png','$product_details.secondary_code','all','password','edit_sales_finished','abs','Portuguese\x20(BR)','_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','6tgaiXM','forEach','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','host','Quality\x20Inspection','/view','then','$sale_product.bin','errors','291330pSxiUY','unit','status','</span>','warehouse','$warehouse_name','$product_details.primary_code','$product_details.secondary_unit','invoice','<strong>\x20Regards\x20</strong>','flash','image','</h5>','Email\x20sent\x20successfully','$product_details.bay','<div>','</thead>','user','$note','Sales\x20Add\x20successfully','suppliers','<table\x20style=\x22width:\x20100%\x20!important;\x22>','/../public','</table>','for_categorize','stock','Portuguese','return_sale_QA','createTransport','sales\x20item\x20return\x20successfull','maxProducts_QA','logo','product_stock','OUTF-','RoomAssigned','stocks_QA','carton','$sale_product.quantity','Finished\x20Goods','Return\x20Rooms','catch','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','sale_product','production_date','/barcode_scanner','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','max_per_unit','amount','back','getDate','product_data','render','<!DOCTYPE\x20html>','$product_details','/all_sales_finished/view','due_amount','<h2>\x20','warehouse_name','room_name','split','maxPerUnit','body','product_name','currency','There\x27s\x20a\x20error\x20in\x20this\x20transaction','secondary_unit_QA','production_date_QA','<tbody\x20style=\x22text-align:\x20center;\x22>','level','payment\x20successfull','35862700qBgsun','<span\x20style=\x22float:\x20right;\x22>','sendMail','$room','French','padStart','Ambient','customers_docs','aggregate','$finalize','$product_details.storage','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Quantity\x20</th>','batch_code','</head><body>','customer_data','Arabic','6304707CkZfKo','$product_details.expiry_date','getMonth','$product_details.type','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','message','$product_details.batch_code','$product_details.maxPerUnit','adjust_qty','note','language','length','Enclosed','port','Sale\x20Return','name','add\x20post','$product_details.rack','return_sale','$invoice','floor','customer','/view/return_sales/:id','prod_invoice','product_list','bay','/invoice/:id','</td>','../public/language/languages.json','primary_code_QA','/picking_list/pdf/','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','params','/view/add_sales/:id','/view/add_sales','nodemailer','return_qty_QA','barcode\x20user_id','$name','<hr\x20class=\x22my-3\x22>','$product_details._id','staff','received_amount','all_sales_finished','push','FGSEmail','$product_details.product_stock','room','\x20Order\x20Date\x20:\x20','<h5>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Price\x20</th>','primary_code','<html><head><title></title>','Arabic\x20(ae)','success','../middleware/auth','post','English','$customers_docs','English\x20(US)','primary_unit','Router','140636FgVusb','get','$sale_product','concat','findById','currency_placement','/view/:id','barcode\x20Product\x20master','$product_details.product_cat','$product_details.bin','expiry_date','return_data','/upload/','all_sales_barcode','sale_qty','Chinese','$product_details.invoice','Received\x20Payment\x20For\x20Sale','maxProducts','log','batch_code_QA','1274824uuWbCb','prod_code','find','findOne','$_id','email','quantity','$product_details.production_date','secondary_unit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Hindi','role','/preview/:id','master','edit_sales_finished_view','</body></html>','json','customers','$return_data','63dUOwMB','site_title','</div>','return_qty','$product','Error\x20Occurs','Return\x20Goods','Sales\x20Update\x20successfully','product_date','error','secondary_code_QA','prod_cat','An\x20error\x20occurred.','unit_QA','$product.product_name','$product_details.unit'];a0_0xc49b=function(){return _0x12de18;};return a0_0xc49b();}