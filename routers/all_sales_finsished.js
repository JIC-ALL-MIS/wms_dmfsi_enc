var a0_0x440904=a0_0x41a1;(function(_0x445025,_0x53d312){var _0x5025ac=a0_0x41a1,_0x8fadc6=_0x445025();while(!![]){try{var _0x57d26d=parseInt(_0x5025ac(0x1b8))/0x1*(parseInt(_0x5025ac(0x1ce))/0x2)+parseInt(_0x5025ac(0x1a9))/0x3*(-parseInt(_0x5025ac(0x1e0))/0x4)+-parseInt(_0x5025ac(0x153))/0x5*(parseInt(_0x5025ac(0x17e))/0x6)+parseInt(_0x5025ac(0x100))/0x7*(-parseInt(_0x5025ac(0x120))/0x8)+-parseInt(_0x5025ac(0x19c))/0x9*(parseInt(_0x5025ac(0x1f9))/0xa)+parseInt(_0x5025ac(0x1ab))/0xb+-parseInt(_0x5025ac(0x1b7))/0xc*(-parseInt(_0x5025ac(0x11a))/0xd);if(_0x57d26d===_0x53d312)break;else _0x8fadc6['push'](_0x8fadc6['shift']());}catch(_0x1cb4c9){_0x8fadc6['push'](_0x8fadc6['shift']());}}}(a0_0x55ca,0xc36f8));const express=require(a0_0x440904(0x16d)),app=express(),router=express[a0_0x440904(0x176)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,c_payment_data,email_settings,sales_finished,sales_return_finished,supervisor_settings}=require(a0_0x440904(0x11d)),auth=require(a0_0x440904(0x18a)),nodemailer=require(a0_0x440904(0x167)),users=require('../public/language/languages.json');router['get'](a0_0x440904(0x1e4),auth,async(_0x199446,_0x1ebab3)=>{var _0x338367=a0_0x440904;try{const {username:_0x54ad05,email:_0x49fdc8,role:_0x131a30}=_0x199446[_0x338367(0x140)],_0x435e91=_0x199446[_0x338367(0x140)],_0x7b692b=await profile['findOne']({'email':_0x435e91['email']}),_0x14c591=await master_shop['find']();let _0x53e783;if(_0x435e91[_0x338367(0x1a3)]=='staff'){const _0x52a14d=await staff[_0x338367(0x1b3)]({'email':_0x435e91[_0x338367(0x131)]});_0x53e783=await sales_finished[_0x338367(0x16e)]([{'$lookup':{'from':_0x338367(0x14e),'localField':_0x338367(0x10d),'foreignField':_0x338367(0x1ad),'as':_0x338367(0x1fc)}},{'$unwind':_0x338367(0x125)},{'$unwind':_0x338367(0x1bd)},{'$group':{'_id':_0x338367(0x1fb),'invoice':{'$first':_0x338367(0xf5)},'customers':{'$first':_0x338367(0x13f)},'date':{'$first':_0x338367(0x13c)},'warehouse_name':{'$first':_0x338367(0x152)},'sale_product':{'$push':_0x338367(0x1bd)},'note':{'$first':_0x338367(0x15c)},'return_data':{'$first':'$return_data'},'customers_docs':{'$first':_0x338367(0x125)},'total_saleproduct_quantity':{'$sum':'$sale_product.quantity'},'level':{'$addToSet':_0x338367(0xfe)},'isle':{'$addToSet':_0x338367(0x1da)},'type':{'$addToSet':_0x338367(0x1e9)},'pallet':{'$addToSet':'$sale_product.floorlevel'},'finalize':{'$first':_0x338367(0x1c8)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);}else _0x53e783=await sales_finished['aggregate']([{'$lookup':{'from':_0x338367(0x14e),'localField':'customer','foreignField':_0x338367(0x1ad),'as':_0x338367(0x1fc)}},{'$unwind':_0x338367(0x125)},{'$unwind':_0x338367(0x1bd)},{'$group':{'_id':_0x338367(0x1fb),'invoice':{'$first':_0x338367(0xf5)},'customers':{'$first':_0x338367(0x13f)},'date':{'$first':_0x338367(0x13c)},'warehouse_name':{'$first':'$warehouse_name'},'sale_product':{'$push':_0x338367(0x1bd)},'note':{'$first':_0x338367(0x15c)},'return_data':{'$first':_0x338367(0x116)},'customers_docs':{'$first':_0x338367(0x125)},'total_saleproduct_quantity':{'$sum':_0x338367(0x134)},'level':{'$addToSet':_0x338367(0xfe)},'isle':{'$addToSet':_0x338367(0x1da)},'type':{'$addToSet':_0x338367(0x1e9)},'pallet':{'$addToSet':_0x338367(0x1de)},'finalize':{'$first':_0x338367(0x1c8)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);if(_0x14c591[0x0]['language']=='English\x20(US)'){var _0x115b4f=users[_0x338367(0x119)];console['log'](_0x115b4f);}else{if(_0x14c591[0x0][_0x338367(0x1e5)]=='Hindi')var _0x115b4f=users['Hindi'];else{if(_0x14c591[0x0][_0x338367(0x1e5)]=='German')var _0x115b4f=users['German'];else{if(_0x14c591[0x0][_0x338367(0x1e5)]=='Spanish')var _0x115b4f=users[_0x338367(0x1fa)];else{if(_0x14c591[0x0][_0x338367(0x1e5)]==_0x338367(0x14c))var _0x115b4f=users['French'];else{if(_0x14c591[0x0][_0x338367(0x1e5)]=='Portuguese\x20(BR)')var _0x115b4f=users[_0x338367(0x136)];else{if(_0x14c591[0x0]['language']==_0x338367(0x14b))var _0x115b4f=users[_0x338367(0x14b)];else{if(_0x14c591[0x0][_0x338367(0x1e5)]==_0x338367(0x1e6))var _0x115b4f=users['Arabic'];}}}}}}}_0x1ebab3[_0x338367(0x12b)]('all_sales_finished',{'success':_0x199446['flash'](_0x338367(0x143)),'errors':_0x199446[_0x338367(0x1be)](_0x338367(0x117)),'sales':_0x53e783,'profile':_0x7b692b,'role':_0x435e91,'master_shop':_0x14c591,'language':_0x115b4f});}catch(_0x269a1c){console[_0x338367(0xff)](_0x269a1c);}});async function getRandom8DigitNumber(){var _0x1d1418=a0_0x440904;const _0x2ba0cf=0x989680,_0x232d48=0x5f5e0ff,_0x279084=Math[_0x1d1418(0x11c)](Math[_0x1d1418(0x1b0)]()*(_0x232d48-_0x2ba0cf+0x1))+_0x2ba0cf;var _0x29ded7;const _0x208578=await sales_finished['findOne']({'invoice':_0x1d1418(0x150)+_0x279084});return _0x208578&&_0x208578[_0x1d1418(0x1a2)]>0x0?_0x29ded7='OUTF-'+_0x279084:_0x29ded7=_0x1d1418(0x150)+_0x279084,_0x29ded7;}router[a0_0x440904(0x209)](a0_0x440904(0x13d),auth,async(_0x3c8050,_0x4a7aec)=>{var _0x5a6517=a0_0x440904;try{const {username:_0x1d3ef6,email:_0x4ecfac,role:_0x3ada01}=_0x3c8050[_0x5a6517(0x140)],_0x45d3e1=_0x3c8050[_0x5a6517(0x140)],_0x2a6b16=await profile[_0x5a6517(0x1b3)]({'email':_0x45d3e1[_0x5a6517(0x131)]}),_0x37387e=await master_shop['find'](),_0x5b8087=await customer['find']({});let _0x3f5f70;if(_0x45d3e1['role']==_0x5a6517(0x141)){const _0x5c1c66=await staff['findOne']({'email':_0x45d3e1['email']});_0x3f5f70=await warehouse[_0x5a6517(0x16e)]([{'$match':{'status':'Enabled','name':_0x5c1c66[_0x5a6517(0xf0)],'warehouse_category':_0x5a6517(0x17a),'name':{'$ne':_0x5a6517(0x135)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]);}else _0x3f5f70=await warehouse[_0x5a6517(0x16e)]([{'$match':{'status':'Enabled','warehouse_category':_0x5a6517(0x17a),'name':{'$ne':'QA\x20Warehouse'}}},{'$group':{'_id':_0x5a6517(0x1a4),'name':{'$first':_0x5a6517(0x1a4)}}},{'$sort':{'name':0x1}}]);const _0xed57d=await product['find']({});var _0x5570ac=[_0x5a6517(0x1d6),_0x5a6517(0x1d4)];const _0x518e75=await sales_finished[_0x5a6517(0x185)]({}),_0x4e4a82=_0x518e75[_0x5a6517(0x1a2)]+0x1,_0x245922=_0x5a6517(0x150)+_0x4e4a82[_0x5a6517(0x101)]()['padStart'](0x5,'0');if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x110)){var _0x36a8d0=users['English'];console[_0x5a6517(0xff)](_0x36a8d0);}else{if(_0x37387e[0x0]['language']==_0x5a6517(0x10f))var _0x36a8d0=users['Hindi'];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x13b))var _0x36a8d0=users[_0x5a6517(0x13b)];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x1fa))var _0x36a8d0=users['Spanish'];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x14c))var _0x36a8d0=users[_0x5a6517(0x14c)];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]=='Portuguese\x20(BR)')var _0x36a8d0=users['Portuguese'];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x14b))var _0x36a8d0=users['Chinese'];else{if(_0x37387e[0x0][_0x5a6517(0x1e5)]==_0x5a6517(0x1e6))var _0x36a8d0=users[_0x5a6517(0x157)];}}}}}}}const _0x201202=getRandom8DigitNumber();_0x201202[_0x5a6517(0x1dc)](_0x3e2b3e=>{var _0x5e4014=_0x5a6517;_0x4a7aec[_0x5e4014(0x12b)](_0x5e4014(0x112),{'success':_0x3c8050[_0x5e4014(0x1be)](_0x5e4014(0x143)),'errors':_0x3c8050[_0x5e4014(0x1be)](_0x5e4014(0x117)),'role':_0x45d3e1,'profile':_0x2a6b16,'customer':_0x5b8087,'warehouse':_0x3f5f70,'product':_0xed57d,'invoice':_0x3e2b3e,'master_shop':_0x37387e,'language':_0x36a8d0,'rooms_data':_0x5570ac});})[_0x5a6517(0x1f5)](_0x316312=>{var _0x2a5ba2=_0x5a6517;_0x3c8050[_0x2a5ba2(0x1be)](_0x2a5ba2(0x117),_0x2a5ba2(0x182)),_0x4a7aec[_0x2a5ba2(0x1c3)]('/all_sales_finished/view');});}catch(_0x1bb2e0){console[_0x5a6517(0xff)](_0x1bb2e0);}}),router[a0_0x440904(0x209)](a0_0x440904(0x12a),auth,async(_0x42c3a4,_0x1d2336)=>{var _0xbf2b39=a0_0x440904;try{const _0xbf34df=_0x42c3a4[_0xbf2b39(0x159)]['id'];console[_0xbf2b39(0xff)](_0xbf34df);const _0x3ed785=await product[_0xbf2b39(0x185)](),_0x47f088=await purchases[_0xbf2b39(0x16e)]([{'$match':{'warehouse_name':_0xbf34df}},{'$unwind':_0xbf2b39(0x113)},{'$group':{'_id':_0xbf2b39(0x171)}}]);console[_0xbf2b39(0xff)](_0xbf2b39(0x160),_0x47f088),_0x1d2336[_0xbf2b39(0x197)](0xc8)['json']({'purchases_data':_0x47f088,'product_data':_0x3ed785});}catch(_0x571507){console['log'](_0x571507);}}),router['post'](a0_0x440904(0x195),auth,async(_0x852fcc,_0x3495b1)=>{var _0x14044f=a0_0x440904;try{const {warehouse_data:_0x4d6b8e,product_data:_0xc9d35f}=_0x852fcc[_0x14044f(0x208)];console[_0x14044f(0xff)](_0x852fcc[_0x14044f(0x208)][_0x14044f(0x202)]);;const _0x22b14e=await master_shop['find']();console[_0x14044f(0xff)](_0x14044f(0x1f2),_0x22b14e);const _0x44202e=await product[_0x14044f(0x1b3)]({'name':_0xc9d35f});console[_0x14044f(0xff)](_0x14044f(0x191),_0x44202e);const _0x2d6c94=await warehouse['aggregate']([{'$match':{'name':_0x4d6b8e}},{'$unwind':_0x14044f(0x1b9)},{'$match':{'product_details.product_name':_0xc9d35f}},{'$group':{'_id':_0x14044f(0x1b6),'product_stock':{'$first':'$product_details.product_stock'}}}]);console[_0x14044f(0xff)](_0x14044f(0x188),_0x2d6c94),_0x3495b1[_0x14044f(0x197)](0xc8)[_0x14044f(0x114)]({'master':_0x22b14e,'new_product':_0x44202e,'stock_data':_0x2d6c94});}catch(_0x13351c){console[_0x14044f(0xff)](_0x13351c);}}),router[a0_0x440904(0xf8)](a0_0x440904(0x13d),auth,async(_0x41166b,_0x17ac30)=>{var _0x99249=a0_0x440904;try{const {invoice:_0x2ab20a,date:_0x27c212,warehouse_name:_0x2d8541,product_name:_0x45ed85,stock:_0x16f8f0,quantity:_0xde5c7c,note:_0x2afe63,room:_0x47f533,primary_code:_0x3ab252,secondary_code:_0x2fabda,prod_code:_0x86bf19,level:_0x424dff,isle:_0x331116,pallet:_0x3bfdb8,batch_code:_0x53344b,SCRN:_0x389dc9,expiry_date:_0x169235,mode_transpo:_0x29cb7b,name_driver:_0x4245e1}=_0x41166b[_0x99249(0x208)];if(typeof _0x45ed85==_0x99249(0x1c9))var _0x58fce6=[_0x41166b[_0x99249(0x208)][_0x99249(0x13e)]],_0x1080b4=[_0x41166b[_0x99249(0x208)][_0x99249(0x146)]],_0x16abb2=[_0x41166b[_0x99249(0x208)][_0x99249(0x170)]],_0x5390ee=[_0x41166b[_0x99249(0x208)][_0x99249(0x128)]],_0x49efb5=[_0x41166b['body'][_0x99249(0x189)]],_0x31889c=[_0x41166b[_0x99249(0x208)][_0x99249(0x16b)]],_0x19e986=[_0x41166b[_0x99249(0x208)][_0x99249(0x1df)]],_0xa8d71b=[_0x41166b['body'][_0x99249(0x1bb)]],_0x21a11b=[_0x41166b['body'][_0x99249(0x1e3)]],_0x41f419=[_0x41166b[_0x99249(0x208)]['batch_code']],_0x32ecb4=[_0x41166b[_0x99249(0x208)][_0x99249(0x137)]],_0x85cfff=[_0x41166b[_0x99249(0x208)][_0x99249(0x14f)]],_0x1f460d=[_0x41166b['body'][_0x99249(0x138)]],_0x38058f=[_0x41166b[_0x99249(0x208)][_0x99249(0x1f1)]],_0x40050b=[_0x41166b['body']['RoomAssigned']],_0x59583a=[_0x41166b['body'][_0x99249(0x1ac)]],_0x221872=[_0x41166b['body'][_0x99249(0x1c6)]];else var _0x58fce6=[..._0x41166b[_0x99249(0x208)][_0x99249(0x13e)]],_0x1080b4=[..._0x41166b[_0x99249(0x208)][_0x99249(0x146)]],_0x16abb2=[..._0x41166b[_0x99249(0x208)][_0x99249(0x170)]],_0x5390ee=[..._0x41166b[_0x99249(0x208)][_0x99249(0x128)]],_0x49efb5=[..._0x41166b['body'][_0x99249(0x189)]],_0x31889c=[..._0x41166b[_0x99249(0x208)][_0x99249(0x16b)]],_0x19e986=[..._0x41166b['body'][_0x99249(0x1df)]],_0xa8d71b=[..._0x41166b['body'][_0x99249(0x1bb)]],_0x21a11b=[..._0x41166b[_0x99249(0x208)][_0x99249(0x1e3)]],_0x41f419=[..._0x41166b['body'][_0x99249(0xfa)]],_0x32ecb4=[..._0x41166b[_0x99249(0x208)]['expiry_date']],_0x85cfff=[..._0x41166b[_0x99249(0x208)]['product_date']],_0x1f460d=[..._0x41166b[_0x99249(0x208)][_0x99249(0x138)]],_0x38058f=[..._0x41166b[_0x99249(0x208)][_0x99249(0x1f1)]],_0x40050b=[..._0x41166b['body'][_0x99249(0x18f)]],_0x59583a=[..._0x41166b[_0x99249(0x208)]['prod_invoice']],_0x221872=[..._0x41166b['body'][_0x99249(0x1c6)]];const _0x41c72b=_0x58fce6[_0x99249(0xfb)](_0x276a0b=>{return _0x276a0b={'product_name':_0x276a0b};});_0x1080b4[_0x99249(0xed)]((_0x35ff4e,_0x1b3ece)=>{var _0x24defd=_0x99249;_0x41c72b[_0x1b3ece][_0x24defd(0x146)]=_0x35ff4e;}),_0x16abb2[_0x99249(0xed)]((_0x183fb6,_0x5017c0)=>{var _0x20bc78=_0x99249;_0x41c72b[_0x5017c0][_0x20bc78(0x19f)]=Math[_0x20bc78(0x151)](_0x183fb6);}),_0x221872[_0x99249(0xed)]((_0x5ca2c9,_0x4c91ad)=>{var _0x236f61=_0x99249;_0x41c72b[_0x4c91ad][_0x236f61(0x1c6)]=_0x5ca2c9;}),_0x5390ee['forEach']((_0x1d895c,_0x144b47)=>{var _0x1d2420=_0x99249;_0x41c72b[_0x144b47][_0x1d2420(0x128)]=_0x1d895c;}),_0x49efb5[_0x99249(0xed)]((_0x3126b0,_0x5912c6)=>{_0x41c72b[_0x5912c6]['secondary_code']=_0x3126b0;}),_0x31889c[_0x99249(0xed)]((_0x2b9008,_0x477518)=>{var _0x56753c=_0x99249;_0x41c72b[_0x477518][_0x56753c(0x1f0)]=_0x2b9008;}),_0x19e986['forEach']((_0x586321,_0x496fed)=>{var _0x59f842=_0x99249;_0x41c72b[_0x496fed][_0x59f842(0x1ca)]=_0x586321;}),_0xa8d71b[_0x99249(0xed)]((_0x421c6d,_0xb4bec8)=>{var _0xaf4f88=_0x99249;_0x41c72b[_0xb4bec8][_0xaf4f88(0x181)]=_0x421c6d;}),_0x21a11b['forEach']((_0x5e17a2,_0xfc5b5c)=>{var _0x543276=_0x99249;_0x41c72b[_0xfc5b5c][_0x543276(0x1e3)]=_0x5e17a2;}),_0x41f419['forEach']((_0x5422e1,_0x1a731e)=>{var _0x2d9dc4=_0x99249;_0x41c72b[_0x1a731e][_0x2d9dc4(0xfa)]=_0x5422e1;}),_0x32ecb4['forEach']((_0x54d123,_0x46b4dd)=>{var _0x537572=_0x99249;_0x41c72b[_0x46b4dd][_0x537572(0x137)]=_0x54d123;}),_0x85cfff[_0x99249(0xed)]((_0x31f5de,_0x2628ce)=>{var _0x41bbcf=_0x99249;_0x41c72b[_0x2628ce][_0x41bbcf(0xf6)]=_0x31f5de;}),_0x1f460d[_0x99249(0xed)]((_0x15d690,_0x351cf3)=>{var _0x280ff3=_0x99249;_0x41c72b[_0x351cf3][_0x280ff3(0x1f6)]=_0x15d690;}),_0x38058f[_0x99249(0xed)]((_0x334fe1,_0x30d90f)=>{_0x41c72b[_0x30d90f]['prod_cat']=_0x334fe1;}),_0x40050b[_0x99249(0xed)]((_0x30a1ee,_0x162a36)=>{var _0x49d559=_0x99249;_0x41c72b[_0x162a36][_0x49d559(0x1fd)]=_0x30a1ee;}),_0x59583a[_0x99249(0xed)]((_0x559298,_0x4597bc)=>{var _0x546735=_0x99249;_0x41c72b[_0x4597bc][_0x546735(0x15d)]=_0x559298;});var _0x297830=0x0;_0x41c72b[_0x99249(0xed)](_0x1e0db1=>{var _0x108458=_0x99249;parseFloat(_0x1e0db1[_0x108458(0x146)])<parseFloat(_0x1e0db1[_0x108458(0x19f)])&&parseFloat(_0x1e0db1[_0x108458(0x19f)])>parseFloat(_0x1e0db1[_0x108458(0x146)])&&(console[_0x108458(0xff)](_0x1e0db1[_0x108458(0x146)]+_0x108458(0x1d9)+_0x1e0db1[_0x108458(0x19f)]),_0x297830++);});if(_0x297830!=0x0)return _0x41166b[_0x99249(0x1be)](_0x99249(0x117),_0x99249(0x102)),_0x17ac30[_0x99249(0x1c3)]('back');const _0x4df9c4=_0x41c72b[_0x99249(0x1cf)](_0x575ecc=>_0x575ecc[_0x99249(0x19f)]!=='0'&&_0x575ecc[_0x99249(0x19f)]!==''),_0x3dcfae=new sales_finished({'invoice':_0x2ab20a,'customer':_0x41166b[_0x99249(0x208)][_0x99249(0x10d)],'date':_0x27c212,'warehouse_name':_0x2d8541,'sale_product':_0x4df9c4,'note':_0x2afe63,'room':_0x47f533,'primary_code':_0x3ab252,'secondary_code':_0x2fabda,'prod_code':_0x86bf19,'SCRN':_0x389dc9,'finalize':'False','mode_transpo':_0x29cb7b,'name_driver':_0x4245e1}),_0x1acda9=await _0x3dcfae[_0x99249(0x199)](),_0x4aa0b5=await sales_finished['findOne']({'invoice':_0x2ab20a}),_0x3b4fd9=new c_payment_data({'invoice':_0x2ab20a,'customer':_0x41166b[_0x99249(0x208)][_0x99249(0x10d)],'reason':_0x99249(0x207)});await _0x3b4fd9['save']();const _0x4c5f27=await master_shop[_0x99249(0x185)](),_0x296e42=await email_settings['findOne'](),_0x4877c9=await customer[_0x99249(0x1b3)]({'name':_0x41166b['body'][_0x99249(0x10d)]});_0x4c5f27[0x0][_0x99249(0x130)]==0x1?(right_currency=_0x4c5f27[0x0][_0x99249(0x1ba)],left_currency=''):(right_currency='',left_currency=_0x4c5f27[0x0][_0x99249(0x1ba)]);var _0x47ec82=_0x58fce6,_0x5a98cf=_0x16abb2,_0x38c58b='',_0x1baf68;for(_0x1baf68 in _0x47ec82){_0x38c58b+=_0x99249(0x1c5)+_0x99249(0x198)+_0x47ec82[_0x1baf68]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5a98cf[_0x1baf68]+_0x99249(0x196)+_0x99249(0x1e7);}console[_0x99249(0xff)]('product_list',_0x38c58b);let _0x247620=nodemailer['createTransport']({'host':_0x296e42[_0x99249(0x105)],'port':Number(_0x296e42[_0x99249(0x144)]),'secure':![],'service':_0x99249(0x1a5),'auth':{'user':_0x296e42['email'],'pass':_0x296e42[_0x99249(0x12d)]}}),_0x473480={'from':_0x296e42[_0x99249(0x131)],'to':_0x99249(0x20a),'subject':_0x99249(0x194),'attachments':[{'filename':'Logo.png','path':__dirname+_0x99249(0x168)+_0x99249(0x1bf)+_0x4c5f27[0x0]['image'],'cid':_0x99249(0x133)}],'html':'ADD\x20SALE'};_0x247620[_0x99249(0x106)](_0x473480,function(_0x380fb7,_0x5b4670){var _0x54d86a=_0x99249;_0x380fb7?(console['log'](_0x380fb7),console[_0x54d86a(0xff)](_0x54d86a(0x1aa))):console[_0x54d86a(0xff)](_0x54d86a(0x158));}),_0x41166b['flash']('success',_0x99249(0x204)),_0x17ac30[_0x99249(0x1c3)](_0x99249(0x1e8)+_0x1acda9[_0x99249(0x184)]);}catch(_0x135fc7){console['log'](_0x135fc7);}}),router[a0_0x440904(0x209)]('/preview/:id',auth,async(_0x331587,_0xb5ee39)=>{var _0x13118f=a0_0x440904;try{const {username:_0x4ea4c,email:_0x39a18c,role:_0x2e423f}=_0x331587[_0x13118f(0x140)],_0x1e4da9=_0x331587[_0x13118f(0x140)],_0x4ca0b3=await profile[_0x13118f(0x1b3)]({'email':_0x1e4da9['email']}),_0x49a74c=await master_shop['find'](),_0x55f3d1=_0x331587[_0x13118f(0x159)]['id'],_0x5634c2=await sales_finished[_0x13118f(0x1a6)](_0x55f3d1),_0x2cbb90=await warehouse[_0x13118f(0x16e)]([{'$match':{'name':_0x5634c2[_0x13118f(0x1c4)]}},{'$unwind':_0x13118f(0x1b9)},{'$group':{'_id':_0x13118f(0x1a1),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x13118f(0x1d5)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x13118f(0x16a)},'type':{'$first':_0x13118f(0x179)},'floorlevel':{'$first':_0x13118f(0x1f8)},'primary_code':{'$first':_0x13118f(0x10e)},'secondary_code':{'$first':_0x13118f(0x165)},'product_code':{'$first':_0x13118f(0x132)},'storage':{'$first':_0x13118f(0x104)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x13118f(0x186)},'batch_code':{'$first':_0x13118f(0x1b5)},'room':{'$first':_0x13118f(0x1c7)},'room_data':{'$first':_0x13118f(0x1b2)}}}]),_0x40dfd9=await customer['find']({});let _0x51e191;if(_0x1e4da9[_0x13118f(0x1a3)]==_0x13118f(0x141)){const _0x2c7aa3=await staff[_0x13118f(0x1b3)]({'email':_0x1e4da9['email']});_0x51e191=await warehouse[_0x13118f(0x16e)]([{'$match':{'status':_0x13118f(0x206),'name':_0x2c7aa3['warehouse']}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x51e191=await warehouse[_0x13118f(0x16e)]([{'$match':{'status':_0x13118f(0x206)}},{'$group':{'_id':_0x13118f(0x1a4),'name':{'$first':_0x13118f(0x1a4)}}}]);const _0x47a8b2=await product['find']({});if(_0x49a74c[0x0][_0x13118f(0x1e5)]==_0x13118f(0x110)){var _0x48df1b=users[_0x13118f(0x119)];console[_0x13118f(0xff)](_0x48df1b);}else{if(_0x49a74c[0x0]['language']==_0x13118f(0x10f))var _0x48df1b=users['Hindi'];else{if(_0x49a74c[0x0][_0x13118f(0x1e5)]==_0x13118f(0x13b))var _0x48df1b=users[_0x13118f(0x13b)];else{if(_0x49a74c[0x0][_0x13118f(0x1e5)]==_0x13118f(0x1fa))var _0x48df1b=users['Spanish'];else{if(_0x49a74c[0x0]['language']==_0x13118f(0x14c))var _0x48df1b=users[_0x13118f(0x14c)];else{if(_0x49a74c[0x0][_0x13118f(0x1e5)]==_0x13118f(0x17c))var _0x48df1b=users[_0x13118f(0x136)];else{if(_0x49a74c[0x0]['language']==_0x13118f(0x14b))var _0x48df1b=users['Chinese'];else{if(_0x49a74c[0x0][_0x13118f(0x1e5)]==_0x13118f(0x1e6))var _0x48df1b=users[_0x13118f(0x157)];}}}}}}}_0xb5ee39[_0x13118f(0x12b)]('edit_sales_finished_view',{'success':_0x331587[_0x13118f(0x1be)]('success'),'errors':_0x331587[_0x13118f(0x1be)](_0x13118f(0x117)),'role':_0x1e4da9,'profile':_0x4ca0b3,'customer':_0x40dfd9,'warehouse':_0x51e191,'product':_0x2cbb90,'user':_0x5634c2,'master_shop':_0x49a74c,'unit':_0x47a8b2,'language':_0x48df1b});}catch(_0x30278a){console['log'](_0x30278a);}}),router['post'](a0_0x440904(0x1ea),auth,async(_0x1af1c9,_0x57de9e)=>{var _0x543b16=a0_0x440904;try{const _0x245684=_0x1af1c9['params']['id'],{invoice:_0x2c5725,warehouse_name:_0x3be643,room:_0x6aff6e}=_0x1af1c9[_0x543b16(0x208)],_0x14c354=await sales_finished[_0x543b16(0x1b3)]({'invoice':_0x2c5725}),_0x48a074=_0x14c354[_0x543b16(0x183)]['map'](async _0x346e40=>{var _0x587773=_0x543b16,_0x52d597=await warehouse[_0x587773(0x1b3)]({'name':_0x3be643,'room':_0x346e40[_0x587773(0x1fd)],'warehouse_category':'Finished\x20Goods'});const _0x502329=_0x52d597[_0x587773(0x121)][_0x587773(0xfb)](_0x28f8e6=>{var _0x5bd882=_0x587773;_0x28f8e6[_0x5bd882(0x13e)]==_0x346e40[_0x5bd882(0x13e)]&&_0x28f8e6[_0x5bd882(0x1ca)]==_0x346e40['bay']&&_0x28f8e6[_0x5bd882(0x137)]==_0x346e40[_0x5bd882(0x137)]&&_0x28f8e6['production_date']==_0x346e40[_0x5bd882(0xf6)]&&_0x28f8e6[_0x5bd882(0xfa)]==_0x346e40[_0x5bd882(0xfa)]&&_0x28f8e6[_0x5bd882(0x184)]==_0x346e40[_0x5bd882(0x1c6)]&&(_0x28f8e6[_0x5bd882(0x1af)]>0x0&&(console[_0x5bd882(0xff)](_0x28f8e6[_0x5bd882(0x13e)]+_0x5bd882(0x12e)+_0x346e40['product_name']+_0x5bd882(0x155)+_0x28f8e6[_0x5bd882(0x1ca)]+_0x5bd882(0x12e)+_0x346e40[_0x5bd882(0x1ca)]+'\x20&&\x20'+_0x28f8e6[_0x5bd882(0xf6)]+_0x5bd882(0x12e)+_0x346e40['production_date']+_0x5bd882(0x155)+_0x28f8e6[_0x5bd882(0x137)]+'\x20==\x20'+_0x346e40[_0x5bd882(0x137)]+_0x5bd882(0x155)+_0x28f8e6['batch_code']+_0x5bd882(0x12e)+_0x346e40[_0x5bd882(0xfa)]+'\x20&&\x20'+_0x28f8e6[_0x5bd882(0x15d)]+'\x20==\x20'+_0x346e40[_0x5bd882(0x15d)]+'\x20&&\x20'+_0x28f8e6['product_stock']+_0x5bd882(0x1c1)+_0x346e40[_0x5bd882(0x19f)]+'\x20>>>\x20'+_0x346e40[_0x5bd882(0x1fd)]+_0x5bd882(0x155)+_0x28f8e6[_0x5bd882(0x184)]+'\x20==\x20'+_0x346e40[_0x5bd882(0x1c6)]),_0x28f8e6[_0x5bd882(0x1af)]=Math[_0x5bd882(0x173)](0x0,Math[_0x5bd882(0x151)](_0x28f8e6['product_stock'])-Math[_0x5bd882(0x151)](_0x346e40['quantity']))));});return _0x52d597;});Promise[_0x543b16(0x108)](_0x48a074)[_0x543b16(0x1dc)](async _0x1502b9=>{var _0x566f1a=_0x543b16;try{for(const _0x3cd701 of _0x1502b9){await _0x3cd701[_0x566f1a(0x199)]();}_0x14c354[_0x566f1a(0x1f3)]='True';const _0x29f22e=await _0x14c354[_0x566f1a(0x199)](),_0x23dc13=await master_shop[_0x566f1a(0x185)](),_0xd1597c=await email_settings['findOne'](),_0x241d0d=await supervisor_settings[_0x566f1a(0x185)]();var _0xecfb2b=_0x14c354[_0x566f1a(0x183)],_0x55d485='',_0x339dab;for(_0x339dab in _0xecfb2b){var _0x35e9f0='FG';_0x14c354[_0x566f1a(0x1c4)]==_0x566f1a(0xf9)&&(_0x35e9f0='DG'),_0x55d485+='<tr>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xecfb2b[_0x339dab][_0x566f1a(0x13e)]+_0x566f1a(0x196)+_0x566f1a(0x198)+_0xecfb2b[_0x339dab]['product_code']+'</td>'+_0x566f1a(0x198)+_0xecfb2b[_0x339dab]['quantity']+_0x566f1a(0x196)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xecfb2b[_0x339dab][_0x566f1a(0x181)]+_0x566f1a(0x196)+_0x566f1a(0x198)+_0xecfb2b[_0x339dab][_0x566f1a(0x1e3)]+'</td>'+_0x566f1a(0x198)+_0x14c354[_0x566f1a(0x1c4)]+_0x566f1a(0x196)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xecfb2b[_0x339dab]['room_name']+_0x566f1a(0x196)+_0x566f1a(0x198)+_0x35e9f0+_0xecfb2b[_0x339dab][_0x566f1a(0x1ca)]+'</td>';}let _0x1f62c0=nodemailer[_0x566f1a(0x10a)]({'host':_0xd1597c[_0x566f1a(0x105)],'port':Number(_0xd1597c[_0x566f1a(0x144)]),'secure':![],'auth':{'user':_0xd1597c['email'],'pass':_0xd1597c[_0x566f1a(0x12d)]}}),_0x492573={'from':_0xd1597c['email'],'to':_0x241d0d[0x0]['FGSEmail'],'subject':'Sales\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+_0x566f1a(0x168)+_0x566f1a(0x1bf)+_0x23dc13[0x0][_0x566f1a(0x126)],'cid':'logo'}],'html':_0x566f1a(0x10b)+_0x566f1a(0x122)+'</head><body>'+_0x566f1a(0x103)+_0x566f1a(0x187)+_0x566f1a(0x103)+_0x566f1a(0x1dd)+_0x566f1a(0x129)+_0x566f1a(0x103)+'<h2>\x20'+_0x23dc13[0x0][_0x566f1a(0x1b1)]+_0x566f1a(0x14d)+_0x566f1a(0x129)+_0x566f1a(0x129)+_0x566f1a(0x178)+_0x566f1a(0x103)+_0x566f1a(0x190)+_0x566f1a(0x1d1)+_0x14c354[_0x566f1a(0x15d)]+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x566f1a(0x11e)+_0x14c354[_0x566f1a(0x1e2)]+'\x20'+_0x566f1a(0x18c)+_0x566f1a(0xf7)+_0x566f1a(0x129)+_0x566f1a(0x20b)+_0x566f1a(0x1f4)+_0x566f1a(0x1c5)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x566f1a(0x17d)+_0x566f1a(0x1a7)+_0x566f1a(0x163)+_0x566f1a(0x1d7)+_0x566f1a(0x12f)+_0x566f1a(0x127)+_0x566f1a(0x1e7)+_0x566f1a(0x1b4)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x55d485+'\x20'+'</tbody>'+_0x566f1a(0x200)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x566f1a(0x17b)+_0x23dc13[0x0][_0x566f1a(0x1b1)]+'</h5>'+'</div>'+_0x566f1a(0x129)+_0x566f1a(0x142)};_0x1f62c0[_0x566f1a(0x106)](_0x492573,function(_0x5a353f,_0x12087f){var _0x29242e=_0x566f1a;_0x5a353f?(console['log'](_0x5a353f),console['log'](_0x29242e(0x1aa))):console[_0x29242e(0xff)](_0x29242e(0x158));}),_0x1af1c9[_0x566f1a(0x1be)](_0x566f1a(0x143),_0x566f1a(0xf3)),_0x57de9e[_0x566f1a(0x1c3)]('/picking_list/pdf/'+_0x245684);}catch(_0x23d196){console['error'](_0x23d196),_0x57de9e['status'](0x1f4)['json']({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x543b16(0x1f5)](_0xbda3a2=>{var _0x5bed3c=_0x543b16;console[_0x5bed3c(0xf1)](_0xbda3a2),_0x57de9e['status'](0x1f4)[_0x5bed3c(0x114)]({'error':_0x5bed3c(0x11f)});});}catch(_0x2dd101){console['log'](_0x2dd101);}}),router[a0_0x440904(0x209)](a0_0x440904(0x123),auth,async(_0x1fef06,_0x5950a0)=>{var _0xcb7d94=a0_0x440904;try{const {username:_0x108b3b,email:_0x67e33,role:_0x14fd39}=_0x1fef06['user'],_0x2cac75=_0x1fef06[_0xcb7d94(0x140)],_0x15c3d8=await profile[_0xcb7d94(0x1b3)]({'email':_0x2cac75['email']}),_0x5e9c72=await master_shop['find'](),_0x51f2b5=_0x1fef06[_0xcb7d94(0x159)]['id'],_0x3bb7b7=await sales_finished[_0xcb7d94(0x1a6)](_0x51f2b5);let _0xca8756=new Date(_0x3bb7b7['expiry_date']),_0x539ffe=('0'+_0xca8756[_0xcb7d94(0x15f)]())['slice'](-0x2),_0x1a3147=('0'+(_0xca8756[_0xcb7d94(0x1cd)]()+0x1))['slice'](-0x2),_0x7884af=_0xca8756[_0xcb7d94(0x12c)](),_0x1759af=_0x7884af+'-'+_0x1a3147+'-'+_0x539ffe;var _0x593686=[_0xcb7d94(0x1d6),'Enclosed'];const _0x44af03=await warehouse[_0xcb7d94(0x16e)]([{'$match':{'name':_0x3bb7b7[_0xcb7d94(0x1c4)],'room':_0x3bb7b7[_0xcb7d94(0x192)]}},{'$unwind':_0xcb7d94(0x1b9)},{'$group':{'_id':_0xcb7d94(0x1a1),'name':{'$first':_0xcb7d94(0x1b6)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0xcb7d94(0x1ee)},'bin':{'$first':_0xcb7d94(0x16a)},'type':{'$first':_0xcb7d94(0x179)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0xcb7d94(0x10e)},'secondary_code':{'$first':_0xcb7d94(0x165)},'product_code':{'$first':_0xcb7d94(0x132)},'storage':{'$first':_0xcb7d94(0x104)},'rack':{'$first':'$product_details.rack'}}}]),_0xc3f24c=await customer['find']({});let _0x46686f;if(_0x2cac75[_0xcb7d94(0x1a3)]==_0xcb7d94(0x141)){const _0x4dc1be=await staff['findOne']({'email':_0x2cac75[_0xcb7d94(0x131)]});_0x46686f=await warehouse[_0xcb7d94(0x16e)]([{'$match':{'status':_0xcb7d94(0x206),'name':_0x4dc1be['warehouse']}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x46686f=await warehouse['aggregate']([{'$match':{'status':_0xcb7d94(0x206)}},{'$group':{'_id':_0xcb7d94(0x1a4),'name':{'$first':'$name'}}}]);const _0x5c53b0=await product[_0xcb7d94(0x185)]({});if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]=='English\x20(US)'){var _0x494034=users['English'];console[_0xcb7d94(0xff)](_0x494034);}else{if(_0x5e9c72[0x0]['language']==_0xcb7d94(0x10f))var _0x494034=users['Hindi'];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]==_0xcb7d94(0x13b))var _0x494034=users['German'];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]==_0xcb7d94(0x1fa))var _0x494034=users[_0xcb7d94(0x1fa)];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]=='French')var _0x494034=users[_0xcb7d94(0x14c)];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]==_0xcb7d94(0x17c))var _0x494034=users[_0xcb7d94(0x136)];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]==_0xcb7d94(0x14b))var _0x494034=users[_0xcb7d94(0x14b)];else{if(_0x5e9c72[0x0][_0xcb7d94(0x1e5)]==_0xcb7d94(0x1e6))var _0x494034=users[_0xcb7d94(0x157)];}}}}}}}_0x5950a0['render'](_0xcb7d94(0x161),{'success':_0x1fef06[_0xcb7d94(0x1be)]('success'),'errors':_0x1fef06[_0xcb7d94(0x1be)](_0xcb7d94(0x117)),'role':_0x2cac75,'profile':_0x15c3d8,'customer':_0xc3f24c,'warehouse':_0x46686f,'product':_0x44af03,'user':_0x3bb7b7,'master_shop':_0x5e9c72,'unit':_0x5c53b0,'language':_0x494034,'rooms_data':_0x593686,'ed_fullDate':_0x1759af});}catch(_0x1dc030){console[_0xcb7d94(0xff)](_0x1dc030);}}),router[a0_0x440904(0xf8)](a0_0x440904(0x123),auth,async(_0x38fb1c,_0x5973b4)=>{var _0x3e9605=a0_0x440904;try{const _0x5f38a2=_0x38fb1c['params']['id'],_0x22d0b0=await sales_finished['findOne']({'_id':_0x38fb1c[_0x3e9605(0x159)]['id']}),_0x41c489=await warehouse[_0x3e9605(0x1b3)]({'name':_0x22d0b0['warehouse_name'],'room':_0x38fb1c['body']['room'],'warehouse_category':'Finished\x20Goods'}),{invoice:_0x24540d,customer:_0x55b47c,date:_0x2de3a9,warehouse_name:_0x1e7841,product_name:_0x51fb5c,stock:_0x29a64c,adjust_qty:_0x1d271a,note:_0x4cc0c4,room:_0x33ca22,primary_code:_0x47ae7b,secondary_code:_0x2117a0,prod_code:_0xaf706c,level:_0x23b339,isle:_0x341c99,pallet:_0x2ae0f5,expiry_date:_0x10b8ac}=_0x38fb1c[_0x3e9605(0x208)];if(typeof _0x51fb5c==_0x3e9605(0x1c9))var _0x3b4ff1=[_0x38fb1c[_0x3e9605(0x208)]['product_name']],_0x1612b4=[_0x38fb1c[_0x3e9605(0x208)]['stock']],_0x477f20=[_0x38fb1c[_0x3e9605(0x208)]['adjust_qty']],_0x3eeea9=[_0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x128)]],_0x4b1d14=[_0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x189)]],_0x3236a2=[_0x38fb1c[_0x3e9605(0x208)]['prod_code']],_0x3525cd=[_0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x1df)]],_0x4b5490=[_0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x137)]];else var _0x3b4ff1=[..._0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x13e)]],_0x1612b4=[..._0x38fb1c[_0x3e9605(0x208)]['stock']],_0x477f20=[..._0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x13a)]],_0x3eeea9=[..._0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x128)]],_0x4b1d14=[..._0x38fb1c[_0x3e9605(0x208)]['secondary_code']],_0x3236a2=[..._0x38fb1c[_0x3e9605(0x208)]['prod_code']],_0x3525cd=[..._0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x1df)]],_0x4b5490=[..._0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x137)]];const _0x37ea05=_0x3b4ff1['map'](_0x60a92d=>{return _0x60a92d={'product_name':_0x60a92d};});_0x1612b4[_0x3e9605(0xed)]((_0x498565,_0x8dcd15)=>{_0x37ea05[_0x8dcd15]['stock']=_0x498565;}),_0x477f20[_0x3e9605(0xed)]((_0x382e34,_0x45f59b)=>{var _0x3b93ba=_0x3e9605;_0x37ea05[_0x45f59b][_0x3b93ba(0x19f)]=_0x382e34;}),_0x3eeea9['forEach']((_0x406f20,_0x3347e9)=>{var _0x10a074=_0x3e9605;_0x37ea05[_0x3347e9][_0x10a074(0x128)]=_0x406f20;}),_0x4b1d14[_0x3e9605(0xed)]((_0x3c1c64,_0x4489aa)=>{var _0x535c5f=_0x3e9605;_0x37ea05[_0x4489aa][_0x535c5f(0x189)]=_0x3c1c64;}),_0x3236a2[_0x3e9605(0xed)]((_0xdca800,_0x3b324d)=>{var _0x1138cd=_0x3e9605;_0x37ea05[_0x3b324d][_0x1138cd(0x1f0)]=_0xdca800;}),_0x3525cd[_0x3e9605(0xed)]((_0x45408b,_0x1ecd2e)=>{var _0x173a73=_0x3e9605;_0x37ea05[_0x1ecd2e][_0x173a73(0x1df)]=_0x45408b;}),_0x4b5490[_0x3e9605(0xed)]((_0x49e535,_0x25e7b1)=>{var _0x53985f=_0x3e9605;_0x37ea05[_0x25e7b1][_0x53985f(0x137)]=_0x49e535;});var _0x169c09=0x0;_0x37ea05[_0x3e9605(0xed)](_0x3d3adf=>{var _0x5b3f48=_0x3e9605;console[_0x5b3f48(0xff)](_0x5b3f48(0x156),_0x3d3adf),(parseInt(_0x3d3adf[_0x5b3f48(0x146)])<parseInt(_0x3d3adf['quantity'])||parseInt(_0x3d3adf[_0x5b3f48(0x19f)])==0x0)&&_0x169c09++;});if(_0x169c09!=0x0)return _0x38fb1c['flash']('errors',_0x3e9605(0x1ef)),_0x5973b4[_0x3e9605(0x1c3)](_0x3e9605(0x1d0));_0x22d0b0[_0x3e9605(0x183)][_0x3e9605(0xed)](_0x36737c=>{var _0x2792c0=_0x3e9605;const _0x2e9417=_0x41c489[_0x2792c0(0x121)][_0x2792c0(0xfb)](_0x3ad642=>{var _0x7cc48d=_0x2792c0;_0x3ad642[_0x7cc48d(0x13e)]==_0x36737c[_0x7cc48d(0x13e)]&&_0x3ad642[_0x7cc48d(0x1ca)]==_0x36737c['bay']&&(_0x3ad642[_0x7cc48d(0x1af)]=parseInt(_0x3ad642[_0x7cc48d(0x1af)])+parseInt(_0x36737c['quantity']));});}),await _0x41c489[_0x3e9605(0x199)]();const _0x2cac67=_0x37ea05['filter'](_0x408c27=>_0x408c27[_0x3e9605(0x19f)]!=='0'&&_0x408c27[_0x3e9605(0x19f)]!=='');_0x22d0b0['invoice']=_0x24540d,_0x22d0b0[_0x3e9605(0x10d)]=_0x55b47c,_0x22d0b0[_0x3e9605(0x1e2)]=_0x2de3a9,_0x22d0b0[_0x3e9605(0x1c4)]=_0x1e7841,_0x22d0b0[_0x3e9605(0x183)]=_0x2cac67,_0x22d0b0[_0x3e9605(0x1cb)]=_0x4cc0c4,_0x22d0b0[_0x3e9605(0x192)]=_0x33ca22;const _0x5c9b98=await _0x22d0b0[_0x3e9605(0x199)](),_0x3438e1=await sales_finished[_0x3e9605(0x1b3)]({'_id':_0x38fb1c[_0x3e9605(0x159)]['id']}),_0x346716=await warehouse[_0x3e9605(0x1b3)]({'name':_0x1e7841,'room':_0x33ca22,'warehouse_category':_0x3e9605(0x17a)});_0x3438e1[_0x3e9605(0x183)][_0x3e9605(0xed)](_0x307995=>{var _0x5be748=_0x3e9605;const _0x1696ec=_0x346716[_0x5be748(0x121)][_0x5be748(0xfb)](_0x5d64ce=>{var _0x42645f=_0x5be748;_0x5d64ce[_0x42645f(0x13e)]==_0x307995['product_name']&&_0x5d64ce['bay']==_0x307995[_0x42645f(0x1ca)]&&(_0x5d64ce[_0x42645f(0x1af)]=parseInt(_0x5d64ce['product_stock'])-parseInt(_0x307995[_0x42645f(0x19f)]));});}),console[_0x3e9605(0xff)](_0x3e9605(0xef),_0x346716),await _0x346716[_0x3e9605(0x199)]();const _0x2594bd=await c_payment_data['findOne']({'invoice':_0x38fb1c[_0x3e9605(0x208)][_0x3e9605(0x15d)]});_0x2594bd[_0x3e9605(0x1fe)]=_0x38fb1c[_0x3e9605(0x208)]['suppliers'],await _0x2594bd[_0x3e9605(0x199)](),_0x38fb1c[_0x3e9605(0x1be)](_0x3e9605(0x143),_0x3e9605(0xf3)),_0x5973b4['redirect'](_0x3e9605(0x154));}catch(_0x30c9ec){console['log'](_0x30c9ec);}}),router[a0_0x440904(0xf8)]('/give_payment/:id',auth,async(_0x5b5b42,_0x2e22a5)=>{var _0x3c3976=a0_0x440904;try{const _0x729a6b=_0x5b5b42[_0x3c3976(0x159)]['id'],{invoice:_0x561f5b,customer:_0x51a0b8,receivable_amount:_0x5db8e2,received_amount:_0x2d68a3}=_0x5b5b42['body'],_0x299d74=await sales[_0x3c3976(0x1a6)](_0x729a6b);console['log'](_0x299d74);var _0x5d6056=_0x5db8e2-_0x2d68a3;console['log'](_0x2d68a3),_0x299d74[_0x3c3976(0x193)]=parseFloat(_0x2d68a3)+parseFloat(_0x299d74['received_amount']),_0x299d74[_0x3c3976(0x1bc)]=_0x5d6056,console['log'](_0x299d74);const _0x1ad93a=await _0x299d74['save'](),_0x2ba9ed=await c_payment_data[_0x3c3976(0x1b3)]({'invoice':_0x561f5b});_0x2ba9ed['amount']=_0x5d6056,await _0x2ba9ed[_0x3c3976(0x199)]();let _0x432044=new Date(),_0x4d99a6=('0'+_0x432044[_0x3c3976(0x15f)]())[_0x3c3976(0x118)](-0x2),_0x2264b6=('0'+(_0x432044[_0x3c3976(0x1cd)]()+0x1))['slice'](-0x2),_0x1ad56c=_0x432044[_0x3c3976(0x12c)](),_0x13f088=_0x1ad56c+'-'+_0x2264b6+'-'+_0x4d99a6;const _0x12aabe=new customer_payment({'invoice':_0x561f5b,'date':_0x1ad56c+'-'+_0x2264b6+'-'+_0x4d99a6,'customer':_0x51a0b8,'reason':'Received\x20Payment\x20For\x20Sale','amount':_0x2d68a3}),_0x206d19=await _0x12aabe[_0x3c3976(0x199)]();_0x5b5b42[_0x3c3976(0x1be)]('success','payment\x20successfull'),_0x2e22a5['redirect'](_0x3c3976(0x1eb));}catch(_0x3ed48c){console['log'](_0x3ed48c);}}),router[a0_0x440904(0x209)](a0_0x440904(0x166),auth,async(_0x46f598,_0x38dbc8)=>{var _0x59f0e8=a0_0x440904;try{const {username:_0x2280de,email:_0x544afe,role:_0x5926c8}=_0x46f598[_0x59f0e8(0x140)],_0x9c0f0a=_0x46f598[_0x59f0e8(0x140)],_0x382009=await profile[_0x59f0e8(0x1b3)]({'email':_0x9c0f0a[_0x59f0e8(0x131)]}),_0x2b0add=await master_shop['find']();console[_0x59f0e8(0xff)]('master',_0x2b0add);const _0x4f8042=_0x46f598['params']['id'],_0x1e4353=await sales['findById'](_0x4f8042);console[_0x59f0e8(0xff)](_0x1e4353);const _0x2d120e=await customer[_0x59f0e8(0x1b3)]({'name':_0x1e4353[_0x59f0e8(0x10d)]});console[_0x59f0e8(0xff)](_0x2d120e);if(_0x2b0add[0x0]['language']=='English\x20(US)'){var _0x406d5c=users['English'];console[_0x59f0e8(0xff)](_0x406d5c);}else{if(_0x2b0add[0x0]['language']==_0x59f0e8(0x10f))var _0x406d5c=users[_0x59f0e8(0x10f)];else{if(_0x2b0add[0x0][_0x59f0e8(0x1e5)]==_0x59f0e8(0x13b))var _0x406d5c=users[_0x59f0e8(0x13b)];else{if(_0x2b0add[0x0][_0x59f0e8(0x1e5)]=='Spanish')var _0x406d5c=users[_0x59f0e8(0x1fa)];else{if(_0x2b0add[0x0][_0x59f0e8(0x1e5)]==_0x59f0e8(0x14c))var _0x406d5c=users[_0x59f0e8(0x14c)];else{if(_0x2b0add[0x0]['language']==_0x59f0e8(0x17c))var _0x406d5c=users[_0x59f0e8(0x136)];else{if(_0x2b0add[0x0][_0x59f0e8(0x1e5)]=='Chinese')var _0x406d5c=users[_0x59f0e8(0x14b)];else{if(_0x2b0add[0x0]['language']=='Arabic\x20(ae)')var _0x406d5c=users[_0x59f0e8(0x157)];}}}}}}}_0x38dbc8[_0x59f0e8(0x12b)](_0x59f0e8(0x1d8),{'success':_0x46f598[_0x59f0e8(0x1be)](_0x59f0e8(0x143)),'errors':_0x46f598['flash']('errors'),'role':_0x9c0f0a,'profile':_0x382009,'master_shop':_0x2b0add,'customers':_0x2d120e,'sales':_0x1e4353,'language':_0x406d5c});}catch(_0x50369d){console[_0x59f0e8(0xff)](_0x50369d);}}),router['get']('/view/return_sales/:id',auth,async(_0x32dcca,_0x3e4acd)=>{var _0x5ab4c2=a0_0x440904;try{const {username:_0x5e7d49,email:_0x435770,role:_0x5ae9e1}=_0x32dcca['user'],_0xc28ad7=_0x32dcca[_0x5ab4c2(0x140)],_0x2de826=await profile['findOne']({'email':_0xc28ad7[_0x5ab4c2(0x131)]}),_0xf8dc9f=await master_shop[_0x5ab4c2(0x185)](),_0x712ede=_0x32dcca['params']['id'],_0x26e91c=await sales_finished['findById'](_0x712ede),_0x510515=await warehouse[_0x5ab4c2(0x16e)]([{'$match':{'name':_0x26e91c[_0x5ab4c2(0x1c4)]}},{'$unwind':_0x5ab4c2(0x1b9)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5ab4c2(0x1b6)},'product_stock':{'$first':_0x5ab4c2(0x1d5)},'bay':{'$first':_0x5ab4c2(0x1ee)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x5ab4c2(0x179)},'floorlevel':{'$first':_0x5ab4c2(0x1f8)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5ab4c2(0x165)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x5ab4c2(0x104)},'rack':{'$first':_0x5ab4c2(0x19e)},'expiry_date':{'$first':_0x5ab4c2(0x1ae)},'production_date':{'$first':_0x5ab4c2(0x186)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':'$product_details.secondary_unit'},'maxProducts':{'$first':_0x5ab4c2(0x11b)},'batch_code':{'$first':_0x5ab4c2(0x1b5)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'}}}]),_0x5bd4ed=await product[_0x5ab4c2(0x185)]({}),_0x37d744=await warehouse['aggregate']([{'$match':{'status':_0x5ab4c2(0x206),'warehouse_category':_0x5ab4c2(0x17a),'name':{'$ne':_0x5ab4c2(0x14a),'$ne':_0x5ab4c2(0x172)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]);var _0x3c50ba=['Return\x20Rooms'];const _0x37563b=await warehouse[_0x5ab4c2(0x16e)]([{'$match':{'status':_0x5ab4c2(0x206),'name':_0x5ab4c2(0x172)}},{'$group':{'_id':_0x5ab4c2(0x1a4),'name':{'$first':_0x5ab4c2(0x1a4)}}},{'$sort':{'name':0x1}}]);if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]==_0x5ab4c2(0x110)){var _0x30724f=users[_0x5ab4c2(0x119)];console[_0x5ab4c2(0xff)](_0x30724f);}else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]=='Hindi')var _0x30724f=users[_0x5ab4c2(0x10f)];else{if(_0xf8dc9f[0x0]['language']==_0x5ab4c2(0x13b))var _0x30724f=users[_0x5ab4c2(0x13b)];else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]==_0x5ab4c2(0x1fa))var _0x30724f=users[_0x5ab4c2(0x1fa)];else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]=='French')var _0x30724f=users[_0x5ab4c2(0x14c)];else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]==_0x5ab4c2(0x17c))var _0x30724f=users[_0x5ab4c2(0x136)];else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]=='Chinese')var _0x30724f=users['Chinese'];else{if(_0xf8dc9f[0x0][_0x5ab4c2(0x1e5)]==_0x5ab4c2(0x1e6))var _0x30724f=users[_0x5ab4c2(0x157)];}}}}}}}_0x3e4acd[_0x5ab4c2(0x12b)]('return_sale_finished',{'success':_0x32dcca[_0x5ab4c2(0x1be)](_0x5ab4c2(0x143)),'errors':_0x32dcca[_0x5ab4c2(0x1be)](_0x5ab4c2(0x117)),'role':_0xc28ad7,'profile':_0x2de826,'user':_0x26e91c,'stock':_0x510515,'master_shop':_0xf8dc9f,'unit':_0x5bd4ed,'language':_0x30724f,'warehouses':_0x37d744,'rooms':_0x3c50ba,'warehouse_QA':_0x37563b});}catch(_0xc80ab2){console[_0x5ab4c2(0xff)](_0xc80ab2),_0x3e4acd['status'](0xc8)[_0x5ab4c2(0x114)]({'message':_0xc80ab2[_0x5ab4c2(0x19b)]});}}),router[a0_0x440904(0xf8)](a0_0x440904(0x147),auth,async(_0x405505,_0x2133ea)=>{var _0x47ee01=a0_0x440904;if(_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1ff)]=='QA')try{const {invoice:_0x482842,date:_0x5a98ad,warehouse_name:_0x9a6508,product_name:_0x14860f,primary_code:_0x266a26,secondary_code:_0x1a2c7f,product_code:_0x17937b,sales_quantity:_0x199a7e,stocks:_0x305c2e,return_qty:_0x111e72,Room_name:_0x375598,to_warehouse_name_QA:_0x1a99f7,to_Room_name_QA:_0x12bbe8,note:_0x1f39e5,for_categorize:_0x48e930,product_name_QA1:_0x189342}=_0x405505[_0x47ee01(0x208)];if(typeof _0x189342=='string')var _0x53d796=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x177)]],_0x3e6bc2=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x139)]],_0x3528bb=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1d3)]],_0x284db0=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x107)]],_0x2c9ada=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x18b)]],_0x2f3bf6=[_0x405505['body'][_0x47ee01(0x201)]],_0x16a541=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x205)]],_0x9ef9ca=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x180)]],_0x353d88=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1d2)]],_0x49cdca=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x19d)]],_0x2884ab=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1db)]],_0x2b8230=[_0x405505['body']['unit_QA']],_0x5cfa88=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0xfc)]],_0x590032=[_0x405505['body'][_0x47ee01(0x175)]];else var _0x53d796=[..._0x405505[_0x47ee01(0x208)]['product_name_QA1']],_0x3e6bc2=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x139)]],_0x3528bb=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x1d3)]],_0x284db0=[..._0x405505['body']['product_code_QA']],_0x2c9ada=[..._0x405505['body']['sales_quantity_QA']],_0x2f3bf6=[..._0x405505['body'][_0x47ee01(0x201)]],_0x16a541=[..._0x405505['body'][_0x47ee01(0x205)]],_0x9ef9ca=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x180)]],_0x353d88=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x1d2)]],_0x49cdca=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x19d)]],_0x2884ab=[..._0x405505['body'][_0x47ee01(0x1db)]],_0x2b8230=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x164)]],_0x5cfa88=[..._0x405505['body'][_0x47ee01(0xfc)]],_0x590032=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x175)]];const _0x1d255d=_0x53d796[_0x47ee01(0xfb)](_0x246bbe=>{return _0x246bbe={'product_name':_0x246bbe};});_0x3e6bc2['forEach']((_0x4d0767,_0x22841c)=>{var _0x3234ec=_0x47ee01;_0x1d255d[_0x22841c][_0x3234ec(0x128)]=_0x4d0767;}),_0x3528bb[_0x47ee01(0xed)]((_0x1d4b40,_0x289eba)=>{var _0x29ee9a=_0x47ee01;_0x1d255d[_0x289eba][_0x29ee9a(0x189)]=_0x1d4b40;}),_0x284db0[_0x47ee01(0xed)]((_0x403050,_0x5b2e05)=>{var _0x3d43df=_0x47ee01;_0x1d255d[_0x5b2e05][_0x3d43df(0x1f0)]=_0x403050;}),_0x2c9ada['forEach']((_0x26f70f,_0x37b20e)=>{var _0x451870=_0x47ee01;_0x1d255d[_0x37b20e][_0x451870(0x1ed)]=_0x26f70f;}),_0x2f3bf6[_0x47ee01(0xed)]((_0x5e62d9,_0x33a27e)=>{var _0x8b3eed=_0x47ee01;_0x1d255d[_0x33a27e][_0x8b3eed(0x146)]=_0x5e62d9;}),_0x16a541[_0x47ee01(0xed)]((_0x415257,_0x63b6e2)=>{_0x1d255d[_0x63b6e2]['return_qty']=_0x415257;}),_0x9ef9ca['forEach']((_0x3bc46a,_0x58a4a9)=>{var _0x469a1d=_0x47ee01;_0x1d255d[_0x58a4a9][_0x469a1d(0x162)]=_0x3bc46a;}),_0x353d88['forEach']((_0x2f7451,_0x18a0a1)=>{var _0x185af5=_0x47ee01;_0x1d255d[_0x18a0a1][_0x185af5(0x1a0)]=_0x2f7451;}),_0x49cdca[_0x47ee01(0xed)]((_0x46d82e,_0x1f6bfa)=>{_0x1d255d[_0x1f6bfa]['batch_code']=_0x46d82e;}),_0x2884ab['forEach']((_0x10186d,_0x119759)=>{var _0xb096f9=_0x47ee01;_0x1d255d[_0x119759][_0xb096f9(0x1e3)]=_0x10186d;}),_0x2b8230['forEach']((_0x40e372,_0x36bbb3)=>{_0x1d255d[_0x36bbb3]['unit']=_0x40e372;}),_0x5cfa88[_0x47ee01(0xed)]((_0x351c08,_0xe215dc)=>{var _0x50ff35=_0x47ee01;_0x1d255d[_0xe215dc][_0x50ff35(0xf6)]=_0x351c08;}),_0x590032[_0x47ee01(0xed)]((_0x38deca,_0x313a6b)=>{var _0x3fe1ca=_0x47ee01;_0x1d255d[_0x313a6b][_0x3fe1ca(0x137)]=_0x38deca;});const _0x1079ef=await sales_finished[_0x47ee01(0x1b3)]({'invoice':_0x482842});_0x1079ef[_0x47ee01(0x10c)]=_0x47ee01(0xf2);const _0x8e141e=await _0x1079ef[_0x47ee01(0x199)](),_0x2481ec=new sales_return_finished({'invoice':_0x482842,'customer':_0x405505[_0x47ee01(0x208)][_0x47ee01(0x10d)],'date':_0x5a98ad,'warehouse_name':_0x9a6508,'room':_0x375598,'ToWarehouse':_0x1a99f7,'ToRoom':_0x12bbe8,'return_sale_QA':_0x1d255d,'note':_0x1f39e5,'warehouse_cat':_0x48e930}),_0x12a528=await _0x2481ec[_0x47ee01(0x199)](),_0x47a66b=await sales_return_finished[_0x47ee01(0x1b3)]({'invoice':_0x482842}),_0x300734=await warehouse[_0x47ee01(0x1b3)]({'name':_0x1a99f7,'room':_0x12bbe8});_0x47a66b[_0x47ee01(0x1a8)][_0x47ee01(0xed)](_0x4b4e0a=>{var _0x2fa1cf=_0x47ee01,_0x1d202b=0x0;const _0x52df07=_0x300734[_0x2fa1cf(0x121)]['map'](_0x26802f=>{var _0x15c340=_0x2fa1cf;_0x26802f[_0x15c340(0x13e)]==_0x4b4e0a[_0x15c340(0x13e)]&&_0x26802f[_0x15c340(0x137)]==_0x4b4e0a['expiry_date']&&_0x26802f[_0x15c340(0xf6)]==_0x4b4e0a[_0x15c340(0xf6)]&&_0x26802f[_0x15c340(0xfa)]==_0x4b4e0a[_0x15c340(0xfa)]&&(_0x26802f[_0x15c340(0x1af)]=parseInt(_0x26802f[_0x15c340(0x1af)])+parseInt(_0x4b4e0a[_0x15c340(0x18e)]),_0x1d202b++);});_0x1d202b=='0'&&(_0x300734[_0x2fa1cf(0x121)]=_0x300734[_0x2fa1cf(0x121)]['concat']({'product_name':_0x4b4e0a[_0x2fa1cf(0x13e)],'product_stock':_0x4b4e0a['return_qty'],'primary_code':_0x4b4e0a[_0x2fa1cf(0x128)],'secondary_code':_0x4b4e0a[_0x2fa1cf(0x189)],'product_code':_0x4b4e0a['product_code'],'batch_code':_0x4b4e0a[_0x2fa1cf(0xfa)],'maxPerUnit':_0x4b4e0a['maxPerUnit'],'production_date':_0x4b4e0a[_0x2fa1cf(0xf6)],'expiry_date':_0x4b4e0a[_0x2fa1cf(0x137)],'secondary_unit':_0x4b4e0a[_0x2fa1cf(0x1e3)],'unit':_0x4b4e0a[_0x2fa1cf(0x181)],'maxProducts':_0x4b4e0a[_0x2fa1cf(0x1a0)],'bay':_0x4b4e0a[_0x2fa1cf(0x1ca)]}));}),await _0x300734[_0x47ee01(0x199)]();const _0x587cf5=new c_payment_data({'invoice':_0x482842,'customer':_0x405505[_0x47ee01(0x208)]['customer'],'reason':_0x47ee01(0x111)});await _0x587cf5[_0x47ee01(0x199)]();const _0x1b1f1e=await master_shop['find'](),_0xa2ab39=await email_settings[_0x47ee01(0x1b3)](),_0x3f1f5c=await customer[_0x47ee01(0x1b3)]({'name':_0x405505['body'][_0x47ee01(0x10d)]});_0x1b1f1e[0x0][_0x47ee01(0x130)]==0x1?(right_currency=_0x1b1f1e[0x0][_0x47ee01(0x1ba)],left_currency=''):(right_currency='',left_currency=_0x1b1f1e[0x0][_0x47ee01(0x1ba)]);var _0x5cae6c=_0x53d796,_0x40a400=_0x16a541,_0x734f49='',_0x2fe9fa;for(_0x2fe9fa in _0x5cae6c){_0x734f49+='<tr>'+_0x47ee01(0x198)+_0x5cae6c[_0x2fe9fa]+_0x47ee01(0x196)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x40a400[_0x2fe9fa]+_0x47ee01(0x196)+_0x47ee01(0x1e7);}console[_0x47ee01(0xff)](_0x47ee01(0x109),_0x734f49);let _0x5b270c=nodemailer[_0x47ee01(0x10a)]({'service':'gmail','auth':{'user':_0xa2ab39['email'],'pass':_0xa2ab39[_0x47ee01(0x12d)]}}),_0x5e99a8={'from':_0xa2ab39[_0x47ee01(0x131)],'to':_0x3f1f5c[_0x47ee01(0x131)],'subject':_0x47ee01(0x124),'attachments':[{'filename':_0x47ee01(0x169),'path':__dirname+_0x47ee01(0x168)+_0x47ee01(0x1bf)+_0x1b1f1e[0x0][_0x47ee01(0x126)],'cid':'logo'}],'html':_0x47ee01(0x10b)+_0x47ee01(0x122)+'</head><body>'+_0x47ee01(0x103)+_0x47ee01(0x187)+'<div>'+_0x47ee01(0x1dd)+'</div>'+_0x47ee01(0x103)+'<h2>\x20'+_0x1b1f1e[0x0][_0x47ee01(0x1b1)]+_0x47ee01(0x14d)+_0x47ee01(0x129)+_0x47ee01(0x129)+_0x47ee01(0x178)+_0x47ee01(0x103)+_0x47ee01(0x190)+'\x20Order\x20Number\x20:\x20'+_0x482842+'\x20'+_0x47ee01(0x15b)+'\x20Order\x20Date\x20:\x20'+_0x5a98ad+'\x20'+_0x47ee01(0x18c)+_0x47ee01(0xf7)+_0x47ee01(0x129)+_0x47ee01(0x20b)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+_0x47ee01(0x174)+_0x47ee01(0x115)+_0x47ee01(0x203)+_0x47ee01(0xee)+'</tr>'+'</thead>'+_0x47ee01(0x148)+'\x20'+_0x734f49+'\x20'+_0x47ee01(0x16f)+_0x47ee01(0x200)+'<div>'+_0x47ee01(0x1cc)+_0x47ee01(0x17b)+_0x1b1f1e[0x0]['site_title']+_0x47ee01(0xf7)+_0x47ee01(0x129)+_0x47ee01(0x129)+'</body></html>'};_0x5b270c['sendMail'](_0x5e99a8,function(_0x313d40,_0x44198c){var _0x527740=_0x47ee01;_0x313d40?(console[_0x527740(0xff)](_0x313d40),console[_0x527740(0xff)](_0x527740(0x1aa))):console[_0x527740(0xff)](_0x527740(0x158));}),_0x405505['flash'](_0x47ee01(0x143),_0x47ee01(0x19a)),_0x2133ea[_0x47ee01(0x1c3)]('/all_sales_finished/view');}catch(_0x4b9b44){_0x2133ea[_0x47ee01(0x197)](0xc8)[_0x47ee01(0x114)]({'message1':_0x4b9b44['message']});}else{if(_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1ff)]=='GS')try{const {invoice:_0x35ac93,date:_0x4a4ed5,warehouse_name:_0x1e9036,product_name:_0x294d92,primary_code:_0x493711,secondary_code:_0xcbe2dc,product_code:_0x48a6a8,sales_quantity:_0x16d9ba,stocks:_0x157387,return_qty:_0x249e55,Room_name:_0x598192,to_warehouse_name:_0x2c10a6,to_Room_name:_0x3830e3,note:_0x256496,level:_0x495880,isle:_0x2cd170,pallet:_0x587598,for_categorize:_0x2a504e}=_0x405505[_0x47ee01(0x208)];if(typeof _0x294d92==_0x47ee01(0x1c9))var _0x53d796=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x13e)]],_0x3e6bc2=[_0x405505['body'][_0x47ee01(0x128)]],_0x3528bb=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x189)]],_0x284db0=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1f0)]],_0x2c9ada=[_0x405505[_0x47ee01(0x208)]['sales_quantity']],_0x16a541=[_0x405505[_0x47ee01(0x208)]['return_qty']],_0x431800=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x1ca)]],_0x9ef9ca=[_0x405505['body']['maxPerUnit']],_0x353d88=[_0x405505['body']['maxProducts']],_0x49cdca=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0xfa)]],_0x2884ab=[_0x405505['body'][_0x47ee01(0x1e3)]],_0x2b8230=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0x181)]],_0x5cfa88=[_0x405505[_0x47ee01(0x208)][_0x47ee01(0xf6)]],_0x590032=[_0x405505['body'][_0x47ee01(0x137)]];else var _0x53d796=[..._0x405505[_0x47ee01(0x208)]['product_name']],_0x3e6bc2=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x128)]],_0x3528bb=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x189)]],_0x284db0=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x1f0)]],_0x2c9ada=[..._0x405505[_0x47ee01(0x208)]['sales_quantity']],_0x16a541=[..._0x405505['body'][_0x47ee01(0x18e)]],_0x431800=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x1ca)]],_0x9ef9ca=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x162)]],_0x353d88=[..._0x405505['body'][_0x47ee01(0x1a0)]],_0x49cdca=[..._0x405505['body']['batch_code']],_0x2884ab=[..._0x405505['body']['secondary_unit']],_0x2b8230=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x181)]],_0x5cfa88=[..._0x405505['body'][_0x47ee01(0xf6)]],_0x590032=[..._0x405505[_0x47ee01(0x208)][_0x47ee01(0x137)]];const _0x453c2d=_0x53d796[_0x47ee01(0xfb)](_0x3300d2=>{return _0x3300d2={'product_name':_0x3300d2};});_0x3e6bc2[_0x47ee01(0xed)]((_0x12f931,_0x3b3509)=>{var _0x1ee452=_0x47ee01;_0x453c2d[_0x3b3509][_0x1ee452(0x128)]=_0x12f931;}),_0x3528bb[_0x47ee01(0xed)]((_0x3b77ac,_0x56dabc)=>{var _0x1f81c6=_0x47ee01;_0x453c2d[_0x56dabc][_0x1f81c6(0x189)]=_0x3b77ac;}),_0x284db0['forEach']((_0x1f448d,_0x42fdb5)=>{var _0xd915f=_0x47ee01;_0x453c2d[_0x42fdb5][_0xd915f(0x1f0)]=_0x1f448d;}),_0x2c9ada['forEach']((_0x2c2a21,_0x488450)=>{var _0x3c1d51=_0x47ee01;_0x453c2d[_0x488450][_0x3c1d51(0x1ed)]=_0x2c2a21;}),_0x16a541[_0x47ee01(0xed)]((_0xdad2e,_0x28f3ab)=>{var _0x2f3ab4=_0x47ee01;_0x453c2d[_0x28f3ab][_0x2f3ab4(0x18e)]=_0xdad2e;}),_0x431800['forEach']((_0xe5fd04,_0x298d51)=>{var _0x515e76=_0x47ee01;_0x453c2d[_0x298d51][_0x515e76(0x1ca)]=_0xe5fd04;}),_0x9ef9ca['forEach']((_0x5043b2,_0x23d702)=>{var _0x3c33b0=_0x47ee01;_0x453c2d[_0x23d702][_0x3c33b0(0x162)]=_0x5043b2;}),_0x353d88['forEach']((_0x4d612d,_0x62cc1a)=>{var _0x59d89b=_0x47ee01;_0x453c2d[_0x62cc1a][_0x59d89b(0x1a0)]=_0x4d612d;}),_0x49cdca[_0x47ee01(0xed)]((_0x1f189b,_0x14684e)=>{var _0x564150=_0x47ee01;_0x453c2d[_0x14684e][_0x564150(0xfa)]=_0x1f189b;}),_0x2884ab['forEach']((_0x541a55,_0x2d4db7)=>{var _0x566b75=_0x47ee01;_0x453c2d[_0x2d4db7][_0x566b75(0x1e3)]=_0x541a55;}),_0x2b8230[_0x47ee01(0xed)]((_0x186f62,_0x4cea19)=>{var _0x3dd266=_0x47ee01;_0x453c2d[_0x4cea19][_0x3dd266(0x181)]=_0x186f62;}),_0x5cfa88[_0x47ee01(0xed)]((_0x31500a,_0x56a9c5)=>{_0x453c2d[_0x56a9c5]['production_date']=_0x31500a;}),_0x590032[_0x47ee01(0xed)]((_0x58520d,_0x2ebd14)=>{var _0x2279d1=_0x47ee01;_0x453c2d[_0x2ebd14][_0x2279d1(0x137)]=_0x58520d;});var _0x5298f0=0x0;_0x453c2d[_0x47ee01(0xed)](_0x19259d=>{var _0x39afcc=_0x47ee01;(parseInt(_0x19259d[_0x39afcc(0x1ed)])<parseInt(_0x19259d['return_qty'])||parseInt(_0x19259d[_0x39afcc(0x146)])<parseInt(_0x19259d[_0x39afcc(0x18e)])&&parseInt(_0x19259d[_0x39afcc(0x1ed)])>parseInt(_0x19259d[_0x39afcc(0x18e)])||parseInt(_0x19259d[_0x39afcc(0x18e)])==0x0)&&_0x5298f0++;});if(_0x5298f0!=0x0)return _0x405505[_0x47ee01(0x1be)](_0x47ee01(0x117),_0x47ee01(0x15a)),_0x2133ea[_0x47ee01(0x1c3)](_0x47ee01(0x1d0));const _0x3d26ad=await sales_finished[_0x47ee01(0x1b3)]({'invoice':_0x35ac93});_0x3d26ad[_0x47ee01(0x10c)]=_0x47ee01(0xf2);const _0x468fd0=await _0x3d26ad[_0x47ee01(0x199)](),_0x4a74ca=new sales_return_finished({'invoice':_0x35ac93,'customer':_0x405505[_0x47ee01(0x208)][_0x47ee01(0x10d)],'date':_0x4a4ed5,'warehouse_name':_0x1e9036,'room':_0x598192,'ToWarehouse':_0x2c10a6,'ToRoom':_0x3830e3,'return_sale':_0x453c2d,'note':_0x256496,'warehouse_cat':_0x2a504e}),_0x472043=await _0x4a74ca['save'](),_0x52e6b8=await sales_return_finished[_0x47ee01(0x1b3)]({'invoice':_0x35ac93}),_0x57f353=await warehouse['findOne']({'name':_0x2c10a6,'room':_0x3830e3,'warehouse_category':_0x47ee01(0x17a)});_0x52e6b8[_0x47ee01(0xf4)][_0x47ee01(0xed)](_0x308089=>{var _0x91d978=_0x47ee01,_0x453755=0x0;const _0x2e7634=_0x57f353[_0x91d978(0x121)][_0x91d978(0xfb)](_0x155691=>{var _0x4ba291=_0x91d978;_0x155691[_0x4ba291(0x13e)]==_0x308089[_0x4ba291(0x13e)]&&_0x155691['bay']==_0x308089[_0x4ba291(0x1ca)]&&_0x155691[_0x4ba291(0x137)]==_0x308089['expiry_date']&&_0x155691['production_date']==_0x308089[_0x4ba291(0xf6)]&&_0x155691['batch_code']==_0x308089[_0x4ba291(0xfa)]&&(_0x155691[_0x4ba291(0x1af)]=parseInt(_0x155691[_0x4ba291(0x1af)])+parseInt(_0x308089[_0x4ba291(0x18e)]),_0x453755++);});_0x453755=='0'&&(_0x57f353[_0x91d978(0x121)]=_0x57f353['product_details'][_0x91d978(0x17f)]({'product_name':_0x308089['product_name'],'product_stock':_0x308089['return_qty'],'primary_code':_0x308089['primary_code'],'secondary_code':_0x308089[_0x91d978(0x189)],'product_code':_0x308089['product_code'],'bay':_0x308089[_0x91d978(0x1ca)],'batch_code':_0x308089['batch_code'],'maxPerUnit':_0x308089[_0x91d978(0x162)],'production_date':_0x308089[_0x91d978(0xf6)],'expiry_date':_0x308089[_0x91d978(0x137)],'secondary_unit':_0x308089['secondary_unit'],'unit':_0x308089['unit'],'maxProducts':_0x308089[_0x91d978(0x1a0)]}));}),await _0x57f353['save'](),console[_0x47ee01(0xff)](_0x405505['body']);const _0x47337f=new c_payment_data({'invoice':_0x35ac93,'customer':_0x405505[_0x47ee01(0x208)][_0x47ee01(0x10d)],'reason':_0x47ee01(0x111)});await _0x47337f[_0x47ee01(0x199)]();const _0x41cbc0=await master_shop[_0x47ee01(0x185)]();console[_0x47ee01(0xff)]('add\x20post',_0x41cbc0[0x0][_0x47ee01(0x126)]);const _0x443c21=await email_settings[_0x47ee01(0x1b3)](),_0x4e37c2=await customer[_0x47ee01(0x1b3)]({'name':_0x405505[_0x47ee01(0x208)][_0x47ee01(0x10d)]});console[_0x47ee01(0xff)](_0x47ee01(0x15e),_0x4e37c2);_0x41cbc0[0x0][_0x47ee01(0x130)]==0x1?(right_currency=_0x41cbc0[0x0]['currency'],left_currency=''):(right_currency='',left_currency=_0x41cbc0[0x0][_0x47ee01(0x1ba)]);var _0x5cae6c=_0x53d796,_0x40a400=_0x16a541,_0x734f49='',_0x2fe9fa;for(_0x2fe9fa in _0x5cae6c){_0x734f49+=_0x47ee01(0x1c5)+_0x47ee01(0x198)+_0x5cae6c[_0x2fe9fa]+_0x47ee01(0x196)+_0x47ee01(0x198)+_0x40a400[_0x2fe9fa]+'</td>'+_0x47ee01(0x1e7);}console[_0x47ee01(0xff)](_0x47ee01(0x109),_0x734f49);let _0x2ec427=nodemailer[_0x47ee01(0x10a)]({'service':_0x47ee01(0x1a5),'auth':{'user':_0x443c21[_0x47ee01(0x131)],'pass':_0x443c21[_0x47ee01(0x12d)]}}),_0x5abbf6={'from':_0x443c21[_0x47ee01(0x131)],'to':_0x4e37c2[_0x47ee01(0x131)],'subject':_0x47ee01(0x124),'attachments':[{'filename':_0x47ee01(0x169),'path':__dirname+_0x47ee01(0x168)+_0x47ee01(0x1bf)+_0x41cbc0[0x0][_0x47ee01(0x126)],'cid':_0x47ee01(0x133)}],'html':_0x47ee01(0x10b)+_0x47ee01(0x122)+'</head><body>'+_0x47ee01(0x103)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x47ee01(0x1dd)+_0x47ee01(0x129)+_0x47ee01(0x103)+'<h2>\x20'+_0x41cbc0[0x0][_0x47ee01(0x1b1)]+_0x47ee01(0x14d)+_0x47ee01(0x129)+_0x47ee01(0x129)+_0x47ee01(0x178)+'<div>'+_0x47ee01(0x190)+'\x20Order\x20Number\x20:\x20'+_0x35ac93+'\x20'+_0x47ee01(0x15b)+_0x47ee01(0x11e)+_0x4a4ed5+'\x20'+_0x47ee01(0x18c)+'</h5>'+_0x47ee01(0x129)+_0x47ee01(0x20b)+_0x47ee01(0x1f4)+_0x47ee01(0x1c5)+_0x47ee01(0x174)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>'+_0x47ee01(0x203)+_0x47ee01(0xee)+_0x47ee01(0x1e7)+_0x47ee01(0x1b4)+_0x47ee01(0x148)+'\x20'+_0x734f49+'\x20'+_0x47ee01(0x16f)+_0x47ee01(0x200)+_0x47ee01(0x103)+_0x47ee01(0x1cc)+'<h5>'+_0x41cbc0[0x0][_0x47ee01(0x1b1)]+_0x47ee01(0xf7)+_0x47ee01(0x129)+_0x47ee01(0x129)+_0x47ee01(0x142)};_0x2ec427[_0x47ee01(0x106)](_0x5abbf6,function(_0x2f68d1,_0x14c7d9){var _0x10e9b9=_0x47ee01;_0x2f68d1?(console[_0x10e9b9(0xff)](_0x2f68d1),console[_0x10e9b9(0xff)](_0x10e9b9(0x1aa))):console[_0x10e9b9(0xff)]('Email\x20sent\x20successfully');}),_0x405505['flash'](_0x47ee01(0x143),_0x47ee01(0x19a)),_0x2133ea[_0x47ee01(0x1c3)]('/all_sales_finished/view');}catch(_0x5c9097){console[_0x47ee01(0xff)](_0x5c9097),_0x2133ea[_0x47ee01(0x197)](0xc8)[_0x47ee01(0x114)]({'message1':_0x5c9097[_0x47ee01(0x19b)]});}}}),router['get']('/barcode/:id',auth,async(_0x4124a2,_0x438071)=>{var _0x236547=a0_0x440904;try{const {username:_0x2d62d3,email:_0x26b988,role:_0x2bb478}=_0x4124a2[_0x236547(0x140)],_0x29f109=_0x4124a2[_0x236547(0x140)],_0x5ba487=await profile[_0x236547(0x1b3)]({'email':_0x29f109[_0x236547(0x131)]}),_0x24bc59=await master_shop[_0x236547(0x185)]();console[_0x236547(0xff)](_0x236547(0x149),_0x24bc59);const _0x266979=_0x4124a2[_0x236547(0x159)]['id'],_0x384c1f=await sales[_0x236547(0x1a6)](_0x266979);console[_0x236547(0xff)]('barcode\x20user_id',_0x384c1f);if(_0x24bc59[0x0]['language']==_0x236547(0x110))var _0x2dcea5=users[_0x236547(0x119)];else{if(_0x24bc59[0x0][_0x236547(0x1e5)]=='Hindi')var _0x2dcea5=users['Hindi'];else{if(_0x24bc59[0x0][_0x236547(0x1e5)]==_0x236547(0x13b))var _0x2dcea5=users[_0x236547(0x13b)];else{if(_0x24bc59[0x0][_0x236547(0x1e5)]==_0x236547(0x1fa))var _0x2dcea5=users[_0x236547(0x1fa)];else{if(_0x24bc59[0x0]['language']=='French')var _0x2dcea5=users[_0x236547(0x14c)];else{if(_0x24bc59[0x0][_0x236547(0x1e5)]==_0x236547(0x17c))var _0x2dcea5=users[_0x236547(0x136)];else{if(_0x24bc59[0x0]['language']==_0x236547(0x14b))var _0x2dcea5=users[_0x236547(0x14b)];else{if(_0x24bc59[0x0][_0x236547(0x1e5)]==_0x236547(0x1e6))var _0x2dcea5=users[_0x236547(0x157)];}}}}}}}_0x438071[_0x236547(0x12b)](_0x236547(0x1f7),{'success':_0x4124a2[_0x236547(0x1be)](_0x236547(0x143)),'errors':_0x4124a2['flash'](_0x236547(0x117)),'role':_0x29f109,'profile':_0x5ba487,'alldata':_0x384c1f,'master_shop':_0x24bc59,'language':_0x2dcea5});}catch(_0x2df1bd){console['log'](_0x2df1bd);}}),router[a0_0x440904(0xf8)](a0_0x440904(0x1e1),async(_0x11ca54,_0x53120e)=>{var _0x5dad6b=a0_0x440904;const {product_code:_0x205f4c,warehouse_name:_0xafbaae,rooms_data:_0x429b58,Roomslist:_0x306aaf}=_0x11ca54[_0x5dad6b(0x208)],_0x1d45bb=_0x306aaf[_0x5dad6b(0x1ec)](','),_0x11dc60=[];async function _0x589f3f(_0x15df1a){var _0x1dcc35=_0x5dad6b;const _0x3f3942=await warehouse['aggregate']([{'$match':{'name':_0xafbaae,'room':_0x15df1a}},{'$unwind':_0x1dcc35(0x1b9)},{'$match':{'product_details.primary_code':_0x205f4c}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1dcc35(0x1b6)},'product_stock':{'$first':_0x1dcc35(0x1d5)},'primary_code':{'$first':_0x1dcc35(0x10e)},'secondary_code':{'$first':_0x1dcc35(0x165)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1dcc35(0x16a)},'type':{'$first':_0x1dcc35(0x179)},'pallet':{'$first':_0x1dcc35(0x1f8)},'unit':{'$first':_0x1dcc35(0x16c)},'secondary_unit':{'$first':_0x1dcc35(0x1c0)},'storage':{'$first':_0x1dcc35(0x104)},'rack':{'$first':_0x1dcc35(0x19e)},'expiry_date':{'$first':_0x1dcc35(0x1ae)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x1dcc35(0xfd)},'batch_code':{'$first':_0x1dcc35(0x1b5)},'product_cat':{'$first':_0x1dcc35(0x1c2)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x1dcc35(0x1c7)},'invoice':{'$first':'$product_details.invoice'}}}]),_0x5e8f17=await warehouse[_0x1dcc35(0x16e)]([{'$match':{'name':_0xafbaae,'room':_0x15df1a}},{'$unwind':_0x1dcc35(0x1b9)},{'$match':{'product_details.secondary_code':_0x205f4c}},{'$group':{'_id':_0x1dcc35(0x1a1),'name':{'$first':_0x1dcc35(0x1b6)},'product_stock':{'$first':_0x1dcc35(0x1d5)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1dcc35(0x165)},'product_code':{'$first':_0x1dcc35(0x132)},'level':{'$first':_0x1dcc35(0x1ee)},'isle':{'$first':_0x1dcc35(0x16a)},'type':{'$first':_0x1dcc35(0x179)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x1dcc35(0x16c)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1dcc35(0x19e)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1dcc35(0x186)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':_0x1dcc35(0x1b5)},'product_cat':{'$first':_0x1dcc35(0x1c2)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x1dcc35(0x1c7)},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x3f3942[_0x1dcc35(0x1a2)]>0x0)_0x11dc60[_0x1dcc35(0x145)](_0x3f3942);else _0x5e8f17['length']>0x0&&_0x11dc60[_0x1dcc35(0x145)](_0x5e8f17);}const _0x5c0122=_0x1d45bb[_0x5dad6b(0xfb)](_0x363892=>_0x589f3f(_0x363892));await Promise[_0x5dad6b(0x108)](_0x5c0122),_0x53120e[_0x5dad6b(0x114)](_0x11dc60);}),module[a0_0x440904(0x18d)]=router;function a0_0x41a1(_0x1edc5e,_0x4c9a99){var _0x55ca7b=a0_0x55ca();return a0_0x41a1=function(_0x41a11a,_0x312b5e){_0x41a11a=_0x41a11a-0xed;var _0x3c9590=_0x55ca7b[_0x41a11a];return _0x3c9590;},a0_0x41a1(_0x1edc5e,_0x4c9a99);}function a0_0x55ca(){var _0x1a7182=['product_code','prod_cat','master','finalize','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','catch','maxperunit','all_sales_barcode','$product_details.floorlevel','10sNYTlA','Spanish','$_id','customers_docs','room_name','suppliers','for_categorize','</table>','stocks_QA','product_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Price\x20</th>','Sales\x20Add\x20successfully','return_qty_QA','Enabled','Sale','body','get','christian.villamer@jakagroup.com','<table\x20style=\x22width:\x20100%\x20!important;\x22>','forEach','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Total\x20</th>','final','warehouse','error','True','Sales\x20Update\x20successfully','return_sale','$invoice','production_date','</h5>','post','DRY\x20GOODS','batch_code','map','production_date_QA','$product_details.maxPerUnit','$sale_product.bay','log','1680245ftUgBY','toString','Must\x20not\x20be\x20greater\x20or\x20less\x20than\x20stock\x20Qty','<div>','$product_details.storage','host','sendMail','product_code_QA','all','product_list','createTransport','<!DOCTYPE\x20html>','return_data','customer','$product_details.primary_code','Hindi','English\x20(US)','Sale\x20Return','add_sales_finished','$product','json','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>','$return_data','errors','slice','English','1300eHiUEA','$product_details.maxProducts','floor','../models/all_models','\x20Order\x20Date\x20:\x20','An\x20error\x20occurred.','32RFFQRX','product_details','<html><head><title></title>','/view/:id','Sale\x20Return\x20Mail','$customers_docs','image','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','primary_code','</div>','/view/add_sales/:id','render','getFullYear','password','\x20==\x20','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','currency_placement','email','$product_details.product_code','logo','$sale_product.quantity','QA\x20Warehouse','Portuguese','expiry_date','max_per_unit','primary_code_QA','adjust_qty','German','$date','/view/add_sales','product_name','$customer','user','staff','</body></html>','success','port','push','stock','/view/return_sales/:id','<tbody\x20style=\x22text-align:\x20center;\x22>','barcode\x20Product\x20master','Return\x20Goods','Chinese','French','\x20</h2>','customers','product_date','OUTF-','abs','$warehouse_name','1098275YIsRQi','/all_sales_finished/view','\x20&&\x20','foreach\x20newproduct','Arabic','Email\x20sent\x20successfully','params','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','<span\x20style=\x22float:\x20right;\x22>','$note','invoice','customer_data','getDate','purchases_data','edit_sales_finished','maxPerUnit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','unit_QA','$product_details.secondary_code','/invoice/:id','nodemailer','/../public','Logo.png','$product_details.bin','prod_code','$product_details.unit','express','aggregate','</tbody>','carton','$product.product_name','Quality\x20Inspection','max','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','expiry_date_QA','Router','product_name_QA1','<hr\x20class=\x22my-3\x22>','$product_details.type','Finished\x20Goods','<h5>','Portuguese\x20(BR)','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','24sWORnU','concat','maxPerUnit_QA','unit','There\x27s\x20a\x20error\x20in\x20this\x20transaction','sale_product','_id','find','$product_details.production_date','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','stock_data','secondary_code','../middleware/auth','sales_quantity_QA','</span>','exports','return_qty','RoomAssigned','<h5\x20style=\x22text-align:\x20left;\x22>','product','room','received_amount','Add\x20Sales','/view/add_sale/product','</td>','status','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','save','sales\x20item\x20return\x20successfull','message','7866090kLlSCS','batch_code_QA','$product_details.rack','quantity','maxProducts','$product_details._id','length','role','$name','gmail','findById','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','return_sale_QA','3PVoeky','Error\x20Occurs','10290918lGnSGT','prod_invoice','name','$product_details.expiry_date','product_stock','random','site_title','$product_details.room_name','findOne','</thead>','$product_details.batch_code','$product_details.product_name','320064WROqKf','221lDtHOZ','$product_details','currency','primary_unit','due_amount','$sale_product','flash','/upload/','$product_details.secondary_unit','\x20<<<==>>>\x20','$product_details.product_cat','redirect','warehouse_name','<tr>','id_transaction_from','$room','$finalize','string','bay','note','<strong>\x20Regards\x20</strong>','getMonth','12286mavHeT','filter','back','\x20Order\x20Number\x20:\x20','maxProducts_QA','secondary_code_QA','Enclosed','$product_details.product_stock','Ambient','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','sales_invoice','\x20<>\x20','$sale_product.bin','secondary_unit_QA','then','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','$sale_product.floorlevel','level','5788268nsFWTn','/barcode_scanner','date','secondary_unit','/view','language','Arabic\x20(ae)','</tr>','/all_sales_finished/preview/','$sale_product.type','/preview/:id','/all_sales/view','split','sale_qty','$product_details.bay','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'];a0_0x55ca=function(){return _0x1a7182;};return a0_0x55ca();}