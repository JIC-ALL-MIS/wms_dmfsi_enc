var a0_0x5d6cfd=a0_0x383b;(function(_0x5a6386,_0x900e79){var _0x31e5e9=a0_0x383b,_0x36c240=_0x5a6386();while(!![]){try{var _0xea74cd=-parseInt(_0x31e5e9(0x1f2))/0x1+parseInt(_0x31e5e9(0x189))/0x2*(-parseInt(_0x31e5e9(0x209))/0x3)+parseInt(_0x31e5e9(0x179))/0x4*(-parseInt(_0x31e5e9(0x1e3))/0x5)+-parseInt(_0x31e5e9(0x21f))/0x6+-parseInt(_0x31e5e9(0x28a))/0x7+-parseInt(_0x31e5e9(0x25a))/0x8*(parseInt(_0x31e5e9(0x272))/0x9)+parseInt(_0x31e5e9(0x1a3))/0xa*(parseInt(_0x31e5e9(0x26b))/0xb);if(_0xea74cd===_0x900e79)break;else _0x36c240['push'](_0x36c240['shift']());}catch(_0x1423ca){_0x36c240['push'](_0x36c240['shift']());}}}(a0_0xea8a,0xe06ff));const express=require('express'),app=express(),router=express[a0_0x5d6cfd(0x27b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,c_payment_data,email_settings,sales_finished,sales_return_finished,supervisor_settings}=require(a0_0x5d6cfd(0x1e7)),auth=require(a0_0x5d6cfd(0x19b)),nodemailer=require(a0_0x5d6cfd(0x277)),users=require(a0_0x5d6cfd(0x19a));function a0_0x383b(_0x32f121,_0x2db00c){var _0xea8af=a0_0xea8a();return a0_0x383b=function(_0x383b8e,_0x4b0637){_0x383b8e=_0x383b8e-0x174;var _0x15cd35=_0xea8af[_0x383b8e];return _0x15cd35;},a0_0x383b(_0x32f121,_0x2db00c);}router[a0_0x5d6cfd(0x17b)](a0_0x5d6cfd(0x280),auth,async(_0x34cc55,_0x16a013)=>{var _0x5b697a=a0_0x5d6cfd;try{const {username:_0x5f0fd6,email:_0x589489,role:_0x55c787}=_0x34cc55[_0x5b697a(0x18a)],_0x4d6144=_0x34cc55[_0x5b697a(0x18a)],_0x76e8ef=await profile[_0x5b697a(0x206)]({'email':_0x4d6144[_0x5b697a(0x198)]}),_0x1085bf=await master_shop[_0x5b697a(0x264)]();let _0x4c3cb3;if(_0x4d6144[_0x5b697a(0x19c)]=='staff'){const _0x4b276e=await staff[_0x5b697a(0x206)]({'email':_0x4d6144[_0x5b697a(0x198)]});_0x4c3cb3=await sales_finished[_0x5b697a(0x1d8)]([{'$lookup':{'from':_0x5b697a(0x270),'localField':_0x5b697a(0x224),'foreignField':_0x5b697a(0x1af),'as':_0x5b697a(0x1cd)}},{'$unwind':_0x5b697a(0x233)},{'$unwind':'$sale_product'},{'$group':{'_id':_0x5b697a(0x1f9),'invoice':{'$first':_0x5b697a(0x22d)},'customers':{'$first':_0x5b697a(0x192)},'date':{'$first':_0x5b697a(0x1b7)},'warehouse_name':{'$first':_0x5b697a(0x19f)},'sale_product':{'$push':'$sale_product'},'note':{'$first':_0x5b697a(0x1a6)},'return_data':{'$first':'$return_data'},'customers_docs':{'$first':_0x5b697a(0x233)},'total_saleproduct_quantity':{'$sum':_0x5b697a(0x24b)},'level':{'$addToSet':_0x5b697a(0x181)},'isle':{'$addToSet':_0x5b697a(0x1a5)},'type':{'$addToSet':'$sale_product.type'},'pallet':{'$addToSet':_0x5b697a(0x191)},'finalize':{'$first':_0x5b697a(0x231)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);}else _0x4c3cb3=await sales_finished[_0x5b697a(0x1d8)]([{'$lookup':{'from':_0x5b697a(0x270),'localField':_0x5b697a(0x224),'foreignField':_0x5b697a(0x1af),'as':_0x5b697a(0x1cd)}},{'$unwind':'$customers_docs'},{'$unwind':'$sale_product'},{'$group':{'_id':_0x5b697a(0x1f9),'invoice':{'$first':_0x5b697a(0x22d)},'customers':{'$first':'$customer'},'date':{'$first':_0x5b697a(0x1b7)},'warehouse_name':{'$first':_0x5b697a(0x19f)},'sale_product':{'$push':_0x5b697a(0x1a2)},'note':{'$first':_0x5b697a(0x1a6)},'return_data':{'$first':_0x5b697a(0x276)},'customers_docs':{'$first':_0x5b697a(0x233)},'total_saleproduct_quantity':{'$sum':_0x5b697a(0x24b)},'level':{'$addToSet':'$sale_product.bay'},'isle':{'$addToSet':_0x5b697a(0x1a5)},'type':{'$addToSet':_0x5b697a(0x1b2)},'pallet':{'$addToSet':'$sale_product.floorlevel'},'finalize':{'$first':_0x5b697a(0x231)}}},{'$project':{'_id':0x1,'invoice':0x1,'customers':0x1,'date':0x1,'warehouse_name':0x1,'sale_product':0x1,'note':0x1,'return_data':0x1,'customers_docs':0x1,'total_saleproduct_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'pallet':0x1,'finalize':0x1}}]);if(_0x1085bf[0x0]['language']==_0x5b697a(0x1d0)){var _0x40d575=users[_0x5b697a(0x1b9)];console['log'](_0x40d575);}else{if(_0x1085bf[0x0]['language']==_0x5b697a(0x24d))var _0x40d575=users['Hindi'];else{if(_0x1085bf[0x0]['language']==_0x5b697a(0x26f))var _0x40d575=users[_0x5b697a(0x26f)];else{if(_0x1085bf[0x0]['language']==_0x5b697a(0x1fc))var _0x40d575=users[_0x5b697a(0x1fc)];else{if(_0x1085bf[0x0][_0x5b697a(0x186)]=='French')var _0x40d575=users['French'];else{if(_0x1085bf[0x0]['language']==_0x5b697a(0x25b))var _0x40d575=users['Portuguese'];else{if(_0x1085bf[0x0][_0x5b697a(0x186)]==_0x5b697a(0x288))var _0x40d575=users[_0x5b697a(0x288)];else{if(_0x1085bf[0x0][_0x5b697a(0x186)]==_0x5b697a(0x271))var _0x40d575=users['Arabic'];}}}}}}}_0x16a013['render'](_0x5b697a(0x25d),{'success':_0x34cc55[_0x5b697a(0x1de)](_0x5b697a(0x1d2)),'errors':_0x34cc55[_0x5b697a(0x1de)]('errors'),'sales':_0x4c3cb3,'profile':_0x76e8ef,'role':_0x4d6144,'master_shop':_0x1085bf,'language':_0x40d575});}catch(_0x4c1255){console[_0x5b697a(0x237)](_0x4c1255);}});async function getRandom8DigitNumber(){var _0x2fefed=a0_0x5d6cfd;const _0x1a598b=0x989680,_0x1dedab=0x5f5e0ff,_0x5b8e2d=Math[_0x2fefed(0x1d9)](Math[_0x2fefed(0x1bb)]()*(_0x1dedab-_0x1a598b+0x1))+_0x1a598b;var _0x3775b2;const _0x8fbe81=await sales_finished[_0x2fefed(0x206)]({'invoice':_0x2fefed(0x235)+_0x5b8e2d});return _0x8fbe81&&_0x8fbe81[_0x2fefed(0x1be)]>0x0?_0x3775b2=_0x2fefed(0x235)+_0x5b8e2d:_0x3775b2=_0x2fefed(0x235)+_0x5b8e2d,_0x3775b2;}router[a0_0x5d6cfd(0x17b)](a0_0x5d6cfd(0x196),auth,async(_0x199fcd,_0x46985d)=>{var _0x46e81a=a0_0x5d6cfd;try{const {username:_0x30083e,email:_0x4f7668,role:_0x47333c}=_0x199fcd[_0x46e81a(0x18a)],_0x3923b9=_0x199fcd[_0x46e81a(0x18a)],_0x1db21d=await profile[_0x46e81a(0x206)]({'email':_0x3923b9['email']}),_0x2edc29=await master_shop['find'](),_0x4f079d=await customer['find']({});let _0x3ba517;if(_0x3923b9[_0x46e81a(0x19c)]==_0x46e81a(0x285)){const _0x2934cf=await staff['findOne']({'email':_0x3923b9[_0x46e81a(0x198)]});_0x3ba517=await warehouse[_0x46e81a(0x1d8)]([{'$match':{'status':_0x46e81a(0x1b6),'name':_0x2934cf[_0x46e81a(0x210)],'warehouse_category':'Finished\x20Goods','name':{'$ne':'QA\x20Warehouse'}}},{'$group':{'_id':_0x46e81a(0x1ea),'name':{'$first':_0x46e81a(0x1ea)}}},{'$sort':{'name':0x1}}]);}else _0x3ba517=await warehouse[_0x46e81a(0x1d8)]([{'$match':{'status':_0x46e81a(0x1b6),'warehouse_category':_0x46e81a(0x193),'name':{'$ne':_0x46e81a(0x1ac)}}},{'$group':{'_id':_0x46e81a(0x1ea),'name':{'$first':_0x46e81a(0x1ea)}}},{'$sort':{'name':0x1}}]);const _0x85f12e=await product[_0x46e81a(0x264)]({});var _0x53edbf=[_0x46e81a(0x283),_0x46e81a(0x278)];const _0x5431ac=await sales_finished['find']({}),_0x4adbd6=_0x5431ac[_0x46e81a(0x1be)]+0x1,_0x405fe4=_0x46e81a(0x235)+_0x4adbd6[_0x46e81a(0x287)]()[_0x46e81a(0x18c)](0x5,'0');if(_0x2edc29[0x0][_0x46e81a(0x186)]=='English\x20(US)'){var _0x1bee11=users[_0x46e81a(0x1b9)];console[_0x46e81a(0x237)](_0x1bee11);}else{if(_0x2edc29[0x0][_0x46e81a(0x186)]=='Hindi')var _0x1bee11=users[_0x46e81a(0x24d)];else{if(_0x2edc29[0x0][_0x46e81a(0x186)]=='German')var _0x1bee11=users[_0x46e81a(0x26f)];else{if(_0x2edc29[0x0][_0x46e81a(0x186)]=='Spanish')var _0x1bee11=users[_0x46e81a(0x1fc)];else{if(_0x2edc29[0x0]['language']==_0x46e81a(0x232))var _0x1bee11=users[_0x46e81a(0x232)];else{if(_0x2edc29[0x0][_0x46e81a(0x186)]=='Portuguese\x20(BR)')var _0x1bee11=users[_0x46e81a(0x1e1)];else{if(_0x2edc29[0x0][_0x46e81a(0x186)]==_0x46e81a(0x288))var _0x1bee11=users[_0x46e81a(0x288)];else{if(_0x2edc29[0x0][_0x46e81a(0x186)]==_0x46e81a(0x271))var _0x1bee11=users[_0x46e81a(0x25c)];}}}}}}}const _0x9210d1=getRandom8DigitNumber();_0x9210d1[_0x46e81a(0x259)](_0x66c33a=>{var _0x5abff5=_0x46e81a;_0x46985d[_0x5abff5(0x239)](_0x5abff5(0x1f5),{'success':_0x199fcd[_0x5abff5(0x1de)](_0x5abff5(0x1d2)),'errors':_0x199fcd[_0x5abff5(0x1de)](_0x5abff5(0x19d)),'role':_0x3923b9,'profile':_0x1db21d,'customer':_0x4f079d,'warehouse':_0x3ba517,'product':_0x85f12e,'invoice':_0x66c33a,'master_shop':_0x2edc29,'language':_0x1bee11,'rooms_data':_0x53edbf});})[_0x46e81a(0x1ee)](_0x5a667d=>{var _0x4c2501=_0x46e81a;_0x199fcd[_0x4c2501(0x1de)](_0x4c2501(0x19d),_0x4c2501(0x1db)),_0x46985d[_0x4c2501(0x243)](_0x4c2501(0x1a9));});}catch(_0x2b241b){console['log'](_0x2b241b);}}),router['get'](a0_0x5d6cfd(0x275),auth,async(_0x1763a,_0x34cb99)=>{var _0x33ce0b=a0_0x5d6cfd;try{const _0x2c4f63=_0x1763a[_0x33ce0b(0x267)]['id'];console[_0x33ce0b(0x237)](_0x2c4f63);const _0x1d36e9=await product['find'](),_0x20ebd6=await purchases[_0x33ce0b(0x1d8)]([{'$match':{'warehouse_name':_0x2c4f63}},{'$unwind':'$product'},{'$group':{'_id':_0x33ce0b(0x1f4)}}]);console['log'](_0x33ce0b(0x253),_0x20ebd6),_0x34cb99[_0x33ce0b(0x1e0)](0xc8)['json']({'purchases_data':_0x20ebd6,'product_data':_0x1d36e9});}catch(_0x2bbfa8){console[_0x33ce0b(0x237)](_0x2bbfa8);}}),router[a0_0x5d6cfd(0x28b)]('/view/add_sale/product',auth,async(_0x7128fb,_0x5be71b)=>{var _0x35d824=a0_0x5d6cfd;try{const {warehouse_data:_0x2c6423,product_data:_0x5c3c06}=_0x7128fb['body'];console[_0x35d824(0x237)](_0x7128fb[_0x35d824(0x273)][_0x35d824(0x252)]);;const _0x3c583d=await master_shop[_0x35d824(0x264)]();console[_0x35d824(0x237)](_0x35d824(0x1a0),_0x3c583d);const _0x125327=await product[_0x35d824(0x206)]({'name':_0x5c3c06});console['log'](_0x35d824(0x204),_0x125327);const _0x1afc96=await warehouse[_0x35d824(0x1d8)]([{'$match':{'name':_0x2c6423}},{'$unwind':_0x35d824(0x234)},{'$match':{'product_details.product_name':_0x5c3c06}},{'$group':{'_id':'$product_details.product_name','product_stock':{'$first':_0x35d824(0x17d)}}}]);console[_0x35d824(0x237)]('stock_data',_0x1afc96),_0x5be71b['status'](0xc8)[_0x35d824(0x17e)]({'master':_0x3c583d,'new_product':_0x125327,'stock_data':_0x1afc96});}catch(_0x220773){console[_0x35d824(0x237)](_0x220773);}}),router[a0_0x5d6cfd(0x28b)](a0_0x5d6cfd(0x196),auth,async(_0x2a214a,_0x2464a6)=>{var _0x10c876=a0_0x5d6cfd;try{const {invoice:_0x111e76,date:_0x367152,warehouse_name:_0x44b3f3,product_name:_0x1825cf,stock:_0x1f34b6,quantity:_0x1a8d47,note:_0x44c77c,room:_0x78f670,primary_code:_0xb807a8,secondary_code:_0x1070d0,prod_code:_0x22e37d,level:_0x175da8,isle:_0x59c63f,pallet:_0x1eb284,batch_code:_0x401ddf,SCRN:_0x5b27bb,expiry_date:_0x5ae80c,mode_transpo:_0x52fc6f,name_driver:_0x589d6e}=_0x2a214a[_0x10c876(0x273)];if(typeof _0x1825cf=='string')var _0x1c5f15=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x18d)]],_0x38510c=[_0x2a214a['body']['stock']],_0x5037ff=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x27c)]],_0x168529=[_0x2a214a[_0x10c876(0x273)]['primary_code']],_0x508d72=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x180)]],_0x34a7fa=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x1cf)]],_0x1d0324=[_0x2a214a['body']['level']],_0x2a3d7e=[_0x2a214a['body'][_0x10c876(0x248)]],_0x1fd149=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x255)]],_0x21c373=[_0x2a214a[_0x10c876(0x273)]['batch_code']],_0x4bd03b=[_0x2a214a[_0x10c876(0x273)]['expiry_date']],_0x439814=[_0x2a214a[_0x10c876(0x273)]['product_date']],_0x1f6519=[_0x2a214a['body'][_0x10c876(0x1ba)]],_0x3d9f9a=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x24f)]],_0x522ee8=[_0x2a214a['body']['RoomAssigned']],_0x128bf5=[_0x2a214a[_0x10c876(0x273)][_0x10c876(0x240)]];else var _0x1c5f15=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x18d)]],_0x38510c=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x20c)]],_0x5037ff=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x27c)]],_0x168529=[..._0x2a214a['body'][_0x10c876(0x25f)]],_0x508d72=[..._0x2a214a[_0x10c876(0x273)]['secondary_code']],_0x34a7fa=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x1cf)]],_0x1d0324=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x245)]],_0x2a3d7e=[..._0x2a214a['body'][_0x10c876(0x248)]],_0x1fd149=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x255)]],_0x21c373=[..._0x2a214a['body']['batch_code']],_0x4bd03b=[..._0x2a214a[_0x10c876(0x273)]['expiry_date']],_0x439814=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x1d4)]],_0x1f6519=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x1ba)]],_0x3d9f9a=[..._0x2a214a[_0x10c876(0x273)][_0x10c876(0x24f)]],_0x522ee8=[..._0x2a214a[_0x10c876(0x273)]['RoomAssigned']],_0x128bf5=[..._0x2a214a['body'][_0x10c876(0x240)]];const _0xcb3a6d=_0x1c5f15[_0x10c876(0x256)](_0x22b0e6=>{return _0x22b0e6={'product_name':_0x22b0e6};});_0x38510c[_0x10c876(0x1c8)]((_0x3c6683,_0x54e599)=>{var _0x3db54b=_0x10c876;_0xcb3a6d[_0x54e599][_0x3db54b(0x20c)]=_0x3c6683;}),_0x5037ff[_0x10c876(0x1c8)]((_0x1cae3f,_0x5bd63e)=>{var _0x5b815e=_0x10c876;_0xcb3a6d[_0x5bd63e][_0x5b815e(0x21a)]=Math[_0x5b815e(0x208)](_0x1cae3f);}),_0x168529['forEach']((_0x5b984c,_0x12143c)=>{_0xcb3a6d[_0x12143c]['primary_code']=_0x5b984c;}),_0x508d72[_0x10c876(0x1c8)]((_0x2dff7b,_0x5db616)=>{_0xcb3a6d[_0x5db616]['secondary_code']=_0x2dff7b;}),_0x34a7fa[_0x10c876(0x1c8)]((_0x2404b6,_0x1b6e4c)=>{var _0x409f16=_0x10c876;_0xcb3a6d[_0x1b6e4c][_0x409f16(0x1c9)]=_0x2404b6;}),_0x1d0324[_0x10c876(0x1c8)]((_0x1d3a68,_0x50a364)=>{var _0x29e7ee=_0x10c876;_0xcb3a6d[_0x50a364][_0x29e7ee(0x1c4)]=_0x1d3a68;}),_0x2a3d7e['forEach']((_0x1a6380,_0x59d395)=>{var _0x14b088=_0x10c876;_0xcb3a6d[_0x59d395][_0x14b088(0x242)]=_0x1a6380;}),_0x1fd149[_0x10c876(0x1c8)]((_0x8926fa,_0xdf609d)=>{_0xcb3a6d[_0xdf609d]['secondary_unit']=_0x8926fa;}),_0x21c373[_0x10c876(0x1c8)]((_0x56971e,_0x4652f6)=>{var _0x112929=_0x10c876;_0xcb3a6d[_0x4652f6][_0x112929(0x286)]=_0x56971e;}),_0x4bd03b['forEach']((_0x4fd93c,_0x448fb2)=>{var _0xab9736=_0x10c876;_0xcb3a6d[_0x448fb2][_0xab9736(0x218)]=_0x4fd93c;}),_0x439814['forEach']((_0x434c92,_0x1283dd)=>{var _0x1ed501=_0x10c876;_0xcb3a6d[_0x1283dd][_0x1ed501(0x203)]=_0x434c92;}),_0x1f6519[_0x10c876(0x1c8)]((_0x556a57,_0x32117d)=>{var _0xa475e2=_0x10c876;_0xcb3a6d[_0x32117d][_0xa475e2(0x219)]=_0x556a57;}),_0x3d9f9a[_0x10c876(0x1c8)]((_0x129bba,_0xbfffd8)=>{var _0x10169f=_0x10c876;_0xcb3a6d[_0xbfffd8][_0x10169f(0x24f)]=_0x129bba;}),_0x522ee8[_0x10c876(0x1c8)]((_0x158f2a,_0xfac835)=>{var _0x618e03=_0x10c876;_0xcb3a6d[_0xfac835][_0x618e03(0x1df)]=_0x158f2a;}),_0x128bf5[_0x10c876(0x1c8)]((_0x52bad9,_0x44d936)=>{_0xcb3a6d[_0x44d936]['invoice']=_0x52bad9;});var _0x58b9e1=0x0;_0xcb3a6d[_0x10c876(0x1c8)](_0x360d65=>{var _0x21675f=_0x10c876;parseFloat(_0x360d65[_0x21675f(0x20c)])<parseFloat(_0x360d65['quantity'])&&parseFloat(_0x360d65[_0x21675f(0x21a)])>parseFloat(_0x360d65['stock'])&&(console['log'](_0x360d65[_0x21675f(0x20c)]+_0x21675f(0x1da)+_0x360d65['quantity']),_0x58b9e1++);});if(_0x58b9e1!=0x0)return _0x2a214a[_0x10c876(0x1de)](_0x10c876(0x19d),_0x10c876(0x1b0)),_0x2464a6[_0x10c876(0x243)](_0x10c876(0x282));const _0x1b359b=_0xcb3a6d['filter'](_0x56059c=>_0x56059c['quantity']!=='0'&&_0x56059c[_0x10c876(0x21a)]!==''),_0x470975=new sales_finished({'invoice':_0x111e76,'customer':_0x2a214a[_0x10c876(0x273)][_0x10c876(0x224)],'date':_0x367152,'warehouse_name':_0x44b3f3,'sale_product':_0x1b359b,'note':_0x44c77c,'room':_0x78f670,'primary_code':_0xb807a8,'secondary_code':_0x1070d0,'prod_code':_0x22e37d,'SCRN':_0x5b27bb,'finalize':_0x10c876(0x213),'mode_transpo':_0x52fc6f,'name_driver':_0x589d6e}),_0x1d3482=await _0x470975[_0x10c876(0x1eb)](),_0x3c3da9=await sales_finished['findOne']({'invoice':_0x111e76}),_0x2312d8=new c_payment_data({'invoice':_0x111e76,'customer':_0x2a214a[_0x10c876(0x273)]['customer'],'reason':'Sale'});await _0x2312d8[_0x10c876(0x1eb)]();const _0x3f938e=await master_shop[_0x10c876(0x264)](),_0x3d70bc=await email_settings[_0x10c876(0x206)](),_0x54f140=await customer[_0x10c876(0x206)]({'name':_0x2a214a[_0x10c876(0x273)][_0x10c876(0x224)]});_0x3f938e[0x0][_0x10c876(0x201)]==0x1?(right_currency=_0x3f938e[0x0]['currency'],left_currency=''):(right_currency='',left_currency=_0x3f938e[0x0][_0x10c876(0x1ff)]);var _0x352b12=_0x1c5f15,_0x31e3eb=_0x5037ff,_0xad922d='',_0x8206f;for(_0x8206f in _0x352b12){_0xad922d+=_0x10c876(0x26d)+_0x10c876(0x22c)+_0x352b12[_0x8206f]+_0x10c876(0x21c)+_0x10c876(0x22c)+_0x31e3eb[_0x8206f]+_0x10c876(0x21c)+_0x10c876(0x177);}console['log'](_0x10c876(0x215),_0xad922d);let _0x236628=nodemailer[_0x10c876(0x1f3)]({'service':'gmail','auth':{'user':_0x3d70bc[_0x10c876(0x198)],'pass':_0x3d70bc['password']}}),_0xba8ba4={'from':_0x3d70bc[_0x10c876(0x198)],'to':_0x54f140[_0x10c876(0x198)],'subject':_0x10c876(0x265),'attachments':[{'filename':_0x10c876(0x1c6),'path':__dirname+_0x10c876(0x1e9)+'/upload/'+_0x3f938e[0x0][_0x10c876(0x21b)],'cid':_0x10c876(0x22f)}],'html':_0x10c876(0x25e)+_0x10c876(0x1bd)+_0x10c876(0x1a1)+_0x10c876(0x289)+_0x10c876(0x1dc)+'<div>'+_0x10c876(0x227)+_0x10c876(0x183)+_0x10c876(0x289)+_0x10c876(0x1ab)+_0x3f938e[0x0][_0x10c876(0x1dd)]+_0x10c876(0x281)+_0x10c876(0x183)+_0x10c876(0x183)+_0x10c876(0x21e)+_0x10c876(0x289)+_0x10c876(0x27f)+_0x10c876(0x1b1)+_0x111e76+'\x20'+_0x10c876(0x176)+_0x10c876(0x250)+_0x367152+'\x20'+_0x10c876(0x220)+_0x10c876(0x1cb)+'</div>'+_0x10c876(0x207)+_0x10c876(0x17c)+_0x10c876(0x26d)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Quantity\x20</th>'+_0x10c876(0x177)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0xad922d+'\x20'+'</tbody>'+_0x10c876(0x1ad)+_0x10c876(0x289)+_0x10c876(0x1bf)+_0x10c876(0x20a)+_0x3f938e[0x0][_0x10c876(0x1dd)]+_0x10c876(0x1cb)+_0x10c876(0x183)+_0x10c876(0x183)+_0x10c876(0x246)};_0x236628[_0x10c876(0x22b)](_0xba8ba4,function(_0x4e2f27,_0xab7fe9){var _0x3c6a13=_0x10c876;_0x4e2f27?(console['log'](_0x4e2f27),console[_0x3c6a13(0x237)](_0x3c6a13(0x1fd))):console[_0x3c6a13(0x237)]('Email\x20sent\x20successfully');}),_0x2a214a['flash'](_0x10c876(0x1d2),_0x10c876(0x20e)),_0x2464a6[_0x10c876(0x243)](_0x10c876(0x1e6)+_0x1d3482[_0x10c876(0x199)]);}catch(_0x3ba132){console[_0x10c876(0x237)](_0x3ba132);}}),router[a0_0x5d6cfd(0x17b)](a0_0x5d6cfd(0x263),auth,async(_0x5e8574,_0x30c2a3)=>{var _0x31cef8=a0_0x5d6cfd;try{const {username:_0x5ab0e3,email:_0x327948,role:_0x3aa2d5}=_0x5e8574[_0x31cef8(0x18a)],_0x23f4b9=_0x5e8574['user'],_0x334e2=await profile[_0x31cef8(0x206)]({'email':_0x23f4b9[_0x31cef8(0x198)]}),_0x483f09=await master_shop['find'](),_0x3e67a7=_0x5e8574['params']['id'],_0xfa9d88=await sales_finished[_0x31cef8(0x258)](_0x3e67a7),_0xb47fc9=await warehouse[_0x31cef8(0x1d8)]([{'$match':{'name':_0xfa9d88[_0x31cef8(0x200)]}},{'$unwind':_0x31cef8(0x234)},{'$group':{'_id':_0x31cef8(0x185),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x31cef8(0x1c5)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x31cef8(0x262)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x31cef8(0x24c)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x31cef8(0x238)},'storage':{'$first':_0x31cef8(0x279)},'rack':{'$first':_0x31cef8(0x18b)},'expiry_date':{'$first':_0x31cef8(0x244)},'production_date':{'$first':_0x31cef8(0x1fb)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':'$room'}}}]),_0x12c963=await customer[_0x31cef8(0x264)]({});let _0x33f545;if(_0x23f4b9[_0x31cef8(0x19c)]==_0x31cef8(0x285)){const _0x3bd04a=await staff[_0x31cef8(0x206)]({'email':_0x23f4b9[_0x31cef8(0x198)]});_0x33f545=await warehouse[_0x31cef8(0x1d8)]([{'$match':{'status':_0x31cef8(0x1b6),'name':_0x3bd04a[_0x31cef8(0x210)]}},{'$group':{'_id':'$name','name':{'$first':_0x31cef8(0x1ea)}}}]);}else _0x33f545=await warehouse[_0x31cef8(0x1d8)]([{'$match':{'status':_0x31cef8(0x1b6)}},{'$group':{'_id':_0x31cef8(0x1ea),'name':{'$first':_0x31cef8(0x1ea)}}}]);const _0x474c54=await product[_0x31cef8(0x264)]({});if(_0x483f09[0x0][_0x31cef8(0x186)]=='English\x20(US)'){var _0x2252e9=users[_0x31cef8(0x1b9)];console[_0x31cef8(0x237)](_0x2252e9);}else{if(_0x483f09[0x0]['language']==_0x31cef8(0x24d))var _0x2252e9=users[_0x31cef8(0x24d)];else{if(_0x483f09[0x0][_0x31cef8(0x186)]==_0x31cef8(0x26f))var _0x2252e9=users['German'];else{if(_0x483f09[0x0][_0x31cef8(0x186)]=='Spanish')var _0x2252e9=users[_0x31cef8(0x1fc)];else{if(_0x483f09[0x0][_0x31cef8(0x186)]==_0x31cef8(0x232))var _0x2252e9=users['French'];else{if(_0x483f09[0x0][_0x31cef8(0x186)]=='Portuguese\x20(BR)')var _0x2252e9=users[_0x31cef8(0x1e1)];else{if(_0x483f09[0x0]['language']==_0x31cef8(0x288))var _0x2252e9=users[_0x31cef8(0x288)];else{if(_0x483f09[0x0][_0x31cef8(0x186)]==_0x31cef8(0x271))var _0x2252e9=users[_0x31cef8(0x25c)];}}}}}}}_0x30c2a3[_0x31cef8(0x239)](_0x31cef8(0x27e),{'success':_0x5e8574[_0x31cef8(0x1de)](_0x31cef8(0x1d2)),'errors':_0x5e8574[_0x31cef8(0x1de)](_0x31cef8(0x19d)),'role':_0x23f4b9,'profile':_0x334e2,'customer':_0x12c963,'warehouse':_0x33f545,'product':_0xb47fc9,'user':_0xfa9d88,'master_shop':_0x483f09,'unit':_0x474c54,'language':_0x2252e9});}catch(_0x505468){console[_0x31cef8(0x237)](_0x505468);}}),router['post']('/preview/:id',auth,async(_0x44520d,_0x47ea71)=>{var _0x5a2daf=a0_0x5d6cfd;try{const _0x2dfa08=_0x44520d['params']['id'],{invoice:_0x52d685,warehouse_name:_0x4ddde7,room:_0x58776e}=_0x44520d[_0x5a2daf(0x273)],_0x552c69=await sales_finished[_0x5a2daf(0x206)]({'invoice':_0x52d685}),_0x32d957=_0x552c69[_0x5a2daf(0x1e8)][_0x5a2daf(0x256)](async _0x5b0658=>{var _0x10f206=_0x5a2daf,_0x4a0101=await warehouse[_0x10f206(0x206)]({'name':_0x4ddde7,'room':_0x5b0658[_0x10f206(0x1df)],'warehouse_category':_0x10f206(0x193)});const _0x4f7cae=_0x4a0101[_0x10f206(0x20f)]['map'](_0x579472=>{var _0x920789=_0x10f206;_0x579472[_0x920789(0x18d)]==_0x5b0658[_0x920789(0x18d)]&&_0x579472[_0x920789(0x1c4)]==_0x5b0658[_0x920789(0x1c4)]&&_0x579472[_0x920789(0x218)]==_0x5b0658['expiry_date']&&_0x579472[_0x920789(0x203)]==_0x5b0658[_0x920789(0x203)]&&_0x579472[_0x920789(0x286)]==_0x5b0658[_0x920789(0x286)]&&_0x579472['invoice']==_0x5b0658[_0x920789(0x1c1)]&&(_0x579472[_0x920789(0x225)]=Math[_0x920789(0x208)](_0x579472[_0x920789(0x225)])-Math['abs'](_0x5b0658[_0x920789(0x21a)]));});return _0x4a0101;});Promise[_0x5a2daf(0x261)](_0x32d957)[_0x5a2daf(0x259)](async _0x23dff3=>{var _0x4dfe84=_0x5a2daf;try{for(const _0x450f35 of _0x23dff3){await _0x450f35['save']();}_0x552c69[_0x4dfe84(0x178)]=_0x4dfe84(0x22a);const _0x113be3=await _0x552c69['save'](),_0x476fe5=await master_shop['find'](),_0x1d7f7b=await email_settings['findOne'](),_0x15b204=await supervisor_settings[_0x4dfe84(0x264)]();var _0x16a7f0=_0x552c69[_0x4dfe84(0x1e8)],_0x137a24='',_0x23fd53;for(_0x23fd53 in _0x16a7f0){var _0x5e078f='FG';_0x552c69[_0x4dfe84(0x200)]=='DRY\x20GOODS'&&(_0x5e078f='DG'),_0x137a24+='<tr>'+_0x4dfe84(0x22c)+_0x16a7f0[_0x23fd53][_0x4dfe84(0x18d)]+_0x4dfe84(0x21c)+_0x4dfe84(0x22c)+_0x16a7f0[_0x23fd53]['product_code']+'</td>'+_0x4dfe84(0x22c)+_0x16a7f0[_0x23fd53]['quantity']+_0x4dfe84(0x21c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x16a7f0[_0x23fd53][_0x4dfe84(0x242)]+'</td>'+_0x4dfe84(0x22c)+_0x16a7f0[_0x23fd53][_0x4dfe84(0x255)]+_0x4dfe84(0x21c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x552c69['warehouse_name']+'</td>'+_0x4dfe84(0x22c)+_0x16a7f0[_0x23fd53][_0x4dfe84(0x1df)]+_0x4dfe84(0x21c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5e078f+_0x16a7f0[_0x23fd53]['bay']+'</td>';}let _0x44e42d=nodemailer['createTransport']({'host':_0x1d7f7b[_0x4dfe84(0x1a4)],'port':Number(_0x1d7f7b[_0x4dfe84(0x241)]),'secure':![],'auth':{'user':_0x1d7f7b[_0x4dfe84(0x198)],'pass':_0x1d7f7b['password']}}),_0xce98eb={'from':_0x1d7f7b[_0x4dfe84(0x198)],'to':_0x15b204[0x0][_0x4dfe84(0x1bc)],'subject':'Sales\x20Mail','attachments':[{'filename':'Logo.png','path':__dirname+_0x4dfe84(0x1e9)+_0x4dfe84(0x1fe)+_0x476fe5[0x0][_0x4dfe84(0x21b)],'cid':_0x4dfe84(0x22f)}],'html':_0x4dfe84(0x25e)+_0x4dfe84(0x1bd)+_0x4dfe84(0x1a1)+_0x4dfe84(0x289)+_0x4dfe84(0x1dc)+'<div>'+_0x4dfe84(0x227)+_0x4dfe84(0x183)+_0x4dfe84(0x289)+_0x4dfe84(0x1ab)+_0x476fe5[0x0][_0x4dfe84(0x1dd)]+'\x20</h2>'+_0x4dfe84(0x183)+_0x4dfe84(0x183)+'<hr\x20class=\x22my-3\x22>'+_0x4dfe84(0x289)+_0x4dfe84(0x27f)+_0x4dfe84(0x1b1)+_0x552c69[_0x4dfe84(0x1c1)]+'\x20'+_0x4dfe84(0x176)+_0x4dfe84(0x250)+_0x552c69[_0x4dfe84(0x221)]+'\x20'+_0x4dfe84(0x220)+'</h5>'+_0x4dfe84(0x183)+_0x4dfe84(0x207)+_0x4dfe84(0x17c)+_0x4dfe84(0x26d)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x4dfe84(0x254)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x4dfe84(0x21d)+_0x4dfe84(0x1a8)+_0x4dfe84(0x1f6)+_0x4dfe84(0x1d7)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+'</tr>'+_0x4dfe84(0x187)+_0x4dfe84(0x1d5)+'\x20'+_0x137a24+'\x20'+_0x4dfe84(0x1e4)+_0x4dfe84(0x1ad)+_0x4dfe84(0x289)+'<strong>\x20Regards\x20</strong>'+_0x4dfe84(0x20a)+_0x476fe5[0x0]['site_title']+_0x4dfe84(0x1cb)+_0x4dfe84(0x183)+_0x4dfe84(0x183)+_0x4dfe84(0x246)};_0x44e42d[_0x4dfe84(0x22b)](_0xce98eb,function(_0x2234d4,_0x3e7bff){var _0x5e3863=_0x4dfe84;_0x2234d4?(console['log'](_0x2234d4),console[_0x5e3863(0x237)]('Error\x20Occurs')):console[_0x5e3863(0x237)](_0x5e3863(0x1d6));}),_0x44520d[_0x4dfe84(0x1de)](_0x4dfe84(0x1d2),_0x4dfe84(0x257)),_0x47ea71[_0x4dfe84(0x243)](_0x4dfe84(0x1b5)+_0x2dfa08);}catch(_0x4a4d79){console[_0x4dfe84(0x268)](_0x4a4d79),_0x47ea71[_0x4dfe84(0x1e0)](0x1f4)[_0x4dfe84(0x17e)]({'error':_0x4dfe84(0x24e)});}})[_0x5a2daf(0x1ee)](_0x41cee0=>{var _0x2888f1=_0x5a2daf;console[_0x2888f1(0x268)](_0x41cee0),_0x47ea71[_0x2888f1(0x1e0)](0x1f4)[_0x2888f1(0x17e)]({'error':_0x2888f1(0x184)});});}catch(_0x949820){console[_0x5a2daf(0x237)](_0x949820);}}),router['get'](a0_0x5d6cfd(0x269),auth,async(_0x2d8276,_0x226500)=>{var _0x10df5b=a0_0x5d6cfd;try{const {username:_0x7b6c23,email:_0x49c12e,role:_0x21a998}=_0x2d8276[_0x10df5b(0x18a)],_0x4735a9=_0x2d8276[_0x10df5b(0x18a)],_0x826c8e=await profile[_0x10df5b(0x206)]({'email':_0x4735a9[_0x10df5b(0x198)]}),_0x4302eb=await master_shop[_0x10df5b(0x264)](),_0x356676=_0x2d8276[_0x10df5b(0x267)]['id'],_0x4a2c4a=await sales_finished['findById'](_0x356676);let _0x5c9509=new Date(_0x4a2c4a[_0x10df5b(0x218)]),_0x3695ac=('0'+_0x5c9509[_0x10df5b(0x18f)]())[_0x10df5b(0x20d)](-0x2),_0x3eb997=('0'+(_0x5c9509[_0x10df5b(0x249)]()+0x1))[_0x10df5b(0x20d)](-0x2),_0x7a2046=_0x5c9509[_0x10df5b(0x1aa)](),_0xa679c0=_0x7a2046+'-'+_0x3eb997+'-'+_0x3695ac;var _0x2aa9be=[_0x10df5b(0x283),_0x10df5b(0x278)];const _0x3873ae=await warehouse['aggregate']([{'$match':{'name':_0x4a2c4a['warehouse_name'],'room':_0x4a2c4a[_0x10df5b(0x1ed)]}},{'$unwind':_0x10df5b(0x234)},{'$group':{'_id':_0x10df5b(0x185),'name':{'$first':_0x10df5b(0x23c)},'product_stock':{'$first':_0x10df5b(0x17d)},'bay':{'$first':_0x10df5b(0x1c5)},'bin':{'$first':_0x10df5b(0x17f)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x10df5b(0x24c)},'secondary_code':{'$first':_0x10df5b(0x195)},'product_code':{'$first':_0x10df5b(0x238)},'storage':{'$first':_0x10df5b(0x279)},'rack':{'$first':_0x10df5b(0x18b)}}}]),_0x4b2962=await customer[_0x10df5b(0x264)]({});let _0x19244e;if(_0x4735a9['role']=='staff'){const _0x1fe63a=await staff['findOne']({'email':_0x4735a9[_0x10df5b(0x198)]});_0x19244e=await warehouse[_0x10df5b(0x1d8)]([{'$match':{'status':_0x10df5b(0x1b6),'name':_0x1fe63a[_0x10df5b(0x210)]}},{'$group':{'_id':_0x10df5b(0x1ea),'name':{'$first':_0x10df5b(0x1ea)}}}]);}else _0x19244e=await warehouse[_0x10df5b(0x1d8)]([{'$match':{'status':_0x10df5b(0x1b6)}},{'$group':{'_id':'$name','name':{'$first':_0x10df5b(0x1ea)}}}]);const _0x2e4b5b=await product[_0x10df5b(0x264)]({});if(_0x4302eb[0x0][_0x10df5b(0x186)]==_0x10df5b(0x1d0)){var _0x4457f7=users[_0x10df5b(0x1b9)];console[_0x10df5b(0x237)](_0x4457f7);}else{if(_0x4302eb[0x0]['language']==_0x10df5b(0x24d))var _0x4457f7=users['Hindi'];else{if(_0x4302eb[0x0][_0x10df5b(0x186)]=='German')var _0x4457f7=users['German'];else{if(_0x4302eb[0x0]['language']=='Spanish')var _0x4457f7=users[_0x10df5b(0x1fc)];else{if(_0x4302eb[0x0][_0x10df5b(0x186)]==_0x10df5b(0x232))var _0x4457f7=users[_0x10df5b(0x232)];else{if(_0x4302eb[0x0][_0x10df5b(0x186)]==_0x10df5b(0x25b))var _0x4457f7=users[_0x10df5b(0x1e1)];else{if(_0x4302eb[0x0][_0x10df5b(0x186)]==_0x10df5b(0x288))var _0x4457f7=users[_0x10df5b(0x288)];else{if(_0x4302eb[0x0][_0x10df5b(0x186)]==_0x10df5b(0x271))var _0x4457f7=users[_0x10df5b(0x25c)];}}}}}}}_0x226500['render'](_0x10df5b(0x222),{'success':_0x2d8276['flash'](_0x10df5b(0x1d2)),'errors':_0x2d8276[_0x10df5b(0x1de)](_0x10df5b(0x19d)),'role':_0x4735a9,'profile':_0x826c8e,'customer':_0x4b2962,'warehouse':_0x19244e,'product':_0x3873ae,'user':_0x4a2c4a,'master_shop':_0x4302eb,'unit':_0x2e4b5b,'language':_0x4457f7,'rooms_data':_0x2aa9be,'ed_fullDate':_0xa679c0});}catch(_0x5e081a){console[_0x10df5b(0x237)](_0x5e081a);}}),router['post'](a0_0x5d6cfd(0x269),auth,async(_0x5e89fb,_0x2c9ffc)=>{var _0x38f244=a0_0x5d6cfd;try{const _0x279c4e=_0x5e89fb[_0x38f244(0x267)]['id'],_0x2201bb=await sales_finished['findOne']({'_id':_0x5e89fb[_0x38f244(0x267)]['id']}),_0x9e3dd9=await warehouse['findOne']({'name':_0x2201bb[_0x38f244(0x200)],'room':_0x5e89fb[_0x38f244(0x273)]['room'],'warehouse_category':'Finished\x20Goods'}),{invoice:_0x12c19a,customer:_0x1fef39,date:_0x41eea2,warehouse_name:_0x113196,product_name:_0x1560bd,stock:_0x82b920,adjust_qty:_0x4499f6,note:_0x537285,room:_0x526352,primary_code:_0x2149a5,secondary_code:_0x5d2a5c,prod_code:_0x539d5b,level:_0x259364,isle:_0x5579e2,pallet:_0x728711,expiry_date:_0x59a97f}=_0x5e89fb[_0x38f244(0x273)];if(typeof _0x1560bd==_0x38f244(0x23a))var _0x49ba94=[_0x5e89fb['body'][_0x38f244(0x18d)]],_0x42ee95=[_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x20c)]],_0x21cc3e=[_0x5e89fb[_0x38f244(0x273)]['adjust_qty']],_0x5b70a2=[_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x25f)]],_0x232a3c=[_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x180)]],_0x5c59c1=[_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x1cf)]],_0x748cf2=[_0x5e89fb[_0x38f244(0x273)]['level']],_0x225b30=[_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x218)]];else var _0x49ba94=[..._0x5e89fb['body'][_0x38f244(0x18d)]],_0x42ee95=[..._0x5e89fb[_0x38f244(0x273)][_0x38f244(0x20c)]],_0x21cc3e=[..._0x5e89fb[_0x38f244(0x273)][_0x38f244(0x226)]],_0x5b70a2=[..._0x5e89fb[_0x38f244(0x273)][_0x38f244(0x25f)]],_0x232a3c=[..._0x5e89fb[_0x38f244(0x273)][_0x38f244(0x180)]],_0x5c59c1=[..._0x5e89fb[_0x38f244(0x273)][_0x38f244(0x1cf)]],_0x748cf2=[..._0x5e89fb['body'][_0x38f244(0x245)]],_0x225b30=[..._0x5e89fb[_0x38f244(0x273)]['expiry_date']];const _0x3b3501=_0x49ba94['map'](_0x17b42c=>{return _0x17b42c={'product_name':_0x17b42c};});_0x42ee95['forEach']((_0x3917e1,_0x394d8e)=>{var _0x197021=_0x38f244;_0x3b3501[_0x394d8e][_0x197021(0x20c)]=_0x3917e1;}),_0x21cc3e[_0x38f244(0x1c8)]((_0x3cd767,_0x52408d)=>{var _0x1a0ab9=_0x38f244;_0x3b3501[_0x52408d][_0x1a0ab9(0x21a)]=_0x3cd767;}),_0x5b70a2[_0x38f244(0x1c8)]((_0x158f89,_0x258289)=>{var _0x1d3126=_0x38f244;_0x3b3501[_0x258289][_0x1d3126(0x25f)]=_0x158f89;}),_0x232a3c[_0x38f244(0x1c8)]((_0x5b054c,_0x102290)=>{var _0x27f8c2=_0x38f244;_0x3b3501[_0x102290][_0x27f8c2(0x180)]=_0x5b054c;}),_0x5c59c1[_0x38f244(0x1c8)]((_0x45919c,_0x71bb54)=>{_0x3b3501[_0x71bb54]['product_code']=_0x45919c;}),_0x748cf2[_0x38f244(0x1c8)]((_0x207280,_0x304f17)=>{var _0x5dab10=_0x38f244;_0x3b3501[_0x304f17][_0x5dab10(0x245)]=_0x207280;}),_0x225b30[_0x38f244(0x1c8)]((_0x1d0097,_0x38c935)=>{_0x3b3501[_0x38c935]['expiry_date']=_0x1d0097;});var _0x52d706=0x0;_0x3b3501[_0x38f244(0x1c8)](_0x50953a=>{var _0x43556d=_0x38f244;console['log'](_0x43556d(0x214),_0x50953a),(parseInt(_0x50953a[_0x43556d(0x20c)])<parseInt(_0x50953a[_0x43556d(0x21a)])||parseInt(_0x50953a['quantity'])==0x0)&&_0x52d706++;});if(_0x52d706!=0x0)return _0x5e89fb['flash']('errors',_0x38f244(0x236)),_0x2c9ffc[_0x38f244(0x243)](_0x38f244(0x282));_0x2201bb['sale_product']['forEach'](_0x478186=>{var _0x1e91d2=_0x38f244;const _0x4bbd8c=_0x9e3dd9[_0x1e91d2(0x20f)]['map'](_0x35279d=>{var _0x1d7842=_0x1e91d2;_0x35279d['product_name']==_0x478186[_0x1d7842(0x18d)]&&_0x35279d[_0x1d7842(0x1c4)]==_0x478186['bay']&&(_0x35279d[_0x1d7842(0x225)]=parseInt(_0x35279d[_0x1d7842(0x225)])+parseInt(_0x478186[_0x1d7842(0x21a)]));});}),await _0x9e3dd9[_0x38f244(0x1eb)]();const _0x5adc3b=_0x3b3501[_0x38f244(0x23d)](_0x2ecc4c=>_0x2ecc4c[_0x38f244(0x21a)]!=='0'&&_0x2ecc4c[_0x38f244(0x21a)]!=='');_0x2201bb[_0x38f244(0x1c1)]=_0x12c19a,_0x2201bb[_0x38f244(0x224)]=_0x1fef39,_0x2201bb[_0x38f244(0x221)]=_0x41eea2,_0x2201bb[_0x38f244(0x200)]=_0x113196,_0x2201bb[_0x38f244(0x1e8)]=_0x5adc3b,_0x2201bb['note']=_0x537285,_0x2201bb[_0x38f244(0x1ed)]=_0x526352;const _0x200d7f=await _0x2201bb[_0x38f244(0x1eb)](),_0x421c51=await sales_finished['findOne']({'_id':_0x5e89fb[_0x38f244(0x267)]['id']}),_0x5d4b7d=await warehouse[_0x38f244(0x206)]({'name':_0x113196,'room':_0x526352,'warehouse_category':_0x38f244(0x193)});_0x421c51['sale_product']['forEach'](_0x339f2f=>{var _0xfeb48e=_0x38f244;const _0x2721e8=_0x5d4b7d[_0xfeb48e(0x20f)]['map'](_0x3c9a56=>{var _0x20bf69=_0xfeb48e;_0x3c9a56[_0x20bf69(0x18d)]==_0x339f2f[_0x20bf69(0x18d)]&&_0x3c9a56['bay']==_0x339f2f['bay']&&(_0x3c9a56[_0x20bf69(0x225)]=parseInt(_0x3c9a56[_0x20bf69(0x225)])-parseInt(_0x339f2f[_0x20bf69(0x21a)]));});}),console[_0x38f244(0x237)](_0x38f244(0x23b),_0x5d4b7d),await _0x5d4b7d['save']();const _0x20cce7=await c_payment_data[_0x38f244(0x206)]({'invoice':_0x5e89fb['body'][_0x38f244(0x1c1)]});_0x20cce7[_0x38f244(0x247)]=_0x5e89fb[_0x38f244(0x273)][_0x38f244(0x247)],await _0x20cce7[_0x38f244(0x1eb)](),_0x5e89fb[_0x38f244(0x1de)]('success','Sales\x20Update\x20successfully'),_0x2c9ffc[_0x38f244(0x243)](_0x38f244(0x1a9));}catch(_0x434f32){console[_0x38f244(0x237)](_0x434f32);}}),router['post'](a0_0x5d6cfd(0x212),auth,async(_0x3f9d18,_0x44037f)=>{var _0x201fb0=a0_0x5d6cfd;try{const _0x216a25=_0x3f9d18[_0x201fb0(0x267)]['id'],{invoice:_0x8c62c7,customer:_0x5954cd,receivable_amount:_0x35e55a,received_amount:_0x3a2133}=_0x3f9d18[_0x201fb0(0x273)],_0x299119=await sales['findById'](_0x216a25);console[_0x201fb0(0x237)](_0x299119);var _0xa7e0ed=_0x35e55a-_0x3a2133;console[_0x201fb0(0x237)](_0x3a2133),_0x299119[_0x201fb0(0x216)]=parseFloat(_0x3a2133)+parseFloat(_0x299119['received_amount']),_0x299119[_0x201fb0(0x1a7)]=_0xa7e0ed,console['log'](_0x299119);const _0x5dfc81=await _0x299119[_0x201fb0(0x1eb)](),_0x2aeb52=await c_payment_data[_0x201fb0(0x206)]({'invoice':_0x8c62c7});_0x2aeb52['amount']=_0xa7e0ed,await _0x2aeb52[_0x201fb0(0x1eb)]();let _0x4ddc11=new Date(),_0x449009=('0'+_0x4ddc11[_0x201fb0(0x18f)]())[_0x201fb0(0x20d)](-0x2),_0x35012b=('0'+(_0x4ddc11['getMonth']()+0x1))['slice'](-0x2),_0x1b037f=_0x4ddc11[_0x201fb0(0x1aa)](),_0x2dd33a=_0x1b037f+'-'+_0x35012b+'-'+_0x449009;const _0xda698c=new customer_payment({'invoice':_0x8c62c7,'date':_0x1b037f+'-'+_0x35012b+'-'+_0x449009,'customer':_0x5954cd,'reason':'Received\x20Payment\x20For\x20Sale','amount':_0x3a2133}),_0x2370df=await _0xda698c[_0x201fb0(0x1eb)]();_0x3f9d18[_0x201fb0(0x1de)]('success',_0x201fb0(0x202)),_0x44037f[_0x201fb0(0x243)]('/all_sales/view');}catch(_0x50ac91){console[_0x201fb0(0x237)](_0x50ac91);}}),router[a0_0x5d6cfd(0x17b)]('/invoice/:id',auth,async(_0xce5a4d,_0xb91490)=>{var _0x337339=a0_0x5d6cfd;try{const {username:_0x9f9ee5,email:_0x1e70c7,role:_0x89aa73}=_0xce5a4d['user'],_0x2a382a=_0xce5a4d[_0x337339(0x18a)],_0x458e8d=await profile[_0x337339(0x206)]({'email':_0x2a382a[_0x337339(0x198)]}),_0x4d6dca=await master_shop[_0x337339(0x264)]();console[_0x337339(0x237)](_0x337339(0x1a0),_0x4d6dca);const _0x28c400=_0xce5a4d[_0x337339(0x267)]['id'],_0x26ce9c=await sales['findById'](_0x28c400);console[_0x337339(0x237)](_0x26ce9c);const _0x5a52b3=await customer[_0x337339(0x206)]({'name':_0x26ce9c[_0x337339(0x224)]});console[_0x337339(0x237)](_0x5a52b3);if(_0x4d6dca[0x0][_0x337339(0x186)]==_0x337339(0x1d0)){var _0x1835c7=users[_0x337339(0x1b9)];console[_0x337339(0x237)](_0x1835c7);}else{if(_0x4d6dca[0x0]['language']=='Hindi')var _0x1835c7=users[_0x337339(0x24d)];else{if(_0x4d6dca[0x0][_0x337339(0x186)]==_0x337339(0x26f))var _0x1835c7=users[_0x337339(0x26f)];else{if(_0x4d6dca[0x0]['language']==_0x337339(0x1fc))var _0x1835c7=users[_0x337339(0x1fc)];else{if(_0x4d6dca[0x0]['language']==_0x337339(0x232))var _0x1835c7=users[_0x337339(0x232)];else{if(_0x4d6dca[0x0]['language']==_0x337339(0x25b))var _0x1835c7=users[_0x337339(0x1e1)];else{if(_0x4d6dca[0x0][_0x337339(0x186)]==_0x337339(0x288))var _0x1835c7=users[_0x337339(0x288)];else{if(_0x4d6dca[0x0]['language']==_0x337339(0x271))var _0x1835c7=users[_0x337339(0x25c)];}}}}}}}_0xb91490[_0x337339(0x239)]('sales_invoice',{'success':_0xce5a4d[_0x337339(0x1de)](_0x337339(0x1d2)),'errors':_0xce5a4d['flash'](_0x337339(0x19d)),'role':_0x2a382a,'profile':_0x458e8d,'master_shop':_0x4d6dca,'customers':_0x5a52b3,'sales':_0x26ce9c,'language':_0x1835c7});}catch(_0x918817){console[_0x337339(0x237)](_0x918817);}}),router[a0_0x5d6cfd(0x17b)]('/view/return_sales/:id',auth,async(_0x5372b0,_0x1f4566)=>{var _0x4185e0=a0_0x5d6cfd;try{const {username:_0x24031a,email:_0x4f6030,role:_0x294844}=_0x5372b0[_0x4185e0(0x18a)],_0x73874f=_0x5372b0['user'],_0x484aa2=await profile[_0x4185e0(0x206)]({'email':_0x73874f['email']}),_0x1101e3=await master_shop[_0x4185e0(0x264)](),_0x411718=_0x5372b0[_0x4185e0(0x267)]['id'],_0xa9141d=await sales_finished[_0x4185e0(0x258)](_0x411718),_0x1410dd=await warehouse['aggregate']([{'$match':{'name':_0xa9141d[_0x4185e0(0x200)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x4185e0(0x185),'name':{'$first':_0x4185e0(0x23c)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x4185e0(0x1c5)},'bin':{'$first':_0x4185e0(0x17f)},'type':{'$first':_0x4185e0(0x262)},'floorlevel':{'$first':_0x4185e0(0x1b3)},'primary_code':{'$first':_0x4185e0(0x24c)},'secondary_code':{'$first':_0x4185e0(0x195)},'product_code':{'$first':_0x4185e0(0x238)},'storage':{'$first':_0x4185e0(0x279)},'rack':{'$first':_0x4185e0(0x18b)},'expiry_date':{'$first':_0x4185e0(0x244)},'production_date':{'$first':_0x4185e0(0x1fb)},'unit':{'$first':_0x4185e0(0x223)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'maxProducts':{'$first':_0x4185e0(0x18e)},'batch_code':{'$first':_0x4185e0(0x1f7)},'maxPerUnit':{'$first':_0x4185e0(0x174)}}}]),_0x32b730=await product[_0x4185e0(0x264)]({}),_0x41776b=await warehouse[_0x4185e0(0x1d8)]([{'$match':{'status':'Enabled','warehouse_category':'Finished\x20Goods','name':{'$ne':'Return\x20Goods','$ne':_0x4185e0(0x274)}}},{'$group':{'_id':'$name','name':{'$first':_0x4185e0(0x1ea)}}},{'$sort':{'name':0x1}}]);var _0x5accd6=[_0x4185e0(0x190)];const _0x2bae09=await warehouse[_0x4185e0(0x1d8)]([{'$match':{'status':'Enabled','name':_0x4185e0(0x274)}},{'$group':{'_id':_0x4185e0(0x1ea),'name':{'$first':_0x4185e0(0x1ea)}}},{'$sort':{'name':0x1}}]);if(_0x1101e3[0x0][_0x4185e0(0x186)]==_0x4185e0(0x1d0)){var _0x3eea34=users['English'];console[_0x4185e0(0x237)](_0x3eea34);}else{if(_0x1101e3[0x0]['language']=='Hindi')var _0x3eea34=users[_0x4185e0(0x24d)];else{if(_0x1101e3[0x0]['language']==_0x4185e0(0x26f))var _0x3eea34=users[_0x4185e0(0x26f)];else{if(_0x1101e3[0x0]['language']=='Spanish')var _0x3eea34=users[_0x4185e0(0x1fc)];else{if(_0x1101e3[0x0][_0x4185e0(0x186)]==_0x4185e0(0x232))var _0x3eea34=users[_0x4185e0(0x232)];else{if(_0x1101e3[0x0]['language']==_0x4185e0(0x25b))var _0x3eea34=users[_0x4185e0(0x1e1)];else{if(_0x1101e3[0x0][_0x4185e0(0x186)]==_0x4185e0(0x288))var _0x3eea34=users[_0x4185e0(0x288)];else{if(_0x1101e3[0x0][_0x4185e0(0x186)]==_0x4185e0(0x271))var _0x3eea34=users[_0x4185e0(0x25c)];}}}}}}}_0x1f4566[_0x4185e0(0x239)](_0x4185e0(0x228),{'success':_0x5372b0[_0x4185e0(0x1de)](_0x4185e0(0x1d2)),'errors':_0x5372b0[_0x4185e0(0x1de)](_0x4185e0(0x19d)),'role':_0x73874f,'profile':_0x484aa2,'user':_0xa9141d,'stock':_0x1410dd,'master_shop':_0x1101e3,'unit':_0x32b730,'language':_0x3eea34,'warehouses':_0x41776b,'rooms':_0x5accd6,'warehouse_QA':_0x2bae09});}catch(_0x5638e7){console[_0x4185e0(0x237)](_0x5638e7),_0x1f4566[_0x4185e0(0x1e0)](0xc8)[_0x4185e0(0x17e)]({'message':_0x5638e7[_0x4185e0(0x1c2)]});}}),router['post'](a0_0x5d6cfd(0x1ef),auth,async(_0x4482fd,_0x3a88b8)=>{var _0x57fd94=a0_0x5d6cfd;if(_0x4482fd['body']['for_categorize']=='QA')try{const {invoice:_0x41ff1e,date:_0x1f671f,warehouse_name:_0x3b4875,product_name:_0x246895,primary_code:_0x5741a0,secondary_code:_0x1e64cf,product_code:_0x25b254,sales_quantity:_0x33da26,stocks:_0xe3da6b,return_qty:_0x12db22,Room_name:_0x2172a1,to_warehouse_name_QA:_0x4691e1,to_Room_name_QA:_0x302d41,note:_0x547218,for_categorize:_0x460341,product_name_QA1:_0x5da659}=_0x4482fd[_0x57fd94(0x273)];if(typeof _0x5da659==_0x57fd94(0x23a))var _0x4e27ed=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1b4)]],_0x1f8719=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1f1)]],_0x567fc1=[_0x4482fd[_0x57fd94(0x273)]['secondary_code_QA']],_0x22a724=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x23f)]],_0x1b5c86=[_0x4482fd[_0x57fd94(0x273)]['sales_quantity_QA']],_0xe15d73=[_0x4482fd[_0x57fd94(0x273)]['stocks_QA']],_0x402163=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1f0)]],_0x3f9512=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x217)]],_0x59b8a9=[_0x4482fd['body'][_0x57fd94(0x205)]],_0xa0a07e=[_0x4482fd['body'][_0x57fd94(0x23e)]],_0x373ab0=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x20b)]],_0x138141=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1cc)]],_0x5181a6=[_0x4482fd['body'][_0x57fd94(0x1f8)]],_0x5232c8=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x26c)]];else var _0x4e27ed=[..._0x4482fd['body'][_0x57fd94(0x1b4)]],_0x1f8719=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1f1)]],_0x567fc1=[..._0x4482fd['body'][_0x57fd94(0x1c7)]],_0x22a724=[..._0x4482fd[_0x57fd94(0x273)]['product_code_QA']],_0x1b5c86=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1ae)]],_0xe15d73=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x230)]],_0x402163=[..._0x4482fd['body']['return_qty_QA']],_0x3f9512=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x217)]],_0x59b8a9=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x205)]],_0xa0a07e=[..._0x4482fd['body']['batch_code_QA']],_0x373ab0=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x20b)]],_0x138141=[..._0x4482fd[_0x57fd94(0x273)]['unit_QA']],_0x5181a6=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1f8)]],_0x5232c8=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x26c)]];const _0x388253=_0x4e27ed[_0x57fd94(0x256)](_0x4e73d0=>{return _0x4e73d0={'product_name':_0x4e73d0};});_0x1f8719[_0x57fd94(0x1c8)]((_0x4518b8,_0x1f6166)=>{var _0x16e510=_0x57fd94;_0x388253[_0x1f6166][_0x16e510(0x25f)]=_0x4518b8;}),_0x567fc1[_0x57fd94(0x1c8)]((_0x228383,_0xf2820e)=>{_0x388253[_0xf2820e]['secondary_code']=_0x228383;}),_0x22a724[_0x57fd94(0x1c8)]((_0x4bd7a1,_0x11d61c)=>{_0x388253[_0x11d61c]['product_code']=_0x4bd7a1;}),_0x1b5c86[_0x57fd94(0x1c8)]((_0x55a226,_0x5acf6d)=>{_0x388253[_0x5acf6d]['sale_qty']=_0x55a226;}),_0xe15d73['forEach']((_0x3079ab,_0x288fdd)=>{var _0x23b98f=_0x57fd94;_0x388253[_0x288fdd][_0x23b98f(0x20c)]=_0x3079ab;}),_0x402163[_0x57fd94(0x1c8)]((_0x335dfa,_0x66edc6)=>{var _0x55672e=_0x57fd94;_0x388253[_0x66edc6][_0x55672e(0x266)]=_0x335dfa;}),_0x3f9512['forEach']((_0x4fc04b,_0x3bed04)=>{var _0x7a7ab8=_0x57fd94;_0x388253[_0x3bed04][_0x7a7ab8(0x1fa)]=_0x4fc04b;}),_0x59b8a9[_0x57fd94(0x1c8)]((_0x1c976d,_0x5d1dfd)=>{var _0x5c0b0f=_0x57fd94;_0x388253[_0x5d1dfd][_0x5c0b0f(0x175)]=_0x1c976d;}),_0xa0a07e['forEach']((_0x121673,_0x86de)=>{var _0x4cf754=_0x57fd94;_0x388253[_0x86de][_0x4cf754(0x286)]=_0x121673;}),_0x373ab0[_0x57fd94(0x1c8)]((_0x9eb235,_0x16cd57)=>{_0x388253[_0x16cd57]['secondary_unit']=_0x9eb235;}),_0x138141['forEach']((_0x7fee73,_0x4e2010)=>{var _0x5042b5=_0x57fd94;_0x388253[_0x4e2010][_0x5042b5(0x242)]=_0x7fee73;}),_0x5181a6['forEach']((_0x102e46,_0x3f8042)=>{var _0x3d3d02=_0x57fd94;_0x388253[_0x3f8042][_0x3d3d02(0x203)]=_0x102e46;}),_0x5232c8[_0x57fd94(0x1c8)]((_0x107e87,_0x34f86a)=>{_0x388253[_0x34f86a]['expiry_date']=_0x107e87;});const _0x232b10=await sales_finished[_0x57fd94(0x206)]({'invoice':_0x41ff1e});_0x232b10[_0x57fd94(0x26e)]='True';const _0x55f62c=await _0x232b10['save'](),_0x3b5bc2=new sales_return_finished({'invoice':_0x41ff1e,'customer':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)],'date':_0x1f671f,'warehouse_name':_0x3b4875,'room':_0x2172a1,'ToWarehouse':_0x4691e1,'ToRoom':_0x302d41,'return_sale_QA':_0x388253,'note':_0x547218,'warehouse_cat':_0x460341}),_0x5ea523=await _0x3b5bc2['save'](),_0x10190f=await sales_return_finished[_0x57fd94(0x206)]({'invoice':_0x41ff1e}),_0x110c4f=await warehouse['findOne']({'name':_0x4691e1,'room':_0x302d41});_0x10190f['return_sale_QA'][_0x57fd94(0x1c8)](_0x23d931=>{var _0x58cb32=_0x57fd94,_0x326132=0x0;const _0x28b31e=_0x110c4f[_0x58cb32(0x20f)][_0x58cb32(0x256)](_0x2c3a1e=>{var _0x5ae1f9=_0x58cb32;_0x2c3a1e['product_name']==_0x23d931['product_name']&&_0x2c3a1e['expiry_date']==_0x23d931[_0x5ae1f9(0x218)]&&_0x2c3a1e[_0x5ae1f9(0x203)]==_0x23d931['production_date']&&_0x2c3a1e[_0x5ae1f9(0x286)]==_0x23d931[_0x5ae1f9(0x286)]&&(_0x2c3a1e[_0x5ae1f9(0x225)]=parseInt(_0x2c3a1e['product_stock'])+parseInt(_0x23d931[_0x5ae1f9(0x266)]),_0x326132++);});_0x326132=='0'&&(_0x110c4f[_0x58cb32(0x20f)]=_0x110c4f[_0x58cb32(0x20f)][_0x58cb32(0x22e)]({'product_name':_0x23d931[_0x58cb32(0x18d)],'product_stock':_0x23d931[_0x58cb32(0x266)],'primary_code':_0x23d931[_0x58cb32(0x25f)],'secondary_code':_0x23d931[_0x58cb32(0x180)],'product_code':_0x23d931[_0x58cb32(0x1c9)],'batch_code':_0x23d931[_0x58cb32(0x286)],'maxPerUnit':_0x23d931['maxPerUnit'],'production_date':_0x23d931[_0x58cb32(0x203)],'expiry_date':_0x23d931[_0x58cb32(0x218)],'secondary_unit':_0x23d931[_0x58cb32(0x255)],'unit':_0x23d931['unit'],'maxProducts':_0x23d931[_0x58cb32(0x175)],'bay':_0x23d931[_0x58cb32(0x1c4)]}));}),await _0x110c4f[_0x57fd94(0x1eb)]();const _0x952d2=new c_payment_data({'invoice':_0x41ff1e,'customer':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)],'reason':_0x57fd94(0x17a)});await _0x952d2[_0x57fd94(0x1eb)]();const _0x273917=await master_shop[_0x57fd94(0x264)](),_0x5d9ac3=await email_settings['findOne'](),_0x43aa6a=await customer[_0x57fd94(0x206)]({'name':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)]});_0x273917[0x0][_0x57fd94(0x201)]==0x1?(right_currency=_0x273917[0x0][_0x57fd94(0x1ff)],left_currency=''):(right_currency='',left_currency=_0x273917[0x0][_0x57fd94(0x1ff)]);var _0x53b38e=_0x4e27ed,_0x57ee90=_0x402163,_0x3ef90a='',_0x35af98;for(_0x35af98 in _0x53b38e){_0x3ef90a+=_0x57fd94(0x26d)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x53b38e[_0x35af98]+_0x57fd94(0x21c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x57ee90[_0x35af98]+_0x57fd94(0x21c)+_0x57fd94(0x177);}console[_0x57fd94(0x237)]('product_list',_0x3ef90a);let _0x4dc8b7=nodemailer[_0x57fd94(0x1f3)]({'service':_0x57fd94(0x24a),'auth':{'user':_0x5d9ac3[_0x57fd94(0x198)],'pass':_0x5d9ac3[_0x57fd94(0x197)]}}),_0x100ba5={'from':_0x5d9ac3[_0x57fd94(0x198)],'to':_0x43aa6a[_0x57fd94(0x198)],'subject':_0x57fd94(0x27d),'attachments':[{'filename':_0x57fd94(0x1c6),'path':__dirname+'/../public'+'/upload/'+_0x273917[0x0][_0x57fd94(0x21b)],'cid':'logo'}],'html':_0x57fd94(0x25e)+'<html><head><title></title>'+'</head><body>'+_0x57fd94(0x289)+_0x57fd94(0x1dc)+_0x57fd94(0x289)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x57fd94(0x289)+_0x57fd94(0x1ab)+_0x273917[0x0][_0x57fd94(0x1dd)]+_0x57fd94(0x281)+_0x57fd94(0x183)+_0x57fd94(0x183)+'<hr\x20class=\x22my-3\x22>'+_0x57fd94(0x289)+_0x57fd94(0x27f)+_0x57fd94(0x1b1)+_0x41ff1e+'\x20'+_0x57fd94(0x176)+'\x20Order\x20Date\x20:\x20'+_0x1f671f+'\x20'+_0x57fd94(0x220)+'</h5>'+_0x57fd94(0x183)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x57fd94(0x17c)+_0x57fd94(0x26d)+_0x57fd94(0x1ec)+_0x57fd94(0x188)+_0x57fd94(0x26a)+_0x57fd94(0x1c0)+_0x57fd94(0x177)+'</thead>'+_0x57fd94(0x1d5)+'\x20'+_0x3ef90a+'\x20'+'</tbody>'+_0x57fd94(0x1ad)+'<div>'+_0x57fd94(0x1bf)+'<h5>'+_0x273917[0x0]['site_title']+_0x57fd94(0x1cb)+_0x57fd94(0x183)+_0x57fd94(0x183)+_0x57fd94(0x246)};_0x4dc8b7[_0x57fd94(0x22b)](_0x100ba5,function(_0x37a2be,_0x103112){var _0x1bd70d=_0x57fd94;_0x37a2be?(console[_0x1bd70d(0x237)](_0x37a2be),console['log'](_0x1bd70d(0x1fd))):console[_0x1bd70d(0x237)]('Email\x20sent\x20successfully');}),_0x4482fd['flash']('success',_0x57fd94(0x1e5)),_0x3a88b8[_0x57fd94(0x243)](_0x57fd94(0x1a9));}catch(_0x1ef4ab){_0x3a88b8[_0x57fd94(0x1e0)](0xc8)[_0x57fd94(0x17e)]({'message1':_0x1ef4ab[_0x57fd94(0x1c2)]});}else{if(_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1ca)]=='GS')try{const {invoice:_0xb499bb,date:_0x163043,warehouse_name:_0x55c9e2,product_name:_0x2a11e0,primary_code:_0x59fede,secondary_code:_0x30d323,product_code:_0x2f18f9,sales_quantity:_0x4e4f6e,stocks:_0x2e7bc4,return_qty:_0xd7a648,Room_name:_0xab83f4,to_warehouse_name:_0x3fe1fd,to_Room_name:_0x1cbe26,note:_0x4a3345,level:_0x311b76,isle:_0x137b5a,pallet:_0x1ef8ac,for_categorize:_0x57f32e}=_0x4482fd[_0x57fd94(0x273)];if(typeof _0x2a11e0==_0x57fd94(0x23a))var _0x4e27ed=[_0x4482fd['body']['product_name']],_0x1f8719=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x25f)]],_0x567fc1=[_0x4482fd[_0x57fd94(0x273)]['secondary_code']],_0x22a724=[_0x4482fd[_0x57fd94(0x273)]['product_code']],_0x1b5c86=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x284)]],_0x402163=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x266)]],_0x30c682=[_0x4482fd['body'][_0x57fd94(0x1c4)]],_0x3f9512=[_0x4482fd['body'][_0x57fd94(0x1fa)]],_0x59b8a9=[_0x4482fd['body']['maxProducts']],_0xa0a07e=[_0x4482fd[_0x57fd94(0x273)]['batch_code']],_0x373ab0=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x255)]],_0x138141=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x242)]],_0x5181a6=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x203)]],_0x5232c8=[_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x218)]];else var _0x4e27ed=[..._0x4482fd['body'][_0x57fd94(0x18d)]],_0x1f8719=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x25f)]],_0x567fc1=[..._0x4482fd[_0x57fd94(0x273)]['secondary_code']],_0x22a724=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1c9)]],_0x1b5c86=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x284)]],_0x402163=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x266)]],_0x30c682=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x1c4)]],_0x3f9512=[..._0x4482fd['body'][_0x57fd94(0x1fa)]],_0x59b8a9=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x175)]],_0xa0a07e=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x286)]],_0x373ab0=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x255)]],_0x138141=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x242)]],_0x5181a6=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x203)]],_0x5232c8=[..._0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x218)]];const _0x51382=_0x4e27ed['map'](_0x34aa99=>{return _0x34aa99={'product_name':_0x34aa99};});_0x1f8719[_0x57fd94(0x1c8)]((_0x49cc12,_0x19c096)=>{var _0x4f82d8=_0x57fd94;_0x51382[_0x19c096][_0x4f82d8(0x25f)]=_0x49cc12;}),_0x567fc1[_0x57fd94(0x1c8)]((_0x4a9b25,_0x1c81ae)=>{var _0x15375f=_0x57fd94;_0x51382[_0x1c81ae][_0x15375f(0x180)]=_0x4a9b25;}),_0x22a724['forEach']((_0xc6edc5,_0x4954af)=>{var _0x342ca5=_0x57fd94;_0x51382[_0x4954af][_0x342ca5(0x1c9)]=_0xc6edc5;}),_0x1b5c86[_0x57fd94(0x1c8)]((_0x11f5ae,_0x194f2f)=>{_0x51382[_0x194f2f]['sale_qty']=_0x11f5ae;}),_0x402163[_0x57fd94(0x1c8)]((_0x52e6cf,_0x2f23e9)=>{var _0x3194b2=_0x57fd94;_0x51382[_0x2f23e9][_0x3194b2(0x266)]=_0x52e6cf;}),_0x30c682['forEach']((_0x2983c3,_0x407665)=>{var _0x2bf08f=_0x57fd94;_0x51382[_0x407665][_0x2bf08f(0x1c4)]=_0x2983c3;}),_0x3f9512[_0x57fd94(0x1c8)]((_0x315be5,_0x47921e)=>{var _0x1327fa=_0x57fd94;_0x51382[_0x47921e][_0x1327fa(0x1fa)]=_0x315be5;}),_0x59b8a9[_0x57fd94(0x1c8)]((_0x570ebb,_0x33777d)=>{_0x51382[_0x33777d]['maxProducts']=_0x570ebb;}),_0xa0a07e['forEach']((_0x4c3077,_0x207e19)=>{var _0x2998ae=_0x57fd94;_0x51382[_0x207e19][_0x2998ae(0x286)]=_0x4c3077;}),_0x373ab0[_0x57fd94(0x1c8)]((_0x50aba0,_0x48243b)=>{var _0x5aadda=_0x57fd94;_0x51382[_0x48243b][_0x5aadda(0x255)]=_0x50aba0;}),_0x138141[_0x57fd94(0x1c8)]((_0x355071,_0x496998)=>{var _0x130e60=_0x57fd94;_0x51382[_0x496998][_0x130e60(0x242)]=_0x355071;}),_0x5181a6[_0x57fd94(0x1c8)]((_0x2f2968,_0x3215a9)=>{var _0x1f8406=_0x57fd94;_0x51382[_0x3215a9][_0x1f8406(0x203)]=_0x2f2968;}),_0x5232c8['forEach']((_0x377991,_0xd807d)=>{var _0x1e145d=_0x57fd94;_0x51382[_0xd807d][_0x1e145d(0x218)]=_0x377991;});var _0x314b55=0x0;_0x51382[_0x57fd94(0x1c8)](_0x5c7030=>{var _0x38008a=_0x57fd94;(parseInt(_0x5c7030[_0x38008a(0x260)])<parseInt(_0x5c7030[_0x38008a(0x266)])||parseInt(_0x5c7030[_0x38008a(0x20c)])<parseInt(_0x5c7030['return_qty'])&&parseInt(_0x5c7030[_0x38008a(0x260)])>parseInt(_0x5c7030[_0x38008a(0x266)])||parseInt(_0x5c7030[_0x38008a(0x266)])==0x0)&&_0x314b55++;});if(_0x314b55!=0x0)return _0x4482fd['flash'](_0x57fd94(0x19d),_0x57fd94(0x229)),_0x3a88b8['redirect'](_0x57fd94(0x282));const _0xcc88f4=await sales_finished[_0x57fd94(0x206)]({'invoice':_0xb499bb});_0xcc88f4['return_data']=_0x57fd94(0x22a);const _0x416736=await _0xcc88f4['save'](),_0x2d9806=new sales_return_finished({'invoice':_0xb499bb,'customer':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)],'date':_0x163043,'warehouse_name':_0x55c9e2,'room':_0xab83f4,'ToWarehouse':_0x3fe1fd,'ToRoom':_0x1cbe26,'return_sale':_0x51382,'note':_0x4a3345,'warehouse_cat':_0x57f32e}),_0x48f37b=await _0x2d9806['save'](),_0x54f0d0=await sales_return_finished[_0x57fd94(0x206)]({'invoice':_0xb499bb}),_0x1d2f03=await warehouse['findOne']({'name':_0x3fe1fd,'room':_0x1cbe26,'warehouse_category':'Finished\x20Goods'});_0x54f0d0[_0x57fd94(0x1e2)][_0x57fd94(0x1c8)](_0x5c62fc=>{var _0x67982c=_0x57fd94,_0x294d49=0x0;const _0xab08f0=_0x1d2f03[_0x67982c(0x20f)][_0x67982c(0x256)](_0x48bb6b=>{var _0xaf6018=_0x67982c;_0x48bb6b['product_name']==_0x5c62fc['product_name']&&_0x48bb6b[_0xaf6018(0x1c4)]==_0x5c62fc[_0xaf6018(0x1c4)]&&_0x48bb6b[_0xaf6018(0x218)]==_0x5c62fc[_0xaf6018(0x218)]&&_0x48bb6b[_0xaf6018(0x203)]==_0x5c62fc[_0xaf6018(0x203)]&&_0x48bb6b[_0xaf6018(0x286)]==_0x5c62fc[_0xaf6018(0x286)]&&(_0x48bb6b[_0xaf6018(0x225)]=parseInt(_0x48bb6b[_0xaf6018(0x225)])+parseInt(_0x5c62fc[_0xaf6018(0x266)]),_0x294d49++);});_0x294d49=='0'&&(_0x1d2f03[_0x67982c(0x20f)]=_0x1d2f03[_0x67982c(0x20f)][_0x67982c(0x22e)]({'product_name':_0x5c62fc['product_name'],'product_stock':_0x5c62fc[_0x67982c(0x266)],'primary_code':_0x5c62fc[_0x67982c(0x25f)],'secondary_code':_0x5c62fc[_0x67982c(0x180)],'product_code':_0x5c62fc[_0x67982c(0x1c9)],'bay':_0x5c62fc[_0x67982c(0x1c4)],'batch_code':_0x5c62fc[_0x67982c(0x286)],'maxPerUnit':_0x5c62fc[_0x67982c(0x1fa)],'production_date':_0x5c62fc[_0x67982c(0x203)],'expiry_date':_0x5c62fc['expiry_date'],'secondary_unit':_0x5c62fc[_0x67982c(0x255)],'unit':_0x5c62fc['unit'],'maxProducts':_0x5c62fc['maxProducts']}));}),await _0x1d2f03['save'](),console[_0x57fd94(0x237)](_0x4482fd[_0x57fd94(0x273)]);const _0x2860b7=new c_payment_data({'invoice':_0xb499bb,'customer':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)],'reason':'Sale\x20Return'});await _0x2860b7[_0x57fd94(0x1eb)]();const _0x15c757=await master_shop['find']();console[_0x57fd94(0x237)]('add\x20post',_0x15c757[0x0][_0x57fd94(0x21b)]);const _0x256dae=await email_settings[_0x57fd94(0x206)](),_0x158269=await customer[_0x57fd94(0x206)]({'name':_0x4482fd[_0x57fd94(0x273)][_0x57fd94(0x224)]});console[_0x57fd94(0x237)]('customer_data',_0x158269);_0x15c757[0x0][_0x57fd94(0x201)]==0x1?(right_currency=_0x15c757[0x0]['currency'],left_currency=''):(right_currency='',left_currency=_0x15c757[0x0][_0x57fd94(0x1ff)]);var _0x53b38e=_0x4e27ed,_0x57ee90=_0x402163,_0x3ef90a='',_0x35af98;for(_0x35af98 in _0x53b38e){_0x3ef90a+='<tr>'+_0x57fd94(0x22c)+_0x53b38e[_0x35af98]+_0x57fd94(0x21c)+_0x57fd94(0x22c)+_0x57ee90[_0x35af98]+'</td>'+_0x57fd94(0x177);}console[_0x57fd94(0x237)](_0x57fd94(0x215),_0x3ef90a);let _0xd0b7b6=nodemailer[_0x57fd94(0x1f3)]({'service':_0x57fd94(0x24a),'auth':{'user':_0x256dae[_0x57fd94(0x198)],'pass':_0x256dae[_0x57fd94(0x197)]}}),_0x1e3135={'from':_0x256dae['email'],'to':_0x158269[_0x57fd94(0x198)],'subject':_0x57fd94(0x27d),'attachments':[{'filename':'Logo.png','path':__dirname+_0x57fd94(0x1e9)+_0x57fd94(0x1fe)+_0x15c757[0x0][_0x57fd94(0x21b)],'cid':_0x57fd94(0x22f)}],'html':_0x57fd94(0x25e)+_0x57fd94(0x1bd)+_0x57fd94(0x1a1)+_0x57fd94(0x289)+_0x57fd94(0x1dc)+'<div>'+_0x57fd94(0x227)+'</div>'+'<div>'+_0x57fd94(0x1ab)+_0x15c757[0x0][_0x57fd94(0x1dd)]+_0x57fd94(0x281)+_0x57fd94(0x183)+'</div>'+_0x57fd94(0x21e)+'<div>'+'<h5\x20style=\x22text-align:\x20left;\x22>'+'\x20Order\x20Number\x20:\x20'+_0xb499bb+'\x20'+_0x57fd94(0x176)+_0x57fd94(0x250)+_0x163043+'\x20'+_0x57fd94(0x220)+'</h5>'+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x57fd94(0x17c)+'<tr>'+_0x57fd94(0x1ec)+_0x57fd94(0x188)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Price\x20</th>'+_0x57fd94(0x1c0)+_0x57fd94(0x177)+_0x57fd94(0x187)+_0x57fd94(0x1d5)+'\x20'+_0x3ef90a+'\x20'+'</tbody>'+_0x57fd94(0x1ad)+'<div>'+_0x57fd94(0x1bf)+_0x57fd94(0x20a)+_0x15c757[0x0][_0x57fd94(0x1dd)]+_0x57fd94(0x1cb)+'</div>'+_0x57fd94(0x183)+_0x57fd94(0x246)};_0xd0b7b6[_0x57fd94(0x22b)](_0x1e3135,function(_0x49355b,_0x19cea6){var _0x544ffc=_0x57fd94;_0x49355b?(console[_0x544ffc(0x237)](_0x49355b),console['log']('Error\x20Occurs')):console[_0x544ffc(0x237)](_0x544ffc(0x1d6));}),_0x4482fd[_0x57fd94(0x1de)](_0x57fd94(0x1d2),_0x57fd94(0x1e5)),_0x3a88b8[_0x57fd94(0x243)]('/all_sales_finished/view');}catch(_0x390f1c){console['log'](_0x390f1c),_0x3a88b8[_0x57fd94(0x1e0)](0xc8)['json']({'message1':_0x390f1c[_0x57fd94(0x1c2)]});}}}),router[a0_0x5d6cfd(0x17b)](a0_0x5d6cfd(0x1b8),auth,async(_0x5deace,_0x5d8bd1)=>{var _0x44872b=a0_0x5d6cfd;try{const {username:_0x88060f,email:_0x2d822c,role:_0x436a8f}=_0x5deace[_0x44872b(0x18a)],_0x32b8c8=_0x5deace[_0x44872b(0x18a)],_0x515afd=await profile['findOne']({'email':_0x32b8c8['email']}),_0xcad054=await master_shop[_0x44872b(0x264)]();console[_0x44872b(0x237)]('barcode\x20Product\x20master',_0xcad054);const _0x4419c6=_0x5deace[_0x44872b(0x267)]['id'],_0x4edbac=await sales[_0x44872b(0x258)](_0x4419c6);console[_0x44872b(0x237)](_0x44872b(0x194),_0x4edbac);if(_0xcad054[0x0][_0x44872b(0x186)]==_0x44872b(0x1d0))var _0x11d66e=users[_0x44872b(0x1b9)];else{if(_0xcad054[0x0][_0x44872b(0x186)]==_0x44872b(0x24d))var _0x11d66e=users[_0x44872b(0x24d)];else{if(_0xcad054[0x0][_0x44872b(0x186)]==_0x44872b(0x26f))var _0x11d66e=users[_0x44872b(0x26f)];else{if(_0xcad054[0x0]['language']==_0x44872b(0x1fc))var _0x11d66e=users['Spanish'];else{if(_0xcad054[0x0][_0x44872b(0x186)]=='French')var _0x11d66e=users[_0x44872b(0x232)];else{if(_0xcad054[0x0]['language']=='Portuguese\x20(BR)')var _0x11d66e=users[_0x44872b(0x1e1)];else{if(_0xcad054[0x0]['language']==_0x44872b(0x288))var _0x11d66e=users[_0x44872b(0x288)];else{if(_0xcad054[0x0][_0x44872b(0x186)]=='Arabic\x20(ae)')var _0x11d66e=users[_0x44872b(0x25c)];}}}}}}}_0x5d8bd1['render'](_0x44872b(0x251),{'success':_0x5deace[_0x44872b(0x1de)](_0x44872b(0x1d2)),'errors':_0x5deace['flash']('errors'),'role':_0x32b8c8,'profile':_0x515afd,'alldata':_0x4edbac,'master_shop':_0xcad054,'language':_0x11d66e});}catch(_0x149243){console[_0x44872b(0x237)](_0x149243);}}),router[a0_0x5d6cfd(0x28b)](a0_0x5d6cfd(0x19e),async(_0x2f92cc,_0x246179)=>{var _0xf7ac5d=a0_0x5d6cfd;const {product_code:_0x42e51e,warehouse_name:_0x45c3ed,rooms_data:_0x17b5ba,Roomslist:_0x45c690}=_0x2f92cc[_0xf7ac5d(0x273)],_0x4857a1=_0x45c690[_0xf7ac5d(0x1c3)](','),_0x2013ff=[];async function _0x213562(_0x746132){var _0x1da3bf=_0xf7ac5d;const _0x7723d3=await warehouse['aggregate']([{'$match':{'name':_0x45c3ed,'room':_0x746132}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x42e51e}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x1da3bf(0x23c)},'product_stock':{'$first':_0x1da3bf(0x17d)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1da3bf(0x195)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x1da3bf(0x1c5)},'isle':{'$first':_0x1da3bf(0x17f)},'type':{'$first':_0x1da3bf(0x262)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x1da3bf(0x223)},'secondary_unit':{'$first':_0x1da3bf(0x1d3)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1da3bf(0x18b)},'expiry_date':{'$first':_0x1da3bf(0x244)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x1da3bf(0x174)},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x1da3bf(0x1ce)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x1da3bf(0x1d1)},'invoice':{'$first':_0x1da3bf(0x182)}}}]),_0x5a6136=await warehouse['aggregate']([{'$match':{'name':_0x45c3ed,'room':_0x746132}},{'$unwind':_0x1da3bf(0x234)},{'$match':{'product_details.secondary_code':_0x42e51e}},{'$group':{'_id':_0x1da3bf(0x185),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1da3bf(0x195)},'product_code':{'$first':_0x1da3bf(0x238)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1da3bf(0x17f)},'type':{'$first':_0x1da3bf(0x262)},'pallet':{'$first':_0x1da3bf(0x1b3)},'unit':{'$first':_0x1da3bf(0x223)},'secondary_unit':{'$first':_0x1da3bf(0x1d3)},'storage':{'$first':_0x1da3bf(0x279)},'rack':{'$first':_0x1da3bf(0x18b)},'expiry_date':{'$first':_0x1da3bf(0x244)},'production_date':{'$first':_0x1da3bf(0x1fb)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x1da3bf(0x1ce)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x7723d3[_0x1da3bf(0x1be)]>0x0)_0x2013ff['push'](_0x7723d3);else _0x5a6136[_0x1da3bf(0x1be)]>0x0&&_0x2013ff[_0x1da3bf(0x211)](_0x5a6136);}const _0x3005ed=_0x4857a1['map'](_0x8c097d=>_0x213562(_0x8c097d));await Promise['all'](_0x3005ed),_0x246179[_0xf7ac5d(0x17e)](_0x2013ff);}),module[a0_0x5d6cfd(0x27a)]=router;function a0_0xea8a(){var _0x10a365=['/all_sales_finished/preview/','../models/all_models','sale_product','/../public','$name','save','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','room','catch','/view/return_sales/:id','return_qty_QA','primary_code_QA','305377cVHoLQ','createTransport','$product.product_name','add_sales_finished','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','$product_details.batch_code','production_date_QA','$_id','maxPerUnit','$product_details.production_date','Spanish','Error\x20Occurs','/upload/','currency','warehouse_name','currency_placement','payment\x20successfull','production_date','product','maxProducts_QA','findOne','<table\x20style=\x22width:\x20100%\x20!important;\x22>','abs','71319hFMbLa','<h5>','secondary_unit_QA','stock','slice','Sales\x20Add\x20successfully','product_details','warehouse','push','/give_payment/:id','False','foreach\x20newproduct','product_list','received_amount','maxPerUnit_QA','expiry_date','maxperunit','quantity','image','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<hr\x20class=\x22my-3\x22>','4834812CafMfE','</span>','date','edit_sales_finished','$product_details.unit','customer','product_stock','adjust_qty','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','return_sale_finished','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','True','sendMail','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$invoice','concat','logo','stocks_QA','$finalize','French','$customers_docs','$product_details','OUTF-','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','log','$product_details.product_code','render','string','final','$product_details.product_name','filter','batch_code_QA','product_code_QA','prod_invoice','port','unit','redirect','$product_details.expiry_date','level','</body></html>','suppliers','primary_unit','getMonth','gmail','$sale_product.quantity','$product_details.primary_code','Hindi','An\x20error\x20occurred\x20while\x20saving\x20data.','prod_cat','\x20Order\x20Date\x20:\x20','all_sales_barcode','product_data','purchases_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','secondary_unit','map','Sales\x20Update\x20successfully','findById','then','24yIhTXf','Portuguese\x20(BR)','Arabic','all_sales_finished','<!DOCTYPE\x20html>','primary_code','sale_qty','all','$product_details.type','/preview/:id','find','Sale\x20Product\x20Mail','return_qty','params','error','/view/:id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Price\x20</th>','308451PeCtBV','expiry_date_QA','<tr>','return_data','German','customers','Arabic\x20(ae)','456363kxDDpm','body','Quality\x20Inspection','/view/add_sales/:id','$return_data','nodemailer','Enclosed','$product_details.storage','exports','Router','carton','Sale\x20Return\x20Mail','edit_sales_finished_view','<h5\x20style=\x22text-align:\x20left;\x22>','/view','\x20</h2>','back','Ambient','sales_quantity','staff','batch_code','toString','Chinese','<div>','4057235SNBqBV','post','$product_details.maxPerUnit','maxProducts','<span\x20style=\x22float:\x20right;\x22>','</tr>','finalize','19160cQAzIH','Sale\x20Return','get','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.product_stock','json','$product_details.bin','secondary_code','$sale_product.bay','$product_details.invoice','</div>','An\x20error\x20occurred.','$product_details._id','language','</thead>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Return\x20Quantity\x20</th>','16XNbTjr','user','$product_details.rack','padStart','product_name','$product_details.maxProducts','getDate','Return\x20Rooms','$sale_product.floorlevel','$customer','Finished\x20Goods','barcode\x20user_id','$product_details.secondary_code','/view/add_sales','password','email','_id','../public/language/languages.json','../middleware/auth','role','errors','/barcode_scanner','$warehouse_name','master','</head><body>','$sale_product','1140nsSJNZ','host','$sale_product.bin','$note','due_amount','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','/all_sales_finished/view','getFullYear','<h2>\x20','QA\x20Warehouse','</table>','sales_quantity_QA','name','Must\x20not\x20be\x20greater\x20or\x20less\x20than\x20stock\x20Qty','\x20Order\x20Number\x20:\x20','$sale_product.type','$product_details.floorlevel','product_name_QA1','/picking_list/pdf/','Enabled','$date','/barcode/:id','English','max_per_unit','random','FGSEmail','<html><head><title></title>','length','<strong>\x20Regards\x20</strong>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Total\x20</th>','invoice','message','split','bay','$product_details.bay','Logo.png','secondary_code_QA','forEach','product_code','for_categorize','</h5>','unit_QA','customers_docs','$product_details.product_cat','prod_code','English\x20(US)','$room','success','$product_details.secondary_unit','product_date','<tbody\x20style=\x22text-align:\x20center;\x22>','Email\x20sent\x20successfully','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','aggregate','floor','\x20<>\x20','There\x27s\x20a\x20error\x20in\x20this\x20transaction','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','site_title','flash','room_name','status','Portuguese','return_sale','255SGIlKP','</tbody>','sales\x20item\x20return\x20successfull'];a0_0xea8a=function(){return _0x10a365;};return a0_0xea8a();}