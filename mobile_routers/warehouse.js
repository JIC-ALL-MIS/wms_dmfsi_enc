const a0_0x1142c2=a0_0x3378;(function(_0x3403ae,_0x30093a){const _0x1ddeeb=a0_0x3378,_0x58274=_0x3403ae();while(!![]){try{const _0x24203e=parseInt(_0x1ddeeb(0x19d))/0x1+-parseInt(_0x1ddeeb(0x187))/0x2+parseInt(_0x1ddeeb(0x18e))/0x3+parseInt(_0x1ddeeb(0x194))/0x4+parseInt(_0x1ddeeb(0x195))/0x5+parseInt(_0x1ddeeb(0x18f))/0x6+-parseInt(_0x1ddeeb(0x199))/0x7*(parseInt(_0x1ddeeb(0x1a0))/0x8);if(_0x24203e===_0x30093a)break;else _0x58274['push'](_0x58274['shift']());}catch(_0x21df05){_0x58274['push'](_0x58274['shift']());}}}(a0_0x4797,0x871db));const express=require(a0_0x1142c2(0x181)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x1142c2(0x186)),auth=require(a0_0x1142c2(0x182)),nodemailer=require(a0_0x1142c2(0x198));function a0_0x4797(){const _0x323a19=['floor','Enabled','$name','3561672rUcPOt','1897470hMezaM','length','Return\x20Goods','nodemailer','1477jUheKu','status','message','/supplier','760189IzFDTc','Finished\x20Goods','find','47608BzoMbP','path','/view','express','../middleware/auth','ejs','json','post','../models/all_models','2083622HpjqRs','INC-','Raw\x20Materials','/invoice','/room','log','table\x20page','1066974cBGnfY','2790888TJhoUz','aggregate'];a0_0x4797=function(){return _0x323a19;};return a0_0x4797();}var ejs=require(a0_0x1142c2(0x183));function a0_0x3378(_0x5f3c9f,_0x19aae9){const _0x479707=a0_0x4797();return a0_0x3378=function(_0x3378dc,_0x6b7190){_0x3378dc=_0x3378dc-0x180;let _0x2e6cbf=_0x479707[_0x3378dc];return _0x2e6cbf;},a0_0x3378(_0x5f3c9f,_0x19aae9);}const path=require(a0_0x1142c2(0x1a1)),users=require('../public/language/languages.json');router[a0_0x1142c2(0x185)](a0_0x1142c2(0x180),async(_0x131ab7,_0x329a19)=>{const _0x3344ec=a0_0x1142c2;try{const {warehouse_category:_0x514e07}=_0x131ab7['body'];if(_0x514e07=='RM'){const _0x3c8566=await warehouse[_0x3344ec(0x190)]([{'$match':{'status':_0x3344ec(0x192),'warehouse_category':_0x3344ec(0x189),'name':{'$ne':_0x3344ec(0x197)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x329a19[_0x3344ec(0x184)](_0x3c8566);}else{const _0x57125a=await warehouse['aggregate']([{'$match':{'status':_0x3344ec(0x192),'warehouse_category':_0x3344ec(0x19e),'name':{'$ne':_0x3344ec(0x197)}}},{'$group':{'_id':'$name','name':{'$first':_0x3344ec(0x193)}}}]);_0x329a19[_0x3344ec(0x184)](_0x57125a);}}catch(_0x2835e4){console[_0x3344ec(0x18c)](_0x3344ec(0x18d),_0x2835e4),_0x329a19[_0x3344ec(0x19a)](0xc8)[_0x3344ec(0x184)]({'message':_0x2835e4[_0x3344ec(0x19b)]});}}),router[a0_0x1142c2(0x185)](a0_0x1142c2(0x19c),async(_0x340d33,_0x3ee6e4)=>{const _0x483068=a0_0x1142c2;try{const _0x5ad3ee=await suppliers[_0x483068(0x19f)]({});_0x3ee6e4[_0x483068(0x19a)](0xc8)[_0x483068(0x184)](_0x5ad3ee);}catch(_0x2be6b0){console[_0x483068(0x18c)](_0x483068(0x18d),_0x2be6b0),_0x3ee6e4[_0x483068(0x19a)](0xc8)[_0x483068(0x184)]({'message':_0x2be6b0[_0x483068(0x19b)]});}}),router['post'](a0_0x1142c2(0x18b),async(_0x1d9262,_0x470470)=>{const _0xca269c=a0_0x1142c2;try{const {wahouse_data:_0x235398}=_0x1d9262['body'],_0xc5f696=[{'$match':{'name':_0x235398,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x2dc9d5=await warehouse['aggregate'](_0xc5f696);_0x470470[_0xca269c(0x19a)](0xc8)['json'](_0x2dc9d5);}catch(_0x528a5b){console[_0xca269c(0x18c)](_0xca269c(0x18d),_0x528a5b),_0x470470[_0xca269c(0x19a)](0xc8)['json']({'message':_0x528a5b['message']});}}),router['post'](a0_0x1142c2(0x18a),async(_0x5b16b1,_0x4e0db2)=>{const _0x3a6ab2=a0_0x1142c2;try{const _0x49fc47=0x989680,_0x468057=0x5f5e0ff,_0x5477f6=Math[_0x3a6ab2(0x191)](Math['random']()*(_0x468057-_0x49fc47+0x1))+_0x49fc47;var _0x3b0b8b;const _0x1c5fbe=await purchases['findOne']({'invoice':'INC-'+_0x5477f6});return _0x1c5fbe&&_0x1c5fbe[_0x3a6ab2(0x196)]>0x0?_0x3b0b8b=_0x3a6ab2(0x188)+_0x5477f6:_0x3b0b8b=_0x3a6ab2(0x188)+_0x5477f6,_0x4e0db2['json']({'incoming_invoice':_0x3b0b8b}),_0x3b0b8b;}catch(_0x2302fe){console[_0x3a6ab2(0x18c)](_0x3a6ab2(0x18d),_0x2302fe),_0x4e0db2[_0x3a6ab2(0x19a)](0xc8)['json']({'message':_0x2302fe[_0x3a6ab2(0x19b)]});}}),module['exports']=router;