const a0_0x5cef53=a0_0x3593;(function(_0x2b9981,_0x546daf){const _0x3328e7=a0_0x3593,_0x495343=_0x2b9981();while(!![]){try{const _0x1dbb58=parseInt(_0x3328e7(0x209))/0x1*(-parseInt(_0x3328e7(0x202))/0x2)+parseInt(_0x3328e7(0x1fb))/0x3+parseInt(_0x3328e7(0x207))/0x4+parseInt(_0x3328e7(0x206))/0x5*(-parseInt(_0x3328e7(0x20b))/0x6)+parseInt(_0x3328e7(0x1f6))/0x7+parseInt(_0x3328e7(0x20f))/0x8*(-parseInt(_0x3328e7(0x1fa))/0x9)+parseInt(_0x3328e7(0x1f4))/0xa*(parseInt(_0x3328e7(0x1eb))/0xb);if(_0x1dbb58===_0x546daf)break;else _0x495343['push'](_0x495343['shift']());}catch(_0xa568f0){_0x495343['push'](_0x495343['shift']());}}}(a0_0x1d3c,0xc6f10));const express=require(a0_0x5cef53(0x1ea)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x5cef53(0x20d)),auth=require('../middleware/auth'),nodemailer=require(a0_0x5cef53(0x1fd));var ejs=require(a0_0x5cef53(0x1fe));function a0_0x1d3c(){const _0xb0ae62=['findOne','261028adhLuJ','/invoice','3074976HprgJS','Return\x20Goods','../models/all_models','/supplier','11078752qNkMty','INC-','express','289751PnHIBZ','log','Raw\x20Materials','message','aggregate','status','exports','random','$name','530SVOaus','$_id','6826918chksyK','$room','../public/language/languages.json','Enabled','9zSXzaL','2218497rpDtba','Finished\x20Goods','nodemailer','ejs','table\x20page','/room','find','2CTJqha','json','post','floor','15UAWbDV','3549512cnvCdy'];a0_0x1d3c=function(){return _0xb0ae62;};return a0_0x1d3c();}function a0_0x3593(_0x304db5,_0x18173c){const _0x1d3c4d=a0_0x1d3c();return a0_0x3593=function(_0x35930b,_0xbeb50){_0x35930b=_0x35930b-0x1e9;let _0x24f594=_0x1d3c4d[_0x35930b];return _0x24f594;},a0_0x3593(_0x304db5,_0x18173c);}const path=require('path'),users=require(a0_0x5cef53(0x1f8));router['post']('/view',async(_0x19b9fe,_0x728bbc)=>{const _0x162656=a0_0x5cef53;try{const {warehouse_category:_0xcf24ab}=_0x19b9fe['body'];if(_0xcf24ab=='RM'){const _0x3b8aeb=await warehouse[_0x162656(0x1ef)]([{'$match':{'status':_0x162656(0x1f9),'warehouse_category':_0x162656(0x1ed),'name':{'$ne':_0x162656(0x20c)}}},{'$group':{'_id':_0x162656(0x1f3),'name':{'$first':_0x162656(0x1f3)}}}]);_0x728bbc[_0x162656(0x203)](_0x3b8aeb);}else{const _0x1cf3bb=await warehouse[_0x162656(0x1ef)]([{'$match':{'status':'Enabled','warehouse_category':_0x162656(0x1fc),'name':{'$ne':_0x162656(0x20c)}}},{'$group':{'_id':_0x162656(0x1f3),'name':{'$first':_0x162656(0x1f3)}}}]);_0x728bbc[_0x162656(0x203)](_0x1cf3bb);}}catch(_0x1cab02){console[_0x162656(0x1ec)](_0x162656(0x1ff),_0x1cab02),_0x728bbc['status'](0xc8)[_0x162656(0x203)]({'message':_0x1cab02[_0x162656(0x1ee)]});}}),router[a0_0x5cef53(0x204)](a0_0x5cef53(0x20e),async(_0x2d8e30,_0x7be6bb)=>{const _0x299705=a0_0x5cef53;try{const _0x14753c=await suppliers[_0x299705(0x201)]({});_0x7be6bb[_0x299705(0x1f0)](0xc8)[_0x299705(0x203)](_0x14753c);}catch(_0x54401f){console[_0x299705(0x1ec)](_0x299705(0x1ff),_0x54401f),_0x7be6bb['status'](0xc8)[_0x299705(0x203)]({'message':_0x54401f[_0x299705(0x1ee)]});}}),router[a0_0x5cef53(0x204)](a0_0x5cef53(0x200),async(_0x2c9294,_0x1b2b05)=>{const _0x51ac97=a0_0x5cef53;try{const {wahouse_data:_0x45448e}=_0x2c9294['body'],_0x1c5ad9=[{'$match':{'name':_0x45448e,'status':_0x51ac97(0x1f9)}},{'$group':{'_id':_0x51ac97(0x1f5),'room_name':{'$first':_0x51ac97(0x1f7)}}},{'$sort':{'room_name':0x1}}],_0x2746de=await warehouse['aggregate'](_0x1c5ad9);_0x1b2b05[_0x51ac97(0x1f0)](0xc8)[_0x51ac97(0x203)](_0x2746de);}catch(_0x4188d7){console[_0x51ac97(0x1ec)](_0x51ac97(0x1ff),_0x4188d7),_0x1b2b05[_0x51ac97(0x1f0)](0xc8)['json']({'message':_0x4188d7[_0x51ac97(0x1ee)]});}}),router['post'](a0_0x5cef53(0x20a),async(_0x243744,_0x32cc05)=>{const _0x2e91ad=a0_0x5cef53;try{const _0x21abc5=0x989680,_0x249b52=0x5f5e0ff,_0x200145=Math[_0x2e91ad(0x205)](Math[_0x2e91ad(0x1f2)]()*(_0x249b52-_0x21abc5+0x1))+_0x21abc5;var _0x49fc3e;const _0x430b0b=await purchases[_0x2e91ad(0x208)]({'invoice':_0x2e91ad(0x1e9)+_0x200145});return _0x430b0b&&_0x430b0b['length']>0x0?_0x49fc3e='INC-'+_0x200145:_0x49fc3e=_0x2e91ad(0x1e9)+_0x200145,_0x32cc05[_0x2e91ad(0x203)]({'incoming_invoice':_0x49fc3e}),_0x49fc3e;}catch(_0x880412){console[_0x2e91ad(0x1ec)](_0x2e91ad(0x1ff),_0x880412),_0x32cc05['status'](0xc8)['json']({'message':_0x880412[_0x2e91ad(0x1ee)]});}}),module[a0_0x5cef53(0x1f1)]=router;