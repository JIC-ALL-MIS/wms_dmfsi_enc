const a0_0x589ab1=a0_0x1c51;(function(_0x4f19b6,_0x5084ac){const _0x26ccaf=a0_0x1c51,_0x50433e=_0x4f19b6();while(!![]){try{const _0x265dab=-parseInt(_0x26ccaf(0x1e7))/0x1+parseInt(_0x26ccaf(0x1f8))/0x2*(parseInt(_0x26ccaf(0x1e6))/0x3)+-parseInt(_0x26ccaf(0x1f3))/0x4+-parseInt(_0x26ccaf(0x1fa))/0x5+-parseInt(_0x26ccaf(0x1e1))/0x6+parseInt(_0x26ccaf(0x201))/0x7*(-parseInt(_0x26ccaf(0x1f7))/0x8)+-parseInt(_0x26ccaf(0x1dc))/0x9*(-parseInt(_0x26ccaf(0x1ef))/0xa);if(_0x265dab===_0x5084ac)break;else _0x50433e['push'](_0x50433e['shift']());}catch(_0x57aadd){_0x50433e['push'](_0x50433e['shift']());}}}(a0_0xa3e5,0xdf358));const express=require('express'),app=express(),router=express[a0_0x589ab1(0x1fc)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x589ab1(0x202)),auth=require(a0_0x589ab1(0x1f4)),nodemailer=require(a0_0x589ab1(0x1f2));function a0_0xa3e5(){const _0x44a231=['45NVwQfR','/invoice','Return\x20Goods','Raw\x20Materials','message','7702122YwyEuV','status','../public/language/languages.json','json','/supplier','1551801LNHYQH','924038DKSLsL','Finished\x20Goods','$_id','$name','body','log','ejs','aggregate','11156210qItHiU','floor','/view','nodemailer','6378376wbbNWF','../middleware/auth','INC-','$room','304AkOBkF','2NEEmei','length','3167095ODYGrH','exports','Router','Enabled','post','table\x20page','find','137305uLUZgj','../models/all_models','findOne','random'];a0_0xa3e5=function(){return _0x44a231;};return a0_0xa3e5();}var ejs=require(a0_0x589ab1(0x1ed));const path=require('path'),users=require(a0_0x589ab1(0x1e3));function a0_0x1c51(_0x9d0c93,_0x547824){const _0xa3e57b=a0_0xa3e5();return a0_0x1c51=function(_0x1c5167,_0x277a4d){_0x1c5167=_0x1c5167-0x1da;let _0x5ec585=_0xa3e57b[_0x1c5167];return _0x5ec585;},a0_0x1c51(_0x9d0c93,_0x547824);}router[a0_0x589ab1(0x1fe)](a0_0x589ab1(0x1f1),async(_0x595c2b,_0x30ba81)=>{const _0x227045=a0_0x589ab1;try{const {warehouse_category:_0x1603fe}=_0x595c2b[_0x227045(0x1eb)];if(_0x1603fe=='RM'){const _0x564d37=await warehouse[_0x227045(0x1ee)]([{'$match':{'status':_0x227045(0x1fd),'warehouse_category':_0x227045(0x1df),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x30ba81['json'](_0x564d37);}else{const _0x492023=await warehouse[_0x227045(0x1ee)]([{'$match':{'status':_0x227045(0x1fd),'warehouse_category':_0x227045(0x1e8),'name':{'$ne':_0x227045(0x1de)}}},{'$group':{'_id':_0x227045(0x1ea),'name':{'$first':_0x227045(0x1ea)}}}]);_0x30ba81[_0x227045(0x1e4)](_0x492023);}}catch(_0x1f05cb){console['log']('table\x20page',_0x1f05cb),_0x30ba81[_0x227045(0x1e2)](0xc8)[_0x227045(0x1e4)]({'message':_0x1f05cb[_0x227045(0x1e0)]});}}),router['post'](a0_0x589ab1(0x1e5),async(_0x54416e,_0x34b172)=>{const _0x1341bb=a0_0x589ab1;try{const _0x8d8232=await suppliers[_0x1341bb(0x200)]({});_0x34b172[_0x1341bb(0x1e2)](0xc8)[_0x1341bb(0x1e4)](_0x8d8232);}catch(_0x9e2e6c){console['log'](_0x1341bb(0x1ff),_0x9e2e6c),_0x34b172['status'](0xc8)[_0x1341bb(0x1e4)]({'message':_0x9e2e6c[_0x1341bb(0x1e0)]});}}),router[a0_0x589ab1(0x1fe)]('/room',async(_0x4810e1,_0x27f17d)=>{const _0x58f533=a0_0x589ab1;try{const {wahouse_data:_0x5d599c}=_0x4810e1[_0x58f533(0x1eb)],_0x3194bf=[{'$match':{'name':_0x5d599c,'status':_0x58f533(0x1fd)}},{'$group':{'_id':_0x58f533(0x1e9),'room_name':{'$first':_0x58f533(0x1f6)}}},{'$sort':{'room_name':0x1}}],_0x317c20=await warehouse[_0x58f533(0x1ee)](_0x3194bf);_0x27f17d[_0x58f533(0x1e2)](0xc8)[_0x58f533(0x1e4)](_0x317c20);}catch(_0x404fa7){console[_0x58f533(0x1ec)](_0x58f533(0x1ff),_0x404fa7),_0x27f17d[_0x58f533(0x1e2)](0xc8)[_0x58f533(0x1e4)]({'message':_0x404fa7[_0x58f533(0x1e0)]});}}),router['post'](a0_0x589ab1(0x1dd),async(_0x15c6d3,_0x414bb8)=>{const _0x58de06=a0_0x589ab1;try{const _0x484185=0x989680,_0x18115d=0x5f5e0ff,_0x3f7f5b=Math[_0x58de06(0x1f0)](Math[_0x58de06(0x1db)]()*(_0x18115d-_0x484185+0x1))+_0x484185;var _0x43b845;const _0x3b3c50=await purchases[_0x58de06(0x1da)]({'invoice':'INC-'+_0x3f7f5b});return _0x3b3c50&&_0x3b3c50[_0x58de06(0x1f9)]>0x0?_0x43b845=_0x58de06(0x1f5)+_0x3f7f5b:_0x43b845=_0x58de06(0x1f5)+_0x3f7f5b,_0x414bb8[_0x58de06(0x1e4)]({'incoming_invoice':_0x43b845}),_0x43b845;}catch(_0x489ca1){console[_0x58de06(0x1ec)](_0x58de06(0x1ff),_0x489ca1),_0x414bb8[_0x58de06(0x1e2)](0xc8)[_0x58de06(0x1e4)]({'message':_0x489ca1[_0x58de06(0x1e0)]});}}),module[a0_0x589ab1(0x1fb)]=router;