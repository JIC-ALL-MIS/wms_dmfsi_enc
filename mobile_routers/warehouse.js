const a0_0x3b9036=a0_0x5266;function a0_0x4fb9(){const _0x3110f6=['json','145XLXelh','14614204mPaElG','7eNLPNP','Raw\x20Materials','224221YFwQLl','log','status','../public/language/languages.json','find','Router','$name','162172qIhFll','aggregate','6286776YNJKgo','/room','10zoGzSS','/view','ejs','/supplier','5491305MZBKMX','path','../middleware/auth','post','3PIwmcW','Return\x20Goods','body','findOne','$room','floor','exports','table\x20page','1132980aKVBeH','message','/invoice','../models/all_models','Enabled','$_id','471890DbUYxB','INC-'];a0_0x4fb9=function(){return _0x3110f6;};return a0_0x4fb9();}(function(_0x33d122,_0x1de8d9){const _0x10b603=a0_0x5266,_0x58827f=_0x33d122();while(!![]){try{const _0x364b44=parseInt(_0x10b603(0xf9))/0x1+-parseInt(_0x10b603(0x11a))/0x2*(-parseInt(_0x10b603(0x10c))/0x3)+-parseInt(_0x10b603(0x100))/0x4*(parseInt(_0x10b603(0x11d))/0x5)+parseInt(_0x10b603(0x114))/0x6+parseInt(_0x10b603(0xf7))/0x7*(-parseInt(_0x10b603(0x102))/0x8)+parseInt(_0x10b603(0x108))/0x9*(parseInt(_0x10b603(0x104))/0xa)+parseInt(_0x10b603(0xf6))/0xb;if(_0x364b44===_0x1de8d9)break;else _0x58827f['push'](_0x58827f['shift']());}catch(_0x470b76){_0x58827f['push'](_0x58827f['shift']());}}}(a0_0x4fb9,0x98dbf));function a0_0x5266(_0x4741e9,_0x387c59){const _0x4fb9e8=a0_0x4fb9();return a0_0x5266=function(_0x52662b,_0x1a5f77){_0x52662b=_0x52662b-0xf6;let _0x32697c=_0x4fb9e8[_0x52662b];return _0x32697c;},a0_0x5266(_0x4741e9,_0x387c59);}const express=require('express'),app=express(),router=express[a0_0x3b9036(0xfe)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x3b9036(0x117)),auth=require(a0_0x3b9036(0x10a)),nodemailer=require('nodemailer');var ejs=require(a0_0x3b9036(0x106));const path=require(a0_0x3b9036(0x109)),users=require(a0_0x3b9036(0xfc));router['post'](a0_0x3b9036(0x105),async(_0x1d5d11,_0x245f0d)=>{const _0x15f22e=a0_0x3b9036;try{const {warehouse_category:_0x484630}=_0x1d5d11[_0x15f22e(0x10e)];if(_0x484630=='RM'){const _0x239248=await warehouse[_0x15f22e(0x101)]([{'$match':{'status':_0x15f22e(0x118),'warehouse_category':_0x15f22e(0xf8),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x15f22e(0xff),'name':{'$first':'$name'}}}]);_0x245f0d['json'](_0x239248);}else{const _0x4c161c=await warehouse[_0x15f22e(0x101)]([{'$match':{'status':_0x15f22e(0x118),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x15f22e(0x10d)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x245f0d[_0x15f22e(0x11c)](_0x4c161c);}}catch(_0x42e8eb){console[_0x15f22e(0xfa)]('table\x20page',_0x42e8eb),_0x245f0d['status'](0xc8)[_0x15f22e(0x11c)]({'message':_0x42e8eb[_0x15f22e(0x115)]});}}),router['post'](a0_0x3b9036(0x107),async(_0xa7289,_0x1f4ee5)=>{const _0x576d6f=a0_0x3b9036;try{const _0x40265e=await suppliers[_0x576d6f(0xfd)]({});_0x1f4ee5['status'](0xc8)[_0x576d6f(0x11c)](_0x40265e);}catch(_0x5c3c2b){console['log'](_0x576d6f(0x113),_0x5c3c2b),_0x1f4ee5[_0x576d6f(0xfb)](0xc8)[_0x576d6f(0x11c)]({'message':_0x5c3c2b[_0x576d6f(0x115)]});}}),router[a0_0x3b9036(0x10b)](a0_0x3b9036(0x103),async(_0x96174d,_0x491ff6)=>{const _0x46818b=a0_0x3b9036;try{const {wahouse_data:_0x25e8fc}=_0x96174d[_0x46818b(0x10e)],_0x4be669=[{'$match':{'name':_0x25e8fc,'status':_0x46818b(0x118)}},{'$group':{'_id':_0x46818b(0x119),'room_name':{'$first':_0x46818b(0x110)}}},{'$sort':{'room_name':0x1}}],_0x51ca8a=await warehouse[_0x46818b(0x101)](_0x4be669);_0x491ff6[_0x46818b(0xfb)](0xc8)[_0x46818b(0x11c)](_0x51ca8a);}catch(_0x30194b){console['log']('table\x20page',_0x30194b),_0x491ff6['status'](0xc8)[_0x46818b(0x11c)]({'message':_0x30194b['message']});}}),router['post'](a0_0x3b9036(0x116),async(_0x52ebe3,_0x457f34)=>{const _0xabb5a9=a0_0x3b9036;try{const _0x29ad21=0x989680,_0x16bd40=0x5f5e0ff,_0x2f3df5=Math[_0xabb5a9(0x111)](Math['random']()*(_0x16bd40-_0x29ad21+0x1))+_0x29ad21;var _0x2f021f;const _0x332a86=await purchases[_0xabb5a9(0x10f)]({'invoice':'INC-'+_0x2f3df5});return _0x332a86&&_0x332a86['length']>0x0?_0x2f021f='INC-'+_0x2f3df5:_0x2f021f=_0xabb5a9(0x11b)+_0x2f3df5,_0x457f34[_0xabb5a9(0x11c)]({'incoming_invoice':_0x2f021f}),_0x2f021f;}catch(_0x510d45){console[_0xabb5a9(0xfa)](_0xabb5a9(0x113),_0x510d45),_0x457f34[_0xabb5a9(0xfb)](0xc8)['json']({'message':_0x510d45[_0xabb5a9(0x115)]});}}),module[a0_0x3b9036(0x112)]=router;