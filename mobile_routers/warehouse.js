const a0_0x58e0fc=a0_0x5c3e;(function(_0x1da74f,_0x3d9377){const _0x23bf16=a0_0x5c3e,_0x46d565=_0x1da74f();while(!![]){try{const _0x4a8ab3=-parseInt(_0x23bf16(0x187))/0x1+parseInt(_0x23bf16(0x191))/0x2+-parseInt(_0x23bf16(0x16f))/0x3+parseInt(_0x23bf16(0x193))/0x4+parseInt(_0x23bf16(0x177))/0x5*(parseInt(_0x23bf16(0x178))/0x6)+-parseInt(_0x23bf16(0x184))/0x7+parseInt(_0x23bf16(0x17d))/0x8;if(_0x4a8ab3===_0x3d9377)break;else _0x46d565['push'](_0x46d565['shift']());}catch(_0x3bce61){_0x46d565['push'](_0x46d565['shift']());}}}(a0_0x5f3d,0x45c02));function a0_0x5f3d(){const _0x5130d5=['2976435bCqPJw','$name','aggregate','132296gUYsoV','Raw\x20Materials','findOne','floor','Enabled','log','INC-','find','../models/all_models','../middleware/auth','630276gvYYnh','Return\x20Goods','469576uWjPPd','826101jUfrdx','length','/invoice','table\x20page','message','$room','json','Router','315340BhPjVC','12UXOmnL','random','path','body','exports','4479184FTuzGs','post','/room','express','../public/language/languages.json','ejs','status'];a0_0x5f3d=function(){return _0x5130d5;};return a0_0x5f3d();}function a0_0x5c3e(_0x201445,_0x39df9c){const _0x5f3dd1=a0_0x5f3d();return a0_0x5c3e=function(_0x5c3eb9,_0x41f665){_0x5c3eb9=_0x5c3eb9-0x16f;let _0x795cf2=_0x5f3dd1[_0x5c3eb9];return _0x795cf2;},a0_0x5c3e(_0x201445,_0x39df9c);}const express=require(a0_0x58e0fc(0x180)),app=express(),router=express[a0_0x58e0fc(0x176)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x58e0fc(0x18f)),auth=require(a0_0x58e0fc(0x190)),nodemailer=require('nodemailer');var ejs=require(a0_0x58e0fc(0x182));const path=require(a0_0x58e0fc(0x17a)),users=require(a0_0x58e0fc(0x181));router[a0_0x58e0fc(0x17e)]('/view',async(_0x2c4c45,_0x532105)=>{const _0xc4f10f=a0_0x58e0fc;try{const {warehouse_category:_0x4ae703}=_0x2c4c45['body'];if(_0x4ae703=='RM'){const _0x1939fa=await warehouse[_0xc4f10f(0x186)]([{'$match':{'status':'Enabled','warehouse_category':_0xc4f10f(0x188),'name':{'$ne':_0xc4f10f(0x192)}}},{'$group':{'_id':_0xc4f10f(0x185),'name':{'$first':'$name'}}}]);_0x532105['json'](_0x1939fa);}else{const _0x503c7a=await warehouse[_0xc4f10f(0x186)]([{'$match':{'status':_0xc4f10f(0x18b),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0xc4f10f(0x192)}}},{'$group':{'_id':_0xc4f10f(0x185),'name':{'$first':_0xc4f10f(0x185)}}}]);_0x532105['json'](_0x503c7a);}}catch(_0x48fead){console['log']('table\x20page',_0x48fead),_0x532105[_0xc4f10f(0x183)](0xc8)[_0xc4f10f(0x175)]({'message':_0x48fead[_0xc4f10f(0x173)]});}}),router['post']('/supplier',async(_0x7c89a2,_0x3dc3db)=>{const _0xe10dc0=a0_0x58e0fc;try{const _0x48b9b8=await suppliers[_0xe10dc0(0x18e)]({});_0x3dc3db[_0xe10dc0(0x183)](0xc8)[_0xe10dc0(0x175)](_0x48b9b8);}catch(_0x2e99b9){console[_0xe10dc0(0x18c)]('table\x20page',_0x2e99b9),_0x3dc3db['status'](0xc8)[_0xe10dc0(0x175)]({'message':_0x2e99b9['message']});}}),router['post'](a0_0x58e0fc(0x17f),async(_0x531ea9,_0x5f246d)=>{const _0x54b1f7=a0_0x58e0fc;try{const {wahouse_data:_0x113686}=_0x531ea9[_0x54b1f7(0x17b)],_0x159c67=[{'$match':{'name':_0x113686,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x54b1f7(0x174)}}},{'$sort':{'room_name':0x1}}],_0x4e896a=await warehouse['aggregate'](_0x159c67);_0x5f246d['status'](0xc8)[_0x54b1f7(0x175)](_0x4e896a);}catch(_0xb75884){console[_0x54b1f7(0x18c)](_0x54b1f7(0x172),_0xb75884),_0x5f246d['status'](0xc8)[_0x54b1f7(0x175)]({'message':_0xb75884[_0x54b1f7(0x173)]});}}),router[a0_0x58e0fc(0x17e)](a0_0x58e0fc(0x171),async(_0x32577d,_0x58e4ec)=>{const _0x58a049=a0_0x58e0fc;try{const _0x1034c2=0x989680,_0x32fb38=0x5f5e0ff,_0x4f2777=Math[_0x58a049(0x18a)](Math[_0x58a049(0x179)]()*(_0x32fb38-_0x1034c2+0x1))+_0x1034c2;var _0xb64379;const _0x123de8=await purchases[_0x58a049(0x189)]({'invoice':_0x58a049(0x18d)+_0x4f2777});return _0x123de8&&_0x123de8[_0x58a049(0x170)]>0x0?_0xb64379=_0x58a049(0x18d)+_0x4f2777:_0xb64379=_0x58a049(0x18d)+_0x4f2777,_0x58e4ec[_0x58a049(0x175)]({'incoming_invoice':_0xb64379}),_0xb64379;}catch(_0x23728e){console[_0x58a049(0x18c)](_0x58a049(0x172),_0x23728e),_0x58e4ec[_0x58a049(0x183)](0xc8)['json']({'message':_0x23728e[_0x58a049(0x173)]});}}),module[a0_0x58e0fc(0x17c)]=router;