const a0_0x11db59=a0_0x224e;(function(_0x2045a7,_0x9082df){const _0x24a241=a0_0x224e,_0x4056b6=_0x2045a7();while(!![]){try{const _0x14fab4=-parseInt(_0x24a241(0x177))/0x1+parseInt(_0x24a241(0x17b))/0x2*(parseInt(_0x24a241(0x16d))/0x3)+-parseInt(_0x24a241(0x174))/0x4*(-parseInt(_0x24a241(0x176))/0x5)+-parseInt(_0x24a241(0x180))/0x6*(-parseInt(_0x24a241(0x169))/0x7)+-parseInt(_0x24a241(0x171))/0x8+-parseInt(_0x24a241(0x178))/0x9+-parseInt(_0x24a241(0x163))/0xa*(-parseInt(_0x24a241(0x15d))/0xb);if(_0x14fab4===_0x9082df)break;else _0x4056b6['push'](_0x4056b6['shift']());}catch(_0x21c0c6){_0x4056b6['push'](_0x4056b6['shift']());}}}(a0_0x2960,0xc1bcc));const express=require(a0_0x11db59(0x15c)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x11db59(0x172)),nodemailer=require('nodemailer');function a0_0x2960(){const _0x4664af=['ejs','30UNlxAy','findOne','$room','../public/language/languages.json','Finished\x20Goods','$_id','21qoqfnA','post','path','status','87qwBNjp','table\x20page','floor','message','12495448LrrWKu','../middleware/auth','body','153880aNvMMq','random','10FbrGUl','1117952SRMeWn','4144212FjqFCB','json','Return\x20Goods','23118yIWIwh','log','exports','Enabled','length','2378148qHWkMf','$name','express','8553138UwqhRS','INC-','Raw\x20Materials','aggregate','/supplier'];a0_0x2960=function(){return _0x4664af;};return a0_0x2960();}var ejs=require(a0_0x11db59(0x162));function a0_0x224e(_0x58ad1f,_0x41464e){const _0x2960b2=a0_0x2960();return a0_0x224e=function(_0x224e7d,_0x4a13c5){_0x224e7d=_0x224e7d-0x15b;let _0x54eeca=_0x2960b2[_0x224e7d];return _0x54eeca;},a0_0x224e(_0x58ad1f,_0x41464e);}const path=require(a0_0x11db59(0x16b)),users=require(a0_0x11db59(0x166));router['post']('/view',async(_0x1efa5f,_0x2a2a41)=>{const _0x4f40ed=a0_0x11db59;try{const {warehouse_category:_0x15abc3}=_0x1efa5f[_0x4f40ed(0x173)];if(_0x15abc3=='RM'){const _0x56263c=await warehouse[_0x4f40ed(0x160)]([{'$match':{'status':'Enabled','warehouse_category':_0x4f40ed(0x15f),'name':{'$ne':_0x4f40ed(0x17a)}}},{'$group':{'_id':'$name','name':{'$first':_0x4f40ed(0x15b)}}}]);_0x2a2a41[_0x4f40ed(0x179)](_0x56263c);}else{const _0x2de2cd=await warehouse['aggregate']([{'$match':{'status':_0x4f40ed(0x17e),'warehouse_category':_0x4f40ed(0x167),'name':{'$ne':_0x4f40ed(0x17a)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x2a2a41[_0x4f40ed(0x179)](_0x2de2cd);}}catch(_0x44ade6){console[_0x4f40ed(0x17c)]('table\x20page',_0x44ade6),_0x2a2a41[_0x4f40ed(0x16c)](0xc8)['json']({'message':_0x44ade6[_0x4f40ed(0x170)]});}}),router[a0_0x11db59(0x16a)](a0_0x11db59(0x161),async(_0x4ebef3,_0x904168)=>{const _0x3a8567=a0_0x11db59;try{const _0x3a613c=await suppliers['find']({});_0x904168[_0x3a8567(0x16c)](0xc8)['json'](_0x3a613c);}catch(_0x9fa766){console[_0x3a8567(0x17c)](_0x3a8567(0x16e),_0x9fa766),_0x904168['status'](0xc8)[_0x3a8567(0x179)]({'message':_0x9fa766[_0x3a8567(0x170)]});}}),router[a0_0x11db59(0x16a)]('/room',async(_0x2a3558,_0x516a33)=>{const _0xf826f8=a0_0x11db59;try{const {wahouse_data:_0x28e940}=_0x2a3558[_0xf826f8(0x173)],_0x319a9d=[{'$match':{'name':_0x28e940,'status':_0xf826f8(0x17e)}},{'$group':{'_id':_0xf826f8(0x168),'room_name':{'$first':_0xf826f8(0x165)}}},{'$sort':{'room_name':0x1}}],_0x4ad9b8=await warehouse['aggregate'](_0x319a9d);_0x516a33[_0xf826f8(0x16c)](0xc8)[_0xf826f8(0x179)](_0x4ad9b8);}catch(_0x1e7be4){console[_0xf826f8(0x17c)](_0xf826f8(0x16e),_0x1e7be4),_0x516a33['status'](0xc8)[_0xf826f8(0x179)]({'message':_0x1e7be4['message']});}}),router[a0_0x11db59(0x16a)]('/invoice',async(_0x11bb23,_0x31f39c)=>{const _0x40c85=a0_0x11db59;try{const _0x1ad18c=0x989680,_0x4bcf7e=0x5f5e0ff,_0x4a93ab=Math[_0x40c85(0x16f)](Math[_0x40c85(0x175)]()*(_0x4bcf7e-_0x1ad18c+0x1))+_0x1ad18c;var _0x4beee4;const _0x443031=await purchases[_0x40c85(0x164)]({'invoice':_0x40c85(0x15e)+_0x4a93ab});return _0x443031&&_0x443031[_0x40c85(0x17f)]>0x0?_0x4beee4=_0x40c85(0x15e)+_0x4a93ab:_0x4beee4=_0x40c85(0x15e)+_0x4a93ab,_0x31f39c[_0x40c85(0x179)]({'incoming_invoice':_0x4beee4}),_0x4beee4;}catch(_0xd6fa70){console[_0x40c85(0x17c)]('table\x20page',_0xd6fa70),_0x31f39c[_0x40c85(0x16c)](0xc8)[_0x40c85(0x179)]({'message':_0xd6fa70['message']});}}),module[a0_0x11db59(0x17d)]=router;