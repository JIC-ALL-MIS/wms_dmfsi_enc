const a0_0x2e40fe=a0_0x3283;function a0_0x3283(_0x38e7e5,_0x46e83b){const _0x215dc7=a0_0x215d();return a0_0x3283=function(_0x32836e,_0x2e7fa2){_0x32836e=_0x32836e-0xd2;let _0x3cc9b1=_0x215dc7[_0x32836e];return _0x3cc9b1;},a0_0x3283(_0x38e7e5,_0x46e83b);}function a0_0x215d(){const _0x3028f4=['ejs','Router','374284CwPpbA','../models/all_models','$name','390oMfyOA','/supplier','$_id','random','floor','exports','Raw\x20Materials','/invoice','113988PMoIJj','238634fPlGMH','/view','find','1552935xGuctc','log','$room','length','json','9ViuQNF','aggregate','body','27jeDoQm','INC-','status','path','Enabled','../middleware/auth','896296ryafvz','table\x20page','2155174MAFcYW','338970VzGgFz','post','Finished\x20Goods','message','express','Return\x20Goods','6TAVqSd','nodemailer'];a0_0x215d=function(){return _0x3028f4;};return a0_0x215d();}(function(_0x26f16d,_0x3a5ca3){const _0x148e29=a0_0x3283,_0x414a7b=_0x26f16d();while(!![]){try{const _0x1d6029=-parseInt(_0x148e29(0xf3))/0x1+-parseInt(_0x148e29(0xd3))/0x2+-parseInt(_0x148e29(0xea))/0x3*(parseInt(_0x148e29(0xde))/0x4)+-parseInt(_0x148e29(0xe2))/0x5*(parseInt(_0x148e29(0xf9))/0x6)+parseInt(_0x148e29(0xf2))/0x7+parseInt(_0x148e29(0xf0))/0x8*(parseInt(_0x148e29(0xe7))/0x9)+parseInt(_0x148e29(0xd6))/0xa*(parseInt(_0x148e29(0xdf))/0xb);if(_0x1d6029===_0x3a5ca3)break;else _0x414a7b['push'](_0x414a7b['shift']());}catch(_0x3eaa4b){_0x414a7b['push'](_0x414a7b['shift']());}}}(a0_0x215d,0x2a30d));const express=require(a0_0x2e40fe(0xf7)),app=express(),router=express[a0_0x2e40fe(0xd2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x2e40fe(0xd4)),auth=require(a0_0x2e40fe(0xef)),nodemailer=require(a0_0x2e40fe(0xfa));var ejs=require(a0_0x2e40fe(0xfb));const path=require(a0_0x2e40fe(0xed)),users=require('../public/language/languages.json');router[a0_0x2e40fe(0xf4)](a0_0x2e40fe(0xe0),async(_0x121817,_0x4ff752)=>{const _0xf729c3=a0_0x2e40fe;try{const {warehouse_category:_0x8c4865}=_0x121817['body'];if(_0x8c4865=='RM'){const _0x347de2=await warehouse[_0xf729c3(0xe8)]([{'$match':{'status':_0xf729c3(0xee),'warehouse_category':_0xf729c3(0xdc),'name':{'$ne':_0xf729c3(0xf8)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x4ff752['json'](_0x347de2);}else{const _0xc7a0cb=await warehouse[_0xf729c3(0xe8)]([{'$match':{'status':_0xf729c3(0xee),'warehouse_category':_0xf729c3(0xf5),'name':{'$ne':_0xf729c3(0xf8)}}},{'$group':{'_id':_0xf729c3(0xd5),'name':{'$first':_0xf729c3(0xd5)}}}]);_0x4ff752[_0xf729c3(0xe6)](_0xc7a0cb);}}catch(_0x265529){console[_0xf729c3(0xe3)](_0xf729c3(0xf1),_0x265529),_0x4ff752[_0xf729c3(0xec)](0xc8)[_0xf729c3(0xe6)]({'message':_0x265529[_0xf729c3(0xf6)]});}}),router[a0_0x2e40fe(0xf4)](a0_0x2e40fe(0xd7),async(_0x45517e,_0x3221b1)=>{const _0x3289cf=a0_0x2e40fe;try{const _0x85040f=await suppliers[_0x3289cf(0xe1)]({});_0x3221b1[_0x3289cf(0xec)](0xc8)['json'](_0x85040f);}catch(_0x220350){console[_0x3289cf(0xe3)](_0x3289cf(0xf1),_0x220350),_0x3221b1[_0x3289cf(0xec)](0xc8)[_0x3289cf(0xe6)]({'message':_0x220350[_0x3289cf(0xf6)]});}}),router[a0_0x2e40fe(0xf4)]('/room',async(_0x112d32,_0x15d470)=>{const _0x2af846=a0_0x2e40fe;try{const {wahouse_data:_0x45c19a}=_0x112d32[_0x2af846(0xe9)],_0x458551=[{'$match':{'name':_0x45c19a,'status':'Enabled'}},{'$group':{'_id':_0x2af846(0xd8),'room_name':{'$first':_0x2af846(0xe4)}}},{'$sort':{'room_name':0x1}}],_0x45266f=await warehouse[_0x2af846(0xe8)](_0x458551);_0x15d470[_0x2af846(0xec)](0xc8)[_0x2af846(0xe6)](_0x45266f);}catch(_0x305c3e){console[_0x2af846(0xe3)](_0x2af846(0xf1),_0x305c3e),_0x15d470[_0x2af846(0xec)](0xc8)[_0x2af846(0xe6)]({'message':_0x305c3e[_0x2af846(0xf6)]});}}),router[a0_0x2e40fe(0xf4)](a0_0x2e40fe(0xdd),async(_0x3ceac7,_0x38ca8f)=>{const _0x2f1e04=a0_0x2e40fe;try{const _0x2a8cd6=0x989680,_0x23fd15=0x5f5e0ff,_0x5b33ce=Math[_0x2f1e04(0xda)](Math[_0x2f1e04(0xd9)]()*(_0x23fd15-_0x2a8cd6+0x1))+_0x2a8cd6;var _0x2b1a0b;const _0x36c3bf=await purchases['findOne']({'invoice':_0x2f1e04(0xeb)+_0x5b33ce});return _0x36c3bf&&_0x36c3bf[_0x2f1e04(0xe5)]>0x0?_0x2b1a0b=_0x2f1e04(0xeb)+_0x5b33ce:_0x2b1a0b='INC-'+_0x5b33ce,_0x38ca8f[_0x2f1e04(0xe6)]({'incoming_invoice':_0x2b1a0b}),_0x2b1a0b;}catch(_0x34ae68){console['log'](_0x2f1e04(0xf1),_0x34ae68),_0x38ca8f[_0x2f1e04(0xec)](0xc8)[_0x2f1e04(0xe6)]({'message':_0x34ae68[_0x2f1e04(0xf6)]});}}),module[a0_0x2e40fe(0xdb)]=router;