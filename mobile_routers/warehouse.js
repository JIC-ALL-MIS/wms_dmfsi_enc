function a0_0x35fc(){const _0x53b21f=['901537NrlYtL','Enabled','../models/all_models','nodemailer','express','/view','json','/room','table\x20page','aggregate','841aMAACH','log','$_id','Router','status','Raw\x20Materials','post','/supplier','length','message','../middleware/auth','path','2802060UDZVfA','270736ZCTCbS','find','../public/language/languages.json','Finished\x20Goods','$name','Return\x20Goods','36RXzgdx','random','430FUusIW','220548iswULw','INC-','ejs','281526bkqCjj','764gHOMbF','7386RjLUwS'];a0_0x35fc=function(){return _0x53b21f;};return a0_0x35fc();}const a0_0x424ae2=a0_0x353a;(function(_0x2761bd,_0x2cec90){const _0x56d911=a0_0x353a,_0x65a1b6=_0x2761bd();while(!![]){try{const _0x25a7c1=parseInt(_0x56d911(0x1c8))/0x1*(parseInt(_0x56d911(0x1bc))/0x2)+-parseInt(_0x56d911(0x1bb))/0x3+-parseInt(_0x56d911(0x1b8))/0x4+parseInt(_0x56d911(0x1b7))/0x5*(parseInt(_0x56d911(0x1bd))/0x6)+-parseInt(_0x56d911(0x1be))/0x7+-parseInt(_0x56d911(0x1af))/0x8*(parseInt(_0x56d911(0x1b5))/0x9)+parseInt(_0x56d911(0x1ae))/0xa;if(_0x25a7c1===_0x2cec90)break;else _0x65a1b6['push'](_0x65a1b6['shift']());}catch(_0x353617){_0x65a1b6['push'](_0x65a1b6['shift']());}}}(a0_0x35fc,0x47d34));const express=require(a0_0x424ae2(0x1c2)),app=express(),router=express[a0_0x424ae2(0x1a5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x424ae2(0x1c0)),auth=require(a0_0x424ae2(0x1ac)),nodemailer=require(a0_0x424ae2(0x1c1));function a0_0x353a(_0x3414d5,_0x3d2545){const _0x35fc16=a0_0x35fc();return a0_0x353a=function(_0x353acc,_0x40ac36){_0x353acc=_0x353acc-0x1a5;let _0x4abb80=_0x35fc16[_0x353acc];return _0x4abb80;},a0_0x353a(_0x3414d5,_0x3d2545);}var ejs=require(a0_0x424ae2(0x1ba));const path=require(a0_0x424ae2(0x1ad)),users=require(a0_0x424ae2(0x1b1));router['post'](a0_0x424ae2(0x1c3),async(_0x51c372,_0x3bd829)=>{const _0x3a7ddf=a0_0x424ae2;try{const {warehouse_category:_0x15cf5b}=_0x51c372['body'];if(_0x15cf5b=='RM'){const _0x5a6663=await warehouse[_0x3a7ddf(0x1c7)]([{'$match':{'status':_0x3a7ddf(0x1bf),'warehouse_category':_0x3a7ddf(0x1a7),'name':{'$ne':_0x3a7ddf(0x1b4)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);_0x3bd829['json'](_0x5a6663);}else{const _0x29eacd=await warehouse[_0x3a7ddf(0x1c7)]([{'$match':{'status':_0x3a7ddf(0x1bf),'warehouse_category':_0x3a7ddf(0x1b2),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x3a7ddf(0x1b3),'name':{'$first':_0x3a7ddf(0x1b3)}}}]);_0x3bd829[_0x3a7ddf(0x1c4)](_0x29eacd);}}catch(_0x2d2e12){console[_0x3a7ddf(0x1c9)](_0x3a7ddf(0x1c6),_0x2d2e12),_0x3bd829[_0x3a7ddf(0x1a6)](0xc8)[_0x3a7ddf(0x1c4)]({'message':_0x2d2e12[_0x3a7ddf(0x1ab)]});}}),router[a0_0x424ae2(0x1a8)](a0_0x424ae2(0x1a9),async(_0x143bc2,_0x5eae02)=>{const _0x376800=a0_0x424ae2;try{const _0x46a4d0=await suppliers[_0x376800(0x1b0)]({});_0x5eae02[_0x376800(0x1a6)](0xc8)[_0x376800(0x1c4)](_0x46a4d0);}catch(_0x31f4b9){console['log'](_0x376800(0x1c6),_0x31f4b9),_0x5eae02[_0x376800(0x1a6)](0xc8)['json']({'message':_0x31f4b9['message']});}}),router[a0_0x424ae2(0x1a8)](a0_0x424ae2(0x1c5),async(_0xc4a867,_0xecfa45)=>{const _0x1c46ce=a0_0x424ae2;try{const {wahouse_data:_0xa6dd64}=_0xc4a867['body'],_0x4d26bc=[{'$match':{'name':_0xa6dd64,'status':_0x1c46ce(0x1bf)}},{'$group':{'_id':_0x1c46ce(0x1ca),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x4348a3=await warehouse[_0x1c46ce(0x1c7)](_0x4d26bc);_0xecfa45['status'](0xc8)['json'](_0x4348a3);}catch(_0xd1f928){console[_0x1c46ce(0x1c9)]('table\x20page',_0xd1f928),_0xecfa45[_0x1c46ce(0x1a6)](0xc8)['json']({'message':_0xd1f928[_0x1c46ce(0x1ab)]});}}),router['post']('/invoice',async(_0x4a8bf5,_0x270fd9)=>{const _0x42ddd8=a0_0x424ae2;try{const _0x5bc890=0x989680,_0x2b9ad4=0x5f5e0ff,_0x5a8478=Math['floor'](Math[_0x42ddd8(0x1b6)]()*(_0x2b9ad4-_0x5bc890+0x1))+_0x5bc890;var _0x5a3059;const _0x51e397=await purchases['findOne']({'invoice':_0x42ddd8(0x1b9)+_0x5a8478});return _0x51e397&&_0x51e397[_0x42ddd8(0x1aa)]>0x0?_0x5a3059='INC-'+_0x5a8478:_0x5a3059=_0x42ddd8(0x1b9)+_0x5a8478,_0x270fd9['json']({'incoming_invoice':_0x5a3059}),_0x5a3059;}catch(_0x489ec4){console[_0x42ddd8(0x1c9)](_0x42ddd8(0x1c6),_0x489ec4),_0x270fd9[_0x42ddd8(0x1a6)](0xc8)[_0x42ddd8(0x1c4)]({'message':_0x489ec4[_0x42ddd8(0x1ab)]});}}),module['exports']=router;