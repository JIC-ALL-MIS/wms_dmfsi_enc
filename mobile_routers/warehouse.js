const a0_0x7945b=a0_0x5b29;function a0_0x1ebd(){const _0x12be74=['nodemailer','INC-','log','Finished\x20Goods','length','ejs','1698750zKJwOg','random','exports','table\x20page','../middleware/auth','Return\x20Goods','106772qhZhmU','$name','path','1902551YTJeQk','status','find','/invoice','json','480294wFWlAu','express','post','6187446ZqVTBz','$_id','floor','body','Enabled','3iRvDFo','$room','aggregate','/view','Raw\x20Materials','message','2211984ybtkYn','../models/all_models','243795CKIRsP','8SwBnty'];a0_0x1ebd=function(){return _0x12be74;};return a0_0x1ebd();}(function(_0x330a53,_0x506ccb){const _0x200985=a0_0x5b29,_0x3f01e2=_0x330a53();while(!![]){try{const _0x5b91ec=-parseInt(_0x200985(0x137))/0x1+parseInt(_0x200985(0x14d))/0x2*(parseInt(_0x200985(0x155))/0x3)+-parseInt(_0x200985(0x145))/0x4+-parseInt(_0x200985(0x13f))/0x5+-parseInt(_0x200985(0x15b))/0x6+-parseInt(_0x200985(0x148))/0x7*(-parseInt(_0x200985(0x138))/0x8)+parseInt(_0x200985(0x150))/0x9;if(_0x5b91ec===_0x506ccb)break;else _0x3f01e2['push'](_0x3f01e2['shift']());}catch(_0x52f784){_0x3f01e2['push'](_0x3f01e2['shift']());}}}(a0_0x1ebd,0x35d74));const express=require(a0_0x7945b(0x14e)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x7945b(0x15c)),auth=require(a0_0x7945b(0x143)),nodemailer=require(a0_0x7945b(0x139));var ejs=require(a0_0x7945b(0x13e));const path=require(a0_0x7945b(0x147)),users=require('../public/language/languages.json');function a0_0x5b29(_0x466ebb,_0x3e2ec4){const _0x1ebd89=a0_0x1ebd();return a0_0x5b29=function(_0x5b2919,_0x2bb62d){_0x5b2919=_0x5b2919-0x137;let _0x2c9eff=_0x1ebd89[_0x5b2919];return _0x2c9eff;},a0_0x5b29(_0x466ebb,_0x3e2ec4);}router[a0_0x7945b(0x14f)](a0_0x7945b(0x158),async(_0x1657a5,_0x5f2712)=>{const _0x3c1a5e=a0_0x7945b;try{const {warehouse_category:_0x66f6c8}=_0x1657a5[_0x3c1a5e(0x153)];if(_0x66f6c8=='RM'){const _0x1bf71b=await warehouse['aggregate']([{'$match':{'status':_0x3c1a5e(0x154),'warehouse_category':_0x3c1a5e(0x159),'name':{'$ne':_0x3c1a5e(0x144)}}},{'$group':{'_id':_0x3c1a5e(0x146),'name':{'$first':_0x3c1a5e(0x146)}}}]);_0x5f2712[_0x3c1a5e(0x14c)](_0x1bf71b);}else{const _0x391598=await warehouse['aggregate']([{'$match':{'status':_0x3c1a5e(0x154),'warehouse_category':_0x3c1a5e(0x13c),'name':{'$ne':_0x3c1a5e(0x144)}}},{'$group':{'_id':_0x3c1a5e(0x146),'name':{'$first':_0x3c1a5e(0x146)}}}]);_0x5f2712[_0x3c1a5e(0x14c)](_0x391598);}}catch(_0x4cbf82){console[_0x3c1a5e(0x13b)](_0x3c1a5e(0x142),_0x4cbf82),_0x5f2712[_0x3c1a5e(0x149)](0xc8)['json']({'message':_0x4cbf82[_0x3c1a5e(0x15a)]});}}),router[a0_0x7945b(0x14f)]('/supplier',async(_0x41e766,_0x566116)=>{const _0x445305=a0_0x7945b;try{const _0x4bff9c=await suppliers[_0x445305(0x14a)]({});_0x566116[_0x445305(0x149)](0xc8)[_0x445305(0x14c)](_0x4bff9c);}catch(_0x1e3f3c){console[_0x445305(0x13b)](_0x445305(0x142),_0x1e3f3c),_0x566116[_0x445305(0x149)](0xc8)[_0x445305(0x14c)]({'message':_0x1e3f3c[_0x445305(0x15a)]});}}),router['post']('/room',async(_0x2656b5,_0x5b5100)=>{const _0x4036d8=a0_0x7945b;try{const {wahouse_data:_0x5054f7}=_0x2656b5[_0x4036d8(0x153)],_0x2e862f=[{'$match':{'name':_0x5054f7,'status':'Enabled'}},{'$group':{'_id':_0x4036d8(0x151),'room_name':{'$first':_0x4036d8(0x156)}}},{'$sort':{'room_name':0x1}}],_0x2f84ca=await warehouse[_0x4036d8(0x157)](_0x2e862f);_0x5b5100[_0x4036d8(0x149)](0xc8)[_0x4036d8(0x14c)](_0x2f84ca);}catch(_0x1e120e){console['log'](_0x4036d8(0x142),_0x1e120e),_0x5b5100[_0x4036d8(0x149)](0xc8)[_0x4036d8(0x14c)]({'message':_0x1e120e[_0x4036d8(0x15a)]});}}),router[a0_0x7945b(0x14f)](a0_0x7945b(0x14b),async(_0x3ad210,_0x55b959)=>{const _0x1a465a=a0_0x7945b;try{const _0x4be670=0x989680,_0x378030=0x5f5e0ff,_0x238267=Math[_0x1a465a(0x152)](Math[_0x1a465a(0x140)]()*(_0x378030-_0x4be670+0x1))+_0x4be670;var _0x491d9e;const _0x33d239=await purchases['findOne']({'invoice':_0x1a465a(0x13a)+_0x238267});return _0x33d239&&_0x33d239[_0x1a465a(0x13d)]>0x0?_0x491d9e=_0x1a465a(0x13a)+_0x238267:_0x491d9e='INC-'+_0x238267,_0x55b959[_0x1a465a(0x14c)]({'incoming_invoice':_0x491d9e}),_0x491d9e;}catch(_0x1c5547){console[_0x1a465a(0x13b)](_0x1a465a(0x142),_0x1c5547),_0x55b959['status'](0xc8)[_0x1a465a(0x14c)]({'message':_0x1c5547[_0x1a465a(0x15a)]});}}),module[a0_0x7945b(0x141)]=router;