const a0_0x877771=a0_0x4ba6;(function(_0x1e9efe,_0x13e067){const _0x5c0831=a0_0x4ba6,_0x3beed1=_0x1e9efe();while(!![]){try{const _0x338c09=parseInt(_0x5c0831(0x126))/0x1*(-parseInt(_0x5c0831(0x10a))/0x2)+-parseInt(_0x5c0831(0x121))/0x3+-parseInt(_0x5c0831(0x112))/0x4+-parseInt(_0x5c0831(0x10e))/0x5*(-parseInt(_0x5c0831(0x11a))/0x6)+parseInt(_0x5c0831(0x10c))/0x7*(parseInt(_0x5c0831(0x11d))/0x8)+-parseInt(_0x5c0831(0x124))/0x9+parseInt(_0x5c0831(0x116))/0xa*(parseInt(_0x5c0831(0x113))/0xb);if(_0x338c09===_0x13e067)break;else _0x3beed1['push'](_0x3beed1['shift']());}catch(_0x2acf0a){_0x3beed1['push'](_0x3beed1['shift']());}}}(a0_0x2334,0xbd7b6));const express=require(a0_0x877771(0x110)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x877771(0x101)),auth=require(a0_0x877771(0x125)),nodemailer=require(a0_0x877771(0x105));function a0_0x2334(){const _0x2a4716=['$name','express','status','5322284AqmKCP','209ubCpiD','/room','exports','1553290hWfSgD','json','Return\x20Goods','body','168aKbeIB','post','aggregate','90472OlFoIa','ejs','../public/language/languages.json','findOne','2869281rVHrmo','INC-','$_id','13635387WRAvIT','../middleware/auth','47UcCYgK','Finished\x20Goods','/view','/supplier','../models/all_models','path','table\x20page','log','nodemailer','find','/invoice','length','Raw\x20Materials','25388WGAhdD','Enabled','742ciUMaK','message','182995QAKKil'];a0_0x2334=function(){return _0x2a4716;};return a0_0x2334();}var ejs=require(a0_0x877771(0x11e));const path=require(a0_0x877771(0x102)),users=require(a0_0x877771(0x11f));function a0_0x4ba6(_0xfff817,_0x5a535){const _0x233499=a0_0x2334();return a0_0x4ba6=function(_0x4ba61f,_0x43ffb6){_0x4ba61f=_0x4ba61f-0xff;let _0xb6ca25=_0x233499[_0x4ba61f];return _0xb6ca25;},a0_0x4ba6(_0xfff817,_0x5a535);}router[a0_0x877771(0x11b)](a0_0x877771(0xff),async(_0x24d052,_0x1f07a9)=>{const _0x2f9886=a0_0x877771;try{const {warehouse_category:_0x4e7bc8}=_0x24d052['body'];if(_0x4e7bc8=='RM'){const _0xd371cc=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x2f9886(0x109),'name':{'$ne':_0x2f9886(0x118)}}},{'$group':{'_id':_0x2f9886(0x10f),'name':{'$first':_0x2f9886(0x10f)}}}]);_0x1f07a9[_0x2f9886(0x117)](_0xd371cc);}else{const _0x52dbc1=await warehouse['aggregate']([{'$match':{'status':_0x2f9886(0x10b),'warehouse_category':_0x2f9886(0x127),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':'$name','name':{'$first':_0x2f9886(0x10f)}}}]);_0x1f07a9[_0x2f9886(0x117)](_0x52dbc1);}}catch(_0x2eb0ee){console[_0x2f9886(0x104)](_0x2f9886(0x103),_0x2eb0ee),_0x1f07a9[_0x2f9886(0x111)](0xc8)[_0x2f9886(0x117)]({'message':_0x2eb0ee[_0x2f9886(0x10d)]});}}),router['post'](a0_0x877771(0x100),async(_0x5960e7,_0x1f539b)=>{const _0x446446=a0_0x877771;try{const _0x232cce=await suppliers[_0x446446(0x106)]({});_0x1f539b[_0x446446(0x111)](0xc8)['json'](_0x232cce);}catch(_0x3e72f7){console[_0x446446(0x104)](_0x446446(0x103),_0x3e72f7),_0x1f539b['status'](0xc8)[_0x446446(0x117)]({'message':_0x3e72f7[_0x446446(0x10d)]});}}),router[a0_0x877771(0x11b)](a0_0x877771(0x114),async(_0x4671cd,_0x397d01)=>{const _0x2db521=a0_0x877771;try{const {wahouse_data:_0x312b0c}=_0x4671cd[_0x2db521(0x119)],_0x39fb30=[{'$match':{'name':_0x312b0c,'status':_0x2db521(0x10b)}},{'$group':{'_id':_0x2db521(0x123),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x197517=await warehouse[_0x2db521(0x11c)](_0x39fb30);_0x397d01['status'](0xc8)[_0x2db521(0x117)](_0x197517);}catch(_0x196117){console['log'](_0x2db521(0x103),_0x196117),_0x397d01[_0x2db521(0x111)](0xc8)['json']({'message':_0x196117['message']});}}),router[a0_0x877771(0x11b)](a0_0x877771(0x107),async(_0x194d83,_0x256856)=>{const _0x2f7bcc=a0_0x877771;try{const _0x5095f=0x989680,_0x49f6a5=0x5f5e0ff,_0x385808=Math['floor'](Math['random']()*(_0x49f6a5-_0x5095f+0x1))+_0x5095f;var _0x2ab9ad;const _0x1b0764=await purchases[_0x2f7bcc(0x120)]({'invoice':_0x2f7bcc(0x122)+_0x385808});return _0x1b0764&&_0x1b0764[_0x2f7bcc(0x108)]>0x0?_0x2ab9ad=_0x2f7bcc(0x122)+_0x385808:_0x2ab9ad='INC-'+_0x385808,_0x256856[_0x2f7bcc(0x117)]({'incoming_invoice':_0x2ab9ad}),_0x2ab9ad;}catch(_0x2779b1){console[_0x2f7bcc(0x104)]('table\x20page',_0x2779b1),_0x256856[_0x2f7bcc(0x111)](0xc8)[_0x2f7bcc(0x117)]({'message':_0x2779b1[_0x2f7bcc(0x10d)]});}}),module[a0_0x877771(0x115)]=router;