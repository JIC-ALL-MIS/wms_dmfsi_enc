const a0_0x390354=a0_0x2fd3;(function(_0x44e149,_0xdd0412){const _0x40f48e=a0_0x2fd3,_0x2aa400=_0x44e149();while(!![]){try{const _0x58fd35=parseInt(_0x40f48e(0x1c8))/0x1*(parseInt(_0x40f48e(0x1be))/0x2)+parseInt(_0x40f48e(0x1bf))/0x3*(-parseInt(_0x40f48e(0x1c5))/0x4)+parseInt(_0x40f48e(0x1c9))/0x5*(parseInt(_0x40f48e(0x1c3))/0x6)+-parseInt(_0x40f48e(0x1b2))/0x7+parseInt(_0x40f48e(0x1bc))/0x8*(-parseInt(_0x40f48e(0x1a4))/0x9)+-parseInt(_0x40f48e(0x1a7))/0xa+-parseInt(_0x40f48e(0x1ae))/0xb*(-parseInt(_0x40f48e(0x1b0))/0xc);if(_0x58fd35===_0xdd0412)break;else _0x2aa400['push'](_0x2aa400['shift']());}catch(_0x26f450){_0x2aa400['push'](_0x2aa400['shift']());}}}(a0_0x5a1a,0x2bd4f));function a0_0x2fd3(_0x1500c4,_0x3b8833){const _0x5a1a22=a0_0x5a1a();return a0_0x2fd3=function(_0x2fd369,_0x1796a8){_0x2fd369=_0x2fd369-0x1a4;let _0x2efc49=_0x5a1a22[_0x2fd369];return _0x2efc49;},a0_0x2fd3(_0x1500c4,_0x3b8833);}const express=require(a0_0x390354(0x1ad)),app=express(),router=express[a0_0x390354(0x1b8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require(a0_0x390354(0x1b5));function a0_0x5a1a(){const _0x1482f6=['$room','795miBquu','5RLLIkj','$_id','2732733UuesDW','$name','../public/language/languages.json','1971610iChkmJ','post','random','length','Finished\x20Goods','aggregate','express','11EanTXe','status','4025544XxhjaP','body','366163rLHXKc','ejs','/view','nodemailer','find','/supplier','Router','INC-','json','log','8yVljeN','floor','286rLeuGN','20658NfmkvY','message','table\x20page','findOne','1783602DZXwLT','exports','8CsUapI','Enabled'];a0_0x5a1a=function(){return _0x1482f6;};return a0_0x5a1a();}var ejs=require(a0_0x390354(0x1b3));const path=require('path'),users=require(a0_0x390354(0x1a6));router[a0_0x390354(0x1a8)](a0_0x390354(0x1b4),async(_0x579cab,_0x5be181)=>{const _0x1fcf97=a0_0x390354;try{const {warehouse_category:_0x568d3b}=_0x579cab[_0x1fcf97(0x1b1)];if(_0x568d3b=='RM'){const _0x431e74=await warehouse[_0x1fcf97(0x1ac)]([{'$match':{'status':_0x1fcf97(0x1c6),'warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x1fcf97(0x1a5),'name':{'$first':_0x1fcf97(0x1a5)}}}]);_0x5be181[_0x1fcf97(0x1ba)](_0x431e74);}else{const _0x407145=await warehouse[_0x1fcf97(0x1ac)]([{'$match':{'status':_0x1fcf97(0x1c6),'warehouse_category':_0x1fcf97(0x1ab),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x1fcf97(0x1a5),'name':{'$first':'$name'}}}]);_0x5be181[_0x1fcf97(0x1ba)](_0x407145);}}catch(_0x479b83){console[_0x1fcf97(0x1bb)](_0x1fcf97(0x1c1),_0x479b83),_0x5be181[_0x1fcf97(0x1af)](0xc8)[_0x1fcf97(0x1ba)]({'message':_0x479b83[_0x1fcf97(0x1c0)]});}}),router['post'](a0_0x390354(0x1b7),async(_0x420d2b,_0x42e0dd)=>{const _0x27af11=a0_0x390354;try{const _0x3e5500=await suppliers[_0x27af11(0x1b6)]({});_0x42e0dd[_0x27af11(0x1af)](0xc8)[_0x27af11(0x1ba)](_0x3e5500);}catch(_0x57c759){console['log']('table\x20page',_0x57c759),_0x42e0dd[_0x27af11(0x1af)](0xc8)[_0x27af11(0x1ba)]({'message':_0x57c759[_0x27af11(0x1c0)]});}}),router[a0_0x390354(0x1a8)]('/room',async(_0x3095d8,_0x506c4b)=>{const _0x2fb2a4=a0_0x390354;try{const {wahouse_data:_0x2472d7}=_0x3095d8[_0x2fb2a4(0x1b1)],_0x465258=[{'$match':{'name':_0x2472d7,'status':'Enabled'}},{'$group':{'_id':_0x2fb2a4(0x1ca),'room_name':{'$first':_0x2fb2a4(0x1c7)}}},{'$sort':{'room_name':0x1}}],_0x5a0d15=await warehouse[_0x2fb2a4(0x1ac)](_0x465258);_0x506c4b['status'](0xc8)[_0x2fb2a4(0x1ba)](_0x5a0d15);}catch(_0x22f044){console[_0x2fb2a4(0x1bb)]('table\x20page',_0x22f044),_0x506c4b[_0x2fb2a4(0x1af)](0xc8)[_0x2fb2a4(0x1ba)]({'message':_0x22f044[_0x2fb2a4(0x1c0)]});}}),router[a0_0x390354(0x1a8)]('/invoice',async(_0x237ffc,_0x580f33)=>{const _0x191729=a0_0x390354;try{const _0x7bd65c=0x989680,_0x17d648=0x5f5e0ff,_0x419c89=Math[_0x191729(0x1bd)](Math[_0x191729(0x1a9)]()*(_0x17d648-_0x7bd65c+0x1))+_0x7bd65c;var _0x187def;const _0x438120=await purchases[_0x191729(0x1c2)]({'invoice':_0x191729(0x1b9)+_0x419c89});return _0x438120&&_0x438120[_0x191729(0x1aa)]>0x0?_0x187def=_0x191729(0x1b9)+_0x419c89:_0x187def=_0x191729(0x1b9)+_0x419c89,_0x580f33['json']({'incoming_invoice':_0x187def}),_0x187def;}catch(_0x182f29){console['log'](_0x191729(0x1c1),_0x182f29),_0x580f33[_0x191729(0x1af)](0xc8)[_0x191729(0x1ba)]({'message':_0x182f29['message']});}}),module[a0_0x390354(0x1c4)]=router;