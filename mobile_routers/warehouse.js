const a0_0x241661=a0_0x15ec;function a0_0xa2e8(){const _0x4c888a=['post','../middleware/auth','find','/room','aggregate','Return\x20Goods','exports','Router','9433361EMUvwj','../models/all_models','message','6444kvZXxj','33NKNKGN','body','482978aREzSU','table\x20page','590WtYYpp','ejs','$_id','8576jlXwPY','/supplier','2494876eLgpnS','path','random','log','$name','json','1407VuJjpn','$room','Raw\x20Materials','70254XFZywa','express','status','findOne','Enabled','nodemailer','14152pcIuoh','7580270VJhzKn','Finished\x20Goods','/invoice','INC-','length'];a0_0xa2e8=function(){return _0x4c888a;};return a0_0xa2e8();}(function(_0x1bf302,_0xa28487){const _0x221c4b=a0_0x15ec,_0x170a55=_0x1bf302();while(!![]){try{const _0x408f66=-parseInt(_0x221c4b(0xe1))/0x1+parseInt(_0x221c4b(0xe8))/0x2+-parseInt(_0x221c4b(0xee))/0x3*(-parseInt(_0x221c4b(0xe6))/0x4)+-parseInt(_0x221c4b(0xe3))/0x5*(-parseInt(_0x221c4b(0xf1))/0x6)+-parseInt(_0x221c4b(0xdb))/0x7+-parseInt(_0x221c4b(0xcd))/0x8*(-parseInt(_0x221c4b(0xde))/0x9)+parseInt(_0x221c4b(0xce))/0xa*(-parseInt(_0x221c4b(0xdf))/0xb);if(_0x408f66===_0xa28487)break;else _0x170a55['push'](_0x170a55['shift']());}catch(_0x3abd55){_0x170a55['push'](_0x170a55['shift']());}}}(a0_0xa2e8,0xc278e));function a0_0x15ec(_0x27a30a,_0x4e7276){const _0xa2e80a=a0_0xa2e8();return a0_0x15ec=function(_0x15ec5c,_0x3311f2){_0x15ec5c=_0x15ec5c-0xc9;let _0x33af4c=_0xa2e80a[_0x15ec5c];return _0x33af4c;},a0_0x15ec(_0x27a30a,_0x4e7276);}const express=require(a0_0x241661(0xf2)),app=express(),router=express[a0_0x241661(0xda)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x241661(0xdc)),auth=require(a0_0x241661(0xd4)),nodemailer=require(a0_0x241661(0xcc));var ejs=require(a0_0x241661(0xe4));const path=require(a0_0x241661(0xe9)),users=require('../public/language/languages.json');router[a0_0x241661(0xd3)]('/view',async(_0xa303d6,_0x378570)=>{const _0x55ffaa=a0_0x241661;try{const {warehouse_category:_0x2a2321}=_0xa303d6[_0x55ffaa(0xe0)];if(_0x2a2321=='RM'){const _0x8b45d2=await warehouse[_0x55ffaa(0xd7)]([{'$match':{'status':_0x55ffaa(0xcb),'warehouse_category':_0x55ffaa(0xf0),'name':{'$ne':_0x55ffaa(0xd8)}}},{'$group':{'_id':_0x55ffaa(0xec),'name':{'$first':_0x55ffaa(0xec)}}}]);_0x378570['json'](_0x8b45d2);}else{const _0x346542=await warehouse['aggregate']([{'$match':{'status':_0x55ffaa(0xcb),'warehouse_category':_0x55ffaa(0xcf),'name':{'$ne':_0x55ffaa(0xd8)}}},{'$group':{'_id':_0x55ffaa(0xec),'name':{'$first':_0x55ffaa(0xec)}}}]);_0x378570[_0x55ffaa(0xed)](_0x346542);}}catch(_0x1bcfba){console[_0x55ffaa(0xeb)](_0x55ffaa(0xe2),_0x1bcfba),_0x378570[_0x55ffaa(0xc9)](0xc8)['json']({'message':_0x1bcfba[_0x55ffaa(0xdd)]});}}),router[a0_0x241661(0xd3)](a0_0x241661(0xe7),async(_0x5e691b,_0x1dd7fd)=>{const _0x26a6f3=a0_0x241661;try{const _0x5db739=await suppliers[_0x26a6f3(0xd5)]({});_0x1dd7fd[_0x26a6f3(0xc9)](0xc8)[_0x26a6f3(0xed)](_0x5db739);}catch(_0x1ee48d){console[_0x26a6f3(0xeb)](_0x26a6f3(0xe2),_0x1ee48d),_0x1dd7fd[_0x26a6f3(0xc9)](0xc8)[_0x26a6f3(0xed)]({'message':_0x1ee48d[_0x26a6f3(0xdd)]});}}),router[a0_0x241661(0xd3)](a0_0x241661(0xd6),async(_0x4197c2,_0x54aac3)=>{const _0x5cbe5e=a0_0x241661;try{const {wahouse_data:_0x3f10b0}=_0x4197c2[_0x5cbe5e(0xe0)],_0x476197=[{'$match':{'name':_0x3f10b0,'status':_0x5cbe5e(0xcb)}},{'$group':{'_id':_0x5cbe5e(0xe5),'room_name':{'$first':_0x5cbe5e(0xef)}}},{'$sort':{'room_name':0x1}}],_0x58b83a=await warehouse[_0x5cbe5e(0xd7)](_0x476197);_0x54aac3[_0x5cbe5e(0xc9)](0xc8)['json'](_0x58b83a);}catch(_0x39fb2d){console['log'](_0x5cbe5e(0xe2),_0x39fb2d),_0x54aac3[_0x5cbe5e(0xc9)](0xc8)[_0x5cbe5e(0xed)]({'message':_0x39fb2d[_0x5cbe5e(0xdd)]});}}),router['post'](a0_0x241661(0xd0),async(_0xcede3a,_0x5e4954)=>{const _0x42e323=a0_0x241661;try{const _0x502958=0x989680,_0x441dd9=0x5f5e0ff,_0x1d0d88=Math['floor'](Math[_0x42e323(0xea)]()*(_0x441dd9-_0x502958+0x1))+_0x502958;var _0xc90e68;const _0x4150d9=await purchases[_0x42e323(0xca)]({'invoice':_0x42e323(0xd1)+_0x1d0d88});return _0x4150d9&&_0x4150d9[_0x42e323(0xd2)]>0x0?_0xc90e68='INC-'+_0x1d0d88:_0xc90e68=_0x42e323(0xd1)+_0x1d0d88,_0x5e4954[_0x42e323(0xed)]({'incoming_invoice':_0xc90e68}),_0xc90e68;}catch(_0x999935){console['log']('table\x20page',_0x999935),_0x5e4954[_0x42e323(0xc9)](0xc8)['json']({'message':_0x999935['message']});}}),module[a0_0x241661(0xd9)]=router;