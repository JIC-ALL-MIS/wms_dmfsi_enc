const a0_0x18ebd0=a0_0xce25;(function(_0x153942,_0x53cf4f){const _0x44ca3d=a0_0xce25,_0x36b22f=_0x153942();while(!![]){try{const _0x2584b1=-parseInt(_0x44ca3d(0x184))/0x1+-parseInt(_0x44ca3d(0x17f))/0x2+-parseInt(_0x44ca3d(0x199))/0x3*(parseInt(_0x44ca3d(0x195))/0x4)+-parseInt(_0x44ca3d(0x188))/0x5+-parseInt(_0x44ca3d(0x183))/0x6*(-parseInt(_0x44ca3d(0x192))/0x7)+parseInt(_0x44ca3d(0x198))/0x8+parseInt(_0x44ca3d(0x18e))/0x9;if(_0x2584b1===_0x53cf4f)break;else _0x36b22f['push'](_0x36b22f['shift']());}catch(_0x3c3410){_0x36b22f['push'](_0x36b22f['shift']());}}}(a0_0x3dfb,0x977ce));const express=require(a0_0x18ebd0(0x194)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x18ebd0(0x189)),auth=require(a0_0x18ebd0(0x191)),nodemailer=require(a0_0x18ebd0(0x17d));function a0_0xce25(_0x5bf29e,_0x1e0960){const _0x3dfb78=a0_0x3dfb();return a0_0xce25=function(_0xce2567,_0x34bd2e){_0xce2567=_0xce2567-0x172;let _0x461ecd=_0x3dfb78[_0xce2567];return _0x461ecd;},a0_0xce25(_0x5bf29e,_0x1e0960);}var ejs=require(a0_0x18ebd0(0x178));const path=require(a0_0x18ebd0(0x175)),users=require('../public/language/languages.json');router[a0_0x18ebd0(0x179)]('/view',async(_0x1509f0,_0x192e78)=>{const _0x5345e9=a0_0x18ebd0;try{const _0x5bbd74=parseInt(_0x1509f0[_0x5345e9(0x19d)][_0x5345e9(0x174)])||0x0,_0x18243e=parseInt(_0x1509f0[_0x5345e9(0x19d)][_0x5345e9(0x190)])||0xa;let _0x90aa46;_0x90aa46=await purchases[_0x5345e9(0x19c)]([{'$lookup':{'from':_0x5345e9(0x19b),'localField':'suppliers','foreignField':_0x5345e9(0x17a),'as':'suppliers_docs'}},{'$unwind':_0x5345e9(0x19a)},{'$unwind':'$product'},{'$group':{'_id':_0x5345e9(0x176),'invoice':{'$first':'$invoice'},'suppliers':{'$first':_0x5345e9(0x18b)},'date':{'$first':_0x5345e9(0x187)},'warehouse_name':{'$first':_0x5345e9(0x18a)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':_0x5345e9(0x180)},'note':{'$first':_0x5345e9(0x196)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0x5345e9(0x17e)},'return_data':{'$first':_0x5345e9(0x173)},'batch_code':{'$first':_0x5345e9(0x186)},'expiry_date':{'$first':_0x5345e9(0x17c)},'suppliers_docs':{'$first':_0x5345e9(0x19a)},'total_product_quantity':{'$sum':_0x5345e9(0x181)},'level':{'$addToSet':_0x5345e9(0x182)},'isle':{'$addToSet':_0x5345e9(0x18f)},'type':{'$addToSet':_0x5345e9(0x185)},'floorlevel':{'$addToSet':'$product.floorlevel'},'finalize':{'$first':_0x5345e9(0x18d)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x5bbd74},{'$limit':_0x18243e-_0x5bbd74}]),_0x192e78[_0x5345e9(0x17b)](_0x90aa46);}catch(_0x2539cd){console[_0x5345e9(0x172)](_0x5345e9(0x193),_0x2539cd),_0x192e78[_0x5345e9(0x197)](0xc8)[_0x5345e9(0x17b)]({'message':_0x2539cd[_0x5345e9(0x18c)]});}}),module[a0_0x18ebd0(0x177)]=router;function a0_0x3dfb(){const _0x53ce55=['$due_amount','971102gKykkO','$product','$product.quantity','$product.bay','24ZfdmrD','861550ktNEFh','$product.type','$batch_code','$date','2399390njoUwJ','../models/all_models','$warehouse_name','$suppliers','message','$finalize','29928537vfycHI','$product.bin','end','../middleware/auth','86737HpNEMK','table\x20page','express','4LKPAHz','$note','status','1562296VRJEKy','3368313IWtDgh','$suppliers_docs','suppliers','aggregate','query','log','$return_data','start','path','$_id','exports','ejs','get','name','json','$expiry_date','nodemailer'];a0_0x3dfb=function(){return _0x53ce55;};return a0_0x3dfb();}