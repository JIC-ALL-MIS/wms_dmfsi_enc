const a0_0x293c87=a0_0x1d91;(function(_0x4c287c,_0x58e986){const _0xb2d7e9=a0_0x1d91,_0x382ecf=_0x4c287c();while(!![]){try{const _0x32cf25=parseInt(_0xb2d7e9(0xd9))/0x1+parseInt(_0xb2d7e9(0xc6))/0x2+-parseInt(_0xb2d7e9(0xce))/0x3*(-parseInt(_0xb2d7e9(0xc2))/0x4)+parseInt(_0xb2d7e9(0xdd))/0x5*(-parseInt(_0xb2d7e9(0xda))/0x6)+parseInt(_0xb2d7e9(0xde))/0x7+-parseInt(_0xb2d7e9(0xe4))/0x8*(-parseInt(_0xb2d7e9(0xca))/0x9)+-parseInt(_0xb2d7e9(0xee))/0xa*(parseInt(_0xb2d7e9(0xfd))/0xb);if(_0x32cf25===_0x58e986)break;else _0x382ecf['push'](_0x382ecf['shift']());}catch(_0x42ee1d){_0x382ecf['push'](_0x382ecf['shift']());}}}(a0_0x4020,0xf1fc1));const express=require(a0_0x293c87(0xfa)),app=express(),router=express[a0_0x293c87(0xf3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x293c87(0xc4)),auth=require(a0_0x293c87(0xf4)),nodemailer=require(a0_0x293c87(0xe9));var ejs=require(a0_0x293c87(0xf2));const path=require('path'),users=require(a0_0x293c87(0xf7));function a0_0x1d91(_0x59a978,_0x21c3da){const _0x402089=a0_0x4020();return a0_0x1d91=function(_0x1d91e7,_0x11ca99){_0x1d91e7=_0x1d91e7-0xc1;let _0x4ce518=_0x402089[_0x1d91e7];return _0x4ce518;},a0_0x1d91(_0x59a978,_0x21c3da);}function a0_0x4020(){const _0x4156b2=['$product.bay','express','/view','$expiry_date','7902048MGogHt','length','$date','1101788KhSFJq','body','../models/all_models','$note','613260pTNoPa','log','$alertquantity','$product_code','18KptKki','$suppliers','$warehouse_name','aggregate','12UcLWip','$paid_amount','$batch_code','end','Raw\x20Materials','$category','name','$invoice','get','$maxProdPerUnit','exports','1343971OPNMOA','27132TaxKlo','$primary_code','$secondary_unit','1185rAzaLE','6158292mseAtu','suppliers','query','$maxStocks','$_id','$product.type','2343368OyYcLK','message','$return_data','$product.bin','json','nodemailer','$unit','$product.floorlevel','$due_amount','$suppliers_docs','30vQtLuY','$product.quantity','$secondary_code','suppliers_docs','ejs','Router','../middleware/auth','post','$product.room_name','../public/language/languages.json','status'];a0_0x4020=function(){return _0x4156b2;};return a0_0x4020();}router[a0_0x293c87(0xd6)](a0_0x293c87(0xfb),async(_0x4d2d6c,_0x37e7d6)=>{const _0x53a072=a0_0x293c87;try{const _0xdbd71=parseInt(_0x4d2d6c[_0x53a072(0xe0)]['start'])||0x0,_0x50203d=parseInt(_0x4d2d6c['query'][_0x53a072(0xd1)])||0xa;let _0x495f94;_0x495f94=await purchases[_0x53a072(0xcd)]([{'$lookup':{'from':_0x53a072(0xdf),'localField':'suppliers','foreignField':_0x53a072(0xd4),'as':_0x53a072(0xf1)}},{'$unwind':_0x53a072(0xed)},{'$unwind':'$product'},{'$group':{'_id':_0x53a072(0xe2),'invoice':{'$first':_0x53a072(0xd5)},'suppliers':{'$first':_0x53a072(0xcb)},'date':{'$first':_0x53a072(0xc1)},'warehouse_name':{'$first':_0x53a072(0xcc)},'room':{'$addToSet':_0x53a072(0xf6)},'product':{'$push':'$product'},'note':{'$first':_0x53a072(0xc5)},'paid_amount':{'$first':_0x53a072(0xcf)},'due_amount':{'$first':_0x53a072(0xec)},'return_data':{'$first':_0x53a072(0xe6)},'batch_code':{'$first':_0x53a072(0xd0)},'expiry_date':{'$first':_0x53a072(0xfc)},'suppliers_docs':{'$first':_0x53a072(0xed)},'total_product_quantity':{'$sum':_0x53a072(0xef)},'level':{'$addToSet':_0x53a072(0xf9)},'isle':{'$addToSet':_0x53a072(0xe7)},'type':{'$addToSet':_0x53a072(0xe3)},'floorlevel':{'$addToSet':_0x53a072(0xeb)},'finalize':{'$first':'$finalize'}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0xdbd71},{'$limit':_0x50203d-_0xdbd71}]),_0x37e7d6[_0x53a072(0xe8)](_0x495f94);}catch(_0x1e24fe){console[_0x53a072(0xc7)]('table\x20page',_0x1e24fe),_0x37e7d6[_0x53a072(0xf8)](0xc8)[_0x53a072(0xe8)]({'message':_0x1e24fe[_0x53a072(0xe5)]});}}),router[a0_0x293c87(0xf5)]('/barcode_scanner',async(_0x10178c,_0x14d4e2)=>{const _0x387956=a0_0x293c87,{product_code:_0x1d1dc6}=_0x10178c[_0x387956(0xc3)];var _0x59911d;const _0x44841d=await product[_0x387956(0xcd)]([{'$match':{'primary_code':_0x1d1dc6,'product_category':_0x387956(0xd2)}},{'$group':{'_id':'$_id','name':{'$first':'$name'},'category':{'$first':'$category'},'brand':{'$first':'$brand'},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x387956(0xc8)},'product_code':{'$first':_0x387956(0xc9)},'primary_code':{'$first':_0x387956(0xdb)},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':'$maxStocks'},'maxProdPerUnit':{'$first':_0x387956(0xd7)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x145e62=await product[_0x387956(0xcd)]([{'$match':{'secondary_code':_0x1d1dc6,'product_category':_0x387956(0xd2)}},{'$group':{'_id':_0x387956(0xe2),'name':{'$first':'$name'},'category':{'$first':_0x387956(0xd3)},'brand':{'$first':'$brand'},'unit':{'$first':_0x387956(0xea)},'alertquantity':{'$first':_0x387956(0xc8)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x387956(0xdb)},'secondary_code':{'$first':_0x387956(0xf0)},'maxStocks':{'$first':_0x387956(0xe1)},'maxProdPerUnit':{'$first':_0x387956(0xd7)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x387956(0xdc)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x44841d[_0x387956(0xfe)]>0x0)_0x59911d=_0x44841d;else _0x145e62[_0x387956(0xfe)]>0x0&&(_0x59911d=_0x145e62);_0x14d4e2['json'](_0x59911d);}),module[a0_0x293c87(0xd8)]=router;