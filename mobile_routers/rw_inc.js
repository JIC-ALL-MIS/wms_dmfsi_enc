const a0_0x2a26ba=a0_0x221b;(function(_0x5ea13e,_0x4363a2){const _0xfe555=a0_0x221b,_0xbbbdb0=_0x5ea13e();while(!![]){try{const _0x562701=parseInt(_0xfe555(0x1b9))/0x1+-parseInt(_0xfe555(0x1b0))/0x2*(parseInt(_0xfe555(0x18f))/0x3)+parseInt(_0xfe555(0x193))/0x4+-parseInt(_0xfe555(0x1ab))/0x5+-parseInt(_0xfe555(0x188))/0x6*(-parseInt(_0xfe555(0x190))/0x7)+-parseInt(_0xfe555(0x183))/0x8+parseInt(_0xfe555(0x1b2))/0x9;if(_0x562701===_0x4363a2)break;else _0xbbbdb0['push'](_0xbbbdb0['shift']());}catch(_0x4d4ad8){_0xbbbdb0['push'](_0xbbbdb0['shift']());}}}(a0_0x375d,0x9b222));const express=require(a0_0x2a26ba(0x186)),app=express(),router=express[a0_0x2a26ba(0x187)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x2a26ba(0x18d)),auth=require(a0_0x2a26ba(0x1a5)),nodemailer=require('nodemailer');function a0_0x221b(_0xc7539a,_0x23a705){const _0x375dcf=a0_0x375d();return a0_0x221b=function(_0x221bfa,_0x3dc574){_0x221bfa=_0x221bfa-0x182;let _0x3122ce=_0x375dcf[_0x221bfa];return _0x3122ce;},a0_0x221b(_0xc7539a,_0x23a705);}function a0_0x375d(){const _0x323e87=['$primary_code','body','length','$paid_amount','572540OkLANb','Raw\x20Materials','$product.bin','$category','$product.floorlevel','65986IvEUhz','$name','3345498LeBGIJ','$note','get','$alertquantity','post','$_id','aggregate','1074378WWvrVP','$maxProdPerUnit','$warehouse_name','../public/language/languages.json','1349840XXtvax','ejs','$secondary_unit','express','Router','2016858LmViJA','suppliers','message','/view','$secondary_code','../models/all_models','$product.type','111QVrBku','7wEzFFi','table\x20page','status','1428648qfWhGS','name','$suppliers_docs','$date','$suppliers','exports','$product','json','$due_amount','suppliers_docs','$maxStocks','$unit','$invoice','end','start','log','$brand','$finalize','../middleware/auth','query'];a0_0x375d=function(){return _0x323e87;};return a0_0x375d();}var ejs=require(a0_0x2a26ba(0x184));const path=require('path'),users=require(a0_0x2a26ba(0x182));router[a0_0x2a26ba(0x1b4)](a0_0x2a26ba(0x18b),async(_0x1c7a4e,_0x5c41a5)=>{const _0xa0e3de=a0_0x2a26ba;try{const _0x4b2797=parseInt(_0x1c7a4e['query'][_0xa0e3de(0x1a1)])||0x0,_0x5b1e74=parseInt(_0x1c7a4e[_0xa0e3de(0x1a6)][_0xa0e3de(0x1a0)])||0xa;let _0x535e17;_0x535e17=await purchases[_0xa0e3de(0x1b8)]([{'$lookup':{'from':_0xa0e3de(0x189),'localField':_0xa0e3de(0x189),'foreignField':_0xa0e3de(0x194),'as':_0xa0e3de(0x19c)}},{'$unwind':_0xa0e3de(0x195)},{'$unwind':_0xa0e3de(0x199)},{'$group':{'_id':'$_id','invoice':{'$first':_0xa0e3de(0x19f)},'suppliers':{'$first':_0xa0e3de(0x197)},'date':{'$first':_0xa0e3de(0x196)},'warehouse_name':{'$first':_0xa0e3de(0x1bb)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':'$product'},'note':{'$first':_0xa0e3de(0x1b3)},'paid_amount':{'$first':_0xa0e3de(0x1aa)},'due_amount':{'$first':_0xa0e3de(0x19b)},'return_data':{'$first':'$return_data'},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':'$expiry_date'},'suppliers_docs':{'$first':_0xa0e3de(0x195)},'total_product_quantity':{'$sum':'$product.quantity'},'level':{'$addToSet':'$product.bay'},'isle':{'$addToSet':_0xa0e3de(0x1ad)},'type':{'$addToSet':_0xa0e3de(0x18e)},'floorlevel':{'$addToSet':_0xa0e3de(0x1af)},'finalize':{'$first':_0xa0e3de(0x1a4)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x4b2797},{'$limit':_0x5b1e74-_0x4b2797}]),_0x5c41a5[_0xa0e3de(0x19a)](_0x535e17);}catch(_0x3e57ad){console[_0xa0e3de(0x1a2)](_0xa0e3de(0x191),_0x3e57ad),_0x5c41a5[_0xa0e3de(0x192)](0xc8)[_0xa0e3de(0x19a)]({'message':_0x3e57ad[_0xa0e3de(0x18a)]});}}),router[a0_0x2a26ba(0x1b6)]('/barcode_scanner',async(_0x4f1172,_0x402bfa)=>{const _0x381f8f=a0_0x2a26ba,{product_code:_0x4f0842}=_0x4f1172[_0x381f8f(0x1a8)];var _0x14a725;const _0x4e9f3f=await product[_0x381f8f(0x1b8)]([{'$match':{'primary_code':_0x4f0842,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x381f8f(0x1b7),'name':{'$first':_0x381f8f(0x1b1)},'category':{'$first':_0x381f8f(0x1ae)},'brand':{'$first':_0x381f8f(0x1a3)},'unit':{'$first':'$unit'},'alertquantity':{'$first':'$alertquantity'},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x381f8f(0x1a7)},'secondary_code':{'$first':_0x381f8f(0x18c)},'maxStocks':{'$first':_0x381f8f(0x19d)},'maxProdPerUnit':{'$first':_0x381f8f(0x1ba)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x381f8f(0x185)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x324aa5=await product[_0x381f8f(0x1b8)]([{'$match':{'secondary_code':_0x4f0842,'product_category':_0x381f8f(0x1ac)}},{'$group':{'_id':_0x381f8f(0x1b7),'name':{'$first':_0x381f8f(0x1b1)},'category':{'$first':_0x381f8f(0x1ae)},'brand':{'$first':'$brand'},'unit':{'$first':_0x381f8f(0x19e)},'alertquantity':{'$first':_0x381f8f(0x1b5)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x381f8f(0x1a7)},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':_0x381f8f(0x19d)},'maxProdPerUnit':{'$first':_0x381f8f(0x1ba)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x4e9f3f['length']>0x0)_0x14a725=_0x4e9f3f;else _0x324aa5[_0x381f8f(0x1a9)]>0x0&&(_0x14a725=_0x324aa5);_0x402bfa[_0x381f8f(0x19a)](_0x14a725);}),module[a0_0x2a26ba(0x198)]=router;