function a0_0x359a(_0x519f3b,_0x2229e1){const _0xcd5213=a0_0xcd52();return a0_0x359a=function(_0x359a27,_0x42c558){_0x359a27=_0x359a27-0x155;let _0x154c64=_0xcd5213[_0x359a27];return _0x154c64;},a0_0x359a(_0x519f3b,_0x2229e1);}const a0_0x343720=a0_0x359a;function a0_0xcd52(){const _0x4d7803=['$product.floorlevel','path','$date','$due_amount','$secondary_unit','/view','$secondary_code','$primary_code','$category','status','/barcode_scanner','body','11875087yZWGag','80VXkUEi','$product.type','4206CQczJa','suppliers','$name','$product.bay','post','1095112UjBBLO','../public/language/languages.json','table\x20page','../middleware/auth','json','8110OvmWGX','36rehnwh','name','length','14912052fbrDhS','112662qaNFag','query','end','ejs','4LTbubQ','aggregate','$suppliers','exports','get','$product_code','$maxProdPerUnit','log','Raw\x20Materials','$unit','suppliers_docs','$brand','405564GWlCBe','$alertquantity','$suppliers_docs','$_id','nodemailer','232494nzBzDX','$warehouse_name','$maxStocks','$note','$invoice','16JyvMXb'];a0_0xcd52=function(){return _0x4d7803;};return a0_0xcd52();}(function(_0x27127c,_0x1b5ae8){const _0x284b80=a0_0x359a,_0x491f58=_0x27127c();while(!![]){try{const _0x8b23eb=parseInt(_0x284b80(0x17c))/0x1*(parseInt(_0x284b80(0x188))/0x2)+-parseInt(_0x284b80(0x18d))/0x3*(-parseInt(_0x284b80(0x159))/0x4)+parseInt(_0x284b80(0x173))/0x5*(-parseInt(_0x284b80(0x169))/0x6)+parseInt(_0x284b80(0x166))/0x7+parseInt(_0x284b80(0x16e))/0x8*(parseInt(_0x284b80(0x174))/0x9)+parseInt(_0x284b80(0x167))/0xa*(-parseInt(_0x284b80(0x178))/0xb)+-parseInt(_0x284b80(0x177))/0xc;if(_0x8b23eb===_0x1b5ae8)break;else _0x491f58['push'](_0x491f58['shift']());}catch(_0x3dfd46){_0x491f58['push'](_0x491f58['shift']());}}}(a0_0xcd52,0xdc940));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x343720(0x171)),nodemailer=require(a0_0x343720(0x18c));var ejs=require(a0_0x343720(0x17b));const path=require(a0_0x343720(0x15b)),users=require(a0_0x343720(0x16f));router[a0_0x343720(0x180)](a0_0x343720(0x15f),async(_0x3e8986,_0xa54557)=>{const _0x576336=a0_0x343720;try{const _0x20ded9=parseInt(_0x3e8986[_0x576336(0x179)]['start'])||0x0,_0x3403b5=parseInt(_0x3e8986[_0x576336(0x179)][_0x576336(0x17a)])||0xa;let _0xb1a5df;_0xb1a5df=await purchases[_0x576336(0x17d)]([{'$lookup':{'from':_0x576336(0x16a),'localField':_0x576336(0x16a),'foreignField':_0x576336(0x175),'as':_0x576336(0x186)}},{'$unwind':'$suppliers_docs'},{'$unwind':'$product'},{'$group':{'_id':_0x576336(0x18b),'invoice':{'$first':_0x576336(0x158)},'suppliers':{'$first':_0x576336(0x17e)},'date':{'$first':_0x576336(0x15c)},'warehouse_name':{'$first':_0x576336(0x155)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':'$product'},'note':{'$first':_0x576336(0x157)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0x576336(0x15d)},'return_data':{'$first':'$return_data'},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':'$expiry_date'},'suppliers_docs':{'$first':_0x576336(0x18a)},'total_product_quantity':{'$sum':'$product.quantity'},'level':{'$addToSet':_0x576336(0x16c)},'isle':{'$addToSet':'$product.bin'},'type':{'$addToSet':_0x576336(0x168)},'floorlevel':{'$addToSet':_0x576336(0x15a)},'finalize':{'$first':'$finalize'}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x20ded9},{'$limit':_0x3403b5-_0x20ded9}]),_0xa54557[_0x576336(0x172)](_0xb1a5df);}catch(_0x585412){console[_0x576336(0x183)](_0x576336(0x170),_0x585412),_0xa54557[_0x576336(0x163)](0xc8)[_0x576336(0x172)]({'message':_0x585412['message']});}}),router[a0_0x343720(0x16d)](a0_0x343720(0x164),async(_0x5289db,_0x1749b6)=>{const _0x799948=a0_0x343720,{product_code:_0x48d34a}=_0x5289db[_0x799948(0x165)];var _0xcce21f;const _0x11dbc5=await product['aggregate']([{'$match':{'primary_code':_0x48d34a,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x799948(0x18b),'name':{'$first':'$name'},'category':{'$first':_0x799948(0x162)},'brand':{'$first':_0x799948(0x187)},'unit':{'$first':_0x799948(0x185)},'alertquantity':{'$first':_0x799948(0x189)},'product_code':{'$first':_0x799948(0x181)},'primary_code':{'$first':_0x799948(0x161)},'secondary_code':{'$first':_0x799948(0x160)},'maxStocks':{'$first':_0x799948(0x156)},'maxProdPerUnit':{'$first':_0x799948(0x182)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x799948(0x15e)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x121a04=await product[_0x799948(0x17d)]([{'$match':{'secondary_code':_0x48d34a,'product_category':_0x799948(0x184)}},{'$group':{'_id':_0x799948(0x18b),'name':{'$first':_0x799948(0x16b)},'category':{'$first':_0x799948(0x162)},'brand':{'$first':'$brand'},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x799948(0x189)},'product_code':{'$first':_0x799948(0x181)},'primary_code':{'$first':_0x799948(0x161)},'secondary_code':{'$first':_0x799948(0x160)},'maxStocks':{'$first':'$maxStocks'},'maxProdPerUnit':{'$first':_0x799948(0x182)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x799948(0x15e)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x11dbc5['length']>0x0)_0xcce21f=_0x11dbc5;else _0x121a04[_0x799948(0x176)]>0x0&&(_0xcce21f=_0x121a04);_0x1749b6[_0x799948(0x172)](_0xcce21f);}),module[a0_0x343720(0x17f)]=router;