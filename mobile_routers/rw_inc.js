const a0_0x5b682b=a0_0x3e95;(function(_0x2d510e,_0x4d7b4e){const _0x5e2913=a0_0x3e95,_0x3e974c=_0x2d510e();while(!![]){try{const _0x39fd62=parseInt(_0x5e2913(0xb6))/0x1*(parseInt(_0x5e2913(0xda))/0x2)+-parseInt(_0x5e2913(0xc8))/0x3+parseInt(_0x5e2913(0xba))/0x4+-parseInt(_0x5e2913(0xc9))/0x5*(parseInt(_0x5e2913(0xd9))/0x6)+-parseInt(_0x5e2913(0xcc))/0x7*(parseInt(_0x5e2913(0xcd))/0x8)+parseInt(_0x5e2913(0xe6))/0x9*(parseInt(_0x5e2913(0xdb))/0xa)+parseInt(_0x5e2913(0xd1))/0xb;if(_0x39fd62===_0x4d7b4e)break;else _0x3e974c['push'](_0x3e974c['shift']());}catch(_0x41b982){_0x3e974c['push'](_0x3e974c['shift']());}}}(a0_0x3680,0x8225b));const express=require(a0_0x5b682b(0xd0)),app=express(),router=express[a0_0x5b682b(0xe4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x5b682b(0xe5)),auth=require(a0_0x5b682b(0xc0)),nodemailer=require(a0_0x5b682b(0xc2));function a0_0x3e95(_0x2a99c5,_0x237e74){const _0x368090=a0_0x3680();return a0_0x3e95=function(_0x3e95bf,_0x197268){_0x3e95bf=_0x3e95bf-0xac;let _0x3f1f95=_0x368090[_0x3e95bf];return _0x3f1f95;},a0_0x3e95(_0x2a99c5,_0x237e74);}var ejs=require(a0_0x5b682b(0xb3));const path=require(a0_0x5b682b(0xd6)),users=require('../public/language/languages.json');function a0_0x3680(){const _0x55a60f=['$product.bin','$product.room_name','ejs','$expiry_date','Raw\x20Materials','114305wYTZJX','$suppliers','$warehouse_name','end','2193708qqKYcH','$secondary_unit','$primary_code','$alertquantity','suppliers','/view','../middleware/auth','$note','nodemailer','$secondary_code','body','post','$category','$product.bay','1558329SsnrUh','2475NPHmJR','$product_code','start','613424xpdLCb','64ESoaAs','$invoice','$product.type','express','172766sbRShV','status','query','exports','$finalize','path','$name','message','306QnbWAr','4ZtWngq','135080JxaOac','$batch_code','aggregate','table\x20page','length','$product','$maxProdPerUnit','json','$unit','Router','../models/all_models','657sOAsCX','$brand','/barcode_scanner','$_id','log','$maxStocks'];a0_0x3680=function(){return _0x55a60f;};return a0_0x3680();}router['get'](a0_0x5b682b(0xbf),async(_0x5e9988,_0x408d16)=>{const _0x260f52=a0_0x5b682b;try{const _0x5b37dc=parseInt(_0x5e9988[_0x260f52(0xd3)][_0x260f52(0xcb)])||0x0,_0x335f06=parseInt(_0x5e9988[_0x260f52(0xd3)][_0x260f52(0xb9)])||0xa;let _0x54b1c0;_0x54b1c0=await purchases[_0x260f52(0xdd)]([{'$lookup':{'from':_0x260f52(0xbe),'localField':'suppliers','foreignField':'name','as':'suppliers_docs'}},{'$unwind':'$suppliers_docs'},{'$unwind':_0x260f52(0xe0)},{'$group':{'_id':'$_id','invoice':{'$first':_0x260f52(0xce)},'suppliers':{'$first':_0x260f52(0xb7)},'date':{'$first':'$date'},'warehouse_name':{'$first':_0x260f52(0xb8)},'room':{'$addToSet':_0x260f52(0xb2)},'product':{'$push':_0x260f52(0xe0)},'note':{'$first':_0x260f52(0xc1)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':'$due_amount'},'return_data':{'$first':'$return_data'},'batch_code':{'$first':_0x260f52(0xdc)},'expiry_date':{'$first':_0x260f52(0xb4)},'suppliers_docs':{'$first':'$suppliers_docs'},'total_product_quantity':{'$sum':'$product.quantity'},'level':{'$addToSet':_0x260f52(0xc7)},'isle':{'$addToSet':_0x260f52(0xb1)},'type':{'$addToSet':_0x260f52(0xcf)},'floorlevel':{'$addToSet':'$product.floorlevel'},'finalize':{'$first':_0x260f52(0xd5)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x5b37dc},{'$limit':_0x335f06-_0x5b37dc}]),_0x408d16[_0x260f52(0xe2)](_0x54b1c0);}catch(_0x17e877){console[_0x260f52(0xaf)](_0x260f52(0xde),_0x17e877),_0x408d16[_0x260f52(0xd2)](0xc8)['json']({'message':_0x17e877[_0x260f52(0xd8)]});}}),router[a0_0x5b682b(0xc5)](a0_0x5b682b(0xad),async(_0x329219,_0x1ec6ea)=>{const _0x44d650=a0_0x5b682b,{product_code:_0x38f870}=_0x329219[_0x44d650(0xc4)];var _0x20c86d;const _0x25730c=await product[_0x44d650(0xdd)]([{'$match':{'primary_code':_0x38f870,'product_category':_0x44d650(0xb5)}},{'$group':{'_id':_0x44d650(0xae),'name':{'$first':_0x44d650(0xd7)},'category':{'$first':_0x44d650(0xc6)},'brand':{'$first':'$brand'},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x44d650(0xbd)},'product_code':{'$first':_0x44d650(0xca)},'primary_code':{'$first':_0x44d650(0xbc)},'secondary_code':{'$first':_0x44d650(0xc3)},'maxStocks':{'$first':_0x44d650(0xb0)},'maxProdPerUnit':{'$first':'$maxProdPerUnit'},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x44d650(0xbb)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x4b766d=await product[_0x44d650(0xdd)]([{'$match':{'secondary_code':_0x38f870,'product_category':_0x44d650(0xb5)}},{'$group':{'_id':_0x44d650(0xae),'name':{'$first':_0x44d650(0xd7)},'category':{'$first':_0x44d650(0xc6)},'brand':{'$first':_0x44d650(0xac)},'unit':{'$first':_0x44d650(0xe3)},'alertquantity':{'$first':_0x44d650(0xbd)},'product_code':{'$first':_0x44d650(0xca)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':_0x44d650(0xc3)},'maxStocks':{'$first':_0x44d650(0xb0)},'maxProdPerUnit':{'$first':_0x44d650(0xe1)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x44d650(0xbb)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x25730c['length']>0x0)_0x20c86d=_0x25730c;else _0x4b766d[_0x44d650(0xdf)]>0x0&&(_0x20c86d=_0x4b766d);_0x1ec6ea['json'](_0x20c86d);}),module[a0_0x5b682b(0xd4)]=router;